var Yp=Object.defineProperty;var Df=Oe=>{throw TypeError(Oe)};var Xp=(Oe,e,Te)=>e in Oe?Yp(Oe,e,{enumerable:!0,configurable:!0,writable:!0,value:Te}):Oe[e]=Te;var Mc=(Oe,e,Te)=>Xp(Oe,typeof e!="symbol"?e+"":e,Te),of=(Oe,e,Te)=>e.has(Oe)||Df("Cannot "+Te);var yl=(Oe,e,Te)=>(of(Oe,e,"read from private field"),Te?Te.call(Oe):e.get(Oe)),Iu=(Oe,e,Te)=>e.has(Oe)?Df("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(Oe):e.set(Oe,Te),Hc=(Oe,e,Te,ke)=>(of(Oe,e,"write to private field"),ke?ke.call(Oe,Te):e.set(Oe,Te),Te),ac=(Oe,e,Te)=>(of(Oe,e,"access private method"),Te);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const Be of document.querySelectorAll('link[rel="modulepreload"]'))ke(Be);new MutationObserver(Be=>{for(const Ue of Be)if(Ue.type==="childList")for(const He of Ue.addedNodes)He.tagName==="LINK"&&He.rel==="modulepreload"&&ke(He)}).observe(document,{childList:!0,subtree:!0});function Te(Be){const Ue={};return Be.integrity&&(Ue.integrity=Be.integrity),Be.referrerPolicy&&(Ue.referrerPolicy=Be.referrerPolicy),Be.crossOrigin==="use-credentials"?Ue.credentials="include":Be.crossOrigin==="anonymous"?Ue.credentials="omit":Ue.credentials="same-origin",Ue}function ke(Be){if(Be.ep)return;Be.ep=!0;const Ue=Te(Be);fetch(Be.href,Ue)}})();const scriptRel="modulepreload",assetsURL=function(Oe){return"/cartes.gouv.fr-entree-carto/"+Oe},seen$2={},__vitePreload=function(e,Te,ke){let Be=Promise.resolve();if(Te&&Te.length>0){document.getElementsByTagName("link");const He=document.querySelector("meta[property=csp-nonce]"),We=(He==null?void 0:He.nonce)||(He==null?void 0:He.getAttribute("nonce"));Be=Promise.allSettled(Te.map(Cn=>{if(Cn=assetsURL(Cn),Cn in seen$2)return;seen$2[Cn]=!0;const En=Cn.endsWith(".css"),An=En?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Cn}"]${An}`))return;const Sn=document.createElement("link");if(Sn.rel=En?"stylesheet":scriptRel,En||(Sn.as="script"),Sn.crossOrigin="",Sn.href=Cn,We&&Sn.setAttribute("nonce",We),document.head.appendChild(Sn),En)return new Promise((Tn,Ln)=>{Sn.addEventListener("load",Tn),Sn.addEventListener("error",()=>Ln(new Error(`Unable to preload CSS for ${Cn}`)))})}))}function Ue(He){const We=new Event("vite:preloadError",{cancelable:!0});if(We.payload=He,window.dispatchEvent(We),!We.defaultPrevented)throw He}return Be.then(He=>{for(const We of He||[])We.status==="rejected"&&Ue(We.reason);return e().catch(Ue)})};/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(Oe){const e=Object.create(null);for(const Te of Oe.split(","))e[Te]=1;return Te=>Te in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=Oe=>Oe.charCodeAt(0)===111&&Oe.charCodeAt(1)===110&&(Oe.charCodeAt(2)>122||Oe.charCodeAt(2)<97),isModelListener=Oe=>Oe.startsWith("onUpdate:"),extend$5=Object.assign,remove=(Oe,e)=>{const Te=Oe.indexOf(e);Te>-1&&Oe.splice(Te,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(Oe,e)=>hasOwnProperty$1.call(Oe,e),isArray$1=Array.isArray,isMap=Oe=>toTypeString(Oe)==="[object Map]",isSet=Oe=>toTypeString(Oe)==="[object Set]",isDate=Oe=>toTypeString(Oe)==="[object Date]",isRegExp=Oe=>toTypeString(Oe)==="[object RegExp]",isFunction=Oe=>typeof Oe=="function",isString=Oe=>typeof Oe=="string",isSymbol=Oe=>typeof Oe=="symbol",isObject$1=Oe=>Oe!==null&&typeof Oe=="object",isPromise=Oe=>(isObject$1(Oe)||isFunction(Oe))&&isFunction(Oe.then)&&isFunction(Oe.catch),objectToString=Object.prototype.toString,toTypeString=Oe=>objectToString.call(Oe),toRawType=Oe=>toTypeString(Oe).slice(8,-1),isPlainObject$2=Oe=>toTypeString(Oe)==="[object Object]",isIntegerKey=Oe=>isString(Oe)&&Oe!=="NaN"&&Oe[0]!=="-"&&""+parseInt(Oe,10)===Oe,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),isBuiltInDirective=makeMap("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),cacheStringFunction=Oe=>{const e=Object.create(null);return Te=>e[Te]||(e[Te]=Oe(Te))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(Oe=>Oe.replace(camelizeRE,(e,Te)=>Te?Te.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(Oe=>Oe.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(Oe=>Oe.charAt(0).toUpperCase()+Oe.slice(1)),toHandlerKey=cacheStringFunction(Oe=>Oe?`on${capitalize(Oe)}`:""),hasChanged=(Oe,e)=>!Object.is(Oe,e),invokeArrayFns=(Oe,...e)=>{for(let Te=0;Te<Oe.length;Te++)Oe[Te](...e)},def=(Oe,e,Te,ke=!1)=>{Object.defineProperty(Oe,e,{configurable:!0,enumerable:!1,writable:ke,value:Te})},looseToNumber=Oe=>{const e=parseFloat(Oe);return isNaN(e)?Oe:e},toNumber=Oe=>{const e=isString(Oe)?Number(Oe):NaN;return isNaN(e)?Oe:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),identRE=/^[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*$/;function genPropsAccessExp(Oe){return identRE.test(Oe)?`__props.${Oe}`:`__props[${JSON.stringify(Oe)}]`}function genCacheKey(Oe,e){return Oe+JSON.stringify(e,(Te,ke)=>typeof ke=="function"?ke.toString():ke)}const PatchFlags={TEXT:1,1:"TEXT",CLASS:2,2:"CLASS",STYLE:4,4:"STYLE",PROPS:8,8:"PROPS",FULL_PROPS:16,16:"FULL_PROPS",NEED_HYDRATION:32,32:"NEED_HYDRATION",STABLE_FRAGMENT:64,64:"STABLE_FRAGMENT",KEYED_FRAGMENT:128,128:"KEYED_FRAGMENT",UNKEYED_FRAGMENT:256,256:"UNKEYED_FRAGMENT",NEED_PATCH:512,512:"NEED_PATCH",DYNAMIC_SLOTS:1024,1024:"DYNAMIC_SLOTS",DEV_ROOT_FRAGMENT:2048,2048:"DEV_ROOT_FRAGMENT",CACHED:-1,"-1":"CACHED",BAIL:-2,"-2":"BAIL"},PatchFlagNames={1:"TEXT",2:"CLASS",4:"STYLE",8:"PROPS",16:"FULL_PROPS",32:"NEED_HYDRATION",64:"STABLE_FRAGMENT",128:"KEYED_FRAGMENT",256:"UNKEYED_FRAGMENT",512:"NEED_PATCH",1024:"DYNAMIC_SLOTS",2048:"DEV_ROOT_FRAGMENT",[-1]:"HOISTED",[-2]:"BAIL"},ShapeFlags={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"},SlotFlags={STABLE:1,1:"STABLE",DYNAMIC:2,2:"DYNAMIC",FORWARDED:3,3:"FORWARDED"},slotFlagsText={1:"STABLE",2:"DYNAMIC",3:"FORWARDED"},GLOBALS_ALLOWED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",isGloballyAllowed=makeMap(GLOBALS_ALLOWED),isGloballyWhitelisted=isGloballyAllowed,range=2;function generateCodeFrame(Oe,e=0,Te=Oe.length){if(e=Math.max(0,Math.min(e,Oe.length)),Te=Math.max(0,Math.min(Te,Oe.length)),e>Te)return"";let ke=Oe.split(/(\r?\n)/);const Be=ke.filter((We,Cn)=>Cn%2===1);ke=ke.filter((We,Cn)=>Cn%2===0);let Ue=0;const He=[];for(let We=0;We<ke.length;We++)if(Ue+=ke[We].length+(Be[We]&&Be[We].length||0),Ue>=e){for(let Cn=We-range;Cn<=We+range||Te>Ue;Cn++){if(Cn<0||Cn>=ke.length)continue;const En=Cn+1;He.push(`${En}${" ".repeat(Math.max(3-String(En).length,0))}|  ${ke[Cn]}`);const An=ke[Cn].length,Sn=Be[Cn]&&Be[Cn].length||0;if(Cn===We){const Tn=e-(Ue-(An+Sn)),Ln=Math.max(1,Te>Ue?An-Tn:Te-e);He.push("   |  "+" ".repeat(Tn)+"^".repeat(Ln))}else if(Cn>We){if(Te>Ue){const Tn=Math.max(Math.min(Te-Ue,An),1);He.push("   |  "+"^".repeat(Tn))}Ue+=An+Sn}}break}return He.join(`
`)}function normalizeStyle(Oe){if(isArray$1(Oe)){const e={};for(let Te=0;Te<Oe.length;Te++){const ke=Oe[Te],Be=isString(ke)?parseStringStyle(ke):normalizeStyle(ke);if(Be)for(const Ue in Be)e[Ue]=Be[Ue]}return e}else if(isString(Oe)||isObject$1(Oe))return Oe}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(Oe){const e={};return Oe.replace(styleCommentRE,"").split(listDelimiterRE).forEach(Te=>{if(Te){const ke=Te.split(propertyDelimiterRE);ke.length>1&&(e[ke[0].trim()]=ke[1].trim())}}),e}function stringifyStyle(Oe){if(!Oe)return"";if(isString(Oe))return Oe;let e="";for(const Te in Oe){const ke=Oe[Te];if(isString(ke)||typeof ke=="number"){const Be=Te.startsWith("--")?Te:hyphenate(Te);e+=`${Be}:${ke};`}}return e}function normalizeClass(Oe){let e="";if(isString(Oe))e=Oe;else if(isArray$1(Oe))for(let Te=0;Te<Oe.length;Te++){const ke=normalizeClass(Oe[Te]);ke&&(e+=ke+" ")}else if(isObject$1(Oe))for(const Te in Oe)Oe[Te]&&(e+=Te+" ");return e.trim()}function normalizeProps(Oe){if(!Oe)return null;let{class:e,style:Te}=Oe;return e&&!isString(e)&&(Oe.class=normalizeClass(e)),Te&&(Oe.style=normalizeStyle(Te)),Oe}const HTML_TAGS="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",SVG_TAGS="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",MATH_TAGS="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",VOID_TAGS="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",isHTMLTag=makeMap(HTML_TAGS),isSVGTag=makeMap(SVG_TAGS),isMathMLTag=makeMap(MATH_TAGS),isVoidTag=makeMap(VOID_TAGS),specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs),isBooleanAttr=makeMap(specialBooleanAttrs+",async,autofocus,autoplay,controls,default,defer,disabled,hidden,inert,loop,open,required,reversed,scoped,seamless,checked,muted,multiple,selected");function includeBooleanAttr(Oe){return!!Oe||Oe===""}const unsafeAttrCharRE=/[>/="'\u0009\u000a\u000c\u0020]/,attrValidationCache={};function isSSRSafeAttrName(Oe){if(attrValidationCache.hasOwnProperty(Oe))return attrValidationCache[Oe];const e=unsafeAttrCharRE.test(Oe);return e&&console.error(`unsafe attribute name: ${Oe}`),attrValidationCache[Oe]=!e}const propsToAttrMap={acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},isKnownHtmlAttr=makeMap("accept,accept-charset,accesskey,action,align,allow,alt,async,autocapitalize,autocomplete,autofocus,autoplay,background,bgcolor,border,buffered,capture,challenge,charset,checked,cite,class,code,codebase,color,cols,colspan,content,contenteditable,contextmenu,controls,coords,crossorigin,csp,data,datetime,decoding,default,defer,dir,dirname,disabled,download,draggable,dropzone,enctype,enterkeyhint,for,form,formaction,formenctype,formmethod,formnovalidate,formtarget,headers,height,hidden,high,href,hreflang,http-equiv,icon,id,importance,inert,integrity,ismap,itemprop,keytype,kind,label,lang,language,loading,list,loop,low,manifest,max,maxlength,minlength,media,min,multiple,muted,name,novalidate,open,optimum,pattern,ping,placeholder,poster,preload,radiogroup,readonly,referrerpolicy,rel,required,reversed,rows,rowspan,sandbox,scope,scoped,selected,shape,size,sizes,slot,span,spellcheck,src,srcdoc,srclang,srcset,start,step,style,summary,tabindex,target,title,translate,type,usemap,value,width,wrap"),isKnownSvgAttr=makeMap("xmlns,accent-height,accumulate,additive,alignment-baseline,alphabetic,amplitude,arabic-form,ascent,attributeName,attributeType,azimuth,baseFrequency,baseline-shift,baseProfile,bbox,begin,bias,by,calcMode,cap-height,class,clip,clipPathUnits,clip-path,clip-rule,color,color-interpolation,color-interpolation-filters,color-profile,color-rendering,contentScriptType,contentStyleType,crossorigin,cursor,cx,cy,d,decelerate,descent,diffuseConstant,direction,display,divisor,dominant-baseline,dur,dx,dy,edgeMode,elevation,enable-background,end,exponent,fill,fill-opacity,fill-rule,filter,filterRes,filterUnits,flood-color,flood-opacity,font-family,font-size,font-size-adjust,font-stretch,font-style,font-variant,font-weight,format,from,fr,fx,fy,g1,g2,glyph-name,glyph-orientation-horizontal,glyph-orientation-vertical,glyphRef,gradientTransform,gradientUnits,hanging,height,href,hreflang,horiz-adv-x,horiz-origin-x,id,ideographic,image-rendering,in,in2,intercept,k,k1,k2,k3,k4,kernelMatrix,kernelUnitLength,kerning,keyPoints,keySplines,keyTimes,lang,lengthAdjust,letter-spacing,lighting-color,limitingConeAngle,local,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mask,maskContentUnits,maskUnits,mathematical,max,media,method,min,mode,name,numOctaves,offset,opacity,operator,order,orient,orientation,origin,overflow,overline-position,overline-thickness,panose-1,paint-order,path,pathLength,patternContentUnits,patternTransform,patternUnits,ping,pointer-events,points,pointsAtX,pointsAtY,pointsAtZ,preserveAlpha,preserveAspectRatio,primitiveUnits,r,radius,referrerPolicy,refX,refY,rel,rendering-intent,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,result,rotate,rx,ry,scale,seed,shape-rendering,slope,spacing,specularConstant,specularExponent,speed,spreadMethod,startOffset,stdDeviation,stemh,stemv,stitchTiles,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,string,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,style,surfaceScale,systemLanguage,tabindex,tableValues,target,targetX,targetY,text-anchor,text-decoration,text-rendering,textLength,to,transform,transform-origin,type,u1,u2,underline-position,underline-thickness,unicode,unicode-bidi,unicode-range,units-per-em,v-alphabetic,v-hanging,v-ideographic,v-mathematical,values,vector-effect,version,vert-adv-y,vert-origin-x,vert-origin-y,viewBox,viewTarget,visibility,width,widths,word-spacing,writing-mode,x,x-height,x1,x2,xChannelSelector,xlink:actuate,xlink:arcrole,xlink:href,xlink:role,xlink:show,xlink:title,xlink:type,xmlns:xlink,xml:base,xml:lang,xml:space,y,y1,y2,yChannelSelector,z,zoomAndPan"),isKnownMathMLAttr=makeMap("accent,accentunder,actiontype,align,alignmentscope,altimg,altimg-height,altimg-valign,altimg-width,alttext,bevelled,close,columnsalign,columnlines,columnspan,denomalign,depth,dir,display,displaystyle,encoding,equalcolumns,equalrows,fence,fontstyle,fontweight,form,frame,framespacing,groupalign,height,href,id,indentalign,indentalignfirst,indentalignlast,indentshift,indentshiftfirst,indentshiftlast,indextype,justify,largetop,largeop,lquote,lspace,mathbackground,mathcolor,mathsize,mathvariant,maxsize,minlabelspacing,mode,other,overflow,position,rowalign,rowlines,rowspan,rquote,rspace,scriptlevel,scriptminsize,scriptsizemultiplier,selection,separator,separators,shift,side,src,stackalign,stretchy,subscriptshift,superscriptshift,symmetric,voffset,width,widths,xlink:href,xlink:show,xlink:type,xmlns");function isRenderableAttrValue(Oe){if(Oe==null)return!1;const e=typeof Oe;return e==="string"||e==="number"||e==="boolean"}const escapeRE=/["'&<>]/;function escapeHtml(Oe){const e=""+Oe,Te=escapeRE.exec(e);if(!Te)return e;let ke="",Be,Ue,He=0;for(Ue=Te.index;Ue<e.length;Ue++){switch(e.charCodeAt(Ue)){case 34:Be="&quot;";break;case 38:Be="&amp;";break;case 39:Be="&#39;";break;case 60:Be="&lt;";break;case 62:Be="&gt;";break;default:continue}He!==Ue&&(ke+=e.slice(He,Ue)),He=Ue+1,ke+=Be}return He!==Ue?ke+e.slice(He,Ue):ke}const commentStripRE=/^-?>|<!--|-->|--!>|<!-$/g;function escapeHtmlComment(Oe){return Oe.replace(commentStripRE,"")}const cssVarNameEscapeSymbolsRE=/[ !"#$%&'()*+,./:;<=>?@[\\\]^`{|}~]/g;function getEscapedCssVarName(Oe,e){return Oe.replace(cssVarNameEscapeSymbolsRE,Te=>e?Te==='"'?'\\\\\\"':`\\\\${Te}`:`\\${Te}`)}function looseCompareArrays(Oe,e){if(Oe.length!==e.length)return!1;let Te=!0;for(let ke=0;Te&&ke<Oe.length;ke++)Te=looseEqual(Oe[ke],e[ke]);return Te}function looseEqual(Oe,e){if(Oe===e)return!0;let Te=isDate(Oe),ke=isDate(e);if(Te||ke)return Te&&ke?Oe.getTime()===e.getTime():!1;if(Te=isSymbol(Oe),ke=isSymbol(e),Te||ke)return Oe===e;if(Te=isArray$1(Oe),ke=isArray$1(e),Te||ke)return Te&&ke?looseCompareArrays(Oe,e):!1;if(Te=isObject$1(Oe),ke=isObject$1(e),Te||ke){if(!Te||!ke)return!1;const Be=Object.keys(Oe).length,Ue=Object.keys(e).length;if(Be!==Ue)return!1;for(const He in Oe){const We=Oe.hasOwnProperty(He),Cn=e.hasOwnProperty(He);if(We&&!Cn||!We&&Cn||!looseEqual(Oe[He],e[He]))return!1}}return String(Oe)===String(e)}function looseIndexOf(Oe,e){return Oe.findIndex(Te=>looseEqual(Te,e))}const isRef$1=Oe=>!!(Oe&&Oe.__v_isRef===!0),toDisplayString=Oe=>isString(Oe)?Oe:Oe==null?"":isArray$1(Oe)||isObject$1(Oe)&&(Oe.toString===objectToString||!isFunction(Oe.toString))?isRef$1(Oe)?toDisplayString(Oe.value):JSON.stringify(Oe,replacer,2):String(Oe),replacer=(Oe,e)=>isRef$1(e)?replacer(Oe,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((Te,[ke,Be],Ue)=>(Te[stringifySymbol(ke,Ue)+" =>"]=Be,Te),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(Te=>stringifySymbol(Te))}:isSymbol(e)?stringifySymbol(e):isObject$1(e)&&!isArray$1(e)&&!isPlainObject$2(e)?String(e):e,stringifySymbol=(Oe,e="")=>{var Te;return isSymbol(Oe)?`Symbol(${(Te=Oe.description)!=null?Te:e})`:Oe},shared_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,EMPTY_ARR,EMPTY_OBJ,NO,NOOP,PatchFlagNames,PatchFlags,ShapeFlags,SlotFlags,camelize,capitalize,cssVarNameEscapeSymbolsRE,def,escapeHtml,escapeHtmlComment,extend:extend$5,genCacheKey,genPropsAccessExp,generateCodeFrame,getEscapedCssVarName,getGlobalThis,hasChanged,hasOwn,hyphenate,includeBooleanAttr,invokeArrayFns,isArray:isArray$1,isBooleanAttr,isBuiltInDirective,isDate,isFunction,isGloballyAllowed,isGloballyWhitelisted,isHTMLTag,isIntegerKey,isKnownHtmlAttr,isKnownMathMLAttr,isKnownSvgAttr,isMap,isMathMLTag,isModelListener,isObject:isObject$1,isOn,isPlainObject:isPlainObject$2,isPromise,isRegExp,isRenderableAttrValue,isReservedProp,isSSRSafeAttrName,isSVGTag,isSet,isSpecialBooleanAttr,isString,isSymbol,isVoidTag,looseEqual,looseIndexOf,looseToNumber,makeMap,normalizeClass,normalizeProps,normalizeStyle,objectToString,parseStringStyle,propsToAttrMap,remove,slotFlagsText,stringifyStyle,toDisplayString,toHandlerKey,toNumber,toRawType,toTypeString},Symbol.toStringTag,{value:"Module"}));/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,Te;if(this.scopes)for(e=0,Te=this.scopes.length;e<Te;e++)this.scopes[e].pause();for(e=0,Te=this.effects.length;e<Te;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,Te;if(this.scopes)for(e=0,Te=this.scopes.length;e<Te;e++)this.scopes[e].resume();for(e=0,Te=this.effects.length;e<Te;e++)this.effects[e].resume()}}run(e){if(this._active){const Te=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=Te}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){this._active=!1;let Te,ke;for(Te=0,ke=this.effects.length;Te<ke;Te++)this.effects[Te].stop();for(this.effects.length=0,Te=0,ke=this.cleanups.length;Te<ke;Te++)this.cleanups[Te]();if(this.cleanups.length=0,this.scopes){for(Te=0,ke=this.scopes.length;Te<ke;Te++)this.scopes[Te].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const Be=this.parent.scopes.pop();Be&&Be!==this&&(this.parent.scopes[this.index]=Be,Be.index=this.index)}this.parent=void 0}}}function effectScope(Oe){return new EffectScope(Oe)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(Oe,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(Oe)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,Te=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=Te,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(Oe,e=!1){if(Oe.flags|=8,e){Oe.next=batchedComputed,batchedComputed=Oe;return}Oe.next=batchedSub,batchedSub=Oe}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const Te=e.next;e.next=void 0,e.flags&=-9,e=Te}}let Oe;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const Te=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(ke){Oe||(Oe=ke)}e=Te}}if(Oe)throw Oe}function prepareDeps(Oe){for(let e=Oe.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(Oe){let e,Te=Oe.depsTail,ke=Te;for(;ke;){const Be=ke.prevDep;ke.version===-1?(ke===Te&&(Te=Be),removeSub(ke),removeDep(ke)):e=ke,ke.dep.activeLink=ke.prevActiveLink,ke.prevActiveLink=void 0,ke=Be}Oe.deps=e,Oe.depsTail=Te}function isDirty(Oe){for(let e=Oe.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!Oe._dirty}function refreshComputed(Oe){if(Oe.flags&4&&!(Oe.flags&16)||(Oe.flags&=-17,Oe.globalVersion===globalVersion))return;Oe.globalVersion=globalVersion;const e=Oe.dep;if(Oe.flags|=2,e.version>0&&!Oe.isSSR&&Oe.deps&&!isDirty(Oe)){Oe.flags&=-3;return}const Te=activeSub,ke=shouldTrack;activeSub=Oe,shouldTrack=!0;try{prepareDeps(Oe);const Be=Oe.fn(Oe._value);(e.version===0||hasChanged(Be,Oe._value))&&(Oe._value=Be,e.version++)}catch(Be){throw e.version++,Be}finally{activeSub=Te,shouldTrack=ke,cleanupDeps(Oe),Oe.flags&=-3}}function removeSub(Oe,e=!1){const{dep:Te,prevSub:ke,nextSub:Be}=Oe;if(ke&&(ke.nextSub=Be,Oe.prevSub=void 0),Be&&(Be.prevSub=ke,Oe.nextSub=void 0),Te.subs===Oe&&(Te.subs=ke,!ke&&Te.computed)){Te.computed.flags&=-5;for(let Ue=Te.computed.deps;Ue;Ue=Ue.nextDep)removeSub(Ue,!0)}!e&&!--Te.sc&&Te.map&&Te.map.delete(Te.key)}function removeDep(Oe){const{prevDep:e,nextDep:Te}=Oe;e&&(e.nextDep=Te,Oe.prevDep=void 0),Te&&(Te.prevDep=e,Oe.nextDep=void 0)}function effect(Oe,e){Oe.effect instanceof ReactiveEffect&&(Oe=Oe.effect.fn);const Te=new ReactiveEffect(Oe);e&&extend$5(Te,e);try{Te.run()}catch(Be){throw Te.stop(),Be}const ke=Te.run.bind(Te);return ke.effect=Te,ke}function stop(Oe){Oe.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const Oe=trackStack.pop();shouldTrack=Oe===void 0?!0:Oe}function cleanupEffect(Oe){const{cleanup:e}=Oe;if(Oe.cleanup=void 0,e){const Te=activeSub;activeSub=void 0;try{e()}finally{activeSub=Te}}}let globalVersion=0;class Link{constructor(e,Te){this.sub=e,this.dep=Te,this.version=Te.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let Te=this.activeLink;if(Te===void 0||Te.sub!==activeSub)Te=this.activeLink=new Link(activeSub,this),activeSub.deps?(Te.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=Te,activeSub.depsTail=Te):activeSub.deps=activeSub.depsTail=Te,addSub(Te);else if(Te.version===-1&&(Te.version=this.version,Te.nextDep)){const ke=Te.nextDep;ke.prevDep=Te.prevDep,Te.prevDep&&(Te.prevDep.nextDep=ke),Te.prevDep=activeSub.depsTail,Te.nextDep=void 0,activeSub.depsTail.nextDep=Te,activeSub.depsTail=Te,activeSub.deps===Te&&(activeSub.deps=ke)}return Te}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let Te=this.subs;Te;Te=Te.prevSub)Te.sub.notify()&&Te.sub.dep.notify()}finally{endBatch()}}}function addSub(Oe){if(Oe.dep.sc++,Oe.sub.flags&4){const e=Oe.dep.computed;if(e&&!Oe.dep.subs){e.flags|=20;for(let ke=e.deps;ke;ke=ke.nextDep)addSub(ke)}const Te=Oe.dep.subs;Te!==Oe&&(Oe.prevSub=Te,Te&&(Te.nextSub=Oe)),Oe.dep.subs=Oe}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(Oe,e,Te){if(shouldTrack&&activeSub){let ke=targetMap.get(Oe);ke||targetMap.set(Oe,ke=new Map);let Be=ke.get(Te);Be||(ke.set(Te,Be=new Dep),Be.map=ke,Be.key=Te),Be.track()}}function trigger(Oe,e,Te,ke,Be,Ue){const He=targetMap.get(Oe);if(!He){globalVersion++;return}const We=Cn=>{Cn&&Cn.trigger()};if(startBatch(),e==="clear")He.forEach(We);else{const Cn=isArray$1(Oe),En=Cn&&isIntegerKey(Te);if(Cn&&Te==="length"){const An=Number(ke);He.forEach((Sn,Tn)=>{(Tn==="length"||Tn===ARRAY_ITERATE_KEY||!isSymbol(Tn)&&Tn>=An)&&We(Sn)})}else switch((Te!==void 0||He.has(void 0))&&We(He.get(Te)),En&&We(He.get(ARRAY_ITERATE_KEY)),e){case"add":Cn?En&&We(He.get("length")):(We(He.get(ITERATE_KEY)),isMap(Oe)&&We(He.get(MAP_KEY_ITERATE_KEY)));break;case"delete":Cn||(We(He.get(ITERATE_KEY)),isMap(Oe)&&We(He.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(Oe)&&We(He.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(Oe,e){const Te=targetMap.get(Oe);return Te&&Te.get(e)}function reactiveReadArray(Oe){const e=toRaw(Oe);return e===Oe?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(Oe)?e:e.map(toReactive))}function shallowReadArray(Oe){return track(Oe=toRaw(Oe),"iterate",ARRAY_ITERATE_KEY),Oe}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...Oe){return reactiveReadArray(this).concat(...Oe.map(e=>isArray$1(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",Oe=>(Oe[1]=toReactive(Oe[1]),Oe))},every(Oe,e){return apply$1(this,"every",Oe,e,void 0,arguments)},filter(Oe,e){return apply$1(this,"filter",Oe,e,Te=>Te.map(toReactive),arguments)},find(Oe,e){return apply$1(this,"find",Oe,e,toReactive,arguments)},findIndex(Oe,e){return apply$1(this,"findIndex",Oe,e,void 0,arguments)},findLast(Oe,e){return apply$1(this,"findLast",Oe,e,toReactive,arguments)},findLastIndex(Oe,e){return apply$1(this,"findLastIndex",Oe,e,void 0,arguments)},forEach(Oe,e){return apply$1(this,"forEach",Oe,e,void 0,arguments)},includes(...Oe){return searchProxy(this,"includes",Oe)},indexOf(...Oe){return searchProxy(this,"indexOf",Oe)},join(Oe){return reactiveReadArray(this).join(Oe)},lastIndexOf(...Oe){return searchProxy(this,"lastIndexOf",Oe)},map(Oe,e){return apply$1(this,"map",Oe,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...Oe){return noTracking(this,"push",Oe)},reduce(Oe,...e){return reduce(this,"reduce",Oe,e)},reduceRight(Oe,...e){return reduce(this,"reduceRight",Oe,e)},shift(){return noTracking(this,"shift")},some(Oe,e){return apply$1(this,"some",Oe,e,void 0,arguments)},splice(...Oe){return noTracking(this,"splice",Oe)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(Oe){return reactiveReadArray(this).toSorted(Oe)},toSpliced(...Oe){return reactiveReadArray(this).toSpliced(...Oe)},unshift(...Oe){return noTracking(this,"unshift",Oe)},values(){return iterator(this,"values",toReactive)}};function iterator(Oe,e,Te){const ke=shallowReadArray(Oe),Be=ke[e]();return ke!==Oe&&!isShallow(Oe)&&(Be._next=Be.next,Be.next=()=>{const Ue=Be._next();return Ue.value&&(Ue.value=Te(Ue.value)),Ue}),Be}const arrayProto=Array.prototype;function apply$1(Oe,e,Te,ke,Be,Ue){const He=shallowReadArray(Oe),We=He!==Oe&&!isShallow(Oe),Cn=He[e];if(Cn!==arrayProto[e]){const Sn=Cn.apply(Oe,Ue);return We?toReactive(Sn):Sn}let En=Te;He!==Oe&&(We?En=function(Sn,Tn){return Te.call(this,toReactive(Sn),Tn,Oe)}:Te.length>2&&(En=function(Sn,Tn){return Te.call(this,Sn,Tn,Oe)}));const An=Cn.call(He,En,ke);return We&&Be?Be(An):An}function reduce(Oe,e,Te,ke){const Be=shallowReadArray(Oe);let Ue=Te;return Be!==Oe&&(isShallow(Oe)?Te.length>3&&(Ue=function(He,We,Cn){return Te.call(this,He,We,Cn,Oe)}):Ue=function(He,We,Cn){return Te.call(this,He,toReactive(We),Cn,Oe)}),Be[e](Ue,...ke)}function searchProxy(Oe,e,Te){const ke=toRaw(Oe);track(ke,"iterate",ARRAY_ITERATE_KEY);const Be=ke[e](...Te);return(Be===-1||Be===!1)&&isProxy(Te[0])?(Te[0]=toRaw(Te[0]),ke[e](...Te)):Be}function noTracking(Oe,e,Te=[]){pauseTracking(),startBatch();const ke=toRaw(Oe)[e].apply(Oe,Te);return endBatch(),resetTracking(),ke}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(Oe=>Oe!=="arguments"&&Oe!=="caller").map(Oe=>Symbol[Oe]).filter(isSymbol));function hasOwnProperty(Oe){isSymbol(Oe)||(Oe=String(Oe));const e=toRaw(this);return track(e,"has",Oe),e.hasOwnProperty(Oe)}class BaseReactiveHandler{constructor(e=!1,Te=!1){this._isReadonly=e,this._isShallow=Te}get(e,Te,ke){if(Te==="__v_skip")return e.__v_skip;const Be=this._isReadonly,Ue=this._isShallow;if(Te==="__v_isReactive")return!Be;if(Te==="__v_isReadonly")return Be;if(Te==="__v_isShallow")return Ue;if(Te==="__v_raw")return ke===(Be?Ue?shallowReadonlyMap:readonlyMap:Ue?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(ke)?e:void 0;const He=isArray$1(e);if(!Be){let Cn;if(He&&(Cn=arrayInstrumentations[Te]))return Cn;if(Te==="hasOwnProperty")return hasOwnProperty}const We=Reflect.get(e,Te,isRef(e)?e:ke);return(isSymbol(Te)?builtInSymbols.has(Te):isNonTrackableKeys(Te))||(Be||track(e,"get",Te),Ue)?We:isRef(We)?He&&isIntegerKey(Te)?We:We.value:isObject$1(We)?Be?readonly(We):reactive(We):We}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,Te,ke,Be){let Ue=e[Te];if(!this._isShallow){const Cn=isReadonly(Ue);if(!isShallow(ke)&&!isReadonly(ke)&&(Ue=toRaw(Ue),ke=toRaw(ke)),!isArray$1(e)&&isRef(Ue)&&!isRef(ke))return Cn?!1:(Ue.value=ke,!0)}const He=isArray$1(e)&&isIntegerKey(Te)?Number(Te)<e.length:hasOwn(e,Te),We=Reflect.set(e,Te,ke,isRef(e)?e:Be);return e===toRaw(Be)&&(He?hasChanged(ke,Ue)&&trigger(e,"set",Te,ke):trigger(e,"add",Te,ke)),We}deleteProperty(e,Te){const ke=hasOwn(e,Te);e[Te];const Be=Reflect.deleteProperty(e,Te);return Be&&ke&&trigger(e,"delete",Te,void 0),Be}has(e,Te){const ke=Reflect.has(e,Te);return(!isSymbol(Te)||!builtInSymbols.has(Te))&&track(e,"has",Te),ke}ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,Te){return!0}deleteProperty(e,Te){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=Oe=>Oe,getProto=Oe=>Reflect.getPrototypeOf(Oe);function createIterableMethod(Oe,e,Te){return function(...ke){const Be=this.__v_raw,Ue=toRaw(Be),He=isMap(Ue),We=Oe==="entries"||Oe===Symbol.iterator&&He,Cn=Oe==="keys"&&He,En=Be[Oe](...ke),An=Te?toShallow:e?toReadonly:toReactive;return!e&&track(Ue,"iterate",Cn?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:Sn,done:Tn}=En.next();return Tn?{value:Sn,done:Tn}:{value:We?[An(Sn[0]),An(Sn[1])]:An(Sn),done:Tn}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(Oe){return function(...e){return Oe==="delete"?!1:Oe==="clear"?void 0:this}}function createInstrumentations(Oe,e){const Te={get(Be){const Ue=this.__v_raw,He=toRaw(Ue),We=toRaw(Be);Oe||(hasChanged(Be,We)&&track(He,"get",Be),track(He,"get",We));const{has:Cn}=getProto(He),En=e?toShallow:Oe?toReadonly:toReactive;if(Cn.call(He,Be))return En(Ue.get(Be));if(Cn.call(He,We))return En(Ue.get(We));Ue!==He&&Ue.get(Be)},get size(){const Be=this.__v_raw;return!Oe&&track(toRaw(Be),"iterate",ITERATE_KEY),Reflect.get(Be,"size",Be)},has(Be){const Ue=this.__v_raw,He=toRaw(Ue),We=toRaw(Be);return Oe||(hasChanged(Be,We)&&track(He,"has",Be),track(He,"has",We)),Be===We?Ue.has(Be):Ue.has(Be)||Ue.has(We)},forEach(Be,Ue){const He=this,We=He.__v_raw,Cn=toRaw(We),En=e?toShallow:Oe?toReadonly:toReactive;return!Oe&&track(Cn,"iterate",ITERATE_KEY),We.forEach((An,Sn)=>Be.call(Ue,En(An),En(Sn),He))}};return extend$5(Te,Oe?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(Be){!e&&!isShallow(Be)&&!isReadonly(Be)&&(Be=toRaw(Be));const Ue=toRaw(this);return getProto(Ue).has.call(Ue,Be)||(Ue.add(Be),trigger(Ue,"add",Be,Be)),this},set(Be,Ue){!e&&!isShallow(Ue)&&!isReadonly(Ue)&&(Ue=toRaw(Ue));const He=toRaw(this),{has:We,get:Cn}=getProto(He);let En=We.call(He,Be);En||(Be=toRaw(Be),En=We.call(He,Be));const An=Cn.call(He,Be);return He.set(Be,Ue),En?hasChanged(Ue,An)&&trigger(He,"set",Be,Ue):trigger(He,"add",Be,Ue),this},delete(Be){const Ue=toRaw(this),{has:He,get:We}=getProto(Ue);let Cn=He.call(Ue,Be);Cn||(Be=toRaw(Be),Cn=He.call(Ue,Be)),We&&We.call(Ue,Be);const En=Ue.delete(Be);return Cn&&trigger(Ue,"delete",Be,void 0),En},clear(){const Be=toRaw(this),Ue=Be.size!==0,He=Be.clear();return Ue&&trigger(Be,"clear",void 0,void 0),He}}),["keys","values","entries",Symbol.iterator].forEach(Be=>{Te[Be]=createIterableMethod(Be,Oe,e)}),Te}function createInstrumentationGetter(Oe,e){const Te=createInstrumentations(Oe,e);return(ke,Be,Ue)=>Be==="__v_isReactive"?!Oe:Be==="__v_isReadonly"?Oe:Be==="__v_raw"?ke:Reflect.get(hasOwn(Te,Be)&&Be in ke?Te:ke,Be,Ue)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(Oe){switch(Oe){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(Oe){return Oe.__v_skip||!Object.isExtensible(Oe)?0:targetTypeMap(toRawType(Oe))}function reactive(Oe){return isReadonly(Oe)?Oe:createReactiveObject(Oe,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(Oe){return createReactiveObject(Oe,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(Oe){return createReactiveObject(Oe,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(Oe){return createReactiveObject(Oe,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(Oe,e,Te,ke,Be){if(!isObject$1(Oe)||Oe.__v_raw&&!(e&&Oe.__v_isReactive))return Oe;const Ue=Be.get(Oe);if(Ue)return Ue;const He=getTargetType(Oe);if(He===0)return Oe;const We=new Proxy(Oe,He===2?ke:Te);return Be.set(Oe,We),We}function isReactive(Oe){return isReadonly(Oe)?isReactive(Oe.__v_raw):!!(Oe&&Oe.__v_isReactive)}function isReadonly(Oe){return!!(Oe&&Oe.__v_isReadonly)}function isShallow(Oe){return!!(Oe&&Oe.__v_isShallow)}function isProxy(Oe){return Oe?!!Oe.__v_raw:!1}function toRaw(Oe){const e=Oe&&Oe.__v_raw;return e?toRaw(e):Oe}function markRaw(Oe){return!hasOwn(Oe,"__v_skip")&&Object.isExtensible(Oe)&&def(Oe,"__v_skip",!0),Oe}const toReactive=Oe=>isObject$1(Oe)?reactive(Oe):Oe,toReadonly=Oe=>isObject$1(Oe)?readonly(Oe):Oe;function isRef(Oe){return Oe?Oe.__v_isRef===!0:!1}function ref(Oe){return createRef(Oe,!1)}function shallowRef(Oe){return createRef(Oe,!0)}function createRef(Oe,e){return isRef(Oe)?Oe:new RefImpl(Oe,e)}class RefImpl{constructor(e,Te){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=Te?e:toRaw(e),this._value=Te?e:toReactive(e),this.__v_isShallow=Te}get value(){return this.dep.track(),this._value}set value(e){const Te=this._rawValue,ke=this.__v_isShallow||isShallow(e)||isReadonly(e);e=ke?e:toRaw(e),hasChanged(e,Te)&&(this._rawValue=e,this._value=ke?e:toReactive(e),this.dep.trigger())}}function triggerRef(Oe){Oe.dep&&Oe.dep.trigger()}function unref(Oe){return isRef(Oe)?Oe.value:Oe}function toValue(Oe){return isFunction(Oe)?Oe():unref(Oe)}const shallowUnwrapHandlers={get:(Oe,e,Te)=>e==="__v_raw"?Oe:unref(Reflect.get(Oe,e,Te)),set:(Oe,e,Te,ke)=>{const Be=Oe[e];return isRef(Be)&&!isRef(Te)?(Be.value=Te,!0):Reflect.set(Oe,e,Te,ke)}};function proxyRefs(Oe){return isReactive(Oe)?Oe:new Proxy(Oe,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const Te=this.dep=new Dep,{get:ke,set:Be}=e(Te.track.bind(Te),Te.trigger.bind(Te));this._get=ke,this._set=Be}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(Oe){return new CustomRefImpl(Oe)}function toRefs(Oe){const e=isArray$1(Oe)?new Array(Oe.length):{};for(const Te in Oe)e[Te]=propertyToRef(Oe,Te);return e}class ObjectRefImpl{constructor(e,Te,ke){this._object=e,this._key=Te,this._defaultValue=ke,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef$1(Oe,e,Te){return isRef(Oe)?Oe:isFunction(Oe)?new GetterRefImpl(Oe):isObject$1(Oe)&&arguments.length>1?propertyToRef(Oe,e,Te):ref(Oe)}function propertyToRef(Oe,e,Te){const ke=Oe[e];return isRef(ke)?ke:new ObjectRefImpl(Oe,e,Te)}class ComputedRefImpl{constructor(e,Te,ke){this.fn=e,this.setter=Te,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!Te,this.isSSR=ke}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(Oe,e,Te=!1){let ke,Be;return isFunction(Oe)?ke=Oe:(ke=Oe.get,Be=Oe.set),new ComputedRefImpl(ke,Be,Te)}const TrackOpTypes={GET:"get",HAS:"has",ITERATE:"iterate"},TriggerOpTypes={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function getCurrentWatcher(){return activeWatcher}function onWatcherCleanup(Oe,e=!1,Te=activeWatcher){if(Te){let ke=cleanupMap.get(Te);ke||cleanupMap.set(Te,ke=[]),ke.push(Oe)}}function watch$1(Oe,e,Te=EMPTY_OBJ){const{immediate:ke,deep:Be,once:Ue,scheduler:He,augmentJob:We,call:Cn}=Te,En=ai=>Be?ai:isShallow(ai)||Be===!1||Be===0?traverse(ai,1):traverse(ai);let An,Sn,Tn,Ln,Bn=!1,ei=!1;if(isRef(Oe)?(Sn=()=>Oe.value,Bn=isShallow(Oe)):isReactive(Oe)?(Sn=()=>En(Oe),Bn=!0):isArray$1(Oe)?(ei=!0,Bn=Oe.some(ai=>isReactive(ai)||isShallow(ai)),Sn=()=>Oe.map(ai=>{if(isRef(ai))return ai.value;if(isReactive(ai))return En(ai);if(isFunction(ai))return Cn?Cn(ai,2):ai()})):isFunction(Oe)?e?Sn=Cn?()=>Cn(Oe,2):Oe:Sn=()=>{if(Tn){pauseTracking();try{Tn()}finally{resetTracking()}}const ai=activeWatcher;activeWatcher=An;try{return Cn?Cn(Oe,3,[Ln]):Oe(Ln)}finally{activeWatcher=ai}}:Sn=NOOP,e&&Be){const ai=Sn,li=Be===!0?1/0:Be;Sn=()=>traverse(ai(),li)}const ti=getCurrentScope(),ni=()=>{An.stop(),ti&&ti.active&&remove(ti.effects,An)};if(Ue&&e){const ai=e;e=(...li)=>{ai(...li),ni()}}let ri=ei?new Array(Oe.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const si=ai=>{if(!(!(An.flags&1)||!An.dirty&&!ai))if(e){const li=An.run();if(Be||Bn||(ei?li.some((Pi,pi)=>hasChanged(Pi,ri[pi])):hasChanged(li,ri))){Tn&&Tn();const Pi=activeWatcher;activeWatcher=An;try{const pi=[li,ri===INITIAL_WATCHER_VALUE?void 0:ei&&ri[0]===INITIAL_WATCHER_VALUE?[]:ri,Ln];Cn?Cn(e,3,pi):e(...pi),ri=li}finally{activeWatcher=Pi}}}else An.run()};return We&&We(si),An=new ReactiveEffect(Sn),An.scheduler=He?()=>He(si,!1):si,Ln=ai=>onWatcherCleanup(ai,!1,An),Tn=An.onStop=()=>{const ai=cleanupMap.get(An);if(ai){if(Cn)Cn(ai,4);else for(const li of ai)li();cleanupMap.delete(An)}},e?ke?si(!0):ri=An.run():He?He(si.bind(null,!0),!0):An.run(),ni.pause=An.pause.bind(An),ni.resume=An.resume.bind(An),ni.stop=ni,ni}function traverse(Oe,e=1/0,Te){if(e<=0||!isObject$1(Oe)||Oe.__v_skip||(Te=Te||new Set,Te.has(Oe)))return Oe;if(Te.add(Oe),e--,isRef(Oe))traverse(Oe.value,e,Te);else if(isArray$1(Oe))for(let ke=0;ke<Oe.length;ke++)traverse(Oe[ke],e,Te);else if(isSet(Oe)||isMap(Oe))Oe.forEach(ke=>{traverse(ke,e,Te)});else if(isPlainObject$2(Oe)){for(const ke in Oe)traverse(Oe[ke],e,Te);for(const ke of Object.getOwnPropertySymbols(Oe))Object.prototype.propertyIsEnumerable.call(Oe,ke)&&traverse(Oe[ke],e,Te)}return Oe}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack$1=[];function pushWarningContext(Oe){stack$1.push(Oe)}function popWarningContext(){stack$1.pop()}let isWarning=!1;function warn$1(Oe,...e){if(isWarning)return;isWarning=!0,pauseTracking();const Te=stack$1.length?stack$1[stack$1.length-1].component:null,ke=Te&&Te.appContext.config.warnHandler,Be=getComponentTrace();if(ke)callWithErrorHandling(ke,Te,11,[Oe+e.map(Ue=>{var He,We;return(We=(He=Ue.toString)==null?void 0:He.call(Ue))!=null?We:JSON.stringify(Ue)}).join(""),Te&&Te.proxy,Be.map(({vnode:Ue})=>`at <${formatComponentName(Te,Ue.type)}>`).join(`
`),Be]);else{const Ue=[`[Vue warn]: ${Oe}`,...e];Be.length&&Ue.push(`
`,...formatTrace(Be)),console.warn(...Ue)}resetTracking(),isWarning=!1}function getComponentTrace(){let Oe=stack$1[stack$1.length-1];if(!Oe)return[];const e=[];for(;Oe;){const Te=e[0];Te&&Te.vnode===Oe?Te.recurseCount++:e.push({vnode:Oe,recurseCount:0});const ke=Oe.component&&Oe.component.parent;Oe=ke&&ke.vnode}return e}function formatTrace(Oe){const e=[];return Oe.forEach((Te,ke)=>{e.push(...ke===0?[]:[`
`],...formatTraceEntry(Te))}),e}function formatTraceEntry({vnode:Oe,recurseCount:e}){const Te=e>0?`... (${e} recursive calls)`:"",ke=Oe.component?Oe.component.parent==null:!1,Be=` at <${formatComponentName(Oe.component,Oe.type,ke)}`,Ue=">"+Te;return Oe.props?[Be,...formatProps(Oe.props),Ue]:[Be+Ue]}function formatProps(Oe){const e=[],Te=Object.keys(Oe);return Te.slice(0,3).forEach(ke=>{e.push(...formatProp(ke,Oe[ke]))}),Te.length>3&&e.push(" ..."),e}function formatProp(Oe,e,Te){return isString(e)?(e=JSON.stringify(e),Te?e:[`${Oe}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?Te?e:[`${Oe}=${e}`]:isRef(e)?(e=formatProp(Oe,toRaw(e.value),!0),Te?e:[`${Oe}=Ref<`,e,">"]):isFunction(e)?[`${Oe}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),Te?e:[`${Oe}=`,e])}function assertNumber(Oe,e){}const ErrorCodes$1={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function callWithErrorHandling(Oe,e,Te,ke){try{return ke?Oe(...ke):Oe()}catch(Be){handleError(Be,e,Te)}}function callWithAsyncErrorHandling(Oe,e,Te,ke){if(isFunction(Oe)){const Be=callWithErrorHandling(Oe,e,Te,ke);return Be&&isPromise(Be)&&Be.catch(Ue=>{handleError(Ue,e,Te)}),Be}if(isArray$1(Oe)){const Be=[];for(let Ue=0;Ue<Oe.length;Ue++)Be.push(callWithAsyncErrorHandling(Oe[Ue],e,Te,ke));return Be}}function handleError(Oe,e,Te,ke=!0){const Be=e?e.vnode:null,{errorHandler:Ue,throwUnhandledErrorInProduction:He}=e&&e.appContext.config||EMPTY_OBJ;if(e){let We=e.parent;const Cn=e.proxy,En=`https://vuejs.org/error-reference/#runtime-${Te}`;for(;We;){const An=We.ec;if(An){for(let Sn=0;Sn<An.length;Sn++)if(An[Sn](Oe,Cn,En)===!1)return}We=We.parent}if(Ue){pauseTracking(),callWithErrorHandling(Ue,null,10,[Oe,Cn,En]),resetTracking();return}}logError(Oe,Te,Be,ke,He)}function logError(Oe,e,Te,ke=!0,Be=!1){if(Be)throw Oe;console.error(Oe)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(Oe){const e=currentFlushPromise||resolvedPromise;return Oe?e.then(this?Oe.bind(this):Oe):e}function findInsertionIndex$1(Oe){let e=flushIndex+1,Te=queue.length;for(;e<Te;){const ke=e+Te>>>1,Be=queue[ke],Ue=getId(Be);Ue<Oe||Ue===Oe&&Be.flags&2?e=ke+1:Te=ke}return e}function queueJob(Oe){if(!(Oe.flags&1)){const e=getId(Oe),Te=queue[queue.length-1];!Te||!(Oe.flags&2)&&e>=getId(Te)?queue.push(Oe):queue.splice(findInsertionIndex$1(e),0,Oe),Oe.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(Oe){isArray$1(Oe)?pendingPostFlushCbs.push(...Oe):activePostFlushCbs&&Oe.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,Oe):Oe.flags&1||(pendingPostFlushCbs.push(Oe),Oe.flags|=1),queueFlush()}function flushPreFlushCbs(Oe,e,Te=flushIndex+1){for(;Te<queue.length;Te++){const ke=queue[Te];if(ke&&ke.flags&2){if(Oe&&ke.id!==Oe.uid)continue;queue.splice(Te,1),Te--,ke.flags&4&&(ke.flags&=-2),ke(),ke.flags&4||(ke.flags&=-2)}}}function flushPostFlushCbs(Oe){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((Te,ke)=>getId(Te)-getId(ke));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const Te=activePostFlushCbs[postFlushIndex];Te.flags&4&&(Te.flags&=-2),Te.flags&8||Te(),Te.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=Oe=>Oe.id==null?Oe.flags&2?-1:1/0:Oe.id;function flushJobs(Oe){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools$1,buffer$1=[];function setDevtoolsHook$1(Oe,e){var Te,ke;devtools$1=Oe,devtools$1?(devtools$1.enabled=!0,buffer$1.forEach(({event:Be,args:Ue})=>devtools$1.emit(Be,...Ue)),buffer$1=[]):typeof window<"u"&&window.HTMLElement&&!((ke=(Te=window.navigator)==null?void 0:Te.userAgent)!=null&&ke.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(Ue=>{setDevtoolsHook$1(Ue,e)}),setTimeout(()=>{devtools$1||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer$1=[])},3e3)):buffer$1=[]}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(Oe){const e=currentRenderingInstance;return currentRenderingInstance=Oe,currentScopeId=Oe&&Oe.type.__scopeId||null,e}function pushScopeId(Oe){currentScopeId=Oe}function popScopeId(){currentScopeId=null}const withScopeId=Oe=>withCtx;function withCtx(Oe,e=currentRenderingInstance,Te){if(!e||Oe._n)return Oe;const ke=(...Be)=>{ke._d&&setBlockTracking(-1);const Ue=setCurrentRenderingInstance(e);let He;try{He=Oe(...Be)}finally{setCurrentRenderingInstance(Ue),ke._d&&setBlockTracking(1)}return He};return ke._n=!0,ke._c=!0,ke._d=!0,ke}function withDirectives(Oe,e){if(currentRenderingInstance===null)return Oe;const Te=getComponentPublicInstance(currentRenderingInstance),ke=Oe.dirs||(Oe.dirs=[]);for(let Be=0;Be<e.length;Be++){let[Ue,He,We,Cn=EMPTY_OBJ]=e[Be];Ue&&(isFunction(Ue)&&(Ue={mounted:Ue,updated:Ue}),Ue.deep&&traverse(He),ke.push({dir:Ue,instance:Te,value:He,oldValue:void 0,arg:We,modifiers:Cn}))}return Oe}function invokeDirectiveHook(Oe,e,Te,ke){const Be=Oe.dirs,Ue=e&&e.dirs;for(let He=0;He<Be.length;He++){const We=Be[He];Ue&&(We.oldValue=Ue[He].value);let Cn=We.dir[ke];Cn&&(pauseTracking(),callWithAsyncErrorHandling(Cn,Te,8,[Oe.el,We,Oe,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=Oe=>Oe.__isTeleport,isTeleportDisabled=Oe=>Oe&&(Oe.disabled||Oe.disabled===""),isTeleportDeferred=Oe=>Oe&&(Oe.defer||Oe.defer===""),isTargetSVG=Oe=>typeof SVGElement<"u"&&Oe instanceof SVGElement,isTargetMathML=Oe=>typeof MathMLElement=="function"&&Oe instanceof MathMLElement,resolveTarget=(Oe,e)=>{const Te=Oe&&Oe.to;return isString(Te)?e?e(Te):null:Te},TeleportImpl={name:"Teleport",__isTeleport:!0,process(Oe,e,Te,ke,Be,Ue,He,We,Cn,En){const{mc:An,pc:Sn,pbc:Tn,o:{insert:Ln,querySelector:Bn,createText:ei,createComment:ti}}=En,ni=isTeleportDisabled(e.props);let{shapeFlag:ri,children:si,dynamicChildren:ai}=e;if(Oe==null){const li=e.el=ei(""),Pi=e.anchor=ei("");Ln(li,Te,ke),Ln(Pi,Te,ke);const pi=(Ri,Fi)=>{ri&16&&(Be&&Be.isCE&&(Be.ce._teleportTarget=Ri),An(si,Ri,Fi,Be,Ue,He,We,Cn))},vi=()=>{const Ri=e.target=resolveTarget(e.props,Bn),Fi=prepareAnchor(Ri,e,ei,Ln);Ri&&(He!=="svg"&&isTargetSVG(Ri)?He="svg":He!=="mathml"&&isTargetMathML(Ri)&&(He="mathml"),ni||(pi(Ri,Fi),updateCssVars(e,!1)))};ni&&(pi(Te,Pi),updateCssVars(e,!0)),isTeleportDeferred(e.props)?queuePostRenderEffect(()=>{vi(),e.el.__isMounted=!0},Ue):vi()}else{if(isTeleportDeferred(e.props)&&!Oe.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(Oe,e,Te,ke,Be,Ue,He,We,Cn,En),delete Oe.el.__isMounted},Ue);return}e.el=Oe.el,e.targetStart=Oe.targetStart;const li=e.anchor=Oe.anchor,Pi=e.target=Oe.target,pi=e.targetAnchor=Oe.targetAnchor,vi=isTeleportDisabled(Oe.props),Ri=vi?Te:Pi,Fi=vi?li:pi;if(He==="svg"||isTargetSVG(Pi)?He="svg":(He==="mathml"||isTargetMathML(Pi))&&(He="mathml"),ai?(Tn(Oe.dynamicChildren,ai,Ri,Be,Ue,He,We),traverseStaticChildren(Oe,e,!0)):Cn||Sn(Oe,e,Ri,Fi,Be,Ue,He,We,!1),ni)vi?e.props&&Oe.props&&e.props.to!==Oe.props.to&&(e.props.to=Oe.props.to):moveTeleport(e,Te,li,En,1);else if((e.props&&e.props.to)!==(Oe.props&&Oe.props.to)){const di=e.target=resolveTarget(e.props,Bn);di&&moveTeleport(e,di,null,En,0)}else vi&&moveTeleport(e,Pi,pi,En,1);updateCssVars(e,ni)}},remove(Oe,e,Te,{um:ke,o:{remove:Be}},Ue){const{shapeFlag:He,children:We,anchor:Cn,targetStart:En,targetAnchor:An,target:Sn,props:Tn}=Oe;if(Sn&&(Be(En),Be(An)),Ue&&Be(Cn),He&16){const Ln=Ue||!isTeleportDisabled(Tn);for(let Bn=0;Bn<We.length;Bn++){const ei=We[Bn];ke(ei,e,Te,Ln,!!ei.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(Oe,e,Te,{o:{insert:ke},m:Be},Ue=2){Ue===0&&ke(Oe.targetAnchor,e,Te);const{el:He,anchor:We,shapeFlag:Cn,children:En,props:An}=Oe,Sn=Ue===2;if(Sn&&ke(He,e,Te),(!Sn||isTeleportDisabled(An))&&Cn&16)for(let Tn=0;Tn<En.length;Tn++)Be(En[Tn],e,Te,2);Sn&&ke(We,e,Te)}function hydrateTeleport(Oe,e,Te,ke,Be,Ue,{o:{nextSibling:He,parentNode:We,querySelector:Cn,insert:En,createText:An}},Sn){const Tn=e.target=resolveTarget(e.props,Cn);if(Tn){const Ln=isTeleportDisabled(e.props),Bn=Tn._lpa||Tn.firstChild;if(e.shapeFlag&16)if(Ln)e.anchor=Sn(He(Oe),e,We(Oe),Te,ke,Be,Ue),e.targetStart=Bn,e.targetAnchor=Bn&&He(Bn);else{e.anchor=He(Oe);let ei=Bn;for(;ei;){if(ei&&ei.nodeType===8){if(ei.data==="teleport start anchor")e.targetStart=ei;else if(ei.data==="teleport anchor"){e.targetAnchor=ei,Tn._lpa=e.targetAnchor&&He(e.targetAnchor);break}}ei=He(ei)}e.targetAnchor||prepareAnchor(Tn,e,An,En),Sn(Bn&&He(Bn),e,Tn,Te,ke,Be,Ue)}updateCssVars(e,Ln)}return e.anchor&&He(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(Oe,e){const Te=Oe.ctx;if(Te&&Te.ut){let ke,Be;for(e?(ke=Oe.el,Be=Oe.anchor):(ke=Oe.targetStart,Be=Oe.targetAnchor);ke&&ke!==Be;)ke.nodeType===1&&ke.setAttribute("data-v-owner",Te.uid),ke=ke.nextSibling;Te.ut()}}function prepareAnchor(Oe,e,Te,ke){const Be=e.targetStart=Te(""),Ue=e.targetAnchor=Te("");return Be[TeleportEndKey]=Ue,Oe&&(ke(Be,Oe),ke(Ue,Oe)),Ue}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const Oe={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{Oe.isMounted=!0}),onBeforeUnmount(()=>{Oe.isUnmounting=!0}),Oe}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=Oe=>{const e=Oe.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(Oe,{slots:e}){const Te=getCurrentInstance(),ke=useTransitionState();return()=>{const Be=e.default&&getTransitionRawChildren(e.default(),!0);if(!Be||!Be.length)return;const Ue=findNonCommentChild(Be),He=toRaw(Oe),{mode:We}=He;if(ke.isLeaving)return emptyPlaceholder(Ue);const Cn=getInnerChild$1(Ue);if(!Cn)return emptyPlaceholder(Ue);let En=resolveTransitionHooks(Cn,He,ke,Te,Sn=>En=Sn);Cn.type!==Comment&&setTransitionHooks(Cn,En);let An=Te.subTree&&getInnerChild$1(Te.subTree);if(An&&An.type!==Comment&&!isSameVNodeType(Cn,An)&&recursiveGetSubtree(Te).type!==Comment){let Sn=resolveTransitionHooks(An,He,ke,Te);if(setTransitionHooks(An,Sn),We==="out-in"&&Cn.type!==Comment)return ke.isLeaving=!0,Sn.afterLeave=()=>{ke.isLeaving=!1,Te.job.flags&8||Te.update(),delete Sn.afterLeave,An=void 0},emptyPlaceholder(Ue);We==="in-out"&&Cn.type!==Comment?Sn.delayLeave=(Tn,Ln,Bn)=>{const ei=getLeavingNodesForType(ke,An);ei[String(An.key)]=An,Tn[leaveCbKey]=()=>{Ln(),Tn[leaveCbKey]=void 0,delete En.delayedLeave,An=void 0},En.delayedLeave=()=>{Bn(),delete En.delayedLeave,An=void 0}}:An=void 0}else An&&(An=void 0);return Ue}}};function findNonCommentChild(Oe){let e=Oe[0];if(Oe.length>1){for(const Te of Oe)if(Te.type!==Comment){e=Te;break}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(Oe,e){const{leavingVNodes:Te}=Oe;let ke=Te.get(e.type);return ke||(ke=Object.create(null),Te.set(e.type,ke)),ke}function resolveTransitionHooks(Oe,e,Te,ke,Be){const{appear:Ue,mode:He,persisted:We=!1,onBeforeEnter:Cn,onEnter:En,onAfterEnter:An,onEnterCancelled:Sn,onBeforeLeave:Tn,onLeave:Ln,onAfterLeave:Bn,onLeaveCancelled:ei,onBeforeAppear:ti,onAppear:ni,onAfterAppear:ri,onAppearCancelled:si}=e,ai=String(Oe.key),li=getLeavingNodesForType(Te,Oe),Pi=(Ri,Fi)=>{Ri&&callWithAsyncErrorHandling(Ri,ke,9,Fi)},pi=(Ri,Fi)=>{const di=Fi[1];Pi(Ri,Fi),isArray$1(Ri)?Ri.every(ci=>ci.length<=1)&&di():Ri.length<=1&&di()},vi={mode:He,persisted:We,beforeEnter(Ri){let Fi=Cn;if(!Te.isMounted)if(Ue)Fi=ti||Cn;else return;Ri[leaveCbKey]&&Ri[leaveCbKey](!0);const di=li[ai];di&&isSameVNodeType(Oe,di)&&di.el[leaveCbKey]&&di.el[leaveCbKey](),Pi(Fi,[Ri])},enter(Ri){let Fi=En,di=An,ci=Sn;if(!Te.isMounted)if(Ue)Fi=ni||En,di=ri||An,ci=si||Sn;else return;let Mi=!1;const Oi=Ri[enterCbKey$1]=Hi=>{Mi||(Mi=!0,Hi?Pi(ci,[Ri]):Pi(di,[Ri]),vi.delayedLeave&&vi.delayedLeave(),Ri[enterCbKey$1]=void 0)};Fi?pi(Fi,[Ri,Oi]):Oi()},leave(Ri,Fi){const di=String(Oe.key);if(Ri[enterCbKey$1]&&Ri[enterCbKey$1](!0),Te.isUnmounting)return Fi();Pi(Tn,[Ri]);let ci=!1;const Mi=Ri[leaveCbKey]=Oi=>{ci||(ci=!0,Fi(),Oi?Pi(ei,[Ri]):Pi(Bn,[Ri]),Ri[leaveCbKey]=void 0,li[di]===Oe&&delete li[di])};li[di]=Oe,Ln?pi(Ln,[Ri,Mi]):Mi()},clone(Ri){const Fi=resolveTransitionHooks(Ri,e,Te,ke,Be);return Be&&Be(Fi),Fi}};return vi}function emptyPlaceholder(Oe){if(isKeepAlive(Oe))return Oe=cloneVNode(Oe),Oe.children=null,Oe}function getInnerChild$1(Oe){if(!isKeepAlive(Oe))return isTeleport(Oe.type)&&Oe.children?findNonCommentChild(Oe.children):Oe;const{shapeFlag:e,children:Te}=Oe;if(Te){if(e&16)return Te[0];if(e&32&&isFunction(Te.default))return Te.default()}}function setTransitionHooks(Oe,e){Oe.shapeFlag&6&&Oe.component?(Oe.transition=e,setTransitionHooks(Oe.component.subTree,e)):Oe.shapeFlag&128?(Oe.ssContent.transition=e.clone(Oe.ssContent),Oe.ssFallback.transition=e.clone(Oe.ssFallback)):Oe.transition=e}function getTransitionRawChildren(Oe,e=!1,Te){let ke=[],Be=0;for(let Ue=0;Ue<Oe.length;Ue++){let He=Oe[Ue];const We=Te==null?He.key:String(Te)+String(He.key!=null?He.key:Ue);He.type===Fragment?(He.patchFlag&128&&Be++,ke=ke.concat(getTransitionRawChildren(He.children,e,We))):(e||He.type!==Comment)&&ke.push(We!=null?cloneVNode(He,{key:We}):He)}if(Be>1)for(let Ue=0;Ue<ke.length;Ue++)ke[Ue].patchFlag=-2;return ke}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(Oe,e){return isFunction(Oe)?extend$5({name:Oe.name},e,{setup:Oe}):Oe}function useId(){const Oe=getCurrentInstance();return Oe?(Oe.appContext.config.idPrefix||"v")+"-"+Oe.ids[0]+Oe.ids[1]++:""}function markAsyncBoundary(Oe){Oe.ids=[Oe.ids[0]+Oe.ids[2]+++"-",0,0]}function useTemplateRef(Oe){const e=getCurrentInstance(),Te=shallowRef(null);if(e){const Be=e.refs===EMPTY_OBJ?e.refs={}:e.refs;Object.defineProperty(Be,Oe,{enumerable:!0,get:()=>Te.value,set:Ue=>Te.value=Ue})}return Te}function setRef(Oe,e,Te,ke,Be=!1){if(isArray$1(Oe)){Oe.forEach((Bn,ei)=>setRef(Bn,e&&(isArray$1(e)?e[ei]:e),Te,ke,Be));return}if(isAsyncWrapper(ke)&&!Be){ke.shapeFlag&512&&ke.type.__asyncResolved&&ke.component.subTree.component&&setRef(Oe,e,Te,ke.component.subTree);return}const Ue=ke.shapeFlag&4?getComponentPublicInstance(ke.component):ke.el,He=Be?null:Ue,{i:We,r:Cn}=Oe,En=e&&e.r,An=We.refs===EMPTY_OBJ?We.refs={}:We.refs,Sn=We.setupState,Tn=toRaw(Sn),Ln=Sn===EMPTY_OBJ?()=>!1:Bn=>hasOwn(Tn,Bn);if(En!=null&&En!==Cn&&(isString(En)?(An[En]=null,Ln(En)&&(Sn[En]=null)):isRef(En)&&(En.value=null)),isFunction(Cn))callWithErrorHandling(Cn,We,12,[He,An]);else{const Bn=isString(Cn),ei=isRef(Cn);if(Bn||ei){const ti=()=>{if(Oe.f){const ni=Bn?Ln(Cn)?Sn[Cn]:An[Cn]:Cn.value;Be?isArray$1(ni)&&remove(ni,Ue):isArray$1(ni)?ni.includes(Ue)||ni.push(Ue):Bn?(An[Cn]=[Ue],Ln(Cn)&&(Sn[Cn]=An[Cn])):(Cn.value=[Ue],Oe.k&&(An[Oe.k]=Cn.value))}else Bn?(An[Cn]=He,Ln(Cn)&&(Sn[Cn]=He)):ei&&(Cn.value=He,Oe.k&&(An[Oe.k]=He))};He?(ti.id=-1,queuePostRenderEffect(ti,Te)):ti()}}}let hasLoggedMismatchError=!1;const logMismatchError=()=>{hasLoggedMismatchError||(console.error("Hydration completed but contains mismatches."),hasLoggedMismatchError=!0)},isSVGContainer=Oe=>Oe.namespaceURI.includes("svg")&&Oe.tagName!=="foreignObject",isMathMLContainer=Oe=>Oe.namespaceURI.includes("MathML"),getContainerType=Oe=>{if(Oe.nodeType===1){if(isSVGContainer(Oe))return"svg";if(isMathMLContainer(Oe))return"mathml"}},isComment=Oe=>Oe.nodeType===8;function createHydrationFunctions(Oe){const{mt:e,p:Te,o:{patchProp:ke,createText:Be,nextSibling:Ue,parentNode:He,remove:We,insert:Cn,createComment:En}}=Oe,An=(si,ai)=>{if(!ai.hasChildNodes()){Te(null,si,ai),flushPostFlushCbs(),ai._vnode=si;return}Sn(ai.firstChild,si,null,null,null),flushPostFlushCbs(),ai._vnode=si},Sn=(si,ai,li,Pi,pi,vi=!1)=>{vi=vi||!!ai.dynamicChildren;const Ri=isComment(si)&&si.data==="[",Fi=()=>ei(si,ai,li,Pi,pi,Ri),{type:di,ref:ci,shapeFlag:Mi,patchFlag:Oi}=ai;let Hi=si.nodeType;ai.el=si,Oi===-2&&(vi=!1,ai.dynamicChildren=null);let Ki=null;switch(di){case Text$1:Hi!==3?ai.children===""?(Cn(ai.el=Be(""),He(si),si),Ki=si):Ki=Fi():(si.data!==ai.children&&(logMismatchError(),si.data=ai.children),Ki=Ue(si));break;case Comment:ri(si)?(Ki=Ue(si),ni(ai.el=si.content.firstChild,si,li)):Hi!==8||Ri?Ki=Fi():Ki=Ue(si);break;case Static:if(Ri&&(si=Ue(si),Hi=si.nodeType),Hi===1||Hi===3){Ki=si;const or=!ai.children.length;for(let sr=0;sr<ai.staticCount;sr++)or&&(ai.children+=Ki.nodeType===1?Ki.outerHTML:Ki.data),sr===ai.staticCount-1&&(ai.anchor=Ki),Ki=Ue(Ki);return Ri?Ue(Ki):Ki}else Fi();break;case Fragment:Ri?Ki=Bn(si,ai,li,Pi,pi,vi):Ki=Fi();break;default:if(Mi&1)(Hi!==1||ai.type.toLowerCase()!==si.tagName.toLowerCase())&&!ri(si)?Ki=Fi():Ki=Tn(si,ai,li,Pi,pi,vi);else if(Mi&6){ai.slotScopeIds=pi;const or=He(si);if(Ri?Ki=ti(si):isComment(si)&&si.data==="teleport start"?Ki=ti(si,si.data,"teleport end"):Ki=Ue(si),e(ai,or,null,li,Pi,getContainerType(or),vi),isAsyncWrapper(ai)&&!ai.type.__asyncResolved){let sr;Ri?(sr=createVNode(Fragment),sr.anchor=Ki?Ki.previousSibling:or.lastChild):sr=si.nodeType===3?createTextVNode(""):createVNode("div"),sr.el=si,ai.component.subTree=sr}}else Mi&64?Hi!==8?Ki=Fi():Ki=ai.type.hydrate(si,ai,li,Pi,pi,vi,Oe,Ln):Mi&128&&(Ki=ai.type.hydrate(si,ai,li,Pi,getContainerType(He(si)),pi,vi,Oe,Sn))}return ci!=null&&setRef(ci,null,Pi,ai),Ki},Tn=(si,ai,li,Pi,pi,vi)=>{vi=vi||!!ai.dynamicChildren;const{type:Ri,props:Fi,patchFlag:di,shapeFlag:ci,dirs:Mi,transition:Oi}=ai,Hi=Ri==="input"||Ri==="option";if(Hi||di!==-1){Mi&&invokeDirectiveHook(ai,null,li,"created");let Ki=!1;if(ri(si)){Ki=needTransition(null,Oi)&&li&&li.vnode.props&&li.vnode.props.appear;const sr=si.content.firstChild;Ki&&Oi.beforeEnter(sr),ni(sr,si,li),ai.el=si=sr}if(ci&16&&!(Fi&&(Fi.innerHTML||Fi.textContent))){let sr=Ln(si.firstChild,ai,si,li,Pi,pi,vi);for(;sr;){isMismatchAllowed(si,1)||logMismatchError();const Cr=sr;sr=sr.nextSibling,We(Cr)}}else if(ci&8){let sr=ai.children;sr[0]===`
`&&(si.tagName==="PRE"||si.tagName==="TEXTAREA")&&(sr=sr.slice(1)),si.textContent!==sr&&(isMismatchAllowed(si,0)||logMismatchError(),si.textContent=ai.children)}if(Fi){if(Hi||!vi||di&48){const sr=si.tagName.includes("-");for(const Cr in Fi)(Hi&&(Cr.endsWith("value")||Cr==="indeterminate")||isOn(Cr)&&!isReservedProp(Cr)||Cr[0]==="."||sr)&&ke(si,Cr,null,Fi[Cr],void 0,li)}else if(Fi.onClick)ke(si,"onClick",null,Fi.onClick,void 0,li);else if(di&4&&isReactive(Fi.style))for(const sr in Fi.style)Fi.style[sr]}let or;(or=Fi&&Fi.onVnodeBeforeMount)&&invokeVNodeHook(or,li,ai),Mi&&invokeDirectiveHook(ai,null,li,"beforeMount"),((or=Fi&&Fi.onVnodeMounted)||Mi||Ki)&&queueEffectWithSuspense(()=>{or&&invokeVNodeHook(or,li,ai),Ki&&Oi.enter(si),Mi&&invokeDirectiveHook(ai,null,li,"mounted")},Pi)}return si.nextSibling},Ln=(si,ai,li,Pi,pi,vi,Ri)=>{Ri=Ri||!!ai.dynamicChildren;const Fi=ai.children,di=Fi.length;for(let ci=0;ci<di;ci++){const Mi=Ri?Fi[ci]:Fi[ci]=normalizeVNode(Fi[ci]),Oi=Mi.type===Text$1;si?(Oi&&!Ri&&ci+1<di&&normalizeVNode(Fi[ci+1]).type===Text$1&&(Cn(Be(si.data.slice(Mi.children.length)),li,Ue(si)),si.data=Mi.children),si=Sn(si,Mi,Pi,pi,vi,Ri)):Oi&&!Mi.children?Cn(Mi.el=Be(""),li):(isMismatchAllowed(li,1)||logMismatchError(),Te(null,Mi,li,null,Pi,pi,getContainerType(li),vi))}return si},Bn=(si,ai,li,Pi,pi,vi)=>{const{slotScopeIds:Ri}=ai;Ri&&(pi=pi?pi.concat(Ri):Ri);const Fi=He(si),di=Ln(Ue(si),ai,Fi,li,Pi,pi,vi);return di&&isComment(di)&&di.data==="]"?Ue(ai.anchor=di):(logMismatchError(),Cn(ai.anchor=En("]"),Fi,di),di)},ei=(si,ai,li,Pi,pi,vi)=>{if(isMismatchAllowed(si.parentElement,1)||logMismatchError(),ai.el=null,vi){const di=ti(si);for(;;){const ci=Ue(si);if(ci&&ci!==di)We(ci);else break}}const Ri=Ue(si),Fi=He(si);return We(si),Te(null,ai,Fi,Ri,li,Pi,getContainerType(Fi),pi),li&&(li.vnode.el=ai.el,updateHOCHostEl(li,ai.el)),Ri},ti=(si,ai="[",li="]")=>{let Pi=0;for(;si;)if(si=Ue(si),si&&isComment(si)&&(si.data===ai&&Pi++,si.data===li)){if(Pi===0)return Ue(si);Pi--}return si},ni=(si,ai,li)=>{const Pi=ai.parentNode;Pi&&Pi.replaceChild(si,ai);let pi=li;for(;pi;)pi.vnode.el===ai&&(pi.vnode.el=pi.subTree.el=si),pi=pi.parent},ri=si=>si.nodeType===1&&si.tagName==="TEMPLATE";return[An,Sn]}const allowMismatchAttr="data-allow-mismatch",MismatchTypeString={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function isMismatchAllowed(Oe,e){if(e===0||e===1)for(;Oe&&!Oe.hasAttribute(allowMismatchAttr);)Oe=Oe.parentElement;const Te=Oe&&Oe.getAttribute(allowMismatchAttr);if(Te==null)return!1;if(Te==="")return!0;{const ke=Te.split(",");return e===0&&ke.includes("children")?!0:Te.split(",").includes(MismatchTypeString[e])}}const requestIdleCallback=getGlobalThis().requestIdleCallback||(Oe=>setTimeout(Oe,1)),cancelIdleCallback=getGlobalThis().cancelIdleCallback||(Oe=>clearTimeout(Oe)),hydrateOnIdle=(Oe=1e4)=>e=>{const Te=requestIdleCallback(e,{timeout:Oe});return()=>cancelIdleCallback(Te)};function elementIsVisibleInViewport(Oe){const{top:e,left:Te,bottom:ke,right:Be}=Oe.getBoundingClientRect(),{innerHeight:Ue,innerWidth:He}=window;return(e>0&&e<Ue||ke>0&&ke<Ue)&&(Te>0&&Te<He||Be>0&&Be<He)}const hydrateOnVisible=Oe=>(e,Te)=>{const ke=new IntersectionObserver(Be=>{for(const Ue of Be)if(Ue.isIntersecting){ke.disconnect(),e();break}},Oe);return Te(Be=>{if(Be instanceof Element){if(elementIsVisibleInViewport(Be))return e(),ke.disconnect(),!1;ke.observe(Be)}}),()=>ke.disconnect()},hydrateOnMediaQuery=Oe=>e=>{if(Oe){const Te=matchMedia(Oe);if(Te.matches)e();else return Te.addEventListener("change",e,{once:!0}),()=>Te.removeEventListener("change",e)}},hydrateOnInteraction=(Oe=[])=>(e,Te)=>{isString(Oe)&&(Oe=[Oe]);let ke=!1;const Be=He=>{ke||(ke=!0,Ue(),e(),He.target.dispatchEvent(new He.constructor(He.type,He)))},Ue=()=>{Te(He=>{for(const We of Oe)He.removeEventListener(We,Be)})};return Te(He=>{for(const We of Oe)He.addEventListener(We,Be,{once:!0})}),Ue};function forEachElement(Oe,e){if(isComment(Oe)&&Oe.data==="["){let Te=1,ke=Oe.nextSibling;for(;ke;){if(ke.nodeType===1){if(e(ke)===!1)break}else if(isComment(ke))if(ke.data==="]"){if(--Te===0)break}else ke.data==="["&&Te++;ke=ke.nextSibling}}else e(Oe)}const isAsyncWrapper=Oe=>!!Oe.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(Oe){isFunction(Oe)&&(Oe={loader:Oe});const{loader:e,loadingComponent:Te,errorComponent:ke,delay:Be=200,hydrate:Ue,timeout:He,suspensible:We=!0,onError:Cn}=Oe;let En=null,An,Sn=0;const Tn=()=>(Sn++,En=null,Ln()),Ln=()=>{let Bn;return En||(Bn=En=e().catch(ei=>{if(ei=ei instanceof Error?ei:new Error(String(ei)),Cn)return new Promise((ti,ni)=>{Cn(ei,()=>ti(Tn()),()=>ni(ei),Sn+1)});throw ei}).then(ei=>Bn!==En&&En?En:(ei&&(ei.__esModule||ei[Symbol.toStringTag]==="Module")&&(ei=ei.default),An=ei,ei)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:Ln,__asyncHydrate(Bn,ei,ti){const ni=Ue?()=>{const ri=Ue(ti,si=>forEachElement(Bn,si));ri&&(ei.bum||(ei.bum=[])).push(ri)}:ti;An?ni():Ln().then(()=>!ei.isUnmounted&&ni())},get __asyncResolved(){return An},setup(){const Bn=currentInstance;if(markAsyncBoundary(Bn),An)return()=>createInnerComp(An,Bn);const ei=si=>{En=null,handleError(si,Bn,13,!ke)};if(We&&Bn.suspense||isInSSRComponentSetup)return Ln().then(si=>()=>createInnerComp(si,Bn)).catch(si=>(ei(si),()=>ke?createVNode(ke,{error:si}):null));const ti=ref(!1),ni=ref(),ri=ref(!!Be);return Be&&setTimeout(()=>{ri.value=!1},Be),He!=null&&setTimeout(()=>{if(!ti.value&&!ni.value){const si=new Error(`Async component timed out after ${He}ms.`);ei(si),ni.value=si}},He),Ln().then(()=>{ti.value=!0,Bn.parent&&isKeepAlive(Bn.parent.vnode)&&Bn.parent.update()}).catch(si=>{ei(si),ni.value=si}),()=>{if(ti.value&&An)return createInnerComp(An,Bn);if(ni.value&&ke)return createVNode(ke,{error:ni.value});if(Te&&!ri.value)return createVNode(Te)}}})}function createInnerComp(Oe,e){const{ref:Te,props:ke,children:Be,ce:Ue}=e.vnode,He=createVNode(Oe,ke,Be);return He.ref=Te,He.ce=Ue,delete e.vnode.ce,He}const isKeepAlive=Oe=>Oe.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(Oe,{slots:e}){const Te=getCurrentInstance(),ke=Te.ctx;if(!ke.renderer)return()=>{const ri=e.default&&e.default();return ri&&ri.length===1?ri[0]:ri};const Be=new Map,Ue=new Set;let He=null;const We=Te.suspense,{renderer:{p:Cn,m:En,um:An,o:{createElement:Sn}}}=ke,Tn=Sn("div");ke.activate=(ri,si,ai,li,Pi)=>{const pi=ri.component;En(ri,si,ai,0,We),Cn(pi.vnode,ri,si,ai,pi,We,li,ri.slotScopeIds,Pi),queuePostRenderEffect(()=>{pi.isDeactivated=!1,pi.a&&invokeArrayFns(pi.a);const vi=ri.props&&ri.props.onVnodeMounted;vi&&invokeVNodeHook(vi,pi.parent,ri)},We)},ke.deactivate=ri=>{const si=ri.component;invalidateMount(si.m),invalidateMount(si.a),En(ri,Tn,null,1,We),queuePostRenderEffect(()=>{si.da&&invokeArrayFns(si.da);const ai=ri.props&&ri.props.onVnodeUnmounted;ai&&invokeVNodeHook(ai,si.parent,ri),si.isDeactivated=!0},We)};function Ln(ri){resetShapeFlag(ri),An(ri,Te,We,!0)}function Bn(ri){Be.forEach((si,ai)=>{const li=getComponentName(si.type);li&&!ri(li)&&ei(ai)})}function ei(ri){const si=Be.get(ri);si&&(!He||!isSameVNodeType(si,He))?Ln(si):He&&resetShapeFlag(He),Be.delete(ri),Ue.delete(ri)}watch(()=>[Oe.include,Oe.exclude],([ri,si])=>{ri&&Bn(ai=>matches$1(ri,ai)),si&&Bn(ai=>!matches$1(si,ai))},{flush:"post",deep:!0});let ti=null;const ni=()=>{ti!=null&&(isSuspense(Te.subTree.type)?queuePostRenderEffect(()=>{Be.set(ti,getInnerChild(Te.subTree))},Te.subTree.suspense):Be.set(ti,getInnerChild(Te.subTree)))};return onMounted(ni),onUpdated(ni),onBeforeUnmount(()=>{Be.forEach(ri=>{const{subTree:si,suspense:ai}=Te,li=getInnerChild(si);if(ri.type===li.type&&ri.key===li.key){resetShapeFlag(li);const Pi=li.component.da;Pi&&queuePostRenderEffect(Pi,ai);return}Ln(ri)})}),()=>{if(ti=null,!e.default)return He=null;const ri=e.default(),si=ri[0];if(ri.length>1)return He=null,ri;if(!isVNode(si)||!(si.shapeFlag&4)&&!(si.shapeFlag&128))return He=null,si;let ai=getInnerChild(si);if(ai.type===Comment)return He=null,ai;const li=ai.type,Pi=getComponentName(isAsyncWrapper(ai)?ai.type.__asyncResolved||{}:li),{include:pi,exclude:vi,max:Ri}=Oe;if(pi&&(!Pi||!matches$1(pi,Pi))||vi&&Pi&&matches$1(vi,Pi))return ai.shapeFlag&=-257,He=ai,si;const Fi=ai.key==null?li:ai.key,di=Be.get(Fi);return ai.el&&(ai=cloneVNode(ai),si.shapeFlag&128&&(si.ssContent=ai)),ti=Fi,di?(ai.el=di.el,ai.component=di.component,ai.transition&&setTransitionHooks(ai,ai.transition),ai.shapeFlag|=512,Ue.delete(Fi),Ue.add(Fi)):(Ue.add(Fi),Ri&&Ue.size>parseInt(Ri,10)&&ei(Ue.values().next().value)),ai.shapeFlag|=256,He=ai,isSuspense(si.type)?si:ai}}},KeepAlive=KeepAliveImpl;function matches$1(Oe,e){return isArray$1(Oe)?Oe.some(Te=>matches$1(Te,e)):isString(Oe)?Oe.split(",").includes(e):isRegExp(Oe)?(Oe.lastIndex=0,Oe.test(e)):!1}function onActivated(Oe,e){registerKeepAliveHook(Oe,"a",e)}function onDeactivated(Oe,e){registerKeepAliveHook(Oe,"da",e)}function registerKeepAliveHook(Oe,e,Te=currentInstance){const ke=Oe.__wdc||(Oe.__wdc=()=>{let Be=Te;for(;Be;){if(Be.isDeactivated)return;Be=Be.parent}return Oe()});if(injectHook(e,ke,Te),Te){let Be=Te.parent;for(;Be&&Be.parent;)isKeepAlive(Be.parent.vnode)&&injectToKeepAliveRoot(ke,e,Te,Be),Be=Be.parent}}function injectToKeepAliveRoot(Oe,e,Te,ke){const Be=injectHook(e,Oe,ke,!0);onUnmounted(()=>{remove(ke[e],Be)},Te)}function resetShapeFlag(Oe){Oe.shapeFlag&=-257,Oe.shapeFlag&=-513}function getInnerChild(Oe){return Oe.shapeFlag&128?Oe.ssContent:Oe}function injectHook(Oe,e,Te=currentInstance,ke=!1){if(Te){const Be=Te[Oe]||(Te[Oe]=[]),Ue=e.__weh||(e.__weh=(...He)=>{pauseTracking();const We=setCurrentInstance(Te),Cn=callWithAsyncErrorHandling(e,Te,Oe,He);return We(),resetTracking(),Cn});return ke?Be.unshift(Ue):Be.push(Ue),Ue}}const createHook=Oe=>(e,Te=currentInstance)=>{(!isInSSRComponentSetup||Oe==="sp")&&injectHook(Oe,(...ke)=>e(...ke),Te)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(Oe,e=currentInstance){injectHook("ec",Oe,e)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(Oe,e){return resolveAsset(COMPONENTS,Oe,!0,e)||Oe}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(Oe){return isString(Oe)?resolveAsset(COMPONENTS,Oe,!1)||Oe:Oe||NULL_DYNAMIC_COMPONENT}function resolveDirective(Oe){return resolveAsset(DIRECTIVES,Oe)}function resolveAsset(Oe,e,Te=!0,ke=!1){const Be=currentRenderingInstance||currentInstance;if(Be){const Ue=Be.type;if(Oe===COMPONENTS){const We=getComponentName(Ue,!1);if(We&&(We===e||We===camelize(e)||We===capitalize(camelize(e))))return Ue}const He=resolve(Be[Oe]||Ue[Oe],e)||resolve(Be.appContext[Oe],e);return!He&&ke?Ue:He}}function resolve(Oe,e){return Oe&&(Oe[e]||Oe[camelize(e)]||Oe[capitalize(camelize(e))])}function renderList(Oe,e,Te,ke){let Be;const Ue=Te&&Te[ke],He=isArray$1(Oe);if(He||isString(Oe)){const We=He&&isReactive(Oe);let Cn=!1;We&&(Cn=!isShallow(Oe),Oe=shallowReadArray(Oe)),Be=new Array(Oe.length);for(let En=0,An=Oe.length;En<An;En++)Be[En]=e(Cn?toReactive(Oe[En]):Oe[En],En,void 0,Ue&&Ue[En])}else if(typeof Oe=="number"){Be=new Array(Oe);for(let We=0;We<Oe;We++)Be[We]=e(We+1,We,void 0,Ue&&Ue[We])}else if(isObject$1(Oe))if(Oe[Symbol.iterator])Be=Array.from(Oe,(We,Cn)=>e(We,Cn,void 0,Ue&&Ue[Cn]));else{const We=Object.keys(Oe);Be=new Array(We.length);for(let Cn=0,En=We.length;Cn<En;Cn++){const An=We[Cn];Be[Cn]=e(Oe[An],An,Cn,Ue&&Ue[Cn])}}else Be=[];return Te&&(Te[ke]=Be),Be}function createSlots(Oe,e){for(let Te=0;Te<e.length;Te++){const ke=e[Te];if(isArray$1(ke))for(let Be=0;Be<ke.length;Be++)Oe[ke[Be].name]=ke[Be].fn;else ke&&(Oe[ke.name]=ke.key?(...Be)=>{const Ue=ke.fn(...Be);return Ue&&(Ue.key=ke.key),Ue}:ke.fn)}return Oe}function renderSlot(Oe,e,Te={},ke,Be){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return e!=="default"&&(Te.name=e),openBlock(),createBlock(Fragment,null,[createVNode("slot",Te,ke&&ke())],64);let Ue=Oe[e];Ue&&Ue._c&&(Ue._d=!1),openBlock();const He=Ue&&ensureValidVNode(Ue(Te)),We=Te.key||He&&He.key,Cn=createBlock(Fragment,{key:(We&&!isSymbol(We)?We:`_${e}`)+(!He&&ke?"_fb":"")},He||(ke?ke():[]),He&&Oe._===1?64:-2);return!Be&&Cn.scopeId&&(Cn.slotScopeIds=[Cn.scopeId+"-s"]),Ue&&Ue._c&&(Ue._d=!0),Cn}function ensureValidVNode(Oe){return Oe.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?Oe:null}function toHandlers(Oe,e){const Te={};for(const ke in Oe)Te[e&&/[A-Z]/.test(ke)?`on:${ke}`:toHandlerKey(ke)]=Oe[ke];return Te}const getPublicInstance=Oe=>Oe?isStatefulComponent(Oe)?getComponentPublicInstance(Oe):getPublicInstance(Oe.parent):null,publicPropertiesMap=extend$5(Object.create(null),{$:Oe=>Oe,$el:Oe=>Oe.vnode.el,$data:Oe=>Oe.data,$props:Oe=>Oe.props,$attrs:Oe=>Oe.attrs,$slots:Oe=>Oe.slots,$refs:Oe=>Oe.refs,$parent:Oe=>getPublicInstance(Oe.parent),$root:Oe=>getPublicInstance(Oe.root),$host:Oe=>Oe.ce,$emit:Oe=>Oe.emit,$options:Oe=>resolveMergedOptions(Oe),$forceUpdate:Oe=>Oe.f||(Oe.f=()=>{queueJob(Oe.update)}),$nextTick:Oe=>Oe.n||(Oe.n=nextTick.bind(Oe.proxy)),$watch:Oe=>instanceWatch.bind(Oe)}),hasSetupBinding=(Oe,e)=>Oe!==EMPTY_OBJ&&!Oe.__isScriptSetup&&hasOwn(Oe,e),PublicInstanceProxyHandlers={get({_:Oe},e){if(e==="__v_skip")return!0;const{ctx:Te,setupState:ke,data:Be,props:Ue,accessCache:He,type:We,appContext:Cn}=Oe;let En;if(e[0]!=="$"){const Ln=He[e];if(Ln!==void 0)switch(Ln){case 1:return ke[e];case 2:return Be[e];case 4:return Te[e];case 3:return Ue[e]}else{if(hasSetupBinding(ke,e))return He[e]=1,ke[e];if(Be!==EMPTY_OBJ&&hasOwn(Be,e))return He[e]=2,Be[e];if((En=Oe.propsOptions[0])&&hasOwn(En,e))return He[e]=3,Ue[e];if(Te!==EMPTY_OBJ&&hasOwn(Te,e))return He[e]=4,Te[e];shouldCacheAccess&&(He[e]=0)}}const An=publicPropertiesMap[e];let Sn,Tn;if(An)return e==="$attrs"&&track(Oe.attrs,"get",""),An(Oe);if((Sn=We.__cssModules)&&(Sn=Sn[e]))return Sn;if(Te!==EMPTY_OBJ&&hasOwn(Te,e))return He[e]=4,Te[e];if(Tn=Cn.config.globalProperties,hasOwn(Tn,e))return Tn[e]},set({_:Oe},e,Te){const{data:ke,setupState:Be,ctx:Ue}=Oe;return hasSetupBinding(Be,e)?(Be[e]=Te,!0):ke!==EMPTY_OBJ&&hasOwn(ke,e)?(ke[e]=Te,!0):hasOwn(Oe.props,e)||e[0]==="$"&&e.slice(1)in Oe?!1:(Ue[e]=Te,!0)},has({_:{data:Oe,setupState:e,accessCache:Te,ctx:ke,appContext:Be,propsOptions:Ue}},He){let We;return!!Te[He]||Oe!==EMPTY_OBJ&&hasOwn(Oe,He)||hasSetupBinding(e,He)||(We=Ue[0])&&hasOwn(We,He)||hasOwn(ke,He)||hasOwn(publicPropertiesMap,He)||hasOwn(Be.config.globalProperties,He)},defineProperty(Oe,e,Te){return Te.get!=null?Oe._.accessCache[e]=0:hasOwn(Te,"value")&&this.set(Oe,e,Te.value,null),Reflect.defineProperty(Oe,e,Te)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$5({},PublicInstanceProxyHandlers,{get(Oe,e){if(e!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(Oe,e,Oe)},has(Oe,e){return e[0]!=="_"&&!isGloballyAllowed(e)}});function defineProps(){return null}function defineEmits(){return null}function defineExpose(Oe){}function defineOptions(Oe){}function defineSlots(){return null}function defineModel(){}function withDefaults(Oe,e){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const Oe=getCurrentInstance();return Oe.setupContext||(Oe.setupContext=createSetupContext(Oe))}function normalizePropsOrEmits(Oe){return isArray$1(Oe)?Oe.reduce((e,Te)=>(e[Te]=null,e),{}):Oe}function mergeDefaults(Oe,e){const Te=normalizePropsOrEmits(Oe);for(const ke in e){if(ke.startsWith("__skip"))continue;let Be=Te[ke];Be?isArray$1(Be)||isFunction(Be)?Be=Te[ke]={type:Be,default:e[ke]}:Be.default=e[ke]:Be===null&&(Be=Te[ke]={default:e[ke]}),Be&&e[`__skip_${ke}`]&&(Be.skipFactory=!0)}return Te}function mergeModels(Oe,e){return!Oe||!e?Oe||e:isArray$1(Oe)&&isArray$1(e)?Oe.concat(e):extend$5({},normalizePropsOrEmits(Oe),normalizePropsOrEmits(e))}function createPropsRestProxy(Oe,e){const Te={};for(const ke in Oe)e.includes(ke)||Object.defineProperty(Te,ke,{enumerable:!0,get:()=>Oe[ke]});return Te}function withAsyncContext(Oe){const e=getCurrentInstance();let Te=Oe();return unsetCurrentInstance(),isPromise(Te)&&(Te=Te.catch(ke=>{throw setCurrentInstance(e),ke})),[Te,()=>setCurrentInstance(e)]}let shouldCacheAccess=!0;function applyOptions(Oe){const e=resolveMergedOptions(Oe),Te=Oe.proxy,ke=Oe.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,Oe,"bc");const{data:Be,computed:Ue,methods:He,watch:We,provide:Cn,inject:En,created:An,beforeMount:Sn,mounted:Tn,beforeUpdate:Ln,updated:Bn,activated:ei,deactivated:ti,beforeDestroy:ni,beforeUnmount:ri,destroyed:si,unmounted:ai,render:li,renderTracked:Pi,renderTriggered:pi,errorCaptured:vi,serverPrefetch:Ri,expose:Fi,inheritAttrs:di,components:ci,directives:Mi,filters:Oi}=e;if(En&&resolveInjections(En,ke,null),He)for(const or in He){const sr=He[or];isFunction(sr)&&(ke[or]=sr.bind(Te))}if(Be){const or=Be.call(Te,Te);isObject$1(or)&&(Oe.data=reactive(or))}if(shouldCacheAccess=!0,Ue)for(const or in Ue){const sr=Ue[or],Cr=isFunction(sr)?sr.bind(Te,Te):isFunction(sr.get)?sr.get.bind(Te,Te):NOOP,pr=!isFunction(sr)&&isFunction(sr.set)?sr.set.bind(Te):NOOP,wr=computed({get:Cr,set:pr});Object.defineProperty(ke,or,{enumerable:!0,configurable:!0,get:()=>wr.value,set:Li=>wr.value=Li})}if(We)for(const or in We)createWatcher(We[or],ke,Te,or);if(Cn){const or=isFunction(Cn)?Cn.call(Te):Cn;Reflect.ownKeys(or).forEach(sr=>{provide(sr,or[sr])})}An&&callHook$1(An,Oe,"c");function Ki(or,sr){isArray$1(sr)?sr.forEach(Cr=>or(Cr.bind(Te))):sr&&or(sr.bind(Te))}if(Ki(onBeforeMount,Sn),Ki(onMounted,Tn),Ki(onBeforeUpdate,Ln),Ki(onUpdated,Bn),Ki(onActivated,ei),Ki(onDeactivated,ti),Ki(onErrorCaptured,vi),Ki(onRenderTracked,Pi),Ki(onRenderTriggered,pi),Ki(onBeforeUnmount,ri),Ki(onUnmounted,ai),Ki(onServerPrefetch,Ri),isArray$1(Fi))if(Fi.length){const or=Oe.exposed||(Oe.exposed={});Fi.forEach(sr=>{Object.defineProperty(or,sr,{get:()=>Te[sr],set:Cr=>Te[sr]=Cr})})}else Oe.exposed||(Oe.exposed={});li&&Oe.render===NOOP&&(Oe.render=li),di!=null&&(Oe.inheritAttrs=di),ci&&(Oe.components=ci),Mi&&(Oe.directives=Mi),Ri&&markAsyncBoundary(Oe)}function resolveInjections(Oe,e,Te=NOOP){isArray$1(Oe)&&(Oe=normalizeInject(Oe));for(const ke in Oe){const Be=Oe[ke];let Ue;isObject$1(Be)?"default"in Be?Ue=inject(Be.from||ke,Be.default,!0):Ue=inject(Be.from||ke):Ue=inject(Be),isRef(Ue)?Object.defineProperty(e,ke,{enumerable:!0,configurable:!0,get:()=>Ue.value,set:He=>Ue.value=He}):e[ke]=Ue}}function callHook$1(Oe,e,Te){callWithAsyncErrorHandling(isArray$1(Oe)?Oe.map(ke=>ke.bind(e.proxy)):Oe.bind(e.proxy),e,Te)}function createWatcher(Oe,e,Te,ke){let Be=ke.includes(".")?createPathGetter(Te,ke):()=>Te[ke];if(isString(Oe)){const Ue=e[Oe];isFunction(Ue)&&watch(Be,Ue)}else if(isFunction(Oe))watch(Be,Oe.bind(Te));else if(isObject$1(Oe))if(isArray$1(Oe))Oe.forEach(Ue=>createWatcher(Ue,e,Te,ke));else{const Ue=isFunction(Oe.handler)?Oe.handler.bind(Te):e[Oe.handler];isFunction(Ue)&&watch(Be,Ue,Oe)}}function resolveMergedOptions(Oe){const e=Oe.type,{mixins:Te,extends:ke}=e,{mixins:Be,optionsCache:Ue,config:{optionMergeStrategies:He}}=Oe.appContext,We=Ue.get(e);let Cn;return We?Cn=We:!Be.length&&!Te&&!ke?Cn=e:(Cn={},Be.length&&Be.forEach(En=>mergeOptions$1(Cn,En,He,!0)),mergeOptions$1(Cn,e,He)),isObject$1(e)&&Ue.set(e,Cn),Cn}function mergeOptions$1(Oe,e,Te,ke=!1){const{mixins:Be,extends:Ue}=e;Ue&&mergeOptions$1(Oe,Ue,Te,!0),Be&&Be.forEach(He=>mergeOptions$1(Oe,He,Te,!0));for(const He in e)if(!(ke&&He==="expose")){const We=internalOptionMergeStrats[He]||Te&&Te[He];Oe[He]=We?We(Oe[He],e[He]):e[He]}return Oe}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray$1,created:mergeAsArray$1,beforeMount:mergeAsArray$1,mounted:mergeAsArray$1,beforeUpdate:mergeAsArray$1,updated:mergeAsArray$1,beforeDestroy:mergeAsArray$1,beforeUnmount:mergeAsArray$1,destroyed:mergeAsArray$1,unmounted:mergeAsArray$1,activated:mergeAsArray$1,deactivated:mergeAsArray$1,errorCaptured:mergeAsArray$1,serverPrefetch:mergeAsArray$1,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(Oe,e){return e?Oe?function(){return extend$5(isFunction(Oe)?Oe.call(this,this):Oe,isFunction(e)?e.call(this,this):e)}:e:Oe}function mergeInject(Oe,e){return mergeObjectOptions(normalizeInject(Oe),normalizeInject(e))}function normalizeInject(Oe){if(isArray$1(Oe)){const e={};for(let Te=0;Te<Oe.length;Te++)e[Oe[Te]]=Oe[Te];return e}return Oe}function mergeAsArray$1(Oe,e){return Oe?[...new Set([].concat(Oe,e))]:e}function mergeObjectOptions(Oe,e){return Oe?extend$5(Object.create(null),Oe,e):e}function mergeEmitsOrPropsOptions(Oe,e){return Oe?isArray$1(Oe)&&isArray$1(e)?[...new Set([...Oe,...e])]:extend$5(Object.create(null),normalizePropsOrEmits(Oe),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(Oe,e){if(!Oe)return e;if(!e)return Oe;const Te=extend$5(Object.create(null),Oe);for(const ke in e)Te[ke]=mergeAsArray$1(Oe[ke],e[ke]);return Te}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(Oe,e){return function(ke,Be=null){isFunction(ke)||(ke=extend$5({},ke)),Be!=null&&!isObject$1(Be)&&(Be=null);const Ue=createAppContext(),He=new WeakSet,We=[];let Cn=!1;const En=Ue.app={_uid:uid$1++,_component:ke,_props:Be,_container:null,_context:Ue,_instance:null,version:version$3,get config(){return Ue.config},set config(An){},use(An,...Sn){return He.has(An)||(An&&isFunction(An.install)?(He.add(An),An.install(En,...Sn)):isFunction(An)&&(He.add(An),An(En,...Sn))),En},mixin(An){return Ue.mixins.includes(An)||Ue.mixins.push(An),En},component(An,Sn){return Sn?(Ue.components[An]=Sn,En):Ue.components[An]},directive(An,Sn){return Sn?(Ue.directives[An]=Sn,En):Ue.directives[An]},mount(An,Sn,Tn){if(!Cn){const Ln=En._ceVNode||createVNode(ke,Be);return Ln.appContext=Ue,Tn===!0?Tn="svg":Tn===!1&&(Tn=void 0),Sn&&e?e(Ln,An):Oe(Ln,An,Tn),Cn=!0,En._container=An,An.__vue_app__=En,getComponentPublicInstance(Ln.component)}},onUnmount(An){We.push(An)},unmount(){Cn&&(callWithAsyncErrorHandling(We,En._instance,16),Oe(null,En._container),delete En._container.__vue_app__)},provide(An,Sn){return Ue.provides[An]=Sn,En},runWithContext(An){const Sn=currentApp;currentApp=En;try{return An()}finally{currentApp=Sn}}};return En}}let currentApp=null;function provide(Oe,e){if(currentInstance){let Te=currentInstance.provides;const ke=currentInstance.parent&&currentInstance.parent.provides;ke===Te&&(Te=currentInstance.provides=Object.create(ke)),Te[Oe]=e}}function inject(Oe,e,Te=!1){const ke=currentInstance||currentRenderingInstance;if(ke||currentApp){const Be=currentApp?currentApp._context.provides:ke?ke.parent==null?ke.vnode.appContext&&ke.vnode.appContext.provides:ke.parent.provides:void 0;if(Be&&Oe in Be)return Be[Oe];if(arguments.length>1)return Te&&isFunction(e)?e.call(ke&&ke.proxy):e}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=Oe=>Object.getPrototypeOf(Oe)===internalObjectProto;function initProps(Oe,e,Te,ke=!1){const Be={},Ue=createInternalObject();Oe.propsDefaults=Object.create(null),setFullProps(Oe,e,Be,Ue);for(const He in Oe.propsOptions[0])He in Be||(Be[He]=void 0);Te?Oe.props=ke?Be:shallowReactive(Be):Oe.type.props?Oe.props=Be:Oe.props=Ue,Oe.attrs=Ue}function updateProps(Oe,e,Te,ke){const{props:Be,attrs:Ue,vnode:{patchFlag:He}}=Oe,We=toRaw(Be),[Cn]=Oe.propsOptions;let En=!1;if((ke||He>0)&&!(He&16)){if(He&8){const An=Oe.vnode.dynamicProps;for(let Sn=0;Sn<An.length;Sn++){let Tn=An[Sn];if(isEmitListener(Oe.emitsOptions,Tn))continue;const Ln=e[Tn];if(Cn)if(hasOwn(Ue,Tn))Ln!==Ue[Tn]&&(Ue[Tn]=Ln,En=!0);else{const Bn=camelize(Tn);Be[Bn]=resolvePropValue(Cn,We,Bn,Ln,Oe,!1)}else Ln!==Ue[Tn]&&(Ue[Tn]=Ln,En=!0)}}}else{setFullProps(Oe,e,Be,Ue)&&(En=!0);let An;for(const Sn in We)(!e||!hasOwn(e,Sn)&&((An=hyphenate(Sn))===Sn||!hasOwn(e,An)))&&(Cn?Te&&(Te[Sn]!==void 0||Te[An]!==void 0)&&(Be[Sn]=resolvePropValue(Cn,We,Sn,void 0,Oe,!0)):delete Be[Sn]);if(Ue!==We)for(const Sn in Ue)(!e||!hasOwn(e,Sn))&&(delete Ue[Sn],En=!0)}En&&trigger(Oe.attrs,"set","")}function setFullProps(Oe,e,Te,ke){const[Be,Ue]=Oe.propsOptions;let He=!1,We;if(e)for(let Cn in e){if(isReservedProp(Cn))continue;const En=e[Cn];let An;Be&&hasOwn(Be,An=camelize(Cn))?!Ue||!Ue.includes(An)?Te[An]=En:(We||(We={}))[An]=En:isEmitListener(Oe.emitsOptions,Cn)||(!(Cn in ke)||En!==ke[Cn])&&(ke[Cn]=En,He=!0)}if(Ue){const Cn=toRaw(Te),En=We||EMPTY_OBJ;for(let An=0;An<Ue.length;An++){const Sn=Ue[An];Te[Sn]=resolvePropValue(Be,Cn,Sn,En[Sn],Oe,!hasOwn(En,Sn))}}return He}function resolvePropValue(Oe,e,Te,ke,Be,Ue){const He=Oe[Te];if(He!=null){const We=hasOwn(He,"default");if(We&&ke===void 0){const Cn=He.default;if(He.type!==Function&&!He.skipFactory&&isFunction(Cn)){const{propsDefaults:En}=Be;if(Te in En)ke=En[Te];else{const An=setCurrentInstance(Be);ke=En[Te]=Cn.call(null,e),An()}}else ke=Cn;Be.ce&&Be.ce._setProp(Te,ke)}He[0]&&(Ue&&!We?ke=!1:He[1]&&(ke===""||ke===hyphenate(Te))&&(ke=!0))}return ke}const mixinPropsCache=new WeakMap;function normalizePropsOptions(Oe,e,Te=!1){const ke=Te?mixinPropsCache:e.propsCache,Be=ke.get(Oe);if(Be)return Be;const Ue=Oe.props,He={},We=[];let Cn=!1;if(!isFunction(Oe)){const An=Sn=>{Cn=!0;const[Tn,Ln]=normalizePropsOptions(Sn,e,!0);extend$5(He,Tn),Ln&&We.push(...Ln)};!Te&&e.mixins.length&&e.mixins.forEach(An),Oe.extends&&An(Oe.extends),Oe.mixins&&Oe.mixins.forEach(An)}if(!Ue&&!Cn)return isObject$1(Oe)&&ke.set(Oe,EMPTY_ARR),EMPTY_ARR;if(isArray$1(Ue))for(let An=0;An<Ue.length;An++){const Sn=camelize(Ue[An]);validatePropName(Sn)&&(He[Sn]=EMPTY_OBJ)}else if(Ue)for(const An in Ue){const Sn=camelize(An);if(validatePropName(Sn)){const Tn=Ue[An],Ln=He[Sn]=isArray$1(Tn)||isFunction(Tn)?{type:Tn}:extend$5({},Tn),Bn=Ln.type;let ei=!1,ti=!0;if(isArray$1(Bn))for(let ni=0;ni<Bn.length;++ni){const ri=Bn[ni],si=isFunction(ri)&&ri.name;if(si==="Boolean"){ei=!0;break}else si==="String"&&(ti=!1)}else ei=isFunction(Bn)&&Bn.name==="Boolean";Ln[0]=ei,Ln[1]=ti,(ei||hasOwn(Ln,"default"))&&We.push(Sn)}}const En=[He,We];return isObject$1(Oe)&&ke.set(Oe,En),En}function validatePropName(Oe){return Oe[0]!=="$"&&!isReservedProp(Oe)}const isInternalKey=Oe=>Oe[0]==="_"||Oe==="$stable",normalizeSlotValue=Oe=>isArray$1(Oe)?Oe.map(normalizeVNode):[normalizeVNode(Oe)],normalizeSlot$1=(Oe,e,Te)=>{if(e._n)return e;const ke=withCtx((...Be)=>normalizeSlotValue(e(...Be)),Te);return ke._c=!1,ke},normalizeObjectSlots=(Oe,e,Te)=>{const ke=Oe._ctx;for(const Be in Oe){if(isInternalKey(Be))continue;const Ue=Oe[Be];if(isFunction(Ue))e[Be]=normalizeSlot$1(Be,Ue,ke);else if(Ue!=null){const He=normalizeSlotValue(Ue);e[Be]=()=>He}}},normalizeVNodeSlots=(Oe,e)=>{const Te=normalizeSlotValue(e);Oe.slots.default=()=>Te},assignSlots=(Oe,e,Te)=>{for(const ke in e)(Te||ke!=="_")&&(Oe[ke]=e[ke])},initSlots=(Oe,e,Te)=>{const ke=Oe.slots=createInternalObject();if(Oe.vnode.shapeFlag&32){const Be=e._;Be?(assignSlots(ke,e,Te),Te&&def(ke,"_",Be,!0)):normalizeObjectSlots(e,ke)}else e&&normalizeVNodeSlots(Oe,e)},updateSlots=(Oe,e,Te)=>{const{vnode:ke,slots:Be}=Oe;let Ue=!0,He=EMPTY_OBJ;if(ke.shapeFlag&32){const We=e._;We?Te&&We===1?Ue=!1:assignSlots(Be,e,Te):(Ue=!e.$stable,normalizeObjectSlots(e,Be)),He=e}else e&&(normalizeVNodeSlots(Oe,e),He={default:1});if(Ue)for(const We in Be)!isInternalKey(We)&&He[We]==null&&delete Be[We]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(Oe){return baseCreateRenderer(Oe)}function createHydrationRenderer(Oe){return baseCreateRenderer(Oe,createHydrationFunctions)}function baseCreateRenderer(Oe,e){const Te=getGlobalThis();Te.__VUE__=!0;const{insert:ke,remove:Be,patchProp:Ue,createElement:He,createText:We,createComment:Cn,setText:En,setElementText:An,parentNode:Sn,nextSibling:Tn,setScopeId:Ln=NOOP,insertStaticContent:Bn}=Oe,ei=(tr,fr,ar,nr=null,Dr=null,kr=null,Ir=void 0,Mr=null,Rr=!!fr.dynamicChildren)=>{if(tr===fr)return;tr&&!isSameVNodeType(tr,fr)&&(nr=dr(tr),Li(tr,Dr,kr,!0),tr=null),fr.patchFlag===-2&&(Rr=!1,fr.dynamicChildren=null);const{type:Nr,ref:Ar,shapeFlag:Sr}=fr;switch(Nr){case Text$1:ti(tr,fr,ar,nr);break;case Comment:ni(tr,fr,ar,nr);break;case Static:tr==null&&ri(fr,ar,nr,Ir);break;case Fragment:ci(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr);break;default:Sr&1?li(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr):Sr&6?Mi(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr):(Sr&64||Sr&128)&&Nr.process(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr,vr)}Ar!=null&&Dr&&setRef(Ar,tr&&tr.ref,kr,fr||tr,!fr)},ti=(tr,fr,ar,nr)=>{if(tr==null)ke(fr.el=We(fr.children),ar,nr);else{const Dr=fr.el=tr.el;fr.children!==tr.children&&En(Dr,fr.children)}},ni=(tr,fr,ar,nr)=>{tr==null?ke(fr.el=Cn(fr.children||""),ar,nr):fr.el=tr.el},ri=(tr,fr,ar,nr)=>{[tr.el,tr.anchor]=Bn(tr.children,fr,ar,nr,tr.el,tr.anchor)},si=({el:tr,anchor:fr},ar,nr)=>{let Dr;for(;tr&&tr!==fr;)Dr=Tn(tr),ke(tr,ar,nr),tr=Dr;ke(fr,ar,nr)},ai=({el:tr,anchor:fr})=>{let ar;for(;tr&&tr!==fr;)ar=Tn(tr),Be(tr),tr=ar;Be(fr)},li=(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr)=>{fr.type==="svg"?Ir="svg":fr.type==="math"&&(Ir="mathml"),tr==null?Pi(fr,ar,nr,Dr,kr,Ir,Mr,Rr):Ri(tr,fr,Dr,kr,Ir,Mr,Rr)},Pi=(tr,fr,ar,nr,Dr,kr,Ir,Mr)=>{let Rr,Nr;const{props:Ar,shapeFlag:Sr,transition:br,dirs:Br}=tr;if(Rr=tr.el=He(tr.type,kr,Ar&&Ar.is,Ar),Sr&8?An(Rr,tr.children):Sr&16&&vi(tr.children,Rr,null,nr,Dr,resolveChildrenNamespace(tr,kr),Ir,Mr),Br&&invokeDirectiveHook(tr,null,nr,"created"),pi(Rr,tr,tr.scopeId,Ir,nr),Ar){for(const qr in Ar)qr!=="value"&&!isReservedProp(qr)&&Ue(Rr,qr,null,Ar[qr],kr,nr);"value"in Ar&&Ue(Rr,"value",null,Ar.value,kr),(Nr=Ar.onVnodeBeforeMount)&&invokeVNodeHook(Nr,nr,tr)}Br&&invokeDirectiveHook(tr,null,nr,"beforeMount");const Hr=needTransition(Dr,br);Hr&&br.beforeEnter(Rr),ke(Rr,fr,ar),((Nr=Ar&&Ar.onVnodeMounted)||Hr||Br)&&queuePostRenderEffect(()=>{Nr&&invokeVNodeHook(Nr,nr,tr),Hr&&br.enter(Rr),Br&&invokeDirectiveHook(tr,null,nr,"mounted")},Dr)},pi=(tr,fr,ar,nr,Dr)=>{if(ar&&Ln(tr,ar),nr)for(let kr=0;kr<nr.length;kr++)Ln(tr,nr[kr]);if(Dr){let kr=Dr.subTree;if(fr===kr||isSuspense(kr.type)&&(kr.ssContent===fr||kr.ssFallback===fr)){const Ir=Dr.vnode;pi(tr,Ir,Ir.scopeId,Ir.slotScopeIds,Dr.parent)}}},vi=(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr=0)=>{for(let Nr=Rr;Nr<tr.length;Nr++){const Ar=tr[Nr]=Mr?cloneIfMounted(tr[Nr]):normalizeVNode(tr[Nr]);ei(null,Ar,fr,ar,nr,Dr,kr,Ir,Mr)}},Ri=(tr,fr,ar,nr,Dr,kr,Ir)=>{const Mr=fr.el=tr.el;let{patchFlag:Rr,dynamicChildren:Nr,dirs:Ar}=fr;Rr|=tr.patchFlag&16;const Sr=tr.props||EMPTY_OBJ,br=fr.props||EMPTY_OBJ;let Br;if(ar&&toggleRecurse(ar,!1),(Br=br.onVnodeBeforeUpdate)&&invokeVNodeHook(Br,ar,fr,tr),Ar&&invokeDirectiveHook(fr,tr,ar,"beforeUpdate"),ar&&toggleRecurse(ar,!0),(Sr.innerHTML&&br.innerHTML==null||Sr.textContent&&br.textContent==null)&&An(Mr,""),Nr?Fi(tr.dynamicChildren,Nr,Mr,ar,nr,resolveChildrenNamespace(fr,Dr),kr):Ir||sr(tr,fr,Mr,null,ar,nr,resolveChildrenNamespace(fr,Dr),kr,!1),Rr>0){if(Rr&16)di(Mr,Sr,br,ar,Dr);else if(Rr&2&&Sr.class!==br.class&&Ue(Mr,"class",null,br.class,Dr),Rr&4&&Ue(Mr,"style",Sr.style,br.style,Dr),Rr&8){const Hr=fr.dynamicProps;for(let qr=0;qr<Hr.length;qr++){const Xr=Hr[qr],cs=Sr[Xr],Qr=br[Xr];(Qr!==cs||Xr==="value")&&Ue(Mr,Xr,cs,Qr,Dr,ar)}}Rr&1&&tr.children!==fr.children&&An(Mr,fr.children)}else!Ir&&Nr==null&&di(Mr,Sr,br,ar,Dr);((Br=br.onVnodeUpdated)||Ar)&&queuePostRenderEffect(()=>{Br&&invokeVNodeHook(Br,ar,fr,tr),Ar&&invokeDirectiveHook(fr,tr,ar,"updated")},nr)},Fi=(tr,fr,ar,nr,Dr,kr,Ir)=>{for(let Mr=0;Mr<fr.length;Mr++){const Rr=tr[Mr],Nr=fr[Mr],Ar=Rr.el&&(Rr.type===Fragment||!isSameVNodeType(Rr,Nr)||Rr.shapeFlag&70)?Sn(Rr.el):ar;ei(Rr,Nr,Ar,null,nr,Dr,kr,Ir,!0)}},di=(tr,fr,ar,nr,Dr)=>{if(fr!==ar){if(fr!==EMPTY_OBJ)for(const kr in fr)!isReservedProp(kr)&&!(kr in ar)&&Ue(tr,kr,fr[kr],null,Dr,nr);for(const kr in ar){if(isReservedProp(kr))continue;const Ir=ar[kr],Mr=fr[kr];Ir!==Mr&&kr!=="value"&&Ue(tr,kr,Mr,Ir,Dr,nr)}"value"in ar&&Ue(tr,"value",fr.value,ar.value,Dr)}},ci=(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr)=>{const Nr=fr.el=tr?tr.el:We(""),Ar=fr.anchor=tr?tr.anchor:We("");let{patchFlag:Sr,dynamicChildren:br,slotScopeIds:Br}=fr;Br&&(Mr=Mr?Mr.concat(Br):Br),tr==null?(ke(Nr,ar,nr),ke(Ar,ar,nr),vi(fr.children||[],ar,Ar,Dr,kr,Ir,Mr,Rr)):Sr>0&&Sr&64&&br&&tr.dynamicChildren?(Fi(tr.dynamicChildren,br,ar,Dr,kr,Ir,Mr),(fr.key!=null||Dr&&fr===Dr.subTree)&&traverseStaticChildren(tr,fr,!0)):sr(tr,fr,ar,Ar,Dr,kr,Ir,Mr,Rr)},Mi=(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr)=>{fr.slotScopeIds=Mr,tr==null?fr.shapeFlag&512?Dr.ctx.activate(fr,ar,nr,Ir,Rr):Oi(fr,ar,nr,Dr,kr,Ir,Rr):Hi(tr,fr,Rr)},Oi=(tr,fr,ar,nr,Dr,kr,Ir)=>{const Mr=tr.component=createComponentInstance(tr,nr,Dr);if(isKeepAlive(tr)&&(Mr.ctx.renderer=vr),setupComponent(Mr,!1,Ir),Mr.asyncDep){if(Dr&&Dr.registerDep(Mr,Ki,Ir),!tr.el){const Rr=Mr.subTree=createVNode(Comment);ni(null,Rr,fr,ar)}}else Ki(Mr,tr,fr,ar,Dr,kr,Ir)},Hi=(tr,fr,ar)=>{const nr=fr.component=tr.component;if(shouldUpdateComponent(tr,fr,ar))if(nr.asyncDep&&!nr.asyncResolved){or(nr,fr,ar);return}else nr.next=fr,nr.update();else fr.el=tr.el,nr.vnode=fr},Ki=(tr,fr,ar,nr,Dr,kr,Ir)=>{const Mr=()=>{if(tr.isMounted){let{next:Sr,bu:br,u:Br,parent:Hr,vnode:qr}=tr;{const vs=locateNonHydratedAsyncRoot(tr);if(vs){Sr&&(Sr.el=qr.el,or(tr,Sr,Ir)),vs.asyncDep.then(()=>{tr.isUnmounted||Mr()});return}}let Xr=Sr,cs;toggleRecurse(tr,!1),Sr?(Sr.el=qr.el,or(tr,Sr,Ir)):Sr=qr,br&&invokeArrayFns(br),(cs=Sr.props&&Sr.props.onVnodeBeforeUpdate)&&invokeVNodeHook(cs,Hr,Sr,qr),toggleRecurse(tr,!0);const Qr=renderComponentRoot(tr),bs=tr.subTree;tr.subTree=Qr,ei(bs,Qr,Sn(bs.el),dr(bs),tr,Dr,kr),Sr.el=Qr.el,Xr===null&&updateHOCHostEl(tr,Qr.el),Br&&queuePostRenderEffect(Br,Dr),(cs=Sr.props&&Sr.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(cs,Hr,Sr,qr),Dr)}else{let Sr;const{el:br,props:Br}=fr,{bm:Hr,m:qr,parent:Xr,root:cs,type:Qr}=tr,bs=isAsyncWrapper(fr);if(toggleRecurse(tr,!1),Hr&&invokeArrayFns(Hr),!bs&&(Sr=Br&&Br.onVnodeBeforeMount)&&invokeVNodeHook(Sr,Xr,fr),toggleRecurse(tr,!0),br&&zr){const vs=()=>{tr.subTree=renderComponentRoot(tr),zr(br,tr.subTree,tr,Dr,null)};bs&&Qr.__asyncHydrate?Qr.__asyncHydrate(br,tr,vs):vs()}else{cs.ce&&cs.ce._injectChildStyle(Qr);const vs=tr.subTree=renderComponentRoot(tr);ei(null,vs,ar,nr,tr,Dr,kr),fr.el=vs.el}if(qr&&queuePostRenderEffect(qr,Dr),!bs&&(Sr=Br&&Br.onVnodeMounted)){const vs=fr;queuePostRenderEffect(()=>invokeVNodeHook(Sr,Xr,vs),Dr)}(fr.shapeFlag&256||Xr&&isAsyncWrapper(Xr.vnode)&&Xr.vnode.shapeFlag&256)&&tr.a&&queuePostRenderEffect(tr.a,Dr),tr.isMounted=!0,fr=ar=nr=null}};tr.scope.on();const Rr=tr.effect=new ReactiveEffect(Mr);tr.scope.off();const Nr=tr.update=Rr.run.bind(Rr),Ar=tr.job=Rr.runIfDirty.bind(Rr);Ar.i=tr,Ar.id=tr.uid,Rr.scheduler=()=>queueJob(Ar),toggleRecurse(tr,!0),Nr()},or=(tr,fr,ar)=>{fr.component=tr;const nr=tr.vnode.props;tr.vnode=fr,tr.next=null,updateProps(tr,fr.props,nr,ar),updateSlots(tr,fr.children,ar),pauseTracking(),flushPreFlushCbs(tr),resetTracking()},sr=(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr=!1)=>{const Nr=tr&&tr.children,Ar=tr?tr.shapeFlag:0,Sr=fr.children,{patchFlag:br,shapeFlag:Br}=fr;if(br>0){if(br&128){pr(Nr,Sr,ar,nr,Dr,kr,Ir,Mr,Rr);return}else if(br&256){Cr(Nr,Sr,ar,nr,Dr,kr,Ir,Mr,Rr);return}}Br&8?(Ar&16&&_r(Nr,Dr,kr),Sr!==Nr&&An(ar,Sr)):Ar&16?Br&16?pr(Nr,Sr,ar,nr,Dr,kr,Ir,Mr,Rr):_r(Nr,Dr,kr,!0):(Ar&8&&An(ar,""),Br&16&&vi(Sr,ar,nr,Dr,kr,Ir,Mr,Rr))},Cr=(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr)=>{tr=tr||EMPTY_ARR,fr=fr||EMPTY_ARR;const Nr=tr.length,Ar=fr.length,Sr=Math.min(Nr,Ar);let br;for(br=0;br<Sr;br++){const Br=fr[br]=Rr?cloneIfMounted(fr[br]):normalizeVNode(fr[br]);ei(tr[br],Br,ar,null,Dr,kr,Ir,Mr,Rr)}Nr>Ar?_r(tr,Dr,kr,!0,!1,Sr):vi(fr,ar,nr,Dr,kr,Ir,Mr,Rr,Sr)},pr=(tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr)=>{let Nr=0;const Ar=fr.length;let Sr=tr.length-1,br=Ar-1;for(;Nr<=Sr&&Nr<=br;){const Br=tr[Nr],Hr=fr[Nr]=Rr?cloneIfMounted(fr[Nr]):normalizeVNode(fr[Nr]);if(isSameVNodeType(Br,Hr))ei(Br,Hr,ar,null,Dr,kr,Ir,Mr,Rr);else break;Nr++}for(;Nr<=Sr&&Nr<=br;){const Br=tr[Sr],Hr=fr[br]=Rr?cloneIfMounted(fr[br]):normalizeVNode(fr[br]);if(isSameVNodeType(Br,Hr))ei(Br,Hr,ar,null,Dr,kr,Ir,Mr,Rr);else break;Sr--,br--}if(Nr>Sr){if(Nr<=br){const Br=br+1,Hr=Br<Ar?fr[Br].el:nr;for(;Nr<=br;)ei(null,fr[Nr]=Rr?cloneIfMounted(fr[Nr]):normalizeVNode(fr[Nr]),ar,Hr,Dr,kr,Ir,Mr,Rr),Nr++}}else if(Nr>br)for(;Nr<=Sr;)Li(tr[Nr],Dr,kr,!0),Nr++;else{const Br=Nr,Hr=Nr,qr=new Map;for(Nr=Hr;Nr<=br;Nr++){const ps=fr[Nr]=Rr?cloneIfMounted(fr[Nr]):normalizeVNode(fr[Nr]);ps.key!=null&&qr.set(ps.key,Nr)}let Xr,cs=0;const Qr=br-Hr+1;let bs=!1,vs=0;const Ms=new Array(Qr);for(Nr=0;Nr<Qr;Nr++)Ms[Nr]=0;for(Nr=Br;Nr<=Sr;Nr++){const ps=tr[Nr];if(cs>=Qr){Li(ps,Dr,kr,!0);continue}let ws;if(ps.key!=null)ws=qr.get(ps.key);else for(Xr=Hr;Xr<=br;Xr++)if(Ms[Xr-Hr]===0&&isSameVNodeType(ps,fr[Xr])){ws=Xr;break}ws===void 0?Li(ps,Dr,kr,!0):(Ms[ws-Hr]=Nr+1,ws>=vs?vs=ws:bs=!0,ei(ps,fr[ws],ar,null,Dr,kr,Ir,Mr,Rr),cs++)}const Ls=bs?getSequence(Ms):EMPTY_ARR;for(Xr=Ls.length-1,Nr=Qr-1;Nr>=0;Nr--){const ps=Hr+Nr,ws=fr[ps],As=ps+1<Ar?fr[ps+1].el:nr;Ms[Nr]===0?ei(null,ws,ar,As,Dr,kr,Ir,Mr,Rr):bs&&(Xr<0||Nr!==Ls[Xr]?wr(ws,ar,As,2):Xr--)}}},wr=(tr,fr,ar,nr,Dr=null)=>{const{el:kr,type:Ir,transition:Mr,children:Rr,shapeFlag:Nr}=tr;if(Nr&6){wr(tr.component.subTree,fr,ar,nr);return}if(Nr&128){tr.suspense.move(fr,ar,nr);return}if(Nr&64){Ir.move(tr,fr,ar,vr);return}if(Ir===Fragment){ke(kr,fr,ar);for(let Sr=0;Sr<Rr.length;Sr++)wr(Rr[Sr],fr,ar,nr);ke(tr.anchor,fr,ar);return}if(Ir===Static){si(tr,fr,ar);return}if(nr!==2&&Nr&1&&Mr)if(nr===0)Mr.beforeEnter(kr),ke(kr,fr,ar),queuePostRenderEffect(()=>Mr.enter(kr),Dr);else{const{leave:Sr,delayLeave:br,afterLeave:Br}=Mr,Hr=()=>ke(kr,fr,ar),qr=()=>{Sr(kr,()=>{Hr(),Br&&Br()})};br?br(kr,Hr,qr):qr()}else ke(kr,fr,ar)},Li=(tr,fr,ar,nr=!1,Dr=!1)=>{const{type:kr,props:Ir,ref:Mr,children:Rr,dynamicChildren:Nr,shapeFlag:Ar,patchFlag:Sr,dirs:br,cacheIndex:Br}=tr;if(Sr===-2&&(Dr=!1),Mr!=null&&setRef(Mr,null,ar,tr,!0),Br!=null&&(fr.renderCache[Br]=void 0),Ar&256){fr.ctx.deactivate(tr);return}const Hr=Ar&1&&br,qr=!isAsyncWrapper(tr);let Xr;if(qr&&(Xr=Ir&&Ir.onVnodeBeforeUnmount)&&invokeVNodeHook(Xr,fr,tr),Ar&6)mr(tr.component,ar,nr);else{if(Ar&128){tr.suspense.unmount(ar,nr);return}Hr&&invokeDirectiveHook(tr,null,fr,"beforeUnmount"),Ar&64?tr.type.remove(tr,fr,ar,vr,nr):Nr&&!Nr.hasOnce&&(kr!==Fragment||Sr>0&&Sr&64)?_r(Nr,fr,ar,!1,!0):(kr===Fragment&&Sr&384||!Dr&&Ar&16)&&_r(Rr,fr,ar),nr&&er(tr)}(qr&&(Xr=Ir&&Ir.onVnodeUnmounted)||Hr)&&queuePostRenderEffect(()=>{Xr&&invokeVNodeHook(Xr,fr,tr),Hr&&invokeDirectiveHook(tr,null,fr,"unmounted")},ar)},er=tr=>{const{type:fr,el:ar,anchor:nr,transition:Dr}=tr;if(fr===Fragment){hr(ar,nr);return}if(fr===Static){ai(tr);return}const kr=()=>{Be(ar),Dr&&!Dr.persisted&&Dr.afterLeave&&Dr.afterLeave()};if(tr.shapeFlag&1&&Dr&&!Dr.persisted){const{leave:Ir,delayLeave:Mr}=Dr,Rr=()=>Ir(ar,kr);Mr?Mr(tr.el,kr,Rr):Rr()}else kr()},hr=(tr,fr)=>{let ar;for(;tr!==fr;)ar=Tn(tr),Be(tr),tr=ar;Be(fr)},mr=(tr,fr,ar)=>{const{bum:nr,scope:Dr,job:kr,subTree:Ir,um:Mr,m:Rr,a:Nr}=tr;invalidateMount(Rr),invalidateMount(Nr),nr&&invokeArrayFns(nr),Dr.stop(),kr&&(kr.flags|=8,Li(Ir,tr,fr,ar)),Mr&&queuePostRenderEffect(Mr,fr),queuePostRenderEffect(()=>{tr.isUnmounted=!0},fr),fr&&fr.pendingBranch&&!fr.isUnmounted&&tr.asyncDep&&!tr.asyncResolved&&tr.suspenseId===fr.pendingId&&(fr.deps--,fr.deps===0&&fr.resolve())},_r=(tr,fr,ar,nr=!1,Dr=!1,kr=0)=>{for(let Ir=kr;Ir<tr.length;Ir++)Li(tr[Ir],fr,ar,nr,Dr)},dr=tr=>{if(tr.shapeFlag&6)return dr(tr.component.subTree);if(tr.shapeFlag&128)return tr.suspense.next();const fr=Tn(tr.anchor||tr.el),ar=fr&&fr[TeleportEndKey];return ar?Tn(ar):fr};let cr=!1;const gr=(tr,fr,ar)=>{tr==null?fr._vnode&&Li(fr._vnode,null,null,!0):ei(fr._vnode||null,tr,fr,null,null,null,ar),fr._vnode=tr,cr||(cr=!0,flushPreFlushCbs(),flushPostFlushCbs(),cr=!1)},vr={p:ei,um:Li,m:wr,r:er,mt:Oi,mc:vi,pc:sr,pbc:Fi,n:dr,o:Oe};let Fr,zr;return e&&([Fr,zr]=e(vr)),{render:gr,hydrate:Fr,createApp:createAppAPI(gr,Fr)}}function resolveChildrenNamespace({type:Oe,props:e},Te){return Te==="svg"&&Oe==="foreignObject"||Te==="mathml"&&Oe==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:Te}function toggleRecurse({effect:Oe,job:e},Te){Te?(Oe.flags|=32,e.flags|=4):(Oe.flags&=-33,e.flags&=-5)}function needTransition(Oe,e){return(!Oe||Oe&&!Oe.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(Oe,e,Te=!1){const ke=Oe.children,Be=e.children;if(isArray$1(ke)&&isArray$1(Be))for(let Ue=0;Ue<ke.length;Ue++){const He=ke[Ue];let We=Be[Ue];We.shapeFlag&1&&!We.dynamicChildren&&((We.patchFlag<=0||We.patchFlag===32)&&(We=Be[Ue]=cloneIfMounted(Be[Ue]),We.el=He.el),!Te&&We.patchFlag!==-2&&traverseStaticChildren(He,We)),We.type===Text$1&&(We.el=He.el)}}function getSequence(Oe){const e=Oe.slice(),Te=[0];let ke,Be,Ue,He,We;const Cn=Oe.length;for(ke=0;ke<Cn;ke++){const En=Oe[ke];if(En!==0){if(Be=Te[Te.length-1],Oe[Be]<En){e[ke]=Be,Te.push(ke);continue}for(Ue=0,He=Te.length-1;Ue<He;)We=Ue+He>>1,Oe[Te[We]]<En?Ue=We+1:He=We;En<Oe[Te[Ue]]&&(Ue>0&&(e[ke]=Te[Ue-1]),Te[Ue]=ke)}}for(Ue=Te.length,He=Te[Ue-1];Ue-- >0;)Te[Ue]=He,He=e[He];return Te}function locateNonHydratedAsyncRoot(Oe){const e=Oe.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(Oe){if(Oe)for(let e=0;e<Oe.length;e++)Oe[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(Oe,e){return doWatch(Oe,null,e)}function watchPostEffect(Oe,e){return doWatch(Oe,null,{flush:"post"})}function watchSyncEffect(Oe,e){return doWatch(Oe,null,{flush:"sync"})}function watch(Oe,e,Te){return doWatch(Oe,e,Te)}function doWatch(Oe,e,Te=EMPTY_OBJ){const{immediate:ke,deep:Be,flush:Ue,once:He}=Te,We=extend$5({},Te),Cn=e&&ke||!e&&Ue!=="post";let En;if(isInSSRComponentSetup){if(Ue==="sync"){const Ln=useSSRContext();En=Ln.__watcherHandles||(Ln.__watcherHandles=[])}else if(!Cn){const Ln=()=>{};return Ln.stop=NOOP,Ln.resume=NOOP,Ln.pause=NOOP,Ln}}const An=currentInstance;We.call=(Ln,Bn,ei)=>callWithAsyncErrorHandling(Ln,An,Bn,ei);let Sn=!1;Ue==="post"?We.scheduler=Ln=>{queuePostRenderEffect(Ln,An&&An.suspense)}:Ue!=="sync"&&(Sn=!0,We.scheduler=(Ln,Bn)=>{Bn?Ln():queueJob(Ln)}),We.augmentJob=Ln=>{e&&(Ln.flags|=4),Sn&&(Ln.flags|=2,An&&(Ln.id=An.uid,Ln.i=An))};const Tn=watch$1(Oe,e,We);return isInSSRComponentSetup&&(En?En.push(Tn):Cn&&Tn()),Tn}function instanceWatch(Oe,e,Te){const ke=this.proxy,Be=isString(Oe)?Oe.includes(".")?createPathGetter(ke,Oe):()=>ke[Oe]:Oe.bind(ke,ke);let Ue;isFunction(e)?Ue=e:(Ue=e.handler,Te=e);const He=setCurrentInstance(this),We=doWatch(Be,Ue.bind(ke),Te);return He(),We}function createPathGetter(Oe,e){const Te=e.split(".");return()=>{let ke=Oe;for(let Be=0;Be<Te.length&&ke;Be++)ke=ke[Te[Be]];return ke}}function useModel(Oe,e,Te=EMPTY_OBJ){const ke=getCurrentInstance(),Be=camelize(e),Ue=hyphenate(e),He=getModelModifiers(Oe,Be),We=customRef((Cn,En)=>{let An,Sn=EMPTY_OBJ,Tn;return watchSyncEffect(()=>{const Ln=Oe[Be];hasChanged(An,Ln)&&(An=Ln,En())}),{get(){return Cn(),Te.get?Te.get(An):An},set(Ln){const Bn=Te.set?Te.set(Ln):Ln;if(!hasChanged(Bn,An)&&!(Sn!==EMPTY_OBJ&&hasChanged(Ln,Sn)))return;const ei=ke.vnode.props;ei&&(e in ei||Be in ei||Ue in ei)&&(`onUpdate:${e}`in ei||`onUpdate:${Be}`in ei||`onUpdate:${Ue}`in ei)||(An=Ln,En()),ke.emit(`update:${e}`,Bn),hasChanged(Ln,Bn)&&hasChanged(Ln,Sn)&&!hasChanged(Bn,Tn)&&En(),Sn=Ln,Tn=Bn}}});return We[Symbol.iterator]=()=>{let Cn=0;return{next(){return Cn<2?{value:Cn++?He||EMPTY_OBJ:We,done:!1}:{done:!0}}}},We}const getModelModifiers=(Oe,e)=>e==="modelValue"||e==="model-value"?Oe.modelModifiers:Oe[`${e}Modifiers`]||Oe[`${camelize(e)}Modifiers`]||Oe[`${hyphenate(e)}Modifiers`];function emit(Oe,e,...Te){if(Oe.isUnmounted)return;const ke=Oe.vnode.props||EMPTY_OBJ;let Be=Te;const Ue=e.startsWith("update:"),He=Ue&&getModelModifiers(ke,e.slice(7));He&&(He.trim&&(Be=Te.map(An=>isString(An)?An.trim():An)),He.number&&(Be=Te.map(looseToNumber)));let We,Cn=ke[We=toHandlerKey(e)]||ke[We=toHandlerKey(camelize(e))];!Cn&&Ue&&(Cn=ke[We=toHandlerKey(hyphenate(e))]),Cn&&callWithAsyncErrorHandling(Cn,Oe,6,Be);const En=ke[We+"Once"];if(En){if(!Oe.emitted)Oe.emitted={};else if(Oe.emitted[We])return;Oe.emitted[We]=!0,callWithAsyncErrorHandling(En,Oe,6,Be)}}function normalizeEmitsOptions(Oe,e,Te=!1){const ke=e.emitsCache,Be=ke.get(Oe);if(Be!==void 0)return Be;const Ue=Oe.emits;let He={},We=!1;if(!isFunction(Oe)){const Cn=En=>{const An=normalizeEmitsOptions(En,e,!0);An&&(We=!0,extend$5(He,An))};!Te&&e.mixins.length&&e.mixins.forEach(Cn),Oe.extends&&Cn(Oe.extends),Oe.mixins&&Oe.mixins.forEach(Cn)}return!Ue&&!We?(isObject$1(Oe)&&ke.set(Oe,null),null):(isArray$1(Ue)?Ue.forEach(Cn=>He[Cn]=null):extend$5(He,Ue),isObject$1(Oe)&&ke.set(Oe,He),He)}function isEmitListener(Oe,e){return!Oe||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(Oe,e[0].toLowerCase()+e.slice(1))||hasOwn(Oe,hyphenate(e))||hasOwn(Oe,e))}function markAttrsAccessed(){}function renderComponentRoot(Oe){const{type:e,vnode:Te,proxy:ke,withProxy:Be,propsOptions:[Ue],slots:He,attrs:We,emit:Cn,render:En,renderCache:An,props:Sn,data:Tn,setupState:Ln,ctx:Bn,inheritAttrs:ei}=Oe,ti=setCurrentRenderingInstance(Oe);let ni,ri;try{if(Te.shapeFlag&4){const ai=Be||ke,li=ai;ni=normalizeVNode(En.call(li,ai,An,Sn,Ln,Tn,Bn)),ri=We}else{const ai=e;ni=normalizeVNode(ai.length>1?ai(Sn,{attrs:We,slots:He,emit:Cn}):ai(Sn,null)),ri=e.props?We:getFunctionalFallthrough(We)}}catch(ai){blockStack.length=0,handleError(ai,Oe,1),ni=createVNode(Comment)}let si=ni;if(ri&&ei!==!1){const ai=Object.keys(ri),{shapeFlag:li}=si;ai.length&&li&7&&(Ue&&ai.some(isModelListener)&&(ri=filterModelListeners(ri,Ue)),si=cloneVNode(si,ri,!1,!0))}return Te.dirs&&(si=cloneVNode(si,null,!1,!0),si.dirs=si.dirs?si.dirs.concat(Te.dirs):Te.dirs),Te.transition&&setTransitionHooks(si,Te.transition),ni=si,setCurrentRenderingInstance(ti),ni}function filterSingleRoot(Oe,e=!0){let Te;for(let ke=0;ke<Oe.length;ke++){const Be=Oe[ke];if(isVNode(Be)){if(Be.type!==Comment||Be.children==="v-if"){if(Te)return;Te=Be}}else return}return Te}const getFunctionalFallthrough=Oe=>{let e;for(const Te in Oe)(Te==="class"||Te==="style"||isOn(Te))&&((e||(e={}))[Te]=Oe[Te]);return e},filterModelListeners=(Oe,e)=>{const Te={};for(const ke in Oe)(!isModelListener(ke)||!(ke.slice(9)in e))&&(Te[ke]=Oe[ke]);return Te};function shouldUpdateComponent(Oe,e,Te){const{props:ke,children:Be,component:Ue}=Oe,{props:He,children:We,patchFlag:Cn}=e,En=Ue.emitsOptions;if(e.dirs||e.transition)return!0;if(Te&&Cn>=0){if(Cn&1024)return!0;if(Cn&16)return ke?hasPropsChanged(ke,He,En):!!He;if(Cn&8){const An=e.dynamicProps;for(let Sn=0;Sn<An.length;Sn++){const Tn=An[Sn];if(He[Tn]!==ke[Tn]&&!isEmitListener(En,Tn))return!0}}}else return(Be||We)&&(!We||!We.$stable)?!0:ke===He?!1:ke?He?hasPropsChanged(ke,He,En):!0:!!He;return!1}function hasPropsChanged(Oe,e,Te){const ke=Object.keys(e);if(ke.length!==Object.keys(Oe).length)return!0;for(let Be=0;Be<ke.length;Be++){const Ue=ke[Be];if(e[Ue]!==Oe[Ue]&&!isEmitListener(Te,Ue))return!0}return!1}function updateHOCHostEl({vnode:Oe,parent:e},Te){for(;e;){const ke=e.subTree;if(ke.suspense&&ke.suspense.activeBranch===Oe&&(ke.el=Oe.el),ke===Oe)(Oe=e.vnode).el=Te,e=e.parent;else break}}const isSuspense=Oe=>Oe.__isSuspense;let suspenseId=0;const SuspenseImpl={name:"Suspense",__isSuspense:!0,process(Oe,e,Te,ke,Be,Ue,He,We,Cn,En){if(Oe==null)mountSuspense(e,Te,ke,Be,Ue,He,We,Cn,En);else{if(Ue&&Ue.deps>0&&!Oe.suspense.isInFallback){e.suspense=Oe.suspense,e.suspense.vnode=e,e.el=Oe.el;return}patchSuspense(Oe,e,Te,ke,Be,He,We,Cn,En)}},hydrate:hydrateSuspense,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(Oe,e){const Te=Oe.props&&Oe.props[e];isFunction(Te)&&Te()}function mountSuspense(Oe,e,Te,ke,Be,Ue,He,We,Cn){const{p:En,o:{createElement:An}}=Cn,Sn=An("div"),Tn=Oe.suspense=createSuspenseBoundary(Oe,Be,ke,e,Sn,Te,Ue,He,We,Cn);En(null,Tn.pendingBranch=Oe.ssContent,Sn,null,ke,Tn,Ue,He),Tn.deps>0?(triggerEvent(Oe,"onPending"),triggerEvent(Oe,"onFallback"),En(null,Oe.ssFallback,e,Te,ke,null,Ue,He),setActiveBranch(Tn,Oe.ssFallback)):Tn.resolve(!1,!0)}function patchSuspense(Oe,e,Te,ke,Be,Ue,He,We,{p:Cn,um:En,o:{createElement:An}}){const Sn=e.suspense=Oe.suspense;Sn.vnode=e,e.el=Oe.el;const Tn=e.ssContent,Ln=e.ssFallback,{activeBranch:Bn,pendingBranch:ei,isInFallback:ti,isHydrating:ni}=Sn;if(ei)Sn.pendingBranch=Tn,isSameVNodeType(Tn,ei)?(Cn(ei,Tn,Sn.hiddenContainer,null,Be,Sn,Ue,He,We),Sn.deps<=0?Sn.resolve():ti&&(ni||(Cn(Bn,Ln,Te,ke,Be,null,Ue,He,We),setActiveBranch(Sn,Ln)))):(Sn.pendingId=suspenseId++,ni?(Sn.isHydrating=!1,Sn.activeBranch=ei):En(ei,Be,Sn),Sn.deps=0,Sn.effects.length=0,Sn.hiddenContainer=An("div"),ti?(Cn(null,Tn,Sn.hiddenContainer,null,Be,Sn,Ue,He,We),Sn.deps<=0?Sn.resolve():(Cn(Bn,Ln,Te,ke,Be,null,Ue,He,We),setActiveBranch(Sn,Ln))):Bn&&isSameVNodeType(Tn,Bn)?(Cn(Bn,Tn,Te,ke,Be,Sn,Ue,He,We),Sn.resolve(!0)):(Cn(null,Tn,Sn.hiddenContainer,null,Be,Sn,Ue,He,We),Sn.deps<=0&&Sn.resolve()));else if(Bn&&isSameVNodeType(Tn,Bn))Cn(Bn,Tn,Te,ke,Be,Sn,Ue,He,We),setActiveBranch(Sn,Tn);else if(triggerEvent(e,"onPending"),Sn.pendingBranch=Tn,Tn.shapeFlag&512?Sn.pendingId=Tn.component.suspenseId:Sn.pendingId=suspenseId++,Cn(null,Tn,Sn.hiddenContainer,null,Be,Sn,Ue,He,We),Sn.deps<=0)Sn.resolve();else{const{timeout:ri,pendingId:si}=Sn;ri>0?setTimeout(()=>{Sn.pendingId===si&&Sn.fallback(Ln)},ri):ri===0&&Sn.fallback(Ln)}}function createSuspenseBoundary(Oe,e,Te,ke,Be,Ue,He,We,Cn,En,An=!1){const{p:Sn,m:Tn,um:Ln,n:Bn,o:{parentNode:ei,remove:ti}}=En;let ni;const ri=isVNodeSuspensible(Oe);ri&&e&&e.pendingBranch&&(ni=e.pendingId,e.deps++);const si=Oe.props?toNumber(Oe.props.timeout):void 0,ai=Ue,li={vnode:Oe,parent:e,parentComponent:Te,namespace:He,container:ke,hiddenContainer:Be,deps:0,pendingId:suspenseId++,timeout:typeof si=="number"?si:-1,activeBranch:null,pendingBranch:null,isInFallback:!An,isHydrating:An,isUnmounted:!1,effects:[],resolve(Pi=!1,pi=!1){const{vnode:vi,activeBranch:Ri,pendingBranch:Fi,pendingId:di,effects:ci,parentComponent:Mi,container:Oi}=li;let Hi=!1;li.isHydrating?li.isHydrating=!1:Pi||(Hi=Ri&&Fi.transition&&Fi.transition.mode==="out-in",Hi&&(Ri.transition.afterLeave=()=>{di===li.pendingId&&(Tn(Fi,Oi,Ue===ai?Bn(Ri):Ue,0),queuePostFlushCb(ci))}),Ri&&(ei(Ri.el)===Oi&&(Ue=Bn(Ri)),Ln(Ri,Mi,li,!0)),Hi||Tn(Fi,Oi,Ue,0)),setActiveBranch(li,Fi),li.pendingBranch=null,li.isInFallback=!1;let Ki=li.parent,or=!1;for(;Ki;){if(Ki.pendingBranch){Ki.effects.push(...ci),or=!0;break}Ki=Ki.parent}!or&&!Hi&&queuePostFlushCb(ci),li.effects=[],ri&&e&&e.pendingBranch&&ni===e.pendingId&&(e.deps--,e.deps===0&&!pi&&e.resolve()),triggerEvent(vi,"onResolve")},fallback(Pi){if(!li.pendingBranch)return;const{vnode:pi,activeBranch:vi,parentComponent:Ri,container:Fi,namespace:di}=li;triggerEvent(pi,"onFallback");const ci=Bn(vi),Mi=()=>{li.isInFallback&&(Sn(null,Pi,Fi,ci,Ri,null,di,We,Cn),setActiveBranch(li,Pi))},Oi=Pi.transition&&Pi.transition.mode==="out-in";Oi&&(vi.transition.afterLeave=Mi),li.isInFallback=!0,Ln(vi,Ri,null,!0),Oi||Mi()},move(Pi,pi,vi){li.activeBranch&&Tn(li.activeBranch,Pi,pi,vi),li.container=Pi},next(){return li.activeBranch&&Bn(li.activeBranch)},registerDep(Pi,pi,vi){const Ri=!!li.pendingBranch;Ri&&li.deps++;const Fi=Pi.vnode.el;Pi.asyncDep.catch(di=>{handleError(di,Pi,0)}).then(di=>{if(Pi.isUnmounted||li.isUnmounted||li.pendingId!==Pi.suspenseId)return;Pi.asyncResolved=!0;const{vnode:ci}=Pi;handleSetupResult(Pi,di,!1),Fi&&(ci.el=Fi);const Mi=!Fi&&Pi.subTree.el;pi(Pi,ci,ei(Fi||Pi.subTree.el),Fi?null:Bn(Pi.subTree),li,He,vi),Mi&&ti(Mi),updateHOCHostEl(Pi,ci.el),Ri&&--li.deps===0&&li.resolve()})},unmount(Pi,pi){li.isUnmounted=!0,li.activeBranch&&Ln(li.activeBranch,Te,Pi,pi),li.pendingBranch&&Ln(li.pendingBranch,Te,Pi,pi)}};return li}function hydrateSuspense(Oe,e,Te,ke,Be,Ue,He,We,Cn){const En=e.suspense=createSuspenseBoundary(e,ke,Te,Oe.parentNode,document.createElement("div"),null,Be,Ue,He,We,!0),An=Cn(Oe,En.pendingBranch=e.ssContent,Te,En,Ue,He);return En.deps===0&&En.resolve(!1,!0),An}function normalizeSuspenseChildren(Oe){const{shapeFlag:e,children:Te}=Oe,ke=e&32;Oe.ssContent=normalizeSuspenseSlot(ke?Te.default:Te),Oe.ssFallback=ke?normalizeSuspenseSlot(Te.fallback):createVNode(Comment)}function normalizeSuspenseSlot(Oe){let e;if(isFunction(Oe)){const Te=isBlockTreeEnabled&&Oe._c;Te&&(Oe._d=!1,openBlock()),Oe=Oe(),Te&&(Oe._d=!0,e=currentBlock,closeBlock())}return isArray$1(Oe)&&(Oe=filterSingleRoot(Oe)),Oe=normalizeVNode(Oe),e&&!Oe.dynamicChildren&&(Oe.dynamicChildren=e.filter(Te=>Te!==Oe)),Oe}function queueEffectWithSuspense(Oe,e){e&&e.pendingBranch?isArray$1(Oe)?e.effects.push(...Oe):e.effects.push(Oe):queuePostFlushCb(Oe)}function setActiveBranch(Oe,e){Oe.activeBranch=e;const{vnode:Te,parentComponent:ke}=Oe;let Be=e.el;for(;!Be&&e.component;)e=e.component.subTree,Be=e.el;Te.el=Be,ke&&ke.subTree===Te&&(ke.vnode.el=Be,updateHOCHostEl(ke,Be))}function isVNodeSuspensible(Oe){const e=Oe.props&&Oe.props.suspensible;return e!=null&&e!==!1}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(Oe=!1){blockStack.push(currentBlock=Oe?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(Oe,e=!1){isBlockTreeEnabled+=Oe,Oe<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(Oe){return Oe.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(Oe),Oe}function createElementBlock(Oe,e,Te,ke,Be,Ue){return setupBlock(createBaseVNode(Oe,e,Te,ke,Be,Ue,!0))}function createBlock(Oe,e,Te,ke,Be){return setupBlock(createVNode(Oe,e,Te,ke,Be,!0))}function isVNode(Oe){return Oe?Oe.__v_isVNode===!0:!1}function isSameVNodeType(Oe,e){return Oe.type===e.type&&Oe.key===e.key}function transformVNodeArgs(Oe){}const normalizeKey=({key:Oe})=>Oe??null,normalizeRef=({ref:Oe,ref_key:e,ref_for:Te})=>(typeof Oe=="number"&&(Oe=""+Oe),Oe!=null?isString(Oe)||isRef(Oe)||isFunction(Oe)?{i:currentRenderingInstance,r:Oe,k:e,f:!!Te}:Oe:null);function createBaseVNode(Oe,e=null,Te=null,ke=0,Be=null,Ue=Oe===Fragment?0:1,He=!1,We=!1){const Cn={__v_isVNode:!0,__v_skip:!0,type:Oe,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:Te,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:Ue,patchFlag:ke,dynamicProps:Be,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return We?(normalizeChildren(Cn,Te),Ue&128&&Oe.normalize(Cn)):Te&&(Cn.shapeFlag|=isString(Te)?8:16),isBlockTreeEnabled>0&&!He&&currentBlock&&(Cn.patchFlag>0||Ue&6)&&Cn.patchFlag!==32&&currentBlock.push(Cn),Cn}const createVNode=_createVNode;function _createVNode(Oe,e=null,Te=null,ke=0,Be=null,Ue=!1){if((!Oe||Oe===NULL_DYNAMIC_COMPONENT)&&(Oe=Comment),isVNode(Oe)){const We=cloneVNode(Oe,e,!0);return Te&&normalizeChildren(We,Te),isBlockTreeEnabled>0&&!Ue&&currentBlock&&(We.shapeFlag&6?currentBlock[currentBlock.indexOf(Oe)]=We:currentBlock.push(We)),We.patchFlag=-2,We}if(isClassComponent(Oe)&&(Oe=Oe.__vccOpts),e){e=guardReactiveProps(e);let{class:We,style:Cn}=e;We&&!isString(We)&&(e.class=normalizeClass(We)),isObject$1(Cn)&&(isProxy(Cn)&&!isArray$1(Cn)&&(Cn=extend$5({},Cn)),e.style=normalizeStyle(Cn))}const He=isString(Oe)?1:isSuspense(Oe)?128:isTeleport(Oe)?64:isObject$1(Oe)?4:isFunction(Oe)?2:0;return createBaseVNode(Oe,e,Te,ke,Be,He,Ue,!0)}function guardReactiveProps(Oe){return Oe?isProxy(Oe)||isInternalObject(Oe)?extend$5({},Oe):Oe:null}function cloneVNode(Oe,e,Te=!1,ke=!1){const{props:Be,ref:Ue,patchFlag:He,children:We,transition:Cn}=Oe,En=e?mergeProps(Be||{},e):Be,An={__v_isVNode:!0,__v_skip:!0,type:Oe.type,props:En,key:En&&normalizeKey(En),ref:e&&e.ref?Te&&Ue?isArray$1(Ue)?Ue.concat(normalizeRef(e)):[Ue,normalizeRef(e)]:normalizeRef(e):Ue,scopeId:Oe.scopeId,slotScopeIds:Oe.slotScopeIds,children:We,target:Oe.target,targetStart:Oe.targetStart,targetAnchor:Oe.targetAnchor,staticCount:Oe.staticCount,shapeFlag:Oe.shapeFlag,patchFlag:e&&Oe.type!==Fragment?He===-1?16:He|16:He,dynamicProps:Oe.dynamicProps,dynamicChildren:Oe.dynamicChildren,appContext:Oe.appContext,dirs:Oe.dirs,transition:Cn,component:Oe.component,suspense:Oe.suspense,ssContent:Oe.ssContent&&cloneVNode(Oe.ssContent),ssFallback:Oe.ssFallback&&cloneVNode(Oe.ssFallback),el:Oe.el,anchor:Oe.anchor,ctx:Oe.ctx,ce:Oe.ce};return Cn&&ke&&setTransitionHooks(An,Cn.clone(An)),An}function createTextVNode(Oe=" ",e=0){return createVNode(Text$1,null,Oe,e)}function createStaticVNode(Oe,e){const Te=createVNode(Static,null,Oe);return Te.staticCount=e,Te}function createCommentVNode(Oe="",e=!1){return e?(openBlock(),createBlock(Comment,null,Oe)):createVNode(Comment,null,Oe)}function normalizeVNode(Oe){return Oe==null||typeof Oe=="boolean"?createVNode(Comment):isArray$1(Oe)?createVNode(Fragment,null,Oe.slice()):isVNode(Oe)?cloneIfMounted(Oe):createVNode(Text$1,null,String(Oe))}function cloneIfMounted(Oe){return Oe.el===null&&Oe.patchFlag!==-1||Oe.memo?Oe:cloneVNode(Oe)}function normalizeChildren(Oe,e){let Te=0;const{shapeFlag:ke}=Oe;if(e==null)e=null;else if(isArray$1(e))Te=16;else if(typeof e=="object")if(ke&65){const Be=e.default;Be&&(Be._c&&(Be._d=!1),normalizeChildren(Oe,Be()),Be._c&&(Be._d=!0));return}else{Te=32;const Be=e._;!Be&&!isInternalObject(e)?e._ctx=currentRenderingInstance:Be===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,Oe.patchFlag|=1024))}else isFunction(e)?(e={default:e,_ctx:currentRenderingInstance},Te=32):(e=String(e),ke&64?(Te=16,e=[createTextVNode(e)]):Te=8);Oe.children=e,Oe.shapeFlag|=Te}function mergeProps(...Oe){const e={};for(let Te=0;Te<Oe.length;Te++){const ke=Oe[Te];for(const Be in ke)if(Be==="class")e.class!==ke.class&&(e.class=normalizeClass([e.class,ke.class]));else if(Be==="style")e.style=normalizeStyle([e.style,ke.style]);else if(isOn(Be)){const Ue=e[Be],He=ke[Be];He&&Ue!==He&&!(isArray$1(Ue)&&Ue.includes(He))&&(e[Be]=Ue?[].concat(Ue,He):He)}else Be!==""&&(e[Be]=ke[Be])}return e}function invokeVNodeHook(Oe,e,Te,ke=null){callWithAsyncErrorHandling(Oe,e,7,[Te,ke])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(Oe,e,Te){const ke=Oe.type,Be=(e?e.appContext:Oe.appContext)||emptyAppContext,Ue={uid:uid++,vnode:Oe,type:ke,parent:e,appContext:Be,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(Be.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(ke,Be),emitsOptions:normalizeEmitsOptions(ke,Be),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:ke.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:Te,suspenseId:Te?Te.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Ue.ctx={_:Ue},Ue.root=e?e.root:Ue,Ue.emit=emit.bind(null,Ue),Oe.ce&&Oe.ce(Ue),Ue}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const Oe=getGlobalThis(),e=(Te,ke)=>{let Be;return(Be=Oe[Te])||(Be=Oe[Te]=[]),Be.push(ke),Ue=>{Be.length>1?Be.forEach(He=>He(Ue)):Be[0](Ue)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",Te=>currentInstance=Te),setInSSRSetupState=e("__VUE_SSR_SETTERS__",Te=>isInSSRComponentSetup=Te)}const setCurrentInstance=Oe=>{const e=currentInstance;return internalSetCurrentInstance(Oe),Oe.scope.on(),()=>{Oe.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(Oe){return Oe.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(Oe,e=!1,Te=!1){e&&setInSSRSetupState(e);const{props:ke,children:Be}=Oe.vnode,Ue=isStatefulComponent(Oe);initProps(Oe,ke,Ue,e),initSlots(Oe,Be,Te);const He=Ue?setupStatefulComponent(Oe,e):void 0;return e&&setInSSRSetupState(!1),He}function setupStatefulComponent(Oe,e){const Te=Oe.type;Oe.accessCache=Object.create(null),Oe.proxy=new Proxy(Oe.ctx,PublicInstanceProxyHandlers);const{setup:ke}=Te;if(ke){pauseTracking();const Be=Oe.setupContext=ke.length>1?createSetupContext(Oe):null,Ue=setCurrentInstance(Oe),He=callWithErrorHandling(ke,Oe,0,[Oe.props,Be]),We=isPromise(He);if(resetTracking(),Ue(),(We||Oe.sp)&&!isAsyncWrapper(Oe)&&markAsyncBoundary(Oe),We){if(He.then(unsetCurrentInstance,unsetCurrentInstance),e)return He.then(Cn=>{handleSetupResult(Oe,Cn,e)}).catch(Cn=>{handleError(Cn,Oe,0)});Oe.asyncDep=He}else handleSetupResult(Oe,He,e)}else finishComponentSetup(Oe,e)}function handleSetupResult(Oe,e,Te){isFunction(e)?Oe.type.__ssrInlineRender?Oe.ssrRender=e:Oe.render=e:isObject$1(e)&&(Oe.setupState=proxyRefs(e)),finishComponentSetup(Oe,Te)}let compile$1,installWithProxy;function registerRuntimeCompiler(Oe){compile$1=Oe,installWithProxy=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(Oe,e,Te){const ke=Oe.type;if(!Oe.render){if(!e&&compile$1&&!ke.render){const Be=ke.template||resolveMergedOptions(Oe).template;if(Be){const{isCustomElement:Ue,compilerOptions:He}=Oe.appContext.config,{delimiters:We,compilerOptions:Cn}=ke,En=extend$5(extend$5({isCustomElement:Ue,delimiters:We},He),Cn);ke.render=compile$1(Be,En)}}Oe.render=ke.render||NOOP,installWithProxy&&installWithProxy(Oe)}{const Be=setCurrentInstance(Oe);pauseTracking();try{applyOptions(Oe)}finally{resetTracking(),Be()}}}const attrsProxyHandlers={get(Oe,e){return track(Oe,"get",""),Oe[e]}};function createSetupContext(Oe){const e=Te=>{Oe.exposed=Te||{}};return{attrs:new Proxy(Oe.attrs,attrsProxyHandlers),slots:Oe.slots,emit:Oe.emit,expose:e}}function getComponentPublicInstance(Oe){return Oe.exposed?Oe.exposeProxy||(Oe.exposeProxy=new Proxy(proxyRefs(markRaw(Oe.exposed)),{get(e,Te){if(Te in e)return e[Te];if(Te in publicPropertiesMap)return publicPropertiesMap[Te](Oe)},has(e,Te){return Te in e||Te in publicPropertiesMap}})):Oe.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=Oe=>Oe.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(Oe,e=!0){return isFunction(Oe)?Oe.displayName||Oe.name:Oe.name||e&&Oe.__name}function formatComponentName(Oe,e,Te=!1){let ke=getComponentName(e);if(!ke&&e.__file){const Be=e.__file.match(/([^/\\]+)\.\w+$/);Be&&(ke=Be[1])}if(!ke&&Oe&&Oe.parent){const Be=Ue=>{for(const He in Ue)if(Ue[He]===e)return He};ke=Be(Oe.components||Oe.parent.type.components)||Be(Oe.appContext.components)}return ke?classify(ke):Te?"App":"Anonymous"}function isClassComponent(Oe){return isFunction(Oe)&&"__vccOpts"in Oe}const computed=(Oe,e)=>computed$1(Oe,e,isInSSRComponentSetup);function h$1(Oe,e,Te){const ke=arguments.length;return ke===2?isObject$1(e)&&!isArray$1(e)?isVNode(e)?createVNode(Oe,null,[e]):createVNode(Oe,e):createVNode(Oe,null,e):(ke>3?Te=Array.prototype.slice.call(arguments,2):ke===3&&isVNode(Te)&&(Te=[Te]),createVNode(Oe,e,Te))}function initCustomFormatter(){}function withMemo(Oe,e,Te,ke){const Be=Te[ke];if(Be&&isMemoSame(Be,Oe))return Be;const Ue=e();return Ue.memo=Oe.slice(),Ue.cacheIndex=ke,Te[ke]=Ue}function isMemoSame(Oe,e){const Te=Oe.memo;if(Te.length!=e.length)return!1;for(let ke=0;ke<Te.length;ke++)if(hasChanged(Te[ke],e[ke]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(Oe),!0}const version$3="3.5.13",warn$2=NOOP,ErrorTypeStrings=ErrorTypeStrings$1,devtools=devtools$1,setDevtoolsHook=setDevtoolsHook$1,_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode,getComponentPublicInstance,ensureValidVNode,pushWarningContext,popWarningContext},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,DeprecationTypes=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$1=typeof window<"u"&&window.trustedTypes;if(tt$1)try{policy=tt$1.createPolicy("vue",{createHTML:Oe=>Oe})}catch{}const unsafeToTrustedHTML=policy?Oe=>policy.createHTML(Oe):Oe=>Oe,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(Oe,e,Te)=>{e.insertBefore(Oe,Te||null)},remove:Oe=>{const e=Oe.parentNode;e&&e.removeChild(Oe)},createElement:(Oe,e,Te,ke)=>{const Be=e==="svg"?doc.createElementNS(svgNS,Oe):e==="mathml"?doc.createElementNS(mathmlNS,Oe):Te?doc.createElement(Oe,{is:Te}):doc.createElement(Oe);return Oe==="select"&&ke&&ke.multiple!=null&&Be.setAttribute("multiple",ke.multiple),Be},createText:Oe=>doc.createTextNode(Oe),createComment:Oe=>doc.createComment(Oe),setText:(Oe,e)=>{Oe.nodeValue=e},setElementText:(Oe,e)=>{Oe.textContent=e},parentNode:Oe=>Oe.parentNode,nextSibling:Oe=>Oe.nextSibling,querySelector:Oe=>doc.querySelector(Oe),setScopeId(Oe,e){Oe.setAttribute(e,"")},insertStaticContent(Oe,e,Te,ke,Be,Ue){const He=Te?Te.previousSibling:e.lastChild;if(Be&&(Be===Ue||Be.nextSibling))for(;e.insertBefore(Be.cloneNode(!0),Te),!(Be===Ue||!(Be=Be.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(ke==="svg"?`<svg>${Oe}</svg>`:ke==="mathml"?`<math>${Oe}</math>`:Oe);const We=templateContainer.content;if(ke==="svg"||ke==="mathml"){const Cn=We.firstChild;for(;Cn.firstChild;)We.appendChild(Cn.firstChild);We.removeChild(Cn)}e.insertBefore(We,Te)}return[He?He.nextSibling:e.firstChild,Te?Te.previousSibling:e.lastChild]}},TRANSITION$1="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$5({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=Oe=>(Oe.displayName="Transition",Oe.props=TransitionPropsValidators,Oe),Transition=decorate$1((Oe,{slots:e})=>h$1(BaseTransition,resolveTransitionProps(Oe),e)),callHook=(Oe,e=[])=>{isArray$1(Oe)?Oe.forEach(Te=>Te(...e)):Oe&&Oe(...e)},hasExplicitCallback=Oe=>Oe?isArray$1(Oe)?Oe.some(e=>e.length>1):Oe.length>1:!1;function resolveTransitionProps(Oe){const e={};for(const ci in Oe)ci in DOMTransitionPropsValidators||(e[ci]=Oe[ci]);if(Oe.css===!1)return e;const{name:Te="v",type:ke,duration:Be,enterFromClass:Ue=`${Te}-enter-from`,enterActiveClass:He=`${Te}-enter-active`,enterToClass:We=`${Te}-enter-to`,appearFromClass:Cn=Ue,appearActiveClass:En=He,appearToClass:An=We,leaveFromClass:Sn=`${Te}-leave-from`,leaveActiveClass:Tn=`${Te}-leave-active`,leaveToClass:Ln=`${Te}-leave-to`}=Oe,Bn=normalizeDuration(Be),ei=Bn&&Bn[0],ti=Bn&&Bn[1],{onBeforeEnter:ni,onEnter:ri,onEnterCancelled:si,onLeave:ai,onLeaveCancelled:li,onBeforeAppear:Pi=ni,onAppear:pi=ri,onAppearCancelled:vi=si}=e,Ri=(ci,Mi,Oi,Hi)=>{ci._enterCancelled=Hi,removeTransitionClass(ci,Mi?An:We),removeTransitionClass(ci,Mi?En:He),Oi&&Oi()},Fi=(ci,Mi)=>{ci._isLeaving=!1,removeTransitionClass(ci,Sn),removeTransitionClass(ci,Ln),removeTransitionClass(ci,Tn),Mi&&Mi()},di=ci=>(Mi,Oi)=>{const Hi=ci?pi:ri,Ki=()=>Ri(Mi,ci,Oi);callHook(Hi,[Mi,Ki]),nextFrame(()=>{removeTransitionClass(Mi,ci?Cn:Ue),addTransitionClass(Mi,ci?An:We),hasExplicitCallback(Hi)||whenTransitionEnds(Mi,ke,ei,Ki)})};return extend$5(e,{onBeforeEnter(ci){callHook(ni,[ci]),addTransitionClass(ci,Ue),addTransitionClass(ci,He)},onBeforeAppear(ci){callHook(Pi,[ci]),addTransitionClass(ci,Cn),addTransitionClass(ci,En)},onEnter:di(!1),onAppear:di(!0),onLeave(ci,Mi){ci._isLeaving=!0;const Oi=()=>Fi(ci,Mi);addTransitionClass(ci,Sn),ci._enterCancelled?(addTransitionClass(ci,Tn),forceReflow()):(forceReflow(),addTransitionClass(ci,Tn)),nextFrame(()=>{ci._isLeaving&&(removeTransitionClass(ci,Sn),addTransitionClass(ci,Ln),hasExplicitCallback(ai)||whenTransitionEnds(ci,ke,ti,Oi))}),callHook(ai,[ci,Oi])},onEnterCancelled(ci){Ri(ci,!1,void 0,!0),callHook(si,[ci])},onAppearCancelled(ci){Ri(ci,!0,void 0,!0),callHook(vi,[ci])},onLeaveCancelled(ci){Fi(ci),callHook(li,[ci])}})}function normalizeDuration(Oe){if(Oe==null)return null;if(isObject$1(Oe))return[NumberOf(Oe.enter),NumberOf(Oe.leave)];{const e=NumberOf(Oe);return[e,e]}}function NumberOf(Oe){return toNumber(Oe)}function addTransitionClass(Oe,e){e.split(/\s+/).forEach(Te=>Te&&Oe.classList.add(Te)),(Oe[vtcKey]||(Oe[vtcKey]=new Set)).add(e)}function removeTransitionClass(Oe,e){e.split(/\s+/).forEach(ke=>ke&&Oe.classList.remove(ke));const Te=Oe[vtcKey];Te&&(Te.delete(e),Te.size||(Oe[vtcKey]=void 0))}function nextFrame(Oe){requestAnimationFrame(()=>{requestAnimationFrame(Oe)})}let endId=0;function whenTransitionEnds(Oe,e,Te,ke){const Be=Oe._endId=++endId,Ue=()=>{Be===Oe._endId&&ke()};if(Te!=null)return setTimeout(Ue,Te);const{type:He,timeout:We,propCount:Cn}=getTransitionInfo(Oe,e);if(!He)return ke();const En=He+"end";let An=0;const Sn=()=>{Oe.removeEventListener(En,Tn),Ue()},Tn=Ln=>{Ln.target===Oe&&++An>=Cn&&Sn()};setTimeout(()=>{An<Cn&&Sn()},We+1),Oe.addEventListener(En,Tn)}function getTransitionInfo(Oe,e){const Te=window.getComputedStyle(Oe),ke=Bn=>(Te[Bn]||"").split(", "),Be=ke(`${TRANSITION$1}Delay`),Ue=ke(`${TRANSITION$1}Duration`),He=getTimeout(Be,Ue),We=ke(`${ANIMATION}Delay`),Cn=ke(`${ANIMATION}Duration`),En=getTimeout(We,Cn);let An=null,Sn=0,Tn=0;e===TRANSITION$1?He>0&&(An=TRANSITION$1,Sn=He,Tn=Ue.length):e===ANIMATION?En>0&&(An=ANIMATION,Sn=En,Tn=Cn.length):(Sn=Math.max(He,En),An=Sn>0?He>En?TRANSITION$1:ANIMATION:null,Tn=An?An===TRANSITION$1?Ue.length:Cn.length:0);const Ln=An===TRANSITION$1&&/\b(transform|all)(,|$)/.test(ke(`${TRANSITION$1}Property`).toString());return{type:An,timeout:Sn,propCount:Tn,hasTransform:Ln}}function getTimeout(Oe,e){for(;Oe.length<e.length;)Oe=Oe.concat(Oe);return Math.max(...e.map((Te,ke)=>toMs(Te)+toMs(Oe[ke])))}function toMs(Oe){return Oe==="auto"?0:Number(Oe.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(Oe,e,Te){const ke=Oe[vtcKey];ke&&(e=(e?[e,...ke]:[...ke]).join(" ")),e==null?Oe.removeAttribute("class"):Te?Oe.setAttribute("class",e):Oe.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(Oe,{value:e},{transition:Te}){Oe[vShowOriginalDisplay]=Oe.style.display==="none"?"":Oe.style.display,Te&&e?Te.beforeEnter(Oe):setDisplay(Oe,e)},mounted(Oe,{value:e},{transition:Te}){Te&&e&&Te.enter(Oe)},updated(Oe,{value:e,oldValue:Te},{transition:ke}){!e!=!Te&&(ke?e?(ke.beforeEnter(Oe),setDisplay(Oe,!0),ke.enter(Oe)):ke.leave(Oe,()=>{setDisplay(Oe,!1)}):setDisplay(Oe,e))},beforeUnmount(Oe,{value:e}){setDisplay(Oe,e)}};function setDisplay(Oe,e){Oe.style.display=e?Oe[vShowOriginalDisplay]:"none",Oe[vShowHidden]=!e}function initVShowForSSR(){vShow.getSSRProps=({value:Oe})=>{if(!Oe)return{style:{display:"none"}}}}const CSS_VAR_TEXT=Symbol("");function useCssVars(Oe){const e=getCurrentInstance();if(!e)return;const Te=e.ut=(Be=Oe(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(Ue=>setVarsOnNode(Ue,Be))},ke=()=>{const Be=Oe(e.proxy);e.ce?setVarsOnNode(e.ce,Be):setVarsOnVNode(e.subTree,Be),Te(Be)};onBeforeUpdate(()=>{queuePostFlushCb(ke)}),onMounted(()=>{watch(ke,NOOP,{flush:"post"});const Be=new MutationObserver(ke);Be.observe(e.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>Be.disconnect())})}function setVarsOnVNode(Oe,e){if(Oe.shapeFlag&128){const Te=Oe.suspense;Oe=Te.activeBranch,Te.pendingBranch&&!Te.isHydrating&&Te.effects.push(()=>{setVarsOnVNode(Te.activeBranch,e)})}for(;Oe.component;)Oe=Oe.component.subTree;if(Oe.shapeFlag&1&&Oe.el)setVarsOnNode(Oe.el,e);else if(Oe.type===Fragment)Oe.children.forEach(Te=>setVarsOnVNode(Te,e));else if(Oe.type===Static){let{el:Te,anchor:ke}=Oe;for(;Te&&(setVarsOnNode(Te,e),Te!==ke);)Te=Te.nextSibling}}function setVarsOnNode(Oe,e){if(Oe.nodeType===1){const Te=Oe.style;let ke="";for(const Be in e)Te.setProperty(`--${Be}`,e[Be]),ke+=`--${Be}: ${e[Be]};`;Te[CSS_VAR_TEXT]=ke}}const displayRE=/(^|;)\s*display\s*:/;function patchStyle(Oe,e,Te){const ke=Oe.style,Be=isString(Te);let Ue=!1;if(Te&&!Be){if(e)if(isString(e))for(const He of e.split(";")){const We=He.slice(0,He.indexOf(":")).trim();Te[We]==null&&setStyle(ke,We,"")}else for(const He in e)Te[He]==null&&setStyle(ke,He,"");for(const He in Te)He==="display"&&(Ue=!0),setStyle(ke,He,Te[He])}else if(Be){if(e!==Te){const He=ke[CSS_VAR_TEXT];He&&(Te+=";"+He),ke.cssText=Te,Ue=displayRE.test(Te)}}else e&&Oe.removeAttribute("style");vShowOriginalDisplay in Oe&&(Oe[vShowOriginalDisplay]=Ue?ke.display:"",Oe[vShowHidden]&&(ke.display="none"))}const importantRE=/\s*!important$/;function setStyle(Oe,e,Te){if(isArray$1(Te))Te.forEach(ke=>setStyle(Oe,e,ke));else if(Te==null&&(Te=""),e.startsWith("--"))Oe.setProperty(e,Te);else{const ke=autoPrefix(Oe,e);importantRE.test(Te)?Oe.setProperty(hyphenate(ke),Te.replace(importantRE,""),"important"):Oe[ke]=Te}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(Oe,e){const Te=prefixCache[e];if(Te)return Te;let ke=camelize(e);if(ke!=="filter"&&ke in Oe)return prefixCache[e]=ke;ke=capitalize(ke);for(let Be=0;Be<prefixes.length;Be++){const Ue=prefixes[Be]+ke;if(Ue in Oe)return prefixCache[e]=Ue}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(Oe,e,Te,ke,Be,Ue=isSpecialBooleanAttr(e)){ke&&e.startsWith("xlink:")?Te==null?Oe.removeAttributeNS(xlinkNS,e.slice(6,e.length)):Oe.setAttributeNS(xlinkNS,e,Te):Te==null||Ue&&!includeBooleanAttr(Te)?Oe.removeAttribute(e):Oe.setAttribute(e,Ue?"":isSymbol(Te)?String(Te):Te)}function patchDOMProp(Oe,e,Te,ke,Be){if(e==="innerHTML"||e==="textContent"){Te!=null&&(Oe[e]=e==="innerHTML"?unsafeToTrustedHTML(Te):Te);return}const Ue=Oe.tagName;if(e==="value"&&Ue!=="PROGRESS"&&!Ue.includes("-")){const We=Ue==="OPTION"?Oe.getAttribute("value")||"":Oe.value,Cn=Te==null?Oe.type==="checkbox"?"on":"":String(Te);(We!==Cn||!("_value"in Oe))&&(Oe.value=Cn),Te==null&&Oe.removeAttribute(e),Oe._value=Te;return}let He=!1;if(Te===""||Te==null){const We=typeof Oe[e];We==="boolean"?Te=includeBooleanAttr(Te):Te==null&&We==="string"?(Te="",He=!0):We==="number"&&(Te=0,He=!0)}try{Oe[e]=Te}catch{}He&&Oe.removeAttribute(Be||e)}function addEventListener(Oe,e,Te,ke){Oe.addEventListener(e,Te,ke)}function removeEventListener(Oe,e,Te,ke){Oe.removeEventListener(e,Te,ke)}const veiKey=Symbol("_vei");function patchEvent(Oe,e,Te,ke,Be=null){const Ue=Oe[veiKey]||(Oe[veiKey]={}),He=Ue[e];if(ke&&He)He.value=ke;else{const[We,Cn]=parseName(e);if(ke){const En=Ue[e]=createInvoker(ke,Be);addEventListener(Oe,We,En,Cn)}else He&&(removeEventListener(Oe,We,He,Cn),Ue[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(Oe){let e;if(optionsModifierRE.test(Oe)){e={};let ke;for(;ke=Oe.match(optionsModifierRE);)Oe=Oe.slice(0,Oe.length-ke[0].length),e[ke[0].toLowerCase()]=!0}return[Oe[2]===":"?Oe.slice(3):hyphenate(Oe.slice(2)),e]}let cachedNow=0;const p$2=Promise.resolve(),getNow=()=>cachedNow||(p$2.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(Oe,e){const Te=ke=>{if(!ke._vts)ke._vts=Date.now();else if(ke._vts<=Te.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(ke,Te.value),e,5,[ke])};return Te.value=Oe,Te.attached=getNow(),Te}function patchStopImmediatePropagation(Oe,e){if(isArray$1(e)){const Te=Oe.stopImmediatePropagation;return Oe.stopImmediatePropagation=()=>{Te.call(Oe),Oe._stopped=!0},e.map(ke=>Be=>!Be._stopped&&ke&&ke(Be))}else return e}const isNativeOn=Oe=>Oe.charCodeAt(0)===111&&Oe.charCodeAt(1)===110&&Oe.charCodeAt(2)>96&&Oe.charCodeAt(2)<123,patchProp=(Oe,e,Te,ke,Be,Ue)=>{const He=Be==="svg";e==="class"?patchClass(Oe,ke,He):e==="style"?patchStyle(Oe,Te,ke):isOn(e)?isModelListener(e)||patchEvent(Oe,e,Te,ke,Ue):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(Oe,e,ke,He))?(patchDOMProp(Oe,e,ke),!Oe.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(Oe,e,ke,He,Ue,e!=="value")):Oe._isVueCE&&(/[A-Z]/.test(e)||!isString(ke))?patchDOMProp(Oe,camelize(e),ke,Ue,e):(e==="true-value"?Oe._trueValue=ke:e==="false-value"&&(Oe._falseValue=ke),patchAttr(Oe,e,ke,He))};function shouldSetAsProp(Oe,e,Te,ke){if(ke)return!!(e==="innerHTML"||e==="textContent"||e in Oe&&isNativeOn(e)&&isFunction(Te));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&Oe.tagName==="INPUT"||e==="type"&&Oe.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const Be=Oe.tagName;if(Be==="IMG"||Be==="VIDEO"||Be==="CANVAS"||Be==="SOURCE")return!1}return isNativeOn(e)&&isString(Te)?!1:e in Oe}const REMOVAL={};/*! #__NO_SIDE_EFFECTS__ */function defineCustomElement(Oe,e,Te){const ke=defineComponent(Oe,e);isPlainObject$2(ke)&&extend$5(ke,e);class Be extends VueElement{constructor(He){super(ke,He,Te)}}return Be.def=ke,Be}/*! #__NO_SIDE_EFFECTS__ */const defineSSRCustomElement=(Oe,e)=>defineCustomElement(Oe,e,createSSRApp),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(e,Te={},ke=createApp){super(),this._def=e,this._props=Te,this._createApp=ke,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&ke!==createApp?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof VueElement){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let ke=0;ke<this.attributes.length;ke++)this._setAttr(this.attributes[ke].name);this._ob=new MutationObserver(ke=>{for(const Be of ke)this._setAttr(Be.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(ke,Be=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:Ue,styles:He}=ke;let We;if(Ue&&!isArray$1(Ue))for(const Cn in Ue){const En=Ue[Cn];(En===Number||En&&En.type===Number)&&(Cn in this._props&&(this._props[Cn]=toNumber(this._props[Cn])),(We||(We=Object.create(null)))[camelize(Cn)]=!0)}this._numberProps=We,Be&&this._resolveProps(ke),this.shadowRoot&&this._applyStyles(He),this._mount(ke)},Te=this._def.__asyncLoader;Te?this._pendingResolve=Te().then(ke=>e(this._def=ke,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const Te=this._instance&&this._instance.exposed;if(Te)for(const ke in Te)hasOwn(this,ke)||Object.defineProperty(this,ke,{get:()=>unref(Te[ke])})}_resolveProps(e){const{props:Te}=e,ke=isArray$1(Te)?Te:Object.keys(Te||{});for(const Be of Object.keys(this))Be[0]!=="_"&&ke.includes(Be)&&this._setProp(Be,this[Be]);for(const Be of ke.map(camelize))Object.defineProperty(this,Be,{get(){return this._getProp(Be)},set(Ue){this._setProp(Be,Ue,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const Te=this.hasAttribute(e);let ke=Te?this.getAttribute(e):REMOVAL;const Be=camelize(e);Te&&this._numberProps&&this._numberProps[Be]&&(ke=toNumber(ke)),this._setProp(Be,ke,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,Te,ke=!0,Be=!1){if(Te!==this._props[e]&&(Te===REMOVAL?delete this._props[e]:(this._props[e]=Te,e==="key"&&this._app&&(this._app._ceVNode.key=Te)),Be&&this._instance&&this._update(),ke)){const Ue=this._ob;Ue&&Ue.disconnect(),Te===!0?this.setAttribute(hyphenate(e),""):typeof Te=="string"||typeof Te=="number"?this.setAttribute(hyphenate(e),Te+""):Te||this.removeAttribute(hyphenate(e)),Ue&&Ue.observe(this,{attributes:!0})}}_update(){render$2(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const Te=createVNode(this._def,extend$5(e,this._props));return this._instance||(Te.ce=ke=>{this._instance=ke,ke.ce=this,ke.isCE=!0;const Be=(Ue,He)=>{this.dispatchEvent(new CustomEvent(Ue,isPlainObject$2(He[0])?extend$5({detail:He},He[0]):{detail:He}))};ke.emit=(Ue,...He)=>{Be(Ue,He),hyphenate(Ue)!==Ue&&Be(hyphenate(Ue),He)},this._setParent()}),Te}_applyStyles(e,Te){if(!e)return;if(Te){if(Te===this._def||this._styleChildren.has(Te))return;this._styleChildren.add(Te)}const ke=this._nonce;for(let Be=e.length-1;Be>=0;Be--){const Ue=document.createElement("style");ke&&Ue.setAttribute("nonce",ke),Ue.textContent=e[Be],this.shadowRoot.prepend(Ue)}}_parseSlots(){const e=this._slots={};let Te;for(;Te=this.firstChild;){const ke=Te.nodeType===1&&Te.getAttribute("slot")||"default";(e[ke]||(e[ke]=[])).push(Te),this.removeChild(Te)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),Te=this._instance.type.__scopeId;for(let ke=0;ke<e.length;ke++){const Be=e[ke],Ue=Be.getAttribute("name")||"default",He=this._slots[Ue],We=Be.parentNode;if(He)for(const Cn of He){if(Te&&Cn.nodeType===1){const En=Te+"-s",An=document.createTreeWalker(Cn,1);Cn.setAttribute(En,"");let Sn;for(;Sn=An.nextNode();)Sn.setAttribute(En,"")}We.insertBefore(Cn,Be)}else for(;Be.firstChild;)We.insertBefore(Be.firstChild,Be);We.removeChild(Be)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function useHost(Oe){const e=getCurrentInstance(),Te=e&&e.ce;return Te||null}function useShadowRoot(){const Oe=useHost();return Oe&&Oe.shadowRoot}function useCssModule(Oe="$style"){{const e=getCurrentInstance();if(!e)return EMPTY_OBJ;const Te=e.type.__cssModules;if(!Te)return EMPTY_OBJ;const ke=Te[Oe];return ke||EMPTY_OBJ}}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=Oe=>(delete Oe.props.mode,Oe),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend$5({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(Oe,{slots:e}){const Te=getCurrentInstance(),ke=useTransitionState();let Be,Ue;return onUpdated(()=>{if(!Be.length)return;const He=Oe.moveClass||`${Oe.name||"v"}-move`;if(!hasCSSTransform(Be[0].el,Te.vnode.el,He))return;Be.forEach(callPendingCbs),Be.forEach(recordPosition);const We=Be.filter(applyTranslation);forceReflow(),We.forEach(Cn=>{const En=Cn.el,An=En.style;addTransitionClass(En,He),An.transform=An.webkitTransform=An.transitionDuration="";const Sn=En[moveCbKey]=Tn=>{Tn&&Tn.target!==En||(!Tn||/transform$/.test(Tn.propertyName))&&(En.removeEventListener("transitionend",Sn),En[moveCbKey]=null,removeTransitionClass(En,He))};En.addEventListener("transitionend",Sn)})}),()=>{const He=toRaw(Oe),We=resolveTransitionProps(He);let Cn=He.tag||Fragment;if(Be=[],Ue)for(let En=0;En<Ue.length;En++){const An=Ue[En];An.el&&An.el instanceof Element&&(Be.push(An),setTransitionHooks(An,resolveTransitionHooks(An,We,ke,Te)),positionMap.set(An,An.el.getBoundingClientRect()))}Ue=e.default?getTransitionRawChildren(e.default()):[];for(let En=0;En<Ue.length;En++){const An=Ue[En];An.key!=null&&setTransitionHooks(An,resolveTransitionHooks(An,We,ke,Te))}return createVNode(Cn,null,Ue)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(Oe){const e=Oe.el;e[moveCbKey]&&e[moveCbKey](),e[enterCbKey]&&e[enterCbKey]()}function recordPosition(Oe){newPositionMap.set(Oe,Oe.el.getBoundingClientRect())}function applyTranslation(Oe){const e=positionMap.get(Oe),Te=newPositionMap.get(Oe),ke=e.left-Te.left,Be=e.top-Te.top;if(ke||Be){const Ue=Oe.el.style;return Ue.transform=Ue.webkitTransform=`translate(${ke}px,${Be}px)`,Ue.transitionDuration="0s",Oe}}function hasCSSTransform(Oe,e,Te){const ke=Oe.cloneNode(),Be=Oe[vtcKey];Be&&Be.forEach(We=>{We.split(/\s+/).forEach(Cn=>Cn&&ke.classList.remove(Cn))}),Te.split(/\s+/).forEach(We=>We&&ke.classList.add(We)),ke.style.display="none";const Ue=e.nodeType===1?e:e.parentNode;Ue.appendChild(ke);const{hasTransform:He}=getTransitionInfo(ke);return Ue.removeChild(ke),He}const getModelAssigner=Oe=>{const e=Oe.props["onUpdate:modelValue"]||!1;return isArray$1(e)?Te=>invokeArrayFns(e,Te):e};function onCompositionStart(Oe){Oe.target.composing=!0}function onCompositionEnd(Oe){const e=Oe.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(Oe,{modifiers:{lazy:e,trim:Te,number:ke}},Be){Oe[assignKey]=getModelAssigner(Be);const Ue=ke||Be.props&&Be.props.type==="number";addEventListener(Oe,e?"change":"input",He=>{if(He.target.composing)return;let We=Oe.value;Te&&(We=We.trim()),Ue&&(We=looseToNumber(We)),Oe[assignKey](We)}),Te&&addEventListener(Oe,"change",()=>{Oe.value=Oe.value.trim()}),e||(addEventListener(Oe,"compositionstart",onCompositionStart),addEventListener(Oe,"compositionend",onCompositionEnd),addEventListener(Oe,"change",onCompositionEnd))},mounted(Oe,{value:e}){Oe.value=e??""},beforeUpdate(Oe,{value:e,oldValue:Te,modifiers:{lazy:ke,trim:Be,number:Ue}},He){if(Oe[assignKey]=getModelAssigner(He),Oe.composing)return;const We=(Ue||Oe.type==="number")&&!/^0\d/.test(Oe.value)?looseToNumber(Oe.value):Oe.value,Cn=e??"";We!==Cn&&(document.activeElement===Oe&&Oe.type!=="range"&&(ke&&e===Te||Be&&Oe.value.trim()===Cn)||(Oe.value=Cn))}},vModelCheckbox={deep:!0,created(Oe,e,Te){Oe[assignKey]=getModelAssigner(Te),addEventListener(Oe,"change",()=>{const ke=Oe._modelValue,Be=getValue$1(Oe),Ue=Oe.checked,He=Oe[assignKey];if(isArray$1(ke)){const We=looseIndexOf(ke,Be),Cn=We!==-1;if(Ue&&!Cn)He(ke.concat(Be));else if(!Ue&&Cn){const En=[...ke];En.splice(We,1),He(En)}}else if(isSet(ke)){const We=new Set(ke);Ue?We.add(Be):We.delete(Be),He(We)}else He(getCheckboxValue(Oe,Ue))})},mounted:setChecked,beforeUpdate(Oe,e,Te){Oe[assignKey]=getModelAssigner(Te),setChecked(Oe,e,Te)}};function setChecked(Oe,{value:e,oldValue:Te},ke){Oe._modelValue=e;let Be;if(isArray$1(e))Be=looseIndexOf(e,ke.props.value)>-1;else if(isSet(e))Be=e.has(ke.props.value);else{if(e===Te)return;Be=looseEqual(e,getCheckboxValue(Oe,!0))}Oe.checked!==Be&&(Oe.checked=Be)}const vModelRadio={created(Oe,{value:e},Te){Oe.checked=looseEqual(e,Te.props.value),Oe[assignKey]=getModelAssigner(Te),addEventListener(Oe,"change",()=>{Oe[assignKey](getValue$1(Oe))})},beforeUpdate(Oe,{value:e,oldValue:Te},ke){Oe[assignKey]=getModelAssigner(ke),e!==Te&&(Oe.checked=looseEqual(e,ke.props.value))}},vModelSelect={deep:!0,created(Oe,{value:e,modifiers:{number:Te}},ke){const Be=isSet(e);addEventListener(Oe,"change",()=>{const Ue=Array.prototype.filter.call(Oe.options,He=>He.selected).map(He=>Te?looseToNumber(getValue$1(He)):getValue$1(He));Oe[assignKey](Oe.multiple?Be?new Set(Ue):Ue:Ue[0]),Oe._assigning=!0,nextTick(()=>{Oe._assigning=!1})}),Oe[assignKey]=getModelAssigner(ke)},mounted(Oe,{value:e}){setSelected(Oe,e)},beforeUpdate(Oe,e,Te){Oe[assignKey]=getModelAssigner(Te)},updated(Oe,{value:e}){Oe._assigning||setSelected(Oe,e)}};function setSelected(Oe,e){const Te=Oe.multiple,ke=isArray$1(e);if(!(Te&&!ke&&!isSet(e))){for(let Be=0,Ue=Oe.options.length;Be<Ue;Be++){const He=Oe.options[Be],We=getValue$1(He);if(Te)if(ke){const Cn=typeof We;Cn==="string"||Cn==="number"?He.selected=e.some(En=>String(En)===String(We)):He.selected=looseIndexOf(e,We)>-1}else He.selected=e.has(We);else if(looseEqual(getValue$1(He),e)){Oe.selectedIndex!==Be&&(Oe.selectedIndex=Be);return}}!Te&&Oe.selectedIndex!==-1&&(Oe.selectedIndex=-1)}}function getValue$1(Oe){return"_value"in Oe?Oe._value:Oe.value}function getCheckboxValue(Oe,e){const Te=e?"_trueValue":"_falseValue";return Te in Oe?Oe[Te]:e}const vModelDynamic={created(Oe,e,Te){callModelHook(Oe,e,Te,null,"created")},mounted(Oe,e,Te){callModelHook(Oe,e,Te,null,"mounted")},beforeUpdate(Oe,e,Te,ke){callModelHook(Oe,e,Te,ke,"beforeUpdate")},updated(Oe,e,Te,ke){callModelHook(Oe,e,Te,ke,"updated")}};function resolveDynamicModel(Oe,e){switch(Oe){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(e){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(Oe,e,Te,ke,Be){const He=resolveDynamicModel(Oe.tagName,Te.props&&Te.props.type)[Be];He&&He(Oe,e,Te,ke)}function initVModelForSSR(){vModelText.getSSRProps=({value:Oe})=>({value:Oe}),vModelRadio.getSSRProps=({value:Oe},e)=>{if(e.props&&looseEqual(e.props.value,Oe))return{checked:!0}},vModelCheckbox.getSSRProps=({value:Oe},e)=>{if(isArray$1(Oe)){if(e.props&&looseIndexOf(Oe,e.props.value)>-1)return{checked:!0}}else if(isSet(Oe)){if(e.props&&Oe.has(e.props.value))return{checked:!0}}else if(Oe)return{checked:!0}},vModelDynamic.getSSRProps=(Oe,e)=>{if(typeof e.type!="string")return;const Te=resolveDynamicModel(e.type.toUpperCase(),e.props&&e.props.type);if(Te.getSSRProps)return Te.getSSRProps(Oe,e)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:Oe=>Oe.stopPropagation(),prevent:Oe=>Oe.preventDefault(),self:Oe=>Oe.target!==Oe.currentTarget,ctrl:Oe=>!Oe.ctrlKey,shift:Oe=>!Oe.shiftKey,alt:Oe=>!Oe.altKey,meta:Oe=>!Oe.metaKey,left:Oe=>"button"in Oe&&Oe.button!==0,middle:Oe=>"button"in Oe&&Oe.button!==1,right:Oe=>"button"in Oe&&Oe.button!==2,exact:(Oe,e)=>systemModifiers.some(Te=>Oe[`${Te}Key`]&&!e.includes(Te))},withModifiers=(Oe,e)=>{const Te=Oe._withMods||(Oe._withMods={}),ke=e.join(".");return Te[ke]||(Te[ke]=(Be,...Ue)=>{for(let He=0;He<e.length;He++){const We=modifierGuards[e[He]];if(We&&We(Be,e))return}return Oe(Be,...Ue)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(Oe,e)=>{const Te=Oe._withKeys||(Oe._withKeys={}),ke=e.join(".");return Te[ke]||(Te[ke]=Be=>{if(!("key"in Be))return;const Ue=hyphenate(Be.key);if(e.some(He=>He===Ue||keyNames[He]===Ue))return Oe(Be)})},rendererOptions=extend$5({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$2=(...Oe)=>{ensureRenderer().render(...Oe)},hydrate=(...Oe)=>{ensureHydrationRenderer().hydrate(...Oe)},createApp=(...Oe)=>{const e=ensureRenderer().createApp(...Oe),{mount:Te}=e;return e.mount=ke=>{const Be=normalizeContainer(ke);if(!Be)return;const Ue=e._component;!isFunction(Ue)&&!Ue.render&&!Ue.template&&(Ue.template=Be.innerHTML),Be.nodeType===1&&(Be.textContent="");const He=Te(Be,!1,resolveRootNamespace(Be));return Be instanceof Element&&(Be.removeAttribute("v-cloak"),Be.setAttribute("data-v-app","")),He},e},createSSRApp=(...Oe)=>{const e=ensureHydrationRenderer().createApp(...Oe),{mount:Te}=e;return e.mount=ke=>{const Be=normalizeContainer(ke);if(Be)return Te(Be,!0,resolveRootNamespace(Be))},e};function resolveRootNamespace(Oe){if(Oe instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&Oe instanceof MathMLElement)return"mathml"}function normalizeContainer(Oe){return isString(Oe)?document.querySelector(Oe):Oe}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())},runtimeDom_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,BaseTransitionPropsValidators,Comment,DeprecationTypes,EffectScope,ErrorCodes:ErrorCodes$1,ErrorTypeStrings,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text:Text$1,TrackOpTypes,Transition,TransitionGroup,TriggerOpTypes,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,devtools,effect,effectScope,getCurrentInstance,getCurrentScope,getCurrentWatcher,getTransitionRawChildren,guardReactiveProps,h:h$1,handleError,hasInjectionContext,hydrate,hydrateOnIdle,hydrateOnInteraction,hydrateOnMediaQuery,hydrateOnVisible,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,onWatcherCleanup,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render:render$2,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef:toRef$1,toRefs,toValue,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useHost,useId,useModel,useSSRContext,useShadowRoot,useSlots,useTemplateRef,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$3,warn:warn$2,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=Oe=>activePinia=Oe,piniaSymbol=Symbol();function isPlainObject$1(Oe){return Oe&&typeof Oe=="object"&&Object.prototype.toString.call(Oe)==="[object Object]"&&typeof Oe.toJSON!="function"}var MutationType;(function(Oe){Oe.direct="direct",Oe.patchObject="patch object",Oe.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const Oe=effectScope(!0),e=Oe.run(()=>ref({}));let Te=[],ke=[];const Be=markRaw({install(Ue){setActivePinia(Be),Be._a=Ue,Ue.provide(piniaSymbol,Be),Ue.config.globalProperties.$pinia=Be,ke.forEach(He=>Te.push(He)),ke=[]},use(Ue){return this._a?Te.push(Ue):ke.push(Ue),this},_p:Te,_a:null,_e:Oe,_s:new Map,state:e});return Be}const noop$2=()=>{};function addSubscription(Oe,e,Te,ke=noop$2){Oe.push(e);const Be=()=>{const Ue=Oe.indexOf(e);Ue>-1&&(Oe.splice(Ue,1),ke())};return!Te&&getCurrentScope()&&onScopeDispose(Be),Be}function triggerSubscriptions(Oe,...e){Oe.slice().forEach(Te=>{Te(...e)})}const fallbackRunWithContext=Oe=>Oe(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(Oe,e){Oe instanceof Map&&e instanceof Map?e.forEach((Te,ke)=>Oe.set(ke,Te)):Oe instanceof Set&&e instanceof Set&&e.forEach(Oe.add,Oe);for(const Te in e){if(!e.hasOwnProperty(Te))continue;const ke=e[Te],Be=Oe[Te];isPlainObject$1(Be)&&isPlainObject$1(ke)&&Oe.hasOwnProperty(Te)&&!isRef(ke)&&!isReactive(ke)?Oe[Te]=mergeReactiveObjects(Be,ke):Oe[Te]=ke}return Oe}const skipHydrateSymbol=Symbol();function shouldHydrate(Oe){return!isPlainObject$1(Oe)||!Oe.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(Oe){return!!(isRef(Oe)&&Oe.effect)}function createOptionsStore(Oe,e,Te,ke){const{state:Be,actions:Ue,getters:He}=e,We=Te.state.value[Oe];let Cn;function En(){We||(Te.state.value[Oe]=Be?Be():{});const An=toRefs(Te.state.value[Oe]);return assign$1(An,Ue,Object.keys(He||{}).reduce((Sn,Tn)=>(Sn[Tn]=markRaw(computed(()=>{setActivePinia(Te);const Ln=Te._s.get(Oe);return He[Tn].call(Ln,Ln)})),Sn),{}))}return Cn=createSetupStore(Oe,En,e,Te,ke,!0),Cn}function createSetupStore(Oe,e,Te={},ke,Be,Ue){let He;const We=assign$1({actions:{}},Te),Cn={deep:!0};let En,An,Sn=[],Tn=[],Ln;const Bn=ke.state.value[Oe];!Ue&&!Bn&&(ke.state.value[Oe]={}),ref({});let ei;function ti(vi){let Ri;En=An=!1,typeof vi=="function"?(vi(ke.state.value[Oe]),Ri={type:MutationType.patchFunction,storeId:Oe,events:Ln}):(mergeReactiveObjects(ke.state.value[Oe],vi),Ri={type:MutationType.patchObject,payload:vi,storeId:Oe,events:Ln});const Fi=ei=Symbol();nextTick().then(()=>{ei===Fi&&(En=!0)}),An=!0,triggerSubscriptions(Sn,Ri,ke.state.value[Oe])}const ni=Ue?function(){const{state:Ri}=Te,Fi=Ri?Ri():{};this.$patch(di=>{assign$1(di,Fi)})}:noop$2;function ri(){He.stop(),Sn=[],Tn=[],ke._s.delete(Oe)}const si=(vi,Ri="")=>{if(ACTION_MARKER in vi)return vi[ACTION_NAME]=Ri,vi;const Fi=function(){setActivePinia(ke);const di=Array.from(arguments),ci=[],Mi=[];function Oi(or){ci.push(or)}function Hi(or){Mi.push(or)}triggerSubscriptions(Tn,{args:di,name:Fi[ACTION_NAME],store:li,after:Oi,onError:Hi});let Ki;try{Ki=vi.apply(this&&this.$id===Oe?this:li,di)}catch(or){throw triggerSubscriptions(Mi,or),or}return Ki instanceof Promise?Ki.then(or=>(triggerSubscriptions(ci,or),or)).catch(or=>(triggerSubscriptions(Mi,or),Promise.reject(or))):(triggerSubscriptions(ci,Ki),Ki)};return Fi[ACTION_MARKER]=!0,Fi[ACTION_NAME]=Ri,Fi},ai={_p:ke,$id:Oe,$onAction:addSubscription.bind(null,Tn),$patch:ti,$reset:ni,$subscribe(vi,Ri={}){const Fi=addSubscription(Sn,vi,Ri.detached,()=>di()),di=He.run(()=>watch(()=>ke.state.value[Oe],ci=>{(Ri.flush==="sync"?An:En)&&vi({storeId:Oe,type:MutationType.direct,events:Ln},ci)},assign$1({},Cn,Ri)));return Fi},$dispose:ri},li=reactive(ai);ke._s.set(Oe,li);const pi=(ke._a&&ke._a.runWithContext||fallbackRunWithContext)(()=>ke._e.run(()=>(He=effectScope()).run(()=>e({action:si}))));for(const vi in pi){const Ri=pi[vi];if(isRef(Ri)&&!isComputed(Ri)||isReactive(Ri))Ue||(Bn&&shouldHydrate(Ri)&&(isRef(Ri)?Ri.value=Bn[vi]:mergeReactiveObjects(Ri,Bn[vi])),ke.state.value[Oe][vi]=Ri);else if(typeof Ri=="function"){const Fi=si(Ri,vi);pi[vi]=Fi,We.actions[vi]=Ri}}return assign$1(li,pi),assign$1(toRaw(li),pi),Object.defineProperty(li,"$state",{get:()=>ke.state.value[Oe],set:vi=>{ti(Ri=>{assign$1(Ri,vi)})}}),ke._p.forEach(vi=>{assign$1(li,He.run(()=>vi({store:li,app:ke._a,pinia:ke,options:We})))}),Bn&&Ue&&Te.hydrate&&Te.hydrate(li.$state,Bn),En=!0,An=!0,li}/*! #__NO_SIDE_EFFECTS__ */function defineStore(Oe,e,Te){let ke,Be;const Ue=typeof e=="function";typeof Oe=="string"?(ke=Oe,Be=Ue?Te:e):(Be=Oe,ke=Oe.id);function He(We,Cn){const En=hasInjectionContext();return We=We||(En?inject(piniaSymbol,null):null),We&&setActivePinia(We),We=activePinia,We._s.has(ke)||(Ue?createSetupStore(ke,e,Be,We):createOptionsStore(ke,Be,We)),We._s.get(ke)}return He.$id=ke,He}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(Oe){return Oe&&Oe.__esModule&&Object.prototype.hasOwnProperty.call(Oe,"default")?Oe.default:Oe}function getAugmentedNamespace(Oe){if(Object.prototype.hasOwnProperty.call(Oe,"__esModule"))return Oe;var e=Oe.default;if(typeof e=="function"){var Te=function ke(){return this instanceof ke?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};Te.prototype=e.prototype}else Te={};return Object.defineProperty(Te,"__esModule",{value:!0}),Object.keys(Oe).forEach(function(ke){var Be=Object.getOwnPropertyDescriptor(Oe,ke);Object.defineProperty(Te,ke,Be.get?Be:{enumerable:!0,get:function(){return Oe[ke]}})}),Te}var dist={},logger$G={},vue={exports:{}},vue_cjs_prod={};/**
* @vue/compiler-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const FRAGMENT=Symbol(""),TELEPORT=Symbol(""),SUSPENSE=Symbol(""),KEEP_ALIVE=Symbol(""),BASE_TRANSITION=Symbol(""),OPEN_BLOCK=Symbol(""),CREATE_BLOCK=Symbol(""),CREATE_ELEMENT_BLOCK=Symbol(""),CREATE_VNODE=Symbol(""),CREATE_ELEMENT_VNODE=Symbol(""),CREATE_COMMENT=Symbol(""),CREATE_TEXT=Symbol(""),CREATE_STATIC=Symbol(""),RESOLVE_COMPONENT=Symbol(""),RESOLVE_DYNAMIC_COMPONENT=Symbol(""),RESOLVE_DIRECTIVE=Symbol(""),RESOLVE_FILTER=Symbol(""),WITH_DIRECTIVES=Symbol(""),RENDER_LIST=Symbol(""),RENDER_SLOT=Symbol(""),CREATE_SLOTS=Symbol(""),TO_DISPLAY_STRING=Symbol(""),MERGE_PROPS=Symbol(""),NORMALIZE_CLASS=Symbol(""),NORMALIZE_STYLE=Symbol(""),NORMALIZE_PROPS=Symbol(""),GUARD_REACTIVE_PROPS=Symbol(""),TO_HANDLERS=Symbol(""),CAMELIZE=Symbol(""),CAPITALIZE=Symbol(""),TO_HANDLER_KEY=Symbol(""),SET_BLOCK_TRACKING=Symbol(""),PUSH_SCOPE_ID=Symbol(""),POP_SCOPE_ID=Symbol(""),WITH_CTX=Symbol(""),UNREF=Symbol(""),IS_REF=Symbol(""),WITH_MEMO=Symbol(""),IS_MEMO_SAME=Symbol(""),helperNameMap={[FRAGMENT]:"Fragment",[TELEPORT]:"Teleport",[SUSPENSE]:"Suspense",[KEEP_ALIVE]:"KeepAlive",[BASE_TRANSITION]:"BaseTransition",[OPEN_BLOCK]:"openBlock",[CREATE_BLOCK]:"createBlock",[CREATE_ELEMENT_BLOCK]:"createElementBlock",[CREATE_VNODE]:"createVNode",[CREATE_ELEMENT_VNODE]:"createElementVNode",[CREATE_COMMENT]:"createCommentVNode",[CREATE_TEXT]:"createTextVNode",[CREATE_STATIC]:"createStaticVNode",[RESOLVE_COMPONENT]:"resolveComponent",[RESOLVE_DYNAMIC_COMPONENT]:"resolveDynamicComponent",[RESOLVE_DIRECTIVE]:"resolveDirective",[RESOLVE_FILTER]:"resolveFilter",[WITH_DIRECTIVES]:"withDirectives",[RENDER_LIST]:"renderList",[RENDER_SLOT]:"renderSlot",[CREATE_SLOTS]:"createSlots",[TO_DISPLAY_STRING]:"toDisplayString",[MERGE_PROPS]:"mergeProps",[NORMALIZE_CLASS]:"normalizeClass",[NORMALIZE_STYLE]:"normalizeStyle",[NORMALIZE_PROPS]:"normalizeProps",[GUARD_REACTIVE_PROPS]:"guardReactiveProps",[TO_HANDLERS]:"toHandlers",[CAMELIZE]:"camelize",[CAPITALIZE]:"capitalize",[TO_HANDLER_KEY]:"toHandlerKey",[SET_BLOCK_TRACKING]:"setBlockTracking",[PUSH_SCOPE_ID]:"pushScopeId",[POP_SCOPE_ID]:"popScopeId",[WITH_CTX]:"withCtx",[UNREF]:"unref",[IS_REF]:"isRef",[WITH_MEMO]:"withMemo",[IS_MEMO_SAME]:"isMemoSame"};function registerRuntimeHelpers(Oe){Object.getOwnPropertySymbols(Oe).forEach(e=>{helperNameMap[e]=Oe[e]})}const Namespaces={HTML:0,0:"HTML",SVG:1,1:"SVG",MATH_ML:2,2:"MATH_ML"},NodeTypes={ROOT:0,0:"ROOT",ELEMENT:1,1:"ELEMENT",TEXT:2,2:"TEXT",COMMENT:3,3:"COMMENT",SIMPLE_EXPRESSION:4,4:"SIMPLE_EXPRESSION",INTERPOLATION:5,5:"INTERPOLATION",ATTRIBUTE:6,6:"ATTRIBUTE",DIRECTIVE:7,7:"DIRECTIVE",COMPOUND_EXPRESSION:8,8:"COMPOUND_EXPRESSION",IF:9,9:"IF",IF_BRANCH:10,10:"IF_BRANCH",FOR:11,11:"FOR",TEXT_CALL:12,12:"TEXT_CALL",VNODE_CALL:13,13:"VNODE_CALL",JS_CALL_EXPRESSION:14,14:"JS_CALL_EXPRESSION",JS_OBJECT_EXPRESSION:15,15:"JS_OBJECT_EXPRESSION",JS_PROPERTY:16,16:"JS_PROPERTY",JS_ARRAY_EXPRESSION:17,17:"JS_ARRAY_EXPRESSION",JS_FUNCTION_EXPRESSION:18,18:"JS_FUNCTION_EXPRESSION",JS_CONDITIONAL_EXPRESSION:19,19:"JS_CONDITIONAL_EXPRESSION",JS_CACHE_EXPRESSION:20,20:"JS_CACHE_EXPRESSION",JS_BLOCK_STATEMENT:21,21:"JS_BLOCK_STATEMENT",JS_TEMPLATE_LITERAL:22,22:"JS_TEMPLATE_LITERAL",JS_IF_STATEMENT:23,23:"JS_IF_STATEMENT",JS_ASSIGNMENT_EXPRESSION:24,24:"JS_ASSIGNMENT_EXPRESSION",JS_SEQUENCE_EXPRESSION:25,25:"JS_SEQUENCE_EXPRESSION",JS_RETURN_STATEMENT:26,26:"JS_RETURN_STATEMENT"},ElementTypes={ELEMENT:0,0:"ELEMENT",COMPONENT:1,1:"COMPONENT",SLOT:2,2:"SLOT",TEMPLATE:3,3:"TEMPLATE"},ConstantTypes={NOT_CONSTANT:0,0:"NOT_CONSTANT",CAN_SKIP_PATCH:1,1:"CAN_SKIP_PATCH",CAN_CACHE:2,2:"CAN_CACHE",CAN_STRINGIFY:3,3:"CAN_STRINGIFY"},locStub={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function createRoot(Oe,e=""){return{type:0,source:e,children:Oe,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:locStub}}function createVNodeCall(Oe,e,Te,ke,Be,Ue,He,We=!1,Cn=!1,En=!1,An=locStub){return Oe&&(We?(Oe.helper(OPEN_BLOCK),Oe.helper(getVNodeBlockHelper(Oe.inSSR,En))):Oe.helper(getVNodeHelper(Oe.inSSR,En)),He&&Oe.helper(WITH_DIRECTIVES)),{type:13,tag:e,props:Te,children:ke,patchFlag:Be,dynamicProps:Ue,directives:He,isBlock:We,disableTracking:Cn,isComponent:En,loc:An}}function createArrayExpression(Oe,e=locStub){return{type:17,loc:e,elements:Oe}}function createObjectExpression(Oe,e=locStub){return{type:15,loc:e,properties:Oe}}function createObjectProperty(Oe,e){return{type:16,loc:locStub,key:isString(Oe)?createSimpleExpression(Oe,!0):Oe,value:e}}function createSimpleExpression(Oe,e=!1,Te=locStub,ke=0){return{type:4,loc:Te,content:Oe,isStatic:e,constType:e?3:ke}}function createInterpolation(Oe,e){return{type:5,loc:e,content:isString(Oe)?createSimpleExpression(Oe,!1,e):Oe}}function createCompoundExpression(Oe,e=locStub){return{type:8,loc:e,children:Oe}}function createCallExpression(Oe,e=[],Te=locStub){return{type:14,loc:Te,callee:Oe,arguments:e}}function createFunctionExpression(Oe,e=void 0,Te=!1,ke=!1,Be=locStub){return{type:18,params:Oe,returns:e,newline:Te,isSlot:ke,loc:Be}}function createConditionalExpression(Oe,e,Te,ke=!0){return{type:19,test:Oe,consequent:e,alternate:Te,newline:ke,loc:locStub}}function createCacheExpression(Oe,e,Te=!1,ke=!1){return{type:20,index:Oe,value:e,needPauseTracking:Te,inVOnce:ke,needArraySpread:!1,loc:locStub}}function createBlockStatement(Oe){return{type:21,body:Oe,loc:locStub}}function createTemplateLiteral(Oe){return{type:22,elements:Oe,loc:locStub}}function createIfStatement(Oe,e,Te){return{type:23,test:Oe,consequent:e,alternate:Te,loc:locStub}}function createAssignmentExpression(Oe,e){return{type:24,left:Oe,right:e,loc:locStub}}function createSequenceExpression(Oe){return{type:25,expressions:Oe,loc:locStub}}function createReturnStatement(Oe){return{type:26,returns:Oe,loc:locStub}}function getVNodeHelper(Oe,e){return Oe||e?CREATE_VNODE:CREATE_ELEMENT_VNODE}function getVNodeBlockHelper(Oe,e){return Oe||e?CREATE_BLOCK:CREATE_ELEMENT_BLOCK}function convertToBlock(Oe,{helper:e,removeHelper:Te,inSSR:ke}){Oe.isBlock||(Oe.isBlock=!0,Te(getVNodeHelper(ke,Oe.isComponent)),e(OPEN_BLOCK),e(getVNodeBlockHelper(ke,Oe.isComponent)))}const defaultDelimitersOpen=new Uint8Array([123,123]),defaultDelimitersClose=new Uint8Array([125,125]);function isTagStartChar(Oe){return Oe>=97&&Oe<=122||Oe>=65&&Oe<=90}function isWhitespace(Oe){return Oe===32||Oe===10||Oe===9||Oe===12||Oe===13}function isEndOfTagSection(Oe){return Oe===47||Oe===62||isWhitespace(Oe)}function toCharCodes(Oe){const e=new Uint8Array(Oe.length);for(let Te=0;Te<Oe.length;Te++)e[Te]=Oe.charCodeAt(Te);return e}const Sequences={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class Tokenizer{constructor(e,Te){this.stack=e,this.cbs=Te,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=defaultDelimitersOpen,this.delimiterClose=defaultDelimitersClose,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=defaultDelimitersOpen,this.delimiterClose=defaultDelimitersClose}getPos(e){let Te=1,ke=e+1;for(let Be=this.newlines.length-1;Be>=0;Be--){const Ue=this.newlines[Be];if(e>Ue){Te=Be+2,ke=e-Ue;break}}return{column:ke,line:Te,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){e===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const Te=this.index+1-this.delimiterOpen.length;Te>this.sectionStart&&this.cbs.ontext(this.sectionStart,Te),this.state=3,this.sectionStart=Te}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const Te=this.sequenceIndex===this.currentSequence.length;if(!(Te?isEndOfTagSection(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!Te){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(e===62||isWhitespace(e)){const Te=this.index-this.currentSequence.length;if(this.sectionStart<Te){const ke=this.index;this.index=Te,this.cbs.ontext(this.sectionStart,Te),this.index=ke}this.sectionStart=Te+2,this.stateInClosingTagName(e),this.inRCDATA=!1;return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===Sequences.TitleEnd||this.currentSequence===Sequences.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===60)}stateCDATASequence(e){e===Sequences.Cdata[this.sequenceIndex]?++this.sequenceIndex===Sequences.Cdata.length&&(this.state=28,this.currentSequence=Sequences.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const Te=this.buffer.charCodeAt(this.index);if(Te===10&&this.newlines.push(this.index),Te===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===Sequences.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,Te){this.enterRCDATA(e,Te),this.state=31}enterRCDATA(e,Te){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=Te}stateBeforeTagName(e){e===33?(this.state=22,this.sectionStart=this.index+1):e===63?(this.state=24,this.sectionStart=this.index+1):isTagStartChar(e)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:e===116?this.state=30:this.state=e===115?29:6):e===47?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){isEndOfTagSection(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(isEndOfTagSection(e)){const Te=this.buffer.slice(this.sectionStart,this.index);Te!=="template"&&this.enterRCDATA(toCharCodes("</"+Te),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){isWhitespace(e)||(e===62?(this.state=1,this.sectionStart=this.index+1):(this.state=isTagStartChar(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(e===62||isWhitespace(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){e===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){e===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):e===47?this.state=7:e===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):isWhitespace(e)||this.handleAttrStart(e)}handleAttrStart(e){e===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):e===46||e===58||e===64||e===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):isWhitespace(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(e===61||isEndOfTagSection(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){e===61||isEndOfTagSection(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):e===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){e===61||isEndOfTagSection(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===91?this.state=15:e===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){e===93?this.state=14:(e===61||isEndOfTagSection(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){e===61||isEndOfTagSection(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){e===61?this.state=18:e===47||e===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):isWhitespace(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){e===34?(this.state=19,this.sectionStart=this.index+1):e===39?(this.state=20,this.sectionStart=this.index+1):isWhitespace(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,Te){(e===Te||this.fastForwardTo(Te))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(Te===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){isWhitespace(e)||e===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):(e===39||e===60||e===61||e===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){e===91?(this.state=26,this.sequenceIndex=0):this.state=e===45?25:23}stateInDeclaration(e){(e===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){e===45?(this.state=28,this.currentSequence=Sequences.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(e===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===Sequences.ScriptEnd[3]?this.startSpecial(Sequences.ScriptEnd,4):e===Sequences.StyleEnd[3]?this.startSpecial(Sequences.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===Sequences.TitleEnd[3]?this.startSpecial(Sequences.TitleEnd,4):e===Sequences.TextareaEnd[3]?this.startSpecial(Sequences.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const Te=this.buffer.charCodeAt(this.index);switch(Te===10&&this.newlines.push(this.index),this.state){case 1:{this.stateText(Te);break}case 2:{this.stateInterpolationOpen(Te);break}case 3:{this.stateInterpolation(Te);break}case 4:{this.stateInterpolationClose(Te);break}case 31:{this.stateSpecialStartSequence(Te);break}case 32:{this.stateInRCDATA(Te);break}case 26:{this.stateCDATASequence(Te);break}case 19:{this.stateInAttrValueDoubleQuotes(Te);break}case 12:{this.stateInAttrName(Te);break}case 13:{this.stateInDirName(Te);break}case 14:{this.stateInDirArg(Te);break}case 15:{this.stateInDynamicDirArg(Te);break}case 16:{this.stateInDirModifier(Te);break}case 28:{this.stateInCommentLike(Te);break}case 27:{this.stateInSpecialComment(Te);break}case 11:{this.stateBeforeAttrName(Te);break}case 6:{this.stateInTagName(Te);break}case 34:{this.stateInSFCRootTagName(Te);break}case 9:{this.stateInClosingTagName(Te);break}case 5:{this.stateBeforeTagName(Te);break}case 17:{this.stateAfterAttrName(Te);break}case 20:{this.stateInAttrValueSingleQuotes(Te);break}case 18:{this.stateBeforeAttrValue(Te);break}case 8:{this.stateBeforeClosingTagName(Te);break}case 10:{this.stateAfterClosingTagName(Te);break}case 29:{this.stateBeforeSpecialS(Te);break}case 30:{this.stateBeforeSpecialT(Te);break}case 21:{this.stateInAttrValueNoQuotes(Te);break}case 7:{this.stateInSelfClosingTag(Te);break}case 23:{this.stateInDeclaration(Te);break}case 22:{this.stateBeforeDeclaration(Te);break}case 25:{this.stateBeforeComment(Te);break}case 24:{this.stateInProcessingInstruction(Te);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(this.state===28?this.currentSequence===Sequences.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,Te){}}const CompilerDeprecationTypes={COMPILER_IS_ON_ELEMENT:"COMPILER_IS_ON_ELEMENT",COMPILER_V_BIND_SYNC:"COMPILER_V_BIND_SYNC",COMPILER_V_BIND_OBJECT_ORDER:"COMPILER_V_BIND_OBJECT_ORDER",COMPILER_V_ON_NATIVE:"COMPILER_V_ON_NATIVE",COMPILER_V_IF_V_FOR_PRECEDENCE:"COMPILER_V_IF_V_FOR_PRECEDENCE",COMPILER_NATIVE_TEMPLATE:"COMPILER_NATIVE_TEMPLATE",COMPILER_INLINE_TEMPLATE:"COMPILER_INLINE_TEMPLATE",COMPILER_FILTERS:"COMPILER_FILTERS"},deprecationData={COMPILER_IS_ON_ELEMENT:{message:'Platform-native elements with "is" prop will no longer be treated as components in Vue 3 unless the "is" value is explicitly prefixed with "vue:".',link:"https://v3-migration.vuejs.org/breaking-changes/custom-elements-interop.html"},COMPILER_V_BIND_SYNC:{message:Oe=>`.sync modifier for v-bind has been removed. Use v-model with argument instead. \`v-bind:${Oe}.sync\` should be changed to \`v-model:${Oe}\`.`,link:"https://v3-migration.vuejs.org/breaking-changes/v-model.html"},COMPILER_V_BIND_OBJECT_ORDER:{message:'v-bind="obj" usage is now order sensitive and behaves like JavaScript object spread: it will now overwrite an existing non-mergeable attribute that appears before v-bind in the case of conflict. To retain 2.x behavior, move v-bind to make it the first attribute. You can also suppress this warning if the usage is intended.',link:"https://v3-migration.vuejs.org/breaking-changes/v-bind.html"},COMPILER_V_ON_NATIVE:{message:".native modifier for v-on has been removed as is no longer necessary.",link:"https://v3-migration.vuejs.org/breaking-changes/v-on-native-modifier-removed.html"},COMPILER_V_IF_V_FOR_PRECEDENCE:{message:"v-if / v-for precedence when used on the same element has changed in Vue 3: v-if now takes higher precedence and will no longer have access to v-for scope variables. It is best to avoid the ambiguity with <template> tags or use a computed property that filters v-for data source.",link:"https://v3-migration.vuejs.org/breaking-changes/v-if-v-for.html"},COMPILER_NATIVE_TEMPLATE:{message:"<template> with no special directives will render as a native template element instead of its inner content in Vue 3."},COMPILER_INLINE_TEMPLATE:{message:'"inline-template" has been removed in Vue 3.',link:"https://v3-migration.vuejs.org/breaking-changes/inline-template-attribute.html"},COMPILER_FILTERS:{message:'filters have been removed in Vue 3. The "|" symbol will be treated as native JavaScript bitwise OR operator. Use method calls or computed properties instead.',link:"https://v3-migration.vuejs.org/breaking-changes/filters.html"}};function getCompatValue(Oe,{compatConfig:e}){const Te=e&&e[Oe];return Oe==="MODE"?Te||3:Te}function isCompatEnabled(Oe,e){const Te=getCompatValue("MODE",e),ke=getCompatValue(Oe,e);return Te===3?ke===!0:ke!==!1}function checkCompatEnabled(Oe,e,Te,...ke){return isCompatEnabled(Oe,e)}function warnDeprecation(Oe,e,Te,...ke){if(getCompatValue(Oe,e)==="suppress-warning")return;const{message:Ue,link:He}=deprecationData[Oe],We=`(deprecation ${Oe}) ${typeof Ue=="function"?Ue(...ke):Ue}${He?`
  Details: ${He}`:""}`,Cn=new SyntaxError(We);Cn.code=Oe,Te&&(Cn.loc=Te),e.onWarn(Cn)}function defaultOnError(Oe){throw Oe}function defaultOnWarn(Oe){}function createCompilerError(Oe,e,Te,ke){const Be=`https://vuejs.org/error-reference/#compiler-${Oe}`,Ue=new SyntaxError(String(Be));return Ue.code=Oe,Ue.loc=e,Ue}const ErrorCodes={ABRUPT_CLOSING_OF_EMPTY_COMMENT:0,0:"ABRUPT_CLOSING_OF_EMPTY_COMMENT",CDATA_IN_HTML_CONTENT:1,1:"CDATA_IN_HTML_CONTENT",DUPLICATE_ATTRIBUTE:2,2:"DUPLICATE_ATTRIBUTE",END_TAG_WITH_ATTRIBUTES:3,3:"END_TAG_WITH_ATTRIBUTES",END_TAG_WITH_TRAILING_SOLIDUS:4,4:"END_TAG_WITH_TRAILING_SOLIDUS",EOF_BEFORE_TAG_NAME:5,5:"EOF_BEFORE_TAG_NAME",EOF_IN_CDATA:6,6:"EOF_IN_CDATA",EOF_IN_COMMENT:7,7:"EOF_IN_COMMENT",EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT:8,8:"EOF_IN_SCRIPT_HTML_COMMENT_LIKE_TEXT",EOF_IN_TAG:9,9:"EOF_IN_TAG",INCORRECTLY_CLOSED_COMMENT:10,10:"INCORRECTLY_CLOSED_COMMENT",INCORRECTLY_OPENED_COMMENT:11,11:"INCORRECTLY_OPENED_COMMENT",INVALID_FIRST_CHARACTER_OF_TAG_NAME:12,12:"INVALID_FIRST_CHARACTER_OF_TAG_NAME",MISSING_ATTRIBUTE_VALUE:13,13:"MISSING_ATTRIBUTE_VALUE",MISSING_END_TAG_NAME:14,14:"MISSING_END_TAG_NAME",MISSING_WHITESPACE_BETWEEN_ATTRIBUTES:15,15:"MISSING_WHITESPACE_BETWEEN_ATTRIBUTES",NESTED_COMMENT:16,16:"NESTED_COMMENT",UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME:17,17:"UNEXPECTED_CHARACTER_IN_ATTRIBUTE_NAME",UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE:18,18:"UNEXPECTED_CHARACTER_IN_UNQUOTED_ATTRIBUTE_VALUE",UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME:19,19:"UNEXPECTED_EQUALS_SIGN_BEFORE_ATTRIBUTE_NAME",UNEXPECTED_NULL_CHARACTER:20,20:"UNEXPECTED_NULL_CHARACTER",UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME:21,21:"UNEXPECTED_QUESTION_MARK_INSTEAD_OF_TAG_NAME",UNEXPECTED_SOLIDUS_IN_TAG:22,22:"UNEXPECTED_SOLIDUS_IN_TAG",X_INVALID_END_TAG:23,23:"X_INVALID_END_TAG",X_MISSING_END_TAG:24,24:"X_MISSING_END_TAG",X_MISSING_INTERPOLATION_END:25,25:"X_MISSING_INTERPOLATION_END",X_MISSING_DIRECTIVE_NAME:26,26:"X_MISSING_DIRECTIVE_NAME",X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END:27,27:"X_MISSING_DYNAMIC_DIRECTIVE_ARGUMENT_END",X_V_IF_NO_EXPRESSION:28,28:"X_V_IF_NO_EXPRESSION",X_V_IF_SAME_KEY:29,29:"X_V_IF_SAME_KEY",X_V_ELSE_NO_ADJACENT_IF:30,30:"X_V_ELSE_NO_ADJACENT_IF",X_V_FOR_NO_EXPRESSION:31,31:"X_V_FOR_NO_EXPRESSION",X_V_FOR_MALFORMED_EXPRESSION:32,32:"X_V_FOR_MALFORMED_EXPRESSION",X_V_FOR_TEMPLATE_KEY_PLACEMENT:33,33:"X_V_FOR_TEMPLATE_KEY_PLACEMENT",X_V_BIND_NO_EXPRESSION:34,34:"X_V_BIND_NO_EXPRESSION",X_V_ON_NO_EXPRESSION:35,35:"X_V_ON_NO_EXPRESSION",X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET:36,36:"X_V_SLOT_UNEXPECTED_DIRECTIVE_ON_SLOT_OUTLET",X_V_SLOT_MIXED_SLOT_USAGE:37,37:"X_V_SLOT_MIXED_SLOT_USAGE",X_V_SLOT_DUPLICATE_SLOT_NAMES:38,38:"X_V_SLOT_DUPLICATE_SLOT_NAMES",X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN:39,39:"X_V_SLOT_EXTRANEOUS_DEFAULT_SLOT_CHILDREN",X_V_SLOT_MISPLACED:40,40:"X_V_SLOT_MISPLACED",X_V_MODEL_NO_EXPRESSION:41,41:"X_V_MODEL_NO_EXPRESSION",X_V_MODEL_MALFORMED_EXPRESSION:42,42:"X_V_MODEL_MALFORMED_EXPRESSION",X_V_MODEL_ON_SCOPE_VARIABLE:43,43:"X_V_MODEL_ON_SCOPE_VARIABLE",X_V_MODEL_ON_PROPS:44,44:"X_V_MODEL_ON_PROPS",X_INVALID_EXPRESSION:45,45:"X_INVALID_EXPRESSION",X_KEEP_ALIVE_INVALID_CHILDREN:46,46:"X_KEEP_ALIVE_INVALID_CHILDREN",X_PREFIX_ID_NOT_SUPPORTED:47,47:"X_PREFIX_ID_NOT_SUPPORTED",X_MODULE_MODE_NOT_SUPPORTED:48,48:"X_MODULE_MODE_NOT_SUPPORTED",X_CACHE_HANDLER_NOT_SUPPORTED:49,49:"X_CACHE_HANDLER_NOT_SUPPORTED",X_SCOPE_ID_NOT_SUPPORTED:50,50:"X_SCOPE_ID_NOT_SUPPORTED",X_VNODE_HOOKS:51,51:"X_VNODE_HOOKS",X_V_BIND_INVALID_SAME_NAME_ARGUMENT:52,52:"X_V_BIND_INVALID_SAME_NAME_ARGUMENT",__EXTEND_POINT__:53,53:"__EXTEND_POINT__"},errorMessages={0:"Illegal comment.",1:"CDATA section is allowed only in XML context.",2:"Duplicate attribute.",3:"End tag cannot have attributes.",4:"Illegal '/' in tags.",5:"Unexpected EOF in tag.",6:"Unexpected EOF in CDATA section.",7:"Unexpected EOF in comment.",8:"Unexpected EOF in script.",9:"Unexpected EOF in tag.",10:"Incorrectly closed comment.",11:"Incorrectly opened comment.",12:"Illegal tag name. Use '&lt;' to print '<'.",13:"Attribute value was expected.",14:"End tag name was expected.",15:"Whitespace was expected.",16:"Unexpected '<!--' in comment.",17:`Attribute name cannot contain U+0022 ("), U+0027 ('), and U+003C (<).`,18:"Unquoted attribute value cannot contain U+0022 (\"), U+0027 ('), U+003C (<), U+003D (=), and U+0060 (`).",19:"Attribute name cannot start with '='.",21:"'<?' is allowed only in XML context.",20:"Unexpected null character.",22:"Illegal '/' in tags.",23:"Invalid end tag.",24:"Element is missing end tag.",25:"Interpolation end sign was not found.",27:"End bracket for dynamic directive argument was not found. Note that dynamic directive argument cannot contain spaces.",26:"Legal directive name was expected.",28:"v-if/v-else-if is missing expression.",29:"v-if/else branches must use unique keys.",30:"v-else/v-else-if has no adjacent v-if or v-else-if.",31:"v-for is missing expression.",32:"v-for has invalid expression.",33:"<template v-for> key should be placed on the <template> tag.",34:"v-bind is missing expression.",52:"v-bind with same-name shorthand only allows static argument.",35:"v-on is missing expression.",36:"Unexpected custom directive on <slot> outlet.",37:"Mixed v-slot usage on both the component and nested <template>. When there are multiple named slots, all slots should use <template> syntax to avoid scope ambiguity.",38:"Duplicate slot names found. ",39:"Extraneous children found when component already has explicitly named default slot. These children will be ignored.",40:"v-slot can only be used on components or <template> tags.",41:"v-model is missing expression.",42:"v-model value must be a valid JavaScript member expression.",43:"v-model cannot be used on v-for or v-slot scope variables because they are not writable.",44:`v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.`,45:"Error parsing JavaScript expression: ",46:"<KeepAlive> expects exactly one child component.",51:"@vnode-* hooks in templates are no longer supported. Use the vue: prefix instead. For example, @vnode-mounted should be changed to @vue:mounted. @vnode-* hooks support has been removed in 3.4.",47:'"prefixIdentifiers" option is not supported in this build of compiler.',48:"ES module mode is not supported in this build of compiler.",49:'"cacheHandlers" option is only supported when the "prefixIdentifiers" option is enabled.',50:'"scopeId" option is only supported in module mode.',53:""};function walkIdentifiers(Oe,e,Te=!1,ke=[],Be=Object.create(null)){}function isReferencedIdentifier(Oe,e,Te){return!1}function isInDestructureAssignment(Oe,e){if(Oe&&(Oe.type==="ObjectProperty"||Oe.type==="ArrayPattern")){let Te=e.length;for(;Te--;){const ke=e[Te];if(ke.type==="AssignmentExpression")return!0;if(ke.type!=="ObjectProperty"&&!ke.type.endsWith("Pattern"))break}}return!1}function isInNewExpression(Oe){let e=Oe.length;for(;e--;){const Te=Oe[e];if(Te.type==="NewExpression")return!0;if(Te.type!=="MemberExpression")break}return!1}function walkFunctionParams(Oe,e){for(const Te of Oe.params)for(const ke of extractIdentifiers(Te))e(ke)}function walkBlockDeclarations(Oe,e){for(const Te of Oe.body)if(Te.type==="VariableDeclaration"){if(Te.declare)continue;for(const ke of Te.declarations)for(const Be of extractIdentifiers(ke.id))e(Be)}else if(Te.type==="FunctionDeclaration"||Te.type==="ClassDeclaration"){if(Te.declare||!Te.id)continue;e(Te.id)}else isForStatement(Te)&&walkForStatement(Te,!0,e)}function isForStatement(Oe){return Oe.type==="ForOfStatement"||Oe.type==="ForInStatement"||Oe.type==="ForStatement"}function walkForStatement(Oe,e,Te){const ke=Oe.type==="ForStatement"?Oe.init:Oe.left;if(ke&&ke.type==="VariableDeclaration"&&(ke.kind==="var"&&e))for(const Be of ke.declarations)for(const Ue of extractIdentifiers(Be.id))Te(Ue)}function extractIdentifiers(Oe,e=[]){switch(Oe.type){case"Identifier":e.push(Oe);break;case"MemberExpression":let Te=Oe;for(;Te.type==="MemberExpression";)Te=Te.object;e.push(Te);break;case"ObjectPattern":for(const ke of Oe.properties)ke.type==="RestElement"?extractIdentifiers(ke.argument,e):extractIdentifiers(ke.value,e);break;case"ArrayPattern":Oe.elements.forEach(ke=>{ke&&extractIdentifiers(ke,e)});break;case"RestElement":extractIdentifiers(Oe.argument,e);break;case"AssignmentPattern":extractIdentifiers(Oe.left,e);break}return e}const isFunctionType=Oe=>/Function(?:Expression|Declaration)$|Method$/.test(Oe.type),isStaticProperty=Oe=>Oe&&(Oe.type==="ObjectProperty"||Oe.type==="ObjectMethod")&&!Oe.computed,isStaticPropertyKey=(Oe,e)=>isStaticProperty(e)&&e.key===Oe,TS_NODE_TYPES=["TSAsExpression","TSTypeAssertion","TSNonNullExpression","TSInstantiationExpression","TSSatisfiesExpression"];function unwrapTSNode(Oe){return TS_NODE_TYPES.includes(Oe.type)?unwrapTSNode(Oe.expression):Oe}const isStaticExp=Oe=>Oe.type===4&&Oe.isStatic;function isCoreComponent(Oe){switch(Oe){case"Teleport":case"teleport":return TELEPORT;case"Suspense":case"suspense":return SUSPENSE;case"KeepAlive":case"keep-alive":return KEEP_ALIVE;case"BaseTransition":case"base-transition":return BASE_TRANSITION}}const nonIdentifierRE=/^\d|[^\$\w\xA0-\uFFFF]/,isSimpleIdentifier=Oe=>!nonIdentifierRE.test(Oe),validFirstIdentCharRE=/[A-Za-z_$\xA0-\uFFFF]/,validIdentCharRE=/[\.\?\w$\xA0-\uFFFF]/,whitespaceRE=/\s+[.[]\s*|\s*[.[]\s+/g,getExpSource=Oe=>Oe.type===4?Oe.content:Oe.loc.source,isMemberExpressionBrowser=Oe=>{const e=getExpSource(Oe).trim().replace(whitespaceRE,We=>We.trim());let Te=0,ke=[],Be=0,Ue=0,He=null;for(let We=0;We<e.length;We++){const Cn=e.charAt(We);switch(Te){case 0:if(Cn==="[")ke.push(Te),Te=1,Be++;else if(Cn==="(")ke.push(Te),Te=2,Ue++;else if(!(We===0?validFirstIdentCharRE:validIdentCharRE).test(Cn))return!1;break;case 1:Cn==="'"||Cn==='"'||Cn==="`"?(ke.push(Te),Te=3,He=Cn):Cn==="["?Be++:Cn==="]"&&(--Be||(Te=ke.pop()));break;case 2:if(Cn==="'"||Cn==='"'||Cn==="`")ke.push(Te),Te=3,He=Cn;else if(Cn==="(")Ue++;else if(Cn===")"){if(We===e.length-1)return!1;--Ue||(Te=ke.pop())}break;case 3:Cn===He&&(Te=ke.pop(),He=null);break}}return!Be&&!Ue},isMemberExpressionNode=NOOP,isMemberExpression=isMemberExpressionBrowser,fnExpRE=/^\s*(async\s*)?(\([^)]*?\)|[\w$_]+)\s*(:[^=]+)?=>|^\s*(async\s+)?function(?:\s+[\w$]+)?\s*\(/,isFnExpressionBrowser=Oe=>fnExpRE.test(getExpSource(Oe)),isFnExpressionNode=NOOP,isFnExpression=isFnExpressionBrowser;function advancePositionWithClone(Oe,e,Te=e.length){return advancePositionWithMutation({offset:Oe.offset,line:Oe.line,column:Oe.column},e,Te)}function advancePositionWithMutation(Oe,e,Te=e.length){let ke=0,Be=-1;for(let Ue=0;Ue<Te;Ue++)e.charCodeAt(Ue)===10&&(ke++,Be=Ue);return Oe.offset+=Te,Oe.line+=ke,Oe.column=Be===-1?Oe.column+Te:Te-Be,Oe}function assert$1(Oe,e){if(!Oe)throw new Error(e||"unexpected compiler condition")}function findDir(Oe,e,Te=!1){for(let ke=0;ke<Oe.props.length;ke++){const Be=Oe.props[ke];if(Be.type===7&&(Te||Be.exp)&&(isString(e)?Be.name===e:e.test(Be.name)))return Be}}function findProp(Oe,e,Te=!1,ke=!1){for(let Be=0;Be<Oe.props.length;Be++){const Ue=Oe.props[Be];if(Ue.type===6){if(Te)continue;if(Ue.name===e&&(Ue.value||ke))return Ue}else if(Ue.name==="bind"&&(Ue.exp||ke)&&isStaticArgOf(Ue.arg,e))return Ue}}function isStaticArgOf(Oe,e){return!!(Oe&&isStaticExp(Oe)&&Oe.content===e)}function hasDynamicKeyVBind(Oe){return Oe.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function isText$1(Oe){return Oe.type===5||Oe.type===2}function isVSlot(Oe){return Oe.type===7&&Oe.name==="slot"}function isTemplateNode(Oe){return Oe.type===1&&Oe.tagType===3}function isSlotOutlet(Oe){return Oe.type===1&&Oe.tagType===2}const propsHelperSet=new Set([NORMALIZE_PROPS,GUARD_REACTIVE_PROPS]);function getUnnormalizedProps(Oe,e=[]){if(Oe&&!isString(Oe)&&Oe.type===14){const Te=Oe.callee;if(!isString(Te)&&propsHelperSet.has(Te))return getUnnormalizedProps(Oe.arguments[0],e.concat(Oe))}return[Oe,e]}function injectProp(Oe,e,Te){let ke,Be=Oe.type===13?Oe.props:Oe.arguments[2],Ue=[],He;if(Be&&!isString(Be)&&Be.type===14){const We=getUnnormalizedProps(Be);Be=We[0],Ue=We[1],He=Ue[Ue.length-1]}if(Be==null||isString(Be))ke=createObjectExpression([e]);else if(Be.type===14){const We=Be.arguments[0];!isString(We)&&We.type===15?hasProp(e,We)||We.properties.unshift(e):Be.callee===TO_HANDLERS?ke=createCallExpression(Te.helper(MERGE_PROPS),[createObjectExpression([e]),Be]):Be.arguments.unshift(createObjectExpression([e])),!ke&&(ke=Be)}else Be.type===15?(hasProp(e,Be)||Be.properties.unshift(e),ke=Be):(ke=createCallExpression(Te.helper(MERGE_PROPS),[createObjectExpression([e]),Be]),He&&He.callee===GUARD_REACTIVE_PROPS&&(He=Ue[Ue.length-2]));Oe.type===13?He?He.arguments[0]=ke:Oe.props=ke:He?He.arguments[0]=ke:Oe.arguments[2]=ke}function hasProp(Oe,e){let Te=!1;if(Oe.key.type===4){const ke=Oe.key.content;Te=e.properties.some(Be=>Be.key.type===4&&Be.key.content===ke)}return Te}function toValidAssetId(Oe,e){return`_${e}_${Oe.replace(/[^\w]/g,(Te,ke)=>Te==="-"?"_":Oe.charCodeAt(ke).toString())}`}function hasScopeRef(Oe,e){if(!Oe||Object.keys(e).length===0)return!1;switch(Oe.type){case 1:for(let Te=0;Te<Oe.props.length;Te++){const ke=Oe.props[Te];if(ke.type===7&&(hasScopeRef(ke.arg,e)||hasScopeRef(ke.exp,e)))return!0}return Oe.children.some(Te=>hasScopeRef(Te,e));case 11:return hasScopeRef(Oe.source,e)?!0:Oe.children.some(Te=>hasScopeRef(Te,e));case 9:return Oe.branches.some(Te=>hasScopeRef(Te,e));case 10:return hasScopeRef(Oe.condition,e)?!0:Oe.children.some(Te=>hasScopeRef(Te,e));case 4:return!Oe.isStatic&&isSimpleIdentifier(Oe.content)&&!!e[Oe.content];case 8:return Oe.children.some(Te=>isObject$1(Te)&&hasScopeRef(Te,e));case 5:case 12:return hasScopeRef(Oe.content,e);case 2:case 3:case 20:return!1;default:return!1}}function getMemoedVNodeCall(Oe){return Oe.type===14&&Oe.callee===WITH_MEMO?Oe.arguments[1].returns:Oe}const forAliasRE=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,defaultParserOptions={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:NO,isPreTag:NO,isIgnoreNewlineTag:NO,isCustomElement:NO,onError:defaultOnError,onWarn:defaultOnWarn,comments:!1,prefixIdentifiers:!1};let currentOptions=defaultParserOptions,currentRoot=null,currentInput="",currentOpenTag=null,currentProp=null,currentAttrValue="",currentAttrStartIndex=-1,currentAttrEndIndex=-1,inPre=0,inVPre=!1,currentVPreBoundary=null;const stack=[],tokenizer=new Tokenizer(stack,{onerr:emitError,ontext(Oe,e){onText(getSlice(Oe,e),Oe,e)},ontextentity(Oe,e,Te){onText(Oe,e,Te)},oninterpolation(Oe,e){if(inVPre)return onText(getSlice(Oe,e),Oe,e);let Te=Oe+tokenizer.delimiterOpen.length,ke=e-tokenizer.delimiterClose.length;for(;isWhitespace(currentInput.charCodeAt(Te));)Te++;for(;isWhitespace(currentInput.charCodeAt(ke-1));)ke--;let Be=getSlice(Te,ke);Be.includes("&")&&(Be=currentOptions.decodeEntities(Be,!1)),addNode({type:5,content:createExp(Be,!1,getLoc(Te,ke)),loc:getLoc(Oe,e)})},onopentagname(Oe,e){const Te=getSlice(Oe,e);currentOpenTag={type:1,tag:Te,ns:currentOptions.getNamespace(Te,stack[0],currentOptions.ns),tagType:0,props:[],children:[],loc:getLoc(Oe-1,e),codegenNode:void 0}},onopentagend(Oe){endOpenTag(Oe)},onclosetag(Oe,e){const Te=getSlice(Oe,e);if(!currentOptions.isVoidTag(Te)){let ke=!1;for(let Be=0;Be<stack.length;Be++)if(stack[Be].tag.toLowerCase()===Te.toLowerCase()){ke=!0,Be>0&&emitError(24,stack[0].loc.start.offset);for(let He=0;He<=Be;He++){const We=stack.shift();onCloseTag(We,e,He<Be)}break}ke||emitError(23,backTrack(Oe,60))}},onselfclosingtag(Oe){const e=currentOpenTag.tag;currentOpenTag.isSelfClosing=!0,endOpenTag(Oe),stack[0]&&stack[0].tag===e&&onCloseTag(stack.shift(),Oe)},onattribname(Oe,e){currentProp={type:6,name:getSlice(Oe,e),nameLoc:getLoc(Oe,e),value:void 0,loc:getLoc(Oe)}},ondirname(Oe,e){const Te=getSlice(Oe,e),ke=Te==="."||Te===":"?"bind":Te==="@"?"on":Te==="#"?"slot":Te.slice(2);if(!inVPre&&ke===""&&emitError(26,Oe),inVPre||ke==="")currentProp={type:6,name:Te,nameLoc:getLoc(Oe,e),value:void 0,loc:getLoc(Oe)};else if(currentProp={type:7,name:ke,rawName:Te,exp:void 0,arg:void 0,modifiers:Te==="."?[createSimpleExpression("prop")]:[],loc:getLoc(Oe)},ke==="pre"){inVPre=tokenizer.inVPre=!0,currentVPreBoundary=currentOpenTag;const Be=currentOpenTag.props;for(let Ue=0;Ue<Be.length;Ue++)Be[Ue].type===7&&(Be[Ue]=dirToAttr(Be[Ue]))}},ondirarg(Oe,e){if(Oe===e)return;const Te=getSlice(Oe,e);if(inVPre)currentProp.name+=Te,setLocEnd(currentProp.nameLoc,e);else{const ke=Te[0]!=="[";currentProp.arg=createExp(ke?Te:Te.slice(1,-1),ke,getLoc(Oe,e),ke?3:0)}},ondirmodifier(Oe,e){const Te=getSlice(Oe,e);if(inVPre)currentProp.name+="."+Te,setLocEnd(currentProp.nameLoc,e);else if(currentProp.name==="slot"){const ke=currentProp.arg;ke&&(ke.content+="."+Te,setLocEnd(ke.loc,e))}else{const ke=createSimpleExpression(Te,!0,getLoc(Oe,e));currentProp.modifiers.push(ke)}},onattribdata(Oe,e){currentAttrValue+=getSlice(Oe,e),currentAttrStartIndex<0&&(currentAttrStartIndex=Oe),currentAttrEndIndex=e},onattribentity(Oe,e,Te){currentAttrValue+=Oe,currentAttrStartIndex<0&&(currentAttrStartIndex=e),currentAttrEndIndex=Te},onattribnameend(Oe){const e=currentProp.loc.start.offset,Te=getSlice(e,Oe);currentProp.type===7&&(currentProp.rawName=Te),currentOpenTag.props.some(ke=>(ke.type===7?ke.rawName:ke.name)===Te)&&emitError(2,e)},onattribend(Oe,e){if(currentOpenTag&&currentProp){if(setLocEnd(currentProp.loc,e),Oe!==0)if(currentAttrValue.includes("&")&&(currentAttrValue=currentOptions.decodeEntities(currentAttrValue,!0)),currentProp.type===6)currentProp.name==="class"&&(currentAttrValue=condense(currentAttrValue).trim()),Oe===1&&!currentAttrValue&&emitError(13,e),currentProp.value={type:2,content:currentAttrValue,loc:Oe===1?getLoc(currentAttrStartIndex,currentAttrEndIndex):getLoc(currentAttrStartIndex-1,currentAttrEndIndex+1)},tokenizer.inSFCRoot&&currentOpenTag.tag==="template"&&currentProp.name==="lang"&&currentAttrValue&&currentAttrValue!=="html"&&tokenizer.enterRCDATA(toCharCodes("</template"),0);else{let Te=0;currentProp.exp=createExp(currentAttrValue,!1,getLoc(currentAttrStartIndex,currentAttrEndIndex),0,Te),currentProp.name==="for"&&(currentProp.forParseResult=parseForExpression(currentProp.exp));let ke=-1;currentProp.name==="bind"&&(ke=currentProp.modifiers.findIndex(Be=>Be.content==="sync"))>-1&&checkCompatEnabled("COMPILER_V_BIND_SYNC",currentOptions,currentProp.loc,currentProp.rawName)&&(currentProp.name="model",currentProp.modifiers.splice(ke,1))}(currentProp.type!==7||currentProp.name!=="pre")&&currentOpenTag.props.push(currentProp)}currentAttrValue="",currentAttrStartIndex=currentAttrEndIndex=-1},oncomment(Oe,e){currentOptions.comments&&addNode({type:3,content:getSlice(Oe,e),loc:getLoc(Oe-4,e+3)})},onend(){const Oe=currentInput.length;for(let e=0;e<stack.length;e++)onCloseTag(stack[e],Oe-1),emitError(24,stack[e].loc.start.offset)},oncdata(Oe,e){stack[0].ns!==0?onText(getSlice(Oe,e),Oe,e):emitError(1,Oe-9)},onprocessinginstruction(Oe){(stack[0]?stack[0].ns:currentOptions.ns)===0&&emitError(21,Oe-1)}}),forIteratorRE=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,stripParensRE=/^\(|\)$/g;function parseForExpression(Oe){const e=Oe.loc,Te=Oe.content,ke=Te.match(forAliasRE);if(!ke)return;const[,Be,Ue]=ke,He=(Sn,Tn,Ln=!1)=>{const Bn=e.start.offset+Tn,ei=Bn+Sn.length;return createExp(Sn,!1,getLoc(Bn,ei),0,Ln?1:0)},We={source:He(Ue.trim(),Te.indexOf(Ue,Be.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let Cn=Be.trim().replace(stripParensRE,"").trim();const En=Be.indexOf(Cn),An=Cn.match(forIteratorRE);if(An){Cn=Cn.replace(forIteratorRE,"").trim();const Sn=An[1].trim();let Tn;if(Sn&&(Tn=Te.indexOf(Sn,En+Cn.length),We.key=He(Sn,Tn,!0)),An[2]){const Ln=An[2].trim();Ln&&(We.index=He(Ln,Te.indexOf(Ln,We.key?Tn+Sn.length:En+Cn.length),!0))}}return Cn&&(We.value=He(Cn,En,!0)),We}function getSlice(Oe,e){return currentInput.slice(Oe,e)}function endOpenTag(Oe){tokenizer.inSFCRoot&&(currentOpenTag.innerLoc=getLoc(Oe+1,Oe+1)),addNode(currentOpenTag);const{tag:e,ns:Te}=currentOpenTag;Te===0&&currentOptions.isPreTag(e)&&inPre++,currentOptions.isVoidTag(e)?onCloseTag(currentOpenTag,Oe):(stack.unshift(currentOpenTag),(Te===1||Te===2)&&(tokenizer.inXML=!0)),currentOpenTag=null}function onText(Oe,e,Te){{const Ue=stack[0]&&stack[0].tag;Ue!=="script"&&Ue!=="style"&&Oe.includes("&")&&(Oe=currentOptions.decodeEntities(Oe,!1))}const ke=stack[0]||currentRoot,Be=ke.children[ke.children.length-1];Be&&Be.type===2?(Be.content+=Oe,setLocEnd(Be.loc,Te)):ke.children.push({type:2,content:Oe,loc:getLoc(e,Te)})}function onCloseTag(Oe,e,Te=!1){Te?setLocEnd(Oe.loc,backTrack(e,60)):setLocEnd(Oe.loc,lookAhead(e,62)+1),tokenizer.inSFCRoot&&(Oe.children.length?Oe.innerLoc.end=extend$5({},Oe.children[Oe.children.length-1].loc.end):Oe.innerLoc.end=extend$5({},Oe.innerLoc.start),Oe.innerLoc.source=getSlice(Oe.innerLoc.start.offset,Oe.innerLoc.end.offset));const{tag:ke,ns:Be,children:Ue}=Oe;if(inVPre||(ke==="slot"?Oe.tagType=2:isFragmentTemplate(Oe)?Oe.tagType=3:isComponent(Oe)&&(Oe.tagType=1)),tokenizer.inRCDATA||(Oe.children=condenseWhitespace(Ue)),Be===0&&currentOptions.isIgnoreNewlineTag(ke)){const He=Ue[0];He&&He.type===2&&(He.content=He.content.replace(/^\r?\n/,""))}Be===0&&currentOptions.isPreTag(ke)&&inPre--,currentVPreBoundary===Oe&&(inVPre=tokenizer.inVPre=!1,currentVPreBoundary=null),tokenizer.inXML&&(stack[0]?stack[0].ns:currentOptions.ns)===0&&(tokenizer.inXML=!1);{const He=Oe.props;if(!tokenizer.inSFCRoot&&isCompatEnabled("COMPILER_NATIVE_TEMPLATE",currentOptions)&&Oe.tag==="template"&&!isFragmentTemplate(Oe)){const Cn=stack[0]||currentRoot,En=Cn.children.indexOf(Oe);Cn.children.splice(En,1,...Oe.children)}const We=He.find(Cn=>Cn.type===6&&Cn.name==="inline-template");We&&checkCompatEnabled("COMPILER_INLINE_TEMPLATE",currentOptions,We.loc)&&Oe.children.length&&(We.value={type:2,content:getSlice(Oe.children[0].loc.start.offset,Oe.children[Oe.children.length-1].loc.end.offset),loc:We.loc})}}function lookAhead(Oe,e){let Te=Oe;for(;currentInput.charCodeAt(Te)!==e&&Te<currentInput.length-1;)Te++;return Te}function backTrack(Oe,e){let Te=Oe;for(;currentInput.charCodeAt(Te)!==e&&Te>=0;)Te--;return Te}const specialTemplateDir=new Set(["if","else","else-if","for","slot"]);function isFragmentTemplate({tag:Oe,props:e}){if(Oe==="template"){for(let Te=0;Te<e.length;Te++)if(e[Te].type===7&&specialTemplateDir.has(e[Te].name))return!0}return!1}function isComponent({tag:Oe,props:e}){if(currentOptions.isCustomElement(Oe))return!1;if(Oe==="component"||isUpperCase(Oe.charCodeAt(0))||isCoreComponent(Oe)||currentOptions.isBuiltInComponent&&currentOptions.isBuiltInComponent(Oe)||currentOptions.isNativeTag&&!currentOptions.isNativeTag(Oe))return!0;for(let Te=0;Te<e.length;Te++){const ke=e[Te];if(ke.type===6){if(ke.name==="is"&&ke.value){if(ke.value.content.startsWith("vue:"))return!0;if(checkCompatEnabled("COMPILER_IS_ON_ELEMENT",currentOptions,ke.loc))return!0}}else if(ke.name==="bind"&&isStaticArgOf(ke.arg,"is")&&checkCompatEnabled("COMPILER_IS_ON_ELEMENT",currentOptions,ke.loc))return!0}return!1}function isUpperCase(Oe){return Oe>64&&Oe<91}const windowsNewlineRE=/\r\n/g;function condenseWhitespace(Oe,e){const Te=currentOptions.whitespace!=="preserve";let ke=!1;for(let Be=0;Be<Oe.length;Be++){const Ue=Oe[Be];if(Ue.type===2)if(inPre)Ue.content=Ue.content.replace(windowsNewlineRE,`
`);else if(isAllWhitespace(Ue.content)){const He=Oe[Be-1]&&Oe[Be-1].type,We=Oe[Be+1]&&Oe[Be+1].type;!He||!We||Te&&(He===3&&(We===3||We===1)||He===1&&(We===3||We===1&&hasNewlineChar(Ue.content)))?(ke=!0,Oe[Be]=null):Ue.content=" "}else Te&&(Ue.content=condense(Ue.content))}return ke?Oe.filter(Boolean):Oe}function isAllWhitespace(Oe){for(let e=0;e<Oe.length;e++)if(!isWhitespace(Oe.charCodeAt(e)))return!1;return!0}function hasNewlineChar(Oe){for(let e=0;e<Oe.length;e++){const Te=Oe.charCodeAt(e);if(Te===10||Te===13)return!0}return!1}function condense(Oe){let e="",Te=!1;for(let ke=0;ke<Oe.length;ke++)isWhitespace(Oe.charCodeAt(ke))?Te||(e+=" ",Te=!0):(e+=Oe[ke],Te=!1);return e}function addNode(Oe){(stack[0]||currentRoot).children.push(Oe)}function getLoc(Oe,e){return{start:tokenizer.getPos(Oe),end:e==null?e:tokenizer.getPos(e),source:e==null?e:getSlice(Oe,e)}}function cloneLoc(Oe){return getLoc(Oe.start.offset,Oe.end.offset)}function setLocEnd(Oe,e){Oe.end=tokenizer.getPos(e),Oe.source=getSlice(Oe.start.offset,e)}function dirToAttr(Oe){const e={type:6,name:Oe.rawName,nameLoc:getLoc(Oe.loc.start.offset,Oe.loc.start.offset+Oe.rawName.length),value:void 0,loc:Oe.loc};if(Oe.exp){const Te=Oe.exp.loc;Te.end.offset<Oe.loc.end.offset&&(Te.start.offset--,Te.start.column--,Te.end.offset++,Te.end.column++),e.value={type:2,content:Oe.exp.content,loc:Te}}return e}function createExp(Oe,e=!1,Te,ke=0,Be=0){return createSimpleExpression(Oe,e,Te,ke)}function emitError(Oe,e,Te){currentOptions.onError(createCompilerError(Oe,getLoc(e,e)))}function reset$1(){tokenizer.reset(),currentOpenTag=null,currentProp=null,currentAttrValue="",currentAttrStartIndex=-1,currentAttrEndIndex=-1,stack.length=0}function baseParse(Oe,e){if(reset$1(),currentInput=Oe,currentOptions=extend$5({},defaultParserOptions),e){let Be;for(Be in e)e[Be]!=null&&(currentOptions[Be]=e[Be])}tokenizer.mode=currentOptions.parseMode==="html"?1:currentOptions.parseMode==="sfc"?2:0,tokenizer.inXML=currentOptions.ns===1||currentOptions.ns===2;const Te=e&&e.delimiters;Te&&(tokenizer.delimiterOpen=toCharCodes(Te[0]),tokenizer.delimiterClose=toCharCodes(Te[1]));const ke=currentRoot=createRoot([],Oe);return tokenizer.parse(currentInput),ke.loc=getLoc(0,Oe.length),ke.children=condenseWhitespace(ke.children),currentRoot=null,ke}function cacheStatic(Oe,e){walk(Oe,void 0,e,isSingleElementRoot(Oe,Oe.children[0]))}function isSingleElementRoot(Oe,e){const{children:Te}=Oe;return Te.length===1&&e.type===1&&!isSlotOutlet(e)}function walk(Oe,e,Te,ke=!1,Be=!1){const{children:Ue}=Oe,He=[];for(let An=0;An<Ue.length;An++){const Sn=Ue[An];if(Sn.type===1&&Sn.tagType===0){const Tn=ke?0:getConstantType(Sn,Te);if(Tn>0){if(Tn>=2){Sn.codegenNode.patchFlag=-1,He.push(Sn);continue}}else{const Ln=Sn.codegenNode;if(Ln.type===13){const Bn=Ln.patchFlag;if((Bn===void 0||Bn===512||Bn===1)&&getGeneratedPropsConstantType(Sn,Te)>=2){const ei=getNodeProps(Sn);ei&&(Ln.props=Te.hoist(ei))}Ln.dynamicProps&&(Ln.dynamicProps=Te.hoist(Ln.dynamicProps))}}}else if(Sn.type===12&&(ke?0:getConstantType(Sn,Te))>=2){He.push(Sn);continue}if(Sn.type===1){const Tn=Sn.tagType===1;Tn&&Te.scopes.vSlot++,walk(Sn,Oe,Te,!1,Be),Tn&&Te.scopes.vSlot--}else if(Sn.type===11)walk(Sn,Oe,Te,Sn.children.length===1,!0);else if(Sn.type===9)for(let Tn=0;Tn<Sn.branches.length;Tn++)walk(Sn.branches[Tn],Oe,Te,Sn.branches[Tn].children.length===1,Be)}let We=!1;if(He.length===Ue.length&&Oe.type===1){if(Oe.tagType===0&&Oe.codegenNode&&Oe.codegenNode.type===13&&isArray$1(Oe.codegenNode.children))Oe.codegenNode.children=Cn(createArrayExpression(Oe.codegenNode.children)),We=!0;else if(Oe.tagType===1&&Oe.codegenNode&&Oe.codegenNode.type===13&&Oe.codegenNode.children&&!isArray$1(Oe.codegenNode.children)&&Oe.codegenNode.children.type===15){const An=En(Oe.codegenNode,"default");An&&(An.returns=Cn(createArrayExpression(An.returns)),We=!0)}else if(Oe.tagType===3&&e&&e.type===1&&e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!isArray$1(e.codegenNode.children)&&e.codegenNode.children.type===15){const An=findDir(Oe,"slot",!0),Sn=An&&An.arg&&En(e.codegenNode,An.arg);Sn&&(Sn.returns=Cn(createArrayExpression(Sn.returns)),We=!0)}}if(!We)for(const An of He)An.codegenNode=Te.cache(An.codegenNode);function Cn(An){const Sn=Te.cache(An);return Be&&Te.hmr&&(Sn.needArraySpread=!0),Sn}function En(An,Sn){if(An.children&&!isArray$1(An.children)&&An.children.type===15){const Tn=An.children.properties.find(Ln=>Ln.key===Sn||Ln.key.content===Sn);return Tn&&Tn.value}}He.length&&Te.transformHoist&&Te.transformHoist(Ue,Te,Oe)}function getConstantType(Oe,e){const{constantCache:Te}=e;switch(Oe.type){case 1:if(Oe.tagType!==0)return 0;const ke=Te.get(Oe);if(ke!==void 0)return ke;const Be=Oe.codegenNode;if(Be.type!==13||Be.isBlock&&Oe.tag!=="svg"&&Oe.tag!=="foreignObject"&&Oe.tag!=="math")return 0;if(Be.patchFlag===void 0){let He=3;const We=getGeneratedPropsConstantType(Oe,e);if(We===0)return Te.set(Oe,0),0;We<He&&(He=We);for(let Cn=0;Cn<Oe.children.length;Cn++){const En=getConstantType(Oe.children[Cn],e);if(En===0)return Te.set(Oe,0),0;En<He&&(He=En)}if(He>1)for(let Cn=0;Cn<Oe.props.length;Cn++){const En=Oe.props[Cn];if(En.type===7&&En.name==="bind"&&En.exp){const An=getConstantType(En.exp,e);if(An===0)return Te.set(Oe,0),0;An<He&&(He=An)}}if(Be.isBlock){for(let Cn=0;Cn<Oe.props.length;Cn++)if(Oe.props[Cn].type===7)return Te.set(Oe,0),0;e.removeHelper(OPEN_BLOCK),e.removeHelper(getVNodeBlockHelper(e.inSSR,Be.isComponent)),Be.isBlock=!1,e.helper(getVNodeHelper(e.inSSR,Be.isComponent))}return Te.set(Oe,He),He}else return Te.set(Oe,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return getConstantType(Oe.content,e);case 4:return Oe.constType;case 8:let Ue=3;for(let He=0;He<Oe.children.length;He++){const We=Oe.children[He];if(isString(We)||isSymbol(We))continue;const Cn=getConstantType(We,e);if(Cn===0)return 0;Cn<Ue&&(Ue=Cn)}return Ue;case 20:return 2;default:return 0}}const allowHoistedHelperSet=new Set([NORMALIZE_CLASS,NORMALIZE_STYLE,NORMALIZE_PROPS,GUARD_REACTIVE_PROPS]);function getConstantTypeOfHelperCall(Oe,e){if(Oe.type===14&&!isString(Oe.callee)&&allowHoistedHelperSet.has(Oe.callee)){const Te=Oe.arguments[0];if(Te.type===4)return getConstantType(Te,e);if(Te.type===14)return getConstantTypeOfHelperCall(Te,e)}return 0}function getGeneratedPropsConstantType(Oe,e){let Te=3;const ke=getNodeProps(Oe);if(ke&&ke.type===15){const{properties:Be}=ke;for(let Ue=0;Ue<Be.length;Ue++){const{key:He,value:We}=Be[Ue],Cn=getConstantType(He,e);if(Cn===0)return Cn;Cn<Te&&(Te=Cn);let En;if(We.type===4?En=getConstantType(We,e):We.type===14?En=getConstantTypeOfHelperCall(We,e):En=0,En===0)return En;En<Te&&(Te=En)}}return Te}function getNodeProps(Oe){const e=Oe.codegenNode;if(e.type===13)return e.props}function createTransformContext(Oe,{filename:e="",prefixIdentifiers:Te=!1,hoistStatic:ke=!1,hmr:Be=!1,cacheHandlers:Ue=!1,nodeTransforms:He=[],directiveTransforms:We={},transformHoist:Cn=null,isBuiltInComponent:En=NOOP,isCustomElement:An=NOOP,expressionPlugins:Sn=[],scopeId:Tn=null,slotted:Ln=!0,ssr:Bn=!1,inSSR:ei=!1,ssrCssVars:ti="",bindingMetadata:ni=EMPTY_OBJ,inline:ri=!1,isTS:si=!1,onError:ai=defaultOnError,onWarn:li=defaultOnWarn,compatConfig:Pi}){const pi=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),vi={filename:e,selfName:pi&&capitalize(camelize(pi[1])),prefixIdentifiers:Te,hoistStatic:ke,hmr:Be,cacheHandlers:Ue,nodeTransforms:He,directiveTransforms:We,transformHoist:Cn,isBuiltInComponent:En,isCustomElement:An,expressionPlugins:Sn,scopeId:Tn,slotted:Ln,ssr:Bn,inSSR:ei,ssrCssVars:ti,bindingMetadata:ni,inline:ri,isTS:si,onError:ai,onWarn:li,compatConfig:Pi,root:Oe,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:Oe,childIndex:0,inVOnce:!1,helper(Ri){const Fi=vi.helpers.get(Ri)||0;return vi.helpers.set(Ri,Fi+1),Ri},removeHelper(Ri){const Fi=vi.helpers.get(Ri);if(Fi){const di=Fi-1;di?vi.helpers.set(Ri,di):vi.helpers.delete(Ri)}},helperString(Ri){return`_${helperNameMap[vi.helper(Ri)]}`},replaceNode(Ri){vi.parent.children[vi.childIndex]=vi.currentNode=Ri},removeNode(Ri){const Fi=vi.parent.children,di=Ri?Fi.indexOf(Ri):vi.currentNode?vi.childIndex:-1;!Ri||Ri===vi.currentNode?(vi.currentNode=null,vi.onNodeRemoved()):vi.childIndex>di&&(vi.childIndex--,vi.onNodeRemoved()),vi.parent.children.splice(di,1)},onNodeRemoved:NOOP,addIdentifiers(Ri){},removeIdentifiers(Ri){},hoist(Ri){isString(Ri)&&(Ri=createSimpleExpression(Ri)),vi.hoists.push(Ri);const Fi=createSimpleExpression(`_hoisted_${vi.hoists.length}`,!1,Ri.loc,2);return Fi.hoisted=Ri,Fi},cache(Ri,Fi=!1,di=!1){const ci=createCacheExpression(vi.cached.length,Ri,Fi,di);return vi.cached.push(ci),ci}};return vi.filters=new Set,vi}function transform$2(Oe,e){const Te=createTransformContext(Oe,e);traverseNode(Oe,Te),e.hoistStatic&&cacheStatic(Oe,Te),e.ssr||createRootCodegen(Oe,Te),Oe.helpers=new Set([...Te.helpers.keys()]),Oe.components=[...Te.components],Oe.directives=[...Te.directives],Oe.imports=Te.imports,Oe.hoists=Te.hoists,Oe.temps=Te.temps,Oe.cached=Te.cached,Oe.transformed=!0,Oe.filters=[...Te.filters]}function createRootCodegen(Oe,e){const{helper:Te}=e,{children:ke}=Oe;if(ke.length===1){const Be=ke[0];if(isSingleElementRoot(Oe,Be)&&Be.codegenNode){const Ue=Be.codegenNode;Ue.type===13&&convertToBlock(Ue,e),Oe.codegenNode=Ue}else Oe.codegenNode=Be}else if(ke.length>1){let Be=64;Oe.codegenNode=createVNodeCall(e,Te(FRAGMENT),void 0,Oe.children,Be,void 0,void 0,!0,void 0,!1)}}function traverseChildren(Oe,e){let Te=0;const ke=()=>{Te--};for(;Te<Oe.children.length;Te++){const Be=Oe.children[Te];isString(Be)||(e.grandParent=e.parent,e.parent=Oe,e.childIndex=Te,e.onNodeRemoved=ke,traverseNode(Be,e))}}function traverseNode(Oe,e){e.currentNode=Oe;const{nodeTransforms:Te}=e,ke=[];for(let Ue=0;Ue<Te.length;Ue++){const He=Te[Ue](Oe,e);if(He&&(isArray$1(He)?ke.push(...He):ke.push(He)),e.currentNode)Oe=e.currentNode;else return}switch(Oe.type){case 3:e.ssr||e.helper(CREATE_COMMENT);break;case 5:e.ssr||e.helper(TO_DISPLAY_STRING);break;case 9:for(let Ue=0;Ue<Oe.branches.length;Ue++)traverseNode(Oe.branches[Ue],e);break;case 10:case 11:case 1:case 0:traverseChildren(Oe,e);break}e.currentNode=Oe;let Be=ke.length;for(;Be--;)ke[Be]()}function createStructuralDirectiveTransform(Oe,e){const Te=isString(Oe)?ke=>ke===Oe:ke=>Oe.test(ke);return(ke,Be)=>{if(ke.type===1){const{props:Ue}=ke;if(ke.tagType===3&&Ue.some(isVSlot))return;const He=[];for(let We=0;We<Ue.length;We++){const Cn=Ue[We];if(Cn.type===7&&Te(Cn.name)){Ue.splice(We,1),We--;const En=e(ke,Cn,Be);En&&He.push(En)}}return He}}}const PURE_ANNOTATION="/*@__PURE__*/",aliasHelper=Oe=>`${helperNameMap[Oe]}: _${helperNameMap[Oe]}`;function createCodegenContext(Oe,{mode:e="function",prefixIdentifiers:Te=e==="module",sourceMap:ke=!1,filename:Be="template.vue.html",scopeId:Ue=null,optimizeImports:He=!1,runtimeGlobalName:We="Vue",runtimeModuleName:Cn="vue",ssrRuntimeModuleName:En="vue/server-renderer",ssr:An=!1,isTS:Sn=!1,inSSR:Tn=!1}){const Ln={mode:e,prefixIdentifiers:Te,sourceMap:ke,filename:Be,scopeId:Ue,optimizeImports:He,runtimeGlobalName:We,runtimeModuleName:Cn,ssrRuntimeModuleName:En,ssr:An,isTS:Sn,inSSR:Tn,source:Oe.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(ei){return`_${helperNameMap[ei]}`},push(ei,ti=-2,ni){Ln.code+=ei},indent(){Bn(++Ln.indentLevel)},deindent(ei=!1){ei?--Ln.indentLevel:Bn(--Ln.indentLevel)},newline(){Bn(Ln.indentLevel)}};function Bn(ei){Ln.push(`
`+"  ".repeat(ei),0)}return Ln}function generate(Oe,e={}){const Te=createCodegenContext(Oe,e);e.onContextCreated&&e.onContextCreated(Te);const{mode:ke,push:Be,prefixIdentifiers:Ue,indent:He,deindent:We,newline:Cn,scopeId:En,ssr:An}=Te,Sn=Array.from(Oe.helpers),Tn=Sn.length>0,Ln=!Ue&&ke!=="module";genFunctionPreamble(Oe,Te);const ei=An?"ssrRender":"render",ni=(An?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(Be(`function ${ei}(${ni}) {`),He(),Ln&&(Be("with (_ctx) {"),He(),Tn&&(Be(`const { ${Sn.map(aliasHelper).join(", ")} } = _Vue
`,-1),Cn())),Oe.components.length&&(genAssets(Oe.components,"component",Te),(Oe.directives.length||Oe.temps>0)&&Cn()),Oe.directives.length&&(genAssets(Oe.directives,"directive",Te),Oe.temps>0&&Cn()),Oe.filters&&Oe.filters.length&&(Cn(),genAssets(Oe.filters,"filter",Te),Cn()),Oe.temps>0){Be("let ");for(let ri=0;ri<Oe.temps;ri++)Be(`${ri>0?", ":""}_temp${ri}`)}return(Oe.components.length||Oe.directives.length||Oe.temps)&&(Be(`
`,0),Cn()),An||Be("return "),Oe.codegenNode?genNode(Oe.codegenNode,Te):Be("null"),Ln&&(We(),Be("}")),We(),Be("}"),{ast:Oe,code:Te.code,preamble:"",map:Te.map?Te.map.toJSON():void 0}}function genFunctionPreamble(Oe,e){const{ssr:Te,prefixIdentifiers:ke,push:Be,newline:Ue,runtimeModuleName:He,runtimeGlobalName:We,ssrRuntimeModuleName:Cn}=e,En=We,An=Array.from(Oe.helpers);if(An.length>0&&(Be(`const _Vue = ${En}
`,-1),Oe.hoists.length)){const Sn=[CREATE_VNODE,CREATE_ELEMENT_VNODE,CREATE_COMMENT,CREATE_TEXT,CREATE_STATIC].filter(Tn=>An.includes(Tn)).map(aliasHelper).join(", ");Be(`const { ${Sn} } = _Vue
`,-1)}genHoists(Oe.hoists,e),Ue(),Be("return ")}function genAssets(Oe,e,{helper:Te,push:ke,newline:Be,isTS:Ue}){const He=Te(e==="filter"?RESOLVE_FILTER:e==="component"?RESOLVE_COMPONENT:RESOLVE_DIRECTIVE);for(let We=0;We<Oe.length;We++){let Cn=Oe[We];const En=Cn.endsWith("__self");En&&(Cn=Cn.slice(0,-6)),ke(`const ${toValidAssetId(Cn,e)} = ${He}(${JSON.stringify(Cn)}${En?", true":""})${Ue?"!":""}`),We<Oe.length-1&&Be()}}function genHoists(Oe,e){if(!Oe.length)return;e.pure=!0;const{push:Te,newline:ke}=e;ke();for(let Be=0;Be<Oe.length;Be++){const Ue=Oe[Be];Ue&&(Te(`const _hoisted_${Be+1} = `),genNode(Ue,e),ke())}e.pure=!1}function genNodeListAsArray(Oe,e){const Te=Oe.length>3||!1;e.push("["),Te&&e.indent(),genNodeList(Oe,e,Te),Te&&e.deindent(),e.push("]")}function genNodeList(Oe,e,Te=!1,ke=!0){const{push:Be,newline:Ue}=e;for(let He=0;He<Oe.length;He++){const We=Oe[He];isString(We)?Be(We,-3):isArray$1(We)?genNodeListAsArray(We,e):genNode(We,e),He<Oe.length-1&&(Te?(ke&&Be(","),Ue()):ke&&Be(", "))}}function genNode(Oe,e){if(isString(Oe)){e.push(Oe,-3);return}if(isSymbol(Oe)){e.push(e.helper(Oe));return}switch(Oe.type){case 1:case 9:case 11:genNode(Oe.codegenNode,e);break;case 2:genText(Oe,e);break;case 4:genExpression(Oe,e);break;case 5:genInterpolation(Oe,e);break;case 12:genNode(Oe.codegenNode,e);break;case 8:genCompoundExpression(Oe,e);break;case 3:genComment(Oe,e);break;case 13:genVNodeCall(Oe,e);break;case 14:genCallExpression(Oe,e);break;case 15:genObjectExpression(Oe,e);break;case 17:genArrayExpression(Oe,e);break;case 18:genFunctionExpression(Oe,e);break;case 19:genConditionalExpression(Oe,e);break;case 20:genCacheExpression(Oe,e);break;case 21:genNodeList(Oe.body,e,!0,!1);break}}function genText(Oe,e){e.push(JSON.stringify(Oe.content),-3,Oe)}function genExpression(Oe,e){const{content:Te,isStatic:ke}=Oe;e.push(ke?JSON.stringify(Te):Te,-3,Oe)}function genInterpolation(Oe,e){const{push:Te,helper:ke,pure:Be}=e;Be&&Te(PURE_ANNOTATION),Te(`${ke(TO_DISPLAY_STRING)}(`),genNode(Oe.content,e),Te(")")}function genCompoundExpression(Oe,e){for(let Te=0;Te<Oe.children.length;Te++){const ke=Oe.children[Te];isString(ke)?e.push(ke,-3):genNode(ke,e)}}function genExpressionAsPropertyKey(Oe,e){const{push:Te}=e;if(Oe.type===8)Te("["),genCompoundExpression(Oe,e),Te("]");else if(Oe.isStatic){const ke=isSimpleIdentifier(Oe.content)?Oe.content:JSON.stringify(Oe.content);Te(ke,-2,Oe)}else Te(`[${Oe.content}]`,-3,Oe)}function genComment(Oe,e){const{push:Te,helper:ke,pure:Be}=e;Be&&Te(PURE_ANNOTATION),Te(`${ke(CREATE_COMMENT)}(${JSON.stringify(Oe.content)})`,-3,Oe)}function genVNodeCall(Oe,e){const{push:Te,helper:ke,pure:Be}=e,{tag:Ue,props:He,children:We,patchFlag:Cn,dynamicProps:En,directives:An,isBlock:Sn,disableTracking:Tn,isComponent:Ln}=Oe;let Bn;Cn&&(Bn=String(Cn)),An&&Te(ke(WITH_DIRECTIVES)+"("),Sn&&Te(`(${ke(OPEN_BLOCK)}(${Tn?"true":""}), `),Be&&Te(PURE_ANNOTATION);const ei=Sn?getVNodeBlockHelper(e.inSSR,Ln):getVNodeHelper(e.inSSR,Ln);Te(ke(ei)+"(",-2,Oe),genNodeList(genNullableArgs([Ue,He,We,Bn,En]),e),Te(")"),Sn&&Te(")"),An&&(Te(", "),genNode(An,e),Te(")"))}function genNullableArgs(Oe){let e=Oe.length;for(;e--&&Oe[e]==null;);return Oe.slice(0,e+1).map(Te=>Te||"null")}function genCallExpression(Oe,e){const{push:Te,helper:ke,pure:Be}=e,Ue=isString(Oe.callee)?Oe.callee:ke(Oe.callee);Be&&Te(PURE_ANNOTATION),Te(Ue+"(",-2,Oe),genNodeList(Oe.arguments,e),Te(")")}function genObjectExpression(Oe,e){const{push:Te,indent:ke,deindent:Be,newline:Ue}=e,{properties:He}=Oe;if(!He.length){Te("{}",-2,Oe);return}const We=He.length>1||!1;Te(We?"{":"{ "),We&&ke();for(let Cn=0;Cn<He.length;Cn++){const{key:En,value:An}=He[Cn];genExpressionAsPropertyKey(En,e),Te(": "),genNode(An,e),Cn<He.length-1&&(Te(","),Ue())}We&&Be(),Te(We?"}":" }")}function genArrayExpression(Oe,e){genNodeListAsArray(Oe.elements,e)}function genFunctionExpression(Oe,e){const{push:Te,indent:ke,deindent:Be}=e,{params:Ue,returns:He,body:We,newline:Cn,isSlot:En}=Oe;En&&Te(`_${helperNameMap[WITH_CTX]}(`),Te("(",-2,Oe),isArray$1(Ue)?genNodeList(Ue,e):Ue&&genNode(Ue,e),Te(") => "),(Cn||We)&&(Te("{"),ke()),He?(Cn&&Te("return "),isArray$1(He)?genNodeListAsArray(He,e):genNode(He,e)):We&&genNode(We,e),(Cn||We)&&(Be(),Te("}")),En&&(Oe.isNonScopedSlot&&Te(", undefined, true"),Te(")"))}function genConditionalExpression(Oe,e){const{test:Te,consequent:ke,alternate:Be,newline:Ue}=Oe,{push:He,indent:We,deindent:Cn,newline:En}=e;if(Te.type===4){const Sn=!isSimpleIdentifier(Te.content);Sn&&He("("),genExpression(Te,e),Sn&&He(")")}else He("("),genNode(Te,e),He(")");Ue&&We(),e.indentLevel++,Ue||He(" "),He("? "),genNode(ke,e),e.indentLevel--,Ue&&En(),Ue||He(" "),He(": ");const An=Be.type===19;An||e.indentLevel++,genNode(Be,e),An||e.indentLevel--,Ue&&Cn(!0)}function genCacheExpression(Oe,e){const{push:Te,helper:ke,indent:Be,deindent:Ue,newline:He}=e,{needPauseTracking:We,needArraySpread:Cn}=Oe;Cn&&Te("[...("),Te(`_cache[${Oe.index}] || (`),We&&(Be(),Te(`${ke(SET_BLOCK_TRACKING)}(-1`),Oe.inVOnce&&Te(", true"),Te("),"),He(),Te("(")),Te(`_cache[${Oe.index}] = `),genNode(Oe.value,e),We&&(Te(`).cacheIndex = ${Oe.index},`),He(),Te(`${ke(SET_BLOCK_TRACKING)}(1),`),He(),Te(`_cache[${Oe.index}]`),Ue()),Te(")"),Cn&&Te(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const transformExpression=(Oe,e)=>{if(Oe.type===5)Oe.content=processExpression(Oe.content,e);else if(Oe.type===1){const Te=findDir(Oe,"memo");for(let ke=0;ke<Oe.props.length;ke++){const Be=Oe.props[ke];if(Be.type===7&&Be.name!=="for"){const Ue=Be.exp,He=Be.arg;Ue&&Ue.type===4&&!(Be.name==="on"&&He)&&!(Te&&He&&He.type===4&&He.content==="key")&&(Be.exp=processExpression(Ue,e,Be.name==="slot")),He&&He.type===4&&!He.isStatic&&(Be.arg=processExpression(He,e))}}}};function processExpression(Oe,e,Te=!1,ke=!1,Be=Object.create(e.identifiers)){return Oe}function stringifyExpression(Oe){return isString(Oe)?Oe:Oe.type===4?Oe.content:Oe.children.map(stringifyExpression).join("")}const transformIf=createStructuralDirectiveTransform(/^(if|else|else-if)$/,(Oe,e,Te)=>processIf(Oe,e,Te,(ke,Be,Ue)=>{const He=Te.parent.children;let We=He.indexOf(ke),Cn=0;for(;We-->=0;){const En=He[We];En&&En.type===9&&(Cn+=En.branches.length)}return()=>{if(Ue)ke.codegenNode=createCodegenNodeForBranch(Be,Cn,Te);else{const En=getParentCondition(ke.codegenNode);En.alternate=createCodegenNodeForBranch(Be,Cn+ke.branches.length-1,Te)}}}));function processIf(Oe,e,Te,ke){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const Be=e.exp?e.exp.loc:Oe.loc;Te.onError(createCompilerError(28,e.loc)),e.exp=createSimpleExpression("true",!1,Be)}if(e.name==="if"){const Be=createIfBranch(Oe,e),Ue={type:9,loc:cloneLoc(Oe.loc),branches:[Be]};if(Te.replaceNode(Ue),ke)return ke(Ue,Be,!0)}else{const Be=Te.parent.children;let Ue=Be.indexOf(Oe);for(;Ue-->=-1;){const He=Be[Ue];if(He&&He.type===3){Te.removeNode(He);continue}if(He&&He.type===2&&!He.content.trim().length){Te.removeNode(He);continue}if(He&&He.type===9){e.name==="else-if"&&He.branches[He.branches.length-1].condition===void 0&&Te.onError(createCompilerError(30,Oe.loc)),Te.removeNode();const We=createIfBranch(Oe,e);He.branches.push(We);const Cn=ke&&ke(He,We,!1);traverseNode(We,Te),Cn&&Cn(),Te.currentNode=null}else Te.onError(createCompilerError(30,Oe.loc));break}}}function createIfBranch(Oe,e){const Te=Oe.tagType===3;return{type:10,loc:Oe.loc,condition:e.name==="else"?void 0:e.exp,children:Te&&!findDir(Oe,"for")?Oe.children:[Oe],userKey:findProp(Oe,"key"),isTemplateIf:Te}}function createCodegenNodeForBranch(Oe,e,Te){return Oe.condition?createConditionalExpression(Oe.condition,createChildrenCodegenNode(Oe,e,Te),createCallExpression(Te.helper(CREATE_COMMENT),['""',"true"])):createChildrenCodegenNode(Oe,e,Te)}function createChildrenCodegenNode(Oe,e,Te){const{helper:ke}=Te,Be=createObjectProperty("key",createSimpleExpression(`${e}`,!1,locStub,2)),{children:Ue}=Oe,He=Ue[0];if(Ue.length!==1||He.type!==1)if(Ue.length===1&&He.type===11){const Cn=He.codegenNode;return injectProp(Cn,Be,Te),Cn}else return createVNodeCall(Te,ke(FRAGMENT),createObjectExpression([Be]),Ue,64,void 0,void 0,!0,!1,!1,Oe.loc);else{const Cn=He.codegenNode,En=getMemoedVNodeCall(Cn);return En.type===13&&convertToBlock(En,Te),injectProp(En,Be,Te),Cn}}function getParentCondition(Oe){for(;;)if(Oe.type===19)if(Oe.alternate.type===19)Oe=Oe.alternate;else return Oe;else Oe.type===20&&(Oe=Oe.value)}const transformBind=(Oe,e,Te)=>{const{modifiers:ke,loc:Be}=Oe,Ue=Oe.arg;let{exp:He}=Oe;if(He&&He.type===4&&!He.content.trim()&&(He=void 0),!He){if(Ue.type!==4||!Ue.isStatic)return Te.onError(createCompilerError(52,Ue.loc)),{props:[createObjectProperty(Ue,createSimpleExpression("",!0,Be))]};transformBindShorthand(Oe),He=Oe.exp}return Ue.type!==4?(Ue.children.unshift("("),Ue.children.push(') || ""')):Ue.isStatic||(Ue.content=`${Ue.content} || ""`),ke.some(We=>We.content==="camel")&&(Ue.type===4?Ue.isStatic?Ue.content=camelize(Ue.content):Ue.content=`${Te.helperString(CAMELIZE)}(${Ue.content})`:(Ue.children.unshift(`${Te.helperString(CAMELIZE)}(`),Ue.children.push(")"))),Te.inSSR||(ke.some(We=>We.content==="prop")&&injectPrefix(Ue,"."),ke.some(We=>We.content==="attr")&&injectPrefix(Ue,"^")),{props:[createObjectProperty(Ue,He)]}},transformBindShorthand=(Oe,e)=>{const Te=Oe.arg,ke=camelize(Te.content);Oe.exp=createSimpleExpression(ke,!1,Te.loc)},injectPrefix=(Oe,e)=>{Oe.type===4?Oe.isStatic?Oe.content=e+Oe.content:Oe.content=`\`${e}\${${Oe.content}}\``:(Oe.children.unshift(`'${e}' + (`),Oe.children.push(")"))},transformFor=createStructuralDirectiveTransform("for",(Oe,e,Te)=>{const{helper:ke,removeHelper:Be}=Te;return processFor(Oe,e,Te,Ue=>{const He=createCallExpression(ke(RENDER_LIST),[Ue.source]),We=isTemplateNode(Oe),Cn=findDir(Oe,"memo"),En=findProp(Oe,"key",!1,!0);En&&En.type===7&&!En.exp&&transformBindShorthand(En);let Sn=En&&(En.type===6?En.value?createSimpleExpression(En.value.content,!0):void 0:En.exp);const Tn=En&&Sn?createObjectProperty("key",Sn):null,Ln=Ue.source.type===4&&Ue.source.constType>0,Bn=Ln?64:En?128:256;return Ue.codegenNode=createVNodeCall(Te,ke(FRAGMENT),void 0,He,Bn,void 0,void 0,!0,!Ln,!1,Oe.loc),()=>{let ei;const{children:ti}=Ue,ni=ti.length!==1||ti[0].type!==1,ri=isSlotOutlet(Oe)?Oe:We&&Oe.children.length===1&&isSlotOutlet(Oe.children[0])?Oe.children[0]:null;if(ri?(ei=ri.codegenNode,We&&Tn&&injectProp(ei,Tn,Te)):ni?ei=createVNodeCall(Te,ke(FRAGMENT),Tn?createObjectExpression([Tn]):void 0,Oe.children,64,void 0,void 0,!0,void 0,!1):(ei=ti[0].codegenNode,We&&Tn&&injectProp(ei,Tn,Te),ei.isBlock!==!Ln&&(ei.isBlock?(Be(OPEN_BLOCK),Be(getVNodeBlockHelper(Te.inSSR,ei.isComponent))):Be(getVNodeHelper(Te.inSSR,ei.isComponent))),ei.isBlock=!Ln,ei.isBlock?(ke(OPEN_BLOCK),ke(getVNodeBlockHelper(Te.inSSR,ei.isComponent))):ke(getVNodeHelper(Te.inSSR,ei.isComponent))),Cn){const si=createFunctionExpression(createForLoopParams(Ue.parseResult,[createSimpleExpression("_cached")]));si.body=createBlockStatement([createCompoundExpression(["const _memo = (",Cn.exp,")"]),createCompoundExpression(["if (_cached",...Sn?[" && _cached.key === ",Sn]:[],` && ${Te.helperString(IS_MEMO_SAME)}(_cached, _memo)) return _cached`]),createCompoundExpression(["const _item = ",ei]),createSimpleExpression("_item.memo = _memo"),createSimpleExpression("return _item")]),He.arguments.push(si,createSimpleExpression("_cache"),createSimpleExpression(String(Te.cached.length))),Te.cached.push(null)}else He.arguments.push(createFunctionExpression(createForLoopParams(Ue.parseResult),ei,!0))}})});function processFor(Oe,e,Te,ke){if(!e.exp){Te.onError(createCompilerError(31,e.loc));return}const Be=e.forParseResult;if(!Be){Te.onError(createCompilerError(32,e.loc));return}finalizeForParseResult(Be);const{addIdentifiers:Ue,removeIdentifiers:He,scopes:We}=Te,{source:Cn,value:En,key:An,index:Sn}=Be,Tn={type:11,loc:e.loc,source:Cn,valueAlias:En,keyAlias:An,objectIndexAlias:Sn,parseResult:Be,children:isTemplateNode(Oe)?Oe.children:[Oe]};Te.replaceNode(Tn),We.vFor++;const Ln=ke&&ke(Tn);return()=>{We.vFor--,Ln&&Ln()}}function finalizeForParseResult(Oe,e){Oe.finalized||(Oe.finalized=!0)}function createForLoopParams({value:Oe,key:e,index:Te},ke=[]){return createParamsList([Oe,e,Te,...ke])}function createParamsList(Oe){let e=Oe.length;for(;e--&&!Oe[e];);return Oe.slice(0,e+1).map((Te,ke)=>Te||createSimpleExpression("_".repeat(ke+1),!1))}const defaultFallback=createSimpleExpression("undefined",!1),trackSlotScopes=(Oe,e)=>{if(Oe.type===1&&(Oe.tagType===1||Oe.tagType===3)){const Te=findDir(Oe,"slot");if(Te)return Te.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},trackVForSlotScopes=(Oe,e)=>{let Te;if(isTemplateNode(Oe)&&Oe.props.some(isVSlot)&&(Te=findDir(Oe,"for"))){const ke=Te.forParseResult;if(ke){finalizeForParseResult(ke);const{value:Be,key:Ue,index:He}=ke,{addIdentifiers:We,removeIdentifiers:Cn}=e;return Be&&We(Be),Ue&&We(Ue),He&&We(He),()=>{Be&&Cn(Be),Ue&&Cn(Ue),He&&Cn(He)}}}},buildClientSlotFn=(Oe,e,Te,ke)=>createFunctionExpression(Oe,Te,!1,!0,Te.length?Te[0].loc:ke);function buildSlots(Oe,e,Te=buildClientSlotFn){e.helper(WITH_CTX);const{children:ke,loc:Be}=Oe,Ue=[],He=[];let We=e.scopes.vSlot>0||e.scopes.vFor>0;const Cn=findDir(Oe,"slot",!0);if(Cn){const{arg:ti,exp:ni}=Cn;ti&&!isStaticExp(ti)&&(We=!0),Ue.push(createObjectProperty(ti||createSimpleExpression("default",!0),Te(ni,void 0,ke,Be)))}let En=!1,An=!1;const Sn=[],Tn=new Set;let Ln=0;for(let ti=0;ti<ke.length;ti++){const ni=ke[ti];let ri;if(!isTemplateNode(ni)||!(ri=findDir(ni,"slot",!0))){ni.type!==3&&Sn.push(ni);continue}if(Cn){e.onError(createCompilerError(37,ri.loc));break}En=!0;const{children:si,loc:ai}=ni,{arg:li=createSimpleExpression("default",!0),exp:Pi,loc:pi}=ri;let vi;isStaticExp(li)?vi=li?li.content:"default":We=!0;const Ri=findDir(ni,"for"),Fi=Te(Pi,Ri,si,ai);let di,ci;if(di=findDir(ni,"if"))We=!0,He.push(createConditionalExpression(di.exp,buildDynamicSlot(li,Fi,Ln++),defaultFallback));else if(ci=findDir(ni,/^else(-if)?$/,!0)){let Mi=ti,Oi;for(;Mi--&&(Oi=ke[Mi],Oi.type===3););if(Oi&&isTemplateNode(Oi)&&findDir(Oi,/^(else-)?if$/)){let Hi=He[He.length-1];for(;Hi.alternate.type===19;)Hi=Hi.alternate;Hi.alternate=ci.exp?createConditionalExpression(ci.exp,buildDynamicSlot(li,Fi,Ln++),defaultFallback):buildDynamicSlot(li,Fi,Ln++)}else e.onError(createCompilerError(30,ci.loc))}else if(Ri){We=!0;const Mi=Ri.forParseResult;Mi?(finalizeForParseResult(Mi),He.push(createCallExpression(e.helper(RENDER_LIST),[Mi.source,createFunctionExpression(createForLoopParams(Mi),buildDynamicSlot(li,Fi),!0)]))):e.onError(createCompilerError(32,Ri.loc))}else{if(vi){if(Tn.has(vi)){e.onError(createCompilerError(38,pi));continue}Tn.add(vi),vi==="default"&&(An=!0)}Ue.push(createObjectProperty(li,Fi))}}if(!Cn){const ti=(ni,ri)=>{const si=Te(ni,void 0,ri,Be);return e.compatConfig&&(si.isNonScopedSlot=!0),createObjectProperty("default",si)};En?Sn.length&&Sn.some(ni=>isNonWhitespaceContent(ni))&&(An?e.onError(createCompilerError(39,Sn[0].loc)):Ue.push(ti(void 0,Sn))):Ue.push(ti(void 0,ke))}const Bn=We?2:hasForwardedSlots(Oe.children)?3:1;let ei=createObjectExpression(Ue.concat(createObjectProperty("_",createSimpleExpression(Bn+"",!1))),Be);return He.length&&(ei=createCallExpression(e.helper(CREATE_SLOTS),[ei,createArrayExpression(He)])),{slots:ei,hasDynamicSlots:We}}function buildDynamicSlot(Oe,e,Te){const ke=[createObjectProperty("name",Oe),createObjectProperty("fn",e)];return Te!=null&&ke.push(createObjectProperty("key",createSimpleExpression(String(Te),!0))),createObjectExpression(ke)}function hasForwardedSlots(Oe){for(let e=0;e<Oe.length;e++){const Te=Oe[e];switch(Te.type){case 1:if(Te.tagType===2||hasForwardedSlots(Te.children))return!0;break;case 9:if(hasForwardedSlots(Te.branches))return!0;break;case 10:case 11:if(hasForwardedSlots(Te.children))return!0;break}}return!1}function isNonWhitespaceContent(Oe){return Oe.type!==2&&Oe.type!==12?!0:Oe.type===2?!!Oe.content.trim():isNonWhitespaceContent(Oe.content)}const directiveImportMap=new WeakMap,transformElement=(Oe,e)=>function(){if(Oe=e.currentNode,!(Oe.type===1&&(Oe.tagType===0||Oe.tagType===1)))return;const{tag:ke,props:Be}=Oe,Ue=Oe.tagType===1;let He=Ue?resolveComponentType(Oe,e):`"${ke}"`;const We=isObject$1(He)&&He.callee===RESOLVE_DYNAMIC_COMPONENT;let Cn,En,An=0,Sn,Tn,Ln,Bn=We||He===TELEPORT||He===SUSPENSE||!Ue&&(ke==="svg"||ke==="foreignObject"||ke==="math");if(Be.length>0){const ei=buildProps(Oe,e,void 0,Ue,We);Cn=ei.props,An=ei.patchFlag,Tn=ei.dynamicPropNames;const ti=ei.directives;Ln=ti&&ti.length?createArrayExpression(ti.map(ni=>buildDirectiveArgs(ni,e))):void 0,ei.shouldUseBlock&&(Bn=!0)}if(Oe.children.length>0)if(He===KEEP_ALIVE&&(Bn=!0,An|=1024),Ue&&He!==TELEPORT&&He!==KEEP_ALIVE){const{slots:ti,hasDynamicSlots:ni}=buildSlots(Oe,e);En=ti,ni&&(An|=1024)}else if(Oe.children.length===1&&He!==TELEPORT){const ti=Oe.children[0],ni=ti.type,ri=ni===5||ni===8;ri&&getConstantType(ti,e)===0&&(An|=1),ri||ni===2?En=ti:En=Oe.children}else En=Oe.children;Tn&&Tn.length&&(Sn=stringifyDynamicPropNames(Tn)),Oe.codegenNode=createVNodeCall(e,He,Cn,En,An===0?void 0:An,Sn,Ln,!!Bn,!1,Ue,Oe.loc)};function resolveComponentType(Oe,e,Te=!1){let{tag:ke}=Oe;const Be=isComponentTag(ke),Ue=findProp(Oe,"is",!1,!0);if(Ue)if(Be||isCompatEnabled("COMPILER_IS_ON_ELEMENT",e)){let We;if(Ue.type===6?We=Ue.value&&createSimpleExpression(Ue.value.content,!0):(We=Ue.exp,We||(We=createSimpleExpression("is",!1,Ue.arg.loc))),We)return createCallExpression(e.helper(RESOLVE_DYNAMIC_COMPONENT),[We])}else Ue.type===6&&Ue.value.content.startsWith("vue:")&&(ke=Ue.value.content.slice(4));const He=isCoreComponent(ke)||e.isBuiltInComponent(ke);return He?(Te||e.helper(He),He):(e.helper(RESOLVE_COMPONENT),e.components.add(ke),toValidAssetId(ke,"component"))}function buildProps(Oe,e,Te=Oe.props,ke,Be,Ue=!1){const{tag:He,loc:We,children:Cn}=Oe;let En=[];const An=[],Sn=[],Tn=Cn.length>0;let Ln=!1,Bn=0,ei=!1,ti=!1,ni=!1,ri=!1,si=!1,ai=!1;const li=[],Pi=Fi=>{En.length&&(An.push(createObjectExpression(dedupeProperties(En),We)),En=[]),Fi&&An.push(Fi)},pi=()=>{e.scopes.vFor>0&&En.push(createObjectProperty(createSimpleExpression("ref_for",!0),createSimpleExpression("true")))},vi=({key:Fi,value:di})=>{if(isStaticExp(Fi)){const ci=Fi.content,Mi=isOn(ci);if(Mi&&(!ke||Be)&&ci.toLowerCase()!=="onclick"&&ci!=="onUpdate:modelValue"&&!isReservedProp(ci)&&(ri=!0),Mi&&isReservedProp(ci)&&(ai=!0),Mi&&di.type===14&&(di=di.arguments[0]),di.type===20||(di.type===4||di.type===8)&&getConstantType(di,e)>0)return;ci==="ref"?ei=!0:ci==="class"?ti=!0:ci==="style"?ni=!0:ci!=="key"&&!li.includes(ci)&&li.push(ci),ke&&(ci==="class"||ci==="style")&&!li.includes(ci)&&li.push(ci)}else si=!0};for(let Fi=0;Fi<Te.length;Fi++){const di=Te[Fi];if(di.type===6){const{loc:ci,name:Mi,nameLoc:Oi,value:Hi}=di;let Ki=!0;if(Mi==="ref"&&(ei=!0,pi()),Mi==="is"&&(isComponentTag(He)||Hi&&Hi.content.startsWith("vue:")||isCompatEnabled("COMPILER_IS_ON_ELEMENT",e)))continue;En.push(createObjectProperty(createSimpleExpression(Mi,!0,Oi),createSimpleExpression(Hi?Hi.content:"",Ki,Hi?Hi.loc:ci)))}else{const{name:ci,arg:Mi,exp:Oi,loc:Hi,modifiers:Ki}=di,or=ci==="bind",sr=ci==="on";if(ci==="slot"){ke||e.onError(createCompilerError(40,Hi));continue}if(ci==="once"||ci==="memo"||ci==="is"||or&&isStaticArgOf(Mi,"is")&&(isComponentTag(He)||isCompatEnabled("COMPILER_IS_ON_ELEMENT",e))||sr&&Ue)continue;if((or&&isStaticArgOf(Mi,"key")||sr&&Tn&&isStaticArgOf(Mi,"vue:before-update"))&&(Ln=!0),or&&isStaticArgOf(Mi,"ref")&&pi(),!Mi&&(or||sr)){if(si=!0,Oi)if(or){if(pi(),Pi(),isCompatEnabled("COMPILER_V_BIND_OBJECT_ORDER",e)){An.unshift(Oi);continue}An.push(Oi)}else Pi({type:14,loc:Hi,callee:e.helper(TO_HANDLERS),arguments:ke?[Oi]:[Oi,"true"]});else e.onError(createCompilerError(or?34:35,Hi));continue}or&&Ki.some(pr=>pr.content==="prop")&&(Bn|=32);const Cr=e.directiveTransforms[ci];if(Cr){const{props:pr,needRuntime:wr}=Cr(di,Oe,e);!Ue&&pr.forEach(vi),sr&&Mi&&!isStaticExp(Mi)?Pi(createObjectExpression(pr,We)):En.push(...pr),wr&&(Sn.push(di),isSymbol(wr)&&directiveImportMap.set(di,wr))}else isBuiltInDirective(ci)||(Sn.push(di),Tn&&(Ln=!0))}}let Ri;if(An.length?(Pi(),An.length>1?Ri=createCallExpression(e.helper(MERGE_PROPS),An,We):Ri=An[0]):En.length&&(Ri=createObjectExpression(dedupeProperties(En),We)),si?Bn|=16:(ti&&!ke&&(Bn|=2),ni&&!ke&&(Bn|=4),li.length&&(Bn|=8),ri&&(Bn|=32)),!Ln&&(Bn===0||Bn===32)&&(ei||ai||Sn.length>0)&&(Bn|=512),!e.inSSR&&Ri)switch(Ri.type){case 15:let Fi=-1,di=-1,ci=!1;for(let Hi=0;Hi<Ri.properties.length;Hi++){const Ki=Ri.properties[Hi].key;isStaticExp(Ki)?Ki.content==="class"?Fi=Hi:Ki.content==="style"&&(di=Hi):Ki.isHandlerKey||(ci=!0)}const Mi=Ri.properties[Fi],Oi=Ri.properties[di];ci?Ri=createCallExpression(e.helper(NORMALIZE_PROPS),[Ri]):(Mi&&!isStaticExp(Mi.value)&&(Mi.value=createCallExpression(e.helper(NORMALIZE_CLASS),[Mi.value])),Oi&&(ni||Oi.value.type===4&&Oi.value.content.trim()[0]==="["||Oi.value.type===17)&&(Oi.value=createCallExpression(e.helper(NORMALIZE_STYLE),[Oi.value])));break;case 14:break;default:Ri=createCallExpression(e.helper(NORMALIZE_PROPS),[createCallExpression(e.helper(GUARD_REACTIVE_PROPS),[Ri])]);break}return{props:Ri,directives:Sn,patchFlag:Bn,dynamicPropNames:li,shouldUseBlock:Ln}}function dedupeProperties(Oe){const e=new Map,Te=[];for(let ke=0;ke<Oe.length;ke++){const Be=Oe[ke];if(Be.key.type===8||!Be.key.isStatic){Te.push(Be);continue}const Ue=Be.key.content,He=e.get(Ue);He?(Ue==="style"||Ue==="class"||isOn(Ue))&&mergeAsArray(He,Be):(e.set(Ue,Be),Te.push(Be))}return Te}function mergeAsArray(Oe,e){Oe.value.type===17?Oe.value.elements.push(e.value):Oe.value=createArrayExpression([Oe.value,e.value],Oe.loc)}function buildDirectiveArgs(Oe,e){const Te=[],ke=directiveImportMap.get(Oe);ke?Te.push(e.helperString(ke)):(e.helper(RESOLVE_DIRECTIVE),e.directives.add(Oe.name),Te.push(toValidAssetId(Oe.name,"directive")));const{loc:Be}=Oe;if(Oe.exp&&Te.push(Oe.exp),Oe.arg&&(Oe.exp||Te.push("void 0"),Te.push(Oe.arg)),Object.keys(Oe.modifiers).length){Oe.arg||(Oe.exp||Te.push("void 0"),Te.push("void 0"));const Ue=createSimpleExpression("true",!1,Be);Te.push(createObjectExpression(Oe.modifiers.map(He=>createObjectProperty(He,Ue)),Be))}return createArrayExpression(Te,Oe.loc)}function stringifyDynamicPropNames(Oe){let e="[";for(let Te=0,ke=Oe.length;Te<ke;Te++)e+=JSON.stringify(Oe[Te]),Te<ke-1&&(e+=", ");return e+"]"}function isComponentTag(Oe){return Oe==="component"||Oe==="Component"}const transformSlotOutlet=(Oe,e)=>{if(isSlotOutlet(Oe)){const{children:Te,loc:ke}=Oe,{slotName:Be,slotProps:Ue}=processSlotOutlet(Oe,e),He=[e.prefixIdentifiers?"_ctx.$slots":"$slots",Be,"{}","undefined","true"];let We=2;Ue&&(He[2]=Ue,We=3),Te.length&&(He[3]=createFunctionExpression([],Te,!1,!1,ke),We=4),e.scopeId&&!e.slotted&&(We=5),He.splice(We),Oe.codegenNode=createCallExpression(e.helper(RENDER_SLOT),He,ke)}};function processSlotOutlet(Oe,e){let Te='"default"',ke;const Be=[];for(let Ue=0;Ue<Oe.props.length;Ue++){const He=Oe.props[Ue];if(He.type===6)He.value&&(He.name==="name"?Te=JSON.stringify(He.value.content):(He.name=camelize(He.name),Be.push(He)));else if(He.name==="bind"&&isStaticArgOf(He.arg,"name")){if(He.exp)Te=He.exp;else if(He.arg&&He.arg.type===4){const We=camelize(He.arg.content);Te=He.exp=createSimpleExpression(We,!1,He.arg.loc)}}else He.name==="bind"&&He.arg&&isStaticExp(He.arg)&&(He.arg.content=camelize(He.arg.content)),Be.push(He)}if(Be.length>0){const{props:Ue,directives:He}=buildProps(Oe,e,Be,!1,!1);ke=Ue,He.length&&e.onError(createCompilerError(36,He[0].loc))}return{slotName:Te,slotProps:ke}}const transformOn$1=(Oe,e,Te,ke)=>{const{loc:Be,modifiers:Ue,arg:He}=Oe;!Oe.exp&&!Ue.length&&Te.onError(createCompilerError(35,Be));let We;if(He.type===4)if(He.isStatic){let Sn=He.content;Sn.startsWith("vue:")&&(Sn=`vnode-${Sn.slice(4)}`);const Tn=e.tagType!==0||Sn.startsWith("vnode")||!/[A-Z]/.test(Sn)?toHandlerKey(camelize(Sn)):`on:${Sn}`;We=createSimpleExpression(Tn,!0,He.loc)}else We=createCompoundExpression([`${Te.helperString(TO_HANDLER_KEY)}(`,He,")"]);else We=He,We.children.unshift(`${Te.helperString(TO_HANDLER_KEY)}(`),We.children.push(")");let Cn=Oe.exp;Cn&&!Cn.content.trim()&&(Cn=void 0);let En=Te.cacheHandlers&&!Cn&&!Te.inVOnce;if(Cn){const Sn=isMemberExpression(Cn),Tn=!(Sn||isFnExpression(Cn)),Ln=Cn.content.includes(";");(Tn||En&&Sn)&&(Cn=createCompoundExpression([`${Tn?"$event":"(...args)"} => ${Ln?"{":"("}`,Cn,Ln?"}":")"]))}let An={props:[createObjectProperty(We,Cn||createSimpleExpression("() => {}",!1,Be))]};return ke&&(An=ke(An)),En&&(An.props[0].value=Te.cache(An.props[0].value)),An.props.forEach(Sn=>Sn.key.isHandlerKey=!0),An},transformText=(Oe,e)=>{if(Oe.type===0||Oe.type===1||Oe.type===11||Oe.type===10)return()=>{const Te=Oe.children;let ke,Be=!1;for(let Ue=0;Ue<Te.length;Ue++){const He=Te[Ue];if(isText$1(He)){Be=!0;for(let We=Ue+1;We<Te.length;We++){const Cn=Te[We];if(isText$1(Cn))ke||(ke=Te[Ue]=createCompoundExpression([He],He.loc)),ke.children.push(" + ",Cn),Te.splice(We,1),We--;else{ke=void 0;break}}}}if(!(!Be||Te.length===1&&(Oe.type===0||Oe.type===1&&Oe.tagType===0&&!Oe.props.find(Ue=>Ue.type===7&&!e.directiveTransforms[Ue.name])&&Oe.tag!=="template")))for(let Ue=0;Ue<Te.length;Ue++){const He=Te[Ue];if(isText$1(He)||He.type===8){const We=[];(He.type!==2||He.content!==" ")&&We.push(He),!e.ssr&&getConstantType(He,e)===0&&We.push("1"),Te[Ue]={type:12,content:He,loc:He.loc,codegenNode:createCallExpression(e.helper(CREATE_TEXT),We)}}}}},seen$1=new WeakSet,transformOnce=(Oe,e)=>{if(Oe.type===1&&findDir(Oe,"once",!0))return seen$1.has(Oe)||e.inVOnce||e.inSSR?void 0:(seen$1.add(Oe),e.inVOnce=!0,e.helper(SET_BLOCK_TRACKING),()=>{e.inVOnce=!1;const Te=e.currentNode;Te.codegenNode&&(Te.codegenNode=e.cache(Te.codegenNode,!0,!0))})},transformModel$1=(Oe,e,Te)=>{const{exp:ke,arg:Be}=Oe;if(!ke)return Te.onError(createCompilerError(41,Oe.loc)),createTransformProps();const Ue=ke.loc.source.trim(),He=ke.type===4?ke.content:Ue,We=Te.bindingMetadata[Ue];if(We==="props"||We==="props-aliased")return Te.onError(createCompilerError(44,ke.loc)),createTransformProps();if(!He.trim()||!isMemberExpression(ke))return Te.onError(createCompilerError(42,ke.loc)),createTransformProps();const Cn=Be||createSimpleExpression("modelValue",!0),En=Be?isStaticExp(Be)?`onUpdate:${camelize(Be.content)}`:createCompoundExpression(['"onUpdate:" + ',Be]):"onUpdate:modelValue";let An;const Sn=Te.isTS?"($event: any)":"$event";An=createCompoundExpression([`${Sn} => ((`,ke,") = $event)"]);const Tn=[createObjectProperty(Cn,Oe.exp),createObjectProperty(En,An)];if(Oe.modifiers.length&&e.tagType===1){const Ln=Oe.modifiers.map(ei=>ei.content).map(ei=>(isSimpleIdentifier(ei)?ei:JSON.stringify(ei))+": true").join(", "),Bn=Be?isStaticExp(Be)?`${Be.content}Modifiers`:createCompoundExpression([Be,' + "Modifiers"']):"modelModifiers";Tn.push(createObjectProperty(Bn,createSimpleExpression(`{ ${Ln} }`,!1,Oe.loc,2)))}return createTransformProps(Tn)};function createTransformProps(Oe=[]){return{props:Oe}}const validDivisionCharRE=/[\w).+\-_$\]]/,transformFilter=(Oe,e)=>{isCompatEnabled("COMPILER_FILTERS",e)&&(Oe.type===5?rewriteFilter(Oe.content,e):Oe.type===1&&Oe.props.forEach(Te=>{Te.type===7&&Te.name!=="for"&&Te.exp&&rewriteFilter(Te.exp,e)}))};function rewriteFilter(Oe,e){if(Oe.type===4)parseFilter(Oe,e);else for(let Te=0;Te<Oe.children.length;Te++){const ke=Oe.children[Te];typeof ke=="object"&&(ke.type===4?parseFilter(ke,e):ke.type===8?rewriteFilter(Oe,e):ke.type===5&&rewriteFilter(ke.content,e))}}function parseFilter(Oe,e){const Te=Oe.content;let ke=!1,Be=!1,Ue=!1,He=!1,We=0,Cn=0,En=0,An=0,Sn,Tn,Ln,Bn,ei=[];for(Ln=0;Ln<Te.length;Ln++)if(Tn=Sn,Sn=Te.charCodeAt(Ln),ke)Sn===39&&Tn!==92&&(ke=!1);else if(Be)Sn===34&&Tn!==92&&(Be=!1);else if(Ue)Sn===96&&Tn!==92&&(Ue=!1);else if(He)Sn===47&&Tn!==92&&(He=!1);else if(Sn===124&&Te.charCodeAt(Ln+1)!==124&&Te.charCodeAt(Ln-1)!==124&&!We&&!Cn&&!En)Bn===void 0?(An=Ln+1,Bn=Te.slice(0,Ln).trim()):ti();else{switch(Sn){case 34:Be=!0;break;case 39:ke=!0;break;case 96:Ue=!0;break;case 40:En++;break;case 41:En--;break;case 91:Cn++;break;case 93:Cn--;break;case 123:We++;break;case 125:We--;break}if(Sn===47){let ni=Ln-1,ri;for(;ni>=0&&(ri=Te.charAt(ni),ri===" ");ni--);(!ri||!validDivisionCharRE.test(ri))&&(He=!0)}}Bn===void 0?Bn=Te.slice(0,Ln).trim():An!==0&&ti();function ti(){ei.push(Te.slice(An,Ln).trim()),An=Ln+1}if(ei.length){for(Ln=0;Ln<ei.length;Ln++)Bn=wrapFilter(Bn,ei[Ln],e);Oe.content=Bn,Oe.ast=void 0}}function wrapFilter(Oe,e,Te){Te.helper(RESOLVE_FILTER);const ke=e.indexOf("(");if(ke<0)return Te.filters.add(e),`${toValidAssetId(e,"filter")}(${Oe})`;{const Be=e.slice(0,ke),Ue=e.slice(ke+1);return Te.filters.add(Be),`${toValidAssetId(Be,"filter")}(${Oe}${Ue!==")"?","+Ue:Ue}`}}const seen=new WeakSet,transformMemo=(Oe,e)=>{if(Oe.type===1){const Te=findDir(Oe,"memo");return!Te||seen.has(Oe)?void 0:(seen.add(Oe),()=>{const ke=Oe.codegenNode||e.currentNode.codegenNode;ke&&ke.type===13&&(Oe.tagType!==1&&convertToBlock(ke,e),Oe.codegenNode=createCallExpression(e.helper(WITH_MEMO),[Te.exp,createFunctionExpression(void 0,ke),"_cache",String(e.cached.length)]),e.cached.push(null))})}};function getBaseTransformPreset(Oe){return[[transformOnce,transformIf,transformMemo,transformFor,transformFilter,transformSlotOutlet,transformElement,trackSlotScopes,transformText],{on:transformOn$1,bind:transformBind,model:transformModel$1}]}function baseCompile(Oe,e={}){const Te=e.onError||defaultOnError,ke=e.mode==="module";e.prefixIdentifiers===!0?Te(createCompilerError(47)):ke&&Te(createCompilerError(48));const Be=!1;e.cacheHandlers&&Te(createCompilerError(49)),e.scopeId&&!ke&&Te(createCompilerError(50));const Ue=extend$5({},e,{prefixIdentifiers:Be}),He=isString(Oe)?baseParse(Oe,Ue):Oe,[We,Cn]=getBaseTransformPreset();return transform$2(He,extend$5({},Ue,{nodeTransforms:[...We,...e.nodeTransforms||[]],directiveTransforms:extend$5({},Cn,e.directiveTransforms||{})})),generate(He,Ue)}const BindingTypes={DATA:"data",PROPS:"props",PROPS_ALIASED:"props-aliased",SETUP_LET:"setup-let",SETUP_CONST:"setup-const",SETUP_REACTIVE_CONST:"setup-reactive-const",SETUP_MAYBE_REF:"setup-maybe-ref",SETUP_REF:"setup-ref",OPTIONS:"options",LITERAL_CONST:"literal-const"},noopDirectiveTransform=()=>({props:[]});/**
* @vue/compiler-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const V_MODEL_RADIO=Symbol(""),V_MODEL_CHECKBOX=Symbol(""),V_MODEL_TEXT=Symbol(""),V_MODEL_SELECT=Symbol(""),V_MODEL_DYNAMIC=Symbol(""),V_ON_WITH_MODIFIERS=Symbol(""),V_ON_WITH_KEYS=Symbol(""),V_SHOW=Symbol(""),TRANSITION=Symbol(""),TRANSITION_GROUP=Symbol("");registerRuntimeHelpers({[V_MODEL_RADIO]:"vModelRadio",[V_MODEL_CHECKBOX]:"vModelCheckbox",[V_MODEL_TEXT]:"vModelText",[V_MODEL_SELECT]:"vModelSelect",[V_MODEL_DYNAMIC]:"vModelDynamic",[V_ON_WITH_MODIFIERS]:"withModifiers",[V_ON_WITH_KEYS]:"withKeys",[V_SHOW]:"vShow",[TRANSITION]:"Transition",[TRANSITION_GROUP]:"TransitionGroup"});let decoder;function decodeHtmlBrowser(Oe,e=!1){return decoder||(decoder=document.createElement("div")),e?(decoder.innerHTML=`<div foo="${Oe.replace(/"/g,"&quot;")}">`,decoder.children[0].getAttribute("foo")):(decoder.innerHTML=Oe,decoder.textContent)}const parserOptions={parseMode:"html",isVoidTag,isNativeTag:Oe=>isHTMLTag(Oe)||isSVGTag(Oe)||isMathMLTag(Oe),isPreTag:Oe=>Oe==="pre",isIgnoreNewlineTag:Oe=>Oe==="pre"||Oe==="textarea",decodeEntities:decodeHtmlBrowser,isBuiltInComponent:Oe=>{if(Oe==="Transition"||Oe==="transition")return TRANSITION;if(Oe==="TransitionGroup"||Oe==="transition-group")return TRANSITION_GROUP},getNamespace(Oe,e,Te){let ke=e?e.ns:Te;if(e&&ke===2)if(e.tag==="annotation-xml"){if(Oe==="svg")return 1;e.props.some(Be=>Be.type===6&&Be.name==="encoding"&&Be.value!=null&&(Be.value.content==="text/html"||Be.value.content==="application/xhtml+xml"))&&(ke=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&Oe!=="mglyph"&&Oe!=="malignmark"&&(ke=0);else e&&ke===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(ke=0);if(ke===0){if(Oe==="svg")return 1;if(Oe==="math")return 2}return ke}},transformStyle=Oe=>{Oe.type===1&&Oe.props.forEach((e,Te)=>{e.type===6&&e.name==="style"&&e.value&&(Oe.props[Te]={type:7,name:"bind",arg:createSimpleExpression("style",!0,e.loc),exp:parseInlineCSS(e.value.content,e.loc),modifiers:[],loc:e.loc})})},parseInlineCSS=(Oe,e)=>{const Te=parseStringStyle(Oe);return createSimpleExpression(JSON.stringify(Te),!1,e,3)};function createDOMCompilerError(Oe,e){return createCompilerError(Oe,e)}const DOMErrorCodes={X_V_HTML_NO_EXPRESSION:53,53:"X_V_HTML_NO_EXPRESSION",X_V_HTML_WITH_CHILDREN:54,54:"X_V_HTML_WITH_CHILDREN",X_V_TEXT_NO_EXPRESSION:55,55:"X_V_TEXT_NO_EXPRESSION",X_V_TEXT_WITH_CHILDREN:56,56:"X_V_TEXT_WITH_CHILDREN",X_V_MODEL_ON_INVALID_ELEMENT:57,57:"X_V_MODEL_ON_INVALID_ELEMENT",X_V_MODEL_ARG_ON_ELEMENT:58,58:"X_V_MODEL_ARG_ON_ELEMENT",X_V_MODEL_ON_FILE_INPUT_ELEMENT:59,59:"X_V_MODEL_ON_FILE_INPUT_ELEMENT",X_V_MODEL_UNNECESSARY_VALUE:60,60:"X_V_MODEL_UNNECESSARY_VALUE",X_V_SHOW_NO_EXPRESSION:61,61:"X_V_SHOW_NO_EXPRESSION",X_TRANSITION_INVALID_CHILDREN:62,62:"X_TRANSITION_INVALID_CHILDREN",X_IGNORED_SIDE_EFFECT_TAG:63,63:"X_IGNORED_SIDE_EFFECT_TAG",__EXTEND_POINT__:64,64:"__EXTEND_POINT__"},DOMErrorMessages={53:"v-html is missing expression.",54:"v-html will override element children.",55:"v-text is missing expression.",56:"v-text will override element children.",57:"v-model can only be used on <input>, <textarea> and <select> elements.",58:"v-model argument is not supported on plain elements.",59:"v-model cannot be used on file inputs since they are read-only. Use a v-on:change listener instead.",60:"Unnecessary value binding used alongside v-model. It will interfere with v-model's behavior.",61:"v-show is missing expression.",62:"<Transition> expects exactly one child element or component.",63:"Tags with side effect (<script> and <style>) are ignored in client component templates."},transformVHtml=(Oe,e,Te)=>{const{exp:ke,loc:Be}=Oe;return ke||Te.onError(createDOMCompilerError(53,Be)),e.children.length&&(Te.onError(createDOMCompilerError(54,Be)),e.children.length=0),{props:[createObjectProperty(createSimpleExpression("innerHTML",!0,Be),ke||createSimpleExpression("",!0))]}},transformVText=(Oe,e,Te)=>{const{exp:ke,loc:Be}=Oe;return ke||Te.onError(createDOMCompilerError(55,Be)),e.children.length&&(Te.onError(createDOMCompilerError(56,Be)),e.children.length=0),{props:[createObjectProperty(createSimpleExpression("textContent",!0),ke?getConstantType(ke,Te)>0?ke:createCallExpression(Te.helperString(TO_DISPLAY_STRING),[ke],Be):createSimpleExpression("",!0))]}},transformModel=(Oe,e,Te)=>{const ke=transformModel$1(Oe,e,Te);if(!ke.props.length||e.tagType===1)return ke;Oe.arg&&Te.onError(createDOMCompilerError(58,Oe.arg.loc));const{tag:Be}=e,Ue=Te.isCustomElement(Be);if(Be==="input"||Be==="textarea"||Be==="select"||Ue){let He=V_MODEL_TEXT,We=!1;if(Be==="input"||Ue){const Cn=findProp(e,"type");if(Cn){if(Cn.type===7)He=V_MODEL_DYNAMIC;else if(Cn.value)switch(Cn.value.content){case"radio":He=V_MODEL_RADIO;break;case"checkbox":He=V_MODEL_CHECKBOX;break;case"file":We=!0,Te.onError(createDOMCompilerError(59,Oe.loc));break}}else hasDynamicKeyVBind(e)&&(He=V_MODEL_DYNAMIC)}else Be==="select"&&(He=V_MODEL_SELECT);We||(ke.needRuntime=Te.helper(He))}else Te.onError(createDOMCompilerError(57,Oe.loc));return ke.props=ke.props.filter(He=>!(He.key.type===4&&He.key.content==="modelValue")),ke},isEventOptionModifier=makeMap("passive,once,capture"),isNonKeyModifier=makeMap("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),maybeKeyModifier=makeMap("left,right"),isKeyboardEvent=makeMap("onkeyup,onkeydown,onkeypress"),resolveModifiers=(Oe,e,Te,ke)=>{const Be=[],Ue=[],He=[];for(let We=0;We<e.length;We++){const Cn=e[We].content;Cn==="native"&&checkCompatEnabled("COMPILER_V_ON_NATIVE",Te)||isEventOptionModifier(Cn)?He.push(Cn):maybeKeyModifier(Cn)?isStaticExp(Oe)?isKeyboardEvent(Oe.content.toLowerCase())?Be.push(Cn):Ue.push(Cn):(Be.push(Cn),Ue.push(Cn)):isNonKeyModifier(Cn)?Ue.push(Cn):Be.push(Cn)}return{keyModifiers:Be,nonKeyModifiers:Ue,eventOptionModifiers:He}},transformClick=(Oe,e)=>isStaticExp(Oe)&&Oe.content.toLowerCase()==="onclick"?createSimpleExpression(e,!0):Oe.type!==4?createCompoundExpression(["(",Oe,`) === "onClick" ? "${e}" : (`,Oe,")"]):Oe,transformOn=(Oe,e,Te)=>transformOn$1(Oe,e,Te,ke=>{const{modifiers:Be}=Oe;if(!Be.length)return ke;let{key:Ue,value:He}=ke.props[0];const{keyModifiers:We,nonKeyModifiers:Cn,eventOptionModifiers:En}=resolveModifiers(Ue,Be,Te,Oe.loc);if(Cn.includes("right")&&(Ue=transformClick(Ue,"onContextmenu")),Cn.includes("middle")&&(Ue=transformClick(Ue,"onMouseup")),Cn.length&&(He=createCallExpression(Te.helper(V_ON_WITH_MODIFIERS),[He,JSON.stringify(Cn)])),We.length&&(!isStaticExp(Ue)||isKeyboardEvent(Ue.content.toLowerCase()))&&(He=createCallExpression(Te.helper(V_ON_WITH_KEYS),[He,JSON.stringify(We)])),En.length){const An=En.map(capitalize).join("");Ue=isStaticExp(Ue)?createSimpleExpression(`${Ue.content}${An}`,!0):createCompoundExpression(["(",Ue,`) + "${An}"`])}return{props:[createObjectProperty(Ue,He)]}}),transformShow=(Oe,e,Te)=>{const{exp:ke,loc:Be}=Oe;return ke||Te.onError(createDOMCompilerError(61,Be)),{props:[],needRuntime:Te.helper(V_SHOW)}},ignoreSideEffectTags=(Oe,e)=>{Oe.type===1&&Oe.tagType===0&&(Oe.tag==="script"||Oe.tag==="style")&&e.removeNode()},DOMNodeTransforms=[transformStyle],DOMDirectiveTransforms={cloak:noopDirectiveTransform,html:transformVHtml,text:transformVText,model:transformModel,on:transformOn,show:transformShow};function compile(Oe,e={}){return baseCompile(Oe,extend$5({},parserOptions,e,{nodeTransforms:[ignoreSideEffectTags,...DOMNodeTransforms,...e.nodeTransforms||[]],directiveTransforms:extend$5({},DOMDirectiveTransforms,e.directiveTransforms||{}),transformHoist:null}))}function parse$3(Oe,e={}){return baseParse(Oe,extend$5({},parserOptions,e))}const compilerDom_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BASE_TRANSITION,BindingTypes,CAMELIZE,CAPITALIZE,CREATE_BLOCK,CREATE_COMMENT,CREATE_ELEMENT_BLOCK,CREATE_ELEMENT_VNODE,CREATE_SLOTS,CREATE_STATIC,CREATE_TEXT,CREATE_VNODE,CompilerDeprecationTypes,ConstantTypes,DOMDirectiveTransforms,DOMErrorCodes,DOMErrorMessages,DOMNodeTransforms,ElementTypes,ErrorCodes,FRAGMENT,GUARD_REACTIVE_PROPS,IS_MEMO_SAME,IS_REF,KEEP_ALIVE,MERGE_PROPS,NORMALIZE_CLASS,NORMALIZE_PROPS,NORMALIZE_STYLE,Namespaces,NodeTypes,OPEN_BLOCK,POP_SCOPE_ID,PUSH_SCOPE_ID,RENDER_LIST,RENDER_SLOT,RESOLVE_COMPONENT,RESOLVE_DIRECTIVE,RESOLVE_DYNAMIC_COMPONENT,RESOLVE_FILTER,SET_BLOCK_TRACKING,SUSPENSE,TELEPORT,TO_DISPLAY_STRING,TO_HANDLERS,TO_HANDLER_KEY,TRANSITION,TRANSITION_GROUP,TS_NODE_TYPES,UNREF,V_MODEL_CHECKBOX,V_MODEL_DYNAMIC,V_MODEL_RADIO,V_MODEL_SELECT,V_MODEL_TEXT,V_ON_WITH_KEYS,V_ON_WITH_MODIFIERS,V_SHOW,WITH_CTX,WITH_DIRECTIVES,WITH_MEMO,advancePositionWithClone,advancePositionWithMutation,assert:assert$1,baseCompile,baseParse,buildDirectiveArgs,buildProps,buildSlots,checkCompatEnabled,compile,convertToBlock,createArrayExpression,createAssignmentExpression,createBlockStatement,createCacheExpression,createCallExpression,createCompilerError,createCompoundExpression,createConditionalExpression,createDOMCompilerError,createForLoopParams,createFunctionExpression,createIfStatement,createInterpolation,createObjectExpression,createObjectProperty,createReturnStatement,createRoot,createSequenceExpression,createSimpleExpression,createStructuralDirectiveTransform,createTemplateLiteral,createTransformContext,createVNodeCall,errorMessages,extractIdentifiers,findDir,findProp,forAliasRE,generate,generateCodeFrame,getBaseTransformPreset,getConstantType,getMemoedVNodeCall,getVNodeBlockHelper,getVNodeHelper,hasDynamicKeyVBind,hasScopeRef,helperNameMap,injectProp,isCoreComponent,isFnExpression,isFnExpressionBrowser,isFnExpressionNode,isFunctionType,isInDestructureAssignment,isInNewExpression,isMemberExpression,isMemberExpressionBrowser,isMemberExpressionNode,isReferencedIdentifier,isSimpleIdentifier,isSlotOutlet,isStaticArgOf,isStaticExp,isStaticProperty,isStaticPropertyKey,isTemplateNode,isText:isText$1,isVSlot,locStub,noopDirectiveTransform,parse:parse$3,parserOptions,processExpression,processFor,processIf,processSlotOutlet,registerRuntimeHelpers,resolveComponentType,stringifyExpression,toValidAssetId,trackSlotScopes,trackVForSlotScopes,transform:transform$2,transformBind,transformElement,transformExpression,transformModel:transformModel$1,transformOn:transformOn$1,transformStyle,traverseNode,unwrapTSNode,walkBlockDeclarations,walkFunctionParams,walkIdentifiers,warnDeprecation},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(compilerDom_esmBundler),require$$1=getAugmentedNamespace(runtimeDom_esmBundler),require$$2=getAugmentedNamespace(shared_esmBundler);/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/var hasRequiredVue_cjs_prod;function requireVue_cjs_prod(){return hasRequiredVue_cjs_prod||(hasRequiredVue_cjs_prod=1,function(Oe){Object.defineProperty(Oe,"__esModule",{value:!0});var e=require$$0,Te=require$$1,ke=require$$2;function Be(Cn){var En=Object.create(null);if(Cn)for(var An in Cn)En[An]=Cn[An];return En.default=Cn,Object.freeze(En)}var Ue=Be(Te);const He=Object.create(null);function We(Cn,En){if(!ke.isString(Cn))if(Cn.nodeType)Cn=Cn.innerHTML;else return ke.NOOP;const An=ke.genCacheKey(Cn,En),Sn=He[An];if(Sn)return Sn;if(Cn[0]==="#"){const ei=document.querySelector(Cn);Cn=ei?ei.innerHTML:""}const Tn=ke.extend({hoistStatic:!0,onError:void 0,onWarn:ke.NOOP},En);!Tn.isCustomElement&&typeof customElements<"u"&&(Tn.isCustomElement=ei=>!!customElements.get(ei));const{code:Ln}=e.compile(Cn,Tn),Bn=new Function("Vue",Ln)(Ue);return Bn._rc=!0,He[An]=Bn}Te.registerRuntimeCompiler(We),Oe.compile=We,Object.keys(Te).forEach(function(Cn){Cn!=="default"&&!Object.prototype.hasOwnProperty.call(Oe,Cn)&&(Oe[Cn]=Te[Cn])})}(vue_cjs_prod)),vue_cjs_prod}var hasRequiredVue;function requireVue(){return hasRequiredVue||(hasRequiredVue=1,vue.exports=requireVue_cjs_prod()),vue.exports}var hasRequiredLogger;function requireLogger(){if(hasRequiredLogger)return logger$G;hasRequiredLogger=1,Object.defineProperty(logger$G,"__esModule",{value:!0}),logger$G.useLogger=logger$G.createLogger=logger$G.VueLogger=void 0;const Oe=requireVue(),e=Symbol("vue-logger-plugin"),Te=["debug","info","warn","error","log"],ke={enabled:!0,consoleEnabled:!0,level:"debug",callerInfo:!1,prefixFormat:({level:We,caller:Cn})=>Cn?`[${We.toUpperCase()}] [${Cn==null?void 0:Cn.fileName}:${Cn==null?void 0:Cn.functionName}:${Cn==null?void 0:Cn.lineNumber}]`:`[${We.toUpperCase()}]`};class Be{constructor(Cn){this.apply(Cn),this._consoleFunctions=Te.filter(En=>typeof console[En]=="function")}apply(Cn){const En=this._options||ke;this._options={...En,...Cn},this.installHooks(this._options.beforeHooks),this.installHooks(this._options.afterHooks)}debug(...Cn){this.invoke("debug",...Cn).then(()=>{}).catch(()=>{})}info(...Cn){this.invoke("info",...Cn).then(()=>{}).catch(()=>{})}warn(...Cn){this.invoke("warn",...Cn).then(()=>{}).catch(()=>{})}error(...Cn){this.invoke("error",...Cn).then(()=>{}).catch(()=>{})}log(...Cn){this.invoke("log",...Cn).then(()=>{}).catch(()=>{})}async invoke(Cn,...En){if(this._options.enabled&&Te.indexOf(Cn)>=Te.indexOf(this._options.level)){const An=this._options.callerInfo?this.getCallerInfo():void 0,Sn={level:Cn,caller:An,argumentArray:En};if(await this.invokeHooks(this._options.beforeHooks,Sn),this._options.consoleEnabled){const Tn=this._options.prefixFormat({level:Cn,caller:An});this._consoleFunctions.indexOf(Cn)>=0?console[Cn](Tn,...En):console.log(Tn,...En)}await this.invokeHooks(this._options.afterHooks,Sn)}}installHooks(Cn){if(Cn&&Cn.length>0){for(const En of Cn)if(En.install)try{En.install(this._options)}catch(An){console.warn("LoggerHook install failure",An)}}}async invokeHooks(Cn,En){if(Cn&&Cn.length>0)for(const An of Cn)try{await An.run(En)}catch(Sn){console.warn("LoggerHook run failure",Sn)}}getCallerInfo(){const Cn=new Error;if(Cn.stack)try{const An=Cn.stack.split(`
`)[0].startsWith("Error")?4:3,Sn=Cn.stack.split(`
`)[An].trim().replace("(","").replace(")","");let Tn;Sn.indexOf("at ")>-1?Tn=Sn.substring(Sn.indexOf("at ")+3,Sn.lastIndexOf(" ")).split(".").reverse()[0]:Sn.indexOf("@")>-1&&(Tn=Sn.substring(0,Sn.indexOf("@")));const Ln=Sn.split(":").reverse(),Bn=Ln[2].substring(Math.max(Ln[2].lastIndexOf("/"),Ln[2].lastIndexOf("\\"))+1).split("?")[0],ei=Ln[1];return{functionName:Tn,fileName:Bn,lineNumber:ei}}catch{}}get enabled(){return this._options.enabled}get level(){return this._options.level}install(Cn){Cn.provide(e,this),Cn.config.globalProperties.$log=this,Cn.config.globalProperties.$logger=this}}logger$G.VueLogger=Be;function Ue(We={}){return new Be(We)}logger$G.createLogger=Ue;function He(){return Oe.inject(e)}return logger$G.useLogger=He,logger$G}var hooks={},hasRequiredHooks;function requireHooks(){return hasRequiredHooks||(hasRequiredHooks=1,Object.defineProperty(hooks,"__esModule",{value:!0}),hooks.StringifyAndParseObjectsHook=hooks.StringifyObjectsHook=void 0,hooks.StringifyObjectsHook={run(Oe){for(let e=0;e<Oe.argumentArray.length;e++)Oe.argumentArray[e]!=null&&typeof Oe.argumentArray[e]=="object"&&(Oe.argumentArray[e]=JSON.stringify(Oe.argumentArray[e]))}},hooks.StringifyAndParseObjectsHook={run(Oe){for(let e=0;e<Oe.argumentArray.length;e++)Oe.argumentArray[e]!=null&&typeof Oe.argumentArray[e]=="object"&&(Oe.argumentArray[e]=JSON.parse(JSON.stringify(Oe.argumentArray[e])))}}),hooks}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,function(Oe){Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.StringifyAndParseObjectsHook=Oe.StringifyObjectsHook=Oe.useLogger=Oe.createLogger=Oe.VueLogger=void 0;var e=requireLogger();Object.defineProperty(Oe,"VueLogger",{enumerable:!0,get:function(){return e.VueLogger}}),Object.defineProperty(Oe,"createLogger",{enumerable:!0,get:function(){return e.createLogger}}),Object.defineProperty(Oe,"useLogger",{enumerable:!0,get:function(){return e.useLogger}});var Te=requireHooks();Object.defineProperty(Oe,"StringifyObjectsHook",{enumerable:!0,get:function(){return Te.StringifyObjectsHook}}),Object.defineProperty(Oe,"StringifyAndParseObjectsHook",{enumerable:!0,get:function(){return Te.StringifyAndParseObjectsHook}})}(dist)),dist}var distExports=requireDist();const eulerianSymbol=Symbol("vue-eulerian-plugin");class Eulerian{constructor(e){console.debug("eulerian",e),this.options=e,window.dsfr={verbose:e.verbose,mode:"vue"},window.dsfr.analytics=e,this.key="@codegouvfr/react-dsfr finalityConsent eulerianAnalytics",this.status=!1,this.load().then(()=>{console.debug("import dynamic dsfr !");var Te=JSON.parse(localStorage.getItem(this.key));Te&&(Te.eulerianAnalytics?this.start():this.stop())})}async load(){await __vitePreload(()=>import("./dsfr.module-DYHqa25z.js").then(e=>e.d),[]).then(()=>{console.debug("import dynamic dsfr.module !")}),await __vitePreload(()=>import("./analytics.module-BS41SvT4.js").then(e=>e.a),[]).then(()=>{console.debug("import dynamic analytics.module !")})}start(){console.debug("start"),localStorage.setItem(this.key,'{"eulerianAnalytics":true,"isFullConsent":true}'),window.dsfr.analytics.opt.enable(),window.dsfr.start(),window.dsfr.analytics.readiness.then(()=>{console.debug("start promise !"),this.options.verbose||(window.dsfr.inspector.level=10),window.dsfr.analytics.reset(),window.dsfr.analytics.collect()}),this.status=!0}stop(){console.debug("stop"),localStorage.setItem(this.key,'{"eulerianAnalytics":false,"isFullConsent":false}'),window.dsfr.stop(),this.status=!1}pause(){this.status&&window.dsfr.stop(),console.debug("pause",this.status)}resume(){this.status&&window.dsfr.start(),console.debug("resume",this.status)}getKey(){return this.key}setKey(e){this.key=e}hasKey(){var e=localStorage.getItem(this.key);return!!e}install(e){e.provide(eulerianSymbol,this),e.config.globalProperties.$eulerian=this}}function createEulerian(Oe){return new Eulerian(Oe)}function useEulerian(){return inject(eulerianSymbol)}const useServiceStore=defineStore({id:"service",state:()=>({connexion:{}}),getters:{},actions:{getService(){return this.connexion},setService(Oe){this.connexion=serviceFactotyCreate(Oe)}}});var Users={getUser:function(){if(this.user){var Oe=null,e=this.user.first_name,Te=this.user.last_name;return e&&Te?Oe=`${e} ${Te}`:this.user.user_name?Oe=this.user.user_name:this.user.email?Oe=this.user.email:Oe=this.user.user_identifier,Oe}},getUserMe:async function(){var Oe=await this.getFetch()(`${this.api}/users/me`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}),e=await Oe.json();this.user=e;var Te=useServiceStore();return Te.setService(this),e},getUserSize:function(){if(this.user){var Oe=this.user.documents_quota,e=this.user.documents_use,Te=Math.round(100*e/Oe),ke=Te>80;return{size:Oe-e,ratio:Te,alert:ke}}}},GetDocuments={getDrawing:async function(Oe){return await this.getFileById(Oe)},getImport:async function(Oe){var e=null,Te=await this.getFileById(Oe),ke=useServiceStore(),Be=ke.getService(),Ue=Be.documents.import.find(We=>We._id===Oe),He=!0;return Ue.labels.includes("internal")&&(He=!1,e=new Promise((We,Cn)=>{We(Te)})),Ue.labels.includes("external")&&(He=!1,e=new Promise((We,Cn)=>{We(Te.url)})),He&&(e=new Promise((We,Cn)=>{We(Te)})),e||(e=new Promise((We,Cn)=>{Cn("Exception pour récuperer le fichier !!!")})),e},getCompute:async function(Oe){return await this.getFileById(Oe)},getService:async function(Oe){var e=null,Te=await this.getFileById(Oe);typeof Te=="string"&&(Te=JSON.parse(Te));var ke=useServiceStore(),Be=ke.getService(),Ue=Be.documents.service.find(He=>He._id===Oe);return(Ue.labels.includes("wmts")||Ue.labels.includes("wms"))&&(e=new Promise((He,We)=>{He(Te)})),Ue.labels.includes("mapbox")&&(Ue.labels.includes("internal")&&(e=new Promise((He,We)=>{He(Te)})),Ue.labels.includes("external")&&(e=new Promise((He,We)=>{He(Te.url)}))),e||(e=new Promise((He,We)=>{We("Exception pour récuperer le fichier !!!")})),e},getCartes:async function(Oe){var e=await this.getFileById(Oe);typeof e=="string"&&(e=JSON.parse(e));var Te=new Promise((ke,Be)=>{ke(e.permalink)});return Te}},SetDocuments={getMimeType:Oe=>{var e="";switch(Oe.toLowerCase()){case"json":e="application/json";break;case"geojson":e="application/geo+json";break;case"kml":e="application/vnd.google-earth.kml+xml";break;case"gpx":e="application/gpx+xml";break;default:e="application/octet-stream";break}return e},setDocument:async function(Oe){const e=new FormData;e.append("name",Oe.name),e.append("description",Oe.description);const Te=[this.tag,Oe.type,this.labelsFormats.find(An=>Oe.format.toLowerCase().includes(An)),this.labelsTarget.find(An=>Oe.target.toLowerCase().includes(An))];if(Oe.kind){var ke=this.labelsService.find(An=>Oe.kind.toLowerCase().includes(An));ke&&Te.push(ke)}e.append("labels",Te.join(",")),e.append("url_public",!0),e.append("extra",JSON.stringify({kind:Oe.kind?Oe.kind.toLowerCase():null,format:Oe.format.toLowerCase(),target:"internal",date:new Date().toLocaleDateString()}));const Be=Oe.content,Ue=new Blob([Be],{type:this.getMimeType(Oe.format)});e.append("file",Ue);for(let An of e.entries())console.debug(An[0]+": "+An[1]);var He=await this.getFetch()(`${this.api}/users/me/documents`,{method:"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:e}),We=await He.json();if(He.status!==200&&He.status!==201)throw We;this.documents[Oe.type].push(We);var Cn=We._id,En=useServiceStore();return En.setService(this),{uuid:Cn,action:"added"}},updateGeometryDocument:async function(Oe){var e=Oe.uuid,Te=this.documents[Oe.type].findIndex(Cn=>Cn._id===e);if(Te===-1)throw new Error(`Le document ${e} n'a pas été trouvé !`);const ke=new FormData,Be=new Blob([Oe.content],{type:this.getMimeType(Oe.format)});ke.append("file",Be);var Ue=await this.getFetch()(`${this.api}/users/me/documents/${e}`,{method:this.mode==="local"?"PUT":"POST",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:ke}),He=await Ue.json();if(Ue.status!==200)throw He;this.documents[Oe.type][Te]=He;var We=useServiceStore();return We.setService(this),{uuid:e,action:"updated"}},updateMetadataDocument:async function(Oe){var Ue=Oe.uuid,e=this.documents[Oe.type].findIndex(We=>We._id===Ue);if(e===-1)throw new Error(`Le document ${Ue} n'a pas été trouvé !`);var Te={};Te.extra=Oe.extra,Te.name=Oe.name,Te.description=Oe.description;var ke=await this.getFetch()(`${this.api}/users/me/documents/${Ue}`,{method:"PATCH",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(Te)}),Be=await ke.json();if(ke.status!==200)throw Be;this.documents[Oe.type][e]=Be;var Ue=Be._id,He=useServiceStore();return He.setService(this),{uuid:Ue,action:"updated"}},sharingDocument:async function(Oe){var Be=Oe.uuid,e=this.documents[Oe.type].findIndex(He=>He._id===Be);if(e===-1)throw new Error(`Le document ${Be} n'a pas été trouvé !`);var Te=await this.getFetch()(`${this.api}/users/me/documents/${Be}`,{method:"PATCH",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify({public_url:!0})}),ke=await Te.json();if(Te.status!==200)throw ke;this.documents[Oe.type][e]=ke;var Be=ke._id,Ue=useServiceStore();return Ue.setService(this),{uuid:Be,action:"shared"}},renameDocument:async function(Oe){var Ue=Oe.uuid,e=this.documents[Oe.type].findIndex(We=>We._id===Ue);if(e===-1)throw new Error(`Le document ${Ue} n'a pas été trouvé !`);var Te={name:Oe.name},ke=await this.getFetch()(`${this.api}/users/me/documents/${Ue}`,{method:"PATCH",headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(Te)}),Be=await ke.json();if(ke.status!==200&&ke.status!==201)throw Be;this.documents[Oe.type][e]=Be;var Ue=Be._id,He=useServiceStore();return He.setService(this),{uuid:Ue,action:"updated"}},deleteDocument:async function(Oe){var e=Oe.uuid,Te=await this.getFetch()(`${this.api}/users/me/documents/${e}`,{method:"DELETE",headers:{Accept:"*/*","X-Requested-With":"XMLHttpRequest"}});if(Te.status!==204)throw Te;var ke=this.documents[Oe.type].findIndex(Ue=>Ue._id===e);if(ke===-1)throw new Error(`Le document ${e} n'a pas été trouvé !`);this.documents[Oe.type].splice(ke,1);var Be=useServiceStore();return Be.setService(this),{uuid:e,action:"deleted"}},exportDocument:async function(Oe){var e=Oe.uuid,Te=this.documents[Oe.type].find(He=>He._id===e);if(!Te)throw new Error(`Le document ${e} n'a pas été trouvé !`);if(!Te.extra){var ke=await this.getDocumentById(e);Object.assign(Te,ke)}var Be=await this.getFileById(e);if(!Be)throw new Error(`Le document ${e} n'a pas été téléchargé !`);var Ue=Te.extra.format==="json"||Te.extra.format==="geojson";return{uuid:e,action:"exported",extra:{content:Ue?JSON.stringify(Be):Be,mimeType:this.getMimeType(Te.extra.format),name:Te.name,ext:Te.extra.format}}}},Documents={tag:"cartes.gouv.fr",labels:["drawing","import","compute","service","carte"],labelsFormats:["geojson","gpx","kml","mapbox","json"],labelsService:["mapbox","wms","wmts"],labelsTarget:["internal","external"],labelsCompute:["isochron","route","profil"],isEmpty:function(){for(let Oe=0;Oe<this.labels.length;Oe++){const e=this.labels[Oe];if(this.documents[e]&&this.documents[e].length>0)return!1}return!0},find:function(Oe){for(let Te=0;Te<this.labels.length;Te++){const ke=this.labels[Te];if(this.documents[ke]&&this.documents[ke].length>0){var e=this.documents[ke].find(Be=>Be._id===Oe);if(e)return e}}return null},getDocuments:async function(){var Oe=[];for(let e=0;e<this.labels.length;e++){const Te=this.labels[e];Oe.push(this.getDocumentsByLabel(Te))}return Promise.allSettled(Oe)},getDocumentsByLabel:async function(Oe){if(!this.labels.includes(Oe))return Promise.reject("Label filter not allowed !");var e=["owned=true","shared=false","page=1","limit=100"],Te=`${e.join("&")}&labels=${this.tag}&labels=${Oe}`,ke=await this.getFetch()(`${this.api}/users/me/documents?${Te}`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}),Be=await ke.json();this.documents[Oe]=Be;var Ue=useServiceStore();return Ue.setService(this),Be},getDocumentById:async function(Oe){var e=await this.getFetch()(`${this.api}/users/me/documents/${Oe}`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}),Te=await e.json();const ke=We=>({id:Oe.split("-").slice(-1)[0],format:this.labelsFormats.find(Cn=>We.includes(Cn)),target:this.labelsTarget.find(Cn=>We.includes(Cn)),compute:this.labelsCompute.find(Cn=>We.includes(Cn)),kind:this.labelsService.find(Cn=>We.includes(Cn)),date:new Date().toLocaleDateString()});var Be={},Ue=!1;for(let We=0;We<this.labels.length&&!Ue;We++){const Cn=this.labels[We];for(let En=0;En<this.documents[Cn].length;En++)if(Be=this.documents[Cn][En],Be._id===Te._id){Be.labels=Te.labels,Be.description=Te.description,Be.mime_type=Te.mime_type,Be.public_url=Te.public_url,Be.extra={...ke(Te.labels),...Te.extra},Ue=!0;break}}if(!Ue)return Promise.reject(`Le document (${Oe}) n'a pas été trouvé !`);var He=useServiceStore();return He.setService(this),Be},getFileById:async function(Oe){var e=await this.getFetch()(`${this.api}/users/me/documents/${Oe}/file`,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}}),Te=e.headers.get("content-type"),ke=null;return Te==="application/json"?ke=await e.json():ke=await e.text(),ke}};Object.assign(Documents,GetDocuments);Object.assign(Documents,SetDocuments);const IAM_AUTH_MODE=window.__ENV__.IAM_AUTH_MODE;var Pu;class ServiceBase{constructor(e){Iu(this,Pu);return e=e||{},this.authenticated=e.authenticated||!1,this.user=e.user||{},this.documents=e.documents||{},this.error=e.error||{},this.mode=e.mode||IAM_AUTH_MODE,this.url=encodeURI(location.origin+"/cartes.gouv.fr-entree-carto"),this.api=null,Hc(this,Pu,null),this}getFetch(){return yl(this,Pu)}setFetch(e){Hc(this,Pu,e)}async isAccessValided(){var e=useServiceStore();e.setService(this),Promise.resolve()}async getAccessLogin(){Promise.reject("this must be overridden !")}async getAccessLogout(){Promise.reject("this must be overridden !")}async getAccessToken(){Promise.reject("this must be overridden !")}}Pu=new WeakMap;Object.assign(ServiceBase.prototype,Users);Object.assign(ServiceBase.prototype,Documents);var oauth2Client_min={exports:{}},hasRequiredOauth2Client_min;function requireOauth2Client_min(){return hasRequiredOauth2Client_min||(hasRequiredOauth2Client_min=1,function(Oe,e){(function(Te,ke){Oe.exports=ke()})(self,()=>(()=>{var Te={985:(He,We,Cn)=>{Object.defineProperty(We,"__esModule",{value:!0}),We.OAuth2Client=void 0,We.generateQueryString=Tn;const En=Cn(854),An=Cn(129);function Sn(Ln,Bn){return new URL(Ln,Bn).toString()}function Tn(Ln){const Bn=new URLSearchParams;for(const[ei,ti]of Object.entries(Ln))if(Array.isArray(ti))for(const ni of ti)Bn.append(ei,ni);else ti!==void 0&&Bn.set(ei,ti.toString());return Bn.toString()}We.OAuth2Client=class{constructor(Ln){this.discoveryDone=!1,this.serverMetadata=null,Ln!=null&&Ln.fetch||(Ln.fetch=fetch.bind(globalThis)),this.settings=Ln}async refreshToken(Ln,Bn){if(!Ln.refreshToken)throw new Error("This token didn't have a refreshToken. It's not possible to refresh this");const ei={grant_type:"refresh_token",refresh_token:Ln.refreshToken};this.settings.clientSecret||(ei.client_id=this.settings.clientId),Bn!=null&&Bn.scope&&(ei.scope=Bn.scope.join(" ")),Bn!=null&&Bn.resource&&(ei.resource=Bn.resource);const ti=await this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",ei));return!ti.refreshToken&&Ln.refreshToken&&(ti.refreshToken=Ln.refreshToken),ti}async clientCredentials(Ln){var Bn;const ei=["client_id","client_secret","grant_type","scope"];if(Ln!=null&&Ln.extraParams&&Object.keys(Ln.extraParams).filter(ni=>ei.includes(ni)).length>0)throw new Error(`The following extraParams are disallowed: '${ei.join("', '")}'`);const ti={grant_type:"client_credentials",scope:(Bn=Ln==null?void 0:Ln.scope)===null||Bn===void 0?void 0:Bn.join(" "),resource:Ln==null?void 0:Ln.resource,...Ln==null?void 0:Ln.extraParams};if(!this.settings.clientSecret)throw new Error("A clientSecret must be provided to use client_credentials");return this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",ti))}async password(Ln){var Bn;const ei={grant_type:"password",...Ln,scope:(Bn=Ln.scope)===null||Bn===void 0?void 0:Bn.join(" ")};return this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",ei))}get authorizationCode(){return new An.OAuth2AuthorizationCodeClient(this)}async introspect(Ln){const Bn={token:Ln.accessToken,token_type_hint:"access_token"};return this.request("introspectionEndpoint",Bn)}async revoke(Ln,Bn="access_token"){let ei=Ln.accessToken;Bn==="refresh_token"&&(ei=Ln.refreshToken);const ti={token:ei,token_type_hint:Bn};return this.request("revocationEndpoint",ti)}async getEndpoint(Ln){if(this.settings[Ln]!==void 0)return Sn(this.settings[Ln],this.settings.server);if(Ln!=="discoveryEndpoint"&&(await this.discover(),this.settings[Ln]!==void 0))return Sn(this.settings[Ln],this.settings.server);if(!this.settings.server)throw new Error(`Could not determine the location of ${Ln}. Either specify ${Ln} in the settings, or the "server" endpoint to let the client discover it.`);switch(Ln){case"authorizationEndpoint":return Sn("/authorize",this.settings.server);case"tokenEndpoint":return Sn("/token",this.settings.server);case"discoveryEndpoint":return Sn("/.well-known/oauth-authorization-server",this.settings.server);case"introspectionEndpoint":return Sn("/introspect",this.settings.server);case"revocationEndpoint":return Sn("/revoke",this.settings.server)}}async discover(){var Ln;if(this.discoveryDone)return;let Bn;this.discoveryDone=!0;try{Bn=await this.getEndpoint("discoveryEndpoint")}catch{return void console.warn('[oauth2] OAuth2 discovery endpoint could not be determined. Either specify the "server" or "discoveryEndpoint')}const ei=await this.settings.fetch(Bn,{headers:{Accept:"application/json"}});if(!ei.ok)return;if(!(!((Ln=ei.headers.get("Content-Type"))===null||Ln===void 0)&&Ln.startsWith("application/json")))return void console.warn("[oauth2] OAuth2 discovery endpoint was not a JSON response. Response is ignored");this.serverMetadata=await ei.json();const ti=[["authorization_endpoint","authorizationEndpoint"],["token_endpoint","tokenEndpoint"],["introspection_endpoint","introspectionEndpoint"],["revocation_endpoint","revocationEndpoint"]];if(this.serverMetadata!==null){for(const[ni,ri]of ti)this.serverMetadata[ni]&&(this.settings[ri]=Sn(this.serverMetadata[ni],Bn));this.serverMetadata.token_endpoint_auth_methods_supported&&!this.settings.authenticationMethod&&(this.settings.authenticationMethod=this.serverMetadata.token_endpoint_auth_methods_supported[0])}}async request(Ln,Bn){const ei=await this.getEndpoint(Ln),ti={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"};let ni=this.settings.authenticationMethod;switch(this.settings.clientSecret||(ni="client_secret_post"),ni||(ni="client_secret_basic"),ni){case"client_secret_basic":ti.Authorization="Basic "+btoa(this.settings.clientId+":"+this.settings.clientSecret);break;case"client_secret_post":Bn.client_id=this.settings.clientId,this.settings.clientSecret&&(Bn.client_secret=this.settings.clientSecret);break;default:throw new Error("Authentication method not yet supported:"+ni+". Open a feature request if you want this!")}const ri=await this.settings.fetch(ei,{method:"POST",body:Tn(Bn),headers:ti});let si,ai,li;if(ri.status!==204&&ri.headers.has("Content-Type")&&ri.headers.get("Content-Type").match(/^application\/(.*\+)?json/)&&(si=await ri.json()),ri.ok)return si;throw si!=null&&si.error?(ai="OAuth2 error "+si.error+".",si.error_description&&(ai+=" "+si.error_description),li=si.error):(ai="HTTP Error "+ri.status+" "+ri.statusText,ri.status===401&&this.settings.clientSecret&&(ai+=". It's likely that the clientId and/or clientSecret was incorrect"),li=null),new En.OAuth2HttpError(ai,li,ri,si)}async tokenResponseToOAuth2Token(Ln){var Bn;const ei=await Ln;if(!(ei!=null&&ei.access_token))throw console.warn("Invalid OAuth2 Token Response: ",ei),new TypeError("We received an invalid token response from an OAuth2 server.");return{accessToken:ei.access_token,expiresAt:ei.expires_in?Date.now()+1e3*ei.expires_in:null,refreshToken:(Bn=ei.refresh_token)!==null&&Bn!==void 0?Bn:null}}}},129:(He,We,Cn)=>{Object.defineProperty(We,"__esModule",{value:!0}),We.OAuth2AuthorizationCodeClient=void 0,We.generateCodeVerifier=async function(){const Bn=Sn();if(Bn){const ei=new Uint8Array(32);return Bn.getRandomValues(ei),Ln(ei)}{const ei=Cn(483);return new Promise((ti,ni)=>{ei.randomBytes(32,(ri,si)=>{ri&&ni(ri),ti(si.toString("base64url"))})})}},We.getCodeChallenge=An;const En=Cn(854);async function An(Bn){const ei=Sn();if(ei!=null&&ei.subtle)return["S256",Ln(await ei.subtle.digest("SHA-256",Tn(Bn)))];{const ti=Cn(483).createHash("sha256");return ti.update(Tn(Bn)),["S256",ti.digest("base64url")]}}function Sn(){if(typeof window<"u"&&window.crypto)return window.crypto;if(typeof self<"u"&&self.crypto)return self.crypto;const Bn=Cn(483);return Bn.webcrypto?Bn.webcrypto:null}function Tn(Bn){const ei=new Uint8Array(Bn.length);for(let ti=0;ti<Bn.length;ti++)ei[ti]=255&Bn.charCodeAt(ti);return ei}function Ln(Bn){return btoa(String.fromCharCode(...new Uint8Array(Bn))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}We.OAuth2AuthorizationCodeClient=class{constructor(Bn){this.client=Bn}async getAuthorizeUri(Bn){const[ei,ti]=await Promise.all([Bn.codeVerifier?An(Bn.codeVerifier):void 0,this.client.getEndpoint("authorizationEndpoint")]),ni=new URLSearchParams({client_id:this.client.settings.clientId,response_type:"code",redirect_uri:Bn.redirectUri});if(ei&&(ni.set("code_challenge_method",ei[0]),ni.set("code_challenge",ei[1])),Bn.state&&ni.set("state",Bn.state),Bn.scope&&ni.set("scope",Bn.scope.join(" ")),Bn.resource)for(const ri of[].concat(Bn.resource))ni.append("resource",ri);if(Bn.responseMode&&Bn.responseMode!=="query"&&ni.append("response_mode",Bn.responseMode),Bn.extraParams)for(const[ri,si]of Object.entries(Bn.extraParams)){if(ni.has(ri))throw new Error(`Property in extraParams would overwrite standard property: ${ri}`);ni.set(ri,si)}return ti+"?"+ni.toString()}async getTokenFromCodeRedirect(Bn,ei){const{code:ti}=this.validateResponse(Bn,{state:ei.state});return this.getToken({code:ti,redirectUri:ei.redirectUri,codeVerifier:ei.codeVerifier})}validateResponse(Bn,ei){var ti;let ni=(Bn=new URL(Bn)).searchParams;if(!ni.has("code")&&!ni.has("error")&&Bn.hash.length>0&&(ni=new URLSearchParams(Bn.hash.slice(1))),ni.has("error"))throw new En.OAuth2Error((ti=ni.get("error_description"))!==null&&ti!==void 0?ti:"OAuth2 error",ni.get("error"));if(!ni.has("code"))throw new Error(`The url did not contain a code parameter ${Bn}`);if(ei.state&&ei.state!==ni.get("state"))throw new Error(`The "state" parameter in the url did not match the expected value of ${ei.state}`);return{code:ni.get("code"),scope:ni.has("scope")?ni.get("scope").split(" "):void 0}}async getToken(Bn){const ei={grant_type:"authorization_code",code:Bn.code,redirect_uri:Bn.redirectUri,code_verifier:Bn.codeVerifier,resource:Bn.resource};return this.client.tokenResponseToOAuth2Token(this.client.request("tokenEndpoint",ei))}}},854:(He,We)=>{Object.defineProperty(We,"__esModule",{value:!0}),We.OAuth2HttpError=We.OAuth2Error=void 0;class Cn extends Error{constructor(An,Sn){super(An),this.oauth2Code=Sn}}We.OAuth2Error=Cn,We.OAuth2HttpError=class extends Cn{constructor(En,An,Sn,Tn){super(En,An),this.httpCode=Sn.status,this.response=Sn,this.parsedBody=Tn}}},238:(He,We)=>{Object.defineProperty(We,"__esModule",{value:!0}),We.OAuth2Fetch=void 0,We.OAuth2Fetch=class{constructor(Cn){this.token=null,this.activeGetStoredToken=null,this.activeRefresh=null,this.refreshTimer=null,(Cn==null?void 0:Cn.scheduleRefresh)===void 0&&(Cn.scheduleRefresh=!0),this.options=Cn,Cn.getStoredToken&&(this.activeGetStoredToken=(async()=>{this.token=await Cn.getStoredToken(),this.activeGetStoredToken=null})()),this.scheduleRefresh()}async fetch(Cn,En){const An=new Request(Cn,En);return this.mw()(An,Sn=>fetch(Sn))}mw(){return async(Cn,En)=>{const An=await this.getAccessToken();let Sn=Cn.clone();Sn.headers.set("Authorization","Bearer "+An);let Tn=await En(Sn);if(!Tn.ok&&Tn.status===401){const Ln=await this.refreshToken();Sn=Cn.clone(),Sn.headers.set("Authorization","Bearer "+Ln.accessToken),Tn=await En(Sn)}return Tn}}async getToken(){return this.token&&(this.token.expiresAt===null||this.token.expiresAt>Date.now())?this.token:this.refreshToken()}async getAccessToken(){return await this.activeGetStoredToken,(await this.getToken()).accessToken}async refreshToken(){var Cn,En;if(this.activeRefresh)return this.activeRefresh;const An=this.token;this.activeRefresh=(async()=>{var Sn,Tn;let Ln=null;try{An!=null&&An.refreshToken&&(Ln=await this.options.client.refreshToken(An))}catch{console.warn("[oauth2] refresh token not accepted, we'll try reauthenticating")}if(Ln||(Ln=await this.options.getNewToken()),!Ln){const Bn=new Error("Unable to obtain OAuth2 tokens, a full reauth may be needed");throw(Tn=(Sn=this.options).onError)===null||Tn===void 0||Tn.call(Sn,Bn),Bn}return Ln})();try{const Sn=await this.activeRefresh;return this.token=Sn,(En=(Cn=this.options).storeToken)===null||En===void 0||En.call(Cn,Sn),this.scheduleRefresh(),Sn}catch(Sn){throw this.options.onError&&this.options.onError(Sn),Sn}finally{this.activeRefresh=null}}scheduleRefresh(){var Cn;if(!this.options.scheduleRefresh||(this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null),!(!((Cn=this.token)===null||Cn===void 0)&&Cn.expiresAt)||!this.token.refreshToken))return;const En=this.token.expiresAt-Date.now();En<12e4||(this.refreshTimer=setTimeout(async()=>{try{await this.refreshToken()}catch(An){console.error("[fetch-mw-oauth2] error while doing a background OAuth2 auto-refresh",An)}},En-6e4))}}},483:()=>{}},ke={};function Be(He){var We=ke[He];if(We!==void 0)return We.exports;var Cn=ke[He]={exports:{}};return Te[He](Cn,Cn.exports,Be),Cn.exports}var Ue={};return(()=>{var He=Ue;Object.defineProperty(He,"__esModule",{value:!0}),He.OAuth2HttpError=He.OAuth2Error=He.OAuth2Fetch=He.generateCodeVerifier=He.OAuth2AuthorizationCodeClient=He.OAuth2Client=void 0;var We=Be(985);Object.defineProperty(He,"OAuth2Client",{enumerable:!0,get:function(){return We.OAuth2Client}});var Cn=Be(129);Object.defineProperty(He,"OAuth2AuthorizationCodeClient",{enumerable:!0,get:function(){return Cn.OAuth2AuthorizationCodeClient}}),Object.defineProperty(He,"generateCodeVerifier",{enumerable:!0,get:function(){return Cn.generateCodeVerifier}});var En=Be(238);Object.defineProperty(He,"OAuth2Fetch",{enumerable:!0,get:function(){return En.OAuth2Fetch}});var An=Be(854);Object.defineProperty(He,"OAuth2Error",{enumerable:!0,get:function(){return An.OAuth2Error}}),Object.defineProperty(He,"OAuth2HttpError",{enumerable:!0,get:function(){return An.OAuth2HttpError}})})(),Ue})())}(oauth2Client_min)),oauth2Client_min.exports}var oauth2Client_minExports=requireOauth2Client_min();const IAM_URL=window.__ENV__.IAM_URL,IAM_REALM=window.__ENV__.IAM_REALM,IAM_CLIENT_ID=window.__ENV__.IAM_CLIENT_ID,IAM_CLIENT_SECRET=window.__ENV__.IAM_CLIENT_SECRET,IAM_ENTREPOT_API_URL=window.__ENV__.IAM_ENTREPOT_API_URL;var _l,Nc,wu,Ff,Gf;class ServiceLocal extends ServiceBase{constructor(Te){super(Te);Iu(this,wu);Iu(this,_l);Iu(this,Nc);return this.session=Te.session||"",this.codeVerifier=Te.codeVerifier||"",this.code=Te.code||"",this.token=Te.token||"",this.error=Te.error||{},Hc(this,_l,null),Hc(this,Nc,null),this.api=IAM_ENTREPOT_API_URL,ac(this,wu,Ff).call(this,Te),this}async isAccessValided(){const Te=inject("emitter");var ke=useServiceStore();const Be=location.search,Ue=new URLSearchParams(Be);var He=Ue.get("code"),We=Ue.get("session_state"),Cn=Ue.get("error"),En=null,An="no-auth";return He&&We&&(this.session=We,this.code=He,this.authenticated=!0,An="login",En=this.getAccessToken().then(Sn=>{if(Sn)return this.getUserMe().then(Tn=>(console.debug(Tn),Te.dispatchEvent("service:user:loaded",{bubbles:!0,detail:Tn}),this.getDocuments().then(Ln=>{console.debug(Ln),Te.dispatchEvent("service:documents:loaded",{bubbles:!0,detail:Ln})}).catch(Ln=>{throw new Error("Error to get documents ("+Ln.message+")")}))).catch(Tn=>{throw new Error("Error to get user info ("+Tn.message+")")})}).then(()=>An).catch(Sn=>{throw new Error("Error to get token ("+Sn.message+")")})),!He&&We&&We===this.session&&(this.session=null,this.code=null,this.authenticated=!1,this.token=null,this.user={},this.documents={},this.error={},An="logout",En=new Promise((Sn,Tn)=>{Sn(An)})),Cn&&(this.error={name:Cn,message:Ue.get("error_description")},En=new Promise((Sn,Tn)=>{Tn(this.error)})),ke.setService(this),En||Promise.resolve(An)}async getAccessLogin(){const Te=this.url.includes("login")?this.url:this.url+"/login",ke=await oauth2Client_minExports.generateCodeVerifier();this.codeVerifier=ke,localStorage.setItem("codeVerifier",ke);var Be=await yl(this,_l).authorizationCode.getAuthorizeUri({redirectUri:Te,state:"some-string",codeVerifier:ke,scope:["openid","profile","email"],extraParams:{approval_prompt:"auto"},responseMode:"query"});return Be}async getAccessLogout(){const Te=this.url.includes("logout")?this.url:this.url+"/logout";var ke=`${yl(this,_l).settings.server}/realms/${yl(this,_l).settings.index}/protocol/openid-connect/logout?
      scope=openid%20profile%20email&
      approval_prompt=auto&
      response_type=code&
      post_logout_redirect_uri=${Te}?session_state=${this.session}&
      client_id=${yl(this,_l).settings.clientId}`.replace(/ /g,"");return Promise.resolve(ke)}async getAccessToken(){const Te=this.url.includes("login")?this.url:this.url+"/login";var ke=this.codeVerifier||localStorage.getItem("codeVerifier"),Be=await yl(this,_l).authorizationCode.getTokenFromCodeRedirect(location,{redirectUri:Te,state:"some-string",codeVerifier:ke});this.token=Be;const Ue=new Date(Be.expiresAt);console.debug("expires token",Ue),yl(this,Nc).token=Be;var He=useServiceStore();return He.setService(this),this.token}}_l=new WeakMap,Nc=new WeakMap,wu=new WeakSet,Ff=function(Te){var ke=Te.client?Te.client.settings:{server:`${IAM_URL}`,clientId:`${IAM_CLIENT_ID}`,clientSecret:`${IAM_CLIENT_SECRET}`,index:`${IAM_REALM}`,tokenEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/token`,authorizationEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/auth`,discoveryEndpoint:`/realms/${IAM_REALM}/.well-known/openid-configuration`,revocationEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/revoke`};Hc(this,_l,new oauth2Client_minExports.OAuth2Client(ke)),Hc(this,Nc,new oauth2Client_minExports.OAuth2Fetch({client:yl(this,_l),scheduleRefresh:!0,getNewToken:async()=>{if(this.token&&Object.keys(this.token).length&&this.token.expiresAt>Date.now())return this.token;var Be=await yl(this,_l).authorizationCode.getToken({code:this.code,redirectUri:this.url,code_verifier:this.codeVerifier});return Be},storeToken:Be=>{this.token=Be},getStoredToken:()=>{const Be=ac(this,wu,Gf).call(this);return Be&&Object.keys(Be).length?Be:null},onError:Be=>{console.error(Be)}})),this.setFetch(yl(this,Nc).fetch.bind(yl(this,Nc)))},Gf=function(){var Te=JSON.parse(localStorage.getItem("service"));return Te?Te.connexion.token:null};const IAM_REDIRECT_REMOTE=window.__ENV__.IAM_REDIRECT_REMOTE,IAM_ENTREPOT_API_URL_REMOTE=window.__ENV__.IAM_ENTREPOT_API_URL_REMOTE;class ServiceRemote extends ServiceBase{constructor(e){return super(e),this.api=IAM_ENTREPOT_API_URL_REMOTE,this.setFetch(window.fetch),this}async isAccessValided(){const e=inject("emitter");var Te=useServiceStore();const ke=location.href.includes("login");console.log("route login ?",ke,location.href);const Be=location.search,Ue=new URLSearchParams(Be);var He=Ue.get("authentication_failed"),We=Ue.get("success"),Cn=null,En="no-auth";if(ke&&We!==null)if(parseInt(We,10)){this.authenticated=!0,En="login";try{const An=await this.getUserMe();console.debug(An),e.dispatchEvent("service:user:loaded",{bubbles:!0,detail:An});const Sn=await this.getDocuments();console.debug(Sn),e.dispatchEvent("service:documents:loaded",{bubbles:!0,detail:Sn}),Cn=Promise.resolve(En)}catch(An){console.error("Error:",An),Cn=Promise.reject("Error to get user info or documents ("+An.message+")")}}else Cn=Promise.reject("Erreur inattendue !");return!ke&&We!==null&&(this.authenticated=!1,this.user={},this.documents={},this.error={},En="logout",Cn=Promise.resolve(En)),He!==null&&(Cn=Promise.reject("Erreur inattendue !")),Te.setService(this),Cn||Promise.resolve(En)}async getAccessLogin(){return`${IAM_REDIRECT_REMOTE}/login?app=entree-carto`}async getAccessLogout(){return`${IAM_REDIRECT_REMOTE}/logout?app=entree-carto`}async getAccessToken(){}}const serviceFactotyCreate=Oe=>{var e=new ServiceBase(Oe);const Te=Oe.mode||e.mode;var ke;switch(Te){case"local":ke=new ServiceLocal(Oe);break;case"remote":ke=new ServiceRemote(Oe);break;default:ke=e;break}return ke},servicesSymbol=Symbol("vue-services-plugin");class PluginServices{constructor(e){console.debug("connexion",e),this.instance=serviceFactotyCreate(e)}install(e){e.provide(servicesSymbol,this),e.config.globalProperties.$services=this,e.provide("services",this.instance)}}function createServices(Oe){return new PluginServices(Oe)}function mitt(Oe){return{all:Oe=Oe||new Map,on:function(e,Te){var ke=Oe.get(e);ke?ke.push(Te):Oe.set(e,[Te])},off:function(e,Te){var ke=Oe.get(e);ke&&(Te?ke.splice(ke.indexOf(Te)>>>0,1):Oe.set(e,[]))},emit:function(e,Te){var ke=Oe.get(e);ke&&ke.slice().map(function(Be){Be(Te)}),(ke=Oe.get("*"))&&ke.slice().map(function(Be){Be(e,Te)})}}}var EVENTS={isNotRegistered:Oe=>!EVENTS.eventsName.includes(Oe),eventsName:["test:clicked","service:changed","service:documents:loaded","service:user:loaded","document:saved","document:updated","document:deleted","document:exported","document:shared","catalog:open:clicked","drawing:open:clicked","layerimport:open:clicked","searchengine:open:displayed","vector:edit:clicked","mapbox:edit:clicked","service:edit:clicked"]};const busEventSymbol=Symbol("vue-bus-event-plugin");class BusEvent{constructor(e){return console.debug("bus",e),this.emitter=mitt(),this}addEventListener(e,Te){EVENTS.isNotRegistered(e)||(onMounted(()=>this.emitter.on(e,Te)),onUnmounted(()=>this.emitter.off(e,Te)))}removeEventLstener(e,Te){EVENTS.isNotRegistered(e)||this.emitter.off(e,Te)}dispatchEvent(e,Te){if(EVENTS.isNotRegistered(e)){console.error("L'évenement n'a pas été enregistré dans le registre !");return}console.debug("dispatchEvent",e,this),this.emitter.emit(e,Te)}install(e){e.provide(busEventSymbol,this),e.config.globalProperties.$emitter=this,e.provide("emitter",this)}}function createBusEvent(Oe){return new BusEvent(Oe)}var __defProp=Object.defineProperty,__defProps=Object.defineProperties,__getOwnPropDescs=Object.getOwnPropertyDescriptors,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(Oe,e,Te)=>e in Oe?__defProp(Oe,e,{enumerable:!0,configurable:!0,writable:!0,value:Te}):Oe[e]=Te,__spreadValues=(Oe,e)=>{for(var Te in e||(e={}))__hasOwnProp.call(e,Te)&&__defNormalProp(Oe,Te,e[Te]);if(__getOwnPropSymbols)for(var Te of __getOwnPropSymbols(e))__propIsEnum.call(e,Te)&&__defNormalProp(Oe,Te,e[Te]);return Oe},__spreadProps=(Oe,e)=>__defProps(Oe,__getOwnPropDescs(e)),__objRest=(Oe,e)=>{var Te={};for(var ke in Oe)__hasOwnProp.call(Oe,ke)&&e.indexOf(ke)<0&&(Te[ke]=Oe[ke]);if(Oe!=null&&__getOwnPropSymbols)for(var ke of __getOwnPropSymbols(Oe))e.indexOf(ke)<0&&__propIsEnum.call(Oe,ke)&&(Te[ke]=Oe[ke]);return Te};const CLASS_PREFIX="Notivue__",DEFAULT_DURATION=6e3,NotificationTypeKeys={SUCCESS:"success",ERROR:"error",WARNING:"warning",INFO:"info",PROMISE:"promise",PROMISE_RESOLVE:"promise-resolve",PROMISE_REJECT:"promise-reject"},success$1={title:"",message:"",duration:DEFAULT_DURATION,ariaLive:"polite",ariaRole:"status"},error$1=__spreadProps(__spreadValues({},success$1),{ariaLive:"assertive",ariaRole:"alert"}),promise=__spreadProps(__spreadValues({},success$1),{duration:1/0}),warning=__spreadProps(__spreadValues({},error$1),{ariaLive:"polite"}),info=__spreadValues({},success$1),DEFAULT_NOTIFICATION_OPTIONS={[NotificationTypeKeys.SUCCESS]:success$1,[NotificationTypeKeys.ERROR]:error$1,[NotificationTypeKeys.WARNING]:warning,[NotificationTypeKeys.INFO]:info,[NotificationTypeKeys.PROMISE]:promise,[NotificationTypeKeys.PROMISE_RESOLVE]:success$1,[NotificationTypeKeys.PROMISE_REJECT]:error$1},DEFAULT_CONFIG={pauseOnHover:!0,pauseOnTouch:!0,pauseOnTabChange:!0,enqueue:!1,position:"top-center",teleportTo:"body",notifications:DEFAULT_NOTIFICATION_OPTIONS,limit:1/0,avoidDuplicates:!1,transition:"transform 0.35s cubic-bezier(0.5, 1, 0.25, 1)",animations:{enter:CLASS_PREFIX+"enter",leave:CLASS_PREFIX+"leave",clearAll:CLASS_PREFIX+"clearAll"}},push$1=createPushMock();function setPush(Oe){Object.assign(push$1,Oe)}function createPush(Oe){let e=0;function Te(ke,Be,Ue=`${e++}`){return typeof unref(ke)=="string"&&(ke={message:ke}),Oe.push(__spreadProps(__spreadValues({},ke),{id:Ue,type:Be})),{id:Ue,clear:()=>Oe.clear(Ue),destroy:()=>Oe.clear(Ue,{isDestroy:!0})}}return{success:ke=>Te(ke,NotificationTypeKeys.SUCCESS),error:ke=>Te(ke,NotificationTypeKeys.ERROR),warning:ke=>Te(ke,NotificationTypeKeys.WARNING),info:ke=>Te(ke,NotificationTypeKeys.INFO),promise:ke=>{const{id:Be,clear:Ue,destroy:He}=Te(ke,NotificationTypeKeys.PROMISE);return{resolve:We=>Te(We,NotificationTypeKeys.PROMISE_RESOLVE,Be),reject:We=>Te(We,NotificationTypeKeys.PROMISE_REJECT,Be),success:We=>Te(We,NotificationTypeKeys.PROMISE_RESOLVE,Be),error:We=>Te(We,NotificationTypeKeys.PROMISE_REJECT,Be),clear:Ue,destroy:He}},load(ke){return this.promise(ke)},clearAll:()=>Oe.clearAll(),destroyAll:()=>Oe.destroyAll()}}function createPushMock(){const Oe=new Proxy({},{get:()=>()=>{}});return createPush(Oe)}const isSSR=typeof window>"u";function mergeDeep(Oe,e){const Te=__spreadValues({},Oe);for(const ke in e)e.hasOwnProperty(ke)&&(isPlainObject(e[ke])?Te[ke]=mergeDeep(Oe[ke],e[ke]):Te[ke]=e[ke]);return Te}function mergeNotificationOptions(Oe,e){return e.props||(e.props={}),__spreadValues(__spreadValues(__spreadValues(__spreadValues({},Oe[e.type]),Oe.global),e),e.type==="promise"?{duration:1/0}:{})}function isPlainObject(Oe){if(Object.prototype.toString.call(Oe)!=="[object Object]")return!1;const e=Object.getPrototypeOf(Oe);return e===null||Object.getPrototypeOf(e)===null}function createConfigRefs(Oe,e,Te){const ke=mergeDeep(Oe,e);function Be(Ue){return customRef((He,We)=>({get(){return He(),Ue},set(Cn){Te.value&&(Ue=Cn,We())}}))}for(const Ue in ke)ke[Ue]=Be(ke[Ue]);return ke}function toRawConfig(Oe){return Object.entries(Oe).reduce((e,[Te,{value:ke}])=>__spreadProps(__spreadValues({},e),{[Te]:toRaw(ke)}),{})}const isStatic=Oe=>Oe===NotificationTypeKeys.SUCCESS||Oe===NotificationTypeKeys.ERROR||Oe===NotificationTypeKeys.WARNING||Oe===NotificationTypeKeys.INFO,internalKeys=["timeout","resumedAt","remaining","animationAttrs","positionStyles"];function getSlotItem(Oe){return Object.fromEntries(Object.entries(Oe).filter(([e])=>!internalKeys.includes(e)))}function createStore$1(Oe,e){const Te=createConfig(Oe,e),ke=createQueue(),Be=createItems(Te,ke),Ue=createElements(),He=createAnimations(Te,Be,ke,Ue),We=createTimeouts(Be,He);return{config:Te,queue:ke,items:Be,elements:Ue,animations:He,timeouts:We}}function createConfig(Oe,e){const Te=createConfigRefs(DEFAULT_CONFIG,Oe,e);function ke(Be){if(e.value){typeof Be=="function"&&(Be=Be(toRawConfig(Te)));for(const Ue in Be)typeof Te[Ue].value=="object"?Te[Ue].value=mergeDeep(Te[Ue].value,Be[Ue]):Te[Ue].value=Be[Ue]}}return __spreadProps(__spreadValues({},Te),{update:ke})}function createQueue(){return{entries:shallowRef([]),get length(){return this.entries.value.length},add(Oe){this.entries.value.push(Oe),this.triggerRef()},get(Oe){return this.entries.value.find(e=>e.id===Oe)},update(Oe,e){const Te=this.get(Oe);Te&&Object.assign(Te,e)},remove(Oe){this.entries.value=this.entries.value.filter(e=>e.id!==Oe)},triggerRef(){triggerRef(this.entries)},clear(){this.entries.value=[]}}}function createItems(Oe,e){return{entries:shallowRef([]),get length(){return this.entries.value.length},lifecycleEventsCount:ref(0),addLifecycleEvent(){this.lifecycleEventsCount.value++},clearLifecycleEvents(){this.lifecycleEventsCount.value=0},add(Te){this.entries.value.unshift(Te),this.triggerRef(),this.addLifecycleEvent()},addFromQueue(){const Te=__spreadProps(__spreadValues({},e.entries.value[0]),{timeout:e.entries.value[0].timeout(),createdAt:Date.now()});e.remove(Te.id),this.add(Te)},findDupe(Te){return this.entries.value.find(ke=>unref(ke.message).replace(/\uFEFF/g,"")===unref(Te.message).replace(/\uFEFF/g,"")&&unref(ke.title)===unref(Te.title)&&ke.type===Te.type)},get(Te){return this.entries.value.find(ke=>ke.id===Te)},update(Te,ke){const Be=this.get(Te);Be&&Object.assign(Be,ke)},triggerRef(){triggerRef(this.entries)},updateAll(Te){this.entries.value=this.entries.value.map(Te)},remove(Te){this.entries.value=this.entries.value.filter(Be=>Be.id!==Te),e.length>0&&this.length<Oe.limit.value&&this.addFromQueue()},clear(){this.entries.value=[]}}}function createElements(){return{root:ref(null),rootAttrs:shallowRef({}),setRootAttrs(Oe){this.rootAttrs.value=Oe},items:ref([]),getSortedItems(){return this.items.value.sort((Oe,e)=>+e.dataset.notivueItem-+Oe.dataset.notivueItem)},containers:ref([])}}function createAnimations(Oe,e,Te,ke){return{isReducedMotion:ref(!1),setReducedMotion(Be){this.isReducedMotion.value=Be},playLeave(Be,{isDestroy:Ue=!1,isUserTriggered:He=!1}={}){const{leave:We=""}=Oe.animations.value,Cn=e.get(Be);window.clearTimeout(Cn==null?void 0:Cn.timeout);const En=An=>{var Sn;An&&An.currentTarget!==An.target||((Sn=Cn==null?void 0:Cn[He?"onManualClear":"onAutoClear"])==null||Sn.call(Cn,getSlotItem(Cn)),e.remove(Be))};if(!Cn||!We||Ue||this.isReducedMotion.value)return e.addLifecycleEvent(),En();e.update(Be,{positionStyles:__spreadProps(__spreadValues({},Cn.positionStyles),{zIndex:-1}),animationAttrs:{class:We,onAnimationend:En}}),e.addLifecycleEvent()},playClearAll(){e.entries.value.forEach(He=>window.clearTimeout(He.timeout));const{clearAll:Be=""}=Oe.animations.value,Ue=()=>{Te.clear(),e.clear()};if(!Be||this.isReducedMotion.value)return Ue();ke.setRootAttrs({class:Be,onAnimationend:Ue})},updatePositions({isImmediate:Be=!1}={}){const Ue=this.isReducedMotion.value||Be,He=Oe.position.value.indexOf("top")===0,We=Oe.animations.value.leave;let Cn=0;for(const En of ke.getSortedItems()){const An=En.dataset.notivueItem,Sn=e.get(An);!En||!Sn||Sn.animationAttrs.class===We||(e.update(An,{positionStyles:{transform:`translate3d(0, ${Cn}px, 0)`,transition:Ue?"none":Oe.transition.value}}),Cn+=(He?1:-1)*En.clientHeight)}e.triggerRef()}}}function createTimeouts(Oe,e){return{isStreamPaused:ref(!1),isStreamFocused:ref(!1),debounceTimeout:void 0,setStreamPause(Te=!0){this.isStreamPaused.value=Te},setStreamFocus(Te=!0){this.isStreamFocused.value=Te},clearDebounceTimeout(){window.clearTimeout(this.debounceTimeout)},reset(){this.clearDebounceTimeout(),this.setStreamPause(!1),this.setStreamFocus(!1)},create(Te,ke){if(!this.isStreamPaused.value&&Number.isFinite(ke)&&ke>0)return window.setTimeout(()=>e.playLeave(Te),ke)},pause(){Oe.length===0||this.isStreamPaused.value||(this.setStreamPause(),Oe.updateAll(Te=>{var ke;if(window.clearTimeout(Te.timeout),Te.duration===1/0)return Te;let Be=0;return Te.remaining==null?Be=Te.duration-(Date.now()-((ke=Te.resumedAt)!=null?ke:Te.createdAt)):Be=Te.remaining-(Date.now()-Te.resumedAt),__spreadProps(__spreadValues({},Te),{remaining:Be})}))},resume(){Oe.length===0||!this.isStreamPaused.value||(this.setStreamPause(!1),Oe.updateAll(Te=>{var ke;return window.clearTimeout(Te.timeout),Te.duration===1/0?Te:__spreadProps(__spreadValues({},Te),{timeout:this.create(Te.id,(ke=Te.remaining)!=null?ke:Te.duration),resumedAt:Date.now()})}))},resumeWithDebounce(Te){this.debounceTimeout=window.setTimeout(()=>{this.resume()},Te)}}}function createPushProxies({config:Oe,items:e,queue:Te,animations:ke,timeouts:Be}){return{destroyAll(){Te.clear(),e.clear()},clearAll(){ke.playClearAll()},clear(Ue,{isDestroy:He=!1}={}){var We;((We=e.entries.value[e.entries.value.length-1])==null?void 0:We.id)===Ue&&Be.resume(),ke.playLeave(Ue,{isUserTriggered:!0,isDestroy:He})},push(Ue){const He=mergeNotificationOptions(Oe.notifications.value,Ue),We=Date.now();if(Oe.avoidDuplicates.value&&isStatic(He.type)){const En=e.findDupe(He);En&&(window.clearTimeout(En.timeout),e.update(En.id,{createdAt:We,duration:He.duration,remaining:void 0,timeout:Be.create(En.id,He.duration),duplicateCount:En.duplicateCount+1}),isRef(En.message)?En.message.value+="\uFEFF":En.message+="\uFEFF",e.triggerRef());const An=e.findDupe.call(Te,He);if(An&&(Te.update(An.id,{duration:He.duration,createdAt:We,duplicateCount:An.duplicateCount+1}),Te.triggerRef()),An||En)return}const Cn=()=>Be.create(He.id,He.duration);if(Ue.type===NotificationTypeKeys.PROMISE_RESOLVE||Ue.type===NotificationTypeKeys.PROMISE_REJECT)Te.get(He.id)?(Te.update(He.id,__spreadProps(__spreadValues({},He),{createdAt:We,timeout:Cn})),Te.triggerRef()):(e.update(He.id,__spreadProps(__spreadValues({},He),{createdAt:We,timeout:Cn()})),e.triggerRef());else{const En=Oe.enqueue.value,An=e.length>=Oe.limit.value,Sn=!En&&An,Tn=En&&!Ue.skipQueue&&An;Sn&&e.entries.value.slice(Oe.limit.value-1).forEach(Bn=>Be.create(Bn.id,1));const Ln=__spreadProps(__spreadValues({},He),{createdAt:We,duplicateCount:0,animationAttrs:{class:ke.isReducedMotion.value?"":Oe.animations.value.enter,onAnimationend(){Ln.animationAttrs.class===Oe.animations.value.enter&&e.update(He.id,{animationAttrs:{class:"",onAnimationend:()=>{}}})}},timeout:Tn?Cn:Cn(),clear:()=>this.clear(He.id),destroy:()=>this.clear(He.id,{isDestroy:!0})});Tn?Te.add(Ln):e.add(Ln)}}}}const notivueInstanceInjectionKey=Symbol(),notivueInjectionKey=Symbol();function createStoreWatchers(Oe){return[watch(Oe.items.lifecycleEventsCount,()=>{Oe.animations.updatePositions()},{flush:"post"}),watch(Oe.config.position,()=>{Oe.animations.updatePositions({isImmediate:!0})},{flush:"post"}),watch(()=>Oe.items.length===0&&Oe.queue.length===0,e=>{e&&(Oe.timeouts.reset(),Oe.elements.setRootAttrs({}))},{flush:"post"})]}function createInstance(Oe){const e=ref(Oe),Te=readonly(e);function ke(Be,Ue){const He=()=>createStoreWatchers(Be);Oe&&setPush(Ue);let We=Oe?He():[()=>{}];return{isRunning:Te,startInstance(){e.value||(setPush(Ue),We=He(),e.value=!0)},stopInstance(){e.value&&(Be.items.clear(),Be.queue.clear(),Be.items.clearLifecycleEvents(),setPush(createPushMock()),We.forEach(En=>En()),e.value=!1)}}}return{isRunning:Te,setupInstance:ke}}function createProvides(Oe,e){const{setupInstance:Te,isRunning:ke}=createInstance(Oe),Be=createStore$1(e,ke),Ue=createPushProxies(Be),He=Object.freeze(createPush(Ue)),We=Te(Be,He);return{store:Be,instance:We,push:He}}function createNotivue$1(Oe={}){return{install(e){var Te;const ke=Oe,{startOnCreation:Be=!0}=ke,Ue=__objRest(ke,["startOnCreation"]),{store:He,instance:We,push:Cn}=createProvides(Be,Ue);e.provide(notivueInstanceInjectionKey,We),e.provide(notivueInjectionKey,He),(Te=e.config.globalProperties).$push||(Te.$push=Cn)}}}function useStore(){return inject(notivueInjectionKey)}function useNotivueInstance(){return isSSR?{isRunning:ref(!0),startInstance:()=>{},stopInstance:()=>{}}:inject(notivueInstanceInjectionKey)}function useNotivue(){if(isSSR)return __spreadProps(__spreadValues({},toRefs(reactive(DEFAULT_CONFIG))),{update:()=>{},isTopAlign:computed(()=>!0),isStreamPaused:ref(!1)});const Oe=useStore();return __spreadProps(__spreadValues({},Oe.config),{isStreamPaused:readonly(Oe.timeouts.isStreamPaused),isTopAlign:computed(()=>Oe.config.position.value.indexOf("top")===0)})}const DEFAULT_PROPS$1={listAriaLabel:"Notifications"},NotivueClientOnly=defineComponent({setup(Oe,{slots:e,attrs:Te}){const ke=ref(!1);return onMounted(()=>ke.value=!0),()=>{var Be;return ke.value?(Be=e.default)==null?void 0:Be.call(e):createElementBlock("span",Te,"")}}}),isMouse=Oe=>Oe.pointerType==="mouse";function getAriaLabel(Oe){return`${Oe.title?`${Oe.title}: `:""}${Oe.message}`}const _hoisted_1$a$1=["role","aria-live"],_sfc_main$g$1=defineComponent({__name:"AriaLive",props:{item:{}},setup(Oe){const e=Oe,Te={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",border:"0"};return(ke,Be)=>(openBlock(),createElementBlock("div",{style:Te,role:e.item.ariaRole,"aria-live":e.item.ariaLive,key:`${ke.item.id}_${ke.item.type}`,"aria-atomic":"true"},toDisplayString(unref(getAriaLabel)(e.item)),9,_hoisted_1$a$1))}});function useMouseEvents(){const{timeouts:Oe,config:e}=useStore();function Te(Be){isMouse(Be)&&Oe.pause()}function ke(Be){isMouse(Be)&&Oe.resume()}return computed(()=>e.pauseOnHover.value&&!Oe.isStreamFocused.value?{onPointerenter:Te,onPointerleave:ke}:{})}function useTouchEvents(){const{timeouts:Oe,config:e}=useStore();function Te(ke){isMouse(ke)||(Oe.clearDebounceTimeout(),Oe.pause(),Oe.resumeWithDebounce(2e3))}return onBeforeUnmount(()=>{Oe.clearDebounceTimeout()}),computed(()=>e.pauseOnTouch.value&&!Oe.isStreamFocused.value?{onPointerdown:Te}:{})}const boxSizing={boxSizing:"border-box"},baseStyles={list:__spreadProps(__spreadValues({},boxSizing),{display:"flex",justifyContent:"center",listStyle:"none",margin:"0 auto",maxWidth:"var(--nv-root-width, 100%)",padding:"0",pointerEvents:"none",position:"fixed",zIndex:"var(--nv-z, 500)"}),listItem:__spreadProps(__spreadValues({},boxSizing),{display:"flex",margin:"0",position:"absolute",transitionProperty:"transform",width:"100%"}),itemContainer:__spreadProps(__spreadValues({},boxSizing),{maxWidth:"100%",padding:"0 0 var(--nv-gap, 0.75rem) 0",pointerEvents:"auto"})};function useNotivueStyles(){const{isTopAlign:Oe,position:e}=useNotivue(),Te=computed(()=>{const Be=Oe.value,Ue=[`var(--nv-root-top, ${Be?"1.25rem":"0px"})`,"var(--nv-root-right, 1.25rem)",`var(--nv-root-bottom, ${Be?"0px":"1.25rem"})`,"var(--nv-root-left, 1.25rem)"],He=Ue.map(We=>`calc(-1 * ${We})`);return Be?He.splice(2,1,"0px"):He.splice(0,1,"0px"),{inset:Ue.join(" "),clipPath:`inset(${He.join(" ")})`}}),ke=computed(()=>({[Oe.value?"top":"bottom"]:"0",justifyContent:`var(--nv-root-x-align, ${e.value.endsWith("left")?"flex-start":e.value.endsWith("right")?"flex-end":"center"})`}));return computed(()=>({list:__spreadValues(__spreadValues({},baseStyles.list),Te.value),listItem:__spreadValues(__spreadValues({},baseStyles.listItem),ke.value),itemContainer:baseStyles.itemContainer}))}function useWindowSize(Oe){function e(){window.matchMedia("(max-width: 1100px)").matches&&Oe()}onMounted(()=>{window.addEventListener("resize",e)}),onBeforeUnmount(()=>{window.removeEventListener("resize",e)})}function useResizeListObserver(Oe,e){let Te;const ke=new WeakSet;onMounted(()=>{Te=new ResizeObserver((Be,Ue)=>{for(const He of Be)ke.has(He.target)?Object.values(He.contentRect.toJSON()).every(We=>We===0)?(ke.delete(He.target),Ue.unobserve(He.target)):(e(),ke.delete(He.target),Ue.unobserve(He.target)):ke.add(He.target)})}),watch(Oe,Be=>{Be.length>0&&Be.forEach(Ue=>Te==null?void 0:Te.observe(Ue))},{flush:"post"}),onBeforeUnmount(()=>{Te==null||Te.disconnect()})}function useSizes(){const{elements:Oe,animations:e}=useStore();useWindowSize(()=>e.updatePositions({isImmediate:!0})),useResizeListObserver(Oe.items.value,()=>e.updatePositions())}function useWindowFocus(){const{config:Oe,timeouts:e}=useStore();function Te(){e.isStreamFocused.value||Oe.pauseOnTabChange.value&&e.resume()}function ke(){e.isStreamFocused.value||Oe.pauseOnTabChange.value&&e.pause()}onMounted(()=>{window.addEventListener("focus",Te),window.addEventListener("blur",ke)}),onBeforeUnmount(()=>{window.removeEventListener("focus",Te),window.removeEventListener("blur",ke)})}function useReducedMotion(){const{animations:Oe}=useStore(),e=window.matchMedia("(prefers-reduced-motion: reduce)"),Te=()=>Oe.setReducedMotion(e.matches);onMounted(()=>{var ke;Te(),(ke=e.addEventListener)==null||ke.call(e,"change",Te)}),onBeforeUnmount(()=>{var ke;(ke=e.removeEventListener)==null||ke.call(e,"change",Te)})}const _hoisted_1$9$1=["data-notivue-align","aria-label"],_hoisted_2$9$1=["data-notivue-item","aria-setsize","aria-posinset"],_hoisted_3$6=["aria-label","tabindex","data-notivue-container"],_sfc_main$f$1=defineComponent({__name:"NotivueImpl",props:mergeDefaults({class:{},containersTabIndex:{},listAriaLabel:{},styles:{}},DEFAULT_PROPS$1),setup(Oe){const e=Oe,{config:Te,items:ke,elements:Be}=useStore(),Ue=useNotivueStyles(),He=useMouseEvents(),We=useTouchEvents();return useReducedMotion(),useWindowFocus(),useSizes(),(Cn,En)=>{var An;return openBlock(),createBlock(Teleport,{to:unref(Te).teleportTo.value===!1?void 0:unref(Te).teleportTo.value,disabled:unref(Te).teleportTo.value===!1},[unref(ke).entries.value.length>0?(openBlock(),createElementBlock("ol",mergeProps({key:0},__spreadValues(__spreadValues(__spreadValues({},unref(He)),unref(We)),unref(Be).rootAttrs.value),{"data-notivue-align":unref(Te).position.value.split("-")[0],"aria-label":e.listAriaLabel,ref:unref(Be).root,class:e.class,style:__spreadValues(__spreadValues({},unref(Ue).list),(An=e.styles)==null?void 0:An.list)}),[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ke).entries.value,(Sn,Tn)=>{var Ln,Bn,ei,ti;return openBlock(),createElementBlock("li",{tabindex:"-1",key:Sn.id,"data-notivue-item":Sn.id,"aria-setsize":unref(ke).length,"aria-posinset":Tn+1,ref_for:!0,ref:unref(Be).items,style:normalizeStyle(__spreadValues(__spreadValues(__spreadValues({},unref(Ue).listItem),Sn.positionStyles),(Ln=e.styles)==null?void 0:Ln.listItem))},[Sn.ariaLiveOnly?(openBlock(),createBlock(_sfc_main$g$1,{key:0,item:Sn},null,8,["item"])):(openBlock(),createElementBlock("div",mergeProps({key:1,ref_for:!0},Sn.animationAttrs,{"aria-label":unref(getAriaLabel)(Sn),tabindex:(ei=(Bn=Cn.containersTabIndex)==null?void 0:Bn[Sn.id])!=null?ei:-1,"data-notivue-container":Sn.id,ref_for:!0,ref:unref(Be).containers,style:__spreadValues(__spreadValues({},unref(Ue).itemContainer),(ti=e.styles)==null?void 0:ti.itemContainer)}),[renderSlot(Cn.$slots,"default",mergeProps({ref_for:!0},unref(getSlotItem)(Sn)))],16,_hoisted_3$6))],12,_hoisted_2$9$1)}),128))],16,_hoisted_1$9$1)):createCommentVNode("",!0)],8,["to","disabled"])}}}),_sfc_main$e$1=defineComponent({__name:"Notivue",props:mergeDefaults({class:{},containersTabIndex:{},listAriaLabel:{},styles:{}},DEFAULT_PROPS$1),setup(Oe){const e=Oe,{isRunning:Te}=useNotivueInstance();return(ke,Be)=>(openBlock(),createBlock(unref(NotivueClientOnly),null,{default:withCtx(()=>[unref(Te)?(openBlock(),createBlock(_sfc_main$f$1,normalizeProps(mergeProps({key:0},e)),{default:withCtx(Ue=>[renderSlot(ke.$slots,"default",normalizeProps(guardReactiveProps(Ue)))]),_:3},16)):createCommentVNode("",!0)]),_:3}))}}),_hoisted_1$8$1=createBaseVNode("path",{d:"M6,-0c-3.308,-0 -6,2.692 -6,6c-0,3.308 2.692,6 6,6c3.308,-0 6,-2.692 6,-6c-0,-3.308 -2.692,-6 -6,-6Zm3.123,3.989l-3.877,4.616c-0.086,0.102 -0.213,0.162 -0.346,0.164l-0.008,0c-0.131,0 -0.256,-0.055 -0.343,-0.153l-1.662,-1.846c-0.081,-0.085 -0.126,-0.199 -0.126,-0.316c0,-0.254 0.209,-0.462 0.462,-0.462c0.135,0 0.263,0.059 0.35,0.161l1.307,1.451l3.536,-4.209c0.087,-0.101 0.215,-0.159 0.349,-0.159c0.253,-0 0.461,0.208 0.461,0.461c0,0.107 -0.036,0.21 -0.103,0.292Z"},null,-1),_hoisted_2$8$1=[_hoisted_1$8$1],_sfc_main$9$1=defineComponent({__name:"SuccessIcon",setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_2$8$1,16))}}),_hoisted_1$7$1=createBaseVNode("path",{d:"M6,-0c-3.308,-0 -6,2.692 -6,6c-0,3.308 2.692,6 6,6c3.308,-0 6,-2.692 6,-6c-0,-3.308 -2.692,-6 -6,-6Zm-0,9.228c-0.316,0 -0.577,-0.26 -0.577,-0.577c0,-0.316 0.261,-0.577 0.577,-0.577c0.316,0 0.577,0.261 0.577,0.577c-0,0.317 -0.261,0.577 -0.577,0.577Zm0.627,-5.802l-0.166,3.519c-0,0.253 -0.208,0.462 -0.462,0.462c-0.253,-0 -0.461,-0.209 -0.461,-0.462l-0.166,-3.518l0,-0.001c-0,-0.009 -0,-0.018 -0,-0.027c-0,-0.344 0.283,-0.627 0.627,-0.627c0.344,0 0.627,0.283 0.627,0.627c-0,0.009 -0,0.018 -0.001,0.027l0.002,-0Z"},null,-1),_hoisted_2$7$1=[_hoisted_1$7$1],_sfc_main$8$1=defineComponent({__name:"ErrorIcon",setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_2$7$1,16))}}),_hoisted_1$6$1=createBaseVNode("path",{d:"M6,0c-3.308,0 -6,2.692 -6,6c0,3.308 2.692,6 6,6c3.308,0 6,-2.692 6,-6c0,-3.308 -2.692,-6 -6,-6Zm0,2.46c0.428,0 0.78,0.352 0.78,0.78c-0,0.428 -0.352,0.78 -0.78,0.78c-0.428,0 -0.78,-0.352 -0.78,-0.78c0,-0.428 0.352,-0.78 0.78,-0.78Zm1.44,6.78l-2.64,0c-0.263,0 -0.48,-0.217 -0.48,-0.48c0,-0.263 0.217,-0.48 0.48,-0.48l0.84,0l0,-2.64l-0.48,0c-0.263,0 -0.48,-0.217 -0.48,-0.48c0,-0.263 0.217,-0.48 0.48,-0.48l0.96,0c0.263,0 0.48,0.217 0.48,0.48l0,3.12l0.84,0c0.263,0 0.48,0.217 0.48,0.48c0,0.263 -0.217,0.48 -0.48,0.48Z"},null,-1),_hoisted_2$6$1=[_hoisted_1$6$1],_sfc_main$7$1=defineComponent({__name:"InfoIcon",setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_2$6$1,16))}}),_hoisted_1$5$1=createBaseVNode("path",{d:"M11.963,6.037c-0,3.292 -2.671,5.963 -5.963,5.963c-3.292,0 -5.963,-2.671 -5.963,-5.963c0,-3.292 2.671,-5.962 5.963,-5.962c3.292,-0 5.963,2.67 5.963,5.962Zm-0.918,0c0,-2.785 -2.26,-5.045 -5.045,-5.045c-2.785,0 -5.045,2.26 -5.045,5.045c-0,2.786 2.26,5.046 5.045,5.046c2.785,-0 5.045,-2.26 5.045,-5.046Z"},null,-1),_hoisted_2$5$1=createBaseVNode("path",{d:"M8.401,3.449c0.163,-0.194 0.452,-0.219 0.646,-0.056c0.194,0.163 0.219,0.452 0.056,0.646l-3.853,4.587c-0.085,0.101 -0.21,0.161 -0.343,0.163c-0.133,0.003 -0.26,-0.053 -0.349,-0.151l-1.651,-1.835c-0.169,-0.188 -0.154,-0.479 0.034,-0.648c0.188,-0.169 0.479,-0.154 0.648,0.034l1.298,1.443l3.514,-4.183Z"},null,-1),_hoisted_3$5=[_hoisted_1$5$1,_hoisted_2$5$1],_sfc_main$6$1=defineComponent({__name:"SuccessOutlineIcon",setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_3$5,16))}}),_hoisted_1$4$1=createBaseVNode("path",{d:"M12, 6c0, 3.313 -2.687, 6 -6, 6c-3.313,-0 -6,-2.688 -6,-6c0,-3.313 2.688,-6 6,-6c3.313,-0 6,2.687 6,6Zm-0.923,-0c-0,-2.803 -2.274,-5.077 -5.077,-5.077c-2.803,0 -5.077,2.274 -5.077,5.077c0,2.803 2.274,5.077 5.077,5.077c2.803,-0 5.077,-2.274 5.077,-5.077Z"},null,-1),_hoisted_2$4$1=createBaseVNode("path",{d:"M5.373,3.426c-0,-0.009 -0,-0.019 -0,-0.028c-0,-0.342 0.279,-0.624 0.621,-0.627c0.002,-0 0.004,-0 0.006,-0c0.344,-0 0.627,0.283 0.627,0.627c-0,0.009 -0,0.019 -0.001,0.028l0,0.001l-0.165,3.518c-0.012,0.246 -0.215,0.44 -0.461,0.44c-0.246,-0 -0.449,-0.194 -0.461,-0.44l-0.166,-3.518l0,-0.001Z"},null,-1),_hoisted_3$4$1=createBaseVNode("path",{d:"M6,9.228c-0.316,0 -0.577,-0.26 -0.577,-0.577c0,-0.316 0.261,-0.577 0.577,-0.577c0.316,0 0.577,0.261 0.577,0.577c-0,0.317 -0.261,0.577 -0.577,0.577Z"},null,-1),_hoisted_4$2=[_hoisted_1$4$1,_hoisted_2$4$1,_hoisted_3$4$1],_sfc_main$5$1=defineComponent({__name:"ErrorOutlineIcon",setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_4$2,16))}}),_hoisted_1$3$1=createBaseVNode("path",{d:"M6, 0c3.313, 0 6, 2.687 6, 6c-0, 3.313 -2.687, 6 -6, 6c-3.313,-0 -6,-2.687 -6,-6c0,-3.313 2.687,-6 6,-6Zm0, 0.96c-2.783, 0 -5.04, 2.257 -5.04, 5.04c0, 2.783 2.257, 5.04 5.04, 5.04c2.783, 0 5.04,-2.257 5.04,-5.04c-0,-2.783 -2.257,-5.04 -5.04,-5.04Z"},null,-1),_hoisted_2$3$1=createBaseVNode("path",{d:"M6.6, 8.28l0.84, 0c0.265, 0 0.48, 0.215 0.48, 0.48c-0, 0.265 -0.215, 0.48 -0.48, 0.48l-2.64,-0c-0.265, 0 -0.48,-0.215 -0.48,-0.48c-0,-0.265 0.215,-0.48 0.48,-0.48l0.84, 0l-0,-2.64l-0.48, 0c-0.265, 0 -0.48,-0.215 -0.48,-0.48c-0,-0.265 0.215,-0.48 0.48,-0.48l0.96, 0c0.265, 0 0.48, 0.215 0.48, 0.48l-0, 3.12Z"},null,-1),_hoisted_3$3$1=createBaseVNode("path",{d:"M6, 2.46c-0.428, 0 -0.78, 0.352 -0.78, 0.78c-0, 0.428 0.352, 0.78 0.78, 0.78c0.428, 0 0.78,-0.352 0.78,-0.78c-0,-0.428 -0.352,-0.78 -0.78,-0.78Z"},null,-1),_hoisted_4$1$1=[_hoisted_1$3$1,_hoisted_2$3$1,_hoisted_3$3$1],_sfc_main$4$1=defineComponent({__name:"InfoOutlineIcon",setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(ionProps))),_hoisted_4$1$1,16))}}),_hoisted_1$2$1=createBaseVNode("path",{d:"M12,1A11,11,0,1,0,23,12,11,11,0,0,0,12,1Zm0,19a8,8,0,1,1,8-8A8,8,0,0,1,12,20Z",opacity:".25"},null,-1),_hoisted_2$2$1=createBaseVNode("path",{d:"M10.14,1.16a11,11,0,0,0-9,8.92A1.59,1.59,0,0,0,2.46,12,1.52,1.52,0,0,0,4.11,10.7a8,8,0,0,1,6.66-6.61A1.42,1.42,0,0,0,12,2.69h0A1.57,1.57,0,0,0,10.14,1.16Z",class:"Notivue__spinner"},null,-1),_hoisted_3$2$1=[_hoisted_1$2$1,_hoisted_2$2$1],_sfc_main$3$1=defineComponent({__name:"PromiseIcon",setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(__spreadProps(__spreadValues({},unref(svgProps)),{width:28,height:28,fill:"currentColor"}))),_hoisted_3$2$1,16))}}),_hoisted_1$1$1=createBaseVNode("line",{x1:"18",y1:"6",x2:"6",y2:"18"},null,-1),_hoisted_2$1$1=createBaseVNode("line",{x1:"6",y1:"6",x2:"18",y2:"18"},null,-1),_hoisted_3$1$1=[_hoisted_1$1$1,_hoisted_2$1$1],_sfc_main$2$1=defineComponent({__name:"CloseIcon",setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("svg",normalizeProps(guardReactiveProps(unref(featherProps))),_hoisted_3$1$1,16))}}),svgProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24","aria-hidden":"true"},ionProps=__spreadProps(__spreadValues({},svgProps),{fill:"currentColor",viewBox:"0 0 12 12"}),featherProps=__spreadProps(__spreadValues({},svgProps),{stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"}),filledIcons={[NotificationTypeKeys.SUCCESS]:markRaw(_sfc_main$9$1),[NotificationTypeKeys.ERROR]:markRaw(_sfc_main$8$1),[NotificationTypeKeys.INFO]:markRaw(_sfc_main$7$1),[NotificationTypeKeys.WARNING]:markRaw(_sfc_main$8$1),[NotificationTypeKeys.PROMISE]:markRaw(_sfc_main$3$1),[NotificationTypeKeys.PROMISE_RESOLVE]:markRaw(_sfc_main$9$1),[NotificationTypeKeys.PROMISE_REJECT]:markRaw(_sfc_main$8$1),close:markRaw(_sfc_main$2$1)};NotificationTypeKeys.SUCCESS+"",markRaw(_sfc_main$6$1),NotificationTypeKeys.ERROR+"",markRaw(_sfc_main$5$1),NotificationTypeKeys.INFO+"",markRaw(_sfc_main$4$1),NotificationTypeKeys.WARNING+"",markRaw(_sfc_main$5$1),NotificationTypeKeys.PROMISE+"",markRaw(_sfc_main$3$1),NotificationTypeKeys.PROMISE_RESOLVE+"",markRaw(_sfc_main$6$1),NotificationTypeKeys.PROMISE_REJECT+"",markRaw(_sfc_main$5$1),markRaw(_sfc_main$2$1);const layout$1={"--nv-width":"350px","--nv-spacing":"0.625rem","--nv-radius":"0.625rem","--nv-icon-size":"1.25rem","--nv-title-size":"0.925rem","--nv-message-size":"0.925rem","--nv-y-align":"center"},shadow={"--nv-shadow":"rgba(0, 0, 0, 0.06) 0px 4px 6px -1px, rgba(0, 0, 0, 0.03) 0px 2px 4px -1px"},lightTheme=__spreadProps(__spreadValues(__spreadValues({},layout$1),shadow),{"--nv-global-bg":"#FFF","--nv-global-fg":"#171717","--nv-success-accent":"#28B780","--nv-error-accent":"#E74C3C","--nv-warning-accent":"#F59E0B","--nv-info-accent":"#3E8EFF","--nv-promise-accent":"#171717"});__spreadProps(__spreadValues(__spreadValues({},layout$1),shadow),{"--nv-success-bg":"#E9FAEF","--nv-success-accent":"#059669","--nv-success-fg":"#057452","--nv-error-bg":"#FEEFEF","--nv-error-accent":"#E6523C","--nv-error-fg":"#C5412C","--nv-warning-bg":"#FFF0D8","--nv-warning-accent":"#F48533","--nv-warning-fg":"#81471D","--nv-info-bg":"#DEF0FA","--nv-info-accent":"#1F70AC","--nv-info-fg":"#1F70AC","--nv-promise-bg":"#FFF","--nv-promise-accent":"#334155","--nv-promise-fg":"#334155"});__spreadProps(__spreadValues(__spreadValues({},layout$1),shadow),{"--nv-global-accent":"#FFF","--nv-global-fg":"#FFF","--nv-success-bg":"#178570","--nv-error-bg":"#C94430","--nv-info-bg":"#117AAE","--nv-warning-bg":"#FFE556","--nv-warning-fg":"#4F5358","--nv-warning-accent":"#4F5358","--nv-promise-bg":"#FFF","--nv-promise-fg":"#334155","--nv-promise-accent":"#64748B"});__spreadProps(__spreadValues({},layout$1),{"--nv-border-width":"1px","--nv-global-bg":"#1F1F1F","--nv-global-border":"#414141","--nv-global-fg":"#D0D0D0","--nv-success-accent":"#8EF997","--nv-error-accent":"#FF7777","--nv-warning-accent":"#FFE554","--nv-info-accent":"#5FD4FF","--nv-promise-accent":"#D0D0D0"});__spreadProps(__spreadValues({},layout$1),{"--nv-border-width":"1px","--nv-global-bg":"#20252E","--nv-global-border":"#353b45","--nv-global-fg":"#dfdfdf","--nv-success-accent":"#34D399","--nv-error-accent":"#FF7777","--nv-warning-accent":"#FFE554","--nv-info-accent":"#5FD4FF","--nv-promise-accent":"#D0D0D0"});const Classes={NOTIFICATION:CLASS_PREFIX+"notification",ICON:CLASS_PREFIX+"icon",CONTENT:CLASS_PREFIX+"content",TITLE:CLASS_PREFIX+"content-title",MESSAGE:CLASS_PREFIX+"content-message",CLOSE:CLASS_PREFIX+"close",CLOSE_ICON:CLASS_PREFIX+"close-icon",TRANSITION:CLASS_PREFIX+"transition",PROGRESS:CLASS_PREFIX+"progress",DUPLICATE:CLASS_PREFIX+"duplicate"},DEFAULT_NOTIFICATIONS_PROPS={icons:()=>filledIcons,theme:()=>lightTheme,hideClose:!1,closeAriaLabel:"Close"},_hoisted_1$p=["data-notivue","data-notivue-has-title"],_hoisted_2$c=["aria-live","role"],_hoisted_3$7=["textContent"],_hoisted_4$3=["textContent"],_hoisted_5$2=["aria-label"],_hoisted_6$2=["textContent"],_sfc_main$1$1=defineComponent({__name:"Notification",props:mergeDefaults({item:{},icons:{},theme:{},closeAriaLabel:{},hideClose:{type:Boolean}},DEFAULT_NOTIFICATIONS_PROPS),setup(Oe){const e=Oe,Te=shallowRef(e.icons[e.item.type]),ke=e.icons.close;return watch(()=>e.item.type,Be=>Te.value=e.icons[Be],{flush:"sync"}),(Be,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass([unref(Classes).NOTIFICATION,{[unref(Classes).DUPLICATE]:Be.item.duplicateCount>0}]),key:Be.item.duplicateCount,"data-notivue":Be.item.type,"data-notivue-has-title":!!Be.item.title,style:normalizeStyle(Be.theme)},[Te.value?(openBlock(),createElementBlock(Fragment,{key:0},[typeof Te.value=="object"?(openBlock(),createBlock(Transition,{key:0,name:unref(Classes).TRANSITION,mode:"out-in"},{default:withCtx(()=>[typeof Te.value=="object"?(openBlock(),createBlock(resolveDynamicComponent(Te.value),{key:0,class:normalizeClass(unref(Classes).ICON),"aria-hidden":"true"},null,8,["class"])):createCommentVNode("",!0)]),_:1},8,["name"])):typeof Te.value=="string"?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(unref(Classes).ICON),"aria-hidden":"true"},toDisplayString(Te.value),3)):createCommentVNode("",!0)],64)):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(unref(Classes).CONTENT),"aria-live":Be.item.ariaLive,role:Be.item.ariaRole,"aria-atomic":"true"},[Be.item.title?(openBlock(),createElementBlock("h3",{key:0,class:normalizeClass(unref(Classes).TITLE),textContent:toDisplayString(unref(Be.item.title))},null,10,_hoisted_3$7)):createCommentVNode("",!0),createBaseVNode("p",{class:normalizeClass(unref(Classes).MESSAGE),textContent:toDisplayString(unref(Be.item.message))},null,10,_hoisted_4$3)],10,_hoisted_2$c),!e.hideClose&&unref(ke)&&Be.item.type!=="promise"?(openBlock(),createElementBlock("button",{key:1,class:normalizeClass(unref(Classes).CLOSE),"aria-label":Be.closeAriaLabel,type:"button",tabindex:"-1",onClick:Ue[0]||(Ue[0]=(...He)=>Be.item.clear&&Be.item.clear(...He))},[typeof unref(ke)=="object"?(openBlock(),createBlock(resolveDynamicComponent(unref(ke)),{key:0,class:normalizeClass(unref(Classes).CLOSE_ICON)},null,8,["class"])):typeof unref(ke)=="string"?(openBlock(),createElementBlock("div",{key:1,"aria-hidden":"true",textContent:toDisplayString(unref(ke))},null,8,_hoisted_6$2)):createCommentVNode("",!0)],10,_hoisted_5$2)):createCommentVNode("",!0),renderSlot(Be.$slots,"default")],14,_hoisted_1$p))}});function getState(Oe){if(Oe)try{return JSON.parse(Oe)}catch(e){console.warn(e,"unknown json format!")}}function createStore(Oe,e){const{storage:Te,encrypt:ke,decrypt:Be}=e,Ue=Te.getItem(Oe.$id);if(Ue){const We=getState(Be?Be(Ue):Ue);We&&(Oe.$state=We)}else{const We=JSON.stringify(Oe.$state);Te.setItem(Oe.$id,ke?ke(We):We)}const He=(We,Cn)=>{const En=JSON.stringify(Cn);Te.setItem(Oe.$id,ke?ke(En):En)};Oe.$subscribe(He,{detached:!0,deep:!0,immediate:!0})}function storePlugin(Oe){return e=>{const Te={...Oe},{store:ke}=e,{stores:Be,encrypt:Ue,decrypt:He}=Te;Be&&Be.length>0&&Be.forEach(We=>{if(typeof We=="string"){if(We===ke.$id){const Cn=Te.storage??localStorage;createStore(ke,{storage:Cn,encrypt:Ue,decrypt:He})}}else if(We.name===ke.$id){const{storage:Cn,ciphertext:En}=We;createStore(ke,{storage:Cn||(Te.storage?Te.storage:localStorage),encrypt:En===!1?void 0:Ue,decrypt:En===!1?void 0:He})}})}}const matchIconName=/^[a-z0-9]+(-[a-z0-9]+)*$/,stringToIcon=(Oe,e,Te,ke="")=>{const Be=Oe.split(":");if(Oe.slice(0,1)==="@"){if(Be.length<2||Be.length>3)return null;ke=Be.shift().slice(1)}if(Be.length>3||!Be.length)return null;if(Be.length>1){const We=Be.pop(),Cn=Be.pop(),En={provider:Be.length>0?Be[0]:ke,prefix:Cn,name:We};return e&&!validateIconName(En)?null:En}const Ue=Be[0],He=Ue.split("-");if(He.length>1){const We={provider:ke,prefix:He.shift(),name:He.join("-")};return e&&!validateIconName(We)?null:We}if(Te&&ke===""){const We={provider:ke,prefix:"",name:Ue};return e&&!validateIconName(We,Te)?null:We}return null},validateIconName=(Oe,e)=>Oe?!!((e&&Oe.prefix===""||Oe.prefix)&&Oe.name):!1,defaultIconDimensions=Object.freeze({left:0,top:0,width:16,height:16}),defaultIconTransformations=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),defaultIconProps=Object.freeze({...defaultIconDimensions,...defaultIconTransformations}),defaultExtendedIconProps=Object.freeze({...defaultIconProps,body:"",hidden:!1});function mergeIconTransformations(Oe,e){const Te={};!Oe.hFlip!=!e.hFlip&&(Te.hFlip=!0),!Oe.vFlip!=!e.vFlip&&(Te.vFlip=!0);const ke=((Oe.rotate||0)+(e.rotate||0))%4;return ke&&(Te.rotate=ke),Te}function mergeIconData(Oe,e){const Te=mergeIconTransformations(Oe,e);for(const ke in defaultExtendedIconProps)ke in defaultIconTransformations?ke in Oe&&!(ke in Te)&&(Te[ke]=defaultIconTransformations[ke]):ke in e?Te[ke]=e[ke]:ke in Oe&&(Te[ke]=Oe[ke]);return Te}function getIconsTree(Oe,e){const Te=Oe.icons,ke=Oe.aliases||Object.create(null),Be=Object.create(null);function Ue(He){if(Te[He])return Be[He]=[];if(!(He in Be)){Be[He]=null;const We=ke[He]&&ke[He].parent,Cn=We&&Ue(We);Cn&&(Be[He]=[We].concat(Cn))}return Be[He]}return Object.keys(Te).concat(Object.keys(ke)).forEach(Ue),Be}function internalGetIconData(Oe,e,Te){const ke=Oe.icons,Be=Oe.aliases||Object.create(null);let Ue={};function He(We){Ue=mergeIconData(ke[We]||Be[We],Ue)}return He(e),Te.forEach(He),mergeIconData(Oe,Ue)}function parseIconSet(Oe,e){const Te=[];if(typeof Oe!="object"||typeof Oe.icons!="object")return Te;Oe.not_found instanceof Array&&Oe.not_found.forEach(Be=>{e(Be,null),Te.push(Be)});const ke=getIconsTree(Oe);for(const Be in ke){const Ue=ke[Be];Ue&&(e(Be,internalGetIconData(Oe,Be,Ue)),Te.push(Be))}return Te}const optionalPropertyDefaults={provider:"",aliases:{},not_found:{},...defaultIconDimensions};function checkOptionalProps(Oe,e){for(const Te in e)if(Te in Oe&&typeof Oe[Te]!=typeof e[Te])return!1;return!0}function quicklyValidateIconSet(Oe){if(typeof Oe!="object"||Oe===null)return null;const e=Oe;if(typeof e.prefix!="string"||!Oe.icons||typeof Oe.icons!="object"||!checkOptionalProps(Oe,optionalPropertyDefaults))return null;const Te=e.icons;for(const Be in Te){const Ue=Te[Be];if(!Be||typeof Ue.body!="string"||!checkOptionalProps(Ue,defaultExtendedIconProps))return null}const ke=e.aliases||Object.create(null);for(const Be in ke){const Ue=ke[Be],He=Ue.parent;if(!Be||typeof He!="string"||!Te[He]&&!ke[He]||!checkOptionalProps(Ue,defaultExtendedIconProps))return null}return e}const dataStorage=Object.create(null);function newStorage(Oe,e){return{provider:Oe,prefix:e,icons:Object.create(null),missing:new Set}}function getStorage(Oe,e){const Te=dataStorage[Oe]||(dataStorage[Oe]=Object.create(null));return Te[e]||(Te[e]=newStorage(Oe,e))}function addIconSet(Oe,e){return quicklyValidateIconSet(e)?parseIconSet(e,(Te,ke)=>{ke?Oe.icons[Te]=ke:Oe.missing.add(Te)}):[]}function addIconToStorage(Oe,e,Te){try{if(typeof Te.body=="string")return Oe.icons[e]={...Te},!0}catch{}return!1}let simpleNames=!1;function allowSimpleNames(Oe){return typeof Oe=="boolean"&&(simpleNames=Oe),simpleNames}function getIconData(Oe){const e=typeof Oe=="string"?stringToIcon(Oe,!0,simpleNames):Oe;if(e){const Te=getStorage(e.provider,e.prefix),ke=e.name;return Te.icons[ke]||(Te.missing.has(ke)?null:void 0)}}function addIcon(Oe,e){const Te=stringToIcon(Oe,!0,simpleNames);if(!Te)return!1;const ke=getStorage(Te.provider,Te.prefix);return e?addIconToStorage(ke,Te.name,e):(ke.missing.add(Te.name),!0)}function addCollection(Oe,e){if(typeof Oe!="object")return!1;if(typeof e!="string"&&(e=Oe.provider||""),simpleNames&&!e&&!Oe.prefix){let Be=!1;return quicklyValidateIconSet(Oe)&&(Oe.prefix="",parseIconSet(Oe,(Ue,He)=>{addIcon(Ue,He)&&(Be=!0)})),Be}const Te=Oe.prefix;if(!validateIconName({prefix:Te,name:"a"}))return!1;const ke=getStorage(e,Te);return!!addIconSet(ke,Oe)}const defaultIconSizeCustomisations=Object.freeze({width:null,height:null}),defaultIconCustomisations=Object.freeze({...defaultIconSizeCustomisations,...defaultIconTransformations}),unitsSplit=/(-?[0-9.]*[0-9]+[0-9.]*)/g,unitsTest=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function calculateSize(Oe,e,Te){if(e===1)return Oe;if(Te=Te||100,typeof Oe=="number")return Math.ceil(Oe*e*Te)/Te;if(typeof Oe!="string")return Oe;const ke=Oe.split(unitsSplit);if(ke===null||!ke.length)return Oe;const Be=[];let Ue=ke.shift(),He=unitsTest.test(Ue);for(;;){if(He){const We=parseFloat(Ue);isNaN(We)?Be.push(Ue):Be.push(Math.ceil(We*e*Te)/Te)}else Be.push(Ue);if(Ue=ke.shift(),Ue===void 0)return Be.join("");He=!He}}function splitSVGDefs(Oe,e="defs"){let Te="";const ke=Oe.indexOf("<"+e);for(;ke>=0;){const Be=Oe.indexOf(">",ke),Ue=Oe.indexOf("</"+e);if(Be===-1||Ue===-1)break;const He=Oe.indexOf(">",Ue);if(He===-1)break;Te+=Oe.slice(Be+1,Ue).trim(),Oe=Oe.slice(0,ke).trim()+Oe.slice(He+1)}return{defs:Te,content:Oe}}function mergeDefsAndContent(Oe,e){return Oe?"<defs>"+Oe+"</defs>"+e:e}function wrapSVGContent(Oe,e,Te){const ke=splitSVGDefs(Oe);return mergeDefsAndContent(ke.defs,e+ke.content+Te)}const isUnsetKeyword=Oe=>Oe==="unset"||Oe==="undefined"||Oe==="none";function iconToSVG(Oe,e){const Te={...defaultIconProps,...Oe},ke={...defaultIconCustomisations,...e},Be={left:Te.left,top:Te.top,width:Te.width,height:Te.height};let Ue=Te.body;[Te,ke].forEach(ei=>{const ti=[],ni=ei.hFlip,ri=ei.vFlip;let si=ei.rotate;ni?ri?si+=2:(ti.push("translate("+(Be.width+Be.left).toString()+" "+(0-Be.top).toString()+")"),ti.push("scale(-1 1)"),Be.top=Be.left=0):ri&&(ti.push("translate("+(0-Be.left).toString()+" "+(Be.height+Be.top).toString()+")"),ti.push("scale(1 -1)"),Be.top=Be.left=0);let ai;switch(si<0&&(si-=Math.floor(si/4)*4),si=si%4,si){case 1:ai=Be.height/2+Be.top,ti.unshift("rotate(90 "+ai.toString()+" "+ai.toString()+")");break;case 2:ti.unshift("rotate(180 "+(Be.width/2+Be.left).toString()+" "+(Be.height/2+Be.top).toString()+")");break;case 3:ai=Be.width/2+Be.left,ti.unshift("rotate(-90 "+ai.toString()+" "+ai.toString()+")");break}si%2===1&&(Be.left!==Be.top&&(ai=Be.left,Be.left=Be.top,Be.top=ai),Be.width!==Be.height&&(ai=Be.width,Be.width=Be.height,Be.height=ai)),ti.length&&(Ue=wrapSVGContent(Ue,'<g transform="'+ti.join(" ")+'">',"</g>"))});const He=ke.width,We=ke.height,Cn=Be.width,En=Be.height;let An,Sn;He===null?(Sn=We===null?"1em":We==="auto"?En:We,An=calculateSize(Sn,Cn/En)):(An=He==="auto"?Cn:He,Sn=We===null?calculateSize(An,En/Cn):We==="auto"?En:We);const Tn={},Ln=(ei,ti)=>{isUnsetKeyword(ti)||(Tn[ei]=ti.toString())};Ln("width",An),Ln("height",Sn);const Bn=[Be.left,Be.top,Cn,En];return Tn.viewBox=Bn.join(" "),{attributes:Tn,viewBox:Bn,body:Ue}}const regex=/\sid="(\S+)"/g,randomPrefix="IconifyId"+Date.now().toString(16)+(Math.random()*16777216|0).toString(16);let counter=0;function replaceIDs(Oe,e=randomPrefix){const Te=[];let ke;for(;ke=regex.exec(Oe);)Te.push(ke[1]);if(!Te.length)return Oe;const Be="suffix"+(Math.random()*16777216|Date.now()).toString(16);return Te.forEach(Ue=>{const He=typeof e=="function"?e(Ue):e+(counter++).toString(),We=Ue.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");Oe=Oe.replace(new RegExp('([#;"])('+We+')([")]|\\.[a-z])',"g"),"$1"+He+Be+"$3")}),Oe=Oe.replace(new RegExp(Be,"g"),""),Oe}const storage$1=Object.create(null);function setAPIModule(Oe,e){storage$1[Oe]=e}function getAPIModule(Oe){return storage$1[Oe]||storage$1[""]}function createAPIConfig(Oe){let e;if(typeof Oe.resources=="string")e=[Oe.resources];else if(e=Oe.resources,!(e instanceof Array)||!e.length)return null;return{resources:e,path:Oe.path||"/",maxURL:Oe.maxURL||500,rotate:Oe.rotate||750,timeout:Oe.timeout||5e3,random:Oe.random===!0,index:Oe.index||0,dataAfterTimeout:Oe.dataAfterTimeout!==!1}}const configStorage=Object.create(null),fallBackAPISources=["https://api.simplesvg.com","https://api.unisvg.com"],fallBackAPI=[];for(;fallBackAPISources.length>0;)fallBackAPISources.length===1||Math.random()>.5?fallBackAPI.push(fallBackAPISources.shift()):fallBackAPI.push(fallBackAPISources.pop());configStorage[""]=createAPIConfig({resources:["https://api.iconify.design"].concat(fallBackAPI)});function addAPIProvider(Oe,e){const Te=createAPIConfig(e);return Te===null?!1:(configStorage[Oe]=Te,!0)}function getAPIConfig(Oe){return configStorage[Oe]}const detectFetch=()=>{let Oe;try{if(Oe=fetch,typeof Oe=="function")return Oe}catch{}};let fetchModule=detectFetch();function calculateMaxLength(Oe,e){const Te=getAPIConfig(Oe);if(!Te)return 0;let ke;if(!Te.maxURL)ke=0;else{let Be=0;Te.resources.forEach(He=>{Be=Math.max(Be,He.length)});const Ue=e+".json?icons=";ke=Te.maxURL-Be-Te.path.length-Ue.length}return ke}function shouldAbort(Oe){return Oe===404}const prepare=(Oe,e,Te)=>{const ke=[],Be=calculateMaxLength(Oe,e),Ue="icons";let He={type:Ue,provider:Oe,prefix:e,icons:[]},We=0;return Te.forEach((Cn,En)=>{We+=Cn.length+1,We>=Be&&En>0&&(ke.push(He),He={type:Ue,provider:Oe,prefix:e,icons:[]},We=Cn.length),He.icons.push(Cn)}),ke.push(He),ke};function getPath(Oe){if(typeof Oe=="string"){const e=getAPIConfig(Oe);if(e)return e.path}return"/"}const send=(Oe,e,Te)=>{if(!fetchModule){Te("abort",424);return}let ke=getPath(e.provider);switch(e.type){case"icons":{const Ue=e.prefix,We=e.icons.join(","),Cn=new URLSearchParams({icons:We});ke+=Ue+".json?"+Cn.toString();break}case"custom":{const Ue=e.uri;ke+=Ue.slice(0,1)==="/"?Ue.slice(1):Ue;break}default:Te("abort",400);return}let Be=503;fetchModule(Oe+ke).then(Ue=>{const He=Ue.status;if(He!==200){setTimeout(()=>{Te(shouldAbort(He)?"abort":"next",He)});return}return Be=501,Ue.json()}).then(Ue=>{if(typeof Ue!="object"||Ue===null){setTimeout(()=>{Ue===404?Te("abort",Ue):Te("next",Be)});return}setTimeout(()=>{Te("success",Ue)})}).catch(()=>{Te("next",Be)})},fetchAPIModule={prepare,send};function sortIcons(Oe){const e={loaded:[],missing:[],pending:[]},Te=Object.create(null);Oe.sort((Be,Ue)=>Be.provider!==Ue.provider?Be.provider.localeCompare(Ue.provider):Be.prefix!==Ue.prefix?Be.prefix.localeCompare(Ue.prefix):Be.name.localeCompare(Ue.name));let ke={provider:"",prefix:"",name:""};return Oe.forEach(Be=>{if(ke.name===Be.name&&ke.prefix===Be.prefix&&ke.provider===Be.provider)return;ke=Be;const Ue=Be.provider,He=Be.prefix,We=Be.name,Cn=Te[Ue]||(Te[Ue]=Object.create(null)),En=Cn[He]||(Cn[He]=getStorage(Ue,He));let An;We in En.icons?An=e.loaded:He===""||En.missing.has(We)?An=e.missing:An=e.pending;const Sn={provider:Ue,prefix:He,name:We};An.push(Sn)}),e}function removeCallback(Oe,e){Oe.forEach(Te=>{const ke=Te.loaderCallbacks;ke&&(Te.loaderCallbacks=ke.filter(Be=>Be.id!==e))})}function updateCallbacks(Oe){Oe.pendingCallbacksFlag||(Oe.pendingCallbacksFlag=!0,setTimeout(()=>{Oe.pendingCallbacksFlag=!1;const e=Oe.loaderCallbacks?Oe.loaderCallbacks.slice(0):[];if(!e.length)return;let Te=!1;const ke=Oe.provider,Be=Oe.prefix;e.forEach(Ue=>{const He=Ue.icons,We=He.pending.length;He.pending=He.pending.filter(Cn=>{if(Cn.prefix!==Be)return!0;const En=Cn.name;if(Oe.icons[En])He.loaded.push({provider:ke,prefix:Be,name:En});else if(Oe.missing.has(En))He.missing.push({provider:ke,prefix:Be,name:En});else return Te=!0,!0;return!1}),He.pending.length!==We&&(Te||removeCallback([Oe],Ue.id),Ue.callback(He.loaded.slice(0),He.missing.slice(0),He.pending.slice(0),Ue.abort))})}))}let idCounter=0;function storeCallback(Oe,e,Te){const ke=idCounter++,Be=removeCallback.bind(null,Te,ke);if(!e.pending.length)return Be;const Ue={id:ke,icons:e,callback:Oe,abort:Be};return Te.forEach(He=>{(He.loaderCallbacks||(He.loaderCallbacks=[])).push(Ue)}),Be}function listToIcons(Oe,e=!0,Te=!1){const ke=[];return Oe.forEach(Be=>{const Ue=typeof Be=="string"?stringToIcon(Be,e,Te):Be;Ue&&ke.push(Ue)}),ke}var defaultConfig={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function sendQuery(Oe,e,Te,ke){const Be=Oe.resources.length,Ue=Oe.random?Math.floor(Math.random()*Be):Oe.index;let He;if(Oe.random){let Pi=Oe.resources.slice(0);for(He=[];Pi.length>1;){const pi=Math.floor(Math.random()*Pi.length);He.push(Pi[pi]),Pi=Pi.slice(0,pi).concat(Pi.slice(pi+1))}He=He.concat(Pi)}else He=Oe.resources.slice(Ue).concat(Oe.resources.slice(0,Ue));const We=Date.now();let Cn="pending",En=0,An,Sn=null,Tn=[],Ln=[];typeof ke=="function"&&Ln.push(ke);function Bn(){Sn&&(clearTimeout(Sn),Sn=null)}function ei(){Cn==="pending"&&(Cn="aborted"),Bn(),Tn.forEach(Pi=>{Pi.status==="pending"&&(Pi.status="aborted")}),Tn=[]}function ti(Pi,pi){pi&&(Ln=[]),typeof Pi=="function"&&Ln.push(Pi)}function ni(){return{startTime:We,payload:e,status:Cn,queriesSent:En,queriesPending:Tn.length,subscribe:ti,abort:ei}}function ri(){Cn="failed",Ln.forEach(Pi=>{Pi(void 0,An)})}function si(){Tn.forEach(Pi=>{Pi.status==="pending"&&(Pi.status="aborted")}),Tn=[]}function ai(Pi,pi,vi){const Ri=pi!=="success";switch(Tn=Tn.filter(Fi=>Fi!==Pi),Cn){case"pending":break;case"failed":if(Ri||!Oe.dataAfterTimeout)return;break;default:return}if(pi==="abort"){An=vi,ri();return}if(Ri){An=vi,Tn.length||(He.length?li():ri());return}if(Bn(),si(),!Oe.random){const Fi=Oe.resources.indexOf(Pi.resource);Fi!==-1&&Fi!==Oe.index&&(Oe.index=Fi)}Cn="completed",Ln.forEach(Fi=>{Fi(vi)})}function li(){if(Cn!=="pending")return;Bn();const Pi=He.shift();if(Pi===void 0){if(Tn.length){Sn=setTimeout(()=>{Bn(),Cn==="pending"&&(si(),ri())},Oe.timeout);return}ri();return}const pi={status:"pending",resource:Pi,callback:(vi,Ri)=>{ai(pi,vi,Ri)}};Tn.push(pi),En++,Sn=setTimeout(li,Oe.rotate),Te(Pi,e,pi.callback)}return setTimeout(li),ni}function initRedundancy(Oe){const e={...defaultConfig,...Oe};let Te=[];function ke(){Te=Te.filter(We=>We().status==="pending")}function Be(We,Cn,En){const An=sendQuery(e,We,Cn,(Sn,Tn)=>{ke(),En&&En(Sn,Tn)});return Te.push(An),An}function Ue(We){return Te.find(Cn=>We(Cn))||null}return{query:Be,find:Ue,setIndex:We=>{e.index=We},getIndex:()=>e.index,cleanup:ke}}function emptyCallback$1(){}const redundancyCache=Object.create(null);function getRedundancyCache(Oe){if(!redundancyCache[Oe]){const e=getAPIConfig(Oe);if(!e)return;const Te=initRedundancy(e),ke={config:e,redundancy:Te};redundancyCache[Oe]=ke}return redundancyCache[Oe]}function sendAPIQuery(Oe,e,Te){let ke,Be;if(typeof Oe=="string"){const Ue=getAPIModule(Oe);if(!Ue)return Te(void 0,424),emptyCallback$1;Be=Ue.send;const He=getRedundancyCache(Oe);He&&(ke=He.redundancy)}else{const Ue=createAPIConfig(Oe);if(Ue){ke=initRedundancy(Ue);const He=Oe.resources?Oe.resources[0]:"",We=getAPIModule(He);We&&(Be=We.send)}}return!ke||!Be?(Te(void 0,424),emptyCallback$1):ke.query(e,Be,Te)().abort}function emptyCallback(){}function loadedNewIcons(Oe){Oe.iconsLoaderFlag||(Oe.iconsLoaderFlag=!0,setTimeout(()=>{Oe.iconsLoaderFlag=!1,updateCallbacks(Oe)}))}function checkIconNamesForAPI(Oe){const e=[],Te=[];return Oe.forEach(ke=>{(ke.match(matchIconName)?e:Te).push(ke)}),{valid:e,invalid:Te}}function parseLoaderResponse(Oe,e,Te){function ke(){const Be=Oe.pendingIcons;e.forEach(Ue=>{Be&&Be.delete(Ue),Oe.icons[Ue]||Oe.missing.add(Ue)})}if(Te&&typeof Te=="object")try{if(!addIconSet(Oe,Te).length){ke();return}}catch(Be){console.error(Be)}ke(),loadedNewIcons(Oe)}function parsePossiblyAsyncResponse(Oe,e){Oe instanceof Promise?Oe.then(Te=>{e(Te)}).catch(()=>{e(null)}):e(Oe)}function loadNewIcons(Oe,e){Oe.iconsToLoad?Oe.iconsToLoad=Oe.iconsToLoad.concat(e).sort():Oe.iconsToLoad=e,Oe.iconsQueueFlag||(Oe.iconsQueueFlag=!0,setTimeout(()=>{Oe.iconsQueueFlag=!1;const{provider:Te,prefix:ke}=Oe,Be=Oe.iconsToLoad;if(delete Oe.iconsToLoad,!Be||!Be.length)return;const Ue=Oe.loadIcon;if(Oe.loadIcons&&(Be.length>1||!Ue)){parsePossiblyAsyncResponse(Oe.loadIcons(Be,ke,Te),An=>{parseLoaderResponse(Oe,Be,An)});return}if(Ue){Be.forEach(An=>{const Sn=Ue(An,ke,Te);parsePossiblyAsyncResponse(Sn,Tn=>{const Ln=Tn?{prefix:ke,icons:{[An]:Tn}}:null;parseLoaderResponse(Oe,[An],Ln)})});return}const{valid:He,invalid:We}=checkIconNamesForAPI(Be);if(We.length&&parseLoaderResponse(Oe,We,null),!He.length)return;const Cn=ke.match(matchIconName)?getAPIModule(Te):null;if(!Cn){parseLoaderResponse(Oe,He,null);return}Cn.prepare(Te,ke,He).forEach(An=>{sendAPIQuery(Te,An,Sn=>{parseLoaderResponse(Oe,An.icons,Sn)})})}))}const loadIcons=(Oe,e)=>{const Te=listToIcons(Oe,!0,allowSimpleNames()),ke=sortIcons(Te);if(!ke.pending.length){let Cn=!0;return e&&setTimeout(()=>{Cn&&e(ke.loaded,ke.missing,ke.pending,emptyCallback)}),()=>{Cn=!1}}const Be=Object.create(null),Ue=[];let He,We;return ke.pending.forEach(Cn=>{const{provider:En,prefix:An}=Cn;if(An===We&&En===He)return;He=En,We=An,Ue.push(getStorage(En,An));const Sn=Be[En]||(Be[En]=Object.create(null));Sn[An]||(Sn[An]=[])}),ke.pending.forEach(Cn=>{const{provider:En,prefix:An,name:Sn}=Cn,Tn=getStorage(En,An),Ln=Tn.pendingIcons||(Tn.pendingIcons=new Set);Ln.has(Sn)||(Ln.add(Sn),Be[En][An].push(Sn))}),Ue.forEach(Cn=>{const En=Be[Cn.provider][Cn.prefix];En.length&&loadNewIcons(Cn,En)}),e?storeCallback(e,ke,Ue):emptyCallback};function mergeCustomisations(Oe,e){const Te={...Oe};for(const ke in e){const Be=e[ke],Ue=typeof Be;ke in defaultIconSizeCustomisations?(Be===null||Be&&(Ue==="string"||Ue==="number"))&&(Te[ke]=Be):Ue===typeof Te[ke]&&(Te[ke]=ke==="rotate"?Be%4:Be)}return Te}const separator=/[\s,]+/;function flipFromString(Oe,e){e.split(separator).forEach(Te=>{switch(Te.trim()){case"horizontal":Oe.hFlip=!0;break;case"vertical":Oe.vFlip=!0;break}})}function rotateFromString(Oe,e=0){const Te=Oe.replace(/^-?[0-9.]*/,"");function ke(Be){for(;Be<0;)Be+=4;return Be%4}if(Te===""){const Be=parseInt(Oe);return isNaN(Be)?0:ke(Be)}else if(Te!==Oe){let Be=0;switch(Te){case"%":Be=25;break;case"deg":Be=90}if(Be){let Ue=parseFloat(Oe.slice(0,Oe.length-Te.length));return isNaN(Ue)?0:(Ue=Ue/Be,Ue%1===0?ke(Ue):0)}}return e}function iconToHTML(Oe,e){let Te=Oe.indexOf("xlink:")===-1?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const ke in e)Te+=" "+ke+'="'+e[ke]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+Te+">"+Oe+"</svg>"}function encodeSVGforURL(Oe){return Oe.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}function svgToData(Oe){return"data:image/svg+xml,"+encodeSVGforURL(Oe)}function svgToURL(Oe){return'url("'+svgToData(Oe)+'")'}const defaultExtendedIconCustomisations={...defaultIconCustomisations,inline:!1},svgDefaults={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":!0,role:"img"},commonProps={display:"inline-block"},monotoneProps={backgroundColor:"currentColor"},coloredProps={backgroundColor:"transparent"},propsToAdd={Image:"var(--svg)",Repeat:"no-repeat",Size:"100% 100%"},propsToAddTo={webkitMask:monotoneProps,mask:monotoneProps,background:coloredProps};for(const Oe in propsToAddTo){const e=propsToAddTo[Oe];for(const Te in propsToAdd)e[Oe+Te]=propsToAdd[Te]}const customisationAliases={};["horizontal","vertical"].forEach(Oe=>{const e=Oe.slice(0,1)+"Flip";customisationAliases[Oe+"-flip"]=e,customisationAliases[Oe.slice(0,1)+"-flip"]=e,customisationAliases[Oe+"Flip"]=e});function fixSize(Oe){return Oe+(Oe.match(/^[-0-9.]+$/)?"px":"")}const render$1=(Oe,e)=>{const Te=mergeCustomisations(defaultExtendedIconCustomisations,e),ke={...svgDefaults},Be=e.mode||"svg",Ue={},He=e.style,We=typeof He=="object"&&!(He instanceof Array)?He:{};for(let ei in e){const ti=e[ei];if(ti!==void 0)switch(ei){case"icon":case"style":case"onLoad":case"mode":case"ssr":break;case"inline":case"hFlip":case"vFlip":Te[ei]=ti===!0||ti==="true"||ti===1;break;case"flip":typeof ti=="string"&&flipFromString(Te,ti);break;case"color":Ue.color=ti;break;case"rotate":typeof ti=="string"?Te[ei]=rotateFromString(ti):typeof ti=="number"&&(Te[ei]=ti);break;case"ariaHidden":case"aria-hidden":ti!==!0&&ti!=="true"&&delete ke["aria-hidden"];break;default:{const ni=customisationAliases[ei];ni?(ti===!0||ti==="true"||ti===1)&&(Te[ni]=!0):defaultExtendedIconCustomisations[ei]===void 0&&(ke[ei]=ti)}}}const Cn=iconToSVG(Oe,Te),En=Cn.attributes;if(Te.inline&&(Ue.verticalAlign="-0.125em"),Be==="svg"){ke.style={...Ue,...We},Object.assign(ke,En);let ei=0,ti=e.id;return typeof ti=="string"&&(ti=ti.replace(/-/g,"_")),ke.innerHTML=replaceIDs(Cn.body,ti?()=>ti+"ID"+ei++:"iconifyVue"),h$1("svg",ke)}const{body:An,width:Sn,height:Tn}=Oe,Ln=Be==="mask"||(Be==="bg"?!1:An.indexOf("currentColor")!==-1),Bn=iconToHTML(An,{...En,width:Sn+"",height:Tn+""});return ke.style={...Ue,"--svg":svgToURL(Bn),width:fixSize(En.width),height:fixSize(En.height),...commonProps,...Ln?monotoneProps:coloredProps,...We},h$1("span",ke)};allowSimpleNames(!0);setAPIModule("",fetchAPIModule);if(typeof document<"u"&&typeof window<"u"){const Oe=window;if(Oe.IconifyPreload!==void 0){const e=Oe.IconifyPreload,Te="Invalid IconifyPreload syntax.";typeof e=="object"&&e!==null&&(e instanceof Array?e:[e]).forEach(ke=>{try{(typeof ke!="object"||ke===null||ke instanceof Array||typeof ke.icons!="object"||typeof ke.prefix!="string"||!addCollection(ke))&&console.error(Te)}catch{console.error(Te)}})}if(Oe.IconifyProviders!==void 0){const e=Oe.IconifyProviders;if(typeof e=="object"&&e!==null)for(let Te in e){const ke="IconifyProviders["+Te+"] is invalid.";try{const Be=e[Te];if(typeof Be!="object"||!Be||Be.resources===void 0)continue;addAPIProvider(Te,Be)||console.error(ke)}catch{console.error(ke)}}}}const emptyIcon={...defaultIconProps,body:""},Icon$1=defineComponent({inheritAttrs:!1,data(){return{_name:"",_loadingIcon:null,iconMounted:!1,counter:0}},mounted(){this.iconMounted=!0},unmounted(){this.abortLoading()},methods:{abortLoading(){this._loadingIcon&&(this._loadingIcon.abort(),this._loadingIcon=null)},getIcon(Oe,e,Te){if(typeof Oe=="object"&&Oe!==null&&typeof Oe.body=="string")return this._name="",this.abortLoading(),{data:Oe};let ke;if(typeof Oe!="string"||(ke=stringToIcon(Oe,!1,!0))===null)return this.abortLoading(),null;let Be=getIconData(ke);if(!Be)return(!this._loadingIcon||this._loadingIcon.name!==Oe)&&(this.abortLoading(),this._name="",Be!==null&&(this._loadingIcon={name:Oe,abort:loadIcons([ke],()=>{this.counter++})})),null;if(this.abortLoading(),this._name!==Oe&&(this._name=Oe,e&&e(Oe)),Te){Be=Object.assign({},Be);const He=Te(Be.body,ke.name,ke.prefix,ke.provider);typeof He=="string"&&(Be.body=He)}const Ue=["iconify"];return ke.prefix!==""&&Ue.push("iconify--"+ke.prefix),ke.provider!==""&&Ue.push("iconify--"+ke.provider),{data:Be,classes:Ue}}},render(){this.counter;const Oe=this.$attrs,e=this.iconMounted||Oe.ssr?this.getIcon(Oe.icon,Oe.onLoad,Oe.customise):null;if(!e)return render$1(emptyIcon,Oe);let Te=Oe;return e.classes&&(Te={...Oe,class:(typeof Oe.class=="string"?Oe.class+" ":"")+e.classes.join(" ")}),render$1({...defaultIconProps,...e.data},Te)}}),rt$1=Symbol("accordions"),nt$1=Symbol("header"),Ke=Symbol("tabs"),ye$1=()=>{const Oe=ref(),e=ref(!1),Te=ref(!1),ke=()=>{if(!Oe.value)return;Oe.value.style.setProperty("--collapser","none");const Be=Oe.value.offsetHeight;Oe.value.style.setProperty("--collapse",`${-Be}px`),Oe.value.style.setProperty("--collapser","")};return{collapse:Oe,collapsing:e,cssExpanded:Te,doExpand:Be=>{Oe.value&&(Be===!0&&Oe.value.style.setProperty("--collapse-max-height","none"),window.requestAnimationFrame(()=>{e.value=!0,ke(),window.requestAnimationFrame(()=>{Te.value=Be})}))},adjust:ke,onTransitionEnd:(Be,Ue=!0)=>{var He,We;e.value=!1,Ue&&((We=(He=Oe.value)==null?void 0:He.querySelector("a"))==null||We.focus()),Oe.value&&Be===!1&&Oe.value.style.removeProperty("--collapse-max-height")}}},ba="(prefers-color-scheme: dark)",ha="vue-dsfr-scheme";let Ce;const Ne$1="light",Se="dark",De="system",ot$1="data-fr-theme",Xe=Oe=>{const e=Oe??(localStorage.getItem(Ce)||De);return[Ne$1,Se,De].includes(e)?e:De},it$1=(Oe,e)=>(Oe=Xe(Oe),Oe===De?e!=null&&e.matches?Se:Ne$1:Oe),ef=Oe=>{if(typeof window>"u")return;Ce=ha;const e={scheme:localStorage.getItem(Ce)||De,dataThemeAttribute:ot$1,...Oe},Te=window.matchMedia&&window.matchMedia(ba),ke=ref(Xe(e.scheme));localStorage.setItem(Ce,ke.value);const Be=ref(it$1(ke.value,Te)),Ue=ref(ke.value!==De);watchEffect(()=>{var An;(An=document.body.parentElement)==null||An.setAttribute(e.dataThemeAttribute||ot$1,Be.value)}),Te==null||Te.addEventListener("change",An=>{Ue.value||(An.matches?Be.value=Se:Be.value=Ne$1)}),!Ue.value&&Te!=null&&Te.matches&&(Be.value=Se);const He=An=>{if(ke.value=Xe(An),localStorage.setItem(Ce,ke.value),[Ne$1,Se].includes(ke.value)){Be.value=ke.value,Ue.value=!0;return}Be.value=it$1(ke.value,Te),Ue.value=!1},We=document.documentElement,Cn={subtree:!1,childList:!1,attributes:!0},En=new MutationObserver(An=>{for(const Sn of An)if(Sn.type==="attributes"&&Sn.attributeName==="data-fr-theme"){const Tn=Sn.target.getAttribute(Sn.attributeName);Tn!==ke.value&&He(Tn)}});return En.observe(We,Cn),window.addEventListener("unload",()=>En.disconnect()),He(ke.value),{setScheme:He,theme:computed(()=>Be.value),scheme:computed(()=>ke.value)}},x$3=(Oe="",e="")=>(Oe?`${Oe}-`:"")+useId()+(e?`-${e}`:""),$a={class:"fr-accordion"},wa=["aria-expanded","aria-controls"],_a$1=["id"],Da=defineComponent({__name:"DsfrAccordion",props:{id:{default:()=>x$3("accordion")},selected:{type:Boolean},title:{default:"Sans intitulé"},titleTag:{default:"h3"}},setup(Oe){const e=Oe,{collapse:Te,collapsing:ke,cssExpanded:Be,doExpand:Ue,onTransitionEnd:He}=ye$1(),We=ref(),Cn=inject(rt$1),{isActive:En,expand:An}=(Cn==null?void 0:Cn(toRef$1(()=>e.title)))??{isActive:We,expand:()=>We.value=!We.value};return onMounted(()=>{En.value&&Ue(!0)}),watch(En,(Sn,Tn)=>{Sn!==Tn&&Ue(Sn)}),(Sn,Tn)=>(openBlock(),createElementBlock("section",$a,[(openBlock(),createBlock(resolveDynamicComponent(Sn.titleTag),{class:"fr-accordion__title"},{default:withCtx(()=>[createBaseVNode("button",{class:"fr-accordion__btn","aria-expanded":unref(En),"aria-controls":Sn.id,type:"button",onClick:Tn[0]||(Tn[0]=Ln=>unref(An)())},[renderSlot(Sn.$slots,"title",{},()=>[createTextVNode(toDisplayString(Sn.title),1)])],8,wa)]),_:3})),createBaseVNode("div",{id:Sn.id,ref_key:"collapse",ref:Te,class:normalizeClass(["fr-collapse",{"fr-collapse--expanded":unref(Be),"fr-collapsing":unref(ke)}]),onTransitionend:Tn[1]||(Tn[1]=Ln=>unref(He)(unref(En),!1))},[renderSlot(Sn.$slots,"default")],42,_a$1)]))}}),Ia={class:"fr-accordions-group"},Ta=defineComponent({__name:"DsfrAccordionsGroup",props:{modelValue:{default:-1}},emits:["update:modelValue"],setup(Oe,{emit:e}){const Te=Oe,ke=e,Be=computed({get:()=>Te.modelValue,set(We){ke("update:modelValue",We)}}),Ue=ref(new Map),He=ref(0);return provide(rt$1,We=>{const Cn=He.value++;Ue.value.set(Cn,We.value);const En=computed(()=>Cn===Be.value);watch(We,()=>{Ue.value.set(Cn,We.value)});function An(){if(Be.value===Cn){Be.value=-1;return}Be.value=Cn}return onUnmounted(()=>{Ue.value.delete(Cn)}),{isActive:En,expand:An}}),(We,Cn)=>(openBlock(),createElementBlock("div",Ia,[renderSlot(We.$slots,"default")]))}}),Ea=["id","role"],Ca=["title","aria-label"],Sa=defineComponent({__name:"DsfrAlert",props:{alert:{type:Boolean},closed:{type:Boolean},closeable:{type:Boolean},id:{default:()=>x$3("basic","alert")},title:{default:""},description:{},small:{type:Boolean},titleTag:{default:"h3"},type:{default:"info"},closeButtonLabel:{default:"Fermer"}},emits:["close"],setup(Oe,{emit:e}){const Te=Oe,ke=e,Be=()=>ke("close"),Ue=computed(()=>[`fr-alert--${Te.type}`,{"fr-alert--sm":Te.small}]);return(He,We)=>He.closed?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,id:He.id,class:normalizeClass(["fr-alert",Ue.value]),role:He.alert?"alert":void 0},[He.small?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(He.titleTag),{key:0,class:"fr-alert__title"},{default:withCtx(()=>[createTextVNode(toDisplayString(He.title),1)]),_:1})),renderSlot(He.$slots,"default",{},()=>[createTextVNode(toDisplayString(He.description),1)]),He.closeable?(openBlock(),createElementBlock("button",{key:1,class:"fr-btn fr-btn--close",title:He.closeButtonLabel,"aria-label":He.closeButtonLabel,onClick:Be},null,8,Ca)):createCommentVNode("",!0)],10,Ea))}}),Va=defineComponent({__name:"VIcon",props:{name:{},scale:{default:1},verticalAlign:{default:"-0.2em"},animation:{},speed:{},flip:{},label:{},title:{},color:{},fill:{},inverse:{type:Boolean},ssr:{type:Boolean},display:{default:"inline-block"}},setup(Oe){useCssVars(Cn=>({"177d0d84":We.value}));const e=Oe,Te=ref(null),ke=computed(()=>`${+e.scale*1.2}rem`),Be=computed(()=>e.flip==="both"?"horizontal,vertical":e.flip);watch(()=>e.title,Ue);async function Ue(){var Cn,En,An,Sn;if(!((Cn=Te.value)!=null&&Cn.$el))return;const Tn=!!((En=Te.value)==null?void 0:En.$el).querySelector("title"),Ln=document.createElement("title");if(!e.title){Ln.remove();return}Ln.innerHTML=e.title,await nextTick(),Tn||(Sn=((An=Te.value)==null?void 0:An.$el).firstChild)==null||Sn.before(Ln)}onMounted(Ue);const He=computed(()=>{var Cn;return(Cn=e.name)!=null&&Cn.startsWith("vi-")?e.name.replace(/vi-(.*)/,"vscode-icons:$1"):e.name??""}),We=computed(()=>e.color??e.fill??"inherit");return(Cn,En)=>(openBlock(),createBlock(unref(Icon$1),{ref_key:"icon",ref:Te,icon:He.value,style:normalizeStyle({fontSize:ke.value,verticalAlign:Cn.verticalAlign,display:Cn.display}),"aria-label":Cn.label,class:normalizeClass(["vicon",{"vicon-spin":e.animation==="spin","vicon-wrench":e.animation==="wrench","vicon-pulse":e.animation==="pulse","vicon-spin-pulse":e.animation==="spin-pulse","vicon-flash":e.animation==="flash","vicon-float":e.animation==="float","vicon-ring":e.animation==="ring","vicon-slow":e.speed==="slow","vicon-fast":e.speed==="fast","vicon-inverse":e.inverse}]),flip:Be.value,ssr:Cn.ssr},null,8,["icon","style","aria-label","class","flip","ssr"]))}}),ie$1=(Oe,e)=>{const Te=Oe.__vccOpts||Oe;for(const[ke,Be]of e)Te[ke]=Be;return Te},ue$1=ie$1(Va,[["__scopeId","data-v-73a1cd7e"]]),ja=["title","disabled","aria-disabled"],Oa={key:1},Ha=defineComponent({__name:"DsfrButton",props:{disabled:{type:Boolean},label:{default:void 0},secondary:{type:Boolean},tertiary:{type:Boolean},iconRight:{type:Boolean},iconOnly:{type:Boolean},noOutline:{type:Boolean},size:{default:"md"},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},setup(Oe,{expose:e}){const Te=Oe,ke=computed(()=>["sm","small"].includes(Te.size)),Be=computed(()=>["md","medium"].includes(Te.size)),Ue=computed(()=>["lg","large"].includes(Te.size)),He=ref(null);e({focus:()=>{var An;(An=He.value)==null||An.focus()}});const We=computed(()=>typeof Te.icon=="string"&&Te.icon.startsWith("fr-icon-")),Cn=computed(()=>Te.iconOnly?1.25:.8325),En=computed(()=>typeof Te.icon=="string"?{scale:Cn.value,name:Te.icon}:{scale:Cn.value,...Te.icon});return(An,Sn)=>(openBlock(),createElementBlock("button",{ref_key:"btn",ref:He,class:normalizeClass(["fr-btn",{"fr-btn--secondary":An.secondary&&!An.tertiary,"fr-btn--tertiary":An.tertiary&&!An.secondary&&!An.noOutline,"fr-btn--tertiary-no-outline":An.tertiary&&!An.secondary&&An.noOutline,"fr-btn--sm":ke.value,"fr-btn--md":Be.value,"fr-btn--lg":Ue.value,"fr-btn--icon-right":!An.iconOnly&&We.value&&An.iconRight,"fr-btn--icon-left":!An.iconOnly&&We.value&&!An.iconRight,"inline-flex":!We.value,reverse:An.iconRight&&!We.value,"justify-center":!We.value&&An.iconOnly,[An.icon]:We.value}]),title:An.iconOnly?An.label:void 0,disabled:An.disabled,"aria-disabled":An.disabled,style:normalizeStyle(!We.value&&An.iconOnly?{"padding-inline":"0.5rem"}:{}),onClick:Sn[0]||(Sn[0]=Tn=>An.onClick?An.onClick(Tn):()=>{})},[An.icon&&!We.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},En.value)),null,16)):createCommentVNode("",!0),An.iconOnly?createCommentVNode("",!0):(openBlock(),createElementBlock("span",Oa,[createTextVNode(toDisplayString(An.label)+" ",1),renderSlot(An.$slots,"default",{},void 0,!0)]))],14,ja))}}),Ie=ie$1(Ha,[["__scopeId","data-v-118397f5"]]),qe=defineComponent({__name:"DsfrButtonGroup",props:{buttons:{default:()=>[]},reverse:{type:Boolean},equisized:{type:Boolean},iconRight:{type:Boolean},align:{default:void 0},inlineLayoutWhen:{type:[String,Boolean],default:"never"},size:{default:"md"}},setup(Oe){const e=Oe,Te=ref(null),ke=computed(()=>["sm","small"].includes(e.size)),Be=computed(()=>["md","medium"].includes(e.size)),Ue=computed(()=>["lg","large"].includes(e.size)),He=computed(()=>["always","",!0].includes(e.inlineLayoutWhen)),We=computed(()=>["sm","small"].includes(e.inlineLayoutWhen)),Cn=computed(()=>["md","medium"].includes(e.inlineLayoutWhen)),En=computed(()=>["lg","large"].includes(e.inlineLayoutWhen)),An=computed(()=>e.align==="center"),Sn=computed(()=>e.align==="right"),Tn=ref("auto"),Ln=computed(()=>`--equisized-width: ${Tn.value};`),Bn=async()=>{var ei;let ti=0;await new Promise(ni=>setTimeout(ni,100)),(ei=Te.value)==null||ei.querySelectorAll(".fr-btn").forEach(ni=>{const ri=ni,si=ri.offsetWidth,ai=window.getComputedStyle(ri),li=+ai.marginLeft.replace("px",""),Pi=+ai.marginRight.replace("px","");ri.style.width="var(--equisized-width)";const pi=si+li+Pi;pi>ti&&(ti=pi)}),Tn.value=`${ti}px`};return onMounted(async()=>{!Te.value||!e.equisized||await Bn()}),(ei,ti)=>(openBlock(),createElementBlock("ul",{ref_key:"buttonsEl",ref:Te,style:normalizeStyle(Ln.value),class:normalizeClass(["fr-btns-group",{"fr-btns-group--equisized":ei.equisized,"fr-btns-group--sm":ke.value,"fr-btns-group--md":Be.value,"fr-btns-group--lg":Ue.value,"fr-btns-group--inline-sm":He.value||We.value,"fr-btns-group--inline-md":He.value||Cn.value,"fr-btns-group--inline-lg":He.value||En.value,"fr-btns-group--center":An.value,"fr-btns-group--right":Sn.value,"fr-btns-group--icon-right":ei.iconRight,"fr-btns-group--inline-reverse":ei.reverse}]),"data-testid":"fr-btns"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(ei.buttons,({onClick:ni,...ri},si)=>(openBlock(),createElementBlock("li",{key:si},[createVNode(Ie,mergeProps({ref_for:!0},ri,{onClick:ni}),null,16,["onClick"])]))),128)),renderSlot(ei.$slots,"default")],6))}}),ls=["id","name","value","checked","required","data-testid","data-test","tabindex"],os=["for"],is={key:0,class:"required"},ds={key:0,class:"fr-hint-text"},us={key:0,class:"fr-messages-group","aria-live":"assertive",role:"alert"},fs=defineComponent({inheritAttrs:!1,__name:"DsfrCheckbox",props:mergeModels({id:{default:()=>x$3("basic","checkbox")},name:{},required:{type:Boolean},value:{},checked:{type:Boolean},modelValue:{},small:{type:Boolean},inline:{type:Boolean},readonly:{type:Boolean},readonlyOpacity:{default:.75},label:{default:""},errorMessage:{default:""},validMessage:{default:""},hint:{default:""}},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Oe){useCssVars(Ue=>({"5f542ece":Ue.readonlyOpacity}));const e=Oe,Te=computed(()=>e.errorMessage||e.validMessage),ke=computed(()=>e.errorMessage?"fr-error-text":"fr-valid-text"),Be=useModel(Oe,"modelValue");return(Ue,He)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":Ue.inline,readonly:Ue.readonly}])},[createBaseVNode("div",{class:normalizeClass(["fr-checkbox-group",{"fr-checkbox-group--error":Ue.errorMessage,"fr-checkbox-group--valid":!Ue.errorMessage&&Ue.validMessage,"fr-checkbox-group--sm":Ue.small}])},[withDirectives(createBaseVNode("input",mergeProps({id:Ue.id,"onUpdate:modelValue":He[0]||(He[0]=We=>Be.value=We),name:Ue.name,type:"checkbox",value:Ue.value,checked:Be.value===!0||Array.isArray(Be.value)&&Be.value.includes(Ue.value),required:Ue.required},Ue.$attrs,{"data-testid":`input-checkbox-${Ue.id}`,"data-test":`input-checkbox-${Ue.id}`,tabindex:Ue.readonly?-1:void 0}),null,16,ls),[[vModelCheckbox,Be.value]]),createBaseVNode("label",{for:Ue.id,class:"fr-label"},[renderSlot(Ue.$slots,"label",{},()=>[createTextVNode(toDisplayString(Ue.label)+" ",1),renderSlot(Ue.$slots,"required-tip",{},()=>[Ue.required?(openBlock(),createElementBlock("span",is," *")):createCommentVNode("",!0)],!0)],!0),Ue.hint?(openBlock(),createElementBlock("span",ds,toDisplayString(Ue.hint),1)):createCommentVNode("",!0)],8,os),Te.value?(openBlock(),createElementBlock("div",us,[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",ke.value])},toDisplayString(Te.value),3)])):createCommentVNode("",!0)],2)],2))}}),lt$2=ie$1(fs,[["__scopeId","data-v-18fa6c7b"]]),hs={class:"fr-consent-banner__content"},ys={class:"fr-text--sm"},ks={class:"fr-consent-banner__buttons fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-sm"},$s=defineComponent({__name:"DsfrConsent",props:{url:{default:""}},emits:["acceptAll","refuseAll","customize"],setup(Oe){const e=Oe,Te=computed(()=>typeof e.url=="string"&&e.url.startsWith("http")),ke=computed(()=>e.url?Te.value?"a":"RouterLink":"a"),Be=computed(()=>({[Te.value?"href":"to"]:e.url}));return(Ue,He)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",hs,[createBaseVNode("p",ys,[renderSlot(Ue.$slots,"default",{},()=>[He[4]||(He[4]=createTextVNode(" Bienvenue ! Nous utilisons des cookies pour améliorer votre expérience et les services disponibles sur ce site. Pour en savoir plus, visitez la page ")),(openBlock(),createBlock(resolveDynamicComponent(ke.value),mergeProps(Be.value,{"data-testid":"link"}),{default:withCtx(()=>He[3]||(He[3]=[createTextVNode(" Données personnelles et cookies ")])),_:1},16)),He[5]||(He[5]=createTextVNode(". Vous pouvez, à tout moment, avoir le contrôle sur les cookies que vous souhaitez activer. "))])])]),createBaseVNode("ul",ks,[createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Autoriser tous les cookies",onClick:He[0]||(He[0]=withModifiers(We=>Ue.$emit("acceptAll"),["stop"]))}," Tout accepter ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Refuser tous les cookies",onClick:He[1]||(He[1]=withModifiers(We=>Ue.$emit("refuseAll"),["stop"]))}," Tout refuser ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--secondary","data-fr-opened":"false","aria-controls":"fr-consent-modal",title:"Personnaliser les cookies",onClick:He[2]||(He[2]=withModifiers(We=>Ue.$emit("customize"),["stop"]))}," Personnaliser ")])])],64))}}),ut$1=1,St=defineComponent({__name:"DsfrFooterLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:void 0},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0},title:{}},setup(Oe){const e=Oe,Te=computed(()=>{var An;return(An=e.href)==null?void 0:An.startsWith("http")}),ke=computed(()=>{var An;return(An=e.href)==null?void 0:An.startsWith("mailto")}),Be=computed(()=>e.button?"button":Te.value||ke.value?"a":"RouterLink"),Ue=computed(()=>{if(!(!Te.value&&!ke.value))return e.href}),He=computed(()=>{if(!(Te.value||ke.value))return e.to}),We=computed(()=>He.value?{to:He.value}:{href:Ue.value}),Cn=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),En=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:ut$1,...e.iconAttrs??{}}:{scale:ut$1,...e.icon??{},...e.iconAttrs??{}});return(An,Sn)=>(openBlock(),createBlock(resolveDynamicComponent(Be.value),mergeProps({class:["fr-footer__bottom-link",{"fr-btn--icon-right":Cn.value&&An.iconRight,"fr-btn--icon-left":Cn.value&&!An.iconRight,[String(An.icon)]:Cn.value}]},We.value,{target:An.target,onClick:withModifiers(An.onClick,["stop"])}),{default:withCtx(()=>{var Tn,Ln;return[!Cn.value&&(An.icon||(Tn=An.iconAttrs)!=null&&Tn.name)&&!An.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:0,class:"fr-mr-1w"},En.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(An.label)+" ",1),!Cn.value&&(An.icon||(Ln=An.iconAttrs)!=null&&Ln.name)&&An.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:1,class:"fr-ml-1w"},En.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),Ur={class:"fr-footer__partners"},Yr={key:0,class:"fr-footer__partners-title"},Zr={class:"fr-footer__partners-logos"},Jr={key:0,class:"fr-footer__partners-main"},xr=["href"],en=["src","alt"],tn={class:"fr-footer__partners-sub"},an=["href"],sn=["src","alt"],At$2=defineComponent({__name:"DsfrFooterPartners",props:{mainPartner:{default:void 0},subPartners:{default:()=>[]},title:{default:""}},setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("div",Ur,[e.title?(openBlock(),createElementBlock("h4",Yr,toDisplayString(e.title),1)):createCommentVNode("",!0),createBaseVNode("div",Zr,[e.mainPartner?(openBlock(),createElementBlock("div",Jr,[createBaseVNode("a",{class:"fr-footer__partners-link",href:e.mainPartner.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:e.mainPartner.logo,alt:e.mainPartner.name},null,8,en)],8,xr)])):createCommentVNode("",!0),createBaseVNode("div",tn,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.subPartners,(ke,Be)=>(openBlock(),createElementBlock("li",{key:Be},[createBaseVNode("a",{class:"fr-footer__partners-link",href:ke.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:ke.logo,alt:ke.name},null,8,sn)],8,an)]))),128))])])])]))}}),rn=["innerHTML"],Pe=defineComponent({__name:"DsfrLogo",props:{small:{type:Boolean},large:{type:Boolean},logoText:{default:()=>"Gouvernement"}},setup(Oe){const e=Oe,Te=computed(()=>Array.isArray(e.logoText)?e.logoText.join("<br>"):e.logoText);return(ke,Be)=>(openBlock(),createElementBlock("p",{class:normalizeClass(["fr-logo",{"fr-logo--sm":ke.small&&!ke.large,"fr-logo--lg":ke.large&&!ke.small}]),innerHTML:Te.value},null,10,rn))}}),nn={id:"footer",class:"fr-footer",role:"contentinfo"},ln$1={key:0,class:"fr-footer__top"},on$1={class:"fr-container"},dn={class:"fr-grid-row fr-grid-row--start fr-grid-row--gutters"},un={class:"fr-container"},fn={class:"fr-footer__body"},cn={key:0,class:"fr-footer__brand fr-enlarge-link"},pn=["href"],vn=["src","alt"],mn=["src","alt"],gn={key:1,class:"fr-footer__brand fr-enlarge-link"},bn={class:"fr-footer__content"},hn={class:"fr-footer__content-desc"},yn={class:"fr-footer__content-list"},kn=["href","title"],$n={class:"fr-footer__bottom"},wn={class:"fr-footer__bottom-list"},_n={key:0,class:"fr-footer__bottom-copy"},Dn=defineComponent({__name:"DsfrFooter",props:{a11yCompliance:{default:"non conforme"},a11yComplianceLink:{default:"/a11y"},legalLink:{default:"/mentions-legales"},homeLink:{default:"/"},homeTitle:{default:"Retour à l’accueil"},partners:{default:()=>{}},personalDataLink:{default:"/donnees-personnelles"},cookiesLink:{default:"/cookies"},logoText:{default:()=>["République","Française"]},descText:{default:void 0},beforeMandatoryLinks:{default:()=>[]},afterMandatoryLinks:{default:()=>[]},mandatoryLinks:{default:Oe=>[{label:`Accessibilité : ${Oe.a11yCompliance}`,to:Oe.a11yComplianceLink},{label:"Mentions légales",to:Oe.legalLink,"data-testid":"/mentions-legales"},{label:"Données personnelles",to:Oe.personalDataLink},{label:"Gestion des cookies",to:Oe.cookiesLink}]},ecosystemLinks:{default:()=>[{label:"info.gouv.fr",href:"https://info.gouv.fr",title:"Informations gouvernementales, nouvelle fenêtre"},{label:"service-public.fr",href:"https://service-public.fr",title:"Informations et démarches administratives, nouvelle fenêtre"},{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr",title:"Service public de diffusion du droit, nouvelle fenêtre"},{label:"data.gouv.fr",href:"https://data.gouv.fr",title:"Plateforme des données publiques, nouvelle fenêtre"}]},operatorLinkText:{default:"Revenir à l’accueil"},operatorTo:{default:"/"},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:void 0},operatorImgSrc:{default:void 0},operatorImgAlt:{default:""},licenceTo:{default:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"},licenceLinkProps:{default:()=>{}},licenceText:{default:"Sauf mention explicite de propriété intellectuelle détenue par des tiers, les contenus de ce site sont proposés sous"},licenceName:{default:"licence etalab-2.0"}},setup(Oe){const e=Oe,Te=computed(()=>[...e.beforeMandatoryLinks,...e.mandatoryLinks,...e.afterMandatoryLinks]),ke=useSlots(),Be=computed(()=>{var An;return(An=ke["footer-link-lists"])==null?void 0:An.call(ke)}),Ue=computed(()=>{const An=e.licenceTo||e.licenceLinkProps.to;return An&&typeof An=="string"&&An.startsWith("http")}),He=computed(()=>{const{to:An,href:Sn,...Tn}=e.licenceLinkProps??{};return Tn}),We=computed(()=>Ue.value?"":e.licenceTo),Cn=computed(()=>Ue.value?e.licenceTo:""),En=computed(()=>typeof e.operatorTo=="string"&&e.operatorTo.startsWith("http"));return(An,Sn)=>{const Tn=resolveComponent("RouterLink");return openBlock(),createElementBlock("footer",nn,[Be.value?(openBlock(),createElementBlock("div",ln$1,[createBaseVNode("div",on$1,[createBaseVNode("div",dn,[renderSlot(An.$slots,"footer-link-lists",{},void 0,!0)])])])):createCommentVNode("",!0),createBaseVNode("div",un,[createBaseVNode("div",fn,[An.operatorImgSrc?(openBlock(),createElementBlock("div",cn,[createVNode(Pe,{"logo-text":An.logoText},null,8,["logo-text"]),En.value?(openBlock(),createElementBlock("a",{key:0,href:An.operatorTo,"data-testid":"card-link",class:"fr-footer__brand-link"},[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(An.operatorImgStyle),src:An.operatorImgSrc,alt:An.operatorImgAlt},null,12,vn)],8,pn)):(openBlock(),createBlock(Tn,{key:1,class:"fr-footer__brand-link",to:An.homeLink,title:An.homeTitle},{default:withCtx(()=>[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(An.operatorImgStyle),src:An.operatorImgSrc,alt:An.operatorImgAlt},null,12,mn)]),_:1},8,["to","title"]))])):(openBlock(),createElementBlock("div",gn,[createVNode(Tn,{to:An.homeLink,title:An.homeTitle},{default:withCtx(()=>[createVNode(Pe,{"logo-text":An.logoText},null,8,["logo-text"])]),_:1},8,["to","title"])])),createBaseVNode("div",bn,[createBaseVNode("p",hn,[renderSlot(An.$slots,"description",{},()=>[createTextVNode(toDisplayString(An.descText),1)],!0)]),createBaseVNode("ul",yn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(An.ecosystemLinks,({href:Ln,label:Bn,title:ei,...ti},ni)=>(openBlock(),createElementBlock("li",{key:ni,class:"fr-footer__content-item"},[createBaseVNode("a",mergeProps({class:"fr-footer__content-link",href:Ln,target:"_blank",rel:"noopener noreferrer",title:ei,ref_for:!0},ti),toDisplayString(Bn),17,kn)]))),128))])])]),An.partners?(openBlock(),createBlock(At$2,normalizeProps(mergeProps({key:0},An.partners)),null,16)):createCommentVNode("",!0),createBaseVNode("div",$n,[createBaseVNode("ul",wn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Te.value,(Ln,Bn)=>(openBlock(),createElementBlock("li",{key:Bn,class:"fr-footer__bottom-item"},[createVNode(St,mergeProps({ref_for:!0},Ln),null,16)]))),128))]),An.licenceText?(openBlock(),createElementBlock("div",_n,[createBaseVNode("p",null,[createTextVNode(toDisplayString(An.licenceText)+" ",1),(openBlock(),createBlock(resolveDynamicComponent(Ue.value?"a":"RouterLink"),mergeProps({class:"fr-link-licence no-content-after",to:Ue.value?void 0:We.value,href:Ue.value?Cn.value:void 0,target:Ue.value?"_blank":void 0,title:Ue.value?`${An.licenceName} (nouvelle fenêtre)`:An.licenceName,rel:"noopener noreferrer"},He.value),{default:withCtx(()=>[createTextVNode(toDisplayString(An.licenceName),1)]),_:1},16,["to","href","target","title"]))])])):createCommentVNode("",!0)])])])}}}),In$1=ie$1(Dn,[["__scopeId","data-v-4030eed5"]]),Pn={role:"navigation",class:"fr-translate fr-nav"},Mn={class:"fr-nav__item"},Nn=["aria-controls","aria-expanded"],Fn={class:"fr-hidden-lg"},Rn=["id"],Vn={class:"fr-menu__list"},jn=["hreflang","lang","aria-current","href","onClick"],Ye=defineComponent({__name:"DsfrLanguageSelector",props:{id:{default:()=>x$3("language-selector")},languages:{default:()=>[]},currentLanguage:{default:"fr"}},emits:["select"],setup(Oe,{emit:e}){const Te=Oe,ke=e,{collapse:Be,collapsing:Ue,cssExpanded:He,doExpand:We,onTransitionEnd:Cn}=ye$1(),En=ref(!1);function An(Tn){En.value=!1,ke("select",Tn)}const Sn=computed(()=>Te.languages.find(({codeIso:Tn})=>Tn===Te.currentLanguage));return watch(En,(Tn,Ln)=>{Tn!==Ln&&We(Tn)}),(Tn,Ln)=>{var Bn,ei;return openBlock(),createElementBlock("nav",Pn,[createBaseVNode("div",Mn,[createBaseVNode("button",{class:"fr-translate__btn fr-btn fr-btn--tertiary","aria-controls":Tn.id,"aria-expanded":En.value,title:"Sélectionner une langue",type:"button",onClick:Ln[0]||(Ln[0]=withModifiers(ti=>En.value=!En.value,["prevent","stop"]))},[createTextVNode(toDisplayString((Bn=Sn.value)==null?void 0:Bn.codeIso.toUpperCase()),1),createBaseVNode("span",Fn," - "+toDisplayString((ei=Sn.value)==null?void 0:ei.label),1)],8,Nn),createBaseVNode("div",{id:Tn.id,ref_key:"collapse",ref:Be,class:normalizeClass(["fr-collapse fr-translate__menu fr-menu",{"fr-collapse--expanded":unref(He),"fr-collapsing":unref(Ue)}]),onTransitionend:Ln[1]||(Ln[1]=ti=>unref(Cn)(En.value))},[createBaseVNode("ul",Vn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Tn.languages,(ti,ni)=>(openBlock(),createElementBlock("li",{key:ni},[createBaseVNode("a",{class:"fr-translate__language fr-nav__link",hreflang:ti.codeIso,lang:ti.codeIso,"aria-current":Tn.currentLanguage===ti.codeIso?!0:void 0,href:`#${ti.codeIso}`,onClick:withModifiers(ri=>An(ti),["prevent","stop"])},toDisplayString(`${ti.codeIso.toUpperCase()} - ${ti.label}`),9,jn)]))),128))])],42,Rn)])])}}}),On=["for"],Hn={key:0,class:"required"},Kn={key:0,class:"fr-hint-text"},qn=defineComponent({inheritAttrs:!1,__name:"DsfrInput",props:{id:{default:()=>x$3("basic","input")},descriptionId:{default:void 0},hint:{default:""},isInvalid:{type:Boolean},isValid:{type:Boolean},isTextarea:{type:Boolean},isWithWrapper:{type:Boolean},labelVisible:{type:Boolean},label:{default:""},labelClass:{default:""},modelValue:{default:""},wrapperClass:{default:""}},emits:["update:modelValue"],setup(Oe,{expose:e}){const Te=Oe,ke=useAttrs(),Be=ref(null),Ue=()=>{var En;return(En=Be.value)==null?void 0:En.focus()},He=computed(()=>Te.isTextarea?"textarea":"input"),We=computed(()=>Te.isWithWrapper||ke.type==="date"||!!Te.wrapperClass),Cn=computed(()=>["fr-label",{invisible:!Te.labelVisible},Te.labelClass]);return e({focus:Ue}),(En,An)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("label",{class:normalizeClass(Cn.value),for:En.id},[renderSlot(En.$slots,"label",{},()=>[createTextVNode(toDisplayString(En.label)+" ",1),renderSlot(En.$slots,"required-tip",{},()=>["required"in En.$attrs&&En.$attrs.required!==!1?(openBlock(),createElementBlock("span",Hn,"*")):createCommentVNode("",!0)],!0)],!0),En.hint?(openBlock(),createElementBlock("span",Kn,toDisplayString(En.hint),1)):createCommentVNode("",!0)],10,On),We.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([{"fr-input-wrap":En.isWithWrapper||En.$attrs.type==="date"},En.wrapperClass])},[(openBlock(),createBlock(resolveDynamicComponent(He.value),mergeProps({id:En.id},En.$attrs,{ref_key:"__input",ref:Be,class:["fr-input",{"fr-input--error":En.isInvalid,"fr-input--valid":En.isValid}],value:En.modelValue,"aria-describedby":En.descriptionId||void 0,onInput:An[1]||(An[1]=Sn=>En.$emit("update:modelValue",Sn.target.value))}),null,16,["id","class","value","aria-describedby"]))],2)):(openBlock(),createBlock(resolveDynamicComponent(He.value),mergeProps({key:0,id:En.id},En.$attrs,{ref_key:"__input",ref:Be,class:["fr-input",{"fr-input--error":En.isInvalid,"fr-input--valid":En.isValid}],value:En.modelValue,"aria-describedby":En.descriptionId||void 0,onInput:An[0]||(An[0]=Sn=>En.$emit("update:modelValue",Sn.target.value))}),null,16,["id","class","value","aria-describedby"]))],64))}}),ze=ie$1(qn,[["__scopeId","data-v-7ca45de8"]]),Ze=defineComponent({__name:"DsfrSearchBar",props:{id:{default:()=>x$3("search","input")},label:{default:""},large:{type:Boolean},buttonText:{default:""},modelValue:{default:""},placeholder:{default:"Rechercher"},disabled:{type:Boolean}},emits:["update:modelValue","search"],setup(Oe,{emit:e}){const Te=e;return(ke,Be)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-search-bar",{"fr-search-bar--lg":ke.large}]),role:"search"},[createVNode(ze,{id:ke.id,type:"search",placeholder:ke.placeholder,"model-value":ke.modelValue,label:ke.label,disabled:ke.disabled,"aria-disabled":ke.disabled,"onUpdate:modelValue":Be[0]||(Be[0]=Ue=>Te("update:modelValue",Ue)),onKeydown:Be[1]||(Be[1]=withKeys(Ue=>Te("search",ke.modelValue),["enter"]))},null,8,["id","placeholder","model-value","label","disabled","aria-disabled"]),createVNode(Ie,{title:"Rechercher",disabled:ke.disabled,"aria-disabled":ke.disabled,onClick:Be[2]||(Be[2]=Ue=>Te("search",ke.modelValue))},{default:withCtx(()=>[createTextVNode(toDisplayString(ke.buttonText),1)]),_:1},8,["disabled","aria-disabled"])],2))}}),ft$1=1,Bt$1=defineComponent({__name:"DsfrHeaderMenuLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:"_self"},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0},path:{default:""}},setup(Oe){const e=Oe,Te=computed(()=>typeof e.path=="string"),ke=computed(()=>{var Sn;return((Sn=e.href)==null?void 0:Sn.startsWith("http"))||Te.value&&e.path.startsWith("http")||typeof e.to=="string"&&e.to.startsWith("http")}),Be=computed(()=>{var Sn;return((Sn=e.href)==null?void 0:Sn.startsWith("mailto"))||Te.value&&e.path.startsWith("mailto")||typeof e.to=="string"&&e.to.startsWith("mailto")}),Ue=computed(()=>e.button?"button":ke.value||Be.value?"a":"RouterLink"),He=computed(()=>{if(!(!ke.value&&!Be.value))return e.to??e.href??e.path}),We=computed(()=>{if(!(ke.value||Be.value))return e.to??e.path}),Cn=computed(()=>We.value?{to:We.value}:{href:He.value}),En=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),An=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:ft$1,...e.iconAttrs??{}}:{scale:ft$1,...e.icon??{},...e.iconAttrs??{}});return(Sn,Tn)=>(openBlock(),createBlock(resolveDynamicComponent(Ue.value),mergeProps({class:["fr-btn",{"fr-btn--icon-right":En.value&&Sn.iconRight,"fr-btn--icon-left":En.value&&!Sn.iconRight,[String(Sn.icon)]:En.value}]},Cn.value,{target:Sn.target,onClick:Tn[0]||(Tn[0]=withModifiers(Ln=>Sn.onClick(Ln),["stop"]))}),{default:withCtx(()=>{var Ln,Bn;return[!En.value&&(Sn.icon||(Ln=Sn.iconAttrs)!=null&&Ln.name)&&!Sn.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:0,class:"fr-mr-1w"},An.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Sn.label)+" ",1),!En.value&&(Sn.icon||(Bn=Sn.iconAttrs)!=null&&Bn.name)&&Sn.iconRight?(openBlock(),createBlock(ue$1,mergeProps({key:1,class:"fr-ml-1w"},An.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target"]))}}),zn=["aria-label"],Qn={class:"fr-btns-group"},Je=defineComponent({__name:"DsfrHeaderMenuLinks",props:{links:{default:()=>[]},navAriaLabel:{default:"Menu secondaire"}},emits:["linkClick"],setup(Oe,{emit:e}){const Te=e;return(ke,Be)=>(openBlock(),createElementBlock("nav",{role:"navigation","aria-label":ke.navAriaLabel},[createBaseVNode("ul",Qn,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ke.links,(Ue,He)=>(openBlock(),createElementBlock("li",{key:He},[createVNode(Bt$1,mergeProps({ref_for:!0},Ue,{"on-click":We=>{var Cn;Te("linkClick",We),(Cn=Ue.onClick)==null||Cn.call(Ue,We)}}),null,16,["on-click"])]))),128))])],8,zn))}}),Wn={role:"banner",class:"fr-header"},Gn={class:"fr-header__body"},Xn$1={class:"fr-container width-inherit"},Un={class:"fr-header__body-row"},Yn$1={class:"fr-header__brand fr-enlarge-link"},Zn$1={class:"fr-header__brand-top"},Jn={class:"fr-header__logo"},xn={key:0,class:"fr-header__operator"},el=["src","alt"],tl={key:1,class:"fr-header__navbar"},al=["aria-label","title","data-fr-opened"],sl=["aria-label","title"],rl={key:0,class:"fr-header__service"},nl={class:"fr-header__service-title"},ll={key:0,class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},ol$1={key:0,class:"fr-header__service-tagline"},il={key:1,class:"fr-header__service"},dl={class:"fr-header__tools"},ul={key:0,class:"fr-header__tools-links"},fl$1={key:1,class:"fr-header__search fr-modal"},cl=["aria-label"],pl={class:"fr-container"},vl={class:"fr-header__menu-links"},ml={key:1,class:"flex justify-center items-center"},gl={class:"fr-header__menu fr-modal"},bl={key:0,class:"fr-container"},hl=defineComponent({__name:"DsfrHeader",props:{searchbarId:{default:"searchbar-header"},serviceTitle:{default:void 0},serviceDescription:{default:void 0},homeTo:{default:"/"},logoText:{default:()=>"Gouvernement"},modelValue:{default:""},operatorImgAlt:{default:""},operatorImgSrc:{default:""},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:()=>({})},placeholder:{default:"Rechercher..."},quickLinks:{default:()=>[]},languageSelector:{default:void 0},searchLabel:{default:"Recherche"},quickLinksAriaLabel:{default:"Menu secondaire"},showSearch:{type:Boolean},showSearchLabel:{default:"Recherche"},showBeta:{type:Boolean},menuLabel:{default:"Menu"},menuModalLabel:{default:"Menu"},closeMenuModalLabel:{default:"Fermer"},homeLabel:{default:"Accueil"}},emits:["update:modelValue","search","languageSelect"],setup(Oe,{emit:e}){const Te=Oe,ke=e,Be=useSlots(),Ue=toRef$1(Te,"languageSelector"),He=ref(!1),We=ref(!1),Cn=ref(!1),En=()=>{var ni;Cn.value=!1,He.value=!1,We.value=!1,(ni=document.getElementById("button-menu"))==null||ni.focus()},An=ni=>{ni.key==="Escape"&&En()};onMounted(()=>{document.addEventListener("keydown",An)}),onUnmounted(()=>{document.removeEventListener("keydown",An)});const Sn=()=>{Cn.value=!0,He.value=!0,We.value=!1,setTimeout(()=>{var ni;(ni=document.getElementById("close-button"))==null||ni.focus()})},Tn=()=>{Cn.value=!0,He.value=!1,We.value=!0},Ln=En,Bn=computed(()=>[Te.homeLabel,Te.serviceTitle].filter(ni=>ni).join(" - ")),ei=computed(()=>!!Be.operator||!!Te.operatorImgSrc),ti=computed(()=>!!Be.mainnav);return provide(nt$1,()=>En),(ni,ri)=>{var si,ai,li;const Pi=resolveComponent("RouterLink");return openBlock(),createElementBlock("header",Wn,[createBaseVNode("div",Gn,[createBaseVNode("div",Xn$1,[createBaseVNode("div",Un,[createBaseVNode("div",Yn$1,[createBaseVNode("div",Zn$1,[createBaseVNode("div",Jn,[ni.serviceTitle?(openBlock(),createBlock(Pe,{key:1,"logo-text":ni.logoText,"data-testid":"header-logo"},null,8,["logo-text"])):(openBlock(),createBlock(Pi,{key:0,to:ni.homeTo,title:Bn.value},{default:withCtx(()=>[createVNode(Pe,{"logo-text":ni.logoText,"data-testid":"header-logo"},null,8,["logo-text"])]),_:1},8,["to","title"]))]),ei.value?(openBlock(),createElementBlock("div",xn,[renderSlot(ni.$slots,"operator",{},()=>[ni.operatorImgSrc?(openBlock(),createElementBlock("img",{key:0,class:"fr-responsive-img",src:ni.operatorImgSrc,alt:ni.operatorImgAlt,style:normalizeStyle(ni.operatorImgStyle)},null,12,el)):createCommentVNode("",!0)])])):createCommentVNode("",!0),ni.showSearch||ti.value||(si=ni.quickLinks)!=null&&si.length?(openBlock(),createElementBlock("div",tl,[ni.showSearch?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--search","aria-controls":"header-search","aria-label":ni.showSearchLabel,title:ni.showSearchLabel,"data-fr-opened":We.value,onClick:ri[0]||(ri[0]=withModifiers(pi=>Tn(),["prevent","stop"]))},null,8,al)):createCommentVNode("",!0),ti.value||(ai=ni.quickLinks)!=null&&ai.length?(openBlock(),createElementBlock("button",{key:1,id:"button-menu",class:"fr-btn--menu fr-btn","data-fr-opened":Sn,"aria-controls":"header-navigation","aria-haspopup":"dialog","aria-label":ni.menuLabel,title:ni.menuLabel,"data-testid":"open-menu-btn",onClick:ri[1]||(ri[1]=withModifiers(pi=>Sn(),["prevent","stop"]))},null,8,sl)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),ni.serviceTitle?(openBlock(),createElementBlock("div",rl,[createVNode(Pi,mergeProps({to:ni.homeTo,title:Bn.value},ni.$attrs),{default:withCtx(()=>[createBaseVNode("p",nl,[createTextVNode(toDisplayString(ni.serviceTitle)+" ",1),ni.showBeta?(openBlock(),createElementBlock("span",ll," BETA ")):createCommentVNode("",!0)])]),_:1},16,["to","title"]),ni.serviceDescription?(openBlock(),createElementBlock("p",ol$1,toDisplayString(ni.serviceDescription),1)):createCommentVNode("",!0)])):createCommentVNode("",!0),!ni.serviceTitle&&ni.showBeta?(openBlock(),createElementBlock("div",il,ri[9]||(ri[9]=[createBaseVNode("p",{class:"fr-header__service-title"},[createBaseVNode("span",{class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},"BETA")],-1)]))):createCommentVNode("",!0)]),createBaseVNode("div",dl,[(li=ni.quickLinks)!=null&&li.length||Ue.value?(openBlock(),createElementBlock("div",ul,[renderSlot(ni.$slots,"before-quick-links"),He.value?createCommentVNode("",!0):(openBlock(),createBlock(Je,{key:0,links:ni.quickLinks,"nav-aria-label":ni.quickLinksAriaLabel},null,8,["links","nav-aria-label"])),renderSlot(ni.$slots,"after-quick-links"),Ue.value?(openBlock(),createBlock(Ye,mergeProps({key:1},Ue.value,{onSelect:ri[2]||(ri[2]=pi=>ke("languageSelect",pi))}),null,16)):createCommentVNode("",!0)])):createCommentVNode("",!0),ni.showSearch?(openBlock(),createElementBlock("div",fl$1,[createVNode(Ze,{id:ni.searchbarId,label:ni.searchLabel,"model-value":ni.modelValue,placeholder:ni.placeholder,style:{"justify-content":"flex-end"},"onUpdate:modelValue":ri[3]||(ri[3]=pi=>ke("update:modelValue",pi)),onSearch:ri[4]||(ri[4]=pi=>ke("search",pi))},null,8,["id","label","model-value","placeholder"])])):createCommentVNode("",!0)])]),ni.showSearch||ti.value||ni.quickLinks&&ni.quickLinks.length||Ue.value?(openBlock(),createElementBlock("div",{key:0,id:"header-navigation",class:normalizeClass(["fr-header__menu fr-modal",{"fr-modal--opened":Cn.value}]),"aria-label":ni.menuModalLabel,role:"dialog","aria-modal":"true"},[createBaseVNode("div",pl,[createBaseVNode("button",{id:"close-button",class:"fr-btn fr-btn--close","aria-controls":"header-navigation","data-testid":"close-modal-btn",onClick:ri[5]||(ri[5]=withModifiers(pi=>En(),["prevent","stop"]))},toDisplayString(ni.closeMenuModalLabel),1),createBaseVNode("div",vl,[Ue.value?(openBlock(),createBlock(Ye,mergeProps({key:0},Ue.value,{onSelect:ri[6]||(ri[6]=pi=>Ue.value.currentLanguage=pi.codeIso)}),null,16)):createCommentVNode("",!0),renderSlot(ni.$slots,"before-quick-links"),He.value?(openBlock(),createBlock(Je,{key:1,role:"navigation",links:ni.quickLinks,"nav-aria-label":ni.quickLinksAriaLabel,onLinkClick:unref(Ln)},null,8,["links","nav-aria-label","onLinkClick"])):createCommentVNode("",!0),renderSlot(ni.$slots,"after-quick-links")]),Cn.value?renderSlot(ni.$slots,"mainnav",{key:0,hidemodal:En}):createCommentVNode("",!0),We.value?(openBlock(),createElementBlock("div",ml,[createVNode(Ze,{"searchbar-id":ni.searchbarId,"model-value":ni.modelValue,placeholder:ni.placeholder,"onUpdate:modelValue":ri[7]||(ri[7]=pi=>ke("update:modelValue",pi)),onSearch:ri[8]||(ri[8]=pi=>ke("search",pi))},null,8,["searchbar-id","model-value","placeholder"])])):createCommentVNode("",!0)])],10,cl)):createCommentVNode("",!0),renderSlot(ni.$slots,"default")])]),createBaseVNode("div",gl,[ti.value&&!Cn.value?(openBlock(),createElementBlock("div",bl,[renderSlot(ni.$slots,"mainnav",{hidemodal:En})])):createCommentVNode("",!0)])])}}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Lt$1=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Fe=Lt$1.join(","),Pt$1=typeof Element>"u",we$1=Pt$1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Re=!Pt$1&&Element.prototype.getRootNode?function(Oe){var e;return Oe==null||(e=Oe.getRootNode)===null||e===void 0?void 0:e.call(Oe)}:function(Oe){return Oe==null?void 0:Oe.ownerDocument},Ve=function Oe(e,Te){var ke;Te===void 0&&(Te=!0);var Be=e==null||(ke=e.getAttribute)===null||ke===void 0?void 0:ke.call(e,"inert"),Ue=Be===""||Be==="true",He=Ue||Te&&e&&Oe(e.parentNode);return He},Tl=function(Oe){var e,Te=Oe==null||(e=Oe.getAttribute)===null||e===void 0?void 0:e.call(Oe,"contenteditable");return Te===""||Te==="true"},Mt$1=function(Oe,e,Te){if(Ve(Oe))return[];var ke=Array.prototype.slice.apply(Oe.querySelectorAll(Fe));return e&&we$1.call(Oe,Fe)&&ke.unshift(Oe),ke=ke.filter(Te),ke},Nt$1=function Oe(e,Te,ke){for(var Be=[],Ue=Array.from(e);Ue.length;){var He=Ue.shift();if(!Ve(He,!1))if(He.tagName==="SLOT"){var We=He.assignedElements(),Cn=We.length?We:He.children,En=Oe(Cn,!0,ke);ke.flatten?Be.push.apply(Be,En):Be.push({scopeParent:He,candidates:En})}else{var An=we$1.call(He,Fe);An&&ke.filter(He)&&(Te||!e.includes(He))&&Be.push(He);var Sn=He.shadowRoot||typeof ke.getShadowRoot=="function"&&ke.getShadowRoot(He),Tn=!Ve(Sn,!1)&&(!ke.shadowRootFilter||ke.shadowRootFilter(He));if(Sn&&Tn){var Ln=Oe(Sn===!0?He.children:Sn.children,!0,ke);ke.flatten?Be.push.apply(Be,Ln):Be.push({scopeParent:He,candidates:Ln})}else Ue.unshift.apply(Ue,He.children)}}return Be},Ft$1=function(Oe){return!isNaN(parseInt(Oe.getAttribute("tabindex"),10))},$e=function(Oe){if(!Oe)throw new Error("No node provided");return Oe.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(Oe.tagName)||Tl(Oe))&&!Ft$1(Oe)?0:Oe.tabIndex},El=function(Oe,e){var Te=$e(Oe);return Te<0&&e&&!Ft$1(Oe)?0:Te},Cl=function(Oe,e){return Oe.tabIndex===e.tabIndex?Oe.documentOrder-e.documentOrder:Oe.tabIndex-e.tabIndex},Rt$1=function(Oe){return Oe.tagName==="INPUT"},Sl=function(Oe){return Rt$1(Oe)&&Oe.type==="hidden"},Al=function(Oe){var e=Oe.tagName==="DETAILS"&&Array.prototype.slice.apply(Oe.children).some(function(Te){return Te.tagName==="SUMMARY"});return e},Bl=function(Oe,e){for(var Te=0;Te<Oe.length;Te++)if(Oe[Te].checked&&Oe[Te].form===e)return Oe[Te]},Ll=function(Oe){if(!Oe.name)return!0;var e=Oe.form||Re(Oe),Te=function(Ue){return e.querySelectorAll('input[type="radio"][name="'+Ue+'"]')},ke;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")ke=Te(window.CSS.escape(Oe.name));else try{ke=Te(Oe.name)}catch(Ue){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",Ue.message),!1}var Be=Bl(ke,Oe.form);return!Be||Be===Oe},Pl=function(Oe){return Rt$1(Oe)&&Oe.type==="radio"},Ml=function(Oe){return Pl(Oe)&&!Ll(Oe)},Nl=function(Oe){var e,Te=Oe&&Re(Oe),ke=(e=Te)===null||e===void 0?void 0:e.host,Be=!1;if(Te&&Te!==Oe){var Ue,He,We;for(Be=!!((Ue=ke)!==null&&Ue!==void 0&&(He=Ue.ownerDocument)!==null&&He!==void 0&&He.contains(ke)||Oe!=null&&(We=Oe.ownerDocument)!==null&&We!==void 0&&We.contains(Oe));!Be&&ke;){var Cn,En,An;Te=Re(ke),ke=(Cn=Te)===null||Cn===void 0?void 0:Cn.host,Be=!!((En=ke)!==null&&En!==void 0&&(An=En.ownerDocument)!==null&&An!==void 0&&An.contains(ke))}}return Be},ct$1=function(Oe){var e=Oe.getBoundingClientRect(),Te=e.width,ke=e.height;return Te===0&&ke===0},Fl=function(Oe,e){var Te=e.displayCheck,ke=e.getShadowRoot;if(getComputedStyle(Oe).visibility==="hidden")return!0;var Be=we$1.call(Oe,"details>summary:first-of-type"),Ue=Be?Oe.parentElement:Oe;if(we$1.call(Ue,"details:not([open]) *"))return!0;if(!Te||Te==="full"||Te==="legacy-full"){if(typeof ke=="function"){for(var He=Oe;Oe;){var We=Oe.parentElement,Cn=Re(Oe);if(We&&!We.shadowRoot&&ke(We)===!0)return ct$1(Oe);Oe.assignedSlot?Oe=Oe.assignedSlot:!We&&Cn!==Oe.ownerDocument?Oe=Cn.host:Oe=We}Oe=He}if(Nl(Oe))return!Oe.getClientRects().length;if(Te!=="legacy-full")return!0}else if(Te==="non-zero-area")return ct$1(Oe);return!1},Rl=function(Oe){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(Oe.tagName))for(var e=Oe.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var Te=0;Te<e.children.length;Te++){var ke=e.children.item(Te);if(ke.tagName==="LEGEND")return we$1.call(e,"fieldset[disabled] *")?!0:!ke.contains(Oe)}return!0}e=e.parentElement}return!1},je=function(Oe,e){return!(e.disabled||Ve(e)||Sl(e)||Fl(e,Oe)||Al(e)||Rl(e))},xe=function(Oe,e){return!(Ml(e)||$e(e)<0||!je(Oe,e))},Vl=function(Oe){var e=parseInt(Oe.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},jl=function Oe(e){var Te=[],ke=[];return e.forEach(function(Be,Ue){var He=!!Be.scopeParent,We=He?Be.scopeParent:Be,Cn=El(We,He),En=He?Oe(Be.candidates):We;Cn===0?He?Te.push.apply(Te,En):Te.push(We):ke.push({documentOrder:Ue,tabIndex:Cn,item:Be,isScope:He,content:En})}),ke.sort(Cl).reduce(function(Be,Ue){return Ue.isScope?Be.push.apply(Be,Ue.content):Be.push(Ue.content),Be},[]).concat(Te)},Ol=function(Oe,e){e=e||{};var Te;return e.getShadowRoot?Te=Nt$1([Oe],e.includeContainer,{filter:xe.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Vl}):Te=Mt$1(Oe,e.includeContainer,xe.bind(null,e)),jl(Te)},Hl=function(Oe,e){e=e||{};var Te;return e.getShadowRoot?Te=Nt$1([Oe],e.includeContainer,{filter:je.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):Te=Mt$1(Oe,e.includeContainer,je.bind(null,e)),Te},_e=function(Oe,e){if(e=e||{},!Oe)throw new Error("No node provided");return we$1.call(Oe,Fe)===!1?!1:xe(e,Oe)},Kl=Lt$1.concat("iframe").join(","),Ge=function(Oe,e){if(e=e||{},!Oe)throw new Error("No node provided");return we$1.call(Oe,Kl)===!1?!1:je(e,Oe)};/*!
* focus-trap 7.6.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function et$2(Oe,e){(e==null||e>Oe.length)&&(e=Oe.length);for(var Te=0,ke=Array(e);Te<e;Te++)ke[Te]=Oe[Te];return ke}function ql(Oe){if(Array.isArray(Oe))return et$2(Oe)}function zl(Oe,e,Te){return(e=Ul(e))in Oe?Object.defineProperty(Oe,e,{value:Te,enumerable:!0,configurable:!0,writable:!0}):Oe[e]=Te,Oe}function Ql(Oe){if(typeof Symbol<"u"&&Oe[Symbol.iterator]!=null||Oe["@@iterator"]!=null)return Array.from(Oe)}function Wl(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pt$1(Oe,e){var Te=Object.keys(Oe);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(Oe);e&&(ke=ke.filter(function(Be){return Object.getOwnPropertyDescriptor(Oe,Be).enumerable})),Te.push.apply(Te,ke)}return Te}function vt$1(Oe){for(var e=1;e<arguments.length;e++){var Te=arguments[e]!=null?arguments[e]:{};e%2?pt$1(Object(Te),!0).forEach(function(ke){zl(Oe,ke,Te[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Oe,Object.getOwnPropertyDescriptors(Te)):pt$1(Object(Te)).forEach(function(ke){Object.defineProperty(Oe,ke,Object.getOwnPropertyDescriptor(Te,ke))})}return Oe}function Gl(Oe){return ql(Oe)||Ql(Oe)||Yl(Oe)||Wl()}function Xl(Oe,e){if(typeof Oe!="object"||!Oe)return Oe;var Te=Oe[Symbol.toPrimitive];if(Te!==void 0){var ke=Te.call(Oe,e);if(typeof ke!="object")return ke;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(Oe)}function Ul(Oe){var e=Xl(Oe,"string");return typeof e=="symbol"?e:e+""}function Yl(Oe,e){if(Oe){if(typeof Oe=="string")return et$2(Oe,e);var Te={}.toString.call(Oe).slice(8,-1);return Te==="Object"&&Oe.constructor&&(Te=Oe.constructor.name),Te==="Map"||Te==="Set"?Array.from(Oe):Te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Te)?et$2(Oe,e):void 0}}var mt$1={activateTrap:function(Oe,e){if(Oe.length>0){var Te=Oe[Oe.length-1];Te!==e&&Te._setPausedState(!0)}var ke=Oe.indexOf(e);ke===-1||Oe.splice(ke,1),Oe.push(e)},deactivateTrap:function(Oe,e){var Te=Oe.indexOf(e);Te!==-1&&Oe.splice(Te,1),Oe.length>0&&!Oe[Oe.length-1]._isManuallyPaused()&&Oe[Oe.length-1]._setPausedState(!1)}},Zl=function(Oe){return Oe.tagName&&Oe.tagName.toLowerCase()==="input"&&typeof Oe.select=="function"},Jl=function(Oe){return(Oe==null?void 0:Oe.key)==="Escape"||(Oe==null?void 0:Oe.key)==="Esc"||(Oe==null?void 0:Oe.keyCode)===27},Ae=function(Oe){return(Oe==null?void 0:Oe.key)==="Tab"||(Oe==null?void 0:Oe.keyCode)===9},xl=function(Oe){return Ae(Oe)&&!Oe.shiftKey},eo=function(Oe){return Ae(Oe)&&Oe.shiftKey},gt$2=function(Oe){return setTimeout(Oe,0)},Ee=function(Oe){for(var e=arguments.length,Te=new Array(e>1?e-1:0),ke=1;ke<e;ke++)Te[ke-1]=arguments[ke];return typeof Oe=="function"?Oe.apply(void 0,Te):Oe},Me=function(Oe){return Oe.target.shadowRoot&&typeof Oe.composedPath=="function"?Oe.composedPath()[0]:Oe.target},to=[],ao=function(Oe,e){var Te=(e==null?void 0:e.document)||document,ke=(e==null?void 0:e.trapStack)||to,Be=vt$1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:xl,isKeyBackward:eo},e),Ue={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,manuallyPaused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},He,We=function(di,ci,Mi){return di&&di[ci]!==void 0?di[ci]:Be[Mi||ci]},Cn=function(di,ci){var Mi=typeof(ci==null?void 0:ci.composedPath)=="function"?ci.composedPath():void 0;return Ue.containerGroups.findIndex(function(Oi){var Hi=Oi.container,Ki=Oi.tabbableNodes;return Hi.contains(di)||(Mi==null?void 0:Mi.includes(Hi))||Ki.find(function(or){return or===di})})},En=function(di){var ci=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Mi=ci.hasFallback,Oi=Mi===void 0?!1:Mi,Hi=ci.params,Ki=Hi===void 0?[]:Hi,or=Be[di];if(typeof or=="function"&&(or=or.apply(void 0,Gl(Ki))),or===!0&&(or=void 0),!or){if(or===void 0||or===!1)return or;throw new Error("`".concat(di,"` was specified but was not a node, or did not return a node"))}var sr=or;if(typeof or=="string"){try{sr=Te.querySelector(or)}catch(Cr){throw new Error("`".concat(di,'` appears to be an invalid selector; error="').concat(Cr.message,'"'))}if(!sr&&!Oi)throw new Error("`".concat(di,"` as selector refers to no known node"))}return sr},An=function(){var di=En("initialFocus",{hasFallback:!0});if(di===!1)return!1;if(di===void 0||di&&!Ge(di,Be.tabbableOptions))if(Cn(Te.activeElement)>=0)di=Te.activeElement;else{var ci=Ue.tabbableGroups[0],Mi=ci&&ci.firstTabbableNode;di=Mi||En("fallbackFocus")}else di===null&&(di=En("fallbackFocus"));if(!di)throw new Error("Your focus-trap needs to have at least one focusable element");return di},Sn=function(){if(Ue.containerGroups=Ue.containers.map(function(di){var ci=Ol(di,Be.tabbableOptions),Mi=Hl(di,Be.tabbableOptions),Oi=ci.length>0?ci[0]:void 0,Hi=ci.length>0?ci[ci.length-1]:void 0,Ki=Mi.find(function(Cr){return _e(Cr)}),or=Mi.slice().reverse().find(function(Cr){return _e(Cr)}),sr=!!ci.find(function(Cr){return $e(Cr)>0});return{container:di,tabbableNodes:ci,focusableNodes:Mi,posTabIndexesFound:sr,firstTabbableNode:Oi,lastTabbableNode:Hi,firstDomTabbableNode:Ki,lastDomTabbableNode:or,nextTabbableNode:function(Cr){var pr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,wr=ci.indexOf(Cr);return wr<0?pr?Mi.slice(Mi.indexOf(Cr)+1).find(function(Li){return _e(Li)}):Mi.slice(0,Mi.indexOf(Cr)).reverse().find(function(Li){return _e(Li)}):ci[wr+(pr?1:-1)]}}}),Ue.tabbableGroups=Ue.containerGroups.filter(function(di){return di.tabbableNodes.length>0}),Ue.tabbableGroups.length<=0&&!En("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(Ue.containerGroups.find(function(di){return di.posTabIndexesFound})&&Ue.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},Tn=function(di){var ci=di.activeElement;if(ci)return ci.shadowRoot&&ci.shadowRoot.activeElement!==null?Tn(ci.shadowRoot):ci},Ln=function(di){if(di!==!1&&di!==Tn(document)){if(!di||!di.focus){Ln(An());return}di.focus({preventScroll:!!Be.preventScroll}),Ue.mostRecentlyFocusedNode=di,Zl(di)&&di.select()}},Bn=function(di){var ci=En("setReturnFocus",{params:[di]});return ci||(ci===!1?!1:di)},ei=function(di){var ci=di.target,Mi=di.event,Oi=di.isBackward,Hi=Oi===void 0?!1:Oi;ci=ci||Me(Mi),Sn();var Ki=null;if(Ue.tabbableGroups.length>0){var or=Cn(ci,Mi),sr=or>=0?Ue.containerGroups[or]:void 0;if(or<0)Hi?Ki=Ue.tabbableGroups[Ue.tabbableGroups.length-1].lastTabbableNode:Ki=Ue.tabbableGroups[0].firstTabbableNode;else if(Hi){var Cr=Ue.tabbableGroups.findIndex(function(mr){var _r=mr.firstTabbableNode;return ci===_r});if(Cr<0&&(sr.container===ci||Ge(ci,Be.tabbableOptions)&&!_e(ci,Be.tabbableOptions)&&!sr.nextTabbableNode(ci,!1))&&(Cr=or),Cr>=0){var pr=Cr===0?Ue.tabbableGroups.length-1:Cr-1,wr=Ue.tabbableGroups[pr];Ki=$e(ci)>=0?wr.lastTabbableNode:wr.lastDomTabbableNode}else Ae(Mi)||(Ki=sr.nextTabbableNode(ci,!1))}else{var Li=Ue.tabbableGroups.findIndex(function(mr){var _r=mr.lastTabbableNode;return ci===_r});if(Li<0&&(sr.container===ci||Ge(ci,Be.tabbableOptions)&&!_e(ci,Be.tabbableOptions)&&!sr.nextTabbableNode(ci))&&(Li=or),Li>=0){var er=Li===Ue.tabbableGroups.length-1?0:Li+1,hr=Ue.tabbableGroups[er];Ki=$e(ci)>=0?hr.firstTabbableNode:hr.firstDomTabbableNode}else Ae(Mi)||(Ki=sr.nextTabbableNode(ci))}}else Ki=En("fallbackFocus");return Ki},ti=function(di){var ci=Me(di);if(!(Cn(ci,di)>=0)){if(Ee(Be.clickOutsideDeactivates,di)){He.deactivate({returnFocus:Be.returnFocusOnDeactivate});return}Ee(Be.allowOutsideClick,di)||di.preventDefault()}},ni=function(di){var ci=Me(di),Mi=Cn(ci,di)>=0;if(Mi||ci instanceof Document)Mi&&(Ue.mostRecentlyFocusedNode=ci);else{di.stopImmediatePropagation();var Oi,Hi=!0;if(Ue.mostRecentlyFocusedNode)if($e(Ue.mostRecentlyFocusedNode)>0){var Ki=Cn(Ue.mostRecentlyFocusedNode),or=Ue.containerGroups[Ki].tabbableNodes;if(or.length>0){var sr=or.findIndex(function(Cr){return Cr===Ue.mostRecentlyFocusedNode});sr>=0&&(Be.isKeyForward(Ue.recentNavEvent)?sr+1<or.length&&(Oi=or[sr+1],Hi=!1):sr-1>=0&&(Oi=or[sr-1],Hi=!1))}}else Ue.containerGroups.some(function(Cr){return Cr.tabbableNodes.some(function(pr){return $e(pr)>0})})||(Hi=!1);else Hi=!1;Hi&&(Oi=ei({target:Ue.mostRecentlyFocusedNode,isBackward:Be.isKeyBackward(Ue.recentNavEvent)})),Ln(Oi||Ue.mostRecentlyFocusedNode||An())}Ue.recentNavEvent=void 0},ri=function(di){var ci=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Ue.recentNavEvent=di;var Mi=ei({event:di,isBackward:ci});Mi&&(Ae(di)&&di.preventDefault(),Ln(Mi))},si=function(di){(Be.isKeyForward(di)||Be.isKeyBackward(di))&&ri(di,Be.isKeyBackward(di))},ai=function(di){Jl(di)&&Ee(Be.escapeDeactivates,di)!==!1&&(di.preventDefault(),He.deactivate())},li=function(di){var ci=Me(di);Cn(ci,di)>=0||Ee(Be.clickOutsideDeactivates,di)||Ee(Be.allowOutsideClick,di)||(di.preventDefault(),di.stopImmediatePropagation())},Pi=function(){if(Ue.active)return mt$1.activateTrap(ke,He),Ue.delayInitialFocusTimer=Be.delayInitialFocus?gt$2(function(){Ln(An())}):Ln(An()),Te.addEventListener("focusin",ni,!0),Te.addEventListener("mousedown",ti,{capture:!0,passive:!1}),Te.addEventListener("touchstart",ti,{capture:!0,passive:!1}),Te.addEventListener("click",li,{capture:!0,passive:!1}),Te.addEventListener("keydown",si,{capture:!0,passive:!1}),Te.addEventListener("keydown",ai),He},pi=function(){if(Ue.active)return Te.removeEventListener("focusin",ni,!0),Te.removeEventListener("mousedown",ti,!0),Te.removeEventListener("touchstart",ti,!0),Te.removeEventListener("click",li,!0),Te.removeEventListener("keydown",si,!0),Te.removeEventListener("keydown",ai),He},vi=function(di){var ci=di.some(function(Mi){var Oi=Array.from(Mi.removedNodes);return Oi.some(function(Hi){return Hi===Ue.mostRecentlyFocusedNode})});ci&&Ln(An())},Ri=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(vi):void 0,Fi=function(){Ri&&(Ri.disconnect(),Ue.active&&!Ue.paused&&Ue.containers.map(function(di){Ri.observe(di,{subtree:!0,childList:!0})}))};return He={get active(){return Ue.active},get paused(){return Ue.paused},activate:function(di){if(Ue.active)return this;var ci=We(di,"onActivate"),Mi=We(di,"onPostActivate"),Oi=We(di,"checkCanFocusTrap");Oi||Sn(),Ue.active=!0,Ue.paused=!1,Ue.nodeFocusedBeforeActivation=Te.activeElement,ci==null||ci();var Hi=function(){Oi&&Sn(),Pi(),Fi(),Mi==null||Mi()};return Oi?(Oi(Ue.containers.concat()).then(Hi,Hi),this):(Hi(),this)},deactivate:function(di){if(!Ue.active)return this;var ci=vt$1({onDeactivate:Be.onDeactivate,onPostDeactivate:Be.onPostDeactivate,checkCanReturnFocus:Be.checkCanReturnFocus},di);clearTimeout(Ue.delayInitialFocusTimer),Ue.delayInitialFocusTimer=void 0,pi(),Ue.active=!1,Ue.paused=!1,Fi(),mt$1.deactivateTrap(ke,He);var Mi=We(ci,"onDeactivate"),Oi=We(ci,"onPostDeactivate"),Hi=We(ci,"checkCanReturnFocus"),Ki=We(ci,"returnFocus","returnFocusOnDeactivate");Mi==null||Mi();var or=function(){gt$2(function(){Ki&&Ln(Bn(Ue.nodeFocusedBeforeActivation)),Oi==null||Oi()})};return Ki&&Hi?(Hi(Bn(Ue.nodeFocusedBeforeActivation)).then(or,or),this):(or(),this)},pause:function(di){return Ue.active?(Ue.manuallyPaused=!0,this._setPausedState(!0,di)):this},unpause:function(di){return Ue.active?(Ue.manuallyPaused=!1,ke[ke.length-1]!==this?this:this._setPausedState(!1,di)):this},updateContainerElements:function(di){var ci=[].concat(di).filter(Boolean);return Ue.containers=ci.map(function(Mi){return typeof Mi=="string"?Te.querySelector(Mi):Mi}),Ue.active&&Sn(),Fi(),this}},Object.defineProperties(He,{_isManuallyPaused:{value:function(){return Ue.manuallyPaused}},_setPausedState:{value:function(di,ci){if(Ue.paused===di)return this;if(Ue.paused=di,di){var Mi=We(ci,"onPause"),Oi=We(ci,"onPostPause");Mi==null||Mi(),pi(),Fi(),Oi==null||Oi()}else{var Hi=We(ci,"onUnpause"),Ki=We(ci,"onPostUnpause");Hi==null||Hi(),Sn(),Pi(),Fi(),Ki==null||Ki()}return this}}}),He.updateContainerElements(Oe),He};/*!
  * focus-trap-vue v4.0.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const so={escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:[Boolean,Function],default:!0},clickOutsideDeactivates:[Boolean,Function],initialFocus:[String,Function,Boolean],fallbackFocus:[String,Function],checkCanFocusTrap:Function,checkCanReturnFocus:Function,delayInitialFocus:{type:Boolean,default:!0},document:Object,preventScroll:Boolean,setReturnFocus:[Object,String,Boolean,Function],tabbableOptions:Object},ro=defineComponent({props:Object.assign({active:{type:Boolean,default:!0}},so),emits:["update:active","activate","postActivate","deactivate","postDeactivate"],render(){return this.renderImpl()},setup(Oe,{slots:e,emit:Te}){let ke;const Be=ref(null),Ue=computed(()=>{const We=Be.value;return We&&(We instanceof HTMLElement?We:We.$el)});function He(){return ke||(ke=ao(Ue.value,{escapeDeactivates:Oe.escapeDeactivates,allowOutsideClick:Oe.allowOutsideClick,returnFocusOnDeactivate:Oe.returnFocusOnDeactivate,clickOutsideDeactivates:Oe.clickOutsideDeactivates,onActivate:()=>{Te("update:active",!0),Te("activate")},onDeactivate:()=>{Te("update:active",!1),Te("deactivate")},onPostActivate:()=>Te("postActivate"),onPostDeactivate:()=>Te("postDeactivate"),initialFocus:Oe.initialFocus,fallbackFocus:Oe.fallbackFocus,tabbableOptions:Oe.tabbableOptions,delayInitialFocus:Oe.delayInitialFocus,preventScroll:Oe.preventScroll}))}return onMounted(()=>{watch(()=>Oe.active,We=>{We&&Ue.value?He().activate():ke&&(ke.deactivate(),(!Ue.value||Ue.value.nodeType===Node.COMMENT_NODE)&&(ke=null))},{immediate:!0,flush:"post"})}),onUnmounted(()=>{ke&&ke.deactivate(),ke=null}),{activate(){He().activate()},deactivate(){ke&&ke.deactivate()},renderImpl(){if(!e.default)return null;const We=e.default().filter(Cn=>Cn.type!==Comment);return!We||!We.length||We.length>1?(console.error("[focus-trap-vue]: FocusTrap requires exactly one child."),We):cloneVNode(We[0],{ref:Be})}}}}),no=["aria-labelledby","role","open"],lo={class:"fr-container fr-container--fluid fr-container-md"},oo={class:"fr-grid-row fr-grid-row--center"},io={class:"fr-modal__body"},uo={class:"fr-modal__header"},fo=["title"],co={class:"fr-modal__content"},po=["id"],vo={key:0,class:"fr-modal__footer"},bt$1=2,mo=defineComponent({__name:"DsfrModal",props:{modalId:{default:()=>x$3("modal","dialog")},opened:{type:Boolean},actions:{default:()=>[]},isAlert:{type:Boolean},origin:{default:()=>({focus(){}})},title:{},icon:{default:void 0},size:{default:"md"},closeButtonLabel:{default:"Fermer"},closeButtonTitle:{default:"Fermer la fenêtre modale"}},emits:["close"],setup(Oe,{emit:e}){const Te=Oe,ke=e,Be=Bn=>{Bn.key==="Escape"&&Sn()},Ue=computed(()=>Te.isAlert?"alertdialog":"dialog"),He=ref(null),We=ref();watch(()=>Te.opened,Bn=>{var ei,ti;Bn?((ei=We.value)==null||ei.showModal(),setTimeout(()=>{var ni;(ni=He.value)==null||ni.focus()},100)):(ti=We.value)==null||ti.close(),Cn(Bn)});function Cn(Bn){typeof window<"u"&&document.body.classList.toggle("modal-open",Bn)}onMounted(()=>{En(),Cn(Te.opened)}),onBeforeUnmount(()=>{An(),Cn(!1)});function En(){document.addEventListener("keydown",Be)}function An(){document.removeEventListener("keydown",Be)}async function Sn(){var Bn;await nextTick(),(Bn=Te.origin)==null||Bn.focus(),ke("close")}const Tn=computed(()=>typeof Te.icon=="string"&&Te.icon.startsWith("fr-icon-")),Ln=computed(()=>Tn.value?void 0:typeof Te.icon=="string"?{name:Te.icon,scale:bt$1}:{scale:bt$1,...Te.icon??{}});return(Bn,ei)=>Bn.opened?(openBlock(),createBlock(unref(ro),{key:0},{default:withCtx(()=>{var ti,ni;return[createBaseVNode("dialog",{id:"fr-modal-1",ref_key:"modal",ref:We,"aria-modal":"true","aria-labelledby":Bn.modalId,role:Ue.value,class:normalizeClass(["fr-modal",{"fr-modal--opened":Bn.opened}]),open:Bn.opened},[createBaseVNode("div",lo,[createBaseVNode("div",oo,[createBaseVNode("div",{class:normalizeClass(["fr-col-12",{"fr-col-md-8":Bn.size==="lg","fr-col-md-6":Bn.size==="md","fr-col-md-4":Bn.size==="sm"}])},[createBaseVNode("div",io,[createBaseVNode("div",uo,[createBaseVNode("button",{ref_key:"closeBtn",ref:He,class:"fr-btn fr-btn--close",title:Bn.closeButtonTitle,"aria-controls":"fr-modal-1",type:"button",onClick:ei[0]||(ei[0]=ri=>Sn())},[createBaseVNode("span",null,toDisplayString(Bn.closeButtonLabel),1)],8,fo)]),createBaseVNode("div",co,[createBaseVNode("h1",{id:Bn.modalId,class:"fr-modal__title"},[Tn.value||Ln.value?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass({[String(Bn.icon)]:Tn.value})},[Bn.icon&&Ln.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},Ln.value)),null,16)):createCommentVNode("",!0)],2)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Bn.title),1)],8,po),renderSlot(Bn.$slots,"default",{},void 0,!0)]),(ti=Bn.actions)!=null&&ti.length||Bn.$slots.footer?(openBlock(),createElementBlock("div",vo,[renderSlot(Bn.$slots,"footer",{},void 0,!0),(ni=Bn.actions)!=null&&ni.length?(openBlock(),createBlock(qe,{key:0,align:"right",buttons:Bn.actions,"inline-layout-when":"large",reverse:""},null,8,["buttons"])):createCommentVNode("",!0)])):createCommentVNode("",!0)])],2)])])],10,no)]}),_:3})):createCommentVNode("",!0)}}),Vt$1=ie$1(mo,[["__scopeId","data-v-70fe954b"]]),So=["id","aria-current"],Ao=defineComponent({__name:"DsfrNavigationItem",props:{id:{default:()=>x$3("nav","item")},active:{type:Boolean}},setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-nav__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default",{},void 0,!0)],8,So))}}),jt$1=ie$1(Ao,[["__scopeId","data-v-aa4076c4"]]),Bo=["href"],ht$1=2,Qe=defineComponent({__name:"DsfrNavigationMenuLink",props:{id:{default:()=>x$3("menu-link")},to:{default:"#"},text:{default:""},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},emits:["toggleId"],setup(Oe){const e=Oe,Te=computed(()=>typeof e.to=="string"&&e.to.startsWith("http")),ke=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),Be=computed(()=>ke.value||!e.icon?void 0:typeof e.icon=="string"?{scale:ht$1,name:e.icon}:{scale:ht$1,...e.icon||{}}),Ue=hasInjectionContext()?inject(nt$1):void 0,He=(Ue==null?void 0:Ue())??(()=>{});return(We,Cn)=>{const En=resolveComponent("RouterLink");return Te.value?(openBlock(),createElementBlock("a",{key:0,class:"fr-nav__link","data-testid":"nav-external-link",href:We.to,onClick:Cn[0]||(Cn[0]=An=>{We.$emit("toggleId",We.id),We.onClick(An)})},toDisplayString(We.text),9,Bo)):(openBlock(),createBlock(En,{key:1,class:normalizeClass(["fr-nav__link",{[String(We.icon)]:ke.value}]),"data-testid":"nav-router-link",to:We.to,onClick:Cn[1]||(Cn[1]=An=>{var Sn;unref(He)(),We.$emit("toggleId",We.id),(Sn=We.onClick)==null||Sn.call(We,An)})},{default:withCtx(()=>[We.icon&&Be.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},Be.value)),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(We.text),1)]),_:1},8,["to","class"]))}}}),Lo={class:"fr-col-12 fr-col-lg-3"},Po={class:"fr-mega-menu__category"},Mo={class:"fr-mega-menu__list"},Ot$1=defineComponent({__name:"DsfrNavigationMegaMenuCategory",props:{title:{},active:{type:Boolean},links:{}},setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("div",Lo,[createBaseVNode("h5",Po,[createBaseVNode("a",{class:"fr-nav__link",href:"#",onClick:Te[0]||(Te[0]=withModifiers(()=>{},["prevent"]))},toDisplayString(e.title),1)]),createBaseVNode("ul",Mo,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.links,(ke,Be)=>(openBlock(),createElementBlock("li",{key:Be,class:"fr-nav__link"},[createVNode(Qe,mergeProps({ref_for:!0},ke),null,16)]))),128))])]))}}),No=["aria-expanded","aria-current","aria-controls"],Fo=["id"],Ro={class:"fr-container fr-container--fluid fr-container-lg"},Vo={class:"fr-grid-row fr-grid-row-lg--gutters"},jo={class:"fr-col-12 fr-col-lg-8 fr-col-offset-lg-4--right fr-mb-4v"},Oo={class:"fr-mega-menu__leader"},Ho={class:"fr-h4 fr-mb-2v"},Ko={class:"fr-hidden fr-displayed-lg"},qo=defineComponent({__name:"DsfrNavigationMegaMenu",props:{id:{default:()=>x$3("mega-menu")},title:{},description:{default:""},link:{default:()=>({to:"#",text:"Voir toute la rubrique"})},menus:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(Oe){const e=Oe,{collapse:Te,collapsing:ke,cssExpanded:Be,doExpand:Ue,onTransitionEnd:He}=ye$1(),We=computed(()=>e.id===e.expandedId);return watch(We,(Cn,En)=>{Cn!==En&&Ue(Cn)}),onMounted(()=>{We.value&&Ue(!0)}),(Cn,En)=>{const An=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":We.value,"aria-current":Cn.active||void 0,"aria-controls":Cn.id,onClick:En[0]||(En[0]=Sn=>Cn.$emit("toggleId",Cn.id))},toDisplayString(Cn.title),9,No),createBaseVNode("div",{id:Cn.id,ref_key:"collapse",ref:Te,"data-testid":"mega-menu-wrapper",class:normalizeClass(["fr-collapse fr-mega-menu",{"fr-collapse--expanded":unref(Be),"fr-collapsing":unref(ke)}]),tabindex:"-1",onTransitionend:En[2]||(En[2]=Sn=>unref(He)(We.value))},[createBaseVNode("div",Ro,[createBaseVNode("button",{class:"fr-link--close fr-link","aria-controls":"mega-menu-695",onClick:En[1]||(En[1]=Sn=>Cn.$emit("toggleId",Cn.id))}," Fermer "),createBaseVNode("div",Vo,[createBaseVNode("div",jo,[createBaseVNode("div",Oo,[createBaseVNode("h4",Ho,toDisplayString(Cn.title),1),createBaseVNode("p",Ko,[createTextVNode(toDisplayString(Cn.description)+" ",1),renderSlot(Cn.$slots,"description",{},void 0,!0)]),createVNode(An,{class:"fr-link fr-icon-arrow-right-line fr-link--icon-right fr-link--align-on-content",to:Cn.link.to},{default:withCtx(()=>[createTextVNode(toDisplayString(Cn.link.text),1)]),_:1},8,["to"])])]),renderSlot(Cn.$slots,"default",{},void 0,!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.menus,(Sn,Tn)=>(openBlock(),createBlock(Ot$1,mergeProps({key:Tn,ref_for:!0},Sn),null,16))),128))])])],42,Fo)],64)}}}),Ht$1=ie$1(qo,[["__scopeId","data-v-1e103394"]]),zo=["id","aria-current"],Kt$1=defineComponent({__name:"DsfrNavigationMenuItem",props:{id:{default:()=>x$3("menu","item")},active:{type:Boolean}},setup(Oe){return(e,Te)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-menu__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default")],8,zo))}}),Qo=["aria-expanded","aria-current","aria-controls"],Wo=["id"],Go={class:"fr-menu__list"},qt$1=defineComponent({__name:"DsfrNavigationMenu",props:{id:{default:()=>x$3("menu")},title:{},links:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(Oe){const e=Oe,{collapse:Te,collapsing:ke,cssExpanded:Be,doExpand:Ue,onTransitionEnd:He}=ye$1(),We=computed(()=>e.id===e.expandedId);return watch(We,(Cn,En)=>{Cn!==En&&Ue(Cn)}),onMounted(()=>{We.value&&Ue(!0)}),(Cn,En)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":We.value,"aria-current":Cn.active||void 0,"aria-controls":Cn.id,onClick:En[0]||(En[0]=An=>Cn.$emit("toggleId",Cn.id))},[createBaseVNode("span",null,toDisplayString(Cn.title),1)],8,Qo),createBaseVNode("div",{id:Cn.id,ref_key:"collapse",ref:Te,class:normalizeClass(["fr-collapse fr-menu",{"fr-collapse--expanded":unref(Be),"fr-collapsing":unref(ke)}]),"data-testid":"navigation-menu",onTransitionend:En[2]||(En[2]=An=>unref(He)(We.value))},[createBaseVNode("ul",Go,[renderSlot(Cn.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.links,(An,Sn)=>(openBlock(),createBlock(Kt$1,{key:Sn},{default:withCtx(()=>[createVNode(Qe,mergeProps({ref_for:!0},An,{onToggleId:En[1]||(En[1]=Tn=>Cn.$emit("toggleId",Cn.expandedId))}),null,16)]),_:2},1024))),128))])],42,Wo)],64))}}),Xo=["id","aria-label"],Uo={class:"fr-nav__list"},Yo=defineComponent({__name:"DsfrNavigation",props:{id:{default:()=>x$3("nav")},label:{default:"Menu principal"},navItems:{default:()=>[]}},setup(Oe){const e=Oe,Te=ref(void 0),ke=We=>{if(We===Te.value){Te.value=void 0;return}Te.value=We},Be=We=>{if(We!==document.getElementById(e.id)){if(!(We!=null&&We.parentNode)){ke(Te.value);return}Be(We.parentNode)}},Ue=We=>{Be(We.target)},He=We=>{We.key==="Escape"&&ke(Te.value)};return onMounted(()=>{document.addEventListener("click",Ue),document.addEventListener("keydown",He)}),onUnmounted(()=>{document.removeEventListener("click",Ue),document.removeEventListener("keydown",He)}),(We,Cn)=>(openBlock(),createElementBlock("nav",{id:We.id,class:"fr-nav",role:"navigation","aria-label":We.label},[createBaseVNode("ul",Uo,[renderSlot(We.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(We.navItems,(En,An)=>(openBlock(),createBlock(jt$1,{id:En.id,key:An},{default:withCtx(()=>[En.to&&En.text?(openBlock(),createBlock(Qe,mergeProps({key:0,ref_for:!0},En,{"expanded-id":Te.value,onToggleId:Cn[0]||(Cn[0]=Sn=>ke(Sn))}),null,16,["expanded-id"])):En.title&&En.links?(openBlock(),createBlock(qt$1,mergeProps({key:1,ref_for:!0},En,{"expanded-id":Te.value,onToggleId:Cn[1]||(Cn[1]=Sn=>ke(Sn))}),null,16,["expanded-id"])):En.title&&En.menus?(openBlock(),createBlock(Ht$1,mergeProps({key:2,ref_for:!0},En,{"expanded-id":Te.value,onToggleId:Cn[2]||(Cn[2]=Sn=>ke(Sn))}),null,16,["expanded-id"])):createCommentVNode("",!0)]),_:2},1032,["id"]))),128))])],8,Xo))}}),mi=["id","name","value","checked","disabled"],gi=["for"],bi={key:0,class:"required"},hi={key:0,class:"fr-hint-text"},yi={key:0,class:"fr-radio-rich__pictogram"},ki=["src","title"],$i={key:0},wi=["href"],_i=["href"],Di=["href"],zt$1=defineComponent({__name:"DsfrRadioButton",props:{id:{default:()=>x$3("basic","radio")},name:{},modelValue:{type:[String,Number,Boolean],default:""},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},value:{type:[String,Number,Boolean]},label:{default:""},hint:{default:""},img:{default:void 0},imgTitle:{},svgPath:{default:void 0},svgAttrs:{default:()=>({viewBox:"0 0 80 80",width:"80px",height:"80px"})}},emits:["update:modelValue"],setup(Oe){const e=Oe,Te={viewBox:"0 0 80 80",width:"80px",height:"80px"},ke=computed(()=>!!e.img||!!e.svgPath);return(Be,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":Be.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-radio-group",{"fr-radio-rich":ke.value,"fr-radio-group--sm":Be.small}])},[createBaseVNode("input",mergeProps({id:Be.id,type:"radio",name:Be.name,value:Be.value,checked:Be.modelValue===Be.value,disabled:Be.disabled},Be.$attrs,{onClick:Ue[0]||(Ue[0]=He=>Be.$emit("update:modelValue",Be.value))}),null,16,mi),createBaseVNode("label",{for:Be.id,class:"fr-label"},[renderSlot(Be.$slots,"label",{},()=>[createTextVNode(toDisplayString(Be.label)+" ",1),renderSlot(Be.$slots,"required-tip",{},()=>[Be.$attrs.required?(openBlock(),createElementBlock("span",bi," *")):createCommentVNode("",!0)])]),Be.hint?(openBlock(),createElementBlock("span",hi,toDisplayString(Be.hint),1)):createCommentVNode("",!0)],8,gi),Be.img||Be.svgPath?(openBlock(),createElementBlock("div",yi,[Be.img?(openBlock(),createElementBlock("img",{key:0,src:Be.img,class:"fr-artwork",alt:"",title:Be.imgTitle},null,8,ki)):(openBlock(),createElementBlock("svg",mergeProps({key:1,"aria-hidden":"true",class:"fr-artwork"},{...Te,...Be.svgAttrs}),[Be.imgTitle?(openBlock(),createElementBlock("title",$i,toDisplayString(Be.imgTitle),1)):createCommentVNode("",!0),createBaseVNode("use",{class:"fr-artwork-decorative",href:`${Be.svgPath}#artwork-decorative`},null,8,wi),createBaseVNode("use",{class:"fr-artwork-minor",href:`${Be.svgPath}#artwork-minor`},null,8,_i),createBaseVNode("use",{class:"fr-artwork-major",href:`${Be.svgPath}#artwork-major`},null,8,Di)],16))])):createCommentVNode("",!0)],2)],2))}}),Ii={class:"fr-form-group"},Ti=["disabled","aria-labelledby","aria-invalid","role"],Ei=["id"],Ci={key:0,class:"fr-hint-text"},Si={key:0,class:"required"},Ai=["id"],Bi=defineComponent({__name:"DsfrRadioButtonSet",props:{titleId:{default:()=>x$3("radio-button","group")},disabled:{type:Boolean},required:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{},errorMessage:{default:""},validMessage:{default:""},legend:{default:""},hint:{default:""},modelValue:{type:[String,Number,Boolean]},options:{default:()=>[]},ariaInvalid:{type:[Boolean,String]}},emits:["update:modelValue"],setup(Oe,{emit:e}){const Te=Oe,ke=e,Be=computed(()=>Te.errorMessage||Te.validMessage),Ue=computed(()=>Te.errorMessage?"fr-error-text":"fr-valid-text"),He=Cn=>{Cn!==Te.modelValue&&ke("update:modelValue",Cn)},We=computed(()=>Be.value?`${Te.titleId} messages-${Te.titleId}`:Te.titleId);return(Cn,En)=>(openBlock(),createElementBlock("div",Ii,[createBaseVNode("fieldset",{class:normalizeClass(["fr-fieldset",{"fr-fieldset--error":Cn.errorMessage,"fr-fieldset--valid":Cn.validMessage}]),disabled:Cn.disabled,"aria-labelledby":We.value,"aria-invalid":Cn.ariaInvalid,role:Cn.errorMessage||Cn.validMessage?"group":void 0},[Cn.legend||Cn.$slots.legend||Cn.hint||Cn.$slots.hint?(openBlock(),createElementBlock("legend",{key:0,id:Cn.titleId,class:"fr-fieldset__legend fr-fieldset__legend--regular"},[renderSlot(Cn.$slots,"legend",{},()=>[createTextVNode(toDisplayString(Cn.legend)+" ",1),Cn.hint||Cn.$slots.hint?(openBlock(),createElementBlock("span",Ci,[renderSlot(Cn.$slots,"hint",{},()=>[createTextVNode(toDisplayString(Cn.hint),1)])])):createCommentVNode("",!0),renderSlot(Cn.$slots,"required-tip",{},()=>[Cn.required?(openBlock(),createElementBlock("span",Si," *")):createCommentVNode("",!0)])])],8,Ei)):createCommentVNode("",!0),renderSlot(Cn.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Cn.options,(An,Sn)=>(openBlock(),createBlock(zt$1,mergeProps({key:typeof An.value=="boolean"?Sn:An.value||Sn,name:Cn.name,"aria-disabled":An.disabled,ref_for:!0},An,{small:Cn.small,inline:Cn.inline,"model-value":Cn.modelValue,"onUpdate:modelValue":En[0]||(En[0]=Tn=>He(Tn))}),null,16,["name","aria-disabled","small","inline","model-value"]))),128))]),Be.value?(openBlock(),createElementBlock("div",{key:1,id:`messages-${Cn.titleId}`,class:"fr-messages-group","aria-live":"assertive",role:"alert"},[createBaseVNode("p",{class:normalizeClass(["fr-message fr-message--info flex items-center",Ue.value])},toDisplayString(Be.value),3)],8,Ai)):createCommentVNode("",!0)],10,Ti)]))}}),qi={class:"fr-segmented__element"},zi=["id","name","value","checked","disabled","aria-disabled"],Qi=["for"],Wi={key:1},Qt$1=defineComponent({__name:"DsfrSegmented",props:{id:{default:()=>x$3("segmented")},name:{default:void 0},modelValue:{default:""},value:{},label:{default:""},disabled:{type:Boolean},icon:{default:void 0}},emits:["update:modelValue"],setup(Oe){const e=Oe,Te=computed(()=>typeof e.icon=="string"?{name:e.icon}:e.icon),ke=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-")?e.icon:"");return(Be,Ue)=>(openBlock(),createElementBlock("div",qi,[createBaseVNode("input",mergeProps({id:Be.id,type:"radio",name:Be.name,value:Be.value,checked:Be.modelValue===Be.value,disabled:Be.disabled,"aria-disabled":Be.disabled},Be.$attrs,{onClick:Ue[0]||(Ue[0]=He=>Be.$emit("update:modelValue",Be.value))}),null,16,zi),createBaseVNode("label",{for:Be.id,class:normalizeClass(["fr-label",{[ke.value]:ke.value}])},[Be.icon&&!ke.value?(openBlock(),createBlock(ue$1,normalizeProps(mergeProps({key:0},Te.value)),null,16)):createCommentVNode("",!0),Be.icon?(openBlock(),createElementBlock("span",Wi," ")):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Be.label),1)],10,Qi)]))}}),Gi={class:"fr-form-group"},Xi=["disabled"],Ui=["id"],Yi={key:0,class:"fr-hint-text"},Zi={class:"fr-segmented__elements"},Ji=defineComponent({__name:"DsfrSegmentedSet",props:{titleId:{default:()=>x$3("segmented-button","set")},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{default:()=>x$3("segmented-button","set")},hint:{},legend:{default:""},modelValue:{},options:{default:()=>[]}},emits:["update:modelValue"],setup(Oe,{emit:e}){const Te=Oe,ke=e,Be=Ue=>{Ue!==Te.modelValue&&ke("update:modelValue",Ue)};return(Ue,He)=>(openBlock(),createElementBlock("div",Gi,[createBaseVNode("fieldset",{class:normalizeClass(["fr-segmented",{"fr-segmented--sm":Ue.small,"fr-segmented--no-legend":!Ue.legend}]),disabled:Ue.disabled},[Ue.legend?(openBlock(),createElementBlock("legend",{key:0,id:Ue.titleId,class:normalizeClass(["fr-segmented__legend",{"fr-segmented__legend--inline":Ue.inline}])},[renderSlot(Ue.$slots,"legend",{},()=>[createTextVNode(toDisplayString(Ue.legend),1)]),Ue.hint?(openBlock(),createElementBlock("span",Yi,toDisplayString(Ue.hint),1)):createCommentVNode("",!0)],10,Ui)):createCommentVNode("",!0),createBaseVNode("div",Zi,[renderSlot(Ue.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ue.options,(We,Cn)=>(openBlock(),createBlock(Qt$1,mergeProps({key:We.value||Cn,name:Ue.name||We.name,ref_for:!0},{...We,disabled:Ue.disabled||We.disabled},{"model-value":Ue.modelValue,"onUpdate:modelValue":He[0]||(He[0]=En=>Be(En))}),null,16,["name","model-value"]))),128))])])],10,Xi)]))}}),xi=["for"],ed={key:0,class:"required"},td$1={key:0,class:"fr-hint-text"},ad=["id","name","disabled","aria-disabled","required"],sd=["selected"],rd=["selected","value","disabled","aria-disabled"],nd=["id"],ld=defineComponent({inheritAttrs:!1,__name:"DsfrSelect",props:{required:{type:Boolean},disabled:{type:Boolean},selectId:{default:()=>x$3("select")},name:{default:void 0},description:{default:void 0},hint:{default:void 0},modelValue:{default:void 0},label:{default:""},options:{default:()=>[]},successMessage:{default:""},errorMessage:{default:""},defaultUnselectedText:{default:"Sélectionner une option"}},emits:["update:modelValue"],setup(Oe){const e=Oe;e.description&&console.warn("[DsfrSelect] : La prop `description` est dépréciée. Veuillez utiliser `hint` à la place.");const Te=computed(()=>e.errorMessage||e.successMessage),ke=computed(()=>e.errorMessage?"error":"valid");return(Be,Ue)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-select-group",{[`fr-select-group--${ke.value}`]:Te.value}])},[createBaseVNode("label",{class:"fr-label",for:Be.selectId},[renderSlot(Be.$slots,"label",{},()=>[createTextVNode(toDisplayString(Be.label)+" ",1),renderSlot(Be.$slots,"required-tip",{},()=>[Be.required?(openBlock(),createElementBlock("span",ed," *")):createCommentVNode("",!0)])]),Be.hint??Be.description?(openBlock(),createElementBlock("span",td$1,toDisplayString(Be.hint??Be.description),1)):createCommentVNode("",!0)],8,xi),createBaseVNode("select",mergeProps({id:Be.selectId,class:[{[`fr-select--${ke.value}`]:Te.value},"fr-select"],name:Be.name||Be.selectId,disabled:Be.disabled,"aria-disabled":Be.disabled,required:Be.required},Be.$attrs,{onChange:Ue[0]||(Ue[0]=He=>{var We;return Be.$emit("update:modelValue",(We=He.target)==null?void 0:We.value)})}),[createBaseVNode("option",{selected:!Be.options.some(He=>typeof He!="object"||He===null?He===Be.modelValue:He.value===Be.modelValue),disabled:"",hidden:""},toDisplayString(Be.defaultUnselectedText),9,sd),(openBlock(!0),createElementBlock(Fragment,null,renderList(Be.options,(He,We)=>(openBlock(),createElementBlock("option",{key:We,selected:Be.modelValue===He||typeof He=="object"&&He.value===Be.modelValue,value:typeof He=="object"?He.value:He,disabled:!!(typeof He=="object"&&He.disabled),"aria-disabled":!!(typeof He=="object"&&He.disabled)},toDisplayString(typeof He=="object"?He.text:He),9,rd))),128))],16,ad),Te.value?(openBlock(),createElementBlock("p",{key:0,id:`select-${ke.value}-desc-${ke.value}`,class:normalizeClass(`fr-${ke.value}-text`)},toDisplayString(Te.value),11,nd)):createCommentVNode("",!0)],2))}}),od={class:"fr-share"},id={class:"fr-share__title"},dd={class:"fr-btns-group"},ud=["title","href","onClick"],fd$1={key:0},cd=["href","title"],pd=["title"],vd=defineComponent({__name:"DsfrShare",props:{title:{default:"Partager la page"},copyLabel:{default:"Copier dans le presse-papier"},mail:{default:()=>{}},networks:{default:()=>[]}},setup(Oe){const e=()=>{const ke=window.location.href;navigator.clipboard.writeText(ke)},Te=({url:ke,label:Be})=>{window.open(ke,Be,"toolbar=no,location=yes,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=450")};return(ke,Be)=>{var Ue;return openBlock(),createElementBlock("div",od,[createBaseVNode("p",id,toDisplayString(ke.title),1),createBaseVNode("ul",dd,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ke.networks,(He,We)=>(openBlock(),createElementBlock("li",{key:We},[createBaseVNode("a",{class:normalizeClass(`fr-btn fr-btn--${He.name}`),title:`${He.label} - nouvelle fenêtre`,href:He.url,target:"_blank",rel:"noopener noreferrer",onClick:withModifiers(Cn=>Te(He),["prevent"])},toDisplayString(He.label),11,ud)]))),128)),(Ue=ke.mail)!=null&&Ue.to?(openBlock(),createElementBlock("li",fd$1,[createBaseVNode("a",{class:"fr-btn fr-btn--mail",href:ke.mail.to,title:ke.mail.label,target:"_blank",rel:"noopener noreferrer"},toDisplayString(ke.mail.label),9,cd)])):createCommentVNode("",!0),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--copy",title:ke.copyLabel,onClick:Be[0]||(Be[0]=He=>e())},toDisplayString(ke.copyLabel),9,pd)])])])}}}),Hd=["id","aria-labelledby","tabindex"],Kd=defineComponent({__name:"DsfrTabContent",props:{panelId:{},tabId:{}},setup(Oe){useCssVars(Cn=>({"7152af7e":He.value,"2a62e962":We.value}));const e=Oe,Te={true:"100%",false:"-100%"},ke=inject(Ke),{isVisible:Be,asc:Ue}=ke(toRef$1(()=>e.tabId)),He=computed(()=>Te[String(Ue==null?void 0:Ue.value)]),We=computed(()=>Te[String(!(Ue!=null&&Ue.value))]);return(Cn,En)=>(openBlock(),createBlock(Transition,{name:"slide-fade",mode:"in-out"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:Cn.panelId,class:normalizeClass(["fr-tabs__panel",{"fr-tabs__panel--selected":unref(Be)}]),role:"tabpanel","aria-labelledby":Cn.tabId,tabindex:unref(Be)?0:-1},[renderSlot(Cn.$slots,"default",{},void 0,!0)],10,Hd),[[vShow,unref(Be)]])]),_:3}))}}),Ut$1=ie$1(Kd,[["__scopeId","data-v-5774b16c"]]),qd={role:"presentation"},zd=["id","data-testid","tabindex","aria-selected","aria-controls"],Qd={key:0,style:{"margin-left":"-0.25rem","margin-right":"0.5rem","font-size":"0.95rem"}},Yt$1=defineComponent({__name:"DsfrTabItem",props:{panelId:{},tabId:{},icon:{default:void 0}},emits:["click","next","previous","first","last"],setup(Oe,{emit:e}){const Te=Oe,ke=e,Be=ref(null),Ue={ArrowRight:"next",ArrowLeft:"previous",Home:"first",End:"last"};function He(An){const Sn=An==null?void 0:An.key,Tn=Ue[Sn];Tn&&ke(Tn)}const We=inject(Ke),{isVisible:Cn}=We(toRef$1(()=>Te.tabId)),En=useTemplateRef("button");return watch(Cn,()=>{var An;Cn.value&&((An=En.value)==null||An.focus())}),(An,Sn)=>(openBlock(),createElementBlock("li",qd,[createBaseVNode("button",{id:An.tabId,ref_key:"button",ref:Be,"data-testid":`test-${An.tabId}`,class:"fr-tabs__tab",tabindex:unref(Cn)?0:-1,role:"tab",type:"button","aria-selected":unref(Cn),"aria-controls":An.panelId,onClick:Sn[0]||(Sn[0]=withModifiers(Tn=>An.$emit("click",An.tabId),["prevent"])),onKeydown:Sn[1]||(Sn[1]=Tn=>He(Tn))},[An.icon?(openBlock(),createElementBlock("span",Qd,[createVNode(ue$1,{name:An.icon},null,8,["name"])])):createCommentVNode("",!0),renderSlot(An.$slots,"default")],40,zd)]))}}),lu=["aria-label"],ou=defineComponent({__name:"DsfrTabs",props:{modelValue:{default:0},tabListName:{},tabTitles:{default:()=>[]},tabContents:{default:()=>[]}},emits:["update:modelValue"],setup(Oe,{expose:e,emit:Te}){const ke=Oe,Be=Te,Ue=ref(!1),He=computed({get:()=>ke.modelValue,set(ai){Be("update:modelValue",ai)}}),We=ref(new Map),Cn=ref(0);provide(Ke,ai=>{const li=ref(!0);if(watch(He,(vi,Ri)=>{li.value=vi>Ri}),[...We.value.values()].includes(ai.value))return{isVisible:computed(()=>We.value.get(He.value)===ai.value),asc:li};const Pi=Cn.value++;We.value.set(Pi,ai.value);const pi=computed(()=>Pi===He.value);return watch(ai,()=>{We.value.set(Pi,ai.value)}),onUnmounted(()=>{We.value.delete(Pi)}),{isVisible:pi}});const En=ref(null),An=ref(null),Sn=reactive({}),Tn=ai=>{if(Sn[ai])return Sn[ai];const li=x$3("tab");return Sn[ai]=li,li},Ln=async()=>{const ai=He.value===0?ke.tabTitles.length-1:He.value-1;Ue.value=!1,He.value=ai},Bn=async()=>{const ai=He.value===ke.tabTitles.length-1?0:He.value+1;Ue.value=!0,He.value=ai},ei=async()=>{He.value=0},ti=async()=>{He.value=ke.tabTitles.length-1},ni=ref({"--tabs-height":"100px"}),ri=()=>{var ai;if(He.value<0||!An.value||!An.value.offsetHeight)return;const li=An.value.offsetHeight,Pi=(ai=En.value)==null?void 0:ai.querySelectorAll(".fr-tabs__panel")[He.value];if(!Pi||!Pi.offsetHeight)return;const pi=Pi.offsetHeight;ni.value["--tabs-height"]=`${li+pi}px`},si=ref(null);return onMounted(()=>{var ai;window.ResizeObserver&&(si.value=new window.ResizeObserver(()=>{ri()})),(ai=En.value)==null||ai.querySelectorAll(".fr-tabs__panel").forEach(li=>{var Pi;li&&((Pi=si.value)==null||Pi.observe(li))})}),onUnmounted(()=>{var ai;(ai=En.value)==null||ai.querySelectorAll(".fr-tabs__panel").forEach(li=>{var Pi;li&&((Pi=si.value)==null||Pi.unobserve(li))})}),e({renderTabs:ri,selectFirst:ei,selectLast:ti}),(ai,li)=>(openBlock(),createElementBlock("div",{ref_key:"$el",ref:En,class:"fr-tabs",style:normalizeStyle(ni.value)},[createBaseVNode("ul",{ref_key:"tablist",ref:An,class:"fr-tabs__list",role:"tablist","aria-label":ai.tabListName},[renderSlot(ai.$slots,"tab-items",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(ai.tabTitles,(Pi,pi)=>(openBlock(),createBlock(Yt$1,{key:pi,icon:Pi.icon,"panel-id":Pi.panelId||`${Tn(pi)}-panel`,"tab-id":Pi.tabId||Tn(pi),onClick:vi=>He.value=pi,onNext:li[0]||(li[0]=vi=>Bn()),onPrevious:li[1]||(li[1]=vi=>Ln()),onFirst:li[2]||(li[2]=vi=>ei()),onLast:li[3]||(li[3]=vi=>ti())},{default:withCtx(()=>[createTextVNode(toDisplayString(Pi.title),1)]),_:2},1032,["icon","panel-id","tab-id","onClick"]))),128))])],8,lu),(openBlock(!0),createElementBlock(Fragment,null,renderList(ai.tabContents,(Pi,pi)=>{var vi,Ri,Fi,di;return openBlock(),createBlock(Ut$1,{key:pi,"panel-id":((Ri=(vi=ai.tabTitles)==null?void 0:vi[pi])==null?void 0:Ri.panelId)||`${Tn(pi)}-panel`,"tab-id":((di=(Fi=ai.tabTitles)==null?void 0:Fi[pi])==null?void 0:di.tabId)||Tn(pi)},{default:withCtx(()=>[createTextVNode(toDisplayString(Pi),1)]),_:2},1032,["panel-id","tab-id"])}),128)),renderSlot(ai.$slots,"default")],4))}}),Tu=["id","disabled","aria-disabled","checked","data-testid","aria-describedby","name"],Eu=["id","for","data-fr-checked-label","data-fr-unchecked-label"],Cu=["id"],Su=defineComponent({__name:"DsfrToggleSwitch",props:{modelValue:{type:Boolean},inputId:{default:()=>x$3("toggle")},hint:{default:""},label:{default:""},disabled:{type:Boolean},labelLeft:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},activeText:{default:"Activé"},inactiveText:{default:"Désactivé"},noText:{type:Boolean,default:!1},name:{default:void 0}},emits:["update:modelValue"],setup(Oe){const e=Oe,Te=computed(()=>`${e.inputId}-hint-text`);return(ke,Be)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-toggle",{"fr-toggle--label-left":ke.labelLeft,"fr-toggle--border-bottom":ke.borderBottom}])},[createBaseVNode("input",{id:ke.inputId,disabled:ke.disabled,"aria-disabled":ke.disabled,type:"checkbox",checked:ke.modelValue,"data-testid":ke.inputId,class:"fr-toggle__input","aria-describedby":Te.value,name:ke.name,onInput:Be[0]||(Be[0]=Ue=>ke.$emit("update:modelValue",Ue.target.checked))},null,40,Tu),createBaseVNode("label",{id:Te.value,class:"fr-toggle__label",for:ke.inputId,"data-fr-checked-label":ke.noText?void 0:ke.activeText,"data-fr-unchecked-label":ke.noText?void 0:ke.inactiveText,style:{"--toggle-status-width":"3.55208125rem"}},toDisplayString(ke.label),9,Eu),ke.hint?(openBlock(),createElementBlock("p",{key:0,id:`${ke.inputId}-hint-text`,class:"fr-hint-text"},toDisplayString(ke.hint),9,Cu)):createCommentVNode("",!0)],2))}}),_export_sfc=(Oe,e)=>{const Te=Oe.__vccOpts||Oe;for(const[ke,Be]of e)Te[ke]=Be;return Te},_sfc_main$11={},_hoisted_1$o={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$4(Oe,e){return openBlock(),createElementBlock("svg",_hoisted_1$o,e[0]||(e[0]=[createBaseVNode("path",{fill:"currentColor",d:"M19.5,2.5h-15c-1.1,0-2,0.9-2,2v15c0,1.1,0.9,2,2,2h15c1.1,0,2-0.9,2-2v-15C21.5,3.4,20.6,2.5,19.5,2.5z M13,17h-2v-6h2V17z M13,9h-2V7h2V9z"},null,-1)]))}const NotificationInfo=_export_sfc(_sfc_main$11,[["render",_sfc_render$4]]),_sfc_main$10={},_hoisted_1$n={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$3(Oe,e){return openBlock(),createElementBlock("svg",_hoisted_1$n,e[0]||(e[0]=[createBaseVNode("path",{fill:"currentColor",d:"M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm-.997-6l7.07-7.071-1.414-1.414-5.656 5.657-2.829-2.829-1.414 1.414L11.003 16z"},null,-1)]))}const NotificationSuccess=_export_sfc(_sfc_main$10,[["render",_sfc_render$3]]),_sfc_main$$={},_hoisted_1$m={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$2(Oe,e){return openBlock(),createElementBlock("svg",_hoisted_1$m,e[0]||(e[0]=[createBaseVNode("path",{fill:"currentColor",d:"M17.5,2.5h-11L1,12l5.5,9.5h11L23,12L17.5,2.5z M16.2,14.8l-1.4,1.4L12,13.4l-2.8,2.8l-1.4-1.4l2.8-2.8L7.8,9.2l1.4-1.4l2.8,2.8l2.8-2.8l1.4,1.4L13.4,12L16.2,14.8z"},null,-1)]))}const NotificationError=_export_sfc(_sfc_main$$,[["render",_sfc_render$2]]),_sfc_main$_={},_hoisted_1$l={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function _sfc_render$1(Oe,e){return openBlock(),createElementBlock("svg",_hoisted_1$l,e[0]||(e[0]=[createBaseVNode("path",{fill:"currentColor",d:"m12.866 3 9.526 16.5a1 1 0 0 1-.866 1.5H2.474a1 1 0 0 1-.866-1.5L11.134 3a1 1 0 0 1 1.732 0ZM11 16v2h2v-2h-2Zm0-7v5h2V9h-2Z"},null,-1)]))}const NotificationWarning=_export_sfc(_sfc_main$_,[["render",_sfc_render$1]]);/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(Oe){return typeof Oe=="object"||"displayName"in Oe||"props"in Oe||"__vccOpts"in Oe}function isESModule(Oe){return Oe.__esModule||Oe[Symbol.toStringTag]==="Module"||Oe.default&&isRouteComponent(Oe.default)}const assign=Object.assign;function applyToParams(Oe,e){const Te={};for(const ke in e){const Be=e[ke];Te[ke]=isArray(Be)?Be.map(Oe):Oe(Be)}return Te}const noop$1=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(Oe){return encodeURI(""+Oe).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(Oe){return commonEncode(Oe).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(Oe){return commonEncode(Oe).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(Oe){return encodeQueryValue(Oe).replace(EQUAL_RE,"%3D")}function encodePath(Oe){return commonEncode(Oe).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(Oe){return Oe==null?"":encodePath(Oe).replace(SLASH_RE,"%2F")}function decode$2(Oe){try{return decodeURIComponent(""+Oe)}catch{}return""+Oe}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=Oe=>Oe.replace(TRAILING_SLASH_RE,"");function parseURL(Oe,e,Te="/"){let ke,Be={},Ue="",He="";const We=e.indexOf("#");let Cn=e.indexOf("?");return We<Cn&&We>=0&&(Cn=-1),Cn>-1&&(ke=e.slice(0,Cn),Ue=e.slice(Cn+1,We>-1?We:e.length),Be=Oe(Ue)),We>-1&&(ke=ke||e.slice(0,We),He=e.slice(We,e.length)),ke=resolveRelativePath(ke??e,Te),{fullPath:ke+(Ue&&"?")+Ue+He,path:ke,query:Be,hash:decode$2(He)}}function stringifyURL(Oe,e){const Te=e.query?Oe(e.query):"";return e.path+(Te&&"?")+Te+(e.hash||"")}function stripBase(Oe,e){return!e||!Oe.toLowerCase().startsWith(e.toLowerCase())?Oe:Oe.slice(e.length)||"/"}function isSameRouteLocation(Oe,e,Te){const ke=e.matched.length-1,Be=Te.matched.length-1;return ke>-1&&ke===Be&&isSameRouteRecord(e.matched[ke],Te.matched[Be])&&isSameRouteLocationParams(e.params,Te.params)&&Oe(e.query)===Oe(Te.query)&&e.hash===Te.hash}function isSameRouteRecord(Oe,e){return(Oe.aliasOf||Oe)===(e.aliasOf||e)}function isSameRouteLocationParams(Oe,e){if(Object.keys(Oe).length!==Object.keys(e).length)return!1;for(const Te in Oe)if(!isSameRouteLocationParamsValue(Oe[Te],e[Te]))return!1;return!0}function isSameRouteLocationParamsValue(Oe,e){return isArray(Oe)?isEquivalentArray(Oe,e):isArray(e)?isEquivalentArray(e,Oe):Oe===e}function isEquivalentArray(Oe,e){return isArray(e)?Oe.length===e.length&&Oe.every((Te,ke)=>Te===e[ke]):Oe.length===1&&Oe[0]===e}function resolveRelativePath(Oe,e){if(Oe.startsWith("/"))return Oe;if(!Oe)return e;const Te=e.split("/"),ke=Oe.split("/"),Be=ke[ke.length-1];(Be===".."||Be===".")&&ke.push("");let Ue=Te.length-1,He,We;for(He=0;He<ke.length;He++)if(We=ke[He],We!==".")if(We==="..")Ue>1&&Ue--;else break;return Te.slice(0,Ue).join("/")+"/"+ke.slice(He).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(Oe){Oe.pop="pop",Oe.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(Oe){Oe.back="back",Oe.forward="forward",Oe.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(Oe){if(!Oe)if(isBrowser){const e=document.querySelector("base");Oe=e&&e.getAttribute("href")||"/",Oe=Oe.replace(/^\w+:\/\/[^\/]+/,"")}else Oe="/";return Oe[0]!=="/"&&Oe[0]!=="#"&&(Oe="/"+Oe),removeTrailingSlash(Oe)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(Oe,e){return Oe.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(Oe,e){const Te=document.documentElement.getBoundingClientRect(),ke=Oe.getBoundingClientRect();return{behavior:e.behavior,left:ke.left-Te.left-(e.left||0),top:ke.top-Te.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(Oe){let e;if("el"in Oe){const Te=Oe.el,ke=typeof Te=="string"&&Te.startsWith("#"),Be=typeof Te=="string"?ke?document.getElementById(Te.slice(1)):document.querySelector(Te):Te;if(!Be)return;e=getElementPosition(Be,Oe)}else e=Oe;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(Oe,e){return(history.state?history.state.position-e:-1)+Oe}const scrollPositions=new Map;function saveScrollPosition(Oe,e){scrollPositions.set(Oe,e)}function getSavedScrollPosition(Oe){const e=scrollPositions.get(Oe);return scrollPositions.delete(Oe),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(Oe,e){const{pathname:Te,search:ke,hash:Be}=e,Ue=Oe.indexOf("#");if(Ue>-1){let We=Be.includes(Oe.slice(Ue))?Oe.slice(Ue).length:1,Cn=Be.slice(We);return Cn[0]!=="/"&&(Cn="/"+Cn),stripBase(Cn,"")}return stripBase(Te,Oe)+ke+Be}function useHistoryListeners(Oe,e,Te,ke){let Be=[],Ue=[],He=null;const We=({state:Tn})=>{const Ln=createCurrentLocation(Oe,location),Bn=Te.value,ei=e.value;let ti=0;if(Tn){if(Te.value=Ln,e.value=Tn,He&&He===Bn){He=null;return}ti=ei?Tn.position-ei.position:0}else ke(Ln);Be.forEach(ni=>{ni(Te.value,Bn,{delta:ti,type:NavigationType.pop,direction:ti?ti>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function Cn(){He=Te.value}function En(Tn){Be.push(Tn);const Ln=()=>{const Bn=Be.indexOf(Tn);Bn>-1&&Be.splice(Bn,1)};return Ue.push(Ln),Ln}function An(){const{history:Tn}=window;Tn.state&&Tn.replaceState(assign({},Tn.state,{scroll:computeScrollPosition()}),"")}function Sn(){for(const Tn of Ue)Tn();Ue=[],window.removeEventListener("popstate",We),window.removeEventListener("beforeunload",An)}return window.addEventListener("popstate",We),window.addEventListener("beforeunload",An,{passive:!0}),{pauseListeners:Cn,listen:En,destroy:Sn}}function buildState(Oe,e,Te,ke=!1,Be=!1){return{back:Oe,current:e,forward:Te,replaced:ke,position:window.history.length,scroll:Be?computeScrollPosition():null}}function useHistoryStateNavigation(Oe){const{history:e,location:Te}=window,ke={value:createCurrentLocation(Oe,Te)},Be={value:e.state};Be.value||Ue(ke.value,{back:null,current:ke.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function Ue(Cn,En,An){const Sn=Oe.indexOf("#"),Tn=Sn>-1?(Te.host&&document.querySelector("base")?Oe:Oe.slice(Sn))+Cn:createBaseLocation()+Oe+Cn;try{e[An?"replaceState":"pushState"](En,"",Tn),Be.value=En}catch(Ln){console.error(Ln),Te[An?"replace":"assign"](Tn)}}function He(Cn,En){const An=assign({},e.state,buildState(Be.value.back,Cn,Be.value.forward,!0),En,{position:Be.value.position});Ue(Cn,An,!0),ke.value=Cn}function We(Cn,En){const An=assign({},Be.value,e.state,{forward:Cn,scroll:computeScrollPosition()});Ue(An.current,An,!0);const Sn=assign({},buildState(ke.value,Cn,null),{position:An.position+1},En);Ue(Cn,Sn,!1),ke.value=Cn}return{location:ke,state:Be,push:We,replace:He}}function createWebHistory(Oe){Oe=normalizeBase(Oe);const e=useHistoryStateNavigation(Oe),Te=useHistoryListeners(Oe,e.state,e.location,e.replace);function ke(Ue,He=!0){He||Te.pauseListeners(),history.go(Ue)}const Be=assign({location:"",base:Oe,go:ke,createHref:createHref.bind(null,Oe)},e,Te);return Object.defineProperty(Be,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(Be,"state",{enumerable:!0,get:()=>e.state.value}),Be}function isRouteLocation(Oe){return typeof Oe=="string"||Oe&&typeof Oe=="object"}function isRouteName(Oe){return typeof Oe=="string"||typeof Oe=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(Oe){Oe[Oe.aborted=4]="aborted",Oe[Oe.cancelled=8]="cancelled",Oe[Oe.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(Oe,e){return assign(new Error,{type:Oe,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(Oe,e){return Oe instanceof Error&&NavigationFailureSymbol in Oe&&(e==null||!!(Oe.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(Oe,e){const Te=assign({},BASE_PATH_PARSER_OPTIONS,e),ke=[];let Be=Te.start?"^":"";const Ue=[];for(const En of Oe){const An=En.length?[]:[90];Te.strict&&!En.length&&(Be+="/");for(let Sn=0;Sn<En.length;Sn++){const Tn=En[Sn];let Ln=40+(Te.sensitive?.25:0);if(Tn.type===0)Sn||(Be+="/"),Be+=Tn.value.replace(REGEX_CHARS_RE,"\\$&"),Ln+=40;else if(Tn.type===1){const{value:Bn,repeatable:ei,optional:ti,regexp:ni}=Tn;Ue.push({name:Bn,repeatable:ei,optional:ti});const ri=ni||BASE_PARAM_PATTERN;if(ri!==BASE_PARAM_PATTERN){Ln+=10;try{new RegExp(`(${ri})`)}catch(ai){throw new Error(`Invalid custom RegExp for param "${Bn}" (${ri}): `+ai.message)}}let si=ei?`((?:${ri})(?:/(?:${ri}))*)`:`(${ri})`;Sn||(si=ti&&En.length<2?`(?:/${si})`:"/"+si),ti&&(si+="?"),Be+=si,Ln+=20,ti&&(Ln+=-8),ei&&(Ln+=-20),ri===".*"&&(Ln+=-50)}An.push(Ln)}ke.push(An)}if(Te.strict&&Te.end){const En=ke.length-1;ke[En][ke[En].length-1]+=.7000000000000001}Te.strict||(Be+="/?"),Te.end?Be+="$":Te.strict&&!Be.endsWith("/")&&(Be+="(?:/|$)");const He=new RegExp(Be,Te.sensitive?"":"i");function We(En){const An=En.match(He),Sn={};if(!An)return null;for(let Tn=1;Tn<An.length;Tn++){const Ln=An[Tn]||"",Bn=Ue[Tn-1];Sn[Bn.name]=Ln&&Bn.repeatable?Ln.split("/"):Ln}return Sn}function Cn(En){let An="",Sn=!1;for(const Tn of Oe){(!Sn||!An.endsWith("/"))&&(An+="/"),Sn=!1;for(const Ln of Tn)if(Ln.type===0)An+=Ln.value;else if(Ln.type===1){const{value:Bn,repeatable:ei,optional:ti}=Ln,ni=Bn in En?En[Bn]:"";if(isArray(ni)&&!ei)throw new Error(`Provided param "${Bn}" is an array but it is not repeatable (* or + modifiers)`);const ri=isArray(ni)?ni.join("/"):ni;if(!ri)if(ti)Tn.length<2&&(An.endsWith("/")?An=An.slice(0,-1):Sn=!0);else throw new Error(`Missing required param "${Bn}"`);An+=ri}}return An||"/"}return{re:He,score:ke,keys:Ue,parse:We,stringify:Cn}}function compareScoreArray(Oe,e){let Te=0;for(;Te<Oe.length&&Te<e.length;){const ke=e[Te]-Oe[Te];if(ke)return ke;Te++}return Oe.length<e.length?Oe.length===1&&Oe[0]===80?-1:1:Oe.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(Oe,e){let Te=0;const ke=Oe.score,Be=e.score;for(;Te<ke.length&&Te<Be.length;){const Ue=compareScoreArray(ke[Te],Be[Te]);if(Ue)return Ue;Te++}if(Math.abs(Be.length-ke.length)===1){if(isLastScoreNegative(ke))return 1;if(isLastScoreNegative(Be))return-1}return Be.length-ke.length}function isLastScoreNegative(Oe){const e=Oe[Oe.length-1];return Oe.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(Oe){if(!Oe)return[[]];if(Oe==="/")return[[ROOT_TOKEN]];if(!Oe.startsWith("/"))throw new Error(`Invalid path "${Oe}"`);function e(Ln){throw new Error(`ERR (${Te})/"${En}": ${Ln}`)}let Te=0,ke=Te;const Be=[];let Ue;function He(){Ue&&Be.push(Ue),Ue=[]}let We=0,Cn,En="",An="";function Sn(){En&&(Te===0?Ue.push({type:0,value:En}):Te===1||Te===2||Te===3?(Ue.length>1&&(Cn==="*"||Cn==="+")&&e(`A repeatable param (${En}) must be alone in its segment. eg: '/:ids+.`),Ue.push({type:1,value:En,regexp:An,repeatable:Cn==="*"||Cn==="+",optional:Cn==="*"||Cn==="?"})):e("Invalid state to consume buffer"),En="")}function Tn(){En+=Cn}for(;We<Oe.length;){if(Cn=Oe[We++],Cn==="\\"&&Te!==2){ke=Te,Te=4;continue}switch(Te){case 0:Cn==="/"?(En&&Sn(),He()):Cn===":"?(Sn(),Te=1):Tn();break;case 4:Tn(),Te=ke;break;case 1:Cn==="("?Te=2:VALID_PARAM_RE.test(Cn)?Tn():(Sn(),Te=0,Cn!=="*"&&Cn!=="?"&&Cn!=="+"&&We--);break;case 2:Cn===")"?An[An.length-1]=="\\"?An=An.slice(0,-1)+Cn:Te=3:An+=Cn;break;case 3:Sn(),Te=0,Cn!=="*"&&Cn!=="?"&&Cn!=="+"&&We--,An="";break;default:e("Unknown state");break}}return Te===2&&e(`Unfinished custom RegExp for param "${En}"`),Sn(),He(),Be}function createRouteRecordMatcher(Oe,e,Te){const ke=tokensToParser(tokenizePath(Oe.path),Te),Be=assign(ke,{record:Oe,parent:e,children:[],alias:[]});return e&&!Be.record.aliasOf==!e.record.aliasOf&&e.children.push(Be),Be}function createRouterMatcher(Oe,e){const Te=[],ke=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function Be(Sn){return ke.get(Sn)}function Ue(Sn,Tn,Ln){const Bn=!Ln,ei=normalizeRouteRecord(Sn);ei.aliasOf=Ln&&Ln.record;const ti=mergeOptions(e,Sn),ni=[ei];if("alias"in Sn){const ai=typeof Sn.alias=="string"?[Sn.alias]:Sn.alias;for(const li of ai)ni.push(normalizeRouteRecord(assign({},ei,{components:Ln?Ln.record.components:ei.components,path:li,aliasOf:Ln?Ln.record:ei})))}let ri,si;for(const ai of ni){const{path:li}=ai;if(Tn&&li[0]!=="/"){const Pi=Tn.record.path,pi=Pi[Pi.length-1]==="/"?"":"/";ai.path=Tn.record.path+(li&&pi+li)}if(ri=createRouteRecordMatcher(ai,Tn,ti),Ln?Ln.alias.push(ri):(si=si||ri,si!==ri&&si.alias.push(ri),Bn&&Sn.name&&!isAliasRecord(ri)&&He(Sn.name)),isMatchable(ri)&&Cn(ri),ei.children){const Pi=ei.children;for(let pi=0;pi<Pi.length;pi++)Ue(Pi[pi],ri,Ln&&Ln.children[pi])}Ln=Ln||ri}return si?()=>{He(si)}:noop$1}function He(Sn){if(isRouteName(Sn)){const Tn=ke.get(Sn);Tn&&(ke.delete(Sn),Te.splice(Te.indexOf(Tn),1),Tn.children.forEach(He),Tn.alias.forEach(He))}else{const Tn=Te.indexOf(Sn);Tn>-1&&(Te.splice(Tn,1),Sn.record.name&&ke.delete(Sn.record.name),Sn.children.forEach(He),Sn.alias.forEach(He))}}function We(){return Te}function Cn(Sn){const Tn=findInsertionIndex(Sn,Te);Te.splice(Tn,0,Sn),Sn.record.name&&!isAliasRecord(Sn)&&ke.set(Sn.record.name,Sn)}function En(Sn,Tn){let Ln,Bn={},ei,ti;if("name"in Sn&&Sn.name){if(Ln=ke.get(Sn.name),!Ln)throw createRouterError(1,{location:Sn});ti=Ln.record.name,Bn=assign(paramsFromLocation(Tn.params,Ln.keys.filter(si=>!si.optional).concat(Ln.parent?Ln.parent.keys.filter(si=>si.optional):[]).map(si=>si.name)),Sn.params&&paramsFromLocation(Sn.params,Ln.keys.map(si=>si.name))),ei=Ln.stringify(Bn)}else if(Sn.path!=null)ei=Sn.path,Ln=Te.find(si=>si.re.test(ei)),Ln&&(Bn=Ln.parse(ei),ti=Ln.record.name);else{if(Ln=Tn.name?ke.get(Tn.name):Te.find(si=>si.re.test(Tn.path)),!Ln)throw createRouterError(1,{location:Sn,currentLocation:Tn});ti=Ln.record.name,Bn=assign({},Tn.params,Sn.params),ei=Ln.stringify(Bn)}const ni=[];let ri=Ln;for(;ri;)ni.unshift(ri.record),ri=ri.parent;return{name:ti,path:ei,params:Bn,matched:ni,meta:mergeMetaFields(ni)}}Oe.forEach(Sn=>Ue(Sn));function An(){Te.length=0,ke.clear()}return{addRoute:Ue,resolve:En,removeRoute:He,clearRoutes:An,getRoutes:We,getRecordMatcher:Be}}function paramsFromLocation(Oe,e){const Te={};for(const ke of e)ke in Oe&&(Te[ke]=Oe[ke]);return Te}function normalizeRouteRecord(Oe){const e={path:Oe.path,redirect:Oe.redirect,name:Oe.name,meta:Oe.meta||{},aliasOf:Oe.aliasOf,beforeEnter:Oe.beforeEnter,props:normalizeRecordProps(Oe),children:Oe.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in Oe?Oe.components||null:Oe.component&&{default:Oe.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function normalizeRecordProps(Oe){const e={},Te=Oe.props||!1;if("component"in Oe)e.default=Te;else for(const ke in Oe.components)e[ke]=typeof Te=="object"?Te[ke]:Te;return e}function isAliasRecord(Oe){for(;Oe;){if(Oe.record.aliasOf)return!0;Oe=Oe.parent}return!1}function mergeMetaFields(Oe){return Oe.reduce((e,Te)=>assign(e,Te.meta),{})}function mergeOptions(Oe,e){const Te={};for(const ke in Oe)Te[ke]=ke in e?e[ke]:Oe[ke];return Te}function findInsertionIndex(Oe,e){let Te=0,ke=e.length;for(;Te!==ke;){const Ue=Te+ke>>1;comparePathParserScore(Oe,e[Ue])<0?ke=Ue:Te=Ue+1}const Be=getInsertionAncestor(Oe);return Be&&(ke=e.lastIndexOf(Be,ke-1)),ke}function getInsertionAncestor(Oe){let e=Oe;for(;e=e.parent;)if(isMatchable(e)&&comparePathParserScore(Oe,e)===0)return e}function isMatchable({record:Oe}){return!!(Oe.name||Oe.components&&Object.keys(Oe.components).length||Oe.redirect)}function parseQuery(Oe){const e={};if(Oe===""||Oe==="?")return e;const ke=(Oe[0]==="?"?Oe.slice(1):Oe).split("&");for(let Be=0;Be<ke.length;++Be){const Ue=ke[Be].replace(PLUS_RE," "),He=Ue.indexOf("="),We=decode$2(He<0?Ue:Ue.slice(0,He)),Cn=He<0?null:decode$2(Ue.slice(He+1));if(We in e){let En=e[We];isArray(En)||(En=e[We]=[En]),En.push(Cn)}else e[We]=Cn}return e}function stringifyQuery(Oe){let e="";for(let Te in Oe){const ke=Oe[Te];if(Te=encodeQueryKey(Te),ke==null){ke!==void 0&&(e+=(e.length?"&":"")+Te);continue}(isArray(ke)?ke.map(Ue=>Ue&&encodeQueryValue(Ue)):[ke&&encodeQueryValue(ke)]).forEach(Ue=>{Ue!==void 0&&(e+=(e.length?"&":"")+Te,Ue!=null&&(e+="="+Ue))})}return e}function normalizeQuery(Oe){const e={};for(const Te in Oe){const ke=Oe[Te];ke!==void 0&&(e[Te]=isArray(ke)?ke.map(Be=>Be==null?null:""+Be):ke==null?ke:""+ke)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let Oe=[];function e(ke){return Oe.push(ke),()=>{const Be=Oe.indexOf(ke);Be>-1&&Oe.splice(Be,1)}}function Te(){Oe=[]}return{add:e,list:()=>Oe.slice(),reset:Te}}function guardToPromiseFn(Oe,e,Te,ke,Be,Ue=He=>He()){const He=ke&&(ke.enterCallbacks[Be]=ke.enterCallbacks[Be]||[]);return()=>new Promise((We,Cn)=>{const En=Tn=>{Tn===!1?Cn(createRouterError(4,{from:Te,to:e})):Tn instanceof Error?Cn(Tn):isRouteLocation(Tn)?Cn(createRouterError(2,{from:e,to:Tn})):(He&&ke.enterCallbacks[Be]===He&&typeof Tn=="function"&&He.push(Tn),We())},An=Ue(()=>Oe.call(ke&&ke.instances[Be],e,Te,En));let Sn=Promise.resolve(An);Oe.length<3&&(Sn=Sn.then(En)),Sn.catch(Tn=>Cn(Tn))})}function extractComponentsGuards(Oe,e,Te,ke,Be=Ue=>Ue()){const Ue=[];for(const He of Oe)for(const We in He.components){let Cn=He.components[We];if(!(e!=="beforeRouteEnter"&&!He.instances[We]))if(isRouteComponent(Cn)){const An=(Cn.__vccOpts||Cn)[e];An&&Ue.push(guardToPromiseFn(An,Te,ke,He,We,Be))}else{let En=Cn();Ue.push(()=>En.then(An=>{if(!An)throw new Error(`Couldn't resolve component "${We}" at "${He.path}"`);const Sn=isESModule(An)?An.default:An;He.mods[We]=An,He.components[We]=Sn;const Ln=(Sn.__vccOpts||Sn)[e];return Ln&&guardToPromiseFn(Ln,Te,ke,He,We,Be)()}))}}return Ue}function useLink(Oe){const e=inject(routerKey),Te=inject(routeLocationKey),ke=computed(()=>{const Cn=unref(Oe.to);return e.resolve(Cn)}),Be=computed(()=>{const{matched:Cn}=ke.value,{length:En}=Cn,An=Cn[En-1],Sn=Te.matched;if(!An||!Sn.length)return-1;const Tn=Sn.findIndex(isSameRouteRecord.bind(null,An));if(Tn>-1)return Tn;const Ln=getOriginalPath(Cn[En-2]);return En>1&&getOriginalPath(An)===Ln&&Sn[Sn.length-1].path!==Ln?Sn.findIndex(isSameRouteRecord.bind(null,Cn[En-2])):Tn}),Ue=computed(()=>Be.value>-1&&includesParams(Te.params,ke.value.params)),He=computed(()=>Be.value>-1&&Be.value===Te.matched.length-1&&isSameRouteLocationParams(Te.params,ke.value.params));function We(Cn={}){if(guardEvent(Cn)){const En=e[unref(Oe.replace)?"replace":"push"](unref(Oe.to)).catch(noop$1);return Oe.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>En),En}return Promise.resolve()}return{route:ke,href:computed(()=>ke.value.href),isActive:Ue,isExactActive:He,navigate:We}}function preferSingleVNode(Oe){return Oe.length===1?Oe[0]:Oe}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(Oe,{slots:e}){const Te=reactive(useLink(Oe)),{options:ke}=inject(routerKey),Be=computed(()=>({[getLinkClass(Oe.activeClass,ke.linkActiveClass,"router-link-active")]:Te.isActive,[getLinkClass(Oe.exactActiveClass,ke.linkExactActiveClass,"router-link-exact-active")]:Te.isExactActive}));return()=>{const Ue=e.default&&preferSingleVNode(e.default(Te));return Oe.custom?Ue:h$1("a",{"aria-current":Te.isExactActive?Oe.ariaCurrentValue:null,href:Te.href,onClick:Te.navigate,class:Be.value},Ue)}}}),RouterLink=RouterLinkImpl;function guardEvent(Oe){if(!(Oe.metaKey||Oe.altKey||Oe.ctrlKey||Oe.shiftKey)&&!Oe.defaultPrevented&&!(Oe.button!==void 0&&Oe.button!==0)){if(Oe.currentTarget&&Oe.currentTarget.getAttribute){const e=Oe.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return Oe.preventDefault&&Oe.preventDefault(),!0}}function includesParams(Oe,e){for(const Te in e){const ke=e[Te],Be=Oe[Te];if(typeof ke=="string"){if(ke!==Be)return!1}else if(!isArray(Be)||Be.length!==ke.length||ke.some((Ue,He)=>Ue!==Be[He]))return!1}return!0}function getOriginalPath(Oe){return Oe?Oe.aliasOf?Oe.aliasOf.path:Oe.path:""}const getLinkClass=(Oe,e,Te)=>Oe??e??Te,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(Oe,{attrs:e,slots:Te}){const ke=inject(routerViewLocationKey),Be=computed(()=>Oe.route||ke.value),Ue=inject(viewDepthKey,0),He=computed(()=>{let En=unref(Ue);const{matched:An}=Be.value;let Sn;for(;(Sn=An[En])&&!Sn.components;)En++;return En}),We=computed(()=>Be.value.matched[He.value]);provide(viewDepthKey,computed(()=>He.value+1)),provide(matchedRouteKey,We),provide(routerViewLocationKey,Be);const Cn=ref();return watch(()=>[Cn.value,We.value,Oe.name],([En,An,Sn],[Tn,Ln,Bn])=>{An&&(An.instances[Sn]=En,Ln&&Ln!==An&&En&&En===Tn&&(An.leaveGuards.size||(An.leaveGuards=Ln.leaveGuards),An.updateGuards.size||(An.updateGuards=Ln.updateGuards))),En&&An&&(!Ln||!isSameRouteRecord(An,Ln)||!Tn)&&(An.enterCallbacks[Sn]||[]).forEach(ei=>ei(En))},{flush:"post"}),()=>{const En=Be.value,An=Oe.name,Sn=We.value,Tn=Sn&&Sn.components[An];if(!Tn)return normalizeSlot(Te.default,{Component:Tn,route:En});const Ln=Sn.props[An],Bn=Ln?Ln===!0?En.params:typeof Ln=="function"?Ln(En):Ln:null,ti=h$1(Tn,assign({},Bn,e,{onVnodeUnmounted:ni=>{ni.component.isUnmounted&&(Sn.instances[An]=null)},ref:Cn}));return normalizeSlot(Te.default,{Component:ti,route:En})||ti}}});function normalizeSlot(Oe,e){if(!Oe)return null;const Te=Oe(e);return Te.length===1?Te[0]:Te}const RouterView=RouterViewImpl;function createRouter(Oe){const e=createRouterMatcher(Oe.routes,Oe),Te=Oe.parseQuery||parseQuery,ke=Oe.stringifyQuery||stringifyQuery,Be=Oe.history,Ue=useCallbacks(),He=useCallbacks(),We=useCallbacks(),Cn=shallowRef(START_LOCATION_NORMALIZED);let En=START_LOCATION_NORMALIZED;isBrowser&&Oe.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const An=applyToParams.bind(null,dr=>""+dr),Sn=applyToParams.bind(null,encodeParam),Tn=applyToParams.bind(null,decode$2);function Ln(dr,cr){let gr,vr;return isRouteName(dr)?(gr=e.getRecordMatcher(dr),vr=cr):vr=dr,e.addRoute(vr,gr)}function Bn(dr){const cr=e.getRecordMatcher(dr);cr&&e.removeRoute(cr)}function ei(){return e.getRoutes().map(dr=>dr.record)}function ti(dr){return!!e.getRecordMatcher(dr)}function ni(dr,cr){if(cr=assign({},cr||Cn.value),typeof dr=="string"){const fr=parseURL(Te,dr,cr.path),ar=e.resolve({path:fr.path},cr),nr=Be.createHref(fr.fullPath);return assign(fr,ar,{params:Tn(ar.params),hash:decode$2(fr.hash),redirectedFrom:void 0,href:nr})}let gr;if(dr.path!=null)gr=assign({},dr,{path:parseURL(Te,dr.path,cr.path).path});else{const fr=assign({},dr.params);for(const ar in fr)fr[ar]==null&&delete fr[ar];gr=assign({},dr,{params:Sn(fr)}),cr.params=Sn(cr.params)}const vr=e.resolve(gr,cr),Fr=dr.hash||"";vr.params=An(Tn(vr.params));const zr=stringifyURL(ke,assign({},dr,{hash:encodeHash(Fr),path:vr.path})),tr=Be.createHref(zr);return assign({fullPath:zr,hash:Fr,query:ke===stringifyQuery?normalizeQuery(dr.query):dr.query||{}},vr,{redirectedFrom:void 0,href:tr})}function ri(dr){return typeof dr=="string"?parseURL(Te,dr,Cn.value.path):assign({},dr)}function si(dr,cr){if(En!==dr)return createRouterError(8,{from:cr,to:dr})}function ai(dr){return pi(dr)}function li(dr){return ai(assign(ri(dr),{replace:!0}))}function Pi(dr){const cr=dr.matched[dr.matched.length-1];if(cr&&cr.redirect){const{redirect:gr}=cr;let vr=typeof gr=="function"?gr(dr):gr;return typeof vr=="string"&&(vr=vr.includes("?")||vr.includes("#")?vr=ri(vr):{path:vr},vr.params={}),assign({query:dr.query,hash:dr.hash,params:vr.path!=null?{}:dr.params},vr)}}function pi(dr,cr){const gr=En=ni(dr),vr=Cn.value,Fr=dr.state,zr=dr.force,tr=dr.replace===!0,fr=Pi(gr);if(fr)return pi(assign(ri(fr),{state:typeof fr=="object"?assign({},Fr,fr.state):Fr,force:zr,replace:tr}),cr||gr);const ar=gr;ar.redirectedFrom=cr;let nr;return!zr&&isSameRouteLocation(ke,vr,gr)&&(nr=createRouterError(16,{to:ar,from:vr}),wr(vr,vr,!0,!1)),(nr?Promise.resolve(nr):Fi(ar,vr)).catch(Dr=>isNavigationFailure(Dr)?isNavigationFailure(Dr,2)?Dr:pr(Dr):sr(Dr,ar,vr)).then(Dr=>{if(Dr){if(isNavigationFailure(Dr,2))return pi(assign({replace:tr},ri(Dr.to),{state:typeof Dr.to=="object"?assign({},Fr,Dr.to.state):Fr,force:zr}),cr||ar)}else Dr=ci(ar,vr,!0,tr,Fr);return di(ar,vr,Dr),Dr})}function vi(dr,cr){const gr=si(dr,cr);return gr?Promise.reject(gr):Promise.resolve()}function Ri(dr){const cr=hr.values().next().value;return cr&&typeof cr.runWithContext=="function"?cr.runWithContext(dr):dr()}function Fi(dr,cr){let gr;const[vr,Fr,zr]=extractChangingRecords(dr,cr);gr=extractComponentsGuards(vr.reverse(),"beforeRouteLeave",dr,cr);for(const fr of vr)fr.leaveGuards.forEach(ar=>{gr.push(guardToPromiseFn(ar,dr,cr))});const tr=vi.bind(null,dr,cr);return gr.push(tr),_r(gr).then(()=>{gr=[];for(const fr of Ue.list())gr.push(guardToPromiseFn(fr,dr,cr));return gr.push(tr),_r(gr)}).then(()=>{gr=extractComponentsGuards(Fr,"beforeRouteUpdate",dr,cr);for(const fr of Fr)fr.updateGuards.forEach(ar=>{gr.push(guardToPromiseFn(ar,dr,cr))});return gr.push(tr),_r(gr)}).then(()=>{gr=[];for(const fr of zr)if(fr.beforeEnter)if(isArray(fr.beforeEnter))for(const ar of fr.beforeEnter)gr.push(guardToPromiseFn(ar,dr,cr));else gr.push(guardToPromiseFn(fr.beforeEnter,dr,cr));return gr.push(tr),_r(gr)}).then(()=>(dr.matched.forEach(fr=>fr.enterCallbacks={}),gr=extractComponentsGuards(zr,"beforeRouteEnter",dr,cr,Ri),gr.push(tr),_r(gr))).then(()=>{gr=[];for(const fr of He.list())gr.push(guardToPromiseFn(fr,dr,cr));return gr.push(tr),_r(gr)}).catch(fr=>isNavigationFailure(fr,8)?fr:Promise.reject(fr))}function di(dr,cr,gr){We.list().forEach(vr=>Ri(()=>vr(dr,cr,gr)))}function ci(dr,cr,gr,vr,Fr){const zr=si(dr,cr);if(zr)return zr;const tr=cr===START_LOCATION_NORMALIZED,fr=isBrowser?history.state:{};gr&&(vr||tr?Be.replace(dr.fullPath,assign({scroll:tr&&fr&&fr.scroll},Fr)):Be.push(dr.fullPath,Fr)),Cn.value=dr,wr(dr,cr,gr,tr),pr()}let Mi;function Oi(){Mi||(Mi=Be.listen((dr,cr,gr)=>{if(!mr.listening)return;const vr=ni(dr),Fr=Pi(vr);if(Fr){pi(assign(Fr,{replace:!0,force:!0}),vr).catch(noop$1);return}En=vr;const zr=Cn.value;isBrowser&&saveScrollPosition(getScrollKey(zr.fullPath,gr.delta),computeScrollPosition()),Fi(vr,zr).catch(tr=>isNavigationFailure(tr,12)?tr:isNavigationFailure(tr,2)?(pi(assign(ri(tr.to),{force:!0}),vr).then(fr=>{isNavigationFailure(fr,20)&&!gr.delta&&gr.type===NavigationType.pop&&Be.go(-1,!1)}).catch(noop$1),Promise.reject()):(gr.delta&&Be.go(-gr.delta,!1),sr(tr,vr,zr))).then(tr=>{tr=tr||ci(vr,zr,!1),tr&&(gr.delta&&!isNavigationFailure(tr,8)?Be.go(-gr.delta,!1):gr.type===NavigationType.pop&&isNavigationFailure(tr,20)&&Be.go(-1,!1)),di(vr,zr,tr)}).catch(noop$1)}))}let Hi=useCallbacks(),Ki=useCallbacks(),or;function sr(dr,cr,gr){pr(dr);const vr=Ki.list();return vr.length?vr.forEach(Fr=>Fr(dr,cr,gr)):console.error(dr),Promise.reject(dr)}function Cr(){return or&&Cn.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((dr,cr)=>{Hi.add([dr,cr])})}function pr(dr){return or||(or=!dr,Oi(),Hi.list().forEach(([cr,gr])=>dr?gr(dr):cr()),Hi.reset()),dr}function wr(dr,cr,gr,vr){const{scrollBehavior:Fr}=Oe;if(!isBrowser||!Fr)return Promise.resolve();const zr=!gr&&getSavedScrollPosition(getScrollKey(dr.fullPath,0))||(vr||!gr)&&history.state&&history.state.scroll||null;return nextTick().then(()=>Fr(dr,cr,zr)).then(tr=>tr&&scrollToPosition(tr)).catch(tr=>sr(tr,dr,cr))}const Li=dr=>Be.go(dr);let er;const hr=new Set,mr={currentRoute:Cn,listening:!0,addRoute:Ln,removeRoute:Bn,clearRoutes:e.clearRoutes,hasRoute:ti,getRoutes:ei,resolve:ni,options:Oe,push:ai,replace:li,go:Li,back:()=>Li(-1),forward:()=>Li(1),beforeEach:Ue.add,beforeResolve:He.add,afterEach:We.add,onError:Ki.add,isReady:Cr,install(dr){const cr=this;dr.component("RouterLink",RouterLink),dr.component("RouterView",RouterView),dr.config.globalProperties.$router=cr,Object.defineProperty(dr.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(Cn)}),isBrowser&&!er&&Cn.value===START_LOCATION_NORMALIZED&&(er=!0,ai(Be.location).catch(Fr=>{}));const gr={};for(const Fr in START_LOCATION_NORMALIZED)Object.defineProperty(gr,Fr,{get:()=>Cn.value[Fr],enumerable:!0});dr.provide(routerKey,cr),dr.provide(routeLocationKey,shallowReactive(gr)),dr.provide(routerViewLocationKey,Cn);const vr=dr.unmount;hr.add(dr),dr.unmount=function(){hr.delete(dr),hr.size<1&&(En=START_LOCATION_NORMALIZED,Mi&&Mi(),Mi=null,Cn.value=START_LOCATION_NORMALIZED,er=!1,or=!1),vr()}}};function _r(dr){return dr.reduce((cr,gr)=>cr.then(()=>Ri(gr)),Promise.resolve())}return mr}function extractChangingRecords(Oe,e){const Te=[],ke=[],Be=[],Ue=Math.max(e.matched.length,Oe.matched.length);for(let He=0;He<Ue;He++){const We=e.matched[He];We&&(Oe.matched.find(En=>isSameRouteRecord(En,We))?ke.push(We):Te.push(We));const Cn=Oe.matched[He];Cn&&(e.matched.find(En=>isSameRouteRecord(En,Cn))||Be.push(Cn))}return[Te,ke,Be]}function useRouter(){return inject(routerKey)}function useRoute(Oe){return inject(routeLocationKey)}function tryOnScopeDispose(Oe){return getCurrentScope()?(onScopeDispose(Oe),!0):!1}const localProvidedStateMap=new WeakMap,injectLocal=(...Oe)=>{var e;const Te=Oe[0],ke=(e=getCurrentInstance())==null?void 0:e.proxy;if(ke==null&&!hasInjectionContext())throw new Error("injectLocal must be called in setup");return ke&&localProvidedStateMap.has(ke)&&Te in localProvidedStateMap.get(ke)?localProvidedStateMap.get(ke)[Te]:inject(...Oe)},isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const toString$2=Object.prototype.toString,isObject=Oe=>toString$2.call(Oe)==="[object Object]",noop=()=>{};function toRef(...Oe){if(Oe.length!==1)return toRef$1(...Oe);const e=Oe[0];return typeof e=="function"?readonly(customRef(()=>({get:e,set:noop}))):ref(e)}function createFilterWrapper(Oe,e){function Te(...ke){return new Promise((Be,Ue)=>{Promise.resolve(Oe(()=>e.apply(this,ke),{fn:e,thisArg:this,args:ke})).then(Be).catch(Ue)})}return Te}const bypassFilter=Oe=>Oe();function debounceFilter(Oe,e={}){let Te,ke,Be=noop;const Ue=Cn=>{clearTimeout(Cn),Be(),Be=noop};let He;return Cn=>{const En=toValue(Oe),An=toValue(e.maxWait);return Te&&Ue(Te),En<=0||An!==void 0&&An<=0?(ke&&(Ue(ke),ke=null),Promise.resolve(Cn())):new Promise((Sn,Tn)=>{Be=e.rejectOnCancel?Tn:Sn,He=Cn,An&&!ke&&(ke=setTimeout(()=>{Te&&Ue(Te),ke=null,Sn(He())},An)),Te=setTimeout(()=>{ke&&Ue(ke),ke=null,Sn(Cn())},En)})}}function pausableFilter(Oe=bypassFilter,e={}){const{initialState:Te="active"}=e,ke=toRef(Te==="active");function Be(){ke.value=!1}function Ue(){ke.value=!0}const He=(...We)=>{ke.value&&Oe(...We)};return{isActive:readonly(ke),pause:Be,resume:Ue,eventFilter:He}}function createSingletonPromise(Oe){let e;function Te(){return e||(e=Oe()),e}return Te.reset=async()=>{const ke=e;e=void 0,ke&&await ke},Te}function pxValue(Oe){return Oe.endsWith("rem")?Number.parseFloat(Oe)*16:Number.parseFloat(Oe)}function toArray(Oe){return Array.isArray(Oe)?Oe:[Oe]}function getLifeCycleTarget(Oe){return getCurrentInstance()}function useDebounceFn(Oe,e=200,Te={}){return createFilterWrapper(debounceFilter(e,Te),Oe)}function watchWithFilter(Oe,e,Te={}){const{eventFilter:ke=bypassFilter,...Be}=Te;return watch(Oe,createFilterWrapper(ke,e),Be)}function watchPausable(Oe,e,Te={}){const{eventFilter:ke,initialState:Be="active",...Ue}=Te,{eventFilter:He,pause:We,resume:Cn,isActive:En}=pausableFilter(ke,{initialState:Be});return{stop:watchWithFilter(Oe,e,{...Ue,eventFilter:He}),pause:We,resume:Cn,isActive:En}}function tryOnMounted(Oe,e=!0,Te){getLifeCycleTarget()?onMounted(Oe,Te):e?Oe():nextTick(Oe)}function useTimeoutFn(Oe,e,Te={}){const{immediate:ke=!0,immediateCallback:Be=!1}=Te,Ue=shallowRef(!1);let He=null;function We(){He&&(clearTimeout(He),He=null)}function Cn(){Ue.value=!1,We()}function En(...An){Be&&Oe(),We(),Ue.value=!0,He=setTimeout(()=>{Ue.value=!1,He=null,Oe(...An)},toValue(e))}return ke&&(Ue.value=!0,isClient&&En()),tryOnScopeDispose(Cn),{isPending:shallowReadonly(Ue),start:En,stop:Cn}}function watchImmediate(Oe,e,Te){return watch(Oe,e,{...Te,immediate:!0})}const defaultWindow=isClient?window:void 0,defaultNavigator=isClient?window.navigator:void 0;function unrefElement(Oe){var e;const Te=toValue(Oe);return(e=Te==null?void 0:Te.$el)!=null?e:Te}function useEventListener(...Oe){const e=[],Te=()=>{e.forEach(We=>We()),e.length=0},ke=(We,Cn,En,An)=>(We.addEventListener(Cn,En,An),()=>We.removeEventListener(Cn,En,An)),Be=computed(()=>{const We=toArray(toValue(Oe[0])).filter(Cn=>Cn!=null);return We.every(Cn=>typeof Cn!="string")?We:void 0}),Ue=watchImmediate(()=>{var We,Cn;return[(Cn=(We=Be.value)==null?void 0:We.map(En=>unrefElement(En)))!=null?Cn:[defaultWindow].filter(En=>En!=null),toArray(toValue(Be.value?Oe[1]:Oe[0])),toArray(unref(Be.value?Oe[2]:Oe[1])),toValue(Be.value?Oe[3]:Oe[2])]},([We,Cn,En,An])=>{if(Te(),!(We!=null&&We.length)||!(Cn!=null&&Cn.length)||!(En!=null&&En.length))return;const Sn=isObject(An)?{...An}:An;e.push(...We.flatMap(Tn=>Cn.flatMap(Ln=>En.map(Bn=>ke(Tn,Ln,Bn,Sn)))))},{flush:"post"}),He=()=>{Ue(),Te()};return tryOnScopeDispose(Te),He}function useMounted(){const Oe=shallowRef(!1),e=getCurrentInstance();return e&&onMounted(()=>{Oe.value=!0},e),Oe}function useSupported(Oe){const e=useMounted();return computed(()=>(e.value,!!Oe()))}const ssrWidthSymbol=Symbol("vueuse-ssr-width");function useSSRWidth(){const Oe=hasInjectionContext()?injectLocal(ssrWidthSymbol,null):null;return typeof Oe=="number"?Oe:void 0}function useMediaQuery(Oe,e={}){const{window:Te=defaultWindow,ssrWidth:ke=useSSRWidth()}=e,Be=useSupported(()=>Te&&"matchMedia"in Te&&typeof Te.matchMedia=="function"),Ue=shallowRef(typeof ke=="number"),He=shallowRef(),We=shallowRef(!1),Cn=En=>{We.value=En.matches};return watchEffect(()=>{if(Ue.value){Ue.value=!Be.value;const En=toValue(Oe).split(",");We.value=En.some(An=>{const Sn=An.includes("not all"),Tn=An.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),Ln=An.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let Bn=!!(Tn||Ln);return Tn&&Bn&&(Bn=ke>=pxValue(Tn[1])),Ln&&Bn&&(Bn=ke<=pxValue(Ln[1])),Sn?!Bn:Bn});return}Be.value&&(He.value=Te.matchMedia(toValue(Oe)),We.value=He.value.matches)}),useEventListener(He,"change",Cn,{passive:!0}),computed(()=>We.value)}function usePermission(Oe,e={}){const{controls:Te=!1,navigator:ke=defaultNavigator}=e,Be=useSupported(()=>ke&&"permissions"in ke),Ue=shallowRef(),He=typeof Oe=="string"?{name:Oe}:Oe,We=shallowRef(),Cn=()=>{var An,Sn;We.value=(Sn=(An=Ue.value)==null?void 0:An.state)!=null?Sn:"prompt"};useEventListener(Ue,"change",Cn,{passive:!0});const En=createSingletonPromise(async()=>{if(Be.value){if(!Ue.value)try{Ue.value=await ke.permissions.query(He)}catch{Ue.value=void 0}finally{Cn()}if(Te)return toRaw(Ue.value)}});return En(),Te?{state:We,isSupported:Be,query:En}:We}function useClipboard(Oe={}){const{navigator:e=defaultNavigator,read:Te=!1,source:ke,copiedDuring:Be=1500,legacy:Ue=!1}=Oe,He=useSupported(()=>e&&"clipboard"in e),We=usePermission("clipboard-read"),Cn=usePermission("clipboard-write"),En=computed(()=>He.value||Ue),An=shallowRef(""),Sn=shallowRef(!1),Tn=useTimeoutFn(()=>Sn.value=!1,Be,{immediate:!1});async function Ln(){let ri=!(He.value&&ni(We.value));if(!ri)try{An.value=await e.clipboard.readText()}catch{ri=!0}ri&&(An.value=ti())}En.value&&Te&&useEventListener(["copy","cut"],Ln,{passive:!0});async function Bn(ri=toValue(ke)){if(En.value&&ri!=null){let si=!(He.value&&ni(Cn.value));if(!si)try{await e.clipboard.writeText(ri)}catch{si=!0}si&&ei(ri),An.value=ri,Sn.value=!0,Tn.start()}}function ei(ri){const si=document.createElement("textarea");si.value=ri??"",si.style.position="absolute",si.style.opacity="0",document.body.appendChild(si),si.select(),document.execCommand("copy"),si.remove()}function ti(){var ri,si,ai;return(ai=(si=(ri=document==null?void 0:document.getSelection)==null?void 0:ri.call(document))==null?void 0:si.toString())!=null?ai:""}function ni(ri){return ri==="granted"||ri==="prompt"}return{isSupported:En,text:An,copied:Sn,copy:Bn}}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers=getHandlers();function getHandlers(){return globalKey in _global||(_global[globalKey]=_global[globalKey]||{}),_global[globalKey]}function getSSRHandler(Oe,e){return handlers[Oe]||e}function guessSerializerType(Oe){return Oe==null?"any":Oe instanceof Set?"set":Oe instanceof Map?"map":Oe instanceof Date?"date":typeof Oe=="boolean"?"boolean":typeof Oe=="string"?"string":typeof Oe=="object"?"object":Number.isNaN(Oe)?"any":"number"}const StorageSerializers={boolean:{read:Oe=>Oe==="true",write:Oe=>String(Oe)},object:{read:Oe=>JSON.parse(Oe),write:Oe=>JSON.stringify(Oe)},number:{read:Oe=>Number.parseFloat(Oe),write:Oe=>String(Oe)},any:{read:Oe=>Oe,write:Oe=>String(Oe)},string:{read:Oe=>Oe,write:Oe=>String(Oe)},map:{read:Oe=>new Map(JSON.parse(Oe)),write:Oe=>JSON.stringify(Array.from(Oe.entries()))},set:{read:Oe=>new Set(JSON.parse(Oe)),write:Oe=>JSON.stringify(Array.from(Oe))},date:{read:Oe=>new Date(Oe),write:Oe=>Oe.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(Oe,e,Te,ke={}){var Be;const{flush:Ue="pre",deep:He=!0,listenToStorageChanges:We=!0,writeDefaults:Cn=!0,mergeDefaults:En=!1,shallow:An,window:Sn=defaultWindow,eventFilter:Tn,onError:Ln=di=>{console.error(di)},initOnMounted:Bn}=ke,ei=(An?shallowRef:ref)(typeof e=="function"?e():e),ti=computed(()=>toValue(Oe));if(!Te)try{Te=getSSRHandler("getDefaultStorage",()=>{var di;return(di=defaultWindow)==null?void 0:di.localStorage})()}catch(di){Ln(di)}if(!Te)return ei;const ni=toValue(e),ri=guessSerializerType(ni),si=(Be=ke.serializer)!=null?Be:StorageSerializers[ri],{pause:ai,resume:li}=watchPausable(ei,()=>pi(ei.value),{flush:Ue,deep:He,eventFilter:Tn});watch(ti,()=>Ri(),{flush:Ue}),Sn&&We&&tryOnMounted(()=>{Te instanceof Storage?useEventListener(Sn,"storage",Ri,{passive:!0}):useEventListener(Sn,customStorageEventName,Fi),Bn&&Ri()}),Bn||Ri();function Pi(di,ci){if(Sn){const Mi={key:ti.value,oldValue:di,newValue:ci,storageArea:Te};Sn.dispatchEvent(Te instanceof Storage?new StorageEvent("storage",Mi):new CustomEvent(customStorageEventName,{detail:Mi}))}}function pi(di){try{const ci=Te.getItem(ti.value);if(di==null)Pi(ci,null),Te.removeItem(ti.value);else{const Mi=si.write(di);ci!==Mi&&(Te.setItem(ti.value,Mi),Pi(ci,Mi))}}catch(ci){Ln(ci)}}function vi(di){const ci=di?di.newValue:Te.getItem(ti.value);if(ci==null)return Cn&&ni!=null&&Te.setItem(ti.value,si.write(ni)),ni;if(!di&&En){const Mi=si.read(ci);return typeof En=="function"?En(Mi,ni):ri==="object"&&!Array.isArray(Mi)?{...ni,...Mi}:Mi}else return typeof ci!="string"?ci:si.read(ci)}function Ri(di){if(!(di&&di.storageArea!==Te)){if(di&&di.key==null){ei.value=ni;return}if(!(di&&di.key!==ti.value)){ai();try{(di==null?void 0:di.newValue)!==si.write(ei.value)&&(ei.value=vi(di))}catch(ci){Ln(ci)}finally{di?nextTick(li):li()}}}}function Fi(di){Ri(di.detail)}return ei}function useResizeObserver(Oe,e,Te={}){const{window:ke=defaultWindow,...Be}=Te;let Ue;const He=useSupported(()=>ke&&"ResizeObserver"in ke),We=()=>{Ue&&(Ue.disconnect(),Ue=void 0)},Cn=computed(()=>{const Sn=toValue(Oe);return Array.isArray(Sn)?Sn.map(Tn=>unrefElement(Tn)):[unrefElement(Sn)]}),En=watch(Cn,Sn=>{if(We(),He.value&&ke){Ue=new ResizeObserver(e);for(const Tn of Sn)Tn&&Ue.observe(Tn,Be)}},{immediate:!0,flush:"post"}),An=()=>{We(),En()};return tryOnScopeDispose(An),{isSupported:He,stop:An}}function useElementSize(Oe,e={width:0,height:0},Te={}){const{window:ke=defaultWindow,box:Be="content-box"}=Te,Ue=computed(()=>{var Sn,Tn;return(Tn=(Sn=unrefElement(Oe))==null?void 0:Sn.namespaceURI)==null?void 0:Tn.includes("svg")}),He=shallowRef(e.width),We=shallowRef(e.height),{stop:Cn}=useResizeObserver(Oe,([Sn])=>{const Tn=Be==="border-box"?Sn.borderBoxSize:Be==="content-box"?Sn.contentBoxSize:Sn.devicePixelContentBoxSize;if(ke&&Ue.value){const Ln=unrefElement(Oe);if(Ln){const Bn=Ln.getBoundingClientRect();He.value=Bn.width,We.value=Bn.height}}else if(Tn){const Ln=toArray(Tn);He.value=Ln.reduce((Bn,{inlineSize:ei})=>Bn+ei,0),We.value=Ln.reduce((Bn,{blockSize:ei})=>Bn+ei,0)}else He.value=Sn.contentRect.width,We.value=Sn.contentRect.height},Te);tryOnMounted(()=>{const Sn=unrefElement(Oe);Sn&&(He.value="offsetWidth"in Sn?Sn.offsetWidth:e.width,We.value="offsetHeight"in Sn?Sn.offsetHeight:e.height)});const En=watch(()=>unrefElement(Oe),Sn=>{He.value=Sn?e.width:0,We.value=Sn?e.height:0});function An(){Cn(),En()}return{width:He,height:We,stop:An}}function useUrlSearchParams(Oe="history",e={}){const{initialValue:Te={},removeNullishValues:ke=!0,removeFalsyValues:Be=!1,write:Ue=!0,writeMode:He="replace",window:We=defaultWindow}=e;if(!We)return reactive(Te);const Cn=reactive({});function En(){if(Oe==="history")return We.location.search||"";if(Oe==="hash"){const si=We.location.hash||"",ai=si.indexOf("?");return ai>0?si.slice(ai):""}else return(We.location.hash||"").replace(/^#/,"")}function An(si){const ai=si.toString();if(Oe==="history")return`${ai?`?${ai}`:""}${We.location.hash||""}`;if(Oe==="hash-params")return`${We.location.search||""}${ai?`#${ai}`:""}`;const li=We.location.hash||"#",Pi=li.indexOf("?");return Pi>0?`${We.location.search||""}${li.slice(0,Pi)}${ai?`?${ai}`:""}`:`${We.location.search||""}${li}${ai?`?${ai}`:""}`}function Sn(){return new URLSearchParams(En())}function Tn(si){const ai=new Set(Object.keys(Cn));for(const li of si.keys()){const Pi=si.getAll(li);Cn[li]=Pi.length>1?Pi:si.get(li)||"",ai.delete(li)}Array.from(ai).forEach(li=>delete Cn[li])}const{pause:Ln,resume:Bn}=watchPausable(Cn,()=>{const si=new URLSearchParams("");Object.keys(Cn).forEach(ai=>{const li=Cn[ai];Array.isArray(li)?li.forEach(Pi=>si.append(ai,Pi)):ke&&li==null||Be&&!li?si.delete(ai):si.set(ai,li)}),ei(si,!1)},{deep:!0});function ei(si,ai){Ln(),ai&&Tn(si),He==="replace"?We.history.replaceState(We.history.state,We.document.title,We.location.pathname+An(si)):We.history.pushState(We.history.state,We.document.title,We.location.pathname+An(si)),Bn()}function ti(){Ue&&ei(Sn(),!0)}const ni={passive:!0};useEventListener(We,"popstate",ti,ni),Oe!=="history"&&useEventListener(We,"hashchange",ti,ni);const ri=Sn();return ri.keys().next().value?Tn(ri):Object.assign(Cn,Te),Cn}function useMatchMedia(Oe){var e={SM:"576px",MD:"768px",LG:"992px",XL:"1440px"};if(e[Oe]!==void 0){const Te="(max-width: "+e[Oe]+")";return useMediaQuery(Te)}}function useMatchMediaHeight(Oe){var e={XS:"739px",SM:"719px",LG:"779px",XL:"859px"};{const Te="(max-height: "+e[Oe]+")";return useMediaQuery(Te)}}function useBaseUrl(){return window.__ENV__.VITE_GPF_BASE_URL_EXTERNAL||location.origin}const headerParams=ref({});function useHeaderParams(){return headerParams.value={serviceTitle:"cartes.gouv.fr",serviceDescription:"Le service public des cartes et données du territoire",logoText:["RÉPUBLIQUE","FRANÇAISE"],quickLinks:[{label:"Accueil",to:"/",href:useBaseUrl()+"/",icon:"ri-arrow-right-line",iconRight:!0},{label:"Catalogue",to:"/catalogue",href:useBaseUrl()+"/catalogue",icon:"ri-arrow-right-line",iconRight:!0}],searchQuery:ref("")},window.__ENV__.IAM_DISABLE==="0"&&(headerParams.value.quickLinks.push({label:"Se connecter",to:"/login",class:"fr-icon-account-fill",authenticated:!1,onClick:Oe=>{}}),headerParams.value.quickLinks.push({label:"Se déconnecter",to:"/logout",class:"fr-icon-logout-box-r-line",authenticated:!0,onClick:Oe=>{}}),headerParams.value.quickLinks.push({label:"...",to:"/bookmarks",href:useBaseUrl()+"/tableau-de-bord",class:"fr-icon-account-fill",authenticated:!0,onClick:Oe=>{}})),headerParams}const LogoIGN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAABaCAYAAABuUm4xAAAACXBIWXMAAANcAAADXAG0iWi0AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADJhJREFUeJztnWlQFGcax/89A8OcHHIJIogkCIInIHjibYwnnkk0HjGlW7Vbu1VbW7X5tlX7Ybdqd1NJNpuoGIP3lZi4xjtRY/DCi/sQRO7hnosZYGaY7v3AklUj003TM9Pjvr8PfKCffp+nu/799vs+7/P2UAzDMCAQhojE0wEQvBMiHAIviHAIvCDCIfCCCIfACyIcAi+IcAi8IMIh8IIIh8ALIhwCL4hwCLwgwiHwggiHwAsiHAIviHAIvCDCIfCCCIfACyIcAi98PB2AK3E4HDCaTOjU6WG2WGC1WtHX1wepVAqZTAaVUokRQUEYERQIHx/X3IoH+QVQyOVISkxwSfueQvC7xaWEmaIood0CAGiaRm19A8ofP0Z1TS20zS3o7e0FnPljGMhkMkRGRCD+tbFIHj8eo0dFChbjxe+vQqfXY9P6tUidOkWQNgfDnfdecOGcu3QZeQ8fObXZvGE9EuJfF8yn3mDArbt5ePCoAAaT6fmDbDeKomCz21FbX4/a+npcufYjwkJDkJGWioy0VCgVimHHxzAMjp/+FiqVConj4ofd3mCcOP0tSisqBj2enpKCFUuXCOJLcOH0Wm0wmy1Obfr6+gTxZTSacPGHq7j/KB8Oh0OQNgGgrb0DZy9cwuWr1zAzPR0L5s6BSqkcVpsOhwMHjh7Hr3fuQHRUlECRPk9vb6/Te2+1WgXz5ZWDY5qm8WPuTfzlw49w9/4DQUXzLFarDdd+ysVfP/wYBcUlw2/PZkP2gUNo7+gQIDrP4nXCMXV1Yff+HJw5fxFWm80tPs0WC46d+lqQntJstmDPlwdh6uoSIDLP4VXC0ba04KPPdqOq+qnbfctkMkilUkHa6tTpkJ1zED29vYK05wm8RjiNWi0+y94PvcHoEf9yPz9BZ4ON2mbkHDkm2HjP3XhFHqejU4e9Xx6Epbt7yOdKpVIEBQYiKDAAKqUSUqkUfX19sHR3Q6fTw2A0guYwjVUIMLt6kcon1Tj21Wls3rgeEonXPMMAvEA4VpsN+w8dQZfZzPkctUqFqZMmIikxATHRoyH38xvU1mLpRk1dHYpKy1BYUjrozEOhkA85di48KiyCWqXCmpXLXdK+qxC9cM6cO4/m1lZOtmqVCm8snI/01BT4+vpyOkelUiJ5fCKSxycia8Uy3LxzF9du5P5i/KGQu0Y4APDT7Tvw12iwcF6my3wIjaiFU1X9FHfvP+RkOzFpPDauzRpWvkUhl2PRvLlIT03BqW/+jZLy8v8dc8Gr6lnOXb4Cf40G01KnutSPUIj2xUrTNM6cu8Apjb4gcza2b35n2Em6Afw1GuzYsgnL31j884DYlT3OACe/+RZlFY9d7kcIRCucwuISNDU3s9rNykjHiqVvCL7+RVEUFs7NxMY1qyGhKEGWHthw0DQOHDuB2rp6l/saLqIUDgPgeu4tVrvoqChkrVjm0lgy0lKxatmbkLuhxwEAm82GLw4dQWtbu1v88UWUwmnSalHf2OjURiKRYMOaVYIl5ZyROWsGpkya4HI/A5gtFmTnHITRaGI39hCiFE5+YRGrzaTkJERFRrohmn7UKpXbfAFAp16PvQcOoqenx61+uSJK4ZSWsw8Q58yc7oZIPIu2uQX7Dx+F3S6+7LLohGM0mdDa7vz9PiIoEDHR0W6KyLM8eVqDIydPgabF9Y1P0eVxGhqbWKfg8XFxkHCaRTHQWSrRYMhFm6kAhu4qmG2tsDvMYBgaPlIFlL4h8FfEIFiViJH+aYgMzIBMqhbmYgSisKQU33z3HdatWunpUH5GdMJpbmHPEo9mKYSyOcwobz6Ospaj0FsqB7Vz0L2w2vXQd1ehrvMHAIBUIsfooDlIGLkRY4IXQUK59hb5yWScykNu3smDv0aDxfPnuTQerohOOJ06HatNWGjIoMdKm4/gXu3f0GPjVyzloHtR23kFtZ1X4K+IQUr07zAufJ3LBLR4/jwUFJegoamJ1fbi91ehUasxfVqaS2IZCqIb45hYFjMZhkGAv2bQ4/W6a7xF84tYeupw/fHvcTp/Odq72Gd6fJDL/bBz2xaEBgez2jIMg6/PnEVJWTmrrasRnXB6eliKmygKMpls0MOz4v4MmU+AoDG1dxXhdMFKFDbuAwPhB6kajRq73tsGf83gD8QADprGoRMn8bS2TvA4hoLohONwOJ96Us/8fRkaeRTmxf8dQl8aTdtwq/pPuFH1ARhG+BrnkOAR2PXeVk5rYjabHfsPHUFLa5vgcXBFdMJhK2hiGAZ2u92pTVzocmTEfiBkWD9Tpj2M65V/cEnPMyoiAu9v2cypJMTS3Y29OQc8VhEpOuH4yQYvugL6Fx/NHIq6pkb/BumxH8BZ78SXipaTeFj3ieDtAkDc2Fi8+9YGThWBeoMRe3MOoNsD2WXRCUetZk/td3CYeQFASvRvsTDxX/CRCr9ccL/uH2gy3Ba8XaC/tmj96pWcVvxbWtvwxcHDrL2w0IhOOEGBgaw22uYWzu3Fh2Vh/dSLGBkwbThh/QKGoXGj6o9w0MJtcnuW6dPS8ObihZxsn9bW4dDxk6Bp2iWxvAzRCcdZjmaAJ09rhtRmkPI1ZE06jQUJnyJAEcs3tBegEKh8HXbH0AvoubJwbiYyZ87gZFtcVo6yx4MnO4VGdAnA0aNGsdo0NTdDbzAiKJD7tJuipBgXvhavh61ETcdllDYfhdZwCzQztAVEiUSGmBELMDlqFyIE7sVehKIorFq2FGaLBQ8LClntXbWj9WWITjjhYaFQKZVOt8LQNI0H+flYNG/ukNuXUL6IC12OuNDl6LF3oEGfi2ZjHtq7imHsrYWtz/TMdJuCr1QFjXw0QjUTMCpgBmKC50Phy94rCoVEIsE769fC0t2Nisoqt/llQ3TCkUgkGPdaHB4VFTu1u3knD5mzZkLGcTfDy1D4hiA+LAvxYVn//Q8Du6MbfbQVAA0pJYOvVA2Kev6NTjMMx0VWYZBKpdi++R18vm8/6hqcF7i5C9GNcQBg4oRkVhujyYQbuTcF9tzfwyh8R0DhGwKZjz8oSgKGYaA3GPCwoBBHTn6FfTkHBfbLjp9Mhp3btiA8LNTtvl+G6HocAEhKGMf6ugKAK9dvIDlpPCLCwwXzbbfbcfjEKQCAzW6H2WyBTq9/LlcSG+OZWiCVSoVfbd+GT/Zkw2D0TOJvAFH2OL6+vshIS2W1s9vtyDl8DBaLcDMbB02juKwcRaVlqKisQqNW65EE22AEBQVi1/atgm0F4osohQP0F4j7OVnMHKCtowN7vsyB2eL8Y06vEhEjw/H+1s1OF3tdjWiF46/RYO7smZxsG5q0+PizPaw7I14lYmNisPXtjW7Z5fEyRCscAFiQOYdTnQrQvwzxye5snDl/YXivLnGV9jolKTEBb63JctnHOJ0hysHxADKZDG+vX4vPsr+Ag0M63eFw4MfcW7hz7z5SJk9GyqSJGBMTzfpU0jSDltZWFJeVI7+oiNO2Y7GQljIFXRYzzl645Fa/ohYOAIwdE4MVS5fgzPmLnM+xWm24nXcPt/PuQe7nh1GRkQgPDYG/vz/kfrL+L41abTCZu9De0YkmbbNXj5Hmz5kNs9mCaz/lus2n6IUDAHNnz0JHpw437+YN+dxeqxXVNTWorhna+pa3sWLpEpgtFtxj+VSwUIh6jPMsa1etEEWRtlihKAob16x22xfcvUY4FEVhQ9YqLFkw3yODQW9AKpVi69sbMTYmxuW+vEY4QL94li5agB3vboKGQ8GXK/CTyZCUIN7fZZDJZNixdTMiRwqXTX8ZXjHGeZHk8YmIiR6Nsxcu4UF+gVtmQSqVEjPTp2H2jOnQqMW10/NFVEoldm7fin/uzobOYHCJD68UDgBo1Gps2rAOc2ZMx5Vr11FaXsHp66FDQSKRIC52DNKmTsHkCckezdQOlcCAAOx6bxs+3bvPJTNGihH4ca18Ug1ti/PSzuTERIQEjxDSLTo6dbj/KB+FxSVoaeO/bUStUiEudgwSx8UjKSEBGs3wepe7Dx72/4LNIMTHxSEyYuSwfDijrqERn+/bD6vNhlkZ6Vi3Wpj954ILRwzo9AY8ra1FY5MWbe0dMBiN6O7phs1mBwPA18cHcj8/qNUqBAYEIDQ4GCPDwxA1KhIhwcGv3OC7orIKh0+cwrSUqVi1bKkgbb6SwhmMgUt91YTBBYZhBL3u/yvhEITDq6bjBPFAhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF4Q4RB4QYRD4AURDoEXRDgEXhDhEHhBhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF78BxTBP6hVBWeZAAAAAElFTkSuQmCC",LogoTRANSFO="/cartes.gouv.fr-entree-carto/assets/logo-transformation-fonction-publiques-C9P2QqWZ.png",LogoECOLO="/cartes.gouv.fr-entree-carto/assets/logo-transition-ecologique-D0O5Izlc.png",LogoCNIG="/cartes.gouv.fr-entree-carto/assets/logo-cnig-CXEVuuxB.png";function useFooterParams(){return{beforeMandatoryLinks:[{label:"Plan du site",href:useBaseUrl()+"/plan-du-site"}],a11yCompliance:"partiellement conforme",legalLink:"/mentions-legales",personalDataLink:"/donnees-personnelles",cookiesLink:"/cookies",a11yComplianceLink:"/accessibilite",descText:"Cartes.gouv.fr est développé par l’Institut national de l’information géographique et forestière (IGN) et ses partenaires. Le site s’appuie sur la Géoplateforme, la nouvelle infrastructure publique, ouverte et collaborative des données géographiques.",homeLink:"/",licenceText:void 0,licenceTo:void 0,licenceName:void 0,licenceLinkProps:void 0,ecosystemLinks:[{label:"info.gouv.fr",href:"https://info.gouv.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}],partners:{title:"Nos partenaires",mainPartner:{},subPartners:[{href:"https://www.ign.fr/",logo:LogoIGN,name:"IGN"},{href:"https://www.transformation.gouv.fr/",logo:LogoTRANSFO,name:"Ministère de la transformation et de la fonction publiques"},{href:"https://www.ecologie.gouv.fr/",logo:LogoECOLO,name:"Ministère de la Transition Écologique et de la Cohésion des Territoires"},{href:"https://cnig.gouv.fr/",logo:LogoCNIG,name:"Conseil national de l’information géolocalisée"}]},mandatoryLinks:[{label:"Accessibilité : partiellement conforme",href:useBaseUrl()+"/accessibilite"},{label:"Mentions légales",href:useBaseUrl()+"/mentions-legales"},{label:"Données personnelles",href:useBaseUrl()+"/donnees-personnelles"},{label:"Gestion des cookies",href:useBaseUrl()+"/cookies"}]}}const __default__$w={},_sfc_main$Z=Object.assign(__default__$w,{__name:"ModalConsent",setup(Oe,{expose:e}){const Te=useRouter(),ke=useEulerian();var Be=ke.hasKey();const Ue=ref(!Be),He="Panneau de gestion des cookies",We="md",Cn=useBaseUrl()+"/donnees-personnelles",En=()=>{Ue.value=!0,ke.pause()},An=()=>{Ue.value=!1,Te.push({path:"/"}),ke.resume()};e({openModalConsent:En,onModalConsentClose:An});const Sn=()=>{ke.start(),An()},Tn=()=>{ke.stop(),An()};return(Ln,Bn)=>{const ei=$s,ti=Vt$1;return openBlock(),createBlock(ti,{opened:unref(Ue),title:He,size:We,onClose:An},{default:withCtx(()=>[createBaseVNode("p",null,[createVNode(ei,{onAcceptAll:Bn[0]||(Bn[0]=ni=>Sn()),onRefuseAll:Bn[1]||(Bn[1]=ni=>Tn())},{default:withCtx(()=>[Bn[2]||(Bn[2]=createTextVNode(" Préférences pour tous les services. ")),createBaseVNode("a",{href:Cn},"Données personnelles et cookies")]),_:1})]),Bn[3]||(Bn[3]=createBaseVNode("hr",null,null,-1)),Bn[4]||(Bn[4]=createBaseVNode("div",null,[createBaseVNode("h5",null,"Eulerian Analytics"),createTextVNode(" En cliquant sur 'Tout accepter', vous consentez à l'utilisation des cookies pour nous aider à améliorer notre site web en collectant et en rapportant des informations sur votre utilisation grâce à Eulerian Analytics. "),createBaseVNode("br"),createTextVNode(" Si vous n'êtes pas d'accord, veuillez cliquer sur 'Tout refuser'. Votre expérience de navigation ne sera pas affectée. ")],-1))]),_:1},8,["opened"])}}}),LogoSun="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M19,72c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1%20c0-0.55145,0.4486-1,1-1s1,0.44855,1,1C32,9.5514,31.5514,10,31,10z%20M67,66c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S67.5514,66,67,66z%20M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M9,32c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M32.4453,44.1679c0.4595-0.3063,1.0804-0.1821,1.3867,0.2774C35.3156,46.6706,38.5061,48,41,48%20c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1c-3.1061,0-6.931-1.5937-8.8321-4.4453C31.8616,45.0952,31.9858,44.4743,32.4453,44.1679z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M39.00671,20.04651L39,19.92981v-5.47369c0-0.55225,0.44769-1,1-1c0.51282,0,0.93549,0.38611,0.99329,0.88336%20L41,14.45612v5.47369c0,0.55231-0.44769,1-1,1C39.48718,20.92981,39.06451,20.54382,39.00671,20.04651z%20M19.37927,39H14%20l-0.11658,0.00671C13.38599,39.06451,13,39.48718,13,40c0,0.55231,0.44769,1,1,1h5.37927l0.11664-0.00671%20c0.49738-0.0578,0.88336-0.48047,0.88336-0.99329C20.37927,39.44769,19.93158,39,19.37927,39z%20M66,39h-5.37927l-0.11664,0.00671%20c-0.49738,0.0578-0.88336,0.48047-0.88336,0.99329c0,0.55231,0.44769,1,1,1H66l0.11658-0.00671C66.61401,40.93549,67,40.51282,67,40%20C67,39.44769,66.55231,39,66,39z%20M40,59.07019c-0.55231,0-1,0.44769-1,1v5.47369l0.00671,0.11664%20c0.0578,0.49725,0.48047,0.88336,0.99329,0.88336c0.55231,0,1-0.44769,1-1v-5.47369l-0.00671-0.11658%20C40.93549,59.45618,40.51282,59.07019,40,59.07019z%20M24.04541,53.89557l-1.79309,1.82452l-0.0824,0.09503%20c-0.30164,0.3949-0.26892,0.96185,0.09467,1.31915c0.39392,0.38715,1.02704,0.38159,1.41412-0.01227l1.79309-1.82458l0.0824-0.09491%20c0.30157-0.3949,0.26898-0.96191-0.0946-1.31921C25.06561,53.49622,24.4325,53.50171,24.04541,53.89557z%20M55.95459,24.27991%20l1.79309-1.82458l0.0824-0.09491c0.30164-0.3949,0.26892-0.96191-0.09467-1.31921c-0.39392-0.38721-1.02704-0.38159-1.41412,0.01233%20l-1.79321,1.82446L54.4458,22.9729c-0.30157,0.39502-0.26898,0.96191,0.0946,1.31927%20C54.93439,24.67932,55.5675,24.67383,55.95459,24.27991z%20M23.67871,21.05353l-0.09338-0.08405%20c-0.38971-0.30847-0.95715-0.28571-1.32074,0.07172c-0.39386,0.38708-0.39941,1.0202-0.01227,1.41412l1.79309,1.82458%20l0.09351,0.08398c0.38959,0.30841,0.95697,0.28558,1.32068-0.07172c0.39392-0.38708,0.39941-1.02026,0.01221-1.41418%20L23.67871,21.05353z%20M55.95459,53.89557l-0.09351-0.08398c-0.38959-0.30847-0.95697-0.28571-1.32068,0.07172%20c-0.39392,0.38708-0.39941,1.0202-0.01233,1.41412l1.79321,1.82458l0.09338,0.08398%20c0.38971,0.30841,0.95715,0.28558,1.32074-0.07172c0.39386-0.38708,0.39941-1.02026,0.01227-1.41418L55.95459,53.89557z%20M40,26%20c-7.73199,0-14,6.26801-14,14c0,1.91528,0.38538,3.77838,1.12323,5.50281c0.21716,0.50781,0.80499,0.74329,1.31268,0.52606%20c0.50781-0.21729,0.74329-0.80499,0.52606-1.31274C28.33002,43.2392,28,41.64362,28,40c0-6.62738,5.37262-12,12-12s12,5.37262,12,12%20s-5.37262,12-12,12c-3.5495,0-6.84521-1.54871-9.11212-4.19141c-0.35956-0.41907-0.99091-0.46747-1.4101-0.10791%20c-0.41919,0.35962-0.46747,0.99091-0.10791,1.4101C32.01282,52.19177,35.86072,54,40,54c7.73199,0,14-6.26801,14-14%20S47.73199,26,40,26z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoMoon="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M19,72c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1c0-0.55145,0.4486-1,1-1s1,0.44855,1,1%20C32,9.5514,31.5514,10,31,10z%20M69,60c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S69.5514,60,69,60z%20M45,70%20c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S45.5514,70,45,70z%20M9,32c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M41,30c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1S41.5523,30,41,30z%20M59,38c-0.5523,0-1,0.4477-1,1%20s0.4477,1,1,1s1-0.4477,1-1S59.5523,38,59,38z%20M55,38c0.5523,0,1,0.4477,1,1c0,0.5128-0.386,0.9355-0.8834,0.9933L55,40h-2%20c-0.5523,0-1-0.4477-1-1c0-0.5128,0.386-0.9355,0.8834-0.9933L53,38H55z%20M48,31c0-0.5523-0.4477-1-1-1h-2l-0.1166,0.0067%20C44.386,30.0645,44,30.4872,44,31c0,0.5523,0.4477,1,1,1h2l0.1166-0.0067C47.614,31.9355,48,31.5128,48,31z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M59.90668,47.08899c-2.4024,7.6662-9.49188,12.91333-17.52948,12.91333%20c-10.14819,0-18.37512-8.26733-18.37512-18.46643c0-7.85461,4.93793-14.82916,12.2738-17.42346%20c1.87921-0.66461,3.32355,1.68457,1.9613,3.1073c-2.30841,2.41095-3.5921,5.59399-3.5921,8.95575%20c0,6.76794,5.2041,12.37939,11.8927,12.89435c0.5506,0.04236,0.96271,0.52319,0.92035,1.07379%20c-0.04242,0.55066-0.52325,0.96271-1.07385,0.92029c-7.72986-0.59503-13.7392-7.07483-13.7392-14.88843%20c0-3.61078,1.28583-7.04816,3.61322-9.75067l0.22668-0.25684L36.2854,26.2464c-6.06519,2.4425-10.13849,8.30981-10.2796,14.9339%20l-0.00372,0.35559c0,9.09668,7.33374,16.46643,16.37512,16.46643c6.92578,0,13.0639-4.375,15.39703-10.84619l0.06879-0.19916%20l-0.19684,0.18811c-1.96747,1.82373-4.37738,3.07861-6.99451,3.63629l-0.39404,0.07843%20c-0.54303,0.1004-1.0647-0.25842-1.1651-0.80151c-0.10052-0.54309,0.25836-1.0647,0.80145-1.16516%20c2.62329-0.48511,5.02313-1.77515,6.89282-3.70404C58.17792,43.75378,60.4975,45.2038,59.90668,47.08899z%20M15,58%20c-0.55231,0-1,0.44769-1,1s0.44769,1,1,1s1-0.44769,1-1S15.55231,58,15,58z%20M55,28h2l0.11658-0.00671%20C57.61401,27.93549,58,27.51282,58,27c0-0.55231-0.44769-1-1-1h-2l-0.11658,0.00671C54.38599,26.06451,54,26.48718,54,27%20C54,27.55231,54.44769,28,55,28z%20M23,58h-4l-0.11658,0.00671C18.38599,58.06451,18,58.48718,18,59c0,0.55231,0.44769,1,1,1h4%20l0.11658-0.00671C23.61401,59.93549,24,59.51282,24,59C24,58.44769,23.55231,58,23,58z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoSystem="/cartes.gouv.fr-entree-carto/assets/system-DTLRiYhn.svg",title$1="Paramètres d'affichage",size="md",legend="Choisissez un thème pour personnaliser l'apparence du site.",_sfc_main$Y={__name:"ModalTheme",setup(Oe,{expose:e}){const Te=useEulerian(),{setScheme:ke,theme:Be,scheme:Ue}=ef(),He=ref(Ue.value);watch(Ue,()=>{He.value=Ue.value});const We=[{label:"Thème clair",value:"light",id:"fr-radios-theme-light",name:"fr-radios-theme",img:LogoSun},{label:"Thème sombre",id:"fr-radios-theme-dark",value:"dark",name:"fr-radios-theme",img:LogoMoon},{label:"Système",id:"fr-radios-theme-system",value:"system",name:"fr-radios-theme",hint:"Utilise les paramètres sytème.",img:LogoSystem}],Cn=()=>{ke(He.value)},En=ref(!1),An=()=>{En.value=!0,Te.pause()},Sn=()=>{En.value=!1,Te.resume()};return e({openModalTheme:An,onModalThemeClose:Sn}),(Tn,Ln)=>{const Bn=Bi,ei=Vt$1;return openBlock(),createBlock(ei,{ref:"modal",opened:unref(En),title:title$1,size,onClose:Sn},{default:withCtx(()=>[createVNode(Bn,{modelValue:unref(He),"onUpdate:modelValue":[Ln[0]||(Ln[0]=ti=>isRef(He)?He.value=ti:null),Cn],legend,name:"fr-radios-theme",options:We},null,8,["modelValue"])]),_:1},8,["opened"])}}},{setScheme,theme,scheme}=ef(),NAMESPACE$1="cartes.gouv.fr",ns$1=Oe=>NAMESPACE$1+"."+Oe,VERSION="6",SCHEME_KEY_LS_MAIN="scheme",SCHEME_KEY_LS_CARTES="vue-dsfr-scheme",useAppStore=defineStore("app",()=>{var Oe=useStorage(ns$1("version"),VERSION);Oe.value!==VERSION&&(localStorage.clear(),localStorage.setItem(ns$1("version"),VERSION),Oe.value=VERSION),watch(Oe,()=>{localStorage.setItem(ns$1("version"),Oe.value)});var e=useStorage(SCHEME_KEY_LS_MAIN);e.value&&(localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)),watch(e,()=>{localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)}),watch(scheme,()=>{localStorage.setItem(SCHEME_KEY_LS_MAIN,scheme.value)})}),t={auth:{title:"Authentification",not_authentificated:"Vous devez vous authentifier",failed:Oe=>`Exception sur l'authentication : ${Oe}`},bookmark:{title:"Espace personnel",failed:Oe=>`Exception sur l'espace personnel : ${Oe}`,failed_add_data:Oe=>`Erreur sur l'ajout de la donnée : ${Oe}`,success_add_data:Oe=>`Ajout sur la carte de la donnée de type ${Oe}`,failed_type_unknow:Oe=>`Impossible de determiner le type de données : ${Oe}`,failed_not_yet_implemented:Oe=>`Pas encore implementé : ${Oe} !`},drawing:{title:"Croquis",save_success:"Le croquis est enregistré dans l'espace personnel",save_failed:"Une erreur est survenue sur l'enregistrement du croquis"},layerimport:{title:"Import de couche",add_success_service:Oe=>`La couche du service ${Oe} est ajoutée à la carte`,add_failed_service:Oe=>`Une erreur est survenue dans l'ajout de la couche ${Oe} !`,add_success_mapbox:"La couche MapBox est ajoutée à la carte",add_failed_mapbox:"Une erreur est survenue dans l'ajout de la couche MapBox !"},layerswitcher:{title:"Gestionnaire de couche",add_success:"La couche est ajoutée à la carte",add_failed:"Une erreur est survenue dans l'ajout de la couche",remove_success:"La couche est supprimé de la carte",remove_failed:"Une erreur est survenue dans la suppression de la couche",failed_not_yet_implemented:"L'édition de ce type de données n'est pas encore gérée !"},ol:{title:"OpenLayers",failed:Oe=>`Exception sur OpenLayers : ${Oe}`,failed_format:Oe=>`Le format n'est pas reconnu : ${Oe}`,failed_source:Oe=>`Exception sur l'initialisation de la source de type ${Oe} !`,failed_layer:Oe=>`Exception sur l'initialisation de la couche de type ${Oe} !`,failed_mapbox:Oe=>`Exception de la couche MapBox : ${Oe} !`}},_hoisted_1$k={class:"fr-container fr-container--fluid fr-container-md"},_sfc_main$X=defineComponent({__name:"Main",setup(Oe){useAppStore();const e=useRoute(),Te=useRouter();distExports.useLogger(),useMatchMedia("LG");const ke=useHeaderParams(),Be=useFooterParams(),Ue=ref(null),He=computed(()=>[{label:"Paramètres d’affichage",button:!0,class:"fr-icon-theme-fill fr-link--icon-left fr-px-2v",to:"/settings",onclick:Ue.value?Ue.value.openModalTheme:null}]),We=ref(null),Cn=computed(()=>Be.mandatoryLinks.map(Bn=>(Bn.label==="Gestion des cookies"&&(delete Bn.href,Bn.onclick=We.value?We.value.openModalConsent:null,Bn.to="/"),Bn)));var En=inject("services");En.isAccessValided().then(Bn=>{if(Bn==="login"){var ei=En.getUser();ke.value.quickLinks.forEach(ti=>{ti.label==="..."&&(ti.label=ei)})}Bn!=="no-auth"&&Te.replace({query:void 0})}).catch(Bn=>{console.error(Bn),push$1.error({title:t.auth.title,message:t.auth.failed(Bn.message||Bn)})}).finally(()=>{});const An=computed(()=>ke.value.quickLinks.filter(Bn=>{if(En.authenticated&&Bn.label==="...")if(Object.keys(En.user).length){var ei=En.getUser();Bn.label=ei}else return!1;if(!Object.keys(Bn).includes("authenticated")||Bn.authenticated===En.authenticated)return!0})),Sn=[{title:"Commencer avec cartes.gouv",get active(){return["Documentation","Offre","Nous rejoindre"].includes(e.name)},links:[{to:`${useBaseUrl()}/documentation`,text:"Documentation"},{to:`${useBaseUrl()}/offre`,text:"Offre"},{to:`${useBaseUrl()}/nous-rejoindre`,text:"Nous rejoindre"}]},{to:`${useBaseUrl()}/catalogue`,text:"Catalogue"},{to:"/",text:"Cartes"},{to:`${useBaseUrl()}/actualites`,text:"Actualités"},{title:"Assistance",get active(){return["Questions fréquentes","Nous écrire","Niveau de service"].includes(e.name)},links:[{to:`${useBaseUrl()}/faq`,text:"Questions fréquentes"},{to:`${useBaseUrl()}/nous-ecrire`,text:"Nous écrire"},{to:`${useBaseUrl()}/niveau-de-service`,text:"Niveau de service"}]},{to:`${useBaseUrl()}/a-propos`,text:"À propos"}],Tn={warning:markRaw(NotificationWarning),success:markRaw(NotificationSuccess),info:markRaw(NotificationInfo),error:markRaw(NotificationError)},Ln={...lightTheme,"--nv-radius":"0","--nv-width":"350px","--nv-border-width":"1px","--nv-icon-size":"30px","--nv-success-accent":"#18753c","--nv-success-border":"#18753c","--nv-error-accent":"#ce0500","--nv-error-border":"#ce0500","--nv-warning-accent":"#b34000","--nv-warning-border":"#b34000","--nv-info-accent":"#0063cb","--nv-info-border":"#0063cb"};return(Bn,ei)=>{const ti=Yo,ni=hl,ri=resolveComponent("router-view"),si=In$1;return openBlock(),createElementBlock(Fragment,null,[createVNode(ni,{modelValue:unref(ke).serviceTitle,"onUpdate:modelValue":ei[0]||(ei[0]=ai=>unref(ke).serviceTitle=ai),"service-title":unref(ke).serviceTitle,"show-beta":!0,"service-description":unref(ke).serviceDescription,"logo-text":unref(ke).logoText,"quick-links":unref(An)},{mainnav:withCtx(()=>[createVNode(ti,{"nav-items":Sn})]),_:1},8,["modelValue","service-title","service-description","logo-text","quick-links"]),createVNode(unref(_sfc_main$e$1),null,{default:withCtx(ai=>[createVNode(unref(_sfc_main$1$1),{item:ai,icons:Tn,theme:Ln},null,8,["item"])]),_:1}),createBaseVNode("div",null,[createVNode(ri)]),ei[1]||(ei[1]=createBaseVNode("label",{class:"fr-footer-toggle-label fr-btn fr-btn--tertiary-no-outline",for:"fr-footer-toggle"},null,-1)),ei[2]||(ei[2]=createBaseVNode("input",{id:"fr-footer-toggle",type:"checkbox"},null,-1)),createVNode(si,{"before-mandatory-links":unref(Be).beforeMandatoryLinks,"after-mandatory-links":unref(He),"logo-text":unref(Be).logoText,"desc-text":unref(Be).descText,"home-link":unref(Be).homeLink,partners:unref(Be).partners,"licence-text":unref(Be).licenceText,"licence-to":unref(Be).licenceTo,"licence-name":unref(Be).licenceName,"licence-link-props":unref(Be).licenceLinkProps,"ecosystem-links":unref(Be).ecosystemLinks,"mandatory-links":unref(Cn)},null,8,["before-mandatory-links","after-mandatory-links","logo-text","desc-text","home-link","partners","licence-text","licence-to","licence-name","licence-link-props","ecosystem-links","mandatory-links"]),createBaseVNode("div",_hoisted_1$k,[createVNode(_sfc_main$Y,{ref_key:"refModalTheme",ref:Ue},null,512),createVNode(_sfc_main$Z,{ref_key:"refModalConsent",ref:We},null,512)])],64)}}}),_sfc_main$W=defineComponent({__name:"App",setup(Oe){return(e,Te)=>(openBlock(),createBlock(_sfc_main$X))}}),version$2="1.0.0-beta.3-373",Pkg$1={version:version$2},MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},ObjectEventType={PROPERTYCHANGE:"propertychange"},EventType={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(Oe,e,Te){let ke,Be;Te=Te||ascending;let Ue=0,He=Oe.length,We=!1;for(;Ue<He;)ke=Ue+(He-Ue>>1),Be=+Te(Oe[ke],e),Be<0?Ue=ke+1:(He=ke,We=!Be);return We?Ue:~Ue}function ascending(Oe,e){return Oe>e?1:Oe<e?-1:0}function descending(Oe,e){return Oe<e?1:Oe>e?-1:0}function linearFindNearest(Oe,e,Te){if(Oe[0]<=e)return 0;const ke=Oe.length;if(e<=Oe[ke-1])return ke-1;if(typeof Te=="function"){for(let Be=1;Be<ke;++Be){const Ue=Oe[Be];if(Ue===e)return Be;if(Ue<e)return Te(e,Oe[Be-1],Ue)>0?Be-1:Be}return ke-1}if(Te>0){for(let Be=1;Be<ke;++Be)if(Oe[Be]<e)return Be-1;return ke-1}if(Te<0){for(let Be=1;Be<ke;++Be)if(Oe[Be]<=e)return Be;return ke-1}for(let Be=1;Be<ke;++Be){if(Oe[Be]==e)return Be;if(Oe[Be]<e)return Oe[Be-1]-e<e-Oe[Be]?Be-1:Be}return ke-1}function reverseSubArray(Oe,e,Te){for(;e<Te;){const ke=Oe[e];Oe[e]=Oe[Te],Oe[Te]=ke,++e,--Te}}function extend$4(Oe,e){const Te=Array.isArray(e)?e:[e],ke=Te.length;for(let Be=0;Be<ke;Be++)Oe[Oe.length]=Te[Be]}function equals$2(Oe,e){const Te=Oe.length;if(Te!==e.length)return!1;for(let ke=0;ke<Te;ke++)if(Oe[ke]!==e[ke])return!1;return!0}function isSorted(Oe,e,Te){const ke=e||ascending;return Oe.every(function(Be,Ue){if(Ue===0)return!0;const He=ke(Oe[Ue-1],Be);return!(He>0||He===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(Oe){let e,Te,ke;return function(){const Be=Array.prototype.slice.call(arguments);return(!Te||this!==ke||!equals$2(Be,Te))&&(ke=this,Te=Be,e=Oe.apply(this,arguments)),e}}function toPromise(Oe){function e(){let Te;try{Te=Oe()}catch(ke){return Promise.reject(ke)}return Te instanceof Promise?Te:Promise.resolve(Te)}return e()}function clear$1(Oe){for(const e in Oe)delete Oe[e]}function isEmpty$1(Oe){let e;for(e in Oe)return!1;return!e}class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,Te){if(!e||!Te)return;const ke=this.listeners_||(this.listeners_={}),Be=ke[e]||(ke[e]=[]);Be.includes(Te)||Be.push(Te)}dispatchEvent(e){const Te=typeof e=="string",ke=Te?e:e.type,Be=this.listeners_&&this.listeners_[ke];if(!Be)return;const Ue=Te?new BaseEvent(e):e;Ue.target||(Ue.target=this.eventTarget_||this);const He=this.dispatching_||(this.dispatching_={}),We=this.pendingRemovals_||(this.pendingRemovals_={});ke in He||(He[ke]=0,We[ke]=0),++He[ke];let Cn;for(let En=0,An=Be.length;En<An;++En)if("handleEvent"in Be[En]?Cn=Be[En].handleEvent(Ue):Cn=Be[En].call(this,Ue),Cn===!1||Ue.propagationStopped){Cn=!1;break}if(--He[ke]===0){let En=We[ke];for(delete We[ke];En--;)this.removeEventListener(ke,VOID);delete He[ke]}return Cn}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,Te){if(!this.listeners_)return;const ke=this.listeners_[e];if(!ke)return;const Be=ke.indexOf(Te);Be!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(ke[Be]=VOID,++this.pendingRemovals_[e]):(ke.splice(Be,1),ke.length===0&&delete this.listeners_[e]))}}function listen(Oe,e,Te,ke,Be){if(Be){const He=Te;Te=function(We){return Oe.removeEventListener(e,Te),He.call(ke??this,We)}}else ke&&ke!==Oe&&(Te=Te.bind(ke));const Ue={target:Oe,type:e,listener:Te};return Oe.addEventListener(e,Te),Ue}function listenOnce(Oe,e,Te,ke){return listen(Oe,e,Te,ke,!0)}function unlistenByKey(Oe){Oe&&Oe.target&&(Oe.target.removeEventListener(Oe.type,Oe.listener),clear$1(Oe))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,Te){if(Array.isArray(e)){const ke=e.length,Be=new Array(ke);for(let Ue=0;Ue<ke;++Ue)Be[Ue]=listen(this,e[Ue],Te);return Be}return listen(this,e,Te)}onceInternal(e,Te){let ke;if(Array.isArray(e)){const Be=e.length;ke=new Array(Be);for(let Ue=0;Ue<Be;++Ue)ke[Ue]=listenOnce(this,e[Ue],Te)}else ke=listenOnce(this,e,Te);return Te.ol_key=ke,ke}unInternal(e,Te){const ke=Te.ol_key;if(ke)unByKey(ke);else if(Array.isArray(e))for(let Be=0,Ue=e.length;Be<Ue;++Be)this.removeEventListener(e[Be],Te);else this.removeEventListener(e,Te)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(Oe){if(Array.isArray(Oe))for(let e=0,Te=Oe.length;e<Te;++e)unlistenByKey(Oe[e]);else unlistenByKey(Oe)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(Oe){return Oe.ol_uid||(Oe.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,Te,ke){super(e),this.key=Te,this.oldValue=ke}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let Te;return this.values_&&this.values_.hasOwnProperty(e)&&(Te=this.values_[e]),Te}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,Te){let ke;ke=`change:${e}`,this.hasListener(ke)&&this.dispatchEvent(new ObjectEvent(ke,e,Te)),ke=ObjectEventType.PROPERTYCHANGE,this.hasListener(ke)&&this.dispatchEvent(new ObjectEvent(ke,e,Te))}addChangeListener(e,Te){this.addEventListener(`change:${e}`,Te)}removeChangeListener(e,Te){this.removeEventListener(`change:${e}`,Te)}set(e,Te,ke){const Be=this.values_||(this.values_={});if(ke)Be[e]=Te;else{const Ue=Be[e];Be[e]=Te,Ue!==Te&&this.notify(e,Ue)}}setProperties(e,Te){for(const ke in e)this.set(ke,e[ke],Te)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,Te){if(this.values_&&e in this.values_){const ke=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),Te||this.notify(e,ke)}}}const CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(Oe){const e=Oe.match(fontRegEx);if(!e)return null;const Te={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let ke=0,Be=fontRegExMatchIndex.length;ke<Be;++ke){const Ue=e[ke+1];Ue!==void 0&&(Te[fontRegExMatchIndex[ke]]=Ue)}return Te.families=Te.family.split(/,\s?/),Te},ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,CREATE_IMAGE_BITMAP=typeof createImageBitmap=="function",PASSIVE_EVENT_LISTENERS=function(){let Oe=!1;try{const e=Object.defineProperty({},"passive",{get:function(){Oe=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return Oe}();function createCanvasContext2D(Oe,e,Te,ke){let Be;return Te&&Te.length?Be=Te.shift():WORKER_OFFSCREEN_CANVAS?Be=new OffscreenCanvas(Oe||300,e||300):Be=document.createElement("canvas"),Oe&&(Be.width=Oe),e&&(Be.height=e),Be.getContext("2d",ke)}let sharedCanvasContext;function getSharedCanvasContext2D(){return sharedCanvasContext||(sharedCanvasContext=createCanvasContext2D(1,1)),sharedCanvasContext}function releaseCanvas(Oe){const e=Oe.canvas;e.width=1,e.height=1,Oe.clearRect(0,0,1,1)}function outerWidth(Oe){let e=Oe.offsetWidth;const Te=getComputedStyle(Oe);return e+=parseInt(Te.marginLeft,10)+parseInt(Te.marginRight,10),e}function outerHeight(Oe){let e=Oe.offsetHeight;const Te=getComputedStyle(Oe);return e+=parseInt(Te.marginTop,10)+parseInt(Te.marginBottom,10),e}function replaceNode(Oe,e){const Te=e.parentNode;Te&&Te.replaceChild(Oe,e)}function removeChildren(Oe){for(;Oe.lastChild;)Oe.lastChild.remove()}function replaceChildren(Oe,e){const Te=Oe.childNodes;for(let ke=0;;++ke){const Be=Te[ke],Ue=e[ke];if(!Be&&!Ue)break;if(Be!==Ue){if(!Be){Oe.appendChild(Ue);continue}if(!Ue){Oe.removeChild(Be),--ke;continue}Oe.insertBefore(Ue,Be)}}}const Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(Oe){const e=createEmpty();for(let Te=0,ke=Oe.length;Te<ke;++Te)extendCoordinate(e,Oe[Te]);return e}function _boundingExtentXYs(Oe,e,Te){const ke=Math.min.apply(null,Oe),Be=Math.min.apply(null,e),Ue=Math.max.apply(null,Oe),He=Math.max.apply(null,e);return createOrUpdate$2(ke,Be,Ue,He,Te)}function buffer(Oe,e,Te){return Te?(Te[0]=Oe[0]-e,Te[1]=Oe[1]-e,Te[2]=Oe[2]+e,Te[3]=Oe[3]+e,Te):[Oe[0]-e,Oe[1]-e,Oe[2]+e,Oe[3]+e]}function clone$1(Oe,e){return e?(e[0]=Oe[0],e[1]=Oe[1],e[2]=Oe[2],e[3]=Oe[3],e):Oe.slice()}function closestSquaredDistanceXY(Oe,e,Te){let ke,Be;return e<Oe[0]?ke=Oe[0]-e:Oe[2]<e?ke=e-Oe[2]:ke=0,Te<Oe[1]?Be=Oe[1]-Te:Oe[3]<Te?Be=Te-Oe[3]:Be=0,ke*ke+Be*Be}function containsCoordinate(Oe,e){return containsXY(Oe,e[0],e[1])}function containsExtent(Oe,e){return Oe[0]<=e[0]&&e[2]<=Oe[2]&&Oe[1]<=e[1]&&e[3]<=Oe[3]}function containsXY(Oe,e,Te){return Oe[0]<=e&&e<=Oe[2]&&Oe[1]<=Te&&Te<=Oe[3]}function coordinateRelationship(Oe,e){const Te=Oe[0],ke=Oe[1],Be=Oe[2],Ue=Oe[3],He=e[0],We=e[1];let Cn=Relationship.UNKNOWN;return He<Te?Cn=Cn|Relationship.LEFT:He>Be&&(Cn=Cn|Relationship.RIGHT),We<ke?Cn=Cn|Relationship.BELOW:We>Ue&&(Cn=Cn|Relationship.ABOVE),Cn===Relationship.UNKNOWN&&(Cn=Relationship.INTERSECTING),Cn}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(Oe,e,Te,ke,Be){return Be?(Be[0]=Oe,Be[1]=e,Be[2]=Te,Be[3]=ke,Be):[Oe,e,Te,ke]}function createOrUpdateEmpty(Oe){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,Oe)}function createOrUpdateFromCoordinate(Oe,e){const Te=Oe[0],ke=Oe[1];return createOrUpdate$2(Te,ke,Te,ke,e)}function createOrUpdateFromFlatCoordinates(Oe,e,Te,ke,Be){const Ue=createOrUpdateEmpty(Be);return extendFlatCoordinates(Ue,Oe,e,Te,ke)}function equals$1(Oe,e){return Oe[0]==e[0]&&Oe[2]==e[2]&&Oe[1]==e[1]&&Oe[3]==e[3]}function extend$3(Oe,e){return e[0]<Oe[0]&&(Oe[0]=e[0]),e[2]>Oe[2]&&(Oe[2]=e[2]),e[1]<Oe[1]&&(Oe[1]=e[1]),e[3]>Oe[3]&&(Oe[3]=e[3]),Oe}function extendCoordinate(Oe,e){e[0]<Oe[0]&&(Oe[0]=e[0]),e[0]>Oe[2]&&(Oe[2]=e[0]),e[1]<Oe[1]&&(Oe[1]=e[1]),e[1]>Oe[3]&&(Oe[3]=e[1])}function extendFlatCoordinates(Oe,e,Te,ke,Be){for(;Te<ke;Te+=Be)extendXY(Oe,e[Te],e[Te+1]);return Oe}function extendXY(Oe,e,Te){Oe[0]=Math.min(Oe[0],e),Oe[1]=Math.min(Oe[1],Te),Oe[2]=Math.max(Oe[2],e),Oe[3]=Math.max(Oe[3],Te)}function forEachCorner(Oe,e){let Te;return Te=e(getBottomLeft(Oe)),Te||(Te=e(getBottomRight(Oe)),Te)||(Te=e(getTopRight(Oe)),Te)||(Te=e(getTopLeft(Oe)),Te)?Te:!1}function getArea$1(Oe){let e=0;return isEmpty(Oe)||(e=getWidth(Oe)*getHeight(Oe)),e}function getBottomLeft(Oe){return[Oe[0],Oe[1]]}function getBottomRight(Oe){return[Oe[2],Oe[1]]}function getCenter(Oe){return[(Oe[0]+Oe[2])/2,(Oe[1]+Oe[3])/2]}function getCorner(Oe,e){let Te;if(e==="bottom-left")Te=getBottomLeft(Oe);else if(e==="bottom-right")Te=getBottomRight(Oe);else if(e==="top-left")Te=getTopLeft(Oe);else if(e==="top-right")Te=getTopRight(Oe);else throw new Error("Invalid corner");return Te}function getForViewAndSize(Oe,e,Te,ke,Be){const[Ue,He,We,Cn,En,An,Sn,Tn]=getRotatedViewport(Oe,e,Te,ke);return createOrUpdate$2(Math.min(Ue,We,En,Sn),Math.min(He,Cn,An,Tn),Math.max(Ue,We,En,Sn),Math.max(He,Cn,An,Tn),Be)}function getRotatedViewport(Oe,e,Te,ke){const Be=e*ke[0]/2,Ue=e*ke[1]/2,He=Math.cos(Te),We=Math.sin(Te),Cn=Be*He,En=Be*We,An=Ue*He,Sn=Ue*We,Tn=Oe[0],Ln=Oe[1];return[Tn-Cn+Sn,Ln-En-An,Tn-Cn-Sn,Ln-En+An,Tn+Cn-Sn,Ln+En+An,Tn+Cn+Sn,Ln+En-An,Tn-Cn+Sn,Ln-En-An]}function getHeight(Oe){return Oe[3]-Oe[1]}function getIntersection(Oe,e,Te){const ke=Te||createEmpty();return intersects$1(Oe,e)?(Oe[0]>e[0]?ke[0]=Oe[0]:ke[0]=e[0],Oe[1]>e[1]?ke[1]=Oe[1]:ke[1]=e[1],Oe[2]<e[2]?ke[2]=Oe[2]:ke[2]=e[2],Oe[3]<e[3]?ke[3]=Oe[3]:ke[3]=e[3]):createOrUpdateEmpty(ke),ke}function getTopLeft(Oe){return[Oe[0],Oe[3]]}function getTopRight(Oe){return[Oe[2],Oe[3]]}function getWidth(Oe){return Oe[2]-Oe[0]}function intersects$1(Oe,e){return Oe[0]<=e[2]&&Oe[2]>=e[0]&&Oe[1]<=e[3]&&Oe[3]>=e[1]}function isEmpty(Oe){return Oe[2]<Oe[0]||Oe[3]<Oe[1]}function returnOrUpdate(Oe,e){return e?(e[0]=Oe[0],e[1]=Oe[1],e[2]=Oe[2],e[3]=Oe[3],e):Oe}function scaleFromCenter(Oe,e){const Te=(Oe[2]-Oe[0])/2*(e-1),ke=(Oe[3]-Oe[1])/2*(e-1);Oe[0]-=Te,Oe[2]+=Te,Oe[1]-=ke,Oe[3]+=ke}function intersectsSegment(Oe,e,Te){let ke=!1;const Be=coordinateRelationship(Oe,e),Ue=coordinateRelationship(Oe,Te);if(Be===Relationship.INTERSECTING||Ue===Relationship.INTERSECTING)ke=!0;else{const He=Oe[0],We=Oe[1],Cn=Oe[2],En=Oe[3],An=e[0],Sn=e[1],Tn=Te[0],Ln=Te[1],Bn=(Ln-Sn)/(Tn-An);let ei,ti;Ue&Relationship.ABOVE&&!(Be&Relationship.ABOVE)&&(ei=Tn-(Ln-En)/Bn,ke=ei>=He&&ei<=Cn),!ke&&Ue&Relationship.RIGHT&&!(Be&Relationship.RIGHT)&&(ti=Ln-(Tn-Cn)*Bn,ke=ti>=We&&ti<=En),!ke&&Ue&Relationship.BELOW&&!(Be&Relationship.BELOW)&&(ei=Tn-(Ln-We)/Bn,ke=ei>=He&&ei<=Cn),!ke&&Ue&Relationship.LEFT&&!(Be&Relationship.LEFT)&&(ti=Ln-(Tn-He)*Bn,ke=ti>=We&&ti<=En)}return ke}function applyTransform(Oe,e,Te,ke){if(isEmpty(Oe))return createOrUpdateEmpty(Te);let Be=[];Be=[Oe[0],Oe[1],Oe[2],Oe[1],Oe[2],Oe[3],Oe[0],Oe[3]],e(Be,Be,2);const Ue=[],He=[];for(let We=0,Cn=Be.length;We<Cn;We+=2)Ue.push(Be[We]),He.push(Be[We+1]);return _boundingExtentXYs(Ue,He,Te)}function wrapX$2(Oe,e){const Te=e.getExtent(),ke=getCenter(Oe);if(e.canWrapX()&&(ke[0]<Te[0]||ke[0]>=Te[2])){const Be=getWidth(Te),He=Math.floor((ke[0]-Te[0])/Be)*Be;Oe[0]-=He,Oe[2]-=He}return Oe}function wrapAndSliceX(Oe,e,Te){if(e.canWrapX()){const ke=e.getExtent();if(!isFinite(Oe[0])||!isFinite(Oe[2]))return[[ke[0],Oe[1],ke[2],Oe[3]]];wrapX$2(Oe,e);const Be=getWidth(ke);if(getWidth(Oe)>Be&&!Te)return[[ke[0],Oe[1],ke[2],Oe[3]]];if(Oe[0]<ke[0])return[[Oe[0]+Be,Oe[1],ke[2],Oe[3]],[ke[0],Oe[1],Oe[2],Oe[3]]];if(Oe[2]>ke[2])return[[Oe[0],Oe[1],ke[2],Oe[3]],[ke[0],Oe[1],Oe[2]-Be,Oe[3]]]}return[Oe]}const Property$3={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property$3.ELEMENT,this.handleElementChanged),this.addChangeListener(Property$3.MAP,this.handleMapChanged),this.addChangeListener(Property$3.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property$3.POSITION,this.handlePositionChanged),this.addChangeListener(Property$3.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property$3.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property$3.MAP)||null}getOffset(){return this.get(Property$3.OFFSET)}getPosition(){return this.get(Property$3.POSITION)}getPositioning(){return this.get(Property$3.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var Te;this.mapPostrenderListenerKey&&((Te=this.element)==null||Te.remove(),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const ke=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?ke.insertBefore(this.element,ke.childNodes[0]||null):ke.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property$3.ELEMENT,e)}setMap(e){this.set(Property$3.MAP,e)}setOffset(e){this.set(Property$3.OFFSET,e)}setPosition(e){this.set(Property$3.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const Te=this.getMap();if(!Te||!Te.getTargetElement()||!this.get(Property$3.POSITION))return;const ke=this.getRect(Te.getTargetElement(),Te.getSize()),Be=this.getElement(),Ue=this.getRect(Be,[outerWidth(Be),outerHeight(Be)]);e=e||{};const He=e.margin===void 0?20:e.margin;if(!containsExtent(ke,Ue)){const We=Ue[0]-ke[0],Cn=ke[2]-Ue[2],En=Ue[1]-ke[1],An=ke[3]-Ue[3],Sn=[0,0];if(We<0?Sn[0]=We-He:Cn<0&&(Sn[0]=Math.abs(Cn)+He),En<0?Sn[1]=En-He:An<0&&(Sn[1]=Math.abs(An)+He),Sn[0]!==0||Sn[1]!==0){const Tn=Te.getView().getCenterInternal(),Ln=Te.getPixelFromCoordinateInternal(Tn);if(!Ln)return;const Bn=[Ln[0]+Sn[0],Ln[1]+Sn[1]],ei=e.animation||{};Te.getView().animateInternal({center:Te.getCoordinateFromPixelInternal(Bn),duration:ei.duration,easing:ei.easing})}}}getRect(e,Te){const ke=e.getBoundingClientRect(),Be=ke.left+window.pageXOffset,Ue=ke.top+window.pageYOffset;return[Be,Ue,Be+Te[0],Ue+Te[1]]}setPositioning(e){this.set(Property$3.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),Te=this.getPosition();if(!e||!e.isRendered()||!Te){this.setVisible(!1);return}const ke=e.getPixelFromCoordinate(Te),Be=e.getSize();this.updateRenderedPosition(ke,Be)}updateRenderedPosition(e,Te){const ke=this.element.style,Be=this.getOffset(),Ue=this.getPositioning();this.setVisible(!0);const He=Math.round(e[0]+Be[0])+"px",We=Math.round(e[1]+Be[1])+"px";let Cn="0%",En="0%";Ue=="bottom-right"||Ue=="center-right"||Ue=="top-right"?Cn="-100%":(Ue=="bottom-center"||Ue=="center-center"||Ue=="top-center")&&(Cn="-50%"),Ue=="bottom-left"||Ue=="bottom-center"||Ue=="bottom-right"?En="-100%":(Ue=="center-left"||Ue=="center-center"||Ue=="center-right")&&(En="-50%");const An=`translate(${Cn}, ${En}) translate(${He}, ${We})`;this.rendered.transform_!=An&&(this.rendered.transform_=An,ke.transform=An)}getOptions(){return this.options}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function easeIn(Oe){return Math.pow(Oe,3)}function easeOut(Oe){return 1-easeIn(1-Oe)}function inAndOut(Oe){return 3*Oe*Oe-2*Oe*Oe*Oe}function linear(Oe){return Oe}class Tile extends Target{constructor(e,Te,ke){super(),ke=ke||{},this.tileCoord=e,this.state=Te,this.key="",this.transition_=ke.transition===void 0?250:ke.transition,this.transitionStarts_={},this.interpolate=!!ke.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.EMPTY){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}}load(){abstract()}getAlpha(e,Te){if(!this.transition_)return 1;let ke=this.transitionStarts_[e];if(!ke)ke=Te,this.transitionStarts_[e]=ke;else if(ke===-1)return 1;const Be=Te-ke+1e3/60;return Be>=this.transition_?1:easeIn(Be/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}const canvasPool$2=[];class VectorRenderTile extends Tile{constructor(e,Te,ke,Be,Ue){super(e,Te,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=Be.bind(void 0,this),this.removeSourceTiles_=Ue,this.wrappedTileCoord=ke}getContext(){return this.context_||(this.context_=createCanvasContext2D(1,1,canvasPool$2)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const Te=getUid(e);return Te in this.replayState_||(this.replayState_[Te]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[Te]}load(){this.getSourceTiles()}release(){this.context_&&(releaseCanvas(this.context_),canvasPool$2.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let VectorTile$1=class extends Tile{constructor(e,Te,ke,Be,Ue,He){super(e,Te,He),this.extent=null,this.format_=Be,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=Ue,this.url_=ke,this.key=ke}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,Te){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}};function assert(Oe,e){if(!Oe)throw new Error(e)}let withCredentials=!1;function loadFeaturesXhr(Oe,e,Te,ke,Be,Ue,He){const We=new XMLHttpRequest;We.open("GET",typeof Oe=="function"?Oe(Te,ke,Be):Oe,!0),e.getType()=="arraybuffer"&&(We.responseType="arraybuffer"),We.withCredentials=withCredentials,We.onload=function(Cn){if(!We.status||We.status>=200&&We.status<300){const En=e.getType();try{let An;En=="text"||En=="json"?An=We.responseText:En=="xml"?An=We.responseXML||We.responseText:En=="arraybuffer"&&(An=We.response),An?Ue(e.readFeatures(An,{extent:Te,featureProjection:Be}),e.readProjection(An)):He()}catch{He()}}else He()},We.onerror=He,We.send()}function xhr(Oe,e){return function(Te,ke,Be,Ue,He){loadFeaturesXhr(Oe,e,Te,ke,Be,(We,Cn)=>{this.addFeatures(We),Ue!==void 0&&Ue(We)},()=>{this.changed(),He!==void 0&&He()})}}function warn(...Oe){console.warn(...Oe)}function clamp$1(Oe,e,Te){return Math.min(Math.max(Oe,e),Te)}function squaredSegmentDistance(Oe,e,Te,ke,Be,Ue){const He=Be-Te,We=Ue-ke;if(He!==0||We!==0){const Cn=((Oe-Te)*He+(e-ke)*We)/(He*He+We*We);Cn>1?(Te=Be,ke=Ue):Cn>0&&(Te+=He*Cn,ke+=We*Cn)}return squaredDistance$1(Oe,e,Te,ke)}function squaredDistance$1(Oe,e,Te,ke){const Be=Te-Oe,Ue=ke-e;return Be*Be+Ue*Ue}function solveLinearSystem(Oe){const e=Oe.length;for(let ke=0;ke<e;ke++){let Be=ke,Ue=Math.abs(Oe[ke][ke]);for(let We=ke+1;We<e;We++){const Cn=Math.abs(Oe[We][ke]);Cn>Ue&&(Ue=Cn,Be=We)}if(Ue===0)return null;const He=Oe[Be];Oe[Be]=Oe[ke],Oe[ke]=He;for(let We=ke+1;We<e;We++){const Cn=-Oe[We][ke]/Oe[ke][ke];for(let En=ke;En<e+1;En++)ke==En?Oe[We][En]=0:Oe[We][En]+=Cn*Oe[ke][En]}}const Te=new Array(e);for(let ke=e-1;ke>=0;ke--){Te[ke]=Oe[ke][e]/Oe[ke][ke];for(let Be=ke-1;Be>=0;Be--)Oe[Be][e]-=Oe[Be][ke]*Te[ke]}return Te}function toDegrees(Oe){return Oe*180/Math.PI}function toRadians(Oe){return Oe*Math.PI/180}function modulo(Oe,e){const Te=Oe%e;return Te*e<0?Te+e:Te}function lerp(Oe,e,Te){return Oe+Te*(e-Oe)}function toFixed(Oe,e){const Te=Math.pow(10,e);return Math.round(Oe*Te)/Te}function round(Oe,e){return Math.round(toFixed(Oe,e))}function floor(Oe,e){return Math.floor(toFixed(Oe,e))}function ceil(Oe,e){return Math.ceil(toFixed(Oe,e))}function wrap(Oe,e,Te){if(Oe>=e&&Oe<Te)return Oe;const ke=Te-e;return((Oe-e)%ke+ke)%ke+e}function padNumber(Oe,e,Te){const ke=""+Oe;let Be=ke.indexOf(".");return Be=Be===-1?ke.length:Be,Be>e?ke:new Array(1+e-Be).join("0")+ke}function compareVersions(Oe,e){const Te=(""+Oe).split("."),ke=(""+e).split(".");for(let Be=0;Be<Math.max(Te.length,ke.length);Be++){const Ue=parseInt(Te[Be]||"0",10),He=parseInt(ke[Be]||"0",10);if(Ue>He)return 1;if(He>Ue)return-1}return 0}function add$3(Oe,e){return Oe[0]+=+e[0],Oe[1]+=+e[1],Oe}function closestOnSegment(Oe,e){const Te=Oe[0],ke=Oe[1],Be=e[0],Ue=e[1],He=Be[0],We=Be[1],Cn=Ue[0],En=Ue[1],An=Cn-He,Sn=En-We,Tn=An===0&&Sn===0?0:(An*(Te-He)+Sn*(ke-We))/(An*An+Sn*Sn||0);let Ln,Bn;return Tn<=0?(Ln=He,Bn=We):Tn>=1?(Ln=Cn,Bn=En):(Ln=He+Tn*An,Bn=We+Tn*Sn),[Ln,Bn]}function equals(Oe,e){let Te=!0;for(let ke=Oe.length-1;ke>=0;--ke)if(Oe[ke]!=e[ke]){Te=!1;break}return Te}function rotate$1(Oe,e){const Te=Math.cos(e),ke=Math.sin(e),Be=Oe[0]*Te-Oe[1]*ke,Ue=Oe[1]*Te+Oe[0]*ke;return Oe[0]=Be,Oe[1]=Ue,Oe}function scale$3(Oe,e){return Oe[0]*=e,Oe[1]*=e,Oe}function squaredDistance(Oe,e){const Te=Oe[0]-e[0],ke=Oe[1]-e[1];return Te*Te+ke*ke}function distance(Oe,e){return Math.sqrt(squaredDistance(Oe,e))}function squaredDistanceToSegment(Oe,e){return squaredDistance(Oe,closestOnSegment(Oe,e))}function wrapX$1(Oe,e){if(e.canWrapX()){const Te=getWidth(e.getExtent()),ke=getWorldsAway(Oe,e,Te);ke&&(Oe[0]-=ke*Te)}return Oe}function getWorldsAway(Oe,e,Te){const ke=e.getExtent();let Be=0;return e.canWrapX()&&(Oe[0]<ke[0]||Oe[0]>ke[2])&&(Te=Te||getWidth(ke),Be=Math.floor((Oe[0]-ke[0])/Te)),Be}const METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(Te,ke){return Te/Math.cosh(ke[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(Oe,e,Te,ke){const Be=Oe.length;Te=Te>1?Te:2,ke=ke??Te,e===void 0&&(Te>2?e=Oe.slice():e=new Array(Be));for(let Ue=0;Ue<Be;Ue+=ke){e[Ue]=HALF_SIZE*Oe[Ue]/180;let He=RADIUS$1*Math.log(Math.tan(Math.PI*(+Oe[Ue+1]+90)/360));He>MAX_SAFE_Y?He=MAX_SAFE_Y:He<-MAX_SAFE_Y&&(He=-MAX_SAFE_Y),e[Ue+1]=He}return e}function toEPSG4326(Oe,e,Te,ke){const Be=Oe.length;Te=Te>1?Te:2,ke=ke??Te,e===void 0&&(Te>2?e=Oe.slice():e=new Array(Be));for(let Ue=0;Ue<Be;Ue+=ke)e[Ue]=180*Oe[Ue]/HALF_SIZE,e[Ue+1]=360*Math.atan(Math.exp(Oe[Ue+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,Te){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:Te,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$5(Oe){return cache$1[Oe]||cache$1[Oe.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$2(Oe,e){cache$1[Oe]=e}let transforms={};function add$1(Oe,e,Te){const ke=Oe.getCode(),Be=e.getCode();ke in transforms||(transforms[ke]={}),transforms[ke][Be]=Te}function get$4(Oe,e){return Oe in transforms&&e in transforms[Oe]?transforms[Oe][e]:null}const K0=.9996,E$1=.00669438,E2$1=E$1*E$1,E3=E2$1*E$1,E_P2=E$1/(1-E$1),SQRT_E=Math.sqrt(1-E$1),_E=(1-SQRT_E)/(1+SQRT_E),_E2=_E*_E,_E3=_E2*_E,_E4=_E3*_E,_E5=_E4*_E,M1=1-E$1/4-3*E2$1/64-5*E3/256,M2=3*E$1/8+3*E2$1/32+45*E3/1024,M3=15*E2$1/256+45*E3/1024,M4=35*E3/3072,P2=3/2*_E-27/32*_E3+269/512*_E5,P3=21/16*_E2-55/32*_E4,P4=151/96*_E3-417/128*_E5,P5=1097/512*_E4,R$2=6378137;function toLonLat$1(Oe,e,Te){const ke=Oe-5e5,He=(Te.north?e:e-1e7)/K0/(R$2*M1),We=He+P2*Math.sin(2*He)+P3*Math.sin(4*He)+P4*Math.sin(6*He)+P5*Math.sin(8*He),Cn=Math.sin(We),En=Cn*Cn,An=Math.cos(We),Sn=Cn/An,Tn=Sn*Sn,Ln=Tn*Tn,Bn=1-E$1*En,ei=Math.sqrt(1-E$1*En),ti=R$2/ei,ni=(1-E$1)/Bn,ri=E_P2*An**2,si=ri*ri,ai=ke/(ti*K0),li=ai*ai,Pi=li*ai,pi=Pi*ai,vi=pi*ai,Ri=vi*ai,Fi=We-Sn/ni*(li/2-pi/24*(5+3*Tn+10*ri-4*si-9*E_P2))+Ri/720*(61+90*Tn+298*ri+45*Ln-252*E_P2-3*si);let di=(ai-Pi/6*(1+2*Tn+ri)+vi/120*(5-2*ri+28*Tn-3*si+8*E_P2+24*Ln))/An;return di=wrap(di+toRadians(zoneToCentralLongitude(Te.number)),-Math.PI,Math.PI),[toDegrees(di),toDegrees(Fi)]}const MIN_LATITUDE=-80,MAX_LATITUDE=84,MIN_LONGITUDE=-180,MAX_LONGITUDE=180;function fromLonLat$1(Oe,e,Te){Oe=wrap(Oe,MIN_LONGITUDE,MAX_LONGITUDE),e<MIN_LATITUDE?e=MIN_LATITUDE:e>MAX_LATITUDE&&(e=MAX_LATITUDE);const ke=toRadians(e),Be=Math.sin(ke),Ue=Math.cos(ke),He=Be/Ue,We=He*He,Cn=We*We,En=toRadians(Oe),An=zoneToCentralLongitude(Te.number),Sn=toRadians(An),Tn=R$2/Math.sqrt(1-E$1*Be**2),Ln=E_P2*Ue**2,Bn=Ue*wrap(En-Sn,-Math.PI,Math.PI),ei=Bn*Bn,ti=ei*Bn,ni=ti*Bn,ri=ni*Bn,si=ri*Bn,ai=R$2*(M1*ke-M2*Math.sin(2*ke)+M3*Math.sin(4*ke)-M4*Math.sin(6*ke)),li=K0*Tn*(Bn+ti/6*(1-We+Ln)+ri/120*(5-18*We+Cn+72*Ln-58*E_P2))+5e5;let Pi=K0*(ai+Tn*He*(ei/2+ni/24*(5-We+9*Ln+4*Ln**2)+si/720*(61-58*We+Cn+600*Ln-330*E_P2)));return Te.north||(Pi+=1e7),[li,Pi]}function zoneToCentralLongitude(Oe){return(Oe-1)*6-180+3}const epsgRegExes=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function zoneFromCode(Oe){let e=0;for(const Be of epsgRegExes){const Ue=Oe.match(Be);if(Ue){e=parseInt(Ue[1]);break}}if(!e)return null;let Te=0,ke=!1;return e>32700&&e<32761?Te=e-32700:e>32600&&e<32661&&(ke=!0,Te=e-32600),Te?{number:Te,north:ke}:null}function makeTransformFunction(Oe,e){return function(Te,ke,Be,Ue){const He=Te.length;Be=Be>1?Be:2,Ue=Ue??Be,ke||(Be>2?ke=Te.slice():ke=new Array(He));for(let We=0;We<He;We+=Ue){const Cn=Te[We],En=Te[We+1],An=Oe(Cn,En,e);ke[We]=An[0],ke[We+1]=An[1]}return ke}}function makeProjection(Oe){return zoneFromCode(Oe)?new Projection$1({code:Oe,units:"m"}):null}function makeTransforms(Oe){const e=zoneFromCode(Oe.getCode());return e?{forward:makeTransformFunction(fromLonLat$1,e),inverse:makeTransformFunction(toLonLat$1,e)}:null}const DEFAULT_RADIUS=63710088e-1;function getDistance(Oe,e,Te){Te=Te||DEFAULT_RADIUS;const ke=toRadians(Oe[1]),Be=toRadians(e[1]),Ue=(Be-ke)/2,He=toRadians(e[0]-Oe[0])/2,We=Math.sin(Ue)*Math.sin(Ue)+Math.sin(He)*Math.sin(He)*Math.cos(ke)*Math.cos(Be);return 2*Te*Math.atan2(Math.sqrt(We),Math.sqrt(1-We))}function getAreaInternal(Oe,e){let Te=0;const ke=Oe.length;let Be=Oe[ke-1][0],Ue=Oe[ke-1][1];for(let He=0;He<ke;He++){const We=Oe[He][0],Cn=Oe[He][1];Te+=toRadians(We-Be)*(2+Math.sin(toRadians(Ue))+Math.sin(toRadians(Cn))),Be=We,Ue=Cn}return Te*e*e/2}function getArea(Oe,e){e=e||{};const Te=e.radius||DEFAULT_RADIUS,ke=e.projection||"EPSG:3857",Be=Oe.getType();Be!=="GeometryCollection"&&(Oe=Oe.clone().transform(ke,"EPSG:4326"));let Ue=0,He,We,Cn,En,An,Sn;switch(Be){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(He=Oe.getCoordinates(),Ue=Math.abs(getAreaInternal(He[0],Te)),Cn=1,En=He.length;Cn<En;++Cn)Ue-=Math.abs(getAreaInternal(He[Cn],Te));break}case"MultiPolygon":{for(He=Oe.getCoordinates(),Cn=0,En=He.length;Cn<En;++Cn)for(We=He[Cn],Ue+=Math.abs(getAreaInternal(We[0],Te)),An=1,Sn=We.length;An<Sn;++An)Ue-=Math.abs(getAreaInternal(We[An],Te));break}case"GeometryCollection":{const Tn=Oe.getGeometries();for(Cn=0,En=Tn.length;Cn<En;++Cn)Ue+=getArea(Tn[Cn],e);break}default:throw new Error("Unsupported geometry type: "+Be)}return Ue}const transformFactories=[makeTransforms],projectionFactories=[makeProjection];let showCoordinateWarning=!0;function disableCoordinateWarning(Oe){showCoordinateWarning=!1}function cloneTransform(Oe,e){if(e!==void 0){for(let Te=0,ke=Oe.length;Te<ke;++Te)e[Te]=Oe[Te];e=e}else e=Oe.slice();return e}function addProjection(Oe){add$2(Oe.getCode(),Oe),add$1(Oe,Oe,cloneTransform)}function addProjections(Oe){Oe.forEach(addProjection)}function get$3(Oe){if(typeof Oe!="string")return Oe;const e=get$5(Oe);if(e)return e;for(const Te of projectionFactories){const ke=Te(Oe);if(ke)return ke}return null}function getPointResolution(Oe,e,Te,ke){Oe=get$3(Oe);let Be;const Ue=Oe.getPointResolutionFunc();if(Ue){if(Be=Ue(e,Te),ke&&ke!==Oe.getUnits()){const He=Oe.getMetersPerUnit();He&&(Be=Be*He/METERS_PER_UNIT$1[ke])}}else{const He=Oe.getUnits();if(He=="degrees"&&!ke||ke=="degrees")Be=e;else{const We=getTransformFromProjections(Oe,get$3("EPSG:4326"));if(!We&&He!=="degrees")Be=e*Oe.getMetersPerUnit();else{let En=[Te[0]-e/2,Te[1],Te[0]+e/2,Te[1],Te[0],Te[1]-e/2,Te[0],Te[1]+e/2];En=We(En,En,2);const An=getDistance(En.slice(0,2),En.slice(2,4)),Sn=getDistance(En.slice(4,6),En.slice(6,8));Be=(An+Sn)/2}const Cn=ke?METERS_PER_UNIT$1[ke]:Oe.getMetersPerUnit();Cn!==void 0&&(Be/=Cn)}}return Be}function addEquivalentProjections(Oe){addProjections(Oe),Oe.forEach(function(e){Oe.forEach(function(Te){e!==Te&&add$1(e,Te,cloneTransform)})})}function addEquivalentTransforms(Oe,e,Te,ke){Oe.forEach(function(Be){e.forEach(function(Ue){add$1(Be,Ue,Te),add$1(Ue,Be,ke)})})}function createProjection(Oe,e){return Oe?typeof Oe=="string"?get$3(Oe):Oe:get$3(e)}function createTransformFromCoordinateTransform(Oe){return function(e,Te,ke,Be){const Ue=e.length;ke=ke!==void 0?ke:2,Be=Be??ke,Te=Te!==void 0?Te:new Array(Ue);for(let He=0;He<Ue;He+=Be){const We=Oe(e.slice(He,He+ke)),Cn=We.length;for(let En=0,An=Be;En<An;++En)Te[He+En]=En>=Cn?e[He+En]:We[En]}return Te}}function addCoordinateTransforms(Oe,e,Te,ke){const Be=get$3(Oe),Ue=get$3(e);add$1(Be,Ue,createTransformFromCoordinateTransform(Te)),add$1(Ue,Be,createTransformFromCoordinateTransform(ke))}function fromLonLat(Oe,e){return disableCoordinateWarning(),transform$1(Oe,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function toLonLat(Oe,e){const Te=transform$1(Oe,"EPSG:3857","EPSG:4326"),ke=Te[0];return(ke<-180||ke>180)&&(Te[0]=modulo(ke+180,360)-180),Te}function equivalent$1(Oe,e){if(Oe===e)return!0;const Te=Oe.getUnits()===e.getUnits();return(Oe.getCode()===e.getCode()||getTransformFromProjections(Oe,e)===cloneTransform)&&Te}function getTransformFromProjections(Oe,e){const Te=Oe.getCode(),ke=e.getCode();let Be=get$4(Te,ke);if(Be)return Be;let Ue=null,He=null;for(const Cn of transformFactories)Ue||(Ue=Cn(Oe)),He||(He=Cn(e));if(!Ue&&!He)return null;const We="EPSG:4326";if(He)if(Ue)Be=composeTransformFuncs(Ue.inverse,He.forward);else{const Cn=get$4(Te,We);Cn&&(Be=composeTransformFuncs(Cn,He.forward))}else{const Cn=get$4(We,ke);Cn&&(Be=composeTransformFuncs(Ue.inverse,Cn))}return Be&&(addProjection(Oe),addProjection(e),add$1(Oe,e,Be)),Be}function composeTransformFuncs(Oe,e){return function(Te,ke,Be,Ue){return ke=Oe(Te,ke,Be,Ue),e(ke,ke,Be,Ue)}}function getTransform(Oe,e){const Te=get$3(Oe),ke=get$3(e);return getTransformFromProjections(Te,ke)}function transform$1(Oe,e,Te){const ke=getTransform(e,Te);if(!ke){const Be=get$3(e).getCode(),Ue=get$3(Te).getCode();throw new Error(`No transform available between ${Be} and ${Ue}`)}return ke(Oe,void 0,Oe.length)}function transformExtent(Oe,e,Te,ke){const Be=getTransform(e,Te);return applyTransform(Oe,Be,void 0)}let userProjection=null;function getUserProjection(){return userProjection}function toUserCoordinate(Oe,e){return Oe}function fromUserCoordinate(Oe,e){return showCoordinateWarning&&!equals(Oe,[0,0])&&Oe[0]>=-180&&Oe[0]<=180&&Oe[1]>=-90&&Oe[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),Oe}function toUserExtent(Oe,e){return Oe}function fromUserExtent(Oe,e){return Oe}function fromUserResolution(Oe,e){return Oe}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();function hasArea(Oe){return Oe[0]>0&&Oe[1]>0}function scale$2(Oe,e,Te){return Te===void 0&&(Te=[0,0]),Te[0]=Oe[0]*e+.5|0,Te[1]=Oe[1]*e+.5|0,Te}function toSize(Oe,e){return Array.isArray(Oe)?Oe:(e===void 0?e=[Oe,Oe]:(e[0]=Oe,e[1]=Oe),e)}class TileRange{constructor(e,Te,ke,Be){this.minX=e,this.maxX=Te,this.minY=ke,this.maxY=Be}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,Te){return this.minX<=e&&e<=this.maxX&&this.minY<=Te&&Te<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate$1(Oe,e,Te,ke,Be){return Be!==void 0?(Be.minX=Oe,Be.maxX=e,Be.minY=Te,Be.maxY=ke,Be):new TileRange(Oe,e,Te,ke)}function linearRingContainsExtent(Oe,e,Te,ke,Be){return!forEachCorner(Be,function(He){return!linearRingContainsXY(Oe,e,Te,ke,He[0],He[1])})}function linearRingContainsXY(Oe,e,Te,ke,Be,Ue){let He=0,We=Oe[Te-ke],Cn=Oe[Te-ke+1];for(;e<Te;e+=ke){const En=Oe[e],An=Oe[e+1];Cn<=Ue?An>Ue&&(En-We)*(Ue-Cn)-(Be-We)*(An-Cn)>0&&He++:An<=Ue&&(En-We)*(Ue-Cn)-(Be-We)*(An-Cn)<0&&He--,We=En,Cn=An}return He!==0}function linearRingsContainsXY(Oe,e,Te,ke,Be,Ue){if(Te.length===0||!linearRingContainsXY(Oe,e,Te[0],ke,Be,Ue))return!1;for(let He=1,We=Te.length;He<We;++He)if(linearRingContainsXY(Oe,Te[He-1],Te[He],ke,Be,Ue))return!1;return!0}function linearRingssContainsXY(Oe,e,Te,ke,Be,Ue){if(Te.length===0)return!1;for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He];if(linearRingsContainsXY(Oe,e,Cn,ke,Be,Ue))return!0;e=Cn[Cn.length-1]}return!1}function forEach(Oe,e,Te,ke,Be){let Ue;for(e+=ke;e<Te;e+=ke)if(Ue=Be(Oe.slice(e-ke,e),Oe.slice(e,e+ke)),Ue)return Ue;return!1}function intersectsLineString(Oe,e,Te,ke,Be,Ue){return Ue=Ue??extendFlatCoordinates(createEmpty(),Oe,e,Te,ke),intersects$1(Be,Ue)?Ue[0]>=Be[0]&&Ue[2]<=Be[2]||Ue[1]>=Be[1]&&Ue[3]<=Be[3]?!0:forEach(Oe,e,Te,ke,function(He,We){return intersectsSegment(Be,He,We)}):!1}function intersectsLineStringArray(Oe,e,Te,ke,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue){if(intersectsLineString(Oe,e,Te[Ue],ke,Be))return!0;e=Te[Ue]}return!1}function intersectsLinearRing(Oe,e,Te,ke,Be){return!!(intersectsLineString(Oe,e,Te,ke,Be)||linearRingContainsXY(Oe,e,Te,ke,Be[0],Be[1])||linearRingContainsXY(Oe,e,Te,ke,Be[0],Be[3])||linearRingContainsXY(Oe,e,Te,ke,Be[2],Be[1])||linearRingContainsXY(Oe,e,Te,ke,Be[2],Be[3]))}function intersectsLinearRingArray(Oe,e,Te,ke,Be){if(!intersectsLinearRing(Oe,e,Te[0],ke,Be))return!1;if(Te.length===1)return!0;for(let Ue=1,He=Te.length;Ue<He;++Ue)if(linearRingContainsExtent(Oe,Te[Ue-1],Te[Ue],ke,Be)&&!intersectsLineString(Oe,Te[Ue-1],Te[Ue],ke,Be))return!1;return!0}function intersectsLinearRingMultiArray(Oe,e,Te,ke,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];if(intersectsLinearRingArray(Oe,e,We,ke,Be))return!0;e=We[We.length-1]}return!1}function createOrUpdate(Oe,e,Te,ke){return ke!==void 0?(ke[0]=Oe,ke[1]=e,ke[2]=Te,ke):[Oe,e,Te]}function getKeyZXY(Oe,e,Te){return Oe+"/"+e+"/"+Te}function hash(Oe){return hashZXY(Oe[0],Oe[1],Oe[2])}function hashZXY(Oe,e,Te){return(e<<Oe)+Te}function withinExtentAndZ(Oe,e){const Te=Oe[0],ke=Oe[1],Be=Oe[2];if(e.getMinZoom()>Te||Te>e.getMaxZoom())return!1;const Ue=e.getFullTileRange(Te);return Ue?Ue.containsXY(ke,Be):!0}const DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256,tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(Be,Ue)=>Ue-Be),"`resolutions` must be sorted in descending order");let Te;if(!e.origins){for(let Be=0,Ue=this.resolutions_.length-1;Be<Ue;++Be)if(!Te)Te=this.resolutions_[Be]/this.resolutions_[Be+1];else if(this.resolutions_[Be]/this.resolutions_[Be+1]!==Te){Te=void 0;break}}this.zoomFactor_=Te,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const ke=e.extent;ke!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(ke)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=ke!==void 0?ke:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((Be,Ue)=>{const He=new TileRange(Math.min(0,Be[0]),Math.max(Be[0]-1,-1),Math.min(0,Be[1]),Math.max(Be[1]-1,-1));if(ke){const We=this.getTileRangeForExtentAndZ(ke,Ue);He.minX=Math.max(We.minX,He.minX),He.maxX=Math.min(We.maxX,He.maxX),He.minY=Math.max(We.minY,He.minY),He.maxY=Math.min(We.maxY,He.maxY)}return He}):ke&&this.calculateTileRanges_(ke)}forEachTileCoord(e,Te,ke){const Be=this.getTileRangeForExtentAndZ(e,Te);for(let Ue=Be.minX,He=Be.maxX;Ue<=He;++Ue)for(let We=Be.minY,Cn=Be.maxY;We<=Cn;++We)ke([Te,Ue,We])}forEachTileCoordParentTileRange(e,Te,ke,Be){let Ue,He,We,Cn=null,En=e[0]-1;for(this.zoomFactor_===2?(He=e[1],We=e[2]):Cn=this.getTileCoordExtent(e,Be);En>=this.minZoom;){if(He!==void 0&&We!==void 0?(He=Math.floor(He/2),We=Math.floor(We/2),Ue=createOrUpdate$1(He,He,We,We,ke)):Ue=this.getTileRangeForExtentAndZ(Cn,En,ke),Te(En,Ue))return!0;--En}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,Te,ke){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const Ue=e[1]*2,He=e[2]*2;return createOrUpdate$1(Ue,Ue+1,He,He+1,Te)}const Be=this.getTileCoordExtent(e,ke||this.tmpExtent_);return this.getTileRangeForExtentAndZ(Be,e[0]+1,Te)}return null}getTileRangeForTileCoordAndZ(e,Te,ke){if(Te>this.maxZoom||Te<this.minZoom)return null;const Be=e[0],Ue=e[1],He=e[2];if(Te===Be)return createOrUpdate$1(Ue,He,Ue,He,ke);if(this.zoomFactor_){const Cn=Math.pow(this.zoomFactor_,Te-Be),En=Math.floor(Ue*Cn),An=Math.floor(He*Cn);if(Te<Be)return createOrUpdate$1(En,En,An,An,ke);const Sn=Math.floor(Cn*(Ue+1))-1,Tn=Math.floor(Cn*(He+1))-1;return createOrUpdate$1(En,Sn,An,Tn,ke)}const We=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(We,Te,ke)}getTileRangeForExtentAndZ(e,Te,ke){this.getTileCoordForXYAndZ_(e[0],e[3],Te,!1,tmpTileCoord);const Be=tmpTileCoord[1],Ue=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],Te,!0,tmpTileCoord);const He=tmpTileCoord[1],We=tmpTileCoord[2];return createOrUpdate$1(Be,He,Ue,We,ke)}getTileCoordCenter(e){const Te=this.getOrigin(e[0]),ke=this.getResolution(e[0]),Be=toSize(this.getTileSize(e[0]),this.tmpSize_);return[Te[0]+(e[1]+.5)*Be[0]*ke,Te[1]-(e[2]+.5)*Be[1]*ke]}getTileCoordExtent(e,Te){const ke=this.getOrigin(e[0]),Be=this.getResolution(e[0]),Ue=toSize(this.getTileSize(e[0]),this.tmpSize_),He=ke[0]+e[1]*Ue[0]*Be,We=ke[1]-(e[2]+1)*Ue[1]*Be,Cn=He+Ue[0]*Be,En=We+Ue[1]*Be;return createOrUpdate$2(He,We,Cn,En,Te)}getTileCoordForCoordAndResolution(e,Te,ke){return this.getTileCoordForXYAndResolution_(e[0],e[1],Te,!1,ke)}getTileCoordForXYAndResolution_(e,Te,ke,Be,Ue){const He=this.getZForResolution(ke),We=ke/this.getResolution(He),Cn=this.getOrigin(He),En=toSize(this.getTileSize(He),this.tmpSize_);let An=We*(e-Cn[0])/ke/En[0],Sn=We*(Cn[1]-Te)/ke/En[1];return Be?(An=ceil(An,DECIMALS$1)-1,Sn=ceil(Sn,DECIMALS$1)-1):(An=floor(An,DECIMALS$1),Sn=floor(Sn,DECIMALS$1)),createOrUpdate(He,An,Sn,Ue)}getTileCoordForXYAndZ_(e,Te,ke,Be,Ue){const He=this.getOrigin(ke),We=this.getResolution(ke),Cn=toSize(this.getTileSize(ke),this.tmpSize_);let En=(e-He[0])/We/Cn[0],An=(He[1]-Te)/We/Cn[1];return Be?(En=ceil(En,DECIMALS$1)-1,An=ceil(An,DECIMALS$1)-1):(En=floor(En,DECIMALS$1),An=floor(An,DECIMALS$1)),createOrUpdate(ke,En,An,Ue)}getTileCoordForCoordAndZ(e,Te,ke){return this.getTileCoordForXYAndZ_(e[0],e[1],Te,!1,ke)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,Te){const ke=linearFindNearest(this.resolutions_,e,Te||0);return clamp$1(ke,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,Te){return intersectsLinearRing(Te,0,Te.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const Te=this.resolutions_.length,ke=new Array(Te);for(let Be=this.minZoom;Be<Te;++Be)ke[Be]=this.getTileRangeForExtentAndZ(e,Be);this.fullTileRanges_=ke}}class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function getForProjection(Oe){let e=Oe.getDefaultTileGrid();return e||(e=createForProjection(Oe),Oe.setDefaultTileGrid(e)),e}function wrapX(Oe,e,Te){const ke=e[0],Be=Oe.getTileCoordCenter(e),Ue=extentFromProjection(Te);if(!containsCoordinate(Ue,Be)){const He=getWidth(Ue),We=Math.ceil((Ue[0]-Be[0])/He);return Be[0]+=He*We,Oe.getTileCoordForCoordAndZ(Be,ke)}return e}function createForExtent(Oe,e,Te,ke){ke=ke!==void 0?ke:"top-left";const Be=resolutionsFromExtent(Oe,e,Te);return new TileGrid({extent:Oe,origin:getCorner(Oe,ke),resolutions:Be,tileSize:Te})}function createXYZ(Oe){const e=Oe||{},Te=e.extent||get$3("EPSG:3857").getExtent(),ke={extent:Te,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(Te,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(ke)}function resolutionsFromExtent(Oe,e,Te,ke){e=e!==void 0?e:DEFAULT_MAX_ZOOM,Te=toSize(Te!==void 0?Te:DEFAULT_TILE_SIZE);const Be=getHeight(Oe),Ue=getWidth(Oe);ke=ke>0?ke:Math.max(Ue/Te[0],Be/Te[1]);const He=e+1,We=new Array(He);for(let Cn=0;Cn<He;++Cn)We[Cn]=ke/Math.pow(2,Cn);return We}function createForProjection(Oe,e,Te,ke){const Be=extentFromProjection(Oe);return createForExtent(Be,e,Te,ke)}function extentFromProjection(Oe){Oe=get$3(Oe);let e=Oe.getExtent();if(!e){const Te=180*METERS_PER_UNIT$1.degrees/Oe.getMetersPerUnit();e=createOrUpdate$2(-Te,-Te,Te,Te)}return e}function appendParams(Oe,e){const Te=[];Object.keys(e).forEach(function(Be){e[Be]!==null&&e[Be]!==void 0&&Te.push(Be+"="+encodeURIComponent(e[Be]))});const ke=Te.join("&");return Oe=Oe.replace(/[?&]$/,""),Oe+=Oe.includes("?")?"&":"?",Oe+ke}const zRegEx=/\{z\}/g,xRegEx=/\{x\}/g,yRegEx=/\{y\}/g,dashYRegEx=/\{-y\}/g;function renderXYZTemplate(Oe,e,Te,ke,Be){return Oe.replace(zRegEx,e.toString()).replace(xRegEx,Te.toString()).replace(yRegEx,ke.toString()).replace(dashYRegEx,function(){if(Be===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(Be-ke).toString()})}function expandUrl(Oe){const e=[];let Te=/\{([a-z])-([a-z])\}/.exec(Oe);if(Te){const ke=Te[1].charCodeAt(0),Be=Te[2].charCodeAt(0);let Ue;for(Ue=ke;Ue<=Be;++Ue)e.push(Oe.replace(Te[0],String.fromCharCode(Ue)));return e}if(Te=/\{(\d+)-(\d+)\}/.exec(Oe),Te){const ke=parseInt(Te[2],10);for(let Be=parseInt(Te[1],10);Be<=ke;Be++)e.push(Oe.replace(Te[0],Be.toString()));return e}return e.push(Oe),e}function createFromTemplate(Oe,e){return function(Te,ke,Be){if(!Te)return;let Ue;const He=Te[0];if(e){const We=e.getFullTileRange(He);We&&(Ue=We.getHeight()-1)}return renderXYZTemplate(Oe,He,Te[1],Te[2],Ue)}}function createFromTemplates(Oe,e){const Te=Oe.length,ke=new Array(Te);for(let Be=0;Be<Te;++Be)ke[Be]=createFromTemplate(Oe[Be],e);return createFromTileUrlFunctions(ke)}function createFromTileUrlFunctions(Oe){return Oe.length===1?Oe[0]:function(e,Te,ke){if(!e)return;const Be=hash(e),Ue=modulo(Be,Oe.length);return Oe[Ue](e,Te,ke)}}class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const Te=this;this.viewPromise_=new Promise(function(ke,Be){Te.viewResolver=ke,Te.viewRejector=Be})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(Oe){return Oe?typeof Oe=="function"?Oe:(Array.isArray(Oe)||(Oe=[Oe]),e=>Oe):null}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const Te=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),Te),this.tmpSize=[0,0],this.key_=e.key||getUid(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const Te=e?this.getTileGridForProjection(e):this.tileGrid;return Te?Te.getResolutions():null}getTile(e,Te,ke,Be,Ue){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,Te,ke){const Be=this.getTileGridForProjection(ke),Ue=this.getTilePixelRatio(Te),He=toSize(Be.getTileSize(e),this.tmpSize);return Ue==1?He:scale$2(He,Ue,this.tmpSize)}getTileCoordForTileUrlFunction(e,Te){const ke=Te!==void 0?Te:this.getProjection(),Be=Te!==void 0?this.getTileGridForProjection(ke):this.tileGrid||this.getTileGridForProjection(ke);return this.getWrapX()&&ke.isGlobal()&&(e=wrapX(Be,e,ke)),withinExtentAndZ(e,Be)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class TileSourceEvent extends BaseEvent{constructor(e,Te){super(e),this.tile=Te}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const Te=e.target,ke=getUid(Te),Be=Te.getState();let Ue;Be==TileState.LOADING?(this.tileLoadingKeys_[ke]=!0,Ue=TileEventType.TILELOADSTART):ke in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[ke],Ue=Be==TileState.ERROR?TileEventType.TILELOADERROR:Be==TileState.LOADED?TileEventType.TILELOADEND:void 0),Ue!=null&&this.dispatchEvent(new TileSourceEvent(Ue,Te))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,Te){this.tileUrlFunction=e,typeof Te<"u"?this.setKey(Te):this.changed()}setUrl(e){const Te=expandUrl(e);this.urls=Te,this.setUrls(Te)}setUrls(e){this.urls=e;const Te=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),Te):this.setKey(Te)}tileUrlFunction(e,Te,ke){}}class VectorTile extends UrlTile{constructor(e){const Te=e.projection||"EPSG:3857",ke=e.extent||extentFromProjection(Te),Be=e.tileGrid||createXYZ({extent:ke,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:Te,state:e.state,tileGrid:Be,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,Te,ke){if(ke.getState()===TileState.IDLE){ke.setState(TileState.LOADING);const Be=ke.wrappedTileCoord,Ue=this.getTileGridForProjection(Te),He=Ue.getTileCoordExtent(Be),We=Be[0],Cn=Ue.getResolution(We);buffer(He,-Cn,He);const En=this.tileGrid,An=En.getExtent();An&&getIntersection(He,An,He);const Sn=En.getZForResolution(Cn,this.zDirection);En.forEachTileCoord(He,Sn,Tn=>{const Ln=this.tileUrlFunction(Tn,e,Te);this.sourceTiles_[Ln]||(this.sourceTiles_[Ln]=new this.tileClass(Tn,Ln?TileState.IDLE:TileState.EMPTY,Ln,this.format_,this.tileLoadFunction));const Bn=this.sourceTiles_[Ln];ke.sourceTiles.push(Bn),this.tileKeysBySourceTileUrl_[Ln]||(this.tileKeysBySourceTileUrl_[Ln]=[]),this.tileKeysBySourceTileUrl_[Ln].push(ke.getKey());const ei=Bn.getState();if(ei<TileState.LOADED){const ti=ni=>{this.handleTileChange(ni);const ri=Bn.getState();if(ri===TileState.LOADED||ri===TileState.ERROR){const si=Bn.getKey();si in ke.errorTileKeys?Bn.getState()===TileState.LOADED&&delete ke.errorTileKeys[si]:ke.loadingSourceTiles--,ri===TileState.ERROR?ke.errorTileKeys[si]=!0:Bn.removeEventListener(EventType.CHANGE,ti),ke.loadingSourceTiles===0&&ke.setState(isEmpty$1(ke.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};Bn.addEventListener(EventType.CHANGE,ti),ke.loadingSourceTiles++}ei===TileState.IDLE&&(Bn.extent=En.getTileCoordExtent(Tn),Bn.projection=Te,Bn.resolution=En.getResolution(Tn[0]),Bn.load())}),ke.loadingSourceTiles||ke.setState(ke.sourceTiles.some(Tn=>Tn.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return ke.sourceTiles}removeSourceTiles(e){const Te=e.getKey(),ke=e.sourceTiles;for(let Be=0,Ue=ke.length;Be<Ue;++Be){const He=ke[Be].getTileUrl();if(!this.tileKeysBySourceTileUrl_[He])return;const We=this.tileKeysBySourceTileUrl_[He].indexOf(Te);We!==-1&&(this.tileKeysBySourceTileUrl_[He].splice(We,1),this.tileKeysBySourceTileUrl_[He].length===0&&(delete this.tileKeysBySourceTileUrl_[He],delete this.sourceTiles_[He]))}}getTile(e,Te,ke,Be,Ue){const He=[e,Te,ke];let We=this.getTileCoordForTileUrlFunction(He,Ue);const Cn=this.getTileGrid().getExtent(),En=this.getTileGridForProjection(Ue);if(We&&Cn){const Tn=En.getTileCoordExtent(We);buffer(Tn,-En.getResolution(e),Tn),intersects$1(Cn,Tn)||(We=null)}let An=!0;if(We!==null){const Tn=this.tileGrid,Ln=En.getResolution(e),Bn=Tn.getZForResolution(Ln,1),ei=En.getTileCoordExtent(We);buffer(ei,-Ln,ei),Tn.forEachTileCoord(ei,Bn,ti=>{An=An&&!this.tileUrlFunction(ti,Be,Ue)})}const Sn=new VectorRenderTile(He,An?TileState.EMPTY:TileState.IDLE,We,this.getSourceTiles.bind(this,Be,Ue),this.removeSourceTiles.bind(this));return Sn.key=this.getKey(),Sn}getTileGridForProjection(e){const Te=e.getCode();let ke=this.tileGrids_[Te];if(!ke){const Be=this.getProjection();assert(Be===null||equivalent$1(Be,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const Ue=this.tileGrid,He=Ue.getResolutions().slice(),We=He.map(function(An,Sn){return Ue.getOrigin(Sn)}),Cn=He.map(function(An,Sn){return Ue.getTileSize(Sn)}),En=DEFAULT_MAX_ZOOM+1;for(let An=He.length;An<En;++An)He.push(He[An-1]/2),We.push(We[An-1]),Cn.push(Cn[An-1]);ke=new TileGrid({extent:Ue.getExtent(),origins:We,resolutions:He,tileSizes:Cn}),this.tileGrids_[Te]=ke}return ke}getTilePixelRatio(e){return e}getTilePixelSize(e,Te,ke){const Be=this.getTileGridForProjection(ke),Ue=toSize(Be.getTileSize(e),this.tmpSize);return[Math.round(Ue[0]*Te),Math.round(Ue[1]*Te)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function defaultLoadFunction(Oe,e){Oe.setLoader(function(Te,ke,Be){loadFeaturesXhr(e,Oe.getFormat(),Te,ke,Be,Oe.onLoad.bind(Oe),Oe.onError.bind(Oe))})}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$2={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,Te,ke){super(e),this.element=Te,this.index=ke}}class Collection extends BaseObject{constructor(e,Te){if(super(),this.on,this.once,this.un,Te=Te||{},this.unique_=!!Te.unique,this.array_=e||[],this.unique_)for(let ke=0,Be=this.array_.length;ke<Be;++ke)this.assertUnique_(this.array_[ke],ke);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let Te=0,ke=e.length;Te<ke;++Te)this.push(e[Te]);return this}forEach(e){const Te=this.array_;for(let ke=0,Be=Te.length;ke<Be;++ke)e(Te[ke],ke,Te)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$2.LENGTH)}insertAt(e,Te){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(Te),this.array_.splice(e,0,Te),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,Te,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const Te=this.getLength();return this.insertAt(Te,e),this.getLength()}remove(e){const Te=this.array_;for(let ke=0,Be=Te.length;ke<Be;++ke)if(Te[ke]===e)return this.removeAt(ke)}removeAt(e){if(e<0||e>=this.getLength())return;const Te=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,Te,e)),Te}setAt(e,Te){const ke=this.getLength();if(e>=ke){this.insertAt(e,Te);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(Te,e);const Be=this.array_[e];this.array_[e]=Te,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,Be,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,Te,e))}updateLength_(){this.set(Property$2.LENGTH,this.array_.length)}assertUnique_(e,Te){for(let ke=0,Be=this.array_.length;ke<Be;++ke)if(this.array_[ke]===e&&ke!==Te)throw new Error("Duplicate item added to a unique collection")}}function all$1(Oe,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(Oe,e){return[Oe]}function tile(Oe){return function(e,Te,ke){const Be=Oe.getZForResolution(fromUserResolution(Te)),Ue=Oe.getTileRangeForExtentAndZ(fromUserExtent(e),Be),He=[],We=[Be,0,0];for(We[1]=Ue.minX;We[1]<=Ue.maxX;++We[1])for(We[2]=Ue.minY;We[2]<=Ue.maxY;++We[2])He.push(toUserExtent(Oe.getTileCoordExtent(We)));return He}}class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const Te=e;this.setGeometry(Te)}else{const Te=e;this.setProperties(Te)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const Te=this.getGeometry();Te&&e.setGeometry(Te.clone());const ke=this.getStyle();return ke&&e.setStyle(ke),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(Oe){if(typeof Oe=="function")return Oe;let e;return Array.isArray(Oe)?e=Oe:(assert(typeof Oe.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[Oe]),function(){return e}}function linearRingss$1(Oe,e,Te,ke){const Be=[];let Ue=createEmpty();for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He];Ue=createOrUpdateFromFlatCoordinates(Oe,e,Cn[0],ke),Be.push((Ue[0]+Ue[2])/2,(Ue[1]+Ue[3])/2),e=Cn[Cn.length-1]}return Be}function getInteriorPointOfArray(Oe,e,Te,ke,Be,Ue,He){let We,Cn,En,An,Sn,Tn,Ln;const Bn=Be[Ue+1],ei=[];for(let ri=0,si=Te.length;ri<si;++ri){const ai=Te[ri];for(An=Oe[ai-ke],Tn=Oe[ai-ke+1],We=e;We<ai;We+=ke)Sn=Oe[We],Ln=Oe[We+1],(Bn<=Tn&&Ln<=Bn||Tn<=Bn&&Bn<=Ln)&&(En=(Bn-Tn)/(Ln-Tn)*(Sn-An)+An,ei.push(En)),An=Sn,Tn=Ln}let ti=NaN,ni=-1/0;for(ei.sort(ascending),An=ei[0],We=1,Cn=ei.length;We<Cn;++We){Sn=ei[We];const ri=Math.abs(Sn-An);ri>ni&&(En=(An+Sn)/2,linearRingsContainsXY(Oe,e,Te,ke,En,Bn)&&(ti=En,ni=ri)),An=Sn}return isNaN(ti)&&(ti=Be[Ue]),He?(He.push(ti,Bn,ni),He):[ti,Bn,ni]}function getInteriorPointsOfMultiArray(Oe,e,Te,ke,Be){let Ue=[];for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He];Ue=getInteriorPointOfArray(Oe,e,Cn,ke,Be,2*He,Ue),e=Cn[Cn.length-1]}return Ue}function interpolatePoint(Oe,e,Te,ke,Be,Ue,He){let We,Cn;const En=(Te-e)/ke;if(En===1)We=e;else if(En===2)We=e,Cn=Be;else if(En!==0){let An=Oe[e],Sn=Oe[e+1],Tn=0;const Ln=[0];for(let ti=e+ke;ti<Te;ti+=ke){const ni=Oe[ti],ri=Oe[ti+1];Tn+=Math.sqrt((ni-An)*(ni-An)+(ri-Sn)*(ri-Sn)),Ln.push(Tn),An=ni,Sn=ri}const Bn=Be*Tn,ei=binarySearch$1(Ln,Bn);ei<0?(Cn=(Bn-Ln[-ei-2])/(Ln[-ei-1]-Ln[-ei-2]),We=e+(-ei-2)*ke):We=e+ei*ke}He=He>1?He:2,Ue=Ue||new Array(He);for(let An=0;An<He;++An)Ue[An]=We===void 0?NaN:Cn===void 0?Oe[We+An]:lerp(Oe[We+An],Oe[We+ke+An],Cn);return Ue}function lineStringCoordinateAtM(Oe,e,Te,ke,Be,Ue){if(Te==e)return null;let He;if(Be<Oe[e+ke-1])return Ue?(He=Oe.slice(e,e+ke),He[ke-1]=Be,He):null;if(Oe[Te-1]<Be)return Ue?(He=Oe.slice(Te-ke,Te),He[ke-1]=Be,He):null;if(Be==Oe[e+ke-1])return Oe.slice(e,e+ke);let We=e/ke,Cn=Te/ke;for(;We<Cn;){const Tn=We+Cn>>1;Be<Oe[(Tn+1)*ke-1]?Cn=Tn:We=Tn+1}const En=Oe[We*ke-1];if(Be==En)return Oe.slice((We-1)*ke,(We-1)*ke+ke);const An=Oe[(We+1)*ke-1],Sn=(Be-En)/(An-En);He=[];for(let Tn=0;Tn<ke-1;++Tn)He.push(lerp(Oe[(We-1)*ke+Tn],Oe[We*ke+Tn],Sn));return He.push(Be),He}function lineStringsCoordinateAtM(Oe,e,Te,ke,Be,Ue,He){if(He)return lineStringCoordinateAtM(Oe,e,Te[Te.length-1],ke,Be,Ue);let We;if(Be<Oe[ke-1])return Ue?(We=Oe.slice(0,ke),We[ke-1]=Be,We):null;if(Oe[Oe.length-1]<Be)return Ue?(We=Oe.slice(Oe.length-ke),We[ke-1]=Be,We):null;for(let Cn=0,En=Te.length;Cn<En;++Cn){const An=Te[Cn];if(e!=An){if(Be<Oe[e+ke-1])return null;if(Be<=Oe[An-1])return lineStringCoordinateAtM(Oe,e,An,ke,Be,!1);e=An}}return null}function coordinates(Oe,e,Te,ke){for(;e<Te-ke;){for(let Be=0;Be<ke;++Be){const Ue=Oe[e+Be];Oe[e+Be]=Oe[Te-ke+Be],Oe[Te-ke+Be]=Ue}e+=ke,Te-=ke}}function linearRingIsClockwise(Oe,e,Te,ke){let Be=0,Ue=Oe[Te-ke],He=Oe[Te-ke+1];for(;e<Te;e+=ke){const We=Oe[e],Cn=Oe[e+1];Be+=(We-Ue)*(Cn+He),Ue=We,He=Cn}return Be===0?void 0:Be>0}function linearRingsAreOriented(Oe,e,Te,ke,Be){Be=Be!==void 0?Be:!1;for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue],Cn=linearRingIsClockwise(Oe,e,We,ke);if(Ue===0){if(Be&&Cn||!Be&&!Cn)return!1}else if(Be&&!Cn||!Be&&Cn)return!1;e=We}return!0}function linearRingssAreOriented(Oe,e,Te,ke,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];if(!linearRingsAreOriented(Oe,e,We,ke,Be))return!1;We.length&&(e=We[We.length-1])}return!0}function orientLinearRings(Oe,e,Te,ke,Be){Be=Be!==void 0?Be:!1;for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue],Cn=linearRingIsClockwise(Oe,e,We,ke);(Ue===0?Be&&Cn||!Be&&!Cn:Be&&!Cn||!Be&&Cn)&&coordinates(Oe,e,We,ke),e=We}return e}function orientLinearRingsArray(Oe,e,Te,ke,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue)e=orientLinearRings(Oe,e,Te[Ue],ke,Be);return e}function inflateEnds(Oe,e){const Te=[];let ke=0,Be=0,Ue;for(let He=0,We=e.length;He<We;++He){const Cn=e[He],En=linearRingIsClockwise(Oe,ke,Cn,2);if(Ue===void 0&&(Ue=En),En===Ue)Te.push(e.slice(Be,He+1));else{if(Te.length===0)continue;Te[Te.length-1].push(e[Be])}Be=He+1,ke=Cn}return Te}function douglasPeucker(Oe,e,Te,ke,Be,Ue,He){const We=(Te-e)/ke;if(We<3){for(;e<Te;e+=ke)Ue[He++]=Oe[e],Ue[He++]=Oe[e+1];return He}const Cn=new Array(We);Cn[0]=1,Cn[We-1]=1;const En=[e,Te-ke];let An=0;for(;En.length>0;){const Sn=En.pop(),Tn=En.pop();let Ln=0;const Bn=Oe[Tn],ei=Oe[Tn+1],ti=Oe[Sn],ni=Oe[Sn+1];for(let ri=Tn+ke;ri<Sn;ri+=ke){const si=Oe[ri],ai=Oe[ri+1],li=squaredSegmentDistance(si,ai,Bn,ei,ti,ni);li>Ln&&(An=ri,Ln=li)}Ln>Be&&(Cn[(An-e)/ke]=1,Tn+ke<An&&En.push(Tn,An),An+ke<Sn&&En.push(An,Sn))}for(let Sn=0;Sn<We;++Sn)Cn[Sn]&&(Ue[He++]=Oe[e+Sn*ke],Ue[He++]=Oe[e+Sn*ke+1]);return He}function douglasPeuckerArray(Oe,e,Te,ke,Be,Ue,He,We){for(let Cn=0,En=Te.length;Cn<En;++Cn){const An=Te[Cn];He=douglasPeucker(Oe,e,An,ke,Be,Ue,He),We.push(He),e=An}return He}function snap(Oe,e){return e*Math.round(Oe/e)}function quantize(Oe,e,Te,ke,Be,Ue,He){if(e==Te)return He;let We=snap(Oe[e],Be),Cn=snap(Oe[e+1],Be);e+=ke,Ue[He++]=We,Ue[He++]=Cn;let En,An;do if(En=snap(Oe[e],Be),An=snap(Oe[e+1],Be),e+=ke,e==Te)return Ue[He++]=En,Ue[He++]=An,He;while(En==We&&An==Cn);for(;e<Te;){const Sn=snap(Oe[e],Be),Tn=snap(Oe[e+1],Be);if(e+=ke,Sn==En&&Tn==An)continue;const Ln=En-We,Bn=An-Cn,ei=Sn-We,ti=Tn-Cn;if(Ln*ti==Bn*ei&&(Ln<0&&ei<Ln||Ln==ei||Ln>0&&ei>Ln)&&(Bn<0&&ti<Bn||Bn==ti||Bn>0&&ti>Bn)){En=Sn,An=Tn;continue}Ue[He++]=En,Ue[He++]=An,We=En,Cn=An,En=Sn,An=Tn}return Ue[He++]=En,Ue[He++]=An,He}function quantizeArray(Oe,e,Te,ke,Be,Ue,He,We){for(let Cn=0,En=Te.length;Cn<En;++Cn){const An=Te[Cn];He=quantize(Oe,e,An,ke,Be,Ue,He),We.push(He),e=An}return He}function quantizeMultiArray(Oe,e,Te,ke,Be,Ue,He,We){for(let Cn=0,En=Te.length;Cn<En;++Cn){const An=Te[Cn],Sn=[];He=quantizeArray(Oe,e,An,ke,Be,Ue,He,Sn),We.push(Sn),e=An[An.length-1]}return He}function transform2D(Oe,e,Te,ke,Be,Ue,He){Ue=Ue||[],He=He||2;let We=0;for(let Cn=e;Cn<Te;Cn+=ke){const En=Oe[Cn],An=Oe[Cn+1];Ue[We++]=Be[0]*En+Be[2]*An+Be[4],Ue[We++]=Be[1]*En+Be[3]*An+Be[5];for(let Sn=2;Sn<He;Sn++)Ue[We++]=Oe[Cn+Sn]}return Ue&&Ue.length!=We&&(Ue.length=We),Ue}function rotate(Oe,e,Te,ke,Be,Ue,He){He=He||[];const We=Math.cos(Be),Cn=Math.sin(Be),En=Ue[0],An=Ue[1];let Sn=0;for(let Tn=e;Tn<Te;Tn+=ke){const Ln=Oe[Tn]-En,Bn=Oe[Tn+1]-An;He[Sn++]=En+Ln*We-Bn*Cn,He[Sn++]=An+Ln*Cn+Bn*We;for(let ei=Tn+2;ei<Tn+ke;++ei)He[Sn++]=Oe[ei]}return He&&He.length!=Sn&&(He.length=Sn),He}function scale$1(Oe,e,Te,ke,Be,Ue,He,We){We=We||[];const Cn=He[0],En=He[1];let An=0;for(let Sn=e;Sn<Te;Sn+=ke){const Tn=Oe[Sn]-Cn,Ln=Oe[Sn+1]-En;We[An++]=Cn+Be*Tn,We[An++]=En+Ue*Ln;for(let Bn=Sn+2;Bn<Sn+ke;++Bn)We[An++]=Oe[Bn]}return We&&We.length!=An&&(We.length=An),We}function translate$1(Oe,e,Te,ke,Be,Ue,He){He=He||[];let We=0;for(let Cn=e;Cn<Te;Cn+=ke){He[We++]=Oe[Cn]+Be,He[We++]=Oe[Cn+1]+Ue;for(let En=Cn+2;En<Cn+ke;++En)He[We++]=Oe[En]}return He&&He.length!=We&&(He.length=We),He}const tmp_=new Array(6);function create(){return[1,0,0,1,0,0]}function reset(Oe){return set(Oe,1,0,0,1,0,0)}function multiply(Oe,e){const Te=Oe[0],ke=Oe[1],Be=Oe[2],Ue=Oe[3],He=Oe[4],We=Oe[5],Cn=e[0],En=e[1],An=e[2],Sn=e[3],Tn=e[4],Ln=e[5];return Oe[0]=Te*Cn+Be*En,Oe[1]=ke*Cn+Ue*En,Oe[2]=Te*An+Be*Sn,Oe[3]=ke*An+Ue*Sn,Oe[4]=Te*Tn+Be*Ln+He,Oe[5]=ke*Tn+Ue*Ln+We,Oe}function set(Oe,e,Te,ke,Be,Ue,He){return Oe[0]=e,Oe[1]=Te,Oe[2]=ke,Oe[3]=Be,Oe[4]=Ue,Oe[5]=He,Oe}function setFromArray(Oe,e){return Oe[0]=e[0],Oe[1]=e[1],Oe[2]=e[2],Oe[3]=e[3],Oe[4]=e[4],Oe[5]=e[5],Oe}function apply(Oe,e){const Te=e[0],ke=e[1];return e[0]=Oe[0]*Te+Oe[2]*ke+Oe[4],e[1]=Oe[1]*Te+Oe[3]*ke+Oe[5],e}function scale(Oe,e,Te){return multiply(Oe,set(tmp_,e,0,0,Te,0,0))}function translate(Oe,e,Te){return multiply(Oe,set(tmp_,1,0,0,1,e,Te))}function compose(Oe,e,Te,ke,Be,Ue,He,We){const Cn=Math.sin(Ue),En=Math.cos(Ue);return Oe[0]=ke*En,Oe[1]=Be*Cn,Oe[2]=-ke*Cn,Oe[3]=Be*En,Oe[4]=He*ke*En-We*ke*Cn+e,Oe[5]=He*Be*Cn+We*Be*En+Te,Oe}function makeInverse(Oe,e){const Te=determinant(e);assert(Te!==0,"Transformation matrix cannot be inverted");const ke=e[0],Be=e[1],Ue=e[2],He=e[3],We=e[4],Cn=e[5];return Oe[0]=He/Te,Oe[1]=-Be/Te,Oe[2]=-Ue/Te,Oe[3]=ke/Te,Oe[4]=(Ue*Cn-He*We)/Te,Oe[5]=-(ke*Cn-Be*We)/Te,Oe}function determinant(Oe){return Oe[0]*Oe[3]-Oe[1]*Oe[2]}const matrixPrecision=[1e5,1e5,1e5,1e5,2,2];function toString$1(Oe){return"matrix("+Oe.join(", ")+")"}function fromString$1(Oe){return Oe.substring(7,Oe.length-1).split(",").map(parseFloat)}function equivalent(Oe,e){const Te=fromString$1(Oe),ke=fromString$1(e);for(let Be=0;Be<6;++Be)if(Math.round((Te[Be]-ke[Be])*matrixPrecision[Be])!==0)return!1;return!0}const tmpTransform$1=create(),tmpPoint=[NaN,NaN];class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,Te,ke)=>{if(!ke)return this.getSimplifiedGeometry(Te);const Be=this.clone();return Be.applyTransform(ke),Be.getSimplifiedGeometry(Te)})}simplifyTransformed(e,Te){return this.simplifyTransformedInternal(this.getRevision(),e,Te)}clone(){return abstract()}closestPointXY(e,Te,ke,Be){return abstract()}containsXY(e,Te){return this.closestPointXY(e,Te,tmpPoint,Number.MIN_VALUE)===0}getClosestPoint(e,Te){return Te=Te||[NaN,NaN],this.closestPointXY(e[0],e[1],Te,1/0),Te}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const Te=this.computeExtent(this.extent_);(isNaN(Te[0])||isNaN(Te[1]))&&createOrUpdateEmpty(Te),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,Te){abstract()}scale(e,Te,ke){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,Te){abstract()}transform(e,Te){const ke=get$3(e),Be=ke.getUnits()=="tile-pixels"?function(Ue,He,We){const Cn=ke.getExtent(),En=ke.getWorldExtent(),An=getHeight(En)/getHeight(Cn);compose(tmpTransform$1,En[0],En[3],An,-An,0,0,0);const Sn=transform2D(Ue,0,Ue.length,We,tmpTransform$1,He),Tn=getTransform(ke,Te);return Tn?Tn(Sn,Sn,We):Sn}:getTransform(ke,Te);return this.applyTransform(Be),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const Te=this.getSimplifiedGeometryInternal(e);return Te.getFlatCoordinates().length<this.flatCoordinates.length?Te:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,Te){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=Te}setCoordinates(e,Te){abstract()}setLayout(e,Te,ke){let Be;if(e)Be=getStrideForLayout(e);else{for(let Ue=0;Ue<ke;++Ue){if(Te.length===0){this.layout="XY",this.stride=2;return}Te=Te[0]}Be=Te.length,e=getLayoutForStride(Be)}this.layout=e,this.stride=Be}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,Te){const ke=this.getFlatCoordinates();if(ke){const Be=this.getStride();rotate(ke,0,ke.length,Be,e,Te,ke),this.changed()}}scale(e,Te,ke){Te===void 0&&(Te=e),ke||(ke=getCenter(this.getExtent()));const Be=this.getFlatCoordinates();if(Be){const Ue=this.getStride();scale$1(Be,0,Be.length,Ue,e,Te,ke,Be),this.changed()}}translate(e,Te){const ke=this.getFlatCoordinates();if(ke){const Be=this.getStride();translate$1(ke,0,ke.length,Be,e,Te,ke),this.changed()}}}function getLayoutForStride(Oe){let e;return Oe==2?e="XY":Oe==3?e="XYZ":Oe==4&&(e="XYZM"),e}function getStrideForLayout(Oe){let e;return Oe=="XY"?e=2:Oe=="XYZ"||Oe=="XYM"?e=3:Oe=="XYZM"&&(e=4),e}function transformGeom2D(Oe,e,Te){const ke=Oe.getFlatCoordinates();if(!ke)return null;const Be=Oe.getStride();return transform2D(ke,0,ke.length,Be,e,Te)}function deflateCoordinate(Oe,e,Te,ke){for(let Be=0,Ue=Te.length;Be<Ue;++Be)Oe[e++]=Te[Be];return e}function deflateCoordinates(Oe,e,Te,ke){for(let Be=0,Ue=Te.length;Be<Ue;++Be){const He=Te[Be];for(let We=0;We<ke;++We)Oe[e++]=He[We]}return e}function deflateCoordinatesArray(Oe,e,Te,ke,Be){Be=Be||[];let Ue=0;for(let He=0,We=Te.length;He<We;++He){const Cn=deflateCoordinates(Oe,e,Te[He],ke);Be[Ue++]=Cn,e=Cn}return Be.length=Ue,Be}function deflateMultiCoordinatesArray(Oe,e,Te,ke,Be){Be=Be||[];let Ue=0;for(let He=0,We=Te.length;He<We;++He){const Cn=deflateCoordinatesArray(Oe,e,Te[He],ke,Be[Ue]);Cn.length===0&&(Cn[0]=e),Be[Ue++]=Cn,e=Cn[Cn.length-1]}return Be.length=Ue,Be}class Circle extends SimpleGeometry{constructor(e,Te,ke){super(),ke!==void 0&&Te===void 0?this.setFlatCoordinates(ke,e):(Te=Te||0,this.setCenterAndRadius(e,Te,ke))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,Te,ke,Be){const Ue=this.flatCoordinates,He=e-Ue[0],We=Te-Ue[1],Cn=He*He+We*We;if(Cn<Be){if(Cn===0)for(let En=0;En<this.stride;++En)ke[En]=Ue[En];else{const En=this.getRadius()/Math.sqrt(Cn);ke[0]=Ue[0]+En*He,ke[1]=Ue[1]+En*We;for(let An=2;An<this.stride;++An)ke[An]=Ue[An]}return ke.length=this.stride,Cn}return Be}containsXY(e,Te){const ke=this.flatCoordinates,Be=e-ke[0],Ue=Te-ke[1];return Be*Be+Ue*Ue<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const Te=this.flatCoordinates,ke=Te[this.stride]-Te[0];return createOrUpdate$2(Te[0]-ke,Te[1]-ke,Te[0]+ke,Te[1]+ke,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],Te=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+Te*Te}getType(){return"Circle"}intersectsExtent(e){const Te=this.getExtent();if(intersects$1(e,Te)){const ke=this.getCenter();return e[0]<=ke[0]&&e[2]>=ke[0]||e[1]<=ke[1]&&e[3]>=ke[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const Te=this.stride,ke=this.flatCoordinates[Te]-this.flatCoordinates[0],Be=e.slice();Be[Te]=Be[0]+ke;for(let Ue=1;Ue<Te;++Ue)Be[Te+Ue]=e[Ue];this.setFlatCoordinates(this.layout,Be),this.changed()}setCenterAndRadius(e,Te,ke){this.setLayout(ke,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const Be=this.flatCoordinates;let Ue=deflateCoordinate(Be,0,e,this.stride);Be[Ue++]=Be[0]+Te;for(let He=1,We=this.stride;He<We;++He)Be[Ue++]=Be[He];Be.length=Ue,this.changed()}getCoordinates(){return null}setCoordinates(e,Te){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,Te){const ke=this.getCenter(),Be=this.getStride();this.setCenter(rotate(ke,0,ke.length,Be,e,Te,ke)),this.changed()}}Circle.prototype.transform;class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let Te=0,ke=e.length;Te<ke;++Te)this.changeEventsKeys_.push(listen(e[Te],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(cloneGeometries(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,Te,ke,Be){if(Be<closestSquaredDistanceXY(this.getExtent(),e,Te))return Be;const Ue=this.geometries_;for(let He=0,We=Ue.length;He<We;++He)Be=Ue[He].closestPointXY(e,Te,ke,Be);return Be}containsXY(e,Te){const ke=this.geometries_;for(let Be=0,Ue=ke.length;Be<Ue;++Be)if(ke[Be].containsXY(e,Te))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const Te=this.geometries_;for(let ke=0,Be=Te.length;ke<Be;++ke)extend$3(e,Te[ke].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const Te=this.geometries_;for(let ke=0,Be=Te.length;ke<Be;++ke)Te[ke].getType()===this.getType()?e=e.concat(Te[ke].getGeometriesArrayRecursive()):e.push(Te[ke]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const Te=[],ke=this.geometries_;let Be=!1;for(let Ue=0,He=ke.length;Ue<He;++Ue){const We=ke[Ue],Cn=We.getSimplifiedGeometry(e);Te.push(Cn),Cn!==We&&(Be=!0)}return Be?new GeometryCollection(Te):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const Te=this.geometries_;for(let ke=0,Be=Te.length;ke<Be;++ke)if(Te[ke].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,Te){const ke=this.geometries_;for(let Be=0,Ue=ke.length;Be<Ue;++Be)ke[Be].rotate(e,Te);this.changed()}scale(e,Te,ke){ke||(ke=getCenter(this.getExtent()));const Be=this.geometries_;for(let Ue=0,He=Be.length;Ue<He;++Ue)Be[Ue].scale(e,Te,ke);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const Te=this.geometries_;for(let ke=0,Be=Te.length;ke<Be;++ke)Te[ke].applyTransform(e);this.changed()}translate(e,Te){const ke=this.geometries_;for(let Be=0,Ue=ke.length;Be<Ue;++Be)ke[Be].translate(e,Te);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(Oe){return Oe.map(e=>e.clone())}function linearRing(Oe,e,Te,ke){let Be=0;const Ue=Oe[Te-ke],He=Oe[Te-ke+1];let We=0,Cn=0;for(;e<Te;e+=ke){const En=Oe[e]-Ue,An=Oe[e+1]-He;Be+=Cn*En-We*An,We=En,Cn=An}return Be/2}function linearRings(Oe,e,Te,ke){let Be=0;for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];Be+=linearRing(Oe,e,We,ke),e=We}return Be}function linearRingss(Oe,e,Te,ke){let Be=0;for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];Be+=linearRings(Oe,e,We,ke),e=We[We.length-1]}return Be}function assignClosest(Oe,e,Te,ke,Be,Ue,He){const We=Oe[e],Cn=Oe[e+1],En=Oe[Te]-We,An=Oe[Te+1]-Cn;let Sn;if(En===0&&An===0)Sn=e;else{const Tn=((Be-We)*En+(Ue-Cn)*An)/(En*En+An*An);if(Tn>1)Sn=Te;else if(Tn>0){for(let Ln=0;Ln<ke;++Ln)He[Ln]=lerp(Oe[e+Ln],Oe[Te+Ln],Tn);He.length=ke;return}else Sn=e}for(let Tn=0;Tn<ke;++Tn)He[Tn]=Oe[Sn+Tn];He.length=ke}function maxSquaredDelta(Oe,e,Te,ke,Be){let Ue=Oe[e],He=Oe[e+1];for(e+=ke;e<Te;e+=ke){const We=Oe[e],Cn=Oe[e+1],En=squaredDistance$1(Ue,He,We,Cn);En>Be&&(Be=En),Ue=We,He=Cn}return Be}function arrayMaxSquaredDelta(Oe,e,Te,ke,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];Be=maxSquaredDelta(Oe,e,We,ke,Be),e=We}return Be}function multiArrayMaxSquaredDelta(Oe,e,Te,ke,Be){for(let Ue=0,He=Te.length;Ue<He;++Ue){const We=Te[Ue];Be=arrayMaxSquaredDelta(Oe,e,We,ke,Be),e=We[We.length-1]}return Be}function assignClosestPoint(Oe,e,Te,ke,Be,Ue,He,We,Cn,En,An){if(e==Te)return En;let Sn,Tn;if(Be===0){if(Tn=squaredDistance$1(He,We,Oe[e],Oe[e+1]),Tn<En){for(Sn=0;Sn<ke;++Sn)Cn[Sn]=Oe[e+Sn];return Cn.length=ke,Tn}return En}An=An||[NaN,NaN];let Ln=e+ke;for(;Ln<Te;)if(assignClosest(Oe,Ln-ke,Ln,ke,He,We,An),Tn=squaredDistance$1(He,We,An[0],An[1]),Tn<En){for(En=Tn,Sn=0;Sn<ke;++Sn)Cn[Sn]=An[Sn];Cn.length=ke,Ln+=ke}else Ln+=ke*Math.max((Math.sqrt(Tn)-Math.sqrt(En))/Be|0,1);if(Ue&&(assignClosest(Oe,Te-ke,e,ke,He,We,An),Tn=squaredDistance$1(He,We,An[0],An[1]),Tn<En)){for(En=Tn,Sn=0;Sn<ke;++Sn)Cn[Sn]=An[Sn];Cn.length=ke}return En}function assignClosestArrayPoint(Oe,e,Te,ke,Be,Ue,He,We,Cn,En,An){An=An||[NaN,NaN];for(let Sn=0,Tn=Te.length;Sn<Tn;++Sn){const Ln=Te[Sn];En=assignClosestPoint(Oe,e,Ln,ke,Be,Ue,He,We,Cn,En,An),e=Ln}return En}function assignClosestMultiArrayPoint(Oe,e,Te,ke,Be,Ue,He,We,Cn,En,An){An=An||[NaN,NaN];for(let Sn=0,Tn=Te.length;Sn<Tn;++Sn){const Ln=Te[Sn];En=assignClosestArrayPoint(Oe,e,Ln,ke,Be,Ue,He,We,Cn,En,An),e=Ln[Ln.length-1]}return En}function inflateCoordinates(Oe,e,Te,ke,Be){Be=Be!==void 0?Be:[];let Ue=0;for(let He=e;He<Te;He+=ke)Be[Ue++]=Oe.slice(He,He+ke);return Be.length=Ue,Be}function inflateCoordinatesArray(Oe,e,Te,ke,Be){Be=Be!==void 0?Be:[];let Ue=0;for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He];Be[Ue++]=inflateCoordinates(Oe,e,Cn,ke,Be[Ue]),e=Cn}return Be.length=Ue,Be}function inflateMultiCoordinatesArray(Oe,e,Te,ke,Be){Be=Be!==void 0?Be:[];let Ue=0;for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He];Be[Ue++]=Cn.length===1&&Cn[0]===e?[]:inflateCoordinatesArray(Oe,e,Cn,ke,Be[Ue]),e=Cn[Cn.length-1]}return Be.length=Ue,Be}class LinearRing extends SimpleGeometry{constructor(e,Te){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,Te!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(Te,e):this.setCoordinates(e,Te)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,Te,ke,Be){return Be<closestSquaredDistanceXY(this.getExtent(),e,Te)?Be:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,Te,ke,Be))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const Te=[];return Te.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,Te,0),new LinearRing(Te,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,Te){this.setLayout(Te,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function lineStringLength(Oe,e,Te,ke){let Be=Oe[e],Ue=Oe[e+1],He=0;for(let We=e+ke;We<Te;We+=ke){const Cn=Oe[We],En=Oe[We+1];He+=Math.sqrt((Cn-Be)*(Cn-Be)+(En-Ue)*(En-Ue)),Be=Cn,Ue=En}return He}class LineString extends SimpleGeometry{constructor(e,Te){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,Te!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(Te,e):this.setCoordinates(e,Te)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,Te,ke,Be){return Be<closestSquaredDistanceXY(this.getExtent(),e,Te)?Be:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,Te,ke,Be))}forEachSegment(e){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,Te){return this.layout!="XYM"&&this.layout!="XYZM"?null:(Te=Te!==void 0?Te:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,Te))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,Te){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,Te,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const Te=[];return Te.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,Te,0),new LineString(Te,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,this.getExtent())}setCoordinates(e,Te){this.setLayout(Te,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,Te,ke){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,Te);else if(Te!==void 0&&ke)this.setFlatCoordinates(Te,e),this.ends_=ke;else{const Be=e,Ue=[],He=[];for(let Cn=0,En=Be.length;Cn<En;++Cn){const An=Be[Cn];extend$4(Ue,An.getFlatCoordinates()),He.push(Ue.length)}const We=Be.length===0?this.getLayout():Be[0].getLayout();this.setFlatCoordinates(We,Ue),this.ends_=He}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,Te,ke,Be){return Be<closestSquaredDistanceXY(this.getExtent(),e,Te)?Be:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,Te,ke,Be))}getCoordinateAtM(e,Te,ke){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(Te=Te!==void 0?Te:!1,ke=ke!==void 0?ke:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,Te,ke))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,Te=this.ends_,ke=this.layout,Be=[];let Ue=0;for(let He=0,We=Te.length;He<We;++He){const Cn=Te[He],En=new LineString(e.slice(Ue,Cn),ke);Be.push(En),Ue=Cn}return Be}getLength(){const e=this.ends_;let Te=0,ke=0;for(let Be=0,Ue=e.length;Be<Ue;++Be)ke+=lineStringLength(this.flatCoordinates,Te,e[Be],this.stride),Te=e[Be];return ke}getFlatMidpoints(){const e=[],Te=this.flatCoordinates;let ke=0;const Be=this.ends_,Ue=this.stride;for(let He=0,We=Be.length;He<We;++He){const Cn=Be[He],En=interpolatePoint(Te,ke,Cn,Ue,.5);extend$4(e,En),ke=Cn}return e}getSimplifiedGeometryInternal(e){const Te=[],ke=[];return Te.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,Te,0,ke),new MultiLineString(Te,"XY",ke)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,Te){this.setLayout(Te,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const ke=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=ke.length===0?0:ke[ke.length-1],this.changed()}}let Point$1=class Bf extends SimpleGeometry{constructor(e,Te){super(),this.setCoordinates(e,Te)}clone(){const e=new Bf(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,Te,ke,Be){const Ue=this.flatCoordinates,He=squaredDistance$1(e,Te,Ue[0],Ue[1]);if(He<Be){const We=this.stride;for(let Cn=0;Cn<We;++Cn)ke[Cn]=Ue[Cn];return ke.length=We,He}return Be}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,Te){this.setLayout(Te,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};class MultiPoint extends SimpleGeometry{constructor(e,Te){super(),Te&&!Array.isArray(e[0])?this.setFlatCoordinates(Te,e):this.setCoordinates(e,Te)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,Te,ke,Be){if(Be<closestSquaredDistanceXY(this.getExtent(),e,Te))return Be;const Ue=this.flatCoordinates,He=this.stride;for(let We=0,Cn=Ue.length;We<Cn;We+=He){const En=squaredDistance$1(e,Te,Ue[We],Ue[We+1]);if(En<Be){Be=En;for(let An=0;An<He;++An)ke[An]=Ue[We+An];ke.length=He}}return Be}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const Te=this.flatCoordinates.length/this.stride;return e<0||Te<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,Te=this.layout,ke=this.stride,Be=[];for(let Ue=0,He=e.length;Ue<He;Ue+=ke){const We=new Point$1(e.slice(Ue,Ue+ke),Te);Be.push(We)}return Be}getType(){return"MultiPoint"}intersectsExtent(e){const Te=this.flatCoordinates,ke=this.stride;for(let Be=0,Ue=Te.length;Be<Ue;Be+=ke){const He=Te[Be],We=Te[Be+1];if(containsXY(e,He,We))return!0}return!1}setCoordinates(e,Te){this.setLayout(Te,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class Polygon extends SimpleGeometry{constructor(e,Te,ke){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,Te!==void 0&&ke?(this.setFlatCoordinates(Te,e),this.ends_=ke):this.setCoordinates(e,Te)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,Te,ke,Be){return Be<closestSquaredDistanceXY(this.getExtent(),e,Te)?Be:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,Te,ke,Be))}containsXY(e,Te){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,Te)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let Te;return e!==void 0?(Te=this.getOrientedFlatCoordinates().slice(),orientLinearRings(Te,0,this.ends_,this.stride,e)):Te=this.flatCoordinates,inflateCoordinatesArray(Te,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,Te=this.flatCoordinates,ke=this.ends_,Be=[];let Ue=0;for(let He=0,We=ke.length;He<We;++He){const Cn=ke[He],En=new LinearRing(Te.slice(Ue,Cn),e);Be.push(En),Ue=Cn}return Be}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const Te=[],ke=[];return Te.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),Te,0,ke),new Polygon(Te,"XY",ke)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,Te){this.setLayout(Te,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const ke=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=ke.length===0?0:ke[ke.length-1],this.changed()}}function fromExtent(Oe){if(isEmpty(Oe))throw new Error("Cannot create polygon from empty extent");const e=Oe[0],Te=Oe[1],ke=Oe[2],Be=Oe[3],Ue=[e,Te,e,Be,ke,Be,ke,Te,e,Te];return new Polygon(Ue,"XY",[Ue.length])}class MultiPolygon extends SimpleGeometry{constructor(e,Te,ke){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!ke&&!Array.isArray(e[0])){const Be=e,Ue=[],He=[];for(let We=0,Cn=Be.length;We<Cn;++We){const En=Be[We],An=Ue.length,Sn=En.getEnds();for(let Tn=0,Ln=Sn.length;Tn<Ln;++Tn)Sn[Tn]+=An;extend$4(Ue,En.getFlatCoordinates()),He.push(Sn)}Te=Be.length===0?this.getLayout():Be[0].getLayout(),e=Ue,ke=He}Te!==void 0&&ke?(this.setFlatCoordinates(Te,e),this.endss_=ke):this.setCoordinates(e,Te)}appendPolygon(e){let Te;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),Te=e.getEnds().slice(),this.endss_.push();else{const ke=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),Te=e.getEnds().slice();for(let Be=0,Ue=Te.length;Be<Ue;++Be)Te[Be]+=ke}this.endss_.push(Te),this.changed()}clone(){const e=this.endss_.length,Te=new Array(e);for(let Be=0;Be<e;++Be)Te[Be]=this.endss_[Be].slice();const ke=new MultiPolygon(this.flatCoordinates.slice(),this.layout,Te);return ke.applyProperties(this),ke}closestPointXY(e,Te,ke,Be){return Be<closestSquaredDistanceXY(this.getExtent(),e,Te)?Be:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,Te,ke,Be))}containsXY(e,Te){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,Te)}getArea(){return linearRingss(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let Te;return e!==void 0?(Te=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(Te,0,this.endss_,this.stride,e)):Te=this.flatCoordinates,inflateMultiCoordinatesArray(Te,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss$1(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const Te=[],ke=[];return Te.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),Te,0,ke),new MultiPolygon(Te,"XY",ke)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let Te;if(e===0)Te=0;else{const Ue=this.endss_[e-1];Te=Ue[Ue.length-1]}const ke=this.endss_[e].slice(),Be=ke[ke.length-1];if(Te!==0)for(let Ue=0,He=ke.length;Ue<He;++Ue)ke[Ue]-=Te;return new Polygon(this.flatCoordinates.slice(Te,Be),this.layout,ke)}getPolygons(){const e=this.layout,Te=this.flatCoordinates,ke=this.endss_,Be=[];let Ue=0;for(let He=0,We=ke.length;He<We;++He){const Cn=ke[He].slice(),En=Cn[Cn.length-1];if(Ue!==0)for(let Sn=0,Tn=Cn.length;Sn<Tn;++Sn)Cn[Sn]-=Ue;const An=new Polygon(Te.slice(Ue,En),e,Cn);Be.push(An),Ue=En}return Be}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,Te){this.setLayout(Te,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const ke=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(ke.length===0)this.flatCoordinates.length=0;else{const Be=ke[ke.length-1];this.flatCoordinates.length=Be.length===0?0:Be[Be.length-1]}this.changed()}}const tmpTransform=create();class RenderFeature{constructor(e,Te,ke,Be,Ue,He){this.styleFunction,this.extent_,this.id_=He,this.type_=e,this.flatCoordinates_=Te,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=ke||null,this.properties_=Ue,this.squaredTolerance_,this.stride_=Be,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),Te=linearRingss$1(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,Te)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let Te=0;const ke=this.ends_;for(let Be=0,Ue=ke.length;Be<Ue;++Be){const He=ke[Be],We=interpolatePoint(e,Te,He,2,.5);extend$4(this.flatMidpoints_,We),Te=He}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,Te){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const Te=e.getExtent(),ke=e.getWorldExtent();if(Te&&ke){const Be=getHeight(ke)/getHeight(Te);compose(tmpTransform,ke[0],ke[3],Be,-Be,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new RenderFeature(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,Te)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),Te&&this.simplifiedGeometry_.applyTransform(Te);const ke=this.simplifiedGeometry_.getFlatCoordinates();let Be;switch(this.type_){case"LineString":ke.length=douglasPeucker(ke,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,ke,0),Be=[ke.length];break;case"MultiLineString":Be=[],ke.length=douglasPeuckerArray(ke,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,ke,0,Be);break;case"Polygon":Be=[],ke.length=quantizeArray(ke,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),ke,0,Be);break}return Be&&(this.simplifiedGeometry_=new RenderFeature(this.type_,ke,Be,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;function quickselect(Oe,e,Te=0,ke=Oe.length-1,Be=defaultCompare){for(;ke>Te;){if(ke-Te>600){const Cn=ke-Te+1,En=e-Te+1,An=Math.log(Cn),Sn=.5*Math.exp(2*An/3),Tn=.5*Math.sqrt(An*Sn*(Cn-Sn)/Cn)*(En-Cn/2<0?-1:1),Ln=Math.max(Te,Math.floor(e-En*Sn/Cn+Tn)),Bn=Math.min(ke,Math.floor(e+(Cn-En)*Sn/Cn+Tn));quickselect(Oe,e,Ln,Bn,Be)}const Ue=Oe[e];let He=Te,We=ke;for(swap(Oe,Te,e),Be(Oe[ke],Ue)>0&&swap(Oe,Te,ke);He<We;){for(swap(Oe,He,We),He++,We--;Be(Oe[He],Ue)<0;)He++;for(;Be(Oe[We],Ue)>0;)We--}Be(Oe[Te],Ue)===0?swap(Oe,Te,We):(We++,swap(Oe,We,ke)),We<=e&&(Te=We+1),e<=We&&(ke=We-1)}}function swap(Oe,e,Te){const ke=Oe[e];Oe[e]=Oe[Te],Oe[Te]=ke}function defaultCompare(Oe,e){return Oe<e?-1:Oe>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let Te=this.data;const ke=[];if(!intersects(e,Te))return ke;const Be=this.toBBox,Ue=[];for(;Te;){for(let He=0;He<Te.children.length;He++){const We=Te.children[He],Cn=Te.leaf?Be(We):We;intersects(e,Cn)&&(Te.leaf?ke.push(We):contains(e,Cn)?this._all(We,ke):Ue.push(We))}Te=Ue.pop()}return ke}collides(e){let Te=this.data;if(!intersects(e,Te))return!1;const ke=[];for(;Te;){for(let Be=0;Be<Te.children.length;Be++){const Ue=Te.children[Be],He=Te.leaf?this.toBBox(Ue):Ue;if(intersects(e,He)){if(Te.leaf||contains(e,He))return!0;ke.push(Ue)}}Te=ke.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let ke=0;ke<e.length;ke++)this.insert(e[ke]);return this}let Te=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=Te;else if(this.data.height===Te.height)this._splitRoot(this.data,Te);else{if(this.data.height<Te.height){const ke=this.data;this.data=Te,Te=ke}this._insert(Te,this.data.height-Te.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,Te){if(!e)return this;let ke=this.data;const Be=this.toBBox(e),Ue=[],He=[];let We,Cn,En;for(;ke||Ue.length;){if(ke||(ke=Ue.pop(),Cn=Ue[Ue.length-1],We=He.pop(),En=!0),ke.leaf){const An=findItem(e,ke.children,Te);if(An!==-1)return ke.children.splice(An,1),Ue.push(ke),this._condense(Ue),this}!En&&!ke.leaf&&contains(ke,Be)?(Ue.push(ke),He.push(We),We=0,Cn=ke,ke=ke.children[0]):Cn?(We++,ke=Cn.children[We],En=!1):ke=null}return this}toBBox(e){return e}compareMinX(e,Te){return e.minX-Te.minX}compareMinY(e,Te){return e.minY-Te.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,Te){const ke=[];for(;e;)e.leaf?Te.push(...e.children):ke.push(...e.children),e=ke.pop();return Te}_build(e,Te,ke,Be){const Ue=ke-Te+1;let He=this._maxEntries,We;if(Ue<=He)return We=createNode(e.slice(Te,ke+1)),calcBBox(We,this.toBBox),We;Be||(Be=Math.ceil(Math.log(Ue)/Math.log(He)),He=Math.ceil(Ue/Math.pow(He,Be-1))),We=createNode([]),We.leaf=!1,We.height=Be;const Cn=Math.ceil(Ue/He),En=Cn*Math.ceil(Math.sqrt(He));multiSelect(e,Te,ke,En,this.compareMinX);for(let An=Te;An<=ke;An+=En){const Sn=Math.min(An+En-1,ke);multiSelect(e,An,Sn,Cn,this.compareMinY);for(let Tn=An;Tn<=Sn;Tn+=Cn){const Ln=Math.min(Tn+Cn-1,Sn);We.children.push(this._build(e,Tn,Ln,Be-1))}}return calcBBox(We,this.toBBox),We}_chooseSubtree(e,Te,ke,Be){for(;Be.push(Te),!(Te.leaf||Be.length-1===ke);){let Ue=1/0,He=1/0,We;for(let Cn=0;Cn<Te.children.length;Cn++){const En=Te.children[Cn],An=bboxArea(En),Sn=enlargedArea(e,En)-An;Sn<He?(He=Sn,Ue=An<Ue?An:Ue,We=En):Sn===He&&An<Ue&&(Ue=An,We=En)}Te=We||Te.children[0]}return Te}_insert(e,Te,ke){const Be=ke?e:this.toBBox(e),Ue=[],He=this._chooseSubtree(Be,this.data,Te,Ue);for(He.children.push(e),extend$2(He,Be);Te>=0&&Ue[Te].children.length>this._maxEntries;)this._split(Ue,Te),Te--;this._adjustParentBBoxes(Be,Ue,Te)}_split(e,Te){const ke=e[Te],Be=ke.children.length,Ue=this._minEntries;this._chooseSplitAxis(ke,Ue,Be);const He=this._chooseSplitIndex(ke,Ue,Be),We=createNode(ke.children.splice(He,ke.children.length-He));We.height=ke.height,We.leaf=ke.leaf,calcBBox(ke,this.toBBox),calcBBox(We,this.toBBox),Te?e[Te-1].children.push(We):this._splitRoot(ke,We)}_splitRoot(e,Te){this.data=createNode([e,Te]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,Te,ke){let Be,Ue=1/0,He=1/0;for(let We=Te;We<=ke-Te;We++){const Cn=distBBox(e,0,We,this.toBBox),En=distBBox(e,We,ke,this.toBBox),An=intersectionArea(Cn,En),Sn=bboxArea(Cn)+bboxArea(En);An<Ue?(Ue=An,Be=We,He=Sn<He?Sn:He):An===Ue&&Sn<He&&(He=Sn,Be=We)}return Be||ke-Te}_chooseSplitAxis(e,Te,ke){const Be=e.leaf?this.compareMinX:compareNodeMinX,Ue=e.leaf?this.compareMinY:compareNodeMinY,He=this._allDistMargin(e,Te,ke,Be),We=this._allDistMargin(e,Te,ke,Ue);He<We&&e.children.sort(Be)}_allDistMargin(e,Te,ke,Be){e.children.sort(Be);const Ue=this.toBBox,He=distBBox(e,0,Te,Ue),We=distBBox(e,ke-Te,ke,Ue);let Cn=bboxMargin(He)+bboxMargin(We);for(let En=Te;En<ke-Te;En++){const An=e.children[En];extend$2(He,e.leaf?Ue(An):An),Cn+=bboxMargin(He)}for(let En=ke-Te-1;En>=Te;En--){const An=e.children[En];extend$2(We,e.leaf?Ue(An):An),Cn+=bboxMargin(We)}return Cn}_adjustParentBBoxes(e,Te,ke){for(let Be=ke;Be>=0;Be--)extend$2(Te[Be],e)}_condense(e){for(let Te=e.length-1,ke;Te>=0;Te--)e[Te].children.length===0?Te>0?(ke=e[Te-1].children,ke.splice(ke.indexOf(e[Te]),1)):this.clear():calcBBox(e[Te],this.toBBox)}};function findItem(Oe,e,Te){if(!Te)return e.indexOf(Oe);for(let ke=0;ke<e.length;ke++)if(Te(Oe,e[ke]))return ke;return-1}function calcBBox(Oe,e){distBBox(Oe,0,Oe.children.length,e,Oe)}function distBBox(Oe,e,Te,ke,Be){Be||(Be=createNode(null)),Be.minX=1/0,Be.minY=1/0,Be.maxX=-1/0,Be.maxY=-1/0;for(let Ue=e;Ue<Te;Ue++){const He=Oe.children[Ue];extend$2(Be,Oe.leaf?ke(He):He)}return Be}function extend$2(Oe,e){return Oe.minX=Math.min(Oe.minX,e.minX),Oe.minY=Math.min(Oe.minY,e.minY),Oe.maxX=Math.max(Oe.maxX,e.maxX),Oe.maxY=Math.max(Oe.maxY,e.maxY),Oe}function compareNodeMinX(Oe,e){return Oe.minX-e.minX}function compareNodeMinY(Oe,e){return Oe.minY-e.minY}function bboxArea(Oe){return(Oe.maxX-Oe.minX)*(Oe.maxY-Oe.minY)}function bboxMargin(Oe){return Oe.maxX-Oe.minX+(Oe.maxY-Oe.minY)}function enlargedArea(Oe,e){return(Math.max(e.maxX,Oe.maxX)-Math.min(e.minX,Oe.minX))*(Math.max(e.maxY,Oe.maxY)-Math.min(e.minY,Oe.minY))}function intersectionArea(Oe,e){const Te=Math.max(Oe.minX,e.minX),ke=Math.max(Oe.minY,e.minY),Be=Math.min(Oe.maxX,e.maxX),Ue=Math.min(Oe.maxY,e.maxY);return Math.max(0,Be-Te)*Math.max(0,Ue-ke)}function contains(Oe,e){return Oe.minX<=e.minX&&Oe.minY<=e.minY&&e.maxX<=Oe.maxX&&e.maxY<=Oe.maxY}function intersects(Oe,e){return e.minX<=Oe.maxX&&e.minY<=Oe.maxY&&e.maxX>=Oe.minX&&e.maxY>=Oe.minY}function createNode(Oe){return{children:Oe,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(Oe,e,Te,ke,Be){const Ue=[e,Te];for(;Ue.length;){if(Te=Ue.pop(),e=Ue.pop(),Te-e<=ke)continue;const He=e+Math.ceil((Te-e)/ke/2)*ke;quickselect(Oe,He,e,Te,Be),Ue.push(e,He,He,Te)}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,Te){const ke={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:Te};this.rbush_.insert(ke),this.items_[getUid(Te)]=ke}load(e,Te){const ke=new Array(Te.length);for(let Be=0,Ue=Te.length;Be<Ue;Be++){const He=e[Be],We=Te[Be],Cn={minX:He[0],minY:He[1],maxX:He[2],maxY:He[3],value:We};ke[Be]=Cn,this.items_[getUid(We)]=Cn}this.rbush_.load(ke)}remove(e){const Te=getUid(e),ke=this.items_[Te];return delete this.items_[Te],this.rbush_.remove(ke)!==null}update(e,Te){const ke=this.items_[getUid(Te)],Be=[ke.minX,ke.minY,ke.maxX,ke.maxY];equals$1(Be,e)||(this.remove(Te),this.insert(e,Te))}getAll(){return this.rbush_.all().map(function(Te){return Te.value})}getInExtent(e){const Te={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(Te).map(function(Be){return Be.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,Te){return this.forEach_(this.getInExtent(e),Te)}forEach_(e,Te){let ke;for(let Be=0,Ue=e.length;Be<Ue;Be++)if(ke=Te(e[Be]),ke)return ke;return ke}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const Te=this.rbush_.toJSON();return createOrUpdate$2(Te.minX,Te.minY,Te.maxX,Te.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const Te in e.items_)this.items_[Te]=e.items_[Te]}}const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class VectorSourceEvent extends BaseEvent{constructor(e,Te,ke){super(e),this.feature=Te,this.features=ke}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all$1;const Te=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=Te?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let ke,Be;Array.isArray(e.features)?Be=e.features:e.features&&(ke=e.features,Be=ke.getArray()),!Te&&ke===void 0&&(ke=new Collection(Be)),Be!==void 0&&this.addFeaturesInternal(Be),ke!==void 0&&this.bindFeaturesCollection_(ke)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const Te=getUid(e);if(!this.addToIndex_(Te,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(Te,e);const ke=e.getGeometry();if(ke){const Be=ke.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(Be,e)}else this.nullGeometryFeatures_[Te]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,Te){Te instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(Te,EventType.CHANGE,this.handleFeatureChange_,this),listen(Te,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,Te){let ke=!0;if(Te.getId()!==void 0){const Be=String(Te.getId());if(!(Be in this.idIndex_))this.idIndex_[Be]=Te;else if(Te instanceof RenderFeature){const Ue=this.idIndex_[Be];Ue instanceof RenderFeature?Array.isArray(Ue)?Ue.push(Te):this.idIndex_[Be]=[Ue,Te]:ke=!1}else ke=!1}return ke&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=Te),ke}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const Te=[],ke=[],Be=[];for(let Ue=0,He=e.length;Ue<He;Ue++){const We=e[Ue],Cn=getUid(We);this.addToIndex_(Cn,We)&&ke.push(We)}for(let Ue=0,He=ke.length;Ue<He;Ue++){const We=ke[Ue],Cn=getUid(We);this.setupChangeEvents_(Cn,We);const En=We.getGeometry();if(En){const An=En.getExtent();Te.push(An),Be.push(We)}else this.nullGeometryFeatures_[Cn]=We}if(this.featuresRtree_&&this.featuresRtree_.load(Te,Be),this.hasListener(VectorEventType.ADDFEATURE))for(let Ue=0,He=ke.length;Ue<He;Ue++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,ke[Ue]))}bindFeaturesCollection_(e){let Te=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(ke){Te||(Te=!0,e.push(ke.feature),Te=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(ke){Te||(Te=!0,e.remove(ke.feature),Te=!1)}),e.addEventListener(CollectionEventType.ADD,ke=>{Te||(Te=!0,this.addFeature(ke.element),Te=!1)}),e.addEventListener(CollectionEventType.REMOVE,ke=>{Te||(Te=!0,this.removeFeature(ke.element),Te=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const ke in this.featureChangeKeys_)this.featureChangeKeys_[ke].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(ke=>{this.removeFeatureInternal(ke)});for(const ke in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[ke])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const Te=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(Te),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,Te){const ke=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(ke,function(Be){const Ue=Be.getGeometry();if(Ue instanceof RenderFeature||Ue.intersectsCoordinate(e))return Te(Be)})}forEachFeatureInExtent(e,Te){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,Te);this.featuresCollection_&&this.featuresCollection_.forEach(Te)}forEachFeatureIntersectingExtent(e,Te){return this.forEachFeatureInExtent(e,function(ke){const Be=ke.getGeometry();if(Be instanceof RenderFeature||Be.intersectsExtent(e)){const Ue=Te(ke);if(Ue)return Ue}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const Te=[];return this.forEachFeatureAtCoordinateDirect(e,function(ke){Te.push(ke)}),Te}getFeaturesInExtent(e,Te){if(this.featuresRtree_){if(!(Te&&Te.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const Be=wrapAndSliceX(e,Te);return[].concat(...Be.map(Ue=>this.featuresRtree_.getInExtent(Ue)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,Te){const ke=e[0],Be=e[1];let Ue=null;const He=[NaN,NaN];let We=1/0;const Cn=[-1/0,-1/0,1/0,1/0];return Te=Te||TRUE,this.featuresRtree_.forEachInExtent(Cn,function(En){if(Te(En)){const An=En.getGeometry(),Sn=We;if(We=An instanceof RenderFeature?0:An.closestPointXY(ke,Be,He,We),We<Sn){Ue=En;const Tn=Math.sqrt(We);Cn[0]=ke-Tn,Cn[1]=Be-Tn,Cn[2]=ke+Tn,Cn[3]=Be+Tn}}}),Ue}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const Te=this.idIndex_[e.toString()];return Te!==void 0?Te:null}getFeatureByUid(e){const Te=this.uidIndex_[e];return Te!==void 0?Te:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const Te=e.target,ke=getUid(Te),Be=Te.getGeometry();if(!Be)ke in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(Te),this.nullGeometryFeatures_[ke]=Te);else{const He=Be.getExtent();ke in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[ke],this.featuresRtree_&&this.featuresRtree_.insert(He,Te)):this.featuresRtree_&&this.featuresRtree_.update(He,Te)}const Ue=Te.getId();if(Ue!==void 0){const He=Ue.toString();this.idIndex_[He]!==Te&&(this.removeFromIdIndex_(Te),this.idIndex_[He]=Te)}else this.removeFromIdIndex_(Te),this.uidIndex_[ke]=Te;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,Te))}hasFeature(e){const Te=e.getId();return Te!==void 0?Te in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,Te,ke){const Be=this.loadedExtentsRtree_,Ue=this.strategy_(e,Te,ke);for(let He=0,We=Ue.length;He<We;++He){const Cn=Ue[He];Be.forEachInExtent(Cn,function(An){return containsExtent(An.extent,Cn)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,Cn,Te,ke,An=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,An))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),Be.insert(Cn,{extent:Cn.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const Te=this.loadedExtentsRtree_,ke=Te.forEachInExtent(e,function(Be){if(equals$1(Be.extent,e))return Be});ke&&Te.remove(ke)}removeFeatures(e){let Te=!1;for(let ke=0,Be=e.length;ke<Be;++ke)Te=this.removeFeatureInternal(e[ke])||Te;Te&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const Te=getUid(e);if(!(Te in this.uidIndex_))return!1;Te in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[Te]:this.featuresRtree_&&this.featuresRtree_.remove(e);const ke=this.featureChangeKeys_[Te];ke==null||ke.forEach(unlistenByKey),delete this.featureChangeKeys_[Te];const Be=e.getId();if(Be!==void 0){const Ue=Be.toString(),He=this.idIndex_[Ue];He===e?delete this.idIndex_[Ue]:Array.isArray(He)&&(He.splice(He.indexOf(e),1),He.length===1&&(this.idIndex_[Ue]=He[0]))}return delete this.uidIndex_[Te],this.hasListener(VectorEventType.REMOVEFEATURE)&&this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const Te in this.idIndex_)if(this.idIndex_[Te]===e){delete this.idIndex_[Te];break}}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(Oe,e,Te,ke,Be){Oe.beginPath(),Oe.moveTo(0,0),Oe.lineTo(e,Te),Oe.lineTo(ke,Be),Oe.closePath(),Oe.save(),Oe.clip(),Oe.fillRect(0,0,Math.max(e,ke)+1,Math.max(Te,Be)),Oe.restore()}function verifyBrokenDiagonalRendering(Oe,e){return Math.abs(Oe[e*4]-210)>2||Math.abs(Oe[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const Oe=createCanvasContext2D(6,6,canvasPool$1);Oe.globalCompositeOperation="lighter",Oe.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(Oe,4,5,4,0),drawTestTriangle(Oe,4,5,0,5);const e=Oe.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(Oe),canvasPool$1.push(Oe.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(Oe,e,Te,ke){const Be=transform$1(Te,e,Oe);let Ue=getPointResolution(e,ke,Te);const He=e.getMetersPerUnit();He!==void 0&&(Ue*=He);const We=Oe.getMetersPerUnit();We!==void 0&&(Ue/=We);const Cn=Oe.getExtent();if(!Cn||containsCoordinate(Cn,Be)){const En=getPointResolution(Oe,Ue,Be)/Ue;isFinite(En)&&En>0&&(Ue/=En)}return Ue}function calculateSourceExtentResolution(Oe,e,Te,ke){const Be=getCenter(Te);let Ue=calculateSourceResolution(Oe,e,Be,ke);return(!isFinite(Ue)||Ue<=0)&&forEachCorner(Te,function(He){return Ue=calculateSourceResolution(Oe,e,He,ke),isFinite(Ue)&&Ue>0}),Ue}function render(Oe,e,Te,ke,Be,Ue,He,We,Cn,En,An,Sn,Tn,Ln){const Bn=createCanvasContext2D(Math.round(Te*Oe),Math.round(Te*e),canvasPool$1);if(Sn||(Bn.imageSmoothingEnabled=!1),Cn.length===0)return Bn.canvas;Bn.scale(Te,Te);function ei(li){return Math.round(li*Te)/Te}Bn.globalCompositeOperation="lighter";const ti=createEmpty();Cn.forEach(function(li,Pi,pi){extend$3(ti,li.extent)});let ni;const ri=Te/ke,si=(Sn?1:1+Math.pow(2,-24))/ri;(!Tn||Cn.length!==1||En!==0)&&(ni=createCanvasContext2D(Math.round(getWidth(ti)*ri),Math.round(getHeight(ti)*ri),canvasPool$1),Sn||(ni.imageSmoothingEnabled=!1),Cn.forEach(function(li,Pi,pi){if(li.image.width>0&&li.image.height>0){if(li.clipExtent){ni.save();const ci=(li.clipExtent[0]-ti[0])*ri,Mi=-(li.clipExtent[3]-ti[3])*ri,Oi=getWidth(li.clipExtent)*ri,Hi=getHeight(li.clipExtent)*ri;ni.rect(Sn?ci:Math.round(ci),Sn?Mi:Math.round(Mi),Sn?Oi:Math.round(ci+Oi)-Math.round(ci),Sn?Hi:Math.round(Mi+Hi)-Math.round(Mi)),ni.clip()}const vi=(li.extent[0]-ti[0])*ri,Ri=-(li.extent[3]-ti[3])*ri,Fi=getWidth(li.extent)*ri,di=getHeight(li.extent)*ri;ni.drawImage(li.image,En,En,li.image.width-2*En,li.image.height-2*En,Sn?vi:Math.round(vi),Sn?Ri:Math.round(Ri),Sn?Fi:Math.round(vi+Fi)-Math.round(vi),Sn?di:Math.round(Ri+di)-Math.round(Ri)),li.clipExtent&&ni.restore()}}));const ai=getTopLeft(He);return We.getTriangles().forEach(function(li,Pi,pi){const vi=li.source,Ri=li.target;let Fi=vi[0][0],di=vi[0][1],ci=vi[1][0],Mi=vi[1][1],Oi=vi[2][0],Hi=vi[2][1];const Ki=ei((Ri[0][0]-ai[0])/Ue),or=ei(-(Ri[0][1]-ai[1])/Ue),sr=ei((Ri[1][0]-ai[0])/Ue),Cr=ei(-(Ri[1][1]-ai[1])/Ue),pr=ei((Ri[2][0]-ai[0])/Ue),wr=ei(-(Ri[2][1]-ai[1])/Ue),Li=Fi,er=di;Fi=0,di=0,ci-=Li,Mi-=er,Oi-=Li,Hi-=er;const hr=[[ci,Mi,0,0,sr-Ki],[Oi,Hi,0,0,pr-Ki],[0,0,ci,Mi,Cr-or],[0,0,Oi,Hi,wr-or]],mr=solveLinearSystem(hr);if(!mr)return;if(Bn.save(),Bn.beginPath(),isBrokenDiagonalRendering()||!Sn){Bn.moveTo(sr,Cr);const dr=4,cr=Ki-sr,gr=or-Cr;for(let vr=0;vr<dr;vr++)Bn.lineTo(sr+ei((vr+1)*cr/dr),Cr+ei(vr*gr/(dr-1))),vr!=dr-1&&Bn.lineTo(sr+ei((vr+1)*cr/dr),Cr+ei((vr+1)*gr/(dr-1)));Bn.lineTo(pr,wr)}else Bn.moveTo(sr,Cr),Bn.lineTo(Ki,or),Bn.lineTo(pr,wr);Bn.clip(),Bn.transform(mr[0],mr[2],mr[1],mr[3],Ki,or),Bn.translate(ti[0]-Li,ti[3]-er);let _r;if(ni)_r=ni.canvas,Bn.scale(si,-si);else{const dr=Cn[0],cr=dr.extent;_r=dr.image,Bn.scale(getWidth(cr)/_r.width,-getHeight(cr)/_r.height)}Bn.drawImage(_r,0,0),Bn.restore()}),ni&&(releaseCanvas(ni),canvasPool$1.push(ni.canvas)),An&&(Bn.save(),Bn.globalCompositeOperation="source-over",Bn.strokeStyle="black",Bn.lineWidth=1,We.getTriangles().forEach(function(li,Pi,pi){const vi=li.target,Ri=(vi[0][0]-ai[0])/Ue,Fi=-(vi[0][1]-ai[1])/Ue,di=(vi[1][0]-ai[0])/Ue,ci=-(vi[1][1]-ai[1])/Ue,Mi=(vi[2][0]-ai[0])/Ue,Oi=-(vi[2][1]-ai[1])/Ue;Bn.beginPath(),Bn.moveTo(di,ci),Bn.lineTo(Ri,Fi),Bn.lineTo(Mi,Oi),Bn.closePath(),Bn.stroke()}),Bn.restore()),Bn.canvas}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ImageWrapper extends Target{constructor(e,Te,ke,Be){super(),this.extent=e,this.pixelRatio_=ke,this.resolution=Te,this.state=typeof Be=="function"?ImageState.IDLE:Be,this.image_=null,this.loader=typeof Be=="function"?Be:null}changed(){this.dispatchEvent(EventType.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ImageState.IDLE&&this.loader){this.state=ImageState.LOADING,this.changed();const e=this.getResolution(),Te=Array.isArray(e)?e[0]:e;toPromise(()=>this.loader(this.getExtent(),Te,this.getPixelRatio())).then(ke=>{"image"in ke&&(this.image_=ke.image),"extent"in ke&&(this.extent=ke.extent),"resolution"in ke&&(this.resolution=ke.resolution),"pixelRatio"in ke&&(this.pixelRatio_=ke.pixelRatio),(ke instanceof HTMLImageElement||CREATE_IMAGE_BITMAP&&ke instanceof ImageBitmap||ke instanceof HTMLCanvasElement||ke instanceof HTMLVideoElement)&&(this.image_=ke),this.state=ImageState.LOADED}).catch(ke=>{this.state=ImageState.ERROR,console.error(ke)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function listenImage(Oe,e,Te){const ke=Oe;let Be=!0,Ue=!1,He=!1;const We=[listenOnce(ke,EventType.LOAD,function(){He=!0,Ue||e()})];return ke.src&&IMAGE_DECODE?(Ue=!0,ke.decode().then(function(){Be&&e()}).catch(function(Cn){Be&&(He?e():Te())})):We.push(listenOnce(ke,EventType.ERROR,Te)),function(){Be=!1,We.forEach(unlistenByKey)}}function load(Oe,e){return new Promise((Te,ke)=>{function Be(){He(),Te(Oe)}function Ue(){He(),ke(new Error("Image load error"))}function He(){Oe.removeEventListener("load",Be),Oe.removeEventListener("error",Ue)}Oe.addEventListener("load",Be),Oe.addEventListener("error",Ue)})}function decodeFallback(Oe,e){return e&&(Oe.src=e),Oe.src&&IMAGE_DECODE?new Promise((Te,ke)=>Oe.decode().then(()=>Te(Oe)).catch(Be=>Oe.complete&&Oe.width?Te(Oe):ke(Be))):load(Oe)}function decode$1(Oe,e){return e&&(Oe.src=e),Oe.src&&IMAGE_DECODE&&CREATE_IMAGE_BITMAP?Oe.decode().then(()=>createImageBitmap(Oe)).catch(Te=>{if(Oe.complete&&Oe.width)return Oe;throw Te}):decodeFallback(Oe)}class ImageTile extends Tile{constructor(e,Te,ke,Be,Ue,He){super(e,Te,He),this.crossOrigin_=Be,this.src_=ke,this.key=ke,this.image_=new Image,Be!==null&&(this.image_.crossOrigin=Be),this.unlisten_=null,this.tileLoadFunction_=Ue}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function getBlankImage(){const Oe=createCanvasContext2D(1,1);return Oe.fillStyle="rgba(0,0,0,0)",Oe.fillRect(0,0,1,1),Oe.canvas}const MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,Te,ke,Be,Ue,He,We){this.sourceProj_=e,this.targetProj_=Te;let Cn={};const En=We?createTransformFromCoordinateTransform(si=>apply(We,transform$1(si,this.targetProj_,this.sourceProj_))):getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(si){const ai=si[0]+"/"+si[1];return Cn[ai]||(Cn[ai]=En(si)),Cn[ai]},this.maxSourceExtent_=Be,this.errorThresholdSquared_=Ue*Ue,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!Be&&!!this.sourceProj_.getExtent()&&getWidth(Be)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const An=getTopLeft(ke),Sn=getTopRight(ke),Tn=getBottomRight(ke),Ln=getBottomLeft(ke),Bn=this.transformInv_(An),ei=this.transformInv_(Sn),ti=this.transformInv_(Tn),ni=this.transformInv_(Ln),ri=MAX_SUBDIVISION+(He?Math.max(0,Math.ceil(Math.log2(getArea$1(ke)/(He*He*256*256)))):0);if(this.addQuad_(An,Sn,Tn,Ln,Bn,ei,ti,ni,ri),this.wrapsXInSource_){let si=1/0;this.triangles_.forEach(function(ai,li,Pi){si=Math.min(si,ai.source[0][0],ai.source[1][0],ai.source[2][0])}),this.triangles_.forEach(ai=>{if(Math.max(ai.source[0][0],ai.source[1][0],ai.source[2][0])-si>this.sourceWorldWidth_/2){const li=[[ai.source[0][0],ai.source[0][1]],[ai.source[1][0],ai.source[1][1]],[ai.source[2][0],ai.source[2][1]]];li[0][0]-si>this.sourceWorldWidth_/2&&(li[0][0]-=this.sourceWorldWidth_),li[1][0]-si>this.sourceWorldWidth_/2&&(li[1][0]-=this.sourceWorldWidth_),li[2][0]-si>this.sourceWorldWidth_/2&&(li[2][0]-=this.sourceWorldWidth_);const Pi=Math.min(li[0][0],li[1][0],li[2][0]);Math.max(li[0][0],li[1][0],li[2][0])-Pi<this.sourceWorldWidth_/2&&(ai.source=li)}})}Cn={}}addTriangle_(e,Te,ke,Be,Ue,He){this.triangles_.push({source:[Be,Ue,He],target:[e,Te,ke]})}addQuad_(e,Te,ke,Be,Ue,He,We,Cn,En){const An=boundingExtent([Ue,He,We,Cn]),Sn=this.sourceWorldWidth_?getWidth(An)/this.sourceWorldWidth_:null,Tn=this.sourceWorldWidth_,Ln=this.sourceProj_.canWrapX()&&Sn>.5&&Sn<1;let Bn=!1;if(En>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const ti=boundingExtent([e,Te,ke,Be]);Bn=getWidth(ti)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||Bn}!Ln&&this.sourceProj_.isGlobal()&&Sn&&(Bn=Sn>MAX_TRIANGLE_WIDTH||Bn)}if(!Bn&&this.maxSourceExtent_&&isFinite(An[0])&&isFinite(An[1])&&isFinite(An[2])&&isFinite(An[3])&&!intersects$1(An,this.maxSourceExtent_))return;let ei=0;if(!Bn&&(!isFinite(Ue[0])||!isFinite(Ue[1])||!isFinite(He[0])||!isFinite(He[1])||!isFinite(We[0])||!isFinite(We[1])||!isFinite(Cn[0])||!isFinite(Cn[1]))){if(En>0)Bn=!0;else if(ei=(!isFinite(Ue[0])||!isFinite(Ue[1])?8:0)+(!isFinite(He[0])||!isFinite(He[1])?4:0)+(!isFinite(We[0])||!isFinite(We[1])?2:0)+(!isFinite(Cn[0])||!isFinite(Cn[1])?1:0),ei!=1&&ei!=2&&ei!=4&&ei!=8)return}if(En>0){if(!Bn){const ti=[(e[0]+ke[0])/2,(e[1]+ke[1])/2],ni=this.transformInv_(ti);let ri;Ln?ri=(modulo(Ue[0],Tn)+modulo(We[0],Tn))/2-modulo(ni[0],Tn):ri=(Ue[0]+We[0])/2-ni[0];const si=(Ue[1]+We[1])/2-ni[1];Bn=ri*ri+si*si>this.errorThresholdSquared_}if(Bn){if(Math.abs(e[0]-ke[0])<=Math.abs(e[1]-ke[1])){const ti=[(Te[0]+ke[0])/2,(Te[1]+ke[1])/2],ni=this.transformInv_(ti),ri=[(Be[0]+e[0])/2,(Be[1]+e[1])/2],si=this.transformInv_(ri);this.addQuad_(e,Te,ti,ri,Ue,He,ni,si,En-1),this.addQuad_(ri,ti,ke,Be,si,ni,We,Cn,En-1)}else{const ti=[(e[0]+Te[0])/2,(e[1]+Te[1])/2],ni=this.transformInv_(ti),ri=[(ke[0]+Be[0])/2,(ke[1]+Be[1])/2],si=this.transformInv_(ri);this.addQuad_(e,ti,ri,Be,Ue,ni,si,Cn,En-1),this.addQuad_(ti,Te,ke,ri,ni,He,We,si,En-1)}return}}if(Ln){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(ei&11)==0&&this.addTriangle_(e,ke,Be,Ue,We,Cn),(ei&14)==0&&this.addTriangle_(e,ke,Te,Ue,We,He),ei&&((ei&13)==0&&this.addTriangle_(Te,Be,e,He,Cn,Ue),(ei&7)==0&&this.addTriangle_(Te,Be,ke,He,Cn,We))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(Te,ke,Be){const Ue=Te.source;extendCoordinate(e,Ue[0]),extendCoordinate(e,Ue[1]),extendCoordinate(e,Ue[2])}),e}getTriangles(){return this.triangles_}}const ERROR_THRESHOLD=.5;class ReprojTile extends Tile{constructor(e,Te,ke,Be,Ue,He,We,Cn,En,An,Sn,Tn){super(Ue,TileState.IDLE,Tn),this.renderEdges_=Sn!==void 0?Sn:!1,this.pixelRatio_=We,this.gutter_=Cn,this.canvas_=null,this.sourceTileGrid_=Te,this.targetTileGrid_=Be,this.wrappedTileCoord_=He||Ue,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const Ln=Be.getTileCoordExtent(this.wrappedTileCoord_),Bn=this.targetTileGrid_.getExtent();let ei=this.sourceTileGrid_.getExtent();const ti=Bn?getIntersection(Ln,Bn):Ln;if(getArea$1(ti)===0){this.state=TileState.EMPTY;return}const ni=e.getExtent();ni&&(ei?ei=getIntersection(ei,ni):ei=ni);const ri=Be.getResolution(this.wrappedTileCoord_[0]),si=calculateSourceExtentResolution(e,ke,ti,ri);if(!isFinite(si)||si<=0){this.state=TileState.EMPTY;return}const ai=An!==void 0?An:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,ke,ti,ei,si*ai,ri),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=Te.getZForResolution(si);let li=this.triangulation_.calculateSourceExtent();if(ei&&(e.canWrapX()?(li[1]=clamp$1(li[1],ei[1],ei[3]),li[3]=clamp$1(li[3],ei[1],ei[3])):li=getIntersection(li,ei)),!getArea$1(li))this.state=TileState.EMPTY;else{let Pi=0,pi=0;e.canWrapX()&&(Pi=getWidth(ni),pi=Math.floor((li[0]-ni[0])/Pi)),wrapAndSliceX(li.slice(),e,!0).forEach(Ri=>{const Fi=Te.getTileRangeForExtentAndZ(Ri,this.sourceZ_);for(let di=Fi.minX;di<=Fi.maxX;di++)for(let ci=Fi.minY;ci<=Fi.maxY;ci++){const Mi=En(this.sourceZ_,di,ci,We);if(Mi){const Oi=pi*Pi;this.sourceTiles_.push({tile:Mi,offset:Oi})}}++pi}),this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(Te=>{var Be;const ke=Te.tile;if(ke&&ke.getState()==TileState.LOADED){const Ue=this.sourceTileGrid_.getTileCoordExtent(ke.tileCoord);Ue[0]+=Te.offset,Ue[2]+=Te.offset;const He=(Be=this.clipExtent_)==null?void 0:Be.slice();He&&(He[0]+=Te.offset,He[2]+=Te.offset),e.push({extent:Ue,clipExtent:He,image:ke.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const Te=this.wrappedTileCoord_[0],ke=this.targetTileGrid_.getTileSize(Te),Be=typeof ke=="number"?ke:ke[0],Ue=typeof ke=="number"?ke:ke[1],He=this.targetTileGrid_.getResolution(Te),We=this.sourceTileGrid_.getResolution(this.sourceZ_),Cn=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(Be,Ue,this.pixelRatio_,We,this.sourceTileGrid_.getExtent(),He,Cn,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:Te})=>{const ke=Te.getState();if(ke==TileState.IDLE||ke==TileState.LOADING){e++;const Be=listen(Te,EventType.CHANGE,Ue=>{const He=Te.getState();(He==TileState.LOADED||He==TileState.ERROR||He==TileState.EMPTY)&&(unlistenByKey(Be),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(Be)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:Te},ke,Be){Te.getState()==TileState.IDLE&&Te.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent$1(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const Te=this.getProjection();if(this.tileGrid&&(!Te||equivalent$1(Te,e)))return this.tileGrid;const ke=getUid(e);return ke in this.tileGridForProjection||(this.tileGridForProjection[ke]=getForProjection(e)),this.tileGridForProjection[ke]}createTile_(e,Te,ke,Be,Ue,He){const We=[e,Te,ke],Cn=this.getTileCoordForTileUrlFunction(We,Ue),En=Cn?this.tileUrlFunction(Cn,Be,Ue):void 0,An=new this.tileClass(We,En!==void 0?TileState.IDLE:TileState.EMPTY,En!==void 0?En:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return An.key=He,An.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),An}getTile(e,Te,ke,Be,Ue){const He=this.getProjection();if(!He||!Ue||equivalent$1(He,Ue))return this.getTileInternal(e,Te,ke,Be,He||Ue);const We=[e,Te,ke],Cn=this.getKey(),En=this.getTileGridForProjection(He),An=this.getTileGridForProjection(Ue),Sn=this.getTileCoordForTileUrlFunction(We,Ue),Tn=new ReprojTile(He,En,Ue,An,We,Sn,this.getTilePixelRatio(Be),this.getGutter(),(Ln,Bn,ei,ti)=>this.getTileInternal(Ln,Bn,ei,ti,He),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return Tn.key=Cn,Tn}getTileInternal(e,Te,ke,Be,Ue){const He=this.getKey();return this.createTile_(e,Te,ke,Be,Ue,He)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,Te){const ke=get$3(e);if(ke){const Be=getUid(ke);Be in this.tileGridForProjection||(this.tileGridForProjection[Be]=Te)}}}function defaultTileLoadFunction(Oe,e){Oe.getImage().src=e}function fromResolutionLike(Oe){return Array.isArray(Oe)?Math.min(...Oe):Oe}class ReprojImage extends ImageWrapper{constructor(e,Te,ke,Be,Ue,He,We){let Cn=e.getExtent();Cn&&e.canWrapX()&&(Cn=Cn.slice(),Cn[0]=-1/0,Cn[2]=1/0);let En=Te.getExtent();En&&Te.canWrapX()&&(En=En.slice(),En[0]=-1/0,En[2]=1/0);const An=En?getIntersection(ke,En):ke,Sn=getCenter(An),Tn=calculateSourceResolution(e,Te,Sn,Be),Ln=ERROR_THRESHOLD,Bn=new Triangulation(e,Te,An,Cn,Tn*Ln,Be),ei=Bn.calculateSourceExtent(),ti=isEmpty(ei)?null:He(ei,Tn,Ue),ni=ti?ImageState.IDLE:ImageState.EMPTY,ri=ti?ti.getPixelRatio():1;super(ke,Be,ri,ni),this.targetProj_=Te,this.maxSourceExtent_=Cn,this.triangulation_=Bn,this.targetResolution_=Be,this.targetExtent_=ke,this.sourceImage_=ti,this.sourcePixelRatio_=ri,this.interpolate_=We,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ImageState.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ImageState.LOADED){const Te=getWidth(this.targetExtent_)/this.targetResolution_,ke=getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=render(Te,ke,this.sourcePixelRatio_,fromResolutionLike(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ImageState.IDLE){this.state=ImageState.LOADING,this.changed();const e=this.sourceImage_.getState();e==ImageState.LOADED||e==ImageState.ERROR?this.reproject_():(this.sourceListenerKey_=listen(this.sourceImage_,EventType.CHANGE,Te=>{const ke=this.sourceImage_.getState();(ke==ImageState.LOADED||ke==ImageState.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null}}const DECIMALS=4,ImageSourceEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ImageSourceEvent extends BaseEvent{constructor(e,Te){super(e),this.image=Te}}class ImageSource extends Source{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const Te=this.getResolutions();if(Te){const ke=linearFindNearest(Te,e,0);e=Te[ke]}return e}getImage(e,Te,ke,Be){const Ue=this.getProjection();if(!Ue||!Be||equivalent$1(Ue,Be))return Ue&&(Be=Ue),this.getImageInternal(e,Te,ke,Be);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&equivalent$1(this.reprojectedImage_.getProjection(),Be)&&this.reprojectedImage_.getResolution()==Te&&equals$1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ReprojImage(Ue,Be,e,Te,ke,(He,We,Cn)=>this.getImageInternal(He,We,Cn,Ue),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,Te,ke,Be){if(this.loader){const Ue=getRequestExtent(e,Te,ke,1),He=this.findNearestResolution(Te);if(this.image&&(this.static_||this.wantedProjection_===Be&&(this.wantedExtent_&&containsExtent(this.wantedExtent_,Ue)||containsExtent(this.image.getExtent(),Ue))&&(this.wantedResolution_&&fromResolutionLike(this.wantedResolution_)===He||fromResolutionLike(this.image.getResolution())===He)))return this.image;this.wantedProjection_=Be,this.wantedExtent_=Ue,this.wantedResolution_=He,this.image=new ImageWrapper(Ue,He,ke,this.loader),this.image.addEventListener(EventType.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const Te=e.target;let ke;switch(Te.getState()){case ImageState.LOADING:this.loading=!0,ke=ImageSourceEventType.IMAGELOADSTART;break;case ImageState.LOADED:this.loading=!1,ke=ImageSourceEventType.IMAGELOADEND;break;case ImageState.ERROR:this.loading=!1,ke=ImageSourceEventType.IMAGELOADERROR;break;default:return}this.hasListener(ke)&&this.dispatchEvent(new ImageSourceEvent(ke,Te))}}function defaultImageLoadFunction(Oe,e){Oe.getImage().src=e}function getRequestExtent(Oe,e,Te,ke){const Be=e/Te,Ue=getCenter(Oe),He=ceil(getWidth(Oe)/Be,DECIMALS),We=ceil(getHeight(Oe)/Be,DECIMALS),Cn=ceil((ke-1)*He/2,DECIMALS),En=He+2*Cn,An=ceil((ke-1)*We/2,DECIMALS),Sn=We+2*An;return getForViewAndSize(Ue,Be,0,[En,Sn])}const DEFAULT_VERSION="1.3.0",GETFEATUREINFO_IMAGE_SIZE=[101,101];function getRequestUrl(Oe,e,Te,ke,Be){Be.WIDTH=Te[0],Be.HEIGHT=Te[1];const Ue=ke.getAxisOrientation(),He=compareVersions(Be.VERSION,"1.3")>=0;Be[He?"CRS":"SRS"]=ke.getCode();const We=He&&Ue.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return Be.BBOX=We.join(","),appendParams(Oe,Be)}function getImageSrc(Oe,e,Te,ke,Be,Ue,He){Ue=Object.assign({REQUEST:"GetMap"},Ue);const We=e/Te,Cn=[round(getWidth(Oe)/We,DECIMALS),round(getHeight(Oe)/We,DECIMALS)];if(Te!=1)switch(He){case"geoserver":const An=90*Te+.5|0;"FORMAT_OPTIONS"in Ue?Ue.FORMAT_OPTIONS+=";dpi:"+An:Ue.FORMAT_OPTIONS="dpi:"+An;break;case"mapserver":Ue.MAP_RESOLUTION=90*Te;break;case"carmentaserver":case"qgis":Ue.DPI=90*Te;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(Be,Oe,Cn,ke,Ue)}function getRequestParams(Oe,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},Oe)}function createLoader(Oe){const e=Oe.hidpi===void 0?!0:Oe.hidpi,Te=get$3(Oe.projection||"EPSG:3857"),ke=Oe.ratio||1.5,Be=Oe.load||decode$1,Ue=Oe.crossOrigin??null;return(He,We,Cn)=>{He=getRequestExtent(He,We,Cn,ke),Cn!=1&&(!e||Oe.serverType===void 0)&&(Cn=1);const En=getImageSrc(He,We,Cn,Te,Oe.url,getRequestParams(Oe.params,"GetMap"),Oe.serverType),An=new Image;return An.crossOrigin=Ue,Be(An,En).then(Sn=>({image:Sn,extent:He,pixelRatio:Cn}))}}function getFeatureInfoUrl(Oe,e,Te){if(Oe.url===void 0)return;const ke=get$3(Oe.projection||"EPSG:3857"),Be=getForViewAndSize(e,Te,0,GETFEATUREINFO_IMAGE_SIZE),Ue={QUERY_LAYERS:Oe.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(Ue,getRequestParams(Oe.params,"GetFeatureInfo"),Oe.params);const He=floor((e[0]-Be[0])/Te,DECIMALS),We=floor((Be[3]-e[1])/Te,DECIMALS),Cn=compareVersions(Ue.VERSION,"1.3")>=0;return Ue[Cn?"I":"X"]=He,Ue[Cn?"J":"Y"]=We,getRequestUrl(Oe.url,Be,GETFEATUREINFO_IMAGE_SIZE,ke,Ue)}function getLegendUrl(Oe,e){if(Oe.url===void 0)return;const Te={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e!==void 0){const ke=get$3(Oe.projection||"EPSG:3857").getMetersPerUnit()||1,Be=28e-5;Te.SCALE=e*ke/Be}if(Object.assign(Te,Oe.params),Oe.params!==void 0&&Te.LAYER===void 0){const ke=Te.LAYERS;if(!(!Array.isArray(ke)||ke.length!==1))return;Te.LAYER=ke}return appendParams(Oe.url,Te)}class TileWMS extends TileImage{constructor(e){e=e||{};const Te=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=Te,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,Te,ke,Be){const Ue=get$3(ke),He=this.getProjection()||Ue;let We=this.getTileGrid();We||(We=this.getTileGridForProjection(He));const Cn=transform$1(e,Ue,He),En=calculateSourceResolution(He,Ue,e,Te),An=We.getZForResolution(En,this.zDirection),Sn=We.getResolution(An),Tn=We.getTileCoordForCoordAndZ(Cn,An);if(We.getResolutions().length<=Tn[0])return;let Ln=We.getTileCoordExtent(Tn,this.tmpExtent_);const Bn=this.gutter_;Bn!==0&&(Ln=buffer(Ln,Sn*Bn,Ln));const ei={QUERY_LAYERS:this.params_.LAYERS};Object.assign(ei,getRequestParams(this.params_,"GetFeatureInfo"),Be);const ti=Math.floor((Cn[0]-Ln[0])/Sn),ni=Math.floor((Ln[3]-Cn[1])/Sn);return ei[this.v13_?"I":"X"]=ti,ei[this.v13_?"J":"Y"]=ni,this.getRequestUrl_(Tn,Ln,1,He||Ue,ei)}getLegendUrl(e,Te){if(this.urls[0]===void 0)return;const ke={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(Te===void 0||Te.LAYER===void 0){const Be=this.params_.LAYERS;if(!(!Array.isArray(Be)||Be.length===1))return;ke.LAYER=Be}if(e!==void 0){const Be=this.getProjection()?this.getProjection().getMetersPerUnit():1,Ue=28e-5;ke.SCALE=e*Be/Ue}return Object.assign(ke,Te),appendParams(this.urls[0],ke)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,Te,ke,Be,Ue){const He=this.urls;if(!He)return;let We;if(He.length==1)We=He[0];else{const Cn=modulo(hash(e),He.length);We=He[Cn]}return getImageSrc(Te,(this.tileGrid||this.getTileGridForProjection(Be)).getResolution(e[0]),ke,Be,We,Ue,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const Te=[];for(const ke in this.params_)Te[e++]=ke+"-"+this.params_[ke];return Te.join("/")}setParams_(e){this.params_=e,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(e){this.setParams_(Object.assign({},e))}updateParams(e){this.setParams_(Object.assign(this.params_,e))}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,Te,ke){let Be=this.getTileGrid();if(Be||(Be=this.getTileGridForProjection(ke)),Be.getResolutions().length<=e[0])return;Te!=1&&(!this.hidpi_||this.serverType_===void 0)&&(Te=1);const Ue=Be.getResolution(e[0]);let He=Be.getTileCoordExtent(e,this.tmpExtent_);const We=this.gutter_;We!==0&&(He=buffer(He,Ue*We,He));const Cn=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,He,Te,ke,Cn)}}let WMTS$1=class extends TileImage{constructor(e){const Te=e.requestEncoding!==void 0?e.requestEncoding:"KVP",ke=e.tileGrid;let Be=e.urls;Be===void 0&&e.url!==void 0&&(Be=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:ke,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:Be,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=Te,this.setKey(this.getKeyForDimensions_()),Be&&Be.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(Be.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const Te=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),Te)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const Te in this.dimensions_)e.push(Te+"-"+this.dimensions_[Te]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const Te=this.requestEncoding_,ke={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};Te=="KVP"&&Object.assign(ke,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=Te=="KVP"?appendParams(e,ke):e.replace(/\{(\w+?)\}/g,function(He,We){return We.toLowerCase()in ke?ke[We.toLowerCase()]:He});const Be=this.tileGrid,Ue=this.dimensions_;return function(He,We,Cn){if(!He)return;const En={TileMatrix:Be.getMatrixId(He[0]),TileCol:He[1],TileRow:He[2]};Object.assign(En,Ue);let An=e;return Te=="KVP"?An=appendParams(An,En):An=An.replace(/\{(\w+?)\}/g,function(Sn,Tn){return encodeURIComponent(En[Tn])}),An}}};class ImageWMS extends ImageSource{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:defaultImageLoadFunction,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,Te,ke,Be){const Ue=get$3(ke),He=this.getProjection();He&&He!==Ue&&(Te=calculateSourceResolution(He,Ue,e,Te),e=transform$1(e,Ue,He));const We={url:this.url_,params:{...this.params_,...Be},projection:He||Ue};return getFeatureInfoUrl(We,e,Te)}getLegendUrl(e,Te){return getLegendUrl({url:this.url_,params:{...this.params_,...Te}},e)}getParams(){return this.params_}getImageInternal(e,Te,ke,Be){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==Be)&&(this.loaderProjection_=Be,this.loader=createLoader({crossOrigin:this.crossOrigin_,params:this.params_,projection:Be,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(Ue,He)=>(this.image.setImage(Ue),this.imageLoadFunction_(this.image,He),decode$1(Ue))})),super.getImageInternal(e,Te,ke,Be))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}setParams(e){this.params_=Object.assign({},e),this.changed()}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(Oe,e,Te){const ke=Oe.getCenterInternal();if(ke){const Be=[ke[0]+e[0],ke[1]+e[1]];Oe.animateInternal({duration:Te!==void 0?Te:250,easing:linear,center:Oe.getConstrainedCenter(Be)})}}function zoomByDelta(Oe,e,Te,ke){const Be=Oe.getZoom();if(Be===void 0)return;const Ue=Oe.getConstrainedZoom(Be+e),He=Oe.getResolutionForZoom(Ue);Oe.getAnimating()&&Oe.cancelAnimations(),Oe.animate({resolution:He,anchor:Te,duration:ke!==void 0?ke:250,easing:easeOut})}class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let Te=!1;if(e.type==MapBrowserEventType.DBLCLICK){const ke=e.originalEvent,Be=e.map,Ue=e.coordinate,He=ke.shiftKey?-this.delta_:this.delta_,We=Be.getView();zoomByDelta(We,He,Ue,this.duration_),ke.preventDefault(),Te=!0}return!Te}}function all(Oe){const e=arguments;return function(Te){let ke=!0;for(let Be=0,Ue=e.length;Be<Ue&&(ke=ke&&e[Be](Te),!!ke);++Be);return ke}}const altKeyOnly=function(Oe){const e=Oe.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(Oe){const e=Oe.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(Oe){const e=Oe.map.getTargetElement(),Te=e.getRootNode(),ke=Oe.map.getOwnerDocument().activeElement;return Te instanceof ShadowRoot?Te.host.contains(ke):e.contains(ke)},focusWithTabindex=function(Oe){const e=Oe.map.getTargetElement(),Te=e.getRootNode();return(Te instanceof ShadowRoot?Te.host:e).hasAttribute("tabindex")?focus(Oe):!0},always$1=TRUE,mouseActionButton=function(Oe){const e=Oe.originalEvent;return e instanceof PointerEvent&&e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,pointerMove=function(Oe){return Oe.type=="pointermove"},singleClick=function(Oe){return Oe.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(Oe){const e=Oe.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(Oe){const e=Oe.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(Oe){const e=Oe.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(Oe){const e=Oe.originalEvent,Te=e.target.tagName;return Te!=="INPUT"&&Te!=="SELECT"&&Te!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(Oe){const e=Oe.originalEvent;return e instanceof PointerEvent&&e.pointerType=="mouse"},primaryAction=function(Oe){const e=Oe.originalEvent;return e instanceof PointerEvent&&e.isPrimary&&e.button===0};class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,Te=this.endPixel_,ke="px",Be=this.element_.style;Be.left=Math.min(e[0],Te[0])+ke,Be.top=Math.min(e[1],Te[1])+ke,Be.width=Math.abs(Te[0]-e[0])+ke,Be.height=Math.abs(Te[1]-e[1])+ke}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const Te=this.element_.style;Te.left="inherit",Te.top="inherit",Te.width="inherit",Te.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,Te){this.startPixel_=e,this.endPixel_=Te,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,Te=this.endPixel_,Be=[e,[e[0],Te[1]],Te,[Te[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);Be[4]=Be[0].slice(),this.geometry_?this.geometry_.setCoordinates([Be]):this.geometry_=new Polygon([Be])}getGeometry(){return this.geometry_}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let Te=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const ke=this.handleUpEvent(e);this.handlingDownUpSequence=ke&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const ke=this.handleDownEvent(e);this.handlingDownUpSequence=ke,Te=this.stopDown(ke)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!Te}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(Oe){const e=Oe.length;let Te=0,ke=0;for(let Be=0;Be<e;Be++)Te+=Oe[Be].clientX,ke+=Oe[Be].clientY;return{clientX:Te/e,clientY:ke/e}}const DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,Te,ke){super(e),this.coordinate=Te,this.mapBrowserEvent=ke}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??mouseActionButton,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,Te,ke){const Be=ke[0]-Te[0],Ue=ke[1]-Te[1];return Be*Be+Ue*Ue>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const Te=this.boxEndCondition_(e,this.startPixel_,e.pixel);return Te&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(Te?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const Te=e.condition?e.condition:all(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all(focusWithTabindex,Te):Te,this.noKinetic_=!1}handleDragEvent(e){const Te=e.map;this.panning_||(this.panning_=!0,Te.getView().beginInteraction());const ke=this.targetPointers,Be=Te.getEventPixel(centroid(ke));if(ke.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(Be[0],Be[1]),this.lastCentroid){const Ue=[this.lastCentroid[0]-Be[0],Be[1]-this.lastCentroid[1]],We=e.map.getView();scale$3(Ue,We.getResolution()),rotate$1(Ue,We.getRotation()),We.adjustCenterInternal(Ue)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=Be,this.lastPointersCount_=ke.length,e.originalEvent.preventDefault()}handleUpEvent(e){const Te=e.map,ke=Te.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const Be=this.kinetic_.getDistance(),Ue=this.kinetic_.getAngle(),He=ke.getCenterInternal(),We=Te.getPixelFromCoordinateInternal(He),Cn=Te.getCoordinateFromPixelInternal([We[0]-Be*Math.cos(Ue),We[1]-Be*Math.sin(Ue)]);ke.animateInternal({center:ke.getConstrainedCenter(Cn),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,ke.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const ke=e.map.getView();return this.lastCentroid=null,ke.getAnimating()&&ke.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}function disable(Oe){if(Oe!==void 0)return 0}function none$1(Oe){if(Oe!==void 0)return Oe}function createSnapToN(Oe){const e=2*Math.PI/Oe;return function(Te,ke){if(ke)return Te;if(Te!==void 0)return Te=Math.floor(Te/e+.5)*e,Te}}function createSnapToZero(Oe){const e=toRadians(5);return function(Te,ke){return ke||Te===void 0?Te:Math.abs(Te)<=e?0:Te}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const Te=e.map,ke=Te.getView();if(ke.getConstraints().rotation===disable)return;const Be=Te.getSize(),Ue=e.pixel,He=Math.atan2(Be[1]/2-Ue[1],Ue[0]-Be[0]/2);if(this.lastAngle_!==void 0){const We=He-this.lastAngle_;ke.adjustRotationInternal(-We)}this.lastAngle_=He}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class DragZoom extends DragBox{constructor(e){e=e||{};const Te=e.condition?e.condition:shiftKeyOnly;super({condition:Te,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const ke=this.getMap().getView();let Be=this.getGeometry();if(this.out_){const Ue=ke.rotatedExtentForGeometry(Be),He=ke.getResolutionForExtentInternal(Ue),We=ke.getResolution()/He;Be=Be.clone(),Be.scale(We*We)}ke.fitInternal(Be,{duration:this.duration_,easing:easeOut})}}class MapEvent extends BaseEvent{constructor(e,Te,ke){super(e),this.map=Te,this.frameState=ke!==void 0?ke:null}}class MapBrowserEvent extends MapEvent{constructor(e,Te,ke,Be,Ue,He){super(e,Te,Ue),this.originalEvent=ke,this.pixel_=null,this.coordinate_=null,this.dragging=Be!==void 0?Be:!1,this.activePointers=He}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const ViewHint={ANIMATING:0,INTERACTING:1},RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},NO_COLOR=[NaN,NaN,NaN,0];let colorParseContext;function getColorParseContext(){return colorParseContext||(colorParseContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),colorParseContext}const rgbModernRegEx=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rgbLegacyAbsoluteRegEx=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rgbLegacyPercentageRegEx=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,hexRegEx=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function toColorComponent(Oe,e){return Oe.endsWith("%")?Number(Oe.substring(0,Oe.length-1))/e:Number(Oe)}function throwInvalidColor(Oe){throw new Error('failed to parse "'+Oe+'" as color')}function parseRgba(Oe){if(Oe.toLowerCase().startsWith("rgb")){const Ue=Oe.match(rgbLegacyAbsoluteRegEx)||Oe.match(rgbModernRegEx)||Oe.match(rgbLegacyPercentageRegEx);if(Ue){const He=Ue[4],We=100/255;return[clamp$1(toColorComponent(Ue[1],We)+.5|0,0,255),clamp$1(toColorComponent(Ue[2],We)+.5|0,0,255),clamp$1(toColorComponent(Ue[3],We)+.5|0,0,255),He!==void 0?clamp$1(toColorComponent(He,100),0,1):1]}throwInvalidColor(Oe)}if(Oe.startsWith("#")){if(hexRegEx.test(Oe)){const Ue=Oe.substring(1),He=Ue.length<=4?1:2,We=[0,0,0,255];for(let Cn=0,En=Ue.length;Cn<En;Cn+=He){let An=parseInt(Ue.substring(Cn,Cn+He),16);He===1&&(An+=An<<4),We[Cn/He]=An}return We[3]=We[3]/255,We}throwInvalidColor(Oe)}const e=getColorParseContext();e.fillStyle="#abcdef";let Te=e.fillStyle;e.fillStyle=Oe,e.fillStyle===Te&&(e.fillStyle="#fedcba",Te=e.fillStyle,e.fillStyle=Oe,e.fillStyle===Te&&throwInvalidColor(Oe));const ke=e.fillStyle;if(ke.startsWith("#")||ke.startsWith("rgba"))return parseRgba(ke);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const Be=Array.from(e.getImageData(0,0,1,1).data);return Be[3]=toFixed(Be[3]/255,3),Be}function asString(Oe){return typeof Oe=="string"?Oe:toString(Oe)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(Oe){if(Oe.length===4)return Oe;const e=Oe.slice();return e[3]=1,e}function b1(Oe){return Oe>.0031308?Math.pow(Oe,1/2.4)*269.025-14.025:Oe*3294.6}function b2(Oe){return Oe>.2068965?Math.pow(Oe,3):(Oe-4/29)*(108/841)}function a1(Oe){return Oe>10.314724?Math.pow((Oe+14.025)/269.025,2.4):Oe/3294.6}function a2(Oe){return Oe>.0088564?Math.pow(Oe,1/3):Oe/(108/841)+4/29}function rgbaToLcha(Oe){const e=a1(Oe[0]),Te=a1(Oe[1]),ke=a1(Oe[2]),Be=a2(e*.222488403+Te*.716873169+ke*.06060791),Ue=500*(a2(e*.452247074+Te*.399439023+ke*.148375274)-Be),He=200*(Be-a2(e*.016863605+Te*.117638439+ke*.865350722)),We=Math.atan2(He,Ue)*(180/Math.PI);return[116*Be-16,Math.sqrt(Ue*Ue+He*He),We<0?We+360:We,Oe[3]]}function lchaToRgba(Oe){const e=(Oe[0]+16)/116,Te=Oe[1],ke=Oe[2]*Math.PI/180,Be=b2(e),Ue=b2(e+Te/500*Math.cos(ke)),He=b2(e-Te/200*Math.sin(ke)),We=b1(Ue*3.021973625-Be*1.617392459-He*.404875592),Cn=b1(Ue*-.943766287+Be*1.916279586+He*.027607165),En=b1(Ue*.069407491-Be*.22898585+He*1.159737864);return[clamp$1(We+.5|0,0,255),clamp$1(Cn+.5|0,0,255),clamp$1(En+.5|0,0,255),Oe[3]]}function fromString(Oe){if(Oe==="none")return NO_COLOR;if(cache.hasOwnProperty(Oe))return cache[Oe];if(cacheSize>=MAX_CACHE_SIZE){let Te=0;for(const ke in cache)(Te++&3)===0&&(delete cache[ke],--cacheSize)}const e=parseRgba(Oe);e.length!==4&&throwInvalidColor(Oe);for(const Te of e)isNaN(Te)&&throwInvalidColor(Oe);return cache[Oe]=e,++cacheSize,e}function asArray(Oe){return Array.isArray(Oe)?Oe:fromString(Oe)}function toString(Oe){let e=Oe[0];e!=(e|0)&&(e=e+.5|0);let Te=Oe[1];Te!=(Te|0)&&(Te=Te+.5|0);let ke=Oe[2];ke!=(ke|0)&&(ke=ke+.5|0);const Be=Oe[3]===void 0?1:Math.round(Oe[3]*1e3)/1e3;return"rgba("+e+","+Te+","+ke+","+Be+")"}class IconImageCache{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const Te in this.cache_){const ke=this.cache_[Te];(e++&3)===0&&!ke.hasListener()&&(delete this.cache_[Te],delete this.patternCache_[Te],--this.cacheSize_)}}}get(e,Te,ke){const Be=getCacheKey$1(e,Te,ke);return Be in this.cache_?this.cache_[Be]:null}getPattern(e,Te,ke){const Be=getCacheKey$1(e,Te,ke);return Be in this.patternCache_?this.patternCache_[Be]:null}set(e,Te,ke,Be,Ue){const He=getCacheKey$1(e,Te,ke),We=He in this.cache_;this.cache_[He]=Be,Ue&&(Be.getImageState()===ImageState.IDLE&&Be.load(),Be.getImageState()===ImageState.LOADING?Be.ready().then(()=>{this.patternCache_[He]=getSharedCanvasContext2D().createPattern(Be.getImage(1),"repeat")}):this.patternCache_[He]=getSharedCanvasContext2D().createPattern(Be.getImage(1),"repeat")),We||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getCacheKey$1(Oe,e,Te){const ke=Te?asArray(Te):"null";return e+":"+Oe+":"+ke}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(e,Te,ke,Be,Ue){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=ke,this.canvas_={},this.color_=Ue,this.imageState_=Be===void 0?ImageState.IDLE:Be,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=Te,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],Te=this.size_[1],ke=createCanvasContext2D(e,Te);ke.fillRect(0,0,e,Te),this.hitDetectionImage_=ke.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const Te=this.image_,ke=createCanvasContext2D(Math.ceil(Te.width*e),Math.ceil(Te.height*e)),Be=ke.canvas;ke.scale(e,e),ke.drawImage(Te,0,0),ke.globalCompositeOperation="multiply",ke.fillStyle=asString(this.color_),ke.fillRect(0,0,Be.width/e,Be.height/e),ke.globalCompositeOperation="destination-in",ke.drawImage(Te,0,0),this.canvas_[e]=Be}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)e();else{const Te=()=>{(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)&&(this.removeEventListener(EventType.CHANGE,Te),e())};this.addEventListener(EventType.CHANGE,Te)}})),this.ready_}}function get$2(Oe,e,Te,ke,Be,Ue){let He=e===void 0?void 0:shared.get(e,Te,Be);return He||(He=new IconImage(Oe,Oe&&"src"in Oe?Oe.src||void 0:e,Te,ke,Be),shared.set(e,Te,Be,He,Ue)),Ue&&He&&!shared.getPattern(e,Te,Be)&&shared.set(e,Te,Be,He,Ue),He}function asColorLike(Oe){return Oe?Array.isArray(Oe)?toString(Oe):typeof Oe=="object"&&"src"in Oe?asCanvasPattern(Oe):Oe:null}function asCanvasPattern(Oe){if(!Oe.offset||!Oe.size)return shared.getPattern(Oe.src,"anonymous",Oe.color);const e=Oe.src+":"+Oe.offset,Te=shared.getPattern(e,void 0,Oe.color);if(Te)return Te;const ke=shared.get(Oe.src,"anonymous",null);if(ke.getImageState()!==ImageState.LOADED)return null;const Be=createCanvasContext2D(Oe.size[0],Oe.size[1]);return Be.drawImage(ke.getImage(1),Oe.offset[0],Oe.offset[1],Oe.size[0],Oe.size[1],0,0,Oe.size[0],Oe.size[1]),get$2(Be.canvas,e,void 0,ImageState.LOADED,Oe.color,!0),shared.getPattern(e,void 0,Oe.color)}class VectorContext{drawCustom(e,Te,ke,Be,Ue){}drawGeometry(e){}setStyle(e){}drawCircle(e,Te,ke){}drawFeature(e,Te,ke){}drawGeometryCollection(e,Te,ke){}drawLineString(e,Te,ke){}drawMultiLineString(e,Te,ke){}drawMultiPoint(e,Te,ke){}drawMultiPolygon(e,Te,ke){}drawPoint(e,Te,ke){}drawPolygon(e,Te,ke){}drawText(e,Te,ke){}setFillStrokeStyle(e,Te){}setImageStyle(e,Te){}setTextStyle(e,Te){}}const defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",Te=["monospace","serif"],ke=Te.length,Be="wmytzilWMYTZIL@#/&?$%10";let Ue,He;function We(En,An,Sn){let Tn=!0;for(let Ln=0;Ln<ke;++Ln){const Bn=Te[Ln];if(He=measureTextWidth(En+" "+An+" "+e+Bn,Be),Sn!=Bn){const ei=measureTextWidth(En+" "+An+" "+e+Sn+","+Bn,Be);Tn=Tn&&ei!=He}}return!!Tn}function Cn(){let En=!0;const An=checkedFonts.getKeys();for(let Sn=0,Tn=An.length;Sn<Tn;++Sn){const Ln=An[Sn];if(checkedFonts.get(Ln)<100){const[Bn,ei,ti]=Ln.split(`
`);We(Bn,ei,ti)?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(Ln,100)):(checkedFonts.set(Ln,checkedFonts.get(Ln)+1,!0),En=!1)}}En&&(clearInterval(Ue),Ue=void 0)}return function(En){const An=getFontParameters(En);if(!An)return;const Sn=An.families;for(let Tn=0,Ln=Sn.length;Tn<Ln;++Tn){const Bn=Sn[Tn],ei=An.style+`
`+An.weight+`
`+Bn;checkedFonts.get(ei)===void 0&&(checkedFonts.set(ei,100,!0),We(An.style,An.weight,Bn)||(checkedFonts.set(ei,0,!0),Ue===void 0&&(Ue=setInterval(Cn,32))))}}}(),measureTextHeight=function(){let Oe;return function(e){let Te=textHeights[e];if(Te==null){if(WORKER_OFFSCREEN_CANVAS){const ke=getFontParameters(e),Be=measureText$1(e,"Žg");Te=(isNaN(Number(ke.lineHeight))?1.2:Number(ke.lineHeight))*(Be.actualBoundingBoxAscent+Be.actualBoundingBoxDescent)}else Oe||(Oe=document.createElement("div"),Oe.innerHTML="M",Oe.style.minHeight="0",Oe.style.maxHeight="none",Oe.style.height="auto",Oe.style.padding="0",Oe.style.border="none",Oe.style.position="absolute",Oe.style.display="block",Oe.style.left="-99999px"),Oe.style.font=e,document.body.appendChild(Oe),Te=Oe.offsetHeight,document.body.removeChild(Oe);textHeights[e]=Te}return Te}}();function measureText$1(Oe,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),Oe!=measureFont&&(measureContext$1.font=Oe,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(Oe,e){return measureText$1(Oe,e).width}function measureAndCacheTextWidth(Oe,e,Te){if(e in Te)return Te[e];const ke=e.split(`
`).reduce((Be,Ue)=>Math.max(Be,measureTextWidth(Oe,Ue)),0);return Te[e]=ke,ke}function getTextDimensions(Oe,e){const Te=[],ke=[],Be=[];let Ue=0,He=0,We=0,Cn=0;for(let En=0,An=e.length;En<=An;En+=2){const Sn=e[En];if(Sn===`
`||En===An){Ue=Math.max(Ue,He),Be.push(He),He=0,We+=Cn,Cn=0;continue}const Tn=e[En+1]||Oe.font,Ln=measureTextWidth(Tn,Sn);Te.push(Ln),He+=Ln;const Bn=measureTextHeight(Tn);ke.push(Bn),Cn=Math.max(Cn,Bn)}return{width:Ue,height:We,widths:Te,heights:ke,lineWidths:Be}}function drawImageOrLabel(Oe,e,Te,ke,Be,Ue,He,We,Cn,En,An){Oe.save(),Te!==1&&(Oe.globalAlpha===void 0?Oe.globalAlpha=Sn=>Sn.globalAlpha*=Te:Oe.globalAlpha*=Te),e&&Oe.transform.apply(Oe,e),ke.contextInstructions?(Oe.translate(Cn,En),Oe.scale(An[0],An[1]),executeLabelInstructions(ke,Oe)):An[0]<0||An[1]<0?(Oe.translate(Cn,En),Oe.scale(An[0],An[1]),Oe.drawImage(ke,Be,Ue,He,We,0,0,He,We)):Oe.drawImage(ke,Be,Ue,He,We,Cn,En,He*An[0],We*An[1]),Oe.restore()}function executeLabelInstructions(Oe,e){const Te=Oe.contextInstructions;for(let ke=0,Be=Te.length;ke<Be;ke+=2)Array.isArray(Te[ke+1])?e[Te[ke]].apply(e,Te[ke+1]):e[Te[ke]]=Te[ke+1]}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class CanvasBuilder extends VectorContext{constructor(e,Te,ke,Be){super(),this.tolerance=e,this.maxExtent=Te,this.pixelRatio=Be,this.maxLineWidth=0,this.resolution=ke,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const Te=this.pixelRatio;return Te==1?e:e.map(function(ke){return ke*Te})}appendFlatPointCoordinates(e,Te){const ke=this.getBufferedMaxExtent(),Be=this.tmpCoordinate_,Ue=this.coordinates;let He=Ue.length;for(let We=0,Cn=e.length;We<Cn;We+=Te)Be[0]=e[We],Be[1]=e[We+1],containsCoordinate(ke,Be)&&(Ue[He++]=Be[0],Ue[He++]=Be[1]);return He}appendFlatLineCoordinates(e,Te,ke,Be,Ue,He){const We=this.coordinates;let Cn=We.length;const En=this.getBufferedMaxExtent();He&&(Te+=Be);let An=e[Te],Sn=e[Te+1];const Tn=this.tmpCoordinate_;let Ln=!0,Bn,ei,ti;for(Bn=Te+Be;Bn<ke;Bn+=Be)Tn[0]=e[Bn],Tn[1]=e[Bn+1],ti=coordinateRelationship(En,Tn),ti!==ei?(Ln&&(We[Cn++]=An,We[Cn++]=Sn,Ln=!1),We[Cn++]=Tn[0],We[Cn++]=Tn[1]):ti===Relationship.INTERSECTING?(We[Cn++]=Tn[0],We[Cn++]=Tn[1],Ln=!1):Ln=!0,An=Tn[0],Sn=Tn[1],ei=ti;return(Ue&&Ln||Bn===Te+Be)&&(We[Cn++]=An,We[Cn++]=Sn),Cn}drawCustomCoordinates_(e,Te,ke,Be,Ue){for(let He=0,We=ke.length;He<We;++He){const Cn=ke[He],En=this.appendFlatLineCoordinates(e,Te,Cn,Be,!1,!1);Ue.push(En),Te=Cn}return Te}drawCustom(e,Te,ke,Be,Ue){this.beginGeometry(e,Te,Ue);const He=e.getType(),We=e.getStride(),Cn=this.coordinates.length;let En,An,Sn,Tn,Ln;switch(He){case"MultiPolygon":En=e.getOrientedFlatCoordinates(),Tn=[];const Bn=e.getEndss();Ln=0;for(let ei=0,ti=Bn.length;ei<ti;++ei){const ni=[];Ln=this.drawCustomCoordinates_(En,Ln,Bn[ei],We,ni),Tn.push(ni)}this.instructions.push([Instruction.CUSTOM,Cn,Tn,e,ke,inflateMultiCoordinatesArray,Ue]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Cn,Tn,e,Be||ke,inflateMultiCoordinatesArray,Ue]);break;case"Polygon":case"MultiLineString":Sn=[],En=He=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),Ln=this.drawCustomCoordinates_(En,0,e.getEnds(),We,Sn),this.instructions.push([Instruction.CUSTOM,Cn,Sn,e,ke,inflateCoordinatesArray,Ue]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Cn,Sn,e,Be||ke,inflateCoordinatesArray,Ue]);break;case"LineString":case"Circle":En=e.getFlatCoordinates(),An=this.appendFlatLineCoordinates(En,0,En.length,We,!1,!1),this.instructions.push([Instruction.CUSTOM,Cn,An,e,ke,inflateCoordinates,Ue]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Cn,An,e,Be||ke,inflateCoordinates,Ue]);break;case"MultiPoint":En=e.getFlatCoordinates(),An=this.appendFlatPointCoordinates(En,We),An>Cn&&(this.instructions.push([Instruction.CUSTOM,Cn,An,e,ke,inflateCoordinates,Ue]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Cn,An,e,Be||ke,inflateCoordinates,Ue]));break;case"Point":En=e.getFlatCoordinates(),this.coordinates.push(En[0],En[1]),An=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,Cn,An,e,ke,void 0,Ue]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Cn,An,e,Be||ke,void 0,Ue]);break}this.endGeometry(Te)}beginGeometry(e,Te,ke){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,Te,0,e,ke],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,Te,0,e,ke],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let Te;const ke=e.length;let Be,Ue,He=-1;for(Te=0;Te<ke;++Te)Be=e[Te],Ue=Be[0],Ue==Instruction.END_GEOMETRY?He=Te:Ue==Instruction.BEGIN_GEOMETRY&&(Be[2]=Te,reverseSubArray(this.hitDetectionInstructions,He,Te),He=-1)}fillStyleToState(e,Te={}){if(e){const ke=e.getColor();Te.fillPatternScale=ke&&typeof ke=="object"&&"src"in ke?this.pixelRatio:1,Te.fillStyle=asColorLike(ke||defaultFillStyle)}else Te.fillStyle=void 0;return Te}strokeStyleToState(e,Te={}){if(e){const ke=e.getColor();Te.strokeStyle=asColorLike(ke||defaultStrokeStyle);const Be=e.getLineCap();Te.lineCap=Be!==void 0?Be:defaultLineCap;const Ue=e.getLineDash();Te.lineDash=Ue?Ue.slice():defaultLineDash;const He=e.getLineDashOffset();Te.lineDashOffset=He||defaultLineDashOffset;const We=e.getLineJoin();Te.lineJoin=We!==void 0?We:defaultLineJoin;const Cn=e.getWidth();Te.lineWidth=Cn!==void 0?Cn:defaultLineWidth;const En=e.getMiterLimit();Te.miterLimit=En!==void 0?En:defaultMiterLimit,Te.lineWidth>this.maxLineWidth&&(this.maxLineWidth=Te.lineWidth,this.bufferedMaxExtent_=null)}else Te.strokeStyle=void 0,Te.lineCap=void 0,Te.lineDash=null,Te.lineDashOffset=void 0,Te.lineJoin=void 0,Te.lineWidth=void 0,Te.miterLimit=void 0;return Te}setFillStrokeStyle(e,Te){const ke=this.state;this.fillStyleToState(e,ke),this.strokeStyleToState(Te,ke)}createFill(e){const Te=e.fillStyle,ke=[Instruction.SET_FILL_STYLE,Te];return typeof Te!="string"&&ke.push(e.fillPatternScale),ke}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,e.lineDash?this.applyPixelRatio(e.lineDash):null,e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,Te){const ke=e.fillStyle;(typeof ke!="string"||e.currentFillStyle!=ke)&&(ke!==void 0&&this.instructions.push(Te.call(this,e)),e.currentFillStyle=ke)}updateStrokeStyle(e,Te){const ke=e.strokeStyle,Be=e.lineCap,Ue=e.lineDash,He=e.lineDashOffset,We=e.lineJoin,Cn=e.lineWidth,En=e.miterLimit;(e.currentStrokeStyle!=ke||e.currentLineCap!=Be||Ue!=e.currentLineDash&&!equals$2(e.currentLineDash,Ue)||e.currentLineDashOffset!=He||e.currentLineJoin!=We||e.currentLineWidth!=Cn||e.currentMiterLimit!=En)&&(ke!==void 0&&Te.call(this,e),e.currentStrokeStyle=ke,e.currentLineCap=Be,e.currentLineDash=Ue,e.currentLineDashOffset=He,e.currentLineJoin=We,e.currentLineWidth=Cn,e.currentMiterLimit=En)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const Te=[Instruction.END_GEOMETRY,e];this.instructions.push(Te),this.hitDetectionInstructions.push(Te)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,Te,ke,Be){super(e,Te,ke,Be),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,Te,ke){if(!this.image_||this.maxExtent&&!containsCoordinate(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,Te,ke);const Be=e.getFlatCoordinates(),Ue=e.getStride(),He=this.coordinates.length,We=this.appendFlatPointCoordinates(Be,Ue);this.instructions.push([Instruction.DRAW_IMAGE,He,We,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,He,We,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(Te)}drawMultiPoint(e,Te,ke){if(!this.image_)return;this.beginGeometry(e,Te,ke);const Be=e.getFlatCoordinates(),Ue=[];for(let Cn=0,En=Be.length;Cn<En;Cn+=e.getStride())(!this.maxExtent||containsCoordinate(this.maxExtent,Be.slice(Cn,Cn+2)))&&Ue.push(Be[Cn],Be[Cn+1]);const He=this.coordinates.length,We=this.appendFlatPointCoordinates(Ue,2);this.instructions.push([Instruction.DRAW_IMAGE,He,We,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,He,We,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(Te)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,Te){const ke=e.getAnchor(),Be=e.getSize(),Ue=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=ke[0],this.anchorY_=ke[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=Be[1],this.opacity_=e.getOpacity(),this.originX_=Ue[0],this.originY_=Ue[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=Be[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=Te}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,Te,ke,Be){super(e,Te,ke,Be)}drawFlatCoordinates_(e,Te,ke,Be){const Ue=this.coordinates.length,He=this.appendFlatLineCoordinates(e,Te,ke,Be,!1,!1),We=[Instruction.MOVE_TO_LINE_TO,Ue,He];return this.instructions.push(We),this.hitDetectionInstructions.push(We),ke}drawLineString(e,Te,ke){const Be=this.state,Ue=Be.strokeStyle,He=Be.lineWidth;if(Ue===void 0||He===void 0)return;this.updateStrokeStyle(Be,this.applyStroke),this.beginGeometry(e,Te,ke),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Be.strokeStyle,Be.lineWidth,Be.lineCap,Be.lineJoin,Be.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const We=e.getFlatCoordinates(),Cn=e.getStride();this.drawFlatCoordinates_(We,0,We.length,Cn),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(Te)}drawMultiLineString(e,Te,ke){const Be=this.state,Ue=Be.strokeStyle,He=Be.lineWidth;if(Ue===void 0||He===void 0)return;this.updateStrokeStyle(Be,this.applyStroke),this.beginGeometry(e,Te,ke),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Be.strokeStyle,Be.lineWidth,Be.lineCap,Be.lineJoin,Be.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const We=e.getEnds(),Cn=e.getFlatCoordinates(),En=e.getStride();let An=0;for(let Sn=0,Tn=We.length;Sn<Tn;++Sn)An=this.drawFlatCoordinates_(Cn,An,We[Sn],En);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(Te)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,Te,ke,Be){super(e,Te,ke,Be)}drawFlatCoordinatess_(e,Te,ke,Be){const Ue=this.state,He=Ue.fillStyle!==void 0,We=Ue.strokeStyle!==void 0,Cn=ke.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let En=0;En<Cn;++En){const An=ke[En],Sn=this.coordinates.length,Tn=this.appendFlatLineCoordinates(e,Te,An,Be,!0,!We),Ln=[Instruction.MOVE_TO_LINE_TO,Sn,Tn];this.instructions.push(Ln),this.hitDetectionInstructions.push(Ln),We&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),Te=An}return He&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),We&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),Te}drawCircle(e,Te,ke){const Be=this.state,Ue=Be.fillStyle,He=Be.strokeStyle;if(Ue===void 0&&He===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,Te,ke),Be.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),Be.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Be.strokeStyle,Be.lineWidth,Be.lineCap,Be.lineJoin,Be.miterLimit,defaultLineDash,defaultLineDashOffset]);const We=e.getFlatCoordinates(),Cn=e.getStride(),En=this.coordinates.length;this.appendFlatLineCoordinates(We,0,We.length,Cn,!1,!1);const An=[Instruction.CIRCLE,En];this.instructions.push(beginPathInstruction,An),this.hitDetectionInstructions.push(beginPathInstruction,An),Be.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),Be.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(Te)}drawPolygon(e,Te,ke){const Be=this.state,Ue=Be.fillStyle,He=Be.strokeStyle;if(Ue===void 0&&He===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,Te,ke),Be.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),Be.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Be.strokeStyle,Be.lineWidth,Be.lineCap,Be.lineJoin,Be.miterLimit,defaultLineDash,defaultLineDashOffset]);const We=e.getEnds(),Cn=e.getOrientedFlatCoordinates(),En=e.getStride();this.drawFlatCoordinatess_(Cn,0,We,En),this.endGeometry(Te)}drawMultiPolygon(e,Te,ke){const Be=this.state,Ue=Be.fillStyle,He=Be.strokeStyle;if(Ue===void 0&&He===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,Te,ke),Be.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),Be.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Be.strokeStyle,Be.lineWidth,Be.lineCap,Be.lineJoin,Be.miterLimit,defaultLineDash,defaultLineDashOffset]);const We=e.getEndss(),Cn=e.getOrientedFlatCoordinates(),En=e.getStride();let An=0;for(let Sn=0,Tn=We.length;Sn<Tn;++Sn)An=this.drawFlatCoordinatess_(Cn,An,We[Sn],En);this.endGeometry(Te)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const Te=this.coordinates;for(let ke=0,Be=Te.length;ke<Be;++ke)Te[ke]=snap(Te[ke],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(Oe,e,Te,ke,Be){const Ue=[];let He=Te,We=0,Cn=e.slice(Te,2);for(;We<Oe&&He+Be<ke;){const[En,An]=Cn.slice(-2),Sn=e[He+Be],Tn=e[He+Be+1],Ln=Math.sqrt((Sn-En)*(Sn-En)+(Tn-An)*(Tn-An));if(We+=Ln,We>=Oe){const Bn=(Oe-We+Ln)/Ln,ei=lerp(En,Sn,Bn),ti=lerp(An,Tn,Bn);Cn.push(ei,ti),Ue.push(Cn),Cn=[ei,ti],We==Oe&&(He+=Be),We=0}else if(We<Oe)Cn.push(e[He+Be],e[He+Be+1]),He+=Be;else{const Bn=Ln-We,ei=lerp(En,Sn,Bn/Ln),ti=lerp(An,Tn,Bn/Ln);Cn.push(ei,ti),Ue.push(Cn),Cn=[ei,ti],We=0,He+=Be}}return We>0&&Ue.push(Cn),Ue}function matchingChunk(Oe,e,Te,ke,Be){let Ue=Te,He=Te,We=0,Cn=0,En=Te,An,Sn,Tn,Ln,Bn,ei,ti,ni,ri,si;for(Sn=Te;Sn<ke;Sn+=Be){const ai=e[Sn],li=e[Sn+1];Bn!==void 0&&(ri=ai-Bn,si=li-ei,Ln=Math.sqrt(ri*ri+si*si),ti!==void 0&&(Cn+=Tn,An=Math.acos((ti*ri+ni*si)/(Tn*Ln)),An>Oe&&(Cn>We&&(We=Cn,Ue=En,He=Sn),Cn=0,En=Sn-Be)),Tn=Ln,ti=ri,ni=si),Bn=ai,ei=li}return Cn+=Ln,Cn>We?[En,Sn]:[Ue,He]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,Te,ke,Be){super(e,Te,ke,Be),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,Te,ke){const Be=this.textFillState_,Ue=this.textStrokeState_,He=this.textState_;if(this.text_===""||!He||!Be&&!Ue)return;const We=this.coordinates;let Cn=We.length;const En=e.getType();let An=null,Sn=e.getStride();if(He.placement==="line"&&(En=="LineString"||En=="MultiLineString"||En=="Polygon"||En=="MultiPolygon")){if(!intersects$1(this.maxExtent,e.getExtent()))return;let Tn;if(An=e.getFlatCoordinates(),En=="LineString")Tn=[An.length];else if(En=="MultiLineString")Tn=e.getEnds();else if(En=="Polygon")Tn=e.getEnds().slice(0,1);else if(En=="MultiPolygon"){const ti=e.getEndss();Tn=[];for(let ni=0,ri=ti.length;ni<ri;++ni)Tn.push(ti[ni][0])}this.beginGeometry(e,Te,ke);const Ln=He.repeat,Bn=Ln?void 0:He.textAlign;let ei=0;for(let ti=0,ni=Tn.length;ti<ni;++ti){let ri;Ln?ri=lineChunk(Ln*this.resolution,An,ei,Tn[ti],Sn):ri=[An.slice(ei,Tn[ti])];for(let si=0,ai=ri.length;si<ai;++si){const li=ri[si];let Pi=0,pi=li.length;if(Bn==null){const Ri=matchingChunk(He.maxAngle,li,0,li.length,2);Pi=Ri[0],pi=Ri[1]}for(let Ri=Pi;Ri<pi;Ri+=Sn)We.push(li[Ri],li[Ri+1]);const vi=We.length;ei=Tn[ti],this.drawChars_(Cn,vi),Cn=vi}}this.endGeometry(Te)}else{let Tn=He.overflow?null:[];switch(En){case"Point":case"MultiPoint":An=e.getFlatCoordinates();break;case"LineString":An=e.getFlatMidpoint();break;case"Circle":An=e.getCenter();break;case"MultiLineString":An=e.getFlatMidpoints(),Sn=2;break;case"Polygon":An=e.getFlatInteriorPoint(),He.overflow||Tn.push(An[2]/this.resolution),Sn=3;break;case"MultiPolygon":const ai=e.getFlatInteriorPoints();An=[];for(let li=0,Pi=ai.length;li<Pi;li+=3)He.overflow||Tn.push(ai[li+2]/this.resolution),An.push(ai[li],ai[li+1]);if(An.length===0)return;Sn=2;break}const Ln=this.appendFlatPointCoordinates(An,Sn);if(Ln===Cn)return;if(Tn&&(Ln-Cn)/2!==An.length/Sn){let ai=Cn/2;Tn=Tn.filter((li,Pi)=>{const pi=We[(ai+Pi)*2]===An[Pi*Sn]&&We[(ai+Pi)*2+1]===An[Pi*Sn+1];return pi||--ai,pi})}this.saveTextStates_();const Bn=He.backgroundFill?this.createFill(this.fillStyleToState(He.backgroundFill)):null,ei=He.backgroundStroke?this.createStroke(this.strokeStyleToState(He.backgroundStroke)):null;this.beginGeometry(e,Te,ke);let ti=He.padding;if(ti!=defaultPadding&&(He.scale[0]<0||He.scale[1]<0)){let ai=He.padding[0],li=He.padding[1],Pi=He.padding[2],pi=He.padding[3];He.scale[0]<0&&(li=-li,pi=-pi),He.scale[1]<0&&(ai=-ai,Pi=-Pi),ti=[ai,li,Pi,pi]}const ni=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,Cn,Ln,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,ti==defaultPadding?defaultPadding:ti.map(function(ai){return ai*ni}),Bn,ei,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,Tn]);const ri=1/ni,si=Bn?Bn.slice(0):null;si&&(si[1]=defaultFillStyle),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,Cn,Ln,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[ri,ri],NaN,this.declutterMode_,this.declutterImageWithText_,ti,si,ei,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,Tn]),this.endGeometry(Te)}}saveTextStates_(){const e=this.textStrokeState_,Te=this.textState_,ke=this.textFillState_,Be=this.strokeKey_;e&&(Be in this.strokeStates||(this.strokeStates[Be]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const Ue=this.textKey_;Ue in this.textStates||(this.textStates[Ue]={font:Te.font,textAlign:Te.textAlign||defaultTextAlign,justify:Te.justify,textBaseline:Te.textBaseline||defaultTextBaseline,scale:Te.scale});const He=this.fillKey_;ke&&(He in this.fillStates||(this.fillStates[He]={fillStyle:ke.fillStyle}))}drawChars_(e,Te){const ke=this.textStrokeState_,Be=this.textState_,Ue=this.strokeKey_,He=this.textKey_,We=this.fillKey_;this.saveTextStates_();const Cn=this.pixelRatio,En=TEXT_ALIGN[Be.textBaseline],An=this.textOffsetY_*Cn,Sn=this.text_,Tn=ke?ke.lineWidth*Math.abs(Be.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,Te,En,Be.overflow,We,Be.maxAngle,Cn,An,Ue,Tn*Cn,Sn,He,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,Te,En,Be.overflow,We&&defaultFillStyle,Be.maxAngle,Cn,An,Ue,Tn*Cn,Sn,He,1/Cn,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,Te){let ke,Be,Ue;if(!e)this.text_="";else{const He=e.getFill();He?(Be=this.textFillState_,Be||(Be={},this.textFillState_=Be),Be.fillStyle=asColorLike(He.getColor()||defaultFillStyle)):(Be=null,this.textFillState_=Be);const We=e.getStroke();if(!We)Ue=null,this.textStrokeState_=Ue;else{Ue=this.textStrokeState_,Ue||(Ue={},this.textStrokeState_=Ue);const ei=We.getLineDash(),ti=We.getLineDashOffset(),ni=We.getWidth(),ri=We.getMiterLimit();Ue.lineCap=We.getLineCap()||defaultLineCap,Ue.lineDash=ei?ei.slice():defaultLineDash,Ue.lineDashOffset=ti===void 0?defaultLineDashOffset:ti,Ue.lineJoin=We.getLineJoin()||defaultLineJoin,Ue.lineWidth=ni===void 0?defaultLineWidth:ni,Ue.miterLimit=ri===void 0?defaultMiterLimit:ri,Ue.strokeStyle=asColorLike(We.getColor()||defaultStrokeStyle)}ke=this.textState_;const Cn=e.getFont()||defaultFont;registerFont(Cn);const En=e.getScaleArray();ke.overflow=e.getOverflow(),ke.font=Cn,ke.maxAngle=e.getMaxAngle(),ke.placement=e.getPlacement(),ke.textAlign=e.getTextAlign(),ke.repeat=e.getRepeat(),ke.justify=e.getJustify(),ke.textBaseline=e.getTextBaseline()||defaultTextBaseline,ke.backgroundFill=e.getBackgroundFill(),ke.backgroundStroke=e.getBackgroundStroke(),ke.padding=e.getPadding()||defaultPadding,ke.scale=En===void 0?[1,1]:En;const An=e.getOffsetX(),Sn=e.getOffsetY(),Tn=e.getRotateWithView(),Ln=e.getKeepUpright(),Bn=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=An===void 0?0:An,this.textOffsetY_=Sn===void 0?0:Sn,this.textRotateWithView_=Tn===void 0?!1:Tn,this.textKeepUpright_=Ln===void 0?!0:Ln,this.textRotation_=Bn===void 0?0:Bn,this.strokeKey_=Ue?(typeof Ue.strokeStyle=="string"?Ue.strokeStyle:getUid(Ue.strokeStyle))+Ue.lineCap+Ue.lineDashOffset+"|"+Ue.lineWidth+Ue.lineJoin+Ue.miterLimit+"["+Ue.lineDash.join()+"]":"",this.textKey_=ke.font+ke.scale+(ke.textAlign||"?")+(ke.repeat||"?")+(ke.justify||"?")+(ke.textBaseline||"?"),this.fillKey_=Be&&Be.fillStyle?typeof Be.fillStyle=="string"?Be.fillStyle:"|"+getUid(Be.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=Te}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,Te,ke,Be){this.tolerance_=e,this.maxExtent_=Te,this.pixelRatio_=Be,this.resolution_=ke,this.buildersByZIndex_={}}finish(){const e={};for(const Te in this.buildersByZIndex_){e[Te]=e[Te]||{};const ke=this.buildersByZIndex_[Te];for(const Be in ke){const Ue=ke[Be].finish();e[Te][Be]=Ue}}return e}getBuilder(e,Te){const ke=e!==void 0?e.toString():"0";let Be=this.buildersByZIndex_[ke];Be===void 0&&(Be={},this.buildersByZIndex_[ke]=Be);let Ue=Be[Te];if(Ue===void 0){const He=BATCH_CONSTRUCTORS[Te];Ue=new He(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),Be[Te]=Ue}return Ue}}function drawTextOnPath(Oe,e,Te,ke,Be,Ue,He,We,Cn,En,An,Sn,Tn=!0){let Ln=Oe[e],Bn=Oe[e+1],ei=0,ti=0,ni=0,ri=0;function si(){ei=Ln,ti=Bn,e+=ke,Ln=Oe[e],Bn=Oe[e+1],ri+=ni,ni=Math.sqrt((Ln-ei)*(Ln-ei)+(Bn-ti)*(Bn-ti))}do si();while(e<Te-ke&&ri+ni<Ue);let ai=ni===0?0:(Ue-ri)/ni;const li=lerp(ei,Ln,ai),Pi=lerp(ti,Bn,ai),pi=e-ke,vi=ri,Ri=Ue+We*Cn(En,Be,An);for(;e<Te-ke&&ri+ni<Ri;)si();ai=ni===0?0:(Ri-ri)/ni;const Fi=lerp(ei,Ln,ai),di=lerp(ti,Bn,ai);let ci=!1;if(Tn)if(Sn){const or=[li,Pi,Fi,di];rotate(or,0,4,2,Sn,or,or),ci=or[0]>or[2]}else ci=li>Fi;const Mi=Math.PI,Oi=[],Hi=pi+ke===e;e=pi,ni=0,ri=vi,Ln=Oe[e],Bn=Oe[e+1];let Ki;if(Hi){si(),Ki=Math.atan2(Bn-ti,Ln-ei),ci&&(Ki+=Ki>0?-Mi:Mi);const or=(Fi+li)/2,sr=(di+Pi)/2;return Oi[0]=[or,sr,(Ri-Ue)/2,Ki,Be],Oi}Be=Be.replace(/\n/g," ");for(let or=0,sr=Be.length;or<sr;){si();let Cr=Math.atan2(Bn-ti,Ln-ei);if(ci&&(Cr+=Cr>0?-Mi:Mi),Ki!==void 0){let mr=Cr-Ki;if(mr+=mr>Mi?-2*Mi:mr<-Mi?2*Mi:0,Math.abs(mr)>He)return null}Ki=Cr;const pr=or;let wr=0;for(;or<sr;++or){const mr=ci?sr-or-1:or,_r=We*Cn(En,Be[mr],An);if(e+ke<Te&&ri+ni<Ue+wr+_r/2)break;wr+=_r}if(or===pr)continue;const Li=ci?Be.substring(sr-pr,sr-or):Be.substring(pr,or);ai=ni===0?0:(Ue+wr/2-ri)/ni;const er=lerp(ei,Ln,ai),hr=lerp(ti,Bn,ai);Oi.push([er,hr,wr/2,Cr,Li]),Ue+=wr}return Oi}class ZIndexContext{constructor(){Mc(this,"pushMethodArgs_",(...e)=>(this.push_(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(getSharedCanvasContext2D(),{get:(e,Te)=>{if(typeof getSharedCanvasContext2D()[Te]=="function")return this.push_(Te),this.pushMethodArgs_},set:(e,Te,ke)=>(this.push_(Te,ke),!0)})}push_(...e){const Te=this.instructions_,ke=this.zIndex+this.offset_;Te[ke]||(Te[ke]=[]),Te[ke].push(...e)}pushFunction(e){this.push_(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(Te=>{for(let ke=0,Be=Te.length;ke<Be;++ke){const Ue=Te[ke];if(typeof Ue=="function"){Ue(e);continue}const He=Te[++ke];if(typeof e[Ue]=="function")e[Ue](...He);else{if(typeof He=="function"){e[Ue]=He(e);continue}e[Ue]=He}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(Oe){return Oe[3].declutterBox}const rtlRegEx=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function horizontalTextAlign(Oe,e){return e==="start"?e=rtlRegEx.test(Oe)?"right":"left":e==="end"&&(e=rtlRegEx.test(Oe)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(Oe,e,Te){return Te>0&&Oe.push(`
`,""),Oe.push(e,""),Oe}function richTextToPlainText(Oe,e,Te){return Te%2===0&&(Oe+=e),Oe}class Executor{constructor(e,Te,ke,Be,Ue){this.overlaps=ke,this.pixelRatio=Te,this.resolution=e,this.alignAndScaleFill_,this.instructions=Be.instructions,this.coordinates=Be.coordinates,this.coordinateCache_={},this.renderedTransform_=create(),this.hitDetectionInstructions=Be.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=Be.fillStates||{},this.strokeStates=Be.strokeStates||{},this.textStates=Be.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=Ue?new ZIndexContext:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,Te,ke,Be){const Ue=e+Te+ke+Be;if(this.labels_[Ue])return this.labels_[Ue];const He=Be?this.strokeStates[Be]:null,We=ke?this.fillStates[ke]:null,Cn=this.textStates[Te],En=this.pixelRatio,An=[Cn.scale[0]*En,Cn.scale[1]*En],Sn=Cn.justify?TEXT_ALIGN[Cn.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,Cn.textAlign||defaultTextAlign),Tn=Be&&He.lineWidth?He.lineWidth:0,Ln=Array.isArray(e)?e:String(e).split(`
`).reduce(createTextChunks,[]),{width:Bn,height:ei,widths:ti,heights:ni,lineWidths:ri}=getTextDimensions(Cn,Ln),si=Bn+Tn,ai=[],li=(si+2)*An[0],Pi=(ei+Tn)*An[1],pi={width:li<0?Math.floor(li):Math.ceil(li),height:Pi<0?Math.floor(Pi):Math.ceil(Pi),contextInstructions:ai};(An[0]!=1||An[1]!=1)&&ai.push("scale",An),Be&&(ai.push("strokeStyle",He.strokeStyle),ai.push("lineWidth",Tn),ai.push("lineCap",He.lineCap),ai.push("lineJoin",He.lineJoin),ai.push("miterLimit",He.miterLimit),ai.push("setLineDash",[He.lineDash]),ai.push("lineDashOffset",He.lineDashOffset)),ke&&ai.push("fillStyle",We.fillStyle),ai.push("textBaseline","middle"),ai.push("textAlign","center");const vi=.5-Sn;let Ri=Sn*si+vi*Tn;const Fi=[],di=[];let ci=0,Mi=0,Oi=0,Hi=0,Ki;for(let or=0,sr=Ln.length;or<sr;or+=2){const Cr=Ln[or];if(Cr===`
`){Mi+=ci,ci=0,Ri=Sn*si+vi*Tn,++Hi;continue}const pr=Ln[or+1]||Cn.font;pr!==Ki&&(Be&&Fi.push("font",pr),ke&&di.push("font",pr),Ki=pr),ci=Math.max(ci,ni[Oi]);const wr=[Cr,Ri+vi*ti[Oi]+Sn*(ti[Oi]-ri[Hi]),.5*(Tn+ci)+Mi];Ri+=ti[Oi],Be&&Fi.push("strokeText",wr),ke&&di.push("fillText",wr),++Oi}return Array.prototype.push.apply(ai,Fi),Array.prototype.push.apply(ai,di),this.labels_[Ue]=pi,pi}replayTextBackground_(e,Te,ke,Be,Ue,He,We){e.beginPath(),e.moveTo.apply(e,Te),e.lineTo.apply(e,ke),e.lineTo.apply(e,Be),e.lineTo.apply(e,Ue),e.lineTo.apply(e,Te),He&&(this.alignAndScaleFill_=He[2],e.fillStyle=He[1],this.fill_(e)),We&&(this.setStrokeStyle_(e,We),e.stroke())}calculateImageOrLabelDimensions_(e,Te,ke,Be,Ue,He,We,Cn,En,An,Sn,Tn,Ln,Bn,ei,ti){We*=Tn[0],Cn*=Tn[1];let ni=ke-We,ri=Be-Cn;const si=Ue+En>e?e-En:Ue,ai=He+An>Te?Te-An:He,li=Bn[3]+si*Tn[0]+Bn[1],Pi=Bn[0]+ai*Tn[1]+Bn[2],pi=ni-Bn[3],vi=ri-Bn[0];(ei||Sn!==0)&&(p1[0]=pi,p4[0]=pi,p1[1]=vi,p2[1]=vi,p2[0]=pi+li,p3[0]=p2[0],p3[1]=vi+Pi,p4[1]=p3[1]);let Ri;return Sn!==0?(Ri=compose(create(),ke,Be,1,1,Sn,-ke,-Be),apply(Ri,p1),apply(Ri,p2),apply(Ri,p3),apply(Ri,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(pi,pi+li),Math.min(vi,vi+Pi),Math.max(pi,pi+li),Math.max(vi,vi+Pi),tmpExtent),Ln&&(ni=Math.round(ni),ri=Math.round(ri)),{drawImageX:ni,drawImageY:ri,drawImageW:si,drawImageH:ai,originX:En,originY:An,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:ti},canvasTransform:Ri,scale:Tn}}replayImageOrLabel_(e,Te,ke,Be,Ue,He,We){const Cn=!!(He||We),En=Be.declutterBox,An=We?We[2]*Be.scale[0]/2:0;return En.minX-An<=Te[0]&&En.maxX+An>=0&&En.minY-An<=Te[1]&&En.maxY+An>=0&&(Cn&&this.replayTextBackground_(e,p1,p2,p3,p4,He,We),drawImageOrLabel(e,Be.canvasTransform,Ue,ke,Be.originX,Be.originY,Be.drawImageW,Be.drawImageH,Be.drawImageX,Be.drawImageY,Be.scale)),!0}fill_(e){const Te=this.alignAndScaleFill_;if(Te){const ke=apply(this.renderedTransform_,[0,0]),Be=512*this.pixelRatio;e.save(),e.translate(ke[0]%Be,ke[1]%Be),Te!==1&&e.scale(Te,Te),e.rotate(this.viewRotation_)}e.fill(),Te&&e.restore()}setStrokeStyle_(e,Te){e.strokeStyle=Te[1],e.lineWidth=Te[2],e.lineCap=Te[3],e.lineJoin=Te[4],e.miterLimit=Te[5],e.lineDashOffset=Te[7],e.setLineDash(Te[6])}drawLabelWithPointPlacement_(e,Te,ke,Be){const Ue=this.textStates[Te],He=this.createLabel(e,Te,Be,ke),We=this.strokeStates[ke],Cn=this.pixelRatio,En=horizontalTextAlign(Array.isArray(e)?e[0]:e,Ue.textAlign||defaultTextAlign),An=TEXT_ALIGN[Ue.textBaseline||defaultTextBaseline],Sn=We&&We.lineWidth?We.lineWidth:0,Tn=He.width/Cn-2*Ue.scale[0],Ln=En*Tn+2*(.5-En)*Sn,Bn=An*He.height/Cn+2*(.5-An)*Sn;return{label:He,anchorX:Ln,anchorY:Bn}}execute_(e,Te,ke,Be,Ue,He,We,Cn){const En=this.zIndexContext_;let An;this.pixelCoordinates_&&equals$2(ke,this.renderedTransform_)?An=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),An=transform2D(this.coordinates,0,this.coordinates.length,2,ke,this.pixelCoordinates_),setFromArray(this.renderedTransform_,ke));let Sn=0;const Tn=Be.length;let Ln=0,Bn,ei,ti,ni,ri,si,ai,li,Pi,pi,vi,Ri,Fi,di=0,ci=0;const Mi=this.coordinateCache_,Oi=this.viewRotation_,Hi=Math.round(Math.atan2(-ke[1],ke[0])*1e12)/1e12,Ki={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Oi},or=this.instructions!=Be||this.overlaps?0:200;let sr,Cr,pr,wr;for(;Sn<Tn;){const Li=Be[Sn];switch(Li[0]){case Instruction.BEGIN_GEOMETRY:sr=Li[1],wr=Li[3],sr.getGeometry()?We!==void 0&&!intersects$1(We,wr.getExtent())?Sn=Li[2]+1:++Sn:Sn=Li[2],En&&(En.zIndex=Li[4]);break;case Instruction.BEGIN_PATH:di>or&&(this.fill_(e),di=0),ci>or&&(e.stroke(),ci=0),!di&&!ci&&(e.beginPath(),ri=NaN,si=NaN),++Sn;break;case Instruction.CIRCLE:Ln=Li[1];const hr=An[Ln],mr=An[Ln+1],_r=An[Ln+2],dr=An[Ln+3],cr=_r-hr,gr=dr-mr,vr=Math.sqrt(cr*cr+gr*gr);e.moveTo(hr+vr,mr),e.arc(hr,mr,vr,0,2*Math.PI,!0),++Sn;break;case Instruction.CLOSE_PATH:e.closePath(),++Sn;break;case Instruction.CUSTOM:Ln=Li[1],Bn=Li[2];const Fr=Li[3],zr=Li[4],tr=Li[5];Ki.geometry=Fr,Ki.feature=sr,Sn in Mi||(Mi[Sn]=[]);const fr=Mi[Sn];tr?tr(An,Ln,Bn,2,fr):(fr[0]=An[Ln],fr[1]=An[Ln+1],fr.length=2),En&&(En.zIndex=Li[6]),zr(fr,Ki),++Sn;break;case Instruction.DRAW_IMAGE:Ln=Li[1],Bn=Li[2],Pi=Li[3],ei=Li[4],ti=Li[5];let ar=Li[6];const nr=Li[7],Dr=Li[8],kr=Li[9],Ir=Li[10];let Mr=Li[11];const Rr=Li[12];let Nr=Li[13];ni=Li[14]||"declutter";const Ar=Li[15];if(!Pi&&Li.length>=20){pi=Li[19],vi=Li[20],Ri=Li[21],Fi=Li[22];const Is=this.drawLabelWithPointPlacement_(pi,vi,Ri,Fi);Pi=Is.label,Li[3]=Pi;const oa=Li[23];ei=(Is.anchorX-oa)*this.pixelRatio,Li[4]=ei;const qs=Li[24];ti=(Is.anchorY-qs)*this.pixelRatio,Li[5]=ti,ar=Pi.height,Li[6]=ar,Nr=Pi.width,Li[13]=Nr}let Sr;Li.length>25&&(Sr=Li[25]);let br,Br,Hr;Li.length>17?(br=Li[16],Br=Li[17],Hr=Li[18]):(br=defaultPadding,Br=null,Hr=null),Ir&&Hi?Mr+=Oi:!Ir&&!Hi&&(Mr-=Oi);let qr=0;for(;Ln<Bn;Ln+=2){if(Sr&&Sr[qr++]<Nr/this.pixelRatio)continue;const Is=this.calculateImageOrLabelDimensions_(Pi.width,Pi.height,An[Ln],An[Ln+1],Nr,ar,ei,ti,Dr,kr,Mr,Rr,Ue,br,!!Br||!!Hr,sr),oa=[e,Te,Pi,Is,nr,Br,Hr];if(Cn){let qs,Eo,Rs;if(Ar){const Us=Bn-Ln;if(!Ar[Us]){Ar[Us]={args:oa,declutterMode:ni};continue}const zs=Ar[Us];qs=zs.args,Eo=zs.declutterMode,delete Ar[Us],Rs=getDeclutterBox(qs)}let Es,bo;if(qs&&(Eo!=="declutter"||!Cn.collides(Rs))&&(Es=!0),(ni!=="declutter"||!Cn.collides(Is.declutterBox))&&(bo=!0),Eo==="declutter"&&ni==="declutter"){const Us=Es&&bo;Es=Us,bo=Us}Es&&(Eo!=="none"&&Cn.insert(Rs),this.replayImageOrLabel_.apply(this,qs)),bo&&(ni!=="none"&&Cn.insert(Is.declutterBox),this.replayImageOrLabel_.apply(this,oa))}else this.replayImageOrLabel_.apply(this,oa)}++Sn;break;case Instruction.DRAW_CHARS:const Xr=Li[1],cs=Li[2],Qr=Li[3],bs=Li[4];Fi=Li[5];const vs=Li[6],Ms=Li[7],Ls=Li[8];Ri=Li[9];const ps=Li[10];pi=Li[11],Array.isArray(pi)&&(pi=pi.reduce(richTextToPlainText,"")),vi=Li[12];const ws=[Li[13],Li[13]];ni=Li[14]||"declutter";const As=Li[15],Ds=this.textStates[vi],xs=Ds.font,Xs=[Ds.scale[0]*Ms,Ds.scale[1]*Ms];let _o;xs in this.widths_?_o=this.widths_[xs]:(_o={},this.widths_[xs]=_o);const Fs=lineStringLength(An,Xr,cs,2),Ss=Math.abs(Xs[0])*measureAndCacheTextWidth(xs,pi,_o);if(bs||Ss<=Fs){const Is=this.textStates[vi].textAlign,oa=(Fs-Ss)*horizontalTextAlign(pi,Is),qs=drawTextOnPath(An,Xr,cs,2,pi,oa,vs,Math.abs(Xs[0]),measureAndCacheTextWidth,xs,_o,Hi?0:this.viewRotation_,As);e:if(qs){const Eo=[];let Rs,Es,bo,Us,zs;if(Ri)for(Rs=0,Es=qs.length;Rs<Es;++Rs){zs=qs[Rs],bo=zs[4],Us=this.createLabel(bo,vi,"",Ri),ei=zs[2]+(Xs[0]<0?-ps:ps),ti=Qr*Us.height+(.5-Qr)*2*ps*Xs[1]/Xs[0]-Ls;const Ws=this.calculateImageOrLabelDimensions_(Us.width,Us.height,zs[0],zs[1],Us.width,Us.height,ei,ti,0,0,zs[3],ws,!1,defaultPadding,!1,sr);if(Cn&&ni==="declutter"&&Cn.collides(Ws.declutterBox))break e;Eo.push([e,Te,Us,Ws,1,null,null])}if(Fi)for(Rs=0,Es=qs.length;Rs<Es;++Rs){zs=qs[Rs],bo=zs[4],Us=this.createLabel(bo,vi,Fi,""),ei=zs[2],ti=Qr*Us.height-Ls;const Ws=this.calculateImageOrLabelDimensions_(Us.width,Us.height,zs[0],zs[1],Us.width,Us.height,ei,ti,0,0,zs[3],ws,!1,defaultPadding,!1,sr);if(Cn&&ni==="declutter"&&Cn.collides(Ws.declutterBox))break e;Eo.push([e,Te,Us,Ws,1,null,null])}Cn&&ni!=="none"&&Cn.load(Eo.map(getDeclutterBox));for(let Ws=0,yo=Eo.length;Ws<yo;++Ws)this.replayImageOrLabel_.apply(this,Eo[Ws])}}++Sn;break;case Instruction.END_GEOMETRY:if(He!==void 0){sr=Li[1];const Is=He(sr,wr,ni);if(Is)return Is}++Sn;break;case Instruction.FILL:or?di++:this.fill_(e),++Sn;break;case Instruction.MOVE_TO_LINE_TO:for(Ln=Li[1],Bn=Li[2],Cr=An[Ln],pr=An[Ln+1],e.moveTo(Cr,pr),ri=Cr+.5|0,si=pr+.5|0,Ln+=2;Ln<Bn;Ln+=2)Cr=An[Ln],pr=An[Ln+1],ai=Cr+.5|0,li=pr+.5|0,(Ln==Bn-2||ai!==ri||li!==si)&&(e.lineTo(Cr,pr),ri=ai,si=li);++Sn;break;case Instruction.SET_FILL_STYLE:this.alignAndScaleFill_=Li[2],di&&(this.fill_(e),di=0,ci&&(e.stroke(),ci=0)),e.fillStyle=Li[1],++Sn;break;case Instruction.SET_STROKE_STYLE:ci&&(e.stroke(),ci=0),this.setStrokeStyle_(e,Li),++Sn;break;case Instruction.STROKE:or?ci++:e.stroke(),++Sn;break;default:++Sn;break}}di&&this.fill_(e),ci&&e.stroke()}execute(e,Te,ke,Be,Ue,He){this.viewRotation_=Be,this.execute_(e,Te,ke,this.instructions,Ue,void 0,void 0,He)}executeHitDetection(e,Te,ke,Be,Ue){return this.viewRotation_=ke,this.execute_(e,[e.canvas.width,e.canvas.height],Te,this.hitDetectionInstructions,!0,Be,Ue)}}const ALL=["Polygon","Circle","LineString","Image","Text","Default"],DECLUTTER=["Image","Text"],NON_DECLUTTER=ALL.filter(Oe=>!DECLUTTER.includes(Oe));class ExecutorGroup{constructor(e,Te,ke,Be,Ue,He,We){this.maxExtent_=e,this.overlaps_=Be,this.pixelRatio_=ke,this.resolution_=Te,this.renderBuffer_=He,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(Ue,We)}clip(e,Te){const ke=this.getClipCoords(Te);e.beginPath(),e.moveTo(ke[0],ke[1]),e.lineTo(ke[2],ke[3]),e.lineTo(ke[4],ke[5]),e.lineTo(ke[6],ke[7]),e.clip()}createExecutors_(e,Te){for(const ke in e){let Be=this.executorsByZIndex_[ke];Be===void 0&&(Be={},this.executorsByZIndex_[ke]=Be);const Ue=e[ke];for(const He in Ue){const We=Ue[He];Be[He]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,We,Te)}}}hasExecutors(e){for(const Te in this.executorsByZIndex_){const ke=this.executorsByZIndex_[Te];for(let Be=0,Ue=e.length;Be<Ue;++Be)if(e[Be]in ke)return!0}return!1}forEachFeatureAtCoordinate(e,Te,ke,Be,Ue,He){Be=Math.round(Be);const We=Be*2+1,Cn=compose(this.hitDetectionTransform_,Be+.5,Be+.5,1/Te,-1/Te,-ke,-e[0],-e[1]),En=!this.hitDetectionContext_;En&&(this.hitDetectionContext_=createCanvasContext2D(We,We));const An=this.hitDetectionContext_;An.canvas.width!==We||An.canvas.height!==We?(An.canvas.width=We,An.canvas.height=We):En||An.clearRect(0,0,We,We);let Sn;this.renderBuffer_!==void 0&&(Sn=createEmpty(),extendCoordinate(Sn,e),buffer(Sn,Te*(this.renderBuffer_+Be),Sn));const Tn=getPixelIndexArray(Be);let Ln;function Bn(li,Pi,pi){const vi=An.getImageData(0,0,We,We).data;for(let Ri=0,Fi=Tn.length;Ri<Fi;Ri++)if(vi[Tn[Ri]]>0){if(!He||pi==="none"||Ln!=="Image"&&Ln!=="Text"||He.includes(li)){const di=(Tn[Ri]-3)/4,ci=Be-di%We,Mi=Be-(di/We|0),Oi=Ue(li,Pi,ci*ci+Mi*Mi);if(Oi)return Oi}An.clearRect(0,0,We,We);break}}const ei=Object.keys(this.executorsByZIndex_).map(Number);ei.sort(ascending);let ti,ni,ri,si,ai;for(ti=ei.length-1;ti>=0;--ti){const li=ei[ti].toString();for(ri=this.executorsByZIndex_[li],ni=ALL.length-1;ni>=0;--ni)if(Ln=ALL[ni],si=ri[Ln],si!==void 0&&(ai=si.executeHitDetection(An,Cn,ke,Bn,Sn),ai))return ai}}getClipCoords(e){const Te=this.maxExtent_;if(!Te)return null;const ke=Te[0],Be=Te[1],Ue=Te[2],He=Te[3],We=[ke,Be,ke,He,Ue,He,Ue,Be];return transform2D(We,0,8,2,e,We),We}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,Te,ke,Be,Ue,He,We){const Cn=Object.keys(this.executorsByZIndex_).map(Number);Cn.sort(We?descending:ascending),He=He||ALL;const En=ALL.length;for(let An=0,Sn=Cn.length;An<Sn;++An){const Tn=Cn[An].toString(),Ln=this.executorsByZIndex_[Tn];for(let Bn=0,ei=He.length;Bn<ei;++Bn){const ti=He[Bn],ni=Ln[ti];if(ni!==void 0){const ri=We===null?void 0:ni.getZIndexContext(),si=ri?ri.getContext():e,ai=this.maxExtent_&&ti!=="Image"&&ti!=="Text";if(ai&&(si.save(),this.clip(si,ke)),!ri||ti==="Text"||ti==="Image"?ni.execute(si,Te,ke,Be,Ue,We):ri.pushFunction(li=>ni.execute(li,Te,ke,Be,Ue,We)),ai&&si.restore(),ri){ri.offset();const li=Cn[An]*En+Bn;this.deferredZIndexContexts_[li]||(this.deferredZIndexContexts_[li]=[]),this.deferredZIndexContexts_[li].push(ri)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,Te=Object.keys(e).map(Number).sort(ascending);for(let ke=0,Be=Te.length;ke<Be;++ke)e[Te[ke]].forEach(Ue=>{Ue.draw(this.renderedContext_),Ue.clear()}),e[Te[ke]].length=0}}const circlePixelIndexArrayCache={};function getPixelIndexArray(Oe){if(circlePixelIndexArrayCache[Oe]!==void 0)return circlePixelIndexArrayCache[Oe];const e=Oe*2+1,Te=Oe*Oe,ke=new Array(Te+1);for(let Ue=0;Ue<=Oe;++Ue)for(let He=0;He<=Oe;++He){const We=Ue*Ue+He*He;if(We>Te)break;let Cn=ke[We];Cn||(Cn=[],ke[We]=Cn),Cn.push(((Oe+Ue)*e+(Oe+He))*4+3),Ue>0&&Cn.push(((Oe-Ue)*e+(Oe+He))*4+3),He>0&&(Cn.push(((Oe+Ue)*e+(Oe-He))*4+3),Ue>0&&Cn.push(((Oe-Ue)*e+(Oe-He))*4+3))}const Be=[];for(let Ue=0,He=ke.length;Ue<He;++Ue)ke[Ue]&&Be.push(...ke[Ue]);return circlePixelIndexArrayCache[Oe]=Be,Be}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}ready(){return Promise.resolve()}}class RegularShape extends ImageStyle{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ImageState.LOADING:ImageState.LOADED,this.imageState_===ImageState.LOADING&&this.ready().then(()=>this.imageState_=ImageState.LOADED),this.render()}clone(){const e=this.getScale(),Te=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return Te.setOpacity(this.getOpacity()),Te}getAnchor(){const e=this.size_,Te=this.getDisplacement(),ke=this.getScaleArray();return[e[0]/2-Te[0]/ke[0],e[1]/2+Te[1]/ke[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var Ue,He;const Te=(Ue=this.fill_)==null?void 0:Ue.getKey(),ke=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${Te}`+Object.values(this.renderOptions_).join(",");let Be=(He=shared.get(ke,null,null))==null?void 0:He.getImage(1);if(!Be){const We=this.renderOptions_,Cn=Math.ceil(We.size*e),En=createCanvasContext2D(Cn,Cn);this.draw_(We,En,e),Be=En.canvas,shared.set(ke,null,null,new IconImage(Be,void 0,null,ImageState.LOADED,null))}return Be}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,Te,ke){if(Te===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return Te;let Be=this.radius,Ue=this.radius2_===void 0?Be:this.radius2_;if(Be<Ue){const Pi=Be;Be=Ue,Ue=Pi}const He=this.radius2_===void 0?this.points_:this.points_*2,We=2*Math.PI/He,Cn=Ue*Math.sin(We),En=Math.sqrt(Ue*Ue-Cn*Cn),An=Be-En,Sn=Math.sqrt(Cn*Cn+An*An),Tn=Sn/Cn;if(e==="miter"&&Tn<=ke)return Tn*Te;const Ln=Te/2/Tn,Bn=Te/2*(An/Sn),ti=Math.sqrt((Be+Ln)*(Be+Ln)+Bn*Bn)-Be;if(this.radius2_===void 0||e==="bevel")return ti*2;const ni=Be*Math.sin(We),ri=Math.sqrt(Be*Be-ni*ni),si=Ue-ri,li=Math.sqrt(ni*ni+si*si)/ni;if(li<=ke){const Pi=li*Te/2-Ue-Be;return 2*Math.max(ti,Pi)}return ti*2}createRenderOptions(){let e=defaultLineCap,Te=defaultLineJoin,ke=0,Be=null,Ue=0,He,We=0;this.stroke_&&(He=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),We=this.stroke_.getWidth()??defaultLineWidth,Be=this.stroke_.getLineDash(),Ue=this.stroke_.getLineDashOffset()??0,Te=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,ke=this.stroke_.getMiterLimit()??defaultMiterLimit);const Cn=this.calculateLineJoinSize_(Te,We,ke),En=Math.max(this.radius,this.radius2_||0),An=Math.ceil(2*En+Cn);return{strokeStyle:He,strokeWidth:We,size:An,lineCap:e,lineDash:Be,lineDashOffset:Ue,lineJoin:Te,miterLimit:ke}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,Te,ke){if(Te.scale(ke,ke),Te.translate(e.size/2,e.size/2),this.createPath_(Te),this.fill_){let Be=this.fill_.getColor();Be===null&&(Be=defaultFillStyle),Te.fillStyle=asColorLike(Be),Te.fill()}e.strokeStyle&&(Te.strokeStyle=e.strokeStyle,Te.lineWidth=e.strokeWidth,e.lineDash&&(Te.setLineDash(e.lineDash),Te.lineDashOffset=e.lineDashOffset),Te.lineCap=e.lineCap,Te.lineJoin=e.lineJoin,Te.miterLimit=e.miterLimit,Te.stroke())}createHitDetectionCanvas_(e){let Te;if(this.fill_){let ke=this.fill_.getColor(),Be=0;typeof ke=="string"&&(ke=asArray(ke)),ke===null?Be=1:Array.isArray(ke)&&(Be=ke.length===4?ke[3]:1),Be===0&&(Te=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,Te))}return Te?Te.canvas:this.getImage(1)}createPath_(e){let Te=this.points_;const ke=this.radius;if(Te===1/0)e.arc(0,0,ke,0,2*Math.PI);else{const Be=this.radius2_===void 0?ke:this.radius2_;this.radius2_!==void 0&&(Te*=2);const Ue=this.angle_-Math.PI/2,He=2*Math.PI/Te;for(let We=0;We<Te;We++){const Cn=Ue+We*He,En=We%2===0?ke:Be;e.lineTo(En*Math.cos(Cn),En*Math.sin(Cn))}e.closePath()}}drawHitDetectionCanvas_(e,Te){Te.translate(e.size/2,e.size/2),this.createPath_(Te),Te.fillStyle=defaultFillStyle,Te.fill(),e.strokeStyle&&(Te.strokeStyle=e.strokeStyle,Te.lineWidth=e.strokeWidth,e.lineDash&&(Te.setLineDash(e.lineDash),Te.lineDashOffset=e.lineDashOffset),Te.lineJoin=e.lineJoin,Te.miterLimit=e.miterLimit,Te.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),Te=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return Te.setOpacity(this.getOpacity()),Te}setRadius(e){this.radius=e,this.render()}}class Fill{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const Te=get$2(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));Te.ready().then(()=>{this.patternImage_=null}),Te.getImageState()===ImageState.IDLE&&Te.load(),Te.getImageState()===ImageState.LOADING&&(this.patternImage_=Te)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?getUid(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:asArray(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function calculateScale(Oe,e,Te,ke){return Te!==void 0&&ke!==void 0?[Te/Oe,ke/e]:Te!==void 0?Te/Oe:ke!==void 0?ke/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const Te=e.opacity!==void 0?e.opacity:1,ke=e.rotation!==void 0?e.rotation:0,Be=e.scale!==void 0?e.scale:1,Ue=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:Te,rotation:ke,scale:Be,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:Ue,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const He=e.img!==void 0?e.img:null;let We=e.src;assert(!(We!==void 0&&He),"`image` and `src` cannot be provided at the same time"),(We===void 0||We.length===0)&&He&&(We=He.src||getUid(He)),assert(We!==void 0&&We.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let Cn;if(e.src!==void 0?Cn=ImageState.IDLE:He!==void 0&&("complete"in He?He.complete?Cn=He.src?ImageState.LOADED:ImageState.IDLE:Cn=ImageState.LOADING:Cn=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(He,We,this.crossOrigin_,Cn,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let En,An;if(e.size)[En,An]=e.size;else{const Sn=this.getImage(1);if(Sn.width&&Sn.height)En=Sn.width,An=Sn.height;else if(Sn instanceof HTMLImageElement){this.initialOptions_=e;const Tn=()=>{if(this.unlistenImageChange(Tn),!this.initialOptions_)return;const Ln=this.iconImage_.getSize();this.setScale(calculateScale(Ln[0],Ln[1],e.width,e.height))};this.listenImageChange(Tn);return}}En!==void 0&&this.setScale(calculateScale(En,An,e.width,e.height))}}clone(){let e,Te,ke;return this.initialOptions_?(Te=this.initialOptions_.width,ke=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:Te,height:ke,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const Be=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!Be)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=Be[0]),this.anchorYUnits_=="fraction"&&(e[1]*=Be[1])}if(this.anchorOrigin_!="top-left"){if(!Be)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+Be[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+Be[1])}this.normalizedAnchor_=e}const Te=this.getDisplacement(),ke=this.getScaleArray();return[e[0]-Te[0]/ke[0],e[1]+Te[1]/ke[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const Te=this.getSize(),ke=this.iconImage_.getSize();if(!Te||!ke)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=ke[0]-Te[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=ke[1]-Te[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}ready(){return this.iconImage_.ready()}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}let Style$1=class Uf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Uf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(Te){return Te.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function toFunction(Oe){let e;if(typeof Oe=="function")e=Oe;else{let Te;Array.isArray(Oe)?Te=Oe:(assert(typeof Oe.getZIndex=="function","Expected an `Style` or an array of `Style`"),Te=[Oe]),e=function(){return Te}}return e}let defaultStyles=null;function createDefaultStyle(Oe,e){if(!defaultStyles){const Te=new Fill({color:"rgba(255,255,255,0.4)"}),ke=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style$1({image:new CircleStyle({fill:Te,stroke:ke,radius:5}),fill:Te,stroke:ke})]}return defaultStyles}function createEditingStyle(){const Oe={},e=[255,255,255,1],Te=[0,153,255,1],ke=3;return Oe.Polygon=[new Style$1({fill:new Fill({color:[255,255,255,.5]})})],Oe.MultiPolygon=Oe.Polygon,Oe.LineString=[new Style$1({stroke:new Stroke({color:e,width:ke+2})}),new Style$1({stroke:new Stroke({color:Te,width:ke})})],Oe.MultiLineString=Oe.LineString,Oe.Circle=Oe.Polygon.concat(Oe.LineString),Oe.Point=[new Style$1({image:new CircleStyle({radius:ke*2,fill:new Fill({color:Te}),stroke:new Stroke({color:e,width:ke/2})}),zIndex:1/0})],Oe.MultiPoint=Oe.Point,Oe.GeometryCollection=Oe.Polygon.concat(Oe.LineString,Oe.Point),Oe}function defaultGeometryFunction(Oe){return Oe.getGeometry()}const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}class CanvasImmediateRenderer extends VectorContext{constructor(e,Te,ke,Be,Ue,He,We){super(),this.context_=e,this.pixelRatio_=Te,this.extent_=ke,this.transform_=Be,this.transformRotation_=Be?toFixed(Math.atan2(Be[1],Be[0]),10):0,this.viewRotation_=Ue,this.squaredTolerance_=He,this.userTransform_=We,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create()}drawImages_(e,Te,ke,Be){if(!this.image_)return;const Ue=transform2D(e,Te,ke,Be,this.transform_,this.pixelCoordinates_),He=this.context_,We=this.tmpLocalTransform_,Cn=He.globalAlpha;this.imageOpacity_!=1&&(He.globalAlpha=Cn*this.imageOpacity_);let En=this.imageRotation_;this.transformRotation_===0&&(En-=this.viewRotation_),this.imageRotateWithView_&&(En+=this.viewRotation_);for(let An=0,Sn=Ue.length;An<Sn;An+=2){const Tn=Ue[An]-this.imageAnchorX_,Ln=Ue[An+1]-this.imageAnchorY_;if(En!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const Bn=Tn+this.imageAnchorX_,ei=Ln+this.imageAnchorY_;compose(We,Bn,ei,1,1,En,-Bn,-ei),He.save(),He.transform.apply(He,We),He.translate(Bn,ei),He.scale(this.imageScale_[0],this.imageScale_[1]),He.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),He.restore()}else He.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,Tn,Ln,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(He.globalAlpha=Cn)}drawText_(e,Te,ke,Be){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const Ue=transform2D(e,Te,ke,Be,this.transform_,this.pixelCoordinates_),He=this.context_;let We=this.textRotation_;for(this.transformRotation_===0&&(We-=this.viewRotation_),this.textRotateWithView_&&(We+=this.viewRotation_);Te<ke;Te+=Be){const Cn=Ue[Te]+this.textOffsetX_,En=Ue[Te+1]+this.textOffsetY_;We!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(He.save(),He.translate(Cn-this.textOffsetX_,En-this.textOffsetY_),He.rotate(We),He.translate(this.textOffsetX_,this.textOffsetY_),He.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&He.strokeText(this.text_,0,0),this.textFillState_&&He.fillText(this.text_,0,0),He.restore()):(this.textStrokeState_&&He.strokeText(this.text_,Cn,En),this.textFillState_&&He.fillText(this.text_,Cn,En))}}moveToLineTo_(e,Te,ke,Be,Ue){const He=this.context_,We=transform2D(e,Te,ke,Be,this.transform_,this.pixelCoordinates_);He.moveTo(We[0],We[1]);let Cn=We.length;Ue&&(Cn-=2);for(let En=2;En<Cn;En+=2)He.lineTo(We[En],We[En+1]);return Ue&&He.closePath(),ke}drawRings_(e,Te,ke,Be){for(let Ue=0,He=ke.length;Ue<He;++Ue)Te=this.moveToLineTo_(e,Te,ke[Ue],Be,!0);return Te}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const Te=transformGeom2D(e,this.transform_,this.pixelCoordinates_),ke=Te[2]-Te[0],Be=Te[3]-Te[1],Ue=Math.sqrt(ke*ke+Be*Be),He=this.context_;He.beginPath(),He.arc(Te[0],Te[1],Ue,0,2*Math.PI),this.fillState_&&He.fill(),this.strokeState_&&He.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,Te){const ke=Te.getGeometryFunction()(e);ke&&(this.setStyle(Te),this.drawGeometry(ke))}drawGeometryCollection(e){const Te=e.getGeometriesArray();for(let ke=0,Be=Te.length;ke<Be;++ke)this.drawGeometry(Te[ke])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const Te=e.getFlatCoordinates(),ke=e.getStride();this.image_&&this.drawImages_(Te,0,Te.length,ke),this.text_!==""&&this.drawText_(Te,0,Te.length,ke)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const Te=e.getFlatCoordinates(),ke=e.getStride();this.image_&&this.drawImages_(Te,0,Te.length,ke),this.text_!==""&&this.drawText_(Te,0,Te.length,ke)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const Te=this.context_,ke=e.getFlatCoordinates();Te.beginPath(),this.moveToLineTo_(ke,0,ke.length,e.getStride(),!1),Te.stroke()}if(this.text_!==""){const Te=e.getFlatMidpoint();this.drawText_(Te,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const Te=e.getExtent();if(intersects$1(this.extent_,Te)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const ke=this.context_,Be=e.getFlatCoordinates();let Ue=0;const He=e.getEnds(),We=e.getStride();ke.beginPath();for(let Cn=0,En=He.length;Cn<En;++Cn)Ue=this.moveToLineTo_(Be,Ue,He[Cn],We,!1);ke.stroke()}if(this.text_!==""){const ke=e.getFlatMidpoints();this.drawText_(ke,0,ke.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const Te=this.context_;Te.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&Te.fill(),this.strokeState_&&Te.stroke()}if(this.text_!==""){const Te=e.getFlatInteriorPoint();this.drawText_(Te,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const Te=this.context_,ke=e.getOrientedFlatCoordinates();let Be=0;const Ue=e.getEndss(),He=e.getStride();Te.beginPath();for(let We=0,Cn=Ue.length;We<Cn;++We){const En=Ue[We];Be=this.drawRings_(ke,Be,En,He)}this.fillState_&&Te.fill(),this.strokeState_&&Te.stroke()}if(this.text_!==""){const Te=e.getFlatInteriorPoints();this.drawText_(Te,0,Te.length,2)}}}setContextFillState_(e){const Te=this.context_,ke=this.contextFillState_;ke?ke.fillStyle!=e.fillStyle&&(ke.fillStyle=e.fillStyle,Te.fillStyle=e.fillStyle):(Te.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const Te=this.context_,ke=this.contextStrokeState_;ke?(ke.lineCap!=e.lineCap&&(ke.lineCap=e.lineCap,Te.lineCap=e.lineCap),equals$2(ke.lineDash,e.lineDash)||Te.setLineDash(ke.lineDash=e.lineDash),ke.lineDashOffset!=e.lineDashOffset&&(ke.lineDashOffset=e.lineDashOffset,Te.lineDashOffset=e.lineDashOffset),ke.lineJoin!=e.lineJoin&&(ke.lineJoin=e.lineJoin,Te.lineJoin=e.lineJoin),ke.lineWidth!=e.lineWidth&&(ke.lineWidth=e.lineWidth,Te.lineWidth=e.lineWidth),ke.miterLimit!=e.miterLimit&&(ke.miterLimit=e.miterLimit,Te.miterLimit=e.miterLimit),ke.strokeStyle!=e.strokeStyle&&(ke.strokeStyle=e.strokeStyle,Te.strokeStyle=e.strokeStyle)):(Te.lineCap=e.lineCap,Te.setLineDash(e.lineDash),Te.lineDashOffset=e.lineDashOffset,Te.lineJoin=e.lineJoin,Te.lineWidth=e.lineWidth,Te.miterLimit=e.miterLimit,Te.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const Te=this.context_,ke=this.contextTextState_,Be=e.textAlign?e.textAlign:defaultTextAlign;ke?(ke.font!=e.font&&(ke.font=e.font,Te.font=e.font),ke.textAlign!=Be&&(ke.textAlign=Be,Te.textAlign=Be),ke.textBaseline!=e.textBaseline&&(ke.textBaseline=e.textBaseline,Te.textBaseline=e.textBaseline)):(Te.font=e.font,Te.textAlign=Be,Te.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:Be,textBaseline:e.textBaseline})}setFillStrokeStyle(e,Te){if(!e)this.fillState_=null;else{const ke=e.getColor();this.fillState_={fillStyle:asColorLike(ke||defaultFillStyle)}}if(!Te)this.strokeState_=null;else{const ke=Te.getColor(),Be=Te.getLineCap(),Ue=Te.getLineDash(),He=Te.getLineDashOffset(),We=Te.getLineJoin(),Cn=Te.getWidth(),En=Te.getMiterLimit(),An=Ue||defaultLineDash;this.strokeState_={lineCap:Be!==void 0?Be:defaultLineCap,lineDash:this.pixelRatio_===1?An:An.map(Sn=>Sn*this.pixelRatio_),lineDashOffset:(He||defaultLineDashOffset)*this.pixelRatio_,lineJoin:We!==void 0?We:defaultLineJoin,lineWidth:(Cn!==void 0?Cn:defaultLineWidth)*this.pixelRatio_,miterLimit:En!==void 0?En:defaultMiterLimit,strokeStyle:asColorLike(ke||defaultStrokeStyle)}}}setImageStyle(e){let Te;if(!e||!(Te=e.getSize())){this.image_=null;return}const ke=e.getPixelRatio(this.pixelRatio_),Be=e.getAnchor(),Ue=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=Be[0]*ke,this.imageAnchorY_=Be[1]*ke,this.imageHeight_=Te[1]*ke,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=Ue[0],this.imageOriginY_=Ue[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const He=e.getScaleArray();this.imageScale_=[He[0]*this.pixelRatio_/ke,He[1]*this.pixelRatio_/ke],this.imageWidth_=Te[0]*ke}setTextStyle(e){if(!e)this.text_="";else{const Te=e.getFill();if(!Te)this.textFillState_=null;else{const Ln=Te.getColor();this.textFillState_={fillStyle:asColorLike(Ln||defaultFillStyle)}}const ke=e.getStroke();if(!ke)this.textStrokeState_=null;else{const Ln=ke.getColor(),Bn=ke.getLineCap(),ei=ke.getLineDash(),ti=ke.getLineDashOffset(),ni=ke.getLineJoin(),ri=ke.getWidth(),si=ke.getMiterLimit();this.textStrokeState_={lineCap:Bn!==void 0?Bn:defaultLineCap,lineDash:ei||defaultLineDash,lineDashOffset:ti||defaultLineDashOffset,lineJoin:ni!==void 0?ni:defaultLineJoin,lineWidth:ri!==void 0?ri:defaultLineWidth,miterLimit:si!==void 0?si:defaultMiterLimit,strokeStyle:asColorLike(Ln||defaultStrokeStyle)}}const Be=e.getFont(),Ue=e.getOffsetX(),He=e.getOffsetY(),We=e.getRotateWithView(),Cn=e.getRotation(),En=e.getScaleArray(),An=e.getText(),Sn=e.getTextAlign(),Tn=e.getTextBaseline();this.textState_={font:Be!==void 0?Be:defaultFont,textAlign:Sn!==void 0?Sn:defaultTextAlign,textBaseline:Tn!==void 0?Tn:defaultTextBaseline},this.text_=An!==void 0?Array.isArray(An)?An.reduce((Ln,Bn,ei)=>Ln+=ei%2?" ":Bn,""):An:"",this.textOffsetX_=Ue!==void 0?this.pixelRatio_*Ue:0,this.textOffsetY_=He!==void 0?this.pixelRatio_*He:0,this.textRotateWithView_=We!==void 0?We:!1,this.textRotation_=Cn!==void 0?Cn:0,this.textScale_=[this.pixelRatio_*En[0],this.pixelRatio_*En[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(Oe,e,Te,ke,Be,Ue,He,We,Cn){const En=Cn?toUserExtent(Be):Be,An=Oe[0]*HIT_DETECT_RESOLUTION,Sn=Oe[1]*HIT_DETECT_RESOLUTION,Tn=createCanvasContext2D(An,Sn);Tn.imageSmoothingEnabled=!1;const Ln=Tn.canvas,Bn=new CanvasImmediateRenderer(Tn,HIT_DETECT_RESOLUTION,Be,null,He,We,Cn?getTransformFromProjections(getUserProjection(),Cn):null),ei=Te.length,ti=Math.floor((256*256*256-1)/ei),ni={};for(let si=1;si<=ei;++si){const ai=Te[si-1],li=ai.getStyleFunction()||ke;if(!li)continue;let Pi=li(ai,Ue);if(!Pi)continue;Array.isArray(Pi)||(Pi=[Pi]);const vi=(si*ti).toString(16).padStart(7,"#00000");for(let Ri=0,Fi=Pi.length;Ri<Fi;++Ri){const di=Pi[Ri],ci=di.getGeometryFunction()(ai);if(!ci||!intersects$1(En,ci.getExtent()))continue;const Mi=di.clone(),Oi=Mi.getFill();Oi&&Oi.setColor(vi);const Hi=Mi.getStroke();Hi&&(Hi.setColor(vi),Hi.setLineDash(null)),Mi.setText(void 0);const Ki=di.getImage();if(Ki){const pr=Ki.getImageSize();if(!pr)continue;const wr=createCanvasContext2D(pr[0],pr[1],void 0,{alpha:!1}),Li=wr.canvas;wr.fillStyle=vi,wr.fillRect(0,0,Li.width,Li.height),Mi.setImage(new Icon({img:Li,anchor:Ki.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ki.getOrigin(),opacity:1,size:Ki.getSize(),scale:Ki.getScale(),rotation:Ki.getRotation(),rotateWithView:Ki.getRotateWithView()}))}const or=Mi.getZIndex()||0;let sr=ni[or];sr||(sr={},ni[or]=sr,sr.Polygon=[],sr.Circle=[],sr.LineString=[],sr.Point=[]);const Cr=ci.getType();if(Cr==="GeometryCollection"){const pr=ci.getGeometriesArrayRecursive();for(let wr=0,Li=pr.length;wr<Li;++wr){const er=pr[wr];sr[er.getType().replace("Multi","")].push(er,Mi)}}else sr[Cr.replace("Multi","")].push(ci,Mi)}}const ri=Object.keys(ni).map(Number).sort(ascending);for(let si=0,ai=ri.length;si<ai;++si){const li=ni[ri[si]];for(const Pi in li){const pi=li[Pi];for(let vi=0,Ri=pi.length;vi<Ri;vi+=2){Bn.setStyle(pi[vi+1]);for(let Fi=0,di=e.length;Fi<di;++Fi)Bn.setTransform(e[Fi]),Bn.drawGeometry(pi[vi])}}}return Tn.getImageData(0,0,Ln.width,Ln.height)}function hitDetect(Oe,e,Te){const ke=[];if(Te){const Be=Math.floor(Math.round(Oe[0])*HIT_DETECT_RESOLUTION),Ue=Math.floor(Math.round(Oe[1])*HIT_DETECT_RESOLUTION),He=(clamp$1(Be,0,Te.width-1)+clamp$1(Ue,0,Te.height-1)*Te.width)*4,We=Te.data[He],Cn=Te.data[He+1],An=Te.data[He+2]+256*(Cn+256*We),Sn=Math.floor((256*256*256-1)/e.length);An&&An%Sn===0&&ke.push(e[An/Sn-1])}return ke}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(Oe,e){return parseInt(getUid(Oe),10)-parseInt(getUid(e),10)}function getSquaredTolerance(Oe,e){const Te=getTolerance(Oe,e);return Te*Te}function getTolerance(Oe,e){return SIMPLIFY_TOLERANCE*Oe/e}function renderCircleGeometry(Oe,e,Te,ke,Be){const Ue=Te.getFill(),He=Te.getStroke();if(Ue||He){const Cn=Oe.getBuilder(Te.getZIndex(),"Circle");Cn.setFillStrokeStyle(Ue,He),Cn.drawCircle(e,ke,Be)}const We=Te.getText();if(We&&We.getText()){const Cn=Oe.getBuilder(Te.getZIndex(),"Text");Cn.setTextStyle(We),Cn.drawText(e,ke)}}function renderFeature$1(Oe,e,Te,ke,Be,Ue,He,We){const Cn=[],En=Te.getImage();if(En){let Tn=!0;const Ln=En.getImageState();Ln==ImageState.LOADED||Ln==ImageState.ERROR?Tn=!1:Ln==ImageState.IDLE&&En.load(),Tn&&Cn.push(En.ready())}const An=Te.getFill();An&&An.loading()&&Cn.push(An.ready());const Sn=Cn.length>0;return Sn&&Promise.all(Cn).then(()=>Be(null)),renderFeatureInternal(Oe,e,Te,ke,Ue,He,We),Sn}function renderFeatureInternal(Oe,e,Te,ke,Be,Ue,He){const We=Te.getGeometryFunction()(e);if(!We)return;const Cn=We.simplifyTransformed(ke,Be);if(Te.getRenderer())renderGeometry(Oe,Cn,Te,e,He);else{const An=GEOMETRY_RENDERERS[Cn.getType()];An(Oe,Cn,Te,e,He,Ue)}}function renderGeometry(Oe,e,Te,ke,Be){if(e.getType()=="GeometryCollection"){const He=e.getGeometries();for(let We=0,Cn=He.length;We<Cn;++We)renderGeometry(Oe,He[We],Te,ke,Be);return}Oe.getBuilder(Te.getZIndex(),"Default").drawCustom(e,ke,Te.getRenderer(),Te.getHitDetectionRenderer(),Be)}function renderGeometryCollectionGeometry(Oe,e,Te,ke,Be,Ue){const He=e.getGeometriesArray();let We,Cn;for(We=0,Cn=He.length;We<Cn;++We){const En=GEOMETRY_RENDERERS[He[We].getType()];En(Oe,He[We],Te,ke,Be,Ue)}}function renderLineStringGeometry(Oe,e,Te,ke,Be){const Ue=Te.getStroke();if(Ue){const We=Oe.getBuilder(Te.getZIndex(),"LineString");We.setFillStrokeStyle(null,Ue),We.drawLineString(e,ke,Be)}const He=Te.getText();if(He&&He.getText()){const We=Oe.getBuilder(Te.getZIndex(),"Text");We.setTextStyle(He),We.drawText(e,ke,Be)}}function renderMultiLineStringGeometry(Oe,e,Te,ke,Be){const Ue=Te.getStroke();if(Ue){const We=Oe.getBuilder(Te.getZIndex(),"LineString");We.setFillStrokeStyle(null,Ue),We.drawMultiLineString(e,ke,Be)}const He=Te.getText();if(He&&He.getText()){const We=Oe.getBuilder(Te.getZIndex(),"Text");We.setTextStyle(He),We.drawText(e,ke,Be)}}function renderMultiPolygonGeometry(Oe,e,Te,ke,Be){const Ue=Te.getFill(),He=Te.getStroke();if(He||Ue){const Cn=Oe.getBuilder(Te.getZIndex(),"Polygon");Cn.setFillStrokeStyle(Ue,He),Cn.drawMultiPolygon(e,ke,Be)}const We=Te.getText();if(We&&We.getText()){const Cn=Oe.getBuilder(Te.getZIndex(),"Text");Cn.setTextStyle(We),Cn.drawText(e,ke,Be)}}function renderPointGeometry(Oe,e,Te,ke,Be,Ue){const He=Te.getImage(),We=Te.getText(),Cn=We&&We.getText(),En=Ue&&He&&Cn?{}:void 0;if(He){if(He.getImageState()!=ImageState.LOADED)return;const An=Oe.getBuilder(Te.getZIndex(),"Image");An.setImageStyle(He,En),An.drawPoint(e,ke,Be)}if(Cn){const An=Oe.getBuilder(Te.getZIndex(),"Text");An.setTextStyle(We,En),An.drawText(e,ke,Be)}}function renderMultiPointGeometry(Oe,e,Te,ke,Be,Ue){const He=Te.getImage(),We=He&&He.getOpacity()!==0,Cn=Te.getText(),En=Cn&&Cn.getText(),An=Ue&&We&&En?{}:void 0;if(We){if(He.getImageState()!=ImageState.LOADED)return;const Sn=Oe.getBuilder(Te.getZIndex(),"Image");Sn.setImageStyle(He,An),Sn.drawMultiPoint(e,ke,Be)}if(En){const Sn=Oe.getBuilder(Te.getZIndex(),"Text");Sn.setTextStyle(Cn,An),Sn.drawText(e,ke,Be)}}function renderPolygonGeometry(Oe,e,Te,ke,Be){const Ue=Te.getFill(),He=Te.getStroke();if(Ue||He){const Cn=Oe.getBuilder(Te.getZIndex(),"Polygon");Cn.setFillStrokeStyle(Ue,He),Cn.drawPolygon(e,ke,Be)}const We=Te.getText();if(We&&We.getText()){const Cn=Oe.getBuilder(Te.getZIndex(),"Text");Cn.setTextStyle(We),Cn.drawText(e,ke,Be)}}class RenderEvent extends BaseEvent{constructor(e,Te,ke,Be){super(e),this.inversePixelTransform=Te,this.frameState=ke,this.context=Be}}const maxStaleKeys=5;class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=maxStaleKeys}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,Te){return abstract()}forEachFeatureAtCoordinate(e,Te,ke,Be,Ue){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const Te=e.target;(Te.getState()===ImageState.LOADED||Te.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let Te=e.getState();return Te!=ImageState.LOADED&&Te!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),Te==ImageState.IDLE&&(e.load(),Te=e.getState()),Te==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const canvasPool=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create(),this.pixelTransform=create(),this.inversePixelTransform=create(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,Te,ke){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let Be;try{pixelContext.drawImage(e,Te,ke,1,1,0,0,1,1),Be=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return Be}getBackground(e){let ke=this.getLayer().getBackground();return typeof ke=="function"&&(ke=ke(e.viewState.resolution)),ke||void 0}useContainer(e,Te,ke){const Be=this.getLayer().getClassName();let Ue,He;if(e&&e.className===Be&&(!ke||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(ke)))){const We=e.firstElementChild;We instanceof HTMLCanvasElement&&(He=We.getContext("2d"))}if(He&&equivalent(He.canvas.style.transform,Te)?(this.container=e,this.context=He,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){Ue=document.createElement("div"),Ue.className=Be;let We=Ue.style;We.position="absolute",We.width="100%",We.height="100%",He=createCanvasContext2D();const Cn=He.canvas;Ue.appendChild(Cn),We=Cn.style,We.position="absolute",We.left="0",We.transformOrigin="top left",this.container=Ue,this.context=He}!this.containerReused&&ke&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=ke)}clipUnrotated(e,Te,ke){const Be=getTopLeft(ke),Ue=getTopRight(ke),He=getBottomRight(ke),We=getBottomLeft(ke);apply(Te.coordinateToPixelTransform,Be),apply(Te.coordinateToPixelTransform,Ue),apply(Te.coordinateToPixelTransform,He),apply(Te.coordinateToPixelTransform,We);const Cn=this.inversePixelTransform;apply(Cn,Be),apply(Cn,Ue),apply(Cn,He),apply(Cn,We),e.save(),e.beginPath(),e.moveTo(Math.round(Be[0]),Math.round(Be[1])),e.lineTo(Math.round(Ue[0]),Math.round(Ue[1])),e.lineTo(Math.round(He[0]),Math.round(He[1])),e.lineTo(Math.round(We[0]),Math.round(We[1])),e.clip()}prepareContainer(e,Te){const ke=e.extent,Be=e.viewState.resolution,Ue=e.viewState.rotation,He=e.pixelRatio,We=Math.round(getWidth(ke)/Be*He),Cn=Math.round(getHeight(ke)/Be*He);compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/He,1/He,Ue,-We/2,-Cn/2),makeInverse(this.inversePixelTransform,this.pixelTransform);const En=toString$1(this.pixelTransform);if(this.useContainer(Te,En,this.getBackground(e)),!this.containerReused){const An=this.context.canvas;An.width!=We||An.height!=Cn?(An.width=We,An.height=Cn):this.context.clearRect(0,0,We,Cn),En!==An.style.transform&&(An.style.transform=En)}}dispatchRenderEvent_(e,Te,ke){const Be=this.getLayer();if(Be.hasListener(e)){const Ue=new RenderEvent(e,this.inversePixelTransform,ke,Te);Be.dispatchEvent(Ue)}}preRender(e,Te){this.frameState=Te,!Te.declutter&&this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,Te)}postRender(e,Te){Te.declutter||this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,Te)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new ZIndexContext),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(RenderEventType.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(RenderEventType.POSTRENDER,this.context,e))}getRenderTransform(e,Te,ke,Be,Ue,He,We){const Cn=Ue/2,En=He/2,An=Be/Te,Sn=-An,Tn=-e[0]+We,Ln=-e[1];return compose(this.tempTransform,Cn,En,An,Sn,-ke,Tn,Ln)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,Te,ke){const Be=Te.extent,Ue=Te.viewState,He=Ue.center,We=Ue.resolution,Cn=Ue.projection,En=Ue.rotation,An=Cn.getExtent(),Sn=this.getLayer().getSource(),Tn=this.getLayer().getDeclutter(),Ln=Te.pixelRatio,Bn=Te.viewHints,ei=!(Bn[ViewHint.ANIMATING]||Bn[ViewHint.INTERACTING]),ti=this.context,ni=Math.round(getWidth(Be)/We*Ln),ri=Math.round(getHeight(Be)/We*Ln),si=Sn.getWrapX()&&Cn.canWrapX(),ai=si?getWidth(An):null,li=si?Math.ceil((Be[2]-An[2])/ai)+1:1;let Pi=si?Math.floor((Be[0]-An[0])/ai):0;do{let pi=this.getRenderTransform(He,We,0,Ln,ni,ri,Pi*ai);Te.declutter&&(pi=pi.slice(0)),e.execute(ti,[ti.canvas.width,ti.canvas.height],pi,En,ei,ke===void 0?ALL:ke?DECLUTTER:NON_DECLUTTER,ke?Tn&&Te.declutter[Tn]:void 0)}while(++Pi<li)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,releaseCanvas(this.context),canvasPool.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,Te){const ke=e.layerStatesArray[e.layerIndex];this.opacity_=ke.opacity;const Be=e.viewState;this.prepareContainer(e,Te);const Ue=this.context,He=this.replayGroup_;let We=He&&!He.isEmpty();if(!We&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(Ue,e),Be.projection,this.clipped_=!1,We&&ke.extent&&this.clipping){const Cn=fromUserExtent(ke.extent);We=intersects$1(Cn,e.extent),this.clipped_=We&&!containsExtent(Cn,e.extent),this.clipped_&&this.clipUnrotated(Ue,e,Cn)}return We&&this.renderWorlds(He,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&Ue.restore(),this.postRender(Ue,e),this.renderedRotation_!==Be.rotation&&(this.renderedRotation_=Be.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(Te=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const ke=this.frameState.size.slice(),Be=this.renderedCenter_,Ue=this.renderedResolution_,He=this.renderedRotation_,We=this.renderedProjection_,Cn=this.wrappedRenderedExtent_,En=this.getLayer(),An=[],Sn=ke[0]*HIT_DETECT_RESOLUTION,Tn=ke[1]*HIT_DETECT_RESOLUTION;An.push(this.getRenderTransform(Be,Ue,He,HIT_DETECT_RESOLUTION,Sn,Tn,0).slice());const Ln=En.getSource(),Bn=We.getExtent();if(Ln.getWrapX()&&We.canWrapX()&&!containsExtent(Bn,Cn)){let ei=Cn[0];const ti=getWidth(Bn);let ni=0,ri;for(;ei<Bn[0];)--ni,ri=ti*ni,An.push(this.getRenderTransform(Be,Ue,He,HIT_DETECT_RESOLUTION,Sn,Tn,ri).slice()),ei+=ti;for(ni=0,ei=Cn[2];ei>Bn[2];)++ni,ri=ti*ni,An.push(this.getRenderTransform(Be,Ue,He,HIT_DETECT_RESOLUTION,Sn,Tn,ri).slice()),ei-=ti}this.hitDetectionImageData_=createHitDetectionImageData(ke,An,this.renderedFeatures_,En.getStyleFunction(),Cn,Ue,He,getSquaredTolerance(Ue,this.renderedPixelRatio_),null)}Te(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,Te,ke,Be,Ue){var Tn,Ln;if(!this.replayGroup_)return;const He=Te.viewState.resolution,We=Te.viewState.rotation,Cn=this.getLayer(),En={},An=function(Bn,ei,ti){const ni=getUid(Bn),ri=En[ni];if(ri){if(ri!==!0&&ti<ri.distanceSq){if(ti===0)return En[ni]=!0,Ue.splice(Ue.lastIndexOf(ri),1),Be(Bn,Cn,ei);ri.geometry=ei,ri.distanceSq=ti}}else{if(ti===0)return En[ni]=!0,Be(Bn,Cn,ei);Ue.push(En[ni]={feature:Bn,layer:Cn,geometry:ei,distanceSq:ti,callback:Be})}},Sn=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,He,We,ke,An,Sn?(Ln=(Tn=Te.declutter)==null?void 0:Tn[Sn])==null?void 0:Ln.all().map(Bn=>Bn.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const Te=this.getLayer(),ke=Te.getSource();if(!ke)return!1;const Be=e.viewHints[ViewHint.ANIMATING],Ue=e.viewHints[ViewHint.INTERACTING],He=Te.getUpdateWhileAnimating(),We=Te.getUpdateWhileInteracting();if(this.ready&&!He&&Be||!We&&Ue)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const Cn=e.extent,En=e.viewState,An=En.projection,Sn=En.resolution,Tn=e.pixelRatio,Ln=Te.getRevision(),Bn=Te.getRenderBuffer();let ei=Te.getRenderOrder();ei===void 0&&(ei=defaultOrder);const ti=En.center.slice(),ni=buffer(Cn,Bn*Sn),ri=ni.slice(),si=[ni.slice()],ai=An.getExtent();if(ke.getWrapX()&&An.canWrapX()&&!containsExtent(ai,e.extent)){const Oi=getWidth(ai),Hi=Math.max(getWidth(ni)/2,Oi);ni[0]=ai[0]-Hi,ni[2]=ai[2]+Hi,wrapX$1(ti,An);const Ki=wrapX$2(si[0],An);Ki[0]<ai[0]&&Ki[2]<ai[2]?si.push([Ki[0]+Oi,Ki[1],Ki[2]+Oi,Ki[3]]):Ki[0]>ai[0]&&Ki[2]>ai[2]&&si.push([Ki[0]-Oi,Ki[1],Ki[2]-Oi,Ki[3]])}if(this.ready&&this.renderedResolution_==Sn&&this.renderedRevision_==Ln&&this.renderedRenderOrder_==ei&&this.renderedFrameDeclutter_===!!e.declutter&&containsExtent(this.wrappedRenderedExtent_,ni))return equals$2(this.renderedExtent_,ri)||(this.hitDetectionImageData_=null,this.renderedExtent_=ri),this.renderedCenter_=ti,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const li=new BuilderGroup(getTolerance(Sn,Tn),ni,Sn,Tn);let Pi;for(let Oi=0,Hi=si.length;Oi<Hi;++Oi)ke.loadFeatures(si[Oi],Sn,An);const pi=getSquaredTolerance(Sn,Tn);let vi=!0;const Ri=(Oi,Hi)=>{let Ki;const or=Oi.getStyleFunction()||Te.getStyleFunction();if(or&&(Ki=or(Oi,Sn)),Ki){const sr=this.renderFeature(Oi,pi,Ki,li,Pi,this.getLayer().getDeclutter(),Hi);vi=vi&&!sr}},Fi=toUserExtent(ni),di=ke.getFeaturesInExtent(Fi);ei&&di.sort(ei);for(let Oi=0,Hi=di.length;Oi<Hi;++Oi)Ri(di[Oi],Oi);this.renderedFeatures_=di,this.ready=vi;const ci=li.finish(),Mi=new ExecutorGroup(ni,Sn,Tn,ke.getOverlaps(),ci,Te.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=Sn,this.renderedRevision_=Ln,this.renderedRenderOrder_=ei,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=ri,this.wrappedRenderedExtent_=ni,this.renderedCenter_=ti,this.renderedProjection_=An,this.renderedPixelRatio_=Tn,this.replayGroup_=Mi,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,Te,ke,Be,Ue,He,We){if(!ke)return!1;let Cn=!1;if(Array.isArray(ke))for(let En=0,An=ke.length;En<An;++En)Cn=renderFeature$1(Be,e,ke[En],Te,this.boundHandleStyleImageChange_,Ue,He,We)||Cn;else Cn=renderFeature$1(Be,e,ke,Te,this.boundHandleStyleImageChange_,Ue,He,We);return Cn}}let numTypes=0;const BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,SizeType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]",[SizeType]:"size"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function isSpecific(Oe){return Oe in typeNames}function typeName(Oe){const e=[];for(const Te of namedTypes)includesType(Oe,Te)&&e.push(typeNames[Te]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(Oe,e){return(Oe&e)===e}function isType(Oe,e){return Oe===e}class LiteralExpression{constructor(e,Te){if(!isSpecific(e))throw new Error(`literal expressions must have a specific type, got ${typeName(e)}`);this.type=e,this.value=Te}}class CallExpression{constructor(e,Te,...ke){this.type=e,this.operator=Te,this.args=ke}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function parse$2(Oe,e,Te){switch(typeof Oe){case"boolean":{if(isType(e,StringType$1))return new LiteralExpression(StringType$1,Oe?"true":"false");if(!includesType(e,BooleanType$1))throw new Error(`got a boolean, but expected ${typeName(e)}`);return new LiteralExpression(BooleanType$1,Oe)}case"number":{if(isType(e,SizeType))return new LiteralExpression(SizeType,toSize(Oe));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!Oe);if(isType(e,StringType$1))return new LiteralExpression(StringType$1,Oe.toString());if(!includesType(e,NumberType$1))throw new Error(`got a number, but expected ${typeName(e)}`);return new LiteralExpression(NumberType$1,Oe)}case"string":{if(isType(e,ColorType$1))return new LiteralExpression(ColorType$1,fromString(Oe));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!Oe);if(!includesType(e,StringType$1))throw new Error(`got a string, but expected ${typeName(e)}`);return new LiteralExpression(StringType$1,Oe)}}if(!Array.isArray(Oe))throw new Error("expression must be an array or a primitive value");if(Oe.length===0)throw new Error("empty expression");if(typeof Oe[0]=="string")return parseCallExpression(Oe,e,Te);for(const ke of Oe)if(typeof ke!="number")throw new Error("expected an array of numbers");if(isType(e,SizeType)){if(Oe.length!==2)throw new Error(`expected an array of two values for a size, got ${Oe.length}`);return new LiteralExpression(SizeType,Oe)}if(isType(e,ColorType$1)){if(Oe.length===3)return new LiteralExpression(ColorType$1,[...Oe,1]);if(Oe.length===4)return new LiteralExpression(ColorType$1,Oe);throw new Error(`expected an array of 3 or 4 values for a color, got ${Oe.length}`)}if(!includesType(e,NumberArrayType))throw new Error(`got an array of numbers, but expected ${typeName(e)}`);return new LiteralExpression(NumberArrayType,Oe)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},parsers={[Ops.Get]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Var]:createCallExpressionParser(hasArgsCount(1,1),withVarArgs),[Ops.Has]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Id]:createCallExpressionParser(usesFeatureId,withNoArgs),[Ops.Concat]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(StringType$1)),[Ops.GeometryType]:createCallExpressionParser(usesGeometryType,withNoArgs),[Ops.LineMetric]:createCallExpressionParser(withNoArgs),[Ops.Resolution]:createCallExpressionParser(usesMapState,withNoArgs),[Ops.Zoom]:createCallExpressionParser(usesMapState,withNoArgs),[Ops.Time]:createCallExpressionParser(usesMapState,withNoArgs),[Ops.Any]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.All]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.Not]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1)),[Ops.Equal]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.NotEqual]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.GreaterThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.GreaterThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Multiply]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Coalesce]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Divide]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Add]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(NumberType$1)),[Ops.Subtract]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Clamp]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Mod]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Pow]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Abs]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Floor]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Ceil]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Round]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Sin]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Cos]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Atan]:createCallExpressionParser(hasArgsCount(1,2),withArgsOfType(NumberType$1)),[Ops.Sqrt]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Match]:createCallExpressionParser(hasArgsCount(4,1/0),hasEvenArgs,withMatchArgs),[Ops.Between]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Interpolate]:createCallExpressionParser(hasArgsCount(6,1/0),hasEvenArgs,withInterpolateArgs),[Ops.Case]:createCallExpressionParser(hasArgsCount(3,1/0),hasOddArgs,withCaseArgs),[Ops.In]:createCallExpressionParser(hasArgsCount(2,2),withInArgs),[Ops.Number]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.String]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.Array]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(NumberType$1)),[Ops.Color]:createCallExpressionParser(hasArgsCount(1,4),withArgsOfType(NumberType$1)),[Ops.Band]:createCallExpressionParser(hasArgsCount(1,3),withArgsOfType(NumberType$1)),[Ops.Palette]:createCallExpressionParser(hasArgsCount(2,2),withPaletteArgs),[Ops.ToString]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1|NumberType$1|StringType$1|ColorType$1))};function withGetArgs(Oe,e,Te){const ke=Oe.length-1,Be=new Array(ke);for(let Ue=0;Ue<ke;++Ue){const He=Oe[Ue+1];switch(typeof He){case"number":{Be[Ue]=new LiteralExpression(NumberType$1,He);break}case"string":{Be[Ue]=new LiteralExpression(StringType$1,He);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${He}`)}Ue===0&&Te.properties.add(String(He))}return Be}function withVarArgs(Oe,e,Te){const ke=Oe[1];if(typeof ke!="string")throw new Error("expected a string argument for var operation");return Te.variables.add(ke),[new LiteralExpression(StringType$1,ke)]}function usesFeatureId(Oe,e,Te){Te.featureId=!0}function usesGeometryType(Oe,e,Te){Te.geometryType=!0}function usesMapState(Oe,e,Te){Te.mapState=!0}function withNoArgs(Oe,e,Te){const ke=Oe[0];if(Oe.length!==1)throw new Error(`expected no arguments for ${ke} operation`);return[]}function hasArgsCount(Oe,e){return function(Te,ke,Be){const Ue=Te[0],He=Te.length-1;if(Oe===e){if(He!==Oe){const We=Oe===1?"":"s";throw new Error(`expected ${Oe} argument${We} for ${Ue}, got ${He}`)}}else if(He<Oe||He>e){const We=e===1/0?`${Oe} or more`:`${Oe} to ${e}`;throw new Error(`expected ${We} arguments for ${Ue}, got ${He}`)}}}function withArgsOfReturnType(Oe,e,Te){const ke=Oe.length-1,Be=new Array(ke);for(let Ue=0;Ue<ke;++Ue){const He=parse$2(Oe[Ue+1],e,Te);Be[Ue]=He}return Be}function withArgsOfType(Oe){return function(e,Te,ke){const Be=e.length-1,Ue=new Array(Be);for(let He=0;He<Be;++He){const We=parse$2(e[He+1],Oe,ke);Ue[He]=We}return Ue}}function hasOddArgs(Oe,e,Te){const ke=Oe[0],Be=Oe.length-1;if(Be%2===0)throw new Error(`expected an odd number of arguments for ${ke}, got ${Be} instead`)}function hasEvenArgs(Oe,e,Te){const ke=Oe[0],Be=Oe.length-1;if(Be%2===1)throw new Error(`expected an even number of arguments for operation ${ke}, got ${Be} instead`)}function withMatchArgs(Oe,e,Te){const ke=Oe.length-1,Be=StringType$1|NumberType$1|BooleanType$1,Ue=parse$2(Oe[1],Be,Te),He=parse$2(Oe[Oe.length-1],e,Te),We=new Array(ke-2);for(let Cn=0;Cn<ke-2;Cn+=2){try{const En=parse$2(Oe[Cn+2],Ue.type,Te);We[Cn]=En}catch(En){throw new Error(`failed to parse argument ${Cn+1} of match expression: ${En.message}`)}try{const En=parse$2(Oe[Cn+3],He.type,Te);We[Cn+1]=En}catch(En){throw new Error(`failed to parse argument ${Cn+2} of match expression: ${En.message}`)}}return[Ue,...We,He]}function withInterpolateArgs(Oe,e,Te){const ke=Oe[1];let Be;switch(ke[0]){case"linear":Be=1;break;case"exponential":const Cn=ke[1];if(typeof Cn!="number"||Cn<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(Cn)} instead`);Be=Cn;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(ke)}`)}const Ue=new LiteralExpression(NumberType$1,Be);let He;try{He=parse$2(Oe[2],NumberType$1,Te)}catch(Cn){throw new Error(`failed to parse argument 1 in interpolate expression: ${Cn.message}`)}const We=new Array(Oe.length-3);for(let Cn=0;Cn<We.length;Cn+=2){try{const En=parse$2(Oe[Cn+3],NumberType$1,Te);We[Cn]=En}catch(En){throw new Error(`failed to parse argument ${Cn+2} for interpolate expression: ${En.message}`)}try{const En=parse$2(Oe[Cn+4],e,Te);We[Cn+1]=En}catch(En){throw new Error(`failed to parse argument ${Cn+3} for interpolate expression: ${En.message}`)}}return[Ue,He,...We]}function withCaseArgs(Oe,e,Te){const ke=parse$2(Oe[Oe.length-1],e,Te),Be=new Array(Oe.length-1);for(let Ue=0;Ue<Be.length-1;Ue+=2){try{const He=parse$2(Oe[Ue+1],BooleanType$1,Te);Be[Ue]=He}catch(He){throw new Error(`failed to parse argument ${Ue} of case expression: ${He.message}`)}try{const He=parse$2(Oe[Ue+2],ke.type,Te);Be[Ue+1]=He}catch(He){throw new Error(`failed to parse argument ${Ue+1} of case expression: ${He.message}`)}}return Be[Be.length-1]=ke,Be}function withInArgs(Oe,e,Te){let ke=Oe[2];if(!Array.isArray(ke))throw new Error('the second argument for the "in" operator must be an array');let Be;if(typeof ke[0]=="string"){if(ke[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(ke[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');ke=ke[1],Be=StringType$1}else Be=NumberType$1;const Ue=new Array(ke.length);for(let We=0;We<Ue.length;We++)try{const Cn=parse$2(ke[We],Be,Te);Ue[We]=Cn}catch(Cn){throw new Error(`failed to parse haystack item ${We} for "in" expression: ${Cn.message}`)}return[parse$2(Oe[1],Be,Te),...Ue]}function withPaletteArgs(Oe,e,Te){let ke;try{ke=parse$2(Oe[1],NumberType$1,Te)}catch(He){throw new Error(`failed to parse first argument in palette expression: ${He.message}`)}const Be=Oe[2];if(!Array.isArray(Be))throw new Error("the second argument of palette must be an array");const Ue=new Array(Be.length);for(let He=0;He<Ue.length;He++){let We;try{We=parse$2(Be[He],ColorType$1,Te)}catch(Cn){throw new Error(`failed to parse color at index ${He} in palette expression: ${Cn.message}`)}if(!(We instanceof LiteralExpression))throw new Error(`the palette color at index ${He} must be a literal value`);Ue[He]=We}return[ke,...Ue]}function createCallExpressionParser(...Oe){return function(e,Te,ke){const Be=e[0];let Ue;for(let He=0;He<Oe.length;He++){const We=Oe[He](e,Te,ke);if(He==Oe.length-1){if(!We)throw new Error("expected last argument validator to return the parsed args");Ue=We}}return new CallExpression(Te,Be,...Ue)}}function parseCallExpression(Oe,e,Te){const ke=Oe[0],Be=parsers[ke];if(!Be)throw new Error(`unknown operator: ${ke}`);return Be(Oe,e,Te)}function computeGeometryType(Oe){if(!Oe)return"";const e=Oe.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return computeGeometryType(Oe.getGeometries()[0]);default:return""}}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function buildExpression(Oe,e,Te){const ke=parse$2(Oe,e,Te);return compileExpression(ke)}function compileExpression(Oe,e){if(Oe instanceof LiteralExpression){if(Oe.type===ColorType$1&&typeof Oe.value=="string"){const ke=fromString(Oe.value);return function(){return ke}}return function(){return Oe.value}}const Te=Oe.operator;switch(Te){case Ops.Number:case Ops.String:case Ops.Coalesce:return compileAssertionExpression(Oe);case Ops.Get:case Ops.Var:case Ops.Has:return compileAccessorExpression(Oe);case Ops.Id:return ke=>ke.featureId;case Ops.GeometryType:return ke=>ke.geometryType;case Ops.Concat:{const ke=Oe.args.map(Be=>compileExpression(Be));return Be=>"".concat(...ke.map(Ue=>Ue(Be).toString()))}case Ops.Resolution:return ke=>ke.resolution;case Ops.Any:case Ops.All:case Ops.Between:case Ops.In:case Ops.Not:return compileLogicalExpression(Oe);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(Oe);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(Oe);case Ops.Case:return compileCaseExpression(Oe);case Ops.Match:return compileMatchExpression(Oe);case Ops.Interpolate:return compileInterpolateExpression(Oe);case Ops.ToString:return compileConvertExpression(Oe);default:throw new Error(`Unsupported operator ${Te}`)}}function compileAssertionExpression(Oe,e){const Te=Oe.operator,ke=Oe.args.length,Be=new Array(ke);for(let Ue=0;Ue<ke;++Ue)Be[Ue]=compileExpression(Oe.args[Ue]);switch(Te){case Ops.Coalesce:return Ue=>{for(let He=0;He<ke;++He){const We=Be[He](Ue);if(typeof We<"u"&&We!==null)return We}throw new Error("Expected one of the values to be non-null")};case Ops.Number:case Ops.String:return Ue=>{for(let He=0;He<ke;++He){const We=Be[He](Ue);if(typeof We===Te)return We}throw new Error(`Expected one of the values to be a ${Te}`)};default:throw new Error(`Unsupported assertion operator ${Te}`)}}function compileAccessorExpression(Oe,e){const ke=Oe.args[0].value;switch(Oe.operator){case Ops.Get:return Be=>{const Ue=Oe.args;let He=Be.properties[ke];for(let We=1,Cn=Ue.length;We<Cn;++We){const An=Ue[We].value;He=He[An]}return He};case Ops.Var:return Be=>Be.variables[ke];case Ops.Has:return Be=>{const Ue=Oe.args;if(!(ke in Be.properties))return!1;let He=Be.properties[ke];for(let We=1,Cn=Ue.length;We<Cn;++We){const An=Ue[We].value;if(!He||!Object.hasOwn(He,An))return!1;He=He[An]}return!0};default:throw new Error(`Unsupported accessor operator ${Oe.operator}`)}}function compileComparisonExpression(Oe,e){const Te=Oe.operator,ke=compileExpression(Oe.args[0]),Be=compileExpression(Oe.args[1]);switch(Te){case Ops.Equal:return Ue=>ke(Ue)===Be(Ue);case Ops.NotEqual:return Ue=>ke(Ue)!==Be(Ue);case Ops.LessThan:return Ue=>ke(Ue)<Be(Ue);case Ops.LessThanOrEqualTo:return Ue=>ke(Ue)<=Be(Ue);case Ops.GreaterThan:return Ue=>ke(Ue)>Be(Ue);case Ops.GreaterThanOrEqualTo:return Ue=>ke(Ue)>=Be(Ue);default:throw new Error(`Unsupported comparison operator ${Te}`)}}function compileLogicalExpression(Oe,e){const Te=Oe.operator,ke=Oe.args.length,Be=new Array(ke);for(let Ue=0;Ue<ke;++Ue)Be[Ue]=compileExpression(Oe.args[Ue]);switch(Te){case Ops.Any:return Ue=>{for(let He=0;He<ke;++He)if(Be[He](Ue))return!0;return!1};case Ops.All:return Ue=>{for(let He=0;He<ke;++He)if(!Be[He](Ue))return!1;return!0};case Ops.Between:return Ue=>{const He=Be[0](Ue),We=Be[1](Ue),Cn=Be[2](Ue);return He>=We&&He<=Cn};case Ops.In:return Ue=>{const He=Be[0](Ue);for(let We=1;We<ke;++We)if(He===Be[We](Ue))return!0;return!1};case Ops.Not:return Ue=>!Be[0](Ue);default:throw new Error(`Unsupported logical operator ${Te}`)}}function compileNumericExpression(Oe,e){const Te=Oe.operator,ke=Oe.args.length,Be=new Array(ke);for(let Ue=0;Ue<ke;++Ue)Be[Ue]=compileExpression(Oe.args[Ue]);switch(Te){case Ops.Multiply:return Ue=>{let He=1;for(let We=0;We<ke;++We)He*=Be[We](Ue);return He};case Ops.Divide:return Ue=>Be[0](Ue)/Be[1](Ue);case Ops.Add:return Ue=>{let He=0;for(let We=0;We<ke;++We)He+=Be[We](Ue);return He};case Ops.Subtract:return Ue=>Be[0](Ue)-Be[1](Ue);case Ops.Clamp:return Ue=>{const He=Be[0](Ue),We=Be[1](Ue);if(He<We)return We;const Cn=Be[2](Ue);return He>Cn?Cn:He};case Ops.Mod:return Ue=>Be[0](Ue)%Be[1](Ue);case Ops.Pow:return Ue=>Math.pow(Be[0](Ue),Be[1](Ue));case Ops.Abs:return Ue=>Math.abs(Be[0](Ue));case Ops.Floor:return Ue=>Math.floor(Be[0](Ue));case Ops.Ceil:return Ue=>Math.ceil(Be[0](Ue));case Ops.Round:return Ue=>Math.round(Be[0](Ue));case Ops.Sin:return Ue=>Math.sin(Be[0](Ue));case Ops.Cos:return Ue=>Math.cos(Be[0](Ue));case Ops.Atan:return ke===2?Ue=>Math.atan2(Be[0](Ue),Be[1](Ue)):Ue=>Math.atan(Be[0](Ue));case Ops.Sqrt:return Ue=>Math.sqrt(Be[0](Ue));default:throw new Error(`Unsupported numeric operator ${Te}`)}}function compileCaseExpression(Oe,e){const Te=Oe.args.length,ke=new Array(Te);for(let Be=0;Be<Te;++Be)ke[Be]=compileExpression(Oe.args[Be]);return Be=>{for(let Ue=0;Ue<Te-1;Ue+=2)if(ke[Ue](Be))return ke[Ue+1](Be);return ke[Te-1](Be)}}function compileMatchExpression(Oe,e){const Te=Oe.args.length,ke=new Array(Te);for(let Be=0;Be<Te;++Be)ke[Be]=compileExpression(Oe.args[Be]);return Be=>{const Ue=ke[0](Be);for(let He=1;He<Te-1;He+=2)if(Ue===ke[He](Be))return ke[He+1](Be);return ke[Te-1](Be)}}function compileInterpolateExpression(Oe,e){const Te=Oe.args.length,ke=new Array(Te);for(let Be=0;Be<Te;++Be)ke[Be]=compileExpression(Oe.args[Be]);return Be=>{const Ue=ke[0](Be),He=ke[1](Be);let We,Cn;for(let En=2;En<Te;En+=2){const An=ke[En](Be);let Sn=ke[En+1](Be);const Tn=Array.isArray(Sn);if(Tn&&(Sn=withAlpha(Sn)),An>=He)return En===2?Sn:Tn?interpolateColor(Ue,He,We,Cn,An,Sn):interpolateNumber$1(Ue,He,We,Cn,An,Sn);We=An,Cn=Sn}return Cn}}function compileConvertExpression(Oe,e){const Te=Oe.operator,ke=Oe.args.length,Be=new Array(ke);for(let Ue=0;Ue<ke;++Ue)Be[Ue]=compileExpression(Oe.args[Ue]);switch(Te){case Ops.ToString:return Ue=>{const He=Be[0](Ue);return Oe.args[0].type===ColorType$1?toString(He):He.toString()};default:throw new Error(`Unsupported convert operator ${Te}`)}}function interpolateNumber$1(Oe,e,Te,ke,Be,Ue){const He=Be-Te;if(He===0)return ke;const We=e-Te,Cn=Oe===1?We/He:(Math.pow(Oe,We)-1)/(Math.pow(Oe,He)-1);return ke+Cn*(Ue-ke)}function interpolateColor(Oe,e,Te,ke,Be,Ue){if(Be-Te===0)return ke;const We=rgbaToLcha(ke),Cn=rgbaToLcha(Ue);let En=Cn[2]-We[2];En>180?En-=360:En<-180&&(En+=360);const An=[interpolateNumber$1(Oe,e,Te,We[0],Be,Cn[0]),interpolateNumber$1(Oe,e,Te,We[1],Be,Cn[1]),We[2]+interpolateNumber$1(Oe,e,Te,0,Be,En),interpolateNumber$1(Oe,e,Te,ke[3],Be,Ue[3])];return lchaToRgba(An)}function always(Oe){return!0}function rulesToStyleFunction(Oe){const e=newParsingContext(),Te=buildRuleSet(Oe,e),ke=newEvaluationContext();return function(Be,Ue){if(ke.properties=Be.getPropertiesInternal(),ke.resolution=Ue,e.featureId){const He=Be.getId();He!==void 0?ke.featureId=He:ke.featureId=null}return e.geometryType&&(ke.geometryType=computeGeometryType(Be.getGeometry())),Te(ke)}}function flatStylesToStyleFunction(Oe){const e=newParsingContext(),Te=Oe.length,ke=new Array(Te);for(let He=0;He<Te;++He)ke[He]=buildStyle(Oe[He],e);const Be=newEvaluationContext(),Ue=new Array(Te);return function(He,We){if(Be.properties=He.getPropertiesInternal(),Be.resolution=We,e.featureId){const En=He.getId();En!==void 0?Be.featureId=En:Be.featureId=null}let Cn=0;for(let En=0;En<Te;++En){const An=ke[En](Be);An&&(Ue[Cn]=An,Cn+=1)}return Ue.length=Cn,Ue}}function buildRuleSet(Oe,e){const Te=Oe.length,ke=new Array(Te);for(let Be=0;Be<Te;++Be){const Ue=Oe[Be],He="filter"in Ue?buildExpression(Ue.filter,BooleanType$1,e):always;let We;if(Array.isArray(Ue.style)){const Cn=Ue.style.length;We=new Array(Cn);for(let En=0;En<Cn;++En)We[En]=buildStyle(Ue.style[En],e)}else We=[buildStyle(Ue.style,e)];ke[Be]={filter:He,styles:We}}return function(Be){const Ue=[];let He=!1;for(let We=0;We<Te;++We){const Cn=ke[We].filter;if(Cn(Be)&&!(Oe[We].else&&He)){He=!0;for(const En of ke[We].styles){const An=En(Be);An&&Ue.push(An)}}}return Ue}}function buildStyle(Oe,e){const Te=buildFill(Oe,"",e),ke=buildStroke(Oe,"",e),Be=buildText(Oe,e),Ue=buildImage(Oe,e),He=numberEvaluator(Oe,"z-index",e);if(!Te&&!ke&&!Be&&!Ue&&!isEmpty$1(Oe))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(Oe));const We=new Style$1;return function(Cn){let En=!0;if(Te){const An=Te(Cn);An&&(En=!1),We.setFill(An)}if(ke){const An=ke(Cn);An&&(En=!1),We.setStroke(An)}if(Be){const An=Be(Cn);An&&(En=!1),We.setText(An)}if(Ue){const An=Ue(Cn);An&&(En=!1),We.setImage(An)}return He&&We.setZIndex(He(Cn)),En?null:We}}function buildFill(Oe,e,Te){let ke;if(e+"fill-pattern-src"in Oe)ke=patternEvaluator(Oe,e+"fill-",Te);else{if(Oe[e+"fill-color"]==="none")return Ue=>null;ke=colorLikeEvaluator(Oe,e+"fill-color",Te)}if(!ke)return null;const Be=new Fill;return function(Ue){const He=ke(Ue);return He===NO_COLOR?null:(Be.setColor(He),Be)}}function buildStroke(Oe,e,Te){const ke=numberEvaluator(Oe,e+"stroke-width",Te),Be=colorLikeEvaluator(Oe,e+"stroke-color",Te);if(!ke&&!Be)return null;const Ue=stringEvaluator(Oe,e+"stroke-line-cap",Te),He=stringEvaluator(Oe,e+"stroke-line-join",Te),We=numberArrayEvaluator(Oe,e+"stroke-line-dash",Te),Cn=numberEvaluator(Oe,e+"stroke-line-dash-offset",Te),En=numberEvaluator(Oe,e+"stroke-miter-limit",Te),An=new Stroke;return function(Sn){if(Be){const Tn=Be(Sn);if(Tn===NO_COLOR)return null;An.setColor(Tn)}if(ke&&An.setWidth(ke(Sn)),Ue){const Tn=Ue(Sn);if(Tn!=="butt"&&Tn!=="round"&&Tn!=="square")throw new Error("Expected butt, round, or square line cap");An.setLineCap(Tn)}if(He){const Tn=He(Sn);if(Tn!=="bevel"&&Tn!=="round"&&Tn!=="miter")throw new Error("Expected bevel, round, or miter line join");An.setLineJoin(Tn)}return We&&An.setLineDash(We(Sn)),Cn&&An.setLineDashOffset(Cn(Sn)),En&&An.setMiterLimit(En(Sn)),An}}function buildText(Oe,e){const Te="text-",ke=stringEvaluator(Oe,Te+"value",e);if(!ke)return null;const Be=buildFill(Oe,Te,e),Ue=buildFill(Oe,Te+"background-",e),He=buildStroke(Oe,Te,e),We=buildStroke(Oe,Te+"background-",e),Cn=stringEvaluator(Oe,Te+"font",e),En=numberEvaluator(Oe,Te+"max-angle",e),An=numberEvaluator(Oe,Te+"offset-x",e),Sn=numberEvaluator(Oe,Te+"offset-y",e),Tn=booleanEvaluator(Oe,Te+"overflow",e),Ln=stringEvaluator(Oe,Te+"placement",e),Bn=numberEvaluator(Oe,Te+"repeat",e),ei=sizeLikeEvaluator(Oe,Te+"scale",e),ti=booleanEvaluator(Oe,Te+"rotate-with-view",e),ni=numberEvaluator(Oe,Te+"rotation",e),ri=stringEvaluator(Oe,Te+"align",e),si=stringEvaluator(Oe,Te+"justify",e),ai=stringEvaluator(Oe,Te+"baseline",e),li=booleanEvaluator(Oe,Te+"keep-upright",e),Pi=numberArrayEvaluator(Oe,Te+"padding",e),pi=optionalDeclutterMode(Oe,Te+"declutter-mode"),vi=new Text({declutterMode:pi});return function(Ri){if(vi.setText(ke(Ri)),Be&&vi.setFill(Be(Ri)),Ue&&vi.setBackgroundFill(Ue(Ri)),He&&vi.setStroke(He(Ri)),We&&vi.setBackgroundStroke(We(Ri)),Cn&&vi.setFont(Cn(Ri)),En&&vi.setMaxAngle(En(Ri)),An&&vi.setOffsetX(An(Ri)),Sn&&vi.setOffsetY(Sn(Ri)),Tn&&vi.setOverflow(Tn(Ri)),Ln){const Fi=Ln(Ri);if(Fi!=="point"&&Fi!=="line")throw new Error("Expected point or line for text-placement");vi.setPlacement(Fi)}if(Bn&&vi.setRepeat(Bn(Ri)),ei&&vi.setScale(ei(Ri)),ti&&vi.setRotateWithView(ti(Ri)),ni&&vi.setRotation(ni(Ri)),ri){const Fi=ri(Ri);if(Fi!=="left"&&Fi!=="center"&&Fi!=="right"&&Fi!=="end"&&Fi!=="start")throw new Error("Expected left, right, center, start, or end for text-align");vi.setTextAlign(Fi)}if(si){const Fi=si(Ri);if(Fi!=="left"&&Fi!=="right"&&Fi!=="center")throw new Error("Expected left, right, or center for text-justify");vi.setJustify(Fi)}if(ai){const Fi=ai(Ri);if(Fi!=="bottom"&&Fi!=="top"&&Fi!=="middle"&&Fi!=="alphabetic"&&Fi!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");vi.setTextBaseline(Fi)}return Pi&&vi.setPadding(Pi(Ri)),li&&vi.setKeepUpright(li(Ri)),vi}}function buildImage(Oe,e){return"icon-src"in Oe?buildIcon(Oe,e):"shape-points"in Oe?buildShape(Oe,e):"circle-radius"in Oe?buildCircle(Oe,e):null}function buildIcon(Oe,e){const Te="icon-",ke=Te+"src",Be=requireString(Oe[ke],ke),Ue=coordinateEvaluator(Oe,Te+"anchor",e),He=sizeLikeEvaluator(Oe,Te+"scale",e),We=numberEvaluator(Oe,Te+"opacity",e),Cn=coordinateEvaluator(Oe,Te+"displacement",e),En=numberEvaluator(Oe,Te+"rotation",e),An=booleanEvaluator(Oe,Te+"rotate-with-view",e),Sn=optionalIconOrigin(Oe,Te+"anchor-origin"),Tn=optionalIconAnchorUnits(Oe,Te+"anchor-x-units"),Ln=optionalIconAnchorUnits(Oe,Te+"anchor-y-units"),Bn=optionalColorLike(Oe,Te+"color"),ei=optionalString(Oe,Te+"cross-origin"),ti=optionalNumberArray(Oe,Te+"offset"),ni=optionalIconOrigin(Oe,Te+"offset-origin"),ri=optionalNumber(Oe,Te+"width"),si=optionalNumber(Oe,Te+"height"),ai=optionalSize(Oe,Te+"size"),li=optionalDeclutterMode(Oe,Te+"declutter-mode"),Pi=new Icon({src:Be,anchorOrigin:Sn,anchorXUnits:Tn,anchorYUnits:Ln,color:Bn,crossOrigin:ei,offset:ti,offsetOrigin:ni,height:si,width:ri,size:ai,declutterMode:li});return function(pi){return We&&Pi.setOpacity(We(pi)),Cn&&Pi.setDisplacement(Cn(pi)),En&&Pi.setRotation(En(pi)),An&&Pi.setRotateWithView(An(pi)),He&&Pi.setScale(He(pi)),Ue&&Pi.setAnchor(Ue(pi)),Pi}}function buildShape(Oe,e){const Te="shape-",ke=Te+"points",Be=Te+"radius",Ue=requireNumber(Oe[ke],ke),He=requireNumber(Oe[Be],Be),We=buildFill(Oe,Te,e),Cn=buildStroke(Oe,Te,e),En=sizeLikeEvaluator(Oe,Te+"scale",e),An=coordinateEvaluator(Oe,Te+"displacement",e),Sn=numberEvaluator(Oe,Te+"rotation",e),Tn=booleanEvaluator(Oe,Te+"rotate-with-view",e),Ln=optionalNumber(Oe,Te+"radius2"),Bn=optionalNumber(Oe,Te+"angle"),ei=optionalDeclutterMode(Oe,Te+"declutter-mode"),ti=new RegularShape({points:Ue,radius:He,radius2:Ln,angle:Bn,declutterMode:ei});return function(ni){return We&&ti.setFill(We(ni)),Cn&&ti.setStroke(Cn(ni)),An&&ti.setDisplacement(An(ni)),Sn&&ti.setRotation(Sn(ni)),Tn&&ti.setRotateWithView(Tn(ni)),En&&ti.setScale(En(ni)),ti}}function buildCircle(Oe,e){const Te="circle-",ke=buildFill(Oe,Te,e),Be=buildStroke(Oe,Te,e),Ue=numberEvaluator(Oe,Te+"radius",e),He=sizeLikeEvaluator(Oe,Te+"scale",e),We=coordinateEvaluator(Oe,Te+"displacement",e),Cn=numberEvaluator(Oe,Te+"rotation",e),En=booleanEvaluator(Oe,Te+"rotate-with-view",e),An=optionalDeclutterMode(Oe,Te+"declutter-mode"),Sn=new CircleStyle({radius:5,declutterMode:An});return function(Tn){return Ue&&Sn.setRadius(Ue(Tn)),ke&&Sn.setFill(ke(Tn)),Be&&Sn.setStroke(Be(Tn)),We&&Sn.setDisplacement(We(Tn)),Cn&&Sn.setRotation(Cn(Tn)),En&&Sn.setRotateWithView(En(Tn)),He&&Sn.setScale(He(Tn)),Sn}}function numberEvaluator(Oe,e,Te){if(!(e in Oe))return;const ke=buildExpression(Oe[e],NumberType$1,Te);return function(Be){return requireNumber(ke(Be),e)}}function stringEvaluator(Oe,e,Te){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],StringType$1,Te);return function(Be){return requireString(ke(Be),e)}}function patternEvaluator(Oe,e,Te){const ke=stringEvaluator(Oe,e+"pattern-src",Te),Be=sizeEvaluator(Oe,e+"pattern-offset",Te),Ue=sizeEvaluator(Oe,e+"pattern-size",Te),He=colorLikeEvaluator(Oe,e+"color",Te);return function(We){return{src:ke(We),offset:Be&&Be(We),size:Ue&&Ue(We),color:He&&He(We)}}}function booleanEvaluator(Oe,e,Te){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],BooleanType$1,Te);return function(Be){const Ue=ke(Be);if(typeof Ue!="boolean")throw new Error(`Expected a boolean for ${e}`);return Ue}}function colorLikeEvaluator(Oe,e,Te){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],ColorType$1,Te);return function(Be){return requireColorLike(ke(Be),e)}}function numberArrayEvaluator(Oe,e,Te){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],NumberArrayType,Te);return function(Be){return requireNumberArray(ke(Be),e)}}function coordinateEvaluator(Oe,e,Te){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],NumberArrayType,Te);return function(Be){const Ue=requireNumberArray(ke(Be),e);if(Ue.length!==2)throw new Error(`Expected two numbers for ${e}`);return Ue}}function sizeEvaluator(Oe,e,Te){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],NumberArrayType,Te);return function(Be){return requireSize(ke(Be),e)}}function sizeLikeEvaluator(Oe,e,Te){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],NumberArrayType|NumberType$1,Te);return function(Be){return requireSizeLike(ke(Be),e)}}function optionalNumber(Oe,e){const Te=Oe[e];if(Te!==void 0){if(typeof Te!="number")throw new Error(`Expected a number for ${e}`);return Te}}function optionalSize(Oe,e){const Te=Oe[e];if(Te!==void 0){if(typeof Te=="number")return toSize(Te);if(!Array.isArray(Te))throw new Error(`Expected a number or size array for ${e}`);if(Te.length!==2||typeof Te[0]!="number"||typeof Te[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return Te}}function optionalString(Oe,e){const Te=Oe[e];if(Te!==void 0){if(typeof Te!="string")throw new Error(`Expected a string for ${e}`);return Te}}function optionalIconOrigin(Oe,e){const Te=Oe[e];if(Te!==void 0){if(Te!=="bottom-left"&&Te!=="bottom-right"&&Te!=="top-left"&&Te!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return Te}}function optionalIconAnchorUnits(Oe,e){const Te=Oe[e];if(Te!==void 0){if(Te!=="pixels"&&Te!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return Te}}function optionalNumberArray(Oe,e){const Te=Oe[e];if(Te!==void 0)return requireNumberArray(Te,e)}function optionalDeclutterMode(Oe,e){const Te=Oe[e];if(Te!==void 0){if(typeof Te!="string")throw new Error(`Expected a string for ${e}`);if(Te!=="declutter"&&Te!=="obstacle"&&Te!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return Te}}function optionalColorLike(Oe,e){const Te=Oe[e];if(Te!==void 0)return requireColorLike(Te,e)}function requireNumberArray(Oe,e){if(!Array.isArray(Oe))throw new Error(`Expected an array for ${e}`);const Te=Oe.length;for(let ke=0;ke<Te;++ke)if(typeof Oe[ke]!="number")throw new Error(`Expected an array of numbers for ${e}`);return Oe}function requireString(Oe,e){if(typeof Oe!="string")throw new Error(`Expected a string for ${e}`);return Oe}function requireNumber(Oe,e){if(typeof Oe!="number")throw new Error(`Expected a number for ${e}`);return Oe}function requireColorLike(Oe,e){if(typeof Oe=="string")return Oe;const Te=requireNumberArray(Oe,e),ke=Te.length;if(ke<3||ke>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return Te}function requireSize(Oe,e){const Te=requireNumberArray(Oe,e);if(Te.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return Te}function requireSizeLike(Oe,e){return typeof Oe=="number"?Oe:requireSize(Oe,e)}const ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function createExtent(Oe,e,Te){return function(ke,Be,Ue,He,We){if(!ke)return;if(!Be&&!e)return ke;const Cn=e?0:Ue[0]*Be,En=e?0:Ue[1]*Be,An=We?We[0]:0,Sn=We?We[1]:0;let Tn=Oe[0]+Cn/2+An,Ln=Oe[2]-Cn/2+An,Bn=Oe[1]+En/2+Sn,ei=Oe[3]-En/2+Sn;Tn>Ln&&(Tn=(Ln+Tn)/2,Ln=Tn),Bn>ei&&(Bn=(ei+Bn)/2,ei=Bn);let ti=clamp$1(ke[0],Tn,Ln),ni=clamp$1(ke[1],Bn,ei);if(He&&Te&&Be){const ri=30*Be;ti+=-ri*Math.log(1+Math.max(0,Tn-ke[0])/ri)+ri*Math.log(1+Math.max(0,ke[0]-Ln)/ri),ni+=-ri*Math.log(1+Math.max(0,Bn-ke[1])/ri)+ri*Math.log(1+Math.max(0,ke[1]-ei)/ri)}return[ti,ni]}}function none(Oe){return Oe}function getViewportClampedResolution(Oe,e,Te,ke){const Be=getWidth(e)/Te[0],Ue=getHeight(e)/Te[1];return ke?Math.min(Oe,Math.max(Be,Ue)):Math.min(Oe,Math.min(Be,Ue))}function getSmoothClampedResolution(Oe,e,Te){let ke=Math.min(Oe,e);const Be=50;return ke*=Math.log(1+Be*Math.max(0,Oe/e-1))/Be+1,Te&&(ke=Math.max(ke,Te),ke/=Math.log(1+Be*Math.max(0,Te/Oe-1))/Be+1),clamp$1(ke,Te/2,e*2)}function createSnapToResolutions(Oe,e,Te,ke){return e=e!==void 0?e:!0,function(Be,Ue,He,We){if(Be!==void 0){const Cn=Oe[0],En=Oe[Oe.length-1],An=Te?getViewportClampedResolution(Cn,Te,He,ke):Cn;if(We)return e?getSmoothClampedResolution(Be,An,En):clamp$1(Be,En,An);const Sn=Math.min(An,Be),Tn=Math.floor(linearFindNearest(Oe,Sn,Ue));return Oe[Tn]>An&&Tn<Oe.length-1?Oe[Tn+1]:Oe[Tn]}}}function createSnapToPower(Oe,e,Te,ke,Be,Ue){return ke=ke!==void 0?ke:!0,Te=Te!==void 0?Te:0,function(He,We,Cn,En){if(He!==void 0){const An=Be?getViewportClampedResolution(e,Be,Cn,Ue):e;if(En)return ke?getSmoothClampedResolution(He,An,Te):clamp$1(He,Te,An);const Sn=1e-9,Tn=Math.ceil(Math.log(e/An)/Math.log(Oe)-Sn),Ln=-We*(.5-Sn)+.5,Bn=Math.min(An,He),ei=Math.floor(Math.log(e/Bn)/Math.log(Oe)+Ln),ti=Math.max(Tn,ei),ni=e/Math.pow(Oe,ti);return clamp$1(ni,Te,An)}}}function createMinMaxResolution(Oe,e,Te,ke,Be){return Te=Te!==void 0?Te:!0,function(Ue,He,We,Cn){if(Ue!==void 0){const En=ke?getViewportClampedResolution(Oe,ke,We,Be):Oe;return!Te||!Cn?clamp$1(Ue,e,En):getSmoothClampedResolution(Ue,En,e)}}}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const Te=Object.assign({},e);for(const We in ViewProperty)delete Te[We];this.setProperties(Te,!0);const ke=createResolutionConstraint(e);this.maxResolution_=ke.maxResolution,this.minResolution_=ke.minResolution,this.zoomFactor_=ke.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=ke.minZoom;const Be=createCenterConstraint(e),Ue=ke.constraint,He=createRotationConstraint(e);this.constraints_={center:Be,resolution:Ue,rotation:He},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let Te=this.padding_;this.padding_=e;const ke=this.getCenterInternal();if(ke){const Be=e||[0,0,0,0];Te=Te||[0,0,0,0];const Ue=this.getResolution(),He=Ue/2*(Be[3]-Te[3]+Te[1]-Be[1]),We=Ue/2*(Be[0]-Te[0]+Te[2]-Be[2]);this.setCenterInternal([ke[0]+He,ke[1]-We])}}getUpdatedOptions_(e){const Te=this.getProperties();return Te.resolution!==void 0?Te.resolution=this.getResolution():Te.zoom=this.getZoom(),Te.center=this.getCenterInternal(),Te.rotation=this.getRotation(),Object.assign({},Te,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const Te=new Array(arguments.length);for(let ke=0;ke<Te.length;++ke){let Be=arguments[ke];Be.center&&(Be=Object.assign({},Be),Be.center=fromUserCoordinate(Be.center,this.getProjection())),Be.anchor&&(Be=Object.assign({},Be),Be.anchor=fromUserCoordinate(Be.anchor,this.getProjection())),Te[ke]=Be}this.animateInternal.apply(this,Te)}animateInternal(e){let Te=arguments.length,ke;Te>1&&typeof arguments[Te-1]=="function"&&(ke=arguments[Te-1],--Te);let Be=0;for(;Be<Te&&!this.isDef();++Be){const An=arguments[Be];An.center&&this.setCenterInternal(An.center),An.zoom!==void 0?this.setZoom(An.zoom):An.resolution&&this.setResolution(An.resolution),An.rotation!==void 0&&this.setRotation(An.rotation)}if(Be===Te){ke&&animationCallback(ke,!0);return}let Ue=Date.now(),He=this.targetCenter_.slice(),We=this.targetResolution_,Cn=this.targetRotation_;const En=[];for(;Be<Te;++Be){const An=arguments[Be],Sn={start:Ue,complete:!1,anchor:An.anchor,duration:An.duration!==void 0?An.duration:1e3,easing:An.easing||inAndOut,callback:ke};if(An.center&&(Sn.sourceCenter=He,Sn.targetCenter=An.center.slice(),He=Sn.targetCenter),An.zoom!==void 0?(Sn.sourceResolution=We,Sn.targetResolution=this.getResolutionForZoom(An.zoom),We=Sn.targetResolution):An.resolution&&(Sn.sourceResolution=We,Sn.targetResolution=An.resolution,We=Sn.targetResolution),An.rotation!==void 0){Sn.sourceRotation=Cn;const Tn=modulo(An.rotation-Cn+Math.PI,2*Math.PI)-Math.PI;Sn.targetRotation=Cn+Tn,Cn=Sn.targetRotation}isNoopAnimation(Sn)?Sn.complete=!0:Ue+=Sn.duration,En.push(Sn)}this.animations_.push(En),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let Te=0,ke=this.animations_.length;Te<ke;++Te){const Be=this.animations_[Te];if(Be[0].callback&&animationCallback(Be[0].callback,!1),!e)for(let Ue=0,He=Be.length;Ue<He;++Ue){const We=Be[Ue];if(!We.complete){e=We.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let Te=!1;for(let ke=this.animations_.length-1;ke>=0;--ke){const Be=this.animations_[ke];let Ue=!0;for(let He=0,We=Be.length;He<We;++He){const Cn=Be[He];if(Cn.complete)continue;const En=e-Cn.start;let An=Cn.duration>0?En/Cn.duration:1;An>=1?(Cn.complete=!0,An=1):Ue=!1;const Sn=Cn.easing(An);if(Cn.sourceCenter){const Tn=Cn.sourceCenter[0],Ln=Cn.sourceCenter[1],Bn=Cn.targetCenter[0],ei=Cn.targetCenter[1];this.nextCenter_=Cn.targetCenter;const ti=Tn+Sn*(Bn-Tn),ni=Ln+Sn*(ei-Ln);this.targetCenter_=[ti,ni]}if(Cn.sourceResolution&&Cn.targetResolution){const Tn=Sn===1?Cn.targetResolution:Cn.sourceResolution+Sn*(Cn.targetResolution-Cn.sourceResolution);if(Cn.anchor){const Ln=this.getViewportSize_(this.getRotation()),Bn=this.constraints_.resolution(Tn,0,Ln,!0);this.targetCenter_=this.calculateCenterZoom(Bn,Cn.anchor)}this.nextResolution_=Cn.targetResolution,this.targetResolution_=Tn,this.applyTargetState_(!0)}if(Cn.sourceRotation!==void 0&&Cn.targetRotation!==void 0){const Tn=Sn===1?modulo(Cn.targetRotation+Math.PI,2*Math.PI)-Math.PI:Cn.sourceRotation+Sn*(Cn.targetRotation-Cn.sourceRotation);if(Cn.anchor){const Ln=this.constraints_.rotation(Tn,!0);this.targetCenter_=this.calculateCenterRotate(Ln,Cn.anchor)}this.nextRotation_=Cn.targetRotation,this.targetRotation_=Tn}if(this.applyTargetState_(!0),Te=!0,!Cn.complete)break}if(Ue){this.animations_[ke]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const He=Be[0].callback;He&&animationCallback(He,!0)}}this.animations_=this.animations_.filter(Boolean),Te&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,Te){let ke;const Be=this.getCenterInternal();return Be!==void 0&&(ke=[Be[0]-Te[0],Be[1]-Te[1]],rotate$1(ke,e-this.getRotation()),add$3(ke,Te)),ke}calculateCenterZoom(e,Te){let ke;const Be=this.getCenterInternal(),Ue=this.getResolution();if(Be!==void 0&&Ue!==void 0){const He=Te[0]-e*(Te[0]-Be[0])/Ue,We=Te[1]-e*(Te[1]-Be[1])/Ue;ke=[He,We]}return ke}getViewportSize_(e){const Te=this.viewportSize_;if(e){const ke=Te[0],Be=Te[1];return[Math.abs(ke*Math.cos(e))+Math.abs(Be*Math.sin(e)),Math.abs(ke*Math.sin(e))+Math.abs(Be*Math.cos(e))]}return Te}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const Te=this.calculateExtentInternal(e);return toUserExtent(Te,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const Te=this.getCenterInternal();assert(Te,"The view center is not defined");const ke=this.getResolution();assert(ke!==void 0,"The view resolution is not defined");const Be=this.getRotation();return assert(Be!==void 0,"The view rotation is not defined"),getForViewAndSize(Te,ke,Be,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,Te){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),Te)}getResolutionForExtentInternal(e,Te){Te=Te||this.getViewportSizeMinusPadding_();const ke=getWidth(e)/Te[0],Be=getHeight(e)/Te[1];return Math.max(ke,Be)}getResolutionForValueFunction(e){e=e||2;const Te=this.getConstrainedResolution(this.maxResolution_),ke=this.minResolution_,Be=Math.log(Te/ke)/Math.log(e);return function(Ue){return Te/Math.pow(e,Ue*Be)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const Te=Math.log(e||2),ke=this.getConstrainedResolution(this.maxResolution_),Be=this.minResolution_,Ue=Math.log(ke/Be)/Te;return function(He){return Math.log(ke/He)/Te/Ue}}getViewportSizeMinusPadding_(e){let Te=this.getViewportSize_(e);const ke=this.padding_;return ke&&(Te=[Te[0]-ke[1]-ke[3],Te[1]-ke[0]-ke[2]]),Te}getState(){const e=this.getProjection(),Te=this.getResolution(),ke=this.getRotation();let Be=this.getCenterInternal();const Ue=this.padding_;if(Ue){const He=this.getViewportSizeMinusPadding_();Be=calculateCenterOn(Be,this.getViewportSize_(),[He[0]/2+Ue[3],He[1]/2+Ue[0]],Te,ke)}return{center:Be.slice(0),projection:e!==void 0?e:null,resolution:Te,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:ke,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const Te=this.getResolution();return Te!==void 0&&(e=this.getZoomForResolution(Te)),e}getZoomForResolution(e){let Te=this.minZoom_||0,ke,Be;if(this.resolutions_){const Ue=linearFindNearest(this.resolutions_,e,1);Te=Ue,ke=this.resolutions_[Ue],Ue==this.resolutions_.length-1?Be=2:Be=ke/this.resolutions_[Ue+1]}else ke=this.maxResolution_,Be=this.zoomFactor_;return Te+Math.log(ke/e)/Math.log(Be)}getResolutionForZoom(e){var Te;if((Te=this.resolutions_)!=null&&Te.length){if(this.resolutions_.length===1)return this.resolutions_[0];const ke=clamp$1(Math.floor(e),0,this.resolutions_.length-2),Be=this.resolutions_[ke]/this.resolutions_[ke+1];return this.resolutions_[ke]/Math.pow(Be,clamp$1(e-ke,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,Te){let ke;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const Be=fromUserExtent(e,this.getProjection());ke=fromExtent(Be)}else if(e.getType()==="Circle"){const Be=fromUserExtent(e.getExtent(),this.getProjection());ke=fromExtent(Be),ke.rotate(this.getRotation(),getCenter(Be))}else ke=e;this.fitInternal(ke,Te)}rotatedExtentForGeometry(e){const Te=this.getRotation(),ke=Math.cos(Te),Be=Math.sin(-Te),Ue=e.getFlatCoordinates(),He=e.getStride();let We=1/0,Cn=1/0,En=-1/0,An=-1/0;for(let Sn=0,Tn=Ue.length;Sn<Tn;Sn+=He){const Ln=Ue[Sn]*ke-Ue[Sn+1]*Be,Bn=Ue[Sn]*Be+Ue[Sn+1]*ke;We=Math.min(We,Ln),Cn=Math.min(Cn,Bn),En=Math.max(En,Ln),An=Math.max(An,Bn)}return[We,Cn,En,An]}fitInternal(e,Te){Te=Te||{};let ke=Te.size;ke||(ke=this.getViewportSizeMinusPadding_());const Be=Te.padding!==void 0?Te.padding:[0,0,0,0],Ue=Te.nearest!==void 0?Te.nearest:!1;let He;Te.minResolution!==void 0?He=Te.minResolution:Te.maxZoom!==void 0?He=this.getResolutionForZoom(Te.maxZoom):He=0;const We=this.rotatedExtentForGeometry(e);let Cn=this.getResolutionForExtentInternal(We,[ke[0]-Be[1]-Be[3],ke[1]-Be[0]-Be[2]]);Cn=isNaN(Cn)?He:Math.max(Cn,He),Cn=this.getConstrainedResolution(Cn,Ue?0:1);const En=this.getRotation(),An=Math.sin(En),Sn=Math.cos(En),Tn=getCenter(We);Tn[0]+=(Be[1]-Be[3])/2*Cn,Tn[1]+=(Be[0]-Be[2])/2*Cn;const Ln=Tn[0]*Sn-Tn[1]*An,Bn=Tn[1]*Sn+Tn[0]*An,ei=this.getConstrainedCenter([Ln,Bn],Cn),ti=Te.callback?Te.callback:VOID;Te.duration!==void 0?this.animateInternal({resolution:Cn,center:ei,duration:Te.duration,easing:Te.easing},ti):(this.targetResolution_=Cn,this.targetCenter_=ei,this.applyTargetState_(!1,!0),animationCallback(ti,!0))}centerOn(e,Te,ke){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),Te,ke)}centerOnInternal(e,Te,ke){this.setCenterInternal(calculateCenterOn(e,Te,ke,this.getResolution(),this.getRotation()))}calculateCenterShift(e,Te,ke,Be){let Ue;const He=this.padding_;if(He&&e){const We=this.getViewportSizeMinusPadding_(-ke),Cn=calculateCenterOn(e,Be,[We[0]/2+He[3],We[1]/2+He[0]],Te,ke);Ue=[e[0]-Cn[0],e[1]-Cn[1]]}return Ue}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const Te=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([Te[0]+e[0],Te[1]+e[1]])}adjustCenterInternal(e){const Te=this.targetCenter_;this.setCenterInternal([Te[0]+e[0],Te[1]+e[1]])}adjustResolution(e,Te){Te=Te&&fromUserCoordinate(Te,this.getProjection()),this.adjustResolutionInternal(e,Te)}adjustResolutionInternal(e,Te){const ke=this.getAnimating()||this.getInteracting(),Be=this.getViewportSize_(this.getRotation()),Ue=this.constraints_.resolution(this.targetResolution_*e,0,Be,ke);Te&&(this.targetCenter_=this.calculateCenterZoom(Ue,Te)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,Te){this.adjustResolution(Math.pow(this.zoomFactor_,-e),Te)}adjustRotation(e,Te){Te&&(Te=fromUserCoordinate(Te,this.getProjection())),this.adjustRotationInternal(e,Te)}adjustRotationInternal(e,Te){const ke=this.getAnimating()||this.getInteracting(),Be=this.constraints_.rotation(this.targetRotation_+e,ke);Te&&(this.targetCenter_=this.calculateCenterRotate(Be,Te)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,Te){return this.hints_[e]+=Te,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,Te){const ke=this.getAnimating()||this.getInteracting()||Te,Be=this.constraints_.rotation(this.targetRotation_,ke),Ue=this.getViewportSize_(Be),He=this.constraints_.resolution(this.targetResolution_,0,Ue,ke),We=this.constraints_.center(this.targetCenter_,He,Ue,ke,this.calculateCenterShift(this.targetCenter_,He,Be,Ue));this.get(ViewProperty.ROTATION)!==Be&&this.set(ViewProperty.ROTATION,Be),this.get(ViewProperty.RESOLUTION)!==He&&(this.set(ViewProperty.RESOLUTION,He),this.set("zoom",this.getZoom(),!0)),(!We||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),We))&&this.set(ViewProperty.CENTER,We),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,Te,ke){e=e!==void 0?e:200;const Be=Te||0,Ue=this.constraints_.rotation(this.targetRotation_),He=this.getViewportSize_(Ue),We=this.constraints_.resolution(this.targetResolution_,Be,He),Cn=this.constraints_.center(this.targetCenter_,We,He,!1,this.calculateCenterShift(this.targetCenter_,We,Ue,He));if(e===0&&!this.cancelAnchor_){this.targetResolution_=We,this.targetRotation_=Ue,this.targetCenter_=Cn,this.applyTargetState_();return}ke=ke||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==We||this.getRotation()!==Ue||!this.getCenterInternal()||!equals(this.getCenterInternal(),Cn))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:Ue,center:Cn,resolution:We,duration:e,easing:easeOut,anchor:ke}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,Te,ke){ke=ke&&fromUserCoordinate(ke,this.getProjection()),this.endInteractionInternal(e,Te,ke)}endInteractionInternal(e,Te,ke){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,Te,ke))}getConstrainedCenter(e,Te){const ke=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,Te||this.getResolution(),ke)}getConstrainedZoom(e,Te){const ke=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(ke,Te))}getConstrainedResolution(e,Te){Te=Te||0;const ke=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,Te,ke)}}function animationCallback(Oe,e){setTimeout(function(){Oe(e)},0)}function createCenterConstraint(Oe){if(Oe.extent!==void 0){const Te=Oe.smoothExtentConstraint!==void 0?Oe.smoothExtentConstraint:!0;return createExtent(Oe.extent,Oe.constrainOnlyCenter,Te)}const e=createProjection(Oe.projection,"EPSG:3857");if(Oe.multiWorld!==!0&&e.isGlobal()){const Te=e.getExtent().slice();return Te[0]=-1/0,Te[2]=1/0,createExtent(Te,!1,!1)}return none}function createResolutionConstraint(Oe){let e,Te,ke,He=Oe.minZoom!==void 0?Oe.minZoom:DEFAULT_MIN_ZOOM,We=Oe.maxZoom!==void 0?Oe.maxZoom:28;const Cn=Oe.zoomFactor!==void 0?Oe.zoomFactor:2,En=Oe.multiWorld!==void 0?Oe.multiWorld:!1,An=Oe.smoothResolutionConstraint!==void 0?Oe.smoothResolutionConstraint:!0,Sn=Oe.showFullExtent!==void 0?Oe.showFullExtent:!1,Tn=createProjection(Oe.projection,"EPSG:3857"),Ln=Tn.getExtent();let Bn=Oe.constrainOnlyCenter,ei=Oe.extent;if(!En&&!ei&&Tn.isGlobal()&&(Bn=!1,ei=Ln),Oe.resolutions!==void 0){const ti=Oe.resolutions;Te=ti[He],ke=ti[We]!==void 0?ti[We]:ti[ti.length-1],Oe.constrainResolution?e=createSnapToResolutions(ti,An,!Bn&&ei,Sn):e=createMinMaxResolution(Te,ke,An,!Bn&&ei,Sn)}else{const ni=(Ln?Math.max(getWidth(Ln),getHeight(Ln)):360*METERS_PER_UNIT$1.degrees/Tn.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),ri=ni/Math.pow(2,28-DEFAULT_MIN_ZOOM);Te=Oe.maxResolution,Te!==void 0?He=0:Te=ni/Math.pow(Cn,He),ke=Oe.minResolution,ke===void 0&&(Oe.maxZoom!==void 0?Oe.maxResolution!==void 0?ke=Te/Math.pow(Cn,We):ke=ni/Math.pow(Cn,We):ke=ri),We=He+Math.floor(Math.log(Te/ke)/Math.log(Cn)),ke=Te/Math.pow(Cn,We-He),Oe.constrainResolution?e=createSnapToPower(Cn,Te,ke,An,!Bn&&ei,Sn):e=createMinMaxResolution(Te,ke,An,!Bn&&ei,Sn)}return{constraint:e,maxResolution:Te,minResolution:ke,minZoom:He,zoomFactor:Cn}}function createRotationConstraint(Oe){if(Oe.enableRotation!==void 0?Oe.enableRotation:!0){const Te=Oe.constrainRotation;return Te===void 0||Te===!0?createSnapToZero():Te===!1?none$1:typeof Te=="number"?createSnapToN(Te):none$1}return disable}function isNoopAnimation(Oe){return!(Oe.sourceCenter&&Oe.targetCenter&&!equals(Oe.sourceCenter,Oe.targetCenter)||Oe.sourceResolution!==Oe.targetResolution||Oe.sourceRotation!==Oe.targetRotation)}function calculateCenterOn(Oe,e,Te,ke,Be){const Ue=Math.cos(-Be);let He=Math.sin(-Be),We=Oe[0]*Ue-Oe[1]*He,Cn=Oe[1]*Ue+Oe[0]*He;We+=(e[0]/2-Te[0])*ke,Cn+=(Te[1]-e[1]/2)*ke,He=-He;const En=We*Ue-Cn*He,An=Cn*Ue+We*He;return[En,An]}const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const Te=Object.assign({},e);typeof e.properties=="object"&&(delete Te.properties,Object.assign(Te,e.properties)),Te[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof Te[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),Te[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,Te[LayerProperty.Z_INDEX]=e.zIndex,Te[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,Te[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,Te[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,Te[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=Te.className!==void 0?Te.className:"ol-layer",delete Te.className,this.setProperties(Te),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const Te=this.state_||{layer:this,managed:e===void 0?!0:e},ke=this.getZIndex();return Te.opacity=clamp$1(Math.round(this.getOpacity()*100)/100,0,1),Te.visible=this.getVisible(),Te.extent=this.getExtent(),Te.zIndex=ke===void 0&&!Te.managed?1/0:ke,Te.maxResolution=this.getMaxResolution(),Te.minResolution=Math.max(this.getMinResolution(),0),Te.minZoom=this.getMinZoom(),Te.maxZoom=this.getMaxZoom(),this.state_=Te,Te}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}let Layer$1=class extends BaseLayer{constructor(e){const Te=Object.assign({},e);delete Te.source,super(Te),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const ke=e.source?e.source:null;this.setSource(ke)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let Te;const ke=this.getMapInternal();!e&&ke&&(e=ke.getView()),e instanceof View?Te={viewState:e.getState(),extent:e.calculateExtent()}:Te=e,!Te.layerStatesArray&&ke&&(Te.layerStatesArray=ke.getLayerGroup().getLayerStatesArray());let Be;if(Te.layerStatesArray){if(Be=Te.layerStatesArray.find(He=>He.layer===this),!Be)return!1}else Be=this.getLayerState();const Ue=this.getExtent();return inView(Be,Te.viewState)&&(!Ue||intersects$1(Ue,Te.extent))}getAttributions(e){var Ue;if(!this.isVisible(e))return[];const Te=(Ue=this.getSource())==null?void 0:Ue.getAttributions();if(!Te)return[];const ke=e instanceof View?e.getViewStateAndExtent():e;let Be=Te(ke);return Array.isArray(Be)||(Be=[Be]),Be}render(e,Te){const ke=this.getRenderer();return ke.prepareFrame(e)?(this.rendered=!0,ke.renderFrame(e,Te)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,Te){}renderDeferred(e){const Te=this.getRenderer();Te&&Te.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const Te=e.frameState.layerStatesArray,ke=this.getLayerState(!1);assert(!Te.some(Be=>Be.layer===ke.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),Te.push(ke)}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function inView(Oe,e){if(!Oe.visible)return!1;const Te=e.resolution;if(Te<Oe.minResolution||Te>=Oe.maxResolution)return!1;const ke=e.zoom;return ke>Oe.minZoom&&ke<=Oe.maxZoom}const Property$1={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer$1{constructor(e){e=e||{};const Te=Object.assign({},e);delete Te.style,delete Te.renderBuffer,delete Te.updateWhileAnimating,delete Te.updateWhileInteracting,super(Te),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$1.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,Te){const ke=this.getDeclutter();ke in e.declutter||(e.declutter[ke]=new RBush$1(9)),this.getRenderer().renderDeclutter(e,Te)}setRenderOrder(e){this.set(Property$1.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?createDefaultStyle:e;const Te=toStyleLike(e);this.styleFunction_=e===null?void 0:toFunction(Te),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function toStyleLike(Oe){if(Oe===void 0)return createDefaultStyle;if(!Oe)return null;if(typeof Oe=="function"||Oe instanceof Style$1)return Oe;if(!Array.isArray(Oe))return flatStylesToStyleFunction([Oe]);if(Oe.length===0)return[];const e=Oe.length,Te=Oe[0];if(Te instanceof Style$1){const Be=new Array(e);for(let Ue=0;Ue<e;++Ue){const He=Oe[Ue];if(!(He instanceof Style$1))throw new Error("Expected a list of style instances");Be[Ue]=He}return Be}if("style"in Te){const Be=new Array(e);for(let Ue=0;Ue<e;++Ue){const He=Oe[Ue];if(!("style"in He))throw new Error("Expected a list of rules with a style property");Be[Ue]=He}return rulesToStyleFunction(Be)}return flatStylesToStyleFunction(Oe)}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,Te){super(e),this.feature=Te}}function getTraceTargets(Oe,e){const Te=[];for(let ke=0;ke<e.length;++ke){const Ue=e[ke].getGeometry();appendGeometryTraceTargets(Oe,Ue,Te)}return Te}function getSquaredDistance(Oe,e){return squaredDistance$1(Oe[0],Oe[1],e[0],e[1])}function getCoordinate(Oe,e){const Te=Oe.length;return e<0?Oe[e+Te]:e>=Te?Oe[e-Te]:Oe[e]}function getCumulativeSquaredDistance(Oe,e,Te){let ke,Be;e<Te?(ke=e,Be=Te):(ke=Te,Be=e);const Ue=Math.ceil(ke),He=Math.floor(Be);if(Ue>He){const Cn=interpolateCoordinate(Oe,ke),En=interpolateCoordinate(Oe,Be);return getSquaredDistance(Cn,En)}let We=0;if(ke<Ue){const Cn=interpolateCoordinate(Oe,ke),En=getCoordinate(Oe,Ue);We+=getSquaredDistance(Cn,En)}if(He<Be){const Cn=getCoordinate(Oe,He),En=interpolateCoordinate(Oe,Be);We+=getSquaredDistance(Cn,En)}for(let Cn=Ue;Cn<He-1;++Cn){const En=getCoordinate(Oe,Cn),An=getCoordinate(Oe,Cn+1);We+=getSquaredDistance(En,An)}return We}function appendGeometryTraceTargets(Oe,e,Te){if(e instanceof LineString){appendTraceTarget(Oe,e.getCoordinates(),!1,Te);return}if(e instanceof MultiLineString){const ke=e.getCoordinates();for(let Be=0,Ue=ke.length;Be<Ue;++Be)appendTraceTarget(Oe,ke[Be],!1,Te);return}if(e instanceof Polygon){const ke=e.getCoordinates();for(let Be=0,Ue=ke.length;Be<Ue;++Be)appendTraceTarget(Oe,ke[Be],!0,Te);return}if(e instanceof MultiPolygon){const ke=e.getCoordinates();for(let Be=0,Ue=ke.length;Be<Ue;++Be){const He=ke[Be];for(let We=0,Cn=He.length;We<Cn;++We)appendTraceTarget(Oe,He[We],!0,Te)}return}if(e instanceof GeometryCollection){const ke=e.getGeometries();for(let Be=0;Be<ke.length;++Be)appendGeometryTraceTargets(Oe,ke[Be],Te);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(Oe,e,Te,ke){const Be=Oe[0],Ue=Oe[1];let He=1/0,We=-1,Cn=NaN;for(let Sn=0;Sn<e.targets.length;++Sn){const Tn=e.targets[Sn],Ln=Tn.coordinates;let Bn=1/0,ei;for(let ti=0;ti<Ln.length-1;++ti){const ni=Ln[ti],ri=Ln[ti+1],si=getPointSegmentRelationship(Be,Ue,ni,ri);si.squaredDistance<Bn&&(Bn=si.squaredDistance,ei=ti+si.along)}Bn<He&&(He=Bn,Tn.ring&&e.targetIndex===Sn&&(Tn.endIndex>Tn.startIndex?ei<Tn.startIndex&&(ei+=Ln.length):Tn.endIndex<Tn.startIndex&&ei>Tn.startIndex&&(ei-=Ln.length)),Cn=ei,We=Sn)}const En=e.targets[We];let An=En.ring;if(e.targetIndex===We&&An){const Sn=interpolateCoordinate(En.coordinates,Cn),Tn=Te.getPixelFromCoordinate(Sn);distance(Tn,e.startPx)>ke&&(An=!1)}if(An){const Sn=En.coordinates,Tn=Sn.length,Ln=En.startIndex,Bn=Cn;if(Ln<Bn){const ei=getCumulativeSquaredDistance(Sn,Ln,Bn);getCumulativeSquaredDistance(Sn,Ln,Bn-Tn)<ei&&(Cn-=Tn)}else{const ei=getCumulativeSquaredDistance(Sn,Ln,Bn);getCumulativeSquaredDistance(Sn,Ln,Bn+Tn)<ei&&(Cn+=Tn)}}return sharedUpdateInfo.index=We,sharedUpdateInfo.endIndex=Cn,sharedUpdateInfo}function appendTraceTarget(Oe,e,Te,ke){const Be=Oe[0],Ue=Oe[1];for(let He=0,We=e.length-1;He<We;++He){const Cn=e[He],En=e[He+1],An=getPointSegmentRelationship(Be,Ue,Cn,En);if(An.squaredDistance===0){const Sn=He+An.along;ke.push({coordinates:e,ring:Te,startIndex:Sn,endIndex:Sn});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(Oe,e,Te,ke){const Be=Te[0],Ue=Te[1],He=ke[0],We=ke[1],Cn=He-Be,En=We-Ue;let An=0,Sn=Be,Tn=Ue;return(Cn!==0||En!==0)&&(An=clamp$1(((Oe-Be)*Cn+(e-Ue)*En)/(Cn*Cn+En*En),0,1),Sn+=Cn*An,Tn+=En*An),sharedRel.along=An,sharedRel.squaredDistance=toFixed(squaredDistance$1(Oe,e,Sn,Tn),10),sharedRel}function interpolateCoordinate(Oe,e){const Te=Oe.length;let ke=Math.floor(e);const Be=e-ke;ke>=Te?ke-=Te:ke<0&&(ke+=Te);let Ue=ke+1;Ue>=Te&&(Ue-=Te);const He=Oe[ke],We=He[0],Cn=He[1],En=Oe[Ue],An=En[0]-We,Sn=En[1]-Cn;return[We+An*Be,Cn+Sn*Be]}class Draw extends PointerInteraction{constructor(e){const Te=e;Te.stopDown||(Te.stopDown=FALSE),super(Te),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let ke=e.geometryFunction;if(!ke){const Be=this.mode_;if(Be==="Circle")ke=(Ue,He,We)=>{const Cn=He||new Circle([NaN,NaN]),En=fromUserCoordinate(Ue[0]),An=squaredDistance(En,fromUserCoordinate(Ue[Ue.length-1]));return Cn.setCenterAndRadius(En,Math.sqrt(An),this.geometryLayout_),Cn};else{let Ue;Be==="Point"?Ue=Point$1:Be==="LineString"?Ue=LineString:Be==="Polygon"&&(Ue=Polygon),ke=(He,We,Cn)=>(We?Be==="Polygon"?He[0].length?We.setCoordinates([He[0].concat([He[0][0]])],this.geometryLayout_):We.setCoordinates([],this.geometryLayout_):We.setCoordinates(He,this.geometryLayout_):We=new Ue(He,this.geometryLayout_),We)}}this.geometryFunction_=ke,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always$1:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let Te;e?e===!0?Te=always$1:Te=e:Te=never,this.traceCondition_=Te}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let Te=e.type===MapBrowserEventType.POINTERMOVE,ke=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,Te=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),ke=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?ke=!1:Te&&this.getPointerCount()<2?(ke=e.type===MapBrowserEventType.POINTERMOVE,ke&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(ke=!1),super.handleEvent(e)&&ke}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const Te=this.getMap(),ke=Te.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),Be=Te.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),Ue=boundingExtent([ke,Be]),He=this.traceSource_.getFeaturesInExtent(Ue);if(He.length===0)return;const We=getTraceTargets(e.coordinate,He);We.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:We,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,Te){const ke=e.startIndex<=e.endIndex,Be=e.startIndex<=Te;ke===Be?ke&&Te>e.endIndex||!ke&&Te<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,Te):(ke&&Te<e.endIndex||!ke&&Te>e.endIndex)&&this.removeTracedCoordinates_(Te,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,Te))}removeTracedCoordinates_(e,Te){if(e===Te)return;let ke=0;if(e<Te){const Be=Math.ceil(e);let Ue=Math.floor(Te);Ue===Te&&(Ue-=1),ke=Ue-Be+1}else{const Be=Math.floor(e);let Ue=Math.ceil(Te);Ue===Te&&(Ue+=1),ke=Be-Ue+1}ke>0&&this.removeLastPoints_(ke)}addTracedCoordinates_(e,Te,ke){if(Te===ke)return;const Be=[];if(Te<ke){const Ue=Math.ceil(Te);let He=Math.floor(ke);He===ke&&(He-=1);for(let We=Ue;We<=He;++We)Be.push(getCoordinate(e.coordinates,We))}else{const Ue=Math.floor(Te);let He=Math.ceil(ke);He===ke&&(He+=1);for(let We=Ue;We>=He;--We)Be.push(getCoordinate(e.coordinates,We))}Be.length&&this.appendCoordinates(Be)}updateTrace_(e){const Te=this.traceState_;if(!Te.active||Te.targetIndex===-1&&distance(Te.startPx,e.pixel)<this.snapTolerance_)return;const ke=getTraceTargetUpdate(e.coordinate,Te,this.getMap(),this.snapTolerance_);if(Te.targetIndex!==ke.index){if(Te.targetIndex!==-1){const Cn=Te.targets[Te.targetIndex];this.removeTracedCoordinates_(Cn.startIndex,Cn.endIndex)}const We=Te.targets[ke.index];this.addTracedCoordinates_(We,We.startIndex,ke.endIndex)}else{const We=Te.targets[Te.targetIndex];this.addOrRemoveTracedCoordinates_(We,ke.endIndex)}Te.targetIndex=ke.index;const Be=Te.targets[Te.targetIndex];Be.endIndex=ke.endIndex;const Ue=interpolateCoordinate(Be.coordinates,Be.endIndex),He=this.getMap().getPixelFromCoordinate(Ue);e.coordinate=Ue,e.pixel=[Math.round(He[0]),Math.round(He[1])]}handleUpEvent(e){let Te=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const ke=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const Be=!this.finishCoordinate_;Be&&this.startDrawing_(e.coordinate),!Be&&this.freehand_?this.finishDrawing():!this.freehand_&&(!Be||this.mode_==="Point")&&(this.atFinish_(e.pixel,ke)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),Te=!1}else this.freehand_&&this.abortDrawing()}return!Te&&this.stopClick_&&e.preventDefault(),Te}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const Te=this.downPx_,ke=e.pixel,Be=Te[0]-ke[0],Ue=Te[1]-ke[1],He=Be*Be+Ue*Ue;if(this.shouldHandle_=this.freehand_?He>this.squaredClickTolerance_:He<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,Te){let ke=!1;if(this.sketchFeature_){let Be=!1,Ue=[this.finishCoordinate_];const He=this.mode_;if(He==="Point")ke=!0;else if(He==="Circle")ke=this.sketchCoords_.length===2;else if(He==="LineString")Be=!Te&&this.sketchCoords_.length>this.minPoints_;else if(He==="Polygon"){const We=this.sketchCoords_;Be=We[0].length>this.minPoints_,Ue=[We[0][0],We[0][We[0].length-2]],Te?Ue=[We[0][0]]:Ue=[We[0][0],We[0][We[0].length-2]]}if(Be){const We=this.getMap();for(let Cn=0,En=Ue.length;Cn<En;Cn++){const An=Ue[Cn],Sn=We.getPixelFromCoordinate(An),Tn=e[0]-Sn[0],Ln=e[1]-Sn[1],Bn=this.freehand_?1:this.snapTolerance_;if(ke=Math.sqrt(Tn*Tn+Ln*Ln)<=Bn,ke){this.finishCoordinate_=An;break}}}}return ke}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const Te=e.getLinearRing(0);let ke=this.sketchLine_.getGeometry();ke?(ke.setFlatCoordinates(Te.getLayout(),Te.getFlatCoordinates()),ke.changed()):(ke=new LineString(Te.getFlatCoordinates(),Te.getLayout()),this.sketchLine_.setGeometry(ke))}startDrawing_(e){const Te=this.getMap().getView().getProjection(),ke=getStrideForLayout(this.geometryLayout_);for(;e.length<ke;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const Be=this.geometryFunction_(this.sketchCoords_,void 0,Te);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(Be),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const Te=this.getMap(),ke=this.sketchFeature_.getGeometry(),Be=Te.getView().getProjection(),Ue=getStrideForLayout(this.geometryLayout_);let He,We;for(;e.length<Ue;)e.push(0);this.mode_==="Point"?We=this.sketchCoords_:this.mode_==="Polygon"?(He=this.sketchCoords_[0],We=He[He.length-1],this.atFinish_(Te.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(He=this.sketchCoords_,We=He[He.length-1]),We[0]=e[0],We[1]=e[1],this.geometryFunction_(this.sketchCoords_,ke,Be),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),ke.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(ke):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const Te=this.sketchFeature_.getGeometry(),ke=this.getMap().getView().getProjection();let Be,Ue;const He=this.mode_;return He==="LineString"||He==="Circle"?(this.finishCoordinate_=e.slice(),Ue=this.sketchCoords_,Ue.length>=this.maxPoints_&&(this.freehand_?Ue.pop():Be=!0),Ue.push(e.slice()),this.geometryFunction_(Ue,Te,ke)):He==="Polygon"&&(Ue=this.sketchCoords_[0],Ue.length>=this.maxPoints_&&(this.freehand_?Ue.pop():Be=!0),Ue.push(e.slice()),Be&&(this.finishCoordinate_=Ue[0]),this.geometryFunction_(this.sketchCoords_,Te,ke)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),Be?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const Te=this.sketchFeature_.getGeometry(),ke=this.getMap().getView().getProjection(),Be=this.mode_;for(let Ue=0;Ue<e;++Ue){let He;if(Be==="LineString"||Be==="Circle"){if(He=this.sketchCoords_,He.splice(-2,1),He.length>=2){this.finishCoordinate_=He[He.length-2].slice();const We=this.finishCoordinate_.slice();He[He.length-1]=We,this.createOrUpdateSketchPoint_(We)}this.geometryFunction_(He,Te,ke),Te.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(Te)}else if(Be==="Polygon"){He=this.sketchCoords_[0],He.splice(-2,1);const We=this.sketchLine_.getGeometry();if(He.length>=2){const Cn=He[He.length-2].slice();He[He.length-1]=Cn,this.createOrUpdateSketchPoint_(Cn)}We.setCoordinates(He),this.geometryFunction_(this.sketchCoords_,Te,ke)}if(He.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let Te=this.sketchCoords_;const ke=e.getGeometry(),Be=this.getMap().getView().getProjection();return this.mode_==="LineString"?(Te.pop(),this.geometryFunction_(Te,ke,Be)):this.mode_==="Polygon"&&(Te[0].pop(),this.geometryFunction_(Te,ke,Be),Te=ke.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([Te])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([Te])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([Te])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const Te=this.mode_,ke=!this.sketchFeature_;ke&&this.startDrawing_(e[0]);let Be;if(Te==="LineString"||Te==="Circle")Be=this.sketchCoords_;else if(Te==="Polygon")Be=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;ke&&Be.shift(),Be.pop();for(let He=0;He<e.length;He++)this.addToDrawing_(e[He]);const Ue=e[e.length-1];this.sketchFeature_=this.addToDrawing_(Ue),this.modifyDrawing_(Ue)}extend(e){const ke=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=ke.getCoordinates();const Be=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=Be.slice(),this.sketchCoords_.push(Be.slice()),this.sketchPoint_=new Feature(new Point$1(Be)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const Te=this.overlay_.getSource();Te.clear(!0),Te.addFeatures(e)}updateState_(){const e=this.getMap(),Te=this.getActive();(!e||!Te)&&this.abortDrawing(),this.overlay_.setMap(Te?e:null)}}function getDefaultStyleFunction$2(){const Oe=createEditingStyle();return function(e,Te){return Oe[e.getGeometry().getType()]}}function getMode(Oe){switch(Oe){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+Oe)}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(Te){return noModifierKeys(Te)&&targetNotEditable(Te)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let Te=!1;if(e.type==EventType.KEYDOWN){const ke=e.originalEvent,Be=ke.key;if(this.condition_(e)&&(Be==Key.DOWN||Be==Key.LEFT||Be==Key.RIGHT||Be==Key.UP)){const He=e.map.getView(),We=He.getResolution()*this.pixelDelta_;let Cn=0,En=0;Be==Key.DOWN?En=-We:Be==Key.LEFT?Cn=-We:Be==Key.RIGHT?Cn=We:En=We;const An=[Cn,En];rotate$1(An,He.getRotation()),pan(He,An,this.duration_),ke.preventDefault(),Te=!0}}return!Te}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(Te){return!platformModifierKey(Te)&&targetNotEditable(Te)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let Te=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const ke=e.originalEvent,Be=ke.key;if(this.condition_(e)&&(Be==="+"||Be==="-")){const Ue=e.map,He=Be==="+"?this.delta_:-this.delta_,We=Ue.getView();zoomByDelta(We,He,void 0,this.duration_),ke.preventDefault(),Te=!0}}return!Te}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,Te,ke){super(e),this.features=Te,this.mapBrowserEvent=ke}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(ke){return altKeyOnly(ke)&&singleClick(ke)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always$1,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let Te;if(e.features?Te=e.features:e.source&&(this.source_=e.source,Te=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!Te)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=Te,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const Te=e.getGeometry();if(Te){const Be=this.SEGMENT_WRITERS_[Te.getType()];Be&&Be(e,Te)}const ke=this.getMap();ke&&ke.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(ke.getCoordinateFromPixel(this.lastPixel_)),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,Te){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const ke=this.featuresBeingModified_.getArray();for(let Be=0,Ue=Te.length;Be<Ue;++Be){const He=Te[Be].feature;He&&!ke.includes(He)&&this.featuresBeingModified_.push(He)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const Te=this.rBush_,ke=[];Te.forEach(function(Be){e===Be.feature&&ke.push(Be)});for(let Be=ke.length-1;Be>=0;--Be){const Ue=ke[Be];for(let He=this.dragSegments_.length-1;He>=0;--He)this.dragSegments_[He][0]===Ue&&this.dragSegments_.splice(He,1);Te.remove(Ue)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const Te=e.target;this.removeFeature_(Te),this.addFeature_(Te)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,Te){const ke=Te.getCoordinates(),Be={feature:e,geometry:Te,segment:[ke,ke]};this.rBush_.insert(Te.getExtent(),Be)}writeMultiPointGeometry_(e,Te){const ke=Te.getCoordinates();for(let Be=0,Ue=ke.length;Be<Ue;++Be){const He=ke[Be],We={feature:e,geometry:Te,depth:[Be],index:Be,segment:[He,He]};this.rBush_.insert(Te.getExtent(),We)}}writeLineStringGeometry_(e,Te){const ke=Te.getCoordinates();for(let Be=0,Ue=ke.length-1;Be<Ue;++Be){const He=ke.slice(Be,Be+2),We={feature:e,geometry:Te,index:Be,segment:He};this.rBush_.insert(boundingExtent(He),We)}}writeMultiLineStringGeometry_(e,Te){const ke=Te.getCoordinates();for(let Be=0,Ue=ke.length;Be<Ue;++Be){const He=ke[Be];for(let We=0,Cn=He.length-1;We<Cn;++We){const En=He.slice(We,We+2),An={feature:e,geometry:Te,depth:[Be],index:We,segment:En};this.rBush_.insert(boundingExtent(En),An)}}}writePolygonGeometry_(e,Te){const ke=Te.getCoordinates();for(let Be=0,Ue=ke.length;Be<Ue;++Be){const He=ke[Be];for(let We=0,Cn=He.length-1;We<Cn;++We){const En=He.slice(We,We+2),An={feature:e,geometry:Te,depth:[Be],index:We,segment:En};this.rBush_.insert(boundingExtent(En),An)}}}writeMultiPolygonGeometry_(e,Te){const ke=Te.getCoordinates();for(let Be=0,Ue=ke.length;Be<Ue;++Be){const He=ke[Be];for(let We=0,Cn=He.length;We<Cn;++We){const En=He[We];for(let An=0,Sn=En.length-1;An<Sn;++An){const Tn=En.slice(An,An+2),Ln={feature:e,geometry:Te,depth:[We,Be],index:An,segment:Tn};this.rBush_.insert(boundingExtent(Tn),Ln)}}}}writeCircleGeometry_(e,Te){const ke=Te.getCenter(),Be={feature:e,geometry:Te,index:CIRCLE_CENTER_INDEX,segment:[ke,ke]},Ue={feature:e,geometry:Te,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[ke,ke]},He=[Be,Ue];Be.featureSegments=He,Ue.featureSegments=He,this.rBush_.insert(createOrUpdateFromCoordinate(ke),Be);let We=Te;this.rBush_.insert(We.getExtent(),Ue)}writeGeometryCollectionGeometry_(e,Te){const ke=Te.getGeometriesArray();for(let Be=0;Be<ke.length;++Be){const Ue=ke[Be],He=this.SEGMENT_WRITERS_[Ue.getType()];He(e,Ue)}}createOrUpdateVertexFeature_(e,Te,ke,Be){let Ue=this.vertexFeature_;return Ue?Ue.getGeometry().setCoordinates(e):(Ue=new Feature(new Point$1(e)),this.vertexFeature_=Ue,this.overlay_.getSource().addFeature(Ue)),Ue.set("features",Te),Ue.set("geometries",ke),Ue.set("existing",Be),Ue}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let Te;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?Te=this.removePoint():Te=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!Te}findInsertVerticesAndUpdateDragSegments_(e){this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const Te=this.vertexFeature_;if(!Te)return;this.getMap().getView().getProjection();const ke=[],Be=Te.getGeometry().getCoordinates(),Ue=boundingExtent([Be]),He=this.rBush_.getInExtent(Ue),We={};He.sort(compareIndexes);for(let Cn=0,En=He.length;Cn<En;++Cn){const An=He[Cn],Sn=An.segment;let Tn=getUid(An.geometry);const Ln=An.depth;if(Ln&&(Tn+="-"+Ln.join("-")),We[Tn]||(We[Tn]=new Array(2)),An.geometry.getType()==="Circle"&&An.index===CIRCLE_CIRCUMFERENCE_INDEX){const Bn=closestOnSegmentData(e,An);equals(Bn,Be)&&!We[Tn][0]&&(this.dragSegments_.push([An,0]),We[Tn][0]=An);continue}if(equals(Sn[0],Be)&&!We[Tn][0]){this.dragSegments_.push([An,0]),We[Tn][0]=An;continue}if(equals(Sn[1],Be)&&!We[Tn][1]){if(We[Tn][0]&&We[Tn][0].index===0){let Bn=An.geometry.getCoordinates();switch(An.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":Bn=Bn[Ln[1]];case"Polygon":if(An.index!==Bn[Ln[0]].length-2)continue;break}}this.dragSegments_.push([An,1]),We[Tn][1]=An;continue}getUid(Sn)in this.vertexSegments_&&!We[Tn][0]&&!We[Tn][1]&&ke.push(An)}return ke}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([Ue])=>Ue));const Te=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],ke=[],Be=[];for(let Ue=0,He=this.dragSegments_.length;Ue<He;++Ue){const We=this.dragSegments_[Ue],Cn=We[0],En=Cn.feature;ke.includes(En)||ke.push(En);const An=Cn.geometry;Be.includes(An)||Be.push(An);const Sn=Cn.depth;let Tn;const Ln=Cn.segment,Bn=We[1];for(;Te.length<An.getStride();)Te.push(Ln[Bn][Te.length]);switch(An.getType()){case"Point":Tn=Te,Ln[0]=Te,Ln[1]=Te;break;case"MultiPoint":Tn=An.getCoordinates(),Tn[Cn.index]=Te,Ln[0]=Te,Ln[1]=Te;break;case"LineString":Tn=An.getCoordinates(),Tn[Cn.index+Bn]=Te,Ln[Bn]=Te;break;case"MultiLineString":Tn=An.getCoordinates(),Tn[Sn[0]][Cn.index+Bn]=Te,Ln[Bn]=Te;break;case"Polygon":Tn=An.getCoordinates(),Tn[Sn[0]][Cn.index+Bn]=Te,Ln[Bn]=Te;break;case"MultiPolygon":Tn=An.getCoordinates(),Tn[Sn[1]][Sn[0]][Cn.index+Bn]=Te,Ln[Bn]=Te;break;case"Circle":const ei=An;if(Ln[0]=Te,Ln[1]=Te,Cn.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,ei.setCenter(Te),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let ti=distance(fromUserCoordinate(ei.getCenter()),fromUserCoordinate(Te));ei.setRadius(ti),this.changingFeature_=!1}break}Tn&&this.setGeometryCoordinates_(An,Tn)}this.createOrUpdateVertexFeature_(Te,ke,Be,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const Te=e.coordinate,ke=this.findInsertVerticesAndUpdateDragSegments_(Te);if(ke!=null&&ke.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,ke),this.vertexFeature_)){const Be=this.vertexFeature_.getGeometry().getCoordinates();for(let Ue=ke.length-1;Ue>=0;--Ue)this.insertVertex_(ke[Ue],Be);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let Te=this.dragSegments_.length-1;Te>=0;--Te){const ke=this.dragSegments_[Te][0],Be=ke.geometry;if(Be.getType()==="Circle"){const Ue=Be,He=Ue.getCenter(),We=ke.featureSegments[0],Cn=ke.featureSegments[1];We.segment[0]=He,We.segment[1]=He,Cn.segment[0]=He,Cn.segment[1]=He,this.rBush_.update(createOrUpdateFromCoordinate(He),We);let En=Ue;this.rBush_.update(En.getExtent(),Cn)}else this.rBush_.update(boundingExtent(ke.segment),ke)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.coordinate)}handlePointerAtPixel_(e){const Te=this.getMap(),ke=Te.getPixelFromCoordinate(e);Te.getView().getProjection();const Be=function(We,Cn){return projectedDistanceToSegmentDataSquared(e,We)-projectedDistanceToSegmentDataSquared(e,Cn)};let Ue,He;if(this.hitDetection_){const We=typeof this.hitDetection_=="object"?Cn=>Cn===this.hitDetection_:void 0;Te.forEachFeatureAtPixel(ke,(Cn,En,An)=>{An&&An.getType()==="Point"&&(An=new Point$1(toUserCoordinate(An.getCoordinates())));const Sn=An||Cn.getGeometry();if(Sn&&Sn.getType()==="Point"&&Cn instanceof Feature&&this.features_.getArray().includes(Cn)){He=Sn;const Tn=Cn.getGeometry().getFlatCoordinates().slice(0,2);Ue=[{feature:Cn,geometry:He,segment:[Tn,Tn]}]}return!0},{layerFilter:We})}if(!Ue){const We=fromUserExtent(createOrUpdateFromCoordinate(e,tempExtent)),Cn=Te.getView().getResolution()*this.pixelTolerance_,En=toUserExtent(buffer(We,Cn,tempExtent));Ue=this.rBush_.getInExtent(En)}if(Ue&&Ue.length>0){const We=Ue.sort(Be)[0],Cn=We.segment;let En=closestOnSegmentData(e,We);const An=Te.getPixelFromCoordinate(En);let Sn=distance(ke,An);if(He||Sn<=this.pixelTolerance_){const Tn={};if(Tn[getUid(Cn)]=!0,this.snapToPointer_||(this.delta_[0]=En[0]-e[0],this.delta_[1]=En[1]-e[1]),We.geometry.getType()==="Circle"&&We.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(En,[We.feature],[We.geometry],this.snappedToVertex_);else{const Ln=Te.getPixelFromCoordinate(Cn[0]),Bn=Te.getPixelFromCoordinate(Cn[1]),ei=squaredDistance(An,Ln),ti=squaredDistance(An,Bn);if(Sn=Math.sqrt(Math.min(ei,ti)),this.snappedToVertex_=Sn<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_)){this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null);return}this.snappedToVertex_&&(En=ei>ti?Cn[1]:Cn[0]),this.createOrUpdateVertexFeature_(En,[We.feature],[We.geometry],this.snappedToVertex_);const ni={};ni[getUid(We.geometry)]=!0;for(let ri=1,si=Ue.length;ri<si;++ri){const ai=Ue[ri].segment;if(equals(Cn[0],ai[0])&&equals(Cn[1],ai[1])||equals(Cn[0],ai[1])&&equals(Cn[1],ai[0])){const li=getUid(Ue[ri].geometry);li in ni||(ni[li]=!0,Tn[getUid(ai)]=!0)}else break}}this.vertexSegments_=Tn;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,Te){const ke=e.segment,Be=e.feature,Ue=e.geometry,He=e.depth,We=e.index;let Cn;for(;Te.length<Ue.getStride();)Te.push(0);switch(Ue.getType()){case"MultiLineString":Cn=Ue.getCoordinates(),Cn[He[0]].splice(We+1,0,Te);break;case"Polygon":Cn=Ue.getCoordinates(),Cn[He[0]].splice(We+1,0,Te);break;case"MultiPolygon":Cn=Ue.getCoordinates(),Cn[He[1]][He[0]].splice(We+1,0,Te);break;case"LineString":Cn=Ue.getCoordinates(),Cn.splice(We+1,0,Te);break;default:return!1}this.setGeometryCoordinates_(Ue,Cn);const En=this.rBush_;En.remove(e),this.updateSegmentIndices_(Ue,We,He,1);const An={segment:[ke[0],Te],feature:Be,geometry:Ue,depth:He,index:We};En.insert(boundingExtent(An.segment),An),this.dragSegments_.push([An,1]);const Sn={segment:[Te,ke[1]],feature:Be,geometry:Ue,depth:He,index:We+1};return En.insert(boundingExtent(Sn.segment),Sn),this.dragSegments_.push([Sn,0]),!0}updatePointer_(e){var Te;return e&&this.findInsertVerticesAndUpdateDragSegments_(e),(Te=this.vertexFeature_)==null?void 0:Te.getGeometry().getCoordinates()}getPoint(){var Te;const e=(Te=this.vertexFeature_)==null?void 0:Te.getGeometry().getCoordinates();return e?toUserCoordinate(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(ke=>ke.getType()==="Circle"||ke.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:ke})=>equals(ke[0],e)||equals(ke[1],e))}removePoint(e){if(e&&(e=fromUserCoordinate(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const Te=this.lastPointerEvent_;this.willModifyFeatures_(Te,this.dragSegments_.map(([Be])=>Be));const ke=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,Te)),this.featuresBeingModified_=null,ke}return!1}removeVertex_(){const e=this.dragSegments_,Te={};let ke=!1,Be,Ue,He,We,Cn,En,An,Sn,Tn,Ln,Bn;for(Cn=e.length-1;Cn>=0;--Cn)He=e[Cn],Ln=He[0],Bn=getUid(Ln.feature),Ln.depth&&(Bn+="-"+Ln.depth.join("-")),Bn in Te||(Te[Bn]={}),He[1]===0?(Te[Bn].right=Ln,Te[Bn].index=Ln.index):He[1]==1&&(Te[Bn].left=Ln,Te[Bn].index=Ln.index+1);for(Bn in Te){switch(Tn=Te[Bn].right,An=Te[Bn].left,En=Te[Bn].index,Sn=En-1,An!==void 0?Ln=An:Ln=Tn,Sn<0&&(Sn=0),We=Ln.geometry,Ue=We.getCoordinates(),Be=Ue,ke=!1,We.getType()){case"MultiLineString":Ue[Ln.depth[0]].length>2&&(Ue[Ln.depth[0]].splice(En,1),ke=!0);break;case"LineString":Ue.length>2&&(Ue.splice(En,1),ke=!0);break;case"MultiPolygon":Be=Be[Ln.depth[1]];case"Polygon":Be=Be[Ln.depth[0]],Be.length>4&&(En==Be.length-1&&(En=0),Be.splice(En,1),ke=!0,En===0&&(Be.pop(),Be.push(Be[0]),Sn=Be.length-1));break}if(ke){this.setGeometryCoordinates_(We,Ue);const ei=[];if(An!==void 0&&(this.rBush_.remove(An),ei.push(An.segment[0])),Tn!==void 0&&(this.rBush_.remove(Tn),ei.push(Tn.segment[1])),An!==void 0&&Tn!==void 0){const ti={depth:Ln.depth,feature:Ln.feature,geometry:Ln.geometry,index:Sn,segment:ei};this.rBush_.insert(boundingExtent(ti.segment),ti)}this.updateSegmentIndices_(We,En,Ln.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return ke}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(ke=>ke.getType()==="Circle"||ke.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:ke})=>!(equals(ke[0],e)||equals(ke[1],e)))}insertPoint(e){var Be;const Te=e?fromUserCoordinate(e,this.getMap().getView().getProjection()):(Be=this.vertexFeature_)==null?void 0:Be.getGeometry().getCoordinates();return Te?this.findInsertVerticesAndUpdateDragSegments_(Te).reduce((Ue,He)=>Ue||this.insertVertex_(He,Te),!1):!1}setGeometryCoordinates_(e,Te){this.changingFeature_=!0,e.setCoordinates(Te),this.changingFeature_=!1}updateSegmentIndices_(e,Te,ke,Be){this.rBush_.forEachInExtent(e.getExtent(),function(Ue){Ue.geometry===e&&(ke===void 0||Ue.depth===void 0||equals$2(Ue.depth,ke))&&Ue.index>Te&&(Ue.index+=Be)})}}function compareIndexes(Oe,e){return Oe.index-e.index}function projectedDistanceToSegmentDataSquared(Oe,e,Te){const ke=e.geometry;if(ke.getType()==="Circle"){let Ue=ke;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const He=squaredDistance(Ue.getCenter(),fromUserCoordinate(Oe)),We=Math.sqrt(He)-Ue.getRadius();return We*We}}const Be=fromUserCoordinate(Oe);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(Be,tempSegment)}function closestOnSegmentData(Oe,e,Te){const ke=e.geometry;if(ke.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(ke.getClosestPoint(fromUserCoordinate(Oe)));const Be=fromUserCoordinate(Oe);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(Be,tempSegment))}function getDefaultStyleFunction$1(){const Oe=createEditingStyle();return function(e,Te){return Oe.Point}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const Te=e.condition?e.condition:always$1;this.condition_=e.onFocusOnly?all(focusWithTabindex,Te):Te,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const ke=e.map,Be=e.originalEvent;Be.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let Ue;if(e.type==EventType.WHEEL&&(Ue=Be.deltaY,Be.deltaMode===WheelEvent.DOM_DELTA_LINE&&(Ue*=40)),Ue===0)return!1;this.lastDelta_=Ue;const He=Date.now();this.startTime_===void 0&&(this.startTime_=He),(!this.mode_||He-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(Ue)<4?"trackpad":"wheel");const We=ke.getView();if(this.mode_==="trackpad"&&!(We.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(We.getAnimating()&&We.cancelAnimations(),We.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),We.adjustZoom(-Ue/this.deltaPerZoom_,this.lastAnchor_?ke.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=He,!1;this.totalDelta_+=Ue;const Cn=Math.max(this.timeout_-(He-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,ke),Cn),!1}handleWheelZoom_(e){const Te=e.getView();Te.getAnimating()&&Te.cancelAnimations();let ke=-clamp$1(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(Te.getConstrainResolution()||this.constrainResolution_)&&(ke=ke?ke>0?1:-1:0),zoomByDelta(Te,ke,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const Te=e;Te.stopDown||(Te.stopDown=FALSE),super(Te),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let Te=0;const ke=this.targetPointers[0],Be=this.targetPointers[1],Ue=Math.atan2(Be.clientY-ke.clientY,Be.clientX-ke.clientX);if(this.lastAngle_!==void 0){const Cn=Ue-this.lastAngle_;this.rotationDelta_+=Cn,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),Te=Cn}this.lastAngle_=Ue;const He=e.map,We=He.getView();We.getConstraints().rotation!==disable&&(this.anchor_=He.getCoordinateFromPixelInternal(He.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(He.render(),We.adjustRotationInternal(Te,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const Te=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||Te.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const Te=e;Te.stopDown||(Te.stopDown=FALSE),super(Te),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let Te=1;const ke=this.targetPointers[0],Be=this.targetPointers[1],Ue=ke.clientX-Be.clientX,He=ke.clientY-Be.clientY,We=Math.sqrt(Ue*Ue+He*He);this.lastDistance_!==void 0&&(Te=this.lastDistance_/We),this.lastDistance_=We;const Cn=e.map,En=Cn.getView();Te!=1&&(this.lastScaleDelta_=Te),this.anchor_=Cn.getCoordinateFromPixelInternal(Cn.getEventPixel(centroid(this.targetPointers))),Cn.render(),En.adjustResolutionInternal(Te,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const ke=e.map.getView(),Be=this.lastScaleDelta_>1?1:-1;return ke.endInteraction(this.duration_,Be),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const Te=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||Te.getView().beginInteraction(),!0}return!1}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,Te,ke,Be){super(e),this.selected=Te,this.deselected=ke,this.mapBrowserEvent=Be}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let Te;if(e.layers)if(typeof e.layers=="function")Te=e.layers;else{const ke=e.layers;Te=function(Be){return ke.includes(Be)}}else Te=TRUE;this.layerFilter_=Te,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,Te){this.featureLayerAssociation_[getUid(e)]=Te}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const Te=e.element;if(this.style_&&this.applySelectedStyle_(Te),!this.getLayer(Te)){const ke=this.getMap().getAllLayers().find(function(Be){if(Be instanceof VectorLayer&&Be.getSource()&&Be.getSource().hasFeature(Te))return Be});ke&&this.addFeatureLayerAssociation_(Te,ke)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const Te=getUid(e);Te in originalFeatureStyles||(originalFeatureStyles[Te]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const Te=this.getMap().getInteractions().getArray();for(let Be=Te.length-1;Be>=0;--Be){const Ue=Te[Be];if(Ue!==this&&Ue instanceof Select&&Ue.getStyle()&&Ue.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(Ue.getStyle());return}}const ke=getUid(e);e.setStyle(originalFeatureStyles[ke]),delete originalFeatureStyles[ke]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const Te=this.addCondition_(e),ke=this.removeCondition_(e),Be=this.toggleCondition_(e),Ue=!Te&&!ke&&!Be,He=e.map,We=this.getFeatures(),Cn=[],En=[];if(Ue){clear$1(this.featureLayerAssociation_),He.forEachFeatureAtPixel(e.pixel,(An,Sn)=>{if(!(!(An instanceof Feature)||!this.filter_(An,Sn)))return this.addFeatureLayerAssociation_(An,Sn),En.push(An),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let An=We.getLength()-1;An>=0;--An){const Sn=We.item(An),Tn=En.indexOf(Sn);Tn>-1?En.splice(Tn,1):(We.remove(Sn),Cn.push(Sn))}En.length!==0&&We.extend(En)}else{He.forEachFeatureAtPixel(e.pixel,(An,Sn)=>{if(!(!(An instanceof Feature)||!this.filter_(An,Sn)))return(Te||Be)&&!We.getArray().includes(An)?(this.addFeatureLayerAssociation_(An,Sn),En.push(An)):(ke||Be)&&We.getArray().includes(An)&&(Cn.push(An),this.removeFeatureLayerAssociation_(An)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let An=Cn.length-1;An>=0;--An)We.remove(Cn[An]);We.extend(En)}return(En.length>0||Cn.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,En,Cn,e)),!0}}function getDefaultStyleFunction(){const Oe=createEditingStyle();return extend$4(Oe.Polygon,Oe.LineString),extend$4(Oe.GeometryCollection,Oe.LineString),function(e){return e.getGeometry()?Oe[e.getGeometry().getType()]:null}}class Kinetic{constructor(e,Te,ke){this.decay_=e,this.minVelocity_=Te,this.delay_=ke,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,Te){this.points_.push(e,Te,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,Te=this.points_.length-3;if(this.points_[Te+2]<e)return!1;let ke=Te-3;for(;ke>0&&this.points_[ke+2]>e;)ke-=3;const Be=this.points_[Te+2]-this.points_[ke+2];if(Be<1e3/60)return!1;const Ue=this.points_[Te]-this.points_[ke],He=this.points_[Te+1]-this.points_[ke+1];return this.angle_=Math.atan2(He,Ue),this.initialVelocity_=Math.sqrt(Ue*Ue+He*He)/Be,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}function defaults$2(Oe){Oe=Oe||{};const e=new Collection,Te=new Kinetic(-.005,.05,100);return(Oe.altShiftDragRotate!==void 0?Oe.altShiftDragRotate:!0)&&e.push(new DragRotate),(Oe.doubleClickZoom!==void 0?Oe.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:Oe.zoomDelta,duration:Oe.zoomDuration})),(Oe.dragPan!==void 0?Oe.dragPan:!0)&&e.push(new DragPan({onFocusOnly:Oe.onFocusOnly,kinetic:Te})),(Oe.pinchRotate!==void 0?Oe.pinchRotate:!0)&&e.push(new PinchRotate),(Oe.pinchZoom!==void 0?Oe.pinchZoom:!0)&&e.push(new PinchZoom({duration:Oe.zoomDuration})),(Oe.keyboard!==void 0?Oe.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:Oe.zoomDelta,duration:Oe.zoomDuration}))),(Oe.mouseWheelZoom!==void 0?Oe.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:Oe.onFocusOnly,duration:Oe.zoomDuration})),(Oe.shiftDragZoom!==void 0?Oe.shiftDragZoom:!0)&&e.push(new DragZoom({duration:Oe.zoomDuration})),e}var loglevel$1={exports:{}},loglevel=loglevel$1.exports,hasRequiredLoglevel;function requireLoglevel(){return hasRequiredLoglevel||(hasRequiredLoglevel=1,function(Oe){(function(e,Te){Oe.exports?Oe.exports=Te():e.log=Te()})(loglevel,function(){var e=function(){},Te="undefined",ke=typeof window!==Te&&typeof window.navigator!==Te&&/Trident\/|MSIE /.test(window.navigator.userAgent),Be=["trace","debug","info","warn","error"],Ue={},He=null;function We(ei,ti){var ni=ei[ti];if(typeof ni.bind=="function")return ni.bind(ei);try{return Function.prototype.bind.call(ni,ei)}catch{return function(){return Function.prototype.apply.apply(ni,[ei,arguments])}}}function Cn(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function En(ei){return ei==="debug"&&(ei="log"),typeof console===Te?!1:ei==="trace"&&ke?Cn:console[ei]!==void 0?We(console,ei):console.log!==void 0?We(console,"log"):e}function An(){for(var ei=this.getLevel(),ti=0;ti<Be.length;ti++){var ni=Be[ti];this[ni]=ti<ei?e:this.methodFactory(ni,ei,this.name)}if(this.log=this.debug,typeof console===Te&&ei<this.levels.SILENT)return"No console available for logging"}function Sn(ei){return function(){typeof console!==Te&&(An.call(this),this[ei].apply(this,arguments))}}function Tn(ei,ti,ni){return En(ei)||Sn.apply(this,arguments)}function Ln(ei,ti){var ni=this,ri,si,ai,li="loglevel";typeof ei=="string"?li+=":"+ei:typeof ei=="symbol"&&(li=void 0);function Pi(di){var ci=(Be[di]||"silent").toUpperCase();if(!(typeof window===Te||!li)){try{window.localStorage[li]=ci;return}catch{}try{window.document.cookie=encodeURIComponent(li)+"="+ci+";"}catch{}}}function pi(){var di;if(!(typeof window===Te||!li)){try{di=window.localStorage[li]}catch{}if(typeof di===Te)try{var ci=window.document.cookie,Mi=encodeURIComponent(li),Oi=ci.indexOf(Mi+"=");Oi!==-1&&(di=/^([^;]+)/.exec(ci.slice(Oi+Mi.length+1))[1])}catch{}return ni.levels[di]===void 0&&(di=void 0),di}}function vi(){if(!(typeof window===Te||!li)){try{window.localStorage.removeItem(li)}catch{}try{window.document.cookie=encodeURIComponent(li)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function Ri(di){var ci=di;if(typeof ci=="string"&&ni.levels[ci.toUpperCase()]!==void 0&&(ci=ni.levels[ci.toUpperCase()]),typeof ci=="number"&&ci>=0&&ci<=ni.levels.SILENT)return ci;throw new TypeError("log.setLevel() called with invalid level: "+di)}ni.name=ei,ni.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},ni.methodFactory=ti||Tn,ni.getLevel=function(){return ai??si??ri},ni.setLevel=function(di,ci){return ai=Ri(di),ci!==!1&&Pi(ai),An.call(ni)},ni.setDefaultLevel=function(di){si=Ri(di),pi()||ni.setLevel(di,!1)},ni.resetLevel=function(){ai=null,vi(),An.call(ni)},ni.enableAll=function(di){ni.setLevel(ni.levels.TRACE,di)},ni.disableAll=function(di){ni.setLevel(ni.levels.SILENT,di)},ni.rebuild=function(){if(He!==ni&&(ri=Ri(He.getLevel())),An.call(ni),He===ni)for(var di in Ue)Ue[di].rebuild()},ri=Ri(He?He.getLevel():"WARN");var Fi=pi();Fi!=null&&(ai=Ri(Fi)),An.call(ni)}He=new Ln,He.getLogger=function(ti){if(typeof ti!="symbol"&&typeof ti!="string"||ti==="")throw new TypeError("You must supply a name when creating a logger.");var ni=Ue[ti];return ni||(ni=Ue[ti]=new Ln(ti,He.methodFactory)),ni};var Bn=typeof window!==Te?window.log:void 0;return He.noConflict=function(){return typeof window!==Te&&window.log===He&&(window.log=Bn),He},He.getLoggers=function(){return Ue},He.default=He,He})}(loglevel$1)),loglevel$1.exports}var loglevelExports=requireLoglevel(),LoggerByDefault$1={getLogger:function(Oe){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var Te=Oe||"default";return loglevelExports.getLogger(Te)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(Oe,e){if(Object.keys(arguments).length===0)return"Message indefined !";var Te=Array.prototype.slice.call(arguments),ke=Te.shift(),Be=Te,Ue=this[ke];try{Array.isArray(Be)&&Be.length>0?Ue=Ue.replace("%var%",Be.join(" - ")):Ue=Ue.replace("%var%","%var% (not specified)")}catch{}return Ue}},Helper$1={normalyzeParameters:function(Oe){var e=null;if(Oe){var Te=[];for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Be=Oe[ke];Be||(Be=""),Te.push(ke+"="+Be)}e=Te.join("&")}return e},normalyzeUrl:function(Oe,e,Te){var ke=Oe;if(Oe){if(Oe.split("?").length-1>=2){var Be=Oe.search(/\?/)+1;ke=Oe.substring(0,Be)+Oe.slice(Be).replace(/\?/g,"&")}var Ue=Oe.indexOf("?");Ue===-1&&(ke+="?"),Ue!==-1&&Ue!==Oe.length-1&&(ke+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),ke+=e):ke+=this.normalyzeParameters(e)),Te&&(ke=encodeURIComponent(ke)),ke},indent:function(Oe,e){var Te=Oe||0;return new Array(Te+1).join("	")+e}};function commonjsRequire(Oe){throw new Error('Could not dynamically require "'+Oe+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise$1={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */var es6Promise=es6Promise$1.exports,hasRequiredEs6Promise;function requireEs6Promise(){return hasRequiredEs6Promise||(hasRequiredEs6Promise=1,function(Oe,e){(function(Te,ke){Oe.exports=ke()})(es6Promise,function(){function Te(Ar){var Sr=typeof Ar;return Ar!==null&&(Sr==="object"||Sr==="function")}function ke(Ar){return typeof Ar=="function"}var Be=void 0;Array.isArray?Be=Array.isArray:Be=function(Ar){return Object.prototype.toString.call(Ar)==="[object Array]"};var Ue=Be,He=0,We=void 0,Cn=void 0,En=function(Sr,br){Pi[He]=Sr,Pi[He+1]=br,He+=2,He===2&&(Cn?Cn(pi):Ri())};function An(Ar){Cn=Ar}function Sn(Ar){En=Ar}var Tn=typeof window<"u"?window:void 0,Ln=Tn||{},Bn=Ln.MutationObserver||Ln.WebKitMutationObserver,ei=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",ti=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function ni(){return function(){return process.nextTick(pi)}}function ri(){return typeof We<"u"?function(){We(pi)}:li()}function si(){var Ar=0,Sr=new Bn(pi),br=document.createTextNode("");return Sr.observe(br,{characterData:!0}),function(){br.data=Ar=++Ar%2}}function ai(){var Ar=new MessageChannel;return Ar.port1.onmessage=pi,function(){return Ar.port2.postMessage(0)}}function li(){var Ar=setTimeout;return function(){return Ar(pi,1)}}var Pi=new Array(1e3);function pi(){for(var Ar=0;Ar<He;Ar+=2){var Sr=Pi[Ar],br=Pi[Ar+1];Sr(br),Pi[Ar]=void 0,Pi[Ar+1]=void 0}He=0}function vi(){try{var Ar=Function("return this")().require("vertx");return We=Ar.runOnLoop||Ar.runOnContext,ri()}catch{return li()}}var Ri=void 0;ei?Ri=ni():Bn?Ri=si():ti?Ri=ai():Tn===void 0&&typeof commonjsRequire=="function"?Ri=vi():Ri=li();function Fi(Ar,Sr){var br=this,Br=new this.constructor(Mi);Br[ci]===void 0&&tr(Br);var Hr=br._state;if(Hr){var qr=arguments[Hr-1];En(function(){return gr(Hr,Br,qr,br._result)})}else dr(br,Br,Ar,Sr);return Br}function di(Ar){var Sr=this;if(Ar&&typeof Ar=="object"&&Ar.constructor===Sr)return Ar;var br=new Sr(Mi);return er(br,Ar),br}var ci=Math.random().toString(36).substring(2);function Mi(){}var Oi=void 0,Hi=1,Ki=2;function or(){return new TypeError("You cannot resolve a promise with itself")}function sr(){return new TypeError("A promises callback cannot return that same promise.")}function Cr(Ar,Sr,br,Br){try{Ar.call(Sr,br,Br)}catch(Hr){return Hr}}function pr(Ar,Sr,br){En(function(Br){var Hr=!1,qr=Cr(br,Sr,function(Xr){Hr||(Hr=!0,Sr!==Xr?er(Br,Xr):mr(Br,Xr))},function(Xr){Hr||(Hr=!0,_r(Br,Xr))},"Settle: "+(Br._label||" unknown promise"));!Hr&&qr&&(Hr=!0,_r(Br,qr))},Ar)}function wr(Ar,Sr){Sr._state===Hi?mr(Ar,Sr._result):Sr._state===Ki?_r(Ar,Sr._result):dr(Sr,void 0,function(br){return er(Ar,br)},function(br){return _r(Ar,br)})}function Li(Ar,Sr,br){Sr.constructor===Ar.constructor&&br===Fi&&Sr.constructor.resolve===di?wr(Ar,Sr):br===void 0?mr(Ar,Sr):ke(br)?pr(Ar,Sr,br):mr(Ar,Sr)}function er(Ar,Sr){if(Ar===Sr)_r(Ar,or());else if(Te(Sr)){var br=void 0;try{br=Sr.then}catch(Br){_r(Ar,Br);return}Li(Ar,Sr,br)}else mr(Ar,Sr)}function hr(Ar){Ar._onerror&&Ar._onerror(Ar._result),cr(Ar)}function mr(Ar,Sr){Ar._state===Oi&&(Ar._result=Sr,Ar._state=Hi,Ar._subscribers.length!==0&&En(cr,Ar))}function _r(Ar,Sr){Ar._state===Oi&&(Ar._state=Ki,Ar._result=Sr,En(hr,Ar))}function dr(Ar,Sr,br,Br){var Hr=Ar._subscribers,qr=Hr.length;Ar._onerror=null,Hr[qr]=Sr,Hr[qr+Hi]=br,Hr[qr+Ki]=Br,qr===0&&Ar._state&&En(cr,Ar)}function cr(Ar){var Sr=Ar._subscribers,br=Ar._state;if(Sr.length!==0){for(var Br=void 0,Hr=void 0,qr=Ar._result,Xr=0;Xr<Sr.length;Xr+=3)Br=Sr[Xr],Hr=Sr[Xr+br],Br?gr(br,Br,Hr,qr):Hr(qr);Ar._subscribers.length=0}}function gr(Ar,Sr,br,Br){var Hr=ke(br),qr=void 0,Xr=void 0,cs=!0;if(Hr){try{qr=br(Br)}catch(Qr){cs=!1,Xr=Qr}if(Sr===qr){_r(Sr,sr());return}}else qr=Br;Sr._state!==Oi||(Hr&&cs?er(Sr,qr):cs===!1?_r(Sr,Xr):Ar===Hi?mr(Sr,qr):Ar===Ki&&_r(Sr,qr))}function vr(Ar,Sr){try{Sr(function(Br){er(Ar,Br)},function(Br){_r(Ar,Br)})}catch(br){_r(Ar,br)}}var Fr=0;function zr(){return Fr++}function tr(Ar){Ar[ci]=Fr++,Ar._state=void 0,Ar._result=void 0,Ar._subscribers=[]}function fr(){return new Error("Array Methods must be provided an Array")}var ar=function(){function Ar(Sr,br){this._instanceConstructor=Sr,this.promise=new Sr(Mi),this.promise[ci]||tr(this.promise),Ue(br)?(this.length=br.length,this._remaining=br.length,this._result=new Array(this.length),this.length===0?mr(this.promise,this._result):(this.length=this.length||0,this._enumerate(br),this._remaining===0&&mr(this.promise,this._result))):_r(this.promise,fr())}return Ar.prototype._enumerate=function(br){for(var Br=0;this._state===Oi&&Br<br.length;Br++)this._eachEntry(br[Br],Br)},Ar.prototype._eachEntry=function(br,Br){var Hr=this._instanceConstructor,qr=Hr.resolve;if(qr===di){var Xr=void 0,cs=void 0,Qr=!1;try{Xr=br.then}catch(vs){Qr=!0,cs=vs}if(Xr===Fi&&br._state!==Oi)this._settledAt(br._state,Br,br._result);else if(typeof Xr!="function")this._remaining--,this._result[Br]=br;else if(Hr===Rr){var bs=new Hr(Mi);Qr?_r(bs,cs):Li(bs,br,Xr),this._willSettleAt(bs,Br)}else this._willSettleAt(new Hr(function(vs){return vs(br)}),Br)}else this._willSettleAt(qr(br),Br)},Ar.prototype._settledAt=function(br,Br,Hr){var qr=this.promise;qr._state===Oi&&(this._remaining--,br===Ki?_r(qr,Hr):this._result[Br]=Hr),this._remaining===0&&mr(qr,this._result)},Ar.prototype._willSettleAt=function(br,Br){var Hr=this;dr(br,void 0,function(qr){return Hr._settledAt(Hi,Br,qr)},function(qr){return Hr._settledAt(Ki,Br,qr)})},Ar}();function nr(Ar){return new ar(this,Ar).promise}function Dr(Ar){var Sr=this;return Ue(Ar)?new Sr(function(br,Br){for(var Hr=Ar.length,qr=0;qr<Hr;qr++)Sr.resolve(Ar[qr]).then(br,Br)}):new Sr(function(br,Br){return Br(new TypeError("You must pass an array to race."))})}function kr(Ar){var Sr=this,br=new Sr(Mi);return _r(br,Ar),br}function Ir(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Mr(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Rr=function(){function Ar(Sr){this[ci]=zr(),this._result=this._state=void 0,this._subscribers=[],Mi!==Sr&&(typeof Sr!="function"&&Ir(),this instanceof Ar?vr(this,Sr):Mr())}return Ar.prototype.catch=function(br){return this.then(null,br)},Ar.prototype.finally=function(br){var Br=this,Hr=Br.constructor;return ke(br)?Br.then(function(qr){return Hr.resolve(br()).then(function(){return qr})},function(qr){return Hr.resolve(br()).then(function(){throw qr})}):Br.then(br,br)},Ar}();Rr.prototype.then=Fi,Rr.all=nr,Rr.race=Dr,Rr.resolve=di,Rr.reject=kr,Rr._setScheduler=An,Rr._setAsap=Sn,Rr._asap=En;function Nr(){var Ar=void 0;if(typeof commonjsGlobal<"u")Ar=commonjsGlobal;else if(typeof self<"u")Ar=self;else try{Ar=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Sr=Ar.Promise;if(Sr){var br=null;try{br=Object.prototype.toString.call(Sr.resolve())}catch{}if(br==="[object Promise]"&&!Sr.cast)return}Ar.Promise=Rr}return Rr.polyfill=Nr,Rr.Promise=Rr,Rr})}(es6Promise$1)),es6Promise$1.exports}var es6PromiseExports=requireEs6Promise();const ES6Promise=getDefaultExportFromCjs$1(es6PromiseExports);var XHR={call:function(Oe){var e=LoggerByDefault$1.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!Oe.url)throw new Error("missing parameter : url is not defined !");if(!Oe.method)throw new Error("missing parameter : method is not defined !");Oe.format||(Oe.format="text");var Te={};switch(Te.url=Oe.url,Te.data=Oe.data?Oe.data:null,Te.method=Oe.method,Te.timeOut=Oe.timeOut||0,Te.scope=Oe.scope||this,Te.proxy=Oe.proxy||null,Te.content=Oe.content||null,Te.headers=Oe.headers||{referer:"http://localhost"},Oe.method){case"DELETE":case"GET":break;case"PUT":case"POST":Te.content=Oe.content?Oe.content:"application/x-www-form-urlencoded",Te.headers=Oe.headers?Oe.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(Oe.format){case"text":this.__call(Te).then(function(ke){e.trace(ke),Oe.onResponse.call(this,ke)}).catch(function(ke){Oe.onFailure.call(this,ke)});break;case"json":this.__callJSON(Te).then(function(ke){e.trace(ke),Oe.onResponse.call(this,ke)}).catch(function(ke){Oe.onFailure.call(this,ke)});break;case"xml":this.__callXML(Te).then(function(ke){e.trace(ke),Oe.onResponse.call(this,ke)}).catch(function(ke){Oe.onFailure.call(this,ke)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(Oe){var e=LoggerByDefault$1.getLogger("XHR");e.trace("[XHR::__call()]");var Te=new Promise(function(ke,Be){var Ue=Oe.method==="POST"||Oe.method==="PUT"?1:0;Oe.data&&(typeof Oe.data=="object"&&Object.keys(Oe.data).length||typeof Oe.data=="string"&&Oe.data.length)&&!Ue&&(Oe.url=Helper$1.normalyzeUrl(Oe.url,Oe.data)),e.trace("URL = ",Oe.url);var He=null;if(typeof window>"u"){var We=require("node-fetch"),Cn={headers:{Referer:"https://localhost"}};return Oe.data&&typeof Oe.data=="string"&&Ue&&(Cn={method:Oe.method,body:Oe.data,headers:{"Content-Type":Oe.content,Referer:"https://localhost"}}),We(Oe.url,Cn).then(function(Tn){if(Tn.ok)ke(Tn.text());else{var Ln="Errors Occured on Http Request (status : '"+Tn.statusText+"' | url : '"+Tn.url+"')",Bn=Tn.status;Be({message:Ln,status:Bn})}}).catch(function(Tn){Be({message:Tn,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),He=new XMLHttpRequest,He.open(Oe.method,Oe.url,!0),He.overrideMimeType=Oe.content;var En=null;Oe.timeOut>0&&(e.trace("XHR - TimeOut actif !"),En=window.setTimeout(function(){var Tn="TimeOut Occured on Http Request with XMLHttpRequest !";Be({message:Tn,status:-1})},Oe.timeOut)),Ue&&(e.trace("data = ",Oe.data),He.setRequestHeader("Content-type",Oe.content)),He.onerror=function(Tn){console.log(Tn),Be(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},He.ontimeout=function(Tn){console.log(Tn),Be(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},He.onreadystatechange=function(Tn){if(He.readyState===4)if(He.status===200)window.clearTimeout(En),ke(He.response);else{var Ln="Errors Occured on Http Request (status : '"+Tn.target.statusText+"' | url : '"+Tn.target.responseURL+"' | response : '"+Tn.target.response+"')",Bn=Tn.target.status;Be({message:Ln,status:Bn})}};var An=Oe.data&&Ue?Oe.data:null;He.send(An)}else if(window.XDomainRequest){e.trace("XDomainRequest"),He=new XDomainRequest,He.open(Oe.method,Oe.url),He.overrideMimeType=Oe.content,Oe.timeOut>0&&(He.timeout=Oe.timeout,e.trace("XHR - TimeOut actif !")),Ue&&He.setRequestHeader("Content-type",Oe.content),He.onerror=function(){Be(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},He.ontimeout=function(){Be(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},He.onload=function(Tn){if(He.status===200)ke(He.responseText);else{var Ln="Errors Occured on Http Request (status : '"+Tn.target.statusText+"' | url : '"+Tn.target.responseURL+"')",Bn=Tn.target.status;Be({message:Ln,status:Bn})}};var Sn=Oe.data&&Ue?Oe.data:null;He.send(Sn)}else throw new Error("CORS not supported")});return Te},__callJSON:function(Oe){return this.__call(Oe).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",Oe.url,e)})},__callXML:function(Oe){return this.__call(Oe).then(function(e){var Te;if(typeof window>"u"){var ke=require("@xmldom/xmldom").DOMParser;Te=new ke().parseFromString(e,"text/xml")}else if(window.DOMParser){var Be=new window.DOMParser;Te=Be.parseFromString(e,"text/xml")}else Te=new window.ActiveXObject("Microsoft.XMLDOM"),Te.async=!1,Te.loadXML(e);return Te}).catch(function(e){console.log("__callXML failed on : ",Oe.url,e)})}},JSONP={uuid:function(){var Oe=Math.floor(Date.now());return function(){return Oe++}}(),call:function(Oe){var e=LoggerByDefault$1.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!Oe)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!Oe.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(Oe.timeOut||(e.info("setting 'options.timeOut' default value"),Oe.timeOut=0),!Oe.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var Te=typeof Oe.callbackSuffix=="string"?Oe.callbackSuffix:this.uuid(),ke=!1,Be=!1,Ue=Oe.url.indexOf("callback=");if(Ue!==-1){ke=!0;var He=Oe.url.indexOf("&",Ue);He===-1&&(He=Oe.url.length);var We=Oe.url.substring(Ue+9,He);We&&(Be=!0,Oe.callbackName=We,e.info("setting 'options.callbackName' value ("+Oe.callbackName+") from 'options.url' parameter"))}if(!ke){var Cn=Oe.url.indexOf("?");Cn===-1?Oe.url=Oe.url+"?callback=":Cn===Oe.url.length?Oe.url=Oe.url+"callback=":Oe.url=Oe.url+"&callback=",e.info("setting callback default key in 'options.url' : "+Oe.url)}var En=Oe.callbackName?!0:Be;if(Be||(Oe.callbackName||(e.info("setting 'options.callbackName' default value"),Oe.callbackName="callback",(Te||Te==="")&&(Oe.callbackName+=Te)),Oe.url=Oe.url.replace("callback=","callback="+Oe.callbackName),e.info("setting callback function name in 'options.url' : "+Oe.url)),Oe.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),Oe.onTimeOut=function(){console.log("TimeOut while invoking url : "+Oe.url)}),!En){var An=this,Sn=null;Oe.timeOut>0&&(Sn=window.setTimeout(function(){window[Oe.callbackName]=function(){},Oe.onTimeOut(),An._deleteScript(Te)},Oe.timeOut)),window[Oe.callbackName]=function(Tn){window.clearTimeout(Sn),Oe.onResponse(Tn),An._deleteScript(Te)}}this._createScript(Te,Oe.url)},_createScript:function(Oe,e){var Te,ke=document.getElementById("results"+Oe);Te=document.createElement("script"),Te.setAttribute("type","text/javascript"),Te.setAttribute("src",e),Te.setAttribute("charset","UTF-8"),Te.setAttribute("id","results"+Oe),Te.setAttribute("async","true");var Be=document.documentElement||document.getElementsByTagName("head")[0];ke===null?Be.appendChild(Te):Be.replaceChild(Te,ke)},_deleteScript:function(Oe){var e=document.getElementById("results"+Oe);if(e){var Te=e.parentNode||document.documentElement;if(!Te)return;Te.removeChild(e)}}},Protocol={send:function(Oe){var e=Oe||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&Oe.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(Oe.protocol==="XHR"||Oe.format==="json"?e.wrap=!1:Oe.protocol==="JSONP"&&Oe.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var Te={};Te.output=e.output,Te.callback=e.callback,delete Te.callback,e.url=Helper$1.normalyzeUrl(Oe.url,Te)}switch(e.protocol){case"XHR":Oe.method==="GET"&&Oe.nocache&&(e.url=Helper$1.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper$1.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(Oe){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=Oe;typeof Oe=="string"||Oe instanceof String?(this.message=Oe,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const version$1="3.4.6",date="19/12/2024",Pkg={version:version$1,date};function CommonService(Oe){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault$1.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(ke){console.log("onSuccess - la reponse est la suivante : ",ke)},onFailure:function(ke){ke.status===200||!ke.status?console.log("onFailure : ",ke.message):console.log("onFailure - Erreur (",ke.status,") : ",ke.message)}};for(var e in Oe)Oe.hasOwnProperty(e)&&(this.options[e]=Oe[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(ke){console.log("onSuccess - la réponse brute du service est la suivante : ",ke)});var Te=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!Te)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof Oe.httpMethod=="string"?Oe.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof Oe.protocol=="string"?Oe.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=Oe.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var Oe=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(Oe,Ue,Te)}e.call(Oe);function Te(He){this.logger.trace("CommonService::onBuildRequest : ",He),this.callService.call(Oe,Ue,ke)}function ke(He){this.logger.trace("CommonService::onCallService : ",He),this.analyzeResponse.call(Oe,Ue,Be)}function Be(He){if(this.logger.trace("CommonService::onAnalyzeResponse : ",He),He)this.options.onSuccess.call(this,He);else return Ue.call(this,new ErrorService("Analyse de la reponse en échec !?"))}function Ue(He){this.logger.trace("CommonService::onError()");var We=He;We instanceof ErrorService||(We=new ErrorService(He.message)),this.options.onFailure.call(this,We)}},buildRequest:function(Oe,e){this.logger.error("overwritten method !"),Oe&&Oe.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(Oe,e){var Te=null,ke=this.request,Be=!!(this.options.proxyURL&&this.options.protocol==="XHR"),Ue={"gp-access-lib":Pkg.version};this.options.apiKey&&(Ue.apiKey=this.options.apiKey),this.options.serverUrl=Helper$1.normalyzeUrl(this.options.serverUrl,Ue,!1),Be&&(this.options.httpMethod==="GET"&&(Te=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,this.request,!0),ke=null),this.options.httpMethod==="POST"&&(Te=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,null,!0),ke=this.request));var He=this,We={url:Te||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:ke,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(Cn){He.logger.trace("callService::onResponse()");var En=null;if(He.options.protocol==="XHR"&&(He.logger.trace("Response XHR",Cn),En=Cn),He.options.protocol==="JSONP")if(He.logger.trace("Response JSON",Cn),Cn)if(Cn.http)if(Cn.http.status!==200){Oe.call(He,new ErrorService({status:Cn.http.status,message:Cn.http.error,type:ErrorService.TYPE_SRVERR}));return}else En=Cn.xml,He.options.rawResponse&&(En=Cn);else En=Cn;else{Oe.call(He,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof He.options.onBeforeParse=="function"){var An=He.options.onBeforeParse(En);typeof An=="string"&&(En=An)}He.response=En,e.call(He,En)},onFailure:function(Cn){He.logger.trace("callService::onFailure()"),Cn.type=ErrorService.TYPE_SRVERR,Oe.call(He,new ErrorService(Cn))},onTimeOut:function(){He.logger.trace("callService::onTimeOut()"),Oe.call(He,new ErrorService("TimeOut!"))}};Protocol.send(We)},analyzeResponse:function(Oe,e){this.logger.error("overwritten method !"),Oe&&Oe.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(Oe){var e="data.geopf.fr",Te;return DefaultUrlService.ssl===!1?Te="http://":Te="https://",Te+e+Oe},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(Oe){Array.isArray(Oe)||(Oe=Oe.split(","));for(var e=[],Te=0;Te<Oe.length;Te++)e[Te]=this._key+Oe[Te]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(Oe){if(Oe)return!!this.generalOptions.apiKeys[Oe]},getLayersId:function(Oe){return this.generalOptions.apiKeys[Oe]},getLayerId:function(Oe,e){if(!(!Oe||!e)){var Te=null;if(this.layers){var ke=this.layers;for(var Be in ke)if(ke.hasOwnProperty(Be)){var Ue=Be.split("$");if(Oe===Ue[0]&&Ue[1]){var He=Ue[1].split(":"),We=Ue[1].split(";");if(We[1]===e.toUpperCase()){Te=Be;break}if(He[2]===e.toUpperCase()){Te=Be;break}}}}if(Te)return Te}},getLayersConf:function(Oe){var e={},Te=this.getLayersId(Oe);if(Te)for(var ke=0;ke<Te.length;ke++){var Be=Te[ke];e[Be]=this.layers[Be]}return e},getLayerConf:function(Oe){if(this.layers)return this.layers[Oe]},getLayerParams:function(Oe,e){var Te={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var ke=this.getLayerId(Oe,e);if(ke){var Be=this.getLayerConf(ke),Ue=this.getLayerKey(ke);if(Ue.length===0)return;for(var He=0;He<Ue.length;He++)Be.serviceParams.serverUrl[Ue[He]]&&(Te.url=Be.serviceParams.serverUrl[Ue[He]]);if(e!=="WFS"&&(/\/v\//.test(Te.url)?Te.styles=" ":Te.styles=Be.styles[0].name),Te.version=Be.serviceParams.version,Te.format=Be.formats&&Be.formats.length?Be.formats[0].name:"",Te.projection=Be.defaultProjection,Te.minScale=Be.globalConstraint.minScaleDenominator,Te.maxScale=Be.globalConstraint.maxScaleDenominator,Te.extent=Be.globalConstraint.bbox,Te.legends=Be.legends,Te.title=Be.title,Te.description=Be.description,e==="WMS"&&(Te.metadata=Be.metadata),Be.wmtsOptions){Te.tileMatrixSetLimits=Be.wmtsOptions.tileMatrixSetLimits;var We=Be.wmtsOptions.tileMatrixSetLink;if(We){Te.TMSLink=We;var Cn=this.getTMSConf(We);Te.matrixIds=Object.keys(Cn.tileMatrices),Te.tileMatrices=Cn.tileMatrices,Te.nativeResolutions=Cn.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return Te},getLayerKey:function(Oe){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var Te=this.generalOptions.apiKeys;for(var ke in Te){var Be=Te[ke];Be.forEach(function(Ue){Ue===Oe&&e.push(ke)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(Oe){if(this.tileMatrixSets)return this.tileMatrixSets[Oe]},getGlobalConstraints:function(Oe){var e={};if(Oe){var Te=this.getLayerConf(Oe);e.projection=Te.defaultProjection,e.minScale=Te.globalConstraint.minScaleDenominator,e.maxScale=Te.globalConstraint.maxScaleDenominator,e.extent=Te.globalConstraint.bbox}return e}};function Config$1(Oe){if(!(this instanceof Config$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault$1.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=Oe.onSuccess!==null&&typeof Oe.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!Oe.apiKey&&!Oe.customConfigFile&&(Oe.apiKey="full"),this.options={},this.options.onSuccess=Oe.onSuccess,this.options.onFailure=Oe.onFailure,this.options.sync=Oe.sync||!1,this.options.listConfigUrls=Oe.customConfigFile?[Oe.customConfigFile]:Array.isArray(Oe.apiKey)?DefaultUrlService.Config.url(Oe.apiKey):DefaultUrlService.Config.url(Oe.apiKey.split(","))}Config$1.prototype=Object.create(CommonService.prototype,{});Config$1.prototype.constructor=Config$1;Config$1.prototype.buildRequest=function(Oe,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){Oe.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config$1.prototype.callService=function(Oe,e){this.options.sync?__callServiceSync.call(this,Oe,e):__callService.call(this,Oe,e)};var __callService=function(Oe,e){this.listConfigResults=[];let Te=null;if(typeof window>"u"){var ke=require("node-fetch");Te=ke}else Te=window.fetch;var Be=He=>Te(He,{credentials:"same-origin"}).then(We=>{if(We.ok)return We.json().then(Cn=>Cn).catch(Cn=>{throw new Error("Exception Json : "+Cn)});throw new Error("Exception HTTP : "+We.status+" (status code) !")}).catch(We=>new Promise((Cn,En)=>{En(We)})),Ue=[];for(let He=0;He<this.listConfigUrls.length;He++){const We=this.listConfigUrls[He];Ue.push(Be(We))}Promise.all(Ue).then(He=>{if(!He)throw new Error("results config empty !?");He.forEach(We=>{this.listConfigResults.push(We)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(He=>{Oe.call(this,He)})},__callServiceSync=function(Oe,e){this.listConfigResults=[];for(var Te=0;Te<this.listConfigUrls.length;Te++){const Be=this.listConfigUrls[Te],Ue=new XMLHttpRequest;if(Ue.open("GET",Be,!1),Ue.send(null),Ue.status===200){var ke=JSON.parse(Ue.responseText);this.listConfigResults.push(ke)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):Oe.call(this,new Error("..."))};Config$1.prototype.analyzeResponse=function(Oe,e){var Te=function(We){for(var Cn={},En={},An={},Sn=0;Sn<We.length;Sn++){if(!We[Sn].generalOptions||!We[Sn].layers)return;En={...En,...We[Sn].generalOptions.apiKeys},Cn={...Cn,...We[Sn].layers},An={...An,...We[Sn].tileMatrixSets}}var Tn={generalOptions:{apiKeys:En},layers:Cn,tileMatrixSets:An};return Tn},ke=Te(this.listConfigResults);if(!ke){Oe.call(this,new Error("configuration structure not conforme !"));return}var Be=new ConfigInterface;Object.assign(Be,ke);var Ue=typeof window<"u"?window:{};if(Ue.Gp||(Ue.Gp={}),Ue.Gp.Config){Object.assign(Ue.Gp.Config,Be);for(var He in Be)Ue.Gp.Config[He]=Be[He]}else Ue.Gp.Config=Be;e.call(this,Ue.Gp.Config)};function AltiRequest(Oe){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=Oe||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(Oe){for(var e=[],Te=0;Te<Oe.length;Te++){var ke=Oe[Te];ke.lon&&ke.lat&&e.push(ke)}this.positions=e},getPositions:function(Oe){if(!Oe)return this.positions;var e=this.positions.length-1;return Oe>e||Oe<e?(this.logger.warn("index out of range !"),this.positions):this.positions[Oe]},addPositions:function(Oe){for(var e=0;e<Oe.length;e++){var Te=Oe[e];Te.lon&&Te.lat&&this.positions.push(Oe[e])}},getLon:function(){for(var Oe=[],e=0;e<this.positions.length;e++)Oe.push(this.positions[e].lon);return this.logger.trace(Oe),Oe.join(this.delimiter)},getLat:function(){for(var Oe=[],e=0;e<this.positions.length;e++)Oe.push(this.positions[e].lat);return this.logger.trace(Oe),Oe.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var Oe=[];return Oe.push({k:"lon",v:this.getLon()}),Oe.push({k:"lat",v:this.getLat()}),Oe.push({k:"delimiter",v:this.delimiter}),Oe.push({k:"indent",v:this.indent}),Oe.push({k:"crs",v:this.crs}),Oe.push({k:"format",v:this.format}),Oe};function AltiElevationRequest(Oe){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(Oe){this._zonly=Oe}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var Oe=[];return Oe.push({k:"lon",v:this.getLon()}),Oe.push({k:"lat",v:this.getLat()}),Oe.push({k:"indent",v:this.indent}),Oe.push({k:"crs",v:this.crs}),Oe.push({k:"zonly",v:this.zonly}),Oe.push({k:"format",v:this.format}),Oe.push({k:"resource",v:this.resource}),Oe};function AltiProfilRequest(Oe){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(Oe){this._sampling=Oe}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var Oe=[];return Oe.push({k:"lon",v:this.getLon()}),Oe.push({k:"lat",v:this.getLat()}),Oe.push({k:"indent",v:this.indent}),Oe.push({k:"crs",v:this.crs}),Oe.push({k:"sampling",v:this.sampling}),Oe.push({k:"format",v:this.format}),Oe.push({k:"resource",v:this.resource}),Oe};function AltiRequestREST(Oe){if(this.logger=LoggerByDefault$1.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=Oe||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var Oe="";return this.method==="POST"?Oe=this.template.post.value:this.method==="GET"&&(Oe=this.template.get.value),Oe=Oe.replace(/__LON__/g,this.DataObject.getLon()),Oe=Oe.replace(/__LAT__/g,this.DataObject.getLat()),Oe=Oe.replace(/__INDENT__/g,this.DataObject.indent),Oe=Oe.replace(/__CRS__/g,this.DataObject.crs),Oe=Oe.replace(/__RESOURCE__/g,this.DataObject.resource),Oe=Oe.replace(/__MEASURES__/g,this.DataObject.measures),Oe=Oe+this.__addDataInputs(),this.logger.trace("traduction tmpl",Oe),this.requestString=Oe,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var Oe;if(this.method==="POST")Oe=this.template.post;else if(this.method==="GET")Oe=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=Oe.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=Oe.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(Oe){if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=Oe||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var Oe=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return Oe.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var Oe="";if(this.method==="POST")Oe=this.template.post.value;else if(this.method==="GET")Oe=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return Oe=Oe.replace(/__SERVICE__/g,this.paramservice),Oe=Oe.replace(/__VERSION__/g,this.paramversion),Oe=Oe.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),Oe=Oe.replace(/__IDENTIFIER__/g,this.paramidentifier),Oe=Oe.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(Oe=Oe.replace(/__NAMESPACE__/g,this.namespaceByDefault),Oe=Oe.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),Oe=Oe.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),Oe?(this.requestString=Oe,this.logger.trace("traduction tmpl",Oe),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var Oe=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",Te="",ke=this,Be=this.DataObject.getData(),Ue=0;Ue<Be.length;Ue++)(function(He){e&&(e=He===Be.length-1?"":";"),Te=Te.concat(ke.__addDataInput(Oe,Be[He].k,Be[He].v),e)})(Ue);return Te},__addDataInput:function(Oe,e,Te){var ke=Oe;return ke=ke.replace(/__KEY__/g,e),ke=ke.replace(/__DATA__/g,Te),ke},setMethod:function(Oe){Oe==="GET"||Oe==="POST"?this.method=Oe:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(Oe){var e=LoggerByDefault$1.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!Oe)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!Oe.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var Te=null;switch(Oe.type){case"Elevation":Oe.wps.identifier="gs:WPSElevation",Te=new AltiElevationRequest(Oe.param);break;case"Profil":Oe.wps.identifier="gs:WPSLineElevation",Te=new AltiProfilRequest(Oe.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var ke={data:Te,method:Oe.method,param:Oe.wps},Be=new WPS(ke);if(!Be.processRequestString())throw new Error("Enable to process request !");return Be.requestString}},AltiRequestFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var Te=null,ke={type:Oe.sampling?"Profil":"Elevation",method:Oe.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};ke.param.positions=Oe.positions,ke.param.format=Oe.outputFormat,ke.param.sampling=Oe.sampling,ke.param.zonly=Oe.zonly,ke.param.measures=Oe.measures,ke.param.resource=Oe.resource;var Be=Oe.onError!==null&&typeof Oe.onError=="function",Ue=Oe.onSuccess!==null&&typeof Oe.onSuccess=="function",He=null;switch(Oe.api){case"REST":var We=new AltiRequestREST(ke);if(!We.processRequestString()){if(He="Error in process request (rest) !",Be){Oe.onError.call(Oe.scope,new ErrorService(He));return}throw new Error(He)}Te=We.requestString;break;case"WPS":if(ke.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},Te=AltiRequestWPS.build(ke),!Te){if(He="Error in process request (wps) !",Be){Oe.onError.call(Oe.scope,new ErrorService(He));return}throw new Error(He)}break;default:if(He="Type of API is not supported by service (REST or WPS) !",Be){Oe.onError.call(Oe.scope,new ErrorService(He));return}throw new Error(He)}return Ue&&Oe.onSuccess.call(Oe.scope,Te),Te}};function XML$1(Oe){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,Oe&&(Oe.xmlString&&typeof Oe.xmlString=="string"&&(this.xmlString=Oe.xmlString,this.xmlDoc=__getXMLDOC(Oe.xmlString)),Oe.reader&&this.setReader(Oe.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(Oe){Oe&&typeof Oe=="string"&&(this.xmlString=Oe,this.xmlDoc=__getXMLDOC(Oe))},getReader:function(){return this.reader},setReader:function(Oe){Oe&&Oe.read&&typeof Oe.read=="function"&&(this.reader=Oe)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(Oe){this.xmlDoc=Oe},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var Oe=__getRootNode(this.xmlDoc);if(Oe){var e;return this.reader&&this.reader.read?e=this.reader.read(Oe):(e={},e[Oe.nodeName]=__readDefault(Oe)),e}else return{}}}};function __getXMLDOC(Oe){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(Oe,"text/xml")}else{var Te,ke,Be="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){ke=new window.ActiveXObject("Microsoft.XMLDOM"),ke.async=!1,ke.loadXML(Oe);var Ue=ke.parseError;if(Ue.errorCode)throw Ue.line&&Ue.linepos&&(Be+="( ligne "+Ue.line+", colonne "+Ue.linepos),Ue.reason&&(Be+=":  "+Ue.reason+")"),new Error(Be);return ke}else if(window.DOMParser){Te=new window.DOMParser;try{ke=Te.parseFromString(Oe,"text/xml")}catch(En){throw En.message==="SyntaxError"?new Error(Be):new Error("Erreur lors du parsing de la réponse du service : "+En.message)}if(ke.getElementsByTagName("parsererror").length>0)for(var He=ke.getElementsByTagName("parsererror"),We=0;We<He.length;We++){var Cn=He[We].innerHTML;if(Cn.indexOf("Huge input lookup")===-1)throw Be+="("+Cn+")",new Error(Be)}else if(!ke.documentElement)throw new Error(Be);return ke}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(Oe){var e;return Oe.nodeType===9?e=Oe.documentElement:Oe.nodeType===1&&(e=Oe),e}function __readDefault(Oe){var e={};if(Oe.attributes.length>0){var Te=__getAttributes(Oe);e.attributes=Te}if(Oe.hasChildNodes()){for(var ke={},Be,Ue=Oe.childNodes,He=0;He<Ue.length;He++)if(Be=Ue[He],Be.nodeType===3)e.textContent=Be.nodeValue;else if(Be.nodeType===1)if(ke=__readDefault(Be),!e[Be.nodeName])e[Be.nodeName]=ke;else{if(!Array.isArray(e[Be.nodeName])){var We=e[Be.nodeName];e[Be.nodeName]=[],e[Be.nodeName].push(We)}e[Be.nodeName].push(ke)}}return e}function __getAttributes(Oe){if(Oe.attributes.length>0){for(var e={},Te=Oe.attributes,ke=0;ke<Te.length;ke++){var Be=Te[ke];e[Be.nodeName]=Be.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(Oe){var e=new AltiResponse;if(Oe.hasChildNodes())for(var Te=Oe.childNodes,ke,Be,Ue=0;Ue<Te.length;Ue++)ke=Te[Ue],AltiResponseReader.READERS[ke.nodeName]&&(Be=AltiResponseReader.READERS[ke.nodeName](ke),e.elevations.push(Be));return e},elevation:function(Oe){var e=new Elevation;if(Oe.hasChildNodes())for(var Te=Oe.childNodes,ke,Be=0;Be<Te.length;Be++)ke=Te[Be],AltiResponseReader.READERS[ke.nodeName]&&AltiResponseReader.READERS[ke.nodeName](ke,e);return e},lat:function(Oe,e){var Te=Oe.firstChild;if(Te&&Te.nodeType===3)e.lat=parseFloat(Te.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente")},lon:function(Oe,e){var Te=Oe.firstChild;if(Te&&Te.nodeType===3)e.lon=parseFloat(Te.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente")},z:function(Oe,e){var Te=Oe.firstChild;if(Te&&Te.nodeType===3)if(e)e.z=parseFloat(Te.nodeValue);else return e=new Elevation,e.z=parseFloat(Te.nodeValue),e;else throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente")},acc:function(Oe,e){var Te=Oe.firstChild;if(Te&&Te.nodeType===3)e.acc=parseFloat(Te.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente")},source_name:function(Oe,e){var Te=Oe.firstChild;if(Te&&Te.nodeType===3)e.source_name=Te.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_name attendue mais absente")},source_measure:function(Oe,e){var Te=Oe.firstChild;if(Te&&Te.nodeType===3)e.source_measure=Te.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_measure attendue mais absente")},measures:function(Oe,e){e.measures=[];var Te;if(Oe.hasChildNodes())for(var ke=Oe.childNodes,Be,Ue,He=0;He<ke.length;He++){Te=new Measure,Be=ke[He],Ue=Be.childNodes;for(var We=0;We<Ue.length;We++)if(AltiResponseReader.READERS[Ue[We].nodeName])AltiResponseReader.READERS[Ue[We].nodeName](Ue[We],Te);else throw new Error("Erreur dans la lecture de la réponse du service : measures attendues mais absentes");e.measures.push(Te)}},exceptionreport:function(Oe){var e={};if(Oe.hasChildNodes())for(var Te=Oe.childNodes,ke,Be=0;Be<Te.length;Be++)ke=Te[Be],ke.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(ke));return e},exception:function(Oe){var e={},Te=Oe.getAttribute("exceptionCode");Te&&(e.exceptionCode=Te);var ke=Oe.firstChild;return ke&&ke.nodeType===3&&(e.exception=ke.nodeValue),e},error:function(Oe){var e={error:{}};if(Oe.hasChildNodes())for(var Te=Oe.childNodes,ke,Be=0;Be<Te.length;Be++){ke=Te[Be];var Ue;ke.nodeType===1&&ke.nodeName==="code"&&(Ue=ke.firstChild,Ue&&Ue.nodeType===3&&(e.error.code=Ue.nodeValue)),ke.nodeType===1&&ke.nodeName==="description"&&(Ue=ke.firstChild,Ue&&Ue.nodeType===3&&(e.error.description=Ue.nodeValue))}return e}};AltiResponseReader.read=function(Oe){if(Oe.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(Oe);return e}else if(Oe.nodeName==="ExceptionReport"){var Te=AltiResponseReader.READERS.exceptionreport(Oe);return Te}else if(Oe.nodeName==="error"){var ke=AltiResponseReader.READERS.error(Oe);return ke}else throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var Te=null;if(Oe.response)if(Oe.rawResponse)e.trace("analyze response : raw"),Te=Oe.response;else{switch(Oe.outputFormat){case"xml":e.trace("analyze response : xml");try{var ke=new XML$1({reader:AltiResponseReader});if(typeof Oe.response=="string"?ke.setXMLString(Oe.response):ke.setXMLDoc(Oe.response),Te=ke.parse(),!Te)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(Sn){var Be=Sn.message;Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Be),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof Oe.response);var Ue=null;if(typeof Oe.response=="string"?Ue=JSON.parse(Oe.response):Ue=Oe.response,Ue&&Ue.error){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Ue.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(Ue){var He=Ue.elevations,We=new AltiResponse,Cn;if(Array.isArray(He)&&He.length)for(var En=0;En<He.length;En++)Cn=new Elevation,typeof He[En]=="object"?(He[En].lon&&(Cn.lon=He[En].lon),He[En].lat&&(Cn.lat=He[En].lat),He[En].z&&(Cn.z=He[En].z),He[En].acc&&(Cn.acc=He[En].acc),He[En].measures&&(Cn.measures=He[En].measures)):typeof He[En]=="number"&&(Cn.z=He[En]),Array.isArray(We.elevations)&&We.elevations.push(Cn);Te=We}if(!Te){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(Te.exceptionReport){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Te.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(Te.error){var An=Te.error.description;Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",An),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Oe.onSuccess.call(Oe.scope,Te)}};function Alti(Oe){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!Oe.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(Oe.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=Oe.positions,this.options.outputFormat=typeof Oe.outputFormat=="string"?Oe.outputFormat.toLowerCase():"xml",this.options.resource=Oe.resource||"ign_rge_alti_wld",this.options.sampling=Oe.sampling||null,this.options.api=typeof Oe.api=="string"?Oe.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=Oe.zonly||!1,this.options.measures=Oe.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),Te=null;switch(this.options.api){case"WPS":Te=e.wps;break;case"REST":var ke=(Oe.sampling?"profil":"elevation")+"-"+this.options.outputFormat;Te=e[ke];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!Te)throw new Error("Url by default not found !");this.options.serverUrl=Te,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var Be=this.options.serverUrl.lastIndexOf(".");if(Be!==-1){var Ue=this.options.serverUrl.substring(Be+1);if(Ue&&Ue.length<5)switch(this.logger.trace("Server Extension URL : "+Ue),Ue.toLowerCase()){case"json":case"xml":this.options.outputFormat=Ue.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(Oe,e){var Te={httpMethod:this.options.httpMethod,onSuccess:function(ke){this.request=ke,e.call(this,this.request)},onError:Oe,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(Te)};Alti.prototype.analyzeResponse=function(Oe,e){if(this.response){var Te={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:Oe,onSuccess:e,scope:this};AltiResponseFactory.build(Te)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(Oe){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=Oe||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var Oe={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(Oe[e]=this.filters[e]);return Oe},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var Oe=[];this.geocodeMethod==="search"&&Oe.push({k:"q",v:this.query}),this.index&&Oe.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&Oe.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(Oe.push({k:"lon",v:this.lon}),Oe.push({k:"lat",v:this.lat})),this.maxResp&&Oe.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&Oe.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var Te in e)Oe.push({k:Te,v:e[Te]});return Oe};function GeocodeRequestREST(Oe){if(this.logger=LoggerByDefault$1.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!Oe)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Oe}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var Oe="";const Te=new GeocodeParamREST(this.settings).getParams();for(var ke=0;ke<Te.length;ke++){var Be=Te[ke];Oe&&(Oe+="&"),Oe+=Be.k+"="+Be.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+Oe,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var Te=Oe||{},ke=new GeocodeRequestREST(Te);if(!ke.processRequestString())throw new Error("Error process request (rest) !");var Be=ke.requestString;return e.trace(Be),Be}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(Oe){var e=new GeocodeResponse;const Te=JSON.parse(Oe);if(Te.type==="FeatureCollection")for(var ke=0;ke<Te.features.length;++ke)_parseFeature(Te.features[ke],e);else if(Te.type==="Feature")_parseFeature(Te,e);else{if(Te.type==="SERVICE_ERROR")return _parseError(Te);var Be=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",Te.type);throw new ErrorService({message:Be,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(Oe,e){var Te=new GeocodedLocation;if(Oe.geometry&&Oe.geometry.type==="Point"&&(Te.position={lon:Oe.geometry.coordinates[0],lat:Oe.geometry.coordinates[1]}),Oe.properties){for(var ke in Oe.properties)ke==="score"?Te.accuracy=Oe.properties[ke]:ke==="_type"?Oe.properties[ke]==="address"?Te.type="StreetAddress":Oe.properties[ke]==="poi"?Te.type="PositionOfInterest":(Oe.properties[ke]==="parcel"||Oe.properties[ke]==="cadastral")&&(Te.type="CadastralParcel"):Te.placeAttributes[ke]=Oe.properties[ke];Oe.properties._type==="address"&&(Te.matchType=Oe.properties.number!==void 0&&Oe.properties.number!==null?"street number":"street")}e.locations.push(Te)}function _parseError(Oe){return{exceptionReport:Oe}}var GeocodeReponseFactory={build:function(Oe){var e=null;if(Oe.response)if(Oe.rawResponse)e=Oe.response;else{try{if(e=new GeocodeResponseParser().parse(Oe.response),!e)throw new Error("L'analyse de la réponse du service !?")}catch(ke){var Te=ke.message;typeof Oe.response=="string"?Te+="('"+Oe.response+"')":Te+="('"+Oe.response.documentElement.innerHTML+"')",Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",Te),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}Oe.onSuccess.call(Oe.scope,e)}};function Geocode(Oe){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(Oe);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var Te=Object.keys(e.filters),ke=0;ke<Te.length;ke++){var Be=Te[ke];(typeof e.filters[Be]>"u"||typeof e.filters[Be]=="object"&&Object.keys(e.filters[Be]).length===0||typeof e.filters[Be]=="string"&&e.filters[Be].length===0||Array.isArray(e.filters[Be])&&e.filters[Be].length===0)&&delete this.options.filters[Be]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(Oe){const e=Oe;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(Oe,e){var Te={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(Te),this.request?e.call(this,this.request):Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(Oe,e){if(this.response){var Te={response:this.response,rawResponse:this.options.rawResponse,onError:Oe,onSuccess:e,scope:this};GeocodeReponseFactory.build(Te)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode$1(Oe){if(!(this instanceof ReverseGeocode$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(Oe);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var Te=Object.keys(e.filters),ke=0;ke<Te.length;ke++){var Be=Te[ke];(typeof e.filters[Be]>"u"||typeof e.filters[Be]=="object"&&Object.keys(e.filters[Be]).length===0||typeof e.filters[Be]=="string"&&e.filters[Be].length===0||Array.isArray(e.filters[Be])&&e.filters[Be].length===0)&&delete this.options.filters[Be]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode$1.prototype=Object.create(CommonService.prototype,{});ReverseGeocode$1.prototype.constructor=ReverseGeocode$1;ReverseGeocode$1.prototype.patchOptionConvertor=function(Oe){var e=Oe;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode$1.prototype.buildRequest=function(Oe,e){var Te={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(Te),this.request?e.call(this,this.request):Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode$1.prototype.analyzeResponse=function(Oe,e){if(this.response){var Te={response:this.response,rawResponse:this.options.rawResponse,onError:Oe,onSuccess:e,scope:this};GeocodeReponseFactory.build(Te)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode$1.prototype.bbox2Json=function(Oe){return{type:"Polygon",coordinates:[[[Oe.left,Oe.top],[Oe.right,Oe.top],[Oe.right,Oe.bottom],[Oe.left,Oe.bottom],[Oe.left,Oe.top]]]}};ReverseGeocode$1.prototype.circle2Json=function(Oe){return{type:"Circle",radius:Oe.radius,coordinates:[Oe.x,Oe.y]}};ReverseGeocode$1.prototype.polygon2Json=function(Oe){for(var e={type:"Polygon",coordinates:[[]]},Te=0;Te<Oe.length;++Te)e.coordinates[0].push([Oe[Te].x,Oe[Te].y]);return e};ReverseGeocode$1.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var Te=null;if(Oe.response)if(Oe.rawResponse)e.trace("analyze response : raw"),Te=Oe.response;else{var ke=null;if(typeof Oe.response=="string"?ke=JSON.parse(Oe.response):ke=Oe.response,ke){if(ke.error){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",ke.error.description),status:ke.error.code,type:ErrorService.TYPE_SRVERR}));return}if(Te=new AutoCompleteResponse,ke.results&&Array.isArray(ke.results))for(var Be=null,Ue=0;Ue<ke.results.length;Ue++){var He=ke.results[Ue];Be=new SuggestedLocation,He&&(He.country==="StreetAddress"?(Be.street=He.street,Be.type="StreetAddress"):He.country==="PositionOfInterest"&&(Be.poi=He.street,Be.type="PositionOfInterest",Be.poiType=He.poiType),Be.position&&(Be.position.x=He.x,Be.position.y=He.y),Be.kind=He.kind,Be.commune=He.city,Be.fullText=He.fulltext,Be.postalCode=He.zipcode,Be.classification=He.classification),Te.suggestedLocations.push(Be)}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!Te.suggestedLocations.length){Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!Te){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(Te.exceptionReport){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Te.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Oe.onSuccess.call(Oe.scope,Te)}};function AutoComplete(Oe){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault$1.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(Oe);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(Oe){const e=Oe;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(Oe,e){var Te="";this.options.territory&&(Te=this.options.territory);var ke="";this.options.type&&(ke=this.options.type.join(",")),this.request=Helper$1.normalyzeParameters({text:encodeURIComponent(this.options.text),type:ke,terr:Te,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(Oe,e){if(this.response){var Te={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:Oe,scope:this};AutoCompleteResponseFactory.build(Te)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(Oe){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=Oe||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var Oe=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var Te=this.intermediates[e];Oe.push(Te.x+","+Te.y)}return Oe.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var Oe=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)Oe.push(JSON.stringify(this.constraints[e]));return Oe.join("|")}};RouteParamREST.prototype.getParams=function(){var Oe=[];return Oe.push({k:"resource",v:this.resource}),Oe.push({k:"start",v:this.start}),Oe.push({k:"end",v:this.end}),Oe.push({k:"geometryFormat",v:"geojson"}),this.optimization&&Oe.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&Oe.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&Oe.push({k:"profile",v:this.getProfile()}),this.constraints&&Oe.push({k:"constraints",v:this.getConstraints()}),this.crs&&Oe.push({k:"crs",v:this.crs}),this.distanceUnit&&Oe.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&Oe.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&Oe.push({k:"waysAttributes",v:this.getWaysAttributes()}),Oe};function RouteRequestREST(Oe){if(this.logger=LoggerByDefault$1.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!Oe)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Oe}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var Oe=new RouteParamREST(this.settings),e=Oe.getParams(),Te="",ke=0;ke<e.length;ke++){var Be=e[ke];Te&&(Te+="&"),Te+=Be.k+"="+Be.v}return this.logger.trace(Te),this.requestString=Te,this.requestString}};var RouteRequestFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var Te=null,ke=Oe||{},Be=Oe.onError!==null&&typeof Oe.onError=="function",Ue=null,He=new RouteRequestREST(ke);if(!He.processRequestString()){if(Ue="Error process request (rest) !",Be){Oe.onError.call(Oe.scope,new ErrorService(Ue));return}throw new Error(Ue)}return Te=He.requestString,Te}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var Te=null;if(Oe.response)if(Oe.rawResponse)e.trace("analyze response : raw"),Te=Oe.response;else{e.trace("analyze response : json");var ke;if(typeof Oe.response=="string"?ke=JSON.parse(Oe.response):ke=Oe.response,ke){if(ke.message){Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",ke.message)));return}var Be=[],Ue=[],He=[];if(Te=new RouteResponse,Te.hasOwnProperty("totalTime")&&(Te.totalTime=parseFloat(ke.duration)),Te.hasOwnProperty("totalDistance")&&(Te.totalDistance=parseFloat(ke.distance)),Te.hasOwnProperty("bbox")&&(Te.bbox.left=parseFloat(ke.bbox[0]),Te.bbox.bottom=parseFloat(ke.bbox[1]),Te.bbox.right=parseFloat(ke.bbox[2]),Te.bbox.top=parseFloat(ke.bbox[3])),Te.hasOwnProperty("routeGeometry")&&!Oe.geometryInInstructions&&(Te.routeGeometry=ke.geometry),Te.hasOwnProperty("routeInstructions")&&Oe.geometryInInstructions){var We=ke.portions,Cn;if(Array.isArray(We)&&We.length)for(Cn=0;Cn<We.length;Cn++)Be.push(We[Cn]);if(Be.length)for(Cn=0;Cn<Be.length;Cn++)Ue.push(Be[Cn].steps);if(Ue.length)for(Cn=0;Cn<Ue.length;Cn++)He=He.concat(Ue[Cn]);He.forEach(function(En){switch(Te.routeInstructions.push(new RouteInstruction),Te.routeInstructions[Te.routeInstructions.length-1].duration=En.duration,Te.routeInstructions[Te.routeInstructions.length-1].distance=En.distance,Te.routeInstructions[Te.routeInstructions.length-1].code="",Te.routeInstructions[Te.routeInstructions.length-1].instruction="",Te.routeInstructions[Te.routeInstructions.length-1].geometry=En.geometry,En.name==="Valeur non renseignée"&&(En.name=""),En.instruction.type){case"turn":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Tourner";break;case"new name":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Départ";break;case"arrive":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Arrivée";break;case"merge":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="À la fin de la route, prendre";break;case"use lane":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":Te.routeInstructions[Te.routeInstructions.length-1].instruction+="";break;default:Te.routeInstructions[Te.routeInstructions.length-1].instruction+="?"+En.instruction.type+"?";break}if(En.instruction.modifier)switch(En.instruction.modifier){case"uturn":Te.routeInstructions[Te.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" complètement à droite";break;case"right":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" à droite";break;case"slight right":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" légèrement à droite";break;case"straight":Te.routeInstructions[Te.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" lègèrement à gauche";break;case"left":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" à gauche";break;case"sharp left":Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" complètement à gauche";break;default:Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" ?"+En.instruction.modifier+"?";break}En.instruction.exit&&(Te.routeInstructions[Te.routeInstructions.length-1].instruction+=`${En.instruction.exit}e sortie`),En.attributes.name&&((En.attributes.name.nom_1_droite||En.attributes.name.toponyme)&&(Te.routeInstructions[Te.routeInstructions.length-1].instruction+=" sur"),En.attributes.name.nom_1_droite&&(Te.routeInstructions[Te.routeInstructions.length-1].instruction+=` ${En.attributes.name.nom_1_droite}`),En.attributes.name.toponyme&&(Te.routeInstructions[Te.routeInstructions.length-1].instruction+=` ${En.attributes.name.toponyme}`))})}}if(!Te){Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(Te.exceptionReport){Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Oe.onSuccess.call(Oe.scope,Te)}};function Route$1(Oe){if(!(this instanceof Route$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!Oe.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(Oe.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(Oe.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!Oe.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(Oe.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(Oe.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(Oe.outputFormat&&Oe.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=Oe.resource||"bdtopo-osrm",this.options.startPoint=Oe.startPoint,this.options.endPoint=Oe.endPoint,this.options.viaPoints=Oe.viaPoints||[],this.options.routePreference=Oe.routePreference||"fastest",Oe.graph?(Oe.graph==="Voiture"&&(this.options.graph="car"),Oe.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],Oe.constraints)if(Array.isArray(Oe.constraints))for(var e=0;e<Oe.constraints.length;e++)this.options.constraints.push(Oe.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var Te={},ke={},Be={};if(Oe.exclusions&&Oe.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Ue=0;Ue<Oe.exclusions.length;Ue++){if(typeof Oe.exclusions[Ue]=="string")Oe.exclusions[Ue]=Oe.exclusions[Ue].toLowerCase();else continue;Oe.exclusions[Ue]==="toll"&&(Be.constraintType="banned",Be.key="wayType",Be.operator="=",Be.value="autoroute",this.options.constraints.push(Be)),Oe.exclusions[Ue]==="tunnel"&&(Te.constraintType="banned",Te.key="wayType",Te.operator="=",Te.value="tunnel",this.options.constraints.push(Te)),Oe.exclusions[Ue]==="bridge"&&(ke.constraintType="banned",ke.key="wayType",ke.operator="=",ke.value="pont",this.options.constraints.push(ke))}}if(this.options.geometryInInstructions=Oe.geometryInInstructions||!1,this.options.provideBbox=Oe.provideBbox||!0,this.options.distanceUnit=Oe.distanceUnit||"m",this.options.timeUnit=Oe.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=Oe.srs||"EPSG:4326",this.options.waysAttributes=Oe.waysAttributes||[],!this.options.serverUrl){var He=DefaultUrlService.Route.newUrl();if(!He)throw new Error("Url by default not found !");this.options.serverUrl=He,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route$1.prototype=Object.create(CommonService.prototype,{});Route$1.prototype.constructor=Route$1;Route$1.prototype.buildRequest=function(Oe,e){var Te={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(Te),this.request?e.call(this,this.request):Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route$1.prototype.analyzeResponse=function(Oe,e){if(this.response){var Te={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:Oe,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(Te)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(Oe){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=Oe||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var Oe=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)Oe.push(JSON.stringify(this.constraints[e]));return Oe.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var Oe=[];return Oe.push({k:"resource",v:this.resource}),Oe.push({k:"point",v:this.getLocation()}),Oe.push({k:"direction",v:this.getDirection()}),Oe.push({k:"costType",v:this.costType}),Oe.push({k:"costValue",v:this.costValue}),Oe.push({k:"profile",v:this.profile}),Oe.push({k:"timeUnit",v:this.timeUnit}),Oe.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&Oe.push({k:"crs",v:this.crs}),this.constraints&&Oe.push({k:"constraints",v:this.getConstraints()}),Oe};function ProcessIsoCurveRequest(Oe){if(this.logger=LoggerByDefault$1.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!Oe)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Oe,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var Oe="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var Te=new ProcessIsoCurveParam(this.settings),ke=Te.getParams();for(e=0;e<ke.length;e++){var Be=ke[e];Oe&&(Oe+="&"),Oe+=Be.k+"="+Be.v}break;case"POST":this.logger.trace("Process POST Request");var Ue={};Ue.resource=this.settings.resource,Ue.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(Ue.costType="distance",Ue.costValue=this.settings.distance):(Ue.costType="time",Ue.costValue=this.settings.time),Ue.profile=this.settings.graph,this.settings.reverse?Ue.direction="arrival":Ue.direction="departure",Ue.constraints=this.settings.constraints,Ue.distanceUnit=this.settings.distanceUnit,Ue.timeUnit=this.settings.timeUnit,Ue.crs=this.settings.srs,Oe=JSON.stringify(Ue);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(Oe),this.requestString=Oe,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var Te=null;if(Oe.response)if(Oe.rawResponse)e.trace("analyze response : raw"),Te=Oe.response;else{e.trace("analyze response : json");var ke;if(typeof Oe.response=="string"?ke=JSON.parse(Oe.response):ke=Oe.response,Te=new ProcessIsoCurveResponse,ke){ke.costType==="distance"?(Te.time="",Te.distance=ke.costValue):(Te.time=ke.costValue,Te.distance=""),Te.message="",Te.id="",Te.srs=ke.crs,Te.geometry=ke.geometry;var Be=ke.point.split(",");Te.location&&(Te.location.x=Be[0],Te.location.y=Be[1])}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",Oe.response)));return}if(Te.exceptionReport){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Te.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Oe.onSuccess.call(Oe.scope,Te)}};function ProcessIsoCurve(Oe){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!Oe.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(Oe.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(Oe.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!Oe.time&&!Oe.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!Oe.time&&Oe.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),Oe.time&&!Oe.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=Oe.resource||"bdtopo-valhalla",this.options.exclusions=Oe.exclusions||[],this.options.reverse=Oe.reverse||!1,this.options.srs=Oe.srs||"EPSG:4326",this.options.distanceUnit=Oe.distanceUnit||"m",this.options.timeUnit=Oe.timeUnit||"second",Oe.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,Oe.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,Oe.graph?(Oe.graph==="Voiture"&&(this.options.graph="car"),Oe.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],Oe.constraints)if(Array.isArray(Oe.constraints))for(var e=0;e<Oe.constraints.length;e++)this.options.constraints.push(Oe.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var Te={},ke={},Be={};if(Oe.exclusions&&Oe.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Ue=0;Ue<Oe.exclusions.length;Ue++){if(typeof Oe.exclusions[Ue]=="string")Oe.exclusions[Ue]=Oe.exclusions[Ue].toLowerCase();else continue;Oe.exclusions[Ue]==="toll"&&(Be.constraintType="banned",Be.key="wayType",Be.operator="=",Be.value="autoroute",this.options.constraints.push(Be)),Oe.exclusions[Ue]==="tunnel"&&(Te.constraintType="banned",Te.key="wayType",Te.operator="=",Te.value="tunnel",this.options.constraints.push(Te)),Oe.exclusions[Ue]==="bridge"&&(ke.constraintType="banned",ke.key="wayType",ke.operator="=",ke.value="pont",this.options.constraints.push(ke))}}if(this.options.outputFormat=typeof Oe.outputFormat=="string"?Oe.outputFormat.toLowerCase():"json",Oe.outputFormat&&Oe.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var He=DefaultUrlService.ProcessIsoCurve.newUrl();if(!He)throw new Error("Url by default not found !");this.options.serverUrl=He,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(Oe,e){try{var Te=new ProcessIsoCurveRequest(this.options);if(!Te.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=Te.requestString}catch(ke){Oe.call(this,new ErrorService(ke.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(Oe,e){if(this.response){var Te={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:Oe,scope:this};ProcessIsoCurveResponseFactory.build(Te)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(Oe){var e=new Config$1(Oe);e.call()},getAltitude:function(Oe){var e=new Alti(Oe);e.call()},geocode:function(Oe){var e=new Geocode(Oe);e.call()},reverseGeocode:function(Oe){var e=new ReverseGeocode$1(Oe);e.call()},autoComplete:function(Oe){var e=new AutoComplete(Oe);e.call()},route:function(Oe){var e=new Route$1(Oe);e.call()},isoCurve:function(Oe){var e=new ProcessIsoCurve(Oe);e.call()}};const servicesVersion=Pkg.version,servicesDate=Pkg.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config$1;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper$1;var LoggerByDefault={getLogger:function(Oe){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var Te=Oe||"default";return loglevelExports.getLogger(Te)},disableAll:function(){var Oe=loglevelExports.getLoggers();for(const e in Oe)Object.hasOwnProperty.call(Oe,e)&&Oe[e].disableAll()},enableAll:function(){var Oe=loglevelExports.getLoggers();for(const e in Oe)Object.hasOwnProperty.call(Oe,e)&&Oe[e].enableAll()}};window.Gp&&(window.Gp.Logger=LoggerByDefault);var ProxyUtils={proxifyUrl:function(Oe,e){var Te=LoggerByDefault.getLogger("proxifyUrl");if(!e||!e.hasOwnProperty("proxyUrl")||e.proxyUrl===null||e.proxyUrl.trim().length===0)return Oe;if(e.noProxyDomains&&Array.isArray(e.noProxyDomains)&&e.noProxyDomains.length>0){for(var ke in e.noProxyDomains)if(Te.trace("[ProxyUtils] proxifyUrl : analyzing "+e.noProxyDomains[ke]),Oe.indexOf(e.noProxyDomains[ke])!==-1)return Te.info("[ProxyUtils] proxifyUrl : "+Oe+" found in noProxyDomains list ("+e.noProxyDomains[ke]+")."),Oe}return e.proxyUrl+encodeURIComponent(Oe)}},logger$F=LoggerByDefault.getLogger("GfiUtils"),Gfi={getLayerFormat:function(Oe){var e=typeof Oe.getType=="function"?Oe.getType():null,Te=Oe.getSource();if(e){if(e==="VECTOR"||e==="VECTOR_TILE")return"vector";if(e==="TILE")return Te.tileGrid?"wmts":"wms";if(e==="IMAGE")return"wms"}else{if(Te instanceof TileWMS||Te instanceof ImageWMS)return"wms";if(Te instanceof WMTS$1)return"wmts";if(Te instanceof VectorSource||Te instanceof VectorTile)return"vector"}return"unknown"},displayInfo:function(Oe,e,Te,ke,Be){if(logger$F.trace("[Gfi] : displayInfo..."),ke||(ke="text/html"),Te!==null){var Ue=null,He=null,We=Te;We=We.replace(/\n/g,""),We=We.replace(/(>)\s*(<)/g,"$1$2");var Cn=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var En=require("@xmldom/xmldom").DOMParser;He=new En,Ue=He.parseFromString(We,ke)}else if(Cn.DOMParser)He=new Cn.DOMParser,Ue=He.parseFromString(We,ke);else if(Cn.ActiveXObject)Ue=new Cn.ActiveXObject("Microsoft.XMLDOM"),Ue.async=!1,Ue.loadXML(We);else return logger$F.log("Incompatible environment for DOM Parser !"),!1;var An=Ue.getElementsByTagName("body");if(An&&An.length===1&&!An[0].hasChildNodes())return!1;var Sn=document.createElement("div");Sn.className="gp-feature-info-div";var Tn=document.createElement("button");Tn.className="gp-styling-button closer",Tn.onclick=function(){return Oe.featuresOverlay&&(Oe.removeOverlay(Oe.featuresOverlay),Oe.featuresOverlay=null),!1};var Ln=document.createElement("div");return Ln.className="gp-features-content-div",Ln.innerHTML=Te,Sn.appendChild(Ln),Sn.appendChild(Tn),Oe.featuresOverlay&&(Oe.removeOverlay(Oe.featuresOverlay),Oe.featuresOverlay=null),Oe.featuresOverlay=new Overlay({element:Sn,autoPan:Be.autoPan,autoPanAnimation:Be.autoPanAnimation,autoPanMargin:Be.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),Oe.addOverlay(Oe.featuresOverlay),Oe.featuresOverlay.setPosition(e),Oe.featuresOverlay.render(),!0}},features2html:function(Oe,e){var Te=document.createElement("div");return e.forEach(function(ke){var Be=ke.getProperties();if(Be.hasOwnProperty("render"))Te.insertAdjacentHTML("beforeend",Be.render);else{if(Be.hasOwnProperty("name")){var Ue=document.createElement("div");Ue.className="gp-att-name-div",Ue.insertAdjacentHTML("afterbegin",Be.name),Te.appendChild(Ue)}if(Be.hasOwnProperty("description")){var He=document.createElement("div");He.className="gp-att-description-div",He.insertAdjacentHTML("afterbegin",Be.description),Te.appendChild(He)}var We=null,Cn=!1,En=null,An=null,Sn=null,Tn=["fill","fill-opacity","label-stroke","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(We in Be)if(Be[We]!==void 0&&Tn.indexOf(We)===-1){Cn||(En=document.createElement("div"),En.className="gp-att-others-div",An=document.createElement("ul"),Cn=!0),Sn=document.createElement("li");var Ln=document.createElement("span");Ln.className="gp-attname-others-span",Ln.appendChild(document.createTextNode(We+" : ")),Sn.appendChild(Ln),Sn.appendChild(document.createTextNode(Be[We])),An.appendChild(Sn)}An&&(En.appendChild(An),Te.appendChild(En))}},Oe),Te.hasChildNodes()||(Te=null),Te},layerGetFeatureAtCoordinates:function(Oe,e,Te){var ke=Oe.getPixelFromCoordinate(Te);return Oe.hasFeatureAtPixel(ke,function(Be){return Be===e})},displayVectorFeatureInfo:function(Oe,e,Te,ke){var Be=Oe.getPixelFromCoordinate(e),Ue=[];if(Oe.forEachFeatureAtPixel(Be,function(We,Cn){(!Te||Te.indexOf(Cn)>-1)&&Ue.push(We)}),Ue.length===0)return!1;var He=this.features2html(Oe,Ue);return He===null?!1:(this.displayInfo(Oe,e,He.innerHTML,"text/html",ke),!0)},displayFeatureInfo:function(Oe,e,Te,ke,Be){for(var Ue={},He=0;He<Te.length;He++){var We=Te[He],Cn=We.obj.getZIndex();Ue[Cn]||(Ue[Cn]=[]),Ue[Cn].push(We)}var En=[],An=Object.keys(Ue);An.sort(function(pi,vi){return vi-pi});for(var Sn=0;Sn<An.length;Sn++)for(var Tn=An[Sn],Ln=0;Ln<Ue[Tn].length;++Ln){var Bn=Ue[Tn][Ln].obj,ei=Ue[Tn][Ln].infoFormat||"text/html",ti=!0;if(Bn.minResolution&&Bn.minResolution>Oe.getResolution()&&(ti=!1),ti&&Bn.maxResolution&&Bn.maxResolution<Oe.getResolution()&&(ti=!1),Bn.getVisible()&&ti){var ni=this.getLayerFormat(Bn);if(ni==="vector"){this.layerGetFeatureAtCoordinates(Oe,Bn,e)&&En.push({format:ni,scope:this,coordinate:e});continue}else if(ni!=="wms"&&ni!=="wmts"){logger$F.log("[ERROR] DisplayFeatureInfo - layer format '"+ni+"' not allowed");continue}var ri=Oe.getView().getResolution(),si=null;ni==="wmts"?si=Bn.getSource().getFeatureInfoUrl.call(Bn.getSource(),e,ri,Oe.getView().getProjection(),{INFOFORMAT:ei}):si=Bn.getSource().getFeatureInfoUrl.call(Bn.getSource(),e,ri,Oe.getView().getProjection(),{INFO_FORMAT:ei}),En.push({format:ei,url:ProxyUtils.proxifyUrl(si,ke),scope:this,coordinate:e})}}var ai=null;function li(pi,vi,Ri){if(pi.length===0)return;var Fi=0;function di(ci){Fi++,ci||Fi===pi.length?Ri():vi(pi[Fi],di)}vi(pi[0],di)}var Pi=this;li(En,function(pi,vi){if(pi.format==="vector"){if(!ai){ai=[];for(var Ri=0;Ri<An.length;Ri++)for(var Fi=An[Ri],di=0;di<Ue[Fi].length;++di)ai.push(Ue[Fi][di].obj)}vi(pi.scope.displayVectorFeatureInfo(Oe,pi.coordinate,ai,Be))}else Gp.Protocols.XHR.call({url:pi.url,method:"GET",scope:pi.scope,onResponse:function(ci){var Mi=!1;(ci.trim().length===0||ci.indexOf("ServiceExceptionReport")!==-1||ci.indexOf("java.lang.NullPointerException")!==-1||ci.indexOf("java.lang.OutOfMemoryError")!==-1||ci.indexOf("not queryable")!==-1)&&(Mi=!0);var Oi=!Mi&&Pi.displayInfo(Oe,pi.coordinate,ci,"text/html",Be);vi(Oi)},onFailure:function(ci){logger$F.log(ci),vi(!1)}})},function(){logger$F.trace("Finish sync to GFI !")})},getPosition:function(Oe,e){if(Oe.coordinate)return Oe.coordinate;var Te=[0,0];if(Oe.offsetX||Oe.offsetY)Te[0]=Oe.offsetX,Te[1]=Oe.offsetY;else if(Oe.pointerType==="touch"){var ke=Oe.pointers[0];Te[0]=ke.pageX,Te[1]=ke.pageY}var Be=e.getCoordinateFromPixel(Te);return Be},onDisplayFeatureInfo:function(Oe,e){if(e.isActive()){logger$F.trace(Oe);var Te=e.getMap();if(Oe.type==="contextmenu"||Oe.type==="dblclick")Oe.preventDefault();else if(Oe.type==="singleclick"){for(var ke=Te.getInteractions().getArray(),Be=0;Be<ke.length;Be++)if(ke[Be].getActive()&&(ke[Be]instanceof Select||ke[Be]instanceof Modify||ke[Be]instanceof Draw))return}var Ue={};e._proxyUrl&&(Ue.proxyUrl=e._proxyUrl),e._noProxyDomains&&(Ue.noProxyDomains=e._noProxyDomains);var He={};e._autoPan&&(He.autoPan=e._autoPan),e._autoPanAnimation&&(He.autoPanAnimation=e._autoPanAnimation),e._autoPanMargin&&(He.autoPanMargin=e._autoPanMargin);for(var We=[],Cn=0;Cn<e._layers.length;++Cn){var En=e._layers[Cn].event?e._layers[Cn].event:e._defaultEvent;if(En===Oe.type){var An=We.push(e._layers[Cn])-1;We[An].infoFormat||(We[An].infoFormat=e._defaultInfoFormat)}}var Sn=this.getPosition(Oe,Te);this.displayFeatureInfo(Te,Sn,We,Ue,He)}}};window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=Gfi:window.ol.gp={GfiUtils:Gfi});class Control extends BaseObject{constructor(e){super();const Te=e.element;Te&&!e.target&&!Te.style.pointerEvents&&(Te.style.pointerEvents="auto"),this.element=Te||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var Te;this.map_&&((Te=this.element)==null||Te.remove());for(let ke=0,Be=this.listenerKeys.length;ke<Be;++ke)unlistenByKey(this.listenerKeys[ke]);if(this.listenerKeys.length=0,this.map_=e,e){const ke=this.target_??e.getOverlayContainerStopEvent();this.element&&ke.appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var Helper={detectSupport:function(){var Oe=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(Oe=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(Oe=!0),Oe},assign:function(Oe,e){Oe=Oe||{};for(var Te in e)e.hasOwnProperty(Te)&&(Oe[Te]=e[Te]);return Oe},mergeParams:function(Oe,e,Te){if(!(typeof Oe>"u"||typeof e>"u")){typeof Te>"u"&&(Te=!0);for(var ke in e)e.hasOwnProperty(ke)&&(typeof e[ke]=="object"?Oe.hasOwnProperty(ke)?this.mergeParams(Oe[ke],e[ke],Te):Oe[ke]=e[ke]:Oe.hasOwnProperty(ke)?Te&&(Oe[ke]=e[ke]):Oe[ke]=e[ke])}}},logger$E=LoggerByDefault.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(Oe,e){logger$E.trace("unset()");var Te={};Helper.mergeParams(Te,this._options),Helper.mergeParams(Te,e);for(var ke=Oe.getInteractions().getArray(),Be=0;Be<ke.length;Be++)if(ke[Be].getActive()&&(ke[Be]instanceof Draw||ke[Be]instanceof Select||ke[Be]instanceof Modify)){var Ue=ke[Be].getProperties(),He=Ue.name;if(typeof He<"u"&&this._extensions.indexOf(He)>-1){if(Te.current&&Te.current===He)continue;ke[Be].setActive(!1);var We=Ue.source;if(typeof We<"u"&&We instanceof Control){for(var Cn in Te)if(Te.hasOwnProperty(Cn)){if(Cn==="current")continue;if(typeof We[Cn]=="function"){var En=Array.isArray(Te[Cn])?Te[Cn]:[Te[Cn]];We[Cn].apply(We,En)}}}}else ke[Be].setActive(!1)}}},Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};const XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance";function createElementNS(Oe,e){return getDocument().createElementNS(Oe,e)}function getAllTextContent(Oe,e){return getAllTextContent_(Oe,e,[]).join("")}function getAllTextContent_(Oe,e,Te){if(Oe.nodeType==Node.CDATA_SECTION_NODE||Oe.nodeType==Node.TEXT_NODE)Te.push(Oe.nodeValue);else{let ke;for(ke=Oe.firstChild;ke;ke=ke.nextSibling)getAllTextContent_(ke,e,Te)}return Te}function isDocument(Oe){return"documentElement"in Oe}function parse$1(Oe){return new DOMParser().parseFromString(Oe,"application/xml")}function makeArrayExtender(Oe,e){return function(Te,ke){const Be=Oe.call(e??this,Te,ke);if(Be!==void 0){const Ue=ke[ke.length-1];extend$4(Ue,Be)}}}function makeArrayPusher(Oe,e){return function(Te,ke){const Be=Oe.call(e??this,Te,ke);Be!==void 0&&ke[ke.length-1].push(Be)}}function makeReplacer(Oe,e){return function(Te,ke){const Be=Oe.call(this,Te,ke);Be!==void 0&&(ke[ke.length-1]=Be)}}function makeObjectPropertyPusher(Oe,e,Te){return function(ke,Be){const Ue=Oe.call(this,ke,Be);if(Ue!==void 0){const He=Be[Be.length-1],We=ke.localName;let Cn;We in He?Cn=He[We]:(Cn=[],He[We]=Cn),Cn.push(Ue)}}}function makeObjectPropertySetter(Oe,e,Te){return function(ke,Be){const Ue=Oe.call(this,ke,Be);if(Ue!==void 0){const He=Be[Be.length-1],We=e!==void 0?e:ke.localName;He[We]=Ue}}}function makeChildAppender(Oe,e){return function(Te,ke,Be){Oe.call(this,Te,ke,Be),Be[Be.length-1].node.appendChild(Te)}}function makeArraySerializer(Oe,e){let Te,ke;return function(Be,Ue,He){if(Te===void 0){Te={};const We={};We[Be.localName]=Oe,Te[Be.namespaceURI]=We,ke=makeSimpleNodeFactory(Be.localName)}serialize(Te,ke,Ue,He)}}function makeSimpleNodeFactory(Oe,e){return function(Te,ke,Be){const He=ke[ke.length-1].node;let We=Oe;We===void 0&&(We=Be);const Cn=He.namespaceURI;return createElementNS(Cn,We)}}const OBJECT_PROPERTY_NODE_FACTORY=makeSimpleNodeFactory();function makeSequence(Oe,e){const Te=e.length,ke=new Array(Te);for(let Be=0;Be<Te;++Be)ke[Be]=Oe[e[Be]];return ke}function makeStructureNS(Oe,e,Te){Te=Te!==void 0?Te:{};let ke,Be;for(ke=0,Be=Oe.length;ke<Be;++ke)Te[Oe[ke]]=e;return Te}function parseNode(Oe,e,Te,ke){let Be;for(Be=e.firstElementChild;Be;Be=Be.nextElementSibling){const Ue=Oe[Be.namespaceURI];if(Ue!==void 0){const He=Ue[Be.localName];He!==void 0&&He.call(ke,Be,Te)}}}function pushParseAndPop(Oe,e,Te,ke,Be){return ke.push(Oe),parseNode(e,Te,ke,Be),ke.pop()}function serialize(Oe,e,Te,ke,Be,Ue){const He=(Be!==void 0?Be:Te).length;let We,Cn;for(let En=0;En<He;++En)We=Te[En],We!==void 0&&(Cn=e.call(Ue,We,ke,Be!==void 0?Be[En]:void 0),Cn!==void 0&&Oe[Cn.namespaceURI][Cn.localName].call(Ue,Cn,We,ke))}function pushSerializeAndPop(Oe,e,Te,ke,Be,Ue,He){return Be.push(Oe),serialize(e,Te,ke,Be,Ue,He),Be.pop()}let xmlSerializer_;function getXMLSerializer(){return xmlSerializer_===void 0&&typeof XMLSerializer<"u"&&(xmlSerializer_=new XMLSerializer),xmlSerializer_}let document_;function getDocument(){return document_===void 0&&typeof document<"u"&&(document_=document.implementation.createDocument("","",null)),document_}class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,Te){if(Te){let ke=Te.dataProjection?get$3(Te.dataProjection):this.readProjection(e);Te.extent&&ke&&ke.getUnits()==="tile-pixels"&&(ke=get$3(ke),ke.setWorldExtent(Te.extent)),Te={dataProjection:ke,featureProjection:Te.featureProjection}}return this.adaptOptions(Te)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,Te){return abstract()}readFeatures(e,Te){return abstract()}readGeometry(e,Te){return abstract()}readProjection(e){return abstract()}writeFeature(e,Te){return abstract()}writeFeatures(e,Te){return abstract()}writeGeometry(e,Te){return abstract()}}function transformGeometryWithOptions(Oe,e,Te){const ke=Te?get$3(Te.featureProjection):null,Be=Te?get$3(Te.dataProjection):null;let Ue=Oe;if(ke&&Be&&!equivalent$1(ke,Be)){e&&(Ue=Oe.clone());const He=e?ke:Be,We=e?Be:ke;He.getUnits()==="tile-pixels"?Ue.transform(He,We):Ue.applyTransform(getTransform(He,We))}if(e&&Te&&Te.decimals!==void 0){const He=Math.pow(10,Te.decimals),We=function(Cn){for(let En=0,An=Cn.length;En<An;++En)Cn[En]=Math.round(Cn[En]*He)/He;return Cn};Ue===Oe&&(Ue=Oe.clone()),Ue.applyTransform(We)}return Ue}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(Oe,e,Te){return Array.isArray(e[0])?(linearRingssAreOriented(Oe,0,e,Te)||(Oe=Oe.slice(),orientLinearRingsArray(Oe,0,e,Te)),Oe):(linearRingsAreOriented(Oe,0,e,Te)||(Oe=Oe.slice(),orientLinearRings(Oe,0,e,Te)),Oe)}function createRenderFeature(Oe,e){var Ue;const Te=Oe.geometry;if(!Te)return[];if(Array.isArray(Te))return Te.map(He=>createRenderFeature({...Oe,geometry:He})).flat();const ke=Te.type==="MultiPolygon"?"Polygon":Te.type;if(ke==="GeometryCollection"||ke==="Circle")throw new Error("Unsupported geometry type: "+ke);const Be=Te.layout.length;return transformGeometryWithOptions(new RenderFeature(ke,ke==="Polygon"?orientFlatCoordinates(Te.flatCoordinates,Te.ends,Be):Te.flatCoordinates,(Ue=Te.ends)==null?void 0:Ue.flat(),Be,Oe.properties||{},Oe.id).enableSimplifyTransformed(),!1,e)}function createGeometry(Oe,e){if(!Oe)return null;if(Array.isArray(Oe)){const ke=Oe.map(Be=>createGeometry(Be,e));return new GeometryCollection(ke)}const Te=GeometryConstructor[Oe.type];return transformGeometryWithOptions(new Te(Oe.flatCoordinates,Oe.layout||"XY",Oe.ends),!1,e)}class XMLFeature extends FeatureFormat{constructor(){super(),this.xmlSerializer_=getXMLSerializer()}getType(){return"xml"}readFeature(e,Te){if(!e)return null;if(typeof e=="string"){const ke=parse$1(e);return this.readFeatureFromDocument(ke,Te)}return isDocument(e)?this.readFeatureFromDocument(e,Te):this.readFeatureFromNode(e,Te)}readFeatureFromDocument(e,Te){const ke=this.readFeaturesFromDocument(e,Te);return ke.length>0?ke[0]:null}readFeatureFromNode(e,Te){return null}readFeatures(e,Te){if(!e)return[];if(typeof e=="string"){const ke=parse$1(e);return this.readFeaturesFromDocument(ke,Te)}return isDocument(e)?this.readFeaturesFromDocument(e,Te):this.readFeaturesFromNode(e,Te)}readFeaturesFromDocument(e,Te){const ke=[];for(let Be=e.firstChild;Be;Be=Be.nextSibling)Be.nodeType==Node.ELEMENT_NODE&&extend$4(ke,this.readFeaturesFromNode(Be,Te));return ke}readFeaturesFromNode(e,Te){return abstract()}readGeometry(e,Te){if(!e)return null;if(typeof e=="string"){const ke=parse$1(e);return this.readGeometryFromDocument(ke,Te)}return isDocument(e)?this.readGeometryFromDocument(e,Te):this.readGeometryFromNode(e,Te)}readGeometryFromDocument(e,Te){return null}readGeometryFromNode(e,Te){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const Te=parse$1(e);return this.readProjectionFromDocument(Te)}return isDocument(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,Te){const ke=this.writeFeatureNode(e,Te);return this.xmlSerializer_.serializeToString(ke)}writeFeatureNode(e,Te){return null}writeFeatures(e,Te){const ke=this.writeFeaturesNode(e,Te);return this.xmlSerializer_.serializeToString(ke)}writeFeaturesNode(e,Te){return null}writeGeometry(e,Te){const ke=this.writeGeometryNode(e,Te);return this.xmlSerializer_.serializeToString(ke)}writeGeometryNode(e,Te){return null}}function readBoolean(Oe){const e=getAllTextContent(Oe,!1);return readBooleanString(e)}function readBooleanString(Oe){const e=/^\s*(true|1)|(false|0)\s*$/.exec(Oe);if(e)return e[1]!==void 0||!1}function readDateTime(Oe){const e=getAllTextContent(Oe,!1),Te=Date.parse(e);return isNaN(Te)?void 0:Te/1e3}function readDecimal(Oe){const e=getAllTextContent(Oe,!1);return readDecimalString(e)}function readDecimalString(Oe){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(Oe);if(e)return parseFloat(e[1])}function readPositiveInteger(Oe){const e=getAllTextContent(Oe,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(Oe){const e=/^\s*(\d+)\s*$/.exec(Oe);if(e)return parseInt(e[1],10)}function readString(Oe){return getAllTextContent(Oe,!1).trim()}function writeBooleanTextNode(Oe,e){writeStringTextNode(Oe,e?"1":"0")}function writeCDATASection(Oe,e){Oe.appendChild(getDocument().createCDATASection(e))}function writeDateTimeTextNode(Oe,e){const Te=new Date(e*1e3),ke=Te.getUTCFullYear()+"-"+padNumber(Te.getUTCMonth()+1,2)+"-"+padNumber(Te.getUTCDate(),2)+"T"+padNumber(Te.getUTCHours(),2)+":"+padNumber(Te.getUTCMinutes(),2)+":"+padNumber(Te.getUTCSeconds(),2)+"Z";Oe.appendChild(getDocument().createTextNode(ke))}function writeDecimalTextNode(Oe,e){const Te=e.toPrecision();Oe.appendChild(getDocument().createTextNode(Te))}function writeNonNegativeIntegerTextNode(Oe,e){const Te=e.toString();Oe.appendChild(getDocument().createTextNode(Te))}const whiteSpaceStart=/^\s/,whiteSpaceEnd=/\s$/,cdataCharacters=/(\n|\t|\r|<|&| {2})/;function writeStringTextNode(Oe,e){typeof e=="string"&&(whiteSpaceStart.test(e)||whiteSpaceEnd.test(e)||cdataCharacters.test(e))?e.split("]]>").forEach((Te,ke,Be)=>{ke<Be.length-1&&(Te+="]]"),ke>0&&(Te=">"+Te),writeCDATASection(Oe,Te)}):Oe.appendChild(getDocument().createTextNode(e))}const GX_NAMESPACE_URIS=["http://www.google.com/kml/ext/2.2"],NAMESPACE_URIS$4=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],SCHEMA_LOCATION$1="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",ICON_ANCHOR_UNITS_MAP={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},PLACEMARK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,MultiGeometry:makeObjectPropertySetter(readMultiGeometry,"geometry"),LineString:makeObjectPropertySetter(readLineString,"geometry"),LinearRing:makeObjectPropertySetter(readLinearRing,"geometry"),Point:makeObjectPropertySetter(readPoint,"geometry"),Polygon:makeObjectPropertySetter(readPolygon,"geometry"),Style:makeObjectPropertySetter(readStyle$2),StyleMap:placemarkStyleMapParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL),visibility:makeObjectPropertySetter(readBoolean)},makeStructureNS(GX_NAMESPACE_URIS,{MultiTrack:makeObjectPropertySetter(readGxMultiTrack,"geometry"),Track:makeObjectPropertySetter(readGxTrack,"geometry")})),NETWORK_LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,Link:linkParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),visibility:makeObjectPropertySetter(readBoolean)}),LINK_PARSERS$1=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)}),CAMERA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Altitude:makeObjectPropertySetter(readDecimal),Longitude:makeObjectPropertySetter(readDecimal),Latitude:makeObjectPropertySetter(readDecimal),Tilt:makeObjectPropertySetter(readDecimal),AltitudeMode:makeObjectPropertySetter(readString),Heading:makeObjectPropertySetter(readDecimal),Roll:makeObjectPropertySetter(readDecimal)}),REGION_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LatLonAltBox:latLonAltBoxParser,Lod:lodParser}),KML_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["Document","Placemark"]),KML_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Document:makeChildAppender(writeDocument),Placemark:makeChildAppender(writePlacemark)});let DEFAULT_COLOR,DEFAULT_FILL_STYLE=null,DEFAULT_IMAGE_STYLE_ANCHOR,DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,DEFAULT_IMAGE_STYLE_SIZE,DEFAULT_IMAGE_STYLE_SRC,DEFAULT_IMAGE_STYLE=null,DEFAULT_NO_IMAGE_STYLE,DEFAULT_STROKE_STYLE=null,DEFAULT_TEXT_STROKE_STYLE,DEFAULT_TEXT_STYLE=null,DEFAULT_STYLE$1=null,DEFAULT_STYLE_ARRAY=null;function scaleForSize(Oe){return 32/Math.min(Oe[0],Oe[1])}function createStyleDefaults(){DEFAULT_COLOR=[255,255,255,1],DEFAULT_FILL_STYLE=new Fill({color:DEFAULT_COLOR}),DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels",DEFAULT_IMAGE_STYLE_SIZE=[64,64],DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",DEFAULT_IMAGE_STYLE=new Icon({anchor:DEFAULT_IMAGE_STYLE_ANCHOR,anchorOrigin:"bottom-left",anchorXUnits:DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,anchorYUnits:DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,crossOrigin:"anonymous",rotation:0,scale:scaleForSize(DEFAULT_IMAGE_STYLE_SIZE),size:DEFAULT_IMAGE_STYLE_SIZE,src:DEFAULT_IMAGE_STYLE_SRC}),DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",DEFAULT_STROKE_STYLE=new Stroke({color:DEFAULT_COLOR,width:1}),DEFAULT_TEXT_STROKE_STYLE=new Stroke({color:[51,51,51,1],width:2}),DEFAULT_TEXT_STYLE=new Text({font:"bold 16px Helvetica",fill:DEFAULT_FILL_STYLE,stroke:DEFAULT_TEXT_STROKE_STYLE,scale:.8}),DEFAULT_STYLE$1=new Style$1({fill:DEFAULT_FILL_STYLE,image:DEFAULT_IMAGE_STYLE,text:DEFAULT_TEXT_STYLE,stroke:DEFAULT_STROKE_STYLE,zIndex:0}),DEFAULT_STYLE_ARRAY=[DEFAULT_STYLE$1]}let TEXTAREA;function defaultIconUrlFunction(Oe){return Oe}let KML$1=class extends XMLFeature{constructor(e){super(),e=e||{},DEFAULT_STYLE_ARRAY||createStyleDefaults(),this.dataProjection=get$3("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:DEFAULT_STYLE_ARRAY,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:defaultIconUrlFunction,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,Te){const ke=makeStructureNS(NAMESPACE_URIS$4,{Document:makeArrayExtender(this.readDocumentOrFolder_,this),Folder:makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),Be=pushParseAndPop([],ke,e,Te,this);if(Be)return Be}readPlacemark_(e,Te){const ke=pushParseAndPop({geometry:null},PLACEMARK_PARSERS,e,Te,this);if(!ke)return;const Be=new Feature,Ue=e.getAttribute("id");Ue!==null&&Be.setId(Ue);const He=Te[0],We=ke.geometry;if(We&&transformGeometryWithOptions(We,!1,He),Be.setGeometry(We),delete ke.geometry,this.extractStyles_){const Cn=ke.Style,En=ke.styleUrl,An=createFeatureStyleFunction(Cn,En,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);Be.setStyle(An)}return delete ke.Style,Be.setProperties(ke,!0),Be}readSharedStyle_(e,Te){const ke=e.getAttribute("id");if(ke!==null){const Be=readStyle$2.call(this,e,Te);if(Be){let Ue,He=e.baseURI;(!He||He=="about:blank")&&(He=window.location.href),He?Ue=new URL("#"+ke,He).href:Ue="#"+ke,this.sharedStyles_[Ue]=Be}}}readSharedStyleMap_(e,Te){const ke=e.getAttribute("id");if(ke===null)return;const Be=readStyleMapValue.call(this,e,Te);if(!Be)return;let Ue,He=e.baseURI;(!He||He=="about:blank")&&(He=window.location.href),He?Ue=new URL("#"+ke,He).href:Ue="#"+ke,this.sharedStyles_[Ue]=Be}readFeatureFromNode(e,Te){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return null;const ke=this.readPlacemark_(e,[this.getReadOptions(e,Te)]);return ke||null}readFeaturesFromNode(e,Te){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return[];let ke;const Be=e.localName;if(Be=="Document"||Be=="Folder")return ke=this.readDocumentOrFolder_(e,[this.getReadOptions(e,Te)]),ke||[];if(Be=="Placemark"){const Ue=this.readPlacemark_(e,[this.getReadOptions(e,Te)]);return Ue?[Ue]:[]}if(Be=="kml"){ke=[];for(let Ue=e.firstElementChild;Ue;Ue=Ue.nextElementSibling){const He=this.readFeaturesFromNode(Ue,Te);He&&extend$4(ke,He)}return ke}return[]}readName(e){if(e){if(typeof e=="string"){const Te=parse$1(e);return this.readNameFromDocument(Te)}return isDocument(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let Te=e.firstChild;Te;Te=Te.nextSibling)if(Te.nodeType==Node.ELEMENT_NODE){const ke=this.readNameFromNode(Te);if(ke)return ke}}readNameFromNode(e){for(let Te=e.firstElementChild;Te;Te=Te.nextElementSibling)if(NAMESPACE_URIS$4.includes(Te.namespaceURI)&&Te.localName=="name")return readString(Te);for(let Te=e.firstElementChild;Te;Te=Te.nextElementSibling){const ke=Te.localName;if(NAMESPACE_URIS$4.includes(Te.namespaceURI)&&(ke=="Document"||ke=="Folder"||ke=="Placemark"||ke=="kml")){const Be=this.readNameFromNode(Te);if(Be)return Be}}}readNetworkLinks(e){const Te=[];if(typeof e=="string"){const ke=parse$1(e);extend$4(Te,this.readNetworkLinksFromDocument(ke))}else isDocument(e)?extend$4(Te,this.readNetworkLinksFromDocument(e)):extend$4(Te,this.readNetworkLinksFromNode(e));return Te}readNetworkLinksFromDocument(e){const Te=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType==Node.ELEMENT_NODE&&extend$4(Te,this.readNetworkLinksFromNode(ke));return Te}readNetworkLinksFromNode(e){const Te=[];for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling)if(NAMESPACE_URIS$4.includes(ke.namespaceURI)&&ke.localName=="NetworkLink"){const Be=pushParseAndPop({},NETWORK_LINK_PARSERS,ke,[]);Te.push(Be)}for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Be=ke.localName;NAMESPACE_URIS$4.includes(ke.namespaceURI)&&(Be=="Document"||Be=="Folder"||Be=="kml")&&extend$4(Te,this.readNetworkLinksFromNode(ke))}return Te}readRegion(e){const Te=[];if(typeof e=="string"){const ke=parse$1(e);extend$4(Te,this.readRegionFromDocument(ke))}else isDocument(e)?extend$4(Te,this.readRegionFromDocument(e)):extend$4(Te,this.readRegionFromNode(e));return Te}readRegionFromDocument(e){const Te=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType==Node.ELEMENT_NODE&&extend$4(Te,this.readRegionFromNode(ke));return Te}readRegionFromNode(e){const Te=[];for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling)if(NAMESPACE_URIS$4.includes(ke.namespaceURI)&&ke.localName=="Region"){const Be=pushParseAndPop({},REGION_PARSERS,ke,[]);Te.push(Be)}for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Be=ke.localName;NAMESPACE_URIS$4.includes(ke.namespaceURI)&&(Be=="Document"||Be=="Folder"||Be=="kml")&&extend$4(Te,this.readRegionFromNode(ke))}return Te}readCamera(e){const Te=[];if(typeof e=="string"){const ke=parse$1(e);extend$4(Te,this.readCameraFromDocument(ke))}else isDocument(e)?extend$4(Te,this.readCameraFromDocument(e)):extend$4(Te,this.readCameraFromNode(e));return Te}readCameraFromDocument(e){const Te=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType===Node.ELEMENT_NODE&&extend$4(Te,this.readCameraFromNode(ke));return Te}readCameraFromNode(e){const Te=[];for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling)if(NAMESPACE_URIS$4.includes(ke.namespaceURI)&&ke.localName==="Camera"){const Be=pushParseAndPop({},CAMERA_PARSERS,ke,[]);Te.push(Be)}for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Be=ke.localName;NAMESPACE_URIS$4.includes(ke.namespaceURI)&&(Be==="Document"||Be==="Folder"||Be==="Placemark"||Be==="kml")&&extend$4(Te,this.readCameraFromNode(ke))}return Te}writeFeaturesNode(e,Te){Te=this.adaptOptions(Te);const ke=createElementNS(NAMESPACE_URIS$4[4],"kml"),Be="http://www.w3.org/2000/xmlns/";ke.setAttributeNS(Be,"xmlns:gx",GX_NAMESPACE_URIS[0]),ke.setAttributeNS(Be,"xmlns:xsi",XML_SCHEMA_INSTANCE_URI),ke.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION$1);const Ue={node:ke},He={};e.length>1?He.Document=e:e.length==1&&(He.Placemark=e[0]);const We=KML_SEQUENCE[ke.namespaceURI],Cn=makeSequence(He,We);return pushSerializeAndPop(Ue,KML_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Cn,[Te],We,this),ke}};function createNameStyleFunction(Oe,e){const Te=[0,0];let ke="start";const Be=Oe.getImage();if(Be){const We=Be.getSize();if(We&&We.length==2){const Cn=Be.getScaleArray(),En=Be.getAnchor();Te[0]=Cn[0]*(We[0]-En[0]),Te[1]=Cn[1]*(We[1]/2-En[1]),ke="left"}}let Ue=Oe.getText();return Ue?(Ue=Ue.clone(),Ue.setFont(Ue.getFont()||DEFAULT_TEXT_STYLE.getFont()),Ue.setScale(Ue.getScale()||DEFAULT_TEXT_STYLE.getScale()),Ue.setFill(Ue.getFill()||DEFAULT_TEXT_STYLE.getFill()),Ue.setStroke(Ue.getStroke()||DEFAULT_TEXT_STROKE_STYLE)):Ue=DEFAULT_TEXT_STYLE.clone(),Ue.setText(e),Ue.setOffsetX(Te[0]),Ue.setOffsetY(Te[1]),Ue.setTextAlign(ke),new Style$1({image:Be,text:Ue})}function createFeatureStyleFunction(Oe,e,Te,ke,Be){return function(Ue,He){let We=Be,Cn="",En=[];if(We){const Sn=Ue.getGeometry();if(Sn)if(Sn instanceof GeometryCollection)En=Sn.getGeometriesArrayRecursive().filter(function(Tn){const Ln=Tn.getType();return Ln==="Point"||Ln==="MultiPoint"}),We=En.length>0;else{const Tn=Sn.getType();We=Tn==="Point"||Tn==="MultiPoint"}}We&&(Cn=Ue.get("name"),We=We&&!!Cn,We&&/&[^&]+;/.test(Cn)&&(TEXTAREA||(TEXTAREA=document.createElement("textarea")),TEXTAREA.innerHTML=Cn,Cn=TEXTAREA.value));let An=Te;if(Oe?An=Oe:e&&(An=findStyle(e,Te,ke)),We){const Sn=createNameStyleFunction(An[0],Cn);if(En.length>0){Sn.setGeometry(new GeometryCollection(En));const Tn=new Style$1({geometry:An[0].getGeometry(),image:null,fill:An[0].getFill(),stroke:An[0].getStroke(),text:null});return[Sn,Tn].concat(An.slice(1))}return Sn}return An}}function findStyle(Oe,e,Te){return Array.isArray(Oe)?Oe:typeof Oe=="string"?findStyle(Te[Oe],e,Te):e}function readColor(Oe){const e=getAllTextContent(Oe,!1),Te=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(Te){const ke=Te[1];return[parseInt(ke.substr(6,2),16),parseInt(ke.substr(4,2),16),parseInt(ke.substr(2,2),16),parseInt(ke.substr(0,2),16)/255]}}function readFlatCoordinates(Oe){let e=getAllTextContent(Oe,!1);const Te=[];e=e.replace(/\s*,\s*/g,",");const ke=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let Be;for(;Be=ke.exec(e);){const Ue=parseFloat(Be[1]),He=parseFloat(Be[2]),We=Be[3]?parseFloat(Be[3]):0;Te.push(Ue,He,We),e=e.substr(Be[0].length)}if(e==="")return Te}function readURI(Oe){const e=getAllTextContent(Oe,!1).trim();let Te=Oe.baseURI;return(!Te||Te=="about:blank")&&(Te=window.location.href),Te?new URL(e,Te).href:e}function readStyleURL(Oe){const e=getAllTextContent(Oe,!1).trim().replace(/^(?!.*#)/,"#");let Te=Oe.baseURI;return(!Te||Te=="about:blank")&&(Te=window.location.href),Te?new URL(e,Te).href:e}function readVec2(Oe){const e=Oe.getAttribute("xunits"),Te=Oe.getAttribute("yunits");let ke;return e!=="insetPixels"?Te!=="insetPixels"?ke="bottom-left":ke="top-left":Te!=="insetPixels"?ke="bottom-right":ke="top-right",{x:parseFloat(Oe.getAttribute("x")),xunits:ICON_ANCHOR_UNITS_MAP[e],y:parseFloat(Oe.getAttribute("y")),yunits:ICON_ANCHOR_UNITS_MAP[Te],origin:ke}}function readScale(Oe){return readDecimal(Oe)}const STYLE_MAP_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Pair:pairDataParser});function readStyleMapValue(Oe,e){return pushParseAndPop(void 0,STYLE_MAP_PARSERS,Oe,e,this)}const ICON_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeObjectPropertySetter(readIcon),color:makeObjectPropertySetter(readColor),heading:makeObjectPropertySetter(readDecimal),hotSpot:makeObjectPropertySetter(readVec2),scale:makeObjectPropertySetter(readScale)});function iconStyleParser(Oe,e){const Te=pushParseAndPop({},ICON_STYLE_PARSERS,Oe,e);if(!Te)return;const ke=e[e.length-1],Be="Icon"in Te?Te.Icon:{},Ue=!("Icon"in Te)||Object.keys(Be).length>0;let He;const We=Be.href;We?He=We:Ue&&(He=DEFAULT_IMAGE_STYLE_SRC);let Cn,En,An,Sn="bottom-left";const Tn=Te.hotSpot;Tn?(Cn=[Tn.x,Tn.y],En=Tn.xunits,An=Tn.yunits,Sn=Tn.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(He)&&(He.includes("pushpin")?(Cn=DEFAULT_IMAGE_STYLE_ANCHOR,En=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,An=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):He.includes("arrow-reverse")?(Cn=[54,42],En=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,An=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):He.includes("paddle")&&(Cn=[32,1],En=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,An=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS));let Ln;const Bn=Be.x,ei=Be.y;Bn!==void 0&&ei!==void 0&&(Ln=[Bn,ei]);let ti;const ni=Be.w,ri=Be.h;ni!==void 0&&ri!==void 0&&(ti=[ni,ri]);let si;const ai=Te.heading;ai!==void 0&&(si=toRadians(ai));const li=Te.scale,Pi=Te.color;if(Ue){He==DEFAULT_IMAGE_STYLE_SRC&&(ti=DEFAULT_IMAGE_STYLE_SIZE);const pi=new Icon({anchor:Cn,anchorOrigin:Sn,anchorXUnits:En,anchorYUnits:An,crossOrigin:this.crossOrigin_,offset:Ln,offsetOrigin:"bottom-left",rotation:si,scale:li,size:ti,src:this.iconUrlFunction_(He),color:Pi}),vi=pi.getScaleArray()[0],Ri=pi.getSize();if(Ri===null){const Fi=pi.getImageState();if(Fi===ImageState.IDLE||Fi===ImageState.LOADING){const di=function(){const ci=pi.getImageState();if(!(ci===ImageState.IDLE||ci===ImageState.LOADING)){const Mi=pi.getSize();if(Mi&&Mi.length==2){const Oi=scaleForSize(Mi);pi.setScale(vi*Oi)}pi.unlistenImageChange(di)}};pi.listenImageChange(di),Fi===ImageState.IDLE&&pi.load()}}else if(Ri.length==2){const Fi=scaleForSize(Ri);pi.setScale(vi*Fi)}ke.imageStyle=pi}else ke.imageStyle=DEFAULT_NO_IMAGE_STYLE}const LABEL_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),scale:makeObjectPropertySetter(readScale)});function labelStyleParser(Oe,e){const Te=pushParseAndPop({},LABEL_STYLE_PARSERS,Oe,e);if(!Te)return;const ke=e[e.length-1],Be=new Text({fill:new Fill({color:"color"in Te?Te.color:DEFAULT_COLOR}),scale:Te.scale});ke.textStyle=Be}const LINE_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),width:makeObjectPropertySetter(readDecimal)});function lineStyleParser(Oe,e){const Te=pushParseAndPop({},LINE_STYLE_PARSERS,Oe,e);if(!Te)return;const ke=e[e.length-1],Be=new Stroke({color:"color"in Te?Te.color:DEFAULT_COLOR,width:"width"in Te?Te.width:1});ke.strokeStyle=Be}const POLY_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),fill:makeObjectPropertySetter(readBoolean),outline:makeObjectPropertySetter(readBoolean)});function polyStyleParser(Oe,e){const Te=pushParseAndPop({},POLY_STYLE_PARSERS,Oe,e);if(!Te)return;const ke=e[e.length-1],Be=new Fill({color:"color"in Te?Te.color:DEFAULT_COLOR});ke.fillStyle=Be;const Ue=Te.fill;Ue!==void 0&&(ke.fill=Ue);const He=Te.outline;He!==void 0&&(ke.outline=He)}const FLAT_LINEAR_RING_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatLinearRing(Oe,e){return pushParseAndPop(null,FLAT_LINEAR_RING_PARSERS,Oe,e)}function gxCoordParser(Oe,e){const ke=e[e.length-1].coordinates,Be=getAllTextContent(Oe,!1),He=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(Be);if(He){const We=parseFloat(He[1]),Cn=parseFloat(He[2]),En=parseFloat(He[3]);ke.push([We,Cn,En])}else ke.push([])}const GX_MULTITRACK_GEOMETRY_PARSERS=makeStructureNS(GX_NAMESPACE_URIS,{Track:makeArrayPusher(readGxTrack)});function readGxMultiTrack(Oe,e){const Te=pushParseAndPop([],GX_MULTITRACK_GEOMETRY_PARSERS,Oe,e);if(Te)return new MultiLineString(Te)}const GX_TRACK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{when:whenParser},makeStructureNS(GX_NAMESPACE_URIS,{coord:gxCoordParser}));function readGxTrack(Oe,e){const Te=pushParseAndPop({coordinates:[],whens:[]},GX_TRACK_PARSERS,Oe,e);if(!Te)return;const ke=[],Be=Te.coordinates,Ue=Te.whens;for(let He=0,We=Math.min(Be.length,Ue.length);He<We;++He)Be[He].length==3&&ke.push(Be[He][0],Be[He][1],Be[He][2],Ue[He]);return new LineString(ke,"XYZM")}const ICON_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeObjectPropertySetter(readDecimal),y:makeObjectPropertySetter(readDecimal),w:makeObjectPropertySetter(readDecimal),h:makeObjectPropertySetter(readDecimal)}));function readIcon(Oe,e){const Te=pushParseAndPop({},ICON_PARSERS,Oe,e);return Te||null}const GEOMETRY_FLAT_COORDINATES_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatCoordinatesFromNode(Oe,e){return pushParseAndPop(null,GEOMETRY_FLAT_COORDINATES_PARSERS,Oe,e)}const EXTRUDE_AND_ALTITUDE_MODE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeObjectPropertySetter(readBoolean),tessellate:makeObjectPropertySetter(readBoolean),altitudeMode:makeObjectPropertySetter(readString)});function readLineString(Oe,e){const Te=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Oe,e),ke=readFlatCoordinatesFromNode(Oe,e);if(ke){const Be=new LineString(ke,"XYZ");return Be.setProperties(Te,!0),Be}}function readLinearRing(Oe,e){const Te=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Oe,e),ke=readFlatCoordinatesFromNode(Oe,e);if(ke){const Be=new Polygon(ke,"XYZ",[ke.length]);return Be.setProperties(Te,!0),Be}}const MULTI_GEOMETRY_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeArrayPusher(readLineString),LinearRing:makeArrayPusher(readLinearRing),MultiGeometry:makeArrayPusher(readMultiGeometry),Point:makeArrayPusher(readPoint),Polygon:makeArrayPusher(readPolygon)});function readMultiGeometry(Oe,e){const Te=pushParseAndPop([],MULTI_GEOMETRY_PARSERS,Oe,e);if(!Te)return null;if(Te.length===0)return new GeometryCollection(Te);let ke,Be=!0;const Ue=Te[0].getType();let He;for(let We=1,Cn=Te.length;We<Cn;++We)if(He=Te[We],He.getType()!=Ue){Be=!1;break}if(Be){let We,Cn;if(Ue=="Point"){const En=Te[0];We=En.getLayout(),Cn=En.getFlatCoordinates();for(let An=1,Sn=Te.length;An<Sn;++An)He=Te[An],extend$4(Cn,He.getFlatCoordinates());ke=new MultiPoint(Cn,We),setCommonGeometryProperties(ke,Te)}else if(Ue=="LineString")ke=new MultiLineString(Te),setCommonGeometryProperties(ke,Te);else if(Ue=="Polygon")ke=new MultiPolygon(Te),setCommonGeometryProperties(ke,Te);else if(Ue=="GeometryCollection"||Ue.startsWith("Multi"))ke=new GeometryCollection(Te);else throw new Error("Unknown geometry type found")}else ke=new GeometryCollection(Te);return ke}function readPoint(Oe,e){const Te=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Oe,e),ke=readFlatCoordinatesFromNode(Oe,e);if(ke){const Be=new Point$1(ke,"XYZ");return Be.setProperties(Te,!0),Be}}const FLAT_LINEAR_RINGS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{innerBoundaryIs:innerBoundaryIsParser,outerBoundaryIs:outerBoundaryIsParser});function readPolygon(Oe,e){const Te=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Oe,e),ke=pushParseAndPop([null],FLAT_LINEAR_RINGS_PARSERS,Oe,e);if(ke&&ke[0]){const Be=ke[0],Ue=[Be.length];for(let We=1,Cn=ke.length;We<Cn;++We)extend$4(Be,ke[We]),Ue.push(Be.length);const He=new Polygon(Be,"XYZ",Ue);return He.setProperties(Te,!0),He}}const STYLE_PARSERS$2=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:iconStyleParser,LabelStyle:labelStyleParser,LineStyle:lineStyleParser,PolyStyle:polyStyleParser});function readStyle$2(Oe,e){const Te=pushParseAndPop({},STYLE_PARSERS$2,Oe,e,this);if(!Te)return null;let ke="fillStyle"in Te?Te.fillStyle:DEFAULT_FILL_STYLE;const Be=Te.fill;Be!==void 0&&!Be&&(ke=null);let Ue;"imageStyle"in Te?Te.imageStyle!=DEFAULT_NO_IMAGE_STYLE&&(Ue=Te.imageStyle):Ue=DEFAULT_IMAGE_STYLE;const He="textStyle"in Te?Te.textStyle:DEFAULT_TEXT_STYLE,We="strokeStyle"in Te?Te.strokeStyle:DEFAULT_STROKE_STYLE,Cn=Te.outline;return Cn!==void 0&&!Cn?[new Style$1({geometry:function(En){const An=En.getGeometry(),Sn=An.getType();if(Sn==="GeometryCollection"){const Tn=An;return new GeometryCollection(Tn.getGeometriesArrayRecursive().filter(function(Ln){const Bn=Ln.getType();return Bn!=="Polygon"&&Bn!=="MultiPolygon"}))}if(Sn!=="Polygon"&&Sn!=="MultiPolygon")return An},fill:ke,image:Ue,stroke:We,text:He,zIndex:void 0}),new Style$1({geometry:function(En){const An=En.getGeometry(),Sn=An.getType();if(Sn==="GeometryCollection"){const Tn=An;return new GeometryCollection(Tn.getGeometriesArrayRecursive().filter(function(Ln){const Bn=Ln.getType();return Bn==="Polygon"||Bn==="MultiPolygon"}))}if(Sn==="Polygon"||Sn==="MultiPolygon")return An},fill:ke,stroke:null,zIndex:void 0})]:[new Style$1({fill:ke,image:Ue,stroke:We,text:He,zIndex:void 0})]}function setCommonGeometryProperties(Oe,e){const Te=e.length,ke=new Array(e.length),Be=new Array(e.length),Ue=new Array(e.length);let He,We,Cn;He=!1,We=!1,Cn=!1;for(let En=0;En<Te;++En){const An=e[En];ke[En]=An.get("extrude"),Be[En]=An.get("tessellate"),Ue[En]=An.get("altitudeMode"),He=He||ke[En]!==void 0,We=We||Be[En]!==void 0,Cn=Cn||Ue[En]}He&&Oe.set("extrude",ke),We&&Oe.set("tessellate",Be),Cn&&Oe.set("altitudeMode",Ue)}const DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{displayName:makeObjectPropertySetter(readString),value:makeObjectPropertySetter(readString)});function dataParser(Oe,e){const Te=Oe.getAttribute("name");parseNode(DATA_PARSERS,Oe,e);const ke=e[e.length-1];Te&&ke.displayName?ke[Te]={value:ke.value,displayName:ke.displayName,toString:function(){return ke.value}}:Te!==null?ke[Te]=ke.value:ke.displayName!==null&&(ke[ke.displayName]=ke.value),delete ke.value}const EXTENDED_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Data:dataParser,SchemaData:schemaDataParser});function extendedDataParser(Oe,e){parseNode(EXTENDED_DATA_PARSERS,Oe,e)}function regionParser(Oe,e){parseNode(REGION_PARSERS,Oe,e)}const PAIR_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Style:makeObjectPropertySetter(readStyle$2),key:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL)});function pairDataParser(Oe,e){const Te=pushParseAndPop({},PAIR_PARSERS,Oe,e,this);if(!Te)return;const ke=Te.key;if(ke&&ke=="normal"){const Be=Te.styleUrl;Be&&(e[e.length-1]=Be);const Ue=Te.Style;Ue&&(e[e.length-1]=Ue)}}function placemarkStyleMapParser(Oe,e){const Te=readStyleMapValue.call(this,Oe,e);if(!Te)return;const ke=e[e.length-1];if(Array.isArray(Te))ke.Style=Te;else if(typeof Te=="string")ke.styleUrl=Te;else throw new Error("`styleMapValue` has an unknown type")}const SCHEMA_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{SimpleData:simpleDataParser});function schemaDataParser(Oe,e){parseNode(SCHEMA_DATA_PARSERS,Oe,e)}function simpleDataParser(Oe,e){const Te=Oe.getAttribute("name");if(Te!==null){const ke=readString(Oe),Be=e[e.length-1];Be[Te]=ke}}const LAT_LON_ALT_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{altitudeMode:makeObjectPropertySetter(readString),minAltitude:makeObjectPropertySetter(readDecimal),maxAltitude:makeObjectPropertySetter(readDecimal),north:makeObjectPropertySetter(readDecimal),south:makeObjectPropertySetter(readDecimal),east:makeObjectPropertySetter(readDecimal),west:makeObjectPropertySetter(readDecimal)});function latLonAltBoxParser(Oe,e){const Te=pushParseAndPop({},LAT_LON_ALT_BOX_PARSERS,Oe,e);if(!Te)return;const ke=e[e.length-1],Be=[parseFloat(Te.west),parseFloat(Te.south),parseFloat(Te.east),parseFloat(Te.north)];ke.extent=Be,ke.altitudeMode=Te.altitudeMode,ke.minAltitude=parseFloat(Te.minAltitude),ke.maxAltitude=parseFloat(Te.maxAltitude)}const LOD_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{minLodPixels:makeObjectPropertySetter(readDecimal),maxLodPixels:makeObjectPropertySetter(readDecimal),minFadeExtent:makeObjectPropertySetter(readDecimal),maxFadeExtent:makeObjectPropertySetter(readDecimal)});function lodParser(Oe,e){const Te=pushParseAndPop({},LOD_PARSERS,Oe,e);if(!Te)return;const ke=e[e.length-1];ke.minLodPixels=parseFloat(Te.minLodPixels),ke.maxLodPixels=parseFloat(Te.maxLodPixels),ke.minFadeExtent=parseFloat(Te.minFadeExtent),ke.maxFadeExtent=parseFloat(Te.maxFadeExtent)}const INNER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeArrayPusher(readFlatLinearRing)});function innerBoundaryIsParser(Oe,e){const Te=pushParseAndPop([],INNER_BOUNDARY_IS_PARSERS,Oe,e);Te.length>0&&e[e.length-1].push(...Te)}const OUTER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeReplacer(readFlatLinearRing)});function outerBoundaryIsParser(Oe,e){const Te=pushParseAndPop(void 0,OUTER_BOUNDARY_IS_PARSERS,Oe,e);if(Te){const ke=e[e.length-1];ke[0]=Te}}function linkParser(Oe,e){parseNode(LINK_PARSERS$1,Oe,e)}function whenParser(Oe,e){const ke=e[e.length-1].whens,Be=getAllTextContent(Oe,!1),Ue=Date.parse(Be);ke.push(isNaN(Ue)?0:Ue)}function writeColorTextNode(Oe,e){const Te=asArray(e),Be=[(Te.length==4?Te[3]:1)*255,Te[2],Te[1],Te[0]];for(let Ue=0;Ue<4;++Ue){const He=Math.floor(Be[Ue]).toString(16);Be[Ue]=He.length==1?"0"+He:He}writeStringTextNode(Oe,Be.join(""))}function writeCoordinatesTextNode(Oe,e,Te){const ke=Te[Te.length-1],Be=ke.layout,Ue=ke.stride;let He;if(Be=="XY"||Be=="XYM")He=2;else if(Be=="XYZ"||Be=="XYZM")He=3;else throw new Error("Invalid geometry layout");const We=e.length;let Cn="";if(We>0){Cn+=e[0];for(let En=1;En<He;++En)Cn+=","+e[En];for(let En=Ue;En<We;En+=Ue){Cn+=" "+e[En];for(let An=1;An<He;++An)Cn+=","+e[En+An]}}writeStringTextNode(Oe,Cn)}const EXTENDEDDATA_NODE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Data:makeChildAppender(writeDataNode),value:makeChildAppender(writeDataNodeValue),displayName:makeChildAppender(writeDataNodeName)});function writeDataNode(Oe,e,Te){Oe.setAttribute("name",e.name);const ke={node:Oe},Be=e.value;typeof Be=="object"?(Be!==null&&Be.displayName&&pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Be.displayName],Te,["displayName"]),Be!==null&&Be.value&&pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Be.value],Te,["value"])):pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Be],Te,["value"])}function writeDataNodeName(Oe,e){writeStringTextNode(Oe,e)}function writeDataNodeValue(Oe,e){writeStringTextNode(Oe,e)}const DOCUMENT_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Placemark:makeChildAppender(writePlacemark)}),DOCUMENT_NODE_FACTORY=function(Oe,e,Te){const ke=e[e.length-1].node;return createElementNS(ke.namespaceURI,"Placemark")};function writeDocument(Oe,e,Te){pushSerializeAndPop({node:Oe},DOCUMENT_SERIALIZERS,DOCUMENT_NODE_FACTORY,e,Te,void 0,this)}const DATA_NODE_FACTORY=makeSimpleNodeFactory("Data");function writeExtendedData(Oe,e,Te){const ke={node:Oe},Be=e.names,Ue=e.values,He=Be.length;for(let We=0;We<He;We++)pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,DATA_NODE_FACTORY,[{name:Be[We],value:Ue[We]}],Te)}const ICON_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["href"],makeStructureNS(GX_NAMESPACE_URIS,["x","y","w","h"])),ICON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeChildAppender(writeStringTextNode)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeChildAppender(writeDecimalTextNode),y:makeChildAppender(writeDecimalTextNode),w:makeChildAppender(writeDecimalTextNode),h:makeChildAppender(writeDecimalTextNode)})),GX_NODE_FACTORY=function(Oe,e,Te){return createElementNS(GX_NAMESPACE_URIS[0],"gx:"+Te)};function writeIcon(Oe,e,Te){const ke={node:Oe},Be=Te[Te.length-1].node;let Ue=ICON_SEQUENCE[Be.namespaceURI],He=makeSequence(e,Ue);pushSerializeAndPop(ke,ICON_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,He,Te,Ue),Ue=ICON_SEQUENCE[GX_NAMESPACE_URIS[0]],He=makeSequence(e,Ue),pushSerializeAndPop(ke,ICON_SERIALIZERS,GX_NODE_FACTORY,He,Te,Ue)}const ICON_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["scale","heading","Icon","color","hotSpot"]),ICON_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeChildAppender(writeIcon),color:makeChildAppender(writeColorTextNode),heading:makeChildAppender(writeDecimalTextNode),hotSpot:makeChildAppender(writeVec2),scale:makeChildAppender(writeScaleTextNode)});function writeIconStyle(Oe,e,Te){const ke={node:Oe},Be={},Ue=e.getSrc(),He=e.getSize(),We=e.getImageSize(),Cn={href:Ue};if(He){Cn.w=He[0],Cn.h=He[1];const ti=e.getAnchor(),ni=e.getOrigin();if(ni&&We&&ni[0]!==0&&ni[1]!==He[1]&&(Cn.x=ni[0],Cn.y=We[1]-(ni[1]+He[1])),ti&&(ti[0]!==He[0]/2||ti[1]!==He[1]/2)){const ri={x:ti[0],xunits:"pixels",y:He[1]-ti[1],yunits:"pixels"};Be.hotSpot=ri}}Be.Icon=Cn;let En=e.getScaleArray()[0],An=He;if(An===null&&(An=DEFAULT_IMAGE_STYLE_SIZE),An.length==2){const ti=scaleForSize(An);En=En/ti}En!==1&&(Be.scale=En);const Sn=e.getRotation();Sn!==0&&(Be.heading=Sn);const Tn=e.getColor();Tn&&(Be.color=Tn);const Ln=Te[Te.length-1].node,Bn=ICON_STYLE_SEQUENCE[Ln.namespaceURI],ei=makeSequence(Be,Bn);pushSerializeAndPop(ke,ICON_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,ei,Te,Bn)}const LABEL_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","scale"]),LABEL_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),scale:makeChildAppender(writeScaleTextNode)});function writeLabelStyle(Oe,e,Te){const ke={node:Oe},Be={},Ue=e.getFill();Ue&&(Be.color=Ue.getColor());const He=e.getScale();He&&He!==1&&(Be.scale=He);const We=Te[Te.length-1].node,Cn=LABEL_STYLE_SEQUENCE[We.namespaceURI],En=makeSequence(Be,Cn);pushSerializeAndPop(ke,LABEL_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,En,Te,Cn)}const LINE_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","width"]),LINE_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),width:makeChildAppender(writeDecimalTextNode)});function writeLineStyle(Oe,e,Te){const ke={node:Oe},Be={color:e.getColor(),width:Number(e.getWidth())||1},Ue=Te[Te.length-1].node,He=LINE_STYLE_SEQUENCE[Ue.namespaceURI],We=makeSequence(Be,He);pushSerializeAndPop(ke,LINE_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,We,Te,He)}const GEOMETRY_TYPE_TO_NODENAME$1={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},GEOMETRY_NODE_FACTORY=function(Oe,e,Te){if(Oe){const ke=e[e.length-1].node;return createElementNS(ke.namespaceURI,GEOMETRY_TYPE_TO_NODENAME$1[Oe.getType()])}},POINT_NODE_FACTORY=makeSimpleNodeFactory("Point"),LINE_STRING_NODE_FACTORY=makeSimpleNodeFactory("LineString"),LINEAR_RING_NODE_FACTORY=makeSimpleNodeFactory("LinearRing"),POLYGON_NODE_FACTORY=makeSimpleNodeFactory("Polygon"),MULTI_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),GeometryCollection:makeChildAppender(writeMultiGeometry)});function writeMultiGeometry(Oe,e,Te){const ke={node:Oe},Be=e.getType();let Ue=[],He;if(Be==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(We){const Cn=We.getType();if(Cn==="MultiPoint")Ue=Ue.concat(We.getPoints());else if(Cn==="MultiLineString")Ue=Ue.concat(We.getLineStrings());else if(Cn==="MultiPolygon")Ue=Ue.concat(We.getPolygons());else if(Cn==="Point"||Cn==="LineString"||Cn==="Polygon")Ue.push(We);else throw new Error("Unknown geometry type")}),He=GEOMETRY_NODE_FACTORY;else if(Be==="MultiPoint")Ue=e.getPoints(),He=POINT_NODE_FACTORY;else if(Be==="MultiLineString")Ue=e.getLineStrings(),He=LINE_STRING_NODE_FACTORY;else if(Be==="MultiPolygon")Ue=e.getPolygons(),He=POLYGON_NODE_FACTORY;else throw new Error("Unknown geometry type");pushSerializeAndPop(ke,MULTI_GEOMETRY_SERIALIZERS,He,Ue,Te)}const BOUNDARY_IS_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeChildAppender(writePrimitiveGeometry)});function writeBoundaryIs(Oe,e,Te){pushSerializeAndPop({node:Oe},BOUNDARY_IS_SERIALIZERS,LINEAR_RING_NODE_FACTORY,[e],Te)}const PLACEMARK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:makeChildAppender(writeExtendedData),MultiGeometry:makeChildAppender(writeMultiGeometry),LineString:makeChildAppender(writePrimitiveGeometry),LinearRing:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),Style:makeChildAppender(writeStyle),address:makeChildAppender(writeStringTextNode),description:makeChildAppender(writeStringTextNode),name:makeChildAppender(writeStringTextNode),open:makeChildAppender(writeBooleanTextNode),phoneNumber:makeChildAppender(writeStringTextNode),styleUrl:makeChildAppender(writeStringTextNode),visibility:makeChildAppender(writeBooleanTextNode)}),PLACEMARK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),EXTENDEDDATA_NODE_FACTORY=makeSimpleNodeFactory("ExtendedData");function writePlacemark(Oe,e,Te){const ke={node:Oe};e.getId()&&Oe.setAttribute("id",e.getId());const Be=e.getProperties(),Ue={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Ue[e.getGeometryName()]=1;const He=Object.keys(Be||{}).sort().filter(function(Ln){return!Ue[Ln]}),We=e.getStyleFunction();if(We){const Ln=We(e,0);if(Ln){const Bn=Array.isArray(Ln)?Ln:[Ln];let ei=Bn;if(e.getGeometry()&&(ei=Bn.filter(function(ti){const ni=ti.getGeometryFunction()(e);if(ni){const ri=ni.getType();return ri==="GeometryCollection"?ni.getGeometriesArrayRecursive().filter(function(si){const ai=si.getType();return ai==="Point"||ai==="MultiPoint"}).length:ri==="Point"||ri==="MultiPoint"}})),this.writeStyles_){let ti=Bn,ni=Bn;e.getGeometry()&&(ti=Bn.filter(function(ri){const si=ri.getGeometryFunction()(e);if(si){const ai=si.getType();return ai==="GeometryCollection"?si.getGeometriesArrayRecursive().filter(function(li){const Pi=li.getType();return Pi==="LineString"||Pi==="MultiLineString"}).length:ai==="LineString"||ai==="MultiLineString"}}),ni=Bn.filter(function(ri){const si=ri.getGeometryFunction()(e);if(si){const ai=si.getType();return ai==="GeometryCollection"?si.getGeometriesArrayRecursive().filter(function(li){const Pi=li.getType();return Pi==="Polygon"||Pi==="MultiPolygon"}).length:ai==="Polygon"||ai==="MultiPolygon"}})),Be.Style={pointStyles:ei,lineStyles:ti,polyStyles:ni}}if(ei.length&&Be.name===void 0){const ti=ei[0].getText();ti&&(Be.name=ti.getText())}}}const Cn=Te[Te.length-1].node,En=PLACEMARK_SEQUENCE[Cn.namespaceURI],An=makeSequence(Be,En);if(pushSerializeAndPop(ke,PLACEMARK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,An,Te,En),He.length>0){const Ln=makeSequence(Be,He);pushSerializeAndPop(ke,PLACEMARK_SERIALIZERS,EXTENDEDDATA_NODE_FACTORY,[{names:He,values:Ln}],Te)}const Sn=Te[0];let Tn=e.getGeometry();Tn&&(Tn=transformGeometryWithOptions(Tn,!0,Sn)),pushSerializeAndPop(ke,PLACEMARK_SERIALIZERS,GEOMETRY_NODE_FACTORY,[Tn],Te)}const PRIMITIVE_GEOMETRY_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["extrude","tessellate","altitudeMode","coordinates"]),PRIMITIVE_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeChildAppender(writeBooleanTextNode),tessellate:makeChildAppender(writeBooleanTextNode),altitudeMode:makeChildAppender(writeStringTextNode),coordinates:makeChildAppender(writeCoordinatesTextNode)});function writePrimitiveGeometry(Oe,e,Te){const ke=e.getFlatCoordinates(),Be={node:Oe};Be.layout=e.getLayout(),Be.stride=e.getStride();const Ue=e.getProperties();Ue.coordinates=ke;const He=Te[Te.length-1].node,We=PRIMITIVE_GEOMETRY_SEQUENCE[He.namespaceURI],Cn=makeSequence(Ue,We);pushSerializeAndPop(Be,PRIMITIVE_GEOMETRY_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Cn,Te,We)}const POLY_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","fill","outline"]),POLYGON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{outerBoundaryIs:makeChildAppender(writeBoundaryIs),innerBoundaryIs:makeChildAppender(writeBoundaryIs)}),INNER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("innerBoundaryIs"),OUTER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("outerBoundaryIs");function writePolygon(Oe,e,Te){const ke=e.getLinearRings(),Be=ke.shift(),Ue={node:Oe};pushSerializeAndPop(Ue,POLYGON_SERIALIZERS,INNER_BOUNDARY_NODE_FACTORY,ke,Te),pushSerializeAndPop(Ue,POLYGON_SERIALIZERS,OUTER_BOUNDARY_NODE_FACTORY,[Be],Te)}const POLY_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),fill:makeChildAppender(writeBooleanTextNode),outline:makeChildAppender(writeBooleanTextNode)});function writePolyStyle(Oe,e,Te){const ke={node:Oe},Be=e.getFill(),Ue=e.getStroke(),He={color:Be?Be.getColor():void 0,fill:Be?void 0:!1,outline:Ue?void 0:!1},We=Te[Te.length-1].node,Cn=POLY_STYLE_SEQUENCE[We.namespaceURI],En=makeSequence(He,Cn);pushSerializeAndPop(ke,POLY_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,En,Te,Cn)}function writeScaleTextNode(Oe,e){writeDecimalTextNode(Oe,Math.round(e*1e6)/1e6)}const STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:makeChildAppender(writeIconStyle),LabelStyle:makeChildAppender(writeLabelStyle),LineStyle:makeChildAppender(writeLineStyle),PolyStyle:makeChildAppender(writePolyStyle)});function writeStyle(Oe,e,Te){const ke={node:Oe},Be={};if(e.pointStyles.length){const Cn=e.pointStyles[0].getText();Cn&&(Be.LabelStyle=Cn);const En=e.pointStyles[0].getImage();En&&typeof En.getSrc=="function"&&(Be.IconStyle=En)}if(e.lineStyles.length){const Cn=e.lineStyles[0].getStroke();Cn&&(Be.LineStyle=Cn)}if(e.polyStyles.length){const Cn=e.polyStyles[0].getStroke();Cn&&!Be.LineStyle&&(Be.LineStyle=Cn),Be.PolyStyle=e.polyStyles[0]}const Ue=Te[Te.length-1].node,He=STYLE_SEQUENCE[Ue.namespaceURI],We=makeSequence(Be,He);pushSerializeAndPop(ke,STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,We,Te,He)}function writeVec2(Oe,e){Oe.setAttribute("x",String(e.x)),Oe.setAttribute("y",String(e.y)),Oe.setAttribute("xunits",e.xunits),Oe.setAttribute("yunits",e.yunits)}var ColorUtils={hex:function(Oe){if(Oe>255)throw new Error("'"+Oe+"'' is greater than 255(0xff);");var e=Number(Oe).toString(16);return("0"+e).slice(-2)},num:function(Oe){return parseInt(Oe,16)},arrayToRgba:function(Oe){if(!Array.isArray(Oe))throw new Error("Not an array !");var e=Oe[0],Te=Oe[1],ke=Oe[2],Be=Oe[3]||1,Ue="rgba("+e+", "+Te+", "+ke+", "+parseFloat(Be)+")";return Ue},arrayToHex:function(Oe){if(!Array.isArray(Oe))throw new Error("Not an array !");var e=Oe[0],Te=Oe[1],ke=Oe[2],Be=Oe[3],Ue=[this.hex(e),this.hex(Te),this.hex(ke)],He={};return He.hex="#"+Ue.join(""),Be&&(He.opacity=parseFloat(Be)),He},rgbaToHex:function(Oe){var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,Te=e.exec(Oe);if(!Te)throw new Error("Invalid format: "+Oe);var ke=Te[1],Be=Te[2],Ue=Te[3],He=Te[4],We=[this.hex(ke),this.hex(Be),this.hex(Ue)],Cn={};return Cn.hex="#"+We.join(""),He&&(Cn.opacity=parseFloat(He)),Cn},hexToRgba:function(Oe,e){var Te=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;if(!Oe)throw new Error("Invalid format");Oe=Oe.replace(Te,function(Ue,He,We,Cn){return He+He+We+We+Cn+Cn});var ke=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Oe);ke=ke?{r:parseInt(ke[1],16),g:parseInt(ke[2],16),b:parseInt(ke[3],16)}:null;var Be=ke?"rgba("+ke.r+", "+ke.g+", "+ke.b+", "+e+")":null;return Be},isHex:function(Oe){if(!Oe||Oe.charAt(0)!=="#")return!1;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,Te=e.exec(Oe);return!!Te},isRGB:function(Oe){if(!Oe)return!1;var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,Te=e.exec(Oe);return!!Te}},logger$D=LoggerByDefault.getLogger("styling");Feature.prototype.setPropertyFill=function(){var Oe=this.getStyle();if(Oe&&!(Array.isArray(Oe)&&Oe.length===0)){var e=Oe.getFill();if(e){var Te=e.getColor();if(Array.isArray(Te)){var ke="rgba(";ke+=Te[0]+",",ke+=Te[1]+",",ke+=Te[2]+",",ke+=Te[3]+")",Te=ke}if(ColorUtils.isRGB(Te)){var Be=ColorUtils.rgbaToHex(Te);this.set("fill",Be.hex),this.set("fill-opacity",Be.opacity)}else this.set("fill",Te),this.set("fill-opacity",1)}}};Feature.prototype.setPropertyStroke=function(){var Oe=this.getStyle();if(Oe&&!(Array.isArray(Oe)&&Oe.length===0)){var e=Oe.getStroke();if(e){var Te=e.getColor();if(Array.isArray(Te)){var ke="rgba(";ke+=Te[0]+",",ke+=Te[1]+",",ke+=Te[2]+",",ke+=Te[3]+")",Te=ke}if(ColorUtils.isRGB(Te)){var Be=ColorUtils.rgbaToHex(Te);this.set("stroke",Be.hex),this.set("stroke-opacity",Be.opacity)}else this.set("stroke",Te),this.set("stroke-opacity",1);this.set("stroke-width",e.getWidth())}}};Feature.prototype.setPropertyLabel=function(){var Oe=this.getStyle();if(Oe&&!(Array.isArray(Oe)&&Oe.length===0)){var e=this.get("name")!==void 0,Te=Oe.getText();if(Te&&e){var ke=Oe.getText().getFill();if(ke){var Be=ke.getColor();if(Array.isArray(Be)){var Ue="rgba(";Ue+=Be[0]+",",Ue+=Be[1]+",",Ue+=Be[2]+",",Ue+=Be[3]+")",Be=Ue}if(ColorUtils.isRGB(Be)){var He=ColorUtils.rgbaToHex(Be);this.set("label-fill",He.hex),this.set("label-fill-opacity",He.opacity)}else this.set("label-fill",Be),this.set("label-fill-opacity",1)}var We=Oe.getText().getStroke();if(We){var Cn=We.getColor();if(Array.isArray(Cn)){var En="rgba(";En+=Cn[0]+",",En+=Cn[1]+",",En+=Cn[2]+",",En+=Cn[3]+")",Cn=En}if(ColorUtils.isRGB(Cn)){var An=ColorUtils.rgbaToHex(Cn);this.set("label-stroke",An.hex),this.set("label-stroke-opacity",An.opacity)}else this.set("label-stroke",Cn),this.set("label-stroke-opacity",1);this.set("label-stroke-width",We.getWidth())}this.set("label-font",Oe.getText().getFont()||Styling.DEFAULT_TEXT.font),this.set("label-textAlign",Oe.getText().getTextAlign()||Styling.DEFAULT_TEXT.textAlign)}}};Feature.prototype.setPropertyMarker=function(){var Oe=this.getStyle();if(Oe&&!(Array.isArray(Oe)&&Oe.length===0)){var e=Oe.getImage();if(e)if(e instanceof Icon){var Te=e.getColor();if(Array.isArray(Te)){var ke="rgba(";ke+=Te[0]+",",ke+=Te[1]+",",ke+=Te[2]+",",ke+=Te[3]+")",Te=ke}if(Te){var Be=ColorUtils.rgbaToHex(Te);this.set("marker-color",Be.hex)}var Ue=e.getScale();switch(Math.round(Ue*2)/2){case 0:case .5:this.set("marker-size","small");break;case 1:this.set("marker-size","medium");break;case 1.5:case 2:this.set("marker-size","large");break}var He=e.getSrc();He&&this.set("marker-symbol",He),this.unset("circle-fill"),this.unset("circle-fill-opacity"),this.unset("circle-stroke"),this.unset("circle-stroke-width"),this.unset("circle-stroke-opacity"),this.unset("circle-radius")}else{var We=e.getFill();if(We){var Cn=We.getColor();if(Array.isArray(Cn)){var En="rgba(";En+=Cn[0]+",",En+=Cn[1]+",",En+=Cn[2]+",",En+=Cn[3]+")",Cn=En}if(ColorUtils.isRGB(Cn)){var An=ColorUtils.rgbaToHex(Cn);this.set("circle-fill",An.hex),this.set("circle-fill-opacity",An.opacity)}else this.set("circle-fill",Cn),this.set("circle-fill-opacity",1)}var Sn=e.getStroke();if(Sn){var Tn=Sn.getColor();if(Array.isArray(Tn)){var Ln="rgba(";Ln+=Tn[0]+",",Ln+=Tn[1]+",",Ln+=Tn[2]+",",Ln+=Tn[3]+")",Tn=Ln}if(ColorUtils.isRGB(Tn)){var Bn=ColorUtils.rgbaToHex(Tn);this.set("circle-stroke",Bn.hex),this.set("circle-stroke-opacity",Bn.opacity)}else this.set("circle-stroke",Tn),this.set("circle-stroke-opacity",1);this.set("circle-stroke-width",Sn.getWidth())}var ei=e.getRadius();this.set("circle-radius",ei)}}};var Styling={APPLY_CONVERT_GEOM_GPX:!0,DEFAULT_ICON:{src:Marker.lightOrange,anchor:[.5,1],scale:1},DEFAULT_CIRCLE:{radius:10,fill:{opacity:1,color:[0,0,0,1]},stroke:{width:1,opacity:1,color:[0,0,0,1]}},DEFAULT_STROKE:{width:5,opacity:1,color:[250,250,250,1]},DEFAULT_FILL:{opacity:1,color:[0,0,0,1]},DEFAULT_TEXT:{font:"16px sans",textAlign:"left",stroke:{color:[250,250,250,1],width:5,opactity:1},fill:{opacity:1,color:[0,0,0,1]}},getListTags:function(){return["type","fill","fill-opacity","stroke","stroke-opacity","stroke-width","circle-fill","circle-fill-opacity","circle-stroke","circle-stroke-opacity","circle-stroke-width","circle-radius","marker-symbol","marker-color","marker-size","label-fill","label-fill-opacity","label-stroke","label-stroke-width","label-stroke-opacity","label-font","label-textAlign"]},defineStyleFromProperties:function(Oe){var e=null,Te={},ke=null;if(Oe.get("marker-color")||Oe.get("marker-size")||Oe.get("marker-symbol")){ke={},ke.src=this.DEFAULT_ICON.src,ke.anchor=this.DEFAULT_ICON.anchor;var Be=Oe.get("marker-symbol");Be&&Be.search("data:image/png;base64")!==-1&&(ke.src=Be);var Ue=Oe.get("marker-color");ColorUtils.isHex(Ue)&&(ke.color=ColorUtils.hexToRgba(Ue,1));var He=Oe.get("marker-size");if(He)switch(He){case"small":ke.scale=.5;break;case"medium":ke.scale=1;break;case"large":ke.scale=1.5;break;default:ke.scale=this.DEFAULT_ICON.scale;break}}var We=null;(Oe.get("stroke")||Oe.get("stroke-opacity")||Oe.get("stroke-width"))&&(We={},We.color=ColorUtils.hexToRgba(Oe.get("stroke"),+Oe.get("stroke-opacity")||this.DEFAULT_STROKE.opacity),We.width=+Oe.get("stroke-width")||this.DEFAULT_STROKE.width);var Cn=null;(Oe.get("fill")||Oe.get("fill-opacity"))&&(Cn={},Cn.color=ColorUtils.hexToRgba(Oe.get("fill"),+Oe.get("fill-opacity")||this.DEFAULT_FILL.opacity));var En=null,An=null,Sn=Oe.get("name")!=="";Sn&&((Oe.get("label-fill")||Oe.get("label-fill-opacity"))&&(An={},An.color=ColorUtils.hexToRgba(Oe.get("label-fill"),+Oe.get("label-fill-opacity")||this.DEFAULT_TEXT.fill.opacity)),(Oe.get("label-stroke")||Oe.get("label-stroke-opacity")||Oe.get("label-stroke-width"))&&(En={},En.color=ColorUtils.hexToRgba(Oe.get("label-stroke"),+Oe.get("label-stroke-opacity")||this.DEFAULT_TEXT.stroke.opacity),En.width=+Oe.get("label-stroke-width")||this.DEFAULT_TEXT.stroke.width));var Tn=Oe.get("circle-radius")||this.DEFAULT_CIRCLE.radius,Ln=null;(Oe.get("circle-stroke")||Oe.get("circle-stroke-opacity")||Oe.get("circle-stroke-width"))&&(Ln={},Ln.color=ColorUtils.hexToRgba(Oe.get("circle-stroke"),+Oe.get("circle-stroke-opacity")||this.DEFAULT_CIRCLE.stroke.opacity),Ln.width=+Oe.get("circle-stroke-width")||this.DEFAULT_CIRCLE.stroke.width);var Bn=null;if((Oe.get("circle-fill")||Oe.get("circle-fill-opacity"))&&(Bn={},Bn.color=ColorUtils.hexToRgba(Oe.get("circle-fill"),+Oe.get("circle-fill-opacity")||this.DEFAULT_CIRCLE.fill.opacity)),Oe.getGeometry()){var ei=Oe.getGeometry().getType();switch(ei){case"Circle":case"Point":case"MultiPoint":var ti=!1,ni={};if(Ln&&(ni.stroke=new Stroke(Ln)),Bn&&(ni.fill=new Fill(Bn)),Object.keys(ni).length!==0&&(ti=!0,ni.radius=+Tn,Te.image=new CircleStyle(ni)),ke&&(Te.image=new Icon(ke)),Sn){var ri={};if(En&&(ri.stroke=new Stroke(En)),An&&(ri.fill=new Fill(An)),Object.keys(ri).length!==0)ri.text=Oe.get("name"),ri.textAlign=Oe.get("label-textAlign")||this.DEFAULT_TEXT.textAlign,ri.font=Oe.get("label-font")||this.DEFAULT_TEXT.font,Te.text=new Text(Object.assign({},this.DEFAULT_TEXT,ri));else if(ke||ti){var si=new Text(Object.assign({},this.DEFAULT_TEXT,{fill:new Fill(this.DEFAULT_TEXT.fill),stroke:new Stroke(this.DEFAULT_TEXT.stroke)}));if(si){var ai=si.clone();ai.setText(Oe.get("name")),Te.text=ai}}}break;case"Polygon":case"MultiPolygon":We&&(Te.stroke=new Stroke(We)),Cn&&(Te.fill=new Fill(Cn));break;case"LineString":case"MultiLineString":if(We&&(Te.stroke=new Stroke(We)),this.APPLY_CONVERT_GEOM_GPX&&Cn){var li=Oe.get("type");if(li&&(li==="Polygon"||li==="MultiPolygon")){Te.fill=new Fill(Cn);var Pi=Oe.clone(),pi=ei==="LineString"?Polygon:MultiPolygon;Oe.setGeometry(new pi([Pi.getGeometry().getCoordinates()]))}}break}}return Object.keys(Te).length!==0&&(e=new Style$1(Te)),e},defineStyleFunctionByDefault:function(Oe){if(!Oe)return[];if(Object.keys(Oe).length===0)return[];var e=(Te,ke)=>{if(Te.getGeometry()){var Be=null,Ue=Te.getGeometry().getType();switch(Ue){case"Point":case"MultiPoint":var He={};if(Oe.getImage()&&(He.image=Oe.getImage()),Oe.getText()&&Te.get("name")){var We=Oe.getText().clone();We.setText(Te.get("name")),He.text=We}Be=new Style$1(He);break;case"Circle":var Cn={},En={};if(Oe.getFill()&&(En.fill=Oe.getFill()),Oe.getStroke()&&(En.stroke=Oe.getStroke()),Oe.getText()&&Te.get("name")){var An=Oe.getText().clone();An.setText(Te.get("name")),Cn.text=An}Object.keys(En).length!==0&&(En.radius=3,Cn.image=new CircleStyle(En)),Be=new Style$1(Cn);break;case"Polygon":case"MultiPolygon":var Sn={};Oe.getFill()&&(Sn.fill=Oe.getFill()),Oe.getStroke()&&(Sn.stroke=Oe.getStroke()),Be=new Style$1(Sn);break;case"LineString":case"LinearRing":case"MultiLineString":var Tn={};Oe.getStroke()&&(Tn.stroke=Oe.getStroke()),Be=new Style$1(Tn);break}return[Be]}};return e},definePropertiesFromStyleByType:function(Oe){if(Oe.getGeometry()){var e=Oe.getGeometry().getType();switch(e){case"Point":case"MultiPoint":Oe.setPropertyMarker(),Oe.setPropertyLabel();break;case"LineString":case"MultiLineString":Oe.setPropertyStroke();break;case"Polygon":case"MultiPolygon":Oe.setPropertyStroke(),Oe.setPropertyFill();break}}},definePropertiesFromStyle:function(Oe){var e=Oe.getStyle()||Oe.getStyleFunction();if(e){if(typeof e=="function"){var Te=e.call(this,Oe,0);if(Te&&Te.length!==0)e=Array.isArray(Te)?Te[0]:Te,Oe.setStyle(e);else return}this.definePropertiesFromStyleByType(Oe)}},defineTagFromStyle:function(Oe,e){return logger$D.trace("todo..."),null}},logger$C=LoggerByDefault.getLogger("parser"),Parser$1={parse:function(Oe){var e=null,Te=null,ke=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var Be=require("@xmldom/xmldom").DOMParser;Te=new Be,e=Te.parseFromString(Oe,"text/xml")}else ke.DOMParser?(Te=new ke.DOMParser,e=Te.parseFromString(Oe,"text/xml")):ke.ActiveXObject?(e=new ke.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(Oe)):logger$C.log("Incompatible environment for DOM Parser !");var Ue=e.querySelector("parsererror");return Ue?(console.error(Ue),null):(logger$C.trace(e),e)},toString:function(Oe){var e=new XMLSerializer,Te=e.serializeToString(Oe);return logger$C.trace(Te),Te},format:function(Oe){var e=/(>)\s*(<)(\/*)/g,Te=/ *(.*) +\n/g,ke=/(<.+>)(.+\n)/g;Oe=Oe.replace(e,`$1
$2$3`).replace(Te,`$1
`).replace(ke,`$1
$2`);for(var Be="",Ue=Oe.split(`
`),He=0,We="other",Cn={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},En=0;En<Ue.length;En++){var An=Ue[En],Sn=!!An.match(/<.+\/>/),Tn=!!An.match(/<\/.+>/),Ln=!!An.match(/<[^!].*>/),Bn=Sn?"single":Tn?"closing":Ln?"opening":"other",ei=We+"->"+Bn;We=Bn;var ti="";He+=Cn[ei];for(var ni=0;ni<He;ni++)ti+="	";ei==="opening->closing"?Be=Be.substr(0,Be.length-1)+An+`
`:Be+=ti+An+`
`}return logger$C.trace(Be),Be}},logger$B=LoggerByDefault.getLogger("extended KML format"),KML=class jf extends KML$1{constructor(e){if(super(e),!(this instanceof jf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e=e||{},this.source=null,this.extensions=e.extensions||null,e.defaultStyle&&!Array.isArray(e.defaultStyle)&&(e.defaultStyle=[e.defaultStyle]),(e.defaultStyle===null||typeof e.defaultStyle>"u")&&(e.defaultStyle=[]),this}_processKml(e,Te,ke){for(var Be=e.nodeName==="#document"?e.childNodes[0].childNodes:e.childNodes,Ue=Be,He=0;He<Be.length;He++){const dr=Be[He];if(dr.nodeName==="Document"){Ue=dr.childNodes;break}if(dr.nodeName==="Placemark"){Ue=[dr];break}}for(var We={},Cn=-1,En=0;En<Ue.length;En++){var An=Ue[En];switch(An.nodeName){case"Style":var Sn=An.attributes[0];if(Sn&&Sn.nodeName==="id"){var Tn=Sn.nodeValue,Ln=An;We[Tn]=Ln}break;case"Placemark":Cn++;for(var Bn=An.childNodes,ei=!1,ti=!1,ni=!1,ri=null,si=null,ai=null,li=An,Pi=0;Pi<Bn.length;Pi++)switch(Bn[Pi].nodeName){case"Polygon":ni=!0;break;case"LineString":ti=!0;break;case"Point":ei=!0;break;case"Style":si=Bn[Pi],ri=Bn[Pi].childNodes;break;case"styleUrl":var pi=Bn[Pi].textContent.slice(1);We[pi]&&(ri=We[pi].childNodes);break;case"ExtendedData":ai=Bn[Pi].childNodes;break;case"name":li=null;break}if(ai){logger$B.log("ExtendedData :",ai);var vi=ke.extendedData;vi&&typeof vi=="function"&&vi(Te[Cn],ai)}if(li){logger$B.log("Name :",li);var Ri=ke.nameData;Ri&&typeof Ri=="function"&&Ri(Te[Cn],li)}if(ei&&ri&&ri.length!==0){for(var Fi=null,di=null,ci=0;ci<ri.length;ci++)switch(ri[ci].nodeName){case"LabelStyle":Fi=ri[ci];break;case"IconStyle":di=ri[ci];break}var Mi=Te[Cn].getProperties().name,Oi=Te[Cn].getProperties().description,Hi=Mi||Oi;if(logger$B.trace(Hi),!di&&Fi){var Ki=ke.labelStyle;Ki&&typeof Ki=="function"&&Ki(Te[Cn],Fi)}else if(di&&!Fi){var or=ke.iconStyle;or&&typeof or=="function"&&or(Te[Cn],di)}else if(di&&Fi){var sr=ke.iconLabelStyle;sr&&typeof sr=="function"&&sr(Te[Cn],di,Fi)}}else{var Cr=Te[Cn],pr=Cr.getStyle();if(pr&&typeof pr=="function"){var wr=pr.call(this,Cr,0);wr&&wr.length!==0&&(pr=wr[0])}if(ni){var Li=ke.polygonStyle;Li&&typeof Li=="function"&&Li(Te[Cn],ri)}if(ti){var er=ke.lineStringStyle;er&&typeof er=="function"&&er(Te[Cn],ri)}if(ei&&pr){var hr=pr.getImage();if(hr&&hr instanceof CircleStyle){var mr=ke.circleStyle;mr&&typeof mr=="function"&&mr(Te[Cn],si)}else if(hr&&hr instanceof Icon){var _r=ke.pointStyle;_r&&typeof _r=="function"&&_r(Te[Cn],si)}}}break;default:logger$B.trace("tag is not processing !")}}}writeFeatures(e,Te){logger$B.log("overload : ol.format.KML.writeFeatures");var ke=super.writeFeaturesNode(e,Te);if(ke===null)return null;this.hasOwnProperty("extensions")&&this._writeRootExtensions(ke,this.extensions);var Be=this._writeExtendStylesFeatures(ke,e,Te),Ue=Parser$1.format(Be);return Ue===""?null:Ue}_writeExtendStylesFeatures(e,Te,ke){function Be(Ln,Bn){var ei=Ln.toString(16);ei.charAt(0)==="#"&&(ei=ei.slice(1)),Bn=Bn||1,Bn=parseInt(Bn*255,10),Bn=Bn.toString(16);var ti=Bn;return ti=ti+ei.substr(4,2),ti=ti+ei.substr(2,2),ti=ti+ei.substr(0,2),ti.toLowerCase()}var Ue=function(Ln,Bn){if(logger$B.trace("label with style :",Bn),!!Ln&&Ln.getStyle()instanceof Style$1){var ei=Ln.getStyle().getText();if(!ei)return;var ti="Sans",ni="16px",ri=ei.getFont();if(ri){var si=ri.split(" ",2);ni=si[0],ti=si[1]}var ai=Ln.getStyle().getText().getStroke();if(!ai)return;if(ai instanceof Stroke){var li=Be("#FFFFFF"),Pi=ai.getColor();if(Array.isArray(Pi)){var pi="rgba(";pi+=Pi[0]+",",pi+=Pi[1]+",",pi+=Pi[2]+",",pi+=Pi[3]+")",Pi=pi}if(ColorUtils.isRGB(Pi)){var vi=ColorUtils.rgbaToHex(Pi);li=Be(vi.hex,vi.opacity)}else li=Be(Pi);var Ri=ai.getWidth()||"0",Fi="1";if(Bn&&Bn.getElementsByTagName("LabelStyleSimpleExtensionGroup").length===0){var di=document.createElementNS(e.namespaceURI,"LabelStyleSimpleExtensionGroup");di.setAttribute("fontSize",ni),di.setAttribute("fontFamily",ti),di.setAttribute("haloColor",li),di.setAttribute("haloRadius",Ri),di.setAttribute("haloOpacity",Fi),Bn.appendChild(di)}}var ci=Ln.getStyle().getImage();if(!ci)return;if(ci instanceof CircleStyle){var Mi=null,Oi=null;if(ci.getStroke()){if(Oi=ci.getStroke().getWidth(),Mi=ci.getStroke().getColor(),Array.isArray(Mi)){var Hi="rgba(";Hi+=Mi[0]+",",Hi+=Mi[1]+",",Hi+=Mi[2]+",",Hi+=Mi[3]+")",Mi=Hi}if(ColorUtils.isRGB(Mi)){var Ki=ColorUtils.rgbaToHex(Mi);Mi=Be(Ki.hex,Ki.opacity)}else Mi=Be(Mi)}var or=null;if(ci.getFill()){if(or=ci.getFill().getColor(),Array.isArray(or)){var sr="rgba(";sr+=or[0]+",",sr+=or[1]+",",sr+=or[2]+",",sr+=or[3]+")",or=sr}if(ColorUtils.isRGB(or)){var Cr=ColorUtils.rgbaToHex(or);or=Be(Cr.hex,Cr.opacity)}else or=Be(or)}if(Bn&&Bn.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var pr=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");pr.setAttribute("type","circle"),pr.setAttribute("radius",ci.getRadius()),pr.setAttribute("fillColor",or),pr.setAttribute("strokeColor",Mi),pr.setAttribute("strokeWidth",Oi),Bn.appendChild(pr)}}}},He=function(Ln,Bn){if(logger$B.trace("marker with style (hotspot):",Bn),!!Ln&&Ln.getStyle()instanceof Style$1){var ei=Ln.getStyle().getImage();if(!ei)return;if(ei instanceof Icon){var ti=0,ni=0,ri="pixels",si="pixels",ai=ei.getSize(),li=ei.getAnchor();if(li.length&&(ti=li[0],ni=li[1],si==="fraction"?ni=ni===1?0:1-ni:ni=si==="pixels"&&ni===ai[1]?0:ai[1]-ni),Bn&&Bn.getElementsByTagName("hotSpot").length===0){var Pi=document.createElementNS(e.namespaceURI,"hotSpot");Pi.setAttribute("x",ti),Pi.setAttribute("y",ni),Pi.setAttribute("xunits",ri),Pi.setAttribute("yunits",si),Bn.appendChild(Pi)}}}},We=function(Ln,Bn){if(Ln&&Ln.getStyle()instanceof Style$1){var ei=Ln.getStyle().getImage();if(!ei)return;if(ei instanceof CircleStyle){var ti=null,ni=null;if(ei.getStroke()){if(ni=ei.getStroke().getWidth(),ti=ei.getStroke().getColor(),Array.isArray(ti)){var ri="rgba(";ri+=ti[0]+",",ri+=ti[1]+",",ri+=ti[2]+",",ri+=ti[3]+")",ti=ri}if(ColorUtils.isRGB(ti)){var si=ColorUtils.rgbaToHex(ti);ti=Be(si.hex,si.opacity)}else ti=Be(ti)}var ai=null;if(ei.getFill()){if(ai=ei.getFill().getColor(),Array.isArray(ai)){var li="rgba(";li+=ai[0]+",",li+=ai[1]+",",li+=ai[2]+",",li+=ai[3]+")",ai=li}if(ColorUtils.isRGB(ai)){var Pi=ColorUtils.rgbaToHex(ai);ai=Be(Pi.hex,Pi.opacity)}else ai=Be(ai)}if(Bn&&Bn.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var pi=document.createElementNS(e.namespaceURI,"LabelStyle"),vi=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");vi.setAttribute("type","circle"),vi.setAttribute("radius",ei.getRadius()),vi.setAttribute("fillColor",ai),vi.setAttribute("strokeColor",ti),vi.setAttribute("strokeWidth",ni),pi.appendChild(vi),Bn.appendChild(pi)}}}},Cn=function(Ln,Bn){},En=function(Ln,Bn,ei){logger$B.trace("write an icon with a label"),He(Ln,Bn),Ue(Ln,ei)},An=function(Ln,Bn){for(var ei=0;ei<Bn.length;ei++){var ti=Bn[ei];if(ti.nodeName==="name")return}var ni=Ln.getProperties().name;if(ni){var ri=document.createElement("name");ri.innerHTML=ni,Bn.appendChild(ri)}},Sn=function(Ln,Bn){if(Bn&&Bn.length){for(var ei=[],ti=0;ti<Bn.length;ti++){const ri=Bn[ti];if(ri.nodeName==="Data"){var ni=ri.getAttribute("name");Styling.getListTags().includes(ni)&&ei.push(ri)}}ei&&ei.length&&ei.forEach(ri=>{ri.remove()})}};this._processKml(e,Te,{labelStyle:Ue,iconStyle:He,iconLabelStyle:En,circleStyle:We,pointStyle:Cn,nameData:An,extendedData:Sn});var Tn=Parser$1.toString(e);return Tn||null}_writeRootExtensions(e,Te){var ke=document.createElementNS(e.namespaceURI,"ExtendedData");for(const We in Te)if(Object.hasOwnProperty.call(Te,We)){const Cn=Te[We];var Be=document.createElementNS(e.namespaceURI,"Data");Be.setAttribute("name",We);var Ue=document.createTextNode(JSON.stringify(Cn));Be.appendChild(Ue),ke.appendChild(Be)}var He=e.firstChild;e.insertBefore(ke,He)}readFeatures(e,Te){logger$B.log("overload : ol.format.KML.readFeatures"),typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var ke=this._readExtendStylesFeatures(e,Te);return logger$B.trace("Styles étendus",ke),ke.forEach(Be=>{Styling.definePropertiesFromStyle(Be)}),ke}_readExtendStylesFeatures(e,Te){var ke=super.readFeatures(e,Te),Be=null,Ue="";if(typeof e=="string"?Ue=e:Ue=e.documentElement.outerHTML,Ue=Ue.replace(/\n/g,""),Ue=Ue.replace(/(>)\s*(<)/g,"$1$2"),Be=Parser$1.parse(Ue),Be===null)return ke;function He(Tn){var Ln="";Ln=Ln+Tn.substr(6,2),Ln=Ln+Tn.substr(4,2),Ln=Ln+Tn.substr(2,2);for(var Bn=parseInt(Ln,16).toString(16),ei="",ti=Bn.length||0,ni=0;ni<6-ti;ni++)ei+="0";return Bn="#"+ei+Bn,Bn}var We=function(Tn,Ln){if(logger$B.trace("label with style :",Ln),!!Tn){for(var Bn=Tn.getProperties().name,ei=He("ff000000"),ti="#FFFFFF",ni=0,ri="Sans",si="16px",ai=null,li=5,Pi="#000000",pi="#ffffff",vi=1,Ri=!1,Fi=!1,di=Ln.childNodes,ci=0;ci<di.length;ci++)switch(di[ci].nodeName){case"scale":break;case"colorMode":break;case"color":ei=He(di[ci].textContent);break;case"LabelStyleSimpleExtensionGroup":Ri=!0;for(var Mi=di[ci].attributes,Oi=0;Oi<Mi.length;Oi++)switch(Mi[Oi].nodeName){case"fontFamily":ri=Mi[Oi].nodeValue;break;case"fontSize":si=Mi[Oi].nodeValue;break;case"haloColor":ti=He(Mi[Oi].nodeValue);break;case"haloRadius":ni=parseInt(Mi[Oi].nodeValue,10);break}break;case"ObjectSimpleExtensionGroup":Fi=!0;for(var Hi=di[ci].attributes,Ki=0;Ki<Hi.length;Ki++)switch(Hi[Ki].nodeName){case"type":ai=Hi[Ki].nodeValue;break;case"radius":li=parseInt(Hi[Ki].nodeValue,10);break;case"fillColor":var or=Hi[Ki].nodeValue,sr=Math.round(ColorUtils.num(or.substr(0,2))/255*10)/10,Cr=He(or);Pi=ColorUtils.hexToRgba(Cr,sr);break;case"strokeColor":var pr=Hi[Ki].nodeValue,wr=Math.round(ColorUtils.num(pr.substr(0,2))/255*10)/10,Li=He(pr);pi=ColorUtils.hexToRgba(Li,wr);break;case"strokeWidth":vi=parseInt(Hi[Ki].nodeValue,10);break}break}var er=null;Fi&&ai==="circle"?er=new CircleStyle({radius:li,fill:new Fill({color:Pi}),stroke:new Stroke({color:pi,width:vi})}):Ri&&(er=new Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"})),Tn.setStyle(new Style$1({image:er,text:new Text({font:si+" "+ri,textAlign:"left",text:Bn,fill:new Fill({color:ei}),stroke:new Stroke({color:ti,width:ni})})}))}},Cn=function(Tn,Ln){logger$B.trace("hotspot :",Ln);for(var Bn=null,ei=null,ti=He("ffffffff"),ni=!1,ri=51,si=38,ai=!1,li=25.5,Pi="pixels",pi=38,vi="pixels",Ri=Ln.childNodes,Fi=!1,di=0;di<Ri.length;di++)switch(Ri[di].nodeName){case"Icon":Fi=!0;for(var ci=Ri[di].childNodes,Mi=0;Mi<ci.length;Mi++)switch(ci[Mi].nodeName){case"href":Bn=ci[Mi].textContent;break;case"gx:w":ni=!0,ri=parseFloat(ci[Mi].textContent);break;case"gx:h":ni=!0,si=parseFloat(ci[Mi].textContent);break}break;case"hotSpot":ai=!0;for(var Oi=Ri[di].attributes,Hi=0;Hi<Oi.length;Hi++)switch(Oi[Hi].nodeName){case"x":li=parseFloat(Oi[Hi].nodeValue);break;case"y":pi=parseFloat(Oi[Hi].nodeValue);break;case"yunits":Pi=Oi[Hi].nodeValue;break;case"xunits":vi=Oi[Hi].nodeValue;break}break;case"scale":ei=parseFloat(Ri[di].textContent);break;case"color":ti=He(Ri[di].textContent);break}var Ki=null;if(Fi){var or={src:Bn||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",color:ti,crossOrigin:"anonymous",scale:ei||1};ni&&Helper.mergeParams(or,{size:[ri,si]}),ai&&Helper.mergeParams(or,{anchor:[li,pi],anchorOrigin:"bottom-left",anchorXUnits:Pi||"pixels",anchorYUnits:vi||"pixels"}),Ki=new Icon(or)}var sr=Tn.getStyleFunction();if(sr){var Cr=sr(Tn,0);if(Cr&&!Array.isArray(Cr)&&(Cr=[Cr]),Cr&&Cr.length!==0){var pr=Cr.length===1?Cr[0]:Cr[Cr.length-1];Tn.setStyle(new Style$1({image:Ki,text:pr.getText()}))}}},En=function(Tn,Ln){if(logger$B.trace("extendData :",Ln),!!Tn){for(var Bn={},ei=Tn.get("name")||"",ti=Tn.get("description")||"",ni=null,ri=0;ri<Ln.length;ri++){var si=Ln[ri],ai=si.attributes[0],li=si.childNodes;if(ai.nodeName==="name")switch(ai.nodeValue){case"label":ei=si.textContent,Bn.name=ei;break;case"title":case"attributetitle":for(var Pi=0;Pi<li.length;Pi++)li[Pi].nodeName==="value"&&(ni=li[Pi].textContent);break;default:Bn[ai.nodeValue]=si.textContent;break}}ni&&(ti=ti?ni+" : "+ti:ni,Bn.description=ti),Object.keys(Bn).length&&Tn.setProperties(Bn,!0)}},An=function(Tn,Ln,Bn){logger$B.trace("display icon and label"),We(Tn,Bn),Cn(Tn,Ln)},Sn=function(Tn,Ln){};return this._processKml(Be,ke,{lineStringStyle:Sn,polygonStyle:Sn,pointStyle:Sn,labelStyle:this.showPointNames_?We:null,iconStyle:Cn,iconLabelStyle:this.showPointNames_?An:Cn,extendedData:En}),ke}readRootExtensions(e){for(var Te={},ke=this.source.nodeName==="#document"?this.source.childNodes[0]:this.source,Be=ke.childNodes,Ue=0;Ue<Be.length;Ue++){var He=Be[Ue];if(He.nodeName==="ExtendedData")for(var We=He.childNodes,Cn=0;Cn<We.length;Cn++){var En=We[Cn];if(En.nodeName==="Data"){var An=En.attributes[0];if(An&&An.nodeName==="name"&&An.nodeValue===e){Te=JSON.parse(En.textContent);break}}}}return Te}};window.ol&&window.ol.format&&(window.ol.format.KMLExtended=KML);const NAMESPACE_URIS$3=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],SCHEMA_LOCATION="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",FEATURE_READER={rte:readRte,trk:readTrk,wpt:readWpt},GPX_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeArrayPusher(readRte),trk:makeArrayPusher(readTrk),wpt:makeArrayPusher(readWpt)}),LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeObjectPropertySetter(readString,"linkText"),type:makeObjectPropertySetter(readString,"linkType")}),AUTHOR_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),email:parseEmail,link:parseLink}),METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),author:makeObjectPropertySetter(readAuthor),copyright:makeObjectPropertySetter(readCopyright),link:parseLink,time:makeObjectPropertySetter(readDateTime),keywords:makeObjectPropertySetter(readString),bounds:parseBounds,extensions:parseExtensions}),COPYRIGHT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{year:makeObjectPropertySetter(readPositiveInteger),license:makeObjectPropertySetter(readString)}),GPX_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeChildAppender(writeRte),trk:makeChildAppender(writeTrk),wpt:makeChildAppender(writeWpt)});let GPX$1=class extends XMLFeature{constructor(e){super(),e=e||{},this.dataProjection=get$3("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let Te=0,ke=e.length;Te<ke;++Te){const Be=e[Te];if(this.readExtensions_){const Ue=Be.get("extensionsNode_")||null;this.readExtensions_(Be,Ue)}Be.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(parse$1(e)):isDocument(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let Te=e.firstChild;Te;Te=Te.nextSibling)if(Te.nodeType===Node.ELEMENT_NODE){const ke=this.readMetadataFromNode(Te);if(ke)return ke}return null}readMetadataFromNode(e){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;for(let Te=e.firstElementChild;Te;Te=Te.nextElementSibling)if(NAMESPACE_URIS$3.includes(Te.namespaceURI)&&Te.localName==="metadata")return pushParseAndPop({},METADATA_PARSERS,Te,[]);return null}readFeatureFromNode(e,Te){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;const ke=FEATURE_READER[e.localName];if(!ke)return null;const Be=ke(e,[this.getReadOptions(e,Te)]);return Be?(this.handleReadExtensions_([Be]),Be):null}readFeaturesFromNode(e,Te){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const ke=pushParseAndPop([],GPX_PARSERS,e,[this.getReadOptions(e,Te)]);return ke?(this.handleReadExtensions_(ke),ke):[]}return[]}writeFeaturesNode(e,Te){Te=this.adaptOptions(Te);const ke=createElementNS("http://www.topografix.com/GPX/1/1","gpx");return ke.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",XML_SCHEMA_INSTANCE_URI),ke.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION),ke.setAttribute("version","1.1"),ke.setAttribute("creator","OpenLayers"),pushSerializeAndPop({node:ke},GPX_SERIALIZERS,GPX_NODE_FACTORY,e,[Te]),ke}};const RTE_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions,type:makeObjectPropertySetter(readString),rtept:parseRtePt}),RTEPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),TRK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),type:makeObjectPropertySetter(readString),extensions:parseExtensions,trkseg:parseTrkSeg}),TRKSEG_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:parseTrkPt}),TRKPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),WPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime),magvar:makeObjectPropertySetter(readDecimal),geoidheight:makeObjectPropertySetter(readDecimal),name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,sym:makeObjectPropertySetter(readString),type:makeObjectPropertySetter(readString),fix:makeObjectPropertySetter(readString),sat:makeObjectPropertySetter(readPositiveInteger),hdop:makeObjectPropertySetter(readDecimal),vdop:makeObjectPropertySetter(readDecimal),pdop:makeObjectPropertySetter(readDecimal),ageofdgpsdata:makeObjectPropertySetter(readDecimal),dgpsid:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions}),LINK_SEQUENCE=["text","type"],LINK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode)}),RTE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","rtept"]),RTE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),rtept:makeArraySerializer(makeChildAppender(writeWptType))}),RTEPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time"]),TRK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","trkseg"]),TRK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),trkseg:makeArraySerializer(makeChildAppender(writeTrkSeg))}),TRKSEG_NODE_FACTORY=makeSimpleNodeFactory("trkpt"),TRKSEG_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:makeChildAppender(writeWptType)}),WPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),WPT_TYPE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeChildAppender(writeDecimalTextNode),time:makeChildAppender(writeDateTimeTextNode),magvar:makeChildAppender(writeDecimalTextNode),geoidheight:makeChildAppender(writeDecimalTextNode),name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),sym:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode),fix:makeChildAppender(writeStringTextNode),sat:makeChildAppender(writeNonNegativeIntegerTextNode),hdop:makeChildAppender(writeDecimalTextNode),vdop:makeChildAppender(writeDecimalTextNode),pdop:makeChildAppender(writeDecimalTextNode),ageofdgpsdata:makeChildAppender(writeDecimalTextNode),dgpsid:makeChildAppender(writeNonNegativeIntegerTextNode)}),GEOMETRY_TYPE_TO_NODENAME={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function GPX_NODE_FACTORY(Oe,e,Te){const ke=Oe.getGeometry();if(ke){const Be=GEOMETRY_TYPE_TO_NODENAME[ke.getType()];if(Be){const Ue=e[e.length-1].node;return createElementNS(Ue.namespaceURI,Be)}}}function appendCoordinate(Oe,e,Te,ke){return Oe.push(parseFloat(Te.getAttribute("lon")),parseFloat(Te.getAttribute("lat"))),"ele"in ke?(Oe.push(ke.ele),delete ke.ele,e.hasZ=!0):Oe.push(0),"time"in ke?(Oe.push(ke.time),delete ke.time,e.hasM=!0):Oe.push(0),Oe}function applyLayoutOptions(Oe,e,Te){let ke="XY",Be=2;if(Oe.hasZ&&Oe.hasM?(ke="XYZM",Be=4):Oe.hasZ?(ke="XYZ",Be=3):Oe.hasM&&(ke="XYM",Be=3),Be!==4){for(let Ue=0,He=e.length/4;Ue<He;Ue++)e[Ue*Be]=e[Ue*4],e[Ue*Be+1]=e[Ue*4+1],Oe.hasZ&&(e[Ue*Be+2]=e[Ue*4+2]),Oe.hasM&&(e[Ue*Be+2]=e[Ue*4+3]);if(e.length=e.length/4*Be,Te)for(let Ue=0,He=Te.length;Ue<He;Ue++)Te[Ue]=Te[Ue]/4*Be}return ke}function readAuthor(Oe,e){const Te=pushParseAndPop({},AUTHOR_PARSERS,Oe,e);if(Te)return Te}function readCopyright(Oe,e){const Te=pushParseAndPop({},COPYRIGHT_PARSERS,Oe,e);if(Te){const ke=Oe.getAttribute("author");return ke!==null&&(Te.author=ke),Te}}function parseBounds(Oe,e){const Te=e[e.length-1],ke=Oe.getAttribute("minlat"),Be=Oe.getAttribute("minlon"),Ue=Oe.getAttribute("maxlat"),He=Oe.getAttribute("maxlon");Be!==null&&ke!==null&&He!==null&&Ue!==null&&(Te.bounds=[[parseFloat(Be),parseFloat(ke)],[parseFloat(He),parseFloat(Ue)]])}function parseEmail(Oe,e){const Te=e[e.length-1],ke=Oe.getAttribute("id"),Be=Oe.getAttribute("domain");ke!==null&&Be!==null&&(Te.email=`${ke}@${Be}`)}function parseLink(Oe,e){const Te=e[e.length-1],ke=Oe.getAttribute("href");ke!==null&&(Te.link=ke),parseNode(LINK_PARSERS,Oe,e)}function parseExtensions(Oe,e){const Te=e[e.length-1];Te.extensionsNode_=Oe}function parseRtePt(Oe,e){const Te=pushParseAndPop({},RTEPT_PARSERS,Oe,e);if(Te){const ke=e[e.length-1],Be=ke.flatCoordinates,Ue=ke.layoutOptions;appendCoordinate(Be,Ue,Oe,Te)}}function parseTrkPt(Oe,e){const Te=pushParseAndPop({},TRKPT_PARSERS,Oe,e);if(Te){const ke=e[e.length-1],Be=ke.flatCoordinates,Ue=ke.layoutOptions;appendCoordinate(Be,Ue,Oe,Te)}}function parseTrkSeg(Oe,e){const Te=e[e.length-1];parseNode(TRKSEG_PARSERS,Oe,e);const ke=Te.flatCoordinates;Te.ends.push(ke.length)}function readRte(Oe,e){const Te=e[0],ke=pushParseAndPop({flatCoordinates:[],layoutOptions:{}},RTE_PARSERS,Oe,e);if(!ke)return;const Be=ke.flatCoordinates;delete ke.flatCoordinates;const Ue=ke.layoutOptions;delete ke.layoutOptions;const He=applyLayoutOptions(Ue,Be),We=new LineString(Be,He);transformGeometryWithOptions(We,!1,Te);const Cn=new Feature(We);return Cn.setProperties(ke,!0),Cn}function readTrk(Oe,e){const Te=e[0],ke=pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},TRK_PARSERS,Oe,e);if(!ke)return;const Be=ke.flatCoordinates;delete ke.flatCoordinates;const Ue=ke.ends;delete ke.ends;const He=ke.layoutOptions;delete ke.layoutOptions;const We=applyLayoutOptions(He,Be,Ue),Cn=new MultiLineString(Be,We,Ue);transformGeometryWithOptions(Cn,!1,Te);const En=new Feature(Cn);return En.setProperties(ke,!0),En}function readWpt(Oe,e){const Te=e[0],ke=pushParseAndPop({},WPT_PARSERS,Oe,e);if(!ke)return;const Be={},Ue=appendCoordinate([],Be,Oe,ke),He=applyLayoutOptions(Be,Ue),We=new Point$1(Ue,He);transformGeometryWithOptions(We,!1,Te);const Cn=new Feature(We);return Cn.setProperties(ke,!0),Cn}function writeLink(Oe,e,Te){Oe.setAttribute("href",e);const Be=Te[Te.length-1].properties,Ue=[Be.linkText,Be.linkType];pushSerializeAndPop({node:Oe},LINK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ue,Te,LINK_SEQUENCE)}function writeWptType(Oe,e,Te){const ke=Te[Te.length-1],Ue=ke.node.namespaceURI,He=ke.properties;switch(Oe.setAttributeNS(null,"lat",String(e[1])),Oe.setAttributeNS(null,"lon",String(e[0])),ke.geometryLayout){case"XYZM":e[3]!==0&&(He.time=e[3]);case"XYZ":e[2]!==0&&(He.ele=e[2]);break;case"XYM":e[2]!==0&&(He.time=e[2]);break}const Cn=Oe.nodeName=="rtept"?RTEPT_TYPE_SEQUENCE[Ue]:WPT_TYPE_SEQUENCE[Ue],En=makeSequence(He,Cn);pushSerializeAndPop({node:Oe,properties:He},WPT_TYPE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,En,Te,Cn)}function writeRte(Oe,e,Te){const ke=Te[0],Be=e.getProperties(),Ue={node:Oe};Ue.properties=Be;const He=e.getGeometry();if(He.getType()=="LineString"){const An=transformGeometryWithOptions(He,!0,ke);Ue.geometryLayout=An.getLayout(),Be.rtept=An.getCoordinates()}const We=Te[Te.length-1].node,Cn=RTE_SEQUENCE[We.namespaceURI],En=makeSequence(Be,Cn);pushSerializeAndPop(Ue,RTE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,En,Te,Cn)}function writeTrk(Oe,e,Te){const ke=Te[0],Be=e.getProperties(),Ue={node:Oe};Ue.properties=Be;const He=e.getGeometry();if(He.getType()=="MultiLineString"){const An=transformGeometryWithOptions(He,!0,ke);Be.trkseg=An.getLineStrings()}const We=Te[Te.length-1].node,Cn=TRK_SEQUENCE[We.namespaceURI],En=makeSequence(Be,Cn);pushSerializeAndPop(Ue,TRK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,En,Te,Cn)}function writeTrkSeg(Oe,e,Te){const ke={node:Oe};ke.geometryLayout=e.getLayout(),ke.properties={},pushSerializeAndPop(ke,TRKSEG_SERIALIZERS,TRKSEG_NODE_FACTORY,e.getCoordinates(),Te)}function writeWpt(Oe,e,Te){const ke=Te[0],Be=Te[Te.length-1];Be.properties=e.getProperties();const Ue=e.getGeometry();if(Ue.getType()=="Point"){const He=transformGeometryWithOptions(Ue,!0,ke);Be.geometryLayout=He.getLayout(),writeWptType(Oe,He.getCoordinates(),Te)}}var GPX=class Vf extends GPX$1{constructor(e){if(super(e),!(this instanceof Vf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(this.options=e||{},this.options.readExtensions&&typeof this.options.readExtensions=="function"){var Te=this.options.readExtensions;this.options.readExtensions=function(ke,Be){this.readExtensions(ke,Be),Te.call(this,ke,Be)}}else this.options.readExtensions=this.readExtensions;return(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,Te){var ke=super.readFeatures(e,Te);typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var Be=this;return ke.forEach(function(Ue,He,We){Ue.setId(He+1);var Cn=Ue.getProperties().desc;Cn&&Ue.setProperties({description:Cn});var En=Ue.getStyleFunction();if(!En){var An=Styling.defineStyleFunctionByDefault(Be.options.defaultStyle);An&&Ue.setStyle(An)}}),ke}writeFeatures(e,Te){if(e.forEach(function(Cn,En,An){var Sn=Cn.getProperties().description;Sn&&Cn.setProperties({desc:Sn}),Styling.definePropertiesFromStyle(Cn);var Tn=Cn.getGeometry().getType();if(Tn==="Polygon"){var Ln=Cn.clone();Ln.set("type",Tn),Ln.setGeometry(new LineString(Cn.getGeometry().getCoordinates())),e.push(Ln),An.splice(En,1)}else if(Tn==="MultiPolygon"){var Bn=Cn.clone();Bn.set("type",Tn),Bn.setGeometry(new MultiLineString(Cn.getGeometry().getCoordinates())),e.push(Bn),An.splice(En,1)}}),this.options.orderBy!==void 0){var ke=this.options.orderBy;if(ke){var Be=function(Cn,En){var An=Cn.get(ke)||0,Sn=En.get(ke)||0;return An.toString().localeCompare(Sn.toString(),void 0,{numeric:!0})};e.sort(Be)}}var Ue=super.writeFeaturesNode(e,Te);if(Ue===null)return null;this.options.hasOwnProperty("extensions")&&this.writeRootExtensions_(Ue,this.options.extensions),this.processExtensions_(Ue,e,{extensions:this.writeExtensions_});var He=Parser$1.toString(Ue);if(!He)return null;var We=Parser$1.format(He);return We===""?null:We}readExtensions(e,Te){var ke=Te;if(!Te){var Be=e.getProperties();for(const Cn in Be)if(Object.hasOwnProperty.call(Be,Cn)){const En=Be[Cn];if(En instanceof Node){ke=En;break}}}if(!ke){console.warn("node not found !");return}for(var Ue=0;Ue<ke.childNodes.length;Ue++){var He=ke.childNodes[Ue];He.nodeType===1&&e.set(He.nodeName,He.textContent)}Styling.APPLY_CONVERT_GEOM_GPX=!0;var We=Styling.defineStyleFromProperties(e);We&&e.setStyle(We)}readRootExtensions(e){for(var Te={},ke=this.source.childNodes[0],Be=ke.childNodes,Ue=0;Ue<Be.length;Ue++){var He=Be[Ue];if(He.nodeName==="metadata")for(var We=He.childNodes,Cn=0;Cn<We.length;Cn++){var En=We[Cn];if(En.nodeName==="extensions")for(var An=En.childNodes,Sn=0;Sn<An.length;Sn++){var Tn=An[Sn];if(Tn.nodeName==="data"){var Ln=Tn.attributes[0];if(Ln&&Ln.nodeName==="name"&&Ln.nodeValue===e){Te=JSON.parse(Tn.textContent);break}}}}}return Te}writeRootExtensions_(e,Te,ke){var Be=document.createElement("metadata"),Ue=document.createElement("extensions");function He(An,Sn){for(const ri in Sn)if(Object.hasOwnProperty.call(Sn,ri)){var Tn=Sn[ri]||"",Ln=document.createElement(ri);if(typeof Tn=="string"||typeof Tn=="number")Ln.innerHTML=Tn,An.appendChild(Ln);else if(Tn instanceof Array){Ln.setAttribute("type","array"),Ln.setAttribute("index",Tn.length);for(let si=0;si<Tn.length;si++){var Bn=Tn[si]||"",ei=document.createElement("value");if(typeof Bn=="string"||typeof Bn=="number")ei.innerHTML=Bn,Ln.appendChild(ei);else if(Bn instanceof Array){ei.setAttribute("type","array"),ei.setAttribute("index",Bn.length);for(let ai=0;ai<Bn.length;ai++){var ti=Bn[ai]||"",ni=document.createElement("value");(typeof ti=="string"||typeof ti=="number")&&(ni.innerHTML=ti,ei.appendChild(ni))}Ln.appendChild(ei)}else Bn instanceof Object&&Ln.appendChild(He(ei,Bn))}An.appendChild(Ln)}else Tn instanceof Object&&An.appendChild(He(Ln,Tn))}return An}if(ke)He(Ue,Te);else for(const An in Te)if(Object.hasOwnProperty.call(Te,An)){const Sn=Te[An];var We=document.createElement("data");We.setAttribute("name",An);var Cn=document.createTextNode(JSON.stringify(Sn));We.appendChild(Cn),Ue.appendChild(We)}Be.appendChild(Ue);var En=e.firstChild;e.insertBefore(Be,En)}writeExtensions_(e,Te){var ke=document.createElementNS(Te.parentNode.namespaceURI,"extensions");Styling.getListTags().forEach(Be=>{if(e.get(Be)){var Ue=document.createElementNS(Te.parentNode.namespaceURI,Be);Ue.innerHTML=e.get(Be),ke.appendChild(Ue)}}),Te.appendChild(ke)}processExtensions_(e,Te,ke){for(var Be=-1,Ue=e.childNodes,He=0;He<Ue.length;He++){var We=Ue[He];switch(We.nodeName){case"wpt":case"rte":case"trk":Be++;var Cn=Te[Be],En=Cn.getStyle();if(En){var An=ke.extensions;An&&typeof An=="function"&&An(Cn,We)}break;case"metadata":break;default:console.warn("nodename unknown :",We.nodeName);break}}}};window.ol&&window.ol.format&&(window.ol.format.GPXExtended=GPX);class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,Te){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,Te))}readFeatures(e,Te){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,Te))}readFeatureFromObject(e,Te){return abstract()}readFeaturesFromObject(e,Te){return abstract()}readGeometry(e,Te){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,Te))}readGeometryFromObject(e,Te){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,Te){return JSON.stringify(this.writeFeatureObject(e,Te))}writeFeatureObject(e,Te){return abstract()}writeFeatures(e,Te){return JSON.stringify(this.writeFeaturesObject(e,Te))}writeFeaturesObject(e,Te){return abstract()}writeGeometry(e,Te){return JSON.stringify(this.writeGeometryObject(e,Te))}writeGeometryObject(e,Te){return abstract()}}function getObject(Oe){if(typeof Oe=="string"){const e=JSON.parse(Oe);return e||null}return Oe!==null?Oe:null}let GeoJSON$1=class extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,Te){let ke=null;e.type==="Feature"?ke=e:ke={type:"Feature",geometry:e,properties:null};const Be=readGeometryInternal(ke.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:Be,id:ke.id,properties:ke.properties},Te);const Ue=new Feature;return this.geometryName_?Ue.setGeometryName(this.geometryName_):this.extractGeometryName_&&ke.geometry_name&&Ue.setGeometryName(ke.geometry_name),Ue.setGeometry(createGeometry(Be,Te)),"id"in ke&&Ue.setId(ke.id),ke.properties&&Ue.setProperties(ke.properties,!0),Ue}readFeaturesFromObject(e,Te){const ke=e;let Be=null;if(ke.type==="FeatureCollection"){const Ue=e;Be=[];const He=Ue.features;for(let We=0,Cn=He.length;We<Cn;++We){const En=this.readFeatureFromObject(He[We],Te);En&&Be.push(En)}}else Be=[this.readFeatureFromObject(e,Te)];return Be.flat()}readGeometryFromObject(e,Te){return readGeometry(e,Te)}readProjectionFromObject(e){const Te=e.crs;let ke;if(Te)if(Te.type=="name")ke=get$3(Te.properties.name);else if(Te.type==="EPSG")ke=get$3("EPSG:"+Te.properties.code);else throw new Error("Unknown SRS type");else ke=this.dataProjection;return ke}writeFeatureObject(e,Te){Te=this.adaptOptions(Te);const ke={type:"Feature",geometry:null,properties:null},Be=e.getId();if(Be!==void 0&&(ke.id=Be),!e.hasProperties())return ke;const Ue=e.getProperties(),He=e.getGeometry();return He&&(ke.geometry=writeGeometry(He,Te),delete Ue[e.getGeometryName()]),isEmpty$1(Ue)||(ke.properties=Ue),ke}writeFeaturesObject(e,Te){Te=this.adaptOptions(Te);const ke=[];for(let Be=0,Ue=e.length;Be<Ue;++Be)ke.push(this.writeFeatureObject(e[Be],Te));return{type:"FeatureCollection",features:ke}}writeGeometryObject(e,Te){return writeGeometry(e,this.adaptOptions(Te))}};function readGeometryInternal(Oe,e){if(!Oe)return null;let Te;switch(Oe.type){case"Point":{Te=readPointGeometry(Oe);break}case"LineString":{Te=readLineStringGeometry(Oe);break}case"Polygon":{Te=readPolygonGeometry(Oe);break}case"MultiPoint":{Te=readMultiPointGeometry(Oe);break}case"MultiLineString":{Te=readMultiLineStringGeometry(Oe);break}case"MultiPolygon":{Te=readMultiPolygonGeometry(Oe);break}case"GeometryCollection":{Te=readGeometryCollectionGeometry(Oe);break}default:throw new Error("Unsupported GeoJSON type: "+Oe.type)}return Te}function readGeometry(Oe,e){const Te=readGeometryInternal(Oe);return createGeometry(Te,e)}function readGeometryCollectionGeometry(Oe,e){return Oe.geometries.map(function(ke){return readGeometryInternal(ke)})}function readPointGeometry(Oe){const e=Oe.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(Oe){var ke;const e=Oe.coordinates,Te=e.flat();return{type:"LineString",flatCoordinates:Te,ends:[Te.length],layout:getLayoutForStride(((ke=e[0])==null?void 0:ke.length)||2)}}function readMultiLineStringGeometry(Oe){var Ue,He;const e=Oe.coordinates,Te=((He=(Ue=e[0])==null?void 0:Ue[0])==null?void 0:He.length)||2,ke=[],Be=deflateCoordinatesArray(ke,0,e,Te);return{type:"MultiLineString",flatCoordinates:ke,ends:Be,layout:getLayoutForStride(Te)}}function readMultiPointGeometry(Oe){var Te;const e=Oe.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(((Te=e[0])==null?void 0:Te.length)||2)}}function readMultiPolygonGeometry(Oe){var Ue,He;const e=Oe.coordinates,Te=[],ke=((He=(Ue=e[0])==null?void 0:Ue[0])==null?void 0:He[0].length)||2,Be=deflateMultiCoordinatesArray(Te,0,e,ke);return{type:"MultiPolygon",flatCoordinates:Te,ends:Be,layout:getLayoutForStride(ke)}}function readPolygonGeometry(Oe){var Ue,He;const e=Oe.coordinates,Te=[],ke=(He=(Ue=e[0])==null?void 0:Ue[0])==null?void 0:He.length,Be=deflateCoordinatesArray(Te,0,e,ke);return{type:"Polygon",flatCoordinates:Te,ends:Be,layout:getLayoutForStride(ke)}}function writeGeometry(Oe,e){Oe=transformGeometryWithOptions(Oe,!0,e);const Te=Oe.getType();let ke;switch(Te){case"Point":{ke=writePointGeometry(Oe);break}case"LineString":{ke=writeLineStringGeometry(Oe);break}case"Polygon":{ke=writePolygonGeometry(Oe,e);break}case"MultiPoint":{ke=writeMultiPointGeometry(Oe);break}case"MultiLineString":{ke=writeMultiLineStringGeometry(Oe);break}case"MultiPolygon":{ke=writeMultiPolygonGeometry(Oe,e);break}case"GeometryCollection":{ke=writeGeometryCollectionGeometry(Oe,e);break}case"Circle":{ke={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+Te)}return ke}function writeGeometryCollectionGeometry(Oe,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:Oe.getGeometriesArray().map(function(ke){return writeGeometry(ke,e)})}}function writeLineStringGeometry(Oe,e){return{type:"LineString",coordinates:Oe.getCoordinates()}}function writeMultiLineStringGeometry(Oe,e){return{type:"MultiLineString",coordinates:Oe.getCoordinates()}}function writeMultiPointGeometry(Oe,e){return{type:"MultiPoint",coordinates:Oe.getCoordinates()}}function writeMultiPolygonGeometry(Oe,e){let Te;return e&&(Te=e.rightHanded),{type:"MultiPolygon",coordinates:Oe.getCoordinates(Te)}}function writePointGeometry(Oe,e){return{type:"Point",coordinates:Oe.getCoordinates()}}function writePolygonGeometry(Oe,e){let Te;return e&&(Te=e.rightHanded),{type:"Polygon",coordinates:Oe.getCoordinates(Te)}}var GeoJSON=class $f extends GeoJSON$1{constructor(e){if(super(e),!(this instanceof $f))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.options=e||{},(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,Te){var ke=super.readFeatures(e,Te);return typeof e=="string"?this.source=JSON.parse(e):e!==null&&(this.source=e),ke.forEach(Be=>{var Ue=Be.getStyleFunction();if(Ue){var He=Ue.call(this,Be,0);He&&He.length!==0&&Be.setStyle(He[0])}else{var We=Styling.defineStyleFromProperties(Be);if(We)Be.setStyle(We);else{var Cn=Styling.defineStyleFunctionByDefault(this.options.defaultStyle);Cn&&(Be.setStyle(Cn),Styling.definePropertiesFromStyle(Be))}}}),ke}writeFeatures(e,Te){e.forEach(function(Be){Styling.definePropertiesFromStyle(Be)});var ke=this.writeFeaturesObject(e,Te);return this.options.hasOwnProperty("extensions")&&Object.assign(ke,this.options.extensions),JSON.stringify(ke)}readRootExtensions(e){return this.source[e]}};window.ol&&window.ol.format&&(window.ol.format.GeoJSONExtended=GeoJSON);var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,Te,ke,Be){var Ue=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,He=this.tileGrid,We=this.tileGrid.getTileCoordForCoordAndResolution(e,Te),Cn=function(si,ai,li){var Pi=[0,0,0],pi=createEmpty(),vi=si[1],Ri=si[2],Fi=ai.getTileCoordExtent(si),di=li.getExtent();if(di!=null&&li.isGlobal()){var ci=Math.ceil(getWidth(di)/getWidth(Fi));vi=vi%ci,Pi[0]=si[0],Pi[1]=vi,Pi[2]=si[2],Fi=ai.getTileCoordExtent(Pi,pi)}return intersects$1(Fi,di)?[si[0],vi,Ri]:null},En=He.getTileCoordExtent(We),An=Cn(We,He,ke);if(!(He.getResolutions().length<=We[0])){var Sn=He.getResolution(We[0]),Tn=He.getMatrixIds()[We[0]],Ln={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:An[1],TILEROW:An[2],TILEMATRIX:Tn,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper.assign(Ln,Be);var Bn=Math.floor((e[0]-En[0])/(Sn/Ue)),ei=Math.floor((En[3]-e[1])/(Sn/Ue)),ti=He.getTileSize(We[0]);Bn=Math.min(Bn,(ti[0]|ti)-1),ei=Math.max(ei,0),Ln.I=Bn,Ln.J=ei;var ni=this.urls[0],ri=Gp.Helper.normalyzeUrl(ni,Ln);return ri}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(Oe,e){var Te={};switch(e){case"EPSG:2154":Te={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:Te={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var ke=Oe*28e-5;for(var Be in Te)if(Te.hasOwnProperty(Be)&&Te[Be]<=ke)return Be=parseInt(Be,10),Be;return 0},getAttributions:function(Oe){var e=Oe.zoom,Te=[];if(Oe.originators!=null&&Oe.visibility)for(var ke,Be=0,Ue=Oe.originators.length;Be<Ue;Be++){ke=!0;for(var He=Oe.originators[Be],We=Oe.originators[Be].constraints||[],Cn=0,En=We.length;Cn<En;Cn++){var An=We[Cn];ke=!0;var Sn=this.getZoomLevelFromScaleDenominator(An.maxScaleDenominator,Oe.crs),Tn=this.getZoomLevelFromScaleDenominator(An.minScaleDenominator,Oe.crs)||21;Sn&&Sn>e&&(ke=!1),ke&&Tn&&Tn<e&&(ke=!1);var Ln=An.bbox;if(ke&&Ln){ke=!1;var Bn=Oe.extent;if(Bn){var ei=[Ln.top,Ln.left,Ln.bottom,Ln.right];if(this.intersects(Bn,ei)){ke=!0;break}}}}if(ke){var ti=He.logo,ni=He.url,ri=He.name?He.name:"",si=He.attribution,ai=document.createElement("div");ai.className="gp-control-attribution";var li=null;li=document.createElement("a"),li.className="gp-control-attribution-link",li.target="_blank",ai.appendChild(li),ni&&(li.href=ni);var Pi=!!ti,pi=null;Pi?(pi=document.createElement("img"),li?(pi.className="gp-control-attribution-image",li.appendChild(pi)):(pi.className="",ai.appendChild(pi)),pi.src=ti,pi.title=si||ri,pi.style.height="30px",pi.style.width="30px"):ri?li.textContent=ri:si?li.textContent=si:ni?li.textContent=ni:li.textContent="",Te.push(ai.innerHTML+" ")}}return Te},intersects:function(Oe,e){var Te=Oe[1]<=e[3]&&e[1]<=Oe[3],ke=Oe[2]<=e[0]&&e[2]<=Oe[0];return Te&&ke}},Config={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var Oe=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return Oe.Gp&&Oe.Gp.Config&&Oe.Gp.Config.layers&&Object.keys(Oe.Gp.Config.layers).length!==0?(this.configuration=Oe.Gp.Config,!0):!1}};LoggerByDefault.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration,ke=Te?Te.params:null,Be=e.apiKey;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ue=Config.configuration.getLayerId(e.layer,"WMTS");if(!Ue)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(Te=Config.configuration.getLayerConf(Ue),!Te)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");Be=Config.configuration.getLayerKey(Ue)[0],ke=Config.configuration.getLayerParams(e.layer,"WMTS")}var He=e.ssl===!1?"http://":"https://",We={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(ke.url.includes("/private/")){var Cn=e.apiKey||Be;if(!Cn)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");We.apikey=Cn}var En={url:Gp.Helper.normalyzeUrl(ke.url.replace(/(http|https):\/\//,He),We,!1),version:ke.version,style:ke.styles,format:ke.format,projection:ke.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(ke.minScale),layer:e.layer,matrixSet:ke.TMSLink,tileGrid:new WMTSTileGrid({resolutions:ke.nativeResolutions,matrixIds:ke.matrixIds,origin:[Object.values(ke.tileMatrices)[0].topLeftCorner.x,Object.values(ke.tileMatrices)[0].topLeftCorner.y]}),crossOrigin:"anonymous"};return Helper.mergeParams(En,e.olParams),e.olParams&&!ke.originators&&(ke.originators=e.olParams.attributions),super(En),this._originators=ke.originators,this._legends=e.legends||ke.legends,this._metadata=e.metadata||ke.metadata,this._description=e.description||ke.description,this._title=e.title||ke.title,this._quicklookUrl=e.quicklookUrl||ke.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);LoggerByDefault.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration,ke=Te?Te.params:null,Be=e.apiKey;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ue=Config.configuration.getLayerId(e.layer,"WMS");if(!Ue)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(Te=Config.configuration.getLayerConf(Ue),!Te)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");Be=Config.configuration.getLayerKey(Ue)[0],ke=Config.configuration.getLayerParams(e.layer,"WMS")}var He=e.ssl===!1?"http://":"https://",We={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(ke.url.includes("/private/")){var Cn=e.apiKey||Be;if(!Cn)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");We.apikey=Cn}var En={url:Gp.Helper.normalyzeUrl(ke.url.replace(/(http|https):\/\//,He),We,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:ke.version,STYLES:ke.styles,FORMAT:ke.format},crossOrigin:"anonymous"};return Helper.mergeParams(En,e.olParams),e.olParams&&!ke.originators&&(ke.originators=e.olParams.attributions),super(En),this._originators=ke.originators,this._legends=e.legends||ke.legends,this._metadata=e.metadata||ke.metadata,this._title=e.title||ke.title,this._description=e.description||ke.description,this._quicklookUrl=e.quicklookUrl||ke.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);LoggerByDefault.getLogger("sourcewfs");var SourceWFS=class extends VectorSource{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration,ke=Te?Te.params:null,Be=e.apiKey;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ue=Config.configuration.getLayerId(e.layer,"WFS");if(!Ue)throw new Error(`ERROR : WFS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(Te=Config.configuration.getLayerConf(Ue),!Te)throw new Error("ERROR : WFS Layer configuration cannot be found in Geoportal.");Be=Config.configuration.getLayerKey(Ue)[0],ke=Config.configuration.getLayerParams(e.layer,"WFS")}var He=e.ssl===!1?"http://":"https://",We={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(ke.url.includes("/private/")){var Cn=e.apiKey||Be;if(!Cn)throw new Error("ERROR : WFS Layer apiKey cannot be found in Geoportal Configuration.");We.apikey=Cn}var En=(Sn,Tn,Ln,Bn)=>{const ei=new XMLHttpRequest;ei.open("GET",Tn);const ti=function(){Sn.removeLoadedExtent(extent),Bn()};ei.onerror=ti,ei.onload=function(){if(ei.status==200){var ni=JSON.parse(ei.responseText);const ri=Sn.getFormat().readFeatures(ni);if(Sn.addFeatures(ri),Ln(ri),ni.links)for(let si=0;si<ni.links.length;si++){const ai=ni.links[si];ai.rel==="next"&&En(Sn,ai.href,Ln,Bn)}}else ti()},ei.send()},An={format:new GeoJSON$1,loader:function(Sn,Tn,Ln,Bn,ei){var ti=this;const ni=e.maxFeatures,ri=e.layer,si=Ln.getCode(),ai=Gp.Helper.normalyzeUrl(ke.url.replace(/(http|https):\/\//,He),We,!1)+"&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typename="+ri+"&outputFormat=application/json&srsname="+si+"&bbox="+Sn.join(",")+","+si+"&maxFeatures="+ni+"&count="+ni+"&startIndex=0";En(ti,ai,Bn,ei)},strategy:tile(createXYZ({minZoom:e.olParams.minZoom||15,maxZoom:e.olParams.maxZoom||21,tileSize:512})),crossOrigin:"anonymous"};return Helper.mergeParams(An,e.olParams),e.olParams&&!ke.originators&&(ke.originators=e.olParams.attributions),super(An),this._originators=ke.originators,this._legends=e.legends||ke.legends,this._metadata=e.metadata||ke.metadata,this._title=e.title||ke.title,this._description=e.description||ke.description,this._quicklookUrl=e.quicklookUrl||ke.quicklookUrl,this.name=e.layer,this.service="WFS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWFS=SourceWFS);function asImageLike(Oe){return Oe instanceof Image||Oe instanceof HTMLCanvasElement||Oe instanceof HTMLVideoElement||Oe instanceof ImageBitmap?Oe:null}const disposedError=new Error("disposed"),defaultSize=[256,256];class DataTile extends Tile{constructor(e){const Te=TileState.IDLE;super(e.tileCoord,Te,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=asImageLike(this.data_);return e?[e.width,e.height]:defaultSize}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();const e=this;this.loader_().then(function(Te){e.data_=Te,e.state=TileState.LOADED,e.changed()}).catch(function(Te){e.error_=Te,e.state=TileState.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(disposedError),this.controller_=null),super.disposeInternal()}}class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Disposable&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let Te=this.oldest_;for(;Te;)e(Te.value_,Te.key_,this),Te=Te.newer}get(e,Te){const ke=this.entries_[e];return assert(ke!==void 0,"Tried to get a value for a key that does not exist in the cache"),ke===this.newest_||(ke===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(ke.newer.older=ke.older,ke.older.newer=ke.newer),ke.newer=null,ke.older=this.newest_,this.newest_.newer=ke,this.newest_=ke),ke.value_}remove(e){const Te=this.entries_[e];return assert(Te!==void 0,"Tried to get a value for a key that does not exist in the cache"),Te===this.newest_?(this.newest_=Te.older,this.newest_&&(this.newest_.newer=null)):Te===this.oldest_?(this.oldest_=Te.newer,this.oldest_&&(this.oldest_.older=null)):(Te.newer.older=Te.older,Te.older.newer=Te.newer),delete this.entries_[e],--this.count_,Te.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let Te=0,ke;for(ke=this.newest_;ke;ke=ke.older)e[Te++]=ke.key_;return e}getValues(){const e=new Array(this.count_);let Te=0,ke;for(ke=this.newest_;ke;ke=ke.older)e[Te++]=ke.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var Te;return(Te=this.entries_[e])==null?void 0:Te.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,Te){this.get(e),this.entries_[e].value_=Te}set(e,Te){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const ke={key_:e,newer:null,older:this.newest_,value_:Te};this.newest_?this.newest_.newer=ke:this.oldest_=ke,this.newest_=ke,this.entries_[e]=ke,++this.count_}setSize(e){this.highWaterMark=e}}function getCacheKey(Oe,e,Te,ke){return`${Oe},${getKeyZXY(e,Te,ke)}`}function addTileToLookup(Oe,e,Te){if(!(Te in Oe))return Oe[Te]=new Set([e]),!0;const ke=Oe[Te],Be=ke.has(e);return Be||ke.add(e),!Be}function removeTileFromLookup(Oe,e,Te){const ke=Oe[Te];return ke?ke.delete(e):!1}function getRenderExtent(Oe,e){const Te=Oe.layerStatesArray[Oe.layerIndex];Te.extent&&(e=getIntersection(e,fromUserExtent(Te.extent,Oe.viewState.projection)));const ke=Te.layer.getRenderSource();if(!ke.getWrapX()){const Be=ke.getTileGridForProjection(Oe.viewState.projection).getExtent();Be&&(e=getIntersection(e,Be))}return e}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e,Te){super(e),Te=Te||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=createEmpty(),this.tempTileRange_=new TileRange(0,0,0,0),this.tempTileCoord_=createOrUpdate(0,0,0);const ke=Te.cacheSize!==void 0?Te.cacheSize:512;this.tileCache_=new LRUCache(ke),this.maxStaleKeys=ke*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,Te,ke,Be){const Ue=this.tileCache_,We=this.getLayer().getSource(),Cn=getCacheKey(We.getKey(),e,Te,ke);let En;if(Ue.containsKey(Cn))En=Ue.get(Cn);else{if(En=We.getTile(e,Te,ke,Be.pixelRatio,Be.viewState.projection),!En)return null;Ue.set(Cn,En)}return En}getTile(e,Te,ke,Be){const Ue=this.getOrCreateTile(e,Te,ke,Be);return Ue||null}getData(e){const Te=this.frameState;if(!Te)return null;const ke=this.getLayer(),Be=apply(Te.pixelToCoordinateTransform,e.slice()),Ue=ke.getExtent();if(Ue&&!containsCoordinate(Ue,Be))return null;const He=Te.viewState,We=ke.getRenderSource(),Cn=We.getTileGridForProjection(He.projection),En=We.getTilePixelRatio(Te.pixelRatio);for(let An=Cn.getZForResolution(He.resolution);An>=Cn.getMinZoom();--An){const Sn=Cn.getTileCoordForCoordAndZ(Be,An),Tn=this.getTile(An,Sn[1],Sn[2],Te);if(!Tn||Tn.getState()!==TileState.LOADED)continue;const Ln=Cn.getOrigin(An),Bn=toSize(Cn.getTileSize(An)),ei=Cn.getResolution(An);let ti;if(Tn instanceof ImageTile||Tn instanceof ReprojTile)ti=Tn.getImage();else if(Tn instanceof DataTile){if(ti=asImageLike(Tn.getData()),!ti)continue}else continue;const ni=Math.floor(En*((Be[0]-Ln[0])/ei-Sn[1]*Bn[0])),ri=Math.floor(En*((Ln[1]-Be[1])/ei-Sn[2]*Bn[1])),si=Math.round(En*We.getGutterForProjection(He.projection));return this.getImageData(ti,ni+si,ri+si)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const Te=this.getLayer().getSource();if(!Te)return!1;const ke=Te.getRevision();return this.renderedRevision_?this.renderedRevision_!==ke&&(this.renderedRevision_=ke,this.renderedSourceKey_===Te.getKey()&&this.tileCache_.clear()):this.renderedRevision_=ke,!0}enqueueTiles(e,Te,ke,Be,Ue){const He=e.viewState,We=this.getLayer(),Cn=We.getRenderSource(),En=Cn.getTileGridForProjection(He.projection),An=getUid(Cn);An in e.wantedTiles||(e.wantedTiles[An]={});const Sn=e.wantedTiles[An],Tn=We.getMapInternal(),Ln=Math.max(ke-Ue,En.getMinZoom(),En.getZForResolution(Math.min(We.getMaxResolution(),Tn?Tn.getView().getResolutionForZoom(Math.max(We.getMinZoom(),0)):En.getResolution(0)),Cn.zDirection)),Bn=He.rotation,ei=Bn?getRotatedViewport(He.center,He.resolution,Bn,e.size):void 0;for(let ti=ke;ti>=Ln;--ti){const ni=En.getTileRangeForExtentAndZ(Te,ti,this.tempTileRange_),ri=En.getResolution(ti);for(let si=ni.minX;si<=ni.maxX;++si)for(let ai=ni.minY;ai<=ni.maxY;++ai){if(Bn&&!En.tileCoordIntersectsViewport([ti,si,ai],ei))continue;const li=this.getTile(ti,si,ai,e);if(!li||!addTileToLookup(Be,li,ti))continue;const pi=li.getKey();if(Sn[pi]=!0,li.getState()===TileState.IDLE&&!e.tileQueue.isKeyQueued(pi)){const vi=createOrUpdate(ti,si,ai,this.tempTileCoord_);e.tileQueue.enqueue([li,An,En.getTileCoordCenter(vi),ri])}}}}findStaleTile_(e,Te){const ke=this.tileCache_,Be=e[0],Ue=e[1],He=e[2],We=this.getStaleKeys();for(let Cn=0;Cn<We.length;++Cn){const En=getCacheKey(We[Cn],Be,Ue,He);if(ke.containsKey(En)){const An=ke.peek(En);if(An.getState()===TileState.LOADED)return An.endTransition(getUid(this)),addTileToLookup(Te,An,Be),!0}}return!1}findAltTiles_(e,Te,ke,Be){const Ue=e.getTileRangeForTileCoordAndZ(Te,ke,this.tempTileRange_);if(!Ue)return!1;let He=!0;const We=this.tileCache_,En=this.getLayer().getRenderSource().getKey();for(let An=Ue.minX;An<=Ue.maxX;++An)for(let Sn=Ue.minY;Sn<=Ue.maxY;++Sn){const Tn=getCacheKey(En,ke,An,Sn);let Ln=!1;if(We.containsKey(Tn)){const Bn=We.peek(Tn);Bn.getState()===TileState.LOADED&&(addTileToLookup(Be,Bn,ke),Ln=!0)}Ln||(He=!1)}return He}renderFrame(e,Te){this.renderComplete=!0;const ke=e.layerStatesArray[e.layerIndex],Be=e.viewState,Ue=Be.projection,He=Be.resolution,We=Be.center,Cn=e.pixelRatio,En=this.getLayer(),An=En.getSource(),Sn=An.getTileGridForProjection(Ue),Tn=Sn.getZForResolution(He,An.zDirection),Ln=Sn.getResolution(Tn),Bn=An.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==Bn&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=Bn):this.renderedSourceKey_=Bn;let ei=e.extent;const ti=An.getTilePixelRatio(Cn);this.prepareContainer(e,Te);const ni=this.context.canvas.width,ri=this.context.canvas.height,si=ke.extent&&fromUserExtent(ke.extent);si&&(ei=getIntersection(ei,fromUserExtent(ke.extent)));const ai=Ln*ni/2/ti,li=Ln*ri/2/ti,Pi=[We[0]-ai,We[1]-li,We[0]+ai,We[1]+li],pi={};this.renderedTiles.length=0;const vi=En.getPreload();if(e.nextExtent){const sr=Sn.getZForResolution(Be.nextResolution,An.zDirection),Cr=getRenderExtent(e,e.nextExtent);this.enqueueTiles(e,Cr,sr,pi,vi)}const Ri=getRenderExtent(e,ei);if(this.enqueueTiles(e,Ri,Tn,pi,0),vi>0&&setTimeout(()=>{this.enqueueTiles(e,Ri,Tn-1,pi,vi-1)},0),!(Tn in pi))return this.container;const Fi=getUid(this),di=e.time;for(const sr of pi[Tn]){const Cr=sr.getState();if(Cr===TileState.EMPTY)continue;const pr=sr.tileCoord;if(Cr===TileState.LOADED&&sr.getAlpha(Fi,di)===1){sr.endTransition(Fi);continue}if(Cr!==TileState.ERROR&&(this.renderComplete=!1),this.findStaleTile_(pr,pi)){removeTileFromLookup(pi,sr,Tn),e.animate=!0;continue}if(this.findAltTiles_(Sn,pr,Tn+1,pi))continue;const er=Sn.getMinZoom();for(let hr=Tn-1;hr>=er&&!this.findAltTiles_(Sn,pr,hr,pi);--hr);}const ci=Ln/He*Cn/ti,Mi=this.getRenderContext(e);compose(this.tempTransform,ni/2,ri/2,ci,ci,0,-ni/2,-ri/2),ke.extent&&this.clipUnrotated(Mi,e,si),An.getInterpolate()||(Mi.imageSmoothingEnabled=!1),this.preRender(Mi,e);const Oi=Object.keys(pi).map(Number);Oi.sort(ascending);let Hi;const Ki=[],or=[];for(let sr=Oi.length-1;sr>=0;--sr){const Cr=Oi[sr],pr=An.getTilePixelSize(Cr,Cn,Ue),Li=Sn.getResolution(Cr)/Ln,er=pr[0]*Li*ci,hr=pr[1]*Li*ci,mr=Sn.getTileCoordForCoordAndZ(getTopLeft(Pi),Cr),_r=Sn.getTileCoordExtent(mr),dr=apply(this.tempTransform,[ti*(_r[0]-Pi[0])/Ln,ti*(Pi[3]-_r[3])/Ln]),cr=ti*An.getGutterForProjection(Ue);for(const gr of pi[Cr]){if(gr.getState()!==TileState.LOADED)continue;const vr=gr.tileCoord,Fr=mr[1]-vr[1],zr=Math.round(dr[0]-(Fr-1)*er),tr=mr[2]-vr[2],fr=Math.round(dr[1]-(tr-1)*hr),ar=Math.round(dr[0]-Fr*er),nr=Math.round(dr[1]-tr*hr),Dr=zr-ar,kr=fr-nr,Ir=Oi.length===1;let Mr=!1;Hi=[ar,nr,ar+Dr,nr,ar+Dr,nr+kr,ar,nr+kr];for(let Rr=0,Nr=Ki.length;Rr<Nr;++Rr)if(!Ir&&Cr<or[Rr]){const Ar=Ki[Rr];intersects$1([ar,nr,ar+Dr,nr+kr],[Ar[0],Ar[3],Ar[4],Ar[7]])&&(Mr||(Mi.save(),Mr=!0),Mi.beginPath(),Mi.moveTo(Hi[0],Hi[1]),Mi.lineTo(Hi[2],Hi[3]),Mi.lineTo(Hi[4],Hi[5]),Mi.lineTo(Hi[6],Hi[7]),Mi.moveTo(Ar[6],Ar[7]),Mi.lineTo(Ar[4],Ar[5]),Mi.lineTo(Ar[2],Ar[3]),Mi.lineTo(Ar[0],Ar[1]),Mi.clip())}Ki.push(Hi),or.push(Cr),this.drawTile(gr,e,ar,nr,Dr,kr,cr,Ir),Mr&&Mi.restore(),this.renderedTiles.unshift(gr),this.updateUsedTiles(e.usedTiles,An,gr)}}if(this.renderedResolution=Ln,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,Pi),this.renderedExtent_=Pi,this.renderedPixelRatio=Cn,this.postRender(this.context,e),ke.extent&&Mi.restore(),Mi.imageSmoothingEnabled=!0,this.renderComplete){const sr=(Cr,pr)=>{const wr=getUid(An),Li=pr.wantedTiles[wr],er=Li?Object.keys(Li).length:0;this.updateCacheSize(er),this.tileCache_.expireCache()};e.postRenderFunctions.push(sr)}return this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,Te,ke,Be,Ue,He,We,Cn){let En;if(e instanceof DataTile){if(En=asImageLike(e.getData()),!En)throw new Error("Rendering array data is not yet supported")}else En=this.getTileImage(e);if(!En)return;const An=this.getRenderContext(Te),Sn=getUid(this),Tn=Te.layerStatesArray[Te.layerIndex],Ln=Tn.opacity*(Cn?e.getAlpha(Sn,Te.time):1),Bn=Ln!==An.globalAlpha;Bn&&(An.save(),An.globalAlpha=Ln),An.drawImage(En,We,We,En.width-2*We,En.height-2*We,ke,Be,Ue,He),Bn&&An.restore(),Ln!==Tn.opacity?Te.animate=!0:Cn&&e.endTransition(Sn)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,Te,ke){const Be=getUid(Te);Be in e||(e[Be]={}),e[Be][ke.getKey()]=!0}}const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer$1{constructor(e){e=e||{};const Te=Object.assign({},e),ke=e.cacheSize;delete e.cacheSize,delete Te.preload,delete Te.useInterimTilesOnError,super(Te),this.on,this.once,this.un,this.cacheSize_=ke,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this,{cacheSize:this.getCacheSize()})}}var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var ke=Config.configuration.getLayerId(e.layer,"WMTS");if(Te=Config.configuration.getLayerConf(ke),!Te)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Be;e.olParams&&e.olParams.sourceParams&&(Be=e.olParams.sourceParams);var Ue=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:Be}),He={source:Ue};if(Ue.getLayer()!==void 0&&Te.globalConstrainWFSts&&Te.globalConstraints.projection){var We;typeof Te.globalConstraints.projection=="string"&&(We=get$3(Te.globalConstraints.projection)),We&&We.getUnits()&&(We.getUnits()==="m"?(He.minResolution=(Te.globalConstraints.minScale-1)*28e-5,He.maxResolution=(Te.globalConstraints.maxScale+1)*28e-5):We.getUnits()==="degrees"&&(He.minResolution=(Te.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),He.maxResolution=(Te.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(He,e.olParams),super(He),this.name=e.layer,this.service="WMTS",this.config=Te,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var ke=Config.configuration.getLayerId(e.layer,"WMS");if(Te=Config.configuration.getLayerConf(ke),!Te)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Be;e.olParams&&e.olParams.sourceParams&&(Be=e.olParams.sourceParams);var Ue=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:Be}),He={source:Ue};if(Ue.getParams().LAYERS!==void 0&&Be&&Be.projection){var We=[Te.globalConstraints.extent.left,Te.globalConstraints.extent.bottom,Te.globalConstraints.extent.right,Te.globalConstraints.extent.top];He.extent=transformExtent(We,"EPSG:4326",Be.projection);var Cn;typeof Be.projection=="string"?Cn=get$3(Be.projection):typeof Be.projection=="object"&&Be.projection.getCode()&&(Cn=get$3(Be.projection.getCode())),Cn&&Cn.getUnits()&&(Cn.getUnits()==="m"?(He.minResolution=(Te.globalConstraints.minScale-1)*28e-5,He.maxResolution=(Te.globalConstraints.maxScale+1)*28e-5):Cn.getUnits()==="degrees"&&(He.minResolution=(Te.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),He.maxResolution=(Te.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(He,e.olParams),super(He),this.name=e.layer,this.service="WMS",this.config=Te,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);const MAXFEATURES=500,MINZOOMDEFAULT=15,MAXZOOMDEFAULT=21,STYLEBYDEFAULT=new Style$1({stroke:new Stroke({color:"rgba(0, 0, 255, 1.0)",width:2}),fill:new Fill({color:"rgba(0, 0, 255, 0.5)"})});var LayerWFS=class extends VectorLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var Te=e.configuration;if(!Te){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var ke=Config.configuration.getLayerId(e.layer,"WFS");if(Te=Config.configuration.getLayerConf(ke),!Te)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Be;e.olParams&&e.olParams.sourceParams&&(Be=e.olParams.sourceParams);var Ue=new SourceWFS({layer:e.layer,configuration:e.configuration,maxFeatures:e.maxFeatures||MAXFEATURES,ssl:e.ssl,apiKey:e.apiKey,olParams:Be||{minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT}}),He={source:Ue};return e.olParams?Helper.mergeParams({minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},e.olParams):e.olParams={minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},Helper.mergeParams(He,e.olParams),super(He),this.name=e.layer,this.service="WFS",this.config=Te,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWFS=LayerWFS);const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e,Te){super(e,Te),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=create(),this.tileClipContexts_=null}drawTile(e,Te,ke,Be,Ue,He,We,Cn){this.updateExecutorGroup_(e,Te.pixelRatio,Te.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,Te),super.drawTile(e,Te,ke,Be,Ue,He,We,Cn)}getTile(e,Te,ke,Be){const Ue=this.getOrCreateTile(e,Te,ke,Be);if(!Ue)return null;const We=Be.viewState.resolution,Cn=Be.viewHints;return(!(Cn[ViewHint.ANIMATING]||Cn[ViewHint.INTERACTING])||!Ue.wantedResolution)&&(Ue.wantedResolution=We),Ue}prepareFrame(e){const Te=this.getLayer().getRevision();return this.renderedLayerRevision_!==Te&&(this.renderedLayerRevision_=Te,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,Te,ke){const Be=this.getLayer(),Ue=Be.getRevision(),He=Be.getRenderOrder()||null,We=e.wantedResolution,Cn=e.getReplayState(Be);if(!Cn.dirty&&Cn.renderedResolution===We&&Cn.renderedRevision==Ue&&Cn.renderedRenderOrder==He)return;const En=Be.getSource(),An=!!Be.getDeclutter(),Sn=En.getTileGrid(),Ln=En.getTileGridForProjection(ke).getTileCoordExtent(e.wrappedTileCoord),Bn=En.getSourceTiles(Te,ke,e),ei=getUid(Be);delete e.hitDetectionImageData[ei],e.executorGroups[ei]=[],Cn.dirty=!1;for(let ti=0,ni=Bn.length;ti<ni;++ti){const ri=Bn[ti];if(ri.getState()!=TileState.LOADED)continue;const si=ri.tileCoord,ai=Sn.getTileCoordExtent(si),li=getIntersection(Ln,ai),Pi=buffer(li,Be.getRenderBuffer()*We,this.tempExtent),pi=equals$1(ai,li)?null:Pi,vi=new BuilderGroup(0,li,We,Te),Ri=getSquaredTolerance(We,Te),Fi=function(Hi,Ki){let or;const sr=Hi.getStyleFunction()||Be.getStyleFunction();if(sr&&(or=sr(Hi,We)),or){const Cr=this.renderFeature(Hi,Ri,or,vi,An,Ki);Cn.dirty=Cn.dirty||Cr}},di=ri.getFeatures();He&&He!==Cn.renderedRenderOrder&&di.sort(He);for(let Hi=0,Ki=di.length;Hi<Ki;++Hi){const or=di[Hi];(!pi||intersects$1(pi,or.getGeometry().getExtent()))&&Fi.call(this,or,Hi)}const ci=vi.finish(),Mi=Be.getRenderMode()!=="vector"&&An&&Bn.length===1?null:li,Oi=new ExecutorGroup(Mi,We,Te,En.getOverlaps(),ci,Be.getRenderBuffer(),!0);e.executorGroups[ei].push(Oi)}Cn.renderedRevision=Ue,Cn.renderedRenderOrder=He,Cn.renderedResolution=We}forEachFeatureAtCoordinate(e,Te,ke,Be,Ue){var si,ai;const He=Te.viewState.resolution,We=Te.viewState.rotation;ke=ke??0;const Cn=this.getLayer(),An=Cn.getSource().getTileGridForProjection(Te.viewState.projection),Sn=boundingExtent([e]);buffer(Sn,He*ke,Sn);const Tn={},Ln=function(li,Pi,pi){let vi=li.getId();vi===void 0&&(vi=getUid(li));const Ri=Tn[vi];if(Ri){if(Ri!==!0&&pi<Ri.distanceSq){if(pi===0)return Tn[vi]=!0,Ue.splice(Ue.lastIndexOf(Ri),1),Be(li,Cn,Pi);Ri.geometry=Pi,Ri.distanceSq=pi}}else{if(pi===0)return Tn[vi]=!0,Be(li,Cn,Pi);Ue.push(Tn[vi]={feature:li,layer:Cn,geometry:Pi,distanceSq:pi,callback:Be})}},Bn=this.renderedTiles,ei=getUid(Cn),ti=Cn.getDeclutter(),ni=ti?(ai=(si=Te.declutter)==null?void 0:si[ti])==null?void 0:ai.all().map(li=>li.value):null;let ri;e:for(let li=0,Pi=Bn.length;li<Pi;++li){const pi=Bn[li],vi=An.getTileCoordExtent(pi.wrappedTileCoord);if(!intersects$1(vi,Sn))continue;const Ri=pi.executorGroups[ei];for(let Fi=0,di=Ri.length;Fi<di;++Fi)if(ri=Ri[Fi].forEachFeatureAtCoordinate(e,He,We,ke,Ln,ni),ri)break e}return ri}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((Te,ke)=>{const Be=this.getLayer(),Ue=Be.getSource(),He=this.renderedProjection,We=He.getExtent(),Cn=this.renderedResolution,En=Ue.getTileGridForProjection(He),An=apply(this.renderedPixelToCoordinateTransform_,e.slice()),Sn=En.getTileCoordForCoordAndResolution(An,Cn).toString(),Tn=this.renderedTiles.find(si=>si.tileCoord.toString()===Sn&&si.getState()===TileState.LOADED);if(!Tn||Tn.loadingSourceTiles>0){Te([]);return}Ue.getWrapX()&&He.canWrapX()&&!containsExtent(We,En.getTileCoordExtent(Tn.tileCoord))&&wrapX$1(An,He);const Ln=getUid(Be),Bn=En.getTileCoordExtent(Tn.wrappedTileCoord),ei=getTopLeft(Bn),ti=[(An[0]-ei[0])/Cn,(ei[1]-An[1])/Cn],ni=Tn.getSourceTiles().reduce((si,ai)=>si.concat(ai.getFeatures()),[]);let ri=Tn.hitDetectionImageData[Ln];if(!ri){const si=toSize(En.getTileSize(En.getZForResolution(Cn,Ue.zDirection))),ai=this.renderedRotation_,li=[this.getRenderTransform(En.getTileCoordCenter(Tn.wrappedTileCoord),Cn,0,HIT_DETECT_RESOLUTION,si[0]*HIT_DETECT_RESOLUTION,si[1]*HIT_DETECT_RESOLUTION,0)];ri=createHitDetectionImageData(si,li,ni,Be.getStyleFunction(),En.getTileCoordExtent(Tn.wrappedTileCoord),Tn.getReplayState(Be).renderedResolution,ai),Tn.hitDetectionImageData[Ln]=ri}Te(hitDetect(ti,ni,ri))})}getFeaturesInExtent(e){const Te=[],ke=this.getTileCache();if(ke.getCount()===0)return Te;const Ue=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),He=Ue.getZForResolution(this.renderedResolution),We={};return ke.forEach(Cn=>{if(Cn.tileCoord[0]!==He||Cn.getState()!==TileState.LOADED)return;const En=Cn.getSourceTiles();for(let An=0,Sn=En.length;An<Sn;++An){const Tn=En[An],Ln=Tn.getKey();if(Ln in We)continue;We[Ln]=!0;const Bn=Tn.tileCoord;if(intersects$1(e,Ue.getTileCoordExtent(Bn))){const ei=Tn.getFeatures();if(ei)for(let ti=0,ni=ei.length;ti<ni;++ti){const ri=ei[ti],si=ri.getGeometry();intersects$1(e,si.getExtent())&&Te.push(ri)}}}}),Te}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,Te){var Tn;const ke=this.context,Be=ke.globalAlpha;ke.globalAlpha=Te.opacity;const Ue=e.viewHints,He=!(Ue[ViewHint.ANIMATING]||Ue[ViewHint.INTERACTING]),We=[this.context.canvas.width,this.context.canvas.height],Cn=this.getLayer().getDeclutter(),En=Cn?(Tn=e.declutter)==null?void 0:Tn[Cn]:void 0,An=getUid(this.getLayer()),Sn=this.renderedTiles;for(let Ln=0,Bn=Sn.length;Ln<Bn;++Ln){const ei=Sn[Ln],ti=ei.executorGroups[An];if(ti)for(let ni=ti.length-1;ni>=0;--ni)ti[ni].execute(this.context,We,this.getTileRenderTransform(ei,e),e.viewState.rotation,He,DECLUTTER,En)}ke.globalAlpha=Be}renderDeferredInternal(e){const Te=this.renderedTiles,ke=getUid(this.getLayer()),Be=Te.reduce((Cn,En,An)=>(En.executorGroups[ke].forEach(Sn=>Cn.push({executorGroup:Sn,index:An})),Cn),[]),Ue=Be.map(({executorGroup:Cn})=>Cn.getDeferredZIndexContexts()),He={};for(let Cn=0,En=Be.length;Cn<En;++Cn){const An=Be[Cn].executorGroup.getDeferredZIndexContexts();for(const Sn in An)He[Sn]=!0}Object.keys(He).map(Number).sort(ascending).forEach(Cn=>{Ue.forEach((En,An)=>{En[Cn]&&(En[Cn].forEach(Sn=>{const{executorGroup:Tn,index:Ln}=Be[An],Bn=Tn.getRenderedContext(),ei=Bn.globalAlpha;Bn.globalAlpha=this.renderedOpacity_;const ti=this.tileClipContexts_[Ln];ti&&ti.draw(Bn),Sn.draw(Bn),ti&&Bn.restore(),Bn.globalAlpha=ei,Sn.clear()}),En[Cn].length=0)})})}getTileRenderTransform(e,Te){const ke=Te.pixelRatio,Be=Te.viewState,Ue=Be.center,He=Be.resolution,We=Be.rotation,Cn=Te.size,En=Math.round(Cn[0]*ke),An=Math.round(Cn[1]*ke),Tn=this.getLayer().getSource().getTileGridForProjection(Te.viewState.projection),Ln=e.tileCoord,Bn=Tn.getTileCoordExtent(e.wrappedTileCoord),ei=Tn.getTileCoordExtent(Ln,this.tempExtent)[0]-Bn[0];return multiply(scale(this.inversePixelTransform.slice(),1/ke,1/ke),this.getRenderTransform(Ue,He,We,ke,En,An,ei))}postRender(e,Te){var li;const ke=Te.viewHints,Be=!(ke[ViewHint.ANIMATING]||ke[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=Te.pixelToCoordinateTransform.slice(),this.renderedRotation_=Te.viewState.rotation,this.renderedOpacity_=Te.layerStatesArray[Te.layerIndex].opacity;const Ue=this.getLayer(),He=Ue.getRenderMode(),We=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const Cn=Ue.getDeclutter(),En=Cn?VECTOR_REPLAYS[He].filter(Pi=>!DECLUTTER.includes(Pi)):VECTOR_REPLAYS[He],An=Te.viewState,Sn=An.rotation,Tn=Ue.getSource(),Bn=Tn.getTileGridForProjection(An.projection).getZForResolution(An.resolution,Tn.zDirection),ei=this.renderedTiles,ti=[],ni=[],ri=[],si=getUid(Ue);let ai=!0;for(let Pi=ei.length-1;Pi>=0;--Pi){const pi=ei[Pi];ai=ai&&!pi.getReplayState(Ue).dirty;const vi=pi.executorGroups[si].filter(Hi=>Hi.hasExecutors(En));if(vi.length===0)continue;const Ri=this.getTileRenderTransform(pi,Te),Fi=pi.tileCoord[0];let di=!1;const ci=vi[0].getClipCoords(Ri);let Mi=e,Oi;if(ci){Oi=new ZIndexContext,Mi=Oi.getContext();for(let Hi=0,Ki=ti.length;Hi<Ki;++Hi)if(Bn!==Fi&&Fi<ni[Hi]){const or=ti[Hi];intersects$1([ci[0],ci[3],ci[4],ci[7]],[or[0],or[3],or[4],or[7]])&&(di||(Mi.save(),di=!0),Mi.beginPath(),Mi.moveTo(ci[0],ci[1]),Mi.lineTo(ci[2],ci[3]),Mi.lineTo(ci[4],ci[5]),Mi.lineTo(ci[6],ci[7]),Mi.moveTo(or[6],or[7]),Mi.lineTo(or[4],or[5]),Mi.lineTo(or[2],or[3]),Mi.lineTo(or[0],or[1]),Mi.clip())}ti.push(ci),ni.push(Fi)}for(let Hi=0,Ki=vi.length;Hi<Ki;++Hi)vi[Hi].execute(e,[e.canvas.width,e.canvas.height],Ri,Sn,Be,En,(li=Te.declutter)==null?void 0:li[Cn]);di&&(Mi===e?Mi.restore():ri[Pi]=Oi)}e.globalAlpha=We,this.ready=ai,this.tileClipContexts_=ri,Te.declutter||this.renderDeferredInternal(Te),super.postRender(e,Te)}renderFeature(e,Te,ke,Be,Ue,He){if(!ke)return!1;let We=!1;if(Array.isArray(ke))for(let Cn=0,En=ke.length;Cn<En;++Cn)We=renderFeature$1(Be,e,ke[Cn],Te,this.boundHandleStyleImageChange_,void 0,Ue,He)||We;else We=renderFeature$1(Be,e,ke,Te,this.boundHandleStyleImageChange_,void 0,Ue,He);return We}tileImageNeedsRender_(e){const Te=this.getLayer();if(Te.getRenderMode()==="vector")return!1;const ke=e.getReplayState(Te),Be=Te.getRevision(),Ue=e.wantedResolution;return ke.renderedTileResolution!==Ue||ke.renderedTileRevision!==Be}renderTileImage_(e,Te){const ke=this.getLayer(),Be=e.getReplayState(ke),Ue=ke.getRevision(),He=e.executorGroups[getUid(ke)];Be.renderedTileRevision=Ue;const We=e.wrappedTileCoord,Cn=We[0],En=ke.getSource();let An=Te.pixelRatio;const Tn=Te.viewState.projection,Ln=En.getTileGridForProjection(Tn),Bn=Ln.getResolution(e.tileCoord[0]),ei=Te.pixelRatio/e.wantedResolution*Bn,ti=Ln.getResolution(Cn),ni=e.getContext();An=Math.round(Math.max(An,ei/An));const ri=En.getTilePixelSize(Cn,An,Tn);ni.canvas.width=ri[0],ni.canvas.height=ri[1];const si=An/ei;if(si!==1){const pi=reset(this.tmpTransform_);scale(pi,si,si),ni.setTransform.apply(ni,pi)}const ai=Ln.getTileCoordExtent(We,this.tempExtent),li=ei/ti,Pi=reset(this.tmpTransform_);scale(Pi,li,-li),translate(Pi,-ai[0],-ai[3]);for(let pi=0,vi=He.length;pi<vi;++pi)He[pi].execute(ni,[ni.canvas.width*si,ni.canvas.height*si],Pi,0,!0,IMAGE_REPLAYS[ke.getRenderMode()],null);Be.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const Te=Object.assign({},e);delete Te.preload;const ke=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete Te.useInterimTilesOnError,super(Te),this.on,this.once,this.un,this.cacheSize_=ke;const Be=e.renderMode||"hybrid";assert(Be=="hybrid"||Be=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=Be,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}function jsonp(Oe,e,Te,ke){const Be=document.createElement("script"),Ue="olc_"+getUid(e);function He(){delete window[Ue],Be.parentNode.removeChild(Be)}Be.async=!0,Be.src=Oe+(Oe.includes("?")?"&":"?")+"callback="+Ue;const We=setTimeout(function(){He(),Te&&Te()},1e4);window[Ue]=function(Cn){clearTimeout(We),He(),e(Cn)},document.head.appendChild(Be)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const Te=new XMLHttpRequest;Te.addEventListener("load",this.onXHRLoad_.bind(this)),Te.addEventListener("error",this.onXHRError_.bind(this)),Te.open("GET",e.url),Te.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const Te=e.target;if(!Te.status||Te.status>=200&&Te.status<300){let ke;try{ke=JSON.parse(Te.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(ke)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const Te=get$3("EPSG:4326"),ke=this.getProjection();let Be;if(e.bounds!==void 0){const En=getTransformFromProjections(Te,ke);Be=applyTransform(e.bounds,En)}const Ue=extentFromProjection(ke),He=e.minzoom||0,We=e.maxzoom||22,Cn=createXYZ({extent:Ue,maxZoom:We,minZoom:He,tileSize:this.tileSize_});if(this.tileGrid=Cn,this.tileUrlFunction=createFromTemplates(e.tiles,Cn),e.attribution&&!this.getAttributions()){const En=Be!==void 0?Be:Ue;this.setAttributions(function(An){return intersects$1(En,An.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),PBF_VARINT=0,PBF_FIXED64=1,PBF_BYTES=2,PBF_FIXED32=5;class Pbf{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,Te,ke=this.length){for(;this.pos<ke;){const Be=this.readVarint(),Ue=Be>>3,He=this.pos;this.type=Be&7,e(Ue,Te,this),this.pos===He&&this.skip(Be)}return Te}readMessage(e,Te){return this.readFields(e,Te,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const Te=this.buf;let ke,Be;return Be=Te[this.pos++],ke=Be&127,Be<128||(Be=Te[this.pos++],ke|=(Be&127)<<7,Be<128)||(Be=Te[this.pos++],ke|=(Be&127)<<14,Be<128)||(Be=Te[this.pos++],ke|=(Be&127)<<21,Be<128)?ke:(Be=Te[this.pos],ke|=(Be&15)<<28,readVarintRemainder(ke,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,Te=this.pos;return this.pos=e,e-Te>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?utf8TextDecoder.decode(this.buf.subarray(Te,e)):readUtf8(this.buf,Te,e)}readBytes(){const e=this.readVarint()+this.pos,Te=this.buf.subarray(this.pos,e);return this.pos=e,Te}readPackedVarint(e=[],Te){const ke=this.readPackedEnd();for(;this.pos<ke;)e.push(this.readVarint(Te));return e}readPackedSVarint(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const Te=this.readPackedEnd();for(;this.pos<Te;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===PBF_BYTES?this.readVarint()+this.pos:this.pos+1}skip(e){const Te=e&7;if(Te===PBF_VARINT)for(;this.buf[this.pos++]>127;);else if(Te===PBF_BYTES)this.pos=this.readVarint()+this.pos;else if(Te===PBF_FIXED32)this.pos+=4;else if(Te===PBF_FIXED64)this.pos+=8;else throw new Error(`Unimplemented type: ${Te}`)}writeTag(e,Te){this.writeVarint(e<<3|Te)}realloc(e){let Te=this.length||16;for(;Te<this.pos+e;)Te*=2;if(Te!==this.length){const ke=new Uint8Array(Te);ke.set(this.buf),this.buf=ke,this.dataView=new DataView(ke.buffer),this.length=Te}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){writeBigVarint(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const Te=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);const ke=this.pos-Te;ke>=128&&makeRoomForExtraLength(Te,ke,this),this.pos=Te-1,this.writeVarint(ke),this.pos+=ke}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const Te=e.length;this.writeVarint(Te),this.realloc(Te);for(let ke=0;ke<Te;ke++)this.buf[this.pos++]=e[ke]}writeRawMessage(e,Te){this.pos++;const ke=this.pos;e(Te,this);const Be=this.pos-ke;Be>=128&&makeRoomForExtraLength(ke,Be,this),this.pos=ke-1,this.writeVarint(Be),this.pos+=Be}writeMessage(e,Te,ke){this.writeTag(e,PBF_BYTES),this.writeRawMessage(Te,ke)}writePackedVarint(e,Te){Te.length&&this.writeMessage(e,writePackedVarint,Te)}writePackedSVarint(e,Te){Te.length&&this.writeMessage(e,writePackedSVarint,Te)}writePackedBoolean(e,Te){Te.length&&this.writeMessage(e,writePackedBoolean,Te)}writePackedFloat(e,Te){Te.length&&this.writeMessage(e,writePackedFloat,Te)}writePackedDouble(e,Te){Te.length&&this.writeMessage(e,writePackedDouble,Te)}writePackedFixed32(e,Te){Te.length&&this.writeMessage(e,writePackedFixed32,Te)}writePackedSFixed32(e,Te){Te.length&&this.writeMessage(e,writePackedSFixed32,Te)}writePackedFixed64(e,Te){Te.length&&this.writeMessage(e,writePackedFixed64,Te)}writePackedSFixed64(e,Te){Te.length&&this.writeMessage(e,writePackedSFixed64,Te)}writeBytesField(e,Te){this.writeTag(e,PBF_BYTES),this.writeBytes(Te)}writeFixed32Field(e,Te){this.writeTag(e,PBF_FIXED32),this.writeFixed32(Te)}writeSFixed32Field(e,Te){this.writeTag(e,PBF_FIXED32),this.writeSFixed32(Te)}writeFixed64Field(e,Te){this.writeTag(e,PBF_FIXED64),this.writeFixed64(Te)}writeSFixed64Field(e,Te){this.writeTag(e,PBF_FIXED64),this.writeSFixed64(Te)}writeVarintField(e,Te){this.writeTag(e,PBF_VARINT),this.writeVarint(Te)}writeSVarintField(e,Te){this.writeTag(e,PBF_VARINT),this.writeSVarint(Te)}writeStringField(e,Te){this.writeTag(e,PBF_BYTES),this.writeString(Te)}writeFloatField(e,Te){this.writeTag(e,PBF_FIXED32),this.writeFloat(Te)}writeDoubleField(e,Te){this.writeTag(e,PBF_FIXED64),this.writeDouble(Te)}writeBooleanField(e,Te){this.writeVarintField(e,+Te)}}function readVarintRemainder(Oe,e,Te){const ke=Te.buf;let Be,Ue;if(Ue=ke[Te.pos++],Be=(Ue&112)>>4,Ue<128||(Ue=ke[Te.pos++],Be|=(Ue&127)<<3,Ue<128)||(Ue=ke[Te.pos++],Be|=(Ue&127)<<10,Ue<128)||(Ue=ke[Te.pos++],Be|=(Ue&127)<<17,Ue<128)||(Ue=ke[Te.pos++],Be|=(Ue&127)<<24,Ue<128)||(Ue=ke[Te.pos++],Be|=(Ue&1)<<31,Ue<128))return toNum(Oe,Be,e);throw new Error("Expected varint not more than 10 bytes")}function toNum(Oe,e,Te){return Te?e*4294967296+(Oe>>>0):(e>>>0)*4294967296+(Oe>>>0)}function writeBigVarint(Oe,e){let Te,ke;if(Oe>=0?(Te=Oe%4294967296|0,ke=Oe/4294967296|0):(Te=~(-Oe%4294967296),ke=~(-Oe/4294967296),Te^4294967295?Te=Te+1|0:(Te=0,ke=ke+1|0)),Oe>=18446744073709552e3||Oe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(Te,ke,e),writeBigVarintHigh(ke,e)}function writeBigVarintLow(Oe,e,Te){Te.buf[Te.pos++]=Oe&127|128,Oe>>>=7,Te.buf[Te.pos++]=Oe&127|128,Oe>>>=7,Te.buf[Te.pos++]=Oe&127|128,Oe>>>=7,Te.buf[Te.pos++]=Oe&127|128,Oe>>>=7,Te.buf[Te.pos]=Oe&127}function writeBigVarintHigh(Oe,e){const Te=(Oe&7)<<4;e.buf[e.pos++]|=Te|((Oe>>>=3)?128:0),Oe&&(e.buf[e.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(e.buf[e.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(e.buf[e.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(e.buf[e.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(e.buf[e.pos++]=Oe&127)))))}function makeRoomForExtraLength(Oe,e,Te){const ke=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));Te.realloc(ke);for(let Be=Te.pos-1;Be>=Oe;Be--)Te.buf[Be+ke]=Te.buf[Be]}function writePackedVarint(Oe,e){for(let Te=0;Te<Oe.length;Te++)e.writeVarint(Oe[Te])}function writePackedSVarint(Oe,e){for(let Te=0;Te<Oe.length;Te++)e.writeSVarint(Oe[Te])}function writePackedFloat(Oe,e){for(let Te=0;Te<Oe.length;Te++)e.writeFloat(Oe[Te])}function writePackedDouble(Oe,e){for(let Te=0;Te<Oe.length;Te++)e.writeDouble(Oe[Te])}function writePackedBoolean(Oe,e){for(let Te=0;Te<Oe.length;Te++)e.writeBoolean(Oe[Te])}function writePackedFixed32(Oe,e){for(let Te=0;Te<Oe.length;Te++)e.writeFixed32(Oe[Te])}function writePackedSFixed32(Oe,e){for(let Te=0;Te<Oe.length;Te++)e.writeSFixed32(Oe[Te])}function writePackedFixed64(Oe,e){for(let Te=0;Te<Oe.length;Te++)e.writeFixed64(Oe[Te])}function writePackedSFixed64(Oe,e){for(let Te=0;Te<Oe.length;Te++)e.writeSFixed64(Oe[Te])}function readUtf8(Oe,e,Te){let ke="",Be=e;for(;Be<Te;){const Ue=Oe[Be];let He=null,We=Ue>239?4:Ue>223?3:Ue>191?2:1;if(Be+We>Te)break;let Cn,En,An;We===1?Ue<128&&(He=Ue):We===2?(Cn=Oe[Be+1],(Cn&192)===128&&(He=(Ue&31)<<6|Cn&63,He<=127&&(He=null))):We===3?(Cn=Oe[Be+1],En=Oe[Be+2],(Cn&192)===128&&(En&192)===128&&(He=(Ue&15)<<12|(Cn&63)<<6|En&63,(He<=2047||He>=55296&&He<=57343)&&(He=null))):We===4&&(Cn=Oe[Be+1],En=Oe[Be+2],An=Oe[Be+3],(Cn&192)===128&&(En&192)===128&&(An&192)===128&&(He=(Ue&15)<<18|(Cn&63)<<12|(En&63)<<6|An&63,(He<=65535||He>=1114112)&&(He=null))),He===null?(He=65533,We=1):He>65535&&(He-=65536,ke+=String.fromCharCode(He>>>10&1023|55296),He=56320|He&1023),ke+=String.fromCharCode(He),Be+=We}return ke}function writeUtf8(Oe,e,Te){for(let ke=0,Be,Ue;ke<e.length;ke++){if(Be=e.charCodeAt(ke),Be>55295&&Be<57344)if(Ue)if(Be<56320){Oe[Te++]=239,Oe[Te++]=191,Oe[Te++]=189,Ue=Be;continue}else Be=Ue-55296<<10|Be-56320|65536,Ue=null;else{Be>56319||ke+1===e.length?(Oe[Te++]=239,Oe[Te++]=191,Oe[Te++]=189):Ue=Be;continue}else Ue&&(Oe[Te++]=239,Oe[Te++]=191,Oe[Te++]=189,Ue=null);Be<128?Oe[Te++]=Be:(Be<2048?Oe[Te++]=Be>>6|192:(Be<65536?Oe[Te++]=Be>>12|224:(Oe[Te++]=Be>>18|240,Oe[Te++]=Be>>12&63|128),Oe[Te++]=Be>>6&63|128),Oe[Te++]=Be&63|128)}return Te}class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,Te,ke,Be){e.pos=Te.geometry;const Ue=e.readVarint()+e.pos;let He=1,We=0,Cn=0,En=0,An=0,Sn=0;for(;e.pos<Ue;){if(!We){const Tn=e.readVarint();He=Tn&7,We=Tn>>3}if(We--,He===1||He===2)Cn+=e.readSVarint(),En+=e.readSVarint(),He===1&&An>Sn&&(Be.push(An),Sn=An),ke.push(Cn,En),An+=2;else if(He===7)An>Sn&&(ke.push(ke[Sn],ke[Sn+1]),An+=2);else throw new Error("Invalid command found in the PBF")}An>Sn&&(Be.push(An),Sn=An)}createFeature_(e,Te,ke){const Be=Te.type;if(Be===0)return null;let Ue;const He=Te.properties;let We;this.idProperty_?(We=He[this.idProperty_],delete He[this.idProperty_]):We=Te.id,He[this.layerName_]=Te.layer.name;const Cn=[],En=[];this.readRawGeometry_(e,Te,Cn,En);const An=getGeometryType(Be,En.length);if(this.featureClass===RenderFeature)Ue=new this.featureClass(An,Cn,En,2,He,We),Ue.transform(ke.dataProjection);else{let Sn;if(An=="Polygon"){const Bn=inflateEnds(Cn,En);Sn=Bn.length>1?new MultiPolygon(Cn,"XY",Bn):new Polygon(Cn,"XY",En)}else Sn=An==="Point"?new Point$1(Cn,"XY"):An==="LineString"?new LineString(Cn,"XY"):An==="MultiPoint"?new MultiPoint(Cn,"XY"):An==="MultiLineString"?new MultiLineString(Cn,"XY",En):null;const Tn=this.featureClass;Ue=new Tn,this.geometryName_&&Ue.setGeometryName(this.geometryName_);const Ln=transformGeometryWithOptions(Sn,!1,ke);Ue.setGeometry(Ln),We!==void 0&&Ue.setId(We),Ue.setProperties(He,!0)}return Ue}getType(){return"arraybuffer"}readFeatures(e,Te){const ke=this.layers_;Te=this.adaptOptions(Te);const Be=get$3(Te.dataProjection);Be.setWorldExtent(Te.extent),Te.dataProjection=Be;const Ue=new Pbf(e),He=Ue.readFields(layersPBFReader,{}),We=[];for(const Cn in He){if(ke&&!ke.includes(Cn))continue;const En=He[Cn],An=En?[0,0,En.extent,En.extent]:null;Be.setExtent(An);for(let Sn=0,Tn=En.length;Sn<Tn;++Sn){const Ln=readRawFeature(Ue,En,Sn),Bn=this.createFeature_(Ue,Ln,Te);Bn!==null&&We.push(Bn)}}return We}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(Oe,e,Te){if(Oe===3){const ke={keys:[],values:[],features:[]},Be=Te.readVarint()+Te.pos;Te.readFields(layerPBFReader,ke,Be),ke.length=ke.features.length,ke.length&&(e[ke.name]=ke)}}function layerPBFReader(Oe,e,Te){if(Oe===15)e.version=Te.readVarint();else if(Oe===1)e.name=Te.readString();else if(Oe===5)e.extent=Te.readVarint();else if(Oe===2)e.features.push(Te.pos);else if(Oe===3)e.keys.push(Te.readString());else if(Oe===4){let ke=null;const Be=Te.readVarint()+Te.pos;for(;Te.pos<Be;)Oe=Te.readVarint()>>3,ke=Oe===1?Te.readString():Oe===2?Te.readFloat():Oe===3?Te.readDouble():Oe===4?Te.readVarint64():Oe===5?Te.readVarint():Oe===6?Te.readSVarint():Oe===7?Te.readBoolean():null;e.values.push(ke)}}function featurePBFReader(Oe,e,Te){if(Oe==1)e.id=Te.readVarint();else if(Oe==2){const ke=Te.readVarint()+Te.pos;for(;Te.pos<ke;){const Be=e.layer.keys[Te.readVarint()],Ue=e.layer.values[Te.readVarint()];e.properties[Be]=Ue}}else Oe==3?e.type=Te.readVarint():Oe==4&&(e.geometry=Te.pos)}function readRawFeature(Oe,e,Te){Oe.pos=e.features[Te];const ke=Oe.readVarint()+Oe.pos,Be={layer:e,type:0,properties:{}};return Oe.readFields(featurePBFReader,Be,ke),Be}function getGeometryType(Oe,e){let Te;return Oe===1?Te=e===1?"Point":"MultiPoint":Oe===2?Te=e===1?"LineString":"MultiLineString":Oe===3&&(Te="Polygon"),Te}var $version=8,$root={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources={"*":{type:"source"}},source=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson={type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer$1={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter={type:"array",value:"*"},filter_operator={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function_stop={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression$1={type:"array",value:"*",minimum:1},light={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky={"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain={source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection={type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},paint_line={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},promoteId={"*":{type:"string"}},v8Spec={$version,$root,sources,source,source_vector,source_raster,source_raster_dem,source_geojson,source_video,source_image,layer:layer$1,layout,layout_background,layout_fill,layout_circle,layout_heatmap,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line,layout_symbol,layout_raster,layout_hillshade,filter,filter_operator,geometry_type,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop,expression:expression$1,light,sky,terrain,projection,paint,paint_fill,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line,paint_circle,paint_heatmap,paint_symbol,paint_raster,paint_hillshade,paint_background,transition,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId};const refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(Oe,e){const Te={};for(const ke in Oe)ke!=="ref"&&(Te[ke]=Oe[ke]);return refProperties.forEach(ke=>{ke in e&&(Te[ke]=e[ke])}),Te}function derefLayers(Oe){Oe=Oe.slice();const e=Object.create(null);for(let Te=0;Te<Oe.length;Te++)e[Oe[Te].id]=Oe[Te];for(let Te=0;Te<Oe.length;Te++)"ref"in Oe[Te]&&(Oe[Te]=deref(Oe[Te],e[Oe[Te].ref]));return Oe}class ExpressionParsingError extends Error{constructor(e,Te){super(Te),this.message=Te,this.key=e}}class Scope{constructor(e,Te=[]){this.parent=e,this.bindings={};for(const[ke,Be]of Te)this.bindings[ke]=Be}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ProjectionDefinitionType={kind:"projectionDefinition"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},PaddingType={kind:"padding"},ResolvedImageType={kind:"resolvedImage"},VariableAnchorOffsetCollectionType={kind:"variableAnchorOffsetCollection"};function array(Oe,e){return{kind:"array",itemType:Oe,N:e}}function typeToString(Oe){if(Oe.kind==="array"){const e=typeToString(Oe.itemType);return typeof Oe.N=="number"?`array<${e}, ${Oe.N}>`:Oe.itemType.kind==="value"?"array":`array<${e}>`}else return Oe.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,ProjectionDefinitionType,FormattedType,ObjectType,array(ValueType),PaddingType,ResolvedImageType,VariableAnchorOffsetCollectionType];function checkSubtype(Oe,e){if(e.kind==="error")return null;if(Oe.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(Oe.itemType,e.itemType))&&(typeof Oe.N!="number"||Oe.N===e.N))return null}else{if(Oe.kind===e.kind)return null;if(Oe.kind==="value"){for(const Te of valueMemberTypes)if(!checkSubtype(Te,e))return null}}return`Expected ${typeToString(Oe)} but found ${typeToString(e)} instead.`}function isValidType(Oe,e){return e.some(Te=>Te.kind===Oe.kind)}function isValidNativeType(Oe,e){return e.some(Te=>Te==="null"?Oe===null:Te==="array"?Array.isArray(Oe):Te==="object"?Oe&&!Array.isArray(Oe)&&typeof Oe=="object":Te===typeof Oe)}function verifyType(Oe,e){return Oe.kind==="array"&&e.kind==="array"?Oe.itemType.kind===e.itemType.kind&&typeof Oe.N=="number":Oe.kind===e.kind}const Xn=.96422,Yn=1,Zn=.82521,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function constrainAngle(Oe){return Oe=Oe%360,Oe<0&&(Oe+=360),Oe}function rgbToLab([Oe,e,Te,ke]){Oe=rgb2xyz(Oe),e=rgb2xyz(e),Te=rgb2xyz(Te);let Be,Ue;const He=xyz2lab((.2225045*Oe+.7168786*e+.0606169*Te)/Yn);Oe===e&&e===Te?Be=Ue=He:(Be=xyz2lab((.4360747*Oe+.3850649*e+.1430804*Te)/Xn),Ue=xyz2lab((.0139322*Oe+.0971045*e+.7141733*Te)/Zn));const We=116*He-16;return[We<0?0:We,500*(Be-He),200*(He-Ue),ke]}function rgb2xyz(Oe){return Oe<=.04045?Oe/12.92:Math.pow((Oe+.055)/1.055,2.4)}function xyz2lab(Oe){return Oe>t3?Math.pow(Oe,1/3):Oe/t2+t0}function labToRgb([Oe,e,Te,ke]){let Be=(Oe+16)/116,Ue=isNaN(e)?Be:Be+e/500,He=isNaN(Te)?Be:Be-Te/200;return Be=Yn*lab2xyz(Be),Ue=Xn*lab2xyz(Ue),He=Zn*lab2xyz(He),[xyz2rgb(3.1338561*Ue-1.6168667*Be-.4906146*He),xyz2rgb(-.9787684*Ue+1.9161415*Be+.033454*He),xyz2rgb(.0719453*Ue-.2289914*Be+1.4052427*He),ke]}function xyz2rgb(Oe){return Oe=Oe<=.00304?12.92*Oe:1.055*Math.pow(Oe,1/2.4)-.055,Oe<0?0:Oe>1?1:Oe}function lab2xyz(Oe){return Oe>t1?Oe*Oe*Oe:t2*(Oe-t0)}function rgbToHcl(Oe){const[e,Te,ke,Be]=rgbToLab(Oe),Ue=Math.sqrt(Te*Te+ke*ke);return[Math.round(Ue*1e4)?constrainAngle(Math.atan2(ke,Te)*rad2deg):NaN,Ue,e,Be]}function hclToRgb([Oe,e,Te,ke]){return Oe=isNaN(Oe)?0:Oe*deg2rad$1,labToRgb([Te,Math.cos(Oe)*e,Math.sin(Oe)*e,ke])}function hslToRgb([Oe,e,Te,ke]){Oe=constrainAngle(Oe),e/=100,Te/=100;function Be(Ue){const He=(Ue+Oe/30)%12,We=e*Math.min(Te,1-Te);return Te-We*Math.max(-1,Math.min(He-3,9-He,1))}return[Be(0),Be(8),Be(4),ke]}function parseCssColor(Oe){if(Oe=Oe.toLowerCase().trim(),Oe==="transparent")return[0,0,0,0];const e=namedColors[Oe];if(e){const[Be,Ue,He]=e;return[Be/255,Ue/255,He/255,1]}if(Oe.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(Oe)){const Ue=Oe.length<6?1:2;let He=1;return[parseHex(Oe.slice(He,He+=Ue)),parseHex(Oe.slice(He,He+=Ue)),parseHex(Oe.slice(He,He+=Ue)),parseHex(Oe.slice(He,He+Ue)||"ff")]}if(Oe.startsWith("rgb")){const Be=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,Ue=Oe.match(Be);if(Ue){const[He,We,Cn,En,An,Sn,Tn,Ln,Bn,ei,ti,ni]=Ue,ri=[En||" ",Tn||" ",ei].join("");if(ri==="  "||ri==="  /"||ri===",,"||ri===",,,"){const si=[Cn,Sn,Bn].join(""),ai=si==="%%%"?100:si===""?255:0;if(ai){const li=[clamp(+We/ai,0,1),clamp(+An/ai,0,1),clamp(+Ln/ai,0,1),ti?parseAlpha(+ti,ni):1];if(validateNumbers(li))return li}}return}}const Te=/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,ke=Oe.match(Te);if(ke){const[Be,Ue,He,We,Cn,En,An,Sn,Tn]=ke,Ln=[He||" ",Cn||" ",An].join("");if(Ln==="  "||Ln==="  /"||Ln===",,"||Ln===",,,"){const Bn=[+Ue,clamp(+We,0,100),clamp(+En,0,100),Sn?parseAlpha(+Sn,Tn):1];if(validateNumbers(Bn))return hslToRgb(Bn)}}}function parseHex(Oe){return parseInt(Oe.padEnd(2,Oe),16)/255}function parseAlpha(Oe,e){return clamp(e?Oe/100:Oe,0,1)}function clamp(Oe,e,Te){return Math.min(Math.max(e,Oe),Te)}function validateNumbers(Oe){return!Oe.some(Number.isNaN)}const namedColors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function interpolateNumber(Oe,e,Te){return Oe+Te*(e-Oe)}function interpolateArray(Oe,e,Te){return Oe.map((ke,Be)=>interpolateNumber(ke,e[Be],Te))}class Color{constructor(e,Te,ke,Be=1,Ue=!0){this.r=e,this.g=Te,this.b=ke,this.a=Be,Ue||(this.r*=Be,this.g*=Be,this.b*=Be,Be||this.overwriteGetter("rgb",[e,Te,ke,Be]))}static parse(e){if(e instanceof Color)return e;if(typeof e!="string")return;const Te=parseCssColor(e);if(Te)return new Color(...Te,!1)}get rgb(){const{r:e,g:Te,b:ke,a:Be}=this,Ue=Be||1/0;return this.overwriteGetter("rgb",[e/Ue,Te/Ue,ke/Ue,Be])}get hcl(){return this.overwriteGetter("hcl",rgbToHcl(this.rgb))}get lab(){return this.overwriteGetter("lab",rgbToLab(this.rgb))}overwriteGetter(e,Te){return Object.defineProperty(this,e,{value:Te}),Te}toString(){const[e,Te,ke,Be]=this.rgb;return`rgba(${[e,Te,ke].map(Ue=>Math.round(Ue*255)).join(",")},${Be})`}static interpolate(e,Te,ke,Be="rgb"){switch(Be){case"rgb":{const[Ue,He,We,Cn]=interpolateArray(e.rgb,Te.rgb,ke);return new Color(Ue,He,We,Cn,!1)}case"hcl":{const[Ue,He,We,Cn]=e.hcl,[En,An,Sn,Tn]=Te.hcl;let Ln,Bn;if(!isNaN(Ue)&&!isNaN(En)){let si=En-Ue;En>Ue&&si>180?si-=360:En<Ue&&Ue-En>180&&(si+=360),Ln=Ue+ke*si}else isNaN(Ue)?isNaN(En)?Ln=NaN:(Ln=En,(We===1||We===0)&&(Bn=An)):(Ln=Ue,(Sn===1||Sn===0)&&(Bn=He));const[ei,ti,ni,ri]=hclToRgb([Ln,Bn??interpolateNumber(He,An,ke),interpolateNumber(We,Sn,ke),interpolateNumber(Cn,Tn,ke)]);return new Color(ei,ti,ni,ri,!1)}case"lab":{const[Ue,He,We,Cn]=labToRgb(interpolateArray(e.lab,Te.lab,ke));return new Color(Ue,He,We,Cn,!1)}}}}Color.black=new Color(0,0,0,1);Color.white=new Color(1,1,1,1);Color.transparent=new Color(0,0,0,0);Color.red=new Color(1,0,0,1);class Collator{constructor(e,Te,ke){e?this.sensitivity=Te?"variant":"case":this.sensitivity=Te?"accent":"base",this.locale=ke,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,Te){return this.collator.compare(e,Te)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const VERTICAL_ALIGN_OPTIONS=["bottom","center","top"];class FormattedSection{constructor(e,Te,ke,Be,Ue,He){this.text=e,this.image=Te,this.scale=ke,this.fontStack=Be,this.textColor=Ue,this.verticalAlign=He}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}}class Padding{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof Padding)return e;if(typeof e=="number")return new Padding([e,e,e,e]);if(Array.isArray(e)&&!(e.length<1||e.length>4)){for(const Te of e)if(typeof Te!="number")return;switch(e.length){case 1:e=[e[0],e[0],e[0],e[0]];break;case 2:e=[e[0],e[1],e[0],e[1]];break;case 3:e=[e[0],e[1],e[2],e[1]];break}return new Padding(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,Te,ke){return new Padding(interpolateArray(e.values,Te.values,ke))}}class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}const anchors=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class VariableAnchorOffsetCollection{constructor(e){this.values=e.slice()}static parse(e){if(e instanceof VariableAnchorOffsetCollection)return e;if(!(!Array.isArray(e)||e.length<1||e.length%2!==0)){for(let Te=0;Te<e.length;Te+=2){const ke=e[Te],Be=e[Te+1];if(typeof ke!="string"||!anchors.has(ke)||!Array.isArray(Be)||Be.length!==2||typeof Be[0]!="number"||typeof Be[1]!="number")return}return new VariableAnchorOffsetCollection(e)}}toString(){return JSON.stringify(this.values)}static interpolate(e,Te,ke){const Be=e.values,Ue=Te.values;if(Be.length!==Ue.length)throw new RuntimeError(`Cannot interpolate values of different length. from: ${e.toString()}, to: ${Te.toString()}`);const He=[];for(let We=0;We<Be.length;We+=2){if(Be[We]!==Ue[We])throw new RuntimeError(`Cannot interpolate values containing mismatched anchors. from[${We}]: ${Be[We]}, to[${We}]: ${Ue[We]}`);He.push(Be[We]);const[Cn,En]=Be[We+1],[An,Sn]=Ue[We+1];He.push([interpolateNumber(Cn,An,ke),interpolateNumber(En,Sn,ke)])}return new VariableAnchorOffsetCollection(He)}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}}class ProjectionDefinition{constructor(e,Te,ke){this.from=e,this.to=Te,this.transition=ke}static interpolate(e,Te,ke){return new ProjectionDefinition(e,Te,ke)}static parse(e){if(e instanceof ProjectionDefinition)return e;if(Array.isArray(e)&&e.length===3&&typeof e[0]=="string"&&typeof e[1]=="string"&&typeof e[2]=="number")return new ProjectionDefinition(e[0],e[1],e[2]);if(typeof e=="object"&&typeof e.from=="string"&&typeof e.to=="string"&&typeof e.transition=="number")return new ProjectionDefinition(e.from,e.to,e.transition);if(typeof e=="string")return new ProjectionDefinition(e,e,1)}}function validateRGBA(Oe,e,Te,ke){return typeof Oe=="number"&&Oe>=0&&Oe<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof Te=="number"&&Te>=0&&Te<=255?typeof ke>"u"||typeof ke=="number"&&ke>=0&&ke<=1?null:`Invalid rgba value [${[Oe,e,Te,ke].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof ke=="number"?[Oe,e,Te,ke]:[Oe,e,Te]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(Oe){if(Oe===null||typeof Oe=="string"||typeof Oe=="boolean"||typeof Oe=="number"||Oe instanceof ProjectionDefinition||Oe instanceof Color||Oe instanceof Collator||Oe instanceof Formatted||Oe instanceof Padding||Oe instanceof VariableAnchorOffsetCollection||Oe instanceof ResolvedImage)return!0;if(Array.isArray(Oe)){for(const e of Oe)if(!isValue(e))return!1;return!0}else if(typeof Oe=="object"){for(const e in Oe)if(!isValue(Oe[e]))return!1;return!0}else return!1}function typeOf(Oe){if(Oe===null)return NullType;if(typeof Oe=="string")return StringType;if(typeof Oe=="boolean")return BooleanType;if(typeof Oe=="number")return NumberType;if(Oe instanceof Color)return ColorType;if(Oe instanceof ProjectionDefinition)return ProjectionDefinitionType;if(Oe instanceof Collator)return CollatorType;if(Oe instanceof Formatted)return FormattedType;if(Oe instanceof Padding)return PaddingType;if(Oe instanceof VariableAnchorOffsetCollection)return VariableAnchorOffsetCollectionType;if(Oe instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(Oe)){const e=Oe.length;let Te;for(const ke of Oe){const Be=typeOf(ke);if(!Te)Te=Be;else{if(Te===Be)continue;Te=ValueType;break}}return array(Te||ValueType,e)}else return ObjectType}function valueToString(Oe){const e=typeof Oe;return Oe===null?"":e==="string"||e==="number"||e==="boolean"?String(Oe):Oe instanceof Color||Oe instanceof ProjectionDefinition||Oe instanceof Formatted||Oe instanceof Padding||Oe instanceof VariableAnchorOffsetCollection||Oe instanceof ResolvedImage?Oe.toString():JSON.stringify(Oe)}class Literal{constructor(e,Te){this.type=e,this.value=Te}static parse(e,Te){if(e.length!==2)return Te.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return Te.error("invalid value");const ke=e[1];let Be=typeOf(ke);const Ue=Te.expectedType;return Be.kind==="array"&&Be.N===0&&Ue&&Ue.kind==="array"&&(typeof Ue.N!="number"||Ue.N===0)&&(Be=Ue),new Literal(Be,ke)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const types$1={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,Te){this.type=e,this.args=Te}static parse(e,Te){if(e.length<2)return Te.error("Expected at least one argument.");let ke=1,Be;const Ue=e[0];if(Ue==="array"){let We;if(e.length>2){const En=e[1];if(typeof En!="string"||!(En in types$1)||En==="object")return Te.error('The item type argument of "array" must be one of string, number, boolean',1);We=types$1[En],ke++}else We=ValueType;let Cn;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return Te.error('The length argument to "array" must be a positive integer literal',2);Cn=e[2],ke++}Be=array(We,Cn)}else{if(!types$1[Ue])throw new Error(`Types doesn't contain name = ${Ue}`);Be=types$1[Ue]}const He=[];for(;ke<e.length;ke++){const We=Te.parse(e[ke],ke,ValueType);if(!We)return null;He.push(We)}return new Assertion(Be,He)}evaluate(e){for(let Te=0;Te<this.args.length;Te++){const ke=this.args[Te].evaluate(e);if(checkSubtype(this.type,typeOf(ke))){if(Te===this.args.length-1)throw new RuntimeError(`Expected value to be of type ${typeToString(this.type)}, but found ${typeToString(typeOf(ke))} instead.`)}else return ke}throw new Error}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const types$2={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,Te){this.type=e,this.args=Te}static parse(e,Te){if(e.length<2)return Te.error("Expected at least one argument.");const ke=e[0];if(!types$2[ke])throw new Error(`Can't parse ${ke} as it is not part of the known types`);if((ke==="to-boolean"||ke==="to-string")&&e.length!==2)return Te.error("Expected one argument.");const Be=types$2[ke],Ue=[];for(let He=1;He<e.length;He++){const We=Te.parse(e[He],He,ValueType);if(!We)return null;Ue.push(We)}return new Coercion(Be,Ue)}evaluate(e){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(e);case"color":{let Te,ke;for(const Be of this.args){if(Te=Be.evaluate(e),ke=null,Te instanceof Color)return Te;if(typeof Te=="string"){const Ue=e.parseColor(Te);if(Ue)return Ue}else if(Array.isArray(Te)&&(Te.length<3||Te.length>4?ke=`Invalid rgba value ${JSON.stringify(Te)}: expected an array containing either three or four numeric values.`:ke=validateRGBA(Te[0],Te[1],Te[2],Te[3]),!ke))return new Color(Te[0]/255,Te[1]/255,Te[2]/255,Te[3])}throw new RuntimeError(ke||`Could not parse color from value '${typeof Te=="string"?Te:JSON.stringify(Te)}'`)}case"padding":{let Te;for(const ke of this.args){Te=ke.evaluate(e);const Be=Padding.parse(Te);if(Be)return Be}throw new RuntimeError(`Could not parse padding from value '${typeof Te=="string"?Te:JSON.stringify(Te)}'`)}case"variableAnchorOffsetCollection":{let Te;for(const ke of this.args){Te=ke.evaluate(e);const Be=VariableAnchorOffsetCollection.parse(Te);if(Be)return Be}throw new RuntimeError(`Could not parse variableAnchorOffsetCollection from value '${typeof Te=="string"?Te:JSON.stringify(Te)}'`)}case"number":{let Te=null;for(const ke of this.args){if(Te=ke.evaluate(e),Te===null)return 0;const Be=Number(Te);if(!isNaN(Be))return Be}throw new RuntimeError(`Could not convert ${JSON.stringify(Te)} to number.`)}case"formatted":return Formatted.fromString(valueToString(this.args[0].evaluate(e)));case"resolvedImage":return ResolvedImage.fromString(valueToString(this.args[0].evaluate(e)));case"projectionDefinition":return this.args[0].evaluate(e);default:return valueToString(this.args[0].evaluate(e))}}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(e){let Te=this._parseColorCache[e];return Te||(Te=this._parseColorCache[e]=Color.parse(e)),Te}}class ParsingContext{constructor(e,Te,ke=[],Be,Ue=new Scope,He=[]){this.registry=e,this.path=ke,this.key=ke.map(We=>`[${We}]`).join(""),this.scope=Ue,this.errors=He,this.expectedType=Be,this._isConstant=Te}parse(e,Te,ke,Be,Ue={}){return Te?this.concat(Te,ke,Be)._parse(e,Ue):this._parse(e,Ue)}_parse(e,Te){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function ke(Be,Ue,He){return He==="assert"?new Assertion(Ue,[Be]):He==="coerce"?new Coercion(Ue,[Be]):Be}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const Be=e[0];if(typeof Be!="string")return this.error(`Expression name must be a string, but found ${typeof Be} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const Ue=this.registry[Be];if(Ue){let He=Ue.parse(e,this);if(!He)return null;if(this.expectedType){const We=this.expectedType,Cn=He.type;if((We.kind==="string"||We.kind==="number"||We.kind==="boolean"||We.kind==="object"||We.kind==="array")&&Cn.kind==="value")He=ke(He,We,Te.typeAnnotation||"assert");else if(We.kind==="projectionDefinition"&&(Cn.kind==="string"||Cn.kind==="array"))He=ke(He,We,Te.typeAnnotation||"coerce");else if((We.kind==="color"||We.kind==="formatted"||We.kind==="resolvedImage")&&(Cn.kind==="value"||Cn.kind==="string"))He=ke(He,We,Te.typeAnnotation||"coerce");else if(We.kind==="padding"&&(Cn.kind==="value"||Cn.kind==="number"||Cn.kind==="array"))He=ke(He,We,Te.typeAnnotation||"coerce");else if(We.kind==="variableAnchorOffsetCollection"&&(Cn.kind==="value"||Cn.kind==="array"))He=ke(He,We,Te.typeAnnotation||"coerce");else if(this.checkSubtype(We,Cn))return null}if(!(He instanceof Literal)&&He.type.kind!=="resolvedImage"&&this._isConstant(He)){const We=new EvaluationContext;try{He=new Literal(He.type,He.evaluate(We))}catch(Cn){return this.error(Cn.message),null}}return He}return this.error(`Unknown expression "${Be}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,Te,ke){const Be=typeof e=="number"?this.path.concat(e):this.path,Ue=ke?this.scope.concat(ke):this.scope;return new ParsingContext(this.registry,this._isConstant,Be,Te||null,Ue,this.errors)}error(e,...Te){const ke=`${this.key}${Te.map(Be=>`[${Be}]`).join("")}`;this.errors.push(new ExpressionParsingError(ke,e))}checkSubtype(e,Te){const ke=checkSubtype(e,Te);return ke&&this.error(ke),ke}}class Let{constructor(e,Te){this.type=Te.type,this.bindings=[].concat(e),this.result=Te}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const Te of this.bindings)e(Te[1]);e(this.result)}static parse(e,Te){if(e.length<4)return Te.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const ke=[];for(let Ue=1;Ue<e.length-1;Ue+=2){const He=e[Ue];if(typeof He!="string")return Te.error(`Expected string, but found ${typeof He} instead.`,Ue);if(/[^a-zA-Z0-9_]/.test(He))return Te.error("Variable names must contain only alphanumeric characters or '_'.",Ue);const We=Te.parse(e[Ue+1],Ue+1);if(!We)return null;ke.push([He,We])}const Be=Te.parse(e[e.length-1],e.length-1,Te.expectedType,ke);return Be?new Let(ke,Be):null}outputDefined(){return this.result.outputDefined()}}class Var{constructor(e,Te){this.type=Te.type,this.name=e,this.boundExpression=Te}static parse(e,Te){if(e.length!==2||typeof e[1]!="string")return Te.error("'var' expression requires exactly one string literal argument.");const ke=e[1];return Te.scope.has(ke)?new Var(ke,Te.scope.get(ke)):Te.error(`Unknown variable "${ke}". Make sure "${ke}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}}let At$1=class zf{constructor(e,Te,ke){this.type=e,this.index=Te,this.input=ke}static parse(e,Te){if(e.length!==3)return Te.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const ke=Te.parse(e[1],1,NumberType),Be=Te.parse(e[2],2,array(Te.expectedType||ValueType));if(!ke||!Be)return null;const Ue=Be.type;return new zf(Ue.itemType,ke,Be)}evaluate(e){const Te=this.index.evaluate(e),ke=this.input.evaluate(e);if(Te<0)throw new RuntimeError(`Array index out of bounds: ${Te} < 0.`);if(Te>=ke.length)throw new RuntimeError(`Array index out of bounds: ${Te} > ${ke.length-1}.`);if(Te!==Math.floor(Te))throw new RuntimeError(`Array index must be an integer, but found ${Te} instead.`);return ke[Te]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}};class In{constructor(e,Te){this.type=BooleanType,this.needle=e,this.haystack=Te}static parse(e,Te){if(e.length!==3)return Te.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const ke=Te.parse(e[1],1,ValueType),Be=Te.parse(e[2],2,ValueType);return!ke||!Be?null:isValidType(ke.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(ke,Be):Te.error(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(ke.type)} instead`)}evaluate(e){const Te=this.needle.evaluate(e),ke=this.haystack.evaluate(e);if(!ke)return!1;if(!isValidNativeType(Te,["boolean","string","number","null"]))throw new RuntimeError(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(typeOf(Te))} instead.`);if(!isValidNativeType(ke,["string","array"]))throw new RuntimeError(`Expected second argument to be of type array or string, but found ${typeToString(typeOf(ke))} instead.`);return ke.indexOf(Te)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}}class IndexOf{constructor(e,Te,ke){this.type=NumberType,this.needle=e,this.haystack=Te,this.fromIndex=ke}static parse(e,Te){if(e.length<=2||e.length>=5)return Te.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const ke=Te.parse(e[1],1,ValueType),Be=Te.parse(e[2],2,ValueType);if(!ke||!Be)return null;if(!isValidType(ke.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return Te.error(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(ke.type)} instead`);if(e.length===4){const Ue=Te.parse(e[3],3,NumberType);return Ue?new IndexOf(ke,Be,Ue):null}else return new IndexOf(ke,Be)}evaluate(e){const Te=this.needle.evaluate(e),ke=this.haystack.evaluate(e);if(!isValidNativeType(Te,["boolean","string","number","null"]))throw new RuntimeError(`Expected first argument to be of type boolean, string, number or null, but found ${typeToString(typeOf(Te))} instead.`);let Be;if(this.fromIndex&&(Be=this.fromIndex.evaluate(e)),isValidNativeType(ke,["string"])){const Ue=ke.indexOf(Te,Be);return Ue===-1?-1:[...ke.slice(0,Ue)].length}else{if(isValidNativeType(ke,["array"]))return ke.indexOf(Te,Be);throw new RuntimeError(`Expected second argument to be of type array or string, but found ${typeToString(typeOf(ke))} instead.`)}}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}}class Match{constructor(e,Te,ke,Be,Ue,He){this.inputType=e,this.type=Te,this.input=ke,this.cases=Be,this.outputs=Ue,this.otherwise=He}static parse(e,Te){if(e.length<5)return Te.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return Te.error("Expected an even number of arguments.");let ke,Be;Te.expectedType&&Te.expectedType.kind!=="value"&&(Be=Te.expectedType);const Ue={},He=[];for(let En=2;En<e.length-1;En+=2){let An=e[En];const Sn=e[En+1];Array.isArray(An)||(An=[An]);const Tn=Te.concat(En);if(An.length===0)return Tn.error("Expected at least one branch label.");for(const Bn of An){if(typeof Bn!="number"&&typeof Bn!="string")return Tn.error("Branch labels must be numbers or strings.");if(typeof Bn=="number"&&Math.abs(Bn)>Number.MAX_SAFE_INTEGER)return Tn.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Bn=="number"&&Math.floor(Bn)!==Bn)return Tn.error("Numeric branch labels must be integer values.");if(!ke)ke=typeOf(Bn);else if(Tn.checkSubtype(ke,typeOf(Bn)))return null;if(typeof Ue[String(Bn)]<"u")return Tn.error("Branch labels must be unique.");Ue[String(Bn)]=He.length}const Ln=Te.parse(Sn,En,Be);if(!Ln)return null;Be=Be||Ln.type,He.push(Ln)}const We=Te.parse(e[1],1,ValueType);if(!We)return null;const Cn=Te.parse(e[e.length-1],e.length-1,Be);return!Cn||We.type.kind!=="value"&&Te.concat(1).checkSubtype(ke,We.type)?null:new Match(ke,Be,We,Ue,He,Cn)}evaluate(e){const Te=this.input.evaluate(e);return(typeOf(Te)===this.inputType&&this.outputs[this.cases[Te]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}}class Case{constructor(e,Te,ke){this.type=e,this.branches=Te,this.otherwise=ke}static parse(e,Te){if(e.length<4)return Te.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return Te.error("Expected an odd number of arguments.");let ke;Te.expectedType&&Te.expectedType.kind!=="value"&&(ke=Te.expectedType);const Be=[];for(let He=1;He<e.length-1;He+=2){const We=Te.parse(e[He],He,BooleanType);if(!We)return null;const Cn=Te.parse(e[He+1],He+1,ke);if(!Cn)return null;Be.push([We,Cn]),ke=ke||Cn.type}const Ue=Te.parse(e[e.length-1],e.length-1,ke);if(!Ue)return null;if(!ke)throw new Error("Can't infer output type");return new Case(ke,Be,Ue)}evaluate(e){for(const[Te,ke]of this.branches)if(Te.evaluate(e))return ke.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[Te,ke]of this.branches)e(Te),e(ke);e(this.otherwise)}outputDefined(){return this.branches.every(([e,Te])=>Te.outputDefined())&&this.otherwise.outputDefined()}}class Slice{constructor(e,Te,ke,Be){this.type=e,this.input=Te,this.beginIndex=ke,this.endIndex=Be}static parse(e,Te){if(e.length<=2||e.length>=5)return Te.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const ke=Te.parse(e[1],1,ValueType),Be=Te.parse(e[2],2,NumberType);if(!ke||!Be)return null;if(!isValidType(ke.type,[array(ValueType),StringType,ValueType]))return Te.error(`Expected first argument to be of type array or string, but found ${typeToString(ke.type)} instead`);if(e.length===4){const Ue=Te.parse(e[3],3,NumberType);return Ue?new Slice(ke.type,ke,Be,Ue):null}else return new Slice(ke.type,ke,Be)}evaluate(e){const Te=this.input.evaluate(e),ke=this.beginIndex.evaluate(e);let Be;if(this.endIndex&&(Be=this.endIndex.evaluate(e)),isValidNativeType(Te,["string"]))return[...Te].slice(ke,Be).join("");if(isValidNativeType(Te,["array"]))return Te.slice(ke,Be);throw new RuntimeError(`Expected first argument to be of type array or string, but found ${typeToString(typeOf(Te))} instead.`)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}}function findStopLessThanOrEqualTo(Oe,e){const Te=Oe.length-1;let ke=0,Be=Te,Ue=0,He,We;for(;ke<=Be;)if(Ue=Math.floor((ke+Be)/2),He=Oe[Ue],We=Oe[Ue+1],He<=e){if(Ue===Te||e<We)return Ue;ke=Ue+1}else if(He>e)Be=Ue-1;else throw new RuntimeError("Input is not a number.");return 0}class Step{constructor(e,Te,ke){this.type=e,this.input=Te,this.labels=[],this.outputs=[];for(const[Be,Ue]of ke)this.labels.push(Be),this.outputs.push(Ue)}static parse(e,Te){if(e.length-1<4)return Te.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return Te.error("Expected an even number of arguments.");const ke=Te.parse(e[1],1,NumberType);if(!ke)return null;const Be=[];let Ue=null;Te.expectedType&&Te.expectedType.kind!=="value"&&(Ue=Te.expectedType);for(let He=1;He<e.length;He+=2){const We=He===1?-1/0:e[He],Cn=e[He+1],En=He,An=He+1;if(typeof We!="number")return Te.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',En);if(Be.length&&Be[Be.length-1][0]>=We)return Te.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',En);const Sn=Te.parse(Cn,An,Ue);if(!Sn)return null;Ue=Ue||Sn.type,Be.push([We,Sn])}return new Step(Ue,ke,Be)}evaluate(e){const Te=this.labels,ke=this.outputs;if(Te.length===1)return ke[0].evaluate(e);const Be=this.input.evaluate(e);if(Be<=Te[0])return ke[0].evaluate(e);const Ue=Te.length;if(Be>=Te[Ue-1])return ke[Ue-1].evaluate(e);const He=findStopLessThanOrEqualTo(Te,Be);return ke[He].evaluate(e)}eachChild(e){e(this.input);for(const Te of this.outputs)e(Te)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function getDefaultExportFromCjs(Oe){return Oe&&Oe.__esModule&&Object.prototype.hasOwnProperty.call(Oe,"default")?Oe.default:Oe}var unitbezier,hasRequiredUnitbezier;function requireUnitbezier(){if(hasRequiredUnitbezier)return unitbezier;hasRequiredUnitbezier=1,unitbezier=Oe;function Oe(e,Te,ke,Be){this.cx=3*e,this.bx=3*(ke-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*Te,this.by=3*(Be-Te)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=Te,this.p2x=ke,this.p2y=Be}return Oe.prototype={sampleCurveX:function(e){return((this.ax*e+this.bx)*e+this.cx)*e},sampleCurveY:function(e){return((this.ay*e+this.by)*e+this.cy)*e},sampleCurveDerivativeX:function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},solveCurveX:function(e,Te){if(Te===void 0&&(Te=1e-6),e<0)return 0;if(e>1)return 1;for(var ke=e,Be=0;Be<8;Be++){var Ue=this.sampleCurveX(ke)-e;if(Math.abs(Ue)<Te)return ke;var He=this.sampleCurveDerivativeX(ke);if(Math.abs(He)<1e-6)break;ke=ke-Ue/He}var We=0,Cn=1;for(ke=e,Be=0;Be<20&&(Ue=this.sampleCurveX(ke),!(Math.abs(Ue-e)<Te));Be++)e>Ue?We=ke:Cn=ke,ke=(Cn-We)*.5+We;return ke},solve:function(e,Te){return this.sampleCurveY(this.solveCurveX(e,Te))}},unitbezier}var unitbezierExports=requireUnitbezier(),UnitBezier=getDefaultExportFromCjs(unitbezierExports);class Interpolate{constructor(e,Te,ke,Be,Ue){this.type=e,this.operator=Te,this.interpolation=ke,this.input=Be,this.labels=[],this.outputs=[];for(const[He,We]of Ue)this.labels.push(He),this.outputs.push(We)}static interpolationFactor(e,Te,ke,Be){let Ue=0;if(e.name==="exponential")Ue=exponentialInterpolation(Te,e.base,ke,Be);else if(e.name==="linear")Ue=exponentialInterpolation(Te,1,ke,Be);else if(e.name==="cubic-bezier"){const He=e.controlPoints;Ue=new UnitBezier(He[0],He[1],He[2],He[3]).solve(exponentialInterpolation(Te,1,ke,Be))}return Ue}static parse(e,Te){let[ke,Be,Ue,...He]=e;if(!Array.isArray(Be)||Be.length===0)return Te.error("Expected an interpolation type expression.",1);if(Be[0]==="linear")Be={name:"linear"};else if(Be[0]==="exponential"){const En=Be[1];if(typeof En!="number")return Te.error("Exponential interpolation requires a numeric base.",1,1);Be={name:"exponential",base:En}}else if(Be[0]==="cubic-bezier"){const En=Be.slice(1);if(En.length!==4||En.some(An=>typeof An!="number"||An<0||An>1))return Te.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Be={name:"cubic-bezier",controlPoints:En}}else return Te.error(`Unknown interpolation type ${String(Be[0])}`,1,0);if(e.length-1<4)return Te.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return Te.error("Expected an even number of arguments.");if(Ue=Te.parse(Ue,2,NumberType),!Ue)return null;const We=[];let Cn=null;ke==="interpolate-hcl"||ke==="interpolate-lab"?Cn=ColorType:Te.expectedType&&Te.expectedType.kind!=="value"&&(Cn=Te.expectedType);for(let En=0;En<He.length;En+=2){const An=He[En],Sn=He[En+1],Tn=En+3,Ln=En+4;if(typeof An!="number")return Te.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Tn);if(We.length&&We[We.length-1][0]>=An)return Te.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Tn);const Bn=Te.parse(Sn,Ln,Cn);if(!Bn)return null;Cn=Cn||Bn.type,We.push([An,Bn])}return!verifyType(Cn,NumberType)&&!verifyType(Cn,ProjectionDefinitionType)&&!verifyType(Cn,ColorType)&&!verifyType(Cn,PaddingType)&&!verifyType(Cn,VariableAnchorOffsetCollectionType)&&!verifyType(Cn,array(NumberType))?Te.error(`Type ${typeToString(Cn)} is not interpolatable.`):new Interpolate(Cn,ke,Be,Ue,We)}evaluate(e){const Te=this.labels,ke=this.outputs;if(Te.length===1)return ke[0].evaluate(e);const Be=this.input.evaluate(e);if(Be<=Te[0])return ke[0].evaluate(e);const Ue=Te.length;if(Be>=Te[Ue-1])return ke[Ue-1].evaluate(e);const He=findStopLessThanOrEqualTo(Te,Be),We=Te[He],Cn=Te[He+1],En=Interpolate.interpolationFactor(this.interpolation,Be,We,Cn),An=ke[He].evaluate(e),Sn=ke[He+1].evaluate(e);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return interpolateNumber(An,Sn,En);case"color":return Color.interpolate(An,Sn,En);case"padding":return Padding.interpolate(An,Sn,En);case"variableAnchorOffsetCollection":return VariableAnchorOffsetCollection.interpolate(An,Sn,En);case"array":return interpolateArray(An,Sn,En);case"projectionDefinition":return ProjectionDefinition.interpolate(An,Sn,En)}case"interpolate-hcl":return Color.interpolate(An,Sn,En,"hcl");case"interpolate-lab":return Color.interpolate(An,Sn,En,"lab")}}eachChild(e){e(this.input);for(const Te of this.outputs)e(Te)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}}function exponentialInterpolation(Oe,e,Te,ke){const Be=ke-Te,Ue=Oe-Te;return Be===0?0:e===1?Ue/Be:(Math.pow(e,Ue)-1)/(Math.pow(e,Be)-1)}class Coalesce{constructor(e,Te){this.type=e,this.args=Te}static parse(e,Te){if(e.length<2)return Te.error("Expected at least one argument.");let ke=null;const Be=Te.expectedType;Be&&Be.kind!=="value"&&(ke=Be);const Ue=[];for(const We of e.slice(1)){const Cn=Te.parse(We,1+Ue.length,ke,void 0,{typeAnnotation:"omit"});if(!Cn)return null;ke=ke||Cn.type,Ue.push(Cn)}if(!ke)throw new Error("No output type");return Be&&Ue.some(We=>checkSubtype(Be,We.type))?new Coalesce(ValueType,Ue):new Coalesce(ke,Ue)}evaluate(e){let Te=null,ke=0,Be;for(const Ue of this.args)if(ke++,Te=Ue.evaluate(e),Te&&Te instanceof ResolvedImage&&!Te.available&&(Be||(Be=Te.name),Te=null,ke===this.args.length&&(Te=Be)),Te!==null)break;return Te}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}}function isComparableType(Oe,e){return Oe==="=="||Oe==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(Oe,e,Te){return e===Te}function neq(Oe,e,Te){return e!==Te}function lt$1(Oe,e,Te){return e<Te}function gt$1(Oe,e,Te){return e>Te}function lteq(Oe,e,Te){return e<=Te}function gteq(Oe,e,Te){return e>=Te}function eqCollate(Oe,e,Te,ke){return ke.compare(e,Te)===0}function neqCollate(Oe,e,Te,ke){return!eqCollate(Oe,e,Te,ke)}function ltCollate(Oe,e,Te,ke){return ke.compare(e,Te)<0}function gtCollate(Oe,e,Te,ke){return ke.compare(e,Te)>0}function lteqCollate(Oe,e,Te,ke){return ke.compare(e,Te)<=0}function gteqCollate(Oe,e,Te,ke){return ke.compare(e,Te)>=0}function makeComparison(Oe,e,Te){const ke=Oe!=="=="&&Oe!=="!=";return class Hf{constructor(Ue,He,We){this.type=BooleanType,this.lhs=Ue,this.rhs=He,this.collator=We,this.hasUntypedArgument=Ue.type.kind==="value"||He.type.kind==="value"}static parse(Ue,He){if(Ue.length!==3&&Ue.length!==4)return He.error("Expected two or three arguments.");const We=Ue[0];let Cn=He.parse(Ue[1],1,ValueType);if(!Cn)return null;if(!isComparableType(We,Cn.type))return He.concat(1).error(`"${We}" comparisons are not supported for type '${typeToString(Cn.type)}'.`);let En=He.parse(Ue[2],2,ValueType);if(!En)return null;if(!isComparableType(We,En.type))return He.concat(2).error(`"${We}" comparisons are not supported for type '${typeToString(En.type)}'.`);if(Cn.type.kind!==En.type.kind&&Cn.type.kind!=="value"&&En.type.kind!=="value")return He.error(`Cannot compare types '${typeToString(Cn.type)}' and '${typeToString(En.type)}'.`);ke&&(Cn.type.kind==="value"&&En.type.kind!=="value"?Cn=new Assertion(En.type,[Cn]):Cn.type.kind!=="value"&&En.type.kind==="value"&&(En=new Assertion(Cn.type,[En])));let An=null;if(Ue.length===4){if(Cn.type.kind!=="string"&&En.type.kind!=="string"&&Cn.type.kind!=="value"&&En.type.kind!=="value")return He.error("Cannot use collator to compare non-string types.");if(An=He.parse(Ue[3],3,CollatorType),!An)return null}return new Hf(Cn,En,An)}evaluate(Ue){const He=this.lhs.evaluate(Ue),We=this.rhs.evaluate(Ue);if(ke&&this.hasUntypedArgument){const Cn=typeOf(He),En=typeOf(We);if(Cn.kind!==En.kind||!(Cn.kind==="string"||Cn.kind==="number"))throw new RuntimeError(`Expected arguments for "${Oe}" to be (string, string) or (number, number), but found (${Cn.kind}, ${En.kind}) instead.`)}if(this.collator&&!ke&&this.hasUntypedArgument){const Cn=typeOf(He),En=typeOf(We);if(Cn.kind!=="string"||En.kind!=="string")return e(Ue,He,We)}return this.collator?Te(Ue,He,We,this.collator.evaluate(Ue)):e(Ue,He,We)}eachChild(Ue){Ue(this.lhs),Ue(this.rhs),this.collator&&Ue(this.collator)}outputDefined(){return!0}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt$1,ltCollate),GreaterThan=makeComparison(">",gt$1,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class CollatorExpression{constructor(e,Te,ke){this.type=CollatorType,this.locale=ke,this.caseSensitive=e,this.diacriticSensitive=Te}static parse(e,Te){if(e.length!==2)return Te.error("Expected one argument.");const ke=e[1];if(typeof ke!="object"||Array.isArray(ke))return Te.error("Collator options argument must be an object.");const Be=Te.parse(ke["case-sensitive"]===void 0?!1:ke["case-sensitive"],1,BooleanType);if(!Be)return null;const Ue=Te.parse(ke["diacritic-sensitive"]===void 0?!1:ke["diacritic-sensitive"],1,BooleanType);if(!Ue)return null;let He=null;return ke.locale&&(He=Te.parse(ke.locale,1,StringType),!He)?null:new CollatorExpression(Be,Ue,He)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}}class NumberFormat{constructor(e,Te,ke,Be,Ue){this.type=StringType,this.number=e,this.locale=Te,this.currency=ke,this.minFractionDigits=Be,this.maxFractionDigits=Ue}static parse(e,Te){if(e.length!==3)return Te.error("Expected two arguments.");const ke=Te.parse(e[1],1,NumberType);if(!ke)return null;const Be=e[2];if(typeof Be!="object"||Array.isArray(Be))return Te.error("NumberFormat options argument must be an object.");let Ue=null;if(Be.locale&&(Ue=Te.parse(Be.locale,1,StringType),!Ue))return null;let He=null;if(Be.currency&&(He=Te.parse(Be.currency,1,StringType),!He))return null;let We=null;if(Be["min-fraction-digits"]&&(We=Te.parse(Be["min-fraction-digits"],1,NumberType),!We))return null;let Cn=null;return Be["max-fraction-digits"]&&(Cn=Te.parse(Be["max-fraction-digits"],1,NumberType),!Cn)?null:new NumberFormat(ke,Ue,He,We,Cn)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}}class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,Te){if(e.length<2)return Te.error("Expected at least one argument.");const ke=e[1];if(!Array.isArray(ke)&&typeof ke=="object")return Te.error("First argument must be an image or text section.");const Be=[];let Ue=!1;for(let He=1;He<=e.length-1;++He){const We=e[He];if(Ue&&typeof We=="object"&&!Array.isArray(We)){Ue=!1;let Cn=null;if(We["font-scale"]&&(Cn=Te.parse(We["font-scale"],1,NumberType),!Cn))return null;let En=null;if(We["text-font"]&&(En=Te.parse(We["text-font"],1,array(StringType)),!En))return null;let An=null;if(We["text-color"]&&(An=Te.parse(We["text-color"],1,ColorType),!An))return null;let Sn=null;if(We["vertical-align"]){if(typeof We["vertical-align"]=="string"&&!VERTICAL_ALIGN_OPTIONS.includes(We["vertical-align"]))return Te.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${We["vertical-align"]}' instead.`);if(Sn=Te.parse(We["vertical-align"],1,StringType),!Sn)return null}const Tn=Be[Be.length-1];Tn.scale=Cn,Tn.font=En,Tn.textColor=An,Tn.verticalAlign=Sn}else{const Cn=Te.parse(e[He],1,ValueType);if(!Cn)return null;const En=Cn.type.kind;if(En!=="string"&&En!=="value"&&En!=="null"&&En!=="resolvedImage")return Te.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ue=!0,Be.push({content:Cn,scale:null,font:null,textColor:null,verticalAlign:null})}}return new FormatExpression(Be)}evaluate(e){const Te=ke=>{const Be=ke.content.evaluate(e);return typeOf(Be)===ResolvedImageType?new FormattedSection("",Be,null,null,null,ke.verticalAlign?ke.verticalAlign.evaluate(e):null):new FormattedSection(valueToString(Be),null,ke.scale?ke.scale.evaluate(e):null,ke.font?ke.font.evaluate(e).join(","):null,ke.textColor?ke.textColor.evaluate(e):null,ke.verticalAlign?ke.verticalAlign.evaluate(e):null)};return new Formatted(this.sections.map(Te))}eachChild(e){for(const Te of this.sections)e(Te.content),Te.scale&&e(Te.scale),Te.font&&e(Te.font),Te.textColor&&e(Te.textColor),Te.verticalAlign&&e(Te.verticalAlign)}outputDefined(){return!1}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,Te){if(e.length!==2)return Te.error("Expected two arguments.");const ke=Te.parse(e[1],1,StringType);return ke?new ImageExpression(ke):Te.error("No image name provided.")}evaluate(e){const Te=this.input.evaluate(e),ke=ResolvedImage.fromString(Te);return ke&&e.availableImages&&(ke.available=e.availableImages.indexOf(Te)>-1),ke}eachChild(e){e(this.input)}outputDefined(){return!1}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,Te){if(e.length!==2)return Te.error(`Expected 1 argument, but found ${e.length-1} instead.`);const ke=Te.parse(e[1],1);return ke?ke.type.kind!=="array"&&ke.type.kind!=="string"&&ke.type.kind!=="value"?Te.error(`Expected argument of type string or array, but found ${typeToString(ke.type)} instead.`):new Length(ke):null}evaluate(e){const Te=this.input.evaluate(e);if(typeof Te=="string")return[...Te].length;if(Array.isArray(Te))return Te.length;throw new RuntimeError(`Expected value to be of type string or array, but found ${typeToString(typeOf(Te))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}}const EXTENT=8192;function getTileCoordinates(Oe,e){const Te=mercatorXfromLng(Oe[0]),ke=mercatorYfromLat(Oe[1]),Be=Math.pow(2,e.z);return[Math.round(Te*Be*EXTENT),Math.round(ke*Be*EXTENT)]}function getLngLatFromTileCoord(Oe,e){const Te=Math.pow(2,e.z),ke=(Oe[0]/EXTENT+e.x)/Te,Be=(Oe[1]/EXTENT+e.y)/Te;return[lngFromMercatorXfromLng(ke),latFromMercatorY(Be)]}function mercatorXfromLng(Oe){return(180+Oe)/360}function lngFromMercatorXfromLng(Oe){return Oe*360-180}function mercatorYfromLat(Oe){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Oe*Math.PI/360)))/360}function latFromMercatorY(Oe){return 360/Math.PI*Math.atan(Math.exp((180-Oe*360)*Math.PI/180))-90}function updateBBox(Oe,e){Oe[0]=Math.min(Oe[0],e[0]),Oe[1]=Math.min(Oe[1],e[1]),Oe[2]=Math.max(Oe[2],e[0]),Oe[3]=Math.max(Oe[3],e[1])}function boxWithinBox(Oe,e){return!(Oe[0]<=e[0]||Oe[2]>=e[2]||Oe[1]<=e[1]||Oe[3]>=e[3])}function rayIntersect(Oe,e,Te){return e[1]>Oe[1]!=Te[1]>Oe[1]&&Oe[0]<(Te[0]-e[0])*(Oe[1]-e[1])/(Te[1]-e[1])+e[0]}function pointOnBoundary(Oe,e,Te){const ke=Oe[0]-e[0],Be=Oe[1]-e[1],Ue=Oe[0]-Te[0],He=Oe[1]-Te[1];return ke*He-Ue*Be===0&&ke*Ue<=0&&Be*He<=0}function segmentIntersectSegment(Oe,e,Te,ke){const Be=[e[0]-Oe[0],e[1]-Oe[1]],Ue=[ke[0]-Te[0],ke[1]-Te[1]];return perp(Ue,Be)===0?!1:!!(twoSided(Oe,e,Te,ke)&&twoSided(Te,ke,Oe,e))}function lineIntersectPolygon(Oe,e,Te){for(const ke of Te)for(let Be=0;Be<ke.length-1;++Be)if(segmentIntersectSegment(Oe,e,ke[Be],ke[Be+1]))return!0;return!1}function pointWithinPolygon(Oe,e,Te=!1){let ke=!1;for(const Be of e)for(let Ue=0;Ue<Be.length-1;Ue++){if(pointOnBoundary(Oe,Be[Ue],Be[Ue+1]))return Te;rayIntersect(Oe,Be[Ue],Be[Ue+1])&&(ke=!ke)}return ke}function pointWithinPolygons(Oe,e){for(const Te of e)if(pointWithinPolygon(Oe,Te))return!0;return!1}function lineStringWithinPolygon(Oe,e){for(const Te of Oe)if(!pointWithinPolygon(Te,e))return!1;for(let Te=0;Te<Oe.length-1;++Te)if(lineIntersectPolygon(Oe[Te],Oe[Te+1],e))return!1;return!0}function lineStringWithinPolygons(Oe,e){for(const Te of e)if(lineStringWithinPolygon(Oe,Te))return!0;return!1}function perp(Oe,e){return Oe[0]*e[1]-Oe[1]*e[0]}function twoSided(Oe,e,Te,ke){const Be=Oe[0]-Te[0],Ue=Oe[1]-Te[1],He=e[0]-Te[0],We=e[1]-Te[1],Cn=ke[0]-Te[0],En=ke[1]-Te[1],An=Be*En-Cn*Ue,Sn=He*En-Cn*We;return An>0&&Sn<0||An<0&&Sn>0}function getTilePolygon(Oe,e,Te){const ke=[];for(let Be=0;Be<Oe.length;Be++){const Ue=[];for(let He=0;He<Oe[Be].length;He++){const We=getTileCoordinates(Oe[Be][He],Te);updateBBox(e,We),Ue.push(We)}ke.push(Ue)}return ke}function getTilePolygons(Oe,e,Te){const ke=[];for(let Be=0;Be<Oe.length;Be++){const Ue=getTilePolygon(Oe[Be],e,Te);ke.push(Ue)}return ke}function updatePoint(Oe,e,Te,ke){if(Oe[0]<Te[0]||Oe[0]>Te[2]){const Be=ke*.5;let Ue=Oe[0]-Te[0]>Be?-ke:Te[0]-Oe[0]>Be?ke:0;Ue===0&&(Ue=Oe[0]-Te[2]>Be?-ke:Te[2]-Oe[0]>Be?ke:0),Oe[0]+=Ue}updateBBox(e,Oe)}function resetBBox(Oe){Oe[0]=Oe[1]=1/0,Oe[2]=Oe[3]=-1/0}function getTilePoints(Oe,e,Te,ke){const Be=Math.pow(2,ke.z)*EXTENT,Ue=[ke.x*EXTENT,ke.y*EXTENT],He=[];for(const We of Oe)for(const Cn of We){const En=[Cn.x+Ue[0],Cn.y+Ue[1]];updatePoint(En,e,Te,Be),He.push(En)}return He}function getTileLines(Oe,e,Te,ke){const Be=Math.pow(2,ke.z)*EXTENT,Ue=[ke.x*EXTENT,ke.y*EXTENT],He=[];for(const We of Oe){const Cn=[];for(const En of We){const An=[En.x+Ue[0],En.y+Ue[1]];updateBBox(e,An),Cn.push(An)}He.push(Cn)}if(e[2]-e[0]<=Be/2){resetBBox(e);for(const We of He)for(const Cn of We)updatePoint(Cn,e,Te,Be)}return He}function pointsWithinPolygons(Oe,e){const Te=[1/0,1/0,-1/0,-1/0],ke=[1/0,1/0,-1/0,-1/0],Be=Oe.canonicalID();if(e.type==="Polygon"){const Ue=getTilePolygon(e.coordinates,ke,Be),He=getTilePoints(Oe.geometry(),Te,ke,Be);if(!boxWithinBox(Te,ke))return!1;for(const We of He)if(!pointWithinPolygon(We,Ue))return!1}if(e.type==="MultiPolygon"){const Ue=getTilePolygons(e.coordinates,ke,Be),He=getTilePoints(Oe.geometry(),Te,ke,Be);if(!boxWithinBox(Te,ke))return!1;for(const We of He)if(!pointWithinPolygons(We,Ue))return!1}return!0}function linesWithinPolygons(Oe,e){const Te=[1/0,1/0,-1/0,-1/0],ke=[1/0,1/0,-1/0,-1/0],Be=Oe.canonicalID();if(e.type==="Polygon"){const Ue=getTilePolygon(e.coordinates,ke,Be),He=getTileLines(Oe.geometry(),Te,ke,Be);if(!boxWithinBox(Te,ke))return!1;for(const We of He)if(!lineStringWithinPolygon(We,Ue))return!1}if(e.type==="MultiPolygon"){const Ue=getTilePolygons(e.coordinates,ke,Be),He=getTileLines(Oe.geometry(),Te,ke,Be);if(!boxWithinBox(Te,ke))return!1;for(const We of He)if(!lineStringWithinPolygons(We,Ue))return!1}return!0}class Within{constructor(e,Te){this.type=BooleanType,this.geojson=e,this.geometries=Te}static parse(e,Te){if(e.length!==2)return Te.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const ke=e[1];if(ke.type==="FeatureCollection"){const Be=[];for(const Ue of ke.features){const{type:He,coordinates:We}=Ue.geometry;He==="Polygon"&&Be.push(We),He==="MultiPolygon"&&Be.push(...We)}if(Be.length){const Ue={type:"MultiPolygon",coordinates:Be};return new Within(ke,Ue)}}else if(ke.type==="Feature"){const Be=ke.geometry.type;if(Be==="Polygon"||Be==="MultiPolygon")return new Within(ke,ke.geometry)}else if(ke.type==="Polygon"||ke.type==="MultiPolygon")return new Within(ke,ke)}return Te.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class TinyQueue{constructor(e=[],Te=(ke,Be)=>ke<Be?-1:ke>Be?1:0){if(this.data=e,this.length=this.data.length,this.compare=Te,this.length>0)for(let ke=(this.length>>1)-1;ke>=0;ke--)this._down(ke)}push(e){this.data.push(e),this._up(this.length++)}pop(){if(this.length===0)return;const e=this.data[0],Te=this.data.pop();return--this.length>0&&(this.data[0]=Te,this._down(0)),e}peek(){return this.data[0]}_up(e){const{data:Te,compare:ke}=this,Be=Te[e];for(;e>0;){const Ue=e-1>>1,He=Te[Ue];if(ke(Be,He)>=0)break;Te[e]=He,e=Ue}Te[e]=Be}_down(e){const{data:Te,compare:ke}=this,Be=this.length>>1,Ue=Te[e];for(;e<Be;){let He=(e<<1)+1;const We=He+1;if(We<this.length&&ke(Te[We],Te[He])<0&&(He=We),ke(Te[He],Ue)>=0)break;Te[e]=Te[He],e=He}Te[e]=Ue}}function classifyRings(Oe,e){if(Oe.length<=1)return[Oe];const ke=[];let Be,Ue;for(const He of Oe){const We=calculateSignedArea(He);We!==0&&(He.area=Math.abs(We),Ue===void 0&&(Ue=We<0),Ue===We<0?(Be&&ke.push(Be),Be=[He]):Be.push(He))}return Be&&ke.push(Be),ke}function calculateSignedArea(Oe){let e=0;for(let Te=0,ke=Oe.length,Be=ke-1,Ue,He;Te<ke;Be=Te++)Ue=Oe[Te],He=Oe[Be],e+=(He.x-Ue.x)*(Ue.y+He.y);return e}const RE=6378.137,FE=1/298.257223563,E2=FE*(2-FE),RAD=Math.PI/180;class CheapRuler{constructor(e){const Te=RAD*RE*1e3,ke=Math.cos(e*RAD),Be=1/(1-E2*(1-ke*ke)),Ue=Math.sqrt(Be);this.kx=Te*Ue*ke,this.ky=Te*Ue*Be*(1-E2)}distance(e,Te){const ke=this.wrap(e[0]-Te[0])*this.kx,Be=(e[1]-Te[1])*this.ky;return Math.sqrt(ke*ke+Be*Be)}pointOnLine(e,Te){let ke=1/0,Be,Ue,He,We;for(let Cn=0;Cn<e.length-1;Cn++){let En=e[Cn][0],An=e[Cn][1],Sn=this.wrap(e[Cn+1][0]-En)*this.kx,Tn=(e[Cn+1][1]-An)*this.ky,Ln=0;(Sn!==0||Tn!==0)&&(Ln=(this.wrap(Te[0]-En)*this.kx*Sn+(Te[1]-An)*this.ky*Tn)/(Sn*Sn+Tn*Tn),Ln>1?(En=e[Cn+1][0],An=e[Cn+1][1]):Ln>0&&(En+=Sn/this.kx*Ln,An+=Tn/this.ky*Ln)),Sn=this.wrap(Te[0]-En)*this.kx,Tn=(Te[1]-An)*this.ky;const Bn=Sn*Sn+Tn*Tn;Bn<ke&&(ke=Bn,Be=En,Ue=An,He=Cn,We=Ln)}return{point:[Be,Ue],index:He,t:Math.max(0,Math.min(1,We))}}wrap(e){for(;e<-180;)e+=360;for(;e>180;)e-=360;return e}}const MinPointsSize=100,MinLinePointsSize=50;function compareDistPair(Oe,e){return e[0]-Oe[0]}function getRangeSize(Oe){return Oe[1]-Oe[0]+1}function isRangeSafe(Oe,e){return Oe[1]>=Oe[0]&&Oe[1]<e}function splitRange(Oe,e){if(Oe[0]>Oe[1])return[null,null];const Te=getRangeSize(Oe);if(e){if(Te===2)return[Oe,null];const Be=Math.floor(Te/2);return[[Oe[0],Oe[0]+Be],[Oe[0]+Be,Oe[1]]]}if(Te===1)return[Oe,null];const ke=Math.floor(Te/2)-1;return[[Oe[0],Oe[0]+ke],[Oe[0]+ke+1,Oe[1]]]}function getBBox(Oe,e){if(!isRangeSafe(e,Oe.length))return[1/0,1/0,-1/0,-1/0];const Te=[1/0,1/0,-1/0,-1/0];for(let ke=e[0];ke<=e[1];++ke)updateBBox(Te,Oe[ke]);return Te}function getPolygonBBox(Oe){const e=[1/0,1/0,-1/0,-1/0];for(const Te of Oe)for(const ke of Te)updateBBox(e,ke);return e}function isValidBBox(Oe){return Oe[0]!==-1/0&&Oe[1]!==-1/0&&Oe[2]!==1/0&&Oe[3]!==1/0}function bboxToBBoxDistance(Oe,e,Te){if(!isValidBBox(Oe)||!isValidBBox(e))return NaN;let ke=0,Be=0;return Oe[2]<e[0]&&(ke=e[0]-Oe[2]),Oe[0]>e[2]&&(ke=Oe[0]-e[2]),Oe[1]>e[3]&&(Be=Oe[1]-e[3]),Oe[3]<e[1]&&(Be=e[1]-Oe[3]),Te.distance([0,0],[ke,Be])}function pointToLineDistance(Oe,e,Te){const ke=Te.pointOnLine(e,Oe);return Te.distance(Oe,ke.point)}function segmentToSegmentDistance(Oe,e,Te,ke,Be){const Ue=Math.min(pointToLineDistance(Oe,[Te,ke],Be),pointToLineDistance(e,[Te,ke],Be)),He=Math.min(pointToLineDistance(Te,[Oe,e],Be),pointToLineDistance(ke,[Oe,e],Be));return Math.min(Ue,He)}function lineToLineDistance(Oe,e,Te,ke,Be){if(!(isRangeSafe(e,Oe.length)&&isRangeSafe(ke,Te.length)))return 1/0;let He=1/0;for(let We=e[0];We<e[1];++We){const Cn=Oe[We],En=Oe[We+1];for(let An=ke[0];An<ke[1];++An){const Sn=Te[An],Tn=Te[An+1];if(segmentIntersectSegment(Cn,En,Sn,Tn))return 0;He=Math.min(He,segmentToSegmentDistance(Cn,En,Sn,Tn,Be))}}return He}function pointsToPointsDistance(Oe,e,Te,ke,Be){if(!(isRangeSafe(e,Oe.length)&&isRangeSafe(ke,Te.length)))return NaN;let He=1/0;for(let We=e[0];We<=e[1];++We)for(let Cn=ke[0];Cn<=ke[1];++Cn)if(He=Math.min(He,Be.distance(Oe[We],Te[Cn])),He===0)return He;return He}function pointToPolygonDistance(Oe,e,Te){if(pointWithinPolygon(Oe,e,!0))return 0;let ke=1/0;for(const Be of e){const Ue=Be[0],He=Be[Be.length-1];if(Ue!==He&&(ke=Math.min(ke,pointToLineDistance(Oe,[He,Ue],Te)),ke===0))return ke;const We=Te.pointOnLine(Be,Oe);if(ke=Math.min(ke,Te.distance(Oe,We.point)),ke===0)return ke}return ke}function lineToPolygonDistance(Oe,e,Te,ke){if(!isRangeSafe(e,Oe.length))return NaN;for(let Ue=e[0];Ue<=e[1];++Ue)if(pointWithinPolygon(Oe[Ue],Te,!0))return 0;let Be=1/0;for(let Ue=e[0];Ue<e[1];++Ue){const He=Oe[Ue],We=Oe[Ue+1];for(const Cn of Te)for(let En=0,An=Cn.length,Sn=An-1;En<An;Sn=En++){const Tn=Cn[Sn],Ln=Cn[En];if(segmentIntersectSegment(He,We,Tn,Ln))return 0;Be=Math.min(Be,segmentToSegmentDistance(He,We,Tn,Ln,ke))}}return Be}function polygonIntersect(Oe,e){for(const Te of Oe)for(const ke of Te)if(pointWithinPolygon(ke,e,!0))return!0;return!1}function polygonToPolygonDistance(Oe,e,Te,ke=1/0){const Be=getPolygonBBox(Oe),Ue=getPolygonBBox(e);if(ke!==1/0&&bboxToBBoxDistance(Be,Ue,Te)>=ke)return ke;if(boxWithinBox(Be,Ue)){if(polygonIntersect(Oe,e))return 0}else if(polygonIntersect(e,Oe))return 0;let He=1/0;for(const We of Oe)for(let Cn=0,En=We.length,An=En-1;Cn<En;An=Cn++){const Sn=We[An],Tn=We[Cn];for(const Ln of e)for(let Bn=0,ei=Ln.length,ti=ei-1;Bn<ei;ti=Bn++){const ni=Ln[ti],ri=Ln[Bn];if(segmentIntersectSegment(Sn,Tn,ni,ri))return 0;He=Math.min(He,segmentToSegmentDistance(Sn,Tn,ni,ri,Te))}}return He}function updateQueue(Oe,e,Te,ke,Be,Ue){if(!Ue)return;const He=bboxToBBoxDistance(getBBox(ke,Ue),Be,Te);He<e&&Oe.push([He,Ue,[0,0]])}function updateQueueTwoSets(Oe,e,Te,ke,Be,Ue,He){if(!Ue||!He)return;const We=bboxToBBoxDistance(getBBox(ke,Ue),getBBox(Be,He),Te);We<e&&Oe.push([We,Ue,He])}function pointsToPolygonDistance(Oe,e,Te,ke,Be=1/0){let Ue=Math.min(ke.distance(Oe[0],Te[0][0]),Be);if(Ue===0)return Ue;const He=new TinyQueue([[0,[0,Oe.length-1],[0,0]]],compareDistPair),We=getPolygonBBox(Te);for(;He.length>0;){const Cn=He.pop();if(Cn[0]>=Ue)continue;const En=Cn[1],An=e?MinLinePointsSize:MinPointsSize;if(getRangeSize(En)<=An){if(!isRangeSafe(En,Oe.length))return NaN;if(e){const Sn=lineToPolygonDistance(Oe,En,Te,ke);if(isNaN(Sn)||Sn===0)return Sn;Ue=Math.min(Ue,Sn)}else for(let Sn=En[0];Sn<=En[1];++Sn){const Tn=pointToPolygonDistance(Oe[Sn],Te,ke);if(Ue=Math.min(Ue,Tn),Ue===0)return 0}}else{const Sn=splitRange(En,e);updateQueue(He,Ue,ke,Oe,We,Sn[0]),updateQueue(He,Ue,ke,Oe,We,Sn[1])}}return Ue}function pointSetToPointSetDistance(Oe,e,Te,ke,Be,Ue=1/0){let He=Math.min(Ue,Be.distance(Oe[0],Te[0]));if(He===0)return He;const We=new TinyQueue([[0,[0,Oe.length-1],[0,Te.length-1]]],compareDistPair);for(;We.length>0;){const Cn=We.pop();if(Cn[0]>=He)continue;const En=Cn[1],An=Cn[2],Sn=e?MinLinePointsSize:MinPointsSize,Tn=ke?MinLinePointsSize:MinPointsSize;if(getRangeSize(En)<=Sn&&getRangeSize(An)<=Tn){if(!isRangeSafe(En,Oe.length)&&isRangeSafe(An,Te.length))return NaN;let Ln;if(e&&ke)Ln=lineToLineDistance(Oe,En,Te,An,Be),He=Math.min(He,Ln);else if(e&&!ke){const Bn=Oe.slice(En[0],En[1]+1);for(let ei=An[0];ei<=An[1];++ei)if(Ln=pointToLineDistance(Te[ei],Bn,Be),He=Math.min(He,Ln),He===0)return He}else if(!e&&ke){const Bn=Te.slice(An[0],An[1]+1);for(let ei=En[0];ei<=En[1];++ei)if(Ln=pointToLineDistance(Oe[ei],Bn,Be),He=Math.min(He,Ln),He===0)return He}else Ln=pointsToPointsDistance(Oe,En,Te,An,Be),He=Math.min(He,Ln)}else{const Ln=splitRange(En,e),Bn=splitRange(An,ke);updateQueueTwoSets(We,He,Be,Oe,Te,Ln[0],Bn[0]),updateQueueTwoSets(We,He,Be,Oe,Te,Ln[0],Bn[1]),updateQueueTwoSets(We,He,Be,Oe,Te,Ln[1],Bn[0]),updateQueueTwoSets(We,He,Be,Oe,Te,Ln[1],Bn[1])}}return He}function pointToGeometryDistance(Oe,e){const Te=Oe.geometry(),ke=Te.flat().map(He=>getLngLatFromTileCoord([He.x,He.y],Oe.canonical));if(Te.length===0)return NaN;const Be=new CheapRuler(ke[0][1]);let Ue=1/0;for(const He of e){switch(He.type){case"Point":Ue=Math.min(Ue,pointSetToPointSetDistance(ke,!1,[He.coordinates],!1,Be,Ue));break;case"LineString":Ue=Math.min(Ue,pointSetToPointSetDistance(ke,!1,He.coordinates,!0,Be,Ue));break;case"Polygon":Ue=Math.min(Ue,pointsToPolygonDistance(ke,!1,He.coordinates,Be,Ue));break}if(Ue===0)return Ue}return Ue}function lineStringToGeometryDistance(Oe,e){const Te=Oe.geometry(),ke=Te.flat().map(He=>getLngLatFromTileCoord([He.x,He.y],Oe.canonical));if(Te.length===0)return NaN;const Be=new CheapRuler(ke[0][1]);let Ue=1/0;for(const He of e){switch(He.type){case"Point":Ue=Math.min(Ue,pointSetToPointSetDistance(ke,!0,[He.coordinates],!1,Be,Ue));break;case"LineString":Ue=Math.min(Ue,pointSetToPointSetDistance(ke,!0,He.coordinates,!0,Be,Ue));break;case"Polygon":Ue=Math.min(Ue,pointsToPolygonDistance(ke,!0,He.coordinates,Be,Ue));break}if(Ue===0)return Ue}return Ue}function polygonToGeometryDistance(Oe,e){const Te=Oe.geometry();if(Te.length===0||Te[0].length===0)return NaN;const ke=classifyRings(Te).map(He=>He.map(We=>We.map(Cn=>getLngLatFromTileCoord([Cn.x,Cn.y],Oe.canonical)))),Be=new CheapRuler(ke[0][0][0][1]);let Ue=1/0;for(const He of e)for(const We of ke){switch(He.type){case"Point":Ue=Math.min(Ue,pointsToPolygonDistance([He.coordinates],!1,We,Be,Ue));break;case"LineString":Ue=Math.min(Ue,pointsToPolygonDistance(He.coordinates,!0,We,Be,Ue));break;case"Polygon":Ue=Math.min(Ue,polygonToPolygonDistance(We,He.coordinates,Be,Ue));break}if(Ue===0)return Ue}return Ue}function toSimpleGeometry(Oe){return Oe.type==="MultiPolygon"?Oe.coordinates.map(e=>({type:"Polygon",coordinates:e})):Oe.type==="MultiLineString"?Oe.coordinates.map(e=>({type:"LineString",coordinates:e})):Oe.type==="MultiPoint"?Oe.coordinates.map(e=>({type:"Point",coordinates:e})):[Oe]}class Distance{constructor(e,Te){this.type=NumberType,this.geojson=e,this.geometries=Te}static parse(e,Te){if(e.length!==2)return Te.error(`'distance' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const ke=e[1];if(ke.type==="FeatureCollection")return new Distance(ke,ke.features.map(Be=>toSimpleGeometry(Be.geometry)).flat());if(ke.type==="Feature")return new Distance(ke,toSimpleGeometry(ke.geometry));if("type"in ke&&"coordinates"in ke)return new Distance(ke,toSimpleGeometry(ke))}return Te.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointToGeometryDistance(e,this.geometries);if(e.geometryType()==="LineString")return lineStringToGeometryDistance(e,this.geometries);if(e.geometryType()==="Polygon")return polygonToGeometryDistance(e,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const expressions$1={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion,at:At$1,boolean:Assertion,case:Case,coalesce:Coalesce,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In,"index-of":IndexOf,interpolate:Interpolate,"interpolate-hcl":Interpolate,"interpolate-lab":Interpolate,length:Length,let:Let,literal:Literal,match:Match,number:Assertion,"number-format":NumberFormat,object:Assertion,slice:Slice,step:Step,string:Assertion,"to-boolean":Coercion,"to-color":Coercion,"to-number":Coercion,"to-string":Coercion,var:Var,within:Within,distance:Distance};class CompoundExpression{constructor(e,Te,ke,Be){this.name=e,this.type=Te,this._evaluate=ke,this.args=Be}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}static parse(e,Te){const ke=e[0],Be=CompoundExpression.definitions[ke];if(!Be)return Te.error(`Unknown expression "${ke}". If you wanted a literal array, use ["literal", [...]].`,0);const Ue=Array.isArray(Be)?Be[0]:Be.type,He=Array.isArray(Be)?[[Be[1],Be[2]]]:Be.overloads,We=He.filter(([En])=>!Array.isArray(En)||En.length===e.length-1);let Cn=null;for(const[En,An]of We){Cn=new ParsingContext(Te.registry,isExpressionConstant,Te.path,null,Te.scope);const Sn=[];let Tn=!1;for(let Ln=1;Ln<e.length;Ln++){const Bn=e[Ln],ei=Array.isArray(En)?En[Ln-1]:En.type,ti=Cn.parse(Bn,1+Sn.length,ei);if(!ti){Tn=!0;break}Sn.push(ti)}if(!Tn){if(Array.isArray(En)&&En.length!==Sn.length){Cn.error(`Expected ${En.length} arguments, but found ${Sn.length} instead.`);continue}for(let Ln=0;Ln<Sn.length;Ln++){const Bn=Array.isArray(En)?En[Ln]:En.type,ei=Sn[Ln];Cn.concat(Ln+1).checkSubtype(Bn,ei.type)}if(Cn.errors.length===0)return new CompoundExpression(ke,Ue,An,Sn)}}if(We.length===1)Te.errors.push(...Cn.errors);else{const An=(We.length?We:He).map(([Tn])=>stringifySignature(Tn)).join(" | "),Sn=[];for(let Tn=1;Tn<e.length;Tn++){const Ln=Te.parse(e[Tn],1+Sn.length);if(!Ln)return null;Sn.push(typeToString(Ln.type))}Te.error(`Expected arguments of type ${An}, but found (${Sn.join(", ")}) instead.`)}return null}static register(e,Te){CompoundExpression.definitions=Te;for(const ke in Te)e[ke]=CompoundExpression}}function rgba(Oe,[e,Te,ke,Be]){e=e.evaluate(Oe),Te=Te.evaluate(Oe),ke=ke.evaluate(Oe);const Ue=Be?Be.evaluate(Oe):1,He=validateRGBA(e,Te,ke,Ue);if(He)throw new RuntimeError(He);return new Color(e/255,Te/255,ke/255,Ue,!1)}function has(Oe,e){return Oe in e}function get$1(Oe,e){const Te=e[Oe];return typeof Te>"u"?null:Te}function binarySearch(Oe,e,Te,ke){for(;Te<=ke;){const Be=Te+ke>>1;if(e[Be]===Oe)return!0;e[Be]>Oe?ke=Be-1:Te=Be+1}return!1}function varargs(Oe){return{type:Oe}}CompoundExpression.register(expressions$1,{error:[ErrorType,[StringType],(Oe,[e])=>{throw new RuntimeError(e.evaluate(Oe))}],typeof:[StringType,[ValueType],(Oe,[e])=>typeToString(typeOf(e.evaluate(Oe)))],"to-rgba":[array(NumberType,4),[ColorType],(Oe,[e])=>{const[Te,ke,Be,Ue]=e.evaluate(Oe).rgb;return[Te*255,ke*255,Be*255,Ue]}],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(Oe,[e])=>has(e.evaluate(Oe),Oe.properties())],[[StringType,ObjectType],(Oe,[e,Te])=>has(e.evaluate(Oe),Te.evaluate(Oe))]]},get:{type:ValueType,overloads:[[[StringType],(Oe,[e])=>get$1(e.evaluate(Oe),Oe.properties())],[[StringType,ObjectType],(Oe,[e,Te])=>get$1(e.evaluate(Oe),Te.evaluate(Oe))]]},"feature-state":[ValueType,[StringType],(Oe,[e])=>get$1(e.evaluate(Oe),Oe.featureState||{})],properties:[ObjectType,[],Oe=>Oe.properties()],"geometry-type":[StringType,[],Oe=>Oe.geometryType()],id:[ValueType,[],Oe=>Oe.id()],zoom:[NumberType,[],Oe=>Oe.globals.zoom],"heatmap-density":[NumberType,[],Oe=>Oe.globals.heatmapDensity||0],"line-progress":[NumberType,[],Oe=>Oe.globals.lineProgress||0],accumulated:[ValueType,[],Oe=>Oe.globals.accumulated===void 0?null:Oe.globals.accumulated],"+":[NumberType,varargs(NumberType),(Oe,e)=>{let Te=0;for(const ke of e)Te+=ke.evaluate(Oe);return Te}],"*":[NumberType,varargs(NumberType),(Oe,e)=>{let Te=1;for(const ke of e)Te*=ke.evaluate(Oe);return Te}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(Oe,[e,Te])=>e.evaluate(Oe)-Te.evaluate(Oe)],[[NumberType],(Oe,[e])=>-e.evaluate(Oe)]]},"/":[NumberType,[NumberType,NumberType],(Oe,[e,Te])=>e.evaluate(Oe)/Te.evaluate(Oe)],"%":[NumberType,[NumberType,NumberType],(Oe,[e,Te])=>e.evaluate(Oe)%Te.evaluate(Oe)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(Oe,[e,Te])=>Math.pow(e.evaluate(Oe),Te.evaluate(Oe))],sqrt:[NumberType,[NumberType],(Oe,[e])=>Math.sqrt(e.evaluate(Oe))],log10:[NumberType,[NumberType],(Oe,[e])=>Math.log(e.evaluate(Oe))/Math.LN10],ln:[NumberType,[NumberType],(Oe,[e])=>Math.log(e.evaluate(Oe))],log2:[NumberType,[NumberType],(Oe,[e])=>Math.log(e.evaluate(Oe))/Math.LN2],sin:[NumberType,[NumberType],(Oe,[e])=>Math.sin(e.evaluate(Oe))],cos:[NumberType,[NumberType],(Oe,[e])=>Math.cos(e.evaluate(Oe))],tan:[NumberType,[NumberType],(Oe,[e])=>Math.tan(e.evaluate(Oe))],asin:[NumberType,[NumberType],(Oe,[e])=>Math.asin(e.evaluate(Oe))],acos:[NumberType,[NumberType],(Oe,[e])=>Math.acos(e.evaluate(Oe))],atan:[NumberType,[NumberType],(Oe,[e])=>Math.atan(e.evaluate(Oe))],min:[NumberType,varargs(NumberType),(Oe,e)=>Math.min(...e.map(Te=>Te.evaluate(Oe)))],max:[NumberType,varargs(NumberType),(Oe,e)=>Math.max(...e.map(Te=>Te.evaluate(Oe)))],abs:[NumberType,[NumberType],(Oe,[e])=>Math.abs(e.evaluate(Oe))],round:[NumberType,[NumberType],(Oe,[e])=>{const Te=e.evaluate(Oe);return Te<0?-Math.round(-Te):Math.round(Te)}],floor:[NumberType,[NumberType],(Oe,[e])=>Math.floor(e.evaluate(Oe))],ceil:[NumberType,[NumberType],(Oe,[e])=>Math.ceil(e.evaluate(Oe))],"filter-==":[BooleanType,[StringType,ValueType],(Oe,[e,Te])=>Oe.properties()[e.value]===Te.value],"filter-id-==":[BooleanType,[ValueType],(Oe,[e])=>Oe.id()===e.value],"filter-type-==":[BooleanType,[StringType],(Oe,[e])=>Oe.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(Oe,[e,Te])=>{const ke=Oe.properties()[e.value],Be=Te.value;return typeof ke==typeof Be&&ke<Be}],"filter-id-<":[BooleanType,[ValueType],(Oe,[e])=>{const Te=Oe.id(),ke=e.value;return typeof Te==typeof ke&&Te<ke}],"filter->":[BooleanType,[StringType,ValueType],(Oe,[e,Te])=>{const ke=Oe.properties()[e.value],Be=Te.value;return typeof ke==typeof Be&&ke>Be}],"filter-id->":[BooleanType,[ValueType],(Oe,[e])=>{const Te=Oe.id(),ke=e.value;return typeof Te==typeof ke&&Te>ke}],"filter-<=":[BooleanType,[StringType,ValueType],(Oe,[e,Te])=>{const ke=Oe.properties()[e.value],Be=Te.value;return typeof ke==typeof Be&&ke<=Be}],"filter-id-<=":[BooleanType,[ValueType],(Oe,[e])=>{const Te=Oe.id(),ke=e.value;return typeof Te==typeof ke&&Te<=ke}],"filter->=":[BooleanType,[StringType,ValueType],(Oe,[e,Te])=>{const ke=Oe.properties()[e.value],Be=Te.value;return typeof ke==typeof Be&&ke>=Be}],"filter-id->=":[BooleanType,[ValueType],(Oe,[e])=>{const Te=Oe.id(),ke=e.value;return typeof Te==typeof ke&&Te>=ke}],"filter-has":[BooleanType,[ValueType],(Oe,[e])=>e.value in Oe.properties()],"filter-has-id":[BooleanType,[],Oe=>Oe.id()!==null&&Oe.id()!==void 0],"filter-type-in":[BooleanType,[array(StringType)],(Oe,[e])=>e.value.indexOf(Oe.geometryType())>=0],"filter-id-in":[BooleanType,[array(ValueType)],(Oe,[e])=>e.value.indexOf(Oe.id())>=0],"filter-in-small":[BooleanType,[StringType,array(ValueType)],(Oe,[e,Te])=>Te.value.indexOf(Oe.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array(ValueType)],(Oe,[e,Te])=>binarySearch(Oe.properties()[e.value],Te.value,0,Te.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(Oe,[e,Te])=>e.evaluate(Oe)&&Te.evaluate(Oe)],[varargs(BooleanType),(Oe,e)=>{for(const Te of e)if(!Te.evaluate(Oe))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(Oe,[e,Te])=>e.evaluate(Oe)||Te.evaluate(Oe)],[varargs(BooleanType),(Oe,e)=>{for(const Te of e)if(Te.evaluate(Oe))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(Oe,[e])=>!e.evaluate(Oe)],"is-supported-script":[BooleanType,[StringType],(Oe,[e])=>{const Te=Oe.globals&&Oe.globals.isSupportedScript;return Te?Te(e.evaluate(Oe)):!0}],upcase:[StringType,[StringType],(Oe,[e])=>e.evaluate(Oe).toUpperCase()],downcase:[StringType,[StringType],(Oe,[e])=>e.evaluate(Oe).toLowerCase()],concat:[StringType,varargs(ValueType),(Oe,e)=>e.map(Te=>valueToString(Te.evaluate(Oe))).join("")],"resolved-locale":[StringType,[CollatorType],(Oe,[e])=>e.evaluate(Oe).resolvedLocale()]});function stringifySignature(Oe){return Array.isArray(Oe)?`(${Oe.map(typeToString).join(", ")})`:`(${typeToString(Oe.type)}...)`}function isExpressionConstant(Oe){if(Oe instanceof Var)return isExpressionConstant(Oe.boundExpression);if(Oe instanceof CompoundExpression&&Oe.name==="error")return!1;if(Oe instanceof CollatorExpression)return!1;if(Oe instanceof Within)return!1;if(Oe instanceof Distance)return!1;const e=Oe instanceof Coercion||Oe instanceof Assertion;let Te=!0;return Oe.eachChild(ke=>{e?Te=Te&&isExpressionConstant(ke):Te=Te&&ke instanceof Literal}),Te?isFeatureConstant(Oe)&&isGlobalPropertyConstant(Oe,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function isFeatureConstant(Oe){if(Oe instanceof CompoundExpression){if(Oe.name==="get"&&Oe.args.length===1)return!1;if(Oe.name==="feature-state")return!1;if(Oe.name==="has"&&Oe.args.length===1)return!1;if(Oe.name==="properties"||Oe.name==="geometry-type"||Oe.name==="id")return!1;if(/^filter-/.test(Oe.name))return!1}if(Oe instanceof Within||Oe instanceof Distance)return!1;let e=!0;return Oe.eachChild(Te=>{e&&!isFeatureConstant(Te)&&(e=!1)}),e}function isStateConstant(Oe){if(Oe instanceof CompoundExpression&&Oe.name==="feature-state")return!1;let e=!0;return Oe.eachChild(Te=>{e&&!isStateConstant(Te)&&(e=!1)}),e}function isGlobalPropertyConstant(Oe,e){if(Oe instanceof CompoundExpression&&e.indexOf(Oe.name)>=0)return!1;let Te=!0;return Oe.eachChild(ke=>{Te&&!isGlobalPropertyConstant(ke,e)&&(Te=!1)}),Te}function success(Oe){return{result:"success",value:Oe}}function error(Oe){return{result:"error",value:Oe}}function supportsPropertyExpression(Oe){return Oe["property-type"]==="data-driven"||Oe["property-type"]==="cross-faded-data-driven"}function supportsZoomExpression(Oe){return!!Oe.expression&&Oe.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(Oe){return!!Oe.expression&&Oe.expression.interpolated}function isFunction$1(Oe){return typeof Oe=="object"&&Oe!==null&&!Array.isArray(Oe)}class StyleExpression{constructor(e,Te){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext,this._defaultValue=Te?getDefaultValue(Te):null,this._enumValues=Te&&Te.type==="enum"?Te.values:null}evaluateWithoutErrorHandling(e,Te,ke,Be,Ue,He){return this._evaluator.globals=e,this._evaluator.feature=Te,this._evaluator.featureState=ke,this._evaluator.canonical=Be,this._evaluator.availableImages=Ue||null,this._evaluator.formattedSection=He,this.expression.evaluate(this._evaluator)}evaluate(e,Te,ke,Be,Ue,He){this._evaluator.globals=e,this._evaluator.feature=Te||null,this._evaluator.featureState=ke||null,this._evaluator.canonical=Be,this._evaluator.availableImages=Ue||null,this._evaluator.formattedSection=He||null;try{const We=this.expression.evaluate(this._evaluator);if(We==null||typeof We=="number"&&We!==We)return this._defaultValue;if(this._enumValues&&!(We in this._enumValues))throw new RuntimeError(`Expected value to be one of ${Object.keys(this._enumValues).map(Cn=>JSON.stringify(Cn)).join(", ")}, but found ${JSON.stringify(We)} instead.`);return We}catch(We){return this._warningHistory[We.message]||(this._warningHistory[We.message]=!0,typeof console<"u"&&console.warn(We.message)),this._defaultValue}}}function isExpression(Oe){return Array.isArray(Oe)&&Oe.length>0&&typeof Oe[0]=="string"&&Oe[0]in expressions$1}function createExpression(Oe,e){const Te=new ParsingContext(expressions$1,isExpressionConstant,[],e?getExpectedType(e):void 0),ke=Te.parse(Oe,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return ke?success(new StyleExpression(ke,e)):error(Te.errors)}class ZoomConstantExpression{constructor(e,Te){this.kind=e,this._styleExpression=Te,this.isStateDependent=e!=="constant"&&!isStateConstant(Te.expression)}evaluateWithoutErrorHandling(e,Te,ke,Be,Ue,He){return this._styleExpression.evaluateWithoutErrorHandling(e,Te,ke,Be,Ue,He)}evaluate(e,Te,ke,Be,Ue,He){return this._styleExpression.evaluate(e,Te,ke,Be,Ue,He)}}class ZoomDependentExpression{constructor(e,Te,ke,Be){this.kind=e,this.zoomStops=ke,this._styleExpression=Te,this.isStateDependent=e!=="camera"&&!isStateConstant(Te.expression),this.interpolationType=Be}evaluateWithoutErrorHandling(e,Te,ke,Be,Ue,He){return this._styleExpression.evaluateWithoutErrorHandling(e,Te,ke,Be,Ue,He)}evaluate(e,Te,ke,Be,Ue,He){return this._styleExpression.evaluate(e,Te,ke,Be,Ue,He)}interpolationFactor(e,Te,ke){return this.interpolationType?Interpolate.interpolationFactor(this.interpolationType,e,Te,ke):0}}function createPropertyExpression(Oe,e){const Te=createExpression(Oe,e);if(Te.result==="error")return Te;const ke=Te.value.expression,Be=isFeatureConstant(ke);if(!Be&&!supportsPropertyExpression(e))return error([new ExpressionParsingError("","data expressions not supported")]);const Ue=isGlobalPropertyConstant(ke,["zoom"]);if(!Ue&&!supportsZoomExpression(e))return error([new ExpressionParsingError("","zoom expressions not supported")]);const He=findZoomCurve(ke);if(!He&&!Ue)return error([new ExpressionParsingError("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(He instanceof ExpressionParsingError)return error([He]);if(He instanceof Interpolate&&!supportsInterpolation(e))return error([new ExpressionParsingError("",'"interpolate" expressions cannot be used with this property')]);if(!He)return success(Be?new ZoomConstantExpression("constant",Te.value):new ZoomConstantExpression("source",Te.value));const We=He instanceof Interpolate?He.interpolation:void 0;return success(Be?new ZoomDependentExpression("camera",Te.value,He.labels,We):new ZoomDependentExpression("composite",Te.value,He.labels,We))}function findZoomCurve(Oe){let e=null;if(Oe instanceof Let)e=findZoomCurve(Oe.result);else if(Oe instanceof Coalesce){for(const Te of Oe.args)if(e=findZoomCurve(Te),e)break}else(Oe instanceof Step||Oe instanceof Interpolate)&&Oe.input instanceof CompoundExpression&&Oe.input.name==="zoom"&&(e=Oe);return e instanceof ExpressionParsingError||Oe.eachChild(Te=>{const ke=findZoomCurve(Te);ke instanceof ExpressionParsingError?e=ke:!e&&ke?e=new ExpressionParsingError("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&ke&&e!==ke&&(e=new ExpressionParsingError("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(Oe){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,padding:PaddingType,projectionDefinition:ProjectionDefinitionType,resolvedImage:ResolvedImageType,variableAnchorOffsetCollection:VariableAnchorOffsetCollectionType};return Oe.type==="array"?array(e[Oe.value]||ValueType,Oe.length):e[Oe.type]}function getDefaultValue(Oe){return Oe.type==="color"&&isFunction$1(Oe.default)?new Color(0,0,0,0):Oe.type==="color"?Color.parse(Oe.default)||null:Oe.type==="padding"?Padding.parse(Oe.default)||null:Oe.type==="variableAnchorOffsetCollection"?VariableAnchorOffsetCollection.parse(Oe.default)||null:Oe.type==="projectionDefinition"?ProjectionDefinition.parse(Oe.default)||null:Oe.default===void 0?null:Oe.default}function isExpressionFilter(Oe){if(Oe===!0||Oe===!1)return!0;if(!Array.isArray(Oe)||Oe.length===0)return!1;switch(Oe[0]){case"has":return Oe.length>=2&&Oe[1]!=="$id"&&Oe[1]!=="$type";case"in":return Oe.length>=3&&(typeof Oe[1]!="string"||Array.isArray(Oe[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return Oe.length!==3||Array.isArray(Oe[1])||Array.isArray(Oe[2]);case"any":case"all":for(const e of Oe.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}const filterSpec={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function featureFilter(Oe){if(Oe==null)return{filter:()=>!0,needGeometry:!1};isExpressionFilter(Oe)||(Oe=convertFilter$1(Oe));const e=createExpression(Oe,filterSpec);if(e.result==="error")throw new Error(e.value.map(Te=>`${Te.key}: ${Te.message}`).join(", "));{const Te=geometryNeeded(Oe);return{filter:(ke,Be,Ue)=>e.value.evaluate(ke,Be,{},Ue),needGeometry:Te}}}function compare(Oe,e){return Oe<e?-1:Oe>e?1:0}function geometryNeeded(Oe){if(!Array.isArray(Oe))return!1;if(Oe[0]==="within"||Oe[0]==="distance")return!0;for(let e=1;e<Oe.length;e++)if(geometryNeeded(Oe[e]))return!0;return!1}function convertFilter$1(Oe){if(!Oe)return!0;const e=Oe[0];return Oe.length<=1?e!=="any":e==="=="?convertComparisonOp$1(Oe[1],Oe[2],"=="):e==="!="?convertNegation(convertComparisonOp$1(Oe[1],Oe[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp$1(Oe[1],Oe[2],e):e==="any"?convertDisjunctionOp(Oe.slice(1)):e==="all"?["all"].concat(Oe.slice(1).map(convertFilter$1)):e==="none"?["all"].concat(Oe.slice(1).map(convertFilter$1).map(convertNegation)):e==="in"?convertInOp$1(Oe[1],Oe.slice(2)):e==="!in"?convertNegation(convertInOp$1(Oe[1],Oe.slice(2))):e==="has"?convertHasOp$1(Oe[1]):e==="!has"?convertNegation(convertHasOp$1(Oe[1])):!0}function convertComparisonOp$1(Oe,e,Te){switch(Oe){case"$type":return[`filter-type-${Te}`,e];case"$id":return[`filter-id-${Te}`,e];default:return[`filter-${Te}`,Oe,e]}}function convertDisjunctionOp(Oe){return["any"].concat(Oe.map(convertFilter$1))}function convertInOp$1(Oe,e){if(e.length===0)return!1;switch(Oe){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(Te=>typeof Te!=typeof e[0])?["filter-in-large",Oe,["literal",e.sort(compare)]]:["filter-in-small",Oe,["literal",e]]}}function convertHasOp$1(Oe){switch(Oe){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",Oe]}}function convertNegation(Oe){return["!",Oe]}function convertLiteral(Oe){return typeof Oe=="object"?["literal",Oe]:Oe}function convertFunction(Oe,e){let Te=Oe.stops;if(!Te)return convertIdentityFunction(Oe,e);const ke=Te&&typeof Te[0][0]=="object",Be=ke||Oe.property!==void 0,Ue=ke||!Be;return Te=Te.map(He=>!Be&&e.tokens&&typeof He[1]=="string"?[He[0],convertTokenString(He[1])]:[He[0],convertLiteral(He[1])]),ke?convertZoomAndPropertyFunction(Oe,e,Te):Ue?convertZoomFunction(Oe,e,Te):convertPropertyFunction(Oe,e,Te)}function convertIdentityFunction(Oe,e){const Te=["get",Oe.property];if(Oe.default===void 0)return e.type==="string"?["string",Te]:Te;if(e.type==="enum")return["match",Te,Object.keys(e.values),Te,Oe.default];{const ke=[e.type==="color"?"to-color":e.type,Te,convertLiteral(Oe.default)];return e.type==="array"&&ke.splice(1,0,e.value,e.length||null),ke}}function getInterpolateOperator(Oe){switch(Oe.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(Oe,e,Te){const ke={},Be={},Ue=[];for(let We=0;We<Te.length;We++){const Cn=Te[We],En=Cn[0].zoom;ke[En]===void 0&&(ke[En]={zoom:En,type:Oe.type,property:Oe.property,default:Oe.default},Be[En]=[],Ue.push(En)),Be[En].push([Cn[0].value,Cn[1]])}if(getFunctionType({},e)==="exponential"){const We=[getInterpolateOperator(Oe),["linear"],["zoom"]];for(const Cn of Ue){const En=convertPropertyFunction(ke[Cn],e,Be[Cn]);appendStopPair(We,Cn,En,!1)}return We}else{const We=["step",["zoom"]];for(const Cn of Ue){const En=convertPropertyFunction(ke[Cn],e,Be[Cn]);appendStopPair(We,Cn,En,!0)}return fixupDegenerateStepCurve(We),We}}function coalesce(Oe,e){if(Oe!==void 0)return Oe;if(e!==void 0)return e}function getFallback(Oe,e){const Te=convertLiteral(coalesce(Oe.default,e.default));return Te===void 0&&e.type==="resolvedImage"?"":Te}function convertPropertyFunction(Oe,e,Te){const ke=getFunctionType(Oe,e),Be=["get",Oe.property];if(ke==="categorical"&&typeof Te[0][0]=="boolean"){const Ue=["case"];for(const He of Te)Ue.push(["==",Be,He[0]],He[1]);return Ue.push(getFallback(Oe,e)),Ue}else if(ke==="categorical"){const Ue=["match",Be];for(const He of Te)appendStopPair(Ue,He[0],He[1],!1);return Ue.push(getFallback(Oe,e)),Ue}else if(ke==="interval"){const Ue=["step",["number",Be]];for(const He of Te)appendStopPair(Ue,He[0],He[1],!0);return fixupDegenerateStepCurve(Ue),Oe.default===void 0?Ue:["case",["==",["typeof",Be],"number"],Ue,convertLiteral(Oe.default)]}else if(ke==="exponential"){const Ue=Oe.base!==void 0?Oe.base:1,He=[getInterpolateOperator(Oe),Ue===1?["linear"]:["exponential",Ue],["number",Be]];for(const We of Te)appendStopPair(He,We[0],We[1],!1);return Oe.default===void 0?He:["case",["==",["typeof",Be],"number"],He,convertLiteral(Oe.default)]}else throw new Error(`Unknown property function type ${ke}`)}function convertZoomFunction(Oe,e,Te,ke=["zoom"]){const Be=getFunctionType(Oe,e);let Ue,He=!1;if(Be==="interval")Ue=["step",ke],He=!0;else if(Be==="exponential"){const We=Oe.base!==void 0?Oe.base:1;Ue=[getInterpolateOperator(Oe),We===1?["linear"]:["exponential",We],ke]}else throw new Error(`Unknown zoom function type "${Be}"`);for(const We of Te)appendStopPair(Ue,We[0],We[1],He);return fixupDegenerateStepCurve(Ue),Ue}function fixupDegenerateStepCurve(Oe){Oe[0]==="step"&&Oe.length===3&&(Oe.push(0),Oe.push(Oe[3]))}function appendStopPair(Oe,e,Te,ke){Oe.length>3&&e===Oe[Oe.length-2]||(ke&&Oe.length===2||Oe.push(e),Oe.push(Te))}function getFunctionType(Oe,e){return Oe.type?Oe.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(Oe){const e=["concat"],Te=/{([^{}]+)}/g;let ke=0;for(let Be=Te.exec(Oe);Be!==null;Be=Te.exec(Oe)){const Ue=Oe.slice(ke,Te.lastIndex-Be[0].length);ke=Te.lastIndex,Ue.length>0&&e.push(Ue),e.push(["get",Be[1]])}if(e.length===1)return Oe;if(ke<Oe.length)e.push(Oe.slice(ke));else if(e.length===2)return["to-string",e[1]];return e}const v8=v8Spec;var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={};function mb2css(Oe,e,Te){var ke=fontCache[Oe];if(!ke){Array.isArray(Oe)||(Oe=[Oe]);for(var Be=400,Ue="normal",He=[],We,Cn,En=0,An=Oe.length;En<An;++En){var Sn=Oe[En],Tn=Sn.split(" "),Ln=Tn[Tn.length-1].toLowerCase();Ln=="normal"||Ln=="italic"||Ln=="oblique"?(Ue=Cn?Ue:Ln,Cn=!0,Tn.pop(),Ln=Tn[Tn.length-1].toLowerCase()):italicRE.test(Ln)&&(Ln=Ln.replace(italicRE,""),Ue=Cn?Ue:Tn[Tn.length-1].replace(Ln,""),Cn=!0);for(var Bn in fontWeights){var ei=Tn.length>1?Tn[Tn.length-2].toLowerCase():"";if(Ln==Bn||Ln==Bn.replace("-","")||ei+"-"+Ln==Bn){Be=We?Be:fontWeights[Bn],Tn.pop(),ei&&Bn.startsWith(ei)&&Tn.pop();break}}!We&&typeof Ln=="number"&&(Be=Ln,We=!0);var ti=Tn.join(sp).replace("Klokantech Noto Sans","Noto Sans");ti.indexOf(sp)!==-1&&(ti='"'+ti+'"'),He.push(ti)}ke=fontCache[Oe]=[Ue,Be,He]}return ke[0]+sp+ke[1]+sp+e+"px"+(Te?"/"+Te:"")+sp+ke[2]}const PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class MapBrowserEventHandler extends Target{constructor(e,Te){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=Te===void 0?1:Te,this.down_=null;const ke=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=ke,this.pointerdownListenerKey_=listen(ke,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(ke,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let Te=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(Te),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,Te=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(Te)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const ke=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(ke)},250)}updateActivePointers_(e){const Te=e,ke=Te.pointerId;if(Te.type==MapBrowserEventType.POINTERUP||Te.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[ke];for(const Be in this.trackedTouches_)if(this.trackedTouches_[Be].target!==Te.target){delete this.trackedTouches_[Be];break}}else(Te.type==MapBrowserEventType.POINTERDOWN||Te.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[ke]=Te);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const Te=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(Te),this.emulateClicks_&&!Te.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const Te=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(Te),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const ke=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(ke,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(ke,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==ke&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const Te=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(Te)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const Te=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,Te))}handleTouchMove_(e){const Te=this.originalPointerMoveEvent_;(!Te||Te.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,Te){this.priorityFunction_=e,this.keyFunction_=Te,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,Te=this.priorities_,ke=e[0];e.length==1?(e.length=0,Te.length=0):(e[0]=e.pop(),Te[0]=Te.pop(),this.siftUp_(0));const Be=this.keyFunction_(ke);return delete this.queuedElements_[Be],ke}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const Te=this.priorityFunction_(e);return Te!=DROP?(this.elements_.push(e),this.priorities_.push(Te),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const Te=this.elements_,ke=this.priorities_,Be=Te.length,Ue=Te[e],He=ke[e],We=e;for(;e<Be>>1;){const Cn=this.getLeftChildIndex_(e),En=this.getRightChildIndex_(e),An=En<Be&&ke[En]<ke[Cn]?En:Cn;Te[e]=Te[An],ke[e]=ke[An],e=An}Te[e]=Ue,ke[e]=He,this.siftDown_(We,e)}siftDown_(e,Te){const ke=this.elements_,Be=this.priorities_,Ue=ke[Te],He=Be[Te];for(;Te>e;){const We=this.getParentIndex_(Te);if(Be[We]>He)ke[Te]=ke[We],Be[Te]=Be[We],Te=We;else break}ke[Te]=Ue,Be[Te]=He}reprioritize(){const e=this.priorityFunction_,Te=this.elements_,ke=this.priorities_;let Be=0;const Ue=Te.length;let He,We,Cn;for(We=0;We<Ue;++We)He=Te[We],Cn=e(He),Cn==DROP?delete this.queuedElements_[this.keyFunction_(He)]:(ke[Be]=Cn,Te[Be++]=He);Te.length=Be,ke.length=Be,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,Te){super(ke=>e.apply(null,ke),ke=>ke[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=Te,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const Te=super.enqueue(e);return Te&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),Te}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const Te=e.target,ke=Te.getState();if(ke===TileState.LOADED||ke===TileState.ERROR||ke===TileState.EMPTY){ke!==TileState.ERROR&&Te.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const Be=Te.getKey();Be in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[Be],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,Te){let ke=0;for(;this.tilesLoading_<e&&ke<Te&&this.getCount()>0;){const Be=this.dequeue()[0],Ue=Be.getKey();Be.getState()===TileState.IDLE&&!(Ue in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[Ue]=!0,++this.tilesLoading_,++ke,Be.load())}}}function getTilePriority(Oe,e,Te,ke,Be){if(!Oe||!(Te in Oe.wantedTiles)||!Oe.wantedTiles[Te][e.getKey()])return DROP;const Ue=Oe.viewState.center,He=ke[0]-Ue[0],We=ke[1]-Ue[1];return 65536*Math.log(Be)+Math.sqrt(He*He+We*We)/Be}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const Te=e.className!==void 0?e.className:"ol-attribution",ke=e.tipLabel!==void 0?e.tipLabel:"Attributions",Be=e.expandClassName!==void 0?e.expandClassName:Te+"-expand",Ue=e.collapseLabel!==void 0?e.collapseLabel:"›",He=e.collapseClassName!==void 0?e.collapseClassName:Te+"-collapse";typeof Ue=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Ue,this.collapseLabel_.className=He):this.collapseLabel_=Ue;const We=e.label!==void 0?e.label:"i";typeof We=="string"?(this.label_=document.createElement("span"),this.label_.textContent=We,this.label_.className=Be):this.label_=We;const Cn=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=ke,this.toggleButton_.appendChild(Cn),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const En=Te+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),An=this.element;An.className=En,An.appendChild(this.toggleButton_),An.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const Te=this.getMap().getAllLayers(),ke=new Set(Te.flatMap(Be=>Be.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(Be=>ke.add(Be)):ke.add(this.attributions_)),!this.overrideCollapsible_){const Be=!Te.some(Ue=>{var He;return((He=Ue.getSource())==null?void 0:He.getAttributionsCollapsible())===!1});this.setCollapsible(Be)}return Array.from(ke)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const Te=await Promise.all(this.collectSourceAttributions_(e).map(Be=>toPromise(()=>Be))),ke=Te.length>0;if(this.renderedVisible_!=ke&&(this.element.style.display=ke?"":"none",this.renderedVisible_=ke),!equals$2(Te,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let Be=0,Ue=Te.length;Be<Ue;++Be){const He=document.createElement("li");He.innerHTML=Te[Be],this.ulElement_.appendChild(He)}this.renderedAttributions_=Te}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const Te=e.className!==void 0?e.className:"ol-rotate",ke=e.label!==void 0?e.label:"⇧",Be=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof ke=="string"?(this.label_=document.createElement("span"),this.label_.className=Be,this.label_.textContent=ke):(this.label_=ke,this.label_.classList.add(Be));const Ue=e.tipLabel?e.tipLabel:"Reset rotation",He=document.createElement("button");He.className=Te+"-reset",He.setAttribute("type","button"),He.title=Ue,He.appendChild(this.label_),He.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const We=Te+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,Cn=this.element;Cn.className=We,Cn.appendChild(He),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const Te=this.getMap().getView();if(!Te)return;const ke=Te.getRotation();ke!==void 0&&(this.duration_>0&&ke%(2*Math.PI)!==0?Te.animate({rotation:0,duration:this.duration_,easing:easeOut}):Te.setRotation(0))}render(e){const Te=e.frameState;if(!Te)return;const ke=Te.viewState.rotation;if(ke!=this.rotation_){const Be="rotate("+ke+"rad)";if(this.autoHide_){const Ue=this.element.classList.contains(CLASS_HIDDEN);!Ue&&ke===0?this.element.classList.add(CLASS_HIDDEN):Ue&&ke!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=Be}this.rotation_=ke}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const Te=e.className!==void 0?e.className:"ol-zoom",ke=e.delta!==void 0?e.delta:1,Be=e.zoomInClassName!==void 0?e.zoomInClassName:Te+"-in",Ue=e.zoomOutClassName!==void 0?e.zoomOutClassName:Te+"-out",He=e.zoomInLabel!==void 0?e.zoomInLabel:"+",We=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",Cn=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",En=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",An=document.createElement("button");An.className=Be,An.setAttribute("type","button"),An.title=Cn,An.appendChild(typeof He=="string"?document.createTextNode(He):He),An.addEventListener(EventType.CLICK,this.handleClick_.bind(this,ke),!1);const Sn=document.createElement("button");Sn.className=Ue,Sn.setAttribute("type","button"),Sn.title=En,Sn.appendChild(typeof We=="string"?document.createTextNode(We):We),Sn.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-ke),!1);const Tn=Te+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,Ln=this.element;Ln.className=Tn,Ln.appendChild(An),Ln.appendChild(Sn),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,Te){Te.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const ke=this.getMap().getView();if(!ke)return;const Be=ke.getZoom();if(Be!==void 0){const Ue=ke.getConstrainedZoom(Be+e);this.duration_>0?(ke.getAnimating()&&ke.cancelAnimations(),ke.animate({zoom:Ue,duration:this.duration_,easing:easeOut})):ke.setZoom(Ue)}}}function defaults$1(Oe){Oe=Oe||{};const e=new Collection;return(Oe.zoom!==void 0?Oe.zoom:!0)&&e.push(new Zoom(Oe.zoomOptions)),(Oe.rotate!==void 0?Oe.rotate:!0)&&e.push(new Rotate(Oe.rotateOptions)),(Oe.attribution!==void 0?Oe.attribution:!0)&&e.push(new Attribution(Oe.attributionOptions)),e}class GroupEvent extends BaseEvent{constructor(e,Te){super(e),this.layer=Te}}const Property={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const Te=Object.assign({},e);delete Te.layers;let ke=e.layers;super(Te),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property.LAYERS,this.handleLayersChanged_),ke?Array.isArray(ke)?ke=new Collection(ke.slice(),{unique:!0}):assert(typeof ke.getArray=="function","Expected `layers` to be an array or a `Collection`"):ke=new Collection(void 0,{unique:!0}),this.setLayers(ke)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const ke in this.listenerKeys_)this.listenerKeys_[ke].forEach(unlistenByKey);clear$1(this.listenerKeys_);const Te=e.getArray();for(let ke=0,Be=Te.length;ke<Be;ke++){const Ue=Te[ke];this.registerLayerListeners_(Ue),this.dispatchEvent(new GroupEvent("addlayer",Ue))}this.changed()}registerLayerListeners_(e){const Te=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&Te.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=Te}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const Te=e.element;this.registerLayerListeners_(Te),this.dispatchEvent(new GroupEvent("addlayer",Te)),this.changed()}handleLayersRemove_(e){const Te=e.element,ke=getUid(Te);this.listenerKeys_[ke].forEach(unlistenByKey),delete this.listenerKeys_[ke],this.dispatchEvent(new GroupEvent("removelayer",Te)),this.changed()}getLayers(){return this.get(Property.LAYERS)}setLayers(e){const Te=this.getLayers();if(Te){const ke=Te.getArray();for(let Be=0,Ue=ke.length;Be<Ue;++Be)this.dispatchEvent(new GroupEvent("removelayer",ke[Be]))}this.set(Property.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(Te){Te.getLayersArray(e)}),e}getLayerStatesArray(e){const Te=e!==void 0?e:[],ke=Te.length;this.getLayers().forEach(function(He){He.getLayerStatesArray(Te)});const Be=this.getLayerState();let Ue=Be.zIndex;!e&&Be.zIndex===void 0&&(Ue=0);for(let He=ke,We=Te.length;He<We;He++){const Cn=Te[He];Cn.opacity*=Be.opacity,Cn.visible=Cn.visible&&Be.visible,Cn.maxResolution=Math.min(Cn.maxResolution,Be.maxResolution),Cn.minResolution=Math.max(Cn.minResolution,Be.minResolution),Cn.minZoom=Math.max(Cn.minZoom,Be.minZoom),Cn.maxZoom=Math.min(Cn.maxZoom,Be.maxZoom),Be.extent!==void 0&&(Cn.extent!==void 0?Cn.extent=getIntersection(Cn.extent,Be.extent):Cn.extent=Be.extent),Cn.zIndex===void 0&&(Cn.zIndex=Ue)}return Te}getSourceState(){return"ready"}}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,Te){abstract()}calculateMatrices2D(e){const Te=e.viewState,ke=e.coordinateToPixelTransform,Be=e.pixelToCoordinateTransform;compose(ke,e.size[0]/2,e.size[1]/2,1/Te.resolution,-1/Te.resolution,-Te.rotation,-Te.center[0],-Te.center[1]),makeInverse(Be,ke)}forEachFeatureAtCoordinate(e,Te,ke,Be,Ue,He,We,Cn){let En;const An=Te.viewState;function Sn(ai,li,Pi,pi){return Ue.call(He,li,ai?Pi:null,pi)}const Tn=An.projection,Ln=wrapX$1(e.slice(),Tn),Bn=[[0,0]];if(Tn.canWrapX()&&Be){const ai=Tn.getExtent(),li=getWidth(ai);Bn.push([-li,0],[li,0])}const ei=Te.layerStatesArray,ti=ei.length,ni=[],ri=[];for(let ai=0;ai<Bn.length;ai++)for(let li=ti-1;li>=0;--li){const Pi=ei[li],pi=Pi.layer;if(pi.hasRenderer()&&inView(Pi,An)&&We.call(Cn,pi)){const vi=pi.getRenderer(),Ri=pi.getSource();if(vi&&Ri){const Fi=Ri.getWrapX()?Ln:e,di=Sn.bind(null,Pi.managed);ri[0]=Fi[0]+Bn[ai][0],ri[1]=Fi[1]+Bn[ai][1],En=vi.forEachFeatureAtCoordinate(ri,Te,ke,di,ni)}if(En)return En}}if(ni.length===0)return;const si=1/ni.length;return ni.forEach((ai,li)=>ai.distanceSq+=li*si),ni.sort((ai,li)=>ai.distanceSq-li.distanceSq),ni.some(ai=>En=ai.callback(ai.feature,ai.layer,ai.geometry)),En}hasFeatureAtCoordinate(e,Te,ke,Be,Ue,He){return this.forEachFeatureAtCoordinate(e,Te,ke,Be,TRUE,this,Ue,He)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(Oe,e){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const Te=this.element_.style;Te.position="absolute",Te.width="100%",Te.height="100%",Te.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const ke=e.getViewport();ke.insertBefore(this.element_,ke.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,Te){const ke=this.getMap();if(ke.hasListener(e)){const Be=new RenderEvent(e,void 0,Te);ke.dispatchEvent(Be)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const Te=e.layerStatesArray.sort((We,Cn)=>We.zIndex-Cn.zIndex);Te.some(We=>We.layer instanceof BaseVectorLayer&&We.layer.getDeclutter())&&(e.declutter={});const Be=e.viewState;this.children_.length=0;const Ue=[];let He=null;for(let We=0,Cn=Te.length;We<Cn;++We){const En=Te[We];e.layerIndex=We;const An=En.layer,Sn=An.getSourceState();if(!inView(En,Be)||Sn!="ready"&&Sn!="undefined"){An.unrender();continue}const Tn=An.render(e,He);Tn&&(Tn!==He&&(this.children_.push(Tn),He=Tn),Ue.push(En))}this.declutter(e,Ue),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,Te){if(e.declutter){for(let ke=Te.length-1;ke>=0;--ke){const Be=Te[ke],Ue=Be.layer;Ue.getDeclutter()&&Ue.renderDeclutter(e,Be)}Te.forEach(ke=>ke.layer.renderDeferred(e))}}}function removeLayerMapProperty(Oe){if(Oe instanceof Layer$1){Oe.setMapInternal(null);return}Oe instanceof LayerGroup&&Oe.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(Oe,e){if(Oe instanceof Layer$1){Oe.setMapInternal(e);return}if(Oe instanceof LayerGroup){const Te=Oe.getLayers().getArray();for(let ke=0,Be=Te.length;ke<Be;++ke)setLayerMapProperty(Te[ke],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const Te=createOptionsInternal(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create(),this.pixelToCoordinateTransform_=create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=Te.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=Te.controls||defaults$1(),this.interactions=Te.interactions||defaults$2({onFocusOnly:!0}),this.overlays_=Te.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(Te.values);const ke=this;e.view&&!(e.view instanceof View)&&e.view.then(function(Be){ke.setView(new View(Be))}),this.controls.addEventListener(CollectionEventType.ADD,Be=>{Be.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,Be=>{Be.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,Be=>{Be.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,Be=>{Be.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,Be=>{this.addOverlayInternal_(Be.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,Be=>{const Ue=Be.element.getId();Ue!==void 0&&delete this.overlayIdIndex_[Ue.toString()],Be.element.setMap(null)}),this.controls.forEach(Be=>{Be.setMap(this)}),this.interactions.forEach(Be=>{Be.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const Te=e.getId();Te!==void 0&&(this.overlayIdIndex_[Te.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,Te,ke){if(!this.frameState_||!this.renderer_)return;const Be=this.getCoordinateFromPixelInternal(e);ke=ke!==void 0?ke:{};const Ue=ke.hitTolerance!==void 0?ke.hitTolerance:0,He=ke.layerFilter!==void 0?ke.layerFilter:TRUE,We=ke.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(Be,this.frameState_,Ue,We,Te,null,He,null)}getFeaturesAtPixel(e,Te){const ke=[];return this.forEachFeatureAtPixel(e,function(Be){ke.push(Be)},Te),ke}getAllLayers(){const e=[];function Te(ke){ke.forEach(function(Be){Be instanceof LayerGroup?Te(Be.getLayers()):e.push(Be)})}return Te(this.getLayers()),e}hasFeatureAtPixel(e,Te){if(!this.frameState_||!this.renderer_)return!1;const ke=this.getCoordinateFromPixelInternal(e);Te=Te!==void 0?Te:{};const Be=Te.layerFilter!==void 0?Te.layerFilter:TRUE,Ue=Te.hitTolerance!==void 0?Te.hitTolerance:0,He=Te.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(ke,this.frameState_,Ue,He,Be,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const ke=this.viewport_.getBoundingClientRect(),Be=this.getSize(),Ue=ke.width/Be[0],He=ke.height/Be[1],We="changedTouches"in e?e.changedTouches[0]:e;return[(We.clientX-ke.left)/Ue,(We.clientY-ke.top)/He]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const Te=this.frameState_;return Te?apply(Te.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const Te=this.overlayIdIndex_[e.toString()];return Te!==void 0?Te:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const Te=this.getLayerGroup();if(e instanceof Collection){Te.setLayers(e);return}const ke=Te.getLayers();ke.clear(),ke.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let Te=0,ke=e.length;Te<ke;++Te){const Be=e[Te];if(!Be.visible)continue;const Ue=Be.layer.getRenderer();if(Ue&&!Ue.ready)return!0;const He=Be.layer.getSource();if(He&&He.loading)return!0}return!1}getPixelFromCoordinate(e){const Te=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(Te)}getPixelFromCoordinateInternal(e){const Te=this.frameState_;return Te?apply(Te.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,Te,ke,Be){return getTilePriority(this.frameState_,e,Te,ke,Be)}handleBrowserEvent(e,Te){Te=Te||e.type;const ke=new MapBrowserEvent(Te,this,e);this.handleMapBrowserEvent(ke)}handleMapBrowserEvent(e){if(!this.frameState_)return;const Te=e.originalEvent,ke=Te.type;if(ke===PointerEventType.POINTERDOWN||ke===EventType.WHEEL||ke===EventType.KEYDOWN){const Be=this.getOwnerDocument(),Ue=this.viewport_.getRootNode?this.viewport_.getRootNode():Be,He=Te.target,We=Ue instanceof ShadowRoot?Ue.host===He?Ue.host.ownerDocument:Ue:Ue===Be?Be.documentElement:Ue;if(this.overlayContainerStopEvent_.contains(He)||!We.contains(He))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const Be=this.getInteractions().getArray().slice();for(let Ue=Be.length-1;Ue>=0;Ue--){const He=Be[Ue];if(He.getMap()!==this||!He.getActive()||!this.getTargetElement())continue;if(!He.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,Te=this.tileQueue_;if(!Te.isEmpty()){let Be=this.maxTilesLoading_,Ue=Be;if(e){const He=e.viewHints;if(He[ViewHint.ANIMATING]||He[ViewHint.INTERACTING]){const We=Date.now()-e.time>8;Be=We?0:8,Ue=We?0:2}}Te.getTilesLoading()<Be&&(Te.reprioritize(),Te.loadMoreTiles(Be,Ue))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const ke=this.postRenderFunctions_;if(e)for(let Be=0,Ue=ke.length;Be<Ue;++Be)ke[Be](this,e);ke.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let ke=0,Be=this.targetChangeHandlerKeys_.length;ke<Be;++ke)unlistenByKey(this.targetChangeHandlerKeys_[ke]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const ke=this.targetElement_.getRootNode();ke instanceof ShadowRoot&&this.resizeObserver_.unobserve(ke.host),this.setSize(void 0)}const e=this.getTarget(),Te=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=Te,!Te)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{Te.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const Ue in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[Ue],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);let ke;if(this.keyboardEventTarget_)ke=this.keyboardEventTarget_;else{const Ue=Te.getRootNode();ke=Ue instanceof ShadowRoot?Ue.host:Te}this.targetChangeHandlerKeys_=[listen(ke,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(ke,EventType.KEYPRESS,this.handleBrowserEvent,this)];const Be=Te.getRootNode();Be instanceof ShadowRoot&&this.resizeObserver_.observe(Be.host),this.resizeObserver_.observe(Te)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let Te=0,ke=e.length;Te<ke;++Te){const Be=e[Te].layer;Be.hasRenderer()&&Be.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const Te=this.getSize(),ke=this.getView(),Be=this.frameState_;let Ue=null;if(Te!==void 0&&hasArea(Te)&&ke&&ke.isDef()){const He=ke.getHints(this.frameState_?this.frameState_.viewHints:void 0),We=ke.getState();if(Ue={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:getForViewAndSize(We.center,We.resolution,We.rotation,Te),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:Te,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:We,viewHints:He,wantedTiles:{},mapId:getUid(this),renderTargets:{}},We.nextCenter&&We.nextResolution){const Cn=isNaN(We.nextRotation)?We.rotation:We.nextRotation;Ue.nextExtent=getForViewAndSize(We.nextCenter,We.nextResolution,Cn,Te)}}this.frameState_=Ue,this.renderer_.renderFrame(Ue),Ue&&(Ue.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Ue.postRenderFunctions),Be&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(Ue.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,Be)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!Ue.viewHints[ViewHint.ANIMATING]&&!Ue.viewHints[ViewHint.INTERACTING]&&!equals$1(Ue.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,Ue)),clone$1(Ue.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,Ue)),this.renderComplete_=(this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const Te=this.getLayerGroup();Te&&this.handleLayerRemove_(new GroupEvent("removelayer",Te)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const Te=this;e.then(function(ke){Te.setView(new View(ke))})}updateSize(){const e=this.getTargetElement();let Te;if(e){const Be=getComputedStyle(e),Ue=e.offsetWidth-parseFloat(Be.borderLeftWidth)-parseFloat(Be.paddingLeft)-parseFloat(Be.paddingRight)-parseFloat(Be.borderRightWidth),He=e.offsetHeight-parseFloat(Be.borderTopWidth)-parseFloat(Be.paddingTop)-parseFloat(Be.paddingBottom)-parseFloat(Be.borderBottomWidth);!isNaN(Ue)&&!isNaN(He)&&(Te=[Math.max(0,Ue),Math.max(0,He)],!hasArea(Te)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const ke=this.getSize();Te&&(!ke||!equals$2(Te,ke))&&(this.setSize(Te),this.updateViewportSize_(Te))}updateViewportSize_(e){const Te=this.getView();Te&&Te.setViewportSize(e)}};function createOptionsInternal(Oe){let e=null;Oe.keyboardEventTarget!==void 0&&(e=typeof Oe.keyboardEventTarget=="string"?document.getElementById(Oe.keyboardEventTarget):Oe.keyboardEventTarget);const Te={},ke=Oe.layers&&typeof Oe.layers.getLayers=="function"?Oe.layers:new LayerGroup({layers:Oe.layers});Te[MapProperty.LAYERGROUP]=ke,Te[MapProperty.TARGET]=Oe.target,Te[MapProperty.VIEW]=Oe.view instanceof View?Oe.view:new View;let Be;Oe.controls!==void 0&&(Array.isArray(Oe.controls)?Be=new Collection(Oe.controls.slice()):(assert(typeof Oe.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),Be=Oe.controls));let Ue;Oe.interactions!==void 0&&(Array.isArray(Oe.interactions)?Ue=new Collection(Oe.interactions.slice()):(assert(typeof Oe.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),Ue=Oe.interactions));let He;return Oe.overlays!==void 0?Array.isArray(Oe.overlays)?He=new Collection(Oe.overlays.slice()):(assert(typeof Oe.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),He=Oe.overlays):He=new Collection,{controls:Be,interactions:Ue,keyboardEventTarget:e,overlays:He,values:Te}}const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(Oe){const e="mapbox://";return Oe.indexOf(e)!==0?"":Oe.slice(e.length)}function normalizeSpriteUrl(Oe,e,Te){const ke=getMapboxPath(Oe);if(!ke)return decodeURI(new URL(Oe,Te).href);const Be="sprites/";if(ke.indexOf(Be)!==0)throw new Error(`unexpected sprites url: ${Oe}`);const Ue=ke.slice(Be.length);return`${mapboxBaseUrl}/styles/v1/${Ue}/sprite?access_token=${e}`}function normalizeStyleUrl(Oe,e){const Te=getMapboxPath(Oe);if(!Te)return decodeURI(new URL(Oe,location.href).href);const ke="styles/";if(Te.indexOf(ke)!==0)throw new Error(`unexpected style url: ${Oe}`);const Be=Te.slice(ke.length);return`${mapboxBaseUrl}/styles/v1/${Be}?&access_token=${e}`}const mapboxSubdomains=["a","b","c","d"];function normalizeSourceUrl(Oe,e,Te,ke){const Be=new URL(Oe,ke||location.href),Ue=getMapboxPath(Oe);if(!Ue)return e?(Be.searchParams.has(Te)||Be.searchParams.set(Te,e),[decodeURI(Be.href)]):[decodeURI(Be.href)];if(Ue==="mapbox.satellite"){const He=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${Ue}/{z}/{x}/{y}${He}.webp?access_token=${e}`]}return mapboxSubdomains.map(He=>`https://${He}.tiles.mapbox.com/v4/${Ue}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(Oe){return Oe.id||(Oe.id=styleId++),Oe.id}function getStyleFunctionKey(Oe,e){return getStyleId(Oe)+"."+getUid(e)}function getFunctionCache(Oe){let e=functionCacheByStyleId[Oe.id];return e||(e={},functionCacheByStyleId[getStyleId(Oe)]=e),e}function getFilterCache(Oe){let e=filterCacheByStyleId[Oe.id];return e||(e={},filterCacheByStyleId[getStyleId(Oe)]=e),e}function deg2rad(Oe){return Oe*Math.PI/180}const defaultResolutions=function(){const Oe=[];for(let e=78271.51696402048;Oe.length<=24;e/=2)Oe.push(e);return Oe}();function createCanvas(Oe,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(Oe,e);const Te=document.createElement("canvas");return Te.width=Oe,Te.height=e,Te}function getZoomForResolution(Oe,e){let Te=0;const ke=e.length;for(;Te<ke;++Te)if(e[Te]<Oe&&Te+1<ke){const Ue=e[Te]/e[Te+1];return Te+Math.log(e[Te]/Oe)/Math.log(Ue)}return ke-1}function getResolutionForZoom(Oe,e){const Te=Math.floor(Oe),ke=Math.pow(2,Oe-Te);return e[Te]/ke}const pendingRequests={};function fetchResource(Oe,e,Te={},ke){if(e in pendingRequests)return ke&&(ke.url=pendingRequests[e][0].url),pendingRequests[e][1];const Be=Te.transformRequest&&Te.transformRequest(e,Oe)||e,Ue=function(Cn){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))},He=function(Cn){return delete pendingRequests[e],Cn.ok?Cn.json():Promise.reject(new Error("Error fetching source "+e))},We=toPromise(()=>Be).then(Cn=>Cn instanceof Response?(ke&&(ke.url=Cn.url),He(Cn)):(Cn instanceof Request||(Cn=new Request(Cn)),Cn.headers.get("Accept")||Cn.headers.set("Accept","application/json"),ke&&(ke.url=Cn.url),fetch(Cn).then(He).catch(Ue))).catch(Ue);return pendingRequests[e]=[Be,We],We}function getGlStyle(Oe,e){if(typeof Oe=="string")if(Oe.trim().startsWith("{"))try{const Te=JSON.parse(Oe);return Promise.resolve(Te)}catch(Te){return Promise.reject(Te)}else return Oe=normalizeStyleUrl(Oe,e.accessToken),fetchResource("Style",Oe,e);else return Promise.resolve(Oe)}const tilejsonCache={};function getTileJson(Oe,e,Te={}){const ke=[e,JSON.stringify(Oe)].toString();let Be=tilejsonCache[ke];if(!Be||Te.transformRequest){let Ue;Te.transformRequest&&(Ue=(We,Cn)=>{const En=Te.transformRequest&&Te.transformRequest(Cn,"Tiles")||Cn;if(We instanceof VectorTile$1)We.setLoader((An,Sn,Tn)=>{const Ln=function(Bn){Bn.arrayBuffer().then(ei=>{const ni=We.getFormat().readFeatures(ei,{extent:An,featureProjection:Tn});We.setFeatures(ni)})};toPromise(()=>En).then(Bn=>{if(Bn instanceof Response)return Ln(Bn);fetch(Bn).then(Ln).catch(ei=>We.setState(TileState.ERROR))}).catch(Bn=>We.setState(TileState.ERROR))});else{const An=We.getImage();toPromise(()=>En).then(Sn=>{if(typeof Sn=="string"){An.src=Sn;return}const Tn=Ln=>Ln.blob().then(Bn=>{const ei=URL.createObjectURL(Bn);An.addEventListener("load",()=>URL.revokeObjectURL(ei)),An.addEventListener("error",()=>URL.revokeObjectURL(ei)),An.src=ei});if(Sn instanceof Response)return Tn(Sn);fetch(Sn).then(Tn).catch(Ln=>We.setState(TileState.ERROR))}).catch(Sn=>We.setState(TileState.ERROR))}});const He=Oe.url;if(He&&!Oe.tiles){const We=normalizeSourceUrl(He,Te.accessToken,Te.accessTokenParam||"access_token",e||location.href);if(He.startsWith("mapbox://"))Be=Promise.resolve({tileJson:Object.assign({},Oe,{url:void 0,tiles:We}),tileLoadFunction:Ue});else{const Cn={};Be=fetchResource("Source",We[0],Te,Cn).then(function(En){return En.tiles=En.tiles.map(function(An){return En.scheme==="tms"&&(An=An.replace("{y}","{-y}")),normalizeSourceUrl(An,Te.accessToken,Te.accessTokenParam||"access_token",Cn.url)[0]}),Promise.resolve({tileJson:En,tileLoadFunction:Ue})})}}else Oe=Object.assign({},Oe,{tiles:Oe.tiles.map(function(We){return Oe.scheme==="tms"&&(We=We.replace("{y}","{-y}")),normalizeSourceUrl(We,Te.accessToken,Te.accessTokenParam||"access_token",e||location.href)[0]})}),Be=Promise.resolve({tileJson:Object.assign({},Oe),tileLoadFunction:Ue});tilejsonCache[ke]=Be}return Be}function drawIconHalo(Oe,e,Te,ke){const Be=[2*Te*e.pixelRatio+e.width,2*Te*e.pixelRatio+e.height],Ue=createCanvas(Be[0],Be[1]),He=Ue.getContext("2d");He.drawImage(Oe,e.x,e.y,e.width,e.height,Te*e.pixelRatio,Te*e.pixelRatio,e.width,e.height);const We=He.getImageData(0,0,Be[0],Be[1]);He.globalCompositeOperation="destination-over",He.fillStyle=`rgba(${ke.r*255},${ke.g*255},${ke.b*255},${ke.a})`;const Cn=We.data;for(let En=0,An=We.width;En<An;++En)for(let Sn=0,Tn=We.height;Sn<Tn;++Sn){const Ln=(Sn*An+En)*4;Cn[Ln+3]>0&&He.arc(En,Sn,Te*e.pixelRatio,0,2*Math.PI)}return He.fill(),Ue}function smoothstep(Oe,e,Te){const ke=Math.max(0,Math.min(1,(Te-Oe)/(e-Oe)));return ke*ke*(3-2*ke)}function drawSDF(Oe,e,Te){const ke=createCanvas(e.width,e.height),Be=ke.getContext("2d");Be.drawImage(Oe,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const Ue=Be.getImageData(0,0,e.width,e.height),He=Ue.data;for(let We=0,Cn=Ue.width;We<Cn;++We)for(let En=0,An=Ue.height;En<An;++En){const Sn=(En*Cn+We)*4,Tn=He[Sn+3]/255,Ln=.75,Bn=.1,ei=smoothstep(Ln-Bn,Ln+Bn,Tn);ei>0?(He[Sn+0]=Math.round(255*Te.r*ei),He[Sn+1]=Math.round(255*Te.g*ei),He[Sn+2]=Math.round(255*Te.b*ei),He[Sn+3]=Math.round(255*ei)):He[Sn+3]=0}return Be.putImageData(Ue,0,0),ke}const hairSpacePool=Array(256).join(" ");function applyLetterSpacing(Oe,e){if(e>=.05){let Te="";const ke=Oe.split(`
`),Be=hairSpacePool.slice(0,Math.round(e/.1));for(let Ue=0,He=ke.length;Ue<He;++Ue)Ue>0&&(Te+=`
`),Te+=ke[Ue].split("").join(Be);return Te}return Oe}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(Oe,e){return getMeasureContext().measureText(Oe).width+(Oe.length-1)*e}const measureCache={};function wrapText(Oe,e,Te,ke){if(Oe.indexOf(`
`)!==-1){const He=Oe.split(`
`),We=[];for(let Cn=0,En=He.length;Cn<En;++Cn)We.push(wrapText(He[Cn],e,Te,ke));return We.join(`
`)}const Be=Te+","+e+","+Oe+","+ke;let Ue=measureCache[Be];if(!Ue){const He=Oe.split(" ");if(He.length>1){const We=getMeasureContext();We.font=e;const En=We.measureText("M").width*Te;let An="";const Sn=[];for(let Tn=0,Ln=He.length;Tn<Ln;++Tn){const Bn=He[Tn],ei=An+(An?" ":"")+Bn;measureText(ei,ke)<=En?An=ei:(An&&Sn.push(An),An=Bn)}An&&Sn.push(An);for(let Tn=0,Ln=Sn.length;Tn<Ln&&Ln>1;++Tn){const Bn=Sn[Tn];if(measureText(Bn,ke)<En*.35){const ei=Tn>0?measureText(Sn[Tn-1],ke):1/0,ti=Tn<Ln-1?measureText(Sn[Tn+1],ke):1/0;Sn.splice(Tn,1),Ln-=1,ei<ti?(Sn[Tn-1]+=" "+Bn,Tn-=1):Sn[Tn]=Bn+" "+Sn[Tn]}}for(let Tn=0,Ln=Sn.length-1;Tn<Ln;++Tn){const Bn=Sn[Tn],ei=Sn[Tn+1];if(measureText(Bn,ke)>En*.7&&measureText(ei,ke)<En*.6){const ti=Bn.split(" "),ni=ti.pop();measureText(ni,ke)<En*.2&&(Sn[Tn]=ti.join(" "),Sn[Tn+1]=ni+" "+ei),Ln-=1}}Ue=Sn.join(`
`)}else Ue=Oe;Ue=applyLetterSpacing(Ue,ke),measureCache[Be]=Ue}return Ue}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(Oe){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let Te=0,ke=e.length;Te<ke;++Te){const Be=e[Te];try{const Ue=Be.rules||Be.cssRules;if(Ue)for(let He=0,We=Ue.length;He<We;++He){const Cn=Ue[He];if(Cn.type==5){const En=Cn.cssText.match(fontFamilyRegEx);loadedFontFamilies[En[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return Oe in loadedFontFamilies}const processedFontFamilies={};function getFonts(Oe,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const Te=Oe.toString();if(Te in processedFontFamilies)return processedFontFamilies[Te];const ke=[];for(let Be=0,Ue=Oe.length;Be<Ue;++Be){Oe[Be]=Oe[Be].replace("Arial Unicode MS","Arial");const He=Oe[Be],We=mb2css(He,1);registerFont(We);const Cn=We.split(" ");ke.push([Cn.slice(3).join(" ").replace(/"/g,""),Cn[1],Cn[0]])}for(let Be=0,Ue=ke.length;Be<Ue;++Be){const He=ke[Be],We=He[0];if(!hasFontFamily(We)&&checkedFonts.get(`${He[2]}
${He[1]} 
${We}`)!==100){const Cn=e.replace("{font-family}",We.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",We.replace(/ /g,"+")).replace("{fontweight}",He[1]).replace("{-fontstyle}",He[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",He[2]);if(!document.querySelector('link[href="'+Cn+'"]')){const En=document.createElement("link");En.href=Cn,En.rel="stylesheet",document.head.appendChild(En)}}}return processedFontFamilies[Te]=Oe,Oe}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(Oe,e){const Te=createPropertyExpression(Oe,e);if(Te.result==="error")throw new Error(Te.value.map(ke=>`${ke.key}: ${ke.message}`).join(", "));return Te.value},emptyObj={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(Oe,e,Te,ke,Be,Ue,He){const We=Oe.id;Ue||(Ue={},console.warn("No functionCache provided to getValue()")),Ue[We]||(Ue[We]={});const Cn=Ue[We];if(!Cn[Te]){let En=(Oe[e]||emptyObj)[Te];const An=v8[`${e}_${Oe.type}`][Te];En===void 0&&(En=An.default);let Sn=isExpression(En);if(!Sn&&isFunction$1(En)&&(En=convertFunction(En,An),Sn=!0),Sn){const Tn=expressionData(En,An);Cn[Te]=Tn.evaluate.bind(Tn)}else An.type=="color"&&(En=Color.parse(En)),Cn[Te]=function(){return En}}return zoomObj.zoom=ke,Cn[Te](zoomObj,Be,He)}function getDeclutterMode(Oe,e,Te,ke,Be){return getValue(Oe,"layout",`${ke}-allow-overlap`,e,Te,Be)?getValue(Oe,"layout",`${ke}-ignore-placement`,e,Te,Be)?"none":"obstacle":"declutter"}function evaluateFilter(Oe,e,Te,ke,Be){return Be||console.warn("No filterCache provided to evaluateFilter()"),Oe in Be||(Be[Oe]=featureFilter(e).filter),zoomObj.zoom=ke,Be[Oe](zoomObj,Te)}function colorWithOpacity(Oe,e){if(Oe){if(Oe.a===0||e===0)return;const Te=Oe.a;return e=e===void 0?1:e,Te===0?"transparent":"rgba("+Math.round(Oe.r*255/Te)+","+Math.round(Oe.g*255/Te)+","+Math.round(Oe.b*255/Te)+","+Te*e+")"}return Oe}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(Oe,e){return Oe.replace(templateRegEx,function(Te){return e[Te.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(Oe,e,Te,ke=defaultResolutions,Be=void 0,Ue=void 0,He=void 0,We=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,Oe)]=Array.from(arguments);let Cn,En,An;Ue&&toPromise(()=>Ue).then(async pi=>{let vi;if(typeof Image<"u"){const Ri=new Image;if(typeof pi=="string")Ri.crossOrigin="anonymous",Ri.src=pi;else{let Fi;pi instanceof Request?Fi=await fetch(pi):pi instanceof Response&&(Fi=pi);const di=await Fi.blob();vi=URL.createObjectURL(di),Ri.src=vi}Ri.addEventListener("load",function Fi(){Ri.removeEventListener("load",Fi),Cn=Ri,En=[Ri.width,Ri.height],Oe.changed(),vi&&URL.revokeObjectURL(vi)}),Ri.addEventListener("error",function Fi(){URL.revokeObjectURL(vi),Ri.removeEventListener("error",Fi)})}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const Ri=self;Ri.postMessage({action:"loadImage",src:pi}),Ri.addEventListener("message",function(di){di.data.action==="imageLoaded"&&di.data.src===pi&&(Cn=di.data.image,En=[Cn.width,Cn.height])})}});const Sn=derefLayers(e.layers),Tn={},Ln=[],Bn={},ei={},ti=getFunctionCache(e),ni=getFilterCache(e);let ri;for(let pi=0,vi=Sn.length;pi<vi;++pi){const Ri=Sn[pi],Fi=Ri.id;if(typeof Te=="string"&&Ri.source==Te||Array.isArray(Te)&&Te.indexOf(Fi)!==-1){const di=Ri["source-layer"];if(ri){if(Ri.source!==ri)throw new Error(`Layer "${Fi}" does not use source "${ri}`)}else{ri=Ri.source;const Mi=e.sources[ri];if(!Mi)throw new Error(`Source "${ri}" is not defined`);const Oi=Mi.type;if(Oi!=="vector"&&Oi!=="geojson")throw new Error(`Source "${ri}" is not of type "vector" or "geojson", but "${Oi}"`)}let ci=Tn[di];ci||(ci=[],Tn[di]=ci),ci.push({layer:Ri,index:pi}),Ln.push(Fi)}}const si=new Stroke,ai=new Fill,li=[],Pi=function(pi,vi,Ri){const Fi=pi.getProperties(),di=Tn[Fi.layer];if(!di)return;let ci=ke.indexOf(vi);ci==-1&&(ci=getZoomForResolution(vi,ke));const Mi=types[pi.getGeometry().getType()],Oi={id:pi.getId(),properties:Fi,type:Mi},Hi=Oe.get("mapbox-featurestate")[pi.getId()];let Ki=-1;for(let or=0,sr=di.length;or<sr;++or){const Cr=di[or],pr=Cr.layer,wr=pr.id;if(Ri!==void 0&&Ri!==wr)continue;const Li=pr.layout||emptyObj,er=pr.paint||emptyObj;if(Li.visibility==="none"||"minzoom"in pr&&ci<pr.minzoom||"maxzoom"in pr&&ci>=pr.maxzoom)continue;const hr=pr.filter;if(!hr||evaluateFilter(wr,hr,Oi,ci,ni)){let mr,_r,dr,cr,gr,vr;const Fr=Cr.index;if(Mi==3&&(pr.type=="fill"||pr.type=="fill-extrusion"))if(_r=getValue(pr,"paint",pr.type+"-opacity",ci,Oi,ti,Hi),pr.type+"-pattern"in er){const Sr=getValue(pr,"paint",pr.type+"-pattern",ci,Oi,ti,Hi);if(Sr){const br=typeof Sr=="string"?fromTemplate(Sr,Fi):Sr.toString();if(Cn&&Be&&Be[br]){++Ki,vr=li[Ki],(!vr||!vr.getFill()||vr.getStroke()||vr.getText())&&(vr=new Style$1({fill:new Fill}),li[Ki]=vr),dr=vr.getFill(),vr.setZIndex(Fr);const Br=br+"."+_r;let Hr=ei[Br];if(!Hr){const qr=Be[br],Xr=createCanvas(qr.width,qr.height),cs=Xr.getContext("2d");cs.globalAlpha=_r,cs.drawImage(Cn,qr.x,qr.y,qr.width,qr.height,0,0,qr.width,qr.height),Hr=cs.createPattern(Xr,"repeat"),ei[Br]=Hr}dr.setColor(Hr)}}}else mr=colorWithOpacity(getValue(pr,"paint",pr.type+"-color",ci,Oi,ti,Hi),_r),pr.type+"-outline-color"in er&&(gr=colorWithOpacity(getValue(pr,"paint",pr.type+"-outline-color",ci,Oi,ti,Hi),_r)),gr||(gr=mr),(mr||gr)&&(++Ki,vr=li[Ki],(!vr||mr&&!vr.getFill()||!mr&&vr.getFill()||gr&&!vr.getStroke()||!gr&&vr.getStroke()||vr.getText())&&(vr=new Style$1({fill:mr?new Fill:void 0,stroke:gr?new Stroke:void 0}),li[Ki]=vr),mr&&(dr=vr.getFill(),dr.setColor(mr)),gr&&(cr=vr.getStroke(),cr.setColor(gr),cr.setWidth(.5)),vr.setZIndex(Fr));if(Mi!=1&&pr.type=="line"){"line-pattern"in er?mr=void 0:mr=colorWithOpacity(getValue(pr,"paint","line-color",ci,Oi,ti,Hi),getValue(pr,"paint","line-opacity",ci,Oi,ti,Hi));const Sr=getValue(pr,"paint","line-width",ci,Oi,ti,Hi);mr&&Sr>0&&(++Ki,vr=li[Ki],(!vr||!vr.getStroke()||vr.getFill()||vr.getText())&&(vr=new Style$1({stroke:new Stroke}),li[Ki]=vr),cr=vr.getStroke(),cr.setLineCap(getValue(pr,"layout","line-cap",ci,Oi,ti,Hi)),cr.setLineJoin(getValue(pr,"layout","line-join",ci,Oi,ti,Hi)),cr.setMiterLimit(getValue(pr,"layout","line-miter-limit",ci,Oi,ti,Hi)),cr.setColor(mr),cr.setWidth(Sr),cr.setLineDash(er["line-dasharray"]?getValue(pr,"paint","line-dasharray",ci,Oi,ti,Hi).map(function(br){return br*Sr}):null),vr.setZIndex(Fr))}let zr=!1,tr=null,fr=0,ar,nr,Dr;if((Mi==1||Mi==2)&&"icon-image"in Li){const Sr=getValue(pr,"layout","icon-image",ci,Oi,ti,Hi);if(Sr){ar=typeof Sr=="string"?fromTemplate(Sr,Fi):Sr.toString();let br;const Br=We?We(Oe,ar):void 0;if(Cn&&Be&&Be[ar]||Br){const Hr=getValue(pr,"layout","icon-rotation-alignment",ci,Oi,ti,Hi);if(Mi==2){const qr=pi.getGeometry();if(qr.getFlatMidpoint||qr.getFlatMidpoints){const Xr=qr.getExtent();if(Math.sqrt(Math.max(Math.pow((Xr[2]-Xr[0])/vi,2),Math.pow((Xr[3]-Xr[1])/vi,2)))>150){const Qr=qr.getType()==="MultiLineString"?qr.getFlatMidpoints():qr.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),br=renderFeature,renderFeatureCoordinates[0]=Qr[0],renderFeatureCoordinates[1]=Qr[1],getValue(pr,"layout","symbol-placement",ci,Oi,ti,Hi)==="line"&&Hr==="map"){const vs=qr.getStride(),Ms=qr.getFlatCoordinates();for(let Ls=0,ps=Ms.length-vs;Ls<ps;Ls+=vs){const ws=Ms[Ls],As=Ms[Ls+1],Ds=Ms[Ls+vs],xs=Ms[Ls+vs+1],Xs=Math.min(ws,Ds),_o=Math.max(ws,Ds),Fs=Qr[0],Ss=Qr[1],Is=(xs-As)*(Fs-ws)-(Ds-ws)*(Ss-As);if(Math.abs(Is)<.001&&Fs<=_o&&Fs>=Xs){fr=Math.atan2(As-xs,Ds-ws);break}}}}}}if(Mi!==2||br){const qr=getValue(pr,"layout","icon-size",ci,Oi,ti,Hi),Xr=er["icon-color"]!==void 0?getValue(pr,"paint","icon-color",ci,Oi,ti,Hi):null;if(!Xr||Xr.a!==0){const cs=getValue(pr,"paint","icon-halo-color",ci,Oi,ti,Hi),Qr=getValue(pr,"paint","icon-halo-width",ci,Oi,ti,Hi);let bs=`${ar}.${qr}.${Qr}.${cs}`;if(Xr!==null&&(bs+=`.${Xr}`),nr=Bn[bs],!nr){const vs=getDeclutterMode(pr,ci,Oi,"icon",ti);let Ms;"icon-offset"in Li&&(Ms=getValue(pr,"layout","icon-offset",ci,Oi,ti,Hi).slice(0),Ms[0]*=qr,Ms[1]*=-qr);let Ls=Xr?[Xr.r*255,Xr.g*255,Xr.b*255,Xr.a]:void 0;if(Br){const ps={color:Ls,rotateWithView:Hr==="map",displacement:Ms,declutterMode:vs,scale:qr};typeof Br=="string"?ps.src=Br:(ps.img=Br,ps.imgSize=[Br.width,Br.height]),nr=new Icon(ps)}else{const ps=Be[ar];let ws,As,Ds;Qr?ps.sdf?(ws=drawIconHalo(drawSDF(Cn,ps,Xr||[0,0,0,1]),{x:0,y:0,width:ps.width,height:ps.height,pixelRatio:ps.pixelRatio},Qr,cs),Ls=void 0):ws=drawIconHalo(Cn,ps,Qr,cs):(ps.sdf?(An||(An=drawSDF(Cn,{x:0,y:0,width:En[0],height:En[1]},{r:1,g:1,b:1})),ws=An):ws=Cn,As=[ps.width,ps.height],Ds=[ps.x,ps.y]),nr=new Icon({color:Ls,img:ws,imgSize:En,size:As,offset:Ds,rotateWithView:Hr==="map",scale:qr/ps.pixelRatio,displacement:Ms,declutterMode:vs})}Bn[bs]=nr}}nr&&(++Ki,vr=li[Ki],(!vr||!vr.getImage()||vr.getFill()||vr.getStroke())&&(vr=new Style$1,li[Ki]=vr),vr.setGeometry(br),nr.setRotation(fr+deg2rad(getValue(pr,"layout","icon-rotate",ci,Oi,ti,Hi))),nr.setOpacity(getValue(pr,"paint","icon-opacity",ci,Oi,ti,Hi)),nr.setAnchor(anchor[getValue(pr,"layout","icon-anchor",ci,Oi,ti,Hi)]),vr.setImage(nr),tr=vr.getText(),vr.setText(void 0),vr.setZIndex(Fr),zr=!0,Dr=!1)}else Dr=!0}}}if(Mi==1&&pr.type==="circle"){++Ki,vr=li[Ki],(!vr||!vr.getImage()||vr.getFill()||vr.getStroke())&&(vr=new Style$1,li[Ki]=vr);const Sr="circle-radius"in er?getValue(pr,"paint","circle-radius",ci,Oi,ti,Hi):5,br=colorWithOpacity(getValue(pr,"paint","circle-stroke-color",ci,Oi,ti,Hi),getValue(pr,"paint","circle-stroke-opacity",ci,Oi,ti,Hi)),Br=getValue(pr,"paint","circle-translate",ci,Oi,ti,Hi),Hr=colorWithOpacity(getValue(pr,"paint","circle-color",ci,Oi,ti,Hi),getValue(pr,"paint","circle-opacity",ci,Oi,ti,Hi)),qr=getValue(pr,"paint","circle-stroke-width",ci,Oi,ti,Hi),Xr=Sr+"."+br+"."+Hr+"."+qr+"."+Br[0]+"."+Br[1];nr=Bn[Xr],nr||(nr=new CircleStyle({radius:Sr,displacement:[Br[0],-Br[1]],stroke:br&&qr>0?new Stroke({width:qr,color:br}):void 0,fill:Hr?new Fill({color:Hr}):void 0,declutterMode:"none"}),Bn[Xr]=nr),vr.setImage(nr),tr=vr.getText(),vr.setText(void 0),vr.setGeometry(void 0),vr.setZIndex(Fr),zr=!0}let kr,Ir,Mr,Rr,Nr,Ar;if("text-field"in Li){Rr=Math.round(getValue(pr,"layout","text-size",ci,Oi,ti,Hi));const Sr=getValue(pr,"layout","text-font",ci,Oi,ti,Hi);Mr=getValue(pr,"layout","text-line-height",ci,Oi,ti,Hi),Ir=mb2css(He?He(Sr,e.metadata?e.metadata["ol:webfonts"]:void 0):Sr,Rr,Mr),Ir.includes("sans-serif")||(Ir+=",sans-serif"),Nr=getValue(pr,"layout","text-letter-spacing",ci,Oi,ti,Hi),Ar=getValue(pr,"layout","text-max-width",ci,Oi,ti,Hi);const br=getValue(pr,"layout","text-field",ci,Oi,ti,Hi);typeof br=="object"&&br.sections?br.sections.length===1?kr=br.toString():kr=br.sections.reduce((Br,Hr,qr)=>{const Xr=Hr.fontStack?Hr.fontStack.split(","):Sr,cs=mb2css(He?He(Xr):Xr,Rr*(Hr.scale||1),Mr);let Qr=Hr.text;if(Qr===`
`)return Br.push(`
`,""),Br;if(Mi==2)return Br.push(applyLetterSpacing(Qr,Nr),cs),Br;Qr=wrapText(Qr,cs,Ar,Nr).split(`
`);for(let bs=0,vs=Qr.length;bs<vs;++bs)bs>0&&Br.push(`
`,""),Br.push(Qr[bs],cs);return Br},[]):kr=fromTemplate(br,Fi).trim(),_r=getValue(pr,"paint","text-opacity",ci,Oi,ti,Hi)}if(kr&&_r&&!Dr){zr||(++Ki,vr=li[Ki],(!vr||!vr.getText()||vr.getFill()||vr.getStroke())&&(vr=new Style$1,li[Ki]=vr),vr.setImage(void 0),vr.setGeometry(void 0));const Sr=getDeclutterMode(pr,ci,Oi,"text",ti);vr.getText()||vr.setText(tr),tr=vr.getText(),(!tr||"getDeclutterMode"in tr&&tr.getDeclutterMode()!==Sr)&&(tr=new Text({padding:[2,2,2,2],declutterMode:Sr}),vr.setText(tr));const br=getValue(pr,"layout","text-transform",ci,Oi,ti,Hi);br=="uppercase"?kr=Array.isArray(kr)?kr.map((xs,Xs)=>Xs%2?xs:xs.toUpperCase()):kr.toUpperCase():br=="lowercase"&&(kr=Array.isArray(kr)?kr.map((xs,Xs)=>Xs%2?xs:xs.toLowerCase()):kr.toLowerCase());const Br=Array.isArray(kr)?kr:Mi==2?applyLetterSpacing(kr,Nr):wrapText(kr,Ir,Ar,Nr);if(tr.setText(Br),tr.setFont(Ir),tr.setRotation(deg2rad(getValue(pr,"layout","text-rotate",ci,Oi,ti,Hi))),typeof tr.setKeepUpright=="function"){const xs=getValue(pr,"layout","text-keep-upright",ci,Oi,ti,Hi);tr.setKeepUpright(xs)}const Hr=getValue(pr,"layout","text-anchor",ci,Oi,ti,Hi),qr=zr||Mi==1?"point":getValue(pr,"layout","symbol-placement",ci,Oi,ti,Hi);let Xr;if(qr==="line-center"?(tr.setPlacement("line"),Xr="center"):tr.setPlacement(qr),qr==="line"&&typeof tr.setRepeat=="function"){const xs=getValue(pr,"layout","symbol-spacing",ci,Oi,ti,Hi);tr.setRepeat(xs*2)}tr.setOverflow(qr==="point");let cs=getValue(pr,"paint","text-halo-width",ci,Oi,ti,Hi);const Qr=getValue(pr,"layout","text-offset",ci,Oi,ti,Hi),bs=getValue(pr,"paint","text-translate",ci,Oi,ti,Hi);let vs=0,Ms=0;if(qr=="point"){Xr="center",Hr.indexOf("left")!==-1?(Xr="left",Ms=cs):Hr.indexOf("right")!==-1&&(Xr="right",Ms=-cs);const xs=getValue(pr,"layout","text-rotation-alignment",ci,Oi,ti,Hi);tr.setRotateWithView(xs=="map")}else tr.setMaxAngle(deg2rad(getValue(pr,"layout","text-max-angle",ci,Oi,ti,Hi))*kr.length/Br.length),tr.setRotateWithView(!1);tr.setTextAlign(Xr);let Ls="middle";Hr.indexOf("bottom")==0?(Ls="bottom",vs=-cs-.5*(Mr-1)*Rr):Hr.indexOf("top")==0&&(Ls="top",vs=cs+.5*(Mr-1)*Rr),tr.setTextBaseline(Ls);const ps=getValue(pr,"layout","text-justify",ci,Oi,ti,Hi);tr.setJustify(ps==="auto"?void 0:ps),tr.setOffsetX(Qr[0]*Rr+Ms+bs[0]),tr.setOffsetY(Qr[1]*Rr+vs+bs[1]),ai.setColor(colorWithOpacity(getValue(pr,"paint","text-color",ci,Oi,ti,Hi),_r)),tr.setFill(ai);const ws=colorWithOpacity(getValue(pr,"paint","text-halo-color",ci,Oi,ti,Hi),_r);if(ws&&cs>0){si.setColor(ws),cs*=2;const xs=.5*Rr;si.setWidth(cs<=xs?cs:xs),tr.setStroke(si)}else tr.setStroke(void 0);const As=getValue(pr,"layout","text-padding",ci,Oi,ti,Hi),Ds=tr.getPadding();As!==Ds[0]&&(Ds[0]=As,Ds[1]=As,Ds[2]=As,Ds[3]=As),vr.setZIndex(Fr)}}}if(Ki>-1)return li.length=Ki+1,li};return Oe.setStyle(Pi),Oe.set("mapbox-source",ri),Oe.set("mapbox-layers",Ln),Oe.set("mapbox-featurestate",Oe.get("mapbox-featurestate")||{}),Pi}function getTileResolutions(Oe,e=512){return Oe.getExtent()?createXYZ({extent:Oe.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(Oe,e){return e.accessToken||(e=Object.assign({},e),new URL(Oe).searchParams.forEach((ke,Be)=>{e.accessToken=ke,e.accessTokenParam=Be})),e}function applyStyle(Oe,e,Te="",ke={},Be=void 0){let Ue,He,We,Cn,En=!0;return typeof Te!="string"&&!Array.isArray(Te)?(We=Te,Cn=We.source||We.layers,ke=We):Cn=Te,typeof ke=="string"?(Ue=ke,We={}):(Ue=ke.styleUrl,We=ke),We.updateSource===!1&&(En=!1),Be||(Be=We.resolutions),!Ue&&typeof e=="string"&&!e.trim().startsWith("{")&&(Ue=e),Ue&&(Ue=Ue.startsWith("data:")?location.href:normalizeStyleUrl(Ue,We.accessToken),We=completeOptions(Ue,We)),new Promise(function(An,Sn){getGlStyle(e,We).then(function(Tn){if(Tn.version!=8)return Sn(new Error("glStyle version 8 required."));if(!(Oe instanceof VectorLayer||Oe instanceof VectorTileLayer))return Sn(new Error("Can only apply to VectorLayer or VectorTileLayer"));const Ln=Oe instanceof VectorTileLayer?"vector":"geojson";if(Cn?Array.isArray(Cn)?He=Tn.layers.find(function(ai){return ai.id===Cn[0]}).source:He=Cn:(He=Object.keys(Tn.sources).find(function(ai){return Tn.sources[ai].type===Ln}),Cn=He),!He)return Sn(new Error(`No ${Ln} source found in the glStyle.`));function Bn(){if(!En)return Promise.resolve();if(Oe instanceof VectorTileLayer)return setupVectorSource(Tn.sources[He],Ue,We).then(function(pi){const vi=Oe.getSource();vi?pi!==vi&&(vi.setTileUrlFunction(pi.getTileUrlFunction()),typeof vi.setUrls=="function"&&typeof pi.getUrls=="function"&&vi.setUrls(pi.getUrls()),vi.format_||(vi.format_=pi.format_),vi.getAttributions()||vi.setAttributions(pi.getAttributions()),vi.getTileLoadFunction()===defaultLoadFunction&&vi.setTileLoadFunction(pi.getTileLoadFunction()),equivalent$1(vi.getProjection(),pi.getProjection())&&(vi.tileGrid=pi.getTileGrid())):Oe.setSource(pi);const Ri=Oe.getSource().getTileGrid();!isFinite(Oe.getMaxResolution())&&!isFinite(Oe.getMinZoom())&&Ri.getMinZoom()>0&&Oe.setMaxResolution(getResolutionForZoom(Math.max(0,Ri.getMinZoom()-1e-12),Ri.getResolutions()))});const ai=Tn.sources[He];let li=Oe.getSource();(!li||li.get("mapbox-source")!==ai)&&(li=setupGeoJSONSource(ai,Ue,We));const Pi=Oe.getSource();return Pi?li!==Pi&&(Pi.getAttributions()||Pi.setAttributions(li.getAttributions()),Pi.format_||(Pi.format_=li.getFormat()),Pi.url_=li.getUrl()):Oe.setSource(li),Promise.resolve()}let ei,ti,ni,ri;function si(){if(!ri&&(!Tn.sprite||ti)){if(We.projection&&!Be){const li=get$3(We.projection).getUnits();li!=="m"&&(Be=defaultResolutions.map(Pi=>Pi/METERS_PER_UNIT$1[li]))}ri=stylefunction(Oe,Tn,Cn,Be,ti,ni,(ai,li=We.webfonts)=>getFonts(ai,li),We.getImage),Oe.getStyle()?Bn().then(An).catch(Sn):Sn(new Error(`Nothing to show for source [${He}]`))}else ri?(Oe.setStyle(ri),Bn().then(An).catch(Sn)):Sn(new Error("Something went wrong trying to apply style."))}if(Tn.sprite){const ai=new URL(normalizeSpriteUrl(Tn.sprite,We.accessToken,Ue||location.href));ei=window.devicePixelRatio>=1.5?.5:1;const li=ei==.5?"@2x":"";let Pi=ai.origin+ai.pathname+li+".json"+ai.search;new Promise(function(pi,vi){fetchResource("Sprite",Pi,We).then(pi).catch(function(Ri){Pi=ai.origin+ai.pathname+".json"+ai.search,fetchResource("Sprite",Pi,We).then(pi).catch(vi)})}).then(function(pi){if(pi===void 0&&Sn(new Error("No sprites found.")),ti=pi,ni=ai.origin+ai.pathname+li+".png"+ai.search,We.transformRequest){const vi=We.transformRequest(ni,"SpriteImage")||ni;(vi instanceof Request||vi instanceof Promise)&&(ni=vi)}si()}).catch(function(pi){Sn(new Error(`Sprites cannot be loaded: ${Pi}: ${pi.message}`))})}else si()}).catch(Sn)})}function extentFromTileJSON(Oe,e){const Te=Oe.bounds;if(Te){const ke=fromLonLat([Te[0],Te[1]],e),Be=fromLonLat([Te[2],Te[3]],e);return[ke[0],ke[1],Be[0],Be[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(Oe,e,Te){const ke=new TileJSON({tileJSON:e,tileSize:Oe.tileSize||e.tileSize||512}),Be=ke.getTileJSON(),Ue=ke.getTileGrid(),He=get$3(Te.projection||"EPSG:3857"),We=extentFromTileJSON(Be,He),Cn=He.getExtent(),En=Be.minzoom||0,An=Be.maxzoom||22,Sn={attributions:ke.getAttributions(),projection:He,tileGrid:new TileGrid({origin:Cn?getTopLeft(Cn):Ue.getOrigin(0),extent:We||Ue.getExtent(),minZoom:En,resolutions:getTileResolutions(He,e.tileSize).slice(0,An+1),tileSize:Ue.getTileSize(0)})};return Array.isArray(Be.tiles)?Sn.urls=Be.tiles:Sn.url=Be.tiles,Sn}function setupVectorSource(Oe,e,Te){return new Promise(function(ke,Be){getTileJson(Oe,e,Te).then(function({tileJson:Ue,tileLoadFunction:He}){const We=sourceOptionsFromTileJSON(Oe,Ue,Te);We.tileLoadFunction=He,We.format=new MVT,ke(new VectorTile(We))}).catch(Be)})}function getBboxTemplate(Oe){return`{bbox-${(Oe?Oe.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(Oe,e,Te){const ke=Te.projection?new GeoJSON$1({dataProjection:Te.projection}):new GeoJSON$1,Be=Oe.data,Ue={};if(typeof Be=="string"){const[We]=normalizeSourceUrl(Be,Te.accessToken,Te.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(We)){const En=(Sn,Tn,Ln)=>{const Bn=getBboxTemplate(Ln);return We.replace(Bn,`${Sn.join(",")}`)},An=new VectorSource({attributions:Oe.attribution,format:ke,loader:(Sn,Tn,Ln,Bn,ei)=>{const ti=typeof En=="function"?En(Sn,Tn,Ln):En;fetchResource("GeoJSON",ti,Te).then(ni=>{const ri=An.getFormat().readFeatures(ni,{featureProjection:Ln});An.addFeatures(ri),Bn(ri)}).catch(ni=>{An.removeLoadedExtent(Sn),ei()})},strategy:bbox});return An.set("mapbox-source",Oe),An}const Cn=new VectorSource({attributions:Oe.attribution,format:ke,url:We,loader:(En,An,Sn,Tn,Ln)=>{fetchResource("GeoJSON",We,Te).then(Bn=>{const ei=Cn.getFormat().readFeatures(Bn,{featureProjection:Sn});Cn.addFeatures(ei),Tn(ei)}).catch(Bn=>{Cn.removeLoadedExtent(En),Ln()})}});return Cn}Ue.features=ke.readFeatures(Be,{featureProjection:"EPSG:3857"});const He=new VectorSource(Object.assign({attributions:Oe.attribution,format:ke},Ue));return He.set("mapbox-source",Oe),He}function updateMapboxLayer(Oe,e){const Te=Oe.get("mapbox-style"),ke=Te.layers,Be=ke.findIndex(function(We){return We.id===e.id});if(Be===-1)throw new Error(`Layer with id "${e.id}" not found.`);if(ke[Be].source!==e.source)throw new Error("Updated layer and previous version must use the same source.");delete getFunctionCache(Te)[e.id],delete getFilterCache(Te)[e.id],ke[Be]=e;const He=styleFunctionArgs[getStyleFunctionKey(Oe.get("mapbox-style"),getLayer(Oe,e.id))];He?stylefunction.apply(void 0,He):getLayer(Oe,e.id).changed()}function getLayer(Oe,e){const Te=Oe.getLayers().getArray();for(let ke=0,Be=Te.length;ke<Be;++ke){const Ue=Te[ke].get("mapbox-layers");if(Ue&&Ue.indexOf(e)!==-1)return Te[ke]}}var LayerMapBox=class extends VectorTileLayer{constructor(e,Te){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var ke=e.ssl===!1?"http://":"https://",Be=e.configuration;if(!Be){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ue=e.layer+"$GEOPORTAIL:GPP:TMS";if(Be=Config.configuration.getLayerConf(Ue),!Be)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var He=null,We="",Cn=e.style,En=0;En<Be.styles.length;En++){var An=Be.styles[En];if(Cn&&An.name===Cn){He=An.url,We=An.title;break}else if(!Cn&&An.current){Cn=An.name,He=An.url,We=An.title;break}}if(!He)throw new Error("ERROR : Style URL not found !?");He.replace(/(http|https):\/\//,ke);var Sn=new VectorTile({state:"loading",format:new MVT});Sn._originators=Be.originators,Sn._legends=Be.legends,Sn._metadata=Be.metadata,Sn._description=Be.description,Sn._title=Be.title+" ("+We+")",Sn._quicklookUrl=Be.quicklookUrl;var Tn={source:Sn};return Helper.mergeParams(Tn,Te),e.olParams&&!Be.originators&&(Sn._originators=e.olParams.attributions),super(Tn),this.name=e.layer,this.service="TMS",this.protocol=ke,this.sourceId=e.source,this.styleUrl=He,this.config=Be,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(Te){Te.ok&&Te.json().then(function(ke){e.onStyleMapBoxLoad(ke)})}).catch(function(Te){e.onStyleMapBoxError(Te)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var Te=e.sources[this.sourceId];if(!Te){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(Te.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var ke=this.getSource();if(Te.url){Te.url.replace(/(http|https):\/\//,this.protocol);var Be=new TileJSON({url:Te.url}),Ue=this,He=Be.on("change",function(){if(Be.getState()==="ready"){var Cn=Be.getTileJSON();if(!Cn)return;Ue.set("mapbox-extensions",Cn);for(var En=Array.isArray(Cn.tiles)?Cn.tiles:[Cn.tiles],An=0;An<Te.tiles.length;An++)En[An].replace(/(http|https):\/\//,this.protocol);ke.setUrls(En),unByKey(He)}})}if(Te.tiles){for(var We=0;We<Te.tiles.length;We++)Te.tiles[We].replace(/(http|https):\/\//,this.protocol);ke.setUrls(Te.tiles)}applyStyle(this,e,this.sourceId).then(()=>{ke.setState("ready"),this.set("mapbox-styles",e)}).catch(Cn=>{this.onStyleMapBoxError(Cn)})}onStyleMapBoxError(e){var Te=this.getSource();Te.setState("error"),console.error(e.message)}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);const exceptions=["GPoverviewMap","GPfullScreen"];function getSameSideOpenedPanel(Oe,e){var Te=[...exceptions,e],ke=[];if(Oe&&Oe.includes("left")){var Be=document.getElementById("position-container-bottom-left"),Ue=document.getElementById("position-container-top-left");ke=[...Be.children,...Ue.children]}if(Oe&&Oe.includes("right")){var He=document.getElementById("position-container-bottom-right"),We=document.getElementById("position-container-top-right");ke=[...He.children,...We.children]}return ke.filter(Cn=>{var En=Cn.id.match(/(\w+)-[0-9]+/)[1],An=Te.includes(En),Sn=Cn.getElementsByTagName("button")[0].getAttribute("aria-pressed");if(Sn==="true"&&!An)return Cn})}var PanelManager=function(Oe,e){var Te=getSameSideOpenedPanel(Oe,e);Te.length>0&&Te[0].getElementsByTagName("button")[0].click()},Widget={onPanelOpen:function(){PanelManager(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}},checkDsfr=function(){var Oe=getComputedStyle(document.documentElement),e=Oe.getPropertyValue("--blue-france-sun-113-625");return e!==""},ControlExtended=class extends Control{constructor(e){e=e||{},super({element:e.element,target:e.target,render:e.render}),e&&e.listable?this.listable=!0:this.listable=!1,e&&e.description?this.description=e.description:this.description=""}setPosition(e){if(this.getMap()){var Te=new PositionFactory(this);Te.set(e)}}updatePosition(e){if(this.getMap()){var Te=new PositionFactory(this);Te.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var Il,qf,Cd,af;class PositionFactory{constructor(e){Iu(this,Il);return this.caller=e,this.container=null,ac(this,Il,Cd).call(this,"top-left"),ac(this,Il,Cd).call(this,"top-right"),ac(this,Il,Cd).call(this,"bottom-left"),ac(this,Il,Cd).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(ac(this,Il,af).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&ac(this,Il,af).call(this,e,!0)}}Il=new WeakSet,qf=function(e){var Te=this.container.children["position-container-"+e];return!!Te},Cd=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!ac(this,Il,qf).call(this,e)){var Te=document.createElement("div");Te.id="position-container-"+e,Te.className="position position-container-"+e,this.container.appendChild(Te)}},af=function(e,Te){var ke=this;const Be=An=>{var Sn=ke.container.children["position-container-"+An];return Sn.children.length},Ue=An=>{var Sn=ke.container.children["position-container-"+An],Tn=Sn.offsetWidth;return Tn},He=An=>{var Sn=ke.container.children["position-container-"+An],Tn=Sn.offsetHeight;if(Te){An.includes("top")&&(Tn=0);for(let Ln=0;Ln<Sn.children.length;Ln++){if(Sn.children[Ln].id===ke.caller.element.id){Tn=An.includes("bottom")?Tn-ke.caller.element.offsetHeight:Tn*-1;break}Tn-=Sn.children[Ln].offsetHeight}}return Tn},We=An=>{An.style.top="unset",An.style.bottom="unset",An.style.left="unset",An.style.right="unset"};We(this.caller.element),this.caller.element.style.position="unset";var Cn=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(Cn.length!==0){var En=0;Cn.forEach(An=>{if(An.nodeName.toLowerCase()==="dialog"){switch(We(An),e.toLowerCase()){case"top-left":checkDsfr()?An.style.top="0px":An.style.top=Be(e)?He(e)+"px":"0px",An.style.left=Ue(e)+En+"px";break;case"bottom-left":checkDsfr()?An.style.top="0px":An.style.bottom=Be(e)?He(e)+"px":"0px",An.style.left=Ue(e)+En+"px";break;case"top-right":checkDsfr()?An.style.top="0px":An.style.top=Be(e)?He(e)+"px":"0px",An.style.right=Ue(e)+En+"px";break;case"bottom-right":checkDsfr()?An.style.top="0px":An.style.bottom=Be(e)?He(e)+"px":"0px",An.style.right=Ue(e)+En+"px";break}En+=An.offsetWidth}})}};var SelectorID={generate:function(){var Oe=Math.floor(Date.now());return function(){return Oe++}}(),name:function(Oe){var e=null,Te=Oe.lastIndexOf("-");return Te===-1?e=Oe:e=Oe.substring(0,Te),e},index:function(Oe){var e=null,Te=this.name(Oe),ke=Te.lastIndexOf("_");return ke!==-1&&(e=Te.substring(ke+1)),e},uuid:function(Oe){var e=null,Te=Oe.lastIndexOf("-");return Te!==-1&&(e=parseInt(Oe.substring(Te+1),10)),e}};/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(Oe,e){var Te=Object.keys(Oe);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(Oe);e&&(ke=ke.filter(function(Be){return Object.getOwnPropertyDescriptor(Oe,Be).enumerable})),Te.push.apply(Te,ke)}return Te}function _objectSpread2(Oe){for(var e=1;e<arguments.length;e++){var Te=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(Te),!0).forEach(function(ke){_defineProperty(Oe,ke,Te[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Oe,Object.getOwnPropertyDescriptors(Te)):ownKeys(Object(Te)).forEach(function(ke){Object.defineProperty(Oe,ke,Object.getOwnPropertyDescriptor(Te,ke))})}return Oe}function _typeof$1(Oe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(e){return typeof e}:_typeof$1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(Oe)}function _defineProperty(Oe,e,Te){return e in Oe?Object.defineProperty(Oe,e,{value:Te,enumerable:!0,configurable:!0,writable:!0}):Oe[e]=Te,Oe}function _extends(){return _extends=Object.assign||function(Oe){for(var e=1;e<arguments.length;e++){var Te=arguments[e];for(var ke in Te)Object.prototype.hasOwnProperty.call(Te,ke)&&(Oe[ke]=Te[ke])}return Oe},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(Oe,e){if(Oe==null)return{};var Te={},ke=Object.keys(Oe),Be,Ue;for(Ue=0;Ue<ke.length;Ue++)Be=ke[Ue],!(e.indexOf(Be)>=0)&&(Te[Be]=Oe[Be]);return Te}function _objectWithoutProperties(Oe,e){if(Oe==null)return{};var Te=_objectWithoutPropertiesLoose(Oe,e),ke,Be;if(Object.getOwnPropertySymbols){var Ue=Object.getOwnPropertySymbols(Oe);for(Be=0;Be<Ue.length;Be++)ke=Ue[Be],!(e.indexOf(ke)>=0)&&Object.prototype.propertyIsEnumerable.call(Oe,ke)&&(Te[ke]=Oe[ke])}return Te}var version="1.15.3";function userAgent(Oe){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(Oe)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(Oe,e,Te){Oe.addEventListener(e,Te,!IE11OrLess&&captureMode)}function off(Oe,e,Te){Oe.removeEventListener(e,Te,!IE11OrLess&&captureMode)}function matches(Oe,e){if(e){if(e[0]===">"&&(e=e.substring(1)),Oe)try{if(Oe.matches)return Oe.matches(e);if(Oe.msMatchesSelector)return Oe.msMatchesSelector(e);if(Oe.webkitMatchesSelector)return Oe.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(Oe){return Oe.host&&Oe!==document&&Oe.host.nodeType?Oe.host:Oe.parentNode}function closest(Oe,e,Te,ke){if(Oe){Te=Te||document;do{if(e!=null&&(e[0]===">"?Oe.parentNode===Te&&matches(Oe,e):matches(Oe,e))||ke&&Oe===Te)return Oe;if(Oe===Te)break}while(Oe=getParentOrHost(Oe))}return null}var R_SPACE=/\s+/g;function toggleClass(Oe,e,Te){if(Oe&&e)if(Oe.classList)Oe.classList[Te?"add":"remove"](e);else{var ke=(" "+Oe.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");Oe.className=(ke+(Te?" "+e:"")).replace(R_SPACE," ")}}function css(Oe,e,Te){var ke=Oe&&Oe.style;if(ke){if(Te===void 0)return document.defaultView&&document.defaultView.getComputedStyle?Te=document.defaultView.getComputedStyle(Oe,""):Oe.currentStyle&&(Te=Oe.currentStyle),e===void 0?Te:Te[e];!(e in ke)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),ke[e]=Te+(typeof Te=="string"?"":"px")}}function matrix(Oe,e){var Te="";if(typeof Oe=="string")Te=Oe;else do{var ke=css(Oe,"transform");ke&&ke!=="none"&&(Te=ke+" "+Te)}while(!e&&(Oe=Oe.parentNode));var Be=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return Be&&new Be(Te)}function find(Oe,e,Te){if(Oe){var ke=Oe.getElementsByTagName(e),Be=0,Ue=ke.length;if(Te)for(;Be<Ue;Be++)Te(ke[Be],Be);return ke}return[]}function getWindowScrollingElement(){var Oe=document.scrollingElement;return Oe||document.documentElement}function getRect(Oe,e,Te,ke,Be){if(!(!Oe.getBoundingClientRect&&Oe!==window)){var Ue,He,We,Cn,En,An,Sn;if(Oe!==window&&Oe.parentNode&&Oe!==getWindowScrollingElement()?(Ue=Oe.getBoundingClientRect(),He=Ue.top,We=Ue.left,Cn=Ue.bottom,En=Ue.right,An=Ue.height,Sn=Ue.width):(He=0,We=0,Cn=window.innerHeight,En=window.innerWidth,An=window.innerHeight,Sn=window.innerWidth),(e||Te)&&Oe!==window&&(Be=Be||Oe.parentNode,!IE11OrLess))do if(Be&&Be.getBoundingClientRect&&(css(Be,"transform")!=="none"||Te&&css(Be,"position")!=="static")){var Tn=Be.getBoundingClientRect();He-=Tn.top+parseInt(css(Be,"border-top-width")),We-=Tn.left+parseInt(css(Be,"border-left-width")),Cn=He+Ue.height,En=We+Ue.width;break}while(Be=Be.parentNode);if(ke&&Oe!==window){var Ln=matrix(Be||Oe),Bn=Ln&&Ln.a,ei=Ln&&Ln.d;Ln&&(He/=ei,We/=Bn,Sn/=Bn,An/=ei,Cn=He+An,En=We+Sn)}return{top:He,left:We,bottom:Cn,right:En,width:Sn,height:An}}}function isScrolledPast(Oe,e,Te){for(var ke=getParentAutoScrollElement(Oe,!0),Be=getRect(Oe)[e];ke;){var Ue=getRect(ke)[Te],He=void 0;if(He=Be>=Ue,!He)return ke;if(ke===getWindowScrollingElement())break;ke=getParentAutoScrollElement(ke,!1)}return!1}function getChild(Oe,e,Te,ke){for(var Be=0,Ue=0,He=Oe.children;Ue<He.length;){if(He[Ue].style.display!=="none"&&He[Ue]!==Sortable.ghost&&(ke||He[Ue]!==Sortable.dragged)&&closest(He[Ue],Te.draggable,Oe,!1)){if(Be===e)return He[Ue];Be++}Ue++}return null}function lastChild(Oe,e){for(var Te=Oe.lastElementChild;Te&&(Te===Sortable.ghost||css(Te,"display")==="none"||e&&!matches(Te,e));)Te=Te.previousElementSibling;return Te||null}function index(Oe,e){var Te=0;if(!Oe||!Oe.parentNode)return-1;for(;Oe=Oe.previousElementSibling;)Oe.nodeName.toUpperCase()!=="TEMPLATE"&&Oe!==Sortable.clone&&(!e||matches(Oe,e))&&Te++;return Te}function getRelativeScrollOffset(Oe){var e=0,Te=0,ke=getWindowScrollingElement();if(Oe)do{var Be=matrix(Oe),Ue=Be.a,He=Be.d;e+=Oe.scrollLeft*Ue,Te+=Oe.scrollTop*He}while(Oe!==ke&&(Oe=Oe.parentNode));return[e,Te]}function indexOfObject(Oe,e){for(var Te in Oe)if(Oe.hasOwnProperty(Te)){for(var ke in e)if(e.hasOwnProperty(ke)&&e[ke]===Oe[Te][ke])return Number(Te)}return-1}function getParentAutoScrollElement(Oe,e){if(!Oe||!Oe.getBoundingClientRect)return getWindowScrollingElement();var Te=Oe,ke=!1;do if(Te.clientWidth<Te.scrollWidth||Te.clientHeight<Te.scrollHeight){var Be=css(Te);if(Te.clientWidth<Te.scrollWidth&&(Be.overflowX=="auto"||Be.overflowX=="scroll")||Te.clientHeight<Te.scrollHeight&&(Be.overflowY=="auto"||Be.overflowY=="scroll")){if(!Te.getBoundingClientRect||Te===document.body)return getWindowScrollingElement();if(ke||e)return Te;ke=!0}}while(Te=Te.parentNode);return getWindowScrollingElement()}function extend$1(Oe,e){if(Oe&&e)for(var Te in e)e.hasOwnProperty(Te)&&(Oe[Te]=e[Te]);return Oe}function isRectEqual(Oe,e){return Math.round(Oe.top)===Math.round(e.top)&&Math.round(Oe.left)===Math.round(e.left)&&Math.round(Oe.height)===Math.round(e.height)&&Math.round(Oe.width)===Math.round(e.width)}var _throttleTimeout;function throttle(Oe,e){return function(){if(!_throttleTimeout){var Te=arguments,ke=this;Te.length===1?Oe.call(ke,Te[0]):Oe.apply(ke,Te),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(Oe,e,Te){Oe.scrollLeft+=e,Oe.scrollTop+=Te}function clone(Oe){var e=window.Polymer,Te=window.jQuery||window.Zepto;return e&&e.dom?e.dom(Oe).cloneNode(!0):Te?Te(Oe).clone(!0)[0]:Oe.cloneNode(!0)}function getChildContainingRectFromElement(Oe,e,Te){var ke={};return Array.from(Oe.children).forEach(function(Be){var Ue,He,We,Cn;if(!(!closest(Be,e.draggable,Oe,!1)||Be.animated||Be===Te)){var En=getRect(Be);ke.left=Math.min((Ue=ke.left)!==null&&Ue!==void 0?Ue:1/0,En.left),ke.top=Math.min((He=ke.top)!==null&&He!==void 0?He:1/0,En.top),ke.right=Math.max((We=ke.right)!==null&&We!==void 0?We:-1/0,En.right),ke.bottom=Math.max((Cn=ke.bottom)!==null&&Cn!==void 0?Cn:-1/0,En.bottom)}}),ke.width=ke.right-ke.left,ke.height=ke.bottom-ke.top,ke.x=ke.left,ke.y=ke.top,ke}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var Oe=[],e;return{captureAnimationState:function(){if(Oe=[],!!this.options.animation){var ke=[].slice.call(this.el.children);ke.forEach(function(Be){if(!(css(Be,"display")==="none"||Be===Sortable.ghost)){Oe.push({target:Be,rect:getRect(Be)});var Ue=_objectSpread2({},Oe[Oe.length-1].rect);if(Be.thisAnimationDuration){var He=matrix(Be,!0);He&&(Ue.top-=He.f,Ue.left-=He.e)}Be.fromRect=Ue}})}},addAnimationState:function(ke){Oe.push(ke)},removeAnimationState:function(ke){Oe.splice(indexOfObject(Oe,{target:ke}),1)},animateAll:function(ke){var Be=this;if(!this.options.animation){clearTimeout(e),typeof ke=="function"&&ke();return}var Ue=!1,He=0;Oe.forEach(function(We){var Cn=0,En=We.target,An=En.fromRect,Sn=getRect(En),Tn=En.prevFromRect,Ln=En.prevToRect,Bn=We.rect,ei=matrix(En,!0);ei&&(Sn.top-=ei.f,Sn.left-=ei.e),En.toRect=Sn,En.thisAnimationDuration&&isRectEqual(Tn,Sn)&&!isRectEqual(An,Sn)&&(Bn.top-Sn.top)/(Bn.left-Sn.left)===(An.top-Sn.top)/(An.left-Sn.left)&&(Cn=calculateRealTime(Bn,Tn,Ln,Be.options)),isRectEqual(Sn,An)||(En.prevFromRect=An,En.prevToRect=Sn,Cn||(Cn=Be.options.animation),Be.animate(En,Bn,Sn,Cn)),Cn&&(Ue=!0,He=Math.max(He,Cn),clearTimeout(En.animationResetTimer),En.animationResetTimer=setTimeout(function(){En.animationTime=0,En.prevFromRect=null,En.fromRect=null,En.prevToRect=null,En.thisAnimationDuration=null},Cn),En.thisAnimationDuration=Cn)}),clearTimeout(e),Ue?e=setTimeout(function(){typeof ke=="function"&&ke()},He):typeof ke=="function"&&ke(),Oe=[]},animate:function(ke,Be,Ue,He){if(He){css(ke,"transition",""),css(ke,"transform","");var We=matrix(this.el),Cn=We&&We.a,En=We&&We.d,An=(Be.left-Ue.left)/(Cn||1),Sn=(Be.top-Ue.top)/(En||1);ke.animatingX=!!An,ke.animatingY=!!Sn,css(ke,"transform","translate3d("+An+"px,"+Sn+"px,0)"),this.forRepaintDummy=repaint(ke),css(ke,"transition","transform "+He+"ms"+(this.options.easing?" "+this.options.easing:"")),css(ke,"transform","translate3d(0,0,0)"),typeof ke.animated=="number"&&clearTimeout(ke.animated),ke.animated=setTimeout(function(){css(ke,"transition",""),css(ke,"transform",""),ke.animated=!1,ke.animatingX=!1,ke.animatingY=!1},He)}}}}function repaint(Oe){return Oe.offsetWidth}function calculateRealTime(Oe,e,Te,ke){return Math.sqrt(Math.pow(e.top-Oe.top,2)+Math.pow(e.left-Oe.left,2))/Math.sqrt(Math.pow(e.top-Te.top,2)+Math.pow(e.left-Te.left,2))*ke.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var Te in defaults)defaults.hasOwnProperty(Te)&&!(Te in e)&&(e[Te]=defaults[Te]);plugins.forEach(function(ke){if(ke.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,Te,ke){var Be=this;this.eventCanceled=!1,ke.cancel=function(){Be.eventCanceled=!0};var Ue=e+"Global";plugins.forEach(function(He){Te[He.pluginName]&&(Te[He.pluginName][Ue]&&Te[He.pluginName][Ue](_objectSpread2({sortable:Te},ke)),Te.options[He.pluginName]&&Te[He.pluginName][e]&&Te[He.pluginName][e](_objectSpread2({sortable:Te},ke)))})},initializePlugins:function(e,Te,ke,Be){plugins.forEach(function(We){var Cn=We.pluginName;if(!(!e.options[Cn]&&!We.initializeByDefault)){var En=new We(e,Te,e.options);En.sortable=e,En.options=e.options,e[Cn]=En,_extends(ke,En.defaults)}});for(var Ue in e.options)if(e.options.hasOwnProperty(Ue)){var He=this.modifyOption(e,Ue,e.options[Ue]);typeof He<"u"&&(e.options[Ue]=He)}},getEventProperties:function(e,Te){var ke={};return plugins.forEach(function(Be){typeof Be.eventProperties=="function"&&_extends(ke,Be.eventProperties.call(Te[Be.pluginName],e))}),ke},modifyOption:function(e,Te,ke){var Be;return plugins.forEach(function(Ue){e[Ue.pluginName]&&Ue.optionListeners&&typeof Ue.optionListeners[Te]=="function"&&(Be=Ue.optionListeners[Te].call(e[Ue.pluginName],ke))}),Be}};function dispatchEvent(Oe){var e=Oe.sortable,Te=Oe.rootEl,ke=Oe.name,Be=Oe.targetEl,Ue=Oe.cloneEl,He=Oe.toEl,We=Oe.fromEl,Cn=Oe.oldIndex,En=Oe.newIndex,An=Oe.oldDraggableIndex,Sn=Oe.newDraggableIndex,Tn=Oe.originalEvent,Ln=Oe.putSortable,Bn=Oe.extraEventProperties;if(e=e||Te&&Te[expando],!!e){var ei,ti=e.options,ni="on"+ke.charAt(0).toUpperCase()+ke.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?ei=new CustomEvent(ke,{bubbles:!0,cancelable:!0}):(ei=document.createEvent("Event"),ei.initEvent(ke,!0,!0)),ei.to=He||Te,ei.from=We||Te,ei.item=Be||Te,ei.clone=Ue,ei.oldIndex=Cn,ei.newIndex=En,ei.oldDraggableIndex=An,ei.newDraggableIndex=Sn,ei.originalEvent=Tn,ei.pullMode=Ln?Ln.lastPutMode:void 0;var ri=_objectSpread2(_objectSpread2({},Bn),PluginManager.getEventProperties(ke,e));for(var si in ri)ei[si]=ri[si];Te&&Te.dispatchEvent(ei),ti[ni]&&ti[ni].call(e,ei)}}var _excluded=["evt"],pluginEvent=function(e,Te){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Be=ke.evt,Ue=_objectWithoutProperties(ke,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,Te,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:Be,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(We){_dispatchEvent({sortable:Te,name:We,originalEvent:Be})}},Ue))};function _dispatchEvent(Oe){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},Oe))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var Oe=document.createElement("x");return Oe.style.cssText="pointer-events:auto",Oe.style.pointerEvents==="auto"}}(),_detectDirection=function(e,Te){var ke=css(e),Be=parseInt(ke.width)-parseInt(ke.paddingLeft)-parseInt(ke.paddingRight)-parseInt(ke.borderLeftWidth)-parseInt(ke.borderRightWidth),Ue=getChild(e,0,Te),He=getChild(e,1,Te),We=Ue&&css(Ue),Cn=He&&css(He),En=We&&parseInt(We.marginLeft)+parseInt(We.marginRight)+getRect(Ue).width,An=Cn&&parseInt(Cn.marginLeft)+parseInt(Cn.marginRight)+getRect(He).width;if(ke.display==="flex")return ke.flexDirection==="column"||ke.flexDirection==="column-reverse"?"vertical":"horizontal";if(ke.display==="grid")return ke.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(Ue&&We.float&&We.float!=="none"){var Sn=We.float==="left"?"left":"right";return He&&(Cn.clear==="both"||Cn.clear===Sn)?"vertical":"horizontal"}return Ue&&(We.display==="block"||We.display==="flex"||We.display==="table"||We.display==="grid"||En>=Be&&ke[CSSFloatProperty]==="none"||He&&ke[CSSFloatProperty]==="none"&&En+An>Be)?"vertical":"horizontal"},_dragElInRowColumn=function(e,Te,ke){var Be=ke?e.left:e.top,Ue=ke?e.right:e.bottom,He=ke?e.width:e.height,We=ke?Te.left:Te.top,Cn=ke?Te.right:Te.bottom,En=ke?Te.width:Te.height;return Be===We||Ue===Cn||Be+He/2===We+En/2},_detectNearestEmptySortable=function(e,Te){var ke;return sortables.some(function(Be){var Ue=Be[expando].options.emptyInsertThreshold;if(!(!Ue||lastChild(Be))){var He=getRect(Be),We=e>=He.left-Ue&&e<=He.right+Ue,Cn=Te>=He.top-Ue&&Te<=He.bottom+Ue;if(We&&Cn)return ke=Be}}),ke},_prepareGroup=function(e){function Te(Ue,He){return function(We,Cn,En,An){var Sn=We.options.group.name&&Cn.options.group.name&&We.options.group.name===Cn.options.group.name;if(Ue==null&&(He||Sn))return!0;if(Ue==null||Ue===!1)return!1;if(He&&Ue==="clone")return Ue;if(typeof Ue=="function")return Te(Ue(We,Cn,En,An),He)(We,Cn,En,An);var Tn=(He?We:Cn).options.group.name;return Ue===!0||typeof Ue=="string"&&Ue===Tn||Ue.join&&Ue.indexOf(Tn)>-1}}var ke={},Be=e.group;(!Be||_typeof$1(Be)!="object")&&(Be={name:Be}),ke.name=Be.name,ke.checkPull=Te(Be.pull,!0),ke.checkPut=Te(Be.put),ke.revertClone=Be.revertClone,e.group=ke},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(Oe){if(ignoreNextClick)return Oe.preventDefault(),Oe.stopPropagation&&Oe.stopPropagation(),Oe.stopImmediatePropagation&&Oe.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var Te=_detectNearestEmptySortable(e.clientX,e.clientY);if(Te){var ke={};for(var Be in e)e.hasOwnProperty(Be)&&(ke[Be]=e[Be]);ke.target=ke.rootEl=Te,ke.preventDefault=void 0,ke.stopPropagation=void 0,Te[expando]._onDragOver(ke)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(Oe,e){if(!(Oe&&Oe.nodeType&&Oe.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(Oe));this.el=Oe,this.options=e=_extends({},e),Oe[expando]=this;var Te={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(Oe.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(Oe,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(He,We){He.setData("Text",We.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,Oe,Te);for(var ke in Te)!(ke in e)&&(e[ke]=Te[ke]);_prepareGroup(e);for(var Be in this)Be.charAt(0)==="_"&&typeof this[Be]=="function"&&(this[Be]=this[Be].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(Oe,"pointerdown",this._onTapStart):(on(Oe,"mousedown",this._onTapStart),on(Oe,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(Oe,"dragover",this),on(Oe,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,Te){return typeof this.options.direction=="function"?this.options.direction.call(this,e,Te,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var Te=this,ke=this.el,Be=this.options,Ue=Be.preventOnFilter,He=e.type,We=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,Cn=(We||e).target,En=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||Cn,An=Be.filter;if(_saveInputCheckedState(ke),!dragEl&&!(/mousedown|pointerdown/.test(He)&&e.button!==0||Be.disabled)&&!En.isContentEditable&&!(!this.nativeDraggable&&Safari&&Cn&&Cn.tagName.toUpperCase()==="SELECT")&&(Cn=closest(Cn,Be.draggable,ke,!1),!(Cn&&Cn.animated)&&lastDownEl!==Cn)){if(oldIndex=index(Cn),oldDraggableIndex=index(Cn,Be.draggable),typeof An=="function"){if(An.call(this,e,Cn,this)){_dispatchEvent({sortable:Te,rootEl:En,name:"filter",targetEl:Cn,toEl:ke,fromEl:ke}),pluginEvent("filter",Te,{evt:e}),Ue&&e.cancelable&&e.preventDefault();return}}else if(An&&(An=An.split(",").some(function(Sn){if(Sn=closest(En,Sn.trim(),ke,!1),Sn)return _dispatchEvent({sortable:Te,rootEl:Sn,name:"filter",targetEl:Cn,fromEl:ke,toEl:ke}),pluginEvent("filter",Te,{evt:e}),!0}),An)){Ue&&e.cancelable&&e.preventDefault();return}Be.handle&&!closest(En,Be.handle,ke,!1)||this._prepareDragStart(e,We,Cn)}}},_prepareDragStart:function(e,Te,ke){var Be=this,Ue=Be.el,He=Be.options,We=Ue.ownerDocument,Cn;if(ke&&!dragEl&&ke.parentNode===Ue){var En=getRect(ke);if(rootEl=Ue,dragEl=ke,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=ke,activeGroup=He.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(Te||e).clientX,clientY:(Te||e).clientY},tapDistanceLeft=tapEvt.clientX-En.left,tapDistanceTop=tapEvt.clientY-En.top,this._lastX=(Te||e).clientX,this._lastY=(Te||e).clientY,dragEl.style["will-change"]="all",Cn=function(){if(pluginEvent("delayEnded",Be,{evt:e}),Sortable.eventCanceled){Be._onDrop();return}Be._disableDelayedDragEvents(),!FireFox&&Be.nativeDraggable&&(dragEl.draggable=!0),Be._triggerDragStart(e,Te),_dispatchEvent({sortable:Be,name:"choose",originalEvent:e}),toggleClass(dragEl,He.chosenClass,!0)},He.ignore.split(",").forEach(function(An){find(dragEl,An.trim(),_disableDraggable)}),on(We,"dragover",nearestEmptyInsertDetectEvent),on(We,"mousemove",nearestEmptyInsertDetectEvent),on(We,"touchmove",nearestEmptyInsertDetectEvent),on(We,"mouseup",Be._onDrop),on(We,"touchend",Be._onDrop),on(We,"touchcancel",Be._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),He.delay&&(!He.delayOnTouchOnly||Te)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(We,"mouseup",Be._disableDelayedDrag),on(We,"touchend",Be._disableDelayedDrag),on(We,"touchcancel",Be._disableDelayedDrag),on(We,"mousemove",Be._delayedDragTouchMoveHandler),on(We,"touchmove",Be._delayedDragTouchMoveHandler),He.supportPointer&&on(We,"pointermove",Be._delayedDragTouchMoveHandler),Be._dragStartTimer=setTimeout(Cn,He.delay)}else Cn()}},_delayedDragTouchMoveHandler:function(e){var Te=e.touches?e.touches[0]:e;Math.max(Math.abs(Te.clientX-this._lastX),Math.abs(Te.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,Te){Te=Te||e.pointerType=="touch"&&e,!this.nativeDraggable||Te?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):Te?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,Te){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:Te}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var ke=this.options;!e&&toggleClass(dragEl,ke.dragClass,!1),toggleClass(dragEl,ke.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:Te})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),Te=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==Te);)Te=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),Te)do{if(Te[expando]){var ke=void 0;if(ke=Te[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:Te}),ke&&!this.options.dragoverBubble)break}e=Te}while(Te=getParentOrHost(Te));_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var Te=this.options,ke=Te.fallbackTolerance,Be=Te.fallbackOffset,Ue=e.touches?e.touches[0]:e,He=ghostEl&&matrix(ghostEl,!0),We=ghostEl&&He&&He.a,Cn=ghostEl&&He&&He.d,En=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),An=(Ue.clientX-tapEvt.clientX+Be.x)/(We||1)+(En?En[0]-ghostRelativeParentInitialScroll[0]:0)/(We||1),Sn=(Ue.clientY-tapEvt.clientY+Be.y)/(Cn||1)+(En?En[1]-ghostRelativeParentInitialScroll[1]:0)/(Cn||1);if(!Sortable.active&&!awaitingDragStarted){if(ke&&Math.max(Math.abs(Ue.clientX-this._lastX),Math.abs(Ue.clientY-this._lastY))<ke)return;this._onDragStart(e,!0)}if(ghostEl){He?(He.e+=An-(lastDx||0),He.f+=Sn-(lastDy||0)):He={a:1,b:0,c:0,d:1,e:An,f:Sn};var Tn="matrix(".concat(He.a,",").concat(He.b,",").concat(He.c,",").concat(He.d,",").concat(He.e,",").concat(He.f,")");css(ghostEl,"webkitTransform",Tn),css(ghostEl,"mozTransform",Tn),css(ghostEl,"msTransform",Tn),css(ghostEl,"transform",Tn),lastDx=An,lastDy=Sn,touchEvt=Ue}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,Te=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),ke=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),Te.top+=ghostRelativeParent.scrollTop,Te.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,ke.ghostClass,!1),toggleClass(ghostEl,ke.fallbackClass,!0),toggleClass(ghostEl,ke.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",Te.top),css(ghostEl,"left",Te.left),css(ghostEl,"width",Te.width),css(ghostEl,"height",Te.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,Te){var ke=this,Be=e.dataTransfer,Ue=ke.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),ke.cloneId=_nextTick(function(){pluginEvent("clone",ke),!Sortable.eventCanceled&&(ke.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),ke._hideClone(),_dispatchEvent({sortable:ke,name:"clone"}))}),!Te&&toggleClass(dragEl,Ue.dragClass,!0),Te?(ignoreNextClick=!0,ke._loopId=setInterval(ke._emulateDragOver,50)):(off(document,"mouseup",ke._onDrop),off(document,"touchend",ke._onDrop),off(document,"touchcancel",ke._onDrop),Be&&(Be.effectAllowed="move",Ue.setData&&Ue.setData.call(ke,Be,dragEl)),on(document,"drop",ke),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,ke._dragStartId=_nextTick(ke._dragStarted.bind(ke,Te,e)),on(document,"selectstart",ke),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var Te=this.el,ke=e.target,Be,Ue,He,We=this.options,Cn=We.group,En=Sortable.active,An=activeGroup===Cn,Sn=We.sort,Tn=putSortable||En,Ln,Bn=this,ei=!1;if(_silent)return;function ti(sr,Cr){pluginEvent(sr,Bn,_objectSpread2({evt:e,isOwner:An,axis:Ln?"vertical":"horizontal",revert:He,dragRect:Be,targetRect:Ue,canSort:Sn,fromSortable:Tn,target:ke,completed:ri,onMove:function(wr,Li){return _onMove(rootEl,Te,dragEl,Be,wr,getRect(wr),e,Li)},changed:si},Cr))}function ni(){ti("dragOverAnimationCapture"),Bn.captureAnimationState(),Bn!==Tn&&Tn.captureAnimationState()}function ri(sr){return ti("dragOverCompleted",{insertion:sr}),sr&&(An?En._hideClone():En._showClone(Bn),Bn!==Tn&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:En.options.ghostClass,!1),toggleClass(dragEl,We.ghostClass,!0)),putSortable!==Bn&&Bn!==Sortable.active?putSortable=Bn:Bn===Sortable.active&&putSortable&&(putSortable=null),Tn===Bn&&(Bn._ignoreWhileAnimating=ke),Bn.animateAll(function(){ti("dragOverAnimationComplete"),Bn._ignoreWhileAnimating=null}),Bn!==Tn&&(Tn.animateAll(),Tn._ignoreWhileAnimating=null)),(ke===dragEl&&!dragEl.animated||ke===Te&&!ke.animated)&&(lastTarget=null),!We.dragoverBubble&&!e.rootEl&&ke!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!sr&&nearestEmptyInsertDetectEvent(e)),!We.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),ei=!0}function si(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,We.draggable),_dispatchEvent({sortable:Bn,name:"change",toEl:Te,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),ke=closest(ke,We.draggable,Te,!0),ti("dragOver"),Sortable.eventCanceled)return ei;if(dragEl.contains(e.target)||ke.animated&&ke.animatingX&&ke.animatingY||Bn._ignoreWhileAnimating===ke)return ri(!1);if(ignoreNextClick=!1,En&&!We.disabled&&(An?Sn||(He=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,En,dragEl,e))&&Cn.checkPut(this,En,dragEl,e))){if(Ln=this._getDirection(e,ke)==="vertical",Be=getRect(dragEl),ti("dragOverValid"),Sortable.eventCanceled)return ei;if(He)return parentEl=rootEl,ni(),this._hideClone(),ti("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),ri(!0);var ai=lastChild(Te,We.draggable);if(!ai||_ghostIsLast(e,Ln,this)&&!ai.animated){if(ai===dragEl)return ri(!1);if(ai&&Te===e.target&&(ke=ai),ke&&(Ue=getRect(ke)),_onMove(rootEl,Te,dragEl,Be,ke,Ue,e,!!ke)!==!1)return ni(),ai&&ai.nextSibling?Te.insertBefore(dragEl,ai.nextSibling):Te.appendChild(dragEl),parentEl=Te,si(),ri(!0)}else if(ai&&_ghostIsFirst(e,Ln,this)){var li=getChild(Te,0,We,!0);if(li===dragEl)return ri(!1);if(ke=li,Ue=getRect(ke),_onMove(rootEl,Te,dragEl,Be,ke,Ue,e,!1)!==!1)return ni(),Te.insertBefore(dragEl,li),parentEl=Te,si(),ri(!0)}else if(ke.parentNode===Te){Ue=getRect(ke);var Pi=0,pi,vi=dragEl.parentNode!==Te,Ri=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||Be,ke.animated&&ke.toRect||Ue,Ln),Fi=Ln?"top":"left",di=isScrolledPast(ke,"top","top")||isScrolledPast(dragEl,"top","top"),ci=di?di.scrollTop:void 0;lastTarget!==ke&&(pi=Ue[Fi],pastFirstInvertThresh=!1,isCircumstantialInvert=!Ri&&We.invertSwap||vi),Pi=_getSwapDirection(e,ke,Ue,Ln,Ri?1:We.swapThreshold,We.invertedSwapThreshold==null?We.swapThreshold:We.invertedSwapThreshold,isCircumstantialInvert,lastTarget===ke);var Mi;if(Pi!==0){var Oi=index(dragEl);do Oi-=Pi,Mi=parentEl.children[Oi];while(Mi&&(css(Mi,"display")==="none"||Mi===ghostEl))}if(Pi===0||Mi===ke)return ri(!1);lastTarget=ke,lastDirection=Pi;var Hi=ke.nextElementSibling,Ki=!1;Ki=Pi===1;var or=_onMove(rootEl,Te,dragEl,Be,ke,Ue,e,Ki);if(or!==!1)return(or===1||or===-1)&&(Ki=or===1),_silent=!0,setTimeout(_unsilent,30),ni(),Ki&&!Hi?Te.appendChild(dragEl):ke.parentNode.insertBefore(dragEl,Ki?Hi:ke),di&&scrollBy(di,0,ci-di.scrollTop),parentEl=dragEl.parentNode,pi!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(pi-getRect(ke)[Fi])),si(),ri(!0)}if(Te.contains(dragEl))return ri(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var Te=this.el,ke=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,ke.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,ke.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(Te,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!ke.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],Te,ke=this.el.children,Be=0,Ue=ke.length,He=this.options;Be<Ue;Be++)Te=ke[Be],closest(Te,He.draggable,this.el,!1)&&e.push(Te.getAttribute(He.dataIdAttr)||_generateId(Te));return e},sort:function(e,Te){var ke={},Be=this.el;this.toArray().forEach(function(Ue,He){var We=Be.children[He];closest(We,this.options.draggable,Be,!1)&&(ke[Ue]=We)},this),Te&&this.captureAnimationState(),e.forEach(function(Ue){ke[Ue]&&(Be.removeChild(ke[Ue]),Be.appendChild(ke[Ue]))}),Te&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,Te){return closest(e,Te||this.options.draggable,this.el,!1)},option:function(e,Te){var ke=this.options;if(Te===void 0)return ke[e];var Be=PluginManager.modifyOption(this,e,Te);typeof Be<"u"?ke[e]=Be:ke[e]=Te,e==="group"&&_prepareGroup(ke)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(Te){Te.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(Oe){Oe.dataTransfer&&(Oe.dataTransfer.dropEffect="move"),Oe.cancelable&&Oe.preventDefault()}function _onMove(Oe,e,Te,ke,Be,Ue,He,We){var Cn,En=Oe[expando],An=En.options.onMove,Sn;return window.CustomEvent&&!IE11OrLess&&!Edge?Cn=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(Cn=document.createEvent("Event"),Cn.initEvent("move",!0,!0)),Cn.to=e,Cn.from=Oe,Cn.dragged=Te,Cn.draggedRect=ke,Cn.related=Be||e,Cn.relatedRect=Ue||getRect(e),Cn.willInsertAfter=We,Cn.originalEvent=He,Oe.dispatchEvent(Cn),An&&(Sn=An.call(En,Cn,He)),Sn}function _disableDraggable(Oe){Oe.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(Oe,e,Te){var ke=getRect(getChild(Te.el,0,Te.options,!0)),Be=getChildContainingRectFromElement(Te.el,Te.options,ghostEl),Ue=10;return e?Oe.clientX<Be.left-Ue||Oe.clientY<ke.top&&Oe.clientX<ke.right:Oe.clientY<Be.top-Ue||Oe.clientY<ke.bottom&&Oe.clientX<ke.left}function _ghostIsLast(Oe,e,Te){var ke=getRect(lastChild(Te.el,Te.options.draggable)),Be=getChildContainingRectFromElement(Te.el,Te.options,ghostEl),Ue=10;return e?Oe.clientX>Be.right+Ue||Oe.clientY>ke.bottom&&Oe.clientX>ke.left:Oe.clientY>Be.bottom+Ue||Oe.clientX>ke.right&&Oe.clientY>ke.top}function _getSwapDirection(Oe,e,Te,ke,Be,Ue,He,We){var Cn=ke?Oe.clientY:Oe.clientX,En=ke?Te.height:Te.width,An=ke?Te.top:Te.left,Sn=ke?Te.bottom:Te.right,Tn=!1;if(!He){if(We&&targetMoveDistance<En*Be){if(!pastFirstInvertThresh&&(lastDirection===1?Cn>An+En*Ue/2:Cn<Sn-En*Ue/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)Tn=!0;else if(lastDirection===1?Cn<An+targetMoveDistance:Cn>Sn-targetMoveDistance)return-lastDirection}else if(Cn>An+En*(1-Be)/2&&Cn<Sn-En*(1-Be)/2)return _getInsertDirection(e)}return Tn=Tn||He,Tn&&(Cn<An+En*Ue/2||Cn>Sn-En*Ue/2)?Cn>An+En/2?1:-1:0}function _getInsertDirection(Oe){return index(dragEl)<index(Oe)?1:-1}function _generateId(Oe){for(var e=Oe.tagName+Oe.className+Oe.src+Oe.href+Oe.textContent,Te=e.length,ke=0;Te--;)ke+=e.charCodeAt(Te);return ke.toString(36)}function _saveInputCheckedState(Oe){savedInputChecked.length=0;for(var e=Oe.getElementsByTagName("input"),Te=e.length;Te--;){var ke=e[Te];ke.checked&&savedInputChecked.push(ke)}}function _nextTick(Oe){return setTimeout(Oe,0)}function _cancelNextTick(Oe){return clearTimeout(Oe)}documentExists&&on(document,"touchmove",function(Oe){(Sortable.active||awaitingDragStarted)&&Oe.cancelable&&Oe.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,Te){return!!closest(e,Te,e,!1)},extend:extend$1,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(Oe){return Oe[expando]};Sortable.mount=function(){for(var Oe=arguments.length,e=new Array(Oe),Te=0;Te<Oe;Te++)e[Te]=arguments[Te];e[0].constructor===Array&&(e=e[0]),e.forEach(function(ke){if(!ke.prototype||!ke.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(ke));ke.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),ke.utils)),PluginManager.mount(ke)})};Sortable.create=function(Oe,e){return new Sortable(Oe,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function Oe(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return Oe.prototype={dragStarted:function(Te){var ke=Te.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):ke.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(Te){var ke=Te.originalEvent;!this.options.dragOverBubble&&!ke.rootEl&&this._handleAutoScroll(ke)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(Te){this._handleAutoScroll(Te,!0)},_handleAutoScroll:function(Te,ke){var Be=this,Ue=(Te.touches?Te.touches[0]:Te).clientX,He=(Te.touches?Te.touches[0]:Te).clientY,We=document.elementFromPoint(Ue,He);if(touchEvt$1=Te,ke||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(Te,this.options,We,ke);var Cn=getParentAutoScrollElement(We,!0);scrolling&&(!pointerElemChangedInterval||Ue!==lastAutoScrollX||He!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var En=getParentAutoScrollElement(document.elementFromPoint(Ue,He),!0);En!==Cn&&(Cn=En,clearAutoScrolls()),autoScroll(Te,Be.options,En,ke)},10),lastAutoScrollX=Ue,lastAutoScrollY=He)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(We,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(Te,this.options,getParentAutoScrollElement(We,!1),!1)}}},_extends(Oe,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(Oe){clearInterval(Oe.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(Oe,e,Te,ke){if(e.scroll){var Be=(Oe.touches?Oe.touches[0]:Oe).clientX,Ue=(Oe.touches?Oe.touches[0]:Oe).clientY,He=e.scrollSensitivity,We=e.scrollSpeed,Cn=getWindowScrollingElement(),En=!1,An;scrollRootEl!==Te&&(scrollRootEl=Te,clearAutoScrolls(),scrollEl=e.scroll,An=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(Te,!0)));var Sn=0,Tn=scrollEl;do{var Ln=Tn,Bn=getRect(Ln),ei=Bn.top,ti=Bn.bottom,ni=Bn.left,ri=Bn.right,si=Bn.width,ai=Bn.height,li=void 0,Pi=void 0,pi=Ln.scrollWidth,vi=Ln.scrollHeight,Ri=css(Ln),Fi=Ln.scrollLeft,di=Ln.scrollTop;Ln===Cn?(li=si<pi&&(Ri.overflowX==="auto"||Ri.overflowX==="scroll"||Ri.overflowX==="visible"),Pi=ai<vi&&(Ri.overflowY==="auto"||Ri.overflowY==="scroll"||Ri.overflowY==="visible")):(li=si<pi&&(Ri.overflowX==="auto"||Ri.overflowX==="scroll"),Pi=ai<vi&&(Ri.overflowY==="auto"||Ri.overflowY==="scroll"));var ci=li&&(Math.abs(ri-Be)<=He&&Fi+si<pi)-(Math.abs(ni-Be)<=He&&!!Fi),Mi=Pi&&(Math.abs(ti-Ue)<=He&&di+ai<vi)-(Math.abs(ei-Ue)<=He&&!!di);if(!autoScrolls[Sn])for(var Oi=0;Oi<=Sn;Oi++)autoScrolls[Oi]||(autoScrolls[Oi]={});(autoScrolls[Sn].vx!=ci||autoScrolls[Sn].vy!=Mi||autoScrolls[Sn].el!==Ln)&&(autoScrolls[Sn].el=Ln,autoScrolls[Sn].vx=ci,autoScrolls[Sn].vy=Mi,clearInterval(autoScrolls[Sn].pid),(ci!=0||Mi!=0)&&(En=!0,autoScrolls[Sn].pid=setInterval((function(){ke&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var Hi=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*We:0,Ki=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*We:0;typeof An=="function"&&An.call(Sortable.dragged.parentNode[expando],Ki,Hi,Oe,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,Ki,Hi)}).bind({layer:Sn}),24))),Sn++}while(e.bubbleScroll&&Tn!==Cn&&(Tn=getParentAutoScrollElement(Tn,!1)));scrolling=En}},30),drop=function(e){var Te=e.originalEvent,ke=e.putSortable,Be=e.dragEl,Ue=e.activeSortable,He=e.dispatchSortableEvent,We=e.hideGhostForTarget,Cn=e.unhideGhostForTarget;if(Te){var En=ke||Ue;We();var An=Te.changedTouches&&Te.changedTouches.length?Te.changedTouches[0]:Te,Sn=document.elementFromPoint(An.clientX,An.clientY);Cn(),En&&!En.el.contains(Sn)&&(He("spill"),this.onSpill({dragEl:Be,putSortable:ke}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var Te=e.oldDraggableIndex;this.startIndex=Te},onSpill:function(e){var Te=e.dragEl,ke=e.putSortable;this.sortable.captureAnimationState(),ke&&ke.captureAnimationState();var Be=getChild(this.sortable.el,this.startIndex,this.options);Be?this.sortable.el.insertBefore(Te,Be):this.sortable.el.appendChild(Te),this.sortable.animateAll(),ke&&ke.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var Te=e.dragEl,ke=e.putSortable,Be=ke||this.sortable;Be.captureAnimationState(),Te.parentNode&&Te.parentNode.removeChild(Te),Be.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var LayerSwitcherDOM={_createDraggableElement:function(Oe,e){let Te=".GPlayerName";checkDsfr()&&(Te=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(Oe,{handle:Te,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(ke){e._onEndDragAndDropLayerClick(ke)}}):Sortable.create(Oe,{handle:Te,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(ke){e._onEndDragAndDropLayerClick(ke)}})},_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPlayerSwitcher"),Oe.className="GPwidget gpf-widget gpf-mobile-fullscreen gpf-widget-button",Oe},_createMainLayersShowElement:function(){var Oe=document.createElement("input");return Oe.id=this._addUID("GPshowLayersList"),Oe.type="checkbox",Oe},_createMainLayersElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPlayersList"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createMainLayersDivElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelBody gpf-panel__body_ls fr-modal__body",Oe},_createMainPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn fr-btn--tertiary",e.htmlFor=this._addUID("GPshowLayersList"),e.setAttribute("aria-label","Afficher/masquer le gestionnaire de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),document.getElementById(Oe._addUID("GPshowLayersList")).checked=Be,document.getElementById(Oe._addUID("GPshowLayersList")).checked&&(document.getElementById(Oe._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Oe._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),Oe.onShowLayerSwitcherClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),document.getElementById(Oe._addUID("GPshowLayersList")).checked&&(document.getElementById(Oe._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Oe._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),Oe.onShowLayerSwitcherClick(ke)}),e},_createMainCounterLayersElement:function(){var Oe=document.createElement("span");return Oe.id=this._addUID("GPlayerCounter"),Oe.className="GPlayerCounter",Oe.innerHTML="0",Oe},_createMainInfoElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPlayerInfoPanel"),Oe.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",Oe},_createMainInfoDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createLayersPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader gpf-panel__header_ls",Oe},_createLayersPanelIconElement:function(){var Oe=document.createElement("label");return Oe.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",Oe.title="Couches de données",Oe},_createLayersPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelTitle gpf-panel__title_ls",Oe.id=this._addUID("GPlayersHeaderTitle"),Oe.innerHTML="Couches de données",Oe},_createLayersPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible fr-mx-1w",Te.innerText="Fermer",e.appendChild(Te),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(Oe){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+Oe.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(Oe)),e.appendChild(this._createAdvancedToolShowElement(Oe)),e.appendChild(this._createAdvancedToolElement(Oe)),e},_createBasicToolElement:function(Oe){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+Oe.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(Oe)),e.appendChild(this._createBasicToolVisibilityElement(Oe)),e.appendChild(this._createBasicToolDragNDropElement(Oe)),e},_createBasicToolDragNDropElement:function(Oe){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+Oe.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop gpf-btn--tertiary fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0");var Te=this;return e.addEventListener?e.addEventListener("click",function(ke){Te._onStartDragAndDropLayerClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){Te._onStartDragAndDropLayerClick(ke)}),e},_createBasicToolNameElement:function(Oe){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+Oe.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=Oe.description||Oe.title,e.innerHTML=Oe.title,e},_createBasicToolVisibilityElement:function(Oe){var e=typeof Oe.visibility<"u"?Oe.visibility:!0,Te=document.createElement("button");Te.id=this._addUID("GPvisibilityPicto_ID_"+Oe.id),Te.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.title="Afficher/masquer la couche",Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",e),Te.setAttribute("type","button");var ke=this;return Te.addEventListener?Te.addEventListener("click",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),ke._onVisibilityLayerClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),ke._onVisibilityLayerClick(Be)}),Te},_createAdvancedToolShowElement:function(Oe){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+Oe.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var Te=this;return e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be);var Ue=document.getElementById(Te._addUID("GPadvancedTools_ID_"+Oe.id));Be?(Ue.classList.replace("GPelementVisible","GPelementHidden"),Ue.classList.replace("gpf-visible","gpf-hidden")):(Ue.classList.replace("GPelementHidden","GPelementVisible"),Ue.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(Oe){var e=document.createElement("div");e.id=this._addUID("GPadvancedTools_ID_"+Oe.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(Oe)),checkDsfr()&&e.appendChild(this._createAdvancedToolEditionElement(Oe)),e.appendChild(this._createAdvancedToolInformationElement(Oe));for(var Te=this._createAdvancedToolOpacityElement(Oe),ke=0;ke<Te.length;ke++)e.appendChild(Te[ke]);if(e.appendChild(this._createAdvancedToolExtentElement(Oe)),e.appendChild(this._createAdvancedToolGreyscaleElement(Oe)),checkDsfr()){var Be=document.createElement("button");Be.className="GPlayerAdvancedToolsContextual fr-btn gpf-btn gpf-btn--tertiary fr-btn--tertiary-no-outline",Be.setAttribute("aria-pressed",!1),Be.addEventListener?Be.addEventListener("click",function(He){var We=He.target.ariaPressed==="true";He.target.setAttribute("aria-pressed",!We)}):Be.attachEvent&&Be.attachEvent("onclick",function(He){var We=He.target.ariaPressed==="true";He.target.setAttribute("aria-pressed",!We)});var Ue=document.createElement("div");Ue.appendChild(this._createAdvancedToolDeleteElement(Oe,!0)),Ue.appendChild(this._createAdvancedToolInformationElement(Oe,!0)),Ue.appendChild(this._createAdvancedToolExtentElement(Oe,!0)),Ue.appendChild(this._createAdvancedToolGreyscaleElement(Oe,!0)),e.appendChild(Be),e.appendChild(Ue)}return e},_createAdvancedToolDeleteElement:function(Oe,e=!1){var Te=document.createElement("button");e?Te.id=this._addUID("GPremoveContextual_ID_"+Oe.id):Te.id=this._addUID("GPremove_ID_"+Oe.id),Te.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.title="Supprimer la couche",Te.layerId=Oe.id,e&&(Te.innerText="Supprimer"),Te.setAttribute("tabindex","0"),Te.setAttribute("type","button");var ke=this;return Te.addEventListener?Te.addEventListener("click",function(Be){ke._onDropLayerClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){ke._onDropLayerClick(Be)}),Te},_createAdvancedToolEditionElement:function(Oe){var e=document.createElement("button");e.id=this._addUID("GPedit_ID_"+Oe.id),e.className="GPlayerEdit gpf-btn gpf-btn-icon gpf-btn-icon-ls-edit fr-btn fr-btn--tertiary gpf-btn--tertiary",e.title="Editer la couche",e.layerId=Oe.id,e.setAttribute("tabindex","0"),e.setAttribute("type","button"),Oe.type!=="feature"&&(e.style.opacity="0",e.style.visibility="hidden");var Te=this;return e.addEventListener?e.addEventListener("click",function(ke){Te._onEditLayerClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){Te._onEditLayerClick(ke)}),e},_createAdvancedToolInformationElement:function(Oe,e=!1){var Te=document.createElement("button");e?Te.id=this._addUID("GPinfoContextual_ID_"+Oe.id):Te.id=this._addUID("GPinfo_ID_"+Oe.id),Te.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!Oe.title||!Oe.description)&&(Te.style.opacity="0",Te.style.visibility="hidden",e&&(Te.style.display="none")),Te.title="Informations/légende",Te.layerId=Oe.id,e&&(Te.innerText="Informations"),Te.setAttribute("tabindex","0"),Te.setAttribute("type","button");var ke=this;return Te.addEventListener?Te.addEventListener("click",function(Be){ke._onOpenLayerInfoClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){ke._onOpenLayerInfoClick(Be)}),Te},_createAdvancedToolGreyscaleElement:function(Oe,e=!1){var Te=document.createElement("button");e?Te.id=this._addUID("GPgreyscaleContextual_ID_"+Oe.id):Te.id=this._addUID("GPgreyscale_ID_"+Oe.id),Te.className="GPlayerGreyscale GPlayerGreyscaleOff gpf-btn gpf-btn-icon gpf-btn-icon-ls-greyscale fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.title="Noir et blanc",Te.layerId=Oe.id,e&&(Te.innerText="N&B"),Te.setAttribute("tabindex","0"),Te.setAttribute("type","button");var ke=this;return Te.addEventListener?Te.addEventListener("click",function(Be){ke._onToggleLayerGreyscaleClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){ke._onToggleLayerGreyscaleClick(Be)}),Te},_createAdvancedToolOpacityElement:function(Oe){var e=[],Te=document.createElement("div");Te.id=this._addUID("GPopacity_ID_"+Oe.id),Te.className="GPlayerOpacity fr-range fr-range--sm",Te.dataset.frJsRange="true",Te.title="Opacité";var ke=typeof Oe.opacity<"u"?Oe.opacity:1;ke=Math.round(ke*100),Te.style.setProperty("--progress-right",ke+"%");var Be=document.createElement("input");Be.id=this._addUID("GPopacityValueDiv_ID_"+Oe.id),Be.type="range",Be.value=ke,Be.ariaLabel="Opacité";var Ue=this;Be.addEventListener?Be.addEventListener("change",function(Cn){Ue._onChangeLayerOpacity(Cn)}):Be.attachEvent&&Be.attachEvent("onchange",function(Cn){Ue._onChangeLayerOpacity(Cn)}),Be.addEventListener?Be.addEventListener("input",function(Cn){Ue._onChangeLayerOpacity(Cn)}):Be.attachEvent&&Be.attachEvent("oninput",function(Cn){Ue._onChangeLayerOpacity(Cn)}),Te.appendChild(Be);var He=document.createElement("div");He.id=this._addUID("GPopacityValueDiv_ID_"+Oe.id),He.className="GPlayerOpacityValue";var We=document.createElement("span");return We.id=this._addUID("GPopacityValue_ID_"+Oe.id),We.className="gpf-range__output fr-range__output gpf-visible",We.innerHTML=ke+"%",He.appendChild(We),e.push(Te),e.push(He),e},_createAdvancedToolExtentElement:function(Oe,e=!1){var Te=document.createElement("button");e?Te.id=this._addUID("GPextentContextual_ID_"+Oe.id):Te.id=this._addUID("GPextent_ID_"+Oe.id),Te.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.title="Zoomer dans l'étendue",Te.layerId=Oe.id,e&&(Te.innerText="Zoomer"),Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!0),Te.setAttribute("type","button");var ke=this;return Te.addEventListener?Te.addEventListener("click",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),ke._onZoomToExtentClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),ke._onZoomToExtentClick(Be)}),Te},_createContainerLayerInfoElement:function(Oe){var e=document.createElement("div"),Te=document.createElement("div");Te.className="gpf-panel__header_ls",e.appendChild(Te);var ke=document.createElement("label");ke.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",ke.title="Informations",Te.appendChild(ke);var Be=document.createElement("div");Be.id=this._addUID("GPlayerInfoTitle"),Be.innerHTML=Oe.title,Be.className="gpf-panel__title_ls",Te.appendChild(Be);var Ue=document.createElement("button");Ue.id=this._addUID("GPlayerInfoClose"),Ue.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ue.title="Fermer la fenêtre";var He=this,We=function(){document.getElementById(He._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(He._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Oe.id).classList.add("GPlayerInfoClosed"),document.getElementById(Oe.id).classList.remove("GPlayerInfoOpened")};Ue.addEventListener?Ue.addEventListener("click",We):Ue.attachEvent&&Ue.attachEvent("onclick",We),this.addEventListener("layerswitcher:remove",Mi=>{parseInt(Oe.id.split("-")[0].split("GPinfo_ID_")[1])===Mi.layer.id&&(document.getElementById(He._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(He._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"))}),Te.appendChild(Ue),e.appendChild(Te);var Cn=document.createElement("div");if(Cn.id=this._addUID("GPlayerInfoContent"),Cn.className="gpf-panel__content fr-modal__content",e.appendChild(Cn),Oe.quicklookUrl){var En=document.createElement("div");En.id=this._addUID("GPlayerInfoQuicklook"),En.title="Afficher un aperçu de la couche";var An=document.createElement("a");An.href=Oe.quicklookUrl,An.appendChild(En),Cn.appendChild(An)}var Sn=document.createElement("div");if(Sn.id=this._addUID("GPlayerInfoDescription"),Sn.innerHTML=Oe.description,Cn.appendChild(Sn),Oe.metadata){var Tn=document.createElement("div");Tn.id=this._addUID("GPlayerInfoMetadata");var Ln=document.createElement("div");Ln.className="GPlayerInfoSubtitle",Ln.innerHTML="Métadonnées",Tn.appendChild(Ln);for(var Bn=0;Bn<Oe.metadata.length;Bn++){var ei=Oe.metadata[Bn].url,ti=document.createElement("div");ti.className="GPlayerInfoLink";var ni=document.createElement("a");ni.href=ei,ni.innerHTML=ei,ti.appendChild(ni),Tn.appendChild(ti)}Oe.metadata.length!==0&&Cn.appendChild(Tn)}if(Oe.legends){var ri=document.createElement("div");ri.id=this._addUID("GPlayerInfoLegend");var si=document.createElement("div");si.className="GPlayerInfoSubtitle",si.innerHTML="Légende",ri.appendChild(si);for(var ai={},li=Oe.maxScaleDenominator||56e7,Pi=0;Pi<Oe.legends.length;Pi++){var pi=Oe.legends[Pi].minScaleDenominator;if(pi){var vi=pi.toString();pi=Math.round(parseInt(vi.substring(0,3),10)/10)*Math.pow(10,vi.length-2)}else pi=270;ai[pi]=Oe.legends[Pi]}for(var Ri in ai)if(ai.hasOwnProperty(Ri)){var Fi=ai[Ri].url;if(typeof Fi=="string"&&Fi.toLowerCase().indexOf("nolegend.jpg")===-1){var di=document.createElement("div");di.className="GPlayerInfoLink",li=ai[Ri].maxScaleDenominator||li;var ci=document.createElement("a");ci.className="fr-link",ci.href=Fi,ci.target="_blank",ci.innerHTML="Du 1/"+Ri+" au 1/"+li,di.appendChild(ci),ri.appendChild(di)}else delete ai[Ri]}Object.keys(ai).length!==0&&Cn.appendChild(ri)}return e}},logger$A=LoggerByDefault.getLogger("layerswitcher"),LayerSwitcher=class Wf extends ControlExtended{constructor(e){e=e||{};var Te=e.options||{},ke=e.layers||[];if(super(Te),!(this instanceof Wf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(ke))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof Te!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(Te,ke),this.container=this._initContainer(Te),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",ke=>{var Be=ke.element,Ue;Be.hasOwnProperty("gpLayerId")?Ue=Be.gpLayerId:(Ue=this._layerId,Be.gpLayerId=Ue,this._layerId++),this._layers[Ue]||this.addLayer(Be)}),this._listeners.onRemoveListener=e.getLayers().on("remove",ke=>{var Be=ke.element,Ue=Be.gpLayerId;this._layers[Ue]&&this.removeLayer(Be)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var Te=this._layersOrder.length-1;Te>=0;Te--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}addLayer(e,Te){var ke=this.getMap();if(Te=Te||{},!e){logger$A.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var Be=e.gpLayerId;if(typeof Be>"u"){logger$A.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var Ue=!1;if(ke.getLayers().forEach(ti=>{ti.gpLayerId===Be&&(Ue=!0)}),!Ue){logger$A.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[Be]){for(var Tn in Te)Te.hasOwnProperty(Tn)&&(this._layers[Be][Tn]=Te[Tn]);if(Te.title){var Ln=document.getElementById(this._addUID("GPname_ID_"+Be));Ln&&(Ln.innerHTML=Te.title,Ln.title=Te.description||Te.title)}var Bn=document.getElementById(this._addUID("GPinfo_ID_"+Be));if(!document.getElementById(this._addUID("GPinfo_ID_"+Be))&&Te.description){var ei=document.getElementById(this._addUID("GPadvancedTools_ID_"+Be));ei&&ei.appendChild(this._createAdvancedToolInformationElement({id:Be}))}Bn&&Bn.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var He=this.getLayerInfo(e)||{},We=e.getOpacity(),Cn=e.getVisible(),En=this.isInRange(e,ke),An={layer:e,id:Be,name:e.name,service:e.service,type:"",opacity:We??1,visibility:Cn??!0,inRange:En??!0,title:Te.title!=null?Te.title:He._title||Be,description:Te.description||He._description||null,legends:Te.legends||He._legends||[],metadata:Te.metadata||He._metadata||[],quicklookUrl:Te.quicklookUrl||He._quicklookUrl||null};this._layers[Be]=An;var Sn=this._createLayerDiv(An);this._layers[Be].div=Sn,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(An),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(Sn,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",ti=>this._updateLayerOpacity(ti)),this._listeners.updateLayerVisibility=e.on("change:visible",ti=>this._updateLayerVisibility(ti)),this._layers[Be].onZIndexChangeEvent==null&&(this._layers[Be].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[Be]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$A.trace(e);var Te=e.gpLayerId,ke=document.getElementById(this._addUID("GPinfo_ID_"+Te));ke&&ke.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var Be=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+Te));Be&&this._layerListContainer.removeChild(Be);var Ue=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(Ue,1),this._lastZIndex--;for(var He=this._layersOrder,We=0;We<He.length;We++)He[We].layer.setZIndex(this._lastZIndex-We);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[Te]}),delete this._layers[Te],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$A.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var Te=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&Te||!e&&!Te||(Te||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,Te){if(e){var ke=e.gpLayerId;if(ke==null){logger$A.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var Be=document.getElementById(this._addUID("GPremove_ID_"+ke));Be&&(Te===!1?Be.style.display="none":Te===!0&&(Be.style.display="block"))}}getContainer(){return this.container}_initialize(e,Te){this.options={id:"",collapsed:!0,draggable:!1,counter:!1,panel:!1,gutter:!1,allowEdit:!1},Helper.assign(this.options,e),this.options.layers=Te,this._uid=this.options.id||SelectorID.generate(),this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=this.options.collapsed!==void 0?this.options.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var ke=0;ke<Te.length;ke++){var Be=Te[ke].layer;if(Be){var Ue;Be.hasOwnProperty("gpLayerId")?Ue=Be.gpLayerId:(Ue=this._layerId,Be.gpLayerId=Ue,this._layerId++);var He=Te[ke].config||{},We=Be.getOpacity(),Cn=Be.getVisible(),En={layer:Be,id:Ue,name:Be.name,service:Be.service,opacity:We??1,visibility:Cn??!0,title:He.title!=null?He.title:He.id?He.id:Ue,description:He.description||null,legends:He.legends||[],metadata:He.metadata||[],quicklookUrl:He.quicklookUrl||null};this._layers[Ue]=En}}}_initContainer(){var e=this._createMainContainerElement(),Te=this._createMainLayersShowElement();e.appendChild(Te),this.collapsed?this.collapsed=!0:(Te.checked="checked",this.collapsed=!1);var ke=this,Be=function(ei){this.collapsed=!ei.target.checked,this.dispatchEvent("change:collapsed")};Te.addEventListener("click",function(ei){Be.call(ke,ei)});var Ue=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(Ue),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var He=this._layerSwitcherCounter=this._createMainCounterLayersElement();Ue.appendChild(He)}var We=this._createMainLayersElement();if(e.appendChild(We),this.options.panel){var Cn=this._createLayersPanelHeaderElement();We.appendChild(Cn);var En=this._createLayersPanelIconElement();Cn.appendChild(En);var An=this._createLayersPanelTitleElement();Cn.appendChild(An);var Sn=this._createLayersPanelCloseElement();Cn.appendChild(Sn)}var Tn=this._layerListContainer=this._createMainLayersDivElement();We.appendChild(Tn),this._createDraggableElement(Tn,this);var Ln=this._createMainInfoElement(),Bn=this._createMainInfoDivElement();return Ln.appendChild(Bn),e.appendChild(Ln),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(Cn=>{var En=null;Cn.hasOwnProperty("gpLayerId")?En=Cn.gpLayerId:(En=this._layerId,Cn.gpLayerId=En,this._layerId++);var An=this.getLayerInfo(Cn)||{};if(this._layers[En])this._layers[En].opacity=Cn.getOpacity(),this._layers[En].visibility=Cn.getVisible(),this._layers[En].inRange=this.isInRange(Cn,e);else{var Sn=Cn.getOpacity(),Tn=Cn.getVisible(),Ln=this.isInRange(Cn,e),Bn={layer:Cn,id:En,name:Cn.name,service:Cn.service,opacity:Sn??1,visibility:Tn??!0,inRange:Ln??!0,title:An._title||En,description:An._description||null,legends:An._legends||[],metadata:An._metadata||[],quicklookUrl:An._quicklookUrl||null};this._layers[En]=Bn}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=Cn.on("change:opacity",ti=>this._updateLayerOpacity(ti)),this._listeners._updateLayerVisibility=Cn.on("change:visible",ti=>this._updateLayerVisibility(ti)),Cn.getZIndex!==void 0){var ei=Cn.getZIndex()||0;(!this._layersIndex[ei]||!Array.isArray(this._layersIndex[ei]))&&(this._layersIndex[ei]=[]),this._layersIndex[ei].push(this._layers[En])}});for(var Te in this._layersIndex)if(this._layersIndex.hasOwnProperty(Te))for(var ke=this._layersIndex[Te],Be=0;Be<ke.length;Be++)this._layersOrder.unshift(ke[Be]),this._lastZIndex++,ke[Be].layer.setZIndex(this._lastZIndex),this._layers[ke[Be].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[ke[Be].layer.gpLayerId].onZIndexChangeEvent=ke[Be].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var Ue=0;Ue<this._layersOrder.length;Ue++){var He=this._layersOrder[Ue],We=this._createLayerDiv(He);this._layerListContainer.querySelector("#"+We.id)||this._layerListContainer.appendChild(We),this._layers[He.id].div=We}}_createLayerDiv(e){var Te=e.legends&&e.legends.length!==0,ke=e.metadata&&e.metadata.length!==0,Be=e.quicklookUrl;(Te||ke||Be)&&(e.displayInformationElement=!0),e.type="",this.options.allowEdit&&(e.layer instanceof VectorLayer||e.layer instanceof VectorTileLayer)&&(e.type="feature");var Ue=this._createContainerLayerElement(e);return e.inRange||Ue.classList.add("outOfRange"),Ue}onShowLayerSwitcherClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this._showLayerSwitcherButton.ariaPressed;this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var Te=e.target.id,ke=SelectorID.index(Te),Be=this._layers[ke].layer,Ue=e.target.value,He=document.getElementById(this._addUID("GPopacityValue_ID_"+ke));He.innerHTML=Ue+"%",Be.setOpacity(Ue/100)}_updateLayerOpacity(e){var Te=e.target.getOpacity();Te>1&&(Te=1),Te<0&&(Te=0);var ke=e.target.gpLayerId,Be=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+ke));Be&&(Be.value=Math.round(Te*100));var Ue=document.getElementById(this._addUID("GPopacityValue_ID_"+ke));Ue&&(Ue.innerHTML=Math.round(Te*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:Te,layer:this._layers[ke]})}_onVisibilityLayerClick(e){var Te=e.target.id,ke=SelectorID.index(Te),Be=this._layers[ke].layer;Be.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var Te=e.target.getVisible(),ke=e.target.gpLayerId,Be=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+ke));Be&&(Be.ariaPressed=Te),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:Te,layer:this._layers[ke]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var Te,ke;e.getLayers().forEach(En=>{ke=En.gpLayerId,unByKey(this._layers[ke].onZIndexChangeEvent),this._layers[ke].onZIndexChangeEvent=null,Te=null,En.getZIndex!==void 0&&(Te=En.getZIndex(),(!this._layersIndex[Te]||!Array.isArray(this._layersIndex[Te]))&&(this._layersIndex[Te]=[]),this._layersIndex[Te].push(this._layers[ke]))}),this._lastZIndex=0,this._layersOrder=[];for(var Be in this._layersIndex)if(this._layersIndex.hasOwnProperty(Be))for(var Ue=this._layersIndex[Be],He=0;He<Ue.length;He++)this._layersOrder.unshift(Ue[He]),this._lastZIndex++,this._layers[Ue[He].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[Ue[He].layer.gpLayerId].onZIndexChangeEvent=Ue[He].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let En=0;En<this._layerListContainer.childNodes.length;En++){const An=this._layerListContainer.childNodes[En];An.id!==""&&An.remove()}for(var We=0;We<this._layersOrder.length;We++){var Cn=this._layersOrder[We];this._layerListContainer.appendChild(Cn.div)}}else logger$A.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var Te=e.target.id,ke=SelectorID.index(Te),Be=this._layers[ke],Ue,He,We=document.getElementById(e.target.id);if(We.classList.contains("GPlayerInfoOpened")){We.classList.remove("GPlayerInfoOpened"),We.classList.add("GPlayerInfoClosed"),Ue=document.getElementById(this._addUID("GPlayerInfoPanel")),Ue.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),Ue.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),He=document.getElementById(this._addUID("GPlayerInfoContent")),He&&He.parentNode.remove();return}We.classList.contains("GPlayerInfoClosed")&&(We.classList.remove("GPlayerInfoClosed"),We.classList.add("GPlayerInfoOpened")),Ue=document.getElementById(this._addUID("GPlayerInfoPanel")),Ue.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),Ue.classList.add("GPlayerInfoPanelOpened","gpf-visible"),He=document.getElementById(this._addUID("GPlayerInfoContent")),He&&He.parentNode.remove();var Cn={id:Te,title:Be.title,description:Be.description,quicklookUrl:Be.quicklookUrl,metadata:Be.metadata,legends:Be.legends},En=Be.layer.getMaxResolution();En===1/0?Cn._maxScaleDenominator=56e7:Cn._maxScaleDenominator=Math.round(En/28e-5);var An=this._createContainerLayerInfoElement(Cn);Ue.firstChild.appendChild(An)}_onDropLayerClick(e){var Te=e.target.id,ke=SelectorID.index(Te),Be=this._layers[ke].layer;this.getMap().getLayers().remove(Be)}_onEditLayerClick(e){var Te=e.target.id,ke=SelectorID.index(Te),Be=this._layers[ke],Ue=this._layers[ke].layer;this.dispatchEvent({type:"layerswitcher:edit",layer:Ue,options:Be})}_onEndDragAndDropLayerClick(e){logger$A.trace(e);var Te=this.getMap(),ke=document.querySelectorAll("div.GPlayerSwitcher_layer"),Be=ke.length;this._layersOrder=[];for(var Ue=0;Ue<ke.length;Ue++){var He=ke[Ue].id,We=SelectorID.index(He),Cn=this._layers[We].layer;unByKey(this._layers[We].onZIndexChangeEvent),this._layers[We].onZIndexChangeEvent=null,Cn.setZIndex&&(Cn.setZIndex(Be),this._layersOrder.push(this._layers[We]),Be--),this._layers[We].onZIndexChangeEvent==null&&(this._layers[We].onZIndexChangeEvent=Cn.on("change:zIndex",()=>this._updateLayersOrder()))}Te.updateSize(),this.dispatchEvent({type:"layerswitcher:change:position",position:e.newIndex,layer:this._layersOrder[e.newIndex],layers:this._layersOrder})}_onStartDragAndDropLayerClick(e){logger$A.debug(e)}_onToggleLayerGreyscaleClick(e){function Te(ti){ti.crossOrigin="anonymous";var ni=document.createElement("canvas"),ri=ni.getContext("2d");ti.width=ti.width||256,ti.height=ti.height||256,ni.width=ti.width,ni.height=ti.height,ri.drawImage(ti,0,0);for(var si=ri.getImageData(0,0,ti.width,ti.height),ai=si.data,li=0;li<ai.length;li+=4){var Pi=(ai[li]+ai[li+1]+ai[li+2])/3;ai[li]=Pi,ai[li+1]=Pi,ai[li+2]=Pi}return ri.putImageData(si,0,0),ni.toDataURL()}function ke(ti,ni){var ri=Te(ti);ti.src="",ti.src=ri}function Be(ti){ti.image.getImage().crossOrigin="Anonymous"}function Ue(ti){ti.tile.getImage().crossOrigin="Anonymous"}function He(ti){ke(ti.image.getImage(),ti.target)}function We(ti){ke(ti.tile.getImage(),ti.target)}function Cn(ti){if(!ti||typeof ti!="string"||!ti.startsWith("#"))return ti;const ni=parseInt(ti.slice(1,3),16),ri=parseInt(ti.slice(3,5),16),si=parseInt(ti.slice(5,7),16),li=Math.round(.3*ni+.59*ri+.11*si).toString(16).padStart(2,"0");return`#${li}${li}${li}`}async function En(ti,ni){const si=await(await fetch(ni)).json();si.layers.forEach(ai=>{ai.paint&&Object.keys(ai.paint).forEach(li=>{let Pi=ai.paint[li];if(Array.isArray(Pi)&&Pi[0]==="interpolate"&&Pi[2]==="zoom")for(let pi=4;pi<Pi.length;pi+=2)Pi[pi]=Cn(Pi[pi]);else if(Array.isArray(Pi)&&Pi[0]==="step")for(let pi=2;pi<Pi.length;pi+=2)Pi[pi]=Cn(Pi[pi]);else if(Pi instanceof Object&&Pi.stops)for(let pi=0;pi<Pi.stops.length;pi+=1)Pi.stops[pi][1]=Cn(Pi.stops[pi][1]);else ai.paint[li]=Cn(Pi)})}),applyStyle(ti,si)}async function An(ti,ni){const si=await(await fetch(ni)).json();applyStyle(ti,si)}var Sn=e.target.id,Tn=SelectorID.index(Sn),Ln=this._layers[Tn].layer,Bn=Ln.getSource();if(!(Bn instanceof TileWMS||Bn instanceof WMTS$1||Bn instanceof VectorTile)){console.warn("Greyscale only implemented for raster and vector tiles");return}var ei=!0;e.target.classList.contains("GPlayerGreyscaleOff")?(e.target.classList.remove("GPlayerGreyscaleOff"),e.target.classList.add("GPlayerGreyscaleOn")):(e.target.classList.add("GPlayerGreyscaleOff"),e.target.classList.remove("GPlayerGreyscaleOn"),ei=!1),ei?Bn instanceof VectorTile?En(Ln,Ln.styleUrl):Bn instanceof TileWMS?(Bn.loadstartListenerKey=Bn.on("imageloadstart",Be),Bn.loadendListenerKey=Bn.on("imageloadend",He)):(Bn.loadstartListenerKey=Bn.on("tileloadstart",Ue),Bn.loadendListenerKey=Bn.on("tileloadend",We)):Bn instanceof VectorTile?An(Ln,Ln.styleUrl):(unByKey(Bn.loadstartListenerKey),unByKey(Bn.loadendListenerKey),Bn.loadstartListenerKey=null,Bn.loadendListenerKey=null),Bn instanceof VectorTile||Bn.refresh()}_onZoomToExtentClick(e){logger$A.debug(e);var Te=e.target.id,ke=SelectorID.index(Te),Be=this._layers[ke],Ue=null,He=null,We=this.getMap();if(Be.layer.hasOwnProperty("gpResultLayerId")&&(Be.layer.gpResultLayerId.split(":")[0]==="layerimport"||Be.layer.gpResultLayerId.split(":")[0]==="drawing"||Be.layer.gpResultLayerId.split(":")[0]==="compute"||Be.layer.gpResultLayerId.split(":")[0]==="bookmark")){if(We.getView()&&We.getSize()){var Cn=Be.layer.getExtent();if(!Cn){var En=Be.layer.getSource();En&&En.getExtent?Cn=En.getExtent():Cn=En.getTileGrid().getExtent()}Cn&&Cn[0]!==1/0&&We.getView().fit(Cn,We.getSize())}}else try{if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var An=Be.layer.name||Be.layer.getSource().name,Sn=Be.layer.service||Be.layer.getSource().service,Tn=Config.configuration.getLayerId(An,Sn);if(!Tn)throw"ERROR : Layer ID not found into the catalogue !?";var Ln=Config.configuration.getGlobalConstraints(Tn);if(Ln){if(!We||!We.getView())return;var Bn=We.getView(),ei=Bn.getProjection(),ti=[Ln.extent.left,Ln.extent.bottom,Ln.extent.right,Ln.extent.top],ni=Ln.crs;ni||(ni="EPSG:4326"),Ue=transformExtent(ti,ni,ei),Ue&&Bn.fit(Ue)}}catch(ri){He=ri}this.dispatchEvent({type:"layerswitcher:extent",extent:Ue,layer:Be,error:He})}_onMapMoveEnd(e){e.getLayers().forEach(Te=>{var ke=Te.gpLayerId;if(this._layers[ke]){var Be=this._layers[ke],Ue;this.isInRange(Te,e)&&!Be.inRange?(Be.inRange=!0,Ue=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+ke)),Ue.classList.remove("outOfRange")):!this.isInRange(Te,e)&&Be.inRange&&(Be.inRange=!1,Ue=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+ke)),Ue.classList.add("outOfRange"))}})}getLayerDOMId(e){var Te=null;return this.getMap().getLayers().forEach(ke=>{ke===e&&(Te=ke.hasOwnProperty("gpLayerId")?ke.gpLayerId:null)}),Te!==null?this._addUID("GPlayerSwitcher_ID_"+Te):null}isInRange(e,Te){if(Te){var ke=Te.getView().getResolution();if(ke>e.getMaxResolution()||ke<e.getMinResolution())return!1;var Be=Te.getView().calculateExtent(Te.getSize()),Ue=e.getExtent();return!(Ue&&!intersects$1(Be,Ue))}}getLayerInfo(e){var Te={};if(e.getProperties!==void 0&&e.getSource!==void 0){var ke=e.getProperties(),Be=ke.source;Be&&(Te._title=Be._title||ke.title||ke.id||"",Te._description=Be._description||ke.description||"",Te._quicklookUrl=Be._quicklookUrl||ke.quicklookUrl||"",Te._metadata=Be._metadata||ke.metadata||[],Te._legends=Be._legends||ke.legends||[])}return Te}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);Object.assign(LayerSwitcher.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);LoggerByDefault.getLogger("draggable");var Draggable={dragElement:function(Oe,e,Te){let ke=0,Be=0,Ue=0,He=0,We=0,Cn=0;e?e.addEventListener("mousedown",Sn,!0):Oe.addEventListener("mousedown",Sn,!0);var En,An={bottom:0,left:0,right:0,top:0};function Sn(Bn){Bn=Bn||window.event,Bn.preventDefault(),ke=Bn.clientX,Be=Bn.clientY,En=Oe.getBoundingClientRect();const ei=Te.getBoundingClientRect();An={bottom:ei.bottom,left:ei.left,right:ei.right,top:ei.top},document.addEventListener("mouseup",Tn,!0),document.addEventListener("mousemove",Ln,!0)}function Tn(){We-=Ue,Cn-=He,document.removeEventListener("mouseup",Tn,!0),document.removeEventListener("mousemove",Ln,!0)}function Ln(Bn){Bn=Bn||window.event;let ei=Bn.clientX,ti=Bn.clientY,ni=Ue,ri=He;Ue=ke-ei,He=Be-ti;var si=En.left-Ue,ai=En.top-He;if(si<An.left||ai<An.top||si+En.width>An.right||ai+En.height>An.bottom)Ue=ni,He=ri;else{let li=We-Ue,Pi=Cn-He;Oe.style.transform="translate("+li+"px,"+Pi+"px)"}}}};class AsyncData{constructor(e){this.data=e,this.subscribers=[]}subscribe(e){if(typeof e!="function")throw new Error("Callback must be a function");this.subscribers.push(e)}async set(e,Te){this.data[e]=Te;const ke=this.subscribers.map(async Be=>{await Be(e,Te)});await Promise.allSettled(ke)}get(e){return this.data[e]}}var GetFeatureInfoDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e},stringToHTML:function(Oe){var e=function(){if(!window.DOMParser)return!1;var Ue=new DOMParser;try{Ue.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var Te=new DOMParser,ke=Te.parseFromString(Oe,"text/html");return ke.body}var Be=document.createElement("div");return Be.innerHTML=Oe,Be},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPgetFeatureInfo"),Oe.className="GPgetFeatureInfo gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowGetFeatureInfoPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPgetFeatureInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPgetFeatureInfoPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-getfeatureinfo fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Activer/désactiver l'interrogation des couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowGetFeatureInfoClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowGetFeatureInfoClick(ke)}),e},_createGetFeatureInfoPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPgetFeatureInfoPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createGetFeatureInfoPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelBody gpf-panel__body fr-modal__body",Oe},_createGetFeatureInfoPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader gpf-panel__header fr-modal__header",Oe},_createGetFeatureInfoPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="GetFeatureInfo",Oe},_createGetFeatureInfoPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.className="GPpanelClose GPcloseGetFeatureInfo gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(ke){e.setAttribute("aria-pressed",!1),Oe.onCloseGetFeatureInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(ke){e.setAttribute("aria-pressed",!1),Oe.onCloseGetFeatureInfoClick()});var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e},_createGetFeatureInfoWaitingDiv:function(){var Oe=`
        <div class="waiting-div-container"><div class="lds-ring"><div></div><div></div><div></div><div></div></div><div>
        `;return Oe},_createGetFeatureInfoAccordionGroup:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPgetFeatureInfoAccordionGroup"),Oe.className="GPgetFeatureInfoAccordionGroup fr-accordions-group",Oe},_createGetFeatureInfoLayerAccordion:function(Oe){var e=this.stringToHTML(`
            <section class="fr-accordion">
                <h3 class="fr-accordion__title">
                    <button class="GPgfiLayerButton fr-accordion__btn" aria-expanded="false" aria-controls="accordion-${Oe}">
                        <span class="GPshowGfiLayerFeature"></span>
                        <span id="gfiLayerName">${Oe}</span>
                    </button>
                </h3>
                <div class="fr-collapse GPgetFeatureInfoAccordionContent GPelementHidden" id="accordion-${Oe}" style="margin:unset;">
                    ${this._createGetFeatureInfoWaitingDiv()}
                </div>
            </section>
        `),Te=e.firstChild,ke=Te.querySelector("button, button.fr-accordion__btn");return ke.addEventListener("click",Be=>{Be.currentTarget.ariaExpanded=Be.currentTarget.ariaExpanded!=="true";var Ue=document.getElementById(Be.currentTarget.getAttribute("aria-controls"));Be.currentTarget.ariaExpanded==="true"?(Ue.classList.add("fr-collapse--expanded"),Ue.classList.remove("GPelementHidden")):(Ue.classList.remove("fr-collapse--expanded"),Ue.classList.add("GPelementHidden"))}),Te}},logger$z=LoggerByDefault.getLogger("getFeatureInfo"),GetFeatureInfo=class Yf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Yf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="GetFeatureInfo",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(this.draggable&&Draggable.dragElement(this.panelGetFeatureInfoContainer,this.panelGetFeatureInfoHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonGetFeatureInfoShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):this.auto&&this.removeEventsListeners(),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonGetFeatureInfoShow=null,this.panelGetFeatureInfoContainer=null,this.getFeatureInfoPanelDiv=null,this.panelGetFeatureInfoHeaderContainer=null,this.buttonGetFeatureInfoClose=null,this.getFeatureInfoAccordionGroup=null,this.panelGetFeatureInfoEntriesContainer=null,this.eventsListeners=[],this.pixel=[],this.coordinates=[],this.layers=[],this.res=null}initContainer(){var e=this._createMainContainerElement(),Te=this.buttonGetFeatureInfoShow=this._createShowGetFeatureInfoPictoElement();e.appendChild(Te);var ke=this.panelGetFeatureInfoContainer=this._createGetFeatureInfoPanelElement(),Be=this.getFeatureInfoPanelDiv=this._createGetFeatureInfoPanelDivElement();ke.appendChild(Be);var Ue=this.panelGetFeatureInfoHeaderContainer=this._createGetFeatureInfoPanelHeaderElement(),He=this._createGetFeatureInfoPanelTitleElement();Ue.appendChild(He);var We=this.buttonGetFeatureInfoClose=this._createGetFeatureInfoPanelCloseElement();Ue.appendChild(We),Be.appendChild(Ue);var Cn=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();return Be.appendChild(Cn),e.appendChild(ke),logger$z.log(e),e}addEventsListeners(e){var Te=this;this.eventsListeners.singleclick=function(ke){logger$z.trace(ke),Te.onMapClick(ke)},e.on("singleclick",this.eventsListeners.singleclick)}removeEventsListeners(){var e=this.getMap();e.getLayers().un("singleclick",this.eventsListeners.singleclick),delete this.eventsListeners.singleclick}getFeatureInfoIsActive(){return this.buttonGetFeatureInfoShow.getAttribute("aria-pressed")}onMapClick(e){if(this.getFeatureInfoIsActive()==="true")if(this.getFeatureInfoAccordionGroup.remove(),this.layers=e.map.getLayers().getArray().filter(ke=>{if(ke.isVisible(e.map.getView())&&ke.getOpacity()>0)return ke}).sort((ke,Be)=>Be.getZIndex()-ke.getZIndex()),this.layers.length>0){var Te=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();this.getFeatureInfoPanelDiv.appendChild(Te),this.map=e.map,this.pixel=e.pixel,this.coordinates=e.coordinate,this.res=e.map.getView().getResolution(),this.displayGetFeatureInfo()}else return}getGetFeatureInfoLayer(e){var Te={};let ke=this.getLayerFormat(e);if(Te={format:ke,layer:e},ke==="wmts"){let Be=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFOFORMAT:"text/html",STYLES:""});Te={...Te,url:Be}}if(ke==="wms"){let Be=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFO_FORMAT:"text/html",STYLES:""});Te={...Te,url:Be}}return Te}getFeaturesAtClick(e){var Te=[];return this.getMap().forEachFeatureAtPixel(this.pixel,function(ke,Be){e==Be&&Te.push(ke)}),Te}async getGetFeatureInfoContent(e){var Te=null;if(e.format==="vector"){var ke=this.getFeaturesAtClick(e.layer);return ke&&(Te=this.features2html(ke)),Te}else return fetch(e.url).then(Be=>Be.text()).then(Be=>{var Ue=!1;if((Be.trim().length===0||Be.indexOf("ServiceExceptionReport")!==-1||Be.indexOf("java.lang.NullPointerException")!==-1||Be.indexOf("java.lang.OutOfMemoryError")!==-1||Be.indexOf("not queryable")!==-1||Be.indexOf("No data")!==-1||Be.indexOf("non interrogeable")!==-1)&&(Ue=!0),Ue)return null;var He=this.stringToHTML(Be);return He&&He.innerHTML&&He.innerHTML.trim().length>0?Be:null}).catch(Be=>(logger$z.log(Be),Be))}getLayerTitle(e){if(e.layer.getProperties!==void 0&&e.layer.getSource!==void 0){var Te=e.layer.getProperties(),ke=Te.source,Be="";ke&&(Be=ke._title||ke.name||Te.title||Te.name||ke.url_||"Couche de données")}return Be}displayGetFeatureInfo(){var e=this.layers.map(ke=>this.getGetFeatureInfoLayer(ke)),Te=e.map(ke=>{var Be=this.getLayerTitle(ke),Ue=null,He=this._createGetFeatureInfoLayerAccordion(Be);He.style.display="none";var We=!0;return new AsyncData({...ke,layername:Be,content:Ue,contentDiv:He,pending:We})});for(let ke=0;ke<Te.length;ke++)this.getFeatureInfoAccordionGroup.append(Te[ke].data.contentDiv);Te.forEach(ke=>{ke.subscribe((Be,Ue)=>{Be=="content"&&(ke.set("pending",!1),ke.get("content")?(ke.get("contentDiv").querySelector("div.fr-collapse").innerHTML=ke.get("content"),this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!0),ke.get("contentDiv").style.display="block"):ke.get("contentDiv").remove(),Te.filter(He=>He.get("pending")===!0).length==0&&Te.filter(He=>He.get("content")).length==0&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1))})}),Te.forEach(ke=>{this.getGetFeatureInfoContent(ke.data).then(Be=>{ke.set("content",Be)})})}getLayerFormat(e){var Te=typeof e.getType=="function"?e.getType():null,ke=e.getSource();if(Te){if(Te==="VECTOR"||Te==="VECTOR_TILE")return"vector";if(Te==="TILE")return ke.tileGrid?"wmts":"wms";if(Te==="IMAGE")return"wms"}else{if(ke instanceof TileWMS||ke instanceof ImageWMS)return"wms";if(ke instanceof WMTS$1)return"wmts";if(ke instanceof VectorSource||ke instanceof VectorTile)return"vector"}return"unknown"}features2html(e){var Te=document.createElement("div");return e.forEach(function(ke){var Be=ke.getProperties();if(Be.hasOwnProperty("render"))Te.insertAdjacentHTML("beforeend",Be.render);else{if(Be.hasOwnProperty("name")){var Ue=document.createElement("div");Ue.className="gp-att-name-div",Ue.insertAdjacentHTML("afterbegin",Be.name),Te.appendChild(Ue)}if(Be.hasOwnProperty("description")){var He=document.createElement("div");He.className="gp-att-description-div",He.insertAdjacentHTML("afterbegin",Be.description),Te.appendChild(He)}var We=null,Cn=!1,En=null,An=null,Sn=null,Tn=["fill","fill-opacity","label-fill","label-fill-opacity","label-stroke","label-stroke-opacity","label-stroke-width","label-font","label-textAlign","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(We in Be)if(Be[We]!==void 0&&Tn.indexOf(We)===-1){Cn||(En=document.createElement("div"),En.className="gp-att-others-div",An=document.createElement("ul"),Cn=!0),Sn=document.createElement("li");var Ln=document.createElement("span");Ln.className="gp-attname-others-span",Ln.appendChild(document.createTextNode(We+" : ")),Sn.appendChild(Ln),Sn.appendChild(document.createTextNode(Be[We])),An.appendChild(Sn)}An&&(En.appendChild(An),Te.appendChild(En))}}),Te.hasChildNodes()?Te=Te.innerHTML:Te="",Te}onShowGetFeatureInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),e.target.ariaPressed==="false"&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1),logger$z.trace(e)}onCloseGetFeatureInfoClick(e){logger$z.trace(e)}onGetFeatureInfoComputationSubmit(e){logger$z.trace(e)}};Object.assign(GetFeatureInfo.prototype,GetFeatureInfoDOM);Object.assign(GetFeatureInfo.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=GetFeatureInfo);var MathUtils={modulo:function(Oe,e){var Te=Oe%e;return Te*e<0?Te+e:Te},decimalToDMS:function(Oe,e,Te){var ke=this.modulo(Oe+180,360)-180,Be=Math.abs(3600*ke),Ue=Te||0,He=Math.pow(10,Ue),We=Math.floor(Be/3600),Cn=Math.floor((Be-We*3600)/60),En=Be-We*3600-Cn*60;En=Math.ceil(En*He)/He,En>=60&&(En=0,Cn+=1),Cn>=60&&(Cn=0,We+=1);var An=e.charAt(ke<0?1:0);return{d:We,m:Cn,s:En,direction:An}},dmsToDecimal(Oe,e,Te,ke){var Be=Oe+e/60+Te/3600;return(ke=="S"||ke=="O")&&(Be=Be*-1),Be},coordinateToDecimal(Oe){var e={};return e.lat=Oe[1].toFixed(6),e.lng=Oe[0].toFixed(6),e.unit="°",e},coordinateToDMS(Oe){return{lng:MathUtils.decimalToDMS(Oe[0],"EO",2),lat:MathUtils.decimalToDMS(Oe[1],"NS",2),unit:"DMS"}},coordinateToRad(Oe){var e={},Te=.017453292519943295;return e.lng=Oe[0]*Te,e.lng=e.lng.toFixed(8),e.lat=Oe[1]*Te,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(Oe){var e={},Te=1.1111111111111112;return e.lng=Oe[0]*Te,e.lng=e.lng.toFixed(8),e.lat=Oe[1]*Te,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(Oe){var e={};return e.x=Oe[0].toFixed(2),e.y=Oe[1].toFixed(2),e.unit="m",e},coordinateToKMeter(Oe){var e={};return e.x=(Oe[0]/1e3).toFixed(2),e.y=(Oe[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(Oe,e){var Te=e||10,ke=parseInt(Oe,Te);return!isNaN(ke)&&isFinite(ke)?ke:null},isInteger:function(Oe){if(isNaN(Oe))return!1;var e=parseFloat(Oe);return(e|0)===e},toFloat:function(Oe){var e=parseFloat(Oe);return!isNaN(e)&&isFinite(e)?e:null},convertSecondsToTime:function(Oe){var e="";Oe=Math.round(Oe);var Te=Math.floor(Oe/(60*60)),ke=Oe%(60*60),Be=Math.floor(ke/60);return Te&&(e=Te+"h "),e+=Be+" min",e},convertDistance:function(Oe){var e="",Te=parseInt(Oe/1e3,10);return Te?e=Te+" km":e=parseInt(Oe,10)+" m",e}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"q",title:"Chercher un lieu"},{name:"category",title:"Type",value:["cimetière","aérodrome","réservoir","administratif","construction linéaire","construction ponctuelle","construction surfacique","cours d'eau","détail hydrographique","détail orographique","équipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par câble","zone d'activité ou d'intérêt","zone d'habitation","lieu-dit non habité"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"address",title:"Adresse"},{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"}],CadastralParcel:[{name:"departmentcode",title:"Code département (INSEE)",description:"Code INSEE du département (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractères (chiffre et/ou lettre)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numéro de la feuille cadastrale"}]},zoomToResultsByDefault:function(Oe){var e=15,Te=Oe.service,ke=Oe.fields,Be=Oe.type,Ue={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return Te==="SuggestedLocation"&&Be==="PositionOfInterest"&&(e=Ue[ke.classification]),Te==="GeocodedLocation"&&Be==="PositionOfInterest"&&(e=Ue[ke.importance]||14),Be==="StreetAddress"&&(e=17),Be==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(Oe){var e=Oe.placeAttributes;if(e.label)return e.label;if(Oe.type==="PositionOfInterest"){var Te=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?Te=Te+", "+e.category[1]:e.postcode&&(Te=Te+", "+e.postcode[0],e.city&&(Te=Te+" "+e.city[0])),Te}else return Oe.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:Oe.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(Oe){if(Oe.fullText)return Oe.fullText;var e=[];return e.push(Oe.street||""),e.push(Oe.postalCode||""),e.push(Oe.commune||""),Oe.type==="PositionOfInterest"&&(e.push(Oe.poi||""),e.push(Oe.kind||"")),e.join(" - ")}};function globals(Oe){Oe("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),Oe("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),Oe("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)Oe("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),Oe("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");Oe.WGS84=Oe["EPSG:4326"],Oe["EPSG:3785"]=Oe["EPSG:3857"],Oe.GOOGLE=Oe["EPSG:3857"],Oe["EPSG:900913"]=Oe["EPSG:3857"],Oe["EPSG:102113"]=Oe["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(Oe,e){if(Oe[e])return Oe[e];for(var Te=Object.keys(Oe),ke=e.toLowerCase().replace(ignoredChar,""),Be=-1,Ue,He;++Be<Te.length;)if(Ue=Te[Be],He=Ue.toLowerCase().replace(ignoredChar,""),He===ke)return Oe[Ue]}function projStr(Oe){var e={},Te=Oe.split("+").map(function(We){return We.trim()}).filter(function(We){return We}).reduce(function(We,Cn){var En=Cn.split("=");return En.push(!0),We[En[0].toLowerCase()]=En[1],We},{}),ke,Be,Ue,He={proj:"projName",datum:"datumCode",rf:function(We){e.rf=parseFloat(We)},lat_0:function(We){e.lat0=We*D2R$1},lat_1:function(We){e.lat1=We*D2R$1},lat_2:function(We){e.lat2=We*D2R$1},lat_ts:function(We){e.lat_ts=We*D2R$1},lon_0:function(We){e.long0=We*D2R$1},lon_1:function(We){e.long1=We*D2R$1},lon_2:function(We){e.long2=We*D2R$1},alpha:function(We){e.alpha=parseFloat(We)*D2R$1},gamma:function(We){e.rectified_grid_angle=parseFloat(We)},lonc:function(We){e.longc=We*D2R$1},x_0:function(We){e.x0=parseFloat(We)},y_0:function(We){e.y0=parseFloat(We)},k_0:function(We){e.k0=parseFloat(We)},k:function(We){e.k0=parseFloat(We)},a:function(We){e.a=parseFloat(We)},b:function(We){e.b=parseFloat(We)},r:function(We){e.a=e.b=parseFloat(We)},r_a:function(){e.R_A=!0},zone:function(We){e.zone=parseInt(We,10)},south:function(){e.utmSouth=!0},towgs84:function(We){e.datum_params=We.split(",").map(function(Cn){return parseFloat(Cn)})},to_meter:function(We){e.to_meter=parseFloat(We)},units:function(We){e.units=We;var Cn=match(units,We);Cn&&(e.to_meter=Cn.to_meter)},from_greenwich:function(We){e.from_greenwich=We*D2R$1},pm:function(We){var Cn=match(exports$2,We);e.from_greenwich=(Cn||parseFloat(We))*D2R$1},nadgrids:function(We){We==="@null"?e.datumCode="none":e.nadgrids=We},axis:function(We){var Cn="ewnsud";We.length===3&&Cn.indexOf(We.substr(0,1))!==-1&&Cn.indexOf(We.substr(1,1))!==-1&&Cn.indexOf(We.substr(2,1))!==-1&&(e.axis=We)},approx:function(){e.approx=!0}};for(ke in Te)Be=Te[ke],ke in He?(Ue=He[ke],typeof Ue=="function"?Ue(Be):e[Ue]=Be):e[ke]=Be;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(Oe){if(typeof Oe!="string")throw new Error("not a string");this.text=Oe.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var Oe=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(Oe);){if(this.place>=this.text.length)return;Oe=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(Oe);case KEYWORD:return this.keyword(Oe);case QUOTED:return this.quoted(Oe);case AFTERQUOTE:return this.afterquote(Oe);case NUMBER:return this.number(Oe);case ENDED:return}};Parser.prototype.afterquote=function(Oe){if(Oe==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(Oe)){this.word=this.word.trim(),this.afterItem(Oe);return}throw new Error(`havn't handled "`+Oe+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(Oe){if(Oe===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(Oe==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(Oe){if(digets.test(Oe)){this.word+=Oe;return}if(endThings.test(Oe)){this.word=parseFloat(this.word),this.afterItem(Oe);return}throw new Error(`havn't handled "`+Oe+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(Oe){if(Oe==='"'){this.state=AFTERQUOTE;return}this.word+=Oe};Parser.prototype.keyword=function(Oe){if(keyword.test(Oe)){this.word+=Oe;return}if(Oe==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(Oe)){this.afterItem(Oe);return}throw new Error(`havn't handled "`+Oe+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(Oe){if(latin.test(Oe)){this.word=Oe,this.state=KEYWORD;return}if(Oe==='"'){this.word="",this.state=QUOTED;return}if(digets.test(Oe)){this.word=Oe,this.state=NUMBER;return}if(endThings.test(Oe)){this.afterItem(Oe);return}throw new Error(`havn't handled "`+Oe+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(Oe){var e=new Parser(Oe);return e.output()}function mapit(Oe,e,Te){Array.isArray(e)&&(Te.unshift(e),e=null);var ke=e?{}:Oe,Be=Te.reduce(function(Ue,He){return sExpr(He,Ue),Ue},ke);e&&(Oe[e]=Be)}function sExpr(Oe,e){if(!Array.isArray(Oe)){e[Oe]=!0;return}var Te=Oe.shift();if(Te==="PARAMETER"&&(Te=Oe.shift()),Oe.length===1){if(Array.isArray(Oe[0])){e[Te]={},sExpr(Oe[0],e[Te]);return}e[Te]=Oe[0];return}if(!Oe.length){e[Te]=!0;return}if(Te==="TOWGS84"){e[Te]=Oe;return}if(Te==="AXIS"){Te in e||(e[Te]=[]),e[Te].push(Oe);return}Array.isArray(Te)||(e[Te]={});var ke;switch(Te){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[Te]={name:Oe[0].toLowerCase(),convert:Oe[1]},Oe.length===3&&sExpr(Oe[2],e[Te]);return;case"SPHEROID":case"ELLIPSOID":e[Te]={name:Oe[0],a:Oe[1],rf:Oe[2]},Oe.length===4&&sExpr(Oe[3],e[Te]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":Oe[0]=["name",Oe[0]],mapit(e,Te,Oe);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":Oe[0]=["name",Oe[0]],mapit(e,Te,Oe),e[Te].type=Te;return;default:for(ke=-1;++ke<Oe.length;)if(!Array.isArray(Oe[ke]))return sExpr(Oe,e[Te]);return mapit(e,Te,Oe)}}var D2R=.017453292519943295,knownTypes=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rename(Oe,e){var Te=e[0],ke=e[1];!(Te in Oe)&&ke in Oe&&(Oe[Te]=Oe[ke],e.length===3&&(Oe[Te]=e[2](Oe[Te])))}function d2r(Oe){return Oe*D2R}function cleanWKT(Oe){for(var e=Object.keys(Oe),Te=0,ke=e.length;Te<ke;++Te){var Be=e[Te];knownTypes.indexOf(Be)!==-1&&setPropertiesFromWkt(Oe[Be]),typeof Oe[Be]=="object"&&cleanWKT(Oe[Be])}}function setPropertiesFromWkt(Oe){if(Oe.AUTHORITY){var e=Object.keys(Oe.AUTHORITY)[0];e&&e in Oe.AUTHORITY&&(Oe.title=e+":"+Oe.AUTHORITY[e])}if(Oe.type==="GEOGCS"?Oe.projName="longlat":Oe.type==="LOCAL_CS"?(Oe.projName="identity",Oe.local=!0):typeof Oe.PROJECTION=="object"?Oe.projName=Object.keys(Oe.PROJECTION)[0]:Oe.projName=Oe.PROJECTION,Oe.AXIS){for(var Te="",ke=0,Be=Oe.AXIS.length;ke<Be;++ke){var Ue=[Oe.AXIS[ke][0].toLowerCase(),Oe.AXIS[ke][1].toLowerCase()];Ue[0].indexOf("north")!==-1||(Ue[0]==="y"||Ue[0]==="lat")&&Ue[1]==="north"?Te+="n":Ue[0].indexOf("south")!==-1||(Ue[0]==="y"||Ue[0]==="lat")&&Ue[1]==="south"?Te+="s":Ue[0].indexOf("east")!==-1||(Ue[0]==="x"||Ue[0]==="lon")&&Ue[1]==="east"?Te+="e":(Ue[0].indexOf("west")!==-1||(Ue[0]==="x"||Ue[0]==="lon")&&Ue[1]==="west")&&(Te+="w")}Te.length===2&&(Te+="u"),Te.length===3&&(Oe.axis=Te)}Oe.UNIT&&(Oe.units=Oe.UNIT.name.toLowerCase(),Oe.units==="metre"&&(Oe.units="meter"),Oe.UNIT.convert&&(Oe.type==="GEOGCS"?Oe.DATUM&&Oe.DATUM.SPHEROID&&(Oe.to_meter=Oe.UNIT.convert*Oe.DATUM.SPHEROID.a):Oe.to_meter=Oe.UNIT.convert));var He=Oe.GEOGCS;Oe.type==="GEOGCS"&&(He=Oe),He&&(He.DATUM?Oe.datumCode=He.DATUM.name.toLowerCase():Oe.datumCode=He.name.toLowerCase(),Oe.datumCode.slice(0,2)==="d_"&&(Oe.datumCode=Oe.datumCode.slice(2)),Oe.datumCode==="new_zealand_1949"&&(Oe.datumCode="nzgd49"),(Oe.datumCode==="wgs_1984"||Oe.datumCode==="world_geodetic_system_1984")&&(Oe.PROJECTION==="Mercator_Auxiliary_Sphere"&&(Oe.sphere=!0),Oe.datumCode="wgs84"),Oe.datumCode==="belge_1972"&&(Oe.datumCode="rnb72"),He.DATUM&&He.DATUM.SPHEROID&&(Oe.ellps=He.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),Oe.ellps.toLowerCase().slice(0,13)==="international"&&(Oe.ellps="intl"),Oe.a=He.DATUM.SPHEROID.a,Oe.rf=parseFloat(He.DATUM.SPHEROID.rf,10)),He.DATUM&&He.DATUM.TOWGS84&&(Oe.datum_params=He.DATUM.TOWGS84),~Oe.datumCode.indexOf("osgb_1936")&&(Oe.datumCode="osgb36"),~Oe.datumCode.indexOf("osni_1952")&&(Oe.datumCode="osni52"),(~Oe.datumCode.indexOf("tm65")||~Oe.datumCode.indexOf("geodetic_datum_of_1965"))&&(Oe.datumCode="ire65"),Oe.datumCode==="ch1903+"&&(Oe.datumCode="ch1903"),~Oe.datumCode.indexOf("israel")&&(Oe.datumCode="isr93")),Oe.b&&!isFinite(Oe.b)&&(Oe.b=Oe.a);function We(An){var Sn=Oe.to_meter||1;return An*Sn}var Cn=function(An){return rename(Oe,An)},En=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",We],["y0","false_northing",We],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];En.forEach(Cn),!Oe.long0&&Oe.longc&&(Oe.projName==="Albers_Conic_Equal_Area"||Oe.projName==="Lambert_Azimuthal_Equal_Area")&&(Oe.long0=Oe.longc),!Oe.lat_ts&&Oe.lat1&&(Oe.projName==="Stereographic_South_Pole"||Oe.projName==="Polar Stereographic (variant B)")?(Oe.lat0=d2r(Oe.lat1>0?90:-90),Oe.lat_ts=Oe.lat1):!Oe.lat_ts&&Oe.lat0&&Oe.projName==="Polar_Stereographic"&&(Oe.lat_ts=Oe.lat0,Oe.lat0=d2r(Oe.lat0>0?90:-90))}function wkt(Oe){var e=parseString(Oe),Te=e[0],ke={};return sExpr(e,ke),cleanWKT(ke),ke[Te]}function defs(Oe){var e=this;if(arguments.length===2){var Te=arguments[1];typeof Te=="string"?Te.charAt(0)==="+"?defs[Oe]=projStr(arguments[1]):defs[Oe]=wkt(arguments[1]):defs[Oe]=Te}else if(arguments.length===1){if(Array.isArray(Oe))return Oe.map(function(ke){Array.isArray(ke)?defs.apply(e,ke):defs(ke)});if(typeof Oe=="string"){if(Oe in defs)return defs[Oe]}else"EPSG"in Oe?defs["EPSG:"+Oe.EPSG]=Oe:"ESRI"in Oe?defs["ESRI:"+Oe.ESRI]=Oe:"IAU2000"in Oe?defs["IAU2000:"+Oe.IAU2000]=Oe:console.log(Oe);return}}globals(defs);function testObj(Oe){return typeof Oe=="string"}function testDef(Oe){return Oe in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(Oe){return codeWords.some(function(e){return Oe.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(Oe){var e=match(Oe,"authority");if(e){var Te=match(e,"epsg");return Te&&codes.indexOf(Te)>-1}}function checkProjStr(Oe){var e=match(Oe,"extension");if(e)return match(e,"proj4")}function testProj(Oe){return Oe[0]==="+"}function parse(Oe){if(testObj(Oe)){if(testDef(Oe))return defs[Oe];if(testWKT(Oe)){var e=wkt(Oe);if(checkMercator(e))return defs["EPSG:3857"];var Te=checkProjStr(e);return Te?projStr(Te):e}if(testProj(Oe))return projStr(Oe)}else return Oe}function extend(Oe,e){Oe=Oe||{};var Te,ke;if(!e)return Oe;for(ke in e)Te=e[ke],Te!==void 0&&(Oe[ke]=Te);return Oe}function msfnz(Oe,e,Te){var ke=Oe*e;return Te/Math.sqrt(1-ke*ke)}function sign(Oe){return Oe<0?-1:1}function adjust_lon(Oe){return Math.abs(Oe)<=SPI?Oe:Oe-sign(Oe)*TWO_PI}function tsfnz(Oe,e,Te){var ke=Oe*Te,Be=.5*Oe;return ke=Math.pow((1-ke)/(1+ke),Be),Math.tan(.5*(HALF_PI-e))/ke}function phi2z(Oe,e){for(var Te=.5*Oe,ke,Be,Ue=HALF_PI-2*Math.atan(e),He=0;He<=15;He++)if(ke=Oe*Math.sin(Ue),Be=HALF_PI-2*Math.atan(e*Math.pow((1-ke)/(1+ke),Te))-Ue,Ue+=Be,Math.abs(Be)<=1e-10)return Ue;return-9999}function init$x(){var Oe=this.b/this.a;this.es=1-Oe*Oe,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(Oe){var e=Oe.x,Te=Oe.y;if(Te*R2D>90&&Te*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var ke,Be;if(Math.abs(Math.abs(Te)-HALF_PI)<=EPSLN)return null;if(this.sphere)ke=this.x0+this.a*this.k0*adjust_lon(e-this.long0),Be=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*Te));else{var Ue=Math.sin(Te),He=tsfnz(this.e,Te,Ue);ke=this.x0+this.a*this.k0*adjust_lon(e-this.long0),Be=this.y0-this.a*this.k0*Math.log(He)}return Oe.x=ke,Oe.y=Be,Oe}function inverse$v(Oe){var e=Oe.x-this.x0,Te=Oe.y-this.y0,ke,Be;if(this.sphere)Be=HALF_PI-2*Math.atan(Math.exp(-Te/(this.a*this.k0)));else{var Ue=Math.exp(-Te/(this.a*this.k0));if(Be=phi2z(this.e,Ue),Be===-9999)return null}return ke=adjust_lon(this.long0+e/(this.a*this.k0)),Oe.x=ke,Oe.y=Be,Oe}var names$x=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$x,forward:forward$v,inverse:inverse$v,names:names$x};function init$w(){}function identity(Oe){return Oe}var names$w=["longlat","identity"];const longlat={init:init$w,forward:identity,inverse:identity,names:names$w};var projs=[merc,longlat],names$v={},projStore=[];function add(Oe,e){var Te=projStore.length;return Oe.names?(projStore[Te]=Oe,Oe.names.forEach(function(ke){names$v[ke.toLowerCase()]=Te}),this):(console.log(e),!0)}function get(Oe){if(!Oe)return!1;var e=Oe.toLowerCase();if(typeof names$v[e]<"u"&&projStore[names$v[e]])return projStore[names$v[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(Oe,e,Te,ke){var Be=Oe*Oe,Ue=e*e,He=(Be-Ue)/Be,We=0;ke?(Oe*=1-He*(SIXTH+He*(RA4+He*RA6)),Be=Oe*Oe,He=0):We=Math.sqrt(He);var Cn=(Be-Ue)/Ue;return{es:He,e:We,ep2:Cn}}function sphere(Oe,e,Te,ke,Be){if(!Oe){var Ue=match(exports$1,ke);Ue||(Ue=WGS84),Oe=Ue.a,e=Ue.b,Te=Ue.rf}return Te&&!e&&(e=(1-1/Te)*Oe),(Te===0||Math.abs(Oe-e)<EPSLN)&&(Be=!0,e=Oe),{a:Oe,b:e,rf:Te,sphere:Be}}var datums={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var key in datums){var datum$1=datums[key];datums[datum$1.datumName]=datum$1}function datum(Oe,e,Te,ke,Be,Ue,He){var We={};return Oe===void 0||Oe==="none"?We.datum_type=PJD_NODATUM:We.datum_type=PJD_WGS84,e&&(We.datum_params=e.map(parseFloat),(We.datum_params[0]!==0||We.datum_params[1]!==0||We.datum_params[2]!==0)&&(We.datum_type=PJD_3PARAM),We.datum_params.length>3&&(We.datum_params[3]!==0||We.datum_params[4]!==0||We.datum_params[5]!==0||We.datum_params[6]!==0)&&(We.datum_type=PJD_7PARAM,We.datum_params[3]*=SEC_TO_RAD,We.datum_params[4]*=SEC_TO_RAD,We.datum_params[5]*=SEC_TO_RAD,We.datum_params[6]=We.datum_params[6]/1e6+1)),He&&(We.datum_type=PJD_GRIDSHIFT,We.grids=He),We.a=Te,We.b=ke,We.es=Be,We.ep2=Ue,We}var loadedNadgrids={};function nadgrid(Oe,e){var Te=new DataView(e),ke=detectLittleEndian(Te),Be=readHeader(Te,ke),Ue=readSubgrids(Te,Be,ke),He={header:Be,subgrids:Ue};return loadedNadgrids[Oe]=He,He}function getNadgrids(Oe){if(Oe===void 0)return null;var e=Oe.split(",");return e.map(parseNadgridString)}function parseNadgridString(Oe){if(Oe.length===0)return null;var e=Oe[0]==="@";return e&&(Oe=Oe.slice(1)),Oe==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:Oe,mandatory:!e,grid:loadedNadgrids[Oe]||null,isNull:!1}}function secondsToRadians(Oe){return Oe/3600*Math.PI/180}function detectLittleEndian(Oe){var e=Oe.getInt32(8,!1);return e===11?!1:(e=Oe.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(Oe,e){return{nFields:Oe.getInt32(8,e),nSubgridFields:Oe.getInt32(24,e),nSubgrids:Oe.getInt32(40,e),shiftType:decodeString(Oe,56,64).trim(),fromSemiMajorAxis:Oe.getFloat64(120,e),fromSemiMinorAxis:Oe.getFloat64(136,e),toSemiMajorAxis:Oe.getFloat64(152,e),toSemiMinorAxis:Oe.getFloat64(168,e)}}function decodeString(Oe,e,Te){return String.fromCharCode.apply(null,new Uint8Array(Oe.buffer.slice(e,Te)))}function readSubgrids(Oe,e,Te){for(var ke=176,Be=[],Ue=0;Ue<e.nSubgrids;Ue++){var He=readGridHeader(Oe,ke,Te),We=readGridNodes(Oe,ke,He,Te),Cn=Math.round(1+(He.upperLongitude-He.lowerLongitude)/He.longitudeInterval),En=Math.round(1+(He.upperLatitude-He.lowerLatitude)/He.latitudeInterval);Be.push({ll:[secondsToRadians(He.lowerLongitude),secondsToRadians(He.lowerLatitude)],del:[secondsToRadians(He.longitudeInterval),secondsToRadians(He.latitudeInterval)],lim:[Cn,En],count:He.gridNodeCount,cvs:mapNodes(We)}),ke+=176+He.gridNodeCount*16}return Be}function mapNodes(Oe){return Oe.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(Oe,e,Te){return{name:decodeString(Oe,e+8,e+16).trim(),parent:decodeString(Oe,e+24,e+24+8).trim(),lowerLatitude:Oe.getFloat64(e+72,Te),upperLatitude:Oe.getFloat64(e+88,Te),lowerLongitude:Oe.getFloat64(e+104,Te),upperLongitude:Oe.getFloat64(e+120,Te),latitudeInterval:Oe.getFloat64(e+136,Te),longitudeInterval:Oe.getFloat64(e+152,Te),gridNodeCount:Oe.getInt32(e+168,Te)}}function readGridNodes(Oe,e,Te,ke){for(var Be=e+176,Ue=16,He=[],We=0;We<Te.gridNodeCount;We++){var Cn={latitudeShift:Oe.getFloat32(Be+We*Ue,ke),longitudeShift:Oe.getFloat32(Be+We*Ue+4,ke),latitudeAccuracy:Oe.getFloat32(Be+We*Ue+8,ke),longitudeAccuracy:Oe.getFloat32(Be+We*Ue+12,ke)};He.push(Cn)}return He}function Projection(Oe,e){if(!(this instanceof Projection))return new Projection(Oe);e=e||function(En){if(En)throw En};var Te=parse(Oe);if(typeof Te!="object"){e("Could not parse to valid json: "+Oe);return}var ke=Projection.projections.get(Te.projName);if(!ke){e("Could not get projection name from: "+Oe);return}if(Te.datumCode&&Te.datumCode!=="none"){var Be=match(datums,Te.datumCode);Be&&(Te.datum_params=Te.datum_params||(Be.towgs84?Be.towgs84.split(","):null),Te.ellps=Be.ellipse,Te.datumName=Be.datumName?Be.datumName:Te.datumCode)}Te.k0=Te.k0||1,Te.axis=Te.axis||"enu",Te.ellps=Te.ellps||"wgs84",Te.lat1=Te.lat1||Te.lat0;var Ue=sphere(Te.a,Te.b,Te.rf,Te.ellps,Te.sphere),He=eccentricity(Ue.a,Ue.b,Ue.rf,Te.R_A),We=getNadgrids(Te.nadgrids),Cn=Te.datum||datum(Te.datumCode,Te.datum_params,Ue.a,Ue.b,He.es,He.ep2,We);extend(this,Te),extend(this,ke),this.a=Ue.a,this.b=Ue.b,this.rf=Ue.rf,this.sphere=Ue.sphere,this.es=He.es,this.e=He.e,this.ep2=He.ep2,this.datum=Cn,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(Oe,e){return Oe.datum_type!==e.datum_type||Oe.a!==e.a||Math.abs(Oe.es-e.es)>5e-11?!1:Oe.datum_type===PJD_3PARAM?Oe.datum_params[0]===e.datum_params[0]&&Oe.datum_params[1]===e.datum_params[1]&&Oe.datum_params[2]===e.datum_params[2]:Oe.datum_type===PJD_7PARAM?Oe.datum_params[0]===e.datum_params[0]&&Oe.datum_params[1]===e.datum_params[1]&&Oe.datum_params[2]===e.datum_params[2]&&Oe.datum_params[3]===e.datum_params[3]&&Oe.datum_params[4]===e.datum_params[4]&&Oe.datum_params[5]===e.datum_params[5]&&Oe.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(Oe,e,Te){var ke=Oe.x,Be=Oe.y,Ue=Oe.z?Oe.z:0,He,We,Cn,En;if(Be<-HALF_PI&&Be>-1.001*HALF_PI)Be=-HALF_PI;else if(Be>HALF_PI&&Be<1.001*HALF_PI)Be=HALF_PI;else{if(Be<-HALF_PI)return{x:-1/0,y:-1/0,z:Oe.z};if(Be>HALF_PI)return{x:1/0,y:1/0,z:Oe.z}}return ke>Math.PI&&(ke-=2*Math.PI),We=Math.sin(Be),En=Math.cos(Be),Cn=We*We,He=Te/Math.sqrt(1-e*Cn),{x:(He+Ue)*En*Math.cos(ke),y:(He+Ue)*En*Math.sin(ke),z:(He*(1-e)+Ue)*We}}function geocentricToGeodetic(Oe,e,Te,ke){var Be=1e-12,Ue=Be*Be,He=30,We,Cn,En,An,Sn,Tn,Ln,Bn,ei,ti,ni,ri,si,ai=Oe.x,li=Oe.y,Pi=Oe.z?Oe.z:0,pi,vi,Ri;if(We=Math.sqrt(ai*ai+li*li),Cn=Math.sqrt(ai*ai+li*li+Pi*Pi),We/Te<Be){if(pi=0,Cn/Te<Be)return vi=HALF_PI,Ri=-ke,{x:Oe.x,y:Oe.y,z:Oe.z}}else pi=Math.atan2(li,ai);En=Pi/Cn,An=We/Cn,Sn=1/Math.sqrt(1-e*(2-e)*An*An),Bn=An*(1-e)*Sn,ei=En*Sn,si=0;do si++,Ln=Te/Math.sqrt(1-e*ei*ei),Ri=We*Bn+Pi*ei-Ln*(1-e*ei*ei),Tn=e*Ln/(Ln+Ri),Sn=1/Math.sqrt(1-Tn*(2-Tn)*An*An),ti=An*(1-Tn)*Sn,ni=En*Sn,ri=ni*Bn-ti*ei,Bn=ti,ei=ni;while(ri*ri>Ue&&si<He);return vi=Math.atan(ni/Math.abs(ti)),{x:pi,y:vi,z:Ri}}function geocentricToWgs84(Oe,e,Te){if(e===PJD_3PARAM)return{x:Oe.x+Te[0],y:Oe.y+Te[1],z:Oe.z+Te[2]};if(e===PJD_7PARAM){var ke=Te[0],Be=Te[1],Ue=Te[2],He=Te[3],We=Te[4],Cn=Te[5],En=Te[6];return{x:En*(Oe.x-Cn*Oe.y+We*Oe.z)+ke,y:En*(Cn*Oe.x+Oe.y-He*Oe.z)+Be,z:En*(-We*Oe.x+He*Oe.y+Oe.z)+Ue}}}function geocentricFromWgs84(Oe,e,Te){if(e===PJD_3PARAM)return{x:Oe.x-Te[0],y:Oe.y-Te[1],z:Oe.z-Te[2]};if(e===PJD_7PARAM){var ke=Te[0],Be=Te[1],Ue=Te[2],He=Te[3],We=Te[4],Cn=Te[5],En=Te[6],An=(Oe.x-ke)/En,Sn=(Oe.y-Be)/En,Tn=(Oe.z-Ue)/En;return{x:An+Cn*Sn-We*Tn,y:-Cn*An+Sn+He*Tn,z:We*An-He*Sn+Tn}}}function checkParams(Oe){return Oe===PJD_3PARAM||Oe===PJD_7PARAM}function datum_transform(Oe,e,Te){if(compareDatums(Oe,e)||Oe.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return Te;var ke=Oe.a,Be=Oe.es;if(Oe.datum_type===PJD_GRIDSHIFT){var Ue=applyGridShift(Oe,!1,Te);if(Ue!==0)return;ke=SRS_WGS84_SEMIMAJOR,Be=SRS_WGS84_ESQUARED}var He=e.a,We=e.b,Cn=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(He=SRS_WGS84_SEMIMAJOR,We=SRS_WGS84_SEMIMINOR,Cn=SRS_WGS84_ESQUARED),Be===Cn&&ke===He&&!checkParams(Oe.datum_type)&&!checkParams(e.datum_type))return Te;if(Te=geodeticToGeocentric(Te,Be,ke),checkParams(Oe.datum_type)&&(Te=geocentricToWgs84(Te,Oe.datum_type,Oe.datum_params)),checkParams(e.datum_type)&&(Te=geocentricFromWgs84(Te,e.datum_type,e.datum_params)),Te=geocentricToGeodetic(Te,Cn,He,We),e.datum_type===PJD_GRIDSHIFT){var En=applyGridShift(e,!0,Te);if(En!==0)return}return Te}function applyGridShift(Oe,e,Te){if(Oe.grids===null||Oe.grids.length===0)return console.log("Grid shift grids not found"),-1;var ke={x:-Te.x,y:Te.y},Be={x:Number.NaN,y:Number.NaN},Ue=[];e:for(var He=0;He<Oe.grids.length;He++){var We=Oe.grids[He];if(Ue.push(We.name),We.isNull){Be=ke;break}if(We.mandatory,We.grid===null){if(We.mandatory)return console.log("Unable to find mandatory grid '"+We.name+"'"),-1;continue}for(var Cn=We.grid.subgrids,En=0,An=Cn.length;En<An;En++){var Sn=Cn[En],Tn=(Math.abs(Sn.del[1])+Math.abs(Sn.del[0]))/1e4,Ln=Sn.ll[0]-Tn,Bn=Sn.ll[1]-Tn,ei=Sn.ll[0]+(Sn.lim[0]-1)*Sn.del[0]+Tn,ti=Sn.ll[1]+(Sn.lim[1]-1)*Sn.del[1]+Tn;if(!(Bn>ke.y||Ln>ke.x||ti<ke.y||ei<ke.x)&&(Be=applySubgridShift(ke,e,Sn),!isNaN(Be.x)))break e}}return isNaN(Be.x)?(console.log("Failed to find a grid shift table for location '"+-ke.x*R2D+" "+ke.y*R2D+" tried: '"+Ue+"'"),-1):(Te.x=-Be.x,Te.y=Be.y,0)}function applySubgridShift(Oe,e,Te){var ke={x:Number.NaN,y:Number.NaN};if(isNaN(Oe.x))return ke;var Be={x:Oe.x,y:Oe.y};Be.x-=Te.ll[0],Be.y-=Te.ll[1],Be.x=adjust_lon(Be.x-Math.PI)+Math.PI;var Ue=nadInterpolate(Be,Te);if(e){if(isNaN(Ue.x))return ke;Ue.x=Be.x-Ue.x,Ue.y=Be.y-Ue.y;var He=9,We=1e-12,Cn,En;do{if(En=nadInterpolate(Ue,Te),isNaN(En.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}Cn={x:Be.x-(En.x+Ue.x),y:Be.y-(En.y+Ue.y)},Ue.x+=Cn.x,Ue.y+=Cn.y}while(He--&&Math.abs(Cn.x)>We&&Math.abs(Cn.y)>We);if(He<0)return console.log("Inverse grid shift iterator failed to converge."),ke;ke.x=adjust_lon(Ue.x+Te.ll[0]),ke.y=Ue.y+Te.ll[1]}else isNaN(Ue.x)||(ke.x=Oe.x+Ue.x,ke.y=Oe.y+Ue.y);return ke}function nadInterpolate(Oe,e){var Te={x:Oe.x/e.del[0],y:Oe.y/e.del[1]},ke={x:Math.floor(Te.x),y:Math.floor(Te.y)},Be={x:Te.x-1*ke.x,y:Te.y-1*ke.y},Ue={x:Number.NaN,y:Number.NaN},He;if(ke.x<0||ke.x>=e.lim[0]||ke.y<0||ke.y>=e.lim[1])return Ue;He=ke.y*e.lim[0]+ke.x;var We={x:e.cvs[He][0],y:e.cvs[He][1]};He++;var Cn={x:e.cvs[He][0],y:e.cvs[He][1]};He+=e.lim[0];var En={x:e.cvs[He][0],y:e.cvs[He][1]};He--;var An={x:e.cvs[He][0],y:e.cvs[He][1]},Sn=Be.x*Be.y,Tn=Be.x*(1-Be.y),Ln=(1-Be.x)*(1-Be.y),Bn=(1-Be.x)*Be.y;return Ue.x=Ln*We.x+Tn*Cn.x+Bn*An.x+Sn*En.x,Ue.y=Ln*We.y+Tn*Cn.y+Bn*An.y+Sn*En.y,Ue}function adjust_axis(Oe,e,Te){var ke=Te.x,Be=Te.y,Ue=Te.z||0,He,We,Cn,En={};for(Cn=0;Cn<3;Cn++)if(!(e&&Cn===2&&Te.z===void 0))switch(Cn===0?(He=ke,"ew".indexOf(Oe.axis[Cn])!==-1?We="x":We="y"):Cn===1?(He=Be,"ns".indexOf(Oe.axis[Cn])!==-1?We="y":We="x"):(He=Ue,We="z"),Oe.axis[Cn]){case"e":En[We]=He;break;case"w":En[We]=-He;break;case"n":En[We]=He;break;case"s":En[We]=-He;break;case"u":Te[We]!==void 0&&(En.z=He);break;case"d":Te[We]!==void 0&&(En.z=-He);break;default:return null}return En}function common(Oe){var e={x:Oe[0],y:Oe[1]};return Oe.length>2&&(e.z=Oe[2]),Oe.length>3&&(e.m=Oe[3]),e}function checkSanity(Oe){checkCoord(Oe.x),checkCoord(Oe.y)}function checkCoord(Oe){if(typeof Number.isFinite=="function"){if(Number.isFinite(Oe))return;throw new TypeError("coordinates must be finite numbers")}if(typeof Oe!="number"||Oe!==Oe||!isFinite(Oe))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(Oe,e){return(Oe.datum.datum_type===PJD_3PARAM||Oe.datum.datum_type===PJD_7PARAM||Oe.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&Oe.datumCode!=="WGS84"}function transform(Oe,e,Te,ke){var Be;Array.isArray(Te)?Te=common(Te):Te={x:Te.x,y:Te.y,z:Te.z,m:Te.m};var Ue=Te.z!==void 0;if(checkSanity(Te),Oe.datum&&e.datum&&checkNotWGS(Oe,e)&&(Be=new Projection("WGS84"),Te=transform(Oe,Be,Te,ke),Oe=Be),ke&&Oe.axis!=="enu"&&(Te=adjust_axis(Oe,!1,Te)),Oe.projName==="longlat")Te={x:Te.x*D2R$1,y:Te.y*D2R$1,z:Te.z||0};else if(Oe.to_meter&&(Te={x:Te.x*Oe.to_meter,y:Te.y*Oe.to_meter,z:Te.z||0}),Te=Oe.inverse(Te),!Te)return;if(Oe.from_greenwich&&(Te.x+=Oe.from_greenwich),Te=datum_transform(Oe.datum,e.datum,Te),!!Te)return e.from_greenwich&&(Te={x:Te.x-e.from_greenwich,y:Te.y,z:Te.z||0}),e.projName==="longlat"?Te={x:Te.x*R2D,y:Te.y*R2D,z:Te.z||0}:(Te=e.forward(Te),e.to_meter&&(Te={x:Te.x/e.to_meter,y:Te.y/e.to_meter,z:Te.z||0})),ke&&e.axis!=="enu"?adjust_axis(e,!0,Te):(Te&&!Ue&&delete Te.z,Te)}var wgs84=Projection("WGS84");function transformer(Oe,e,Te,ke){var Be,Ue,He;return Array.isArray(Te)?(Be=transform(Oe,e,Te,ke)||{x:NaN,y:NaN},Te.length>2?typeof Oe.name<"u"&&Oe.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof Be.z=="number"?[Be.x,Be.y,Be.z].concat(Te.slice(3)):[Be.x,Be.y,Te[2]].concat(Te.slice(3)):[Be.x,Be.y].concat(Te.slice(2)):[Be.x,Be.y]):(Ue=transform(Oe,e,Te,ke),He=Object.keys(Te),He.length===2||He.forEach(function(We){if(typeof Oe.name<"u"&&Oe.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(We==="x"||We==="y"||We==="z")return}else if(We==="x"||We==="y")return;Ue[We]=Te[We]}),Ue)}function checkProj(Oe){return Oe instanceof Projection?Oe:Oe.oProj?Oe.oProj:Projection(Oe)}function proj4(Oe,e,Te){Oe=checkProj(Oe);var ke=!1,Be;return typeof e>"u"?(e=Oe,Oe=wgs84,ke=!0):(typeof e.x<"u"||Array.isArray(e))&&(Te=e,e=Oe,Oe=wgs84,ke=!0),e=checkProj(e),Te?transformer(Oe,e,Te):(Be={forward:function(Ue,He){return transformer(Oe,e,Ue,He)},inverse:function(Ue,He){return transformer(e,Oe,Ue,He)}},ke&&(Be.oProj=e),Be)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A$1=65,I$2=73,O$1=79,V$1=86,Z$1=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(Oe,e){return e=e||5,encode(LLtoUTM({lat:Oe[1],lon:Oe[0]}),e)}function inverse$u(Oe){var e=UTMtoLL(decode(Oe.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(Oe){var e=UTMtoLL(decode(Oe.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(Oe){return Oe*(Math.PI/180)}function radToDeg(Oe){return 180*(Oe/Math.PI)}function LLtoUTM(Oe){var e=Oe.lat,Te=Oe.lon,ke=6378137,Be=.00669438,Ue=.9996,He,We,Cn,En,An,Sn,Tn,Ln=degToRad(e),Bn=degToRad(Te),ei,ti;ti=Math.floor((Te+180)/6)+1,Te===180&&(ti=60),e>=56&&e<64&&Te>=3&&Te<12&&(ti=32),e>=72&&e<84&&(Te>=0&&Te<9?ti=31:Te>=9&&Te<21?ti=33:Te>=21&&Te<33?ti=35:Te>=33&&Te<42&&(ti=37)),He=(ti-1)*6-180+3,ei=degToRad(He),We=Be/(1-Be),Cn=ke/Math.sqrt(1-Be*Math.sin(Ln)*Math.sin(Ln)),En=Math.tan(Ln)*Math.tan(Ln),An=We*Math.cos(Ln)*Math.cos(Ln),Sn=Math.cos(Ln)*(Bn-ei),Tn=ke*((1-Be/4-3*Be*Be/64-5*Be*Be*Be/256)*Ln-(3*Be/8+3*Be*Be/32+45*Be*Be*Be/1024)*Math.sin(2*Ln)+(15*Be*Be/256+45*Be*Be*Be/1024)*Math.sin(4*Ln)-35*Be*Be*Be/3072*Math.sin(6*Ln));var ni=Ue*Cn*(Sn+(1-En+An)*Sn*Sn*Sn/6+(5-18*En+En*En+72*An-58*We)*Sn*Sn*Sn*Sn*Sn/120)+5e5,ri=Ue*(Tn+Cn*Math.tan(Ln)*(Sn*Sn/2+(5-En+9*An+4*An*An)*Sn*Sn*Sn*Sn/24+(61-58*En+En*En+600*An-330*We)*Sn*Sn*Sn*Sn*Sn*Sn/720));return e<0&&(ri+=1e7),{northing:Math.round(ri),easting:Math.round(ni),zoneNumber:ti,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(Oe){var e=Oe.northing,Te=Oe.easting,ke=Oe.zoneLetter,Be=Oe.zoneNumber;if(Be<0||Be>60)return null;var Ue=.9996,He=6378137,We=.00669438,Cn,En=(1-Math.sqrt(1-We))/(1+Math.sqrt(1-We)),An,Sn,Tn,Ln,Bn,ei,ti,ni,ri,si=Te-5e5,ai=e;ke<"N"&&(ai-=1e7),ti=(Be-1)*6-180+3,Cn=We/(1-We),ei=ai/Ue,ni=ei/(He*(1-We/4-3*We*We/64-5*We*We*We/256)),ri=ni+(3*En/2-27*En*En*En/32)*Math.sin(2*ni)+(21*En*En/16-55*En*En*En*En/32)*Math.sin(4*ni)+151*En*En*En/96*Math.sin(6*ni),An=He/Math.sqrt(1-We*Math.sin(ri)*Math.sin(ri)),Sn=Math.tan(ri)*Math.tan(ri),Tn=Cn*Math.cos(ri)*Math.cos(ri),Ln=He*(1-We)/Math.pow(1-We*Math.sin(ri)*Math.sin(ri),1.5),Bn=si/(An*Ue);var li=ri-An*Math.tan(ri)/Ln*(Bn*Bn/2-(5+3*Sn+10*Tn-4*Tn*Tn-9*Cn)*Bn*Bn*Bn*Bn/24+(61+90*Sn+298*Tn+45*Sn*Sn-252*Cn-3*Tn*Tn)*Bn*Bn*Bn*Bn*Bn*Bn/720);li=radToDeg(li);var Pi=(Bn-(1+2*Sn+Tn)*Bn*Bn*Bn/6+(5-2*Tn+28*Sn-3*Tn*Tn+8*Cn+24*Sn*Sn)*Bn*Bn*Bn*Bn*Bn/120)/Math.cos(ri);Pi=ti+radToDeg(Pi);var pi;if(Oe.accuracy){var vi=UTMtoLL({northing:Oe.northing+Oe.accuracy,easting:Oe.easting+Oe.accuracy,zoneLetter:Oe.zoneLetter,zoneNumber:Oe.zoneNumber});pi={top:vi.lat,right:vi.lon,bottom:li,left:Pi}}else pi={lat:li,lon:Pi};return pi}function getLetterDesignator(Oe){var e="Z";return 84>=Oe&&Oe>=72?e="X":72>Oe&&Oe>=64?e="W":64>Oe&&Oe>=56?e="V":56>Oe&&Oe>=48?e="U":48>Oe&&Oe>=40?e="T":40>Oe&&Oe>=32?e="S":32>Oe&&Oe>=24?e="R":24>Oe&&Oe>=16?e="Q":16>Oe&&Oe>=8?e="P":8>Oe&&Oe>=0?e="N":0>Oe&&Oe>=-8?e="M":-8>Oe&&Oe>=-16?e="L":-16>Oe&&Oe>=-24?e="K":-24>Oe&&Oe>=-32?e="J":-32>Oe&&Oe>=-40?e="H":-40>Oe&&Oe>=-48?e="G":-48>Oe&&Oe>=-56?e="F":-56>Oe&&Oe>=-64?e="E":-64>Oe&&Oe>=-72?e="D":-72>Oe&&Oe>=-80&&(e="C"),e}function encode(Oe,e){var Te="00000"+Oe.easting,ke="00000"+Oe.northing;return Oe.zoneNumber+Oe.zoneLetter+get100kID(Oe.easting,Oe.northing,Oe.zoneNumber)+Te.substr(Te.length-5,e)+ke.substr(ke.length-5,e)}function get100kID(Oe,e,Te){var ke=get100kSetForZone(Te),Be=Math.floor(Oe/1e5),Ue=Math.floor(e/1e5)%20;return getLetter100kID(Be,Ue,ke)}function get100kSetForZone(Oe){var e=Oe%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(Oe,e,Te){var ke=Te-1,Be=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(ke),Ue=SET_ORIGIN_ROW_LETTERS.charCodeAt(ke),He=Be+Oe-1,We=Ue+e,Cn=!1;He>Z$1&&(He=He-Z$1+A$1-1,Cn=!0),(He===I$2||Be<I$2&&He>I$2||(He>I$2||Be<I$2)&&Cn)&&He++,(He===O$1||Be<O$1&&He>O$1||(He>O$1||Be<O$1)&&Cn)&&(He++,He===I$2&&He++),He>Z$1&&(He=He-Z$1+A$1-1),We>V$1?(We=We-V$1+A$1-1,Cn=!0):Cn=!1,(We===I$2||Ue<I$2&&We>I$2||(We>I$2||Ue<I$2)&&Cn)&&We++,(We===O$1||Ue<O$1&&We>O$1||(We>O$1||Ue<O$1)&&Cn)&&(We++,We===I$2&&We++),We>V$1&&(We=We-V$1+A$1-1);var En=String.fromCharCode(He)+String.fromCharCode(We);return En}function decode(Oe){if(Oe&&Oe.length===0)throw"MGRSPoint coverting from nothing";for(var e=Oe.length,Te=null,ke="",Be,Ue=0;!/[A-Z]/.test(Be=Oe.charAt(Ue));){if(Ue>=2)throw"MGRSPoint bad conversion from: "+Oe;ke+=Be,Ue++}var He=parseInt(ke,10);if(Ue===0||Ue+3>e)throw"MGRSPoint bad conversion from: "+Oe;var We=Oe.charAt(Ue++);if(We<="A"||We==="B"||We==="Y"||We>="Z"||We==="I"||We==="O")throw"MGRSPoint zone letter "+We+" not handled: "+Oe;Te=Oe.substring(Ue,Ue+=2);for(var Cn=get100kSetForZone(He),En=getEastingFromChar(Te.charAt(0),Cn),An=getNorthingFromChar(Te.charAt(1),Cn);An<getMinNorthing(We);)An+=2e6;var Sn=e-Ue;if(Sn%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+Oe;var Tn=Sn/2,Ln=0,Bn=0,ei,ti,ni,ri,si;return Tn>0&&(ei=1e5/Math.pow(10,Tn),ti=Oe.substring(Ue,Ue+Tn),Ln=parseFloat(ti)*ei,ni=Oe.substring(Ue+Tn),Bn=parseFloat(ni)*ei),ri=Ln+En,si=Bn+An,{easting:ri,northing:si,zoneLetter:We,zoneNumber:He,accuracy:ei}}function getEastingFromChar(Oe,e){for(var Te=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),ke=1e5,Be=!1;Te!==Oe.charCodeAt(0);){if(Te++,Te===I$2&&Te++,Te===O$1&&Te++,Te>Z$1){if(Be)throw"Bad character: "+Oe;Te=A$1,Be=!0}ke+=1e5}return ke}function getNorthingFromChar(Oe,e){if(Oe>"V")throw"MGRSPoint given invalid Northing "+Oe;for(var Te=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),ke=0,Be=!1;Te!==Oe.charCodeAt(0);){if(Te++,Te===I$2&&Te++,Te===O$1&&Te++,Te>V$1){if(Be)throw"Bad character: "+Oe;Te=A$1,Be=!0}ke+=1e5}return ke}function getMinNorthing(Oe){var e;switch(Oe){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+Oe}function Point(Oe,e,Te){if(!(this instanceof Point))return new Point(Oe,e,Te);if(Array.isArray(Oe))this.x=Oe[0],this.y=Oe[1],this.z=Oe[2]||0;else if(typeof Oe=="object")this.x=Oe.x,this.y=Oe.y,this.z=Oe.z||0;else if(typeof Oe=="string"&&typeof e>"u"){var ke=Oe.split(",");this.x=parseFloat(ke[0],10),this.y=parseFloat(ke[1],10),this.z=parseFloat(ke[2],10)||0}else this.x=Oe,this.y=e,this.z=Te||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(Oe){return new Point(toPoint(Oe))};Point.prototype.toMGRS=function(Oe){return forward$u([this.x,this.y],Oe)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(Oe){var e=[];e[0]=C00-Oe*(C02+Oe*(C04+Oe*(C06+Oe*C08))),e[1]=Oe*(C22-Oe*(C04+Oe*(C06+Oe*C08)));var Te=Oe*Oe;return e[2]=Te*(C44-Oe*(C46+Oe*C48)),Te*=Oe,e[3]=Te*(C66-Oe*C68),e[4]=Te*Oe*C88,e}function pj_mlfn(Oe,e,Te,ke){return Te*=e,e*=e,ke[0]*Oe-Te*(ke[1]+e*(ke[2]+e*(ke[3]+e*ke[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(Oe,e,Te){for(var ke=1/(1-e),Be=Oe,Ue=MAX_ITER$3;Ue;--Ue){var He=Math.sin(Be),We=1-e*He*He;if(We=(pj_mlfn(Be,He,Math.cos(Be),Te)-Oe)*(We*Math.sqrt(We))*ke,Be-=We,Math.abs(We)<EPSLN)return Be}return Be}function init$v(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(Oe){var e=Oe.x,Te=Oe.y,ke=adjust_lon(e-this.long0),Be,Ue,He,We=Math.sin(Te),Cn=Math.cos(Te);if(this.es){var An=Cn*ke,Sn=Math.pow(An,2),Tn=this.ep2*Math.pow(Cn,2),Ln=Math.pow(Tn,2),Bn=Math.abs(Cn)>EPSLN?Math.tan(Te):0,ei=Math.pow(Bn,2),ti=Math.pow(ei,2);Be=1-this.es*Math.pow(We,2),An=An/Math.sqrt(Be);var ni=pj_mlfn(Te,We,Cn,this.en);Ue=this.a*(this.k0*An*(1+Sn/6*(1-ei+Tn+Sn/20*(5-18*ei+ti+14*Tn-58*ei*Tn+Sn/42*(61+179*ti-ti*ei-479*ei)))))+this.x0,He=this.a*(this.k0*(ni-this.ml0+We*ke*An/2*(1+Sn/12*(5-ei+9*Tn+4*Ln+Sn/30*(61+ti-58*ei+270*Tn-330*ei*Tn+Sn/56*(1385+543*ti-ti*ei-3111*ei))))))+this.y0}else{var En=Cn*Math.sin(ke);if(Math.abs(Math.abs(En)-1)<EPSLN)return 93;if(Ue=.5*this.a*this.k0*Math.log((1+En)/(1-En))+this.x0,He=Cn*Math.cos(ke)/Math.sqrt(1-Math.pow(En,2)),En=Math.abs(He),En>=1){if(En-1>EPSLN)return 93;He=0}else He=Math.acos(He);Te<0&&(He=-He),He=this.a*this.k0*(He-this.lat0)+this.y0}return Oe.x=Ue,Oe.y=He,Oe}function inverse$t(Oe){var e,Te,ke,Be,Ue=(Oe.x-this.x0)*(1/this.a),He=(Oe.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+He/this.k0,Te=pj_inv_mlfn(e,this.es,this.en),Math.abs(Te)<HALF_PI){var Sn=Math.sin(Te),Tn=Math.cos(Te),Ln=Math.abs(Tn)>EPSLN?Math.tan(Te):0,Bn=this.ep2*Math.pow(Tn,2),ei=Math.pow(Bn,2),ti=Math.pow(Ln,2),ni=Math.pow(ti,2);e=1-this.es*Math.pow(Sn,2);var ri=Ue*Math.sqrt(e)/this.k0,si=Math.pow(ri,2);e=e*Ln,ke=Te-e*si/(1-this.es)*.5*(1-si/12*(5+3*ti-9*Bn*ti+Bn-4*ei-si/30*(61+90*ti-252*Bn*ti+45*ni+46*Bn-si/56*(1385+3633*ti+4095*ni+1574*ni*ti)))),Be=adjust_lon(this.long0+ri*(1-si/6*(1+2*ti+Bn-si/20*(5+28*ti+24*ni+8*Bn*ti+6*Bn-si/42*(61+662*ti+1320*ni+720*ni*ti))))/Tn)}else ke=HALF_PI*sign(He),Be=0;else{var We=Math.exp(Ue/this.k0),Cn=.5*(We-1/We),En=this.lat0+He/this.k0,An=Math.cos(En);e=Math.sqrt((1-Math.pow(An,2))/(1+Math.pow(Cn,2))),ke=Math.asin(e),He<0&&(ke=-ke),Cn===0&&An===0?Be=0:Be=adjust_lon(Math.atan2(Cn,An)+this.long0)}return Oe.x=Be,Oe.y=ke,Oe}var names$u=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$v,forward:forward$t,inverse:inverse$t,names:names$u};function sinh(Oe){var e=Math.exp(Oe);return e=(e-1/e)/2,e}function hypot(Oe,e){Oe=Math.abs(Oe),e=Math.abs(e);var Te=Math.max(Oe,e),ke=Math.min(Oe,e)/(Te||1);return Te*Math.sqrt(1+Math.pow(ke,2))}function log1py(Oe){var e=1+Oe,Te=e-1;return Te===0?Oe:Oe*Math.log(e)/Te}function asinhy(Oe){var e=Math.abs(Oe);return e=log1py(e*(1+e/(hypot(1,e)+1))),Oe<0?-e:e}function gatg(Oe,e){for(var Te=2*Math.cos(2*e),ke=Oe.length-1,Be=Oe[ke],Ue=0,He;--ke>=0;)He=-Ue+Te*Be+Oe[ke],Ue=Be,Be=He;return e+He*Math.sin(2*e)}function clens(Oe,e){for(var Te=2*Math.cos(e),ke=Oe.length-1,Be=Oe[ke],Ue=0,He;--ke>=0;)He=-Ue+Te*Be+Oe[ke],Ue=Be,Be=He;return Math.sin(e)*He}function cosh(Oe){var e=Math.exp(Oe);return e=(e+1/e)/2,e}function clens_cmplx(Oe,e,Te){for(var ke=Math.sin(e),Be=Math.cos(e),Ue=sinh(Te),He=cosh(Te),We=2*Be*He,Cn=-2*ke*Ue,En=Oe.length-1,An=Oe[En],Sn=0,Tn=0,Ln=0,Bn,ei;--En>=0;)Bn=Tn,ei=Sn,Tn=An,Sn=Ln,An=-Bn+We*Tn-Cn*Sn+Oe[En],Ln=-ei+Cn*Tn+We*Sn;return We=ke*He,Cn=Be*Ue,[We*An-Cn*Ln,We*Ln+Cn*An]}function init$u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var Oe=this.es/(1+Math.sqrt(1-this.es)),e=Oe/(2-Oe),Te=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),Te=Te*e,this.cgb[1]=Te*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=Te*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),Te=Te*e,this.cgb[2]=Te*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=Te*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),Te=Te*e,this.cgb[3]=Te*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=Te*(1237/630+e*(-12/5+e*(-24832/14175))),Te=Te*e,this.cgb[4]=Te*(4174/315+e*(-144838/6237)),this.cbg[4]=Te*(-734/315+e*(109598/31185)),Te=Te*e,this.cgb[5]=Te*(601676/22275),this.cbg[5]=Te*(444337/155925),Te=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+Te*(1/4+Te*(1/64+Te/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=Te*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=Te*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),Te=Te*e,this.utg[2]=Te*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=Te*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),Te=Te*e,this.utg[3]=Te*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=Te*(49561/161280+e*(-179/168+e*(6601661/7257600))),Te=Te*e,this.utg[4]=Te*(-4583/161280+e*(108847/3991680)),this.gtu[4]=Te*(34729/80640+e*(-3418889/1995840)),Te=Te*e,this.utg[5]=Te*(-20648693/638668800),this.gtu[5]=Te*(212378941/319334400);var ke=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(ke+clens(this.gtu,2*ke))}function forward$s(Oe){var e=adjust_lon(Oe.x-this.long0),Te=Oe.y;Te=gatg(this.cbg,Te);var ke=Math.sin(Te),Be=Math.cos(Te),Ue=Math.sin(e),He=Math.cos(e);Te=Math.atan2(ke,He*Be),e=Math.atan2(Ue*Be,hypot(ke,Be*He)),e=asinhy(Math.tan(e));var We=clens_cmplx(this.gtu,2*Te,2*e);Te=Te+We[0],e=e+We[1];var Cn,En;return Math.abs(e)<=2.623395162778?(Cn=this.a*(this.Qn*e)+this.x0,En=this.a*(this.Qn*Te+this.Zb)+this.y0):(Cn=1/0,En=1/0),Oe.x=Cn,Oe.y=En,Oe}function inverse$s(Oe){var e=(Oe.x-this.x0)*(1/this.a),Te=(Oe.y-this.y0)*(1/this.a);Te=(Te-this.Zb)/this.Qn,e=e/this.Qn;var ke,Be;if(Math.abs(e)<=2.623395162778){var Ue=clens_cmplx(this.utg,2*Te,2*e);Te=Te+Ue[0],e=e+Ue[1],e=Math.atan(sinh(e));var He=Math.sin(Te),We=Math.cos(Te),Cn=Math.sin(e),En=Math.cos(e);Te=Math.atan2(He*En,hypot(Cn,En*We)),e=Math.atan2(Cn,En*We),ke=adjust_lon(e+this.long0),Be=gatg(this.cgb,Te)}else ke=1/0,Be=1/0;return Oe.x=ke,Oe.y=Be,Oe}var names$t=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$u,forward:forward$s,inverse:inverse$s,names:names$t};function adjust_zone(Oe,e){if(Oe===void 0){if(Oe=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,Oe<0)return 0;if(Oe>60)return 60}return Oe}var dependsOn="etmerc";function init$t(){var Oe=adjust_zone(this.zone,this.long0);if(Oe===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(Oe)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$s=["Universal Transverse Mercator System","utm"];const utm={init:init$t,names:names$s,dependsOn};function srat(Oe,e){return Math.pow((1-Oe)/(1+Oe),e)}var MAX_ITER$2=20;function init$s(){var Oe=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*Oe*Oe),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(Oe/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*Oe,this.ratexp))}function forward$r(Oe){var e=Oe.x,Te=Oe.y;return Oe.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*Te+FORTPI),this.C)*srat(this.e*Math.sin(Te),this.ratexp))-HALF_PI,Oe.x=this.C*e,Oe}function inverse$r(Oe){for(var e=1e-14,Te=Oe.x/this.C,ke=Oe.y,Be=Math.pow(Math.tan(.5*ke+FORTPI)/this.K,1/this.C),Ue=MAX_ITER$2;Ue>0&&(ke=2*Math.atan(Be*srat(this.e*Math.sin(Oe.y),-.5*this.e))-HALF_PI,!(Math.abs(ke-Oe.y)<e));--Ue)Oe.y=ke;return Ue?(Oe.x=Te,Oe.y=ke,Oe):null}const gauss={init:init$s,forward:forward$r,inverse:inverse$r};function init$r(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(Oe){var e,Te,ke,Be;return Oe.x=adjust_lon(Oe.x-this.long0),gauss.forward.apply(this,[Oe]),e=Math.sin(Oe.y),Te=Math.cos(Oe.y),ke=Math.cos(Oe.x),Be=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*Te*ke),Oe.x=Be*Te*Math.sin(Oe.x),Oe.y=Be*(this.cosc0*e-this.sinc0*Te*ke),Oe.x=this.a*Oe.x+this.x0,Oe.y=this.a*Oe.y+this.y0,Oe}function inverse$q(Oe){var e,Te,ke,Be,Ue;if(Oe.x=(Oe.x-this.x0)/this.a,Oe.y=(Oe.y-this.y0)/this.a,Oe.x/=this.k0,Oe.y/=this.k0,Ue=hypot(Oe.x,Oe.y)){var He=2*Math.atan2(Ue,this.R2);e=Math.sin(He),Te=Math.cos(He),Be=Math.asin(Te*this.sinc0+Oe.y*e*this.cosc0/Ue),ke=Math.atan2(Oe.x*e,Ue*this.cosc0*Te-Oe.y*this.sinc0*e)}else Be=this.phic0,ke=0;return Oe.x=ke,Oe.y=Be,gauss.inverse.apply(this,[Oe]),Oe.x=adjust_lon(Oe.x+this.long0),Oe}var names$r=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$r,forward:forward$q,inverse:inverse$q,names:names$r};function ssfn_(Oe,e,Te){return e*=Te,Math.tan(.5*(HALF_PI+Oe))*Math.pow((1-e)/(1+e),.5*Te)}function init$q(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(Oe){var e=Oe.x,Te=Oe.y,ke=Math.sin(Te),Be=Math.cos(Te),Ue,He,We,Cn,En,An,Sn=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(Te+this.lat0)<=EPSLN?(Oe.x=NaN,Oe.y=NaN,Oe):this.sphere?(Ue=2*this.k0/(1+this.sinlat0*ke+this.coslat0*Be*Math.cos(Sn)),Oe.x=this.a*Ue*Be*Math.sin(Sn)+this.x0,Oe.y=this.a*Ue*(this.coslat0*ke-this.sinlat0*Be*Math.cos(Sn))+this.y0,Oe):(He=2*Math.atan(this.ssfn_(Te,ke,this.e))-HALF_PI,Cn=Math.cos(He),We=Math.sin(He),Math.abs(this.coslat0)<=EPSLN?(En=tsfnz(this.e,Te*this.con,this.con*ke),An=2*this.a*this.k0*En/this.cons,Oe.x=this.x0+An*Math.sin(e-this.long0),Oe.y=this.y0-this.con*An*Math.cos(e-this.long0),Oe):(Math.abs(this.sinlat0)<EPSLN?(Ue=2*this.a*this.k0/(1+Cn*Math.cos(Sn)),Oe.y=Ue*We):(Ue=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*We+this.cosX0*Cn*Math.cos(Sn))),Oe.y=Ue*(this.cosX0*We-this.sinX0*Cn*Math.cos(Sn))+this.y0),Oe.x=Ue*Cn*Math.sin(Sn)+this.x0,Oe))}function inverse$p(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e,Te,ke,Be,Ue,He=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y);if(this.sphere){var We=2*Math.atan(He/(2*this.a*this.k0));return e=this.long0,Te=this.lat0,He<=EPSLN?(Oe.x=e,Oe.y=Te,Oe):(Te=Math.asin(Math.cos(We)*this.sinlat0+Oe.y*Math.sin(We)*this.coslat0/He),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(Oe.x,-1*Oe.y)):e=adjust_lon(this.long0+Math.atan2(Oe.x,Oe.y)):e=adjust_lon(this.long0+Math.atan2(Oe.x*Math.sin(We),He*this.coslat0*Math.cos(We)-Oe.y*this.sinlat0*Math.sin(We))),Oe.x=e,Oe.y=Te,Oe)}else if(Math.abs(this.coslat0)<=EPSLN){if(He<=EPSLN)return Te=this.lat0,e=this.long0,Oe.x=e,Oe.y=Te,Oe;Oe.x*=this.con,Oe.y*=this.con,ke=He*this.cons/(2*this.a*this.k0),Te=this.con*phi2z(this.e,ke),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(Oe.x,-1*Oe.y))}else Be=2*Math.atan(He*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,He<=EPSLN?Ue=this.X0:(Ue=Math.asin(Math.cos(Be)*this.sinX0+Oe.y*Math.sin(Be)*this.cosX0/He),e=adjust_lon(this.long0+Math.atan2(Oe.x*Math.sin(Be),He*this.cosX0*Math.cos(Be)-Oe.y*this.sinX0*Math.sin(Be)))),Te=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+Ue)));return Oe.x=e,Oe.y=Te,Oe}var names$q=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$q,forward:forward$p,inverse:inverse$p,names:names$q,ssfn_};function init$p(){var Oe=this.lat0;this.lambda0=this.long0;var e=Math.sin(Oe),Te=this.a,ke=this.rf,Be=1/ke,Ue=2*Be-Math.pow(Be,2),He=this.e=Math.sqrt(Ue);this.R=this.k0*Te*Math.sqrt(1-Ue)/(1-Ue*Math.pow(e,2)),this.alpha=Math.sqrt(1+Ue/(1-Ue)*Math.pow(Math.cos(Oe),4)),this.b0=Math.asin(e/this.alpha);var We=Math.log(Math.tan(Math.PI/4+this.b0/2)),Cn=Math.log(Math.tan(Math.PI/4+Oe/2)),En=Math.log((1+He*e)/(1-He*e));this.K=We-this.alpha*Cn+this.alpha*He/2*En}function forward$o(Oe){var e=Math.log(Math.tan(Math.PI/4-Oe.y/2)),Te=this.e/2*Math.log((1+this.e*Math.sin(Oe.y))/(1-this.e*Math.sin(Oe.y))),ke=-this.alpha*(e+Te)+this.K,Be=2*(Math.atan(Math.exp(ke))-Math.PI/4),Ue=this.alpha*(Oe.x-this.lambda0),He=Math.atan(Math.sin(Ue)/(Math.sin(this.b0)*Math.tan(Be)+Math.cos(this.b0)*Math.cos(Ue))),We=Math.asin(Math.cos(this.b0)*Math.sin(Be)-Math.sin(this.b0)*Math.cos(Be)*Math.cos(Ue));return Oe.y=this.R/2*Math.log((1+Math.sin(We))/(1-Math.sin(We)))+this.y0,Oe.x=this.R*He+this.x0,Oe}function inverse$o(Oe){for(var e=Oe.x-this.x0,Te=Oe.y-this.y0,ke=e/this.R,Be=2*(Math.atan(Math.exp(Te/this.R))-Math.PI/4),Ue=Math.asin(Math.cos(this.b0)*Math.sin(Be)+Math.sin(this.b0)*Math.cos(Be)*Math.cos(ke)),He=Math.atan(Math.sin(ke)/(Math.cos(this.b0)*Math.cos(ke)-Math.sin(this.b0)*Math.tan(Be))),We=this.lambda0+He/this.alpha,Cn=0,En=Ue,An=-1e3,Sn=0;Math.abs(En-An)>1e-7;){if(++Sn>20)return;Cn=1/this.alpha*(Math.log(Math.tan(Math.PI/4+Ue/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(En))/2)),An=En,En=2*Math.atan(Math.exp(Cn))-Math.PI/2}return Oe.x=We,Oe.y=En,Oe}var names$p=["somerc"];const somerc={init:init$p,forward:forward$o,inverse:inverse$o,names:names$p};var TOL=1e-7;function isTypeA(Oe){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],Te=typeof Oe.PROJECTION=="object"?Object.keys(Oe.PROJECTION)[0]:Oe.PROJECTION;return"no_uoff"in Oe||"no_off"in Oe||e.indexOf(Te)!==-1}function init$o(){var Oe,e,Te,ke,Be,Ue,He,We,Cn,En,An=0,Sn,Tn=0,Ln=0,Bn=0,ei=0,ti=0,ni=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var ri=!1;"alpha"in this&&(ri=!0);var si=!1;if("rectified_grid_angle"in this&&(si=!0),ri&&(ni=this.alpha),si&&(An=this.rectified_grid_angle*D2R$1),ri||si)Tn=this.longc;else if(Ln=this.long1,ei=this.lat1,Bn=this.long2,ti=this.lat2,Math.abs(ei-ti)<=TOL||(Oe=Math.abs(ei))<=TOL||Math.abs(Oe-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(ti)-HALF_PI)<=TOL)throw new Error;var ai=1-this.es;e=Math.sqrt(ai),Math.abs(this.lat0)>EPSLN?(We=Math.sin(this.lat0),Te=Math.cos(this.lat0),Oe=1-this.es*We*We,this.B=Te*Te,this.B=Math.sqrt(1+this.es*this.B*this.B/ai),this.A=this.B*this.k0*e/Oe,ke=this.B*e/(Te*Math.sqrt(Oe)),Be=ke*ke-1,Be<=0?Be=0:(Be=Math.sqrt(Be),this.lat0<0&&(Be=-Be)),this.E=Be+=ke,this.E*=Math.pow(tsfnz(this.e,this.lat0,We),this.B)):(this.B=1/e,this.A=this.k0,this.E=ke=Be=1),ri||si?(ri?(Sn=Math.asin(Math.sin(ni)/ke),si||(An=ni)):(Sn=An,ni=Math.asin(ke*Math.sin(Sn))),this.lam0=Tn-Math.asin(.5*(Be-1/Be)*Math.tan(Sn))/this.B):(Ue=Math.pow(tsfnz(this.e,ei,Math.sin(ei)),this.B),He=Math.pow(tsfnz(this.e,ti,Math.sin(ti)),this.B),Be=this.E/Ue,Cn=(He-Ue)/(He+Ue),En=this.E*this.E,En=(En-He*Ue)/(En+He*Ue),Oe=Ln-Bn,Oe<-Math.pi?Bn-=TWO_PI:Oe>Math.pi&&(Bn+=TWO_PI),this.lam0=adjust_lon(.5*(Ln+Bn)-Math.atan(En*Math.tan(.5*this.B*(Ln-Bn))/Cn)/this.B),Sn=Math.atan(2*Math.sin(this.B*adjust_lon(Ln-this.lam0))/(Be-1/Be)),An=ni=Math.asin(ke*Math.sin(Sn))),this.singam=Math.sin(Sn),this.cosgam=Math.cos(Sn),this.sinrot=Math.sin(An),this.cosrot=Math.cos(An),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(ke*ke-1)/Math.cos(ni))),this.lat0<0&&(this.u_0=-this.u_0)),Be=.5*Sn,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-Be)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+Be))}function forward$n(Oe){var e={},Te,ke,Be,Ue,He,We,Cn,En;if(Oe.x=Oe.x-this.lam0,Math.abs(Math.abs(Oe.y)-HALF_PI)>EPSLN){if(He=this.E/Math.pow(tsfnz(this.e,Oe.y,Math.sin(Oe.y)),this.B),We=1/He,Te=.5*(He-We),ke=.5*(He+We),Ue=Math.sin(this.B*Oe.x),Be=(Te*this.singam-Ue*this.cosgam)/ke,Math.abs(Math.abs(Be)-1)<EPSLN)throw new Error;En=.5*this.ArB*Math.log((1-Be)/(1+Be)),We=Math.cos(this.B*Oe.x),Math.abs(We)<TOL?Cn=this.A*Oe.x:Cn=this.ArB*Math.atan2(Te*this.cosgam+Ue*this.singam,We)}else En=Oe.y>0?this.v_pole_n:this.v_pole_s,Cn=this.ArB*Oe.y;return this.no_rot?(e.x=Cn,e.y=En):(Cn-=this.u_0,e.x=En*this.cosrot+Cn*this.sinrot,e.y=Cn*this.cosrot-En*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(Oe){var e,Te,ke,Be,Ue,He,We,Cn={};if(Oe.x=(Oe.x-this.x0)*(1/this.a),Oe.y=(Oe.y-this.y0)*(1/this.a),this.no_rot?(Te=Oe.y,e=Oe.x):(Te=Oe.x*this.cosrot-Oe.y*this.sinrot,e=Oe.y*this.cosrot+Oe.x*this.sinrot+this.u_0),ke=Math.exp(-this.BrA*Te),Be=.5*(ke-1/ke),Ue=.5*(ke+1/ke),He=Math.sin(this.BrA*e),We=(He*this.cosgam+Be*this.singam)/Ue,Math.abs(Math.abs(We)-1)<EPSLN)Cn.x=0,Cn.y=We<0?-HALF_PI:HALF_PI;else{if(Cn.y=this.E/Math.sqrt((1+We)/(1-We)),Cn.y=phi2z(this.e,Math.pow(Cn.y,1/this.B)),Cn.y===1/0)throw new Error;Cn.x=-this.rB*Math.atan2(Be*this.cosgam-He*this.singam,Math.cos(this.BrA*e))}return Cn.x+=this.lam0,Cn}var names$o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$o,forward:forward$n,inverse:inverse$n,names:names$o};function init$n(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var Oe=this.b/this.a;this.e=Math.sqrt(1-Oe*Oe);var e=Math.sin(this.lat1),Te=Math.cos(this.lat1),ke=msfnz(this.e,e,Te),Be=tsfnz(this.e,this.lat1,e),Ue=Math.sin(this.lat2),He=Math.cos(this.lat2),We=msfnz(this.e,Ue,He),Cn=tsfnz(this.e,this.lat2,Ue),En=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(ke/We)/Math.log(Be/Cn):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=ke/(this.ns*Math.pow(Be,this.ns)),this.rh=this.a*this.f0*Math.pow(En,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(Oe){var e=Oe.x,Te=Oe.y;Math.abs(2*Math.abs(Te)-Math.PI)<=EPSLN&&(Te=sign(Te)*(HALF_PI-2*EPSLN));var ke=Math.abs(Math.abs(Te)-HALF_PI),Be,Ue;if(ke>EPSLN)Be=tsfnz(this.e,Te,Math.sin(Te)),Ue=this.a*this.f0*Math.pow(Be,this.ns);else{if(ke=Te*this.ns,ke<=0)return null;Ue=0}var He=this.ns*adjust_lon(e-this.long0);return Oe.x=this.k0*(Ue*Math.sin(He))+this.x0,Oe.y=this.k0*(this.rh-Ue*Math.cos(He))+this.y0,Oe}function inverse$m(Oe){var e,Te,ke,Be,Ue,He=(Oe.x-this.x0)/this.k0,We=this.rh-(Oe.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(He*He+We*We),Te=1):(e=-Math.sqrt(He*He+We*We),Te=-1);var Cn=0;if(e!==0&&(Cn=Math.atan2(Te*He,Te*We)),e!==0||this.ns>0){if(Te=1/this.ns,ke=Math.pow(e/(this.a*this.f0),Te),Be=phi2z(this.e,ke),Be===-9999)return null}else Be=-HALF_PI;return Ue=adjust_lon(Cn/this.ns+this.long0),Oe.x=Ue,Oe.y=Be,Oe}var names$n=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$n,forward:forward$m,inverse:inverse$m,names:names$n};function init$m(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(Oe){var e,Te,ke,Be,Ue,He,We,Cn=Oe.x,En=Oe.y,An=adjust_lon(Cn-this.long0);return e=Math.pow((1+this.e*Math.sin(En))/(1-this.e*Math.sin(En)),this.alfa*this.e/2),Te=2*(Math.atan(this.k*Math.pow(Math.tan(En/2+this.s45),this.alfa)/e)-this.s45),ke=-An*this.alfa,Be=Math.asin(Math.cos(this.ad)*Math.sin(Te)+Math.sin(this.ad)*Math.cos(Te)*Math.cos(ke)),Ue=Math.asin(Math.cos(Te)*Math.sin(ke)/Math.cos(Be)),He=this.n*Ue,We=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(Be/2+this.s45),this.n),Oe.y=We*Math.cos(He)/1,Oe.x=We*Math.sin(He)/1,this.czech||(Oe.y*=-1,Oe.x*=-1),Oe}function inverse$l(Oe){var e,Te,ke,Be,Ue,He,We,Cn,En=Oe.x;Oe.x=Oe.y,Oe.y=En,this.czech||(Oe.y*=-1,Oe.x*=-1),He=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),Ue=Math.atan2(Oe.y,Oe.x),Be=Ue/Math.sin(this.s0),ke=2*(Math.atan(Math.pow(this.ro0/He,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(ke)-Math.sin(this.ad)*Math.cos(ke)*Math.cos(Be)),Te=Math.asin(Math.cos(ke)*Math.sin(Be)/Math.cos(e)),Oe.x=this.long0-Te/this.alfa,We=e,Cn=0;var An=0;do Oe.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(We))/(1-this.e*Math.sin(We)),this.e/2))-this.s45),Math.abs(We-Oe.y)<1e-10&&(Cn=1),We=Oe.y,An+=1;while(Cn===0&&An<15);return An>=15?null:Oe}var names$m=["Krovak","krovak"];const krovak={init:init$m,forward:forward$l,inverse:inverse$l,names:names$m};function mlfn(Oe,e,Te,ke,Be){return Oe*Be-e*Math.sin(2*Be)+Te*Math.sin(4*Be)-ke*Math.sin(6*Be)}function e0fn(Oe){return 1-.25*Oe*(1+Oe/16*(3+1.25*Oe))}function e1fn(Oe){return .375*Oe*(1+.25*Oe*(1+.46875*Oe))}function e2fn(Oe){return .05859375*Oe*Oe*(1+.75*Oe)}function e3fn(Oe){return Oe*Oe*Oe*(35/3072)}function gN(Oe,e,Te){var ke=e*Te;return Oe/Math.sqrt(1-ke*ke)}function adjust_lat(Oe){return Math.abs(Oe)<HALF_PI?Oe:Oe-sign(Oe)*Math.PI}function imlfn(Oe,e,Te,ke,Be){var Ue,He;Ue=Oe/e;for(var We=0;We<15;We++)if(He=(Oe-(e*Ue-Te*Math.sin(2*Ue)+ke*Math.sin(4*Ue)-Be*Math.sin(6*Ue)))/(e-2*Te*Math.cos(2*Ue)+4*ke*Math.cos(4*Ue)-6*Be*Math.cos(6*Ue)),Ue+=He,Math.abs(He)<=1e-10)return Ue;return NaN}function init$l(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(Oe){var e,Te,ke=Oe.x,Be=Oe.y;if(ke=adjust_lon(ke-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(Be)*Math.sin(ke)),Te=this.a*(Math.atan2(Math.tan(Be),Math.cos(ke))-this.lat0);else{var Ue=Math.sin(Be),He=Math.cos(Be),We=gN(this.a,this.e,Ue),Cn=Math.tan(Be)*Math.tan(Be),En=ke*Math.cos(Be),An=En*En,Sn=this.es*He*He/(1-this.es),Tn=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,Be);e=We*En*(1-An*Cn*(1/6-(8-Cn+8*Sn)*An/120)),Te=Tn-this.ml0+We*Ue/He*An*(.5+(5-Cn+6*Sn)*An/24)}return Oe.x=e+this.x0,Oe.y=Te+this.y0,Oe}function inverse$k(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e=Oe.x/this.a,Te=Oe.y/this.a,ke,Be;if(this.sphere){var Ue=Te+this.lat0;ke=Math.asin(Math.sin(Ue)*Math.cos(e)),Be=Math.atan2(Math.tan(e),Math.cos(Ue))}else{var He=this.ml0/this.a+Te,We=imlfn(He,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(We)-HALF_PI)<=EPSLN)return Oe.x=this.long0,Oe.y=HALF_PI,Te<0&&(Oe.y*=-1),Oe;var Cn=gN(this.a,this.e,Math.sin(We)),En=Cn*Cn*Cn/this.a/this.a*(1-this.es),An=Math.pow(Math.tan(We),2),Sn=e*this.a/Cn,Tn=Sn*Sn;ke=We-Cn*Math.tan(We)/En*Sn*Sn*(.5-(1+3*An)*Sn*Sn/24),Be=Sn*(1-Tn*(An/3+(1+3*An)*An*Tn/15))/Math.cos(We)}return Oe.x=adjust_lon(Be+this.long0),Oe.y=adjust_lat(ke),Oe}var names$l=["Cassini","Cassini_Soldner","cass"];const cass={init:init$l,forward:forward$k,inverse:inverse$k,names:names$l};function qsfnz(Oe,e){var Te;return Oe>1e-7?(Te=Oe*e,(1-Oe*Oe)*(e/(1-Te*Te)-.5/Oe*Math.log((1-Te)/(1+Te)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$k(){var Oe=Math.abs(this.lat0);if(Math.abs(Oe-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(Oe)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(Oe){var e,Te,ke,Be,Ue,He,We,Cn,En,An,Sn=Oe.x,Tn=Oe.y;if(Sn=adjust_lon(Sn-this.long0),this.sphere){if(Ue=Math.sin(Tn),An=Math.cos(Tn),ke=Math.cos(Sn),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(Te=this.mode===this.EQUIT?1+An*ke:1+this.sinph0*Ue+this.cosph0*An*ke,Te<=EPSLN)return null;Te=Math.sqrt(2/Te),e=Te*An*Math.sin(Sn),Te*=this.mode===this.EQUIT?Ue:this.cosph0*Ue-this.sinph0*An*ke}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(ke=-ke),Math.abs(Tn+this.lat0)<EPSLN)return null;Te=FORTPI-Tn*.5,Te=2*(this.mode===this.S_POLE?Math.cos(Te):Math.sin(Te)),e=Te*Math.sin(Sn),Te*=ke}}else{switch(We=0,Cn=0,En=0,ke=Math.cos(Sn),Be=Math.sin(Sn),Ue=Math.sin(Tn),He=qsfnz(this.e,Ue),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(We=He/this.qp,Cn=Math.sqrt(1-We*We)),this.mode){case this.OBLIQ:En=1+this.sinb1*We+this.cosb1*Cn*ke;break;case this.EQUIT:En=1+Cn*ke;break;case this.N_POLE:En=HALF_PI+Tn,He=this.qp-He;break;case this.S_POLE:En=Tn-HALF_PI,He=this.qp+He;break}if(Math.abs(En)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:En=Math.sqrt(2/En),this.mode===this.OBLIQ?Te=this.ymf*En*(this.cosb1*We-this.sinb1*Cn*ke):Te=(En=Math.sqrt(2/(1+Cn*ke)))*We*this.ymf,e=this.xmf*En*Cn*Be;break;case this.N_POLE:case this.S_POLE:He>=0?(e=(En=Math.sqrt(He))*Be,Te=ke*(this.mode===this.S_POLE?En:-En)):e=Te=0;break}}return Oe.x=this.a*e+this.x0,Oe.y=this.a*Te+this.y0,Oe}function inverse$j(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e=Oe.x/this.a,Te=Oe.y/this.a,ke,Be,Ue,He,We,Cn,En;if(this.sphere){var An=0,Sn,Tn=0;if(Sn=Math.sqrt(e*e+Te*Te),Be=Sn*.5,Be>1)return null;switch(Be=2*Math.asin(Be),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Tn=Math.sin(Be),An=Math.cos(Be)),this.mode){case this.EQUIT:Be=Math.abs(Sn)<=EPSLN?0:Math.asin(Te*Tn/Sn),e*=Tn,Te=An*Sn;break;case this.OBLIQ:Be=Math.abs(Sn)<=EPSLN?this.lat0:Math.asin(An*this.sinph0+Te*Tn*this.cosph0/Sn),e*=Tn*this.cosph0,Te=(An-Math.sin(Be)*this.sinph0)*Sn;break;case this.N_POLE:Te=-Te,Be=HALF_PI-Be;break;case this.S_POLE:Be-=HALF_PI;break}ke=Te===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,Te)}else{if(En=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,Te*=this.dd,Cn=Math.sqrt(e*e+Te*Te),Cn<EPSLN)return Oe.x=this.long0,Oe.y=this.lat0,Oe;He=2*Math.asin(.5*Cn/this.rq),Ue=Math.cos(He),e*=He=Math.sin(He),this.mode===this.OBLIQ?(En=Ue*this.sinb1+Te*He*this.cosb1/Cn,We=this.qp*En,Te=Cn*this.cosb1*Ue-Te*this.sinb1*He):(En=Te*He/Cn,We=this.qp*En,Te=Cn*Ue)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(Te=-Te),We=e*e+Te*Te,!We)return Oe.x=this.long0,Oe.y=this.lat0,Oe;En=1-We/this.qp,this.mode===this.S_POLE&&(En=-En)}ke=Math.atan2(e,Te),Be=authlat(Math.asin(En),this.apa)}return Oe.x=adjust_lon(this.long0+ke),Oe.y=Be,Oe}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(Oe){var e,Te=[];return Te[0]=Oe*P00,e=Oe*Oe,Te[0]+=e*P01,Te[1]=e*P10,e*=Oe,Te[0]+=e*P02,Te[1]+=e*P11,Te[2]=e*P20,Te}function authlat(Oe,e){var Te=Oe+Oe;return Oe+e[0]*Math.sin(Te)+e[1]*Math.sin(Te+Te)+e[2]*Math.sin(Te+Te+Te)}var names$k=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$k,forward:forward$j,inverse:inverse$j,names:names$k,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(Oe){return Math.abs(Oe)>1&&(Oe=Oe>1?1:-1),Math.asin(Oe)}function init$j(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(Oe){var e=Oe.x,Te=Oe.y;this.sin_phi=Math.sin(Te),this.cos_phi=Math.cos(Te);var ke=qsfnz(this.e3,this.sin_phi),Be=this.a*Math.sqrt(this.c-this.ns0*ke)/this.ns0,Ue=this.ns0*adjust_lon(e-this.long0),He=Be*Math.sin(Ue)+this.x0,We=this.rh-Be*Math.cos(Ue)+this.y0;return Oe.x=He,Oe.y=We,Oe}function inverse$i(Oe){var e,Te,ke,Be,Ue,He;return Oe.x-=this.x0,Oe.y=this.rh-Oe.y+this.y0,this.ns0>=0?(e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),ke=1):(e=-Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),ke=-1),Be=0,e!==0&&(Be=Math.atan2(ke*Oe.x,ke*Oe.y)),ke=e*this.ns0/this.a,this.sphere?He=Math.asin((this.c-ke*ke)/(2*this.ns0)):(Te=(this.c-ke*ke)/this.ns0,He=this.phi1z(this.e3,Te)),Ue=adjust_lon(Be/this.ns0+this.long0),Oe.x=Ue,Oe.y=He,Oe}function phi1z(Oe,e){var Te,ke,Be,Ue,He,We=asinz(.5*e);if(Oe<EPSLN)return We;for(var Cn=Oe*Oe,En=1;En<=25;En++)if(Te=Math.sin(We),ke=Math.cos(We),Be=Oe*Te,Ue=1-Be*Be,He=.5*Ue*Ue/ke*(e/(1-Cn)-Te/Ue+.5/Oe*Math.log((1-Be)/(1+Be))),We=We+He,Math.abs(He)<=1e-7)return We;return null}var names$j=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$j,forward:forward$i,inverse:inverse$i,names:names$j,phi1z};function init$i(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(Oe){var e,Te,ke,Be,Ue,He,We,Cn,En=Oe.x,An=Oe.y;return ke=adjust_lon(En-this.long0),e=Math.sin(An),Te=Math.cos(An),Be=Math.cos(ke),He=this.sin_p14*e+this.cos_p14*Te*Be,Ue=1,He>0||Math.abs(He)<=EPSLN?(We=this.x0+this.a*Ue*Te*Math.sin(ke)/He,Cn=this.y0+this.a*Ue*(this.cos_p14*e-this.sin_p14*Te*Be)/He):(We=this.x0+this.infinity_dist*Te*Math.sin(ke),Cn=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*Te*Be)),Oe.x=We,Oe.y=Cn,Oe}function inverse$h(Oe){var e,Te,ke,Be,Ue,He;return Oe.x=(Oe.x-this.x0)/this.a,Oe.y=(Oe.y-this.y0)/this.a,Oe.x/=this.k0,Oe.y/=this.k0,(e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y))?(Be=Math.atan2(e,this.rc),Te=Math.sin(Be),ke=Math.cos(Be),He=asinz(ke*this.sin_p14+Oe.y*Te*this.cos_p14/e),Ue=Math.atan2(Oe.x*Te,e*this.cos_p14*ke-Oe.y*this.sin_p14*Te),Ue=adjust_lon(this.long0+Ue)):(He=this.phic0,Ue=0),Oe.x=Ue,Oe.y=He,Oe}var names$i=["gnom"];const gnom={init:init$i,forward:forward$h,inverse:inverse$h,names:names$i};function iqsfnz(Oe,e){var Te=1-(1-Oe*Oe)/(2*Oe)*Math.log((1-Oe)/(1+Oe));if(Math.abs(Math.abs(e)-Te)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var ke=Math.asin(.5*e),Be,Ue,He,We,Cn=0;Cn<30;Cn++)if(Ue=Math.sin(ke),He=Math.cos(ke),We=Oe*Ue,Be=Math.pow(1-We*We,2)/(2*He)*(e/(1-Oe*Oe)-Ue/(1-We*We)+.5/Oe*Math.log((1-We)/(1+We))),ke+=Be,Math.abs(Be)<=1e-10)return ke;return NaN}function init$h(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(Oe){var e=Oe.x,Te=Oe.y,ke,Be,Ue=adjust_lon(e-this.long0);if(this.sphere)ke=this.x0+this.a*Ue*Math.cos(this.lat_ts),Be=this.y0+this.a*Math.sin(Te)/Math.cos(this.lat_ts);else{var He=qsfnz(this.e,Math.sin(Te));ke=this.x0+this.a*this.k0*Ue,Be=this.y0+this.a*He*.5/this.k0}return Oe.x=ke,Oe.y=Be,Oe}function inverse$g(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e,Te;return this.sphere?(e=adjust_lon(this.long0+Oe.x/this.a/Math.cos(this.lat_ts)),Te=Math.asin(Oe.y/this.a*Math.cos(this.lat_ts))):(Te=iqsfnz(this.e,2*Oe.y*this.k0/this.a),e=adjust_lon(this.long0+Oe.x/(this.a*this.k0))),Oe.x=e,Oe.y=Te,Oe}var names$h=["cea"];const cea={init:init$h,forward:forward$g,inverse:inverse$g,names:names$h};function init$g(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(Oe){var e=Oe.x,Te=Oe.y,ke=adjust_lon(e-this.long0),Be=adjust_lat(Te-this.lat0);return Oe.x=this.x0+this.a*ke*this.rc,Oe.y=this.y0+this.a*Be,Oe}function inverse$f(Oe){var e=Oe.x,Te=Oe.y;return Oe.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),Oe.y=adjust_lat(this.lat0+(Te-this.y0)/this.a),Oe}var names$g=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$g,forward:forward$f,inverse:inverse$f,names:names$g};var MAX_ITER$1=20;function init$f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(Oe){var e=Oe.x,Te=Oe.y,ke,Be,Ue,He=adjust_lon(e-this.long0);if(Ue=He*Math.sin(Te),this.sphere)Math.abs(Te)<=EPSLN?(ke=this.a*He,Be=-1*this.a*this.lat0):(ke=this.a*Math.sin(Ue)/Math.tan(Te),Be=this.a*(adjust_lat(Te-this.lat0)+(1-Math.cos(Ue))/Math.tan(Te)));else if(Math.abs(Te)<=EPSLN)ke=this.a*He,Be=-1*this.ml0;else{var We=gN(this.a,this.e,Math.sin(Te))/Math.tan(Te);ke=We*Math.sin(Ue),Be=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,Te)-this.ml0+We*(1-Math.cos(Ue))}return Oe.x=ke+this.x0,Oe.y=Be+this.y0,Oe}function inverse$e(Oe){var e,Te,ke,Be,Ue,He,We,Cn,En;if(ke=Oe.x-this.x0,Be=Oe.y-this.y0,this.sphere)if(Math.abs(Be+this.a*this.lat0)<=EPSLN)e=adjust_lon(ke/this.a+this.long0),Te=0;else{He=this.lat0+Be/this.a,We=ke*ke/this.a/this.a+He*He,Cn=He;var An;for(Ue=MAX_ITER$1;Ue;--Ue)if(An=Math.tan(Cn),En=-1*(He*(Cn*An+1)-Cn-.5*(Cn*Cn+We)*An)/((Cn-He)/An-1),Cn+=En,Math.abs(En)<=EPSLN){Te=Cn;break}e=adjust_lon(this.long0+Math.asin(ke*Math.tan(Cn)/this.a)/Math.sin(Te))}else if(Math.abs(Be+this.ml0)<=EPSLN)Te=0,e=adjust_lon(this.long0+ke/this.a);else{He=(this.ml0+Be)/this.a,We=ke*ke/this.a/this.a+He*He,Cn=He;var Sn,Tn,Ln,Bn,ei;for(Ue=MAX_ITER$1;Ue;--Ue)if(ei=this.e*Math.sin(Cn),Sn=Math.sqrt(1-ei*ei)*Math.tan(Cn),Tn=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,Cn),Ln=this.e0-2*this.e1*Math.cos(2*Cn)+4*this.e2*Math.cos(4*Cn)-6*this.e3*Math.cos(6*Cn),Bn=Tn/this.a,En=(He*(Sn*Bn+1)-Bn-.5*Sn*(Bn*Bn+We))/(this.es*Math.sin(2*Cn)*(Bn*Bn+We-2*He*Bn)/(4*Sn)+(He-Bn)*(Sn*Ln-2/Math.sin(2*Cn))-Ln),Cn-=En,Math.abs(En)<=EPSLN){Te=Cn;break}Sn=Math.sqrt(1-this.es*Math.pow(Math.sin(Te),2))*Math.tan(Te),e=adjust_lon(this.long0+Math.asin(ke*Sn/this.a)/Math.sin(Te))}return Oe.x=e,Oe.y=Te,Oe}var names$f=["Polyconic","poly"];const poly={init:init$f,forward:forward$e,inverse:inverse$e,names:names$f};function init$e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(Oe){var e,Te=Oe.x,ke=Oe.y,Be=ke-this.lat0,Ue=Te-this.long0,He=Be/SEC_TO_RAD*1e-5,We=Ue,Cn=1,En=0;for(e=1;e<=10;e++)Cn=Cn*He,En=En+this.A[e]*Cn;var An=En,Sn=We,Tn=1,Ln=0,Bn,ei,ti=0,ni=0;for(e=1;e<=6;e++)Bn=Tn*An-Ln*Sn,ei=Ln*An+Tn*Sn,Tn=Bn,Ln=ei,ti=ti+this.B_re[e]*Tn-this.B_im[e]*Ln,ni=ni+this.B_im[e]*Tn+this.B_re[e]*Ln;return Oe.x=ni*this.a+this.x0,Oe.y=ti*this.a+this.y0,Oe}function inverse$d(Oe){var e,Te=Oe.x,ke=Oe.y,Be=Te-this.x0,Ue=ke-this.y0,He=Ue/this.a,We=Be/this.a,Cn=1,En=0,An,Sn,Tn=0,Ln=0;for(e=1;e<=6;e++)An=Cn*He-En*We,Sn=En*He+Cn*We,Cn=An,En=Sn,Tn=Tn+this.C_re[e]*Cn-this.C_im[e]*En,Ln=Ln+this.C_im[e]*Cn+this.C_re[e]*En;for(var Bn=0;Bn<this.iterations;Bn++){var ei=Tn,ti=Ln,ni,ri,si=He,ai=We;for(e=2;e<=6;e++)ni=ei*Tn-ti*Ln,ri=ti*Tn+ei*Ln,ei=ni,ti=ri,si=si+(e-1)*(this.B_re[e]*ei-this.B_im[e]*ti),ai=ai+(e-1)*(this.B_im[e]*ei+this.B_re[e]*ti);ei=1,ti=0;var li=this.B_re[1],Pi=this.B_im[1];for(e=2;e<=6;e++)ni=ei*Tn-ti*Ln,ri=ti*Tn+ei*Ln,ei=ni,ti=ri,li=li+e*(this.B_re[e]*ei-this.B_im[e]*ti),Pi=Pi+e*(this.B_im[e]*ei+this.B_re[e]*ti);var pi=li*li+Pi*Pi;Tn=(si*li+ai*Pi)/pi,Ln=(ai*li-si*Pi)/pi}var vi=Tn,Ri=Ln,Fi=1,di=0;for(e=1;e<=9;e++)Fi=Fi*vi,di=di+this.D[e]*Fi;var ci=this.lat0+di*SEC_TO_RAD*1e5,Mi=this.long0+Ri;return Oe.x=Mi,Oe.y=ci,Oe}var names$e=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$e,forward:forward$d,inverse:inverse$d,names:names$e};function init$d(){}function forward$c(Oe){var e=Oe.x,Te=Oe.y,ke=adjust_lon(e-this.long0),Be=this.x0+this.a*ke,Ue=this.y0+this.a*Math.log(Math.tan(Math.PI/4+Te/2.5))*1.25;return Oe.x=Be,Oe.y=Ue,Oe}function inverse$c(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e=adjust_lon(this.long0+Oe.x/this.a),Te=2.5*(Math.atan(Math.exp(.8*Oe.y/this.a))-Math.PI/4);return Oe.x=e,Oe.y=Te,Oe}var names$d=["Miller_Cylindrical","mill"];const mill={init:init$d,forward:forward$c,inverse:inverse$c,names:names$d};var MAX_ITER=20;function init$c(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(Oe){var e,Te,ke=Oe.x,Be=Oe.y;if(ke=adjust_lon(ke-this.long0),this.sphere){if(!this.m)Be=this.n!==1?Math.asin(this.n*Math.sin(Be)):Be;else for(var Ue=this.n*Math.sin(Be),He=MAX_ITER;He;--He){var We=(this.m*Be+Math.sin(Be)-Ue)/(this.m+Math.cos(Be));if(Be-=We,Math.abs(We)<EPSLN)break}e=this.a*this.C_x*ke*(this.m+Math.cos(Be)),Te=this.a*this.C_y*Be}else{var Cn=Math.sin(Be),En=Math.cos(Be);Te=this.a*pj_mlfn(Be,Cn,En,this.en),e=this.a*ke*En/Math.sqrt(1-this.es*Cn*Cn)}return Oe.x=e,Oe.y=Te,Oe}function inverse$b(Oe){var e,Te,ke,Be;return Oe.x-=this.x0,ke=Oe.x/this.a,Oe.y-=this.y0,e=Oe.y/this.a,this.sphere?(e/=this.C_y,ke=ke/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),ke=adjust_lon(ke+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(Oe.y/this.a,this.es,this.en),Be=Math.abs(e),Be<HALF_PI?(Be=Math.sin(e),Te=this.long0+Oe.x*Math.sqrt(1-this.es*Be*Be)/(this.a*Math.cos(e)),ke=adjust_lon(Te)):Be-EPSLN<HALF_PI&&(ke=this.long0)),Oe.x=ke,Oe.y=e,Oe}var names$c=["Sinusoidal","sinu"];const sinu={init:init$c,forward:forward$b,inverse:inverse$b,names:names$c};function init$b(){}function forward$a(Oe){for(var e=Oe.x,Te=Oe.y,ke=adjust_lon(e-this.long0),Be=Te,Ue=Math.PI*Math.sin(Te);;){var He=-(Be+Math.sin(Be)-Ue)/(1+Math.cos(Be));if(Be+=He,Math.abs(He)<EPSLN)break}Be/=2,Math.PI/2-Math.abs(Te)<EPSLN&&(ke=0);var We=.900316316158*this.a*ke*Math.cos(Be)+this.x0,Cn=1.4142135623731*this.a*Math.sin(Be)+this.y0;return Oe.x=We,Oe.y=Cn,Oe}function inverse$a(Oe){var e,Te;Oe.x-=this.x0,Oe.y-=this.y0,Te=Oe.y/(1.4142135623731*this.a),Math.abs(Te)>.999999999999&&(Te=.999999999999),e=Math.asin(Te);var ke=adjust_lon(this.long0+Oe.x/(.900316316158*this.a*Math.cos(e)));ke<-Math.PI&&(ke=-Math.PI),ke>Math.PI&&(ke=Math.PI),Te=(2*e+Math.sin(2*e))/Math.PI,Math.abs(Te)>1&&(Te=1);var Be=Math.asin(Te);return Oe.x=ke,Oe.y=Be,Oe}var names$b=["Mollweide","moll"];const moll={init:init$b,forward:forward$a,inverse:inverse$a,names:names$b};function init$a(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(Oe){var e=Oe.x,Te=Oe.y,ke;if(this.sphere)ke=this.a*(this.g-Te);else{var Be=mlfn(this.e0,this.e1,this.e2,this.e3,Te);ke=this.a*(this.g-Be)}var Ue=this.ns*adjust_lon(e-this.long0),He=this.x0+ke*Math.sin(Ue),We=this.y0+this.rh-ke*Math.cos(Ue);return Oe.x=He,Oe.y=We,Oe}function inverse$9(Oe){Oe.x-=this.x0,Oe.y=this.rh-Oe.y+this.y0;var e,Te,ke,Be;this.ns>=0?(Te=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),e=1):(Te=-Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),e=-1);var Ue=0;if(Te!==0&&(Ue=Math.atan2(e*Oe.x,e*Oe.y)),this.sphere)return Be=adjust_lon(this.long0+Ue/this.ns),ke=adjust_lat(this.g-Te/this.a),Oe.x=Be,Oe.y=ke,Oe;var He=this.g-Te/this.a;return ke=imlfn(He,this.e0,this.e1,this.e2,this.e3),Be=adjust_lon(this.long0+Ue/this.ns),Oe.x=Be,Oe.y=ke,Oe}var names$a=["Equidistant_Conic","eqdc"];const eqdc={init:init$a,forward:forward$9,inverse:inverse$9,names:names$a};function init$9(){this.R=this.a}function forward$8(Oe){var e=Oe.x,Te=Oe.y,ke=adjust_lon(e-this.long0),Be,Ue;Math.abs(Te)<=EPSLN&&(Be=this.x0+this.R*ke,Ue=this.y0);var He=asinz(2*Math.abs(Te/Math.PI));(Math.abs(ke)<=EPSLN||Math.abs(Math.abs(Te)-HALF_PI)<=EPSLN)&&(Be=this.x0,Te>=0?Ue=this.y0+Math.PI*this.R*Math.tan(.5*He):Ue=this.y0+Math.PI*this.R*-Math.tan(.5*He));var We=.5*Math.abs(Math.PI/ke-ke/Math.PI),Cn=We*We,En=Math.sin(He),An=Math.cos(He),Sn=An/(En+An-1),Tn=Sn*Sn,Ln=Sn*(2/En-1),Bn=Ln*Ln,ei=Math.PI*this.R*(We*(Sn-Bn)+Math.sqrt(Cn*(Sn-Bn)*(Sn-Bn)-(Bn+Cn)*(Tn-Bn)))/(Bn+Cn);ke<0&&(ei=-ei),Be=this.x0+ei;var ti=Cn+Sn;return ei=Math.PI*this.R*(Ln*ti-We*Math.sqrt((Bn+Cn)*(Cn+1)-ti*ti))/(Bn+Cn),Te>=0?Ue=this.y0+ei:Ue=this.y0-ei,Oe.x=Be,Oe.y=Ue,Oe}function inverse$8(Oe){var e,Te,ke,Be,Ue,He,We,Cn,En,An,Sn,Tn,Ln;return Oe.x-=this.x0,Oe.y-=this.y0,Sn=Math.PI*this.R,ke=Oe.x/Sn,Be=Oe.y/Sn,Ue=ke*ke+Be*Be,He=-Math.abs(Be)*(1+Ue),We=He-2*Be*Be+ke*ke,Cn=-2*He+1+2*Be*Be+Ue*Ue,Ln=Be*Be/Cn+(2*We*We*We/Cn/Cn/Cn-9*He*We/Cn/Cn)/27,En=(He-We*We/3/Cn)/Cn,An=2*Math.sqrt(-En/3),Sn=3*Ln/En/An,Math.abs(Sn)>1&&(Sn>=0?Sn=1:Sn=-1),Tn=Math.acos(Sn)/3,Oe.y>=0?Te=(-An*Math.cos(Tn+Math.PI/3)-We/3/Cn)*Math.PI:Te=-(-An*Math.cos(Tn+Math.PI/3)-We/3/Cn)*Math.PI,Math.abs(ke)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(Ue-1+Math.sqrt(1+2*(ke*ke-Be*Be)+Ue*Ue))/2/ke),Oe.x=e,Oe.y=Te,Oe}var names$9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$9,forward:forward$8,inverse:inverse$8,names:names$9};function init$8(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(Oe){var e=Oe.x,Te=Oe.y,ke=Math.sin(Oe.y),Be=Math.cos(Oe.y),Ue=adjust_lon(e-this.long0),He,We,Cn,En,An,Sn,Tn,Ln,Bn,ei,ti,ni,ri,si,ai,li,Pi,pi,vi,Ri,Fi,di,ci;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(Oe.x=this.x0+this.a*(HALF_PI-Te)*Math.sin(Ue),Oe.y=this.y0-this.a*(HALF_PI-Te)*Math.cos(Ue),Oe):Math.abs(this.sin_p12+1)<=EPSLN?(Oe.x=this.x0+this.a*(HALF_PI+Te)*Math.sin(Ue),Oe.y=this.y0+this.a*(HALF_PI+Te)*Math.cos(Ue),Oe):(pi=this.sin_p12*ke+this.cos_p12*Be*Math.cos(Ue),li=Math.acos(pi),Pi=li?li/Math.sin(li):1,Oe.x=this.x0+this.a*Pi*Be*Math.sin(Ue),Oe.y=this.y0+this.a*Pi*(this.cos_p12*ke-this.sin_p12*Be*Math.cos(Ue)),Oe):(He=e0fn(this.es),We=e1fn(this.es),Cn=e2fn(this.es),En=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(An=this.a*mlfn(He,We,Cn,En,HALF_PI),Sn=this.a*mlfn(He,We,Cn,En,Te),Oe.x=this.x0+(An-Sn)*Math.sin(Ue),Oe.y=this.y0-(An-Sn)*Math.cos(Ue),Oe):Math.abs(this.sin_p12+1)<=EPSLN?(An=this.a*mlfn(He,We,Cn,En,HALF_PI),Sn=this.a*mlfn(He,We,Cn,En,Te),Oe.x=this.x0+(An+Sn)*Math.sin(Ue),Oe.y=this.y0+(An+Sn)*Math.cos(Ue),Oe):(Tn=ke/Be,Ln=gN(this.a,this.e,this.sin_p12),Bn=gN(this.a,this.e,ke),ei=Math.atan((1-this.es)*Tn+this.es*Ln*this.sin_p12/(Bn*Be)),ti=Math.atan2(Math.sin(Ue),this.cos_p12*Math.tan(ei)-this.sin_p12*Math.cos(Ue)),ti===0?vi=Math.asin(this.cos_p12*Math.sin(ei)-this.sin_p12*Math.cos(ei)):Math.abs(Math.abs(ti)-Math.PI)<=EPSLN?vi=-Math.asin(this.cos_p12*Math.sin(ei)-this.sin_p12*Math.cos(ei)):vi=Math.asin(Math.sin(Ue)*Math.cos(ei)/Math.sin(ti)),ni=this.e*this.sin_p12/Math.sqrt(1-this.es),ri=this.e*this.cos_p12*Math.cos(ti)/Math.sqrt(1-this.es),si=ni*ri,ai=ri*ri,Ri=vi*vi,Fi=Ri*vi,di=Fi*vi,ci=di*vi,li=Ln*vi*(1-Ri*ai*(1-ai)/6+Fi/8*si*(1-2*ai)+di/120*(ai*(4-7*ai)-3*ni*ni*(1-7*ai))-ci/48*si),Oe.x=this.x0+li*Math.sin(ti),Oe.y=this.y0+li*Math.cos(ti),Oe))}function inverse$7(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e,Te,ke,Be,Ue,He,We,Cn,En,An,Sn,Tn,Ln,Bn,ei,ti,ni,ri,si,ai,li,Pi,pi,vi;return this.sphere?(e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),e>2*HALF_PI*this.a?void 0:(Te=e/this.a,ke=Math.sin(Te),Be=Math.cos(Te),Ue=this.long0,Math.abs(e)<=EPSLN?He=this.lat0:(He=asinz(Be*this.sin_p12+Oe.y*ke*this.cos_p12/e),We=Math.abs(this.lat0)-HALF_PI,Math.abs(We)<=EPSLN?this.lat0>=0?Ue=adjust_lon(this.long0+Math.atan2(Oe.x,-Oe.y)):Ue=adjust_lon(this.long0-Math.atan2(-Oe.x,Oe.y)):Ue=adjust_lon(this.long0+Math.atan2(Oe.x*ke,e*this.cos_p12*Be-Oe.y*this.sin_p12*ke))),Oe.x=Ue,Oe.y=He,Oe)):(Cn=e0fn(this.es),En=e1fn(this.es),An=e2fn(this.es),Sn=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(Tn=this.a*mlfn(Cn,En,An,Sn,HALF_PI),e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),Ln=Tn-e,He=imlfn(Ln/this.a,Cn,En,An,Sn),Ue=adjust_lon(this.long0+Math.atan2(Oe.x,-1*Oe.y)),Oe.x=Ue,Oe.y=He,Oe):Math.abs(this.sin_p12+1)<=EPSLN?(Tn=this.a*mlfn(Cn,En,An,Sn,HALF_PI),e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),Ln=e-Tn,He=imlfn(Ln/this.a,Cn,En,An,Sn),Ue=adjust_lon(this.long0+Math.atan2(Oe.x,Oe.y)),Oe.x=Ue,Oe.y=He,Oe):(e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),ti=Math.atan2(Oe.x,Oe.y),Bn=gN(this.a,this.e,this.sin_p12),ni=Math.cos(ti),ri=this.e*this.cos_p12*ni,si=-ri*ri/(1-this.es),ai=3*this.es*(1-si)*this.sin_p12*this.cos_p12*ni/(1-this.es),li=e/Bn,Pi=li-si*(1+si)*Math.pow(li,3)/6-ai*(1+3*si)*Math.pow(li,4)/24,pi=1-si*Pi*Pi/2-li*Pi*Pi*Pi/6,ei=Math.asin(this.sin_p12*Math.cos(Pi)+this.cos_p12*Math.sin(Pi)*ni),Ue=adjust_lon(this.long0+Math.asin(Math.sin(ti)*Math.sin(Pi)/Math.cos(ei))),vi=Math.sin(ei),He=Math.atan2((vi-this.es*pi*this.sin_p12)*Math.tan(ei),vi*(1-this.es)),Oe.x=Ue,Oe.y=He,Oe))}var names$8=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$8,forward:forward$7,inverse:inverse$7,names:names$8};function init$7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(Oe){var e,Te,ke,Be,Ue,He,We,Cn,En=Oe.x,An=Oe.y;return ke=adjust_lon(En-this.long0),e=Math.sin(An),Te=Math.cos(An),Be=Math.cos(ke),He=this.sin_p14*e+this.cos_p14*Te*Be,Ue=1,(He>0||Math.abs(He)<=EPSLN)&&(We=this.a*Ue*Te*Math.sin(ke),Cn=this.y0+this.a*Ue*(this.cos_p14*e-this.sin_p14*Te*Be)),Oe.x=We,Oe.y=Cn,Oe}function inverse$6(Oe){var e,Te,ke,Be,Ue,He,We;return Oe.x-=this.x0,Oe.y-=this.y0,e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),Te=asinz(e/this.a),ke=Math.sin(Te),Be=Math.cos(Te),He=this.long0,Math.abs(e)<=EPSLN?(We=this.lat0,Oe.x=He,Oe.y=We,Oe):(We=asinz(Be*this.sin_p14+Oe.y*ke*this.cos_p14/e),Ue=Math.abs(this.lat0)-HALF_PI,Math.abs(Ue)<=EPSLN?(this.lat0>=0?He=adjust_lon(this.long0+Math.atan2(Oe.x,-Oe.y)):He=adjust_lon(this.long0-Math.atan2(-Oe.x,Oe.y)),Oe.x=He,Oe.y=We,Oe):(He=adjust_lon(this.long0+Math.atan2(Oe.x*ke,e*this.cos_p14*Be-Oe.y*this.sin_p14*ke)),Oe.x=He,Oe.y=We,Oe))}var names$7=["ortho"];const ortho={init:init$7,forward:forward$6,inverse:inverse$6,names:names$7};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(Oe){var e={x:0,y:0},Te,ke,Be,Ue,He,We,Cn={value:0};if(Oe.x-=this.long0,this.es!==0?Te=Math.atan(this.one_minus_f_squared*Math.tan(Oe.y)):Te=Oe.y,ke=Oe.x,this.face===FACE_ENUM.TOP)Ue=HALF_PI-Te,ke>=FORTPI&&ke<=HALF_PI+FORTPI?(Cn.value=AREA_ENUM.AREA_0,Be=ke-HALF_PI):ke>HALF_PI+FORTPI||ke<=-(HALF_PI+FORTPI)?(Cn.value=AREA_ENUM.AREA_1,Be=ke>0?ke-SPI:ke+SPI):ke>-(HALF_PI+FORTPI)&&ke<=-FORTPI?(Cn.value=AREA_ENUM.AREA_2,Be=ke+HALF_PI):(Cn.value=AREA_ENUM.AREA_3,Be=ke);else if(this.face===FACE_ENUM.BOTTOM)Ue=HALF_PI+Te,ke>=FORTPI&&ke<=HALF_PI+FORTPI?(Cn.value=AREA_ENUM.AREA_0,Be=-ke+HALF_PI):ke<FORTPI&&ke>=-FORTPI?(Cn.value=AREA_ENUM.AREA_1,Be=-ke):ke<-FORTPI&&ke>=-(HALF_PI+FORTPI)?(Cn.value=AREA_ENUM.AREA_2,Be=-ke-HALF_PI):(Cn.value=AREA_ENUM.AREA_3,Be=ke>0?-ke+SPI:-ke-SPI);else{var En,An,Sn,Tn,Ln,Bn,ei;this.face===FACE_ENUM.RIGHT?ke=qsc_shift_lon_origin(ke,+HALF_PI):this.face===FACE_ENUM.BACK?ke=qsc_shift_lon_origin(ke,3.14159265359):this.face===FACE_ENUM.LEFT&&(ke=qsc_shift_lon_origin(ke,-HALF_PI)),Tn=Math.sin(Te),Ln=Math.cos(Te),Bn=Math.sin(ke),ei=Math.cos(ke),En=Ln*ei,An=Ln*Bn,Sn=Tn,this.face===FACE_ENUM.FRONT?(Ue=Math.acos(En),Be=qsc_fwd_equat_face_theta(Ue,Sn,An,Cn)):this.face===FACE_ENUM.RIGHT?(Ue=Math.acos(An),Be=qsc_fwd_equat_face_theta(Ue,Sn,-En,Cn)):this.face===FACE_ENUM.BACK?(Ue=Math.acos(-En),Be=qsc_fwd_equat_face_theta(Ue,Sn,-An,Cn)):this.face===FACE_ENUM.LEFT?(Ue=Math.acos(-An),Be=qsc_fwd_equat_face_theta(Ue,Sn,En,Cn)):(Ue=Be=0,Cn.value=AREA_ENUM.AREA_0)}return We=Math.atan(12/SPI*(Be+Math.acos(Math.sin(Be)*Math.cos(FORTPI))-HALF_PI)),He=Math.sqrt((1-Math.cos(Ue))/(Math.cos(We)*Math.cos(We))/(1-Math.cos(Math.atan(1/Math.cos(Be))))),Cn.value===AREA_ENUM.AREA_1?We+=HALF_PI:Cn.value===AREA_ENUM.AREA_2?We+=SPI:Cn.value===AREA_ENUM.AREA_3&&(We+=1.5*SPI),e.x=He*Math.cos(We),e.y=He*Math.sin(We),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,Oe.x=e.x,Oe.y=e.y,Oe}function inverse$5(Oe){var e={lam:0,phi:0},Te,ke,Be,Ue,He,We,Cn,En,An,Sn={value:0};if(Oe.x=(Oe.x-this.x0)/this.a,Oe.y=(Oe.y-this.y0)/this.a,ke=Math.atan(Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y)),Te=Math.atan2(Oe.y,Oe.x),Oe.x>=0&&Oe.x>=Math.abs(Oe.y)?Sn.value=AREA_ENUM.AREA_0:Oe.y>=0&&Oe.y>=Math.abs(Oe.x)?(Sn.value=AREA_ENUM.AREA_1,Te-=HALF_PI):Oe.x<0&&-Oe.x>=Math.abs(Oe.y)?(Sn.value=AREA_ENUM.AREA_2,Te=Te<0?Te+SPI:Te-SPI):(Sn.value=AREA_ENUM.AREA_3,Te+=HALF_PI),An=SPI/12*Math.tan(Te),He=Math.sin(An)/(Math.cos(An)-1/Math.sqrt(2)),We=Math.atan(He),Be=Math.cos(Te),Ue=Math.tan(ke),Cn=1-Be*Be*Ue*Ue*(1-Math.cos(Math.atan(1/Math.cos(We)))),Cn<-1?Cn=-1:Cn>1&&(Cn=1),this.face===FACE_ENUM.TOP)En=Math.acos(Cn),e.phi=HALF_PI-En,Sn.value===AREA_ENUM.AREA_0?e.lam=We+HALF_PI:Sn.value===AREA_ENUM.AREA_1?e.lam=We<0?We+SPI:We-SPI:Sn.value===AREA_ENUM.AREA_2?e.lam=We-HALF_PI:e.lam=We;else if(this.face===FACE_ENUM.BOTTOM)En=Math.acos(Cn),e.phi=En-HALF_PI,Sn.value===AREA_ENUM.AREA_0?e.lam=-We+HALF_PI:Sn.value===AREA_ENUM.AREA_1?e.lam=-We:Sn.value===AREA_ENUM.AREA_2?e.lam=-We-HALF_PI:e.lam=We<0?-We-SPI:-We+SPI;else{var Tn,Ln,Bn;Tn=Cn,An=Tn*Tn,An>=1?Bn=0:Bn=Math.sqrt(1-An)*Math.sin(We),An+=Bn*Bn,An>=1?Ln=0:Ln=Math.sqrt(1-An),Sn.value===AREA_ENUM.AREA_1?(An=Ln,Ln=-Bn,Bn=An):Sn.value===AREA_ENUM.AREA_2?(Ln=-Ln,Bn=-Bn):Sn.value===AREA_ENUM.AREA_3&&(An=Ln,Ln=Bn,Bn=-An),this.face===FACE_ENUM.RIGHT?(An=Tn,Tn=-Ln,Ln=An):this.face===FACE_ENUM.BACK?(Tn=-Tn,Ln=-Ln):this.face===FACE_ENUM.LEFT&&(An=Tn,Tn=Ln,Ln=-An),e.phi=Math.acos(-Bn)-HALF_PI,e.lam=Math.atan2(Ln,Tn),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-3.14159265359):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var ei,ti,ni;ei=e.phi<0?1:0,ti=Math.tan(e.phi),ni=this.b/Math.sqrt(ti*ti+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-ni*ni)/(this.one_minus_f*ni)),ei&&(e.phi=-e.phi)}return e.lam+=this.long0,Oe.x=e.lam,Oe.y=e.phi,Oe}function qsc_fwd_equat_face_theta(Oe,e,Te,ke){var Be;return Oe<EPSLN?(ke.value=AREA_ENUM.AREA_0,Be=0):(Be=Math.atan2(e,Te),Math.abs(Be)<=FORTPI?ke.value=AREA_ENUM.AREA_0:Be>FORTPI&&Be<=HALF_PI+FORTPI?(ke.value=AREA_ENUM.AREA_1,Be-=HALF_PI):Be>HALF_PI+FORTPI||Be<=-(HALF_PI+FORTPI)?(ke.value=AREA_ENUM.AREA_2,Be=Be>=0?Be-SPI:Be+SPI):(ke.value=AREA_ENUM.AREA_3,Be+=HALF_PI)),Be}function qsc_shift_lon_origin(Oe,e){var Te=Oe+e;return Te<-3.14159265359?Te+=TWO_PI:Te>3.14159265359&&(Te-=TWO_PI),Te}var names$6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$6,forward:forward$5,inverse:inverse$5,names:names$6};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(Oe,e){return Oe[0]+e*(Oe[1]+e*(Oe[2]+e*Oe[3]))},poly3_der=function(Oe,e){return Oe[1]+e*(2*Oe[2]+e*3*Oe[3])};function newton_rapshon(Oe,e,Te,ke){for(var Be=e;ke;--ke){var Ue=Oe(Be);if(Be-=Ue,Math.abs(Ue)<Te)break}return Be}function init$5(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(Oe){var e=adjust_lon(Oe.x-this.long0),Te=Math.abs(Oe.y),ke=Math.floor(Te*C1);ke<0?ke=0:ke>=NODES&&(ke=NODES-1),Te=R2D*(Te-RC1*ke);var Be={x:poly3_val(COEFS_X[ke],Te)*e,y:poly3_val(COEFS_Y[ke],Te)};return Oe.y<0&&(Be.y=-Be.y),Be.x=Be.x*this.a*FXC+this.x0,Be.y=Be.y*this.a*FYC+this.y0,Be}function inverse$4(Oe){var e={x:(Oe.x-this.x0)/(this.a*FXC),y:Math.abs(Oe.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=Oe.y<0?-HALF_PI:HALF_PI;else{var Te=Math.floor(e.y*NODES);for(Te<0?Te=0:Te>=NODES&&(Te=NODES-1);;)if(COEFS_Y[Te][0]>e.y)--Te;else if(COEFS_Y[Te+1][0]<=e.y)++Te;else break;var ke=COEFS_Y[Te],Be=5*(e.y-ke[0])/(COEFS_Y[Te+1][0]-ke[0]);Be=newton_rapshon(function(Ue){return(poly3_val(ke,Ue)-e.y)/poly3_der(ke,Ue)},Be,EPSLN,100),e.x/=poly3_val(COEFS_X[Te],Be),e.y=(5*Te+Be)*D2R$1,Oe.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$5=["Robinson","robin"];const robin={init:init$5,forward:forward$4,inverse:inverse$4,names:names$5};function init$4(){this.name="geocent"}function forward$3(Oe){var e=geodeticToGeocentric(Oe,this.es,this.a);return e}function inverse$3(Oe){var e=geocentricToGeodetic(Oe,this.es,this.a,this.b);return e}var names$4=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$4,forward:forward$3,inverse:inverse$3,names:names$4};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$3(){if(Object.keys(params).forEach((function(Te){if(typeof this[Te]>"u")this[Te]=params[Te].def;else{if(params[Te].num&&isNaN(this[Te]))throw new Error("Invalid parameter value, must be numeric "+Te+" = "+this[Te]);params[Te].num&&(this[Te]=parseFloat(this[Te]))}params[Te].degrees&&(this[Te]=this[Te]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var Oe=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(Oe),this.sw=Math.sin(Oe)}function forward$2(Oe){Oe.x-=this.long0;var e=Math.sin(Oe.y),Te=Math.cos(Oe.y),ke=Math.cos(Oe.x),Be,Ue;switch(this.mode){case mode.OBLIQ:Ue=this.sinph0*e+this.cosph0*Te*ke;break;case mode.EQUIT:Ue=Te*ke;break;case mode.S_POLE:Ue=-e;break;case mode.N_POLE:Ue=e;break}switch(Ue=this.pn1/(this.p-Ue),Be=Ue*Te*Math.sin(Oe.x),this.mode){case mode.OBLIQ:Ue*=this.cosph0*e-this.sinph0*Te*ke;break;case mode.EQUIT:Ue*=e;break;case mode.N_POLE:Ue*=-(Te*ke);break;case mode.S_POLE:Ue*=Te*ke;break}var He,We;return He=Ue*this.cg+Be*this.sg,We=1/(He*this.sw*this.h1+this.cw),Be=(Be*this.cg-Ue*this.sg)*this.cw*We,Ue=He*We,Oe.x=Be*this.a,Oe.y=Ue*this.a,Oe}function inverse$2(Oe){Oe.x/=this.a,Oe.y/=this.a;var e={x:Oe.x,y:Oe.y},Te,ke,Be;Be=1/(this.pn1-Oe.y*this.sw),Te=this.pn1*Oe.x*Be,ke=this.pn1*Oe.y*this.cw*Be,Oe.x=Te*this.cg+ke*this.sg,Oe.y=ke*this.cg-Te*this.sg;var Ue=hypot(Oe.x,Oe.y);if(Math.abs(Ue)<EPSLN)e.x=0,e.y=Oe.y;else{var He,We;switch(We=1-Ue*Ue*this.pfact,We=(this.p-Math.sqrt(We))/(this.pn1/Ue+Ue/this.pn1),He=Math.sqrt(1-We*We),this.mode){case mode.OBLIQ:e.y=Math.asin(He*this.sinph0+Oe.y*We*this.cosph0/Ue),Oe.y=(He-this.sinph0*Math.sin(e.y))*Ue,Oe.x*=We*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(Oe.y*We/Ue),Oe.y=He*Ue,Oe.x*=We;break;case mode.N_POLE:e.y=Math.asin(He),Oe.y=-Oe.y;break;case mode.S_POLE:e.y=-Math.asin(He);break}e.x=Math.atan2(Oe.x,Oe.y)}return Oe.x=e.x+this.long0,Oe.y=e.y,Oe}var names$3=["Tilted_Perspective","tpers"];const tpers={init:init$3,forward:forward$2,inverse:inverse$2,names:names$3};function init$2(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var Oe=1-this.es,e=1/Oe;this.radius_p=Math.sqrt(Oe),this.radius_p2=Oe,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(Oe){var e=Oe.x,Te=Oe.y,ke,Be,Ue,He;if(e=e-this.long0,this.shape==="ellipse"){Te=Math.atan(this.radius_p2*Math.tan(Te));var We=this.radius_p/hypot(this.radius_p*Math.cos(Te),Math.sin(Te));if(Be=We*Math.cos(e)*Math.cos(Te),Ue=We*Math.sin(e)*Math.cos(Te),He=We*Math.sin(Te),(this.radius_g-Be)*Be-Ue*Ue-He*He*this.radius_p_inv2<0)return Oe.x=Number.NaN,Oe.y=Number.NaN,Oe;ke=this.radius_g-Be,this.flip_axis?(Oe.x=this.radius_g_1*Math.atan(Ue/hypot(He,ke)),Oe.y=this.radius_g_1*Math.atan(He/ke)):(Oe.x=this.radius_g_1*Math.atan(Ue/ke),Oe.y=this.radius_g_1*Math.atan(He/hypot(Ue,ke)))}else this.shape==="sphere"&&(ke=Math.cos(Te),Be=Math.cos(e)*ke,Ue=Math.sin(e)*ke,He=Math.sin(Te),ke=this.radius_g-Be,this.flip_axis?(Oe.x=this.radius_g_1*Math.atan(Ue/hypot(He,ke)),Oe.y=this.radius_g_1*Math.atan(He/ke)):(Oe.x=this.radius_g_1*Math.atan(Ue/ke),Oe.y=this.radius_g_1*Math.atan(He/hypot(Ue,ke))));return Oe.x=Oe.x*this.a,Oe.y=Oe.y*this.a,Oe}function inverse$1(Oe){var e=-1,Te=0,ke=0,Be,Ue,He,We;if(Oe.x=Oe.x/this.a,Oe.y=Oe.y/this.a,this.shape==="ellipse"){this.flip_axis?(ke=Math.tan(Oe.y/this.radius_g_1),Te=Math.tan(Oe.x/this.radius_g_1)*hypot(1,ke)):(Te=Math.tan(Oe.x/this.radius_g_1),ke=Math.tan(Oe.y/this.radius_g_1)*hypot(1,Te));var Cn=ke/this.radius_p;if(Be=Te*Te+Cn*Cn+e*e,Ue=2*this.radius_g*e,He=Ue*Ue-4*Be*this.C,He<0)return Oe.x=Number.NaN,Oe.y=Number.NaN,Oe;We=(-Ue-Math.sqrt(He))/(2*Be),e=this.radius_g+We*e,Te*=We,ke*=We,Oe.x=Math.atan2(Te,e),Oe.y=Math.atan(ke*Math.cos(Oe.x)/e),Oe.y=Math.atan(this.radius_p_inv2*Math.tan(Oe.y))}else if(this.shape==="sphere"){if(this.flip_axis?(ke=Math.tan(Oe.y/this.radius_g_1),Te=Math.tan(Oe.x/this.radius_g_1)*Math.sqrt(1+ke*ke)):(Te=Math.tan(Oe.x/this.radius_g_1),ke=Math.tan(Oe.y/this.radius_g_1)*Math.sqrt(1+Te*Te)),Be=Te*Te+ke*ke+e*e,Ue=2*this.radius_g*e,He=Ue*Ue-4*Be*this.C,He<0)return Oe.x=Number.NaN,Oe.y=Number.NaN,Oe;We=(-Ue-Math.sqrt(He))/(2*Be),e=this.radius_g+We*e,Te*=We,ke*=We,Oe.x=Math.atan2(Te,e),Oe.y=Math.atan(ke*Math.cos(Oe.x)/e)}return Oe.x=Oe.x+this.long0,Oe}var names$2=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$2,forward:forward$1,inverse:inverse$1,names:names$2};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M$2=Math.sqrt(3)/2;function init$1(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(Oe){var e=adjust_lon(Oe.x-this.long0),Te=Oe.y,ke=Math.asin(M$2*Math.sin(Te)),Be=ke*ke,Ue=Be*Be*Be;return Oe.x=e*Math.cos(ke)/(M$2*(A1+3*A2*Be+Ue*(7*A3+9*A4*Be))),Oe.y=ke*(A1+A2*Be+Ue*(A3+A4*Be)),Oe.x=this.a*Oe.x+this.x0,Oe.y=this.a*Oe.y+this.y0,Oe}function inverse(Oe){Oe.x=(Oe.x-this.x0)/this.a,Oe.y=(Oe.y-this.y0)/this.a;var e=1e-9,Te=12,ke=Oe.y,Be,Ue,He,We,Cn,En;for(En=0;En<Te&&(Be=ke*ke,Ue=Be*Be*Be,He=ke*(A1+A2*Be+Ue*(A3+A4*Be))-Oe.y,We=A1+3*A2*Be+Ue*(7*A3+9*A4*Be),ke-=Cn=He/We,!(Math.abs(Cn)<e));++En);return Be=ke*ke,Ue=Be*Be*Be,Oe.x=M$2*Oe.x*(A1+3*A2*Be+Ue*(7*A3+9*A4*Be))/Math.cos(ke),Oe.y=Math.asin(Math.sin(ke)/M$2),Oe.x=adjust_lon(Oe.x+this.long0),Oe}var names$1=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init:init$1,forward,inverse,names:names$1};var EPS10=1e-10;function init(){var Oe;if(this.phi1=this.lat1,Math.abs(this.phi1)<EPS10)throw new Error;this.es?(this.en=pj_enfn(this.es),this.m1=pj_mlfn(this.phi1,this.am1=Math.sin(this.phi1),Oe=Math.cos(this.phi1),this.en),this.am1=Oe/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=e_inv,this.forward=e_fwd):(Math.abs(this.phi1)+EPS10>=HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=s_inv,this.forward=s_fwd)}function e_fwd(Oe){var e=adjust_lon(Oe.x-(this.long0||0)),Te=Oe.y,ke,Be,Ue;return ke=this.am1+this.m1-pj_mlfn(Te,Be=Math.sin(Te),Ue=Math.cos(Te),this.en),Be=Ue*e/(ke*Math.sqrt(1-this.es*Be*Be)),Oe.x=ke*Math.sin(Be),Oe.y=this.am1-ke*Math.cos(Be),Oe.x=this.a*Oe.x+(this.x0||0),Oe.y=this.a*Oe.y+(this.y0||0),Oe}function e_inv(Oe){Oe.x=(Oe.x-(this.x0||0))/this.a,Oe.y=(Oe.y-(this.y0||0))/this.a;var e,Te,ke,Be;if(Te=hypot(Oe.x,Oe.y=this.am1-Oe.y),Be=pj_inv_mlfn(this.am1+this.m1-Te,this.es,this.en),(e=Math.abs(Be))<HALF_PI)e=Math.sin(Be),ke=Te*Math.atan2(Oe.x,Oe.y)*Math.sqrt(1-this.es*e*e)/Math.cos(Be);else if(Math.abs(e-HALF_PI)<=EPS10)ke=0;else throw new Error;return Oe.x=adjust_lon(ke+(this.long0||0)),Oe.y=adjust_lat(Be),Oe}function s_fwd(Oe){var e=adjust_lon(Oe.x-(this.long0||0)),Te=Oe.y,ke,Be;return Be=this.cphi1+this.phi1-Te,Math.abs(Be)>EPS10?(Oe.x=Be*Math.sin(ke=e*Math.cos(Te)/Be),Oe.y=this.cphi1-Be*Math.cos(ke)):Oe.x=Oe.y=0,Oe.x=this.a*Oe.x+(this.x0||0),Oe.y=this.a*Oe.y+(this.y0||0),Oe}function s_inv(Oe){Oe.x=(Oe.x-(this.x0||0))/this.a,Oe.y=(Oe.y-(this.y0||0))/this.a;var e,Te,ke=hypot(Oe.x,Oe.y=this.cphi1-Oe.y);if(Te=this.cphi1+this.phi1-ke,Math.abs(Te)>HALF_PI)throw new Error;return Math.abs(Math.abs(Te)-HALF_PI)<=EPS10?e=0:e=ke*Math.atan2(Oe.x,Oe.y)/Math.cos(Te),Oe.x=adjust_lon(e+(this.long0||0)),Oe.y=adjust_lat(Te),Oe}var names=["bonne","Bonne (Werner lat_1=90)"];const bonne={init,names};function includedProjections(Oe){Oe.Proj.projections.add(tmerc),Oe.Proj.projections.add(etmerc),Oe.Proj.projections.add(utm),Oe.Proj.projections.add(sterea),Oe.Proj.projections.add(stere),Oe.Proj.projections.add(somerc),Oe.Proj.projections.add(omerc),Oe.Proj.projections.add(lcc),Oe.Proj.projections.add(krovak),Oe.Proj.projections.add(cass),Oe.Proj.projections.add(laea),Oe.Proj.projections.add(aea),Oe.Proj.projections.add(gnom),Oe.Proj.projections.add(cea),Oe.Proj.projections.add(eqc),Oe.Proj.projections.add(poly),Oe.Proj.projections.add(nzmg),Oe.Proj.projections.add(mill),Oe.Proj.projections.add(sinu),Oe.Proj.projections.add(moll),Oe.Proj.projections.add(eqdc),Oe.Proj.projections.add(vandg),Oe.Proj.projections.add(aeqd),Oe.Proj.projections.add(ortho),Oe.Proj.projections.add(qsc),Oe.Proj.projections.add(robin),Oe.Proj.projections.add(geocent),Oe.Proj.projections.add(tpers),Oe.Proj.projections.add(geos),Oe.Proj.projections.add(eqearth),Oe.Proj.projections.add(bonne)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$y=LoggerByDefault.getLogger("CRS");function register(Oe){const e=Object.keys(Oe.defs);logger$y.trace("proj. codes :",e);const Te=e.length;let ke,Be;for(ke=0;ke<Te;++ke){const Ue=e[ke];if(!get$3(Ue)){const He=Oe.defs(Ue);addProjection(new Projection$1({code:Ue,axisOrientation:He.axis,metersPerUnit:He.to_meter,units:He.units}))}}for(ke=0;ke<Te;++ke){const Ue=e[ke],He=get$3(Ue);for(Be=0;Be<Te;++Be){const We=e[Be],Cn=get$3(We);if(!get$4(Ue,We))if(Oe.defs[Ue]===Oe.defs[We])addEquivalentProjections([He,Cn]);else{const En=Oe(Ue,We);addCoordinateTransforms(He,Cn,En.forward,En.inverse)}}}}var Register={isLoaded:!1,get:function(Oe){if(!(Oe===""||Oe===null||typeof Oe>"u")){var e=Oe.split(":");if(e.length===2){var Te=e[0],ke=e[1];if(this.hasOwnProperty(Te)&&this[Te].hasOwnProperty(ke))return this[Te][ke]}}},exist:function(Oe){if(Oe===""||Oe===null||typeof Oe>"u")return!1;var e=Oe.split(":");if(e.length!==2)return!1;var Te=e[0],ke=e[1];return!(!this.hasOwnProperty(Te)||!this[Te].hasOwnProperty(ke))},load:function(Oe){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],Te=0;Te<e.length;Te++){var ke=e[Te],Be=this[ke];for(var Ue in Be)if(Be.hasOwnProperty(Ue)){var He=ke+":"+Ue;Oe.defs(He,this.get(He))}}this.isLoaded=!0}},loadByDefault:function(Oe){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var Te in e)if(e.hasOwnProperty(Te)){var ke=e[Te];for(var Be in ke)if(ke.hasOwnProperty(Be)){var Ue=Te+":"+Be;Oe.defs(Ue,ke[Be])}}},loadByName:function(Oe,e){if(!this.exist(e))return!1;try{Oe.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$x=LoggerByDefault.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$x.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(Oe){logger$x.error(Oe)}}},loadByDefault:function(){if(logger$x.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(Oe){logger$x.error(Oe)}}},loadByName:function(Oe){if(logger$x.trace("Loading a custom definition projection : ",Oe),!Register.isLoaded){Register.loadByName(proj4,Oe);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$x.error(e)}}},overload:function(){logger$x.trace("Loading projections aera (extent)");for(var Oe in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(Oe)){var e=this.projectionsExtent[Oe],Te=get$3(Oe),ke=getTransform("EPSG:4326",Te),Be=applyTransform([e.bottom,e.right,e.top,e.left],ke);Te.setExtent(Be),addProjection(Te),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(Te)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=10,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByLayerPriority=[],m_filterWMTSPriority=!1,m_filterTMS=!0,m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async Oe=>{clear(),controller=new AbortController;let e=new URL(m_url),Te={text:Oe,fields:m_fields,size:m_size};Object.keys(Te).forEach(Cn=>e.searchParams.append(Cn,Te[Cn]));var ke=await fetch(e,{}),Be=await ke.json();if(ke.status!==200)throw new Error(ke.message);if(!(!Be||Be.length===0)){for(let Cn=0;Cn<Be.length;Cn++){const En=Be[Cn];m_filterByLayerPriority.findIndex(Sn=>Sn.includes(En.source.layer_name))>=0&&(Be[Cn].score+=100)}Be.sort((Cn,En)=>En.score-Cn.score);var Ue=null;m_filterWMTSPriority&&(Ue=inventory(Be));for(let Cn=0;Cn<Be.length;Cn++){const En=Be[Cn];var He=m_filterByService.length===0||m_filterByService.includes(En.source.type);if(He){if(unique().length>=m_maximumResponses)break;var We={attribution:En.source.attribution||{},srs:En.source.srs||[],keywords:En.source.keywords||[],extent:En.source.extent||{},metadata:En.source.metadata_urls||[],name:En.source.layer_name||"",title:En.source.title||"",description:En.source.description,service:En.source.type||"",url:En.source.url||"",tech:En.source.tech||{},tags:En.source.tags||{},theme:En.source.theme||"",producer:En.source.producer||""};if(m_filterByProjection.length&&m_filterByProjection.includes(We.srs[0])||Ue&&Ue[We.name]&&We.service==="WMS"||We.service==="TMS"&&(We.styles=!1,We.metadata.length!==0&&/(\.json)$/i.test(We.metadata[0])&&(We.styles=!0),!We.styles&&m_filterTMS)||We.service==="WMTS"&&We.metadata.length!==0&&/(.json)$/i.test(We.metadata[0])&&m_filterTMS===!0)continue;m_suggestions.push(We)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique=()=>m_suggestions.filter((Oe,e,Te)=>e===Te.findIndex(ke=>ke.service===Oe.service&&ke.name===Oe.name&&ke.title===Oe.title&&ke.description===Oe.description)),clear=()=>{controller.abort(),m_suggestions=[]},inventory=Oe=>{var e={};for(let Te=0;Te<Oe.length;Te++){const ke=Oe[Te].source.type,Be=Oe[Te].source.layer_name;(ke==="WMTS"||ke==="WMS")&&(e[Be]===void 0&&(e[Be]=ke==="WMTS"),e[Be]||(e[Be]=ke==="WMTS"))}return e},getSuggestions=()=>unique(),getNames=()=>unique().map(Oe=>Oe.name),getTitles=()=>unique().map(Oe=>Oe.title),setIndex=Oe=>{m_index=Oe},setFields=Oe=>{m_fields=Oe},setSuggestions=Oe=>{m_suggestions=Oe},setSize=Oe=>{m_size=parseInt(Oe)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=Oe=>{m_maximumResponses=parseInt(Oe)},setFiltersByService=Oe=>{m_filterByService=Oe===""?[]:Oe.split(",")},setFiltersByProjection=Oe=>{m_filterByProjection=Oe===""?[]:Oe.split(",")},setFiltersByLayerPriority=Oe=>{m_filterByLayerPriority=Oe===""?[]:Oe.split(",")},setFilterWMTSPriority=Oe=>{m_filterWMTSPriority=Oe},setFilterTMS=Oe=>{m_filterTMS=Oe},Search$1={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSuggestions,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByProjection,setFiltersByLayerPriority,setFilterWMTSPriority,setFilterTMS};var SearchEngineDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPsearchEngine"),Oe.className="GPwidget gpf-widget",Oe},_createSearchDivElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPshowSearchDiv"),Oe},_createShowSearchEnginePictoElement:function(Oe){var e=this;checkDsfr()&&(Oe=!0);var Te=document.createElement("button");return Te.id=this._addUID("GPshowSearchEnginePicto"),Te.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",Te.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(Te.title="Rechercher"),Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!Oe),Te.disabled=!Oe,Te.setAttribute("type","button"),Te.addEventListener("click",function(ke){if(checkDsfr()){var Be=document.getElementById(e._addUID("GPautocompleteResults")),Ue=Be.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),He=Be.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),We=He.length;if(!We)return;var Cn=null;Ue.length?Cn=Ue[0]:(Cn=He[0],Cn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Cn.style.color="#000000",Cn.style["background-color"]="#CEDBEF"),Cn.click();return}var En=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!En),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var An=document.getElementById(e._addUID("GPshowAdvancedSearch"));An&&(An.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var Sn=document.getElementById(e._addUID("GPshowGeolocate"));Sn&&(Sn.style.display=null);var Tn=document.getElementById(e._addUID("GPshowSearchByCoordinate"));Tn&&(Tn.style.display=null);var Ln="#GPsearchInput-"+e._uid;document.querySelector(Ln+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick(ke)}),Te},_createSearchInputElement:function(Oe){var e=this,Te=document.createElement("form");Te.id=this._addUID("GPsearchInput"),Te.className="gpf-panel__content fr-modal__content",Te.addEventListener("submit",function(Be){return Be.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(Be)),!1});var ke=document.createElement("input");return ke.id=this._addUID("GPsearchInputText"),ke.className="GPsearchInputText gpf-input fr-input",ke.type="text",ke.placeholder=Oe,ke.autocomplete="off",ke.addEventListener("keyup",function(Be){var Ue=Be.which||Be.keyCode;Ue===13||Ue===10||Ue===38||Ue===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),ke.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(Be))}),ke.addEventListener("keydown",function(Be){var Ue=Be.which||Be.keyCode;Ue===13&&Be.preventDefault();var He=document.getElementById(e._addUID("GPautocompleteResults"));if(He){var We=He.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),Cn=He.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),En=Cn.length;if(En){var An=null;if(We.length)An=We[0];else if(An=Cn[0],An.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",An.style.color="#000000",An.style["background-color"]="#CEDBEF",Ue!==13)return;var Sn=parseInt(SelectorID.index(An.id),10),Tn=Sn===En-1?Cn[0]:Cn[Sn+1],Ln=Sn===0?Cn[En-1]:Cn[Sn-1];switch(An.style["background-color"]="",An.style.color="",Ln.style["background-color"]="",Ln.style.color="",Tn.style["background-color"]="",Tn.style.color="",Ue){case 38:An.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Ln.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Ln.style.color="#000000",Ln.style["background-color"]="#CEDBEF",An.scrollIntoView();break;case 40:An.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Tn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Tn.style.color="#000000",Tn.style["background-color"]="#CEDBEF",An.scrollIntoView();break;case 13:Be.preventDefault(),An.click(Be);break}An.focus()}}}),Te.appendChild(ke),Te},_createSearchResetElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(Te){document.getElementById(Oe._addUID("GPsearchInputText")).value="",document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),Oe.onSearchResetClick()}),e},_createButtonsElement:function(){var Oe=document.createElement("div");return Oe.className="GPbuttonsContainer",Oe},_createFirstLineWrapper:function(){var Oe=document.createElement("div");return Oe.className="GPsearchFirstLineWrapper",Oe},_createRadioContainer:function(){var Oe=document.createElement("div");return Oe.className="GPsearchRadioContainer",Oe},_createRadioElements:function(){var Oe=document.createElement("div");Oe.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Te=document.createElement("input");Te.id=this._addUID("GPsearchSplitLocations"),Te.type="radio",Te.name="GPsearchSplit",Te.value="address",Te.checked=!0,e.appendChild(Te);var ke=document.createElement("label");ke.className="gpf-label fr-label",ke.htmlFor=this._addUID("GPsearchSplitLocations"),ke.title="Adresses",ke.innerHTML="Adresses",e.appendChild(ke),Te.addEventListener?Te.addEventListener("change",function(){Te.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):Te.attachEvent&&Te.attachEvent("onchange",function(){Te.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var Be=document.createElement("div");Be.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Ue=document.createElement("input");Ue.id=this._addUID("GPsearchSplitData"),Ue.type="radio",Ue.name="GPsearchSplit",Ue.value="data",Be.appendChild(Ue);var He=document.createElement("label");return He.className="gpf-label fr-label",He.htmlFor=this._addUID("GPsearchSplitData"),He.title="Cartes et données",He.innerHTML="Cartes et données",Be.appendChild(He),Ue.addEventListener?Ue.addEventListener("change",function(){Ue.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):Ue.attachEvent&&Ue.attachEvent("onchange",function(){Ue.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),Oe.appendChild(e),Oe.appendChild(Be),[Oe,Te,Ue]},_createShowAdvancedSearchElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowAdvancedSearch GPshowOpen gpf-btn gpf-btn-icon-search-advanced fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(Te){var ke=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!ke);var Be="#GPsearchInput-"+Oe._uid;ke?(document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1)):(document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(Be+" input").disabled=!0,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!0)),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la géolocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(Te){var ke=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!ke),Oe.onShowSearchGeolocateClick(Te)}),e},_createShowSearchByCoordinateElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnées",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(Te){var ke=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!ke);var Be="#GPsearchInput-"+Oe._uid;ke?(document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1)):(document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(Be+" input").disabled=!0,document.querySelector(Be+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!0)),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPadvancedSearchPanel"),Oe.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Oe},_createAdvancedSearchPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createGeocodeResultsElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPgeocodeResultsList"),Oe.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Oe},_createGeocodeResultsDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe.appendChild(this._createGeocodeResultsHeaderElement()),Oe},_createAutoCompleteElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPautoCompleteList"),Oe.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",Oe},_createCoordinateSearchPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPcoordinateSearchPanel"),Oe.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Oe},_createCoordinateSearchPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createAutoCompleteListElement:function(){var Oe=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(Te){document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(Te){document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPautocompleteResultsLocation"),Oe.className="GPelementHidden gpf-hidden gpf-select",Oe.size=20,Oe.autofocus=!0,Oe},_createAutoCompletedLocationTitleElement(){var Oe=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label search-results-loc",e.innerHTML="Lieux et adresses",Oe.appendChild(e)},_createAutoCompletedLocationElement:function(Oe,e){var Te=this,ke=document.getElementById(this._addUID("GPautocompleteResultsLocation")),Be=document.createElement("p");Be.id=this._addUID("AutoCompletedLocation_"+e),Be.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine";var Ue=GeocodeUtils.getSuggestedLocationFreeform(Oe);Be.innerHTML=Ue,Be.title=Ue,Be.addEventListener?Be.addEventListener("click",function(He){Te.onAutoCompletedResultsItemClick(He)},!1):Be.attachEvent&&Be.attachEvent("onclick",function(He){Te.onAutoCompletedResultsItemClick(He)}),ke.appendChild(Be)},_createSearchedSuggestContainer(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPautocompleteResultsSuggest"),Oe.className="GPelementHidden gpf-hidden gpf-select",Oe.size=6,Oe.autofocus=!0,Oe},_createSearchedSuggestTitleElement(){var Oe=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label search-results-data",e.innerHTML="Cartes et données",Oe.appendChild(e)},_createSearchedSuggestElement:function(Oe,e){var Te=this,ke=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),Be=document.createElement("p");Be.id=this._addUID("AutoCompletedSuggest_"+e),Be.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Be.innerHTML=Oe.title+" ("+Oe.service+")",Be.dataset.layer=Oe.name,Be.title=`${Oe.description} (nom technique : ${Oe.name})`,Be.addEventListener?Be.addEventListener("click",function(Ue){Te.onSearchedResultsItemClick(Ue)},!1):Be.attachEvent&&Be.attachEvent("onclick",function(Ue){Te.onSearchedResultsItemClick(Ue)}),ke.appendChild(Be)},_createAdvancedSearchPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Recherche avancée",e.appendChild(Te);var ke=document.createElement("button");ke.id=this._addUID("GPadvancedSearchClose"),ke.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer la recherche avancée",ke.addEventListener?ke.addEventListener("click",function(){var Ue="#GPsearchInput-"+Oe._uid;document.querySelector(Ue+" input").disabled=!1,document.querySelector(Ue+" .GPsearchInputReset")&&(document.querySelector(Ue+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){var Ue="#GPsearchInput-"+Oe._uid;document.querySelector(Ue+" input").disabled=!1,document.querySelector(Ue+" .GPsearchInputReset")&&(document.querySelector(Ue+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",ke.appendChild(Be),e.appendChild(ke),e},_createAdvancedSearchPanelFormElement:function(Oe,e){var Te=this,ke=document.createElement("form");ke.id=this._addUID("GPadvancedSearchForm"),ke.className="gpf-panel__content fr-modal__content",ke.addEventListener("submit",function(We){We.preventDefault();for(var Cn=[],En="#GPadvancedSearchFilters-"+Te._uid,An=document.querySelectorAll(En+" > div > div > input,select#category"),Sn=0;Sn<An.length;Sn++){var Tn=An[Sn];Cn.push({key:Tn.name,value:Tn.value})}return Te.onGeocodingAdvancedSearchSubmit(We,Cn),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(Te._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var Be=document.createElement("div");Be.className="GPflexInput gpf-flex-column ";var Ue=document.createElement("label");Ue.className="GPadvancedSearchCodeLabel gpf-label fr-label",Ue.innerHTML="Recherche par",Be.appendChild(Ue);var He=this._createAdvancedSearchFormCodeElement(Oe,e);return Be.appendChild(He),ke.appendChild(Be),ke},_createAdvancedSearchFormCodeElement:function(Oe,e){var Te=this,ke=document.createElement("select");ke.id=this._addUID("GPadvancedSearchCode"),ke.title="Choisir un type de recherche",ke.className="GPadvancedSearchCode gpf-select fr-select",ke.addEventListener("change",function(He){Te.onGeocodingAdvancedSearchCodeChange(He)},!1),Oe||(Oe=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var Be=0;Be<Oe.length;Be++){var Ue=document.createElement("option");Ue.value=Oe[Be].id,Ue.text=Oe[Be].title,ke.appendChild(Ue)}if(e){var Ue=document.createElement("option");Ue.value="Coordinates",Ue.text="Coordonnées",ke.appendChild(Ue)}return ke},_createAdvancedSearchFormInputElement:function(){var Oe=document.createElement("input");return Oe.type="submit",Oe.id=this._addUID("GPadvancedSearchSubmit"),Oe.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",Oe.value="Chercher",Oe},_createAdvancedSearchFormFiltersElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPadvancedSearchFilters"),Oe},_createAdvancedSearchFiltersTableElement:function(Oe,e){var Te=document.createElement("div");return Te.id=this._addUID(Oe),e||(Te.style.display="none"),Te},_createAdvancedSearchFiltersAttributElement:function(Oe){var e=null,Te=Oe.name,ke=Oe.title,Be=Oe.description,Ue=Oe.code,He=Oe.value,We=document.createElement("div");We.className="GPflexInput gpf-flex-column ";var Cn=document.createElement("label");if(Cn.className="GPadvancedSearchFilterLabel gpf-label fr-label",Cn.htmlFor=Te,Cn.title=Be||ke,Cn.innerHTML=ke,We.appendChild(Cn),Te==="category"){var En=document.createElement("select");if(En.id=Te,En.name=Te,En.title=ke,En.className="GPadvancedSearchFilterInput gpf-select fr-select",He&&Array.isArray(He))for(var An=0;An<He.length;An++){var Sn=document.createElement("option");Sn.value=He[An],Sn.text=He[An],En.appendChild(Sn)}We.appendChild(En)}else{var Tn=document.createElement("input");if(Tn.id=Te,Tn.className="GPadvancedSearchFilterInput gpf-input fr-input",Tn.type="text",Tn.name=Te,He)if(Array.isArray(He)){var Ln=Te+"_list";Tn.setAttribute("list",Ln);var Bn=document.createElement("datalist");Bn.id=Ln;for(var An=0;An<He.length;++An){var Sn=document.createElement("option");Sn.value=He[An],Bn.appendChild(Sn)}We.appendChild(Bn)}else Tn.value=He;We.appendChild(Tn)}return e=document.getElementById(this._addUID(Ue)),e?e.appendChild(We):e=We,e},_createGeocodeResultsHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Résultats de la recherche",e.appendChild(Te);var ke=document.createElement("button");ke.id=this._addUID("GPgeocodeResultsClose"),ke.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer la fenêtre de résultats",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",ke.appendChild(Be),e.appendChild(ke),e},_createGeocodeResultsListElement:function(){var Oe=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(Te){Te.ctrlKey||(document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),Oe.onGeocodedResultsItemClick(Te)},!1):e.attachEvent&&e.attachEvent("onclick",function(Te){Te.ctrlKey||(document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),Oe.onGeocodedResultsItemClick(Te)}),e},_createGeocodedLocationElement:function(Oe,e){var Te=document.getElementById(this._addUID("GPgeocodeResults")),ke=document.createElement("div");ke.id=this._addUID("GeocodedLocation_"+e),ke.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",typeof Oe=="string"?ke.innerHTML=Oe:ke.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(Oe),Te.appendChild(ke)},_createCoordinateSearchPanelHeaderElement(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Recherche par coordonnées",e.appendChild(Te);var ke=document.createElement("button");ke.id=this._addUID("GPcoordinateSearchClose"),ke.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer la recherche par coordonnées",ke.addEventListener?ke.addEventListener("click",function(){var Ue="#GPsearchInput-"+Oe._uid;document.querySelector(Ue+" input").disabled=!1,document.querySelector(Ue+" .GPsearchInputReset")&&(document.querySelector(Ue+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1),document.getElementById(Oe._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),Oe.onCoordinateSearchClose()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){var Ue="#GPsearchInput-"+Oe._uid;document.querySelector(Ue+" input").disabled=!1,document.querySelector(Ue+" .GPsearchInputReset")&&(document.querySelector(Ue+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1),document.getElementById(Oe._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),Oe.onCoordinateSearchClose()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",ke.appendChild(Be),e.appendChild(ke),e},_createCoordinateSearchPanelFormElement(){var Oe=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(Te){return Te.preventDefault(),Oe.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var Oe=document.createElement("div");return Oe.className="GPflexInput gpf-flex-column ",Oe},_createCoordinateSearchSystemsLabelElement(){var Oe=document.createElement("label");return Oe.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",Oe.innerHTML="Système de référence",Oe},_setCoordinateSearchSystemsSelectElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,Te=document.createElement("select");Te.id=this._addUID("GPcoordinateSearchSystem"),Te.title="Choisir un système de réference",Te.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",Te.addEventListener("change",function(He){e.onCoordinateSearchSystemChange(He)});for(var ke=0;ke<Oe.length;ke++){var Be=Oe[ke],Ue=document.createElement("option");Ue.value=Be.code,Ue.text=Be.label||ke,Te.appendChild(Ue)}return Te},_createCoordinateSearchUnitsLabelElement(){var Oe=document.createElement("label");return Oe.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",Oe.innerHTML="Unités",Oe},_setCoordinateSearchUnitsSelectElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,Te=document.createElement("select");Te.id=this._addUID("GPcoordinateSearchUnits"),Te.title="Choisir un type d'unité",Te.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",Te.addEventListener("change",function(He){e.onCoordinateSearchUnitsChange(He)});for(var ke=0;ke<Oe.length;ke++){var Be=Oe[ke],Ue=document.createElement("option");Ue.value=Be.code?Be.code:ke,Ue.text=Be.label||ke,Te.appendChild(Ue)}return Te},_setCoordinateSearchLngLabelElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=Oe==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",Oe){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLngDMSElement(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPcoordinateSearchLngDMS"),Oe.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degré entre 0° et 180°"
                type="number"
                required=""
                min="0"
                max="180">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,Oe},_setCoordinateSearchLatLabelElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=Oe==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",Oe){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLatDMSElement(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPcoordinateSearchLatDMS"),Oe.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degré entre 0° et 85°"
                type="number"
                required=""
                min="0"
                max="85">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,Oe},_createCoordinateSearchSubmitElement(){var Oe=document.createElement("input");return Oe.type="submit",Oe.id=this._addUID("GPcoordinateSearchSubmit"),Oe.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",Oe.value="Chercher",Oe}},logger$w=LoggerByDefault.getLogger("searchengine"),SearchEngine=class Xf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Xf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="SearchEngine",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$w.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,coordinateSearchInAdvancedSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,maximumEntries:5,serviceOptions:{maximumResponses:10},filterLayers:!0},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3,prettifyResults:!1},displayMarker:!0,markerStyle:"lightOrange",markerUrl:"",placeholder:"Rechercher un lieu, une adresse",splitResults:!1},Helper.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search$1.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search$1.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search$1.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search$1.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search$1.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search$1.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterLayersPriority&&Search$1.setFiltersByLayerPriority(this.options.searchOptions.filterLayersPriority),this.options.searchOptions.filterWMTSPriority&&Search$1.setFilterWMTSPriority(this.options.searchOptions.filterWMTSPriority),this.options.searchOptions.filterTMS===!1&&Search$1.setFilterTMS(this.options.searchOptions.filterTMS),this.options.searchOptions.filterProjections&&Search$1.setFiltersByProjection(this.options.searchOptions.filterProjections)),Search$1.target.addEventListener("suggest",Be=>{logger$w.debug(Be);let Ue=Be.detail;Ue=this._filterResultsFromConfigLayers(Ue),this._fillSearchedSuggestListContainer(Ue)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=this.options.id||SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var Te=this.options.markerStyle,ke=this.options.markerUrl;ke?this._markerUrl=ke:this._markerUrl=Object.keys(Marker).indexOf(Te)===-1?Marker.lightOrange:Marker[Te],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var Te;if(e.resources)if(typeof e.resources=="object"){var ke=e.resources.geocode;if(ke)if(Array.isArray(ke)){var Be=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(Te=0;Te<ke.length;Te++)Be.indexOf(ke[Te])===-1&&logger$w.log("[SearchEngine] options.resources.geocode : "+ke[Te]+" is not a resource for geocode")}else logger$w.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),ke=null;var Ue=e.resources.autocomplete;if(Ue)if(Array.isArray(Ue)){var He=["StreetAddress","PositionOfInterest"];for(Te=0;Te<Ue.length;Te++)He.indexOf(Ue[Te])===-1&&logger$w.log("[SearchEngine] options.resources.autocomplete : "+Ue[Te]+" is not a resource for autocomplete")}else logger$w.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),Ue=null}else logger$w.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var Te=0;Te<e.length;Te++)switch(e[Te]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger$w.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper.assign(this._advancedSearchFilters,e),logger$w.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],Te=this.options.coordinateSearch.systems;if(Te)for(var ke=0;ke<Te.length;ke++){var Be=Te[ke];this._setSystem(Be)}if(this._coordinateSearchSystems.length===0)for(var Ue=0;Ue<e.length;Ue++)this._setSystem(e[Ue])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrés sexagésimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomètres",format:MathUtils.coordinateToKMeter}]},Te=this.options.coordinateSearch.units;if(Te){for(var ke in e)if(e.hasOwnProperty(ke)){for(var Be=!1,Ue=0;Ue<e[ke].length;Ue++)for(var He=e[ke][Ue],We=0;We<Te.length;We++){var Cn=Te[We];He.code===Cn&&(Be=!0,this._coordinateSearchUnits[ke]||(this._coordinateSearchUnits[ke]=[]),this._coordinateSearchUnits[ke].push(He))}Be||(this._coordinateSearchUnits[ke]=e[ke])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,Te=document.createElement("div");Te.className="gp-feature-info-div gpf-widget-color";var ke=document.createElement("button");ke.title="Supprimer le marqueur",ke.className="gp-styling-button remove gpf-btn gpf-btn-icon-remove fr-btn--remove fr-btn fr-btn--tertiary-no-outline fr-mt-1v fr-mr-2v",ke.onclick=function(){var Ue=e.getMap();e._marker&&(Ue.removeOverlay(e._marker),e._marker=null),e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),e.dispatchEvent({type:"searchengine:geolocation:remove"})};var Be=document.createElement("button");return Be.title="Fermer la pop-up",Be.className="gp-styling-button closer gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-mt-1v fr-mr-2v",Be.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",Te.appendChild(Be),Te.appendChild(this._popupContent),Te.appendChild(ke),Te}_initContainer(){var e=this._createMainContainerElement(),Te=this._createSearchDivElement(),ke=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);Te.appendChild(ke),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var Be=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&Be.appendChild(this._createSearchResetElement());var Ue=this;Be.addEventListener?Be.addEventListener("click",function(){Ue.onAutoCompleteInputClick()}):Be.attachEvent&&Be.attachEvent("onclick",function(){Ue.onAutoCompleteInputClick()}),Te.appendChild(Be);var He=this._createButtonsElement(),We=this._createFirstLineWrapper();if(We.appendChild(Te),We.appendChild(He),e.appendChild(We),checkDsfr()&&this.options.splitResults){var Cn=this._createRadioContainer();e.appendChild(Cn)}if(checkDsfr()&&this.options.splitResults){var En;[En,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),Cn.appendChild(En)}if(this.options.displayButtonGeolocate){var An=this._createShowGeolocateElement();He.appendChild(An)}if(this.options.displayButtonCoordinateSearch||this.options.coordinateSearchInAdvancedSearch){var Sn=this._createShowSearchByCoordinateElement();this.options.coordinateSearchInAdvancedSearch||He.appendChild(Sn);var Tn=this._createCoordinateSearchPanelElement(),Ln=this._createCoordinateSearchPanelDivElement(),Bn=this._createCoordinateSearchPanelHeaderElement(),ei=this._createCoordinateSearchPanelFormElement(),ti=null;ti=this._containerSystems=this.__createCoordinateSearchDivElement(),ei.appendChild(ti);var ni=this._createCoordinateSearchSystemsLabelElement(),ri=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);ti.appendChild(ni),ti.appendChild(ri),ti=this._containerUnits=this.__createCoordinateSearchDivElement(),ei.appendChild(ti);var si=this._createCoordinateSearchUnitsLabelElement(),ai=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);ti.appendChild(si),ti.appendChild(ai),ti=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),ei.appendChild(ti);var li=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),Pi=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);ti.appendChild(li),ti.appendChild(Pi),ti=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),ei.appendChild(ti);var pi=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),vi=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);ti.appendChild(pi),ti.appendChild(vi);var Ri=this._createCoordinateSearchSubmitElement();ei.appendChild(Ri),Ln.appendChild(Bn),Ln.appendChild(ei),Tn.appendChild(Ln),this.options.coordinateSearchInAdvancedSearch||e.appendChild(Tn)}if(this.options.displayButtonAdvancedSearch){var Fi=this._createShowAdvancedSearchElement();He.appendChild(Fi);var di=this._createAdvancedSearchPanelElement(),ci=this._createAdvancedSearchPanelDivElement(),Mi=this._createAdvancedSearchPanelHeaderElement(),Oi=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes,this.options.coordinateSearchInAdvancedSearch),Hi=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var Ki=this._createAdvancedSearchFormInputElement();Oi.appendChild(Hi),this.options.coordinateSearchInAdvancedSearch&&Oi.appendChild(ei),Oi.appendChild(Ki),ci.appendChild(Mi),ci.appendChild(Oi),di.appendChild(ci),e.appendChild(di)}var or=this._autocompleteContainer=this._createAutoCompleteElement(),sr=this._createAutoCompleteListElement(),Cr=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),pr=this._containerResultsSuggest=this._createSearchedSuggestContainer();sr.appendChild(Cr),sr.appendChild(pr),or.appendChild(sr),e.appendChild(or);var wr=this._createGeocodeResultsElement(),Li=this._createGeocodeResultsDivElement();wr.appendChild(Li);var er=this._geocodedContainer=this._createGeocodeResultsListElement();return Li.appendChild(er),e.appendChild(wr),e}_setFilter(e){for(var Te=this._filterContainer,ke=!1,Be=0;Be<this._advancedSearchCodes.length;Be++)if(this._advancedSearchCodes[Be].id===e){ke=!0;break}if(!ke){for(;Te.firstChild;)Te.removeChild(Te.firstChild);return}for(this._currentGeocodingCode=e;Te.firstChild;)Te.removeChild(Te.firstChild);var Ue=this._advancedSearchFilters[e];if(!(!Ue||Ue.length===0)){for(var He=this._createAdvancedSearchFiltersTableElement(e,!0),We=0;We<Ue.length;We++){var Cn=this._createAdvancedSearchFiltersAttributElement(Ue[We]);He.appendChild(Cn)}return Te.appendChild(He),Te}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger$w.log(e);var Te={};Helper.assign(Te,this.options.autocompleteOptions.serviceOptions),Helper.assign(Te,e);var ke=this.options.resources.autocomplete;ke&&Array.isArray(ke)&&(Te.type||(Te.type=ke)),Te.apiKey=Te.apiKey||this.options.apiKey,typeof Te.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Te.ssl=this.options.ssl:Te.ssl=!0),logger$w.log(Te),Gp.Services.autoComplete(Te)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var Te=this._containerResultsLocation;if(Te.childElementCount)for(;Te.firstChild;)Te.removeChild(Te.firstChild);if(Te.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&Te.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var ke=0;ke<e.length;ke++)this._createAutoCompletedLocationElement(e[ke],ke)}}}_fillSearchedSuggestListContainer(e){this.options.searchOptions.maximumEntries&&(e=e.slice(0,this.options.searchOptions.maximumEntries));var Te=this._containerResultsSuggest;if(Te.childElementCount)for(;Te.firstChild;)Te.removeChild(Te.firstChild);if(Te.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&Te.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let ke=0;ke<e.length;ke++){const Be=e[ke];this._createSearchedSuggestElement(Be,ke)}}}_filterResultsFromConfigLayers(e){if(this.options.searchOptions.filterLayers){var Te={};if(this.options.searchOptions.filterLayersList)Te=this.options.searchOptions.filterLayersList;else{var ke=window.Gp.Config.layers;for(let Ue in ke)ke.hasOwnProperty(Ue)&&(Te[ke[Ue].name]=ke[Ue].serviceParams.id.split(":")[1])}let Be=e.length;for(;Be--;)(!Te[e[Be].name]||e[Be].service.toUpperCase()!==Te[e[Be].name].toUpperCase())&&e.splice(Be,1)}return Search$1.setSuggestions(e),e}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger$w.log(e);var Te={};Helper.assign(Te,this.options.geocodeOptions.serviceOptions),Helper.assign(Te,e);var ke=this,Be=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",Ue=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(Ue){var He=function(En){e.onSuccess.call(ke,En),ke.options.geocodeOptions.serviceOptions.onSuccess.call(ke,En)};Te.onSuccess=He}if(Be){var We=function(En){e.onFailure.call(ke,En),ke.options.geocodeOptions.serviceOptions.onFailure.call(ke,En)};Te.onFailure=We}var Cn=this.options.resources.geocode;Cn&&(Te.index||(Te.index=Cn)),Te.apiKey=Te.apiKey||this.options.apiKey,typeof Te.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Te.ssl=this.options.ssl:Te.ssl=!0),logger$w.log(Te),Gp.Services.geocode(Te)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var Te=this._geocodedContainer;if(Te.childElementCount)for(;Te.firstChild;)Te.removeChild(Te.firstChild);for(var ke=0;ke<e.length;ke++)logger$w.log(e[ke]),this._createGeocodedLocationElement(e[ke],ke);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,Te){var ke=this.getMap().getView();ke.setCenter(e),ke.setZoom(Te)}_setMarker(e,Te){var ke=this.getMap(),Be=this;if(this._marker!=null&&(ke.removeOverlay(this._marker),this._marker=null),e){var Ue=document.createElement("img");Ue.src=this._markerUrl,Ue.addEventListener?Ue.addEventListener("click",function(){Be._onResultMarkerSelect(Te)}):Ue.attachEvent&&Ue.attachEvent("onclick",function(){Be._onResultMarkerSelect(Te)}),this._marker=new Overlay({position:e,positioning:"center-center",element:Ue,stopEvent:!1}),ke.addOverlay(this._marker)}}_getZoom(e){var Te=this.getMap(),ke=this.options.zoomTo,Be=null;if(typeof ke=="function"&&(logger$w.trace("zoom function"),Be=ke.call(this,e)),typeof ke=="number"&&(logger$w.trace("zoom level"),Be=ke),typeof ke=="string")if(ke==="auto")logger$w.trace("zoom auto"),Be=SearchEngineUtils.zoomToResultsByDefault(e);else{logger$w.trace("zoom level parsing");var Ue=parseInt(ke,10);isNaN(Ue)||(logger$w.trace("zoom parsing"),Be=Ue)}Number.isInteger=Number.isInteger||function(Cn){return typeof Cn=="number"&&isFinite(Cn)&&Math.floor(Cn)===Cn},(!Be||Be===""||!Number.isInteger(Be))&&(logger$w.trace("zoom not found, current zoom..."),Be=Te.getView().getZoom());var He=Te.minZoom,We=Te.maxZoom;return Be<He&&(logger$w.trace("zoom level min..."),Be=He),Be>We&&(logger$w.trace("zoom level max..."),Be=We),logger$w.trace("zoom",Be),Be}_onResultMarkerSelect(e){var Te=this.getMap(),ke="";if(typeof e!="string")if(e.service==="GeocodedLocation"){ke="<ul>";var Be=e.location.placeAttributes;for(var Ue in Be)Be.hasOwnProperty(Ue)&&Ue!=="trueGeometry"&&Ue!=="extraFields"&&Ue!=="houseNumberInfos"&&Ue!=="_count"&&(ke+="<li>",ke+='<span class="gp-attname-others-span">'+Ue.toUpperCase()+" : </span>",ke+=Be[Ue],ke+=" </li>");ke+=" </ul>"}else e.service==="SuggestedLocation"?ke=GeocodeUtils.getSuggestedLocationFreeform(e.location):ke="sans informations.";else ke=e;this._popupContent.innerHTML=ke,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),Te.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger$w.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$w.error("crs not defined !");return}if(e.label||(logger$w.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$w.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$w.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var Te=0;Te<this._coordinateSearchSystems.length;Te++){var ke=this._coordinateSearchSystems[Te];e.crs===ke.crs&&logger$w.info("crs '{}' already configured",ke.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this.getMap();Interactions.unset(Te);var ke=this._showSearchEngineButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var Te=this.getMap().getView(),ke=Te.getProjection().getCode(),Be=[e.coords.longitude,e.coords.latitude],Ue;if(ke!=="EPSG:4326"?Ue=transform$1(Be,"EPSG:4326",ke):Ue=Be,isNaN(Ue[0])||isNaN(Ue[1])){this._setMarker();return}if(this._setPosition(Ue,15),this._displayMarker){var He="<h6> Ma position </h6> longitude : "+Be[0]+"<br/> latitude : "+Be[1];this._setMarker(Ue,He)}this.dispatchEvent({type:"searchengine:geolocation:click",coordinates:Ue})})}onShowSearchByCoordinateClick(){var e=null,Te=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),Te=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,Te=this._coordinateSearchLatInput.value),!(!e||!Te)){var ke=[e,Te],Be=this.getMap().getView(),Ue=Be.getProjection().getCode();if(Ue!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",Ue)),isNaN(ke[0])||isNaN(ke[1])){this._setMarker();return}this._setPosition(ke,10),this._displayMarker&&this._setMarker(ke,"sans information"),this.dispatchEvent({type:"searchengine:coordinates:click",coordinates:ke})}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var Te=e.querySelectorAll("[name]");if(Te){var ke=MathUtils.toInteger(Te[0].value),Be=MathUtils.toInteger(Te[1].value),Ue=MathUtils.toInteger(Te[2].value),He=Te[3].options[Te[3].selectedIndex].text;return!ke||!Be||!Ue||!He?void 0:MathUtils.dmsToDecimal(ke,Be,Ue,He)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var Te=e.target.value;if(Te){if(this._currentGeocodingLocation=Te,Te.length<3){this._clearSuggestedLocation();return}var ke=this.options.autocompleteOptions.triggerGeocode,Be=this.options.autocompleteOptions.triggerDelay,Ue=this.options.autocompleteOptions.maximumEntries,He=this.options.autocompleteOptions.prettifyResults,We=this;this._requestAutoComplete({text:Te,onSuccess:function(En){if(logger$w.log("request from AutoComplete",En),En){We._suggestedLocations=En.suggestedLocations,We._locationsToBeDisplayed=[];for(var An=0;An<We._suggestedLocations.length;An++){var Sn=We._suggestedLocations[An];Sn.position&&Sn.position.x===0&&Sn.position.y===0&&Sn.fullText?We._getGeocodeCoordinatesFromFullText(Sn,An):We._locationsToBeDisplayed.push(Sn)}He===!0&&We._prettifyAutocompleteResults(We._locationsToBeDisplayed),Ue&&(We._locationsToBeDisplayed=We._locationsToBeDisplayed.slice(0,Ue)),We._fillAutoCompletedLocationListContainer(We._locationsToBeDisplayed),We._triggerHandler&&(clearTimeout(We._triggerHandler),We._triggerHandler=null,logger$w.warn("Cancel a geocode request !"))}},onFailure:function(En){We._clearSuggestedLocation(),logger$w.log(En.message),En.message==="No suggestion matching the search"&&ke&&(We._triggerHandler&&(clearTimeout(We._triggerHandler),logger$w.warn("Cancel the last geocode request !")),We._triggerHandler=setTimeout(function(){logger$w.warn("Launch a geocode request !"),We._requestGeocoding({location:Te,onSuccess:function(An){if(logger$w.log("request from Geocoding",An),An){We._locationsToBeDisplayed=[];for(var Sn=An.locations,Tn=0;Tn<Sn.length;Tn++){var Ln=Sn[Tn];Ln.fullText=GeocodeUtils.getGeocodedLocationFreeform(Ln),Ln.position={x:Ln.position.lon,y:Ln.position.lat},We._locationsToBeDisplayed.push(Ln)}We._fillAutoCompletedLocationListContainer(Sn)}},onFailure:function(An){logger$w.log(An.message)}})},Be))}}),this.options.resources.search&&Search$1.suggest(Te);var Cn=this.getMap();Cn.on("click",this._hideSuggestedLocation,this),Cn.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,Te){var ke=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(Be){logger$w.log("request from Geocoding (coordinates null)",Be),Be.locations&&Be.locations.length!==0&&Be.locations[0].position&&ke._suggestedLocations&&ke._suggestedLocations[Te]&&(ke._suggestedLocations[Te].position={lon:Be.locations[0].position.y,lat:Be.locations[0].position.x},ke._locationsToBeDisplayed.unshift(ke._suggestedLocations[Te]),ke._fillAutoCompletedLocationListContainer(ke._locationsToBeDisplayed))},onFailure:function(){ke._suggestedLocations&&ke._suggestedLocations[Te]&&ke._createAutoCompletedLocationElement(ke._suggestedLocations[Te],Te)}})}onAutoCompletedResultsItemClick(e){var Te=SelectorID.index(e.target.id);if(logger$w.log(Te),logger$w.log(this._locationsToBeDisplayed[Te]),!!Te){var ke=[this._locationsToBeDisplayed[Te].position.x,this._locationsToBeDisplayed[Te].position.y],Be={service:"SuggestedLocation",location:this._locationsToBeDisplayed[Te]},Ue=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[Te]);this._setLabel(Ue),this._currentGeocodingLocation=Ue;var He=this.getMap().getView(),We=He.getProjection().getCode();We!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",We));var Cn=this._getZoom(Be);this._setPosition(ke,Cn),this._displayMarker&&this._setMarker(ke,Be),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[Te]})}}onSearchedResultsItemClick(e){var Te=SelectorID.index(e.target.id),ke=null;try{var Be=Search$1.getSuggestions()[Te];if(!Be)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var Ue=Be.service,He=Be.name,We=null;switch(Ue){case"WMS":We=new LayerWMS({layer:He});break;case"WMTS":We=new LayerWMTS({layer:He});break;case"WFS":We=new LayerWFS({layer:He});break;case"TMS":We=new LayerMapBox({layer:He},{declutter:!0});default:break}if(We){var Cn=this.getMap();Cn.addLayer(We)}}}catch(En){ke=En}this.dispatchEvent({type:"searchengine:search:click",suggest:Be,error:ke})}onGeocodingSearchSubmit(e){var Te=e.target[0].value;if(Te){this._currentGeocodingLocation=Te;var ke=this;this._requestGeocoding({query:Te,onSuccess:function(Be){if(logger$w.log("request from Geocoding",Be),Be){var Ue=Be.locations;ke._fillGeocodedLocationListContainer(Ue)}},onFailure:function(Be){ke._clearGeocodedLocation(),logger$w.log(Be.message)}})}}onGeocodedResultsItemClick(e){var Te=SelectorID.index(e.target.id);if(Te){var ke=[this._geocodedLocations[Te].position.lon,this._geocodedLocations[Te].position.lat],Be={service:"GeocodedLocation",location:this._geocodedLocations[Te]},Ue=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[Te]);this._setLabel(Ue);var He=this.getMap().getView(),We=He.getProjection().getCode();We!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",We));var Cn=this._getZoom(this.options.zoomTo);this._setPosition(ke,Cn),this._displayMarker&&this._setMarker(ke,Be),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[Te]})}}onGeocodingAdvancedSearchCodeChange(e){logger$w.log(e);var Te=e.target.selectedIndex,ke=e.target.options[Te].value;ke&&this._setFilter(ke)}onGeocodingAdvancedSearchSubmit(e,Te){if(logger$w.log(Te),!(!Te||Te.length===0)){for(var ke,Be={},Ue=0;Ue<Te.length;Ue++){var He=Te[Ue];He.value&&(He.key==="section"&&(He.value=He.value.toUpperCase()),Be[He.key]=He.value)}var We=document.getElementById("GPsearchInputText-"+this._uid);ke=We.value,this._currentGeocodingCode==="CadastralParcel"&&(ke=""),this._currentGeocodingCode==="StreetAddress"&&(ke=`${Be.address} ${Be.postcode} ${Be.city}`,Be={}),this._currentGeocodingCode==="PositionOfInterest"&&(ke=Be.q,delete Be.q);var Cn=this;this._requestGeocoding({query:ke,index:this._currentGeocodingCode,filters:Be,onSuccess:function(En){if(logger$w.log(En),En){var An=En.locations;Cn._fillGeocodedLocationListContainer(An)}},onFailure:function(En){Cn._clearGeocodedLocation(),logger$w.log(En.message)}})}}_getCadastralParcelRequestParams(e){var Te="",ke,Be=e.department;Be?(ke=Be.length,ke===2?Te=Be:ke===1?Te="0"+Be:Te=Be.substring(0,2)):Te="__";var Ue=e.commune;Ue?(ke=Ue.length,ke===3?Te+=Ue:ke===2?Te+="_"+Ue:ke===1?Te+="__"+Ue:Te+=Ue.substring(0,3)):Te+="___";var He=e.insee;He&&He.length===5&&(Te=He);var We=e.absorbedCity;We?(ke=We.length,ke===3?Te+=We:ke<3?ke===2?Te+="_"+We:ke===1&&(Te+="__"+We):Te+=We.substring(0,3)):Te+="___";var Cn=e.section;Cn?(ke=Cn.length,ke===2?Te+=Cn:ke===1?Te+="_"+Cn:Te+=Cn.substring(0,2)):Te+="__";var En=e.number;return En?(ke=En.length,ke===4?Te+=En:ke===3?Te+="_"+En:ke===2?Te+="__"+En:ke===1?Te+="___"+En:Te+=En.substring(0,4)):Te+="___",logger$w.log("location : "+Te),Te}onCoordinateSearchSystemChange(e){var Te=e.target.selectedIndex,ke=e.target.options[Te].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var Be=null,Ue=0;Ue<this._coordinateSearchSystems.length;++Ue)if(this._coordinateSearchSystems[Ue].code===Number(ke)){Be=this._coordinateSearchSystems[Ue].type;break}if(!Be){logger$w.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(ke)],Be!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=Be,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[Be][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[Be])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var Te=e.target.selectedIndex,ke=e.target.options[Te].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=ke,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),Te=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(Te),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),Te=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(Te)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search$1.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_prettifyAutocompleteResults(e){for(var Te=e.length-1;Te>=0;Te--){var ke=e[Te];(ke.type==="StreetAddress"&&ke.kind==="municipality"||ke.type==="PositionOfInterest"&&ke.poiType[0]==="lieu-dit habité"&&ke.poiType[1]==="zone d'habitation")&&e.splice(Te,1),ke.type==="PositionOfInterest"&&ke.poiType[0]==="administratif"&&(ke.poiType[1]==="département"||ke.poiType[1]==="région")&&(ke.fullText=ke.fullText+", "+ke.poiType[1])}}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);Object.assign(SearchEngine.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);var MousePositionDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPmousePosition"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowMousePositionPictoElement:function(Oe){var e=this,Te=document.createElement("button"),ke=document.createElement("span");return Te.appendChild(ke),Te.id=this._addUID("GPshowMousePositionPicto"),Te.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-position fr-btn fr-btn--tertiary",Te.setAttribute("aria-label","Afficher les coordonnées du curseur"),Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!1),Te.setAttribute("type","button"),Te.addEventListener?Te.addEventListener("click",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),e.onShowMousePositionClick(Be)}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),e.onShowMousePositionClick(Be)}),Te},_createMousePositionPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPmousePositionPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createMousePositionPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createMapCenter:function(){var Oe=document.createElement("div");return Oe.id="GPmapCenter",Oe.className="",Oe},_createMousePositionPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.id=this._addUID("GPmousePositionHeaderTitle"),Oe.innerHTML="Coordonnées",Oe},_createMousePositionPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader gpf-panel__header fr-modal__header",Oe},_createMousePositionPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPmousePositionPanelClose"),e.className="GPpanelClose gpf-btn gpf-btn-icon-close  fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowMousePositionPicto")).click()},!1),e.addEventListener("keydown",function(ke){ke.keyCode===13&&document.getElementById(Oe._addUID("GPshowMousePositionPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowMousePositionPicto")).click()}),e.attachEvent("onkeydown",function(ke){ke.keyCode===13&&document.getElementById(Oe._addUID("GPshowMousePositionPicto")).click()}));var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e},_createMousePositionPanelBasicElement:function(Oe,e,Te,ke){Oe=typeof Oe>"u"?!0:Oe,e=typeof e>"u"?!0:e,Te=typeof Te>"u"?!1:Te;var Be=document.createElement("div");return Be.id=this._addUID("GPmousePositionBasicPanel"),Be.classList.add("fr-mx-1w"),Be.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,Te,ke)),Be.appendChild(this._createMousePositionPanelEditToolsElement(Te)),Be.appendChild(this._createMousePositionPanelBasicAltitudeElement(Oe)),Be},_createCoordinateElement:function(Oe,e){var Te=this;if(["Lon","Lat"].indexOf(Oe)===-1)return[];var ke=[],Be=document.createElement("input");Be.id=this._addUID("GPmousePosition"+Oe),Be.title=e===!0?"Cliquer pour saisir des coordonnées":"",Be.readOnly=!0,e&&(Be.addEventListener("click",function(){Te.onMousePositionEditModeClick(!0)}),Be.addEventListener("change",function(He){this.classList.remove("error");var We=Te.validateExtentCoordinate(Oe,this.value,He);We?this.classList.remove("error"):this.classList.add("error")})),ke.push(Be);var Ue=document.createElement("span");return Ue.className="GPmousePositionUnits",ke.push(Ue),ke},_createDMSCoordinateElement:function(Oe,e){if(["Lon","Lat"].indexOf(Oe)===-1)return[];var Te=this,ke=[],Be=document.createElement("input");Be.id=this._addUID("GPmousePosition"+Oe+"Degrees"),Be.className="GPSexagesimal",Be.setAttribute("name","degrees"),Be.title=e===!0?"Cliquer pour saisir des coordonnées":"",Be.readOnly=!0,Be.dataset.min=0,Be.dataset.max=Oe==="Lon"?180:90,e&&(Be.addEventListener("click",function(){Te.onMousePositionEditModeClick(!0)}),Be.addEventListener("change",function(){this.classList.remove("error");var Ln=Te._checkDMSDegrees(Oe,this);Ln?this.classList.remove("error"):this.classList.add("error")})),ke.push(Be);var Ue=document.createElement("span");Ue.className="GPmousePositionSexagesimalLabel",Ue.innerHTML="°",ke.push(Ue);var He=document.createElement("input");He.id=this._addUID("GPmousePosition"+Oe+"Minutes"),He.className="GPSexagesimal",He.setAttribute("name","minutes"),He.title=e===!0?"Cliquer pour saisir des coordonnées":"",He.readOnly=!0,He.dataset.min=0,He.dataset.max=59,e&&(He.addEventListener("click",function(){Te.onMousePositionEditModeClick(!0)}),He.addEventListener("change",function(){this.classList.remove("error");var Ln=Te._checkDMSElement(this);Ln?this.classList.remove("error"):this.classList.add("error")})),ke.push(He);var We=document.createElement("span");We.className="GPmousePositionSexagesimalLabel",We.innerHTML="'",ke.push(We);var Cn=document.createElement("input");Cn.id=this._addUID("GPmousePosition"+Oe+"Seconds"),Cn.className="GPSexagesimalsec",Cn.setAttribute("name","seconds"),Cn.title=e===!0?"Cliquer pour saisir des coordonnées":"",Cn.readOnly=!0,Cn.dataset.min=0,Cn.dataset.max=59,e&&(Cn.addEventListener("click",function(){Te.onMousePositionEditModeClick(!0)}),Cn.addEventListener("change",function(){this.classList.remove("error");var Ln=Te._checkDMSElement(this,!0);Ln?this.classList.remove("error"):this.classList.add("error")})),ke.push(Cn);var En=document.createElement("span");En.className="GPmousePositionSexagesimalLabel",En.innerHTML="''",ke.push(En);var An=document.createElement("select");An.id=this._addUID("GPmousePosition"+Oe+"Direction"),An.className="GPmousePositionDirection",An.setAttribute("name","direction"),An.disabled=!0;var Sn=document.createElement("option");Sn.value=Oe==="Lon"?"E":"N",Sn.innerHTML=Oe==="Lon"?"E":"N",An.appendChild(Sn);var Tn=document.createElement("option");return Tn.value=Oe==="Lon"?"O":"S",Tn.innerHTML=Oe==="Lon"?"O":"S",An.appendChild(Tn),ke.push(An),ke},_createMousePositionPanelBasicCoordinateElement:function(Oe,e,Te){var ke=document.createElement("div");ke.id=this._addUID("GPmousePositionCoordinate"),ke.style.display=Oe?"block":"none";var Be=document.createElement("div");Be.classList.add("fr-mb-1w");var Ue=document.createElement("span");Ue.className="GPmousePositionLabel",Ue.id=this._addUID("GPmousePositionLatLabel"),Ue.innerHTML="Latitude : ",Be.appendChild(Ue);var He=document.createElement("span");He.id=this._addUID("GPmousePositionLatCoordinate");var We;Te==="DMS"?We=this._createDMSCoordinateElement("Lat",e):We=this._createCoordinateElement("Lat",e);for(var Cn=0;Cn<We.length;Cn++)He.appendChild(We[Cn]);Be.appendChild(He),ke.appendChild(Be);var En=document.createElement("div");En.classList.add("fr-mb-1w");var An=document.createElement("span");An.className="GPmousePositionLabel",An.id=this._addUID("GPmousePositionLonLabel"),An.innerHTML="Longitude : ",En.appendChild(An);var Sn=document.createElement("span");Sn.id=this._addUID("GPmousePositionLonCoordinate");var Tn;Te==="DMS"?Tn=this._createDMSCoordinateElement("Lon",e):Tn=this._createCoordinateElement("Lon",e);for(var Ln=0;Ln<Tn.length;Ln++)Sn.appendChild(Tn[Ln]);return En.appendChild(Sn),ke.appendChild(En),ke},_createMousePositionPanelBasicAltitudeElement:function(Oe){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.classList.add("fr-mb-1w"),e.style.display=Oe?"block":"none";var Te=document.createElement("span");Te.className="GPmousePositionLabel",Te.innerHTML="Altitude : ",e.appendChild(Te);var ke=document.createElement("span");ke.className="GPmousePositionCoords",ke.id=this._addUID("GPmousePositionAlt"),ke.innerHTML="...",e.appendChild(ke);var Be=document.createElement("span");return Be.className="GPmousePositionAltitudeUnits",Be.innerHTML="m",e.appendChild(Be),e},_createMousePositionPanelEditToolsElement:function(Oe){var e=this,Te=document.createElement("div");Te.className="GPmousePositionPanelEditTools",Te.id=this._addUID("GPmousePositionPanelEditTools"),Oe||(Te.style.display="none");var ke=document.createElement("span");ke.className="GPmousePositionEditTool",ke.id=this._addUID("GPmousePositionLocate"),ke.title=Oe===!0?"Cliquer pour saisir des coordonnées":"",Oe&&ke.addEventListener("click",function(){e.onMousePositionEditModeLocateClick()}),Te.appendChild(ke);var Be=document.createElement("span");return Be.className="GPmousePositionEditTool",Be.id=this._addUID("GPmousePositionCloseEdit"),Be.title="Quitter la saisie des coordonnées",Be.style.display="none",Oe&&Be.addEventListener("click",function(){e.onMousePositionEditModeClick(!1)}),Te.appendChild(Be),Te},_createShowMousePositionSettingsElement:function(Oe){var e=this,Te=document.createElement("button");return Te.id=this._addUID("GPshowMousePositionSettings"),Te.className="GPelementHidden GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto gpf-hidden gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill",Te.title="Réglages",Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!0),Te.addEventListener?Te.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),e.onShowMousePositionSettingsClick(ke)}):Te.attachEvent&&Te.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),e.onShowMousePositionSettingsClick(ke)}),Te},_createMousePositionSettingsElement:function(Oe){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=Oe===void 0||Oe?"block":"none",e.classList.add("fr-m-1w");var Te=document.createElement("span");return Te.className="GPmousePositionSettingsLabel",Te.innerHTML="Système de référence",e.appendChild(Te),e},_createMousePositionSettingsSystemsElement:function(Oe){var e=this,Te=document.createElement("select");Te.id=this._addUID("GPmousePositionProjectionSystem"),Te.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select fr-my-1w",Te.addEventListener("change",function(He){e.onMousePositionProjectionSystemChange(He)}),Te.addEventListener("mouseover",function(He){He.target.nodeName!=="OPTION"&&e.onMousePositionProjectionSystemMouseOver(He)}),Te.title="Type de système";for(var ke=0;ke<Oe.length;ke++){var Be=Oe[ke],Ue=document.createElement("option");Ue.value=Be.code,Ue.text=Be.label||ke,Te.appendChild(Ue)}return Te},_createMousePositionSettingsUnitsElement:function(Oe){var e=this,Te=document.createElement("select");Te.id=this._addUID("GPmousePositionProjectionUnits"),Te.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select",Te.addEventListener("change",function(He){e.onMousePositionProjectionUnitsChange(He)}),Te.title="Unités du système";for(var ke=0;ke<Oe.length;ke++){var Be=Oe[ke],Ue=document.createElement("option");Ue.value=Be.code?Be.code:ke,Ue.text=Be.label||ke,Te.appendChild(Ue)}return Te},_resetLabelElements:function(Oe){var e=document.getElementById(this._addUID("GPmousePositionLatLabel"));e.innerHTML=Oe==="Geographical"?"Latitude :":"X :";var Te=document.getElementById(this._addUID("GPmousePositionLonLabel"));Te.innerHTML=Oe==="Geographical"?"Longitude :":"Y :"},_resetUnitElements:function(Oe){var e="";(Oe==="M"||Oe==="KM")&&(e=Oe.toLowerCase());for(var Te=document.getElementsByClassName("GPmousePositionUnits"),ke=0;ke<Te.length;ke++)Te[ke].innerHTML=e},_resetCoordinateElements:function(Oe,e,Te){for(var ke=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));ke.firstChild;)ke.removeChild(ke.firstChild);var Be;Te==="DMS"?Be=this._createDMSCoordinateElement("Lat",Oe):Be=this._createCoordinateElement("Lat",Oe);for(var Ue=0;Ue<Be.length;Ue++)ke.appendChild(Be[Ue]);for(var He=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));He.firstChild;)He.removeChild(He.firstChild);var We;Te==="DMS"?We=this._createDMSCoordinateElement("Lon",Oe):We=this._createCoordinateElement("Lon",Oe);for(var Cn=0;Cn<We.length;Cn++)He.appendChild(We[Cn])},_setEditMode:function(Oe){var e=document.getElementById(this._addUID("GPmousePositionLocate"));e.title=Oe?"Aller à la position ...":"Cliquer pour saisir des coordonnées";var Te=document.getElementById(this._addUID("GPmousePositionCloseEdit"));Te.style.display=Oe?"inline-block":"none";for(var ke="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",Be=document.querySelectorAll(ke+" input"),Ue=0;Ue<Be.length;Ue++)Be[Ue].readOnly=!Oe,Oe&&(Be[Ue].value="",Be[Ue].classList.remove("error"));for(var He=document.querySelectorAll(ke+" select"),We=0;We<He.length;We++)He[We].disabled=!Oe},_checkDMSElement:function(Oe,e){var Te=e!==void 0,ke=Oe.value;if(Te&&(ke=ke.replace(",",".")),isNaN(ke))return!1;var Be=parseFloat(ke);if(!Te&&(Be|0)!==Be)return!1;var Ue=Number(Oe.dataset.min),He=Number(Oe.dataset.max);return Be>=Ue&&Be<=He},_checkDMSDegrees:function(Oe,e){if(isNaN(e.value))return!1;var Te=parseFloat(e.value);if((Te|0)!==Te)return!1;var ke=Number(e.dataset.min),Be=Number(e.dataset.max);if(Te<ke||Te>Be)return!1;var Ue=document.getElementById(this._addUID("GPmousePosition"+Oe+"Minutes")),He=document.getElementById(this._addUID("GPmousePosition"+Oe+"Seconds"));return Te>=Be?(Ue.dataset.max=0,He.dataset.max=0):(Ue.dataset.max=59,He.dataset.max=59.9999),!0},GPdisplayCoords:function(Oe){if(Oe){var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),Te=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(Oe.x||Oe.y?(Te.innerHTML="X : ",e.innerHTML="Y : "):Oe.e||Oe.n?(Te.innerHTML="E : ",e.innerHTML="N : "):(Te.innerHTML="Latitude : ",e.innerHTML="Longitude : "),typeof Oe.lat=="object"&&typeof Oe.lng=="object"){var ke={lng:"Lon",lat:"Lat"},Be=["Degrees","Minutes","Seconds"];for(var Ue in ke)for(var He=0;He<Be.length;++He){var We="GPmousePosition"+ke[Ue]+Be[He],Cn=document.getElementById(this._addUID(We)),En=Be[He].charAt(0).toLowerCase();Cn.value=Oe[Ue][En]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=Oe.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=Oe.lat.direction}else{var An=document.getElementById(this._addUID("GPmousePositionLat")),Sn=document.getElementById(this._addUID("GPmousePositionLon"));An.value=Oe.x||Oe.lat||Oe.e||"0",Sn.value=Oe.y||Oe.lng||Oe.lon||Oe.n||"0",An.title="Latitude",Sn.title="Longitude",An.type="text",Sn.type="text";for(var Tn=Oe.unit===void 0?"":Oe.unit,Ln=document.getElementsByClassName("GPmousePositionUnits"),Bn=0;Bn<Ln.length;++Bn)Ln[Bn].innerHTML=Tn}}},GPdisplayElevation:function(Oe,e,Te,ke){var Be=this,Ue;e||(e=500),clearTimeout(Ue),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",Te==null&&(Te=-99999),ke==null&&(ke=99980);var He=Te+ke,We=Te-ke;Oe&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(Ue=setTimeout(function(){Be.onRequestAltitude(Oe,function(Cn){We<Cn&&Cn<He?Be.GPresetElevation():document.getElementById(Be._addUID("GPmousePositionAlt")).innerHTML=Cn})},e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}},logger$v=LoggerByDefault.getLogger("GeoportalMousePosition"),MousePosition=class Kf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Kf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MousePosition",this._initialize(e),this.container=this._initContainer(this.options),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){var Te=this;if(e){var ke=this._createMapCenter();if(e.getViewport().appendChild(ke),!this.collapsed&&!this._isDesktop&&(ke.className="GPmapCenterVisible"),this.draggable&&Draggable.dragElement(this._panelMousePositionContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||(this._isDesktop?this.listenerKey=e.on("pointermove",He=>{this.onMouseMove(He)}):this.listenerKey=e.on("moveend",He=>this.onMapMove(He)),this._showMousePositionButton.setAttribute("aria-pressed",!0)),this.options.editCoordinates){var Be=document.createElement("img");Be.id=this._addUID("GPmousePositionMarker"),Be.src=this._markerUrl,Be.title="Cliquer pour supprimer",Be.addEventListener("click",function(){Te._markerOverlay.setPosition(void 0)}),this._markerOverlay=new Overlay({offset:this._markerOffset,element:Be,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}else unByKey(this.listenerKey);if(super.setMap(e),e!==null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),!this.collapsed)){var Ue=document.getElementById("GPshowMousePosition-"+this._uid);Ue.checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}}addSystem(e){if(typeof e!="object"){logger$v.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$v.error("crs not defined !");return}if(e.label||(logger$v.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$v.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$v.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var Te=0;Te<this._projectionSystems.length;Te++){var ke=this._projectionSystems[Te];e.crs===ke.crs&&logger$v.info("crs '{}' already configured",ke.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var Be=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(Be){var Ue=document.createElement("option");Ue.value=e.code,Ue.text=e.label,Be.appendChild(Ue)}}addSystems(e){if(e){if(!Array.isArray(e)){logger$v.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");return}for(var Te=0;Te<e.length;Te++)this.addSystem(e[Te])}}removeSystem(e){if(!e||typeof e!="string"){logger$v.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");return}for(var Te=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),ke=null,Be=0;Be<this._projectionSystems.length;Be++){var Ue=this._projectionSystems[Be];if(e===Ue.crs){ke=Ue.code,this._projectionSystems.splice(Be,1);break}}if(ke==null){logger$v.log("[WARN] MousePosition:removeSystem - system not found");return}for(var He=[],We=0;We<this._projectionSystems.length;We++)He[Number(this._projectionSystems[We].code)]=We,this._projectionSystems[We].code=We;for(var Cn=null,En=0;En<Te.childNodes.length;En++){if(ke===Te.childNodes[We].value){Cn=En;continue}Te.childNodes[We].value=He[Number(Te.childNodes[We].value)]}Cn!=null&&Te.removeChild(Te.childNodes[Cn]),this._currentProjectionSystems.code===Number(ke)&&(Te.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(Te.childNodes[0].value))}setUnits(e){!e||!Array.isArray(e)||(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))}setAltitudeOptions(e){if(!(!e||typeof e!="object")&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var Te in e.serviceOptions)e.serviceOptions.hasOwnProperty(Te)&&(this.options.altitude.serviceOptions[Te]=e.serviceOptions[Te])}displayAltitude(e){e!==void 0&&(this.options.displayAltitude=e,this._setElevationPanel(e))}displayCoordinates(e){e!==void 0&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))}setCollapsed(e){if(e===void 0){logger$v.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e)}getContainer(){return this.container}_initialize(e){if(e=e||{},this.options=e,this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=e.displayAltitude!==void 0?e.displayAltitude:!0,this.options.displayCoordinates=e.displayCoordinates!==void 0?e.displayCoordinates:!0,this.options.displayCoordinates?this.options.editCoordinates=e.editCoordinates!==void 0?e.editCoordinates:!1:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var Te=e.altitude;this.options.altitude={triggerDelay:Te.triggerDelay!==void 0?Te.triggerDelay:200,responseDelay:Te.responseDelay!==void 0?Te.responseDelay:500,serviceOptions:Te.serviceOptions||{},noDataValue:Te.noDataValue!==void 0?Te.noDataValue:-99999,noDataValueTolerance:Te.noDataValueTolerance!==void 0?Te.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=this.options.id||SelectorID.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=Helper.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,!this.options.displayAltitude&&!this.options.displayCoordinates&&(this.options.displayCoordinates=!0),this.listenerKey=null}_initMarker(e){if(this.options.editCoordinates){if(!e){this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset;return}this._hideMarker=e.hide!==void 0?e.hide:!1,e.offset?Array.isArray(e.offset)&&e.offset.length===2?this._markerOffset=e.offset:(logger$v.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=Marker.defaultOffset):this._markerOffset=Marker.defaultOffset;var Te=e.url;Te?Te.match(/^[a-zA-Z]+$/)?this._markerUrl=Marker[Te]!==void 0?Marker[Te]:Marker.lightOrange:this._markerUrl=Te:this._markerUrl=Marker.lightOrange}}_initProjectionSystems(){for(var e=[{label:"Géographique",crs:get$3("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:get$3("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:get$3("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:get$3("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],Te=this.options.systems,ke=0;ke<Te.length;ke++){var Be=Te[ke];this.addSystem(Be)}if(this._projectionSystems.length===0)for(var Ue=0;Ue<e.length;Ue++)this.addSystem(e[Ue])}_initProjectionUnits(){var e={Geographical:[{code:"DEC",label:"Degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"Degrés sexagésimaux",format:MathUtils.coordinateToDMS},{code:"RAD",label:"Radians",format:MathUtils.coordinateToRad},{code:"GON",label:"Grades",format:MathUtils.coordinateToGon}],Metric:[{code:"M",label:"Mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"Kilomètres",format:MathUtils.coordinateToKMeter}]},Te=this.options.units;for(var ke in e)if(e.hasOwnProperty(ke)){for(var Be=!1,Ue=0;Ue<e[ke].length;Ue++)for(var He=e[ke][Ue],We=0;We<Te.length;We++){var Cn=Te[We];He.code===Cn&&(Be=!0,this._projectionUnits[ke]||(this._projectionUnits[ke]=[]),this._projectionUnits[ke].push(He))}Be||(this._projectionUnits[ke]=e[ke])}typeof this._projectionUnits=="object"&&Object.keys(this._projectionUnits).length===0&&(this._projectionUnits=e)}_getCurrentProjectionInformation(){for(var e=[this._currentProjectionSystems.label,"en"],Te=this._projectionUnits[this._currentProjectionType],ke=0;ke<Te.length;++ke)if(Te[ke].code===this._currentProjectionUnits){e.push(Te[ke].label);break}return e.join(" ")}_initContainer(){var e=this._createMainContainerElement(),Te=this._showMousePositionButton=this._createShowMousePositionPictoElement();e.appendChild(Te);var ke=this._panelMousePositionContainer=this._createMousePositionPanelElement(),Be=this._createMousePositionPanelDivElement();ke.appendChild(Be);var Ue=this._panelHeaderContainer=this._createMousePositionPanelHeaderElement(),He=this._panelTitleContainer=this._createMousePositionPanelTitleElement();Ue.appendChild(He);var We=this._panelCloseButton=this._createMousePositionPanelCloseElement();Ue.appendChild(We),Be.appendChild(Ue);var Cn=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);Be.appendChild(Cn);var En=this._createShowMousePositionSettingsElement(this.options.displayCoordinates);Be.appendChild(En);var An=this._createMousePositionSettingsElement(),Sn=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),Tn=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return An.appendChild(Sn),An.appendChild(Tn),Be.appendChild(An),e.appendChild(ke),e}_setElevationPanel(e){var Te=null;e?(Te=document.getElementById("GPmousePositionAltitude-"+this._uid),Te.style.display=""):(Te=document.getElementById("GPmousePositionAltitude-"+this._uid),Te.style.display="none")}_setCoordinatesPanel(e){var Te=document.getElementById("GPmousePositionCoordinate-"+this._uid);e?Te.style.display="":Te.style.display="none"}_setSettingsPanel(e){var Te=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),ke=document.getElementById("GPmousePositionSettings-"+this._uid);e?(Te.style.display="",ke.style.display=""):(Te.style.display="none",ke.style.display="none")}_setTypeUnitsPanel(e){for(var Te=this._projectionUnitsContainer;Te.firstChild;)Te.removeChild(Te.firstChild);for(var ke=this._projectionUnits[e],Be=0;Be<ke.length;Be++){var Ue=ke[Be],He=document.createElement("option");He.value=Ue.code?Ue.code:Be,He.text=Ue.label||Be,Te.appendChild(He)}var We=this._projectionUnits[e][0].code;(this._currentProjectionUnits==="DMS"||We==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,e,We),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(We),this._currentProjectionUnits=We}_setCoordinate(e,Te){var ke={},Be=this._currentProjectionSystems.crs;if(!Be){logger$v.log("ERROR : system crs not found");return}e=transform$1(e,Te,Be);for(var Ue=this._currentProjectionSystems.type,He=null,We=this._projectionUnits[Ue],Cn=0;Cn<We.length;Cn++)if(We[Cn].code===this._currentProjectionUnits){He=We[Cn].format;break}if(!He||typeof He!="function"){logger$v.log("WARNING : coordinates format function not found");return}else ke=He(e);!ke||Object.keys(ke).length===0||this.GPdisplayCoords(ke)}_setElevation(e){var Te=this.options.altitude.responseDelay,ke=this.options.altitude.noDataValue,Be=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(e,Te,ke,Be)}onMoveStopped(e,Te){var ke=transform$1(e,Te,"EPSG:4326");this._setElevation(ke)}onMouseMove(e){var Te=this,ke=e.coordinate;if(!(!e.map||!e.map.getView())){var Be=e.map.getView().getProjection();this._setCoordinate(ke,Be),clearTimeout(this._timer),this._timer=setTimeout(function(){Te.onMoveStopped(ke,Be)},this.options.altitude.triggerDelay)}}onMapMove(){var e=this,Te=this.getMap();if(!(!Te||!Te.getView())){var ke=Te.getView(),Be=ke.getCenter(),Ue=ke.getProjection();this._setCoordinate(Be,Ue),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(Be,Ue)},this.options.altitude.triggerDelay)}}onRequestAltitude(e,Te){if(!(!e||Object.keys(e).length===0)&&this.options.displayAltitude){var ke=this.options.altitude.serviceOptions||{},Be=ke.protocol||"XHR",Ue=ke.timeOut||0;Be==="JSONP"&&Ue===0&&(Ue=15e3);var He=ke.outputFormat||"json",We=!0,We;ke.zonly===!1?We=ke.zonly:We=!0;var Cn=ke.measures||!1,En=[{lon:e[0],lat:e[1]}],An=ke.resource,Sn=this,Tn=ke.rawResponse||!1,Ln=ke.onSuccess||null,Bn=null,ei=null;Tn?Bn=function(ri){Ln&&Ln.call(this,ri),logger$v.log("alti service raw response : ",ri)}:Bn=function(ri){ri&&Object.keys(ri).length&&(Ln&&Ln.call(this,ri),Te.call(this,ri.elevations[0].z))},ei=function(ri){logger$v.log("[getAltitude] ERROR : "+ri.message)};var ti=ke.apiKey||this.options.apiKey;typeof ke.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?ke.ssl=this.options.ssl:ke.ssl=!0);var ni=ke.ssl;Gp.Services.getAltitude({apiKey:ti,protocol:Be,ssl:ni,timeOut:Ue,scope:Sn,outputFormat:He,rawResponse:Tn,onSuccess:Bn,onFailure:ei,zonly:We,measures:Cn,resource:An,positions:En})}}onShowMousePositionClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this.getMap();Interactions.unset(Te);var ke=this._showMousePositionButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),ke==="false"?unByKey(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=Te.on("pointermove",Be=>{this.onMouseMove(Be)}):(this.listenerKey=Te.on("moveend",Be=>this.onMapMove(Be)),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}onShowMousePositionSettingsClick(e){this.draggable||e.target.ariaPressed}onMousePositionEditModeClick(e){if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var Te=this.getMap();this._isDesktop?this.editing?unByKey(this.listenerKey):(this.listenerKey=Te.on("pointermove",ke=>{this.onMouseMove(ke)}),this.onMapMove()):this.editing?unByKey(this.listenerKey):(this.listenerKey=Te.on("moveend",ke=>this.onMapMove(ke)),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}}getCoordinate(e){var Te=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),ke=Te.value;if(!ke||(ke=ke.replace(",","."),!MathUtils.isInteger(ke)))return null;var Be=MathUtils.toInteger(ke);if(Be<Number(Te.dataset.min)||Be>Number(Te.dataset.max))return null;var Ue=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,He=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),We=He.value;if(We&&(We=We.replace(",","."),MathUtils.isInteger(We))){var Cn=MathUtils.toInteger(We);Cn>=Number(He.dataset.min)&&Cn<=Number(He.dataset.max)&&(Be+=Cn/60)}var En=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),An=En.value;if(An){An=An.replace(",",".");var Sn=MathUtils.toFloat(An);Sn&&Sn>=Number(En.dataset.min)&&Sn<=Number(En.dataset.max)&&(Be+=Sn/3600)}return(Ue==="O"||Ue==="S")&&(Be=-Be),Be}locateDMSCoordinates(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(!(e[0]===null||e[1]===null)){var Te=this._currentProjectionSystems.crs;if(!Te){logger$v.log("ERROR : system crs not found");return}var ke=this.getMap().getView(),Be=transform$1(e,Te,ke.getProjection());ke.setCenter(Be),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(Be)}}locateCoordinates(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),e=MathUtils.toFloat(e),e!==null){var Te=document.getElementById(this._addUID("GPmousePositionLat")).value;if(Te=Te.replace(",","."),Te=MathUtils.toFloat(Te),Te!==null){var ke=this._currentProjectionSystems.crs;if(!ke){logger$v.log("ERROR : system crs not found");return}var Be;this._currentProjectionSystems.type==="Geographical"?Be=[this.convert(e),this.convert(Te)]:Be=[this.convert(Te),this.convert(e)];var Ue=transform$1(Be,this._currentProjectionSystems.crs,"EPSG:4326"),He=this._currentProjectionSystems.geoBBox;if(He){var We=[He.left,He.bottom,He.right,He.top];if(Ue[0]<We[0]||Ue[0]>We[2]||Ue[1]<We[1]||Ue[1]>We[3])return}var Cn=this.getMap().getView(),En=transform$1(Be,ke,Cn.getProjection());Cn.setCenter(En),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(En)}}}onMousePositionEditModeLocateClick(){if(this.options.editCoordinates){if(!this.editing){this.onMousePositionEditModeClick(!0);return}this._currentProjectionUnits==="DMS"?this.locateDMSCoordinates():this.locateCoordinates();var e=this.options.mapCenterCallback;if(typeof e=="function"){var Te=this.getMap().getView(),ke=Te.getCenter();e.call(this,ke)}}}onMousePositionProjectionSystemChange(e){var Te=e.target.selectedIndex,ke=e.target.options[Te].value;this._setCurrentSystem(ke)}_setCurrentSystem(e){for(var Te=null,ke=0;ke<this._projectionSystems.length;++ke)if(this._projectionSystems[ke].code===Number(e)){Te=this._projectionSystems[ke].type;break}if(!Te){logger$v.log("system not found in projection systems container");return}this._currentProjectionSystems=this._projectionSystems[Number(e)],Te!==this._currentProjectionType&&this._setTypeUnitsPanel(Te),this._isDesktop||this.onMapMove()}onMousePositionProjectionSystemMouseOver(e){logger$v.trace(e);var Te=this.getMap();if(!(!Te||!Te.getView())){var ke=Te.getView(),Be=ke.getProjection(),Ue=ke.calculateExtent(Te.getSize());Ue=transformExtent(Ue,Be,"EPSG:4326");var He=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));He.innerHTML="";for(var We=0;We<this._projectionSystems.length;We++){var Cn=this._projectionSystems[We],En=null;if(Cn.geoBBox&&(Ue[0]>Cn.geoBBox.right||Ue[1]>Cn.geoBBox.top||Ue[2]<Cn.geoBBox.left||Ue[3]<Cn.geoBBox.bottom)){Cn===this._currentProjectionSystems&&(En=document.createElement("option"),En.value=Cn.code,En.text=Cn.label||We,En.setAttribute("selected","selected"),En.setAttribute("disabled","disabled"),He.appendChild(En));continue}var An=document.createElement("option");An.value=Cn.code,An.text=Cn.label||We,Cn===this._currentProjectionSystems&&An.setAttribute("selected","selected"),He.appendChild(An)}}}onMousePositionProjectionUnitsChange(e){var Te=e.target.selectedIndex,ke=e.target.options[Te].value,Be=this._currentProjectionUnits;this._currentProjectionUnits=ke,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),(Be==="DMS"||this._currentProjectionUnits==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()}convert(e){var Te;if(this._currentProjectionUnits==="M"||this._currentProjectionUnits==="DEC")Te=e;else if(this._currentProjectionUnits==="KM")Te=e*1e3;else if(this._currentProjectionUnits==="RAD"){var ke=(180/Math.PI).toFixed(20);Te=(e*ke).toFixed(20)}else if(this._currentProjectionUnits==="GON"){var Be=.9.toFixed(20);Te=(e*Be).toFixed(20)}return Te}validateExtentCoordinate(e,Te){if(["Lon","Lat"].indexOf(e)===-1)return!1;var ke=Te.replace(",",".");if(ke=MathUtils.toFloat(ke),ke===null)return!1;ke=this.convert(ke);var Be=this._currentProjectionSystems.geoBBox;if(Be===void 0)return!0;var Ue=[Be.left,Be.bottom,Be.right,Be.top];return Ue=transformExtent(Ue,"EPSG:4326",this._currentProjectionSystems.crs),!(e==="Lat"&&(ke<Ue[0]||ke>Ue[2])||e==="Lon"&&(ke<Ue[1]||ke>Ue[3]))}};Object.assign(MousePosition.prototype,MousePositionDOM);Object.assign(MousePosition.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=MousePosition);var MarkersOther={drawing_api:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mGtsFFUUgL9zZ6bdbaEP2kpRCYj4wlciRMHEHxo0MdHEqDFG/aExvmJiYmJ8G2P0B8YYYozC+oivCAl/VMRqIkTBUIygCAiNlr6oQAttd9vS7bQ7c48/pq0QdtvZFU9yM5nZOfd895xz7zmzQomibwFlgACVCCPUI1QDCcAFAsBHydBDP2ejOEAlyN2l2XRLhaUcyCDUsoQsK4DrgCuBRmAWcALoAfbQyDaUn1nGAZrRUk1KSV59DwhpRLgLuAe4JsZMPwPrsGzA0CuP/M+wugYwCMJFKM+g3IVQEU8ZgCywAeF1LH/ioPJwfPvFpUGA4LEYeBW4DSlCP3JLBXAfSgXCC7i0TS0jhpjYXk0BHjXAE8BtaMn57gK3IzxBjhpdE18xNiyKg3ADcD/glpbtExJF5AGUGwDnjMJqChBqgccRZhVYTDTCk8bks/zvzwIeBWr1vXiwcUNpgCuAqwuCgtKwtIcFtzqU19Ywls5waGPI8d8aUeS0SET3KxAuB34kRu7Gh1VuRCjPDyqWhbcMsGI1VJ1fCRPH/wX3DrHjyX46N9XlBY5O65XAT0RFZEaPxYMVlpAvvxSoXjTIsteGqTp/LvAvbNXiuSx7dZiqRZkCfnOAy9B4HHFhhagy5d9WsxcmmXN5XZ75DHOunEPVecmC8ypz0XjbtZjjJ5H3qQLGcxHJb1CkHPGcghkpFFrIaRL/6ILBAsbA7zvBWLov7+/+QB/+8ZFpfJc5s7CKRWlFCfPCDhxI0JKyaDh8ql44TMtaJd2SLAAbAn8BNg5GvDRQLEIzUdNy6iYTIMgm+H3VXMYz3Vz8UAavqoHc0HEOpMZpSc0nyJYVgM0RNTixYGMltq5BEM4DvkdYlGcxkRg3xKsAcR1sEBJkwQbONFbaEVYCnfLwzOds3JxV4CiwLq8XZGLYwGFsyMEfgPEhZwZQC3xO1PPGamZiV3hNAcqFCJ8Ay+PqTSM7EO6/86PGv347Uo6xEFqD41isiepHhe9zXU8Pk71Ocf1sCg+4HVgNzCuVUpWjA1nz3B3vn7PxSNZ4AbjGYkJrjOPY0BqxAuNJ389eMjjk7204i3meLRoWop70ZeBJwIuvHLnGKnZ7R2LbU183fHVs2PFdo65G6SiR71QRUcCiBChpA/vFaGvRjd4E8EKUtcBNeSv+NLxtfV778011m3YeSmSciYyWU94QUJ24CIAVGLXo98UUBQAmvp26UFYDHcXoDo6azPrds5t3dSfSjkElArFMDYmuIhbEiqgVQRStQLWmaNgJYCXNZuAdou+qGSUXEvzQmty1fvfsDiMgseIhgqqoyBE1prUkWACOESJ8DHzJdEePRlHd31Pe8vb2mt3jgdgYoAIYBR/YY6DJJBKHS//f4BIA0sAbqlwMXJUXQuDYsNOb2lHd3JX2sqe/ogKCTjbwgkU1CxxE5E+gO51MnqjO5YpqZE5leGTSb+zNhawOleGpJydd/RxjX+yb1bzlYLJXmAp/FF7FqAqoBsAI0KmwxXHdzxS+u7mzswU4MT+Tof3gwf/02RcxpaCzz6ltqLKvJD19zAju5KYOlfCntsTOF7+t33pkyPUdE9U6VUVExoERVdKCdomY1hCOqxCM9veHlbW14Di0tbdP2So9DU7y8M7nTAbHfFBfGSyt8PRaI5FjuwbcQx/+Uv3r34Ou7xp1VMkBaRE5BhwVkW7Xcw+j5KwNkFyouA71Cxbwx759+TLqzEjHKo8yx97RUBm+7TnMG/Rl+N3tNU1rm6v3ey5pgaOo/q3QU5FI9I6OjfkiguN5nLt8OZs//XRmx5wpWIDvnp6duLR+9KXaZPjgjs7k1mebGtals6bDiPY7IpnusrKReb5PeVkZB1pbi57/P6fByVKXDPzOtPtmwtX1f/Qm0u3pRL/b0+VXL2xEVbm+r49v+vtLnv8f2Pk64kl5WH4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjAyOjM4KzAwOjAwnw8TLgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr+195mLx3bshNghKWkNpCglPEBpUYSAKg88gGigUftARSJzkbiIB54QalQkKvGISkGQSkTQplJBKQgQbbmUW6CkTZuGVq0pjV3n4jSOnUzG47HHM545++fhjNs6npDjISzpaDQ6s9f69tr/XnvtMTo0fbYfAhACbN5knJ1ch9QHlseIgAZSHbMyhRsvUj0qvIPeHPbd6Y5iRp3CIkGjy8jUtnJ28mbgg8B7gEGgB5gDpoCXmD92GOxZ3pt/haN1dRrSOuLcvQYitwHpNsTtwE0gj5kAXeLfkGLgKGaPgPslIZ62A7P/X9hk6YMRuB5nX8PYBeoBiy+BbBfHA3OIXyDdh7NRXFP24/nU8VcnA3OG6R047QXtTACsmWaeQBNUAO7E6Ea6B984cYVJLjOXOqvD/aC4D/gSxk7MPFhY1WSx0Bq3E/gizVyf9vSmHp0aloBH3ALcCeZIakEnFkgk8RmCfQTkryqshvshoh/4AtBNu6WTjBAbzUWjUYfmYvJdWrkvDLX8fB58n/b0p4JNp1lhBG0D3k+yWZbDJkCBd95c5H0fz1LoX0u1VOKfv11k/Ln1SNaqFMuR4SaMbYgnSaHddLAmD+wAsm0zigI33lrh09/OMzDUD3QBxvY7Zvjp3lmO/aYX4ZYBmwHkEDswPQVccaOm1KwcaCuJ1i55FWDDlgq79i4yMLSJZHkd0M3A0CZ23bXIhi0V1FbiHtNWTKk4UsKagQ22/X0IMDhU4JobBlhZt41r3j3A4FCB0BbWgW1YSvOVLK1mAfKAtTbHm18Kn4kwy11mnll8RpeRpLX8prK0pUvALO0imjMqF+aols+3HTk/c4HZC3NJtVvhVUhlpFQHQ1rNCvQqEK/04GFiJMuhB+uEUFn2LoQKhx6sc2Yki2tbTptgY8hSwaY9bgNwBNMdYMujmkG9muPR7/RTnZ3glt095HsHWKic59CBOf68fwP1agbXLi9qAs9i6Q6YVMLWcK8hfx3oVxhvZ6UcDAl8pkmuYPjIEzdj6lURN6LW/mlXZ09g9knUPG0PzF0xu+k1GzSFeAQRt5mkMCBuRFTLnkpRVMv+v4KKGHEQaRrSySB1i6jdfeDYAuzD2E47/aY3j/Q0xpd3He0de74S4QLEweF9IDjDgEKtxofPnWNfa1DqFtEeKqPhNSeR7UNch/FWVtHMSK3EGIY0WWy4n9z2zJriVMMGWxyu9cQtv4uC6vmuQu1dA4NszIRVNt/DfRAoYHwd01fBMlz2TBfSG8VeyCRzTaF/lKKnvvHv7sfPL7paZIqUQFqr7VDrWA6IJqLkYMScRld9rdGePjBdC9wLfHTlVeYNyCC5gHmBCZmBjc378W8e7/79c+Wo7F2SLHvTWLCkUtpSf0QwWAjoifT97JIcDpTBwgTSD4Fxlu5ZCEkWZC4WviGyTcgE4aQkc6WGK/1sMvfMsdloxhuyBCTw+mPJp1kAC2YKZphQAal/1bAA9sCcmF74K/AjpPmlbAaZb4pMLKKAnLBkp5hoBGv8pZh5/ueTuVOOtN2AGZLJ7KycG+0IFoCLzZhgD4M9KpliETUhkuRkMsPUWlAk00jFH7//dP6FxWAhBagBTlADXnDwuMvnX+v8f4MtfVDIzlCvf09ia4x9QBKtZC5p2Awxtein9p/JH5lY8AsrOWVLZwqtNh+pCoxh9gowUerqmutrNFZxB7t06g+Xod4QxCO12H4Qi7IlZUnQSimiHlvt11PZI4eKmWnj9eVPlle4pHdXE5gHTgr+5KPoIcHvPnby5MvA3OaZGcbHxjr7k2NZXoZ7GatE/etzujvn9RVnconMZEEW/n4xc/Rbo4UnJ+uu7pcULGFmi8C8RMnQKTM3GsN5Gc2FYjHuXrsWvOfV8fFl2vif7fAn1tr6vG1bn42/3+X5kFlyLTgx70/eM1b4w+FSphglV6MGUDKzaWDSzCZ8FL2GaITQJG7EUuQp9PTw0osvrlzNqwELcPz2deRd+NS6rO7NODaXG1a6/1T+if1nci9nnJUMJpHOCM4V8vmphXq9Zmb4TIa3bd/OHw8cuGKMqwYL8NitA7kb8s27+jL63NOl6G93j/UcnGnYCYeK3mxmIpud31irkctm+dfo6Kr9d14N2thbolA/VbP7rnc6ODIXzZyqZy76M6cX1ly7EUnsuHCBx4rFjv3/B5an/+2QIsMIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMjo1MCswMDowMGqPVM4AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABPdJREFUWMO9mNtrXFUUh7+1z5nMmdhkkjZpE1RsWi1FqQWL0gp98EUQ7JP+AYJPPigIlvqgiIr4IFqxSFtQ1AqW4oMXUAreK7Zia0vv2Exz6SVNc5u0SZpJZ875+XBOa0oz6UwydcFimNln//a3195nrb3HmKPpxq8GtABZIAB8oAQUgFFgeHoXm+OY/lxhp417P7AOWA+sBtqABcA40A8cBvYAfwInbp7nbTbF3iZ4QfCnQBX4PsHzgiX/C20CaYKVgk8EExWCXvOJpN/KROe2wprgPsGXgmKVoNe8KNgluFdz374VRbVZsGUeoNOBP0j0bgusJ3hKMDZP0Gs+luh5tyOqLYKfawR6zX9IdCuySlOXAx4EHpl1TmvW9LNhg0dzcxP5/Cjffhty8GAb5ffmOmAV8Cu1SmkCX/B22b1qFmrDhkHlcn2SxiWVJI2rs7NPTz45KIhm2btvaf75/gbYOsE3ZQddvnxEhw93SQp1o4U6dKhLy5aNlIGNEt26Spe3EjPiyjTzci5dmmHVqkUz6DlWr15IR0dmFt0lVJjCqgl/ULYllfIxm3lAszSp1GxvfIYKrdLIAlwq2zI0NE4+PzRj28jIEIODE7PojtYaNgI6gXDG1hMnArZvjwjDsRt+D8Mxtm0TJ0+Wi14InEr0a2NJQXhWMFk2Z2azU9q0Kadc7owGBiaVy53Rxo05NTZOzZJnJxPd2hWG5EywTHB61iTv+yU1Npa0cKHU2FiS75duURROCzpqekZIKlhG8KYgrFH1CgVvJLoVWcUzSgRXAJ8Ba2sQg33AM0+3tZ06mE7jIggjh+dFRM4woL5QYH1/P1uTDhWnLouBu4H3gc1A+zxW6sKIc9ufuvPOwT7nFiccLvGQ+IW7KrgymKkvrGhdTHsqqm6vJNGtB14DXgRS1YJGEP0RBHteam39ZsDzCr7kK4a0JCTCTECEKCHyDo6bU2dVNTmJ7hVgK/F963Gq3EpdqVTPlqamIwOe1+yByWyagGI5xa+cYv52QUcofqimKFwHBnqJt0J3NX0vOTe6s6Fh74EgyHsgg8jiJU/c4k+zCCwyU2SGCdUjNVUNmwAL+BH4kDjSt7QilH7JZA7sbGjodhUvhxmSyaxPznXOCTaxEPgU+JpbnEUFHE+nT25pajp01SyqANQAp/h/h8MOvndBcH6+58g88I5gJfBQOYgBz7u4PZvd25tKXbn5GRkYUjIvI0K6AuQw+wc4m89kxrPFYlUHmZumngTtSBE2hzA203MFmPpqwYK9P2UyF+2/fvHyCicZSCVgAugR/OT5/ueC3U/09JwExu8eHaUrl5t/mRPQ43nNrVH0ekZ6zk3L3SGEvwfB/ldaWn7r8/2CF7OaJMzsKjAhkTfUa+Y6QxiUUZocHg7vaG4Gz+N0V9f1seZ9nTBgv3OjOPdRS6m0pl561CWT6PX9Mx9ns3+f8/2CL3mCIpA3swHggpmd9VP+eUQxikpYMRS+R8s993Ds6NGbxqrJ3efhYlHdqdSRy869lw7DDgftl83GdjU0/LUnk7mYigEvIJ0T9GfS6YuTU1OFeLbGXevW8uOOHRUFpma2u6EheGBy8tXmMHx2X5D57eXFrV/knet20rBnNnq2rm6ivVAgXVfHic7OqvVrd6sEFpVKhR7ffzeItPNYOsh3BcGw39tbyLa1IYnHhob4bnh4zvr/AlFvZYTScGjCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMzowMSswMDowMGvaOiAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABfxJREFUWMO1mF1sXEcVx39n5u5613btOIlrp0lEhBr6RSmKLUiQIkQFSH0rLSoI8VCE1DSqVKkIAeVDCPECQhChClKXB0qBRKpoQbQNRbSUNIoTKW1NmsZW6vgjNbHXjje79q7Xd33vncPDjYuc7qZ3t+ZIq5V27sz5zZn/mXPuCk2a7vwlZNNgBK5vE/JLm0E6UTIIHhCi+KBFSrk8nTcokYVqGzL85aZ8es3C0tkCI0Xhpq5byVf2AHuBO4BeoB0oAzngNNf1vorTk8z1D9MzqM26lKaiuusJMFEvTu4DvgJ88t2l6q2onAQOoe5pxMzKG/v+v7DafxAiI4jchOi3Qe8DaU04G5QK8DTITxF3DmdVhh5I7L8xGdhQcKkbgR8Dd6PiJd+ugNAKfBXVVlS+h3pj8S6SmUke1QEIUxsQHgbuBm0A9KoACfeAPIwEG7TvYOKJiWFRtSB3AvfH2d4caWziAV9D9E7Arius9g2AkS7gIZD2OpsBpxBEsBLF307j32vyajvwII4u7X8iEWwyzSoGx8eAT9QFBeW27hx7P2TpaNnAYrXIq+9EjFzqRVWQq09CQNiDyO3Av0ig3WSwggH9HEhLHVDHp3dc5ht7YFtHG/HRtnHXzkV+cSLP0clNUAuYFuCzKMeA8P0wkmrWgNxKLX05hW2dC+zvL7Gtowf4H+z2jh7295fY3lHE1QycBT4KmogjGawiKL3UyioFtl6X5caNm2qsZ9i5cSNbO7J1DllAe0ATZWtSGQBkam9EwTMeIrUdirRgxdZNNCSbiCFxZGNbqAMDBb/MYnW+5viiP0/RX0LqBq+4zrDqQEdBo/cMWYGxyxmeHXE4La0Zc1rimRFlrJDF1oBVIpS3UVwSioTlVh3IIHHTsjbJRMAPMzz57x5KK1N84eYibaluloJLPDu8wjMj2/HDNKYGrBAAJ2E9YQVHxCsYpoEPv2fcAKVqmj+c3sGfhsGKJXI34IcQOlsTNLZpVP6JTQabVLOKZQY4VDsKEkc4dJZy1bLgQ3nFEjp7Da06lD8COTRZM5O4wGv/AET6EUR+h7A76bxr2AlU7v/iwm/ffiOcxjiInMFahzOCAK2+z95cjtVWp7F+tm8gBdwDHAC2NEup6MxlV3n03uJv/jrtKqkQPOMwkTPGWhc5I05gJev7lVsWFv03u69nS8o1/FoTAM8Bu4BHgFQjiCA4VXc8mDj3zfJzXXOu/CUP4xkwGMSauMcw8cPOb8mEQ92ZgoGzM5GMNtznad8AwA5UH0f4PNcQZS3csWh+/LvlI8+fCt4pWonvM1nzhMSFRkDjwuYElh36j0aKAgDy+j6AC4geACYambvglouH/aHB14KpgsWoxCCOdz8Sf4s4ECeiTgRRtBXVDQ3DXgFWsoWXgF8BlSRzAo3CV4LR1w77QxMGqVudr/IkqIqKTKsxo03BAtA+F6HyJMpfrn31KKrK2Sg38ljl+NCKhi4BqABGwQdOGzhiMpmLzf9vcOkWWKFAmp8pejPKrtoQwpwrzQ5UTgxeiAqVGm2bgKz2OYrgUK0A5xE5B0wVstlyZxA01MisRXh9H6RQhDcDogMRq33BlSBf8e67oPrn6pnBl4PzswKrxx8fr2JUBVRDYAmYVHjZet7vFV68a3JyBChvLxYZP3/+A731xUx9A0xG813dpuNHWVL7jYi3mtWRanQsGDv1/fLfjk67Rd+KEUBUFRFZAZZUKQh6QcSMRnBJhXA5n4/aurrAWsbGx9do4wPbqTselc3Seftm03awldSnjAgKTIT5iR8u/f3IsWB83sNY4nu6ICJzwIyITFnPu4gSOBcSBZGqZ2ltb+etM2dqCGqdbOLjPyEt9t5uaXssJXbLgvNLv14+fuTx5cGzKfEKAjOo/kch15rJzC5Xq76IYFMptu3ezUtPPfW+PtYNFuDFXd/K3Kabf9Al2a+fCC4c/c7SC4cKrjJhkLwVKU6l00tbfJ+WdJrh0dGG12/+NqhhmzTrT0aFn2esd/itaLYwTiHvXcz5nVt3oKp8Zn6eF/L5ptf/L2sInRchOhqOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNjo0OCswMDowMJwhuk0AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmRJREFUWMO1mF2MlFcZx3//887Ozs5O96OwZekupiq0ptJigFhaJaZNa9MbbTVBY5pYY0MlxiZ640XjhfHGxtheGFNFL7AIGmIbEy2Cix8sCSWxSCiyKyy7QGGXhd1hZnc+dnbfec/jxSwI7ADvjvhPJm/yvufj93ycc54zokHt+tYqMnMtOHN0lu7RdGt2KdBuWApTQqIKVgHy3d2F7PhYu7koork0y6d3DTQ0Z6JR2Ltn23m/Y1Crcw88OJ3OPgpsBNYA3UAGKALjwNHx8bv6kT+06r1LA/9+bJk1Oqca6fTnF9fiAtftzW8CvgI8IsAAzQ9p1yDNvzkE7DRnu5zXxSd/8c//L+y+l9bjfSRMDyB9V2ITRjrOKDV2Kwt2yXjVnE74yNvTvzwSe/5FpYESgRT6lQY/AJ4FS6B49tY8rzTG8yZLm9krvmrDV+2IIRe3Yd/m9VhY7QC9jHhWIrHYLJpPlYShL2C87JrUsfeldbH7x4Y1LDDjCeAFoYYX5nwgEoKvSXrCILijsHs3ryMw1wl8k9pKX2iMGeY9vhriwzl8NcS8x2xhlAWYlAG+EeA7+15cHws2pofMefzDwCdvBiqwtg9/fHzpwxuDRLqto1qezk8c7Y8KZwe7zUy6IbcFYHoU00PA34mRu7FgHXKIp4DmeqCAX7rmM5fv3/Qd0l29rdRC29r9yDPTJ3e9lp04un+JGQuAgWaDJ4UdAKq354gh1do9SL38Mk/6nt6plZ/fUkh39S4DrsKmu1Ys++jnthTSXSvymK83dCBYjeJxxGpkmMC6qbP8zYyWJT0trT0rl9QZz2V6V93dsrSnpV7uIoRYdvUkuY1i5qwAUvUtMRQkEvViDCCpWUEQYDdNyZZ4DHE9a2DGVH07xFwxVwzL05P1Poel6cm5Yr50i8Mjf0dhJbzEEBAt+OYCSmPDqdH+t715X7jOSO8L5/vfstLocItcve3UIjM7aVY/oW9UvDQQHuMgtaLlulklEc1VUmf2bFsWlgvnejc+lw9SrV1RpTRxvv/tufMH3loRhZWktNAvZgqBQ8CdgzXkRfQ3cGPARxZ63hGWC8kP+n593+j+30EQBETRvdFcBR9Vg3qg8xrD7K9GEAs27tZlEFww2HkzL0jCR9UgnCkGYXGKcKYY1EDr56oZHmyHwTi3WH03cMRT3+b1eKL7hX4ltCFuv1voXcle+OG7UyeHp6o4D5F3BIHHu9pelq5U2Dg+zhvzHWIXEdsPj/HVtT3TkqaATwF3NUppxoVC6F99pT9/ZLIctXlol9Fupg7nLGNSRtCcqFZJRz6q3tuj1UvbFlk9iRD4A7AW49smmuKGpnaLAG/mB7PhiW3Hip3Ts/5LgUg4cDgUOAMwV2vuK82p6pGuVM7B8QuRhhZ9renbvA7gPsN+BvqsFlnUjhejke0DxT8OXQ7zgZOuGHGdSWbzDwF4wYzH+mLXs1f01NbDeDiL9DpwOn6dD6U5n99/vnLwVC7MOdW8p9qCnf+p9pQ8yEvmJWRYGrOORcMCPL31sCU6W/YJfgqU4/SJvFWPTYbvHThXOS1qu8ftJWEmk8bMuaGGYAHC7kwkbBuy399q6zFqxc7ZQjT4znD5SNWbjwEqwBlUgKMOdrtUarTh60lyYAKfnMvZXPJHGB8zbG09CAH5WX9x70j54KVyVF7YwgS6Yq7VTksrA6eQTgDnci0txfYwjH8Hu1GPbz2MhU0m0/tV43UPBfivj6+UhGHkZw+NzR48NhFevCb8tfAazkxgVgVKwBmDvwSJxHaDPc+cOTMIFFfk84ycOtXYnxzXat/mdVyaiTrbku77TY4tTkqY1S6GZhYdnwz/sWOguP9yxVdcjVRWuzbMASUzcsLOSm4oggkT1ZlsNmrt7IQgYHhk5Loo/c/6+ZfXKJPQQ21J90ZzwGNX0mG8VD3928HS7uOT4WQgAiAEcpIuARcknQsSiVGM0PsqURiZJQLSmQz/OnasbkrdEe14/hM0SV+8q1k/STgtL4e+8KeRmd17Ts8cD5xygguYnTcYT6dSF2dmZyuSCJqa6N2wgX1vvnnbOe4YLMBrz61NLc/Y9zJN+vqJy+H+7cdLOwuhP+0gG0j5c8lkaXmlQnMyycDQ0KLHb3g3qKdMk1UuzUQ/TrrEbz4o+NzFClmNjlZaP9SDmfH45CTvZLMNj/8ffOgG6JpOcn4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjAwKzAwOjAwxEaR7gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABZ5JREFUWMO1mF1oXFUQx39z7r3Z3aQx2TYxCVo1aaviJyhqK/TBUgVBRVT6oD4oIiqFgiAoqIjogyIaoYgGFGrFVuuDWloRrWgrxmKrYmtbbZovY76z2e0m2W6ye8/4cLe1obvN3bUOHO7DOTPzP/+ZM2fOFSoUHQaygAVyCB4NKHUIUcAF8ihZIMUUCepQCGbkosp8upWCJQM0IoxxBS6rgNXAtUAzsAiYBkaA36hlD5a9xDlMsgC6ApGKWO0GhGaUdcD9wE3ogtb2AluAbSijsvx/Bqs9gEUQLgOeBtahVJdhJYOyDXgV5U9AZUV4/+WlgUFQlgMvodwNuGXGphp4sPB9ljzdED4tTFms+tQDG1DuRsoGGojgAvcgbMCjXrvL4Sq8EwdYAzxUcFi5BPoPI6wBnHMKtsBqHFhPcNKLLCoxSgNehPI4lnhYdsMyZBCuQbmxaOiDSqBErh8hdqeDE6/HJlPMbPeZ/aUZkBIpswrhapTvCJG74cAqBrgVIVIUKGKpuWOSxe3gLashCG0Nix5Ik3gywcyOJWgRwIG9tcD3QH5hxsKCVa6gVH55bcepf3kKb1kT8C9Yb3kT8Zem8NpSJSw7KFcVyFhQwh4wIbiZigfTuyRG1dVLitgzVF27GLc1VoIEAZoIWe/DpUFgKlp6geciUtyhSATxikdEACVGSAlfuuB4yRl/Yho/OVF8bnICOz5zFiJSYet12Jy1KF0oftH53OEo6Q6L+lPz9fwp0u8oc0dKsecDRwl6twUlbOmyQCdB0zI/pALYTJTUK03Y1ADnPZrCnNeITY+T7pgj3bEUm6kqwV6OoMEJBTZUALQLAVoRvkZoK8E+iOsj1SCug+Z9NAOad87ipQfDWpQ+aVu4zobNWUUYRthSkgUhAGbTDv4k2LSzAFALfIhlhJDNTOhWpHAlXgq8D6wMq3cW+RGHh+57rPnoL39EMBZ8a3AcizXB/VGdzbJ6ZIS3CwqhGxJZBnqMXoQ3gXagpVKUqgxPpkzHvesvGB8aMecXcJjC8AuszylkxmPV2Usbz6fFs2U23wG71cALwJOAF14ZELAW+8PP0T1PvdL4+VjCybpGXQ1ASiGXFBEFLEoeJWngkBjtKqvVk2Wg3WSAtwneW7cRNpUkwNsz4PVt3Fx/YGzCiTsOonJ6y1DYkWphvYDQotDqK1+XcymcAgz0o7Sj9JajezxtUlu313buPxhNOg4qgpUg5IUhwVfEglgRtSKIotWo1pcNtgBYGWMX8BbBO3dByeXJf7s3tn/rjtpeY0BCxUMEVVGRITWmqyKwAEzio2xC+Qw9S+nRIKqHjkaObNxc/+tcTmwIoAIYDf5M/GbgCxONDlb+PFkOKEmE1xQuR7muKAiBsQlntOOjus7+QS9z5hoVEFQLWxMsqhngGCJ/AgPJWGy6Lpcrq5GZj+FygteBcCCXo933mTrJ5Onf7Cyzn361qPObztioyKnwB+FVjKqAah6YAfoUvnFc9wOFL2/v6zsCTC9Npeg5dqyynxzzeOmGvkEn3rjYvhiL6BPG4J481L7F/35fdN9zrzfsHhpzs05wn4mqIiJzwIwqSUH7RUyXD+Mq5E8kEn5NPA6OQ3dPzylf/+2VSlAd9m03KdS827A4f311VG82JiC2f9D9671P6n7+e8TNuq46quSApIiMAcMiMuB67iBKzto8kvMV16Hh4ov5/eDBM3z9Z7AAN9yV097d3oH0lHkj4vmtxtCSnpapj3fW/rTnp9io55EUZBjVvxVGYpHI6InZ2WywW+HCVSvZtXnzwsScC7An5ctNtdErV5x4Pl7nP/Ljr7Hdz7zWuCV53PQa0YQjkhqoqpppyWaJVFVxuKurbPvnhNmTsiSez/YNua9HI7r1965osmcgmnCT/dm6S5pRVW6ZmGBnIlGx/X8AIXpAQWXTlG4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjE0KzAwOjAw/KO1YwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABh1JREFUWMO1mH+MXFUVxz/nvje/3s7+mLa72wqNSykIxEKCqKUJf0jQgGJCIGKC/AEaUSEh4R+NGv8wEMUY0xgjTI2J2Go1/EWA7hbBxELcboKh0tItZZfd7a50Z3dmdmZ3Z2dndt67xz9mt7bd2fbNUE/y8jL35d77eed83znnjtCqvfRrcKPgCBS7ha7sFtBOkDioC+KDVFAt0lXKU0wqvgu5Tvjm11ra0m0ZNhqDXFXYHLuJzuztwB3ALcBWIAmUQDPAu8y3vYnRId6+bZg9R7XVLaWlWf1pUN2K8CDIQ8DnEb1oufOZBGAI5SDoixgzw93f+T/DHkqDEUH1U6A/AHkQUS/UMgqIlkFeROQXqJ4Gq9zzeOjtm5SBFdTsBJ4G7kNwQ7+vAIqH8DCqHuiPwX7IhSG4pJnQnANpwHQBTyLch0jzehcBVRflfuBJ1HTV173SsKiDcCfwCB/nwxShHhEeBbkTxbmysAP7wJoU8ARCsvG7aP2ywf+utbHG1EmE72I0xeHnQmGE9ZBB9GbgcxuCCvqZjp7MV3s+6aTcaFehVi2+nJ0M3lnIbkVVkIbavh3YBfyDENoNCasG4YtArBGogL23p29u7w17uNbraAMcoO0bV12/8NT7g/lXZyY2bwAcQ7kLkbcA//IeC+tZuGkV4mJadnid889c99nFa72OXuAc7E6vo/fpnbct7vA6ihs4zgE+jYbjCAsr1CvT+lgq9HntiV3JTZsbrGduad+86RqvI7FBkAWlFw2X/5r5quONh5WIGFeksShFJBYR4zT2rIBoIixAE6mL+cbDQm6lUirUqrlGT+dqlVx2ZXmpYfFQQCmGLQvhYBWLMgIEDVzHcGkuvm/qlA1UF89/FKgupieH9VSpkGiYDYQAkQ8QsWEwwsrAgg6i8hBy0UcmQjnw48+OH+st+tWpb199Y7HDjXQv+LXsvqnhlX1Tw9vLgR9tnLq0BgwhhIINV9gPpQVHr0F5HWTH+j3rcXSNCTwngivi+KpBOajhW+tskGMBxkDuQvwJ7n7ismIIq1kFpoGDqK73ggiI4FvrLNSqztxKhYVa1bkkqKpF9c/1nldCqTZ8i3g4DVavR+SPwO7Q8za2o4g8sv3nL3zgTpzFWAiswXEs1ggCeJUKd2QyPN80LMBrv4sQBPcDexHZ1jKm6rQpLf/wqmd+/3J8finig2ssJrDGOI4NrBErsJKoVMo3zi9Ujnf3sC1im+yeVGuovoKRW4GngEgTc+tysWq99ydO9/zhlZQ7v/h1NcY1YDCIYxRATV12thKL+8e64wUDJ6cDGWn+WHPoOTCmDyUNfAlpLjqRTH6s50D/q4mRySKOc9FhaPVXvTFCVQCswLJFX2+mKNTtK4+DmjOI7kV0vJmpprRc7DzyzmBidKqAMboKYjl3Sf0uYkGsiFoRRFEP1a7mYQG+/JgSLbwB/BYoh5oTBH7bidF/db717/G17HF5E0FVVOSsGjPSGixA8myAygsoL3GpXnS1AY9PZk5t6v/nMfF9GwJUAKNQAd410G/i8Y9aP55kb4aIKWD9X6J6A3Br45IqOMXFma7XhgYjs4XyeoWrgKzVFUWwqJaBUUROA1OFRKLUWas11chcaPc+BjZQ0OP4di92tS9YO8as3mWlVm0fOjHYdnx0BmEt/PXwKkZVQNUHloAJhb87rntA4fA9ExOngNL2YpGx0dEW/+Q43wbSOLm5lG1P/lQjke9hxD2XplQD7+TY2z1/GjjiFhYqGCOAqCoisgIsqVIQ9IyIGQkgq4K/nM8HbakUOA4fjo1doI2PbZH0jwQvuctvb3teY9E9a3KIZPLj3X/9W793ciynjnGAGlAQkVlgWkSmHNf9CKVmrU9QC1RdBy+Z5L0TJ9Yr6krAAkT2/wzruA8EnW2/wXG2mXJlMTUw2J86fPQkrlMAplH9j0LGi8dnlqvViojgRCJcvXs3b+zff9k9rhgsQPuz348vb9/yk8CLf8s7feZI74H+g6ZUHkck74gUp6LRpW2VCrFolOGRkabXbz0bNDC/PVFxZwu/0k9s+UtscrYQny3ka9lMRfv6UFW+kMtxKJ9vef3/AgyZp3iOwsFtAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNzozMyswMDowMHshjJAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABjBJREFUWMO1mFFsXFcRhr//3F1713biOCVxotiolJiUlpLKtiBFiiqqgpS3tkhFQjwU8QBRpUr0BSHEA+IFVNoIIVQeQ4CAKiVCoUSIFokEKUSENGpCYxJnnUQmteN4u+v12r7ru+cMD+tESbOO727DSFfn4dwz852ZOXPmXtGmDE0NkY/zuODYnGxWMVv8GEavyXJCGaBuZjFQnp+fL/b29prHU8vUOP/x823ZzLQL27vYy9imMe2Y2fFIMVN8AtgN7AS2AD1AFZgG3l23bt3xEMLJmb6Z8/2lfmvXptpZNFwYxsltCRaeB74GfB5raNMqKg07CRw07A2Zrr+z/Z3/L+zoxCg+eEnaIfRd4HmMrrRaDFvEeAP4iUwXAsHODJ1Jbb+lNIhcpGBhO/AjjGcMy0jp9yvUBXzdsC7Dvm91KwCp08K14tW6r28QegnjGURLoLcRZ4SeQ7ykrDaMFEZSL00Na7IIeAp4QVLbB/MmMPANSU8B0X2FHZkYwXnXB7xI46TfvRkzggUSS1i2ZRJLCBawVaIsqQfj2yGEvtHCaCrYVB4yzAWFz2J8rtlhMjMQ9mjno9O787uj9dH6DZVQKR9fOO7HamNbDFOzlBF6QtJjGH8jRe6mgpXJAV9CdDYFhfBk95MfvLzxZQayA900Qtu9p2dP5bXia8VjC8cewLgbuKHvacP+DtTX4kiXs4bDeIQm+RUIDGQH5vZu2Ds/kB3oB27BDmYH+/f27Z0fzA6WA6GZ5gjjM1g6jlQvGSbDttCkLhvGtuy2/PaO7Q800eeGOoY2bstsyzfNXUNAPynrfbo0aIQvt8pGyJDJaJU6JqkzUhQ1hRVg5NMwpPbsisw1hUGUfKla8ZXZZvMVX5kth/LCatcwopz2BkybswFjHMN/eCoiopAUcocrh0OwMH/7XLAwf6hyyArLhXzUpJwa5g27aFgghaQt7gE4QaNpucOqJOIQ5/aX9/fPh/nJZ9c/W+523ZsWwsKNw5XDy4cqhwbjEHc43e0XoQQ4uaJ/TUkVgNHxUXn8J5zcW4iHmjrfjIwyPqcckaLIm/exxdStHt3jWp4wZ09HFl059dCpNets2py1SNEU4uBqXpBE3epRNVSjOT9HNVSjNUCDYb8lMG1YqmYmdScyWhjF4z8l9CuhXWnX3UP+YZG9sPituYu1/9RxAXxwRFEguMZx7Ipjdk9P83qrsAAjl0ayiOeAfcDWtjGNqVAO35t7sXwkmg7ZOmRcwPngXBQFH5yCYDkfx4ufnqvEZzdtZms2tPhZIxLgj8Aw8B0g2wIgCCxYqJ9OLiz9uNqnYviqOTIOHA5FzgDMNd4OcWeufmZTruTgvSmv8ZYb0pX+80HDfin05Vaj46/6icWfVt/0Z5OyIsl0u4KbO7KVQQBBsBSwt1q5FAA4/cnTAFdl2odxuZW1Vgnl5SPxCX8uKRFhiKDGgV151BilAAqSBQkZ1oXZhpZhV4AtP5N/G/gFsJgKtG715GTyr+U348u4W1f4GiJhJpPeN+fG24IF6Pmgx5vZfjP7g9k9So81arC/6MfiA4tnLLGQAlSAM4iBdx0cdbnctbY/T25sv8GyLZc61PEK8LCZDTeFENhsuF77/eKJcM0vNunbBLpZaQ0RMFsELiFdACZL+Xy1N0laamTukNMPnyarrEk6S8I+PPM3PdkYV6zXQm35L7UTyYnkOroV/kZ4DWcmMKsDC8AVg79GmcyvDf6858qVMaA6WC4zcelSez85bpeRwgj+mu9zG90P6WSvnDK3lSlfP5WcWnq1eizMhFiRBMjMkLQMLJhREnZVcuMebpioLxWLvruvD6KIwsTEHbnxkWXnkZ1Srx5zG93r5PiCnBqFcrJ+eelnC0fr/0xmyRABCVCSNANMSZqMMplrGEkIdXzizTIRXT09/PvcuWYZdX/k8WOPo6y+oo36ubLaatUwH/9m6Wjt4NJ7yqoETGH2X4Pprlzu+lKtFksiymYZ2LWLtw8cWNPGfYMFGN4/nLMh+4F69c36meRY/MrCQT8XLksUI6k82dGxsDWO6ezo4Pz4eMv6P9rPig+J9Vns3/evRp2Z3/nxULJJila6FuvBbZgZX5yd5U/FYtv6/weDRwGc3Jre9AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MDc6NDkrMDA6MDDVlNrHAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmJJREFUWMO1l1tsXFcVhr9/7zPjGY/jSy6NXVHVScsttCBVqElBFU0FFYiXqkitVPEQBA8ERBFPqCIUIZAQApSHFgchSEorAuoTUJJSNalTUNNQLs0FO0qcOE6d+D6ecXwbe+bsxcPYpYknyvE0LOloP5yz1/r22v9Ze21Rpz3zxlrcYgULMes2NCk/Prte0AJkDEWCCkbJsOKVcnu+OT1sFfNMqYGnto/XFTOqF1bzC6Q2NKuSn9kyOT53H3A/8DGgHWgCZoAR4ERzeuSvoGP/mr21d2tu0OqOWc+krldzBNEuuUdlPA62FRP2bqfLng2QYXAMtN9CeMF7Rnc+MPv/hX2mO4cHmfFBQ99GPApqvKETq0YybE7wgmQ/DsYZ55zt/NR04virk0GIZfJ3gn4APCxTlGjJqgILNSL7opkaZXzHOzu/tJRE5pJ+2HV4Dbio1aQnEA9LilAC0HcDCwxFZjwCPFGJ1dp1eE3iXCWGNTMv9CCwg+WM1mFVZkWgL2E8iJm/qbBdR3I479pkfF2mplrZNDPMYuKwSBwWiMMiZjFmNXZZgKzJsK+ad217DucSwSbNkDPCRxH31tp3MwNht6z5+Ejnus/6dNTaulgpFgcmXorHZo63m5mklfME92HhbuAICbSbDNbkDD4jaLgOaOhc//nJT97xI1qym3KAB3Lv3/jYldfPPZkfmDi4biWwABqQfdqkvwGVG2YsKaxMW0Ar9GUEWjKbp7Z27ppuyW7aCLwD25LdvPHeTbumW7KbikZY6Ra8obsMJeJIBiuEaKeGBswCzdnbs2tzH1lXw59bl7tr7ZpsZ9Ys1PYMG1GymrKavzpznbQjRVFNUQKSGpwiX0uSSxOySSttosxa9ZmqDeMolfMzC+XiRK33pXJholTOz6rWTlcdF28qrCAI+oB45TvP5OzpTO/w3mAWrjo7zcJ0z9Bem5ztzYqV5dREbOKsiUACSyQDCwTEUeBxXRNVEpV4LvPvt3dvXKhMDW7p2FFM+TUbyvH0eM/QvsXeob23VeL5dK3MCsrAMW4mbEDBQTeEIUybr/0dJMdCuZg+Pvh0Z8/lXyN5bxbfWg5zhFD215OAiSEz92okSwSbVAaG4mGJ/chCLY1JEELZL1SmfKk8yUJlyldBax13gCwIfisXRixhM5O4RezqzoHcBzB+g7Gtvk74KntDnh37v9d89lJ/hAsQB4f3geCqtayxVOL+kRH2rBYWoOtQcwofHgF2Y+qoF9jMhuem3ZP7nmr9U7moVAUiF3BxcM77EAenIFjMlkpzH566Ujq54RY6UmGV/awoI3uR4O4x8S1BKjkgSIYFhYu96TMv/bKpbb7oHvPOIgcOh7wzAHNVWYRSQ6by1oZMwUHPcKy+Veem60gOC64T+IXgoaSnz7IsJ4ei/pf35f586Uyq6L3JrnKwfKWwpUFQLZvzAXslcT+7bF97YJYguwi227ALq5k7P+OKJ7ozRy+fTRWcw0BBEHjnUXWUAihIFiRkWCNmrauGBfjG9hmb0vwhoZ9jzCXJaohV6T+R+ufJ7oYLUrV63NgkzGTSkDnXVxcswIVMHDvTs8AfanfYS5hW3c7RAX/62B8b36pUFBKACnAGJeCEg4Muk7lc9/Vk63Qb026+kFbqJ6APYdxTC0IyZgp+9M0DjUeLo36uRt8mEEvLNUTAbA44h3QGGCxkszMt5XLyO9i19pWHCjQoZZI7GSrstsA02HLQpdGoLGqh5/WGo+ePp0b53/ZXt9dwZgKzCjALDBgc9lH0vMFfPjcwcBqYua1YpP/cufde2ru6mymOubbG5vj7qTQ75SwyU7VMmeKBk6l/vPJs7rUrk77k3NLtywxJi8CsGQVhFyXXF8O4icp8Ph/n2trAe87391+ljfdsu361Vpmm+O5cc9iTzvAJaalMDfsLh5/PHRw4lZ5w3jzVxqUgaQwYljToo+gyRjmECnE5Nos8jU1N/OfUqZWSuhmwAD/8fQtRxBdyLeFpH1lHadZN//3FzME3DzT2uIiCYBizSwYjjZnM6PzCQkkSPpXifdu2cei5524Y46bBAnzzp+sz7beXv5ttCl8e7E2/9vLepv3zM+6CZHkvFQfT6dmOUomGdJrevr5V+6+7GtSyXHMoFcf8z1Jp+93Y26lCYawhz/jFUrazAzNj+8QEB/L5uv3/F2k1+QZ70J2JAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODowMiswMDowMKLS20oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABdtJREFUWMO1mFuMFFUax3/fqarp7ppLdzMDDCwmzAxegrIka7KLF2JkITFGE5NNfFAeNPuwGh8ML2rcbDYbXMNkszFmH7w8qYmYGB92jcuDwkYwQYzILEFmggODgDANc+menkvX0FXn24dqFJZuprrVf1KpTup85/zP/7uc77TQKv4KmNrvKoJHD0IWSAMuEKIEQIlZpsihGKAT+ENrS7otk3WBACHFejzuAjYDG4FeoAOYAwrAUTo5gOUQ9zLMAbTVJaUlq12A0IvyKMpjCL9JYHUI2I3wPsJFnvu5yQ7WbJRbgeeBRwE/ka0CwgLwPoZBLCewKC8mX77ZMBBgHbAT5RHATbxdARQfYTsWH+WPWE7VtpEITpOq5lFeALYjTRC9lrABbgUcDIf4LQH7kpmbZMO+39gW4Al+TGIKILjAk8AWJLlgyci+DCh5lGeIM/16KGCBCAhrb8uNnNwBPIUlz8vJyCZVyKD8Evh1XdfHyaN3rrqz8PC6h518Kp8rLhZLH45+GB0pHOlFkevs4pC4C2ED8CkJYjcZWcEA24BUPaKC2Idufmj6lS2vMJAbaCcOmfbH1z9e3rFvx9RHJz/qrksYUghbgc9q/lhCsaRkhfV140uhP98/89Lml2YHcgMrge/JrsuvW7lz887Z/lx/qa5ugoNwR02MJZE0wYT4ZLpeG4W12bWZDT0buuvMZzau2LisL9eXaeBkAVaSsN43k9XpRh88x3NFpO6CIpLyjNc445VMUgLNlK6ZRtpMLkzOFYPiZL3P08H05ERlYr6hdkIpab1OStYCo8QF6TqywxPD6Tf++4aNNJq9+lOk0ezrQ6/ryMRIpgGhCPimNv+SSFaQtyIo3cADtYJ+DdmqrbqHC4cz5cXyeF+ubz6yUaowXxgf/GKw/OpXr66euzyXakD2MvAmMMTepUtXMgfsQrD0IXyC0F93jILruJHv+bjiOqGG0UJ1gTAKnRusMlaT4lueX5ps0jBQhHFgN41cJhBGoVMOys50ZZpyUHaWIGpR3iXueRM1M8lbkV2AcgvC28CmxHaN8TnCEzd90PuNeymFsRBZg+NYrInPDz8I2Fwo8FrNIHnXtRfYRpm4KtxDfEFpDcq4qZjBNe+uGUrPeF0WsqJkVSVnjHaoSIdAyg1D/MhG4epfyB09XdJck7cLiJvtPwM7AK8Jglf6Aet/lz6wYt/yf7kLToCoq3E4Sm2AIhK3RUqIUjRwXIyOJlf2irpbqQInUW4HBuqe+PVQG+WVvNM9B5d9liq2CYYuFWkXET9+NH6rtovQAdKF0IPQH8Fcc2R/IDwDTAD3IOSTmprAlPJHs/s6T7VfqPW1KrHmtUfit4iCqIiqiIiiHqoXmyd7hfB9fIuLIb7VLh0OlrBjzD/YfTh/TFQ0mT9EUBUVuaAiXzRz3F6LEhHCWyj/RG9QemqapSdSI8u+yg1JJDYBUQGMQgAcNbDHpNPnW7+erAZmKOLzN4TbUH5Vl4SAM+dczA1lD3oz3kKd3QgIqrWtCRbVBeAkIieAc8VMZi5brTZRuv4fHwMPAB6XiJgHtiGkrsr6OL9DFrtGuv6THe4cE5UriRa7FzEgCBqCVIDzKhx2XfdTa+3xB8+cKZzM5S4vn59n5OzZFv/kuBqD4JScvPXtX9TVpxHcqwhH/tn0lyv29+x359wAE6eVqiIil4F5VYqCnhExoxFMqBBWpqai9nweHIdTY2PXxMaPhvesJ2TYEPrha+rp3T+UKff08gPde/xzmUk16gBVoCgil4BxETnnuO55lKq1IVE1UnUd/I4Ovj52rF5E/TTwXvCwrv1dlIn+gcMqsyiz+SO5Pfkj2eM4FIFxVL9TKPjp9MXK4mIgIjiex5pNm9j7zjtLrvGTkQXofLozXVlW+VOUin7vn8/sX7l/+W5TMacRnXJESufa2uZXBQGptjaGR0ebnr/1alAHYToM3JL7d+3W91KT6WK6nJ6qXjgT6NpeVJX7Jyf599RUy/P/D0pQLH84wUhqAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODoxNiswMDowMJo3/8cAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mF1sFFUUgL9zZ6bd3ULbBUpBJVTwB1E0UaJg4oNGTUw0MZoYoz5ojKAxMeFFQ4wxBh8wxhB/sWriPyY+GH+RBDT+FhQVFaSBQrtQhRba7ral22l35h4fZosou3R2qSe5mWTm3nu+e+6555w7QrWizwI1gAB1AiOzQBqABOACAeCD5qCnH85QcIA6kNurUulWDUstkBNIL4b8cuAq4BJgDjANOAb0AL/BnG9At8HS3dCm1WqU6qz6ChDOAbkNuAO4IsZU24ANYN8H04us/J9hdT1gBOR80EdAbwNJxRwMkAfeB3kK7B5wFFkRW32FbhAIeOcAa4CbQSoYLwAp4C7QFMij4O6fWEUcMfGt2gp4jcBDEahW6+8ucAvIQ1BojHZrqmFRB+Qa4O5IYXXuHom4wD2g1xCFiCmE1VZA0sCDINPKdCq28IQ28a5k/2nA/UA6OrCTS9ytNMDFwOXlQdHLaOq5iflOmtrGLGO5jzkY/sLROaBy8k4IwHKQJcBXxPDdCmD1OpDaUqAC9kZaBtaxnIXU11GM/ndy7tAqtvZ/SmZmaWBqgWuBb4mSyKQWiwkriynpX8oCGgafZOnwQuqbgeOw51DfvIalwwuoz5UxnANcBBqLIy6sEGWmkqeqhenJJcyYWWI+cwkzZpxNfbL8vNocWX1yqST8JEq/VjyMK0hJhYLUeohT3iWl3EJOkgpCF4PljNOHfyzLWF+prwP4fUfxR04R6nJTDKsWtAM0LAW7m4FEK+02RIdP/BKiwy/Tru1kk2VgQ2AvYONQxHQDtSBtREXLfw6ZkCdIrOXX5hzj3fexKFeP1zRE4Wgru8dbaZ+XJ6gpA1sgKnBiwcZLQ7peQM4GNoMsKNGhuHITpvBwESfAhnkCAqxzCjWdINcCGWTFpHE2rs8qcBjYUNoKAggB1hlizBnAZ4hxZxJQC7xLVPPGKmbiJ3htBfQ8kDeBZbHHlZetIHfPu/n1ve6vhzAWQmtwHIs1ggAp3+eqnh4mSp0K69lWD7gFWAfMrRpT9bAZyK8+89ZXP05k8l4ArrGY0BrjODa0RqzAeNL38xcMDvm/N81mrmcrhoWoJn0cWAV4FQyObGPVpr7r+mb2qk8+co8M+zjG1cgdi+lYFREFLEqAkjXwhxjtqLzOi4BbQF8GrqdMMijH6+3v65z9yMZPkz8czOE68u+Kobgg1eJDAKzAqEU3V5IUIonuTgdA1wFdlQw1udFcwzs72pLbu7O4RhGsRAet2CR6ilgQK6JWBFE0hWpj5bARsEJ2C/Ai0b1qcimEQd2XHT81bNjRFV3j4myICKqiIofUmI7qYAE4EoK8AXzIKUOPgiqJXT3tM577foeMBzYGqABGwQd+M7DRJBJ/ncZ/gwsAssDTqC4CLi0NITi9w72N67e2eZls/uQjHXmtanFlgkU1D+xDZA/QnU0mjzUUChUVMv9hWFk0G79TCNcRTtQFE0aOnuIXxqZ/sLOt7ot9vVHukGgFqqKKURVQDYARIKPwheO6bytsuiGTaQeOzcvl6Ny377RufUWmVpxMX9o21T+hSe8BjLjHT3WgYerb/dtnr/78a/fQkI9jBBBVRUTGgRFVsoIeEDEdIRxVIRjt7w/r0mlwHPZ3dh5XdRpu8I+FzfbVOYPzWjCr7jJNeVdiJApTBwYONr7648/un4O+usZBtQBkReQIcFhEul3P/QulYG2AFELFdZg1fz67du4s4VBTJF7XWmyNc2vYVPc8njPXDPrD6Re+35h+qe0PatwscBjVPxV6UolE7+jYmC8iOJ7HWcuWseWttya3y1TBAkzf9HBi9MJZj4WNyXtTWw983fzwZxvMQL4LI/2OSK67pmZkru9TW1PD7o6Oiuc/fTc4QYKZSd/NZJ/RRe57tbt6s4nObH9hqMfXlhZUlav7+visv7/q+f8Gb188Ax2DNawAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjMyKzAwOjAwLF3cqQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABQ5JREFUWMO9mNtvFFUcxz+/M9N2d1HaQgEbNVy8hEiURIIBEx98MTGRhIR/wMQnHzThQXwyPhkfjBcwBg0mKiJiTIiYoCQKEWOoEZWLXCIt2+VWWnrZddvSLTszXx9ma8tll9m2+EtOJrtnzvd85nd+8zu/M8Z0TZr6y4A2oBlIAT4QACWgAAwCkwPMpjWlP23YSchHgLXAU8BK4B7gLmAE6AWOAT8DvwKnroP+X0wC6R6kl5F+RVKC1oH0EtKiG1bljkIa0nKkT5BGE4JOtNHKuOUVnTsKa0gPIX2NVK4TdKKVkb5CehBpesGb0KutSO/PAHQq8JaK3h2B9ZA2IA3PEHSiDVf0vDvh1TakA7MEOtF+qOgmwkiauhzwGPBErUdaBb3rwGuFljwUvoXwzziVVYvNtcCjwE/MWkqTfKQ3q8WqSeE6qb9L6pE0IimQNNIp9Twn9SNFNWL3DaSZ5vvrYBuR9lSb9AFp6JiUlRTqeguPSNll0lAV2Kii25h0eZOYUWM5l0D6UZh/Cz23EuYthXQN3UVUD5PrrB73p6p1NIBvVSY0aGqAWm98moSW1LMA/1TrGICRPAzcqm8IBvphtIZuYbZhI6ATCG/VeQpSH0EUwvDU/0MY/hB0urr3QuBMRX+WLN4QXkAaq5Yzm6XxV6WuLun8FWmsSzr/itQ1VxqvkWfHKrqzuDHENcEypLO1krwvBXOlYJ6kuVLgS8FtNoWzSEuT1ghJw0DAZWBnrSULwCuCNwQUwQtqv1gR8AVxzZtoQ0he9cRb4sPAZ8Ca6S7SFOsAnr9//foz/tGjuAjCyOF5EZEzDMiUSjzV28vWyoDkqcsMpG7gPeBdoH3amNJlNzT00b0bNvSncrmFQczhKi2seP2a4Gp/OlN6eMFC2huiOjw76d0M8DqwEWioGzSKoswvv/y8cOPGPf6VKyU8z1cMWUnVEmYCIkSAyDs4aU6d9e3JsXevAluJz1vPUGcoNWSzudbNm4/7fX2t+L7JbIqAYjkpvsT87YKlofihnk1hEhjOEYdCdz1DXaFQaN6x41D68OE8vi/MIouXvNIsvppFYJGZIjNMKIPUUj9sDCzgR+AD4GqiMeVyMOfAgd+bd+7sxrmEx3EzJJNZj5zrnB5sbCHwKfANt0s9EqkTJ07P27LliF27FiUANcAp/u5wzMF3LpW6NNM6Mg+8hbQceLwahNfX19eydeuhhlzu6s33yOC/g64wosp70YXZ38CFfDo90lwu11XI3PDsRsWjxymX3yUMh295W6k0fvfu3Yfm7N/fh9nEuHh5hZMMpIC42MkJ9nu+/7lg37O53Glg5P5CgWxX1wy/yMTZIfJ6evZGCxZ8KudexLlJzSAI0x0dR1q2bz9j5bLwPANMEmZ2zWBUIg+cc2adIfTLCIr9/eGc1la+X7aMs9nsf3IzP06Y4Q4fLjj4OGhrW6VM5kmci9PUuXPnW7Zt+8O/eLEk3/eQykDezK4Al83sgt/gX0KUoyjAyqHwPdoWL+bEX3/dNNWsnH3Kq1erobv7uCsW3wmbmpbiXLsrFofn7tr1W+bgwT4aG/MGl5EuCnrTTU19Y+PjpYmHvW/tGn7cvv32fpkN2Am7e9++1NiKFa+FLa0vZDoOHVy0adNONzTUjXODnlnhQmPjaHupRFNjI6c6O+vWn8VTJQTz55f8XO5tLU992XTiZD6VzQ6Wi8WSlixBEk8PDLB3cHDa+v8CFsk24crxS5QAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjQ3KzAwOjAwdKD6FwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr9/nzMXj8ceu4mVG1VSFwiq4iIqKClVHygFqQgkRKNAqjyk4gFC+gBPRYI8IISgIKgQjdKXiFKUi6IGVQKiirb0kjakCiJtrk0dO26cxHbsiWdsjz23sxcPdkJIxs3xpGxpdGZ0zt77m3/9a+01I5ocXd99lrJLUnfQPXGnBtr6FxuWk5QGC5HqZpRlVlgzkckfzU1b6Opks5cZ+sUPmtozbBZ2OkjRVaxotD1910Bb/33AA8CngaVAFmMKGAbePd4+84ZDhz6x+sDJ0ye+ZM3uqWYmtXx/D4H5pSbWgx41+DwyhOAqyuwbk+Y2skPALnm3N8JGZrZv+P/CZjfvJgIhrRb2hLD1JjKKsYwBMqYN9prxJI7THqyyLT70gmygyEmB/zjYzxDfAMI4oFdVERnMNkrKGPy4Cn1cE4ubjSDug61bdoKzTqQfgW2UCJtxkSSHbLVQEJodSt27rlw7vC/WXBd3E5MFJnsQbJOkpkD/q7JC4DEHD3ostmCxYLOP78HVw05MWxDZhl/GjMgb1bqnUo+o1j2RN8waR1mQRfpeaOrMPr4zFmxczzocdyPdOx+okH125W3DD/csDzoyyY7CdLWw/9iF6J1zl5eamaRGkbD7TPQArxHDu7FgzZsDvoyRuj76c8r5r9694vIvv/kZuruyrczmQuu3P7dy4onnj+T3H7+waB7glMFDwAGgfnPF4sAKZ+IudGNCeoPurrbi1q/1THZ3ZZcAV2G7u9qWbP16z+Qdi7MF31i3wGCNmWJxxHpIIM2eTDdI481Yuai1Zc3y3KIG67meFR23rVqcbfENvSvJtESmWNm6kDqbbqi6QSJw4TymRFIqESiw+R3ZEhcgZukywIqNcsAJ8lOVqcJ0dazRzPFSZWxsslJy82knCnGrYDxYw2P0AtH1twInTl4spHe8ecZ7b5PX3vPeJne81Wcnh4otQWPaCHgf8HEwYtrAebCDGI9en2SSmK5F6d/+/dSS4kxt8LH77yy0pRNdE+Xq6B/e7KvueKvv9plalHQNXGJQAzskUyzYWAFo3bxHTnaHh5cQ3Q3FNyMRuCiTDAmcgshbNF2tU4t8MI+dMazfyx4KzA2Utm24aZ2Ne9yaR0PALmyekEnUIh8UZ6rB5VKF4kw1+DBQzLyMnc4YJmYzE/uAb92yB8x/EumPGGtvoTWYU5V/Stq0+MDT77vCIM5D5B1B4PFutpfLlMs8MDzM9rk5sZuI2uHnSaxdNyGjCNyPaGue1IZctfTkon/86kiqNNbuIScjZ6YO5yxrUlaQCut1MpGP6stXaM3idi2snzVqGH8B7gH7ISixEC1nOwjzqbHe0x3v7O105YlvmVzoZnsPBc4AzM3awpdT6fqRrvS4gxNDkXoXHMzWLbuR2SqDZ0z6imJa6YopE5OX+nPH9v01mT9bwAUyrl1g7pPZ3EUAXjDjsZdi97NXRmnbBgLvPzDpKeBsnNS48oirThcy594+mLw8MI6czYF4rr40e5U8yEvmJWRYBrOOBcMCFJ/ZaJVc58uCbcim4ySzfFRPX3rvX5lzb5+92m3cfJYwk0kXzbnepmABokwucuJZgxfsQ2kNmZEoXjiV7X3liKK6jwEqwBmUgXcd7Hfp9IWm/zdYNDpIXonxjNV+LbNPgd1Dw1NKhJXiSLbvtYNhaWz6RoubQMw1OobwmE0DZ5BOA4PjLS1TuVot/m+w60f+d+tpsbrJ7Cg+egpscjaX50Q2wwBXr1XS5/99MDXy3sg14Z8Nr+HMBGZ1oAQMGLwShOGfDF58eGDgFDB1e6FA/5kzt1raZ6uDK412+lT7TwmSm00KZYZJyCxKjZ4+nDv659eDcrGMnACZGZKqQMmMcWEfSK43glET9Zl8Pmrt7IQgoK+//3+8ccujfcPPRSrXE6Wy2wmSX7jSS4dTo2dzx1/YnxrtHTO5AKgB45IuAUOSBoMwvIBR875OVIvMwoBMNsvxY8du2OcjgQVo3/Q05oJHfCr7e3PhMledmcyeeXV/tu/VE7hwHBjC7LzBcCadHpmpVMqSCBIJPrZ2LS8/99xN9/jIYAG61v0kXWlftjVKtH4nNdb3eufRfbtUK50F5QOpMJhMlpaVy6SSSU729i54/aarQaMRJbNlVxr7jW9L7E5MXBxPlvP52vmRMitXYWZ8cWyMv+XzTa//H6b399ILDmv5AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOToxMyswMDowMCfNu14AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABhBJREFUWMO1l0tsXGcVx3//e+94xmPHzsSxPXm4NK/adRKKQISUKjz6QIBKFIQUpMCiwIoFSF3RDQsELCIWCLEosKiggiyyQKWQSFV5pJRHUKpaVbDj2HnUedmOPR57xmOPPfd+h8Wk1JbH9Z1p+kmf7uK795zfd87/nu98otHxkScgbAYLYM4XbdFWsHZQCiNAhIgy2CwtTTmKy0YgaHfwj5cbchk0DLvcCh23xcyOftqiRzGOIB4BskArMI8xAbzFfOXv4J1nb2KIkWVr1KUa+qr/GMhlMR0HToA+gRlohbm1SOcRp/B0GucmGfrDBwy7/yg4T4he4HtgxzGl41kyQAvAabCTOF0GZwzHl4RfF2zXPoH2gn4MHMeURHG3LDASyA5gZIEBQsszM/IBwO4/CngZ4DlMXwcLVqU9Ji/IA/UifHzO0/VwmanhWJ97dbjyMR4HnkHUD7oaOgC+gfQ4ZrEDFu/F/i8DdAA/AXpr5t2sOsMIogicvftarY1JTaAtyDtDV99CnOjGLV0epg8jDtVcNQOwjx3cN/Glz3zcz7S1bM4XSrMvn7sQvTl4JYuZ1snEo2AHwc5Rq340Bmse4imM5JqgmiFwT3/20MxPn/sme3qyLVQz1vK1pz9VePbkC7k//e1CxzrASeBJ0OtAuHHE4sJi/aiGbJyx+4Hs3I++e6K4pyfbDfwfdu8D27p/+J0Txd092VlcjcAZPsYBXDyOmLASKEstsTrHgzu6mw8+9KGOGva8R3of3LJrZ3czztU0DNYNFutvree4Ta23kAj8QKotSknJRODX/pGrpaw5LkA9pWuutkMxnS/O5wvz07WWZ+aK01P5Quk9St3s/YU1c5iNAtGaNd9j6MpY6penX3GRc8WVS5FzxV+cfsUujd5oxq/pKsIYwXDEGPHqbGefgA7E50GrpSNRqYTBG0NXmwvFhfFdO7OlyLnkxHR+/OQLvy/87Ldnts+XFpN4tWBtGfgVaIDp4Q1LV7xjqO+o8LxdwKvA7nWiTxAEUbo5SeB7fhi5aGGxTBhG/voSsGvIniTy3mb4pQ1h42rWEONgp9ZPmQjD0C8US/7MbJFCseS/J2jVzu8wTRDjQIgfWYD9x8DcQ6DfYDrcYCe8kvbfwDM9iyMjgVvAcxA5D99397pQSJfLHJmY4Pl7X8TvuqaGoau3AJoDPYbY1DinjXsWntxZHhpIuaU2B+0y2s202fOs1aRWQTIIQ9KRi8LtO3Rga5vqvdZUMP0R+CjwLJBogNSlXfFy19JYJrDwqwaBBx4e8r1qj+FVZeHKyVQ40JnKezA4Hmm0vuZ76jJ09VUQV4D9wB4M1SOJhCtf31q583rSLQmpzaQWSenqtOrTrEWiFdSG2IrYHcF8fbBQlUN3/xzmpoDHQJm4sJ6Fs5lw6i+bwtk7AEimahTvTVWfkoFMMpMkwxKYTdYPC3D3EuzreZtyk4d0hDhyMAtbo7l/dVQmLgqzeM27hJlMumPSf+o5blePlrkI6dfAS2xUesxIuYVLWyoTAzLnYoAK8AzKwFsenPVSqduNRRag9RBAGeMqZocQ29arhL5VJjsq4682u1L+nYCt2IlAqrbFgHCYlYBBpH8K3syn09PJMIx//1kzJoehsw+Mu2Al0FNIyRUQgJC5pbYo99f2KHdN74JW01u9PCIsBC0Ct028EQTBOefc4BfHxiaubN683FkqcenGjfdf2uk/hh8uZZwf/MDkfbvaO1RBMYvSUfFC1/KN1wKrlKm2kTIzJC0DJTPywsYkbzSCKRPhYi4XtWQy4PtcvXZtlTbe90js/ZxI+AdDgucN75PvpDnhytc7l26dTbvCtCEfqAB5SXeBcUk3/SC4jVFxLiSqRGaBT7q1lf9evLjGz32BBUj0fwHn+ErkNf0ctM2zsJipTJ7NVCYHkZcHxjG7ZTCRTqUmF5eWypLwEwl2Hj7Mn198cUMf9w0WYNPDn04tkv5+RPCtdDT/Wnfl5inPwutAzpdmbzY1lbaVyySbmhgaHa3b/n2Fbe57AnO2peI3b2+v5PJZG89Vbtwq244ePGBfsciZXK5h+/8DFYWTIIiuQPwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA5OjIzKzAwOjAwqUK8vQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABilJREFUWMO1mF9sXEcVh78zd9fetZ04TkmcKDYqJSalpaSyLUiRooqqIOWtLVKREA9FPEBUqRJ9QQjxgHgBlTZCCJXHECCgSolQKBGiRSJBSiNCGjWhMYljJ5FJ7Tje7np3bd/duzM/HtZFCazju9twpNU83J0z3znzmzN/jA5tZGSWfD7GucDWrYkVCtmPgPoly5mRARqSYqBUqVQK/f398h5qtQwXL360ozEzncL29y8zMbHFdu2af6hQyDwG7AV2A9uAPqAKzAHvbNiw4WQI4fT8/MDFwcGiOh3TOuk0OjqFc7YtBD0LfAX4LAgwbA2PEqeBwxKvmenm22/v/P/Cjo9P430wM9tlxreBZ0E9ad1ILINeA35kpkshoHPnRlKP35YMoshZCNoJ/AD0lETGLH28ZvQAX5Xokfiu1JiiOSWpzLWT1UbDbzLjBdBTYG2B3oacMeMZsBfMspvGxqZS90wNK1kEPAE8Z2YdL8wPgIGvmdkTQHRPYcfGpnHODwDP01zpLYIRIYgkEfV6sw1BaI1JNrM+0DdDCAPj4+mymypDEi4E+zToM60WkyTA9PDD3XN79+ajjRujTeVyKJ08ueQnJmrbJKyVZMx4zMweAf2FFNpNBWsmB3wBrLs1KOHxx3vff/HFzQwNZXtpTm3vvn195VdeKRROnFi6D9QC2LqBJyX+CjTW40ipWTnQQ7TQVwgwNJRd3L9/U2VoKDsI/Ad2eDg7uH//QGV4OFsKoaXjCPSppv/1LdWfJExiGy00IMGOHdn8zp1d97Xw50ZGujbv2JHJt9auDBgkZaFOKQMDyK0RCJkMGVujjplZdxRZ1BrWAOXTMKTO7KottoaBYtFXy2W/0Op7uewXSqWwtHZJtlLaHTCtZgNoEuT/+0sUwdRUkjt6tBxCUOX2byGocuRIWVNT9XzUoppKeInLEoEUlra4B+AUzUPLHcOaGXEccgcPlgYrlTDz9NMbS729bsvSUrh19Gi5fuRIeTiOQ5dzLUtXApxe9b+upcr/+Pikec/HnLM3wB5omXuJTMZ8LmdEkUXey8exaDQU3WVbnpbck1Gka2fOPLBunU2rWUWRzYIdXisLZkajoahaDdHioqdaDdE6oEHi1xDmpHSHmdQnkfHxKbznE2b8wow9afvdxd6SoueWF79xudb4Jy6AD44oCgRnGNATx+ydm+PVdmEBxsauZMGeAQ4A2zvn1GwIpe8slp4/FoW5bAMyLuB8cC6Kgg/OgkE9H8fLn1wsx+e3bGV7NrR7rbEE+D0wCnwLyLYBCBhSCI3k7KWV6g8HLBS+LFzGgcNhkROsbpdAiLtzjXNbckUH7856m2z7QLp6/rxf4udmfLHd2fH++vRy9cev++R8ySwyYbc5aAaEtNoYQDBYCeiNdjYFAM6e/TjAdTMdAF1tp69CuVSPj53yyYUiRAIL1lywqz9rtmYBLJgpmGFCPUib2oZdBVY+P/8m8DNgORWoGo0kOf33evz6VXCku2WYIZnM3pNzkx3BAvT1ve8lHZT0O0l3KT1CEt5fnoiXD52TkpAC1AAniIF3HBx3udyNjq8nt27tpF5XsavLXgIelDTaGsJQWLhZW/7tqeBvLP+vxGXNhbcamRGQloErmF0CZor5fLU/Sdo6yNxhZ88+SDZrMrPzkBwAX/kgk81mdfRQq9VrfzqVJKduNt8VbDUCmYSTDKQGsARcE/w5ymR+KfjjvmvXJoDqcKnE9JUrnT1y3G5jY1N4f2PAuc3fh+79Zi5zW5nyjeTMmZXqyydCmI/NIgNMzXtOHViSKBq6buYmPdyS0VgpFHzvwABEEVPT03do40Pb7t3HzKz/Eec2vwq5z5m5ZqFszFxdWfrJ8UbytwXIREACFM1sHpg1s5kok7mBSEJo4BMvZSJ6+vr4x4ULLQR1j+zRR09glv2S2eafmmW3K1Qr8cqvjtdWDr9rli0Cs0j/Esz15HI3V2q12MyIslmG9uzhzUOH1h3jnsECjI4ezEkj3zPr/3ojOXciXnrpsA+LVw0rRGalma6upe1xTHdXFxcnJ9v2/yEfK+40aSD2/r2Xo6j7N95fKYqZgm4UY9txP5L4/MICfygUOvb/b4OFAZuQsv++AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo0MSswMDowMPiypBMAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfxJREFUWMOtmF1sHNUVgL9zZ3a9u97gXRITO4CwImhpAqXioQ2oeWgESPAUgRQk4AHEQ4uQqJAQP614QFVRItSi/tD0CRVo08gR/xAhkQRIIhMURJxAfm2vHdzY63g3Hv/P7s7c04dxCm7WYXbJkUZXmtl7znfPOffcc1doUn7/smJSgIHalUiiyApR2lBSCC4QKPiAN62Uc4IaB5al4Zd3SVM23WZh3Sz4g0hLF2sSo9wCrAduAjqALDADFIHDy4S9Fg78fC3H9h5Bm7XZ1BI3dyuidChsUrhP4GcxNB4AtonQLZaxJ+9t3HRDM7Z0Kwiiyg9RnkLYBGTizFUFEeZQug1ssYaTVtHfbIqP0FgaWATDtcDvFDYCblxTIqCQEXjAChlVfmuFAYifFqYhrxpyCo8BG0Xig/4PGFDBVbgbeMyx5J7fHj+FY8OiOMAG4EG+x8aU6HFRHgI2CDiXFPb5HYoa8gqPEu30C9eiYBVCC0EYjVaj90tIFviVFfJxvRvXQ0bhx8BP64V+YfNoZ57itZ04LUlylSpe3yhh8Rwdqoj830QRUOUWgRuBj4mRu7FgBQzK7UBLPVDAXreKcxtuglyWVqLQtq65hqndvZT7R1heDxhoEbgN2AcE3+mxWLCKEVhTL78UyGeZXL+W6VyWlfANbD7LyvU3MJ3L4tVzm4AjcINIPI54G0wRlA7q1GVVaGslvaKN5XX0mSvauDzXSlrr0wrCSiRevY+Xs5Gq1FKfHYMrSxgUocWYpXe8QjoWQ2zPRjK51DrmKsz4VUr1vvtVSvMVZpdynSiexCy1cWEt0AeEdTzH+CSp3gJWlelFXlOmDw2g45OkpT5tiHAKwcaBiFu6rEIPUdOyKKQiEISkDpxgpV9l+Cer8ZIJ2qs1xnsLVHsLXB2EJJeArRE1OJcQVrCqfCTKCMLqet71qyQPnqKrdwDE4KhlVS06HBxZKgeUEZQ9EtOzcdNAxTIKbEPrKxaJwPwaznwF/BrORUGjaP0LoYjEa2Zi9yKbtysq/EDgFYR1ceddRD4V4cG3/7Tx1OhwL8ZCaA2OY7EmKi0Z32d9scjWRmEBNndrgqhjehHobJZSVUfnZ849s+OP97wTzAwlAnCNxYTWGMexoTViBapp35/70eSUf6T9CjoTtuHuqQa8C9wMPA4k4gOe7wesPXNq/8mPtz+er0ydvdcYxzVgMIhjFEBNdDBavyUVHGpPTRg4OhpKX8N3i83dCtClyt+BOyTm6bOAjHd2oLB3x1PvFQufecZxRRcdXwrIwspAVQCswLxFP2zkUADg6egacpooFQYbmevPet6xT//ZUxw8OCHGVRArUdlaeCQaRSyIFVErgiiaQTXXMOwCsNZy7BJ4CWUuzhwb1oKvj+/5/MSBbYMipm4LdqGIoCoqMqLG9DUFC+BdSSjKPxTe0ov0oqqgqpTOfHX80K4/HwqDqo0BKkQ9tA8cNrDTpFJnmr6erDoMk2kmMgEviOr1CjfXgxCB2cmxscMfbe2ZKg3NccFvVEDO98WKYFGdA/oROQkMT6TTM221WkONzCJ54n4hHaAuHLFB7UW14fR5T357DGt+pe+LN3pOH9s9hsj58EfhVYyqgGoAzAJDCrsd131N4YM7h4aOAzNXex6F/v7m/uT4tmzpVrzSUD6zrP05N5F+RIxxvylTQTh8Yt/B/a8/88mMN+Ib4wggGl0bqsCsKhOCnhYxfSGMqxDMl8thaz4PjsNAobAoN763/PqFg5LOrLgxc9mKrYlk5lYRAyjeeGGw581ndw6f2FsyjusQ1ekJETkLjIrIsOO6Z1Bq1gaEtVDVdchks3z15ZcXptSlgAV4+qVB3GTynnS2/S+Ok+iszE1O9+75687ePX87atzkhMAoqv9RKGZSqbH5SsUXEZxEgqvWrWPXq69+p41LBgvwyHMfpC7vWPtsSyb/8Eh/zyf7dzy5bX723KCIKTsi3nAyOdvp+7Qkkxzr62tYf9PVoJ6kWpf7XnnoD8vd1L9LI0cnvFKhzNkpP9XVharyi1KJ98vlpvX/F5vAnOxV5r8nAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo1MiswMDowMAXwvhAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABa9JREFUWMOtmGtoHFUUx3/nzkyym7R5tIlNfdCH9f0CLdoK/aCoICiUFkTUDxWxKoLQL0oREdEPikjxGaP9oLVW8IOo2GqpilqJlfporU2oaZKNaW3SZrOb12aSnbnHD7PV1O42s2sPDBdm773nd8/933PurFChvYxSBQhQCzIBTQL1QAJwgQDwFbIDkD4X1In6cjdSkU+3UthqIAvSCJfnYCWwCrgGaAHmAOPAALC/Bb5T2LMcOtpBK/VZ0RLfQgmhReAu4B7ghhgT7QG2WfjQwOBDFbgua0QrigERuEThCYW7BGrijC2EMwd8KPCChUMO6PoyEMqSQQDiwTLgWWC1lDG+gFQD3KdQI/CkC92UIQsTt2MbigcNwGPAaq1c7y6wRuCxPDS0liHh2LAKjsDNwDrArew8R1bYkfs1ms85q7BtKAKNwKMSnfRii0GBcMZz8l2J/nOAh4HGt2JGN+5WGuBq4PpSoIA2X8fAojtxqhtpmMqQ/fNTwhO/0KLRofxvdAFWClwFfEMM7caGVbhVovR6OqhgF9/B8MpNUHchtURbW3vRvYz+sIF06jPmFwMmmu8WYDdREZk1YrFgBS6niL4UqF/KyPLnGKu7kAXwL2zdMhYsf5axuqVkS4TNAa7UmBxxYYWoMhU9V3MXk5x3FfOLzGfmXcO8uiUkS82rsEBj5vty0k+i2EsFjIcrUtyhCNXi4ZQSpFByIadZ7NQFjJRwhj/E+FSGoWK/+8MM+SeYOEPosmcVVsEqdGmUkU6DHe4g0dmG1ZCxU8aFjHW+iWY6SZaADYE/ABuHI5YMFKxAO9Gl5ZRDJkCQI7HveRZMZ+m/9EGyXh3N+VFOdLQx3dnGBUGOqhKweaILTizYWMJuRUVgCbBLYGmRxQBgXEKvBsTFsQFhkAMb4JzBSY9EqSu1Hpk1z8bVrALHgG3FoiCFxwY4U6M4/jBMj+LMAmqB94nuvLFKWOwS34aicLHAu8CKuOPOYD8IrNvasvqP/up9GAuhNTiOxZootdT4PqsGBmgtF7YA7AFrgE3AwkopFT2WM8MbN5+39tO8SXkBuMZiQmuM49jQGrEC00nfz102Mur/1nwOCz1bNixEd9KngQ2AFx8wioxibSrx/Xfbmzd8Mu4c9x113EIFk0IPRUQBixKgZAwcFKNdZd/0CsCLFd4EbpOydkdJe909n89/4rMjiR+zDq4oM6tJYUmqhUYgykSTFt1VTlEAoPDt1KeRFHrLGTtpstl9c7e2H03szRhcBbESHbTCI1ErYkGsiFoRRNEaVBvKhi0Aawa+BF4n+q6a1ULyQXfy65/2z93WKxgk1oaIoCoq8pca01URLMBxCAXeAT7mDKknuoArg9W/d7Y3vPJrINM2BqgQXUt9YL+BHSaROFrx/waXRU0GeFHRS4Fri0EIMO4MDv5Y39qe9VK50yWuAoJqYW2CRTUHHEbkENCfSSbH6/P5si4yp1hBuwr8FpLfpIRjJ1/MbPP4UwfmfNR+OPnVIMjJ7Y+2VzGqAqoBMAGkFL5yXPc9hS9uT6U6gfELsll6Dh+u8H+cGdaGMuSkGuts8zOeJh8RjPtvmgrC3sTuvTubNn476v7lm6igiaoiItPAhCoZQftETFcIJ1QIJtPpsLaxERyH7p6ef3xVLIOZEd5o9mYdw+baoOk6T2tuFAygDLt9f+6tf/vnEfeIb9R1FM0DGRE5DhwTkX7Xc4+i5K0NkHyouA5Nixbx+4EDRSV1Vux5rxfHVq2tDZtfdfAW+jIytqfhtR176t84aKjKCBxD9YjCQE0iMTg5NeWLCI7ncf6KFXy5ZcusPs4aLMDjc79INE1e8VQybHygL9H+7c5zHt+WM8O9oibtiGT7q6omFvo+1VVVdHR1lT3//5bBTEsG8/2Mm3rJtYkPBqsPZoYTPWn6Rv1ky2JUlZuGhtieTlc8/98L/TvfZZ49dwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MDQrMDA6MDATW3FEAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABQpJREFUWMO9mNtvVFUUh7+1z5nOTKWUSsE2ahRUQiRootGIiQ++mJhIYoJ/gIlPPmhi4u3F+GR8MN4gBokaFRU0Jt4SlYSLQhSIKAhyibRMWy6l9xl6nTLnnJ8Pc4pFmOFMW1yTlZMz++y1v73WPmvtfYwZitD0WwOagUYgA/hAABSBAjAI/3YwbEZj+jOFnQZ5O7AKeAC4E2gB5gGjQA9wENgF7AWOTof+X0TlX4vQ00J7hZRA9wg9JXSd/g/eGNKElgt9KDSWEHRKx+J+y2M7VxXWhG4T+lKoVCPolJaEvhC6VWhmizehV5uE1s0CdDrw2tjeVYH1hNYIjcwSdEpHYnve1fBqs9COOQKd0q2x3UQcSVOXA+4A7q06p7vpYTUeTSwgT4HvCNlPC1RMrKuAlcDPzFVKE/KFXq24Vk2hVqtf7eqWNCopkDSqNnXrEfULRVXW7itCs833F8HWCX1bcdBbNKSDykkKdbGEOqCclmqoAmwU261LGt4kYlAlnDeTZSULL2PPcSfXsoRsFbvXQbL6W4v7MxVbUvgVC76RJkW1Nz5LQknqWYBzFVsGGCXPwGXbhhign7EqdgtzDRsBbUB42dajZNhARMjIRf+HjPAu4lhF74XA8dj+3EhcEJ4QmqiYMxs1qRfUrnadVJ8m1K6Tek7tmq/JKnl2IrY7d4Uh3hMsFTpRNcn7CjRfga6VNF+BfAVXKAonhJYk3SMkXQYCzgKbqoYswGMYjyFgGI+g6osVAZ9R3vMmKgiJdz1xSVwGfAzcN9MoTZM9wOOPtTx6fH/6T1wEYeTwvIjIlVNLfbHIAz09rI87JE5dhiHUAbwFvAm0zpRS6OyQG9qw5vo1/d2uc3HM4WINY6+fF4z3Z+uLyxYtpjUV1XYYir1bD7wMPAOkagWNiKJfM7/senbRM9/2eX1FX56vMqSVAy1hJiBCBIi8gyPm1FZTTY69Ow6sp3zeeogal1Iuletct+DtQ31eb5OHb7Lp1URlc1L5UuZvFSwJxdZaisIFYKCL8lLoqKXvOVcobG74dPfvmX15D1+GRVYOeaxWvppFYJGZIjNMqB5pQc2wMbCAbcA7wHiSPiVKwU/ZHb9vbtjU4XAJj+NmSCazbjnXNiPYWELgI+AbrpB6hDiSPnxs3YK1B87b+SgBqAFO5e8OBx384DKZM7PdR+aB14SWA3dVgujzens3NK7f3ZXqHL/0GRkYUjwvI0IaB9ox+xs4lc9mRxtLpZo2Mv+ZuhF79FCJ0psh4cjlnitSnPx63le7t2e39xo21a8cXuEkAykAxoBOwXbP9z8RbHm4s/MYMHpjoUCuvX12X2Ti7BB1e93fL4oWfeTknnS4CzZDgnBvZs+BTxs2Hg+sJA/PAJOEmZ03GJPIA13OrC2EfhnBcH9/eE1TEz8uXcqJXO7CeLM+ThjGPrevgOP95qD57nrV3+9wCNHld538oPG9P077p4u+fE+oBOTNrA84a2an/JR/BlGKogArhcL3aL7pJg7/9dclY83J2eee0j3qSHUcGnbDb6TD9BKHax224ZEvGj7/bVd2Z2+KurwZZ5FOC3qy6XTvxORksTxb44ZV97Ft48YEjplD2dKwJbNiYsVLTWHTE3syu3e+uPj5TXk31OHkBj2zwqm6urHWYpF0XR1H29pqtj93p0pgYbCw2Ol3vp6JMpsPp4/kc5ncoN81XGxsuRlJPDgwwPeDgzO2/w/IRTXCFJZFPwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MTMrMDA6MDAaVk9UAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfVJREFUWMO9mE1sXFcVx3/nvnn2PI/leEZDHSNQ04gUUgGVQIIGqQuqgMSuYtEFRUoqNlRIlVixoKiqukIIwgZVhEr9CAS1Vj+Q2oJE+EijpmnTNiRNaxKnSWyntmM/z0wyiXnjmXf/LGZchXbGvHECR7q6i3vPub93znnnnveMDUq9XqfVaiGJarVqo6OjZTPbBOSBHNACEkm1hYWF5fHxcQE45xgdHd3QmbZR2DiOGRkZsXq9fhuwA7jTzG4HNgPDwBVgQdJx4BXgSD6ff6/RaKhUKv3/YKvVKmmabnbO3QN8B/hqBrUjwH4zewa4WCwW/7ewcRwTBIEBn5X0I0n3mNlQHyZWgGfM7KfAKUD9QOf6gfXem3PuM8AjwN1m1pe+pCEz+25n/rFz7n1AWfVd1o2VSoUgCEYlPQDcLakvUAAzo6P3bUkPeO9HK5VKZv3MsEBgZncBu4Gc2cbezY5eDrhP0l1AcENh4zhGUlHSD8xsuNseST1HDxmW9H1JxTiOM8FmDaUDvgh8pReomSkIgoUwDAMzG5VUazabaZqmmyVZj0jsAL4A/J0MuZvJs2bmgG8Agz1AfRiGy4VCgSiKCvl8PoiiqFAoFAjDcNnM1MPDg8BOM8uUCplhzey2Xkadc5eiKKoHQTAGFGjnYSEIgrEoiurOuVoP0wHw+awcWdPAaN9MXWPpnIucc0GXQ51zruScG0zTtJfdMTLW+37KT349O72S0swG6fHGd1SirAD9lK5LvRYkXZEU91iLJV1dR7e2TsXoH1aSlzQlqWss0zTNNxoNL6n+Eb16o9FQmqa9vJea2Wkz8zcM1sy8mR02s2aXNSTlkyQZS5Jk0Xs/671PvPezSZIsJkkyJmmwh+kmcCQrbKacdc75NE3/BsyZ2dZuwN77gSRJtjQaDWjn6Cc7l0KwtqeLzEn66w31rNoyD+yX1NVwx8OB9z7w3uO9DyQFZtYVtGPnd865BTI2M5kv+DiOMbNbgSfN7I6seus44LUgCHbvvvfe08dPnsR5SL0jCDzeGQYMJQl3LizwaEcnc+kql8tUKpVzwC+BPcD4dYDOV6vVX+/atWtp8cKFmzocrjNSwAOrgpWlaCi59RM3MR76/prvTjs3BDwE/BAI+wBcy23/xuuvv/LQgw/+YSmOk5xzObUhrR1oCTMBHtFCVB28a05TffWkpVKJSqWyAjwq6XYz+yYZU2ktb6enp8//Zu/eE0tLS8UgCExm1xhQ25zUntr844JbUvHnfi6FD4GBaTPbA5zLWtABLtVqtecmJg7/4+23q0EQyMy8tUPeGdaezTyYN5M3w4SGkEb7hu0Aa3h4+ADwKzNbyaLTarVahw4devO5Z58955wjW/NuhmQym5NzUxuCBQjDMDWzJ4AXtI571xrwycnJycf27j22urrqM4Aa4AQJcNzByy6f/6Dv76g1qdfrrK6uVsMw/JmZfU7Sl7pBmBmLi4sXn3z88cMXZmdXPr5HBkbncYXhkVaAM5idAmarUXRlU7PZVyPzHzIyMkIYhnLOnWg2m3vSNK2vefLaudFoNF5+8cXDhw4evHjNBdEOr3CSgdQCrgLnBX8Jcrl9gj996/z5SeDKp2s1zp4509+n+EelVCpRrVb9/Pz8S+Vy+Qnn3P3Oudw1ZSp96+jRYxNPP3261Wqp88/BOuurBlclqsC0M5tKYUlG6/LSUlooFvnj1q28f/bsh+ddFyxAsVjkwIEDNUmPlcvlL0dR9DXn2gGbnZmZ+e2+fW/Nzc0luVwukNQEqma2CMyb2WwuzH2AaHrfwpqpyAWUb76Zk++887GzrhsWYOfOnTp27NiJer3+i4GBgVucc+OXL1+uv/D882+89uqrF3MDA1WDeaQLgoVocPDivxqNBAAzPrXjDg489dR/PWfDP+a6ycTERH779u0/2bRp0/fePHr04CMPP7y/Vqudc2bLgVltdmDg6niSMDgwwHtTU33bvyGeXZNSqZTMzMz8fNu2bb//5+Sp6vT09HJQqyUjW7Ygia/HMS8tL2/Y/r8BRVECE4yt2dgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjMxKzAwOjAwz+xZAAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABihJREFUWMO1mF9sW2cVwH/n+6597aRVbLykf0S0iiJGpwLSGkGHtAcmQOINDWlIEw9DvIAmTeKhoAnxgHhCCFVa1UIRDxBEkaZ1He2YUCnQDalUqdextmvnpUs60sVxbMdO4tROfO93eMhNadO4vXbLka6u7v3uOefn853zfeez0KMUCgWazSbOOWZnZyWXyz0EDIhICvBUNRCRFlDPZDLVubk5tdbi+z67d+/uyafXK+z8/Dy7du2SQqHwaC6Xexx4AvgcsBXYBDSAGeCder3+pjHm7NDQ0OVSqaS9+pRelPL5PM65rcaYp4FngC9s9J3q/7hE5CxwREReUtXSyMjI/xd2bGwMa62o6iOq+kPgaaBP5N5mVBURuQG8BPxMVQvGGN2zZ09s/12lQRiGYoz5JPBT4OsiEls/+kF9qvotEekTkR+JyAdA7LQw3UTV87yMqj7fLeg6aE9VnwKeV9VMPp+PrRsbVkQs8CTwLPdRmGvAwLdV9UlVtQ8UNiqoLPAcq5V+h6gqqopz7ua19q6DbAK+a63Njo2NxYKNGyFjjPmsiHy+Eyig/f39MwMDA9bzvEwQBPX5+flwaWlpq6pKhyJ8PAzDzwCniZG7sWBV1QBfUVV/vdMI1GUymbnh4WF83+8HLNCfy+UWpqamqvV6PbcRsKr6wJdF5J9AcM+IxY0s8GgEcYekUqn57du3L/q+vwW4Cev7/pbofb2DXQvsjssRK7JRSLbSYV1OJpPpdDptN3Bq0un0x3zf95eXlzc0DWwh5nrfTVWnNnoZLfZep6QUEV9EbPTd+jGAdFyA2EsXMN8BhiAIGkEQVDYaD4KgEgTBUqddTlXrd1kxuodVVaeq40C40Xiz2UyVy2Wnqovr9BbL5bI2m81O0QtF5H0RcXE44qaBA86o6jPR5nBbZJ1zqVKptCUMw6nBwcG6MWbQOVcul8srlUpl2DmX3CiyqtoGzkb2Hwysqjpr7T+cc9PAJ9aPR6mQLJVKOyqVCqxW+fYwDFFV2ykFRGQa+HsYhrFg4+ashmFYBI50ioKIoKo2CAIbBAFBENi7gUZ2/gDMiEispI3dIkbt4adU9XfA3rh6d5F/WWuffWHfvvcL4+MYB6EzWOtwRhCgr9XiiZkZftktLMC5c+cSIvIUsB/Y1iulqhYXFhZe+MG+fccXqtVEAJ5xmNAZY60LnREnsJJutW7sml9oXRgcYlvCddc9iUgbOAE8BnwfSHQBuFaM7uKFC4WDL76YrdVq37TGeAYMBrFmtccwq32Ca/mp4O3BVM3Au8VQxrs+1kT95w7gV8BXu52d69evTxw+dOi1K5cv1z3PE73NQPSkGt0EwAk0HfrXbjYFAKKz04equl9VJ7vRXVxcrJ86efJM4b33atZajUAcNy9ZvYs4ECeiTgRRtA/VTNewEbA2m81TwEFVvRFHJwiC4Hw+nz918uSkiBDn3AYiqIqKTKsx4z3BAjQajVBEfisir3KXXnStAZ+cmLhy9OWX32632y4GqABGoQW8Y+B1k0p91PPxZGhoiGQyWVtZWfm5qn4aeGwjCBFhbm6u9Kdjx87MFIs37vxGBYSoPVAEx+psXUWkAEzV0unGQLvdVSNzm4yMjNBut1VVLwRBsN85t7gWyVvvK8vLy2+ePn3mrXy+dMv0r06vYlQFVANgCbim8Dfreb9X+MvXrl27AjSG63Umrl7t7U+OWyWfzzM9PZ3NZrM/8X3/e8YYb22ZUtXw3+fPn/v14cNvVCuVljFGAInGV4AlVWqCfihixkMoqxA0q9WwP5sFa/lgYuKmr/s6pa5FeHR0tC4iv8lkMntSqdQX16a6WCz+57UTJ94qz862rLU2alxqIjILFEVkykt4H6G0nQuQdqh4locefphLFy/emVL3C7smx48fJ5FIfCObzR7wPG9bo9FYfPWVV14/dvTou14iURMoonpdYaYvlSo1l5dbIoJNJPj43r2cGh29p48HBgtw4MCB1M6dO3+8efPm71y6eOmNw4cOHllYXJw0IlUrUp9KJpe2tVr4ySSXx8e7tn/faXCrZDKZVqlU+kUymfzj5ORkbbpYrJpqtbVpxw5UlS9VKvy5Wu3Z/n8BcY8RVtNG93EAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjQwKzAwOjAwY15brQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABh5JREFUWMO1mF9sW3cVxz/nd23Xf26bhFGaNEyNKrTB0lFpD9Ah7QEESPRpAimVKA9DvIAmTdoTQoiHiidUsWpCZTxVMESJHG3lb4VEl64gteWPuiZjTZrUdqZQ203sxk7s1H/u/R0e7FTpZqfXXvlK1pX98zm/zz3n/H6/c6/Qp86cOUM0GsUYw+joqOTz+Y+r6oCqRkUkBHhADSipalFE1HEcYrEYR48e7WvOUL+wruuSyWRkbGzsqVwu9yzwHHAYGAZcoALkgRkR+RtwdXx8/Mbs7Kz2O6f0Y5RMJlHVYWAC+Cbw+fsOpavLq8BZEUlaa+8cO3bs/wubTCYREVHVJ1X1+yIyAcSD2KoqIrKpqkngJ8aYm6qqExMTgefvqQystWKM+RTwY+D5XuzbEY8D3xKRuKr+UERSQOCyML1E1RgzCLwEPN9eRD2rbfd14CVr7eDk5GRg28CwquoAXwJe6CWiXRRS1W+3/TmPFHZqagpjzBDwIq2V3ulmUFWstfi+j7X2/m9d5ALfFZGhoNENGiEDfBb4XDdQEdGhoaH8yMiIE4lEBhuNRimXy/l3794dVlX54C4hIqjqs8DTwNsEqN3AsKr6FWBXJ1DA7t+//+7hw4dxXTdBK7WJAwcOrF+/fr2YzWYf6wTc9vdl4O+0DpGHRuyhUlUDPEWX+nJdtzw+Pr7huu4+4D6s67r7Dh06tOG6bqmLawc4JCKBOILCSvsQkA5jJBKJ2MDAwGMd/JmBgYGPJRKJWKfalZb2yQ4nyXYFKoO2r2jXOzYm1G1CEdlljNlpxceCMASObFvlbgP1er3SaDQKncYajUahXq9Xu9mqammHHaMvWAssAn6HyFEul6PpdNqq6sYHQDZSqZSWy+VYl8D7IrIgIjYIRNDdwAKXaTUtD6RURPB9Pzo/P7+v0WgsHzx4sBQOh/c2m83VdDrdSKfTj/u+H+kC26TV4Dw6WBGxqnpRVbMicrBTdBuNRmRhYWEslUphjHGstfvbh4PTbf2oalZVp4NGNmgZqLU2B5xV1Y6ORQRrrdNsNp16vU6z2XR2Am1H8zcikheRQEUbuEWcnJxERJ4AfiUiR4La7aArIvLCz199dWFpeRljwbcGx7FYIwgQr9V4Lp/ntV5hAZLJZJhWx3QKGOmXUlVzlUrlB6deeeUP9Uol7EHIWIxvjXEc61sjVqARq9U2P1Ner83u/QQjYdtz99QE/gg8A7wMhHsA3OoH7OLCws2pycmh6vr6MceYkAGDQRyjAGpafYKt7Yp67+yNrhl4L+fLYs+PNclkEmBMVX8BfDXo6bOllZWV9JtTU3/KpNMlx3FE2Z7e9jfV9kUArMA9i/61l0MBgPZjyPu0SiHTi+1mtVr655Url5cymTVjjLZBLPc/0rqKWBArolYEUTSO6mDPsG1gHRwcvACcVtXNIDa+73vzc3P//sfVqxkRIVhCRFAVFcmqMYt9wQKMjo76qvpL4Hfs0ItuNeDZ27fn3rpw4R3P82wAUAGMtt47zBg4b6LR230/nszMzBCLxdY8zzupqp8GnukEISKsl8t3Ll28eLlYKGx++D8qILTbA0WwtLJ1C5GbwPJaLFYZaDZ7amQe0PHjx/E8T4FZz/NOWWs3tiK5/dpsNuvXrl27PHfjxp1t6W+lVzGqAqoeUAWWFN5yQqFfK/zla0tLc0Dl8VKJ9K1b/b3k2K5kMkmhUBjavXv3iXA4/D1jTGjbNuUvzM//69wbb1wqlUo1Y4wA0h5vAFVV1gR9X8Qs+rCqgnevWPQTQ0PgOKTS6Qdq4yPr5MmTEo/Hn96zZ89rkUjkC1upXl1dzfz+3Lnzi/PzBeM4Dq19ek1EVoCciCw7odBtlKa1Hn7TVw05xF2X/7z77odL6lHAApw+fZpIJPIN13V/5jjOyL3NzY2L09Pn356efs8JhdYEcqj+VyEfj0bv3KvXayKCEw7zySNHuPD66w+d45HBApw4cSI6PDz8o3g8/p3UrdSlN6eSZyvVasaIFB2R0nIkUh2p1dgViXBjcbFn/x/1ZcUDSiQStWKx+NNQKPTbbDa7tlooFGVlpRYfG0NV+WKhwJ+Lxb79/w9bQvQtKYEySwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6NTArMDA6MDCv9FszAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABjJJREFUWMO1mE1sFOcZx3//d9beXePixQvCpFSp0qopNGlFKlGn2EhF5VIulSqlUsQhqDduPfClqqdeiEJPPeTApY1UKuVUCcIhaikpBrxRKEmJ7RrMR7CNd8GuP3a9O/bszNPDrhE4Xjy7oY80GmneeZ/nN8/832eed0SLduLECaIoAqCtrU1BEGw2sy5JKSBhZlVJPjCXyWRmZmZmLIoiisUip0+fbilmolXYarVKKpXS0tLSziAIXgf6gR8APUAnUALywGdzc3P/dM4NDgwMDO/du9dajalWJh09ehQz65H0hqQ3gR+ZGdLT7sye4hoEzpjZ+2ZWOHXq1P8X9siRIwCS9DJwDHhDUkfc+WZWBt6Pouht59yoc85OnjwZO36zMhDwbeB3kn7e7HxJHWZ20DnXIek3zrnbQGxZeE1mdZOk48BBSS3pXZKrvxnPzAb7+/v9gYGBWHNdE3E8YB/wVqugT1gCOATsM7PYCYt14/HjxwGykt4BXl69kKC2mMyMMAyJouhxWatncy237UC3c+6Dvr6+cpzsxs2Qk/R9YPdag/VKYNu3b8/v2LHDS6fTmUqlMjcyMhJOTEz0mJkaAL9uZq8CF4mh3ViwZuaA/UByLVAg2rlz538PHDhANpvdQO2Nbdi1a9fCuXPnZoaHh7MNgJNm9lPgElBdN2NxYc1sJ2vIxszIZrPz+/fvL2az2a3AY9hsNru1fn1uVc1dMc/MXqknY12LdZNq1sMaddnM6O7uTvf09GTX8Oe2bdvW3d3dnW4AK0lbG2lktTWzqlMNn9i5RKOAkpLOuWct5HRcgGZK13yjgXK5XKpUKtMNxqYXFxcX1xqrV5BGEmkZNgJuAeGXHDhHPp9P5XK5KIqi4lOToqg4ODhohUIh7dyaoULgZt3/uhZXBhFwBXiTVYtMEkEQpC5evLi1UqmM7969ey6VSm3xff9RLpdbzuVy3wiCoL2BSgJqDc7zhZX0DzN7ALy0elASlUql/dKlS98cHBzEOedFUfRCEASEYeg9Y/08AC6YWSzYuDIwM5sCzjTKgiTCMPR83/fK5TK+73vrgEaS/kyt540l2tgt4rFjxwC+A/wJ6I077xl2VdJbFz788OajmRlcBGHk8LyIyAkBHb5Pfz7Pu/UJsZuIy5cvs2fPngVJ88Ae4GutUprZ1NLS0tvnzp69XikWN0bQJaPLTBnnrNOkTkEyUa3SEUZh9YWv65XNG5vrniQFwFngNTP7taS2FkCjQj4/+kkutynw/V86KeHA4ZDnDMBcTRaRn0xVr29JzToYmgp1K3ZmV7Lb19cXAGOSvgd8iyZ3G8WFhbv//vTTSwvz83LObTRpg6SO2mG1s9kGiU7QRsRmxEshlJqCfQJ4HngE7DGzTTG/liwvLc3dGh39+8T4+ANJSDLVslg/VDtLBjKp1v0Y1oZZoWnYFeB9+/bdq1arDuiPI4coiqqTExNXhoeGblitBYsRScJMJj0wKdfM5/Ypy2QyoZn9UdJfWaf0mBmzs7Mjw8PD18MwjGKACnAGPvCZg/MulZpseXsyOTlJV1fXbLlcfsfMvgu81gjC9/3CzZGRK4vFYnmNRxGIentgiIjaLngMaRQYn02nS11BEL90rbarV6/S29uLmT2MomgR2C8pufL/YOUcVqtLd27fvnBnbOwOPN7i1F4vciCEVUEVYNLEJ4lE4mIURUM/++KL/Fgms7xlcZGR+/dbhwUYGBigr6/PSqXSuOd5m5xzP5TkngAOHxYK14Y///xfQRBU622kq+8aAokFYEpww8l9FEk5k+4vTk8X29Pp6lg2y+1798iXSo+18ZXt0KFD6ujoeDWZTL6bSCR+vCKH4sLC3evXrp0v5PPTkjxqjcuspIfAlKRxL5GYxAiiqEoYhGYJj47OTj6/ceNLcZ4LLMDhw4dxzv0inU7/wTm3bXl5ufifoaHzoyMjQ87zZoEpzCYM8h2pVKGytORLwmtrY3tvL3977711Yzw3WICDBw+mMpnMb5PJ5K8eFgofXfv44zNLy8t3BTOeNDfe3r64zfdJtrczfOtW0/6/6s+KpyyZTPqlUun3nuf9ZW5ufnaxXJ6JJif95IsvYmb8ZHqaD2ZmWvb/PzZaBDRi9tDdAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowMCswMDowMAjWPmkAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABixJREFUWMO1mE1sVNcVx3//+549Y2MMDkTMTBHCNgpVmlApi2IagVQ0SFVXlYpSKcoC1BXLrlKp6qLqKoq66gKpqzZSqciGSnXYuEVJIwWjVkIRkAhMBtt82MYej8fz4fHMe/d0MQZR8Mcbhx7p6S3uu+f87rn/d+55T2zTTp8+TbVaxXtPqVRSf3//XmCXpDQQAhHQMLOl2dnZYjabtTiOWVlZYXx8fFsxw+3CLi4ucuTIEd28efP1/v7+Y8Bx4PtABugDqsAs8GUmk/mXmY1PT09/NTg4aNuNqe1MyufzeO8zzrl3gHeBo1vNMbNx4IKkj733c1euXPn/wp48eRLnnIDDwPtm9g7QKyV2Uzezj83sA0m3nXM2NjaWOH5HMjAzmdkhSb8DfiqpUxn1Au9J6pX0a+AbILEsgqQP5vN5gAFJv5L0npmFHWT0qUlykg4DgaTx4eHhRqFQSDTXdRAkkHQSOANsC/QZC4GzwElJiROW6MFTp04RRdEeSR+uZeUFMzPMjCiKiOMY7z1PFrTBwrqBV7z3nwwPD9eTZDep5pxz7oikH2wECtjhw4dnR0ZGgp07d+6uVCpL165di+/cuZMxM60HbGbHgDeBT0mg3USw3nsHnDKz1PNB10D9sWPHFs+dO0cul9tBe8d25PP55fPnzxevXr26Zz1gSSkgD3xO+xDZPGNJMwu8zjqyMTNyuVz57NmzlVwutw94CpvL5fadOXOmks1ml9YW9bwFwBtJORI9pLZl1ttL7z2ZTKZncHBwzzr+3NDQ0CvZbLbHe7+ua2AfCet9J3UyvaGTMAy1wVskKRUEwWYvck9SgMSlCyhvAEO5XK5Wq9WF9cYrlcpCuVyubVLqll4qrJl5M5sws/gFB84xOTmZHh0d9d77yrNj3vvK6OioTU5O9ji3bqgYuAN4EliiOjs0NCRgD/Dj549YSbRarXBiYqKnVqvNZDKZmvc+tbi4OHPx4sXlS5cu5er1emoD2CbwR+B6oVDYsnQlEnY+n5eZDQJjkoY2yD5hGMapVIogCII4juPV1VWiKAo2kUAByEuaHBsb2xI2qWYNmJF0gU22LIqioFarBcvLy9RqtWALUA/8RdIsCZuZxAd8Pp9H0mtm9mdgJOm8TeyqpDOPpqfv1BsNnIfYO4LA450Q0NtocHx2lvNrExI3EYVCgcHBwWVJZeBtYOe3AJ2J4/iDyXv3rvtWq9/DLhm7zLTbOeszqU+QCqOI3tjHUe47emNvf2f9qKQW8Hczewv4paSuTinNzDdWVm7Pz80NEMc/NwgdOBwKXLvHcG1Z+EYqHV1/NV1ycGsm1kTizD7J7tDQUAu4K+l7wDAdSMmAVrN5b7FY/LzVbEpSv0k71prxXsnad7MdEn2gfsRexFAM1Y5gnwAfOnSoDMwDb5vZQNLe1sfxUmVp6Z+1avXR2k6Z2mtYu9S+SwYyqd39GNaF2VzHsE+ADxw4MCnJAceTyMHMolq1+kW5VLph7RYsQSQJM5n0yKRrnRy3/2NdXV2xmf0J+BtblB4zY3V19eulUum6994nABXgDBrAlw4uu3T64bb/GzSbTXp6ekpRFH1oZt8F3toIwsfx3HKp9EXUbNbXWYpArHWQhvCY1YG7SLeB+6WenuquVit56XrepqamOHjwIMBjM6tJOrXWTD/NpiTM+9Xl5eUrlXK5AE8/cdrbixwIYRFoBXho4j9hGH7qvb/1k6mp2bu7dzdfrdX4enp6ez85nrV8Pk+j0Rjo6ur6rXPunKTwKahZ3KjX/73w+PFnURQ11tpIrY03gZoZJWFTkpuIYd5EtFIsxjsGBiAI+OaZb7NvDQswMjKi7u7uN8MwPC/ph0/k0Go27xXn5y+v1OsLtA+gFlCS9Jj28X0/CMOHGC3vI+JWbBYG9Pb1cfPGjRfivBRYgBMnTiDpZ2EY/kFSNo7jSnlx8fJSqXTLOVcCZjB7YDDbm07PrayuNiQRdHWxf2SEf3z00ZYxXhoswNGjR9PpdPo3QRD8olFf+aw4//hCFMf3BMVAWrrf3V3LNhqkurv5amKiY//brgbrWRAEjVar9Xsn99dms1WKvC/6Bw8awf79mBk/Wljgk2Jx2/7/C8D87PcyjeWGAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowOSswMDowMJ1Oe7oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABNVJREFUWMO9l8trXHUUxz/nd+/NPJK5k5kmzbRG2iRWijZmESit0qUbaVb+A0JXLhRclK5EVETcuNCFLQhiF4K4asFVtbT1UZ8JsSbBzjQ1qU3zntQkzCRz7z0u7kRazKSTzI0HDhd+j+/5/n7n/M45V4hGBGgD0kAcsAEPKANLwAKgURhpdP9TwHHgBNAH5IAWYAWYBoaBa8APwGgUpHciOeDVKgmtQ68DrwAd/ydJAQ4DnwCrdRLd0NXqvsM07tW6iB4CvgAq2yS6oRXgc+CJ3SacAT5sgOiDhD+o4u2KWMCLwHKDRDd0uYpn7QbZNuByREQ39FIVty6x61xngGeAo1us0f7+/umBgQErk8m0FovFpYsXL/qDg4M5asfmcaAXuEKEKc0G3qVGrIqIPzAwMFcoFKZUdUVVPVVdyefzUydPnpwDAmrH7jvbuLS6pAm4UMtoT0/P4vDw8Liq+vqw+ENDQ+Pd3d2LNcgGVdymekiYOskKYRHY1J0HDx5M9Pb27tkEz/T19WW7uroSW+B2UGcK2871x2tNOI5ji8imBkUk5jjOVi8+QZ1S780C3K81MT8/v1IsFuc3m1tcXJyfm5tb3QJ3KWqyAZAH/M0mR0dH4+fOnQt8319+cNz3/eWzZ8/q2NhYrdvzgZtV/MjEAk4BJWrkzHQ6vXbmzJlCoVCYnJ2dLRUKhcnTp08XXNddo3aeLVVxIy0MAnQDt7YwrLZte67retlsVl3X9Wzb9ti6KNwCutiFHiEBvE3ouiiqlw+8xTYe2HZP9CTwKXAsgsNfB156PJe7acdimAD8wGBZAYERBEiWy5yYnuaj6obtxsrfhFnhOSDVANF7xpj3Ojs7h+KO4waQFiWtKq3GaIuKtAjEbM8j6Qe+t/8xOdLmyk5iJQm8AbwGODvYHyTj8Wt729sv2JZVRtXWMCtJ6GhVRMLqpngoRQMjYjS/k1dYAQrA00AP2wwlx3Fut2Wz38SamgRwVaRZRJKhavhVbRahBcRFaEPo9mFlpynjPjBHGA51N9DGmKVMOv11qrl5qjqk8tCjk/AroiAqoioioqiD6kwj+e1PQvedoL5w8FqSye/3ZDI3JHRzHSKCqqjIlIr82AhZBf4gzL9HeEQ4xGOxkfZs9lvLstbrYQkYhbLAqIhckXj8bqOVo0yY2I8C+2otsixrZk8mcykRjxc3ObOAiGr1sEKA6iowgsh3AoPFZHI+5nkaRZmbJfzFfh6IbXJFa67rXk6nUuMPNGahexEDgqAeSAm4q8Ivtm1fCYJg5IWJielCa+t6++oqY5OT0ZQ5y7IyQRC8qaov83Db6Sfj8Z/3trVdtW27HHJHVBURWQdWVSkKOiFi8j7MqeCVFhb85kwGLItb4+P/gkXyO2GMWTLGfOx5Xr+qPrsx7tj2ZGs6/att22VVtQjTXlFEZoF7InLHduy7KJUg8JCKr9gWbQcO8PuNG/+xEwnZSqWijuP8Zox53/f9LmCfEVl2U6mfkonETJXgPVT/UphOxGIzpbW1chgQQufxY3x1/vwj7UTa7aRSqXipVHrd9/1TyXjiasfe9s+MMbdRXbBElu40Na3uK5eJNTUxms9vGz9SsolEAlXNVtYr+9NuupjraF+oTEyUNZfDAIeWl/lyYWHH+P8AZ0RW2q2R2psAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjExOjE5KzAwOjAwUeR7JAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]}]},logger$u=LoggerByDefault.getLogger("DrawingDOM"),DrawingDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPdrawing"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowDrawingPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowDrawingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowDrawingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-drawing fr-btn fr-btn--tertiary",e.setAttribute("aria-label",this.options.labels.control),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowDrawingClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowDrawingClick(ke)}),e},_createDrawingPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPdrawingPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createDrawingPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createDrawingToolsDivSections:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__content fr-px-3w fr-modal__content",Oe},_createDrawingButtonsPluginDiv:function(){var Oe=document.createElement("div");return Oe.className="container-buttons-plugin fr-mx-2w",Oe},_createDrawingPanelHeaderElement:function(){var Oe=document.createElement("div");Oe.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var e=document.createElement("div");e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=this.options.controlLabel||"Annoter la carte",Oe.appendChild(e);var Te=document.createElement("button");Te.id=this._addUID("GPdrawingPanelClose"),Te.className="GPpanelClose GPdrawingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Te.title="Fermer le panneau";var ke=this;Te.addEventListener?Te.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowDrawingPicto")).click()},!1):Te.attachEvent&&Te.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowDrawingPicto")).click()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Te.appendChild(Be),Oe.appendChild(Te),Oe},_createDrawingToolsSections:function(){var Oe=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&Oe.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&Oe.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&Oe.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),Oe},_createDrawingToolSection:function(Oe,e){var Te=document.createElement("div");Te.className="drawing-tool-section fr-mx-2w";var ke=document.createElement("p");ke.className="drawing-tool-section-title",ke.innerHTML=Oe,Te.appendChild(ke);var Be=document.createElement("div");Be.className="drawing-tools-flex-display";var Ue=this;function He(En){Ue._handleDOMToolClick(En,this.id,Ue),Ue._handleToolClick(En,this.id,Ue)}for(var We in this.dtOptions)if(this.dtOptions[We].panel===e){var Cn=document.createElement("button");Cn.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",Cn.id=this._addUID("drawing-tool-"+this.dtOptions[We].id),Cn.title=this.dtOptions[We].label,Cn.addEventListener("click",He),Be.appendChild(Cn)}return Te.appendChild(Be),Te},_createSavingSection:function(Oe,e){var Te=document.createElement("div");Te.className="drawing-tool-section drawing-tools-flex-display fr-m-1w";var ke=document.createElement("button");ke.title=e,ke.className="tool-form-submit drawing-button fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",ke.id=this._addUID("drawing-export"),ke.setAttribute("type","button"),ke.textContent=Oe;var Be=this;return ke.onclick=function(){Be.onExportFeatureClick()},Te.appendChild(ke),Te},_createMarkersChooser:function(Oe){var e=document.createElement("div");e.className=Oe.className;var Te=document.createElement("input");Te.type="checkbox",Te.className="gpf-custom-dropdown-toggle",Te.id=this._addUID("gpf-custom-dropdown-toggle"),e.appendChild(Te);var ke=document.createElement("span");ke.innerText="Sélectionner le pictogramme :",e.appendChild(ke);for(var Be=0;Be<this.options.markersList.length;Be++){var Ue=document.createElement("input");Ue.type="radio",Ue.name="gpf-dropdown-radio-style",Ue.value=this.options.markersList[Be].src,Ue.className="gpf-custom-dropdown-display",Ue.id=this._addUID(`gpf-custom-dropdown-display-${Be}`),e.appendChild(Ue),Be===0&&(Ue.checked=!0);var He=document.createElement("label");He.htmlFor=this._addUID("gpf-custom-dropdown-toggle"),He.className="fr-select GPselect gpf-select",e.appendChild(He);var We=document.createElement("img");We.src=this.options.markersList[Be].src,We.alt=`Option ${Be+1}`,He.appendChild(We)}var Cn=document.createElement("div");Cn.className="gpf-custom-dropdown-options",e.append(Cn);for(var Be=0;Be<this.options.markersList.length;Be++){var En=document.createElement("label");En.htmlFor=this._addUID(`gpf-custom-dropdown-display-${Be}`),En.className="gpf-custom-dropdown-option",Cn.appendChild(En);var An=document.createElement("img");An.src=this.options.markersList[Be].src,An.alt=`Option ${Be+1}`,En.appendChild(An),En.addEventListener("click",()=>{Te.click()})}return e},_createStylingElement:function(Oe){var e=document.createElement("div");e.className=Oe.className;var Te=document.createTextNode(Oe.label);e.appendChild(Te);var ke=document.createElement("input");try{ke.type=Oe.type}catch{ke.type="text"}if(Oe.type==="range"){e.dataset.frJsRange="true",e.title=Oe.label;var Be=Oe.defaultValue;Be=Math.round((Be-Oe.min)/(Oe.max-Oe.min)*100),e.style.setProperty("--progress-right",Be+"%"),ke.addEventListener("change",Ue=>{Ue.target.parentNode.style.setProperty("--progress-right",`${(Ue.target.value-Oe.min)/(Oe.max-Oe.min)*100}%`)})}return ke.id=Oe.id,ke.value=Oe.defaultValue,Oe.title&&(ke.title=Oe.title),Oe.checked!==void 0&&(ke.checked=Oe.checked),Oe.min!==void 0&&(ke.min=Oe.min),Oe.max!==void 0&&(ke.max=Oe.max),Oe.step!==void 0&&(ke.step=Oe.step),e.appendChild(ke),e},_createStylingDiv:function(Oe){var e=document.createElement("dialog");e.className="gp-styling-div gpf-panel fr-modal gpf-visible GPelementVisible";var Te=document.createElement("div");if(Te.className="gpf-modal__body fr-modal__body",e.appendChild(Te),checkDsfr()){var ke=document.createElement("div");ke.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var Be=document.createElement("div");Be.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Be.innerHTML="Modifier le style",ke.appendChild(Be);var Ue=document.createElement("button");Ue.id=this._addUID("GPdrawingStylePanelClose"),Ue.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ue.title="Fermer le panneau",Ue.addEventListener?Ue.addEventListener("click",function(){Oe.applyFunc.call(this,"cancel")},!1):Ue.attachEvent&&Ue.attachEvent("onclick",function(){Oe.applyFunc.call(this,"cancel")});var He=document.createElement("span");He.className="GPelementHidden gpf-visible",He.innerText="Fermer",Ue.appendChild(He),ke.appendChild(Ue),Te.appendChild(ke)}var We=document.createElement("div");We.className="gpf-panel__content fr-px-3w fr-modal__content",Te.appendChild(We);var Cn=document.createElement("div"),En=null,An=Oe.geomType.toLowerCase();switch(An){case"point&text":case"point":En=this._createMarkersChooser({className:"gp-styling-option",defaultValue:Oe.initValues.markerSrc}),Cn.appendChild(En),En=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.markerSize,title:"petit, moyen ou grand",id:this._addUID("markerSize"),min:5,max:15,step:5,defaultValue:Oe.initValues.markerSize*10}),Cn.appendChild(En),Oe.initValues.markerCustom,An==="point&text"&&(En=this._createStylingElement({type:"checkbox",className:"gp-styling-option",label:this.options.labels.labelDisplay,id:this._addUID("labelDisplay"),checked:Oe.initValues.labelDisplay,defaultValue:Oe.initValues.labelDisplay}),Cn.appendChild(En));break;case"text":En=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:Oe.initValues.fillColor}),Cn.appendChild(En),En=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Oe.initValues.strokeColor}),Cn.appendChild(En),En=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Oe.initValues.strokeWidth}),Cn.appendChild(En);break;case"line":En=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Oe.initValues.strokeColor}),Cn.appendChild(En),En=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Oe.initValues.strokeWidth}),Cn.appendChild(En);break;case"polygon":En=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Oe.initValues.strokeColor}),Cn.appendChild(En),En=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Oe.initValues.strokeWidth}),Cn.appendChild(En),En=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:Oe.initValues.fillColor}),Cn.appendChild(En),En=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.fillOpacity,title:"0 (transparent) à 100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:Oe.initValues.fillOpacity*10}),Cn.appendChild(En);break;default:logger$u.log("Unhandled geometry type for styling.")}We.appendChild(Cn);var Sn=document.createElement("div");Sn.className="gpf-flex-row",We.appendChild(Sn);var Tn=document.createElement("input");Tn.type="button",Tn.className="gp-styling-button fr-btn fr-btn--secondary",Tn.value=this.options.labels.applyToObject,Tn.onclick=function(){Oe.applyFunc.call(this,"apply")};var Ln=document.createElement("input");Ln.type="button",Ln.value=this.options.labels.setAsDefault,Ln.className="gp-styling-button fr-btn fr-btn--tertiary",Ln.onclick=function(){Oe.applyFunc.call(this,"default")},Sn.appendChild(Ln),Sn.appendChild(Tn);var Bn=document.createElement("input");return Bn.type="button",Bn.className="gp-styling-button closer",Bn.onclick=function(){Oe.applyFunc.call(this,"cancel")},We.appendChild(Bn),e},_createLabelDiv:function(Oe){var e=document.createElement("dialog");e.className="gp-label-div gpf-panel fr-modal gpf-visible GPelementVisible";var Te=document.createElement("div");if(Te.className="gpf-modal__body fr-modal__body",e.appendChild(Te),checkDsfr()){var ke=document.createElement("div");ke.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var Be=document.createElement("div");Be.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Be.innerHTML="Ajouter une description",Oe.geomType==="Text"&&(Be.innerHTML="Texte de l'annotation"),ke.appendChild(Be);var Ue=document.createElement("button");Ue.id=this._addUID("GPdrawingStylePanelClose"),Ue.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ue.title="Fermer le panneau",Ue.addEventListener?Ue.addEventListener("click",function(){Oe.applyFunc.call(this,"cancel")},!1):Ue.attachEvent&&Ue.attachEvent("onclick",function(){Oe.applyFunc.call(this,"cancel")});var He=document.createElement("span");He.className="GPelementHidden gpf-visible",He.innerText="Fermer",Ue.appendChild(He),ke.appendChild(Ue),Te.appendChild(ke)}var We=document.createElement("div");We.className="gpf-panel__content fr-px-3w fr-modal__content",Te.appendChild(We);var Cn=null;if(Oe.geomType==="Text"?(Cn=document.createElement("input"),Cn.type="text",Cn.className="gp-input-label-style fr-input fr-mb-3w"):(Cn=document.createElement("textArea"),Cn.rows=2,Cn.cols=40,Cn.className="gp-textarea-att-label-style fr-input"),Oe.text&&(Cn.value=Oe.text),Cn.autocomplete="off",Cn.placeholder=Oe.placeholder,Cn.id=Oe.inputId,We.appendChild(Cn),Cn.onkeyup=function(Tn){Oe.geomType==="Text"&&Tn.keyCode===13&&Oe.applyFunc.call(this,Oe.key,Cn.value,!0),Tn.keyCode===27&&Oe.applyFunc.call(this,Oe.key,Cn.value,!1)},Oe.measure&&Oe.geomType!=="Text"){var En=document.createElement("input");En.type="text",En.readonly=!0,En.className="gp-input-measure-style",En.value=Oe.measure,We.appendChild(En)}var An=document.createElement("input");An.type="button",An.className="gp-styling-button fr-btn fr-btn--tertiary",An.value=this.options.labels.saveDescription,An.onclick=function(){Oe.applyFunc.call(this,Oe.key,Cn.value,!0)},We.appendChild(An);var Sn=document.createElement("input");return Sn.type="button",Sn.className="gp-styling-button closer",Sn.onclick=function(){Oe.applyFunc.call(this,Oe.key,Cn.value,!1)},We.appendChild(Sn),e},_handleDOMToolClick:function(Oe,e,Te){for(var ke in Te.dtOptions){var Be=Te._addUID("drawing-tool-"+Te.dtOptions[ke].id),Ue=document.getElementById(Be);if(Be!==e){Ue.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.dtOptions[ke].active=!1;continue}Te.dtOptions[ke].active?Ue.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary":Ue.className="drawing-tool drawing-tool-active fr-btn fr-btn--tertiary gpf-btn--tertiary",Te.dtOptions[ke].active=!Te.dtOptions[ke].active}}},logger$t=LoggerByDefault.getLogger("Drawing"),Zo,Drawing=(Zo=class extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Zo))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Drawing",this._initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){super.setMap(e),this.getMap()&&this.eventKey&&unByKey(this.eventKey),e!=null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),this.draggable&&Draggable.dragElement(this._drawingPanel,this._drawingPanelHeader,e.getTargetElement()),this.collapsed||this._showDrawingButton.setAttribute("aria-pressed",!0),this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",Te=>{Te.element===this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))}))}exportFeatures(){var e=null;if(ControlExtended.prototype.getMap.call(this)==null)return logger$t.log("Impossible to export : control isn't attached to any map."),e;if(!this.layer)return logger$t.log("Impossible to export : no layer is hosting features."),e;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return logger$t.log("Impossible to export : no features found."),e;this.featuresCollectionSelected&&this.featuresCollectionSelected.clear();var Te=null;switch(this.getExportFormat()){case"KML":Te=new KML({writeStyles:!0});break;case"GPX":Te=new GPX({});break;case"GEOJSON":Te=new GeoJSON({});break}if(!Te)return logger$t.log("Impossible to export : format unknown !?"),e;var ke=this.layer.getSource().getProjection();return ke=ke||this.getMap().getView().getProjection(),e=Te.writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:ke}),e}setCollapsed(e){if(e===void 0){logger$t.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingButton.click())}setExportName(e){this._exportName=e}getExportName(){return this._exportName}setExportFormat(e){switch(this._exportFormat=e?e.toUpperCase():"KML",e.toUpperCase()){case"KML":this._exportExt=".kml",this._exportMimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this._exportExt=".gpx",this._exportMimeType="application/gpx+xml";break;case"GEOJSON":this._exportExt=".geojson",this._exportMimeType="application/geo+json";break;default:this._exportFormat="KML";break}}getExportFormat(){return this._exportFormat}setLayer(e){if(!e){this.layer=null;return}if(!(e instanceof VectorLayer)){logger$t.log("no valid layer given for hosting drawn features.");return}var Te=this.getMap().getLayers();if(Te){var ke=!1;Te.forEach(Be=>{Be===e&&(logger$t.trace("layer already in map. Not adding."),ke=!0)}),ke||this.getMap().addLayer(e),e.getSource().getFeatures().forEach(Be=>{var Ue=Be.getStyle();if(typeof Ue=="function"){var He=Be.getStyleFunction();if(He){var We=He.call(this,Be,0);We&&We.length!==0&&Be.setStyle(Array.isArray(We)?We[0]:We)}}}),this.layer=e,this.getMap().getControls().forEach(Be=>{if(Be instanceof LayerSwitcher){var Ue=this.layer.gpLayerId;Be._layers[Ue].title===Ue&&Be.addLayer(this.layer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}}getLayer(){return this.layer}getContainer(){return this._container}disable(){var e=this.getMap();Interactions.unset(e);for(var Te in this.dtOptions)if(this.dtOptions.hasOwnProperty(Te)&&this.dtOptions[Te].active){var ke=this._addUID("drawing-tool-"+this.dtOptions[Te].id);document.getElementById(ke).className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",this.dtOptions[Te].active=!1}}_getsMarkersOptionsFromSrc(e){for(var Te=null,ke=0;ke<this.options.markersList.length;ke++)if(e&&this.options.markersList[ke].src===e)return Te=this.options.markersList[ke],Te;return Te}_getIconStyleOptions(e){var Te={};return Object.keys(e).forEach(ke=>{switch(ke){case"src":case"size":case"scale":case"color":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":Te[ke]=e[ke];break}}),Te}_initialize(e){this._uid=e.id||SelectorID.generate(),this._exportName="Croquis",this._exportFormat="KML",this._exportMimeType="application/vnd.google-earth.kml+xml",this._exportExt=".kml",e=e||{},this.options=e,this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(Zo.DefaultTools).forEach(Te=>{this.options.tools.hasOwnProperty(Te)||(this.options.tools[Te]=Zo.DefaultTools[Te])}),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(Zo.DefaultCursorStyle).forEach(Te=>{this.options.cursorStyle.hasOwnProperty(Te)||(this.options.cursorStyle[Te]=Zo.DefaultCursorStyle[Te])}),this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this.options.markersList=e.markersList||MarkersOther.drawing_api,this.options.labels||(this.options.labels={}),Object.keys(Zo.DefaultLabels).forEach(Te=>{this.options.labels.hasOwnProperty(Te)||(this.options.labels[Te]=Zo.DefaultLabels[Te])}),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(Zo.DefaultStyles).forEach(Te=>{if(!e.defaultStyles.hasOwnProperty(Te)){this.options.defaultStyles[Te]=Zo.DefaultStyles[Te];return}if(Te==="polyFillOpacity"&&(e.defaultStyles[Te]<0||e.defaultStyles[Te]>1)){logger$t.log("Wrong value ("+e.defaultStyles[Te]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),this.options.defaultStyles[Te]=Zo.DefaultStyles[Te];return}if(Te==="strokeWidth"||Te==="polyStrokeWidth"){var ke=parseInt(e.defaultStyles[Te],10);if(isNaN(ke)||ke<0){logger$t.log("Wrong value ("+e.defaultStyles[Te]+") for defaultStyles.strokeWidth. Must be a positive interger value."),this.options.defaultStyles[Te]=Zo.DefaultStyles[Te];return}this.options.defaultStyles[Te]=ke}if(Te==="markerSize"){var Be=parseFloat(e.defaultStyles[Te]);if(isNaN(Be)||Be<0){logger$t.log("Wrong value ("+e.defaultStyles[Te]+") for defaultStyles.markerSize. Must be a positive value."),this.options.defaultStyles[Te]=Zo.DefaultStyles[Te];return}this.options.defaultStyles[Te]=Be}}),this.interactionCurrent=null,this.interactionSelectEdit=null,this.featuresCollectionSelected=null,this.stylingOvl=null,this.popupOvl=null,this.tooltipOvl=null,this.tooltipElem=null,this.layer=null,this.options.layer&&this.options.layer instanceof VectorLayer&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})}_createEmptyLayer(){var e=new Collection,Te=new VectorLayer({source:new VectorSource({features:e}),title:"Mon Croquis"});Te.gpResultLayerId="drawing",this.setLayer(Te)}_detectSupport(){var e=!0,Te=window.navigator.userAgent.toLowerCase();return(Te.indexOf("iphone")!==-1||Te.indexOf("ipod")!==-1||Te.indexOf("ipad")!==-1||Te.indexOf("android")!==-1||Te.indexOf("mobile")!==-1||Te.indexOf("blackberry")!==-1||Te.indexOf("tablet")!==-1||Te.indexOf("phone")!==-1||Te.indexOf("touch")!==-1)&&(e=!1),(Te.indexOf("msie")!==-1||Te.indexOf("trident")!==-1)&&(e=!0),e}_initContainer(){var e=this._createMainContainerElement(),Te=this._showDrawingButton=this._createShowDrawingPictoElement();e.appendChild(Te);var ke=this._drawingPanel=this._createDrawingPanelElement(),Be=this._createDrawingPanelDivElement();ke.appendChild(Be);var Ue=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();Be.appendChild(Ue);var He=this._createDrawingToolsDivSections();Be.appendChild(He);for(var We=this._createDrawingToolsSections(),Cn=0;Cn<We.length;Cn++)He.appendChild(We[Cn]);var En=this._createDrawingButtonsPluginDiv();return He.appendChild(En),e.appendChild(ke),e}_drawEndFeature(e,Te){var ke=null;switch(Te){case"Point":ke=new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":ke=new Style$1({stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":ke=new Style$1({fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})});break}if(e.setStyle(ke),this._updateMeasure(e,Te),this.options.popup.display){var Be=this,Ue=function(An,Sn,Tn){if(Be.getMap().removeOverlay(Be.popupOvl),Be.popupOvl=null,Tn&&Sn&&Sn.trim().length>0){var Ln={};Ln[An]=Sn.replace(/\n/g,"<br>"),e.setProperties(Ln)}},He=null,We=!0,Cn=this.options.popup.function;Cn&&typeof Cn=="function"&&(He=Cn.call(Be,{feature:e,geomType:Te,closeFunc:function(){Ue(null,!1)},saveFunc:function(An){Ue(An,!0)}}),He&&(We=!1,He.tabIndex=-1,He.onblur=function(){Be.getMap().removeOverlay(Be.popupOvl),Be.popupOvl=null})),We&&(He=this._createLabelDiv({applyFunc:Ue,inputId:this._addUID("att-input"),placeholder:"Saisir une description... (facultatif)",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:Te,key:"description"})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new Overlay({element:He,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var En=e.getGeometry().getExtent();this.popupOvl.setPosition([(En[0]+En[2])/2,(En[1]+En[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}}_createRemoveInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",Te=>{!Te||!Te.selected||Te.selected.length===0||(this.layer.getSource().removeFeature(Te.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))}),e}_createStylingInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",Te=>{if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),!(!Te||!Te.selected||Te.selected.length===0)){var ke=null,Be=null,Ue=null,He=null,We={},Cn=Te.selected[0].getGeometry(),En=Te.selected[0].getStyle();if(Cn instanceof Point$1||Cn instanceof MultiPoint){if(En&&En.getImage()&&typeof En.getImage().getSrc=="function"&&En.getImage().getSrc()!==this.options.defaultStyles.textIcon1x1.src&&(He="Point",typeof En.getImage().getSrc=="function"?(We.markerSrc=En.getImage().getSrc(),We.markerSize=En.getImage().getScale()||1,We.markerAnchor=En.getImage().getAnchor(),En.getImage().getColor()?(ke=En.getImage().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":We.markerColor=ke,Be=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},We.markerColor=Be.hex,We.markerOpacity=Be.opacity):We.markerColor=this.options.markersList[0].color||"#ffffff"):(We.markerSrc=this.options.markersList[0].src,We.markerSize=this.options.markersList[0].scale||1,We.markerColor=this.options.markersList[0].color||"#ffffff",We.markerAnchor=this.options.markersList[0].anchor),We.markerCustom=!this._getsMarkersOptionsFromSrc(We.markerSrc)),En&&En.getText()){var An=Te.selected[0].getProperties().name;if(An&&(He=He==="Point"?"Point&Text":"Text",En.getText().getStroke()&&En.getText().getStroke().getColor()&&(ke=En.getText().getStroke().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":We.strokeColor=ke,Be=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},We.strokeColor=Be.hex,We.strokeOpacity=Be.opacity),En.getText().getStroke()&&En.getText().getStroke().getWidth()&&(We.strokeWidth=En.getText().getStroke().getWidth()),En.getText().getFill()&&En.getText().getFill().getColor()&&(ke=En.getText().getFill().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":We.fillColor=ke,Be=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},We.fillColor=Be.hex,We.fillOpacity=Be.opacity),We.strokeColor=We.hasOwnProperty("strokeColor")?We.strokeColor:this.options.defaultStyles.textStrokeColor,We.strokeWidth=We.hasOwnProperty("strokeWidth")?We.strokeWidth:this.options.defaultStyles.textStrokeWidth,We.fillColor=We.hasOwnProperty("fillColor")?We.fillColor:this.options.defaultStyles.textFillColor,He==="Point&Text")){var Sn=En.getText().getText();Sn||En.getText().setText(An);var Tn=Te.selected[0].get("checked");We.labelDisplay=Tn===void 0?this.options.defaultStyles.labelDisplay:Tn}}}else Cn instanceof LineString||Cn instanceof MultiLineString?(He="Line",En&&En.getStroke()&&(En.getStroke().getWidth()&&(We.strokeWidth=En.getStroke().getWidth()),En.getStroke().getColor()&&(ke=En.getStroke().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":We.strokeColor=ke,Be=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},We.strokeColor=Be.hex,We.strokeOpacity=Be.opacity)),We.strokeWidth=We.hasOwnProperty("strokeWidth")?We.strokeWidth:this.options.defaultStyles.strokeWidth,We.strokeColor=We.hasOwnProperty("strokeColor")?We.strokeColor:this.options.defaultStyles.strokeColor):(Cn instanceof Polygon||Cn instanceof MultiPolygon)&&(He="Polygon",En&&En.getStroke()&&(En.getStroke().getWidth()&&(We.strokeWidth=En.getStroke().getWidth()),En.getStroke().getColor()&&(ke=En.getStroke().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":We.strokeColor=ke,Be=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},We.strokeColor=Be.hex,We.strokeOpacity=Be.opacity)),En&&En.getFill()&&En.getFill().getColor()&&(ke=En.getFill().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":We.fillColor=ke,Be=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},We.fillColor=Be.hex,We.fillOpacity=Be.opacity),We.strokeWidth=We.hasOwnProperty("strokeWidth")?We.strokeWidth:this.options.defaultStyles.polyStrokeWidth,We.strokeColor=We.hasOwnProperty("strokeColor")?We.strokeColor:this.options.defaultStyles.polyStrokeColor,We.fillColor=We.hasOwnProperty("fillColor")?We.fillColor:this.options.defaultStyles.polyFillColor,We.fillOpacity=We.hasOwnProperty("fillOpacity")?We.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!He){logger$t.log("Unhandled geometry type for styling.");return}var Ln=this,Bn=function(ti){if(ti==="cancel"){Ln.getMap().removeOverlay(Ue);return}var ni=ti!=="apply",ri=document.getElementById(Ln._addUID("fillColor")),si=document.getElementById(Ln._addUID("fillOpacity")),ai=document.getElementById(Ln._addUID("strokeColor")),li=document.getElementById(Ln._addUID("strokeWidth")),Pi=document.getElementById(Ln._addUID("markerSize"));switch(He.toLowerCase()){case"text":ni?(Ln.options.defaultStyles.textStrokeColor=ai.value,Ln.options.defaultStyles.textStrokeWidth=li.value,Ln.options.defaultStyles.textFillColor=ri.value):Te.selected[0].setStyle(new Style$1({text:new Text({font:"16px sans",textAlign:"left",text:En.getText().getText(),fill:new Fill({color:ri.value}),stroke:new Stroke({color:ai.value,width:parseInt(li.value,10)})})}));break;case"point&text":case"point":var pi=document.querySelector("input[type='checkbox']"),vi=null,Ri=parseInt(Pi.value,10)/10,Fi=document.querySelector("input[name='gpf-dropdown-radio-style']:checked");if(Fi&&(vi=Ln._getsMarkersOptionsFromSrc(Fi.value),vi.scale=Ri),ni){if(Ln.options.defaultStyles.markerSize=Ri,Ln.options.markersList.length>1){var di=Ln.options.markersList.findIndex(function(Oi){return Oi===vi});di>0&&(Ln.options.markersList.splice(di,1),Ln.options.markersList.splice(0,0,vi))}He.toLowerCase()==="point&text"&&(Ln.options.defaultStyles.textStrokeColor=We.strokeColor,Ln.options.defaultStyles.textStrokeWidth=We.strokeWidth,Ln.options.defaultStyles.textFillColor=We.fillColor,Ln.options.defaultStyles.labelDisplay=We.labelDisplay)}else{var ci={};He.toLowerCase()==="point&text"&&(Te.selected[0].set("checked",pi.checked),ci={text:new Text({font:"16px sans",textAlign:"left",text:pi.checked?Te.selected[0].get("name"):"",fill:new Fill({color:We.fillColor}),stroke:new Stroke({color:We.strokeColor,width:parseInt(We.strokeWidth,10)})})}),vi?Te.selected[0].setStyle(new Style$1(Object.assign({image:new Icon(Ln._getIconStyleOptions(vi))},ci))):Te.selected[0].setStyle(new Style$1(Object.assign({image:new Icon({src:We.markerSrc,anchor:We.markerAnchor,anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels",scale:Ri})},ci)))}break;case"line":ni?(Ln.options.defaultStyles.strokeColor=ai.value,Ln.options.defaultStyles.strokeWidth=parseInt(li.value,10)):Te.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(li.value,10),color:ai.value})}));break;case"polygon":var Mi=parseInt(si.value,10)/10;ni?(Ln.options.defaultStyles.polyStrokeColor=ai.value,Ln.options.defaultStyles.polyFillColor=ri.value,Ln.options.defaultStyles.polyFillOpacity=Mi,Ln.options.defaultStyles.polyStrokeWidth=parseInt(li.value,10)):Te.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(li.value,10),color:ai.value}),fill:new Fill({color:ColorUtils.hexToRgba(ri.value,Mi)})}));break}ni||Ln.getMap().removeOverlay(Ue)},ei=this._createStylingDiv({geomType:He,initValues:We,applyFunc:Bn});Ue=new Overlay({element:ei,positioning:"top-center"}),this.getMap().addOverlay(Ue),Ue.setPosition(Te.mapBrowserEvent.coordinate),this.stylingOvl=Ue,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_createLabelInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",Te=>{if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),!(!Te||!Te.selected||Te.selected.length===0)){var ke=null,Be=null,Ue=null,He=null,We=Te.selected[0].getGeometry(),Cn=Te.selected[0].getStyle();if(We instanceof Point$1||We instanceof MultiPoint){var En=Te.selected[0].getProperties().name;Cn&&Cn.getText()&&En?Be="Text":Cn&&Cn.getImage()&&(Be="Point")}else if(We instanceof LineString||We instanceof MultiLineString)Be="Line";else if(We instanceof Polygon||We instanceof MultiPolygon)Be="Polygon";else{logger$t.log("Geometry type for styling not supported .");return}if(!Be){logger$t.log("Unhandled geometry type for styling.");return}if(Be==="Text")Ue=Cn.getText().getText();else{var An=Te.selected[0].getProperties();An&&(An.hasOwnProperty("description")||An.hasOwnProperty("desc"))&&(Ue=An.description||An.desc),An&&An.hasOwnProperty("measure")&&(He=An.measure)}var Sn=this,Tn=function(Bn,ei,ti){if(Sn.getMap().removeOverlay(ke),!!ti){var ni=Te.selected[0];if(Be==="Text"){var ri=ni.getStyle();ri.getText().setText(ei),ni.setProperties({name:ei}),ni.setStyle(ri);return}var si={};si[Bn]=ei.replace(/\n/g,"<br>"),ni.setProperties(si)}},Ln=this._createLabelDiv({applyFunc:Tn,inputId:this._addUID("label-input"),placeholder:Be==="Text"?"Saisir un label...":"Saisir une description... (facultatif)",text:Ue,key:"description",measure:this.options.tools.measure?He:null,geomType:Be});ke=new Overlay({element:Ln,positioning:"top-center"}),this.getMap().addOverlay(ke),ke.setPosition(Te.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=ke,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_updateMeasure(e,Te){logger$t.log(e);var ke=null,Be=this.getMap().getView().getProjection();function Ue(li,Pi){Pi=Pi||2;var pi=Math.pow(10,Pi);return Math.round(li*pi)/pi}var He=Te||e.getProperties().type;switch(He){case"Point":var We=e.getGeometry().getCoordinates(),Cn=transform$1(We,Be,"EPSG:4326");ke="lon : ",ke+=Ue(Cn[0],4)+"°",ke+=" / ",ke+="lat : ",ke+=Ue(Cn[1],4)+"°";break;case"LineString":for(var En=0,An=e.getGeometry().getCoordinates(),Sn=0,Tn=An.length-1;Sn<Tn;++Sn){var Ln=transform$1(An[Sn],Be,"EPSG:4326"),Bn=transform$1(An[Sn+1],Be,"EPSG:4326");En+=getDistance(Ln,Bn)}ke=En>1e3?Ue(En/1e3,3)+" km":Ue(En,3)+" m";break;case"Polygon":var ei=0,ti=e.getGeometry().clone(),ni=ti.getLinearRing(0).getCoordinates();ei=Math.abs(getArea(new Polygon([ni])));var ri=ti.getLinearRings();if(ri.length>1)for(var si=1;si<ri.length;si++){var ai=ri[si].getCoordinates();ei-=Math.abs(getArea(new Polygon([ai])))}ke=ei>1e6?Ue(ei/1e6,3)+" km^2":Ue(ei,2)+" m^2";break}e.setProperties({measure:ke,type:He})}_handleToolClick(e,Te,ke){var Be=ke.getMap();if(!Be){logger$t.trace("Drawing control not attached to any map.");return}Interactions.unset(Be,{current:"Drawing"}),ke.interactionCurrent&&(Be.removeInteraction(ke.interactionCurrent),ke.interactionCurrent=null),ke.interactionSelectEdit&&(Be.removeInteraction(ke.interactionSelectEdit),ke.interactionSelectEdit=null),ke.popupOvl&&(ke.getMap().removeOverlay(ke.popupOvl),ke.popupOvl=null),ke.stylingOvl&&(ke.getMap().removeOverlay(ke.stylingOvl),ke.stylingOvl=null),ke.tooltipOvl&&(ke.getMap().removeOverlay(ke.tooltipOvl),ke.tooltipOvl=null),this.layer||this._createEmptyLayer();const Ue=We=>{if(We.dragging||!ke.tooltipOvl)return;const Cn=We.coordinate;ke.tooltipOvl.setPosition(Cn)},He=()=>{ke.tooltipOvl&&(ke.getMap().removeOverlay(ke.tooltipOvl),ke.tooltipOvl=null)};switch(Te){case this._addUID("drawing-tool-point"):ke.dtOptions.points.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),ke.interactionCurrent.on("drawend",function(We){ke._drawEndFeature(We.feature,"Point")},ke));break;case this._addUID("drawing-tool-line"):ke.dtOptions.lines.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString",handleMoveEvent:Ue}),ke.tootlTipElem||(ke.tootlTipElem=document.createElement("div"),ke.tootlTipElem.className="gpf-draw-linestring-tooltip"),ke.tootlTipElem.innerText="Double-cliquer pour terminer",ke.tooltipOvl=new Overlay({element:ke.tootlTipElem,positioning:"top-right"}),ke.interactionCurrent.on("drawend",function(We){ke._drawEndFeature(We.feature,"LineString"),He()},ke),ke.interactionCurrent.on("drawabort",He,ke));break;case this._addUID("drawing-tool-polygon"):ke.dtOptions.polygons.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon",handleMoveEvent:Ue}),ke.tootlTipElem||(ke.tootlTipElem=document.createElement("div"),ke.tootlTipElem.className="gpf-draw-linestring-tooltip"),ke.tootlTipElem.innerText="Double-cliquer pour terminer",ke.tooltipOvl=new Overlay({element:ke.tootlTipElem,positioning:"top-right"}),ke.interactionCurrent.on("drawend",function(We){ke._drawEndFeature(We.feature,"Polygon"),He()},ke),ke.interactionCurrent.on("drawabort",He,ke));break;case this._addUID("drawing-tool-holes"):ke.dtOptions.holes.active&&(ke.interactionSelectEdit=new Select({stopClick:!0,condition:pointerMove,layers:[this.layer]}),ke.interactionSelectEdit.setProperties({name:"Drawing",source:ke}),Be.addInteraction(ke.interactionSelectEdit),ke.interactionCurrent=new Draw({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),ke.interactionCurrent.on("drawstart",function(We){},ke),ke.interactionCurrent.on("drawend",function(We){var Cn=ke.interactionSelectEdit.getFeatures();if(Cn.getLength()){for(var En=Cn.item(0),An=We.feature.getGeometry().getCoordinates()[0],Sn=!0,Tn=0;Tn<An.length;Tn++)if(!En.getGeometry().intersectsCoordinate(An[Tn])){Sn=!1;break}if(!Sn)return;En.getGeometry().appendLinearRing(new LinearRing(An)),We.feature=En,ke._drawEndFeature(We.feature,"Polygon")}},ke));break;case this._addUID("drawing-tool-text"):ke.dtOptions.text.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),ke.interactionCurrent.on("drawend",We=>{var Cn=function(An,Sn,Tn){if(ke.getMap().removeOverlay(ke.popupOvl),ke.popupOvl=null,!Tn||!Sn){ke.layer.getSource().removeFeature(We.feature);return}var Ln={};Ln[An]=Sn,We.feature.setProperties(Ln),We.feature.setStyle(new Style$1({image:new Icon(ke._getIconStyleOptions(ke.options.defaultStyles.textIcon1x1)),text:new Text({textAlign:"left",font:"16px sans",text:Sn,fill:new Fill({color:ke.options.defaultStyles.textFillColor}),stroke:new Stroke({color:ke.options.defaultStyles.textStrokeColor,width:3})})}))},En=this._createLabelDiv({applyFunc:Cn,inputId:ke._addUID("label-input"),geomType:"Text",key:"name",placeholder:"Saisir un label..."});ke.popupOvl&&ke.popupOvl.element.querySelector(".gp-styling-button.closer").click(),ke.popupOvl=new Overlay({element:En,positioning:"top-center"}),ke.getMap().addOverlay(ke.popupOvl),ke.popupOvl.setPosition(We.feature.getGeometry().getCoordinates()),document.getElementById(ke._addUID("label-input")).focus()}));break;case this._addUID("drawing-tool-edit"):ke.dtOptions.edit.active&&(this.featuresCollectionSelected=new Collection,ke.interactionSelectEdit=new Select({condition:singleClick,layers:[this.layer],features:this.featuresCollectionSelected}),ke.interactionSelectEdit.on("select",We=>{}),ke.interactionSelectEdit.setProperties({name:"Drawing",source:ke}),Be.addInteraction(ke.interactionSelectEdit),ke.interactionCurrent=new Modify({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})})}),ke.interactionCurrent.on("modifyend",We=>{var Cn=We.features.item(0);ke._updateMeasure(Cn)}));break;case this._addUID("drawing-tool-display"):ke.dtOptions.display.active&&(ke.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):ke.dtOptions.tooltip.active&&(ke.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):ke.dtOptions.remove.active&&(ke.interactionCurrent=ke._createRemoveInteraction());break;default:logger$t.trace("unhandled tool type")}ke.interactionCurrent&&(ke.interactionCurrent.setProperties({name:"Drawing",source:this}),Be.addInteraction(ke.interactionCurrent),ke.tooltipOvl&&Be.addOverlay(ke.tooltipOvl)),logger$t.log("interactions",Be.getInteractions())}onShowDrawingClick(e){var Te=this._showDrawingButton.ariaPressed;Te==="true"&&this.onPanelOpen(),this.disable(),this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onExportFeatureClick(){var e=this.exportFeatures();if(e){var Te=document.createElement("a"),ke="utf-8";if(Te.setAttribute("href","data:"+this._exportMimeType+";charset="+ke+","+encodeURIComponent(e)),Te.setAttribute("download",this.getExportName()+this._exportExt),document.createEvent){var Be=document.createEvent("MouseEvents");Be.initEvent("click",!0,!0),Te.dispatchEvent(Be)}else Te.click()}}},Mc(Zo,"DefaultTools",{points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1}),Mc(Zo,"DefaultLabels",{control:"Annoter la carte",creatingTools:"Créer",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"Créer des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"Éditer",edit:"Editer les tracés",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer à l'objet",saveDescription:"Enregistrer",setAsDefault:"Définir par défaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacité du remplissage : ",markerSize:"Taille du pictogramme : ",markerColor:"Couleur du pictogramme : ",labelDisplay:"Afficher le label : "}),Mc(Zo,"DefaultStyles",{textFillColor:"#000000",textStrokeColor:"#FFFFFF",textStrokeWidth:6,textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#000091",polyFillOpacity:.7,polyStrokeColor:"#000091",polyStrokeWidth:4,strokeColor:"#FF7F00",strokeWidth:4,markerSize:1,markerColor:"#ffcc33",labelDisplay:!0}),Mc(Zo,"DefaultCursorStyle",{radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"}),Zo);Object.assign(Drawing.prototype,DrawingDOM);Object.assign(Drawing.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Drawing=Drawing);var logger$s=LoggerByDefault.getLogger("LocationSelectorDOM"),LocationSelectorDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.className=this._addUID("GPlocationPoint"),Oe.className+=" GPwidget gpf-widget ",Oe},_createLocationPointElement:function(Oe,e){var Te=document.createElement("div");return Te.id=this._addUID("GPlocationPoint_"+Oe),Te.className=e?"GPflexInput GPlocationStageFlexInput gpf-flex":"GPflexInput GPelementHidden gpf-flex gpf-hidden",Te.style.cssText="",Te},_createLocationPointLabelElement:function(Oe,e){var Te=this,ke=document.createElement("button");return ke.id=this._addUID("GPlocationOriginLabel_"+Oe),ke.innerHTML=e,ke.className="GPlocationOriginLabel gpf-btn gpf-btn-icon-label fr-btn fr-btn--secondary gpf-btn--secondary",ke.setAttribute("type","button"),ke.addEventListener("click",function(Be){for(var Ue=SelectorID.index(this.id),He=document.getElementsByClassName(Te._addUID("GPlocationPoint")),We=0;We<He.length;We++){var Cn=He[We].childNodes[0].id,En=SelectorID.index(Cn);document.getElementById(Te._addUID("GPlocationPoint_"+En)).style.cssText=""}document.getElementById(Te._addUID("GPlocationOriginCoords_"+Ue)).value="",document.getElementById(Te._addUID("GPlocationOrigin_"+Ue)).value="",document.getElementById(Te._addUID("GPlocationPoint_"+Ue)).style.cssText="",document.getElementById(Te._addUID("GPlocationOriginPointer_"+Ue)).checked=!1,document.getElementById(Te._addUID("GPlocationOrigin_"+Ue)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(Te._addUID("GPlocationOriginCoords_"+Ue)).className="GPelementHidden gpf-hidden",document.getElementById(Te._addUID("GPlocationStageRemove_"+Ue))&&(document.getElementById(Te._addUID("GPlocationStageRemove_"+Ue)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(Te._addUID("GPlocationStageAdd"))&&(document.getElementById(Te._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),Te.onLocationClearPointClick(Be)}),ke},_createLocationAutoCompleteteInputElement:function(Oe){var e=this,Te=document.createElement("input");return Te.id=this._addUID("GPlocationOrigin_"+Oe),Te.className="GPelementShow gpf-show gpf-input fr-input",Te.type="text",Te.placeholder="Saisir une adresse, un lieu...",Te.autocomplete="off",Te.addEventListener("keyup",function(ke){var Be=ke.which||ke.keyCode;if(!(Be===13||Be===10||Be===38||Be===40)){var Ue=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOrigin_"+Ue)).value.length>2?(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ue)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ue)).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ue)).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ue)).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(ke)}}),Te.addEventListener("keydown",function(ke){var Be=ke.which||ke.keyCode,Ue=document.getElementById(e._addUID("GPlocationAutoCompleteResult_"+Oe));if(Ue){var He=Ue.getElementsByClassName("GPautoCompleteProposal current"),We=Ue.getElementsByClassName("GPautoCompleteProposal"),Cn=We.length;if(Cn){var En=null;if(He.length)En=He[0];else{En=We[0],En.className="GPautoCompleteProposal current",En.style.color="#000000",En.style["background-color"]="#CEDBEF";return}var An=parseInt(SelectorID.index(En.id),10),Sn=An===Cn-1?We[0]:We[An+1],Tn=An===0?We[Cn-1]:We[An-1];switch(En.style["background-color"]="",En.style.color="",Tn.style["background-color"]="",Tn.style.color="",Sn.style["background-color"]="",Sn.style.color="",Be){case 38:logger$s.log("arrow up"),En.className="GPautoCompleteProposal",Tn.className="GPautoCompleteProposal current",Tn.style.color="#000000",Tn.style["background-color"]="#CEDBEF";break;case 40:logger$s.log("arrow down"),En.className="GPautoCompleteProposal",Sn.className="GPautoCompleteProposal current",Sn.style.color="#000000",Sn.style["background-color"]="#CEDBEF";break;case 13:logger$s.log("enter"),En.click(ke);break}En.focus()}}}),Te},_createLocationCoordinateInputElement:function(Oe){var e=this,Te=document.createElement("input");return Te.id=this._addUID("GPlocationOriginCoords_"+Oe),Te.className="GPelementHidden gpf-input gpf-hidden fr-input",Te.type="text",Te.disabled=!1,Te.addEventListener("click",function(){var ke=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOriginLabel_"+ke)).click()}),Te},_createLocationPointerShowInputElement:function(Oe){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+Oe),e.className="GPelementHidden gpf-hidden",e.type="checkbox",e},_createLocationPointerInputElement:function(Oe){var e=this,Te=document.createElement("button");return Te.id=this._addUID("GPlocationOriginPointerImg_"+Oe),Te.htmlFor=this._addUID("GPlocationOriginPointer_"+Oe),Te.className="GPlocationOriginPointerImg gpf-btn gpf-btn-icon-pointer fr-btn",Te.title="Pointer un lieu sur la carte",Te.setAttribute("type","button"),Te.addEventListener("click",function(ke){ke.preventDefault(),ke.stopPropagation();var Be=SelectorID.index(this.id),Ue=document.getElementsByClassName(e._addUID("GPlocationPoint")),He,We,Cn;for(He=0;He<Ue.length;He++)We=Ue[He].childNodes[0].id,Cn=SelectorID.index(We),Be!==Cn&&(document.getElementById(e._addUID("GPlocationOriginPointer_"+Cn)).checked=!1,document.getElementById(e._addUID("GPlocationOriginCoords_"+Cn)).value==="Pointer un lieu sur la carte"&&(document.getElementById(e._addUID("GPlocationOriginCoords_"+Cn)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+Cn)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Cn)).className="GPelementHidden gpf-hidden"));if(document.getElementById(e._addUID("GPlocationOriginPointer_"+Be)).checked){for(document.getElementById(e._addUID("GPlocationOriginCoords_"+Be)).value="",He=0;He<Ue.length;He++)We=Ue[He].childNodes[0].id,Cn=SelectorID.index(We),document.getElementById(e._addUID("GPlocationPoint_"+Cn)).style.cssText="";document.getElementById(e._addUID("GPlocationStageRemove_"+Be))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+Be)).className="GPlocationStageRemove  gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),document.getElementById(e._addUID("GPlocationOriginPointer_"+Be)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+Be)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Be)).className="GPelementHidden gpf-hidden"}else{for(document.getElementById(e._addUID("GPlocationOriginCoords_"+Be)).value="Pointer un lieu sur la carte",He=0;He<Ue.length;He++)We=Ue[He].childNodes[0].id,Cn=SelectorID.index(We),Be===Cn?document.getElementById(e._addUID("GPlocationPoint_"+Cn)).style.cssText="":document.getElementById(e._addUID("GPlocationPoint_"+Cn)).style.display="none";document.getElementById(e._addUID("GPlocationStageRemove_"+Be))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+Be)).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationOriginPointer_"+Be)).checked=!0,document.getElementById(e._addUID("GPlocationOrigin_"+Be)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationOriginCoords_"+Be)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Be)).disabled=!0}e.onActivateMapPointClick(ke)}),Te},_createLocationRemovePointElement:function(Oe){var e=this,Te=document.createElement("button");return Te.id=this._addUID("GPlocationStageRemove_"+Oe),Te.className="GPlocationOpen GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary",Te.title="Supprimer l'étape",Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!1),Te.setAttribute("type","button"),Te.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be);var Ue=document.getElementsByClassName(e._addUID("GPlocationPoint")),He=Ue.length-1,We=Ue[0].childNodes[0].id,Cn=Ue[He].childNodes[0].id,En=SelectorID.index(We),An=SelectorID.index(Cn);if(Oe!==En&&Oe!==An){var Sn=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationPoint_"+Sn)).className="GPflexInput GPelementHidden gpf-flex gpf-hidden",document.getElementById(e._addUID("GPlocationOrigin_"+Sn)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+Sn)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Sn)).value="",document.getElementById(e._addUID("GPlocationOriginCoords_"+Sn)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationStageAdd")).style.display="",document.getElementById(e._addUID("GPlocationPoint_"+Sn)).parentElement.previousSibling.classList.add("GPelementHidden","gpf-hidden"),e.onLocationRemovePointClick(ke)}}),Te},_createLocationAddPointElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPlocationStageAdd"),e.className="GPlocationOpen GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w",e.title="Ajouter une étape",checkDsfr()&&(e.innerText="Ajouter une étape"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener("click",function(Te){for(var ke=1,Be=0,Ue=document.getElementsByClassName(Oe._addUID("GPlocationPoint")),He=1;He<Ue.length-1;He++){var We=Ue[He].childNodes[0].id,Cn=SelectorID.index(We);document.getElementById(Oe._addUID("GPlocationPoint_"+Cn))&&(document.getElementById(Oe._addUID("GPlocationPoint_"+Cn)).className==="GPflexInput GPelementHidden gpf-flex gpf-hidden"?ke===1&&(ke=Cn):Be++)}ke<Ue.length&&(document.getElementById(Oe._addUID("GPlocationPoint_"+ke)).className="GPflexInput GPlocationStageFlexInput gpf-flex",document.getElementById(Oe._addUID("GPlocationPoint_"+ke)).parentElement.previousSibling.classList.remove("GPelementHidden","gpf-hidden")),Be===4&&(document.getElementById(Oe._addUID("GPlocationStageAdd")).style.display="none");var En=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!En),Oe.onLocationAddPointClick(Te)}),e},_createLocationAutoCompleteElement:function(Oe){var e=document.createElement("div");return e.id=this._addUID("GPlocationAutoCompleteList_"+Oe),e.className="GPlocationAutoCompleteList GPelementHidden gpf-panel gpf-hidden fr-modal",e},_createLocationAutoCompleteResultElement:function(Oe){var e=this,Te=document.createElement("div");return Te.id=this._addUID("GPlocationAutoCompleteResult_"+Oe),Te.className="GPadvancedAutoCompleteResult gpf-panel__list",Te.addEventListener?Te.addEventListener("click",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Oe)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Oe)).classList.replace("gpf-hidden","gpf-visible")},!1):Te.attachEvent&&Te.attachEvent("onclick",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Oe)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Oe)).classList.replace("gpf-hidden","gpf-visible")}),Te},_createLocationAutoCompletedLocationElement:function(Oe,e,Te){var ke=document.getElementById(this._addUID("GPlocationAutoCompleteResult_"+Oe)),Be=document.createElement("div");Be.id=this._addUID("AutoCompletedLocation_"+Te),Be.className="GPautoCompleteProposal gpf-panel__items",Be.title=GeocodeUtils.getSuggestedLocationFreeform(e),Be.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(e),ke.appendChild(Be)},GPdisplayCoordinate:function(Oe){for(var e=document.getElementsByClassName(this._addUID("GPlocationPoint")),Te=0;Te<e.length;Te++){var ke=e[Te].childNodes[0].id,Be=SelectorID.index(ke);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+Be)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+Be)).value=Oe,document.getElementById(this._addUID("GPlocationOriginCoords_"+Be)).disabled=!1;for(var Ue=0;Ue<e.length;Ue++){ke=e[Ue].childNodes[0].id;var He=SelectorID.index(ke);document.getElementById(this._addUID("GPlocationPoint_"+He)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+He))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+He)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary")}document.getElementById(this._addUID("GPlocationOriginPointer_"+Be)).checked=!1,document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm");return}}}},logger$r=LoggerByDefault.getLogger("locationselector"),LocationSelector=class Zf extends Control{constructor(e){if(e=e||{},super({element:e.element||document.createElement("div"),render:e.render,target:e.target}),!(this instanceof Zf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="LocationSelector",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}initialize(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},Helper.mergeParams(this.options,e),this._uid=this.options.tag.groupId||SelectorID.generate(),this._map=null,this._inputsContainer=null,this._buttonLabel=null,this._inputAutoComplete=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedList=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this.listenerKey=null}_initMarker(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&e.length===2?this._markerOffset=e:logger$r.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset}getCoordinate(){return this._coordinate}setCoordinate(e,Te){var ke=this.getMap(),Be=ke.getView().getProjection().getCode();Te||(Te=Be),this._setCoordinate(e,Te),e=transform$1(e,Te,Be),this._setMarker([e[0],e[1]],null,!1)}clear(){this.clearResults(),this._buttonLabel.click()}clearResults(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),unByKey(this.listenerKey)}_initContainer(){var e=this.options.tag.id,Te=this._createMainContainerElement(),ke=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);Te.appendChild(ke);var Be=this._buttonLabel=this._createLocationPointLabelElement(e,this.options.tag.label);ke.appendChild(Be);var Ue=this._inputAutoComplete=this._createLocationAutoCompleteteInputElement(e);Ue.addEventListener?Ue.addEventListener("click",()=>this.onAutoCompleteInputClick()):Ue.attachEvent&&Ue.attachEvent("onclick",()=>this.onAutoCompleteInputClick()),ke.appendChild(Ue);var He=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);ke.appendChild(He);var We=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);ke.appendChild(We);var Cn=this._inputShowPointer=this._createLocationPointerInputElement(e);if(ke.appendChild(Cn),this.options.tag.addOption){var En=this._addPointElement=this._createLocationAddPointElement();ke.appendChild(En)}if(this.options.tag.removeOption){var An=this._removePointElement=this._createLocationRemovePointElement(e);ke.appendChild(An)}var Sn=this._suggestedContainer=this._createLocationAutoCompleteElement(e),Tn=this._suggestedList=this._createLocationAutoCompleteResultElement(e);return Sn.appendChild(Tn),Te.appendChild(Sn),Te}onAutoCompleteInputClick(){this._inputAutoComplete&&this._inputAutoComplete.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var Te=e.target.value;if(Te){var ke=this.options.autocompleteOptions||{},Be=ke.onSuccess||null,Ue=ke.onFailure||null;if(this._currentLocation=Te,Te.length<3){this._clearSuggestedLocation();return}var He=this;this._requestAutoComplete({text:Te,maximumResponses:5,onSuccess:function(Cn){if(Cn){var En=Cn.suggestedLocations;He._fillAutoCompletedLocationListContainer(En),Be&&Be.call(this,Cn)}},onFailure:function(Cn){He._clearSuggestedLocation(),logger$r.log(Cn.message),Ue&&Ue.call(this,Cn)}});var We=this.getMap();We.on("click",()=>this._hideSuggestedLocation()),We.on("pointerdrag",()=>this._hideSuggestedLocation())}}onAutoCompletedResultsItemClick(e){var Te=SelectorID.index(e.target.id);if(Te){var ke=[this._suggestedLocations[Te].position.x,this._suggestedLocations[Te].position.y];this._coordinate=ke;var Be={type:this._suggestedLocations[Te].type,fields:this._suggestedLocations[Te]},Ue=GeocodeUtils.getSuggestedLocationFreeform(this._suggestedLocations[Te]);this._setLabel(Ue);var He=this.getMap().getView(),We=He.getProjection().getCode();We!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",We)),this._setPosition(ke),this._setMarker(ke,Be,this.options.displayInfo)}}onActivateMapPointClick(){var e=this.getMap();this._inputShowPointerContainer.checked?(this.clearResults(),this.listenerKey=e.on("click",Te=>this.onMouseMapClick(Te)),this._setCursor("crosshair")):(unByKey(this.listenerKey),this._setCursor())}onLocationClearPointClick(){this._setCursor(),this.clearResults()}onLocationRemovePointClick(){this._setCursor(),this.clearResults()}onLocationAddPointClick(e){logger$r.log("onRouteAddPointClick",e)}onMouseMapClick(e){var Te=e.coordinate;if(!(!e.map||!e.map.getView())){var ke=e.map.getView().getProjection();this._setCoordinate(Te,ke),this._setMarker([Te[0],Te[1]],null,!1),this.onActivateMapPointClick(e)}}_setLabel(e){this._inputAutoComplete.value=e}_setCursor(e){var Te=this.getMap(),ke=Te.getTargetElement();e?ke.style.cursor=e:ke.style.cursor=null}_setCoordinate(e,Te){this._coordinate=transform$1(e,Te,"EPSG:4326");var ke=this._coordinate[0].toFixed(4),Be=this._coordinate[1].toFixed(4),Ue=Be+" / "+ke;this.GPdisplayCoordinate(Ue)}_setPosition(e){var Te=this.getMap().getView();Te.setCenter(e)}_setMarker(e,Te,ke){var Be=this.getMap();if(this._marker!=null&&(Be.removeOverlay(this._marker),this._marker=null),e){var Ue=document.createElement("img");Ue.src=this._markerUrl,this._marker=new Overlay({position:e,offset:this._markerOffset,element:Ue,stopEvent:!1}),Be.addOverlay(this._marker),ke&&logger$r.log("marker information : ",Te)}}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._suggestedList)for(;this._suggestedList.firstChild;)this._suggestedList.removeChild(this._suggestedList.firstChild)}_hideSuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementVisible","GPelementHidden"),this._suggestedContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementHidden","GPelementVisible"),this._suggestedContainer.classList.replace("gpf-hidden","gpf-visible"))}_requestAutoComplete(e){if(logger$r.log("_requestAutoComplete()",e),!(!e||Object.keys(e).length===0)&&e.text){logger$r.log(e);var Te={};Helper.assign(Te,this.options.autocompleteOptions),Helper.assign(Te,e);var ke=this._resources.AutoCompletion||null;ke&&Array.isArray(ke)&&(Te.filterOptions||(Te.filterOptions={}),Te.filterOptions.type=ke),Te.apiKey=Te.apiKey||this.options.apiKey,typeof Te.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Te.ssl=this.options.ssl:Te.ssl=!0),logger$r.log(Te),Gp.Services.autoComplete(Te)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var Te=this._suggestedList;if(Te.childElementCount)for(;Te.firstChild;)Te.removeChild(Te.firstChild);for(var ke=0;ke<e.length;ke++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[ke],ke);this._suggestedLocations=e}}};Object.assign(LocationSelector.prototype,LocationSelectorDOM);window.ol&&window.ol.control&&(window.ol.control.LocationSelector=LocationSelector);var ExportDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e}},logger$q=LoggerByDefault.getLogger("export");class ButtonExport extends Control{constructor(e){if(e=e||{layer:null,control:null,target:null,format:"geojson",name:"export",description:"export",title:"Exporter",kind:"secondary",menu:!1,icons:{menu:"☰ ",button:""},callback:null},logger$q.trace("[constructor] Export",e),super({element:document.createElement("div"),render:e.render,target:null}),!(this instanceof ButtonExport))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="Export",this.EXPORT_ROUTE={},this.EXPORT_ISOCHRON={},this.EXPORT_PROFILE={},this.uid=e.id||SelectorID.generate(),this.extension=null,this.mimeType=null,this.container=null,this.button=null,this.buttonOptions=null,this.inputName=null,this.inputDesc=null,this.menu=null,this.menuClassHidden="GPelementHidden gpf-hidden",this.initOptions(e),this.initContainer()}render(){if(!this.options.target&&this.options.control){var e=this.options.control.getContainer(),Te=e.querySelector(".container-buttons-plugin");this.options.target=Te||e.lastChild}this.container&&this.options.target.appendChild(this.container)}initOptions(e){this.options={layer:null,control:null,target:null,download:!0,format:"geojson",name:"export",description:"export",title:"Exporter",kind:"secondary",direction:"row",menu:!1,menuOptions:{above:!1,outside:!1,labelName:!0,labelDesc:!0,selectFormat:!0},icons:{menu:"☰ ",button:"export"},callback:null};var Te=Helper.assign(this.options.icons,e.icons),ke=Helper.assign(this.options.menuOptions,e.menuOptions);Helper.assign(this.options,e),Helper.assign(this.options.icons,Te),Helper.assign(this.options.menuOptions,ke),logger$q.debug(this.options),this.options.layer,this.options.control,this.options.target;var Be=this.options.format;Be?this.setFormat(Be):this.setFormat(""),this.options.name||this.setName("export"),this.options.description||this.setDescription("export"),this.options.title||this.setTitle("Exporter"),this.options.kind||this.setKind("secondary"),this.options.menu===void 0&&this.setMenu(!1)}initContainer(){var e=this.options.title;this.options.menu&&(e=this.options.icons.menu+this.options.title);var Te=document.createElement("div");Te.id=this._addUID("GPexportContainer"),Te.className="GPexportMenuContainer gpf-export-menu-container gpf-export-menu-container-row-reverse",this.options.direction==="column"&&Te.classList.replace("gpf-export-menu-container-row-reverse","gpf-export-menu-container-column-reverse");var ke=this.stringToHTML(`
            <div class="GPexportMenuHidden gpf-accordion fr-accordion ${this.menuClassHidden}">
                <h3 class="gpf-accordion__title fr-accordion__title">
                    <button type="button" 
                        id="GPexportBtnMenuContent-${this.uid}"
                        class="gpf-accordion__btn fr-accordion__btn" 
                        aria-expanded="false" aria-controls="GPexportMenuContent-${this.uid}">options</button>
                </h3>
                <div id="GPexportMenuContent-${this.uid}"
                    class="GPexportMenuContent fr-collapse fr-mx-2w">
                    <div id="GPexportMenuName-${this.uid}" 
                        class="GPexportMenuName">
                        <label class="GPlabel gpf-label fr-label" for="GPexportMenuInputName-${this.uid}" title="Nom">Nom</label>
                        <input type="text" id="GPexportMenuInputName-${this.uid}" class="GPinput gpf-input fr-input">
                    </div>
                    <div id="GPexportMenuDesc-${this.uid}"
                        class="GPexportMenuDesc">
                        <label class="GPlabel gpf-label fr-label" for="GPexportMenuInputDesc-${this.uid}" title="Description">Description</label>
                        <input type="text" id="GPexportMenuInputDesc-${this.uid}" class="GPinput gpf-input fr-input">
                    </div>
                    <div id="GPexportMenuFormat-${this.uid}">
                        <label class="GPlabel gpf-label fr-label" title="Formats">Formats</label>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatGeojson-${this.uid}"
                                name="format" 
                                value="geojson">
                            <label class="fr-label container" for="GPmenuFormatGeojson-${this.uid}">GeoJSON
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatKml-${this.uid}"
                                name="format" 
                                value="kml">
                            <label class="fr-label container" for="GPmenuFormatKml-${this.uid}">KML
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatGpx-${this.uid}"
                                name="format" 
                                value="gpx">
                            <label class="fr-label container" for="GPmenuFormatGpx-${this.uid}">GPX
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </div>
                    <div id="GPexportMenuButtons-${this.uid}" 
                        class="GPexportMenuButtons">
                        <button 
                            type="button"
                            id="GPexportMenuButtonValidate-${this.uid}" 
                            class="GPexportMenuButtonValidate GPsubmit gpf-btn gpf-btn-icon-export-validate fr-btn fr-btn--secondary fr-m-1w">
                            Valider
                        </button>
                        <button 
                            type="button"
                            id="GPexportMenuButtonCancel-${this.uid}" 
                            class="GPexportMenuButtonIconCancel GPsubmit gpf-btn gpf-btn-icon-export-cancel fr-btn fr-btn--secondary fr-m-1w">
                            Annuler
                        </button>
                    </div>
                </div>
            </div>
        `);if(this.menu=ke.firstChild,this.menu){if(this.options.menu){var Be=this.menu.className;this.menu.className=Be.replace(this.menuClassHidden,"")}var Ue=this.options.format.toUpperCase(),He=this.menu.querySelectorAll('input[type=radio][name="format"]');for(let ni=0;ni<He.length;ni++){var We=He[ni];We.id.toUpperCase().includes(Ue)&&(We.checked=!0),We.addEventListener("change",ri=>this.onChangeRadioFormat(ri))}this.buttonOptions=this.menu.querySelector("#GPexportBtnMenuContent-"+this.uid),this.buttonOptions&&this.buttonOptions.addEventListener("click",ni=>this.onClickButtonToggleOptions(ni)),this.inputName=this.menu.querySelector("#GPexportMenuInputName-"+this.uid),this.inputDesc=this.menu.querySelector("#GPexportMenuInputDesc-"+this.uid),this.inputName.addEventListener("change",ni=>this.onChangeInputName(ni)),this.inputName.addEventListener("focusin",ni=>this.onFocusInputName(ni)),this.inputDesc.addEventListener("change",ni=>this.onChangeInputDesc(ni)),this.inputDesc.addEventListener("focusin",ni=>this.onFocusInputDesc(ni));var Cn=this.menu.querySelector("#GPexportMenuButtonValidate-"+this.uid);Cn.addEventListener("click",ni=>this.onClickButtonValidate(ni));var En=this.menu.querySelector("#GPexportMenuButtonCancel-"+this.uid);if(En.addEventListener("click",ni=>this.onClickButtonCancel(ni)),this.options.menuOptions){if(this.options.menuOptions.outside){this.menu.classList.remove("gpf-accordion","fr-accordion");var An=this.menu.querySelector("#GPexportBtnMenuContent-"+this.uid);An.classList.add("gpf-hidden");var Sn=this.menu.querySelector("#GPexportMenuContent-"+this.uid);Sn.classList.remove("fr-collapse");var Tn=this.menu.querySelector("#GPexportMenuButtons-"+this.uid);Tn.classList.add("gpf-hidden")}if(this.options.menuOptions.above&&(Te.classList.replace("gpf-export-menu-container-row-reverse","gpf-export-menu-container-row"),Te.classList.replace("gpf-export-menu-container-column-reverse","gpf-export-menu-container-column")),!this.options.menuOptions.labelName){var Ln=this.menu.querySelector("#GPexportMenuName-"+this.uid);Ln.classList.add("gpf-hidden")}if(!this.options.menuOptions.labelDesc){var Bn=this.menu.querySelector("#GPexportMenuDesc-"+this.uid);Bn.classList.add("gpf-hidden")}if(!this.options.menuOptions.selectFormat){var ei=this.menu.querySelector("#GPexportMenuFormat-"+this.uid);ei.classList.add("gpf-hidden")}}}Te.appendChild(this.menu);var ti=this.stringToHTML(`
            <button 
                type="button"
                id="${this._addUID("GPexportButton")}" 
                class="GPexportButtonExportIcon GPsubmit gpf-btn gpf-btn-icon-export-submit fr-btn fr-m-1w">
                ${e}
            </button>
        `);switch(this.button=ti.firstChild,this.button&&this.button.addEventListener("click",ni=>this.onClickButtonExport(ni)),this.options.kind){case"tertiary":this.button.classList.add("fr-btn--tertiary","gpf-btn--tertiary");break;case"secondary":this.button.classList.add("fr-btn--secondary","gpf-btn--secondary");break;case"primary":default:this.button.classList.add("fr-btn--primary","gpf-btn--primary");break}if(!this.options.icons.button)this.button.classList.remove("GPexportButtonExportIcon","gpf-btn-icon-export-submit");else switch(this.options.icons.button){case"export":break;case"save":this.button.classList.replace("GPexportButtonExportIcon","GPexportButtonSaveIcon"),this.button.classList.replace("gpf-btn-icon-export-submit","gpf-btn-icon-save-submit");break;default:this.button.classList.remove("GPexportButtonExportIcon","gpf-btn-icon-export-submit");break}Te.appendChild(this.button),this.container=Te}stringToHTML(e){var Te=function(){if(!window.DOMParser)return!1;var He=new DOMParser;try{He.parseFromString("x","text/html")}catch{return!1}return!0};if(Te()){var ke=new DOMParser,Be=ke.parseFromString(e,"text/html");return Be.body}var Ue=document.createElement("div");return Ue.innerHTML=e,Ue}isPluggableControl(){return!!(this.options.control&&typeof this.options.control.getContainer=="function"&&typeof this.options.control.getLayer=="function")}exportFeatures(e,Te,ke){var Be=null;if(!e)return logger$q.warn("Impossible to export : no layer is hosting features."),Be;if(!e.getSource()||!e.getSource().getFeatures()||!e.getSource().getFeatures().length)return logger$q.warn("Impossible to export : no features found."),Be;e.getSource().getFeatures().forEach(An=>{var Sn=An.getStyle();!Sn&&this.options.control&&typeof this.options.control.getStyle=="function"&&An.setStyle(this.options.control.getStyle())});var Ue={defaultStyle:ke,extensions:{}};Te&&(Ue.extensions={"geoportail:compute":Te}),this.options.description&&(Ue.extensions.description=this.inputDesc&&this.inputDesc.value?this.inputDesc.value:this.options.description);var He=null;switch(this.options.format.toUpperCase()){case"KML":Ue.writeStyles=!0,Ue.showPointNames=!0,He=new KML(Ue);break;case"GPX":He=new GPX(Ue);break;case"GEOJSON":He=new GeoJSON(Ue);break}if(!He)return logger$q.warn("Impossible to export : format unknown !?"),Be;var We=e.getSource().getProjection(),Cn=this.getMap();Cn&&(We=We||Cn.getView().getProjection());var En=e.getSource().getFeatures();return Be=He.writeFeatures(En,{dataProjection:"EPSG:4326",featureProjection:We||"EPSG:3857"}),Be}onClickButtonExport(e){this.isPluggableControl()||logger$q.warn("Componant not pluggable with the control !");var Te=this.options.control&&this.options.control.getLayer!==void 0?this.options.control.getLayer():this.options.layer,ke=this.options.control&&this.options.control.getData!==void 0?this.options.control.getData():{},Be=this.options.control&&this.options.control.getStyle!==void 0?this.options.control.getStyle():{},Ue=this.exportFeatures(Te,ke,Be);if(!(!Ue||Ue==="null")){if(this.dispatchEvent({type:"button:clicked",content:Ue,name:this.options.name,description:this.options.description,format:this.options.format,layer:Te}),this.options.download){var He=document.createElement("a"),We="utf-8";if(He.setAttribute("href","data:"+this.mimeType+";charset="+We+","+encodeURIComponent(Ue)),He.setAttribute("download",this.options.name+this.extension),document.createEvent){var Cn=document.createEvent("MouseEvents");Cn.initEvent("click",!0,!0),He.dispatchEvent(Cn)}else He.click()}this.options.callback&&typeof this.options.callback=="function"&&this.options.callback(Ue,Te)}}onChangeRadioFormat(e){this.setFormat(e.target.value)}onChangeInputName(e){this.setName(e.target.value)}onFocusInputName(e){var Te=this.getMap();Te&&this.options.control&&typeof this.options.control.disable=="function"&&this.options.control.disable()}onChangeInputDesc(e){this.setDescription(e.target.value)}onFocusInputDesc(e){var Te=this.getMap();Te&&this.options.control&&typeof this.options.control.disable=="function"&&this.options.control.disable()}onClickButtonToggleOptions(e){e.target.ariaExpanded=e.target.ariaExpanded!=="true";var Te=this.menu.querySelector("#"+e.target.getAttribute("aria-controls"));Te&&(e.target.ariaExpanded==="true"?(Te.classList.add("fr-collapse--expanded"),this.menu.classList.add("gpf-full-container"),this.menu.classList.add("gpf-accordion--opened"),Te.classList.remove("GPelementHidden")):(Te.classList.remove("fr-collapse--expanded"),this.menu.classList.remove("gpf-full-container"),this.menu.classList.remove("gpf-accordion--opened"),Te.classList.add("GPelementHidden")))}onClickButtonValidate(e){this.setName(this.inputName.value),this.setDescription(this.inputDesc.value),this.buttonOptions.click()}onClickButtonCancel(e){this.inputName.value="",this.inputDesc.value="",this.buttonOptions.click()}getContainer(){return this.container}setControl(e){this.options.control=e}setTarget(e){this.options.target=e}setFormat(e){switch(this.options.format=e.toUpperCase(),this.options.format){case"KML":this.extension=".kml",this.mimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this.extension=".gpx",this.mimeType="application/gpx+xml";break;case"GEOJSON":this.extension=".geojson",this.mimeType="application/geo+json";break;default:this.options.format="GEOJSON",this.extension=".geojson",this.mimeType="application/geo+json";break}}setName(e){this.options.name=e}setDescription(e){this.options.description=e}setTitle(e){this.options.title=e,this.button&&(this.button.textContent=this.options.menu?this.options.icons.menu+e:e)}setKind(e){if(this.options.kind=e,this.button)switch(this.button.classList.remove("fr-btn--tertiary","gpf-btn--tertiary"),this.button.classList.remove("fr-btn--secondary","gpf-btn--secondary"),this.options.kind){case"tertiary":this.button.classList.add("fr-btn--tertiary","gpf-btn--tertiary");break;case"secondary":this.button.classList.add("fr-btn--secondary","gpf-btn--secondary");break;case"primary":default:this.button.classList.add("fr-btn--primary","gpf-btn--primary");break}}setMenu(e){if(this.options.menu=e,this.button&&(this.button.textContent=this.options.menu?this.options.icons.menu+this.options.title:this.options.title),this.menu&&this.options.menu){var Te=this.menu.className;this.menu.className=Te.replace(this.menuClassHidden,"");var ke=this.options.format.toUpperCase(),Be=this.menu.querySelectorAll('input[type=radio][name="format"]');for(let He=0;He<Be.length;He++){var Ue=Be[He];Ue.id.toUpperCase().includes(ke)&&(Ue.checked=!0)}}}setMenuOptions(e){}setLayer(e){this.options.layer=e}setDownload(e){this.options.download=e}}Object.assign(ButtonExport.prototype,ExportDOM);Object.assign(ButtonExport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Export=ButtonExport);var logger$p=LoggerByDefault.getLogger("RouteDOM"),RouteDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GProute"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowRoutePictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowRoutePicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-route fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir le calcul d'itinéraire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowRoutePanelClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowRoutePanelClick(ke)}),e},_createRoutePanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GProutePanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createRoutePanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createDrawingButtonsPluginDiv:function(){var Oe=document.createElement("div");return Oe.className="container-buttons-plugin fr-mx-2w",Oe},_createRoutePanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Calcul d'itinéraire",e.appendChild(Te);var ke=document.createElement("button");ke.id=this._addUID("GProutePanelClose"),ke.className="GPpanelClose GProutePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Masquer le panneau",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowRoutePicto")).click()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowRoutePicto")).click()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",ke.appendChild(Be),e.appendChild(ke),e},_createRoutePanelFooterElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelFooter gpf-panel__footer fr-modal__footer",Oe},_createRoutePanelFormPointLabel:function(Oe,e=!0){var Te=document.createElement("p");Te.innerHTML=Oe;var ke=e?"":" GPelementHidden gpf-hidden";return Te.className="GProutePointLabelP gpf-label fr-label"+ke,Te},_createRoutePanelFormElement:function(){var Oe=this,e=document.createElement("form");return e.id=this._addUID("GProuteForm"),e.className="gpf-panel__content fr-modal__content",e.setAttribute("onkeypress","return event.keyCode != 13;"),e.addEventListener("submit",function(Te){logger$p.log(Te),Te.preventDefault();var ke=document.getElementsByClassName(Oe._addUID("GPlocationPoint")),Be=ke[0].childNodes[0].id,Ue=ke[ke.length-1].childNodes[0].id,He=SelectorID.index(Be),We=SelectorID.index(Ue);if(document.getElementById(Oe._addUID("GPlocationOrigin_"+He)).value===""&&document.getElementById(Oe._addUID("GPlocationOriginCoords_"+He)).value===""||document.getElementById(Oe._addUID("GPlocationOrigin_"+We)).value===""&&document.getElementById(Oe._addUID("GPlocationOriginCoords_"+We)).value==="")return!1;Oe._addRouteResultsStagesValuesElement(ke);var Cn=null;document.getElementById(Oe._addUID("GProuteComputationChoice"))&&(document.getElementById(Oe._addUID("GProuteComputationFastest"))&&document.getElementById(Oe._addUID("GProuteComputationFastest")).checked&&(Cn=document.getElementById(Oe._addUID("GProuteComputationFastest")).value),document.getElementById(Oe._addUID("GProuteComputationShortest"))&&document.getElementById(Oe._addUID("GProuteComputationShortest")).checked&&(Cn=document.getElementById(Oe._addUID("GProuteComputationShortest")).value));var En=null;document.getElementById(Oe._addUID("GProuteTransportCar"))&&document.getElementById(Oe._addUID("GProuteTransportCar")).checked&&(En=document.getElementById(Oe._addUID("GProuteTransportCar")).value),document.getElementById(Oe._addUID("GProuteTransportPedestrian"))&&document.getElementById(Oe._addUID("GProuteTransportPedestrian")).checked&&(En=document.getElementById(Oe._addUID("GProuteTransportPedestrian")).value);for(var An=[],Sn=document.getElementsByClassName("GProuteExclusionsOption"),Tn=0;Tn<Sn.length;Tn++){var Ln=Sn[Tn].htmlFor,Bn=document.getElementById(Ln);Bn.checked||An.push(Bn.value)}return Oe.onRouteComputationSubmit({computation:Cn,transport:En,exclusions:An}),!1}),e},_createRoutePanelResultsElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GProuteResultsPanel"),Oe.className="GPelementHidden gpf-hidden",Oe.appendChild(this._createRouteResultsStagesElement()),Oe.appendChild(this._createRouteResultsElement()),Oe.appendChild(this._createRouteShowResultsDetailsElement()),Oe.appendChild(this._createRouteResultsDetailsElement()),Oe},_createRouteWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GProuteCalcWaitingContainer"),Oe.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createRouteResultsStagesElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GProuteResultsStages"),Oe},_addRouteResultsStagesValuesElement:function(Oe){document.getElementById(this._addUID("GProuteResultsStages")).innerHTML="";for(var e=0;e<Oe.length;e++){var Te=Oe[e].childNodes[0].id,ke=SelectorID.index(Te);if(document.getElementById(this._addUID("GPlocationPoint_"+ke)).className==="GPflexInput GPlocationStageFlexInput gpf-flex"){var Be=document.createElement("div");Be.className="GProuteResultsStages fr-my-1w";var Ue=document.createElement("span");Ue.className="GProuteResultStageLabel",Ue.innerHTML=document.getElementById(this._addUID("GPlocationOriginLabel_"+ke)).innerHTML+" : ",Be.appendChild(Ue);var He=document.createElement("span");He.className="GProuteResultStageValue";var We=document.getElementById(this._addUID("GPlocationOriginCoords_"+ke)),Cn=We.value;Cn!==null&&Cn!==""?He.innerHTML=Cn:He.innerHTML=document.getElementById(this._addUID("GPlocationOrigin_"+ke)).value,Be.appendChild(He),He.innerHTML!==""&&document.getElementById(this._addUID("GProuteResultsStages")).appendChild(Be)}}},_createRouteResultsElement:function(){var Oe=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var Te=document.createElement("div");Te.id=this._addUID("GProuteResultsValues"),e.appendChild(Te);var ke=document.createElement("div");ke.id=this._addUID("GProuteResultsMode");var Be=document.createElement("select");Be.id=this._addUID("GProuteResultsComputationSelect"),Be.className="GPselect gpf-select fr-select",Be.addEventListener("change",function(En){Oe.onRouteModeComputationChangeAndRun(En)});for(var Ue=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],He=0;He<Ue.length;He++){var We=document.createElement("option");We.value=Ue[He].code,We.text=Ue[He].label,Be.appendChild(We)}ke.appendChild(Be),e.appendChild(ke);var Cn=document.createElement("div");return Cn.id=this._addUID("GProuteResultsNew"),Cn.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",Cn.title="Modifier le calcul",Cn.addEventListener("click",function(En){document.getElementById(Oe._addUID("GProuteResultsPanel")).className="GPelementHidden gpf-hidden",document.getElementById(Oe._addUID("GProuteForm")).className="gpf-panel__content fr-modal__content",Oe.onShowRouteResultsNewClick(En)}),e.appendChild(Cn),e},_addRouteResultsValuesElement:function(Oe,e,Te){var ke=document.getElementById(this._addUID("GProuteResultsValues"));if(ke.childElementCount)for(;ke.firstChild;)ke.removeChild(ke.firstChild);var Be=document.createElement("div");Be.className="GProuteResultsValue";var Ue=document.createElement("label");Ue.className="GProuteResultsValueLabel",Ue.innerHTML="Distance :",Be.appendChild(Ue);var He=0,We=parseInt(Oe/1e3,10);if(!We)He=Math.round(Oe)+" m";else{var Cn=Math.round(Oe);Cn=Cn/1e3,He=Cn+" km"}var En=document.createElement("div");En.id=this._addUID("GProuteResultsValueDist"),En.innerHTML=He,Be.appendChild(En),ke.appendChild(Be);var An=document.createElement("div");An.className="GProuteResultsValue";var Sn=document.createElement("label");Sn.className="GProuteResultsValueLabel",Sn.innerHTML="Durée :",An.appendChild(Sn);var Tn=document.createElement("div");return Tn.id=this._addUID("GProuteResultsValueDist"),Tn.innerHTML=Te(e),An.appendChild(Tn),ke.appendChild(An),ke},_createRouteShowResultsDetailsElement:function(){var Oe=document.createElement("div");if(Oe.className="GProuteResultsShowDetailsDiv gpf-flex fr-checkbox-group fr-m-1w",!checkDsfr()){var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",Oe.appendChild(e)}var Te=document.createElement("input");Te.id=this._addUID("GProuteResultsShowDetails"),Te.type="checkbox",Oe.appendChild(Te);var ke=document.createElement("label");if(ke.className="gpf-label fr-label",ke.htmlFor=this._addUID("GProuteResultsShowDetails"),ke.innerHTML="Afficher le détail",Oe.appendChild(ke),!checkDsfr()){var Be=document.createElement("label");Be.htmlFor=this._addUID("GProuteResultsShowDetails"),Be.innerHTML="Masquer le détail",Oe.appendChild(Be);var Ue=document.createElement("div");Ue.className="GPfakeBorder",Oe.appendChild(Ue)}return Oe},_createRouteResultsDetailsElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GProuteResultsDetails"),Oe},_addRouteResultsDetailsElement:function(Oe,e){var Te=this,ke=document.getElementById(this._addUID("GProuteResultsDetails"));if(ke.childElementCount)for(;ke.firstChild;)ke.removeChild(ke.firstChild);for(var Be=0,Ue=0,He=0;He<Oe.length;He++){var We=He+1,Cn=Oe[He],En=document.createElement("div");En.className="GProuteResultsDetailsNumber",En.innerHTML=We+".",ke.appendChild(En),Ue+=parseFloat(Cn.duration),Be+=parseFloat(Cn.distance);var An=0,Sn=parseInt(Be/1e3,10);if(!Sn)An=Math.round(Be)+" m";else{var Tn=Math.round(Be);Tn=Tn/1e3,An=Tn+" km"}var Ln=document.createElement("div");Ln.className="GProuteResultsDetailsInstruction",Ln.id=this._addUID("GProuteResultsDetailsInstruction_"+We),Ln.title="distance : "+An+" / temps : "+e(Ue),Ln.innerHTML=Cn.instruction,Ln.addEventListener("mouseover",function(Bn){Te.onRouteResultsDetailsMouseOver(Bn)}),Ln.addEventListener("mouseout",function(Bn){Te.onRouteResultsDetailsMouseOut(Bn)}),Ln.addEventListener("click",function(Bn){typeof Te.onRouteResultsDetailsClick=="function"&&Te.onRouteResultsDetailsClick(Bn)}),ke.appendChild(Ln)}return ke},_createRoutePanelFormPointElement:function(Oe,e,Te){var ke=this,Be=document.createElement("div");Be.id="GProutePoint"+Oe,Be.className=Te?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var Ue=document.createElement("label");Ue.id="GProuteOriginLabel"+Oe,Ue.htmlFor="GProuteOrigin"+Oe,Ue.innerHTML=e,Ue.addEventListener("click",function(){var An=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+An).value="";for(var Sn=1;Sn<8;Sn++)document.getElementById("GProutePoint"+Sn).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+An).checked=!1,document.getElementById("GProuteOrigin"+An).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+An).className="GPelementHidden gpf-hidden"}),Be.appendChild(Ue);var He=document.createElement("input");He.id="GProuteOrigin"+Oe,He.className="GPelementVisible gpf-visible",He.type="text",He.placeholder="Saisir une adresse, un lieu...",He.addEventListener("keyup",function(An){var Sn=An.which||An.keyCode;if(!(Sn===13||Sn===10)){var Tn=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+Tn).value.length>2?document.getElementById("GProuteAutoCompleteList"+Tn).style.display="block":document.getElementById("GProuteAutoCompleteList"+Tn).style.display="none",ke.onAutoCompleteSearchText(An)}}),He.addEventListener("blur",function(){var An=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+An).style.display="none"}),Be.appendChild(He);var We=document.createElement("input");We.id="GProuteOriginCoords"+Oe,We.className="GPelementHidden gpf-hidden",We.type="text",We.disabled=!0,Be.appendChild(We);var Cn=document.createElement("input");Cn.id="GProuteOriginPointer"+Oe,Cn.type="checkbox",Be.appendChild(Cn);var En=document.createElement("label");return En.id="GProuteOriginPointerImg"+Oe,En.htmlFor="GProuteOriginPointer"+Oe,En.className="GProuteOriginPointerImg",En.title="Pointer un lieu sur la carte",En.addEventListener("click",function(An){An.preventDefault(),An.stopPropagation();var Sn=this.id.charAt(this.id.length-1),Tn;for(Tn=1;Tn<8;Tn++)Sn!==Tn&&(document.getElementById("GProuteOriginPointer"+Tn).checked=!1,document.getElementById("GProuteOriginCoords"+Tn).value==="Pointer un lieu sur la carte"&&(document.getElementById("GProuteOriginCoords"+Tn).value="",document.getElementById("GProuteOrigin"+Tn).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Tn).className="GPelementHidden gpf-hidden"));if(document.getElementById("GProuteOriginPointer"+Sn).checked){for(document.getElementById("GProuteOriginCoords"+Sn).value="",Tn=1;Tn<8;Tn++)document.getElementById("GProutePoint"+Tn).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+Sn).checked=!1,document.getElementById("GProuteOrigin"+Sn).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Sn).className="GPelementHidden gpf-hidden"}else{for(document.getElementById("GProuteOriginCoords"+Sn).value="Pointer un lieu sur la carte",Tn=1;Tn<8;Tn++)Sn===Tn?document.getElementById("GProutePoint"+Tn).style.display="flex":document.getElementById("GProutePoint"+Tn).style.display="none";document.getElementById("GProuteForm").className="GProuteFormMini gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+Sn).checked=!0,document.getElementById("GProuteOrigin"+Sn).className="GPelementHidden gpf-hidden",document.getElementById("GProuteOriginCoords"+Sn).className="GPelementVisible gpf-visible"}ke.onRouteMapPointClick(An)}),Be.appendChild(En),Be},_createRoutePanelFormRemoveStageElement:function(Oe){var e=this,Te=document.createElement("div");return Te.id="GProuteStageRemove"+Oe,Te.className="GProuteStageRemove",Te.title="Supprimer l'étape",Oe!==1&&Oe!==7&&Te.addEventListener("click",function(ke){var Be=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+Be).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+Be).value="",document.getElementById("GProuteOrigin"+Be).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Be).value="",document.getElementById("GProuteOriginCoords"+Be).className="GPelementHidden gpf-hidden",document.getElementById("GProuteStageAdd").style.display="",e.onRouteRemovePointClick(ke)}),Te},_createRoutePanelFormAddStageElement:function(){var Oe=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une étape",e.addEventListener("click",function(Te){for(var ke=1,Be=0,Ue=2;Ue<7;Ue++)document.getElementById("GProutePoint"+Ue).className==="GPflexInput GProuteStageFlexInputHidden"?ke===1&&(ke=Ue):Be++;ke<7&&(document.getElementById("GProutePoint"+ke).className="GPflexInput GProuteStageFlexInput"),Be===4&&(document.getElementById("GProuteStageAdd").style.display="none"),Oe.onRouteAddPointClick(Te)}),e},_createRoutePanelFormAutoCompleteListElement:function(Oe){var e=this,Te=document.createElement("div");return Te.id="GProuteAutoCompleteList"+Oe,Te.className="GPadvancedAutoCompleteList",Te.addEventListener?Te.addEventListener("click",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById("GProuteAutoCompleteList"+Oe).style.display="none"},!1):Te.attachEvent&&Te.attachEvent("onclick",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById("GProuteAutoCompleteList"+Oe).style.display="none"}),Te},_createRouteAutoCompletedLocationElement:function(Oe,e,Te){var ke=document.getElementById("GProuteAutoCompleteList"+e),Be=document.createElement("div");Be.id="AutoCompletedLocation"+Te,Be.className="GPautoCompleteProposal",Be.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(Oe),ke.appendChild(Be)},_createRoutePanelFormModeChoiceTransportElement:function(Oe){var e=this,Te=document.createElement("div");Te.id=this._addUID("GProuteTransportChoice");var ke=document.createElement("label");ke.className="GProuteModeLabel gpf-label fr-label",ke.innerHTML="Choisir un mode de déplacement",Te.appendChild(ke);var Be=document.createElement("div");Be.className="gpf-radio-btn-group";for(var Ue=0;Ue<Oe.length;Ue++){var He=Oe[Ue],We=document.createElement("div");if(We.className="GProuteTransportChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w",He==="Voiture"){var Cn=document.createElement("input");Cn.id=this._addUID("GProuteTransportCar"),Cn.type="radio",Cn.name="GProuteTransport",Cn.value="Voiture",Ue===0&&(Cn.checked=!0),Cn.addEventListener?Cn.addEventListener("change",function(Tn){e.onRouteModeTransportChange(Tn)}):Cn.attachEvent&&Cn.attachEvent("onchange",function(Tn){e.onRouteModeTransportChange(Tn)}),We.appendChild(Cn);var En=document.createElement("label");En.className="GProuteTransportImg gpf-label fr-label",En.htmlFor=this._addUID("GProuteTransportCar"),En.title="Voiture",En.innerHTML="Voiture",We.appendChild(En)}if(He==="Pieton"){var An=document.createElement("input");An.id=this._addUID("GProuteTransportPedestrian"),An.type="radio",An.name="GProuteTransport",An.value="Pieton",Ue===0&&(An.checked=!0),An.addEventListener?An.addEventListener("change",function(Tn){e.onRouteModeTransportChange(Tn)}):An.attachEvent&&An.attachEvent("onchange",function(Tn){e.onRouteModeTransportChange(Tn)}),We.appendChild(An);var Sn=document.createElement("label");Sn.className="GProuteTransportImg gpf-label fr-label",Sn.htmlFor=this._addUID("GProuteTransportPedestrian"),Sn.title="Piéton",Sn.innerHTML="Piéton",We.appendChild(Sn)}Be.appendChild(We)}return Te.appendChild(Be),Te},_createRoutePanelFormModeChoiceComputeElement:function(){var Oe=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice"),e.className="fr-mt-2w";var Te=document.createElement("label");Te.className="GProuteComputationLabel gpf-label fr-label",Te.innerHTML="Mode de calcul",e.appendChild(Te);var ke=document.createElement("div");ke.className="gpf-radio-btn-group";var Be=document.createElement("div");Be.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Ue=document.createElement("input");Ue.id=this._addUID("GProuteComputationFastest"),Ue.type="radio",Ue.name="GProuteComputation",Ue.value="fastest",Ue.checked=!0,Ue.addEventListener?Ue.addEventListener("change",function(An){Oe.onRouteModeComputationChange(An)}):Ue.attachEvent&&Ue.attachEvent("onchange",function(An){Oe.onRouteModeComputationChange(An)}),Be.appendChild(Ue);var He=document.createElement("label");He.className="gpf-label fr-label",He.htmlFor=this._addUID("GProuteComputationFastest"),He.title="Plus rapide",He.innerHTML="Plus rapide",Be.appendChild(He),ke.appendChild(Be);var We=document.createElement("div");We.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Cn=document.createElement("input");Cn.id=this._addUID("GProuteComputationShortest"),Cn.type="radio",Cn.name="GProuteComputation",Cn.value="shortest",Cn.addEventListener?Cn.addEventListener("change",function(An){Oe.onRouteModeComputationChange(An)}):Cn.attachEvent&&Cn.attachEvent("onchange",function(An){Oe.onRouteModeComputationChange(An)}),We.appendChild(Cn);var En=document.createElement("label");return En.className="gpf-label fr-label",En.htmlFor=this._addUID("GProuteComputationShortest"),En.title="Plus court",En.innerHTML="Plus court",We.appendChild(En),ke.appendChild(We),e.appendChild(ke),e},_createShowRouteExclusionsPictoElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPshowRouteExclusionsPicto");var Te="";return checkDsfr()&&(Te="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto ${Te} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(ke){ke.preventDefault();var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowRouteExclusionsClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){ke.preventDefault();var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowRouteExclusionsClick(ke)}),e},_createRoutePanelFormExclusionsElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GProuteExclusions"),Oe.className="fr-mt-2w";var e=document.createElement("label");return e.className="GProuteExclusionsLabel fr-label",e.innerHTML="Passages autorisés",Oe.appendChild(e),Oe},_createRoutePanelFormExclusionOptionsElement:function(Oe){var e=this,Te=document.createElement("div");Te.className="GProuteExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Be=Oe[ke];switch(ke){case"toll":var Ue=document.createElement("input");Ue.id=this._addUID("GProuteExclusionsToll"),Ue.type="checkbox",Ue.value="Toll",Ue.name="Peage",Ue.checked=!Be,Ue.addEventListener?Ue.addEventListener("change",function(Sn){e.onRouteExclusionsChange(Sn)}):Ue.attachEvent&&Ue.attachEvent("onchange",function(Sn){e.onRouteExclusionsChange(Sn)}),Te.appendChild(Ue);var He=document.createElement("label");He.className="GProuteExclusionsOption",He.htmlFor=this._addUID("GProuteExclusionsToll"),He.innerHTML="Péages",Te.appendChild(He);break;case"tunnel":var We=document.createElement("input");We.id=this._addUID("GProuteExclusionsTunnel"),We.type="checkbox",We.value="Tunnel",We.name="Tunnel",We.checked=!Be,We.addEventListener?We.addEventListener("change",function(Sn){e.onRouteExclusionsChange(Sn)}):We.attachEvent&&We.attachEvent("onchange",function(Sn){e.onRouteExclusionsChange(Sn)}),Te.appendChild(We);var Cn=document.createElement("label");Cn.className="GProuteExclusionsOption",Cn.htmlFor=this._addUID("GProuteExclusionsTunnel"),Cn.innerHTML="Tunnels",Te.appendChild(Cn);break;case"bridge":var En=document.createElement("input");En.id=this._addUID("GProuteExclusionsBridge"),En.type="checkbox",En.value="Bridge",En.name="Ponts",En.checked=!Be,En.addEventListener?En.addEventListener("change",function(Sn){e.onRouteExclusionsChange(Sn)}):En.attachEvent&&En.attachEvent("onchange",function(Sn){e.onRouteExclusionsChange(Sn)}),Te.appendChild(En);var An=document.createElement("label");An.className="GProuteExclusionsOption",An.htmlFor=this._addUID("GProuteExclusionsBridge"),An.innerHTML="Ponts",Te.appendChild(An);break}}return Te},_createRouteSubmitFormElement:function(){var Oe=document.createElement("input");return Oe.id=this._addUID("GProuteSubmit"),Oe.className="GPsubmit gpf-btn gpf-btn-icon-submit fr-btn",Oe.type="submit",Oe.value="Calculer l'itinéraire",Oe},_createRouteFormResetElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GProuteReset"),e.title="Réinitialiser les paramètres",e.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(Te){var ke=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!ke),Oe.onRouteResetClick(Te)}),e}},logger$o=LoggerByDefault.getLogger("route"),Route=class Jf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Jf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Route",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.element=this._container,this.options.export){var Te=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(Te),this.export.render();var ke=this;this.export.on("button:clicked",Be=>{ke.dispatchEvent({type:"export:compute",content:Be.content})})}this.draggable&&Draggable.dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,e.getTargetElement()),this.collapsed||this._showRouteButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$o.log("[ERROR] Route:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():this._showRouteButton.click(),this.collapsed=e)}getLayer(){return this._geojsonSections}setLayer(e){if(!e){this._geojsonSections=null;return}if(!(e instanceof VectorLayer)){logger$o.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonSections=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(Te){logger$o.log("no valid geojson given :"+Te.message)}}getData(){var e=[];for(let ke=0;ke<this._currentPoints.length;ke++){const Be=this._currentPoints[ke];e.push(Be.getCoordinate())}var Te={type:"route",points:e,transport:this._currentTransport,exclusions:this._currentExclusions,computation:this._currentComputation,results:{}};return Helper.assign(Te.results,this._currentRouteInformations),Te}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;for(var Te=0;Te<e.points.length;Te++){const We=e.points[Te];We&&this._currentPoints[Te].setCoordinate(We,"EPSG:4326")}for(var ke=0;ke<this._currentPoints.length;ke++){var Be=this._currentPoints[ke];if(Be.getCoordinate()){var Ue=ke+1+"-"+this._uid,He=Be.getCoordinate()[1].toFixed(4)+" / "+Be.getCoordinate()[0].toFixed(4);document.getElementById("GPlocationOriginCoords_"+Ue).value=He,document.getElementById("GPlocationOrigin_"+Ue).value=He,ke>0&&ke<6&&(document.getElementById("GPlocationPoint_"+Ue).className="GPflexInput GPelementHidden gpf-flex gpf-hidden ")}}this._currentRouteInformations=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}init(){for(let Ln=0;Ln<this._currentPoints.length;Ln++){const Bn=this._currentPoints[Ln];var e=Ln+1,Te=Bn.getCoordinate();if(Te){var ke=document.getElementById("GPlocationOrigin_"+e+"-"+this._uid);ke.value=Te[1].toFixed(4)+" / "+Te[0].toFixed(4),Ln>0&&Ln<6&&(document.getElementById("GPlocationPoint_"+e+"-"+this._uid).className="GPflexInput GPlocationStageFlexInput gpf-flex")}}var Be=document.getElementsByClassName("GPlocationPoint-"+this._uid);this._addRouteResultsStagesValuesElement(Be);var Ue;this._currentTransport==="Pieton"?(Ue=document.getElementById("GProuteTransportPedestrian-"+this._uid),Ue&&(Ue.checked="true")):(Ue=document.getElementById("GProuteTransportCar-"+this._uid),Ue&&(Ue.checked="true"));var He=document.getElementById("GProuteComputationSelect-"+this._uid);He&&(He.value=this._currentComputation);var We=document.getElementById("GProuteExclusionsToll-"+this._uid);We&&(this._currentExclusions.indexOf("toll")!==-1?We.checked=!1:We.checked=!0);var Cn=document.getElementById("GProuteExclusionsTunnel-"+this._uid);Cn&&(this._currentExclusions.indexOf("tunnel")!==-1?Cn.checked=!1:Cn.checked=!0);var En=document.getElementById("GProuteExclusionsBridge-"+this._uid);En&&(this._currentExclusions.indexOf("bridge")!==-1?En.checked=!1:En.checked=!0);var An=this._currentRouteInformations.totalDistance,Sn=this._currentRouteInformations.totalTime,Tn=this._simplifiedInstructions(this._currentRouteInformations.routeInstructions);Tn&&this._fillRouteResultsDetailsContainer(An,Sn,Tn),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}clean(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null;for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations(),this._clearRouteInputOptions(),this._clearRouteResultsDetails(),this.setLayer(),this._formRouteContainer.className="gpf-panel__content fr-modal__content",this._resultsRouteContainer.className="GPelementHidden gpf-hidden"}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"Itinéraire",description:"Itinéraire basé sur un graphe"}},Helper.assign(this.options,e);var Te={departure:{url:Marker.red,offset:Marker.defaultOffset},stages:{url:Marker.lightOrange,offset:Marker.defaultOffset},arrival:{url:Marker.darkOrange,offset:Marker.defaultOffset}};this.options.markersOpts=Helper.assign(Te,e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._showRouteButton=null,this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._geojsonObject=null,this.export=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this.listenerKey=null}_checkInputOptions(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var Te=0;Te<e.graphs.length;Te++)typeof e.graphs[Te]=="string"?(e.graphs[Te].toLowerCase()==="pieton"&&(e.graphs[Te]="Pieton"),e.graphs[Te].toLowerCase()==="voiture"&&(e.graphs[Te]="Voiture")):(logger$o.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[Te]=null);else logger$o.warn("'graphs' parameter should be an array"),e.graphs=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initContainer(e){var Te=this._container;if(Te.childElementCount>0)return Te;var ke=this._showRouteButton=this._createShowRoutePictoElement();Te.appendChild(ke);var Be=this._panelRouteContainer=this._createRoutePanelElement(),Ue=this._createRoutePanelDivElement();Be.appendChild(Ue);var He=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();Ue.appendChild(He);var We=this._formRouteContainer=this._createRoutePanelFormElement();We.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs));for(var Cn=this._createRoutePanelFormPointsElement(e),En=0;En<Cn.length;En++)We.appendChild(Cn[En]);We.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),We.appendChild(this._showRouteExclusionsElement);var An=this._createRoutePanelFormExclusionsElement();An.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),We.appendChild(An);var Sn=this._createRoutePanelFooterElement();if(We.appendChild(Sn),!checkDsfr()){var Tn=this._createRouteFormResetElement();Sn.appendChild(Tn)}var Ln=this._createRouteSubmitFormElement();Sn.appendChild(Ln),Ue.appendChild(We);var Bn=this._resultsRouteContainer=this._createRoutePanelResultsElement();Ue.appendChild(Bn);var ei=this._createDrawingButtonsPluginDiv();Ue.appendChild(ei);var ti=this._waitingContainer=this._createRouteWaitingElement();return Ue.appendChild(ti),Te.appendChild(Be),Te.addEventListener&&Te.addEventListener("click",ni=>this._hideRouteSuggestedLocations(ni)),Te}_initTransport(){this._currentTransport="Pieton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var Te=this.options.routeOptions;Te.graph&&(this._currentTransport=Te.graph)}_initComputation(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var Te in e)e.hasOwnProperty(Te)&&e[Te]&&this._currentExclusions.push(Te);var ke=this.options.routeOptions;Array.isArray(ke.exclusions)&&(this._currentExclusions=ke.exclusions)}_initPopupDiv(){var e=this,Te=document.createElement("div");Te.className="gp-feature-info-div";var ke=document.createElement("button");return ke.className="gp-styling-button closer",ke.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",Te.appendChild(this._popupContent),Te.appendChild(ke),Te}_createRoutePanelFormPointsElement(e){var Te=[],ke=1,Be=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:ke,label:"Départ",groupId:this._uid,markerOpts:this.options.markersOpts.departure,display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(Be.setMap(e),this._addFormPointsEventListeners(Be),Te.push(this._createRoutePanelFormPointLabel("Départ")),Te.push(Be._container),this._currentPoints.push(Be),ke=2;ke<7;ke++){var Ue=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:ke,label:"Etape "+(ke-1),groupId:this._uid,markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});Ue.setMap(e),this._addFormPointsEventListeners(Ue),Te.push(this._createRoutePanelFormPointLabel("Étape",!1)),Te.push(Ue._container),this._currentPoints.push(Ue)}var He=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:ke,label:"Arrivée",groupId:this._uid,markerOpts:this.options.markersOpts.arrival,display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return He.setMap(e),this._addFormPointsEventListeners(He),Te.push(this._createRoutePanelFormPointLabel("Arrivée")),Te.push(He._container),this._currentPoints.push(He),Te}_addFormPointsEventListeners(e){e&&(e._buttonLabel.addEventListener?(e._buttonLabel.addEventListener("click",Te=>this.onRouteOriginLabelClick(Te)),e._inputShowPointer.addEventListener("click",Te=>this.onRouteOriginPointerClick(Te,e)),e._removePointElement&&e._removePointElement.addEventListener("click",Te=>{logger$o.trace("click on _removePointElement",Te)}),e._addPointElement&&e._addPointElement.addEventListener("click",Te=>{logger$o.trace("click on _addPointElement",Te)})):e._buttonLabel.attachEvent&&(e._buttonLabel.attachEvent("onclick",Te=>this.onRouteOriginLabelClick(Te)),e._inputShowPointer.attachEvent("onclick",Te=>this.onRouteOriginPointerClick(Te,e)),e._removePointElement&&e._removePointElement.attachEvent("onclick",Te=>{}),e._addPointElement&&e._addPointElement.attachEvent("onclick",Te=>{})))}onRouteComputationSubmit(e){logger$o.log("onRouteComputationSubmit",e);var Te=this._currentPoints,ke;if(Te[0]&&Te[0].getCoordinate){var Be=Te[0].getCoordinate();ke={x:Be[0],y:Be[1]},logger$o.log("start",ke)}var Ue,He=Te[Te.length-1];if(He&&He.getCoordinate){var We=He.getCoordinate();Ue={x:We[0],y:We[1]},logger$o.log("end",Ue)}for(var Cn=[],En=1;En<Te.length-1;En++)if(Te[En]&&Te[En].getCoordinate){var An=Te[En].getCoordinate();if(An){var Sn={x:An[0],y:An[1]};logger$o.log("step",Sn),Cn.push(Sn)}}this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var Tn=this.options.routeOptions,Ln;Tn.resource?Ln=Tn.resource:this._currentComputation==="fastest"&&this._currentTransport==="Pieton"&&(Ln="bdtopo-valhalla");var Bn=Tn.protocol||"XHR",ei=Tn.timeOut||0;Bn==="JSONP"&&ei===0&&(ei=15e3);var ti=Tn.onFailure!==null&&typeof Tn.onFailure=="function",ni=Tn.onSuccess!==null&&typeof Tn.onSuccess=="function",ri=this;this._requestRouting({startPoint:ke,endPoint:Ue,viaPoints:Cn,graph:Tn.graph||this._currentTransport,routePreference:Tn.routePreference||this._currentComputation,exclusions:Tn.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:ei,protocol:Bn,resource:Ln,onSuccess:function(si){logger$o.log(si),si&&ri._fillRouteResultsDetails(si),ni&&Tn.onSuccess.call(ri,si)},onFailure:function(si){ri._hideWaitingContainer(),ri._clearRouteResultsDetails(),logger$o.log(si.message),ti&&Tn.onFailure.call(ri,si)}})}onRouteOriginLabelClick(){this._formRouteContainer.className="gpf-panel__content gpf-mobile-form fr-modal__content",unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}onRouteOriginPointerClick(e,Te){var ke=this.getMap();Te._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini gpf-panel__content fr-modal__content",e.target.parentElement.parentElement.classList.add("selected"),this.listenerKey=ke.on("click",()=>{e.target.parentElement.parentElement.classList.remove("selected"),this._formRouteContainer.className==="GProuteFormMini gpf-panel__content fr-modal__content"&&(this._formRouteContainer.className="gpf-panel__content fr-modal__content"),unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",unByKey(this.listenerKey),this.dispatchEvent("route:drawend"))}onShowRoutePanelClick(e){var Te=this._showRouteButton.ariaPressed;Te==="true"&&this.onPanelOpen();var ke=this.getMap();Interactions.unset(ke),!this._geojsonSections&&!this._waiting&&this._clear(),this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onRouteModeComputationChange(e){var Te=e.target.value;Te&&(logger$o.log(Te),this._currentComputation=Te)}onRouteModeComputationChangeAndRun(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})}onRouteModeTransportChange(e){var Te=e.target.value;Te&&(this._currentTransport=Te)}onShowRouteExclusionsClick(e){logger$o.log("onShowRouteExclusionsClick",e)}onRouteExclusionsChange(e){var Te=e.target.value,ke=e.target.checked;if(!(!Te||typeof Te!="string")){Te=Te.toLowerCase();for(var Be=!1,Ue=null,He=0;He<this._currentExclusions.length;He++)this._currentExclusions[He]===Te&&(Ue=He,Be=!0);!Be&&!ke&&this._currentExclusions.push(Te),Be&&ke&&this._currentExclusions.splice(Ue,1)}}onRouteResetClick(){for(var e=this._currentPoints,Te=0;Te<e.length;Te++)e[Te].clear();this._clear(),this._clearRouteInputOptions()}onShowRouteResultsNewClick(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.dispatchEvent("route:newresults")}onRouteResultsDetailsMouseOver(e){var Te=e.target.id,ke=Te.substring(Te.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var Be=this._geojsonSections.getSource().getFeatureById(parseInt(ke,10));Be.setStyle(this._selectedFeatureStyle)}}onRouteResultsDetailsMouseOut(e){var Te=e.target.id,ke=Te.substring(Te.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var Be=this._geojsonSections.getSource().getFeatureById(parseInt(ke,10));Be.setStyle(null)}}_requestRouting(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.startPoint&&e.endPoint&&(e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey,typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$o.log(e),this._displayWaitingContainer(),Gp.Services.route(e))}_fillRouteResultsDetails(e){var Te=e.totalDistance,ke=e.totalTime,Be=this._simplifiedInstructions(e.routeInstructions);Be&&this._fillRouteResultsDetailsContainer(Te,ke,Be);var Ue=e.routeGeometry;Ue&&this._fillRouteResultsDetailsGeometry(Ue,this._defaultFeatureStyle),Be&&Be[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(Be,this._defaultFeatureStyle);var He=e.bbox;if(He){var We=this.getMap(),Cn=[He.left,He.bottom,He.right,He.top],En=We.getView().getProjection().getCode();En!=="EPSG:4326"&&(Cn=transformExtent(Cn,"EPSG:4326",En)),We.getView().fit(Cn,We.getSize())}this._currentRouteInformations=e,this.dispatchEvent({type:"route:compute"}),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}_fillRouteResultsDetailsContainer(e,Te,ke){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,Te,MathUtils.convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(ke,MathUtils.convertSecondsToTime)}_fillRouteResultsDetailsGeometry(e,Te){this._clearRouteResultsGeometry();var ke=this.getMap();if(e){var Be={type:"FeatureCollection",features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e}]},Ue=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:Te}),He=Ue.readFeatures(Be,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new VectorLayer({source:new VectorSource({features:He}),style:Te,title:"Mon Itinéraire"}),ke.addLayer(this._geojsonRoute)}}_fillRouteResultsDetailsFeatureGeometry(e,Te){this._clearRouteResultsFeatureGeometry();var ke=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]};for(var Be=0;Be<e.length;Be++){for(var Ue=e[Be],He=Be+1,We=Ue.geometry.coordinates,Cn=0;Cn<We.length;Cn++)typeof We[Cn][0]=="string"&&(We[Cn][0]=parseFloat(We[Cn][0]),We[Cn][1]=parseFloat(We[Cn][1]));this._geojsonObject.features.push({type:"Feature",geometry:Ue.geometry,properties:{popupContent:"("+He+") distance : "+MathUtils.convertDistance(Ue.distance)+" / temps : "+MathUtils.convertSecondsToTime(Ue.duration)},id:He})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[0].getCoordinate()},properties:{description:"Point de départ","marker-symbol":this.options.markersOpts.departure.url}});for(var En=1;En<this._currentPoints.length-1;En++)if(this._currentPoints[En]&&this._currentPoints[En].getCoordinate){var An=this._currentPoints[En].getCoordinate();An&&this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:An},properties:{description:"Point d'étape","marker-symbol":this.options.markersOpts.stages.url}})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[this._currentPoints.length-1].getCoordinate()},properties:{description:"Point d'arrivée","marker-symbol":this.options.markersOpts.arrival.url}});var Sn=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:Te}),Tn=this.getMap().getView().getProjection().getCode(),Ln=Sn.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:Tn});this._geojsonSections=new VectorLayer({source:new VectorSource({features:Ln}),style:Te,opacity:.9,title:"Mon Itinéraire"});var Bn;this._currentTransport==="Pieton"?(Bn="piéton",this._geojsonSections.gpResultLayerId="compute:Pieton$OGC:OPENLS;Itineraire"):(Bn="voiture",this._geojsonSections.gpResultLayerId="compute:Voiture$OGC:OPENLS;Itineraire"),ke.addLayer(this._geojsonSections),ke.getControls().forEach(ei=>{if(ei instanceof LayerSwitcher){var ti=this._geojsonSections.gpLayerId;ei._layers[ti].title===ti&&ei.addLayer(this._geojsonSections,{title:this.options.layerDescription.title+" ("+Bn+")",description:this.options.layerDescription.description})}},this),this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",ei=>this._onResultsFeatureMouseOver(ei)),ke.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",ei=>this._onResultsFeatureSelect(ei)),ke.addInteraction(this._resultsSelectInteraction)}_onResultsFeatureMouseOver(e){if(e.selected.length!==0){var Te=e.selected[0],ke=document.getElementById("GProuteResultsDetailsInstruction_"+Te.getId()+"-"+this._uid);ke&&ke.classList&&ke.classList.add("GProuteResultsDetailsInstructionHighlight")}if(e.deselected.length!==0){var Be=e.deselected[0],Ue=document.getElementById("GProuteResultsDetailsInstruction_"+Be.getId()+"-"+this._uid);Ue&&Ue.classList&&Ue.classList.remove("GProuteResultsDetailsInstructionHighlight")}}_onResultsFeatureSelect(e){var Te=this.getMap();if(e.selected.length!==0){var ke=e.selected[0];this._popupContent.innerHTML=ke.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),Te.addOverlay(this._popupOverlay))}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}_clear(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()}_clearRouteInputOptions(){this._initTransport(),this._initComputation(),this._initExclusions();var e;this._currentTransport==="Pieton"?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid),e&&(e.checked="true")):(e=document.getElementById("GProuteTransportCar-"+this._uid),e&&(e.checked="true"));var Te=document.getElementById("GProuteComputationSelect-"+this._uid);Te&&(Te.value=this._currentComputation);var ke=document.getElementById("GProuteExclusionsToll-"+this._uid);ke&&(this._currentExclusions.indexOf("toll")!==-1?ke.checked=!1:ke.checked=!0);var Be=document.getElementById("GProuteExclusionsTunnel-"+this._uid);Be&&(this._currentExclusions.indexOf("tunnel")!==-1?Be.checked=!1:Be.checked=!0);var Ue=document.getElementById("GProuteExclusionsBridge-"+this._uid);Ue&&(this._currentExclusions.indexOf("bridge")!==-1?Ue.checked=!1:Ue.checked=!0)}_removeRouteStepLocations(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(e.length!==0){for(var Te=[],ke=0;ke<e.length;ke++)e[ke].id.indexOf(this._uid)!==-1&&Te.push(e[ke]);for(var Be=1;Be<Te.length-1;Be++){var Ue=Te[Be].classList;if(Ue.length!==0)for(var He=0;He<Ue.length;He++)Ue[He]==="GPlocationStageFlexInput"&&document.getElementById(this._addUID("GPlocationStageRemove_"+(Be+1))).click()}}}_clearRouteResultsDetails(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var Te=this._resultsRouteValuesContainer;if(Te.childElementCount)for(;Te.firstChild;)Te.removeChild(Te.firstChild)}}_clearRouteResultsGeometry(){var e=this.getMap();this._geojsonRoute!=null&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)}_clearRouteResultsFeatureGeometry(){var e=this.getMap();this._geojsonSections!=null&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null,this._geojsonObject=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_hideRouteSuggestedLocations(e){if(e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1)for(var Te=parseInt(e.target.id.split("_")[1][0],10)-1,ke=0;ke<this._currentPoints.length;ke++)ke!==parseInt(Te,10)&&this._currentPoints[ke]._hideSuggestedLocation();else for(var Be=0;Be<this._currentPoints.length;Be++)this._currentPoints[Be]._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var Te=this;this._timer=setTimeout(function(){Te._waiting===!0?Te._hideWaitingContainer():Te._timer&&clearTimeout(Te._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}_simplifiedInstructions(e){var Te=[],ke=e[0];e.length===1&&Te.push(ke);for(var Be=1;Be<e.length;Be++){var Ue=e[Be];if(Ue.instruction===ke.instruction){ke.distance=(parseFloat(Ue.distance)+parseFloat(ke.distance)).toString(),ke.duration=(parseFloat(Ue.duration)+parseFloat(ke.duration)).toString();for(var He=1;He<Ue.geometry.coordinates.length;He++)ke.geometry.coordinates.push(Ue.geometry.coordinates[He])}else Te.push(ke),ke=Ue,Be===e.length-1&&(Te.push(Ue),ke=null)}return logger$o.log(Te),Te}};Object.assign(Route.prototype,RouteDOM);Object.assign(Route.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Route=Route);var IsoDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPisochron"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowIsoPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowIsochronPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-isocurve fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer une isochrone"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowIsoPanelClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowIsoPanelClick(ke)}),e},_createIsoPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPisochronPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createIsoPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createDrawingButtonsPluginDiv:function(){var Oe=document.createElement("div");return Oe.className="container-buttons-plugin fr-mx-2w",Oe},_createIsoPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Calcul d'isochrone",e.appendChild(Te);var ke=document.createElement("button");ke.id=this._addUID("GPisochronPanelClose"),ke.className="GPpanelClose GPisochronPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowIsochronPicto")).click()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowIsochronPicto")).click()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",ke.appendChild(Be),e.appendChild(ke),e},_createIsoPanelFormElement:function(){var Oe=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.className="GPform gpf-panel__content gpf-mobile-form fr-modal__content",e.addEventListener("submit",function(Te){return Te.preventDefault(),Oe.onIsoComputationSubmit(Te),!1}),e},_createIsoPanelResultsElement:function(){var Oe=this,e=document.createElement("div");e.id=this._addUID("GPisoResultsPanel"),e.className="GPelementHidden gpf-hidden";var Te=document.createElement("div");return Te.id=this._addUID("GPisoResultsNew"),Te.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary fr-m-2w",Te.title="Modifier le calcul",Te.addEventListener("click",function(ke){document.getElementById(Oe._addUID("GPisoResultsPanel")).className="GPelementHidden gpf-hidden",document.getElementById(Oe._addUID("GPisochronForm")).className="gpf-panel__content fr-modal__content",Oe.onShowIsoResultsNewClick(ke)}),e.appendChild(Te),e},_addIsoResultsValuesElement:function(Oe,e,Te){var ke=Oe.distance,Be=Oe.time,Ue=Oe.location,He=e.graph,We=e.method,Cn=e.exclusions,En=document.getElementById(this._addUID("GPisoResultsPanel"));En.childElementCount&&En.firstChild.id===this._addUID("GPisoResultsValueDiv")&&En.removeChild(En.firstChild);var An=document.createElement("div");An.id=this._addUID("GPisoResultsValueDiv"),An.className="fr-m-2w";var Sn=document.createElement("div");Sn.className="GPisoResultsValue";var Tn=document.createElement("label");Tn.className="GPisoResultsValueLabel",Tn.innerHTML="Type :",Sn.appendChild(Tn);var Ln=document.createElement("div");Ln.id=this._addUID("GPisoResultsValueType"),We==="time"?Ln.innerHTML="temps":Ln.innerHTML="distance",Sn.appendChild(Ln),An.appendChild(Sn);var Bn=document.createElement("div");Bn.className="GPisoResultsValue";var ei=document.createElement("label");ei.className="GPisoResultsValueLabel",ei.innerHTML="Mode :",Bn.appendChild(ei);var ti=document.createElement("div");ti.id=this._addUID("GPisoResultsValueMode"),ti.innerHTML=He,Bn.appendChild(ti),An.appendChild(Bn);var ni=document.createElement("div");ni.className="GPisoResultsValue";var ri=document.createElement("label");ri.className="GPisoResultsValueLabel",ri.innerHTML="Centre :",ni.appendChild(ri);var si=document.createElement("div");if(si.id=this._addUID("GPisoResultsValueOrigin"),si.innerHTML=parseFloat(Ue.x).toFixed(4)+", "+parseFloat(Ue.y).toFixed(4),ni.appendChild(si),An.appendChild(ni),ke&&ke.length!==0){var ai=document.createElement("div");ai.className="GPisoResultsValue";var li=document.createElement("label");li.className="GPisoResultsValueLabel",li.innerHTML="Distance :",ai.appendChild(li);var Pi=0,pi=parseInt(ke/1e3,10);if(!pi)Pi=Math.round(ke)+" m";else{var vi=Math.round(ke);vi=vi/1e3,Pi=vi+" km"}var Ri=document.createElement("div");Ri.id=this._addUID("GPisoResultsValueDist"),Ri.innerHTML=Pi,ai.appendChild(Ri),An.appendChild(ai)}if(Be&&Be.length!==0){var Fi=document.createElement("div");Fi.className="GPisoResultsValue";var di=document.createElement("label");di.className="GPisoResultsValueLabel",di.innerHTML="Durée :",Fi.appendChild(di);var ci=document.createElement("div");ci.id=this._addUID("GPisoResultsValueTime"),ci.innerHTML=Te(Be),Fi.appendChild(ci),An.appendChild(Fi)}if(Cn.length>0){var Mi=document.createElement("div");Mi.className="GPisoResultsValue";var Oi=document.createElement("label");Oi.className="GPisoResultsValueLabel",Oi.innerHTML="Exclusions :",Mi.appendChild(Oi);var Hi=document.createElement("div");Hi.id=this._addUID("GPisoResultsValueExclusions"),Hi.innerHTML=Cn.join(", "),Mi.appendChild(Hi),An.appendChild(Mi)}return En.prepend(An),En},_createIsoWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPisochronCalcWaitingContainer"),Oe.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createIsoPanelFooterElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelFooter gpf-panel__footer fr-modal__footer",Oe},_createIsoPanelFormPointLabel:function(){var Oe=document.createElement("p");return Oe.id=this._addUID("GPisochronPointLabelP"),Oe.className="gpf-label fr-label",Oe.innerHTML="Départ",Oe},_createIsoPanelFormTypeChoiceElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPisochronChoice"),Oe.className="fr-mt-2w",Oe},_createIsoPanelFormTypeChoiceChronElement:function(Oe){var e=this,Te=document.createElement("div");Te.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var ke=document.createElement("input");ke.id=this._addUID("GPisochronChoiceAltChron"),ke.name="GPisochronChoiceMode",ke.type="radio",ke.checked=!!Oe,ke.addEventListener?ke.addEventListener("change",function(He){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange(He)},!1):ke.attachEvent&&ke.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange()}),ke.value="isochron",Te.appendChild(ke);var Be=document.createElement("label");Be.className="GPisochronChoiceAltImg gpf-label fr-label",Be.htmlFor=this._addUID("GPisochronChoiceAltChron"),Be.innerHTML="Durée",Be.title="Durée",Te.appendChild(Be);var Ue=document.createElement("span");return Ue.id=this._addUID("GPisochronChoiceAltChronTxt"),Ue.className="gpf-hidden",Ue.innerHTML="Durée",Ue.addEventListener?Ue.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()},!1):Ue.attachEvent&&Ue.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),Te.appendChild(Ue),Te},_createIsoPanelFormTypeChoiceDistElement:function(Oe){var e=this,Te=document.createElement("div");Te.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var ke=document.createElement("input");ke.id=this._addUID("GPisochronChoiceAltDist"),ke.name="GPisochronChoiceMode",ke.type="radio",ke.checked=!!Oe,ke.addEventListener?ke.addEventListener("change",function(He){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange(He)},!1):ke.attachEvent&&ke.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange()}),ke.value="isodistance",Te.appendChild(ke);var Be=document.createElement("label");Be.className="GPisochronChoiceAltImg gpf-label fr-label",Be.htmlFor=this._addUID("GPisochronChoiceAltDist"),Be.innerHTML="Distance",Be.title="Distance",Te.appendChild(Be);var Ue=document.createElement("span");return Ue.id=this._addUID("GPisochronChoiceAltDistTxt"),Ue.className="gpf-hidden",Ue.innerHTML="Distance",Ue.addEventListener?Ue.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()},!1):Ue.attachEvent&&Ue.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),Te.appendChild(Ue),Te},_createIsoPanelFormLabelIsochronElement:function(Oe){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueChronLabelP"),e.className=Oe?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir un temps de trajet",e},_createIsoPanelFormValueIsochronElement:function(Oe){var e=this,Te=document.createElement("div");Te.id=this._addUID("GPisochronValueChron"),Te.className=Oe?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var ke=document.createElement("input");ke.id=this._addUID("GPisochronValueChronInput1"),ke.className="gpf-input fr-input",ke.min="0",ke.step="1",ke.value="0",ke.type="number",ke.title="Temps",ke.addEventListener?ke.addEventListener("change",function(We){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(We)}):ke.attachEvent&&ke.attachEvent("onchange",function(We){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(We)}),Te.appendChild(ke);var Be=document.createElement("label");Be.innerHTML="h",Be.className="gpf-label fr-label",Te.appendChild(Be);var Ue=document.createElement("input");Ue.id=this._addUID("GPisochronValueChronInput2"),Ue.className="gpf-input fr-input",Ue.min="0",Ue.max="59",Ue.step="1",Ue.value="0",Ue.type="number",Ue.title="Heures",Ue.addEventListener?Ue.addEventListener("change",function(We){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(We)}):Ue.attachEvent&&Ue.attachEvent("onchange",function(We){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(We)}),Te.appendChild(Ue);var He=document.createElement("label");return He.innerHTML="min",He.className="gpf-label fr-label",Te.appendChild(He),Te},_createIsoPanelFormLabelIsodistanceElement:function(Oe){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueDistLabelP"),e.className=Oe?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir une distance",e},_createIsoPanelFormValueIsodistanceElement:function(Oe){var e=this,Te=document.createElement("div");Te.id=this._addUID("GPisochronValueDist"),Te.className=Oe?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var ke=document.createElement("input");ke.id=this._addUID("GPisochronValueDistInput"),ke.className="gpf-input fr-input fr-ml-1w",ke.min="0",ke.step="any",ke.value="0",ke.type="number",ke.title="Distance",ke.addEventListener?ke.addEventListener("change",function(Ue){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Ue)}):ke.attachEvent&&ke.attachEvent("onchange",function(Ue){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Ue)}),Te.appendChild(ke);var Be=document.createElement("label");return Be.innerHTML="km",Be.className="gpf-label fr-label",Te.appendChild(Be),Te},_createIsoPanelFormModeChoiceTransportElement:function(Oe){var e=this,Te=document.createElement("div");Te.id=this._addUID("GPisochronTransportChoice");var ke=document.createElement("label");ke.className="GPisochronModeLabel gpf-label fr-label",ke.innerHTML="Choisir un mode de déplacement",Te.appendChild(ke);for(var Be=document.createElement("div"),Ue=0;Ue<Oe.length;Ue++){var He=Oe[Ue],We=document.createElement("div");if(We.className="GPisochronTransportChoice gpf-flex gpf-radio-group fr-radio-group",He==="Voiture"){var Cn=document.createElement("input");Cn.id=this._addUID("GPisochronTransportCar"),Cn.type="radio",Cn.name="GPisochronTransport",Ue===0&&(Cn.checked=!0),Cn.addEventListener?Cn.addEventListener("change",function(Tn){e.onIsoModeTransportChange(Tn)}):Cn.attachEvent&&Cn.attachEvent("onchange",function(Tn){e.onIsoModeTransportChange(Tn)}),Cn.value="Voiture",We.appendChild(Cn);var En=document.createElement("label");En.className="GPisochronTransportImg gpf-label fr-label",En.htmlFor=this._addUID("GPisochronTransportCar"),En.title="Voiture",En.innerHTML="Voiture",We.appendChild(En)}if(He==="Pieton"){var An=document.createElement("input");An.id=this._addUID("GPisochronTransportPedestrian"),An.type="radio",An.name="GPisochronTransport",Ue===0&&(An.checked=!0),An.addEventListener?An.addEventListener("change",function(Tn){e.onIsoModeTransportChange(Tn)}):An.attachEvent&&An.attachEvent("onchange",function(Tn){e.onIsoModeTransportChange(Tn)}),An.value="Pieton",We.appendChild(An);var Sn=document.createElement("label");Sn.className="GPisochronTransportImg gpf-label fr-label",Sn.htmlFor=this._addUID("GPisochronTransportPedestrian"),Sn.title="Piéton",Sn.innerHTML="Piéton",We.appendChild(Sn)}Be.appendChild(We)}return Te.appendChild(Be),Te},_createIsoPanelFormModeChoiceDirectionElement:function(Oe){var e=this,Te=document.createElement("div");Te.id=this._addUID("GPisochronDirectionChoice"),Te.className="fr-my-2w";var ke=document.createElement("label");ke.innerHTML="Définir un sens de parcours",ke.className="fr-label",Te.appendChild(ke);var Be=document.createElement("select");Be.id=this._addUID("GPisochronDirectionSelect"),Be.className="GPselect gpf-select fr-select",Be.title="Sens de parcours",Be.addEventListener("change",function(En){e.onIsoModeDirectionChange(En)});for(var Ue=0;Ue<Oe.length;Ue++){var He=Oe[Ue];if(He.toLowerCase()==="departure"){var We=document.createElement("option");Ue===0&&(We.selected="selected"),We.value="departure",We.text="Départ",Be.appendChild(We)}if(He.toLowerCase()==="arrival"){var Cn=document.createElement("option");Ue===0&&(Cn.selected="selected"),Cn.value="arrival",Cn.text="Arrivée",Be.appendChild(Cn)}}return Te.appendChild(Be),Te},_createShowIsoExclusionsPictoElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPshowIsoExclusionsPicto");var Te="";return checkDsfr()&&(Te="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto ${Te} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(ke){ke.preventDefault();var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowIsoSettingsClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){ke.preventDefault();var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowIsoSettingsClick(ke)}),e},_createIsoPanelFormExclusionsElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPisoExclusions");var e=document.createElement("label");return e.className="GPisoExclusionsLabel gpf-label fr-label",e.innerHTML="Passages autorisés",Oe.appendChild(e),Oe},_createIsoPanelFormExclusionOptionsElement:function(Oe){var e=this,Te=document.createElement("div");Te.className="GPisoExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Be=Oe[ke];switch(ke){case"toll":var Ue=document.createElement("input");Ue.id=this._addUID("GPisoExclusionsToll"),Ue.type="checkbox",Ue.name="Péages",Ue.checked=!Be,Ue.addEventListener?Ue.addEventListener("change",function(Sn){e.onIsoExclusionsChange(Sn)}):Ue.attachEvent&&Ue.attachEvent("onchange",function(Sn){e.onIsoExclusionsChange(Sn)}),Ue.value="Toll",Te.appendChild(Ue);var He=document.createElement("label");He.className="GPisoExclusionsOption",He.htmlFor=this._addUID("GPisoExclusionsToll"),He.innerHTML="Péages",Te.appendChild(He);break;case"tunnel":var We=document.createElement("input");We.id=this._addUID("GPisoExclusionsTunnel"),We.type="checkbox",We.name="Tunnel",We.checked=!Be,We.addEventListener?We.addEventListener("change",function(Sn){e.onIsoExclusionsChange(Sn)}):We.attachEvent&&We.attachEvent("onchange",function(Sn){e.onIsoExclusionsChange(Sn)}),We.value="Tunnel",Te.appendChild(We);var Cn=document.createElement("label");Cn.className="GPisoExclusionsOption",Cn.htmlFor=this._addUID("GPisoExclusionsTunnel"),Cn.innerHTML="Tunnels",Te.appendChild(Cn);break;case"bridge":var En=document.createElement("input");En.id=this._addUID("GPisoExclusionsBridge"),En.type="checkbox",En.name="Ponts",En.checked=!Be,En.addEventListener?En.addEventListener("change",function(Sn){e.onIsoExclusionsChange(Sn)}):En.attachEvent&&En.attachEvent("onchange",function(Sn){e.onIsoExclusionsChange(Sn)}),En.value="Bridge",Te.appendChild(En);var An=document.createElement("label");An.className="GPisoExclusionsOption",An.htmlFor=this._addUID("GPisoExclusionsBridge"),An.innerHTML="Ponts",Te.appendChild(An);break}}return Te},_createIsoSubmitFormElement:function(){var Oe=document.createElement("input");return Oe.id=this._addUID("GPisochronSubmit"),Oe.className="GPsubmit gpf-btn fr-btn",Oe.type="submit",Oe.value="Calculer l'isochrone",Oe},_createIsoFormResetElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPisochronReset"),e.className="GPresetPicto GPisochronReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-isocurve-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(Te){var ke=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!ke),Oe.onIsoResetClick(Te)}),e}},logger$n=LoggerByDefault.getLogger("isocurve"),Isocurve=class Qf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Qf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Isocurve",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.options.export){var Te=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(Te),this.export.render();var ke=this;this.export.on("button:clicked",Be=>{ke.dispatchEvent({type:"export:compute",content:Be.content})})}this.draggable&&Draggable.dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoIsoButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$n.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getLayer(){return this._geojsonLayer}setLayer(e){if(!e){this._geojsonLayer=null;return}if(!(e instanceof VectorLayer)){logger$n.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonLayer=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(Te){logger$n.log("no valid geojson given :"+Te.message)}}getData(){var e={type:"isocurve",transport:this._currentTransport,computation:this._currentComputation,exclusions:this._currentExclusions,direction:this._currentDirection,point:this._originPoint.getCoordinate(),results:{}};return Helper.assign(e.results,this._currentIsoResults),e}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions,this._currentDirection=e.direction;var Te=document.getElementById("GPlocationOriginPointer_1-"+this._uid);Te.checked=!0;var ke=document.getElementById("GPlocationOrigin_1-"+this._uid),Be=document.getElementById("GPlocationOriginCoords_1-"+this._uid);Be.value=e.point,ke.value=e.point[1].toFixed(4)+" / "+e.point[0].toFixed(4),this._originPoint.setCoordinate(e.point,"EPSG:4326"),this._currentIsoResults=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}compute(e,Te,ke){this._clear();var Be=this._pictoIsoButton.ariaPressed;Be!=="true"&&this._pictoIsoButton.click();var Ue=this.getMap();if(Ue){var He={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};Helper.assign(He,ke),this._originPoint.setCoordinate(e);var We=this._originPoint.getCoordinate(),Cn=document.getElementById("GPlocationOrigin_1-"+this._uid);if(Cn.value=We[0].toFixed(4)+" / "+We[1].toFixed(4),this._currentTransport=He.transport,He.transport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=He.exclusions,this._currentComputation=He.method,He.method==="time"){var En=Te.split(".");this._currentTimeHour=En[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=En[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=Te,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=He.direction,He.direction==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1,this.onIsoComputationSubmit()}}init(){var e=this._originPoint.getCoordinate(),Te=document.getElementById("GPlocationOrigin_1-"+this._uid);if(Te.value=e[1].toFixed(4)+" / "+e[0].toFixed(4),this._currentTransport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentComputation==="time"){var ke=this._currentIsoResults.time/60;this._currentTimeHour=Math.floor(ke/60),document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Math.round((ke/60-this._currentTimeHour)*60),document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=this._currentIsoResults.distance/1e3,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1,this._resultsIsoContainer.className=""}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer(),this._resultsIsoContainer.className="GPelementHidden gpf-hidden"}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,methods:["time","distance"],graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:Marker.lightOrange,offset:Marker.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrone/isodistance basé sur un graphe"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._pictoIsoButton=null,this._waitingContainer=null,this._formContainer=null,this._resultsIsoContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._geojsonObject=null,this.export=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.7)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0)",width:1})}),this._resources={},this.listenerKey=null}_checkInputOptions(e){var Te;if(e.methods)if(Array.isArray(e.methods))if(e.methods.length===0)e.methods=null;else for(Te=0;Te<e.methods.length;Te++)typeof e.methods[Te]!="string"&&logger$n.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else logger$n.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(e.graphs.length===0)e.graphs=null;else for(Te=0;Te<e.graphs.length;Te++)typeof e.graphs[Te]!="string"?logger$n.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):(e.graphs[Te].toLowerCase()==="pieton"&&(e.graphs[Te]="Pieton"),e.graphs[Te].toLowerCase()==="voiture"&&(e.graphs[Te]="Voiture"));else logger$n.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(e.directions.length===0)e.directions=null;else for(Te=0;Te<e.directions.length;Te++)typeof e.directions[Te]!="string"&&logger$n.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else logger$n.warn("'directions' parameter should be an array"),e.directions=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initTransport(){this._currentTransport="Piéton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var Te=this.options.isocurveOptions;Te.graph&&(this._currentTransport=Te.graph)}_initComputation(){this._currentComputation="time";var e=this.options.methods;(!e||e.length===0)&&(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&(e[0]==="time"||e[0]==="distance")&&(this._currentComputation=e[0]);var Te=this.options.isocurveOptions;Te.method&&(this._currentComputation=Te.method),Te.time&&(this._currentComputation="time"),Te.distance&&(this._currentComputation="distance")}_initDirection(){this._currentDirection="departure";var e=this.options.directions;(!e||e.length===0)&&(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&(e[0]==="departure"||e[0]==="arrival")&&(this._currentDirection=e[0]);var Te=this.options.isocurveOptions;Te.reverse||(this._currentDirection="departure"),Te.reverse===!0&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var Te in e)e.hasOwnProperty(Te)&&e.k&&this._currentExclusions.push(Te);var ke=this.options.isocurveOptions;Array.isArray(ke.exclusions)&&(this._currentExclusions=ke.exclusions)}_initContainer(e){var Te=this._container;if(Te.childElementCount>0)return Te;var ke=this._pictoIsoButton=this._createShowIsoPictoElement();Te.appendChild(ke);var Be=this._IsoPanelContainer=this._createIsoPanelElement(),Ue=this._createIsoPanelDivElement();Be.appendChild(Ue);var He=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();Ue.appendChild(He);var We=this._formContainer=this._createIsoPanelFormElement();We.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),We.appendChild(this._createIsoPanelFormPointLabel());var Cn=this._createIsoPanelFormPointElement(e);We.appendChild(Cn);for(var En=!1,An=!1,Sn=this._createIsoPanelFormTypeChoiceElement(),Tn=0;Tn<this.options.methods.length;Tn++)this.options.methods[Tn]==="time"&&(En=Tn===0,Sn.appendChild(this._createIsoPanelFormTypeChoiceChronElement(En))),this.options.methods[Tn]==="distance"&&(An=Tn===0,Sn.appendChild(this._createIsoPanelFormTypeChoiceDistElement(An)));if(We.appendChild(Sn),We.appendChild(this._createIsoPanelFormLabelIsochronElement(En)),We.appendChild(this._createIsoPanelFormValueIsochronElement(En)),We.appendChild(this._createIsoPanelFormLabelIsodistanceElement(An)),We.appendChild(this._createIsoPanelFormValueIsodistanceElement(An)),We.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),this.options.exclusions&&typeof this.options.exclusions=="object"&&Object.keys(this.options.exclusions).length!==0){We.appendChild(this._createShowIsoExclusionsPictoElement());var Ln=this._createIsoPanelFormExclusionsElement();Ln.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),We.appendChild(Ln)}var Bn=this._createIsoPanelFooterElement();if(We.appendChild(Bn),!checkDsfr()){var ei=this._createIsoFormResetElement();Bn.appendChild(ei)}var ti=this._submitContainer=this._createIsoSubmitFormElement();Bn.appendChild(ti),Ue.appendChild(We);var ni=this._resultsIsoContainer=this._createIsoPanelResultsElement();Ue.appendChild(ni);var ri=this._createDrawingButtonsPluginDiv();Ue.appendChild(ri);var si=this._waitingContainer=this._createIsoWaitingElement();return Be.appendChild(si),Te.appendChild(Be),Te.addEventListener&&Te.addEventListener("click",ai=>this._hideIsoSuggestedLocations(ai)),Te}_createIsoPanelFormPointElement(e){this._originPoint=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var Te=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){Te._clearGeojsonLayer();var ke=Te.getMap();Te._originPoint._inputShowPointerContainer.checked?(Te._formContainer.className="GPisochronFormMini gpf-panel__content fr-modal__content",this.listenerKey=ke.on("click",()=>{Te._formContainer.className="gpf-panel__content fr-modal__content",Te.dispatchEvent("isocurve:drawend")})):(Te._formContainer.className="gpf-panel__content fr-modal__content",unByKey(this.listenerKey)),Te.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){Te._clearGeojsonLayer(),Te._formContainer.className="gpf-panel__content fr-modal__content",e.un("click",()=>{Te._formContainer.className="gpf-panel__content fr-modal__content"}),Te.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){Te._clearGeojsonLayer(),Te.dispatchEvent("isocurve:drawend")},this._originPoint._container}onIsoComputationSubmit(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate()){logger$n.log("[Isocurve] Missing position parameter to submit isocurve request");return}var e=this._originPoint.getCoordinate(),Te={x:e[0],y:e[1]};logger$n.log("origin : ",Te);var ke,Be;if(this._currentComputation.toLowerCase()==="time"){var Ue=document.getElementById("GPisochronValueChronInput1-"+this._uid),He=parseInt(Ue.value,10);isNaN&&isNaN(He)&&(He=0);var We=document.getElementById("GPisochronValueChronInput2-"+this._uid),Cn=parseInt(We.value,10);isNaN&&isNaN(Cn)&&(Cn=0),ke=He*3600+Cn*60,logger$n.log("time : "+ke)}if(this._currentComputation.toLowerCase()==="distance"){var En=document.getElementById("GPisochronValueDistInput-"+this._uid);Be=parseFloat(En.value)*1e3,logger$n.log("distance : "+Be)}if(!ke&&!Be){logger$n.log("[Isocurve] Missing time or distance parameter to submit isocurve request");return}var An=this.options.isocurveOptions||{},Sn=An.protocol||"XHR",Tn=An.timeOut||0;Sn==="JSONP"&&Tn===0&&(Tn=15e3);var Ln=An.onFailure!==null&&typeof An.onFailure=="function",Bn=An.onSuccess!==null&&typeof An.onSuccess=="function",ei=this,ti={position:Te,graph:An.graph||this._currentTransport,exclusions:An.exclusions||this._currentExclusions,method:An.method||this._currentComputation,smoothing:An.smoothing||!0,timeOut:Tn,protocol:Sn,resource:An.resource,onSuccess:function(ni){logger$n.log(ni),ni&&(ei._fillIsoResultsDetails(ni,ti),ei._drawIsoResults(ni)),Bn&&An.onSuccess.call(ei,ni)},onFailure:function(ni){ei._hideWaitingContainer(),logger$n.log(ni.message),Ln&&An.onFailure.call(ei,ni)}};(this._currentDirection.toLowerCase()==="arrival"||An.reverse)&&(ti.reverse=!0),ke&&(ti.time=ke),Be&&(ti.distance=Be),this._requestIsoCurve(ti)}onShowIsoPanelClick(e){var Te=this._pictoIsoButton.ariaPressed;Te==="true"&&this.onPanelOpen();var ke=this.getMap();Interactions.unset(ke),this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onIsoTypeChoiceChange(e){var Te=e.target.value;Te&&(Te==="isodistance"&&(this._currentComputation="distance"),Te==="isochron"&&(this._currentComputation="time"))}onIsoModeTransportChange(e){var Te=e.target.value;Te&&(this._currentTransport=Te)}onIsoModeDirectionChange(e){var Te=e.target.value;Te&&(Te.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ",this._currentDirection=Te)}onIsoExclusionsChange(e){var Te=e.target.value,ke=e.target.checked;if(Te){for(var Be=!1,Ue=null,He=0;He<this._currentExclusions.length;He++)deepEqual(this._currentExclusions[He],Te.toLowerCase())&&(Ue=He,Be=!0);!Be&&!ke&&this._currentExclusions.push(Te.toLowerCase()),Be&&ke&&(this._currentExclusions[Ue]=null)}}onIsoResetClick(){this._clear()}onShowIsoResultsNewClick(){this._clearGeojsonLayer(),this.dispatchEvent("iso:newresults")}onShowIsoSettingsClick(){}_requestIsoCurve(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.position&&(typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$n.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),Gp.Services.isoCurve(e))}_fillIsoResultsDetails(e,Te){this._fillIsoResultsDetailsContainer(e,Te),this._currentIsoInformations=e,this.dispatchEvent({type:"iso:compute"}),this._formContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsIsoContainer.className="gpf-flex GPflex"}_fillIsoResultsDetailsContainer(e,Te){this._resultsIsoValuesContainer=this._addIsoResultsValuesElement(e,Te,MathUtils.convertSecondsToTime)}_drawIsoResults(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),!!e.geometry){var Te=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry}]},this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._originPoint.getCoordinate()},properties:{description:"Point d'origine","marker-symbol":this.options.markerOpts.url}});var ke=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:this._defaultFeatureStyle}),Be=Te.getView().getProjection().getCode(),Ue=ke.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:Be}),Cn=this._currentComputation==="time"?"Isochrone":"Isodistance";this._geojsonLayer=new VectorLayer({source:new VectorSource({features:Ue}),style:this._defaultFeatureStyle,opacity:.9,title:"Mon "+Cn});var He;if(this._currentTransport==="Pieton"?(He="piéton",this._geojsonLayer.gpResultLayerId="compute:Pieton$GEOPORTAIL:GPP:Isocurve"):(He="voiture",this._geojsonLayer.gpResultLayerId="compute:Voiture$GEOPORTAIL:GPP:Isocurve"),Te.addLayer(this._geojsonLayer),this.dispatchEvent({type:"isocurve:compute"}),Ue[0]&&Ue[0].getGeometry()&&Ue[0].getGeometry().getExtent()){var We=Ue[0].getGeometry().getExtent();Te.getView().fit(We,Te.getSize())}var Cn=this._currentComputation==="time"?"Isochrone":"Isodistance";Te.getControls().forEach(En=>{if(En instanceof LayerSwitcher){var An=this._geojsonLayer.gpLayerId;En._layers[An].title===An&&En.addLayer(this._geojsonLayer,{title:this.options.layerDescription.title+" ("+Cn+"/"+He+")",description:this.options.layerDescription.description})}})}}_clear(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null}_clearIsoInputs(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var Te=document.getElementById("GPisochronValueChronInput2-"+this._uid);Te&&(Te.value="0");var ke=document.getElementById("GPisochronValueDistInput-"+this._uid);ke&&(ke.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var Be;this._currentTransport==="Pieton"?(Be=document.getElementById("GPisochronTransportPedestrian-"+this._uid),Be&&(Be.checked="true")):(Be=document.getElementById("GPisochronTransportCar-"+this._uid),Be&&(Be.checked="true"));var Ue;this._currentComputation.toLowerCase()==="distance"?(Ue=document.getElementById("GPisochronChoiceAltDist-"+this._uid),Ue&&(Ue.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPelementHidden gpf-hidden")):(Ue=document.getElementById("GPisochronChoiceAltChron-"+this._uid),Ue&&(Ue.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPelementHidden gpf-hidden"));var He=document.getElementById("GPisochronDirectionSelect-"+this._uid);He&&(He.value=this._currentDirection),He.value.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ";var We=document.getElementById("GPisoExclusionsToll-"+this._uid);We&&(this._currentExclusions.indexOf("toll")!==-1?We.checked=!1:We.checked=!0);var Cn=document.getElementById("GPisoExclusionsTunnel-"+this._uid);Cn&&(this._currentExclusions.indexOf("tunnel")!==-1?Cn.checked=!1:Cn.checked=!0);var En=document.getElementById("GPisoExclusionsBridge-"+this._uid);En&&(this._currentExclusions.indexOf("bridge")!==-1?En.checked=!1:En.checked=!0)}_clearGeojsonLayer(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null),this._geojsonObject=null}_hideIsoSuggestedLocations(e){e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1||this._originPoint._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var Te=this;this._timer=setTimeout(function(){Te._waiting===!0?Te._hideWaitingContainer():Te._timer&&clearTimeout(Te._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}};Object.assign(Isocurve.prototype,IsoDOM);Object.assign(Isocurve.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Isocurve=Isocurve);const deepEqual=function(Oe,e){if(Oe===e)return!0;if(typeof Oe=="object"&&Oe!=null&&typeof e=="object"&&e!=null){if(Object.keys(Oe).length!==Object.keys(e).length)return!1;for(var Te in Oe)if(e.hasOwnProperty(Te)){if(!deepEqual(Oe[Te],e[Te]))return!1}else return!1;return!0}else return!1};var ReverseGeocodeDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPreverseGeocoding"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowReverseGeocodingPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowReverseGeocodingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-reverse fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir la recherche inverse"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowReverseGeocodingClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowReverseGeocodingClick(ke)}),e},_createReverseGeocodingWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),Oe.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createReverseGeocodingResultsPanelElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPreverseGeocodingResultsPanel"),Oe.className="GPpanel GPelementHidden gpf-panel gpf-panel-reverse gpf-panel--hidden",Oe},_createReverseGeocodingResultsListElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPreverseGeocodingResultsList"),Oe.className="gpf-panel__list",Oe.setAttribute("tabindex","0"),Oe},_createReverseGeocodingResultElement:function(Oe,e){var Te=this,ke=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),Be=document.createElement("div");Be.id=this._addUID("GPreverseGeocodedLocation_"+e),Be.setAttribute("tabindex","0"),Be.className="GPautoCompleteProposal gpf-panel__items",Be.innerHTML=Oe,Be.title=Oe,Be.addEventListener?(Be.addEventListener("mouseover",function(Ue){Te.onReverseGeocodingResultMouseOver(Ue)}),Be.addEventListener("focus",function(Ue){Te.onReverseGeocodingResultMouseOver(Ue)}),Be.addEventListener("mouseout",function(Ue){Te.onReverseGeocodingResultMouseOut(Ue)}),Be.addEventListener("blur",function(Ue){Te.onReverseGeocodingResultMouseOut(Ue)}),Be.addEventListener("click",function(Ue){typeof Te.onReverseGeocodingResultClick=="function"&&Te.onReverseGeocodingResultClick(Ue)})):Be.attachEvent&&(Be.attachEvent("onmouseover",function(Ue){Te.onReverseGeocodingResultMouseOver(Ue)}),Be.attachEvent("onmouseout",function(Ue){Te.onReverseGeocodingResultMouseOut(Ue)}),Be.attachEvent("onclick",function(Ue){typeof Te.onReverseGeocodingResultClick=="function"&&Te.onReverseGeocodingResultClick(Ue)})),ke.appendChild(Be)},_createReverseGeocodingPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPreverseGeocodingPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createReverseGeocodingPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createReverseGeocodingPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader gpf-panel__header fr-modal__header",Oe},_createReverseGeocodingPanelReturnPictoElement:function(){var Oe=this,e=document.createElement("button");if(e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreturnPicto GPimportPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--close fr-btn--tertiary-no-outline fr-m-1w",e.classList.add("GPelementHidden"),e.classList.add("gpf-hidden"),checkDsfr()){var Te=document.createElement("span");Te.className="GPelementHidden gpf-visible",Te.innerHTML="Retour",e.appendChild(Te)}return e.addEventListener?e.addEventListener("click",function(ke){document.getElementById(Oe._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(Oe._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(Oe._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(Oe._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(Oe._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),Oe.onGPreverseGeocodingReturnPictoClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){document.getElementById(Oe._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(Oe._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(Oe._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(Oe._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(Oe._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),Oe.onGPreverseGeocodingReturnPictoClick(ke)}),e},_createReverseGeocodingPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.id=this._addUID("GPreverseGeocodingHeaderTitle"),Oe.innerHTML="Recherche inverse",Oe},_createReverseGeocodingPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose GPreverseGeocodingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowReverseGeocodingPicto")).click()},!1),e.addEventListener("keydown",function(ke){ke.keyCode===13&&document.getElementById(Oe._addUID("GPshowReverseGeocodingPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowReverseGeocodingPicto")).click()}),e.attachEvent("onkeydown",function(ke){ke.keyCode===13&&document.getElementById(Oe._addUID("GPshowReverseGeocodingPicto")).click()}));var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e},_createReverseGeocodingPanelFormElement:function(){var Oe=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(Te){Te.preventDefault(),Oe.onReverseGeocodingSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(Te){Te.preventDefault(),Oe.onReverseGeocodingSubmit()}),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(Oe){var e=this,Te=document.createElement("div");Te.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-1w";var ke=document.createElement("label");ke.id="label-recherche-par",ke.className="GPlabel gpf-label fr-label",ke.innerHTML="Recherche par",ke.title="Recherche par",Te.appendChild(ke);var Be=document.createElement("select");Be.setAttribute("aria-labelledby","label-recherche-par"),Be.className="GPselect gpf-select fr-select",Be.addEventListener?Be.addEventListener("change",function(En){e.onReverseGeocodingTypeChange(En)}):Be.attachEvent&&Be.attachEvent("onchange",function(En){e.onReverseGeocodingTypeChange(En)}),(!Oe||!Array.isArray(Oe))&&(Oe=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var Ue=0;Ue<Oe.length;Ue++)switch(Oe[Ue]){case"PositionOfInterest":var He=document.createElement("option");He.value="PositionOfInterest",He.text="Lieux/toponymes",Be.appendChild(He);break;case"StreetAddress":var We=document.createElement("option");We.value="StreetAddress",We.text="Adresses",Be.appendChild(We);break;case"CadastralParcel":var Cn=document.createElement("option");Cn.value="CadastralParcel",Cn.text="Parcelles cadastrales",Be.appendChild(Cn);break}return Te.appendChild(Be),Te},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(Oe){var e=this,Te=document.createElement("div");Te.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-2w";var ke=document.createElement("label");ke.id="label-delimitation",ke.className="GPlabel gpf-label fr-label",ke.innerHTML="Délimitation",ke.title="Délimitation",Te.appendChild(ke);var Be=document.createElement("select");Be.setAttribute("aria-labelledby","label-delimitation"),Be.className="GPselect gpf-select fr-select",Be.addEventListener?Be.addEventListener("change",function(En){e.onReverseGeocodingDelimitationChange(En)}):Be.attachEvent&&Be.attachEvent("onchange",function(En){e.onReverseGeocodingDelimitationChange(En)}),(!Oe||!Array.isArray(Oe))&&(Oe=["Point","Circle","Extent"]);for(var Ue=0;Ue<Oe.length;Ue++)switch(Oe[Ue].toLowerCase()){case"point":var He=document.createElement("option");He.value="point",He.text="Pointer un lieu",Be.appendChild(He);break;case"circle":var We=document.createElement("option");We.value="circle",We.text="Dessiner un cercle",Be.appendChild(We);break;case"extent":var Cn=document.createElement("option");Cn.value="extent",Cn.text="Dessiner une emprise",Be.appendChild(Cn);break}return Te.appendChild(Be),Te},_createReverseGeocodingSubmitFormElement:function(){var Oe=document.createElement("input");return Oe.id=this._addUID("GPreverseGeocodingSubmit"),Oe.className="GPsubmit gpf-btn fr-btn",Oe.type="submit",Oe.value="Rechercher",Oe}},logger$m=LoggerByDefault.getLogger("reversegeocoding"),ReverseGeocode=class ep extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ep))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ReverseGeocode",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$m.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showReverseGeocodingButton.click(),this.collapsed=e)}setMap(e){if(e)this._activateMapInteraction(e),this.draggable&&Draggable.dragElement(this._panelContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||this._showReverseGeocodingButton.setAttribute("aria-pressed",!0);else{var Te=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(Te),this._inputFeaturesLayer!=null&&(Te.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getData(){return this._reverseGeocodingLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingButton=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._panelCloseButton=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestGeom=null,this._requestPosition=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new Style$1({image:new Icon({src:Marker.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new Style$1({image:new Icon({src:Marker.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null}_checkInputOptions(e){var Te,ke;if(e.resources){var Be=e.resources;if(Array.isArray(Be)){var Ue=["StreetAddress","PositionOfInterest","CadastralParcel"],He=[];for(Te=0;Te<Be.length;Te++)Ue.indexOf(Be[Te])===-1&&(He.push(Te),logger$m.log("[ReverseGeocode] options.resources : "+Be[Te]+" is not a resource for reverse geocode"));if(He.length!==0)for(ke=0;ke<He.length;ke++)Be.splice(He[ke],1)}else logger$m.log("[ReverseGeocode] 'options.resources' parameter should be an array"),Be=null}if(e.delimitations){var We=e.delimitations;if(Array.isArray(We)){var Cn=["Circle","Point","Extent"],En=[];for(Te=0;Te<We.length;Te++)Cn.indexOf(We[Te])===-1&&(En.push(Te),logger$m.log("[ReverseGeocode] options.delimitations : "+We[Te]+" is not a delimitation for reverse geocode"));if(En.length!==0)for(ke=0;ke<En.length;ke++)We.splice(En[ke],1)}else logger$m.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),We=null}}_initGeocodingType(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;(!e||e.length===0)&&(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(e)&&e.length&&(e[0]==="StreetAddress"||e[0]==="PositionOfInterest"||e[0]==="CadastralParcel")&&(this._currentGeocodingType=e[0]);var Te=this.options.reverseGeocodeOptions;Te.filterOptions&&Array.isArray(Te.filterOptions.type)&&Te.filterOptions.type.length!==0&&(this._currentGeocodingType=Te.filterOptions.type[0])}_initGeocodingDelimitation(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if((!e||e.length===0)&&(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var Te=e[0].toLowerCase();(Te==="point"||Te==="circle"||Te==="extent")&&(this._currentGeocodingDelimitation=e[0])}}_initPopupDiv(){var e=this,Te=document.createElement("div");Te.className="gp-feature-info-div";var ke=document.createElement("button");return ke.className="gp-styling-button closer",ke.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",Te.appendChild(this._popupContent),Te.appendChild(ke),Te}_initContainer(){var e=this._createMainContainerElement(),Te=this._showReverseGeocodingButton=this._createShowReverseGeocodingPictoElement();e.appendChild(Te);var ke=this._panelContainer=this._createReverseGeocodingPanelElement(),Be=this._createReverseGeocodingPanelDivElement();ke.appendChild(Be);var Ue=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),He=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();Ue.appendChild(He);var We=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();Ue.appendChild(We);var Cn=this._panelCloseButton=this._createReverseGeocodingPanelCloseElement();Ue.appendChild(Cn),Be.appendChild(Ue);var En=this._formContainer=this._createReverseGeocodingPanelFormElement();En.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),En.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var An=this._createReverseGeocodingSubmitFormElement();En.appendChild(An),Be.appendChild(En);var Sn=this._waitingContainer=this._createReverseGeocodingWaitingElement();Be.appendChild(Sn);var Tn=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),Ln=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return Tn.appendChild(Ln),Be.appendChild(Tn),e.appendChild(ke),logger$m.log(e),e}_activateMapInteraction(e){if(!this.collapsed){this._inputFeaturesLayer==null&&(this._inputFeatures=new Collection,this._inputFeaturesSource=new VectorSource({features:this._inputFeatures}),this._inputFeaturesLayer=new VectorLayer({source:this._inputFeaturesSource,style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Icon({src:Marker.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer));var Te=this._currentGeocodingDelimitation.toLowerCase();switch(Te){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e);break}e.getControls().forEach(ke=>{if(ke instanceof LayerSwitcher){var Be=this._inputFeaturesLayer.gpLayerId;ke._layers[Be].title===Be&&(ke.addLayer(this._inputFeaturesLayer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description}),ke.setRemovable(this._inputFeaturesLayer,!1))}})}}_activatePointInteraction(e){this._mapInteraction=new Draw({style:new Style$1({image:new CircleStyle({radius:0,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",Te=>{logger$m.log("on drawstart ",Te),this._inputFeatures.clear(),this._onDrawStart(Te,"point")}),this._mapInteraction.on("drawend",Te=>{logger$m.log("on drawend",Te),Te.feature&&Te.feature.getGeometry&&(this._requestGeom={type:"Point",coordinates:[this._requestPosition.lon,this._requestPosition.lat]})}),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)}_activateCircleInteraction(e){this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource,geometryFunction:function(Te,ke){const Be=Te[0],Ue=Te[Te.length-1],He=Be[0]-Ue[0],We=Be[1]-Ue[1],En=Math.min(Math.sqrt(He*He+We*We),500);return ke?ke.setCenterAndRadius(Be,En):ke=new ol.geom.Circle(Be,En),ke}}),this._mapInteraction.on("drawstart",Te=>{logger$m.log("on drawstart ",Te),this._inputFeatures.clear(),this._onDrawStart(Te,"circle")}),this._mapInteraction.on("drawend",Te=>{if(logger$m.log("on drawend",Te),Te.feature&&Te.feature.getGeometry){var ke=Te.feature.getGeometry().getRadius();this._requestGeom={},this._requestGeom.type="Circle",this._requestGeom.radius=ke,this._requestPosition&&(this._requestGeom.coordinates=[this._requestPosition.lon,this._requestPosition.lat]),logger$m.log("circle radius : ",ke)}}),e.addInteraction(this._mapInteraction)}_activateBoxInteraction(e){var Te=function(ke,Be){Be||(Be=new Polygon([]));var Ue=ke[0],He=ke[1];const We=Ue[0]-He[0],Cn=Ue[1]-He[1],En=1e3,An=Math.max(-1e3,Math.min(We,En)),Sn=Math.max(-1e3,Math.min(Cn,En));return Be.setCoordinates([[Ue,[Ue[0],Ue[1]-Sn],[Ue[0]-An,Ue[1]-Sn],[Ue[0]-An,Ue[1]],Ue]]),Be};this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:Te}),this._mapInteraction.on("drawstart",ke=>{logger$m.log("on drawstart",ke),this._inputFeatures.clear(),this._onDrawStart(ke,"polygon")}),this._mapInteraction.on("drawend",ke=>{logger$m.log("on drawend",ke),this._onBoxDrawEnd(ke)}),e.addInteraction(this._mapInteraction)}_removeMapInteraction(e){this._mapInteraction!=null&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()}_onDrawStart(e,Te){var ke;if(e.feature&&e.feature.getGeometry){var Be=e.feature.getGeometry();Te==="point"&&(ke=Be.getCoordinates()),Te==="circle"&&(ke=Be.getCenter()),Te==="polygon"&&(ke=Be.getFirstCoordinate())}if(ke){var Ue;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Ue=this.options.reverseGeocodeOptions.srs;else{var He=this.getMap();if(!He||!He.getView())return;Ue=He.getView().getProjection()}var We=transform$1(ke,Ue,"EPSG:4326");this._requestPosition={lon:We[0],lat:We[1]},logger$m.log("position coordinates : ",this._requestPosition)}}_onBoxDrawEnd(e){if(e.feature&&e.feature.getGeometry){var Te=e.feature.getGeometry().getCoordinates()[0],ke=Te[0],Be=Te[2],Ue;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Ue=this.options.reverseGeocodeOptions.srs;else{var He=this.getMap();if(!He||!He.getView())return;Ue=He.getView().getProjection()}var We=transform$1(ke,Ue,"EPSG:4326"),Cn=transform$1(Be,Ue,"EPSG:4326"),En={};We[0]<Cn[0]?(En.left=We[0],En.right=Cn[0]):(En.left=Cn[0],En.right=We[0]),We[1]<Cn[1]?(En.bottom=We[1],En.top=Cn[1]):(En.bottom=Cn[1],En.top=We[1]),this._requestGeom={type:"Polygon",coordinates:[[[En.left,En.top],[En.left,En.bottom],[En.right,En.bottom],[En.right,En.top],[En.left,En.top]]]},logger$m.log("searchGeometry filter : ",this._requestGeom)}}_setCursor(e,Te){if(Te=Te||this.getMap(),!!Te){var ke=Te.getTargetElement();e?ke.style.cursor=e:ke.style.cursor=null}}_reverseGeocodingRequest(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),Gp.Services.reverseGeocode(this._requestOptions)}_getReverseGeocodingRequestOptions(){var e=this.getMap(),Te=this.options.reverseGeocodeOptions,ke=this;typeof this.options.ssl!="boolean"&&(this.options.ssl=!0);var Be=Te.onFailure!==null&&typeof Te.onFailure=="function",Ue=Te.onSuccess!==null&&typeof Te.onSuccess=="function",He={apiKey:Te.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:Te.maximumResponses||18,timeOut:Te.timeOut||3e4,onSuccess:function(We){We.locations&&(logger$m.log("reverseGeocode results : ",We.locations),ke._displayGeocodedLocations(We.locations)),Ue&&Te.onSuccess.call(ke,We.locations)},onFailure:function(We){ke._hideWaitingContainer(),ke._clearResults(),ke._clearInputFeatures(),ke._activateMapInteraction(e),logger$m.log(We.message),Be&&Te.onFailure.call(ke,We)}};return this._requestGeom.type.toLowerCase()==="circle"?(this._requestGeom.radius>500&&(logger$m.log("INFO : initial circle radius ("+this._requestGeom.radius+") limited to 1000m."),this._requestGeom.radius=500),He.searchGeometry=this._requestGeom):this._requestGeom.type.toLowerCase()==="polygon"?He.searchGeometry=this._requestGeom:this._requestGeom.type.toLowerCase()==="point"&&(this._currentGeocodingType==="StreetAddress"?(He.searchGeometry={type:"Circle",radius:50,coordinates:this._requestGeom.coordinates},He.maximumResponses=1):He.searchGeometry=this._requestGeom),logger$m.log("reverseGeocode request options : ",He),He}_displayGeocodedLocations(e){this._clearResults(),this._reverseGeocodingLocations=e,this.dispatchEvent({type:"reversegeocode:compute"}),this._formContainer.className="GPelementHidden gpf-hidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Résultats de la recherche",this._returnPictoContainer.classList.remove("GPelementHidden"),this._returnPictoContainer.classList.remove("gpf-hidden"),this._resultsContainer.className="GPpanel gpf-panel gpf-panel-reverse",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)}_fillGeocodedLocationListContainer(e){for(var Te=0;Te<e.length;Te++){var ke=e[Te];logger$m.log(ke);var Be=this._fillGeocodedLocationDescription(ke);Be&&Be.length!==0&&this._createReverseGeocodingResultElement(Be,Te)}}_fillGeocodedLocationDescription(e){if(!(!e||!e.placeAttributes)){var Te=e.placeAttributes,ke="";switch(e.type){case"StreetAddress":Te.street&&(ke+=Te.housenumber?Te.housenumber+" ":"",ke+=Te.street+", "),ke+=Te.postcode+" "+Te.city;break;case"PositionOfInterest":ke+=Te.toponym,Te.postcode&&Te.postcode.length===1&&(ke+=", "+Te.postcode[0]),ke+=" ("+Te.category.join(",")+")";break;case"CadastralParcel":ke+=Te.id,ke+=Te.city?" ("+Te.city+")":"";break;default:ke+=Te.city?Te.city:"";break}return ke}}_displayGeocodedLocationsOnMap(e){if(this._reverseGeocodingLocations.length!==0){var Te=this.getMap();this._createResultsLayer();for(var ke=0;ke<e.length;ke++)this._addResultFeature(e[ke],ke);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var Be=this._resultsFeaturesSource.getExtent();Te.getView().fit(Be,Te.getSize())}}else{var Ue=this._resultsFeatures.item(0),He=Ue.getGeometry().getCoordinates();Te.getView().setCenter(He),Te.getView().setZoom(17)}this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",Cn=>this._onResultsFeatureMouseOver(Cn)),Te.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",Cn=>this._onResultsFeatureSelect(Cn)),Te.addInteraction(this._resultsSelectInteraction);var We="";switch(this._currentGeocodingType){case"StreetAddress":We="adresses";break;case"PositionOfInterest":We="toponymes";break;case"CadastralParcel":We="parcelles cadastrales";break}Te.getControls().forEach(Cn=>{if(Cn instanceof LayerSwitcher){var En=this._resultsFeaturesLayer.gpLayerId;Cn._layers[En].title===En&&(Cn.addLayer(this._resultsFeaturesLayer,{title:"Résultats de la recherche inverse",description:"Résultats de la recherche inverse sur les "+We}),Cn.setRemovable(this._resultsFeaturesLayer,!1))}})}}_createResultsLayer(){var e=this.getMap();this._resultsFeatures=new Collection,this._resultsFeaturesSource=new VectorSource({features:this._resultsFeatures}),this._resultsFeaturesLayer=new VectorLayer({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)}_addResultFeature(e,Te){var ke=this.getMap(),Be=[e.position.lon,e.position.lat];if(Be.length!==0){var Ue=ke.getView(),He=Ue.getProjection().getCode();He!=="EPSG:4326"&&(Be=transform$1(Be,"EPSG:4326",He));var We=new Feature({geometry:new Point$1(Be)});We.setStyle(this._resultsDefaultStyle),We.setId(Te),We.setProperties({location:e,popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(We)}}_fillPopupContent(e){var Te="<ul>",ke=e.placeAttributes;for(var Be in ke)ke.hasOwnProperty(Be)&&Be!=="trueGeometry"&&Be!=="extraFields"&&Be!=="houseNumberInfos"&&Be!=="_count"&&(Te+="<li>",Te+='<span class="gp-attname-others-span">'+Be.toUpperCase()+" : </span>",Te+=ke[Be],Te+=" </li>");return Te+=" </ul>",Te}_onResultsFeatureMouseOver(e){var Te;if(e.selected.length!==0){if(Te=e.selected[0],Te.setStyle(this._resultsSelectedStyle),Te.getId()!=null){var ke=document.getElementById("GPreverseGeocodedLocation_"+Te.getId()+"-"+this._uid);ke&&ke.classList&&ke.classList.add("GPlocationHighlight")}document.getElementById("GPreverseGeocodedLocation_"+Te.getId()+"-"+this._uid)}if(e.deselected.length!==0){Te=e.deselected[0],Te.setStyle(this._resultsDefaultStyle);var Be=document.getElementById("GPreverseGeocodedLocation_"+Te.getId()+"-"+this._uid);Be&&Be.classList&&Be.classList.remove("GPlocationHighlight")}}_onResultsFeatureSelect(e){var Te=this.getMap();if(e.selected.length!==0){var ke=e.selected[0];this._popupContent.innerHTML=ke.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),Te.addOverlay(this._popupOverlay)),this.dispatchEvent({type:"reversegeocode:onclickresult",location:ke.getProperties().location})}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}onShowReverseGeocodingClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this.getMap();if(Te){Interactions.unset(Te);var ke=this._showReverseGeocodingButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),!this._waiting&&!this._reverseGeocodingLocations.length&&(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(Te),this._inputFeaturesLayer!=null&&(Te.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(Te))}}onReverseGeocodingTypeChange(e){var Te=e.target.selectedIndex,ke=e.target.options[Te].value;ke&&(logger$m.log(ke),this._currentGeocodingType=ke)}onReverseGeocodingDelimitationChange(e){var Te=e.target.selectedIndex,ke=e.target.options[Te].value;if(ke){logger$m.log(ke),this._currentGeocodingDelimitation=ke;var Be=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(Be),this._activateMapInteraction(Be)}}onGPreverseGeocodingReturnPictoClick(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())}onReverseGeocodingSubmit(){if(!this._requestPosition){logger$m.log("missing position");return}this._reverseGeocodingRequest()}onReverseGeocodingResultClick(e){var Te=e.target.id,ke=Te.substring(Te.indexOf("_")+1),Be=this._resultsFeaturesSource.getFeatureById(parseInt(ke,10));this.dispatchEvent({type:"reversegeocode:onclickresult",location:Be.getProperties().location})}onReverseGeocodingResultMouseOver(e){var Te=e.target.id,ke=Te.substring(Te.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GPlocationHighlight"),!!this._resultsFeaturesSource){var Be=this._resultsFeaturesSource.getFeatureById(parseInt(ke,10));Be.setStyle(this._resultsSelectedStyle)}}onReverseGeocodingResultMouseOut(e){var Te=e.target.id,ke=Te.substring(Te.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GPlocationHighlight"),!!this._resultsFeaturesSource){var Be=this._resultsFeaturesSource.getFeatureById(parseInt(ke,10));Be.setStyle(this._resultsDefaultStyle)}}_clearResults(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_clearInputFeatures(){this._inputFeatures&&this._inputFeatures.clear(),this._requestGeom=null,this._requestPosition=null}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}};Object.assign(ReverseGeocode.prototype,ReverseGeocodeDOM);Object.assign(ReverseGeocode.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=ReverseGeocode);class XML{read(e){if(!e)return null;if(typeof e=="string"){const Te=parse$1(e);return this.readFromDocument(Te)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let Te=e.firstChild;Te;Te=Te.nextSibling)if(Te.nodeType==Node.ELEMENT_NODE)return this.readFromNode(Te);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(Oe){return Oe.getAttributeNS(NAMESPACE_URI,"href")}const NAMESPACE_URIS$2=[null,"http://www.opengis.net/wms"];function isV13(Oe){return compareVersions(Oe[0].version,"1.3")>=0}const PARSERS$2=makeStructureNS(NAMESPACE_URIS$2,{Service:makeObjectPropertySetter(readService),Capability:makeObjectPropertySetter(readCapability)}),COMMON_CAPABILITY_PARSERS={Request:makeObjectPropertySetter(readRequest),Exception:makeObjectPropertySetter(readException),Layer:makeObjectPropertySetter(readCapabilityLayer)},CAPABILITY_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_CAPABILITY_PARSERS,UserDefinedSymbolization:makeObjectPropertySetter(readUserDefinedSymbolization)}),CAPABILITY_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,COMMON_CAPABILITY_PARSERS);class WMSCapabilities extends XML{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const Te=pushParseAndPop({version:this.version},PARSERS$2,e,[]);return Te||null}}const COMMON_SERVICE_PARSERS={Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),OnlineResource:makeObjectPropertySetter(readHref),ContactInformation:makeObjectPropertySetter(readContactInformation),Fees:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString)},SERVICE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,COMMON_SERVICE_PARSERS),SERVICE_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_SERVICE_PARSERS,LayerLimit:makeObjectPropertySetter(readPositiveInteger),MaxWidth:makeObjectPropertySetter(readPositiveInteger),MaxHeight:makeObjectPropertySetter(readPositiveInteger)}),CONTACT_INFORMATION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPersonPrimary:makeObjectPropertySetter(readContactPersonPrimary),ContactPosition:makeObjectPropertySetter(readString),ContactAddress:makeObjectPropertySetter(readContactAddress),ContactVoiceTelephone:makeObjectPropertySetter(readString),ContactFacsimileTelephone:makeObjectPropertySetter(readString),ContactElectronicMailAddress:makeObjectPropertySetter(readString)}),CONTACT_PERSON_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPerson:makeObjectPropertySetter(readString),ContactOrganization:makeObjectPropertySetter(readString)}),CONTACT_ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{AddressType:makeObjectPropertySetter(readString),Address:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),StateOrProvince:makeObjectPropertySetter(readString),PostCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString)}),EXCEPTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeArrayPusher(readString)}),COMMON_LAYER_PARSERS={Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),BoundingBox:makeObjectPropertyPusher(readBoundingBox$1),Dimension:makeObjectPropertyPusher(readDimension),Attribution:makeObjectPropertySetter(readAttribution),AuthorityURL:makeObjectPropertyPusher(readAuthorityURL),Identifier:makeObjectPropertyPusher(readString),MetadataURL:makeObjectPropertyPusher(readMetadataURL),DataURL:makeObjectPropertyPusher(readFormatOnlineresource),FeatureListURL:makeObjectPropertyPusher(readFormatOnlineresource),Style:makeObjectPropertyPusher(readStyle$1),Layer:makeObjectPropertyPusher(readLayer$1)},LAYER_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_LAYER_PARSERS,SRS:makeObjectPropertyPusher(readString),Extent:makeObjectPropertySetter(readExtent),ScaleHint:makeObjectPropertyPusher(readScaleHint),LatLonBoundingBox:makeObjectPropertySetter((Oe,e)=>readBoundingBox$1(Oe,e,!1)),Layer:makeObjectPropertyPusher(readLayer$1)}),LAYER_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_LAYER_PARSERS,CRS:makeObjectPropertyPusher(readString),EX_GeographicBoundingBox:makeObjectPropertySetter(readEXGeographicBoundingBox),MinScaleDenominator:makeObjectPropertySetter(readDecimal),MaxScaleDenominator:makeObjectPropertySetter(readDecimal),Layer:makeObjectPropertyPusher(readLayer$1)}),ATTRIBUTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Title:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref),LogoURL:makeObjectPropertySetter(readSizedFormatOnlineresource)}),EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{westBoundLongitude:makeObjectPropertySetter(readDecimal),eastBoundLongitude:makeObjectPropertySetter(readDecimal),southBoundLatitude:makeObjectPropertySetter(readDecimal),northBoundLatitude:makeObjectPropertySetter(readDecimal)}),REQUEST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{GetCapabilities:makeObjectPropertySetter(readOperationType),GetMap:makeObjectPropertySetter(readOperationType),GetFeatureInfo:makeObjectPropertySetter(readOperationType)}),OPERATIONTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertyPusher(readString),DCPType:makeObjectPropertyPusher(readDCPType)}),DCPTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{HTTP:makeObjectPropertySetter(readHTTP)}),HTTP_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Get:makeObjectPropertySetter(readFormatOnlineresource),Post:makeObjectPropertySetter(readFormatOnlineresource)}),STYLE_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),LegendURL:makeObjectPropertyPusher(readSizedFormatOnlineresource),StyleSheetURL:makeObjectPropertySetter(readFormatOnlineresource),StyleURL:makeObjectPropertySetter(readFormatOnlineresource)}),FORMAT_ONLINERESOURCE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref)}),KEYWORDLIST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Keyword:makeArrayPusher(readString)});function readAttribution(Oe,e){return pushParseAndPop({},ATTRIBUTION_PARSERS,Oe,e)}function readUserDefinedSymbolization(Oe,e){return{SupportSLD:!!readBooleanString(Oe.getAttribute("UserDefinedSymbolization")),UserLayer:!!readBooleanString(Oe.getAttribute("UserLayer")),UserStyle:!!readBooleanString(Oe.getAttribute("UserStyle")),RemoteWFS:!!readBooleanString(Oe.getAttribute("RemoteWFS"))}}function readBoundingBox$1(Oe,e,Te=!0){const ke=[readDecimalString(Oe.getAttribute("minx")),readDecimalString(Oe.getAttribute("miny")),readDecimalString(Oe.getAttribute("maxx")),readDecimalString(Oe.getAttribute("maxy"))],Be=[readDecimalString(Oe.getAttribute("resx")),readDecimalString(Oe.getAttribute("resy"))],Ue={extent:ke,res:Be};return Te&&(isV13(e)?Ue.crs=Oe.getAttribute("CRS"):Ue.srs=Oe.getAttribute("SRS")),Ue}function readEXGeographicBoundingBox(Oe,e){const Te=pushParseAndPop({},EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS,Oe,e);if(!Te)return;const ke=Te.westBoundLongitude,Be=Te.southBoundLatitude,Ue=Te.eastBoundLongitude,He=Te.northBoundLatitude;if(!(ke===void 0||Be===void 0||Ue===void 0||He===void 0))return[ke,Be,Ue,He]}function readCapability(Oe,e){return pushParseAndPop({},isV13(e)?CAPABILITY_PARSERS_V13:CAPABILITY_PARSERS,Oe,e)}function readService(Oe,e){return pushParseAndPop({},isV13(e)?SERVICE_PARSERS_V13:SERVICE_PARSERS,Oe,e)}function readContactInformation(Oe,e){return pushParseAndPop({},CONTACT_INFORMATION_PARSERS,Oe,e)}function readContactPersonPrimary(Oe,e){return pushParseAndPop({},CONTACT_PERSON_PARSERS,Oe,e)}function readContactAddress(Oe,e){return pushParseAndPop({},CONTACT_ADDRESS_PARSERS,Oe,e)}function readException(Oe,e){return pushParseAndPop([],EXCEPTION_PARSERS,Oe,e)}function readCapabilityLayer(Oe,e){const Te=pushParseAndPop({},isV13(e)?LAYER_PARSERS_V13:LAYER_PARSERS$1,Oe,e);return Te.Layer===void 0?Object.assign(Te,readLayer$1(Oe,e)):Te}function readLayer$1(Oe,e){const Te=isV13(e),ke=e[e.length-1],Be=pushParseAndPop({},Te?LAYER_PARSERS_V13:LAYER_PARSERS$1,Oe,e);if(!Be)return;let Ue=readBooleanString(Oe.getAttribute("queryable"));Ue===void 0&&(Ue=ke.queryable),Be.queryable=Ue!==void 0?Ue:!1;let He=readNonNegativeIntegerString(Oe.getAttribute("cascaded"));He===void 0&&(He=ke.cascaded),Be.cascaded=He;let We=readBooleanString(Oe.getAttribute("opaque"));We===void 0&&(We=ke.opaque),Be.opaque=We!==void 0?We:!1;let Cn=readBooleanString(Oe.getAttribute("noSubsets"));Cn===void 0&&(Cn=ke.noSubsets),Be.noSubsets=Cn!==void 0?Cn:!1;let En=readDecimalString(Oe.getAttribute("fixedWidth"));En||(En=ke.fixedWidth),Be.fixedWidth=En;let An=readDecimalString(Oe.getAttribute("fixedHeight"));An||(An=ke.fixedHeight),Be.fixedHeight=An;const Sn=["Style","AuthorityURL"];Te?Sn.push("CRS"):Sn.push("SRS","Dimension"),Sn.forEach(function(Ln){if(Ln in ke){const Bn=Be[Ln]||[];Be[Ln]=Bn.concat(ke[Ln])}});const Tn=["BoundingBox","Attribution"];return Te?Tn.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):Tn.push("LatLonBoundingBox","ScaleHint","Extent"),Tn.forEach(function(Ln){if(!(Ln in Be)){const Bn=ke[Ln];Be[Ln]=Bn}}),Be}function readDimension(Oe,e){const Te={name:Oe.getAttribute("name"),units:Oe.getAttribute("units"),unitSymbol:Oe.getAttribute("unitSymbol")};return isV13(e)&&Object.assign(Te,{default:Oe.getAttribute("default"),multipleValues:readBooleanString(Oe.getAttribute("multipleValues")),nearestValue:readBooleanString(Oe.getAttribute("nearestValue")),current:readBooleanString(Oe.getAttribute("current")),values:readString(Oe)}),Te}function readExtent(Oe,e){return{name:Oe.getAttribute("name"),default:Oe.getAttribute("default"),nearestValue:readBooleanString(Oe.getAttribute("nearestValue"))}}function readScaleHint(Oe,e){return{min:readDecimalString(Oe.getAttribute("min")),max:readDecimalString(Oe.getAttribute("max"))}}function readFormatOnlineresource(Oe,e){return pushParseAndPop({},FORMAT_ONLINERESOURCE_PARSERS,Oe,e)}function readRequest(Oe,e){return pushParseAndPop({},REQUEST_PARSERS,Oe,e)}function readDCPType(Oe,e){return pushParseAndPop({},DCPTYPE_PARSERS,Oe,e)}function readHTTP(Oe,e){return pushParseAndPop({},HTTP_PARSERS$1,Oe,e)}function readOperationType(Oe,e){return pushParseAndPop({},OPERATIONTYPE_PARSERS,Oe,e)}function readSizedFormatOnlineresource(Oe,e){const Te=readFormatOnlineresource(Oe,e);if(Te){const ke=[readNonNegativeIntegerString(Oe.getAttribute("width")),readNonNegativeIntegerString(Oe.getAttribute("height"))];return Te.size=ke,Te}}function readAuthorityURL(Oe,e){const Te=readFormatOnlineresource(Oe,e);if(Te)return Te.name=Oe.getAttribute("name"),Te}function readMetadataURL(Oe,e){const Te=readFormatOnlineresource(Oe,e);if(Te)return Te.type=Oe.getAttribute("type"),Te}function readStyle$1(Oe,e){return pushParseAndPop({},STYLE_PARSERS$1,Oe,e)}function readKeywordList(Oe,e){return pushParseAndPop([],KEYWORDLIST_PARSERS,Oe,e)}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const Te=pushParseAndPop({},PARSERS$1,e,[]);return Te||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(Oe,e){return pushParseAndPop({},ADDRESS_PARSERS,Oe,e)}function readAllowedValues(Oe,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,Oe,e)}function readConstraint(Oe,e){const Te=Oe.getAttribute("name");if(Te)return pushParseAndPop({name:Te},CONSTRAINT_PARSERS,Oe,e)}function readContactInfo(Oe,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,Oe,e)}function readDcp(Oe,e){return pushParseAndPop({},DCP_PARSERS,Oe,e)}function readGet(Oe,e){const Te=readHref(Oe);if(Te)return pushParseAndPop({href:Te},REQUEST_METHOD_PARSERS,Oe,e)}function readHttp(Oe,e){return pushParseAndPop({},HTTP_PARSERS,Oe,e)}function readOperation(Oe,e){const Te=Oe.getAttribute("name"),ke=pushParseAndPop({},OPERATION_PARSERS,Oe,e);if(!ke)return;const Be=e[e.length-1];Be[Te]=ke}function readOperationsMetadata(Oe,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,Oe,e)}function readPhone(Oe,e){return pushParseAndPop({},PHONE_PARSERS,Oe,e)}function readServiceIdentification(Oe,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,Oe,e)}function readServiceContact(Oe,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,Oe,e)}function readServiceProvider(Oe,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,Oe,e)}function readValue(Oe,e){return readString(Oe)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let Te=e.getAttribute("version");Te&&(Te=Te.trim());let ke=this.owsParser_.readFromNode(e);return ke?(ke.version=Te,ke=pushParseAndPop(ke,PARSERS,e,[]),ke||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),BoundingBox:makeObjectPropertyPusher(readBoundingBoxWithCrs),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(Oe,e){return pushParseAndPop({},CONTENTS_PARSERS,Oe,e)}function readLayer(Oe,e){return pushParseAndPop({},LAYER_PARSERS,Oe,e)}function readTileMatrixSet(Oe,e){return pushParseAndPop({},TMS_PARSERS,Oe,e)}function readStyle(Oe,e){const Te=pushParseAndPop({},STYLE_PARSERS,Oe,e);if(!Te)return;const ke=Oe.getAttribute("isDefault")==="true";return Te.isDefault=ke,Te}function readTileMatrixSetLink(Oe,e){return pushParseAndPop({},TMS_LINKS_PARSERS,Oe,e)}function readDimensions(Oe,e){return pushParseAndPop({},DIMENSION_PARSERS,Oe,e)}function readResourceUrl(Oe,e){const Te=Oe.getAttribute("format"),ke=Oe.getAttribute("template"),Be=Oe.getAttribute("resourceType"),Ue={};return Te&&(Ue.format=Te),ke&&(Ue.template=ke),Be&&(Ue.resourceType=Be),Ue}function readBoundingBox(Oe,e){const Te=pushParseAndPop([],WGS84_BBOX_READERS,Oe,e);if(Te.length==2)return boundingExtent(Te)}function readBoundingBoxWithCrs(Oe,e){const Te=Oe.getAttribute("crs"),ke=pushParseAndPop([],WGS84_BBOX_READERS,Oe,e);if(ke.length==2)return{extent:boundingExtent(ke),crs:Te}}function readLegendUrl(Oe,e){const Te={};return Te.format=Oe.getAttribute("format"),Te.href=readHref(Oe),Te}function readCoordinates(Oe,e){const Te=readString(Oe).split(/\s+/);if(!Te||Te.length!=2)return;const ke=+Te[0],Be=+Te[1];if(!(isNaN(ke)||isNaN(Be)))return[ke,Be]}function readTileMatrix(Oe,e){return pushParseAndPop({},TM_PARSERS,Oe,e)}function readTileMatrixLimitsList(Oe,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,Oe,e)}function readTileMatrixLimits(Oe,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,Oe,e)}var eventbus_min$1={exports:{}},eventbus_min=eventbus_min$1.exports,hasRequiredEventbus_min;function requireEventbus_min(){return hasRequiredEventbus_min||(hasRequiredEventbus_min=1,function(Oe,e){(function(Te,ke){Oe.exports=ke()})(eventbus_min,function(){var Te={};Te=function(){this.listeners={}},Te.prototype={addEventListener:function(Be,Ue,He){for(var We=[],Cn=arguments.length,En=0;En<Cn;En++)We.push(arguments[En]);We=We.length>3?We.splice(3,We.length-1):[],typeof this.listeners[Be]<"u"?this.listeners[Be].push({scope:He,callback:Ue,args:We}):this.listeners[Be]=[{scope:He,callback:Ue,args:We}]},removeEventListener:function(Be,Ue,He){if(typeof this.listeners[Be]<"u"){for(var We=this.listeners[Be].length,Cn=[],En=0;En<We;En++){var An=this.listeners[Be][En];An.scope==He&&An.callback==Ue||Cn.push(An)}this.listeners[Be]=Cn}},hasEventListener:function(Be,Ue,He){if(typeof this.listeners[Be]<"u"){var We=this.listeners[Be].length;if(Ue===void 0&&He===void 0)return We>0;for(var Cn=0;Cn<We;Cn++){var En=this.listeners[Be][Cn];if((!He||En.scope==He)&&En.callback==Ue)return!0}}return!1},dispatch:function(Be,Ue){for(var He={type:Be,target:Ue},We=[],Cn=arguments.length,En=0;En<Cn;En++)We.push(arguments[En]);if(We=We.length>2?We.splice(2,We.length-1):[],We=[He].concat(We),typeof this.listeners[Be]<"u")for(var An=this.listeners[Be].slice(),Sn=An.length,En=0;En<Sn;En++){var Tn=An[En];if(Tn&&Tn.callback){var Ln=We.concat(Tn.args);Tn.callback.apply(Tn.scope,Ln)}}},getEvents:function(){var Be="";for(var Ue in this.listeners)for(var He=this.listeners[Ue].length,We=0;We<He;We++){var Cn=this.listeners[Ue][We];Be+=Cn.scope&&Cn.scope.className?Cn.scope.className:"anonymous",Be+=" listen for '"+Ue+`'
`}return Be}};var ke=new Te;return ke})}(eventbus_min$1)),eventbus_min$1.exports}var eventbus_minExports=requireEventbus_min();const EventBus=getDefaultExportFromCjs$1(eventbus_minExports);var EventEditor={onloaded:"editor:onloaded",layer:{onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},legend:{onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},group:{oncollapse:"editor:group:oncollapse"},style:{oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},filter:{oneditjson:"editor:filter:oneditjson"},themes:{onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"},search:{onsubmit:"editor:search:onsubmit",onautocomplete:"editor:search:onautocomplete"}},logger$l=LoggerByDefault.getLogger("editor-style");class Style{constructor(e){if(logger$l.trace("[constructor] Style",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Style))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={scale:!0,edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}}_initContainer(){var e=this,Te=!1,ke=JSON.parse(JSON.stringify(this.options.obj)),Be={};ke.paint&&(Te=!0,Be.paint=ke.paint,Object.keys(ke.paint).length===0&&logger$l.info("tag 'paint' is empty !")),ke.layout&&(Te=!0,Be.layout=ke.layout,ke.layout.visibility&&delete Be.visibility,Object.keys(ke.layout).length===0&&logger$l.info("tag 'layout' is empty !"));var Ue=document.createElement("div");Ue.className=this.name.container;var He=null;if(Te){var We=JSON.stringify(Be,null,4);He=this._syntaxHighlight(We)}var Cn=document.createElement("div");Cn.className=this.name.containerjson;var En=document.createElement("label");En.className=this.name.jsonlabel,En.innerHTML=this.options.title,Cn.appendChild(En);var An=document.createElement("pre");An.className=this.name.jsondisplay,An.innerHTML=He,An.addEventListener?An.addEventListener("click",function(Sn){e.options.tools.edition&&e.onEditJsonStyleMapBox(Sn)}):An.attachEvent&&An.attachEvent("onclick",function(Sn){e.options.tools.edition&&e.onEditJsonStyleMapBox(Sn)}),Cn.appendChild(An),Ue.appendChild(Cn),this.options.tools.scale&&Ue.appendChild(this._createElementToolsScale({min:Be.layout?Be.layout.minzoom:0,max:Be.layout?Be.layout.maxzoom:21})),this.options.tools.edition&&Ue.appendChild(this._createElementToolsEdition()),this.container=Ue}_createElementToolsScale(e){logger$l.trace("_createElementToolsScale");var Te=this,ke=this.options.obj,Be=document.createElement("div");Be.className=this.name.containertoolsscale;var Ue=document.createElement("div");Ue.className=this.name.containertoolsminscale;var He=document.createElement("label");He.className=this.name.scalelabelmin,He.innerHTML="min :",Ue.appendChild(He);var We=document.createElement("input");We.className=this.name.scaleinputmin,We.type="range",We.value=e.min||0,We.title=e.min||0,We.disabled=!1,We.min=0,We.max=21,We.data=ke,We.addEventListener?We.addEventListener("change",function(Sn){Te.onChangeStyleScaleMinMapBox(Sn)}):We.appendChild&&We.appendChild("onchange",function(Sn){Te.onChangeStyleScaleMinMapBox(Sn)}),Ue.appendChild(We),Be.appendChild(Ue);var Cn=document.createElement("div");Cn.className=this.name.containertoolsmaxscale;var En=document.createElement("label");En.className=this.name.scalelabelmax,En.innerHTML="max :",Cn.appendChild(En);var An=document.createElement("input");return An.className=this.name.scaleinputmin,An.type="range",An.value=e.max||21,An.title=e.max||21,An.disabled=!1,An.min=0,An.max=21,An.data=ke,An.addEventListener?An.addEventListener("change",function(Sn){Te.onChangeStyleScaleMaxMapBox(Sn)}):An.appendChild&&An.appendChild("onchange",function(Sn){Te.onChangeStyleScaleMaxMapBox(Sn)}),Cn.appendChild(An),Be.appendChild(Cn),Be}_createElementToolsEdition(){logger$l.warn("_createElementToolsEdition, it's not yet implemented !");var e=document.createElement("div");return e.className=this.name.containertoolsedit,e}_syntaxHighlight(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(Te){var ke="gp-json-number";return/^"/.test(Te)?/:$/.test(Te)?ke="gp-json-key":ke="gp-json-string":/true|false/.test(Te)?ke="gp-json-boolean":/null/.test(Te)&&(ke="gp-json-null"),"<span class='"+ke+"'>"+Te+"</span>"})}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$l.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonStyleMapBox(e){logger$l.trace("onEditJsonStyleMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.oneditjson,e)}onChangeStyleScaleMinMapBox(e){logger$l.trace("onChangeStyleScaleMinMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemin,e)}onChangeStyleScaleMaxMapBox(e){logger$l.trace("onChangeStyleScaleMaxMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemax,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Style=Style);var logger$k=LoggerByDefault.getLogger("editor-themes");class Themes{constructor(e){if(logger$k.trace("[constructor] Themes",e),this.options=e||{},!(this instanceof Themes))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={thumbnails:!0,button:{visible:!0,type:"radio"}};(!this.options.tools||Object.keys(this.options.tools).length===0)&&(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),(typeof this.options.obj>"u"||this.options.obj===null||!this.options.obj)&&(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}}_initContainer(){var e=this,Te=this.options.obj,ke=this.id||SelectorID.generate(),Be=document.createElement("div");Be.className=this.name.container,Be.title=Te.themesSummary||"";var Ue=Te.themes;if(Ue)for(var He=0;He<Ue.length;He++){var We=Ue[He],Cn=document.createElement("div");Cn.id=this.name.containerthemeID+He+"_"+ke,Cn.className=this.name.containertheme,Cn.tabIndex=He;var En=We.url,An=We.selected||!1;if(En){var Sn=this.options.tools.button;if(Sn.visible){var Tn=Sn.type==="checkbox"?"checkbox":"radio",Ln=document.createElement("input");Ln.type=Tn,Ln.id=this.name.inputID+He+"_"+ke,Ln.className=this.name.input,Ln.name=ke,Ln.checked=An,Ln.data=En,Ln.addEventListener?Ln.addEventListener("click",function(ni){e.onClickThemeTitleMapBox(ni)}):Ln.attachEvent&&Ln.attachEvent("onclick",function(ni){e.onClickThemeTitleMapBox(ni)}),Cn.appendChild(Ln)}if(this.options.tools.thumbnails&&We.thumbnail){var Bn=document.createElement("img");Bn.id=this.name.imageID+He+"_"+ke,Bn.className=this.name.image,Bn.src=We.thumbnail,Bn.alt=We.thumbnail,Bn.title=We.description||"",Bn.data=En,Bn.addEventListener?Bn.addEventListener("click",function(ni){e.onClickThemeImageMapBox(ni);var ri=ni.target.parentElement.childNodes;if(ri){var si=ri[0];si.tagName.toLowerCase()==="input"&&(si.checked=!si.checked)}}):Bn.attachEvent&&Bn.attachEvent("onclick",function(ni){e.onClickThemeImageMapBox(ni);var ri=ni.target.parentElement.childNodes;if(ri){var si=ri[0];si.tagName.toLowerCase()==="input"&&(si.checked=!si.checked)}}),Cn.appendChild(Bn)}if(We.name){var ei=document.createElement("label");ei.id=this.name.labelID+He+"_"+ke,this.options.tools.button.visible&&(ei.htmlFor=Ln.id),ei.className=this.name.label,ei.innerHTML=We.name,ei.title=We.description||"",ei.data=En,this.options.tools.button.visible||(ei.addEventListener?ei.addEventListener("click",function(ni){e.onClickThemeTitleMapBox(ni)}):ei.attachEvent&&ei.attachEvent("onclick",function(ni){e.onClickThemeTitleMapBox(ni)})),Cn.appendChild(ei)}}else{var ti=document.createElement("label");ti.className=this.name.message,ti.innerHTML="Thème non disponible...",Cn.appendChild(ti)}Be.appendChild(Cn)}this.container=Be}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$k.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onClickThemeImageMapBox(e){if(logger$k.trace("onClickThemeImageMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var Te=e.target.previousSibling.id.substring(e.target.previousSibling.id.lastIndexOf("_")+1),ke=document.getElementsByClassName(this.name.input),Be=0;Be<ke.length;Be++){var Ue=ke[Be];if(Ue.id!==e.target.previousSibling.id){var He=Ue.id.substring(Ue.id.lastIndexOf("_")+1);He===Te&&(Ue.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclickimage,e)}onClickThemeTitleMapBox(e){if(logger$k.trace("onClickThemeTitleMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var Te=e.target.id.substring(e.target.id.lastIndexOf("_")+1),ke=document.getElementsByClassName(this.name.input),Be=0;Be<ke.length;Be++){var Ue=ke[Be];if(Ue.id!==e.target.id){var He=Ue.id.substring(Ue.id.lastIndexOf("_")+1);He===Te&&(Ue.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclicktitle,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Themes=Themes);var logger$j=LoggerByDefault.getLogger("editor-filter");class Filter{constructor(e){if(logger$j.trace("[constructor] Filter",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Filter))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}}_initContainer(){var e=this,Te=!1,ke=JSON.parse(JSON.stringify(this.options.obj));ke.filter&&(Te=!0,ke.filter.length===0&&logger$j.info("tag 'filter' is empty !"));var Be=document.createElement("div");Be.className=this.name.container;var Ue=null;Te&&(Ue=JSON.stringify(ke.filter,null,4));var He=document.createElement("div");He.className=this.name.containerjson;var We=document.createElement("label");We.className=this.name.jsonlabel,We.innerHTML=this.options.title,He.appendChild(We);var Cn=document.createElement("pre");if(Cn.className=this.name.jsondisplay,Cn.innerHTML=Ue,Cn.addEventListener?Cn.addEventListener("click",function(An){e.options.tools.edition&&e.onEditJsonFilterMapBox(An)}):Cn.attachEvent&&Cn.attachEvent("onclick",function(An){e.options.tools.edition&&e.onEditJsonFilterMapBox(An)}),He.appendChild(Cn),Be.appendChild(He),this.options.tools.edition){var En=document.createElement("div");En.className=this.name.containertoolsedit,Be.appendChild(En)}this.container=Be}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$j.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonFilterMapBox(e){logger$j.trace("onEditJsonFilterMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.filter.oneditjson,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Filter=Filter);var logger$i=LoggerByDefault.getLogger("editor-legend");class Legend{constructor(e){if(logger$i.trace("[constructor] Legend",e),this.options=e||{target:null,position:0,sprites:null,obj:null},!(this instanceof Legend))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var e=this.options.obj.editable;this.editable=typeof e<"u"?e:!1,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"Opacité du trait","fill-color":"Couleur de remplissage","fill-opacity":"Opacité du remplissage"}}_initContainer(){var e=this.options.obj,Te=document.createElement("div");Te.className=this.name.container;var ke=Object.assign({},e.paint,e.layout),Be=Object.keys(ke);if(Be.length===0){logger$i.info("tag 'paint' or 'layout' is empty !");return}for(var Ue={},He=!1,We=0;We<Be.length;We++){var Cn=Be[We];if(/fill-/.test(Cn)||/line-/.test(Cn)||/circle-/.test(Cn)||/background-/.test(Cn)||/text-/.test(Cn)||/icon-/.test(Cn)){He=!0;var En=e.title||"",An=Cn.split("-")[0];(An==="text"||An==="icon")&&(An="symbol"),this.legendRender=this._getProperties(An,ke),Ue={edit:this.editable,title:En,type:this.legendRender.type,values:this.legendRender.values},Te.appendChild(this._createElementIconLegend(Ue));break}}He||(Ue={edit:this.editable,title:"",type:this.legendRender.type,values:this.legendRender.values},Te.appendChild(this._createElementIconLegend(Ue)),logger$i.warn("legend type unknown, default legend used...")),this.toolscontainer=this._createElementEditionLegend(Ue),Te.appendChild(this.toolscontainer),this.container=Te}_getProperties(e,Te){if(e==="symbol"){var ke=Te["text-field"],Be=Te["icon-image"];if(e=ke&&Be?"icon":ke?"text":Be?"icon":"unknow",e==="unknow"){logger$i.warn("type unknow !?");return}}var Ue={};for(const En in Te)if(Object.hasOwnProperty.call(Te,En)){const An=Te[En];if(Legend.PROPERTIES[e].includes(En)){var He=En.replace(e,"").slice(1),We=this._getValue(An);if(We){if((He==="pattern"||He==="image")&&(!this.options.sprites||!this.options.sprites.json||!this.options.sprites.json[We])){var Cn=e+":"+He;logger$i.warn("sprites mandatory for key ",Cn);break}Ue[He]=We}}else logger$i.warn("property not supported : ",En)}return{type:e,values:Ue}}_renderThumbnail(e,Te){var ke=this.rendercontainer;if(!ke)return!1;var Be=null,Ue=3;switch(Te.color||(Te.color="#FFFFFF"),e){case"text":var He="font-size: 5em;font-weight: bold;";Be=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' dominant-baseline='central' style='%style%'> T </text></svg>")`,ke.style.background=Be.replace("%color%",Te.color.indexOf("rgb")===0?Te.color:ColorUtils.hexToRgba(Te.color,1)).replace("%opacity%",Te.opacity||1).replace("%style%",He);break;case"icon":if(Te.image)Be="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[Te.image].x).replace("%y%",this.options.sprites.json[Te.image].y).replace(/%w%/g,this.options.sprites.json[Te.image].width).replace(/%h%/g,this.options.sprites.json[Te.image].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),ke.innerHTML=Be;else{var We="fill: transparent;stroke-width: 10;";Be=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>")`,ke.style.background=Be.replace("%color%",Te.color.indexOf("rgb")===0?Te.color:ColorUtils.hexToRgba(Te.color,1)).replace("%style%",We)}break;case"line":var Cn=Array.isArray(Te.dasharray)?Te.dasharray.join(" "):0;Be=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><line x1='0' y1='100' x2='100' y2='0' stroke='%color%' stroke-width='%stroke-width%' stroke-opacity='%stroke-opacity%' stroke-dasharray='%stroke-dasharray%' /></svg>")`,ke.style.background=Be.replace("%color%",Te.color.indexOf("rgb")===0?Te.color:ColorUtils.hexToRgba(Te.color,1)).replace("%stroke-opacity%",Te.opacity||1).replace("%stroke-dasharray%",Cn).replace("%stroke-width%",(Te.width||0)*Ue);break;case"circle":var En=Te["stroke-color"]||"#FFFFFF";Be=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke-color%' stroke-width='%stroke-width%' stroke-opacity='%strock-opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>")`,ke.style.background=Be.replace("%color%",Te.color.indexOf("rgb")===0?Te.color:ColorUtils.hexToRgba(Te.color,1)).replace("%opacity%",Te.opacity||1).replace("%stroke-color%",En.indexOf("rgb")===0?En:ColorUtils.hexToRgba(En,1)).replace("%stroke-opacity%",Te["stroke-opacity"]||1).replace("%stroke-width%",(Te["stroke-width"]||0)*Ue);break;case"background":case"fill":if(Te.pattern)Be="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[Te.pattern].x).replace("%y%",this.options.sprites.json[Te.pattern].y).replace(/%w%/g,this.options.sprites.json[Te.pattern].width).replace(/%h%/g,this.options.sprites.json[Te.pattern].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),ke.innerHTML=Be;else{var An=Te["outline-color"]||"#FFFFFF";Be=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' stroke='%stroke-color%' stroke-width='3' fill='%color%' fill-opacity='%opacity%' /></svg>")`,ke.style.background=Be.replace("%color%",Te.color.indexOf("rgb")===0?Te.color:ColorUtils.hexToRgba(Te.color,1)).replace("%opacity%",Te.opacity||1).replace("%stroke-color%",An.indexOf("rgb")===0?An:ColorUtils.hexToRgba(An,1))}break;default:return logger$i.warn("type not found, no thumbnail..."),!1}return!0}_getValue(e){var Te=null;if(typeof e=="string")Te=e;else if(typeof e=="number")Te=e;else if(Array.isArray(e)){var ke=!0;e.forEach(Ue=>{typeof Ue!="number"&&(ke=!1)}),ke&&(Te=e)}else if(typeof e=="object"){if(Te=null,"stops"in e){e.stops.sort((Ue,He)=>{var We=Ue[0],Cn=He[0];return We>Cn?-1:We<Cn?1:0});var Be=e.stops.slice(-1);Te=Be[0][1]}}else logger$i.warn("value not supported !");return Te}_createElementIconLegend(e){var Te=this,ke=document.createElement("div");ke.className=this.name.containerlegendrender;var Be=this.rendercontainer=document.createElement("div");Be.className=this.name.legendrender,e.edit&&(Be.className+=" ",Be.className+=this.name.legendeditable,Be.addEventListener?Be.addEventListener("click",function(We){Te.onEditionLegendMapBox(We)}):Be.attachEvent&&Be.attachEvent("onclick",function(We){Te.onEditionLegendMapBox(We)}));var Ue=e.type;this._renderThumbnail(Ue,e.values)?Be.className+=e.edit?" legend-"+Ue:" legend-"+Ue+"-not-editable":Be.className+=" legend-unknow",ke.appendChild(Be);var He=document.createElement("span");return He.className=this.name.legendtitle,He.innerHTML=e.title||"",ke.appendChild(He),ke}_createElementEditionLegend(e){var Te=this,ke=document.createElement("div");if(ke.className=this.name.containerlegendtools,!e.edit)return ke;switch(e.type){case"line":Be.call(Te),Ue.call(Te),He.call(Te);break;case"background":case"fill":We.call(Te),Cn.call(Te);break}function Be(){var En=document.createElement("div");En.className="legend-styling-div";var An=document.createElement("label");An.className="legend-line",An.htmlFor=this.id?"line-color-"+this.id:"line-color",An.innerHTML=this.labels["line-color"];var Sn=document.createElement("input");Sn.className="legend-styling",Sn.id=this.id?"line-color-"+this.id:"line-color",Sn.title="Selectionner une couleur de trait",Sn.type="color",Sn.value=e.values.color,Sn.setAttribute("data-id","line-color"),Sn.addEventListener?Sn.addEventListener("change",function(Tn){Te._renderThumbnail(e.type,Object.assign(e.values,{color:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onchange",function(Tn){Te._renderThumbnail(e.type,Object.assign(e.values,{color:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}),En.appendChild(An),En.appendChild(Sn),ke.appendChild(En)}function Ue(){var En=document.createElement("div");En.className="legend-styling-div";var An=document.createElement("label");An.className="legend-line",An.htmlFor=this.id?"line-width-"+this.id:"line-width",An.innerHTML=this.labels["line-width"];var Sn=document.createElement("input");Sn.className="legend-styling",Sn.id=this.id?"line-width-"+this.id:"line-width",Sn.title=e.values.width,Sn.type="range",Sn.min="0",Sn.max="10",Sn.step="1",Sn.defaultValue=e.values.width,Sn.setAttribute("data-id","line-width"),Sn.addEventListener?Sn.addEventListener("change",function(Tn){logger$i.trace(Tn),Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{width:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onchange",function(Tn){logger$i.trace(Tn),Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{width:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}),En.appendChild(An),En.appendChild(Sn),ke.appendChild(En)}function He(){var En=document.createElement("div");En.className="legend-styling-div";var An=document.createElement("label");An.className="legend-line",An.htmlFor=this.id?"line-opacity-"+this.id:"line-opacity",An.innerHTML=this.labels["line-opacity"];var Sn=document.createElement("input");Sn.className="legend-styling",Sn.id=this.id?"line-opacity-"+this.id:"line-opacity",Sn.title=e.values.opacity,Sn.type="range",Sn.min="0",Sn.max="1",Sn.step="0.1",Sn.defaultValue=e.values.opacity,Sn.setAttribute("data-id","line-opacity"),Sn.addEventListener?Sn.addEventListener("change",function(Tn){logger$i.trace(Tn),Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{opacity:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onchange",function(Tn){logger$i.trace(Tn),Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{opacity:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}),En.appendChild(An),En.appendChild(Sn),ke.appendChild(En)}function We(){var En=document.createElement("div");En.className="legend-styling-div";var An=document.createElement("label");An.className="legend-fill",An.htmlFor=this.id?"fill-color-"+this.id:"fill-color",An.innerHTML=this.labels["fill-color"];var Sn=document.createElement("input");Sn.className="legend-styling",Sn.id=this.id?"fill-color-"+this.id:"fill-color",Sn.title="Selectionner une couleur de remplissage",Sn.type="color",Sn.value=e.values.color,Sn.setAttribute("data-id","fill-color"),Sn.addEventListener?Sn.addEventListener("change",function(Tn){Te._renderThumbnail(e.type,Object.assign(e.values,{color:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onchange",function(Tn){Te._renderThumbnail(e.type,Object.assign(e.values,{color:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}),En.appendChild(An),En.appendChild(Sn),ke.appendChild(En)}function Cn(){var En=document.createElement("div");En.className="legend-styling-div";var An=document.createElement("label");An.className="legend-fill",An.htmlFor=this.id?"fill-opacity-"+this.id:"fill-opacity",An.innerHTML=this.labels["fill-opacity"];var Sn=document.createElement("input");Sn.className="legend-styling",Sn.id=this.id?"fill-opacity-"+this.id:"fill-opacity",Sn.title=e.values.opacity,Sn.type="range",Sn.min="0",Sn.max="1",Sn.step="0.1",Sn.defaultValue=e.values.opacity,Sn.setAttribute("data-id","fill-opacity"),Sn.addEventListener?Sn.addEventListener("change",function(Tn){Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{opacity:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onchange",function(Tn){Tn.target.title=Tn.target.value,Te._renderThumbnail(e.type,Object.assign(e.values,{opacity:Tn.target.value})),Te.onChangeValueLegendMapBox(Tn)}),En.appendChild(An),En.appendChild(Sn),ke.appendChild(En)}return ke}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$i.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}isEditable(){return this.editable}getRenderContainer(){return this.rendercontainer}getToolsContainer(){return this.toolscontainer}getContainer(){return this.container}onEditionLegendMapBox(e){logger$i.trace("onEditionLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onclickedition,e)}onChangeValueLegendMapBox(e){logger$i.trace("onChangeValueLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onchangevalue,e)}}Legend.PROPERTIES={line:["line-color","line-dasharray","line-opacity","line-width"],fill:["fill-color","fill-opacity","fill-outline-color","fill-pattern"],background:["background-color","background-opacity","background-pattern"],circle:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"],icon:["icon-color","icon-image","icon-opacity","__icon-size"],text:["__text-anchor","text-color","text-field","__text-font","__text-opacity","__text-size"]};window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Legend=Legend);var logger$h=LoggerByDefault.getLogger("editor-layer");class Layer{constructor(e){if(logger$h.trace("[constructor] Layer",e),this.options=e||{},!(this instanceof Layer))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1);var Te={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=Te),Helper.mergeParams(this.options.obj,Te,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}}_initContainer(){var e=this,Te=this.options.obj,ke=document.createElement("div");ke.className=this.name.container;var Be=document.createElement("div");if(Be.id=this.name.containertitle+"-"+this.options.position,Be.className=this.name.containertitle,this.options.tools.pin){var Ue=document.createElement("input");Ue.id=this.name.imagelabelinput+"-"+this.options.position,Ue.className=this.name.imagelabelinput,Ue.type="checkbox",Be.appendChild(Ue);var He=document.createElement("label");He.className=this.name.imagelabel,He.htmlFor=Ue.id,He.addEventListener?He.addEventListener("click",function(Tn){e.onClickLayerMapBox(Tn)}):He.attachEvent&&He.attachEvent("onclick",function(Tn){e.onClickLayerMapBox(Tn)}),Be.appendChild(He)}var We=function(){var Tn=document.createElement("div");if(Tn.id=this.name.containertools+"-"+this.options.position,Tn.className=this.name.containertools,this.options.tools.visibility){var Ln=document.createElement("input");Ln.id=this.name.visibilityinput+"-"+this.options.position,Ln.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,Ln.type="checkbox",Ln.checked="checked",Ln.addEventListener?Ln.addEventListener("click",function(ei){e.onVisibilityLayerMapBox(ei)}):Ln.attachEvent&&Ln.attachEvent("onclick",function(ei){e.onVisibilityLayerMapBox(ei)}),Tn.appendChild(Ln),this.DomVisibility=Ln;var Bn=document.createElement("label");Bn.htmlFor=this.name.visibilityinput+"-"+this.options.position,Bn.id=this.name.visibilitylabel+"-"+this.options.position,Bn.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,Bn.title="Afficher/masquer la couche",Tn.appendChild(Bn),ke.appendChild(Tn)}this.options.tools.clone&&logger$h.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&logger$h.warn("Dom for tools remove, it's not yet implemented !")};if(this.options.tools.icon.anchor==="start"&&We.apply(this),this.options.tools.type&&Te.type){var Cn=document.createElement("img");switch(Cn.className=this.name.typeimg,Te.type.toUpperCase()){case"SYMBOL-ICON":Cn.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":Cn.style["background-position"]="-194px 0";break;case"SYMBOL":Cn.style["background-position"]="-84px 0";break;case"LINE":Cn.style["background-position"]="-28px 0";break;case"FILL":Cn.style["background-position"]="-56px 0";break;case"BACKGROUND":Cn.style["background-position"]="-140px 0";break;case"CIRCLE":Cn.style["background-position"]="-168px 0";break;default:Cn.style["background-position"]="-112px 0"}Be.appendChild(Cn)}var En=document.createElement("div");En.id=this.name.containerlegend+"-"+this.options.position,En.className=this.name.containerlegend,Be.appendChild(En);var An=document.createElement("input");An.id=this.name.titleinput+"-"+this.options.position,An.className=this.name.titleinput,An.type="checkbox",Be.appendChild(An);var Sn=document.createElement("label");Sn.className=this.name.titlelabel,Sn.htmlFor=An.id,Sn.innerHTML=Te.id||Te["source-layer"]||Te.source,Sn.title=Te["source-layer"]||Te.source||Te.id,Sn.addEventListener?Sn.addEventListener("click",function(Tn){e.onClickLayerMapBox(Tn)}):Sn.attachEvent&&Sn.attachEvent("onclick",function(Tn){e.onClickLayerMapBox(Tn)}),Be.appendChild(Sn),this.DomToggle=Sn,ke.appendChild(Be),this.options.tools.icon.anchor==="end"&&We.apply(this),this.container=ke}add(){if(logger$h.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}addStyle(e){logger$h.trace("addStyle()",e),e&&typeof e=="object"&&e instanceof Style&&(this.oStyle=e,this.oStyle.display(!1))}addFilter(e){logger$h.trace("addFilter()",e),e&&typeof e=="object"&&e instanceof Filter&&(this.oFilter=e,this.oFilter.display(!1))}addLegend(e){logger$h.trace("addLegend()",e),e&&typeof e=="object"&&e instanceof Legend&&(this.oLegend=e,this.oLegend.display(!1))}slotLegend(){var e=this.oLegend;if(e){var Te=null,ke=this.container.childNodes;if(ke.length)for(var Be=this.options.tools.icon.anchor==="start"?1:0,Ue=ke[Be].childNodes,He=0;He<Ue.length;He++){var We=Ue[He];We.id.indexOf(this.name.containerlegend)!==-1&&(Te=We)}if(Te){var Cn=e.getRenderContainer();Cn&&(Te.appendChild(Cn),this.bSlotLegend=!0)}}}visibility(e){if(logger$h.trace("visibility()",e),!!this.options.tools.visibility)return typeof e<"u"&&(this.DomVisibility.checked=e?"checked":""),this.DomVisibility.checked}collapse(){logger$h.trace("collapse()"),this.DomToggle.click()}visible(){logger$h.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()}display(e){logger$h.trace("display()",e);var Te=document.getElementById(this.DomToggle.htmlFor).checked;return typeof e<"u"&&(this.container.style.display=e?"inline-flex":"none",this.oStyle&&this.oStyle.display(e&&Te),this.oFilter&&this.oFilter.display(e&&Te),this.oLegend&&this.oLegend.display(e&&Te)),Te}active(e){return logger$h.trace("active()",e),typeof e<"u"&&(this.container.className=e?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container}getContainer(){return this.container}onClickLayerMapBox(e){logger$h.trace("onClickLayerMapBox",e);var Te=e.target.htmlFor.substring(e.target.htmlFor.indexOf("-")),ke=document.getElementById(e.target.htmlFor).checked;e.target.htmlFor===this.name.imagelabelinput+Te&&(document.getElementById(this.name.titleinput+Te).checked=!ke),e.target.htmlFor===this.name.titleinput+Te&&document.getElementById(this.name.imagelabelinput+Te)&&(document.getElementById(this.name.imagelabelinput+Te).checked=!ke),this.oStyle&&this.oStyle.display(!ke),this.oFilter&&this.oFilter.display(!ke),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!ke)}onVisibilityLayerMapBox(e){logger$h.trace("onVisibilityLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickvisibility,e)}onCloneLayerMapBox(e){logger$h.trace("onCloneLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickclone,e)}onRemoveLayerMapBox(e){logger$h.trace("onRemoveLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickremove,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Layer=Layer);var logger$g=LoggerByDefault.getLogger("editor-group");class Group{constructor(e){if(logger$g.trace("[constructor] Group",e),this.options=e||{},!(this instanceof Group))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.title||(this.options.title="Détails du groupe..."),typeof this.options.collapse>"u"&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}}_initContainer(){var e=document.createElement("div");e.className=this.name.container;var Te=document.createElement("details");Te.className=this.name.details,Te.open=!this.options.collapse,e.appendChild(Te);var ke=document.createElement("summary");ke.className=this.name.summary,ke.innerHTML=this.options.title,Te.appendChild(ke),this.container=e}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)}display(e){this.container.style.display=e?"flex":"none"}getContainer(){var e=this.container.childNodes;return e.length?e[0]:this.container}onCollapseGroupMapBox(e){logger$g.trace("onCollapseGroupMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.group.oncollapse,e)}}var logger$f=LoggerByDefault.getLogger("editor-search");class Search{constructor(e){if(logger$f.trace("[constructor] Search",e),this.options=e||{target:null,tools:null,title:null,obj:null},!(this instanceof Search))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={}),this.options.title||(this.options.title="Recherche de couches :"),this.container=null,this.name={target:"GPEditorMapBoxSearchTarget",container:"GPEditorMapBoxSearchContainer"}}_initContainer(){var e=JSON.parse(JSON.stringify(this.options.obj));e.layers&&e.layers.length===0&&logger$f.info("tag 'layers' is empty !");var Te=document.createElement("div");Te.className=this.name.container,this.container=Te}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var Te=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];Te.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$f.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onSubmitSearchLayersMapBox(e){logger$f.trace("onSubmitSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onsubmit,e)}onAutocompleteSearchLayersMapBox(e){logger$f.trace("onAutocompleteSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onautocomplete,e)}}var EditorDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e}},logger$e=LoggerByDefault.getLogger("editor");class Editor{constructor(e){if(logger$e.trace("[constructor] Editor",e),this.options=e||{},!(this instanceof Editor))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}_initialize(){if(this.options.target||logger$e.info("La 'target' n'est pas renseignée (options.target)."),!this.options.style){logger$e.error("Le 'style' MapBox n'est pas renseigné (options.style) !");return}this.options.events?this._initEvents():logger$e.warn("Les 'handlers' ne sont pas renseignés (options.events) !"),this.options.themes||logger$e.info("Les 'themes' MapBox ne sont pas renseignés (options.themes).");var e={themes:!1,layers:!0,search:!1,style:!1,filter:!1,legend:!1,group:!1,groupAuto:!1,sort:!0,sortBy:"id",sortOrder:"asc",title:!0,collapse:void 0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(logger$e.trace("Utilisation des outils MapBox par défaut (options.tools)."),this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.id=this.options.id||SelectorID.generate(),this.context={},this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}}_initEvents(){var e=this.options.scope||this,Te=this.options.events;if(Te){for(var ke in Te)if(Te.hasOwnProperty(ke)){var Be=Te[ke];Be&&(EventBus.hasEventListener(ke,Be,e)||EventBus.addEventListener(ke,Be,e))}}}_initContainer(){logger$e.trace(this.mapbox);var e=document.createElement("div");e.id=this.name.containerID+this.id,e.className=this.name.container;var Te=this.options.tools.themes;if(Te&&this.options.themes){if(this.options.tools.title){var ke=document.createElement("div");ke.id=this.name.titleThemesID+this.id,ke.className=this.name.titleThemes,ke.innerHTML="Liste des 'thèmes'",e.appendChild(ke)}var Be=new Themes({id:this.id,target:e,tools:typeof Te=="object"?Te:{},obj:this.options.themes});Be.add()}if(this.options.tools.search){var Ue=new Search({id:this.id,target:e,tools:{},obj:this.mapbox.layers});Ue.add()}for(var He in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(He)){if(this.options.tools.layers){var We=Object.keys(this.mapbox.sources).length>1?1:0;if(We){var Cn=document.createElement("hr");Cn.className=this.name.sep,e.appendChild(Cn)}if(this.options.tools.title){var En=document.createElement("div");En.id=this.name.titleLayersID+this.id,En.className=this.name.titleLayers,En.innerHTML=We?"Liste des 'couches' ("+He+")":"Liste des 'couches'",e.appendChild(En)}}var An=this.mapbox.layers.slice();if(An.forEach(function(sr,Cr){var pr=sr.metadata;pr?pr["geoportail:order"]=Cr:sr.metadata={"geoportail:order":Cr}}),this.options.tools.sort){var Sn=this.options.tools.sortBy,Tn=this.options.tools.sortOrder,Ln=function(sr,Cr){var pr=0;if(sr.metadata&&sr.metadata["geoportail:group"]&&Cr.metadata&&Cr.metadata["geoportail:group"]){var wr=null,Li=null;wr=sr.metadata["geoportail:group"],Li=Cr.metadata["geoportail:group"],pr=wr.localeCompare(Li)}else switch(Sn){case"geom":pr=Tn==="asc"?sr.type.localeCompare(Cr.type)||sr.id.localeCompare(Cr.id):Cr.type.localeCompare(sr.type)||Cr.id.localeCompare(sr.id);break;case"class":pr=Tn==="asc"?sr["source-layer"].localeCompare(Cr["source-layer"])||sr.id.localeCompare(Cr.id):Cr["source-layer"].localeCompare(sr["source-layer"])||Cr.id.localeCompare(sr.id);break;case"id":default:pr=Tn==="asc"?sr.id.localeCompare(Cr.id):Cr.id.localeCompare(sr.id);break}return pr};An.sort(Ln)}logger$e.trace("Layers : ",An);var Bn=this.options.tools.sortBy,ei=this.options.tools.groupAuto,ti={};An.forEach(function(sr){var Cr=sr.metadata;if(Cr&&Cr["geoportail:group"]){var pr=Cr["geoportail:group"];ti[pr]=ti[pr]?ti[pr]+1:1}else{var wr=null;switch(Bn){case"class":wr=sr["source-layer"];break;case"geom":wr=sr.type;break;case"id":default:wr=sr.id;break}var Li=wr;if(ei){var er=/_|-|:|=/,hr=wr.search(er);Li=hr!==-1?wr.substring(0,hr).trim():wr}ti[Li]=ti[Li]?ti[Li]+1:1,Cr?Cr["geoportail:group"]=Li:sr.metadata={"geoportail:group":Li}}}),logger$e.trace("Groups : ",ti);var ni=document.createElement("div");ni.className=this.name.containerLayers,e.appendChild(ni);var ri;if(this.options.tools.collapse!==void 0){ri=document.createElement("details"),ri.className="",ri.open=!this.options.tools.collapse,ni.appendChild(ri);var si=document.createElement("summary");si.className="",si.innerHTML="",ri.appendChild(si)}for(var ai=this.options.tools.collapse!==void 0?ri:ni,li=-1,Pi=0;Pi<An.length;Pi++){var pi=An[Pi];if(li++,pi.source===He){if(this.options.tools.group&&this.options.tools.sort){var vi=pi.metadata;if(vi){var Ri=pi.metadata["geoportail:group"];if(Ri)if(ti[Ri]>1){ti[Ri]=-1;var Fi=new Group({id:this.id,target:this.options.tools.collapse!==void 0?ri:ni,title:Ri,collapse:!0});Fi.add(),ai=Fi.getContainer()}else ti[Ri]===1&&(ai=this.options.tools.collapse!==void 0?ri:ni);else ai=this.options.tools.collapse!==void 0?ri:ni}else ai=this.options.tools.collapse!==void 0?ri:ni}if(this.options.tools.layers){var di=new Layer({id:this.id,target:ai,position:li+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:pi.id,type:pi.type,source:pi.source,"source-layer":pi["source-layer"]}});di.add(),pi.layout&&pi.layout.visibility&&pi.layout.visibility==="none"&&di.visibility(!1),this.layers.push(di)}if(this.options.tools.legend){var ci=this.options.tools.editable;typeof ci>"u"&&(ci=pi.editable);var Mi=new Legend({id:this.id,target:ai,sprites:this.sprites,obj:{id:pi.id,source:pi.source,title:pi.id,editable:typeof ci<"u"?ci:!1,paint:pi.paint,layout:pi.layout}});Mi.add(),Mi.display(!1),di&&(di.addLegend(Mi),di.slotLegend())}if(this.options.tools.style){var Oi=new Style({id:this.id,target:ai,position:li+"_"+this.id,obj:{id:pi.id,source:pi.source,layout:pi.layout,paint:pi.paint}});Oi.add(),Oi.display(!1),di&&di.addStyle(Oi),pi.layout&&pi.layout.visibility&&pi.layout.visibility==="none"&&di.visibility(!1)}if(this.options.tools.filter){var Hi=new Filter({id:this.id,target:ai,position:li+"_"+this.id,obj:{id:pi.id,source:pi.source,filter:pi.Filter}});Hi.add(),Hi.display(!1),di&&di.addFilter(Hi)}}else li>=0&&li--}}if(this.container=e,!this.options.target){if(!document.getElementById(this.name.target)){var Ki=document.createElement("div");Ki.id=this.name.target;var or=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement;or.appendChild(Ki)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),EventBus.dispatch(EventEditor.onloaded,this)}_getSprites(e){var Te=this;if(e&&e.startsWith("mapbox://"))return new Promise((Ue,He)=>{logger$e.error("Protocole mapbox:// non géré !"),Ue(Te)});if(!e)return new Promise((Ue,He)=>{logger$e.error("Auncun sprites disponibles !"),Ue(Te)});var ke=function(){var Ue=e+".png";return fetch(Ue,{credentials:"same-origin"}).then(function(He){if(He.ok)return He.blob().then(function(Cn){Te.sprites.url=Ue;var En=new Image;return En.src=Ue,En.decode().then(function(){Te.sprites.size={},Te.sprites.size.h=En.height,Te.sprites.size.w=En.width})}).catch(Cn=>{logger$e.warn("fetch image sprites exception :",Cn)});var We=new Error("HTTP status code: "+He.status);throw We}).catch(He=>new Promise((We,Cn)=>{logger$e.error("fetch image sprites exception :",He),Cn(He)}))},Be=function(){var Ue=e+".json";return fetch(Ue,{credentials:"same-origin"}).then(function(He){if(He.ok)return He.json().then(function(Cn){Te.sprites.json=Cn}).catch(Cn=>{logger$e.warn("fetch json sprites exception :",Cn)});var We=new Error("HTTP status code: "+He.status);throw We}).catch(He=>new Promise((We,Cn)=>{logger$e.error("fetch json sprites exception :",He),Cn(He)}))};return Promise.all([ke(),Be()])}createElement(){var e=this;if(typeof this.options.style=="object")return this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(Te=>{logger$e.warn("fetch sprites exception :",Te)}):new Promise((Te,ke)=>{e._initContainer(),Te(e)});if(typeof this.options.style=="string")return fetch(this.options.style,{credentials:"same-origin"}).then(Te=>Te.json().then(ke=>{e.mapbox=ke}).then(function(){return e.options.tools.legend?e._getSprites(e.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(ke=>{logger$e.warn("fetch sprites exception :",ke)}):new Promise((ke,Be)=>{e._initContainer(),ke(e)})}).catch(ke=>{logger$e.error("json exception :",ke)})).catch(Te=>{logger$e.error("fetch exception :",Te)})}display(e){this.container.style.display=e?"block":"none"}setContext(e,Te){this.context[e]=Te}getContext(e){return this.context[e]}getID(){return this.id}getContainer(){return this.container}getStyle(){return this.mapbox}getStyleLayer(e){for(var Te=null,ke=this.getLayer(e),Be=ke.options.obj.id,Ue=0;Ue<this.mapbox.layers.length;Ue++){var He=this.mapbox.layers[Ue];if(He.id===Be){Te=He;break}}return Te}getLayerFromStyle(e){for(var Te=null,ke=this.mapbox.layers[e],Be=0;Be<this.getLayers().length;Be++){var Ue=this.getLayer(Be);if(ke.id===Ue.options.obj.id){Te=Ue;break}}return Te}getLayers(){return this.layers}getLayer(e){return this.layers[e]}}Helper.assign(Editor.prototype,EditorDOM);window.ol&&window.ol.style&&(window.ol.style.Editor=Editor);var LayerImportDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createLoadingElement:function(){var Oe=document.createElement("div");return Oe.id="GPmapLoading",Oe.className="",Oe},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimport"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowImportPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowImportPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowImportPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-import fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir l'import de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe._onShowImportClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe._onShowImportClick(ke)}),e},_createImportPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPimportPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createImportPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createImportPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader GPelementVisible gpf-visible gpf-panel__header fr-modal__header",Oe},_createImportPanelReturnPictoElement:function(){var Oe=this,e=document.createElement("button");if(e.id=this._addUID("GPimportPanelReturnPicto"),e.title="Masquer le panneau",e.className="GPreturnPicto GPimportPanelReturnPicto GPelementHidden gpf-hidden gpf-btn gpf-btn-icon-return fr-btn fr-btn--close fr-btn--tertiary-no-outline",checkDsfr()){var Te=document.createElement("span");Te.className="GPelementHidden",Te.innerHTML="Retour",e.appendChild(Te)}return e.addEventListener?e.addEventListener("click",function(ke){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),Oe._onReturnPictoClick(ke),document.getElementById(Oe._addUID("GPshowImportPicto")).click()}):e.attachEvent&&e.attachEvent("onclick",function(ke){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),Oe._onReturnPictoClick(ke),document.getElementById(Oe._addUID("GPshowImportPicto")).click()}),e},_createImportPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportHeaderTitle"),Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="Import de données",Oe},_createImportPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPimportPanelClose"),e.className="GPpanelClose GPimportPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click()});var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e},_createImportPanelFormElement:function(){var Oe=this,e=document.createElement("form");return e.id=this._addUID("GPimportForm"),e.className="GPform GPelementVisible gpf-visible gpf-mobile-form gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(Te){Te.preventDefault(),Oe._onImportSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(Te){Te.preventDefault(),Oe._onImportSubmit()}),e},_createImportTypeLineElement:function(Oe){var e=this,Te=document.createElement("div");Te.id=this._addUID("GPimportTypeLine"),Te.className="GPimportInputLine";var ke=document.createElement("label");ke.id=this._addUID("GPimportTypeLabel"),ke.className="GPlabel gpf-label fr-label",ke.innerHTML="Type de donnée",ke.title="Type de donnée",Te.appendChild(ke);var Be=document.createElement("select");Be.setAttribute("aria-labelledby",this._addUID("GPimportTypeLabel")),Be.className="GPselect gpf-select fr-select",Be.addEventListener?Be.addEventListener("change",function(We){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange(We)}):Be.attachEvent&&Be.attachEvent("onchange",function(){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange()}),Be.id=this._addUID("GPimportTypeSelect"),(!Oe||!Array.isArray(Oe))&&(Oe=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var Ue,He=0;He<Oe.length;He++)Ue=document.createElement("option"),Ue.value=Oe[He],Ue.text=Oe[He]==="MAPBOX"?"Tuiles vectorielles":Oe[He],Be.appendChild(Ue);return Te.appendChild(Be),Te},_createImportWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPimportWaitingContainer"),Oe.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createImportStaticParamsContainer:function(Oe){var e=document.createElement("div");return e.id=this._addUID("GPimportStaticParams"),Oe==="KML"||Oe==="GPX"||Oe==="GeoJSON"||Oe==="MAPBOX"?e.className="GPelementVisible gpf-visible fr-my-4w":e.className="GPelementHidden gpf-hidden",e},_createStaticNameLabel:function(){var Oe=document.createElement("div");Oe.className="GPimportInputLine fr-mb-1w";var e=document.createElement("label");e.className="GPlabel gpf-label fr-label",e.htmlFor=this._addUID("GPimportName"),e.innerHTML="Nom",e.title="Nom",Oe.appendChild(e);var Te=document.createElement("input");return Te.type="text",Te.id=this._addUID("GPimportName"),Te.className="GPinput gpf-input fr-input",Oe.appendChild(Te),Oe},_createStaticModeChoiceDiv:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportChoice"),Oe.className="fr-my-1w",Oe},_createStaticLocalChoiceDiv:function(){var Oe=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var Te=document.createElement("input");Te.type="radio",Te.addEventListener?Te.addEventListener("change",function(Be){document.getElementById(Oe._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(Oe._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",Oe._onStaticImportTypeChange(Be)}):Te.appendChild&&Te.appendChild("onchange",function(){document.getElementById(Oe._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(Oe._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",Oe._onStaticImportTypeChange()}),Te.name="GPimportChoiceMode",Te.value="local",Te.checked=!0,Te.id=this._addUID("GPimportChoiceAltLocal"),e.appendChild(Te);var ke=document.createElement("label");return ke.className="GPimportChoiceAltTxt gpf-label fr-label",ke.htmlFor=this._addUID("GPimportChoiceAltLocal"),ke.innerHTML="par fichier local",ke.title="par fichier local",e.appendChild(ke),e},_createStaticUrlChoiceDiv:function(){var Oe=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var Te=document.createElement("input");Te.type="radio",Te.addEventListener?Te.addEventListener("change",function(Be){document.getElementById(Oe._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(Oe._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",Oe._onStaticImportTypeChange(Be)}):Te.appendChild&&Te.appendChild("onchange",function(){document.getElementById(Oe._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(Oe._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",Oe._onStaticImportTypeChange()}),Te.id=this._addUID("GPimportChoiceAltUrl"),Te.name="GPimportChoiceMode",Te.value="url",Te.checked=!1,e.appendChild(Te);var ke=document.createElement("label");return ke.className="GPimportChoiceAltTxt gpf-label fr-label",ke.htmlFor=this._addUID("GPimportChoiceAltUrl"),ke.innerHTML="par URL",ke.title="par URL",e.appendChild(ke),e},_createStaticLocalInputDiv:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportValueLocal"),Oe.className="GPimportInputLine",Oe},_createStaticLocalInputLabel:function(){var Oe=document.createElement("label");return Oe.className="GPlabel gpf-label fr-label fr-mb-1w",Oe.htmlFor=this._addUID("GPimportFile"),Oe.innerHTML="Fichier local",Oe.title="Fichier local",Oe},_createStaticLocalInput:function(){var Oe=document.createElement("input");return Oe.type="file",Oe.id=this._addUID("GPimportFile"),Oe.className="GPimportInputFile gpf-upload fr-upload",Oe},_createStaticUrlInputDiv:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportValueUrl"),Oe.className="GPelementHidden gpf-hidden",Oe},_createStaticUrlInputLabel:function(){var Oe=document.createElement("label");return Oe.className="GPlabel gpf-label fr-label",Oe.htmlFor=this._addUID("GPimportUrl"),Oe.innerHTML="URL",Oe.title="URL",Oe},_createStaticUrlInput:function(){var Oe=document.createElement("input");return Oe.type="text",Oe.id=this._addUID("GPimportUrl"),Oe.className="GPinput gpf-input fr-input",Oe},_createServiceParamsContainer:function(Oe){var e=document.createElement("div");return e.id=this._addUID("GPimportServiceParams"),Oe==="WMS"||Oe==="WMTS"||Oe==="WFS"?e.className="GPelementVisible gpf-visible":e.className="GPelementHidden gpf-hidden",e},_createServiceUrlDiv:function(){var Oe=document.createElement("div");return Oe.className="GPimportInputLine",Oe},_createServiceUrlInputLabel:function(){var Oe=document.createElement("label");return Oe.className="GPlabel gpf-label fr-label",Oe.htmlFor=this._addUID("GPimportServiceUrl"),Oe.innerHTML="URL du service",Oe.title="URL du service",Oe},_createServiceUrlInput:function(){var Oe=document.createElement("input");return Oe.type="text",Oe.id=this._addUID("GPimportServiceUrl"),Oe.className="GPinput gpf-input fr-input",Oe},_createImportSubmitFormElement:function(){var Oe=document.createElement("input");return Oe.id=this._addUID("GPimportSubmit"),Oe.className="GPsubmit gpf-btn fr-btn",Oe.type="submit",Oe.value="Importer",Oe},_createImportGetCapPanelElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportGetCapPanel"),Oe.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",Oe},_createImportGetCapPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Couches accessibles",Te.title="Couches accessibles",e.appendChild(Te);var ke=document.createElement("button");ke.className="GPpanelClose GPimportGetCapPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.id=this._addUID("GPimportGetCapPanelClose"),ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),document.getElementById(Oe._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),Oe._onGetCapPanelClose()}):ke.attachEvent&&ke.attachEvent("click",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),document.getElementById(Oe._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),Oe._onGetCapPanelClose()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",ke.appendChild(Be),e.appendChild(ke),e},_createImportGetCapResultsContainer:function(){var Oe=document.createElement("div");return Oe.className="GPimportGetCapRoot gpf-panel__list",Oe.id=this._addUID("GPimportGetCapResults"),Oe},_addImportGetCapResultListRubrique:function(Oe,e){var Te=document.createElement("ul");return Te.className="GPimportGetCapListRubrique",Te.title=Oe,e.appendChild(Te),e},_addImportGetCapResultRubrique:function(Oe,e){var Te=document.createElement("li");Te.className="GPimportGetCapRubrique gpf-panel__items_layerimport";var ke=document.createElement("input");ke.id="GPimportGetCapRubrique-"+SelectorID.generate(),ke.className="GPimportGetCapRubrique",ke.type="checkbox",Te.appendChild(ke);var Be=document.createElement("label");return Be.className="GPimportGetCapRubriqueTitle gpf-label fr-btn fr-btn--secondary",Be.htmlFor=ke.id,Be.innerHTML=Oe,Be.title=Oe,Te.appendChild(Be),e.appendChild(Te),e},_addImportGetCapResultListLayer:function(Oe){var e=document.createElement("ul");return e.className="GPimportGetCapListLayer",Oe.appendChild(e),Oe},_addImportGetCapResultLayer:function(Oe,e,Te){var ke=document.createElement("li");ke.className="GPimportGetCapProposal gpf-panel__items_layerimport gpf-panel__items",ke.innerHTML=Oe.content,ke.title=Oe.title,ke.id="GPimportGetCapProposal_"+e;var Be=this;return ke.addEventListener?ke.addEventListener("click",function(Ue){Be._onGetCapResponseLayerClick(Ue)}):ke.attachEvent&&ke.attachEvent("onclick",function(){Be._onGetCapResponseLayerClick()}),Te.appendChild(ke),Te},_createImportMapBoxPanelElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportMapBoxPanel"),Oe.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",Oe},_createImportMapBoxPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("button");Te.id=this._addUID("GPimportMapBoxPanelReturnPicto"),Te.title="Nouvel import",Te.className="GPreturnPicto GPimportMapBoxPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary gpf-btn--secondary",Te.addEventListener?Te.addEventListener("click",function(He){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),Oe._onMapBoxReturnPictoClick(He)}):Te.attachEvent&&Te.attachEvent("onclick",function(He){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),Oe._onMapBoxReturnPictoClick(He)}),e.appendChild(Te);var ke=document.createElement("div");ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Edition des styles",ke.title="Edition des styles",e.appendChild(ke);var Be=document.createElement("button");Be.className="GPpanelClose GPimportMapBoxPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.id=this._addUID("GPimportMapBoxPanelClose"),Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),document.getElementById(Oe._addUID("GPimportMapBoxPanel")).style.display="none",Oe._onMapBoxPanelClose()}):Be.attachEvent&&Be.attachEvent("click",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),document.getElementById(Oe._addUID("GPimportMapBoxPanel")).style.display="none",Oe._onMapBoxPanelClose()});var Ue=document.createElement("span");return Ue.className="GPelementHidden gpf-visible",Ue.innerText="Fermer",Be.appendChild(Ue),e.appendChild(Be),e},_createImportMapBoxResultsContainer:function(){var Oe=document.createElement("div");return Oe.className="GPimportMapBoxpRoot",Oe.id=this._addUID("GPimportMapBoxResults"),Oe}},MeasureToolBoxDOM={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(Oe){return Oe?this._toolboxId+"-"+Oe:this._toolboxId},getButtonID:function(Oe){return Oe?this._buttonId+"-"+Oe:this._buttonId},getWidgetID:function(Oe){return Oe?this._widgetId+"-"+Oe:this._widgetId},_createToolBoxContainerElement:function(Oe){var e=document.createElement("div");e.id=this.getToolBoxID(Oe),e.className="GPshowAdvancedToolPicto";var Te=document.createElement("button");Te.id=this.getButtonID(Oe),Te.className="GPshowOpen GPshowAdvancedToolPicto GPshowToolBoxPicto gpf-btn gpf-btn-icon-toolbox fr-btn",Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!1),Te.setAttribute("type","button");var ke=this;Te.addEventListener("click",function(Ue){var He=Ue.target.ariaPressed==="true";Ue.target.setAttribute("aria-pressed",!He),this.blur();var We=document.getElementById(ke.getWidgetID(Oe));We.style.display==="block"?We.style.display="none":We.style.display="block"}),e.appendChild(Te);var Be=document.createElement("div");return Be.id=this.getWidgetID(Oe),Be.addEventListener("click",function(){},!1),e.appendChild(Be),e}},logger$d=LoggerByDefault.getLogger("toolbox"),MeasureToolBox={_toolbox:{},add:function(Oe,e){if(logger$d.trace("ToolBox.add()",e),!Oe){logger$d.trace("map doesn't exist !?");return}var Te=typeof window<"u"?window:typeof self<"u"?self:null;Te&&(this._toolbox=Te.gpShareMeasureToolBox||{});var ke=Oe.getTargetElement(),Be=ke.ownerDocument,Ue=ke.id;!this._toolbox||Object.keys(this._toolbox).length===0?(this._toolbox={},this._toolbox[Ue]=SelectorID.generate()):this._toolbox[Ue]||(this._toolbox[Ue]=SelectorID.generate());var He=this._toolbox[Ue];if(!Be.getElementById(this.getToolBoxID(He))){logger$d.trace("create toolbox !");var We=this._createToolBoxContainerElement(He);We.style.pointerEvents="auto";var Cn=ke.getElementsByClassName("ol-overlaycontainer-stopevent");Cn[0].appendChild(We)}var En=Be.getElementById(this.getWidgetID(He));e.setTarget(En),Te&&(Te.gpShareMeasureToolBox=this._toolbox),logger$d.trace("add control to toolbox !")}};Helper.assign(MeasureToolBox,MeasureToolBoxDOM);var logger$c=LoggerByDefault.getLogger("measures"),Measures={DEFAULT_POINTER_STYLE:new CircleStyle({radius:5,stroke:new Stroke({color:"#002A50",width:2}),fill:new Fill({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.2)"}),stroke:new Stroke({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,eventLayerRemove:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var Oe=this.CLASSNAME;logger$c.trace("["+Oe+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._pictoContainer.setAttribute("aria-pressed",!1)},onPointerMoveHandler:function(Oe){if(!Oe.dragging){var e=Oe.coordinate;if(this.sketch){var Te,ke=this.sketch.getGeometry();if(Te=this.format(ke),ke.getType()==="LineString")e=ke.getLastCoordinate();else if(ke.getType()==="Polygon")e=ke.getInteriorPoint().getCoordinates();else return;this.measureTooltipElement.innerHTML=Te,this.measureTooltip.setPosition(e)}}},onShowMeasureClick:function(Oe,e){Oe.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this.getMap(),ke=Te.getTargetElement().id,Be=typeof window<"u"?window:typeof self<"u"?self:null;Be&&(this.tools=Be.gpShareMeasures||{});var Ue=this.CLASSNAME;for(var He in this.tools)if(this.tools.hasOwnProperty(He))for(var We=this.tools[He],Cn=0;Cn<We.length;Cn++){var En=We[Cn];En&&En.active&&He!==Ue&&En.map.id===ke&&(En.active=!1,En.instance!==null&&En.instance.clean())}Interactions.unset(Te,{current:"Measures"});var An=this._pictoContainer.ariaPressed;if(An==="true"){this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(e);for(var Sn=0;Sn<this.tools[Ue].length;Sn++)this.tools[Ue][Sn].map.id===ke&&(this.tools[Ue][Sn].active=!0)}else{this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var Tn=0;Tn<this.tools[Ue].length;Tn++)this.tools[Ue][Tn].map.id===ke&&(this.tools[Ue][Tn].active=!1)}},clearMeasureToolTip:function(){var Oe=this.getMap();if(Oe)for(var e=Oe.getTargetElement(),Te=e.getElementsByClassName("ol-overlaycontainer"),ke=0;ke<Te.length;ke++){for(var Be=Te[ke],Ue=Be.children.length,He=[],We=0;We<Ue;We++){var Cn=Be.children[We];if(Cn.children.length!==0){var En=Cn.children[0];(En.className==="GPmeasureTooltip GPmeasureTooltip-static"||En.className==="GPmeasureTooltip GPmeasureTooltip-measure")&&He.push(Cn)}}for(var An=0;An<He.length;An++)Be.removeChild(He[An])}},clearMeasure:function(){var Oe=this.getMap();this.measureVector&&(Oe.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(Oe.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(Oe){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new Overlay({element:this.measureTooltipElement,stopEvent:!1,offset:[0,-15],positioning:"bottom-center"}),Oe.addOverlay(this.measureTooltip)},createHelpTooltip:function(Oe){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new Overlay({element:this.helpTooltipElement,stopEvent:!1,offset:[15,0],positioning:"center-left"}),Oe.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(Oe){this.options.styles=Oe||{},logger$c.trace("style start",this.options.styles.start);var e={image:Measures.DEFAULT_POINTER_STYLE,fill:Measures.DEFAULT_DRAW_START_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(e.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof Style$1&&(this.options.styles.start.getFill()!=null&&(e.fill=this.options.styles.start.getFill()),this.options.styles.start.getStroke()!=null&&(e.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new Style$1(e),logger$c.trace("style finish",this.options.styles.finish);var Te={fill:Measures.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof Style$1&&(this.options.styles.finish.getFill()!=null&&(Te.fill=this.options.styles.finish.getFill()),this.options.styles.finish.getStroke()!=null&&(Te.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new Style$1(Te)},addMeasureInteraction:function(Oe){var e=this.getMap(),Te=this;this.measureDraw=new Draw({source:this.measureSource,condition:function(ke){return ke.originalEvent.ctrlKey?(Te.sketch&&this.removeLastPoint(),!1):!0},type:Oe,style:this.options.styles.start||Measures.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),e.addInteraction(this.measureDraw),this.createMeasureTooltip(e),this.measureDraw.on("drawstart",ke=>{Te.sketch=ke.feature}),this.measureDraw.on("drawend",()=>{if(Te.sketch){var ke,Be,Ue=Te.sketch.getGeometry();if(ke=Te.format(Ue),Ue.getType()==="LineString")Be=Ue.getLastCoordinate();else if(Ue.getType()==="Polygon")Be=Ue.getInteriorPoint().getCoordinates();else return;Te.measureTooltipElement.innerHTML=ke,Te.measureTooltip.setPosition(Be)}Te.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",Te.measureTooltip.setOffset([0,-7]),Te.sketch=null,Te.measureTooltipElement=null,Te.createMeasureTooltip(e)})},initMeasureInteraction:function(){var Oe=this.getMap();this.measureSource=new VectorSource,this.measureVector=new VectorLayer({source:this.measureSource,style:this.options.styles.finish||Measures.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",Oe.addLayer(this.measureVector),Oe.getControls().forEach(e=>{if(e.CLASSNAME==="LayerSwitcher"){var Te=this.measureVector.gpLayerId;e._layers[Te].title===Te&&e.addLayer(this.measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}},ElevationPathDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPelevationPath"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowElevationPathPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-elevation fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer un profil altimétrique"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowElevationPathClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowElevationPathClick(ke)}),e},_createElevationPathPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPelevationPathPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createElevationPathPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createDrawingButtonsPluginDiv:function(){var Oe=document.createElement("div");return Oe.className="container-buttons-plugin fr-mx-2w",Oe},_createElevationPathPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");if(e.className="GPpanelHeader gpf-panel__header fr-modal__header",!checkDsfr()){var Te=document.createElement("button");Te.id=this._addUID("GPelevationPathPanelInfo"),Te.className="GPpanelInfo gpf-btn gpf-btn-icon-info fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",Te.title="Informations",Te.addEventListener?Te.addEventListener("click",function(){Oe.onOpenElevationPathInfoClick()}):Te.attachEvent&&Te.attachEvent("onclick",function(){Oe.onOpenElevationPathInfoClick()}),e.appendChild(Te)}var ke=document.createElement("div");ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Profil Altimétrique",e.appendChild(ke);var Be=document.createElement("button");Be.id=this._addUID("GPelevationPathPanelReduce"),Be.className="GPpanelReduce gpf-btn gpf-btn-icon-reduce fr-btn fr-btn--secondary gpf-btn--secondary",Be.title="Masquer le panneau",Be.addEventListener?Be.addEventListener("click",function(We){typeof Oe.onReduceElevationPathPanelClick=="function"&&Oe.onReduceElevationPathPanelClick()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(We){typeof Oe.onReduceElevationPathPanelClick=="function"&&Oe.onReduceElevationPathPanelClick()}),e.appendChild(Be);var Ue=document.createElement("button");Ue.id=this._addUID("GPelevationPathPanelClose"),Ue.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ue.title="Fermer le panneau",Ue.addEventListener?Ue.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowElevationPathPicto")).click()},!1):Ue.attachEvent&&Ue.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowElevationPathPicto")).click()});var He=document.createElement("span");return He.className="GPelementHidden gpf-visible",He.innerText="Fermer",Ue.appendChild(He),e.appendChild(Ue),e},_createElevationPathPanelProfilElement:function(){var Oe=document.createElement("div");Oe.className="GPelevationPathProfilWrapper";var e=document.createElement("div");return e.id="GPelevationPathProfil",Oe.appendChild(e),Oe},_createElevationPathWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPelevationPathCalcWaitingContainer"),Oe.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createElevationPathInformationsElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPelevationPathInformationsContainer"),checkDsfr()||(Oe.className="GPelementHidden gpf-hidden");var e=document.createElement("p");return e.className="GPelevationPathInformations",e.innerHTML="Aucune information...",Oe.appendChild(e),Oe},_addElevationPathInformationsItem:function(Oe,e){var Te=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(Te){var ke=document.createElement("p");ke.className="GPelevationPathInformations";var Be=document.createElement("span");Be.innerText=Oe;var Ue=document.createElement("span");Ue.innerText=e,ke.appendChild(Be),ke.appendChild(Ue),Te.appendChild(ke)}return Te}},ProfileElevationPathDOM={_getCssProperty:function(Oe,e){return window.getComputedStyle(Oe,null).getPropertyValue(e)},_getTextWidth:function(Oe,e,Te=null){var ke=this.canvas||(this.canvas=document.createElement("canvas")),Be=ke.getContext("2d");Te===null?Be.font=`${this._getCssProperty(e,"font-weight")} ${this._getCssProperty(e,"font-size")} ${this._getCssProperty(e,"font-family")}`:Be.font=Te;var Ue=Be.measureText(Oe);return Ue.width},_dataZToSvgY:function(Oe,e,Te,ke){return e-(Oe-Te)*ke-.5},_dataDistToSvgX:function(Oe,e,Te,ke){return e-Te+Oe*ke},_svgXToDataDist:function(Oe,e,Te,ke){return(Oe+Te-e)/ke},_arrayBisect:function(Oe,e){let Te;if(Oe.length===0)return 0;for(Te=0;Te<Oe.length;Te++)if(e<Oe[Te].dist)return Te;return Te-1},displayProfileByDefault:function(Oe,e,Te,ke){var Be=Te;if(!e||!Oe)return;const Ue={fontFamily:"Arial",strokeColor:"#0B6BA7",fillColor:"#00B798",focusLineColor:"#F90"};for(checkDsfr()&&(Ue.fontFamily="Marianne",Ue.strokeColor="#2F4077",Ue.fillColor="#2F4077",Ue.focusLineColor="#639f6a");e.firstChild;)e.removeChild(e.firstChild);const He={top:25,right:15,bottom:10,left:10};var We=Be.options.displayProfileOptions,Cn=Oe.points,En=JSON.parse(JSON.stringify(Cn));En.sort(function(Rs,Es){return Rs.z-Es.z});var An=En[0].z,Sn=En[En.length-1].z,Tn=Oe.distance;let Ln="m";const Bn=document.createElement("div");Bn.id="profileElevationByDefault",e.appendChild(Bn);var ei=window.getComputedStyle(e).getPropertyValue("width").replace(/px/,""),ti=window.getComputedStyle(e).getPropertyValue("height").replace(/px/,"");const ni=ti-He.top-He.bottom,ri=ei-He.left-He.right,si=17,ai=this._getTextWidth(Math.round(Sn).toLocaleString()+",88",e,`400 10 ${Ue.fontFamily}`),li=17,Pi=15,pi=15,vi=this._getTextWidth(Math.round(Tn).toLocaleString()+",5",e),Ri=1,Fi=ni-li-Pi,di=ri-si-ai,ci=document.createElementNS("http://www.w3.org/2000/svg","svg");ci.id="profileElevationByDefaultSvg",ci.setAttribute("style","display: block; margin: auto; overflow: visible;"),ci.setAttribute("viewBox",`0 0 ${ei} ${ti}`),ci.setAttribute("width","100%"),ci.setAttribute("height","100%");const Mi=Math.floor(Fi/pi);let Oi;Sn===An?Oi=.1:Oi=Math.pow(10,Math.ceil(Math.log((Sn-An)/Mi)/Math.log(10)))/2;let Hi=Math.floor(An/Oi)*Oi,Ki=Math.ceil(Sn/Oi)*Oi;Ki===Sn&&(Ki+=Oi),Hi=Math.round(Hi*100)/100,Ki=Math.round(Ki*100)/100;let or=Math.round((Ki-Hi)/Oi);or+1>Mi&&(Oi=Math.pow(10,Math.ceil(Math.log((Sn-An)/Mi)/Math.log(10))),Hi=Math.floor(An/Oi)*Oi,Ki=Math.ceil(Sn/Oi)*Oi,Ki===Sn&&(Ki+=Oi),Hi=Math.round(Hi*100)/100,Ki=Math.round(Ki*100)/100,or=Math.floor((Ki-Hi)/Oi)),or=Math.max(Math.round(or),1);const sr=document.createElementNS("http://www.w3.org/2000/svg","g");sr.setAttribute("class","profile-z-vertical");const Cr=document.createElementNS("http://www.w3.org/2000/svg","g"),pr=Fi/or;let wr;Sn===An?wr=Fi/.2:wr=Fi/(Ki-Hi);let Li,er,hr,mr,_r,dr;for(let Rs=0;Rs<=or;Rs++)Li=document.createElementNS("http://www.w3.org/2000/svg","text"),Li.setAttribute("class","profile-z-graduation"),Li.setAttribute("font-family",Ue.fontFamily),Li.setAttribute("font-size","10px"),Li.setAttribute("fill","#5E5E5E"),Li.textContent=(Math.round(100*(Hi+Rs*Oi))/100).toLocaleString(),er=Fi-Rs*pr,Li.setAttribute("transform",`translate(${si+ai-8}, ${er+5})`),Li.setAttribute("text-anchor","end"),sr.appendChild(Li),hr=Math.round(er)-.5,mr=document.createElementNS("http://www.w3.org/2000/svg","g"),_r=document.createElementNS("http://www.w3.org/2000/svg","path"),_r.setAttribute("cs","100,100"),_r.setAttribute("stroke-width","1"),Rs!==0?_r.setAttribute("stroke-opacity","0.2"):_r.setAttribute("stroke-opacity","1"),_r.setAttribute("stroke","#000000"),_r.setAttribute("fill","none"),_r.setAttribute("d",`M${si+ai},${hr} L${di+si+ai},${hr}`),dr=document.createElementNS("http://www.w3.org/2000/svg","path"),dr.setAttribute("cs","100,100"),dr.setAttribute("stroke-width","1"),dr.setAttribute("stroke-opacity","1"),dr.setAttribute("stroke","#000000"),dr.setAttribute("fill","none"),dr.setAttribute("d",`M${si+ai},${hr} L${si+ai+5},${hr}`),dr.setAttribute("transform","translate(-5, 0)"),mr.appendChild(dr),mr.appendChild(_r),Cr.appendChild(mr);var cr=document.createElementNS("http://www.w3.org/2000/svg","text");cr.setAttribute("class","profile-z-legend"),cr.setAttribute("font-family",Ue.fontFamily),cr.setAttribute("font-size","11px"),cr.setAttribute("fill","#5E5E5E"),cr.textContent="Altitude (m)",cr.setAttribute("transform",`translate(${si-8}, ${Math.round(Fi/2)}) rotate(-90)`),cr.setAttribute("text-anchor","middle"),sr.appendChild(cr),ci.appendChild(sr),ci.appendChild(Cr),Tn>2e3&&(Tn/=1e3,Ln="km");const gr=Math.floor(di/vi);let vr=Math.pow(10,Math.ceil(Math.log(Tn/gr)/Math.log(10)))/2;const Fr=Tn;let zr=Math.floor(Fr/vr);zr>gr?(vr=Math.pow(10,Math.ceil(Math.log(Tn/gr)/Math.log(10))),zr=Math.floor(Fr/vr)):zr<Ri&&(vr=Math.pow(10,Math.ceil(Math.log(Tn/gr)/Math.log(10))-1),zr=Math.floor(Fr/vr)),zr=Math.max(zr,1);const tr=vr*zr,fr=document.createElementNS("http://www.w3.org/2000/svg","g");fr.setAttribute("class","profile-x-vertical");const ar=document.createElementNS("http://www.w3.org/2000/svg","g"),nr=di/Fr,Dr=(Fr-tr)*nr,kr=Math.round((di-Dr)/zr);let Ir,Mr,Rr,Nr,Ar,Sr;for(let Rs=0;Rs<=zr+1;Rs++)Ir=document.createElementNS("http://www.w3.org/2000/svg","text"),Ir.setAttribute("class","profile-x-graduation"),Ir.setAttribute("font-family",Ue.fontFamily),Ir.setAttribute("font-size","10px"),Ir.setAttribute("fill","#5E5E5E"),Rs!==zr+1&&(Ir.textContent=(Math.round(100*Rs*vr)/100).toLocaleString()),Mr=si+ai+Rs*kr,Rs===zr+1&&(Mr=si+ai+di),Ir.setAttribute("transform",`translate(${Mr}, ${Fi+Pi+5})`),Ir.setAttribute("text-anchor","middle"),fr.appendChild(Ir),Rr=Mr-.5,Nr=document.createElementNS("http://www.w3.org/2000/svg","g"),Ar=document.createElementNS("http://www.w3.org/2000/svg","path"),Ar.setAttribute("cs","100,100"),Ar.setAttribute("stroke-width","1"),Rs!==0?Ar.setAttribute("stroke-opacity","0.2"):Ar.setAttribute("stroke-opacity","1"),Ar.setAttribute("stroke","#000000"),Ar.setAttribute("fill","none"),Ar.setAttribute("d",`M${Rr},${Fi} L${Rr},0`),Sr=document.createElementNS("http://www.w3.org/2000/svg","path"),Sr.setAttribute("cs","100,100"),Sr.setAttribute("stroke-width","1"),Sr.setAttribute("stroke-opacity","1"),Sr.setAttribute("stroke","#000000"),Sr.setAttribute("fill","none"),Sr.setAttribute("d",`M${Rr},${Fi} L${Rr},${Fi-5}`),Sr.setAttribute("transform","translate(0, 5)"),Nr.appendChild(Sr),Nr.appendChild(Ar),ar.appendChild(Nr);var br=document.createElementNS("http://www.w3.org/2000/svg","text");br.setAttribute("class","profile-x-legend"),br.setAttribute("font-family",Ue.fontFamily),br.setAttribute("font-size","11px"),br.setAttribute("fill","#5E5E5E"),br.textContent=`Distance (${Ln})`,br.setAttribute("transform",`translate(${si+ai+di/2}, ${Fi+Pi+li+3})`),br.setAttribute("text-anchor","middle"),fr.appendChild(br),ci.appendChild(fr),ci.appendChild(ar);const Br=document.createElementNS("http://www.w3.org/2000/svg","g");let Hr=1;Ln==="km"&&(Hr=1e3);let qr=this._dataDistToSvgX(Cn[0].dist/Hr,ri,di,nr),Xr=this._dataZToSvgY(Cn[0].z,Fi,Hi,wr),cs=`M${qr},${Xr}`;for(let Rs=1;Rs<Cn.length;Rs++)qr=this._dataDistToSvgX(Cn[Rs].dist/Hr,ri,di,nr),Xr=this._dataZToSvgY(Cn[Rs].z,Fi,Hi,wr),cs+=` L${qr},${Xr}`;const Qr=document.createElementNS("http://www.w3.org/2000/svg","path");Qr.setAttribute("cs","100,100"),Qr.setAttribute("stroke-width","1"),Qr.setAttribute("stroke-opacity","1"),Qr.setAttribute("stroke",Ue.strokeColor),Qr.setAttribute("fill","none"),Qr.setAttribute("d",cs),cs+=` L${qr},${Fi}`,cs+=` L${ri-di},${Fi}`;const bs=document.createElementNS("http://www.w3.org/2000/svg","path");bs.setAttribute("cs","100,100"),bs.setAttribute("stroke-width","1"),bs.setAttribute("stroke-opacity","0"),bs.setAttribute("stroke","#000000"),bs.setAttribute("fill",Ue.fillColor),bs.setAttribute("fill-opacity","0.2"),bs.setAttribute("d",cs),Br.appendChild(Qr),Br.appendChild(bs),ci.appendChild(Br);const vs=document.createElementNS("http://www.w3.org/2000/svg","g"),Ms=document.createElementNS("http://www.w3.org/2000/svg","rect");Ms.setAttribute("width",di),Ms.setAttribute("height",Fi),Ms.setAttribute("transform",`translate(${ri-di},0)`),Ms.setAttribute("visibility","hidden"),Ms.setAttribute("pointer-events","all");const Ls=JSON.parse(JSON.stringify(Cn));Ls.sort(function(Rs,Es){return Rs.dist-Es.dist});const ps=document.createElementNS("http://www.w3.org/2000/svg","line");ps.setAttribute("id","focusLineX"),ps.setAttribute("class","focusLine-default"),ps.setAttribute("fill","none"),ps.setAttribute("stroke",Ue.focusLineColor),ps.setAttribute("stroke-width","0.5px"),ps.setAttribute("visibility","hidden");const ws=document.createElementNS("http://www.w3.org/2000/svg","line");ws.setAttribute("id","focusLineY"),ws.setAttribute("class","focusLine-default"),ws.setAttribute("fill","none"),ws.setAttribute("stroke",Ue.focusLineColor),ws.setAttribute("stroke-width","0.5px"),ws.setAttribute("visibility","hidden");const As=document.createElementNS("http://www.w3.org/2000/svg","circle");As.setAttribute("id","focusCircle"),As.setAttribute("r",4),As.setAttribute("class","circle-default focusCircle-default"),As.setAttribute("fill",Ue.focusLineColor),As.setAttribute("visibility","hidden"),vs.appendChild(As),vs.appendChild(ps),vs.appendChild(ws);const Ds=document.createElementNS("http://www.w3.org/2000/svg","text"),xs=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Xs=document.createElementNS("http://www.w3.org/2000/svg","tspan"),_o=document.createElementNS("http://www.w3.org/2000/svg","tspan");Ds.setAttribute("style",`text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:${Ue.fontFamily}; z-index:50;`),Ds.style.pointerEvents="none",Ds.style.position="fixed",Ds.setAttribute("class","tooltipInit"),Ds.setAttribute("text-anchor","middle"),Bn.appendChild(Ds),xs.setAttribute("class","altiPathValue"),xs.setAttribute("x","0"),xs.setAttribute("dy","-.7em"),Xs.setAttribute("class","altiPathValue"),Xs.setAttribute("x","0"),Xs.setAttribute("dy","1em"),_o.setAttribute("class","altiPathCoords"),_o.setAttribute("x","0"),_o.setAttribute("dy","1em"),Ds.appendChild(xs),We.currentSlope&&Ds.appendChild(Xs),Ds.appendChild(_o);const Fs=document.createElementNS("http://www.w3.org/2000/svg","g");vs.appendChild(Fs);const Ss=document.createElementNS("http://www.w3.org/2000/svg","path");Ss.setAttribute("cs","100,100"),Ss.setAttribute("fill","#FFFFFF"),Ss.setAttribute("stroke","#CCCCCC"),Ss.setAttribute("fill-opacity","0.8"),Ss.setAttribute("stroke-width","1"),Ss.setAttribute("stroke-opacity","1");const Is=document.createElementNS("http://www.w3.org/2000/svg","path");Is.setAttribute("cs","100,100"),Is.setAttribute("fill","#FFFFFF"),Is.setAttribute("stroke","#000000"),Is.setAttribute("fill-opacity","0"),Is.setAttribute("stroke-width","1"),Is.setAttribute("stroke-opacity","0.4"),Is.setAttribute("transform","translate(1,1)"),Fs.appendChild(Is),Fs.appendChild(Ss),Fs.appendChild(Ds),Fs.setAttribute("class","tooltipInit"),Fs.style.pointerEvents="none";function oa(){ps.setAttribute("visibility","visible"),ws.setAttribute("visibility","visible"),As.setAttribute("visibility","visible"),ke.__createProfileMarker(Be,Cn[0]),Ds.classList.remove("tooltipInit"),Fs.classList.remove("tooltipInit"),Ds.classList.remove("tooltipFadeOut"),Fs.classList.remove("tooltipFadeOut"),Ds.classList.add("tooltipFadeIn"),Fs.classList.add("tooltipFadeIn")}function qs(){ps.setAttribute("visibility","hidden"),ws.setAttribute("visibility","hidden"),As.setAttribute("visibility","hidden"),ke.__removeProfileMarker(Be),Ds.classList.remove("tooltipFadeIn"),Fs.classList.remove("tooltipFadeIn"),Ds.classList.add("tooltipFadeOut"),Fs.classList.add("tooltipFadeOut")}function Eo(Rs){const Es=ci.createSVGPoint();Es.x=Rs.clientX,Es.y=Rs.clientY;const bo=Es.matrixTransform(ci.getScreenCTM().inverse()),Us=this._svgXToDataDist(bo.x,ri,di,nr)*Hr,zs=Math.max(1,this._arrayBisect(Ls,Us)),Ws=Cn[zs-1],yo=Cn[zs];let Co=Ws;Us-Ws.dist>yo.dist-Us&&(Co=yo);const qa=this._dataDistToSvgX(Co.dist/Hr,ri,di,nr),ma=this._dataZToSvgY(Co.z,Fi,Hi,wr);As.setAttribute("cx",qa),As.setAttribute("cy",ma),ps.setAttribute("x1",qa),ps.setAttribute("y1",Fi),ps.setAttribute("x2",qa),ps.setAttribute("y2",0),ws.setAttribute("x1",si+ai),ws.setAttribute("y1",ma),ws.setAttribute("x2",di+si+ai),ws.setAttribute("y2",ma),ke.__updateProfileMarker(Be,Co);const Pa=`Altitude : ${Co.z.toLocaleString()} m`,Fa=`Pente : ${Co.slope} %`,xa=`(lat : ${Co.lat.toLocaleString()} / lon : ${Co.lon.toLocaleString()})`;xs.innerHTML=Pa,Xs.innerHTML=Fa,_o.innerHTML=xa;const aa=Math.max(this._getTextWidth(xa,_o),this._getTextWidth(Pa,xs));let la;Co.dist>Tn*Hr/2?(la=`M -0.5 -0.5 l -6 6 l 0 16 l -${aa+10} 0 l 0 -44 l ${aa+10} 0 l 0 16 l 6 6`,Ds.setAttribute("transform",`translate(${-(aa/2+12)},0)`)):Co.dist<=Tn*Hr/2&&(la=`M -0.5 -0.5 l 6 6 l 0 16 l ${aa+10} 0 l 0 -44 l -${aa+10} 0 l 0 16 l -6 6`,Ds.setAttribute("transform",`translate(${aa/2+12},0)`)),Ss.setAttribute("d",la),Is.setAttribute("d",la),Fs.setAttribute("transform",`translate(${qa},${ma})`),Fs.style.transform=`translate(${qa}px,${ma}px)`}return Ms.addEventListener("pointerover",oa),Ms.addEventListener("pointerout",qs),Ms.addEventListener("pointermove",Eo.bind(this)),vs.appendChild(Ms),ci.appendChild(vs),Bn.appendChild(ci),e},displayProfileRaw:function(Oe,e,Te,ke){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var Be=Oe&&Oe.points?Oe.points:{},Ue=document.createElement("textarea");return Ue.id="profilElevationResults",Ue.rows=10,Ue.cols=50,Ue.style.width="100%",Ue.innerHTML=JSON.stringify(Be,void 0,4),Ue.addEventListener("mouseover",function(He){ke.__customRawProfileMouseOverEvent(Te,He)}),e.appendChild(Ue),e}},displayProfileLibD3:function(Oe,e,Te,ke){var Be=Te;if(e&&Oe){for(;e.firstChild;)e.removeChild(e.firstChild);var Ue=Oe.points;if(Oe.distance>2e3){Oe.unit="km";for(let vi=0;vi<Ue.length;vi++)Ue[vi].dist/=1e3}var He=Be.options.displayProfileOptions,We={top:20,right:20,bottom:30,left:40},Cn=window.getComputedStyle(e).getPropertyValue("width"),En=window.getComputedStyle(e).getPropertyValue("height"),An=Cn.replace(/px/,"")-We.left-We.right,Sn=En.replace(/px/,"")-We.top-We.bottom,Tn=d3.scale.linear().range([0,An]),Ln=d3.scale.linear().range([Sn,0]),Bn=d3.svg.axis().scale(Tn).orient("bottom").ticks(5),ei=d3.svg.axis().scale(Ln).orient("left").ticks(5),ti=d3.svg.line().interpolate("basis").x(function(vi){return Tn(vi.dist)}).y(function(vi){return Ln(vi.z)}),ni=d3.svg.area().interpolate("basis").x(function(vi){return Tn(vi.dist)}).y0(Sn).y1(function(vi){return Ln(vi.z)}),ri=d3.select(e).append("svg").attr("width",An+We.left+We.right).attr("height",Sn+We.top+We.bottom).append("g").attr("transform","translate("+We.left+","+We.top+")"),si=d3.extent(Ue,function(vi){return vi.dist});Tn.domain(si);var ai=[0,d3.max(Ue,function(vi){return vi.z})];Ln.domain(ai),ri.append("path").datum(Ue).attr("class","area-d3").attr("d",ni),ri.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+Sn+")").call(Bn).append("text").attr("y",-15).attr("dy",".71em").attr("x",An).text("Distance ("+Oe.unit+")"),ri.append("g").attr("class","y axis-d3").call(ei).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),ri.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+Sn+")").call(Bn.orient("bottom").tickSize(-Sn,0,0).tickFormat("")),ri.append("g").attr("class","grid-d3 horizontal").call(ei.orient("left").tickSize(-An,0,0).tickFormat("")),ri.append("path").datum(Ue).attr("class","line-d3").attr("d",ti),ri.selectAll("circle").data(Ue).enter().append("circle").attr("cx",function(vi){return Tn(vi.dist)}).attr("cy",function(vi){return Ln(vi.z)}).attr("r",0).attr("class","circle-d3");var li=ri.append("g").style("display","none");li.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),li.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),li.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var Pi=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),pi=d3.bisector(function(vi){return vi.dist}).left;return ri.append("rect").attr("class","overlay-d3").attr("width",An).attr("height",Sn).on("mouseover",function(){li.style("display",null),ke.__createProfileMarker(Be,Ue[0])}).on("mouseout",function(){li.style("display","none"),ke.__removeProfileMarker(Be),Pi.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var vi=d3.mouse(this),Ri=Tn.invert(vi[0]),Fi=Math.max(1,pi(Ue,Ri)),di=Ue[Fi-1],ci=Ue[Fi],Mi=Ri-di[0]>ci[0]-Ri?ci:di,Oi=Tn(Mi.dist),Hi=Ln(Mi.z);li.select("#focusCircle").attr("cx",Oi).attr("cy",Hi),li.select("#focusLineX").attr("x1",Oi).attr("y1",Ln(ai[0])).attr("x2",Oi).attr("y2",Ln(ai[1])),li.select("#focusLineY").attr("x1",Tn(si[0])).attr("y1",Hi).attr("x2",Tn(si[1])).attr("y2",Hi),ke.__updateProfileMarker(Be,Mi),Pi.transition().duration(200).style("opacity",.9);var Ki="";Ki+=" Altitude : "+Mi.z+" m",He.currentSlope&&(Ki+="<br/> Pente : "+Mi.slope+" %"),Ki+="<br/> (Lat : "+Mi.lat+"/ Lon : "+Mi.lon+")",Pi.html(Ki).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),ri}},displayProfileLibAmCharts:function(Oe,e,Te,ke){var Be=Te;if(e&&Oe){var Ue=Oe.points,He="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>",We=Be.options.displayProfileOptions.currentSlope;if(We&&(He+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),He+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){}),Oe.distance>2e3){Oe.unit="km";for(let Tn=0;Tn<Ue.length;Tn++)Ue[Tn].dist/=1e3}for(let Tn=0;Tn<Ue.length;Tn++){var Cn=Ue[Tn].dist,En=100;Cn>100?En=1:Cn>10&&(En=10),Cn=Math.round(Cn*En)/En,Ue[Tn].dist=Cn}var An={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+Oe.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:He,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:Ue},Sn=AmCharts.makeChart(e,An);return Sn.addListener("changed",function(Tn){var Ln=Tn.chart.dataProvider[Tn.index];ke.__updateProfileMarker(Be,Ln)}),Sn}}},logger$b=LoggerByDefault.getLogger("elevationpath"),fa,ElevationPath=(fa=class extends ControlExtended{constructor(e){if(logger$b.trace("ElevationPath()"),e=e||{},super(e),!(this instanceof fa))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ElevationPath",this._uid=e.id||SelectorID.generate(),this._showContainer=null,this._pictoButton=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}static __removeProfileMarker(e){var Te=e;Te._marker&&(Te._measureSource.removeFeature(Te._marker),Te._marker=null)}static __createProfileMarker(e,Te){var ke=e;ke._marker&&(ke._measureSource.removeFeature(ke._marker),ke._marker=null);var Be=ke.getMap(),Ue=Be.getView().getProjection(),He=transform$1([Te.lon,Te.lat],"EPSG:4326",Ue),We=ke._measureSource.getFeatures()[0].getGeometry().getClosestPoint(He),Cn=new Point$1(We);ke._marker=new Feature({geometry:Cn}),logger$b.trace(Cn),ke._marker.setStyle(ke._markerStyle),ke._measureSource.addFeature(ke._marker)}static __updateProfileMarker(e,Te){var ke=e;fa.__removeProfileMarker(ke),fa.__createProfileMarker(ke,Te)}static __customRawProfileOperation(e,Te){logger$b.log("__customRawProfileOperation");for(var ke=e,Be=Te.points,Ue=ke.getMap().getView().getProjection(),He=0;He<Be.length;He++){var We=Be[He],Cn=transform$1([We.lon,We.lat],"EPSG:4326",Ue),En=new Point$1(Cn);ke._marker=new Feature({geometry:En}),logger$b.trace(En);var An=fa.DEFAULT_STYLES.RESULTS,Sn=new CircleStyle({radius:An.imageRadius,stroke:new Stroke({color:An.imageStrokeColor,width:An.imageStrokeWidth}),fill:new Fill({color:An.imageFillColor})});ke._marker.setStyle(new Style$1({image:Sn})),ke._measureSource.addFeature(ke._marker)}}static __customRawProfileMouseOverEvent(e,Te){logger$b.log("__customRawProfileMouseOverEvent",e,Te)}static DISPLAY_PROFILE_LIB_AMCHARTS(e,Te,ke){if(logger$b.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),typeof AmCharts>"u"){logger$b.log("Lib. AmCharts is not loaded !");return}var Be=ProfileElevationPathDOM.displayProfileLibAmCharts(e,Te,ke,fa);Be&&(this._profile=Be)}static DISPLAY_PROFILE_LIB_D3(e,Te,ke){if(logger$b.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),typeof d3>"u"){logger$b.log("Lib. D3 is not loaded !");return}var Be=ProfileElevationPathDOM.displayProfileLibD3(e,Te,ke,fa);Be&&(this._profile=Be)}static DISPLAY_PROFILE_RAW(e,Te,ke){logger$b.trace("ElevationPath.DISPLAY_PROFILE_RAW");var Be=ProfileElevationPathDOM.displayProfileRaw(e,Te,ke,fa);Be&&(this._profile=Be)}static DISPLAY_PROFILE_BY_DEFAULT(e,Te,ke){logger$b.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var Be=ProfileElevationPathDOM.displayProfileByDefault(e,Te,ke,fa);Be&&(this._profile=Be)}setMap(e){if(logger$b.trace("ElevationPath::setMap"),e&&(this.options.active&&(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this),this.options.export)){var Te=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(Te),this.export.render();var ke=this;this.export.on("button:clicked",Be=>{ke.dispatchEvent({type:"export:compute",content:Be.content})})}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getActive(){return logger$b.trace("ElevationPath::getActive"),this.options.active}setActive(e){logger$b.trace("ElevationPath::setActive"),this.options.active=e}getData(){return Helper.assign({type:"elevationpath"},this._data)}setData(e){this._data=e}getContainer(){return this._container}getLayer(){return this._measureVector}setLayer(e){if(!e){this._measureVector=null;return}if(!(e instanceof VectorLayer)){logger$b.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._drawStyleFinish),this._measureVector=e,this._measureSource=e.getSource()}getGeoJSON(){var e=this._measureVector.getSource().getFeatures(),Te=new GeoJSON({defaultStyle:this._drawStyleFinish}),ke=Te.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return ke}getStyle(){return this._drawStyleFinish}clean(e){logger$b.trace("ElevationPath::clean");var Te=this.getMap();this._panelContainer.style.display="none",this._pictoButton.setAttribute("aria-pressed",!1),this._removeProfile(),this._removeMeasureInteraction(Te,typeof e<"u"?e:!1),this.setLayer()}init(){this._pictoButton.setAttribute("aria-pressed",!0),this._panelContainer.style.display="block",this._displayProfile(this._data),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden"}_initialize(e){logger$b.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,export:!1,elevationOptions:{outputFormat:"json"},layerDescription:{title:"Profil altimétrique",description:"Mon profil altimétrique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},Helper.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var Te=e.displayProfileOptions||{};this.export=null;var ke=Te.apply;this.options.displayProfileOptions.apply=typeof ke=="function"?ke:fa.DISPLAY_PROFILE_BY_DEFAULT;var Be=Te.target;this.options.displayProfileOptions.target=typeof Be<"u"?Be:null;var Ue=e.stylesOptions||{};this.options.stylesOptions.draw=Ue.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=Ue.marker||{},this._createStylingMarker()}_initializeContainer(){logger$b.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),Te=this._pictoButton=this._createShowElevationPathPictoElement();e.appendChild(Te),this.options.active&&this._pictoButton.click();var ke=this._panelContainer=this._createElevationPathPanelElement(),Be=this._createElevationPathPanelDivElement();ke.appendChild(Be);var Ue=this._createElevationPathPanelHeaderElement();Be.appendChild(Ue);var He=this._createElevationPathPanelProfilElement();this._profileContainer=He.firstChild,Be.appendChild(He);var We=this._waitingContainer=this._createElevationPathWaitingElement();Be.appendChild(We);var Cn=this._infoContainer=this._createElevationPathInformationsElement();Be.appendChild(Cn);var En=this._createDrawingButtonsPluginDiv();return Be.appendChild(En),this.options.displayProfileOptions.target===null&&e.appendChild(ke),e}_createStylingMarker(){logger$b.trace("ElevationPath::_createStylingMarker ");var e=fa.DEFAULT_STYLES.MARKER;logger$b.trace("style marker",e),this.options.stylesOptions.marker instanceof ImageStyle&&(e=this.options.stylesOptions.marker),this._markerStyle=new Style$1({image:e})}_createStylingDraw(){logger$b.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;logger$b.trace("style start",e.start);var Te={image:Measures.DEFAULT_POINTER_STYLE,stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof ImageStyle&&(Te.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof Stroke&&(Te.stroke=e.start),this._drawStyleStart=new Style$1(Te),logger$b.trace("style finish",e.finish);var ke={stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof Stroke&&(ke.stroke=e.finish),this._drawStyleFinish=new Style$1(ke)}_createStylingProfile(){logger$b.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;logger$b.trace("style profile",e);var Te=fa.DEFAULT_STYLES.PROFILE;Object.keys(Te).forEach(ke=>{if(!e.hasOwnProperty(ke))e[ke]=Te[ke];else{var Be=Te[ke];typeof Be=="object"&&(Helper.mergeParams(Be,e[ke]),e[ke]=Be)}})}_initMeasureInteraction(e){logger$b.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new VectorSource,this._measureVector=new VectorLayer({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure:profil",e.addLayer(this._measureVector),e.getControls().forEach(Te=>{if(Te instanceof LayerSwitcher){var ke=this._measureVector.gpLayerId;Te._layers[ke].title===ke&&Te.addLayer(this._measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}}))}_addMeasureInteraction(e){logger$b.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new Draw({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",Te=>{logger$b.trace("drawstart",Te),this._marker!==null&&(this._measureSource.removeFeature(this._marker),this._marker=null),this._lastSketch!==null&&(this._measureSource.removeFeature(this._lastSketch),this._lastSketch=null),this._currentSketch=Te.feature;for(var ke=this._measureSource.getFeatures(),Be=0;Be<ke.length;Be++)this._measureSource.removeFeature(ke[Be]);this.dispatchEvent("elevationpath:drawstart")}),this._measureDraw.on("drawend",Te=>{logger$b.trace("drawend",Te),this.dispatchEvent("elevationpath:drawend"),this._lastSketch=this._currentSketch,typeof this.options.elevationOptions.onSuccess>"u"&&this.options.displayProfileOptions.target===null&&(this._panelContainer.style.display="block"),this._measureDraw.setActive(!1),this._requestService()}))}_removeMeasureInteraction(e,Te){logger$b.trace("ElevationPath::_removeMeasureInteraction()"),e&&(Te&&this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))}_getGeometry(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=[],Te=this.getMap(),ke=Te.getView().getProjection(),Be="EPSG:4326",Ue=this._currentSketch.getGeometry().getCoordinates(),He=0;He<Ue.length;He++){var We=Ue[He],Cn=We;ke!==Be&&(Cn=transform$1(We,ke,Be)),e.push({lon:Math.round(Cn[0]*1e8)/1e8,lat:Math.round(Cn[1]*1e8)/1e8})}return e}_getLength(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=0,Te=this.getMap(),ke=Te.getView().getProjection(),Be="EPSG:4326",Ue=this._currentSketch.getGeometry().getCoordinates(),He=0,We=Ue.length-1;He<We;++He){var Cn=transform$1(Ue[He],ke,Be),En=transform$1(Ue[He+1],ke,Be);Cn[0]=Math.round(Cn[0]*1e8)/1e8,Cn[1]=Math.round(Cn[1]*1e8)/1e8,En[0]=Math.round(En[0]*1e8)/1e8,En[1]=Math.round(En[1]*1e8)/1e8,e+=getDistance(Cn,En)}return e}_getSketchCoords(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=this.getMap(),Te=e.getView().getProjection(),ke="EPSG:4326",Be=[],Ue=this._currentSketch.getGeometry().getCoordinates(),He=0;He<Ue.length;He++){var We=transform$1(Ue[He],Te,ke);We[0]=Math.round(We[0]*1e8)/1e8,We[1]=Math.round(We[1]*1e8)/1e8,Be.push(We)}return Be}_requestService(){logger$b.trace("ElevationPath::_requestService");var e=this._getGeometry();if(logger$b.trace("geometry",e),!e){logger$b.warn("missing geometry !?");return}var Te={};Helper.mergeParams(Te,this.options.elevationOptions),Helper.mergeParams(Te,{apiKey:Te.apiKey||this.options.apiKey}),typeof Te.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?Te.ssl=this.options.ssl:Te.ssl=!0),Helper.mergeParams(Te,{ssl:Te.ssl});var ke=this,Be=this.options.elevationOptions.onFailure!==null&&typeof this.options.elevationOptions.onFailure=="function",Ue=this.options.elevationOptions.onSuccess!==null&&typeof this.options.elevationOptions.onSuccess=="function",He=function(En){logger$b.trace(En),En&&(ke._panelContainer.style.display="block",ke._data&&(ke._data={}),ke._data=ke._computeElevationMeasure(En.elevations),ke._displayProfile(ke._data),ke._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",ke._waiting=!1,ke._measureDraw.setActive(!0)),Ue&&ke.options.elevationOptions.onSuccess.call(ke,ke.getData())},We=function(En){ke._panelContainer.style.display="none",logger$b.error(En.message),ke._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",ke._waiting=!1,ke._measureDraw.setActive(!0),Be&&ke.options.elevationOptions.onFailure.call(ke,En)};Helper.mergeParams(Te,{onSuccess:He,onFailure:We});var Cn=Te.sampling||200;Cn>0&&Helper.mergeParams(Te,{sampling:Cn}),Helper.mergeParams(Te,{positions:e}),logger$b.trace("options du service",Te),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",Gp.Services.getAltitude(Te)}_computeElevationMeasure(e){logger$b.trace("ElevationPath::_computeElevationMeasure",e);var Te=e,ke="m",Be=this._getSketchCoords();if(Be){Te[0].dist=0,Te[0].slope=0,Te[0].oldlat=Te[0].lat,Te[0].oldlon=Te[0].lon,Te[0].lat=Math.round(Te[0].lat*1e5)/1e5,Te[0].lon=Math.round(Te[0].lon*1e5)/1e5;var Ue=0,He=0,We=0,Cn=0,En=0,An=0,Sn=[];console.log(Te);for(var Tn=1;Tn<Te.length;Tn++){var Ln=[Te[Tn].lon,Te[Tn].lat],Bn=getDistance(Ln,[Te[Tn-1].oldlon,Te[Tn-1].oldlat]),ei=Bn+En,ti=Te[Tn].z,ni=Te[Tn-1].z;ti<0&&(ti=0),ni<0&&(ni=0);var ri=ti-ni;ri<0?(Ue+=Bn,Cn+=ri):ri>0&&(He+=Bn,We+=ri),En=ei,Te[Tn].dist=ei,Sn.push(En),An+=ri?Math.abs(Math.round(ri/ei*100)):0,Te[Tn].slope=ri?Math.abs(Math.round(ri/ei*100)):0;var si=Te[Tn].slope;si>15&&si<30?Te[Tn].color="#005b4c":si>30&&si<45?Te[Tn].color="#00362d":si>45?Te[Tn].color="#00120f":Te[Tn].color="#00B798",Te[Tn].oldlat=Te[Tn].lat,Te[Tn].oldlon=Te[Tn].lon,Te[Tn].lat=Math.round(Te[Tn].lat*1e5)/1e5,Te[Tn].lon=Math.round(Te[Tn].lon*1e5)/1e5}logger$b.trace("List Distances",Sn);for(var ai=Te[0].z,li=Te[0].z,Pi=Te[0].slope,pi=0;pi<Te.length;pi++){var vi=Te[pi];vi.z<-100&&(vi.z=0),vi.z>li&&(li=vi.z),vi.z<ai&&(ai=vi.z),vi.slope>Pi&&(Pi=vi.slope)}return{greaterSlope:Pi,meanSlope:Math.round(An/Te.length),distancePlus:He,distanceMinus:Ue,ascendingElevation:We,descendingElevation:Cn,altMin:ai.toLocaleString(),altMax:li.toLocaleString(),distance:this._getLength(),unit:ke,points:Te}}}_displayProfile(e){logger$b.trace("ElevationPath::_displayProfile",e),this._updateInfoContainer();var Te=this.options.displayProfileOptions.target;Te&&Te.appendChild(this._panelContainer),Te=this._profileContainer;var ke=this,Be=this.options.displayProfileOptions.apply;Be.call(this,e,Te,ke);var Ue=this.options.displayProfileOptions,He=document.getElementById("GPelevationPathPanelInfo-"+this._uid);He&&(Ue.totalDistance||Ue.greaterSlope||Ue.meanSlope||Ue.ascendingElevation||Ue.descendingElevation)&&(He.style.display="block"),this.dispatchEvent({type:"elevationpath:compute"})}_updateInfoContainer(){logger$b.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,Te=this.options.displayProfileOptions.meanSlope,ke=this.options.displayProfileOptions.greaterSlope,Be=this.options.displayProfileOptions.ascendingElevation,Ue=this.options.displayProfileOptions.descendingElevation,He=this._infoContainer;if(He.childElementCount)for(;He.firstChild;)He.removeChild(He.firstChild);e&&this._addElevationPathInformationsItem("Distance totale",Math.round(this._data.distance).toLocaleString()+" m"),Be&&this._addElevationPathInformationsItem("Dénivelé positif",this._data.ascendingElevation.toLocaleString()+" m"),Ue&&this._addElevationPathInformationsItem("Dénivelé négatif",this._data.descendingElevation.toLocaleString()+" m"),Te&&this._addElevationPathInformationsItem("Pente moyenne",this._data.meanSlope.toLocaleString()+" %"),ke&&this._addElevationPathInformationsItem("Plus forte pente",this._data.greaterSlope.toLocaleString()+" %")}_removeMeasure(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),Te=0;Te<e.length;Te++)this._measureSource.removeFeature(e[Te])}}_removeProfile(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)}onShowElevationPathClick(e){var Te=this._pictoButton.ariaPressed;Te==="true"&&this.onPanelOpen();var ke=this.getMap();Interactions.unset(ke,{current:"ElevationPath"}),Te==="true"?(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(ke),this._addMeasureInteraction(ke)):(this._panelContainer.style.display="none",e&&e.target.dataset&&e.target.dataset.removeMeasure?e.target.dataset.removeMeasure==="true"?this._removeMeasure():(this._lastSketch=null,this._currentSketch=null):this._removeMeasure(),this._removeProfile(),e&&e.target.dataset&&e.target.dataset.removeLayer?this._removeMeasureInteraction(ke,e.target.dataset.removeLayer==="true"):this._removeMeasureInteraction(ke,!0))}onOpenElevationPathInfoClick(){var e=this._infoContainer;e.className==="GPelementVisible gpf-visible"?(clearTimeout(this._timerHdlr),e.className="GPelementHidden gpf-hidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){e.className="GPelementHidden gpf-hidden"},4e3)}},Mc(fa,"DEFAULT_STYLES",{MARKER:new Icon({src:Marker.lightOrange,anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}}),fa);Object.assign(ElevationPath.prototype,ElevationPathDOM);Object.assign(ElevationPath.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ElevationPath=ElevationPath);var logger$a=LoggerByDefault.getLogger("layerimport"),wo,LayerImport=(wo=class extends ControlExtended{constructor(e){if(e=e||{},super(e),this.CLASSNAME="LayerImport",!(this instanceof wo))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this._initialize(e),this._container=this._initContainer(e),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){var Te=this;e.getLayers().on("remove",function(ke){ke.element.gpResultLayerId==="layerimport:MAPBOX"&&ke.element.gpEditorId&&Te._mapBoxPanel&&Te._importPanel&&(Te.cleanMapBoxResults(ke.element.gpEditorId),Te._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),Te._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"))},Te),this.draggable&&Draggable.dragElement(this._importPanel,this._importPanelHeader,e.getTargetElement()),this.collapsed||this._showImportButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$a.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showImportButton.click(),this.collapsed=e)}getStaticImportContent(){return this.contentStatic}getServiceImportContent(){return this.contentService}getName(){return this._name}getContainer(){return this._container}_initialize(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},editor:{}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new Style$1({image:wo.DefaultStyles.image,stroke:wo.DefaultStyles.stroke,fill:wo.DefaultStyles.fill,text:wo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new Style$1({image:wo.DefaultStyles.image,stroke:wo.DefaultStyles.stroke,fill:wo.DefaultStyles.fill,text:wo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new Style$1({image:wo.DefaultStyles.image,stroke:wo.DefaultStyles.stroke,fill:wo.DefaultStyles.fill,text:wo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions.MapBox.defaultStyle:this.options.vectorStyleOptions.MapBox.defaultStyle=new Style$1({image:wo.DefaultStyles.image,stroke:wo.DefaultStyles.stroke,fill:wo.DefaultStyles.fill,text:wo.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.editor?this.options.vectorStyleOptions.MapBox.editor=e.vectorStyleOptions.MapBox.editor:this.options.vectorStyleOptions.MapBox.editor={title:!0,collapse:!1,themes:!1,layers:!0,style:!0,filter:!1,legend:!0,group:!1},e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.hasOwnProperty("display")?this.options.vectorStyleOptions.MapBox.display=e.vectorStyleOptions.MapBox.display:this.options.vectorStyleOptions.MapBox.display=!0,Array.isArray(e.layerTypes)){for(var Te=[],ke=0;ke<e.layerTypes.length;ke++)Te.push(e.layerTypes[ke]);this.options.layerTypes=Te}Helper.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportButton=null,this._importPanel=null,this._panelCloseButton=null,this._importPanelHeader=null,this._importPanelTitle=null,this._importPanelReturnPicto=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapPanelHeader=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxPanelHeader=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this._hasMapBoxResults=!1,this.contentStatic=null,this._url=null,this._file=null,this._name=null}_checkInputOptions(e){if(e.layerTypes){var Te=e.layerTypes;if(!Array.isArray(Te))logger$a.warn(`[ol.control.LayerImport] 'options.layerTypes' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]`),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"];else{for(var ke=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],Be=[],Ue=0;Ue<Te.length;Ue++)typeof Te[Ue]!="string"?(Be.push(Ue),logger$a.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+Te[Ue]+")")):(Te[Ue]=Te[Ue].toUpperCase(),ke.indexOf(Te[Ue])===-1&&(Be.push(Ue),logger$a.log("[ol.control.LayerImport] options.layerTypes : "+Te[Ue]+" is not a supported type")),Te[Ue]==="GEOJSON"&&(Te[Ue]="GeoJSON"),Te[Ue]==="MAPBOX"&&(Te[Ue]="MAPBOX"));if(Be.length!==0)for(var He=Be.length-1;He>=0;He--)Te.splice(Be[He],1)}}}_initDefaultStyles(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new Style$1({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var Te=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new Style$1({image:Te.image,stroke:Te.stroke,fill:Te.fill,text:Te.text});var ke=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new Style$1({image:ke.image,stroke:ke.stroke,fill:ke.fill,text:ke.text});var Be=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new Style$1({image:Be.image,stroke:Be.stroke,fill:Be.fill,text:Be.text})}_initImportTypes(){this._currentImportType=this.options.layerTypes[0]||"KML",this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"}_initContainer(){var e=this._createMainContainerElement(),Te=this._showImportButton=this._createShowImportPictoElement();e.appendChild(Te);var ke=this._importPanel=this._createImportPanelElement(),Be=this._createImportPanelDivElement();ke.appendChild(Be);var Ue=this._importPanelHeader=this._createImportPanelHeaderElement(),He=this._importPanelReturnPicto=this._createImportPanelReturnPictoElement();Ue.appendChild(He);var We=this._importPanelTitle=this._createImportPanelTitleElement();Ue.appendChild(We);var Cn=this._panelCloseButton=this._createImportPanelCloseElement();Ue.appendChild(Cn),Be.appendChild(Ue);var En=this._formContainer=this._initInputFormElement();Be.appendChild(En);var An=this._getCapPanel=this._createImportGetCapPanelElement(),Sn=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();An.appendChild(Sn),Be.appendChild(An);var Tn=this._mapBoxPanel=this._createImportMapBoxPanelElement(),Ln=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();Tn.appendChild(Ln);var Bn=this._loadingContainer=this._createLoadingElement();Tn.appendChild(Bn),Be.appendChild(Tn);var ei=this._waitingContainer=this._createImportWaitingElement();return Be.appendChild(ei),e.appendChild(ke),e}_initInputFormElement(){var e=this._createImportPanelFormElement(),Te=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(Te);var ke=this._createImportStaticParamsContainer(this.options.layerTypes[0]),Be=this._createStaticNameLabel();ke.appendChild(Be);var Ue=this._createStaticModeChoiceDiv(),He=this._createStaticLocalChoiceDiv();Ue.appendChild(He);var We=this._createStaticUrlChoiceDiv();Ue.appendChild(We),ke.appendChild(Ue);var Cn=this._createStaticLocalInputDiv();Cn.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),Cn.appendChild(this._staticLocalImportInput),ke.appendChild(Cn);var En=this._createStaticUrlInputDiv();En.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),En.appendChild(this._staticUrlImportInput),ke.appendChild(En),e.appendChild(ke);var An=this._createServiceParamsContainer(this.options.layerTypes[0]),Sn=this._createServiceUrlDiv();Sn.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),Sn.appendChild(this._serviceUrlImportInput),An.appendChild(Sn),e.appendChild(An);var Tn=this._createImportSubmitFormElement();return e.appendChild(Tn),e}_onShowImportClick(e){var Te=this._showImportButton.ariaPressed;Te==="true"&&this.onPanelOpen();var ke=this.getMap();Interactions.unset(ke),this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this._hasMapBoxResults?(this._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),this._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):this._hasGetCapResults?(this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):(this._getCapPanel.classList.replace("GPelementVisible","GPelementHidden"),this._getCapPanel.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"),this._displayFormContainer())}_onImportTypeChange(e){this._currentImportType=e.target.value,this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1)}_onStaticImportTypeChange(e){this._currentStaticImportType=e.target.value}_onGetCapPanelClose(){(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&this.cleanGetCapResultsList()}_onMapBoxPanelClose(){this.cleanMapBoxResultsList(),this._loadingContainer.className="",this._importPanelReturnPicto.classList.replace("GPelementVisible","GPelementHidden"),this._importPanelReturnPicto.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden")}_onReturnPictoClick(e){this._onGetCapPanelClose(),this._onMapBoxPanelClose(),this._loadingContainer.className=""}_onImportSubmit(){logger$a.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?(this.setCollapsed(!0),this._importStaticLayer()):this._importServiceLayers()}_importStaticLayer(){var e,Te=document.getElementById(this._addUID("GPimportName"));Te&&(e=Te.value||"",logger$a.log("import layer name : "+e)),this._currentStaticImportType==="local"?(logger$a.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):this._currentStaticImportType==="url"&&(logger$a.log("import static layer from url"),this._importStaticLayerFromUrl(e))}_importStaticLayerFromUrl(e){var Te=this._staticUrlImportInput.value;if(logger$a.log("url : ",Te),Te.length===0){logger$a.error("[ol.control.LayerImport] url parameter is mandatory");return}Te.trim&&(Te=Te.trim()),this._url=Te,e||(e=this._url.substring(this._url.lastIndexOf("/")+1,this._url.lastIndexOf("."))),this._name=e,this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(Te=ProxyUtils.proxifyUrl(Te,this.options.webServicesOptions));var ke=this;Gp.Protocols.XHR.call({url:Te,method:"GET",timeOut:15e3,onResponse:function(Be){ke._hideWaitingContainer(),ke._addFeaturesFromImportStaticLayer(Be,e)},onFailure:function(Be){ke._hideWaitingContainer(),logger$a.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",Be)}})}_importStaticLayerFromLocalFile(e){var Te=this._staticLocalImportInput.files[0];if(!Te){logger$a.warn("[ol.control.LayerImport] missing file");return}this._file=Te,e||(e=this._file.name.substring(this._file.name.lastIndexOf("/")+1,this._file.name.lastIndexOf("."))),this._name=e;var ke=new FileReader,Be=this;ke.onerror=Ue=>{Be._hideWaitingContainer(),logger$a.error("error fileReader : ",Ue)},ke.onprogress=()=>{logger$a.log("onprogress")},ke.onloadstart=()=>{Be._displayWaitingContainer(),logger$a.log("onloadstart")},ke.onabort=()=>{Be._hideWaitingContainer(),logger$a.log("onabort")},ke.onloadend=Ue=>{logger$a.log("onloadend : ",Ue)},ke.onload=Ue=>{logger$a.log("fileReader onload - file content : ",Ue.target.result),Be._hideWaitingContainer(),Be._addFeaturesFromImportStaticLayer(Ue.target.result,e)},ke.readAsText(Te)}_addFeaturesFromImportStaticLayer(e,Te){var ke=this.getMap();if(!(!ke||!e)){var Be=null,Ue=null,He=null,We=null;if(this.contentStatic=e,this._currentImportType==="MAPBOX"){this._hasMapBoxResults=!0;var Cn=this,En=JSON.parse(e);ke.set("mapbox-style",En);var An=En.sources,Sn=Object.keys(An).length>1?1:0;for(var Tn in An)if(An.hasOwnProperty(Tn)){var Ln="",Bn="",ei=null,ti=null,ni=null,ri=null;if(En.metadata){for(var si in En.metadata)if(En.metadata.hasOwnProperty(si)){var ai=si.split(":");if(ai[0]==="geoportail"){var li=ai[1];if(li==="title"){Ln=En.metadata[si];continue}if(li==="description"){Bn=En.metadata[si];continue}if(li==="quicklookUrl"){ei=En.metadata[si];continue}if(li==="legends"){ti=En.metadata[si];continue}if(li==="metadata"){ni=En.metadata[si];continue}if(li==="originators"){ri=En.metadata[si];continue}}}}Ln||(Ln="Couche MapBox"),Bn||(Bn="Couche MapBox"),Ln=Sn?Ln+"("+Tn+")":Ln;var Pi=An[Tn],pi=Pi.type;if(pi==="vector"){var vi=Pi.url,Ri=Pi.tiles,Fi=En.sprite;if(vi&&vi.indexOf("mapbox://")===0){var di=this._url;if(di){if(Ri=["a","b","c","d"].map(function(ar){var nr=vi.replace("mapbox://",""),Dr=di.split("?")[1];return"https://"+ar+".tiles.mapbox.com/v4/"+nr+"/{z}/{x}/{y}.vector.pbf?"+Dr}),Fi.indexOf("mapbox://")===0){var ci=di.split("?");En.sprite=ci[0]+"/sprite?"+ci[1]}}else logger$a.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(Ri)He=new MVT({featureClass:Feature}),Ue=new VectorTile({attributions:Pi.attribution,format:He,urls:Ri}),Ue._title=Ln,Ue._description=Bn,Ue._quicklookUrl=ei,Ue._metadata=ni,Ue._legends=ti,Ue._originators=ri,Ue.on("tileloadstart",function(ar){Cn._loadingContainer.className="GPmapLoadingVisible"}),Ue.on("tileloadend",function(ar){Cn._loadingContainer.className=""}),Ue.on("tileloaderror",function(ar){Cn._loadingContainer.className=""}),Be=new VectorTileLayer({source:Ue,visible:!1,declutter:!0}),Be.id=Tn,Be.gpResultLayerId="layerimport:"+this._currentImportType;else if(vi){He=new MVT({featureClass:Feature}),Be=new VectorTileLayer({visible:!1,declutter:!0}),Be.id=Tn,Be.gpResultLayerId="layerimport:"+this._currentImportType;var Mi=new TileJSON({url:vi}),Oi=Mi.on("change",function(){if(Mi.getState()==="ready"){for(var ar=Mi.getTileJSON(),nr=Array.isArray(ar.tiles)?ar.tiles:[ar.tiles],Dr=0;Dr<nr.length;Dr++){var kr=nr[Dr];kr.indexOf("http")!==0&&(nr[Dr]=vi+kr)}Ue=new VectorTile({attributions:Mi.getAttributions()||ar.attribution,format:He,urls:nr}),Ue._title=Ln,Ue._description=Bn,Ue._quicklookUrl=ei,Ue._metadata=ni,Ue._legends=ti,Ue._originators=ri,Ue.on("tileloadstart",function(Ir){Cn._loadingContainer.className="GPmapLoadingVisible"}),Ue.on("tileloadend",function(Ir){Cn._loadingContainer.className=""}),Be.setSource(Ue),Be.set("mapbox-extension",ar.vector_layers),unByKey(Oi)}})}}else if(pi==="geojson"){var Hi=Pi.data;He=new GeoJSON,Ue=new VectorTile({attributions:Pi.attribution,format:He,url:Hi}),Ue._title=Ln,Ue._description=Bn,Ue._quicklookUrl=ei,Ue._metadata=ni,Ue._legends=ti,Ue._originators=ri,Be=new VectorTileLayer({source:Ue,visible:!1,declutter:!0}),Be.id=Tn,Be.gpResultLayerId="layerimport:"+this._currentImportType}else{logger$a.warn("Type MapBox format unknown !");return}var Ki=JSON.parse(JSON.stringify(En));if(Sn){for(var or=Ki.layers,sr=0;sr<or.length;sr++){var Cr=or[sr];if(Cr.source!==Tn){or.splice(sr,1);continue}}for(var pr in Ki.sources)Ki.sources.hasOwnProperty(pr)&&pr!==Tn&&delete Ki.sources[pr]}var wr={id:Tn,styles:Ki,layer:Be,options:{title:Te||Ln,description:Bn,quicklookUrl:ei,metadata:ni,legends:ti,originators:ri}};(function(ar){var nr=()=>{applyStyle(ar.layer,ar.styles,{source:ar.id}).then(function(){var Ir=!0;ar.layer.setVisible(Ir);var Mr=1;ar.layer.setOpacity(Mr)}).then(function(){var Ir=ke.getView().getProjection().getCode();ke.getView()&&ar.styles.center&&ar.styles.center.length&&ke.getView().setCenter(transform$1(ar.styles.center,"EPSG:4326",Ir)),ke.getView()&&(ar.styles.zoom||ar.styles.zoom===0)&&ke.getView().setZoom(ar.styles.zoom);var Mr=ar.layer.getSource();if(ke.getView()&&ke.getSize()){var Rr=null;Mr&&Mr.getExtent?Rr=Mr.getExtent():Rr=Mr.getTileGrid().getExtent(),Rr&&Rr[0]!==1/0&&ke.getView().fit(Rr,ke.getSize())}}).then(function(){Cn._hideFormContainer(),Cn._importPanelHeader.classList.replace("GPelementVisible","GPelementHidden"),Cn._importPanelHeader.classList.replace("gpf-visible","gpf-hidden"),Cn._importPanelTitle.innerHTML="Edition des styles";var Ir=new Editor({target:Cn._mapBoxResultsListContainer,style:JSON.parse(JSON.stringify(ar.styles)),scope:this,events:{"editor:onloaded":Cn._onLoadedMapBox,"editor:layer:onclickvisibility":Cn._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":Cn._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":Cn._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":Cn._onChangeLegendValueSourceMapBox,"editor:legend:onclickedition":Cn._onDisplayLayerSourceMapBox},tools:Cn.options.vectorStyleOptions.MapBox.editor});return Ir.setContext("map",ke),Ir.setContext("layer",ar.layer),Ir.createElement().then(function(){if(Ir.getLayers().length===0)throw new Error("Il n'existe pas de styles pour la source demandée !?")}).then(function(){Cn.options.vectorStyleOptions.MapBox.display&&(Cn._importPanelHeader.classList.replace("GPelementHidden","GPelementVisible"),Cn._importPanelHeader.classList.replace("gpf-hidden","gpf-visible"),Cn._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),Cn._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),Cn._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),Cn._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"))}).then(function(){var Mr=Cn._mapBoxResultsListContainer.getElementsByClassName("GPEditorMapBoxLayerTitleLabel");for(let Rr=0;Rr<Mr.length;Rr++){const Nr=Mr[Rr];Nr.textContent==="bckgrd"&&(Nr.textContent="Couleur de remplissage")}}).then(function(){ar.layer.set("mapbox-editor",Ir.getID()),setTimeout(function(){ke.dispatchEvent({id:Ir.getID(),type:"editor:loaded",style:ar.styles,layer:ar.layer})},100)}).catch(function(Mr){throw Mr})}).then(function(){ke.dispatchEvent({id:ar.id,type:"render:success",style:ar.styles})}).catch(function(Ir){logger$a.error(Ir),ke.dispatchEvent({id:ar.id,type:"render:failure",error:Ir})})};logger$a.warn(ar.layer);var Dr=ke.get("mapbox-styles")||{},kr=ar.id;Dr[kr]=ar.styles,ke.set("mapbox-styles",Dr),ar.layer.set("mapbox-styles",ar.styles),ke.addLayer(ar.layer),Cn.dispatchEvent({type:"layerimport:mapbox:added",name:Te,data:e,layer:ar.layer,format:Cn._currentImportType.toLowerCase()||"mapbox"}),ar.layer.getSource()?nr():ar.layer.once("change:source",nr),ke.getControls().forEach(Ir=>{Ir instanceof LayerSwitcher&&Ir.addLayer(ar.layer,ar.options)})})(wr)}}else{this._currentImportType==="KML"?(We=this.options.vectorStyleOptions.KML.defaultStyle,He=new KML({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[We]})):this._currentImportType==="GPX"?(We=this.options.vectorStyleOptions.GPX.defaultStyle,He=new GPX({defaultStyle:We})):this._currentImportType==="GeoJSON"&&(We=this.options.vectorStyleOptions.GeoJSON.defaultStyle,He=new GeoJSON({defaultStyle:We}));var Li=He.readProjection(e),er=this._getMapProjectionCode(),hr=null;hr=He.readFeatures(e,{dataProjection:Li,featureProjection:er}),logger$a.log("loaded features : ",hr),Ue=new VectorSource({features:new Collection}),Ue.addFeatures(hr),logger$a.trace(Ue),Ue._title=Ue._description=Te,Be=new VectorLayer({source:Ue,style:We}),Be.gpResultLayerId="layerimport:"+this._currentImportType;var mr=He.readRootExtensions("geoportail:compute");if(mr&&Object.keys(mr).length!==0){var _r={route:{class:Route,name:"itineraire"},isocurve:{class:Isocurve,name:"isocurve"},elevationpath:{class:ElevationPath,name:"profil altimetrique"}},dr=mr.type,cr=mr.transport;if(dr){var gr=_r[dr].name,vr=cr?gr+" ("+cr+")":gr,Fr=_r[dr].class;if(Fr){Be.gpResultLayerId="layerimport:COMPUTE",Be.set("control",dr),Be.set("name",gr),Be.set("graph",cr),Be.set("data",mr),Be.set("title",vr);var zr=new GeoJSON({defaultStyle:We}),tr=zr.writeFeatures(hr,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});Be.set("geojson",tr),this.getMap().getControls().forEach(ar=>{ar instanceof Fr&&(ar.setData(mr),ar.setLayer(Be),ar.init())})}}}if(ke.addLayer(Be),ke.getView()&&ke.getSize()&&Ue.getExtent){var fr=Ue.getExtent();fr&&fr[0]!==1/0&&ke.getView().fit(fr,ke.getSize())}this.dispatchEvent({type:"layerimport:vector:added",name:Te,data:e,layer:Be,format:this._currentImportType.toLowerCase()})}}}_addFeaturesFromImportStaticLayerUrl(e,Te){var ke=this.getMap();if(!(!ke||!e)){var Be,Ue,He;if(this._currentImportType==="MAPBOX"?logger$a.trace("Not yet implemented !"):(this._currentImportType==="KML"?He=new KML({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):this._currentImportType==="GPX"?He=new GPX({defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle}):this._currentImportType==="GeoJSON"&&(He=new GeoJSON({defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle})),Be=new VectorSource({url:e,format:He}),this._currentImportType==="GPX"&&Be.forEachFeature(function(Cn){Cn.getStyle()==null&&(logger$a.log("[ol.control.LayerImport] set default style for GPX feature"),Cn.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),this._currentImportType==="GeoJSON"&&Be.forEachFeature(function(Cn){Cn.getStyle()==null&&(logger$a.log("[ol.control.LayerImport] set default style for GeoJSON feature"),Cn.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),Be._title=Be._description=Te,Ue=new VectorLayer({source:Be})),Ue.gpResultLayerId="layerimport:"+this._currentImportType,ke.addLayer(Ue),ke.getView()&&ke.getSize()&&Be.getExtent){var We=Be.getExtent();We&&We[0]!==1/0&&ke.getView().fit(We,ke.getSize())}this.dispatchEvent({type:"layerimport:vector:added",name:Te,url:e,layer:Ue,format:this._currentImportType.toLowerCase()})}}_onLoadedMapBox(e){}_onChangeVisibilitySourceMapBox(e){var Te=e.target.data.obj,ke=e.target.srcElement,Be=this.getContext("map"),Ue=this.getContext("layer");if(Ue.get("mapbox-source")===Te.source&&Ue.get("mapbox-editor")===e.target.editorID){for(var He=Ue.get("mapbox-styles"),We,Cn=He.layers,En=0;En<Cn.length;En++)if(Cn[En].id===Te.id){var An=Cn[En].layout;An?An.visibility=ke.checked?"visible":"none":Cn[En].layout={visibility:ke.checked?"visible":"none"},We=Cn[En];break}updateMapboxLayer(Be,We),Promise.resolve()}}_onChangeScaleMinSourceMapBox(e){var Te=e.target.data.obj,ke=e.target.srcElement,Be=this.getContext("map"),Ue=this.getContext("layer");if(Ue.get("mapbox-source")===Te.source&&Ue.get("mapbox-editor")===e.target.editorID){for(var He=Ue.get("mapbox-styles"),We,Cn=He.layers,En=0;En<Cn.length;En++)if(Cn[En].id===Te.id){Cn[En].minzoom=ke.value,ke.title=ke.value,We=Cn[En];break}updateMapboxLayer(Be,We),Promise.resolve()}}_onChangeScaleMaxSourceMapBox(e){var Te=e.target.data.obj,ke=e.target.srcElement,Be=this.getContext("map"),Ue=this.getContext("layer");if(Ue.get("mapbox-source")===Te.source&&Ue.get("mapbox-editor")===e.target.editorID){for(var He=Ue.get("mapbox-styles"),We,Cn=He.layers,En=0;En<Cn.length;En++)if(Cn[En].id===Te.id){Cn[En].maxzoom=ke.value,ke.title=ke.value,We=Cn[En];break}updateMapboxLayer(Be,We),Promise.resolve()}}_onChangeLegendValueSourceMapBox(e){var Te=e.target.data.obj,ke=e.target.srcElement,Be=this.getContext("map"),Ue=this.getContext("layer");if(Ue.get("mapbox-source")===Te.source&&Ue.get("mapbox-editor")===e.target.editorID){for(var He=Ue.get("mapbox-styles"),We,Cn=He.layers,En=0;En<Cn.length;En++)if(Cn[En].id===Te.id){var An=Cn[En].paint;An&&(An[ke.dataset.id]=ke.value),We=Cn[En];break}updateMapboxLayer(Be,We),Promise.resolve()}}_onDisplayLayerSourceMapBox(e){var Te=e.target.data.obj,ke=this.getContext("layer");if(ke.get("mapbox-source")===Te.source&&ke.get("mapbox-editor")===e.target.editorID){var Be=e.target.currentTarget.parentNode.id,Ue=Be.substring(Be.indexOf("-")+1,Be.indexOf("_")),He=this.getLayer(Ue);He.collapse()}}_importServiceLayers(){if(this._currentImportType==="WFS"){logger$a.warn("[ol.control.LayerImport] WFS layer import is not implemented yet");return}this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!e){logger$a.error("[ol.control.LayerImport] url parameter is mandatory");return}logger$a.log("url : ",e),e.trim&&(e=e.trim());var Te=e.indexOf("?");Te<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":Te===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(e=ProxyUtils.proxifyUrl(e,this.options.webServicesOptions)),this._displayWaitingContainer();var ke=this;Gp.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(Be){ke._hideWaitingContainer(),ke._displayGetCapResponseLayers(Be)},onFailure:function(Be){ke._hideWaitingContainer(),logger$a.error("[ol.control.LayerImport] getCapabilities request failed : ",Be)}})}_displayGetCapResponseLayers(e){var Te,ke,Be={content:null,title:null},Ue;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._hideFormContainer(),this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Couches accessibles",this._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),this._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"),this._hasGetCapResults=!0,this._currentImportType==="WMS"){Te=new WMSCapabilities;var He=this._getCapResponseWMS=Te.read(e);if(logger$a.log("getCapabilities response : ",He),He&&He.Capability&&He.Capability.Layer){var We=He.Capability.Layer;if(Array.isArray(We))for(var Cn=0;Cn<We.length;Cn++)this._displayGetCapResponseWMSLayer(We[Cn]);else this._displayGetCapResponseWMSLayer(We)}}else if(this._currentImportType==="WMTS"){Te=new WMTSCapabilities;var En=this._getCapResponseWMTS=Te.read(e);if(logger$a.log("getCapabilities response : ",En),En&&En.Contents&&En.Contents.Layer&&(ke=En.Contents.Layer,Array.isArray(ke))){this._getCapResponseWMTSLayers=ke;for(var An=0;An<ke.length;An++)if(Ue=this._getWMTSLayerProjection(ke[An],En),Ue&&typeof Ue=="string")if(get$3(Ue)||get$3(Ue.toUpperCase()))Be={content:ke[An].Title,title:ke[An].Abstract||ke[An].Title},this._getCapResultsListContainer&&this._addImportGetCapResultLayer(Be,An,this._getCapResultsListContainer);else{logger$a.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",ke[An]);continue}}}}_displayGetCapResponseWMSLayer(e,Te){if(!e){logger$a.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");return}logger$a.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var ke=this._getMapProjectionCode(),Be,Ue={content:null,title:null};if(Te){var He,We,Cn=["CRS","Style"];for(We=0;We<Cn.length;We++)if(He=Cn[We],Array.isArray(Te[He])&&Te[He].length!==0)if(Array.isArray(e[He])&&e[He].length!==0)for(var En=0;En<Te[He].length;En++)e[He].indexOf(Te[He][En])===-1&&e[He].push(Te[He][En]);else e[He]=Te[He];var An=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(We=0;We<An.length;We++)He=An[We],Te[He]&&!e[He]&&(e[He]=Te[He])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){var Sn=e?e._container:Te._container,Tn=e?e.Title:Te.Title;e._container=this._addImportGetCapResultListRubrique(Tn,Sn).lastChild;for(var Ln=0;Ln<e.Layer.length;Ln++){for(var Bn=!1,ei=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),ti=0;ti<ei.length;ti++)ei[ti].title===e.Title&&(Bn=!0,e.Layer[Ln]._container=ei[ti].parentElement);Bn||(e.Layer[Ln]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[Ln],e)}}}else{var ni=this._getCapResponseWMSLayers.length;if(Be=this._getWMSLayerProjection(e,ke),!Be)logger$a.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e);else{e._projection=Be,Ue={content:e.Title,title:e.Abstract||e.Title};var ri=e._container;ri.localName==="ul"&&(ri=ri.lastChild),this._addImportGetCapResultLayer(Ue,ni,ri),this._getCapResponseWMSLayers[ni]=e}}}_onGetCapResponseLayerClick(e){if(e.target&&e.target.id){var Te=parseInt(e.target.id.substr(23),10);if(isNaN(Te))return;var ke;this._currentImportType==="WMS"?(ke=this._getCapResponseWMSLayers[Te],this._addGetCapWMSLayer(ke)):this._currentImportType==="WMTS"&&(ke=this._getCapResponseWMTSLayers[Te],this._addGetCapWMTSLayer(ke))}}_addGetCapWMSLayer(e){var Te=this.getMap();if(!Te){logger$a.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");return}if(!e){logger$a.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");return}var ke=this._getMapProjectionCode(),Be={},Ue=this._getWMSLayerGetMapUrl();if(Ue)Be.url=Ue;else{var He=this._getCapRequestUrl.indexOf("?");He!==-1?Be.url=this._getCapRequestUrl.substring(0,He):Be.url=this._getCapRequestUrl}if(e.Url=Ue||Be.url,Be.params={},e.Name)Be.params.LAYERS=e.Name;else{logger$a.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e);return}Be.params.SERVICE="WMS",this._getCapResponseWMS.version&&(Be.params.VERSION=this._getCapResponseWMS.version),e.Version=this._getCapResponseWMS.version;var We=e._projection;if(We)We!==ke&&(Be.projection=We);else{logger$a.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");return}e.Projection=We||Be.projection;var Cn;if(e.Style&&Array.isArray(e.Style)){var En=e.Style[0];Be.params.STYLES=En.Name,En.LegendURL&&Array.isArray(En.LegendURL)&&En.LegendURL.length!==0&&(Cn=En.LegendURL[0].OnlineResource)}var An=new TileWMS(Be);this._getWMSLayerInfoForLayerSwitcher(e,Cn,An);var Sn={};Sn.source=An,this._getWMSLayerMinMaxResolution(e,ke,Sn),this._getWMSLayerExtent(e,ke,Sn);var Tn=new TileLayer(Sn);if(Tn.setExtent(Sn.extent),Tn.gpResultLayerId="layerimport:WMS",e.queryable&&(Tn.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(Tn.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),Te.addLayer(Tn),Te.getView()&&Te.getSize()&&Tn.getExtent){var Ln=Tn.getExtent();Ln&&Ln[0]!==1/0&&Te.getView().fit(Ln,Te.getSize())}this.dispatchEvent({type:"layerimport:service:added",name:e.Name,data:e,layer:Tn,format:"wms"})}_getWMSLayerGetMapUrl(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var Te=this._getCapResponseWMS.Capability.Request.GetMap;if(Te.DCPType&&Array.isArray(Te.DCPType)&&Te.DCPType.length!==0){var ke=Te.DCPType[0];ke&&ke.HTTP&&ke.HTTP.Get&&(e=ke.HTTP.Get.OnlineResource)}}return e}_getWMSLayerProjection(e,Te){var ke;if(!e||typeof e!="object"){logger$a.warn("missing layer information (from getCapabilities)");return}var Be=e.CRS;if(Array.isArray(Be)){if(Be.includes(Te))return ke=Te,ke;var Ue,He;for(He=0;He<Be.length;He++)if(Ue=Be[He],Ue&&typeof Ue=="string"&&(get$3(Ue)||get$3(Ue.toUpperCase())))return ke=Ue,ke}return ke}_getWMSLayerMinMaxResolution(e,Te,ke){var Be=get$3(Te).getUnits();if(Be==="m")e.MinScaleDenominator&&(ke.minResolution=e.MinScaleDenominator*28e-5),e.MaxScaleDenominator&&(ke.maxResolution=e.MaxScaleDenominator*28e-5);else if(Be==="degrees"){var Ue=.05039999999999999/(Math.PI*6378137);e.MinScaleDenominator&&(ke.minResolution=e.MinScaleDenominator*Ue),e.MaxScaleDenominator&&(ke.maxResolution=e.MaxScaleDenominator*Ue)}}_getWMSLayerExtent(e,Te,ke){if(!e){logger$a.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");return}var Be=e.EX_GeographicBoundingBox,Ue=e.BoundingBox;if(Be&&Array.isArray(Be))Te==="EPSG:4326"?ke.extent=Be:ke.extent=transformExtent(Be,"EPSG:4326",Te);else if(Ue&&Array.isArray(Ue)){for(var He,We,Cn=0;Cn<Ue.length;Cn++)if(He=Ue[Cn].crs,We=Ue[Cn].extent,He){if(He===Te){ke.extent=We;break}else if(typeof He=="string"){var En=get$3(He)?get$3(He):get$3(He.toUpperCase());if(En){if(En.getUnits()==="degrees"&&He.toUpperCase().indexOf("EPSG")===0){var An=[We[1],We[0],We[3],We[2]];ke.extent=transformExtent(An,En,Te)}else ke.extent=transformExtent(We,En,Te);break}}}}}_getWMSLayerInfoForLayerSwitcher(e,Te,ke){if(e.Title?(ke._title=e.Title,ke._description=e.Abstract?e.Abstract:e.Title):(ke._title=e.Name,ke._description=e.Abstract?e.Abstract:e.Name),Te&&(ke._legends=[{url:Te}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){ke._metadata=[];for(var Be=0;Be<e.MetadataURL.length;Be++){var Ue=e.MetadataURL[Be].OnlineResource;Ue&&ke._metadata.push({url:Ue})}}if(e.Attribution){var He=e.Attribution;ke._originators={},He.OnlineResource&&(ke._originators.url=He.OnlineResource),He.Title&&(ke._originators.name=ke._originators.attribution=He.Title),He.LogoURL&&He.LogoURL.OnlineResource&&(ke._originators.logo=He.LogoURL.OnlineResource)}}_addGetCapWMTSLayer(e){if(!e||!e.Identifier){logger$a.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");return}var Te=this.getMap();if(Te){var ke={};ke.layer=e.Identifier,this._getCapResponseWMTS.version&&(ke.version=this._getCapResponseWMTS.version),e.Version=ke.version;var Be=this._getWMTSLayerGetTileUrl();if(Be)ke.url=Be;else{var Ue=this._getCapRequestUrl.indexOf("?");Ue!==-1?ke.url=this._getCapRequestUrl.substring(0,Ue):ke.url=this._getCapRequestUrl}e.Url=Be||ke.url;var He=this._getTMSParams(e);ke.matrixSet=He.tms,ke.projection=He.projCode,ke.tileGrid=new WMTSTileGrid({resolutions:He.resolutions,matrixIds:He.matrixIds,origin:He.origin}),e.MatrixIds=He.matrixIds,e.Projection=ke.projection,e.Resolutions=He.resolutions,e.Origin=He.origin;var We,Cn;if(e.Style&&Array.isArray(e.Style))for(var En,An=0;An<e.Style.length&&(En=e.Style[An],We=En.Identifier,!En.isDefault);An++)En.LegendURL&&Array.isArray(En.LegendURL)&&En.LegendURL.length!==0&&(Cn=En.LegendURL[0].href);We==null&&logger$a.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),ke.style=We;var Sn;e.Format&&Array.isArray(e.Format)&&(Sn=e.Format[0]),Sn==null&&logger$a.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),ke.format=Sn;var Tn=new WMTS$1(ke);e.Title?(Tn._title=e.Title,Tn._description=e.Abstract?e.Abstract:e.Title):(Tn._title=e.Identifier,Tn._description=e.Abstract?e.Abstract:e.Identifier),Cn&&(Tn._legends=[{url:Cn}]);var Ln={};Ln.source=Tn,Ln.extent=this._getWMTSLayerExtent(e);var Bn;try{Bn=new TileLayer(Ln),Bn.setExtent(Ln.extent)}catch(ti){logger$a.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",ti);return}if(Bn.gpResultLayerId="layerimport:WMTS",Te.addLayer(Bn),Te.getView()&&Te.getSize()&&Bn.getExtent){var ei=Bn.getExtent();ei&&ei[0]!==1/0&&Te.getView().fit(ei,Te.getSize())}this.dispatchEvent({type:"layerimport:service:added",name:e.Identifier,data:e,layer:Bn,format:"wmts"})}}_getWMTSLayerGetTileUrl(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var Te=this._getCapResponseWMTS.OperationsMetadata.GetTile;Te.DCP&&Te.DCP.HTTP&&Te.DCP.HTTP.Get&&Array.isArray(Te.DCP.HTTP.Get)&&Te.DCP.HTTP.Get.length!==0&&(e=Te.DCP.HTTP.Get[0].href)}return e}_getWMTSLayerProjection(e,Te){var ke;if(!e||typeof e!="object"){logger$a.warn("missing layer information (from getCapabilities)");return}if(!Te||typeof Te!="object"){logger$a.warn("missing getCapabilities response");return}if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var Be=e.TileMatrixSetLink[0].TileMatrixSet,Ue;if(Te.Contents&&Array.isArray(Te.Contents.TileMatrixSet)){for(var He=Te.Contents.TileMatrixSet,We=0;We<He.length;We++)if(He[We].Identifier===Be&&He[We].TileMatrix){var Cn=He[We];Ue=Cn.SupportedCRS,Ue&&typeof Ue=="string"&&(get$3(Ue)||get$3(Ue.toUpperCase()))&&(ke=Ue);break}}}return ke}_getTMSParams(e){var Te={},ke=[],Be=[],Ue=[],He,We,Cn,En=this.getMap();if(En){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink))if(He=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var An=this._getCapResponseWMTS.Contents.TileMatrixSet,Sn=0;Sn<An.length;Sn++)if(An[Sn].Identifier===He&&An[Sn].TileMatrix){var Tn=An[Sn],Ln,Bn,ei,ti,ni;if(Tn.SupportedCRS&&(We=Tn.SupportedCRS,Cn=get$3(We)),Cn&&Cn.getUnits&&(ni=Cn.getUnits()),Array.isArray(Tn.TileMatrix))for(var ri=0;ri<Tn.TileMatrix.length;ri++)Ln=Tn.TileMatrix[ri],Ln.Identifier!=null&&(Bn=parseInt(Ln.Identifier,10),ke.push(Bn)),ei=Ln.ScaleDenominator,ni==="degrees"?ti=ei*28e-5*180/(Math.PI*6378137):ti=ei*28e-5,Be.push(ti),Ue=Ln.TopLeftCorner;Be.sort!==void 0&&Be.sort(function(si,ai){return ai-si}),ke.sort!==void 0&&ke.sort(function(si,ai){return si-ai})}}else logger$a.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);else return;return Te.tms=He,Te.projCode=We,Te.matrixIds=ke,Te.resolutions=Be,Te.origin=Ue,Te}}_getWMTSLayerExtent(e){var Te,ke=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(Te=transformExtent(e.WGS84BoundingBox,"EPSG:4326",ke)),Te}_getMapProjectionCode(){var e=this.getMap();if(!e||!e.getView||!e.getView().getProjection){logger$a.warn("unable to get layerimport's map");return}var Te=e.getView().getProjection().getCode();return Te}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}_displayFormContainer(){this._formContainer.classList.replace("GPelementHidden","GPelementVisible"),this._formContainer.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Import de données"}_hideFormContainer(){this._formContainer.classList.replace("GPelementVisible","GPelementHidden"),this._formContainer.classList.replace("gpf-visible","gpf-hidden")}cleanGetCapResultsList(){if(this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)}cleanMapBoxResultsList(){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)}cleanMapBoxResults(e){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer){var Te=this._mapBoxResultsListContainer.childNodes;for(let ke=0;ke<Te.length;ke++){const Be=Te[ke];Be.id==="GPEditorMapBoxContainer_ID_"+e&&Be.remove()}}}},Mc(wo,"DefaultStyles",{image:new Icon({src:Marker.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new Text({font:"16px Sans",textAlign:"left",fill:new Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new Stroke({color:"rgba(0, 0, 0, 1)",width:2})})}),wo);Object.assign(LayerImport.prototype,LayerImportDOM);Object.assign(LayerImport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerImport=LayerImport);var logger$9=LoggerByDefault.getLogger("geoportalattribution"),GeoportalAttribution=class lf extends Attribution{constructor(e){if(e=e||{},e.collapsible=!0,e.collapsed=!0,super(e),!(this instanceof lf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this}setMap(e){if(e!=null){var Te=e.getControls();Te.forEach(ke=>{if(!(ke instanceof lf)&&ke){for(var Be=ke.element.classList,Ue=0;Ue<Be.length;Ue++)if(Be[Ue]==="ol-attribution"){Te.remove(ke);break}}}),this._updateAttributions(e),e.on("moveend",()=>{this._updateAttributions(e)}),e.getLayers().on("add",()=>{this._updateAttributions(e)}),e.getLayers().on("remove",()=>{this._updateAttributions(e)})}super.setMap(e)}_updateAttributions(e){for(var Te={},ke=e.getView(),Be=ke.calculateExtent(e.getSize()),Ue=ke.getProjection().getCode(),He=transformExtent(Be,Ue,"EPSG:4326"),We=[He[3],He[0],He[1],He[2]],Cn=ke.getZoom(),En=e.getLayers().getArray(),An=0;An<En.length;An++)if(En[An].getSource)this._updateLayerAttributions(En[An],Te,We,Ue,Cn);else if(En[An].getLayers){var Sn=En[An].getLayers();Sn.forEach(Tn=>{Tn.getSource?this._updateLayerAttributions(Tn,Te,We,Ue,Cn):logger$9.log("cannot find layer source in layergroup ",En[An])})}}_updateLayerAttributions(e,Te,ke,Be,Ue){if(!e){logger$9.trace("layer is null !?");return}var He=e.getSource();if(!He){logger$9.trace("source is not yet loaded !");return}Te||(Te={});var We=[],Cn=e.getVisible(),En=He._originators;if(typeof En<"u"&&He.setAttributions(),En&&Cn){for(var An=LayerUtils.getAttributions({extent:ke,crs:Be,zoom:Ue,visibility:Cn,originators:En}),Sn=0;Sn<An.length;Sn++){var Tn=An[Sn];Te.hasOwnProperty(Tn)||(We.push(Tn),Te[Tn]=!0)}We.length!==0&&(He.setAttributions(We),this.dispatchEvent({type:"attributions:update",attributions:We}))}}};window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=GeoportalAttribution);var MeasureLengthDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPmeasureLength"),Oe.className="GPwidget gpf-widget gpf-widget-button",Oe},_createShowMeasureLengthPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowMeasureLengthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-length fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une distance"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowMeasureLengthClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowMeasureLengthClick(ke)}),e}},logger$8=LoggerByDefault.getLogger("measurelength"),MeasureLength=class tp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof tp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureLength",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$8.trace("setMap()");var Te=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[Te].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(ke.gpShareMeasures||(ke.gpShareMeasures={}),ke.gpShareMeasures[Te]=this.tools[Te]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$8.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.unit=typeof e.unit<"u"?e.unit:null,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$8.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),Te=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(Te),e}addMeasureEvents(){logger$8.trace("call MeasureLength::addMeasureEvents()");var e=this.getMap();e.on("singleclick",Te=>this.onPointerMoveHandler(Te)),e.on("pointermove",Te=>this.onPointerMoveHandler(Te)),this.eventLayerRemove=e.getLayers().on("remove",Te=>{Te.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$8.trace("call MeasureLength::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",Te=>this.onPointerMoveHandle(Te)),e.un("pointermove",Te=>this.onPointerMoveHandler(Te)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$8.trace("call MeasureLength::format()");var Te=this.getMap(),ke;if(this.options.geodesic){var Be=e.getCoordinates();ke=0;for(var Ue=Te.getView().getProjection(),He=0,We=Be.length-1;He<We;++He){var Cn=transform$1(Be[He],Ue,"EPSG:4326"),En=transform$1(Be[He+1],Ue,"EPSG:4326");ke+=getDistance(Cn,En)}}else ke=Math.round(e.getLength()*100)/100;var An;return this.options.unit==="km"?An=Math.round(ke/1e3*100)/100+" km":this.options.unit==="m"?An=Math.round(ke*100)/100+" m":ke>1e3?An=Math.round(ke/1e3*100)/100+" km":An=Math.round(ke*100)/100+" m",An}onShowMeasureLengthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$8.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")}};Object.assign(MeasureLength.prototype,Measures);Object.assign(MeasureLength.prototype,MeasureLengthDOM);Object.assign(MeasureLength.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureLength=MeasureLength);var MeasureAreaDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPmeasureArea"),Oe.className="GPwidget gpf-widget gpf-widget-button",Oe},_createShowMeasureAreaPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowMeasureAreaPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-area fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une surface"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowMeasureAreaClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowMeasureAreaClick(ke)}),e}},logger$7=LoggerByDefault.getLogger("measurearea"),MeasureArea=class np extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof np))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureArea",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$7.trace("setMap()");var Te=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[Te].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(ke.gpShareMeasures||(ke.gpShareMeasures={}),ke.gpShareMeasures[Te]=this.tools[Te]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$7.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$7.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),Te=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(Te),e}addMeasureEvents(){logger$7.trace("call MeasureArea::addMeasureEvents()");var e=this.getMap();e.on("singleclick",Te=>this.onPointerMoveHandler(Te)),e.on("pointermove",Te=>this.onPointerMoveHandler(Te)),this.eventLayerRemove=e.getLayers().on("remove",Te=>{Te.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$7.trace("call MeasureArea::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",Te=>this.onPointerMoveHandler(Te)),e.un("pointermove",Te=>this.onPointerMoveHandler(Te)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$7.trace("call MeasureArea::format()");var Te;if(this.options.geodesic){var ke=e.clone(),Be=ke.getLinearRing(0).getCoordinates();Te=Math.abs(getArea(new Polygon([Be])))}else Te=e.getArea();var Ue;return Te>1e6?Ue=Math.round(Te/1e6*100)/100+" km<sup>2</sup>":Te>1e5?Ue=Math.round(Te/1e6*1e3)/1e3+" km<sup>2</sup>":Te>1e3?Ue=Math.round(Te/10)*10+" m<sup>2</sup>":Ue=Math.round(Te*100)/100+" m<sup>2</sup>",Ue}onShowMeasureAreaClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$7.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")}};Object.assign(MeasureArea.prototype,Measures);Object.assign(MeasureArea.prototype,MeasureAreaDOM);Object.assign(MeasureArea.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureArea=MeasureArea);var MeasureAzimuthDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPmeasureAzimuth"),Oe.className="GPwidget gpf-widget gpf-widget-button",Oe},_createShowMeasureAzimuthPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowMeasureAzimuthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-azimuth fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer un azimut"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowMeasureAzimuthClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowMeasureAzimuthClick(ke)}),e}},logger$6=LoggerByDefault.getLogger("measureazimut"),MeasureAzimuth=class ip extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ip))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureAzimuth",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$6.trace("setMap()");var Te=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[Te].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(ke.gpShareMeasures||(ke.gpShareMeasures={}),ke.gpShareMeasures[Te]=this.tools[Te]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setGeodesic(e){this.options.geodesic=typeof e<"u"?e:!1}isGeodesic(){return this.options.geodesic}getContainer(){return this._container}_initialize(e){logger$6.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!1,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$6.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),Te=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(Te),e}addMeasureEvents(){logger$6.trace("call MeasureAzimuth::addMeasureEvents()");var e=this.getMap();e.on("singleclick",Te=>this.onPointerMoveAzimutHandler(Te)),e.on("pointermove",Te=>this.onPointerMoveAzimutHandler(Te)),this.eventLayerRemove=e.getLayers().on("remove",Te=>{Te.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$6.trace("call MeasureAzimuth::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",Te=>this.onPointerMoveAzimutHandler(Te)),e.un("pointermove",Te=>this.onPointerMoveAzimutHandler(Te)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$6.trace("call MeasureAzimuth::format()");var Te=this.getMap(),ke=Te.getView().getProjection(),Be=transform$1(e.getFirstCoordinate(),ke,"EPSG:4326"),Ue=transform$1(e.getLastCoordinate(),ke,"EPSG:4326");if(!this.options.geodesic){var He=getDistance(Be,Ue);if(logger$6.trace("measure between 2 points with geodesic method",He),He>500){var We=500/He;logger$6.trace("%",We),Ue=transform$1(e.getCoordinateAt(We),ke,"EPSG:4326")}}var Cn=Math.PI/180,En=180/Math.PI,An=Cn*Be[0],Sn=Cn*Ue[0],Tn=Cn*Be[1],Ln=Cn*Ue[1],Bn=Math.sin(Sn-An)*Math.cos(Ln),ei=Math.cos(Tn)*Math.sin(Ln)-Math.sin(Tn)*Math.cos(Ln)*Math.cos(Sn-An),ti=Math.atan2(Bn,ei),ni=En*ti;logger$6.trace("azimut",ni),ni<0&&(ni+=360);var ri=Math.round(ni*100)/100+" °";return ri}onShowMeasureAzimuthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$6.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")}onPointerMoveAzimutHandler(e){if(this.onPointerMoveHandler(e),this.sketch){var Te=this.sketch.getGeometry();Te.getCoordinates().length>2&&this.measureDraw.finishDrawing()}}};Object.assign(MeasureAzimuth.prototype,Measures);Object.assign(MeasureAzimuth.prototype,MeasureAzimuthDOM);Object.assign(MeasureAzimuth.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=MeasureAzimuth);LoggerByDefault.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var Te="ol-custom-zoom";e.className=Te,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var Te="position-container-"+this.options.position;if(!document.getElementById(Te)){var ke=document.createElement("div");ke.id=Te,ke.classList.add("position"),ke.classList.add(Te),this.container.appendChild(ke)}this.options.target=this.container.children[Te]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,Te=this.element.childNodes;for(let Be=0;Be<Te.length;Be++){const Ue=Te[Be];if(Ue.classList.contains(this.options.className+"-in")){Ue.classList.add("GPzoomIn","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-in","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Ue.id="GPzoomIn",Ue.innerHTML="",Ue.removeAttribute("title"),Ue.setAttribute("aria-label","Zoomer");var ke=document.createElement("span");Ue.appendChild(ke),Ue.addEventListener?Ue.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):Ue.attachEvent&&Ue.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})}if(Ue.classList.contains(this.options.className+"-out")){Ue.classList.add("GPzoomOut","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-out","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Ue.id="GPzoomOut",Ue.innerHTML="",Ue.removeAttribute("title"),Ue.setAttribute("aria-label","Dézoomer");var ke=document.createElement("span");Ue.appendChild(ke),Ue.addEventListener?Ue.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):Ue.attachEvent&&Ue.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")})}}this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var Te=e.getControls();Te.forEach(ke=>{ke.element.classList.contains("ol-zoom")&&(ke.element.classList.add("ol-hidden"),ke.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const events=["fullscreenchange","webkitfullscreenchange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const Te=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof Te=="string"?document.createTextNode(Te):Te;const ke=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof ke=="string"?document.createTextNode(ke):ke;const Be=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=Be,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const Te=e.getOwnerDocument();if(isFullScreenSupported(Te))if(isFullScreen(Te))exitFullScreen(Te);else{let ke;this.source_?ke=typeof this.source_=="string"?Te.getElementById(this.source_):this.source_:ke=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(ke):requestFullScreen(ke)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const Te=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),Te!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,Te){Te?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const Te=this.getMap();Te&&Te.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let ke=0,Be=e.length;ke<Be;++ke)unlistenByKey(e[ke]);e.length=0;const Te=this.getMap();if(Te){const ke=Te.getOwnerDocument();isFullScreenSupported(ke)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let Be=0,Ue=events.length;Be<Ue;++Be)e.push(listen(ke,events[Be],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(Oe){const e=Oe.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&Oe.fullscreenEnabled)}function isFullScreen(Oe){return!!(Oe.webkitIsFullScreen||Oe.fullscreenElement)}function requestFullScreen(Oe){Oe.requestFullscreen?Oe.requestFullscreen():Oe.webkitRequestFullscreen&&Oe.webkitRequestFullscreen()}function requestFullScreenWithKeys(Oe){Oe.webkitRequestFullscreen?Oe.webkitRequestFullscreen():requestFullScreen(Oe)}function exitFullScreen(Oe){Oe.exitFullscreen?Oe.exitFullscreen():Oe.webkitExitFullscreen&&Oe.webkitExitFullscreen()}LoggerByDefault.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var Te="ol-custom-full-screen";e.className=e.className||Te,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||Te+"-true",e.inactiveClassName=e.inactiveClassName||Te+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein écran",super(e),this.CLASSNAME="FullScreen",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var Te="position-container-"+this.options.position;if(!document.getElementById(Te)){var ke=document.createElement("div");ke.id=Te,ke.classList.add("position"),ke.classList.add(Te),this.container.appendChild(ke)}this.options.target=this.container.children[Te]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0],Te=document.createElement("span");e.appendChild(Te),e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn","fr-btn--tertiary","gpf-btn--tertiary","gpf-btn","gpf-btn-icon"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.removeAttribute("title"),e.setAttribute("aria-label",this.options.tipLabel),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be)}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var Te=e.getControls();Te.forEach(ke=>{ke.element.classList.contains("ol-full-screen")&&(ke.element.classList.add("ol-hidden"),ke.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);const MAX_RATIO=.75,MIN_RATIO=.1;class OverviewMap extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const Te=e.className!==void 0?e.className:"ol-overviewmap",ke=e.tipLabel!==void 0?e.tipLabel:"Overview map",Be=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof Be=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Be):this.collapseLabel_=Be;const Ue=e.label!==void 0?e.label:"›";typeof Ue=="string"?(this.label_=document.createElement("span"),this.label_.textContent=Ue):this.label_=Ue;const He=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,We=document.createElement("button");We.setAttribute("type","button"),We.title=ke,We.appendChild(He),We.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const Cn=new Map$1({view:e.view,controls:new Collection,interactions:new Collection});this.ovmap_=Cn,e.layers&&e.layers.forEach(function(ni){Cn.addLayer(ni)});const En=document.createElement("div");En.className="ol-overviewmap-box",En.style.boxSizing="border-box",this.boxOverlay_=new Overlay({position:[0,0],positioning:"center-center",element:En}),this.ovmap_.addOverlay(this.boxOverlay_);const An=Te+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),Sn=this.element;Sn.className=An,Sn.appendChild(this.ovmapDiv_),Sn.appendChild(We);const Tn=this.boxOverlay_,Ln=this.boxOverlay_.getElement(),Bn=ni=>({clientX:ni.clientX,clientY:ni.clientY}),ei=function(ni){const ri=Bn(ni),si=Cn.getEventCoordinate(ri);Tn.setPosition(si)},ti=ni=>{const ri=Cn.getEventCoordinateInternal(ni),si=this.getMap();si.getView().setCenterInternal(ri);const ai=si.getOwnerDocument();ai.removeEventListener("pointermove",ei),ai.removeEventListener("pointerup",ti)};this.ovmapDiv_.addEventListener("pointerdown",ni=>{const ri=this.getMap().getOwnerDocument();ni.target===Ln&&ri.addEventListener("pointermove",ei),ri.addEventListener("pointerup",ti)})}setMap(e){const Te=this.getMap();if(e!==Te){if(Te){const ke=Te.getView();ke&&this.unbindView_(ke),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(listen(e,ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const ke=e.getView();ke&&this.bindView_(ke),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===MapProperty.VIEW){const Te=e.oldValue;Te&&this.unbindView_(Te);const ke=this.getMap().getView();this.bindView_(ke)}else!this.ovmap_.isRendered()&&(e.key===MapProperty.TARGET||e.key===MapProperty.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const Te=new View({projection:e.getProjection()});this.ovmap_.setView(Te)}e.addChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(e){e.removeChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),Te=this.ovmap_;if(!e.isRendered()||!Te.isRendered())return;const ke=e.getSize(),Ue=e.getView().calculateExtentInternal(ke);if(this.viewExtent_&&equals$1(Ue,this.viewExtent_))return;this.viewExtent_=Ue;const He=Te.getSize(),Cn=Te.getView().calculateExtentInternal(He),En=Te.getPixelFromCoordinateInternal(getTopLeft(Ue)),An=Te.getPixelFromCoordinateInternal(getBottomRight(Ue)),Sn=Math.abs(En[0]-An[0]),Tn=Math.abs(En[1]-An[1]),Ln=He[0],Bn=He[1];Sn<Ln*MIN_RATIO||Tn<Bn*MIN_RATIO||Sn>Ln*MAX_RATIO||Tn>Bn*MAX_RATIO?this.resetExtent_():containsExtent(Cn,Ue)||this.recenter_()}resetExtent_(){const e=this.getMap(),Te=this.ovmap_,ke=e.getSize(),Ue=e.getView().calculateExtentInternal(ke),He=Te.getView(),We=Math.log(MAX_RATIO/MIN_RATIO)/Math.LN2,Cn=1/(Math.pow(2,We/2)*MIN_RATIO);scaleFromCenter(Ue,Cn),He.fitInternal(fromExtent(Ue))}recenter_(){const e=this.getMap(),Te=this.ovmap_,ke=e.getView();Te.getView().setCenterInternal(ke.getCenterInternal())}updateBox_(){const e=this.getMap(),Te=this.ovmap_;if(!e.isRendered()||!Te.isRendered())return;const ke=e.getSize(),Be=e.getView(),Ue=Te.getView(),He=this.rotateWithView_?0:-Be.getRotation(),We=this.boxOverlay_,Cn=this.boxOverlay_.getElement(),En=Be.getCenter(),An=Be.getResolution(),Sn=Ue.getResolution(),Tn=ke[0]*An/Sn,Ln=ke[1]*An/Sn;if(We.setPosition(En),Cn){Cn.style.width=Tn+"px",Cn.style.height=Ln+"px";const Bn="rotate("+He+"rad)";Cn.style.transform=Bn}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=listenOnce(this.ovmap_,MapEventType.POSTRENDER,e=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}LoggerByDefault.getLogger("overviewMap");var GeoportalOverviewMap=class extends OverviewMap{constructor(e){e=e||{};const Te={name:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",globalConstraint:{maxScaleDenominator:27954113201435894e-8,minScaleDenominator:2.1839150938621787e6,bbox:{left:-179.5,right:179.5,top:75,bottom:-75}},params:{url:"https://data.geopf.fr/wmts",styles:"normal",version:"1.0.0",format:"image/jpeg",projection:"EPSG:3857",minScale:2.1839150938621787e6,maxScale:27954113201435894e-8,extent:{left:-179.5,right:179.5,top:75,bottom:-75},legends:[{format:"image/jpeg",url:"https://data.geopf.fr/annexes/ressources/legendes/LEGEND.jpg",minScaleDenominator:"200"}],title:"Carte Mondiale pour la mini-vue",description:"Carte Mondiale pour la mini-vue",tileMatrixSetLimits:{1:{minTileRow:"0",maxTileRow:"1",minTileCol:"0",maxTileCol:"1"},2:{minTileRow:"0",maxTileRow:"3",minTileCol:"0",maxTileCol:"3"},3:{minTileRow:"1",maxTileRow:"6",minTileCol:"0",maxTileCol:"7"},4:{minTileRow:"2",maxTileRow:"13",minTileCol:"0",maxTileCol:"15"},5:{minTileRow:"5",maxTileRow:"26",minTileCol:"0",maxTileCol:"31"},6:{minTileRow:"11",maxTileRow:"52",minTileCol:"0",maxTileCol:"63"},7:{minTileRow:"22",maxTileRow:"105",minTileCol:"0",maxTileCol:"127"},8:{minTileRow:"45",maxTileRow:"210",minTileCol:"0",maxTileCol:"255"}},TMSLink:"PM_1_8",matrixIds:["1","2","3","4","5","6","7","8"],tileMatrices:{1:{matrixId:"1",matrixHeight:2,matrixWidth:2,scaleDenominator:27954113201435894e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},2:{matrixId:"2",matrixHeight:4,matrixWidth:4,scaleDenominator:1397705660071793e-7,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},3:{matrixId:"3",matrixHeight:8,matrixWidth:8,scaleDenominator:6988528300358965e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},4:{matrixId:"4",matrixHeight:16,matrixWidth:16,scaleDenominator:3494264150179486e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},5:{matrixId:"5",matrixHeight:32,matrixWidth:32,scaleDenominator:1747132075089743e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},6:{matrixId:"6",matrixHeight:64,matrixWidth:64,scaleDenominator:8735660375448715e-9,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},7:{matrixId:"7",matrixHeight:128,matrixWidth:128,scaleDenominator:4.3678301877243575e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},8:{matrixId:"8",matrixHeight:256,matrixWidth:256,scaleDenominator:2.1839150938621787e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}}},nativeResolutions:["78271.51696402048","39135.75848201023","19567.87924100512","9783.939620502561","4891.969810251280","2445.984905125640","1222.992452562820","611.4962262814100"]}};var ke="ol-overviewmap";e.className=e.className||ke,e.collapseLabel=e.collapseLabel||"",e.collapsed=e.collapsed,e.collapsed===void 0&&(e.collapsed=!0),e.label=e.label||"",e.tipLabel="Carte générale",e.layers=e.layers||[new LayerWMTS({layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",configuration:Te})],super(e),this.CLASSNAME="OverviewMap",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var Te="position-container-"+this.options.position;if(!document.getElementById(Te)){var ke=document.createElement("div");ke.id=Te,ke.classList.add("position"),ke.classList.add(Te),this.container.appendChild(ke)}this.options.target=this.container.children[Te]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPoverviewMap-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.remove("ol-control");var e=this.element.childNodes,Te=e[1];Te.id="GPshowOverviewMap-"+this._uid,Te.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPshowOverviewMap","gpf-btn-icon","gpf-btn-icon-overviewmap","fr-btn","fr-btn--tertiary","gpf-btn--tertiary"),Te.setAttribute("tabindex","0"),Te.setAttribute("aria-pressed",!this.options.collapsed),Te.setAttribute("type","button"),Te.removeAttribute("title"),Te.setAttribute("aria-label",this.options.tipLabel);var ke=this;Te.addEventListener?Te.addEventListener("click",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),ke.dispatchEvent({type:"overviewmap:toggle",status:Ue})}):Te.attachEvent&&Te.attachEvent("onclick",function(Be){var Ue=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!Ue),ke.dispatchEvent({type:"overviewmap:toggle",status:Ue})}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){e&&(this._createContainerPosition(e),this._initContainer()),this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalOverviewMap=GeoportalOverviewMap);var LegendsDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPlegends"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowLegendsPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowLegendsPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLegendsPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-legends fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Afficher les légendes"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowLegendsClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowLegendsClick(ke)}),e},_createLegendsPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPlegendsPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createLegendsPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__legends",Oe},_createLegendsPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__header_legends",Oe},_createLegendsPanelIconElement:function(){var Oe=document.createElement("label");return Oe.className="gpf-btn-header-legends gpf-btn-icon-header-legends",Oe.title="Légendes",Oe},_createLegendsPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__title_legends",Oe.innerHTML="Légendes",Oe},_createLegendsPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowLegendsPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowLegendsPicto")).click()}),e},_createLegendElement:function(){var Oe=document.createElement("div");return Oe.className="legends-entries gpf-panel__body fr-modal__body",Oe},_createLegendEntry:function(Oe){const e=Ue=>{var He=function(){if(!window.DOMParser)return!1;var An=new DOMParser;try{An.parseFromString("x","text/html")}catch{return!1}return!0};if(He()){var We=new DOMParser,Cn=We.parseFromString(Ue,"text/html");return Cn.body}var En=document.createElement("div");return En.innerHTML=Ue,En};if(Oe&&Oe.legends&&Oe.legends.length){var Te=Oe.legends[0].url,ke=e(`
                    <div
                        id="${Oe.id}"
                        class="legend-entry-container gpf-panel__content fr-modal__content">
                        <label class="legend-entry-title gpf-label-legends-name fr-label">${Oe.title}</label>
                        <button
                            id="GPcollapseLegend_ID_${Oe.id}"
                            class="legend-entry-show gpf-btn gpf-btn-icon gpf-btn-icon-legends-collapse fr-btn fr-btn--tertiary gpf-btn--tertiary"
                            type="button"
                            title=""
                            tabindex="0"
                            aria-pressed="false"></button>
                        <div id="GPlegend_ID_${Oe.id}" class="legend-entry-image gpf-hidden">
                            <img src="${Te}" alt="${Oe.desc}">
                        </div>
                    </div>
                `),Be=ke.firstChild.querySelector("button");return Be&&Be.addEventListener("click",Ue=>{var He=Ue.target.ariaPressed==="true";Ue.target.setAttribute("aria-pressed",!He);var We=document.getElementById("GPlegend_ID_"+Oe.id);He?We.classList.replace("gpf-visible","gpf-hidden"):We.classList.replace("gpf-hidden","gpf-visible")}),ke.firstChild}}},logger$5=LoggerByDefault.getLogger("legends"),Legends=class rp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof rp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Legends",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e){if(this.draggable&&Draggable.dragElement(this.panelLegendsContainer,this.panelLegendsHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonLegendsShow.setAttribute("aria-pressed",!0),this.auto){var Te=this;e.getLayers().forEach(ke=>{Te.add(ke)})}this.auto&&this.addEventsListeners(e)}else this.auto&&this.removeEventsListeners();super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}getMetaInformations(e){if(e.hasOwnProperty("name"))return{id:e.name,title:e.getTitle(),legends:e.getLegends(),metadatas:e.getMetadata(),desc:e.getDescription(),url:e.getQuicklookUrl(),partners:e.getOriginators()}}adds(e){if(e)for(let Te=0;Te<e.length;Te++)this.add(layer)}add(e){if(e){var Te=this._createLegendEntry(this.getMetaInformations(e));if(Te)return this.exist(Te)?!1:(this.panelLegendsEntriesContainer.prepend(Te),this.legends.push({obj:e,dom:Te}),!0)}return!1}remove(e){var Te=!1;if(e)for(let ke=0;ke<this.legends.length;ke++){const Be=this.legends[ke];if(e.name===Be.obj.name&&e.service===Be.obj.service){Be.dom&&this.legends[ke].dom.remove(),this.legends.splice(ke,1),Te=!0;break}}return Te}exist(e){var Te=!1;for(let ke=0;ke<this.legends.length;ke++)if(this.legends[ke].dom.id===e.id){Te=!0;break}return Te}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonLegendsShow=null,this.panelLegendsContainer=null,this.panelLegendsEntriesContainer=null,this.panelLegendsHeaderContainer=null,this.buttonLegendsClose=null,this.eventsListeners=[],this.legends=[]}initContainer(){var e=this._createMainContainerElement(),Te=this.buttonLegendsShow=this._createShowLegendsPictoElement();e.appendChild(Te);var ke=this.panelLegendsContainer=this._createLegendsPanelElement(),Be=this._createLegendsPanelDivElement();ke.appendChild(Be);var Ue=this.panelLegendsEntriesContainer=this._createLegendElement();if(ke.appendChild(Ue),this.options.panel){var He=this.panelLegendsHeaderContainer=this._createLegendsPanelHeaderElement(),We=this._createLegendsPanelIconElement();He.appendChild(We);var Cn=this._createLegendsPanelTitleElement();He.appendChild(Cn);var En=this.buttonLegendsClose=this._createLegendsPanelCloseElement();He.appendChild(En),Be.appendChild(He)}return e.appendChild(ke),logger$5.log(e),e}addEventsListeners(e){var Te=this;this.eventsListeners["layer:add"]=function(ke){if(logger$5.trace(ke),!Te.add(ke.element)){logger$5.error("Layer already added...");return}},this.eventsListeners["layer:remove"]=function(ke){if(logger$5.trace(ke),!Te.remove(ke.element)){logger$5.error("Layer already removed...");return}},this.eventsListeners["layer:change:position"]=function(ke){logger$5.trace(ke)},this.eventsListeners["view:change:resolution"]=function(ke){logger$5.trace(ke);var Be=Te.getMap();for(let Tn=0;Tn<Te.legends.length;Tn++){const Ln=Te.legends[Tn];var Ue=Te.getMetaInformations(Ln.obj);if(Ue){var He=Be.getView().getResolution()||Be.getView().getResolutionForZoom(Be.getZoom()),We=He*3570,Cn=Ue.legends.slice(),En=Cn[0];for(let Bn=0;Bn<Cn.length;++Bn){const ei=Cn[Bn];ei.minScaleDenominator||(ei.minScaleDenominator=0),(We>En.minScaleDenominator&&ei.minScaleDenominator>En.minScaleDenominator&&ei.minScaleDenominator<We||We<En.minScaleDenominator&&ei.minScaleDenominator<En.minScaleDenominator)&&(En=ei)}if(Ue.legends[0]!==En){Ue.legends=[],Ue.legends.push(En);var An=Te._createLegendEntry(Ue),Sn=Ln.dom;Sn.replaceWith(An),Ln.dom=An}}}},e.getLayers().on("add",this.eventsListeners["layer:add"]),e.getLayers().on("remove",this.eventsListeners["layer:remove"]),e.getLayers().on("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().on("change:resolution",this.eventsListeners["view:change:resolution"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["layer:add"]),e.getLayers().un("remove",this.eventsListeners["layer:remove"]),e.getLayers().un("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().un("change:resolution",this.eventsListeners["view:change:resolution"]),delete this.eventsListeners["layer:add"],delete this.eventsListeners["layer:remove"],delete this.eventsListeners["layer:change:position"],delete this.eventsListeners["view:change:resolution"]}onShowLegendsClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$5.trace(e);var Te=this.buttonLegendsShow.ariaPressed;this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}};Object.assign(Legends.prototype,LegendsDOM);Object.assign(Legends.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Legends=Legends);const stringToHTML=Oe=>{var e=function(){if(!window.DOMParser)return!1;var Ue=new DOMParser;try{Ue.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var Te=new DOMParser,ke=Te.parseFromString(Oe,"text/html");return ke.body}var Be=document.createElement("div");return Be.innerHTML=Oe,Be};var CatalogDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPcatalog"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowCatalogPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowCatalogPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowCatalogPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-catalog fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Catalogue de données"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowCatalogClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowCatalogClick(ke)}),e},_createCatalogPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPcatalogPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createCatalogPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createCatalogPanelContentDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__content fr-modal__content",Oe},_createCatalogPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader gpf-panel__header fr-modal__header",Oe},_createCatalogPanelTitleElement:function(Oe){var e=document.createElement("div");return e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=Oe,e},_createCatalogPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPcatalogPanelClose"),e.className="GPpanelClose GPcatalogPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowCatalogPicto")).click(),Oe.onCloseCatalogClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowCatalogPicto")).click(),Oe.onCloseCatalogClick()});var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e},_createCatalogContentDivElement:function(){var Oe=stringToHTML('<div class="catalog-container-content" style="padding:10px"></div>');return Oe.firstChild},_createCatalogContentTitleElement:function(Oe){var e=stringToHTML(`
        <!-- titre -->
        <div class="catalog-container-title">
            <div class="fr-title">
                <h5 style="margin:unset">${Oe}</h5>
            </div>
        </div>
        `);return e.firstChild},_createCatalogContentSearchElement:function(){var Oe=`
        <!-- barre de recherche -->
        <!-- https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/barre-de-recherche -->
        <div class="catalog-container-search" style="padding-top:10px;padding-bottom:20px">
            <div class="fr-search-bar" id="header-search" role="search">
                <label class="fr-label" for="search-input">
                    Recherche
                </label>
                <input class="fr-input" placeholder="Rechercher une donnée" type="search" id="search-input" name="search-input" incremental>
                <button id="search-button" class="fr-btn" title="Rechercher">
                    Rechercher
                </button>
            </div>
        </div>
        `,e=stringToHTML(Oe);const Te=e.attachShadow({mode:"open"});Te.innerHTML=Oe.trim();var ke=Te.getElementById("search-button");ke&&ke.addEventListener("click",()=>{this.onSearchCatalogButtonClick()});var Be=Te.getElementById("search-input");return Be&&Be.addEventListener("search",()=>{this.onSearchCatalogInputChange()}),Te},_createCatalogWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPcatalogCalcWaitingContainer"),Oe.className="GPwaitingContainerHidden gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createCatalogContentCategoriesTabs:function(Oe){var e="",Te=(ei,ti,ni,ri)=>{var si="GPtabButton fr-tabs__tab",ai="false",li=-1;return ri&&(si="GPtabButton GPtabButtonActive fr-tabs__tab",ai="true",li=0),`
            <li class="GPtabList" role="presentation">
                <button id="tabbutton-${ei}_${ti}" class="${si}" tabindex="${li}" role="tabbutton" aria-selected="${ai}" aria-controls="tabpanel-${ei}-panel_${ti}">${ni}</button>
            </li>
            `},ke="",Be=ei=>{var ti=ei.default?"checked":"";return`
            <!-- sous categorie -->
            <div class="fr-fieldset__element fr-fieldset__element--inline">
                <div class="fr-radio-group fr-radio-group--sm">
                    <input type="radio" id="radio-inline_${ei.id}" name="radio-inline" ${ti} aria-controls="tabcontent-${ei.id}">
                    <label class="fr-label" for="radio-inline_${ei.id}">
                        ${ei.title}
                    </label>
                </div>
            </div>
            `},Ue=(ei,ti)=>{var ni="";for(let si=0;si<ti.length;si++){const ai=ti[si];ke+=Be(ai);var ri="";ai.default||(ri="GPelementHidden gpf-hidden"),ni+=`<div class="tabcontent ${ri}" role="tabpanel-section" id="tabcontent-${ai.id}"></div>`}return`
            <!-- sous categories -->
            <fieldset class="fr-fieldset" id="radio-inline_${ei}" aria-labelledby="radio-inline-legend radio-inline-messages">
                ${ke}
                <div class="fr-messages-group" id="radio-inline-messages" aria-live="assertive"></div>
            </fieldset>
            ${ni}
            `},He="",We=(ei,ti,ni,ri)=>{var si="GPtabContent fr-tabs__panel",ai=-1;ni&&(si="GPtabContent GPtabContentSelected fr-tabs__panel fr-tabs__panel--selected",ai=0);var li='<div class="tabcontent"></div>';return ri&&(li=Ue(ti,ri)),`
            <!-- panneaux -->
            <div id="tabpanel-${ei}-panel_${ti}" class="${si}" role="tabpanel" aria-labelledby="tabbutton-${ei}_${ti}" tabindex="${ai}" style="max-height: 250px;overflow-y: auto;">
                ${li}
            </div>
            `};for(let ei=0;ei<Oe.length;ei++){const ti=Oe[ei];e+=Te(ei,ti.id,ti.title,ti.default),He+=We(ei,ti.id,ti.default,ti.items)}var Cn=`
        <!-- onglets -->
        <div class="catalog-container-tabs">
            <div class="GPtabs fr-tabs">
                <ul class="GPtabsList fr-tabs__list" role="tablist" aria-label="[A modifier | nom du système d'onglet]">
                    ${e}
                </ul>
                ${He}
            </div>
        </div>
        `,En=stringToHTML(Cn.trim());const An=En.attachShadow({mode:"open"});An.innerHTML=Cn.trim();var Sn=An.querySelectorAll('[role="tabpanel-section"]'),Tn=An.querySelectorAll('[name="radio-inline"]');Tn&&Tn.forEach(ei=>{ei.addEventListener("change",ti=>{for(let ri=0;ri<Sn.length;ri++){const si=Sn[ri];si.classList.add("gpf-hidden"),si.classList.add("GPelementHidden")}var ni=document.getElementById(ti.target.getAttribute("aria-controls"));ni.classList.remove("gpf-hidden"),ni.classList.remove("GPelementHidden")})});var Ln=An.querySelectorAll('[role="tabpanel"]'),Bn=An.querySelectorAll('[role="tabbutton"]');return Bn&&Bn.forEach(ei=>{ei.addEventListener("click",ti=>{for(let ri=0;ri<Bn.length;ri++){const si=Bn[ri];si.setAttribute("tabindex",-1),si.ariaSelected=!1,si.classList.remove("GPtabButtonActive")}ti.target.setAttribute("tabindex",0),ti.target.ariaSelected=!0,ti.target.classList.add("GPtabButtonActive");for(let ri=0;ri<Ln.length;ri++){const si=Ln[ri];si.setAttribute("tabindex",-1),si.classList.remove("fr-tabs__panel--selected"),si.classList.remove("GPtabContentSelected"),si.classList.add("gpf-hidden"),si.classList.add("GPelementHidden")}var ni=document.getElementById(ti.target.getAttribute("aria-controls"));ni.setAttribute("tabindex",0),ni.classList.add("fr-tabs__panel--selected"),ni.classList.add("GPtabContentSelected"),ni.classList.remove("gpf-hidden"),ni.classList.remove("GPelementHidden"),this.onSelectCatalogTabClick(ti)})}),An},_createCatalogContentCategoryTabContent:function(Oe,e){var Te=Object.values(e),ke="",Be=(si,ai,li,Pi,pi)=>`
            <div class="fr-fieldset__element" id="fieldset-${pi}_${ai}-${Pi}">
                <div class="fr-checkbox-group">
                    <input
                        name="checkboxes-${pi}"
                        id="checkboxes-${pi}-${si}_${ai}-${Pi}"
                        type="checkbox"
                        data-layer="${ai}:${Pi}"
                        aria-describedby="checkboxes-messages-${pi}-${si}_${ai}-${Pi}">
                    <label class="GPlabelActive fr-label" for="checkboxes-${pi}-${si}_${ai}-${Pi}" title="nom technique : ${ai}">
                        ${li} (${Pi})
                    </label>
                    <div class="fr-messages-group" id="checkboxes-messages-${pi}-${si}_${ai}-${Pi}" aria-live="assertive"></div>
                </div>
            </div>
            `,Ue=(si,ai,li,Pi,pi)=>`
            <!-- section -->
            <section class="fr-accordion" style="width:100%;">
                <h3 class="fr-accordion__title">
                    <button class="GPcatalogButtonSection fr-accordion__btn" role="button-collapse-${ai}" aria-expanded="false" aria-controls="accordion-${si}">
                        <span class="GPshowCatalogAdvancedTools gpf-hidden" role="button-icon-collapse-${ai}"></span>${li}
                    </button>
                </h3>
                <div class="fr-collapse GPelementHidden" id="accordion-${si}">
                    ${pi}
                </div>
            </section>
            `,He=Oe.section;He&&(Te=Te.sort((si,ai)=>si[Oe.filter.field].localeCompare(ai[Oe.filter.field])));var We={};for(let si=0;si<Te.length;si++){const ai=Te[si];if(He){var Cn=ai[Oe.filter.field];Cn&&(We.hasOwnProperty(Cn)||(We[Cn]=""),We[Cn]+=Be(si,ai.name,ai.title,ai.service,Oe.id))}else ke+=Be(si,ai.name,ai.title,ai.service,Oe.id)}if(He){for(const si in We)if(Object.prototype.hasOwnProperty.call(We,si)){const ai=We[si];var En=[...ai.matchAll(/fr-fieldset__element/g)].length,An=Math.abs(Array.from(si).reduce((li,Pi)=>Math.imul(31,li)+Pi.charCodeAt(0)|0,0));ke+=Ue(An,Oe.id,si,En,ai)}}var Sn=`
            <!-- liste de couches -->
            <fieldset class="fr-fieldset" id="checkboxes-${Oe.id}" aria-labelledby="checkboxes-legend checkboxes-messages">
                ${ke}
            </fieldset>
        `,Tn=stringToHTML(Sn);const Ln=Tn.attachShadow({mode:"open"});Ln.innerHTML=Sn.trim();var Bn=`checkboxes-${Oe.id}`,ei=Ln.querySelectorAll('[name="'+Bn+'"]');ei&&ei.forEach(si=>{si.addEventListener("click",ai=>{this.onSelectCatalogEntryClick(ai)})});var ti=`button-collapse-${Oe.id}`,ni=Ln.querySelectorAll('[role="'+ti+'"]');ni&&ni.forEach(si=>{si.addEventListener("click",ai=>{ai.target.ariaExpanded=ai.target.ariaExpanded!=="true";var li=document.getElementById(ai.target.getAttribute("aria-controls"));li&&(ai.target.ariaExpanded==="true"?(li.classList.add("fr-collapse--expanded"),li.classList.remove("GPelementHidden")):(li.classList.remove("fr-collapse--expanded"),li.classList.add("GPelementHidden")))},!1)}),`${Oe.id}`;var ri=Ln.querySelectorAll('[role="'+ti+'"]');return ri&&ri.forEach(si=>{si.addEventListener("click",ai=>{ai.target.parentElement.click()})}),Ln}},logger$4=LoggerByDefault.getLogger("widget"),Catalog=class op extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof op))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Catalog",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this.showWaiting(),this.initLayersList().then(Te=>{logger$4.trace(this,Te),this.hideWaiting(),this.dispatchEvent({type:"catalog:loaded",data:Te})}).catch(Te=>{this.hideWaiting(),logger$4.error(Te)}),this}setMap(e){e?(this.on("catalog:loaded",this.initMapLayers),this.draggable&&Draggable.dragElement(this.panelCatalogContainer,this.panelCatalogHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonCatalogShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):(this.un("catalog:loaded",this.initMapLayers),this.auto&&this.removeEventsListeners()),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,titlePrimary:"Gérer vos couches de données",titleSecondary:"",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Données",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.eventsListeners=[],this.buttonCatalogShow=null,this.panelCatalogContainer=null,this.panelCatalogHeaderContainer=null,this.buttonCatalogClose=null,this.contentCatalogContainer=null,this.waitingContainer=null,this.layersList=[],this.categories=this.options.categories.map(Te=>{var ke=Te.items;return Te.items&&(ke=Te.items.map(Be=>({title:Be.title,id:Be.id||Math.abs(Array.from(Be.title).reduce((Ue,He)=>Math.imul(31,Ue)+He.charCodeAt(0)|0,0)),section:Be.hasOwnProperty("section")?Be.section:!1,default:Be.hasOwnProperty("default")?Be.default:!1,filter:Be.filter||null}))),{title:Te.title,id:Te.id||Math.abs(Array.from(Te.title).reduce((Be,Ue)=>Math.imul(31,Be)+Ue.charCodeAt(0)|0,0)),default:Te.hasOwnProperty("default")?Te.default:!1,filter:Te.filter||null,items:ke||null}}),this.categoryId=(()=>{var Te=this.categories.findIndex(ke=>ke.default);return Te===-1&&(Te=0,this.categories[Te].default=!0),this.categories[Te].id})(),this.layersListOnMap={}}initContainer(){var e=this._createMainContainerElement(),Te=this.buttonCatalogShow=this._createShowCatalogPictoElement();e.appendChild(Te);var ke=this.panelCatalogContainer=this._createCatalogPanelElement(),Be=this._createCatalogPanelDivElement();ke.appendChild(Be);var Ue=this.panelCatalogHeaderContainer=this._createCatalogPanelHeaderElement(),He=this._createCatalogPanelTitleElement(this.options.titlePrimary);Ue.appendChild(He);var We=this.buttonCatalogClose=this._createCatalogPanelCloseElement();Ue.appendChild(We),Be.appendChild(Ue);var Cn=this._createCatalogPanelContentDivElement(),En=this.contentCatalogContainer=this._createCatalogContentDivElement();En.appendChild(this._createCatalogContentTitleElement(this.options.titleSecondary)),this.options.search.display&&En.appendChild(this._createCatalogContentSearchElement());var An=this.waitingContainer=this._createCatalogWaitingElement();return En.appendChild(An),Cn.appendChild(En),Be.appendChild(Cn),e.appendChild(ke),e}initMapLayers(){var e=this.getMap();if(e){var Te=e.getLayers();Te.forEach(ke=>{if(ke.name&&ke.service){this.layersListOnMap[ke.name+":"+ke.service]=ke;var Be=document.querySelectorAll(`input[data-layer="${ke.name}:${ke.service}"]`);Be&&Be.forEach(Ue=>{Ue.checked=!0})}})}}async initLayersList(){var e=null,Te=this;const ke=En=>{var An=Te.contentCatalogContainer,Sn=Te._createCatalogContentCategoriesTabs(this.categories);An.appendChild(Sn);var Tn=[];Te.categories.forEach(ei=>{if(ei.items)for(let ti=0;ti<ei.items.length;ti++){const ni=ei.items[ti];Tn.push(ni)}else Tn.push(ei)});var Ln=An.querySelectorAll(".tabcontent");for(let ei=0;ei<Ln.length;ei++){const ti=Ln[ei];var Bn=Be(Tn[ei],En);ti.appendChild(Te._createCatalogContentCategoryTabContent(Tn[ei],Bn))}},Be=(En,An)=>{var Sn=An,Tn=En.filter;if(Tn){Sn={};for(const Bn in An)if(Object.prototype.hasOwnProperty.call(An,Bn)){const ei=An[Bn];if(ei[Tn.field]){var Ln=Array.isArray(Tn.value)?Tn.value.includes(ei[Tn.field].toString()):Tn.value==="*"||ei[Tn.field].toString()===Tn.value;Ln&&(Sn[Bn]=ei,this.layersList[Bn].categories.push(En.id))}}}return Sn},Ue=(En,An)=>An;if(this.options.configuration.data){e=this.options.configuration.data||{},Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const En in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,En)){const An=e.layers[En];if(An.serviceParams){var He=An.serviceParams.id.split(":").slice(-1)[0];An.service=He,An.categories=[]}else delete e.layers[En]}var We=Ue(this.options.layerFilter,e.layers);return this.layersList=We,ke(We),new Promise((En,An)=>{En(e)})}if(this.options.configuration.urls){var Cn=[];for(let En=0;En<this.options.configuration.urls.length;En++){const An=this.options.configuration.urls[En],Sn=function(){return fetch(An,{}).then(function(Tn){if(Tn.ok)return Tn.json().then(function(Bn){return Bn}).catch(Bn=>{logger$4.warn("fetch json exception :",Bn)});var Ln=new Error("HTTP status code: "+Tn.status);throw Ln}).catch(Tn=>new Promise((Ln,Bn)=>{logger$4.error("fetch json exception :",Tn),Bn(Tn)}))};Cn.push(Sn())}try{const En=await Promise.all(Cn);e=En[0];for(let Sn=1;Sn<En.length;Sn++){const Tn=En[Sn];Helper.mergeParams(e,Tn)}Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const Sn in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,Sn)){const Tn=e.layers[Sn];if(Tn.serviceParams){var He=Tn.serviceParams.id.split(":").slice(-1)[0];Tn.service=He,Tn.categories=[]}else delete e.layers[Sn]}var We=Ue(this.options.layerFilter,e.layers);return this.layersList=We,ke(We),await new Promise((Sn,Tn)=>{Sn(e)})}catch(En){return await new Promise((An,Sn)=>{Sn(En)})}}}addEventsListeners(e){var Te=this;this.eventsListeners["map:add"]=function(ke){logger$4.trace(ke);var Be=ke.element.name,Ue=ke.element.service;Te.layersListOnMap[Be+":"+Ue]=ke.element;var He=document.querySelectorAll(`input[data-layer="${Be}:${Ue}"]`);He&&He.forEach(We=>{We.checked=!0})},e.getLayers().on("add",this.eventsListeners["map:add"]),this.eventsListeners["map:remove"]=function(ke){logger$4.trace(ke);var Be=ke.element.name,Ue=ke.element.service;delete Te.layersListOnMap[Be+":"+Ue];var He=document.querySelectorAll(`input[data-layer="${Be}:${Ue}"]`);He&&He.forEach(We=>{We.checked=!1})},e.getLayers().on("remove",this.eventsListeners["map:remove"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["map:add"]),delete this.eventsListeners["map:add"],e.getLayers().un("remove",this.eventsListeners["map:remove"]),delete this.eventsListeners["map:remove"]}addLayer(e,Te){var ke=null,Be=null;switch(Te){case"WMS":Be=new LayerWMS({layer:e});break;case"WMTS":Be=new LayerWMTS({layer:e});break;case"TMS":Be=new LayerMapBox({layer:e},{declutter:!0});break;case"WFS":Be=new LayerWFS({layer:e});break}if(Be){var Ue=this.getMap();Ue.addLayer(Be),this.layersListOnMap[e+":"+Te]=Be,ke=Be.getConfiguration()}return ke}removeLayer(e,Te){var ke=null,Be=this.layersListOnMap[e+":"+Te];if(Be){ke=Be.getConfiguration();var Ue=this.getMap();Ue.removeLayer(Be),delete this.layersListOnMap[e+":"+Te]}return ke}hideWaiting(){this.waitingContainer.className="GPwaitingContainerHidden  gpf-waiting--hidden"}showWaiting(){this.waitingContainer.className="GPwaitingContainerVisible gpf-waiting--visible"}resetFilteredLayersList(){for(const e in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,e)){const Te=this.layersList[e];Te.hidden=!1,this.updateFilteredLayersListDOM(Te.name,Te.service,Te.hidden)}}setFilteredLayersList(e){var Te=this.options.search.criteria;for(const Be in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,Be)){const Ue=this.layersList[Be];var ke="";for(let He=0;He<Te.length;He++){const We=Te[He];Ue[We]&&(ke+=Ue[We].toLowerCase())}Ue.hidden=!ke.includes(e.toLowerCase()),this.updateFilteredLayersListDOM(Ue.name,Ue.service,Ue.hidden)}}updateFilteredLayersListDOM(e,Te,ke){var Be=[];this.categories.forEach(He=>{if(He.items)for(let We=0;We<He.items.length;We++){const Cn=He.items[We];Be.push(Cn.id)}else Be.push(He.id)});for(let He=0;He<Be.length;He++){const We=Be[He];var Ue=document.getElementById(`fieldset-${We}_${e}-${Te}`);Ue&&(ke?(Ue.classList.add("gpf-hidden"),Ue.classList.add("GPelementHidden")):(Ue.classList.remove("gpf-hidden"),Ue.classList.remove("GPelementHidden")))}}onShowCatalogClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$4.trace(e)}onCloseCatalogClick(e){logger$4.trace(e)}onSelectCatalogTabClick(e){logger$4.trace(e);var Te=e.target.id,ke=Te.split("_")[1];this.categoryId=ke}onSelectCatalogEntryClick(e){logger$4.trace(e);var Te=e.target.dataset.layer,ke=Te.substring(0,Te.lastIndexOf(":")),Be=Te.substring(Te.lastIndexOf(":")+1),Ue={};e.target.checked?(this.options.addToMap&&(Ue=this.addLayer(ke,Be)),this.dispatchEvent({type:"catalog:layer:add",name:ke,service:Be,layer:Ue})):(this.options.addToMap&&(Ue=this.removeLayer(ke,Be)),this.dispatchEvent({type:"catalog:layer:remove",name:ke,service:Be,layer:Ue}))}onSearchCatalogButtonClick(){var e=document.getElementById("search-input").value;this.setFilteredLayersList(e)}onSearchCatalogInputChange(){this.onSearchCatalogButtonClick()}};Object.assign(Catalog.prototype,CatalogDOM);Object.assign(Catalog.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Catalog=Catalog);const TerritoriesJson=[{id:"FXX",title:"France métropolitaine",description:"",zoom:null,bbox:[-9.86,41.15,10.38,51.56],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/fxx.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/fxx.svg"},{id:"GLP",title:"Guadeloupe",description:"",zoom:null,bbox:[-61.97,15.72,-60.93,16.66],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/glp.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/glp.svg"},{id:"GUF",title:"Guyane",description:"",zoom:null,bbox:[-55.65,1.49,-51.2,6.21],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/guf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/guf.svg"},{id:"MTQ",title:"Martinique",description:"",zoom:null,bbox:[-61.4,14.25,-60.67,15.04],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/mtq.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/mtq.svg"},{id:"REU",title:"Réunion",description:"",zoom:10,bbox:[55.07,-21.46,55.86,-20.79],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/reu.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/reu.svg"},{id:"SPM",title:"Saint-Pierre-et-Miquelon",description:"",zoom:null,bbox:[-56.48,46.69,-56.07,47.19],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/spm.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/spm.svg"},{id:"IDF",title:"Paris petite couronne",description:"",zoom:12,bbox:[2.18,48.77,2.52,48.95],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/idf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/idf.svg"},{id:"MYT",title:"Mayotte",description:"",zoom:null,bbox:[44.95,-13.049,45.32,-12.57],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/myt.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/myt.svg"},{id:"NCL",title:"Nouvelle Calédonie",description:"",zoom:null,bbox:[163.02,-23.08,167.86,-19.5],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/ncl.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/ncl.svg"}];var TerritoriesDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPterritories"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowTerritoriesPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),e.id=this._addUID("GPshowTerritoriesPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowTerritoriesPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-territories fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Sélecteur de territoire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowTerritoriesClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowTerritoriesClick(ke)}),e},_createTerritoriesPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPterritoriesPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createTerritoriesPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__territories",Oe},_createTerritoriesPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__header_territories",Oe},_createTerritoriesPanelIconElement:function(){var Oe=document.createElement("label");return Oe.className="gpf-btn-header-territories gpf-btn-icon-header-territories",Oe.title="Selecteur de territoires",Oe},_createTerritoriesPanelTitleElement:function(Oe){var e=document.createElement("div");return e.className="gpf-panel__title_territories",e.innerHTML=Oe,e},_createTerritoriesPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id="GPterritoriesPanelClose",e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowTerritoriesPicto")).click(),Oe.onCloseTerritoriesClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowTerritoriesPicto")).click(),Oe.onCloseTerritoriesClick()}),e},_createTerritoriesElement:function(){var Oe=document.createElement("div");return Oe.className="territories-entries gpf-panel__body_territories fr-modal__body",Oe},_createTerritoryEntry:function(Oe){var e=this;const Te=En=>{var An=function(){if(!window.DOMParser)return!1;var Bn=new DOMParser;try{Bn.parseFromString("x","text/html")}catch{return!1}return!0};if(An()){var Sn=new DOMParser,Tn=Sn.parseFromString(En,"text/html");return Tn.body}var Ln=document.createElement("div");return Ln.innerHTML=En,Ln};if(Oe){var ke="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNTgxLjAwMDAwMHB0IiBoZWlnaHQ9IjM1Ni4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDU4MS4wMDAwMDAgMzU2LjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgoKPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMzU2LjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iI2I0YjNiMyIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTAgMTc4MCBsMCAtMTc4MCAyOTA1IDAgMjkwNSAwIDAgMTc4MCAwIDE3ODAgLTI5MDUgMCAtMjkwNSAwIDAKLTE3ODB6Ii8+CjwvZz4KPC9zdmc+Cg==",Be=Oe.thumbnail||ke,Ue=Oe.icon||ke,He=Oe.id.toLowerCase(),We=Te(`
            <div class="gpf-tile fr-tile fr-tile--sm">
                <div class="fr-tile__body">
                    <div class="fr-tile__content">
                        <p class="fr-tile__title">
                            <label class="gpf-label fr-label" title="${Oe.description}">${Oe.title}</label>
                        </p>
                    </div>
                </div>
                <div class="gpf-tile__header fr-tile__header">
                    <div class="fr-tile__pictogram fr-tile__thumbnail">
                        <img id="thumbnail-${Oe.id}" src="${Be}" width="100%" height="100%" title="${Oe.description}"/>
                    </div>
                    <div class="fr-tile__pictogram fr-tile__icon fr-tile__icon--${He}">
                        <svg>       
                            <image id="icon-${Oe.id}" xlink:href="${Ue}"/>    
                        </svg>
                    </div>
                </div>
            </div>
            `),Cn=We.firstChild;return Cn&&Cn.addEventListener("click",En=>{e.onImageTerritoriesClick(En,Oe.id)}),We.firstChild}}},logger$3=LoggerByDefault.getLogger("territories"),Territories=class ap extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ap))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Territories",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e&&(this.draggable&&Draggable.dragElement(this.panelTerritoriesContainer,this.panelTerritoriesHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonTerritoriesShow.setAttribute("aria-pressed",!0),this.auto))for(let Te=0;Te<TerritoriesJson.length;Te++){const ke=TerritoriesJson[Te];this.setTerritory(ke)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setTerritory(e){var Te=this.territories.some(Be=>Be.data.id===e.id);if(e&&!Te){var ke=this._createTerritoryEntry(e);if(ke)return this.panelTerritoriesEntriesContainer.appendChild(ke),this.territories.push({data:e,dom:ke}),!0}return!1}removeTerritory(e){var Te=!1;if(e){for(let ke=0;ke<this.territories.length;ke++)if(this.territories[ke].data.id===e){this.territories[ke].dom.remove(),this.territories.splice(ke,1),Te=!0;break}}return Te}setCollapse(e){if(e===void 0){logger$3.log("[ERROR] Territory:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPterritoriesPanelClose").click():this.buttonTerritoriesShow.click(),this.collapsed=e)}setReduce(e){e?this.panelTerritoriesEntriesContainer.classList.add("tiles-reduce"):this.panelTerritoriesEntriesContainer.classList.remove("tiles-reduce")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,panel:!0,title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3,territories:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.territories=[],this.buttonTerritoriesShow=null,this.panelTerritoriesContainer=null,this.panelTerritoriesHeaderContainer=null,this.buttonTerritoriesClose=null,this.panelTerritoriesEntriesContainer=null}initContainer(){var e=this._createMainContainerElement(),Te=this.buttonTerritoriesShow=this._createShowTerritoriesPictoElement();e.appendChild(Te);var ke=this.panelTerritoriesContainer=this._createTerritoriesPanelElement();ke.classList.add("tiles-direction"),ke.classList.add("tiles-"+this.options.tiles);var Be=this._createTerritoriesPanelDivElement();ke.appendChild(Be);var Ue=this.panelTerritoriesEntriesContainer=this._createTerritoriesElement();if(Ue.classList.add("tiles-direction"),Ue.classList.add("tiles-"+this.options.tiles),this.options.reduce&&Ue.classList.add("tiles-reduce"),this.options.thumbnail?Ue.classList.add("tiles-thumbnail"):Ue.classList.add("tiles-icon"),ke.appendChild(Ue),this.options.panel){var He=this.panelTerritoriesHeaderContainer=this._createTerritoriesPanelHeaderElement(),We=this._createTerritoriesPanelIconElement();He.appendChild(We);var Cn=this._createTerritoriesPanelTitleElement(this.options.title);He.appendChild(Cn);var En=this.buttonTerritoriesClose=this._createTerritoriesPanelCloseElement();He.appendChild(En),Be.appendChild(He)}return e.appendChild(ke),logger$3.log(e),e}onShowTerritoriesClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$3.trace(e),this.collapsed=!this.collapsed}onCloseTerritoriesClick(e){logger$3.trace(e)}onImageTerritoriesClick(e,Te){logger$3.trace(e,Te);var ke=this.territories.find(En=>En.data.id===Te);if(ke){var Be=ke.data.zoom,Ue=ke.data.bbox||[];if(!Ue.length)return;var He=this.getMap(),We=He.getView().getProjection().getCode(),Cn=transformExtent(Ue,"EPSG:4326",We);He.getView().fit(Cn,He.getSize()),Be&&He.getView().setZoom(Be),this.setCollapse(!0),this.dispatchEvent({type:"territories:change",territory:ke})}}};Object.assign(Territories.prototype,TerritoriesDOM);Object.assign(Territories.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Territories=Territories);var ControlListDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPcontrolList"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowControlListPictoElement:function(){var Oe=this,e=document.createElement("button"),Te=document.createElement("span");return e.appendChild(Te),Te.innerText="+",e.id=this._addUID("GPshowControlListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowControlListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-controllist fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Tous mes outils"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowControlListPanelClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Be=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Be),Oe.onShowControlListPanelClick(ke)}),e},_createControlListPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPcontrolListPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createControlListPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createControlListPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var Te=document.createElement("div");Te.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Te.innerHTML="Mes outils",e.appendChild(Te);var ke=document.createElement("button");ke.id=this._addUID("GPcontrolListPanelClose"),ke.className="GPpanelClose GPcontrolListPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowControlListPicto")).click()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowControlListPicto")).click()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",ke.appendChild(Be),e.appendChild(ke),e},_createControlListPanelContentElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__content fr-modal__content",Oe},_createControlListPanelFooterElement:function(Oe){var e=document.createElement("div");e.className="GPpanelFooter gpf-panel__footer fr-modal__footer";var Te=document.createElement("button");return Te.classList.add("gpf-btn","gpf-btn--tertiary","fr-btn","fr-btn--tertiary"),Te.innerText="+ Ajouter plus d'outils",Te.addEventListener("click",function(){Oe.click()}),e.appendChild(Te),e},_createControlListPanelControl:function(Oe){let e;try{e=Oe.getContainer()}catch{e=Oe.container}var Te=document.createElement("div"),ke=e.querySelector(".GPshowOpen").cloneNode();ke.id=ke.id+"-controllist",ke.classList.add("inside-control-list"),Te.appendChild(ke);var Be=document.createElement("div"),Ue=document.createElement("span");if(Be.appendChild(Ue),e.querySelector(".GPshowOpen").ariaLabel?Ue.innerText=e.querySelector(".GPshowOpen").ariaLabel:e.querySelector(".GPpanelTitle")?Ue.innerText=e.querySelector(".GPpanelTitle").innerText:e.querySelector("[class^='gpf-btn-header-']")&&(Ue.innerText=e.querySelector("[class^='gpf-btn-header-']").title),Oe.description){var He=document.createElement("span");He.innerText=Oe.description,Be.appendChild(He)}return Te.appendChild(Be),Te.addEventListener("click",function(){e.querySelector(".GPshowOpen").click()}),Te}},logger$2=LoggerByDefault.getLogger("controlList"),ControlList=class lp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof lp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e.controlCatalogElement?this.controlCatalogElement=e.controlCatalogElement:this.controlCatalogElement=null,this.CLASSNAME="ControlList",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){e&&(this.draggable&&Draggable.dragElement(this._ControlListPanelContainer,this._ControlListPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoControlListButton.setAttribute("aria-pressed",!0)),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$2.log("[ERROR] ControlList:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPcontrolListPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getContainer(){return this._container}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1),this.options={collapsed:!0,draggable:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate()}_initContainer(){var e=this._createMainContainerElement(),Te=this._pictoControlListButton=this._createShowControlListPictoElement();e.appendChild(Te);var ke=this._ControlListPanelContainer=this._createControlListPanelElement(),Be=this._createControlListPanelDivElement();ke.appendChild(Be);var Ue=this._ControlListPanelHeaderContainer=this._createControlListPanelHeaderElement();Be.appendChild(Ue);var He=this._ControlListPanelContentContainer=this._createControlListPanelContentElement();if(Be.appendChild(He),this.controlCatalogElement){var We=this._createControlListPanelFooterElement(this.controlCatalogElement);Be.appendChild(We)}return e.appendChild(ke),e}onShowControlListPanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var Te=this.getMap();Interactions.unset(Te);var ke=this._pictoControlListButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed?this._ControlListPanelContentContainer.innerHTML="":this.getMap().getControls().getArray().forEach(Ue=>{if(Ue.listable){let He=this._createControlListPanelControl(Ue);this._ControlListPanelContentContainer.appendChild(He)}})}};Object.assign(ControlList.prototype,ControlListDOM);Object.assign(ControlList.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ControlList=ControlList);var OGCRequest={computeGenericGPFWFS:async function(Oe,e,Te=0,ke="geom",Be="",Ue=4326,He=!1,We,Cn){let En=Cn,An=We;Ue!==4326&&([En,An]=proj4(proj4.defs("EPSG:4326"),proj4.defs(`EPSG:${Ue}`),[Cn,We]));let Sn=`INTERSECTS(${ke},Point(${En}%20${An}))`;Te>0&&(Sn=`DWITHIN(${ke},Point(${En}%20${An}),${Te},kilometers)`),Be&&(Sn+=` ${Be}`);const Ln=await(await fetch(`https://data.geopf.fr/wfs/ows?SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typename=${Oe}&outputFormat=json&count=50&CQL_FILTER=${Sn}`)).json(),Bn=[];return Ln.features.forEach(ei=>{const ti=[];e.forEach(ni=>{ti.push(ei.properties[ni])}),He&&ti.push(ei.geometry),e.length===1&&ti[0]!==null&&!He?Bn.push(ti[0]):(e.length>1||He)&&Bn.push(ti)}),Bn}},title="contextMenu",ContextMenuDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPpointInfo"),Oe.className="GPpointInfo GPwidget gpf-widget",Oe},_createShowPointInfoPictoElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPshowPointInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowPointInfoPicto gpf-btn gpf-btn-icon gpf-btn-icon-widget fr-btn",e.title=`${title}`,e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(Te){var ke=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!ke),Oe.onShowPointInfoClick(Te)}):e.attachEvent&&e.attachEvent("onclick",function(Te){var ke=Te.target.ariaPressed==="true";Te.target.setAttribute("aria-pressed",!ke),Oe.onShowPointInfoClick(Te)}),e},_createPointInfoPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPpointInfoPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createPointInfoPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__pointInfo",Oe},_createPointInfoPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpointInfoHeader gpf-panel__header_pointInfo",Oe},_createPointInfoPanelIconElement:function(){var Oe=document.createElement("label");return Oe.className="GPpanelHeader gpf-btn-header-pointInfo gpf-btn-icon-header-pointInfo",Oe.title="Adresse et coordonnées",Oe},_createPointInfoPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelTitle gpf-panel__title_pointInfo fr-pt-4w",Oe.innerHTML="Adresse et coordonnées",Oe},_createPointInfoPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.className="GPpanelClose GPpointInfoPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var Te=document.createElement("span");return Te.className="GPelementHidden gpf-visible",Te.innerText="Fermer",e.appendChild(Te),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowPointInfoPicto")).click(),Oe.onClosePointInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowPointInfoPicto")).click(),Oe.onClosePointInfoClick()}),e},_createEntriesElement:function(){var Oe=document.createElement("div");Oe.className="point-info-content gpf-panel__body fr-modal__body";var e=document.createElement("div");return Oe.appendChild(e),Oe},_createPinDOMOverlay:function(Oe){var e=document.createElement("div"),Te=document.createElement("img");return Te.src=Oe,e.appendChild(Te),e}};/*!
  * ol-contextmenu - v5.5.0
  * https://github.com/jonataswalker/ol-contextmenu
  * Built: Wed Aug 07 2024 12:29:18 GMT+0000 (Coordinated Universal Time)
  */var k$1=Object.defineProperty,I$1=(Oe,e,Te)=>e in Oe?k$1(Oe,e,{enumerable:!0,configurable:!0,writable:!0,value:Te}):Oe[e]=Te,a$1=(Oe,e,Te)=>I$1(Oe,typeof e!="symbol"?e+"":e,Te),S$1={exports:{}};function x$2(){}x$2.prototype={on:function(Oe,e,Te){var ke=this.e||(this.e={});return(ke[Oe]||(ke[Oe]=[])).push({fn:e,ctx:Te}),this},once:function(Oe,e,Te){var ke=this;function Be(){ke.off(Oe,Be),e.apply(Te,arguments)}return Be._=e,this.on(Oe,Be,Te)},emit:function(Oe){var e=[].slice.call(arguments,1),Te=((this.e||(this.e={}))[Oe]||[]).slice(),ke=0,Be=Te.length;for(ke;ke<Be;ke++)Te[ke].fn.apply(Te[ke].ctx,e);return this},off:function(Oe,e){var Te=this.e||(this.e={}),ke=Te[Oe],Be=[];if(ke&&e)for(var Ue=0,He=ke.length;Ue<He;Ue++)ke[Ue].fn!==e&&ke[Ue].fn._!==e&&Be.push(ke[Ue]);return Be.length?Te[Oe]=Be:delete Te[Oe],this}};S$1.exports=x$2;var _$1=S$1.exports.TinyEmitter=x$2,L$1=(Oe=>(Oe.CONTEXTMENU="contextmenu",Oe.CLICK="click",Oe.DBLCLICK="dblclick",Oe))(L$1||{}),p$1=(Oe=>(Oe.BEFOREOPEN="beforeopen",Oe.OPEN="open",Oe.CLOSE="close",Oe.ADD_MENU_ENTRY="add-menu-entry",Oe))(p$1||{});let w$1=class extends MapBrowserEvent{constructor(e){super(e.type,e.map,e.originalEvent)}};const z$1={width:150,scrollAt:4,eventType:L$1.CONTEXTMENU,defaultItems:!0,items:[]},d$1="ol-ctx-menu",r={container:`${d$1}-container`,separator:`${d$1}-separator`,submenu:`${d$1}-submenu`,hidden:`${d$1}-hidden`,icon:`${d$1}-icon`,zoomIn:`${d$1}-zoom-in`,zoomOut:`${d$1}-zoom-out`,unselectable:"ol-unselectable"},C$1=[{text:"Zoom In",classname:`${r.zoomIn} ${r.icon}`,callback:(Oe,e)=>{const Te=e.getView();Te.animate({zoom:Number(Te.getZoom())+1,duration:700,center:Oe.coordinate})}},{text:"Zoom Out",classname:`${r.zoomOut} ${r.icon}`,callback:(Oe,e)=>{const Te=e.getView();Te.animate({zoom:Number(Te.getZoom())-1,duration:700,center:Oe.coordinate})}}];function y$1(Oe){const e=document.createDocumentFragment(),Te=document.createElement("div");for(Te.innerHTML=Oe;Te.firstChild;)e.append(Te.firstChild);return e}function P$1(Oe){var Cn,En;const e=document.importNode(Oe),Te=Oe.offsetWidth;e.style.cssText=`position: fixed; top: 0; left: 0; overflow: auto; visibility: hidden; pointer-events: none; height: unset; max-height: unset; width: ${Te}px`;const ke=y$1("<span>Foo</span>"),Be=y$1("<span>Foo</span>"),Ue=document.createElement("li"),He=document.createElement("li");Ue.append(ke),He.append(Be),e.append(Ue),e.append(He),(Cn=Oe.parentNode)==null||Cn.append(e);const We=e.offsetHeight/2;return(En=Oe.parentNode)==null||En.removeChild(e),We}function N$1({parentNode:Oe,item:e,isSubmenu:Te=!1,isInsideSubmenu:ke=!1,emitter:Be}){const Ue=`_${Math.random().toString(36).slice(2,11)}`;if(typeof e!="string"&&"text"in e){const An=`<span>${e.text}</span>`,Sn=y$1(An),Tn=document.createElement("li");e.classname=e.classname||"",e.icon&&(e.classname===""?e.classname=r.icon:e.classname.includes(r.icon)===!1&&(e.classname+=` ${r.icon}`),Tn.setAttribute("style",`background-image:url(${e.icon})`)),Tn.id=Ue,Tn.className=e.classname,Tn.append(Sn),Oe.append(Tn);const Ln={id:Ue,isSubmenu:Te,isInsideSubmenu:ke,isSeparator:!1,callback:"callback"in e?e.callback:null,data:"data"in e?e.data:null};return Be.emit(p$1.ADD_MENU_ENTRY,Ln,Tn),Tn}const He=`<li id="${Ue}" class="${r.separator}"><hr></li>`,We=y$1(He);Oe.append(We);const Cn=Oe.lastChild,En={id:Ue,isSubmenu:!1,isInsideSubmenu:!1,isSeparator:!0,callback:null,data:null};return Be.emit(p$1.ADD_MENU_ENTRY,En,Cn),Cn}function M$1({container:Oe,items:e,menuWidth:Te,isInsideSubmenu:ke,emitter:Be}){e.forEach(Ue=>{if(typeof Ue!="string"&&"items"in Ue&&Array.isArray(Ue.items)){const He=N$1({parentNode:Oe,item:Ue,isSubmenu:!0,emitter:Be});He.classList.add(r.submenu);const We=document.createElement("ul");We.classList.add(r.container),We.style.width=`${Te}px`,He.append(We),M$1({emitter:Be,menuWidth:Te,container:We,items:Ue.items,isInsideSubmenu:!0})}else N$1({parentNode:Oe,item:Ue,isSubmenu:!1,isInsideSubmenu:ke,emitter:Be})})}function b$1(Oe,e){if(!Oe)throw new Error(e)}let R$1=class extends Control{constructor(e={}){b$1(typeof e=="object","@param `opts` should be object type!");const Te=document.createElement("div");super({element:Te}),a$1(this,"map"),a$1(this,"emitter",new _$1),a$1(this,"container"),a$1(this,"coordinate",[]),a$1(this,"pixel",[]),a$1(this,"contextMenuEventListener"),a$1(this,"entryCallbackEventListener"),a$1(this,"mapMoveListener"),a$1(this,"lineHeight",0),a$1(this,"disabled"),a$1(this,"opened"),a$1(this,"items",[]),a$1(this,"menuEntries",new Map),a$1(this,"options"),this.options={...z$1,...e};const ke=document.createElement("ul");Te.append(ke),Te.style.width=`${this.options.width}px`,Te.classList.add(r.container,r.unselectable,r.hidden),this.container=Te,this.contextMenuEventListener=Be=>{this.handleContextMenu(Be)},this.entryCallbackEventListener=Be=>{this.handleEntryCallback(Be)},this.mapMoveListener=()=>{this.handleMapMove()},this.disabled=!1,this.opened=!1,window.addEventListener("beforeunload",()=>{this.removeListeners()},{once:!0})}clear(){for(const e of this.menuEntries.keys())this.removeMenuEntry(e);this.container.replaceChildren(),this.container.append(document.createElement("ul"))}enable(){this.disabled=!1}disable(){this.disabled=!0}getDefaultItems(){return C$1}countItems(){return this.menuEntries.size}extend(e){b$1(Array.isArray(e),"@param `items` should be an Array."),M$1({items:e,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild})}closeMenu(){this.opened=!1,this.container.classList.add(r.hidden),this.dispatchEvent(p$1.CLOSE)}isOpen(){return this.opened}updatePosition(e){b$1(Array.isArray(e),"@param `pixel` should be an Array."),this.isOpen()&&(this.pixel=e,this.positionContainer())}pop(){const e=Array.from(this.menuEntries.keys()).pop();e&&this.removeMenuEntry(e)}shift(){const e=Array.from(this.menuEntries.keys()).shift();e&&this.removeMenuEntry(e)}push(e){e&&this.extend([e])}setMap(e){if(super.setMap(e),e){this.map=e,e.getViewport().addEventListener(this.options.eventType,this.contextMenuEventListener,!1),e.on("movestart",()=>{this.handleMapMove()}),this.emitter.on(p$1.ADD_MENU_ENTRY,(ke,Be)=>{this.handleAddMenuEntry(ke,Be)},this),this.items=this.options.defaultItems?this.options.items.concat(C$1):this.options.items,M$1({items:this.items,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild});const Te=this.getMenuEntriesLength();this.lineHeight=Te>0?this.container.offsetHeight/Te:P$1(this.container)}else this.removeListeners(),this.clear()}removeListeners(){this.map.getViewport().removeEventListener(this.options.eventType,this.contextMenuEventListener,!1),this.emitter.off(p$1.ADD_MENU_ENTRY)}removeMenuEntry(e){let Te=document.getElementById(e);Te==null||Te.remove(),Te=null,this.menuEntries.delete(e)}handleContextMenu(e){var Te;this.coordinate=this.map.getEventCoordinate(e),this.pixel=this.map.getEventPixel(e),this.dispatchEvent(new w$1({map:this.map,originalEvent:e,type:p$1.BEFOREOPEN})),!this.disabled&&(this.options.eventType===L$1.CONTEXTMENU&&(e.stopPropagation(),e.preventDefault()),setTimeout(()=>{this.openMenu(e)}),(Te=e.target)==null||Te.addEventListener("pointerdown",ke=>{this.opened&&(ke.stopPropagation(),this.closeMenu())},{once:!0}))}openMenu(e){this.opened=!0,this.positionContainer(),this.container.classList.remove(r.hidden),this.dispatchEvent(new w$1({map:this.map,originalEvent:e,type:p$1.OPEN}))}getMenuEntriesLength(){return Array.from(this.menuEntries).filter(([,e])=>e.isSeparator===!1&&e.isSubmenu===!1&&e.isInsideSubmenu===!1).length}positionContainer(){const e=this.map.getSize()||[0,0],Te={w:e[0]-this.pixel[0],h:e[1]-this.pixel[1]},ke=this.getMenuEntriesLength(),Be={w:this.container.offsetWidth,h:Math.round(this.lineHeight*ke)},Ue=Te.w>=Be.w?this.pixel[0]+5:this.pixel[0]-Be.w;this.container.style.left=`${Ue}px`,this.container.style.top=Te.h>=Be.h?`${this.pixel[1]-10}px`:`${this.pixel[1]-Be.h}px`,this.container.style.right="auto",this.container.style.bottom="auto",Te.w-=Be.w;const He=En=>Array.from(En.children).filter(An=>An.tagName==="LI"&&An.classList.contains(r.submenu));let We=0;const Cn=(En,An)=>{We+=1,He(En).forEach(Sn=>{const Tn=An>=Be.w?Be.w-8:(Be.w+8)*-1,Ln=Sn.querySelector(`ul.${r.container}`),Bn=Math.round(this.lineHeight*Array.from(Ln.children).filter(ei=>ei.tagName==="LI").length);Ln.style.left=`${Tn}px`,Ln.style.right="auto",Ln.style.top=Te.h>=Bn+Be.h?"0":`-${Ln.offsetHeight-25}px`,Ln.style.bottom="auto",Ln.style.zIndex=String(We),He(Ln).length>0&&Cn(Ln,An-Be.w)})};Cn(this.container.firstElementChild,Te.w)}handleMapMove(){this.closeMenu()}handleEntryCallback(e){var Ue;e.preventDefault(),e.stopPropagation();const Te=e.currentTarget,ke=this.menuEntries.get(Te.id);if(!ke)return;const Be={data:ke.data,coordinate:this.coordinate};this.closeMenu(),(Ue=ke.callback)==null||Ue.call(ke,Be,this.map)}handleAddMenuEntry(e,Te){this.menuEntries.set(e.id,e),this.positionContainer(),"callback"in e&&typeof e.callback=="function"&&Te.addEventListener("click",this.entryCallbackEventListener,!1)}};var logger$1=LoggerByDefault.getLogger("contextMenu"),ContextMenu=class cp extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof cp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ContextMenu",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(e.addControl(this.contextmenu),e.addOverlay(this._marker),this.auto&&this.addEventsListeners()):this.auto&&this.removeEventsListeners(),super.setMap(e)}initialize(e){this.uid=SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!0,contextMenuItemsOptions:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonContextMenuShow=null,this.panelContextMenuContainer=null,this.panelContextMenuHeaderContainer=null,this.buttonContextMenuClose=null,this.panelContextMenuEntriesContainer=null,this.eventsListeners=[],this.controlList=[],this.itiPoints=new Array(7),this._marker=new Overlay({element:this._createPinDOMOverlay(Marker.lightOrange),stopEvent:!1,offset:Marker.defaultOffset});var Te=this.getAvailableContextMenuControls.call(this);this.contextMenuItemsOptions=[],e.contextMenuItemsOptions instanceof Array&&e.contextMenuItemsOptions&&e.contextMenuItemsOptions.length>0&&(this.contextMenuItemsOptions=e.contextMenuItemsOptions.map(ke=>({...ke,classname:"ol-context-menu-custom fr-text--md"}))),this.contextmenu=new R$1({defaultItems:!1,width:250,items:Te})}initContainer(){var e=this._createMainContainerElement(),Te=this.buttonPointInfoShow=this._createShowPointInfoPictoElement();e.appendChild(Te);var ke=this.panelPointInfoContainer=this._createPointInfoPanelElement(),Be=this._createPointInfoPanelDivElement();ke.appendChild(Be);var Ue=this.panelPointInfoEntriesContainer=this._createEntriesElement();ke.appendChild(Ue);var He=this.panelPointInfoHeaderContainer=this._createPointInfoPanelHeaderElement(),We=this._createPointInfoPanelIconElement();He.appendChild(We);var Cn=this._createPointInfoPanelTitleElement();He.appendChild(Cn);var En=this.buttonPointInfoClose=this._createPointInfoPanelCloseElement();return He.appendChild(En),Be.appendChild(He),e.appendChild(ke),logger$1.log(e),e}addEventsListeners(){this.contextmenu.on("open",e=>{e.this=this,this.onOpenContextMenu(e)}),this.contextmenu.on("close",e=>{e.this=this,this.onCloseContextMenu(e)})}removeEventsListeners(){}getAvailableContextMenuControls(){var e=[{text:"Adresse / Coordonnées",classname:"ol-context-menu-custom fr-text--md",callback:this.displayAdressAndCoordinate.bind(this),control_CLASSNAME:"ContextMenu"},{text:"Itinéraire depuis ce lieu",classname:"ol-context-menu-custom fr-text--md",callback:this.defineStartPoint.bind(this),control_CLASSNAME:"Route"},{text:"Itinéraire vers ce lieu",classname:"ol-context-menu-custom fr-text--md",callback:this.defineEndPoint.bind(this),control_CLASSNAME:"Route"},{text:"Isochrone - à proximité",classname:"ol-context-menu-custom fr-text--md",callback:this.computeIsochrone.bind(this),control_CLASSNAME:"Isocurve"},{text:"Ajouter des cartes / données",classname:"ol-context-menu-custom fr-text--md",callback:this.openCatalogue.bind(this),control_CLASSNAME:"Catalog"},"separator",{text:"Afficher la légende",classname:"ol-context-menu-custom fr-text--md",callback:this.displayLegend.bind(this),control_CLASSNAME:"Legends"}],Te=this.getMap(),ke=[];Te&&(ke=Te.getControls().getArray());var Be=e.filter(Ue=>{if(ke.filter(We=>We.CLASSNAME&&We.CLASSNAME==Ue.control_CLASSNAME).length>0||Ue=="separator")return Ue});return Array.prototype.push.apply(Be,this.contextMenuItemsOptions),Be}defineStartPoint(e){let Te=this.to4326(e.coordinate);var ke=this.getMap().getControls().getArray().filter(Be=>Be.CLASSNAME=="Route")[0];ke._showRouteButton.click(),ke._showRouteButton.setAttribute("aria-pressed",!0),this.itiPoints[0]=Te,ke.setData({points:this.itiPoints})}defineEndPoint(e){let Te=this.to4326(e.coordinate);var ke=this.getMap().getControls().getArray().filter(Be=>Be.CLASSNAME=="Route")[0];ke._showRouteButton.click(),ke._showRouteButton.setAttribute("aria-pressed",!0),this.itiPoints[6]=Te,ke.setData({points:this.itiPoints})}to4326(e){return transform$1([parseFloat(e[0]),parseFloat(e[1])],"EPSG:3857","EPSG:4326")}computeIsochrone(e){var Te=this.getMap().getControls().getArray().filter(Ue=>Ue.CLASSNAME=="Isocurve")[0];Te._pictoIsoButton.click(),Te._pictoIsoButton.setAttribute("aria-pressed",!0);let ke=this.to4326(e.coordinate);var Be=Te.getData();Be.point=ke,Te.setData(Be)}displayLegend(e){var Te=this.getMap().getControls().getArray().filter(ke=>ke.CLASSNAME=="Legends")[0];Te.buttonLegendsShow.click(),Te.buttonLegendsShow.setAttribute("aria-pressed",!0)}openCatalogue(e){var Te=this.getMap().getControls().getArray().filter(ke=>ke.CLASSNAME=="Catalog")[0];Te.buttonCatalogShow.click(),Te.buttonCatalogShow.setAttribute("aria-pressed",!0)}displayAdressAndCoordinate(e){let Te=this.to4326(e.coordinate);this.panelPointInfoEntriesContainer.innerHTML="",this._marker.setPosition(fromLonLat(Te)),this.buttonPointInfoShow.click(),this.buttonPointInfoShow.setAttribute("aria-pressed",!0);var ke=document.createElement("div");ke.innerHTML=Te[0].toFixed(6)+", "+Te[1].toFixed(6);var Be=document.createElement("div"),Ue=document.createElement("div"),He=document.createElement("div");this.panelPointInfoEntriesContainer.appendChild(ke),this.panelPointInfoEntriesContainer.appendChild(Be),this.panelPointInfoEntriesContainer.appendChild(Ue),this.panelPointInfoEntriesContainer.appendChild(He);var We={rawResponse:!1,scope:null,onSuccess:function(Sn){Sn.elevations.length>0&&Sn.elevations[0].z&&(He.innerHTML="Altitude : "+Sn.elevations[0].z+"m")},onFailure:function(Sn){},positions:[{lon:Te[0],lat:Te[1]}],outputFormat:"json"};Gp.Services.getAltitude(We);var Cn={onSuccess:function(Sn){Sn.locations.length>0&&(Ue.innerHTML="Parcelle : "+Sn.locations[0].placeAttributes.districtcode+" / "+Sn.locations[0].placeAttributes.section+" / "+Sn.locations[0].placeAttributes.number)},onFailure:function(Sn){},position:{lon:Te[0],lat:Te[1]},searchGeometry:{type:"Circle",coordinates:[Te[0],Te[1]],radius:100},index:"CadastralParcel",maximumResponses:1};Gp.Services.reverseGeocode(Cn);var En=async function(){let Sn={layer:"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST:commune",attributes:["nom"]};const Tn=await OGCRequest.computeGenericGPFWFS(Sn.layer,Sn.attributes,Sn.around||0,Sn.geom_name||"geom",Sn.additional_cql||"",Sn.epsg||4326,Sn.get_geom||!1,Te[0],Te[1]);Tn.length&&(Be.innerHTML=Tn[0])},An={onSuccess:function(Sn){Sn.locations.length>0?Be.innerHTML=Sn.locations[0].placeAttributes.label:En()},onFailure:function(Sn){En()},position:{lon:Te[0],lat:Te[1]},searchGeometry:{type:"Circle",coordinates:[Te[0],Te[1]],radius:100},index:"StreetAddress",maximumResponses:1};Gp.Services.reverseGeocode(An)}onShowPointInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$1.trace(e);var Te=this.buttonPointInfoShow.ariaPressed;this.collapsed=Te!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onClosePointInfoClick(e){logger$1.trace(e),this._marker.setPosition(void 0)}onCloseContextMenu(e){e.target.clear()}onOpenContextMenu(e){var Te=()=>{e.this.controlList=[];var Be=e.this.getMap().getControls().getArray().filter(Ue=>Ue.CLASSNAME=="Route");Be.length>0&&Be[0].on("route:newresults",()=>{e.this.itiPoints=new Array(7)})},ke=e.this.getAvailableContextMenuControls();e.target.clear(),e.target.extend(ke),Te()}};Object.assign(ContextMenu.prototype,ContextMenuDOM);Object.assign(ContextMenu.prototype,ContextMenu);Object.assign(ContextMenu.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ContextMenu=ContextMenu);function useUrlParams(Oe){var e={},Te={};if(Oe){const Ue=new URL(Oe),He=new URLSearchParams(Ue.search);for(const[We,Cn]of He.entries())Te[We]=Cn}else Te=useUrlSearchParams("history");if(Te){const Ue=Object.keys(Te);for(let He=0;He<Ue.length;He++){const We=Ue[He];switch(We){case"c":var ke=Te[We].split(",");e.lon=ke[0],e.lat=ke[1];var Be=fromLonLat(ke);e.x=Be[0],e.y=Be[1],e.center=[e.lon,e.lat];break;case"l":e.layers=Te[We];break;case"w":e.controls=Te[We];break;case"d":e.bookmarks=Te[We];break;case"z":e.zoom=parseInt(Te[We],10);break;case"p":e.geolocation=Te[We]}}}return e}const useControls={OverviewMap:{id:"OverviewMap",active:!0,disable:!0,analytic:!0},SearchEngine:{id:"SearchEngine",active:!0,disable:!0,analytic:!1},ScaleLine:{id:"ScaleLine",active:!0,disable:!0,analytic:!1},LayerSwitcher:{id:"LayerSwitcher",active:!0,disable:!0,analytic:!0},GetFeatureInfo:{id:"GetFeatureInfo",active:!0,disable:!0,analytic:!0},Legends:{id:"Legends",active:!0,disable:!0,analytic:!0},Drawing:{id:"Drawing",active:!0,disable:!1,analytic:!0},Isocurve:{id:"Isocurve",active:!0,disable:!1,analytic:!0},ReverseGeocode:{id:"ReverseGeocode",active:!0,disable:!1,analytic:!0},Zoom:{id:"Zoom",active:!0,disable:!0,analytic:!1},Route:{id:"Route",active:!0,disable:!1,analytic:!0},FullScreen:{id:"FullScreen",active:!0,disable:!0,analytic:!1},MeasureLength:{id:"MeasureLength",active:!0,disable:!1,analytic:!0},MeasureArea:{id:"MeasureArea",active:!0,disable:!1,analytic:!0},MeasureAzimuth:{id:"MeasureAzimuth",active:!0,disable:!1,analytic:!0},Share:{id:"Share",active:!0,disable:!0,analytic:!0},Print:{id:"Print",active:!0,disable:!0,analytic:!0},MousePosition:{id:"MousePosition",active:!0,disable:!1,analytic:!1},Territories:{id:"Territories",active:!0,disable:!0,analytic:!0},ElevationPath:{id:"ElevationPath",active:!0,disable:!1,analytic:!1},LayerImport:{id:"LayerImport",active:!0,disable:!0,analytic:!0},ControlList:{id:"ControlList",active:!0,disable:!0,analytic:!0},ContextMenu:{id:"ContextMenu",active:!0,disable:!0,analytic:!0}};function useDefaultControls(){var Oe=[];for(var e in useControls)useControls[e].active===!0&&useControls[e].disable===!0&&Oe.push(useControls[e].id);return Oe}function useControlsMenuOptions(){return[{label:"Barre de Recherche",id:"searchEngine",name:useControls.SearchEngine.id,hint:"Barre de recherche sur la carte",disabled:useControls.SearchEngine.disable},{label:"Mini carte",id:"overview",name:useControls.OverviewMap.id,hint:"Petite carte pour se repérer",disabled:useControls.OverviewMap.disable},{label:"Scale Line",id:"scaleLine",name:useControls.ScaleLine.id,hint:"Echelle",disabled:useControls.ScaleLine.disable},{label:"Gestionnaire de couches",id:"layerSwitcher",name:useControls.LayerSwitcher.id,hint:"Gestionnaire de couches",disabled:useControls.LayerSwitcher.disable},{label:"GetFeatureInfo",id:"getFeatureInfo",name:useControls.GetFeatureInfo.id,hint:"Informations sur les couches",disabled:useControls.GetFeatureInfo.disable},{label:"Légendes",id:"legends",name:useControls.Legends.id,hint:"Légendes",disabled:useControls.Legends.disable},{label:"Croquis",id:"drawing",name:useControls.Drawing.id,hint:"Annoter la carte",disabled:useControls.Drawing.disable},{label:"Geocodage inverse",id:"reverseGeocode",name:useControls.ReverseGeocode.id,hint:"Geocodage inverse",disabled:useControls.ReverseGeocode.disable},{label:"Calcul d'isochrone",id:"isocurve",name:useControls.Isocurve.id,hint:"Calcul d'isochrone",disabled:useControls.Isocurve.disable},{label:"Calcul d'itinéraire",id:"route",name:useControls.Route.id,hint:"Calcul d'itinéraire",disabled:useControls.Route.disable},{label:"Zoom",id:"zoom",name:useControls.Zoom.id,hint:"Zoom",disabled:useControls.Zoom.disable},{label:"Plein écran",id:"fullscreen",name:useControls.FullScreen.id,hint:"Plein écran",disabled:useControls.FullScreen.disable},{label:"Mesure de distance",id:"measureLength",name:useControls.MeasureLength.id,hint:"Mesures",disabled:useControls.MeasureLength.disable},{label:"Mesure d'aire",id:"measureArea",name:useControls.MeasureArea.id,hint:"Mesures",disabled:useControls.MeasureArea.disable},{label:"Mesure d'azimut",id:"measureAzimuth",name:useControls.MeasureAzimuth.id,hint:"Mesures",disabled:useControls.MeasureAzimuth.disable},{label:"Partager une carte",id:"share",name:useControls.Share.id,hint:"Partages",disabled:useControls.Share.disable},{label:"Afficher les coordonnées",id:"mousePosition",name:useControls.MousePosition.id,hint:"Position de la souris",disabled:useControls.MousePosition.disable},{label:"Selectionner un territoire",id:"territories",name:useControls.Territories.id,hint:"Territoires",disabled:useControls.Territories.disable},{label:"Profil altimétrique",id:"elevationPath",name:useControls.ElevationPath.id,hint:"Profil altimétrique",disabled:useControls.ElevationPath.disable},{label:"Importer des données",id:"layerImport",name:useControls.LayerImport.id,hint:"Import de données",disabled:useControls.LayerImport.disable},{label:"Imprimer une carte",id:"print",name:useControls.Print.id,hint:"Impression",disabled:useControls.Print.disable},{label:"Liste des controles",id:"controlList",name:useControls.ControlList.id,hint:"Liste des controles supplémentaires non affichés",disabled:useControls.ControlList.disable},{label:"Menu contextuel",id:"contextMenu",name:useControls.ContextMenu.id,hint:"Menu contextuel au clic droit sur la carte",disabled:useControls.ContextMenu.disable}].filter(Oe=>Object.keys(useControls).includes(Oe.name)).filter(Oe=>!Oe.disabled)}function useControlsExtensionPosition(){return{shareOptions:"top-left",printOptions:"top-right",territoriesOptions:"bottom-left",layerSwitcherOptions:"top-right",legendsOptions:"top-right",getFeatureInfoOptions:"bottom-left",overviewMapOptions:"bottom-left",zoomOptions:"bottom-right",controlListOptions:"top-right",isocurveOptions:"top-right",routeOptions:"top-right",reverseGeocodeOptions:"top-right",fullscreenOptions:"bottom-right",measureLengthOptions:"top-right",measureAreaOptions:"top-right",measureAzimuthOptions:"top-right",elevationPathOptions:"top-right",layerImportOptions:"top-right",mousePositionOptions:"top-right",drawingOptions:"top-right"}}function useControlsPosition(){let Oe=[],e=[];return useControlsExtensionPosition().shareOptions.includes("left")&&Oe.push(useControls.Share.id),useControlsExtensionPosition().shareOptions.includes("right")&&e.push(useControls.Share.id),useControlsExtensionPosition().printOptions.includes("left")&&Oe.push(useControls.Print.id),useControlsExtensionPosition().printOptions.includes("right")&&e.push(useControls.Print.id),useControlsExtensionPosition().layerSwitcherOptions.includes("left")&&Oe.push(useControls.LayerSwitcher.id),useControlsExtensionPosition().layerSwitcherOptions.includes("right")&&e.push(useControls.LayerSwitcher.id),useControlsExtensionPosition().legendsOptions.includes("left")&&Oe.push(useControls.Legends.id),useControlsExtensionPosition().legendsOptions.includes("right")&&e.push(useControls.Legends.id),useControlsExtensionPosition().routeOptions.includes("left")&&Oe.push(useControls.Route.id),useControlsExtensionPosition().routeOptions.includes("right")&&e.push(useControls.Route.id),useControlsExtensionPosition().isocurveOptions.includes("left")&&Oe.push(useControls.Isocurve.id),useControlsExtensionPosition().isocurveOptions.includes("right")&&e.push(useControls.Isocurve.id),useControlsExtensionPosition().reverseGeocodeOptions.includes("left")&&Oe.push(useControls.ReverseGeocode.id),useControlsExtensionPosition().reverseGeocodeOptions.includes("right")&&e.push(useControls.ReverseGeocode.id),useControlsExtensionPosition().drawingOptions.includes("left")&&Oe.push(useControls.Drawing.id),useControlsExtensionPosition().drawingOptions.includes("right")&&e.push(useControls.Drawing.id),useControlsExtensionPosition().getFeatureInfoOptions.includes("left")&&Oe.push(useControls.GetFeatureInfo.id),useControlsExtensionPosition().getFeatureInfoOptions.includes("right")&&e.push(useControls.GetFeatureInfo.id),useControlsExtensionPosition().territoriesOptions.includes("left")&&Oe.push(useControls.Territories.id),useControlsExtensionPosition().territoriesOptions.includes("right")&&e.push(useControls.Territories.id),useControlsExtensionPosition().measureLengthOptions.includes("left")&&Oe.push(useControls.MeasureLength.id),useControlsExtensionPosition().measureLengthOptions.includes("right")&&e.push(useControls.MeasureLength.id),useControlsExtensionPosition().measureAreaOptions.includes("left")&&Oe.push(useControls.MeasureArea.id),useControlsExtensionPosition().measureAreaOptions.includes("right")&&e.push(useControls.MeasureArea.id),useControlsExtensionPosition().measureAzimuthOptions.includes("left")&&Oe.push(useControls.MeasureAzimuth.id),useControlsExtensionPosition().measureAzimuthOptions.includes("right")&&e.push(useControls.MeasureAzimuth.id),useControlsExtensionPosition().mousePositionOptions.includes("left")&&Oe.push(useControls.MousePosition.id),useControlsExtensionPosition().mousePositionOptions.includes("right")&&e.push(useControls.MousePosition.id),useControlsExtensionPosition().elevationPathOptions.includes("left")&&Oe.push(useControls.ElevationPath.id),useControlsExtensionPosition().elevationPathOptions.includes("right")&&e.push(useControls.ElevationPath.id),useControlsExtensionPosition().layerImportOptions.includes("left")&&Oe.push(useControls.LayerImport.id),useControlsExtensionPosition().layerImportOptions.includes("right")&&e.push(useControls.LayerImport.id),useControlsExtensionPosition().controlListOptions.includes("left")&&Oe.push(useControls.ControlList.id),useControlsExtensionPosition().controlListOptions.includes("right")&&e.push(useControls.ControlList.id),{left:Oe,right:e}}var defaultControls=useDefaultControls();const DEFAULT={LAYERS:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2$GEOPORTAIL:OGC:WMTS(1;1;0)",CONTROLS:defaultControls.toString(),X:283734.248995,Y:565511710065e-5,LON:2.5479878714752027,LAT:50.800781249995744,ZOOM:12,FIRSTVISIT:!1,NOINFORMATION:null},NAMESPACE="cartes.gouv.fr",ns=Oe=>NAMESPACE+"."+Oe,useMapStore=defineStore("map",()=>{const Oe=inject("emitter"),e=ref({});var Te=useUrlParams(),ke=DEFAULT.CONTROLS.split(",");for(const cr in Te)if(Object.prototype.hasOwnProperty.call(Te,cr)){if(cr==="controls"){var Be=Te[cr].split(",");ke.forEach(function(vr){Be.includes(vr)||(Te[cr]=Te[cr]+","+vr)})}const gr=Te[cr];localStorage.setItem(ns(cr),gr)}setTimeout(()=>{if(localStorage.getItem(ns("geolocation"))!==""){var cr=localStorage.getItem(ns("geolocation")).split(",");Oe.dispatchEvent("searchengine:open:displayed",{position:cr})}},100);var Ue=useStorage(ns("zoom"),DEFAULT.ZOOM),He=useStorage(ns("x"),DEFAULT.X),We=useStorage(ns("y"),DEFAULT.Y),Cn=useStorage(ns("lon"),DEFAULT.LON),En=useStorage(ns("lat"),DEFAULT.LAT),An=useStorage(ns("firstVisit"),DEFAULT.FIRSTVISIT),Sn=useStorage(ns("noInformation"),DEFAULT.NOINFORMATION),Tn=useStorage(ns("geolocation"),""),Ln=computed(()=>{var cr="",gr=location.pathname.slice(-1),vr=gr==="/"?location.pathname.slice(0,-1):location.pathname,Fr=location.origin+vr.replace("/embed","");return cr=`${Fr}?c=${ei.value}&z=${Math.round(Ue.value)}`,Tn.value!==""&&(cr+=`&p=${Tn.value}`),cr+=li.value.length>0?`&l=${ti.value}&w=${si.value}&d=${li.value.replace(/%26s%3D1/g,"")}`:`&l=${ti.value}&w=${si.value}`,cr+"&permalink=yes"}),Bn=computed(()=>{var cr="",gr=location.pathname.slice(-1),vr=gr==="/"?location.pathname.slice(0,-1):location.pathname,Fr=location.origin+(vr.includes("/embed")?vr:vr+"/embed");return cr=`${Fr}?c=${ei.value}&z=${Math.round(Ue.value)}`,Tn.value!==""&&(cr+=`&p=${Tn.value}`),cr+=li.value.length>0?`&l=${ti.value}&d=${li.value.replace(/%26s%3D1/g,"")}`:`&l=${ti.value}`,cr+"&permalinkShare=yes"}),ei=computed(()=>[Cn.value,En.value]),ti=useStorage(ns("layers"),DEFAULT.LAYERS);if(!ti.value){var ni=DEFAULT.LAYERS.split(",").filter(function(cr){return!!cr});for(let cr=0;cr<ni.length;cr++){var ri=ni[cr].replace(/\(.*\)/,"");ri&&Fi(ri)}}var si=useStorage(ns("controls"),DEFAULT.CONTROLS);if(!si.value){var ai=DEFAULT.CONTROLS.split(",").filter(function(cr){return!!cr});for(let cr=0;cr<ai.length;cr++)_r(ai[cr])}var li=useStorage(ns("bookmarks"),"");li.value||(li.value=""),localStorage.setItem(ns("center"),ei.value),localStorage.setItem(ns("permalink"),Ln.value),localStorage.setItem(ns("permalinkShare"),Bn.value),watch(Ue,()=>{localStorage.setItem(ns("zoom"),Math.round(Ue.value))}),watch(He,()=>{localStorage.setItem(ns("x"),He.value)}),watch(We,()=>{localStorage.setItem(ns("y"),We.value)}),watch(Cn,()=>{localStorage.setItem(ns("lon"),Cn.value)}),watch(En,()=>{localStorage.setItem(ns("lat"),En.value)}),watch(ti,()=>{localStorage.setItem(ns("layers"),ti.value.toString())}),watch(Ln,()=>{localStorage.setItem(ns("permalink"),Ln.value.toString())}),watch(Bn,()=>{localStorage.setItem(ns("permalinkShare"),Bn.value.toString())}),watch(ei,()=>{localStorage.setItem(ns("center"),ei.value.toString())}),watch(An,()=>{localStorage.setItem(ns("firstVisit"),An.value)}),watch(Sn,()=>{localStorage.setItem(ns("noInformation"),Sn.value)}),watch(si,()=>{localStorage.setItem(ns("controls"),si.value.toString())}),watch(li,()=>{localStorage.setItem(ns("bookmarks"),li.value.toString())}),watch(Tn,()=>{localStorage.setItem(ns("geolocation"),Tn.value.toString())});function Pi(){return e.value}function pi(cr){e.value=cr}function vi(){return ti.value.split(",").map(function(cr){const gr=/\(.*\)/gm;return cr.replace(gr,"")}).filter(cr=>cr!="")}function Ri(){ti.value=""}function Fi(cr){if(cr&&!vi().includes(cr)){var gr=ti.value===""?[]:ti.value.split(",");gr.push(cr+"(1;1;0)"),ti.value=gr.toString()}}function di(cr){const gr=vi().indexOf(cr);if(gr!==-1){var vr=ti.value.split(",");vr.splice(gr,1),ti.value=vr.toString()}}function ci(cr,gr){const vr=vi().indexOf(cr);if(vr!==-1){var Fr=ti.value.split(","),zr=Fr[vr],tr=zr.substring(zr.indexOf("(")+1,zr.indexOf(")")),fr=tr.split(";");for(const ar in gr)if(Object.prototype.hasOwnProperty.call(gr,ar)){const nr=gr[ar];ar==="opacity"&&(fr[0]=nr),ar==="visible"&&(fr[1]=+nr),ar==="gray"&&(fr[2]=+nr)}ti.value=ti.value.replace(Fr[vr],cr+"("+fr.join(";")+")")}}function Mi(cr){if(cr){var gr=[];for(let Fr=0;Fr<cr.length;Fr++){const zr=cr[Fr],tr=vi().indexOf(zr);if(tr!==-1){var vr=ti.value.split(",")[tr];gr.push(vr)}}ti.value=gr.join(",")}}function Oi(cr){const gr=vi().indexOf(cr);if(gr!==-1){var vr=ti.value.split(","),Fr=vr[gr],zr=Fr.substring(Fr.indexOf("(")+1,Fr.indexOf(")")),tr=zr.split(";");return{opacity:Number(tr[0]),visible:!!Number(tr[1]),gray:!!Number(tr[2])}}}function Hi(){return li.value.split(",")}function Ki(){return li.value.split(",").map(cr=>decodeURIComponent(cr).split("?")[0])}function or(){return li.value.split(",").map(cr=>{var gr=decodeURIComponent(cr).split("?")[1],vr=new URLSearchParams(gr),Fr=vr.get("i");return Fr||(Fr=decodeURIComponent(cr).split("?")[0].split(".")[0]),Fr})}function sr(cr){if(cr){var gr=decodeURIComponent(cr).split("?")[0];if(!Ki().includes(gr)){var vr=li.value===""?[]:li.value.split(","),Fr=encodeURIComponent(cr);vr.push(Fr),li.value=vr.toString()}}}function Cr(cr){var gr=decodeURIComponent(cr).split("?")[0];const vr=Ki().indexOf(gr);if(vr!==-1){var Fr=li.value.split(",");Fr.splice(vr,1),li.value=Fr.toString()}}function pr(cr){const gr=or().indexOf(cr);if(gr!==-1){var vr=li.value.split(",");vr.splice(gr,1),li.value=vr.toString()}}function wr(cr){var gr=cr.split("?")[0];const vr=Ki().indexOf(gr);if(vr!==-1){var Fr=li.value.split(",");Fr[vr]=encodeURIComponent(cr),li.value=Fr.toString()}}function Li(cr,gr){const vr=or().indexOf(cr);if(vr!==-1){var Fr=li.value.split(","),zr=decodeURIComponent(Fr[vr]),tr=new URLSearchParams(zr.split("?")[1]);for(const fr in gr)if(Object.prototype.hasOwnProperty.call(gr,fr)){const ar=gr[fr];tr.set(fr,ar)}Fr[vr]=encodeURIComponent(zr.split("?")[0]+"?"+tr.toString()),li.value=Fr.toString()}}function er(cr){var gr={};if(Ki().indexOf(cr.split("?")[0])!==-1){var Fr=new URLSearchParams(cr.split("?")[1]);Fr.forEach((zr,tr)=>{gr[tr]=zr})}return gr}function hr(){return si.value.split(",").filter(function(cr){return!!cr})}function mr(){si.value=""}function _r(cr){if(!hr().includes(cr)){var gr=si.value===""?[]:si.value.split(",");gr.push(cr),si.value=gr.toString()}}function dr(cr){const gr=hr().indexOf(cr);if(gr!==-1){var vr=si.value.split(",");vr.splice(gr,1),si.value=vr.toString()}}return{map:e,layers:ti,controls:si,bookmarks:li,zoom:Ue,center:ei,x:He,y:We,lon:Cn,lat:En,firstVisit:An,noInformation:Sn,permalink:Ln,permalinkShare:Bn,geolocation:Tn,getMap:Pi,setMap:pi,getLayers:vi,cleanLayers:Ri,addLayer:Fi,removeLayer:di,updateLayerProperty:ci,updateLayerPosition:Mi,getLayerProperty:Oi,getBookmarks:Hi,addBookmark:sr,removeBookmark:Cr,removeBookmarkByID:pr,updateBookmark:wr,updateBookmarkPropertyByID:Li,getBookmarkProperty:er,getControls:hr,cleanControls:mr,addControl:_r,removeControl:dr}}),mainMap="mainMap",printMap="printMap",_hoisted_1$j=["id"],__default__$v={name:"Map"},_sfc_main$V=Object.assign(__default__$v,{props:{mapId:String},setup(Oe,{expose:e}){const Te=useMapStore(),ke=Oe,Be=ref(null),Ue=new Map$1({target:ke.mapId,controls:[]});Ue.on("loadstart",function(){Ue.getTargetElement().classList.add("spinner")}),Ue.on("loadend",function(){Ue.getTargetElement().classList.remove("spinner")}),provide(ke.mapId,Ue),onMounted(()=>{CRS.loadByDefault(),Ue.setTarget(Be.value);const Cn=Be.value.getElementsByTagName("canvas");Cn.length&&(Cn[0].tabIndex=0),ke.mapId==mainMap&&Te.setMap(Ue)});const He=()=>{document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="SELECT"&&Be.value.focus()};return e({mapRef:Be,updateSize:()=>{Ue.updateSize()}}),(Cn,En)=>(openBlock(),createElementBlock("div",{id:Oe.mapId,ref_key:"mapRef",ref:Be,tabindex:"0",onMouseover:He},[renderSlot(Cn.$slots,"default")],40,_hoisted_1$j))}}),__default__$u={name:"View"},_sfc_main$U=Object.assign(__default__$u,{props:{zoom:Number,center:Array,mapId:String},setup(Oe){const e=useMapStore(),Te=Oe,ke=inject(Te.mapId),Be=new View({zoom:Te.zoom,center:fromLonLat(Te.center)});return Be.on("change:center",Ue=>{if(Te.mapId==mainMap){e.x=Ue.target.getCenter()[0],e.y=Ue.target.getCenter()[1];var He=toLonLat(Ue.target.getCenter());e.lon=He[0],e.lat=He[1]}}),Be.on("change:resolution",Ue=>{e.zoom=Be.getZoom()}),onMounted(()=>{ke&&ke.setView(Be)}),(Ue,He)=>null}}),useDataStore=defineStore("data",()=>{const Oe=ref({}),e=ref({}),Te=ref({}),ke=ref({}),Be=ref({}),Ue=ref([]),He=ref([]),We=ref(!1),Cn=ref(""),En="WMTS,WMS,TMS",An="IGNF:LAMB93,EPSG:2154",Sn=ref([]),Tn=ref([]),Ln=computed(()=>{let wr=[];return wr=[...new Set(Object.values(e.value).flatMap(Li=>(Li==null?void 0:Li.thematic)||[]).filter(Li=>typeof Li=="string"))].sort((Li,er)=>Li==="Autres"?1:er==="Autres"?-1:Li.localeCompare(er,"fr",{sensitivity:"base"})),wr=wr.map(Li=>[Li,ai(Li)]),wr}),Bn=computed(()=>{let wr=[];return wr=[...new Set(Object.values(e.value).flatMap(Li=>(Li==null?void 0:Li.producer)||[]).filter(Li=>typeof Li=="string"))].sort((Li,er)=>Li==="Autres"?1:er==="Autres"?-1:Li.localeCompare(er,"fr",{sensitivity:"base"})),wr.map(Li=>[Li,Pi(Li)])});async function ei(){try{const wr=window.__ENV__.VITE_GPF_CONF_ENTREE_CARTO,er=await(await fetch(wr)).json();return Ue.value=er.territories,Be.value=er.contacts,Oe.value=er.informations,He.value=er.featured||[],e.value=er.layers,Te.value.apiKeys={...er.generalOptions.apiKeys},ke.value=er.tileMatrixSets,this.isLoaded=!0,er.layers}catch(wr){console.log(wr),this.isLoaded=!1,Cn.value=wr.message}}function ti(){return Ue.value}function ni(){return Be.value}function ri(){return Oe.value}function si(){return Ln.value}function ai(wr){return Object.keys(e.value).filter(Li=>e.value[Li].thematic.includes(wr)).map(Li=>Li)}function li(){return Bn.value}function Pi(wr){return Object.keys(e.value).filter(Li=>e.value[Li].producer.includes(wr)).map(Li=>Li)}function pi(){return He.value}function vi(){return e.value}function Ri(){return Object.fromEntries(Object.entries(e.value).map(([wr,Li])=>[Li.name,Li.serviceParams.id.split(":")[1]]))}function Fi(wr,Li){for(const er in e.value)if(Object.hasOwnProperty.call(e.value,er)){const hr=e.value[er];if(hr.name===wr&&hr.serviceParams.id.split(":")[1]===Li)return hr.name+"$GEOPORTAIL:"+hr.serviceParams.id}}function di(wr,Li){const er=this.getLayerIdByName(wr,Li);return this.getLayerByID(er)}function ci(wr){return e.value[wr]}function Mi(wr){return Object.values(e.value).filter(Li=>{if(wr&&Li.title==wr)return Li})}function Oi(wr){var Li=[],er=Te.value.apiKeys;for(var hr in er){var mr=er[hr];mr.forEach(function(_r){_r===wr&&Li.push(hr)})}return Li}function Hi(wr,Li){var er=null;if((Li==="WMS"||Object.keys(this.getTileMatrixSets()).length!==0)&&Object.keys(this.getLayers()).length!==0){var hr=this.getLayerIdByName(wr,Li);er=this.getLayerParamsByID(hr)}return er}function Ki(wr){var Li=null;if(wr){Li={};var er=this.getLayerByID(wr),hr=this.getLayerKeysByID(wr);if(hr.length===0)return;for(var mr=0;mr<hr.length;mr++)er.serviceParams.serverUrl[hr[mr]]&&(Li.url=er.serviceParams.serverUrl[hr[mr]]);if(/\/v\//.test(Li.url)?Li.styles=" ":Li.styles=er.styles[0].name,Li.version=er.serviceParams.version,Li.format=er.formats[0].name,Li.projection=er.defaultProjection,Li.minScale=er.globalConstraint.minScaleDenominator,Li.maxScale=er.globalConstraint.maxScaleDenominator,Li.extent=er.globalConstraint.bbox,Li.legends=er.legends,Li.title=er.title,Li.description=er.description,er.wmtsOptions){Li.tileMatrixSetLimits=er.wmtsOptions.tileMatrixSetLimits;var _r=er.wmtsOptions.tileMatrixSetLink;if(_r){Li.TMSLink=_r;var dr=this.getTileMatrixSetByID(_r);Li.matrixIds=Object.keys(dr.tileMatrices),Li.tileMatrices=dr.tileMatrices,Li.nativeResolutions=dr.nativeResolutions}}}return Li}function or(wr){var Li=null;if(wr){var er=this.getLayerByID(wr);Li={},Li.projection=er.defaultProjection,Li.minScale=er.globalConstraint.minScaleDenominator,Li.maxScale=er.globalConstraint.maxScaleDenominator,Li.extent=er.globalConstraint.bbox}return Li}function sr(wr,Li){var er=this.getLayerIdByName(wr,Li);return this.getGlobalConstraintsByID(er)}function Cr(){return ke.value}function pr(wr){return ke.value[wr]}return{error:Cn,isLoaded:We,filterProjections:An,filterServices:En,producers:Tn,themes:Sn,fetchData:ei,getTerritories:ti,getContacts:ni,getInformations:ri,getLayersByThematic:ai,getThematics:si,getLayersByProducer:Pi,getProducers:li,getFeatured:pi,getLayers:vi,getLayersSignatures:Ri,getLayerKeysByID:Oi,getLayerIdByName:Fi,getLayerByName:di,getLayerByID:ci,getLayerByTitle:Mi,getTileMatrixSets:Cr,getTileMatrixSetByID:pr,getLayerParamsByName:Hi,getLayerParamsByID:Ki,getGlobalConstraintsByID:or,getGlobalConstraintsByName:sr}}),_sfc_main$T={__name:"SearchEngine",props:{mapId:String,visibility:Boolean,analytic:Boolean,searchEngineOptions:Object},setup(Oe){const e=inject("emitter"),Te=Oe,ke=distExports.useLogger(),Be=useMapStore(),Ue=useDataStore(),He=inject(Te.mapId),We=ref(new SearchEngine(Te.searchEngineOptions));onMounted(()=>{Te.visibility&&(He.addControl(We.value),We.value.on("searchengine:search:click",Cn),We.value.on("searchengine:autocomplete:click",En),We.value.on("searchengine:geocode:click",An),We.value.on("searchengine:coordinates:click",Sn),We.value.on("searchengine:geolocation:click",Tn),We.value.on("searchengine:geolocation:remove",Ln))}),onBeforeUpdate(()=>{Te.visibility||He.removeControl(We.value)}),onUpdated(()=>{Te.visibility&&He.addControl(We.value)}),onUnmounted(()=>{}),e.addEventListener("searchengine:open:displayed",Bn=>{if(We.value){var ei=Bn.position,ti=`<h6> Ma position </h6> longitude : ${ei[0]}<br/> latitude : ${ei[1]}`;We.value._setMarker(fromLonLat(Bn.position),ti)}});const Cn=Bn=>{var ei=Ue.getLayerIdByName(Bn.suggest.name,Bn.suggest.service);Be.addLayer(ei),ke.debug("onClickSearch",ei)},En=Bn=>{},An=Bn=>{},Sn=Bn=>{},Tn=Bn=>{Be.geolocation=toLonLat(Bn.coordinates).toString()},Ln=Bn=>{Be.geolocation=""};return(Bn,ei)=>null}},UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const Te=document.createElement("div");Te.style.pointerEvents="none",super({element:Te,render:e.render,target:e.target}),this.on,this.once,this.un;const ke=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=ke+"-inner",this.element.className=ke+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const Te=e.center,ke=e.projection,Be=this.getUnits(),Ue=Be=="degrees"?"degrees":"m";let He=getPointResolution(ke,e.resolution,Te,Ue);const We=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,Cn=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let En=We*He,An="";if(Be=="degrees"){const si=METERS_PER_UNIT$1.degrees;En*=si,En<si/60?(An="″",He*=3600):En<si?(An="′",He*=60):An="°"}else if(Be=="imperial")En<.9144?(An="in",He/=.0254):En<1609.344?(An="ft",He/=.3048):(An="mi",He/=1609.344);else if(Be=="nautical")He/=1852,An="NM";else if(Be=="metric")En<1e-6?(An="nm",He*=1e9):En<.001?(An="μm",He*=1e6):En<1?(An="mm",He*=1e3):En<1e3?An="m":(An="km",He/=1e3);else if(Be=="us")En<.9144?(An="in",He*=39.37):En<1609.344?(An="ft",He/=.30480061):(An="mi",He/=1609.3472);else throw new Error("Invalid units");let Sn=3*Math.floor(Math.log(We*He)/Math.log(10)),Tn,Ln,Bn,ei=0,ti,ni;for(;;){Bn=Math.floor(Sn/3);const si=Math.pow(10,Bn);if(Tn=LEADING_DIGITS[(Sn%3+3)%3]*si,Ln=Math.round(Tn/He),isNaN(Ln)){this.element.style.display="none",this.renderedVisible_=!1;return}if(Cn!==void 0&&Ln>=Cn){Tn=ei,Ln=ti,Bn=ni;break}else if(Ln>=We)break;ei=Tn,ti=Ln,ni=Bn,++Sn}const ri=this.scaleBar_?this.createScaleBar(Ln,Tn,An):Tn.toFixed(Bn<0?-Bn:0)+" "+An;this.renderedHTML_!=ri&&(this.innerElement_.innerHTML=ri,this.renderedHTML_=ri),this.renderedWidth_!=Ln&&(this.innerElement_.style.width=Ln+"px",this.renderedWidth_=Ln),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,Te,ke){const Be=this.getScaleForResolution(),Ue=Be<1?Math.round(1/Be).toLocaleString()+" : 1":"1 : "+Math.round(Be).toLocaleString(),He=this.scaleBarSteps_,We=e/He,Cn=[this.createMarker("absolute")];for(let An=0;An<He;++An){const Sn=An%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";Cn.push(`<div><div class="ol-scale-singlebar ${Sn}" style="width: ${We}px;"></div>`+this.createMarker("relative")+(An%2===0||He===2?this.createStepText(An,e,!1,Te,ke):"")+"</div>")}return Cn.push(this.createStepText(He,e,!0,Te,ke)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+Ue+"</div>":"")+Cn.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,Te,ke,Be,Ue){const We=(e===0?0:Math.round(Be/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+Ue),Cn=e===0?-3:Te/this.scaleBarSteps_*-1,En=e===0?0:Te/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${Cn}px;text-align: ${e===0?"left":"center"};min-width: ${En}px;left: ${ke?Te+"px":"unset"};">`+We+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),Te=this.dpi_||DEFAULT_DPI,ke=1e3/25.4;return e*ke*Te}render(e){const Te=e.frameState;Te?this.viewState_=Te.viewState:this.viewState_=null,this.updateElement_()}}const _sfc_main$S={__name:"ScaleLine",props:{mapId:String,visibility:Boolean,analytic:Boolean,scaleLineOptions:Object},setup(Oe){const e=Oe,Te=inject(e.mapId),ke=ref(new ScaleLine(e.scaleLineOptions));return onMounted(()=>{e.visibility&&Te.addControl(ke.value)}),onBeforeUpdate(()=>{e.visibility||Te.removeControl(ke.value)}),onUpdated(()=>{e.visibility&&Te.addControl(ke.value)}),(Be,Ue)=>null}};function useActionButtonEulerian(Oe){Oe.setAttribute("data-fr-analytics-action",Oe.title),Oe.setAttribute("data-fr-js-button-actionee",!0)}const _sfc_main$R={__name:"OverviewMap",props:{mapId:String,visibility:Boolean,analytic:Boolean,overviewMapOptions:Object},setup(Oe){const e=Oe,Te=distExports.useLogger(),ke=inject(e.mapId),Be=ref(new GeoportalOverviewMap(e.overviewMapOptions)),Ue=useMatchMedia("SM");watch(Ue,()=>{if(e.visibility&&!Ue.value){if(ke.addControl(Be.value),e.analytic){var We=Be.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(We)}}else ke.removeControl(Be.value)}),onMounted(()=>{if(e.visibility&&!Ue.value&&(ke.addControl(Be.value),Be.value.on("overviewmap:toggle",He),e.analytic)){var We=Be.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(We)}}),onBeforeUpdate(()=>{if(e.visibility&&!Ue.value){if(ke.addControl(Be.value),e.analytic){var We=Be.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(We)}}else ke.removeControl(Be.value)});function He(We){Te.debug(We)}return(We,Cn)=>null}},_sfc_main$Q={__name:"Zoom",props:{mapId:String,visibility:Boolean,analytic:Boolean,zoomOptions:Object},setup(Oe){const e=Oe,Te=distExports.useLogger(),ke=inject(e.mapId),Be=ref(new GeoportalZoom(e.zoomOptions));onMounted(()=>{e.visibility&&(ke.addControl(Be.value),Be.value.on("zoom:in",Ue),Be.value.on("zoom:out",He))}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Be.value)}),onUpdated(()=>{e.visibility&&ke.addControl(Be.value)});function Ue(We){Te.debug(We)}function He(We){Te.debug(We)}return(We,Cn)=>null}},_sfc_main$P={__name:"LayerSwitcher",props:{mapId:String,visibility:Boolean,analytic:Boolean,layerSwitcherOptions:Object},setup(Oe){const e=Oe,Te=distExports.useLogger(),ke=useMapStore(),Be=useDataStore(),Ue=inject("emitter");inject("services");const He=inject(e.mapId),We=ref(new LayerSwitcher(e.layerSwitcherOptions));onMounted(()=>{if(e.visibility){if(He.addControl(We.value),e.analytic){var ei=We.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(ei)}We.value.on("layerswitcher:add",Cn),We.value.on("layerswitcher:remove",En),We.value.on("layerswitcher:edit",Bn),We.value.on("layerswitcher:extent",An),We.value.on("layerswitcher:change:opacity",Sn),We.value.on("layerswitcher:change:visibility",Tn),We.value.on("layerswitcher:change:position",Ln)}}),onBeforeUpdate(()=>{if(!e.visibility&&(He.removeControl(We.value),e.analytic)){var ei=We.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(ei)}}),onUpdated(()=>{e.visibility&&He.addControl(We.value)});const Cn=ei=>{Te.debug("onAddLayer",ei);var ti=ei.layer,ni=null;if(ti.name&&ti.service)ni=Be.getLayerIdByName(ti.name,ti.service);else{var ri=ti.layer.gpResultLayerId;ni=ri,ri&&(ti.layer.gpResultLayerDiv=ti.div,ri.startsWith("bookmark")&&(ni=ri.split(":").pop()))}Te.debug("onAddLayer",ni),ni?push$1.success({title:t.layerswitcher.title,message:t.layerswitcher.add_success}):push$1.warning({title:t.layerswitcher.title,message:t.layerswitcher.add_failed})},En=ei=>{Te.debug("onRemoveLayer",ei);var ti=ei.layer,ni=null;if(ti.name&&ti.service)ni=Be.getLayerIdByName(ti.name,ti.service),ni&&ke.removeLayer(ni);else{var ri=ti.layer.gpResultLayerId;ri&&(ni=ri.split(":").pop(),ri.startsWith("bookmark")&&ni&&ke.removeBookmarkByID(ni))}Te.debug("onRemoveLayer",ni),ni?push$1.success({title:t.layerswitcher.title,message:t.layerswitcher.remove_success}):push$1.warning({title:t.layerswitcher.title,message:t.layerswitcher.remove_failed})},An=ei=>{Te.debug("onZoomToExtentLayer",ei);var ti=ei.layer;if(ei.error){var ni=Be.getGlobalConstraintsByName(ti.name,ti.service);if(ni){var ri=He.getView(),si=ri.getProjection(),ai=[ni.extent.left,ni.extent.bottom,ni.extent.right,ni.extent.top],li=ni.crs;li||(li="EPSG:4326");var Pi=transformExtent(ai,li,si);Pi&&ri.fit(Pi)}}},Sn=ei=>{Te.debug("onChangeOpacityLayer",ei);var ti=ei.layer,ni=null;if(ti.name&&ti.service)ni=Be.getLayerIdByName(ti.name,ti.service),ni&&ke.updateLayerProperty(ni,{opacity:ei.opacity});else{var ri=ti.layer.gpResultLayerId;ri&&ri.startsWith("bookmark")&&(ni=ri.split(":").pop(),ni&&ke.updateBookmarkPropertyByID(ni,{opacity:ei.opacity}))}},Tn=ei=>{Te.debug("onChangeVisibilityLayer",ei);var ti=ei.layer,ni=null;if(ti.name&&ti.service)ni=Be.getLayerIdByName(ti.name,ti.service),ni&&ke.updateLayerProperty(ni,{visible:ei.visibility});else{var ri=ti.layer.gpResultLayerId;ri&&ri.startsWith("bookmark")&&(ni=ri.split(":").pop(),ni&&ke.updateBookmarkPropertyByID(ni,{visible:ei.visibility}))}},Ln=ei=>{Te.debug("onChangePositionLayer",ei),ke.updateLayerPosition(ei.layers.reverse().map(ti=>{if(ti.name&&ti.service)return Be.getLayerIdByName(ti.name,ti.service)}))},Bn=ei=>{if(Te.debug("onClickEditLayer",ei),ke.addControl("Drawing"),ei.layer.gpResultLayerId){var ti=ei.layer.gpResultLayerId.toLowerCase();if(ti&&(ti.toLowerCase().includes("drawing")||ti.toLowerCase().includes("layerimport:kml")||ti.toLowerCase().includes("layerimport:gpx")||ti.toLowerCase().includes("layerimport:geojson")||ti.toLowerCase().includes("bookmark:drawing-kml")||ti.toLowerCase().includes("bookmark:import-kml")||ti.toLowerCase().includes("bookmark:import-gpx")||ti.toLowerCase().includes("bookmark:import-geojson"))){setTimeout(function(){Ue.dispatchEvent("vector:edit:clicked",ei)},0);return}}push$1.warning({title:t.layerswitcher.title,message:t.layerswitcher.failed_not_yet_implemented})};return(ei,ti)=>null}},_sfc_main$O={__name:"Legends",props:{mapId:String,visibility:Boolean,analytic:Boolean,legendsOptions:Object},setup(Oe){const e=Oe,Te=inject(e.mapId),ke=ref(new Legends(e.legendsOptions));return onMounted(()=>{if(e.visibility&&(Te.addControl(ke.value),e.analytic)){var Be=ke.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{if(e.visibility){if(Te.addControl(ke.value),e.analytic){var Be=ke.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(Be)}}else Te.removeControl(ke.value)}),(Be,Ue)=>null}},toShare=(Oe,e)=>{var Te=useServiceStore(),ke=Te.getService(),Be=null;if(Oe.public_url){var Be=Oe.public_url,Ue=new URLSearchParams;Ue.append("id",Oe._id),Ue.append("name",Oe.name),Ue.append("description",Oe.description),Ue.append("format",Oe.labels.find(We=>ke.labelsFormats.includes(We))),Ue.append("type",Oe.labels.find(We=>ke.labels.includes(We))),Ue.append("target",Oe.labels.find(We=>ke.labelsTarget.includes(We))),Ue.append("kind",Oe.labels.find(We=>ke.labelsService.includes(We))),e&&Object.keys(e).forEach(We=>Ue.append(We,e[We])),Be+="?"+Ue.toString()}return Be||console.debug("toShare: URL publique non définie !"),_reduce(Be)},fromShare=Oe=>{var e={},Te,ke;Te=Oe.split(SEPARATOR_REDUCED_URL)[0],ke=Oe.split(SEPARATOR_REDUCED_URL)[1];var Be=new URLSearchParams(ke);return Be.forEach((Ue,He)=>{e[He]=Ue}),Object.keys(e).length===0&&console.debug("fromShare: Params non défini !"),e.u=Te.split("?")[0],e.i=e.i||e.u.split(".")[0],_extend(e)},SEPARATOR_REDUCED_URL="?",SEPARATOR_REDUCED_PARAMS="&",REDUCED_BASE_URL=window.__ENV__.VITE_GPF_BASE_URL_DOCUMENT||"https://data.geopf.fr/documents/",REDUCED_KVP={url:{k:"u",opt:!1},id:{k:"i",opt:!1},name:{k:"n",opt:!1},description:{k:"d",opt:!0},format:{k:"f",opt:!1},type:{k:"t",opt:!1},target:{k:"c",opt:!1},kind:{k:"k",opt:!1},opacity:{k:"o",opt:!1},visible:{k:"v",opt:!1},gray:{k:"g",opt:!1},stop:{k:"s",opt:!1}},_reduce=Oe=>{var e=new URL(Oe),Te=new URLSearchParams(e.search),ke=new URLSearchParams;Te.forEach((Ue,He)=>{if(!(Ue===""||Ue===void 0||Ue==="undefined"))if(REDUCED_KVP[He]){if(REDUCED_KVP[He].opt)return;ke.append(REDUCED_KVP[He].k,Ue)}else ke.append(He,Ue)});var Be=(e.origin+e.pathname).replace(REDUCED_BASE_URL,"")+SEPARATOR_REDUCED_URL+""+ke.toString().replace("&",SEPARATOR_REDUCED_PARAMS);return Be},_extend=Oe=>{var e={};Object.keys(REDUCED_KVP).forEach(ke=>{e[REDUCED_KVP[ke].k]=ke});var Te={};return Object.keys(Oe).forEach(ke=>{var Be=Oe[ke];e[ke]?Te[e[ke]]=Be:Te[ke]=Be}),Te.url=REDUCED_BASE_URL+Te.url,Te},formatByDefault="kml",_sfc_main$N={__name:"Drawing",props:{mapId:String,visibility:Boolean,analytic:Boolean,drawingOptions:Object},setup(Oe){const e=inject("emitter");var Te=inject("services");const ke=useMapStore(),Be=distExports.useLogger(),Ue=Oe,He=inject(Ue.mapId),We=ref(new Drawing(Ue.drawingOptions)),Cn=ref(new ButtonExport({title:"Exporter",kind:"secondary",download:!0,name:"Mon croquis",description:"",control:We.value,menu:!0,menuOptions:{outside:!0,above:!0,selectFormat:!1,labelDesc:!1},direction:"column",format:formatByDefault,icons:{menu:"",button:"export"}})),En=ref(new ButtonExport({title:"Enregistrer",kind:"primary",download:!1,name:"Mon croquis",description:"",control:We.value,menu:!1,format:formatByDefault,icons:{menu:"",button:"save"}}));e.addEventListener("vector:edit:clicked",ei=>{We.value&&(We.value.setCollapsed(!1),We.value.setLayer(ei.layer),Cn.value.inputName.value=ei.options.title||"");var ti=ei.layer.gpResultLayerId.toLowerCase();if(ti){var ni;ti.includes("drawing")||ti.includes("kml")?ni="kml":ti.includes("geojson")?ni="geojson":ti.includes("gpx")?ni="gpx":ni="kml",Cn.value.setFormat(ni),En.value.setFormat(ni)}}),onMounted(()=>{if(Ue.visibility){if(He.addControl(We.value),He.addControl(Cn.value),window.__ENV__.IAM_DISABLE==="1"&&(En.value.getContainer().style.display="none"),He.addControl(En.value),Ue.analytic){var ei=We.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(ei)}En.value.on("button:clicked",Sn),Cn.value.on("button:clicked",Bn),We.value.on("change:collapsed",An)}}),onBeforeUpdate(()=>{if(Ue.visibility){if(He.addControl(We.value),He.addControl(Cn.value),window.__ENV__.IAM_DISABLE==="1"&&(En.value.getContainer().style.display="none"),He.addControl(En.value),Ue.analytic){var ei=We.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(ei)}En.value.on("button:clicked",Sn),Cn.value.on("button:clicked",Bn),We.value.on("change:collapsed",An)}else He.removeControl(En.value),He.removeControl(We.value),He.removeControl(Cn.value)});const An=ei=>{Be.debug(ei),ei.target.collapsed&&(We.value.setLayer(),Cn.value.inputName.value="",Cn.value.setFormat(formatByDefault),En.value.setFormat(formatByDefault))},Sn=ei=>{if(Be.debug(ei),!Te.authenticated){push$1.warning({title:t.auth.title,message:t.auth.not_authentificated});return}var ti=ei.layer.gpResultLayerId.toLowerCase(),ni=ti.split(":")[0],ri={layer:ei.layer,content:ei.content,name:Cn.value.inputName.value||ei.name,description:ei.description,format:ei.format.toLowerCase(),target:"internal",type:ti.split(":")[0].replace("layer","")},si;if(ni!=="bookmark")si=Tn(ri);else{var ai=ti.split(":")[2],ni=ti.split(":")[1].split("-")[0];ri.type=ni,ri.uuid=ai,si=Ln(ri)}si.then(li=>{var Pi=Te.find(li.uuid);if(Pi){var pi=toShare(Pi,{opacity:ri.layer.get("opacity"),visible:ri.layer.get("visible"),gray:0,stop:1});if(li.action==="added")ke.addBookmark(pi);else if(li.action==="updated")ke.updateBookmark(pi);else throw new Error("Action not yet implemented !")}}).then(()=>{push$1.success({title:t.drawing.title,message:t.drawing.save_success})}).catch(li=>{console.error(li),push$1.error({title:t.drawing.title,message:t.drawing.save_failed})})},Tn=async ei=>{try{const si=await Te.setDocument(ei);var ti=si.uuid,ni=si.action;if(ei.layer.gpResultLayerId&&(ei.layer.gpResultLayerId=`bookmark:${ei.type}-${ei.format.toLowerCase()}:${ti}`),ei.layer.gpResultLayerDiv){var ri=ei.layer.gpResultLayerDiv.querySelector("label[id^=GPname_ID_]");ri&&(ri.innerHTML=ei.name,ri.title=ei.description)}const ai=await Te.sharingDocument({uuid:ti,type:ei.type});console.debug(ai);const li=await Te.updateMetadataDocument({uuid:ti,type:ei.type,name:ei.name,description:ei.description,extra:{format:ei.format.toLowerCase(),target:"internal",date:new Date().toLocaleDateString()}});return console.debug(li),e.dispatchEvent("document:saved",{uuid:ti,action:ni}),si}catch(si){throw console.error(si),si}},Ln=async ei=>{try{const si=await Te.updateGeometryDocument(ei);var ti=si.uuid,ni=si.action;if(ei.layer.gpResultLayerDiv){var ri=ei.layer.gpResultLayerDiv.querySelector("label[id^=GPname_ID_]");ri&&(ri.innerHTML=ei.name,ri.title=ei.description)}const ai=Te.find(ti);if(ai&&!ai.public_url){const Pi=await Te.sharingDocument({uuid:ti,type:ei.type});console.debug(Pi)}const li=await Te.updateMetadataDocument({uuid:ti,type:ei.type,name:ei.name,description:ei.description,extra:{format:ei.format.toLowerCase(),target:"internal",date:new Date().toLocaleDateString()}});return console.debug(li),e.dispatchEvent("document:updated",{uuid:ti,action:ni}),si}catch(si){throw console.error(si),si}},Bn=ei=>{};return(ei,ti)=>null}},_sfc_main$M={__name:"Isocurve",props:{mapId:String,visibility:Boolean,analytic:Boolean,isocurveOptions:Object},setup(Oe){const e=Oe,Te=distExports.useLogger();useDataStore();const ke=inject(e.mapId),Be=ref(new Isocurve(e.isocurveOptions)),Ue=ref(new ButtonExport({title:"Exporter",kind:"secondary",download:!0,name:"Mon iso",description:"",control:Be.value,menu:!0,menuOptions:{outside:!0,above:!0,selectFormat:!1,labelDesc:!1},direction:"column",format:"geojson",icons:{menu:"",button:"export"}})),He=ref(new ButtonExport({title:"Enregistrer",kind:"primary",download:!1,control:Be.value,format:"geojson",menu:!1,direction:"column",icons:{menu:"",button:"save"}}));onMounted(()=>{if(e.visibility){if(ke.addControl(Be.value),ke.addControl(Ue.value),window.__ENV__.IAM_DISABLE==="1"&&(He.value.getContainer().style.display="none"),ke.addControl(He.value),e.analytic){var Tn=Be.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(Tn)}Be.value.on("isocurve:drawstart",We),Be.value.on("socurve:drawend",Cn),Be.value.on("isocurve:compute",En),Ue.value.on("button:clicked",Sn),He.value.on("button:clicked",An)}}),onBeforeUpdate(()=>{e.visibility||(ke.removeControl(Be.value),ke.removeControl(He.value),ke.removeControl(Ue.value))}),onUpdated(()=>{if(e.visibility){if(ke.addControl(Be.value),ke.addControl(Ue.value),window.__ENV__.IAM_DISABLE==="1"&&(He.value.getContainer().style.display="none"),ke.addControl(He.value),e.analytic){var Tn=Be.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(Tn)}Be.value.on("isocurve:drawstart",We),Be.value.on("socurve:drawend",Cn),Be.value.on("isocurve:compute",En),Ue.value.on("button:clicked",Sn),He.value.on("button:clicked",An)}});const We=Tn=>{Te.debug(Tn)},Cn=Tn=>{Te.debug(Tn)},En=Tn=>{Te.debug(Tn)},An=Tn=>{Te.debug(Tn)},Sn=Tn=>{Te.debug(Tn)};return(Tn,Ln)=>null}},_sfc_main$L={__name:"Route",props:{mapId:String,visibility:Boolean,analytic:Boolean,routeOptions:Object},setup(Oe){const e=Oe,Te=distExports.useLogger();useDataStore();const ke=inject(e.mapId),Be=ref(new Route(e.routeOptions)),Ue=ref(new ButtonExport({title:"Exporter",kind:"secondary",download:!0,name:"Mon itineraire",description:"",control:Be.value,menu:!0,menuOptions:{outside:!0,above:!0,selectFormat:!1,labelDesc:!1},direction:"column",format:"geojson",icons:{menu:"",button:"export"}})),He=ref(new ButtonExport({title:"Enregistrer",kind:"primary",download:!1,control:Be.value,format:"geojson",menu:!1,direction:"column",icons:{menu:"",button:"save"}}));onMounted(()=>{if(e.visibility&&(ke.addControl(Be.value),ke.addControl(Ue.value),window.__ENV__.IAM_DISABLE==="1"&&(He.value.getContainer().style.display="none"),ke.addControl(He.value),Be.value.on("route:drawstart",We),Be.value.on("route:drawend",Cn),Be.value.on("route:compute",En),Ue.value.on("button:clicked",Sn),He.value.on("button:clicked",An),e.analytic)){var Tn=Be.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(Tn)}}),onBeforeUpdate(()=>{e.visibility||(ke.removeControl(Be.value),ke.removeControl(He.value),ke.removeControl(Ue.value))}),onUpdated(()=>{if(e.visibility){if(ke.addControl(Be.value),ke.addControl(Ue.value),window.__ENV__.IAM_DISABLE==="1"&&(He.value.getContainer().style.display="none"),ke.addControl(He.value),e.analytic){var Tn=Be.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(Tn)}Be.value.on("route:drawstart",We),Be.value.on("route:drawend",Cn),Be.value.on("route:compute",En),Ue.value.on("button:clicked",Sn),He.value.on("button:clicked",An)}});const We=Tn=>{Te.debug(Tn)},Cn=Tn=>{Te.debug(Tn)},En=Tn=>{Te.debug(Tn)},An=Tn=>{Te.debug(Tn)},Sn=Tn=>{Te.debug(Tn)};return(Tn,Ln)=>null}},_sfc_main$K={__name:"MeasureLength",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureLengthOptions:Object},setup(Oe){const e=Oe,Te=inject(e.mapId),ke=ref(new MeasureLength(e.measureLengthOptions));return onMounted(()=>{if(e.visibility&&(Te.addControl(ke.value),e.analytic)){var Be=ke.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{if(e.visibility){if(Te.addControl(ke.value),e.analytic){var Be=ke.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(Be)}}else Te.removeControl(ke.value)}),(Be,Ue)=>null}},_sfc_main$J={__name:"MeasureArea",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureAreaOptions:Object},setup(Oe){const e=Oe,Te=inject(e.mapId),ke=ref(new MeasureArea(e.measureAreaOptions));return onMounted(()=>{if(e.visibility&&(Te.addControl(ke.value),e.analytic)){var Be=ke.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{if(e.visibility){if(Te.addControl(ke.value),e.analytic){var Be=ke.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(Be)}}else Te.removeControl(ke.value)}),(Be,Ue)=>null}},_sfc_main$I={__name:"MeasureAzimuth",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureAzimuthOptions:Object},setup(Oe){const e=Oe,Te=inject(e.mapId),ke=ref(new MeasureAzimuth(e.measureAzimuthOptions));return onMounted(()=>{if(e.visibility&&(Te.addControl(ke.value),e.analytic)){var Be=ke.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{if(e.visibility){if(Te.addControl(ke.value),e.analytic){var Be=ke.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(Be)}}else Te.removeControl(ke.value)}),(Be,Ue)=>null}},_sfc_main$H={__name:"MousePosition",props:{mapId:String,visibility:Boolean,analytic:Boolean,mousePositionOptions:Object},setup(Oe){const e=Oe;distExports.useLogger();const Te=inject(e.mapId),ke=ref(new MousePosition(e.mousePositionOptions));return onMounted(()=>{if(e.visibility&&(Te.addControl(ke.value),e.analytic)){var Be=ke.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{e.visibility||Te.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Te.addControl(ke.value),e.analytic)){var Be=ke.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(Be)}}),(Be,Ue)=>null}},_sfc_main$G={__name:"ElevationPath",props:{mapId:String,visibility:Boolean,analytic:Boolean,elevationPathOptions:Object},setup(Oe){const e=Oe,Te=distExports.useLogger(),ke=inject(e.mapId),Be=ref(new ElevationPath(e.elevationPathOptions)),Ue=ref(new ButtonExport({title:"Exporter",kind:"secondary",download:!0,name:"Mon profil",description:"",control:Be.value,menu:!0,menuOptions:{outside:!0,above:!0,selectFormat:!1,labelDesc:!1},direction:"column",format:"geojson",icons:{menu:"",button:"export"}})),He=ref(new ButtonExport({title:"Enregistrer",kind:"primary",download:!1,control:Be.value,format:"geojson",menu:!1,icons:{menu:"",button:"save"}}));onMounted(()=>{if(e.visibility&&(ke.addControl(Be.value),window.__ENV__.IAM_DISABLE==="1"&&(He.value.getContainer().style.display="none"),ke.addControl(Ue.value),ke.addControl(He.value),Be.value.on("elevationpath:drawstart",We),Be.value.on("elevationpath:drawend",Cn),Be.value.on("elevationpath:compute",En),Ue.value.on("button:clicked",Sn),He.value.on("button:clicked",An),e.analytic)){var Tn=Be.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(Tn)}}),onBeforeUpdate(()=>{e.visibility||(ke.removeControl(Be.value),ke.removeControl(He.value),ke.removeControl(Ue.value))}),onUpdated(()=>{if(e.visibility){if(ke.addControl(Be.value),ke.addControl(Ue.value),window.__ENV__.IAM_DISABLE==="1"&&(He.value.getContainer().style.display="none"),ke.addControl(He.value),e.analytic){var Tn=Be.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(Tn)}Be.value.on("elevationpath:drawstart",We),Be.value.on("elevationpath:drawend",Cn),Be.value.on("elevationpath:compute",En),Ue.value.on("button:clicked",Sn),He.value.on("button:clicked",An)}});const We=Tn=>{Te.debug(Tn)},Cn=Tn=>{Te.debug(Tn)},En=Tn=>{Te.debug(Tn)},An=Tn=>{Te.debug(Tn)},Sn=Tn=>{Te.debug(Tn)};return(Tn,Ln)=>null}},_sfc_main$F={__name:"Territories",props:{mapId:String,visibility:Boolean,analytic:Boolean,territoriesOptions:Object},setup(Oe){const e=Oe,Te=distExports.useLogger(),ke=useDataStore(),Be=inject(e.mapId),Ue=ref(new Territories(e.territoriesOptions));function He(){var Cn=ke.getTerritories();for(let En=0;En<Cn.length;En++){const An=Cn[En];Ue.value.setTerritory(An)}}onMounted(()=>{if(e.visibility){if(He(),Be.addControl(Ue.value),e.analytic){var Cn=Ue.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(Cn)}Ue.value.on("territories:change",We)}}),onBeforeUpdate(()=>{e.visibility||Be.removeControl(Ue.value)}),onUpdated(()=>{if(e.visibility){if(He(),Be.addControl(Ue.value),e.analytic){var Cn=Ue.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(Cn)}Ue.value.on("territories:change",We)}});const We=Cn=>{Te.debug(Cn)};return(Cn,En)=>null}},_sfc_main$E={__name:"GetFeatureInfo",props:{mapId:String,visibility:Boolean,analytic:Boolean,getFeatureInfoOptions:Object},setup(Oe){const e=Oe,Te=distExports.useLogger(),ke=inject(e.mapId),Be=ref(new GetFeatureInfo(e.getFeatureInfoOptions)),Ue=useMatchMedia("SM");watch(Ue,()=>{if(e.visibility&&!Ue.value){if(ke.addControl(Be.value),e.analytic){var We=Be.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(We)}}else ke.removeControl(Be.value)}),onMounted(()=>{if(e.visibility&&!Ue.value&&(ke.addControl(Be.value),Be.value.on("GetFeatureInfo:toggle",He),e.analytic)){var We=Be.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(We)}}),onBeforeUpdate(()=>{if(e.visibility&&!Ue.value){if(ke.addControl(Be.value),e.analytic){var We=Be.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(We)}}else ke.removeControl(Be.value)});function He(We){Te.debug(We)}return(We,Cn)=>null}},__default__$t={name:"LayerImport"},_sfc_main$D=Object.assign(__default__$t,{props:{mapId:String,visibility:Boolean,analytic:Boolean,layerImportOptions:Object},setup(Oe){const e=inject("emitter"),Te=inject("services"),ke=Oe,Be=useMapStore(),Ue=distExports.useLogger(),He=inject(ke.mapId),We=ref(new LayerImport(ke.layerImportOptions));e.addEventListener("layerimport:open:clicked",ei=>{We.value&&We.value.setCollapsed(!ei.open)}),onMounted(()=>{if(ke.visibility){if(He.addControl(We.value),ke.analytic){var ei=We.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(ei)}We.value.on("layerimport:vector:added",Cn),We.value.on("layerimport:service:added",En),We.value.on("layerimport:mapbox:added",An),We.value.on("layerimport:compute:added",Sn)}}),onBeforeUpdate(()=>{ke.visibility||He.removeControl(We.value)}),onUpdated(()=>{if(ke.visibility){if(He.addControl(We.value),ke.analytic){var ei=We.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(ei)}We.value.on("layerimport:vector:added",Cn),We.value.on("layerimport:service:added",En),We.value.on("layerimport:mapbox:added",An),We.value.on("layerimport:compute:added",Sn)}});const Cn=ei=>{Ue.debug(ei)},En=ei=>{if(Ue.debug(ei),!!Te.authenticated){var ti={};if(ei.format.toLowerCase()==="wmts"&&(ti=Ln(ei.data)),ei.format.toLowerCase()==="wms"&&(ti=Tn(ei.data)),ei.format.toLowerCase()==="wfs"){console.error("WFS not implemented !");return}if(!ti.url){push$1.error({title:t.layerimport.title,message:t.layerimport.add_failed_service(ei.format.toUpperCase())});return}var ni={content:JSON.stringify(ti),name:ti.title||ei.name,description:ti.description,format:"json",type:"service",kind:ti.format.toLowerCase(),target:"external",layer:ei.layer};Bn(ni).then(ri=>{var si=Te.find(ri.uuid);if(si){var ai=toShare(si,{stop:1});Be.addBookmark(ai)}}).then(()=>{push$1.success({title:t.layerimport.title,message:t.layerimport.add_success_service(ei.format.toUpperCase())})}).catch(ri=>{console.error(ri),push$1.warning({title:t.layerimport.title,message:t.layerimport.add_failed_service(ri.format.toUpperCase())})})}},An=ei=>{if(Ue.debug(ei),!!Te.authenticated){var ti={content:ei.data,name:ei.name,description:"Import Mapbox",format:"json",type:"service",kind:"mapbox",target:"internal",layer:ei.layer};Bn(ti).then(ni=>{var ri=Te.find(ni.uuid);if(ri){var si=toShare(ri,{stop:1});Be.addBookmark(si)}}).then(()=>{push$1.success({title:t.layerimport.title,message:t.layerimport.add_success_mapbox})}).catch(ni=>{console.error(ni),push$1.warning({title:t.layerimport.title,message:t.layerimport.add_failed_mapbox})})}},Sn=ei=>{Ue.debug(ei)},Tn=ei=>({url:ei.Url,format:"WMS",title:ei.Title,description:ei.Abstract,layers:[ei.Name],version:ei.Version,stylesName:ei.Style.map(ti=>ti.Name),queryable:ei.queryable,gfiFormat:"text/html",projection:ei.Projection}),Ln=ei=>({url:ei.Url,format:"WMTS",version:ei.Version,layer:ei.Identifier,outputFormat:ei.Format[0],styleName:ei.Style[0].Identifier,tileMatrixSet:ei.TileMatrixSetLink[0].TileMatrixSet,topLeftCorner:{x:ei.Origin[0],y:ei.Origin[1]},resolutions:ei.Resolutions,matrixIds:ei.MatrixIds,title:ei.Title,description:ei.Abstract}),Bn=async ei=>{try{const ri=await Te.setDocument(ei);var ti=ri.uuid,ni=ri.action;const si=await Te.sharingDocument({uuid:ti,type:ei.type});return console.debug(si),e.dispatchEvent("document:saved",{uuid:ti,action:ni}),ri}catch(ri){throw console.error(ri),ri}};return(ei,ti)=>null}}),selectedControls=computed(()=>useMapStore().getControls()),_sfc_main$C={__name:"ControlList",props:{mapId:String,visibility:Boolean,analytic:Boolean,controlListOptions:Object},setup(Oe){const e=Oe;distExports.useLogger();const Te=inject(e.mapId),ke=ref(new ControlList(e.controlListOptions)),Be=useMatchMedia("SM"),Ue=useMatchMediaHeight("XS");return watch(Be,()=>{e.visibility&&!Be.value&&!Ue.value?ke.value.setPosition("top-right"):ke.value.setPosition("bottom-right")}),watch(Ue,()=>{e.visibility&&!Be.value&&!Ue.value?ke.value.setPosition("top-right"):ke.value.setPosition("bottom-right")}),watch(selectedControls,()=>{setTimeout(()=>{if(Te.removeControl(ke.value),e.visibility){if(Te.addControl(ke.value),e.analytic){var He=ke.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(He)}!Be.value&&!Ue.value?ke.value.setPosition("top-right"):ke.value.setPosition("bottom-right")}},10)}),onMounted(()=>{if(e.visibility&&(Te.addControl(ke.value),e.analytic)){var He=ke.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(He)}}),onBeforeUpdate(()=>{e.visibility||Te.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(Te.addControl(ke.value),e.analytic)){var He=ke.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(He)}}),(He,We)=>null}},_sfc_main$B={__name:"ContextMenu",props:{mapId:String,visibility:Boolean,analytic:Boolean,contextMenuOptions:Object},setup(Oe){const e=useMatchMedia("SM"),Te=Oe,ke=inject(Te.mapId),Be=ref(new ContextMenu(Te.contextMenuOptions));return onMounted(()=>{Te.visibility&&!e.value&&ke.addControl(Be.value)}),onBeforeUpdate(()=>{Te.visibility&&!e.value?ke.addControl(Be.value):ke.removeControl(Be.value)}),(Ue,He)=>null}},_sfc_main$A={__name:"FullScreen",props:{mapId:String,visibility:Boolean,analytic:Boolean,fullscreenOptions:Object},setup(Oe){const e=Oe,Te=inject(e.mapId),ke=ref(new GeoportalFullScreen(e.fullscreenOptions));return onMounted(()=>{e.visibility&&Te.addControl(ke.value)}),onBeforeUpdate(()=>{e.visibility?Te.addControl(ke.value):Te.removeControl(ke.value)}),(Be,Ue)=>null}},_sfc_main$z={__name:"ReverseGeocode",props:{mapId:String,visibility:Boolean,analytic:Boolean,reverseGeocodeOptions:Object},setup(Oe){const e=Oe,Te=distExports.useLogger();useDataStore();const ke=inject(e.mapId),Be=ref(new ReverseGeocode(e.reverseGeocodeOptions));onMounted(()=>{if(e.visibility&&(ke.addControl(Be.value),Be.value.on("reverseGeocode:onclickresult",Ue),Be.value.on("reverseGeocode:compute",He),e.analytic)){var We=Be.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(We)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Be.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Be.value),e.analytic)){var We=Be.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(We)}});const Ue=We=>{Te.debug(We)},He=We=>{Te.debug(We)};return(We,Cn)=>null}},useDomStore=defineStore("dom",()=>{var Oe=ref();function e(){return Oe.value}function Te(ke){Oe.value=ke}return{menuCatalogueButton:Oe,getmenuCatalogueButton:e,setmenuCatalogueButton:Te}}),IconGeolocationSVG="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2036'%20width='48'%20height='48'%3e%3cpath%20fill='%23000091'%20d='M18.364%203.636a9%209%200%200%201%200%2012.728L12%2022.728l-6.364-6.364A9%209%200%200%201%2018.364%203.636ZM12%208a2%202%200%201%200%200%204%202%202%200%200%200%200-4Z'/%3e%3c/svg%3e",__default__$s={name:"Controls"},_sfc_main$y=Object.assign(__default__$s,{props:{controlOptions:Array,mapId:String},setup(Oe){LoggerByDefault.enableAll();const e=Oe;useMapStore();const Te=useDomStore(),ke=useDataStore();distExports.useLogger().debug(e.controlOptions);const Ue={id:"1",collapsed:!1,collapsible:!1,displayButtonAdvancedSearch:!0,displayButtonGeolocate:!0,displayButtonCoordinateSearch:!0,coordinateSearchInAdvancedSearch:!0,displayButtonClose:!1,resources:{search:!0},searchOptions:{addToMap:!1,filterServices:ke.filterServices,filterWMTSPriority:!0,filterProjections:ke.filterProjections,filterLayersPriority:ke.getFeatured().toString(),filterLayers:!0,filterTMS:!0,filterLayersList:ke.getLayersSignatures(),serviceOptions:{maximumResponses:50},maximumEntries:5},autocompleteOptions:{serviceOptions:{maximumResponses:10},prettifyResults:!0,maximumEntries:5},markerUrl:IconGeolocationSVG},He={options:{id:"2",position:useControlsExtensionPosition().layerSwitcherOptions,collapsed:!0,panel:!0,counter:!0,allowEdit:!0}},We={id:"3",position:useControlsExtensionPosition().legendsOptions,panel:!0,auto:!0,draggable:!1},Cn={id:"4",units:"metric",bar:!1},En={id:"5",position:useControlsExtensionPosition().territoriesOptions,panel:!0,title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3},An={id:"6",position:useControlsExtensionPosition().getFeatureInfoOptions},Sn={id:"7",position:useControlsExtensionPosition().overviewMapOptions},Tn={id:"8",position:useControlsExtensionPosition().fullscreenOptions},Ln={position:useControlsExtensionPosition().zoomOptions,id:"9"},Bn={position:useControlsExtensionPosition().controlListOptions,id:"10",gutter:!1,controlCatalogElement:document.getElementById("MenuControl")},ei={id:"11",position:useControlsExtensionPosition().drawingOptions,gutter:!1,listable:!0,tools:{export:!1}},ti={id:"12",position:useControlsExtensionPosition().reverseGeocodeOptions,gutter:!1,listable:!0},ni={position:useControlsExtensionPosition().isocurveOptions,id:"13",gutter:!1,listable:!0},ri={position:useControlsExtensionPosition().routeOptions,id:"14",gutter:!1,listable:!0},si={id:"15",position:useControlsExtensionPosition().measureLengthOptions,gutter:!1,listable:!0},ai={position:useControlsExtensionPosition().measureAreaOptions,id:"16",gutter:!1,listable:!0},li={position:useControlsExtensionPosition().measureAzimuthOptions,gutter:!1,listable:!0,id:"17"},Pi={position:useControlsExtensionPosition().mousePositionOptions,id:"18",gutter:!1,listable:!0,systems:[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:"EPSG:27572",type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}},{crs:"EPSG:32620",label:"UTM 20N (Guadeloupe, Martinique)",type:"Metric",geoBBox:{left:-66,bottom:0,right:-60,top:84}},{crs:"EPSG:4467",label:"UTM 21N (Saint-Pierre-et-Miquelon)",type:"Metric",geoBBox:{left:-57.1,bottom:43.41,right:-55.9,top:47.37}},{crs:"EPSG:2972",label:"UTM 22N (Guyane)",type:"Metric",geoBBox:{left:-54.6,bottom:2.11,right:-49.46,top:8.88}},{crs:"EPSG:32630",label:"UTM 30N (France métropolitaine)",type:"Metric",geoBBox:{left:-6,bottom:0,right:0,top:84}},{crs:"EPSG:32631",label:"UTM 31N (France métropolitaine)",type:"Metric",geoBBox:{left:0,bottom:0,right:6,top:84}},{crs:"EPSG:32632",label:"UTM 32N (France métropolitaine)",type:"Metric",geoBBox:{left:6,bottom:0,right:12,top:84}},{crs:"EPSG:4471",label:"UTM 38S (Mayotte)",type:"Metric",geoBBox:{left:43.68,bottom:-14.49,right:46.7,top:-11.33}},{crs:"EPSG:2975",label:"UTM 40S (Réunion)",type:"Metric",geoBBox:{left:51.83,bottom:-24.72,right:58.24,top:-18.28}},{crs:"EPSG:3296",label:"UTM 5S (Polynésie)",type:"Metric",geoBBox:{left:-158.13,bottom:-26.7,right:-150,top:-12.5}},{crs:"EPSG:3297",label:"UTM 6S (Polynésie)",type:"Metric",geoBBox:{left:-150,bottom:-31.2,right:-144,top:-7.29}},{crs:"EPSG:32707",label:"UTM 7S (Polynésie)",type:"Metric",geoBBox:{left:-144,bottom:-80,right:-138,top:0}},{crs:"EPSG:32708",label:"UTM 8S (Polynésie)",type:"Metric",geoBBox:{left:-138,bottom:-80,right:-132,top:0}},{crs:"EPSG:26912",label:"UTM 12N (Île de Clipperton)",type:"Metric",geoBBox:{left:-109.5,bottom:10.17,right:-109,top:10.5}},{crs:"EPSG:32742",label:"UTM 42S (Îles Kerguelen)",type:"Metric",geoBBox:{left:66,bottom:-80,right:72,top:0}},{crs:"EPSG:32739",label:"UTM 39S (Îles Crozet)",type:"Metric",geoBBox:{left:48,bottom:-80,right:54,top:0}},{crs:"EPSG:32743",label:"UTM 43S (Îles St-Paul et Amsterdam)",type:"Metric",geoBBox:{left:72,bottom:-80,right:78,top:0}},{crs:"EPSG:2986",label:"Stéréographique polaire (Terre Adélie)",type:"Metric",geoBBox:{left:136,bottom:-67.13,right:142,top:-65.61}},{crs:"EPSG:32737",label:"UTM 37S (Îles du canal de Mozambique)",type:"Metric",geoBBox:{left:36,bottom:-80,right:42,top:0}},{crs:"EPSG:32738",label:"UTM 38S (Îles du canal de Mozambique)",type:"Metric",geoBBox:{left:42,bottom:-80,right:48,top:0}},{crs:"EPSG:2988",label:"UTM 1S (Wallis-et-Futuna)",type:"Metric",geoBBox:{left:-176.25,bottom:-13.41,right:-176.07,top:-13.16}},{crs:"EPSG:3163",label:"RGNC91-93 (Nouvelle-Calédonie)",type:"Metric",geoBBox:{left:156.25,bottom:-26.45,right:174.28,top:-14.83}}]},pi={id:"19",position:useControlsExtensionPosition().elevationPathOptions,gutter:!1,listable:!0},vi={id:"20",position:useControlsExtensionPosition().layerImportOptions,gutter:!1,listable:!0},Ri=inject("refModalPrint"),Fi=inject("refModalShare"),di=computed(()=>({contextMenuItemsOptions:[{text:"Imprimer la carte",callback:function(){Ri.value.onModalPrintOpen()}},{text:"Partager la carte",callback:function(){Fi.value.onModalShareOpen()}},{text:"Ajouter des données",callback:()=>{Te.getmenuCatalogueButton().firstChild.click()}}]}));return(ci,Mi)=>(openBlock(),createElementBlock(Fragment,null,[Oe.controlOptions?(openBlock(),createBlock(_sfc_main$P,{key:0,visibility:e.controlOptions.includes(unref(useControls).LayerSwitcher.id),analytic:unref(useControls).LayerSwitcher.analytic,"layer-switcher-options":He,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$O,{key:1,visibility:e.controlOptions.includes(unref(useControls).Legends.id),analytic:unref(useControls).Legends.analytic,"legends-options":We,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$L,{key:2,visibility:e.controlOptions.includes(unref(useControls).Route.id),analytic:unref(useControls).Route.analytic,"route-options":ri,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$M,{key:3,visibility:e.controlOptions.includes(unref(useControls).Isocurve.id),analytic:unref(useControls).Isocurve.analytic,"isocurve-options":ni,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$z,{key:4,visibility:e.controlOptions.includes(unref(useControls).ReverseGeocode.id),analytic:unref(useControls).ReverseGeocode.analytic,"reverse-geocode-options":ti,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$A,{key:5,visibility:e.controlOptions.includes(unref(useControls).FullScreen.id),analytic:unref(useControls).FullScreen.analytic,"fullscreen-options":Tn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$Q,{key:6,visibility:e.controlOptions.includes(unref(useControls).Zoom.id),analytic:unref(useControls).Zoom.analytic,"zoom-options":Ln,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$T,{key:7,visibility:e.controlOptions.includes(unref(useControls).SearchEngine.id),analytic:unref(useControls).SearchEngine.analytic,"search-engine-options":Ue,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$E,{key:8,visibility:e.controlOptions.includes(unref(useControls).GetFeatureInfo.id),analytic:unref(useControls).GetFeatureInfo.analytic,"get-feature-info-options":An,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$S,{key:9,visibility:e.controlOptions.includes(unref(useControls).ScaleLine.id),analytic:unref(useControls).ScaleLine.analytic,"scale-line-options":Cn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$R,{key:10,visibility:e.controlOptions.includes(unref(useControls).OverviewMap.id),analytic:unref(useControls).OverviewMap.analytic,"overview-map-options":Sn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$F,{key:11,visibility:e.controlOptions.includes(unref(useControls).Territories.id),analytic:unref(useControls).Territories.analytic,"territories-options":En,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$K,{key:12,visibility:e.controlOptions.includes(unref(useControls).MeasureLength.id),analytic:unref(useControls).MeasureLength.analytic,"measure-length-options":si,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$J,{key:13,visibility:e.controlOptions.includes(unref(useControls).MeasureArea.id),analytic:unref(useControls).MeasureArea.analytic,"measure-area-options":ai,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$I,{key:14,visibility:e.controlOptions.includes(unref(useControls).MeasureAzimuth.id),analytic:unref(useControls).MeasureAzimuth.analytic,"measure-azimuth-options":li,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$H,{key:15,visibility:e.controlOptions.includes(unref(useControls).MousePosition.id),analytic:unref(useControls).MousePosition.analytic,"mouse-position-options":Pi,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$N,{key:16,visibility:e.controlOptions.includes(unref(useControls).Drawing.id),analytic:unref(useControls).Drawing.analytic,"drawing-options":ei,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$G,{key:17,visibility:e.controlOptions.includes(unref(useControls).ElevationPath.id),analytic:unref(useControls).ElevationPath.analytic,"elevation-path-options":pi,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$D,{key:18,visibility:e.controlOptions.includes(unref(useControls).LayerImport.id),analytic:unref(useControls).LayerImport.analytic,"layer-import-options":vi,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$C,{key:19,visibility:e.controlOptions.includes(unref(useControls).ControlList.id),analytic:unref(useControls).ControlList.analytic,"control-list-options":Bn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$B,{key:20,visibility:e.controlOptions.includes(unref(useControls).ContextMenu.id),analytic:unref(useControls).ContextMenu.analytic,"context-menu-options":unref(di),"map-id":Oe.mapId},null,8,["visibility","analytic","context-menu-options","map-id"])):createCommentVNode("",!0)],64))}}),DEFAULT_STYLE=new Style$1({image:new Icon({src:Marker.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new Text({font:"16px Sans",textAlign:"left",fill:new Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new Stroke({color:"rgba(0, 0, 0, 1)",width:2})})}),createVectorLayer=Oe=>{var e=null,Te=null,ke=null,Be=Oe.extended===void 0?!0:Oe.extended;switch(Oe.format.toLowerCase()){case"geojson":e=new GeoJSON$1,Be&&(e=new GeoJSON({defaultStyle:DEFAULT_STYLE}));break;case"kml":e=new KML$1,Be&&(e=new KML({defaultStyle:DEFAULT_STYLE}));break;case"gpx":e=new GPX$1,Be&&(e=new GPX({defaultStyle:DEFAULT_STYLE,readExtensions:function(Ue,He){this.readExtensions(Ue,He)}}));break}if(!e)throw new Error(t.ol.failed_format(Oe.format));if(Oe.data){const Ue=e.readProjection(Oe.data);Te=new VectorSource({features:e.readFeatures(Oe.data,{dataProjection:Ue,featureProjection:"EPSG:3857"})})}if(Oe.url&&(Te=new VectorSource({format:e,url:Oe.url})),!Te)throw new Error(t.ol.failed_source("vecteur"));if(Te._title=Oe.name,Te._description=Oe.description,ke=new VectorLayer({source:Te,visible:getVisible(Oe.visible),opacity:getOpacity(Oe.opacity)}),!ke)throw new Error(t.ol.failed_layer("vecteur"));return ke.gpResultLayerId="bookmark:"+Oe.type+"-"+Oe.format.toLowerCase()+":"+Oe.id,ke},createServiceLayer=Oe=>{var e=ke=>{var Be=null;if(typeof ke.data=="string"&&(ke.data=JSON.parse(ke.data)),ke.kind==="wmts"){const We=new WMTSTileGrid({origin:[ke.data.topLeftCorner.x,ke.data.topLeftCorner.y],resolutions:ke.data.resolutions,matrixIds:ke.data.matrixIds});var Ue=new WMTS$1({url:ke.data.url,version:ke.data.version,layer:ke.data.layer,matrixSet:ke.data.tileMatrixSet,format:ke.data.outputFormat,projection:"EPSG:3857",tileGrid:We,style:ke.data.styleName,attributions:""}),Be=null;if(typeof ke.data=="string"&&(ke.data=JSON.parse(ke.data)),ke.kind==="wmts"){const En=new WMTSTileGrid({origin:[ke.data.topLeftCorner.x,ke.data.topLeftCorner.y],resolutions:ke.data.resolutions,matrixIds:ke.data.matrixIds});var Ue=new WMTS$1({url:ke.data.url,version:ke.data.version,layer:ke.data.layer,matrixSet:ke.data.tileMatrixSet,format:ke.data.outputFormat,projection:"EPSG:3857",tileGrid:En,style:ke.data.styleName,attributions:""});if(!Ue)throw new Error(t.ol.failed_source("service wmts"));if(Ue._title=ke.data.name||ke.name,Ue._description=ke.data.description||ke.description,Be=new TileLayer({source:Ue}),!Be)throw new Error(t.ol.failed_layer("service wmts"))}else if(ke.kind==="wms"){var He=new TileWMS({url:ke.data.url,params:{LAYERS:ke.data.layers,SERVICE:ke.data.format,VERSION:ke.data.version,STYLES:ke.data.stylesName},projection:ke.data.projection||"EPSG:3857",attributions:""});if(!He)throw new Error(t.ol.failed_source("service wms"));if(He._title=ke.data.name||ke.name,He._description=ke.data.description||ke.description,Be=new TileLayer({source:He}),!Be)throw new Error(t.ol.failed_layer("service wms"));Be.gpGFIparams={queryable:ke.data.queryable,formats:ke.data.gfiFormat}}else throw new Error(t.ol.failed_source("service non reconnu"));if(Be&&!Be.getExtent()){const En=get$3("EPSG:3857");Be.setExtent(En.getExtent())}return Be&&(Be.gpResultLayerId="bookmark:"+ke.kind.toLowerCase()+":"+ke.id),Be.setVisible(getVisible(ke.visible)),Be.setOpacity(getOpacity(ke.opacity)),Be}else if(ke.kind==="wms"){var He=new TileWMS({url:ke.data.url,params:{LAYERS:ke.data.layers,SERVICE:ke.data.format,VERSION:ke.data.version,STYLES:ke.data.stylesName},projection:ke.data.projection||"EPSG:3857",attributions:""});if(!He)throw new Error(t.ol.failed_source("service wms"));if(He._title=ke.data.name||ke.name,He._description=ke.data.description||ke.description,Be=new TileLayer({source:He}),!Be)throw new Error(t.ol.failed_layer("service wms"));Be.gpGFIparams={queryable:ke.data.queryable,formats:ke.data.gfiFormat}}else throw new Error(t.ol.failed_source("service non reconnu"));if(Be&&!Be.getExtent()){const We=get$3("EPSG:3857");Be.setExtent(We.getExtent())}return Be&&(Be.gpResultLayerId="bookmark:"+ke.kind.toLowerCase()+":"+ke.id),Be};if(Oe.url)return fetch(Oe.url).then(ke=>{if(ke.ok)return ke.json().then(Be=>e({...Oe,data:Be})).catch(Be=>{throw Be})}).catch(ke=>{throw ke});if(Oe.data)try{var Te=e(Oe);return Promise.resolve(Te)}catch(ke){return Promise.reject(ke)}},createMapBoxLayer=Oe=>{const e=ke=>{var Be=null,Ue=ke.data,He=Ue.sources,We=Object.keys(He)[0],Cn=He[We],En=Cn.type;if(En==="vector"){var An=Cn.tiles;if(!An)throw new Error("Source 'tiles' uniquement !");var Sn=new MVT({featureClass:Feature}),Tn=new VectorTile({attributions:"",format:Sn,urls:An});Tn._title=ke.name,Tn._description=ke.description,Be=new VectorTileLayer({source:Tn,visible:!1,declutter:!0}),Be.gpResultLayerId="bookmark:"+ke.format.toLowerCase()+":"+ke.id;var Ln=()=>{applyStyle(Be,Ue,{source:We}).then(()=>{Be.setVisible(getVisible(ke.visible)),Be.setOpacity(getOpacity(ke.opacity))}).catch(Bn=>{throw Bn})};Be.getSource()?Ln():Be.once("change:source",Ln)}else throw new Error("Type 'vector' uniquement !");return Be};if(Oe.url)return fetch(Oe.url).then(ke=>{if(ke.ok)return ke.json().then(Be=>e({...Oe,data:Be})).catch(Be=>{throw Be})}).catch(ke=>{throw ke});if(Oe.data)try{var Te=e(Oe);return Promise.resolve(Te)}catch(ke){return Promise.reject(ke)}},getVisible=Oe=>{var e=Oe===void 0?!0:Oe;return typeof e=="string"&&(e==="true"?e=!0:e==="false"?e=!1:e=!0),e},getOpacity=Oe=>{var e=Oe===void 0?1:Oe;return typeof e=="string"&&(e=parseFloat(e)),isNaN(e)&&(e=1),e<0&&(e=0),e>1&&(e=1),e},_sfc_main$x={__name:"Layer",props:{layerOptions:Object,mapId:String},setup(Oe){const e=Oe,Te=distExports.useLogger();Te.debug(e.layerOptions);const ke=useDataStore(),Be=inject(e.mapId);var Ue=null;return onMounted(()=>{if(!(!e.layerOptions||Object.keys(e.layerOptions).length===0)){if(e.layerOptions.name&&e.layerOptions.service){var He=ke.getLayerByName(e.layerOptions.name,e.layerOptions.service),We=ke.getLayerParamsByName(e.layerOptions.name,e.layerOptions.service);He.params=We,Te.debug("layer to add",He);var Cn=e.layerOptions.service,En=e.layerOptions.name,An={visible:e.layerOptions.visible,opacity:e.layerOptions.opacity,gray:e.layerOptions.gray,sourceParams:{crossOrigin:"anonymous"}},Sn={preload:1/0,cacheSize:1024};switch(Cn){case"WMS":Ue=new LayerWMS({layer:En,configuration:He,apiKey:"ign_scan_ws",olParams:Object.assign(An,Sn)});break;case"WMTS":Ue=new LayerWMTS({layer:En,configuration:He,apiKey:"ign_scan_ws",olParams:Object.assign(An,Sn)});break;case"TMS":An.declutter=!0,Ue=new LayerMapBox({layer:En,configuration:He,apiKey:"ign_scan_ws"},An);break}}if(e.layerOptions.url&&e.layerOptions.format){var Tn=!1;const Bn=e.layerOptions.type.toLowerCase(),ei=e.layerOptions.format.toLowerCase();switch(Te.debug("layer to add",Bn),Bn){case"service":Tn=!0;var Ln=e.layerOptions.kind.toLowerCase();if(Ln==="mapbox")createMapBoxLayer(e.layerOptions).then(ti=>{Ue=ti,Be.addLayer(Ue)}).catch(ti=>{throw ti});else if(Ln==="wmts"||Ln==="wms")createServiceLayer(e.layerOptions).then(ti=>{Ue=ti,Be.addLayer(Ue)}).catch(ti=>{throw ti});else throw new Error("Le service est inconnu !");break;case"carte":throw"Not yet implemented !";case"compute":throw"Not yet implemented !";case"import":ei==="mapbox"?(Tn=!0,createMapBoxLayer(e.layerOptions).then(ti=>{Ue=ti,Be.addLayer(Ue)}).catch(ti=>{throw ti})):Ue=createVectorLayer(e.layerOptions);break;case"drawing":Ue=createVectorLayer(e.layerOptions);break}}Ue&&!Tn&&Be.addLayer(Ue)}}),onUnmounted(()=>{Be&&Ue&&Be.removeLayer(Ue)}),(He,We)=>(openBlock(),createElementBlock("div",null,[renderSlot(He.$slots,"default")]))}},_sfc_main$w={__name:"Layers",props:{selectedLayers:Object,selectedBookmarks:Object,mapId:String},setup(Oe){const e=Oe;distExports.useLogger();var Te=computed(()=>toRaw(e.selectedLayers).map(Be=>({name:Be.name,service:Be.service||Be.serviceParams.id.split(":")[1],key:Be.key,opacity:Be.hasOwnProperty("opacity")?Be.opacity:1,visible:Be.hasOwnProperty("visible")?Be.visible:!0,gray:Be.hasOwnProperty("gray")?Be.gray:!1}))),ke=computed(()=>toRaw(e.selectedBookmarks).map(Be=>({opacity:1,visible:!0,gray:!1,...Be})));return(Be,Ue)=>(openBlock(!0),createElementBlock(Fragment,null,renderList([...unref(Te),...unref(ke)],He=>(openBlock(),createBlock(_sfc_main$x,{key:He.key,"layer-options":He,"map-id":Oe.mapId},null,8,["layer-options","map-id"]))),128))}},__default__$r={name:"Carto"},_sfc_main$v=Object.assign(__default__$r,{props:{selectedControls:Array,selectedLayers:Object,selectedBookmarks:Object},setup(Oe){const e=Oe,Te=useMapStore(),ke=ref(null),Be=computed(()=>ke.value&&ke.value.mapRef);return(Ue,He)=>(openBlock(),createBlock(_sfc_main$V,{ref_key:"refMap",ref:ke,class:"map","map-id":unref(mainMap)},{default:withCtx(()=>[createVNode(_sfc_main$U,{"map-id":unref(mainMap),center:unref(Te).center,zoom:unref(Te).zoom},null,8,["map-id","center","zoom"]),unref(Be)?(openBlock(),createBlock(_sfc_main$y,{key:0,"control-options":e.selectedControls,"map-id":unref(mainMap)},null,8,["control-options","map-id"])):createCommentVNode("",!0),createVNode(_sfc_main$w,{"map-id":unref(mainMap),"selected-layers":e.selectedLayers,"selected-bookmarks":e.selectedBookmarks},null,8,["map-id","selected-layers","selected-bookmarks"])]),_:1},8,["map-id"]))}}),Carto=_export_sfc(_sfc_main$v,[["__scopeId","data-v-e4ebf47d"]]),_hoisted_1$i={class:"menu-content-list"},_hoisted_2$b={class:"menu-collapse-icon-wrapper"},_hoisted_3$4={class:"menu-content"},__default__$q={name:"MenuLateralWrapper"},_sfc_main$u=Object.assign(__default__$q,{props:mergeModels({side:String,visibility:Boolean,id:String,width:Number,padding:Number},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(Oe,{expose:e}){useCssVars(ni=>({"17e51b42":unref(Sn),"70d408ab":unref(Tn),"41cdc11a":unref(Ln)}));const Te=Oe,ke="ion:close",Be=.8325,Ue=computed(()=>({scale:Be.value,name:ke})),He=Te.width||550,We=Te.padding||30,Cn=useModel(Oe,"modelValue",!1),En=ref(He),An=ref(We),Sn=computed(()=>En.value+"px"),Tn=computed(()=>An.value+"px"),Ln=computed(()=>En.value-An.value+"px"),Bn=ref();function ei(){Cn.value=!1}function ti(){Cn.value=!0}return e({widthMenu:En,closeMenu:ei,openMenu:ti}),(ni,ri)=>{const si=Ie;return Oe.visibility?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["menu-toggle-wrap",`${Cn.value&&"is_expanded"} ${Te.side}`])},[createBaseVNode("div",{ref_key:"menuTabs",ref:Bn,class:"menu-logo-list"},[renderSlot(ni.$slots,"navButtons",{},void 0,!0)],512),withDirectives(createBaseVNode("div",_hoisted_1$i,[createBaseVNode("div",_hoisted_2$b,[createVNode(si,{id:Te.id,tertiary:"","no-outline":"",class:"menu-collapse-icon",onClick:ei},{default:withCtx(()=>[ri[0]||(ri[0]=createTextVNode(" Fermer ")),createVNode(unref(ue$1),normalizeProps(guardReactiveProps(unref(Ue))),null,16)]),_:1},8,["id"])]),createBaseVNode("div",_hoisted_3$4,[renderSlot(ni.$slots,"content",{},void 0,!0)])],512),[[vShow,Cn.value]])],2)):createCommentVNode("",!0)}}}),__unplugin_components_2=_export_sfc(_sfc_main$u,[["__scopeId","data-v-c65e0cc4"]]),__default__$p={name:"MenuLateralButton"},_sfc_main$t=Object.assign(__default__$p,{props:{icon:String,id:String,active:Boolean,title:String,side:String,visibility:Boolean},emits:["tabClicked"],setup(Oe,{expose:e,emit:Te}){const ke=useMapStore(),Be=useDomStore(),Ue=Oe,He=Ue.icon,We=Te,Cn=()=>{Ue.side=="left"&&Tn(),Ue.side=="right"&&Sn(),We("tabClicked",Ue.id)},En=useControlsPosition();function An(ti){let ni=[...ti.element.children].filter(ri=>{if(ri.className.includes("GPshowOpen"))return ri});ni[0].getAttribute("aria-pressed")==="true"&&ni[0].click()}function Sn(ti){ke.getMap().getControls().getArray().forEach(ni=>{En.right.includes(ni.CLASSNAME)&&An(ni)})}function Tn(){ke.getMap().getControls().getArray().forEach(ti=>{En.left.includes(ti.CLASSNAME)&&An(ti)})}function Ln(){console.log("click on button"+Ue.id),Bn.value.children[0].click()}const Bn=ref(null),ei=ref(Ue.id);return e({clickButton:Ln,button:Bn,id:ei}),onMounted(()=>{Ue.id=="MenuCatalogue"&&Be.setmenuCatalogueButton(Bn.value)}),(ti,ni)=>{const ri=Ie;return openBlock(),createElementBlock("div",{ref_key:"button",ref:Bn},[createVNode(ri,{id:unref(ei),secondary:"","aria-label":Oe.title,class:normalizeClass(`${Oe.active?"active":""}  navBarIcon ${Oe.visibility?"":"invisibleNavButton"} navButton`),icon:unref(He),"icon-only":!0,onClick:Cn},null,8,["id","aria-label","class","icon"])],512)}}}),__unplugin_components_1$1=_export_sfc(_sfc_main$t,[["__scopeId","data-v-392252b6"]]),_hoisted_1$h={class:"container"},__default__$o={name:"MenuTierce"},_sfc_main$s=Object.assign(__default__$o,{emits:["openControl","onModalShareOpen","onModalPrintOpen","onModalThemeOpen","onBookMarksOpen"],setup(Oe,{emit:e}){const Te=useMapStore(),ke=e;function Be(An){Te.getMap().getControls().getArray().forEach(Sn=>{Sn.CLASSNAME===An&&([...Sn.element.children].filter(Ln=>{if(Ln.className.includes("GPshowOpen"))return Ln})[0].click(),ke("openControl"))})}const Ue="mingcute:file-import-line",He=.8325;computed(()=>({scale:He.value,name:Ue}));var We=inject("services"),Cn=computed(()=>We.authenticated);const En=ref({authenticatedProperty:!Cn.value});return(An,Sn)=>{const Tn=Ie;return openBlock(),createElementBlock("div",_hoisted_1$h,[createVNode(Tn,{tertiary:"","no-outline":"",class:normalizeClass(unref(En)),icon:"ri-bookmark-line",onClick:Sn[0]||(Sn[0]=Ln=>An.$emit("onBookMarksOpen"))},{default:withCtx(()=>Sn[5]||(Sn[5]=[createTextVNode(" Mes enregistrements ")])),_:1},8,["class"]),Sn[10]||(Sn[10]=createBaseVNode("hr",null,null,-1)),createVNode(Tn,{tertiary:"","no-outline":"",icon:"mingcute:file-import-line",onClick:Sn[1]||(Sn[1]=Ln=>Be("LayerImport"))},{default:withCtx(()=>Sn[6]||(Sn[6]=[createTextVNode(" Importer des données ")])),_:1}),createVNode(Tn,{tertiary:"","no-outline":"",icon:"ant-design:link-outlined",onClick:Sn[2]||(Sn[2]=Ln=>An.$emit("onModalShareOpen"))},{default:withCtx(()=>Sn[7]||(Sn[7]=[createTextVNode(" Partager, intégrer la carte ")])),_:1}),createVNode(Tn,{tertiary:"","no-outline":"",icon:"material-symbols:print-outline",class:"tierce-print",onClick:Sn[3]||(Sn[3]=Ln=>An.$emit("onModalPrintOpen"))},{default:withCtx(()=>Sn[8]||(Sn[8]=[createTextVNode(" Imprimer ")])),_:1}),Sn[11]||(Sn[11]=createBaseVNode("hr",null,null,-1)),createVNode(Tn,{tertiary:"","no-outline":"",onClick:Sn[4]||(Sn[4]=Ln=>An.$emit("onModalThemeOpen"))},{default:withCtx(()=>Sn[9]||(Sn[9]=[createBaseVNode("span",{class:"fr-icon-theme-fill fr-link--icon-left"},null,-1),createTextVNode(" Paramètres d'affichage ")])),_:1})])}}}),MenuTierce=_export_sfc(_sfc_main$s,[["__scopeId","data-v-80adce18"]]),_hoisted_1$g={class:"fr-container"},_hoisted_2$a={class:"bookmark-buttons-container"},__default__$n={name:"MenuBookMarkNoData"},_sfc_main$r=Object.assign(__default__$n,{setup(Oe){const e=inject("emitter"),Te=[{label:"Enregistrer une carte",icon:"fr-icon-save-line",disabled:!1,iconOnly:!1,iconRight:!1,secondary:!0,class:"bookmark-button-container",onclick:()=>{}},{label:"Consulter le catalogue",icon:"fr-icon-highlight",iconOnly:!1,iconRight:!1,secondary:!0,class:"bookmark-button-container",onclick:()=>{e.dispatchEvent("catalog:open:clicked",{open:!0,componentName:"MenuCatalogue"})}},{label:"Ajouter une donnée",icon:"fr-icon-upload-line",iconOnly:!1,iconRight:!1,secondary:!0,class:"bookmark-button-container",onclick:()=>{e.dispatchEvent("layerimport:open:clicked",{open:!0,componentName:"LayerImport"})}}];return(ke,Be)=>{const Ue=qe;return openBlock(),createElementBlock("div",_hoisted_1$g,[Be[0]||(Be[0]=createBaseVNode("div",{class:"bookmark-content-container"},[createBaseVNode("h4",null," Aucun enregistrement pour le moment "),createBaseVNode("div",null," Enregsitrer vos cartes et données créées sur votre espace afin de les retrouver et de les utiliser à tout moment. "),createBaseVNode("div",{id:"location-france"})],-1)),createBaseVNode("div",_hoisted_2$a,[createVNode(Ue,{buttons:Te})])])}}}),MenuBookMarkNoData=_export_sfc(_sfc_main$r,[["__scopeId","data-v-8bbb195f"]]),getLayersFromPermalink=Oe=>{const e=useMapStore();var Te=useUrlParams(Oe);for(const ke in Te)if(Object.prototype.hasOwnProperty.call(Te,ke)&&ke!=="center"){const Be=Te[ke];e[ke]=Be}setTimeout(()=>{var ke=e.map;ke.getView().setZoom(e.zoom),ke.getView().setCenter([e.x,e.y])},0)},_hoisted_1$f={class:"container-bookmark-entry"},_hoisted_2$9={class:"container-bookmark-entry-advanced-options"},_hoisted_3$3={class:"container-bookmark-entry-advanced-infos fr-hint-text"},_hoisted_4$1={key:0},_hoisted_5$1={key:1},_hoisted_6$1={ref:"div-rename",class:"container-bookmark-entry-rename fr-hidden"},_hoisted_7$1={class:"container-bookmark-entry-buttons-rename"},__default__$m={name:"MenuBookMarkEntry"},_sfc_main$q=Object.assign(__default__$m,{props:{type:String,data:Object},setup(Oe){const e=useMapStore(),Te=Oe,ke=inject("services"),Be=inject("emitter"),Ue=ei=>{ke.getDocumentById(ei.id).then(ti=>{var ni=null;switch(ei.type){case"drawing":ni=ke.getDrawing;break;case"import":ni=ke.getImport;break;case"compute":throw ni=ke.getCompute,new Error(t.bookmark.failed_not_yet_implemented(ei.type));case"service":ni=ke.getService;break;case"carte":ni=ke.getCartes;break}if(!ni)throw new Error(t.bookmark.failed_type_unknow(ei.type));var ri=!1;ni.call(ke,ei.id).then(si=>{if(ei.type==="carte"){getLayersFromPermalink(si),push$1.success({title:t.bookmark.title,message:t.bookmark.success_add_data("permalien")});return}if(ei.type==="service"&&(ri=!0),ei.type==="drawing"&&(ri=!0),ei.type==="import"&&(ri=!0),ri){var ai=toShare(ti,{});e.addBookmark(ai)}}).then(()=>{push$1.success({title:t.bookmark.title,message:t.bookmark.success_add_data(ti.extra.format)})}).catch(si=>{throw si})}).catch(ti=>{console.error(ti),push$1.error({title:t.bookmark.title,message:t.bookmark.failed_add_data(ti.message)})})};onBeforeMount(()=>{}),onMounted(()=>{});const He=useTemplateRef("div-rename"),We=ref(""),Cn=ei=>{console.debug(ei),He.value.classList.toggle("fr-hidden"),We.value=Te.data.name},En=ei=>{console.debug(ei);var ti={uuid:Te.data.id,type:Te.data.type};ke.deleteDocument(ti).then(ni=>{Be.dispatchEvent("document:deleted",{uuid:ni.uuid,action:ni.action})}).then(()=>{})},An=ei=>{console.debug(ei);var ti={uuid:Te.data.id,type:Te.data.type};ke.exportDocument(ti).then(ni=>(Be.dispatchEvent("document:exported",{uuid:ni.uuid,action:ni.action}),ni)).then(ni=>{var ri=ni.extra.mimeType,si=ni.extra.content,ai=ni.extra.name,li=ni.extra.ext,Pi=ai.includes(li)?ai:ai+"."+li,pi=document.createElement("a"),vi="utf-8";if(pi.setAttribute("href","data:"+ri+";charset="+vi+","+encodeURIComponent(si)),pi.setAttribute("download",Pi),document.createEvent){var Ri=document.createEvent("MouseEvents");Ri.initEvent("click",!0,!0),pi.dispatchEvent(Ri)}else pi.click()})},Sn=ei=>{console.debug(ei);var ti={uuid:Te.data.id,type:Te.data.type,name:We.value};We.value!==Te.data.name&&ke.renameDocument(ti).then(ni=>{Be.dispatchEvent("document:updated",{uuid:ni.uuid,action:ni.action})}).then(()=>{He.value.classList.toggle("fr-hidden")}).then(()=>{})},Tn=ei=>{He.value.classList.toggle("fr-hidden")},Ln=[{label:"Renommer",icon:"fr-icon-edit-line","data-id":Te.data.id,"data-type":Te.data.type,"data-name":Te.data.name,disabled:!1,iconOnly:!0,iconRight:!1,secondary:!0,noOutline:!0,style:"margin: unset;box-shadow: unset;",class:"bookmark-button-container-advanced",onclick:Cn},{label:"Supprimer",icon:"fr-icon-delete-line","data-id":Te.data.id,"data-type":Te.data.type,"data-name":Te.data.name,disabled:!1,iconOnly:!0,iconRight:!1,secondary:!0,noOutline:!0,style:"margin: unset;box-shadow: unset;",class:"bookmark-button-container-advanced",onclick:En}],Bn=[...Ln,{label:"Exporter",icon:"fr-icon-download-line","data-id":Te.data.id,"data-type":Te.data.type,"data-name":Te.data.name,disabled:!1,iconOnly:!0,iconRight:!1,secondary:!0,noOutline:!0,style:"margin: unset;box-shadow: unset;",class:"bookmark-button-container-advanced",onclick:An}];return(ei,ti)=>{const ni=Ie,ri=qe,si=ze;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$f,[createVNode(ni,{"data-id":Oe.data.id,"data-type":Oe.data.type,title:Oe.data.name,class:"button-bookmark-entry",tertiary:"","no-outline":"",icon:Oe.data.icon,onClick:ti[0]||(ti[0]=ai=>Ue(Oe.data))},{default:withCtx(()=>[createTextVNode(toDisplayString(Oe.data.name),1)]),_:1},8,["data-id","data-type","title","icon"]),createBaseVNode("div",_hoisted_2$9,[Oe.data.type==="carte"?(openBlock(),createBlock(ri,{key:0,buttons:Ln,"inline-layout-when":"",size:"sm"})):(openBlock(),createBlock(ri,{key:1,buttons:Bn,"inline-layout-when":"",size:"sm"}))])]),createBaseVNode("div",_hoisted_3$3,[createBaseVNode("span",null,toDisplayString(Oe.data.type_fr),1),Oe.data.format?(openBlock(),createElementBlock("span",_hoisted_4$1," - "+toDisplayString(Oe.data.format),1)):createCommentVNode("",!0),Oe.data.date?(openBlock(),createElementBlock("span",_hoisted_5$1," - "+toDisplayString(Oe.data.date),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_6$1,[createVNode(si,{modelValue:unref(We),"onUpdate:modelValue":ti[1]||(ti[1]=ai=>isRef(We)?We.value=ai:null),label:"Renommer",placeholder:""},null,8,["modelValue"]),createBaseVNode("div",_hoisted_7$1,[createVNode(ni,{size:"sm",icon:"ri:close-line",tertiary:"","no-outline":"",class:"fr-p-1w",onClick:Tn}),createVNode(ni,{size:"sm",icon:"ri:check-line",tertiary:"","no-outline":"",class:"fr-p-1w",onClick:Sn})])],512),renderSlot(ei.$slots,"default")],64)}}}),_hoisted_1$e={class:"fr-container fr-p-1w"},_hoisted_2$8={key:0},_hoisted_3$2={class:"search-bookmark fr-p-1w"},_hoisted_4={class:"tabs-bookmark fr-p-1w"},_hoisted_5={ref:"div-map-name",class:"container-bookmark-map-name fr-hidden"},_hoisted_6={class:"container-bookmark-map-buttons-name"},_hoisted_7={class:"container-bookmark-map-item fr-p-1w"},_hoisted_8={class:"container-bookmark-data-item fr-p-1w"},__default__$l={name:"MenuBookMarkDataList"},_sfc_main$p=Object.assign(__default__$l,{props:{title:String},setup(Oe){const e=useMapStore(),Te=inject("services"),ke=inject("emitter"),Be=ref("");function Ue(Pi){Be.value=Pi}const He="Liste des données",We=[{title:"Cartes",tabId:"tab-bookmark-maps",panelId:"tab-content-bookmark-maps"},{title:"Données",tabId:"tab-bookmark-data",panelId:"tab-content-bookmark-data"}],Cn=ref(0),En=Pi=>{var pi=Pi;return Te.labels.includes(Pi)?(Pi==="drawing"&&(pi="croquis"),Pi==="compute"&&(pi="calcul")):pi=Pi,pi},An=Pi=>{var pi="";return Te.labels.includes(Pi)?(Pi==="drawing"&&(pi="fr-icon-edit-line"),Pi==="import"&&(pi="fr-icon-file-download-line"),Pi==="service"&&(pi="fr-icon-cloud-line"),Pi==="compute"&&(pi="fr-icon-settings-5-line")):pi="fr-icon-pencil-line",pi},Sn=ref(null),Tn=computed(()=>{Sn.value&&console.log("update data !");var Pi=[];for(const di in Te.documents)if(Object.prototype.hasOwnProperty.call(Te.documents,di)){if(di==="carte")continue;var pi=Te.documents[di];if(!pi)continue;for(let ci=0;ci<pi.length;ci++){var vi=pi[ci],Ri=[".geojson",".gpx",".kml",".json"],Fi=Ri.find(Mi=>vi.name.includes(Mi));Pi.push({id:vi._id,name:Fi?vi.name.replace(Fi,"").slice(0,-1):vi.name,type:di,type_fr:En(di),icon:An(di)})}}return Pi.filter(di=>!Be.value||di.name.includes(Be.value))}),Ln=computed(()=>{Sn.value&&console.log("update map !");var Pi=[];if(Te.documents.carte)for(let pi=0;pi<Te.documents.carte.length;pi++){const vi=Te.documents.carte[pi];Pi.push({id:vi._id,name:vi.name,type:"carte",type_fr:"permalien",icon:"fr-icon-link"})}return Pi.filter(pi=>!Be.value||pi.name.includes(Be.value))}),Bn=Pi=>{console.log(Pi);var pi=Date.now();Sn.value=Object.assign(Pi,{timestamp:pi})};ke.addEventListener("document:saved",Bn),ke.addEventListener("document:updated",Bn),ke.addEventListener("document:deleted",Bn),ke.addEventListener("document:exported",Bn);const ei=()=>{ni.value.classList.toggle("fr-hidden")},ti=()=>{ke.dispatchEvent("layerimport:open:clicked",{open:!0,componentName:"LayerImport"})},ni=useTemplateRef("div-map-name"),ri=ref(""),si=Pi=>{ni.value.classList.toggle("fr-hidden");var pi=e.permalink;const vi={name:ri.value,description:"permalien",format:"json",target:"internal",type:"carte",content:JSON.stringify({name:ri.value,date:new Date().toISOString(),permalink:pi})};li(vi).then(()=>{}).then(()=>{ri.value=""}).then(()=>{push$1.success({title:t.bookmark.title,message:t.bookmark.save_map_success})}).catch(Ri=>{console.error(Ri),push$1.error({title:t.bookmark.title,message:t.bookmark.save_failed})})},ai=Pi=>{ni.value.classList.toggle("fr-hidden")},li=async Pi=>{try{const Ri=await Te.setDocument(Pi);var pi=Ri.uuid,vi=Ri.action;return ke.dispatchEvent("document:saved",{uuid:pi,action:vi}),Ri}catch(Ri){throw console.error(Ri),Ri}};return onBeforeMount(()=>{}),onMounted(()=>{}),(Pi,pi)=>{const vi=Ze,Ri=Ie,Fi=ze,di=Ut$1,ci=ou;return openBlock(),createElementBlock("div",_hoisted_1$e,[Oe.title?(openBlock(),createElementBlock("h4",_hoisted_2$8,toDisplayString(Oe.title),1)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_3$2,[createVNode(vi,{modelValue:unref(Be),"onUpdate:modelValue":[pi[0]||(pi[0]=Mi=>isRef(Be)?Be.value=Mi:null),Ue],label:"Rechercher un enregistrement"},null,8,["modelValue"])]),createBaseVNode("div",_hoisted_4,[createVNode(ci,{id:"tabs-bookmark",modelValue:unref(Cn),"onUpdate:modelValue":pi[4]||(pi[4]=Mi=>isRef(Cn)?Cn.value=Mi:null),"tab-list-name":He,"tab-titles":We},{default:withCtx(()=>[createVNode(di,{"panel-id":"tab-content-bookmark-maps","tab-id":"tab-bookmark-maps"},{default:withCtx(()=>[createVNode(Ri,{label:"Enregistrer la carte",tertiary:"",size:"sm",class:"button-action",icon:"fr-icon-save-line",onClick:pi[1]||(pi[1]=Mi=>ei())}),createBaseVNode("div",_hoisted_5,[createVNode(Fi,{modelValue:unref(ri),"onUpdate:modelValue":pi[2]||(pi[2]=Mi=>isRef(ri)?ri.value=Mi:null),label:"Nommer",placeholder:""},null,8,["modelValue"]),createBaseVNode("div",_hoisted_6,[createVNode(Ri,{size:"sm",icon:"ri:close-line",tertiary:"","no-outline":"",class:"fr-p-1w",onClick:ai}),createVNode(Ri,{size:"sm",icon:"ri:check-line",tertiary:"","no-outline":"",class:"fr-p-1w",onClick:si})])],512),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ln),Mi=>(openBlock(),createElementBlock("div",_hoisted_7,[createVNode(_sfc_main$q,{data:Mi,type:"map"},null,8,["data"])]))),256))]),_:1}),createVNode(di,{"panel-id":"tab-content-bookmark-data","tab-id":"tab-bookmark-data"},{default:withCtx(()=>[createVNode(Ri,{label:"Ajouter une donnée",tertiary:"",size:"sm",class:"button-action",icon:"fr-icon-upload-line",onClick:pi[3]||(pi[3]=Mi=>ti())}),(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Tn),Mi=>(openBlock(),createElementBlock("div",_hoisted_8,[createVNode(_sfc_main$q,{data:Mi,type:"data"},null,8,["data"])]))),256))]),_:1})]),_:1},8,["modelValue"])])])}}}),MenuBookMarkDataList=_export_sfc(_sfc_main$p,[["__scopeId","data-v-c75a0f91"]]),_hoisted_1$d={key:0},_hoisted_2$7={key:1},__default__$k={name:"MenuBookMarkLoggued"},_sfc_main$o=Object.assign(__default__$k,{setup(Oe){var e=inject("services");const Te=inject("emitter"),ke=()=>{var He=!0;for(const We in e.documents)if(Object.prototype.hasOwnProperty.call(e.documents,We)){const Cn=e.documents[We];Cn&&Cn.length&&(He=!1)}return He};var Be=ref(!1),Ue=computed(()=>{var He=ke();return Be.value?ke():He});return Te.addEventListener("service:documents:loaded",He=>{Be.value=!Be.value}),Te.addEventListener("document:saved",He=>{Be.value=!Be.value}),Te.addEventListener("document:deleted",He=>{Be.value=!Be.value}),Te.addEventListener("document:updated",He=>{Be.value=!Be.value}),onMounted(()=>{}),(He,We)=>unref(Ue)?(openBlock(),createElementBlock("div",_hoisted_1$d,[createVNode(MenuBookMarkNoData)])):(openBlock(),createElementBlock("div",_hoisted_2$7,[createVNode(MenuBookMarkDataList,{title:"Mes enregistrements"})]))}}),_hoisted_1$c={class:"container"},__default__$j={name:"MenuBookMarks"},_sfc_main$n=Object.assign(__default__$j,{setup(Oe){var e=inject("services"),Te=computed(()=>e.authenticated);return(ke,Be)=>(openBlock(),createElementBlock("div",_hoisted_1$c,[unref(Te)?(openBlock(),createBlock(_sfc_main$o,{key:0})):createCommentVNode("",!0)]))}}),MenuBookMarks=_export_sfc(_sfc_main$n,[["__scopeId","data-v-274c5bc4"]]),__default__$i={name:"LeftMenuTool"},_sfc_main$m=Object.assign(__default__$i,{props:{},emits:["onModalShareOpen","onModalPrintOpen","onModalThemeOpen","onModalLoginOpen"],setup(Oe,{emit:e}){const Te="left",ke=ref(),Be=computed(()=>[{componentName:"MenuTierce",icon:"ri-menu-fill",title:"Menu carte",visibility:!0},{componentName:"MenuBookMarks",icon:"ri-bookmark-line",title:"Mes Enregistrements",visibility:!1}]),Ue=ref("MenuCatalogueContent"),He=ref(null),We=300;function Cn(ei){En(ei)&&ke.value?He.value.closeMenu():(Ue.value=ei+"Content",ei==="MenuBookMarks"?He.value.widthMenu=400:He.value.widthMenu=We,He.value.openMenu())}function En(ei){return Ue.value.replace("Content","")===ei}var An=inject("services"),Sn=computed(()=>An.authenticated);function Tn(){window.__ENV__.IAM_DISABLE!=="1"&&Ln.value.forEach(ei=>{ei.id==="MenuBookMarks"&&(Sn.value?ei.clickButton():Bn("onModalLoginOpen"))})}const Ln=useTemplateRef("tabs"),Bn=e;return(ei,ti)=>(openBlock(),createBlock(__unplugin_components_2,{id:"MenuCatalogueContentClose",ref_key:"wrapper",ref:He,modelValue:unref(ke),"onUpdate:modelValue":ti[3]||(ti[3]=ni=>isRef(ke)?ke.value=ni:null),side:Te,visibility:!0,width:We,padding:16},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuTierceContent",class:normalizeClass([unref(Ue)==="MenuTierceContent"?"activeTab":"inactiveTab"])},[createVNode(MenuTierce,{onOnModalShareOpen:ti[0]||(ti[0]=ni=>ei.$emit("onModalShareOpen")),onOnModalPrintOpen:ti[1]||(ti[1]=ni=>ei.$emit("onModalPrintOpen")),onOnModalThemeOpen:ti[2]||(ti[2]=ni=>ei.$emit("onModalThemeOpen")),onOnBookMarksOpen:Tn})],2),createBaseVNode("div",{id:"MenuBookMarksContent",class:normalizeClass([unref(Ue)==="MenuBookMarksContent"?"activeTab":"inactiveTab"])},[createVNode(MenuBookMarks)],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Be),ni=>(openBlock(),createBlock(__unplugin_components_1$1,{id:ni.componentName,ref_for:!0,ref:"tabs",side:Te,icon:ni.icon,visibility:ni.visibility,active:En(ni.componentName),title:ni.title,onTabClicked:Cn},null,8,["id","icon","visibility","active","title"]))),256))]),_:1},8,["modelValue"]))}}),LeftMenuTool=_export_sfc(_sfc_main$m,[["__scopeId","data-v-aef1e437"]]),_hoisted_1$b={class:"title-Expand"},__default__$h={},_sfc_main$l=Object.assign(__default__$h,{__name:"CustomAccordeon",props:{description:String},setup(Oe){const e="ri-arrow-down-s-line",Te="ri-arrow-drop-up-line",ke="Afficher plus",Be="Afficher moins",Ue=ref(!1),He=computed(()=>Ue.value?Be:ke);function We(){Ue.value=!Ue.value}return onMounted(()=>{}),(Cn,En)=>{const An=Ie;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$b,[withDirectives(createBaseVNode("p",{class:"fr-hint-text hint-class"},toDisplayString(Oe.description),513),[[vShow,unref(Ue)]]),createVNode(An,{tertiary:"","icon-right":"","no-outline":"",size:"sm",icon:unref(Ue)?Te:e,onClick:En[0]||(En[0]=Sn=>We())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(He)),1)]),_:1},8,["icon"])])])}}}),__unplugin_components_1=_export_sfc(_sfc_main$l,[["__scopeId","data-v-902df520"]]),__default__$g={name:"LayerCatalogue"},_sfc_main$k=Object.assign(__default__$g,{props:{layer:Object,active:Boolean},setup(Oe){const e=useMapStore(),Te=Oe,ke=ref(Te.active);function Be(Ue,He){ke.value=Ue,ke.value?e.addLayer(He.key):e.removeLayer(He.key)}return onUpdated(()=>{ke.value=Te.active}),(Ue,He)=>{const We=lt$2,Cn=__unplugin_components_1;return openBlock(),createElementBlock(Fragment,null,[createVNode(We,{"model-value":unref(ke),label:Oe.layer.title,"onUpdate:modelValue":He[0]||(He[0]=En=>Be(En,Oe.layer))},null,8,["model-value","label"]),createVNode(Cn,{class:"layer-description",description:Oe.layer.description},null,8,["description"])],64)}}}),__default__$f={name:"LayerList"},_sfc_main$j=Object.assign(__default__$f,{props:{layers:Array,selectedLayers:Object,listName:String},setup(Oe){const e=Oe;function Te(ke){let Be=ke.key?ke.key:ke.name;return Be=Be+"-"+e.listName,Be}return(ke,Be)=>(openBlock(),createElementBlock("div",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Oe.layers,Ue=>(openBlock(),createElementBlock("div",{key:Te(Ue)},[createVNode(_sfc_main$k,{active:Oe.selectedLayers?Oe.selectedLayers.filter(He=>He.key==Ue.key).length>0:!1,layer:Ue},null,8,["active","layer"])]))),128))]))}}),__default__$e={name:"MenuCatalogueThematique"},_sfc_main$i=Object.assign(__default__$e,{props:{thematicLabel:String,id:Number,layersCount:Number},setup(Oe){const e=Oe,Te=computed(()=>e.thematicLabel+` (${e.layersCount})`);return(ke,Be)=>{const Ue=Da;return openBlock(),createBlock(Ue,{id:"accordion-"+Oe.id,title:unref(Te)},{default:withCtx(()=>[renderSlot(ke.$slots,"default")]),_:3},8,["id","title"])}}}),_hoisted_1$a={class:"catalogue-content-with-radio-btn"},__default__$d={name:"DataLayerCatalogue"},_sfc_main$h=Object.assign(__default__$d,{props:{dataLayers:Object,currDataFilter:String,selectedLayers:Object},setup(Oe){const e=Oe,Te=useDataStore(),ke=computed(()=>Te.getThematics().map(We=>[We[0],e.dataLayers.filter(Cn=>We[1].includes(Cn.key))])),Be=computed(()=>Te.getProducers().map(We=>[We[0],e.dataLayers.filter(Cn=>We[1].includes(Cn.key))])),Ue=ref(-1),He=ref(-1);return(We,Cn)=>{const En=_sfc_main$j,An=_sfc_main$i,Sn=Ta;return openBlock(),createElementBlock("div",_hoisted_1$a,[createVNode(Sn,{modelValue:unref(Ue),"onUpdate:modelValue":Cn[0]||(Cn[0]=Tn=>isRef(Ue)?Ue.value=Tn:null)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Be),(Tn,Ln)=>withDirectives((openBlock(),createElementBlock("div",{key:Tn[0]},[withDirectives((openBlock(),createBlock(An,{id:Ln,key:Tn[0]+"-menuCatalogueThematique","thematic-label":Tn[0],"layers-count":Tn[1].length},{default:withCtx(()=>[Ln==unref(Ue)?(openBlock(),createBlock(En,{key:Tn[0],"list-name":Tn[0],"selected-layers":Oe.selectedLayers,layers:Tn[1]},null,8,["list-name","selected-layers","layers"])):createCommentVNode("",!0)]),_:2},1032,["id","thematic-label","layers-count"])),[[vShow,Tn[1].length>0]])],512)),[[vShow,Oe.currDataFilter==="producteur"]])),128))]),_:1},8,["modelValue"]),createVNode(Sn,{modelValue:unref(He),"onUpdate:modelValue":Cn[1]||(Cn[1]=Tn=>isRef(He)?He.value=Tn:null)},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ke),(Tn,Ln)=>withDirectives((openBlock(),createElementBlock("div",{key:Tn[0]},[withDirectives((openBlock(),createBlock(An,{id:Ln,key:Tn[0]+"-menuCatalogueThematique","thematic-label":Tn[0],"layers-count":Tn[1].length},{default:withCtx(()=>[Ln==unref(He)?(openBlock(),createBlock(En,{key:Tn[0],"list-name":Tn[0],"selected-layers":Oe.selectedLayers,layers:Tn[1]},null,8,["list-name","selected-layers","layers"])):createCommentVNode("",!0)]),_:2},1032,["id","thematic-label","layers-count"])),[[vShow,Tn[1].length>0]])],512)),[[vShow,Oe.currDataFilter==="theme"]])),128))]),_:1},8,["modelValue"]),withDirectives(createBaseVNode("div",null,[createVNode(En,{"list-name":"tout","selected-layers":Oe.selectedLayers,layers:e.dataLayers},null,8,["selected-layers","layers"])],512),[[vShow,Oe.currDataFilter=="tout"]])])}}});function useSearchInArray(Oe,e,Te){return Oe.filter(ke=>{if(Te.map(Be=>{if(ke.hasOwnProperty(Be)&&ke[Be]&&ke[Be].toLowerCase().includes(e==null?void 0:e.toLowerCase()))return!0}).includes(!0))return ke})}const _hoisted_1$9={class:"catalogue-container"},_hoisted_2$6={class:"catalogue-search-bar"},__default__$c={name:"CatalogueMenu"},_sfc_main$g=Object.assign(__default__$c,{props:{layers:Object,selectedLayers:Object},setup(Oe){const e=distExports.useLogger();useMapStore();const Te=Oe;e.debug(Te.layers);const ke=ref(""),Be=ref(""),Ue=useDebounceFn(()=>{Be.value=ke.value},300);watch(ke,()=>{Ue()});const He=computed(()=>useSearchInArray(Object.values(Te.layers),Be.value,["title","description","name"])),We=computed(()=>He.value.filter(ei=>{if(ei.hasOwnProperty("base")&&ei.base)return ei}).sort((ei,ti)=>ei.title.localeCompare(ti.title,"fr",{sensitivity:"base"}))),Cn=computed(()=>He.value.filter(ei=>{if(!ei.hasOwnProperty("base")||!ei.base)return ei}).sort((ei,ti)=>ei.title.localeCompare(ti.title,"fr",{sensitivity:"base"}))),En="Liste des couches",An=[{title:"Fonds de carte",tabId:"tab-0",panelId:"tab-content-0"},{title:"Données",tabId:"tab-1",panelId:"tab-content-1"}],Sn=ref(!0),Tn=ref(0),Ln=[{label:"Producteur",value:"producteur"},{label:"Thème",value:"theme"},{label:"Tout",value:"tout"}],Bn=ref("producteur");return(ei,ti)=>{const ni=Ze,ri=Ut$1,si=Bi,ai=ou;return openBlock(),createElementBlock("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$6,[createVNode(ni,{modelValue:unref(ke),"onUpdate:modelValue":ti[0]||(ti[0]=li=>isRef(ke)?ke.value=li:null)},null,8,["modelValue"])]),createVNode(ai,{modelValue:unref(Tn),"onUpdate:modelValue":ti[2]||(ti[2]=li=>isRef(Tn)?Tn.value=li:null),"tab-list-name":En,"tab-titles":An},{default:withCtx(()=>[createVNode(ri,{class:"catalogue-content","panel-id":"tab-content-0","tab-id":"tab-0",asc:unref(Sn)},{default:withCtx(()=>[createVNode(_sfc_main$j,{"list-name":"baseLayer","selected-layers":Oe.selectedLayers,layers:unref(We)},null,8,["selected-layers","layers"])]),_:1},8,["asc"]),createVNode(ri,{"panel-id":"tab-content-1","tab-id":"tab-1",asc:unref(Sn)},{default:withCtx(()=>[createVNode(si,{inline:!0,"model-value":unref(Bn),small:!0,name:"filtre",options:Ln,"onUpdate:modelValue":ti[1]||(ti[1]=li=>Bn.value=li)},null,8,["model-value"]),createVNode(_sfc_main$h,{"data-layers":unref(Cn),"curr-data-filter":unref(Bn),"selected-layers":Oe.selectedLayers},null,8,["data-layers","curr-data-filter","selected-layers"])]),_:1},8,["asc"])]),_:1},8,["modelValue"])])}}}),__unplugin_components_0=_export_sfc(_sfc_main$g,[["__scopeId","data-v-e101217a"]]),_hoisted_1$8={class:"control-list-element"},__default__$b={name:"ControlListElement"},_sfc_main$f=Object.assign(__default__$b,{props:mergeModels({controlListElementOptions:Object,selectedControls:()=>[]},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Oe){const e=Oe,Te=useModel(Oe,"modelValue"),ke=ref();return watch(ke,Be=>{Be===!0&&!Te.value.includes(e.controlListElementOptions.name)&&(Te.value=[...Te.value,e.controlListElementOptions.name]),Be===!1&&(Te.value=Te.value.filter(Ue=>Ue!==e.controlListElementOptions.name))}),onMounted(()=>{}),onUpdated(()=>{}),(Be,Ue)=>{const He=Su;return openBlock(),createElementBlock("tr",_hoisted_1$8,[Ue[1]||(Ue[1]=createBaseVNode("td",{class:"control-list-element-img"},null,-1)),createBaseVNode("td",null,[createVNode(He,mergeProps({modelValue:unref(ke),"onUpdate:modelValue":Ue[0]||(Ue[0]=We=>isRef(ke)?ke.value=We:null),disabled:Oe.controlListElementOptions.disabled,hint:Oe.controlListElementOptions.hint,"input-id":Oe.controlListElementOptions.id,label:Oe.controlListElementOptions.label,"label-left":"","model-value":Te.value===!0||Array.isArray(Te.value)&&Te.value.includes(Oe.controlListElementOptions.name)},Be.$attrs),null,16,["modelValue","disabled","hint","input-id","label","model-value"])])])}}}),ControlListElement=_export_sfc(_sfc_main$f,[["__scopeId","data-v-60ded7fa"]]),_hoisted_1$7={class:"control-container"},_hoisted_2$5={class:"control-search-bar"},_hoisted_3$1={class:"control-content"},__default__$a={name:"MenuControl"},_sfc_main$e=Object.assign(__default__$a,{props:mergeModels({selectedControls:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Oe){distExports.useLogger();const e=useMapStore(),Te=Oe,ke=useModel(Oe,"modelValue"),Be=useControlsMenuOptions(),Ue=computed(()=>Be.filter(Cn=>{if(Cn.label.toLowerCase().includes(He.value.toLowerCase())||Cn.hint.toLowerCase().includes(He.value.toLowerCase())||Cn.name.toLowerCase().includes(He.value.toLowerCase()))return Cn}));computed(()=>Te.selectedControls?Ue.value.filter(Cn=>{if(Te.selectedControls.includes(Cn.name))return Cn}):[]),ref(0),ref(!0);const He=ref("");function We(Cn){He.value=Cn}return watch(ke,Cn=>{e.cleanControls();for(let En=0;En<Cn.length;En++){const An=Cn[En];e.addControl(An)}}),onMounted(()=>{}),onUpdated(()=>{}),(Cn,En)=>{const An=Ze;return openBlock(),createElementBlock("div",_hoisted_1$7,[En[1]||(En[1]=createBaseVNode("h4",null,"Gestion d'outils",-1)),createBaseVNode("div",_hoisted_2$5,[createVNode(An,{"model-value":unref(He),"onUpdate:modelValue":We},null,8,["model-value"])]),createBaseVNode("div",_hoisted_3$1,[createBaseVNode("table",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ue),(Sn,Tn)=>(openBlock(),createBlock(ControlListElement,{key:Tn,modelValue:ke.value,"onUpdate:modelValue":En[0]||(En[0]=Ln=>ke.value=Ln),"model-value":Te.selectedControls,"control-list-element-options":Sn},null,8,["modelValue","model-value","control-list-element-options"]))),128))])])])}}}),MenuControl=_export_sfc(_sfc_main$e,[["__scopeId","data-v-1620d6a7"]]),__default__$9={name:"RightMenuTool"},_sfc_main$d=Object.assign(__default__$9,{props:{selectedControls:{Object},selectedLayers:{Object}},setup(Oe){const e=useDataStore(),Te="right",ke=computed(()=>[{componentName:"MenuCatalogue",icon:"octicon:book-24",title:"Catalogue de données",visibility:!0},{componentName:"MenuControl",icon:"ri:tools-line",title:"Catalogue d'outils",visibility:!0}]),Be=ref("MenuControlContent"),Ue=ref(),He=ref(null);function We(An){En(An)&&Ue.value?He.value.closeMenu():(Be.value=An+"Content",He.value.openMenu())}inject("emitter").addEventListener("catalog:open:clicked",An=>{We(An.componentName)});function En(An){return Be.value.replace("Content","")===An}return(An,Sn)=>{const Tn=__unplugin_components_0,Ln=__unplugin_components_1$1,Bn=__unplugin_components_2;return openBlock(),createBlock(Bn,{id:unref(Be),ref_key:"wrapper",ref:He,modelValue:unref(Ue),"onUpdate:modelValue":Sn[0]||(Sn[0]=ei=>isRef(Ue)?Ue.value=ei:null),side:Te,visibility:!0,width:500},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuCatalogueContent",class:normalizeClass([unref(Be)==="MenuCatalogueContent"?"activeTab":"inactiveTab"])},[createVNode(Tn,{"selected-layers":Oe.selectedLayers,layers:unref(e).getLayers()},null,8,["selected-layers","layers"])],2),createBaseVNode("div",{id:"MenuControlContent",class:normalizeClass([unref(Be)==="MenuControlContent"?"activeTab":"inactiveTab"])},[createVNode(MenuControl,{"selected-controls":Oe.selectedControls},null,8,["selected-controls"])],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ke),ei=>(openBlock(),createBlock(Ln,{id:ei.componentName,visibility:ei.visibility,side:Te,icon:ei.icon,active:En(ei.componentName),title:ei.title,onTabClicked:We},null,8,["id","visibility","icon","active","title"]))),256))]),_:1},8,["id","modelValue"])}}}),RightMenuTool=_export_sfc(_sfc_main$d,[["__scopeId","data-v-6ccbae66"]]),__default__$8={name:"ModalLogin"},_sfc_main$c=Object.assign(__default__$8,{setup(Oe,{expose:e}){const Te=useEulerian(),ke=useRouter(),Be="Se connecter à cartes.gouv.fr",Ue="fr-icon-account-fill",He=[{label:"Se connecter",onClick(){We.value=!1,ke.push({path:"/login"})}},{label:"Annuler",tertiary:!0,onClick(){We.value=!1}}],We=ref(!1);We.value&&Te.pause();const Cn=()=>{We.value=!0,Te.pause()},En=()=>{We.value=!1,Te.resume()};return e({openModalLogin:Cn,onModalLoginClose:En}),(An,Sn)=>{const Tn=Vt$1;return openBlock(),createBlock(Tn,{opened:unref(We),title:Be,size:"md",icon:Ue,"is-alert":!0,actions:He,onClose:En},{default:withCtx(()=>Sn[0]||(Sn[0]=[createBaseVNode("p",null," Pour enregistrer vos données, vous devez vous identifier ou créer un compte sur cartes.gouv.fr ",-1)])),_:1},8,["opened"])}}}),_hoisted_1$6={class:"title-copy"},_hoisted_2$4={class:"fr-hint-text hint-class"},__default__$7={},_sfc_main$b=Object.assign(__default__$7,{__name:"TextCopyToClipboard",props:{copiedText:String,label:String,description:String},setup(Oe){const e=useMatchMedia("SM"),Te=Oe;ref("");const{copy:ke}=useClipboard({}),Be="ri:file-copy-line",Ue="ic:outline-check",He="Copier",We="Copié",Cn=ref(Be),En=ref(He),An=ref(.8325),Sn=computed(()=>typeof Cn.value=="string"?{scale:An.value,name:Cn.value}:{scale:An.value,...Cn.value});function Tn(){ke(Te.copiedText),Cn.value=Ue,En.value=We,setTimeout(()=>{Cn.value=Be,En.value=He},5e3)}return onMounted(()=>{}),(Ln,Bn)=>{const ei=Ie;return openBlock(),createElementBlock("div",null,[createBaseVNode("div",_hoisted_1$6,[createBaseVNode("div",null,toDisplayString(Oe.label),1),createVNode(ei,{secondary:"","icon-right":"","icon-only":unref(e),icon:unref(Sn),onClick:Bn[0]||(Bn[0]=ti=>Tn())},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(En)),1)]),_:1},8,["icon-only","icon"])]),createBaseVNode("p",_hoisted_2$4,toDisplayString(Oe.description),1)])}}}),TextCopyToClipboard=_export_sfc(_sfc_main$b,[["__scopeId","data-v-9b210566"]]),__default__$6={},_sfc_main$a=Object.assign(__default__$6,{__name:"ShareModal",setup(Oe,{expose:e}){const Te=useEulerian(),ke=useDataStore(),Be=useMapStore(),Ue="Partager une carte",He="lg",We=ref(!1),Cn=()=>{We.value=!0,Te.pause()},En=()=>{We.value=!1,Te.resume()},An=ke.getContacts(),Sn=computed(()=>encodeURI(Be.permalink).replaceAll("&","%26")),Tn=computed(()=>({address:An.mail,subject:"Cartes à consulter sur cartes.gouv.fr",body:`Bonjour,%0AJe vous invite à consulter cette carte sur Cartes.gouv.fr :%0A${Sn.value}`})),Ln=computed(()=>({to:`mailto:${Tn.value.address}?subject=${Tn.value.subject}&body=${Tn.value.body}`,label:"Envoyer un mail"})),Bn=computed(()=>[{name:"facebook",label:"Partager sur Facebook",url:An.networks.facebook+"?display=popup&u="+Be.permalink},{name:"linkedin",label:"Partager sur LinkedIn",url:An.networks.linkedin+"?url="+Be.permalink+"&title=Ma%20carte%20IGN"},{name:"instagram",label:"Partager sur Instagram",url:An.networks.instagram}]),ei=computed(()=>`<iframe
    width="600" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
    sandbox="allow-forms allow-scripts allow-same-origin"
    src="${Be.permalinkShare}"
    allowfullscreen>
  </iframe>`);return ref(null),onMounted(()=>{nextTick(function(){})}),onBeforeMount(()=>{nextTick(function(){})}),e({onModalShareOpen:Cn,onModalShareClose:En}),(ti,ni)=>{const ri=vd,si=ze,ai=Vt$1;return openBlock(),createBlock(ai,{opened:unref(We),title:Ue,size:He,onClose:En},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(ri,{"copy-label":"Copier dans le presse-papier",mail:unref(Ln),networks:unref(Bn),title:"Partages"},null,8,["mail","networks"])])]),createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(si,{modelValue:unref(Be).permalink,"onUpdate:modelValue":ni[0]||(ni[0]=li=>unref(Be).permalink=li),label:"Lien permanent vers la carte",placeholder:"","label-visible":"",readonly:"","description-id":""},{label:withCtx(()=>[createVNode(TextCopyToClipboard,{"copied-text":unref(Be).permalink,label:"Lien permanent",description:"Toute personne ayant ce lien peut visualiser votre carte sans avoir à se créer de compte."},null,8,["copied-text"])]),_:1},8,["modelValue"])]),createBaseVNode("p",null,[createVNode(si,{modelValue:unref(ei),"onUpdate:modelValue":ni[1]||(ni[1]=li=>isRef(ei)?ei.value=li:null),placeholder:"","is-textarea":"","label-visible":"",readonly:"","description-id":"",style:{height:"200px"}},{label:withCtx(()=>[createVNode(TextCopyToClipboard,{"copied-text":unref(ei),label:"Iframe",description:"Insérer directement dans vos mails,  Réseaux sociaux ..."},null,8,["copied-text"])]),_:1},8,["modelValue"])])])]),_:1},8,["opened"])}}}),ShareModal=_export_sfc(_sfc_main$a,[["__scopeId","data-v-08396791"]]);function computeScaleCoeff(Oe,e,Te,ke){const Be=Oe/e,Ue=Te/ke;let He;return Ue>Be?He=Oe/Te:He=e/ke,He}function getMapImgParams(Oe,e,Te,ke){return{img:Oe.toDataURL("image/png"),format:"PNG",imgPosX:e,imgPosY:Te+e,imgWidth:ke.width,imgHeight:ke.height}}function getFakeMapCanvas(Oe,e,Te){if(Oe.getElementsByTagName("canvas").length<2){var ke=document.createElement("canvas");ke.classList=["fixedoverlay"],ke.width=e,ke.height=Te,Oe.getElementsByClassName("ol-overlaycontainer")[0].insertAdjacentElement("beforebegin",ke)}else var ke=Oe.getElementsByTagName("canvas")[1];return ke.style.display="none",ke}function drawScale(Oe,e,Te,ke){const Be=e.getElementsByClassName("ol-scale-line")[0],Ue=Be.children[0],He=getComputedStyle(Be),We=getComputedStyle(Ue),Cn=parseInt(He.left),En=parseInt(He.bottom),An=Ue.innerHTML,Sn=parseInt(We.width),Tn=parseInt(We.lineHeight),Ln=ke-En-Tn;Oe.beginPath(),Oe.fillStyle="rgba(255, 255, 255, 0.75)",Oe.rect(Cn,Ln,Sn,Tn),Oe.fillRect(Cn,Ln,Sn,Tn),Oe.font=We.font,Oe.textAlign="center",Oe.fillStyle="#000000",Oe.fillText(An,Cn+Sn/2,Ln+Tn/2),Oe.beginPath(),Oe.moveTo(Cn,Ln),Oe.lineTo(Cn,Ln+Tn),Oe.lineTo(Cn,Ln+Tn),Oe.lineTo(Cn+Sn,Ln+Tn),Oe.lineTo(Cn+Sn,Ln),Oe.lineWidth=1,Oe.lineCap="round",Oe.strokeStyle="#666666",Oe.stroke()}function drawTitle(Oe,e,Te,ke,Be){Oe.font="1.5rem Marianne",Oe.fillStyle="#3a3a3a",Oe.textAlign="center",Oe.textBaseline="middle",Oe.fillText(Be,Te/2,e/2,ke)}function _typeof(Oe){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(Oe)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(Oe,e){for(var Te=new u16(31),ke=0;ke<31;++ke)Te[ke]=e+=1<<Oe[ke-1];for(var Be=new i32(Te[30]),ke=1;ke<30;++ke)for(var Ue=Te[ke];Ue<Te[ke+1];++Ue)Be[Ue]=Ue-Te[ke]<<5|ke;return{b:Te,r:Be}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(Oe,e,Te){for(var ke=Oe.length,Be=0,Ue=new u16(e);Be<ke;++Be)Oe[Be]&&++Ue[Oe[Be]-1];var He=new u16(e);for(Be=1;Be<e;++Be)He[Be]=He[Be-1]+Ue[Be-1]<<1;var We;if(Te){We=new u16(1<<e);var Cn=15-e;for(Be=0;Be<ke;++Be)if(Oe[Be])for(var En=Be<<4|Oe[Be],An=e-Oe[Be],Sn=He[Oe[Be]-1]++<<An,Tn=Sn|(1<<An)-1;Sn<=Tn;++Sn)We[rev[Sn]>>Cn]=En}else for(We=new u16(ke),Be=0;Be<ke;++Be)Oe[Be]&&(We[Be]=rev[He[Oe[Be]-1]++]>>15-Oe[Be]);return We},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(Oe){for(var e=Oe[0],Te=1;Te<Oe.length;++Te)Oe[Te]>e&&(e=Oe[Te]);return e},bits=function(Oe,e,Te){var ke=e/8|0;return(Oe[ke]|Oe[ke+1]<<8)>>(e&7)&Te},bits16=function(Oe,e){var Te=e/8|0;return(Oe[Te]|Oe[Te+1]<<8|Oe[Te+2]<<16)>>(e&7)},shft=function(Oe){return(Oe+7)/8|0},slc=function(Oe,e,Te){return(Te==null||Te>Oe.length)&&(Te=Oe.length),new u8(Oe.subarray(e,Te))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(Oe,e,Te){var ke=new Error(e||ec[Oe]);if(ke.code=Oe,Error.captureStackTrace&&Error.captureStackTrace(ke,err),!Te)throw ke;return ke},inflt=function(Oe,e,Te,ke){var Be=Oe.length,Ue=0;if(!Be||e.f&&!e.l)return Te||new u8(0);var He=!Te,We=He||e.i!=2,Cn=e.i;He&&(Te=new u8(Be*3));var En=function(Fr){var zr=Te.length;if(Fr>zr){var tr=new u8(Math.max(zr*2,Fr));tr.set(Te),Te=tr}},An=e.f||0,Sn=e.p||0,Tn=e.b||0,Ln=e.l,Bn=e.d,ei=e.m,ti=e.n,ni=Be*8;do{if(!Ln){An=bits(Oe,Sn,1);var ri=bits(Oe,Sn+1,3);if(Sn+=3,ri)if(ri==1)Ln=flrm,Bn=fdrm,ei=9,ti=5;else if(ri==2){var Pi=bits(Oe,Sn,31)+257,pi=bits(Oe,Sn+10,15)+4,vi=Pi+bits(Oe,Sn+5,31)+1;Sn+=14;for(var Ri=new u8(vi),Fi=new u8(19),di=0;di<pi;++di)Fi[clim[di]]=bits(Oe,Sn+di*3,7);Sn+=pi*3;for(var ci=max(Fi),Mi=(1<<ci)-1,Oi=hMap(Fi,ci,1),di=0;di<vi;){var Hi=Oi[bits(Oe,Sn,Mi)];Sn+=Hi&15;var si=Hi>>4;if(si<16)Ri[di++]=si;else{var Ki=0,or=0;for(si==16?(or=3+bits(Oe,Sn,3),Sn+=2,Ki=Ri[di-1]):si==17?(or=3+bits(Oe,Sn,7),Sn+=3):si==18&&(or=11+bits(Oe,Sn,127),Sn+=7);or--;)Ri[di++]=Ki}}var sr=Ri.subarray(0,Pi),Cr=Ri.subarray(Pi);ei=max(sr),ti=max(Cr),Ln=hMap(sr,ei,1),Bn=hMap(Cr,ti,1)}else err(1);else{var si=shft(Sn)+4,ai=Oe[si-4]|Oe[si-3]<<8,li=si+ai;if(li>Be){Cn&&err(0);break}We&&En(Tn+ai),Te.set(Oe.subarray(si,li),Tn),e.b=Tn+=ai,e.p=Sn=li*8,e.f=An;continue}if(Sn>ni){Cn&&err(0);break}}We&&En(Tn+131072);for(var pr=(1<<ei)-1,wr=(1<<ti)-1,Li=Sn;;Li=Sn){var Ki=Ln[bits16(Oe,Sn)&pr],er=Ki>>4;if(Sn+=Ki&15,Sn>ni){Cn&&err(0);break}if(Ki||err(2),er<256)Te[Tn++]=er;else if(er==256){Li=Sn,Ln=null;break}else{var hr=er-254;if(er>264){var di=er-257,mr=fleb[di];hr=bits(Oe,Sn,(1<<mr)-1)+fl[di],Sn+=mr}var _r=Bn[bits16(Oe,Sn)&wr],dr=_r>>4;_r||err(3),Sn+=_r&15;var Cr=fd[dr];if(dr>3){var mr=fdeb[dr];Cr+=bits16(Oe,Sn)&(1<<mr)-1,Sn+=mr}if(Sn>ni){Cn&&err(0);break}We&&En(Tn+131072);var cr=Tn+hr;if(Tn<Cr){var gr=Ue-Cr,vr=Math.min(Cr,cr);for(gr+Tn<0&&err(3);Tn<vr;++Tn)Te[Tn]=ke[gr+Tn]}for(;Tn<cr;++Tn)Te[Tn]=Te[Tn-Cr]}}e.l=Ln,e.p=Li,e.b=Tn,e.f=An,Ln&&(An=1,e.m=ei,e.d=Bn,e.n=ti)}while(!An);return Tn!=Te.length&&He?slc(Te,0,Tn):Te.subarray(0,Tn)},wbits=function(Oe,e,Te){Te<<=e&7;var ke=e/8|0;Oe[ke]|=Te,Oe[ke+1]|=Te>>8},wbits16=function(Oe,e,Te){Te<<=e&7;var ke=e/8|0;Oe[ke]|=Te,Oe[ke+1]|=Te>>8,Oe[ke+2]|=Te>>16},hTree=function(Oe,e){for(var Te=[],ke=0;ke<Oe.length;++ke)Oe[ke]&&Te.push({s:ke,f:Oe[ke]});var Be=Te.length,Ue=Te.slice();if(!Be)return{t:et$1,l:0};if(Be==1){var He=new u8(Te[0].s+1);return He[Te[0].s]=1,{t:He,l:1}}Te.sort(function(li,Pi){return li.f-Pi.f}),Te.push({s:-1,f:25001});var We=Te[0],Cn=Te[1],En=0,An=1,Sn=2;for(Te[0]={s:-1,f:We.f+Cn.f,l:We,r:Cn};An!=Be-1;)We=Te[Te[En].f<Te[Sn].f?En++:Sn++],Cn=Te[En!=An&&Te[En].f<Te[Sn].f?En++:Sn++],Te[An++]={s:-1,f:We.f+Cn.f,l:We,r:Cn};for(var Tn=Ue[0].s,ke=1;ke<Be;++ke)Ue[ke].s>Tn&&(Tn=Ue[ke].s);var Ln=new u16(Tn+1),Bn=ln(Te[An-1],Ln,0);if(Bn>e){var ke=0,ei=0,ti=Bn-e,ni=1<<ti;for(Ue.sort(function(Pi,pi){return Ln[pi.s]-Ln[Pi.s]||Pi.f-pi.f});ke<Be;++ke){var ri=Ue[ke].s;if(Ln[ri]>e)ei+=ni-(1<<Bn-Ln[ri]),Ln[ri]=e;else break}for(ei>>=ti;ei>0;){var si=Ue[ke].s;Ln[si]<e?ei-=1<<e-Ln[si]++-1:++ke}for(;ke>=0&&ei;--ke){var ai=Ue[ke].s;Ln[ai]==e&&(--Ln[ai],++ei)}Bn=e}return{t:new u8(Ln),l:Bn}},ln=function(Oe,e,Te){return Oe.s==-1?Math.max(ln(Oe.l,e,Te+1),ln(Oe.r,e,Te+1)):e[Oe.s]=Te},lc=function(Oe){for(var e=Oe.length;e&&!Oe[--e];);for(var Te=new u16(++e),ke=0,Be=Oe[0],Ue=1,He=function(Cn){Te[ke++]=Cn},We=1;We<=e;++We)if(Oe[We]==Be&&We!=e)++Ue;else{if(!Be&&Ue>2){for(;Ue>138;Ue-=138)He(32754);Ue>2&&(He(Ue>10?Ue-11<<5|28690:Ue-3<<5|12305),Ue=0)}else if(Ue>3){for(He(Be),--Ue;Ue>6;Ue-=6)He(8304);Ue>2&&(He(Ue-3<<5|8208),Ue=0)}for(;Ue--;)He(Be);Ue=1,Be=Oe[We]}return{c:Te.subarray(0,ke),n:e}},clen=function(Oe,e){for(var Te=0,ke=0;ke<e.length;++ke)Te+=Oe[ke]*e[ke];return Te},wfblk=function(Oe,e,Te){var ke=Te.length,Be=shft(e+2);Oe[Be]=ke&255,Oe[Be+1]=ke>>8,Oe[Be+2]=Oe[Be]^255,Oe[Be+3]=Oe[Be+1]^255;for(var Ue=0;Ue<ke;++Ue)Oe[Be+Ue+4]=Te[Ue];return(Be+4+ke)*8},wblk=function(Oe,e,Te,ke,Be,Ue,He,We,Cn,En,An){wbits(e,An++,Te),++Be[256];for(var Sn=hTree(Be,15),Tn=Sn.t,Ln=Sn.l,Bn=hTree(Ue,15),ei=Bn.t,ti=Bn.l,ni=lc(Tn),ri=ni.c,si=ni.n,ai=lc(ei),li=ai.c,Pi=ai.n,pi=new u16(19),vi=0;vi<ri.length;++vi)++pi[ri[vi]&31];for(var vi=0;vi<li.length;++vi)++pi[li[vi]&31];for(var Ri=hTree(pi,7),Fi=Ri.t,di=Ri.l,ci=19;ci>4&&!Fi[clim[ci-1]];--ci);var Mi=En+5<<3,Oi=clen(Be,flt)+clen(Ue,fdt)+He,Hi=clen(Be,Tn)+clen(Ue,ei)+He+14+3*ci+clen(pi,Fi)+2*pi[16]+3*pi[17]+7*pi[18];if(Cn>=0&&Mi<=Oi&&Mi<=Hi)return wfblk(e,An,Oe.subarray(Cn,Cn+En));var Ki,or,sr,Cr;if(wbits(e,An,1+(Hi<Oi)),An+=2,Hi<Oi){Ki=hMap(Tn,Ln,0),or=Tn,sr=hMap(ei,ti,0),Cr=ei;var pr=hMap(Fi,di,0);wbits(e,An,si-257),wbits(e,An+5,Pi-1),wbits(e,An+10,ci-4),An+=14;for(var vi=0;vi<ci;++vi)wbits(e,An+3*vi,Fi[clim[vi]]);An+=3*ci;for(var wr=[ri,li],Li=0;Li<2;++Li)for(var er=wr[Li],vi=0;vi<er.length;++vi){var hr=er[vi]&31;wbits(e,An,pr[hr]),An+=Fi[hr],hr>15&&(wbits(e,An,er[vi]>>5&127),An+=er[vi]>>12)}}else Ki=flm,or=flt,sr=fdm,Cr=fdt;for(var vi=0;vi<We;++vi){var mr=ke[vi];if(mr>255){var hr=mr>>18&31;wbits16(e,An,Ki[hr+257]),An+=or[hr+257],hr>7&&(wbits(e,An,mr>>23&31),An+=fleb[hr]);var _r=mr&31;wbits16(e,An,sr[_r]),An+=Cr[_r],_r>3&&(wbits16(e,An,mr>>5&8191),An+=fdeb[_r])}else wbits16(e,An,Ki[mr]),An+=or[mr]}return wbits16(e,An,Ki[256]),An+or[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(Oe,e,Te,ke,Be,Ue){var He=Ue.z||Oe.length,We=new u8(ke+He+5*(1+Math.ceil(He/7e3))+Be),Cn=We.subarray(ke,We.length-Be),En=Ue.l,An=(Ue.r||0)&7;if(e){An&&(Cn[0]=Ue.r>>3);for(var Sn=deo[e-1],Tn=Sn>>13,Ln=Sn&8191,Bn=(1<<Te)-1,ei=Ue.p||new u16(32768),ti=Ue.h||new u16(Bn+1),ni=Math.ceil(Te/3),ri=2*ni,si=function(fr){return(Oe[fr]^Oe[fr+1]<<ni^Oe[fr+2]<<ri)&Bn},ai=new i32(25e3),li=new u16(288),Pi=new u16(32),pi=0,vi=0,Ri=Ue.i||0,Fi=0,di=Ue.w||0,ci=0;Ri+2<He;++Ri){var Mi=si(Ri),Oi=Ri&32767,Hi=ti[Mi];if(ei[Oi]=Hi,ti[Mi]=Oi,di<=Ri){var Ki=He-Ri;if((pi>7e3||Fi>24576)&&(Ki>423||!En)){An=wblk(Oe,Cn,0,ai,li,Pi,vi,Fi,ci,Ri-ci,An),Fi=pi=vi=0,ci=Ri;for(var or=0;or<286;++or)li[or]=0;for(var or=0;or<30;++or)Pi[or]=0}var sr=2,Cr=0,pr=Ln,wr=Oi-Hi&32767;if(Ki>2&&Mi==si(Ri-wr))for(var Li=Math.min(Tn,Ki)-1,er=Math.min(32767,Ri),hr=Math.min(258,Ki);wr<=er&&--pr&&Oi!=Hi;){if(Oe[Ri+sr]==Oe[Ri+sr-wr]){for(var mr=0;mr<hr&&Oe[Ri+mr]==Oe[Ri+mr-wr];++mr);if(mr>sr){if(sr=mr,Cr=wr,mr>Li)break;for(var _r=Math.min(wr,mr-2),dr=0,or=0;or<_r;++or){var cr=Ri-wr+or&32767,gr=ei[cr],vr=cr-gr&32767;vr>dr&&(dr=vr,Hi=cr)}}}Oi=Hi,Hi=ei[Oi],wr+=Oi-Hi&32767}if(Cr){ai[Fi++]=268435456|revfl[sr]<<18|revfd[Cr];var Fr=revfl[sr]&31,zr=revfd[Cr]&31;vi+=fleb[Fr]+fdeb[zr],++li[257+Fr],++Pi[zr],di=Ri+sr,++pi}else ai[Fi++]=Oe[Ri],++li[Oe[Ri]]}}for(Ri=Math.max(Ri,di);Ri<He;++Ri)ai[Fi++]=Oe[Ri],++li[Oe[Ri]];An=wblk(Oe,Cn,En,ai,li,Pi,vi,Fi,ci,Ri-ci,An),En||(Ue.r=An&7|Cn[An/8|0]<<3,An-=7,Ue.h=ti,Ue.p=ei,Ue.i=Ri,Ue.w=di)}else{for(var Ri=Ue.w||0;Ri<He+En;Ri+=65535){var tr=Ri+65535;tr>=He&&(Cn[An/8|0]=En,tr=He),An=wfblk(Cn,An+1,Oe.subarray(Ri,tr))}Ue.i=He}return slc(We,0,ke+shft(An)+Be)},adler=function(){var Oe=1,e=0;return{p:function(Te){for(var ke=Oe,Be=e,Ue=Te.length|0,He=0;He!=Ue;){for(var We=Math.min(He+2655,Ue);He<We;++He)Be+=ke+=Te[He];ke=(ke&65535)+15*(ke>>16),Be=(Be&65535)+15*(Be>>16)}Oe=ke,e=Be},d:function(){return Oe%=65521,e%=65521,(Oe&255)<<24|(Oe&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(Oe,e,Te,ke,Be){if(!Be&&(Be={l:1},e.dictionary)){var Ue=e.dictionary.subarray(-32768),He=new u8(Ue.length+Oe.length);He.set(Ue),He.set(Oe,Ue.length),Oe=He,Be.w=Ue.length}return dflt(Oe,e.level==null?6:e.level,e.mem==null?Be.l?Math.ceil(Math.max(8,Math.min(13,Math.log(Oe.length)))*1.5):20:12+e.mem,Te,ke,Be)},wbytes=function(Oe,e,Te){for(;Te;++e)Oe[e]=Te,Te>>>=8},zlh=function(Oe,e){var Te=e.level,ke=Te==0?0:Te<6?1:Te==9?3:2;if(Oe[0]=120,Oe[1]=ke<<6|(e.dictionary&&32),Oe[1]|=31-(Oe[0]<<8|Oe[1])%31,e.dictionary){var Be=adler();Be.p(e.dictionary),wbytes(Oe,2,Be.d())}},zls=function(Oe,e){return((Oe[0]&15)!=8||Oe[0]>>4>7||(Oe[0]<<8|Oe[1])%31)&&err(6,"invalid zlib data"),(Oe[1]>>5&1)==1&&err(6,"invalid zlib data: "+(Oe[1]&32?"need":"unexpected")+" dictionary"),(Oe[1]>>3&4)+2};function zlibSync(Oe,e){e||(e={});var Te=adler();Te.p(Oe);var ke=dopt(Oe,e,e.dictionary?6:2,4);return zlh(ke,e),wbytes(ke,ke.length-4,Te.d()),ke}function unzlibSync(Oe,e){return inflt(Oe.subarray(zls(Oe),-4),{i:2},e,e)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(Oe){}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(Oe){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(Oe){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(Oe))}};function o(Oe,e,Te){var ke=new XMLHttpRequest;ke.open("GET",Oe),ke.responseType="blob",ke.onload=function(){l(ke.response,e,Te)},ke.onerror=function(){a.error("could not download file")},ke.send()}function s(Oe){var e=new XMLHttpRequest;e.open("HEAD",Oe,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(Oe){try{Oe.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Oe.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(Oe,e,Te){var ke=n.URL||n.webkitURL,Be=document.createElement("a");e=e||Oe.name||"download",Be.download=e,Be.rel="noopener",typeof Oe=="string"?(Be.href=Oe,Be.origin!==location.origin?s(Be.href)?o(Oe,e,Te):c(Be,Be.target="_blank"):c(Be)):(Be.href=ke.createObjectURL(Oe),setTimeout(function(){ke.revokeObjectURL(Be.href)},4e4),setTimeout(function(){c(Be)},0))}:"msSaveOrOpenBlob"in navigator?function(Oe,e,Te){if(e=e||Oe.name||"download",typeof Oe=="string")if(s(Oe))o(Oe,e,Te);else{var ke=document.createElement("a");ke.href=Oe,ke.target="_blank",setTimeout(function(){c(ke)})}else navigator.msSaveOrOpenBlob(function(Be,Ue){return Ue===void 0?Ue={autoBom:!1}:_typeof(Ue)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Ue={autoBom:!Ue}),Ue.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Be.type)?new Blob(["\uFEFF",Be],{type:Be.type}):Be}(Oe,Te),e)}:function(Oe,e,Te,ke){if((ke=ke||open("","_blank"))&&(ke.document.title=ke.document.body.innerText="downloading..."),typeof Oe=="string")return o(Oe,e,Te);var Be=Oe.type==="application/octet-stream",Ue=/constructor/i.test(n.HTMLElement)||n.safari,He=/CriOS\/[\d]+/.test(navigator.userAgent);if((He||Be&&Ue)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var We=new FileReader;We.onloadend=function(){var An=We.result;An=He?An:An.replace(/^data:[^;]*;/,"data:attachment/file;"),ke?ke.location.href=An:location=An,ke=null},We.readAsDataURL(Oe)}else{var Cn=n.URL||n.webkitURL,En=Cn.createObjectURL(Oe);ke?ke.location=En:location.href=En,ke=null,setTimeout(function(){Cn.revokeObjectURL(En)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(Oe){var e;Oe=Oe||"",this.ok=!1,Oe.charAt(0)=="#"&&(Oe=Oe.substr(1,6)),Oe={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[Oe=(Oe=Oe.replace(/ /g,"")).toLowerCase()]||Oe;for(var Te=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(We){return[parseInt(We[1]),parseInt(We[2]),parseInt(We[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(We){return[parseInt(We[1],16),parseInt(We[2],16),parseInt(We[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(We){return[parseInt(We[1]+We[1],16),parseInt(We[2]+We[2],16),parseInt(We[3]+We[3],16)]}}],ke=0;ke<Te.length;ke++){var Be=Te[ke].re,Ue=Te[ke].process,He=Be.exec(Oe);He&&(e=Ue(He),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var We=this.r.toString(16),Cn=this.g.toString(16),En=this.b.toString(16);return We.length==1&&(We="0"+We),Cn.length==1&&(Cn="0"+Cn),En.length==1&&(En="0"+En),"#"+We+Cn+En}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(Oe,e){var Te=Oe[0],ke=Oe[1],Be=Oe[2],Ue=Oe[3];Te=g(Te,ke,Be,Ue,e[0],7,-680876936),Ue=g(Ue,Te,ke,Be,e[1],12,-389564586),Be=g(Be,Ue,Te,ke,e[2],17,606105819),ke=g(ke,Be,Ue,Te,e[3],22,-1044525330),Te=g(Te,ke,Be,Ue,e[4],7,-176418897),Ue=g(Ue,Te,ke,Be,e[5],12,1200080426),Be=g(Be,Ue,Te,ke,e[6],17,-1473231341),ke=g(ke,Be,Ue,Te,e[7],22,-45705983),Te=g(Te,ke,Be,Ue,e[8],7,1770035416),Ue=g(Ue,Te,ke,Be,e[9],12,-1958414417),Be=g(Be,Ue,Te,ke,e[10],17,-42063),ke=g(ke,Be,Ue,Te,e[11],22,-1990404162),Te=g(Te,ke,Be,Ue,e[12],7,1804603682),Ue=g(Ue,Te,ke,Be,e[13],12,-40341101),Be=g(Be,Ue,Te,ke,e[14],17,-1502002290),Te=m(Te,ke=g(ke,Be,Ue,Te,e[15],22,1236535329),Be,Ue,e[1],5,-165796510),Ue=m(Ue,Te,ke,Be,e[6],9,-1069501632),Be=m(Be,Ue,Te,ke,e[11],14,643717713),ke=m(ke,Be,Ue,Te,e[0],20,-373897302),Te=m(Te,ke,Be,Ue,e[5],5,-701558691),Ue=m(Ue,Te,ke,Be,e[10],9,38016083),Be=m(Be,Ue,Te,ke,e[15],14,-660478335),ke=m(ke,Be,Ue,Te,e[4],20,-405537848),Te=m(Te,ke,Be,Ue,e[9],5,568446438),Ue=m(Ue,Te,ke,Be,e[14],9,-1019803690),Be=m(Be,Ue,Te,ke,e[3],14,-187363961),ke=m(ke,Be,Ue,Te,e[8],20,1163531501),Te=m(Te,ke,Be,Ue,e[13],5,-1444681467),Ue=m(Ue,Te,ke,Be,e[2],9,-51403784),Be=m(Be,Ue,Te,ke,e[7],14,1735328473),Te=v(Te,ke=m(ke,Be,Ue,Te,e[12],20,-1926607734),Be,Ue,e[5],4,-378558),Ue=v(Ue,Te,ke,Be,e[8],11,-2022574463),Be=v(Be,Ue,Te,ke,e[11],16,1839030562),ke=v(ke,Be,Ue,Te,e[14],23,-35309556),Te=v(Te,ke,Be,Ue,e[1],4,-1530992060),Ue=v(Ue,Te,ke,Be,e[4],11,1272893353),Be=v(Be,Ue,Te,ke,e[7],16,-155497632),ke=v(ke,Be,Ue,Te,e[10],23,-1094730640),Te=v(Te,ke,Be,Ue,e[13],4,681279174),Ue=v(Ue,Te,ke,Be,e[0],11,-358537222),Be=v(Be,Ue,Te,ke,e[3],16,-722521979),ke=v(ke,Be,Ue,Te,e[6],23,76029189),Te=v(Te,ke,Be,Ue,e[9],4,-640364487),Ue=v(Ue,Te,ke,Be,e[12],11,-421815835),Be=v(Be,Ue,Te,ke,e[15],16,530742520),Te=b(Te,ke=v(ke,Be,Ue,Te,e[2],23,-995338651),Be,Ue,e[0],6,-198630844),Ue=b(Ue,Te,ke,Be,e[7],10,1126891415),Be=b(Be,Ue,Te,ke,e[14],15,-1416354905),ke=b(ke,Be,Ue,Te,e[5],21,-57434055),Te=b(Te,ke,Be,Ue,e[12],6,1700485571),Ue=b(Ue,Te,ke,Be,e[3],10,-1894986606),Be=b(Be,Ue,Te,ke,e[10],15,-1051523),ke=b(ke,Be,Ue,Te,e[1],21,-2054922799),Te=b(Te,ke,Be,Ue,e[8],6,1873313359),Ue=b(Ue,Te,ke,Be,e[15],10,-30611744),Be=b(Be,Ue,Te,ke,e[6],15,-1560198380),ke=b(ke,Be,Ue,Te,e[13],21,1309151649),Te=b(Te,ke,Be,Ue,e[4],6,-145523070),Ue=b(Ue,Te,ke,Be,e[11],10,-1120210379),Be=b(Be,Ue,Te,ke,e[2],15,718787259),ke=b(ke,Be,Ue,Te,e[9],21,-343485551),Oe[0]=_(Te,Oe[0]),Oe[1]=_(ke,Oe[1]),Oe[2]=_(Be,Oe[2]),Oe[3]=_(Ue,Oe[3])}function p(Oe,e,Te,ke,Be,Ue){return e=_(_(e,Oe),_(ke,Ue)),_(e<<Be|e>>>32-Be,Te)}function g(Oe,e,Te,ke,Be,Ue,He){return p(e&Te|~e&ke,Oe,e,Be,Ue,He)}function m(Oe,e,Te,ke,Be,Ue,He){return p(e&ke|Te&~ke,Oe,e,Be,Ue,He)}function v(Oe,e,Te,ke,Be,Ue,He){return p(e^Te^ke,Oe,e,Be,Ue,He)}function b(Oe,e,Te,ke,Be,Ue,He){return p(Te^(e|~ke),Oe,e,Be,Ue,He)}function y(Oe){var e,Te=Oe.length,ke=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=Oe.length;e+=64)d(ke,w(Oe.substring(e-64,e)));Oe=Oe.substring(e-64);var Be=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<Oe.length;e++)Be[e>>2]|=Oe.charCodeAt(e)<<(e%4<<3);if(Be[e>>2]|=128<<(e%4<<3),e>55)for(d(ke,Be),e=0;e<16;e++)Be[e]=0;return Be[14]=8*Te,d(ke,Be),ke}function w(Oe){var e,Te=[];for(e=0;e<64;e+=4)Te[e>>2]=Oe.charCodeAt(e)+(Oe.charCodeAt(e+1)<<8)+(Oe.charCodeAt(e+2)<<16)+(Oe.charCodeAt(e+3)<<24);return Te}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(Oe){for(var e="",Te=0;Te<4;Te++)e+=N[Oe>>8*Te+4&15]+N[Oe>>8*Te&15];return e}function A(Oe){return String.fromCharCode((255&Oe)>>0,(65280&Oe)>>8,(16711680&Oe)>>16,(4278190080&Oe)>>24)}function x(Oe){return y(Oe).map(A).join("")}var S=function(Oe){for(var e=0;e<Oe.length;e++)Oe[e]=L(Oe[e]);return Oe.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(Oe,e){if(S){var Te=(65535&Oe)+(65535&e);return(Oe>>16)+(e>>16)+(Te>>16)<<16|65535&Te}return Oe+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(Oe,e){var Te,ke,Be,Ue;if(Oe!==Te){for(var He=(Be=Oe,Ue=1+(256/Oe.length>>0),new Array(Ue+1).join(Be)),We=[],Cn=0;Cn<256;Cn++)We[Cn]=Cn;var En=0;for(Cn=0;Cn<256;Cn++){var An=We[Cn];En=(En+An+He.charCodeAt(Cn))%256,We[Cn]=We[En],We[En]=An}Te=Oe,ke=We}else We=ke;var Sn=e.length,Tn=0,Ln=0,Bn="";for(Cn=0;Cn<Sn;Cn++)Ln=(Ln+(An=We[Tn=(Tn+1)%256]))%256,We[Tn]=We[Ln],We[Ln]=An,He=We[(We[Tn]+We[Ln])%256],Bn+=String.fromCharCode(e.charCodeAt(Cn)^He);return Bn}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(Oe,e,Te,ke){this.v=1,this.r=2;var Be=192;Oe.forEach(function(We){if(k.perm!==void 0)throw new Error("Invalid permission: "+We);Be+=k[We]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var Ue=(e+this.padding).substr(0,32),He=(Te+this.padding).substr(0,32);this.O=this.processOwnerPassword(Ue,He),this.P=-(1+(255^Be)),this.encryptionKey=x(Ue+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(ke)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(Oe){if(/[^\u0000-\u00ff]/.test(Oe))throw new Error("Invalid PDF Name Object: "+Oe+", Only accept ASCII characters.");for(var e="",Te=Oe.length,ke=0;ke<Te;ke++){var Be=Oe.charCodeAt(ke);Be<33||Be===35||Be===37||Be===40||Be===41||Be===47||Be===60||Be===62||Be===91||Be===93||Be===123||Be===125||Be>126?e+="#"+("0"+Be.toString(16)).slice(-2):e+=Oe[ke]}return e}function C(Oe){if(_typeof(Oe)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(Te,ke,Be){if(Be=Be||!1,typeof Te!="string"||typeof ke!="function"||typeof Be!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(Te)||(e[Te]={});var Ue=Math.random().toString(35);return e[Te][Ue]=[ke,!!Be],Ue},this.unsubscribe=function(Te){for(var ke in e)if(e[ke][Te])return delete e[ke][Te],Object.keys(e[ke]).length===0&&delete e[ke],!0;return!1},this.publish=function(Te){if(e.hasOwnProperty(Te)){var ke=Array.prototype.slice.call(arguments,1),Be=[];for(var Ue in e[Te]){var He=e[Te][Ue];try{He[0].apply(Oe,ke)}catch(We){n.console&&a.error("jsPDF PubSub Error",We.message,We)}He[1]&&Be.push(Ue)}Be.length&&Be.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(Oe){if(!(this instanceof j))return new j(Oe);var e="opacity,stroke-opacity".split(",");for(var Te in Oe)Oe.hasOwnProperty(Te)&&e.indexOf(Te)>=0&&(this[Te]=Oe[Te]);this.id="",this.objectNumber=-1}function O(Oe,e){this.gState=Oe,this.matrix=e,this.id="",this.objectNumber=-1}function B(Oe,e,Te,ke,Be){if(!(this instanceof B))return new B(Oe,e,Te,ke,Be);this.type=Oe==="axial"?2:3,this.coords=e,this.colors=Te,O.call(this,ke,Be)}function M(Oe,e,Te,ke,Be){if(!(this instanceof M))return new M(Oe,e,Te,ke,Be);this.boundingBox=Oe,this.xStep=e,this.yStep=Te,this.stream="",this.cloneIndex=0,O.call(this,ke,Be)}function E(Oe){var e,Te=typeof arguments[0]=="string"?arguments[0]:"p",ke=arguments[1],Be=arguments[2],Ue=arguments[3],He=[],We=1,Cn=16,En="S",An=null;_typeof(Oe=Oe||{})==="object"&&(Te=Oe.orientation,ke=Oe.unit||ke,Be=Oe.format||Be,Ue=Oe.compress||Oe.compressPdf||Ue,(An=Oe.encryption||null)!==null&&(An.userPassword=An.userPassword||"",An.ownerPassword=An.ownerPassword||"",An.userPermissions=An.userPermissions||[]),We=typeof Oe.userUnit=="number"?Math.abs(Oe.userUnit):1,Oe.precision!==void 0&&(e=Oe.precision),Oe.floatPrecision!==void 0&&(Cn=Oe.floatPrecision),En=Oe.defaultPathOperation||"S"),He=Oe.filters||(Ue===!0?["FlateEncode"]:He),ke=ke||"mm",Te=(""+(Te||"P")).toLowerCase();var Sn=Oe.putOnlyUsedFonts||!1,Tn={},Ln={internal:{},__private__:{}};Ln.__private__.PubSub=C;var Bn="1.3",ei=Ln.__private__.getPdfVersion=function(){return Bn};Ln.__private__.setPdfVersion=function(ui){Bn=ui};var ti={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};Ln.__private__.getPageFormats=function(){return ti};var ni=Ln.__private__.getPageFormat=function(ui){return ti[ui]};Be=Be||"a4";var ri={COMPAT:"compat",ADVANCED:"advanced"},si=ri.COMPAT;function ai(){this.saveGraphicsState(),nr(new Es(Qr,0,0,-Qr,0,Cc()*Qr).toString()+" cm"),this.setFontSize(this.getFontSize()/Qr),En="n",si=ri.ADVANCED}function li(){this.restoreGraphicsState(),En="S",si=ri.COMPAT}var Pi=Ln.__private__.combineFontStyleAndFontWeight=function(ui,Vi){if(ui=="bold"&&Vi=="normal"||ui=="bold"&&Vi==400||ui=="normal"&&Vi=="italic"||ui=="bold"&&Vi=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Vi&&(ui=Vi==400||Vi==="normal"?ui==="italic"?"italic":"normal":Vi!=700&&Vi!=="bold"||ui!=="normal"?(Vi==700?"bold":Vi)+""+ui:"bold"),ui};Ln.advancedAPI=function(ui){var Vi=si===ri.COMPAT;return Vi&&ai.call(this),typeof ui!="function"||(ui(this),Vi&&li.call(this)),this},Ln.compatAPI=function(ui){var Vi=si===ri.ADVANCED;return Vi&&li.call(this),typeof ui!="function"||(ui(this),Vi&&ai.call(this)),this},Ln.isAdvancedAPI=function(){return si===ri.ADVANCED};var pi,vi=function(ui){if(si!==ri.ADVANCED)throw new Error(ui+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Ri=Ln.roundToPrecision=Ln.__private__.roundToPrecision=function(ui,Vi){var Er=e||Vi;if(isNaN(ui)||isNaN(Er))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ui.toFixed(Er).replace(/0+$/,"")};pi=Ln.hpf=Ln.__private__.hpf=typeof Cn=="number"?function(ui){if(isNaN(ui))throw new Error("Invalid argument passed to jsPDF.hpf");return Ri(ui,Cn)}:Cn==="smart"?function(ui){if(isNaN(ui))throw new Error("Invalid argument passed to jsPDF.hpf");return Ri(ui,ui>-1&&ui<1?16:5)}:function(ui){if(isNaN(ui))throw new Error("Invalid argument passed to jsPDF.hpf");return Ri(ui,16)};var Fi=Ln.f2=Ln.__private__.f2=function(ui){if(isNaN(ui))throw new Error("Invalid argument passed to jsPDF.f2");return Ri(ui,2)},di=Ln.__private__.f3=function(ui){if(isNaN(ui))throw new Error("Invalid argument passed to jsPDF.f3");return Ri(ui,3)},ci=Ln.scale=Ln.__private__.scale=function(ui){if(isNaN(ui))throw new Error("Invalid argument passed to jsPDF.scale");return si===ri.COMPAT?ui*Qr:si===ri.ADVANCED?ui:void 0},Mi=function(ui){return si===ri.COMPAT?Cc()-ui:si===ri.ADVANCED?ui:void 0},Oi=function(ui){return ci(Mi(ui))};Ln.__private__.setPrecision=Ln.setPrecision=function(ui){typeof parseInt(ui,10)=="number"&&(e=parseInt(ui,10))};var Hi,Ki="00000000000000000000000000000000",or=Ln.__private__.getFileId=function(){return Ki},sr=Ln.__private__.setFileId=function(ui){return Ki=ui!==void 0&&/^[a-fA-F0-9]{32}$/.test(ui)?ui.toUpperCase():Ki.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),An!==null&&(pa=new I(An.userPermissions,An.userPassword,An.ownerPassword,Ki)),Ki};Ln.setFileId=function(ui){return sr(ui),this},Ln.getFileId=function(){return or()};var Cr=Ln.__private__.convertDateToPDFDate=function(ui){var Vi=ui.getTimezoneOffset(),Er=Vi<0?"+":"-",Pr=Math.floor(Math.abs(Vi/60)),jr=Math.abs(Vi%60),Kr=[Er,hr(Pr),"'",hr(jr),"'"].join("");return["D:",ui.getFullYear(),hr(ui.getMonth()+1),hr(ui.getDate()),hr(ui.getHours()),hr(ui.getMinutes()),hr(ui.getSeconds()),Kr].join("")},pr=Ln.__private__.convertPDFDateToDate=function(ui){var Vi=parseInt(ui.substr(2,4),10),Er=parseInt(ui.substr(6,2),10)-1,Pr=parseInt(ui.substr(8,2),10),jr=parseInt(ui.substr(10,2),10),Kr=parseInt(ui.substr(12,2),10),as=parseInt(ui.substr(14,2),10);return new Date(Vi,Er,Pr,jr,Kr,as,0)},wr=Ln.__private__.setCreationDate=function(ui){var Vi;if(ui===void 0&&(ui=new Date),ui instanceof Date)Vi=Cr(ui);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ui))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Vi=ui}return Hi=Vi},Li=Ln.__private__.getCreationDate=function(ui){var Vi=Hi;return ui==="jsDate"&&(Vi=pr(Hi)),Vi};Ln.setCreationDate=function(ui){return wr(ui),this},Ln.getCreationDate=function(ui){return Li(ui)};var er,hr=Ln.__private__.padd2=function(ui){return("0"+parseInt(ui)).slice(-2)},mr=Ln.__private__.padd2Hex=function(ui){return("00"+(ui=ui.toString())).substr(ui.length)},_r=0,dr=[],cr=[],gr=0,vr=[],Fr=[],zr=!1,tr=cr,fr=function(){_r=0,gr=0,cr=[],dr=[],vr=[],ma=yo(),Pa=yo()};Ln.__private__.setCustomOutputDestination=function(ui){zr=!0,tr=ui};var ar=function(ui){zr||(tr=ui)};Ln.__private__.resetCustomOutputDestination=function(){zr=!1,tr=cr};var nr=Ln.__private__.out=function(ui){return ui=ui.toString(),gr+=ui.length+1,tr.push(ui),tr},Dr=Ln.__private__.write=function(ui){return nr(arguments.length===1?ui.toString():Array.prototype.join.call(arguments," "))},kr=Ln.__private__.getArrayBuffer=function(ui){for(var Vi=ui.length,Er=new ArrayBuffer(Vi),Pr=new Uint8Array(Er);Vi--;)Pr[Vi]=ui.charCodeAt(Vi);return Er},Ir=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];Ln.__private__.getStandardFonts=function(){return Ir};var Mr=Oe.fontSize||16;Ln.__private__.setFontSize=Ln.setFontSize=function(ui){return Mr=si===ri.ADVANCED?ui/Qr:ui,this};var Rr,Nr=Ln.__private__.getFontSize=Ln.getFontSize=function(){return si===ri.COMPAT?Mr:Mr*Qr},Ar=Oe.R2L||!1;Ln.__private__.setR2L=Ln.setR2L=function(ui){return Ar=ui,this},Ln.__private__.getR2L=Ln.getR2L=function(){return Ar};var Sr,br=Ln.__private__.setZoomMode=function(ui){var Vi=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ui))Rr=ui;else if(isNaN(ui)){if(Vi.indexOf(ui)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ui+'" is not recognized.');Rr=ui}else Rr=parseInt(ui,10)};Ln.__private__.getZoomMode=function(){return Rr};var Br,Hr=Ln.__private__.setPageMode=function(ui){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ui)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ui+'" is not recognized.');Sr=ui};Ln.__private__.getPageMode=function(){return Sr};var qr=Ln.__private__.setLayoutMode=function(ui){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ui)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ui+'" is not recognized.');Br=ui};Ln.__private__.getLayoutMode=function(){return Br},Ln.__private__.setDisplayMode=Ln.setDisplayMode=function(ui,Vi,Er){return br(ui),qr(Vi),Hr(Er),this};var Xr={title:"",subject:"",author:"",keywords:"",creator:""};Ln.__private__.getDocumentProperty=function(ui){if(Object.keys(Xr).indexOf(ui)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Xr[ui]},Ln.__private__.getDocumentProperties=function(){return Xr},Ln.__private__.setDocumentProperties=Ln.setProperties=Ln.setDocumentProperties=function(ui){for(var Vi in Xr)Xr.hasOwnProperty(Vi)&&ui[Vi]&&(Xr[Vi]=ui[Vi]);return this},Ln.__private__.setDocumentProperty=function(ui,Vi){if(Object.keys(Xr).indexOf(ui)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Xr[ui]=Vi};var cs,Qr,bs,vs,Ms,Ls={},ps={},ws=[],As={},Ds={},xs={},Xs={},_o=null,Fs=0,Ss=[],Is=new C(Ln),oa=Oe.hotfixes||[],qs={},Eo={},Rs=[],Es=function ui(Vi,Er,Pr,jr,Kr,as){if(!(this instanceof ui))return new ui(Vi,Er,Pr,jr,Kr,as);isNaN(Vi)&&(Vi=1),isNaN(Er)&&(Er=0),isNaN(Pr)&&(Pr=0),isNaN(jr)&&(jr=1),isNaN(Kr)&&(Kr=0),isNaN(as)&&(as=0),this._matrix=[Vi,Er,Pr,jr,Kr,as]};Object.defineProperty(Es.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ui){this._matrix[0]=ui}}),Object.defineProperty(Es.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ui){this._matrix[1]=ui}}),Object.defineProperty(Es.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ui){this._matrix[2]=ui}}),Object.defineProperty(Es.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ui){this._matrix[3]=ui}}),Object.defineProperty(Es.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ui){this._matrix[4]=ui}}),Object.defineProperty(Es.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ui){this._matrix[5]=ui}}),Object.defineProperty(Es.prototype,"a",{get:function(){return this._matrix[0]},set:function(ui){this._matrix[0]=ui}}),Object.defineProperty(Es.prototype,"b",{get:function(){return this._matrix[1]},set:function(ui){this._matrix[1]=ui}}),Object.defineProperty(Es.prototype,"c",{get:function(){return this._matrix[2]},set:function(ui){this._matrix[2]=ui}}),Object.defineProperty(Es.prototype,"d",{get:function(){return this._matrix[3]},set:function(ui){this._matrix[3]=ui}}),Object.defineProperty(Es.prototype,"e",{get:function(){return this._matrix[4]},set:function(ui){this._matrix[4]=ui}}),Object.defineProperty(Es.prototype,"f",{get:function(){return this._matrix[5]},set:function(ui){this._matrix[5]=ui}}),Object.defineProperty(Es.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Es.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Es.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Es.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Es.prototype.join=function(ui){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(pi).join(ui)},Es.prototype.multiply=function(ui){var Vi=ui.sx*this.sx+ui.shy*this.shx,Er=ui.sx*this.shy+ui.shy*this.sy,Pr=ui.shx*this.sx+ui.sy*this.shx,jr=ui.shx*this.shy+ui.sy*this.sy,Kr=ui.tx*this.sx+ui.ty*this.shx+this.tx,as=ui.tx*this.shy+ui.ty*this.sy+this.ty;return new Es(Vi,Er,Pr,jr,Kr,as)},Es.prototype.decompose=function(){var ui=this.sx,Vi=this.shy,Er=this.shx,Pr=this.sy,jr=this.tx,Kr=this.ty,as=Math.sqrt(ui*ui+Vi*Vi),_s=(ui/=as)*Er+(Vi/=as)*Pr;Er-=ui*_s,Pr-=Vi*_s;var Ps=Math.sqrt(Er*Er+Pr*Pr);return _s/=Ps,ui*(Pr/=Ps)<Vi*(Er/=Ps)&&(ui=-ui,Vi=-Vi,_s=-_s,as=-as),{scale:new Es(as,0,0,Ps,0,0),translate:new Es(1,0,0,1,jr,Kr),rotate:new Es(ui,Vi,-Vi,ui,0,0),skew:new Es(1,0,_s,1,0,0)}},Es.prototype.toString=function(ui){return this.join(" ")},Es.prototype.inversed=function(){var ui=this.sx,Vi=this.shy,Er=this.shx,Pr=this.sy,jr=this.tx,Kr=this.ty,as=1/(ui*Pr-Vi*Er),_s=Pr*as,Ps=-Vi*as,Gs=-Er*as,Os=ui*as;return new Es(_s,Ps,Gs,Os,-_s*jr-Gs*Kr,-Ps*jr-Os*Kr)},Es.prototype.applyToPoint=function(ui){var Vi=ui.x*this.sx+ui.y*this.shx+this.tx,Er=ui.x*this.shy+ui.y*this.sy+this.ty;return new ru(Vi,Er)},Es.prototype.applyToRectangle=function(ui){var Vi=this.applyToPoint(ui),Er=this.applyToPoint(new ru(ui.x+ui.w,ui.y+ui.h));return new Bu(Vi.x,Vi.y,Er.x-Vi.x,Er.y-Vi.y)},Es.prototype.clone=function(){var ui=this.sx,Vi=this.shy,Er=this.shx,Pr=this.sy,jr=this.tx,Kr=this.ty;return new Es(ui,Vi,Er,Pr,jr,Kr)},Ln.Matrix=Es;var bo=Ln.matrixMult=function(ui,Vi){return Vi.multiply(ui)},Us=new Es(1,0,0,1,0,0);Ln.unitMatrix=Ln.identityMatrix=Us;var zs=function(ui,Vi){if(!Ds[ui]){var Er=(Vi instanceof B?"Sh":"P")+(Object.keys(As).length+1).toString(10);Vi.id=Er,Ds[ui]=Er,As[Er]=Vi,Is.publish("addPattern",Vi)}};Ln.ShadingPattern=B,Ln.TilingPattern=M,Ln.addShadingPattern=function(ui,Vi){return vi("addShadingPattern()"),zs(ui,Vi),this},Ln.beginTilingPattern=function(ui){vi("beginTilingPattern()"),Bd(ui.boundingBox[0],ui.boundingBox[1],ui.boundingBox[2]-ui.boundingBox[0],ui.boundingBox[3]-ui.boundingBox[1],ui.matrix)},Ln.endTilingPattern=function(ui,Vi){vi("endTilingPattern()"),Vi.stream=Fr[er].join(`
`),zs(ui,Vi),Is.publish("endTilingPattern",Vi),Rs.pop().restore()};var Ws=Ln.__private__.newObject=function(){var ui=yo();return Co(ui,!0),ui},yo=Ln.__private__.newObjectDeferred=function(){return _r++,dr[_r]=function(){return gr},_r},Co=function(ui,Vi){return Vi=typeof Vi=="boolean"&&Vi,dr[ui]=gr,Vi&&nr(ui+" 0 obj"),ui},qa=Ln.__private__.newAdditionalObject=function(){var ui={objId:yo(),content:""};return vr.push(ui),ui},ma=yo(),Pa=yo(),Fa=Ln.__private__.decodeColorString=function(ui){var Vi=ui.split(" ");if(Vi.length!==2||Vi[1]!=="g"&&Vi[1]!=="G")Vi.length===5&&(Vi[4]==="k"||Vi[4]==="K")&&(Vi=[(1-Vi[0])*(1-Vi[3]),(1-Vi[1])*(1-Vi[3]),(1-Vi[2])*(1-Vi[3]),"r"]);else{var Er=parseFloat(Vi[0]);Vi=[Er,Er,Er,"r"]}for(var Pr="#",jr=0;jr<3;jr++)Pr+=("0"+Math.floor(255*parseFloat(Vi[jr])).toString(16)).slice(-2);return Pr},xa=Ln.__private__.encodeColorString=function(ui){var Vi;typeof ui=="string"&&(ui={ch1:ui});var Er=ui.ch1,Pr=ui.ch2,jr=ui.ch3,Kr=ui.ch4,as=ui.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Er=="string"&&Er.charAt(0)!=="#"){var _s=new f(Er);if(_s.ok)Er=_s.toHex();else if(!/^\d*\.?\d*$/.test(Er))throw new Error('Invalid color "'+Er+'" passed to jsPDF.encodeColorString.')}if(typeof Er=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Er)&&(Er="#"+Er[1]+Er[1]+Er[2]+Er[2]+Er[3]+Er[3]),typeof Er=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Er)){var Ps=parseInt(Er.substr(1),16);Er=Ps>>16&255,Pr=Ps>>8&255,jr=255&Ps}if(Pr===void 0||Kr===void 0&&Er===Pr&&Pr===jr)if(typeof Er=="string")Vi=Er+" "+as[0];else switch(ui.precision){case 2:Vi=Fi(Er/255)+" "+as[0];break;case 3:default:Vi=di(Er/255)+" "+as[0]}else if(Kr===void 0||_typeof(Kr)==="object"){if(Kr&&!isNaN(Kr.a)&&Kr.a===0)return Vi=["1.","1.","1.",as[1]].join(" ");if(typeof Er=="string")Vi=[Er,Pr,jr,as[1]].join(" ");else switch(ui.precision){case 2:Vi=[Fi(Er/255),Fi(Pr/255),Fi(jr/255),as[1]].join(" ");break;default:case 3:Vi=[di(Er/255),di(Pr/255),di(jr/255),as[1]].join(" ")}}else if(typeof Er=="string")Vi=[Er,Pr,jr,Kr,as[2]].join(" ");else switch(ui.precision){case 2:Vi=[Fi(Er),Fi(Pr),Fi(jr),Fi(Kr),as[2]].join(" ");break;case 3:default:Vi=[di(Er),di(Pr),di(jr),di(Kr),as[2]].join(" ")}return Vi},aa=Ln.__private__.getFilters=function(){return He},la=Ln.__private__.putStream=function(ui){var Vi=(ui=ui||{}).data||"",Er=ui.filters||aa(),Pr=ui.alreadyAppliedFilters||[],jr=ui.addLength1||!1,Kr=Vi.length,as=ui.objectId,_s=function(ga){return ga};if(An!==null&&as===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");An!==null&&(_s=pa.encryptor(as,0));var Ps={};Er===!0&&(Er=["FlateEncode"]);var Gs=ui.additionalKeyValues||[],Os=(Ps=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Vi,Er):{data:Vi,reverseChain:[]}).reverseChain+(Array.isArray(Pr)?Pr.join(" "):Pr.toString());if(Ps.data.length!==0&&(Gs.push({key:"Length",value:Ps.data.length}),jr===!0&&Gs.push({key:"Length1",value:Kr})),Os.length!=0)if(Os.split("/").length-1==1)Gs.push({key:"Filter",value:Os});else{Gs.push({key:"Filter",value:"["+Os+"]"});for(var Vs=0;Vs<Gs.length;Vs+=1)if(Gs[Vs].key==="DecodeParms"){for(var Io=[],xo=0;xo<Ps.reverseChain.split("/").length-1;xo+=1)Io.push("null");Io.push(Gs[Vs].value),Gs[Vs].value="["+Io.join(" ")+"]"}}nr("<<");for(var Jo=0;Jo<Gs.length;Jo++)nr("/"+Gs[Jo].key+" "+Gs[Jo].value);nr(">>"),Ps.data.length!==0&&(nr("stream"),nr(_s(Ps.data)),nr("endstream"))},nc=Ln.__private__.putPage=function(ui){var Vi=ui.number,Er=ui.data,Pr=ui.objId,jr=ui.contentsObjId;Co(Pr,!0),nr("<</Type /Page"),nr("/Parent "+ui.rootDictionaryObjId+" 0 R"),nr("/Resources "+ui.resourceDictionaryObjId+" 0 R"),nr("/MediaBox ["+parseFloat(pi(ui.mediaBox.bottomLeftX))+" "+parseFloat(pi(ui.mediaBox.bottomLeftY))+" "+pi(ui.mediaBox.topRightX)+" "+pi(ui.mediaBox.topRightY)+"]"),ui.cropBox!==null&&nr("/CropBox ["+pi(ui.cropBox.bottomLeftX)+" "+pi(ui.cropBox.bottomLeftY)+" "+pi(ui.cropBox.topRightX)+" "+pi(ui.cropBox.topRightY)+"]"),ui.bleedBox!==null&&nr("/BleedBox ["+pi(ui.bleedBox.bottomLeftX)+" "+pi(ui.bleedBox.bottomLeftY)+" "+pi(ui.bleedBox.topRightX)+" "+pi(ui.bleedBox.topRightY)+"]"),ui.trimBox!==null&&nr("/TrimBox ["+pi(ui.trimBox.bottomLeftX)+" "+pi(ui.trimBox.bottomLeftY)+" "+pi(ui.trimBox.topRightX)+" "+pi(ui.trimBox.topRightY)+"]"),ui.artBox!==null&&nr("/ArtBox ["+pi(ui.artBox.bottomLeftX)+" "+pi(ui.artBox.bottomLeftY)+" "+pi(ui.artBox.topRightX)+" "+pi(ui.artBox.topRightY)+"]"),typeof ui.userUnit=="number"&&ui.userUnit!==1&&nr("/UserUnit "+ui.userUnit),Is.publish("putPage",{objId:Pr,pageContext:Ss[Vi],pageNumber:Vi,page:Er}),nr("/Contents "+jr+" 0 R"),nr(">>"),nr("endobj");var Kr=Er.join(`
`);return si===ri.ADVANCED&&(Kr+=`
Q`),Co(jr,!0),la({data:Kr,filters:aa(),objectId:jr}),nr("endobj"),Pr},Oc=Ln.__private__.putPages=function(){var ui,Vi,Er=[];for(ui=1;ui<=Fs;ui++)Ss[ui].objId=yo(),Ss[ui].contentsObjId=yo();for(ui=1;ui<=Fs;ui++)Er.push(nc({number:ui,data:Fr[ui],objId:Ss[ui].objId,contentsObjId:Ss[ui].contentsObjId,mediaBox:Ss[ui].mediaBox,cropBox:Ss[ui].cropBox,bleedBox:Ss[ui].bleedBox,trimBox:Ss[ui].trimBox,artBox:Ss[ui].artBox,userUnit:Ss[ui].userUnit,rootDictionaryObjId:ma,resourceDictionaryObjId:Pa}));Co(ma,!0),nr("<</Type /Pages");var Pr="/Kids [";for(Vi=0;Vi<Fs;Vi++)Pr+=Er[Vi]+" 0 R ";nr(Pr+"]"),nr("/Count "+Fs),nr(">>"),nr("endobj"),Is.publish("postPutPages")},qc=function(ui){Is.publish("putFont",{font:ui,out:nr,newObject:Ws,putStream:la}),ui.isAlreadyPutted!==!0&&(ui.objectNumber=Ws(),nr("<<"),nr("/Type /Font"),nr("/BaseFont /"+F(ui.postScriptName)),nr("/Subtype /Type1"),typeof ui.encoding=="string"&&nr("/Encoding /"+ui.encoding),nr("/FirstChar 32"),nr("/LastChar 255"),nr(">>"),nr("endobj"))},Wc=function(){for(var ui in Ls)Ls.hasOwnProperty(ui)&&(Sn===!1||Sn===!0&&Tn.hasOwnProperty(ui))&&qc(Ls[ui])},Yc=function(ui){ui.objectNumber=Ws();var Vi=[];Vi.push({key:"Type",value:"/XObject"}),Vi.push({key:"Subtype",value:"/Form"}),Vi.push({key:"BBox",value:"["+[pi(ui.x),pi(ui.y),pi(ui.x+ui.width),pi(ui.y+ui.height)].join(" ")+"]"}),Vi.push({key:"Matrix",value:"["+ui.matrix.toString()+"]"});var Er=ui.pages[1].join(`
`);la({data:Er,additionalKeyValues:Vi,objectId:ui.objectNumber}),nr("endobj")},Xc=function(){for(var ui in qs)qs.hasOwnProperty(ui)&&Yc(qs[ui])},Ed=function(ui,Vi){var Er,Pr=[],jr=1/(Vi-1);for(Er=0;Er<1;Er+=jr)Pr.push(Er);if(Pr.push(1),ui[0].offset!=0){var Kr={offset:0,color:ui[0].color};ui.unshift(Kr)}if(ui[ui.length-1].offset!=1){var as={offset:1,color:ui[ui.length-1].color};ui.push(as)}for(var _s="",Ps=0,Gs=0;Gs<Pr.length;Gs++){for(Er=Pr[Gs];Er>ui[Ps+1].offset;)Ps++;var Os=ui[Ps].offset,Vs=(Er-Os)/(ui[Ps+1].offset-Os),Io=ui[Ps].color,xo=ui[Ps+1].color;_s+=mr(Math.round((1-Vs)*Io[0]+Vs*xo[0]).toString(16))+mr(Math.round((1-Vs)*Io[1]+Vs*xo[1]).toString(16))+mr(Math.round((1-Vs)*Io[2]+Vs*xo[2]).toString(16))}return _s.trim()},mh=function(ui,Vi){Vi||(Vi=21);var Er=Ws(),Pr=Ed(ui.colors,Vi),jr=[];jr.push({key:"FunctionType",value:"0"}),jr.push({key:"Domain",value:"[0.0 1.0]"}),jr.push({key:"Size",value:"["+Vi+"]"}),jr.push({key:"BitsPerSample",value:"8"}),jr.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),jr.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),la({data:Pr,additionalKeyValues:jr,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Er}),nr("endobj"),ui.objectNumber=Ws(),nr("<< /ShadingType "+ui.type),nr("/ColorSpace /DeviceRGB");var Kr="/Coords ["+pi(parseFloat(ui.coords[0]))+" "+pi(parseFloat(ui.coords[1]))+" ";ui.type===2?Kr+=pi(parseFloat(ui.coords[2]))+" "+pi(parseFloat(ui.coords[3])):Kr+=pi(parseFloat(ui.coords[2]))+" "+pi(parseFloat(ui.coords[3]))+" "+pi(parseFloat(ui.coords[4]))+" "+pi(parseFloat(ui.coords[5])),nr(Kr+="]"),ui.matrix&&nr("/Matrix ["+ui.matrix.toString()+"]"),nr("/Function "+Er+" 0 R"),nr("/Extend [true true]"),nr(">>"),nr("endobj")},vh=function(ui,Vi){var Er=yo(),Pr=Ws();Vi.push({resourcesOid:Er,objectOid:Pr}),ui.objectNumber=Pr;var jr=[];jr.push({key:"Type",value:"/Pattern"}),jr.push({key:"PatternType",value:"1"}),jr.push({key:"PaintType",value:"1"}),jr.push({key:"TilingType",value:"1"}),jr.push({key:"BBox",value:"["+ui.boundingBox.map(pi).join(" ")+"]"}),jr.push({key:"XStep",value:pi(ui.xStep)}),jr.push({key:"YStep",value:pi(ui.yStep)}),jr.push({key:"Resources",value:Er+" 0 R"}),ui.matrix&&jr.push({key:"Matrix",value:"["+ui.matrix.toString()+"]"}),la({data:ui.stream,additionalKeyValues:jr,objectId:ui.objectNumber}),nr("endobj")},Kc=function(ui){var Vi;for(Vi in As)As.hasOwnProperty(Vi)&&(As[Vi]instanceof B?mh(As[Vi]):As[Vi]instanceof M&&vh(As[Vi],ui))},Ad=function(ui){for(var Vi in ui.objectNumber=Ws(),nr("<<"),ui)switch(Vi){case"opacity":nr("/ca "+Fi(ui[Vi]));break;case"stroke-opacity":nr("/CA "+Fi(ui[Vi]))}nr(">>"),nr("endobj")},yh=function(){var ui;for(ui in xs)xs.hasOwnProperty(ui)&&Ad(xs[ui])},xu=function(){for(var ui in nr("/XObject <<"),qs)qs.hasOwnProperty(ui)&&qs[ui].objectNumber>=0&&nr("/"+ui+" "+qs[ui].objectNumber+" 0 R");Is.publish("putXobjectDict"),nr(">>")},_h=function(){pa.oid=Ws(),nr("<<"),nr("/Filter /Standard"),nr("/V "+pa.v),nr("/R "+pa.r),nr("/U <"+pa.toHexString(pa.U)+">"),nr("/O <"+pa.toHexString(pa.O)+">"),nr("/P "+pa.P),nr(">>"),nr("endobj")},Sd=function(){for(var ui in nr("/Font <<"),Ls)Ls.hasOwnProperty(ui)&&(Sn===!1||Sn===!0&&Tn.hasOwnProperty(ui))&&nr("/"+ui+" "+Ls[ui].objectNumber+" 0 R");nr(">>")},Ch=function(){if(Object.keys(As).length>0){for(var ui in nr("/Shading <<"),As)As.hasOwnProperty(ui)&&As[ui]instanceof B&&As[ui].objectNumber>=0&&nr("/"+ui+" "+As[ui].objectNumber+" 0 R");Is.publish("putShadingPatternDict"),nr(">>")}},Zc=function(ui){if(Object.keys(As).length>0){for(var Vi in nr("/Pattern <<"),As)As.hasOwnProperty(Vi)&&As[Vi]instanceof Ln.TilingPattern&&As[Vi].objectNumber>=0&&As[Vi].objectNumber<ui&&nr("/"+Vi+" "+As[Vi].objectNumber+" 0 R");Is.publish("putTilingPatternDict"),nr(">>")}},Eh=function(){if(Object.keys(xs).length>0){var ui;for(ui in nr("/ExtGState <<"),xs)xs.hasOwnProperty(ui)&&xs[ui].objectNumber>=0&&nr("/"+ui+" "+xs[ui].objectNumber+" 0 R");Is.publish("putGStateDict"),nr(">>")}},ko=function(ui){Co(ui.resourcesOid,!0),nr("<<"),nr("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Sd(),Ch(),Zc(ui.objectOid),Eh(),xu(),nr(">>"),nr("endobj")},bd=function(){var ui=[];Wc(),yh(),Xc(),Kc(ui),Is.publish("putResources"),ui.forEach(ko),ko({resourcesOid:Pa,objectOid:Number.MAX_SAFE_INTEGER}),Is.publish("postPutResources")},Id=function(){Is.publish("putAdditionalObjects");for(var ui=0;ui<vr.length;ui++){var Vi=vr[ui];Co(Vi.objId,!0),nr(Vi.content),nr("endobj")}Is.publish("postPutAdditionalObjects")},Pd=function(ui){ps[ui.fontName]=ps[ui.fontName]||{},ps[ui.fontName][ui.fontStyle]=ui.id},Lu=function(ui,Vi,Er,Pr,jr){var Kr={id:"F"+(Object.keys(Ls).length+1).toString(10),postScriptName:ui,fontName:Vi,fontStyle:Er,encoding:Pr,isStandardFont:jr||!1,metadata:{}};return Is.publish("addFont",{font:Kr,instance:this}),Ls[Kr.id]=Kr,Pd(Kr),Kr.id},Ah=function(ui){for(var Vi=0,Er=Ir.length;Vi<Er;Vi++){var Pr=Lu.call(this,ui[Vi][0],ui[Vi][1],ui[Vi][2],Ir[Vi][3],!0);Sn===!1&&(Tn[Pr]=!0);var jr=ui[Vi][0].split("-");Pd({id:Pr,fontName:jr[0],fontStyle:jr[1]||""})}Is.publish("addFonts",{fonts:Ls,dictionary:ps})},wl=function(ui){return ui.foo=function(){try{return ui.apply(this,arguments)}catch(Pr){var Vi=Pr.stack||"";~Vi.indexOf(" at ")&&(Vi=Vi.split(" at ")[1]);var Er="Error in function "+Vi.split(`
`)[0].split("<")[0]+": "+Pr.message;if(!n.console)throw new Error(Er);n.console.error(Er,Pr),n.alert&&alert(Er)}},ui.foo.bar=ui,ui.foo},Jc=function(ui,Vi){var Er,Pr,jr,Kr,as,_s,Ps,Gs,Os;if(jr=(Vi=Vi||{}).sourceEncoding||"Unicode",as=Vi.outputEncoding,(Vi.autoencode||as)&&Ls[cs].metadata&&Ls[cs].metadata[jr]&&Ls[cs].metadata[jr].encoding&&(Kr=Ls[cs].metadata[jr].encoding,!as&&Ls[cs].encoding&&(as=Ls[cs].encoding),!as&&Kr.codePages&&(as=Kr.codePages[0]),typeof as=="string"&&(as=Kr[as]),as)){for(Ps=!1,_s=[],Er=0,Pr=ui.length;Er<Pr;Er++)(Gs=as[ui.charCodeAt(Er)])?_s.push(String.fromCharCode(Gs)):_s.push(ui[Er]),_s[Er].charCodeAt(0)>>8&&(Ps=!0);ui=_s.join("")}for(Er=ui.length;Ps===void 0&&Er!==0;)ui.charCodeAt(Er-1)>>8&&(Ps=!0),Er--;if(!Ps)return ui;for(_s=Vi.noBOM?[]:[254,255],Er=0,Pr=ui.length;Er<Pr;Er++){if((Os=(Gs=ui.charCodeAt(Er))>>8)>>8)throw new Error("Character at position "+Er+" of string '"+ui+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");_s.push(Os),_s.push(Gs-(Os<<8))}return String.fromCharCode.apply(void 0,_s)},La=Ln.__private__.pdfEscape=Ln.pdfEscape=function(ui,Vi){return Jc(ui,Vi).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ru=Ln.__private__.beginPage=function(ui){Fr[++Fs]=[],Ss[Fs]={objId:0,contentsObjId:0,userUnit:Number(We),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ui[0]),topRightY:Number(ui[1])}},xd(Fs),ar(Fr[er])},wd=function(ui,Vi){var Er,Pr,jr;switch(Te=Vi||Te,typeof ui=="string"&&(Er=ni(ui.toLowerCase()),Array.isArray(Er)&&(Pr=Er[0],jr=Er[1])),Array.isArray(ui)&&(Pr=ui[0]*Qr,jr=ui[1]*Qr),isNaN(Pr)&&(Pr=Be[0],jr=Be[1]),(Pr>14400||jr>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Pr=Math.min(14400,Pr),jr=Math.min(14400,jr)),Be=[Pr,jr],Te.substr(0,1)){case"l":jr>Pr&&(Be=[jr,Pr]);break;case"p":Pr>jr&&(Be=[jr,Pr])}Ru(Be),Od(ku),nr(kl),Fu!==0&&nr(Fu+" J"),Gu!==0&&nr(Gu+" j"),Is.publish("addPage",{pageNumber:Fs})},Sh=function(ui){ui>0&&ui<=Fs&&(Fr.splice(ui,1),Ss.splice(ui,1),Fs--,er>Fs&&(er=Fs),this.setPage(er))},xd=function(ui){ui>0&&ui<=Fs&&(er=ui)},bh=Ln.__private__.getNumberOfPages=Ln.getNumberOfPages=function(){return Fr.length-1},Td=function(ui,Vi,Er){var Pr,jr=void 0;return Er=Er||{},ui=ui!==void 0?ui:Ls[cs].fontName,Vi=Vi!==void 0?Vi:Ls[cs].fontStyle,Pr=ui.toLowerCase(),ps[Pr]!==void 0&&ps[Pr][Vi]!==void 0?jr=ps[Pr][Vi]:ps[ui]!==void 0&&ps[ui][Vi]!==void 0?jr=ps[ui][Vi]:Er.disableWarning===!1&&a.warn("Unable to look up font label for font '"+ui+"', '"+Vi+"'. Refer to getFontList() for available fonts."),jr||Er.noFallback||(jr=ps.times[Vi])==null&&(jr=ps.times.normal),jr},Ih=Ln.__private__.putInfo=function(){var ui=Ws(),Vi=function(Pr){return Pr};for(var Er in An!==null&&(Vi=pa.encryptor(ui,0)),nr("<<"),nr("/Producer ("+La(Vi("jsPDF "+E.version))+")"),Xr)Xr.hasOwnProperty(Er)&&Xr[Er]&&nr("/"+Er.substr(0,1).toUpperCase()+Er.substr(1)+" ("+La(Vi(Xr[Er]))+")");nr("/CreationDate ("+La(Vi(Hi))+")"),nr(">>"),nr("endobj")},Mu=Ln.__private__.putCatalog=function(ui){var Vi=(ui=ui||{}).rootDictionaryObjId||ma;switch(Ws(),nr("<<"),nr("/Type /Catalog"),nr("/Pages "+Vi+" 0 R"),Rr||(Rr="fullwidth"),Rr){case"fullwidth":nr("/OpenAction [3 0 R /FitH null]");break;case"fullheight":nr("/OpenAction [3 0 R /FitV null]");break;case"fullpage":nr("/OpenAction [3 0 R /Fit]");break;case"original":nr("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Er=""+Rr;Er.substr(Er.length-1)==="%"&&(Rr=parseInt(Rr)/100),typeof Rr=="number"&&nr("/OpenAction [3 0 R /XYZ null null "+Fi(Rr)+"]")}switch(Br||(Br="continuous"),Br){case"continuous":nr("/PageLayout /OneColumn");break;case"single":nr("/PageLayout /SinglePage");break;case"two":case"twoleft":nr("/PageLayout /TwoColumnLeft");break;case"tworight":nr("/PageLayout /TwoColumnRight")}Sr&&nr("/PageMode /"+Sr),Is.publish("putCatalog"),nr(">>"),nr("endobj")},Ph=Ln.__private__.putTrailer=function(){nr("trailer"),nr("<<"),nr("/Size "+(_r+1)),nr("/Root "+_r+" 0 R"),nr("/Info "+(_r-1)+" 0 R"),An!==null&&nr("/Encrypt "+pa.oid+" 0 R"),nr("/ID [ <"+Ki+"> <"+Ki+"> ]"),nr(">>")},wh=Ln.__private__.putHeader=function(){nr("%PDF-"+Bn),nr("%ºß¬à")},xh=Ln.__private__.putXRef=function(){var ui="0000000000";nr("xref"),nr("0 "+(_r+1)),nr("0000000000 65535 f ");for(var Vi=1;Vi<=_r;Vi++)typeof dr[Vi]=="function"?nr((ui+dr[Vi]()).slice(-10)+" 00000 n "):dr[Vi]!==void 0?nr((ui+dr[Vi]).slice(-10)+" 00000 n "):nr("0000000000 00000 n ")},cc=Ln.__private__.buildDocument=function(){fr(),ar(cr),Is.publish("buildDocument"),wh(),Oc(),Id(),bd(),An!==null&&_h(),Ih(),Mu();var ui=gr;return xh(),Ph(),nr("startxref"),nr(""+ui),nr("%%EOF"),ar(Fr[er]),cr.join(`
`)},Qc=Ln.__private__.getBlob=function(ui){return new Blob([kr(ui)],{type:"application/pdf"})},eu=Ln.output=Ln.__private__.output=wl(function(ui,Vi){switch(typeof(Vi=Vi||{})=="string"?Vi={filename:Vi}:Vi.filename=Vi.filename||"generated.pdf",ui){case void 0:return cc();case"save":Ln.save(Vi.filename);break;case"arraybuffer":return kr(cc());case"blob":return Qc(cc());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(Qc(cc()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Er="",Pr=cc();try{Er=h(Pr)}catch{Er=h(unescape(encodeURIComponent(Pr)))}return"data:application/pdf;filename="+Vi.filename+";base64,"+Er;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var jr="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Kr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Vi.pdfObjectUrl&&(jr=Vi.pdfObjectUrl,Kr="");var as='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+jr+'"'+Kr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Vi)+");<\/script></body></html>",_s=n.open();return _s!==null&&_s.document.write(as),_s}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Ps='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Vi.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Vi.filename+'" width="500px" height="400px" /></body></html>',Gs=n.open();if(Gs!==null){Gs.document.write(Ps);var Os=this;Gs.document.documentElement.querySelector("#pdfViewer").onload=function(){Gs.document.title=Vi.filename,Gs.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Os.output("bloburl"))}}return Gs}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Vs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Vi)+'"></iframe></body></html>',Io=n.open();if(Io!==null&&(Io.document.write(Vs),Io.document.title=Vi.filename),Io||typeof safari>"u")return Io;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",Vi);default:return null}}),Ld=function(ui){return Array.isArray(oa)===!0&&oa.indexOf(ui)>-1};switch(ke){case"pt":Qr=1;break;case"mm":Qr=72/25.4;break;case"cm":Qr=72/2.54;break;case"in":Qr=72;break;case"px":Qr=Ld("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qr=12;break;case"ex":Qr=6;break;default:if(typeof ke!="number")throw new Error("Invalid unit: "+ke);Qr=ke}var pa=null;wr(),sr();var Th=function(ui){return An!==null?pa.encryptor(ui,0):function(Vi){return Vi}},Rd=Ln.__private__.getPageInfo=Ln.getPageInfo=function(ui){if(isNaN(ui)||ui%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ss[ui].objId,pageNumber:ui,pageContext:Ss[ui]}},Ns=Ln.__private__.getPageInfoByObjId=function(ui){if(isNaN(ui)||ui%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Vi in Ss)if(Ss[Vi].objId===ui)break;return Rd(Vi)},Lh=Ln.__private__.getCurrentPageInfo=Ln.getCurrentPageInfo=function(){return{objId:Ss[er].objId,pageNumber:er,pageContext:Ss[er]}};Ln.addPage=function(){return wd.apply(this,arguments),this},Ln.setPage=function(){return xd.apply(this,arguments),ar.call(this,Fr[er]),this},Ln.insertPage=function(ui){return this.addPage(),this.movePage(er,ui),this},Ln.movePage=function(ui,Vi){var Er,Pr;if(ui>Vi){Er=Fr[ui],Pr=Ss[ui];for(var jr=ui;jr>Vi;jr--)Fr[jr]=Fr[jr-1],Ss[jr]=Ss[jr-1];Fr[Vi]=Er,Ss[Vi]=Pr,this.setPage(Vi)}else if(ui<Vi){Er=Fr[ui],Pr=Ss[ui];for(var Kr=ui;Kr<Vi;Kr++)Fr[Kr]=Fr[Kr+1],Ss[Kr]=Ss[Kr+1];Fr[Vi]=Er,Ss[Vi]=Pr,this.setPage(Vi)}return this},Ln.deletePage=function(){return Sh.apply(this,arguments),this},Ln.__private__.text=Ln.text=function(ui,Vi,Er,Pr,jr){var Kr,as,_s,Ps,Gs,Os,Vs,Io,xo,Jo=(Pr=Pr||{}).scope||this;if(typeof ui=="number"&&typeof Vi=="number"&&(typeof Er=="string"||Array.isArray(Er))){var ga=Er;Er=Vi,Vi=ui,ui=ga}if(arguments[3]instanceof Es?(vi("The transform parameter of text() with a Matrix value"),xo=jr):(_s=arguments[4],Ps=arguments[5],_typeof(Vs=arguments[3])==="object"&&Vs!==null||(typeof _s=="string"&&(Ps=_s,_s=null),typeof Vs=="string"&&(Ps=Vs,Vs=null),typeof Vs=="number"&&(_s=Vs,Vs=null),Pr={flags:Vs,angle:_s,align:Ps})),isNaN(Vi)||isNaN(Er)||ui==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ui.length===0)return Jo;var ia="",Dl=!1,Ga=typeof Pr.lineHeightFactor=="number"?Pr.lineHeightFactor:Dc,sc=Jo.internal.scaleFactor;function Ud(ho){return ho=ho.split("	").join(Array(Pr.TabLen||9).join(" ")),La(ho,Vs)}function $u(ho){for(var go,$o=ho.concat(),na=[],pc=$o.length;pc--;)typeof(go=$o.shift())=="string"?na.push(go):Array.isArray(ho)&&(go.length===1||go[1]===void 0&&go[2]===void 0)?na.push(go[0]):na.push([go[0],go[1],go[2]]);return na}function zu(ho,go){var $o;if(typeof ho=="string")$o=go(ho)[0];else if(Array.isArray(ho)){for(var na,pc,Ju=ho.concat(),vu=[],Yd=Ju.length;Yd--;)typeof(na=Ju.shift())=="string"?vu.push(go(na)[0]):Array.isArray(na)&&typeof na[0]=="string"&&(pc=go(na[0],na[1],na[2]),vu.push([pc[0],pc[1],pc[2]]));$o=vu}return $o}var au=!1,Hu=!0;if(typeof ui=="string")au=!0;else if(Array.isArray(ui)){var qu=ui.concat();as=[];for(var cu,ca=qu.length;ca--;)(typeof(cu=qu.shift())!="string"||Array.isArray(cu)&&typeof cu[0]!="string")&&(Hu=!1);au=Hu}if(au===!1)throw new Error('Type of text must be string or Array. "'+ui+'" is not recognized.');typeof ui=="string"&&(ui=ui.match(/[\r?\n]/)?ui.split(/\r\n|\r|\n/g):[ui]);var uu=Mr/Jo.internal.scaleFactor,du=uu*(Ga-1);switch(Pr.baseline){case"bottom":Er-=du;break;case"top":Er+=uu-du;break;case"hanging":Er+=uu-2*du;break;case"middle":Er+=uu/2-du}if((Os=Pr.maxWidth||0)>0&&(typeof ui=="string"?ui=Jo.splitTextToSize(ui,Os):Object.prototype.toString.call(ui)==="[object Array]"&&(ui=ui.reduce(function(ho,go){return ho.concat(Jo.splitTextToSize(go,Os))},[]))),Kr={text:ui,x:Vi,y:Er,options:Pr,mutex:{pdfEscape:La,activeFontKey:cs,fonts:Ls,activeFontSize:Mr}},Is.publish("preProcessText",Kr),ui=Kr.text,_s=(Pr=Kr.options).angle,!(xo instanceof Es)&&_s&&typeof _s=="number"){_s*=Math.PI/180,Pr.rotationDirection===0&&(_s=-_s),si===ri.ADVANCED&&(_s=-_s);var hu=Math.cos(_s),Wu=Math.sin(_s);xo=new Es(hu,Wu,-Wu,hu,0,0)}else _s&&_s instanceof Es&&(xo=_s);si!==ri.ADVANCED||xo||(xo=Us),(Gs=Pr.charSpace||iu)!==void 0&&(ia+=pi(ci(Gs))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Io=Pr.horizontalScale)!==void 0&&(ia+=pi(100*Io)+` Tz
`),Pr.lang;var Ra=-1,Uh=Pr.renderingMode!==void 0?Pr.renderingMode:Pr.stroke,Yu=Jo.internal.getCurrentPageInfo().pageContext;switch(Uh){case 0:case!1:case"fill":Ra=0;break;case 1:case!0:case"stroke":Ra=1;break;case 2:case"fillThenStroke":Ra=2;break;case 3:case"invisible":Ra=3;break;case 4:case"fillAndAddForClipping":Ra=4;break;case 5:case"strokeAndAddPathForClipping":Ra=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Ra=6;break;case 7:case"addToPathForClipping":Ra=7}var jd=Yu.usedRenderingMode!==void 0?Yu.usedRenderingMode:-1;Ra!==-1?ia+=Ra+` Tr
`:jd!==-1&&(ia+=`0 Tr
`),Ra!==-1&&(Yu.usedRenderingMode=Ra),Ps=Pr.align||"left";var Wa,fu=Mr*Ga,Vd=Jo.internal.pageSize.getWidth(),$d=Ls[cs];Gs=Pr.charSpace||iu,Os=Pr.maxWidth||0,Vs=Object.assign({autoencode:!0,noBOM:!0},Pr.flags);var Ec=[],Bc=function(ho){return Jo.getStringUnitWidth(ho,{font:$d,charSpace:Gs,fontSize:Mr,doKerning:!1})*Mr/sc};if(Object.prototype.toString.call(ui)==="[object Array]"){var Ma;as=$u(ui),Ps!=="left"&&(Wa=as.map(Bc));var va,Ac=0;if(Ps==="right"){Vi-=Wa[0],ui=[],ca=as.length;for(var dc=0;dc<ca;dc++)dc===0?(va=rc(Vi),Ma=uc(Er)):(va=ci(Ac-Wa[dc]),Ma=-fu),ui.push([as[dc],va,Ma]),Ac=Wa[dc]}else if(Ps==="center"){Vi-=Wa[0]/2,ui=[],ca=as.length;for(var hc=0;hc<ca;hc++)hc===0?(va=rc(Vi),Ma=uc(Er)):(va=ci((Ac-Wa[hc])/2),Ma=-fu),ui.push([as[hc],va,Ma]),Ac=Wa[hc]}else if(Ps==="left"){ui=[],ca=as.length;for(var pu=0;pu<ca;pu++)ui.push(as[pu])}else if(Ps==="justify"&&$d.encoding==="Identity-H"){ui=[],ca=as.length,Os=Os!==0?Os:Vd;for(var fc=0,Do=0;Do<ca;Do++)if(Ma=Do===0?uc(Er):-fu,va=Do===0?rc(Vi):fc,Do<ca-1){var Xu=ci((Os-Wa[Do])/(as[Do].split(" ").length-1)),ya=as[Do].split(" ");ui.push([ya[0]+" ",va,Ma]),fc=0;for(var Ya=1;Ya<ya.length;Ya++){var gu=(Bc(ya[Ya-1]+" "+ya[Ya])-Bc(ya[Ya]))*sc+Xu;Ya==ya.length-1?ui.push([ya[Ya],gu,0]):ui.push([ya[Ya]+" ",gu,0]),fc-=gu}}else ui.push([as[Do],va,Ma]);ui.push(["",fc,0])}else{if(Ps!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ui=[],ca=as.length,Os=Os!==0?Os:Vd,Do=0;Do<ca;Do++)Ma=Do===0?uc(Er):-fu,va=Do===0?rc(Vi):0,Do<ca-1?Ec.push(pi(ci((Os-Wa[Do])/(as[Do].split(" ").length-1)))):Ec.push(0),ui.push([as[Do],va,Ma])}}var Wd=typeof Pr.R2L=="boolean"?Pr.R2L:Ar;Wd===!0&&(ui=zu(ui,function(ho,go,$o){return[ho.split("").reverse().join(""),go,$o]})),Kr={text:ui,x:Vi,y:Er,options:Pr,mutex:{pdfEscape:La,activeFontKey:cs,fonts:Ls,activeFontSize:Mr}},Is.publish("postProcessText",Kr),ui=Kr.text,Dl=Kr.mutex.isHex||!1;var Ku=Ls[cs].encoding;Ku!=="WinAnsiEncoding"&&Ku!=="StandardEncoding"||(ui=zu(ui,function(ho,go,$o){return[Ud(ho),go,$o]})),as=$u(ui),ui=[];for(var Uc,jc,Sc,Vc=0,mu=1,$c=Array.isArray(as[0])?mu:Vc,bc="",Zu=function(ho,go,$o){var na="";return $o instanceof Es?($o=typeof Pr.angle=="number"?bo($o,new Es(1,0,0,1,ho,go)):bo(new Es(1,0,0,1,ho,go),$o),si===ri.ADVANCED&&($o=bo(new Es(1,0,0,-1,0,0),$o)),na=$o.join(" ")+` Tm
`):na=pi(ho)+" "+pi(go)+` Td
`,na},Xa=0;Xa<as.length;Xa++){switch(bc="",$c){case mu:Sc=(Dl?"<":"(")+as[Xa][0]+(Dl?">":")"),Uc=parseFloat(as[Xa][1]),jc=parseFloat(as[Xa][2]);break;case Vc:Sc=(Dl?"<":"(")+as[Xa]+(Dl?">":")"),Uc=rc(Vi),jc=uc(Er)}Ec!==void 0&&Ec[Xa]!==void 0&&(bc=Ec[Xa]+` Tw
`),Xa===0?ui.push(bc+Zu(Uc,jc,xo)+Sc):$c===Vc?ui.push(bc+Sc):$c===mu&&ui.push(bc+Zu(Uc,jc,xo)+Sc)}ui=$c===Vc?ui.join(` Tj
T* `):ui.join(` Tj
`),ui+=` Tj
`;var Ka=`BT
/`;return Ka+=cs+" "+Mr+` Tf
`,Ka+=pi(Mr*Ga)+` TL
`,Ka+=Fc+`
`,Ka+=ia,Ka+=ui,nr(Ka+="ET"),Tn[cs]=!0,Jo};var Rh=Ln.__private__.clip=Ln.clip=function(ui){return nr(ui==="evenodd"?"W*":"W"),this};Ln.clipEvenOdd=function(){return Rh("evenodd")},Ln.__private__.discardPath=Ln.discardPath=function(){return nr("n"),this};var ic=Ln.__private__.isValidStyle=function(ui){var Vi=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ui)!==-1&&(Vi=!0),Vi};Ln.__private__.setDefaultPathOperation=Ln.setDefaultPathOperation=function(ui){return ic(ui)&&(En=ui),this};var Md=Ln.__private__.getStyle=Ln.getStyle=function(ui){var Vi=En;switch(ui){case"D":case"S":Vi="S";break;case"F":Vi="f";break;case"FD":case"DF":Vi="B";break;case"f":case"f*":case"B":case"B*":Vi=ui}return Vi},Nd=Ln.close=function(){return nr("h"),this};Ln.stroke=function(){return nr("S"),this},Ln.fill=function(ui){return tu("f",ui),this},Ln.fillEvenOdd=function(ui){return tu("f*",ui),this},Ln.fillStroke=function(ui){return tu("B",ui),this},Ln.fillStrokeEvenOdd=function(ui){return tu("B*",ui),this};var tu=function(ui,Vi){_typeof(Vi)==="object"?Nh(Vi,ui):nr(ui)},Nu=function(ui){ui===null||si===ri.ADVANCED&&ui===void 0||(ui=Md(ui),nr(ui))};function Mh(ui,Vi,Er,Pr,jr){var Kr=new M(Vi||this.boundingBox,Er||this.xStep,Pr||this.yStep,this.gState,jr||this.matrix);Kr.stream=this.stream;var as=ui+"$$"+this.cloneIndex+++"$$";return zs(as,Kr),Kr}var Nh=function(ui,Vi){var Er=Ds[ui.key],Pr=As[Er];if(Pr instanceof B)nr("q"),nr(Oh(Vi)),Pr.gState&&Ln.setGState(Pr.gState),nr(ui.matrix.toString()+" cm"),nr("/"+Er+" sh"),nr("Q");else if(Pr instanceof M){var jr=new Es(1,0,0,-1,0,Cc());ui.matrix&&(jr=jr.multiply(ui.matrix||Us),Er=Mh.call(Pr,ui.key,ui.boundingBox,ui.xStep,ui.yStep,jr).id),nr("q"),nr("/Pattern cs"),nr("/"+Er+" scn"),Pr.gState&&Ln.setGState(Pr.gState),nr(Vi),nr("Q")}},Oh=function(ui){switch(ui){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Ou=Ln.moveTo=function(ui,Vi){return nr(pi(ci(ui))+" "+pi(Oi(Vi))+" m"),this},kc=Ln.lineTo=function(ui,Vi){return nr(pi(ci(ui))+" "+pi(Oi(Vi))+" l"),this},yc=Ln.curveTo=function(ui,Vi,Er,Pr,jr,Kr){return nr([pi(ci(ui)),pi(Oi(Vi)),pi(ci(Er)),pi(Oi(Pr)),pi(ci(jr)),pi(Oi(Kr)),"c"].join(" ")),this};Ln.__private__.line=Ln.line=function(ui,Vi,Er,Pr,jr){if(isNaN(ui)||isNaN(Vi)||isNaN(Er)||isNaN(Pr)||!ic(jr))throw new Error("Invalid arguments passed to jsPDF.line");return si===ri.COMPAT?this.lines([[Er-ui,Pr-Vi]],ui,Vi,[1,1],jr||"S"):this.lines([[Er-ui,Pr-Vi]],ui,Vi,[1,1]).stroke()},Ln.__private__.lines=Ln.lines=function(ui,Vi,Er,Pr,jr,Kr){var as,_s,Ps,Gs,Os,Vs,Io,xo,Jo,ga,ia,Dl;if(typeof ui=="number"&&(Dl=Er,Er=Vi,Vi=ui,ui=Dl),Pr=Pr||[1,1],Kr=Kr||!1,isNaN(Vi)||isNaN(Er)||!Array.isArray(ui)||!Array.isArray(Pr)||!ic(jr)||typeof Kr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ou(Vi,Er),as=Pr[0],_s=Pr[1],Gs=ui.length,ga=Vi,ia=Er,Ps=0;Ps<Gs;Ps++)(Os=ui[Ps]).length===2?(ga=Os[0]*as+ga,ia=Os[1]*_s+ia,kc(ga,ia)):(Vs=Os[0]*as+ga,Io=Os[1]*_s+ia,xo=Os[2]*as+ga,Jo=Os[3]*_s+ia,ga=Os[4]*as+ga,ia=Os[5]*_s+ia,yc(Vs,Io,xo,Jo,ga,ia));return Kr&&Nd(),Nu(jr),this},Ln.path=function(ui){for(var Vi=0;Vi<ui.length;Vi++){var Er=ui[Vi],Pr=Er.c;switch(Er.op){case"m":Ou(Pr[0],Pr[1]);break;case"l":kc(Pr[0],Pr[1]);break;case"c":yc.apply(this,Pr);break;case"h":Nd()}}return this},Ln.__private__.rect=Ln.rect=function(ui,Vi,Er,Pr,jr){if(isNaN(ui)||isNaN(Vi)||isNaN(Er)||isNaN(Pr)||!ic(jr))throw new Error("Invalid arguments passed to jsPDF.rect");return si===ri.COMPAT&&(Pr=-Pr),nr([pi(ci(ui)),pi(Oi(Vi)),pi(ci(Er)),pi(ci(Pr)),"re"].join(" ")),Nu(jr),this},Ln.__private__.triangle=Ln.triangle=function(ui,Vi,Er,Pr,jr,Kr,as){if(isNaN(ui)||isNaN(Vi)||isNaN(Er)||isNaN(Pr)||isNaN(jr)||isNaN(Kr)||!ic(as))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Er-ui,Pr-Vi],[jr-Er,Kr-Pr],[ui-jr,Vi-Kr]],ui,Vi,[1,1],as,!0),this},Ln.__private__.roundedRect=Ln.roundedRect=function(ui,Vi,Er,Pr,jr,Kr,as){if(isNaN(ui)||isNaN(Vi)||isNaN(Er)||isNaN(Pr)||isNaN(jr)||isNaN(Kr)||!ic(as))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var _s=4/3*(Math.SQRT2-1);return jr=Math.min(jr,.5*Er),Kr=Math.min(Kr,.5*Pr),this.lines([[Er-2*jr,0],[jr*_s,0,jr,Kr-Kr*_s,jr,Kr],[0,Pr-2*Kr],[0,Kr*_s,-jr*_s,Kr,-jr,Kr],[2*jr-Er,0],[-jr*_s,0,-jr,-Kr*_s,-jr,-Kr],[0,2*Kr-Pr],[0,-Kr*_s,jr*_s,-Kr,jr,-Kr]],ui+jr,Vi,[1,1],as,!0),this},Ln.__private__.ellipse=Ln.ellipse=function(ui,Vi,Er,Pr,jr){if(isNaN(ui)||isNaN(Vi)||isNaN(Er)||isNaN(Pr)||!ic(jr))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Kr=4/3*(Math.SQRT2-1)*Er,as=4/3*(Math.SQRT2-1)*Pr;return Ou(ui+Er,Vi),yc(ui+Er,Vi-as,ui+Kr,Vi-Pr,ui,Vi-Pr),yc(ui-Kr,Vi-Pr,ui-Er,Vi-as,ui-Er,Vi),yc(ui-Er,Vi+as,ui-Kr,Vi+Pr,ui,Vi+Pr),yc(ui+Kr,Vi+Pr,ui+Er,Vi+as,ui+Er,Vi),Nu(jr),this},Ln.__private__.circle=Ln.circle=function(ui,Vi,Er,Pr){if(isNaN(ui)||isNaN(Vi)||isNaN(Er)||!ic(Pr))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ui,Vi,Er,Er,Pr)},Ln.setFont=function(ui,Vi,Er){return Er&&(Vi=Pi(Vi,Er)),cs=Td(ui,Vi,{disableWarning:!1}),this};var kh=Ln.__private__.getFont=Ln.getFont=function(){return Ls[Td.apply(Ln,arguments)]};Ln.__private__.getFontList=Ln.getFontList=function(){var ui,Vi,Er={};for(ui in ps)if(ps.hasOwnProperty(ui))for(Vi in Er[ui]=[],ps[ui])ps[ui].hasOwnProperty(Vi)&&Er[ui].push(Vi);return Er},Ln.addFont=function(ui,Vi,Er,Pr,jr){var Kr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Kr.indexOf(arguments[3])!==-1?jr=arguments[3]:arguments[3]&&Kr.indexOf(arguments[3])==-1&&(Er=Pi(Er,Pr)),jr=jr||"Identity-H",Lu.call(this,ui,Vi,Er,jr)};var Dc,ku=Oe.lineWidth||.200025,nu=Ln.__private__.getLineWidth=Ln.getLineWidth=function(){return ku},Od=Ln.__private__.setLineWidth=Ln.setLineWidth=function(ui){return ku=ui,nr(pi(ci(ui))+" w"),this};Ln.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(ui,Vi){if(ui=ui||[],Vi=Vi||0,isNaN(Vi)||!Array.isArray(ui))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ui=ui.map(function(Er){return pi(ci(Er))}).join(" "),Vi=pi(ci(Vi)),nr("["+ui+"] "+Vi+" d"),this};var kd=Ln.__private__.getLineHeight=Ln.getLineHeight=function(){return Mr*Dc};Ln.__private__.getLineHeight=Ln.getLineHeight=function(){return Mr*Dc};var Dd=Ln.__private__.setLineHeightFactor=Ln.setLineHeightFactor=function(ui){return typeof(ui=ui||1.15)=="number"&&(Dc=ui),this},Fd=Ln.__private__.getLineHeightFactor=Ln.getLineHeightFactor=function(){return Dc};Dd(Oe.lineHeight);var rc=Ln.__private__.getHorizontalCoordinate=function(ui){return ci(ui)},uc=Ln.__private__.getVerticalCoordinate=function(ui){return si===ri.ADVANCED?ui:Ss[er].mediaBox.topRightY-Ss[er].mediaBox.bottomLeftY-ci(ui)},Dh=Ln.__private__.getHorizontalCoordinateString=Ln.getHorizontalCoordinateString=function(ui){return pi(rc(ui))},_c=Ln.__private__.getVerticalCoordinateString=Ln.getVerticalCoordinateString=function(ui){return pi(uc(ui))},kl=Oe.strokeColor||"0 G";Ln.__private__.getStrokeColor=Ln.getDrawColor=function(){return Fa(kl)},Ln.__private__.setStrokeColor=Ln.setDrawColor=function(ui,Vi,Er,Pr){return kl=xa({ch1:ui,ch2:Vi,ch3:Er,ch4:Pr,pdfColorType:"draw",precision:2}),nr(kl),this};var Du=Oe.fillColor||"0 g";Ln.__private__.getFillColor=Ln.getFillColor=function(){return Fa(Du)},Ln.__private__.setFillColor=Ln.setFillColor=function(ui,Vi,Er,Pr){return Du=xa({ch1:ui,ch2:Vi,ch3:Er,ch4:Pr,pdfColorType:"fill",precision:2}),nr(Du),this};var Fc=Oe.textColor||"0 g",Fh=Ln.__private__.getTextColor=Ln.getTextColor=function(){return Fa(Fc)};Ln.__private__.setTextColor=Ln.setTextColor=function(ui,Vi,Er,Pr){return Fc=xa({ch1:ui,ch2:Vi,ch3:Er,ch4:Pr,pdfColorType:"text",precision:3}),this};var iu=Oe.charSpace,Gh=Ln.__private__.getCharSpace=Ln.getCharSpace=function(){return parseFloat(iu||0)};Ln.__private__.setCharSpace=Ln.setCharSpace=function(ui){if(isNaN(ui))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return iu=ui,this};var Fu=0;Ln.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},Ln.__private__.setLineCap=Ln.setLineCap=function(ui){var Vi=Ln.CapJoinStyles[ui];if(Vi===void 0)throw new Error("Line cap style of '"+ui+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Fu=Vi,nr(Vi+" J"),this};var Gu=0;Ln.__private__.setLineJoin=Ln.setLineJoin=function(ui){var Vi=Ln.CapJoinStyles[ui];if(Vi===void 0)throw new Error("Line join style of '"+ui+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Gu=Vi,nr(Vi+" j"),this},Ln.__private__.setLineMiterLimit=Ln.__private__.setMiterLimit=Ln.setLineMiterLimit=Ln.setMiterLimit=function(ui){if(ui=ui||0,isNaN(ui))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return nr(pi(ci(ui))+" M"),this},Ln.GState=j,Ln.setGState=function(ui){(ui=typeof ui=="string"?xs[Xs[ui]]:Gd(null,ui)).equals(_o)||(nr("/"+ui.id+" gs"),_o=ui)};var Gd=function(ui,Vi){if(!ui||!Xs[ui]){var Er=!1;for(var Pr in xs)if(xs.hasOwnProperty(Pr)&&xs[Pr].equals(Vi)){Er=!0;break}if(Er)Vi=xs[Pr];else{var jr="GS"+(Object.keys(xs).length+1).toString(10);xs[jr]=Vi,Vi.id=jr}return ui&&(Xs[ui]=Vi.id),Is.publish("addGState",Vi),Vi}};Ln.addGState=function(ui,Vi){return Gd(ui,Vi),this},Ln.saveGraphicsState=function(){return nr("q"),ws.push({key:cs,size:Mr,color:Fc}),this},Ln.restoreGraphicsState=function(){nr("Q");var ui=ws.pop();return cs=ui.key,Mr=ui.size,Fc=ui.color,_o=null,this},Ln.setCurrentTransformationMatrix=function(ui){return nr(ui.toString()+" cm"),this},Ln.comment=function(ui){return nr("#"+ui),this};var ru=function(ui,Vi){var Er=ui||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Er},set:function(Kr){isNaN(Kr)||(Er=parseFloat(Kr))}});var Pr=Vi||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Pr},set:function(Kr){isNaN(Kr)||(Pr=parseFloat(Kr))}});var jr="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return jr},set:function(Kr){jr=Kr.toString()}}),this},Bu=function(ui,Vi,Er,Pr){ru.call(this,ui,Vi),this.type="rect";var jr=Er||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return jr},set:function(as){isNaN(as)||(jr=parseFloat(as))}});var Kr=Pr||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Kr},set:function(as){isNaN(as)||(Kr=parseFloat(as))}}),this},Uu=function(){this.page=Fs,this.currentPage=er,this.pages=Fr.slice(0),this.pagesContext=Ss.slice(0),this.x=bs,this.y=vs,this.matrix=Ms,this.width=Gc(er),this.height=Cc(er),this.outputDestination=tr,this.id="",this.objectNumber=-1};Uu.prototype.restore=function(){Fs=this.page,er=this.currentPage,Ss=this.pagesContext,Fr=this.pages,bs=this.x,vs=this.y,Ms=this.matrix,ju(er,this.width),Vu(er,this.height),tr=this.outputDestination};var Bd=function(ui,Vi,Er,Pr,jr){Rs.push(new Uu),Fs=er=0,Fr=[],bs=ui,vs=Vi,Ms=jr,Ru([Er,Pr])},Bh=function(ui){if(Eo[ui])Rs.pop().restore();else{var Vi=new Uu,Er="Xo"+(Object.keys(qs).length+1).toString(10);Vi.id=Er,Eo[ui]=Er,qs[Er]=Vi,Is.publish("addFormObject",Vi),Rs.pop().restore()}};for(var su in Ln.beginFormObject=function(ui,Vi,Er,Pr,jr){return Bd(ui,Vi,Er,Pr,jr),this},Ln.endFormObject=function(ui){return Bh(ui),this},Ln.doFormObject=function(ui,Vi){var Er=qs[Eo[ui]];return nr("q"),nr(Vi.toString()+" cm"),nr("/"+Er.id+" Do"),nr("Q"),this},Ln.getFormObject=function(ui){var Vi=qs[Eo[ui]];return{x:Vi.x,y:Vi.y,width:Vi.width,height:Vi.height,matrix:Vi.matrix}},Ln.save=function(ui,Vi){return ui=ui||"generated.pdf",(Vi=Vi||{}).returnPromise=Vi.returnPromise||!1,Vi.returnPromise===!1?(l(Qc(cc()),ui),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Er,Pr){try{var jr=l(Qc(cc()),ui);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Er(jr)}catch(Kr){Pr(Kr.message)}})},E.API)E.API.hasOwnProperty(su)&&(su==="events"&&E.API.events.length?function(ui,Vi){var Er,Pr,jr;for(jr=Vi.length-1;jr!==-1;jr--)Er=Vi[jr][0],Pr=Vi[jr][1],ui.subscribe.apply(ui,[Er].concat(typeof Pr=="function"?[Pr]:Pr))}(Is,E.API.events):Ln[su]=E.API[su]);var Gc=Ln.getPageWidth=function(ui){return(Ss[ui=ui||er].mediaBox.topRightX-Ss[ui].mediaBox.bottomLeftX)/Qr},ju=Ln.setPageWidth=function(ui,Vi){Ss[ui].mediaBox.topRightX=Vi*Qr+Ss[ui].mediaBox.bottomLeftX},Cc=Ln.getPageHeight=function(ui){return(Ss[ui=ui||er].mediaBox.topRightY-Ss[ui].mediaBox.bottomLeftY)/Qr},Vu=Ln.setPageHeight=function(ui,Vi){Ss[ui].mediaBox.topRightY=Vi*Qr+Ss[ui].mediaBox.bottomLeftY};return Ln.internal={pdfEscape:La,getStyle:Md,getFont:kh,getFontSize:Nr,getCharSpace:Gh,getTextColor:Fh,getLineHeight:kd,getLineHeightFactor:Fd,getLineWidth:nu,write:Dr,getHorizontalCoordinate:rc,getVerticalCoordinate:uc,getCoordinateString:Dh,getVerticalCoordinateString:_c,collections:{},newObject:Ws,newAdditionalObject:qa,newObjectDeferred:yo,newObjectDeferredBegin:Co,getFilters:aa,putStream:la,events:Is,scaleFactor:Qr,pageSize:{getWidth:function(){return Gc(er)},setWidth:function(ui){ju(er,ui)},getHeight:function(){return Cc(er)},setHeight:function(ui){Vu(er,ui)}},encryptionOptions:An,encryption:pa,getEncryptor:Th,output:eu,getNumberOfPages:bh,pages:Fr,out:nr,f2:Fi,f3:di,getPageInfo:Rd,getPageInfoByObjId:Ns,getCurrentPageInfo:Lh,getPDFVersion:ei,Point:ru,Rectangle:Bu,Matrix:Es,hasHotfix:Ld},Object.defineProperty(Ln.internal.pageSize,"width",{get:function(){return Gc(er)},set:function(ui){ju(er,ui)},enumerable:!0,configurable:!0}),Object.defineProperty(Ln.internal.pageSize,"height",{get:function(){return Cc(er)},set:function(ui){Vu(er,ui)},enumerable:!0,configurable:!0}),Ah.call(Ln,Ir),cs="F1",wd(Be,Te),Is.publish("initialized"),Ln}I.prototype.lsbFirstWord=function(Oe){return String.fromCharCode(Oe>>0&255,Oe>>8&255,Oe>>16&255,Oe>>24&255)},I.prototype.toHexString=function(Oe){return Oe.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(Oe){for(var e=[],Te=0;Te<Oe.length;Te+=2)e.push(String.fromCharCode(parseInt(Oe.substr(Te,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(Oe,e){return P(x(e).substr(0,5),Oe)},I.prototype.encryptor=function(Oe,e){var Te=x(this.encryptionKey+String.fromCharCode(255&Oe,Oe>>8&255,Oe>>16&255,255&e,e>>8&255)).substr(0,10);return function(ke){return P(Te,ke)}},j.prototype.equals=function(Oe){var e,Te="id,objectNumber,equals";if(!Oe||_typeof(Oe)!==_typeof(this))return!1;var ke=0;for(e in this)if(!(Te.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!Oe.hasOwnProperty(e)||this[e]!==Oe[e])return!1;ke++}for(e in Oe)Oe.hasOwnProperty(e)&&Te.indexOf(e)<0&&ke--;return ke===0},E.API={events:[]},E.version="3.0.1";var q=E.API,D=1,R=function(Oe){return Oe.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(Oe){return Oe.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(Oe){return Oe.toFixed(2)},z=function(Oe){return Oe.toFixed(5)};q.__acroform__={};var H=function(Oe,e){Oe.prototype=Object.create(e.prototype),Oe.prototype.constructor=Oe},W=function(Oe){return Oe*D},V=function(Oe){var e=new ut,Te=At.internal.getHeight(Oe)||0,ke=At.internal.getWidth(Oe)||0;return e.BBox=[0,0,Number(U(ke)),Number(U(Te))],e},G=q.__acroform__.setBit=function(Oe,e){if(Oe=Oe||0,e=e||0,isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return Oe|=1<<e},Y=q.__acroform__.clearBit=function(Oe,e){if(Oe=Oe||0,e=e||0,isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return Oe&=~(1<<e)},J=q.__acroform__.getBit=function(Oe,e){if(isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(Oe&1<<e)==0?0:1},X=q.__acroform__.getBitForPdf=function(Oe,e){if(isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(Oe,e-1)},K=q.__acroform__.setBitForPdf=function(Oe,e){if(isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(Oe,e-1)},Z=q.__acroform__.clearBitForPdf=function(Oe,e){if(isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(Oe,e-1)},$=q.__acroform__.calculateCoordinates=function(Oe,e){var Te=e.internal.getHorizontalCoordinate,ke=e.internal.getVerticalCoordinate,Be=Oe[0],Ue=Oe[1],He=Oe[2],We=Oe[3],Cn={};return Cn.lowerLeft_X=Te(Be)||0,Cn.lowerLeft_Y=ke(Ue+We)||0,Cn.upperRight_X=Te(Be+He)||0,Cn.upperRight_Y=ke(Ue)||0,[Number(U(Cn.lowerLeft_X)),Number(U(Cn.lowerLeft_Y)),Number(U(Cn.upperRight_X)),Number(U(Cn.upperRight_Y))]},Q=function(Oe){if(Oe.appearanceStreamContent)return Oe.appearanceStreamContent;if(Oe.V||Oe.DV){var e=[],Te=Oe._V||Oe.DV,ke=tt(Oe,Te),Be=Oe.scope.internal.getFont(Oe.fontName,Oe.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(Oe.scope.__private__.encodeColorString(Oe.color)),e.push("/"+Be+" "+U(ke.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(ke.text),e.push("ET"),e.push("Q"),e.push("EMC");var Ue=V(Oe);return Ue.scope=Oe.scope,Ue.stream=e.join(`
`),Ue}},tt=function(Oe,e){var Te=Oe.fontSize===0?Oe.maxFontSize:Oe.fontSize,ke={text:"",fontSize:""},Be=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");Be=Oe.multiline?Be.map(function(di){return di.split(`
`)}):Be.map(function(di){return[di]});var Ue=Te,He=At.internal.getHeight(Oe)||0;He=He<0?-He:He;var We=At.internal.getWidth(Oe)||0;We=We<0?-We:We;var Cn=function(di,ci,Mi){if(di+1<Be.length){var Oi=ci+" "+Be[di+1][0];return et(Oi,Oe,Mi).width<=We-4}return!1};Ue++;e:for(;Ue>0;){e="",Ue--;var En,An,Sn=et("3",Oe,Ue).height,Tn=Oe.multiline?He-Ue:(He-Sn)/2,Ln=Tn+=2,Bn=0,ei=0,ti=0;if(Ue<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,Oe,Ue=12).width+", FieldWidth:"+We+`
`;break}for(var ni="",ri=0,si=0;si<Be.length;si++)if(Be.hasOwnProperty(si)){var ai=!1;if(Be[si].length!==1&&ti!==Be[si].length-1){if((Sn+2)*(ri+2)+2>He)continue e;ni+=Be[si][ti],ai=!0,ei=si,si--}else{ni=(ni+=Be[si][ti]+" ").substr(ni.length-1)==" "?ni.substr(0,ni.length-1):ni;var li=parseInt(si),Pi=Cn(li,ni,Ue),pi=si>=Be.length-1;if(Pi&&!pi){ni+=" ",ti=0;continue}if(Pi||pi){if(pi)ei=li;else if(Oe.multiline&&(Sn+2)*(ri+2)+2>He)continue e}else{if(!Oe.multiline||(Sn+2)*(ri+2)+2>He)continue e;ei=li}}for(var vi="",Ri=Bn;Ri<=ei;Ri++){var Fi=Be[Ri];if(Oe.multiline){if(Ri===ei){vi+=Fi[ti]+" ",ti=(ti+1)%Fi.length;continue}if(Ri===Bn){vi+=Fi[Fi.length-1]+" ";continue}}vi+=Fi[0]+" "}switch(vi=vi.substr(vi.length-1)==" "?vi.substr(0,vi.length-1):vi,An=et(vi,Oe,Ue).width,Oe.textAlign){case"right":En=We-An-2;break;case"center":En=(We-An)/2;break;case"left":default:En=2}e+=U(En)+" "+U(Ln)+` Td
`,e+="("+R(vi)+`) Tj
`,e+=-U(En)+` 0 Td
`,Ln=-(Ue+2),An=0,Bn=ai?ei:ei+1,ri++,ni=""}break}return ke.text=e,ke.fontSize=Ue,ke},et=function(Oe,e,Te){var ke=e.scope.internal.getFont(e.fontName,e.fontStyle),Be=e.scope.getStringUnitWidth(Oe,{font:ke,fontSize:parseFloat(Te),charSpace:0})*parseFloat(Te);return{height:e.scope.getStringUnitWidth("3",{font:ke,fontSize:parseFloat(Te),charSpace:0})*parseFloat(Te)*1.5,width:Be}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(Oe,e){var Te={type:"reference",object:Oe};e.internal.getPageInfo(Oe.page).pageContext.annotations.find(function(ke){return ke.type===Te.type&&ke.object===Te.object})===void 0&&e.internal.getPageInfo(Oe.page).pageContext.annotations.push(Te)},it=function(Oe,e){for(var Te in Oe)if(Oe.hasOwnProperty(Te)){var ke=Te,Be=Oe[Te];e.internal.newObjectDeferredBegin(Be.objId,!0),_typeof(Be)==="object"&&typeof Be.putStream=="function"&&Be.putStream(),delete Oe[ke]}},at=function(Oe,e){if(e.scope=Oe,Oe.internal!==void 0&&(Oe.internal.acroformPlugin===void 0||Oe.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,Oe.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),Oe.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=Oe.internal.scaleFactor,Oe.internal.acroformPlugin.acroFormDictionaryRoot=new ht,Oe.internal.acroformPlugin.acroFormDictionaryRoot.scope=Oe,Oe.internal.acroformPlugin.acroFormDictionaryRoot._eventID=Oe.internal.events.subscribe("postPutResources",function(){(function(Te){Te.internal.events.unsubscribe(Te.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete Te.internal.acroformPlugin.acroFormDictionaryRoot._eventID,Te.internal.acroformPlugin.printedOut=!0})(Oe)}),Oe.internal.events.subscribe("buildDocument",function(){(function(Te){Te.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var ke=Te.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Be in ke)if(ke.hasOwnProperty(Be)){var Ue=ke[Be];Ue.objId=void 0,Ue.hasAnnotation&&nt(Ue,Te)}})(Oe)}),Oe.internal.events.subscribe("putCatalog",function(){(function(Te){if(Te.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");Te.internal.write("/AcroForm "+Te.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(Oe)}),Oe.internal.events.subscribe("postPutPages",function(Te){(function(ke,Be){var Ue=!ke;for(var He in ke||(Be.internal.newObjectDeferredBegin(Be.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Be.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),ke=ke||Be.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(ke.hasOwnProperty(He)){var We=ke[He],Cn=[],En=We.Rect;if(We.Rect&&(We.Rect=$(We.Rect,Be)),Be.internal.newObjectDeferredBegin(We.objId,!0),We.DA=At.createDefaultAppearanceStream(We),_typeof(We)==="object"&&typeof We.getKeyValueListForStream=="function"&&(Cn=We.getKeyValueListForStream()),We.Rect=En,We.hasAppearanceStream&&!We.appearanceStreamContent){var An=Q(We);Cn.push({key:"AP",value:"<</N "+An+">>"}),Be.internal.acroformPlugin.xForms.push(An)}if(We.appearanceStreamContent){var Sn="";for(var Tn in We.appearanceStreamContent)if(We.appearanceStreamContent.hasOwnProperty(Tn)){var Ln=We.appearanceStreamContent[Tn];if(Sn+="/"+Tn+" ",Sn+="<<",Object.keys(Ln).length>=1||Array.isArray(Ln)){for(var He in Ln)if(Ln.hasOwnProperty(He)){var Bn=Ln[He];typeof Bn=="function"&&(Bn=Bn.call(Be,We)),Sn+="/"+He+" "+Bn+" ",Be.internal.acroformPlugin.xForms.indexOf(Bn)>=0||Be.internal.acroformPlugin.xForms.push(Bn)}}else typeof(Bn=Ln)=="function"&&(Bn=Bn.call(Be,We)),Sn+="/"+He+" "+Bn,Be.internal.acroformPlugin.xForms.indexOf(Bn)>=0||Be.internal.acroformPlugin.xForms.push(Bn);Sn+=">>"}Cn.push({key:"AP",value:`<<
`+Sn+">>"})}Be.internal.putStream({additionalKeyValues:Cn,objectId:We.objId}),Be.internal.out("endobj")}Ue&&it(Be.internal.acroformPlugin.xForms,Be)})(Te,Oe)}),Oe.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(Oe,e,Te){var ke=function(He){return He};if(Array.isArray(Oe)){for(var Be="[",Ue=0;Ue<Oe.length;Ue++)switch(Ue!==0&&(Be+=" "),_typeof(Oe[Ue])){case"boolean":case"number":case"object":Be+=Oe[Ue].toString();break;case"string":Oe[Ue].substr(0,1)!=="/"?(e!==void 0&&Te&&(ke=Te.internal.getEncryptor(e)),Be+="("+R(ke(Oe[Ue].toString()))+")"):Be+=Oe[Ue].toString()}return Be+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(Oe,e,Te){var ke=function(Be){return Be};return e!==void 0&&Te&&(ke=Te.internal.getEncryptor(e)),(Oe=Oe||"").toString(),Oe="("+R(ke(Oe))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(Oe){this._objId=Oe}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var Oe=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:Oe,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var Oe=[],e=Object.getOwnPropertyNames(this).filter(function(Ue){return Ue!="content"&&Ue!="appearanceStreamContent"&&Ue!="scope"&&Ue!="objId"&&Ue.substring(0,1)!="_"});for(var Te in e)if(Object.getOwnPropertyDescriptor(this,e[Te]).configurable===!1){var ke=e[Te],Be=this[ke];Be&&(Array.isArray(Be)?Oe.push({key:ke,value:ot(Be,this.objId,this.scope)}):Be instanceof ct?(Be.scope=this.scope,Oe.push({key:ke,value:Be.objId+" 0 R"})):typeof Be!="function"&&Oe.push({key:ke,value:Be}))}return Oe};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var Oe,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(Te){e=Te}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(Te){Oe=Te.trim()},get:function(){return Oe||null}})};H(ut,ct);var ht=function(){ct.call(this);var Oe,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(Oe){var Te=function(ke){return ke};return this.scope&&(Te=this.scope.internal.getEncryptor(this.objId)),"("+R(Te(Oe))+")"}},set:function(Te){Oe=Te}})};H(ht,ct);var lt=function Oe(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(ni){if(isNaN(ni))throw new Error('Invalid value "'+ni+'" for attribute F supplied.');e=ni}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(e,3)},set:function(ni){ni?this.F=K(e,3):this.F=Z(e,3)}});var Te=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return Te},set:function(ni){if(isNaN(ni))throw new Error('Invalid value "'+ni+'" for attribute Ff supplied.');Te=ni}});var ke=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(ke.length!==0)return ke},set:function(ni){ke=ni!==void 0?ni:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[0])?0:ke[0]},set:function(ni){ke[0]=ni}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[1])?0:ke[1]},set:function(ni){ke[1]=ni}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[2])?0:ke[2]},set:function(ni){ke[2]=ni}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[3])?0:ke[3]},set:function(ni){ke[3]=ni}});var Be="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Be},set:function(ni){switch(ni){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Be=ni;break;default:throw new Error('Invalid value "'+ni+'" for attribute FT supplied.')}}});var Ue=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Ue||Ue.length<1){if(this instanceof yt)return;Ue="FieldObject"+Oe.FieldNum++}var ni=function(ri){return ri};return this.scope&&(ni=this.scope.internal.getEncryptor(this.objId)),"("+R(ni(Ue))+")"},set:function(ni){Ue=ni.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Ue},set:function(ni){Ue=ni}});var He="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return He},set:function(ni){He=ni}});var We="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return We},set:function(ni){We=ni}});var Cn=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Cn},set:function(ni){Cn=ni}});var En=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return En===void 0?50/D:En},set:function(ni){En=ni}});var An="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return An},set:function(ni){An=ni}});var Sn="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!Sn||this instanceof yt||this instanceof Nt))return st(Sn,this.objId,this.scope)},set:function(ni){ni=ni.toString(),Sn=ni}});var Tn=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(Tn)return this instanceof mt?Tn:st(Tn,this.objId,this.scope)},set:function(ni){ni=ni.toString(),Tn=this instanceof mt?ni:ni.substr(0,1)==="("?T(ni.substr(1,ni.length-2)):T(ni)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Tn.substr(1,Tn.length-1)):Tn},set:function(ni){ni=ni.toString(),Tn=this instanceof mt?"/"+ni:ni}});var Ln=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(Ln)return Ln},set:function(ni){this.V=ni}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(Ln)return this instanceof mt?Ln:st(Ln,this.objId,this.scope)},set:function(ni){ni=ni.toString(),Ln=this instanceof mt?ni:ni.substr(0,1)==="("?T(ni.substr(1,ni.length-2)):T(ni)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(Ln.substr(1,Ln.length-1)):Ln},set:function(ni){ni=ni.toString(),Ln=this instanceof mt?"/"+ni:ni}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var Bn,ei=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return ei},set:function(ni){ni=!!ni,ei=ni}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(Bn)return Bn},set:function(ni){Bn=ni}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(ni){ni?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(ni){ni?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(ni){ni?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var ti=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(ti!==null)return ti},set:function(ni){if([0,1,2].indexOf(ni)===-1)throw new Error('Invalid value "'+ni+'" for attribute Q supplied.');ti=ni}}),Object.defineProperty(this,"textAlign",{get:function(){var ni;switch(ti){case 0:default:ni="left";break;case 1:ni="center";break;case 2:ni="right"}return ni},configurable:!0,enumerable:!0,set:function(ni){switch(ni){case"right":case 2:ti=2;break;case"center":case 1:ti=1;break;case"left":case 0:default:ti=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var Oe=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return Oe},set:function(Te){Oe=Te}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return Oe},set:function(Te){Oe=Te}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(Te){var ke,Be;Be=[],typeof(ke=Te)=="string"&&(Be=function(Ue,He,We){We||(We=1);for(var Cn,En=[];Cn=He.exec(Ue);)En.push(Cn[We]);return En}(ke,/\((.*?)\)/g)),e=Be}}),this.getOptions=function(){return e},this.setOptions=function(Te){e=Te,this.sort&&e.sort()},this.addOption=function(Te){Te=(Te=Te||"").toString(),e.push(Te),this.sort&&e.sort()},this.removeOption=function(Te,ke){for(ke=ke||!1,Te=(Te=Te||"").toString();e.indexOf(Te)!==-1&&(e.splice(e.indexOf(Te),1),ke!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(Te){Te?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(Te){this.combo===!0&&(Te?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(Te){Te?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(Te){Te?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(Te){Te?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(Te){Te?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(Te){Te?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(Te){Te?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(Te){Te?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(Te){Te?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Oe,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Te=function(Ue){return Ue};if(this.scope&&(Te=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var ke,Be=[];for(ke in Be.push("<<"),e)Be.push("/"+ke+" ("+R(Te(e[ke]))+")");return Be.push(">>"),Be.join(`
`)}},set:function(Te){_typeof(Te)==="object"&&(e=Te)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(Te){typeof Te=="string"&&(e.CA=Te)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return Oe},set:function(Te){Oe=Te}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return Oe.substr(1,Oe.length-1)},set:function(Te){Oe="/"+Te}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var Oe=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return Oe},set:function(e){Oe=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var Oe,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return Oe},set:function(Be){Oe=Be}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(Be){e=Be}});var Te,ke={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Be=function(We){return We};this.scope&&(Be=this.scope.internal.getEncryptor(this.objId));var Ue,He=[];for(Ue in He.push("<<"),ke)He.push("/"+Ue+" ("+R(Be(ke[Ue]))+")");return He.push(">>"),He.join(`
`)},set:function(Be){_typeof(Be)==="object"&&(ke=Be)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return ke.CA||""},set:function(Be){typeof Be=="string"&&(ke.CA=Be)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return Te},set:function(Be){Te=Be}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return Te.substr(1,Te.length-1)},set:function(Be){Te="/"+Be}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(Oe){if(!("createAppearanceStream"in Oe)||!("getCA"in Oe))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var Te=this.Kids[e];Te.appearanceStreamContent=Oe.createAppearanceStream(Te.optionName),Te.caption=Oe.getCA()}},bt.prototype.createOption=function(Oe){var e=new yt;return e.Parent=this,e.optionName=Oe,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Oe=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return Oe},set:function(e){Oe=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return Oe},set:function(e){Number.isInteger(e)&&(Oe=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(Oe){Oe?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var Te=[],ke=Oe.scope.internal.getFont(Oe.fontName,Oe.fontStyle).id,Be=Oe.scope.__private__.encodeColorString(Oe.color),Ue=tt(Oe,Oe.caption);return Te.push("0.749023 g"),Te.push("0 0 "+U(At.internal.getWidth(Oe))+" "+U(At.internal.getHeight(Oe))+" re"),Te.push("f"),Te.push("BMC"),Te.push("q"),Te.push("0 0 1 rg"),Te.push("/"+ke+" "+U(Ue.fontSize)+" Tf "+Be),Te.push("BT"),Te.push(Ue.text),Te.push("ET"),Te.push("Q"),Te.push("EMC"),e.stream=Te.join(`
`),e},YesNormal:function(Oe){var e=V(Oe);e.scope=Oe.scope;var Te=Oe.scope.internal.getFont(Oe.fontName,Oe.fontStyle).id,ke=Oe.scope.__private__.encodeColorString(Oe.color),Be=[],Ue=At.internal.getHeight(Oe),He=At.internal.getWidth(Oe),We=tt(Oe,Oe.caption);return Be.push("1 g"),Be.push("0 0 "+U(He)+" "+U(Ue)+" re"),Be.push("f"),Be.push("q"),Be.push("0 0 1 rg"),Be.push("0 0 "+U(He-1)+" "+U(Ue-1)+" re"),Be.push("W"),Be.push("n"),Be.push("0 g"),Be.push("BT"),Be.push("/"+Te+" "+U(We.fontSize)+" Tf "+ke),Be.push(We.text),Be.push("ET"),Be.push("Q"),e.stream=Be.join(`
`),e},OffPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var Te=[];return Te.push("0.749023 g"),Te.push("0 0 "+U(At.internal.getWidth(Oe))+" "+U(At.internal.getHeight(Oe))+" re"),Te.push("f"),e.stream=Te.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(Oe){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[Oe]=At.RadioButton.Circle.YesNormal,e.D[Oe]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(Oe){var e=V(Oe);e.scope=Oe.scope;var Te=[],ke=At.internal.getWidth(Oe)<=At.internal.getHeight(Oe)?At.internal.getWidth(Oe)/4:At.internal.getHeight(Oe)/4;ke=Number((.9*ke).toFixed(5));var Be=At.internal.Bezier_C,Ue=Number((ke*Be).toFixed(5));return Te.push("q"),Te.push("1 0 0 1 "+z(At.internal.getWidth(Oe)/2)+" "+z(At.internal.getHeight(Oe)/2)+" cm"),Te.push(ke+" 0 m"),Te.push(ke+" "+Ue+" "+Ue+" "+ke+" 0 "+ke+" c"),Te.push("-"+Ue+" "+ke+" -"+ke+" "+Ue+" -"+ke+" 0 c"),Te.push("-"+ke+" -"+Ue+" -"+Ue+" -"+ke+" 0 -"+ke+" c"),Te.push(Ue+" -"+ke+" "+ke+" -"+Ue+" "+ke+" 0 c"),Te.push("f"),Te.push("Q"),e.stream=Te.join(`
`),e},YesPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var Te=[],ke=At.internal.getWidth(Oe)<=At.internal.getHeight(Oe)?At.internal.getWidth(Oe)/4:At.internal.getHeight(Oe)/4;ke=Number((.9*ke).toFixed(5));var Be=Number((2*ke).toFixed(5)),Ue=Number((Be*At.internal.Bezier_C).toFixed(5)),He=Number((ke*At.internal.Bezier_C).toFixed(5));return Te.push("0.749023 g"),Te.push("q"),Te.push("1 0 0 1 "+z(At.internal.getWidth(Oe)/2)+" "+z(At.internal.getHeight(Oe)/2)+" cm"),Te.push(Be+" 0 m"),Te.push(Be+" "+Ue+" "+Ue+" "+Be+" 0 "+Be+" c"),Te.push("-"+Ue+" "+Be+" -"+Be+" "+Ue+" -"+Be+" 0 c"),Te.push("-"+Be+" -"+Ue+" -"+Ue+" -"+Be+" 0 -"+Be+" c"),Te.push(Ue+" -"+Be+" "+Be+" -"+Ue+" "+Be+" 0 c"),Te.push("f"),Te.push("Q"),Te.push("0 g"),Te.push("q"),Te.push("1 0 0 1 "+z(At.internal.getWidth(Oe)/2)+" "+z(At.internal.getHeight(Oe)/2)+" cm"),Te.push(ke+" 0 m"),Te.push(ke+" "+He+" "+He+" "+ke+" 0 "+ke+" c"),Te.push("-"+He+" "+ke+" -"+ke+" "+He+" -"+ke+" 0 c"),Te.push("-"+ke+" -"+He+" -"+He+" -"+ke+" 0 -"+ke+" c"),Te.push(He+" -"+ke+" "+ke+" -"+He+" "+ke+" 0 c"),Te.push("f"),Te.push("Q"),e.stream=Te.join(`
`),e},OffPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var Te=[],ke=At.internal.getWidth(Oe)<=At.internal.getHeight(Oe)?At.internal.getWidth(Oe)/4:At.internal.getHeight(Oe)/4;ke=Number((.9*ke).toFixed(5));var Be=Number((2*ke).toFixed(5)),Ue=Number((Be*At.internal.Bezier_C).toFixed(5));return Te.push("0.749023 g"),Te.push("q"),Te.push("1 0 0 1 "+z(At.internal.getWidth(Oe)/2)+" "+z(At.internal.getHeight(Oe)/2)+" cm"),Te.push(Be+" 0 m"),Te.push(Be+" "+Ue+" "+Ue+" "+Be+" 0 "+Be+" c"),Te.push("-"+Ue+" "+Be+" -"+Be+" "+Ue+" -"+Be+" 0 c"),Te.push("-"+Be+" -"+Ue+" -"+Ue+" -"+Be+" 0 -"+Be+" c"),Te.push(Ue+" -"+Be+" "+Be+" -"+Ue+" "+Be+" 0 c"),Te.push("f"),Te.push("Q"),e.stream=Te.join(`
`),e}},Cross:{createAppearanceStream:function(Oe){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[Oe]=At.RadioButton.Cross.YesNormal,e.D[Oe]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(Oe){var e=V(Oe);e.scope=Oe.scope;var Te=[],ke=At.internal.calculateCross(Oe);return Te.push("q"),Te.push("1 1 "+U(At.internal.getWidth(Oe)-2)+" "+U(At.internal.getHeight(Oe)-2)+" re"),Te.push("W"),Te.push("n"),Te.push(U(ke.x1.x)+" "+U(ke.x1.y)+" m"),Te.push(U(ke.x2.x)+" "+U(ke.x2.y)+" l"),Te.push(U(ke.x4.x)+" "+U(ke.x4.y)+" m"),Te.push(U(ke.x3.x)+" "+U(ke.x3.y)+" l"),Te.push("s"),Te.push("Q"),e.stream=Te.join(`
`),e},YesPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var Te=At.internal.calculateCross(Oe),ke=[];return ke.push("0.749023 g"),ke.push("0 0 "+U(At.internal.getWidth(Oe))+" "+U(At.internal.getHeight(Oe))+" re"),ke.push("f"),ke.push("q"),ke.push("1 1 "+U(At.internal.getWidth(Oe)-2)+" "+U(At.internal.getHeight(Oe)-2)+" re"),ke.push("W"),ke.push("n"),ke.push(U(Te.x1.x)+" "+U(Te.x1.y)+" m"),ke.push(U(Te.x2.x)+" "+U(Te.x2.y)+" l"),ke.push(U(Te.x4.x)+" "+U(Te.x4.y)+" m"),ke.push(U(Te.x3.x)+" "+U(Te.x3.y)+" l"),ke.push("s"),ke.push("Q"),e.stream=ke.join(`
`),e},OffPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var Te=[];return Te.push("0.749023 g"),Te.push("0 0 "+U(At.internal.getWidth(Oe))+" "+U(At.internal.getHeight(Oe))+" re"),Te.push("f"),e.stream=Te.join(`
`),e}}},createDefaultAppearanceStream:function(Oe){var e=Oe.scope.internal.getFont(Oe.fontName,Oe.fontStyle).id,Te=Oe.scope.__private__.encodeColorString(Oe.color);return"/"+e+" "+Oe.fontSize+" Tf "+Te}};At.internal={Bezier_C:.551915024494,calculateCross:function(Oe){var e=At.internal.getWidth(Oe),Te=At.internal.getHeight(Oe),ke=Math.min(e,Te);return{x1:{x:(e-ke)/2,y:(Te-ke)/2+ke},x2:{x:(e-ke)/2+ke,y:(Te-ke)/2},x3:{x:(e-ke)/2,y:(Te-ke)/2},x4:{x:(e-ke)/2+ke,y:(Te-ke)/2+ke}}}},At.internal.getWidth=function(Oe){var e=0;return _typeof(Oe)==="object"&&(e=W(Oe.Rect[2])),e},At.internal.getHeight=function(Oe){var e=0;return _typeof(Oe)==="object"&&(e=W(Oe.Rect[3])),e};var xt=q.addField=function(Oe){if(at(this,Oe),!(Oe instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=Oe).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),Oe.page=Oe.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(Oe){return Oe.reduce(function(e,Te,ke){return e[Te]=ke,e},{})}(function(Oe){Oe.__addimage__={};var e="UNKNOWN",Te={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},ke=Oe.__addimage__.getImageFileTypeByImageData=function(di,ci){var Mi,Oi,Hi,Ki,or,sr=e;if((ci=ci||e)==="RGBA"||di.data!==void 0&&di.data instanceof Uint8ClampedArray&&"height"in di&&"width"in di)return"RGBA";if(Pi(di))for(or in Te)for(Hi=Te[or],Mi=0;Mi<Hi.length;Mi+=1){for(Ki=!0,Oi=0;Oi<Hi[Mi].length;Oi+=1)if(Hi[Mi][Oi]!==void 0&&Hi[Mi][Oi]!==di[Oi]){Ki=!1;break}if(Ki===!0){sr=or;break}}else for(or in Te)for(Hi=Te[or],Mi=0;Mi<Hi.length;Mi+=1){for(Ki=!0,Oi=0;Oi<Hi[Mi].length;Oi+=1)if(Hi[Mi][Oi]!==void 0&&Hi[Mi][Oi]!==di.charCodeAt(Oi)){Ki=!1;break}if(Ki===!0){sr=or;break}}return sr===e&&ci!==e&&(sr=ci),sr},Be=function di(ci){for(var Mi=this.internal.write,Oi=this.internal.putStream,Hi=(0,this.internal.getFilters)();Hi.indexOf("FlateEncode")!==-1;)Hi.splice(Hi.indexOf("FlateEncode"),1);ci.objectId=this.internal.newObject();var Ki=[];if(Ki.push({key:"Type",value:"/XObject"}),Ki.push({key:"Subtype",value:"/Image"}),Ki.push({key:"Width",value:ci.width}),Ki.push({key:"Height",value:ci.height}),ci.colorSpace===ti.INDEXED?Ki.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ci.palette.length/3-1)+" "+("sMask"in ci&&ci.sMask!==void 0?ci.objectId+2:ci.objectId+1)+" 0 R]"}):(Ki.push({key:"ColorSpace",value:"/"+ci.colorSpace}),ci.colorSpace===ti.DEVICE_CMYK&&Ki.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ki.push({key:"BitsPerComponent",value:ci.bitsPerComponent}),"decodeParameters"in ci&&ci.decodeParameters!==void 0&&Ki.push({key:"DecodeParms",value:"<<"+ci.decodeParameters+">>"}),"transparency"in ci&&Array.isArray(ci.transparency)){for(var or="",sr=0,Cr=ci.transparency.length;sr<Cr;sr++)or+=ci.transparency[sr]+" "+ci.transparency[sr]+" ";Ki.push({key:"Mask",value:"["+or+"]"})}ci.sMask!==void 0&&Ki.push({key:"SMask",value:ci.objectId+1+" 0 R"});var pr=ci.filter!==void 0?["/"+ci.filter]:void 0;if(Oi({data:ci.data,additionalKeyValues:Ki,alreadyAppliedFilters:pr,objectId:ci.objectId}),Mi("endobj"),"sMask"in ci&&ci.sMask!==void 0){var wr="/Predictor "+ci.predictor+" /Colors 1 /BitsPerComponent "+ci.bitsPerComponent+" /Columns "+ci.width,Li={width:ci.width,height:ci.height,colorSpace:"DeviceGray",bitsPerComponent:ci.bitsPerComponent,decodeParameters:wr,data:ci.sMask};"filter"in ci&&(Li.filter=ci.filter),di.call(this,Li)}if(ci.colorSpace===ti.INDEXED){var er=this.internal.newObject();Oi({data:vi(new Uint8Array(ci.palette)),objectId:er}),Mi("endobj")}},Ue=function(){var di=this.internal.collections.addImage_images;for(var ci in di)Be.call(this,di[ci])},He=function(){var di,ci=this.internal.collections.addImage_images,Mi=this.internal.write;for(var Oi in ci)Mi("/I"+(di=ci[Oi]).index,di.objectId,"0","R")},We=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Ue),this.internal.events.subscribe("putXobjectDict",He))},Cn=function(){var di=this.internal.collections.addImage_images;return We.call(this),di},En=function(){return Object.keys(this.internal.collections.addImage_images).length},An=function(di){return typeof Oe["process"+di.toUpperCase()]=="function"},Sn=function(di){return _typeof(di)==="object"&&di.nodeType===1},Tn=function(di,ci){if(di.nodeName==="IMG"&&di.hasAttribute("src")){var Mi=""+di.getAttribute("src");if(Mi.indexOf("data:image/")===0)return u(unescape(Mi).split("base64,").pop());var Oi=Oe.loadFile(Mi,!0);if(Oi!==void 0)return Oi}if(di.nodeName==="CANVAS"){if(di.width===0||di.height===0)throw new Error("Given canvas must have data. Canvas width: "+di.width+", height: "+di.height);var Hi;switch(ci){case"PNG":Hi="image/png";break;case"WEBP":Hi="image/webp";break;case"JPEG":case"JPG":default:Hi="image/jpeg"}return u(di.toDataURL(Hi,1).split("base64,").pop())}},Ln=function(di){var ci=this.internal.collections.addImage_images;if(ci){for(var Mi in ci)if(di===ci[Mi].alias)return ci[Mi]}},Bn=function(di,ci,Mi){return di||ci||(di=-96,ci=-96),di<0&&(di=-1*Mi.width*72/di/this.internal.scaleFactor),ci<0&&(ci=-1*Mi.height*72/ci/this.internal.scaleFactor),di===0&&(di=ci*Mi.width/Mi.height),ci===0&&(ci=di*Mi.height/Mi.width),[di,ci]},ei=function(di,ci,Mi,Oi,Hi,Ki){var or=Bn.call(this,Mi,Oi,Hi),sr=this.internal.getCoordinateString,Cr=this.internal.getVerticalCoordinateString,pr=Cn.call(this);if(Mi=or[0],Oi=or[1],pr[Hi.index]=Hi,Ki){Ki*=Math.PI/180;var wr=Math.cos(Ki),Li=Math.sin(Ki),er=function(mr){return mr.toFixed(4)},hr=[er(wr),er(Li),er(-1*Li),er(wr),0,0,"cm"]}this.internal.write("q"),Ki?(this.internal.write([1,"0","0",1,sr(di),Cr(ci+Oi),"cm"].join(" ")),this.internal.write(hr.join(" ")),this.internal.write([sr(Mi),"0","0",sr(Oi),"0","0","cm"].join(" "))):this.internal.write([sr(Mi),"0","0",sr(Oi),sr(di),Cr(ci+Oi),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Hi.index+" Do"),this.internal.write("Q")},ti=Oe.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};Oe.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var ni=Oe.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},ri=Oe.__addimage__.sHashCode=function(di){var ci,Mi,Oi=0;if(typeof di=="string")for(Mi=di.length,ci=0;ci<Mi;ci++)Oi=(Oi<<5)-Oi+di.charCodeAt(ci),Oi|=0;else if(Pi(di))for(Mi=di.byteLength/2,ci=0;ci<Mi;ci++)Oi=(Oi<<5)-Oi+di[ci],Oi|=0;return Oi},si=Oe.__addimage__.validateStringAsBase64=function(di){(di=di||"").toString().trim();var ci=!0;return di.length===0&&(ci=!1),di.length%4!=0&&(ci=!1),/^[A-Za-z0-9+/]+$/.test(di.substr(0,di.length-2))===!1&&(ci=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(di.substr(-2))===!1&&(ci=!1),ci},ai=Oe.__addimage__.extractImageFromDataUrl=function(di){if(di==null||!(di=di.trim()).startsWith("data:"))return null;var ci=di.indexOf(",");return ci<0?null:di.substring(0,ci).trim().endsWith("base64")?di.substring(ci+1):null},li=Oe.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};Oe.__addimage__.isArrayBuffer=function(di){return li()&&di instanceof ArrayBuffer};var Pi=Oe.__addimage__.isArrayBufferView=function(di){return li()&&typeof Uint32Array<"u"&&(di instanceof Int8Array||di instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&di instanceof Uint8ClampedArray||di instanceof Int16Array||di instanceof Uint16Array||di instanceof Int32Array||di instanceof Uint32Array||di instanceof Float32Array||di instanceof Float64Array)},pi=Oe.__addimage__.binaryStringToUint8Array=function(di){for(var ci=di.length,Mi=new Uint8Array(ci),Oi=0;Oi<ci;Oi++)Mi[Oi]=di.charCodeAt(Oi);return Mi},vi=Oe.__addimage__.arrayBufferToBinaryString=function(di){for(var ci="",Mi=Pi(di)?di:new Uint8Array(di),Oi=0;Oi<Mi.length;Oi+=8192)ci+=String.fromCharCode.apply(null,Mi.subarray(Oi,Oi+8192));return ci};Oe.addImage=function(){var di,ci,Mi,Oi,Hi,Ki,or,sr,Cr;if(typeof arguments[1]=="number"?(ci=e,Mi=arguments[1],Oi=arguments[2],Hi=arguments[3],Ki=arguments[4],or=arguments[5],sr=arguments[6],Cr=arguments[7]):(ci=arguments[1],Mi=arguments[2],Oi=arguments[3],Hi=arguments[4],Ki=arguments[5],or=arguments[6],sr=arguments[7],Cr=arguments[8]),_typeof(di=arguments[0])==="object"&&!Sn(di)&&"imageData"in di){var pr=di;di=pr.imageData,ci=pr.format||ci||e,Mi=pr.x||Mi||0,Oi=pr.y||Oi||0,Hi=pr.w||pr.width||Hi,Ki=pr.h||pr.height||Ki,or=pr.alias||or,sr=pr.compression||sr,Cr=pr.rotation||pr.angle||Cr}var wr=this.internal.getFilters();if(sr===void 0&&wr.indexOf("FlateEncode")!==-1&&(sr="SLOW"),isNaN(Mi)||isNaN(Oi))throw new Error("Invalid coordinates passed to jsPDF.addImage");We.call(this);var Li=Ri.call(this,di,ci,or,sr);return ei.call(this,Mi,Oi,Hi,Ki,Li,Cr),this};var Ri=function(di,ci,Mi,Oi){var Hi,Ki,or;if(typeof di=="string"&&ke(di)===e){di=unescape(di);var sr=Fi(di,!1);(sr!==""||(sr=Oe.loadFile(di,!0))!==void 0)&&(di=sr)}if(Sn(di)&&(di=Tn(di,ci)),ci=ke(di,ci),!An(ci))throw new Error("addImage does not support files of type '"+ci+"', please ensure that a plugin for '"+ci+"' support is added.");if(((or=Mi)==null||or.length===0)&&(Mi=function(Cr){return typeof Cr=="string"||Pi(Cr)?ri(Cr):Pi(Cr.data)?ri(Cr.data):null}(di)),(Hi=Ln.call(this,Mi))||(li()&&(di instanceof Uint8Array||ci==="RGBA"||(Ki=di,di=pi(di))),Hi=this["process"+ci.toUpperCase()](di,En.call(this),Mi,function(Cr){return Cr&&typeof Cr=="string"&&(Cr=Cr.toUpperCase()),Cr in Oe.image_compression?Cr:ni.NONE}(Oi),Ki)),!Hi)throw new Error("An unknown error occurred whilst processing the image.");return Hi},Fi=Oe.__addimage__.convertBase64ToBinaryString=function(di,ci){ci=typeof ci!="boolean"||ci;var Mi,Oi="";if(typeof di=="string"){var Hi;Mi=(Hi=ai(di))!==null&&Hi!==void 0?Hi:di;try{Oi=u(Mi)}catch(Ki){if(ci)throw si(Mi)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ki.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Oi};Oe.getImageProperties=function(di){var ci,Mi,Oi="";if(Sn(di)&&(di=Tn(di)),typeof di=="string"&&ke(di)===e&&((Oi=Fi(di,!1))===""&&(Oi=Oe.loadFile(di)||""),di=Oi),Mi=ke(di),!An(Mi))throw new Error("addImage does not support files of type '"+Mi+"', please ensure that a plugin for '"+Mi+"' support is added.");if(!li()||di instanceof Uint8Array||(di=pi(di)),!(ci=this["process"+Mi.toUpperCase()](di)))throw new Error("An unknown error occurred whilst processing the image");return ci.fileType=Mi,ci}})(E.API),function(Oe){var e=function(Te){if(Te!==void 0&&Te!="")return!0};E.API.events.push(["addPage",function(Te){this.internal.getPageInfo(Te.pageNumber).pageContext.annotations=[]}]),Oe.events.push(["putPage",function(Te){for(var ke,Be,Ue,He=this.internal.getCoordinateString,We=this.internal.getVerticalCoordinateString,Cn=this.internal.getPageInfoByObjId(Te.objId),En=Te.pageContext.annotations,An=!1,Sn=0;Sn<En.length&&!An;Sn++)switch((ke=En[Sn]).type){case"link":(e(ke.options.url)||e(ke.options.pageNumber))&&(An=!0);break;case"reference":case"text":case"freetext":An=!0}if(An!=0){this.internal.write("/Annots [");for(var Tn=0;Tn<En.length;Tn++){ke=En[Tn];var Ln=this.internal.pdfEscape,Bn=this.internal.getEncryptor(Te.objId);switch(ke.type){case"reference":this.internal.write(" "+ke.object.objId+" 0 R ");break;case"text":var ei=this.internal.newAdditionalObject(),ti=this.internal.newAdditionalObject(),ni=this.internal.getEncryptor(ei.objId),ri=ke.title||"Note";Ue="<</Type /Annot /Subtype /Text "+(Be="/Rect ["+He(ke.bounds.x)+" "+We(ke.bounds.y+ke.bounds.h)+" "+He(ke.bounds.x+ke.bounds.w)+" "+We(ke.bounds.y)+"] ")+"/Contents ("+Ln(ni(ke.contents))+")",Ue+=" /Popup "+ti.objId+" 0 R",Ue+=" /P "+Cn.objId+" 0 R",Ue+=" /T ("+Ln(ni(ri))+") >>",ei.content=Ue;var si=ei.objId+" 0 R";Ue="<</Type /Annot /Subtype /Popup "+(Be="/Rect ["+He(ke.bounds.x+30)+" "+We(ke.bounds.y+ke.bounds.h)+" "+He(ke.bounds.x+ke.bounds.w+30)+" "+We(ke.bounds.y)+"] ")+" /Parent "+si,ke.open&&(Ue+=" /Open true"),Ue+=" >>",ti.content=Ue,this.internal.write(ei.objId,"0 R",ti.objId,"0 R");break;case"freetext":Be="/Rect ["+He(ke.bounds.x)+" "+We(ke.bounds.y)+" "+He(ke.bounds.x+ke.bounds.w)+" "+We(ke.bounds.y+ke.bounds.h)+"] ";var ai=ke.color||"#000000";Ue="<</Type /Annot /Subtype /FreeText "+Be+"/Contents ("+Ln(Bn(ke.contents))+")",Ue+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ai+")",Ue+=" /Border [0 0 0]",Ue+=" >>",this.internal.write(Ue);break;case"link":if(ke.options.name){var li=this.annotations._nameMap[ke.options.name];ke.options.pageNumber=li.page,ke.options.top=li.y}else ke.options.top||(ke.options.top=0);if(Be="/Rect ["+ke.finalBounds.x+" "+ke.finalBounds.y+" "+ke.finalBounds.w+" "+ke.finalBounds.h+"] ",Ue="",ke.options.url)Ue="<</Type /Annot /Subtype /Link "+Be+"/Border [0 0 0] /A <</S /URI /URI ("+Ln(Bn(ke.options.url))+") >>";else if(ke.options.pageNumber)switch(Ue="<</Type /Annot /Subtype /Link "+Be+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(ke.options.pageNumber).objId+" 0 R",ke.options.magFactor=ke.options.magFactor||"XYZ",ke.options.magFactor){case"Fit":Ue+=" /Fit]";break;case"FitH":Ue+=" /FitH "+ke.options.top+"]";break;case"FitV":ke.options.left=ke.options.left||0,Ue+=" /FitV "+ke.options.left+"]";break;case"XYZ":default:var Pi=We(ke.options.top);ke.options.left=ke.options.left||0,ke.options.zoom===void 0&&(ke.options.zoom=0),Ue+=" /XYZ "+ke.options.left+" "+Pi+" "+ke.options.zoom+"]"}Ue!=""&&(Ue+=" >>",this.internal.write(Ue))}}this.internal.write("]")}}]),Oe.createAnnotation=function(Te){var ke=this.internal.getCurrentPageInfo();switch(Te.type){case"link":this.link(Te.bounds.x,Te.bounds.y,Te.bounds.w,Te.bounds.h,Te);break;case"text":case"freetext":ke.pageContext.annotations.push(Te)}},Oe.link=function(Te,ke,Be,Ue,He){var We=this.internal.getCurrentPageInfo(),Cn=this.internal.getCoordinateString,En=this.internal.getVerticalCoordinateString;We.pageContext.annotations.push({finalBounds:{x:Cn(Te),y:En(ke),w:Cn(Te+Be),h:En(ke+Ue)},options:He,type:"link"})},Oe.textWithLink=function(Te,ke,Be,Ue){var He,We,Cn=this.getTextWidth(Te),En=this.internal.getLineHeight()/this.internal.scaleFactor;if(Ue.maxWidth!==void 0){We=Ue.maxWidth;var An=this.splitTextToSize(Te,We).length;He=Math.ceil(En*An)}else We=Cn,He=En;return this.text(Te,ke,Be,Ue),Be+=.2*En,Ue.align==="center"&&(ke-=Cn/2),Ue.align==="right"&&(ke-=Cn),this.link(ke,Be-En,We,He,Ue),Cn},Oe.getTextWidth=function(Te){var ke=this.internal.getFontSize();return this.getStringUnitWidth(Te)*ke/this.internal.scaleFactor}}(E.API),function(Oe){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},Te={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},ke={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Be=[1570,1571,1573,1575];Oe.__arabicParser__={};var Ue=Oe.__arabicParser__.isInArabicSubstitutionA=function(ei){return e[ei.charCodeAt(0)]!==void 0},He=Oe.__arabicParser__.isArabicLetter=function(ei){return typeof ei=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(ei)},We=Oe.__arabicParser__.isArabicEndLetter=function(ei){return He(ei)&&Ue(ei)&&e[ei.charCodeAt(0)].length<=2},Cn=Oe.__arabicParser__.isArabicAlfLetter=function(ei){return He(ei)&&Be.indexOf(ei.charCodeAt(0))>=0};Oe.__arabicParser__.arabicLetterHasIsolatedForm=function(ei){return He(ei)&&Ue(ei)&&e[ei.charCodeAt(0)].length>=1};var En=Oe.__arabicParser__.arabicLetterHasFinalForm=function(ei){return He(ei)&&Ue(ei)&&e[ei.charCodeAt(0)].length>=2};Oe.__arabicParser__.arabicLetterHasInitialForm=function(ei){return He(ei)&&Ue(ei)&&e[ei.charCodeAt(0)].length>=3};var An=Oe.__arabicParser__.arabicLetterHasMedialForm=function(ei){return He(ei)&&Ue(ei)&&e[ei.charCodeAt(0)].length==4},Sn=Oe.__arabicParser__.resolveLigatures=function(ei){var ti=0,ni=Te,ri="",si=0;for(ti=0;ti<ei.length;ti+=1)ni[ei.charCodeAt(ti)]!==void 0?(si++,typeof(ni=ni[ei.charCodeAt(ti)])=="number"&&(ri+=String.fromCharCode(ni),ni=Te,si=0),ti===ei.length-1&&(ni=Te,ri+=ei.charAt(ti-(si-1)),ti-=si-1,si=0)):(ni=Te,ri+=ei.charAt(ti-si),ti-=si,si=0);return ri};Oe.__arabicParser__.isArabicDiacritic=function(ei){return ei!==void 0&&ke[ei.charCodeAt(0)]!==void 0};var Tn=Oe.__arabicParser__.getCorrectForm=function(ei,ti,ni){return He(ei)?Ue(ei)===!1?-1:!En(ei)||!He(ti)&&!He(ni)||!He(ni)&&We(ti)||We(ei)&&!He(ti)||We(ei)&&Cn(ti)||We(ei)&&We(ti)?0:An(ei)&&He(ti)&&!We(ti)&&He(ni)&&En(ni)?3:We(ei)||!He(ni)?1:2:-1},Ln=function(ei){var ti=0,ni=0,ri=0,si="",ai="",li="",Pi=(ei=ei||"").split("\\s+"),pi=[];for(ti=0;ti<Pi.length;ti+=1){for(pi.push(""),ni=0;ni<Pi[ti].length;ni+=1)si=Pi[ti][ni],ai=Pi[ti][ni-1],li=Pi[ti][ni+1],He(si)?(ri=Tn(si,ai,li),pi[ti]+=ri!==-1?String.fromCharCode(e[si.charCodeAt(0)][ri]):si):pi[ti]+=si;pi[ti]=Sn(pi[ti])}return pi.join(" ")},Bn=Oe.__arabicParser__.processArabic=Oe.processArabic=function(){var ei,ti=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,ni=[];if(Array.isArray(ti)){var ri=0;for(ni=[],ri=0;ri<ti.length;ri+=1)Array.isArray(ti[ri])?ni.push([Ln(ti[ri][0]),ti[ri][1],ti[ri][2]]):ni.push([Ln(ti[ri])]);ei=ni}else ei=Ln(ti);return typeof arguments[0]=="string"?ei:(arguments[0].text=ei,arguments[0])};Oe.events.push(["preProcessText",Bn])}(E.API),E.API.autoPrint=function(Oe){var e;switch((Oe=Oe||{}).variant=Oe.variant||"non-conform",Oe.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(Oe){var e=function(){var Te=void 0;Object.defineProperty(this,"pdf",{get:function(){return Te},set:function(We){Te=We}});var ke=150;Object.defineProperty(this,"width",{get:function(){return ke},set:function(We){ke=isNaN(We)||Number.isInteger(We)===!1||We<0?150:We,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=ke+1)}});var Be=300;Object.defineProperty(this,"height",{get:function(){return Be},set:function(We){Be=isNaN(We)||Number.isInteger(We)===!1||We<0?300:We,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Be+1)}});var Ue=[];Object.defineProperty(this,"childNodes",{get:function(){return Ue},set:function(We){Ue=We}});var He={};Object.defineProperty(this,"style",{get:function(){return He},set:function(We){He=We}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(Te,ke){var Be;if((Te=Te||"2d")!=="2d")return null;for(Be in ke)this.pdf.context2d.hasOwnProperty(Be)&&(this.pdf.context2d[Be]=ke[Be]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},Oe.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(Oe){var e={left:0,top:0,bottom:0,right:0},Te=!1,ke=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),Be.call(this))},Be=function(){this.internal.__cell__.lastCell=new Ue,this.internal.__cell__.pages=1},Ue=function(){var Cn=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Cn},set:function(ei){Cn=ei}});var En=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return En},set:function(ei){En=ei}});var An=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return An},set:function(ei){An=ei}});var Sn=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return Sn},set:function(ei){Sn=ei}});var Tn=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return Tn},set:function(ei){Tn=ei}});var Ln=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return Ln},set:function(ei){Ln=ei}});var Bn=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return Bn},set:function(ei){Bn=ei}}),this};Ue.prototype.clone=function(){return new Ue(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Ue.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},Oe.setHeaderFunction=function(Cn){return ke.call(this),this.internal.__cell__.headerFunction=typeof Cn=="function"?Cn:void 0,this},Oe.getTextDimensions=function(Cn,En){ke.call(this);var An=(En=En||{}).fontSize||this.getFontSize(),Sn=En.font||this.getFont(),Tn=En.scaleFactor||this.internal.scaleFactor,Ln=0,Bn=0,ei=0,ti=this;if(!Array.isArray(Cn)&&typeof Cn!="string"){if(typeof Cn!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Cn=String(Cn)}var ni=En.maxWidth;ni>0?typeof Cn=="string"?Cn=this.splitTextToSize(Cn,ni):Object.prototype.toString.call(Cn)==="[object Array]"&&(Cn=Cn.reduce(function(si,ai){return si.concat(ti.splitTextToSize(ai,ni))},[])):Cn=Array.isArray(Cn)?Cn:[Cn];for(var ri=0;ri<Cn.length;ri++)Ln<(ei=this.getStringUnitWidth(Cn[ri],{font:Sn})*An)&&(Ln=ei);return Ln!==0&&(Bn=Cn.length),{w:Ln/=Tn,h:Math.max((Bn*An*this.getLineHeightFactor()-An*(this.getLineHeightFactor()-1))/Tn,0)}},Oe.cellAddPage=function(){ke.call(this),this.addPage();var Cn=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Ue(Cn.left,Cn.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var He=Oe.cell=function(){var Cn;Cn=arguments[0]instanceof Ue?arguments[0]:new Ue(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),ke.call(this);var En=this.internal.__cell__.lastCell,An=this.internal.__cell__.padding,Sn=this.internal.__cell__.margins||e,Tn=this.internal.__cell__.tableHeaderRow,Ln=this.internal.__cell__.printHeaders;return En.lineNumber!==void 0&&(En.lineNumber===Cn.lineNumber?(Cn.x=(En.x||0)+(En.width||0),Cn.y=En.y||0):En.y+En.height+Cn.height+Sn.bottom>this.getPageHeight()?(this.cellAddPage(),Cn.y=Sn.top,Ln&&Tn&&(this.printHeaderRow(Cn.lineNumber,!0),Cn.y+=Tn[0].height)):Cn.y=En.y+En.height||Cn.y),Cn.text[0]!==void 0&&(this.rect(Cn.x,Cn.y,Cn.width,Cn.height,Te===!0?"FD":void 0),Cn.align==="right"?this.text(Cn.text,Cn.x+Cn.width-An,Cn.y+An,{align:"right",baseline:"top"}):Cn.align==="center"?this.text(Cn.text,Cn.x+Cn.width/2,Cn.y+An,{align:"center",baseline:"top",maxWidth:Cn.width-An-An}):this.text(Cn.text,Cn.x+An,Cn.y+An,{align:"left",baseline:"top",maxWidth:Cn.width-An-An})),this.internal.__cell__.lastCell=Cn,this};Oe.table=function(Cn,En,An,Sn,Tn){if(ke.call(this),!An)throw new Error("No data for PDF table.");var Ln,Bn,ei,ti,ni=[],ri=[],si=[],ai={},li={},Pi=[],pi=[],vi=(Tn=Tn||{}).autoSize||!1,Ri=Tn.printHeaders!==!1,Fi=Tn.css&&Tn.css["font-size"]!==void 0?16*Tn.css["font-size"]:Tn.fontSize||12,di=Tn.margins||Object.assign({width:this.getPageWidth()},e),ci=typeof Tn.padding=="number"?Tn.padding:3,Mi=Tn.headerBackgroundColor||"#c8c8c8",Oi=Tn.headerTextColor||"#000";if(Be.call(this),this.internal.__cell__.printHeaders=Ri,this.internal.__cell__.margins=di,this.internal.__cell__.table_font_size=Fi,this.internal.__cell__.padding=ci,this.internal.__cell__.headerBackgroundColor=Mi,this.internal.__cell__.headerTextColor=Oi,this.setFontSize(Fi),Sn==null)ri=ni=Object.keys(An[0]),si=ni.map(function(){return"left"});else if(Array.isArray(Sn)&&_typeof(Sn[0])==="object")for(ni=Sn.map(function(pr){return pr.name}),ri=Sn.map(function(pr){return pr.prompt||pr.name||""}),si=Sn.map(function(pr){return pr.align||"left"}),Ln=0;Ln<Sn.length;Ln+=1)li[Sn[Ln].name]=Sn[Ln].width*(19.049976/25.4);else Array.isArray(Sn)&&typeof Sn[0]=="string"&&(ri=ni=Sn,si=ni.map(function(){return"left"}));if(vi||Array.isArray(Sn)&&typeof Sn[0]=="string")for(Ln=0;Ln<ni.length;Ln+=1){for(ai[ti=ni[Ln]]=An.map(function(pr){return pr[ti]}),this.setFont(void 0,"bold"),Pi.push(this.getTextDimensions(ri[Ln],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),Bn=ai[ti],this.setFont(void 0,"normal"),ei=0;ei<Bn.length;ei+=1)Pi.push(this.getTextDimensions(Bn[ei],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);li[ti]=Math.max.apply(null,Pi)+ci+ci,Pi=[]}if(Ri){var Hi={};for(Ln=0;Ln<ni.length;Ln+=1)Hi[ni[Ln]]={},Hi[ni[Ln]].text=ri[Ln],Hi[ni[Ln]].align=si[Ln];var Ki=We.call(this,Hi,li);pi=ni.map(function(pr){return new Ue(Cn,En,li[pr],Ki,Hi[pr].text,void 0,Hi[pr].align)}),this.setTableHeaderRow(pi),this.printHeaderRow(1,!1)}var or=Sn.reduce(function(pr,wr){return pr[wr.name]=wr.align,pr},{});for(Ln=0;Ln<An.length;Ln+=1){"rowStart"in Tn&&Tn.rowStart instanceof Function&&Tn.rowStart({row:Ln,data:An[Ln]},this);var sr=We.call(this,An[Ln],li);for(ei=0;ei<ni.length;ei+=1){var Cr=An[Ln][ni[ei]];"cellStart"in Tn&&Tn.cellStart instanceof Function&&Tn.cellStart({row:Ln,col:ei,data:Cr},this),He.call(this,new Ue(Cn,En,li[ni[ei]],sr,Cr,Ln+2,or[ni[ei]]))}}return this.internal.__cell__.table_x=Cn,this.internal.__cell__.table_y=En,this};var We=function(Cn,En){var An=this.internal.__cell__.padding,Sn=this.internal.__cell__.table_font_size,Tn=this.internal.scaleFactor;return Object.keys(Cn).map(function(Ln){var Bn=Cn[Ln];return this.splitTextToSize(Bn.hasOwnProperty("text")?Bn.text:Bn,En[Ln]-An-An)},this).map(function(Ln){return this.getLineHeightFactor()*Ln.length*Sn/Tn+An+An},this).reduce(function(Ln,Bn){return Math.max(Ln,Bn)},0)};Oe.setTableHeaderRow=function(Cn){ke.call(this),this.internal.__cell__.tableHeaderRow=Cn},Oe.printHeaderRow=function(Cn,En){if(ke.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var An;if(Te=!0,typeof this.internal.__cell__.headerFunction=="function"){var Sn=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Ue(Sn[0],Sn[1],Sn[2],Sn[3],void 0,-1)}this.setFont(void 0,"bold");for(var Tn=[],Ln=0;Ln<this.internal.__cell__.tableHeaderRow.length;Ln+=1){An=this.internal.__cell__.tableHeaderRow[Ln].clone(),En&&(An.y=this.internal.__cell__.margins.top||0,Tn.push(An)),An.lineNumber=Cn;var Bn=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),He.call(this,An),this.setTextColor(Bn)}Tn.length>0&&this.setTableHeaderRow(Tn),this.setFont(void 0,"normal"),Te=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(Oe){var e=Oe.family.replace(/"|'/g,"").toLowerCase(),Te=function(Ue){return Pt[Ue=Ue||"normal"]?Ue:"normal"}(Oe.style),ke=function(Ue){if(!Ue)return 400;if(typeof Ue=="number")return Ue>=100&&Ue<=900&&Ue%100==0?Ue:400;if(/^\d00$/.test(Ue))return parseInt(Ue);switch(Ue){case"bold":return 700;case"normal":default:return 400}}(Oe.weight),Be=function(Ue){return typeof It[Ue=Ue||"normal"]=="number"?Ue:"normal"}(Oe.stretch);return{family:e,style:Te,weight:ke,stretch:Be,src:Oe.src||[],ref:Oe.ref||{name:e,style:[Be,Te,ke].join(" ")}}}function Ot(Oe,e,Te,ke){var Be;for(Be=Te;Be>=0&&Be<e.length;Be+=ke)if(Oe[e[Be]])return Oe[e[Be]];for(Be=Te;Be>=0&&Be<e.length;Be-=ke)if(Oe[e[Be]])return Oe[e[Be]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(Oe){return[Oe.stretch,Oe.style,Oe.weight,Oe.family].join(" ")}function qt(Oe,e,Te){for(var ke=(Te=Te||{}).defaultFontFamily||"times",Be=Object.assign({},Bt,Te.genericFontFamilies||{}),Ue=null,He=null,We=0;We<e.length;++We)if(Be[(Ue=jt(e[We])).family]&&(Ue.family=Be[Ue.family]),Oe.hasOwnProperty(Ue.family)){He=Oe[Ue.family];break}if(!(He=He||Oe[ke]))throw new Error("Could not find a font-family for the rule '"+Et(Ue)+"' and default family '"+ke+"'.");if(He=function(Cn,En){if(En[Cn])return En[Cn];var An=It[Cn],Sn=An<=It.normal?-1:1,Tn=Ot(En,kt,An,Sn);if(!Tn)throw new Error("Could not find a matching font-stretch value for "+Cn);return Tn}(Ue.stretch,He),He=function(Cn,En){if(En[Cn])return En[Cn];for(var An=Pt[Cn],Sn=0;Sn<An.length;++Sn)if(En[An[Sn]])return En[An[Sn]];throw new Error("Could not find a matching font-style for "+Cn)}(Ue.style,He),!(He=function(Cn,En){if(En[Cn])return En[Cn];if(Cn===400&&En[500])return En[500];if(Cn===500&&En[400])return En[400];var An=Ct[Cn],Sn=Ot(En,Ft,An,Cn<400?-1:1);if(!Sn)throw new Error("Could not find a matching font-weight for value "+Cn);return Sn}(Ue.weight,He)))throw new Error("Failed to resolve a font for the rule '"+Et(Ue)+"'.");return He}function Dt(Oe){return Oe.trimLeft()}function Rt(Oe,e){for(var Te=0;Te<Oe.length;){if(Oe.charAt(Te)===e)return[Oe.substring(0,Te),Oe.substring(Te+1)];Te+=1}return null}function Tt(Oe){var e=Oe.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],Oe.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(Oe){var e,Te,ke,Be,Ue,He,We,Cn,En,An=function(Li){return Li=Li||{},this.isStrokeTransparent=Li.isStrokeTransparent||!1,this.strokeOpacity=Li.strokeOpacity||1,this.strokeStyle=Li.strokeStyle||"#000000",this.fillStyle=Li.fillStyle||"#000000",this.isFillTransparent=Li.isFillTransparent||!1,this.fillOpacity=Li.fillOpacity||1,this.font=Li.font||"10px sans-serif",this.textBaseline=Li.textBaseline||"alphabetic",this.textAlign=Li.textAlign||"left",this.lineWidth=Li.lineWidth||1,this.lineJoin=Li.lineJoin||"miter",this.lineCap=Li.lineCap||"butt",this.path=Li.path||[],this.transform=Li.transform!==void 0?Li.transform.clone():new Cn,this.globalCompositeOperation=Li.globalCompositeOperation||"normal",this.globalAlpha=Li.globalAlpha||1,this.clip_path=Li.clip_path||[],this.currentPoint=Li.currentPoint||new He,this.miterLimit=Li.miterLimit||10,this.lastPoint=Li.lastPoint||new He,this.lineDashOffset=Li.lineDashOffset||0,this.lineDash=Li.lineDash||[],this.margin=Li.margin||[0,0,0,0],this.prevPageLastElemOffset=Li.prevPageLastElemOffset||0,this.ignoreClearRect=typeof Li.ignoreClearRect!="boolean"||Li.ignoreClearRect,this};Oe.events.push(["initialized",function(){this.context2d=new Sn(this),e=this.internal.f2,Te=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString,Be=this.internal.getHorizontalCoordinate,Ue=this.internal.getVerticalCoordinate,He=this.internal.Point,We=this.internal.Rectangle,Cn=this.internal.Matrix,En=new An}]);var Sn=function(Li){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var er=Li;Object.defineProperty(this,"pdf",{get:function(){return er}});var hr=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return hr},set:function(ar){hr=!!ar}});var mr=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return mr},set:function(ar){mr=!!ar}});var _r=0;Object.defineProperty(this,"posX",{get:function(){return _r},set:function(ar){isNaN(ar)||(_r=ar)}});var dr=0;Object.defineProperty(this,"posY",{get:function(){return dr},set:function(ar){isNaN(ar)||(dr=ar)}}),Object.defineProperty(this,"margin",{get:function(){return En.margin},set:function(ar){var nr;typeof ar=="number"?nr=[ar,ar,ar,ar]:((nr=new Array(4))[0]=ar[0],nr[1]=ar.length>=2?ar[1]:nr[0],nr[2]=ar.length>=3?ar[2]:nr[0],nr[3]=ar.length>=4?ar[3]:nr[1]),En.margin=nr}});var cr=!1;Object.defineProperty(this,"autoPaging",{get:function(){return cr},set:function(ar){cr=ar}});var gr=0;Object.defineProperty(this,"lastBreak",{get:function(){return gr},set:function(ar){gr=ar}});var vr=[];Object.defineProperty(this,"pageBreaks",{get:function(){return vr},set:function(ar){vr=ar}}),Object.defineProperty(this,"ctx",{get:function(){return En},set:function(ar){ar instanceof An&&(En=ar)}}),Object.defineProperty(this,"path",{get:function(){return En.path},set:function(ar){En.path=ar}});var Fr=[];Object.defineProperty(this,"ctxStack",{get:function(){return Fr},set:function(ar){Fr=ar}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ar){var nr;nr=Tn(ar),this.ctx.fillStyle=nr.style,this.ctx.isFillTransparent=nr.a===0,this.ctx.fillOpacity=nr.a,this.pdf.setFillColor(nr.r,nr.g,nr.b,{a:nr.a}),this.pdf.setTextColor(nr.r,nr.g,nr.b,{a:nr.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ar){var nr=Tn(ar);this.ctx.strokeStyle=nr.style,this.ctx.isStrokeTransparent=nr.a===0,this.ctx.strokeOpacity=nr.a,nr.a===0?this.pdf.setDrawColor(255,255,255):(nr.a,this.pdf.setDrawColor(nr.r,nr.g,nr.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ar){["butt","round","square"].indexOf(ar)!==-1&&(this.ctx.lineCap=ar,this.pdf.setLineCap(ar))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ar){isNaN(ar)||(this.ctx.lineWidth=ar,this.pdf.setLineWidth(ar))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ar){["bevel","round","miter"].indexOf(ar)!==-1&&(this.ctx.lineJoin=ar,this.pdf.setLineJoin(ar))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ar){isNaN(ar)||(this.ctx.miterLimit=ar,this.pdf.setMiterLimit(ar))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ar){this.ctx.textBaseline=ar}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ar){["right","end","center","left","start"].indexOf(ar)!==-1&&(this.ctx.textAlign=ar)}});var zr=null;function tr(ar,nr){if(zr===null){var Dr=function(kr){var Ir=[];return Object.keys(kr).forEach(function(Mr){kr[Mr].forEach(function(Rr){var Nr=null;switch(Rr){case"bold":Nr={family:Mr,weight:"bold"};break;case"italic":Nr={family:Mr,style:"italic"};break;case"bolditalic":Nr={family:Mr,weight:"bold",style:"italic"};break;case"":case"normal":Nr={family:Mr}}Nr!==null&&(Nr.ref={name:Mr,style:Rr},Ir.push(Nr))})}),Ir}(ar.getFontList());zr=function(kr){for(var Ir={},Mr=0;Mr<kr.length;++Mr){var Rr=jt(kr[Mr]),Nr=Rr.family,Ar=Rr.stretch,Sr=Rr.style,br=Rr.weight;Ir[Nr]=Ir[Nr]||{},Ir[Nr][Ar]=Ir[Nr][Ar]||{},Ir[Nr][Ar][Sr]=Ir[Nr][Ar][Sr]||{},Ir[Nr][Ar][Sr][br]=Rr}return Ir}(Dr.concat(nr))}return zr}var fr=null;Object.defineProperty(this,"fontFaces",{get:function(){return fr},set:function(ar){zr=null,fr=ar}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ar){var nr;if(this.ctx.font=ar,(nr=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ar))!==null){var Dr=nr[1];nr[2];var kr=nr[3],Ir=nr[4];nr[5];var Mr=nr[6],Rr=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ir)[2];Ir=Math.floor(Rr==="px"?parseFloat(Ir)*this.pdf.internal.scaleFactor:Rr==="em"?parseFloat(Ir)*this.pdf.getFontSize():parseFloat(Ir)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ir);var Nr=function(Xr){var cs,Qr,bs=[],vs=Xr.trim();if(vs==="")return Wt;if(vs in Mt)return[Mt[vs]];for(;vs!=="";){switch(Qr=null,cs=(vs=Dt(vs)).charAt(0)){case'"':case"'":Qr=Rt(vs.substring(1),cs);break;default:Qr=Tt(vs)}if(Qr===null||(bs.push(Qr[0]),(vs=Dt(Qr[1]))!==""&&vs.charAt(0)!==","))return Wt;vs=vs.replace(/^,/,"")}return bs}(Mr);if(this.fontFaces){var Ar=qt(tr(this.pdf,this.fontFaces),Nr.map(function(Xr){return{family:Xr,stretch:"normal",weight:kr,style:Dr}}));this.pdf.setFont(Ar.ref.name,Ar.ref.style)}else{var Sr="";(kr==="bold"||parseInt(kr,10)>=700||Dr==="bold")&&(Sr="bold"),Dr==="italic"&&(Sr+="italic"),Sr.length===0&&(Sr="normal");for(var br="",Br={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Hr=0;Hr<Nr.length;Hr++){if(this.pdf.internal.getFont(Nr[Hr],Sr,{noFallback:!0,disableWarning:!0})!==void 0){br=Nr[Hr];break}if(Sr==="bolditalic"&&this.pdf.internal.getFont(Nr[Hr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)br=Nr[Hr],Sr="bold";else if(this.pdf.internal.getFont(Nr[Hr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){br=Nr[Hr],Sr="normal";break}}if(br===""){for(var qr=0;qr<Nr.length;qr++)if(Br[Nr[qr]]){br=Br[Nr[qr]];break}}br=br===""?"Times":br,this.pdf.setFont(br,Sr)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ar){this.ctx.globalCompositeOperation=ar}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ar){this.ctx.globalAlpha=ar}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ar){this.ctx.lineDashOffset=ar,wr.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ar){this.ctx.lineDash=ar,wr.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ar){this.ctx.ignoreClearRect=!!ar}})};Sn.prototype.setLineDash=function(Li){this.lineDash=Li},Sn.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},Sn.prototype.fill=function(){ai.call(this,"fill",!1)},Sn.prototype.stroke=function(){ai.call(this,"stroke",!1)},Sn.prototype.beginPath=function(){this.path=[{type:"begin"}]},Sn.prototype.moveTo=function(Li,er){if(isNaN(Li)||isNaN(er))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var hr=this.ctx.transform.applyToPoint(new He(Li,er));this.path.push({type:"mt",x:hr.x,y:hr.y}),this.ctx.lastPoint=new He(Li,er)},Sn.prototype.closePath=function(){var Li=new He(0,0),er=0;for(er=this.path.length-1;er!==-1;er--)if(this.path[er].type==="begin"&&_typeof(this.path[er+1])==="object"&&typeof this.path[er+1].x=="number"){Li=new He(this.path[er+1].x,this.path[er+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new He(Li.x,Li.y)},Sn.prototype.lineTo=function(Li,er){if(isNaN(Li)||isNaN(er))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var hr=this.ctx.transform.applyToPoint(new He(Li,er));this.path.push({type:"lt",x:hr.x,y:hr.y}),this.ctx.lastPoint=new He(hr.x,hr.y)},Sn.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ai.call(this,null,!0)},Sn.prototype.quadraticCurveTo=function(Li,er,hr,mr){if(isNaN(hr)||isNaN(mr)||isNaN(Li)||isNaN(er))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var _r=this.ctx.transform.applyToPoint(new He(hr,mr)),dr=this.ctx.transform.applyToPoint(new He(Li,er));this.path.push({type:"qct",x1:dr.x,y1:dr.y,x:_r.x,y:_r.y}),this.ctx.lastPoint=new He(_r.x,_r.y)},Sn.prototype.bezierCurveTo=function(Li,er,hr,mr,_r,dr){if(isNaN(_r)||isNaN(dr)||isNaN(Li)||isNaN(er)||isNaN(hr)||isNaN(mr))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var cr=this.ctx.transform.applyToPoint(new He(_r,dr)),gr=this.ctx.transform.applyToPoint(new He(Li,er)),vr=this.ctx.transform.applyToPoint(new He(hr,mr));this.path.push({type:"bct",x1:gr.x,y1:gr.y,x2:vr.x,y2:vr.y,x:cr.x,y:cr.y}),this.ctx.lastPoint=new He(cr.x,cr.y)},Sn.prototype.arc=function(Li,er,hr,mr,_r,dr){if(isNaN(Li)||isNaN(er)||isNaN(hr)||isNaN(mr)||isNaN(_r))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(dr=!!dr,!this.ctx.transform.isIdentity){var cr=this.ctx.transform.applyToPoint(new He(Li,er));Li=cr.x,er=cr.y;var gr=this.ctx.transform.applyToPoint(new He(0,hr)),vr=this.ctx.transform.applyToPoint(new He(0,0));hr=Math.sqrt(Math.pow(gr.x-vr.x,2)+Math.pow(gr.y-vr.y,2))}Math.abs(_r-mr)>=2*Math.PI&&(mr=0,_r=2*Math.PI),this.path.push({type:"arc",x:Li,y:er,radius:hr,startAngle:mr,endAngle:_r,counterclockwise:dr})},Sn.prototype.arcTo=function(Li,er,hr,mr,_r){throw new Error("arcTo not implemented.")},Sn.prototype.rect=function(Li,er,hr,mr){if(isNaN(Li)||isNaN(er)||isNaN(hr)||isNaN(mr))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(Li,er),this.lineTo(Li+hr,er),this.lineTo(Li+hr,er+mr),this.lineTo(Li,er+mr),this.lineTo(Li,er),this.lineTo(Li+hr,er),this.lineTo(Li,er)},Sn.prototype.fillRect=function(Li,er,hr,mr){if(isNaN(Li)||isNaN(er)||isNaN(hr)||isNaN(mr))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!Ln.call(this)){var _r={};this.lineCap!=="butt"&&(_r.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(_r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(Li,er,hr,mr),this.fill(),_r.hasOwnProperty("lineCap")&&(this.lineCap=_r.lineCap),_r.hasOwnProperty("lineJoin")&&(this.lineJoin=_r.lineJoin)}},Sn.prototype.strokeRect=function(Li,er,hr,mr){if(isNaN(Li)||isNaN(er)||isNaN(hr)||isNaN(mr))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");Bn.call(this)||(this.beginPath(),this.rect(Li,er,hr,mr),this.stroke())},Sn.prototype.clearRect=function(Li,er,hr,mr){if(isNaN(Li)||isNaN(er)||isNaN(hr)||isNaN(mr))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(Li,er,hr,mr))},Sn.prototype.save=function(Li){Li=typeof Li!="boolean"||Li;for(var er=this.pdf.internal.getCurrentPageInfo().pageNumber,hr=0;hr<this.pdf.internal.getNumberOfPages();hr++)this.pdf.setPage(hr+1),this.pdf.internal.out("q");if(this.pdf.setPage(er),Li){this.ctx.fontSize=this.pdf.internal.getFontSize();var mr=new An(this.ctx);this.ctxStack.push(this.ctx),this.ctx=mr}},Sn.prototype.restore=function(Li){Li=typeof Li!="boolean"||Li;for(var er=this.pdf.internal.getCurrentPageInfo().pageNumber,hr=0;hr<this.pdf.internal.getNumberOfPages();hr++)this.pdf.setPage(hr+1),this.pdf.internal.out("Q");this.pdf.setPage(er),Li&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},Sn.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var Tn=function(Li){var er,hr,mr,_r;if(Li.isCanvasGradient===!0&&(Li=Li.getColor()),!Li)return{r:0,g:0,b:0,a:0,style:Li};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(Li))er=0,hr=0,mr=0,_r=0;else{var dr=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(Li);if(dr!==null)er=parseInt(dr[1]),hr=parseInt(dr[2]),mr=parseInt(dr[3]),_r=1;else if((dr=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(Li))!==null)er=parseInt(dr[1]),hr=parseInt(dr[2]),mr=parseInt(dr[3]),_r=parseFloat(dr[4]);else{if(_r=1,typeof Li=="string"&&Li.charAt(0)!=="#"){var cr=new f(Li);Li=cr.ok?cr.toHex():"#000000"}Li.length===4?(er=Li.substring(1,2),er+=er,hr=Li.substring(2,3),hr+=hr,mr=Li.substring(3,4),mr+=mr):(er=Li.substring(1,3),hr=Li.substring(3,5),mr=Li.substring(5,7)),er=parseInt(er,16),hr=parseInt(hr,16),mr=parseInt(mr,16)}}return{r:er,g:hr,b:mr,a:_r,style:Li}},Ln=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},Bn=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};Sn.prototype.fillText=function(Li,er,hr,mr){if(isNaN(er)||isNaN(hr)||typeof Li!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(mr=isNaN(mr)?void 0:mr,!Ln.call(this)){var _r=sr(this.ctx.transform.rotation),dr=this.ctx.transform.scaleX;ci.call(this,{text:Li,x:er,y:hr,scale:dr,angle:_r,align:this.textAlign,maxWidth:mr})}},Sn.prototype.strokeText=function(Li,er,hr,mr){if(isNaN(er)||isNaN(hr)||typeof Li!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!Bn.call(this)){mr=isNaN(mr)?void 0:mr;var _r=sr(this.ctx.transform.rotation),dr=this.ctx.transform.scaleX;ci.call(this,{text:Li,x:er,y:hr,scale:dr,renderingMode:"stroke",angle:_r,align:this.textAlign,maxWidth:mr})}},Sn.prototype.measureText=function(Li){if(typeof Li!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var er=this.pdf,hr=this.pdf.internal.scaleFactor,mr=er.internal.getFontSize(),_r=er.getStringUnitWidth(Li)*mr/er.internal.scaleFactor,dr=function(cr){var gr=(cr=cr||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return gr}}),this};return new dr({width:_r*=Math.round(96*hr/72*1e4)/1e4})},Sn.prototype.scale=function(Li,er){if(isNaN(Li)||isNaN(er))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var hr=new Cn(Li,0,0,er,0,0);this.ctx.transform=this.ctx.transform.multiply(hr)},Sn.prototype.rotate=function(Li){if(isNaN(Li))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var er=new Cn(Math.cos(Li),Math.sin(Li),-Math.sin(Li),Math.cos(Li),0,0);this.ctx.transform=this.ctx.transform.multiply(er)},Sn.prototype.translate=function(Li,er){if(isNaN(Li)||isNaN(er))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var hr=new Cn(1,0,0,1,Li,er);this.ctx.transform=this.ctx.transform.multiply(hr)},Sn.prototype.transform=function(Li,er,hr,mr,_r,dr){if(isNaN(Li)||isNaN(er)||isNaN(hr)||isNaN(mr)||isNaN(_r)||isNaN(dr))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var cr=new Cn(Li,er,hr,mr,_r,dr);this.ctx.transform=this.ctx.transform.multiply(cr)},Sn.prototype.setTransform=function(Li,er,hr,mr,_r,dr){Li=isNaN(Li)?1:Li,er=isNaN(er)?0:er,hr=isNaN(hr)?0:hr,mr=isNaN(mr)?1:mr,_r=isNaN(_r)?0:_r,dr=isNaN(dr)?0:dr,this.ctx.transform=new Cn(Li,er,hr,mr,_r,dr)};var ei=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};Sn.prototype.drawImage=function(Li,er,hr,mr,_r,dr,cr,gr,vr){var Fr=this.pdf.getImageProperties(Li),zr=1,tr=1,fr=1,ar=1;mr!==void 0&&gr!==void 0&&(fr=gr/mr,ar=vr/_r,zr=Fr.width/mr*gr/mr,tr=Fr.height/_r*vr/_r),dr===void 0&&(dr=er,cr=hr,er=0,hr=0),mr!==void 0&&gr===void 0&&(gr=mr,vr=_r),mr===void 0&&gr===void 0&&(gr=Fr.width,vr=Fr.height);for(var nr,Dr=this.ctx.transform.decompose(),kr=sr(Dr.rotate.shx),Ir=new Cn,Mr=(Ir=(Ir=(Ir=Ir.multiply(Dr.translate)).multiply(Dr.skew)).multiply(Dr.scale)).applyToRectangle(new We(dr-er*fr,cr-hr*ar,mr*zr,_r*tr)),Rr=ti.call(this,Mr),Nr=[],Ar=0;Ar<Rr.length;Ar+=1)Nr.indexOf(Rr[Ar])===-1&&Nr.push(Rr[Ar]);if(si(Nr),this.autoPaging)for(var Sr=Nr[0],br=Nr[Nr.length-1],Br=Sr;Br<br+1;Br++){this.pdf.setPage(Br);var Hr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],qr=Br===1?this.posY+this.margin[0]:this.margin[0],Xr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],cs=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qr=Br===1?0:Xr+(Br-2)*cs;if(this.ctx.clip_path.length!==0){var bs=this.path;nr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ri(nr,this.posX+this.margin[3],-Qr+qr+this.ctx.prevPageLastElemOffset),li.call(this,"fill",!0),this.path=bs}var vs=JSON.parse(JSON.stringify(Mr));vs=ri([vs],this.posX+this.margin[3],-Qr+qr+this.ctx.prevPageLastElemOffset)[0];var Ms=(Br>Sr||Br<br)&&ei.call(this);Ms&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Hr,cs,null).clip().discardPath()),this.pdf.addImage(Li,"JPEG",vs.x,vs.y,vs.w,vs.h,null,null,kr),Ms&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(Li,"JPEG",Mr.x,Mr.y,Mr.w,Mr.h,null,null,kr)};var ti=function(Li,er,hr){var mr=[];er=er||this.pdf.internal.pageSize.width,hr=hr||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var _r=this.posY+this.ctx.prevPageLastElemOffset;switch(Li.type){default:case"mt":case"lt":mr.push(Math.floor((Li.y+_r)/hr)+1);break;case"arc":mr.push(Math.floor((Li.y+_r-Li.radius)/hr)+1),mr.push(Math.floor((Li.y+_r+Li.radius)/hr)+1);break;case"qct":var dr=Cr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Li.x1,Li.y1,Li.x,Li.y);mr.push(Math.floor((dr.y+_r)/hr)+1),mr.push(Math.floor((dr.y+dr.h+_r)/hr)+1);break;case"bct":var cr=pr(this.ctx.lastPoint.x,this.ctx.lastPoint.y,Li.x1,Li.y1,Li.x2,Li.y2,Li.x,Li.y);mr.push(Math.floor((cr.y+_r)/hr)+1),mr.push(Math.floor((cr.y+cr.h+_r)/hr)+1);break;case"rect":mr.push(Math.floor((Li.y+_r)/hr)+1),mr.push(Math.floor((Li.y+Li.h+_r)/hr)+1)}for(var gr=0;gr<mr.length;gr+=1)for(;this.pdf.internal.getNumberOfPages()<mr[gr];)ni.call(this);return mr},ni=function(){var Li=this.fillStyle,er=this.strokeStyle,hr=this.font,mr=this.lineCap,_r=this.lineWidth,dr=this.lineJoin;this.pdf.addPage(),this.fillStyle=Li,this.strokeStyle=er,this.font=hr,this.lineCap=mr,this.lineWidth=_r,this.lineJoin=dr},ri=function(Li,er,hr){for(var mr=0;mr<Li.length;mr++)switch(Li[mr].type){case"bct":Li[mr].x2+=er,Li[mr].y2+=hr;case"qct":Li[mr].x1+=er,Li[mr].y1+=hr;case"mt":case"lt":case"arc":default:Li[mr].x+=er,Li[mr].y+=hr}return Li},si=function(Li){return Li.sort(function(er,hr){return er-hr})},ai=function(Li,er){for(var hr,mr,_r=this.fillStyle,dr=this.strokeStyle,cr=this.lineCap,gr=this.lineWidth,vr=Math.abs(gr*this.ctx.transform.scaleX),Fr=this.lineJoin,zr=JSON.parse(JSON.stringify(this.path)),tr=JSON.parse(JSON.stringify(this.path)),fr=[],ar=0;ar<tr.length;ar++)if(tr[ar].x!==void 0)for(var nr=ti.call(this,tr[ar]),Dr=0;Dr<nr.length;Dr+=1)fr.indexOf(nr[Dr])===-1&&fr.push(nr[Dr]);for(var kr=0;kr<fr.length;kr++)for(;this.pdf.internal.getNumberOfPages()<fr[kr];)ni.call(this);if(si(fr),this.autoPaging)for(var Ir=fr[0],Mr=fr[fr.length-1],Rr=Ir;Rr<Mr+1;Rr++){this.pdf.setPage(Rr),this.fillStyle=_r,this.strokeStyle=dr,this.lineCap=cr,this.lineWidth=vr,this.lineJoin=Fr;var Nr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ar=Rr===1?this.posY+this.margin[0]:this.margin[0],Sr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],br=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Br=Rr===1?0:Sr+(Rr-2)*br;if(this.ctx.clip_path.length!==0){var Hr=this.path;hr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ri(hr,this.posX+this.margin[3],-Br+Ar+this.ctx.prevPageLastElemOffset),li.call(this,Li,!0),this.path=Hr}if(mr=JSON.parse(JSON.stringify(zr)),this.path=ri(mr,this.posX+this.margin[3],-Br+Ar+this.ctx.prevPageLastElemOffset),er===!1||Rr===0){var qr=(Rr>Ir||Rr<Mr)&&ei.call(this);qr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Nr,br,null).clip().discardPath()),li.call(this,Li,er),qr&&this.pdf.restoreGraphicsState()}this.lineWidth=gr}else this.lineWidth=vr,li.call(this,Li,er),this.lineWidth=gr;this.path=zr},li=function(Li,er){if((Li!=="stroke"||er||!Bn.call(this))&&(Li==="stroke"||er||!Ln.call(this))){for(var hr,mr,_r=[],dr=this.path,cr=0;cr<dr.length;cr++){var gr=dr[cr];switch(gr.type){case"begin":_r.push({begin:!0});break;case"close":_r.push({close:!0});break;case"mt":_r.push({start:gr,deltas:[],abs:[]});break;case"lt":var vr=_r.length;if(dr[cr-1]&&!isNaN(dr[cr-1].x)&&(hr=[gr.x-dr[cr-1].x,gr.y-dr[cr-1].y],vr>0)){for(;vr>=0;vr--)if(_r[vr-1].close!==!0&&_r[vr-1].begin!==!0){_r[vr-1].deltas.push(hr),_r[vr-1].abs.push(gr);break}}break;case"bct":hr=[gr.x1-dr[cr-1].x,gr.y1-dr[cr-1].y,gr.x2-dr[cr-1].x,gr.y2-dr[cr-1].y,gr.x-dr[cr-1].x,gr.y-dr[cr-1].y],_r[_r.length-1].deltas.push(hr);break;case"qct":var Fr=dr[cr-1].x+2/3*(gr.x1-dr[cr-1].x),zr=dr[cr-1].y+2/3*(gr.y1-dr[cr-1].y),tr=gr.x+2/3*(gr.x1-gr.x),fr=gr.y+2/3*(gr.y1-gr.y),ar=gr.x,nr=gr.y;hr=[Fr-dr[cr-1].x,zr-dr[cr-1].y,tr-dr[cr-1].x,fr-dr[cr-1].y,ar-dr[cr-1].x,nr-dr[cr-1].y],_r[_r.length-1].deltas.push(hr);break;case"arc":_r.push({deltas:[],abs:[],arc:!0}),Array.isArray(_r[_r.length-1].abs)&&_r[_r.length-1].abs.push(gr)}}mr=er?null:Li==="stroke"?"stroke":"fill";for(var Dr=!1,kr=0;kr<_r.length;kr++)if(_r[kr].arc)for(var Ir=_r[kr].abs,Mr=0;Mr<Ir.length;Mr++){var Rr=Ir[Mr];Rr.type==="arc"?vi.call(this,Rr.x,Rr.y,Rr.radius,Rr.startAngle,Rr.endAngle,Rr.counterclockwise,void 0,er,!Dr):Mi.call(this,Rr.x,Rr.y),Dr=!0}else if(_r[kr].close===!0)this.pdf.internal.out("h"),Dr=!1;else if(_r[kr].begin!==!0){var Nr=_r[kr].start.x,Ar=_r[kr].start.y;Oi.call(this,_r[kr].deltas,Nr,Ar),Dr=!0}mr&&Ri.call(this,mr),er&&Fi.call(this)}},Pi=function(Li){var er=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,hr=er*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return Li-hr;case"top":return Li+er-hr;case"hanging":return Li+er-2*hr;case"middle":return Li+er/2-hr;case"ideographic":return Li;case"alphabetic":default:return Li}},pi=function(Li){return Li+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};Sn.prototype.createLinearGradient=function(){var Li=function(){};return Li.colorStops=[],Li.addColorStop=function(er,hr){this.colorStops.push([er,hr])},Li.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},Li.isCanvasGradient=!0,Li},Sn.prototype.createPattern=function(){return this.createLinearGradient()},Sn.prototype.createRadialGradient=function(){return this.createLinearGradient()};var vi=function(Li,er,hr,mr,_r,dr,cr,gr,vr){for(var Fr=Ki.call(this,hr,mr,_r,dr),zr=0;zr<Fr.length;zr++){var tr=Fr[zr];zr===0&&(vr?di.call(this,tr.x1+Li,tr.y1+er):Mi.call(this,tr.x1+Li,tr.y1+er)),Hi.call(this,Li,er,tr.x2,tr.y2,tr.x3,tr.y3,tr.x4,tr.y4)}gr?Fi.call(this):Ri.call(this,cr)},Ri=function(Li){switch(Li){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Fi=function(){this.pdf.clip(),this.pdf.discardPath()},di=function(Li,er){this.pdf.internal.out(Te(Li)+" "+ke(er)+" m")},ci=function(Li){var er;switch(Li.align){case"right":case"end":er="right";break;case"center":er="center";break;case"left":case"start":default:er="left"}var hr=this.pdf.getTextDimensions(Li.text),mr=Pi.call(this,Li.y),_r=pi.call(this,mr)-hr.h,dr=this.ctx.transform.applyToPoint(new He(Li.x,mr)),cr=this.ctx.transform.decompose(),gr=new Cn;gr=(gr=(gr=gr.multiply(cr.translate)).multiply(cr.skew)).multiply(cr.scale);for(var vr,Fr,zr,tr=this.ctx.transform.applyToRectangle(new We(Li.x,mr,hr.w,hr.h)),fr=gr.applyToRectangle(new We(Li.x,_r,hr.w,hr.h)),ar=ti.call(this,fr),nr=[],Dr=0;Dr<ar.length;Dr+=1)nr.indexOf(ar[Dr])===-1&&nr.push(ar[Dr]);if(si(nr),this.autoPaging)for(var kr=nr[0],Ir=nr[nr.length-1],Mr=kr;Mr<Ir+1;Mr++){this.pdf.setPage(Mr);var Rr=Mr===1?this.posY+this.margin[0]:this.margin[0],Nr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ar=this.pdf.internal.pageSize.height-this.margin[2],Sr=Ar-this.margin[0],br=this.pdf.internal.pageSize.width-this.margin[1],Br=br-this.margin[3],Hr=Mr===1?0:Nr+(Mr-2)*Sr;if(this.ctx.clip_path.length!==0){var qr=this.path;vr=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=ri(vr,this.posX+this.margin[3],-1*Hr+Rr),li.call(this,"fill",!0),this.path=qr}var Xr=ri([JSON.parse(JSON.stringify(fr))],this.posX+this.margin[3],-Hr+Rr+this.ctx.prevPageLastElemOffset)[0];Li.scale>=.01&&(Fr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fr*Li.scale),zr=this.lineWidth,this.lineWidth=zr*Li.scale);var cs=this.autoPaging!=="text";if(cs||Xr.y+Xr.h<=Ar){if(cs||Xr.y>=Rr&&Xr.x<=br){var Qr=cs?Li.text:this.pdf.splitTextToSize(Li.text,Li.maxWidth||br-Xr.x)[0],bs=ri([JSON.parse(JSON.stringify(tr))],this.posX+this.margin[3],-Hr+Rr+this.ctx.prevPageLastElemOffset)[0],vs=cs&&(Mr>kr||Mr<Ir)&&ei.call(this);vs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Br,Sr,null).clip().discardPath()),this.pdf.text(Qr,bs.x,bs.y,{angle:Li.angle,align:er,renderingMode:Li.renderingMode}),vs&&this.pdf.restoreGraphicsState()}}else Xr.y<Ar&&(this.ctx.prevPageLastElemOffset+=Ar-Xr.y);Li.scale>=.01&&(this.pdf.setFontSize(Fr),this.lineWidth=zr)}else Li.scale>=.01&&(Fr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Fr*Li.scale),zr=this.lineWidth,this.lineWidth=zr*Li.scale),this.pdf.text(Li.text,dr.x+this.posX,dr.y+this.posY,{angle:Li.angle,align:er,renderingMode:Li.renderingMode,maxWidth:Li.maxWidth}),Li.scale>=.01&&(this.pdf.setFontSize(Fr),this.lineWidth=zr)},Mi=function(Li,er,hr,mr){hr=hr||0,mr=mr||0,this.pdf.internal.out(Te(Li+hr)+" "+ke(er+mr)+" l")},Oi=function(Li,er,hr){return this.pdf.lines(Li,er,hr,null,null)},Hi=function(Li,er,hr,mr,_r,dr,cr,gr){this.pdf.internal.out([e(Be(hr+Li)),e(Ue(mr+er)),e(Be(_r+Li)),e(Ue(dr+er)),e(Be(cr+Li)),e(Ue(gr+er)),"c"].join(" "))},Ki=function(Li,er,hr,mr){for(var _r=2*Math.PI,dr=Math.PI/2;er>hr;)er-=_r;var cr=Math.abs(hr-er);cr<_r&&mr&&(cr=_r-cr);for(var gr=[],vr=mr?-1:1,Fr=er;cr>1e-5;){var zr=Fr+vr*Math.min(cr,dr);gr.push(or.call(this,Li,Fr,zr)),cr-=Math.abs(zr-Fr),Fr=zr}return gr},or=function(Li,er,hr){var mr=(hr-er)/2,_r=Li*Math.cos(mr),dr=Li*Math.sin(mr),cr=_r,gr=-dr,vr=cr*cr+gr*gr,Fr=vr+cr*_r+gr*dr,zr=4/3*(Math.sqrt(2*vr*Fr)-Fr)/(cr*dr-gr*_r),tr=cr-zr*gr,fr=gr+zr*cr,ar=tr,nr=-fr,Dr=mr+er,kr=Math.cos(Dr),Ir=Math.sin(Dr);return{x1:Li*Math.cos(er),y1:Li*Math.sin(er),x2:tr*kr-fr*Ir,y2:tr*Ir+fr*kr,x3:ar*kr-nr*Ir,y3:ar*Ir+nr*kr,x4:Li*Math.cos(hr),y4:Li*Math.sin(hr)}},sr=function(Li){return 180*Li/Math.PI},Cr=function(Li,er,hr,mr,_r,dr){var cr=Li+.5*(hr-Li),gr=er+.5*(mr-er),vr=_r+.5*(hr-_r),Fr=dr+.5*(mr-dr),zr=Math.min(Li,_r,cr,vr),tr=Math.max(Li,_r,cr,vr),fr=Math.min(er,dr,gr,Fr),ar=Math.max(er,dr,gr,Fr);return new We(zr,fr,tr-zr,ar-fr)},pr=function(Li,er,hr,mr,_r,dr,cr,gr){var vr,Fr,zr,tr,fr,ar,nr,Dr,kr,Ir,Mr,Rr,Nr,Ar,Sr=hr-Li,br=mr-er,Br=_r-hr,Hr=dr-mr,qr=cr-_r,Xr=gr-dr;for(Fr=0;Fr<41;Fr++)kr=(nr=(zr=Li+(vr=Fr/40)*Sr)+vr*((fr=hr+vr*Br)-zr))+vr*(fr+vr*(_r+vr*qr-fr)-nr),Ir=(Dr=(tr=er+vr*br)+vr*((ar=mr+vr*Hr)-tr))+vr*(ar+vr*(dr+vr*Xr-ar)-Dr),Fr==0?(Mr=kr,Rr=Ir,Nr=kr,Ar=Ir):(Mr=Math.min(Mr,kr),Rr=Math.min(Rr,Ir),Nr=Math.max(Nr,kr),Ar=Math.max(Ar,Ir));return new We(Math.round(Mr),Math.round(Rr),Math.round(Nr-Mr),Math.round(Ar-Rr))},wr=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var Li,er,hr=(Li=this.ctx.lineDash,er=this.ctx.lineDashOffset,JSON.stringify({lineDash:Li,lineDashOffset:er}));this.prevLineDash!==hr&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=hr)}}})(E.API),function(Oe){var e=function(Ue){var He,We,Cn,En,An,Sn,Tn,Ln,Bn,ei;for(We=[],Cn=0,En=(Ue+=He="\0\0\0\0".slice(Ue.length%4||4)).length;En>Cn;Cn+=4)(An=(Ue.charCodeAt(Cn)<<24)+(Ue.charCodeAt(Cn+1)<<16)+(Ue.charCodeAt(Cn+2)<<8)+Ue.charCodeAt(Cn+3))!==0?(Sn=(An=((An=((An=((An=(An-(ei=An%85))/85)-(Bn=An%85))/85)-(Ln=An%85))/85)-(Tn=An%85))/85)%85,We.push(Sn+33,Tn+33,Ln+33,Bn+33,ei+33)):We.push(122);return function(ti,ni){for(var ri=ni;ri>0;ri--)ti.pop()}(We,He.length),String.fromCharCode.apply(String,We)+"~>"},Te=function(Ue){var He,We,Cn,En,An,Sn=String,Tn="length",Ln=255,Bn="charCodeAt",ei="slice",ti="replace";for(Ue[ei](-2),Ue=Ue[ei](0,-2)[ti](/\s/g,"")[ti]("z","!!!!!"),Cn=[],En=0,An=(Ue+=He="uuuuu"[ei](Ue[Tn]%5||5))[Tn];An>En;En+=5)We=52200625*(Ue[Bn](En)-33)+614125*(Ue[Bn](En+1)-33)+7225*(Ue[Bn](En+2)-33)+85*(Ue[Bn](En+3)-33)+(Ue[Bn](En+4)-33),Cn.push(Ln&We>>24,Ln&We>>16,Ln&We>>8,Ln&We);return function(ni,ri){for(var si=ri;si>0;si--)ni.pop()}(Cn,He[Tn]),Sn.fromCharCode.apply(Sn,Cn)},ke=function(Ue){var He=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Ue=Ue.replace(/\s/g,"")).indexOf(">")!==-1&&(Ue=Ue.substr(0,Ue.indexOf(">"))),Ue.length%2&&(Ue+="0"),He.test(Ue)===!1)return"";for(var We="",Cn=0;Cn<Ue.length;Cn+=2)We+=String.fromCharCode("0x"+(Ue[Cn]+Ue[Cn+1]));return We},Be=function(Ue){for(var He=new Uint8Array(Ue.length),We=Ue.length;We--;)He[We]=Ue.charCodeAt(We);return Ue=(He=zlibSync(He)).reduce(function(Cn,En){return Cn+String.fromCharCode(En)},"")};Oe.processDataByFilters=function(Ue,He){var We=0,Cn=Ue||"",En=[];for(typeof(He=He||[])=="string"&&(He=[He]),We=0;We<He.length;We+=1)switch(He[We]){case"ASCII85Decode":case"/ASCII85Decode":Cn=Te(Cn),En.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Cn=e(Cn),En.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Cn=ke(Cn),En.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Cn=Cn.split("").map(function(An){return("0"+An.charCodeAt().toString(16)).slice(-2)}).join("")+">",En.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Cn=Be(Cn),En.push("/FlateDecode");break;default:throw new Error('The filter: "'+He[We]+'" is not implemented')}return{data:Cn,reverseChain:En.reverse().join(" ")}}}(E.API),function(Oe){Oe.loadFile=function(e,Te,ke){return function(Be,Ue,He){Ue=Ue!==!1,He=typeof He=="function"?He:function(){};var We=void 0;try{We=function(Cn,En,An){var Sn=new XMLHttpRequest,Tn=0,Ln=function(Bn){var ei=Bn.length,ti=[],ni=String.fromCharCode;for(Tn=0;Tn<ei;Tn+=1)ti.push(ni(255&Bn.charCodeAt(Tn)));return ti.join("")};if(Sn.open("GET",Cn,!En),Sn.overrideMimeType("text/plain; charset=x-user-defined"),En===!1&&(Sn.onload=function(){Sn.status===200?An(Ln(this.responseText)):An(void 0)}),Sn.send(null),En&&Sn.status===200)return Ln(Sn.responseText)}(Be,Ue,He)}catch{}return We}(e,Te,ke)},Oe.loadImageFile=Oe.loadFile}(E.API),function(Oe){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(He){return Promise.reject(new Error("Could not load html2canvas: "+He))}).then(function(He){return He.default?He.default:He})}function Te(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-Bf0oSh3b.js"),[])).catch(function(He){return Promise.reject(new Error("Could not load dompurify: "+He))}).then(function(He){return He.default?He.default:He})}var ke=function(He){var We=_typeof(He);return We==="undefined"?"undefined":We==="string"||He instanceof String?"string":We==="number"||He instanceof Number?"number":We==="function"||He instanceof Function?"function":He&&He.constructor===Array?"array":He&&He.nodeType===1?"element":We==="object"?"object":"unknown"},Be=function(He,We){var Cn=document.createElement(He);for(var En in We.className&&(Cn.className=We.className),We.innerHTML&&We.dompurify&&(Cn.innerHTML=We.dompurify.sanitize(We.innerHTML)),We.style)Cn.style[En]=We.style[En];return Cn},Ue=function He(We){var Cn=Object.assign(He.convert(Promise.resolve()),JSON.parse(JSON.stringify(He.template))),En=He.convert(Promise.resolve(),Cn);return En=(En=En.setProgress(1,He,1,[He])).set(We)};(Ue.prototype=Object.create(Promise.prototype)).constructor=Ue,Ue.convert=function(He,We){return He.__proto__=We||Ue.prototype,He},Ue.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Ue.prototype.from=function(He,We){return this.then(function(){switch(We=We||function(Cn){switch(ke(Cn)){case"string":return"string";case"element":return Cn.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(He)){case"string":return this.then(Te).then(function(Cn){return this.set({src:Be("div",{innerHTML:He,dompurify:Cn})})});case"element":return this.set({src:He});case"canvas":return this.set({canvas:He});case"img":return this.set({img:He});default:return this.error("Unknown source type.")}})},Ue.prototype.to=function(He){switch(He){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Ue.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var He={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},We=function Cn(En,An){for(var Sn=En.nodeType===3?document.createTextNode(En.nodeValue):En.cloneNode(!1),Tn=En.firstChild;Tn;Tn=Tn.nextSibling)An!==!0&&Tn.nodeType===1&&Tn.nodeName==="SCRIPT"||Sn.appendChild(Cn(Tn,An));return En.nodeType===1&&(En.nodeName==="CANVAS"?(Sn.width=En.width,Sn.height=En.height,Sn.getContext("2d").drawImage(En,0,0)):En.nodeName!=="TEXTAREA"&&En.nodeName!=="SELECT"||(Sn.value=En.value),Sn.addEventListener("load",function(){Sn.scrollTop=En.scrollTop,Sn.scrollLeft=En.scrollLeft},!0)),Sn}(this.prop.src,this.opt.html2canvas.javascriptEnabled);We.tagName==="BODY"&&(He.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Be("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Be("div",{className:"html2pdf__container",style:He}),this.prop.container.appendChild(We),this.prop.container.firstChild.appendChild(Be("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Ue.prototype.toCanvas=function(){var He=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(He).then(e).then(function(We){var Cn=Object.assign({},this.opt.html2canvas);return delete Cn.onrendered,We(this.prop.container,Cn)}).then(function(We){(this.opt.html2canvas.onrendered||function(){})(We),this.prop.canvas=We,document.body.removeChild(this.prop.overlay)})},Ue.prototype.toContext2d=function(){var He=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(He).then(e).then(function(We){var Cn=this.opt.jsPDF,En=this.opt.fontFaces,An=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,Sn=Object.assign({async:!0,allowTaint:!0,scale:An,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete Sn.onrendered,Cn.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Cn.context2d.posX=this.opt.x,Cn.context2d.posY=this.opt.y,Cn.context2d.margin=this.opt.margin,Cn.context2d.fontFaces=En,En)for(var Tn=0;Tn<En.length;++Tn){var Ln=En[Tn],Bn=Ln.src.find(function(ei){return ei.format==="truetype"});Bn&&Cn.addFont(Bn.url,Ln.ref.name,Ln.ref.style)}return Sn.windowHeight=Sn.windowHeight||0,Sn.windowHeight=Sn.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):Sn.windowHeight,Cn.context2d.save(!0),We(this.prop.container,Sn)}).then(function(We){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(We),this.prop.canvas=We,document.body.removeChild(this.prop.overlay)})},Ue.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var He=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=He})},Ue.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Ue.prototype.output=function(He,We,Cn){return(Cn=Cn||"pdf").toLowerCase()==="img"||Cn.toLowerCase()==="image"?this.outputImg(He,We):this.outputPdf(He,We)},Ue.prototype.outputPdf=function(He,We){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(He,We)})},Ue.prototype.outputImg=function(He){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(He){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+He+'" is not supported.'}})},Ue.prototype.save=function(He){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(He?{filename:He}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Ue.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Ue.prototype.set=function(He){if(ke(He)!=="object")return this;var We=Object.keys(He||{}).map(function(Cn){if(Cn in Ue.template.prop)return function(){this.prop[Cn]=He[Cn]};switch(Cn){case"margin":return this.setMargin.bind(this,He.margin);case"jsPDF":return function(){return this.opt.jsPDF=He.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,He.pageSize);default:return function(){this.opt[Cn]=He[Cn]}}},this);return this.then(function(){return this.thenList(We)})},Ue.prototype.get=function(He,We){return this.then(function(){var Cn=He in Ue.template.prop?this.prop[He]:this.opt[He];return We?We(Cn):Cn})},Ue.prototype.setMargin=function(He){return this.then(function(){switch(ke(He)){case"number":He=[He,He,He,He];case"array":if(He.length===2&&(He=[He[0],He[1],He[0],He[1]]),He.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=He}).then(this.setPageSize)},Ue.prototype.setPageSize=function(He){function We(Cn,En){return Math.floor(Cn*En/72*96)}return this.then(function(){(He=He||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(He.inner={width:He.width-this.opt.margin[1]-this.opt.margin[3],height:He.height-this.opt.margin[0]-this.opt.margin[2]},He.inner.px={width:We(He.inner.width,He.k),height:We(He.inner.height,He.k)},He.inner.ratio=He.inner.height/He.inner.width),this.prop.pageSize=He})},Ue.prototype.setProgress=function(He,We,Cn,En){return He!=null&&(this.progress.val=He),We!=null&&(this.progress.state=We),Cn!=null&&(this.progress.n=Cn),En!=null&&(this.progress.stack=En),this.progress.ratio=this.progress.val/this.progress.state,this},Ue.prototype.updateProgress=function(He,We,Cn,En){return this.setProgress(He?this.progress.val+He:null,We||null,Cn?this.progress.n+Cn:null,En?this.progress.stack.concat(En):null)},Ue.prototype.then=function(He,We){var Cn=this;return this.thenCore(He,We,function(En,An){return Cn.updateProgress(null,null,1,[En]),Promise.prototype.then.call(this,function(Sn){return Cn.updateProgress(null,En),Sn}).then(En,An).then(function(Sn){return Cn.updateProgress(1),Sn})})},Ue.prototype.thenCore=function(He,We,Cn){Cn=Cn||Promise.prototype.then,He&&(He=He.bind(this)),We&&(We=We.bind(this));var En=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Ue.convert(Object.assign({},this),Promise.prototype),An=Cn.call(En,He,We);return Ue.convert(An,this.__proto__)},Ue.prototype.thenExternal=function(He,We){return Promise.prototype.then.call(this,He,We)},Ue.prototype.thenList=function(He){var We=this;return He.forEach(function(Cn){We=We.thenCore(Cn)}),We},Ue.prototype.catch=function(He){He&&(He=He.bind(this));var We=Promise.prototype.catch.call(this,He);return Ue.convert(We,this)},Ue.prototype.catchExternal=function(He){return Promise.prototype.catch.call(this,He)},Ue.prototype.error=function(He){return this.then(function(){throw new Error(He)})},Ue.prototype.using=Ue.prototype.set,Ue.prototype.saveAs=Ue.prototype.save,Ue.prototype.export=Ue.prototype.output,Ue.prototype.run=Ue.prototype.then,E.getPageSize=function(He,We,Cn){if(_typeof(He)==="object"){var En=He;He=En.orientation,We=En.unit||We,Cn=En.format||Cn}We=We||"mm",Cn=Cn||"a4",He=(""+(He||"P")).toLowerCase();var An,Sn=(""+Cn).toLowerCase(),Tn={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(We){case"pt":An=1;break;case"mm":An=72/25.4;break;case"cm":An=72/2.54;break;case"in":An=72;break;case"px":An=.75;break;case"pc":case"em":An=12;break;case"ex":An=6;break;default:throw"Invalid unit: "+We}var Ln,Bn=0,ei=0;if(Tn.hasOwnProperty(Sn))Bn=Tn[Sn][1]/An,ei=Tn[Sn][0]/An;else try{Bn=Cn[1],ei=Cn[0]}catch{throw new Error("Invalid format: "+Cn)}if(He==="p"||He==="portrait")He="p",ei>Bn&&(Ln=ei,ei=Bn,Bn=Ln);else{if(He!=="l"&&He!=="landscape")throw"Invalid orientation: "+He;He="l",Bn>ei&&(Ln=ei,ei=Bn,Bn=Ln)}return{width:ei,height:Bn,unit:We,k:An,orientation:He}},Oe.html=function(He,We){(We=We||{}).callback=We.callback||function(){},We.html2canvas=We.html2canvas||{},We.html2canvas.canvas=We.html2canvas.canvas||this.canvas,We.jsPDF=We.jsPDF||this,We.fontFaces=We.fontFaces?We.fontFaces.map(jt):null;var Cn=new Ue(We);return We.worker?Cn:Cn.from(He).doCallback()}}(E.API),E.API.addJS=function(Oe){return Ht=Oe,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(Oe){var e;Oe.events.push(["postPutResources",function(){var Te=this,ke=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Be=Te.outline.render().split(/\r\n/),Ue=0;Ue<Be.length;Ue++){var He=Be[Ue],We=ke.exec(He);if(We!=null){var Cn=We[1];Te.internal.newObjectDeferredBegin(Cn,!1)}Te.internal.write(He)}if(this.outline.createNamedDestinations){var En=this.internal.pages.length,An=[];for(Ue=0;Ue<En;Ue++){var Sn=Te.internal.newObject();An.push(Sn);var Tn=Te.internal.getPageInfo(Ue+1);Te.internal.write("<< /D["+Tn.objId+" 0 R /XYZ null null null]>> endobj")}var Ln=Te.internal.newObject();for(Te.internal.write("<< /Names [ "),Ue=0;Ue<An.length;Ue++)Te.internal.write("(page_"+(Ue+1)+")"+An[Ue]+" 0 R");Te.internal.write(" ] >>","endobj"),e=Te.internal.newObject(),Te.internal.write("<< /Dests "+Ln+" 0 R"),Te.internal.write(">>","endobj")}}]),Oe.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),Oe.events.push(["initialized",function(){var Te=this;Te.outline={createNamedDestinations:!1,root:{children:[]}},Te.outline.add=function(ke,Be,Ue){var He={title:Be,options:Ue,children:[]};return ke==null&&(ke=this.root),ke.children.push(He),He},Te.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=Te,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},Te.outline.genIds_r=function(ke){ke.id=Te.internal.newObjectDeferred();for(var Be=0;Be<ke.children.length;Be++)this.genIds_r(ke.children[Be])},Te.outline.renderRoot=function(ke){this.objStart(ke),this.line("/Type /Outlines"),ke.children.length>0&&(this.line("/First "+this.makeRef(ke.children[0])),this.line("/Last "+this.makeRef(ke.children[ke.children.length-1]))),this.line("/Count "+this.count_r({count:0},ke)),this.objEnd()},Te.outline.renderItems=function(ke){for(var Be=this.ctx.pdf.internal.getVerticalCoordinateString,Ue=0;Ue<ke.children.length;Ue++){var He=ke.children[Ue];this.objStart(He),this.line("/Title "+this.makeString(He.title)),this.line("/Parent "+this.makeRef(ke)),Ue>0&&this.line("/Prev "+this.makeRef(ke.children[Ue-1])),Ue<ke.children.length-1&&this.line("/Next "+this.makeRef(ke.children[Ue+1])),He.children.length>0&&(this.line("/First "+this.makeRef(He.children[0])),this.line("/Last "+this.makeRef(He.children[He.children.length-1])));var We=this.count=this.count_r({count:0},He);if(We>0&&this.line("/Count "+We),He.options&&He.options.pageNumber){var Cn=Te.internal.getPageInfo(He.options.pageNumber);this.line("/Dest ["+Cn.objId+" 0 R /XYZ 0 "+Be(0)+" 0]")}this.objEnd()}for(var En=0;En<ke.children.length;En++)this.renderItems(ke.children[En])},Te.outline.line=function(ke){this.ctx.val+=ke+`\r
`},Te.outline.makeRef=function(ke){return ke.id+" 0 R"},Te.outline.makeString=function(ke){return"("+Te.internal.pdfEscape(ke)+")"},Te.outline.objStart=function(ke){this.ctx.val+=`\r
`+ke.id+` 0 obj\r
<<\r
`},Te.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},Te.outline.count_r=function(ke,Be){for(var Ue=0;Ue<Be.children.length;Ue++)ke.count++,this.count_r(ke,Be.children[Ue]);return ke.count}}])}(E.API),function(Oe){var e=[192,193,194,195,196,197,198,199];Oe.processJPEG=function(Te,ke,Be,Ue,He,We){var Cn,En=this.decode.DCT_DECODE,An=null;if(typeof Te=="string"||this.__addimage__.isArrayBuffer(Te)||this.__addimage__.isArrayBufferView(Te)){switch(Te=He||Te,Te=this.__addimage__.isArrayBuffer(Te)?new Uint8Array(Te):Te,(Cn=function(Sn){for(var Tn,Ln=256*Sn.charCodeAt(4)+Sn.charCodeAt(5),Bn=Sn.length,ei={width:0,height:0,numcomponents:1},ti=4;ti<Bn;ti+=2){if(ti+=Ln,e.indexOf(Sn.charCodeAt(ti+1))!==-1){Tn=256*Sn.charCodeAt(ti+5)+Sn.charCodeAt(ti+6),ei={width:256*Sn.charCodeAt(ti+7)+Sn.charCodeAt(ti+8),height:Tn,numcomponents:Sn.charCodeAt(ti+9)};break}Ln=256*Sn.charCodeAt(ti+2)+Sn.charCodeAt(ti+3)}return ei}(Te=this.__addimage__.isArrayBufferView(Te)?this.__addimage__.arrayBufferToBinaryString(Te):Te)).numcomponents){case 1:We=this.color_spaces.DEVICE_GRAY;break;case 4:We=this.color_spaces.DEVICE_CMYK;break;case 3:We=this.color_spaces.DEVICE_RGB}An={data:Te,width:Cn.width,height:Cn.height,colorSpace:We,bitsPerComponent:8,filter:En,index:ke,alias:Be}}return An}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var Oe,e,Te;function ke(Ue){var He,We,Cn,En,An,Sn,Tn,Ln,Bn,ei,ti,ni,ri,si;for(this.data=Ue,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},Sn=null;;){switch(He=this.readUInt32(),Bn=(function(){var ai,li;for(li=[],ai=0;ai<4;++ai)li.push(String.fromCharCode(this.data[this.pos++]));return li}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(He);break;case"fcTL":Sn&&this.animation.frames.push(Sn),this.pos+=4,Sn={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},An=this.readUInt16(),En=this.readUInt16()||100,Sn.delay=1e3*An/En,Sn.disposeOp=this.data[this.pos++],Sn.blendOp=this.data[this.pos++],Sn.data=[];break;case"IDAT":case"fdAT":for(Bn==="fdAT"&&(this.pos+=4,He-=4),Ue=(Sn!=null?Sn.data:void 0)||this.imgData,ni=0;0<=He?ni<He:ni>He;0<=He?++ni:--ni)Ue.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Cn=this.palette.length/3,this.transparency.indexed=this.read(He),this.transparency.indexed.length>Cn)throw new Error("More transparent colors than palette size");if((ei=Cn-this.transparency.indexed.length)>0)for(ri=0;0<=ei?ri<ei:ri>ei;0<=ei?++ri:--ri)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(He)[0];break;case 2:this.transparency.rgb=this.read(He)}break;case"tEXt":Tn=(ti=this.read(He)).indexOf(0),Ln=String.fromCharCode.apply(String,ti.slice(0,Tn)),this.text[Ln]=String.fromCharCode.apply(String,ti.slice(Tn+1));break;case"IEND":return Sn&&this.animation.frames.push(Sn),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(si=this.colorType)===4||si===6,We=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*We,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=He}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}ke.prototype.read=function(Ue){var He,We;for(We=[],He=0;0<=Ue?He<Ue:He>Ue;0<=Ue?++He:--He)We.push(this.data[this.pos++]);return We},ke.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},ke.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},ke.prototype.decodePixels=function(Ue){var He=this.pixelBitlength/8,We=new Uint8Array(this.width*this.height*He),Cn=0,En=this;if(Ue==null&&(Ue=this.imgData),Ue.length===0)return new Uint8Array(0);function An(Sn,Tn,Ln,Bn){var ei,ti,ni,ri,si,ai,li,Pi,pi,vi,Ri,Fi,di,ci,Mi,Oi,Hi,Ki,or,sr,Cr,pr=Math.ceil((En.width-Sn)/Ln),wr=Math.ceil((En.height-Tn)/Bn),Li=En.width==pr&&En.height==wr;for(ci=He*pr,Fi=Li?We:new Uint8Array(ci*wr),ai=Ue.length,di=0,ti=0;di<wr&&Cn<ai;){switch(Ue[Cn++]){case 0:for(ri=Hi=0;Hi<ci;ri=Hi+=1)Fi[ti++]=Ue[Cn++];break;case 1:for(ri=Ki=0;Ki<ci;ri=Ki+=1)ei=Ue[Cn++],si=ri<He?0:Fi[ti-He],Fi[ti++]=(ei+si)%256;break;case 2:for(ri=or=0;or<ci;ri=or+=1)ei=Ue[Cn++],ni=(ri-ri%He)/He,Mi=di&&Fi[(di-1)*ci+ni*He+ri%He],Fi[ti++]=(Mi+ei)%256;break;case 3:for(ri=sr=0;sr<ci;ri=sr+=1)ei=Ue[Cn++],ni=(ri-ri%He)/He,si=ri<He?0:Fi[ti-He],Mi=di&&Fi[(di-1)*ci+ni*He+ri%He],Fi[ti++]=(ei+Math.floor((si+Mi)/2))%256;break;case 4:for(ri=Cr=0;Cr<ci;ri=Cr+=1)ei=Ue[Cn++],ni=(ri-ri%He)/He,si=ri<He?0:Fi[ti-He],di===0?Mi=Oi=0:(Mi=Fi[(di-1)*ci+ni*He+ri%He],Oi=ni&&Fi[(di-1)*ci+(ni-1)*He+ri%He]),li=si+Mi-Oi,Pi=Math.abs(li-si),vi=Math.abs(li-Mi),Ri=Math.abs(li-Oi),pi=Pi<=vi&&Pi<=Ri?si:vi<=Ri?Mi:Oi,Fi[ti++]=(ei+pi)%256;break;default:throw new Error("Invalid filter algorithm: "+Ue[Cn-1])}if(!Li){var er=((Tn+di*Bn)*En.width+Sn)*He,hr=di*ci;for(ri=0;ri<pr;ri+=1){for(var mr=0;mr<He;mr+=1)We[er++]=Fi[hr++];er+=(Ln-1)*He}}di++}}return Ue=unzlibSync(Ue),En.interlaceMethod==1?(An(0,0,8,8),An(4,0,8,8),An(0,4,4,8),An(2,0,4,4),An(0,2,2,4),An(1,0,2,2),An(0,1,1,2)):An(0,0,1,1),We},ke.prototype.decodePalette=function(){var Ue,He,We,Cn,En,An,Sn,Tn,Ln;for(We=this.palette,An=this.transparency.indexed||[],En=new Uint8Array((An.length||0)+We.length),Cn=0,Ue=0,He=Sn=0,Tn=We.length;Sn<Tn;He=Sn+=3)En[Cn++]=We[He],En[Cn++]=We[He+1],En[Cn++]=We[He+2],En[Cn++]=(Ln=An[Ue++])!=null?Ln:255;return En},ke.prototype.copyToImageData=function(Ue,He){var We,Cn,En,An,Sn,Tn,Ln,Bn,ei,ti,ni;if(Cn=this.colors,ei=null,We=this.hasAlphaChannel,this.palette.length&&(ei=(ni=this._decodedPalette)!=null?ni:this._decodedPalette=this.decodePalette(),Cn=4,We=!0),Bn=(En=Ue.data||Ue).length,Sn=ei||He,An=Tn=0,Cn===1)for(;An<Bn;)Ln=ei?4*He[An/4]:Tn,ti=Sn[Ln++],En[An++]=ti,En[An++]=ti,En[An++]=ti,En[An++]=We?Sn[Ln++]:255,Tn=Ln;else for(;An<Bn;)Ln=ei?4*He[An/4]:Tn,En[An++]=Sn[Ln++],En[An++]=Sn[Ln++],En[An++]=Sn[Ln++],En[An++]=We?Sn[Ln++]:255,Tn=Ln},ke.prototype.decode=function(){var Ue;return Ue=new Uint8Array(this.width*this.height*4),this.copyToImageData(Ue,this.decodePixels()),Ue};var Be=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),Te=e.getContext("2d")}catch{return!1}return!0}return!1};return Be(),Oe=function(Ue){var He;if(Be()===!0)return Te.width=Ue.width,Te.height=Ue.height,Te.clearRect(0,0,Ue.width,Ue.height),Te.putImageData(Ue,0,0),(He=new Image).src=e.toDataURL(),He;throw new Error("This method requires a Browser with Canvas-capability.")},ke.prototype.decodeFrames=function(Ue){var He,We,Cn,En,An,Sn,Tn,Ln;if(this.animation){for(Ln=[],We=An=0,Sn=(Tn=this.animation.frames).length;An<Sn;We=++An)He=Tn[We],Cn=Ue.createImageData(He.width,He.height),En=this.decodePixels(new Uint8Array(He.data)),this.copyToImageData(Cn,En),He.imageData=Cn,Ln.push(He.image=Oe(Cn));return Ln}},ke.prototype.renderFrame=function(Ue,He){var We,Cn,En;return We=(Cn=this.animation.frames)[He],En=Cn[He-1],He===0&&Ue.clearRect(0,0,this.width,this.height),(En!=null?En.disposeOp:void 0)===1?Ue.clearRect(En.xOffset,En.yOffset,En.width,En.height):(En!=null?En.disposeOp:void 0)===2&&Ue.putImageData(En.imageData,En.xOffset,En.yOffset),We.blendOp===0&&Ue.clearRect(We.xOffset,We.yOffset,We.width,We.height),Ue.drawImage(We.image,We.xOffset,We.yOffset)},ke.prototype.animate=function(Ue){var He,We,Cn,En,An,Sn,Tn=this;return We=0,Sn=this.animation,En=Sn.numFrames,Cn=Sn.frames,An=Sn.numPlays,(He=function(){var Ln,Bn;if(Ln=We++%En,Bn=Cn[Ln],Tn.renderFrame(Ue,Ln),En>1&&We/En<An)return Tn.animation._timeout=setTimeout(He,Bn.delay)})()},ke.prototype.stopAnimation=function(){var Ue;return clearTimeout((Ue=this.animation)!=null?Ue._timeout:void 0)},ke.prototype.render=function(Ue){var He,We;return Ue._png&&Ue._png.stopAnimation(),Ue._png=this,Ue.width=this.width,Ue.height=this.height,He=Ue.getContext("2d"),this.animation?(this.decodeFrames(He),this.animate(He)):(We=He.createImageData(this.width,this.height),this.copyToImageData(We,this.decodePixels()),He.putImageData(We,0,0))},ke}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(Oe){var e=0;if(Oe[e++]!==71||Oe[e++]!==73||Oe[e++]!==70||Oe[e++]!==56||(Oe[e++]+1&253)!=56||Oe[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var Te=Oe[e++]|Oe[e++]<<8,ke=Oe[e++]|Oe[e++]<<8,Be=Oe[e++],Ue=Be>>7,He=1<<(7&Be)+1;Oe[e++],Oe[e++];var We=null,Cn=null;Ue&&(We=e,Cn=He,e+=3*He);var En=!0,An=[],Sn=0,Tn=null,Ln=0,Bn=null;for(this.width=Te,this.height=ke;En&&e<Oe.length;)switch(Oe[e++]){case 33:switch(Oe[e++]){case 255:if(Oe[e]!==11||Oe[e+1]==78&&Oe[e+2]==69&&Oe[e+3]==84&&Oe[e+4]==83&&Oe[e+5]==67&&Oe[e+6]==65&&Oe[e+7]==80&&Oe[e+8]==69&&Oe[e+9]==50&&Oe[e+10]==46&&Oe[e+11]==48&&Oe[e+12]==3&&Oe[e+13]==1&&Oe[e+16]==0)e+=14,Bn=Oe[e++]|Oe[e++]<<8,e++;else for(e+=12;;){if(!((di=Oe[e++])>=0))throw Error("Invalid block size");if(di===0)break;e+=di}break;case 249:if(Oe[e++]!==4||Oe[e+4]!==0)throw new Error("Invalid graphics extension block.");var ei=Oe[e++];Sn=Oe[e++]|Oe[e++]<<8,Tn=Oe[e++],(1&ei)==0&&(Tn=null),Ln=ei>>2&7,e++;break;case 254:for(;;){if(!((di=Oe[e++])>=0))throw Error("Invalid block size");if(di===0)break;e+=di}break;default:throw new Error("Unknown graphic control label: 0x"+Oe[e-1].toString(16))}break;case 44:var ti=Oe[e++]|Oe[e++]<<8,ni=Oe[e++]|Oe[e++]<<8,ri=Oe[e++]|Oe[e++]<<8,si=Oe[e++]|Oe[e++]<<8,ai=Oe[e++],li=ai>>6&1,Pi=1<<(7&ai)+1,pi=We,vi=Cn,Ri=!1;ai>>7&&(Ri=!0,pi=e,vi=Pi,e+=3*Pi);var Fi=e;for(e++;;){var di;if(!((di=Oe[e++])>=0))throw Error("Invalid block size");if(di===0)break;e+=di}An.push({x:ti,y:ni,width:ri,height:si,has_local_palette:Ri,palette_offset:pi,palette_size:vi,data_offset:Fi,data_length:e-Fi,transparent_index:Tn,interlaced:!!li,delay:Sn,disposal:Ln});break;case 59:En=!1;break;default:throw new Error("Unknown gif block: 0x"+Oe[e-1].toString(16))}this.numFrames=function(){return An.length},this.loopCount=function(){return Bn},this.frameInfo=function(ci){if(ci<0||ci>=An.length)throw new Error("Frame index out of range.");return An[ci]},this.decodeAndBlitFrameBGRA=function(ci,Mi){var Oi=this.frameInfo(ci),Hi=Oi.width*Oi.height,Ki=new Uint8Array(Hi);$t(Oe,Oi.data_offset,Ki,Hi);var or=Oi.palette_offset,sr=Oi.transparent_index;sr===null&&(sr=256);var Cr=Oi.width,pr=Te-Cr,wr=Cr,Li=4*(Oi.y*Te+Oi.x),er=4*((Oi.y+Oi.height)*Te+Oi.x),hr=Li,mr=4*pr;Oi.interlaced===!0&&(mr+=4*Te*7);for(var _r=8,dr=0,cr=Ki.length;dr<cr;++dr){var gr=Ki[dr];if(wr===0&&(wr=Cr,(hr+=mr)>=er&&(mr=4*pr+4*Te*(_r-1),hr=Li+(Cr+pr)*(_r<<1),_r>>=1)),gr===sr)hr+=4;else{var vr=Oe[or+3*gr],Fr=Oe[or+3*gr+1],zr=Oe[or+3*gr+2];Mi[hr++]=zr,Mi[hr++]=Fr,Mi[hr++]=vr,Mi[hr++]=255}--wr}},this.decodeAndBlitFrameRGBA=function(ci,Mi){var Oi=this.frameInfo(ci),Hi=Oi.width*Oi.height,Ki=new Uint8Array(Hi);$t(Oe,Oi.data_offset,Ki,Hi);var or=Oi.palette_offset,sr=Oi.transparent_index;sr===null&&(sr=256);var Cr=Oi.width,pr=Te-Cr,wr=Cr,Li=4*(Oi.y*Te+Oi.x),er=4*((Oi.y+Oi.height)*Te+Oi.x),hr=Li,mr=4*pr;Oi.interlaced===!0&&(mr+=4*Te*7);for(var _r=8,dr=0,cr=Ki.length;dr<cr;++dr){var gr=Ki[dr];if(wr===0&&(wr=Cr,(hr+=mr)>=er&&(mr=4*pr+4*Te*(_r-1),hr=Li+(Cr+pr)*(_r<<1),_r>>=1)),gr===sr)hr+=4;else{var vr=Oe[or+3*gr],Fr=Oe[or+3*gr+1],zr=Oe[or+3*gr+2];Mi[hr++]=vr,Mi[hr++]=Fr,Mi[hr++]=zr,Mi[hr++]=255}--wr}}}function $t(Oe,e,Te,ke){for(var Be=Oe[e++],Ue=1<<Be,He=Ue+1,We=He+1,Cn=Be+1,En=(1<<Cn)-1,An=0,Sn=0,Tn=0,Ln=Oe[e++],Bn=new Int32Array(4096),ei=null;;){for(;An<16&&Ln!==0;)Sn|=Oe[e++]<<An,An+=8,Ln===1?Ln=Oe[e++]:--Ln;if(An<Cn)break;var ti=Sn&En;if(Sn>>=Cn,An-=Cn,ti!==Ue){if(ti===He)break;for(var ni=ti<We?ti:ei,ri=0,si=ni;si>Ue;)si=Bn[si]>>8,++ri;var ai=si;if(Tn+ri+(ni!==ti?1:0)>ke)return void a.log("Warning, gif stream longer than expected.");Te[Tn++]=ai;var li=Tn+=ri;for(ni!==ti&&(Te[Tn++]=ai),si=ni;ri--;)si=Bn[si],Te[--li]=255&si,si>>=8;ei!==null&&We<4096&&(Bn[We++]=ei<<8|ai,We>=En+1&&Cn<12&&(++Cn,En=En<<1|1)),ei=ti}else We=He+1,En=(1<<(Cn=Be+1))-1,ei=null}return Tn!==ke&&a.log("Warning, gif stream shorter than expected."),Te}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(Oe){var e,Te,ke,Be,Ue,He=Math.floor,We=new Array(64),Cn=new Array(64),En=new Array(64),An=new Array(64),Sn=new Array(65535),Tn=new Array(65535),Ln=new Array(64),Bn=new Array(64),ei=[],ti=0,ni=7,ri=new Array(64),si=new Array(64),ai=new Array(64),li=new Array(256),Pi=new Array(2048),pi=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],vi=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Ri=[0,1,2,3,4,5,6,7,8,9,10,11],Fi=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],di=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ci=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Mi=[0,1,2,3,4,5,6,7,8,9,10,11],Oi=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Hi=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ki(Li,er){for(var hr=0,mr=0,_r=new Array,dr=1;dr<=16;dr++){for(var cr=1;cr<=Li[dr];cr++)_r[er[mr]]=[],_r[er[mr]][0]=hr,_r[er[mr]][1]=dr,mr++,hr++;hr*=2}return _r}function or(Li){for(var er=Li[0],hr=Li[1]-1;hr>=0;)er&1<<hr&&(ti|=1<<ni),hr--,--ni<0&&(ti==255?(sr(255),sr(0)):sr(ti),ni=7,ti=0)}function sr(Li){ei.push(Li)}function Cr(Li){sr(Li>>8&255),sr(255&Li)}function pr(Li,er,hr,mr,_r){for(var dr,cr=_r[0],gr=_r[240],vr=function(Ir,Mr){var Rr,Nr,Ar,Sr,br,Br,Hr,qr,Xr,cs,Qr=0;for(Xr=0;Xr<8;++Xr){Rr=Ir[Qr],Nr=Ir[Qr+1],Ar=Ir[Qr+2],Sr=Ir[Qr+3],br=Ir[Qr+4],Br=Ir[Qr+5],Hr=Ir[Qr+6];var bs=Rr+(qr=Ir[Qr+7]),vs=Rr-qr,Ms=Nr+Hr,Ls=Nr-Hr,ps=Ar+Br,ws=Ar-Br,As=Sr+br,Ds=Sr-br,xs=bs+As,Xs=bs-As,_o=Ms+ps,Fs=Ms-ps;Ir[Qr]=xs+_o,Ir[Qr+4]=xs-_o;var Ss=.707106781*(Fs+Xs);Ir[Qr+2]=Xs+Ss,Ir[Qr+6]=Xs-Ss;var Is=.382683433*((xs=Ds+ws)-(Fs=Ls+vs)),oa=.5411961*xs+Is,qs=1.306562965*Fs+Is,Eo=.707106781*(_o=ws+Ls),Rs=vs+Eo,Es=vs-Eo;Ir[Qr+5]=Es+oa,Ir[Qr+3]=Es-oa,Ir[Qr+1]=Rs+qs,Ir[Qr+7]=Rs-qs,Qr+=8}for(Qr=0,Xr=0;Xr<8;++Xr){Rr=Ir[Qr],Nr=Ir[Qr+8],Ar=Ir[Qr+16],Sr=Ir[Qr+24],br=Ir[Qr+32],Br=Ir[Qr+40],Hr=Ir[Qr+48];var bo=Rr+(qr=Ir[Qr+56]),Us=Rr-qr,zs=Nr+Hr,Ws=Nr-Hr,yo=Ar+Br,Co=Ar-Br,qa=Sr+br,ma=Sr-br,Pa=bo+qa,Fa=bo-qa,xa=zs+yo,aa=zs-yo;Ir[Qr]=Pa+xa,Ir[Qr+32]=Pa-xa;var la=.707106781*(aa+Fa);Ir[Qr+16]=Fa+la,Ir[Qr+48]=Fa-la;var nc=.382683433*((Pa=ma+Co)-(aa=Ws+Us)),Oc=.5411961*Pa+nc,qc=1.306562965*aa+nc,Wc=.707106781*(xa=Co+Ws),Yc=Us+Wc,Xc=Us-Wc;Ir[Qr+40]=Xc+Oc,Ir[Qr+24]=Xc-Oc,Ir[Qr+8]=Yc+qc,Ir[Qr+56]=Yc-qc,Qr++}for(Xr=0;Xr<64;++Xr)cs=Ir[Xr]*Mr[Xr],Ln[Xr]=cs>0?cs+.5|0:cs-.5|0;return Ln}(Li,er),Fr=0;Fr<64;++Fr)Bn[pi[Fr]]=vr[Fr];var zr=Bn[0]-hr;hr=Bn[0],zr==0?or(mr[0]):(or(mr[Tn[dr=32767+zr]]),or(Sn[dr]));for(var tr=63;tr>0&&Bn[tr]==0;)tr--;if(tr==0)return or(cr),hr;for(var fr,ar=1;ar<=tr;){for(var nr=ar;Bn[ar]==0&&ar<=tr;)++ar;var Dr=ar-nr;if(Dr>=16){fr=Dr>>4;for(var kr=1;kr<=fr;++kr)or(gr);Dr&=15}dr=32767+Bn[ar],or(_r[(Dr<<4)+Tn[dr]]),or(Sn[dr]),ar++}return tr!=63&&or(cr),hr}function wr(Li){Li=Math.min(Math.max(Li,1),100),Ue!=Li&&(function(er){for(var hr=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],mr=0;mr<64;mr++){var _r=He((hr[mr]*er+50)/100);_r=Math.min(Math.max(_r,1),255),We[pi[mr]]=_r}for(var dr=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],cr=0;cr<64;cr++){var gr=He((dr[cr]*er+50)/100);gr=Math.min(Math.max(gr,1),255),Cn[pi[cr]]=gr}for(var vr=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Fr=0,zr=0;zr<8;zr++)for(var tr=0;tr<8;tr++)En[Fr]=1/(We[pi[Fr]]*vr[zr]*vr[tr]*8),An[Fr]=1/(Cn[pi[Fr]]*vr[zr]*vr[tr]*8),Fr++}(Li<50?Math.floor(5e3/Li):Math.floor(200-2*Li)),Ue=Li)}this.encode=function(Li,er){er&&wr(er),ei=new Array,ti=0,ni=7,Cr(65496),Cr(65504),Cr(16),sr(74),sr(70),sr(73),sr(70),sr(0),sr(1),sr(1),sr(0),Cr(1),Cr(1),sr(0),sr(0),function(){Cr(65499),Cr(132),sr(0);for(var Nr=0;Nr<64;Nr++)sr(We[Nr]);sr(1);for(var Ar=0;Ar<64;Ar++)sr(Cn[Ar])}(),function(Nr,Ar){Cr(65472),Cr(17),sr(8),Cr(Ar),Cr(Nr),sr(3),sr(1),sr(17),sr(0),sr(2),sr(17),sr(1),sr(3),sr(17),sr(1)}(Li.width,Li.height),function(){Cr(65476),Cr(418),sr(0);for(var Nr=0;Nr<16;Nr++)sr(vi[Nr+1]);for(var Ar=0;Ar<=11;Ar++)sr(Ri[Ar]);sr(16);for(var Sr=0;Sr<16;Sr++)sr(Fi[Sr+1]);for(var br=0;br<=161;br++)sr(di[br]);sr(1);for(var Br=0;Br<16;Br++)sr(ci[Br+1]);for(var Hr=0;Hr<=11;Hr++)sr(Mi[Hr]);sr(17);for(var qr=0;qr<16;qr++)sr(Oi[qr+1]);for(var Xr=0;Xr<=161;Xr++)sr(Hi[Xr])}(),Cr(65498),Cr(12),sr(3),sr(1),sr(0),sr(2),sr(17),sr(3),sr(17),sr(0),sr(63),sr(0);var hr=0,mr=0,_r=0;ti=0,ni=7,this.encode.displayName="_encode_";for(var dr,cr,gr,vr,Fr,zr,tr,fr,ar,nr=Li.data,Dr=Li.width,kr=Li.height,Ir=4*Dr,Mr=0;Mr<kr;){for(dr=0;dr<Ir;){for(Fr=Ir*Mr+dr,tr=-1,fr=0,ar=0;ar<64;ar++)zr=Fr+(fr=ar>>3)*Ir+(tr=4*(7&ar)),Mr+fr>=kr&&(zr-=Ir*(Mr+1+fr-kr)),dr+tr>=Ir&&(zr-=dr+tr-Ir+4),cr=nr[zr++],gr=nr[zr++],vr=nr[zr++],ri[ar]=(Pi[cr]+Pi[gr+256>>0]+Pi[vr+512>>0]>>16)-128,si[ar]=(Pi[cr+768>>0]+Pi[gr+1024>>0]+Pi[vr+1280>>0]>>16)-128,ai[ar]=(Pi[cr+1280>>0]+Pi[gr+1536>>0]+Pi[vr+1792>>0]>>16)-128;hr=pr(ri,En,hr,e,ke),mr=pr(si,An,mr,Te,Be),_r=pr(ai,An,_r,Te,Be),dr+=32}Mr+=8}if(ni>=0){var Rr=[];Rr[1]=ni+1,Rr[0]=(1<<ni+1)-1,or(Rr)}return Cr(65497),new Uint8Array(ei)},Oe=Oe||50,function(){for(var Li=String.fromCharCode,er=0;er<256;er++)li[er]=Li(er)}(),e=Ki(vi,Ri),Te=Ki(ci,Mi),ke=Ki(Fi,di),Be=Ki(Oi,Hi),function(){for(var Li=1,er=2,hr=1;hr<=15;hr++){for(var mr=Li;mr<er;mr++)Tn[32767+mr]=hr,Sn[32767+mr]=[],Sn[32767+mr][1]=hr,Sn[32767+mr][0]=mr;for(var _r=-(er-1);_r<=-Li;_r++)Tn[32767+_r]=hr,Sn[32767+_r]=[],Sn[32767+_r][1]=hr,Sn[32767+_r][0]=er-1+_r;Li<<=1,er<<=1}}(),function(){for(var Li=0;Li<256;Li++)Pi[Li]=19595*Li,Pi[Li+256>>0]=38470*Li,Pi[Li+512>>0]=7471*Li+32768,Pi[Li+768>>0]=-11059*Li,Pi[Li+1024>>0]=-21709*Li,Pi[Li+1280>>0]=32768*Li+8421375,Pi[Li+1536>>0]=-27439*Li,Pi[Li+1792>>0]=-5329*Li}(),wr(Oe)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(Oe,e){if(this.pos=0,this.buffer=Oe,this.datav=new DataView(Oe.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(Oe){function e(vi){if(!vi)throw Error("assert :P")}function Te(vi,Ri,Fi){for(var di=0;4>di;di++)if(vi[Ri+di]!=Fi.charCodeAt(di))return!0;return!1}function ke(vi,Ri,Fi,di,ci){for(var Mi=0;Mi<ci;Mi++)vi[Ri+Mi]=Fi[di+Mi]}function Be(vi,Ri,Fi,di){for(var ci=0;ci<di;ci++)vi[Ri+ci]=Fi}function Ue(vi){return new Int32Array(vi)}function He(vi,Ri){for(var Fi=[],di=0;di<vi;di++)Fi.push(new Ri);return Fi}function We(vi,Ri){var Fi=[];return function di(ci,Mi,Oi){for(var Hi=Oi[Mi],Ki=0;Ki<Hi&&(ci.push(Oi.length>Mi+1?[]:new Ri),!(Oi.length<Mi+1));Ki++)di(ci[Ki],Mi+1,Oi)}(Fi,0,vi),Fi}var Cn=function(){var vi=this;function Ri(ii,oi){for(var fi=1<<oi-1>>>0;ii&fi;)fi>>>=1;return fi?(ii&fi-1)+fi:ii}function Fi(ii,oi,fi,Ni,ji){e(!(Ni%fi));do ii[oi+(Ni-=fi)]=ji;while(0<Ni)}function di(ii,oi,fi,Ni,ji){if(e(2328>=ji),512>=ji)var ir=Ue(512);else if((ir=Ue(ji))==null)return 0;return function(rr,lr,ur,yr,Tr,Vr){var $r,Gr,rs=lr,Wr=1<<ur,Lr=Ue(16),Or=Ue(16);for(e(Tr!=0),e(yr!=null),e(rr!=null),e(0<ur),Gr=0;Gr<Tr;++Gr){if(15<yr[Gr])return 0;++Lr[yr[Gr]]}if(Lr[0]==Tr)return 0;for(Or[1]=0,$r=1;15>$r;++$r){if(Lr[$r]>1<<$r)return 0;Or[$r+1]=Or[$r]+Lr[$r]}for(Gr=0;Gr<Tr;++Gr)$r=yr[Gr],0<yr[Gr]&&(Vr[Or[$r]++]=Gr);if(Or[15]==1)return(yr=new ci).g=0,yr.value=Vr[0],Fi(rr,rs,1,Wr,yr),Wr;var es,ss=-1,ts=Wr-1,Cs=0,gs=1,Ts=1,ms=1<<ur;for(Gr=0,$r=1,Tr=2;$r<=ur;++$r,Tr<<=1){if(gs+=Ts<<=1,0>(Ts-=Lr[$r]))return 0;for(;0<Lr[$r];--Lr[$r])(yr=new ci).g=$r,yr.value=Vr[Gr++],Fi(rr,rs+Cs,Tr,ms,yr),Cs=Ri(Cs,$r)}for($r=ur+1,Tr=2;15>=$r;++$r,Tr<<=1){if(gs+=Ts<<=1,0>(Ts-=Lr[$r]))return 0;for(;0<Lr[$r];--Lr[$r]){if(yr=new ci,(Cs&ts)!=ss){for(rs+=ms,es=1<<(ss=$r)-ur;15>ss&&!(0>=(es-=Lr[ss]));)++ss,es<<=1;Wr+=ms=1<<(es=ss-ur),rr[lr+(ss=Cs&ts)].g=es+ur,rr[lr+ss].value=rs-lr-ss}yr.g=$r-ur,yr.value=Vr[Gr++],Fi(rr,rs+(Cs>>ur),Tr,ms,yr),Cs=Ri(Cs,$r)}}return gs!=2*Or[15]-1?0:Wr}(ii,oi,fi,Ni,ji,ir)}function ci(){this.value=this.g=0}function Mi(){this.value=this.g=0}function Oi(){this.G=He(5,ci),this.H=Ue(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=He(ca,Mi)}function Hi(ii,oi,fi,Ni){e(ii!=null),e(oi!=null),e(2147483648>Ni),ii.Ca=254,ii.I=0,ii.b=-8,ii.Ka=0,ii.oa=oi,ii.pa=fi,ii.Jd=oi,ii.Yc=fi+Ni,ii.Zc=4<=Ni?fi+Ni-4+1:fi,dr(ii)}function Ki(ii,oi){for(var fi=0;0<oi--;)fi|=gr(ii,128)<<oi;return fi}function or(ii,oi){var fi=Ki(ii,oi);return cr(ii)?-fi:fi}function sr(ii,oi,fi,Ni){var ji,ir=0;for(e(ii!=null),e(oi!=null),e(4294967288>Ni),ii.Sb=Ni,ii.Ra=0,ii.u=0,ii.h=0,4<Ni&&(Ni=4),ji=0;ji<Ni;++ji)ir+=oi[fi+ji]<<8*ji;ii.Ra=ir,ii.bb=Ni,ii.oa=oi,ii.pa=fi}function Cr(ii){for(;8<=ii.u&&ii.bb<ii.Sb;)ii.Ra>>>=8,ii.Ra+=ii.oa[ii.pa+ii.bb]<<hu-8>>>0,++ii.bb,ii.u-=8;hr(ii)&&(ii.h=1,ii.u=0)}function pr(ii,oi){if(e(0<=oi),!ii.h&&oi<=du){var fi=er(ii)&uu[oi];return ii.u+=oi,Cr(ii),fi}return ii.h=1,ii.u=0}function wr(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function Li(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function er(ii){return ii.Ra>>>(ii.u&hu-1)>>>0}function hr(ii){return e(ii.bb<=ii.Sb),ii.h||ii.bb==ii.Sb&&ii.u>hu}function mr(ii,oi){ii.u=oi,ii.h=hr(ii)}function _r(ii){ii.u>=Wu&&(e(ii.u>=Wu),Cr(ii))}function dr(ii){e(ii!=null&&ii.oa!=null),ii.pa<ii.Zc?(ii.I=(ii.oa[ii.pa++]|ii.I<<8)>>>0,ii.b+=8):(e(ii!=null&&ii.oa!=null),ii.pa<ii.Yc?(ii.b+=8,ii.I=ii.oa[ii.pa++]|ii.I<<8):ii.Ka?ii.b=0:(ii.I<<=8,ii.b+=8,ii.Ka=1))}function cr(ii){return Ki(ii,1)}function gr(ii,oi){var fi=ii.Ca;0>ii.b&&dr(ii);var Ni=ii.b,ji=fi*oi>>>8,ir=(ii.I>>>Ni>ji)+0;for(ir?(fi-=ji,ii.I-=ji+1<<Ni>>>0):fi=ji+1,Ni=fi,ji=0;256<=Ni;)ji+=8,Ni>>=8;return Ni=7^ji+Ra[Ni],ii.b-=Ni,ii.Ca=(fi<<Ni)-1,ir}function vr(ii,oi,fi){ii[oi+0]=fi>>24&255,ii[oi+1]=fi>>16&255,ii[oi+2]=fi>>8&255,ii[oi+3]=fi>>0&255}function Fr(ii,oi){return ii[oi+0]<<0|ii[oi+1]<<8}function zr(ii,oi){return Fr(ii,oi)|ii[oi+2]<<16}function tr(ii,oi){return Fr(ii,oi)|Fr(ii,oi+2)<<16}function fr(ii,oi){var fi=1<<oi;return e(ii!=null),e(0<oi),ii.X=Ue(fi),ii.X==null?0:(ii.Mb=32-oi,ii.Xa=oi,1)}function ar(ii,oi){e(ii!=null),e(oi!=null),e(ii.Xa==oi.Xa),ke(oi.X,0,ii.X,0,1<<oi.Xa)}function nr(){this.X=[],this.Xa=this.Mb=0}function Dr(ii,oi,fi,Ni){e(fi!=null),e(Ni!=null);var ji=fi[0],ir=Ni[0];return ji==0&&(ji=(ii*ir+oi/2)/oi),ir==0&&(ir=(oi*ji+ii/2)/ii),0>=ji||0>=ir?0:(fi[0]=ji,Ni[0]=ir,1)}function kr(ii,oi){return ii+(1<<oi)-1>>>oi}function Ir(ii,oi){return((4278255360&ii)+(4278255360&oi)>>>0&4278255360)+((16711935&ii)+(16711935&oi)>>>0&16711935)>>>0}function Mr(ii,oi){vi[oi]=function(fi,Ni,ji,ir,rr,lr,ur){var yr;for(yr=0;yr<rr;++yr){var Tr=vi[ii](lr[ur+yr-1],ji,ir+yr);lr[ur+yr]=Ir(fi[Ni+yr],Tr)}}}function Rr(){this.ud=this.hd=this.jd=0}function Nr(ii,oi){return((4278124286&(ii^oi))>>>1)+(ii&oi)>>>0}function Ar(ii){return 0<=ii&&256>ii?ii:0>ii?0:255<ii?255:void 0}function Sr(ii,oi){return Ar(ii+(ii-oi+.5>>1))}function br(ii,oi,fi){return Math.abs(oi-fi)-Math.abs(ii-fi)}function Br(ii,oi,fi,Ni,ji,ir,rr){for(Ni=ir[rr-1],fi=0;fi<ji;++fi)ir[rr+fi]=Ni=Ir(ii[oi+fi],Ni)}function Hr(ii,oi,fi,Ni,ji){var ir;for(ir=0;ir<fi;++ir){var rr=ii[oi+ir],lr=rr>>8&255,ur=16711935&(ur=(ur=16711935&rr)+((lr<<16)+lr));Ni[ji+ir]=(4278255360&rr)+ur>>>0}}function qr(ii,oi){oi.jd=ii>>0&255,oi.hd=ii>>8&255,oi.ud=ii>>16&255}function Xr(ii,oi,fi,Ni,ji,ir){var rr;for(rr=0;rr<Ni;++rr){var lr=oi[fi+rr],ur=lr>>>8,yr=lr,Tr=255&(Tr=(Tr=lr>>>16)+((ii.jd<<24>>24)*(ur<<24>>24)>>>5));yr=255&(yr=(yr=yr+((ii.hd<<24>>24)*(ur<<24>>24)>>>5))+((ii.ud<<24>>24)*(Tr<<24>>24)>>>5)),ji[ir+rr]=(4278255360&lr)+(Tr<<16)+yr}}function cs(ii,oi,fi,Ni,ji){vi[oi]=function(ir,rr,lr,ur,yr,Tr,Vr,$r,Gr){for(ur=Vr;ur<$r;++ur)for(Vr=0;Vr<Gr;++Vr)yr[Tr++]=ji(lr[Ni(ir[rr++])])},vi[ii]=function(ir,rr,lr,ur,yr,Tr,Vr){var $r=8>>ir.b,Gr=ir.Ea,rs=ir.K[0],Wr=ir.w;if(8>$r)for(ir=(1<<ir.b)-1,Wr=(1<<$r)-1;rr<lr;++rr){var Lr,Or=0;for(Lr=0;Lr<Gr;++Lr)Lr&ir||(Or=Ni(ur[yr++])),Tr[Vr++]=ji(rs[Or&Wr]),Or>>=$r}else vi["VP8LMapColor"+fi](ur,yr,rs,Wr,Tr,Vr,rr,lr,Gr)}}function Qr(ii,oi,fi,Ni,ji){for(fi=oi+fi;oi<fi;){var ir=ii[oi++];Ni[ji++]=ir>>16&255,Ni[ji++]=ir>>8&255,Ni[ji++]=ir>>0&255}}function bs(ii,oi,fi,Ni,ji){for(fi=oi+fi;oi<fi;){var ir=ii[oi++];Ni[ji++]=ir>>16&255,Ni[ji++]=ir>>8&255,Ni[ji++]=ir>>0&255,Ni[ji++]=ir>>24&255}}function vs(ii,oi,fi,Ni,ji){for(fi=oi+fi;oi<fi;){var ir=(rr=ii[oi++])>>16&240|rr>>12&15,rr=rr>>0&240|rr>>28&15;Ni[ji++]=ir,Ni[ji++]=rr}}function Ms(ii,oi,fi,Ni,ji){for(fi=oi+fi;oi<fi;){var ir=(rr=ii[oi++])>>16&248|rr>>13&7,rr=rr>>5&224|rr>>3&31;Ni[ji++]=ir,Ni[ji++]=rr}}function Ls(ii,oi,fi,Ni,ji){for(fi=oi+fi;oi<fi;){var ir=ii[oi++];Ni[ji++]=ir>>0&255,Ni[ji++]=ir>>8&255,Ni[ji++]=ir>>16&255}}function ps(ii,oi,fi,Ni,ji,ir){if(ir==0)for(fi=oi+fi;oi<fi;)vr(Ni,((ir=ii[oi++])[0]>>24|ir[1]>>8&65280|ir[2]<<8&16711680|ir[3]<<24)>>>0),ji+=32;else ke(Ni,ji,ii,oi,fi)}function ws(ii,oi){vi[oi][0]=vi[ii+"0"],vi[oi][1]=vi[ii+"1"],vi[oi][2]=vi[ii+"2"],vi[oi][3]=vi[ii+"3"],vi[oi][4]=vi[ii+"4"],vi[oi][5]=vi[ii+"5"],vi[oi][6]=vi[ii+"6"],vi[oi][7]=vi[ii+"7"],vi[oi][8]=vi[ii+"8"],vi[oi][9]=vi[ii+"9"],vi[oi][10]=vi[ii+"10"],vi[oi][11]=vi[ii+"11"],vi[oi][12]=vi[ii+"12"],vi[oi][13]=vi[ii+"13"],vi[oi][14]=vi[ii+"0"],vi[oi][15]=vi[ii+"0"]}function As(ii){return ii==$h||ii==zh||ii==nh||ii==Hh}function Ds(){this.eb=[],this.size=this.A=this.fb=0}function xs(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Xs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Ds,this.f.kb=new xs,this.sd=null}function _o(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Fs(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ss(ii){return alert("todo:WebPSamplerProcessPlane"),ii.T}function Is(ii,oi){var fi=ii.T,Ni=oi.ba.f.RGBA,ji=Ni.eb,ir=Ni.fb+ii.ka*Ni.A,rr=Ja[oi.ba.S],lr=ii.y,ur=ii.O,yr=ii.f,Tr=ii.N,Vr=ii.ea,$r=ii.W,Gr=oi.cc,rs=oi.dc,Wr=oi.Mc,Lr=oi.Nc,Or=ii.ka,es=ii.ka+ii.T,ss=ii.U,ts=ss+1>>1;for(Or==0?rr(lr,ur,null,null,yr,Tr,Vr,$r,yr,Tr,Vr,$r,ji,ir,null,null,ss):(rr(oi.ec,oi.fc,lr,ur,Gr,rs,Wr,Lr,yr,Tr,Vr,$r,ji,ir-Ni.A,ji,ir,ss),++fi);Or+2<es;Or+=2)Gr=yr,rs=Tr,Wr=Vr,Lr=$r,Tr+=ii.Rc,$r+=ii.Rc,ir+=2*Ni.A,rr(lr,(ur+=2*ii.fa)-ii.fa,lr,ur,Gr,rs,Wr,Lr,yr,Tr,Vr,$r,ji,ir-Ni.A,ji,ir,ss);return ur+=ii.fa,ii.j+es<ii.o?(ke(oi.ec,oi.fc,lr,ur,ss),ke(oi.cc,oi.dc,yr,Tr,ts),ke(oi.Mc,oi.Nc,Vr,$r,ts),fi--):1&es||rr(lr,ur,null,null,yr,Tr,Vr,$r,yr,Tr,Vr,$r,ji,ir+Ni.A,null,null,ss),fi}function oa(ii,oi,fi){var Ni=ii.F,ji=[ii.J];if(Ni!=null){var ir=ii.U,rr=oi.ba.S,lr=rr==th||rr==nh;oi=oi.ba.f.RGBA;var ur=[0],yr=ii.ka;ur[0]=ii.T,ii.Kb&&(yr==0?--ur[0]:(--yr,ji[0]-=ii.width),ii.j+ii.ka+ii.T==ii.o&&(ur[0]=ii.o-ii.j-yr));var Tr=oi.eb;yr=oi.fb+yr*oi.A,ii=go(Ni,ji[0],ii.width,ir,ur,Tr,yr+(lr?0:3),oi.A),e(fi==ur),ii&&As(rr)&&Ka(Tr,yr,lr,ir,ur,oi.A)}return 0}function qs(ii){var oi=ii.ma,fi=oi.ba.S,Ni=11>fi,ji=fi==Jd||fi==eh||fi==th||fi==Vh||fi==12||As(fi);if(oi.memory=null,oi.Ib=null,oi.Jb=null,oi.Nd=null,!Hu(oi.Oa,ii,ji?11:12))return 0;if(ji&&As(fi)&&as(),ii.da)alert("todo:use_scaling");else{if(Ni){if(oi.Ib=Ss,ii.Kb){if(fi=ii.U+1>>1,oi.memory=Ue(ii.U+2*fi),oi.memory==null)return 0;oi.ec=oi.memory,oi.fc=0,oi.cc=oi.ec,oi.dc=oi.fc+ii.U,oi.Mc=oi.cc,oi.Nc=oi.dc+fi,oi.Ib=Is,as()}}else alert("todo:EmitYUV");ji&&(oi.Jb=oa,Ni&&jr())}if(Ni&&!yf){for(ii=0;256>ii;++ii)xp[ii]=89858*(ii-128)+rh>>ih,Rp[ii]=-22014*(ii-128)+rh,Lp[ii]=-45773*(ii-128),Tp[ii]=113618*(ii-128)+rh>>ih;for(ii=hd;ii<Yh;++ii)oi=76283*(ii-16)+rh>>ih,Mp[ii-hd]=Ga(oi,255),Np[ii-hd]=Ga(oi+8>>4,15);yf=1}return 1}function Eo(ii){var oi=ii.ma,fi=ii.U,Ni=ii.T;return e(!(1&ii.ka)),0>=fi||0>=Ni?0:(fi=oi.Ib(ii,oi),oi.Jb!=null&&oi.Jb(ii,oi,fi),oi.Dc+=fi,1)}function Rs(ii){ii.ma.memory=null}function Es(ii,oi,fi,Ni){return pr(ii,8)!=47?0:(oi[0]=pr(ii,14)+1,fi[0]=pr(ii,14)+1,Ni[0]=pr(ii,1),pr(ii,3)!=0?0:!ii.h)}function bo(ii,oi){if(4>ii)return ii+1;var fi=ii-2>>1;return(2+(1&ii)<<fi)+pr(oi,fi)+1}function Us(ii,oi){return 120<oi?oi-120:1<=(fi=((fi=pp[oi-1])>>4)*ii+(8-(15&fi)))?fi:1;var fi}function zs(ii,oi,fi){var Ni=er(fi),ji=ii[oi+=255&Ni].g-8;return 0<ji&&(mr(fi,fi.u+8),Ni=er(fi),oi+=ii[oi].value,oi+=Ni&(1<<ji)-1),mr(fi,fi.u+ii[oi].g),ii[oi].value}function Ws(ii,oi,fi){return fi.g+=ii.g,fi.value+=ii.value<<oi>>>0,e(8>=fi.g),ii.g}function yo(ii,oi,fi){var Ni=ii.xc;return e((oi=Ni==0?0:ii.vc[ii.md*(fi>>Ni)+(oi>>Ni)])<ii.Wb),ii.Ya[oi]}function Co(ii,oi,fi,Ni){var ji=ii.ab,ir=ii.c*oi,rr=ii.C;oi=rr+oi;var lr=fi,ur=Ni;for(Ni=ii.Ta,fi=ii.Ua;0<ji--;){var yr=ii.gc[ji],Tr=rr,Vr=oi,$r=lr,Gr=ur,rs=(ur=Ni,lr=fi,yr.Ea);switch(e(Tr<Vr),e(Vr<=yr.nc),yr.hc){case 2:jd($r,Gr,(Vr-Tr)*rs,ur,lr);break;case 0:var Wr=Tr,Lr=Vr,Or=ur,es=lr,ss=(ms=yr).Ea;Wr==0&&(Uh($r,Gr,null,null,1,Or,es),Br($r,Gr+1,0,0,ss-1,Or,es+1),Gr+=ss,es+=ss,++Wr);for(var ts=1<<ms.b,Cs=ts-1,gs=kr(ss,ms.b),Ts=ms.K,ms=ms.w+(Wr>>ms.b)*gs;Wr<Lr;){var Ys=Ts,Ks=ms,Hs=1;for(Yu($r,Gr,Or,es-ss,1,Or,es);Hs<ss;){var js=(Hs&~Cs)+ts;js>ss&&(js=ss),(0,Ec[Ys[Ks++]>>8&15])($r,Gr+ +Hs,Or,es+Hs-ss,js-Hs,Or,es+Hs),Hs=js}Gr+=ss,es+=ss,++Wr&Cs||(ms+=gs)}Vr!=yr.nc&&ke(ur,lr-rs,ur,lr+(Vr-Tr-1)*rs,rs);break;case 1:for(rs=$r,Lr=Gr,ss=($r=yr.Ea)-(es=$r&~(Or=(Gr=1<<yr.b)-1)),Wr=kr($r,yr.b),ts=yr.K,yr=yr.w+(Tr>>yr.b)*Wr;Tr<Vr;){for(Cs=ts,gs=yr,Ts=new Rr,ms=Lr+es,Ys=Lr+$r;Lr<ms;)qr(Cs[gs++],Ts),Bc(Ts,rs,Lr,Gr,ur,lr),Lr+=Gr,lr+=Gr;Lr<Ys&&(qr(Cs[gs++],Ts),Bc(Ts,rs,Lr,ss,ur,lr),Lr+=ss,lr+=ss),++Tr&Or||(yr+=Wr)}break;case 3:if($r==ur&&Gr==lr&&0<yr.b){for(Lr=ur,$r=rs=lr+(Vr-Tr)*rs-(es=(Vr-Tr)*kr(yr.Ea,yr.b)),Gr=ur,Or=lr,Wr=[],es=(ss=es)-1;0<=es;--es)Wr[es]=Gr[Or+es];for(es=ss-1;0<=es;--es)Lr[$r+es]=Wr[es];Wa(yr,Tr,Vr,ur,rs,ur,lr)}else Wa(yr,Tr,Vr,$r,Gr,ur,lr)}lr=Ni,ur=fi}ur!=fi&&ke(Ni,fi,lr,ur,ir)}function qa(ii,oi){var fi=ii.V,Ni=ii.Ba+ii.c*ii.C,ji=oi-ii.C;if(e(oi<=ii.l.o),e(16>=ji),0<ji){var ir=ii.l,rr=ii.Ta,lr=ii.Ua,ur=ir.width;if(Co(ii,ji,fi,Ni),ji=lr=[lr],e((fi=ii.C)<(Ni=oi)),e(ir.v<ir.va),Ni>ir.o&&(Ni=ir.o),fi<ir.j){var yr=ir.j-fi;fi=ir.j,ji[0]+=yr*ur}if(fi>=Ni?fi=0:(ji[0]+=4*ir.v,ir.ka=fi-ir.j,ir.U=ir.va-ir.v,ir.T=Ni-fi,fi=1),fi){if(lr=lr[0],11>(fi=ii.ca).S){var Tr=fi.f.RGBA,Vr=(Ni=fi.S,ji=ir.U,ir=ir.T,yr=Tr.eb,Tr.A),$r=ir;for(Tr=Tr.fb+ii.Ma*Tr.A;0<$r--;){var Gr=rr,rs=lr,Wr=ji,Lr=yr,Or=Tr;switch(Ni){case Zd:Ma(Gr,rs,Wr,Lr,Or);break;case Jd:va(Gr,rs,Wr,Lr,Or);break;case $h:va(Gr,rs,Wr,Lr,Or),Ka(Lr,Or,0,Wr,1,0);break;case cf:hc(Gr,rs,Wr,Lr,Or);break;case eh:ps(Gr,rs,Wr,Lr,Or,1);break;case zh:ps(Gr,rs,Wr,Lr,Or,1),Ka(Lr,Or,0,Wr,1,0);break;case th:ps(Gr,rs,Wr,Lr,Or,0);break;case nh:ps(Gr,rs,Wr,Lr,Or,0),Ka(Lr,Or,1,Wr,1,0);break;case Vh:Ac(Gr,rs,Wr,Lr,Or);break;case Hh:Ac(Gr,rs,Wr,Lr,Or),ho(Lr,Or,Wr,1,0);break;case uf:dc(Gr,rs,Wr,Lr,Or);break;default:e(0)}lr+=ur,Tr+=Vr}ii.Ma+=ir}else alert("todo:EmitRescaledRowsYUVA");e(ii.Ma<=fi.height)}}ii.C=oi,e(ii.C<=ii.i)}function ma(ii){var oi;if(0<ii.ua)return 0;for(oi=0;oi<ii.Wb;++oi){var fi=ii.Ya[oi].G,Ni=ii.Ya[oi].H;if(0<fi[1][Ni[1]+0].g||0<fi[2][Ni[2]+0].g||0<fi[3][Ni[3]+0].g)return 0}return 1}function Pa(ii,oi,fi,Ni,ji,ir){if(ii.Z!=0){var rr=ii.qd,lr=ii.rd;for(e(Pc[ii.Z]!=null);oi<fi;++oi)Pc[ii.Z](rr,lr,Ni,ji,Ni,ji,ir),rr=Ni,lr=ji,ji+=ir;ii.qd=rr,ii.rd=lr}}function Fa(ii,oi){var fi=ii.l.ma,Ni=fi.Z==0||fi.Z==1?ii.l.j:ii.C;if(Ni=ii.C<Ni?Ni:ii.C,e(oi<=ii.l.o),oi>Ni){var ji=ii.l.width,ir=fi.ca,rr=fi.tb+ji*Ni,lr=ii.V,ur=ii.Ba+ii.c*Ni,yr=ii.gc;e(ii.ab==1),e(yr[0].hc==3),Vd(yr[0],Ni,oi,lr,ur,ir,rr),Pa(fi,Ni,oi,ir,rr,ji)}ii.C=ii.Ma=oi}function xa(ii,oi,fi,Ni,ji,ir,rr){var lr=ii.$/Ni,ur=ii.$%Ni,yr=ii.m,Tr=ii.s,Vr=fi+ii.$,$r=Vr;ji=fi+Ni*ji;var Gr=fi+Ni*ir,rs=280+Tr.ua,Wr=ii.Pb?lr:16777216,Lr=0<Tr.ua?Tr.Wa:null,Or=Tr.wc,es=Vr<Gr?yo(Tr,ur,lr):null;e(ii.C<ir),e(Gr<=ji);var ss=!1;e:for(;;){for(;ss||Vr<Gr;){var ts=0;if(lr>=Wr){var Cs=Vr-fi;e((Wr=ii).Pb),Wr.wd=Wr.m,Wr.xd=Cs,0<Wr.s.ua&&ar(Wr.s.Wa,Wr.s.vb),Wr=lr+mp}if(ur&Or||(es=yo(Tr,ur,lr)),e(es!=null),es.Qb&&(oi[Vr]=es.qb,ss=!0),!ss)if(_r(yr),es.jc){ts=yr,Cs=oi;var gs=Vr,Ts=es.pd[er(ts)&ca-1];e(es.jc),256>Ts.g?(mr(ts,ts.u+Ts.g),Cs[gs]=Ts.value,ts=0):(mr(ts,ts.u+Ts.g-256),e(256<=Ts.value),ts=Ts.value),ts==0&&(ss=!0)}else ts=zs(es.G[0],es.H[0],yr);if(yr.h)break;if(ss||256>ts){if(!ss)if(es.nd)oi[Vr]=(es.qb|ts<<8)>>>0;else{if(_r(yr),ss=zs(es.G[1],es.H[1],yr),_r(yr),Cs=zs(es.G[2],es.H[2],yr),gs=zs(es.G[3],es.H[3],yr),yr.h)break;oi[Vr]=(gs<<24|ss<<16|ts<<8|Cs)>>>0}if(ss=!1,++Vr,++ur>=Ni&&(ur=0,++lr,rr!=null&&lr<=ir&&!(lr%16)&&rr(ii,lr),Lr!=null))for(;$r<Vr;)ts=oi[$r++],Lr.X[(506832829*ts&4294967295)>>>Lr.Mb]=ts}else if(280>ts){if(ts=bo(ts-256,yr),Cs=zs(es.G[4],es.H[4],yr),_r(yr),Cs=Us(Ni,Cs=bo(Cs,yr)),yr.h)break;if(Vr-fi<Cs||ji-Vr<ts)break e;for(gs=0;gs<ts;++gs)oi[Vr+gs]=oi[Vr+gs-Cs];for(Vr+=ts,ur+=ts;ur>=Ni;)ur-=Ni,++lr,rr!=null&&lr<=ir&&!(lr%16)&&rr(ii,lr);if(e(Vr<=ji),ur&Or&&(es=yo(Tr,ur,lr)),Lr!=null)for(;$r<Vr;)ts=oi[$r++],Lr.X[(506832829*ts&4294967295)>>>Lr.Mb]=ts}else{if(!(ts<rs))break e;for(ss=ts-280,e(Lr!=null);$r<Vr;)ts=oi[$r++],Lr.X[(506832829*ts&4294967295)>>>Lr.Mb]=ts;ts=Vr,e(!(ss>>>(Cs=Lr).Xa)),oi[ts]=Cs.X[ss],ss=!0}ss||e(yr.h==hr(yr))}if(ii.Pb&&yr.h&&Vr<ji)e(ii.m.h),ii.a=5,ii.m=ii.wd,ii.$=ii.xd,0<ii.s.ua&&ar(ii.s.vb,ii.s.Wa);else{if(yr.h)break e;rr!=null&&rr(ii,lr>ir?ir:lr),ii.a=0,ii.$=Vr-fi}return 1}return ii.a=3,0}function aa(ii){e(ii!=null),ii.vc=null,ii.yc=null,ii.Ya=null;var oi=ii.Wa;oi!=null&&(oi.X=null),ii.vb=null,e(ii!=null)}function la(){var ii=new Bh;return ii==null?null:(ii.a=0,ii.xb=ff,ws("Predictor","VP8LPredictors"),ws("Predictor","VP8LPredictors_C"),ws("PredictorAdd","VP8LPredictorsAdd"),ws("PredictorAdd","VP8LPredictorsAdd_C"),jd=Hr,Bc=Xr,Ma=Qr,va=bs,Ac=vs,dc=Ms,hc=Ls,vi.VP8LMapColor32b=fu,vi.VP8LMapColor8b=$d,ii)}function nc(ii,oi,fi,Ni,ji){var ir=1,rr=[ii],lr=[oi],ur=Ni.m,yr=Ni.s,Tr=null,Vr=0;e:for(;;){if(fi)for(;ir&&pr(ur,1);){var $r=rr,Gr=lr,rs=Ni,Wr=1,Lr=rs.m,Or=rs.gc[rs.ab],es=pr(Lr,2);if(rs.Oc&1<<es)ir=0;else{switch(rs.Oc|=1<<es,Or.hc=es,Or.Ea=$r[0],Or.nc=Gr[0],Or.K=[null],++rs.ab,e(4>=rs.ab),es){case 0:case 1:Or.b=pr(Lr,3)+2,Wr=nc(kr(Or.Ea,Or.b),kr(Or.nc,Or.b),0,rs,Or.K),Or.K=Or.K[0];break;case 3:var ss,ts=pr(Lr,8)+1,Cs=16<ts?0:4<ts?1:2<ts?2:3;if($r[0]=kr(Or.Ea,Cs),Or.b=Cs,ss=Wr=nc(ts,1,0,rs,Or.K)){var gs,Ts=ts,ms=Or,Ys=1<<(8>>ms.b),Ks=Ue(Ys);if(Ks==null)ss=0;else{var Hs=ms.K[0],js=ms.w;for(Ks[0]=ms.K[0][0],gs=1;gs<1*Ts;++gs)Ks[gs]=Ir(Hs[js+gs],Ks[gs-1]);for(;gs<4*Ys;++gs)Ks[gs]=0;ms.K[0]=null,ms.K[0]=Ks,ss=1}}Wr=ss;break;case 2:break;default:e(0)}ir=Wr}}if(rr=rr[0],lr=lr[0],ir&&pr(ur,1)&&!(ir=1<=(Vr=pr(ur,4))&&11>=Vr)){Ni.a=3;break e}var Qs;if(Qs=ir)t:{var Js,Bs,ea,Na=Ni,ta=rr,ka=lr,Zs=Vr,Ua=fi,za=Na.m,ra=Na.s,da=[null],Aa=1,Qa=0,oc=gp[Zs];n:for(;;){if(Ua&&pr(za,1)){var sa=pr(za,3)+2,mc=kr(ta,sa),zc=kr(ka,sa),yu=mc*zc;if(!nc(mc,zc,0,Na,da))break n;for(da=da[0],ra.xc=sa,Js=0;Js<yu;++Js){var wc=da[Js]>>8&65535;da[Js]=wc,wc>=Aa&&(Aa=wc+1)}}if(za.h)break n;for(Bs=0;5>Bs;++Bs){var To=df[Bs];!Bs&&0<Zs&&(To+=1<<Zs),Qa<To&&(Qa=To)}var Xh=He(Aa*oc,ci),Ef=Aa,Af=He(Ef,Oi);if(Af==null)var oh=null;else e(65536>=Ef),oh=Af;var gd=Ue(Qa);if(oh==null||gd==null||Xh==null){Na.a=1;break n}var ah=Xh;for(Js=ea=0;Js<Aa;++Js){var tc=oh[Js],_u=tc.G,Au=tc.H,Sf=0,lh=1,bf=0;for(Bs=0;5>Bs;++Bs){To=df[Bs],_u[Bs]=ah,Au[Bs]=ea,!Bs&&0<Zs&&(To+=1<<Zs);r:{var ch,Kh=To,uh=Na,md=gd,Dp=ah,Fp=ea,Zh=0,xc=uh.m,Bp=pr(xc,1);if(Be(md,0,0,Kh),Bp){var Up=pr(xc,1)+1,jp=pr(xc,1),If=pr(xc,jp==0?1:8);md[If]=1,Up==2&&(md[If=pr(xc,8)]=1);var dh=1}else{var Pf=Ue(19),wf=pr(xc,4)+4;if(19<wf){uh.a=3;var hh=0;break r}for(ch=0;ch<wf;++ch)Pf[fp[ch]]=pr(xc,3);var Jh=void 0,yd=void 0,xf=uh,Vp=Pf,fh=Kh,Tf=md,Qh=0,Tc=xf.m,Lf=8,Rf=He(128,ci);i:for(;di(Rf,0,7,Vp,19);){if(pr(Tc,1)){var $p=2+2*pr(Tc,3);if((Jh=2+pr(Tc,$p))>fh)break i}else Jh=fh;for(yd=0;yd<fh&&Jh--;){_r(Tc);var Mf=Rf[0+(127&er(Tc))];mr(Tc,Tc.u+Mf.g);var bu=Mf.value;if(16>bu)Tf[yd++]=bu,bu!=0&&(Lf=bu);else{var zp=bu==16,Nf=bu-16,Hp=dp[Nf],Of=pr(Tc,up[Nf])+Hp;if(yd+Of>fh)break i;for(var qp=zp?Lf:0;0<Of--;)Tf[yd++]=qp}}Qh=1;break i}Qh||(xf.a=3),dh=Qh}(dh=dh&&!xc.h)&&(Zh=di(Dp,Fp,8,md,Kh)),dh&&Zh!=0?hh=Zh:(uh.a=3,hh=0)}if(hh==0)break n;if(lh&&hp[Bs]==1&&(lh=ah[ea].g==0),Sf+=ah[ea].g,ea+=hh,3>=Bs){var _d,tf=gd[0];for(_d=1;_d<To;++_d)gd[_d]>tf&&(tf=gd[_d]);bf+=tf}}if(tc.nd=lh,tc.Qb=0,lh&&(tc.qb=(_u[3][Au[3]+0].value<<24|_u[1][Au[1]+0].value<<16|_u[2][Au[2]+0].value)>>>0,Sf==0&&256>_u[0][Au[0]+0].value&&(tc.Qb=1,tc.qb+=_u[0][Au[0]+0].value<<8)),tc.jc=!tc.Qb&&6>bf,tc.jc){var ph,vc=tc;for(ph=0;ph<ca;++ph){var Lc=ph,Rc=vc.pd[Lc],gh=vc.G[0][vc.H[0]+Lc];256<=gh.value?(Rc.g=gh.g+256,Rc.value=gh.value):(Rc.g=0,Rc.value=0,Lc>>=Ws(gh,8,Rc),Lc>>=Ws(vc.G[1][vc.H[1]+Lc],16,Rc),Lc>>=Ws(vc.G[2][vc.H[2]+Lc],0,Rc),Ws(vc.G[3][vc.H[3]+Lc],24,Rc))}}}ra.vc=da,ra.Wb=Aa,ra.Ya=oh,ra.yc=Xh,Qs=1;break t}Qs=0}if(!(ir=Qs)){Ni.a=3;break e}if(0<Vr){if(yr.ua=1<<Vr,!fr(yr.Wa,Vr)){Ni.a=1,ir=0;break e}}else yr.ua=0;var nf=Ni,kf=rr,Wp=lr,rf=nf.s,sf=rf.xc;if(nf.c=kf,nf.i=Wp,rf.md=kr(kf,sf),rf.wc=sf==0?-1:(1<<sf)-1,fi){Ni.xb=Sp;break e}if((Tr=Ue(rr*lr))==null){Ni.a=1,ir=0;break e}ir=(ir=xa(Ni,Tr,0,rr,lr,lr,null))&&!ur.h;break e}return ir?(ji!=null?ji[0]=Tr:(e(Tr==null),e(fi)),Ni.$=0,fi||aa(yr)):aa(yr),ir}function Oc(ii,oi){var fi=ii.c*ii.i,Ni=fi+oi+16*oi;return e(ii.c<=oi),ii.V=Ue(Ni),ii.V==null?(ii.Ta=null,ii.Ua=0,ii.a=1,0):(ii.Ta=ii.V,ii.Ua=ii.Ba+fi+oi,1)}function qc(ii,oi){var fi=ii.C,Ni=oi-fi,ji=ii.V,ir=ii.Ba+ii.c*fi;for(e(oi<=ii.l.o);0<Ni;){var rr=16<Ni?16:Ni,lr=ii.l.ma,ur=ii.l.width,yr=ur*rr,Tr=lr.ca,Vr=lr.tb+ur*fi,$r=ii.Ta,Gr=ii.Ua;Co(ii,rr,ji,ir),$o($r,Gr,Tr,Vr,yr),Pa(lr,fi,fi+rr,Tr,Vr,ur),Ni-=rr,ji+=rr*ii.c,fi+=rr}e(fi==oi),ii.C=ii.Ma=oi}function Wc(){this.ub=this.yd=this.td=this.Rb=0}function Yc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Xc(){this.Fb=this.Bb=this.Cb=0,this.Zb=Ue(4),this.Lb=Ue(4)}function Ed(){this.Yb=function(){var ii=[];return function oi(fi,Ni,ji){for(var ir=ji[Ni],rr=0;rr<ir&&(fi.push(ji.length>Ni+1?[]:0),!(ji.length<Ni+1));rr++)oi(fi[rr],Ni+1,ji)}(ii,0,[3,11]),ii}()}function mh(){this.jb=Ue(3),this.Wc=We([4,8],Ed),this.Xc=We([4,17],Ed)}function vh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Ue(4),this.od=new Ue(4)}function Kc(){this.ld=this.La=this.dd=this.tc=0}function Ad(){this.Na=this.la=0}function yh(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function xu(){this.ad=Ue(384),this.Za=0,this.Ob=Ue(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function _h(){this.uc=this.M=this.Nb=0,this.wa=Array(new Kc),this.Y=0,this.ya=Array(new xu),this.aa=0,this.l=new Zc}function Sd(){this.y=Ue(16),this.f=Ue(8),this.ea=Ue(8)}function Ch(){this.cb=this.a=0,this.sc="",this.m=new wr,this.Od=new Wc,this.Kc=new Yc,this.ed=new vh,this.Qa=new Xc,this.Ic=this.$c=this.Aa=0,this.D=new _h,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=He(8,wr),this.ia=0,this.pb=He(4,yh),this.Pa=new mh,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Sd),this.Hd=0,this.rb=Array(new Ad),this.sb=0,this.wa=Array(new Kc),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new xu),this.L=this.aa=0,this.gd=We([4,2],Kc),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Zc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Eh(){var ii=new Ch;return ii!=null&&(ii.a=0,ii.sc="OK",ii.cb=0,ii.Xb=0,Qu||(Qu=Pd)),ii}function ko(ii,oi,fi){return ii.a==0&&(ii.a=oi,ii.sc=fi,ii.cb=0),0}function bd(ii,oi,fi){return 3<=fi&&ii[oi+0]==157&&ii[oi+1]==1&&ii[oi+2]==42}function Id(ii,oi){if(ii==null)return 0;if(ii.a=0,ii.sc="OK",oi==null)return ko(ii,2,"null VP8Io passed to VP8GetHeaders()");var fi=oi.data,Ni=oi.w,ji=oi.ha;if(4>ji)return ko(ii,7,"Truncated header.");var ir=fi[Ni+0]|fi[Ni+1]<<8|fi[Ni+2]<<16,rr=ii.Od;if(rr.Rb=!(1&ir),rr.td=ir>>1&7,rr.yd=ir>>4&1,rr.ub=ir>>5,3<rr.td)return ko(ii,3,"Incorrect keyframe parameters.");if(!rr.yd)return ko(ii,4,"Frame not displayable.");Ni+=3,ji-=3;var lr=ii.Kc;if(rr.Rb){if(7>ji)return ko(ii,7,"cannot parse picture header");if(!bd(fi,Ni,ji))return ko(ii,3,"Bad code word");lr.c=16383&(fi[Ni+4]<<8|fi[Ni+3]),lr.Td=fi[Ni+4]>>6,lr.i=16383&(fi[Ni+6]<<8|fi[Ni+5]),lr.Ud=fi[Ni+6]>>6,Ni+=7,ji-=7,ii.za=lr.c+15>>4,ii.Ub=lr.i+15>>4,oi.width=lr.c,oi.height=lr.i,oi.Da=0,oi.j=0,oi.v=0,oi.va=oi.width,oi.o=oi.height,oi.da=0,oi.ib=oi.width,oi.hb=oi.height,oi.U=oi.width,oi.T=oi.height,Be((ir=ii.Pa).jb,0,255,ir.jb.length),e((ir=ii.Qa)!=null),ir.Cb=0,ir.Bb=0,ir.Fb=1,Be(ir.Zb,0,0,ir.Zb.length),Be(ir.Lb,0,0,ir.Lb)}if(rr.ub>ji)return ko(ii,7,"bad partition length");Hi(ir=ii.m,fi,Ni,rr.ub),Ni+=rr.ub,ji-=rr.ub,rr.Rb&&(lr.Ld=cr(ir),lr.Kd=cr(ir)),lr=ii.Qa;var ur,yr=ii.Pa;if(e(ir!=null),e(lr!=null),lr.Cb=cr(ir),lr.Cb){if(lr.Bb=cr(ir),cr(ir)){for(lr.Fb=cr(ir),ur=0;4>ur;++ur)lr.Zb[ur]=cr(ir)?or(ir,7):0;for(ur=0;4>ur;++ur)lr.Lb[ur]=cr(ir)?or(ir,6):0}if(lr.Bb)for(ur=0;3>ur;++ur)yr.jb[ur]=cr(ir)?Ki(ir,8):255}else lr.Bb=0;if(ir.Ka)return ko(ii,3,"cannot parse segment header");if((lr=ii.ed).zd=cr(ir),lr.Tb=Ki(ir,6),lr.wb=Ki(ir,3),lr.Pc=cr(ir),lr.Pc&&cr(ir)){for(yr=0;4>yr;++yr)cr(ir)&&(lr.vd[yr]=or(ir,6));for(yr=0;4>yr;++yr)cr(ir)&&(lr.od[yr]=or(ir,6))}if(ii.L=lr.Tb==0?0:lr.zd?1:2,ir.Ka)return ko(ii,3,"cannot parse filter header");var Tr=ji;if(ji=ur=Ni,Ni=ur+Tr,lr=Tr,ii.Xb=(1<<Ki(ii.m,2))-1,Tr<3*(yr=ii.Xb))fi=7;else{for(ur+=3*yr,lr-=3*yr,Tr=0;Tr<yr;++Tr){var Vr=fi[ji+0]|fi[ji+1]<<8|fi[ji+2]<<16;Vr>lr&&(Vr=lr),Hi(ii.Jc[+Tr],fi,ur,Vr),ur+=Vr,lr-=Vr,ji+=3}Hi(ii.Jc[+yr],fi,ur,lr),fi=ur<Ni?0:5}if(fi!=0)return ko(ii,fi,"cannot parse partitions");for(fi=Ki(ur=ii.m,7),ji=cr(ur)?or(ur,4):0,Ni=cr(ur)?or(ur,4):0,lr=cr(ur)?or(ur,4):0,yr=cr(ur)?or(ur,4):0,ur=cr(ur)?or(ur,4):0,Tr=ii.Qa,Vr=0;4>Vr;++Vr){if(Tr.Cb){var $r=Tr.Zb[Vr];Tr.Fb||($r+=fi)}else{if(0<Vr){ii.pb[Vr]=ii.pb[0];continue}$r=fi}var Gr=ii.pb[Vr];Gr.Sc[0]=qh[Ga($r+ji,127)],Gr.Sc[1]=Wh[Ga($r+0,127)],Gr.Eb[0]=2*qh[Ga($r+Ni,127)],Gr.Eb[1]=101581*Wh[Ga($r+lr,127)]>>16,8>Gr.Eb[1]&&(Gr.Eb[1]=8),Gr.Qc[0]=qh[Ga($r+yr,117)],Gr.Qc[1]=Wh[Ga($r+ur,127)],Gr.lc=$r+ur}if(!rr.Rb)return ko(ii,4,"Not a key frame.");for(cr(ir),rr=ii.Pa,fi=0;4>fi;++fi){for(ji=0;8>ji;++ji)for(Ni=0;3>Ni;++Ni)for(lr=0;11>lr;++lr)yr=gr(ir,Ep[fi][ji][Ni][lr])?Ki(ir,8):_p[fi][ji][Ni][lr],rr.Wc[fi][ji].Yb[Ni][lr]=yr;for(ji=0;17>ji;++ji)rr.Xc[fi][ji]=rr.Wc[fi][Ap[ji]]}return ii.kc=cr(ir),ii.kc&&(ii.Bd=Ki(ir,8)),ii.cb=1}function Pd(ii,oi,fi,Ni,ji,ir,rr){var lr=oi[ji].Yb[fi];for(fi=0;16>ji;++ji){if(!gr(ii,lr[fi+0]))return ji;for(;!gr(ii,lr[fi+1]);)if(lr=oi[++ji].Yb[0],fi=0,ji==16)return 16;var ur=oi[ji+1].Yb;if(gr(ii,lr[fi+2])){var yr=ii,Tr=0;if(gr(yr,($r=lr)[(Vr=fi)+3]))if(gr(yr,$r[Vr+6])){for(lr=0,Vr=2*(Tr=gr(yr,$r[Vr+8]))+($r=gr(yr,$r[Vr+9+Tr])),Tr=0,$r=vp[Vr];$r[lr];++lr)Tr+=Tr+gr(yr,$r[lr]);Tr+=3+(8<<Vr)}else gr(yr,$r[Vr+7])?(Tr=7+2*gr(yr,165),Tr+=gr(yr,145)):Tr=5+gr(yr,159);else Tr=gr(yr,$r[Vr+4])?3+gr(yr,$r[Vr+5]):2;lr=ur[2]}else Tr=1,lr=ur[1];ur=rr+yp[ji],0>(yr=ii).b&&dr(yr);var Vr,$r=yr.b,Gr=(Vr=yr.Ca>>1)-(yr.I>>$r)>>31;--yr.b,yr.Ca+=Gr,yr.Ca|=1,yr.I-=(Vr+1&Gr)<<$r,ir[ur]=((Tr^Gr)-Gr)*Ni[(0<ji)+0]}return 16}function Lu(ii){var oi=ii.rb[ii.sb-1];oi.la=0,oi.Na=0,Be(ii.zc,0,0,ii.zc.length),ii.ja=0}function Ah(ii,oi){if(ii==null)return 0;if(oi==null)return ko(ii,2,"NULL VP8Io parameter in VP8Decode().");if(!ii.cb&&!Id(ii,oi))return 0;if(e(ii.cb),oi.ac==null||oi.ac(oi)){oi.ob&&(ii.L=0);var fi=sh[ii.L];if(ii.L==2?(ii.yb=0,ii.zb=0):(ii.yb=oi.v-fi>>4,ii.zb=oi.j-fi>>4,0>ii.yb&&(ii.yb=0),0>ii.zb&&(ii.zb=0)),ii.Va=oi.o+15+fi>>4,ii.Hb=oi.va+15+fi>>4,ii.Hb>ii.za&&(ii.Hb=ii.za),ii.Va>ii.Ub&&(ii.Va=ii.Ub),0<ii.L){var Ni=ii.ed;for(fi=0;4>fi;++fi){var ji;if(ii.Qa.Cb){var ir=ii.Qa.Lb[fi];ii.Qa.Fb||(ir+=Ni.Tb)}else ir=Ni.Tb;for(ji=0;1>=ji;++ji){var rr=ii.gd[fi][ji],lr=ir;if(Ni.Pc&&(lr+=Ni.vd[0],ji&&(lr+=Ni.od[0])),0<(lr=0>lr?0:63<lr?63:lr)){var ur=lr;0<Ni.wb&&(ur=4<Ni.wb?ur>>2:ur>>1)>9-Ni.wb&&(ur=9-Ni.wb),1>ur&&(ur=1),rr.dd=ur,rr.tc=2*lr+ur,rr.ld=40<=lr?2:15<=lr?1:0}else rr.tc=0;rr.La=ji}}}fi=0}else ko(ii,6,"Frame setup failed"),fi=ii.a;if(fi=fi==0){if(fi){ii.$c=0,0<ii.Aa||(ii.Ic=kp);e:{fi=ii.Ic,Ni=4*(ur=ii.za);var yr=32*ur,Tr=ur+1,Vr=0<ii.L?ur*(0<ii.Aa?2:1):0,$r=(ii.Aa==2?2:1)*ur;if((rr=Ni+832+(ji=3*(16*fi+sh[ii.L])/2*yr)+(ir=ii.Fa!=null&&0<ii.Fa.length?ii.Kc.c*ii.Kc.i:0))!=rr)fi=0;else{if(rr>ii.Vb){if(ii.Vb=0,ii.Ec=Ue(rr),ii.Fc=0,ii.Ec==null){fi=ko(ii,1,"no memory during frame initialization.");break e}ii.Vb=rr}rr=ii.Ec,lr=ii.Fc,ii.Ac=rr,ii.Bc=lr,lr+=Ni,ii.Gd=He(yr,Sd),ii.Hd=0,ii.rb=He(Tr+1,Ad),ii.sb=1,ii.wa=Vr?He(Vr,Kc):null,ii.Y=0,ii.D.Nb=0,ii.D.wa=ii.wa,ii.D.Y=ii.Y,0<ii.Aa&&(ii.D.Y+=ur),e(!0),ii.oc=rr,ii.pc=lr,lr+=832,ii.ya=He($r,xu),ii.aa=0,ii.D.ya=ii.ya,ii.D.aa=ii.aa,ii.Aa==2&&(ii.D.aa+=ur),ii.R=16*ur,ii.B=8*ur,ur=(yr=sh[ii.L])*ii.R,yr=yr/2*ii.B,ii.sa=rr,ii.ta=lr+ur,ii.qa=ii.sa,ii.ra=ii.ta+16*fi*ii.R+yr,ii.Ha=ii.qa,ii.Ia=ii.ra+8*fi*ii.B+yr,ii.$c=0,lr+=ji,ii.mb=ir?rr:null,ii.nb=ir?lr:null,e(lr+ir<=ii.Fc+ii.Vb),Lu(ii),Be(ii.Ac,ii.Bc,0,Ni),fi=1}}if(fi){if(oi.ka=0,oi.y=ii.sa,oi.O=ii.ta,oi.f=ii.qa,oi.N=ii.ra,oi.ea=ii.Ha,oi.Vd=ii.Ia,oi.fa=ii.R,oi.Rc=ii.B,oi.F=null,oi.J=0,!Yd){for(fi=-255;255>=fi;++fi)na[255+fi]=0>fi?-fi:fi;for(fi=-1020;1020>=fi;++fi)pc[1020+fi]=-128>fi?-128:127<fi?127:fi;for(fi=-112;112>=fi;++fi)Ju[112+fi]=-16>fi?-16:15<fi?15:fi;for(fi=-255;510>=fi;++fi)vu[255+fi]=0>fi?0:255<fi?255:fi;Yd=1}pu=Ih,fc=Sh,Xu=xd,ya=bh,Ya=Td,Do=wd,gu=Du,Wd=Fc,Ku=Gh,Uc=Fu,jc=Fh,Sc=iu,Vc=Gu,mu=Gd,$c=Fd,bc=rc,Zu=uc,Xa=Dh,$l[0]=ic,$l[1]=Ph,$l[2]=Lh,$l[3]=Rh,$l[4]=Md,$l[5]=tu,$l[6]=Nd,$l[7]=Nu,$l[8]=Nh,$l[9]=Mh,Ic[0]=Ld,Ic[1]=xh,Ic[2]=cc,Ic[3]=Qc,Ic[4]=pa,Ic[5]=Th,Ic[6]=Rd,gc[0]=yc,gc[1]=wh,gc[2]=Oh,gc[3]=Ou,gc[4]=Dc,gc[5]=kh,gc[6]=ku,fi=1}else fi=0}fi&&(fi=function(Gr,rs){for(Gr.M=0;Gr.M<Gr.Va;++Gr.M){var Wr,Lr=Gr.Jc[Gr.M&Gr.Xb],Or=Gr.m,es=Gr;for(Wr=0;Wr<es.za;++Wr){var ss=Or,ts=es,Cs=ts.Ac,gs=ts.Bc+4*Wr,Ts=ts.zc,ms=ts.ya[ts.aa+Wr];if(ts.Qa.Bb?ms.$b=gr(ss,ts.Pa.jb[0])?2+gr(ss,ts.Pa.jb[2]):gr(ss,ts.Pa.jb[1]):ms.$b=0,ts.kc&&(ms.Ad=gr(ss,ts.Bd)),ms.Za=!gr(ss,145)+0,ms.Za){var Ys=ms.Ob,Ks=0;for(ts=0;4>ts;++ts){var Hs,js=Ts[0+ts];for(Hs=0;4>Hs;++Hs){js=Cp[Cs[gs+Hs]][js];for(var Qs=hf[gr(ss,js[0])];0<Qs;)Qs=hf[2*Qs+gr(ss,js[Qs])];js=-Qs,Cs[gs+Hs]=js}ke(Ys,Ks,Cs,gs,4),Ks+=4,Ts[0+ts]=js}}else js=gr(ss,156)?gr(ss,128)?1:3:gr(ss,163)?2:0,ms.Ob[0]=js,Be(Cs,gs,js,4),Be(Ts,0,js,4);ms.Dd=gr(ss,142)?gr(ss,114)?gr(ss,183)?1:3:2:0}if(es.m.Ka)return ko(Gr,7,"Premature end-of-partition0 encountered.");for(;Gr.ja<Gr.za;++Gr.ja){if(es=Lr,ss=(Or=Gr).rb[Or.sb-1],Cs=Or.rb[Or.sb+Or.ja],Wr=Or.ya[Or.aa+Or.ja],gs=Or.kc?Wr.Ad:0)ss.la=Cs.la=0,Wr.Za||(ss.Na=Cs.Na=0),Wr.Hc=0,Wr.Gc=0,Wr.ia=0;else{var Js,Bs;if(ss=Cs,Cs=es,gs=Or.Pa.Xc,Ts=Or.ya[Or.aa+Or.ja],ms=Or.pb[Ts.$b],ts=Ts.ad,Ys=0,Ks=Or.rb[Or.sb-1],js=Hs=0,Be(ts,Ys,0,384),Ts.Za)var ea=0,Na=gs[3];else{Qs=Ue(16);var ta=ss.Na+Ks.Na;if(ta=Qu(Cs,gs[1],ta,ms.Eb,0,Qs,0),ss.Na=Ks.Na=(0<ta)+0,1<ta)pu(Qs,0,ts,Ys);else{var ka=Qs[0]+3>>3;for(Qs=0;256>Qs;Qs+=16)ts[Ys+Qs]=ka}ea=1,Na=gs[0]}var Zs=15&ss.la,Ua=15&Ks.la;for(Qs=0;4>Qs;++Qs){var za=1&Ua;for(ka=Bs=0;4>ka;++ka)Zs=Zs>>1|(za=(ta=Qu(Cs,Na,ta=za+(1&Zs),ms.Sc,ea,ts,Ys))>ea)<<7,Bs=Bs<<2|(3<ta?3:1<ta?2:ts[Ys+0]!=0),Ys+=16;Zs>>=4,Ua=Ua>>1|za<<7,Hs=(Hs<<8|Bs)>>>0}for(Na=Zs,ea=Ua>>4,Js=0;4>Js;Js+=2){for(Bs=0,Zs=ss.la>>4+Js,Ua=Ks.la>>4+Js,Qs=0;2>Qs;++Qs){for(za=1&Ua,ka=0;2>ka;++ka)ta=za+(1&Zs),Zs=Zs>>1|(za=0<(ta=Qu(Cs,gs[2],ta,ms.Qc,0,ts,Ys)))<<3,Bs=Bs<<2|(3<ta?3:1<ta?2:ts[Ys+0]!=0),Ys+=16;Zs>>=2,Ua=Ua>>1|za<<5}js|=Bs<<4*Js,Na|=Zs<<4<<Js,ea|=(240&Ua)<<Js}ss.la=Na,Ks.la=ea,Ts.Hc=Hs,Ts.Gc=js,Ts.ia=43690&js?0:ms.ia,gs=!(Hs|js)}if(0<Or.L&&(Or.wa[Or.Y+Or.ja]=Or.gd[Wr.$b][Wr.Za],Or.wa[Or.Y+Or.ja].La|=!gs),es.Ka)return ko(Gr,7,"Premature end-of-file encountered.")}if(Lu(Gr),Or=rs,es=1,Wr=(Lr=Gr).D,ss=0<Lr.L&&Lr.M>=Lr.zb&&Lr.M<=Lr.Va,Lr.Aa==0)e:{if(Wr.M=Lr.M,Wr.uc=ss,zu(Lr,Wr),es=1,Wr=(Bs=Lr.D).Nb,ss=(js=sh[Lr.L])*Lr.R,Cs=js/2*Lr.B,Qs=16*Wr*Lr.R,ka=8*Wr*Lr.B,gs=Lr.sa,Ts=Lr.ta-ss+Qs,ms=Lr.qa,ts=Lr.ra-Cs+ka,Ys=Lr.Ha,Ks=Lr.Ia-Cs+ka,Ua=(Zs=Bs.M)==0,Hs=Zs>=Lr.Va-1,Lr.Aa==2&&zu(Lr,Bs),Bs.uc)for(za=(ta=Lr).D.M,e(ta.D.uc),Bs=ta.yb;Bs<ta.Hb;++Bs){ea=Bs,Na=za;var ra=(da=(To=ta).D).Nb;Js=To.R;var da=da.wa[da.Y+ea],Aa=To.sa,Qa=To.ta+16*ra*Js+16*ea,oc=da.dd,sa=da.tc;if(sa!=0)if(e(3<=sa),To.L==1)0<ea&&bc(Aa,Qa,Js,sa+4),da.La&&Xa(Aa,Qa,Js,sa),0<Na&&$c(Aa,Qa,Js,sa+4),da.La&&Zu(Aa,Qa,Js,sa);else{var mc=To.B,zc=To.qa,yu=To.ra+8*ra*mc+8*ea,wc=To.Ha,To=To.Ia+8*ra*mc+8*ea;ra=da.ld,0<ea&&(Wd(Aa,Qa,Js,sa+4,oc,ra),Uc(zc,yu,wc,To,mc,sa+4,oc,ra)),da.La&&(Sc(Aa,Qa,Js,sa,oc,ra),mu(zc,yu,wc,To,mc,sa,oc,ra)),0<Na&&(gu(Aa,Qa,Js,sa+4,oc,ra),Ku(zc,yu,wc,To,mc,sa+4,oc,ra)),da.La&&(jc(Aa,Qa,Js,sa,oc,ra),Vc(zc,yu,wc,To,mc,sa,oc,ra))}}if(Lr.ia&&alert("todo:DitherRow"),Or.put!=null){if(Bs=16*Zs,Zs=16*(Zs+1),Ua?(Or.y=Lr.sa,Or.O=Lr.ta+Qs,Or.f=Lr.qa,Or.N=Lr.ra+ka,Or.ea=Lr.Ha,Or.W=Lr.Ia+ka):(Bs-=js,Or.y=gs,Or.O=Ts,Or.f=ms,Or.N=ts,Or.ea=Ys,Or.W=Ks),Hs||(Zs-=js),Zs>Or.o&&(Zs=Or.o),Or.F=null,Or.J=null,Lr.Fa!=null&&0<Lr.Fa.length&&Bs<Zs&&(Or.J=Vu(Lr,Or,Bs,Zs-Bs),Or.F=Lr.mb,Or.F==null&&Or.F.length==0)){es=ko(Lr,3,"Could not decode alpha data.");break e}Bs<Or.j&&(js=Or.j-Bs,Bs=Or.j,e(!(1&js)),Or.O+=Lr.R*js,Or.N+=Lr.B*(js>>1),Or.W+=Lr.B*(js>>1),Or.F!=null&&(Or.J+=Or.width*js)),Bs<Zs&&(Or.O+=Or.v,Or.N+=Or.v>>1,Or.W+=Or.v>>1,Or.F!=null&&(Or.J+=Or.v),Or.ka=Bs-Or.j,Or.U=Or.va-Or.v,Or.T=Zs-Bs,es=Or.put(Or))}Wr+1!=Lr.Ic||Hs||(ke(Lr.sa,Lr.ta-ss,gs,Ts+16*Lr.R,ss),ke(Lr.qa,Lr.ra-Cs,ms,ts+8*Lr.B,Cs),ke(Lr.Ha,Lr.Ia-Cs,Ys,Ks+8*Lr.B,Cs))}if(!es)return ko(Gr,6,"Output aborted.")}return 1}(ii,oi)),oi.bc!=null&&oi.bc(oi),fi&=1}return fi?(ii.cb=0,fi):0}function wl(ii,oi,fi,Ni,ji){ji=ii[oi+fi+32*Ni]+(ji>>3),ii[oi+fi+32*Ni]=-256&ji?0>ji?0:255:ji}function Jc(ii,oi,fi,Ni,ji,ir){wl(ii,oi,0,fi,Ni+ji),wl(ii,oi,1,fi,Ni+ir),wl(ii,oi,2,fi,Ni-ir),wl(ii,oi,3,fi,Ni-ji)}function La(ii){return(20091*ii>>16)+ii}function Ru(ii,oi,fi,Ni){var ji,ir=0,rr=Ue(16);for(ji=0;4>ji;++ji){var lr=ii[oi+0]+ii[oi+8],ur=ii[oi+0]-ii[oi+8],yr=(35468*ii[oi+4]>>16)-La(ii[oi+12]),Tr=La(ii[oi+4])+(35468*ii[oi+12]>>16);rr[ir+0]=lr+Tr,rr[ir+1]=ur+yr,rr[ir+2]=ur-yr,rr[ir+3]=lr-Tr,ir+=4,oi++}for(ji=ir=0;4>ji;++ji)lr=(ii=rr[ir+0]+4)+rr[ir+8],ur=ii-rr[ir+8],yr=(35468*rr[ir+4]>>16)-La(rr[ir+12]),wl(fi,Ni,0,0,lr+(Tr=La(rr[ir+4])+(35468*rr[ir+12]>>16))),wl(fi,Ni,1,0,ur+yr),wl(fi,Ni,2,0,ur-yr),wl(fi,Ni,3,0,lr-Tr),ir++,Ni+=32}function wd(ii,oi,fi,Ni){var ji=ii[oi+0]+4,ir=35468*ii[oi+4]>>16,rr=La(ii[oi+4]),lr=35468*ii[oi+1]>>16;Jc(fi,Ni,0,ji+rr,ii=La(ii[oi+1]),lr),Jc(fi,Ni,1,ji+ir,ii,lr),Jc(fi,Ni,2,ji-ir,ii,lr),Jc(fi,Ni,3,ji-rr,ii,lr)}function Sh(ii,oi,fi,Ni,ji){Ru(ii,oi,fi,Ni),ji&&Ru(ii,oi+16,fi,Ni+4)}function xd(ii,oi,fi,Ni){fc(ii,oi+0,fi,Ni,1),fc(ii,oi+32,fi,Ni+128,1)}function bh(ii,oi,fi,Ni){var ji;for(ii=ii[oi+0]+4,ji=0;4>ji;++ji)for(oi=0;4>oi;++oi)wl(fi,Ni,oi,ji,ii)}function Td(ii,oi,fi,Ni){ii[oi+0]&&ya(ii,oi+0,fi,Ni),ii[oi+16]&&ya(ii,oi+16,fi,Ni+4),ii[oi+32]&&ya(ii,oi+32,fi,Ni+128),ii[oi+48]&&ya(ii,oi+48,fi,Ni+128+4)}function Ih(ii,oi,fi,Ni){var ji,ir=Ue(16);for(ji=0;4>ji;++ji){var rr=ii[oi+0+ji]+ii[oi+12+ji],lr=ii[oi+4+ji]+ii[oi+8+ji],ur=ii[oi+4+ji]-ii[oi+8+ji],yr=ii[oi+0+ji]-ii[oi+12+ji];ir[0+ji]=rr+lr,ir[8+ji]=rr-lr,ir[4+ji]=yr+ur,ir[12+ji]=yr-ur}for(ji=0;4>ji;++ji)rr=(ii=ir[0+4*ji]+3)+ir[3+4*ji],lr=ir[1+4*ji]+ir[2+4*ji],ur=ir[1+4*ji]-ir[2+4*ji],yr=ii-ir[3+4*ji],fi[Ni+0]=rr+lr>>3,fi[Ni+16]=yr+ur>>3,fi[Ni+32]=rr-lr>>3,fi[Ni+48]=yr-ur>>3,Ni+=64}function Mu(ii,oi,fi){var Ni,ji=oi-32,ir=Ba,rr=255-ii[ji-1];for(Ni=0;Ni<fi;++Ni){var lr,ur=ir,yr=rr+ii[oi-1];for(lr=0;lr<fi;++lr)ii[oi+lr]=ur[yr+ii[ji+lr]];oi+=32}}function Ph(ii,oi){Mu(ii,oi,4)}function wh(ii,oi){Mu(ii,oi,8)}function xh(ii,oi){Mu(ii,oi,16)}function cc(ii,oi){var fi;for(fi=0;16>fi;++fi)ke(ii,oi+32*fi,ii,oi-32,16)}function Qc(ii,oi){var fi;for(fi=16;0<fi;--fi)Be(ii,oi,ii[oi-1],16),oi+=32}function eu(ii,oi,fi){var Ni;for(Ni=0;16>Ni;++Ni)Be(oi,fi+32*Ni,ii,16)}function Ld(ii,oi){var fi,Ni=16;for(fi=0;16>fi;++fi)Ni+=ii[oi-1+32*fi]+ii[oi+fi-32];eu(Ni>>5,ii,oi)}function pa(ii,oi){var fi,Ni=8;for(fi=0;16>fi;++fi)Ni+=ii[oi-1+32*fi];eu(Ni>>4,ii,oi)}function Th(ii,oi){var fi,Ni=8;for(fi=0;16>fi;++fi)Ni+=ii[oi+fi-32];eu(Ni>>4,ii,oi)}function Rd(ii,oi){eu(128,ii,oi)}function Ns(ii,oi,fi){return ii+2*oi+fi+2>>2}function Lh(ii,oi){var fi,Ni=oi-32;for(Ni=new Uint8Array([Ns(ii[Ni-1],ii[Ni+0],ii[Ni+1]),Ns(ii[Ni+0],ii[Ni+1],ii[Ni+2]),Ns(ii[Ni+1],ii[Ni+2],ii[Ni+3]),Ns(ii[Ni+2],ii[Ni+3],ii[Ni+4])]),fi=0;4>fi;++fi)ke(ii,oi+32*fi,Ni,0,Ni.length)}function Rh(ii,oi){var fi=ii[oi-1],Ni=ii[oi-1+32],ji=ii[oi-1+64],ir=ii[oi-1+96];vr(ii,oi+0,16843009*Ns(ii[oi-1-32],fi,Ni)),vr(ii,oi+32,16843009*Ns(fi,Ni,ji)),vr(ii,oi+64,16843009*Ns(Ni,ji,ir)),vr(ii,oi+96,16843009*Ns(ji,ir,ir))}function ic(ii,oi){var fi,Ni=4;for(fi=0;4>fi;++fi)Ni+=ii[oi+fi-32]+ii[oi-1+32*fi];for(Ni>>=3,fi=0;4>fi;++fi)Be(ii,oi+32*fi,Ni,4)}function Md(ii,oi){var fi=ii[oi-1+0],Ni=ii[oi-1+32],ji=ii[oi-1+64],ir=ii[oi-1-32],rr=ii[oi+0-32],lr=ii[oi+1-32],ur=ii[oi+2-32],yr=ii[oi+3-32];ii[oi+0+96]=Ns(Ni,ji,ii[oi-1+96]),ii[oi+1+96]=ii[oi+0+64]=Ns(fi,Ni,ji),ii[oi+2+96]=ii[oi+1+64]=ii[oi+0+32]=Ns(ir,fi,Ni),ii[oi+3+96]=ii[oi+2+64]=ii[oi+1+32]=ii[oi+0+0]=Ns(rr,ir,fi),ii[oi+3+64]=ii[oi+2+32]=ii[oi+1+0]=Ns(lr,rr,ir),ii[oi+3+32]=ii[oi+2+0]=Ns(ur,lr,rr),ii[oi+3+0]=Ns(yr,ur,lr)}function Nd(ii,oi){var fi=ii[oi+1-32],Ni=ii[oi+2-32],ji=ii[oi+3-32],ir=ii[oi+4-32],rr=ii[oi+5-32],lr=ii[oi+6-32],ur=ii[oi+7-32];ii[oi+0+0]=Ns(ii[oi+0-32],fi,Ni),ii[oi+1+0]=ii[oi+0+32]=Ns(fi,Ni,ji),ii[oi+2+0]=ii[oi+1+32]=ii[oi+0+64]=Ns(Ni,ji,ir),ii[oi+3+0]=ii[oi+2+32]=ii[oi+1+64]=ii[oi+0+96]=Ns(ji,ir,rr),ii[oi+3+32]=ii[oi+2+64]=ii[oi+1+96]=Ns(ir,rr,lr),ii[oi+3+64]=ii[oi+2+96]=Ns(rr,lr,ur),ii[oi+3+96]=Ns(lr,ur,ur)}function tu(ii,oi){var fi=ii[oi-1+0],Ni=ii[oi-1+32],ji=ii[oi-1+64],ir=ii[oi-1-32],rr=ii[oi+0-32],lr=ii[oi+1-32],ur=ii[oi+2-32],yr=ii[oi+3-32];ii[oi+0+0]=ii[oi+1+64]=ir+rr+1>>1,ii[oi+1+0]=ii[oi+2+64]=rr+lr+1>>1,ii[oi+2+0]=ii[oi+3+64]=lr+ur+1>>1,ii[oi+3+0]=ur+yr+1>>1,ii[oi+0+96]=Ns(ji,Ni,fi),ii[oi+0+64]=Ns(Ni,fi,ir),ii[oi+0+32]=ii[oi+1+96]=Ns(fi,ir,rr),ii[oi+1+32]=ii[oi+2+96]=Ns(ir,rr,lr),ii[oi+2+32]=ii[oi+3+96]=Ns(rr,lr,ur),ii[oi+3+32]=Ns(lr,ur,yr)}function Nu(ii,oi){var fi=ii[oi+0-32],Ni=ii[oi+1-32],ji=ii[oi+2-32],ir=ii[oi+3-32],rr=ii[oi+4-32],lr=ii[oi+5-32],ur=ii[oi+6-32],yr=ii[oi+7-32];ii[oi+0+0]=fi+Ni+1>>1,ii[oi+1+0]=ii[oi+0+64]=Ni+ji+1>>1,ii[oi+2+0]=ii[oi+1+64]=ji+ir+1>>1,ii[oi+3+0]=ii[oi+2+64]=ir+rr+1>>1,ii[oi+0+32]=Ns(fi,Ni,ji),ii[oi+1+32]=ii[oi+0+96]=Ns(Ni,ji,ir),ii[oi+2+32]=ii[oi+1+96]=Ns(ji,ir,rr),ii[oi+3+32]=ii[oi+2+96]=Ns(ir,rr,lr),ii[oi+3+64]=Ns(rr,lr,ur),ii[oi+3+96]=Ns(lr,ur,yr)}function Mh(ii,oi){var fi=ii[oi-1+0],Ni=ii[oi-1+32],ji=ii[oi-1+64],ir=ii[oi-1+96];ii[oi+0+0]=fi+Ni+1>>1,ii[oi+2+0]=ii[oi+0+32]=Ni+ji+1>>1,ii[oi+2+32]=ii[oi+0+64]=ji+ir+1>>1,ii[oi+1+0]=Ns(fi,Ni,ji),ii[oi+3+0]=ii[oi+1+32]=Ns(Ni,ji,ir),ii[oi+3+32]=ii[oi+1+64]=Ns(ji,ir,ir),ii[oi+3+64]=ii[oi+2+64]=ii[oi+0+96]=ii[oi+1+96]=ii[oi+2+96]=ii[oi+3+96]=ir}function Nh(ii,oi){var fi=ii[oi-1+0],Ni=ii[oi-1+32],ji=ii[oi-1+64],ir=ii[oi-1+96],rr=ii[oi-1-32],lr=ii[oi+0-32],ur=ii[oi+1-32],yr=ii[oi+2-32];ii[oi+0+0]=ii[oi+2+32]=fi+rr+1>>1,ii[oi+0+32]=ii[oi+2+64]=Ni+fi+1>>1,ii[oi+0+64]=ii[oi+2+96]=ji+Ni+1>>1,ii[oi+0+96]=ir+ji+1>>1,ii[oi+3+0]=Ns(lr,ur,yr),ii[oi+2+0]=Ns(rr,lr,ur),ii[oi+1+0]=ii[oi+3+32]=Ns(fi,rr,lr),ii[oi+1+32]=ii[oi+3+64]=Ns(Ni,fi,rr),ii[oi+1+64]=ii[oi+3+96]=Ns(ji,Ni,fi),ii[oi+1+96]=Ns(ir,ji,Ni)}function Oh(ii,oi){var fi;for(fi=0;8>fi;++fi)ke(ii,oi+32*fi,ii,oi-32,8)}function Ou(ii,oi){var fi;for(fi=0;8>fi;++fi)Be(ii,oi,ii[oi-1],8),oi+=32}function kc(ii,oi,fi){var Ni;for(Ni=0;8>Ni;++Ni)Be(oi,fi+32*Ni,ii,8)}function yc(ii,oi){var fi,Ni=8;for(fi=0;8>fi;++fi)Ni+=ii[oi+fi-32]+ii[oi-1+32*fi];kc(Ni>>4,ii,oi)}function kh(ii,oi){var fi,Ni=4;for(fi=0;8>fi;++fi)Ni+=ii[oi+fi-32];kc(Ni>>3,ii,oi)}function Dc(ii,oi){var fi,Ni=4;for(fi=0;8>fi;++fi)Ni+=ii[oi-1+32*fi];kc(Ni>>3,ii,oi)}function ku(ii,oi){kc(128,ii,oi)}function nu(ii,oi,fi){var Ni=ii[oi-fi],ji=ii[oi+0],ir=3*(ji-Ni)+jh[1020+ii[oi-2*fi]-ii[oi+fi]],rr=Xd[112+(ir+4>>3)];ii[oi-fi]=Ba[255+Ni+Xd[112+(ir+3>>3)]],ii[oi+0]=Ba[255+ji-rr]}function Od(ii,oi,fi,Ni){var ji=ii[oi+0],ir=ii[oi+fi];return Za[255+ii[oi-2*fi]-ii[oi-fi]]>Ni||Za[255+ir-ji]>Ni}function kd(ii,oi,fi,Ni){return 4*Za[255+ii[oi-fi]-ii[oi+0]]+Za[255+ii[oi-2*fi]-ii[oi+fi]]<=Ni}function Dd(ii,oi,fi,Ni,ji){var ir=ii[oi-3*fi],rr=ii[oi-2*fi],lr=ii[oi-fi],ur=ii[oi+0],yr=ii[oi+fi],Tr=ii[oi+2*fi],Vr=ii[oi+3*fi];return 4*Za[255+lr-ur]+Za[255+rr-yr]>Ni?0:Za[255+ii[oi-4*fi]-ir]<=ji&&Za[255+ir-rr]<=ji&&Za[255+rr-lr]<=ji&&Za[255+Vr-Tr]<=ji&&Za[255+Tr-yr]<=ji&&Za[255+yr-ur]<=ji}function Fd(ii,oi,fi,Ni){var ji=2*Ni+1;for(Ni=0;16>Ni;++Ni)kd(ii,oi+Ni,fi,ji)&&nu(ii,oi+Ni,fi)}function rc(ii,oi,fi,Ni){var ji=2*Ni+1;for(Ni=0;16>Ni;++Ni)kd(ii,oi+Ni*fi,1,ji)&&nu(ii,oi+Ni*fi,1)}function uc(ii,oi,fi,Ni){var ji;for(ji=3;0<ji;--ji)Fd(ii,oi+=4*fi,fi,Ni)}function Dh(ii,oi,fi,Ni){var ji;for(ji=3;0<ji;--ji)rc(ii,oi+=4,fi,Ni)}function _c(ii,oi,fi,Ni,ji,ir,rr,lr){for(ir=2*ir+1;0<ji--;){if(Dd(ii,oi,fi,ir,rr))if(Od(ii,oi,fi,lr))nu(ii,oi,fi);else{var ur=ii,yr=oi,Tr=fi,Vr=ur[yr-2*Tr],$r=ur[yr-Tr],Gr=ur[yr+0],rs=ur[yr+Tr],Wr=ur[yr+2*Tr],Lr=27*(es=jh[1020+3*(Gr-$r)+jh[1020+Vr-rs]])+63>>7,Or=18*es+63>>7,es=9*es+63>>7;ur[yr-3*Tr]=Ba[255+ur[yr-3*Tr]+es],ur[yr-2*Tr]=Ba[255+Vr+Or],ur[yr-Tr]=Ba[255+$r+Lr],ur[yr+0]=Ba[255+Gr-Lr],ur[yr+Tr]=Ba[255+rs-Or],ur[yr+2*Tr]=Ba[255+Wr-es]}oi+=Ni}}function kl(ii,oi,fi,Ni,ji,ir,rr,lr){for(ir=2*ir+1;0<ji--;){if(Dd(ii,oi,fi,ir,rr))if(Od(ii,oi,fi,lr))nu(ii,oi,fi);else{var ur=ii,yr=oi,Tr=fi,Vr=ur[yr-Tr],$r=ur[yr+0],Gr=ur[yr+Tr],rs=Xd[112+((Wr=3*($r-Vr))+4>>3)],Wr=Xd[112+(Wr+3>>3)],Lr=rs+1>>1;ur[yr-2*Tr]=Ba[255+ur[yr-2*Tr]+Lr],ur[yr-Tr]=Ba[255+Vr+Wr],ur[yr+0]=Ba[255+$r-rs],ur[yr+Tr]=Ba[255+Gr-Lr]}oi+=Ni}}function Du(ii,oi,fi,Ni,ji,ir){_c(ii,oi,fi,1,16,Ni,ji,ir)}function Fc(ii,oi,fi,Ni,ji,ir){_c(ii,oi,1,fi,16,Ni,ji,ir)}function Fh(ii,oi,fi,Ni,ji,ir){var rr;for(rr=3;0<rr;--rr)kl(ii,oi+=4*fi,fi,1,16,Ni,ji,ir)}function iu(ii,oi,fi,Ni,ji,ir){var rr;for(rr=3;0<rr;--rr)kl(ii,oi+=4,1,fi,16,Ni,ji,ir)}function Gh(ii,oi,fi,Ni,ji,ir,rr,lr){_c(ii,oi,ji,1,8,ir,rr,lr),_c(fi,Ni,ji,1,8,ir,rr,lr)}function Fu(ii,oi,fi,Ni,ji,ir,rr,lr){_c(ii,oi,1,ji,8,ir,rr,lr),_c(fi,Ni,1,ji,8,ir,rr,lr)}function Gu(ii,oi,fi,Ni,ji,ir,rr,lr){kl(ii,oi+4*ji,ji,1,8,ir,rr,lr),kl(fi,Ni+4*ji,ji,1,8,ir,rr,lr)}function Gd(ii,oi,fi,Ni,ji,ir,rr,lr){kl(ii,oi+4,1,ji,8,ir,rr,lr),kl(fi,Ni+4,1,ji,8,ir,rr,lr)}function ru(){this.ba=new Xs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Fs,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Bu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Uu(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bd(){this.ua=0,this.Wa=new nr,this.vb=new nr,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Oi,this.yc=new ci}function Bh(){this.xb=this.a=0,this.l=new Zc,this.ca=new Xs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new Li,this.Pb=0,this.wd=new Li,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bd,this.ab=0,this.gc=He(4,Uu),this.Oc=0}function su(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Zc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Gc(ii,oi,fi,Ni,ji,ir,rr){for(ii=ii==null?0:ii[oi+0],oi=0;oi<rr;++oi)ji[ir+oi]=ii+fi[Ni+oi]&255,ii=ji[ir+oi]}function ju(ii,oi,fi,Ni,ji,ir,rr){var lr;if(ii==null)Gc(null,null,fi,Ni,ji,ir,rr);else for(lr=0;lr<rr;++lr)ji[ir+lr]=ii[oi+lr]+fi[Ni+lr]&255}function Cc(ii,oi,fi,Ni,ji,ir,rr){if(ii==null)Gc(null,null,fi,Ni,ji,ir,rr);else{var lr,ur=ii[oi+0],yr=ur,Tr=ur;for(lr=0;lr<rr;++lr)yr=Tr+(ur=ii[oi+lr])-yr,Tr=fi[Ni+lr]+(-256&yr?0>yr?0:255:yr)&255,yr=ur,ji[ir+lr]=Tr}}function Vu(ii,oi,fi,Ni){var ji=oi.width,ir=oi.o;if(e(ii!=null&&oi!=null),0>fi||0>=Ni||fi+Ni>ir)return null;if(!ii.Cc){if(ii.ga==null){var rr;if(ii.ga=new su,(rr=ii.ga==null)||(rr=oi.width*oi.o,e(ii.Gb.length==0),ii.Gb=Ue(rr),ii.Uc=0,ii.Gb==null?rr=0:(ii.mb=ii.Gb,ii.nb=ii.Uc,ii.rc=null,rr=1),rr=!rr),!rr){rr=ii.ga;var lr=ii.Fa,ur=ii.P,yr=ii.qc,Tr=ii.mb,Vr=ii.nb,$r=ur+1,Gr=yr-1,rs=rr.l;if(e(lr!=null&&Tr!=null&&oi!=null),Pc[0]=null,Pc[1]=Gc,Pc[2]=ju,Pc[3]=Cc,rr.ca=Tr,rr.tb=Vr,rr.c=oi.width,rr.i=oi.height,e(0<rr.c&&0<rr.i),1>=yr)oi=0;else if(rr.$a=lr[ur+0]>>0&3,rr.Z=lr[ur+0]>>2&3,rr.Lc=lr[ur+0]>>4&3,ur=lr[ur+0]>>6&3,0>rr.$a||1<rr.$a||4<=rr.Z||1<rr.Lc||ur)oi=0;else if(rs.put=Eo,rs.ac=qs,rs.bc=Rs,rs.ma=rr,rs.width=oi.width,rs.height=oi.height,rs.Da=oi.Da,rs.v=oi.v,rs.va=oi.va,rs.j=oi.j,rs.o=oi.o,rr.$a)e:{e(rr.$a==1),oi=la();t:for(;;){if(oi==null){oi=0;break e}if(e(rr!=null),rr.mc=oi,oi.c=rr.c,oi.i=rr.i,oi.l=rr.l,oi.l.ma=rr,oi.l.width=rr.c,oi.l.height=rr.i,oi.a=0,sr(oi.m,lr,$r,Gr),!nc(rr.c,rr.i,1,oi,null)||(oi.ab==1&&oi.gc[0].hc==3&&ma(oi.s)?(rr.ic=1,lr=oi.c*oi.i,oi.Ta=null,oi.Ua=0,oi.V=Ue(lr),oi.Ba=0,oi.V==null?(oi.a=1,oi=0):oi=1):(rr.ic=0,oi=Oc(oi,rr.c)),!oi))break t;oi=1;break e}rr.mc=null,oi=0}else oi=Gr>=rr.c*rr.i;rr=!oi}if(rr)return null;ii.ga.Lc!=1?ii.Ga=0:Ni=ir-fi}e(ii.ga!=null),e(fi+Ni<=ir);e:{if(oi=(lr=ii.ga).c,ir=lr.l.o,lr.$a==0){if($r=ii.rc,Gr=ii.Vc,rs=ii.Fa,ur=ii.P+1+fi*oi,yr=ii.mb,Tr=ii.nb+fi*oi,e(ur<=ii.P+ii.qc),lr.Z!=0)for(e(Pc[lr.Z]!=null),rr=0;rr<Ni;++rr)Pc[lr.Z]($r,Gr,rs,ur,yr,Tr,oi),$r=yr,Gr=Tr,Tr+=oi,ur+=oi;else for(rr=0;rr<Ni;++rr)ke(yr,Tr,rs,ur,oi),$r=yr,Gr=Tr,Tr+=oi,ur+=oi;ii.rc=$r,ii.Vc=Gr}else{if(e(lr.mc!=null),oi=fi+Ni,e((rr=lr.mc)!=null),e(oi<=rr.i),rr.C>=oi)oi=1;else if(lr.ic||jr(),lr.ic){lr=rr.V,$r=rr.Ba,Gr=rr.c;var Wr=rr.i,Lr=(rs=1,ur=rr.$/Gr,yr=rr.$%Gr,Tr=rr.m,Vr=rr.s,rr.$),Or=Gr*Wr,es=Gr*oi,ss=Vr.wc,ts=Lr<es?yo(Vr,yr,ur):null;e(Lr<=Or),e(oi<=Wr),e(ma(Vr));t:for(;;){for(;!Tr.h&&Lr<es;){if(yr&ss||(ts=yo(Vr,yr,ur)),e(ts!=null),_r(Tr),256>(Wr=zs(ts.G[0],ts.H[0],Tr)))lr[$r+Lr]=Wr,++Lr,++yr>=Gr&&(yr=0,++ur<=oi&&!(ur%16)&&Fa(rr,ur));else{if(!(280>Wr)){rs=0;break t}Wr=bo(Wr-256,Tr);var Cs,gs=zs(ts.G[4],ts.H[4],Tr);if(_r(Tr),!(Lr>=(gs=Us(Gr,gs=bo(gs,Tr)))&&Or-Lr>=Wr)){rs=0;break t}for(Cs=0;Cs<Wr;++Cs)lr[$r+Lr+Cs]=lr[$r+Lr+Cs-gs];for(Lr+=Wr,yr+=Wr;yr>=Gr;)yr-=Gr,++ur<=oi&&!(ur%16)&&Fa(rr,ur);Lr<es&&yr&ss&&(ts=yo(Vr,yr,ur))}e(Tr.h==hr(Tr))}Fa(rr,ur>oi?oi:ur);break t}!rs||Tr.h&&Lr<Or?(rs=0,rr.a=Tr.h?5:3):rr.$=Lr,oi=rs}else oi=xa(rr,rr.V,rr.Ba,rr.c,rr.i,oi,qc);if(!oi){Ni=0;break e}}fi+Ni>=ir&&(ii.Cc=1),Ni=1}if(!Ni)return null;if(ii.Cc&&((Ni=ii.ga)!=null&&(Ni.mc=null),ii.ga=null,0<ii.Ga))return alert("todo:WebPDequantizeLevels"),null}return ii.nb+fi*ji}function ui(ii,oi,fi,Ni,ji,ir){for(;0<ji--;){var rr,lr=ii,ur=oi+(fi?1:0),yr=ii,Tr=oi+(fi?0:3);for(rr=0;rr<Ni;++rr){var Vr=yr[Tr+4*rr];Vr!=255&&(Vr*=32897,lr[ur+4*rr+0]=lr[ur+4*rr+0]*Vr>>23,lr[ur+4*rr+1]=lr[ur+4*rr+1]*Vr>>23,lr[ur+4*rr+2]=lr[ur+4*rr+2]*Vr>>23)}oi+=ir}}function Vi(ii,oi,fi,Ni,ji){for(;0<Ni--;){var ir;for(ir=0;ir<fi;++ir){var rr=ii[oi+2*ir+0],lr=15&(yr=ii[oi+2*ir+1]),ur=4369*lr,yr=(240&yr|yr>>4)*ur>>16;ii[oi+2*ir+0]=(240&rr|rr>>4)*ur>>16&240|(15&rr|rr<<4)*ur>>16>>4&15,ii[oi+2*ir+1]=240&yr|lr}oi+=ji}}function Er(ii,oi,fi,Ni,ji,ir,rr,lr){var ur,yr,Tr=255;for(yr=0;yr<ji;++yr){for(ur=0;ur<Ni;++ur){var Vr=ii[oi+ur];ir[rr+4*ur]=Vr,Tr&=Vr}oi+=fi,rr+=lr}return Tr!=255}function Pr(ii,oi,fi,Ni,ji){var ir;for(ir=0;ir<ji;++ir)fi[Ni+ir]=ii[oi+ir]>>8}function jr(){Ka=ui,ho=Vi,go=Er,$o=Pr}function Kr(ii,oi,fi){vi[ii]=function(Ni,ji,ir,rr,lr,ur,yr,Tr,Vr,$r,Gr,rs,Wr,Lr,Or,es,ss){var ts,Cs=ss-1>>1,gs=lr[ur+0]|yr[Tr+0]<<16,Ts=Vr[$r+0]|Gr[rs+0]<<16;e(Ni!=null);var ms=3*gs+Ts+131074>>2;for(oi(Ni[ji+0],255&ms,ms>>16,Wr,Lr),ir!=null&&(ms=3*Ts+gs+131074>>2,oi(ir[rr+0],255&ms,ms>>16,Or,es)),ts=1;ts<=Cs;++ts){var Ys=lr[ur+ts]|yr[Tr+ts]<<16,Ks=Vr[$r+ts]|Gr[rs+ts]<<16,Hs=gs+Ys+Ts+Ks+524296,js=Hs+2*(Ys+Ts)>>3;ms=js+gs>>1,gs=(Hs=Hs+2*(gs+Ks)>>3)+Ys>>1,oi(Ni[ji+2*ts-1],255&ms,ms>>16,Wr,Lr+(2*ts-1)*fi),oi(Ni[ji+2*ts-0],255&gs,gs>>16,Wr,Lr+(2*ts-0)*fi),ir!=null&&(ms=Hs+Ts>>1,gs=js+Ks>>1,oi(ir[rr+2*ts-1],255&ms,ms>>16,Or,es+(2*ts-1)*fi),oi(ir[rr+2*ts+0],255&gs,gs>>16,Or,es+(2*ts+0)*fi)),gs=Ys,Ts=Ks}1&ss||(ms=3*gs+Ts+131074>>2,oi(Ni[ji+ss-1],255&ms,ms>>16,Wr,Lr+(ss-1)*fi),ir!=null&&(ms=3*Ts+gs+131074>>2,oi(ir[rr+ss-1],255&ms,ms>>16,Or,es+(ss-1)*fi)))}}function as(){Ja[Zd]=bp,Ja[Jd]=pf,Ja[cf]=Ip,Ja[eh]=gf,Ja[th]=mf,Ja[Vh]=vf,Ja[uf]=Pp,Ja[$h]=pf,Ja[zh]=gf,Ja[nh]=mf,Ja[Hh]=vf}function _s(ii){return ii&-16384?0>ii?0:255:ii>>wp}function Ps(ii,oi){return _s((19077*ii>>8)+(26149*oi>>8)-14234)}function Gs(ii,oi,fi){return _s((19077*ii>>8)-(6419*oi>>8)-(13320*fi>>8)+8708)}function Os(ii,oi){return _s((19077*ii>>8)+(33050*oi>>8)-17685)}function Vs(ii,oi,fi,Ni,ji){Ni[ji+0]=Ps(ii,fi),Ni[ji+1]=Gs(ii,oi,fi),Ni[ji+2]=Os(ii,oi)}function Io(ii,oi,fi,Ni,ji){Ni[ji+0]=Os(ii,oi),Ni[ji+1]=Gs(ii,oi,fi),Ni[ji+2]=Ps(ii,fi)}function xo(ii,oi,fi,Ni,ji){var ir=Gs(ii,oi,fi);oi=ir<<3&224|Os(ii,oi)>>3,Ni[ji+0]=248&Ps(ii,fi)|ir>>5,Ni[ji+1]=oi}function Jo(ii,oi,fi,Ni,ji){var ir=240&Os(ii,oi)|15;Ni[ji+0]=240&Ps(ii,fi)|Gs(ii,oi,fi)>>4,Ni[ji+1]=ir}function ga(ii,oi,fi,Ni,ji){Ni[ji+0]=255,Vs(ii,oi,fi,Ni,ji+1)}function ia(ii,oi,fi,Ni,ji){Io(ii,oi,fi,Ni,ji),Ni[ji+3]=255}function Dl(ii,oi,fi,Ni,ji){Vs(ii,oi,fi,Ni,ji),Ni[ji+3]=255}function Ga(ii,oi){return 0>ii?0:ii>oi?oi:ii}function sc(ii,oi,fi){vi[ii]=function(Ni,ji,ir,rr,lr,ur,yr,Tr,Vr){for(var $r=Tr+(-2&Vr)*fi;Tr!=$r;)oi(Ni[ji+0],ir[rr+0],lr[ur+0],yr,Tr),oi(Ni[ji+1],ir[rr+0],lr[ur+0],yr,Tr+fi),ji+=2,++rr,++ur,Tr+=2*fi;1&Vr&&oi(Ni[ji+0],ir[rr+0],lr[ur+0],yr,Tr)}}function Ud(ii,oi,fi){return fi==0?ii==0?oi==0?6:5:oi==0?4:0:fi}function $u(ii,oi,fi,Ni,ji){switch(ii>>>30){case 3:fc(oi,fi,Ni,ji,0);break;case 2:Do(oi,fi,Ni,ji);break;case 1:ya(oi,fi,Ni,ji)}}function zu(ii,oi){var fi,Ni,ji=oi.M,ir=oi.Nb,rr=ii.oc,lr=ii.pc+40,ur=ii.oc,yr=ii.pc+584,Tr=ii.oc,Vr=ii.pc+600;for(fi=0;16>fi;++fi)rr[lr+32*fi-1]=129;for(fi=0;8>fi;++fi)ur[yr+32*fi-1]=129,Tr[Vr+32*fi-1]=129;for(0<ji?rr[lr-1-32]=ur[yr-1-32]=Tr[Vr-1-32]=129:(Be(rr,lr-32-1,127,21),Be(ur,yr-32-1,127,9),Be(Tr,Vr-32-1,127,9)),Ni=0;Ni<ii.za;++Ni){var $r=oi.ya[oi.aa+Ni];if(0<Ni){for(fi=-1;16>fi;++fi)ke(rr,lr+32*fi-4,rr,lr+32*fi+12,4);for(fi=-1;8>fi;++fi)ke(ur,yr+32*fi-4,ur,yr+32*fi+4,4),ke(Tr,Vr+32*fi-4,Tr,Vr+32*fi+4,4)}var Gr=ii.Gd,rs=ii.Hd+Ni,Wr=$r.ad,Lr=$r.Hc;if(0<ji&&(ke(rr,lr-32,Gr[rs].y,0,16),ke(ur,yr-32,Gr[rs].f,0,8),ke(Tr,Vr-32,Gr[rs].ea,0,8)),$r.Za){var Or=rr,es=lr-32+16;for(0<ji&&(Ni>=ii.za-1?Be(Or,es,Gr[rs].y[15],4):ke(Or,es,Gr[rs+1].y,0,4)),fi=0;4>fi;fi++)Or[es+128+fi]=Or[es+256+fi]=Or[es+384+fi]=Or[es+0+fi];for(fi=0;16>fi;++fi,Lr<<=2)Or=rr,es=lr+_f[fi],$l[$r.Ob[fi]](Or,es),$u(Lr,Wr,16*+fi,Or,es)}else if(Or=Ud(Ni,ji,$r.Ob[0]),Ic[Or](rr,lr),Lr!=0)for(fi=0;16>fi;++fi,Lr<<=2)$u(Lr,Wr,16*+fi,rr,lr+_f[fi]);for(fi=$r.Gc,Or=Ud(Ni,ji,$r.Dd),gc[Or](ur,yr),gc[Or](Tr,Vr),Lr=Wr,Or=ur,es=yr,255&($r=fi>>0)&&(170&$r?Xu(Lr,256,Or,es):Ya(Lr,256,Or,es)),$r=Tr,Lr=Vr,255&(fi>>=8)&&(170&fi?Xu(Wr,320,$r,Lr):Ya(Wr,320,$r,Lr)),ji<ii.Ub-1&&(ke(Gr[rs].y,0,rr,lr+480,16),ke(Gr[rs].f,0,ur,yr+224,8),ke(Gr[rs].ea,0,Tr,Vr+224,8)),fi=8*ir*ii.B,Gr=ii.sa,rs=ii.ta+16*Ni+16*ir*ii.R,Wr=ii.qa,$r=ii.ra+8*Ni+fi,Lr=ii.Ha,Or=ii.Ia+8*Ni+fi,fi=0;16>fi;++fi)ke(Gr,rs+fi*ii.R,rr,lr+32*fi,16);for(fi=0;8>fi;++fi)ke(Wr,$r+fi*ii.B,ur,yr+32*fi,8),ke(Lr,Or+fi*ii.B,Tr,Vr+32*fi,8)}}function au(ii,oi,fi,Ni,ji,ir,rr,lr,ur){var yr=[0],Tr=[0],Vr=0,$r=ur!=null?ur.kd:0,Gr=ur??new Bu;if(ii==null||12>fi)return 7;Gr.data=ii,Gr.w=oi,Gr.ha=fi,oi=[oi],fi=[fi],Gr.gb=[Gr.gb];e:{var rs=oi,Wr=fi,Lr=Gr.gb;if(e(ii!=null),e(Wr!=null),e(Lr!=null),Lr[0]=0,12<=Wr[0]&&!Te(ii,rs[0],"RIFF")){if(Te(ii,rs[0]+8,"WEBP")){Lr=3;break e}var Or=tr(ii,rs[0]+4);if(12>Or||4294967286<Or){Lr=3;break e}if($r&&Or>Wr[0]-8){Lr=7;break e}Lr[0]=Or,rs[0]+=12,Wr[0]-=12}Lr=0}if(Lr!=0)return Lr;for(Or=0<Gr.gb[0],fi=fi[0];;){e:{var es=ii;Wr=oi,Lr=fi;var ss=yr,ts=Tr,Cs=rs=[0];if((ms=Vr=[Vr])[0]=0,8>Lr[0])Lr=7;else{if(!Te(es,Wr[0],"VP8X")){if(tr(es,Wr[0]+4)!=10){Lr=3;break e}if(18>Lr[0]){Lr=7;break e}var gs=tr(es,Wr[0]+8),Ts=1+zr(es,Wr[0]+12);if(2147483648<=Ts*(es=1+zr(es,Wr[0]+15))){Lr=3;break e}Cs!=null&&(Cs[0]=gs),ss!=null&&(ss[0]=Ts),ts!=null&&(ts[0]=es),Wr[0]+=18,Lr[0]-=18,ms[0]=1}Lr=0}}if(Vr=Vr[0],rs=rs[0],Lr!=0)return Lr;if(Wr=!!(2&rs),!Or&&Vr)return 3;if(ir!=null&&(ir[0]=!!(16&rs)),rr!=null&&(rr[0]=Wr),lr!=null&&(lr[0]=0),rr=yr[0],rs=Tr[0],Vr&&Wr&&ur==null){Lr=0;break}if(4>fi){Lr=7;break}if(Or&&Vr||!Or&&!Vr&&!Te(ii,oi[0],"ALPH")){fi=[fi],Gr.na=[Gr.na],Gr.P=[Gr.P],Gr.Sa=[Gr.Sa];e:{gs=ii,Lr=oi,Or=fi;var ms=Gr.gb;ss=Gr.na,ts=Gr.P,Cs=Gr.Sa,Ts=22,e(gs!=null),e(Or!=null),es=Lr[0];var Ys=Or[0];for(e(ss!=null),e(Cs!=null),ss[0]=null,ts[0]=null,Cs[0]=0;;){if(Lr[0]=es,Or[0]=Ys,8>Ys){Lr=7;break e}var Ks=tr(gs,es+4);if(4294967286<Ks){Lr=3;break e}var Hs=8+Ks+1&-2;if(Ts+=Hs,0<ms&&Ts>ms){Lr=3;break e}if(!Te(gs,es,"VP8 ")||!Te(gs,es,"VP8L")){Lr=0;break e}if(Ys[0]<Hs){Lr=7;break e}Te(gs,es,"ALPH")||(ss[0]=gs,ts[0]=es+8,Cs[0]=Ks),es+=Hs,Ys-=Hs}}if(fi=fi[0],Gr.na=Gr.na[0],Gr.P=Gr.P[0],Gr.Sa=Gr.Sa[0],Lr!=0)break}fi=[fi],Gr.Ja=[Gr.Ja],Gr.xa=[Gr.xa];e:if(ms=ii,Lr=oi,Or=fi,ss=Gr.gb[0],ts=Gr.Ja,Cs=Gr.xa,gs=Lr[0],es=!Te(ms,gs,"VP8 "),Ts=!Te(ms,gs,"VP8L"),e(ms!=null),e(Or!=null),e(ts!=null),e(Cs!=null),8>Or[0])Lr=7;else{if(es||Ts){if(ms=tr(ms,gs+4),12<=ss&&ms>ss-12){Lr=3;break e}if($r&&ms>Or[0]-8){Lr=7;break e}ts[0]=ms,Lr[0]+=8,Or[0]-=8,Cs[0]=Ts}else Cs[0]=5<=Or[0]&&ms[gs+0]==47&&!(ms[gs+4]>>5),ts[0]=Or[0];Lr=0}if(fi=fi[0],Gr.Ja=Gr.Ja[0],Gr.xa=Gr.xa[0],oi=oi[0],Lr!=0)break;if(4294967286<Gr.Ja)return 3;if(lr==null||Wr||(lr[0]=Gr.xa?2:1),rr=[rr],rs=[rs],Gr.xa){if(5>fi){Lr=7;break}lr=rr,$r=rs,Wr=ir,ii==null||5>fi?ii=0:5<=fi&&ii[oi+0]==47&&!(ii[oi+4]>>5)?(Or=[0],ms=[0],ss=[0],sr(ts=new Li,ii,oi,fi),Es(ts,Or,ms,ss)?(lr!=null&&(lr[0]=Or[0]),$r!=null&&($r[0]=ms[0]),Wr!=null&&(Wr[0]=ss[0]),ii=1):ii=0):ii=0}else{if(10>fi){Lr=7;break}lr=rs,ii==null||10>fi||!bd(ii,oi+3,fi-3)?ii=0:($r=ii[oi+0]|ii[oi+1]<<8|ii[oi+2]<<16,Wr=16383&(ii[oi+7]<<8|ii[oi+6]),ii=16383&(ii[oi+9]<<8|ii[oi+8]),1&$r||3<($r>>1&7)||!($r>>4&1)||$r>>5>=Gr.Ja||!Wr||!ii?ii=0:(rr&&(rr[0]=Wr),lr&&(lr[0]=ii),ii=1))}if(!ii||(rr=rr[0],rs=rs[0],Vr&&(yr[0]!=rr||Tr[0]!=rs)))return 3;ur!=null&&(ur[0]=Gr,ur.offset=oi-ur.w,e(4294967286>oi-ur.w),e(ur.offset==ur.ha-fi));break}return Lr==0||Lr==7&&Vr&&ur==null?(ir!=null&&(ir[0]|=Gr.na!=null&&0<Gr.na.length),Ni!=null&&(Ni[0]=rr),ji!=null&&(ji[0]=rs),0):Lr}function Hu(ii,oi,fi){var Ni=oi.width,ji=oi.height,ir=0,rr=0,lr=Ni,ur=ji;if(oi.Da=ii!=null&&0<ii.Da,oi.Da&&(lr=ii.cd,ur=ii.bd,ir=ii.v,rr=ii.j,11>fi||(ir&=-2,rr&=-2),0>ir||0>rr||0>=lr||0>=ur||ir+lr>Ni||rr+ur>ji))return 0;if(oi.v=ir,oi.j=rr,oi.va=ir+lr,oi.o=rr+ur,oi.U=lr,oi.T=ur,oi.da=ii!=null&&0<ii.da,oi.da){if(!Dr(lr,ur,fi=[ii.ib],ir=[ii.hb]))return 0;oi.ib=fi[0],oi.hb=ir[0]}return oi.ob=ii!=null&&ii.ob,oi.Kb=ii==null||!ii.Sd,oi.da&&(oi.ob=oi.ib<3*Ni/4&&oi.hb<3*ji/4,oi.Kb=0),1}function qu(ii){if(ii==null)return 2;if(11>ii.S){var oi=ii.f.RGBA;oi.fb+=(ii.height-1)*oi.A,oi.A=-oi.A}else oi=ii.f.kb,ii=ii.height,oi.O+=(ii-1)*oi.fa,oi.fa=-oi.fa,oi.N+=(ii-1>>1)*oi.Ab,oi.Ab=-oi.Ab,oi.W+=(ii-1>>1)*oi.Db,oi.Db=-oi.Db,oi.F!=null&&(oi.J+=(ii-1)*oi.lb,oi.lb=-oi.lb);return 0}function cu(ii,oi,fi,Ni){if(Ni==null||0>=ii||0>=oi)return 2;if(fi!=null){if(fi.Da){var ji=fi.cd,ir=fi.bd,rr=-2&fi.v,lr=-2&fi.j;if(0>rr||0>lr||0>=ji||0>=ir||rr+ji>ii||lr+ir>oi)return 2;ii=ji,oi=ir}if(fi.da){if(!Dr(ii,oi,ji=[fi.ib],ir=[fi.hb]))return 2;ii=ji[0],oi=ir[0]}}Ni.width=ii,Ni.height=oi;e:{var ur=Ni.width,yr=Ni.height;if(ii=Ni.S,0>=ur||0>=yr||!(ii>=Zd&&13>ii))ii=2;else{if(0>=Ni.Rd&&Ni.sd==null){rr=ir=ji=oi=0;var Tr=(lr=ur*Cf[ii])*yr;if(11>ii||(ir=(yr+1)/2*(oi=(ur+1)/2),ii==12&&(rr=(ji=ur)*yr)),(yr=Ue(Tr+2*ir+rr))==null){ii=1;break e}Ni.sd=yr,11>ii?((ur=Ni.f.RGBA).eb=yr,ur.fb=0,ur.A=lr,ur.size=Tr):((ur=Ni.f.kb).y=yr,ur.O=0,ur.fa=lr,ur.Fd=Tr,ur.f=yr,ur.N=0+Tr,ur.Ab=oi,ur.Cd=ir,ur.ea=yr,ur.W=0+Tr+ir,ur.Db=oi,ur.Ed=ir,ii==12&&(ur.F=yr,ur.J=0+Tr+2*ir),ur.Tc=rr,ur.lb=ji)}if(oi=1,ji=Ni.S,ir=Ni.width,rr=Ni.height,ji>=Zd&&13>ji)if(11>ji)ii=Ni.f.RGBA,oi&=(lr=Math.abs(ii.A))*(rr-1)+ir<=ii.size,oi&=lr>=ir*Cf[ji],oi&=ii.eb!=null;else{ii=Ni.f.kb,lr=(ir+1)/2,Tr=(rr+1)/2,ur=Math.abs(ii.fa),yr=Math.abs(ii.Ab);var Vr=Math.abs(ii.Db),$r=Math.abs(ii.lb),Gr=$r*(rr-1)+ir;oi&=ur*(rr-1)+ir<=ii.Fd,oi&=yr*(Tr-1)+lr<=ii.Cd,oi=(oi&=Vr*(Tr-1)+lr<=ii.Ed)&ur>=ir&yr>=lr&Vr>=lr,oi&=ii.y!=null,oi&=ii.f!=null,oi&=ii.ea!=null,ji==12&&(oi&=$r>=ir,oi&=Gr<=ii.Tc,oi&=ii.F!=null)}else oi=0;ii=oi?0:2}}return ii!=0||fi!=null&&fi.fd&&(ii=qu(Ni)),ii}var ca=64,uu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],du=24,hu=32,Wu=8,Ra=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Mr("Predictor0","PredictorAdd0"),vi.Predictor0=function(){return 4278190080},vi.Predictor1=function(ii){return ii},vi.Predictor2=function(ii,oi,fi){return oi[fi+0]},vi.Predictor3=function(ii,oi,fi){return oi[fi+1]},vi.Predictor4=function(ii,oi,fi){return oi[fi-1]},vi.Predictor5=function(ii,oi,fi){return Nr(Nr(ii,oi[fi+1]),oi[fi+0])},vi.Predictor6=function(ii,oi,fi){return Nr(ii,oi[fi-1])},vi.Predictor7=function(ii,oi,fi){return Nr(ii,oi[fi+0])},vi.Predictor8=function(ii,oi,fi){return Nr(oi[fi-1],oi[fi+0])},vi.Predictor9=function(ii,oi,fi){return Nr(oi[fi+0],oi[fi+1])},vi.Predictor10=function(ii,oi,fi){return Nr(Nr(ii,oi[fi-1]),Nr(oi[fi+0],oi[fi+1]))},vi.Predictor11=function(ii,oi,fi){var Ni=oi[fi+0];return 0>=br(Ni>>24&255,ii>>24&255,(oi=oi[fi-1])>>24&255)+br(Ni>>16&255,ii>>16&255,oi>>16&255)+br(Ni>>8&255,ii>>8&255,oi>>8&255)+br(255&Ni,255&ii,255&oi)?Ni:ii},vi.Predictor12=function(ii,oi,fi){var Ni=oi[fi+0];return(Ar((ii>>24&255)+(Ni>>24&255)-((oi=oi[fi-1])>>24&255))<<24|Ar((ii>>16&255)+(Ni>>16&255)-(oi>>16&255))<<16|Ar((ii>>8&255)+(Ni>>8&255)-(oi>>8&255))<<8|Ar((255&ii)+(255&Ni)-(255&oi)))>>>0},vi.Predictor13=function(ii,oi,fi){var Ni=oi[fi-1];return(Sr((ii=Nr(ii,oi[fi+0]))>>24&255,Ni>>24&255)<<24|Sr(ii>>16&255,Ni>>16&255)<<16|Sr(ii>>8&255,Ni>>8&255)<<8|Sr(ii>>0&255,Ni>>0&255))>>>0};var Uh=vi.PredictorAdd0;vi.PredictorAdd1=Br,Mr("Predictor2","PredictorAdd2"),Mr("Predictor3","PredictorAdd3"),Mr("Predictor4","PredictorAdd4"),Mr("Predictor5","PredictorAdd5"),Mr("Predictor6","PredictorAdd6"),Mr("Predictor7","PredictorAdd7"),Mr("Predictor8","PredictorAdd8"),Mr("Predictor9","PredictorAdd9"),Mr("Predictor10","PredictorAdd10"),Mr("Predictor11","PredictorAdd11"),Mr("Predictor12","PredictorAdd12"),Mr("Predictor13","PredictorAdd13");var Yu=vi.PredictorAdd2;cs("ColorIndexInverseTransform","MapARGB","32b",function(ii){return ii>>8&255},function(ii){return ii}),cs("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(ii){return ii},function(ii){return ii>>8&255});var jd,Wa=vi.ColorIndexInverseTransform,fu=vi.MapARGB,Vd=vi.VP8LColorIndexInverseTransformAlpha,$d=vi.MapAlpha,Ec=vi.VP8LPredictorsAdd=[];Ec.length=16,(vi.VP8LPredictors=[]).length=16,(vi.VP8LPredictorsAdd_C=[]).length=16,(vi.VP8LPredictors_C=[]).length=16;var Bc,Ma,va,Ac,dc,hc,pu,fc,Do,Xu,ya,Ya,gu,Wd,Ku,Uc,jc,Sc,Vc,mu,$c,bc,Zu,Xa,Ka,ho,go,$o,na=Ue(511),pc=Ue(2041),Ju=Ue(225),vu=Ue(767),Yd=0,jh=pc,Xd=Ju,Ba=vu,Za=na,Zd=0,Jd=1,cf=2,eh=3,th=4,Vh=5,uf=6,$h=7,zh=8,nh=9,Hh=10,up=[2,3,7],dp=[3,3,11],df=[280,256,256,256,40],hp=[0,1,1,1,0],fp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],pp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],gp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],mp=8,qh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Wh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Qu=null,vp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],yp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],hf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],_p=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Cp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ep=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ap=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ic=[],$l=[],gc=[],Sp=1,ff=2,Pc=[],Ja=[];Kr("UpsampleRgbLinePair",Vs,3),Kr("UpsampleBgrLinePair",Io,3),Kr("UpsampleRgbaLinePair",Dl,4),Kr("UpsampleBgraLinePair",ia,4),Kr("UpsampleArgbLinePair",ga,4),Kr("UpsampleRgba4444LinePair",Jo,2),Kr("UpsampleRgb565LinePair",xo,2);var bp=vi.UpsampleRgbLinePair,Ip=vi.UpsampleBgrLinePair,pf=vi.UpsampleRgbaLinePair,gf=vi.UpsampleBgraLinePair,mf=vi.UpsampleArgbLinePair,vf=vi.UpsampleRgba4444LinePair,Pp=vi.UpsampleRgb565LinePair,ih=16,rh=1<<ih-1,hd=-227,Yh=482,wp=6,yf=0,xp=Ue(256),Tp=Ue(256),Lp=Ue(256),Rp=Ue(256),Mp=Ue(Yh-hd),Np=Ue(Yh-hd);sc("YuvToRgbRow",Vs,3),sc("YuvToBgrRow",Io,3),sc("YuvToRgbaRow",Dl,4),sc("YuvToBgraRow",ia,4),sc("YuvToArgbRow",ga,4),sc("YuvToRgba4444Row",Jo,2),sc("YuvToRgb565Row",xo,2);var _f=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],sh=[0,2,8],Op=[8,7,6,4,4,2,2,2,1,1,1,1],kp=1;this.WebPDecodeRGBA=function(ii,oi,fi,Ni,ji){var ir=Jd,rr=new ru,lr=new Xs;rr.ba=lr,lr.S=ir,lr.width=[lr.width],lr.height=[lr.height];var ur=lr.width,yr=lr.height,Tr=new _o;if(Tr==null||ii==null)var Vr=2;else e(Tr!=null),Vr=au(ii,oi,fi,Tr.width,Tr.height,Tr.Pd,Tr.Qd,Tr.format,null);if(Vr!=0?ur=0:(ur!=null&&(ur[0]=Tr.width[0]),yr!=null&&(yr[0]=Tr.height[0]),ur=1),ur){lr.width=lr.width[0],lr.height=lr.height[0],Ni!=null&&(Ni[0]=lr.width),ji!=null&&(ji[0]=lr.height);e:{if(Ni=new Zc,(ji=new Bu).data=ii,ji.w=oi,ji.ha=fi,ji.kd=1,oi=[0],e(ji!=null),((ii=au(ji.data,ji.w,ji.ha,null,null,null,oi,null,ji))==0||ii==7)&&oi[0]&&(ii=4),(oi=ii)==0){if(e(rr!=null),Ni.data=ji.data,Ni.w=ji.w+ji.offset,Ni.ha=ji.ha-ji.offset,Ni.put=Eo,Ni.ac=qs,Ni.bc=Rs,Ni.ma=rr,ji.xa){if((ii=la())==null){rr=1;break e}if(function($r,Gr){var rs=[0],Wr=[0],Lr=[0];t:for(;;){if($r==null)return 0;if(Gr==null)return $r.a=2,0;if($r.l=Gr,$r.a=0,sr($r.m,Gr.data,Gr.w,Gr.ha),!Es($r.m,rs,Wr,Lr)){$r.a=3;break t}if($r.xb=ff,Gr.width=rs[0],Gr.height=Wr[0],!nc(rs[0],Wr[0],1,$r,null))break t;return 1}return e($r.a!=0),0}(ii,Ni)){if(Ni=(oi=cu(Ni.width,Ni.height,rr.Oa,rr.ba))==0){t:{Ni=ii;n:for(;;){if(Ni==null){Ni=0;break t}if(e(Ni.s.yc!=null),e(Ni.s.Ya!=null),e(0<Ni.s.Wb),e((fi=Ni.l)!=null),e((ji=fi.ma)!=null),Ni.xb!=0){if(Ni.ca=ji.ba,Ni.tb=ji.tb,e(Ni.ca!=null),!Hu(ji.Oa,fi,eh)){Ni.a=2;break n}if(!Oc(Ni,fi.width)||fi.da)break n;if((fi.da||As(Ni.ca.S))&&jr(),11>Ni.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ni.ca.f.kb.F!=null&&jr()),Ni.Pb&&0<Ni.s.ua&&Ni.s.vb.X==null&&!fr(Ni.s.vb,Ni.s.Wa.Xa)){Ni.a=1;break n}Ni.xb=0}if(!xa(Ni,Ni.V,Ni.Ba,Ni.c,Ni.i,fi.o,qa))break n;ji.Dc=Ni.Ma,Ni=1;break t}e(Ni.a!=0),Ni=0}Ni=!Ni}Ni&&(oi=ii.a)}else oi=ii.a}else{if((ii=new Eh)==null){rr=1;break e}if(ii.Fa=ji.na,ii.P=ji.P,ii.qc=ji.Sa,Id(ii,Ni)){if((oi=cu(Ni.width,Ni.height,rr.Oa,rr.ba))==0){if(ii.Aa=0,fi=rr.Oa,e((ji=ii)!=null),fi!=null){if(0<(ur=0>(ur=fi.Md)?0:100<ur?255:255*ur/100)){for(yr=Tr=0;4>yr;++yr)12>(Vr=ji.pb[yr]).lc&&(Vr.ia=ur*Op[0>Vr.lc?0:Vr.lc]>>3),Tr|=Vr.ia;Tr&&(alert("todo:VP8InitRandom"),ji.ia=1)}ji.Ga=fi.Id,100<ji.Ga?ji.Ga=100:0>ji.Ga&&(ji.Ga=0)}Ah(ii,Ni)||(oi=ii.a)}}else oi=ii.a}oi==0&&rr.Oa!=null&&rr.Oa.fd&&(oi=qu(rr.ba))}rr=oi}ir=rr!=0?null:11>ir?lr.f.RGBA.eb:lr.f.kb.y}else ir=null;return ir};var Cf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function En(vi,Ri){for(var Fi="",di=0;di<4;di++)Fi+=String.fromCharCode(vi[Ri++]);return Fi}function An(vi,Ri){return(vi[Ri+0]<<0|vi[Ri+1]<<8|vi[Ri+2]<<16)>>>0}function Sn(vi,Ri){return(vi[Ri+0]<<0|vi[Ri+1]<<8|vi[Ri+2]<<16|vi[Ri+3]<<24)>>>0}new Cn;var Tn=[0],Ln=[0],Bn=[],ei=new Cn,ti=Oe,ni=function(vi,Ri){var Fi={},di=0,ci=!1,Mi=0,Oi=0;if(Fi.frames=[],!function(er,hr,mr,_r){for(var dr=0;dr<_r;dr++)if(er[hr+dr]!=mr.charCodeAt(dr))return!0;return!1}(vi,Ri,"RIFF",4)){for(Sn(vi,Ri+=4),Ri+=8;Ri<vi.length;){var Hi=En(vi,Ri),Ki=Sn(vi,Ri+=4);Ri+=4;var or=Ki+(1&Ki);switch(Hi){case"VP8 ":case"VP8L":Fi.frames[di]===void 0&&(Fi.frames[di]={}),(pr=Fi.frames[di]).src_off=ci?Oi:Ri-8,pr.src_size=Mi+Ki+8,di++,ci&&(ci=!1,Mi=0,Oi=0);break;case"VP8X":(pr=Fi.header={}).feature_flags=vi[Ri];var sr=Ri+4;pr.canvas_width=1+An(vi,sr),sr+=3,pr.canvas_height=1+An(vi,sr),sr+=3;break;case"ALPH":ci=!0,Mi=or+8,Oi=Ri-8;break;case"ANIM":(pr=Fi.header).bgcolor=Sn(vi,Ri),sr=Ri+4,pr.loop_count=(wr=vi)[(Li=sr)+0]<<0|wr[Li+1]<<8,sr+=2;break;case"ANMF":var Cr,pr;(pr=Fi.frames[di]={}).offset_x=2*An(vi,Ri),Ri+=3,pr.offset_y=2*An(vi,Ri),Ri+=3,pr.width=1+An(vi,Ri),Ri+=3,pr.height=1+An(vi,Ri),Ri+=3,pr.duration=An(vi,Ri),Ri+=3,Cr=vi[Ri++],pr.dispose=1&Cr,pr.blend=Cr>>1&1}Hi!="ANMF"&&(Ri+=or)}var wr,Li;return Fi}}(ti,0);ni.response=ti,ni.rgbaoutput=!0,ni.dataurl=!1;var ri=ni.header?ni.header:null,si=ni.frames?ni.frames:null;if(ri){ri.loop_counter=ri.loop_count,Tn=[ri.canvas_height],Ln=[ri.canvas_width];for(var ai=0;ai<si.length&&si[ai].blend!=0;ai++);}var li=si[0],Pi=ei.WebPDecodeRGBA(ti,li.src_off,li.src_size,Ln,Tn);li.rgba=Pi,li.imgwidth=Ln[0],li.imgheight=Tn[0];for(var pi=0;pi<Ln[0]*Tn[0]*4;pi++)Bn[pi]=Pi[pi];return this.width=Ln,this.height=Tn,this.data=Bn,this}(function(Oe){var e=function(){return typeof zlibSync=="function"},Te=function(Tn,Ln,Bn,ei){var ti=4,ni=He;switch(ei){case Oe.image_compression.FAST:ti=1,ni=Ue;break;case Oe.image_compression.MEDIUM:ti=6,ni=We;break;case Oe.image_compression.SLOW:ti=9,ni=Cn}Tn=ke(Tn,Ln,Bn,ni);var ri=zlibSync(Tn,{level:ti});return Oe.__addimage__.arrayBufferToBinaryString(ri)},ke=function(Tn,Ln,Bn,ei){for(var ti,ni,ri,si=Tn.length/Ln,ai=new Uint8Array(Tn.length+si),li=An(),Pi=0;Pi<si;Pi+=1){if(ri=Pi*Ln,ti=Tn.subarray(ri,ri+Ln),ei)ai.set(ei(ti,Bn,ni),ri+Pi);else{for(var pi,vi=li.length,Ri=[];pi<vi;pi+=1)Ri[pi]=li[pi](ti,Bn,ni);var Fi=Sn(Ri.concat());ai.set(Ri[Fi],ri+Pi)}ni=ti}return ai},Be=function(Tn){var Ln=Array.apply([],Tn);return Ln.unshift(0),Ln},Ue=function(Tn,Ln){var Bn,ei=[],ti=Tn.length;ei[0]=1;for(var ni=0;ni<ti;ni+=1)Bn=Tn[ni-Ln]||0,ei[ni+1]=Tn[ni]-Bn+256&255;return ei},He=function(Tn,Ln,Bn){var ei,ti=[],ni=Tn.length;ti[0]=2;for(var ri=0;ri<ni;ri+=1)ei=Bn&&Bn[ri]||0,ti[ri+1]=Tn[ri]-ei+256&255;return ti},We=function(Tn,Ln,Bn){var ei,ti,ni=[],ri=Tn.length;ni[0]=3;for(var si=0;si<ri;si+=1)ei=Tn[si-Ln]||0,ti=Bn&&Bn[si]||0,ni[si+1]=Tn[si]+256-(ei+ti>>>1)&255;return ni},Cn=function(Tn,Ln,Bn){var ei,ti,ni,ri,si=[],ai=Tn.length;si[0]=4;for(var li=0;li<ai;li+=1)ei=Tn[li-Ln]||0,ti=Bn&&Bn[li]||0,ni=Bn&&Bn[li-Ln]||0,ri=En(ei,ti,ni),si[li+1]=Tn[li]-ri+256&255;return si},En=function(Tn,Ln,Bn){if(Tn===Ln&&Ln===Bn)return Tn;var ei=Math.abs(Ln-Bn),ti=Math.abs(Tn-Bn),ni=Math.abs(Tn+Ln-Bn-Bn);return ei<=ti&&ei<=ni?Tn:ti<=ni?Ln:Bn},An=function(){return[Be,Ue,He,We,Cn]},Sn=function(Tn){var Ln=Tn.map(function(Bn){return Bn.reduce(function(ei,ti){return ei+Math.abs(ti)},0)});return Ln.indexOf(Math.min.apply(null,Ln))};Oe.processPNG=function(Tn,Ln,Bn,ei){var ti,ni,ri,si,ai,li,Pi,pi,vi,Ri,Fi,di,ci,Mi,Oi,Hi=this.decode.FLATE_DECODE,Ki="";if(this.__addimage__.isArrayBuffer(Tn)&&(Tn=new Uint8Array(Tn)),this.__addimage__.isArrayBufferView(Tn)){if(Tn=(ri=new Kt(Tn)).imgData,ni=ri.bits,ti=ri.colorSpace,ai=ri.colors,[4,6].indexOf(ri.colorType)!==-1){if(ri.bits===8){vi=(pi=ri.pixelBitlength==32?new Uint32Array(ri.decodePixels().buffer):ri.pixelBitlength==16?new Uint16Array(ri.decodePixels().buffer):new Uint8Array(ri.decodePixels().buffer)).length,Fi=new Uint8Array(vi*ri.colors),Ri=new Uint8Array(vi);var or,sr=ri.pixelBitlength-ri.bits;for(Mi=0,Oi=0;Mi<vi;Mi++){for(ci=pi[Mi],or=0;or<sr;)Fi[Oi++]=ci>>>or&255,or+=ri.bits;Ri[Mi]=ci>>>or&255}}if(ri.bits===16){vi=(pi=new Uint32Array(ri.decodePixels().buffer)).length,Fi=new Uint8Array(vi*(32/ri.pixelBitlength)*ri.colors),Ri=new Uint8Array(vi*(32/ri.pixelBitlength)),di=ri.colors>1,Mi=0,Oi=0;for(var Cr=0;Mi<vi;)ci=pi[Mi++],Fi[Oi++]=ci>>>0&255,di&&(Fi[Oi++]=ci>>>16&255,ci=pi[Mi++],Fi[Oi++]=ci>>>0&255),Ri[Cr++]=ci>>>16&255;ni=8}ei!==Oe.image_compression.NONE&&e()?(Tn=Te(Fi,ri.width*ri.colors,ri.colors,ei),Pi=Te(Ri,ri.width,1,ei)):(Tn=Fi,Pi=Ri,Hi=void 0)}if(ri.colorType===3&&(ti=this.color_spaces.INDEXED,li=ri.palette,ri.transparency.indexed)){var pr=ri.transparency.indexed,wr=0;for(Mi=0,vi=pr.length;Mi<vi;++Mi)wr+=pr[Mi];if((wr/=255)===vi-1&&pr.indexOf(0)!==-1)si=[pr.indexOf(0)];else if(wr!==vi){for(pi=ri.decodePixels(),Ri=new Uint8Array(pi.length),Mi=0,vi=pi.length;Mi<vi;Mi++)Ri[Mi]=pr[pi[Mi]];Pi=Te(Ri,ri.width,1)}}var Li=function(er){var hr;switch(er){case Oe.image_compression.FAST:hr=11;break;case Oe.image_compression.MEDIUM:hr=13;break;case Oe.image_compression.SLOW:hr=14;break;default:hr=12}return hr}(ei);return Hi===this.decode.FLATE_DECODE&&(Ki="/Predictor "+Li+" "),Ki+="/Colors "+ai+" /BitsPerComponent "+ni+" /Columns "+ri.width,(this.__addimage__.isArrayBuffer(Tn)||this.__addimage__.isArrayBufferView(Tn))&&(Tn=this.__addimage__.arrayBufferToBinaryString(Tn)),(Pi&&this.__addimage__.isArrayBuffer(Pi)||this.__addimage__.isArrayBufferView(Pi))&&(Pi=this.__addimage__.arrayBufferToBinaryString(Pi)),{alias:Bn,data:Tn,index:Ln,filter:Hi,decodeParameters:Ki,transparency:si,palette:li,sMask:Pi,predictor:Li,width:ri.width,height:ri.height,bitsPerComponent:ni,colorSpace:ti}}}})(E.API),function(Oe){Oe.processGIF89A=function(e,Te,ke,Be){var Ue=new Zt(e),He=Ue.width,We=Ue.height,Cn=[];Ue.decodeAndBlitFrameRGBA(0,Cn);var En={data:Cn,width:He,height:We},An=new Qt(100).encode(En,100);return Oe.processJPEG.call(this,An,Te,ke,Be)},Oe.processGIF87A=Oe.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var Oe=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(Oe);for(var e=0;e<Oe;e++){var Te=this.datav.getUint8(this.pos++,!0),ke=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),Ue=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:Be,green:ke,blue:Te,quad:Ue}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var Oe="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[Oe]()}catch(Te){a.log("bit decode error:"+Te)}},te.prototype.bit1=function(){var Oe,e=Math.ceil(this.width/8),Te=e%4;for(Oe=this.height-1;Oe>=0;Oe--){for(var ke=this.bottom_up?Oe:this.height-1-Oe,Be=0;Be<e;Be++)for(var Ue=this.datav.getUint8(this.pos++,!0),He=ke*this.width*4+8*Be*4,We=0;We<8&&8*Be+We<this.width;We++){var Cn=this.palette[Ue>>7-We&1];this.data[He+4*We]=Cn.blue,this.data[He+4*We+1]=Cn.green,this.data[He+4*We+2]=Cn.red,this.data[He+4*We+3]=255}Te!==0&&(this.pos+=4-Te)}},te.prototype.bit4=function(){for(var Oe=Math.ceil(this.width/2),e=Oe%4,Te=this.height-1;Te>=0;Te--){for(var ke=this.bottom_up?Te:this.height-1-Te,Be=0;Be<Oe;Be++){var Ue=this.datav.getUint8(this.pos++,!0),He=ke*this.width*4+2*Be*4,We=Ue>>4,Cn=15&Ue,En=this.palette[We];if(this.data[He]=En.blue,this.data[He+1]=En.green,this.data[He+2]=En.red,this.data[He+3]=255,2*Be+1>=this.width)break;En=this.palette[Cn],this.data[He+4]=En.blue,this.data[He+4+1]=En.green,this.data[He+4+2]=En.red,this.data[He+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var Oe=this.width%4,e=this.height-1;e>=0;e--){for(var Te=this.bottom_up?e:this.height-1-e,ke=0;ke<this.width;ke++){var Be=this.datav.getUint8(this.pos++,!0),Ue=Te*this.width*4+4*ke;if(Be<this.palette.length){var He=this.palette[Be];this.data[Ue]=He.red,this.data[Ue+1]=He.green,this.data[Ue+2]=He.blue,this.data[Ue+3]=255}else this.data[Ue]=255,this.data[Ue+1]=255,this.data[Ue+2]=255,this.data[Ue+3]=255}Oe!==0&&(this.pos+=4-Oe)}},te.prototype.bit15=function(){for(var Oe=this.width%3,e=parseInt("11111",2),Te=this.height-1;Te>=0;Te--){for(var ke=this.bottom_up?Te:this.height-1-Te,Be=0;Be<this.width;Be++){var Ue=this.datav.getUint16(this.pos,!0);this.pos+=2;var He=(Ue&e)/e*255|0,We=(Ue>>5&e)/e*255|0,Cn=(Ue>>10&e)/e*255|0,En=Ue>>15?255:0,An=ke*this.width*4+4*Be;this.data[An]=Cn,this.data[An+1]=We,this.data[An+2]=He,this.data[An+3]=En}this.pos+=Oe}},te.prototype.bit16=function(){for(var Oe=this.width%3,e=parseInt("11111",2),Te=parseInt("111111",2),ke=this.height-1;ke>=0;ke--){for(var Be=this.bottom_up?ke:this.height-1-ke,Ue=0;Ue<this.width;Ue++){var He=this.datav.getUint16(this.pos,!0);this.pos+=2;var We=(He&e)/e*255|0,Cn=(He>>5&Te)/Te*255|0,En=(He>>11)/e*255|0,An=Be*this.width*4+4*Ue;this.data[An]=En,this.data[An+1]=Cn,this.data[An+2]=We,this.data[An+3]=255}this.pos+=Oe}},te.prototype.bit24=function(){for(var Oe=this.height-1;Oe>=0;Oe--){for(var e=this.bottom_up?Oe:this.height-1-Oe,Te=0;Te<this.width;Te++){var ke=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),Ue=this.datav.getUint8(this.pos++,!0),He=e*this.width*4+4*Te;this.data[He]=Ue,this.data[He+1]=Be,this.data[He+2]=ke,this.data[He+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var Oe=this.height-1;Oe>=0;Oe--)for(var e=this.bottom_up?Oe:this.height-1-Oe,Te=0;Te<this.width;Te++){var ke=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),Ue=this.datav.getUint8(this.pos++,!0),He=this.datav.getUint8(this.pos++,!0),We=e*this.width*4+4*Te;this.data[We]=Ue,this.data[We+1]=Be,this.data[We+2]=ke,this.data[We+3]=He}},te.prototype.getData=function(){return this.data},function(Oe){Oe.processBMP=function(e,Te,ke,Be){var Ue=new te(e,!1),He=Ue.width,We=Ue.height,Cn={data:Ue.getData(),width:He,height:We},En=new Qt(100).encode(Cn,100);return Oe.processJPEG.call(this,En,Te,ke,Be)}}(E.API),ee.prototype.getData=function(){return this.data},function(Oe){Oe.processWEBP=function(e,Te,ke,Be){var Ue=new ee(e),He=Ue.width,We=Ue.height,Cn={data:Ue.getData(),width:He,height:We},En=new Qt(100).encode(Cn,100);return Oe.processJPEG.call(this,En,Te,ke,Be)}}(E.API),E.API.processRGBA=function(Oe,e,Te){for(var ke=Oe.data,Be=ke.length,Ue=new Uint8Array(Be/4*3),He=new Uint8Array(Be/4),We=0,Cn=0,En=0;En<Be;En+=4){var An=ke[En],Sn=ke[En+1],Tn=ke[En+2],Ln=ke[En+3];Ue[We++]=An,Ue[We++]=Sn,Ue[We++]=Tn,He[Cn++]=Ln}var Bn=this.__addimage__.arrayBufferToBinaryString(Ue);return{alpha:this.__addimage__.arrayBufferToBinaryString(He),data:Bn,index:e,alias:Te,colorSpace:"DeviceRGB",bitsPerComponent:8,width:Oe.width,height:Oe.height}},E.API.setLanguage=function(Oe){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[Oe]!==void 0&&(this.internal.languageSettings.languageCode=Oe,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(Oe,e){var Te,ke,Be=(e=e||{}).font||this.internal.getFont(),Ue=e.fontSize||this.internal.getFontSize(),He=e.charSpace||this.internal.getCharSpace(),We=e.widths?e.widths:Be.metadata.Unicode.widths,Cn=We.fof?We.fof:1,En=e.kerning?e.kerning:Be.metadata.Unicode.kerning,An=En.fof?En.fof:1,Sn=e.doKerning!==!1,Tn=0,Ln=Oe.length,Bn=0,ei=We[0]||Cn,ti=[];for(Te=0;Te<Ln;Te++)ke=Oe.charCodeAt(Te),typeof Be.metadata.widthOfString=="function"?ti.push((Be.metadata.widthOfGlyph(Be.metadata.characterToGlyph(ke))+He*(1e3/Ue)||0)/1e3):(Tn=Sn&&_typeof(En[ke])==="object"&&!isNaN(parseInt(En[ke][Bn],10))?En[ke][Bn]/An:0,ti.push((We[ke]||ei)/Cn+Tn)),Bn=ke;return ti},Yt=Vt.getStringUnitWidth=function(Oe,e){var Te=(e=e||{}).fontSize||this.internal.getFontSize(),ke=e.font||this.internal.getFont(),Be=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(Oe=Vt.processArabic(Oe)),typeof ke.metadata.widthOfString=="function"?ke.metadata.widthOfString(Oe,Te,Be)/Te:Gt.apply(this,arguments).reduce(function(Ue,He){return Ue+He},0)},Jt=function(Oe,e,Te,ke){for(var Be=[],Ue=0,He=Oe.length,We=0;Ue!==He&&We+e[Ue]<Te;)We+=e[Ue],Ue++;Be.push(Oe.slice(0,Ue));var Cn=Ue;for(We=0;Ue!==He;)We+e[Ue]>ke&&(Be.push(Oe.slice(Cn,Ue)),We=0,Cn=Ue),We+=e[Ue],Ue++;return Cn!==Ue&&Be.push(Oe.slice(Cn,Ue)),Be},Xt=function(Oe,e,Te){Te||(Te={});var ke,Be,Ue,He,We,Cn,En,An=[],Sn=[An],Tn=Te.textIndent||0,Ln=0,Bn=0,ei=Oe.split(" "),ti=Gt.apply(this,[" ",Te])[0];if(Cn=Te.lineIndent===-1?ei[0].length+2:Te.lineIndent||0){var ni=Array(Cn).join(" "),ri=[];ei.map(function(ai){(ai=ai.split(/\s*\n/)).length>1?ri=ri.concat(ai.map(function(li,Pi){return(Pi&&li.length?`
`:"")+li})):ri.push(ai[0])}),ei=ri,Cn=Yt.apply(this,[ni,Te])}for(Ue=0,He=ei.length;Ue<He;Ue++){var si=0;if(ke=ei[Ue],Cn&&ke[0]==`
`&&(ke=ke.substr(1),si=1),Tn+Ln+(Bn=(Be=Gt.apply(this,[ke,Te])).reduce(function(ai,li){return ai+li},0))>e||si){if(Bn>e){for(We=Jt.apply(this,[ke,Be,e-(Tn+Ln),e]),An.push(We.shift()),An=[We.pop()];We.length;)Sn.push([We.shift()]);Bn=Be.slice(ke.length-(An[0]?An[0].length:0)).reduce(function(ai,li){return ai+li},0)}else An=[ke];Sn.push(An),Tn=Bn+Cn,Ln=ti}else An.push(ke),Tn+=Ln+Bn,Ln=ti}return En=Cn?function(ai,li){return(li?ni:"")+ai.join(" ")}:function(ai){return ai.join(" ")},Sn.map(En)},Vt.splitTextToSize=function(Oe,e,Te){var ke,Be=(Te=Te||{}).fontSize||this.internal.getFontSize(),Ue=(function(An){if(An.widths&&An.kerning)return{widths:An.widths,kerning:An.kerning};var Sn=this.internal.getFont(An.fontName,An.fontStyle);return Sn.metadata.Unicode?{widths:Sn.metadata.Unicode.widths||{0:1},kerning:Sn.metadata.Unicode.kerning||{}}:{font:Sn.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,Te);ke=Array.isArray(Oe)?Oe:String(Oe).split(/\r?\n/);var He=1*this.internal.scaleFactor*e/Be;Ue.textIndent=Te.textIndent?1*Te.textIndent*this.internal.scaleFactor/Be:0,Ue.lineIndent=Te.lineIndent;var We,Cn,En=[];for(We=0,Cn=ke.length;We<Cn;We++)En=En.concat(Xt.apply(this,[ke[We],He,Ue]));return En},function(Oe){Oe.__fontmetrics__=Oe.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",Te={},ke={},Be=0;Be<e.length;Be++)Te[e[Be]]="0123456789abcdef"[Be],ke["0123456789abcdef"[Be]]=e[Be];var Ue=function(Sn){return"0x"+parseInt(Sn,10).toString(16)},He=Oe.__fontmetrics__.compress=function(Sn){var Tn,Ln,Bn,ei,ti=["{"];for(var ni in Sn){if(Tn=Sn[ni],isNaN(parseInt(ni,10))?Ln="'"+ni+"'":(ni=parseInt(ni,10),Ln=(Ln=Ue(ni).slice(2)).slice(0,-1)+ke[Ln.slice(-1)]),typeof Tn=="number")Tn<0?(Bn=Ue(Tn).slice(3),ei="-"):(Bn=Ue(Tn).slice(2),ei=""),Bn=ei+Bn.slice(0,-1)+ke[Bn.slice(-1)];else{if(_typeof(Tn)!=="object")throw new Error("Don't know what to do with value type "+_typeof(Tn)+".");Bn=He(Tn)}ti.push(Ln+Bn)}return ti.push("}"),ti.join("")},We=Oe.__fontmetrics__.uncompress=function(Sn){if(typeof Sn!="string")throw new Error("Invalid argument passed to uncompress.");for(var Tn,Ln,Bn,ei,ti={},ni=1,ri=ti,si=[],ai="",li="",Pi=Sn.length-1,pi=1;pi<Pi;pi+=1)(ei=Sn[pi])=="'"?Tn?(Bn=Tn.join(""),Tn=void 0):Tn=[]:Tn?Tn.push(ei):ei=="{"?(si.push([ri,Bn]),ri={},Bn=void 0):ei=="}"?((Ln=si.pop())[0][Ln[1]]=ri,Bn=void 0,ri=Ln[0]):ei=="-"?ni=-1:Bn===void 0?Te.hasOwnProperty(ei)?(ai+=Te[ei],Bn=parseInt(ai,16)*ni,ni=1,ai=""):ai+=ei:Te.hasOwnProperty(ei)?(li+=Te[ei],ri[Bn]=parseInt(li,16)*ni,ni=1,Bn=void 0,li=""):li+=ei;return ti},Cn={codePages:["WinAnsiEncoding"],WinAnsiEncoding:We("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},En={Unicode:{Courier:Cn,"Courier-Bold":Cn,"Courier-BoldOblique":Cn,"Courier-Oblique":Cn,Helvetica:Cn,"Helvetica-Bold":Cn,"Helvetica-BoldOblique":Cn,"Helvetica-Oblique":Cn,"Times-Roman":Cn,"Times-Bold":Cn,"Times-BoldItalic":Cn,"Times-Italic":Cn}},An={Unicode:{"Courier-Oblique":We("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":We("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":We("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:We("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":We("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":We("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:We("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:We("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":We("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:We("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":We("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":We("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":We("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":We("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};Oe.events.push(["addFont",function(Sn){var Tn=Sn.font,Ln=An.Unicode[Tn.postScriptName];Ln&&(Tn.metadata.Unicode={},Tn.metadata.Unicode.widths=Ln.widths,Tn.metadata.Unicode.kerning=Ln.kerning);var Bn=En.Unicode[Tn.postScriptName];Bn&&(Tn.metadata.Unicode.encoding=Bn,Tn.encoding=Bn.codePages[0])}])}(E.API),function(Oe){var e=function(Te){for(var ke=Te.length,Be=new Uint8Array(ke),Ue=0;Ue<ke;Ue++)Be[Ue]=Te.charCodeAt(Ue);return Be};Oe.API.events.push(["addFont",function(Te){var ke=void 0,Be=Te.font,Ue=Te.instance;if(!Be.isStandardFont){if(Ue===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Be.postScriptName+"').");if(typeof(ke=Ue.existsFileInVFS(Be.postScriptName)===!1?Ue.loadFile(Be.postScriptName):Ue.getFileFromVFS(Be.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Be.postScriptName+"').");(function(He,We){We=/^\x00\x01\x00\x00/.test(We)?e(We):e(u(We)),He.metadata=Oe.API.TTFFont.open(We),He.metadata.Unicode=He.metadata.Unicode||{encoding:{},kerning:{},widths:[]},He.metadata.glyIdsUsed=[0]})(Be,ke)}}])}(E),function(Oe){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-CCr-89wG.js"),[])).catch(function(Te){return Promise.reject(new Error("Could not load canvg: "+Te))}).then(function(Te){return Te.default?Te.default:Te})}E.API.addSvgAsImage=function(Te,ke,Be,Ue,He,We,Cn,En){if(isNaN(ke)||isNaN(Be))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Ue)||isNaN(He))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var An=document.createElement("canvas");An.width=Ue,An.height=He;var Sn=An.getContext("2d");Sn.fillStyle="#fff",Sn.fillRect(0,0,An.width,An.height);var Tn={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},Ln=this;return e().then(function(Bn){return Bn.fromString(Sn,Te,Tn)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(Bn){return Bn.render(Tn)}).then(function(){Ln.addImage(An.toDataURL("image/jpeg",1),ke,Be,Ue,He,Cn,En)})}}(),E.API.putTotalPages=function(Oe){var e,Te=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(Oe,"g"),Te=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(Oe,this.internal.getFont()),"g"),Te=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var ke=1;ke<=this.internal.getNumberOfPages();ke++)for(var Be=0;Be<this.internal.pages[ke].length;Be++)this.internal.pages[ke][Be]=this.internal.pages[ke][Be].replace(e,Te);return this},E.API.viewerPreferences=function(Oe,e){var Te;Oe=Oe||{},e=e||!1;var ke,Be,Ue,He={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},We=Object.keys(He),Cn=[],En=0,An=0,Sn=0;function Tn(Bn,ei){var ti,ni=!1;for(ti=0;ti<Bn.length;ti+=1)Bn[ti]===ei&&(ni=!0);return ni}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(He)),this.internal.viewerpreferences.isSubscribed=!1),Te=this.internal.viewerpreferences.configuration,Oe==="reset"||e===!0){var Ln=We.length;for(Sn=0;Sn<Ln;Sn+=1)Te[We[Sn]].value=Te[We[Sn]].defaultValue,Te[We[Sn]].explicitSet=!1}if(_typeof(Oe)==="object"){for(Be in Oe)if(Ue=Oe[Be],Tn(We,Be)&&Ue!==void 0){if(Te[Be].type==="boolean"&&typeof Ue=="boolean")Te[Be].value=Ue;else if(Te[Be].type==="name"&&Tn(Te[Be].valueSet,Ue))Te[Be].value=Ue;else if(Te[Be].type==="integer"&&Number.isInteger(Ue))Te[Be].value=Ue;else if(Te[Be].type==="array"){for(En=0;En<Ue.length;En+=1)if(ke=!0,Ue[En].length===1&&typeof Ue[En][0]=="number")Cn.push(String(Ue[En]-1));else if(Ue[En].length>1){for(An=0;An<Ue[En].length;An+=1)typeof Ue[En][An]!="number"&&(ke=!1);ke===!0&&Cn.push([Ue[En][0]-1,Ue[En][1]-1].join(" "))}Te[Be].value="["+Cn.join(" ")+"]"}else Te[Be].value=Te[Be].defaultValue;Te[Be].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var Bn,ei=[];for(Bn in Te)Te[Bn].explicitSet===!0&&(Te[Bn].type==="name"?ei.push("/"+Bn+" /"+Te[Bn].value):ei.push("/"+Bn+" "+Te[Bn].value));ei.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+ei.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=Te,this},function(Oe){var e=function(){var ke='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Be=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Ue=unescape(encodeURIComponent(ke)),He=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),We=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Cn=unescape(encodeURIComponent("</x:xmpmeta>")),En=Ue.length+He.length+We.length+Be.length+Cn.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+En+" >>"),this.internal.write("stream"),this.internal.write(Be+Ue+He+We+Cn),this.internal.write("endstream"),this.internal.write("endobj")},Te=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};Oe.addMetadata=function(ke,Be){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:ke,namespaceuri:Be||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",Te),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(Oe){var e=Oe.API,Te=e.pdfEscape16=function(Ue,He){for(var We,Cn=He.metadata.Unicode.widths,En=["","0","00","000","0000"],An=[""],Sn=0,Tn=Ue.length;Sn<Tn;++Sn){if(We=He.metadata.characterToGlyph(Ue.charCodeAt(Sn)),He.metadata.glyIdsUsed.push(We),He.metadata.toUnicode[We]=Ue.charCodeAt(Sn),Cn.indexOf(We)==-1&&(Cn.push(We),Cn.push([parseInt(He.metadata.widthOfGlyph(We),10)])),We=="0")return An.join("");We=We.toString(16),An.push(En[4-We.length],We)}return An.join("")},ke=function(Ue){var He,We,Cn,En,An,Sn,Tn;for(An=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Cn=[],Sn=0,Tn=(We=Object.keys(Ue).sort(function(Ln,Bn){return Ln-Bn})).length;Sn<Tn;Sn++)He=We[Sn],Cn.length>=100&&(An+=`
`+Cn.length+` beginbfchar
`+Cn.join(`
`)+`
endbfchar`,Cn=[]),Ue[He]!==void 0&&Ue[He]!==null&&typeof Ue[He].toString=="function"&&(En=("0000"+Ue[He].toString(16)).slice(-4),He=("0000"+(+He).toString(16)).slice(-4),Cn.push("<"+He+"><"+En+">"));return Cn.length&&(An+=`
`+Cn.length+` beginbfchar
`+Cn.join(`
`)+`
endbfchar
`),An+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Ue){(function(He){var We=He.font,Cn=He.out,En=He.newObject,An=He.putStream;if(We.metadata instanceof Oe.API.TTFFont&&We.encoding==="Identity-H"){for(var Sn=We.metadata.Unicode.widths,Tn=We.metadata.subset.encode(We.metadata.glyIdsUsed,1),Ln="",Bn=0;Bn<Tn.length;Bn++)Ln+=String.fromCharCode(Tn[Bn]);var ei=En();An({data:Ln,addLength1:!0,objectId:ei}),Cn("endobj");var ti=En();An({data:ke(We.metadata.toUnicode),addLength1:!0,objectId:ti}),Cn("endobj");var ni=En();Cn("<<"),Cn("/Type /FontDescriptor"),Cn("/FontName /"+F(We.fontName)),Cn("/FontFile2 "+ei+" 0 R"),Cn("/FontBBox "+Oe.API.PDFObject.convert(We.metadata.bbox)),Cn("/Flags "+We.metadata.flags),Cn("/StemV "+We.metadata.stemV),Cn("/ItalicAngle "+We.metadata.italicAngle),Cn("/Ascent "+We.metadata.ascender),Cn("/Descent "+We.metadata.decender),Cn("/CapHeight "+We.metadata.capHeight),Cn(">>"),Cn("endobj");var ri=En();Cn("<<"),Cn("/Type /Font"),Cn("/BaseFont /"+F(We.fontName)),Cn("/FontDescriptor "+ni+" 0 R"),Cn("/W "+Oe.API.PDFObject.convert(Sn)),Cn("/CIDToGIDMap /Identity"),Cn("/DW 1000"),Cn("/Subtype /CIDFontType2"),Cn("/CIDSystemInfo"),Cn("<<"),Cn("/Supplement 0"),Cn("/Registry (Adobe)"),Cn("/Ordering ("+We.encoding+")"),Cn(">>"),Cn(">>"),Cn("endobj"),We.objectNumber=En(),Cn("<<"),Cn("/Type /Font"),Cn("/Subtype /Type0"),Cn("/ToUnicode "+ti+" 0 R"),Cn("/BaseFont /"+F(We.fontName)),Cn("/Encoding /"+We.encoding),Cn("/DescendantFonts ["+ri+" 0 R]"),Cn(">>"),Cn("endobj"),We.isAlreadyPutted=!0}})(Ue)}]),e.events.push(["putFont",function(Ue){(function(He){var We=He.font,Cn=He.out,En=He.newObject,An=He.putStream;if(We.metadata instanceof Oe.API.TTFFont&&We.encoding==="WinAnsiEncoding"){for(var Sn=We.metadata.rawData,Tn="",Ln=0;Ln<Sn.length;Ln++)Tn+=String.fromCharCode(Sn[Ln]);var Bn=En();An({data:Tn,addLength1:!0,objectId:Bn}),Cn("endobj");var ei=En();An({data:ke(We.metadata.toUnicode),addLength1:!0,objectId:ei}),Cn("endobj");var ti=En();Cn("<<"),Cn("/Descent "+We.metadata.decender),Cn("/CapHeight "+We.metadata.capHeight),Cn("/StemV "+We.metadata.stemV),Cn("/Type /FontDescriptor"),Cn("/FontFile2 "+Bn+" 0 R"),Cn("/Flags 96"),Cn("/FontBBox "+Oe.API.PDFObject.convert(We.metadata.bbox)),Cn("/FontName /"+F(We.fontName)),Cn("/ItalicAngle "+We.metadata.italicAngle),Cn("/Ascent "+We.metadata.ascender),Cn(">>"),Cn("endobj"),We.objectNumber=En();for(var ni=0;ni<We.metadata.hmtx.widths.length;ni++)We.metadata.hmtx.widths[ni]=parseInt(We.metadata.hmtx.widths[ni]*(1e3/We.metadata.head.unitsPerEm));Cn("<</Subtype/TrueType/Type/Font/ToUnicode "+ei+" 0 R/BaseFont/"+F(We.fontName)+"/FontDescriptor "+ti+" 0 R/Encoding/"+We.encoding+" /FirstChar 29 /LastChar 255 /Widths "+Oe.API.PDFObject.convert(We.metadata.hmtx.widths)+">>"),Cn("endobj"),We.isAlreadyPutted=!0}})(Ue)}]);var Be=function(Ue){var He,We=Ue.text||"",Cn=Ue.x,En=Ue.y,An=Ue.options||{},Sn=Ue.mutex||{},Tn=Sn.pdfEscape,Ln=Sn.activeFontKey,Bn=Sn.fonts,ei=Ln,ti="",ni=0,ri="",si=Bn[ei].encoding;if(Bn[ei].encoding!=="Identity-H")return{text:We,x:Cn,y:En,options:An,mutex:Sn};for(ri=We,ei=Ln,Array.isArray(We)&&(ri=We[0]),ni=0;ni<ri.length;ni+=1)Bn[ei].metadata.hasOwnProperty("cmap")&&(He=Bn[ei].metadata.cmap.unicode.codeMap[ri[ni].charCodeAt(0)]),He||ri[ni].charCodeAt(0)<256&&Bn[ei].metadata.hasOwnProperty("Unicode")?ti+=ri[ni]:ti+="";var ai="";return parseInt(ei.slice(1))<14||si==="WinAnsiEncoding"?ai=Tn(ti,ei).split("").map(function(li){return li.charCodeAt(0).toString(16)}).join(""):si==="Identity-H"&&(ai=Te(ti,Bn[ei])),Sn.isHex=!0,{text:ai,x:Cn,y:En,options:An,mutex:Sn}};e.events.push(["postProcessText",function(Ue){var He=Ue.text||"",We=[],Cn={text:He,x:Ue.x,y:Ue.y,options:Ue.options,mutex:Ue.mutex};if(Array.isArray(He)){var En=0;for(En=0;En<He.length;En+=1)Array.isArray(He[En])&&He[En].length===3?We.push([Be(Object.assign({},Cn,{text:He[En][0]})).text,He[En][1],He[En][2]]):We.push(Be(Object.assign({},Cn,{text:He[En]})).text);Ue.text=We}else Ue.text=Be(Object.assign({},Cn,{text:He})).text}])}(E),function(Oe){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};Oe.existsFileInVFS=function(Te){return e.call(this),this.internal.vFS[Te]!==void 0},Oe.addFileToVFS=function(Te,ke){return e.call(this),this.internal.vFS[Te]=ke,this},Oe.getFileFromVFS=function(Te){return e.call(this),this.internal.vFS[Te]!==void 0?this.internal.vFS[Te]:null}}(E.API),function(Oe){Oe.__bidiEngine__=Oe.prototype.__bidiEngine__=function(ke){var Be,Ue,He,We,Cn,En,An,Sn=e,Tn=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],Ln=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],Bn={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},ei={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},ti=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],ni=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),ri=!1,si=0;this.__bidiEngine__={};var ai=function(di){var ci=di.charCodeAt(),Mi=ci>>8,Oi=ei[Mi];return Oi!==void 0?Sn[256*Oi+(255&ci)]:Mi===252||Mi===253?"AL":ni.test(Mi)?"L":Mi===8?"R":"N"},li=function(di){for(var ci,Mi=0;Mi<di.length;Mi++){if((ci=ai(di.charAt(Mi)))==="L")return!1;if(ci==="R")return!0}return!1},Pi=function(di,ci,Mi,Oi){var Hi,Ki,or,sr,Cr=ci[Oi];switch(Cr){case"L":case"R":ri=!1;break;case"N":case"AN":break;case"EN":ri&&(Cr="AN");break;case"AL":ri=!0,Cr="R";break;case"WS":Cr="N";break;case"CS":Oi<1||Oi+1>=ci.length||(Hi=Mi[Oi-1])!=="EN"&&Hi!=="AN"||(Ki=ci[Oi+1])!=="EN"&&Ki!=="AN"?Cr="N":ri&&(Ki="AN"),Cr=Ki===Hi?Ki:"N";break;case"ES":Cr=(Hi=Oi>0?Mi[Oi-1]:"B")==="EN"&&Oi+1<ci.length&&ci[Oi+1]==="EN"?"EN":"N";break;case"ET":if(Oi>0&&Mi[Oi-1]==="EN"){Cr="EN";break}if(ri){Cr="N";break}for(or=Oi+1,sr=ci.length;or<sr&&ci[or]==="ET";)or++;Cr=or<sr&&ci[or]==="EN"?"EN":"N";break;case"NSM":if(He&&!We){for(sr=ci.length,or=Oi+1;or<sr&&ci[or]==="NSM";)or++;if(or<sr){var pr=di[Oi],wr=pr>=1425&&pr<=2303||pr===64286;if(Hi=ci[or],wr&&(Hi==="R"||Hi==="AL")){Cr="R";break}}}Cr=Oi<1||(Hi=ci[Oi-1])==="B"?"N":Mi[Oi-1];break;case"B":ri=!1,Be=!0,Cr=si;break;case"S":Ue=!0,Cr="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":ri=!1;break;case"BN":Cr="N"}return Cr},pi=function(di,ci,Mi){var Oi=di.split("");return Mi&&vi(Oi,Mi,{hiLevel:si}),Oi.reverse(),ci&&ci.reverse(),Oi.join("")},vi=function(di,ci,Mi){var Oi,Hi,Ki,or,sr,Cr=-1,pr=di.length,wr=0,Li=[],er=si?Ln:Tn,hr=[];for(ri=!1,Be=!1,Ue=!1,Hi=0;Hi<pr;Hi++)hr[Hi]=ai(di[Hi]);for(Ki=0;Ki<pr;Ki++){if(sr=wr,Li[Ki]=Pi(di,hr,Li,Ki),Oi=240&(wr=er[sr][Bn[Li[Ki]]]),wr&=15,ci[Ki]=or=er[wr][5],Oi>0)if(Oi===16){for(Hi=Cr;Hi<Ki;Hi++)ci[Hi]=1;Cr=-1}else Cr=-1;if(er[wr][6])Cr===-1&&(Cr=Ki);else if(Cr>-1){for(Hi=Cr;Hi<Ki;Hi++)ci[Hi]=or;Cr=-1}hr[Ki]==="B"&&(ci[Ki]=0),Mi.hiLevel|=or}Ue&&function(mr,_r,dr){for(var cr=0;cr<dr;cr++)if(mr[cr]==="S"){_r[cr]=si;for(var gr=cr-1;gr>=0&&mr[gr]==="WS";gr--)_r[gr]=si}}(hr,ci,pr)},Ri=function(di,ci,Mi,Oi,Hi){if(!(Hi.hiLevel<di)){if(di===1&&si===1&&!Be)return ci.reverse(),void(Mi&&Mi.reverse());for(var Ki,or,sr,Cr,pr=ci.length,wr=0;wr<pr;){if(Oi[wr]>=di){for(sr=wr+1;sr<pr&&Oi[sr]>=di;)sr++;for(Cr=wr,or=sr-1;Cr<or;Cr++,or--)Ki=ci[Cr],ci[Cr]=ci[or],ci[or]=Ki,Mi&&(Ki=Mi[Cr],Mi[Cr]=Mi[or],Mi[or]=Ki);wr=sr}wr++}}},Fi=function(di,ci,Mi){var Oi=di.split(""),Hi={hiLevel:si};return Mi||(Mi=[]),vi(Oi,Mi,Hi),function(Ki,or,sr){if(sr.hiLevel!==0&&An)for(var Cr,pr=0;pr<Ki.length;pr++)or[pr]===1&&(Cr=ti.indexOf(Ki[pr]))>=0&&(Ki[pr]=ti[Cr+1])}(Oi,Mi,Hi),Ri(2,Oi,ci,Mi,Hi),Ri(1,Oi,ci,Mi,Hi),Oi.join("")};return this.__bidiEngine__.doBidiReorder=function(di,ci,Mi){if(function(Hi,Ki){if(Ki)for(var or=0;or<Hi.length;or++)Ki[or]=or;We===void 0&&(We=li(Hi)),En===void 0&&(En=li(Hi))}(di,ci),He||!Cn||En)if(He&&Cn&&We^En)si=We?1:0,di=pi(di,ci,Mi);else if(!He&&Cn&&En)si=We?1:0,di=Fi(di,ci,Mi),di=pi(di,ci);else if(!He||We||Cn||En){if(He&&!Cn&&We^En)di=pi(di,ci),We?(si=0,di=Fi(di,ci,Mi)):(si=1,di=Fi(di,ci,Mi),di=pi(di,ci));else if(He&&We&&!Cn&&En)si=1,di=Fi(di,ci,Mi),di=pi(di,ci);else if(!He&&!Cn&&We^En){var Oi=An;We?(si=1,di=Fi(di,ci,Mi),si=0,An=!1,di=Fi(di,ci,Mi),An=Oi):(si=0,di=Fi(di,ci,Mi),di=pi(di,ci),si=1,An=!1,di=Fi(di,ci,Mi),An=Oi,di=pi(di,ci))}}else si=0,di=Fi(di,ci,Mi);else si=We?1:0,di=Fi(di,ci,Mi);return di},this.__bidiEngine__.setOptions=function(di){di&&(He=di.isInputVisual,Cn=di.isOutputVisual,We=di.isInputRtl,En=di.isOutputRtl,An=di.isSymmetricSwapping)},this.__bidiEngine__.setOptions(ke),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],Te=new Oe.__bidiEngine__({isInputVisual:!0});Oe.API.events.push(["postProcessText",function(ke){var Be=ke.text;ke.x,ke.y;var Ue=ke.options||{};ke.mutex,Ue.lang;var He=[];if(Ue.isInputVisual=typeof Ue.isInputVisual!="boolean"||Ue.isInputVisual,Te.setOptions(Ue),Object.prototype.toString.call(Be)==="[object Array]"){var We=0;for(He=[],We=0;We<Be.length;We+=1)Object.prototype.toString.call(Be[We])==="[object Array]"?He.push([Te.doBidiReorder(Be[We][0]),Be[We][1],Be[We][2]]):He.push([Te.doBidiReorder(Be[We])]);ke.text=He}else ke.text=Te.doBidiReorder(Be);Te.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function Oe(e){var Te;if(this.rawData=e,Te=this.contents=new ne(e),this.contents.pos=4,Te.readString(4)==="ttcf")throw new Error("TTCF not supported.");Te.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return Oe.open=function(e){return new Oe(e)},Oe.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},Oe.prototype.registerTTF=function(){var e,Te,ke,Be,Ue;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var He,We,Cn,En;for(En=[],He=0,We=(Cn=this.bbox).length;He<We;He++)e=Cn[He],En.push(Math.round(e*this.scaleFactor));return En}).call(this),this.stemV=0,this.post.exists?(ke=255&(Be=this.post.italic_angle),(32768&(Te=Be>>16))!=0&&(Te=-(1+(65535^Te))),this.italicAngle=+(Te+"."+ke)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Ue=this.familyClass)===1||Ue===2||Ue===3||Ue===4||Ue===5||Ue===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},Oe.prototype.characterToGlyph=function(e){var Te;return((Te=this.cmap.unicode)!=null?Te.codeMap[e]:void 0)||0},Oe.prototype.widthOfGlyph=function(e){var Te;return Te=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*Te},Oe.prototype.widthOfString=function(e,Te,ke){var Be,Ue,He,We;for(He=0,Ue=0,We=(e=""+e).length;0<=We?Ue<We:Ue>We;Ue=0<=We?++Ue:--Ue)Be=e.charCodeAt(Ue),He+=this.widthOfGlyph(this.characterToGlyph(Be))+ke*(1e3/Te)||0;return He*(Te/1e3)},Oe.prototype.lineHeight=function(e,Te){var ke;return Te==null&&(Te=!1),ke=Te?this.lineGap:0,(this.ascender+ke-this.decender)/1e3*e},Oe}();var re,ne=function(){function Oe(e){this.data=e??[],this.pos=0,this.length=this.data.length}return Oe.prototype.readByte=function(){return this.data[this.pos++]},Oe.prototype.writeByte=function(e){return this.data[this.pos++]=e},Oe.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},Oe.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},Oe.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},Oe.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},Oe.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},Oe.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},Oe.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},Oe.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},Oe.prototype.readString=function(e){var Te,ke;for(ke=[],Te=0;0<=e?Te<e:Te>e;Te=0<=e?++Te:--Te)ke[Te]=String.fromCharCode(this.readByte());return ke.join("")},Oe.prototype.writeString=function(e){var Te,ke,Be;for(Be=[],Te=0,ke=e.length;0<=ke?Te<ke:Te>ke;Te=0<=ke?++Te:--Te)Be.push(this.writeByte(e.charCodeAt(Te)));return Be},Oe.prototype.readShort=function(){return this.readInt16()},Oe.prototype.writeShort=function(e){return this.writeInt16(e)},Oe.prototype.readLongLong=function(){var e,Te,ke,Be,Ue,He,We,Cn;return e=this.readByte(),Te=this.readByte(),ke=this.readByte(),Be=this.readByte(),Ue=this.readByte(),He=this.readByte(),We=this.readByte(),Cn=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^Te)+1099511627776*(255^ke)+4294967296*(255^Be)+16777216*(255^Ue)+65536*(255^He)+256*(255^We)+(255^Cn)+1):72057594037927940*e+281474976710656*Te+1099511627776*ke+4294967296*Be+16777216*Ue+65536*He+256*We+Cn},Oe.prototype.writeLongLong=function(e){var Te,ke;return Te=Math.floor(e/4294967296),ke=4294967295&e,this.writeByte(Te>>24&255),this.writeByte(Te>>16&255),this.writeByte(Te>>8&255),this.writeByte(255&Te),this.writeByte(ke>>24&255),this.writeByte(ke>>16&255),this.writeByte(ke>>8&255),this.writeByte(255&ke)},Oe.prototype.readInt=function(){return this.readInt32()},Oe.prototype.writeInt=function(e){return this.writeInt32(e)},Oe.prototype.read=function(e){var Te,ke;for(Te=[],ke=0;0<=e?ke<e:ke>e;ke=0<=e?++ke:--ke)Te.push(this.readByte());return Te},Oe.prototype.write=function(e){var Te,ke,Be,Ue;for(Ue=[],ke=0,Be=e.length;ke<Be;ke++)Te=e[ke],Ue.push(this.writeByte(Te));return Ue},Oe}(),ie=function(){var Oe;function e(Te){var ke,Be,Ue;for(this.scalarType=Te.readInt(),this.tableCount=Te.readShort(),this.searchRange=Te.readShort(),this.entrySelector=Te.readShort(),this.rangeShift=Te.readShort(),this.tables={},Be=0,Ue=this.tableCount;0<=Ue?Be<Ue:Be>Ue;Be=0<=Ue?++Be:--Be)ke={tag:Te.readString(4),checksum:Te.readInt(),offset:Te.readInt(),length:Te.readInt()},this.tables[ke.tag]=ke}return e.prototype.encode=function(Te){var ke,Be,Ue,He,We,Cn,En,An,Sn,Tn,Ln,Bn,ei;for(ei in Ln=Object.keys(Te).length,Cn=Math.log(2),Sn=16*Math.floor(Math.log(Ln)/Cn),He=Math.floor(Sn/Cn),An=16*Ln-Sn,(Be=new ne).writeInt(this.scalarType),Be.writeShort(Ln),Be.writeShort(Sn),Be.writeShort(He),Be.writeShort(An),Ue=16*Ln,En=Be.pos+Ue,We=null,Bn=[],Te)for(Tn=Te[ei],Be.writeString(ei),Be.writeInt(Oe(Tn)),Be.writeInt(En),Be.writeInt(Tn.length),Bn=Bn.concat(Tn),ei==="head"&&(We=En),En+=Tn.length;En%4;)Bn.push(0),En++;return Be.write(Bn),ke=2981146554-Oe(Be.data),Be.pos=We+8,Be.writeUInt32(ke),Be.data},Oe=function(Te){var ke,Be,Ue,He;for(Te=ve.call(Te);Te.length%4;)Te.push(0);for(Ue=new ne(Te),Be=0,ke=0,He=Te.length;ke<He;ke=ke+=4)Be+=Ue.readUInt32();return 4294967295&Be},e}(),ae={}.hasOwnProperty,oe=function(Oe,e){for(var Te in e)ae.call(e,Te)&&(Oe[Te]=e[Te]);function ke(){this.constructor=Oe}return ke.prototype=e.prototype,Oe.prototype=new ke,Oe.__super__=e.prototype,Oe};re=function(){function Oe(e){var Te;this.file=e,Te=this.file.directory.tables[this.tag],this.exists=!!Te,Te&&(this.offset=Te.offset,this.length=Te.length,this.parse(this.file.contents))}return Oe.prototype.parse=function(){},Oe.prototype.encode=function(){},Oe.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},Oe}();var se=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(Te){return Te.pos=this.offset,this.version=Te.readInt(),this.revision=Te.readInt(),this.checkSumAdjustment=Te.readInt(),this.magicNumber=Te.readInt(),this.flags=Te.readShort(),this.unitsPerEm=Te.readShort(),this.created=Te.readLongLong(),this.modified=Te.readLongLong(),this.xMin=Te.readShort(),this.yMin=Te.readShort(),this.xMax=Te.readShort(),this.yMax=Te.readShort(),this.macStyle=Te.readShort(),this.lowestRecPPEM=Te.readShort(),this.fontDirectionHint=Te.readShort(),this.indexToLocFormat=Te.readShort(),this.glyphDataFormat=Te.readShort()},e.prototype.encode=function(Te){var ke;return(ke=new ne).writeInt(this.version),ke.writeInt(this.revision),ke.writeInt(this.checkSumAdjustment),ke.writeInt(this.magicNumber),ke.writeShort(this.flags),ke.writeShort(this.unitsPerEm),ke.writeLongLong(this.created),ke.writeLongLong(this.modified),ke.writeShort(this.xMin),ke.writeShort(this.yMin),ke.writeShort(this.xMax),ke.writeShort(this.yMax),ke.writeShort(this.macStyle),ke.writeShort(this.lowestRecPPEM),ke.writeShort(this.fontDirectionHint),ke.writeShort(Te),ke.writeShort(this.glyphDataFormat),ke.data},e}(),ce=function(){function Oe(e,Te){var ke,Be,Ue,He,We,Cn,En,An,Sn,Tn,Ln,Bn,ei,ti,ni,ri,si;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=Te+e.readInt(),Sn=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Cn=0;Cn<256;++Cn)this.codeMap[Cn]=e.readByte();break;case 4:for(Ln=e.readUInt16(),Tn=Ln/2,e.pos+=6,Ue=function(){var ai,li;for(li=[],Cn=ai=0;0<=Tn?ai<Tn:ai>Tn;Cn=0<=Tn?++ai:--ai)li.push(e.readUInt16());return li}(),e.pos+=2,ei=function(){var ai,li;for(li=[],Cn=ai=0;0<=Tn?ai<Tn:ai>Tn;Cn=0<=Tn?++ai:--ai)li.push(e.readUInt16());return li}(),En=function(){var ai,li;for(li=[],Cn=ai=0;0<=Tn?ai<Tn:ai>Tn;Cn=0<=Tn?++ai:--ai)li.push(e.readUInt16());return li}(),An=function(){var ai,li;for(li=[],Cn=ai=0;0<=Tn?ai<Tn:ai>Tn;Cn=0<=Tn?++ai:--ai)li.push(e.readUInt16());return li}(),Be=(this.length-e.pos+this.offset)/2,We=function(){var ai,li;for(li=[],Cn=ai=0;0<=Be?ai<Be:ai>Be;Cn=0<=Be?++ai:--ai)li.push(e.readUInt16());return li}(),Cn=ni=0,si=Ue.length;ni<si;Cn=++ni)for(ti=Ue[Cn],ke=ri=Bn=ei[Cn];Bn<=ti?ri<=ti:ri>=ti;ke=Bn<=ti?++ri:--ri)An[Cn]===0?He=ke+En[Cn]:(He=We[An[Cn]/2+(ke-Bn)-(Tn-Cn)]||0)!==0&&(He+=En[Cn]),this.codeMap[ke]=65535&He}e.pos=Sn}return Oe.encode=function(e,Te){var ke,Be,Ue,He,We,Cn,En,An,Sn,Tn,Ln,Bn,ei,ti,ni,ri,si,ai,li,Pi,pi,vi,Ri,Fi,di,ci,Mi,Oi,Hi,Ki,or,sr,Cr,pr,wr,Li,er,hr,mr,_r,dr,cr,gr,vr,Fr,zr;switch(Oi=new ne,He=Object.keys(e).sort(function(tr,fr){return tr-fr}),Te){case"macroman":for(ei=0,ti=function(){var tr=[];for(Bn=0;Bn<256;++Bn)tr.push(0);return tr}(),ri={0:0},Ue={},Hi=0,Cr=He.length;Hi<Cr;Hi++)ri[gr=e[Be=He[Hi]]]==null&&(ri[gr]=++ei),Ue[Be]={old:e[Be],new:ri[e[Be]]},ti[Be]=ri[e[Be]];return Oi.writeUInt16(1),Oi.writeUInt16(0),Oi.writeUInt32(12),Oi.writeUInt16(0),Oi.writeUInt16(262),Oi.writeUInt16(0),Oi.write(ti),{charMap:Ue,subtable:Oi.data,maxGlyphID:ei+1};case"unicode":for(ci=[],Sn=[],si=0,ri={},ke={},ni=En=null,Ki=0,pr=He.length;Ki<pr;Ki++)ri[li=e[Be=He[Ki]]]==null&&(ri[li]=++si),ke[Be]={old:li,new:ri[li]},We=ri[li]-Be,ni!=null&&We===En||(ni&&Sn.push(ni),ci.push(Be),En=We),ni=Be;for(ni&&Sn.push(ni),Sn.push(65535),ci.push(65535),Fi=2*(Ri=ci.length),vi=2*Math.pow(Math.log(Ri)/Math.LN2,2),Tn=Math.log(vi/2)/Math.LN2,pi=2*Ri-vi,Cn=[],Pi=[],Ln=[],Bn=or=0,wr=ci.length;or<wr;Bn=++or){if(di=ci[Bn],An=Sn[Bn],di===65535){Cn.push(0),Pi.push(0);break}if(di-(Mi=ke[di].new)>=32768)for(Cn.push(0),Pi.push(2*(Ln.length+Ri-Bn)),Be=sr=di;di<=An?sr<=An:sr>=An;Be=di<=An?++sr:--sr)Ln.push(ke[Be].new);else Cn.push(Mi-di),Pi.push(0)}for(Oi.writeUInt16(3),Oi.writeUInt16(1),Oi.writeUInt32(12),Oi.writeUInt16(4),Oi.writeUInt16(16+8*Ri+2*Ln.length),Oi.writeUInt16(0),Oi.writeUInt16(Fi),Oi.writeUInt16(vi),Oi.writeUInt16(Tn),Oi.writeUInt16(pi),dr=0,Li=Sn.length;dr<Li;dr++)Be=Sn[dr],Oi.writeUInt16(Be);for(Oi.writeUInt16(0),cr=0,er=ci.length;cr<er;cr++)Be=ci[cr],Oi.writeUInt16(Be);for(vr=0,hr=Cn.length;vr<hr;vr++)We=Cn[vr],Oi.writeUInt16(We);for(Fr=0,mr=Pi.length;Fr<mr;Fr++)ai=Pi[Fr],Oi.writeUInt16(ai);for(zr=0,_r=Ln.length;zr<_r;zr++)ei=Ln[zr],Oi.writeUInt16(ei);return{charMap:ke,subtable:Oi.data,maxGlyphID:si+1}}},Oe}(),ue=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(Te){var ke,Be,Ue;for(Te.pos=this.offset,this.version=Te.readUInt16(),Ue=Te.readUInt16(),this.tables=[],this.unicode=null,Be=0;0<=Ue?Be<Ue:Be>Ue;Be=0<=Ue?++Be:--Be)ke=new ce(Te,this.offset),this.tables.push(ke),ke.isUnicode&&this.unicode==null&&(this.unicode=ke);return!0},e.encode=function(Te,ke){var Be,Ue;return ke==null&&(ke="macroman"),Be=ce.encode(Te,ke),(Ue=new ne).writeUInt16(0),Ue.writeUInt16(1),Be.table=Ue.data.concat(Be.subtable),Be},e}(),he=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(Te){return Te.pos=this.offset,this.version=Te.readInt(),this.ascender=Te.readShort(),this.decender=Te.readShort(),this.lineGap=Te.readShort(),this.advanceWidthMax=Te.readShort(),this.minLeftSideBearing=Te.readShort(),this.minRightSideBearing=Te.readShort(),this.xMaxExtent=Te.readShort(),this.caretSlopeRise=Te.readShort(),this.caretSlopeRun=Te.readShort(),this.caretOffset=Te.readShort(),Te.pos+=8,this.metricDataFormat=Te.readShort(),this.numberOfMetrics=Te.readUInt16()},e}(),le=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(Te){if(Te.pos=this.offset,this.version=Te.readUInt16(),this.averageCharWidth=Te.readShort(),this.weightClass=Te.readUInt16(),this.widthClass=Te.readUInt16(),this.type=Te.readShort(),this.ySubscriptXSize=Te.readShort(),this.ySubscriptYSize=Te.readShort(),this.ySubscriptXOffset=Te.readShort(),this.ySubscriptYOffset=Te.readShort(),this.ySuperscriptXSize=Te.readShort(),this.ySuperscriptYSize=Te.readShort(),this.ySuperscriptXOffset=Te.readShort(),this.ySuperscriptYOffset=Te.readShort(),this.yStrikeoutSize=Te.readShort(),this.yStrikeoutPosition=Te.readShort(),this.familyClass=Te.readShort(),this.panose=function(){var ke,Be;for(Be=[],ke=0;ke<10;++ke)Be.push(Te.readByte());return Be}(),this.charRange=function(){var ke,Be;for(Be=[],ke=0;ke<4;++ke)Be.push(Te.readInt());return Be}(),this.vendorID=Te.readString(4),this.selection=Te.readShort(),this.firstCharIndex=Te.readShort(),this.lastCharIndex=Te.readShort(),this.version>0&&(this.ascent=Te.readShort(),this.descent=Te.readShort(),this.lineGap=Te.readShort(),this.winAscent=Te.readShort(),this.winDescent=Te.readShort(),this.codePageRange=function(){var ke,Be;for(Be=[],ke=0;ke<2;ke=++ke)Be.push(Te.readInt());return Be}(),this.version>1))return this.xHeight=Te.readShort(),this.capHeight=Te.readShort(),this.defaultChar=Te.readShort(),this.breakChar=Te.readShort(),this.maxContext=Te.readShort()},e}(),fe=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(Te){var ke,Be,Ue;switch(Te.pos=this.offset,this.format=Te.readInt(),this.italicAngle=Te.readInt(),this.underlinePosition=Te.readShort(),this.underlineThickness=Te.readShort(),this.isFixedPitch=Te.readInt(),this.minMemType42=Te.readInt(),this.maxMemType42=Te.readInt(),this.minMemType1=Te.readInt(),this.maxMemType1=Te.readInt(),this.format){case 65536:break;case 131072:var He;for(Be=Te.readUInt16(),this.glyphNameIndex=[],He=0;0<=Be?He<Be:He>Be;He=0<=Be?++He:--He)this.glyphNameIndex.push(Te.readUInt16());for(this.names=[],Ue=[];Te.pos<this.offset+this.length;)ke=Te.readByte(),Ue.push(this.names.push(Te.readString(ke)));return Ue;case 151552:return Be=Te.readUInt16(),this.offsets=Te.read(Be);case 196608:break;case 262144:return this.map=(function(){var We,Cn,En;for(En=[],He=We=0,Cn=this.file.maxp.numGlyphs;0<=Cn?We<Cn:We>Cn;He=0<=Cn?++We:--We)En.push(Te.readUInt32());return En}).call(this)}},e}(),de=function(Oe,e){this.raw=Oe,this.length=Oe.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(Te){var ke,Be,Ue,He,We,Cn,En,An,Sn,Tn,Ln;for(Te.pos=this.offset,Te.readShort(),ke=Te.readShort(),Cn=Te.readShort(),Be=[],He=0;0<=ke?He<ke:He>ke;He=0<=ke?++He:--He)Be.push({platformID:Te.readShort(),encodingID:Te.readShort(),languageID:Te.readShort(),nameID:Te.readShort(),length:Te.readShort(),offset:this.offset+Cn+Te.readShort()});for(En={},He=Sn=0,Tn=Be.length;Sn<Tn;He=++Sn)Ue=Be[He],Te.pos=Ue.offset,An=Te.readString(Ue.length),We=new de(An,Ue),En[Ln=Ue.nameID]==null&&(En[Ln]=[]),En[Ue.nameID].push(We);this.strings=En,this.copyright=En[0],this.fontFamily=En[1],this.fontSubfamily=En[2],this.uniqueSubfamily=En[3],this.fontName=En[4],this.version=En[5];try{this.postscriptName=En[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=En[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=En[7],this.manufacturer=En[8],this.designer=En[9],this.description=En[10],this.vendorUrl=En[11],this.designerUrl=En[12],this.license=En[13],this.licenseUrl=En[14],this.preferredFamily=En[15],this.preferredSubfamily=En[17],this.compatibleFull=En[18],this.sampleText=En[19]},e}(),ge=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(Te){return Te.pos=this.offset,this.version=Te.readInt(),this.numGlyphs=Te.readUInt16(),this.maxPoints=Te.readUInt16(),this.maxContours=Te.readUInt16(),this.maxCompositePoints=Te.readUInt16(),this.maxComponentContours=Te.readUInt16(),this.maxZones=Te.readUInt16(),this.maxTwilightPoints=Te.readUInt16(),this.maxStorage=Te.readUInt16(),this.maxFunctionDefs=Te.readUInt16(),this.maxInstructionDefs=Te.readUInt16(),this.maxStackElements=Te.readUInt16(),this.maxSizeOfInstructions=Te.readUInt16(),this.maxComponentElements=Te.readUInt16(),this.maxComponentDepth=Te.readUInt16()},e}(),me=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(Te){var ke,Be,Ue,He,We,Cn,En;for(Te.pos=this.offset,this.metrics=[],ke=0,Cn=this.file.hhea.numberOfMetrics;0<=Cn?ke<Cn:ke>Cn;ke=0<=Cn?++ke:--ke)this.metrics.push({advance:Te.readUInt16(),lsb:Te.readInt16()});for(Ue=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var An,Sn;for(Sn=[],ke=An=0;0<=Ue?An<Ue:An>Ue;ke=0<=Ue?++An:--An)Sn.push(Te.readInt16());return Sn}(),this.widths=(function(){var An,Sn,Tn,Ln;for(Ln=[],An=0,Sn=(Tn=this.metrics).length;An<Sn;An++)He=Tn[An],Ln.push(He.advance);return Ln}).call(this),Be=this.widths[this.widths.length-1],En=[],ke=We=0;0<=Ue?We<Ue:We>Ue;ke=0<=Ue?++We:--We)En.push(this.widths.push(Be));return En},e.prototype.forGlyph=function(Te){return Te in this.metrics?this.metrics[Te]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[Te-this.metrics.length]}},e}(),ve=[].slice,be=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(Te){var ke,Be,Ue,He,We,Cn,En,An,Sn,Tn;return Te in this.cache?this.cache[Te]:(He=this.file.loca,ke=this.file.contents,Be=He.indexOf(Te),(Ue=He.lengthOf(Te))===0?this.cache[Te]=null:(ke.pos=this.offset+Be,We=(Cn=new ne(ke.read(Ue))).readShort(),An=Cn.readShort(),Tn=Cn.readShort(),En=Cn.readShort(),Sn=Cn.readShort(),this.cache[Te]=We===-1?new we(Cn,An,Tn,En,Sn):new ye(Cn,We,An,Tn,En,Sn),this.cache[Te]))},e.prototype.encode=function(Te,ke,Be){var Ue,He,We,Cn,En;for(We=[],He=[],Cn=0,En=ke.length;Cn<En;Cn++)Ue=Te[ke[Cn]],He.push(We.length),Ue&&(We=We.concat(Ue.encode(Be)));return He.push(We.length),{table:We,offsets:He}},e}(),ye=function(){function Oe(e,Te,ke,Be,Ue,He){this.raw=e,this.numberOfContours=Te,this.xMin=ke,this.yMin=Be,this.xMax=Ue,this.yMax=He,this.compound=!1}return Oe.prototype.encode=function(){return this.raw.data},Oe}(),we=function(){function Oe(e,Te,ke,Be,Ue){var He,We;for(this.raw=e,this.xMin=Te,this.yMin=ke,this.xMax=Be,this.yMax=Ue,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],He=this.raw;We=He.readShort(),this.glyphOffsets.push(He.pos),this.glyphIDs.push(He.readUInt16()),32&We;)He.pos+=1&We?4:2,128&We?He.pos+=8:64&We?He.pos+=4:8&We&&(He.pos+=2)}return Oe.prototype.encode=function(){var e,Te,ke;for(Te=new ne(ve.call(this.raw.data)),e=0,ke=this.glyphIDs.length;e<ke;++e)Te.pos=this.glyphOffsets[e];return Te.data},Oe}(),Ne=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(Te){var ke,Be;return Te.pos=this.offset,ke=this.file.head.indexToLocFormat,this.offsets=ke===0?(function(){var Ue,He;for(He=[],Be=0,Ue=this.length;Be<Ue;Be+=2)He.push(2*Te.readUInt16());return He}).call(this):(function(){var Ue,He;for(He=[],Be=0,Ue=this.length;Be<Ue;Be+=4)He.push(Te.readUInt32());return He}).call(this)},e.prototype.indexOf=function(Te){return this.offsets[Te]},e.prototype.lengthOf=function(Te){return this.offsets[Te+1]-this.offsets[Te]},e.prototype.encode=function(Te,ke){for(var Be=new Uint32Array(this.offsets.length),Ue=0,He=0,We=0;We<Be.length;++We)if(Be[We]=Ue,He<ke.length&&ke[He]==We){++He,Be[We]=Ue;var Cn=this.offsets[We],En=this.offsets[We+1]-Cn;En>0&&(Ue+=En)}for(var An=new Array(4*Be.length),Sn=0;Sn<Be.length;++Sn)An[4*Sn+3]=255&Be[Sn],An[4*Sn+2]=(65280&Be[Sn])>>8,An[4*Sn+1]=(16711680&Be[Sn])>>16,An[4*Sn]=(4278190080&Be[Sn])>>24;return An},e}(),Le=function(){function Oe(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return Oe.prototype.generateCmap=function(){var e,Te,ke,Be,Ue;for(Te in Be=this.font.cmap.tables[0].codeMap,e={},Ue=this.subset)ke=Ue[Te],e[Te]=Be[ke];return e},Oe.prototype.glyphsFor=function(e){var Te,ke,Be,Ue,He,We,Cn;for(Be={},He=0,We=e.length;He<We;He++)Be[Ue=e[He]]=this.font.glyf.glyphFor(Ue);for(Ue in Te=[],Be)(ke=Be[Ue])!=null&&ke.compound&&Te.push.apply(Te,ke.glyphIDs);if(Te.length>0)for(Ue in Cn=this.glyphsFor(Te))ke=Cn[Ue],Be[Ue]=ke;return Be},Oe.prototype.encode=function(e,Te){var ke,Be,Ue,He,We,Cn,En,An,Sn,Tn,Ln,Bn,ei,ti,ni;for(Be in ke=ue.encode(this.generateCmap(),"unicode"),He=this.glyphsFor(e),Ln={0:0},ni=ke.charMap)Ln[(Cn=ni[Be]).old]=Cn.new;for(Bn in Tn=ke.maxGlyphID,He)Bn in Ln||(Ln[Bn]=Tn++);return An=function(ri){var si,ai;for(si in ai={},ri)ai[ri[si]]=si;return ai}(Ln),Sn=Object.keys(An).sort(function(ri,si){return ri-si}),ei=function(){var ri,si,ai;for(ai=[],ri=0,si=Sn.length;ri<si;ri++)We=Sn[ri],ai.push(An[We]);return ai}(),Ue=this.font.glyf.encode(He,ei,Ln),En=this.font.loca.encode(Ue.offsets,ei),ti={cmap:this.font.cmap.raw(),glyf:Ue.table,loca:En,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(Te)},this.font.os2.exists&&(ti["OS/2"]=this.font.os2.raw()),this.font.directory.encode(ti)},Oe}();E.API.PDFObject=function(){var Oe;function e(){}return Oe=function(Te,ke){return(Array(ke+1).join("0")+Te).slice(-ke)},e.convert=function(Te){var ke,Be,Ue,He;if(Array.isArray(Te))return"["+function(){var We,Cn,En;for(En=[],We=0,Cn=Te.length;We<Cn;We++)ke=Te[We],En.push(e.convert(ke));return En}().join(" ")+"]";if(typeof Te=="string")return"/"+Te;if(Te!=null&&Te.isString)return"("+Te+")";if(Te instanceof Date)return"(D:"+Oe(Te.getUTCFullYear(),4)+Oe(Te.getUTCMonth(),2)+Oe(Te.getUTCDate(),2)+Oe(Te.getUTCHours(),2)+Oe(Te.getUTCMinutes(),2)+Oe(Te.getUTCSeconds(),2)+"Z)";if({}.toString.call(Te)==="[object Object]"){for(Be in Ue=["<<"],Te)He=Te[Be],Ue.push("/"+Be+" "+e.convert(He));return Ue.push(">>"),Ue.join(`
`)}return""+Te},e}();const _hoisted_1$5={class:"mt-10"},_hoisted_2$3={class:"mt-10"},_hoisted_3={class:"print-preview-container"},__default__$5={},_sfc_main$9=Object.assign(__default__$5,{__name:"PrintModal",props:{visibility:Boolean,printOptions:Object,selectedBookmarks:Array},setup(Oe,{expose:e}){useCssVars(Li=>({"59c0145d":unref(sr).width,77190520:unref(sr).height,"5b104146":unref(Cr).left,"0f0c3f3f":unref(Cr).top,"7b72f4d4":ti,"28a4be11":unref(Hi).width,"5bb7eb88":unref(Hi).height,"1be0271d":unref(Mi)}));const Te=useEulerian(),ke=useMapStore(),Be=inject("selectedLayers"),Ue="Imprimer une carte",He="xl",We=[{label:"Portrait",value:"portrait",icon:"material-symbols:crop-portrait-outline-sharp"},{label:"Paysage",value:"landscape",icon:"material-symbols:crop-landscape-outline-sharp"}],Cn=ref(!1),En=()=>{Cn.value=!0,Te.pause()},An=()=>{Cn.value=!1,Te.resume()};e({onModalPrintClose:An,onModalPrintOpen:En});const Sn=ref(null),Tn=ref(null),Ln=ref(null),Bn=ref(null),ei=ref(null),ti="10px",ni=.264583333,ri=ref(!0),si=ref(!0),ai=ref("Ma carte"),li=ref("portrait"),Pi=ref(5),pi=ref("A4"),vi=computed(()=>{var Li={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}};if(li.value=="portrait")return{width:Li[pi.value].width,height:Li[pi.value].height};if(li.value=="landscape")return{width:Li[pi.value].height,height:Li[pi.value].width}}),Ri=reactive(useElementSize(Ln,{width:0,height:0},{box:"border-box"})),Fi=reactive(useElementSize(Bn,{width:0,height:0},{box:"border-box"})),di=reactive(useElementSize(Tn,{width:0,height:0},{box:"border-box"})),ci=computed(()=>({width:vi.value.width/ni,height:vi.value.height/ni})),Mi=computed(()=>{let Li=Ri.height,er=Ri.width-Fi.width;return computeScaleCoeff(er,Li,ci.value.width,ci.value.height)}),Oi=computed(()=>{var Li=vi.value.width-2*Pi.value,er=vi.value.height-2*Pi.value;return si&&(er-=di.height/or.value.height*er),{width:Li,height:er}}),Hi=computed(()=>({width:Oi.value.width+"mm",height:Oi.value.height+"mm"})),Ki=computed(()=>vi.value.height-Oi.value.height-2*Pi.value);computed(()=>({width:Oi.value.width/ni,height:Oi.value.height/ni}));const or=computed(()=>({width:ci.value.width*Mi.value,height:ci.value.height*Mi.value})),sr=computed(()=>({width:or.value.width+"px",height:or.value.height+"px"})),Cr=computed(()=>({left:Pi.value/vi.value.width*or.value.width+"px",top:Pi.value/vi.value.height*or.value.height+"px"})),pr=()=>{const Li={orientation:li.value,unit:"mm",format:[vi.value.width,vi.value.height]},er=new E(Li),hr=Sn.value.mapRef.getElementsByTagName("canvas")[0];let mr=getMapImgParams(hr,Pi.value,Ki.value,Oi.value);if(er.addImage(mr.img,mr.format,mr.imgPosX,mr.imgPosY,mr.imgWidth,mr.imgHeight),ri.value){const _r=getFakeMapCanvas(Sn.value.mapRef,hr.width,hr.height);let dr=_r.getContext("2d");dr.reset(),drawScale(dr,Sn.value.mapRef,hr.width,hr.height);let cr=getMapImgParams(_r,Pi.value,Ki.value,Oi.value);er.addImage(cr.img,cr.format,cr.imgPosX,cr.imgPosY,cr.imgWidth,cr.imgHeight),_r.remove()}if(si.value){const _r=document.createElement("canvas");_r.width=hr.width,_r.height=Ki.value/Oi.value.height*hr.height;let dr=_r.getContext("2d");drawTitle(dr,_r.height,_r.width,Oi.value.width-2*Pi.value,ai.value),Sn.value.mapRef.getElementsByClassName("ol-overlaycontainer")[0].insertAdjacentElement("beforebegin",_r),ei.value.append(_r);let cr=_r.toDataURL("image/png");er.addImage(cr,"PNG",Pi.value,Pi.value,Oi.value.width,Ki.value),_r.remove()}er.save("carte.pdf")},wr={id:"4",units:"metric",bar:!1};return(Li,er)=>{const hr=Ji,mr=ld,_r=ze,dr=lt$2,cr=Ie,gr=_sfc_main$w,vr=_sfc_main$S,Fr=Vt$1;return openBlock(),createBlock(Fr,{opened:unref(Cn),title:Ue,size:He,onClose:An},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"printPage",ref:Ln,class:"print-page"},[createBaseVNode("div",{ref_key:"printForm",ref:Bn,class:"print-form"},[createVNode(hr,{modelValue:unref(li),"onUpdate:modelValue":er[0]||(er[0]=zr=>isRef(li)?li.value=zr:null),inline:!1,options:We,small:!1,legend:"Mise en Page",class:"mb-20"},{legend:withCtx(()=>er[6]||(er[6]=[createTextVNode(" Mise en Page ")])),_:1},8,["modelValue"]),createVNode(mr,{modelValue:unref(pi),"onUpdate:modelValue":er[1]||(er[1]=zr=>isRef(pi)?pi.value=zr:null),label:"Dimensions",options:["A0","A1","A2","A3","A4","A5","B4","B5"]},null,8,["modelValue"]),createVNode(mr,{modelValue:unref(Pi),"onUpdate:modelValue":er[2]||(er[2]=zr=>isRef(Pi)?Pi.value=zr:null),modelModifiers:{number:!0},label:"Marge",options:[{value:0,text:"Pas de marge - 0mm"},{value:5,text:"Petite marge - 5mm"},{value:10,text:"Grosse marge - 10mm"}]},null,8,["modelValue"]),createVNode(_r,{modelValue:unref(ai),"onUpdate:modelValue":er[3]||(er[3]=zr=>isRef(ai)?ai.value=zr:null),disabled:!unref(si),label:"Titre de la carte","label-visible":"",name:"titre",class:"mb-10"},null,8,["modelValue","disabled"]),createBaseVNode("div",_hoisted_1$5,[createVNode(dr,{modelValue:unref(si),"onUpdate:modelValue":er[4]||(er[4]=zr=>isRef(si)?si.value=zr:null),name:"checkbox-simple",label:unref(si)?"Désactiver le titre":"Activer le titre"},null,8,["modelValue","label"])]),createBaseVNode("div",_hoisted_2$3,[createVNode(dr,{modelValue:unref(ri),"onUpdate:modelValue":er[5]||(er[5]=zr=>isRef(ri)?ri.value=zr:null),name:"checkbox-simple",label:unref(ri)?"Désactiver l'échelle":"Afficher l'échelle"},null,8,["modelValue","label"])]),createVNode(cr,{id:"print-page-export",label:"Export PDF",title:"Export PDF",icon:"","no-outline":"",onClick:pr})],512),createBaseVNode("div",_hoisted_3,[createBaseVNode("div",{ref_key:"printPreview",ref:ei,class:"print-preview"},[unref(si)?(openBlock(),createElementBlock("div",{key:0,id:"map-title",ref_key:"mapTitle",ref:Tn,class:"map-title"},toDisplayString(unref(ai)),513)):createCommentVNode("",!0),unref(Cn)?(openBlock(),createBlock(_sfc_main$V,{key:1,ref_key:"refMap",ref:Sn,class:"map","map-id":unref(printMap)},{default:withCtx(()=>[createVNode(_sfc_main$U,{"map-id":unref(printMap),center:unref(ke).center,zoom:unref(ke).zoom},null,8,["map-id","center","zoom"]),createVNode(gr,{"map-id":unref(printMap),"selected-layers":unref(Be),"selected-bookmarks":Oe.selectedBookmarks},null,8,["map-id","selected-layers","selected-bookmarks"]),createVNode(vr,{visibility:unref(ri),"scale-line-options":wr,"map-id":unref(printMap)},null,8,["visibility","map-id"])]),_:1},8,["map-id"])):createCommentVNode("",!0)],512)])],512)]),_:1},8,["opened"])}}}),PrintModal=_export_sfc(_sfc_main$9,[["__scopeId","data-v-43754764"]]),_hoisted_1$4={id:"map-and-tools-container"},_hoisted_2$2={class:"modal-container"},_sfc_main$8=defineComponent({__name:"CartoAndTools",setup(Oe){const e=useMapStore(),Te=useDataStore(),ke=ref({}),Be=ref({}),Ue=ref({}),He=ref({});provide("refModalPrint",He),provide("refModalShare",Ue);const We=()=>{Ue.value.onModalShareOpen()},Cn=()=>{ke.value.openModalTheme()},En=()=>{He.value.onModalPrintOpen()},An=()=>{Be.value.openModalLogin()},Sn=computed(()=>e.getLayers().map(ti=>{var ni=Te.getLayerByID(ti),ri=e.getLayerProperty(ti);return ni.opacity=ri.opacity,ni.visible=ri.visible,ni.gray=ri.gray,ni})),Tn=computed(()=>{var ei=[];return e.getBookmarks().forEach(ti=>{var ni=fromShare(decodeURIComponent(ti));ni.stop||(ni.key=ni.id,ei.push(ni))}),ei}),Ln=computed(()=>e.getControls()),Bn=ref(null);return provide("selectedLayers",Sn),(ei,ti)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createVNode(LeftMenuTool,{onOnModalShareOpen:We,onOnModalPrintOpen:En,onOnModalThemeOpen:Cn,onOnModalLoginOpen:An}),createVNode(Carto,{ref_key:"cartoRef",ref:Bn,"selected-layers":unref(Sn),"selected-controls":unref(Ln),"selected-bookmarks":unref(Tn)},null,8,["selected-layers","selected-controls","selected-bookmarks"]),createVNode(RightMenuTool,{"selected-layers":unref(Sn),"selected-controls":unref(Ln)},null,8,["selected-layers","selected-controls"]),createBaseVNode("div",_hoisted_2$2,[createVNode(_sfc_main$Y,{ref_key:"refModalTheme",ref:ke},null,512),createVNode(PrintModal,{ref_key:"refModalPrint",ref:He,"selected-bookmarks":unref(Tn)},null,8,["selected-bookmarks"]),createVNode(ShareModal,{ref_key:"refModalShare",ref:Ue},null,512),createVNode(_sfc_main$c,{ref_key:"refModalLogin",ref:Be},null,512)])]))}}),CartoAndTools=_export_sfc(_sfc_main$8,[["__scopeId","data-v-a27116f2"]]),_sfc_main$7={},_hoisted_1$3={class:"loader"};function _sfc_render(Oe,e){return openBlock(),createElementBlock("span",_hoisted_1$3)}const Patience=_export_sfc(_sfc_main$7,[["render",_sfc_render],["__scopeId","data-v-1ebaa4fc"]]),_sfc_main$6={__name:"StoreData",props:{},async setup(Oe){let e,Te;const ke=distExports.useLogger(),Be=useDataStore(),{fetchData:Ue}=Be,He=([e,Te]=withAsyncContext(()=>Ue()),e=await e,Te(),e);return ke.debug(He),(We,Cn)=>unref(Be).isLoaded&&!unref(Be).error?renderSlot(We.$slots,"default",{key:0}):createCommentVNode("",!0)}},__default__$4={},_sfc_main$5=Object.assign(__default__$4,{__name:"ModalInformation",setup(Oe){const e=useEulerian(),Te=useMapStore(),Be=useDataStore().getInformations(),Ue=Be.title,He=Be.description,We=Be.type,Cn=Be.version,En=ref(Be.opened&&Cn!==parseInt(Te.noInformation,10));En.value&&e.pause();const An=()=>{En.value=!1,e.resume()},Sn=()=>{En.value=!1,Te.noInformation=Cn,e.resume()};return(Tn,Ln)=>{const Bn=Sa,ei=Vt$1;return openBlock(),createBlock(ei,{opened:unref(En),title:unref(Ue),size:"md",onClose:An},{default:withCtx(()=>[createVNode(Bn,{description:unref(He),type:unref(We)},null,8,["description","type"]),createBaseVNode("button",{class:"fr-btn--tertiary-no-outline",title:"ne plus afficher ce message",type:"button",onClick:Sn},Ln[0]||(Ln[0]=[createBaseVNode("span",null,"Ne plus afficher ce message",-1)]))]),_:1},8,["opened","title"])}}}),_hoisted_1$2={class:"fr-container fr-container--fluid fr-container-md"},_hoisted_2$1={class:"patience-container"},_sfc_main$4=defineComponent({__name:"Load",setup(Oe){return(e,Te)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$6,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createVNode(_sfc_main$5)]),createVNode(CartoAndTools)]),_:1})]),_:1}))}}),_hoisted_1$1={class:"map-container"},_hoisted_2={class:"patience-container"},__default__$3={},_sfc_main$3=Object.assign(__default__$3,{__name:"Embed",setup(Oe){const e=useMapStore(),Te=useDataStore(),ke=computed(()=>e.getLayers().map(Cn=>{var En=Te.getLayerByID(Cn),An=e.getLayerProperty(Cn);return En.opacity=An.opacity,En.visible=An.visible,En.gray=An.gray,En})),Be=["ScaleLine","Zoom"];function Ue(){var We=document.querySelector(".fr-header");We.classList.add("gpf-hidden")}function He(){var We=document.querySelector(".fr-footer");We.classList.add("gpf-hidden")}return onMounted(()=>{Ue(),He()}),(We,Cn)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$6,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[createVNode(Carto,{"selected-layers":unref(ke),"selected-controls":Be},null,8,["selected-layers"])])]),_:1})]),_:1}))}}),__default__$2={},_sfc_main$2=Object.assign(__default__$2,{__name:"Login",setup(Oe){const e=useRouter(),Te=inject("services");return onMounted(()=>{const ke=location.search,Be=new URLSearchParams(ke);var Ue=Be.get("code"),He=Be.get("session_state"),We=Be.get("state"),Cn=Be.get("success"),En=Be.get("authentication_failed");if(!ke){Te.getAccessLogin().then(Sn=>{location.href=Sn});return}var An=0;Te.mode==="local"&&Ue&&He&&We?An=1:Te.mode==="remote"&&En!==null?An=parseInt(En,10):Te.mode==="remote"&&Cn!==null?An=parseInt(Cn,10):An=0,e.push({path:"/",query:{from:"login",success:An}})}),(ke,Be)=>renderSlot(ke.$slots,"default")}}),__default__$1={},_sfc_main$1=Object.assign(__default__$1,{__name:"Logout",setup(Oe){const e=useRouter(),Te=inject("services");return onMounted(()=>{const ke=location.search,Be=new URLSearchParams(ke);var Ue=Be.get("session_state"),He=Be.get("success");if(!ke){Te.getAccessLogout().then(Cn=>{location.href=Cn});return}var We=0;Te.mode==="local"&&Ue?We=1:Te.mode==="remote"&&He!==null?We=parseInt(He,10):We=0,e.push({path:"/",query:{from:"logout",success:We}})}),(ke,Be)=>renderSlot(ke.$slots,"default")}}),_hoisted_1={class:"fr-container fr-p-2w"},__default__={},_sfc_main=Object.assign(__default__,{__name:"Bookmarks",setup(Oe){useRouter(),inject("services");const e="Favoris",Te="Not yet implemented !";return onBeforeMount(()=>{}),onMounted(()=>{}),(ke,Be)=>{const Ue=Sa;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("h2",null,toDisplayString(e)),createVNode(Ue,{type:"info",title:"Information",description:Te,closed:!1,closeable:!1})]),renderSlot(ke.$slots,"default")],64)}}}),MAIN_TITLE="Le service public des cartes et données du territoire | cartes.gouv.fr",routes=[{path:"/",name:"Carte",component:_sfc_main$4},{path:"/embed",name:"Carte embarquée",component:_sfc_main$3},{path:"/login",name:"Se connecter",component:_sfc_main$2},{path:"/logout",name:"Se deconnecter",component:_sfc_main$1},{path:"/bookmarks",name:"Favoris",component:_sfc_main}],router=createRouter({history:createWebHistory("/cartes.gouv.fr-entree-carto"),routes});router.beforeEach(Oe=>{if(Oe.fullPath==="/accueil"&&!window.location.href.includes("/accueil"))return window.open(Oe.href),!1;const e=Oe.meta.title?`${Oe.meta.title} - `:"";document.title=`${e}${MAIN_TITLE}`});async function waitingPrepareApp(){if(window.__ENV__.VITE_HTTP_MOCK_REQUEST==="1"){const{worker:Oe}=await __vitePreload(async()=>{const{worker:e}=await import("./browser-3oTqR0aT.js");return{worker:e}},[]);return Oe.start({serviceWorker:{url:"/cartes.gouv.fr-entree-carto/mockServiceWorker.js"},onUnhandledRequest(e,Te){e.url.includes("data.geopf.fr")||e.url.includes("acwg.cartes.gouv.fr")||Te.warning()}})}return Promise.resolve()}const storage=localStorage.getItem("service"),services=createServices(storage?JSON.parse(storage).connexion:{}),eulerian=createEulerian({verbose:!0,domain:"acwg.cartes.gouv.fr",isActionEnabled:"reduce",site:{environment:"development",entity:"IGN"}}),logger=distExports.createLogger({enabled:!0,level:"debug",callerInfo:!0}),pinia=createPinia(),notivue=createNotivue$1({position:"bottom-center",limit:10,enqueue:!0,avoidDuplicates:!1,notifications:{global:{duration:3e3}}}),bus=createBusEvent(),store=storePlugin({stores:["service"],storage:localStorage});pinia.use(store);const app=createApp(_sfc_main$W);app.use(pinia);app.use(router);app.use(logger);app.use(eulerian);app.use(services);app.use(notivue);app.use(bus);waitingPrepareApp().then(()=>{app.mount("#app")});export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs$1 as g,useServiceStore as u};
//# sourceMappingURL=index-DXlE2mmY.js.map
