var Nx=Object.defineProperty;var Ux=(i,e,t)=>e in i?Nx(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Bx=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var Ko=(i,e,t)=>(Ux(i,typeof e!="symbol"?e+"":e,t),t),jx=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var td=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)};var Jo=(i,e,t)=>(jx(i,e,"access private method"),t);var jW=Bx(kA=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function tv(i,e){const t=new Set(i.split(","));return e?n=>t.has(n.toLowerCase()):n=>t.has(n)}const Zt={},Nl=[],Cr=()=>{},zx=()=>!1,Rg=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),iv=i=>i.startsWith("onUpdate:"),en=Object.assign,nv=(i,e)=>{const t=i.indexOf(e);t>-1&&i.splice(t,1)},Vx=Object.prototype.hasOwnProperty,It=(i,e)=>Vx.call(i,e),Ze=Array.isArray,Ul=i=>Tg(i)==="[object Map]",JI=i=>Tg(i)==="[object Set]",rt=i=>typeof i=="function",vi=i=>typeof i=="string",Sc=i=>typeof i=="symbol",ei=i=>i!==null&&typeof i=="object",QI=i=>(ei(i)||rt(i))&&rt(i.then)&&rt(i.catch),$I=Object.prototype.toString,Tg=i=>$I.call(i),Wx=i=>Tg(i).slice(8,-1),eE=i=>Tg(i)==="[object Object]",rv=i=>vi(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,yu=tv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Lg=i=>{const e=Object.create(null);return t=>e[t]||(e[t]=i(t))},Yx=/-(\w)/g,cs=Lg(i=>i.replace(Yx,(e,t)=>t?t.toUpperCase():"")),Hx=/\B([A-Z])/g,Ha=Lg(i=>i.replace(Hx,"-$1").toLowerCase()),Gg=Lg(i=>i.charAt(0).toUpperCase()+i.slice(1)),w0=Lg(i=>i?`on${Gg(i)}`:""),Lo=(i,e)=>!Object.is(i,e),b0=(i,e)=>{for(let t=0;t<i.length;t++)i[t](e)},uf=(i,e,t)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value:t})},qx=i=>{const e=parseFloat(i);return isNaN(e)?i:e};let UA;const tE=()=>UA||(UA=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function qa(i){if(Ze(i)){const e={};for(let t=0;t<i.length;t++){const n=i[t],r=vi(n)?Jx(n):qa(n);if(r)for(const s in r)e[s]=r[s]}return e}else if(vi(i)||ei(i))return i}const Xx=/;(?![^(]*\))/g,Zx=/:([^]+)/,Kx=/\/\*[^]*?\*\//g;function Jx(i){const e={};return i.replace(Kx,"").split(Xx).forEach(t=>{if(t){const n=t.split(Zx);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e}function ur(i){let e="";if(vi(i))e=i;else if(Ze(i))for(let t=0;t<i.length;t++){const n=ur(i[t]);n&&(e+=n+" ")}else if(ei(i))for(const t in i)i[t]&&(e+=t+" ");return e.trim()}function Hu(i){if(!i)return null;let{class:e,style:t}=i;return e&&!vi(e)&&(i.class=ur(e)),t&&(i.style=qa(t)),i}const Qx="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",$x=tv(Qx);function iE(i){return!!i||i===""}const pi=i=>vi(i)?i:i==null?"":Ze(i)||ei(i)&&(i.toString===$I||!rt(i.toString))?JSON.stringify(i,nE,2):String(i),nE=(i,e)=>e&&e.__v_isRef?nE(i,e.value):Ul(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[n,r],s)=>(t[S0(n,s)+" =>"]=r,t),{})}:JI(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>S0(t))}:Sc(e)?S0(e):ei(e)&&!Ze(e)&&!eE(e)?String(e):e,S0=(i,e="")=>{var t;return Sc(i)?`Symbol(${(t=i.description)!=null?t:e})`:i};/**
* @vue/reactivity v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let xr;class eP{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this.parent=xr,!e&&xr&&(this.index=(xr.scopes||(xr.scopes=[])).push(this)-1)}get active(){return this._active}run(e){if(this._active){const t=xr;try{return xr=this,e()}finally{xr=t}}}on(){xr=this}off(){xr=this.parent}stop(e){if(this._active){let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);if(!this.detached&&this.parent&&!e){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function tP(i,e=xr){e&&e.active&&e.effects.push(i)}function iP(){return xr}let ba;class sv{constructor(e,t,n,r){this.fn=e,this.trigger=t,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,tP(this,r)}get dirty(){if(this._dirtyLevel===2||this._dirtyLevel===3){this._dirtyLevel=1,Xa();for(let e=0;e<this._depsLength;e++){const t=this.deps[e];if(t.computed&&(nP(t.computed),this._dirtyLevel>=4))break}this._dirtyLevel===1&&(this._dirtyLevel=0),Za()}return this._dirtyLevel>=4}set dirty(e){this._dirtyLevel=e?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let e=Eo,t=ba;try{return Eo=!0,ba=this,this._runnings++,BA(this),this.fn()}finally{jA(this),this._runnings--,ba=t,Eo=e}}stop(){var e;this.active&&(BA(this),jA(this),(e=this.onStop)==null||e.call(this),this.active=!1)}}function nP(i){return i.value}function BA(i){i._trackId++,i._depsLength=0}function jA(i){if(i.deps.length>i._depsLength){for(let e=i._depsLength;e<i.deps.length;e++)rE(i.deps[e],i);i.deps.length=i._depsLength}}function rE(i,e){const t=i.get(e);t!==void 0&&e._trackId!==t&&(i.delete(e),i.size===0&&i.cleanup())}let Eo=!0,zp=0;const sE=[];function Xa(){sE.push(Eo),Eo=!1}function Za(){const i=sE.pop();Eo=i===void 0?!0:i}function ov(){zp++}function av(){for(zp--;!zp&&Vp.length;)Vp.shift()()}function oE(i,e,t){if(e.get(i)!==i._trackId){e.set(i,i._trackId);const n=i.deps[i._depsLength];n!==e?(n&&rE(n,i),i.deps[i._depsLength++]=e):i._depsLength++}}const Vp=[];function aE(i,e,t){ov();for(const n of i.keys()){let r;n._dirtyLevel<e&&(r??(r=i.get(n)===n._trackId))&&(n._shouldSchedule||(n._shouldSchedule=n._dirtyLevel===0),n._dirtyLevel=e),n._shouldSchedule&&(r??(r=i.get(n)===n._trackId))&&(n.trigger(),(!n._runnings||n.allowRecurse)&&n._dirtyLevel!==2&&(n._shouldSchedule=!1,n.scheduler&&Vp.push(n.scheduler)))}av()}const lE=(i,e)=>{const t=new Map;return t.cleanup=i,t.computed=e,t},hf=new WeakMap,Sa=Symbol(""),Wp=Symbol("");function Wn(i,e,t){if(Eo&&ba){let n=hf.get(i);n||hf.set(i,n=new Map);let r=n.get(t);r||n.set(t,r=lE(()=>n.delete(t))),oE(ba,r)}}function Ms(i,e,t,n,r,s){const o=hf.get(i);if(!o)return;let a=[];if(e==="clear")a=[...o.values()];else if(t==="length"&&Ze(i)){const l=Number(n);o.forEach((c,u)=>{(u==="length"||!Sc(u)&&u>=l)&&a.push(c)})}else switch(t!==void 0&&a.push(o.get(t)),e){case"add":Ze(i)?rv(t)&&a.push(o.get("length")):(a.push(o.get(Sa)),Ul(i)&&a.push(o.get(Wp)));break;case"delete":Ze(i)||(a.push(o.get(Sa)),Ul(i)&&a.push(o.get(Wp)));break;case"set":Ul(i)&&a.push(o.get(Sa));break}ov();for(const l of a)l&&aE(l,4);av()}function rP(i,e){var t;return(t=hf.get(i))==null?void 0:t.get(e)}const sP=tv("__proto__,__v_isRef,__isVue"),cE=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(Sc)),zA=oP();function oP(){const i={};return["includes","indexOf","lastIndexOf"].forEach(e=>{i[e]=function(...t){const n=St(this);for(let s=0,o=this.length;s<o;s++)Wn(n,"get",s+"");const r=n[e](...t);return r===-1||r===!1?n[e](...t.map(St)):r}}),["push","pop","shift","unshift","splice"].forEach(e=>{i[e]=function(...t){Xa(),ov();const n=St(this)[e].apply(this,t);return av(),Za(),n}}),i}function aP(i){const e=St(this);return Wn(e,"has",i),e.hasOwnProperty(i)}class uE{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){const r=this._isReadonly,s=this._isShallow;if(t==="__v_isReactive")return!r;if(t==="__v_isReadonly")return r;if(t==="__v_isShallow")return s;if(t==="__v_raw")return n===(r?s?_P:gE:s?fE:dE).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;const o=Ze(e);if(!r){if(o&&It(zA,t))return Reflect.get(zA,t,n);if(t==="hasOwnProperty")return aP}const a=Reflect.get(e,t,n);return(Sc(t)?cE.has(t):sP(t))||(r||Wn(e,"get",t),s)?a:vn(a)?o&&rv(t)?a:a.value:ei(a)?r?mE(a):rc(a):a}}class hE extends uE{constructor(e=!1){super(!1,e)}set(e,t,n,r){let s=e[t];if(!this._isShallow){const l=sc(s);if(!df(n)&&!sc(n)&&(s=St(s),n=St(n)),!Ze(e)&&vn(s)&&!vn(n))return l?!1:(s.value=n,!0)}const o=Ze(e)&&rv(t)?Number(t)<e.length:It(e,t),a=Reflect.set(e,t,n,r);return e===St(r)&&(o?Lo(n,s)&&Ms(e,"set",t,n):Ms(e,"add",t,n)),a}deleteProperty(e,t){const n=It(e,t);e[t];const r=Reflect.deleteProperty(e,t);return r&&n&&Ms(e,"delete",t,void 0),r}has(e,t){const n=Reflect.has(e,t);return(!Sc(t)||!cE.has(t))&&Wn(e,"has",t),n}ownKeys(e){return Wn(e,"iterate",Ze(e)?"length":Sa),Reflect.ownKeys(e)}}class lP extends uE{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const cP=new hE,uP=new lP,hP=new hE(!0),lv=i=>i,Og=i=>Reflect.getPrototypeOf(i);function id(i,e,t=!1,n=!1){i=i.__v_raw;const r=St(i),s=St(e);t||(Lo(e,s)&&Wn(r,"get",e),Wn(r,"get",s));const{has:o}=Og(r),a=n?lv:t?hv:qu;if(o.call(r,e))return a(i.get(e));if(o.call(r,s))return a(i.get(s));i!==r&&i.get(e)}function nd(i,e=!1){const t=this.__v_raw,n=St(t),r=St(i);return e||(Lo(i,r)&&Wn(n,"has",i),Wn(n,"has",r)),i===r?t.has(i):t.has(i)||t.has(r)}function rd(i,e=!1){return i=i.__v_raw,!e&&Wn(St(i),"iterate",Sa),Reflect.get(i,"size",i)}function VA(i){i=St(i);const e=St(this);return Og(e).has.call(e,i)||(e.add(i),Ms(e,"add",i,i)),this}function WA(i,e){e=St(e);const t=St(this),{has:n,get:r}=Og(t);let s=n.call(t,i);s||(i=St(i),s=n.call(t,i));const o=r.call(t,i);return t.set(i,e),s?Lo(e,o)&&Ms(t,"set",i,e):Ms(t,"add",i,e),this}function YA(i){const e=St(this),{has:t,get:n}=Og(e);let r=t.call(e,i);r||(i=St(i),r=t.call(e,i)),n&&n.call(e,i);const s=e.delete(i);return r&&Ms(e,"delete",i,void 0),s}function HA(){const i=St(this),e=i.size!==0,t=i.clear();return e&&Ms(i,"clear",void 0,void 0),t}function sd(i,e){return function(n,r){const s=this,o=s.__v_raw,a=St(o),l=e?lv:i?hv:qu;return!i&&Wn(a,"iterate",Sa),o.forEach((c,u)=>n.call(r,l(c),l(u),s))}}function od(i,e,t){return function(...n){const r=this.__v_raw,s=St(r),o=Ul(s),a=i==="entries"||i===Symbol.iterator&&o,l=i==="keys"&&o,c=r[i](...n),u=t?lv:e?hv:qu;return!e&&Wn(s,"iterate",l?Wp:Sa),{next(){const{value:h,done:d}=c.next();return d?{value:h,done:d}:{value:a?[u(h[0]),u(h[1])]:u(h),done:d}},[Symbol.iterator](){return this}}}}function $s(i){return function(...e){return i==="delete"?!1:i==="clear"?void 0:this}}function dP(){const i={get(s){return id(this,s)},get size(){return rd(this)},has:nd,add:VA,set:WA,delete:YA,clear:HA,forEach:sd(!1,!1)},e={get(s){return id(this,s,!1,!0)},get size(){return rd(this)},has:nd,add:VA,set:WA,delete:YA,clear:HA,forEach:sd(!1,!0)},t={get(s){return id(this,s,!0)},get size(){return rd(this,!0)},has(s){return nd.call(this,s,!0)},add:$s("add"),set:$s("set"),delete:$s("delete"),clear:$s("clear"),forEach:sd(!0,!1)},n={get(s){return id(this,s,!0,!0)},get size(){return rd(this,!0)},has(s){return nd.call(this,s,!0)},add:$s("add"),set:$s("set"),delete:$s("delete"),clear:$s("clear"),forEach:sd(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{i[s]=od(s,!1,!1),t[s]=od(s,!0,!1),e[s]=od(s,!1,!0),n[s]=od(s,!0,!0)}),[i,t,e,n]}const[fP,gP,pP,mP]=dP();function cv(i,e){const t=e?i?mP:pP:i?gP:fP;return(n,r,s)=>r==="__v_isReactive"?!i:r==="__v_isReadonly"?i:r==="__v_raw"?n:Reflect.get(It(t,r)&&r in n?t:n,r,s)}const vP={get:cv(!1,!1)},yP={get:cv(!1,!0)},AP={get:cv(!0,!1)},dE=new WeakMap,fE=new WeakMap,gE=new WeakMap,_P=new WeakMap;function CP(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function IP(i){return i.__v_skip||!Object.isExtensible(i)?0:CP(Wx(i))}function rc(i){return sc(i)?i:uv(i,!1,cP,vP,dE)}function pE(i){return uv(i,!1,hP,yP,fE)}function mE(i){return uv(i,!0,uP,AP,gE)}function uv(i,e,t,n,r){if(!ei(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const s=r.get(i);if(s)return s;const o=IP(i);if(o===0)return i;const a=new Proxy(i,o===2?n:t);return r.set(i,a),a}function Bl(i){return sc(i)?Bl(i.__v_raw):!!(i&&i.__v_isReactive)}function sc(i){return!!(i&&i.__v_isReadonly)}function df(i){return!!(i&&i.__v_isShallow)}function vE(i){return Bl(i)||sc(i)}function St(i){const e=i&&i.__v_raw;return e?St(e):i}function yE(i){return Object.isExtensible(i)&&uf(i,"__v_skip",!0),i}const qu=i=>ei(i)?rc(i):i,hv=i=>ei(i)?mE(i):i;class AE{constructor(e,t,n,r){this.getter=e,this._setter=t,this.dep=void 0,this.__v_isRef=!0,this.__v_isReadonly=!1,this.effect=new sv(()=>e(this._value),()=>Hd(this,this.effect._dirtyLevel===2?2:3)),this.effect.computed=this,this.effect.active=this._cacheable=!r,this.__v_isReadonly=n}get value(){const e=St(this);return(!e._cacheable||e.effect.dirty)&&Lo(e._value,e._value=e.effect.run())&&Hd(e,4),_E(e),e.effect._dirtyLevel>=2&&Hd(e,2),e._value}set value(e){this._setter(e)}get _dirty(){return this.effect.dirty}set _dirty(e){this.effect.dirty=e}}function EP(i,e,t=!1){let n,r;const s=rt(i);return s?(n=i,r=Cr):(n=i.get,r=i.set),new AE(n,r,s||!r,t)}function _E(i){var e;Eo&&ba&&(i=St(i),oE(ba,(e=i.dep)!=null?e:i.dep=lE(()=>i.dep=void 0,i instanceof AE?i:void 0)))}function Hd(i,e=4,t){i=St(i);const n=i.dep;n&&aE(n,e)}function vn(i){return!!(i&&i.__v_isRef===!0)}function Si(i){return CE(i,!1)}function wP(i){return CE(i,!0)}function CE(i,e){return vn(i)?i:new bP(i,e)}class bP{constructor(e,t){this.__v_isShallow=t,this.dep=void 0,this.__v_isRef=!0,this._rawValue=t?e:St(e),this._value=t?e:qu(e)}get value(){return _E(this),this._value}set value(e){const t=this.__v_isShallow||df(e)||sc(e);e=t?e:St(e),Lo(e,this._rawValue)&&(this._rawValue=e,this._value=t?e:qu(e),Hd(this,4))}}function Nt(i){return vn(i)?i.value:i}const SP={get:(i,e,t)=>Nt(Reflect.get(i,e,t)),set:(i,e,t,n)=>{const r=i[e];return vn(r)&&!vn(t)?(r.value=t,!0):Reflect.set(i,e,t,n)}};function IE(i){return Bl(i)?i:new Proxy(i,SP)}function xP(i){const e=Ze(i)?new Array(i.length):{};for(const t in i)e[t]=MP(i,t);return e}class PP{constructor(e,t,n){this._object=e,this._key=t,this._defaultValue=n,this.__v_isRef=!0}get value(){const e=this._object[this._key];return e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return rP(St(this._object),this._key)}}function MP(i,e,t){const n=i[e];return vn(n)?n:new PP(i,e,t)}/**
* @vue/runtime-core v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function wo(i,e,t,n){try{return n?i(...n):i()}catch(r){Dg(r,e,t)}}function kr(i,e,t,n){if(rt(i)){const s=wo(i,e,t,n);return s&&QI(s)&&s.catch(o=>{Dg(o,e,t)}),s}const r=[];for(let s=0;s<i.length;s++)r.push(kr(i[s],e,t,n));return r}function Dg(i,e,t,n=!0){const r=e?e.vnode:null;if(e){let s=e.parent;const o=e.proxy,a=`https://vuejs.org/error-reference/#runtime-${t}`;for(;s;){const c=s.ec;if(c){for(let u=0;u<c.length;u++)if(c[u](i,o,a)===!1)return}s=s.parent}const l=e.appContext.config.errorHandler;if(l){wo(l,null,10,[i,o,a]);return}}RP(i,t,r,n)}function RP(i,e,t,n=!0){console.error(i)}let Xu=!1,Yp=!1;const cn=[];let Qr=0;const jl=[];let so=null,ma=0;const EE=Promise.resolve();let dv=null;function wE(i){const e=dv||EE;return i?e.then(this?i.bind(this):i):e}function TP(i){let e=Qr+1,t=cn.length;for(;e<t;){const n=e+t>>>1,r=cn[n],s=Zu(r);s<i||s===i&&r.pre?e=n+1:t=n}return e}function fv(i){(!cn.length||!cn.includes(i,Xu&&i.allowRecurse?Qr+1:Qr))&&(i.id==null?cn.push(i):cn.splice(TP(i.id),0,i),bE())}function bE(){!Xu&&!Yp&&(Yp=!0,dv=EE.then(xE))}function LP(i){const e=cn.indexOf(i);e>Qr&&cn.splice(e,1)}function GP(i){Ze(i)?jl.push(...i):(!so||!so.includes(i,i.allowRecurse?ma+1:ma))&&jl.push(i),bE()}function qA(i,e,t=Xu?Qr+1:0){for(;t<cn.length;t++){const n=cn[t];if(n&&n.pre){if(i&&n.id!==i.uid)continue;cn.splice(t,1),t--,n()}}}function SE(i){if(jl.length){const e=[...new Set(jl)].sort((t,n)=>Zu(t)-Zu(n));if(jl.length=0,so){so.push(...e);return}for(so=e,ma=0;ma<so.length;ma++)so[ma]();so=null,ma=0}}const Zu=i=>i.id==null?1/0:i.id,OP=(i,e)=>{const t=Zu(i)-Zu(e);if(t===0){if(i.pre&&!e.pre)return-1;if(e.pre&&!i.pre)return 1}return t};function xE(i){Yp=!1,Xu=!0,cn.sort(OP);try{for(Qr=0;Qr<cn.length;Qr++){const e=cn[Qr];e&&e.active!==!1&&wo(e,null,14)}}finally{Qr=0,cn.length=0,SE(),Xu=!1,dv=null,(cn.length||jl.length)&&xE()}}function DP(i,e,...t){if(i.isUnmounted)return;const n=i.vnode.props||Zt;let r=t;const s=e.startsWith("update:"),o=s&&e.slice(7);if(o&&o in n){const u=`${o==="modelValue"?"model":o}Modifiers`,{number:h,trim:d}=n[u]||Zt;d&&(r=t.map(f=>vi(f)?f.trim():f)),h&&(r=t.map(qx))}let a,l=n[a=w0(e)]||n[a=w0(cs(e))];!l&&s&&(l=n[a=w0(Ha(e))]),l&&kr(l,i,6,r);const c=n[a+"Once"];if(c){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,kr(c,i,6,r)}}function PE(i,e,t=!1){const n=e.emitsCache,r=n.get(i);if(r!==void 0)return r;const s=i.emits;let o={},a=!1;if(!rt(i)){const l=c=>{const u=PE(c,e,!0);u&&(a=!0,en(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),i.extends&&l(i.extends),i.mixins&&i.mixins.forEach(l)}return!s&&!a?(ei(i)&&n.set(i,null),null):(Ze(s)?s.forEach(l=>o[l]=null):en(o,s),ei(i)&&n.set(i,o),o)}function kg(i,e){return!i||!Rg(e)?!1:(e=e.slice(2).replace(/Once$/,""),It(i,e[0].toLowerCase()+e.slice(1))||It(i,Ha(e))||It(i,e))}let hn=null,ME=null;function ff(i){const e=hn;return hn=i,ME=i&&i.type.__scopeId||null,e}function zn(i,e=hn,t){if(!e||i._n)return i;const n=(...r)=>{n._d&&r_(-1);const s=ff(e);let o;try{o=i(...r)}finally{ff(s),n._d&&r_(1)}return o};return n._n=!0,n._c=!0,n._d=!0,n}function x0(i){const{type:e,vnode:t,proxy:n,withProxy:r,props:s,propsOptions:[o],slots:a,attrs:l,emit:c,render:u,renderCache:h,data:d,setupState:f,ctx:g,inheritAttrs:p}=i;let m,v;const y=ff(i);try{if(t.shapeFlag&4){const _=r||n,C=_;m=Jr(u.call(C,_,h,s,f,d,g)),v=l}else{const _=e;m=Jr(_.length>1?_(s,{attrs:l,slots:a,emit:c}):_(s,null)),v=e.props?l:kP(l)}}catch(_){Eu.length=0,Dg(_,i,1),m=dt(Fs)}let A=m;if(v&&p!==!1){const _=Object.keys(v),{shapeFlag:C}=A;_.length&&C&7&&(o&&_.some(iv)&&(v=FP(v,o)),A=Ta(A,v))}return t.dirs&&(A=Ta(A),A.dirs=A.dirs?A.dirs.concat(t.dirs):t.dirs),t.transition&&(A.transition=t.transition),m=A,ff(y),m}const kP=i=>{let e;for(const t in i)(t==="class"||t==="style"||Rg(t))&&((e||(e={}))[t]=i[t]);return e},FP=(i,e)=>{const t={};for(const n in i)(!iv(n)||!(n.slice(9)in e))&&(t[n]=i[n]);return t};function NP(i,e,t){const{props:n,children:r,component:s}=i,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return n?XA(n,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let h=0;h<u.length;h++){const d=u[h];if(o[d]!==n[d]&&!kg(c,d))return!0}}}else return(r||a)&&(!a||!a.$stable)?!0:n===o?!1:n?o?XA(n,o,c):!0:!!o;return!1}function XA(i,e,t){const n=Object.keys(e);if(n.length!==Object.keys(i).length)return!0;for(let r=0;r<n.length;r++){const s=n[r];if(e[s]!==i[s]&&!kg(t,s))return!0}return!1}function UP({vnode:i,parent:e},t){for(;e;){const n=e.subTree;if(n.suspense&&n.suspense.activeBranch===i&&(n.el=i.el),n===i)(i=e.vnode).el=t,e=e.parent;else break}}const gv="components";function Ph(i,e){return TE(gv,i,!0,e)||i}const RE=Symbol.for("v-ndc");function Ku(i){return vi(i)?TE(gv,i,!1)||i:i||RE}function TE(i,e,t=!0,n=!1){const r=hn||Xi;if(r){const s=r.type;if(i===gv){const a=MM(s,!1);if(a&&(a===e||a===cs(e)||a===Gg(cs(e))))return s}const o=ZA(r[i]||s[i],e)||ZA(r.appContext[i],e);return!o&&n?s:o}}function ZA(i,e){return i&&(i[e]||i[cs(e)]||i[Gg(cs(e))])}const BP=i=>i.__isSuspense;function jP(i,e){e&&e.pendingBranch?Ze(i)?e.effects.push(...i):e.effects.push(i):GP(i)}const zP=Symbol.for("v-scx"),VP=()=>Vn(zP);function WP(i,e){return pv(i,null,e)}const ad={};function bo(i,e,t){return pv(i,e,t)}function pv(i,e,{immediate:t,deep:n,flush:r,once:s,onTrack:o,onTrigger:a}=Zt){if(e&&s){const I=e;e=(...b)=>{I(...b),C()}}const l=Xi,c=I=>n===!0?I:wl(I,n===!1?1:void 0);let u,h=!1,d=!1;if(vn(i)?(u=()=>i.value,h=df(i)):Bl(i)?(u=()=>c(i),h=!0):Ze(i)?(d=!0,h=i.some(I=>Bl(I)||df(I)),u=()=>i.map(I=>{if(vn(I))return I.value;if(Bl(I))return c(I);if(rt(I))return wo(I,l,2)})):rt(i)?e?u=()=>wo(i,l,2):u=()=>(f&&f(),kr(i,l,3,[g])):u=Cr,e&&n){const I=u;u=()=>wl(I())}let f,g=I=>{f=A.onStop=()=>{wo(I,l,4),f=A.onStop=void 0}},p;if(jg)if(g=Cr,e?t&&kr(e,l,3,[u(),d?[]:void 0,g]):u(),r==="sync"){const I=VP();p=I.__watcherHandles||(I.__watcherHandles=[])}else return Cr;let m=d?new Array(i.length).fill(ad):ad;const v=()=>{if(!(!A.active||!A.dirty))if(e){const I=A.run();(n||h||(d?I.some((b,S)=>Lo(b,m[S])):Lo(I,m)))&&(f&&f(),kr(e,l,3,[I,m===ad?void 0:d&&m[0]===ad?[]:m,g]),m=I)}else A.run()};v.allowRecurse=!!e;let y;r==="sync"?y=v:r==="post"?y=()=>kn(v,l&&l.suspense):(v.pre=!0,l&&(v.id=l.uid),y=()=>fv(v));const A=new sv(u,Cr,y),_=iP(),C=()=>{A.stop(),_&&nv(_.effects,A)};return e?t?v():m=A.run():r==="post"?kn(A.run.bind(A),l&&l.suspense):A.run(),p&&p.push(C),C}function YP(i,e,t){const n=this.proxy,r=vi(i)?i.includes(".")?LE(n,i):()=>n[i]:i.bind(n,n);let s;rt(e)?s=e:(s=e.handler,t=e);const o=Th(this),a=pv(r,s.bind(n),t);return o(),a}function LE(i,e){const t=e.split(".");return()=>{let n=i;for(let r=0;r<t.length&&n;r++)n=n[t[r]];return n}}function wl(i,e,t=0,n){if(!ei(i)||i.__v_skip)return i;if(e&&e>0){if(t>=e)return i;t++}if(n=n||new Set,n.has(i))return i;if(n.add(i),vn(i))wl(i.value,e,t,n);else if(Ze(i))for(let r=0;r<i.length;r++)wl(i[r],e,t,n);else if(JI(i)||Ul(i))i.forEach(r=>{wl(r,e,t,n)});else if(eE(i))for(const r in i)wl(i[r],e,t,n);return i}function Qo(i,e,t,n){const r=i.dirs,s=e&&e.dirs;for(let o=0;o<r.length;o++){const a=r[o];s&&(a.oldValue=s[o].value);let l=a.dir[n];l&&(Xa(),kr(l,t,8,[i.el,a,i,e]),Za())}}/*! #__NO_SIDE_EFFECTS__ */function Ut(i,e){return rt(i)?en({name:i.name},e,{setup:i}):i}const Au=i=>!!i.type.__asyncLoader,GE=i=>i.type.__isKeepAlive;function HP(i,e){OE(i,"a",e)}function qP(i,e){OE(i,"da",e)}function OE(i,e,t=Xi){const n=i.__wdc||(i.__wdc=()=>{let r=t;for(;r;){if(r.isDeactivated)return;r=r.parent}return i()});if(Fg(e,n,t),t){let r=t.parent;for(;r&&r.parent;)GE(r.parent.vnode)&&XP(n,e,t,r),r=r.parent}}function XP(i,e,t,n){const r=Fg(e,i,n,!0);Rh(()=>{nv(n[e],r)},t)}function Fg(i,e,t=Xi,n=!1){if(t){const r=t[i]||(t[i]=[]),s=e.__weh||(e.__weh=(...o)=>{if(t.isUnmounted)return;Xa();const a=Th(t),l=kr(e,t,i,o);return a(),Za(),l});return n?r.unshift(s):r.push(s),s}}const Ys=i=>(e,t=Xi)=>(!jg||i==="sp")&&Fg(i,(...n)=>e(...n),t),ZP=Ys("bm"),wr=Ys("m"),Ng=Ys("bu"),Mh=Ys("u"),KP=Ys("bum"),Rh=Ys("um"),JP=Ys("sp"),QP=Ys("rtg"),$P=Ys("rtc");function eM(i,e=Xi){Fg("ec",i,e)}function Go(i,e,t,n){let r;const s=t&&t[n];if(Ze(i)||vi(i)){r=new Array(i.length);for(let o=0,a=i.length;o<a;o++)r[o]=e(i[o],o,void 0,s&&s[o])}else if(typeof i=="number"){r=new Array(i);for(let o=0;o<i;o++)r[o]=e(o+1,o,void 0,s&&s[o])}else if(ei(i))if(i[Symbol.iterator])r=Array.from(i,(o,a)=>e(o,a,void 0,s&&s[a]));else{const o=Object.keys(i);r=new Array(o.length);for(let a=0,l=o.length;a<l;a++){const c=o[a];r[a]=e(i[c],c,a,s&&s[a])}}else r=[];return t&&(t[n]=r),r}function dn(i,e,t={},n,r){if(hn.isCE||hn.parent&&Au(hn.parent)&&hn.parent.isCE)return e!=="default"&&(t.name=e),dt("slot",t,n&&n());let s=i[e];s&&s._c&&(s._d=!1),de();const o=s&&DE(s(t)),a=qt(Kt,{key:t.key||o&&o.key||`_${e}`},o||(n?n():[]),o&&i._===1?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function DE(i){return i.some(e=>pf(e)?!(e.type===Fs||e.type===Kt&&!DE(e.children)):!0)?i:null}const Hp=i=>i?ZE(i)?_v(i)||i.proxy:Hp(i.parent):null,_u=en(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Hp(i.parent),$root:i=>Hp(i.root),$emit:i=>i.emit,$options:i=>mv(i),$forceUpdate:i=>i.f||(i.f=()=>{i.effect.dirty=!0,fv(i.update)}),$nextTick:i=>i.n||(i.n=wE.bind(i.proxy)),$watch:i=>YP.bind(i)}),P0=(i,e)=>i!==Zt&&!i.__isScriptSetup&&It(i,e),tM={get({_:i},e){const{ctx:t,setupState:n,data:r,props:s,accessCache:o,type:a,appContext:l}=i;let c;if(e[0]!=="$"){const f=o[e];if(f!==void 0)switch(f){case 1:return n[e];case 2:return r[e];case 4:return t[e];case 3:return s[e]}else{if(P0(n,e))return o[e]=1,n[e];if(r!==Zt&&It(r,e))return o[e]=2,r[e];if((c=i.propsOptions[0])&&It(c,e))return o[e]=3,s[e];if(t!==Zt&&It(t,e))return o[e]=4,t[e];qp&&(o[e]=0)}}const u=_u[e];let h,d;if(u)return e==="$attrs"&&Wn(i,"get",e),u(i);if((h=a.__cssModules)&&(h=h[e]))return h;if(t!==Zt&&It(t,e))return o[e]=4,t[e];if(d=l.config.globalProperties,It(d,e))return d[e]},set({_:i},e,t){const{data:n,setupState:r,ctx:s}=i;return P0(r,e)?(r[e]=t,!0):n!==Zt&&It(n,e)?(n[e]=t,!0):It(i.props,e)||e[0]==="$"&&e.slice(1)in i?!1:(s[e]=t,!0)},has({_:{data:i,setupState:e,accessCache:t,ctx:n,appContext:r,propsOptions:s}},o){let a;return!!t[o]||i!==Zt&&It(i,o)||P0(e,o)||(a=s[0])&&It(a,o)||It(n,o)||It(_u,o)||It(r.config.globalProperties,o)},defineProperty(i,e,t){return t.get!=null?i._.accessCache[e]=0:It(t,"value")&&this.set(i,e,t.value,null),Reflect.defineProperty(i,e,t)}};function kE(){return FE().slots}function iM(){return FE().attrs}function FE(){const i=bM();return i.setupContext||(i.setupContext=JE(i))}function KA(i){return Ze(i)?i.reduce((e,t)=>(e[t]=null,e),{}):i}let qp=!0;function nM(i){const e=mv(i),t=i.proxy,n=i.ctx;qp=!1,e.beforeCreate&&JA(e.beforeCreate,i,"bc");const{data:r,computed:s,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:h,mounted:d,beforeUpdate:f,updated:g,activated:p,deactivated:m,beforeDestroy:v,beforeUnmount:y,destroyed:A,unmounted:_,render:C,renderTracked:I,renderTriggered:b,errorCaptured:S,serverPrefetch:R,expose:P,inheritAttrs:w,components:x,directives:D,filters:k}=e;if(c&&rM(c,n,null),o)for(const B in o){const V=o[B];rt(V)&&(n[B]=V.bind(t))}if(r){const B=r.call(t,t);ei(B)&&(i.data=rc(B))}if(qp=!0,s)for(const B in s){const V=s[B],se=rt(V)?V.bind(t,t):rt(V.get)?V.get.bind(t,t):Cr,j=!rt(V)&&rt(V.set)?V.set.bind(t):Cr,Ae=Se({get:se,set:j});Object.defineProperty(n,B,{enumerable:!0,configurable:!0,get:()=>Ae.value,set:q=>Ae.value=q})}if(a)for(const B in a)NE(a[B],n,t,B);if(l){const B=rt(l)?l.call(t):l;Reflect.ownKeys(B).forEach(V=>{Iu(V,B[V])})}u&&JA(u,i,"c");function N(B,V){Ze(V)?V.forEach(se=>B(se.bind(t))):V&&B(V.bind(t))}if(N(ZP,h),N(wr,d),N(Ng,f),N(Mh,g),N(HP,p),N(qP,m),N(eM,S),N($P,I),N(QP,b),N(KP,y),N(Rh,_),N(JP,R),Ze(P))if(P.length){const B=i.exposed||(i.exposed={});P.forEach(V=>{Object.defineProperty(B,V,{get:()=>t[V],set:se=>t[V]=se})})}else i.exposed||(i.exposed={});C&&i.render===Cr&&(i.render=C),w!=null&&(i.inheritAttrs=w),x&&(i.components=x),D&&(i.directives=D)}function rM(i,e,t=Cr){Ze(i)&&(i=Xp(i));for(const n in i){const r=i[n];let s;ei(r)?"default"in r?s=Vn(r.from||n,r.default,!0):s=Vn(r.from||n):s=Vn(r),vn(s)?Object.defineProperty(e,n,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):e[n]=s}}function JA(i,e,t){kr(Ze(i)?i.map(n=>n.bind(e.proxy)):i.bind(e.proxy),e,t)}function NE(i,e,t,n){const r=n.includes(".")?LE(t,n):()=>t[n];if(vi(i)){const s=e[i];rt(s)&&bo(r,s)}else if(rt(i))bo(r,i.bind(t));else if(ei(i))if(Ze(i))i.forEach(s=>NE(s,e,t,n));else{const s=rt(i.handler)?i.handler.bind(t):e[i.handler];rt(s)&&bo(r,s,i)}}function mv(i){const e=i.type,{mixins:t,extends:n}=e,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=i.appContext,a=s.get(e);let l;return a?l=a:!r.length&&!t&&!n?l=e:(l={},r.length&&r.forEach(c=>gf(l,c,o,!0)),gf(l,e,o)),ei(e)&&s.set(e,l),l}function gf(i,e,t,n=!1){const{mixins:r,extends:s}=e;s&&gf(i,s,t,!0),r&&r.forEach(o=>gf(i,o,t,!0));for(const o in e)if(!(n&&o==="expose")){const a=sM[o]||t&&t[o];i[o]=a?a(i[o],e[o]):e[o]}return i}const sM={data:QA,props:$A,emits:$A,methods:au,computed:au,beforeCreate:En,created:En,beforeMount:En,mounted:En,beforeUpdate:En,updated:En,beforeDestroy:En,beforeUnmount:En,destroyed:En,unmounted:En,activated:En,deactivated:En,errorCaptured:En,serverPrefetch:En,components:au,directives:au,watch:aM,provide:QA,inject:oM};function QA(i,e){return e?i?function(){return en(rt(i)?i.call(this,this):i,rt(e)?e.call(this,this):e)}:e:i}function oM(i,e){return au(Xp(i),Xp(e))}function Xp(i){if(Ze(i)){const e={};for(let t=0;t<i.length;t++)e[i[t]]=i[t];return e}return i}function En(i,e){return i?[...new Set([].concat(i,e))]:e}function au(i,e){return i?en(Object.create(null),i,e):e}function $A(i,e){return i?Ze(i)&&Ze(e)?[...new Set([...i,...e])]:en(Object.create(null),KA(i),KA(e??{})):e}function aM(i,e){if(!i)return e;if(!e)return i;const t=en(Object.create(null),i);for(const n in e)t[n]=En(i[n],e[n]);return t}function UE(){return{app:null,config:{isNativeTag:zx,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let lM=0;function cM(i,e){return function(n,r=null){rt(n)||(n=en({},n)),r!=null&&!ei(r)&&(r=null);const s=UE(),o=new WeakSet;let a=!1;const l=s.app={_uid:lM++,_component:n,_props:r,_container:null,_context:s,_instance:null,version:TM,get config(){return s.config},set config(c){},use(c,...u){return o.has(c)||(c&&rt(c.install)?(o.add(c),c.install(l,...u)):rt(c)&&(o.add(c),c(l,...u))),l},mixin(c){return s.mixins.includes(c)||s.mixins.push(c),l},component(c,u){return u?(s.components[c]=u,l):s.components[c]},directive(c,u){return u?(s.directives[c]=u,l):s.directives[c]},mount(c,u,h){if(!a){const d=dt(n,r);return d.appContext=s,h===!0?h="svg":h===!1&&(h=void 0),u&&e?e(d,c):i(d,c,h),a=!0,l._container=c,c.__vue_app__=l,_v(d.component)||d.component.proxy}},unmount(){a&&(i(null,l._container),delete l._container.__vue_app__)},provide(c,u){return s.provides[c]=u,l},runWithContext(c){const u=Cu;Cu=l;try{return c()}finally{Cu=u}}};return l}}let Cu=null;function Iu(i,e){if(Xi){let t=Xi.provides;const n=Xi.parent&&Xi.parent.provides;n===t&&(t=Xi.provides=Object.create(n)),t[i]=e}}function Vn(i,e,t=!1){const n=Xi||hn;if(n||Cu){const r=n?n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides:Cu._context.provides;if(r&&i in r)return r[i];if(arguments.length>1)return t&&rt(e)?e.call(n&&n.proxy):e}}function uM(i,e,t,n=!1){const r={},s={};uf(s,Bg,1),i.propsDefaults=Object.create(null),BE(i,e,r,s);for(const o in i.propsOptions[0])o in r||(r[o]=void 0);t?i.props=n?r:pE(r):i.type.props?i.props=r:i.props=s,i.attrs=s}function hM(i,e,t,n){const{props:r,attrs:s,vnode:{patchFlag:o}}=i,a=St(r),[l]=i.propsOptions;let c=!1;if((n||o>0)&&!(o&16)){if(o&8){const u=i.vnode.dynamicProps;for(let h=0;h<u.length;h++){let d=u[h];if(kg(i.emitsOptions,d))continue;const f=e[d];if(l)if(It(s,d))f!==s[d]&&(s[d]=f,c=!0);else{const g=cs(d);r[g]=Zp(l,a,g,f,i,!1)}else f!==s[d]&&(s[d]=f,c=!0)}}}else{BE(i,e,r,s)&&(c=!0);let u;for(const h in a)(!e||!It(e,h)&&((u=Ha(h))===h||!It(e,u)))&&(l?t&&(t[h]!==void 0||t[u]!==void 0)&&(r[h]=Zp(l,a,h,void 0,i,!0)):delete r[h]);if(s!==a)for(const h in s)(!e||!It(e,h))&&(delete s[h],c=!0)}c&&Ms(i,"set","$attrs")}function BE(i,e,t,n){const[r,s]=i.propsOptions;let o=!1,a;if(e)for(let l in e){if(yu(l))continue;const c=e[l];let u;r&&It(r,u=cs(l))?!s||!s.includes(u)?t[u]=c:(a||(a={}))[u]=c:kg(i.emitsOptions,l)||(!(l in n)||c!==n[l])&&(n[l]=c,o=!0)}if(s){const l=St(t),c=a||Zt;for(let u=0;u<s.length;u++){const h=s[u];t[h]=Zp(r,l,h,c[h],i,!It(c,h))}}return o}function Zp(i,e,t,n,r,s){const o=i[t];if(o!=null){const a=It(o,"default");if(a&&n===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&rt(l)){const{propsDefaults:c}=r;if(t in c)n=c[t];else{const u=Th(r);n=c[t]=l.call(null,e),u()}}else n=l}o[0]&&(s&&!a?n=!1:o[1]&&(n===""||n===Ha(t))&&(n=!0))}return n}function jE(i,e,t=!1){const n=e.propsCache,r=n.get(i);if(r)return r;const s=i.props,o={},a=[];let l=!1;if(!rt(i)){const u=h=>{l=!0;const[d,f]=jE(h,e,!0);en(o,d),f&&a.push(...f)};!t&&e.mixins.length&&e.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!s&&!l)return ei(i)&&n.set(i,Nl),Nl;if(Ze(s))for(let u=0;u<s.length;u++){const h=cs(s[u]);e_(h)&&(o[h]=Zt)}else if(s)for(const u in s){const h=cs(u);if(e_(h)){const d=s[u],f=o[h]=Ze(d)||rt(d)?{type:d}:en({},d);if(f){const g=n_(Boolean,f.type),p=n_(String,f.type);f[0]=g>-1,f[1]=p<0||g<p,(g>-1||It(f,"default"))&&a.push(h)}}}const c=[o,a];return ei(i)&&n.set(i,c),c}function e_(i){return i[0]!=="$"&&!yu(i)}function t_(i){return i===null?"null":typeof i=="function"?i.name||"":typeof i=="object"&&i.constructor&&i.constructor.name||""}function i_(i,e){return t_(i)===t_(e)}function n_(i,e){return Ze(e)?e.findIndex(t=>i_(t,i)):rt(e)&&i_(e,i)?0:-1}const zE=i=>i[0]==="_"||i==="$stable",vv=i=>Ze(i)?i.map(Jr):[Jr(i)],dM=(i,e,t)=>{if(e._n)return e;const n=zn((...r)=>vv(e(...r)),t);return n._c=!1,n},VE=(i,e,t)=>{const n=i._ctx;for(const r in i){if(zE(r))continue;const s=i[r];if(rt(s))e[r]=dM(r,s,n);else if(s!=null){const o=vv(s);e[r]=()=>o}}},WE=(i,e)=>{const t=vv(e);i.slots.default=()=>t},fM=(i,e)=>{if(i.vnode.shapeFlag&32){const t=e._;t?(i.slots=St(e),uf(e,"_",t)):VE(e,i.slots={})}else i.slots={},e&&WE(i,e);uf(i.slots,Bg,1)},gM=(i,e,t)=>{const{vnode:n,slots:r}=i;let s=!0,o=Zt;if(n.shapeFlag&32){const a=e._;a?t&&a===1?s=!1:(en(r,e),!t&&a===1&&delete r._):(s=!e.$stable,VE(e,r)),o=e}else e&&(WE(i,e),o={default:1});if(s)for(const a in r)!zE(a)&&o[a]==null&&delete r[a]};function Kp(i,e,t,n,r=!1){if(Ze(i)){i.forEach((d,f)=>Kp(d,e&&(Ze(e)?e[f]:e),t,n,r));return}if(Au(n)&&!r)return;const s=n.shapeFlag&4?_v(n.component)||n.component.proxy:n.el,o=r?null:s,{i:a,r:l}=i,c=e&&e.r,u=a.refs===Zt?a.refs={}:a.refs,h=a.setupState;if(c!=null&&c!==l&&(vi(c)?(u[c]=null,It(h,c)&&(h[c]=null)):vn(c)&&(c.value=null)),rt(l))wo(l,a,12,[o,u]);else{const d=vi(l),f=vn(l);if(d||f){const g=()=>{if(i.f){const p=d?It(h,l)?h[l]:u[l]:l.value;r?Ze(p)&&nv(p,s):Ze(p)?p.includes(s)||p.push(s):d?(u[l]=[s],It(h,l)&&(h[l]=u[l])):(l.value=[s],i.k&&(u[i.k]=l.value))}else d?(u[l]=o,It(h,l)&&(h[l]=o)):f&&(l.value=o,i.k&&(u[i.k]=o))};o?(g.id=-1,kn(g,t)):g()}}}const kn=jP;function pM(i){return mM(i)}function mM(i,e){const t=tE();t.__VUE__=!0;const{insert:n,remove:r,patchProp:s,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:h,nextSibling:d,setScopeId:f=Cr,insertStaticContent:g}=i,p=(E,M,G,W=null,X=null,K=null,ie=void 0,$=null,Q=!!M.dynamicChildren)=>{if(E===M)return;E&&!Xc(E,M)&&(W=z(E),q(E,X,K,!0),E=null),M.patchFlag===-2&&(Q=!1,M.dynamicChildren=null);const{type:Z,ref:T,shapeFlag:F}=M;switch(Z){case Ug:m(E,M,G,W);break;case Fs:v(E,M,G,W);break;case R0:E==null&&y(M,G,W,ie);break;case Kt:x(E,M,G,W,X,K,ie,$,Q);break;default:F&1?C(E,M,G,W,X,K,ie,$,Q):F&6?D(E,M,G,W,X,K,ie,$,Q):(F&64||F&128)&&Z.process(E,M,G,W,X,K,ie,$,Q,Y)}T!=null&&X&&Kp(T,E&&E.ref,K,M||E,!M)},m=(E,M,G,W)=>{if(E==null)n(M.el=a(M.children),G,W);else{const X=M.el=E.el;M.children!==E.children&&c(X,M.children)}},v=(E,M,G,W)=>{E==null?n(M.el=l(M.children||""),G,W):M.el=E.el},y=(E,M,G,W)=>{[E.el,E.anchor]=g(E.children,M,G,W,E.el,E.anchor)},A=({el:E,anchor:M},G,W)=>{let X;for(;E&&E!==M;)X=d(E),n(E,G,W),E=X;n(M,G,W)},_=({el:E,anchor:M})=>{let G;for(;E&&E!==M;)G=d(E),r(E),E=G;r(M)},C=(E,M,G,W,X,K,ie,$,Q)=>{M.type==="svg"?ie="svg":M.type==="math"&&(ie="mathml"),E==null?I(M,G,W,X,K,ie,$,Q):R(E,M,X,K,ie,$,Q)},I=(E,M,G,W,X,K,ie,$)=>{let Q,Z;const{props:T,shapeFlag:F,transition:U,dirs:H}=E;if(Q=E.el=o(E.type,K,T&&T.is,T),F&8?u(Q,E.children):F&16&&S(E.children,Q,null,W,X,M0(E,K),ie,$),H&&Qo(E,null,W,"created"),b(Q,E,E.scopeId,ie,W),T){for(const ee in T)ee!=="value"&&!yu(ee)&&s(Q,ee,null,T[ee],K,E.children,W,X,Ie);"value"in T&&s(Q,"value",null,T.value,K),(Z=T.onVnodeBeforeMount)&&Yr(Z,W,E)}H&&Qo(E,null,W,"beforeMount");const te=vM(X,U);te&&U.beforeEnter(Q),n(Q,M,G),((Z=T&&T.onVnodeMounted)||te||H)&&kn(()=>{Z&&Yr(Z,W,E),te&&U.enter(Q),H&&Qo(E,null,W,"mounted")},X)},b=(E,M,G,W,X)=>{if(G&&f(E,G),W)for(let K=0;K<W.length;K++)f(E,W[K]);if(X){let K=X.subTree;if(M===K){const ie=X.vnode;b(E,ie,ie.scopeId,ie.slotScopeIds,X.parent)}}},S=(E,M,G,W,X,K,ie,$,Q=0)=>{for(let Z=Q;Z<E.length;Z++){const T=E[Z]=$?oo(E[Z]):Jr(E[Z]);p(null,T,M,G,W,X,K,ie,$)}},R=(E,M,G,W,X,K,ie)=>{const $=M.el=E.el;let{patchFlag:Q,dynamicChildren:Z,dirs:T}=M;Q|=E.patchFlag&16;const F=E.props||Zt,U=M.props||Zt;let H;if(G&&$o(G,!1),(H=U.onVnodeBeforeUpdate)&&Yr(H,G,M,E),T&&Qo(M,E,G,"beforeUpdate"),G&&$o(G,!0),Z?P(E.dynamicChildren,Z,$,G,W,M0(M,X),K):ie||V(E,M,$,null,G,W,M0(M,X),K,!1),Q>0){if(Q&16)w($,M,F,U,G,W,X);else if(Q&2&&F.class!==U.class&&s($,"class",null,U.class,X),Q&4&&s($,"style",F.style,U.style,X),Q&8){const te=M.dynamicProps;for(let ee=0;ee<te.length;ee++){const ue=te[ee],Me=F[ue],be=U[ue];(be!==Me||ue==="value")&&s($,ue,Me,be,X,E.children,G,W,Ie)}}Q&1&&E.children!==M.children&&u($,M.children)}else!ie&&Z==null&&w($,M,F,U,G,W,X);((H=U.onVnodeUpdated)||T)&&kn(()=>{H&&Yr(H,G,M,E),T&&Qo(M,E,G,"updated")},W)},P=(E,M,G,W,X,K,ie)=>{for(let $=0;$<M.length;$++){const Q=E[$],Z=M[$],T=Q.el&&(Q.type===Kt||!Xc(Q,Z)||Q.shapeFlag&70)?h(Q.el):G;p(Q,Z,T,null,W,X,K,ie,!0)}},w=(E,M,G,W,X,K,ie)=>{if(G!==W){if(G!==Zt)for(const $ in G)!yu($)&&!($ in W)&&s(E,$,G[$],null,ie,M.children,X,K,Ie);for(const $ in W){if(yu($))continue;const Q=W[$],Z=G[$];Q!==Z&&$!=="value"&&s(E,$,Z,Q,ie,M.children,X,K,Ie)}"value"in W&&s(E,"value",G.value,W.value,ie)}},x=(E,M,G,W,X,K,ie,$,Q)=>{const Z=M.el=E?E.el:a(""),T=M.anchor=E?E.anchor:a("");let{patchFlag:F,dynamicChildren:U,slotScopeIds:H}=M;H&&($=$?$.concat(H):H),E==null?(n(Z,G,W),n(T,G,W),S(M.children||[],G,T,X,K,ie,$,Q)):F>0&&F&64&&U&&E.dynamicChildren?(P(E.dynamicChildren,U,G,X,K,ie,$),(M.key!=null||X&&M===X.subTree)&&YE(E,M,!0)):V(E,M,G,T,X,K,ie,$,Q)},D=(E,M,G,W,X,K,ie,$,Q)=>{M.slotScopeIds=$,E==null?M.shapeFlag&512?X.ctx.activate(M,G,W,ie,Q):k(M,G,W,X,K,ie,Q):O(E,M,Q)},k=(E,M,G,W,X,K,ie)=>{const $=E.component=wM(E,W,X);if(GE(E)&&($.ctx.renderer=Y),SM($),$.asyncDep){if(X&&X.registerDep($,N),!E.el){const Q=$.subTree=dt(Fs);v(null,Q,M,G)}}else N($,E,M,G,X,K,ie)},O=(E,M,G)=>{const W=M.component=E.component;if(NP(E,M,G))if(W.asyncDep&&!W.asyncResolved){B(W,M,G);return}else W.next=M,LP(W.update),W.effect.dirty=!0,W.update();else M.el=E.el,W.vnode=M},N=(E,M,G,W,X,K,ie)=>{const $=()=>{if(E.isMounted){let{next:T,bu:F,u:U,parent:H,vnode:te}=E;{const pt=HE(E);if(pt){T&&(T.el=te.el,B(E,T,ie)),pt.asyncDep.then(()=>{E.isUnmounted||$()});return}}let ee=T,ue;$o(E,!1),T?(T.el=te.el,B(E,T,ie)):T=te,F&&b0(F),(ue=T.props&&T.props.onVnodeBeforeUpdate)&&Yr(ue,H,T,te),$o(E,!0);const Me=x0(E),be=E.subTree;E.subTree=Me,p(be,Me,h(be.el),z(be),E,X,K),T.el=Me.el,ee===null&&UP(E,Me.el),U&&kn(U,X),(ue=T.props&&T.props.onVnodeUpdated)&&kn(()=>Yr(ue,H,T,te),X)}else{let T;const{el:F,props:U}=M,{bm:H,m:te,parent:ee}=E,ue=Au(M);if($o(E,!1),H&&b0(H),!ue&&(T=U&&U.onVnodeBeforeMount)&&Yr(T,ee,M),$o(E,!0),F&&tt){const Me=()=>{E.subTree=x0(E),tt(F,E.subTree,E,X,null)};ue?M.type.__asyncLoader().then(()=>!E.isUnmounted&&Me()):Me()}else{const Me=E.subTree=x0(E);p(null,Me,G,W,E,X,K),M.el=Me.el}if(te&&kn(te,X),!ue&&(T=U&&U.onVnodeMounted)){const Me=M;kn(()=>Yr(T,ee,Me),X)}(M.shapeFlag&256||ee&&Au(ee.vnode)&&ee.vnode.shapeFlag&256)&&E.a&&kn(E.a,X),E.isMounted=!0,M=G=W=null}},Q=E.effect=new sv($,Cr,()=>fv(Z),E.scope),Z=E.update=()=>{Q.dirty&&Q.run()};Z.id=E.uid,$o(E,!0),Z()},B=(E,M,G)=>{M.component=E;const W=E.vnode.props;E.vnode=M,E.next=null,hM(E,M.props,W,G),gM(E,M.children,G),Xa(),qA(E),Za()},V=(E,M,G,W,X,K,ie,$,Q=!1)=>{const Z=E&&E.children,T=E?E.shapeFlag:0,F=M.children,{patchFlag:U,shapeFlag:H}=M;if(U>0){if(U&128){j(Z,F,G,W,X,K,ie,$,Q);return}else if(U&256){se(Z,F,G,W,X,K,ie,$,Q);return}}H&8?(T&16&&Ie(Z,X,K),F!==Z&&u(G,F)):T&16?H&16?j(Z,F,G,W,X,K,ie,$,Q):Ie(Z,X,K,!0):(T&8&&u(G,""),H&16&&S(F,G,W,X,K,ie,$,Q))},se=(E,M,G,W,X,K,ie,$,Q)=>{E=E||Nl,M=M||Nl;const Z=E.length,T=M.length,F=Math.min(Z,T);let U;for(U=0;U<F;U++){const H=M[U]=Q?oo(M[U]):Jr(M[U]);p(E[U],H,G,null,X,K,ie,$,Q)}Z>T?Ie(E,X,K,!0,!1,F):S(M,G,W,X,K,ie,$,Q,F)},j=(E,M,G,W,X,K,ie,$,Q)=>{let Z=0;const T=M.length;let F=E.length-1,U=T-1;for(;Z<=F&&Z<=U;){const H=E[Z],te=M[Z]=Q?oo(M[Z]):Jr(M[Z]);if(Xc(H,te))p(H,te,G,null,X,K,ie,$,Q);else break;Z++}for(;Z<=F&&Z<=U;){const H=E[F],te=M[U]=Q?oo(M[U]):Jr(M[U]);if(Xc(H,te))p(H,te,G,null,X,K,ie,$,Q);else break;F--,U--}if(Z>F){if(Z<=U){const H=U+1,te=H<T?M[H].el:W;for(;Z<=U;)p(null,M[Z]=Q?oo(M[Z]):Jr(M[Z]),G,te,X,K,ie,$,Q),Z++}}else if(Z>U)for(;Z<=F;)q(E[Z],X,K,!0),Z++;else{const H=Z,te=Z,ee=new Map;for(Z=te;Z<=U;Z++){const Ne=M[Z]=Q?oo(M[Z]):Jr(M[Z]);Ne.key!=null&&ee.set(Ne.key,Z)}let ue,Me=0;const be=U-te+1;let pt=!1,wt=0;const Wt=new Array(be);for(Z=0;Z<be;Z++)Wt[Z]=0;for(Z=H;Z<=F;Z++){const Ne=E[Z];if(Me>=be){q(Ne,X,K,!0);continue}let ct;if(Ne.key!=null)ct=ee.get(Ne.key);else for(ue=te;ue<=U;ue++)if(Wt[ue-te]===0&&Xc(Ne,M[ue])){ct=ue;break}ct===void 0?q(Ne,X,K,!0):(Wt[ct-te]=Z+1,ct>=wt?wt=ct:pt=!0,p(Ne,M[ct],G,null,X,K,ie,$,Q),Me++)}const mt=pt?yM(Wt):Nl;for(ue=mt.length-1,Z=be-1;Z>=0;Z--){const Ne=te+Z,ct=M[Ne],At=Ne+1<T?M[Ne+1].el:W;Wt[Z]===0?p(null,ct,G,At,X,K,ie,$,Q):pt&&(ue<0||Z!==mt[ue]?Ae(ct,G,At,2):ue--)}}},Ae=(E,M,G,W,X=null)=>{const{el:K,type:ie,transition:$,children:Q,shapeFlag:Z}=E;if(Z&6){Ae(E.component.subTree,M,G,W);return}if(Z&128){E.suspense.move(M,G,W);return}if(Z&64){ie.move(E,M,G,Y);return}if(ie===Kt){n(K,M,G);for(let F=0;F<Q.length;F++)Ae(Q[F],M,G,W);n(E.anchor,M,G);return}if(ie===R0){A(E,M,G);return}if(W!==2&&Z&1&&$)if(W===0)$.beforeEnter(K),n(K,M,G),kn(()=>$.enter(K),X);else{const{leave:F,delayLeave:U,afterLeave:H}=$,te=()=>n(K,M,G),ee=()=>{F(K,()=>{te(),H&&H()})};U?U(K,te,ee):ee()}else n(K,M,G)},q=(E,M,G,W=!1,X=!1)=>{const{type:K,props:ie,ref:$,children:Q,dynamicChildren:Z,shapeFlag:T,patchFlag:F,dirs:U}=E;if($!=null&&Kp($,null,G,E,!0),T&256){M.ctx.deactivate(E);return}const H=T&1&&U,te=!Au(E);let ee;if(te&&(ee=ie&&ie.onVnodeBeforeUnmount)&&Yr(ee,M,E),T&6)pe(E.component,G,W);else{if(T&128){E.suspense.unmount(G,W);return}H&&Qo(E,null,M,"beforeUnmount"),T&64?E.type.remove(E,M,G,X,Y,W):Z&&(K!==Kt||F>0&&F&64)?Ie(Z,M,G,!1,!0):(K===Kt&&F&384||!X&&T&16)&&Ie(Q,M,G),W&&Te(E)}(te&&(ee=ie&&ie.onVnodeUnmounted)||H)&&kn(()=>{ee&&Yr(ee,M,E),H&&Qo(E,null,M,"unmounted")},G)},Te=E=>{const{type:M,el:G,anchor:W,transition:X}=E;if(M===Kt){Ce(G,W);return}if(M===R0){_(E);return}const K=()=>{r(G),X&&!X.persisted&&X.afterLeave&&X.afterLeave()};if(E.shapeFlag&1&&X&&!X.persisted){const{leave:ie,delayLeave:$}=X,Q=()=>ie(G,K);$?$(E.el,K,Q):Q()}else K()},Ce=(E,M)=>{let G;for(;E!==M;)G=d(E),r(E),E=G;r(M)},pe=(E,M,G)=>{const{bum:W,scope:X,update:K,subTree:ie,um:$}=E;W&&b0(W),X.stop(),K&&(K.active=!1,q(ie,E,M,G)),$&&kn($,M),kn(()=>{E.isUnmounted=!0},M),M&&M.pendingBranch&&!M.isUnmounted&&E.asyncDep&&!E.asyncResolved&&E.suspenseId===M.pendingId&&(M.deps--,M.deps===0&&M.resolve())},Ie=(E,M,G,W=!1,X=!1,K=0)=>{for(let ie=K;ie<E.length;ie++)q(E[ie],M,G,W,X)},z=E=>E.shapeFlag&6?z(E.component.subTree):E.shapeFlag&128?E.suspense.next():d(E.anchor||E.el);let oe=!1;const ne=(E,M,G)=>{E==null?M._vnode&&q(M._vnode,null,null,!0):p(M._vnode||null,E,M,null,null,null,G),oe||(oe=!0,qA(),SE(),oe=!1),M._vnode=E},Y={p,um:q,m:Ae,r:Te,mt:k,mc:S,pc:V,pbc:P,n:z,o:i};let Pe,tt;return e&&([Pe,tt]=e(Y)),{render:ne,hydrate:Pe,createApp:cM(ne,Pe)}}function M0({type:i,props:e},t){return t==="svg"&&i==="foreignObject"||t==="mathml"&&i==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function $o({effect:i,update:e},t){i.allowRecurse=e.allowRecurse=t}function vM(i,e){return(!i||i&&!i.pendingBranch)&&e&&!e.persisted}function YE(i,e,t=!1){const n=i.children,r=e.children;if(Ze(n)&&Ze(r))for(let s=0;s<n.length;s++){const o=n[s];let a=r[s];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=r[s]=oo(r[s]),a.el=o.el),t||YE(o,a)),a.type===Ug&&(a.el=o.el)}}function yM(i){const e=i.slice(),t=[0];let n,r,s,o,a;const l=i.length;for(n=0;n<l;n++){const c=i[n];if(c!==0){if(r=t[t.length-1],i[r]<c){e[n]=r,t.push(n);continue}for(s=0,o=t.length-1;s<o;)a=s+o>>1,i[t[a]]<c?s=a+1:o=a;c<i[t[s]]&&(s>0&&(e[n]=t[s-1]),t[s]=n)}}for(s=t.length,o=t[s-1];s-- >0;)t[s]=o,o=e[o];return t}function HE(i){const e=i.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:HE(e)}const AM=i=>i.__isTeleport,Kt=Symbol.for("v-fgt"),Ug=Symbol.for("v-txt"),Fs=Symbol.for("v-cmt"),R0=Symbol.for("v-stc"),Eu=[];let Lr=null;function de(i=!1){Eu.push(Lr=i?null:[])}function _M(){Eu.pop(),Lr=Eu[Eu.length-1]||null}let Ju=1;function r_(i){Ju+=i}function qE(i){return i.dynamicChildren=Ju>0?Lr||Nl:null,_M(),Ju>0&&Lr&&Lr.push(i),i}function Ge(i,e,t,n,r,s){return qE(Oe(i,e,t,n,r,s,!0))}function qt(i,e,t,n,r){return qE(dt(i,e,t,n,r,!0))}function pf(i){return i?i.__v_isVNode===!0:!1}function Xc(i,e){return i.type===e.type&&i.key===e.key}const Bg="__vInternal",XE=({key:i})=>i??null,qd=({ref:i,ref_key:e,ref_for:t})=>(typeof i=="number"&&(i=""+i),i!=null?vi(i)||vn(i)||rt(i)?{i:hn,r:i,k:e,f:!!t}:i:null);function Oe(i,e=null,t=null,n=0,r=null,s=i===Kt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&XE(e),ref:e&&qd(e),scopeId:ME,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:n,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:hn};return a?(Av(l,t),s&128&&i.normalize(l)):t&&(l.shapeFlag|=vi(t)?8:16),Ju>0&&!o&&Lr&&(l.patchFlag>0||s&6)&&l.patchFlag!==32&&Lr.push(l),l}const dt=CM;function CM(i,e=null,t=null,n=0,r=null,s=!1){if((!i||i===RE)&&(i=Fs),pf(i)){const a=Ta(i,e,!0);return t&&Av(a,t),Ju>0&&!s&&Lr&&(a.shapeFlag&6?Lr[Lr.indexOf(i)]=a:Lr.push(a)),a.patchFlag|=-2,a}if(RM(i)&&(i=i.__vccOpts),e){e=yv(e);let{class:a,style:l}=e;a&&!vi(a)&&(e.class=ur(a)),ei(l)&&(vE(l)&&!Ze(l)&&(l=en({},l)),e.style=qa(l))}const o=vi(i)?1:BP(i)?128:AM(i)?64:ei(i)?4:rt(i)?2:0;return Oe(i,e,t,n,r,o,s,!0)}function yv(i){return i?vE(i)||Bg in i?en({},i):i:null}function Ta(i,e,t=!1){const{props:n,ref:r,patchFlag:s,children:o}=i,a=e?xi(n||{},e):n;return{__v_isVNode:!0,__v_skip:!0,type:i.type,props:a,key:a&&XE(a),ref:e&&e.ref?t&&r?Ze(r)?r.concat(qd(e)):[r,qd(e)]:qd(e):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:o,target:i.target,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==Kt?s===-1?16:s|16:s,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:i.transition,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Ta(i.ssContent),ssFallback:i.ssFallback&&Ta(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce}}function cr(i=" ",e=0){return dt(Ug,null,i,e)}function Ct(i="",e=!1){return e?(de(),qt(Fs,null,i)):dt(Fs,null,i)}function Jr(i){return i==null||typeof i=="boolean"?dt(Fs):Ze(i)?dt(Kt,null,i.slice()):typeof i=="object"?oo(i):dt(Ug,null,String(i))}function oo(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Ta(i)}function Av(i,e){let t=0;const{shapeFlag:n}=i;if(e==null)e=null;else if(Ze(e))t=16;else if(typeof e=="object")if(n&65){const r=e.default;r&&(r._c&&(r._d=!1),Av(i,r()),r._c&&(r._d=!0));return}else{t=32;const r=e._;!r&&!(Bg in e)?e._ctx=hn:r===3&&hn&&(hn.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else rt(e)?(e={default:e,_ctx:hn},t=32):(e=String(e),n&64?(t=16,e=[cr(e)]):t=8);i.children=e,i.shapeFlag|=t}function xi(...i){const e={};for(let t=0;t<i.length;t++){const n=i[t];for(const r in n)if(r==="class")e.class!==n.class&&(e.class=ur([e.class,n.class]));else if(r==="style")e.style=qa([e.style,n.style]);else if(Rg(r)){const s=e[r],o=n[r];o&&s!==o&&!(Ze(s)&&s.includes(o))&&(e[r]=s?[].concat(s,o):o)}else r!==""&&(e[r]=n[r])}return e}function Yr(i,e,t,n=null){kr(i,e,7,[t,n])}const IM=UE();let EM=0;function wM(i,e,t){const n=i.type,r=(e?e.appContext:i.appContext)||IM,s={uid:EM++,vnode:i,type:n,parent:e,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,scope:new eP(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(r.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:jE(n,r),emitsOptions:PE(n,r),emit:null,emitted:null,propsDefaults:Zt,inheritAttrs:n.inheritAttrs,ctx:Zt,data:Zt,props:Zt,attrs:Zt,slots:Zt,refs:Zt,setupState:Zt,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=e?e.root:s,s.emit=DP.bind(null,s),i.ce&&i.ce(s),s}let Xi=null;const bM=()=>Xi||hn;let mf,Jp;{const i=tE(),e=(t,n)=>{let r;return(r=i[t])||(r=i[t]=[]),r.push(n),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};mf=e("__VUE_INSTANCE_SETTERS__",t=>Xi=t),Jp=e("__VUE_SSR_SETTERS__",t=>jg=t)}const Th=i=>{const e=Xi;return mf(i),i.scope.on(),()=>{i.scope.off(),mf(e)}},s_=()=>{Xi&&Xi.scope.off(),mf(null)};function ZE(i){return i.vnode.shapeFlag&4}let jg=!1;function SM(i,e=!1){e&&Jp(e);const{props:t,children:n}=i.vnode,r=ZE(i);uM(i,t,r,e),fM(i,n);const s=r?xM(i,e):void 0;return e&&Jp(!1),s}function xM(i,e){const t=i.type;i.accessCache=Object.create(null),i.proxy=yE(new Proxy(i.ctx,tM));const{setup:n}=t;if(n){const r=i.setupContext=n.length>1?JE(i):null,s=Th(i);Xa();const o=wo(n,i,0,[i.props,r]);if(Za(),s(),QI(o)){if(o.then(s_,s_),e)return o.then(a=>{o_(i,a,e)}).catch(a=>{Dg(a,i,0)});i.asyncDep=o}else o_(i,o,e)}else KE(i,e)}function o_(i,e,t){rt(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:ei(e)&&(i.setupState=IE(e)),KE(i,t)}let a_;function KE(i,e,t){const n=i.type;if(!i.render){if(!e&&a_&&!n.render){const r=n.template||mv(i).template;if(r){const{isCustomElement:s,compilerOptions:o}=i.appContext.config,{delimiters:a,compilerOptions:l}=n,c=en(en({isCustomElement:s,delimiters:a},o),l);n.render=a_(r,c)}}i.render=n.render||Cr}{const r=Th(i);Xa();try{nM(i)}finally{Za(),r()}}}function PM(i){return i.attrsProxy||(i.attrsProxy=new Proxy(i.attrs,{get(e,t){return Wn(i,"get","$attrs"),e[t]}}))}function JE(i){const e=t=>{i.exposed=t||{}};return{get attrs(){return PM(i)},slots:i.slots,emit:i.emit,expose:e}}function _v(i){if(i.exposed)return i.exposeProxy||(i.exposeProxy=new Proxy(IE(yE(i.exposed)),{get(e,t){if(t in e)return e[t];if(t in _u)return _u[t](i)},has(e,t){return t in e||t in _u}}))}function MM(i,e=!0){return rt(i)?i.displayName||i.name:i.name||e&&i.__name}function RM(i){return rt(i)&&"__vccOpts"in i}const Se=(i,e)=>EP(i,e,jg);function wu(i,e,t){const n=arguments.length;return n===2?ei(e)&&!Ze(e)?pf(e)?dt(i,null,[e]):dt(i,e):dt(i,null,e):(n>3?t=Array.prototype.slice.call(arguments,2):n===3&&pf(t)&&(t=[t]),dt(i,e,t))}const TM="3.4.21";/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const LM="http://www.w3.org/2000/svg",GM="http://www.w3.org/1998/Math/MathML",ao=typeof document<"u"?document:null,l_=ao&&ao.createElement("template"),OM={insert:(i,e,t)=>{e.insertBefore(i,t||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,t,n)=>{const r=e==="svg"?ao.createElementNS(LM,i):e==="mathml"?ao.createElementNS(GM,i):ao.createElement(i,t?{is:t}:void 0);return i==="select"&&n&&n.multiple!=null&&r.setAttribute("multiple",n.multiple),r},createText:i=>ao.createTextNode(i),createComment:i=>ao.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>ao.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,t,n,r,s){const o=t?t.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling))for(;e.insertBefore(r.cloneNode(!0),t),!(r===s||!(r=r.nextSibling)););else{l_.innerHTML=n==="svg"?`<svg>${i}</svg>`:n==="mathml"?`<math>${i}</math>`:i;const a=l_.content;if(n==="svg"||n==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},DM=Symbol("_vtc");function kM(i,e,t){const n=i[DM];n&&(e=(e?[e,...n]:[...n]).join(" ")),e==null?i.removeAttribute("class"):t?i.setAttribute("class",e):i.className=e}const c_=Symbol("_vod"),FM=Symbol("_vsh"),NM=Symbol(""),UM=/(^|;)\s*display\s*:/;function BM(i,e,t){const n=i.style,r=vi(t);let s=!1;if(t&&!r){if(e)if(vi(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Xd(n,a,"")}else for(const o in e)t[o]==null&&Xd(n,o,"");for(const o in t)o==="display"&&(s=!0),Xd(n,o,t[o])}else if(r){if(e!==t){const o=n[NM];o&&(t+=";"+o),n.cssText=t,s=UM.test(t)}}else e&&i.removeAttribute("style");c_ in i&&(i[c_]=s?n.display:"",i[FM]&&(n.display="none"))}const u_=/\s*!important$/;function Xd(i,e,t){if(Ze(t))t.forEach(n=>Xd(i,e,n));else if(t==null&&(t=""),e.startsWith("--"))i.setProperty(e,t);else{const n=jM(i,e);u_.test(t)?i.setProperty(Ha(n),t.replace(u_,""),"important"):i[n]=t}}const h_=["Webkit","Moz","ms"],T0={};function jM(i,e){const t=T0[e];if(t)return t;let n=cs(e);if(n!=="filter"&&n in i)return T0[e]=n;n=Gg(n);for(let r=0;r<h_.length;r++){const s=h_[r]+n;if(s in i)return T0[e]=s}return e}const d_="http://www.w3.org/1999/xlink";function zM(i,e,t,n,r){if(n&&e.startsWith("xlink:"))t==null?i.removeAttributeNS(d_,e.slice(6,e.length)):i.setAttributeNS(d_,e,t);else{const s=$x(e);t==null||s&&!iE(t)?i.removeAttribute(e):i.setAttribute(e,s?"":t)}}function VM(i,e,t,n,r,s,o){if(e==="innerHTML"||e==="textContent"){n&&o(n,r,s),i[e]=t??"";return}const a=i.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const c=a==="OPTION"?i.getAttribute("value")||"":i.value,u=t??"";(c!==u||!("_value"in i))&&(i.value=u),t==null&&i.removeAttribute(e),i._value=t;return}let l=!1;if(t===""||t==null){const c=typeof i[e];c==="boolean"?t=iE(t):t==null&&c==="string"?(t="",l=!0):c==="number"&&(t=0,l=!0)}try{i[e]=t}catch{}l&&i.removeAttribute(e)}function WM(i,e,t,n){i.addEventListener(e,t,n)}function YM(i,e,t,n){i.removeEventListener(e,t,n)}const f_=Symbol("_vei");function HM(i,e,t,n,r=null){const s=i[f_]||(i[f_]={}),o=s[e];if(n&&o)o.value=n;else{const[a,l]=qM(e);if(n){const c=s[e]=KM(n,r);WM(i,a,c,l)}else o&&(YM(i,a,o,l),s[e]=void 0)}}const g_=/(?:Once|Passive|Capture)$/;function qM(i){let e;if(g_.test(i)){e={};let n;for(;n=i.match(g_);)i=i.slice(0,i.length-n[0].length),e[n[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):Ha(i.slice(2)),e]}let L0=0;const XM=Promise.resolve(),ZM=()=>L0||(XM.then(()=>L0=0),L0=Date.now());function KM(i,e){const t=n=>{if(!n._vts)n._vts=Date.now();else if(n._vts<=t.attached)return;kr(JM(n,t.value),e,5,[n])};return t.value=i,t.attached=ZM(),t}function JM(i,e){if(Ze(e)){const t=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{t.call(i),i._stopped=!0},e.map(n=>r=>!r._stopped&&n&&n(r))}else return e}const p_=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,QM=(i,e,t,n,r,s,o,a,l)=>{const c=r==="svg";e==="class"?kM(i,n,c):e==="style"?BM(i,t,n):Rg(e)?iv(e)||HM(i,e,t,n,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):$M(i,e,n,c))?VM(i,e,n,s,o,a,l):(e==="true-value"?i._trueValue=n:e==="false-value"&&(i._falseValue=n),zM(i,e,n,c))};function $M(i,e,t,n){if(n)return!!(e==="innerHTML"||e==="textContent"||e in i&&p_(e)&&rt(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const r=i.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return p_(e)&&vi(t)?!1:e in i}const eR=["ctrl","shift","alt","meta"],tR={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,e)=>eR.some(t=>i[`${t}Key`]&&!e.includes(t))},zl=(i,e)=>{const t=i._withMods||(i._withMods={}),n=e.join(".");return t[n]||(t[n]=(r,...s)=>{for(let o=0;o<e.length;o++){const a=tR[e[o]];if(a&&a(r,e))return}return i(r,...s)})},iR={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},nR=(i,e)=>{const t=i._withKeys||(i._withKeys={}),n=e.join(".");return t[n]||(t[n]=r=>{if(!("key"in r))return;const s=Ha(r.key);if(e.some(o=>o===s||iR[o]===s))return i(r)})},rR=en({patchProp:QM},OM);let m_;function sR(){return m_||(m_=pM(rR))}const oR=(...i)=>{const e=sR().createApp(...i),{mount:t}=e;return e.mount=n=>{const r=lR(n);if(!r)return;const s=e._component;!rt(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.innerHTML="";const o=t(r,!1,aR(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},e};function aR(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function lR(i){return vi(i)?document.querySelector(i):i}const cR={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","&":"&amp;"};let uR=0;var hR=i=>i.replace(/[<>"&]/g,e=>cR[e]||e),dR=i=>i+uR++;const va={},fR=i=>{const{name:e,paths:t=[],d:n,polygons:r=[],points:s}=i;n&&t.push({d:n}),s&&r.push({points:s}),va[e]=Object.assign({},i,{paths:t,polygons:r}),va[e].minX||(va[e].minX=0),va[e].minY||(va[e].minY=0)},gR=(...i)=>{for(const e of i)fR(e)},oc=Ut({name:"OhVueIcon",props:{name:{type:String,validator:i=>!i||i in va||(console.warn(`Invalid prop: prop "name" is referring to an unregistered icon "${i}".
Please make sure you have imported this icon before using it.`),!1)},title:String,fill:String,scale:{type:[Number,String],default:1},animation:{validator:i=>["spin","spin-pulse","wrench","ring","pulse","flash","float"].includes(i)},hover:Boolean,flip:{validator:i=>["horizontal","vertical","both"].includes(i)},speed:{validator:i=>i==="fast"||i==="slow"},label:String,inverse:Boolean},setup(i){const e=Si([]),t=rc({outerScale:1.2,x:null,y:null}),n=rc({width:0,height:0}),r=Se(()=>{const p=Number(i.scale);return isNaN(p)||p<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),t.outerScale):p*t.outerScale}),s=Se(()=>({"ov-icon":!0,"ov-inverse":i.inverse,"ov-flip-horizontal":i.flip==="horizontal","ov-flip-vertical":i.flip==="vertical","ov-flip-both":i.flip==="both","ov-spin":i.animation==="spin","ov-spin-pulse":i.animation==="spin-pulse","ov-wrench":i.animation==="wrench","ov-ring":i.animation==="ring","ov-pulse":i.animation==="pulse","ov-flash":i.animation==="flash","ov-float":i.animation==="float","ov-hover":i.hover,"ov-fast":i.speed==="fast","ov-slow":i.speed==="slow"})),o=Se(()=>i.name?va[i.name]:null),a=Se(()=>o.value?`${o.value.minX} ${o.value.minY} ${o.value.width} ${o.value.height}`:`0 0 ${c.value} ${u.value}`),l=Se(()=>{if(!o.value)return 1;const{width:p,height:m}=o.value;return Math.max(p,m)/16}),c=Se(()=>n.width||o.value&&o.value.width/l.value*r.value||0),u=Se(()=>n.height||o.value&&o.value.height/l.value*r.value||0),h=Se(()=>r.value!==1&&{fontSize:r.value+"em"}),d=Se(()=>{if(!o.value||!o.value.raw)return null;const p={};let m=o.value.raw;return m=m.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,(v,y,A)=>{const _=dR("vat-");return p[A]=_,` id="${_}"`}),m=m.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(v,y,A,_)=>{const C=y||_;return C&&p[C]?`#${p[C]}`:v}),m}),f=Se(()=>o.value&&o.value.attr?o.value.attr:{}),g=()=>{if(!i.name&&i.name!==null&&e.value.length===0)return void console.warn('Invalid prop: prop "name" is required.');if(o.value)return;let p=0,m=0;e.value.forEach(v=>{v.outerScale=r.value,p=Math.max(p,v.width),m=Math.max(m,v.height)}),n.width=p,n.height=m,e.value.forEach(v=>{v.x=(p-v.width)/2,v.y=(m-v.height)/2})};return wr(()=>{g()}),Mh(()=>{g()}),{...xP(t),children:e,icon:o,klass:s,style:h,width:c,height:u,box:a,attribs:f,raw:d}},created(){const i=this.$parent;i&&i.children&&i.children.push(this)},render(){const i=Object.assign({role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":!(this.label||this.title),width:this.width,height:this.height,viewBox:this.box},this.attribs);this.attribs.stroke?i.stroke=this.fill?this.fill:"currentColor":i.fill=this.fill?this.fill:"currentColor",this.x&&(i.x=this.x.toString()),this.y&&(i.y=this.y.toString());let e={class:this.klass,style:this.style};if(e=Object.assign(e,i),this.raw){const r=this.title?`<title>${hR(this.title)}</title>${this.raw}`:this.raw;e.innerHTML=r}const t=this.title?[wu("title",this.title)]:[],n=(r,s,o)=>wu(r,{...s,key:`${r}-${o}`});return wu("svg",e,this.raw?void 0:t.concat([this.$slots.default?this.$slots.default():this.icon?[...this.icon.paths.map((r,s)=>n("path",r,s)),...this.icon.polygons.map((r,s)=>n("polygon",r,s))]:[]]))}});function Cv(i,e){e===void 0&&(e={});var t=e.insertAt;if(i&&typeof document<"u"){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t==="top"&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=i:r.appendChild(document.createTextNode(i))}}Cv(`.ov-icon {
  display: inline-block;
  overflow: visible;
  vertical-align: -0.2em;
}
`);Cv(`/* ---------------- spin ---------------- */
.ov-spin:not(.ov-hover),
.ov-spin.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-spin {
  animation: ov-spin 1s linear infinite;
}

.ov-spin:not(.ov-hover).ov-fast,
.ov-spin.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-spin.ov-fast {
  animation: ov-spin 0.7s linear infinite;
}

.ov-spin:not(.ov-hover).ov-slow,
.ov-spin.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-spin.ov-slow {
  animation: ov-spin 2s linear infinite;
}

/* ---------------- spin-pulse ---------------- */

.ov-spin-pulse:not(.ov-hover),
.ov-spin-pulse.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse {
  animation: ov-spin 1s infinite steps(8);
}

.ov-spin-pulse:not(.ov-hover).ov-fast,
.ov-spin-pulse.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse.ov-fast {
  animation: ov-spin 0.7s infinite steps(8);
}

.ov-spin-pulse:not(.ov-hover).ov-slow,
.ov-spin-pulse.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse.ov-slow {
  animation: ov-spin 2s infinite steps(8);
}

@keyframes ov-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* ---------------- wrench ---------------- */
.ov-wrench:not(.ov-hover),
.ov-wrench.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-wrench {
  animation: ov-wrench 2.5s ease infinite;
}

.ov-wrench:not(.ov-hover).ov-fast,
.ov-wrench.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-wrench.ov-fast {
  animation: ov-wrench 1.2s ease infinite;
}

.ov-wrench:not(.ov-hover).ov-slow,
.ov-wrench.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-wrench.ov-slow {
  animation: ov-wrench 3.7s ease infinite;
}

@keyframes ov-wrench {
  0% {
    transform: rotate(-12deg);
  }

  8% {
    transform: rotate(12deg);
  }

  10%, 28%, 30%, 48%, 50%, 68% {
    transform: rotate(24deg);
  }

  18%, 20%, 38%, 40%, 58%, 60% {
    transform: rotate(-24deg);
  }

  75%, 100% {
    transform: rotate(0deg);
  }
}

/* ---------------- ring ---------------- */
.ov-ring:not(.ov-hover),
.ov-ring.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-ring {
  animation: ov-ring 2s ease infinite;
}

.ov-ring:not(.ov-hover).ov-fast,
.ov-ring.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-ring.ov-fast {
  animation: ov-ring 1s ease infinite;
}

.ov-ring:not(.ov-hover).ov-slow,
.ov-ring.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-ring.ov-slow {
  animation: ov-ring 3s ease infinite;
}

@keyframes ov-ring {
  0% {
    transform: rotate(-15deg);
  }

  2% {
    transform: rotate(15deg);
  }

  4%, 12% {
    transform: rotate(-18deg);
  }

  6% {
    transform: rotate(18deg);
  }

  8% {
    transform: rotate(-22deg);
  }

  10% {
    transform: rotate(22deg);
  }

  12% {
    transform: rotate(-18deg);
  }

  14% {
    transform: rotate(18deg);
  }

  16% {
    transform: rotate(-12deg);
  }

  18% {
    transform: rotate(12deg);
  }

  20%, 100% {
    transform: rotate(0deg);
  }
}

/* ---------------- pulse ---------------- */
.ov-pulse:not(.ov-hover),
.ov-pulse.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-pulse {
  animation: ov-pulse 2s linear infinite;
}

.ov-pulse:not(.ov-hover).ov-fast,
.ov-pulse.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-pulse.ov-fast {
  animation: ov-pulse 1s linear infinite;
}

.ov-pulse:not(.ov-hover).ov-slow,
.ov-pulse.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-pulse.ov-slow {
  animation: ov-pulse 3s linear infinite;
}

@keyframes ov-pulse {
  0% {
    transform: scale(1.1);
  }

  50% {
    transform: scale(0.8);
  }

  100% {
    transform: scale(1.1);
  }
}

/* ---------------- flash ---------------- */
.ov-flash:not(.ov-hover),
.ov-flash.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-flash {
  animation: ov-flash 2s ease infinite;
}

.ov-flash:not(.ov-hover).ov-fast,
.ov-flash.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-flash.ov-fast {
  animation: ov-flash 1s ease infinite;
}

.ov-flash:not(.ov-hover).ov-slow,
.ov-flash.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-flash.ov-slow {
  animation: ov-flash 3s ease infinite;
}

@keyframes ov-flash {
  0%, 100%, 50%{
    opacity: 1;
  }
  25%, 75%{
    opacity: 0;
  }
}

/* ---------------- float ---------------- */
.ov-float:not(.ov-hover),
.ov-float.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-float {
  animation: ov-float 2s linear infinite;
}

.ov-float:not(.ov-hover).ov-fast,
.ov-float.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-float.ov-fast {
  animation: ov-float 1s linear infinite;
}

.ov-float:not(.ov-hover).ov-slow,
.ov-float.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-float.ov-slow {
  animation: ov-float 3s linear infinite;
}

@keyframes ov-float {
  0%, 100% {
    transform: translateY(-3px);
  }
  50% {
    transform: translateY(3px);
  }
}
`);Cv(`.ov-flip-horizontal {
  transform: scale(-1, 1);
}

.ov-flip-vertical {
  transform: scale(1, -1);
}

.ov-flip-both {
  transform: scale(-1, -1);
}

.ov-inverse {
  color: #fff;
}
`);const pR="abcdefghijklmnopqrstuvwyz0123456789",v_=pR.repeat(10),mR=()=>{const i=Math.floor(Math.random()*v_.length);return v_[i]},Yo=(i="",e="")=>(i?i+"-":"")+vR(5)+(e?"-"+e:""),vR=i=>Array.from({length:i}).map(mR).join(""),yR="(prefers-color-scheme: dark)",Zd="vue-dsfr-scheme",vf="light",bu="dark",Vl="system",y_="data-fr-theme",Qp=i=>{const e=i??(localStorage.getItem(Zd)||Vl);return[vf,bu,Vl].includes(e)?e:Vl},A_=(i,e)=>(i=Qp(i),i===Vl?e!=null&&e.matches?bu:vf:i),AR=i=>{if(typeof window>"u")return;const e={scheme:localStorage.getItem(Zd)||Vl,dataThemeAttribute:y_,...i},t=window.matchMedia&&window.matchMedia(yR),n=Si(Qp(e.scheme));localStorage.setItem(Zd,n.value);const r=Si(A_(n.value,t)),s=Si(n.value!==Vl);WP(()=>{var u;(u=document.body.parentElement)==null||u.setAttribute(e.dataThemeAttribute||y_,r.value)}),t==null||t.addEventListener("change",u=>{s.value||(u.matches?r.value=bu:r.value=vf)}),!s.value&&t!=null&&t.matches&&(r.value=bu);const o=u=>{if(n.value=Qp(u),localStorage.setItem(Zd,n.value),[vf,bu].includes(n.value)){r.value=n.value,s.value=!0;return}r.value=A_(n.value,t),s.value=!1},a=document.documentElement,l={subtree:!1,childList:!1,attributes:!0},c=new MutationObserver(u=>{for(const h of u)if(h.type==="attributes"&&h.attributeName==="data-fr-theme"){const d=h.target.getAttribute(h.attributeName);d!==n.value&&(console.log("mutation:",d,"<-",n.value),o(d))}});return c.observe(a,l),window.addEventListener("unload",()=>c.disconnect()),o(n.value),{setScheme:o,theme:Se(()=>r.value),scheme:Se(()=>n.value)}},QE=()=>{const i=Si(),e=Si(!1),t=Si(!1),n=()=>{if(!i.value)return;i.value.style.setProperty("--collapser","none");const r=i.value.offsetHeight;i.value.style.setProperty("--collapse",-r+"px"),i.value.style.setProperty("--collapser","")};return{collapse:i,collapsing:e,cssExpanded:t,doExpand:r=>{i.value&&(r===!0&&i.value.style.setProperty("--collapse-max-height","none"),window.requestAnimationFrame(()=>{e.value=!0,n(),window.requestAnimationFrame(()=>{t.value=r})}))},adjust:n,onTransitionEnd:r=>{e.value=!1,i.value&&r===!1&&i.value.style.removeProperty("--collapse-max-height")}}},_R=["title","disabled","aria-disabled"],CR={key:1},IR=Ut({__name:"DsfrButton",props:{disabled:{type:Boolean},label:{default:void 0},secondary:{type:Boolean},tertiary:{type:Boolean},iconRight:{type:Boolean},iconOnly:{type:Boolean},noOutline:{type:Boolean},size:{default:"md"},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},setup(i,{expose:e}){const t=i,n=Se(()=>["sm","small"].includes(t.size)),r=Se(()=>["md","medium"].includes(t.size)),s=Se(()=>["lg","large"].includes(t.size)),o=Si(null);e({focus:()=>{var u;(u=o.value)==null||u.focus()}});const a=Se(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),l=Se(()=>t.iconOnly?1.25:.8325),c=Se(()=>typeof t.icon=="string"?{scale:l.value,name:t.icon}:{scale:l.value,...t.icon});return(u,h)=>(de(),Ge("button",{ref_key:"btn",ref:o,class:ur({"fr-btn":!0,"fr-btn--secondary":u.secondary&&!u.tertiary,"fr-btn--tertiary":u.tertiary&&!u.secondary&&!u.noOutline,"fr-btn--tertiary-no-outline":u.tertiary&&!u.secondary&&u.noOutline,"fr-btn--sm":n.value,"fr-btn--md":r.value,"fr-btn--lg":s.value,"fr-btn--icon-right":!u.iconOnly&&a.value&&u.iconRight,"fr-btn--icon-left":!u.iconOnly&&a.value&&!u.iconRight,"inline-flex":!a.value,reverse:u.iconRight&&!a.value,"justify-center":!a.value&&u.iconOnly,[u.icon]:a.value}),title:u.iconOnly?u.label:void 0,disabled:u.disabled,"aria-disabled":u.disabled,style:qa(!a.value&&u.iconOnly?{"padding-inline":"0.5rem"}:{}),onClick:h[0]||(h[0]=d=>u.onClick?u.onClick(d):()=>{})},[u.icon&&!a.value?(de(),qt(Nt(oc),Hu(xi({key:0},c.value)),null,16)):Ct("",!0),u.iconOnly?Ct("",!0):(de(),Ge("span",CR,[cr(pi(u.label)+" ",1),dn(u.$slots,"default",{},void 0,!0)]))],14,_R))}}),Lh=(i,e)=>{const t=i.__vccOpts||i;for(const[n,r]of e)t[n]=r;return t},ER=Lh(IR,[["__scopeId","data-v-7fc52401"]]),wR=["innerHTML"],$E=Ut({__name:"DsfrLogo",props:{small:{type:Boolean},large:{type:Boolean},logoText:{default:()=>"Gouvernement"}},setup(i){const e=i,t=Se(()=>e.logoText instanceof Array?e.logoText.join("<br>"):e.logoText);return(n,r)=>(de(),Ge("p",{class:ur(["fr-logo",{"fr-logo--sm":n.small&&!n.large,"fr-logo--lg":n.large&&!n.small}]),innerHTML:t.value},null,10,wR))}}),bR={class:"fr-footer__partners"},SR={key:0,class:"fr-footer__partners-title"},xR={class:"fr-footer__partners-logos"},PR={key:0,class:"fr-footer__partners-main"},MR=["href"],RR=["src","alt"],TR={class:"fr-footer__partners-sub"},LR=["href"],GR=["src","alt"],OR=Ut({__name:"DsfrFooterPartners",props:{mainPartner:{default:void 0},subPartners:{default:()=>[]},title:{default:""}},setup(i){return(e,t)=>(de(),Ge("div",bR,[e.title?(de(),Ge("h4",SR,pi(e.title),1)):Ct("",!0),Oe("div",xR,[e.mainPartner?(de(),Ge("div",PR,[Oe("a",{class:"fr-footer__partners-link",href:e.mainPartner.href,target:"_blank",rel:"noopener noreferrer"},[Oe("img",{class:"fr-footer__logo",src:e.mainPartner.logo,alt:e.mainPartner.name},null,8,RR)],8,MR)])):Ct("",!0),Oe("div",TR,[Oe("ul",null,[(de(!0),Ge(Kt,null,Go(e.subPartners,(n,r)=>(de(),Ge("li",{key:r},[Oe("a",{class:"fr-footer__partners-link",href:n.href,target:"_blank",rel:"noopener noreferrer"},[Oe("img",{class:"fr-footer__logo",src:n.logo,alt:n.name},null,8,GR)],8,LR)]))),128))])])])]))}}),__=1,DR=Ut({__name:"DsfrFooterLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:void 0},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0}},setup(i){const e=i,t=Se(()=>e.button?"button":n.value||r.value?"a":"RouterLink"),n=Se(()=>{var u;return(u=e.href)==null?void 0:u.startsWith("http")}),r=Se(()=>{var u;return(u=e.href)==null?void 0:u.startsWith("mailto")}),s=Se(()=>{if(!(!n.value&&!r.value))return e.href}),o=Se(()=>{if(!(n.value||r.value))return e.to}),a=Se(()=>o.value?{to:o.value}:{href:s.value}),l=Se(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),c=Se(()=>typeof e.icon=="string"?{name:e.icon,scale:__,...e.iconAttrs??{}}:{scale:__,...e.icon??{},...e.iconAttrs??{}});return(u,h)=>(de(),qt(Ku(t.value),xi({class:["fr-footer__bottom-link",{"fr-btn--icon-right":l.value&&u.iconRight,"fr-btn--icon-left":l.value&&!u.iconRight,[String(u.icon)]:l.value}]},a.value,{target:u.target,onClick:zl(u.onClick,["stop"])}),{default:zn(()=>{var d,f;return[!l.value&&(u.icon||(d=u.iconAttrs)!=null&&d.name)&&!u.iconRight?(de(),qt(Nt(oc),xi({key:0,class:"fr-mr-1w"},c.value),null,16)):Ct("",!0),cr(" "+pi(u.label)+" ",1),!l.value&&(u.icon||(f=u.iconAttrs)!=null&&f.name)&&u.iconRight?(de(),qt(Nt(oc),xi({key:1,class:"fr-ml-1w"},c.value),null,16)):Ct("",!0)]}),_:1},16,["class","target","onClick"]))}}),kR={id:"footer",class:"fr-footer",role:"contentinfo"},FR={key:0,class:"fr-footer__top"},NR={class:"fr-container"},UR={class:"fr-grid-row fr-grid-row--start fr-grid-row--gutters"},BR={class:"fr-container"},jR={class:"fr-footer__body"},zR={class:"fr-footer__brand fr-enlarge-link"},VR=["src","alt"],WR={class:"fr-footer__content"},YR={class:"fr-footer__content-desc"},HR={class:"fr-footer__content-list"},qR=["href"],XR={class:"fr-footer__bottom"},ZR={class:"fr-footer__bottom-list"},KR={key:0,class:"fr-footer__bottom-copy"},JR=Ut({__name:"DsfrFooter",props:{a11yCompliance:{default:"non conforme"},a11yComplianceLink:{default:"/a11y"},legalLink:{default:"/mentions-legales"},homeLink:{default:"/"},partners:{default:()=>{}},personalDataLink:{default:"/donnees-personnelles"},cookiesLink:{default:"/cookies"},logoText:{default:()=>["Rpublique","Franaise"]},descText:{default:void 0},beforeMandatoryLinks:{default:()=>[]},afterMandatoryLinks:{default:()=>[]},mandatoryLinks:{default:i=>[{label:`Accessibilit : ${i.a11yCompliance}`,to:i.a11yComplianceLink},{label:"Mentions lgales",to:i.legalLink,"data-testid":"/mentions-legales"},{label:"Donnes personnelles",to:i.personalDataLink},{label:"Gestion des cookies",to:i.cookiesLink}]},ecosystemLinks:{default:()=>[{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"gouvernement.fr",href:"https://gouvernement.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}]},operatorLinkText:{default:"Revenir  laccueil"},operatorTo:{default:"/"},operatorImgStyle:{default:void 0},operatorImgSrc:{default:void 0},operatorImgAlt:{default:""},licenceTo:{default:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"},licenceLinkProps:{default:()=>{}},licenceText:{default:"Sauf mention contraire, tous les textes de ce site sont sous"},licenceName:{default:"licence etalab-2.0"}},setup(i){const e=i,t=Se(()=>[...e.beforeMandatoryLinks,...e.mandatoryLinks,...e.afterMandatoryLinks]),n=kE(),r=Se(()=>{var l;return(l=n["footer-link-lists"])==null?void 0:l.call(n).length}),s=Se(()=>{const l=e.licenceTo||e.licenceLinkProps.to;return l&&typeof l=="string"&&l.startsWith("http")}),o=Se(()=>s.value?"":e.licenceTo),a=Se(()=>s.value?e.licenceTo:"");return(l,c)=>{const u=Ph("RouterLink");return de(),Ge("footer",kR,[r.value?(de(),Ge("div",FR,[Oe("div",NR,[Oe("div",UR,[dn(l.$slots,"footer-link-lists",{},void 0,!0)])])])):Ct("",!0),Oe("div",BR,[Oe("div",jR,[Oe("div",zR,[dt(u,{to:l.homeLink,title:"Retour  laccueil"},{default:zn(()=>[dt($E,{"logo-text":l.logoText},null,8,["logo-text"])]),_:1},8,["to"]),l.operatorImgSrc?(de(),qt(u,{key:0,class:"fr-footer__brand-link",to:l.operatorTo,title:l.operatorLinkText},{default:zn(()=>[Oe("img",{class:"fr-footer__logo fr-responsive-img",style:qa([typeof l.operatorImgStyle=="string"?l.operatorImgStyle:"",{"margin-left":"0.5px",padding:"1rem",...typeof l.operatorImgStyle=="object"?l.operatorImgStyle:{},"max-width":"12.5rem"}]),src:l.operatorImgSrc,alt:l.operatorImgAlt},null,12,VR)]),_:1},8,["to","title"])):Ct("",!0)]),Oe("div",WR,[Oe("p",YR,[dn(l.$slots,"description",{},()=>[cr(pi(l.descText),1)],!0)]),Oe("ul",HR,[(de(!0),Ge(Kt,null,Go(l.ecosystemLinks,(h,d)=>(de(),Ge("li",{key:d,class:"fr-footer__content-item"},[Oe("a",{class:"fr-footer__content-link",href:h.href,target:"_blank",rel:"noopener noreferrer"},pi(h.label),9,qR)]))),128))])])]),l.partners?(de(),qt(OR,Hu(xi({key:0},l.partners)),null,16)):Ct("",!0),Oe("div",XR,[Oe("ul",ZR,[(de(!0),Ge(Kt,null,Go(t.value,(h,d)=>(de(),Ge("li",{key:d,class:"fr-footer__bottom-item"},[dt(DR,Hu(yv(h)),null,16)]))),128))]),l.licenceText?(de(),Ge("div",KR,[Oe("p",null,[cr(pi(l.licenceText)+" ",1),(de(),qt(Ku(s.value?"a":"RouterLink"),xi({class:"fr-link-licence no-content-after",to:s.value?null:o.value,href:a.value,target:s.value?"_blank":void 0,rel:"noopener noreferrer"},l.licenceLinkProps),{default:zn(()=>[cr(pi(l.licenceName),1)]),_:1},16,["to","href","target"]))])])):Ct("",!0)])])])}}}),QR=Lh(JR,[["__scopeId","data-v-884531a5"]]),$R=["for"],e2={key:0,class:"required"},t2={key:0,class:"fr-hint-text"},i2=Ut({inheritAttrs:!1,__name:"DsfrInput",props:{id:{default:()=>Yo("basic","input")},descriptionId:{default:void 0},hint:{default:""},isInvalid:{type:Boolean},isValid:{type:Boolean},isTextarea:{type:Boolean},isWithWrapper:{type:Boolean},labelVisible:{type:Boolean},label:{default:""},labelClass:{default:""},modelValue:{default:""},wrapperClass:{default:""}},emits:["update:modelValue"],setup(i,{expose:e}){const t=i,n=iM(),r=Si(null),s=()=>{var c;return(c=r.value)==null?void 0:c.focus()},o=Se(()=>t.isTextarea?"textarea":"input"),a=Se(()=>t.isWithWrapper||n.type==="date"||!!t.wrapperClass),l=Se(()=>["fr-label",{invisible:!t.labelVisible},t.labelClass]);return e({focus:s}),(c,u)=>(de(),Ge(Kt,null,[Oe("label",{class:ur(l.value),for:c.id},[dn(c.$slots,"label",{},()=>[cr(pi(c.label)+" ",1),dn(c.$slots,"required-tip",{},()=>["required"in c.$attrs&&c.$attrs.required!==!1?(de(),Ge("span",e2,"*")):Ct("",!0)],!0)],!0),c.hint?(de(),Ge("span",t2,pi(c.hint),1)):Ct("",!0)],10,$R),a.value?(de(),Ge("div",{key:1,class:ur([{"fr-input-wrap":c.isWithWrapper||c.$attrs.type==="date"},c.wrapperClass])},[(de(),qt(Ku(o.value),xi({id:c.id},c.$attrs,{ref_key:"__input",ref:r,class:["fr-input",{"fr-input--error":c.isInvalid,"fr-input--valid":c.isValid}],value:c.modelValue,"aria-describedby":c.descriptionId||void 0,onInput:u[1]||(u[1]=h=>c.$emit("update:modelValue",h.target.value))}),null,16,["id","class","value","aria-describedby"]))],2)):(de(),qt(Ku(o.value),xi({key:0,id:c.id},c.$attrs,{ref_key:"__input",ref:r,class:["fr-input",{"fr-input--error":c.isInvalid,"fr-input--valid":c.isValid}],value:c.modelValue,"aria-describedby":c.descriptionId||void 0,onInput:u[0]||(u[0]=h=>c.$emit("update:modelValue",h.target.value))}),null,16,["id","class","value","aria-describedby"]))],64))}}),n2=Lh(i2,[["__scopeId","data-v-0171a9ee"]]),C_=Ut({__name:"DsfrSearchBar",props:{id:{default:()=>Yo("search","input")},label:{default:""},labelVisible:{type:Boolean},large:{type:Boolean},buttonText:{default:""},modelValue:{default:""},placeholder:{default:"Rechercher"},disabled:{type:Boolean}},emits:["update:modelValue","search"],setup(i,{emit:e}){const t=i,n=e;return bo(()=>t.modelValue,r=>{console.log("modelValue",r)}),(r,s)=>(de(),Ge("div",{class:ur(["fr-search-bar",{"fr-search-bar--lg":r.large}]),role:"search"},[dt(n2,{id:r.id,type:"search",placeholder:r.placeholder,"model-value":r.modelValue,"label-visible":r.labelVisible,label:r.label,disabled:r.disabled,"onUpdate:modelValue":s[0]||(s[0]=o=>n("update:modelValue",o)),onKeydown:s[1]||(s[1]=nR(o=>n("search",r.modelValue),["enter"]))},null,8,["id","placeholder","model-value","label-visible","label","disabled"]),dt(ER,{title:"Rechercher",disabled:r.disabled,onClick:s[2]||(s[2]=o=>n("search",r.modelValue))},{default:zn(()=>[cr(pi(r.buttonText),1)]),_:1},8,["disabled"])],2))}}),I_=1,r2=Ut({__name:"DsfrHeaderMenuLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:"_self"},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0}},setup(i){const e=i,t=Se(()=>e.button?"button":r.value||s.value?"a":"RouterLink"),n=Se(()=>typeof e.path=="string"),r=Se(()=>{var h;return((h=e.href)==null?void 0:h.startsWith("http"))||n.value&&e.path.startsWith("http")}),s=Se(()=>{var h;return((h=e.href)==null?void 0:h.startsWith("mailto"))||n.value&&e.path.startsWith("mailto")}),o=Se(()=>{if(!(!r.value&&!s.value))return e.href!==void 0?e.href:e.path}),a=Se(()=>{if(!(r.value||s.value))return e.to||e.path}),l=Se(()=>a.value?{to:a.value}:{href:o.value}),c=Se(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),u=Se(()=>typeof e.icon=="string"?{name:e.icon,scale:I_,...e.iconAttrs??{}}:{scale:I_,...e.icon??{},...e.iconAttrs??{}});return(h,d)=>(de(),qt(Ku(t.value),xi({class:["fr-btn",{"fr-btn--icon-right":c.value&&h.iconRight,"fr-btn--icon-left":c.value&&!h.iconRight,[String(h.icon)]:c.value}]},l.value,{target:h.target,onClick:zl(h.onClick,["stop"])}),{default:zn(()=>{var f,g;return[!c.value&&(h.icon||(f=h.iconAttrs)!=null&&f.name)&&!h.iconRight?(de(),qt(Nt(oc),xi({key:0,class:"fr-mr-1w"},u.value),null,16)):Ct("",!0),cr(" "+pi(h.label)+" ",1),!c.value&&(h.icon||(g=h.iconAttrs)!=null&&g.name)&&h.iconRight?(de(),qt(Nt(oc),xi({key:1,class:"fr-ml-1w"},u.value),null,16)):Ct("",!0)]}),_:1},16,["class","target","onClick"]))}}),s2=["aria-label"],o2={class:"fr-btns-group"},E_=Ut({__name:"DsfrHeaderMenuLinks",props:{links:{default:()=>[]},navAriaLabel:{default:"Menu secondaire"}},emits:["linkClick"],setup(i,{emit:e}){const t=e;return(n,r)=>(de(),Ge("nav",{role:"navigation","aria-label":n.navAriaLabel},[Oe("ul",o2,[(de(!0),Ge(Kt,null,Go(n.links,(s,o)=>(de(),Ge("li",{key:o},[dt(r2,xi(s,{"on-click":a=>{var l;t("linkClick",a),(l=s.onClick)==null||l.call(s,a)}}),null,16,["on-click"])]))),128))])],8,s2))}}),a2={role:"banner",class:"fr-header"},l2={class:"fr-header__body"},c2={class:"fr-container width-inherit"},u2={class:"fr-header__body-row"},h2={class:"fr-header__brand fr-enlarge-link"},d2={class:"fr-header__brand-top"},f2={class:"fr-header__logo"},g2={key:0,class:"fr-header__operator"},p2=["src","alt"],m2={key:1,class:"fr-header__navbar"},v2=["data-fr-opened"],y2={key:0,class:"fr-header__service"},A2={class:"fr-header__service-title"},_2={key:0,class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},C2={key:0,class:"fr-header__service-tagline"},I2={key:1,class:"fr-header__service"},E2=Oe("p",{class:"fr-header__service-title"},[Oe("span",{class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},"BETA")],-1),w2=[E2],b2={class:"fr-header__tools"},S2={key:0,class:"fr-header__tools-links"},x2={role:"navigation"},P2={key:1,class:"fr-header__search fr-modal"},M2={class:"fr-container"},R2={class:"fr-header__menu-links"},T2={role:"navigation"},L2={key:1,class:"flex justify-center items-center"},G2={key:1,class:"fr-hidden fr-unhidden-lg"},O2=Ut({__name:"DsfrHeader",props:{searchbarId:{default:"searchbar-header"},serviceTitle:{default:void 0},serviceDescription:{default:void 0},homeTo:{default:"/"},logoText:{default:()=>"Gouvernement"},modelValue:{default:""},operatorImgAlt:{default:""},operatorImgSrc:{default:""},operatorImgStyle:{default:()=>({})},placeholder:{default:"Rechercher..."},quickLinks:{default:()=>[]},searchLabel:{default:"Recherche"},quickLinksAriaLabel:{default:"Menu secondaire"},showSearch:{type:Boolean},showBeta:{type:Boolean}},emits:["update:modelValue","search"],setup(i){const e=i,t=f=>{f.key==="Escape"&&o()};wr(()=>{document.addEventListener("keydown",t)}),Rh(()=>{document.removeEventListener("keydown",t)});const n=Si(!1),r=Si(!1),s=Si(!1),o=()=>{var f;s.value=!1,n.value=!1,r.value=!1,(f=document.getElementById("button-menu"))==null||f.focus()},a=()=>{var f;s.value=!0,n.value=!0,r.value=!1,(f=document.getElementById("close-button"))==null||f.focus()},l=()=>{s.value=!0,n.value=!1,r.value=!0},c=o,u=kE(),h=Se(()=>{var f;return!!((f=u.operator)!=null&&f.call(u).length)||!!e.operatorImgSrc}),d=Se(()=>!!u.mainnav);return(f,g)=>{var p,m,v;const y=Ph("RouterLink");return de(),Ge("header",a2,[Oe("div",l2,[Oe("div",c2,[Oe("div",u2,[Oe("div",h2,[Oe("div",d2,[Oe("div",f2,[dt($E,{"logo-text":f.logoText,"data-testid":"header-logo"},null,8,["logo-text"])]),h.value?(de(),Ge("div",g2,[dn(f.$slots,"operator",{},()=>[f.operatorImgSrc?(de(),Ge("img",{key:0,class:"fr-responsive-img",src:f.operatorImgSrc,alt:f.operatorImgAlt,style:qa(f.operatorImgStyle)},null,12,p2)):Ct("",!0)])])):Ct("",!0),f.showSearch||d.value||(p=f.quickLinks)!=null&&p.length?(de(),Ge("div",m2,[f.showSearch?(de(),Ge("button",{key:0,class:"fr-btn fr-btn--search","aria-controls":"header-search","aria-label":"Recherche",title:"Recherche","data-fr-opened":r.value,onClick:g[0]||(g[0]=zl(A=>l(),["prevent","stop"]))},null,8,v2)):Ct("",!0),d.value||(m=f.quickLinks)!=null&&m.length?(de(),Ge("button",{key:1,id:"button-menu",class:"fr-btn--menu fr-btn","data-fr-opened":a,"aria-controls":"header-navigation","aria-haspopup":"menu","aria-label":"Menu",title:"Menu","data-testid":"open-menu-btn",onClick:g[1]||(g[1]=zl(A=>a(),["prevent","stop"]))})):Ct("",!0)])):Ct("",!0)]),f.serviceTitle?(de(),Ge("div",y2,[dt(y,xi({to:f.homeTo,title:`Accueil - ${f.serviceTitle}`},f.$attrs),{default:zn(()=>[Oe("p",A2,[cr(pi(f.serviceTitle)+" ",1),f.showBeta?(de(),Ge("span",_2," BETA ")):Ct("",!0)])]),_:1},16,["to","title"]),f.serviceDescription?(de(),Ge("p",C2,pi(f.serviceDescription),1)):Ct("",!0)])):Ct("",!0),!f.serviceTitle&&f.showBeta?(de(),Ge("div",I2,w2)):Ct("",!0)]),Oe("div",b2,[(v=f.quickLinks)!=null&&v.length?(de(),Ge("div",S2,[Oe("nav",x2,[n.value?Ct("",!0):(de(),qt(E_,{key:0,links:f.quickLinks,"nav-aria-label":f.quickLinksAriaLabel},null,8,["links","nav-aria-label"]))])])):Ct("",!0),f.showSearch?(de(),Ge("div",P2,[dt(C_,{"searchbar-id":f.searchbarId,label:f.searchLabel,"model-value":f.modelValue,placeholder:f.placeholder,style:{"justify-content":"flex-end"},"onUpdate:modelValue":g[2]||(g[2]=A=>f.$emit("update:modelValue",A)),onSearch:g[3]||(g[3]=A=>f.$emit("search",A))},null,8,["searchbar-id","label","model-value","placeholder"])])):Ct("",!0)])]),f.showSearch||d.value||f.quickLinks&&f.quickLinks.length?(de(),Ge("div",{key:0,id:"header-navigation",class:ur(["fr-header__menu fr-modal",{"fr-modal--opened":s.value}]),"aria-label":"Menu modal",role:"dialog","aria-modal":"true"},[Oe("div",M2,[Oe("button",{id:"close-button",class:"fr-btn fr-btn--close","aria-controls":"header-navigation","data-testid":"close-modal-btn",onClick:g[4]||(g[4]=zl(A=>o(),["prevent","stop"]))}," Fermer "),Oe("div",R2,[Oe("nav",T2,[n.value?(de(),qt(E_,{key:0,role:"navigation",links:f.quickLinks,"nav-aria-label":f.quickLinksAriaLabel,onLinkClick:Nt(c)},null,8,["links","nav-aria-label","onLinkClick"])):Ct("",!0)])]),s.value?dn(f.$slots,"mainnav",{key:0,hidemodal:o}):Ct("",!0),r.value?(de(),Ge("div",L2,[dt(C_,{"searchbar-id":f.searchbarId,"model-value":f.modelValue,placeholder:f.placeholder,"onUpdate:modelValue":g[5]||(g[5]=A=>f.$emit("update:modelValue",A)),onSearch:g[6]||(g[6]=A=>f.$emit("search",A))},null,8,["searchbar-id","model-value","placeholder"])])):Ct("",!0)])],2)):Ct("",!0),d.value&&!s.value?(de(),Ge("div",G2,[dn(f.$slots,"mainnav",{hidemodal:o})])):Ct("",!0),dn(f.$slots,"default")])])])}}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var e1=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],yf=e1.join(","),t1=typeof Element>"u",La=t1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Af=!t1&&Element.prototype.getRootNode?function(i){var e;return i==null||(e=i.getRootNode)===null||e===void 0?void 0:e.call(i)}:function(i){return i==null?void 0:i.ownerDocument},_f=function i(e,t){var n;t===void 0&&(t=!0);var r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"inert"),s=r===""||r==="true",o=s||t&&e&&i(e.parentNode);return o},D2=function(i){var e,t=i==null||(e=i.getAttribute)===null||e===void 0?void 0:e.call(i,"contenteditable");return t===""||t==="true"},i1=function(i,e,t){if(_f(i))return[];var n=Array.prototype.slice.apply(i.querySelectorAll(yf));return e&&La.call(i,yf)&&n.unshift(i),n=n.filter(t),n},n1=function i(e,t,n){for(var r=[],s=Array.from(e);s.length;){var o=s.shift();if(!_f(o,!1))if(o.tagName==="SLOT"){var a=o.assignedElements(),l=a.length?a:o.children,c=i(l,!0,n);n.flatten?r.push.apply(r,c):r.push({scopeParent:o,candidates:c})}else{var u=La.call(o,yf);u&&n.filter(o)&&(t||!e.includes(o))&&r.push(o);var h=o.shadowRoot||typeof n.getShadowRoot=="function"&&n.getShadowRoot(o),d=!_f(h,!1)&&(!n.shadowRootFilter||n.shadowRootFilter(o));if(h&&d){var f=i(h===!0?o.children:h.children,!0,n);n.flatten?r.push.apply(r,f):r.push({scopeParent:o,candidates:f})}else s.unshift.apply(s,o.children)}}return r},r1=function(i){return!isNaN(parseInt(i.getAttribute("tabindex"),10))},ya=function(i){if(!i)throw new Error("No node provided");return i.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(i.tagName)||D2(i))&&!r1(i)?0:i.tabIndex},k2=function(i,e){var t=ya(i);return t<0&&e&&!r1(i)?0:t},F2=function(i,e){return i.tabIndex===e.tabIndex?i.documentOrder-e.documentOrder:i.tabIndex-e.tabIndex},s1=function(i){return i.tagName==="INPUT"},N2=function(i){return s1(i)&&i.type==="hidden"},U2=function(i){var e=i.tagName==="DETAILS"&&Array.prototype.slice.apply(i.children).some(function(t){return t.tagName==="SUMMARY"});return e},B2=function(i,e){for(var t=0;t<i.length;t++)if(i[t].checked&&i[t].form===e)return i[t]},j2=function(i){if(!i.name)return!0;var e=i.form||Af(i),t=function(s){return e.querySelectorAll('input[type="radio"][name="'+s+'"]')},n;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")n=t(window.CSS.escape(i.name));else try{n=t(i.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var r=B2(n,i.form);return!r||r===i},z2=function(i){return s1(i)&&i.type==="radio"},V2=function(i){return z2(i)&&!j2(i)},W2=function(i){var e,t=i&&Af(i),n=(e=t)===null||e===void 0?void 0:e.host,r=!1;if(t&&t!==i){var s,o,a;for(r=!!((s=n)!==null&&s!==void 0&&(o=s.ownerDocument)!==null&&o!==void 0&&o.contains(n)||i!=null&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(i));!r&&n;){var l,c,u;t=Af(n),n=(l=t)===null||l===void 0?void 0:l.host,r=!!((c=n)!==null&&c!==void 0&&(u=c.ownerDocument)!==null&&u!==void 0&&u.contains(n))}}return r},w_=function(i){var e=i.getBoundingClientRect(),t=e.width,n=e.height;return t===0&&n===0},Y2=function(i,e){var t=e.displayCheck,n=e.getShadowRoot;if(getComputedStyle(i).visibility==="hidden")return!0;var r=La.call(i,"details>summary:first-of-type"),s=r?i.parentElement:i;if(La.call(s,"details:not([open]) *"))return!0;if(!t||t==="full"||t==="legacy-full"){if(typeof n=="function"){for(var o=i;i;){var a=i.parentElement,l=Af(i);if(a&&!a.shadowRoot&&n(a)===!0)return w_(i);i.assignedSlot?i=i.assignedSlot:!a&&l!==i.ownerDocument?i=l.host:i=a}i=o}if(W2(i))return!i.getClientRects().length;if(t!=="legacy-full")return!0}else if(t==="non-zero-area")return w_(i);return!1},H2=function(i){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(i.tagName))for(var e=i.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var t=0;t<e.children.length;t++){var n=e.children.item(t);if(n.tagName==="LEGEND")return La.call(e,"fieldset[disabled] *")?!0:!n.contains(i)}return!0}e=e.parentElement}return!1},Cf=function(i,e){return!(e.disabled||_f(e)||N2(e)||Y2(e,i)||U2(e)||H2(e))},$p=function(i,e){return!(V2(e)||ya(e)<0||!Cf(i,e))},q2=function(i){var e=parseInt(i.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},X2=function i(e){var t=[],n=[];return e.forEach(function(r,s){var o=!!r.scopeParent,a=o?r.scopeParent:r,l=k2(a,o),c=o?i(r.candidates):a;l===0?o?t.push.apply(t,c):t.push(a):n.push({documentOrder:s,tabIndex:l,item:r,isScope:o,content:c})}),n.sort(F2).reduce(function(r,s){return s.isScope?r.push.apply(r,s.content):r.push(s.content),r},[]).concat(t)},Z2=function(i,e){e=e||{};var t;return e.getShadowRoot?t=n1([i],e.includeContainer,{filter:$p.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:q2}):t=i1(i,e.includeContainer,$p.bind(null,e)),X2(t)},K2=function(i,e){e=e||{};var t;return e.getShadowRoot?t=n1([i],e.includeContainer,{filter:Cf.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):t=i1(i,e.includeContainer,Cf.bind(null,e)),t},nl=function(i,e){if(e=e||{},!i)throw new Error("No node provided");return La.call(i,yf)===!1?!1:$p(e,i)},J2=e1.concat("iframe").join(","),G0=function(i,e){if(e=e||{},!i)throw new Error("No node provided");return La.call(i,J2)===!1?!1:Cf(e,i)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function b_(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function S_(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?b_(Object(t),!0).forEach(function(n){Q2(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):b_(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Q2(i,e,t){return e=eT(e),e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function $2(i,e){if(typeof i!="object"||i===null)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function eT(i){var e=$2(i,"string");return typeof e=="symbol"?e:String(e)}var x_={activateTrap:function(i,e){if(i.length>0){var t=i[i.length-1];t!==e&&t.pause()}var n=i.indexOf(e);n===-1||i.splice(n,1),i.push(e)},deactivateTrap:function(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1),i.length>0&&i[i.length-1].unpause()}},tT=function(i){return i.tagName&&i.tagName.toLowerCase()==="input"&&typeof i.select=="function"},iT=function(i){return(i==null?void 0:i.key)==="Escape"||(i==null?void 0:i.key)==="Esc"||(i==null?void 0:i.keyCode)===27},Su=function(i){return(i==null?void 0:i.key)==="Tab"||(i==null?void 0:i.keyCode)===9},nT=function(i){return Su(i)&&!i.shiftKey},rT=function(i){return Su(i)&&i.shiftKey},P_=function(i){return setTimeout(i,0)},M_=function(i,e){var t=-1;return i.every(function(n,r){return e(n)?(t=r,!1):!0}),t},Zc=function(i){for(var e=arguments.length,t=new Array(e>1?e-1:0),n=1;n<e;n++)t[n-1]=arguments[n];return typeof i=="function"?i.apply(void 0,t):i},ld=function(i){return i.target.shadowRoot&&typeof i.composedPath=="function"?i.composedPath()[0]:i.target},sT=[],oT=function(i,e){var t=(e==null?void 0:e.document)||document,n=(e==null?void 0:e.trapStack)||sT,r=S_({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:nT,isKeyBackward:rT},e),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},o,a=function(P,w,x){return P&&P[w]!==void 0?P[w]:r[x||w]},l=function(P,w){var x=typeof(w==null?void 0:w.composedPath)=="function"?w.composedPath():void 0;return s.containerGroups.findIndex(function(D){var k=D.container,O=D.tabbableNodes;return k.contains(P)||(x==null?void 0:x.includes(k))||O.find(function(N){return N===P})})},c=function(P){var w=r[P];if(typeof w=="function"){for(var x=arguments.length,D=new Array(x>1?x-1:0),k=1;k<x;k++)D[k-1]=arguments[k];w=w.apply(void 0,D)}if(w===!0&&(w=void 0),!w){if(w===void 0||w===!1)return w;throw new Error("`".concat(P,"` was specified but was not a node, or did not return a node"))}var O=w;if(typeof w=="string"&&(O=t.querySelector(w),!O))throw new Error("`".concat(P,"` as selector refers to no known node"));return O},u=function(){var P=c("initialFocus");if(P===!1)return!1;if(P===void 0||!G0(P,r.tabbableOptions))if(l(t.activeElement)>=0)P=t.activeElement;else{var w=s.tabbableGroups[0],x=w&&w.firstTabbableNode;P=x||c("fallbackFocus")}if(!P)throw new Error("Your focus-trap needs to have at least one focusable element");return P},h=function(){if(s.containerGroups=s.containers.map(function(P){var w=Z2(P,r.tabbableOptions),x=K2(P,r.tabbableOptions),D=w.length>0?w[0]:void 0,k=w.length>0?w[w.length-1]:void 0,O=x.find(function(V){return nl(V)}),N=x.slice().reverse().find(function(V){return nl(V)}),B=!!w.find(function(V){return ya(V)>0});return{container:P,tabbableNodes:w,focusableNodes:x,posTabIndexesFound:B,firstTabbableNode:D,lastTabbableNode:k,firstDomTabbableNode:O,lastDomTabbableNode:N,nextTabbableNode:function(V){var se=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,j=w.indexOf(V);return j<0?se?x.slice(x.indexOf(V)+1).find(function(Ae){return nl(Ae)}):x.slice(0,x.indexOf(V)).reverse().find(function(Ae){return nl(Ae)}):w[j+(se?1:-1)]}}}),s.tabbableGroups=s.containerGroups.filter(function(P){return P.tabbableNodes.length>0}),s.tabbableGroups.length<=0&&!c("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find(function(P){return P.posTabIndexesFound})&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},d=function P(w){var x=w.activeElement;if(x)return x.shadowRoot&&x.shadowRoot.activeElement!==null?P(x.shadowRoot):x},f=function P(w){if(w!==!1&&w!==d(document)){if(!w||!w.focus){P(u());return}w.focus({preventScroll:!!r.preventScroll}),s.mostRecentlyFocusedNode=w,tT(w)&&w.select()}},g=function(P){var w=c("setReturnFocus",P);return w||(w===!1?!1:P)},p=function(P){var w=P.target,x=P.event,D=P.isBackward,k=D===void 0?!1:D;w=w||ld(x),h();var O=null;if(s.tabbableGroups.length>0){var N=l(w,x),B=N>=0?s.containerGroups[N]:void 0;if(N<0)k?O=s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:O=s.tabbableGroups[0].firstTabbableNode;else if(k){var V=M_(s.tabbableGroups,function(Ce){var pe=Ce.firstTabbableNode;return w===pe});if(V<0&&(B.container===w||G0(w,r.tabbableOptions)&&!nl(w,r.tabbableOptions)&&!B.nextTabbableNode(w,!1))&&(V=N),V>=0){var se=V===0?s.tabbableGroups.length-1:V-1,j=s.tabbableGroups[se];O=ya(w)>=0?j.lastTabbableNode:j.lastDomTabbableNode}else Su(x)||(O=B.nextTabbableNode(w,!1))}else{var Ae=M_(s.tabbableGroups,function(Ce){var pe=Ce.lastTabbableNode;return w===pe});if(Ae<0&&(B.container===w||G0(w,r.tabbableOptions)&&!nl(w,r.tabbableOptions)&&!B.nextTabbableNode(w))&&(Ae=N),Ae>=0){var q=Ae===s.tabbableGroups.length-1?0:Ae+1,Te=s.tabbableGroups[q];O=ya(w)>=0?Te.firstTabbableNode:Te.firstDomTabbableNode}else Su(x)||(O=B.nextTabbableNode(w))}}else O=c("fallbackFocus");return O},m=function(P){var w=ld(P);if(!(l(w,P)>=0)){if(Zc(r.clickOutsideDeactivates,P)){o.deactivate({returnFocus:r.returnFocusOnDeactivate});return}Zc(r.allowOutsideClick,P)||P.preventDefault()}},v=function(P){var w=ld(P),x=l(w,P)>=0;if(x||w instanceof Document)x&&(s.mostRecentlyFocusedNode=w);else{P.stopImmediatePropagation();var D,k=!0;if(s.mostRecentlyFocusedNode)if(ya(s.mostRecentlyFocusedNode)>0){var O=l(s.mostRecentlyFocusedNode),N=s.containerGroups[O].tabbableNodes;if(N.length>0){var B=N.findIndex(function(V){return V===s.mostRecentlyFocusedNode});B>=0&&(r.isKeyForward(s.recentNavEvent)?B+1<N.length&&(D=N[B+1],k=!1):B-1>=0&&(D=N[B-1],k=!1))}}else s.containerGroups.some(function(V){return V.tabbableNodes.some(function(se){return ya(se)>0})})||(k=!1);else k=!1;k&&(D=p({target:s.mostRecentlyFocusedNode,isBackward:r.isKeyBackward(s.recentNavEvent)})),f(D||s.mostRecentlyFocusedNode||u())}s.recentNavEvent=void 0},y=function(P){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;s.recentNavEvent=P;var x=p({event:P,isBackward:w});x&&(Su(P)&&P.preventDefault(),f(x))},A=function(P){if(iT(P)&&Zc(r.escapeDeactivates,P)!==!1){P.preventDefault(),o.deactivate();return}(r.isKeyForward(P)||r.isKeyBackward(P))&&y(P,r.isKeyBackward(P))},_=function(P){var w=ld(P);l(w,P)>=0||Zc(r.clickOutsideDeactivates,P)||Zc(r.allowOutsideClick,P)||(P.preventDefault(),P.stopImmediatePropagation())},C=function(){if(s.active)return x_.activateTrap(n,o),s.delayInitialFocusTimer=r.delayInitialFocus?P_(function(){f(u())}):f(u()),t.addEventListener("focusin",v,!0),t.addEventListener("mousedown",m,{capture:!0,passive:!1}),t.addEventListener("touchstart",m,{capture:!0,passive:!1}),t.addEventListener("click",_,{capture:!0,passive:!1}),t.addEventListener("keydown",A,{capture:!0,passive:!1}),o},I=function(){if(s.active)return t.removeEventListener("focusin",v,!0),t.removeEventListener("mousedown",m,!0),t.removeEventListener("touchstart",m,!0),t.removeEventListener("click",_,!0),t.removeEventListener("keydown",A,!0),o},b=function(P){var w=P.some(function(x){var D=Array.from(x.removedNodes);return D.some(function(k){return k===s.mostRecentlyFocusedNode})});w&&f(u())},S=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(b):void 0,R=function(){S&&(S.disconnect(),s.active&&!s.paused&&s.containers.map(function(P){S.observe(P,{subtree:!0,childList:!0})}))};return o={get active(){return s.active},get paused(){return s.paused},activate:function(P){if(s.active)return this;var w=a(P,"onActivate"),x=a(P,"onPostActivate"),D=a(P,"checkCanFocusTrap");D||h(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=t.activeElement,w==null||w();var k=function(){D&&h(),C(),R(),x==null||x()};return D?(D(s.containers.concat()).then(k,k),this):(k(),this)},deactivate:function(P){if(!s.active)return this;var w=S_({onDeactivate:r.onDeactivate,onPostDeactivate:r.onPostDeactivate,checkCanReturnFocus:r.checkCanReturnFocus},P);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,I(),s.active=!1,s.paused=!1,R(),x_.deactivateTrap(n,o);var x=a(w,"onDeactivate"),D=a(w,"onPostDeactivate"),k=a(w,"checkCanReturnFocus"),O=a(w,"returnFocus","returnFocusOnDeactivate");x==null||x();var N=function(){P_(function(){O&&f(g(s.nodeFocusedBeforeActivation)),D==null||D()})};return O&&k?(k(g(s.nodeFocusedBeforeActivation)).then(N,N),this):(N(),this)},pause:function(P){if(s.paused||!s.active)return this;var w=a(P,"onPause"),x=a(P,"onPostPause");return s.paused=!0,w==null||w(),I(),R(),x==null||x(),this},unpause:function(P){if(!s.paused||!s.active)return this;var w=a(P,"onUnpause"),x=a(P,"onPostUnpause");return s.paused=!1,w==null||w(),h(),C(),R(),x==null||x(),this},updateContainerElements:function(P){var w=[].concat(P).filter(Boolean);return s.containers=w.map(function(x){return typeof x=="string"?t.querySelector(x):x}),s.active&&h(),R(),this}},o.updateContainerElements(i),o};/*!
  * focus-trap-vue v4.0.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const aT={escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:[Boolean,Function],default:!0},clickOutsideDeactivates:[Boolean,Function],initialFocus:[String,Function,Boolean],fallbackFocus:[String,Function],checkCanFocusTrap:Function,checkCanReturnFocus:Function,delayInitialFocus:{type:Boolean,default:!0},document:Object,preventScroll:Boolean,setReturnFocus:[Object,String,Boolean,Function],tabbableOptions:Object};Object.assign({active:{type:Boolean,default:!0}},aT);const lT=["id","aria-current"],cT=Ut({__name:"DsfrNavigationItem",props:{id:{default:()=>Yo("nav","item")},active:{type:Boolean}},setup(i){return(e,t)=>(de(),Ge("li",{id:e.id,class:"fr-nav__item","aria-current":e.active?"page":void 0},[dn(e.$slots,"default",{},void 0,!0)],8,lT))}}),uT=Lh(cT,[["__scopeId","data-v-5909c19f"]]),hT=["href"],R_=2,Iv=Ut({__name:"DsfrNavigationMenuLink",props:{id:{default:()=>Yo("menu-link")},to:{default:"#"},text:{default:""},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},emits:["toggle-id"],setup(i){const e=i,t=Se(()=>typeof e.to=="string"&&e.to.startsWith("http")),n=Se(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),r=Se(()=>n.value||!e.icon?void 0:typeof e.icon=="string"?{scale:R_,name:e.icon}:{scale:R_,...e.icon||{}});return(s,o)=>{const a=Ph("RouterLink");return t.value?(de(),Ge("a",{key:0,class:"fr-nav__link","data-testid":"nav-external-link",href:s.to,onClick:o[0]||(o[0]=l=>s.$emit("toggle-id",s.id))},pi(s.text),9,hT)):(de(),qt(a,{key:1,class:ur(["fr-nav__link",{[String(s.icon)]:n.value}]),"data-testid":"nav-router-link",to:s.to,onClick:o[1]||(o[1]=l=>s.$emit("toggle-id",s.id))},{default:zn(()=>[r.value?(de(),qt(Nt(oc),Hu(xi({key:0},r.value)),null,16)):Ct("",!0),cr(" "+pi(s.text),1)]),_:1},8,["to","class"]))}}}),dT=["id","aria-current"],fT=Ut({__name:"DsfrNavigationMenuItem",props:{id:{default:()=>Yo("menu","item")},active:{type:Boolean}},setup(i){return(e,t)=>(de(),Ge("li",{id:e.id,class:"fr-menu__item","aria-current":e.active?"page":void 0},[dn(e.$slots,"default")],8,dT))}}),gT=["aria-expanded","aria-current","aria-controls"],pT=["id"],mT={ref:"menuList",class:"fr-menu__list"},vT=Ut({__name:"DsfrNavigationMenu",props:{id:{default:()=>Yo("menu")},title:{},links:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggle-id"],setup(i){const{collapse:e,collapsing:t,cssExpanded:n,doExpand:r,onTransitionEnd:s}=QE(),o=i,a=Se(()=>o.id===o.expandedId);return bo(a,(l,c)=>{l!==c&&r(l)}),wr(()=>{a.value&&r(!0)}),(l,c)=>(de(),Ge(Kt,null,[Oe("button",{class:"fr-nav__btn","aria-expanded":a.value,"aria-current":l.active||void 0,"aria-controls":l.id,onClick:c[0]||(c[0]=u=>l.$emit("toggle-id",l.id))},[Oe("span",null,pi(l.title),1)],8,gT),Oe("div",{id:l.id,ref_key:"collapse",ref:e,class:ur(["fr-collapse fr-menu",{"fr-collapse--expanded":Nt(n),"fr-collapsing":Nt(t)}]),"data-testid":"navigation-menu",onTransitionend:c[2]||(c[2]=u=>Nt(s)(a.value))},[Oe("ul",mT,[dn(l.$slots,"default"),(de(!0),Ge(Kt,null,Go(l.links,(u,h)=>(de(),qt(fT,{key:h},{default:zn(()=>[dt(Iv,xi(u,{onToggleId:c[1]||(c[1]=d=>l.$emit("toggle-id",l.expandedId))}),null,16)]),_:2},1024))),128))],512)],42,pT)],64))}}),yT={class:"fr-col-12 fr-col-lg-3"},AT={class:"fr-mega-menu__category"},_T={class:"fr-mega-menu__list"},CT=Ut({__name:"DsfrNavigationMegaMenuCategory",props:{title:{},active:{type:Boolean},links:{}},setup(i){return(e,t)=>(de(),Ge("div",yT,[Oe("h5",AT,[Oe("a",{class:"fr-nav__link",href:"#",onClick:t[0]||(t[0]=zl(()=>{},["prevent"]))},pi(e.title),1)]),Oe("ul",_T,[(de(!0),Ge(Kt,null,Go(e.links,(n,r)=>(de(),Ge("li",{key:r,class:"fr-nav__link"},[dt(Iv,Hu(yv(n)),null,16)]))),128))])]))}}),IT=["aria-expanded","aria-current","aria-controls"],ET=["id"],wT={class:"fr-container fr-container--fluid fr-container-lg"},bT={ref:"megaMenuList",class:"fr-grid-row fr-grid-row-lg--gutters"},ST={class:"fr-col-12 fr-col-lg-8 fr-col-offset-lg-4--right fr-mb-4v"},xT={class:"fr-mega-menu__leader"},PT={class:"fr-h4 fr-mb-2v"},MT={class:"fr-hidden fr-displayed-lg"},RT=Ut({__name:"DsfrNavigationMegaMenu",props:{id:{default:()=>Yo("menu")},title:{},description:{default:""},link:{default:()=>({to:"#",text:"Voir toute la rubrique"})},menus:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggle-id"],setup(i){const e=i,{collapse:t,collapsing:n,cssExpanded:r,doExpand:s,onTransitionEnd:o}=QE(),a=Se(()=>e.id===e.expandedId);return bo(a,(l,c)=>{l!==c&&s(l)}),wr(()=>{a.value&&s(!0)}),(l,c)=>{const u=Ph("RouterLink");return de(),Ge(Kt,null,[Oe("button",{class:"fr-nav__btn","aria-expanded":a.value,"aria-current":l.active||void 0,"aria-controls":l.id,onClick:c[0]||(c[0]=h=>l.$emit("toggle-id",l.id))},pi(l.title),9,IT),Oe("div",{id:l.id,ref_key:"collapse",ref:t,"data-testid":"mega-menu-wrapper",class:ur(["fr-collapse fr-mega-menu",{"fr-collapse--expanded":Nt(r),"fr-collapsing":Nt(n)}]),tabindex:"-1",onTransitionend:c[2]||(c[2]=h=>Nt(o)(a.value))},[Oe("div",wT,[Oe("button",{class:"fr-link--close fr-link","aria-controls":"mega-menu-695",onClick:c[1]||(c[1]=h=>l.$emit("toggle-id",l.id))}," Fermer "),Oe("div",bT,[Oe("div",ST,[Oe("div",xT,[Oe("h4",PT,pi(l.title),1),Oe("p",MT,[cr(pi(l.description)+" ",1),dn(l.$slots,"description",{},void 0,!0)]),dt(u,{class:"fr-link fr-icon-arrow-right-line fr-link--icon-right fr-link--align-on-content",to:l.link.to},{default:zn(()=>[cr(pi(l.link.text),1)]),_:1},8,["to"])])]),dn(l.$slots,"default",{},void 0,!0),(de(!0),Ge(Kt,null,Go(l.menus,(h,d)=>(de(),qt(CT,xi({key:d},h),null,16))),128))],512)])],42,ET)],64)}}}),TT=Lh(RT,[["__scopeId","data-v-3ee9b678"]]),LT=["id","aria-label"],GT={class:"fr-nav__list"},OT=Ut({__name:"DsfrNavigation",props:{id:{default:()=>Yo("menu")},label:{default:"Menu principal"},navItems:{default:()=>[]}},setup(i){const e=i,t=Si(void 0),n=a=>{if(a===t.value){t.value=void 0;return}t.value=a},r=a=>{o(a.target)},s=a=>{a.key==="Escape"&&n(t.value)},o=a=>{if(a!==document.getElementById(e.id)){if(!(a!=null&&a.parentNode)){n(t.value);return}o(a.parentNode)}};return wr(()=>{document.addEventListener("click",r),document.addEventListener("keydown",s)}),Rh(()=>{document.removeEventListener("click",r),document.removeEventListener("keydown",s)}),(a,l)=>(de(),Ge("nav",{id:a.id,class:"fr-nav",role:"navigation","aria-label":a.label},[Oe("ul",GT,[dn(a.$slots,"default"),(de(!0),Ge(Kt,null,Go(a.navItems,(c,u)=>(de(),qt(uT,{key:u},{default:zn(()=>[c.to&&c.text?(de(),qt(Iv,xi({key:0},c,{"expanded-id":t.value,onToggleId:l[0]||(l[0]=h=>n(h))}),null,16,["expanded-id"])):c.title&&c.links?(de(),qt(vT,xi({key:1},c,{"expanded-id":t.value,onToggleId:l[1]||(l[1]=h=>n(h))}),null,16,["expanded-id"])):c.title&&c.menus?(de(),qt(TT,xi({key:2},c,{"expanded-id":t.value,onToggleId:l[2]||(l[2]=h=>n(h))}),null,16,["expanded-id"])):Ct("",!0)]),_:2},1024))),128))])],8,LT))}});/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const pl=typeof document<"u";function DT(i){return i.__esModule||i[Symbol.toStringTag]==="Module"}const Ft=Object.assign;function O0(i,e){const t={};for(const n in e){const r=e[n];t[n]=Br(r)?r.map(i):i(r)}return t}const xu=()=>{},Br=Array.isArray,o1=/#/g,kT=/&/g,FT=/\//g,NT=/=/g,UT=/\?/g,a1=/\+/g,BT=/%5B/g,jT=/%5D/g,l1=/%5E/g,zT=/%60/g,c1=/%7B/g,VT=/%7C/g,u1=/%7D/g,WT=/%20/g;function Ev(i){return encodeURI(""+i).replace(VT,"|").replace(BT,"[").replace(jT,"]")}function YT(i){return Ev(i).replace(c1,"{").replace(u1,"}").replace(l1,"^")}function em(i){return Ev(i).replace(a1,"%2B").replace(WT,"+").replace(o1,"%23").replace(kT,"%26").replace(zT,"`").replace(c1,"{").replace(u1,"}").replace(l1,"^")}function HT(i){return em(i).replace(NT,"%3D")}function qT(i){return Ev(i).replace(o1,"%23").replace(UT,"%3F")}function XT(i){return i==null?"":qT(i).replace(FT,"%2F")}function Qu(i){try{return decodeURIComponent(""+i)}catch{}return""+i}const ZT=/\/$/,KT=i=>i.replace(ZT,"");function D0(i,e,t="/"){let n,r={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(n=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),r=i(s)),a>-1&&(n=n||e.slice(0,a),o=e.slice(a,e.length)),n=eL(n??e,t),{fullPath:n+(s&&"?")+s+o,path:n,query:r,hash:Qu(o)}}function JT(i,e){const t=e.query?i(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function T_(i,e){return!e||!i.toLowerCase().startsWith(e.toLowerCase())?i:i.slice(e.length)||"/"}function QT(i,e,t){const n=e.matched.length-1,r=t.matched.length-1;return n>-1&&n===r&&ac(e.matched[n],t.matched[r])&&h1(e.params,t.params)&&i(e.query)===i(t.query)&&e.hash===t.hash}function ac(i,e){return(i.aliasOf||i)===(e.aliasOf||e)}function h1(i,e){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(const t in i)if(!$T(i[t],e[t]))return!1;return!0}function $T(i,e){return Br(i)?L_(i,e):Br(e)?L_(e,i):i===e}function L_(i,e){return Br(e)?i.length===e.length&&i.every((t,n)=>t===e[n]):i.length===1&&i[0]===e}function eL(i,e){if(i.startsWith("/"))return i;if(!i)return e;const t=e.split("/"),n=i.split("/"),r=n[n.length-1];(r===".."||r===".")&&n.push("");let s=t.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")s>1&&s--;else break;return t.slice(0,s).join("/")+"/"+n.slice(o).join("/")}var $u;(function(i){i.pop="pop",i.push="push"})($u||($u={}));var Pu;(function(i){i.back="back",i.forward="forward",i.unknown=""})(Pu||(Pu={}));function tL(i){if(!i)if(pl){const e=document.querySelector("base");i=e&&e.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),KT(i)}const iL=/^[^#]+#/;function nL(i,e){return i.replace(iL,"#")+e}function rL(i,e){const t=document.documentElement.getBoundingClientRect(),n=i.getBoundingClientRect();return{behavior:e.behavior,left:n.left-t.left-(e.left||0),top:n.top-t.top-(e.top||0)}}const zg=()=>({left:window.scrollX,top:window.scrollY});function sL(i){let e;if("el"in i){const t=i.el,n=typeof t=="string"&&t.startsWith("#"),r=typeof t=="string"?n?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!r)return;e=rL(r,i)}else e=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function G_(i,e){return(history.state?history.state.position-e:-1)+i}const tm=new Map;function oL(i,e){tm.set(i,e)}function aL(i){const e=tm.get(i);return tm.delete(i),e}let lL=()=>location.protocol+"//"+location.host;function d1(i,e){const{pathname:t,search:n,hash:r}=e,s=i.indexOf("#");if(s>-1){let a=r.includes(i.slice(s))?i.slice(s).length:1,l=r.slice(a);return l[0]!=="/"&&(l="/"+l),T_(l,"")}return T_(t,i)+n+r}function cL(i,e,t,n){let r=[],s=[],o=null;const a=({state:d})=>{const f=d1(i,location),g=t.value,p=e.value;let m=0;if(d){if(t.value=f,e.value=d,o&&o===g){o=null;return}m=p?d.position-p.position:0}else n(f);r.forEach(v=>{v(t.value,g,{delta:m,type:$u.pop,direction:m?m>0?Pu.forward:Pu.back:Pu.unknown})})};function l(){o=t.value}function c(d){r.push(d);const f=()=>{const g=r.indexOf(d);g>-1&&r.splice(g,1)};return s.push(f),f}function u(){const{history:d}=window;d.state&&d.replaceState(Ft({},d.state,{scroll:zg()}),"")}function h(){for(const d of s)d();s=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:h}}function O_(i,e,t,n=!1,r=!1){return{back:i,current:e,forward:t,replaced:n,position:window.history.length,scroll:r?zg():null}}function uL(i){const{history:e,location:t}=window,n={value:d1(i,t)},r={value:e.state};r.value||s(n.value,{back:null,current:n.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function s(l,c,u){const h=i.indexOf("#"),d=h>-1?(t.host&&document.querySelector("base")?i:i.slice(h))+l:lL()+i+l;try{e[u?"replaceState":"pushState"](c,"",d),r.value=c}catch(f){console.error(f),t[u?"replace":"assign"](d)}}function o(l,c){const u=Ft({},e.state,O_(r.value.back,l,r.value.forward,!0),c,{position:r.value.position});s(l,u,!0),n.value=l}function a(l,c){const u=Ft({},r.value,e.state,{forward:l,scroll:zg()});s(u.current,u,!0);const h=Ft({},O_(n.value,l,null),{position:u.position+1},c);s(l,h,!1),n.value=l}return{location:n,state:r,push:a,replace:o}}function hL(i){i=tL(i);const e=uL(i),t=cL(i,e.state,e.location,e.replace);function n(s,o=!0){o||t.pauseListeners(),history.go(s)}const r=Ft({location:"",base:i,go:n,createHref:nL.bind(null,i)},e,t);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function dL(i){return typeof i=="string"||i&&typeof i=="object"}function f1(i){return typeof i=="string"||typeof i=="symbol"}const eo={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},g1=Symbol("");var D_;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(D_||(D_={}));function lc(i,e){return Ft(new Error,{type:i,[g1]:!0},e)}function ys(i,e){return i instanceof Error&&g1 in i&&(e==null||!!(i.type&e))}const k_="[^/]+?",fL={sensitive:!1,strict:!1,start:!0,end:!0},gL=/[.+*?^${}()[\]/\\]/g;function pL(i,e){const t=Ft({},fL,e),n=[];let r=t.start?"^":"";const s=[];for(const c of i){const u=c.length?[]:[90];t.strict&&!c.length&&(r+="/");for(let h=0;h<c.length;h++){const d=c[h];let f=40+(t.sensitive?.25:0);if(d.type===0)h||(r+="/"),r+=d.value.replace(gL,"\\$&"),f+=40;else if(d.type===1){const{value:g,repeatable:p,optional:m,regexp:v}=d;s.push({name:g,repeatable:p,optional:m});const y=v||k_;if(y!==k_){f+=10;try{new RegExp(`(${y})`)}catch(_){throw new Error(`Invalid custom RegExp for param "${g}" (${y}): `+_.message)}}let A=p?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;h||(A=m&&c.length<2?`(?:/${A})`:"/"+A),m&&(A+="?"),r+=A,f+=20,m&&(f+=-8),p&&(f+=-20),y===".*"&&(f+=-50)}u.push(f)}n.push(u)}if(t.strict&&t.end){const c=n.length-1;n[c][n[c].length-1]+=.7000000000000001}t.strict||(r+="/?"),t.end?r+="$":t.strict&&(r+="(?:/|$)");const o=new RegExp(r,t.sensitive?"":"i");function a(c){const u=c.match(o),h={};if(!u)return null;for(let d=1;d<u.length;d++){const f=u[d]||"",g=s[d-1];h[g.name]=f&&g.repeatable?f.split("/"):f}return h}function l(c){let u="",h=!1;for(const d of i){(!h||!u.endsWith("/"))&&(u+="/"),h=!1;for(const f of d)if(f.type===0)u+=f.value;else if(f.type===1){const{value:g,repeatable:p,optional:m}=f,v=g in c?c[g]:"";if(Br(v)&&!p)throw new Error(`Provided param "${g}" is an array but it is not repeatable (* or + modifiers)`);const y=Br(v)?v.join("/"):v;if(!y)if(m)d.length<2&&(u.endsWith("/")?u=u.slice(0,-1):h=!0);else throw new Error(`Missing required param "${g}"`);u+=y}}return u||"/"}return{re:o,score:n,keys:s,parse:a,stringify:l}}function mL(i,e){let t=0;for(;t<i.length&&t<e.length;){const n=e[t]-i[t];if(n)return n;t++}return i.length<e.length?i.length===1&&i[0]===80?-1:1:i.length>e.length?e.length===1&&e[0]===80?1:-1:0}function vL(i,e){let t=0;const n=i.score,r=e.score;for(;t<n.length&&t<r.length;){const s=mL(n[t],r[t]);if(s)return s;t++}if(Math.abs(r.length-n.length)===1){if(F_(n))return 1;if(F_(r))return-1}return r.length-n.length}function F_(i){const e=i[i.length-1];return i.length>0&&e[e.length-1]<0}const yL={type:0,value:""},AL=/[a-zA-Z0-9_]/;function _L(i){if(!i)return[[]];if(i==="/")return[[yL]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function e(f){throw new Error(`ERR (${t})/"${c}": ${f}`)}let t=0,n=t;const r=[];let s;function o(){s&&r.push(s),s=[]}let a=0,l,c="",u="";function h(){c&&(t===0?s.push({type:0,value:c}):t===1||t===2||t===3?(s.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function d(){c+=l}for(;a<i.length;){if(l=i[a++],l==="\\"&&t!==2){n=t,t=4;continue}switch(t){case 0:l==="/"?(c&&h(),o()):l===":"?(h(),t=1):d();break;case 4:d(),t=n;break;case 1:l==="("?t=2:AL.test(l)?d():(h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:h(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function CL(i,e,t){const n=pL(_L(i.path),t),r=Ft(n,{record:i,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf==!e.record.aliasOf&&e.children.push(r),r}function IL(i,e){const t=[],n=new Map;e=B_({strict:!1,end:!0,sensitive:!1},e);function r(u){return n.get(u)}function s(u,h,d){const f=!d,g=EL(u);g.aliasOf=d&&d.record;const p=B_(e,u),m=[g];if("alias"in u){const A=typeof u.alias=="string"?[u.alias]:u.alias;for(const _ of A)m.push(Ft({},g,{components:d?d.record.components:g.components,path:_,aliasOf:d?d.record:g}))}let v,y;for(const A of m){const{path:_}=A;if(h&&_[0]!=="/"){const C=h.record.path,I=C[C.length-1]==="/"?"":"/";A.path=h.record.path+(_&&I+_)}if(v=CL(A,h,p),d?d.alias.push(v):(y=y||v,y!==v&&y.alias.push(v),f&&u.name&&!U_(v)&&o(u.name)),g.children){const C=g.children;for(let I=0;I<C.length;I++)s(C[I],v,d&&d.children[I])}d=d||v,(v.record.components&&Object.keys(v.record.components).length||v.record.name||v.record.redirect)&&l(v)}return y?()=>{o(y)}:xu}function o(u){if(f1(u)){const h=n.get(u);h&&(n.delete(u),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(u);h>-1&&(t.splice(h,1),u.record.name&&n.delete(u.record.name),u.children.forEach(o),u.alias.forEach(o))}}function a(){return t}function l(u){let h=0;for(;h<t.length&&vL(u,t[h])>=0&&(u.record.path!==t[h].record.path||!p1(u,t[h]));)h++;t.splice(h,0,u),u.record.name&&!U_(u)&&n.set(u.record.name,u)}function c(u,h){let d,f={},g,p;if("name"in u&&u.name){if(d=n.get(u.name),!d)throw lc(1,{location:u});p=d.record.name,f=Ft(N_(h.params,d.keys.filter(y=>!y.optional).concat(d.parent?d.parent.keys.filter(y=>y.optional):[]).map(y=>y.name)),u.params&&N_(u.params,d.keys.map(y=>y.name))),g=d.stringify(f)}else if(u.path!=null)g=u.path,d=t.find(y=>y.re.test(g)),d&&(f=d.parse(g),p=d.record.name);else{if(d=h.name?n.get(h.name):t.find(y=>y.re.test(h.path)),!d)throw lc(1,{location:u,currentLocation:h});p=d.record.name,f=Ft({},h.params,u.params),g=d.stringify(f)}const m=[];let v=d;for(;v;)m.unshift(v.record),v=v.parent;return{name:p,path:g,params:f,matched:m,meta:bL(m)}}return i.forEach(u=>s(u)),{addRoute:s,resolve:c,removeRoute:o,getRoutes:a,getRecordMatcher:r}}function N_(i,e){const t={};for(const n of e)n in i&&(t[n]=i[n]);return t}function EL(i){return{path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:void 0,beforeEnter:i.beforeEnter,props:wL(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}}}function wL(i){const e={},t=i.props||!1;if("component"in i)e.default=t;else for(const n in i.components)e[n]=typeof t=="object"?t[n]:t;return e}function U_(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function bL(i){return i.reduce((e,t)=>Ft(e,t.meta),{})}function B_(i,e){const t={};for(const n in i)t[n]=n in e?e[n]:i[n];return t}function p1(i,e){return e.children.some(t=>t===i||p1(i,t))}function SL(i){const e={};if(i===""||i==="?")return e;const n=(i[0]==="?"?i.slice(1):i).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(a1," "),o=s.indexOf("="),a=Qu(o<0?s:s.slice(0,o)),l=o<0?null:Qu(s.slice(o+1));if(a in e){let c=e[a];Br(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function j_(i){let e="";for(let t in i){const n=i[t];if(t=HT(t),n==null){n!==void 0&&(e+=(e.length?"&":"")+t);continue}(Br(n)?n.map(s=>s&&em(s)):[n&&em(n)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+t,s!=null&&(e+="="+s))})}return e}function xL(i){const e={};for(const t in i){const n=i[t];n!==void 0&&(e[t]=Br(n)?n.map(r=>r==null?null:""+r):n==null?n:""+n)}return e}const PL=Symbol(""),z_=Symbol(""),wv=Symbol(""),bv=Symbol(""),im=Symbol("");function Kc(){let i=[];function e(n){return i.push(n),()=>{const r=i.indexOf(n);r>-1&&i.splice(r,1)}}function t(){i=[]}return{add:e,list:()=>i.slice(),reset:t}}function lo(i,e,t,n,r,s=o=>o()){const o=n&&(n.enterCallbacks[r]=n.enterCallbacks[r]||[]);return()=>new Promise((a,l)=>{const c=d=>{d===!1?l(lc(4,{from:t,to:e})):d instanceof Error?l(d):dL(d)?l(lc(2,{from:e,to:d})):(o&&n.enterCallbacks[r]===o&&typeof d=="function"&&o.push(d),a())},u=s(()=>i.call(n&&n.instances[r],e,t,c));let h=Promise.resolve(u);i.length<3&&(h=h.then(c)),h.catch(d=>l(d))})}function k0(i,e,t,n,r=s=>s()){const s=[];for(const o of i)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(ML(l)){const u=(l.__vccOpts||l)[e];u&&s.push(lo(u,t,n,o,a,r))}else{let c=l();s.push(()=>c.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const h=DT(u)?u.default:u;o.components[a]=h;const f=(h.__vccOpts||h)[e];return f&&lo(f,t,n,o,a,r)()}))}}return s}function ML(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function V_(i){const e=Vn(wv),t=Vn(bv),n=Se(()=>e.resolve(Nt(i.to))),r=Se(()=>{const{matched:l}=n.value,{length:c}=l,u=l[c-1],h=t.matched;if(!u||!h.length)return-1;const d=h.findIndex(ac.bind(null,u));if(d>-1)return d;const f=W_(l[c-2]);return c>1&&W_(u)===f&&h[h.length-1].path!==f?h.findIndex(ac.bind(null,l[c-2])):d}),s=Se(()=>r.value>-1&&GL(t.params,n.value.params)),o=Se(()=>r.value>-1&&r.value===t.matched.length-1&&h1(t.params,n.value.params));function a(l={}){return LL(l)?e[Nt(i.replace)?"replace":"push"](Nt(i.to)).catch(xu):Promise.resolve()}return{route:n,href:Se(()=>n.value.href),isActive:s,isExactActive:o,navigate:a}}const RL=Ut({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:V_,setup(i,{slots:e}){const t=rc(V_(i)),{options:n}=Vn(wv),r=Se(()=>({[Y_(i.activeClass,n.linkActiveClass,"router-link-active")]:t.isActive,[Y_(i.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const s=e.default&&e.default(t);return i.custom?s:wu("a",{"aria-current":t.isExactActive?i.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:r.value},s)}}}),TL=RL;function LL(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const e=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return i.preventDefault&&i.preventDefault(),!0}}function GL(i,e){for(const t in e){const n=e[t],r=i[t];if(typeof n=="string"){if(n!==r)return!1}else if(!Br(r)||r.length!==n.length||n.some((s,o)=>s!==r[o]))return!1}return!0}function W_(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const Y_=(i,e,t)=>i??e??t,OL=Ut({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:e,slots:t}){const n=Vn(im),r=Se(()=>i.route||n.value),s=Vn(z_,0),o=Se(()=>{let c=Nt(s);const{matched:u}=r.value;let h;for(;(h=u[c])&&!h.components;)c++;return c}),a=Se(()=>r.value.matched[o.value]);Iu(z_,Se(()=>o.value+1)),Iu(PL,a),Iu(im,r);const l=Si();return bo(()=>[l.value,a.value,i.name],([c,u,h],[d,f,g])=>{u&&(u.instances[h]=c,f&&f!==u&&c&&c===d&&(u.leaveGuards.size||(u.leaveGuards=f.leaveGuards),u.updateGuards.size||(u.updateGuards=f.updateGuards))),c&&u&&(!f||!ac(u,f)||!d)&&(u.enterCallbacks[h]||[]).forEach(p=>p(c))},{flush:"post"}),()=>{const c=r.value,u=i.name,h=a.value,d=h&&h.components[u];if(!d)return H_(t.default,{Component:d,route:c});const f=h.props[u],g=f?f===!0?c.params:typeof f=="function"?f(c):f:null,m=wu(d,Ft({},g,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(h.instances[u]=null)},ref:l}));return H_(t.default,{Component:m,route:c})||m}}});function H_(i,e){if(!i)return null;const t=i(e);return t.length===1?t[0]:t}const DL=OL;function kL(i){const e=IL(i.routes,i),t=i.parseQuery||SL,n=i.stringifyQuery||j_,r=i.history,s=Kc(),o=Kc(),a=Kc(),l=wP(eo);let c=eo;pl&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=O0.bind(null,z=>""+z),h=O0.bind(null,XT),d=O0.bind(null,Qu);function f(z,oe){let ne,Y;return f1(z)?(ne=e.getRecordMatcher(z),Y=oe):Y=z,e.addRoute(Y,ne)}function g(z){const oe=e.getRecordMatcher(z);oe&&e.removeRoute(oe)}function p(){return e.getRoutes().map(z=>z.record)}function m(z){return!!e.getRecordMatcher(z)}function v(z,oe){if(oe=Ft({},oe||l.value),typeof z=="string"){const M=D0(t,z,oe.path),G=e.resolve({path:M.path},oe),W=r.createHref(M.fullPath);return Ft(M,G,{params:d(G.params),hash:Qu(M.hash),redirectedFrom:void 0,href:W})}let ne;if(z.path!=null)ne=Ft({},z,{path:D0(t,z.path,oe.path).path});else{const M=Ft({},z.params);for(const G in M)M[G]==null&&delete M[G];ne=Ft({},z,{params:h(M)}),oe.params=h(oe.params)}const Y=e.resolve(ne,oe),Pe=z.hash||"";Y.params=u(d(Y.params));const tt=JT(n,Ft({},z,{hash:YT(Pe),path:Y.path})),E=r.createHref(tt);return Ft({fullPath:tt,hash:Pe,query:n===j_?xL(z.query):z.query||{}},Y,{redirectedFrom:void 0,href:E})}function y(z){return typeof z=="string"?D0(t,z,l.value.path):Ft({},z)}function A(z,oe){if(c!==z)return lc(8,{from:oe,to:z})}function _(z){return b(z)}function C(z){return _(Ft(y(z),{replace:!0}))}function I(z){const oe=z.matched[z.matched.length-1];if(oe&&oe.redirect){const{redirect:ne}=oe;let Y=typeof ne=="function"?ne(z):ne;return typeof Y=="string"&&(Y=Y.includes("?")||Y.includes("#")?Y=y(Y):{path:Y},Y.params={}),Ft({query:z.query,hash:z.hash,params:Y.path!=null?{}:z.params},Y)}}function b(z,oe){const ne=c=v(z),Y=l.value,Pe=z.state,tt=z.force,E=z.replace===!0,M=I(ne);if(M)return b(Ft(y(M),{state:typeof M=="object"?Ft({},Pe,M.state):Pe,force:tt,replace:E}),oe||ne);const G=ne;G.redirectedFrom=oe;let W;return!tt&&QT(n,Y,ne)&&(W=lc(16,{to:G,from:Y}),Ae(Y,Y,!0,!1)),(W?Promise.resolve(W):P(G,Y)).catch(X=>ys(X)?ys(X,2)?X:j(X):V(X,G,Y)).then(X=>{if(X){if(ys(X,2))return b(Ft({replace:E},y(X.to),{state:typeof X.to=="object"?Ft({},Pe,X.to.state):Pe,force:tt}),oe||G)}else X=x(G,Y,!0,E,Pe);return w(G,Y,X),X})}function S(z,oe){const ne=A(z,oe);return ne?Promise.reject(ne):Promise.resolve()}function R(z){const oe=Ce.values().next().value;return oe&&typeof oe.runWithContext=="function"?oe.runWithContext(z):z()}function P(z,oe){let ne;const[Y,Pe,tt]=FL(z,oe);ne=k0(Y.reverse(),"beforeRouteLeave",z,oe);for(const M of Y)M.leaveGuards.forEach(G=>{ne.push(lo(G,z,oe))});const E=S.bind(null,z,oe);return ne.push(E),Ie(ne).then(()=>{ne=[];for(const M of s.list())ne.push(lo(M,z,oe));return ne.push(E),Ie(ne)}).then(()=>{ne=k0(Pe,"beforeRouteUpdate",z,oe);for(const M of Pe)M.updateGuards.forEach(G=>{ne.push(lo(G,z,oe))});return ne.push(E),Ie(ne)}).then(()=>{ne=[];for(const M of tt)if(M.beforeEnter)if(Br(M.beforeEnter))for(const G of M.beforeEnter)ne.push(lo(G,z,oe));else ne.push(lo(M.beforeEnter,z,oe));return ne.push(E),Ie(ne)}).then(()=>(z.matched.forEach(M=>M.enterCallbacks={}),ne=k0(tt,"beforeRouteEnter",z,oe,R),ne.push(E),Ie(ne))).then(()=>{ne=[];for(const M of o.list())ne.push(lo(M,z,oe));return ne.push(E),Ie(ne)}).catch(M=>ys(M,8)?M:Promise.reject(M))}function w(z,oe,ne){a.list().forEach(Y=>R(()=>Y(z,oe,ne)))}function x(z,oe,ne,Y,Pe){const tt=A(z,oe);if(tt)return tt;const E=oe===eo,M=pl?history.state:{};ne&&(Y||E?r.replace(z.fullPath,Ft({scroll:E&&M&&M.scroll},Pe)):r.push(z.fullPath,Pe)),l.value=z,Ae(z,oe,ne,E),j()}let D;function k(){D||(D=r.listen((z,oe,ne)=>{if(!pe.listening)return;const Y=v(z),Pe=I(Y);if(Pe){b(Ft(Pe,{replace:!0}),Y).catch(xu);return}c=Y;const tt=l.value;pl&&oL(G_(tt.fullPath,ne.delta),zg()),P(Y,tt).catch(E=>ys(E,12)?E:ys(E,2)?(b(E.to,Y).then(M=>{ys(M,20)&&!ne.delta&&ne.type===$u.pop&&r.go(-1,!1)}).catch(xu),Promise.reject()):(ne.delta&&r.go(-ne.delta,!1),V(E,Y,tt))).then(E=>{E=E||x(Y,tt,!1),E&&(ne.delta&&!ys(E,8)?r.go(-ne.delta,!1):ne.type===$u.pop&&ys(E,20)&&r.go(-1,!1)),w(Y,tt,E)}).catch(xu)}))}let O=Kc(),N=Kc(),B;function V(z,oe,ne){j(z);const Y=N.list();return Y.length?Y.forEach(Pe=>Pe(z,oe,ne)):console.error(z),Promise.reject(z)}function se(){return B&&l.value!==eo?Promise.resolve():new Promise((z,oe)=>{O.add([z,oe])})}function j(z){return B||(B=!z,k(),O.list().forEach(([oe,ne])=>z?ne(z):oe()),O.reset()),z}function Ae(z,oe,ne,Y){const{scrollBehavior:Pe}=i;if(!pl||!Pe)return Promise.resolve();const tt=!ne&&aL(G_(z.fullPath,0))||(Y||!ne)&&history.state&&history.state.scroll||null;return wE().then(()=>Pe(z,oe,tt)).then(E=>E&&sL(E)).catch(E=>V(E,z,oe))}const q=z=>r.go(z);let Te;const Ce=new Set,pe={currentRoute:l,listening:!0,addRoute:f,removeRoute:g,hasRoute:m,getRoutes:p,resolve:v,options:i,push:_,replace:C,go:q,back:()=>q(-1),forward:()=>q(1),beforeEach:s.add,beforeResolve:o.add,afterEach:a.add,onError:N.add,isReady:se,install(z){const oe=this;z.component("RouterLink",TL),z.component("RouterView",DL),z.config.globalProperties.$router=oe,Object.defineProperty(z.config.globalProperties,"$route",{enumerable:!0,get:()=>Nt(l)}),pl&&!Te&&l.value===eo&&(Te=!0,_(r.location).catch(Pe=>{}));const ne={};for(const Pe in eo)Object.defineProperty(ne,Pe,{get:()=>l.value[Pe],enumerable:!0});z.provide(wv,oe),z.provide(bv,pE(ne)),z.provide(im,l);const Y=z.unmount;Ce.add(z),z.unmount=function(){Ce.delete(z),Ce.size<1&&(c=eo,D&&D(),D=null,l.value=eo,Te=!1,B=!1),Y()}}};function Ie(z){return z.reduce((oe,ne)=>oe.then(()=>R(ne)),Promise.resolve())}return pe}function FL(i,e){const t=[],n=[],r=[],s=Math.max(e.matched.length,i.matched.length);for(let o=0;o<s;o++){const a=e.matched[o];a&&(i.matched.find(c=>ac(c,a))?n.push(a):t.push(a));const l=i.matched[o];l&&(e.matched.find(c=>ac(c,l))||r.push(l))}return[t,n,r]}function NL(){return Vn(bv)}const UL="Carte.gouv.fr",q_="Portail Cartographique",BL="partiellement conforme",jL="/mentions-legales",zL="/donnees-personnelles",VL="/cookies",WL="/a11y-conformite",YL="Cartes.gouv.fr est dvelopp par lInstitut national de linformation gographique et forestire (IGN) et ses partenaires. Le site sappuie sur la Goplateforme, la nouvelle infrastructure publique, ouverte et collaborative des donnes gographiques.",HL="/",qL=Ut({__name:"App",setup(i){AR();const e=["Ministre","des Cartes"],t=[{label:q_,to:"/",icon:"ri-arrow-right-line",iconRight:!0},{label:"Accueil",to:"/accueil",icon:"ri-arrow-right-line",iconRight:!0},{label:"Catalogue",to:"/catalogue",icon:"ri-arrow-right-line",iconRight:!0},{label:"Se Connecter",to:"/login",icon:"fa-user-circle"}],n=Si(""),r=[{label:"Before",to:"/before"}],s=[{label:"After",to:"/after"},{label:"Paramtres daffichage",button:!0,class:"fr-icon-theme-fill fr-link--icon-left fr-px-2v",to:"/settings"}],o=void 0,a=void 0,l=void 0,c=void 0,u=[{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"gouvernement.fr",href:"https://gouvernement.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}],h=NL(),d=[{title:"Commencer avec cartes.gouv",get active(){return["Documentation Goplateforme","Questions frquanetes","Nous crire"].includes(h.name)},links:[{href:"",text:"Documentation Goplateforme"},{href:"",text:"Questions frquanetes"},{href:"",text:"Nous crire"}]},{to:{href:""},text:"Actualits"},{to:{href:""},text:"A propos"}];return(f,g)=>{const p=OT,m=O2,v=Ph("router-view"),y=QR;return de(),Ge(Kt,null,[dt(m,{modelValue:Nt(n),"onUpdate:modelValue":g[0]||(g[0]=A=>vn(n)?n.value=A:null),"service-title":UL,"service-description":q_,"logo-text":e,"quick-links":t,"show-search":""},{default:zn(()=>[dt(p,{"nav-items":d})]),_:1},8,["modelValue"]),Oe("div",null,[dt(v)]),dt(y,{"before-mandatory-links":r,"after-mandatory-links":s,"a11y-compliance":BL,"logo-text":e,"legal-link":jL,"personal-data-link":zL,"cookies-link":VL,"a11y-compliance-link":WL,"desc-text":YL,"home-link":HL,"licence-text":Nt(o),"licence-to":Nt(a),"licence-name":Nt(l),"licence-link-props":Nt(c),"ecosystem-links":u},null,8,["licence-text","licence-to","licence-name","licence-link-props"])],64)}}}),ze={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Sv{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}class fr{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function XL(i,e,t){let n,r;t=t||Oo;let s=0,o=i.length,a=!1;for(;s<o;)n=s+(o-s>>1),r=+t(i[n],e),r<0?s=n+1:(o=n,a=!r);return a?s:~s}function Oo(i,e){return i>e?1:i<e?-1:0}function Vg(i,e,t){if(i[0]<=e)return 0;const n=i.length;if(e<=i[n-1])return n-1;if(typeof t=="function"){for(let r=1;r<n;++r){const s=i[r];if(s===e)return r;if(s<e)return t(e,i[r-1],s)>0?r-1:r}return n-1}if(t>0){for(let r=1;r<n;++r)if(i[r]<e)return r-1;return n-1}if(t<0){for(let r=1;r<n;++r)if(i[r]<=e)return r;return n-1}for(let r=1;r<n;++r){if(i[r]==e)return r;if(i[r]<e)return i[r-1]-e<e-i[r]?r-1:r}return n-1}function ZL(i,e,t){for(;e<t;){const n=i[e];i[e]=i[t],i[t]=n,++e,--t}}function bt(i,e){const t=Array.isArray(e)?e:[e],n=t.length;for(let r=0;r<n;r++)i[i.length]=t[r]}function Hs(i,e){const t=i.length;if(t!==e.length)return!1;for(let n=0;n<t;n++)if(i[n]!==e[n])return!1;return!0}function KL(i,e,t){const n=e||Oo;return i.every(function(r,s){if(s===0)return!0;const o=n(i[s-1],r);return!(o>0||t&&o===0)})}function Do(){return!0}function xc(){return!1}function cc(){}function m1(i){let e=!1,t,n,r;return function(){const s=Array.prototype.slice.call(arguments);return(!e||this!==r||!Hs(s,n))&&(e=!0,r=this,n=s,t=i.apply(this,arguments)),t}}function eh(i){function e(){let t;try{t=i()}catch(n){return Promise.reject(n)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function Pc(i){for(const e in i)delete i[e]}function ko(i){let e;for(e in i)return!1;return!e}class Gh extends Sv{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const n=this.listeners_||(this.listeners_={}),r=n[e]||(n[e]=[]);r.includes(t)||r.push(t)}dispatchEvent(e){const t=typeof e=="string",n=t?e:e.type,r=this.listeners_&&this.listeners_[n];if(!r)return;const s=t?new fr(e):e;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});n in o||(o[n]=0,a[n]=0),++o[n];let l;for(let c=0,u=r.length;c<u;++c)if("handleEvent"in r[c]?l=r[c].handleEvent(s):l=r[c].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[n]===0){let c=a[n];for(delete a[n];c--;)this.removeEventListener(n,cc);delete o[n]}return l}disposeInternal(){this.listeners_&&Pc(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const n=this.listeners_[e];if(!n)return;const r=n.indexOf(t);r!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(n[r]=cc,++this.pendingRemovals_[e]):(n.splice(r,1),n.length===0&&delete this.listeners_[e]))}}const ge={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function We(){throw new Error("Unimplemented abstract method.")}let JL=0;function ke(i){return i.ol_uid||(i.ol_uid=String(++JL))}function v1(i){return Math.pow(i,3)}function Mc(i){return 1-v1(1-i)}function QL(i){return 3*i*i-2*i*i*i}function $L(i){return i}class Wg extends Gh{constructor(e,t,n){super(),n=n||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=n.transition===void 0?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(ze.CHANGE)}release(){this.state===ge.ERROR&&this.setState(ge.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==ge.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(e.getState()==ge.LOADED){e.interimTile=null;break}e.getState()==ge.LOADING?t=e:e.getState()==ge.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==ge.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){We()}getAlpha(e,t){if(!this.transition_)return 1;let n=this.transitionStarts_[e];if(!n)n=t,this.transitionStarts_[e]=n;else if(n===-1)return 1;const r=t-n+1e3/60;return r>=this.transition_?1:v1(r/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}const Fo=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",eG=Fo.includes("firefox"),tG=Fo.includes("safari")&&!Fo.includes("chrom");tG&&(Fo.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(Fo));const iG=Fo.includes("webkit")&&!Fo.includes("edge"),y1=Fo.includes("macintosh"),A1=typeof devicePixelRatio<"u"?devicePixelRatio:1,xv=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Pv=typeof Image<"u"&&Image.prototype.decode,nG=typeof createImageBitmap=="function",_1=function(){let i=!1;try{const e=Object.defineProperty({},"passive",{get:function(){i=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return i}();function yn(i,e,t,n){let r;return t&&t.length?r=t.shift():xv?r=new OffscreenCanvas(i||300,e||300):r=document.createElement("canvas"),i&&(r.width=i),e&&(r.height=e),r.getContext("2d",n)}function Oh(i){const e=i.canvas;e.width=1,e.height=1,i.clearRect(0,0,1,1)}function rG(i){let e=i.offsetWidth;const t=getComputedStyle(i);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function sG(i){let e=i.offsetHeight;const t=getComputedStyle(i);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function If(i,e){const t=e.parentNode;t&&t.replaceChild(i,e)}function Ef(i){return i&&i.parentNode?i.parentNode.removeChild(i):null}function C1(i){for(;i.lastChild;)i.removeChild(i.lastChild)}function oG(i,e){const t=i.childNodes;for(let n=0;;++n){const r=t[n],s=e[n];if(!r&&!s)break;if(r!==s){if(!r){i.appendChild(s);continue}if(!s){i.removeChild(r),--n;continue}i.insertBefore(s,r)}}}const Ye={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function ht(i,e,t,n,r){if(n&&n!==i&&(t=t.bind(n)),r){const o=t;t=function(){i.removeEventListener(e,t),o.apply(this,arguments)}}const s={target:i,type:e,listener:t};return i.addEventListener(e,t),s}function th(i,e,t,n){return ht(i,e,t,n,!0)}function zt(i){i&&i.target&&(i.target.removeEventListener(i.type,i.listener),Pc(i))}class I1 extends Gh{constructor(e,t,n,r){super(),this.extent=e,this.pixelRatio_=n,this.resolution=t,this.state=typeof r=="function"?Ye.IDLE:r,this.image_=null,this.loader=typeof r=="function"?r:null}changed(){this.dispatchEvent(ze.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Ye.IDLE&&this.loader){this.state=Ye.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;eh(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(n=>{"image"in n&&(this.image_=n.image),"extent"in n&&(this.extent=n.extent),"resolution"in n&&(this.resolution=n.resolution),"pixelRatio"in n&&(this.pixelRatio_=n.pixelRatio),(n instanceof HTMLImageElement||n instanceof ImageBitmap||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement)&&(this.image_=n),this.state=Ye.LOADED}).catch(n=>{this.state=Ye.ERROR,console.error(n)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function aG(i,e,t){const n=i;let r=!0,s=!1,o=!1;const a=[th(n,ze.LOAD,function(){o=!0,s||e()})];return n.src&&Pv?(s=!0,n.decode().then(function(){r&&e()}).catch(function(l){r&&(o?e():t())})):a.push(th(n,ze.ERROR,t)),function(){r=!1,a.forEach(zt)}}function lG(i,e){return new Promise((t,n)=>{function r(){o(),t(i)}function s(){o(),n(new Error("Image load error"))}function o(){i.removeEventListener("load",r),i.removeEventListener("error",s)}i.addEventListener("load",r),i.addEventListener("error",s),e&&(i.src=e)})}function E1(i,e){return e&&(i.src=e),i.src&&Pv?new Promise((t,n)=>i.decode().then(()=>t(i)).catch(r=>i.complete&&i.width?t(i):n(r))):lG(i)}function w1(i,e){return e&&(i.src=e),i.src&&Pv&&nG?i.decode().then(()=>createImageBitmap(i)).catch(t=>{if(i.complete&&i.width)return i;throw t}):E1(i)}class b1 extends Wg{constructor(e,t,n,r,s,o){super(e,t,o),this.crossOrigin_=r,this.src_=n,this.key=n,this.image_=new Image,r!==null&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(e){this.image_=e,this.state=ge.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ge.ERROR,this.unlistenImage_(),this.image_=cG(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=ge.LOADED:this.state=ge.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ge.ERROR&&(this.state=ge.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ge.IDLE&&(this.state=ge.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=aG(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function cG(){const i=yn(1,1);return i.fillStyle="rgba(0,0,0,0)",i.fillRect(0,0,1,1),i.canvas}const S1=.5,Ui={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function Fn(i){const e=Yn();for(let t=0,n=i.length;t<n;++t)Ru(e,i[t]);return e}function uG(i,e,t){const n=Math.min.apply(null,i),r=Math.min.apply(null,e),s=Math.max.apply(null,i),o=Math.max.apply(null,e);return us(n,r,s,o,t)}function Fr(i,e,t){return t?(t[0]=i[0]-e,t[1]=i[1]-e,t[2]=i[2]+e,t[3]=i[3]+e,t):[i[0]-e,i[1]-e,i[2]+e,i[3]+e]}function x1(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i.slice()}function Ka(i,e,t){let n,r;return e<i[0]?n=i[0]-e:i[2]<e?n=e-i[2]:n=0,t<i[1]?r=i[1]-t:i[3]<t?r=t-i[3]:r=0,n*n+r*r}function Yg(i,e){return Mv(i,e[0],e[1])}function Gr(i,e){return i[0]<=e[0]&&e[2]<=i[2]&&i[1]<=e[1]&&e[3]<=i[3]}function Mv(i,e,t){return i[0]<=e&&e<=i[2]&&i[1]<=t&&t<=i[3]}function nm(i,e){const t=i[0],n=i[1],r=i[2],s=i[3],o=e[0],a=e[1];let l=Ui.UNKNOWN;return o<t?l=l|Ui.LEFT:o>r&&(l=l|Ui.RIGHT),a<n?l=l|Ui.BELOW:a>s&&(l=l|Ui.ABOVE),l===Ui.UNKNOWN&&(l=Ui.INTERSECTING),l}function Yn(){return[1/0,1/0,-1/0,-1/0]}function us(i,e,t,n,r){return r?(r[0]=i,r[1]=e,r[2]=t,r[3]=n,r):[i,e,t,n]}function Rc(i){return us(1/0,1/0,-1/0,-1/0,i)}function Mu(i,e){const t=i[0],n=i[1];return us(t,n,t,n,e)}function Rv(i,e,t,n,r){const s=Rc(r);return M1(s,i,e,t,n)}function No(i,e){return i[0]==e[0]&&i[2]==e[2]&&i[1]==e[1]&&i[3]==e[3]}function P1(i,e){return e[0]<i[0]&&(i[0]=e[0]),e[2]>i[2]&&(i[2]=e[2]),e[1]<i[1]&&(i[1]=e[1]),e[3]>i[3]&&(i[3]=e[3]),i}function Ru(i,e){e[0]<i[0]&&(i[0]=e[0]),e[0]>i[2]&&(i[2]=e[0]),e[1]<i[1]&&(i[1]=e[1]),e[1]>i[3]&&(i[3]=e[1])}function M1(i,e,t,n,r){for(;t<n;t+=r)hG(i,e[t],e[t+1]);return i}function hG(i,e,t){i[0]=Math.min(i[0],e),i[1]=Math.min(i[1],t),i[2]=Math.max(i[2],e),i[3]=Math.max(i[3],t)}function Tv(i,e){let t;return t=e(Hg(i)),t||(t=e(Dh(i)),t)||(t=e(qg(i)),t)||(t=e(ms(i)),t)?t:!1}function rm(i){let e=0;return Tc(i)||(e=Rt(i)*fn(i)),e}function Hg(i){return[i[0],i[1]]}function Dh(i){return[i[2],i[1]]}function hs(i){return[(i[0]+i[2])/2,(i[1]+i[3])/2]}function dG(i,e){let t;if(e==="bottom-left")t=Hg(i);else if(e==="bottom-right")t=Dh(i);else if(e==="top-left")t=ms(i);else if(e==="top-right")t=qg(i);else throw new Error("Invalid corner");return t}function ih(i,e,t,n,r){const[s,o,a,l,c,u,h,d]=sm(i,e,t,n);return us(Math.min(s,a,c,h),Math.min(o,l,u,d),Math.max(s,a,c,h),Math.max(o,l,u,d),r)}function sm(i,e,t,n){const r=e*n[0]/2,s=e*n[1]/2,o=Math.cos(t),a=Math.sin(t),l=r*o,c=r*a,u=s*o,h=s*a,d=i[0],f=i[1];return[d-l+h,f-c-u,d-l-h,f-c+u,d+l-h,f+c+u,d+l+h,f+c-u,d-l+h,f-c-u]}function fn(i){return i[3]-i[1]}function So(i,e,t){const n=t||Yn();return Jt(i,e)?(i[0]>e[0]?n[0]=i[0]:n[0]=e[0],i[1]>e[1]?n[1]=i[1]:n[1]=e[1],i[2]<e[2]?n[2]=i[2]:n[2]=e[2],i[3]<e[3]?n[3]=i[3]:n[3]=e[3]):Rc(n),n}function ms(i){return[i[0],i[3]]}function qg(i){return[i[2],i[3]]}function Rt(i){return i[2]-i[0]}function Jt(i,e){return i[0]<=e[2]&&i[2]>=e[0]&&i[1]<=e[3]&&i[3]>=e[1]}function Tc(i){return i[2]<i[0]||i[3]<i[1]}function fG(i,e){return e?(e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e):i}function gG(i,e){const t=(i[2]-i[0])/2*(e-1),n=(i[3]-i[1])/2*(e-1);i[0]-=t,i[2]+=t,i[1]-=n,i[3]+=n}function pG(i,e,t){let n=!1;const r=nm(i,e),s=nm(i,t);if(r===Ui.INTERSECTING||s===Ui.INTERSECTING)n=!0;else{const o=i[0],a=i[1],l=i[2],c=i[3],u=e[0],h=e[1],d=t[0],f=t[1],g=(f-h)/(d-u);let p,m;s&Ui.ABOVE&&!(r&Ui.ABOVE)&&(p=d-(f-c)/g,n=p>=o&&p<=l),!n&&s&Ui.RIGHT&&!(r&Ui.RIGHT)&&(m=f-(d-l)*g,n=m>=a&&m<=c),!n&&s&Ui.BELOW&&!(r&Ui.BELOW)&&(p=d-(f-a)/g,n=p>=o&&p<=l),!n&&s&Ui.LEFT&&!(r&Ui.LEFT)&&(m=f-(d-o)*g,n=m>=a&&m<=c)}return n}function Lv(i,e,t,n){if(Tc(i))return Rc(t);let r=[];if(n>1){const a=i[2]-i[0],l=i[3]-i[1];for(let c=0;c<n;++c)r.push(i[0]+a*c/n,i[1],i[2],i[1]+l*c/n,i[2]-a*c/n,i[3],i[0],i[3]-l*c/n)}else r=[i[0],i[1],i[2],i[1],i[2],i[3],i[0],i[3]];e(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return uG(s,o,t)}function R1(i,e){const t=e.getExtent(),n=hs(i);if(e.canWrapX()&&(n[0]<t[0]||n[0]>=t[2])){const r=Rt(t),o=Math.floor((n[0]-t[0])/r)*r;i[0]-=o,i[2]-=o}return i}function mG(i,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(i[0])||!isFinite(i[2]))return[[t[0],i[1],t[2],i[3]]];R1(i,e);const n=Rt(t);if(Rt(i)>n)return[[t[0],i[1],t[2],i[3]]];if(i[0]<t[0])return[[i[0]+n,i[1],t[2],i[3]],[t[0],i[1],i[2],i[3]]];if(i[2]>t[2])return[[i[0],i[1],t[2],i[3]],[t[0],i[1],i[2]-n,i[3]]]}return[i]}const Ga={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Xg=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ga[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const kh=6378137,bl=Math.PI*kh,vG=[-bl,-bl,bl,bl],yG=[-180,-85,180,85],cd=kh*Math.log(Math.tan(Math.PI/2));class rl extends Xg{constructor(e){super({code:e,units:"m",extent:vG,global:!0,worldExtent:yG,getPointResolution:function(t,n){return t/Math.cosh(n[1]/kh)}})}}const X_=[new rl("EPSG:3857"),new rl("EPSG:102100"),new rl("EPSG:102113"),new rl("EPSG:900913"),new rl("http://www.opengis.net/def/crs/EPSG/0/3857"),new rl("http://www.opengis.net/gml/srs/epsg.xml#3857")];function AG(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let r=0;r<n;r+=t){e[r]=bl*i[r]/180;let s=kh*Math.log(Math.tan(Math.PI*(+i[r+1]+90)/360));s>cd?s=cd:s<-cd&&(s=-cd),e[r+1]=s}return e}function _G(i,e,t){const n=i.length;t=t>1?t:2,e===void 0&&(t>2?e=i.slice():e=new Array(n));for(let r=0;r<n;r+=t)e[r]=180*i[r]/bl,e[r+1]=360*Math.atan(Math.exp(i[r+1]/kh))/Math.PI-90;return e}const CG=6378137,Z_=[-180,-90,180,90],IG=Math.PI*CG/180;class ea extends Xg{constructor(e,t){super({code:e,units:"degrees",extent:Z_,axisOrientation:t,global:!0,metersPerUnit:IG,worldExtent:Z_})}}const K_=[new ea("CRS:84"),new ea("EPSG:4326","neu"),new ea("urn:ogc:def:crs:OGC:1.3:CRS84"),new ea("urn:ogc:def:crs:OGC:2:84"),new ea("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new ea("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new ea("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let om={};function EG(i){return om[i]||om[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function wG(i,e){om[i]=e}let Wl={};function uc(i,e,t){const n=i.getCode(),r=e.getCode();n in Wl||(Wl[n]={}),Wl[n][r]=t}function T1(i,e){let t;return i in Wl&&e in Wl[i]&&(t=Wl[i][e]),t}function mi(i,e,t){return Math.min(Math.max(i,e),t)}function bG(i,e,t,n,r,s){const o=r-t,a=s-n;if(o!==0||a!==0){const l=((i-t)*o+(e-n)*a)/(o*o+a*a);l>1?(t=r,n=s):l>0&&(t+=o*l,n+=a*l)}return Rs(i,e,t,n)}function Rs(i,e,t,n){const r=t-i,s=n-e;return r*r+s*s}function SG(i){const e=i.length;for(let n=0;n<e;n++){let r=n,s=Math.abs(i[n][n]);for(let a=n+1;a<e;a++){const l=Math.abs(i[a][n]);l>s&&(s=l,r=a)}if(s===0)return null;const o=i[r];i[r]=i[n],i[n]=o;for(let a=n+1;a<e;a++){const l=-i[a][n]/i[n][n];for(let c=n;c<e+1;c++)n==c?i[a][c]=0:i[a][c]+=l*i[n][c]}}const t=new Array(e);for(let n=e-1;n>=0;n--){t[n]=i[n][e]/i[n][n];for(let r=n-1;r>=0;r--)i[r][e]-=i[r][n]*t[n]}return t}function xo(i){return i*Math.PI/180}function xa(i,e){const t=i%e;return t*e<0?t+e:t}function rr(i,e,t){return i+t*(e-i)}function Fh(i,e){const t=Math.pow(10,e);return Math.round(i*t)/t}function J_(i,e){return Math.round(Fh(i,e))}function Sl(i,e){return Math.floor(Fh(i,e))}function po(i,e){return Math.ceil(Fh(i,e))}function Jc(i,e,t){const n=t!==void 0?i.toFixed(t):""+i;let r=n.indexOf(".");return r=r===-1?n.length:r,r>e?n:new Array(1+e-r).join("0")+n}function Gv(i,e){const t=(""+i).split("."),n=(""+e).split(".");for(let r=0;r<Math.max(t.length,n.length);r++){const s=parseInt(t[r]||"0",10),o=parseInt(n[r]||"0",10);if(s>o)return 1;if(o>s)return-1}return 0}function xG(i,e){return i[0]+=+e[0],i[1]+=+e[1],i}function L1(i,e){const t=i[0],n=i[1],r=e[0],s=e[1],o=r[0],a=r[1],l=s[0],c=s[1],u=l-o,h=c-a,d=u===0&&h===0?0:(u*(t-o)+h*(n-a))/(u*u+h*h||0);let f,g;return d<=0?(f=o,g=a):d>=1?(f=l,g=c):(f=o+d*u,g=a+d*h),[f,g]}function Pr(i,e){let t=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=e[n]){t=!1;break}return t}function Ov(i,e){const t=Math.cos(e),n=Math.sin(e),r=i[0]*t-i[1]*n,s=i[1]*t+i[0]*n;return i[0]=r,i[1]=s,i}function PG(i,e){return i[0]*=e,i[1]*=e,i}function hc(i,e){const t=i[0]-e[0],n=i[1]-e[1];return t*t+n*n}function wf(i,e){return Math.sqrt(hc(i,e))}function MG(i,e){return hc(i,L1(i,e))}function Dv(i,e){if(e.canWrapX()){const t=Rt(e.getExtent()),n=RG(i,e,t);n&&(i[0]-=n*t)}return i}function RG(i,e,t){const n=e.getExtent();let r=0;return e.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(t=t||Rt(n),r=Math.floor((i[0]-n[0])/t)),r}const G1=63710088e-1;function Oa(i,e,t){t=t||G1;const n=xo(i[1]),r=xo(e[1]),s=(r-n)/2,o=xo(e[0]-i[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(r);return 2*t*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function ud(i,e){let t=0;const n=i.length;let r=i[n-1][0],s=i[n-1][1];for(let o=0;o<n;o++){const a=i[o][0],l=i[o][1];t+=xo(a-r)*(2+Math.sin(xo(s))+Math.sin(xo(l))),r=a,s=l}return t*e*e/2}function bf(i,e){e=e||{};const t=e.radius||G1,n=e.projection||"EPSG:3857",r=i.getType();r!=="GeometryCollection"&&(i=i.clone().transform(n,"EPSG:4326"));let s=0,o,a,l,c,u,h;switch(r){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=i.getCoordinates(),s=Math.abs(ud(o[0],t)),l=1,c=o.length;l<c;++l)s-=Math.abs(ud(o[l],t));break}case"MultiPolygon":{for(o=i.getCoordinates(),l=0,c=o.length;l<c;++l)for(a=o[l],s+=Math.abs(ud(a[0],t)),u=1,h=a.length;u<h;++u)s-=Math.abs(ud(a[u],t));break}case"GeometryCollection":{const d=i.getGeometries();for(l=0,c=d.length;l<c;++l)s+=bf(d[l],e);break}default:throw new Error("Unsupported geometry type: "+r)}return s}function O1(...i){console.warn(...i)}let am=!0;function D1(i){am=!(i===void 0?!0:i)}function kv(i,e){if(e!==void 0){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];e=e}else e=i.slice();return e}function k1(i,e){if(e!==void 0&&i!==e){for(let t=0,n=i.length;t<n;++t)e[t]=i[t];i=e}return i}function Fv(i){wG(i.getCode(),i),uc(i,i,kv)}function TG(i){i.forEach(Fv)}function Re(i){return typeof i=="string"?EG(i):i||null}function Sf(i,e,t,n){i=Re(i);let r;const s=i.getPointResolutionFunc();if(s){if(r=s(e,t),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(r=r*o/Ga[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")r=e;else{const a=Zg(i,Re("EPSG:4326"));if(a===k1&&o!=="degrees")r=e*i.getMetersPerUnit();else{let c=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];c=a(c,c,2);const u=Oa(c.slice(0,2),c.slice(2,4)),h=Oa(c.slice(4,6),c.slice(6,8));r=(u+h)/2}const l=n?Ga[n]:i.getMetersPerUnit();l!==void 0&&(r/=l)}}return r}function lm(i){TG(i),i.forEach(function(e){i.forEach(function(t){e!==t&&uc(e,t,kv)})})}function LG(i,e,t,n){i.forEach(function(r){e.forEach(function(s){uc(r,s,t),uc(s,r,n)})})}function Nv(i,e){return i?typeof i=="string"?Re(i):i:Re(e)}function Q_(i){return function(e,t,n){const r=e.length;n=n!==void 0?n:2,t=t!==void 0?t:new Array(r);for(let s=0;s<r;s+=n){const o=i(e.slice(s,s+n)),a=o.length;for(let l=0,c=n;l<c;++l)t[s+l]=l>=a?e[s+l]:o[l]}return t}}function GG(i,e,t,n){const r=Re(i),s=Re(e);uc(r,s,Q_(t)),uc(s,r,Q_(n))}function $_(i,e){return D1(),Et(i,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function $r(i,e){if(i===e)return!0;const t=i.getUnits()===e.getUnits();return(i.getCode()===e.getCode()||Zg(i,e)===kv)&&t}function Zg(i,e){const t=i.getCode(),n=e.getCode();let r=T1(t,n);return r||(r=k1),r}function Da(i,e){const t=Re(i),n=Re(e);return Zg(t,n)}function Et(i,e,t){return Da(e,t)(i,void 0,i.length)}function Ss(i,e,t,n){const r=Da(e,t);return Lv(i,r,void 0,n)}function dc(i,e){return i}function di(i,e){return am&&!Pr(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(am=!1,O1("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function Uv(i,e){return i}function mo(i,e){return i}function OG(){lm(X_),lm(K_),LG(K_,X_,AG,_G)}OG();const DG=10,eC=.25;class F1{constructor(e,t,n,r,s,o){this.sourceProj_=e,this.targetProj_=t;let a={};const l=Da(this.targetProj_,this.sourceProj_);this.transformInv_=function(y){const A=y[0]+"/"+y[1];return a[A]||(a[A]=l(y)),a[A]},this.maxSourceExtent_=r,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&Rt(r)>=Rt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Rt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Rt(this.targetProj_.getExtent()):null;const c=ms(n),u=qg(n),h=Dh(n),d=Hg(n),f=this.transformInv_(c),g=this.transformInv_(u),p=this.transformInv_(h),m=this.transformInv_(d),v=DG+(o?Math.max(0,Math.ceil(Math.log2(rm(n)/(o*o*256*256)))):0);if(this.addQuad_(c,u,h,d,f,g,p,m,v),this.wrapsXInSource_){let y=1/0;this.triangles_.forEach(function(A,_,C){y=Math.min(y,A.source[0][0],A.source[1][0],A.source[2][0])}),this.triangles_.forEach(A=>{if(Math.max(A.source[0][0],A.source[1][0],A.source[2][0])-y>this.sourceWorldWidth_/2){const _=[[A.source[0][0],A.source[0][1]],[A.source[1][0],A.source[1][1]],[A.source[2][0],A.source[2][1]]];_[0][0]-y>this.sourceWorldWidth_/2&&(_[0][0]-=this.sourceWorldWidth_),_[1][0]-y>this.sourceWorldWidth_/2&&(_[1][0]-=this.sourceWorldWidth_),_[2][0]-y>this.sourceWorldWidth_/2&&(_[2][0]-=this.sourceWorldWidth_);const C=Math.min(_[0][0],_[1][0],_[2][0]);Math.max(_[0][0],_[1][0],_[2][0])-C<this.sourceWorldWidth_/2&&(A.source=_)}})}a={}}addTriangle_(e,t,n,r,s,o){this.triangles_.push({source:[r,s,o],target:[e,t,n]})}addQuad_(e,t,n,r,s,o,a,l,c){const u=Fn([s,o,a,l]),h=this.sourceWorldWidth_?Rt(u)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,f=this.sourceProj_.canWrapX()&&h>.5&&h<1;let g=!1;if(c>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=Fn([e,t,n,r]);g=Rt(m)/this.targetWorldWidth_>eC||g}!f&&this.sourceProj_.isGlobal()&&h&&(g=h>eC||g)}if(!g&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Jt(u,this.maxSourceExtent_))return;let p=0;if(!g&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(c>0)g=!0;else if(p=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),p!=1&&p!=2&&p!=4&&p!=8)return}if(c>0){if(!g){const m=[(e[0]+n[0])/2,(e[1]+n[1])/2],v=this.transformInv_(m);let y;f?y=(xa(s[0],d)+xa(a[0],d))/2-xa(v[0],d):y=(s[0]+a[0])/2-v[0];const A=(s[1]+a[1])/2-v[1];g=y*y+A*A>this.errorThresholdSquared_}if(g){if(Math.abs(e[0]-n[0])<=Math.abs(e[1]-n[1])){const m=[(t[0]+n[0])/2,(t[1]+n[1])/2],v=this.transformInv_(m),y=[(r[0]+e[0])/2,(r[1]+e[1])/2],A=this.transformInv_(y);this.addQuad_(e,t,m,y,s,o,v,A,c-1),this.addQuad_(y,m,n,r,A,v,a,l,c-1)}else{const m=[(e[0]+t[0])/2,(e[1]+t[1])/2],v=this.transformInv_(m),y=[(n[0]+r[0])/2,(n[1]+r[1])/2],A=this.transformInv_(y);this.addQuad_(e,m,y,r,s,v,A,l,c-1),this.addQuad_(m,t,n,y,v,o,a,A,c-1)}return}}if(f){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}p&11||this.addTriangle_(e,n,r,s,a,l),p&14||this.addTriangle_(e,n,t,s,a,o),p&&(p&13||this.addTriangle_(t,r,e,o,l,s),p&7||this.addTriangle_(t,r,n,o,l,a))}calculateSourceExtent(){const e=Yn();return this.triangles_.forEach(function(t,n,r){const s=t.source;Ru(e,s[0]),Ru(e,s[1]),Ru(e,s[2])}),e}getTriangles(){return this.triangles_}}let F0;const Yl=[];function tC(i,e,t,n,r){i.beginPath(),i.moveTo(0,0),i.lineTo(e,t),i.lineTo(n,r),i.closePath(),i.save(),i.clip(),i.fillRect(0,0,Math.max(e,n)+1,Math.max(t,r)),i.restore()}function N0(i,e){return Math.abs(i[e*4]-210)>2||Math.abs(i[e*4+3]-.75*255)>2}function kG(){if(F0===void 0){const i=yn(6,6,Yl);i.globalCompositeOperation="lighter",i.fillStyle="rgba(210, 0, 0, 0.75)",tC(i,4,5,4,0),tC(i,4,5,0,5);const e=i.getImageData(0,0,3,3).data;F0=N0(e,0)||N0(e,4)||N0(e,8),Oh(i),Yl.push(i.canvas)}return F0}function nh(i,e,t,n){const r=Et(t,e,i);let s=Sf(e,n,t);const o=e.getMetersPerUnit();o!==void 0&&(s*=o);const a=i.getMetersPerUnit();a!==void 0&&(s/=a);const l=i.getExtent();if(!l||Yg(l,r)){const c=Sf(i,s,r)/s;isFinite(c)&&c>0&&(s/=c)}return s}function FG(i,e,t,n){const r=hs(t);let s=nh(i,e,r,n);return(!isFinite(s)||s<=0)&&Tv(t,function(o){return s=nh(i,e,o,n),isFinite(s)&&s>0}),s}function N1(i,e,t,n,r,s,o,a,l,c,u,h,d){const f=yn(Math.round(t*i),Math.round(t*e),Yl);if(h||(f.imageSmoothingEnabled=!1),l.length===0)return f.canvas;f.scale(t,t);function g(y){return Math.round(y*t)/t}f.globalCompositeOperation="lighter";const p=Yn();l.forEach(function(y,A,_){P1(p,y.extent)});let m;if(!d||l.length!==1||c!==0){const y=Rt(p),A=fn(p);m=yn(Math.round(t*y/n),Math.round(t*A/n),Yl),h||(m.imageSmoothingEnabled=!1);const _=t/n;l.forEach(function(C,I,b){const S=C.extent[0]-p[0],R=-(C.extent[3]-p[3]),P=Rt(C.extent),w=fn(C.extent);C.image.width>0&&C.image.height>0&&m.drawImage(C.image,c,c,C.image.width-2*c,C.image.height-2*c,S*_,R*_,P*_,w*_)})}const v=ms(o);return a.getTriangles().forEach(function(y,A,_){const C=y.source,I=y.target;let b=C[0][0],S=C[0][1],R=C[1][0],P=C[1][1],w=C[2][0],x=C[2][1];const D=g((I[0][0]-v[0])/s),k=g(-(I[0][1]-v[1])/s),O=g((I[1][0]-v[0])/s),N=g(-(I[1][1]-v[1])/s),B=g((I[2][0]-v[0])/s),V=g(-(I[2][1]-v[1])/s),se=b,j=S;b=0,S=0,R-=se,P-=j,w-=se,x-=j;const Ae=[[R,P,0,0,O-D],[w,x,0,0,B-D],[0,0,R,P,N-k],[0,0,w,x,V-k]],q=SG(Ae);if(!q)return;if(f.save(),f.beginPath(),kG()||!h){f.moveTo(O,N);const Ce=4,pe=D-O,Ie=k-N;for(let z=0;z<Ce;z++)f.lineTo(O+g((z+1)*pe/Ce),N+g(z*Ie/(Ce-1))),z!=Ce-1&&f.lineTo(O+g((z+1)*pe/Ce),N+g((z+1)*Ie/(Ce-1)));f.lineTo(B,V)}else f.moveTo(O,N),f.lineTo(D,k),f.lineTo(B,V);f.clip(),f.transform(q[0],q[2],q[1],q[3],D,k),f.translate(p[0]-se,p[3]-j);let Te;if(m)Te=m.canvas,f.scale(n/t,-n/t);else{const Ce=l[0],pe=Ce.extent;Te=Ce.image,f.scale(Rt(pe)/Te.width,-fn(pe)/Te.height)}f.drawImage(Te,0,0),f.restore()}),m&&(Oh(m),Yl.push(m.canvas)),u&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach(function(y,A,_){const C=y.target,I=(C[0][0]-v[0])/s,b=-(C[0][1]-v[1])/s,S=(C[1][0]-v[0])/s,R=-(C[1][1]-v[1])/s,P=(C[2][0]-v[0])/s,w=-(C[2][1]-v[1])/s;f.beginPath(),f.moveTo(S,R),f.lineTo(I,b),f.lineTo(P,w),f.closePath(),f.stroke()}),f.restore()),f.canvas}class cm extends Wg{constructor(e,t,n,r,s,o,a,l,c,u,h,d){super(s,ge.IDLE,d),this.renderEdges_=h!==void 0?h:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=r,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const f=r.getTileCoordExtent(this.wrappedTileCoord_),g=this.targetTileGrid_.getExtent();let p=this.sourceTileGrid_.getExtent();const m=g?So(f,g):f;if(rm(m)===0){this.state=ge.EMPTY;return}const v=e.getExtent();v&&(p?p=So(p,v):p=v);const y=r.getResolution(this.wrappedTileCoord_[0]),A=FG(e,n,m,y);if(!isFinite(A)||A<=0){this.state=ge.EMPTY;return}const _=u!==void 0?u:S1;if(this.triangulation_=new F1(e,n,m,p,A*_,y),this.triangulation_.getTriangles().length===0){this.state=ge.EMPTY;return}this.sourceZ_=t.getZForResolution(A);let C=this.triangulation_.calculateSourceExtent();if(p&&(e.canWrapX()?(C[1]=mi(C[1],p[1],p[3]),C[3]=mi(C[3],p[1],p[3])):C=So(C,p)),!rm(C))this.state=ge.EMPTY;else{const I=t.getTileRangeForExtentAndZ(C,this.sourceZ_);for(let b=I.minX;b<=I.maxX;b++)for(let S=I.minY;S<=I.maxY;S++){const R=c(this.sourceZ_,b,S,a);R&&this.sourceTiles_.push(R)}this.sourceTiles_.length===0&&(this.state=ge.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==ge.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=ge.ERROR;else{const t=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(t),r=typeof n=="number"?n:n[0],s=typeof n=="number"?n:n[1],o=this.targetTileGrid_.getResolution(t),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=N1(r,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=ge.LOADED}this.changed()}load(){if(this.state==ge.IDLE){this.state=ge.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const n=t.getState();if(n==ge.IDLE||n==ge.LOADING){e++;const r=ht(t,ze.CHANGE,function(s){const o=t.getState();(o==ge.LOADED||o==ge.ERROR||o==ge.EMPTY)&&(zt(r),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,n,r){t.getState()==ge.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(zt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(Oh(this.canvas_.getContext("2d")),Yl.push(this.canvas_),this.canvas_=null),super.release()}}function vt(i,e){if(!i)throw new Error(e)}class NG{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const n=this.entries_[e];return vt(n!==void 0,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(e){const t=this.entries_[e];return vt(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.key_;return e}getValues(){const e=new Array(this.count_);let t=0,n;for(n=this.newest_;n;n=n.older)e[t++]=n.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){vt(!(e in this.entries_),"Tried to set a value for a key that is used already");const n={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[e]=n,++this.count_}setSize(e){this.highWaterMark=e}}function iC(i,e,t,n){return n!==void 0?(n[0]=i,n[1]=e,n[2]=t,n):[i,e,t]}function Lc(i,e,t){return i+"/"+e+"/"+t}function U1(i){return Lc(i[0],i[1],i[2])}function UG(i){const[e,t,n]=i.substring(i.lastIndexOf("/")+1,i.length).split(",").map(Number);return Lc(e,t,n)}function B1(i){return i.split("/").map(Number)}function j1(i){return(i[1]<<i[0])+i[2]}function BG(i,e){const t=i[0],n=i[1],r=i[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const s=e.getFullTileRange(t);return s?s.containsXY(n,r):!0}class Bv extends NG{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),n=B1(e)[0];this.forEach(r=>{r.tileCoord[0]!==n&&(this.remove(U1(r.tileCoord)),r.release())})}}const U0={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},ka={PROPERTYCHANGE:"propertychange"};class Nh extends Gh{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(ze.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const n=e.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=ht(this,e[s],t);return r}return ht(this,e,t)}onceInternal(e,t){let n;if(Array.isArray(e)){const r=e.length;n=new Array(r);for(let s=0;s<r;++s)n[s]=th(this,e[s],t)}else n=th(this,e,t);return t.ol_key=n,n}unInternal(e,t){const n=t.ol_key;if(n)gi(n);else if(Array.isArray(e))for(let r=0,s=e.length;r<s;++r)this.removeEventListener(e[r],t);else this.removeEventListener(e,t)}}Nh.prototype.on;Nh.prototype.once;Nh.prototype.un;function gi(i){if(Array.isArray(i))for(let e=0,t=i.length;e<t;++e)zt(i[e]);else zt(i)}class nC extends fr{constructor(e,t,n){super(e),this.key=t,this.oldValue=n}}class zr extends Nh{constructor(e){super(),this.on,this.once,this.un,ke(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let n;n=`change:${e}`,this.hasListener(n)&&this.dispatchEvent(new nC(n,e,t)),n=ka.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new nC(n,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,n){const r=this.values_||(this.values_={});if(n)r[e]=t;else{const s=r[e];r[e]=t,s!==t&&this.notify(e,s)}}setProperties(e,t){for(const n in e)this.set(n,e[n],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const n=this.values_[e];delete this.values_[e],ko(this.values_)&&(this.values_=null),t||this.notify(e,n)}}}class jv extends zr{constructor(e){super(),this.projection=Re(e.projection),this.attributions_=rC(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(n,r){t.viewResolver=n,t.viewRejector=r})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=rC(e),this.changed()}setState(e){this.state_=e,this.changed()}}function rC(i){return i?Array.isArray(i)?function(e){return i}:typeof i=="function"?i:function(e){return[i]}:null}class zv{constructor(e,t,n,r){this.minX=e,this.maxX=t,this.minY=n,this.maxY=r}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function sl(i,e,t,n,r){return r!==void 0?(r.minX=i,r.maxX=e,r.minY=t,r.maxY=n,r):new zv(i,e,t,n)}const z1=42,Vv=256;function V1(i,e,t,n,r){let s;for(e+=n;e<t;e+=n)if(s=r(i.slice(e-n,e),i.slice(e,e+n)),s)return s;return!1}function jG(i,e,t,n,r){return!Tv(r,function(o){return!Aa(i,e,t,n,o[0],o[1])})}function Aa(i,e,t,n,r,s){let o=0,a=i[t-n],l=i[t-n+1];for(;e<t;e+=n){const c=i[e],u=i[e+1];l<=s?u>s&&(c-a)*(s-l)-(r-a)*(u-l)>0&&o++:u<=s&&(c-a)*(s-l)-(r-a)*(u-l)<0&&o--,a=c,l=u}return o!==0}function Wv(i,e,t,n,r,s){if(t.length===0||!Aa(i,e,t[0],n,r,s))return!1;for(let o=1,a=t.length;o<a;++o)if(Aa(i,t[o-1],t[o],n,r,s))return!1;return!0}function zG(i,e,t,n,r,s){if(t.length===0)return!1;for(let o=0,a=t.length;o<a;++o){const l=t[o];if(Wv(i,e,l,n,r,s))return!0;e=l[l.length-1]}return!1}function Kg(i,e,t,n,r){const s=M1(Yn(),i,e,t,n);return Jt(r,s)?Gr(r,s)||s[0]>=r[0]&&s[2]<=r[2]||s[1]>=r[1]&&s[3]<=r[3]?!0:V1(i,e,t,n,function(o,a){return pG(r,o,a)}):!1}function VG(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){if(Kg(i,e,t[s],n,r))return!0;e=t[s]}return!1}function W1(i,e,t,n,r){return!!(Kg(i,e,t,n,r)||Aa(i,e,t,n,r[0],r[1])||Aa(i,e,t,n,r[0],r[3])||Aa(i,e,t,n,r[2],r[1])||Aa(i,e,t,n,r[2],r[3]))}function Y1(i,e,t,n,r){if(!W1(i,e,t[0],n,r))return!1;if(t.length===1)return!0;for(let s=1,o=t.length;s<o;++s)if(jG(i,t[s-1],t[s],n,r)&&!Kg(i,t[s-1],t[s],n,r))return!1;return!0}function WG(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(Y1(i,e,a,n,r))return!0;e=a[a.length-1]}return!1}function sC(i){return i[0]>0&&i[1]>0}function YG(i,e,t){return t===void 0&&(t=[0,0]),t[0]=i[0]*e+.5|0,t[1]=i[1]*e+.5|0,t}function Sn(i,e){return Array.isArray(i)?i:(e===void 0?e=[i,i]:(e[0]=i,e[1]=i),e)}const ol=[0,0,0],to=5;class HG{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,vt(KL(this.resolutions_,(r,s)=>s-r,!0),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let r=0,s=this.resolutions_.length-1;r<s;++r)if(!t)t=this.resolutions_[r]/this.resolutions_[r+1];else if(this.resolutions_[r]/this.resolutions_[r+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,vt(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=e.extent;n!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=ms(n)),vt(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,vt(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:Vv,vt(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=n!==void 0?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((r,s)=>{const o=new zv(Math.min(0,r[0]),Math.max(r[0]-1,-1),Math.min(0,r[1]),Math.max(r[1]-1,-1));if(n){const a=this.getTileRangeForExtentAndZ(n,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):n&&this.calculateTileRanges_(n)}forEachTileCoord(e,t,n){const r=this.getTileRangeForExtentAndZ(e,t);for(let s=r.minX,o=r.maxX;s<=o;++s)for(let a=r.minY,l=r.maxY;a<=l;++a)n([t,s,a])}forEachTileCoordParentTileRange(e,t,n,r){let s,o,a,l=null,c=e[0]-1;for(this.zoomFactor_===2?(o=e[1],a=e[2]):l=this.getTileCoordExtent(e,r);c>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=sl(o,o,a,a,n)):s=this.getTileRangeForExtentAndZ(l,c,n),t(c,s))return!0;--c}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,n){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const s=e[1]*2,o=e[2]*2;return sl(s,s+1,o,o+1,t)}const r=this.getTileCoordExtent(e,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,n){if(t>this.maxZoom||t<this.minZoom)return null;const r=e[0],s=e[1],o=e[2];if(t===r)return sl(s,o,s,o,n);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,t-r),c=Math.floor(s*l),u=Math.floor(o*l);if(t<r)return sl(c,c,u,u,n);const h=Math.floor(l*(s+1))-1,d=Math.floor(l*(o+1))-1;return sl(c,h,u,d,n)}const a=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,t,n)}getTileRangeForExtentAndZ(e,t,n){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,ol);const r=ol[1],s=ol[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,ol);const o=ol[1],a=ol[2];return sl(r,o,s,a,n)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),n=this.getResolution(e[0]),r=Sn(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*r[0]*n,t[1]-(e[2]+.5)*r[1]*n]}getTileCoordExtent(e,t){const n=this.getOrigin(e[0]),r=this.getResolution(e[0]),s=Sn(this.getTileSize(e[0]),this.tmpSize_),o=n[0]+e[1]*s[0]*r,a=n[1]-(e[2]+1)*s[1]*r,l=o+s[0]*r,c=a+s[1]*r;return us(o,a,l,c,t)}getTileCoordForCoordAndResolution(e,t,n){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,n)}getTileCoordForXYAndResolution_(e,t,n,r,s){const o=this.getZForResolution(n),a=n/this.getResolution(o),l=this.getOrigin(o),c=Sn(this.getTileSize(o),this.tmpSize_);let u=a*(e-l[0])/n/c[0],h=a*(l[1]-t)/n/c[1];return r?(u=po(u,to)-1,h=po(h,to)-1):(u=Sl(u,to),h=Sl(h,to)),iC(o,u,h,s)}getTileCoordForXYAndZ_(e,t,n,r,s){const o=this.getOrigin(n),a=this.getResolution(n),l=Sn(this.getTileSize(n),this.tmpSize_);let c=(e-o[0])/a/l[0],u=(o[1]-t)/a/l[1];return r?(c=po(c,to)-1,u=po(u,to)-1):(c=Sl(c,to),u=Sl(u,to)),iC(n,c,u,s)}getTileCoordForCoordAndZ(e,t,n){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,n)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const n=Vg(this.resolutions_,e,t||0);return mi(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return W1(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,n=new Array(t);for(let r=this.minZoom;r<t;++r)n[r]=this.getTileRangeForExtentAndZ(e,r);this.fullTileRanges_=n}}const Gc=HG;class qG extends Gc{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}const H1=qG;function q1(i){let e=i.getDefaultTileGrid();return e||(e=KG(i),i.setDefaultTileGrid(e)),e}function XG(i,e,t){const n=e[0],r=i.getTileCoordCenter(e),s=Uh(t);if(!Yg(s,r)){const o=Rt(s),a=Math.ceil((s[0]-r[0])/o);return r[0]+=o*a,i.getTileCoordForCoordAndZ(r,n)}return e}function ZG(i,e,t,n){n=n!==void 0?n:"top-left";const r=X1(i,e,t);return new Gc({extent:i,origin:dG(i,n),resolutions:r,tileSize:t})}function Jg(i){const e=i||{},t=e.extent||Re("EPSG:3857").getExtent(),n={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:X1(t,e.maxZoom,e.tileSize,e.maxResolution)};return new Gc(n)}function X1(i,e,t,n){e=e!==void 0?e:z1,t=Sn(t!==void 0?t:Vv);const r=fn(i),s=Rt(i);n=n>0?n:Math.max(s/t[0],r/t[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=n/Math.pow(2,l);return a}function KG(i,e,t,n){const r=Uh(i);return ZG(r,e,t,n)}function Uh(i){i=Re(i);let e=i.getExtent();if(!e){const t=180*Ga.degrees/i.getMetersPerUnit();e=us(-t,-t,t,t)}return e}class JG extends jv{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&Sn(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new Bv(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const n=this.getTileCacheForProjection(e);n&&n.expireCache(t)}forEachLoadedTile(e,t,n,r){const s=this.getTileCacheForProjection(e);if(!s)return!1;let o=!0,a,l,c;for(let u=n.minX;u<=n.maxX;++u)for(let h=n.minY;h<=n.maxY;++h)l=Lc(t,u,h),c=!1,s.containsKey(l)&&(a=s.get(l),c=a.getState()===ge.LOADED,c&&(c=r(a)!==!1)),c||(o=!1);return o}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,n,r,s){return We()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:q1(e)}getTileCacheForProjection(e){const t=this.getProjection();return vt(t===null||$r(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),s=this.getTilePixelRatio(t),o=Sn(r.getTileSize(e),this.tmpSize);return s==1?o:YG(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const n=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=XG(n,e,t)),BG(e,n)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const n=this.getTileCacheForProjection(t);e>n.highWaterMark&&(n.highWaterMark=e)}useTile(e,t,n,r){}}class QG extends fr{constructor(e,t){super(e),this.tile=t}}function $G(i,e){const t=/\{z\}/g,n=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return i.replace(t,o[0].toString()).replace(n,o[1].toString()).replace(r,o[2].toString()).replace(s,function(){const c=o[0],u=e.getFullTileRange(c);if(!u)throw new Error("The {-y} placeholder requires a tile grid with extent");return(u.getHeight()-o[2]-1).toString()})}}function Z1(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=$G(i[r],e);return um(n)}function um(i){return i.length===1?i[0]:function(e,t,n){if(!e)return;const r=j1(e),s=xa(r,i.length);return i[s](e,t,n)}}function Yv(i){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(i);if(t){const n=t[1].charCodeAt(0),r=t[2].charCodeAt(0);let s;for(s=n;s<=r;++s)e.push(i.replace(t[0],String.fromCharCode(s)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(i),t){const n=parseInt(t[2],10);for(let r=parseInt(t[1],10);r<=n;r++)e.push(i.replace(t[0],r.toString()));return e}return e.push(i),e}class Qg extends JG{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Qg.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,n=ke(t),r=t.getState();let s;r==ge.LOADING?(this.tileLoadingKeys_[n]=!0,s=U0.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==ge.ERROR?U0.TILELOADERROR:r==ge.LOADED?U0.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new QG(s,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=Yv(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Z1(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,n){}useTile(e,t,n){const r=Lc(e,t,n);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}class $g extends Qg{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:eO,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:b1,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const n=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==n?t:{});for(const r in this.tileCacheForProjection){const s=this.tileCacheForProjection[r];s.expireCache(s==n?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!$r(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!$r(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||$r(t,e)))return this.tileGrid;const n=ke(e);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=q1(e)),this.tileGridForProjection[n]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||$r(t,e))return this.tileCache;const n=ke(e);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new Bv(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(e,t,n,r,s,o){const a=[e,t,n],l=this.getTileCoordForTileUrlFunction(a,s),c=l?this.tileUrlFunction(l,r,s):void 0,u=new this.tileClass(a,c!==void 0?ge.IDLE:ge.EMPTY,c!==void 0?c:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(ze.CHANGE,this.handleTileChange.bind(this)),u}getTile(e,t,n,r,s){const o=this.getProjection();if(!o||!s||$r(o,s))return this.getTileInternal(e,t,n,r,o||s);const a=this.getTileCacheForProjection(s),l=[e,t,n];let c;const u=U1(l);a.containsKey(u)&&(c=a.get(u));const h=this.getKey();if(c&&c.key==h)return c;const d=this.getTileGridForProjection(o),f=this.getTileGridForProjection(s),g=this.getTileCoordForTileUrlFunction(l,s),p=new cm(o,d,s,f,l,g,this.getTilePixelRatio(r),this.getGutter(),(m,v,y,A)=>this.getTileInternal(m,v,y,A,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return p.key=h,c?(p.interimTile=c,p.refreshInterimChain(),a.replace(u,p)):a.set(u,p),p}getTileInternal(e,t,n,r,s){let o=null;const a=Lc(e,t,n),l=this.getKey();if(!this.tileCache.containsKey(a))o=this.createTile_(e,t,n,r,s,l),this.tileCache.set(a,o);else if(o=this.tileCache.get(a),o.key!=l){const c=o;o=this.createTile_(e,t,n,r,s,l),c.getState()==ge.IDLE?o.interimTile=c.interimTile:o.interimTile=c,o.refreshInterimChain(),this.tileCache.replace(a,o)}return o}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const n=Re(e);if(n){const r=ke(n);r in this.tileGridForProjection||(this.tileGridForProjection[r]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function eO(i,e){i.getImage().src=e}class tO extends $g{constructor(e){e=e||{};const t=e.projection!==void 0?e.projection:"EPSG:3857",n=e.tileGrid!==void 0?e.tileGrid:Jg({extent:Uh(t),maxResolution:e.maxResolution,maxZoom:e.maxZoom,minZoom:e.minZoom,tileSize:e.tileSize});super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:e.opaque,projection:t,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0}getGutter(){return this.gutter_}}const iO='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class K1 extends tO{constructor(e){e=e||{};let t;e.attributions!==void 0?t=e.attributions:t=[iO];const n=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",r=e.url!==void 0?e.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:t,attributionsCollapsible:!1,cacheSize:e.cacheSize,crossOrigin:n,interpolate:e.interpolate,maxZoom:e.maxZoom!==void 0?e.maxZoom:19,opaque:e.opaque!==void 0?e.opaque:!0,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileLoadFunction:e.tileLoadFunction,transition:e.transition,url:r,wrapX:e.wrapX,zDirection:e.zDirection})}}const kt={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class J1 extends zr{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[kt.OPACITY]=e.opacity!==void 0?e.opacity:1,vt(typeof t[kt.OPACITY]=="number","Layer opacity must be a number"),t[kt.VISIBLE]=e.visible!==void 0?e.visible:!0,t[kt.Z_INDEX]=e.zIndex,t[kt.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[kt.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[kt.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[kt.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},n=this.getZIndex();return t.opacity=mi(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=n===void 0&&!t.managed?1/0:n,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return We()}getLayerStatesArray(e){return We()}getExtent(){return this.get(kt.EXTENT)}getMaxResolution(){return this.get(kt.MAX_RESOLUTION)}getMinResolution(){return this.get(kt.MIN_RESOLUTION)}getMinZoom(){return this.get(kt.MIN_ZOOM)}getMaxZoom(){return this.get(kt.MAX_ZOOM)}getOpacity(){return this.get(kt.OPACITY)}getSourceState(){return We()}getVisible(){return this.get(kt.VISIBLE)}getZIndex(){return this.get(kt.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(kt.EXTENT,e)}setMaxResolution(e){this.set(kt.MAX_RESOLUTION,e)}setMinResolution(e){this.set(kt.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(kt.MAX_ZOOM,e)}setMinZoom(e){this.set(kt.MIN_ZOOM,e)}setOpacity(e){vt(typeof e=="number","Layer opacity must be a number"),this.set(kt.OPACITY,e)}setVisible(e){this.set(kt.VISIBLE,e)}setZIndex(e){this.set(kt.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const rs={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ai={ANIMATING:0,INTERACTING:1},$n={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function oC(i,e,t){return function(n,r,s,o,a){if(!n)return;if(!r&&!e)return n;const l=e?0:s[0]*r,c=e?0:s[1]*r,u=a?a[0]:0,h=a?a[1]:0;let d=i[0]+l/2+u,f=i[2]-l/2+u,g=i[1]+c/2+h,p=i[3]-c/2+h;d>f&&(d=(f+d)/2,f=d),g>p&&(g=(p+g)/2,p=g);let m=mi(n[0],d,f),v=mi(n[1],g,p);if(o&&t&&r){const y=30*r;m+=-y*Math.log(1+Math.max(0,d-n[0])/y)+y*Math.log(1+Math.max(0,n[0]-f)/y),v+=-y*Math.log(1+Math.max(0,g-n[1])/y)+y*Math.log(1+Math.max(0,n[1]-p)/y)}return[m,v]}}function nO(i){return i}function Hv(i,e,t,n){const r=Rt(e)/t[0],s=fn(e)/t[1];return n?Math.min(i,Math.max(r,s)):Math.min(i,Math.min(r,s))}function qv(i,e,t){let n=Math.min(i,e);const r=50;return n*=Math.log(1+r*Math.max(0,i/e-1))/r+1,t&&(n=Math.max(n,t),n/=Math.log(1+r*Math.max(0,t/i-1))/r+1),mi(n,t/2,e*2)}function rO(i,e,t,n){return e=e!==void 0?e:!0,function(r,s,o,a){if(r!==void 0){const l=i[0],c=i[i.length-1],u=t?Hv(l,t,o,n):l;if(a)return e?qv(r,u,c):mi(r,c,u);const h=Math.min(u,r),d=Math.floor(Vg(i,h,s));return i[d]>u&&d<i.length-1?i[d+1]:i[d]}}}function sO(i,e,t,n,r,s){return n=n!==void 0?n:!0,t=t!==void 0?t:0,function(o,a,l,c){if(o!==void 0){const u=r?Hv(e,r,l,s):e;if(c)return n?qv(o,u,t):mi(o,t,u);const h=1e-9,d=Math.ceil(Math.log(e/u)/Math.log(i)-h),f=-a*(.5-h)+.5,g=Math.min(u,o),p=Math.floor(Math.log(e/g)/Math.log(i)+f),m=Math.max(d,p),v=e/Math.pow(i,m);return mi(v,t,u)}}}function aC(i,e,t,n,r){return t=t!==void 0?t:!0,function(s,o,a,l){if(s!==void 0){const c=n?Hv(i,n,a,r):i;return!t||!l?mi(s,e,c):qv(s,c,e)}}}function Xv(i){if(i!==void 0)return 0}function lC(i){if(i!==void 0)return i}function oO(i){const e=2*Math.PI/i;return function(t,n){if(n)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function aO(i){const e=i===void 0?xo(5):i;return function(t,n){return n||t===void 0?t:Math.abs(t)<=e?0:t}}const Q1=new Array(6);function Ir(){return[1,0,0,1,0,0]}function cC(i){return e0(i,1,0,0,1,0,0)}function Zv(i,e){const t=i[0],n=i[1],r=i[2],s=i[3],o=i[4],a=i[5],l=e[0],c=e[1],u=e[2],h=e[3],d=e[4],f=e[5];return i[0]=t*l+r*c,i[1]=n*l+s*c,i[2]=t*u+r*h,i[3]=n*u+s*h,i[4]=t*d+r*f+o,i[5]=n*d+s*f+a,i}function e0(i,e,t,n,r,s,o){return i[0]=e,i[1]=t,i[2]=n,i[3]=r,i[4]=s,i[5]=o,i}function lO(i,e){return i[0]=e[0],i[1]=e[1],i[2]=e[2],i[3]=e[3],i[4]=e[4],i[5]=e[5],i}function Gi(i,e){const t=e[0],n=e[1];return e[0]=i[0]*t+i[2]*n+i[4],e[1]=i[1]*t+i[3]*n+i[5],e}function B0(i,e,t){return Zv(i,e0(Q1,e,0,0,t,0,0))}function cO(i,e,t){return e0(i,e,0,0,t,0,0)}function uO(i,e,t){return Zv(i,e0(Q1,1,0,0,1,e,t))}function Ns(i,e,t,n,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return i[0]=n*c,i[1]=r*l,i[2]=-n*l,i[3]=r*c,i[4]=o*n*c-a*n*l+e,i[5]=o*r*l+a*r*c+t,i}function Kv(i,e){const t=hO(e);vt(t!==0,"Transformation matrix cannot be inverted");const n=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return i[0]=o/t,i[1]=-r/t,i[2]=-s/t,i[3]=n/t,i[4]=(s*l-o*a)/t,i[5]=-(n*l-r*a)/t,i}function hO(i){return i[0]*i[3]-i[1]*i[2]}let uC;function $1(i){const e="matrix("+i.join(", ")+")";if(xv)return e;const t=uC||(uC=document.createElement("div"));return t.style.transform=e,t.style.transform}function Po(i,e,t,n,r,s){s=s||[];let o=0;for(let a=e;a<t;a+=n){const l=i[a],c=i[a+1];s[o++]=r[0]*l+r[2]*c+r[4],s[o++]=r[1]*l+r[3]*c+r[5]}return s&&s.length!=o&&(s.length=o),s}function Jv(i,e,t,n,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let h=0;for(let d=e;d<t;d+=n){const f=i[d]-c,g=i[d+1]-u;o[h++]=c+f*a-g*l,o[h++]=u+f*l+g*a;for(let p=d+2;p<d+n;++p)o[h++]=i[p]}return o&&o.length!=h&&(o.length=h),o}function dO(i,e,t,n,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<t;h+=n){const d=i[h]-l,f=i[h+1]-c;a[u++]=l+r*d,a[u++]=c+s*f;for(let g=h+2;g<h+n;++g)a[u++]=i[g]}return a&&a.length!=u&&(a.length=u),a}function fO(i,e,t,n,r,s,o){o=o||[];let a=0;for(let l=e;l<t;l+=n){o[a++]=i[l]+r,o[a++]=i[l+1]+s;for(let c=l+2;c<l+n;++c)o[a++]=i[c]}return o&&o.length!=a&&(o.length=a),o}const hC=Ir();class ew extends zr{constructor(){super(),this.extent_=Yn(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=m1((e,t,n)=>{if(!n)return this.getSimplifiedGeometry(t);const r=this.clone();return r.applyTransform(n),r.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return We()}closestPointXY(e,t,n,r){return We()}containsXY(e,t){const n=this.getClosestPoint([e,t]);return n[0]===e&&n[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return We()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Rc(t),this.extentRevision_=this.getRevision()}return fG(this.extent_,e)}rotate(e,t){We()}scale(e,t,n){We()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return We()}getType(){return We()}applyTransform(e){We()}intersectsExtent(e){return We()}translate(e,t){We()}transform(e,t){const n=Re(e),r=n.getUnits()=="tile-pixels"?function(s,o,a){const l=n.getExtent(),c=n.getWorldExtent(),u=fn(c)/fn(l);return Ns(hC,c[0],c[3],u,-u,0,0,0),Po(s,0,s.length,a,hC,o),Da(n,t)(s,o,a)}:Da(n,t);return this.applyTransform(r),this}}class Ho extends ew{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return Rv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return We()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=xf(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){We()}setLayout(e,t,n){let r;if(e)r=xf(e);else{for(let s=0;s<n;++s){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}r=t.length,e=Ja(r)}this.layout=e,this.stride=r}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();Jv(n,0,n.length,r,e,t,n),this.changed()}}scale(e,t,n){t===void 0&&(t=e),n||(n=hs(this.getExtent()));const r=this.getFlatCoordinates();if(r){const s=this.getStride();dO(r,0,r.length,s,e,t,n,r),this.changed()}}translate(e,t){const n=this.getFlatCoordinates();if(n){const r=this.getStride();fO(n,0,n.length,r,e,t,n),this.changed()}}}function Ja(i){let e;return i==2?e="XY":i==3?e="XYZ":i==4&&(e="XYZM"),e}function xf(i){let e;return i=="XY"?e=2:i=="XYZ"||i=="XYM"?e=3:i=="XYZM"&&(e=4),e}function gO(i,e,t){const n=i.getFlatCoordinates();if(!n)return null;const r=i.getStride();return Po(n,0,n.length,r,e,t)}function dC(i,e,t,n,r,s,o){const a=i[e],l=i[e+1],c=i[t]-a,u=i[t+1]-l;let h;if(c===0&&u===0)h=e;else{const d=((r-a)*c+(s-l)*u)/(c*c+u*u);if(d>1)h=t;else if(d>0){for(let f=0;f<n;++f)o[f]=rr(i[e+f],i[t+f],d);o.length=n;return}else h=e}for(let d=0;d<n;++d)o[d]=i[h+d];o.length=n}function Qv(i,e,t,n,r){let s=i[e],o=i[e+1];for(e+=n;e<t;e+=n){const a=i[e],l=i[e+1],c=Rs(s,o,a,l);c>r&&(r=c),s=a,o=l}return r}function $v(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=Qv(i,e,a,n,r),e=a}return r}function pO(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];r=$v(i,e,a,n,r),e=a[a.length-1]}return r}function ey(i,e,t,n,r,s,o,a,l,c,u){if(e==t)return c;let h,d;if(r===0){if(d=Rs(o,a,i[e],i[e+1]),d<c){for(h=0;h<n;++h)l[h]=i[e+h];return l.length=n,d}return c}u=u||[NaN,NaN];let f=e+n;for(;f<t;)if(dC(i,f-n,f,n,o,a,u),d=Rs(o,a,u[0],u[1]),d<c){for(c=d,h=0;h<n;++h)l[h]=u[h];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(d)-Math.sqrt(c))/r|0,1);if(s&&(dC(i,t-n,e,n,o,a,u),d=Rs(o,a,u[0],u[1]),d<c)){for(c=d,h=0;h<n;++h)l[h]=u[h];l.length=n}return c}function ty(i,e,t,n,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];c=ey(i,e,f,n,r,s,o,a,l,c,u),e=f}return c}function mO(i,e,t,n,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,d=t.length;h<d;++h){const f=t[h];c=ty(i,e,f,n,r,s,o,a,l,c,u),e=f[f.length-1]}return c}function tw(i,e,t,n){for(let r=0,s=t.length;r<s;++r)i[e++]=t[r];return e}function t0(i,e,t,n){for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0;a<n;++a)i[e++]=o[a]}return e}function Bh(i,e,t,n,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t0(i,e,t[o],n);r[s++]=l,e=l}return r.length=s,r}function iw(i,e,t,n,r){r=r||[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=Bh(i,e,t[o],n,r[s]);l.length===0&&(l[0]=e),r[s++]=l,e=l[l.length-1]}return r.length=s,r}function i0(i,e,t,n,r,s,o){const a=(t-e)/n;if(a<3){for(;e<t;e+=n)s[o++]=i[e],s[o++]=i[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,t-n];let u=0;for(;c.length>0;){const h=c.pop(),d=c.pop();let f=0;const g=i[d],p=i[d+1],m=i[h],v=i[h+1];for(let y=d+n;y<h;y+=n){const A=i[y],_=i[y+1],C=bG(A,_,g,p,m,v);C>f&&(u=y,f=C)}f>r&&(l[(u-e)/n]=1,d+n<u&&c.push(d,u),u+n<h&&c.push(u,h))}for(let h=0;h<a;++h)l[h]&&(s[o++]=i[e+h*n],s[o++]=i[e+h*n+1]);return o}function nw(i,e,t,n,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=i0(i,e,u,n,r,s,o),a.push(o),e=u}return o}function fa(i,e){return e*Math.round(i/e)}function vO(i,e,t,n,r,s,o){if(e==t)return o;let a=fa(i[e],r),l=fa(i[e+1],r);e+=n,s[o++]=a,s[o++]=l;let c,u;do if(c=fa(i[e],r),u=fa(i[e+1],r),e+=n,e==t)return s[o++]=c,s[o++]=u,o;while(c==a&&u==l);for(;e<t;){const h=fa(i[e],r),d=fa(i[e+1],r);if(e+=n,h==c&&d==u)continue;const f=c-a,g=u-l,p=h-a,m=d-l;if(f*m==g*p&&(f<0&&p<f||f==p||f>0&&p>f)&&(g<0&&m<g||g==m||g>0&&m>g)){c=h,u=d;continue}s[o++]=c,s[o++]=u,a=c,l=u,c=h,u=d}return s[o++]=c,s[o++]=u,o}function iy(i,e,t,n,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l];o=vO(i,e,u,n,r,s,o),a.push(o),e=u}return o}function yO(i,e,t,n,r,s,o,a){for(let l=0,c=t.length;l<c;++l){const u=t[l],h=[];o=iy(i,e,u,n,r,s,o,h),a.push(h),e=u[u.length-1]}return o}function vo(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=e;o<t;o+=n)r[s++]=i.slice(o,o+n);return r.length=s,r}function rh(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=vo(i,e,l,n,r[s]),e=l}return r.length=s,r}function hm(i,e,t,n,r){r=r!==void 0?r:[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o];r[s++]=l.length===1&&l[0]===e?[]:rh(i,e,l,n,r[s]),e=l[l.length-1]}return r.length=s,r}function rw(i,e,t,n){let r=0,s=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];r+=o*a-s*l,s=a,o=l}return r/2}function sw(i,e,t,n){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=rw(i,e,a,n),e=a}return r}function AO(i,e,t,n){let r=0;for(let s=0,o=t.length;s<o;++s){const a=t[s];r+=sw(i,e,a,n),e=a[a.length-1]}return r}class fc extends Ho{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new fc(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,n,r){return r<Ka(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ey(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,n,r))}getArea(){return rw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return vo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=i0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new fc(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=t0(this.flatCoordinates,0,e,this.stride),this.changed()}}let Ki=class ow extends Ho{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new ow(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){const s=this.flatCoordinates,o=Rs(e,t,s[0],s[1]);if(o<r){const a=this.stride;for(let l=0;l<a;++l)n[l]=s[l];return n.length=a,o}return r}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return Mu(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return Mv(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=tw(this.flatCoordinates,0,e,this.stride),this.changed()}};function ny(i,e,t,n,r,s,o){let a,l,c,u,h,d,f;const g=r[s+1],p=[];for(let y=0,A=t.length;y<A;++y){const _=t[y];for(u=i[_-n],d=i[_-n+1],a=e;a<_;a+=n)h=i[a],f=i[a+1],(g<=d&&f<=g||d<=g&&g<=f)&&(c=(g-d)/(f-d)*(h-u)+u,p.push(c)),u=h,d=f}let m=NaN,v=-1/0;for(p.sort(Oo),u=p[0],a=1,l=p.length;a<l;++a){h=p[a];const y=Math.abs(h-u);y>v&&(c=(u+h)/2,Wv(i,e,t,n,c,g)&&(m=c,v=y)),u=h}return isNaN(m)&&(m=r[s]),o?(o.push(m,g,v),o):[m,g,v]}function aw(i,e,t,n,r){let s=[];for(let o=0,a=t.length;o<a;++o){const l=t[o];s=ny(i,e,l,n,r,2*o,s),e=l[l.length-1]}return s}function _O(i,e,t,n){for(;e<t-n;){for(let r=0;r<n;++r){const s=i[e+r];i[e+r]=i[t-n+r],i[t-n+r]=s}e+=n,t-=n}}function ry(i,e,t,n){let r=0,s=i[t-n],o=i[t-n+1];for(;e<t;e+=n){const a=i[e],l=i[e+1];r+=(a-s)*(l+o),s=a,o=l}return r===0?void 0:r>0}function sy(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=ry(i,e,a,n);if(s===0){if(r&&l||!r&&!l)return!1}else if(r&&!l||!r&&l)return!1;e=a}return!0}function lw(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s){const a=t[s];if(!sy(i,e,a,n,r))return!1;a.length&&(e=a[a.length-1])}return!0}function Pf(i,e,t,n,r){r=r!==void 0?r:!1;for(let s=0,o=t.length;s<o;++s){const a=t[s],l=ry(i,e,a,n);(s===0?r&&l||!r&&!l:r&&!l||!r&&l)&&_O(i,e,a,n),e=a}return e}function dm(i,e,t,n,r){for(let s=0,o=t.length;s<o;++s)e=Pf(i,e,t[s],n,r);return e}function cw(i,e){const t=[];let n=0,r=0,s;for(let o=0,a=e.length;o<a;++o){const l=e[o],c=ry(i,n,l,2);if(s===void 0&&(s=c),c===s)t.push(e.slice(r,o+1));else{if(t.length===0)continue;t[t.length-1].push(e[r])}r=o+1,n=l}return t}class wi extends Ho{constructor(e,t,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&n?(this.setFlatCoordinates(t,e),this.ends_=n):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?bt(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new wi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<Ka(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($v(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ty(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return Wv(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return sw(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),Pf(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,rh(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=hs(this.getExtent());this.flatInteriorPoint_=ny(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Ki(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new fc(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,n=this.ends_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],c=new fc(t.slice(s,l),e);r.push(c),s=l}return r}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;sy(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=Pf(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=iy(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,n),new wi(t,"XY",n)}getType(){return"Polygon"}intersectsExtent(e){return Y1(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Bh(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function fm(i){if(Tc(i))throw new Error("Cannot create polygon from empty extent");const e=i[0],t=i[1],n=i[2],r=i[3],s=[e,t,e,r,n,r,n,t,e,t];return new wi(s,"XY",[s.length])}const j0=0;class Rr extends zr{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=Nv(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&D1(),e.center&&(e.center=di(e.center,this.projection_)),e.extent&&(e.extent=mo(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const a in $n)delete t[a];this.setProperties(t,!0);const n=IO(e);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=n.minZoom;const r=CO(e),s=n.constraint,o=EO(e);this.constraints_={center:r,resolution:s,rotation:o},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const n=this.getCenterInternal();if(n){const r=e||[0,0,0,0];t=t||[0,0,0,0];const s=this.getResolution(),o=s/2*(r[3]-t[3]+t[1]-r[1]),a=s/2*(r[0]-t[0]+t[2]-r[2]);this.setCenterInternal([n[0]+o,n[1]-a])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let n=0;n<t.length;++n){let r=arguments[n];r.center&&(r=Object.assign({},r),r.center=di(r.center,this.getProjection())),r.anchor&&(r=Object.assign({},r),r.anchor=di(r.anchor,this.getProjection())),t[n]=r}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,n;t>1&&typeof arguments[t-1]=="function"&&(n=arguments[t-1],--t);let r=0;for(;r<t&&!this.isDef();++r){const u=arguments[r];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(r===t){n&&hd(n,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const c=[];for(;r<t;++r){const u=arguments[r],h={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||QL,callback:n};if(u.center&&(h.sourceCenter=o,h.targetCenter=u.center.slice(),o=h.targetCenter),u.zoom!==void 0?(h.sourceResolution=a,h.targetResolution=this.getResolutionForZoom(u.zoom),a=h.targetResolution):u.resolution&&(h.sourceResolution=a,h.targetResolution=u.resolution,a=h.targetResolution),u.rotation!==void 0){h.sourceRotation=l;const d=xa(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;h.targetRotation=l+d,l=h.targetRotation}wO(h)?h.complete=!0:s+=h.duration,c.push(h)}this.animations_.push(c),this.setHint(ai.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ai.ANIMATING]>0}getInteracting(){return this.hints_[ai.INTERACTING]>0}cancelAnimations(){this.setHint(ai.ANIMATING,-this.hints_[ai.ANIMATING]);let e;for(let t=0,n=this.animations_.length;t<n;++t){const r=this.animations_[t];if(r[0].callback&&hd(r[0].callback,!1),!e)for(let s=0,o=r.length;s<o;++s){const a=r[s];if(!a.complete){e=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let n=this.animations_.length-1;n>=0;--n){const r=this.animations_[n];let s=!0;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l.complete)continue;const c=e-l.start;let u=l.duration>0?c/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const h=l.easing(u);if(l.sourceCenter){const d=l.sourceCenter[0],f=l.sourceCenter[1],g=l.targetCenter[0],p=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=d+h*(g-d),v=f+h*(p-f);this.targetCenter_=[m,v]}if(l.sourceResolution&&l.targetResolution){const d=h===1?l.targetResolution:l.sourceResolution+h*(l.targetResolution-l.sourceResolution);if(l.anchor){const f=this.getViewportSize_(this.getRotation()),g=this.constraints_.resolution(d,0,f,!0);this.targetCenter_=this.calculateCenterZoom(g,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=d,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const d=h===1?xa(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+h*(l.targetRotation-l.sourceRotation);if(l.anchor){const f=this.constraints_.rotation(d,!0);this.targetCenter_=this.calculateCenterRotate(f,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=d}if(this.applyTargetState_(!0),t=!0,!l.complete)break}if(s){this.animations_[n]=null,this.setHint(ai.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=r[0].callback;o&&hd(o,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let n;const r=this.getCenterInternal();return r!==void 0&&(n=[r[0]-t[0],r[1]-t[1]],Ov(n,e-this.getRotation()),xG(n,t)),n}calculateCenterZoom(e,t){let n;const r=this.getCenterInternal(),s=this.getResolution();if(r!==void 0&&s!==void 0){const o=t[0]-e*(t[0]-r[0])/s,a=t[1]-e*(t[1]-r[1])/s;n=[o,a]}return n}getViewportSize_(e){const t=this.viewportSize_;if(e){const n=t[0],r=t[1];return[Math.abs(n*Math.cos(e))+Math.abs(r*Math.sin(e)),Math.abs(n*Math.sin(e))+Math.abs(r*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&dc(e,this.getProjection())}getCenterInternal(){return this.get($n.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return Uv(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();vt(t,"The view center is not defined");const n=this.getResolution();vt(n!==void 0,"The view resolution is not defined");const r=this.getRotation();return vt(r!==void 0,"The view rotation is not defined"),ih(t,n,r,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get($n.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(mo(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const n=Rt(e)/t[0],r=fn(e)/t[1];return Math.max(n,r)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,r=Math.log(t/n)/Math.log(e);return function(s){return t/Math.pow(e,s*r)}}getRotation(){return this.get($n.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),n=this.getConstrainedResolution(this.maxResolution_),r=this.minResolution_,s=Math.log(n/r)/t;return function(o){return Math.log(n/o)/t/s}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const n=this.padding_;return n&&(t=[t[0]-n[1]-n[3],t[1]-n[0]-n[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),n=this.getRotation();let r=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();r=z0(r,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],t,n)}return{center:r.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,n,r;if(this.resolutions_){const s=Vg(this.resolutions_,e,1);t=s,n=this.resolutions_[s],s==this.resolutions_.length-1?r=2:r=n/this.resolutions_[s+1]}else n=this.maxResolution_,r=this.zoomFactor_;return t+Math.log(n/e)/Math.log(r)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=mi(Math.floor(e),0,this.resolutions_.length-2),n=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(n,mi(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let n;if(vt(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){vt(!Tc(e),"Cannot fit empty extent provided as `geometry`");const r=mo(e,this.getProjection());n=fm(r)}else if(e.getType()==="Circle"){const r=mo(e.getExtent(),this.getProjection());n=fm(r),n.rotate(this.getRotation(),hs(r))}else n=e;this.fitInternal(n,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),n=Math.cos(t),r=Math.sin(-t),s=e.getFlatCoordinates(),o=e.getStride();let a=1/0,l=1/0,c=-1/0,u=-1/0;for(let h=0,d=s.length;h<d;h+=o){const f=s[h]*n-s[h+1]*r,g=s[h]*r+s[h+1]*n;a=Math.min(a,f),l=Math.min(l,g),c=Math.max(c,f),u=Math.max(u,g)}return[a,l,c,u]}fitInternal(e,t){t=t||{};let n=t.size;n||(n=this.getViewportSizeMinusPadding_());const r=t.padding!==void 0?t.padding:[0,0,0,0],s=t.nearest!==void 0?t.nearest:!1;let o;t.minResolution!==void 0?o=t.minResolution:t.maxZoom!==void 0?o=this.getResolutionForZoom(t.maxZoom):o=0;const a=this.rotatedExtentForGeometry(e);let l=this.getResolutionForExtentInternal(a,[n[0]-r[1]-r[3],n[1]-r[0]-r[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const c=this.getRotation(),u=Math.sin(c),h=Math.cos(c),d=hs(a);d[0]+=(r[1]-r[3])/2*l,d[1]+=(r[0]-r[2])/2*l;const f=d[0]*h-d[1]*u,g=d[1]*h+d[0]*u,p=this.getConstrainedCenter([f,g],l),m=t.callback?t.callback:cc;t.duration!==void 0?this.animateInternal({resolution:l,center:p,duration:t.duration,easing:t.easing},m):(this.targetResolution_=l,this.targetCenter_=p,this.applyTargetState_(!1,!0),hd(m,!0))}centerOn(e,t,n){this.centerOnInternal(di(e,this.getProjection()),t,n)}centerOnInternal(e,t,n){this.setCenterInternal(z0(e,t,n,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,n,r){let s;const o=this.padding_;if(o&&e){const a=this.getViewportSizeMinusPadding_(-n),l=z0(e,r,[a[0]/2+o[3],a[1]/2+o[0]],t,n);s=[e[0]-l[0],e[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=dc(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&di(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*e,0,r,n);t&&(this.targetCenter_=this.calculateCenterZoom(s,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=di(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const n=this.getAnimating()||this.getInteracting(),r=this.constraints_.rotation(this.targetRotation_+e,n);t&&(this.targetCenter_=this.calculateCenterRotate(r,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&di(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const n=this.getAnimating()||this.getInteracting()||t,r=this.constraints_.rotation(this.targetRotation_,n),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,0,s,n),a=this.constraints_.center(this.targetCenter_,o,s,n,this.calculateCenterShift(this.targetCenter_,o,r,s));this.get($n.ROTATION)!==r&&this.set($n.ROTATION,r),this.get($n.RESOLUTION)!==o&&(this.set($n.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get($n.CENTER)||!Pr(this.get($n.CENTER),a))&&this.set($n.CENTER,a),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,n){e=e!==void 0?e:200;const r=t||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,r,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(e===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}n=n||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!Pr(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:e,easing:Mc,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ai.INTERACTING,1)}endInteraction(e,t,n){n=n&&di(n,this.getProjection()),this.endInteractionInternal(e,t,n)}endInteractionInternal(e,t,n){this.getInteracting()&&(this.setHint(ai.INTERACTING,-1),this.resolveConstraints(e,t,n))}getConstrainedCenter(e,t){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),n)}getConstrainedZoom(e,t){const n=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(n,t))}getConstrainedResolution(e,t){t=t||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,n)}}function hd(i,e){setTimeout(function(){i(e)},0)}function CO(i){if(i.extent!==void 0){const t=i.smoothExtentConstraint!==void 0?i.smoothExtentConstraint:!0;return oC(i.extent,i.constrainOnlyCenter,t)}const e=Nv(i.projection,"EPSG:3857");if(i.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,oC(t,!1,!1)}return nO}function IO(i){let e,t,n,o=i.minZoom!==void 0?i.minZoom:j0,a=i.maxZoom!==void 0?i.maxZoom:28;const l=i.zoomFactor!==void 0?i.zoomFactor:2,c=i.multiWorld!==void 0?i.multiWorld:!1,u=i.smoothResolutionConstraint!==void 0?i.smoothResolutionConstraint:!0,h=i.showFullExtent!==void 0?i.showFullExtent:!1,d=Nv(i.projection,"EPSG:3857"),f=d.getExtent();let g=i.constrainOnlyCenter,p=i.extent;if(!c&&!p&&d.isGlobal()&&(g=!1,p=f),i.resolutions!==void 0){const m=i.resolutions;t=m[o],n=m[a]!==void 0?m[a]:m[m.length-1],i.constrainResolution?e=rO(m,u,!g&&p,h):e=aC(t,n,u,!g&&p,h)}else{const v=(f?Math.max(Rt(f),fn(f)):360*Ga.degrees/d.getMetersPerUnit())/Vv/Math.pow(2,j0),y=v/Math.pow(2,28-j0);t=i.maxResolution,t!==void 0?o=0:t=v/Math.pow(l,o),n=i.minResolution,n===void 0&&(i.maxZoom!==void 0?i.maxResolution!==void 0?n=t/Math.pow(l,a):n=v/Math.pow(l,a):n=y),a=o+Math.floor(Math.log(t/n)/Math.log(l)),n=t/Math.pow(l,a-o),i.constrainResolution?e=sO(l,t,n,u,!g&&p,h):e=aC(t,n,u,!g&&p,h)}return{constraint:e,maxResolution:t,minResolution:n,minZoom:o,zoomFactor:l}}function EO(i){if(i.enableRotation!==void 0?i.enableRotation:!0){const t=i.constrainRotation;return t===void 0||t===!0?aO():t===!1?lC:typeof t=="number"?oO(t):lC}return Xv}function wO(i){return!(i.sourceCenter&&i.targetCenter&&!Pr(i.sourceCenter,i.targetCenter)||i.sourceResolution!==i.targetResolution||i.sourceRotation!==i.targetRotation)}function z0(i,e,t,n,r){const s=Math.cos(-r);let o=Math.sin(-r),a=i[0]*s-i[1]*o,l=i[1]*s+i[0]*o;a+=(e[0]/2-t[0])*n,l+=(t[1]-e[1]/2)*n,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}let n0=class extends J1{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(kt.SOURCE,this.handleSourcePropertyChange_);const n=e.source?e.source:null;this.setSource(n)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(kt.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(zt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=ht(e,ze.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const n=this.getMapInternal();!e&&n&&(e=n.getView()),e instanceof Rr?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&n&&(t.layerStatesArray=n.getLayerGroup().getLayerStatesArray());let r;t.layerStatesArray?r=t.layerStatesArray.find(o=>o.layer===this):r=this.getLayerState();const s=this.getExtent();return oy(r,t.viewState)&&(!s||Jt(s,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const n=this.getSource();if(n&&(t=n.getAttributions()),!t)return[];const r=e instanceof Rr?e.getViewStateAndExtent():e;let s=t(r);return Array.isArray(s)||(s=[s]),s}render(e,t){const n=this.getRenderer();return n.prepareFrame(e)?(this.rendered=!0,n.renderFrame(e,t)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(kt.MAP,e)}getMapInternal(){return this.get(kt.MAP)}setMap(e){this.mapPrecomposeKey_&&(zt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(zt(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=ht(e,rs.PRECOMPOSE,function(t){const r=t.frameState.layerStatesArray,s=this.getLayerState(!1);vt(!r.some(function(o){return o.layer===s.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),r.push(s)},this),this.mapRenderKey_=ht(this,ze.CHANGE,e.render,e),this.changed())}setSource(e){this.set(kt.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function oy(i,e){if(!i.visible)return!1;const t=e.resolution;if(t<i.minResolution||t>=i.maxResolution)return!1;const n=e.zoom;return n>i.minZoom&&n<=i.maxZoom}const yo={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class bO extends n0{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(yo.PRELOAD)}setPreload(e){this.set(yo.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(yo.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(yo.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class SO extends Nh{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return We()}getData(e){return null}prepareFrame(e){return We()}renderFrame(e,t){return We()}loadedTileCallback(e,t,n){e[t]||(e[t]={}),e[t][n.tileCoord.toString()]=n}createLoadedTileFinder(e,t,n){return(r,s)=>{const o=this.loadedTileCallback.bind(this,n,r);return e.forEachLoadedTile(t,r,s,o)}}forEachFeatureAtCoordinate(e,t,n,r,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===Ye.LOADED||t.getState()===Ye.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=Ye.LOADED&&t!=Ye.ERROR&&e.addEventListener(ze.CHANGE,this.boundHandleImageChange_),t==Ye.IDLE&&(e.load(),t=e.getState()),t==Ye.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}class uw extends fr{constructor(e,t,n,r){super(e),this.inversePixelTransform=t,this.frameState=n,this.context=r}}const sh={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var Zi={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};Zi.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};Zi.max=Zi.whitepoint[2].D65;Zi.rgb=function(i,e){e=e||Zi.whitepoint[2].E;var t=i[0]/e[0],n=i[1]/e[1],r=i[2]/e[2],s,o,a;return s=t*3.240969941904521+n*-1.537383177570093+r*-.498610760293,o=t*-.96924363628087+n*1.87596750150772+r*.041555057407175,a=t*.055630079696993+n*-.20397695888897+r*1.056971514242878,s=s>.0031308?1.055*Math.pow(s,1/2.4)-.055:s=s*12.92,o=o>.0031308?1.055*Math.pow(o,1/2.4)-.055:o=o*12.92,a=a>.0031308?1.055*Math.pow(a,1/2.4)-.055:a=a*12.92,s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),a=Math.min(Math.max(0,a),1),[s*255,o*255,a*255]};sh.xyz=function(i,e){var t=i[0]/255,n=i[1]/255,r=i[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=t*.41239079926595+n*.35758433938387+r*.18048078840183,o=t*.21263900587151+n*.71516867876775+r*.072192315360733,a=t*.019330818715591+n*.11919477979462+r*.95053215224966;return e=e||Zi.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};const ay={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(i,e,t){var n,r,s,o,a,l,c,u,h,d,f,g,p;if(s=i[0],o=i[1],a=i[2],s===0)return[0,0,0];var m=.0011070564598794539;return e=e||"D65",t=t||2,h=Zi.whitepoint[t][e][0],d=Zi.whitepoint[t][e][1],f=Zi.whitepoint[t][e][2],g=4*h/(h+15*d+3*f),p=9*d/(h+15*d+3*f),n=o/(13*s)+g||0,r=a/(13*s)+p||0,c=s>8?d*Math.pow((s+16)/116,3):d*s*m,l=c*9*n/(4*r)||0,u=c*(12-3*n-20*r)/(4*r)||0,[l,c,u]}};Zi.luv=function(i,e,t){var n,r,s,o,a,l,c,u,h,d,f,g,p,m=.008856451679035631,v=903.2962962962961;e=e||"D65",t=t||2,h=Zi.whitepoint[t][e][0],d=Zi.whitepoint[t][e][1],f=Zi.whitepoint[t][e][2],g=4*h/(h+15*d+3*f),p=9*d/(h+15*d+3*f),l=i[0],c=i[1],u=i[2],n=4*l/(l+15*c+3*u)||0,r=9*c/(l+15*c+3*u)||0;var y=c/d;return s=y<=m?v*y:116*Math.pow(y,1/3)-16,o=13*s*(n-g),a=13*s*(r-p),[s,o,a]};var hw={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(i){var e=i[0],t=i[1],n=i[2],r,s,o;return o=n/360*2*Math.PI,r=t*Math.cos(o),s=t*Math.sin(o),[e,r,s]},xyz:function(i){return ay.xyz(hw.luv(i))}};ay.lchuv=function(i){var e=i[0],t=i[1],n=i[2],r=Math.sqrt(t*t+n*n),s=Math.atan2(n,t),o=s*360/2/Math.PI;return o<0&&(o+=360),[e,r,o]};Zi.lchuv=function(i){return ay.lchuv(Zi.luv(i))};const fC={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var gC={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function xO(i){var u,h;var e,t=[],n=1,r;if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(typeof i=="number")return{space:"rgb",values:[i>>>16,(i&65280)>>>8,i&255],alpha:1};if(i=String(i).toLowerCase(),fC[i])t=fC[i].slice(),r="rgb";else if(i==="transparent")n=0,r="rgb",t=[0,0,0];else if(i[0]==="#"){var s=i.slice(1),o=s.length,a=o<=4;n=1,a?(t=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],o===4&&(n=parseInt(s[3]+s[3],16)/255)):(t=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],o===8&&(n=parseInt(s[6]+s[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),r="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(i)){var l=e[1];r=l.replace(/a$/,"");var c=r==="cmyk"?4:r==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),r==="color"&&(r=t.shift()),t=t.map(function(d,f){if(d[d.length-1]==="%")return d=parseFloat(d)/100,f===3?d:r==="rgb"?d*255:r[0]==="h"||r[0]==="l"&&!f?d*100:r==="lab"?d*125:r==="lch"?f<2?d*150:d*360:r[0]==="o"&&!f?d:r==="oklab"?d*.4:r==="oklch"?f<2?d*.4:d*360:d;if(r[f]==="h"||f===2&&r[r.length-1]==="h"){if(gC[d]!==void 0)return gC[d];if(d.endsWith("deg"))return parseFloat(d);if(d.endsWith("turn"))return parseFloat(d)*360;if(d.endsWith("grad"))return parseFloat(d)*360/400;if(d.endsWith("rad"))return parseFloat(d)*180/Math.PI}return d==="none"?0:parseFloat(d)}),n=t.length>c?t.pop():1}else/[0-9](?:\s|\/|,)/.test(i)&&(t=i.match(/([0-9]+)/g).map(function(d){return parseFloat(d)}),r=((h=(u=i.match(/([a-z])/ig))==null?void 0:u.join(""))==null?void 0:h.toLowerCase())||"rgb");return{space:r,values:t,alpha:n}}const V0={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(i){var e=i[0]/360,t=i[1]/100,n=i[2]/100,r,s,o,a,l,c=0;if(t===0)return l=n*255,[l,l,l];for(s=n<.5?n*(1+t):n+t-n*t,r=2*n-s,a=[0,0,0];c<3;)o=e+1/3*-(c-1),o<0?o++:o>1&&o--,l=6*o<1?r+(s-r)*6*o:2*o<1?s:3*o<2?r+(s-r)*(2/3-o)*6:r,a[c++]=l*255;return a}};sh.hsl=function(i){var e=i[0]/255,t=i[1]/255,n=i[2]/255,r=Math.min(e,t,n),s=Math.max(e,t,n),o=s-r,a,l,c;return s===r?a=0:e===s?a=(t-n)/o:t===s?a=2+(n-e)/o:n===s&&(a=4+(e-t)/o),a=Math.min(a*60,360),a<0&&(a+=360),c=(r+s)/2,s===r?l=0:c<=.5?l=o/(s+r):l=o/(2-s-r),[a,l*100,c*100]};function PO(i){Array.isArray(i)&&i.raw&&(i=String.raw(...arguments)),i instanceof Number&&(i=+i);var e,t=xO(i);if(!t.space)return[];const n=t.space[0]==="h"?V0.min:sh.min,r=t.space[0]==="h"?V0.max:sh.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],n[0]),r[0]),e[1]=Math.min(Math.max(t.values[1],n[1]),r[1]),e[2]=Math.min(Math.max(t.values[2],n[2]),r[2]),t.space[0]==="h"&&(e=V0.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function dw(i){return typeof i=="string"?i:gw(i)}const MO=1024,Qc={};let W0=0;function RO(i){if(i.length===4)return i;const e=i.slice();return e[3]=1,e}function pC(i){const e=Zi.lchuv(sh.xyz(i));return e[3]=i[3],e}function TO(i){const e=Zi.rgb(hw.xyz(i));return e[3]=i[3],e}function ly(i){if(Qc.hasOwnProperty(i))return Qc[i];if(W0>=MO){let t=0;for(const n in Qc)t++&3||(delete Qc[n],--W0)}const e=PO(i);if(e.length!==4)throw new Error('Failed to parse "'+i+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+i+'" as color');return fw(e),Qc[i]=e,++W0,e}function oh(i){return Array.isArray(i)?i:ly(i)}function fw(i){return i[0]=mi(i[0]+.5|0,0,255),i[1]=mi(i[1]+.5|0,0,255),i[2]=mi(i[2]+.5|0,0,255),i[3]=mi(i[3],0,1),i}function gw(i){let e=i[0];e!=(e|0)&&(e=e+.5|0);let t=i[1];t!=(t|0)&&(t=t+.5|0);let n=i[2];n!=(n|0)&&(n=n+.5|0);const r=i[3]===void 0?1:Math.round(i[3]*100)/100;return"rgba("+e+","+t+","+n+","+r+")"}function LO(i){try{return ly(i),!0}catch{return!1}}const mC=[];let ml=null;function GO(){ml=yn(1,1,void 0,{willReadFrequently:!0})}class pw extends SO{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=Ir(),this.pixelTransform=Ir(),this.inversePixelTransform=Ir(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,n){ml||GO(),ml.clearRect(0,0,1,1);let r;try{ml.drawImage(e,t,n,1,1,0,0,1,1),r=ml.getImageData(0,0,1,1).data}catch{return ml=null,null}return r}getBackground(e){let n=this.getLayer().getBackground();return typeof n=="function"&&(n=n(e.viewState.resolution)),n||void 0}useContainer(e,t,n){const r=this.getLayer().getClassName();let s,o;if(e&&e.className===r&&(!n||e&&e.style.backgroundColor&&Hs(oh(e.style.backgroundColor),oh(n)))){const a=e.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&o.canvas.style.transform===t?(this.container=e,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=r;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=yn();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&n&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=n)}clipUnrotated(e,t,n){const r=ms(n),s=qg(n),o=Dh(n),a=Hg(n);Gi(t.coordinateToPixelTransform,r),Gi(t.coordinateToPixelTransform,s),Gi(t.coordinateToPixelTransform,o),Gi(t.coordinateToPixelTransform,a);const l=this.inversePixelTransform;Gi(l,r),Gi(l,s),Gi(l,o),Gi(l,a),e.save(),e.beginPath(),e.moveTo(Math.round(r[0]),Math.round(r[1])),e.lineTo(Math.round(s[0]),Math.round(s[1])),e.lineTo(Math.round(o[0]),Math.round(o[1])),e.lineTo(Math.round(a[0]),Math.round(a[1])),e.clip()}dispatchRenderEvent_(e,t,n){const r=this.getLayer();if(r.hasListener(e)){const s=new uw(e,this.inversePixelTransform,n,t);r.dispatchEvent(s)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(rs.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(rs.POSTRENDER,e,t)}getRenderTransform(e,t,n,r,s,o,a){const l=s/2,c=o/2,u=r/t,h=-u,d=-e[0]+a,f=-e[1];return Ns(this.tempTransform,l,c,u,h,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}class mw extends pw{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=Yn(),this.tmpTileRange_=new zv(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),n=e.getState(),r=t.getUseInterimTilesOnError();return n==ge.LOADED||n==ge.EMPTY||n==ge.ERROR&&!r}getTile(e,t,n,r){const s=r.pixelRatio,o=r.viewState.projection,a=this.getLayer();let c=a.getSource().getTile(e,t,n,s,o);return c.getState()==ge.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(c)||(c=c.getInterimTile()),c}getData(e){const t=this.frameState;if(!t)return null;const n=this.getLayer(),r=Gi(t.pixelToCoordinateTransform,e.slice()),s=n.getExtent();if(s&&!Yg(s,r))return null;const o=t.pixelRatio,a=t.viewState.projection,l=t.viewState,c=n.getRenderSource(),u=c.getTileGridForProjection(l.projection),h=c.getTilePixelRatio(t.pixelRatio);for(let d=u.getZForResolution(l.resolution);d>=u.getMinZoom();--d){const f=u.getTileCoordForCoordAndZ(r,d),g=c.getTile(d,f[1],f[2],o,a);if(!(g instanceof b1||g instanceof cm)||g instanceof cm&&g.getState()===ge.EMPTY)return null;if(g.getState()!==ge.LOADED)continue;const p=u.getOrigin(d),m=Sn(u.getTileSize(d)),v=u.getResolution(d),y=Math.floor(h*((r[0]-p[0])/v-f[1]*m[0])),A=Math.floor(h*((p[1]-r[1])/v-f[2]*m[1])),_=Math.round(h*c.getGutterForProjection(l.projection));return this.getImageData(g.getImage(),y+_,A+_)}return null}loadedTileCallback(e,t,n){return this.isDrawableTile(n)?super.loadedTileCallback(e,t,n):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const n=e.layerStatesArray[e.layerIndex],r=e.viewState,s=r.projection,o=r.resolution,a=r.center,l=r.rotation,c=e.pixelRatio,u=this.getLayer(),h=u.getSource(),d=h.getRevision(),f=h.getTileGridForProjection(s),g=f.getZForResolution(o,h.zDirection),p=f.getResolution(g);let m=e.extent;const v=e.viewState.resolution,y=h.getTilePixelRatio(c),A=Math.round(Rt(m)/v*c),_=Math.round(fn(m)/v*c),C=n.extent&&mo(n.extent);C&&(m=So(m,mo(n.extent)));const I=p*A/2/y,b=p*_/2/y,S=[a[0]-I,a[1]-b,a[0]+I,a[1]+b],R=f.getTileRangeForExtentAndZ(m,g),P={};P[g]={};const w=this.createLoadedTileFinder(h,s,P),x=this.tmpExtent,D=this.tmpTileRange_;this.newTiles_=!1;const k=l?sm(r.center,v,l,e.size):void 0;for(let Te=R.minX;Te<=R.maxX;++Te)for(let Ce=R.minY;Ce<=R.maxY;++Ce){if(l&&!f.tileCoordIntersectsViewport([g,Te,Ce],k))continue;const pe=this.getTile(g,Te,Ce,e);if(this.isDrawableTile(pe)){const oe=ke(this);if(pe.getState()==ge.LOADED){P[g][pe.tileCoord.toString()]=pe;let ne=pe.inTransition(oe);ne&&n.opacity!==1&&(pe.endTransition(oe),ne=!1),!this.newTiles_&&(ne||!this.renderedTiles.includes(pe))&&(this.newTiles_=!0)}if(pe.getAlpha(oe,e.time)===1)continue}const Ie=f.getTileCoordChildTileRange(pe.tileCoord,D,x);let z=!1;Ie&&(z=w(g+1,Ie)),z||f.forEachTileCoordParentTileRange(pe.tileCoord,w,D,x)}const O=p/o*c/y;Ns(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/c,1/c,l,-A/2,-_/2);const N=$1(this.pixelTransform);this.useContainer(t,N,this.getBackground(e));const B=this.context,V=B.canvas;Kv(this.inversePixelTransform,this.pixelTransform),Ns(this.tempTransform,A/2,_/2,O,O,0,-A/2,-_/2),V.width!=A||V.height!=_?(V.width=A,V.height=_):this.containerReused||B.clearRect(0,0,A,_),C&&this.clipUnrotated(B,e,C),h.getInterpolate()||(B.imageSmoothingEnabled=!1),this.preRender(B,e),this.renderedTiles.length=0;let se=Object.keys(P).map(Number);se.sort(Oo);let j,Ae,q;n.opacity===1&&(!this.containerReused||h.getOpaque(e.viewState.projection))?se=se.reverse():(j=[],Ae=[]);for(let Te=se.length-1;Te>=0;--Te){const Ce=se[Te],pe=h.getTilePixelSize(Ce,c,s),z=f.getResolution(Ce)/p,oe=pe[0]*z*O,ne=pe[1]*z*O,Y=f.getTileCoordForCoordAndZ(ms(S),Ce),Pe=f.getTileCoordExtent(Y),tt=Gi(this.tempTransform,[y*(Pe[0]-S[0])/p,y*(S[3]-Pe[3])/p]),E=y*h.getGutterForProjection(s),M=P[Ce];for(const G in M){const W=M[G],X=W.tileCoord,K=Y[1]-X[1],ie=Math.round(tt[0]-(K-1)*oe),$=Y[2]-X[2],Q=Math.round(tt[1]-($-1)*ne),Z=Math.round(tt[0]-K*oe),T=Math.round(tt[1]-$*ne),F=ie-Z,U=Q-T,H=g===Ce,te=H&&W.getAlpha(ke(this),e.time)!==1;let ee=!1;if(!te)if(j){q=[Z,T,Z+F,T,Z+F,T+U,Z,T+U];for(let ue=0,Me=j.length;ue<Me;++ue)if(g!==Ce&&Ce<Ae[ue]){const be=j[ue];Jt([Z,T,Z+F,T+U],[be[0],be[3],be[4],be[7]])&&(ee||(B.save(),ee=!0),B.beginPath(),B.moveTo(q[0],q[1]),B.lineTo(q[2],q[3]),B.lineTo(q[4],q[5]),B.lineTo(q[6],q[7]),B.moveTo(be[6],be[7]),B.lineTo(be[4],be[5]),B.lineTo(be[2],be[3]),B.lineTo(be[0],be[1]),B.clip())}j.push(q),Ae.push(Ce)}else B.clearRect(Z,T,F,U);this.drawTileImage(W,e,Z,T,F,U,E,H),j&&!te?(ee&&B.restore(),this.renderedTiles.unshift(W)):this.renderedTiles.push(W),this.updateUsedTiles(e.usedTiles,h,W)}}return this.renderedRevision=d,this.renderedResolution=p,this.extentChanged=!this.renderedExtent_||!No(this.renderedExtent_,S),this.renderedExtent_=S,this.renderedPixelRatio=c,this.renderedProjection=s,this.manageTilePyramid(e,h,f,c,s,m,g,u.getPreload()),this.scheduleExpireCache(e,h),this.postRender(B,e),n.extent&&B.restore(),B.imageSmoothingEnabled=!0,N!==V.style.transform&&(V.style.transform=N),this.container}drawTileImage(e,t,n,r,s,o,a,l){const c=this.getTileImage(e);if(!c)return;const u=ke(this),h=t.layerStatesArray[t.layerIndex],d=h.opacity*(l?e.getAlpha(u,t.time):1),f=d!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=d),this.context.drawImage(c,a,a,c.width-2*a,c.height-2*a,n,r,s,o),f&&this.context.restore(),d!==h.opacity?t.animate=!0:l&&e.endTransition(u)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const n=(function(r,s,o){const a=ke(r);a in o.usedTiles&&r.expireCache(o.viewState.projection,o.usedTiles[a])}).bind(null,t);e.postRenderFunctions.push(n)}}updateUsedTiles(e,t,n){const r=ke(t);r in e||(e[r]={}),e[r][n.getKey()]=!0}manageTilePyramid(e,t,n,r,s,o,a,l,c){const u=ke(t);u in e.wantedTiles||(e.wantedTiles[u]={});const h=e.wantedTiles[u],d=e.tileQueue,f=n.getMinZoom(),g=e.viewState.rotation,p=g?sm(e.viewState.center,e.viewState.resolution,g,e.size):void 0;let m=0,v,y,A,_,C,I;for(I=f;I<=a;++I)for(y=n.getTileRangeForExtentAndZ(o,I,y),A=n.getResolution(I),_=y.minX;_<=y.maxX;++_)for(C=y.minY;C<=y.maxY;++C)g&&!n.tileCoordIntersectsViewport([I,_,C],p)||(a-I<=l?(++m,v=t.getTile(I,_,C,r,s),v.getState()==ge.IDLE&&(h[v.getKey()]=!0,d.isKeyQueued(v.getKey())||d.enqueue([v,u,n.getTileCoordCenter(v.tileCoord),A])),c!==void 0&&c(v)):t.useTile(I,_,C,s));t.updateCacheSize(m,s)}}class Fa extends bO{constructor(e){super(e)}createRenderer(){return new mw(this)}}const Ii={ADD:"add",REMOVE:"remove"},vC={LENGTH:"length"};class dd extends fr{constructor(e,t,n){super(e),this.element=t,this.index=n}}class bi extends zr{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let n=0,r=this.array_.length;n<r;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,n=e.length;t<n;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)e(t[n],n,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(vC.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new dd(Ii.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let n=0,r=t.length;n<r;++n)if(t[n]===e)return this.removeAt(n)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new dd(Ii.REMOVE,t,e)),t}setAt(e,t){const n=this.getLength();if(e>=n){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const r=this.array_[e];this.array_[e]=t,this.dispatchEvent(new dd(Ii.REMOVE,r,e)),this.dispatchEvent(new dd(Ii.ADD,t,e))}updateLength_(){this.set(vC.LENGTH,this.array_.length)}assertUnique_(e,t){for(let n=0,r=this.array_.length;n<r;++n)if(this.array_[n]===e&&n!==t)throw new Error("Duplicate item added to a unique collection")}}class OO{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const n=this.cache_[t];!(e++&3)&&!n.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,n){const r=yC(e,t,n);return r in this.cache_?this.cache_[r]:null}set(e,t,n,r){const s=yC(e,t,n);this.cache_[s]=r,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function yC(i,e,t){const n=t?dw(t):"null";return e+":"+i+":"+n}const Mf=new OO;class DO extends Sv{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){We()}calculateMatrices2D(e){const t=e.viewState,n=e.coordinateToPixelTransform,r=e.pixelToCoordinateTransform;Ns(n,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),Kv(r,n)}forEachFeatureAtCoordinate(e,t,n,r,s,o,a,l){let c;const u=t.viewState;function h(_,C,I,b){return s.call(o,C,_?I:null,b)}const d=u.projection,f=Dv(e.slice(),d),g=[[0,0]];if(d.canWrapX()&&r){const _=d.getExtent(),C=Rt(_);g.push([-C,0],[C,0])}const p=t.layerStatesArray,m=p.length,v=[],y=[];for(let _=0;_<g.length;_++)for(let C=m-1;C>=0;--C){const I=p[C],b=I.layer;if(b.hasRenderer()&&oy(I,u)&&a.call(l,b)){const S=b.getRenderer(),R=b.getSource();if(S&&R){const P=R.getWrapX()?f:e,w=h.bind(null,I.managed);y[0]=P[0]+g[_][0],y[1]=P[1]+g[_][1],c=S.forEachFeatureAtCoordinate(y,t,n,w,v)}if(c)return c}}if(v.length===0)return;const A=1/v.length;return v.forEach((_,C)=>_.distanceSq+=C*A),v.sort((_,C)=>_.distanceSq-C.distanceSq),v.some(_=>c=_.callback(_.feature,_.layer,_.geometry)),c}hasFeatureAtCoordinate(e,t,n,r,s,o){return this.forEachFeatureAtCoordinate(e,t,n,r,Do,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(e){We()}flushDeclutterItems(e){}scheduleExpireIconCache(e){Mf.canExpireCache()&&e.postRenderFunctions.push(kO)}}function kO(i,e){Mf.expire()}const fd="ol-hidden",FO="ol-selectable",Oc="ol-unselectable",r0="ol-control",Rf="ol-collapsed",NO=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),AC=["style","variant","weight","size","lineHeight","family"],vw=function(i){const e=i.match(NO);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let n=0,r=AC.length;n<r;++n){const s=e[n+1];s!==void 0&&(t[AC[n]]=s)}return t.families=t.family.split(/,\s?/),t},yw="10px sans-serif",Un="#000",gc="round",Ts=[],Ls=0,pc="round",ah=10,lh="#000",ch="center",Tf="middle",_a=[0,0,0,0],uh=1,Zr=new zr;let vl=null,gm;const pm={},Aw=function(){const e="32px ",t=["monospace","serif"],n=t.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(c,u,h){let d=!0;for(let f=0;f<n;++f){const g=t[f];if(o=Lf(c+" "+u+" "+e+g,r),h!=g){const p=Lf(c+" "+u+" "+e+h+","+g,r);d=d&&p!=o}}return!!d}function l(){let c=!0;const u=Zr.getKeys();for(let h=0,d=u.length;h<d;++h){const f=u[h];Zr.get(f)<100&&(a.apply(this,f.split(`
`))?(Pc(pm),vl=null,gm=void 0,Zr.set(f,100)):(Zr.set(f,Zr.get(f)+1,!0),c=!1))}c&&(clearInterval(s),s=void 0)}return function(c){const u=vw(c);if(!u)return;const h=u.families;for(let d=0,f=h.length;d<f;++d){const g=h[d],p=u.style+`
`+u.weight+`
`+g;Zr.get(p)===void 0&&(Zr.set(p,100,!0),a(u.style,u.weight,g)||(Zr.set(p,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),UO=function(){let i;return function(e){let t=pm[e];if(t==null){if(xv){const n=vw(e),r=_w(e,"g");t=(isNaN(Number(n.lineHeight))?1.2:Number(n.lineHeight))*(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)}else i||(i=document.createElement("div"),i.innerHTML="M",i.style.minHeight="0",i.style.maxHeight="none",i.style.height="auto",i.style.padding="0",i.style.border="none",i.style.position="absolute",i.style.display="block",i.style.left="-99999px"),i.style.font=e,document.body.appendChild(i),t=i.offsetHeight,document.body.removeChild(i);pm[e]=t}return t}}();function _w(i,e){return vl||(vl=yn(1,1)),i!=gm&&(vl.font=i,gm=vl.font),vl.measureText(e)}function Lf(i,e){return _w(i,e).width}function _C(i,e,t){if(e in t)return t[e];const n=e.split(`
`).reduce((r,s)=>Math.max(r,Lf(i,s)),0);return t[e]=n,n}function BO(i,e){const t=[],n=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if(h===`
`||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const d=e[c+1]||i.font,f=Lf(d,h);t.push(f),o+=f;const g=UO(d);n.push(g),l=Math.max(l,g)}return{width:s,height:a,widths:t,heights:n,lineWidths:r}}function jO(i,e,t,n,r,s,o,a,l,c,u){i.save(),t!==1&&(i.globalAlpha*=t),e&&i.transform.apply(i,e),n.contextInstructions?(i.translate(l,c),i.scale(u[0],u[1]),zO(n,i)):u[0]<0||u[1]<0?(i.translate(l,c),i.scale(u[0],u[1]),i.drawImage(n,r,s,o,a,0,0,o,a)):i.drawImage(n,r,s,o,a,l,c,o*u[0],a*u[1]),i.restore()}function zO(i,e){const t=i.contextInstructions;for(let n=0,r=t.length;n<r;n+=2)Array.isArray(t[n+1])?e[t[n]].apply(e,t[n+1]):e[t[n]]=t[n+1]}class VO extends DO{constructor(e){super(e),this.fontChangeListenerKey_=ht(Zr,ka.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=Oc+" ol-layers";const n=e.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,t){const n=this.getMap();if(n.hasListener(e)){const r=new uw(e,void 0,t);n.dispatchEvent(r)}}disposeInternal(){zt(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(rs.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(o,a){return o.zIndex-a.zIndex}),n=e.viewState;this.children_.length=0;const r=this.declutterLayers_;r.length=0;let s=null;for(let o=0,a=t.length;o<a;++o){const l=t[o];e.layerIndex=o;const c=l.layer,u=c.getSourceState();if(!oy(l,n)||u!="ready"&&u!="undefined"){c.unrender();continue}const h=c.render(e,s);h&&(h!==s&&(this.children_.push(h),s=h),"getDeclutter"in c&&r.push(c))}this.flushDeclutterItems(e),oG(this.element_,this.children_),this.dispatchRenderEvent(rs.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const t=this.declutterLayers_;for(let n=t.length-1;n>=0;--n)t[n].renderDeclutter(e);t.length=0}}class co extends fr{constructor(e,t){super(e),this.layer=t}}const Y0={LAYERS:"layers"};class Dc extends J1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let n=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Y0.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new bi(n.slice(),{unique:!0}):vt(typeof n.getArray=="function","Expected `layers` to be an array or a `Collection`"):n=new bi(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(zt),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(ht(e,Ii.ADD,this.handleLayersAdd_,this),ht(e,Ii.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(zt);Pc(this.listenerKeys_);const t=e.getArray();for(let n=0,r=t.length;n<r;n++){const s=t[n];this.registerLayerListeners_(s),this.dispatchEvent(new co("addlayer",s))}this.changed()}registerLayerListeners_(e){const t=[ht(e,ka.PROPERTYCHANGE,this.handleLayerChange_,this),ht(e,ze.CHANGE,this.handleLayerChange_,this)];e instanceof Dc&&t.push(ht(e,"addlayer",this.handleLayerGroupAdd_,this),ht(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[ke(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new co("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new co("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new co("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,n=ke(t);this.listenerKeys_[n].forEach(zt),delete this.listenerKeys_[n],this.dispatchEvent(new co("removelayer",t)),this.changed()}getLayers(){return this.get(Y0.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const n=t.getArray();for(let r=0,s=n.length;r<s;++r)this.dispatchEvent(new co("removelayer",n[r]))}this.set(Y0.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],n=t.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(t)});const r=this.getLayerState();let s=r.zIndex;!e&&r.zIndex===void 0&&(s=0);for(let o=n,a=t.length;o<a;o++){const l=t[o];l.opacity*=r.opacity,l.visible=l.visible&&r.visible,l.maxResolution=Math.min(l.maxResolution,r.maxResolution),l.minResolution=Math.max(l.minResolution,r.minResolution),l.minZoom=Math.max(l.minZoom,r.minZoom),l.maxZoom=Math.min(l.maxZoom,r.maxZoom),r.extent!==void 0&&(l.extent!==void 0?l.extent=So(l.extent,r.extent):l.extent=r.extent),l.zIndex===void 0&&(l.zIndex=s)}return t}getSourceState(){return"ready"}}class yl extends fr{constructor(e,t,n){super(e),this.map=t,this.frameState=n!==void 0?n:null}}class Es extends yl{constructor(e,t,n,r,s,o){super(e,t,s),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=r!==void 0?r:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const gt={SINGLECLICK:"singleclick",CLICK:ze.CLICK,DBLCLICK:ze.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},mm={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class WO extends Gh{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=ht(n,mm.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=ht(n,mm.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(ze.TOUCHMOVE,this.boundHandleTouchMove_,_1?{passive:!1}:!1)}emulateClick_(e){let t=new Es(gt.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new Es(gt.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const n=new Es(gt.SINGLECLICK,this.map_,e);this.dispatchEvent(n)},250)}updateActivePointers_(e){const t=e,n=t.pointerId;if(t.type==gt.POINTERUP||t.type==gt.POINTERCANCEL){delete this.trackedTouches_[n];for(const r in this.trackedTouches_)if(this.trackedTouches_[r].target!==t.target){delete this.trackedTouches_[r];break}}else(t.type==gt.POINTERDOWN||t.type==gt.POINTERMOVE)&&(this.trackedTouches_[n]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new Es(gt.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(zt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new Es(gt.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const n=this.map_.getOwnerDocument();this.dragListenerKeys_.push(ht(n,gt.POINTERMOVE,this.handlePointerMove_,this),ht(n,gt.POINTERUP,this.handlePointerUp_,this),ht(this.element_,gt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==n&&this.dragListenerKeys_.push(ht(this.element_.getRootNode(),gt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new Es(gt.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new Es(gt.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(zt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(ze.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(zt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(zt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const Kr={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ti={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},Gf=1/0;class YO{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Pc(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,n=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const r=this.keyFunction_(n);return delete this.queuedElements_[r],n}enqueue(e){vt(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=Gf?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,n=this.priorities_,r=t.length,s=t[e],o=n[e],a=e;for(;e<r>>1;){const l=this.getLeftChildIndex_(e),c=this.getRightChildIndex_(e),u=c<r&&n[c]<n[l]?c:l;t[e]=t[u],n[e]=n[u],e=u}t[e]=s,n[e]=o,this.siftDown_(a,e)}siftDown_(e,t){const n=this.elements_,r=this.priorities_,s=n[t],o=r[t];for(;t>e;){const a=this.getParentIndex_(t);if(r[a]>o)n[t]=n[a],r[t]=r[a],t=a;else break}n[t]=s,r[t]=o}reprioritize(){const e=this.priorityFunction_,t=this.elements_,n=this.priorities_;let r=0;const s=t.length;let o,a,l;for(a=0;a<s;++a)o=t[a],l=e(o),l==Gf?delete this.queuedElements_[this.keyFunction_(o)]:(n[r]=l,t[r++]=o);t.length=r,n.length=r,this.heapify_()}}class HO extends YO{constructor(e,t){super(function(n){return e.apply(null,n)},function(n){return n[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(ze.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,n=t.getState();if(n===ge.LOADED||n===ge.ERROR||n===ge.EMPTY){n!==ge.ERROR&&t.removeEventListener(ze.CHANGE,this.boundHandleTileChange_);const r=t.getKey();r in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[r],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let n=0,r,s,o;for(;this.tilesLoading_<e&&n<t&&this.getCount()>0;)s=this.dequeue()[0],o=s.getKey(),r=s.getState(),r===ge.IDLE&&!(o in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[o]=!0,++this.tilesLoading_,++n,s.load())}}function qO(i,e,t,n,r){if(!i||!(t in i.wantedTiles)||!i.wantedTiles[t][e.getKey()])return Gf;const s=i.viewState.center,o=n[0]-s[0],a=n[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class qs extends zr{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){Ef(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&Ef(this.element);for(let t=0,n=this.listenerKeys.length;t<n;++t)zt(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==cc&&this.listenerKeys.push(ht(e,Kr.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}class XO extends qs{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",n=e.tipLabel!==void 0?e.tipLabel:"Attributions",r=e.expandClassName!==void 0?e.expandClassName:t+"-expand",s=e.collapseLabel!==void 0?e.collapseLabel:"",o=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=e.label!==void 0?e.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=r):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(ze.CLICK,this.handleClick_.bind(this),!1);const c=t+" "+Oc+" "+r0+(this.collapsed_&&this.collapsible_?" "+Rf:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(r=>r.getAttributions(e)))),n=!this.getMap().getAllLayers().some(r=>r.getSource()&&r.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(n),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),n=t.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!Hs(t,this.renderedAttributions_)){C1(this.ulElement_);for(let r=0,s=t.length;r<s;++r){const o=document.createElement("li");o.innerHTML=t[r],this.ulElement_.appendChild(o)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(Rf),this.collapsed_?If(this.collapseLabel_,this.label_):If(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}const Cw=XO;class ZO extends qs{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",n=e.label!==void 0?e.label:"",r=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof n=="string"?(this.label_=document.createElement("span"),this.label_.className=r,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(r));const s=e.tipLabel?e.tipLabel:"Reset rotation",o=document.createElement("button");o.className=t+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(ze.CLICK,this.handleClick_.bind(this),!1);const a=t+" "+Oc+" "+r0,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(fd)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const n=t.getRotation();n!==void 0&&(this.duration_>0&&n%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:Mc}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const n=t.viewState.rotation;if(n!=this.rotation_){const r="rotate("+n+"rad)";if(this.autoHide_){const s=this.element.classList.contains(fd);!s&&n===0?this.element.classList.add(fd):s&&n!==0&&this.element.classList.remove(fd)}this.label_.style.transform=r}this.rotation_=n}}const KO=ZO;class JO extends qs{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",n=e.delta!==void 0?e.delta:1,r=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",s=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",o=e.zoomInLabel!==void 0?e.zoomInLabel:"+",a=e.zoomOutLabel!==void 0?e.zoomOutLabel:"",l=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",c=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(ze.CLICK,this.handleClick_.bind(this,n),!1);const h=document.createElement("button");h.className=s,h.setAttribute("type","button"),h.title=c,h.appendChild(typeof a=="string"?document.createTextNode(a):a),h.addEventListener(ze.CLICK,this.handleClick_.bind(this,-n),!1);const d=t+" "+Oc+" "+r0,f=this.element;f.className=d,f.appendChild(u),f.appendChild(h),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const n=this.getMap().getView();if(!n)return;const r=n.getZoom();if(r!==void 0){const s=n.getConstrainedZoom(r+e);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:s,duration:this.duration_,easing:Mc})):n.setZoom(s)}}}const QO=JO;function $O(i){i=i||{};const e=new bi;return(i.zoom!==void 0?i.zoom:!0)&&e.push(new QO(i.zoomOptions)),(i.rotate!==void 0?i.rotate:!0)&&e.push(new KO(i.rotateOptions)),(i.attribution!==void 0?i.attribution:!0)&&e.push(new Cw(i.attributionOptions)),e}const vm={ACTIVE:"active"};class kc extends zr{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(vm.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(vm.ACTIVE,e)}setMap(e){this.map_=e}}function eD(i,e,t){const n=i.getCenterInternal();if(n){const r=[n[0]+e[0],n[1]+e[1]];i.animateInternal({duration:t!==void 0?t:250,easing:$L,center:i.getConstrainedCenter(r)})}}function cy(i,e,t,n){const r=i.getZoom();if(r===void 0)return;const s=i.getConstrainedZoom(r+e),o=i.getResolutionForZoom(s);i.getAnimating()&&i.cancelAnimations(),i.animate({resolution:o,anchor:t,duration:n!==void 0?n:250,easing:Mc})}class tD extends kc{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==gt.DBLCLICK){const n=e.originalEvent,r=e.map,s=e.coordinate,o=n.shiftKey?-this.delta_:this.delta_,a=r.getView();cy(a,o,s,this.duration_),n.preventDefault(),t=!0}return!t}}const iD=tD;class Qa extends kc{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==gt.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==gt.POINTERUP){const n=this.handleUpEvent(e);this.handlingDownUpSequence=n&&this.targetPointers.length>0}}else if(e.type==gt.POINTERDOWN){const n=this.handleDownEvent(e);this.handlingDownUpSequence=n,t=this.stopDown(n)}else e.type==gt.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function uy(i){const e=i.length;let t=0,n=0;for(let r=0;r<e;r++)t+=i[r].clientX,n+=i[r].clientY;return{clientX:t/e,clientY:n/e}}function ym(i){const e=arguments;return function(t){let n=!0;for(let r=0,s=e.length;r<s&&(n=n&&e[r](t),!!n);++r);return n}}const nD=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},rD=function(i){const e=i.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},sD=function(i){const e=i.map.getTargetElement(),t=i.map.getOwnerDocument().activeElement;return e.contains(t)},Iw=function(i){return i.map.getTargetElement().hasAttribute("tabindex")?sD(i):!0},Of=Do,Ew=function(i){const e=i.originalEvent;return e.button==0&&!(iG&&y1&&e.ctrlKey)},Am=xc,hy=function(i){return i.type=="pointermove"},dy=function(i){return i.type==gt.SINGLECLICK},fy=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},oD=function(i){const e=i.originalEvent;return y1?e.metaKey:e.ctrlKey},gy=function(i){const e=i.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},ww=function(i){const e=i.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},H0=function(i){const e=i.originalEvent;return vt(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},bw=function(i){const e=i.originalEvent;return vt(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0};class aD extends Qa{constructor(e){super({stopDown:xc}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:ym(fy,bw);this.condition_=e.onFocusOnly?ym(Iw,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const n=this.targetPointers,r=t.getEventPixel(uy(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const s=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],a=e.map.getView();PG(s,a.getResolution()),Ov(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,n=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const r=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=n.getCenterInternal(),a=t.getPixelFromCoordinateInternal(o),l=t.getCoordinateFromPixelInternal([a[0]-r*Math.cos(s),a[1]-r*Math.sin(s)]);n.animateInternal({center:n.getConstrainedCenter(l),duration:500,easing:Mc})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const n=e.map.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}const lD=aD;class cD extends Qa{constructor(e){e=e||{},super({stopDown:xc}),this.condition_=e.condition?e.condition:rD,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!H0(e))return;const t=e.map,n=t.getView();if(n.getConstraints().rotation===Xv)return;const r=t.getSize(),s=e.pixel,o=Math.atan2(r[1]/2-s[1],s[0]-r[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;n.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(e){return H0(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return H0(e)&&Ew(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class uD extends Sv{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,n="px",r=this.element_.style;r.left=Math.min(e[0],t[0])+n,r.top=Math.min(e[1],t[1])+n,r.width=Math.abs(t[0]-e[0])+n,r.height=Math.abs(t[1]-e[1])+n}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,r=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);r[4]=r[0].slice(),this.geometry_?this.geometry_.setCoordinates([r]):this.geometry_=new wi([r])}getGeometry(){return this.geometry_}}const gd={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class q0 extends fr{constructor(e,t,n){super(e),this.coordinate=t,this.mapBrowserEvent=n}}class hD extends Qa{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new uD(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:Ew,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,n){const r=n[0]-t[0],s=n[1]-t[1];return r*r+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new q0(gd.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new q0(t?gd.BOXEND:gd.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new q0(gd.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class dD extends hD{constructor(e){e=e||{};const t=e.condition?e.condition:gy;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const n=this.getMap().getView();let r=this.getGeometry();if(this.out_){const s=n.rotatedExtentForGeometry(r),o=n.getResolutionForExtentInternal(s),a=n.getResolution()/o;r=r.clone(),r.scale(a*a)}n.fitInternal(r,{duration:this.duration_,easing:Mc})}}const fD=dD,ta={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class gD extends kc{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return fy(t)&&ww(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==ze.KEYDOWN){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==ta.DOWN||r==ta.LEFT||r==ta.RIGHT||r==ta.UP)){const o=e.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,c=0;r==ta.DOWN?c=-a:r==ta.LEFT?l=-a:r==ta.RIGHT?l=a:c=a;const u=[l,c];Ov(u,o.getRotation()),eD(o,u,this.duration_),n.preventDefault(),t=!0}}return!t}}class pD extends kc{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!oD(t)&&ww(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==ze.KEYDOWN||e.type==ze.KEYPRESS){const n=e.originalEvent,r=n.key;if(this.condition_(e)&&(r==="+"||r==="-")){const s=e.map,o=r==="+"?this.delta_:-this.delta_,a=s.getView();cy(a,o,void 0,this.duration_),n.preventDefault(),t=!0}}return!t}}const mD=pD;class vD{constructor(e,t,n){this.decay_=e,this.minVelocity_=t,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let n=t-3;for(;n>0&&this.points_[n+2]>e;)n-=3;const r=this.points_[t+2]-this.points_[n+2];if(r<1e3/60)return!1;const s=this.points_[t]-this.points_[n],o=this.points_[t+1]-this.points_[n+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/r,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}class yD extends kc{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:Of;this.condition_=e.onFocusOnly?ym(Iw,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==ze.WHEEL)return!0;const n=e.map,r=e.originalEvent;r.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let s;if(e.type==ze.WHEEL&&(s=r.deltaY,eG&&r.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(s/=A1),r.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=n.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),l),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let n=-mi(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),cy(t,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}const AD=yD;class _D extends Qa{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=xc),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const n=this.targetPointers[0],r=this.targetPointers[1],s=Math.atan2(r.clientY-n.clientY,r.clientX-n.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=l}this.lastAngle_=s;const o=e.map,a=o.getView();a.getConstraints().rotation!==Xv&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(uy(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class CD extends Qa{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=xc),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const n=this.targetPointers[0],r=this.targetPointers[1],s=n.clientX-r.clientX,o=n.clientY-r.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(t=this.lastDistance_/a),this.lastDistance_=a;const l=e.map,c=l.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(uy(this.targetPointers))),l.render(),c.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const n=e.map.getView(),r=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,r),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const ID=CD;function ED(i){i=i||{};const e=new bi,t=new vD(-.005,.05,100);return(i.altShiftDragRotate!==void 0?i.altShiftDragRotate:!0)&&e.push(new cD),(i.doubleClickZoom!==void 0?i.doubleClickZoom:!0)&&e.push(new iD({delta:i.zoomDelta,duration:i.zoomDuration})),(i.dragPan!==void 0?i.dragPan:!0)&&e.push(new lD({onFocusOnly:i.onFocusOnly,kinetic:t})),(i.pinchRotate!==void 0?i.pinchRotate:!0)&&e.push(new _D),(i.pinchZoom!==void 0?i.pinchZoom:!0)&&e.push(new ID({duration:i.zoomDuration})),(i.keyboard!==void 0?i.keyboard:!0)&&(e.push(new gD),e.push(new mD({delta:i.zoomDelta,duration:i.zoomDuration}))),(i.mouseWheelZoom!==void 0?i.mouseWheelZoom:!0)&&e.push(new AD({onFocusOnly:i.onFocusOnly,duration:i.zoomDuration})),(i.shiftDragZoom!==void 0?i.shiftDragZoom:!0)&&e.push(new fD({duration:i.zoomDuration})),e}function Sw(i){if(i instanceof n0){i.setMapInternal(null);return}i instanceof Dc&&i.getLayers().forEach(Sw)}function xw(i,e){if(i instanceof n0){i.setMapInternal(e);return}if(i instanceof Dc){const t=i.getLayers().getArray();for(let n=0,r=t.length;n<r;++n)xw(t[n],e)}}let Pw=class extends zr{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=wD(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:A1,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Ir(),this.pixelToCoordinateTransform_=Ir(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||$O(),this.interactions=t.interactions||ED({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new HO(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ti.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ti.VIEW,this.handleViewChanged_),this.addChangeListener(Ti.SIZE,this.handleSizeChanged_),this.addChangeListener(Ti.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const n=this;e.view&&!(e.view instanceof Rr)&&e.view.then(function(r){n.setView(new Rr(r))}),this.controls.addEventListener(Ii.ADD,r=>{r.element.setMap(this)}),this.controls.addEventListener(Ii.REMOVE,r=>{r.element.setMap(null)}),this.interactions.addEventListener(Ii.ADD,r=>{r.element.setMap(this)}),this.interactions.addEventListener(Ii.REMOVE,r=>{r.element.setMap(null)}),this.overlays_.addEventListener(Ii.ADD,r=>{this.addOverlayInternal_(r.element)}),this.overlays_.addEventListener(Ii.REMOVE,r=>{const s=r.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],r.element.setMap(null)}),this.controls.forEach(r=>{r.setMap(this)}),this.interactions.forEach(r=>{r.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){xw(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,n){if(!this.frameState_||!this.renderer_)return;const r=this.getCoordinateFromPixelInternal(e);n=n!==void 0?n:{};const s=n.hitTolerance!==void 0?n.hitTolerance:0,o=n.layerFilter!==void 0?n.layerFilter:Do,a=n.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(r,this.frameState_,s,a,t,null,o,null)}getFeaturesAtPixel(e,t){const n=[];return this.forEachFeatureAtPixel(e,function(r){n.push(r)},t),n}getAllLayers(){const e=[];function t(n){n.forEach(function(r){r instanceof Dc?t(r.getLayers()):e.push(r)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const r=t.layerFilter!==void 0?t.layerFilter:Do,s=t.hitTolerance!==void 0?t.hitTolerance:0,o=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,s,o,r,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const n=this.viewport_.getBoundingClientRect(),r=this.getSize(),s=n.width/r[0],o=n.height/r[1],a="changedTouches"in e?e.changedTouches[0]:e;return[(a.clientX-n.left)/s,(a.clientY-n.top)/o]}getTarget(){return this.get(Ti.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return dc(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?Gi(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ti.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof bi){t.setLayers(e);return}const n=t.getLayers();n.clear(),n.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const r=e[t];if(!r.visible)continue;const s=r.layer.getRenderer();if(s&&!s.ready)return!0;const o=r.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(e){const t=di(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?Gi(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ti.SIZE)}getView(){return this.get(Ti.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,n,r){return qO(this.frameState_,e,t,n,r)}handleBrowserEvent(e,t){t=t||e.type;const n=new Es(t,this,e);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,n=t.type;if(n===mm.POINTERDOWN||n===ze.WHEEL||n===ze.KEYDOWN){const r=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():r,o=t.target;if(this.overlayContainerStopEvent_.contains(o)||!(s===r?r.documentElement:s).contains(o))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const r=this.getInteractions().getArray().slice();for(let s=r.length-1;s>=0;s--){const o=r[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let r=this.maxTilesLoading_,s=r;if(e){const o=e.viewHints;if(o[ai.ANIMATING]||o[ai.INTERACTING]){const a=Date.now()-e.time>8;r=a?0:8,s=a?0:2}}t.getTilesLoading()<r&&(t.reprioritize(),t.loadMoreTiles(r,s))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(rs.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(rs.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new yl(Kr.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new yl(Kr.LOADSTART,this,e))));const n=this.postRenderFunctions_;for(let r=0,s=n.length;r<s;++r)n[r](this,e);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let n=0,r=this.targetChangeHandlerKeys_.length;n<r;++n)zt(this.targetChangeHandlerKeys_[n]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(ze.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(ze.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,Ef(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const n=this.targetElement_.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.unobserve(n.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new VO(this)),this.mapBrowserEventHandler_=new WO(this,this.moveTolerance_);for(const s in gt)this.mapBrowserEventHandler_.addEventListener(gt[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(ze.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(ze.WHEEL,this.boundHandleBrowserEvent_,_1?{passive:!1}:!1);const n=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[ht(n,ze.KEYDOWN,this.handleBrowserEvent,this),ht(n,ze.KEYPRESS,this.handleBrowserEvent,this)];const r=t.getRootNode();r instanceof ShadowRoot&&this.resizeObserver_.observe(r.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(zt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(zt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=ht(e,ka.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=ht(e,ze.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(zt),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new co("addlayer",e)),this.layerGroupPropertyListenerKeys_=[ht(e,ka.PROPERTYCHANGE,this.render,this),ht(e,ze.CHANGE,this.render,this),ht(e,"addlayer",this.handleLayerAdd_,this),ht(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,n=e.length;t<n;++t){const r=e[t].layer;r.hasRenderer()&&r.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){Sw(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),n=this.getView(),r=this.frameState_;let s=null;if(t!==void 0&&sC(t)&&n&&n.isDef()){const o=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=n.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:ih(a.center,a.resolution,a.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:ke(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=ih(a.nextCenter,a.nextResolution,l,t)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),r&&(!this.previousExtent_||!Tc(this.previousExtent_)&&!No(s.extent,this.previousExtent_))&&(this.dispatchEvent(new yl(Kr.MOVESTART,this,r)),this.previousExtent_=Rc(this.previousExtent_)),this.previousExtent_&&!s.viewHints[ai.ANIMATING]&&!s.viewHints[ai.INTERACTING]&&!No(s.extent,this.previousExtent_)&&(this.dispatchEvent(new yl(Kr.MOVEEND,this,s)),x1(s.extent,this.previousExtent_))),this.dispatchEvent(new yl(Kr.POSTRENDER,this,s)),this.renderComplete_=this.hasListener(Kr.LOADSTART)||this.hasListener(Kr.LOADEND)||this.hasListener(rs.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new co("removelayer",t)),this.set(Ti.LAYERGROUP,e)}setSize(e){this.set(Ti.SIZE,e)}setTarget(e){this.set(Ti.TARGET,e)}setView(e){if(!e||e instanceof Rr){this.set(Ti.VIEW,e);return}this.set(Ti.VIEW,new Rr);const t=this;e.then(function(n){t.setView(new Rr(n))})}updateSize(){const e=this.getTargetElement();let t;if(e){const r=getComputedStyle(e),s=e.offsetWidth-parseFloat(r.borderLeftWidth)-parseFloat(r.paddingLeft)-parseFloat(r.paddingRight)-parseFloat(r.borderRightWidth),o=e.offsetHeight-parseFloat(r.borderTopWidth)-parseFloat(r.paddingTop)-parseFloat(r.paddingBottom)-parseFloat(r.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(t=[s,o],!sC(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&O1("No map visible because the map container's width or height are 0."))}const n=this.getSize();t&&(!n||!Hs(t,n))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function wD(i){let e=null;i.keyboardEventTarget!==void 0&&(e=typeof i.keyboardEventTarget=="string"?document.getElementById(i.keyboardEventTarget):i.keyboardEventTarget);const t={},n=i.layers&&typeof i.layers.getLayers=="function"?i.layers:new Dc({layers:i.layers});t[Ti.LAYERGROUP]=n,t[Ti.TARGET]=i.target,t[Ti.VIEW]=i.view instanceof Rr?i.view:new Rr;let r;i.controls!==void 0&&(Array.isArray(i.controls)?r=new bi(i.controls.slice()):(vt(typeof i.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),r=i.controls));let s;i.interactions!==void 0&&(Array.isArray(i.interactions)?s=new bi(i.interactions.slice()):(vt(typeof i.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=i.interactions));let o;return i.overlays!==void 0?Array.isArray(i.overlays)?o=new bi(i.overlays.slice()):(vt(typeof i.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=i.overlays):o=new bi,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:t}}const bD=Ut({__name:"Map",setup(i){const e=Si(void 0),t=new Pw;wr(()=>{var s;t==null||t.setTarget(e.value);const r=(s=document.getElementById("map"))==null?void 0:s.getElementsByTagName("canvas");r&&(r.tabindex=0)});function n(){e.value.focus()}return Iu("map",t),(r,s)=>(de(),Ge("div",{id:"map",ref_key:"mapRef",ref:e,tabindex:"0",onMouseover:n},[dn(r.$slots,"default",{},void 0,!0)],544))}}),jh=(i,e)=>{const t=i.__vccOpts||i;for(const[n,r]of e)t[n]=r;return t},SD=jh(bD,[["__scopeId","data-v-38aaac19"]]),xD=Ut({__name:"View",props:{zoom:Number,center:Array,layers:Array},setup(i){const e=i,t=Vn("map"),n={zoom:e.zoom,center:e.center},r=new Rr(n);return wr(()=>{e.layers.forEach(s=>{t==null||t.addLayer(s)}),t==null||t.setView(r)}),(s,o)=>(de(),Ge("div"))}}),PD="geoportal-extensions-openlayers",MD="French Geoportal Extensions for OpenLayers libraries",RD="1.0.0-beta.8",TD="16/04/2024",LD="src/index.js",GD="module",OD={},DD={node:">=20"},kD={},FD={type:"git",url:"https://github.com/IGNF/geoportal-extensions-openlayers.git"},ND="IGNF",UD=["geoportail","geoplateforme","javascript","OpenLayers 8"],BD="CECILL-B",jD={url:"https://github.com/IGNF/geoportal-extensions-openlayers/issues"},zD="https://github.com/IGNF/geoportal-extensions-openlayers#readme",VD={"@gouvfr/dsfr":"^1.11.0",eventbusjs:"0.2.0","geoportal-access-lib":"3.4.1",loglevel:"^1.9.1",ol:"8.2.0","ol-mapbox-style":"12.2.0",proj4:"2.10.0",sortablejs:"1.15.2"},WD={},Df={name:PD,description:MD,version:RD,date:TD,main:LD,type:GD,directories:OD,engines:DD,scripts:kD,repository:FD,author:ND,keywords:UD,license:BD,bugs:jD,homepage:zD,dependencies:VD,devDependencies:WD},nn={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class YD extends zr{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+FO,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(nn.ELEMENT,this.handleElementChanged),this.addChangeListener(nn.MAP,this.handleMapChanged),this.addChangeListener(nn.OFFSET,this.handleOffsetChanged),this.addChangeListener(nn.POSITION,this.handlePositionChanged),this.addChangeListener(nn.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(nn.ELEMENT)}getId(){return this.id}getMap(){return this.get(nn.MAP)||null}getOffset(){return this.get(nn.OFFSET)}getPosition(){return this.get(nn.POSITION)}getPositioning(){return this.get(nn.POSITIONING)}handleElementChanged(){C1(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(Ef(this.element),zt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=ht(e,Kr.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(nn.ELEMENT,e)}setMap(e){this.set(nn.MAP,e)}setOffset(e){this.set(nn.OFFSET,e)}setPosition(e){this.set(nn.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(nn.POSITION))return;const n=this.getRect(t.getTargetElement(),t.getSize()),r=this.getElement(),s=this.getRect(r,[rG(r),sG(r)]);e=e||{};const o=e.margin===void 0?20:e.margin;if(!Gr(n,s)){const a=s[0]-n[0],l=n[2]-s[2],c=s[1]-n[1],u=n[3]-s[3],h=[0,0];if(a<0?h[0]=a-o:l<0&&(h[0]=Math.abs(l)+o),c<0?h[1]=c-o:u<0&&(h[1]=Math.abs(u)+o),h[0]!==0||h[1]!==0){const d=t.getView().getCenterInternal(),f=t.getPixelFromCoordinateInternal(d);if(!f)return;const g=[f[0]+h[0],f[1]+h[1]],p=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(g),duration:p.duration,easing:p.easing})}}}getRect(e,t){const n=e.getBoundingClientRect(),r=n.left+window.pageXOffset,s=n.top+window.pageYOffset;return[r,s,r+t[0],s+t[1]]}setPositioning(e){this.set(nn.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const n=e.getPixelFromCoordinate(t),r=e.getSize();this.updateRenderedPosition(n,r)}updateRenderedPosition(e,t){const n=this.element.style,r=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(e[0]+r[0])+"px",a=Math.round(e[1]+r[1])+"px";let l="0%",c="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?c="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(c="-50%");const u=`translate(${l}, ${c}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,n.transform=u)}getOptions(){return this.options}}const jn=YD;let Mw=class extends Wg{constructor(e,t,n,r,s,o){super(e,t,o),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=s,this.url_=n,this.key=n}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ge.IDLE&&(this.setState(ge.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(ge.ERROR)}setFeatures(e){this.features_=e,this.setState(ge.LOADED)}setLoader(e){this.loader_=e}};const CC=[];class HD extends Wg{constructor(e,t,n,r){super(e,t,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=n}getContext(e){const t=ke(e);return t in this.context_||(this.context_[t]=yn(1,1,CC)),this.context_[t]}hasContext(e){return ke(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const t=ke(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const t=this.context_[e];Oh(t),CC.push(t.canvas),delete this.context_[e]}super.release()}}let qD=!1;function Rw(i,e,t,n,r,s,o){const a=new XMLHttpRequest;a.open("GET",typeof i=="function"?i(t,n,r):i,!0),e.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=qD,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const c=e.getType();let u;c=="json"?u=JSON.parse(a.responseText):c=="text"?u=a.responseText:c=="xml"?(u=a.responseXML,u||(u=new DOMParser().parseFromString(a.responseText,"application/xml"))):c=="arraybuffer"&&(u=a.response),u?s(e.readFeatures(u,{extent:t,featureProjection:r}),e.readProjection(u)):o()}else o()},a.onerror=o,a.send()}function IC(i,e){return function(t,n,r,s,o){const a=this;Rw(i,e,t,n,r,function(l,c){a.addFeatures(l),s!==void 0&&s(l)},o||cc)}}class Hl extends Qg{constructor(e){const t=e.projection||"EPSG:3857",n=e.extent||Uh(t),r=e.tileGrid||Jg({extent:n,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:t,state:e.state,tileGrid:r,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:Tw,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new Bv(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:Mw,this.tileGrids_={}}getFeaturesInExtent(e){const t=[],n=this.tileCache;if(n.getCount()===0)return t;const r=B1(n.peekFirstKey())[0],s=this.tileGrid;return n.forEach(function(o){if(o.tileCoord[0]!==r||o.getState()!==ge.LOADED)return;const a=o.getSourceTiles();for(let l=0,c=a.length;l<c;++l){const u=a[l],h=u.tileCoord;if(Jt(e,s.getTileCoordExtent(h))){const d=u.getFeatures();if(d)for(let f=0,g=d.length;f<g;++f){const p=d[f],m=p.getGeometry();Jt(e,m.getExtent())&&t.push(p)}}}}),t}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,t){const n=this.getTileCacheForProjection(e),r=Object.keys(t).reduce((s,o)=>{const a=UG(o),l=n.peek(a);if(l){const c=l.sourceTiles;for(let u=0,h=c.length;u<h;++u)s[c[u].getKey()]=!0}return s},{});super.expireCache(e,t),this.sourceTileCache.expireCache(r)}getSourceTiles(e,t,n){if(n.getState()===ge.IDLE){n.setState(ge.LOADING);const r=n.wrappedTileCoord,s=this.getTileGridForProjection(t),o=s.getTileCoordExtent(r),a=r[0],l=s.getResolution(a);Fr(o,-l,o);const c=this.tileGrid,u=c.getExtent();u&&So(o,u,o);const h=c.getZForResolution(l,this.zDirection);c.forEachTileCoord(o,h,d=>{const f=this.tileUrlFunction(d,e,t),g=this.sourceTileCache.containsKey(f)?this.sourceTileCache.get(f):new this.tileClass(d,f?ge.IDLE:ge.EMPTY,f,this.format_,this.tileLoadFunction);n.sourceTiles.push(g);const p=g.getState();if(p<ge.LOADED){const m=v=>{this.handleTileChange(v);const y=g.getState();if(y===ge.LOADED||y===ge.ERROR){const A=g.getKey();A in n.errorTileKeys?g.getState()===ge.LOADED&&delete n.errorTileKeys[A]:n.loadingSourceTiles--,y===ge.ERROR?n.errorTileKeys[A]=!0:g.removeEventListener(ze.CHANGE,m),n.loadingSourceTiles===0&&n.setState(ko(n.errorTileKeys)?ge.LOADED:ge.ERROR)}};g.addEventListener(ze.CHANGE,m),n.loadingSourceTiles++}p===ge.IDLE&&(g.extent=c.getTileCoordExtent(d),g.projection=t,g.resolution=c.getResolution(d[0]),this.sourceTileCache.set(f,g),g.load())}),n.loadingSourceTiles||n.setState(n.sourceTiles.some(d=>d.getState()===ge.ERROR)?ge.ERROR:ge.LOADED)}return n.sourceTiles}getTile(e,t,n,r,s){const o=Lc(e,t,n),a=this.getKey();let l;if(this.tileCache.containsKey(o)&&(l=this.tileCache.get(o),l.key===a))return l;const c=[e,t,n];let u=this.getTileCoordForTileUrlFunction(c,s);const h=this.getTileGrid().getExtent(),d=this.getTileGridForProjection(s);if(u&&h){const p=d.getTileCoordExtent(u);Fr(p,-d.getResolution(e),p),Jt(h,p)||(u=null)}let f=!0;if(u!==null){const p=this.tileGrid,m=d.getResolution(e),v=p.getZForResolution(m,1),y=d.getTileCoordExtent(u);Fr(y,-m,y),p.forEachTileCoord(y,v,A=>{f=f&&!this.tileUrlFunction(A,r,s)})}const g=new HD(c,f?ge.EMPTY:ge.IDLE,u,this.getSourceTiles.bind(this,r,s));return g.key=a,l?(g.interimTile=l,g.refreshInterimChain(),this.tileCache.replace(o,g)):this.tileCache.set(o,g),g}getTileGridForProjection(e){const t=e.getCode();let n=this.tileGrids_[t];if(!n){const r=this.tileGrid,s=r.getResolutions().slice(),o=s.map(function(c,u){return r.getOrigin(u)}),a=s.map(function(c,u){return r.getTileSize(u)}),l=z1+1;for(let c=s.length;c<l;++c)s.push(s[c-1]/2),o.push(o[c-1]),a.push(a[c-1]);n=new Gc({extent:r.getExtent(),origins:o,resolutions:s,tileSizes:a}),this.tileGrids_[t]=n}return n}getTilePixelRatio(e){return e}getTilePixelSize(e,t,n){const r=this.getTileGridForProjection(n),s=Sn(r.getTileSize(e),this.tmpSize);return[Math.round(s[0]*t),Math.round(s[1]*t)]}updateCacheSize(e,t){super.updateCacheSize(e*2,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}function Tw(i,e){i.setLoader(function(t,n,r){Rw(e,i.getFormat(),t,n,r,i.onLoad.bind(i),i.onError.bind(i))})}function XD(i,e,t,n,r){Lw(i,e,t||0,n||i.length-1,r||ZD)}function Lw(i,e,t,n,r){for(;n>t;){if(n-t>600){var s=n-t+1,o=e-t+1,a=Math.log(s),l=.5*Math.exp(2*a/3),c=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1),u=Math.max(t,Math.floor(e-o*l/s+c)),h=Math.min(n,Math.floor(e+(s-o)*l/s+c));Lw(i,e,u,h,r)}var d=i[e],f=t,g=n;for($c(i,t,e),r(i[n],d)>0&&$c(i,t,n);f<g;){for($c(i,f,g),f++,g--;r(i[f],d)<0;)f++;for(;r(i[g],d)>0;)g--}r(i[t],d)===0?$c(i,t,g):(g++,$c(i,g,n)),g<=e&&(t=g+1),e<=g&&(n=g-1)}}function $c(i,e,t){var n=i[e];i[e]=i[t],i[t]=n}function ZD(i,e){return i<e?-1:i>e?1:0}let Gw=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const n=[];if(!md(e,t))return n;const r=this.toBBox,s=[];for(;t;){for(let o=0;o<t.children.length;o++){const a=t.children[o],l=t.leaf?r(a):a;md(e,l)&&(t.leaf?n.push(a):Z0(e,l)?this._all(a,n):s.push(a))}t=s.pop()}return n}collides(e){let t=this.data;if(!md(e,t))return!1;const n=[];for(;t;){for(let r=0;r<t.children.length;r++){const s=t.children[r],o=t.leaf?this.toBBox(s):s;if(md(e,o)){if(t.leaf||Z0(e,o))return!0;n.push(s)}}t=n.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let n=0;n<e.length;n++)this.insert(e[n]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const n=this.data;this.data=t,t=n}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=Al([]),this}remove(e,t){if(!e)return this;let n=this.data;const r=this.toBBox(e),s=[],o=[];let a,l,c;for(;n||s.length;){if(n||(n=s.pop(),l=s[s.length-1],a=o.pop(),c=!0),n.leaf){const u=KD(e,n.children,t);if(u!==-1)return n.children.splice(u,1),s.push(n),this._condense(s),this}!c&&!n.leaf&&Z0(n,r)?(s.push(n),o.push(a),a=0,l=n,n=n.children[0]):l?(a++,n=l.children[a],c=!1):n=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const n=[];for(;e;)e.leaf?t.push(...e.children):n.push(...e.children),e=n.pop();return t}_build(e,t,n,r){const s=n-t+1;let o=this._maxEntries,a;if(s<=o)return a=Al(e.slice(t,n+1)),al(a,this.toBBox),a;r||(r=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,r-1))),a=Al([]),a.leaf=!1,a.height=r;const l=Math.ceil(s/o),c=l*Math.ceil(Math.sqrt(o));EC(e,t,n,c,this.compareMinX);for(let u=t;u<=n;u+=c){const h=Math.min(u+c-1,n);EC(e,u,h,l,this.compareMinY);for(let d=u;d<=h;d+=l){const f=Math.min(d+l-1,h);a.children.push(this._build(e,d,f,r-1))}}return al(a,this.toBBox),a}_chooseSubtree(e,t,n,r){for(;r.push(t),!(t.leaf||r.length-1===n);){let s=1/0,o=1/0,a;for(let l=0;l<t.children.length;l++){const c=t.children[l],u=X0(c),h=$D(e,c)-u;h<o?(o=h,s=u<s?u:s,a=c):h===o&&u<s&&(s=u,a=c)}t=a||t.children[0]}return t}_insert(e,t,n){const r=n?e:this.toBBox(e),s=[],o=this._chooseSubtree(r,this.data,t,s);for(o.children.push(e),cu(o,r);t>=0&&s[t].children.length>this._maxEntries;)this._split(s,t),t--;this._adjustParentBBoxes(r,s,t)}_split(e,t){const n=e[t],r=n.children.length,s=this._minEntries;this._chooseSplitAxis(n,s,r);const o=this._chooseSplitIndex(n,s,r),a=Al(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,al(n,this.toBBox),al(a,this.toBBox),t?e[t-1].children.push(a):this._splitRoot(n,a)}_splitRoot(e,t){this.data=Al([e,t]),this.data.height=e.height+1,this.data.leaf=!1,al(this.data,this.toBBox)}_chooseSplitIndex(e,t,n){let r,s=1/0,o=1/0;for(let a=t;a<=n-t;a++){const l=lu(e,0,a,this.toBBox),c=lu(e,a,n,this.toBBox),u=ek(l,c),h=X0(l)+X0(c);u<s?(s=u,r=a,o=h<o?h:o):u===s&&h<o&&(o=h,r=a)}return r||n-t}_chooseSplitAxis(e,t,n){const r=e.leaf?this.compareMinX:JD,s=e.leaf?this.compareMinY:QD,o=this._allDistMargin(e,t,n,r),a=this._allDistMargin(e,t,n,s);o<a&&e.children.sort(r)}_allDistMargin(e,t,n,r){e.children.sort(r);const s=this.toBBox,o=lu(e,0,t,s),a=lu(e,n-t,n,s);let l=pd(o)+pd(a);for(let c=t;c<n-t;c++){const u=e.children[c];cu(o,e.leaf?s(u):u),l+=pd(o)}for(let c=n-t-1;c>=t;c--){const u=e.children[c];cu(a,e.leaf?s(u):u),l+=pd(a)}return l}_adjustParentBBoxes(e,t,n){for(let r=n;r>=0;r--)cu(t[r],e)}_condense(e){for(let t=e.length-1,n;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children,n.splice(n.indexOf(e[t]),1)):this.clear():al(e[t],this.toBBox)}};function KD(i,e,t){if(!t)return e.indexOf(i);for(let n=0;n<e.length;n++)if(t(i,e[n]))return n;return-1}function al(i,e){lu(i,0,i.children.length,e,i)}function lu(i,e,t,n,r){r||(r=Al(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<t;s++){const o=i.children[s];cu(r,i.leaf?n(o):o)}return r}function cu(i,e){return i.minX=Math.min(i.minX,e.minX),i.minY=Math.min(i.minY,e.minY),i.maxX=Math.max(i.maxX,e.maxX),i.maxY=Math.max(i.maxY,e.maxY),i}function JD(i,e){return i.minX-e.minX}function QD(i,e){return i.minY-e.minY}function X0(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function pd(i){return i.maxX-i.minX+(i.maxY-i.minY)}function $D(i,e){return(Math.max(e.maxX,i.maxX)-Math.min(e.minX,i.minX))*(Math.max(e.maxY,i.maxY)-Math.min(e.minY,i.minY))}function ek(i,e){const t=Math.max(i.minX,e.minX),n=Math.max(i.minY,e.minY),r=Math.min(i.maxX,e.maxX),s=Math.min(i.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,s-n)}function Z0(i,e){return i.minX<=e.minX&&i.minY<=e.minY&&e.maxX<=i.maxX&&e.maxY<=i.maxY}function md(i,e){return e.minX<=i.maxX&&e.minY<=i.maxY&&e.maxX>=i.minX&&e.maxY>=i.minY}function Al(i){return{children:i,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function EC(i,e,t,n,r){const s=[e,t];for(;s.length;){if(t=s.pop(),e=s.pop(),t-e<=n)continue;const o=e+Math.ceil((t-e)/n/2)*n;XD(i,o,e,t,r),s.push(e,o,o,t)}}class _m{constructor(e){this.rbush_=new Gw(e),this.items_={}}insert(e,t){const n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(n),this.items_[ke(t)]=n}load(e,t){const n=new Array(t.length);for(let r=0,s=t.length;r<s;r++){const o=e[r],a=t[r],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};n[r]=l,this.items_[ke(a)]=l}this.rbush_.load(n)}remove(e){const t=ke(e),n=this.items_[t];return delete this.items_[t],this.rbush_.remove(n)!==null}update(e,t){const n=this.items_[ke(t)],r=[n.minX,n.minY,n.maxX,n.maxY];No(r,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(r){return r.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let n;for(let r=0,s=e.length;r<s;r++)if(n=t(e[r]),n)return n;return n}isEmpty(){return ko(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return us(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Ht extends zr{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Ht(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const n=this.getStyle();return n&&e.setStyle(n),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(zt(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=ht(e,ze.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?tk(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function tk(i){if(typeof i=="function")return i;let e;return Array.isArray(i)?e=i:(vt(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[i]),function(){return e}}let Ow=class Dw extends Ho{constructor(e,t,n){super(),n!==void 0&&t===void 0?this.setFlatCoordinates(n,e):(t=t||0,this.setCenterAndRadius(e,t,n))}clone(){const e=new Dw(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){const s=this.flatCoordinates,o=e-s[0],a=t-s[1],l=o*o+a*a;if(l<r){if(l===0)for(let c=0;c<this.stride;++c)n[c]=s[c];else{const c=this.getRadius()/Math.sqrt(l);n[0]=s[0]+c*o,n[1]=s[1]+c*a;for(let u=2;u<this.stride;++u)n[u]=s[u]}return n.length=this.stride,l}return r}containsXY(e,t){const n=this.flatCoordinates,r=e-n[0],s=t-n[1];return r*r+s*s<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,n=t[this.stride]-t[0];return us(t[0]-n,t[1]-n,t[0]+n,t[1]+n,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(Jt(e,t)){const n=this.getCenter();return e[0]<=n[0]&&e[2]>=n[0]||e[1]<=n[1]&&e[3]>=n[1]?!0:Tv(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,n=this.flatCoordinates[t]-this.flatCoordinates[0],r=e.slice();r[t]=r[0]+n;for(let s=1;s<t;++s)r[t+s]=e[s];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(e,t,n){this.setLayout(n,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const r=this.flatCoordinates;let s=tw(r,0,e,this.stride);r[s++]=r[0]+t;for(let o=1,a=this.stride;o<a;++o)r[s++]=r[o];r.length=s,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const n=this.getCenter(),r=this.getStride();this.setCenter(Jv(n,0,n.length,r,e,t,n)),this.changed()}};Ow.prototype.transform;class kf extends ew{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(zt),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(ht(this.geometries_[e],ze.CHANGE,this.changed,this))}clone(){const e=new kf(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,n,r){if(r<Ka(this.getExtent(),e,t))return r;const s=this.geometries_;for(let o=0,a=s.length;o<a;++o)r=s[o].closestPointXY(e,t,n,r);return r}containsXY(e,t){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)if(n[r].containsXY(e,t))return!0;return!1}computeExtent(e){Rc(e);const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)P1(e,t[n].getExtent());return e}getGeometries(){return wC(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].getType()===this.getType()?e=e.concat(t[n].getGeometriesArrayRecursive()):e.push(t[n]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],n=this.geometries_;let r=!1;for(let s=0,o=n.length;s<o;++s){const a=n[s],l=a.getSimplifiedGeometry(e);t.push(l),l!==a&&(r=!0)}if(r){const s=new kf(null);return s.setGeometriesArray(t),s}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)if(t[n].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].rotate(e,t);this.changed()}scale(e,t,n){n||(n=hs(this.getExtent()));const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)r[s].scale(e,t,n);this.changed()}setGeometries(e){this.setGeometriesArray(wC(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let n=0,r=t.length;n<r;++n)t[n].applyTransform(e);this.changed()}translate(e,t){const n=this.geometries_;for(let r=0,s=n.length;r<s;++r)n[r].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function wC(i){const e=[];for(let t=0,n=i.length;t<n;++t)e.push(i[t].clone());return e}const Gs=kf;function Ff(i,e,t,n,r,s,o){let a,l;const c=(t-e)/n;if(c===1)a=e;else if(c===2)a=e,l=r;else if(c!==0){let u=i[e],h=i[e+1],d=0;const f=[0];for(let m=e+n;m<t;m+=n){const v=i[m],y=i[m+1];d+=Math.sqrt((v-u)*(v-u)+(y-h)*(y-h)),f.push(d),u=v,h=y}const g=r*d,p=XL(f,g);p<0?(l=(g-f[-p-2])/(f[-p-1]-f[-p-2]),a=e+(-p-2)*n):a=e+p*n}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?i[a+u]:rr(i[a+u],i[a+n+u],l);return s}function Cm(i,e,t,n,r,s){if(t==e)return null;let o;if(r<i[e+n-1])return s?(o=i.slice(e,e+n),o[n-1]=r,o):null;if(i[t-1]<r)return s?(o=i.slice(t-n,t),o[n-1]=r,o):null;if(r==i[e+n-1])return i.slice(e,e+n);let a=e/n,l=t/n;for(;a<l;){const d=a+l>>1;r<i[(d+1)*n-1]?l=d:a=d+1}const c=i[a*n-1];if(r==c)return i.slice((a-1)*n,(a-1)*n+n);const u=i[(a+1)*n-1],h=(r-c)/(u-c);o=[];for(let d=0;d<n-1;++d)o.push(rr(i[(a-1)*n+d],i[a*n+d],h));return o.push(r),o}function ik(i,e,t,n,r,s,o){if(o)return Cm(i,e,t[t.length-1],n,r,s);let a;if(r<i[n-1])return s?(a=i.slice(0,n),a[n-1]=r,a):null;if(i[i.length-1]<r)return s?(a=i.slice(i.length-n),a[n-1]=r,a):null;for(let l=0,c=t.length;l<c;++l){const u=t[l];if(e!=u){if(r<i[e+n-1])return null;if(r<=i[u-1])return Cm(i,e,u,n,r,!1);e=u}}return null}function kw(i,e,t,n){let r=i[e],s=i[e+1],o=0;for(let a=e+n;a<t;a+=n){const l=i[a],c=i[a+1];o+=Math.sqrt((l-r)*(l-r)+(c-s)*(c-s)),r=l,s=c}return o}class Ji extends Ho{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){bt(this.flatCoordinates,e),this.changed()}clone(){const e=new Ji(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<Ka(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Qv(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ey(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,n,r))}forEachSegment(e){return V1(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,Cm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return vo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return Ff(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return kw(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=i0(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new Ji(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return Kg(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=t0(this.flatCoordinates,0,e,this.stride),this.changed()}}class hr extends Ho{constructor(e,t,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&n)this.setFlatCoordinates(t,e),this.ends_=n;else{const r=e,s=[],o=[];for(let l=0,c=r.length;l<c;++l){const u=r[l];bt(s,u.getFlatCoordinates()),o.push(s.length)}const a=r.length===0?this.getLayout():r[0].getLayout();this.setFlatCoordinates(a,s),this.ends_=o}}appendLineString(e){bt(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new hr(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,n,r){return r<Ka(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($v(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ty(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,n,r))}getCoordinateAtM(e,t,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,n=n!==void 0?n:!1,ik(this.flatCoordinates,0,this.ends_,this.stride,e,t,n))}getCoordinates(){return rh(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new Ji(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,n=this.layout,r=[];let s=0;for(let o=0,a=t.length;o<a;++o){const l=t[o],c=new Ji(e.slice(s,l),n);r.push(c),s=l}return r}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let n=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const l=r[o],c=Ff(t,n,l,s,.5);bt(e,c),n=l}return e}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=nw(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,n),new hr(t,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(e){return VG(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Bh(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class Us extends Ho{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){bt(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new Us(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,n,r){if(r<Ka(this.getExtent(),e,t))return r;const s=this.flatCoordinates,o=this.stride;for(let a=0,l=s.length;a<l;a+=o){const c=Rs(e,t,s[a],s[a+1]);if(c<r){r=c;for(let u=0;u<o;++u)n[u]=s[a+u];n.length=o}}return r}getCoordinates(){return vo(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Ki(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,n=this.stride,r=[];for(let s=0,o=e.length;s<o;s+=n){const a=new Ki(e.slice(s,s+n),t);r.push(a)}return r}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,n=this.stride;for(let r=0,s=t.length;r<s;r+=n){const o=t[r],a=t[r+1];if(Mv(e,o,a))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=t0(this.flatCoordinates,0,e,this.stride),this.changed()}}function Fw(i,e,t,n){const r=[];let s=Yn();for(let o=0,a=t.length;o<a;++o){const l=t[o];s=Rv(i,e,l[0],n),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=l[l.length-1]}return r}class jr extends Ho{constructor(e,t,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(e[0])){const r=e,s=[],o=[];for(let a=0,l=r.length;a<l;++a){const c=r[a],u=s.length,h=c.getEnds();for(let d=0,f=h.length;d<f;++d)h[d]+=u;bt(s,c.getFlatCoordinates()),o.push(h)}t=r.length===0?this.getLayout():r[0].getLayout(),e=s,n=o}t!==void 0&&n?(this.setFlatCoordinates(t,e),this.endss_=n):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;bt(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let r=0,s=t.length;r<s;++r)t[r]+=n}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let r=0;r<e;++r)t[r]=this.endss_[r].slice();const n=new jr(this.flatCoordinates.slice(),this.layout,t);return n.applyProperties(this),n}closestPointXY(e,t,n,r){return r<Ka(this.getExtent(),e,t)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(pO(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),mO(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,n,r))}containsXY(e,t){return zG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return AO(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),dm(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,hm(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=Fw(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=aw(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Us(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;lw(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=dm(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],n=[];return t.length=yO(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,n),new jr(t,"XY",n)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const s=this.endss_[e-1];t=s[s.length-1]}const n=this.endss_[e].slice(),r=n[n.length-1];if(t!==0)for(let s=0,o=n.length;s<o;++s)n[s]-=t;return new wi(this.flatCoordinates.slice(t,r),this.layout,n)}getPolygons(){const e=this.layout,t=this.flatCoordinates,n=this.endss_,r=[];let s=0;for(let o=0,a=n.length;o<a;++o){const l=n[o].slice(),c=l[l.length-1];if(s!==0)for(let h=0,d=l.length;h<d;++h)l[h]-=s;const u=new wi(t.slice(s,c),e,l);r.push(u),s=c}return r}getType(){return"MultiPolygon"}intersectsExtent(e){return WG(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=iw(this.flatCoordinates,0,e,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const r=n[n.length-1];this.flatCoordinates.length=r.length===0?0:r[r.length-1]}this.changed()}}const bC=Ir();class qi{constructor(e,t,n,r,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n,this.properties_=s,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Mu(this.flatCoordinates_):Rv(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=hs(this.getExtent());this.flatInteriorPoints_=ny(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=cw(this.flatCoordinates_,this.ends_),t=Fw(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=aw(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Ff(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const n=this.ends_;for(let r=0,s=n.length;r<s;++r){const o=n[r],a=Ff(e,t,o,2,.5);bt(this.flatMidpoints_,a),t=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=Re(e);const t=e.getExtent(),n=e.getWorldExtent();if(t&&n){const r=fn(n)/fn(t);Ns(bC,n[0],n[3],r,-r,0,0,0),Po(this.flatCoordinates_,0,this.flatCoordinates_.length,2,bC,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new qi(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=m1((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const n=this.simplifiedGeometry_.getFlatCoordinates();let r;switch(this.type_){case"LineString":n.length=i0(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,n,0),r=[n.length];break;case"MultiLineString":r=[],n.length=nw(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,n,0,r);break;case"Polygon":r=[],n.length=iy(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),n,0,r);break}return r&&(this.simplifiedGeometry_=new qi(this.type_,n,r,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}qi.prototype.getFlatCoordinates=qi.prototype.getOrientedFlatCoordinates;const er={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function nk(i,e){return[[-1/0,-1/0,1/0,1/0]]}function rk(i,e){return[i]}class io extends fr{constructor(e,t,n){super(e),this.feature=t,this.features=n}}class gn extends jv{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=cc,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(vt(this.format_,"`format` must be set when `url` is set"),this.loader_=IC(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:nk;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new _m:null,this.loadedExtentsRtree_=new _m,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let n,r;Array.isArray(e.features)?r=e.features:e.features&&(n=e.features,r=n.getArray()),!t&&n===void 0&&(n=new bi(r)),r!==void 0&&this.addFeaturesInternal(r),n!==void 0&&this.bindFeaturesCollection_(n)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=ke(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const n=e.getGeometry();if(n){const r=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(r,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new io(er.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof qi||(this.featureChangeKeys_[e]=[ht(t,ze.CHANGE,this.handleFeatureChange_,this),ht(t,ka.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let n=!0;if(t.getId()!==void 0){const r=String(t.getId());if(!(r in this.idIndex_))this.idIndex_[r]=t;else if(t instanceof qi){const s=this.idIndex_[r];s instanceof qi?Array.isArray(s)?s.push(t):this.idIndex_[r]=[s,t]:n=!1}else n=!1}return n&&(vt(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),n}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],n=[],r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s],l=ke(a);this.addToIndex_(l,a)&&n.push(a)}for(let s=0,o=n.length;s<o;s++){const a=n[s],l=ke(a);this.setupChangeEvents_(l,a);const c=a.getGeometry();if(c){const u=c.getExtent();t.push(u),r.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(t,r),this.hasListener(er.ADDFEATURE))for(let s=0,o=n.length;s<o;s++)this.dispatchEvent(new io(er.ADDFEATURE,n[s]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(er.ADDFEATURE,function(n){t||(t=!0,e.push(n.feature),t=!1)}),this.addEventListener(er.REMOVEFEATURE,function(n){t||(t=!0,e.remove(n.feature),t=!1)}),e.addEventListener(Ii.ADD,n=>{t||(t=!0,this.addFeature(n.element),t=!1)}),e.addEventListener(Ii.REMOVE,n=>{t||(t=!0,this.removeFeature(n.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const n in this.featureChangeKeys_)this.featureChangeKeys_[n].forEach(zt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const n=r=>{this.removeFeatureInternal(r)};this.featuresRtree_.forEach(n);for(const r in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[r])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new io(er.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const n=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(n,function(r){const s=r.getGeometry();if(s instanceof qi||s.intersectsCoordinate(e))return t(r)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(n){const r=n.getGeometry();if(r instanceof qi||r.intersectsExtent(e)){const s=t(n);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),ko(this.nullGeometryFeatures_)||bt(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(n){t.push(n)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const r=mG(e,t);return[].concat(...r.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const n=e[0],r=e[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return t=t||Do,this.featuresRtree_.forEachInExtent(l,function(c){if(t(c)){const u=c.getGeometry(),h=a;if(a=u instanceof qi?0:u.closestPointXY(n,r,o,a),a<h){s=c;const d=Math.sqrt(a);l[0]=n-d,l[1]=r-d,l[2]=n+d,l[3]=r+d}}}),s}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,n=ke(t),r=t.getGeometry();if(!r)n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[n]=t);else{const o=r.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(o,t)):this.featuresRtree_&&this.featuresRtree_.update(o,t)}const s=t.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[o]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[n]=t;this.changed(),this.dispatchEvent(new io(er.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:ke(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&ko(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,n){const r=this.loadedExtentsRtree_,s=this.strategy_(e,t,n);for(let o=0,a=s.length;o<a;++o){const l=s[o];r.forEachInExtent(l,function(u){return Gr(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new io(er.FEATURESLOADSTART)),this.loader_.call(this,l,t,n,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new io(er.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new io(er.FEATURESLOADERROR))}),r.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let n;t.forEachInExtent(e,function(r){if(No(r.extent,e))return n=r,!0}),n&&t.remove(n)}removeFeature(e){if(!e)return;const t=ke(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=ke(e),n=this.featureChangeKeys_[t];if(!n)return;n.forEach(zt),delete this.featureChangeKeys_[t];const r=e.getId();return r!==void 0&&delete this.idIndex_[r.toString()],delete this.uidIndex_[t],this.dispatchEvent(new io(er.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const n in this.idIndex_){const r=this.idIndex_[n];if(e instanceof qi&&Array.isArray(r)&&r.includes(e))r.splice(r.indexOf(e),1);else if(this.idIndex_[n]===e){delete this.idIndex_[n],t=!0;break}}return t}setLoader(e){this.loader_=e}setUrl(e){vt(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(IC(e,this.format_))}}const Ao=4;function hh(i,e){const t=[];Object.keys(e).forEach(function(r){e[r]!==null&&e[r]!==void 0&&t.push(r+"="+encodeURIComponent(e[r]))});const n=t.join("&");return i=i.replace(/[?&]$/,""),i+=i.includes("?")?"&":"?",i+n}function Im(i){return Array.isArray(i)?Math.min(...i):i}class sk extends I1{constructor(e,t,n,r,s,o,a){let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);let c=t.getExtent();c&&t.canWrapX()&&(c=c.slice(),c[0]=-1/0,c[2]=1/0);const u=c?So(n,c):n,h=hs(u),d=nh(e,t,h,r),f=S1,g=new F1(e,t,u,l,d*f,r),p=g.calculateSourceExtent(),m=Tc(p)?null:o(p,d,s),v=m?Ye.IDLE:Ye.EMPTY,y=m?m.getPixelRatio():1;super(n,r,y,v),this.targetProj_=t,this.maxSourceExtent_=l,this.triangulation_=g,this.targetResolution_=r,this.targetExtent_=n,this.sourceImage_=m,this.sourcePixelRatio_=y,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Ye.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==Ye.LOADED){const t=Rt(this.targetExtent_)/this.targetResolution_,n=fn(this.targetExtent_)/this.targetResolution_;this.canvas_=N1(t,n,this.sourcePixelRatio_,Im(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==Ye.IDLE){this.state=Ye.LOADING,this.changed();const e=this.sourceImage_.getState();e==Ye.LOADED||e==Ye.ERROR?this.reproject_():(this.sourceListenerKey_=ht(this.sourceImage_,ze.CHANGE,function(t){const n=this.sourceImage_.getState();(n==Ye.LOADED||n==Ye.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){zt(this.sourceListenerKey_),this.sourceListenerKey_=null}}const K0={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ok extends fr{constructor(e,t){super(e),this.image=t}}class ak extends jv{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const n=Vg(t,e,0);e=t[n]}return e}getImage(e,t,n,r){const s=this.getProjection();if(!s||!r||$r(s,r))return s&&(r=s),this.getImageInternal(e,t,n,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&$r(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==t&&No(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new sk(s,r,e,t,n,(o,a,l)=>this.getImageInternal(o,a,l,s),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,n,r){if(this.loader){const s=Nw(e,t,n,1),o=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&Gr(this.wantedExtent_,s)||Gr(this.image.getExtent(),s))&&(this.wantedResolution_&&Im(this.wantedResolution_)===o||Im(this.image.getResolution())===o)))return this.image;this.wantedProjection_=r,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new I1(s,o,n,this.loader),this.image.addEventListener(ze.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let n;switch(t.getState()){case Ye.LOADING:this.loading=!0,n=K0.IMAGELOADSTART;break;case Ye.LOADED:this.loading=!1,n=K0.IMAGELOADEND;break;case Ye.ERROR:this.loading=!1,n=K0.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new ok(n,t))}}function lk(i,e){i.getImage().src=e}function Nw(i,e,t,n){const r=e/t,s=hs(i),o=po(Rt(i)/r,Ao),a=po(fn(i)/r,Ao),l=po((n-1)*o/2,Ao),c=o+2*l,u=po((n-1)*a/2,Ao),h=a+2*u;return ih(s,r,0,[c,h])}const Nf="1.3.0",SC=[101,101];function Uw(i,e,t,n,r){r.WIDTH=t[0],r.HEIGHT=t[1];const s=n.getAxisOrientation();let o;const a=Gv(r.VERSION,"1.3")>=0;return r[a?"CRS":"SRS"]=n.getCode(),a&&s.substr(0,2)=="ne"?o=[e[1],e[0],e[3],e[2]]:o=e,r.BBOX=o.join(","),hh(i,r)}function Bw(i,e,t,n,r,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/t,l=[J_(Rt(i)/a,Ao),J_(fn(i)/a,Ao)];if(t!=1)switch(o){case"geoserver":const u=90*t+.5|0;"FORMAT_OPTIONS"in s?s.FORMAT_OPTIONS+=";dpi:"+u:s.FORMAT_OPTIONS="dpi:"+u;break;case"mapserver":s.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":s.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return Uw(r,i,l,n,s)}function Uf(i,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:Nf,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},i)}function ck(i){const e=i.hidpi===void 0?!0:i.hidpi,t=Re(i.projection||"EPSG:3857"),n=i.ratio||1.5,r=i.load||w1;return(s,o,a)=>{s=Nw(s,o,a,n),a!=1&&(!e||i.serverType===void 0)&&(a=1);const l=Bw(s,o,a,t,i.url,Uf(i.params,"GetMap"),i.serverType),c=new Image;return i.crossOrigin!==null&&(c.crossOrigin=i.crossOrigin),r(c,l).then(u=>({image:u,extent:s,pixelRatio:a}))}}function uk(i,e,t){if(i.url===void 0)return;const n=Re(i.projection||"EPSG:3857"),r=ih(e,t,0,SC),s={QUERY_LAYERS:i.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(s,Uf(i.params,"GetFeatureInfo"),i.params);const o=Sl((e[0]-r[0])/t,Ao),a=Sl((r[3]-e[1])/t,Ao),l=Gv(s.VERSION,"1.3")>=0;return s[l?"I":"X"]=o,s[l?"J":"Y"]=a,Uw(i.url,r,SC,n,s)}function hk(i,e){if(i.url===void 0)return;const t={SERVICE:"WMS",VERSION:Nf,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(i.params===void 0||i.params.LAYER===void 0){const n=i.params.LAYERS;if(!(!Array.isArray(n)||n.length===1))return;t.LAYER=n}if(e!==void 0){const n=Re(i.projection||"EPSG:3857").getMetersPerUnit()||1,r=28e-5;t.SCALE=e*n/r}return Object.assign(t,i.params),hh(i.url,t)}class py extends $g{constructor(e){e=e||{};const t=Object.assign({},e.params),n="TRANSPARENT"in t?t.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!n,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=Yn(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,n,r){const s=Re(n),o=this.getProjection()||s;let a=this.getTileGrid();a||(a=this.getTileGridForProjection(o));const l=Et(e,s,o),c=nh(o,s,e,t),u=a.getZForResolution(c,this.zDirection),h=a.getResolution(u),d=a.getTileCoordForCoordAndZ(l,u);if(a.getResolutions().length<=d[0])return;let f=a.getTileCoordExtent(d,this.tmpExtent_);const g=this.gutter_;g!==0&&(f=Fr(f,h*g,f));const p={QUERY_LAYERS:this.params_.LAYERS};Object.assign(p,Uf(this.params_,"GetFeatureInfo"),r);const m=Math.floor((l[0]-f[0])/h),v=Math.floor((f[3]-l[1])/h);return p[this.v13_?"I":"X"]=m,p[this.v13_?"J":"Y"]=v,this.getRequestUrl_(d,f,1,o||s,p)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const n={SERVICE:"WMS",VERSION:Nf,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const r=this.params_.LAYERS;if(!(!Array.isArray(r)||r.length===1))return;n.LAYER=r}if(e!==void 0){const r=this.getProjection()?this.getProjection().getMetersPerUnit():1,s=28e-5;n.SCALE=e*r/s}return Object.assign(n,t),hh(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,n,r,s){const o=this.urls;if(!o)return;let a;if(o.length==1)a=o[0];else{const l=xa(j1(e),o.length);a=o[l]}return Bw(t,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(e[0]),n,r,a,s,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const n in this.params_)t[e++]=n+"-"+this.params_[n];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||Nf;this.v13_=Gv(e,"1.3")>=0}tileUrlFunction(e,t,n){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),r.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const s=r.getResolution(e[0]);let o=r.getTileCoordExtent(e,this.tmpExtent_);const a=this.gutter_;a!==0&&(o=Fr(o,s*a,o));const l=Object.assign({},Uf(this.params_,"GetMap"));return this.getRequestUrl_(e,o,t,n,l)}}let my=class extends $g{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",n=e.tileGrid;let r=e.urls;r===void 0&&e.url!==void 0&&(r=Yv(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:r,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=um(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(um(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?hh(e,n):e.replace(/\{(\w+?)\}/g,function(o,a){return a.toLowerCase()in n?n[a.toLowerCase()]:o});const r=this.tileGrid,s=this.dimensions_;return function(o,a,l){if(!o)return;const c={TileMatrix:r.getMatrixId(o[0]),TileCol:o[1],TileRow:o[2]};Object.assign(c,s);let u=e;return t=="KVP"?u=hh(u,c):u=u.replace(/\{(\w+?)\}/g,function(h,d){return c[d]}),u}}};class dk extends ak{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:lk,this.params_=e.params,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,n,r){const s=Re(n),o=this.getProjection();o&&o!==s&&(t=nh(o,s,e,t),e=Et(e,s,o));const a={url:this.url_,params:{...this.params_,...r},projection:o||s};return uk(a,e,t)}getLegendUrl(e,t){return hk({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,n,r){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==r)&&(this.loaderProjection_=r,this.loader=ck({crossOrigin:this.crossOrigin_,params:this.params_,projection:r,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(s,o)=>(this.image.setImage(s),this.imageLoadFunction_(this.image,o),w1(s))})),super.getImageInternal(e,t,n,r))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const fk=dk;class vy{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=Sn(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new vy({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return We()}getImage(e){return We()}getHitDetectionImage(){return We()}getPixelRatio(e){return 1}getImageState(){return We()}getImageSize(){return We()}getOrigin(){return We()}getSize(){return We()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Sn(e)}listenImageChange(e){We()}load(){We()}unlistenImageChange(e){We()}}const Bf=vy;function is(i){return Array.isArray(i)?gw(i):i}class s0 extends Bf{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const e=this.getScale(),t=new s0({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),n=this.getScaleArray();return[e[0]/2-t[0]/n[0],e[1]/2+t[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const n=this.renderOptions_,r=yn(n.size*e,n.size*e);this.draw_(n,r,e),t=r.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return Ye.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,n){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let r=this.radius_,s=this.radius2_===void 0?r:this.radius2_;if(r<s){const I=r;r=s,s=I}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),c=Math.sqrt(s*s-l*l),u=r-c,h=Math.sqrt(l*l+u*u),d=h/l;if(e==="miter"&&d<=n)return d*t;const f=t/2/d,g=t/2*(u/h),m=Math.sqrt((r+f)*(r+f)+g*g)-r;if(this.radius2_===void 0||e==="bevel")return m*2;const v=r*Math.sin(a),y=Math.sqrt(r*r-v*v),A=s-y,C=Math.sqrt(v*v+A*A)/v;if(C<=n){const I=C*t/2-s-r;return 2*Math.max(m,I)}return m*2}createRenderOptions(){let e=gc,t=pc,n=0,r=null,s=0,o,a=0;this.stroke_&&(o=is(this.stroke_.getColor()??lh),a=this.stroke_.getWidth()??uh,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??pc,e=this.stroke_.getLineCap()??gc,n=this.stroke_.getMiterLimit()??ah);const l=this.calculateLineJoinSize_(t,a,n),c=Math.max(this.radius_,this.radius2_||0),u=Math.ceil(2*c+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:t,miterLimit:n}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,n){if(t.scale(n,n),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let r=this.fill_.getColor();r===null&&(r=Un),t.fillStyle=is(r),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let n=this.fill_.getColor(),r=0;typeof n=="string"&&(n=oh(n)),n===null?r=1:Array.isArray(n)&&(r=n.length===4?n[3]:1),r===0&&(t=yn(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const n=this.radius_;if(t===1/0)e.arc(0,0,n,0,2*Math.PI);else{const r=this.radius2_===void 0?n:this.radius2_;this.radius2_!==void 0&&(t*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/t;for(let a=0;a<t;a++){const l=s+a*o,c=a%2===0?n:r;e.lineTo(c*Math.cos(l),c*Math.sin(l))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=Un,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}class yy extends s0{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new yy({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}const Ei=yy;class Ay{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Ay({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}const $e=Ay;class je{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new je({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}let xl=class jw{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=xC,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new jw({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=xC,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function gk(i){let e;if(typeof i=="function")e=i;else{let t;Array.isArray(i)?t=i:(vt(typeof i.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[i]),e=function(){return t}}return e}let J0=null;function pk(i,e){if(!J0){const t=new $e({color:"rgba(255,255,255,0.4)"}),n=new je({color:"#3399CC",width:1.25});J0=[new xl({image:new Ei({fill:t,stroke:n,radius:5}),fill:t,stroke:n})]}return J0}function _y(){const i={},e=[255,255,255,1],t=[0,153,255,1],n=3;return i.Polygon=[new xl({fill:new $e({color:[255,255,255,.5]})})],i.MultiPolygon=i.Polygon,i.LineString=[new xl({stroke:new je({color:e,width:n+2})}),new xl({stroke:new je({color:t,width:n})})],i.MultiLineString=i.LineString,i.Circle=i.Polygon.concat(i.LineString),i.Point=[new xl({image:new Ei({radius:n*2,fill:new $e({color:t}),stroke:new je({color:e,width:n/2})}),zIndex:1/0})],i.MultiPoint=i.Point,i.GeometryCollection=i.Polygon.concat(i.LineString,i.Point),i}function xC(i){return i.getGeometry()}const Ee=xl;let eu=null;class mk extends Gh{constructor(e,t,n,r,s){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=r===void 0?Ye.IDLE:r,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===Ye.LOADED){eu||(eu=yn(1,1,void 0,{willReadFrequently:!0})),eu.drawImage(this.image_,0,0);try{eu.getImageData(0,0,1,1),this.tainted_=!1}catch{eu=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(ze.CHANGE)}handleImageError_(){this.imageState_=Ye.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ye.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],n=yn(e,t);n.fillRect(0,0,e,t),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ye.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ye.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&E1(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==Ye.LOADED)return;const t=this.image_,n=document.createElement("canvas");n.width=Math.ceil(t.width*e),n.height=Math.ceil(t.height*e);const r=n.getContext("2d");r.scale(e,e),r.drawImage(t,0,0),r.globalCompositeOperation="multiply",r.fillStyle=dw(this.color_),r.fillRect(0,0,n.width/e,n.height/e),r.globalCompositeOperation="destination-in",r.drawImage(t,0,0),this.canvas_[e]=n}}function vk(i,e,t,n,r){let s=e===void 0?void 0:Mf.get(e,t,r);return s||(s=new mk(i,i instanceof HTMLImageElement?i.src||void 0:e,t,n,r),Mf.set(e,t,r,s)),s}function PC(i,e,t,n){return t!==void 0&&n!==void 0?[t/i,n/e]:t!==void 0?t/i:n!==void 0?n/e:1}class Qt extends Bf{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,n=e.rotation!==void 0?e.rotation:0,r=e.scale!==void 0?e.scale:1,s=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:n,scale:r,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:s,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const o=e.img!==void 0?e.img:null;let a=e.src;vt(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||ke(o)),vt(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),vt(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(e.src!==void 0?l=Ye.IDLE:o!==void 0&&(o instanceof HTMLImageElement?o.complete?l=o.src?Ye.LOADED:Ye.IDLE:l=Ye.LOADING:l=Ye.LOADED),this.color_=e.color!==void 0?oh(e.color):null,this.iconImage_=vk(o,a,this.crossOrigin_,l,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let c,u;if(e.size)[c,u]=e.size;else{const h=this.getImage(1);if(h.width&&h.height)c=h.width,u=h.height;else if(h instanceof HTMLImageElement){this.initialOptions_=e;const d=()=>{if(this.unlistenImageChange(d),!this.initialOptions_)return;const f=this.iconImage_.getSize();this.setScale(PC(f[0],f[1],e.width,e.height))};this.listenImageChange(d);return}}c!==void 0&&this.setScale(PC(c,u,e.width,e.height))}}clone(){let e,t,n;return this.initialOptions_?(t=this.initialOptions_.width,n=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Qt({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:n,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const r=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!r)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=r[0]),this.anchorYUnits_=="fraction"&&(e[1]*=r[1])}if(this.anchorOrigin_!="top-left"){if(!r)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+r[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+r[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),n=this.getScaleArray();return[e[0]-t[0]/n[0],e[1]+t[1]/n[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),n=this.iconImage_.getSize();if(!t||!n)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=n[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=n[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==Ye.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==Ye.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(ze.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(ze.CHANGE,e)}}const yk="#333";class Cy{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=Sn(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new $e({color:yk}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new Cy({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=Sn(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}const Nr=Cy;let Fc=0;const Nc=0,ui=1<<Fc++,De=1<<Fc++,Or=1<<Fc++,ln=1<<Fc++,Uo=1<<Fc++,On=Math.pow(2,Fc)-1,zw={[ui]:"boolean",[De]:"number",[Or]:"string",[ln]:"color",[Uo]:"number[]"},Ak=Object.keys(zw).map(Number).sort(Oo);function pn(i){const e=[];for(const t of Ak)_k(i,t)&&e.push(zw[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function _k(i,e){return(i&e)===e}function ss(i,e){return!!(i&e)}function o0(i,e){return i===e}class _o{constructor(e,t){this.type=e,this.value=t}}class Ck{constructor(e,t,...n){this.type=e,this.operator=t,this.args=n}}function Vw(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function Ik(i){switch(i){case"string":return Or;case"color":return ln;case"number":return De;case"boolean":return ui;case"number[]":return Uo;default:throw new Error(`Unrecognized type hint: ${i}`)}}function Ot(i,e,t){switch(typeof i){case"boolean":return new _o(ui,i);case"number":return new _o(De,i);case"string":{let r=Or;return LO(i)&&(r|=ln),o0(r&t,Nc)||(r&=t),new _o(r,i)}}if(!Array.isArray(i))throw new Error("Expression must be an array or a primitive value");if(i.length===0)throw new Error("Empty expression");if(typeof i[0]=="string")return Gk(i,e,t);for(const r of i)if(typeof r!="number")throw new Error("Expected an array of numbers");let n=Uo;return(i.length===3||i.length===4)&&(n|=ln),t&&(n&=t),new _o(n,i)}const re={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},Ek={[re.Get]:et(([i,e])=>e!==void 0?Ik(e.value):On,ut(1,2),wk),[re.Var]:et(([i])=>i.type,ut(1,1),bk),[re.Id]:et(De|Or,tu,Sk),[re.Concat]:et(Or,ut(2,1/0),xt(On)),[re.GeometryType]:et(Or,tu),[re.Resolution]:et(De,tu),[re.Zoom]:et(De,tu),[re.Time]:et(De,tu),[re.Any]:et(ui,ut(2,1/0),xt(ui)),[re.All]:et(ui,ut(2,1/0),xt(ui)),[re.Not]:et(ui,ut(1,1),xt(ui)),[re.Equal]:et(ui,ut(2,2),xt(On),ia),[re.NotEqual]:et(ui,ut(2,2),xt(On),ia),[re.GreaterThan]:et(ui,ut(2,2),xt(On),ia),[re.GreaterThanOrEqualTo]:et(ui,ut(2,2),xt(On),ia),[re.LessThan]:et(ui,ut(2,2),xt(On),ia),[re.LessThanOrEqualTo]:et(ui,ut(2,2),xt(On),ia),[re.Multiply]:et(i=>{let e=De|ln;for(let t=0;t<i.length;t++)e&=i[t].type;return e},ut(2,1/0),xt(De|ln),ia),[re.Divide]:et(De,ut(2,2),xt(De)),[re.Add]:et(De,ut(2,1/0),xt(De)),[re.Subtract]:et(De,ut(2,2),xt(De)),[re.Clamp]:et(De,ut(3,3),xt(De)),[re.Mod]:et(De,ut(2,2),xt(De)),[re.Pow]:et(De,ut(2,2),xt(De)),[re.Abs]:et(De,ut(1,1),xt(De)),[re.Floor]:et(De,ut(1,1),xt(De)),[re.Ceil]:et(De,ut(1,1),xt(De)),[re.Round]:et(De,ut(1,1),xt(De)),[re.Sin]:et(De,ut(1,1),xt(De)),[re.Cos]:et(De,ut(1,1),xt(De)),[re.Atan]:et(De,ut(1,2),xt(De)),[re.Sqrt]:et(De,ut(1,1),xt(De)),[re.Match]:et(i=>{let e=On;for(let t=2;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},ut(4,1/0),MC,Pk),[re.Between]:et(ui,ut(3,3),xt(De)),[re.Interpolate]:et(i=>{let e=ln|De;for(let t=3;t<i.length;t+=2)e&=i[t].type;return e},ut(6,1/0),MC,Mk),[re.Case]:et(i=>{let e=On;for(let t=1;t<i.length;t+=2)e&=i[t].type;return e&=i[i.length-1].type,e},ut(3,1/0),xk,Rk),[re.In]:et(ui,ut(2,2),Tk),[re.Number]:et(De,ut(1,1/0),xt(On)),[re.String]:et(Or,ut(1,1/0),xt(On)),[re.Array]:et(i=>i.length===3||i.length===4?Uo|ln:Uo,ut(1,1/0),xt(De)),[re.Color]:et(ln,ut(3,4),xt(De)),[re.Band]:et(De,ut(1,3),xt(De)),[re.Palette]:et(ln,ut(2,2),Lk)};function wk(i,e){const t=Ot(i[1],e);if(!(t instanceof _o))throw new Error("Expected a literal argument for get operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(t.value),i.length===3){const n=Ot(i[2],e);return[t,n]}return[t]}function bk(i,e,t,n){const r=i[1];if(typeof r!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||e.style.variables[r]===void 0)return[new _o(On,r)];const s=e.style.variables[r],o=Ot(s,e);if(o.value=r,n&&!ss(n,o.type))throw new Error(`The variable ${r} has type ${pn(o.type)} but the following type was expected: ${pn(n)}`);return[o]}function Sk(i,e){e.featureId=!0}function tu(i,e){const t=i[0];if(i.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function ut(i,e){return function(t,n){const r=t[0],s=t.length-1;if(i===e){if(s!==i){const o=i===1?"":"s";throw new Error(`Expected ${i} argument${o} for ${r}, got ${s}`)}}else if(s<i||s>e){const o=e===1/0?`${i} or more`:`${i} to ${e}`;throw new Error(`Expected ${o} arguments for ${r}, got ${s}`)}}}function xt(i){return function(e,t){const n=e[0],r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const a=Ot(e[o+1],t);if(!ss(i,a.type)){const l=pn(i),c=pn(a.type);throw new Error(`Unexpected type for argument ${o} of ${n} operation, got ${l} but expected ${c}`)}a.type&=i,s[o]=a}return s}}function ia(i,e,t){const n=i[0],r=i.length-1;let s=On;for(let a=0;a<t.length;++a)s&=t[a].type;if(s===Nc)throw new Error(`No common type could be found for arguments of ${n} operation`);const o=new Array(r);for(let a=0;a<r;++a)o[a]=Ot(i[a+1],e,s);return o}function xk(i,e){const t=i[0],n=i.length-1;if(n%2===0)throw new Error(`An odd amount of arguments was expected for operation ${t}, got ${JSON.stringify(n)} instead`)}function MC(i,e){const t=i[0],n=i.length-1;if(n%2===1)throw new Error(`An even amount of arguments was expected for operation ${t}, got ${JSON.stringify(n)} instead`)}function Pk(i,e,t,n){const r=i.length-1;let o=Ot(i[1],e).type;const a=Ot(i[i.length-1],e);let l=n!==void 0?n&a.type:a.type;const c=new Array(r-2);for(let h=0;h<r-2;h+=2){const d=Ot(i[h+2],e),f=Ot(i[h+3],e);o&=d.type,l&=f.type,c[h]=d,c[h+1]=f}const u=Or|De|ui;if(!ss(u,o))throw new Error(`Expected an input of type ${pn(u)} for the interpolate operation, got ${pn(o)} instead`);if(o0(l,Nc))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(i));for(let h=0;h<r-2;h+=2){const d=Ot(i[h+2],e,o),f=Ot(i[h+3],e,l);c[h]=d,c[h+1]=f}return[Ot(i[1],e,o),...c,Ot(i[i.length-1],e,l)]}function Mk(i,e,t,n){const r=i[1];let s;switch(r[0]){case"linear":s=1;break;case"exponential":if(s=r[1],typeof s!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);s=Ot(s,e);let o=Ot(i[2],e);if(!ss(De,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${pn(o.type)} instead`);o=Ot(i[2],e,De);const a=new Array(i.length-3);for(let l=0;l<a.length;l+=2){let c=Ot(i[l+3],e);if(!ss(De,c.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${pn(c.type)} at position ${l+2} instead`);let u=Ot(i[l+4],e);if(!ss(De|ln,u.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${pn(u.type)} at position ${l+3} instead`);c=Ot(i[l+3],e,De),u=Ot(i[l+4],e,De|ln),a[l]=c,a[l+1]=u}return[s,o,...a]}function Rk(i,e,t,n){const r=Ot(i[i.length-1],e);let s=n!==void 0?n&r.type:r.type;const o=new Array(i.length-1);for(let a=0;a<o.length-1;a+=2){const l=Ot(i[a+1],e),c=Ot(i[a+2],e);if(!ss(ui,l.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${pn(l.type)} at position ${a} instead`);s&=c.type,o[a]=l,o[a+1]=c}if(o0(s,Nc))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(i));for(let a=0;a<o.length-1;a+=2)o[a+1]=Ot(i[a+2],e,s);return o[o.length-1]=Ot(i[i.length-1],e,s),o}function Tk(i,e){let t=i[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof t[0]=="string"){if(t[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let n=Or|De;const r=new Array(t.length);for(let o=0;o<r.length;o++){const a=Ot(t[o],e);n&=a.type,r[o]=a}if(o0(n,Nc))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(i));return[Ot(i[1],e,n),...r]}function Lk(i,e){const t=Ot(i[1],e,De);if(t.type!==De)throw new Error(`The first argument of palette must be an number, got ${pn(t.type)} instead`);const n=i[2];if(!Array.isArray(n))throw new Error("The second argument of palette must be an array");const r=new Array(n.length);for(let s=0;s<r.length;s++){const o=Ot(n[s],e,ln);if(!(o instanceof _o))throw new Error(`The palette color at index ${s} must be a literal value`);if(!ss(o.type,ln))throw new Error(`The palette color at index ${s} should be of type color, got ${pn(o.type)} instead`);r[s]=o}return[t,...r]}function et(i,...e){return function(t,n,r){const s=t[0];let o=[];for(let l=0;l<e.length;l++)o=e[l](t,n,o,r)||o;let a=typeof i=="function"?i(o):i;if(r!==void 0){if(!ss(a,r))throw new Error(`The following expression was expected to return ${pn(r)}, but returns ${pn(a)} instead: ${JSON.stringify(t)}`);a&=r}if(a===Nc)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new Ck(a,s,...o)}}function Gk(i,e,t){const n=i[0],r=Ek[n];if(!r)throw new Error(`Unknown operator: ${n}`);return r(i,e,t)}function Ww(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function qo(i,e,t){const n=Ot(i,t);if(!ss(e,n.type)){const r=pn(e),s=pn(n.type);throw new Error(`Expected expression to be of type ${r}, got ${s}`)}return Bs(n)}function Bs(i,e){if(i instanceof _o){if(i.type===ln&&typeof i.value=="string"){const n=ly(i.value);return function(){return n}}return function(){return i.value}}const t=i.operator;switch(t){case re.Number:case re.String:return Ok(i);case re.Get:case re.Var:return Dk(i);case re.Id:return n=>n.featureId;case re.Concat:{const n=i.args.map(r=>Bs(r));return r=>"".concat(...n.map(s=>s(r).toString()))}case re.Resolution:return n=>n.resolution;case re.Any:case re.All:case re.Not:return Fk(i);case re.Equal:case re.NotEqual:case re.LessThan:case re.LessThanOrEqualTo:case re.GreaterThan:case re.GreaterThanOrEqualTo:return kk(i);case re.Multiply:case re.Divide:case re.Add:case re.Subtract:case re.Clamp:case re.Mod:case re.Pow:case re.Abs:case re.Floor:case re.Ceil:case re.Round:case re.Sin:case re.Cos:case re.Atan:case re.Sqrt:return Nk(i);case re.Match:return Uk(i);case re.Interpolate:return Bk(i);default:throw new Error(`Unsupported operator ${t}`)}}function Ok(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Bs(i.args[s]);switch(t){case re.Number:case re.String:return s=>{for(let o=0;o<n;++o){const a=r[o](s);if(typeof a===t)return a}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function Dk(i,e){const n=i.args[0].value;switch(i.operator){case re.Get:return r=>r.properties[n];case re.Var:return r=>r.variables[n];default:throw new Error(`Unsupported accessor operator ${i.operator}`)}}function kk(i,e){const t=i.operator,n=Bs(i.args[0]),r=Bs(i.args[1]);switch(t){case re.Equal:return s=>n(s)===r(s);case re.NotEqual:return s=>n(s)!==r(s);case re.LessThan:return s=>n(s)<r(s);case re.LessThanOrEqualTo:return s=>n(s)<=r(s);case re.GreaterThan:return s=>n(s)>r(s);case re.GreaterThanOrEqualTo:return s=>n(s)>=r(s);default:throw new Error(`Unsupported comparison operator ${t}`)}}function Fk(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Bs(i.args[s]);switch(t){case re.Any:return s=>{for(let o=0;o<n;++o)if(r[o](s))return!0;return!1};case re.All:return s=>{for(let o=0;o<n;++o)if(!r[o](s))return!1;return!0};case re.Not:return s=>!r[0](s);default:throw new Error(`Unsupported logical operator ${t}`)}}function Nk(i,e){const t=i.operator,n=i.args.length,r=new Array(n);for(let s=0;s<n;++s)r[s]=Bs(i.args[s]);switch(t){case re.Multiply:return s=>{let o=1;for(let a=0;a<n;++a)o*=r[a](s);return o};case re.Divide:return s=>r[0](s)/r[1](s);case re.Add:return s=>{let o=0;for(let a=0;a<n;++a)o+=r[a](s);return o};case re.Subtract:return s=>r[0](s)-r[1](s);case re.Clamp:return s=>{const o=r[0](s),a=r[1](s);if(o<a)return a;const l=r[2](s);return o>l?l:o};case re.Mod:return s=>r[0](s)%r[1](s);case re.Pow:return s=>Math.pow(r[0](s),r[1](s));case re.Abs:return s=>Math.abs(r[0](s));case re.Floor:return s=>Math.floor(r[0](s));case re.Ceil:return s=>Math.ceil(r[0](s));case re.Round:return s=>Math.round(r[0](s));case re.Sin:return s=>Math.sin(r[0](s));case re.Cos:return s=>Math.cos(r[0](s));case re.Atan:return n===2?s=>Math.atan2(r[0](s),r[1](s)):s=>Math.atan(r[0](s));case re.Sqrt:return s=>Math.sqrt(r[0](s));default:throw new Error(`Unsupported numeric operator ${t}`)}}function Uk(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Bs(i.args[r]);return r=>{const s=n[0](r);for(let o=1;o<t;o+=2)if(s===n[o](r))return n[o+1](r);return n[t-1](r)}}function Bk(i,e){const t=i.args.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=Bs(i.args[r]);return r=>{const s=n[0](r),o=n[1](r);let a,l;for(let c=2;c<t;c+=2){const u=n[c](r);let h=n[c+1](r);const d=Array.isArray(h);if(d&&(h=RO(h)),u>=o)return c===2?h:d?jk(s,o,a,l,u,h):uu(s,o,a,l,u,h);a=u,l=h}return l}}function uu(i,e,t,n,r,s){const o=r-t;if(o===0)return n;const a=e-t,l=i===1?a/o:(Math.pow(i,a)-1)/(Math.pow(i,o)-1);return n+l*(s-n)}function jk(i,e,t,n,r,s){if(r-t===0)return n;const a=pC(n),l=pC(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const u=[uu(i,e,t,a[0],r,l[0]),uu(i,e,t,a[1],r,l[1]),a[2]+uu(i,e,t,0,r,c),uu(i,e,t,n[3],r,s[3])];return fw(TO(u))}function zk(i){return!0}function Vk(i){const e=Vw(),t=Wk(i,e),n=Ww();return function(r,s){if(n.properties=r.getPropertiesInternal(),n.resolution=s,e.featureId){const o=r.getId();o!==void 0?n.featureId=o:n.featureId=null}return t(n)}}function RC(i){const e=Vw(),t=i.length,n=new Array(t);for(let o=0;o<t;++o)n[o]=Em(i[o],e);const r=Ww(),s=new Array(t);return function(o,a){if(r.properties=o.getPropertiesInternal(),r.resolution=a,e.featureId){const c=o.getId();c!==void 0?r.featureId=c:r.featureId=null}let l=0;for(let c=0;c<t;++c){const u=n[c](r);u&&(s[l]=u,l+=1)}return s.length=l,s}}function Wk(i,e){const t=i.length,n=new Array(t);for(let r=0;r<t;++r){const s=i[r],o="filter"in s?qo(s.filter,ui,e):zk;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let c=0;c<l;++c)a[c]=Em(s.style[c],e)}else a=[Em(s.style,e)];n[r]={filter:o,styles:a}}return function(r){const s=[];let o=!1;for(let a=0;a<t;++a){const l=n[a].filter;if(l(r)&&!(i[a].else&&o)){o=!0;for(const c of n[a].styles){const u=c(r);u&&s.push(u)}}}return s}}function Em(i,e){const t=dh(i,"",e),n=fh(i,"",e),r=Yk(i,e),s=Hk(i,e),o=Bn(i,"z-index",e);if(!t&&!n&&!r&&!s&&!ko(i))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(i));const a=new Ee;return function(l){let c=!0;if(t){const u=t(l);u&&(c=!1),a.setFill(u)}if(n){const u=n(l);u&&(c=!1),a.setStroke(u)}if(r){const u=r(l);u&&(c=!1),a.setText(u)}if(s){const u=s(l);u&&(c=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),c?null:a}}function dh(i,e,t){const n=Yw(i,e+"fill-color",t);if(!n)return null;const r=new $e;return function(s){const o=n(s);return o==="none"?null:(r.setColor(o),r)}}function fh(i,e,t){const n=Bn(i,e+"stroke-width",t),r=Yw(i,e+"stroke-color",t);if(!n&&!r)return null;const s=uo(i,e+"stroke-line-cap",t),o=uo(i,e+"stroke-line-join",t),a=Hw(i,e+"stroke-line-dash",t),l=Bn(i,e+"stroke-line-dash-offset",t),c=Bn(i,e+"stroke-miter-limit",t),u=new je;return function(h){if(r){const d=r(h);if(d==="none")return null;u.setColor(d)}if(n&&u.setWidth(n(h)),s){const d=s(h);if(d!=="butt"&&d!=="round"&&d!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(d)}if(o){const d=o(h);if(d!=="bevel"&&d!=="round"&&d!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(d)}return a&&u.setLineDash(a(h)),l&&u.setLineDashOffset(l(h)),c&&u.setMiterLimit(c(h)),u}}function Yk(i,e){const t="text-",n=uo(i,t+"value",e);if(!n)return null;const r=dh(i,t,e),s=dh(i,t+"background-",e),o=fh(i,t,e),a=fh(i,t+"background-",e),l=uo(i,t+"font",e),c=Bn(i,t+"max-angle",e),u=Bn(i,t+"offset-x",e),h=Bn(i,t+"offset-y",e),d=gh(i,t+"overflow",e),f=uo(i,t+"placement",e),g=Bn(i,t+"repeat",e),p=a0(i,t+"scale",e),m=gh(i,t+"rotate-with-view",e),v=Bn(i,t+"rotation",e),y=uo(i,t+"align",e),A=uo(i,t+"justify",e),_=uo(i,t+"baseline",e),C=Hw(i,t+"padding",e),I=new Nr({});return function(b){if(I.setText(n(b)),r&&I.setFill(r(b)),s&&I.setBackgroundFill(s(b)),o&&I.setStroke(o(b)),a&&I.setBackgroundStroke(a(b)),l&&I.setFont(l(b)),c&&I.setMaxAngle(c(b)),u&&I.setOffsetX(u(b)),h&&I.setOffsetY(h(b)),d&&I.setOverflow(d(b)),f){const S=f(b);if(S!=="point"&&S!=="line")throw new Error("Expected point or line for text-placement");I.setPlacement(S)}if(g&&I.setRepeat(g(b)),p&&I.setScale(p(b)),m&&I.setRotateWithView(m(b)),v&&I.setRotation(v(b)),y){const S=y(b);if(S!=="left"&&S!=="center"&&S!=="right"&&S!=="end"&&S!=="start")throw new Error("Expected left, right, center, start, or end for text-align");I.setTextAlign(S)}if(A){const S=A(b);if(S!=="left"&&S!=="right"&&S!=="center")throw new Error("Expected left, right, or center for text-justify");I.setJustify(S)}if(_){const S=_(b);if(S!=="bottom"&&S!=="top"&&S!=="middle"&&S!=="alphabetic"&&S!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");I.setTextBaseline(S)}return C&&I.setPadding(C(b)),I}}function Hk(i,e){return"icon-src"in i?qk(i,e):"shape-points"in i?Xk(i,e):"circle-radius"in i?Zk(i,e):null}function qk(i,e){const t="icon-",n=t+"src",r=qw(i[n],n),s=jf(i,t+"anchor",e),o=a0(i,t+"scale",e),a=Bn(i,t+"opacity",e),l=jf(i,t+"displacement",e),c=Bn(i,t+"rotation",e),u=gh(i,t+"rotate-with-view",e),h=TC(i,t+"anchor-origin"),d=LC(i,t+"anchor-x-units"),f=LC(i,t+"anchor-y-units"),g=$k(i,t+"color"),p=Jk(i,t+"cross-origin"),m=Qk(i,t+"offset"),v=TC(i,t+"offset-origin"),y=Pl(i,t+"width"),A=Pl(i,t+"height"),_=Kk(i,t+"size"),C=Iy(i,t+"declutter"),I=new Qt({src:r,anchorOrigin:h,anchorXUnits:d,anchorYUnits:f,color:g,crossOrigin:p,offset:m,offsetOrigin:v,height:A,width:y,size:_,declutterMode:C});return function(b){return a&&I.setOpacity(a(b)),l&&I.setDisplacement(l(b)),c&&I.setRotation(c(b)),u&&I.setRotateWithView(u(b)),o&&I.setScale(o(b)),s&&I.setAnchor(s(b)),I}}function Xk(i,e){const t="shape-",n=t+"points",r=Xw(i[n],n),s=dh(i,t,e),o=fh(i,t,e),a=a0(i,t+"scale",e),l=jf(i,t+"displacement",e),c=Bn(i,t+"rotation",e),u=gh(i,t+"rotate-with-view",e),h=Pl(i,t+"radius"),d=Pl(i,t+"radius1"),f=Pl(i,t+"radius2"),g=Pl(i,t+"angle"),p=Iy(i,t+"declutter-mode"),m=new s0({points:r,radius:h,radius1:d,radius2:f,angle:g,declutterMode:p});return function(v){return s&&m.setFill(s(v)),o&&m.setStroke(o(v)),l&&m.setDisplacement(l(v)),c&&m.setRotation(c(v)),u&&m.setRotateWithView(u(v)),a&&m.setScale(a(v)),m}}function Zk(i,e){const t="circle-",n=dh(i,t,e),r=fh(i,t,e),s=Bn(i,t+"radius",e),o=a0(i,t+"scale",e),a=jf(i,t+"displacement",e),l=Bn(i,t+"rotation",e),c=gh(i,t+"rotate-with-view",e),u=Iy(i,t+"declutter-mode"),h=new Ei({radius:5,declutterMode:u});return function(d){return s&&h.setRadius(s(d)),n&&h.setFill(n(d)),r&&h.setStroke(r(d)),a&&h.setDisplacement(a(d)),l&&h.setRotation(l(d)),c&&h.setRotateWithView(c(d)),o&&h.setScale(o(d)),h}}function Bn(i,e,t){if(!(e in i))return;const n=qo(i[e],De,t);return function(r){return Xw(n(r),e)}}function uo(i,e,t){if(!(e in i))return null;const n=qo(i[e],Or,t);return function(r){return qw(n(r),e)}}function gh(i,e,t){if(!(e in i))return null;const n=qo(i[e],ui,t);return function(r){const s=n(r);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${e}`);return s}}function Yw(i,e,t){if(!(e in i))return null;const n=qo(i[e],ln|Or,t);return function(r){return Zw(n(r),e)}}function Hw(i,e,t){if(!(e in i))return null;const n=qo(i[e],Uo,t);return function(r){return zh(n(r),e)}}function jf(i,e,t){if(!(e in i))return null;const n=qo(i[e],Uo,t);return function(r){const s=zh(n(r),e);if(s.length!==2)throw new Error(`Expected two numbers for ${e}`);return s}}function a0(i,e,t){if(!(e in i))return null;const n=qo(i[e],Uo|De,t);return function(r){return e3(n(r),e)}}function Pl(i,e){const t=i[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function Kk(i,e){const t=i[e];if(t!==void 0){if(typeof t=="number")return Sn(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function Jk(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function TC(i,e){const t=i[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function LC(i,e){const t=i[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function Qk(i,e){const t=i[e];if(t!==void 0)return zh(t,e)}function Iy(i,e){const t=i[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function $k(i,e){const t=i[e];if(t!==void 0)return Zw(t,e)}function zh(i,e){if(!Array.isArray(i))throw new Error(`Expected an array for ${e}`);const t=i.length;for(let n=0;n<t;++n)if(typeof i[n]!="number")throw new Error(`Expected an array of numbers for ${e}`);return i}function qw(i,e){if(typeof i!="string")throw new Error(`Expected a string for ${e}`);return i}function Xw(i,e){if(typeof i!="number")throw new Error(`Expected a number for ${e}`);return i}function Zw(i,e){if(typeof i=="string")return i;const t=zh(i,e),n=t.length;if(n<3||n>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function e3(i,e){if(typeof i=="number")return i;const t=zh(i,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}const GC={RENDER_ORDER:"renderOrder"};class Kw extends n0{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(GC.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new Gw(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(GC.RENDER_ORDER,e)}setStyle(e){this.style_=t3(e),this.styleFunction_=e===null?void 0:gk(this.style_),this.changed()}}function t3(i){if(i===void 0)return pk;if(!i)return null;if(typeof i=="function"||i instanceof Ee)return i;if(!Array.isArray(i))return RC([i]);if(i.length===0)return[];const e=i.length,t=i[0];if(t instanceof Ee){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!(o instanceof Ee))throw new Error("Expected a list of style instances");r[s]=o}return r}if("style"in t){const r=new Array(e);for(let s=0;s<e;++s){const o=i[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");r[s]=o}return Vk(r)}return RC(i)}const Ue={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},vd=[Ue.FILL],Co=[Ue.STROKE],Ca=[Ue.BEGIN_PATH],OC=[Ue.CLOSE_PATH];class Jw{drawCustom(e,t,n,r){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class Vh extends Jw{constructor(e,t,n,r){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(n){return n*t})}appendFlatPointCoordinates(e,t){const n=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=e.length;a<l;a+=t)r[0]=e[a],r[1]=e[a+1],Yg(n,r)&&(s[o++]=r[0],s[o++]=r[1]);return o}appendFlatLineCoordinates(e,t,n,r,s,o){const a=this.coordinates;let l=a.length;const c=this.getBufferedMaxExtent();o&&(t+=r);let u=e[t],h=e[t+1];const d=this.tmpCoordinate_;let f=!0,g,p,m;for(g=t+r;g<n;g+=r)d[0]=e[g],d[1]=e[g+1],m=nm(c,d),m!==p?(f&&(a[l++]=u,a[l++]=h,f=!1),a[l++]=d[0],a[l++]=d[1]):m===Ui.INTERSECTING?(a[l++]=d[0],a[l++]=d[1],f=!1):f=!0,u=d[0],h=d[1],p=m;return(s&&f||g===t+r)&&(a[l++]=u,a[l++]=h),l}drawCustomCoordinates_(e,t,n,r,s){for(let o=0,a=n.length;o<a;++o){const l=n[o],c=this.appendFlatLineCoordinates(e,t,l,r,!1,!1);s.push(c),t=l}return t}drawCustom(e,t,n,r){this.beginGeometry(e,t);const s=e.getType(),o=e.getStride(),a=this.coordinates.length;let l,c,u,h,d;switch(s){case"MultiPolygon":l=e.getOrientedFlatCoordinates(),h=[];const f=e.getEndss();d=0;for(let g=0,p=f.length;g<p;++g){const m=[];d=this.drawCustomCoordinates_(l,d,f[g],o,m),h.push(m)}this.instructions.push([Ue.CUSTOM,a,h,e,n,hm]),this.hitDetectionInstructions.push([Ue.CUSTOM,a,h,e,r||n,hm]);break;case"Polygon":case"MultiLineString":u=[],l=s=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),d=this.drawCustomCoordinates_(l,0,e.getEnds(),o,u),this.instructions.push([Ue.CUSTOM,a,u,e,n,rh]),this.hitDetectionInstructions.push([Ue.CUSTOM,a,u,e,r||n,rh]);break;case"LineString":case"Circle":l=e.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([Ue.CUSTOM,a,c,e,n,vo]),this.hitDetectionInstructions.push([Ue.CUSTOM,a,c,e,r||n,vo]);break;case"MultiPoint":l=e.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([Ue.CUSTOM,a,c,e,n,vo]),this.hitDetectionInstructions.push([Ue.CUSTOM,a,c,e,r||n,vo]));break;case"Point":l=e.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([Ue.CUSTOM,a,c,e,n]),this.hitDetectionInstructions.push([Ue.CUSTOM,a,c,e,r||n]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Ue.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Ue.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const n=e.length;let r,s,o=-1;for(t=0;t<n;++t)r=e[t],s=r[0],s==Ue.END_GEOMETRY?o=t:s==Ue.BEGIN_GEOMETRY&&(r[2]=t,ZL(this.hitDetectionInstructions,o,t),o=-1)}setFillStrokeStyle(e,t){const n=this.state;if(e){const r=e.getColor();n.fillStyle=is(r||Un)}else n.fillStyle=void 0;if(t){const r=t.getColor();n.strokeStyle=is(r||lh);const s=t.getLineCap();n.lineCap=s!==void 0?s:gc;const o=t.getLineDash();n.lineDash=o?o.slice():Ts;const a=t.getLineDashOffset();n.lineDashOffset=a||Ls;const l=t.getLineJoin();n.lineJoin=l!==void 0?l:pc;const c=t.getWidth();n.lineWidth=c!==void 0?c:uh;const u=t.getMiterLimit();n.miterLimit=u!==void 0?u:ah,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(e){const t=e.fillStyle,n=[Ue.SET_FILL_STYLE,t];return typeof t!="string"&&n.push(!0),n}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Ue.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const n=e.fillStyle;(typeof n!="string"||e.currentFillStyle!=n)&&(n!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=n)}updateStrokeStyle(e,t){const n=e.strokeStyle,r=e.lineCap,s=e.lineDash,o=e.lineDashOffset,a=e.lineJoin,l=e.lineWidth,c=e.miterLimit;(e.currentStrokeStyle!=n||e.currentLineCap!=r||s!=e.currentLineDash&&!Hs(e.currentLineDash,s)||e.currentLineDashOffset!=o||e.currentLineJoin!=a||e.currentLineWidth!=l||e.currentMiterLimit!=c)&&(n!==void 0&&t.call(this,e),e.currentStrokeStyle=n,e.currentLineCap=r,e.currentLineDash=s,e.currentLineDashOffset=o,e.currentLineJoin=a,e.currentLineWidth=l,e.currentMiterLimit=c)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Ue.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=x1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;Fr(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class i3 extends Vh{constructor(e,t,n,r){super(e,t,n,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const n=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([Ue.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ue.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const n=e.getFlatCoordinates(),r=e.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(n,r);this.instructions.push([Ue.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Ue.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const n=e.getAnchor(),r=e.getSize(),s=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=e.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=r[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const n3=i3;class r3 extends Vh{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinates_(e,t,n,r){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(e,t,n,r,!1,!1),a=[Ue.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(e,t){const n=this.state,r=n.strokeStyle,s=n.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Ue.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Ts,Ls],Ca);const o=e.getFlatCoordinates(),a=e.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(Co),this.endGeometry(t)}drawMultiLineString(e,t){const n=this.state,r=n.strokeStyle,s=n.lineWidth;if(r===void 0||s===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Ue.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Ts,Ls],Ca);const o=e.getEnds(),a=e.getFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(Co),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(Co),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(Co),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(Ca)}}const s3=r3;class o3 extends Vh{constructor(e,t,n,r){super(e,t,n,r)}drawFlatCoordinatess_(e,t,n,r){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=n.length;this.instructions.push(Ca),this.hitDetectionInstructions.push(Ca);for(let c=0;c<l;++c){const u=n[c],h=this.coordinates.length,d=this.appendFlatLineCoordinates(e,t,u,r,!0,!a),f=[Ue.MOVE_TO_LINE_TO,h,d];this.instructions.push(f),this.hitDetectionInstructions.push(f),a&&(this.instructions.push(OC),this.hitDetectionInstructions.push(OC)),t=u}return o&&(this.instructions.push(vd),this.hitDetectionInstructions.push(vd)),a&&(this.instructions.push(Co),this.hitDetectionInstructions.push(Co)),t}drawCircle(e,t){const n=this.state,r=n.fillStyle,s=n.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ue.SET_FILL_STYLE,Un]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ue.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Ts,Ls]);const o=e.getFlatCoordinates(),a=e.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[Ue.CIRCLE,l];this.instructions.push(Ca,c),this.hitDetectionInstructions.push(Ca,c),n.fillStyle!==void 0&&(this.instructions.push(vd),this.hitDetectionInstructions.push(vd)),n.strokeStyle!==void 0&&(this.instructions.push(Co),this.hitDetectionInstructions.push(Co)),this.endGeometry(t)}drawPolygon(e,t){const n=this.state,r=n.fillStyle,s=n.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ue.SET_FILL_STYLE,Un]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ue.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Ts,Ls]);const o=e.getEnds(),a=e.getOrientedFlatCoordinates(),l=e.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(t)}drawMultiPolygon(e,t){const n=this.state,r=n.fillStyle,s=n.strokeStyle;if(r===void 0&&s===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([Ue.SET_FILL_STYLE,Un]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Ue.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,Ts,Ls]);const o=e.getEndss(),a=e.getOrientedFlatCoordinates(),l=e.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let n=0,r=t.length;n<r;++n)t[n]=fa(t[n],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}const DC=o3;function a3(i,e,t,n,r){const s=[];let o=t,a=0,l=e.slice(t,2);for(;a<i&&o+r<n;){const[c,u]=l.slice(-2),h=e[o+r],d=e[o+r+1],f=Math.sqrt((h-c)*(h-c)+(d-u)*(d-u));if(a+=f,a>=i){const g=(i-a+f)/f,p=rr(c,h,g),m=rr(u,d,g);l.push(p,m),s.push(l),l=[p,m],a==i&&(o+=r),a=0}else if(a<i)l.push(e[o+r],e[o+r+1]),o+=r;else{const g=f-a,p=rr(c,h,g/f),m=rr(u,d,g/f);l.push(p,m),s.push(l),l=[p,m],a=0,o+=r}}return a>0&&s.push(l),s}function l3(i,e,t,n,r){let s=t,o=t,a=0,l=0,c=t,u,h,d,f,g,p,m,v,y,A;for(h=t;h<n;h+=r){const _=e[h],C=e[h+1];g!==void 0&&(y=_-g,A=C-p,f=Math.sqrt(y*y+A*A),m!==void 0&&(l+=d,u=Math.acos((m*y+v*A)/(d*f)),u>i&&(l>a&&(a=l,s=c,o=h),l=0,c=h-r)),d=f,m=y,v=A),g=_,p=C}return l+=f,l>a?[c,h]:[s,o]}const zf={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class c3 extends Vh{constructor(e,t,n,r){super(e,t,n,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[Un]={fillStyle:Un},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const n=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(this.text_===""||!s||!n&&!r)return;const o=this.coordinates;let a=o.length;const l=e.getType();let c=null,u=e.getStride();if(s.placement==="line"&&(l=="LineString"||l=="MultiLineString"||l=="Polygon"||l=="MultiPolygon")){if(!Jt(this.getBufferedMaxExtent(),e.getExtent()))return;let h;if(c=e.getFlatCoordinates(),l=="LineString")h=[c.length];else if(l=="MultiLineString")h=e.getEnds();else if(l=="Polygon")h=e.getEnds().slice(0,1);else if(l=="MultiPolygon"){const p=e.getEndss();h=[];for(let m=0,v=p.length;m<v;++m)h.push(p[m][0])}this.beginGeometry(e,t);const d=s.repeat,f=d?void 0:s.textAlign;let g=0;for(let p=0,m=h.length;p<m;++p){let v;d?v=a3(d*this.resolution,c,g,h[p],u):v=[c.slice(g,h[p])];for(let y=0,A=v.length;y<A;++y){const _=v[y];let C=0,I=_.length;if(f==null){const S=l3(s.maxAngle,_,0,_.length,2);C=S[0],I=S[1]}for(let S=C;S<I;S+=u)o.push(_[S],_[S+1]);const b=o.length;g=h[p],this.drawChars_(a,b),a=b}}this.endGeometry(t)}else{let h=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=e.getFlatCoordinates();break;case"LineString":c=e.getFlatMidpoint();break;case"Circle":c=e.getCenter();break;case"MultiLineString":c=e.getFlatMidpoints(),u=2;break;case"Polygon":c=e.getFlatInteriorPoint(),s.overflow||h.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const v=e.getFlatInteriorPoints();c=[];for(let y=0,A=v.length;y<A;y+=3)s.overflow||h.push(v[y+2]/this.resolution),c.push(v[y],v[y+1]);if(c.length===0)return;u=2;break}const d=this.appendFlatPointCoordinates(c,u);if(d===a)return;if(h&&(d-a)/2!==c.length/u){let v=a/2;h=h.filter((y,A)=>{const _=o[(v+A)*2]===c[A*u]&&o[(v+A)*2+1]===c[A*u+1];return _||--v,_})}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let f=s.padding;if(f!=_a&&(s.scale[0]<0||s.scale[1]<0)){let v=s.padding[0],y=s.padding[1],A=s.padding[2],_=s.padding[3];s.scale[0]<0&&(y=-y,_=-_),s.scale[1]<0&&(v=-v,A=-A),f=[v,y,A,_]}const g=this.pixelRatio;this.instructions.push([Ue.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,f==_a?_a:f.map(function(v){return v*g}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]);const p=1/g,m=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=Un,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Ue.DRAW_IMAGE,a,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[p,p],NaN,void 0,this.declutterImageWithText_,f,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?Un:this.fillKey_,this.textOffsetX_,this.textOffsetY_,h]),s.backgroundFill&&(this.state.fillStyle=m,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,n=this.textFillState_,r=this.strokeKey_;e&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:t.font,textAlign:t.textAlign||ch,justify:t.justify,textBaseline:t.textBaseline||Tf,scale:t.scale});const o=this.fillKey_;n&&(o in this.fillStates||(this.fillStates[o]={fillStyle:n.fillStyle}))}drawChars_(e,t){const n=this.textStrokeState_,r=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,c=zf[r.textBaseline],u=this.textOffsetY_*l,h=this.text_,d=n?n.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([Ue.DRAW_CHARS,e,t,c,r.overflow,a,r.maxAngle,l,u,s,d*l,h,o,1]),this.hitDetectionInstructions.push([Ue.DRAW_CHARS,e,t,c,r.overflow,a&&Un,r.maxAngle,l,u,s,d*l,h,o,1/l])}setTextStyle(e,t){let n,r,s;if(!e)this.text_="";else{const o=e.getFill();o?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=is(o.getColor()||Un)):(r=null,this.textFillState_=r);const a=e.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=a.getLineDash(),p=a.getLineDashOffset(),m=a.getWidth(),v=a.getMiterLimit();s.lineCap=a.getLineCap()||gc,s.lineDash=g?g.slice():Ts,s.lineDashOffset=p===void 0?Ls:p,s.lineJoin=a.getLineJoin()||pc,s.lineWidth=m===void 0?uh:m,s.miterLimit=v===void 0?ah:v,s.strokeStyle=is(a.getColor()||lh)}n=this.textState_;const l=e.getFont()||yw;Aw(l);const c=e.getScaleArray();n.overflow=e.getOverflow(),n.font=l,n.maxAngle=e.getMaxAngle(),n.placement=e.getPlacement(),n.textAlign=e.getTextAlign(),n.repeat=e.getRepeat(),n.justify=e.getJustify(),n.textBaseline=e.getTextBaseline()||Tf,n.backgroundFill=e.getBackgroundFill(),n.backgroundStroke=e.getBackgroundStroke(),n.padding=e.getPadding()||_a,n.scale=c===void 0?[1,1]:c;const u=e.getOffsetX(),h=e.getOffsetY(),d=e.getRotateWithView(),f=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=h===void 0?0:h,this.textRotateWithView_=d===void 0?!1:d,this.textRotation_=f===void 0?0:f,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:ke(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r?typeof r.fillStyle=="string"?r.fillStyle:"|"+ke(r.fillStyle):""}this.declutterImageWithText_=t}}const u3={Circle:DC,Default:Vh,Image:n3,LineString:s3,Polygon:DC,Text:c3};class Vf{constructor(e,t,n,r){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=r,this.resolution_=n,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const n=this.buildersByZIndex_[t];for(const r in n){const s=n[r].finish();e[t][r]=s}}return e}getBuilder(e,t){const n=e!==void 0?e.toString():"0";let r=this.buildersByZIndex_[n];r===void 0&&(r={},this.buildersByZIndex_[n]=r);let s=r[t];if(s===void 0){const o=u3[t];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[t]=s}return s}}function h3(i,e,t,n,r,s,o,a,l,c,u,h){let d=i[e],f=i[e+1],g=0,p=0,m=0,v=0;function y(){g=d,p=f,e+=n,d=i[e],f=i[e+1],v+=m,m=Math.sqrt((d-g)*(d-g)+(f-p)*(f-p))}do y();while(e<t-n&&v+m<s);let A=m===0?0:(s-v)/m;const _=rr(g,d,A),C=rr(p,f,A),I=e-n,b=v,S=s+a*l(c,r,u);for(;e<t-n&&v+m<S;)y();A=m===0?0:(S-v)/m;const R=rr(g,d,A),P=rr(p,f,A);let w;if(h){const N=[_,C,R,P];Jv(N,0,4,2,h,N,N),w=N[0]>N[2]}else w=_>R;const x=Math.PI,D=[],k=I+n===e;e=I,m=0,v=b,d=i[e],f=i[e+1];let O;if(k){y(),O=Math.atan2(f-p,d-g),w&&(O+=O>0?-x:x);const N=(R+_)/2,B=(P+C)/2;return D[0]=[N,B,(S-s)/2,O,r],D}r=r.replace(/\n/g," ");for(let N=0,B=r.length;N<B;){y();let V=Math.atan2(f-p,d-g);if(w&&(V+=V>0?-x:x),O!==void 0){let Ce=V-O;if(Ce+=Ce>x?-2*x:Ce<-x?2*x:0,Math.abs(Ce)>o)return null}O=V;const se=N;let j=0;for(;N<B;++N){const Ce=w?B-N-1:N,pe=a*l(c,r[Ce],u);if(e+n<t&&v+m<s+j+pe/2)break;j+=pe}if(N===se)continue;const Ae=w?r.substring(B-se,B-N):r.substring(se,N);A=m===0?0:(s+j/2-v)/m;const q=rr(g,d,A),Te=rr(p,f,A);D.push([q,Te,j/2,V,Ae]),s+=j}return D}const ll=Yn(),no=[],As=[],_s=[],ro=[];function kC(i){return i[3].declutterBox}const FC=new RegExp("[-----]");function Q0(i,e){return e==="start"?e=FC.test(i)?"right":"left":e==="end"&&(e=FC.test(i)?"left":"right"),zf[e]}function f3(i,e,t){return t>0&&i.push(`
`,""),i.push(e,""),i}class g3{constructor(e,t,n,r){this.overlaps=n,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=Ir(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,n,r){const s=e+t+n+r;if(this.labels_[s])return this.labels_[s];const o=r?this.strokeStates[r]:null,a=n?this.fillStates[n]:null,l=this.textStates[t],c=this.pixelRatio,u=[l.scale[0]*c,l.scale[1]*c],h=Array.isArray(e),d=l.justify?zf[l.justify]:Q0(Array.isArray(e)?e[0]:e,l.textAlign||ch),f=r&&o.lineWidth?o.lineWidth:0,g=h?e:e.split(`
`).reduce(f3,[]),{width:p,height:m,widths:v,heights:y,lineWidths:A}=BO(l,g),_=p+f,C=[],I=(_+2)*u[0],b=(m+f)*u[1],S={width:I<0?Math.floor(I):Math.ceil(I),height:b<0?Math.floor(b):Math.ceil(b),contextInstructions:C};(u[0]!=1||u[1]!=1)&&C.push("scale",u),r&&(C.push("strokeStyle",o.strokeStyle),C.push("lineWidth",f),C.push("lineCap",o.lineCap),C.push("lineJoin",o.lineJoin),C.push("miterLimit",o.miterLimit),C.push("setLineDash",[o.lineDash]),C.push("lineDashOffset",o.lineDashOffset)),n&&C.push("fillStyle",a.fillStyle),C.push("textBaseline","middle"),C.push("textAlign","center");const R=.5-d;let P=d*_+R*f;const w=[],x=[];let D=0,k=0,O=0,N=0,B;for(let V=0,se=g.length;V<se;V+=2){const j=g[V];if(j===`
`){k+=D,D=0,P=d*_+R*f,++N;continue}const Ae=g[V+1]||l.font;Ae!==B&&(r&&w.push("font",Ae),n&&x.push("font",Ae),B=Ae),D=Math.max(D,y[O]);const q=[j,P+R*v[O]+d*(v[O]-A[N]),.5*(f+D)+k];P+=v[O],r&&w.push("strokeText",q),n&&x.push("fillText",q),++O}return Array.prototype.push.apply(C,w),Array.prototype.push.apply(C,x),this.labels_[s]=S,S}replayTextBackground_(e,t,n,r,s,o,a){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,n),e.lineTo.apply(e,r),e.lineTo.apply(e,s),e.lineTo.apply(e,t),o&&(this.alignFill_=o[2],this.fill_(e)),a&&(this.setStrokeStyle_(e,a),e.stroke())}calculateImageOrLabelDimensions_(e,t,n,r,s,o,a,l,c,u,h,d,f,g,p,m){a*=d[0],l*=d[1];let v=n-a,y=r-l;const A=s+c>e?e-c:s,_=o+u>t?t-u:o,C=g[3]+A*d[0]+g[1],I=g[0]+_*d[1]+g[2],b=v-g[3],S=y-g[0];(p||h!==0)&&(no[0]=b,ro[0]=b,no[1]=S,As[1]=S,As[0]=b+C,_s[0]=As[0],_s[1]=S+I,ro[1]=_s[1]);let R;return h!==0?(R=Ns(Ir(),n,r,1,1,h,-n,-r),Gi(R,no),Gi(R,As),Gi(R,_s),Gi(R,ro),us(Math.min(no[0],As[0],_s[0],ro[0]),Math.min(no[1],As[1],_s[1],ro[1]),Math.max(no[0],As[0],_s[0],ro[0]),Math.max(no[1],As[1],_s[1],ro[1]),ll)):us(Math.min(b,b+C),Math.min(S,S+I),Math.max(b,b+C),Math.max(S,S+I),ll),f&&(v=Math.round(v),y=Math.round(y)),{drawImageX:v,drawImageY:y,drawImageW:A,drawImageH:_,originX:c,originY:u,declutterBox:{minX:ll[0],minY:ll[1],maxX:ll[2],maxY:ll[3],value:m},canvasTransform:R,scale:d}}replayImageOrLabel_(e,t,n,r,s,o,a){const l=!!(o||a),c=r.declutterBox,u=e.canvas,h=a?a[2]*r.scale[0]/2:0;return c.minX-h<=u.width/t&&c.maxX+h>=0&&c.minY-h<=u.height/t&&c.maxY+h>=0&&(l&&this.replayTextBackground_(e,no,As,_s,ro,o,a),jO(e,r.canvasTransform,s,n,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(e){if(this.alignFill_){const t=Gi(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;e.save(),e.translate(t[0]%n,t[1]%n),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,n,r){const s=this.textStates[t],o=this.createLabel(e,t,r,n),a=this.strokeStates[n],l=this.pixelRatio,c=Q0(Array.isArray(e)?e[0]:e,s.textAlign||ch),u=zf[s.textBaseline||Tf],h=a&&a.lineWidth?a.lineWidth:0,d=o.width/l-2*s.scale[0],f=c*d+2*(.5-c)*h,g=u*o.height/l+2*(.5-u)*h;return{label:o,anchorX:f,anchorY:g}}execute_(e,t,n,r,s,o,a,l){let c;this.pixelCoordinates_&&Hs(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Po(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),lO(this.renderedTransform_,n));let u=0;const h=r.length;let d=0,f,g,p,m,v,y,A,_,C,I,b,S,R=0,P=0,w=null,x=null;const D=this.coordinateCache_,k=this.viewRotation_,O=Math.round(Math.atan2(-n[1],n[0])*1e12)/1e12,N={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:k},B=this.instructions!=r||this.overlaps?0:200;let V,se,j,Ae;for(;u<h;){const q=r[u];switch(q[0]){case Ue.BEGIN_GEOMETRY:V=q[1],Ae=q[3],V.getGeometry()?a!==void 0&&!Jt(a,Ae.getExtent())?u=q[2]+1:++u:u=q[2];break;case Ue.BEGIN_PATH:R>B&&(this.fill_(e),R=0),P>B&&(e.stroke(),P=0),!R&&!P&&(e.beginPath(),m=NaN,v=NaN),++u;break;case Ue.CIRCLE:d=q[1];const Ce=c[d],pe=c[d+1],Ie=c[d+2],z=c[d+3],oe=Ie-Ce,ne=z-pe,Y=Math.sqrt(oe*oe+ne*ne);e.moveTo(Ce+Y,pe),e.arc(Ce,pe,Y,0,2*Math.PI,!0),++u;break;case Ue.CLOSE_PATH:e.closePath(),++u;break;case Ue.CUSTOM:d=q[1],f=q[2];const Pe=q[3],tt=q[4],E=q.length==6?q[5]:void 0;N.geometry=Pe,N.feature=V,u in D||(D[u]=[]);const M=D[u];E?E(c,d,f,2,M):(M[0]=c[d],M[1]=c[d+1],M.length=2),tt(M,N),++u;break;case Ue.DRAW_IMAGE:d=q[1],f=q[2],_=q[3],g=q[4],p=q[5];let G=q[6];const W=q[7],X=q[8],K=q[9],ie=q[10];let $=q[11];const Q=q[12];let Z=q[13];const T=q[14],F=q[15];if(!_&&q.length>=20){C=q[19],I=q[20],b=q[21],S=q[22];const _n=this.drawLabelWithPointPlacement_(C,I,b,S);_=_n.label,q[3]=_;const Js=q[23];g=(_n.anchorX-Js)*this.pixelRatio,q[4]=g;const Tn=q[24];p=(_n.anchorY-Tn)*this.pixelRatio,q[5]=p,G=_.height,q[6]=G,Z=_.width,q[13]=Z}let U;q.length>25&&(U=q[25]);let H,te,ee;q.length>17?(H=q[16],te=q[17],ee=q[18]):(H=_a,te=!1,ee=!1),ie&&O?$+=k:!ie&&!O&&($-=k);let ue=0;for(;d<f;d+=2){if(U&&U[ue++]<Z/this.pixelRatio)continue;const _n=this.calculateImageOrLabelDimensions_(_.width,_.height,c[d],c[d+1],Z,G,g,p,X,K,$,Q,s,H,te||ee,V),Js=[e,t,_,_n,W,te?w:null,ee?x:null];if(l){if(T==="none")continue;if(T==="obstacle"){l.insert(_n.declutterBox);continue}else{let Tn,ft;if(F){const li=f-d;if(!F[li]){F[li]=Js;continue}if(Tn=F[li],delete F[li],ft=kC(Tn),l.collides(ft))continue}if(l.collides(_n.declutterBox))continue;Tn&&(l.insert(ft),this.replayImageOrLabel_.apply(this,Tn)),l.insert(_n.declutterBox)}}this.replayImageOrLabel_.apply(this,Js)}++u;break;case Ue.DRAW_CHARS:const Me=q[1],be=q[2],pt=q[3],wt=q[4];S=q[5];const Wt=q[6],mt=q[7],Ne=q[8];b=q[9];const ct=q[10];C=q[11],I=q[12];const At=[q[13],q[13]],ti=this.textStates[I],Bt=ti.font,Fi=[ti.scale[0]*mt,ti.scale[1]*mt];let Ni;Bt in this.widths_?Ni=this.widths_[Bt]:(Ni={},this.widths_[Bt]=Ni);const Jn=kw(c,Me,be,2),Rn=Math.abs(Fi[0])*_C(Bt,C,Ni);if(wt||Rn<=Jn){const _n=this.textStates[I].textAlign,Js=(Jn-Rn)*Q0(C,_n),Tn=h3(c,Me,be,2,C,Js,Wt,Math.abs(Fi[0]),_C,Bt,Ni,O?0:this.viewRotation_);e:if(Tn){const ft=[];let li,tl,Qs,ji,Cn;if(b)for(li=0,tl=Tn.length;li<tl;++li){Cn=Tn[li],Qs=Cn[4],ji=this.createLabel(Qs,I,"",b),g=Cn[2]+(Fi[0]<0?-ct:ct),p=pt*ji.height+(.5-pt)*2*ct*Fi[1]/Fi[0]-Ne;const gr=this.calculateImageOrLabelDimensions_(ji.width,ji.height,Cn[0],Cn[1],ji.width,ji.height,g,p,0,0,Cn[3],At,!1,_a,!1,V);if(l&&l.collides(gr.declutterBox))break e;ft.push([e,t,ji,gr,1,null,null])}if(S)for(li=0,tl=Tn.length;li<tl;++li){Cn=Tn[li],Qs=Cn[4],ji=this.createLabel(Qs,I,S,""),g=Cn[2],p=pt*ji.height-Ne;const gr=this.calculateImageOrLabelDimensions_(ji.width,ji.height,Cn[0],Cn[1],ji.width,ji.height,g,p,0,0,Cn[3],At,!1,_a,!1,V);if(l&&l.collides(gr.declutterBox))break e;ft.push([e,t,ji,gr,1,null,null])}l&&l.load(ft.map(kC));for(let gr=0,pr=ft.length;gr<pr;++gr)this.replayImageOrLabel_.apply(this,ft[gr])}}++u;break;case Ue.END_GEOMETRY:if(o!==void 0){V=q[1];const _n=o(V,Ae);if(_n)return _n}++u;break;case Ue.FILL:B?R++:this.fill_(e),++u;break;case Ue.MOVE_TO_LINE_TO:for(d=q[1],f=q[2],se=c[d],j=c[d+1],y=se+.5|0,A=j+.5|0,(y!==m||A!==v)&&(e.moveTo(se,j),m=y,v=A),d+=2;d<f;d+=2)se=c[d],j=c[d+1],y=se+.5|0,A=j+.5|0,(d==f-2||y!==m||A!==v)&&(e.lineTo(se,j),m=y,v=A);++u;break;case Ue.SET_FILL_STYLE:w=q,this.alignFill_=q[2],R&&(this.fill_(e),R=0,P&&(e.stroke(),P=0)),e.fillStyle=q[1],++u;break;case Ue.SET_STROKE_STYLE:x=q,P&&(e.stroke(),P=0),this.setStrokeStyle_(e,q),++u;break;case Ue.STROKE:B?P++:e.stroke(),++u;break;default:++u;break}}R&&this.fill_(e),P&&e.stroke()}execute(e,t,n,r,s,o){this.viewRotation_=r,this.execute_(e,t,n,this.instructions,s,void 0,void 0,o)}executeHitDetection(e,t,n,r,s){return this.viewRotation_=n,this.execute_(e,1,t,this.hitDetectionInstructions,!0,r,s)}}const $0=["Polygon","Circle","LineString","Image","Text","Default"];class Wf{constructor(e,t,n,r,s,o){this.maxExtent_=e,this.overlaps_=r,this.pixelRatio_=n,this.resolution_=t,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Ir(),this.createExecutors_(s)}clip(e,t){const n=this.getClipCoords(t);e.beginPath(),e.moveTo(n[0],n[1]),e.lineTo(n[2],n[3]),e.lineTo(n[4],n[5]),e.lineTo(n[6],n[7]),e.clip()}createExecutors_(e){for(const t in e){let n=this.executorsByZIndex_[t];n===void 0&&(n={},this.executorsByZIndex_[t]=n);const r=e[t];for(const s in r){const o=r[s];n[s]=new g3(this.resolution_,this.pixelRatio_,this.overlaps_,o)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const n=this.executorsByZIndex_[t];for(let r=0,s=e.length;r<s;++r)if(e[r]in n)return!0}return!1}forEachFeatureAtCoordinate(e,t,n,r,s,o){r=Math.round(r);const a=r*2+1,l=Ns(this.hitDetectionTransform_,r+.5,r+.5,1/t,-1/t,-n,-e[0],-e[1]),c=!this.hitDetectionContext_;c&&(this.hitDetectionContext_=yn(a,a,void 0,{willReadFrequently:!0}));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):c||u.clearRect(0,0,a,a);let h;this.renderBuffer_!==void 0&&(h=Yn(),Ru(h,e),Fr(h,t*(this.renderBuffer_+r),h));const d=p3(r);let f;function g(C,I){const b=u.getImageData(0,0,a,a).data;for(let S=0,R=d.length;S<R;S++)if(b[d[S]]>0){if(!o||f!=="Image"&&f!=="Text"||o.includes(C)){const P=(d[S]-3)/4,w=r-P%a,x=r-(P/a|0),D=s(C,I,w*w+x*x);if(D)return D}u.clearRect(0,0,a,a);break}}const p=Object.keys(this.executorsByZIndex_).map(Number);p.sort(Oo);let m,v,y,A,_;for(m=p.length-1;m>=0;--m){const C=p[m].toString();for(y=this.executorsByZIndex_[C],v=$0.length-1;v>=0;--v)if(f=$0[v],A=y[f],A!==void 0&&(_=A.executeHitDetection(u,l,n,g,h),_))return _}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const n=t[0],r=t[1],s=t[2],o=t[3],a=[n,r,n,o,s,o,s,r];return Po(a,0,8,2,e,a),a}isEmpty(){return ko(this.executorsByZIndex_)}execute(e,t,n,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(Oo),this.maxExtent_&&(e.save(),this.clip(e,n)),o=o||$0;let c,u,h,d,f,g;for(a&&l.reverse(),c=0,u=l.length;c<u;++c){const p=l[c].toString();for(f=this.executorsByZIndex_[p],h=0,d=o.length;h<d;++h){const m=o[h];g=f[m],g!==void 0&&g.execute(e,t,n,r,s,a)}}this.maxExtent_&&e.restore()}}const ep={};function p3(i){if(ep[i]!==void 0)return ep[i];const e=i*2+1,t=i*i,n=new Array(t+1);for(let s=0;s<=i;++s)for(let o=0;o<=i;++o){const a=s*s+o*o;if(a>t)break;let l=n[a];l||(l=[],n[a]=l),l.push(((i+s)*e+(i+o))*4+3),s>0&&l.push(((i-s)*e+(i+o))*4+3),o>0&&(l.push(((i+s)*e+(i-o))*4+3),s>0&&l.push(((i-s)*e+(i-o))*4+3))}const r=[];for(let s=0,o=n.length;s<o;++s)n[s]&&r.push(...n[s]);return ep[i]=r,r}class m3 extends Jw{constructor(e,t,n,r,s,o,a){super(),this.context_=e,this.pixelRatio_=t,this.extent_=n,this.transform_=r,this.transformRotation_=r?Fh(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Ir()}drawImages_(e,t,n,r){if(!this.image_)return;const s=Po(e,t,n,r,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let c=this.imageRotation_;this.transformRotation_===0&&(c-=this.viewRotation_),this.imageRotateWithView_&&(c+=this.viewRotation_);for(let u=0,h=s.length;u<h;u+=2){const d=s[u]-this.imageAnchorX_,f=s[u+1]-this.imageAnchorY_;if(c!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const g=d+this.imageAnchorX_,p=f+this.imageAnchorY_;Ns(a,g,p,1,1,c,-g,-p),o.save(),o.transform.apply(o,a),o.translate(g,p),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,d,f,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(e,t,n,r){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Po(e,t,n,r,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);t<n;t+=r){const l=s[t]+this.textOffsetX_,c=s[t+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,c-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,c),this.textFillState_&&o.fillText(this.text_,l,c))}}moveToLineTo_(e,t,n,r,s){const o=this.context_,a=Po(e,t,n,r,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let c=2;c<l;c+=2)o.lineTo(a[c],a[c+1]);return s&&o.closePath(),n}drawRings_(e,t,n,r){for(let s=0,o=n.length;s<o;++s)t=this.moveToLineTo_(e,t,n[s],r,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jt(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=gO(e,this.transform_,this.pixelCoordinates_),n=t[2]-t[0],r=t[3]-t[1],s=Math.sqrt(n*n+r*r),o=this.context_;o.beginPath(),o.arc(t[0],t[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const n=t.getGeometryFunction()(e);n&&(this.setStyle(t),this.drawGeometry(n))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let n=0,r=t.length;n<r;++n)this.drawGeometry(t[n])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),n=e.getStride();this.image_&&this.drawImages_(t,0,t.length,n),this.text_!==""&&this.drawText_(t,0,t.length,n)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jt(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(n,0,n.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(Jt(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const n=this.context_,r=e.getFlatCoordinates();let s=0;const o=e.getEnds(),a=e.getStride();n.beginPath();for(let l=0,c=o.length;l<c;++l)s=this.moveToLineTo_(r,s,o[l],a,!1);n.stroke()}if(this.text_!==""){const n=e.getFlatMidpoints();this.drawText_(n,0,n.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Jt(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,n=e.getOrientedFlatCoordinates();let r=0;const s=e.getEndss(),o=e.getStride();t.beginPath();for(let a=0,l=s.length;a<l;++a){const c=s[a];r=this.drawRings_(n,r,c,o)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,n=this.contextFillState_;n?n.fillStyle!=e.fillStyle&&(n.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=e.lineCap&&(n.lineCap=e.lineCap,t.lineCap=e.lineCap),Hs(n.lineDash,e.lineDash)||t.setLineDash(n.lineDash=e.lineDash),n.lineDashOffset!=e.lineDashOffset&&(n.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),n.lineJoin!=e.lineJoin&&(n.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),n.lineWidth!=e.lineWidth&&(n.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),n.miterLimit!=e.miterLimit&&(n.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),n.strokeStyle!=e.strokeStyle&&(n.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,n=this.contextTextState_,r=e.textAlign?e.textAlign:ch;n?(n.font!=e.font&&(n.font=e.font,t.font=e.font),n.textAlign!=r&&(n.textAlign=r,t.textAlign=r),n.textBaseline!=e.textBaseline&&(n.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=r,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:r,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const n=e.getColor();this.fillState_={fillStyle:is(n||Un)}}if(!t)this.strokeState_=null;else{const n=t.getColor(),r=t.getLineCap(),s=t.getLineDash(),o=t.getLineDashOffset(),a=t.getLineJoin(),l=t.getWidth(),c=t.getMiterLimit(),u=s||Ts;this.strokeState_={lineCap:r!==void 0?r:gc,lineDash:this.pixelRatio_===1?u:u.map(h=>h*this.pixelRatio_),lineDashOffset:(o||Ls)*this.pixelRatio_,lineJoin:a!==void 0?a:pc,lineWidth:(l!==void 0?l:uh)*this.pixelRatio_,miterLimit:c!==void 0?c:ah,strokeStyle:is(n||lh)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const n=e.getPixelRatio(this.pixelRatio_),r=e.getAnchor(),s=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*n,this.imageAnchorY_=r[1]*n,this.imageHeight_=t[1]*n,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const o=e.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/n,o[1]*this.pixelRatio_/n],this.imageWidth_=t[0]*n}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const f=t.getColor();this.textFillState_={fillStyle:is(f||Un)}}const n=e.getStroke();if(!n)this.textStrokeState_=null;else{const f=n.getColor(),g=n.getLineCap(),p=n.getLineDash(),m=n.getLineDashOffset(),v=n.getLineJoin(),y=n.getWidth(),A=n.getMiterLimit();this.textStrokeState_={lineCap:g!==void 0?g:gc,lineDash:p||Ts,lineDashOffset:m||Ls,lineJoin:v!==void 0?v:pc,lineWidth:y!==void 0?y:uh,miterLimit:A!==void 0?A:ah,strokeStyle:is(f||lh)}}const r=e.getFont(),s=e.getOffsetX(),o=e.getOffsetY(),a=e.getRotateWithView(),l=e.getRotation(),c=e.getScaleArray(),u=e.getText(),h=e.getTextAlign(),d=e.getTextBaseline();this.textState_={font:r!==void 0?r:yw,textAlign:h!==void 0?h:ch,textBaseline:d!==void 0?d:Tf},this.text_=u!==void 0?Array.isArray(u)?u.reduce((f,g,p)=>f+=p%2?" ":g,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*c[0],this.pixelRatio_*c[1]]}}}const sr=.5;function Qw(i,e,t,n,r,s,o){const a=i[0]*sr,l=i[1]*sr,c=yn(a,l);c.imageSmoothingEnabled=!1;const u=c.canvas,h=new m3(c,sr,r,null,o),d=t.length,f=Math.floor((256*256*256-1)/d),g={};for(let m=1;m<=d;++m){const v=t[m-1],y=v.getStyleFunction()||n;if(!y)continue;let A=y(v,s);if(!A)continue;Array.isArray(A)||(A=[A]);const C=(m*f).toString(16).padStart(7,"#00000");for(let I=0,b=A.length;I<b;++I){const S=A[I],R=S.getGeometryFunction()(v);if(!R||!Jt(r,R.getExtent()))continue;const P=S.clone(),w=P.getFill();w&&w.setColor(C);const x=P.getStroke();x&&(x.setColor(C),x.setLineDash(null)),P.setText(void 0);const D=S.getImage();if(D){const B=D.getImageSize();if(!B)continue;const V=yn(B[0],B[1],void 0,{alpha:!1}),se=V.canvas;V.fillStyle=C,V.fillRect(0,0,se.width,se.height),P.setImage(new Qt({img:se,anchor:D.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:D.getOrigin(),opacity:1,size:D.getSize(),scale:D.getScale(),rotation:D.getRotation(),rotateWithView:D.getRotateWithView()}))}const k=P.getZIndex()||0;let O=g[k];O||(O={},g[k]=O,O.Polygon=[],O.Circle=[],O.LineString=[],O.Point=[]);const N=R.getType();if(N==="GeometryCollection"){const B=R.getGeometriesArrayRecursive();for(let V=0,se=B.length;V<se;++V){const j=B[V];O[j.getType().replace("Multi","")].push(j,P)}}else O[N.replace("Multi","")].push(R,P)}}const p=Object.keys(g).map(Number).sort(Oo);for(let m=0,v=p.length;m<v;++m){const y=g[p[m]];for(const A in y){const _=y[A];for(let C=0,I=_.length;C<I;C+=2){h.setStyle(_[C+1]);for(let b=0,S=e.length;b<S;++b)h.setTransform(e[b]),h.drawGeometry(_[C])}}}return c.getImageData(0,0,u.width,u.height)}function $w(i,e,t){const n=[];if(t){const r=Math.floor(Math.round(i[0])*sr),s=Math.floor(Math.round(i[1])*sr),o=(mi(r,0,t.width-1)+mi(s,0,t.height-1)*t.width)*4,a=t.data[o],l=t.data[o+1],u=t.data[o+2]+256*(l+256*a),h=Math.floor((256*256*256-1)/e.length);u&&u%h===0&&n.push(e[u/h-1])}return n}const v3=.5,eb={Point:b3,LineString:I3,Polygon:x3,MultiPoint:S3,MultiLineString:E3,MultiPolygon:w3,GeometryCollection:C3,Circle:A3};function y3(i,e){return parseInt(ke(i),10)-parseInt(ke(e),10)}function tb(i,e){const t=wm(i,e);return t*t}function wm(i,e){return v3*i/e}function A3(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(e,n)}const a=t.getText();if(a&&a.getText()){const l=(r||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function Yf(i,e,t,n,r,s,o){let a=!1;const l=t.getImage();if(l){const c=l.getImageState();c==Ye.LOADED||c==Ye.ERROR?l.unlistenImageChange(r):(c==Ye.IDLE&&l.load(),l.listenImageChange(r),a=!0)}return _3(i,e,t,n,s,o),a}function _3(i,e,t,n,r,s){const o=t.getGeometryFunction()(e);if(!o)return;const a=o.simplifyTransformed(n,r);if(t.getRenderer())ib(i,a,t,e);else{const c=eb[a.getType()];c(i,a,t,e,s)}}function ib(i,e,t,n){if(e.getType()=="GeometryCollection"){const s=e.getGeometries();for(let o=0,a=s.length;o<a;++o)ib(i,s[o],t,n);return}i.getBuilder(t.getZIndex(),"Default").drawCustom(e,n,t.getRenderer(),t.getHitDetectionRenderer())}function C3(i,e,t,n,r){const s=e.getGeometriesArray();let o,a;for(o=0,a=s.length;o<a;++o){const l=eb[s[o].getType()];l(i,s[o],t,n,r)}}function I3(i,e,t,n,r){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(e,n)}const o=t.getText();if(o&&o.getText()){const a=(r||i).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n)}}function E3(i,e,t,n,r){const s=t.getStroke();if(s){const a=i.getBuilder(t.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(e,n)}const o=t.getText();if(o&&o.getText()){const a=(r||i).getBuilder(t.getZIndex(),"Text");a.setTextStyle(o),a.drawText(e,n)}}function w3(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(o||s){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(e,n)}const a=t.getText();if(a&&a.getText()){const l=(r||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}function b3(i,e,t,n,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=Ye.LOADED)return;let l=i;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(s,a),h.drawPoint(e,n)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,a),c.drawPoint(e,n)}if(o&&o.getText()){let l=i;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,n)}}function S3(i,e,t,n,r){const s=t.getImage(),o=t.getText();let a;if(s){if(s.getImageState()!=Ye.LOADED)return;let l=i;if(r){const u=s.getDeclutterMode();if(u!=="none")if(l=r,u==="obstacle"){const h=i.getBuilder(t.getZIndex(),"Image");h.setImageStyle(s,a),h.drawMultiPoint(e,n)}else o&&o.getText()&&(a={})}const c=l.getBuilder(t.getZIndex(),"Image");c.setImageStyle(s,a),c.drawMultiPoint(e,n)}if(o&&o.getText()){let l=i;r&&(l=r);const c=l.getBuilder(t.getZIndex(),"Text");c.setTextStyle(o,a),c.drawText(e,n)}}function x3(i,e,t,n,r){const s=t.getFill(),o=t.getStroke();if(s||o){const l=i.getBuilder(t.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(e,n)}const a=t.getText();if(a&&a.getText()){const l=(r||i).getBuilder(t.getZIndex(),"Text");l.setTextStyle(a),l.drawText(e,n)}}class P3 extends pw{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Yn(),this.wrappedRenderedExtent_=Yn(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,n){const r=t.extent,s=t.viewState,o=s.center,a=s.resolution,l=s.projection,c=s.rotation,u=l.getExtent(),h=this.getLayer().getSource(),d=t.pixelRatio,f=t.viewHints,g=!(f[ai.ANIMATING]||f[ai.INTERACTING]),p=this.compositionContext_,m=Math.round(t.size[0]*d),v=Math.round(t.size[1]*d),y=h.getWrapX()&&l.canWrapX(),A=y?Rt(u):null,_=y?Math.ceil((r[2]-u[2])/A)+1:1;let C=y?Math.floor((r[0]-u[0])/A):0;do{const I=this.getRenderTransform(o,a,c,d,m,v,C*A);e.execute(p,1,I,c,g,void 0,n)}while(++C<_)}setupCompositionContext_(){if(this.opacity_!==1){const e=yn(this.context.canvas.width,this.context.canvas.height,mC);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,Oh(this.compositionContext_),mC.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const n=e.pixelRatio,r=e.layerStatesArray[e.layerIndex];cO(this.pixelTransform,1/n,1/n),Kv(this.inversePixelTransform,this.pixelTransform);const s=$1(this.pixelTransform);this.useContainer(t,s,this.getBackground(e));const o=this.context,a=o.canvas,l=this.replayGroup_,c=this.declutterExecutorGroup;let u=l&&!l.isEmpty()||c&&!c.isEmpty();if(!u&&!(this.getLayer().hasListener(rs.PRERENDER)||this.getLayer().hasListener(rs.POSTRENDER)))return null;const h=Math.round(e.size[0]*n),d=Math.round(e.size[1]*n);a.width!=h||a.height!=d?(a.width=h,a.height=d,a.style.transform!==s&&(a.style.transform=s)):this.containerReused||o.clearRect(0,0,h,d),this.preRender(o,e);const f=e.viewState;f.projection,this.opacity_=r.opacity,this.setupCompositionContext_();let g=!1;if(u&&r.extent&&this.clipping){const p=mo(r.extent);u=Jt(p,e.extent),g=u&&!Gr(p,e.extent),g&&this.clipUnrotated(this.compositionContext_,e,p)}return u&&this.renderWorlds(l,e),g&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(o,e),this.renderedRotation_!==f.rotation&&(this.renderedRotation_=f.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const n=[this.context.canvas.width,this.context.canvas.height];Gi(this.pixelTransform,n);const r=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,c=this.getLayer(),u=[],h=n[0]*sr,d=n[1]*sr;u.push(this.getRenderTransform(r,s,o,sr,h,d,0).slice());const f=c.getSource(),g=a.getExtent();if(f.getWrapX()&&a.canWrapX()&&!Gr(g,l)){let p=l[0];const m=Rt(g);let v=0,y;for(;p<g[0];)--v,y=m*v,u.push(this.getRenderTransform(r,s,o,sr,h,d,y).slice()),p+=m;for(v=0,p=l[2];p>g[2];)++v,y=m*v,u.push(this.getRenderTransform(r,s,o,sr,h,d,y).slice()),p-=m}this.hitDetectionImageData_=Qw(n,u,this.renderedFeatures_,c.getStyleFunction(),l,s,o)}t($w(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,n,r,s){if(!this.replayGroup_)return;const o=t.viewState.resolution,a=t.viewState.rotation,l=this.getLayer(),c={},u=function(f,g,p){const m=ke(f),v=c[m];if(v){if(v!==!0&&p<v.distanceSq){if(p===0)return c[m]=!0,s.splice(s.lastIndexOf(v),1),r(f,l,g);v.geometry=g,v.distanceSq=p}}else{if(p===0)return c[m]=!0,r(f,l,g);s.push(c[m]={feature:f,layer:l,geometry:g,distanceSq:p,callback:r})}};let h;const d=[this.replayGroup_];return this.declutterExecutorGroup&&d.push(this.declutterExecutorGroup),d.some(f=>h=f.forEachFeatureAtCoordinate(e,o,a,n,u,f===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(g=>g.value):null)),h}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),n=t.getSource();if(!n)return!1;const r=e.viewHints[ai.ANIMATING],s=e.viewHints[ai.INTERACTING],o=t.getUpdateWhileAnimating(),a=t.getUpdateWhileInteracting();if(this.ready&&!o&&r||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=e.extent,c=e.viewState,u=c.projection,h=c.resolution,d=e.pixelRatio,f=t.getRevision(),g=t.getRenderBuffer();let p=t.getRenderOrder();p===void 0&&(p=y3);const m=c.center.slice(),v=Fr(l,g*h),y=v.slice(),A=[v.slice()],_=u.getExtent();if(n.getWrapX()&&u.canWrapX()&&!Gr(_,e.extent)){const O=Rt(_),N=Math.max(Rt(v)/2,O);v[0]=_[0]-N,v[2]=_[2]+N,Dv(m,u);const B=R1(A[0],u);B[0]<_[0]&&B[2]<_[2]?A.push([B[0]+O,B[1],B[2]+O,B[3]]):B[0]>_[0]&&B[2]>_[2]&&A.push([B[0]-O,B[1],B[2]-O,B[3]])}if(this.ready&&this.renderedResolution_==h&&this.renderedRevision_==f&&this.renderedRenderOrder_==p&&Gr(this.wrappedRenderedExtent_,v))return Hs(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const C=new Vf(wm(h,d),v,h,d);let I;this.getLayer().getDeclutter()&&(I=new Vf(wm(h,d),v,h,d));let b;for(let O=0,N=A.length;O<N;++O)n.loadFeatures(A[O],h,u);const S=tb(h,d);let R=!0;const P=O=>{let N;const B=O.getStyleFunction()||t.getStyleFunction();if(B&&(N=B(O,h)),N){const V=this.renderFeature(O,S,N,C,b,I);R=R&&!V}},w=Uv(v),x=n.getFeaturesInExtent(w);p&&x.sort(p);for(let O=0,N=x.length;O<N;++O)P(x[O]);this.renderedFeatures_=x,this.ready=R;const D=C.finish(),k=new Wf(v,h,d,n.getOverlaps(),D,t.getRenderBuffer());return I&&(this.declutterExecutorGroup=new Wf(v,h,d,n.getOverlaps(),I.finish(),t.getRenderBuffer())),this.renderedResolution_=h,this.renderedRevision_=f,this.renderedRenderOrder_=p,this.renderedExtent_=y,this.wrappedRenderedExtent_=v,this.renderedCenter_=m,this.renderedProjection_=u,this.replayGroup_=k,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,n,r,s,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,c=n.length;l<c;++l)a=Yf(r,e,n[l],t,this.boundHandleStyleImageChange_,s,o)||a;else a=Yf(r,e,n,t,this.boundHandleStyleImageChange_,s,o);return a}}class M3 extends Kw{constructor(e){super(e)}createRenderer(){return new P3(this)}}const Di=M3,yd={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class Ad extends fr{constructor(e,t){super(e),this.feature=t}}function R3(i,e){const t=[];for(let n=0;n<e.length;++n){const s=e[n].getGeometry();nb(i,s,t)}return t}function _d(i,e){return Rs(i[0],i[1],e[0],e[1])}function Ml(i,e){const t=i.length;return e<0?i[e+t]:e>=t?i[e-t]:i[e]}function Cd(i,e,t){let n,r;e<t?(n=e,r=t):(n=t,r=e);const s=Math.ceil(n),o=Math.floor(r);if(s>o){const l=Rl(i,n),c=Rl(i,r);return _d(l,c)}let a=0;if(n<s){const l=Rl(i,n),c=Ml(i,s);a+=_d(l,c)}if(o<r){const l=Ml(i,o),c=Rl(i,r);a+=_d(l,c)}for(let l=s;l<o-1;++l){const c=Ml(i,l),u=Ml(i,l+1);a+=_d(c,u)}return a}function nb(i,e,t){if(e instanceof Ji){Id(i,e.getCoordinates(),!1,t);return}if(e instanceof hr){const n=e.getCoordinates();for(let r=0,s=n.length;r<s;++r)Id(i,n[r],!1,t);return}if(e instanceof wi){const n=e.getCoordinates();for(let r=0,s=n.length;r<s;++r)Id(i,n[r],!0,t);return}if(e instanceof jr){const n=e.getCoordinates();for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0,l=o.length;a<l;++a)Id(i,o[a],!0,t)}return}if(e instanceof Gs){const n=e.getGeometries();for(let r=0;r<n.length;++r)nb(i,n[r],t);return}}const tp={index:-1,endIndex:NaN};function T3(i,e,t,n){const r=i[0],s=i[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const d=e.targets[h],f=d.coordinates;let g=1/0,p;for(let m=0;m<f.length-1;++m){const v=f[m],y=f[m+1],A=rb(r,s,v,y);A.squaredDistance<g&&(g=A.squaredDistance,p=m+A.along)}g<o&&(o=g,d.ring&&e.targetIndex===h&&(d.endIndex>d.startIndex?p<d.startIndex&&(p+=f.length):d.endIndex<d.startIndex&&p>d.startIndex&&(p-=f.length)),l=p,a=h)}const c=e.targets[a];let u=c.ring;if(e.targetIndex===a&&u){const h=Rl(c.coordinates,l),d=t.getPixelFromCoordinate(h);wf(d,e.startPx)>n&&(u=!1)}if(u){const h=c.coordinates,d=h.length,f=c.startIndex,g=l;if(f<g){const p=Cd(h,f,g);Cd(h,f,g-d)<p&&(l-=d)}else{const p=Cd(h,f,g);Cd(h,f,g+d)<p&&(l+=d)}}return tp.index=a,tp.endIndex=l,tp}function Id(i,e,t,n){const r=i[0],s=i[1];for(let o=0,a=e.length-1;o<a;++o){const l=e[o],c=e[o+1],u=rb(r,s,l,c);if(u.squaredDistance===0){const h=o+u.along;n.push({coordinates:e,ring:t,startIndex:h,endIndex:h});return}}}const ip={along:0,squaredDistance:0};function rb(i,e,t,n){const r=t[0],s=t[1],o=n[0],a=n[1],l=o-r,c=a-s;let u=0,h=r,d=s;return(l!==0||c!==0)&&(u=mi(((i-r)*l+(e-s)*c)/(l*l+c*c),0,1),h+=l*u,d+=c*u),ip.along=u,ip.squaredDistance=Fh(Rs(i,e,h,d),10),ip}function Rl(i,e){const t=i.length;let n=Math.floor(e);const r=e-n;n>=t?n-=t:n<0&&(n+=t);let s=n+1;s>=t&&(s-=t);const o=i[n],a=o[0],l=o[1],c=i[s],u=c[0]-a,h=c[1]-l;return[a+u*r,l+h*r]}class L3 extends Qa{constructor(e){const t=e;t.stopDown||(t.stopDown=xc),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=O3(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:Do,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let n=e.geometryFunction;if(!n){const r=this.mode_;if(r==="Circle")n=function(s,o,a){const l=o||new Ow([NaN,NaN]),c=di(s[0]),u=hc(c,di(s[s.length-1]));return l.setCenterAndRadius(c,Math.sqrt(u),this.geometryLayout_),l};else{let s;r==="Point"?s=Ki:r==="LineString"?s=Ji:r==="Polygon"&&(s=wi),n=function(o,a,l){return a?r==="Polygon"?o[0].length?a.setCoordinates([o[0].concat([o[0][0]])],this.geometryLayout_):a.setCoordinates([],this.geometryLayout_):a.setCoordinates(o,this.geometryLayout_):a=new s(o,this.geometryLayout_),a}}}this.geometryFunction_=n,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new Di({source:new gn({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:G3(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:fy,this.freehandCondition_,e.freehand?this.freehandCondition_=Of:this.freehandCondition_=e.freehandCondition?e.freehandCondition:gy,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(vm.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=Of:t=e:t=Am,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===ze.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===gt.POINTERMOVE,n=!0;return!this.freehand_&&this.lastDragTime_&&e.type===gt.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===gt.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),n=!1):this.freehand_&&e.type===gt.POINTERDOWN?n=!1:t&&this.getPointerCount()<2?(n=e.type===gt.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===gt.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===gt.DBLCLICK&&(n=!1),super.handleEvent(e)&&n}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new Es(gt.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),n=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),r=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),s=Fn([n,r]),o=this.traceSource_.getFeaturesInExtent(s);if(o.length===0)return;const a=R3(e.coordinate,o);a.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:a,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const n=e.startIndex<=e.endIndex,r=e.startIndex<=t;n===r?n&&t>e.endIndex||!n&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(n&&t<e.endIndex||!n&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let n=0;if(e<t){const r=Math.ceil(e);let s=Math.floor(t);s===t&&(s-=1),n=s-r+1}else{const r=Math.floor(e);let s=Math.ceil(t);s===t&&(s+=1),n=r-s+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(e,t,n){if(t===n)return;const r=[];if(t<n){const s=Math.ceil(t);let o=Math.floor(n);o===n&&(o-=1);for(let a=s;a<=o;++a)r.push(Ml(e.coordinates,a))}else{const s=Math.floor(t);let o=Math.ceil(n);o===n&&(o+=1);for(let a=s;a>=o;--a)r.push(Ml(e.coordinates,a))}r.length&&this.appendCoordinates(r)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&wf(t.startPx,e.pixel)<this.snapTolerance_)return;const n=T3(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==n.index){if(t.targetIndex!==-1){const l=t.targets[t.targetIndex];this.removeTracedCoordinates_(l.startIndex,l.endIndex)}const a=t.targets[n.index];this.addTracedCoordinates_(a,a.startIndex,n.endIndex)}else{const a=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(a,n.endIndex)}t.targetIndex=n.index;const r=t.targets[t.targetIndex];r.endIndex=n.endIndex;const s=Rl(r.coordinates,r.endIndex),o=this.getMap().getPixelFromCoordinate(s);e.coordinate=s,e.pixel=[Math.round(o[0]),Math.round(o[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const n=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const r=!this.finishCoordinate_;r&&this.startDrawing_(e.coordinate),!r&&this.freehand_?this.finishDrawing():!this.freehand_&&(!r||this.mode_==="Point")&&(this.atFinish_(e.pixel,n)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,n=e.pixel,r=t[0]-n[0],s=t[1]-n[1],o=r*r+s*s;if(this.shouldHandle_=this.freehand_?o>this.squaredClickTolerance_:o<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let n=!1;if(this.sketchFeature_){let r=!1,s=[this.finishCoordinate_];const o=this.mode_;if(o==="Point")n=!0;else if(o==="Circle")n=this.sketchCoords_.length===2;else if(o==="LineString")r=!t&&this.sketchCoords_.length>this.minPoints_;else if(o==="Polygon"){const a=this.sketchCoords_;r=a[0].length>this.minPoints_,s=[a[0][0],a[0][a[0].length-2]],t?s=[a[0][0]]:s=[a[0][0],a[0][a[0].length-2]]}if(r){const a=this.getMap();for(let l=0,c=s.length;l<c;l++){const u=s[l],h=a.getPixelFromCoordinate(u),d=e[0]-h[0],f=e[1]-h[1],g=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(d*d+f*f)<=g,n){this.finishCoordinate_=u;break}}}}return n}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Ht(new Ki(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Ht);const t=e.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),n.changed()):(n=new Ji(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(e){const t=this.getMap().getView().getProjection(),n=xf(this.geometryLayout_);for(;e.length<n;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Ht(new Ji(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Ht,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new Ad(yd.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),n=this.sketchFeature_.getGeometry(),r=t.getView().getProjection(),s=xf(this.geometryLayout_);let o,a;for(;e.length<s;)e.push(0);this.mode_==="Point"?a=this.sketchCoords_:this.mode_==="Polygon"?(o=this.sketchCoords_[0],a=o[o.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(o=this.sketchCoords_,a=o[o.length-1]),a[0]=e[0],a[1]=e[1],this.geometryFunction_(this.sketchCoords_,n,r),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),n.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(n):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let r,s;const o=this.mode_;o==="LineString"||o==="Circle"?(this.finishCoordinate_=e.slice(),s=this.sketchCoords_,s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),this.geometryFunction_(s,t,n)):o==="Polygon"&&(s=this.sketchCoords_[0],s.length>=this.maxPoints_&&(this.freehand_?s.pop():r=!0),s.push(e.slice()),r&&(this.finishCoordinate_=s[0]),this.geometryFunction_(this.sketchCoords_,t,n)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),r&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),r=this.mode_;for(let s=0;s<e;++s){let o;if(r==="LineString"||r==="Circle"){if(o=this.sketchCoords_,o.splice(-2,1),o.length>=2){this.finishCoordinate_=o[o.length-2].slice();const a=this.finishCoordinate_.slice();o[o.length-1]=a,this.createOrUpdateSketchPoint_(a)}this.geometryFunction_(o,t,n),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(r==="Polygon"){o=this.sketchCoords_[0],o.splice(-2,1);const a=this.sketchLine_.getGeometry();if(o.length>=2){const l=o[o.length-2].slice();o[o.length-1]=l,this.createOrUpdateSketchPoint_(l)}a.setCoordinates(o),this.geometryFunction_(this.sketchCoords_,t,n)}if(o.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const n=e.getGeometry(),r=this.getMap().getView().getProjection();this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,n,r)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,n,r),t=n.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new Us([t])):this.type_==="MultiLineString"?e.setGeometry(new hr([t])):this.type_==="MultiPolygon"&&e.setGeometry(new jr([t])),this.dispatchEvent(new Ad(yd.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new Ad(yd.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,n=!this.sketchFeature_;n&&this.startDrawing_(e[0]);let r;if(t==="LineString"||t==="Circle")r=this.sketchCoords_;else if(t==="Polygon")r=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;n&&r.shift(),r.pop();for(let o=0;o<e.length;o++)this.addToDrawing_(e[o]);const s=e[e.length-1];this.addToDrawing_(s),this.modifyDrawing_(s)}extend(e){const n=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=n.getCoordinates();const r=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=r.slice(),this.sketchCoords_.push(r.slice()),this.sketchPoint_=new Ht(new Ki(r)),this.updateSketchFeatures_(),this.dispatchEvent(new Ad(yd.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function G3(){const i=_y();return function(e,t){return i[e.getGeometry().getType()]}}function O3(i){switch(i){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+i)}}const yr=L3,NC=0,Tu=1,UC=[0,0,0,0],ql=[],np={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class rp extends fr{constructor(e,t,n){super(e),this.features=t,this.mapBrowserEvent=n}}class D3 extends Qa{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:bw,this.defaultDeleteCondition_=function(n){return nD(n)&&dy(n)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:Of,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new _m,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new Di({source:new gn({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:F3(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new bi(this.source_.getFeatures()),this.source_.addEventListener(er.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(er.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Ii.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Ii.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const r=this.SEGMENT_WRITERS_[t.getType()];r&&r(e,t)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),e.addEventListener(ze.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new bi;const n=this.featuresBeingModified_.getArray();for(let r=0,s=t.length;r<s;++r){const o=t[r];for(let a=0,l=o.length;a<l;++a){const c=o[a].feature;c&&!n.includes(c)&&this.featuresBeingModified_.push(c)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new rp(np.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(ze.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,n=[];t.forEach(function(r){e===r.feature&&n.push(r)});for(let r=n.length-1;r>=0;--r){const s=n[r];for(let o=this.dragSegments_.length-1;o>=0;--o)this.dragSegments_[o][0]===s&&this.dragSegments_.splice(o,1);t.remove(s)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const n=t.getCoordinates(),r={feature:e,geometry:t,segment:[n,n]};this.rBush_.insert(t.getExtent(),r)}writeMultiPointGeometry_(e,t){const n=t.getCoordinates();for(let r=0,s=n.length;r<s;++r){const o=n[r],a={feature:e,geometry:t,depth:[r],index:r,segment:[o,o]};this.rBush_.insert(t.getExtent(),a)}}writeLineStringGeometry_(e,t){const n=t.getCoordinates();for(let r=0,s=n.length-1;r<s;++r){const o=n.slice(r,r+2),a={feature:e,geometry:t,index:r,segment:o};this.rBush_.insert(Fn(o),a)}}writeMultiLineStringGeometry_(e,t){const n=t.getCoordinates();for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),u={feature:e,geometry:t,depth:[r],index:a,segment:c};this.rBush_.insert(Fn(c),u)}}}writePolygonGeometry_(e,t){const n=t.getCoordinates();for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0,l=o.length-1;a<l;++a){const c=o.slice(a,a+2),u={feature:e,geometry:t,depth:[r],index:a,segment:c};this.rBush_.insert(Fn(c),u)}}}writeMultiPolygonGeometry_(e,t){const n=t.getCoordinates();for(let r=0,s=n.length;r<s;++r){const o=n[r];for(let a=0,l=o.length;a<l;++a){const c=o[a];for(let u=0,h=c.length-1;u<h;++u){const d=c.slice(u,u+2),f={feature:e,geometry:t,depth:[a,r],index:u,segment:d};this.rBush_.insert(Fn(d),f)}}}}writeCircleGeometry_(e,t){const n=t.getCenter(),r={feature:e,geometry:t,index:NC,segment:[n,n]},s={feature:e,geometry:t,index:Tu,segment:[n,n]},o=[r,s];r.featureSegments=o,s.featureSegments=o,this.rBush_.insert(Mu(n),r);let a=t;this.rBush_.insert(a.getExtent(),s)}writeGeometryCollectionGeometry_(e,t){const n=t.getGeometriesArray();for(let r=0;r<n.length;++r){const s=n[r],o=this.SEGMENT_WRITERS_[s.getType()];o(e,s)}}createOrUpdateVertexFeature_(e,t,n){let r=this.vertexFeature_;return r?r.getGeometry().setCoordinates(e):(r=new Ht(new Ki(e)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r)),r.set("features",t),r.set("geometries",n),r}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==gt.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=gt.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==gt.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],n=[],r=[];for(let s=0,o=this.dragSegments_.length;s<o;++s){const a=this.dragSegments_[s],l=a[0],c=l.feature;n.includes(c)||n.push(c);const u=l.geometry;r.includes(u)||r.push(u);const h=l.depth;let d;const f=l.segment,g=a[1];for(;t.length<u.getStride();)t.push(f[g][t.length]);switch(u.getType()){case"Point":d=t,f[0]=t,f[1]=t;break;case"MultiPoint":d=u.getCoordinates(),d[l.index]=t,f[0]=t,f[1]=t;break;case"LineString":d=u.getCoordinates(),d[l.index+g]=t,f[g]=t;break;case"MultiLineString":d=u.getCoordinates(),d[h[0]][l.index+g]=t,f[g]=t;break;case"Polygon":d=u.getCoordinates(),d[h[0]][l.index+g]=t,f[g]=t;break;case"MultiPolygon":d=u.getCoordinates(),d[h[1]][h[0]][l.index+g]=t,f[g]=t;break;case"Circle":if(f[0]=t,f[1]=t,l.index===NC)this.changingFeature_=!0,u.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let p=wf(di(u.getCenter()),di(t));u.setRadius(p),this.changingFeature_=!1}break}d&&this.setGeometryCoordinates_(u,d)}this.createOrUpdateVertexFeature_(t,n,r)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const n=this.vertexFeature_;if(n){e.map.getView().getProjection();const r=[],s=n.getGeometry().getCoordinates(),o=Fn([s]),a=this.rBush_.getInExtent(o),l={};a.sort(k3);for(let c=0,u=a.length;c<u;++c){const h=a[c],d=h.segment;let f=ke(h.geometry);const g=h.depth;if(g&&(f+="-"+g.join("-")),l[f]||(l[f]=new Array(2)),h.geometry.getType()==="Circle"&&h.index===Tu){const p=jC(t,h);Pr(p,s)&&!l[f][0]&&(this.dragSegments_.push([h,0]),l[f][0]=h);continue}if(Pr(d[0],s)&&!l[f][0]){this.dragSegments_.push([h,0]),l[f][0]=h;continue}if(Pr(d[1],s)&&!l[f][1]){if(l[f][0]&&l[f][0].index===0){let p=h.geometry.getCoordinates();switch(h.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":p=p[g[1]];case"Polygon":if(h.index!==p[g[0]].length-2)continue;break}}this.dragSegments_.push([h,1]),l[f][1]=h;continue}ke(d)in this.vertexSegments_&&!l[f][0]&&!l[f][1]&&this.insertVertexCondition_(e)&&r.push(h)}r.length&&this.willModifyFeatures_(e,[r]);for(let c=r.length-1;c>=0;--c)this.insertVertex_(r[c],s)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const n=this.dragSegments_[t][0],r=n.geometry;if(r.getType()==="Circle"){const s=r.getCenter(),o=n.featureSegments[0],a=n.featureSegments[1];o.segment[0]=s,o.segment[1]=s,a.segment[0]=s,a.segment[1]=s,this.rBush_.update(Mu(s),o);let l=r;this.rBush_.update(l.getExtent(),a)}else this.rBush_.update(Fn(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new rp(np.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,n){const r=n||t.getCoordinateFromPixel(e);t.getView().getProjection();const s=function(l,c){return BC(r,l)-BC(r,c)};let o,a;if(this.hitDetection_){const l=typeof this.hitDetection_=="object"?c=>c===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(c,u,h)=>{h&&h.getType()==="Point"&&(h=new Ki(dc(h.getCoordinates())));const d=h||c.getGeometry();if(c instanceof Ht&&this.features_.getArray().includes(c)){a=d;const f=c.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:c,geometry:a,segment:[f,f]}]}return!0},{layerFilter:l})}if(!o){const l=mo(Mu(r,UC)),c=t.getView().getResolution()*this.pixelTolerance_,u=Uv(Fr(l,c,UC));o=this.rBush_.getInExtent(u)}if(o&&o.length>0){const l=o.sort(s)[0],c=l.segment;let u=jC(r,l);const h=t.getPixelFromCoordinate(u);let d=wf(e,h);if(a||d<=this.pixelTolerance_){const f={};if(f[ke(c)]=!0,this.snapToPointer_||(this.delta_[0]=u[0]-r[0],this.delta_[1]=u[1]-r[1]),l.geometry.getType()==="Circle"&&l.index===Tu)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u,[l.feature],[l.geometry]);else{const g=t.getPixelFromCoordinate(c[0]),p=t.getPixelFromCoordinate(c[1]),m=hc(h,g),v=hc(h,p);d=Math.sqrt(Math.min(m,v)),this.snappedToVertex_=d<=this.pixelTolerance_,this.snappedToVertex_&&(u=m>v?c[1]:c[0]),this.createOrUpdateVertexFeature_(u,[l.feature],[l.geometry]);const y={};y[ke(l.geometry)]=!0;for(let A=1,_=o.length;A<_;++A){const C=o[A].segment;if(Pr(c[0],C[0])&&Pr(c[1],C[1])||Pr(c[0],C[1])&&Pr(c[1],C[0])){const I=ke(o[A].geometry);I in y||(y[I]=!0,f[ke(C)]=!0)}else break}}this.vertexSegments_=f;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const n=e.segment,r=e.feature,s=e.geometry,o=e.depth,a=e.index;let l;for(;t.length<s.getStride();)t.push(0);switch(s.getType()){case"MultiLineString":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"Polygon":l=s.getCoordinates(),l[o[0]].splice(a+1,0,t);break;case"MultiPolygon":l=s.getCoordinates(),l[o[1]][o[0]].splice(a+1,0,t);break;case"LineString":l=s.getCoordinates(),l.splice(a+1,0,t);break;default:return}this.setGeometryCoordinates_(s,l);const c=this.rBush_;c.remove(e),this.updateSegmentIndices_(s,a,o,1);const u={segment:[n[0],t],feature:r,geometry:s,depth:o,index:a};c.insert(Fn(u.segment),u),this.dragSegments_.push([u,1]);const h={segment:[t,n[1]],feature:r,geometry:s,depth:o,index:a+1};c.insert(Fn(h.segment),h),this.dragSegments_.push([h,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=gt.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new rp(np.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let n=!1,r,s,o,a,l,c,u,h,d,f,g;for(l=e.length-1;l>=0;--l)o=e[l],f=o[0],g=ke(f.feature),f.depth&&(g+="-"+f.depth.join("-")),g in t||(t[g]={}),o[1]===0?(t[g].right=f,t[g].index=f.index):o[1]==1&&(t[g].left=f,t[g].index=f.index+1);for(g in t){switch(d=t[g].right,u=t[g].left,c=t[g].index,h=c-1,u!==void 0?f=u:f=d,h<0&&(h=0),a=f.geometry,s=a.getCoordinates(),r=s,n=!1,a.getType()){case"MultiLineString":s[f.depth[0]].length>2&&(s[f.depth[0]].splice(c,1),n=!0);break;case"LineString":s.length>2&&(s.splice(c,1),n=!0);break;case"MultiPolygon":r=r[f.depth[1]];case"Polygon":r=r[f.depth[0]],r.length>4&&(c==r.length-1&&(c=0),r.splice(c,1),n=!0,c===0&&(r.pop(),r.push(r[0]),h=r.length-1));break}if(n){this.setGeometryCoordinates_(a,s);const p=[];if(u!==void 0&&(this.rBush_.remove(u),p.push(u.segment[0])),d!==void 0&&(this.rBush_.remove(d),p.push(d.segment[1])),u!==void 0&&d!==void 0){const m={depth:f.depth,feature:f.feature,geometry:f.geometry,index:h,segment:p};this.rBush_.insert(Fn(m.segment),m)}this.updateSegmentIndices_(a,c,f.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return n}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,n,r){this.rBush_.forEachInExtent(e.getExtent(),function(s){s.geometry===e&&(n===void 0||s.depth===void 0||Hs(s.depth,n))&&s.index>t&&(s.index+=r)})}}function k3(i,e){return i.index-e.index}function BC(i,e,t){const n=e.geometry;if(n.getType()==="Circle"){let s=n;if(e.index===Tu){const o=hc(s.getCenter(),di(i)),a=Math.sqrt(o)-s.getRadius();return a*a}}const r=di(i);return ql[0]=di(e.segment[0]),ql[1]=di(e.segment[1]),MG(r,ql)}function jC(i,e,t){const n=e.geometry;if(n.getType()==="Circle"&&e.index===Tu)return dc(n.getClosestPoint(di(i)));const r=di(i);return ql[0]=di(e.segment[0]),ql[1]=di(e.segment[1]),dc(L1(r,ql))}function F3(){const i=_y();return function(e,t){return i.Point}}const Ey=D3,N3={SELECT:"select"};class U3 extends fr{constructor(e,t,n,r){super(e),this.selected=t,this.deselected=n,this.mapBrowserEvent=r}}const Ed={};class wy extends kc{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:dy,this.addCondition_=e.addCondition?e.addCondition:Am,this.removeCondition_=e.removeCondition?e.removeCondition:Am,this.toggleCondition_=e.toggleCondition?e.toggleCondition:gy,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:Do,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:B3(),this.features_=e.features||new bi;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const n=e.layers;t=function(r){return n.includes(r)}}else t=Do;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[ke(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[ke(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(Ii.ADD,this.boundAddFeature_),this.features_.addEventListener(Ii.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Ii.ADD,this.boundAddFeature_),this.features_.removeEventListener(Ii.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const n=this.getMap().getAllLayers().find(function(r){if(r instanceof Di&&r.getSource()&&r.getSource().hasFeature(t))return r});n&&this.addFeatureLayerAssociation_(t,n)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=ke(e);t in Ed||(Ed[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let r=t.length-1;r>=0;--r){const s=t[r];if(s!==this&&s instanceof wy&&s.getStyle()&&s.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(s.getStyle());return}}const n=ke(e);e.setStyle(Ed[n]),delete Ed[n]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[ke(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),n=this.removeCondition_(e),r=this.toggleCondition_(e),s=!t&&!n&&!r,o=e.map,a=this.getFeatures(),l=[],c=[];if(s){Pc(this.featureLayerAssociation_),o.forEachFeatureAtPixel(e.pixel,(u,h)=>{if(!(!(u instanceof Ht)||!this.filter_(u,h)))return this.addFeatureLayerAssociation_(u,h),c.push(u),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=a.getLength()-1;u>=0;--u){const h=a.item(u),d=c.indexOf(h);d>-1?c.splice(d,1):(a.remove(h),l.push(h))}c.length!==0&&a.extend(c)}else{o.forEachFeatureAtPixel(e.pixel,(u,h)=>{if(!(!(u instanceof Ht)||!this.filter_(u,h)))return(t||r)&&!a.getArray().includes(u)?(this.addFeatureLayerAssociation_(u,h),c.push(u)):(n||r)&&a.getArray().includes(u)&&(l.push(u),this.removeFeatureLayerAssociation_(u)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let u=l.length-1;u>=0;--u)a.remove(l[u]);a.extend(c)}return(c.length>0||l.length>0)&&this.dispatchEvent(new U3(N3.SELECT,c,l,e)),!0}}function B3(){const i=_y();return bt(i.Polygon,i.LineString),bt(i.GeometryCollection,i.LineString),function(e){return e.getGeometry()?i[e.getGeometry().getType()]:null}}const Tr=wy;var Lu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function by(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var sb={exports:{}};(function(i){(function(e,t){i.exports?i.exports=t():e.log=t()})(Lu,function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],s={},o=null;function a(p,m){var v=p[m];if(typeof v.bind=="function")return v.bind(p);try{return Function.prototype.bind.call(v,p)}catch{return function(){return Function.prototype.apply.apply(v,[p,arguments])}}}function l(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(p){return p==="debug"&&(p="log"),typeof console===t?!1:p==="trace"&&n?l:console[p]!==void 0?a(console,p):console.log!==void 0?a(console,"log"):e}function u(){for(var p=this.getLevel(),m=0;m<r.length;m++){var v=r[m];this[v]=m<p?e:this.methodFactory(v,p,this.name)}if(this.log=this.debug,typeof console===t&&p<this.levels.SILENT)return"No console available for logging"}function h(p){return function(){typeof console!==t&&(u.call(this),this[p].apply(this,arguments))}}function d(p,m,v){return c(p)||h.apply(this,arguments)}function f(p,m){var v=this,y,A,_,C="loglevel";typeof p=="string"?C+=":"+p:typeof p=="symbol"&&(C=void 0);function I(w){var x=(r[w]||"silent").toUpperCase();if(!(typeof window===t||!C)){try{window.localStorage[C]=x;return}catch{}try{window.document.cookie=encodeURIComponent(C)+"="+x+";"}catch{}}}function b(){var w;if(!(typeof window===t||!C)){try{w=window.localStorage[C]}catch{}if(typeof w===t)try{var x=window.document.cookie,D=encodeURIComponent(C),k=x.indexOf(D+"=");k!==-1&&(w=/^([^;]+)/.exec(x.slice(k+D.length+1))[1])}catch{}return v.levels[w]===void 0&&(w=void 0),w}}function S(){if(!(typeof window===t||!C)){try{window.localStorage.removeItem(C)}catch{}try{window.document.cookie=encodeURIComponent(C)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function R(w){var x=w;if(typeof x=="string"&&v.levels[x.toUpperCase()]!==void 0&&(x=v.levels[x.toUpperCase()]),typeof x=="number"&&x>=0&&x<=v.levels.SILENT)return x;throw new TypeError("log.setLevel() called with invalid level: "+w)}v.name=p,v.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},v.methodFactory=m||d,v.getLevel=function(){return _??A??y},v.setLevel=function(w,x){return _=R(w),x!==!1&&I(_),u.call(v)},v.setDefaultLevel=function(w){A=R(w),b()||v.setLevel(w,!1)},v.resetLevel=function(){_=null,S(),u.call(v)},v.enableAll=function(w){v.setLevel(v.levels.TRACE,w)},v.disableAll=function(w){v.setLevel(v.levels.SILENT,w)},v.rebuild=function(){if(o!==v&&(y=R(o.getLevel())),u.call(v),o===v)for(var w in s)s[w].rebuild()},y=R(o?o.getLevel():"WARN");var P=b();P!=null&&(_=R(P)),u.call(v)}o=new f,o.getLogger=function(m){if(typeof m!="symbol"&&typeof m!="string"||m==="")throw new TypeError("You must supply a name when creating a logger.");var v=s[m];return v||(v=s[m]=new f(m,o.methodFactory)),v};var g=typeof window!==t?window.log:void 0;return o.noConflict=function(){return typeof window!==t&&window.log===o&&(window.log=g),o},o.getLoggers=function(){return s},o.default=o,o})})(sb);var fo=sb.exports,Tt={getLogger:function(i){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?fo.enableAll():fo.disableAll();var t=i||"default";return fo.getLogger(t)}},me={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(i,e){if(Object.keys(arguments).length===0)return"Message indefined !";var t=Array.prototype.slice.call(arguments),n=t.shift(),r=t,s=this[n];try{Array.isArray(r)&&r.length>0?s=s.replace("%var%",r.join(" - ")):s=s.replace("%var%","%var% (not specified)")}catch{}return s}},Os={normalyzeParameters:function(i){var e=null;if(i){var t=[];for(var n in i)if(i.hasOwnProperty(n)){var r=i[n];r||(r=""),t.push(n+"="+r)}e=t.join("&")}return e},normalyzeUrl:function(i,e,t){var n=i;if(i){var r=i.indexOf("?");r===-1&&(n+="?"),r!==-1&&r!==i.length-1&&(n+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),n+=e):n+=this.normalyzeParameters(e)),t&&(n=encodeURIComponent(n)),n},indent:function(i,e){var t=i||0;return new Array(t+1).join("	")+e}};function j3(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ob={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(i,e){(function(t,n){i.exports=n()})(Lu,function(){function t(T){var F=typeof T;return T!==null&&(F==="object"||F==="function")}function n(T){return typeof T=="function"}var r=void 0;Array.isArray?r=Array.isArray:r=function(T){return Object.prototype.toString.call(T)==="[object Array]"};var s=r,o=0,a=void 0,l=void 0,c=function(F,U){I[o]=F,I[o+1]=U,o+=2,o===2&&(l?l(b):R())};function u(T){l=T}function h(T){c=T}var d=typeof window<"u"?window:void 0,f=d||{},g=f.MutationObserver||f.WebKitMutationObserver,p=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",m=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function v(){return function(){return process.nextTick(b)}}function y(){return typeof a<"u"?function(){a(b)}:C()}function A(){var T=0,F=new g(b),U=document.createTextNode("");return F.observe(U,{characterData:!0}),function(){U.data=T=++T%2}}function _(){var T=new MessageChannel;return T.port1.onmessage=b,function(){return T.port2.postMessage(0)}}function C(){var T=setTimeout;return function(){return T(b,1)}}var I=new Array(1e3);function b(){for(var T=0;T<o;T+=2){var F=I[T],U=I[T+1];F(U),I[T]=void 0,I[T+1]=void 0}o=0}function S(){try{var T=Function("return this")().require("vertx");return a=T.runOnLoop||T.runOnContext,y()}catch{return C()}}var R=void 0;p?R=v():g?R=A():m?R=_():d===void 0&&typeof j3=="function"?R=S():R=C();function P(T,F){var U=this,H=new this.constructor(D);H[x]===void 0&&E(H);var te=U._state;if(te){var ee=arguments[te-1];c(function(){return ne(te,H,ee,U._result)})}else z(U,H,T,F);return H}function w(T){var F=this;if(T&&typeof T=="object"&&T.constructor===F)return T;var U=new F(D);return Te(U,T),U}var x=Math.random().toString(36).substring(2);function D(){}var k=void 0,O=1,N=2;function B(){return new TypeError("You cannot resolve a promise with itself")}function V(){return new TypeError("A promises callback cannot return that same promise.")}function se(T,F,U,H){try{T.call(F,U,H)}catch(te){return te}}function j(T,F,U){c(function(H){var te=!1,ee=se(U,F,function(ue){te||(te=!0,F!==ue?Te(H,ue):pe(H,ue))},function(ue){te||(te=!0,Ie(H,ue))},"Settle: "+(H._label||" unknown promise"));!te&&ee&&(te=!0,Ie(H,ee))},T)}function Ae(T,F){F._state===O?pe(T,F._result):F._state===N?Ie(T,F._result):z(F,void 0,function(U){return Te(T,U)},function(U){return Ie(T,U)})}function q(T,F,U){F.constructor===T.constructor&&U===P&&F.constructor.resolve===w?Ae(T,F):U===void 0?pe(T,F):n(U)?j(T,F,U):pe(T,F)}function Te(T,F){if(T===F)Ie(T,B());else if(t(F)){var U=void 0;try{U=F.then}catch(H){Ie(T,H);return}q(T,F,U)}else pe(T,F)}function Ce(T){T._onerror&&T._onerror(T._result),oe(T)}function pe(T,F){T._state===k&&(T._result=F,T._state=O,T._subscribers.length!==0&&c(oe,T))}function Ie(T,F){T._state===k&&(T._state=N,T._result=F,c(Ce,T))}function z(T,F,U,H){var te=T._subscribers,ee=te.length;T._onerror=null,te[ee]=F,te[ee+O]=U,te[ee+N]=H,ee===0&&T._state&&c(oe,T)}function oe(T){var F=T._subscribers,U=T._state;if(F.length!==0){for(var H=void 0,te=void 0,ee=T._result,ue=0;ue<F.length;ue+=3)H=F[ue],te=F[ue+U],H?ne(U,H,te,ee):te(ee);T._subscribers.length=0}}function ne(T,F,U,H){var te=n(U),ee=void 0,ue=void 0,Me=!0;if(te){try{ee=U(H)}catch(be){Me=!1,ue=be}if(F===ee){Ie(F,V());return}}else ee=H;F._state!==k||(te&&Me?Te(F,ee):Me===!1?Ie(F,ue):T===O?pe(F,ee):T===N&&Ie(F,ee))}function Y(T,F){try{F(function(H){Te(T,H)},function(H){Ie(T,H)})}catch(U){Ie(T,U)}}var Pe=0;function tt(){return Pe++}function E(T){T[x]=Pe++,T._state=void 0,T._result=void 0,T._subscribers=[]}function M(){return new Error("Array Methods must be provided an Array")}var G=function(){function T(F,U){this._instanceConstructor=F,this.promise=new F(D),this.promise[x]||E(this.promise),s(U)?(this.length=U.length,this._remaining=U.length,this._result=new Array(this.length),this.length===0?pe(this.promise,this._result):(this.length=this.length||0,this._enumerate(U),this._remaining===0&&pe(this.promise,this._result))):Ie(this.promise,M())}return T.prototype._enumerate=function(U){for(var H=0;this._state===k&&H<U.length;H++)this._eachEntry(U[H],H)},T.prototype._eachEntry=function(U,H){var te=this._instanceConstructor,ee=te.resolve;if(ee===w){var ue=void 0,Me=void 0,be=!1;try{ue=U.then}catch(wt){be=!0,Me=wt}if(ue===P&&U._state!==k)this._settledAt(U._state,H,U._result);else if(typeof ue!="function")this._remaining--,this._result[H]=U;else if(te===Q){var pt=new te(D);be?Ie(pt,Me):q(pt,U,ue),this._willSettleAt(pt,H)}else this._willSettleAt(new te(function(wt){return wt(U)}),H)}else this._willSettleAt(ee(U),H)},T.prototype._settledAt=function(U,H,te){var ee=this.promise;ee._state===k&&(this._remaining--,U===N?Ie(ee,te):this._result[H]=te),this._remaining===0&&pe(ee,this._result)},T.prototype._willSettleAt=function(U,H){var te=this;z(U,void 0,function(ee){return te._settledAt(O,H,ee)},function(ee){return te._settledAt(N,H,ee)})},T}();function W(T){return new G(this,T).promise}function X(T){var F=this;return s(T)?new F(function(U,H){for(var te=T.length,ee=0;ee<te;ee++)F.resolve(T[ee]).then(U,H)}):new F(function(U,H){return H(new TypeError("You must pass an array to race."))})}function K(T){var F=this,U=new F(D);return Ie(U,T),U}function ie(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function $(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Q=function(){function T(F){this[x]=tt(),this._result=this._state=void 0,this._subscribers=[],D!==F&&(typeof F!="function"&&ie(),this instanceof T?Y(this,F):$())}return T.prototype.catch=function(U){return this.then(null,U)},T.prototype.finally=function(U){var H=this,te=H.constructor;return n(U)?H.then(function(ee){return te.resolve(U()).then(function(){return ee})},function(ee){return te.resolve(U()).then(function(){throw ee})}):H.then(U,U)},T}();Q.prototype.then=P,Q.all=W,Q.race=X,Q.resolve=w,Q.reject=K,Q._setScheduler=u,Q._setAsap=h,Q._asap=c;function Z(){var T=void 0;if(typeof Lu<"u")T=Lu;else if(typeof self<"u")T=self;else try{T=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var F=T.Promise;if(F){var U=null;try{U=Object.prototype.toString.call(F.resolve())}catch{}if(U==="[object Promise]"&&!F.cast)return}T.Promise=Q}return Q.polyfill=Z,Q.Promise=Q,Q})})(ob);var z3=ob.exports;const V3=by(z3);var ab={call:function(i){var e=Tt.getLogger("XHR");if(e.trace("[XHR::call()]"),V3.polyfill(),!i.url)throw new Error("missing parameter : url is not defined !");if(!i.method)throw new Error("missing parameter : method is not defined !");i.format||(i.format="text");var t={};switch(t.url=i.url,t.data=i.data?i.data:null,t.method=i.method,t.timeOut=i.timeOut||0,t.scope=i.scope||this,t.proxy=i.proxy||null,t.content=i.content||null,t.headers=i.headers||{referer:"http://localhost"},i.method){case"DELETE":case"GET":break;case"PUT":case"POST":t.content=i.content?i.content:"application/x-www-form-urlencoded",t.headers=i.headers?i.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(i.format){case"text":this.__call(t).then(function(n){e.trace(n),i.onResponse.call(this,n)}).catch(function(n){i.onFailure.call(this,n)});break;case"json":this.__callJSON(t).then(function(n){e.trace(n),i.onResponse.call(this,n)}).catch(function(n){i.onFailure.call(this,n)});break;case"xml":this.__callXML(t).then(function(n){e.trace(n),i.onResponse.call(this,n)}).catch(function(n){i.onFailure.call(this,n)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(i){var e=Tt.getLogger("XHR");e.trace("[XHR::__call()]");var t=new Promise(function(n,r){var s=i.method==="POST"||i.method==="PUT"?1:0;i.data&&(typeof i.data=="object"&&Object.keys(i.data).length||typeof i.data=="string"&&i.data.length)&&!s&&(i.url=Os.normalyzeUrl(i.url,i.data)),e.trace("URL = ",i.url);var o=null;if(typeof window>"u"){var a=require("node-fetch"),l={headers:{Referer:"https://localhost"}};return i.data&&typeof i.data=="string"&&s&&(l={method:i.method,body:i.data,headers:{"Content-Type":i.content,Referer:"https://localhost"}}),a(i.url,l).then(function(d){if(d.ok)n(d.text());else{var f="Errors Occured on Http Request (status : '"+d.statusText+"' | url : '"+d.url+"')",g=d.status;r({message:f,status:g})}}).catch(function(d){r({message:d,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),o=new XMLHttpRequest,o.open(i.method,i.url,!0),o.overrideMimeType=i.content;var c=null;i.timeOut>0&&(e.trace("XHR - TimeOut actif !"),c=window.setTimeout(function(){var d="TimeOut Occured on Http Request with XMLHttpRequest !";r({message:d,status:-1})},i.timeOut)),s&&(e.trace("data = ",i.data),o.setRequestHeader("Content-type",i.content)),o.onerror=function(d){console.log(d),r(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},o.ontimeout=function(d){console.log(d),r(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},o.onreadystatechange=function(d){if(o.readyState===4)if(o.status===200)window.clearTimeout(c),n(o.response);else{var f="Errors Occured on Http Request (status : '"+d.target.statusText+"' | url : '"+d.target.responseURL+"' | response : '"+d.target.response+"')",g=d.target.status;r({message:f,status:g})}};var u=i.data&&s?i.data:null;o.send(u)}else if(window.XDomainRequest){e.trace("XDomainRequest"),o=new XDomainRequest,o.open(i.method,i.url),o.overrideMimeType=i.content,i.timeOut>0&&(o.timeout=i.timeout,e.trace("XHR - TimeOut actif !")),s&&o.setRequestHeader("Content-type",i.content),o.onerror=function(){r(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},o.ontimeout=function(){r(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},o.onload=function(d){if(o.status===200)n(o.responseText);else{var f="Errors Occured on Http Request (status : '"+d.target.statusText+"' | url : '"+d.target.responseURL+"')",g=d.target.status;r({message:f,status:g})}};var h=i.data&&s?i.data:null;o.send(h)}else throw new Error("CORS not supported")});return t},__callJSON:function(i){return this.__call(i).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",i.url,e)})},__callXML:function(i){return this.__call(i).then(function(e){var t;if(typeof window>"u"){var n=require("@xmldom/xmldom").DOMParser;t=new n().parseFromString(e,"text/xml")}else if(window.DOMParser){var r=new window.DOMParser;t=r.parseFromString(e,"text/xml")}else t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e);return t}).catch(function(e){console.log("__callXML failed on : ",i.url,e)})}},W3={uuid:function(){var i=Math.floor(Date.now());return function(){return i++}}(),call:function(i){var e=Tt.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!i)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!i.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(i.timeOut||(e.info("setting 'options.timeOut' default value"),i.timeOut=0),!i.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var t=typeof i.callbackSuffix=="string"?i.callbackSuffix:this.uuid(),n=!1,r=!1,s=i.url.indexOf("callback=");if(s!==-1){n=!0;var o=i.url.indexOf("&",s);o===-1&&(o=i.url.length);var a=i.url.substring(s+9,o);a&&(r=!0,i.callbackName=a,e.info("setting 'options.callbackName' value ("+i.callbackName+") from 'options.url' parameter"))}if(!n){var l=i.url.indexOf("?");l===-1?i.url=i.url+"?callback=":l===i.url.length?i.url=i.url+"callback=":i.url=i.url+"&callback=",e.info("setting callback default key in 'options.url' : "+i.url)}var c=i.callbackName?!0:r;if(r||(i.callbackName||(e.info("setting 'options.callbackName' default value"),i.callbackName="callback",(t||t==="")&&(i.callbackName+=t)),i.url=i.url.replace("callback=","callback="+i.callbackName),e.info("setting callback function name in 'options.url' : "+i.url)),i.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),i.onTimeOut=function(){console.log("TimeOut while invoking url : "+i.url)}),!c){var u=this,h=null;i.timeOut>0&&(h=window.setTimeout(function(){window[i.callbackName]=function(){},i.onTimeOut(),u._deleteScript(t)},i.timeOut)),window[i.callbackName]=function(d){window.clearTimeout(h),i.onResponse(d),u._deleteScript(t)}}this._createScript(t,i.url)},_createScript:function(i,e){var t,n=document.getElementById("results"+i);t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),t.setAttribute("charset","UTF-8"),t.setAttribute("id","results"+i),t.setAttribute("async","true");var r=document.documentElement||document.getElementsByTagName("head")[0];n===null?r.appendChild(t):r.replaceChild(t,n)},_deleteScript:function(i){var e=document.getElementById("results"+i);if(e){var t=e.parentNode||document.documentElement;if(!t)return;t.removeChild(e)}}},Y3={send:function(i){var e=i||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&i.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(i.protocol==="XHR"||i.format==="json"?e.wrap=!1:i.protocol==="JSONP"&&i.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var t={};t.output=e.output,t.callback=e.callback,delete t.callback,e.url=Os.normalyzeUrl(i.url,t)}switch(e.protocol){case"XHR":i.method==="GET"&&i.nocache&&(e.url=Os.normalyzeUrl(e.url,{t:new Date().getTime()})),ab.call(e);break;case"JSONP":e.data&&(e.url=Os.normalyzeUrl(e.url,e.data)),W3.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function _e(i){if(!(this instanceof _e))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=i;typeof i=="string"||i instanceof String?(this.message=i,this.status=-1,this.type=_e.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}_e.TYPE_SRVERR="SERVICE_ERROR";_e.TYPE_USEERR="USAGE_ERROR";_e.TYPE_UNKERR="UNKNOWN_ERROR";_e.prototype=Object.create(Error.prototype,{constructor:{value:_e,writable:!0,configurable:!0}});const H3="geoportal-access-lib",q3="3.4.1",X3="16/04/2024",Z3="French Geoportal resources access library",K3="src/Gp.js",J3="dist/GpServices-src.js",Q3="https://github.com/IGNF/geoportal-access-lib#readme",$3={clean:'echo "Warning: no yet implemented!" && exit 0',setup:"npm install",cover:"nyc --reporter=lcov --reporter=text npm run test",eslint:"eslint src/",build:"webpack --mode=none","build:prod":"webpack --mode=production","build:dev":"webpack --mode=development",test:'mocha-webpack --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob "test_*.js" test/spec/',"test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js",sample:"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path '/dist/' --port 9001 --open",doc:"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open"},eF={include:["src/**/*.js"],instrument:!1,sourceMap:!1},tF={type:"git",url:"https://github.com/IGNF/geoportal-access-lib.git"},iF=["geoplateforme","geoportail","webservice","javascript","es6"],nF="IGNF",rF="CECILL-B",sF={"es6-promise":"^4.2.4","node-fetch":"^2.6.1","@xmldom/xmldom":"^0.8.10"},oF={"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2",chai:"^4.1.2","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.1.2",eslint:"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0",glob:"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.1","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0",loglevel:"^1.6.1",mocha:"^7.2.0","mocha-loader":"^5.1.5","mocha-webpack":"^2.0.0-beta.0",mochawesome:"^6.2.1",nyc:"^15.1.0",path:"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0",sinon:"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^2.3.8",webpack:"^4.46.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},aF=[],lF={},cF={},Sy={name:H3,version:q3,date:X3,description:Z3,module:K3,main:J3,homepage:Q3,scripts:$3,nyc:eF,repository:tF,keywords:iF,author:nF,license:rF,dependencies:sF,devDependencies:oF,bundledDependencies:aF,peerDependencies:lF,optionalDependencies:cF};function An(i){if(!(this instanceof An))throw new TypeError(me.getMessage("CLASS_CONSTRUCTOR"));this.logger=Tt.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(n){console.log("onSuccess - la reponse est la suivante : ",n)},onFailure:function(n){n.status===200||!n.status?console.log("onFailure : ",n.message):console.log("onFailure - Erreur (",n.status,") : ",n.message)}};for(var e in i)i.hasOwnProperty(e)&&(this.options[e]=i[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(n){console.log("onSuccess - la rponse brute du service est la suivante : ",n)});var t=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!t)throw new Error(me.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof i.httpMethod=="string"?i.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(me.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(me.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof i.protocol=="string"?i.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(me.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(me.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=i.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}An.prototype={constructor:An,call:function(){this.logger.trace("CommonService::call ()");var i=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(i,s,t)}e.call(i);function t(o){this.logger.trace("CommonService::onBuildRequest : ",o),this.callService.call(i,s,n)}function n(o){this.logger.trace("CommonService::onCallService : ",o),this.analyzeResponse.call(i,s,r)}function r(o){if(this.logger.trace("CommonService::onAnalyzeResponse : ",o),o)this.options.onSuccess.call(this,o);else return s.call(this,new _e("Analyse de la reponse en chec !?"))}function s(o){this.logger.trace("CommonService::onError()");var a=o;a instanceof _e||(a=new _e(o.message)),this.options.onFailure.call(this,a)}},buildRequest:function(i,e){this.logger.error("overwritten method !"),i&&i.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(i,e){var t=null,n=this.request,r=!!(this.options.proxyURL&&this.options.protocol==="XHR"),s={"gp-access-lib":Sy.version};this.options.apiKey&&(s.apiKey=this.options.apiKey),this.options.serverUrl=Os.normalyzeUrl(this.options.serverUrl,s,!1),r&&(this.options.httpMethod==="GET"&&(t=this.options.proxyURL+Os.normalyzeUrl(this.options.serverUrl,this.request,!0),n=null),this.options.httpMethod==="POST"&&(t=this.options.proxyURL+Os.normalyzeUrl(this.options.serverUrl,null,!0),n=this.request));var o=this,a={url:t||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:n,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(l){o.logger.trace("callService::onResponse()");var c=null;if(o.options.protocol==="XHR"&&(o.logger.trace("Response XHR",l),c=l),o.options.protocol==="JSONP")if(o.logger.trace("Response JSON",l),l)if(l.http)if(l.http.status!==200){i.call(o,new _e({status:l.http.status,message:l.http.error,type:_e.TYPE_SRVERR}));return}else c=l.xml,o.options.rawResponse&&(c=l);else c=l;else{i.call(o,new _e("Le contenu de la reponse est vide !?"));return}if(typeof o.options.onBeforeParse=="function"){var u=o.options.onBeforeParse(c);typeof u=="string"&&(c=u)}o.response=c,e.call(o,c)},onFailure:function(l){o.logger.trace("callService::onFailure()"),l.type=_e.TYPE_SRVERR,i.call(o,new _e(l))},onTimeOut:function(){o.logger.trace("callService::onTimeOut()"),i.call(o,new _e("TimeOut!"))}};Y3.send(a)},analyzeResponse:function(i,e){this.logger.error("overwritten method !"),i&&i.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var Li={ssl:!0,newUrl:function(i){var e="data.geopf.fr",t;return Li.ssl===!1?t="http://":t="https://",t+e+i},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":Li.newUrl(this.new_key["elevation-json"]),"elevation-xml":Li.newUrl(this.new_key["elevation-xml"]),"profil-json":Li.newUrl(this.new_key["profil-json"]),"profil-xml":Li.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return Li.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(i){Array.isArray(i)||(i=i.split(","));for(var e=[],t=0;t<i.length;t++)e[t]=this._key+i[t]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return Li.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return Li.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return Li.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return Li.newUrl(this.new_key)}}};function Hf(){if(!(this instanceof Hf))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}Hf.prototype={constructor:Hf,isKeyConfLoaded:function(i){if(i)return!!this.generalOptions.apiKeys[i]},getLayersId:function(i){return this.generalOptions.apiKeys[i]},getLayerId:function(i,e){if(!(!i||!e)){var t=null;if(this.layers){var n=this.layers;for(var r in n)if(n.hasOwnProperty(r)){var s=r.split("$");if(i===s[0]&&s[1]){var o=s[1].split(":"),a=s[1].split(";");if(a[1]===e.toUpperCase()){t=r;break}if(o[2]===e.toUpperCase()){t=r;break}}}}if(t)return t}},getLayersConf:function(i){var e={},t=this.getLayersId(i);if(t)for(var n=0;n<t.length;n++){var r=t[n];e[r]=this.layers[r]}return e},getLayerConf:function(i){if(this.layers)return this.layers[i]},getLayerParams:function(i,e){var t={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var n=this.getLayerId(i,e);if(n){var r=this.getLayerConf(n),s=this.getLayerKey(n);if(s.length===0)return;for(var o=0;o<s.length;o++)r.serviceParams.serverUrl[s[o]]&&(t.url=r.serviceParams.serverUrl[s[o]]);if(/\/v\//.test(t.url)?t.styles=" ":t.styles=r.styles[0].name,t.version=r.serviceParams.version,t.format=r.formats[0].name,t.projection=r.defaultProjection,t.minScale=r.globalConstraint.minScaleDenominator,t.maxScale=r.globalConstraint.maxScaleDenominator,t.extent=r.globalConstraint.bbox,t.legends=r.legends,t.title=r.title,t.description=r.description,e==="WMS"&&(t.metadata=r.metadata),r.wmtsOptions){t.tileMatrixSetLimits=r.wmtsOptions.tileMatrixSetLimits;var a=r.wmtsOptions.tileMatrixSetLink;if(a){t.TMSLink=a;var l=this.getTMSConf(a);t.matrixIds=Object.keys(l.tileMatrices),t.tileMatrices=l.tileMatrices,t.nativeResolutions=l.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return t},getLayerKey:function(i){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var t=this.generalOptions.apiKeys;for(var n in t){var r=t[n];r.forEach(function(s){s===i&&e.push(n)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(i){if(this.tileMatrixSets)return this.tileMatrixSets[i]},getGlobalConstraints:function(i){var e={};if(i){var t=this.getLayerConf(i);e.projection=t.defaultProjection,e.minScale=t.globalConstraint.minScaleDenominator,e.maxScale=t.globalConstraint.maxScaleDenominator,e.extent=t.globalConstraint.bbox}return e}};function js(i){if(!(this instanceof js))throw new TypeError(me.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=Tt.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=i.onSuccess!==null&&typeof i.onSuccess=="function";if(!e)throw new Error(me.getMessage("PARAM_MISSING","onSuccess()"));!i.apiKey&&!i.customConfigFile&&(i.apiKey="full"),this.options={},this.options.onSuccess=i.onSuccess,this.options.onFailure=i.onFailure,this.options.sync=i.sync||!1,this.options.listConfigUrls=i.customConfigFile?[i.customConfigFile]:Array.isArray(i.apiKey)?Li.Config.url(i.apiKey):Li.Config.url(i.apiKey.split(","))}js.prototype=Object.create(An.prototype,{});js.prototype.constructor=js;js.prototype.buildRequest=function(i,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){i.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};js.prototype.callService=function(i,e){this.options.sync?hF.call(this,i,e):uF.call(this,i,e)};var uF=function(i,e){this.listConfigResults=[];let t=null;if(typeof window>"u"){var n=require("node-fetch");t=n}else t=window.fetch;var r=o=>t(o,{credentials:"same-origin"}).then(a=>{if(a.ok)return a.json().then(l=>l).catch(l=>{throw new Error("Exception Json : "+l)});throw new Error("Exception HTTP : "+a.status+" (status code) !")}).catch(a=>new Promise((l,c)=>{c(a)})),s=[];for(let o=0;o<this.listConfigUrls.length;o++){const a=this.listConfigUrls[o];s.push(r(a))}Promise.all(s).then(o=>{if(!o)throw new Error("results config empty !?");o.forEach(a=>{this.listConfigResults.push(a)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(o=>{i.call(this,o)})},hF=function(i,e){this.listConfigResults=[];for(var t=0;t<this.listConfigUrls.length;t++){const r=this.listConfigUrls[t],s=new XMLHttpRequest;if(s.open("GET",r,!1),s.send(null),s.status===200){var n=JSON.parse(s.responseText);this.listConfigResults.push(n)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):i.call(this,new Error("..."))};js.prototype.analyzeResponse=function(i,e){var t=function(a){for(var l={},c={},u={},h=0;h<a.length;h++){if(!a[h].generalOptions||!a[h].layers)return;c={...c,...a[h].generalOptions.apiKeys},l={...l,...a[h].layers},u={...u,...a[h].tileMatrixSets}}var d={generalOptions:{apiKeys:c},layers:l,tileMatrixSets:u};return d},n=t(this.listConfigResults);if(!n){i.call(this,new Error("configuration structure not conforme !"));return}var r=new Hf;Object.assign(r,n);var s=typeof window<"u"?window:{};if(s.Gp||(s.Gp={}),s.Gp.Config){Object.assign(s.Gp.Config,r);for(var o in r)s.Gp.Config[o]=r[o]}else s.Gp.Config=r;e.call(this,s.Gp.Config)};function zs(i){if(!(this instanceof zs))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=Tt.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=i||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}zs.CLASSNAME="AltiRequest";zs.prototype={constructor:zs,setPositions:function(i){for(var e=[],t=0;t<i.length;t++){var n=i[t];n.lon&&n.lat&&e.push(n)}this.positions=e},getPositions:function(i){if(!i)return this.positions;var e=this.positions.length-1;return i>e||i<e?(this.logger.warn("index out of range !"),this.positions):this.positions[i]},addPositions:function(i){for(var e=0;e<i.length;e++){var t=i[e];t.lon&&t.lat&&this.positions.push(i[e])}},getLon:function(){for(var i=[],e=0;e<this.positions.length;e++)i.push(this.positions[e].lon);return this.logger.trace(i),i.join(this.delimiter)},getLat:function(){for(var i=[],e=0;e<this.positions.length;e++)i.push(this.positions[e].lat);return this.logger.trace(i),i.join(this.delimiter)}};zs.prototype.getData=function(){var i=[];return i.push({k:"lon",v:this.getLon()}),i.push({k:"lat",v:this.getLat()}),i.push({k:"delimiter",v:this.delimiter}),i.push({k:"indent",v:this.indent}),i.push({k:"crs",v:this.crs}),i.push({k:"format",v:this.format}),i};function Na(i){if(!(this instanceof Na))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",zs.apply(this,arguments),this.logger=Tt.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}Na.prototype=Object.create(zs.prototype,{zonly:{get:function(){return this._zonly},set:function(i){this._zonly=i}}});Na.prototype.constructor=Na;Na.prototype.getData=function(){var i=[];return i.push({k:"lon",v:this.getLon()}),i.push({k:"lat",v:this.getLat()}),i.push({k:"indent",v:this.indent}),i.push({k:"crs",v:this.crs}),i.push({k:"zonly",v:this.zonly}),i.push({k:"format",v:this.format}),i.push({k:"resource",v:this.resource}),i};function Ua(i){if(!(this instanceof Ua))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",zs.apply(this,arguments),this.logger=Tt.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}Ua.prototype=Object.create(zs.prototype,{sampling:{get:function(){return this._sampling},set:function(i){this._sampling=i}}});Ua.prototype.constructor=Ua;Ua.prototype.getData=function(){var i=[];return i.push({k:"lon",v:this.getLon()}),i.push({k:"lat",v:this.getLat()}),i.push({k:"indent",v:this.indent}),i.push({k:"crs",v:this.crs}),i.push({k:"sampling",v:this.sampling}),i.push({k:"format",v:this.format}),i.push({k:"resource",v:this.resource}),i};function qf(i){if(this.logger=Tt.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof qf))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=i||{},!this.options)throw new Error(me.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(me.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new Na(this.options.param);break;case"Profil":this.DataObject=new Ua(this.options.param);break;default:throw new Error(me.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}qf.prototype={requestString:null,constructor:qf,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var i="";return this.method==="POST"?i=this.template.post.value:this.method==="GET"&&(i=this.template.get.value),i=i.replace(/__LON__/g,this.DataObject.getLon()),i=i.replace(/__LAT__/g,this.DataObject.getLat()),i=i.replace(/__INDENT__/g,this.DataObject.indent),i=i.replace(/__CRS__/g,this.DataObject.crs),i=i.replace(/__RESOURCE__/g,this.DataObject.resource),i=i.replace(/__MEASURES__/g,this.DataObject.measures),i=i+this.__addDataInputs(),this.logger.trace("traduction tmpl",i),this.requestString=i,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var i;if(this.method==="POST")i=this.template.post;else if(this.method==="GET")i=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=i.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=i.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function Xf(i){if(this.logger=Tt.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof Xf))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=i||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}Xf.prototype={requestString:null,constructor:Xf,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var i=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return i.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var i="";if(this.method==="POST")i=this.template.post.value;else if(this.method==="GET")i=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return i=i.replace(/__SERVICE__/g,this.paramservice),i=i.replace(/__VERSION__/g,this.paramversion),i=i.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),i=i.replace(/__IDENTIFIER__/g,this.paramidentifier),i=i.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(i=i.replace(/__NAMESPACE__/g,this.namespaceByDefault),i=i.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),i=i.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),i?(this.requestString=i,this.logger.trace("traduction tmpl",i),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var i=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",t="",n=this,r=this.DataObject.getData(),s=0;s<r.length;s++)(function(o){e&&(e=o===r.length-1?"":";"),t=t.concat(n.__addDataInput(i,r[o].k,r[o].v),e)})(s);return t},__addDataInput:function(i,e,t){var n=i;return n=n.replace(/__KEY__/g,e),n=n.replace(/__DATA__/g,t),n},setMethod:function(i){i==="GET"||i==="POST"?this.method=i:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var dF={build:function(i){var e=Tt.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!i)throw new Error(me.getMessage("PARAM_EMPTY","options"));if(!i.type)throw new Error(me.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var t=null;switch(i.type){case"Elevation":i.wps.identifier="gs:WPSElevation",t=new Na(i.param);break;case"Profil":i.wps.identifier="gs:WPSLineElevation",t=new Ua(i.param);break;default:throw new Error(me.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var n={data:t,method:i.method,param:i.wps},r=new Xf(n);if(!r.processRequestString())throw new Error("Enable to process request !");return r.requestString}},fF={build:function(i){var e=Tt.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var t=null,n={type:i.sampling?"Profil":"Elevation",method:i.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};n.param.positions=i.positions,n.param.format=i.outputFormat,n.param.sampling=i.sampling,n.param.zonly=i.zonly,n.param.measures=i.measures,n.param.resource=i.resource;var r=i.onError!==null&&typeof i.onError=="function",s=i.onSuccess!==null&&typeof i.onSuccess=="function",o=null;switch(i.api){case"REST":var a=new qf(n);if(!a.processRequestString()){if(o="Error in process request (rest) !",r){i.onError.call(i.scope,new _e(o));return}throw new Error(o)}t=a.requestString;break;case"WPS":if(n.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},t=dF.build(n),!t){if(o="Error in process request (wps) !",r){i.onError.call(i.scope,new _e(o));return}throw new Error(o)}break;default:if(o="Type of API is not supported by service (REST or WPS) !",r){i.onError.call(i.scope,new _e(o));return}throw new Error(o)}return s&&i.onSuccess.call(i.scope,t),t}};function Zf(i){if(!(this instanceof Zf))throw new TypeError("XML constructor cannot be called as a function.");this.logger=Tt.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,i&&(i.xmlString&&typeof i.xmlString=="string"&&(this.xmlString=i.xmlString,this.xmlDoc=bm(i.xmlString)),i.reader&&this.setReader(i.reader))}Zf.prototype={constructor:Zf,getXMLString:function(){return this.xmlString},setXMLString:function(i){i&&typeof i=="string"&&(this.xmlString=i,this.xmlDoc=bm(i))},getReader:function(){return this.reader},setReader:function(i){i&&i.read&&typeof i.read=="function"&&(this.reader=i)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(i){this.xmlDoc=i},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=bm(this.xmlString)),this.xmlDoc){var i=gF(this.xmlDoc);if(i){var e;return this.reader&&this.reader.read?e=this.reader.read(i):(e={},e[i.nodeName]=lb(i)),e}else return{}}}};function bm(i){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(i,"text/xml")}else{var t,n,r="Erreur lors du parsing de la rponse du service : XML non conforme";if(window.ActiveXObject){n=new window.ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(i);var s=n.parseError;if(s.errorCode)throw s.line&&s.linepos&&(r+="( ligne "+s.line+", colonne "+s.linepos),s.reason&&(r+=":  "+s.reason+")"),new Error(r);return n}else if(window.DOMParser){t=new window.DOMParser;try{n=t.parseFromString(i,"text/xml")}catch(c){throw c.message==="SyntaxError"?new Error(r):new Error("Erreur lors du parsing de la rponse du service : "+c.message)}if(n.getElementsByTagName("parsererror").length>0)for(var o=n.getElementsByTagName("parsererror"),a=0;a<o.length;a++){var l=o[a].innerHTML;if(l.indexOf("Huge input lookup")===-1)throw r+="("+l+")",new Error(r)}else if(!n.documentElement)throw new Error(r);return n}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function gF(i){var e;return i.nodeType===9?e=i.documentElement:i.nodeType===1&&(e=i),e}function lb(i){var e={};if(i.attributes.length>0){var t=pF(i);e.attributes=t}if(i.hasChildNodes()){for(var n={},r,s=i.childNodes,o=0;o<s.length;o++)if(r=s[o],r.nodeType===3)e.textContent=r.nodeValue;else if(r.nodeType===1)if(n=lb(r),!e[r.nodeName])e[r.nodeName]=n;else{if(!Array.isArray(e[r.nodeName])){var a=e[r.nodeName];e[r.nodeName]=[],e[r.nodeName].push(a)}e[r.nodeName].push(n)}}return e}function pF(i){if(i.attributes.length>0){for(var e={},t=i.attributes,n=0;n<t.length;n++){var r=t[n];e[r.nodeName]=r.nodeValue}return e}}function mc(){if(!(this instanceof mc))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}mc.prototype={constructor:mc};function Ba(){if(!(this instanceof Ba))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Ba.prototype={constructor:Ba};function Kf(){if(!(this instanceof Kf))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Kf.prototype={constructor:Kf};var ir={};ir.READERS={elevations:function(i){var e=new mc;if(i.hasChildNodes())for(var t=i.childNodes,n,r,s=0;s<t.length;s++)n=t[s],ir.READERS[n.nodeName]&&(r=ir.READERS[n.nodeName](n),e.elevations.push(r));return e},elevation:function(i){var e=new Ba;if(i.hasChildNodes())for(var t=i.childNodes,n,r=0;r<t.length;r++)n=t[r],ir.READERS[n.nodeName]&&ir.READERS[n.nodeName](n,e);return e},lat:function(i,e){var t=i.firstChild;if(t&&t.nodeType===3)e.lat=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : latitude attendue mais absente")},lon:function(i,e){var t=i.firstChild;if(t&&t.nodeType===3)e.lon=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : longitude attendue mais absente")},z:function(i,e){var t=i.firstChild;if(t&&t.nodeType===3)if(e)e.z=parseFloat(t.nodeValue);else return e=new Ba,e.z=parseFloat(t.nodeValue),e;else throw new Error("Erreur dans la lecture de la rponse du service : altitude attendue mais absente")},acc:function(i,e){var t=i.firstChild;if(t&&t.nodeType===3)e.acc=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la rponse du service : prcision (acc) attendue mais absente")},source_name:function(i,e){var t=i.firstChild;if(t&&t.nodeType===3)e.source_name=t.nodeValue;else throw new Error("Erreur dans la lecture de la rponse du service : source_name attendue mais absente")},source_measure:function(i,e){var t=i.firstChild;if(t&&t.nodeType===3)e.source_measure=t.nodeValue;else throw new Error("Erreur dans la lecture de la rponse du service : source_measure attendue mais absente")},measures:function(i,e){e.measures=[];var t;if(i.hasChildNodes())for(var n=i.childNodes,r,s,o=0;o<n.length;o++){t=new Kf,r=n[o],s=r.childNodes;for(var a=0;a<s.length;a++)if(ir.READERS[s[a].nodeName])ir.READERS[s[a].nodeName](s[a],t);else throw new Error("Erreur dans la lecture de la rponse du service : measures attendues mais absentes");e.measures.push(t)}},exceptionreport:function(i){var e={};if(i.hasChildNodes())for(var t=i.childNodes,n,r=0;r<t.length;r++)n=t[r],n.nodeName==="Exception"&&(e.exceptionReport=ir.READERS.exception(n));return e},exception:function(i){var e={},t=i.getAttribute("exceptionCode");t&&(e.exceptionCode=t);var n=i.firstChild;return n&&n.nodeType===3&&(e.exception=n.nodeValue),e},error:function(i){var e={error:{}};if(i.hasChildNodes())for(var t=i.childNodes,n,r=0;r<t.length;r++){n=t[r];var s;n.nodeType===1&&n.nodeName==="code"&&(s=n.firstChild,s&&s.nodeType===3&&(e.error.code=s.nodeValue)),n.nodeType===1&&n.nodeName==="description"&&(s=n.firstChild,s&&s.nodeType===3&&(e.error.description=s.nodeValue))}return e}};ir.read=function(i){if(i.nodeName==="elevations"){var e=ir.READERS.elevations(i);return e}else if(i.nodeName==="ExceptionReport"){var t=ir.READERS.exceptionreport(i);return t}else if(i.nodeName==="error"){var n=ir.READERS.error(i);return n}else throw new Error("Erreur lors de la lecture de la rponse : elle n'est pas au format attendu.")};var mF={build:function(i){var e=Tt.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var t=null;if(i.response)if(i.rawResponse)e.trace("analyze response : raw"),t=i.response;else{switch(i.outputFormat){case"xml":e.trace("analyze response : xml");try{var n=new Zf({reader:ir});if(typeof i.response=="string"?n.setXMLString(i.response):n.setXMLDoc(i.response),t=n.parse(),!t)throw new Error(me.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(h){var r=h.message;i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_EXCEPTION",r),status:200,type:_e.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof i.response);var s=null;if(typeof i.response=="string"?s=JSON.parse(i.response):s=i.response,s&&s.error){i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_EXCEPTION",s.error.description),status:200,type:_e.TYPE_SRVERR}));return}if(s){var o=s.elevations,a=new mc,l;if(Array.isArray(o)&&o.length)for(var c=0;c<o.length;c++)l=new Ba,typeof o[c]=="object"?(o[c].lon&&(l.lon=o[c].lon),o[c].lat&&(l.lat=o[c].lat),o[c].z&&(l.z=o[c].z),o[c].acc&&(l.acc=o[c].acc),o[c].measures&&(l.measures=o[c].measures)):typeof o[c]=="number"&&(l.z=o[c]),Array.isArray(a.elevations)&&a.elevations.push(l);t=a}if(!t){i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:_e.TYPE_UNKERR,status:-1}));return}break;default:i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:_e.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:_e.TYPE_SRVERR,status:200}));return}else if(t.error){var u=t.error.description;i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_EXCEPTION",u),type:_e.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new _e(me.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,t)}};function ja(i){if(!(this instanceof ja))throw new TypeError(me.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",An.apply(this,arguments),this.logger=Tt.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!i.positions)throw new Error(me.getMessage("PARAM_MISSING","positions"));if(i.positions.length===0)throw new Error(me.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=i.positions,this.options.outputFormat=typeof i.outputFormat=="string"?i.outputFormat.toLowerCase():"xml",this.options.resource=i.resource||"ign_rge_alti_wld",this.options.sampling=i.sampling||null,this.options.api=typeof i.api=="string"?i.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=i.zonly||!1,this.options.measures=i.measures||!1,!this.options.serverUrl){var e=Li.Alti.newUrl(),t=null;switch(this.options.api){case"WPS":t=e.wps;break;case"REST":var n=(i.sampling?"profil":"elevation")+"-"+this.options.outputFormat;t=e[n];break;default:throw new Error(me.getMessage("PARAM_UNKNOWN","api"))}if(!t)throw new Error("Url by default not found !");this.options.serverUrl=t,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var r=this.options.serverUrl.lastIndexOf(".");if(r!==-1){var s=this.options.serverUrl.substring(r+1);if(s&&s.length<5)switch(this.logger.trace("Server Extension URL : "+s),s.toLowerCase()){case"json":case"xml":this.options.outputFormat=s.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}ja.prototype=Object.create(An.prototype,{});ja.prototype.constructor=ja;ja.prototype.buildRequest=function(i,e){var t={httpMethod:this.options.httpMethod,onSuccess:function(n){this.request=n,e.call(this,this.request)},onError:i,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};fF.build(t)};ja.prototype.analyzeResponse=function(i,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:i,onSuccess:e,scope:this};mF.build(t)}else i.call(this,new _e(me.getMessage("SERVICE_RESPONSE_EMPTY")))};function vc(i){if(!(this instanceof vc))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=Tt.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=i||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}vc.CLASSNAME="GeocodeParamREST";vc.prototype={constructor:vc,getFilters:function(){var i={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(i[e]=this.filters[e]);return i},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};vc.prototype.getParams=function(){var i=[];this.geocodeMethod==="search"&&i.push({k:"q",v:this.query}),this.index&&i.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&i.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(i.push({k:"lon",v:this.lon}),i.push({k:"lat",v:this.lat})),this.maxResp&&i.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&i.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var t in e)i.push({k:t,v:e[t]});return i};function Jf(i){if(this.logger=Tt.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof Jf))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!i)throw new Error(me.getMessage("PARAM_EMPTY","options"));this.settings=i}Jf.prototype={requestString:null,constructor:Jf,processRequestString:function(){var i="";const t=new vc(this.settings).getParams();for(var n=0;n<t.length;n++){var r=t[n];i&&(i+="&"),i+=r.k+"="+r.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+i,this.logger.trace(this.requestString),this.requestString}};var cb={build:function(i){var e=Tt.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var t=i||{},n=new Jf(t);if(!n.processRequestString())throw new Error("Error process request (rest) !");var r=n.requestString;return e.trace(r),r}};function Qf(){if(!(this instanceof Qf))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}Qf.prototype={constructor:Qf};function $f(){if(!(this instanceof $f))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}$f.prototype={constructor:$f};function eg(){if(!(this instanceof eg))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}eg.prototype={constructor:eg,parse:function(i){var e=new Qf;const t=JSON.parse(i);if(t.type==="FeatureCollection")for(var n=0;n<t.features.length;++n)zC(t.features[n],e);else if(t.type==="Feature")zC(t,e);else{if(t.type==="SERVICE_ERROR")return vF(t);var r=me.getMessage("SERVICE_RESPONSE_ANALYSE",t.type);throw new _e({message:r,type:_e.TYPE_UNKERR,status:200})}return e}};function zC(i,e){var t=new $f;if(i.geometry&&i.geometry.type==="Point"&&(t.position={lon:i.geometry.coordinates[0],lat:i.geometry.coordinates[1]}),i.properties){for(var n in i.properties)n==="score"?t.accuracy=i.properties[n]:n==="_type"?i.properties[n]==="address"?t.type="StreetAddress":i.properties[n]==="poi"?t.type="PositionOfInterest":(i.properties[n]==="parcel"||i.properties[n]==="cadastral")&&(t.type="CadastralParcel"):t.placeAttributes[n]=i.properties[n];i.properties._type==="address"&&(t.matchType=i.properties.number!==void 0&&i.properties.number!==null?"street number":"street")}e.locations.push(t)}function vF(i){return{exceptionReport:i}}var ub={build:function(i){var e=null;if(i.response)if(i.rawResponse)e=i.response;else{try{if(e=new eg().parse(i.response),!e)throw new Error("L'analyse de la rponse du service !?")}catch(n){var t=n.message;typeof i.response=="string"?t+="('"+i.response+"')":t+="('"+i.response.documentElement.innerHTML+"')",i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_ANALYSE",t),type:_e.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:_e.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_EMPTY"),type:_e.TYPE_SRVERR,status:-1}));return}i.onSuccess.call(i.scope,e)}};function Bo(i){if(!(this instanceof Bo))throw new TypeError(me.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=Tt.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(i);if(e.serverUrl||(e.serverUrl=Li.Geocode.newUrl()),An.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(me.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),n=0;n<t.length;n++){var r=t[n];(typeof e.filters[r]>"u"||typeof e.filters[r]=="object"&&Object.keys(e.filters[r]).length===0||typeof e.filters[r]=="string"&&e.filters[r].length===0||Array.isArray(e.filters[r])&&e.filters[r].length===0)&&delete this.options.filters[r]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Bo.prototype=Object.create(An.prototype,{});Bo.prototype.constructor=Bo;Bo.prototype.patchOptionConvertor=function(i){const e=i;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Bo.prototype.buildRequest=function(i,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=cb.build(t),this.request?e.call(this,this.request):i.call(this,new _e(me.getMessage("SERVICE_REQUEST_BUILD")))};Bo.prototype.analyzeResponse=function(i,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:i,onSuccess:e,scope:this};ub.build(t)}else i.call(this,new _e(me.getMessage("SERVICE_RESPONSE_EMPTY")))};function Er(i){if(!(this instanceof Er))throw new TypeError(me.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=Tt.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(i);if(e.serverUrl||(e.serverUrl=Li.ReverseGeocode.newUrl()),An.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(me.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),n=0;n<t.length;n++){var r=t[n];(typeof e.filters[r]>"u"||typeof e.filters[r]=="object"&&Object.keys(e.filters[r]).length===0||typeof e.filters[r]=="string"&&e.filters[r].length===0||Array.isArray(e.filters[r])&&e.filters[r].length===0)&&delete this.options.filters[r]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Er.prototype=Object.create(An.prototype,{});Er.prototype.constructor=Er;Er.prototype.patchOptionConvertor=function(i){var e=i;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Er.prototype.buildRequest=function(i,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=cb.build(t),this.request?e.call(this,this.request):i.call(this,new _e(me.getMessage("SERVICE_REQUEST_BUILD")))};Er.prototype.analyzeResponse=function(i,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:i,onSuccess:e,scope:this};ub.build(t)}else i.call(this,new _e(me.getMessage("SERVICE_RESPONSE_EMPTY")))};Er.prototype.bbox2Json=function(i){return{type:"Polygon",coordinates:[[[i.left,i.top],[i.right,i.top],[i.right,i.bottom],[i.left,i.bottom],[i.left,i.top]]]}};Er.prototype.circle2Json=function(i){return{type:"Circle",radius:i.radius,coordinates:[i.x,i.y]}};Er.prototype.polygon2Json=function(i){for(var e={type:"Polygon",coordinates:[[]]},t=0;t<i.length;++t)e.coordinates[0].push([i[t].x,i[t].y]);return e};Er.geoEPSG=["EPSG:4326"];function ph(){if(!(this instanceof ph))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}ph.prototype={constructor:ph};function mh(){if(!(this instanceof mh))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}mh.prototype={constructor:mh};var yF={build:function(i){var e=Tt.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var t=null;if(i.response)if(i.rawResponse)e.trace("analyze response : raw"),t=i.response;else{var n=null;if(typeof i.response=="string"?n=JSON.parse(i.response):n=i.response,n){if(n.error){i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_EXCEPTION",n.error.description),status:n.error.code,type:_e.TYPE_SRVERR}));return}if(t=new ph,n.results&&Array.isArray(n.results))for(var r=null,s=0;s<n.results.length;s++){var o=n.results[s];r=new mh,o&&(o.country==="StreetAddress"?(r.street=o.street,r.type="StreetAddress"):o.country==="PositionOfInterest"&&(r.poi=o.street,r.type="PositionOfInterest",r.poiType=o.poiType),r.position&&(r.position.x=o.x,r.position.y=o.y),r.kind=o.kind,r.commune=o.city,r.fullText=o.fulltext,r.postalCode=o.zipcode,r.classification=o.classification),t.suggestedLocations.push(r)}else{i.onError.call(i.scope,new _e(me.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!t.suggestedLocations.length){i.onError.call(i.scope,new _e(me.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!t){i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:_e.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:_e.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new _e(me.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,t)}};function jo(i){if(!(this instanceof jo))throw new TypeError(me.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=Tt.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(i);if(e.serverUrl||(e.serverUrl=Li.AutoComplete.newUrl()),An.apply(this,arguments),!e.text)throw new Error(me.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gre pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}jo.prototype=Object.create(An.prototype,{});jo.prototype.constructor=jo;jo.prototype.patchOptionConvertor=function(i){const e=i;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};jo.prototype.buildRequest=function(i,e){var t="";this.options.territory&&(t=this.options.territory);var n="";this.options.type&&(n=this.options.type.join(",")),this.request=Os.normalyzeParameters({text:encodeURIComponent(this.options.text),type:n,terr:t,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):i.call(this,new _e(me.getMessage("SERVICE_REQUEST_BUILD")))};jo.prototype.analyzeResponse=function(i,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:i,scope:this};yF.build(t)}else i.call(this,new _e(me.getMessage("SERVICE_RESPONSE_EMPTY")))};function yc(i){if(!(this instanceof yc))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=Tt.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=i||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}yc.CLASSNAME="RouteParamREST";yc.prototype={constructor:yc,getIntermediates:function(){var i=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var t=this.intermediates[e];i.push(t.x+","+t.y)}return i.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var i=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)i.push(JSON.stringify(this.constraints[e]));return i.join("|")}};yc.prototype.getParams=function(){var i=[];return i.push({k:"resource",v:this.resource}),i.push({k:"start",v:this.start}),i.push({k:"end",v:this.end}),i.push({k:"geometryFormat",v:"geojson"}),this.optimization&&i.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&i.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&i.push({k:"profile",v:this.getProfile()}),this.constraints&&i.push({k:"constraints",v:this.getConstraints()}),this.crs&&i.push({k:"crs",v:this.crs}),this.distanceUnit&&i.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&i.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&i.push({k:"waysAttributes",v:this.getWaysAttributes()}),i};function tg(i){if(this.logger=Tt.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof tg))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!i)throw new Error(me.getMessage("PARAM_EMPTY","options"));this.settings=i}tg.prototype={requestString:null,constructor:tg,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var i=new yc(this.settings),e=i.getParams(),t="",n=0;n<e.length;n++){var r=e[n];t&&(t+="&"),t+=r.k+"="+r.v}return this.logger.trace(t),this.requestString=t,this.requestString}};var AF={build:function(i){var e=Tt.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var t=null,n=i||{},r=i.onError!==null&&typeof i.onError=="function",s=null,o=new tg(n);if(!o.processRequestString()){if(s="Error process request (rest) !",r){i.onError.call(i.scope,new _e(s));return}throw new Error(s)}return t=o.requestString,t}};function vh(){if(!(this instanceof vh))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}vh.prototype={constructor:vh};function yh(){if(!(this instanceof yh))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}yh.prototype={constructor:yh};var _F={build:function(i){var e=Tt.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var t=null;if(i.response)if(i.rawResponse)e.trace("analyze response : raw"),t=i.response;else{e.trace("analyze response : json");var n;if(typeof i.response=="string"?n=JSON.parse(i.response):n=i.response,n){if(n.message){i.onError.call(i.scope,new _e(me.getMessage("SERVICE_RESPONSE_EXCEPTION",n.message)));return}var r=[],s=[],o=[];if(t=new vh,t.hasOwnProperty("totalTime")&&(t.totalTime=parseFloat(n.duration)),t.hasOwnProperty("totalDistance")&&(t.totalDistance=parseFloat(n.distance)),t.hasOwnProperty("bbox")&&(t.bbox.left=parseFloat(n.bbox[0]),t.bbox.bottom=parseFloat(n.bbox[1]),t.bbox.right=parseFloat(n.bbox[2]),t.bbox.top=parseFloat(n.bbox[3])),t.hasOwnProperty("routeGeometry")&&!i.geometryInInstructions&&(t.routeGeometry=n.geometry),t.hasOwnProperty("routeInstructions")&&i.geometryInInstructions){var a=n.portions,l;if(Array.isArray(a)&&a.length)for(l=0;l<a.length;l++)r.push(a[l]);if(r.length)for(l=0;l<r.length;l++)s.push(r[l].steps);if(s.length)for(l=0;l<s.length;l++)o=o.concat(s[l]);o.forEach(function(c){switch(t.routeInstructions.push(new yh),t.routeInstructions[t.routeInstructions.length-1].duration=c.duration,t.routeInstructions[t.routeInstructions.length-1].distance=c.distance,t.routeInstructions[t.routeInstructions.length-1].code="",t.routeInstructions[t.routeInstructions.length-1].instruction="",t.routeInstructions[t.routeInstructions.length-1].geometry=c.geometry,c.name==="Valeur non renseigne"&&(c.name=""),c.instruction.type){case"turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Tourner";break;case"new name":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":t.routeInstructions[t.routeInstructions.length-1].instruction+="Dpart";break;case"arrive":t.routeInstructions[t.routeInstructions.length-1].instruction+="Arrive";break;case"merge":t.routeInstructions[t.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":t.routeInstructions[t.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":t.routeInstructions[t.routeInstructions.length-1].instruction+=" la fin de la route, prendre";break;case"use lane":t.routeInstructions[t.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":t.routeInstructions[t.routeInstructions.length-1].instruction+="";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+="?"+c.instruction.type+"?";break}if(c.instruction.modifier)switch(c.instruction.modifier){case"uturn":t.routeInstructions[t.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" compltement  droite";break;case"right":t.routeInstructions[t.routeInstructions.length-1].instruction+="  droite";break;case"slight right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" lgrement  droite";break;case"straight":t.routeInstructions[t.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" lgrement  gauche";break;case"left":t.routeInstructions[t.routeInstructions.length-1].instruction+="  gauche";break;case"sharp left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" compltement  gauche";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+=" ?"+c.instruction.modifier+"?";break}c.instruction.exit&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=`${c.instruction.exit}e sortie`),c.attributes.name&&((c.attributes.name.nom_1_droite||c.attributes.name.toponyme)&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=" sur"),c.attributes.name.nom_1_droite&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${c.attributes.name.nom_1_droite}`),c.attributes.name.toponyme&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${c.attributes.name.toponyme}`))})}}if(!t){i.onError.call(i.scope,new _e(me.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(t.exceptionReport){i.onError.call(i.scope,new _e(me.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{i.onError.call(i.scope,new _e(me.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,t)}};function za(i){if(!(this instanceof za))throw new TypeError(me.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",An.apply(this,arguments),this.logger=Tt.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!i.startPoint)throw new Error(me.getMessage("PARAM_MISSING","startPoint"));if(i.startPoint.x===null)throw new Error(me.getMessage("PARAM_MISSING","startPoint.x"));if(i.startPoint.y===null)throw new Error(me.getMessage("PARAM_MISSING","startPoint.y"));if(!i.endPoint)throw new Error(me.getMessage("PARAM_MISSING","endPoint"));if(i.endPoint.x===null)throw new Error(me.getMessage("PARAM_MISSING","endPoint.x"));if(i.endPoint.y===null)throw new Error(me.getMessage("PARAM_MISSING","endPoint.y"));if(i.outputFormat&&i.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=i.resource||"bdtopo-osrm",this.options.startPoint=i.startPoint,this.options.endPoint=i.endPoint,this.options.viaPoints=i.viaPoints||[],this.options.routePreference=i.routePreference||"fastest",i.graph?(i.graph==="Voiture"&&(this.options.graph="car"),i.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],i.constraints)if(Array.isArray(i.constraints))for(var e=0;e<i.constraints.length;e++)this.options.constraints.push(i.constraints[e]);else throw new Error(me.getMessage("PARAM_TYPE","constraints"));var t={},n={},r={};if(i.exclusions&&i.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var s=0;s<i.exclusions.length;s++){if(typeof i.exclusions[s]=="string")i.exclusions[s]=i.exclusions[s].toLowerCase();else continue;i.exclusions[s]==="toll"&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="autoroute",this.options.constraints.push(r)),i.exclusions[s]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),i.exclusions[s]==="bridge"&&(n.constraintType="banned",n.key="wayType",n.operator="=",n.value="pont",this.options.constraints.push(n))}}if(this.options.geometryInInstructions=i.geometryInInstructions||!1,this.options.provideBbox=i.provideBbox||!0,this.options.distanceUnit=i.distanceUnit||"m",this.options.timeUnit=i.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=i.srs||"EPSG:4326",this.options.waysAttributes=i.waysAttributes||[],!this.options.serverUrl){var o=Li.Route.newUrl();if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}za.prototype=Object.create(An.prototype,{});za.prototype.constructor=za;za.prototype.buildRequest=function(i,e){var t={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=AF.build(t),this.request?e.call(this,this.request):i.call(this,new _e(me.getMessage("SERVICE_REQUEST_BUILD")))};za.prototype.analyzeResponse=function(i,e){if(this.response){var t={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:i,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};_F.build(t)}else i.call(this,new _e(me.getMessage("SERVICE_RESPONSE_EMPTY")))};function Ac(i){if(!(this instanceof Ac))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=Tt.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=i||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance):(this.costType="time",this.costValue=this.options.time)}Ac.CLASSNAME="ProcessIsoCurveParam";Ac.prototype={constructor:Ac,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var i=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)i.push(JSON.stringify(this.constraints[e]));return i.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};Ac.prototype.getParams=function(){var i=[];return i.push({k:"resource",v:this.resource}),i.push({k:"point",v:this.getLocation()}),i.push({k:"direction",v:this.getDirection()}),i.push({k:"costType",v:this.costType}),i.push({k:"costValue",v:this.costValue}),i.push({k:"profile",v:this.profile}),i.push({k:"timeUnit",v:this.timeUnit}),i.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&i.push({k:"crs",v:this.crs}),this.constraints&&i.push({k:"constraints",v:this.getConstraints()}),i};function ig(i){if(this.logger=Tt.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ig))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!i)throw new Error(me.getMessage("PARAM_EMPTY","options"));this.settings=i,this.mode=this.settings.httpMethod||"GET"}ig.prototype={requestString:null,constructor:ig,processRequestString:function(){var i="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var t=new Ac(this.settings),n=t.getParams();for(e=0;e<n.length;e++){var r=n[e];i&&(i+="&"),i+=r.k+"="+r.v}break;case"POST":this.logger.trace("Process POST Request");var s={};s.resource=this.settings.resource,s.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(s.costType="distance",s.costValue=this.settings.distance):(s.costType="time",s.costValue=this.settings.time),s.profile=this.settings.graph,this.settings.reverse?s.direction="arrival":s.direction="departure",s.constraints=this.settings.constraints,s.distanceUnit=this.settings.distanceUnit,s.timeUnit=this.settings.timeUnit,s.crs=this.settings.srs,i=JSON.stringify(s);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(i),this.requestString=i,this.requestString}};function Ah(){if(!(this instanceof Ah))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}Ah.prototype={constructor:Ah};var CF={build:function(i){var e=Tt.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var t=null;if(i.response)if(i.rawResponse)e.trace("analyze response : raw"),t=i.response;else{e.trace("analyze response : json");var n;if(typeof i.response=="string"?n=JSON.parse(i.response):n=i.response,t=new Ah,n){n.costType==="distance"?(t.time="",t.distance=n.costValue):(t.time=n.costValue,t.distance=""),t.message="",t.id="",t.srs=n.crs,t.geometry=n.geometry;var r=n.point.split(",");t.location&&(t.location.x=r[0],t.location.y=r[1])}else{i.onError.call(i.scope,new _e(me.getMessage("SERVICE_RESPONSE_ANALYSE",i.response)));return}if(t.exceptionReport){i.onError.call(i.scope,new _e({message:me.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:_e.TYPE_SRVERR,status:200}));return}}else{i.onError.call(i.scope,new _e(me.getMessage("SERVICE_RESPONSE_EMPTY")));return}i.onSuccess.call(i.scope,t)}};function Va(i){if(!(this instanceof Va))throw new TypeError(me.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",An.apply(this,arguments),this.logger=Tt.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!i.position)throw new Error(me.getMessage("PARAM_MISSING","position"));if(i.position.x===null)throw new Error(me.getMessage("PARAM_MISSING","position.x"));if(i.position.y===null)throw new Error(me.getMessage("PARAM_MISSING","position.y"));if(!i.time&&!i.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!i.time&&i.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),i.time&&!i.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=i.resource||"bdtopo-valhalla",this.options.exclusions=i.exclusions||[],this.options.reverse=i.reverse||!1,this.options.srs=i.srs||"EPSG:4326",this.options.distanceUnit=i.distanceUnit||"m",this.options.timeUnit=i.timeUnit||"second",i.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,i.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,i.graph?(i.graph==="Voiture"&&(this.options.graph="car"),i.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],i.constraints)if(Array.isArray(i.constraints))for(var e=0;e<i.constraints.length;e++)this.options.constraints.push(i.constraints[e]);else throw new Error(me.getMessage("PARAM_TYPE","constraints"));var t={},n={},r={};if(i.exclusions&&i.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var s=0;s<i.exclusions.length;s++){if(typeof i.exclusions[s]=="string")i.exclusions[s]=i.exclusions[s].toLowerCase();else continue;i.exclusions[s]==="toll"&&(r.constraintType="banned",r.key="wayType",r.operator="=",r.value="autoroute",this.options.constraints.push(r)),i.exclusions[s]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),i.exclusions[s]==="bridge"&&(n.constraintType="banned",n.key="wayType",n.operator="=",n.value="pont",this.options.constraints.push(n))}}if(this.options.outputFormat=typeof i.outputFormat=="string"?i.outputFormat.toLowerCase():"json",i.outputFormat&&i.outputFormat!=="json")throw new Error(me.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var o=Li.ProcessIsoCurve.newUrl();if(!o)throw new Error("Url by default not found !");this.options.serverUrl=o,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Va.prototype=Object.create(An.prototype,{});Va.prototype.constructor=Va;Va.prototype.buildRequest=function(i,e){try{var t=new ig(this.options);if(!t.processRequestString())throw new Error(me.getMessage("SERVICE_REQUEST_BUILD"));this.request=t.requestString}catch(n){i.call(this,new _e(n.message));return}e.call(this,this.request)};Va.prototype.analyzeResponse=function(i,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:i,scope:this};CF.build(t)}else i.call(this,new _e(me.getMessage("SERVICE_RESPONSE_EMPTY")))};var IF={getConfig:function(i){var e=new js(i);e.call()},getAltitude:function(i){var e=new ja(i);e.call()},geocode:function(i){var e=new Bo(i);e.call()},reverseGeocode:function(i){var e=new Er(i);e.call()},autoComplete:function(i){var e=new jo(i);e.call()},route:function(i){var e=new za(i);e.call()},isoCurve:function(i){var e=new Va(i);e.call()}};const EF=Sy.version,wF=Sy.date;var yt={};yt.servicesVersion=EF;yt.servicesDate=wF;yt.Protocols={};yt.Protocols.XHR=ab;yt.Services=IF;yt.Services.DefaultUrl=Li;yt.Services.AltiResponse=mc;yt.Services.Alti={};yt.Services.Alti.Elevation=Ba;yt.Services.AutoCompleteResponse=ph;yt.Services.AutoComplete={};yt.Services.AutoComplete.SuggestedLocation=mh;yt.Services.Config=js;yt.Services.IsoCurveResponse=Ah;yt.Services.RouteResponse=vh;yt.Services.Route={};yt.Services.Route.RouteInstruction=yh;yt.Error=_e;yt.Helper=Os;var ot={getLogger:function(i){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?fo.enableAll():fo.disableAll();var t=i||"default";return fo.getLogger(t)},disableAll:function(){var i=fo.getLoggers();for(const e in i)Object.hasOwnProperty.call(i,e)&&i[e].disableAll()},enableAll:function(){var i=fo.getLoggers();for(const e in i)Object.hasOwnProperty.call(i,e)&&i[e].enableAll()}},Sm={proxifyUrl:function(i,e){var t=ot.getLogger("proxifyUrl");if(!e||!e.hasOwnProperty("proxyUrl")||e.proxyUrl===null||e.proxyUrl.trim().length===0)return i;if(e.noProxyDomains&&Array.isArray(e.noProxyDomains)&&e.noProxyDomains.length>0){for(var n in e.noProxyDomains)if(t.trace("[ProxyUtils] proxifyUrl : analyzing "+e.noProxyDomains[n]),i.indexOf(e.noProxyDomains[n])!==-1)return t.info("[ProxyUtils] proxifyUrl : "+i+" found in noProxyDomains list ("+e.noProxyDomains[n]+")."),i}return e.proxyUrl+encodeURIComponent(i)}},cl=ot.getLogger("GfiUtils"),Gu={getLayerFormat:function(i){var e=typeof i.getType=="function"?i.getType():null,t=i.getSource();if(e){if(e==="VECTOR"||e==="VECTOR_TILE")return"vector";if(e==="TILE")return t.tileGrid?"wmts":"wms";if(e==="IMAGE")return"wms"}else{if(t instanceof py||t instanceof fk)return"wms";if(t instanceof my)return"wmts";if(t instanceof gn||t instanceof Hl)return"vector"}return"unknown"},displayInfo:function(i,e,t,n,r){if(cl.trace("[Gfi] : displayInfo..."),n||(n="text/html"),t!==null){var s=null,o=null,a=t;a=a.replace(/\n/g,""),a=a.replace(/(>)\s*(<)/g,"$1$2");var l=typeof window<"u"?window:null;if(typeof kA=="object"&&window===null){var c=require("xmldom").DOMParser;o=new c,s=o.parseFromString(a,n)}else if(l.DOMParser)o=new l.DOMParser,s=o.parseFromString(a,n);else if(l.ActiveXObject)s=new l.ActiveXObject("Microsoft.XMLDOM"),s.async=!1,s.loadXML(a);else return cl.log("Incompatible environment for DOM Parser !"),!1;var u=s.getElementsByTagName("body");if(u&&u.length===1&&!u[0].hasChildNodes())return!1;var h=document.createElement("div");h.className="gp-feature-info-div";var d=document.createElement("input");d.type="button",d.className="gp-styling-button closer",d.onclick=function(){return i.featuresOverlay&&(i.removeOverlay(i.featuresOverlay),i.featuresOverlay=null),!1};var f=document.createElement("div");return f.className="gp-features-content-div",f.innerHTML=t,h.appendChild(f),h.appendChild(d),i.featuresOverlay&&(i.removeOverlay(i.featuresOverlay),i.featuresOverlay=null),i.featuresOverlay=new jn({element:h,autoPan:r.autoPan,autoPanAnimation:r.autoPanAnimation,autoPanMargin:r.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),i.addOverlay(i.featuresOverlay),i.featuresOverlay.setPosition(e),i.featuresOverlay.render(),!0}},features2html:function(i,e){var t=document.createElement("div");return e.forEach(function(n){var r=n.getProperties();if(r.hasOwnProperty("render"))t.insertAdjacentHTML("beforeend",r.render);else{if(r.hasOwnProperty("name")){var s=document.createElement("div");s.className="gp-att-name-div",s.insertAdjacentHTML("afterbegin",r.name),t.appendChild(s)}if(r.hasOwnProperty("description")){var o=document.createElement("div");o.className="gp-att-description-div",o.insertAdjacentHTML("afterbegin",r.description),t.appendChild(o)}var a=null,l=!1,c=null,u=null,h=null,d=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(a in r)if(r[a]!==void 0&&d.indexOf(a)===-1){l||(c=document.createElement("div"),c.className="gp-att-others-div",u=document.createElement("ul"),l=!0),h=document.createElement("li");var f=document.createElement("span");f.className="gp-attname-others-span",f.appendChild(document.createTextNode(a+" : ")),h.appendChild(f),h.appendChild(document.createTextNode(r[a])),u.appendChild(h)}u&&(c.appendChild(u),t.appendChild(c))}},i),t.hasChildNodes()||(t=null),t},layerGetFeatureAtCoordinates:function(i,e,t){var n=i.getPixelFromCoordinate(t);return i.hasFeatureAtPixel(n,function(r){return r===e})},displayVectorFeatureInfo:function(i,e,t,n){var r=i.getPixelFromCoordinate(e),s=[];if(i.forEachFeatureAtPixel(r,function(a,l){(!t||t.indexOf(l)>-1)&&s.push(a)}),s.length===0)return!1;var o=this.features2html(i,s);return o===null?!1:(this.displayInfo(i,e,o.innerHTML,"text/html",n),!0)},displayFeatureInfo:function(i,e,t,n,r){for(var s={},o=0;o<t.length;o++){var a=t[o],l=a.obj.getZIndex();s[l]||(s[l]=[]),s[l].push(a)}var c=[],u=Object.keys(s);u.sort(function(b,S){return S-b});for(var h=0;h<u.length;h++)for(var d=u[h],f=0;f<s[d].length;++f){var g=s[d][f].obj,p=s[d][f].infoFormat||"text/html",m=!0;if(g.minResolution&&g.minResolution>i.getResolution()&&(m=!1),m&&g.maxResolution&&g.maxResolution<i.getResolution()&&(m=!1),g.getVisible()&&m){var v=this.getLayerFormat(g);if(v==="vector"){this.layerGetFeatureAtCoordinates(i,g,e)&&c.push({format:v,scope:this,coordinate:e});continue}else if(v!=="wms"&&v!=="wmts"){cl.log("[ERROR] DisplayFeatureInfo - layer format '"+v+"' not allowed");continue}var y=i.getView().getResolution(),A=null;v==="wmts"?A=g.getSource().getFeatureInfoUrl.call(g.getSource(),e,y,i.getView().getProjection(),{INFOFORMAT:p}):A=g.getSource().getFeatureInfoUrl.call(g.getSource(),e,y,i.getView().getProjection(),{INFO_FORMAT:p}),c.push({format:p,url:Sm.proxifyUrl(A,n),scope:this,coordinate:e})}}var _=null;function C(b,S,R){if(b.length===0)return;var P=0;function w(x){P++,x||P===b.length?R():S(b[P],w)}S(b[0],w)}var I=this;C(c,function(b,S){if(b.format==="vector"){if(!_){_=[];for(var R=0;R<u.length;R++)for(var P=u[R],w=0;w<s[P].length;++w)_.push(s[P][w].obj)}S(b.scope.displayVectorFeatureInfo(i,b.coordinate,_,r))}else yt.Protocols.XHR.call({url:b.url,method:"GET",scope:b.scope,onResponse:function(x){var D=!1;(x.trim().length===0||x.indexOf("ServiceExceptionReport")!==-1||x.indexOf("java.lang.NullPointerException")!==-1||x.indexOf("java.lang.OutOfMemoryError")!==-1||x.indexOf("not queryable")!==-1)&&(D=!0);var k=!D&&I.displayInfo(i,b.coordinate,x,"text/html",r);S(k)},onFailure:function(x){cl.log(x),S(!1)}})},function(){cl.trace("Finish sync to GFI !")})},getPosition:function(i,e){if(i.coordinate)return i.coordinate;var t=[0,0];if(i.offsetX||i.offsetY)t[0]=i.offsetX,t[1]=i.offsetY;else if(i.pointerType==="touch"){var n=i.pointers[0];t[0]=n.pageX,t[1]=n.pageY}var r=e.getCoordinateFromPixel(t);return r},onDisplayFeatureInfo:function(i,e){if(e.isActive()){cl.trace(i);var t=e.getMap();if(i.type==="contextmenu"||i.type==="dblclick")i.preventDefault();else if(i.type==="singleclick"){for(var n=t.getInteractions().getArray(),r=0;r<n.length;r++)if(n[r].getActive()&&(n[r]instanceof Tr||n[r]instanceof Ey||n[r]instanceof yr))return}var s={};e._proxyUrl&&(s.proxyUrl=e._proxyUrl),e._noProxyDomains&&(s.noProxyDomains=e._noProxyDomains);var o={};e._autoPan&&(o.autoPan=e._autoPan),e._autoPanAnimation&&(o.autoPanAnimation=e._autoPanAnimation),e._autoPanMargin&&(o.autoPanMargin=e._autoPanMargin);for(var a=[],l=0;l<e._layers.length;++l){var c=e._layers[l].event?e._layers[l].event:e._defaultEvent;if(c===i.type){var u=a.push(e._layers[l])-1;a[u].infoFormat||(a[u].infoFormat=e._defaultInfoFormat)}}var h=this.getPosition(i,t);this.displayFeatureInfo(t,h,a,s,o)}}};window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=Gu:window.ol.gp={GfiUtils:Gu});var He={detectSupport:function(){var i=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(i=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(i=!0),i},assign:function(i,e){i=i||{};for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i},mergeParams:function(i,e,t){if(!(!i||!e)){typeof t>"u"&&(t=!0);for(var n in e)e.hasOwnProperty(n)&&(typeof e[n]=="object"?i.hasOwnProperty(n)?this.mergeParams(i[n],e[n],t):i[n]=e[n]:i.hasOwnProperty(n)?t&&(i[n]=e[n]):i[n]=e[n])}}},bF=ot.getLogger("interactions"),ds={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(i,e){bF.trace("unset()");var t={};He.mergeParams(t,this._options),He.mergeParams(t,e);for(var n=i.getInteractions().getArray(),r=0;r<n.length;r++)if(n[r].getActive()&&(n[r]instanceof yr||n[r]instanceof Tr||n[r]instanceof Ey)){var s=n[r].getProperties(),o=s.name;if(typeof o<"u"&&this._extensions.indexOf(o)>-1){if(t.current&&t.current===o)continue;n[r].setActive(!1);var a=s.source;if(typeof a<"u"&&a instanceof qs){for(var l in t)if(t.hasOwnProperty(l)){if(l==="current")continue;if(typeof a[l]=="function"){var c=Array.isArray(t[l])?t[l]:[t[l]];a[l].apply(a,c)}}}}else n[r].setActive(!1)}}},jt={lightOrange:"data:image/png;base64,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IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,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czpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,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293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,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/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};class xy{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Ht,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let n=t.dataProjection?Re(t.dataProjection):this.readProjection(e);t.extent&&n&&n.getUnits()==="tile-pixels"&&(n=Re(n),n.setWorldExtent(t.extent)),t={dataProjection:n,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return We()}readFeature(e,t){return We()}readFeatures(e,t){return We()}readGeometry(e,t){return We()}readProjection(e){return We()}writeFeature(e,t){return We()}writeFeatures(e,t){return We()}writeGeometry(e,t){return We()}}function br(i,e,t){const n=t?Re(t.featureProjection):null,r=t?Re(t.dataProjection):null;let s=i;if(n&&r&&!$r(n,r)){e&&(s=i.clone());const o=e?n:r,a=e?r:n;o.getUnits()==="tile-pixels"?s.transform(o,a):s.applyTransform(Da(o,a))}if(e&&t&&t.decimals!==void 0){const o=Math.pow(10,t.decimals),a=function(l){for(let c=0,u=l.length;c<u;++c)l[c]=Math.round(l[c]*o)/o;return l};s===i&&(s=i.clone()),s.applyTransform(a)}return s}const SF={Point:Ki,LineString:Ji,Polygon:wi,MultiPoint:Us,MultiLineString:hr,MultiPolygon:jr};function xF(i,e,t){return Array.isArray(e[0])?(lw(i,0,e,t)||(i=i.slice(),dm(i,0,e,t)),i):(sy(i,0,e,t)||(i=i.slice(),Pf(i,0,e,t)),i)}function hb(i,e){var s;const t=i.geometry;if(!t)return[];if(Array.isArray(t))return t.map(o=>hb({...i,geometry:o})).flat();const n=t.type==="MultiPolygon"?"Polygon":t.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const r=t.layout.length;return br(new qi(n,n==="Polygon"?xF(t.flatCoordinates,t.ends,r):t.flatCoordinates,(s=t.ends)==null?void 0:s.flat(),r,i.properties||{},i.id).enableSimplifyTransformed(),!1,e)}function Py(i,e){if(!i)return null;if(Array.isArray(i)){const n=i.map(r=>Py(r,e));return new Gs(n)}const t=SF[i.type];return br(new t(i.flatCoordinates,i.layout,i.ends),!1,e)}const ng="http://www.w3.org/2001/XMLSchema-instance";function $a(i,e){return Uc().createElementNS(i,e)}function Vr(i,e){return db(i,e,[]).join("")}function db(i,e,t){if(i.nodeType==Node.CDATA_SECTION_NODE||i.nodeType==Node.TEXT_NODE)e?t.push(String(i.nodeValue).replace(/(\r\n|\r|\n)/g,"")):t.push(i.nodeValue);else{let n;for(n=i.firstChild;n;n=n.nextSibling)db(n,e,t)}return t}function xs(i){return"documentElement"in i}function Ps(i){return new DOMParser().parseFromString(i,"application/xml")}function VC(i,e){return function(t,n){const r=i.call(e!==void 0?e:this,t,n);if(r!==void 0){const s=n[n.length-1];bt(s,r)}}}function un(i,e){return function(t,n){const r=i.call(e!==void 0?e:this,t,n);r!==void 0&&n[n.length-1].push(r)}}function My(i,e){return function(t,n){const r=i.call(e!==void 0?e:this,t,n);r!==void 0&&(n[n.length-1]=r)}}function Yt(i,e,t){return function(n,r){const s=i.call(t!==void 0?t:this,n,r);if(s!==void 0){const o=r[r.length-1],a=e!==void 0?e:n.localName;let l;a in o?l=o[a]:(l=[],o[a]=l),l.push(s)}}}function L(i,e,t){return function(n,r){const s=i.call(t!==void 0?t:this,n,r);if(s!==void 0){const o=r[r.length-1],a=e!==void 0?e:n.localName;o[a]=s}}}function ce(i,e){return function(t,n,r){i.call(e!==void 0?e:this,t,n,r),r[r.length-1].node.appendChild(t)}}function fb(i,e){let t,n;return function(r,s,o){if(t===void 0){t={};const a={};a[r.localName]=i,t[r.namespaceURI]=a,n=Wr(r.localName)}gb(t,n,s,o)}}function Wr(i,e){return function(t,n,r){const o=n[n.length-1].node;let a=i;a===void 0&&(a=r);const l=e!==void 0?e:o.namespaceURI;return $a(l,a)}}const mn=Wr();function Hn(i,e){const t=e.length,n=new Array(t);for(let r=0;r<t;++r)n[r]=i[e[r]];return n}function J(i,e,t){t=t!==void 0?t:{};let n,r;for(n=0,r=i.length;n<r;++n)t[i[n]]=e;return t}function Xo(i,e,t,n){let r;for(r=e.firstElementChild;r;r=r.nextElementSibling){const s=i[r.namespaceURI];if(s!==void 0){const o=s[r.localName];o!==void 0&&o.call(n,r,t)}}}function ve(i,e,t,n,r){return n.push(i),Xo(e,t,n,r),n.pop()}function gb(i,e,t,n,r,s){const o=(r!==void 0?r:t).length;let a,l;for(let c=0;c<o;++c)a=t[c],a!==void 0&&(l=e.call(s!==void 0?s:this,a,n,r!==void 0?r[c]:void 0),l!==void 0&&i[l.namespaceURI][l.localName].call(s,l,a,n))}function Vt(i,e,t,n,r,s,o){return r.push(i),gb(e,t,n,r,s,o),r.pop()}let sp;function PF(){return sp===void 0&&typeof XMLSerializer<"u"&&(sp=new XMLSerializer),sp}let op;function Uc(){return op===void 0&&typeof document<"u"&&(op=document.implementation.createDocument("","",null)),op}class pb extends xy{constructor(){super(),this.xmlSerializer_=PF()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const n=Ps(e);return this.readFeatureFromDocument(n,t)}return xs(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const n=this.readFeaturesFromDocument(e,t);return n.length>0?n[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const n=Ps(e);return this.readFeaturesFromDocument(n,t)}return xs(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const n=[];for(let r=e.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&bt(n,this.readFeaturesFromNode(r,t));return n}readFeaturesFromNode(e,t){return We()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const n=Ps(e);return this.readGeometryFromDocument(n,t)}return xs(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=Ps(e);return this.readProjectionFromDocument(t)}return xs(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const n=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const n=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const n=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(e,t){return null}}function zo(i){const e=Vr(i,!1);return Pa(e)}function Pa(i){const e=/^\s*(true|1)|(false|0)\s*$/.exec(i);if(e)return e[1]!==void 0||!1}function Ry(i){const e=Vr(i,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function lt(i){const e=Vr(i,!1);return ws(e)}function ws(i){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(i);if(e)return parseFloat(e[1])}function xn(i){const e=Vr(i,!1);return rg(e)}function rg(i){const e=/^\s*(\d+)\s*$/.exec(i);if(e)return parseInt(e[1],10)}function ae(i){return Vr(i,!1).trim()}function _c(i,e){Dt(i,e?"1":"0")}function MF(i,e){i.appendChild(Uc().createCDATASection(e))}function RF(i,e){const t=new Date(e*1e3),n=t.getUTCFullYear()+"-"+Jc(t.getUTCMonth()+1,2)+"-"+Jc(t.getUTCDate(),2)+"T"+Jc(t.getUTCHours(),2)+":"+Jc(t.getUTCMinutes(),2)+":"+Jc(t.getUTCSeconds(),2)+"Z";i.appendChild(Uc().createTextNode(n))}function Nn(i,e){const t=e.toPrecision();i.appendChild(Uc().createTextNode(t))}function sg(i,e){const t=e.toString();i.appendChild(Uc().createTextNode(t))}function Dt(i,e){i.appendChild(Uc().createTextNode(e))}const Xs=["http://www.google.com/kml/ext/2.2"],xe=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],TF="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",WC={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},LF=J(xe,{ExtendedData:Rb,Region:Tb,MultiGeometry:L(xb,"geometry"),LineString:L(bb,"geometry"),LinearRing:L(Sb,"geometry"),Point:L(Pb,"geometry"),Polygon:L(Mb,"geometry"),Style:L(Gy),StyleMap:pN,address:L(ae),description:L(ae),name:L(ae),open:L(zo),phoneNumber:L(ae),styleUrl:L(_b),visibility:L(zo)},J(Xs,{MultiTrack:L(iN,"geometry"),Track:L(wb,"geometry")})),GF=J(xe,{ExtendedData:Rb,Region:Tb,Link:xN,address:L(ae),description:L(ae),name:L(ae),open:L(zo),phoneNumber:L(ae),visibility:L(zo)}),OF=J(xe,{href:L(Ab)}),DF=J(xe,{Altitude:L(lt),Longitude:L(lt),Latitude:L(lt),Tilt:L(lt),AltitudeMode:L(ae),Heading:L(lt),Roll:L(lt)}),mb=J(xe,{LatLonAltBox:_N,Lod:IN}),kF=J(xe,["Document","Placemark"]),FF=J(xe,{Document:ce(DN),Placemark:ce(Ob)});let Xl,Kd=null,xm,Ou,Du,ku,og,Pm=null,Ty,Mm=null,Rm,Ia=null,YC=null,Tm=null;function ag(i){return 32/Math.min(i[0],i[1])}function NF(){Xl=[255,255,255,1],Kd=new $e({color:Xl}),xm=[20,2],Ou="pixels",Du="pixels",ku=[64,64],og="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",Pm=new Qt({anchor:xm,anchorOrigin:"bottom-left",anchorXUnits:Ou,anchorYUnits:Du,crossOrigin:"anonymous",rotation:0,scale:ag(ku),size:ku,src:og}),Ty="NO_IMAGE",Mm=new je({color:Xl,width:1}),Rm=new je({color:[51,51,51,1],width:2}),Ia=new Nr({font:"bold 16px Helvetica",fill:Kd,stroke:Rm,scale:.8}),YC=new Ee({fill:Kd,image:Pm,text:Ia,stroke:Mm,zIndex:0}),Tm=[YC]}let wd;function UF(i){return i}let BF=class extends pb{constructor(e){super(),e=e||{},Tm||NF(),this.dataProjection=Re("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:Tm,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:UF,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const n=J(xe,{Document:VC(this.readDocumentOrFolder_,this),Folder:VC(this.readDocumentOrFolder_,this),Placemark:un(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),r=ve([],n,e,t,this);if(r)return r}readPlacemark_(e,t){const n=ve({geometry:null},LF,e,t,this);if(!n)return;const r=new Ht,s=e.getAttribute("id");s!==null&&r.setId(s);const o=t[0],a=n.geometry;if(a&&br(a,!1,o),r.setGeometry(a),delete n.geometry,this.extractStyles_){const l=n.Style,c=n.styleUrl,u=zF(l,c,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);r.setStyle(u)}return delete n.Style,r.setProperties(n,!0),r}readSharedStyle_(e,t){const n=e.getAttribute("id");if(n!==null){const r=Gy.call(this,e,t);if(r){let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+n,o).href:s="#"+n,this.sharedStyles_[s]=r}}}readSharedStyleMap_(e,t){const n=e.getAttribute("id");if(n===null)return;const r=Ib.call(this,e,t);if(!r)return;let s,o=e.baseURI;(!o||o=="about:blank")&&(o=window.location.href),o?s=new URL("#"+n,o).href:s="#"+n,this.sharedStyles_[s]=r}readFeatureFromNode(e,t){if(!xe.includes(e.namespaceURI))return null;const n=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return n||null}readFeaturesFromNode(e,t){if(!xe.includes(e.namespaceURI))return[];let n;const r=e.localName;if(r=="Document"||r=="Folder")return n=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),n||[];if(r=="Placemark"){const s=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return s?[s]:[]}if(r=="kml"){n=[];for(let s=e.firstElementChild;s;s=s.nextElementSibling){const o=this.readFeaturesFromNode(s,t);o&&bt(n,o)}return n}return[]}readName(e){if(e){if(typeof e=="string"){const t=Ps(e);return this.readNameFromDocument(t)}return xs(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const n=this.readNameFromNode(t);if(n)return n}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(xe.includes(t.namespaceURI)&&t.localName=="name")return ae(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const n=t.localName;if(xe.includes(t.namespaceURI)&&(n=="Document"||n=="Folder"||n=="Placemark"||n=="kml")){const r=this.readNameFromNode(t);if(r)return r}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const n=Ps(e);bt(t,this.readNetworkLinksFromDocument(n))}else xs(e)?bt(t,this.readNetworkLinksFromDocument(e)):bt(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&bt(t,this.readNetworkLinksFromNode(n));return t}readNetworkLinksFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(xe.includes(n.namespaceURI)&&n.localName=="NetworkLink"){const r=ve({},GF,n,[]);t.push(r)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;xe.includes(n.namespaceURI)&&(r=="Document"||r=="Folder"||r=="kml")&&bt(t,this.readNetworkLinksFromNode(n))}return t}readRegion(e){const t=[];if(typeof e=="string"){const n=Ps(e);bt(t,this.readRegionFromDocument(n))}else xs(e)?bt(t,this.readRegionFromDocument(e)):bt(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&bt(t,this.readRegionFromNode(n));return t}readRegionFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(xe.includes(n.namespaceURI)&&n.localName=="Region"){const r=ve({},mb,n,[]);t.push(r)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;xe.includes(n.namespaceURI)&&(r=="Document"||r=="Folder"||r=="kml")&&bt(t,this.readRegionFromNode(n))}return t}readCamera(e){const t=[];if(typeof e=="string"){const n=Ps(e);bt(t,this.readCameraFromDocument(n))}else xs(e)?bt(t,this.readCameraFromDocument(e)):bt(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let n=e.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&bt(t,this.readCameraFromNode(n));return t}readCameraFromNode(e){const t=[];for(let n=e.firstElementChild;n;n=n.nextElementSibling)if(xe.includes(n.namespaceURI)&&n.localName==="Camera"){const r=ve({},DF,n,[]);t.push(r)}for(let n=e.firstElementChild;n;n=n.nextElementSibling){const r=n.localName;xe.includes(n.namespaceURI)&&(r==="Document"||r==="Folder"||r==="Placemark"||r==="kml")&&bt(t,this.readCameraFromNode(n))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const n=$a(xe[4],"kml"),r="http://www.w3.org/2000/xmlns/";n.setAttributeNS(r,"xmlns:gx",Xs[0]),n.setAttributeNS(r,"xmlns:xsi",ng),n.setAttributeNS(ng,"xsi:schemaLocation",TF);const s={node:n},o={};e.length>1?o.Document=e:e.length==1&&(o.Placemark=e[0]);const a=kF[n.namespaceURI],l=Hn(o,a);return Vt(s,FF,mn,l,[t],a,this),n}};function jF(i,e){const t=[0,0];let n="start";const r=i.getImage();if(r){const a=r.getSize();if(a&&a.length==2){const l=r.getScaleArray(),c=r.getAnchor();t[0]=l[0]*(a[0]-c[0]),t[1]=l[1]*(a[1]/2-c[1]),n="left"}}let s=i.getText();return s?(s=s.clone(),s.setFont(s.getFont()||Ia.getFont()),s.setScale(s.getScale()||Ia.getScale()),s.setFill(s.getFill()||Ia.getFill()),s.setStroke(s.getStroke()||Rm)):s=Ia.clone(),s.setText(e),s.setOffsetX(t[0]),s.setOffsetY(t[1]),s.setTextAlign(n),new Ee({image:r,text:s})}function zF(i,e,t,n,r){return function(s,o){let a=r,l="",c=[];if(a){const h=s.getGeometry();if(h)if(h instanceof Gs)c=h.getGeometriesArrayRecursive().filter(function(d){const f=d.getType();return f==="Point"||f==="MultiPoint"}),a=c.length>0;else{const d=h.getType();a=d==="Point"||d==="MultiPoint"}}a&&(l=s.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(wd||(wd=document.createElement("textarea")),wd.innerHTML=l,l=wd.value));let u=t;if(i?u=i:e&&(u=vb(e,t,n)),a){const h=jF(u[0],l);if(c.length>0){h.setGeometry(new Gs(c));const d=new Ee({geometry:u[0].getGeometry(),image:null,fill:u[0].getFill(),stroke:u[0].getStroke(),text:null});return[h,d].concat(u.slice(1))}return h}return u}}function vb(i,e,t){return Array.isArray(i)?i:typeof i=="string"?vb(t[i],e,t):e}function l0(i){const e=Vr(i,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const n=t[1];return[parseInt(n.substr(6,2),16),parseInt(n.substr(4,2),16),parseInt(n.substr(2,2),16),parseInt(n.substr(0,2),16)/255]}}function yb(i){let e=Vr(i,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const n=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let r;for(;r=n.exec(e);){const s=parseFloat(r[1]),o=parseFloat(r[2]),a=r[3]?parseFloat(r[3]):0;t.push(s,o,a),e=e.substr(r[0].length)}if(e==="")return t}function Ab(i){const e=Vr(i,!1).trim();let t=i.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function _b(i){const e=Vr(i,!1).trim().replace(/^(?!.*#)/,"#");let t=i.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function VF(i){const e=i.getAttribute("xunits"),t=i.getAttribute("yunits");let n;return e!=="insetPixels"?t!=="insetPixels"?n="bottom-left":n="top-left":t!=="insetPixels"?n="bottom-right":n="top-right",{x:parseFloat(i.getAttribute("x")),xunits:WC[e],y:parseFloat(i.getAttribute("y")),yunits:WC[t],origin:n}}function Cb(i){return lt(i)}const WF=J(xe,{Pair:gN});function Ib(i,e){return ve(void 0,WF,i,e,this)}const YF=J(xe,{Icon:L(sN),color:L(l0),heading:L(lt),hotSpot:L(VF),scale:L(Cb)});function HF(i,e){const t=ve({},YF,i,e);if(!t)return;const n=e[e.length-1],r="Icon"in t?t.Icon:{},s=!("Icon"in t)||Object.keys(r).length>0;let o;const a=r.href;a?o=a:s&&(o=og);let l,c,u,h="bottom-left";const d=t.hotSpot;d?(l=[d.x,d.y],c=d.xunits,u=d.yunits,h=d.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=xm,c=Ou,u=Du):o.includes("arrow-reverse")?(l=[54,42],c=Ou,u=Du):o.includes("paddle")&&(l=[32,1],c=Ou,u=Du));let f;const g=r.x,p=r.y;g!==void 0&&p!==void 0&&(f=[g,p]);let m;const v=r.w,y=r.h;v!==void 0&&y!==void 0&&(m=[v,y]);let A;const _=t.heading;_!==void 0&&(A=xo(_));const C=t.scale,I=t.color;if(s){o==og&&(m=ku);const b=new Qt({anchor:l,anchorOrigin:h,anchorXUnits:c,anchorYUnits:u,crossOrigin:this.crossOrigin_,offset:f,offsetOrigin:"bottom-left",rotation:A,scale:C,size:m,src:this.iconUrlFunction_(o),color:I}),S=b.getScaleArray()[0],R=b.getSize();if(R===null){const P=b.getImageState();if(P===Ye.IDLE||P===Ye.LOADING){const w=function(){const x=b.getImageState();if(!(x===Ye.IDLE||x===Ye.LOADING)){const D=b.getSize();if(D&&D.length==2){const k=ag(D);b.setScale(S*k)}b.unlistenImageChange(w)}};b.listenImageChange(w),P===Ye.IDLE&&b.load()}}else if(R.length==2){const P=ag(R);b.setScale(S*P)}n.imageStyle=b}else n.imageStyle=Ty}const qF=J(xe,{color:L(l0),scale:L(Cb)});function XF(i,e){const t=ve({},qF,i,e);if(!t)return;const n=e[e.length-1],r=new Nr({fill:new $e({color:"color"in t?t.color:Xl}),scale:t.scale});n.textStyle=r}const ZF=J(xe,{color:L(l0),width:L(lt)});function KF(i,e){const t=ve({},ZF,i,e);if(!t)return;const n=e[e.length-1],r=new je({color:"color"in t?t.color:Xl,width:"width"in t?t.width:1});n.strokeStyle=r}const JF=J(xe,{color:L(l0),fill:L(zo),outline:L(zo)});function QF(i,e){const t=ve({},JF,i,e);if(!t)return;const n=e[e.length-1],r=new $e({color:"color"in t?t.color:Xl});n.fillStyle=r;const s=t.fill;s!==void 0&&(n.fill=s);const o=t.outline;o!==void 0&&(n.outline=o)}const $F=J(xe,{coordinates:My(yb)});function Eb(i,e){return ve(null,$F,i,e)}function eN(i,e){const n=e[e.length-1].coordinates,r=Vr(i,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(o){const a=parseFloat(o[1]),l=parseFloat(o[2]),c=parseFloat(o[3]);n.push([a,l,c])}else n.push([])}const tN=J(Xs,{Track:un(wb)});function iN(i,e){const t=ve([],tN,i,e);if(t)return new hr(t)}const nN=J(xe,{when:PN},J(Xs,{coord:eN}));function wb(i,e){const t=ve({coordinates:[],whens:[]},nN,i,e);if(!t)return;const n=[],r=t.coordinates,s=t.whens;for(let o=0,a=Math.min(r.length,s.length);o<a;++o)r[o].length==3&&n.push(r[o][0],r[o][1],r[o][2],s[o]);return new Ji(n,"XYZM")}const rN=J(xe,{href:L(Ab)},J(Xs,{x:L(lt),y:L(lt),w:L(lt),h:L(lt)}));function sN(i,e){const t=ve({},rN,i,e);return t||null}const oN=J(xe,{coordinates:My(yb)});function Ly(i,e){return ve(null,oN,i,e)}const c0=J(xe,{extrude:L(zo),tessellate:L(zo),altitudeMode:L(ae)});function bb(i,e){const t=ve({},c0,i,e),n=Ly(i,e);if(n){const r=new Ji(n,"XYZ");return r.setProperties(t,!0),r}}function Sb(i,e){const t=ve({},c0,i,e),n=Ly(i,e);if(n){const r=new wi(n,"XYZ",[n.length]);return r.setProperties(t,!0),r}}const aN=J(xe,{LineString:un(bb),LinearRing:un(Sb),MultiGeometry:un(xb),Point:un(Pb),Polygon:un(Mb)});function xb(i,e){const t=ve([],aN,i,e);if(!t)return null;if(t.length===0)return new Gs(t);let n,r=!0;const s=t[0].getType();let o;for(let a=1,l=t.length;a<l;++a)if(o=t[a],o.getType()!=s){r=!1;break}if(r){let a,l;if(s=="Point"){const c=t[0];a=c.getLayout(),l=c.getFlatCoordinates();for(let u=1,h=t.length;u<h;++u)o=t[u],bt(l,o.getFlatCoordinates());n=new Us(l,a),ap(n,t)}else if(s=="LineString")n=new hr(t),ap(n,t);else if(s=="Polygon")n=new jr(t),ap(n,t);else if(s=="GeometryCollection")n=new Gs(t);else throw new Error("Unknown geometry type found")}else n=new Gs(t);return n}function Pb(i,e){const t=ve({},c0,i,e),n=Ly(i,e);if(n){const r=new Ki(n,"XYZ");return r.setProperties(t,!0),r}}const lN=J(xe,{innerBoundaryIs:wN,outerBoundaryIs:SN});function Mb(i,e){const t=ve({},c0,i,e),n=ve([null],lN,i,e);if(n&&n[0]){const r=n[0],s=[r.length];for(let a=1,l=n.length;a<l;++a)bt(r,n[a]),s.push(r.length);const o=new wi(r,"XYZ",s);return o.setProperties(t,!0),o}}const cN=J(xe,{IconStyle:HF,LabelStyle:XF,LineStyle:KF,PolyStyle:QF});function Gy(i,e){const t=ve({},cN,i,e,this);if(!t)return null;let n="fillStyle"in t?t.fillStyle:Kd;const r=t.fill;r!==void 0&&!r&&(n=null);let s;"imageStyle"in t?t.imageStyle!=Ty&&(s=t.imageStyle):s=Pm;const o="textStyle"in t?t.textStyle:Ia,a="strokeStyle"in t?t.strokeStyle:Mm,l=t.outline;return l!==void 0&&!l?[new Ee({geometry:function(c){const u=c.getGeometry(),h=u.getType();if(h==="GeometryCollection"){const d=u;return new Gs(d.getGeometriesArrayRecursive().filter(function(f){const g=f.getType();return g!=="Polygon"&&g!=="MultiPolygon"}))}if(h!=="Polygon"&&h!=="MultiPolygon")return u},fill:n,image:s,stroke:a,text:o,zIndex:void 0}),new Ee({geometry:function(c){const u=c.getGeometry(),h=u.getType();if(h==="GeometryCollection"){const d=u;return new Gs(d.getGeometriesArrayRecursive().filter(function(f){const g=f.getType();return g==="Polygon"||g==="MultiPolygon"}))}if(h==="Polygon"||h==="MultiPolygon")return u},fill:n,stroke:null,zIndex:void 0})]:[new Ee({fill:n,image:s,stroke:a,text:o,zIndex:void 0})]}function ap(i,e){const t=e.length,n=new Array(e.length),r=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let c=0;c<t;++c){const u=e[c];n[c]=u.get("extrude"),r[c]=u.get("tessellate"),s[c]=u.get("altitudeMode"),o=o||n[c]!==void 0,a=a||r[c]!==void 0,l=l||s[c]}o&&i.set("extrude",n),a&&i.set("tessellate",r),l&&i.set("altitudeMode",s)}const uN=J(xe,{displayName:L(ae),value:L(ae)});function hN(i,e){const t=i.getAttribute("name");Xo(uN,i,e);const n=e[e.length-1];t&&n.displayName?n[t]={value:n.value,displayName:n.displayName,toString:function(){return n.value}}:t!==null?n[t]=n.value:n.displayName!==null&&(n[n.displayName]=n.value),delete n.value}const dN=J(xe,{Data:hN,SchemaData:vN});function Rb(i,e){Xo(dN,i,e)}function Tb(i,e){Xo(mb,i,e)}const fN=J(xe,{Style:L(Gy),key:L(ae),styleUrl:L(_b)});function gN(i,e){const t=ve({},fN,i,e,this);if(!t)return;const n=t.key;if(n&&n=="normal"){const r=t.styleUrl;r&&(e[e.length-1]=r);const s=t.Style;s&&(e[e.length-1]=s)}}function pN(i,e){const t=Ib.call(this,i,e);if(!t)return;const n=e[e.length-1];if(Array.isArray(t))n.Style=t;else if(typeof t=="string")n.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const mN=J(xe,{SimpleData:yN});function vN(i,e){Xo(mN,i,e)}function yN(i,e){const t=i.getAttribute("name");if(t!==null){const n=ae(i),r=e[e.length-1];r[t]=n}}const AN=J(xe,{altitudeMode:L(ae),minAltitude:L(lt),maxAltitude:L(lt),north:L(lt),south:L(lt),east:L(lt),west:L(lt)});function _N(i,e){const t=ve({},AN,i,e);if(!t)return;const n=e[e.length-1],r=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];n.extent=r,n.altitudeMode=t.altitudeMode,n.minAltitude=parseFloat(t.minAltitude),n.maxAltitude=parseFloat(t.maxAltitude)}const CN=J(xe,{minLodPixels:L(lt),maxLodPixels:L(lt),minFadeExtent:L(lt),maxFadeExtent:L(lt)});function IN(i,e){const t=ve({},CN,i,e);if(!t)return;const n=e[e.length-1];n.minLodPixels=parseFloat(t.minLodPixels),n.maxLodPixels=parseFloat(t.maxLodPixels),n.minFadeExtent=parseFloat(t.minFadeExtent),n.maxFadeExtent=parseFloat(t.maxFadeExtent)}const EN=J(xe,{LinearRing:un(Eb)});function wN(i,e){const t=ve([],EN,i,e);t.length>0&&e[e.length-1].push(...t)}const bN=J(xe,{LinearRing:My(Eb)});function SN(i,e){const t=ve(void 0,bN,i,e);if(t){const n=e[e.length-1];n[0]=t}}function xN(i,e){Xo(OF,i,e)}function PN(i,e){const n=e[e.length-1].whens,r=Vr(i,!1),s=Date.parse(r);n.push(isNaN(s)?0:s)}function u0(i,e){const t=oh(e),r=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let s=0;s<4;++s){const o=Math.floor(r[s]).toString(16);r[s]=o.length==1?"0"+o:o}Dt(i,r.join(""))}function MN(i,e,t){const n=t[t.length-1],r=n.layout,s=n.stride;let o;if(r=="XY"||r=="XYM")o=2;else if(r=="XYZ"||r=="XYZM")o=3;else throw new Error("Invalid geometry layout");const a=e.length;let l="";if(a>0){l+=e[0];for(let c=1;c<o;++c)l+=","+e[c];for(let c=s;c<a;c+=s){l+=" "+e[c];for(let u=1;u<o;++u)l+=","+e[c+u]}}Dt(i,l)}const Jd=J(xe,{Data:ce(RN),value:ce(LN),displayName:ce(TN)});function RN(i,e,t){i.setAttribute("name",e.name);const n={node:i},r=e.value;typeof r=="object"?(r!==null&&r.displayName&&Vt(n,Jd,mn,[r.displayName],t,["displayName"]),r!==null&&r.value&&Vt(n,Jd,mn,[r.value],t,["value"])):Vt(n,Jd,mn,[r],t,["value"])}function TN(i,e){MF(i,e)}function LN(i,e){Dt(i,e)}const GN=J(xe,{Placemark:ce(Ob)}),ON=function(i,e,t){const n=e[e.length-1].node;return $a(n.namespaceURI,"Placemark")};function DN(i,e,t){Vt({node:i},GN,ON,e,t,void 0,this)}const kN=Wr("Data");function FN(i,e,t){const n={node:i},r=e.names,s=e.values,o=r.length;for(let a=0;a<o;a++)Vt(n,Jd,kN,[{name:r[a],value:s[a]}],t)}const HC=J(xe,["href"],J(Xs,["x","y","w","h"])),qC=J(xe,{href:ce(Dt)},J(Xs,{x:ce(Nn),y:ce(Nn),w:ce(Nn),h:ce(Nn)})),NN=function(i,e,t){return $a(Xs[0],"gx:"+t)};function UN(i,e,t){const n={node:i},r=t[t.length-1].node;let s=HC[r.namespaceURI],o=Hn(e,s);Vt(n,qC,mn,o,t,s),s=HC[Xs[0]],o=Hn(e,s),Vt(n,qC,NN,o,t,s)}const BN=J(xe,["scale","heading","Icon","color","hotSpot"]),jN=J(xe,{Icon:ce(UN),color:ce(u0),heading:ce(Nn),hotSpot:ce(g4),scale:ce(kb)});function zN(i,e,t){const n={node:i},r={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];const m=e.getAnchor(),v=e.getOrigin();if(v&&a&&v[0]!==0&&v[1]!==o[1]&&(l.x=v[0],l.y=a[1]-(v[1]+o[1])),m&&(m[0]!==o[0]/2||m[1]!==o[1]/2)){const y={x:m[0],xunits:"pixels",y:o[1]-m[1],yunits:"pixels"};r.hotSpot=y}}r.Icon=l;let c=e.getScaleArray()[0],u=o;if(u===null&&(u=ku),u.length==2){const m=ag(u);c=c/m}c!==1&&(r.scale=c);const h=e.getRotation();h!==0&&(r.heading=h);const d=e.getColor();d&&(r.color=d);const f=t[t.length-1].node,g=BN[f.namespaceURI],p=Hn(r,g);Vt(n,jN,mn,p,t,g)}const VN=J(xe,["color","scale"]),WN=J(xe,{color:ce(u0),scale:ce(kb)});function YN(i,e,t){const n={node:i},r={},s=e.getFill();s&&(r.color=s.getColor());const o=e.getScale();o&&o!==1&&(r.scale=o);const a=t[t.length-1].node,l=VN[a.namespaceURI],c=Hn(r,l);Vt(n,WN,mn,c,t,l)}const HN=J(xe,["color","width"]),qN=J(xe,{color:ce(u0),width:ce(Nn)});function XN(i,e,t){const n={node:i},r={color:e.getColor(),width:Number(e.getWidth())||1},s=t[t.length-1].node,o=HN[s.namespaceURI],a=Hn(r,o);Vt(n,qN,mn,a,t,o)}const ZN={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Lb=function(i,e,t){if(i){const n=e[e.length-1].node;return $a(n.namespaceURI,ZN[i.getType()])}},KN=Wr("Point"),JN=Wr("LineString"),QN=Wr("LinearRing"),$N=Wr("Polygon"),e4=J(xe,{LineString:ce(Zl),Point:ce(Zl),Polygon:ce(Db),GeometryCollection:ce(Gb)});function Gb(i,e,t){const n={node:i},r=e.getType();let s=[],o;if(r==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(a){const l=a.getType();if(l==="MultiPoint")s=s.concat(a.getPoints());else if(l==="MultiLineString")s=s.concat(a.getLineStrings());else if(l==="MultiPolygon")s=s.concat(a.getPolygons());else if(l==="Point"||l==="LineString"||l==="Polygon")s.push(a);else throw new Error("Unknown geometry type")}),o=Lb;else if(r==="MultiPoint")s=e.getPoints(),o=KN;else if(r==="MultiLineString")s=e.getLineStrings(),o=JN;else if(r==="MultiPolygon")s=e.getPolygons(),o=$N;else throw new Error("Unknown geometry type");Vt(n,e4,o,s,t)}const t4=J(xe,{LinearRing:ce(Zl)});function XC(i,e,t){Vt({node:i},t4,QN,[e],t)}const lp=J(xe,{ExtendedData:ce(FN),MultiGeometry:ce(Gb),LineString:ce(Zl),LinearRing:ce(Zl),Point:ce(Zl),Polygon:ce(Db),Style:ce(f4),address:ce(Dt),description:ce(Dt),name:ce(Dt),open:ce(_c),phoneNumber:ce(Dt),styleUrl:ce(Dt),visibility:ce(_c)}),i4=J(xe,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),n4=Wr("ExtendedData");function Ob(i,e,t){const n={node:i};e.getId()&&i.setAttribute("id",e.getId());const r=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(r||{}).sort().filter(function(f){return!s[f]}),a=e.getStyleFunction();if(a){const f=a(e,0);if(f){const g=Array.isArray(f)?f:[f];let p=g;if(e.getGeometry()&&(p=g.filter(function(m){const v=m.getGeometryFunction()(e);if(v){const y=v.getType();return y==="GeometryCollection"?v.getGeometriesArrayRecursive().filter(function(A){const _=A.getType();return _==="Point"||_==="MultiPoint"}).length:y==="Point"||y==="MultiPoint"}})),this.writeStyles_){let m=g,v=g;e.getGeometry()&&(m=g.filter(function(y){const A=y.getGeometryFunction()(e);if(A){const _=A.getType();return _==="GeometryCollection"?A.getGeometriesArrayRecursive().filter(function(C){const I=C.getType();return I==="LineString"||I==="MultiLineString"}).length:_==="LineString"||_==="MultiLineString"}}),v=g.filter(function(y){const A=y.getGeometryFunction()(e);if(A){const _=A.getType();return _==="GeometryCollection"?A.getGeometriesArrayRecursive().filter(function(C){const I=C.getType();return I==="Polygon"||I==="MultiPolygon"}).length:_==="Polygon"||_==="MultiPolygon"}})),r.Style={pointStyles:p,lineStyles:m,polyStyles:v}}if(p.length&&r.name===void 0){const m=p[0].getText();m&&(r.name=m.getText())}}}const l=t[t.length-1].node,c=i4[l.namespaceURI],u=Hn(r,c);if(Vt(n,lp,mn,u,t,c),o.length>0){const f=Hn(r,o);Vt(n,lp,n4,[{names:o,values:f}],t)}const h=t[0];let d=e.getGeometry();d&&(d=br(d,!0,h)),Vt(n,lp,Lb,[d],t)}const r4=J(xe,["extrude","tessellate","altitudeMode","coordinates"]),s4=J(xe,{extrude:ce(_c),tessellate:ce(_c),altitudeMode:ce(Dt),coordinates:ce(MN)});function Zl(i,e,t){const n=e.getFlatCoordinates(),r={node:i};r.layout=e.getLayout(),r.stride=e.getStride();const s=e.getProperties();s.coordinates=n;const o=t[t.length-1].node,a=r4[o.namespaceURI],l=Hn(s,a);Vt(r,s4,mn,l,t,a)}const o4=J(xe,["color","fill","outline"]),ZC=J(xe,{outerBoundaryIs:ce(XC),innerBoundaryIs:ce(XC)}),a4=Wr("innerBoundaryIs"),l4=Wr("outerBoundaryIs");function Db(i,e,t){const n=e.getLinearRings(),r=n.shift(),s={node:i};Vt(s,ZC,a4,n,t),Vt(s,ZC,l4,[r],t)}const c4=J(xe,{color:ce(u0),fill:ce(_c),outline:ce(_c)});function u4(i,e,t){const n={node:i},r=e.getFill(),s=e.getStroke(),o={color:r?r.getColor():void 0,fill:r?void 0:!1,outline:s?void 0:!1},a=t[t.length-1].node,l=o4[a.namespaceURI],c=Hn(o,l);Vt(n,c4,mn,c,t,l)}function kb(i,e){Nn(i,Math.round(e*1e6)/1e6)}const h4=J(xe,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),d4=J(xe,{IconStyle:ce(zN),LabelStyle:ce(YN),LineStyle:ce(XN),PolyStyle:ce(u4)});function f4(i,e,t){const n={node:i},r={};if(e.pointStyles.length){const l=e.pointStyles[0].getText();l&&(r.LabelStyle=l);const c=e.pointStyles[0].getImage();c&&typeof c.getSrc=="function"&&(r.IconStyle=c)}if(e.lineStyles.length){const l=e.lineStyles[0].getStroke();l&&(r.LineStyle=l)}if(e.polyStyles.length){const l=e.polyStyles[0].getStroke();l&&!r.LineStyle&&(r.LineStyle=l),r.PolyStyle=e.polyStyles[0]}const s=t[t.length-1].node,o=h4[s.namespaceURI],a=Hn(r,o);Vt(n,d4,mn,a,t,o)}function g4(i,e){i.setAttribute("x",String(e.x)),i.setAttribute("y",String(e.y)),i.setAttribute("xunits",e.xunits),i.setAttribute("yunits",e.yunits)}const p4=BF;var Le={hex:function(i){if(i>255)throw new Error("'"+i+"'' is greater than 255(0xff);");var e=Number(i).toString(16);return("0"+e).slice(-2)},num:function(i){return parseInt(i,16)},arrayToRgba:function(i){if(!Array.isArray(i))throw new Error("Not an array !");var e=i[0],t=i[1],n=i[2],r=i[3]||1,s="rgba("+e+", "+t+", "+n+", "+parseFloat(r)+")";return s},arrayToHex:function(i){if(!Array.isArray(i))throw new Error("Not an array !");var e=i[0],t=i[1],n=i[2],r=i[3],s=[this.hex(e),this.hex(t),this.hex(n)],o={};return o.hex="#"+s.join(""),r&&(o.opacity=parseFloat(r)),o},rgbaToHex:function(i){var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(i);if(!t)throw new Error("Invalid format: "+i);var n=t[1],r=t[2],s=t[3],o=t[4],a=[this.hex(n),this.hex(r),this.hex(s)],l={};return l.hex="#"+a.join(""),o&&(l.opacity=parseFloat(o)),l},hexToRgba:function(i,e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;if(!i)throw new Error("Invalid format");i=i.replace(t,function(s,o,a,l){return o+o+a+a+l+l});var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);n=n?{r:parseInt(n[1],16),g:parseInt(n[2],16),b:parseInt(n[3],16)}:null;var r=n?"rgba("+n.r+", "+n.g+", "+n.b+", "+e+")":null;return r},isHex:function(i){if(!i||i.charAt(0)!=="#")return!1;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,t=e.exec(i);return!!t},isRGB:function(i){if(!i)return!1;var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(i);return!!t}},m4=ot.getLogger("styling");Ht.prototype.setPropertyFill=function(){var i=this.getStyle();if(i&&!(Array.isArray(i)&&i.length===0)){var e=i.getFill();if(e){var t=e.getColor();if(Array.isArray(t)){var n="rgba(";n+=t[0]+",",n+=t[1]+",",n+=t[2]+",",n+=t[3]+")",t=n}if(Le.isRGB(t)){var r=Le.rgbaToHex(t);this.set("fill",r.hex),this.set("fill-opacity",r.opacity)}else this.set("fill",t),this.set("fill-opacity",1)}}};Ht.prototype.setPropertyStroke=function(){var i=this.getStyle();if(i&&!(Array.isArray(i)&&i.length===0)){var e=i.getStroke();if(e){var t=e.getColor();if(Array.isArray(t)){var n="rgba(";n+=t[0]+",",n+=t[1]+",",n+=t[2]+",",n+=t[3]+")",t=n}if(Le.isRGB(t)){var r=Le.rgbaToHex(t);this.set("stroke",r.hex),this.set("stroke-opacity",r.opacity)}else this.set("stroke",t),this.set("stroke-opacity",1);this.set("stroke-width",e.getWidth())}}};Ht.prototype.setPropertyLabel=function(){var i=this.getStyle();if(i&&!(Array.isArray(i)&&i.length===0)){var e=this.get("name")!==void 0,t=i.getText();if(t&&e){var n=i.getText().getFill();if(n){var r=n.getColor();if(Array.isArray(r)){var s="rgba(";s+=r[0]+",",s+=r[1]+",",s+=r[2]+",",s+=r[3]+")",r=s}if(Le.isRGB(r)){var o=Le.rgbaToHex(r);this.set("label-fill",o.hex),this.set("label-fill-opacity",o.opacity)}else this.set("label-fill",r),this.set("label-fill-opacity",1)}var a=i.getText().getStroke();if(a){var l=a.getColor();if(Array.isArray(l)){var c="rgba(";c+=l[0]+",",c+=l[1]+",",c+=l[2]+",",c+=l[3]+")",l=c}if(Le.isRGB(l)){var u=Le.rgbaToHex(l);this.set("label-stroke",u.hex),this.set("label-stroke-opacity",u.opacity)}else this.set("label-stroke",l),this.set("label-stroke-opacity",1);this.set("label-stroke-width",a.getWidth())}this.set("label-font",i.getText().getFont()||or.DEFAULT_TEXT.font),this.set("label-textAlign",i.getText().getTextAlign()||or.DEFAULT_TEXT.textAlign)}}};Ht.prototype.setPropertyMarker=function(){var i=this.getStyle();if(i&&!(Array.isArray(i)&&i.length===0)){var e=i.getImage();if(e)if(e instanceof Qt){var t=e.getColor();if(Array.isArray(t)){var n="rgba(";n+=t[0]+",",n+=t[1]+",",n+=t[2]+",",n+=t[3]+")",t=n}if(t){var r=Le.rgbaToHex(t);this.set("marker-color",r.hex)}var s=e.getScale();switch(Math.round(s*2)/2){case 0:case .5:this.set("marker-size","small");break;case 1:this.set("marker-size","medium");break;case 1.5:case 2:this.set("marker-size","large");break}var o=e.getSrc();o&&this.set("marker-symbol",o),this.unset("circle-fill"),this.unset("circle-fill-opacity"),this.unset("circle-stroke"),this.unset("circle-stroke-width"),this.unset("circle-stroke-opacity"),this.unset("circle-radius")}else{var a=e.getFill();if(a){var l=a.getColor();if(Array.isArray(l)){var c="rgba(";c+=l[0]+",",c+=l[1]+",",c+=l[2]+",",c+=l[3]+")",l=c}if(Le.isRGB(l)){var u=Le.rgbaToHex(l);this.set("circle-fill",u.hex),this.set("circle-fill-opacity",u.opacity)}else this.set("circle-fill",l),this.set("circle-fill-opacity",1)}var h=e.getStroke();if(h){var d=h.getColor();if(Array.isArray(d)){var f="rgba(";f+=d[0]+",",f+=d[1]+",",f+=d[2]+",",f+=d[3]+")",d=f}if(Le.isRGB(d)){var g=Le.rgbaToHex(d);this.set("circle-stroke",g.hex),this.set("circle-stroke-opacity",g.opacity)}else this.set("circle-stroke",d),this.set("circle-stroke-opacity",1);this.set("circle-stroke-width",h.getWidth())}var p=e.getRadius();this.set("circle-radius",p)}}};var or={APPLY_CONVERT_GEOM_GPX:!0,DEFAULT_ICON:{src:jt.lightOrange,anchor:[.5,1],scale:1},DEFAULT_CIRCLE:{radius:10,fill:{opacity:1,color:[0,0,0,1]},stroke:{width:1,opacity:1,color:[0,0,0,1]}},DEFAULT_STROKE:{width:5,opacity:1,color:[250,250,250,1]},DEFAULT_FILL:{opacity:1,color:[0,0,0,1]},DEFAULT_TEXT:{font:"16px sans",textAlign:"left",stroke:{color:[250,250,250,1],width:5,opactity:1},fill:{opacity:1,color:[0,0,0,1]}},getListTags:function(){return["type","fill","fill-opacity","stroke","stroke-opacity","stroke-width","circle-fill","circle-fill-opacity","circle-stroke","circle-stroke-opacity","circle-stroke-width","circle-radius","marker-symbol","marker-color","marker-size","label-fill","label-fill-opacity","label-stroke","label-stroke-width","label-stroke-opacity","label-font","label-textAlign"]},defineStyleFromProperties:function(i){var e=null,t={},n=null;if(i.get("marker-color")||i.get("marker-size")||i.get("marker-symbol")){n={},n.src=this.DEFAULT_ICON.src,n.anchor=this.DEFAULT_ICON.anchor;var r=i.get("marker-symbol");r&&r.search("data:image/png;base64")!==-1&&(n.src=r);var s=i.get("marker-color");Le.isHex(s)&&(n.color=Le.hexToRgba(s,1));var o=i.get("marker-size");if(o)switch(o){case"small":n.scale=.5;break;case"medium":n.scale=1;break;case"large":n.scale=1.5;break;default:n.scale=this.DEFAULT_ICON.scale;break}}var a=null;(i.get("stroke")||i.get("stroke-opacity")||i.get("stroke-width"))&&(a={},a.color=Le.hexToRgba(i.get("stroke"),+i.get("stroke-opacity")||this.DEFAULT_STROKE.opacity),a.width=+i.get("stroke-width")||this.DEFAULT_STROKE.width);var l=null;(i.get("fill")||i.get("fill-opacity"))&&(l={},l.color=Le.hexToRgba(i.get("fill"),+i.get("fill-opacity")||this.DEFAULT_FILL.opacity));var c=null,u=null,h=i.get("name")!=="";h&&((i.get("label-fill")||i.get("label-fill-opacity"))&&(u={},u.color=Le.hexToRgba(i.get("label-fill"),+i.get("label-fill-opacity")||this.DEFAULT_TEXT.fill.opacity)),(i.get("label-stroke")||i.get("label-stroke-opacity")||i.get("label-stroke-width"))&&(c={},c.color=Le.hexToRgba(i.get("label-stroke"),+i.get("label-stroke-opacity")||this.DEFAULT_TEXT.stroke.opacity),c.width=+i.get("label-stroke-width")||this.DEFAULT_TEXT.stroke.width));var d=i.get("circle-radius")||this.DEFAULT_CIRCLE.radius,f=null;(i.get("circle-stroke")||i.get("circle-stroke-opacity")||i.get("circle-stroke-width"))&&(f={},f.color=Le.hexToRgba(i.get("circle-stroke"),+i.get("circle-stroke-opacity")||this.DEFAULT_CIRCLE.stroke.opacity),f.width=+i.get("circle-stroke-width")||this.DEFAULT_CIRCLE.stroke.width);var g=null;(i.get("circle-fill")||i.get("circle-fill-opacity"))&&(g={},g.color=Le.hexToRgba(i.get("circle-fill"),+i.get("circle-fill-opacity")||this.DEFAULT_CIRCLE.fill.opacity));var p=i.getGeometry().getType();switch(p){case"Circle":case"Point":case"MultiPoint":var m=!1,v={};if(f&&(v.stroke=new je(f)),g&&(v.fill=new $e(g)),Object.keys(v).length!==0&&(m=!0,v.radius=+d,t.image=new Ei(v)),n&&(t.image=new Qt(n)),h){var y={};if(c&&(y.stroke=new je(c)),u&&(y.fill=new $e(u)),Object.keys(y).length!==0)y.text=i.get("name"),y.textAlign=i.get("label-textAlign")||this.DEFAULT_TEXT.textAlign,y.font=i.get("label-font")||this.DEFAULT_TEXT.font,t.text=new Nr(Object.assign({},this.DEFAULT_TEXT,y));else if(n||m){var A=new Nr(Object.assign({},this.DEFAULT_TEXT,{fill:new $e(this.DEFAULT_TEXT.fill),stroke:new je(this.DEFAULT_TEXT.stroke)}));if(A){var _=A.clone();_.setText(i.get("name")),t.text=_}}}break;case"Polygon":case"MultiPolygon":a&&(t.stroke=new je(a)),l&&(t.fill=new $e(l));break;case"LineString":case"MultiLineString":if(a&&(t.stroke=new je(a)),this.APPLY_CONVERT_GEOM_GPX&&l){var C=i.get("type");if(C&&(C==="Polygon"||C==="MultiPolygon")){t.fill=new $e(l);var I=i.clone(),b=p==="LineString"?wi:jr;i.setGeometry(new b([I.getGeometry().getCoordinates()]))}}break}return Object.keys(t).length!==0&&(e=new Ee(t)),e},defineStyleFunctionByDefault:function(i){if(!i)return[];if(Object.keys(i).length===0)return[];var e=(t,n)=>{var r=null,s=t.getGeometry().getType();switch(s){case"Point":case"MultiPoint":var o={};if(i.getImage()&&(o.image=i.getImage()),i.getText()&&t.get("name")){var a=i.getText().clone();a.setText(t.get("name")),o.text=a}r=new Ee(o);break;case"Circle":var l={},c={};if(i.getFill()&&(c.fill=i.getFill()),i.getStroke()&&(c.stroke=i.getStroke()),i.getText()&&t.get("name")){var u=i.getText().clone();u.setText(t.get("name")),l.text=u}Object.keys(c).length!==0&&(c.radius=3,l.image=new Ei(c)),r=new Ee(l);break;case"Polygon":case"MultiPolygon":var h={};i.getFill()&&(h.fill=i.getFill()),i.getStroke()&&(h.stroke=i.getStroke()),r=new Ee(h);break;case"LineString":case"LinearRing":case"MultiLineString":var d={};i.getStroke()&&(d.stroke=i.getStroke()),r=new Ee(d);break}return[r]};return e},definePropertiesFromStyleByType:function(i){var e=i.getGeometry().getType();switch(e){case"Point":case"MultiPoint":i.setPropertyMarker(),i.setPropertyLabel();break;case"LineString":case"MultiLineString":i.setPropertyStroke();break;case"Polygon":case"MultiPolygon":i.setPropertyStroke(),i.setPropertyFill();break}},definePropertiesFromStyle:function(i){var e=i.getStyle()||i.getStyleFunction();if(e){if(typeof e=="function"){var t=e.call(this,i,0);if(t&&t.length!==0)e=Array.isArray(t)?t[0]:t,i.setStyle(e);else return}this.definePropertiesFromStyleByType(i)}},defineTagFromStyle:function(i,e){return m4.trace("todo..."),null}},bd=ot.getLogger("parser"),Ea={parse:function(i){var e=null,t=null,n=typeof window<"u"?window:null;if(typeof kA=="object"&&window===null){var r=require("xmldom").DOMParser;t=new r,e=t.parseFromString(i,"text/xml")}else n.DOMParser?(t=new n.DOMParser,e=t.parseFromString(i,"text/xml")):n.ActiveXObject?(e=new n.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(i)):bd.log("Incompatible environment for DOM Parser !");var s=e.querySelector("parsererror");return s?(console.error(s),null):(bd.trace(e),e)},toString:function(i){var e=new XMLSerializer,t=e.serializeToString(i);return bd.trace(t),t},format:function(i){var e=/(>)\s*(<)(\/*)/g,t=/ *(.*) +\n/g,n=/(<.+>)(.+\n)/g;i=i.replace(e,`$1
$2$3`).replace(t,`$1
`).replace(n,`$1
$2`);for(var r="",s=i.split(`
`),o=0,a="other",l={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},c=0;c<s.length;c++){var u=s[c],h=!!u.match(/<.+\/>/),d=!!u.match(/<\/.+>/),f=!!u.match(/<[^!].*>/),g=h?"single":d?"closing":f?"opening":"other",p=a+"->"+g;a=g;var m="";o+=l[p];for(var v=0;v<o;v++)m+="	";p==="opening->closing"?r=r.substr(0,r.length-1)+u+`
`:r+=m+u+`
`}return bd.trace(r),r}},Ln=ot.getLogger("extended KML format"),_h=class Fb extends p4{constructor(e){if(super(e),!(this instanceof Fb))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e=e||{},this.source=null,this.extensions=e.extensions||null,e.defaultStyle&&!Array.isArray(e.defaultStyle)&&(e.defaultStyle=[e.defaultStyle]),(e.defaultStyle===null||typeof e.defaultStyle>"u")&&(e.defaultStyle=[]),this}_processKml(e,t,n){for(var r=e.nodeName==="#document"?e.childNodes[0].childNodes:e.childNodes,s=r,o=0;o<r.length;o++){const z=r[o];if(z.nodeName==="Document"){s=z.childNodes;break}if(z.nodeName==="Placemark"){s=[z];break}}for(var a={},l=-1,c=0;c<s.length;c++){var u=s[c];switch(u.nodeName){case"Style":var h=u.attributes[0];if(h&&h.nodeName==="id"){var d=h.nodeValue,f=u;a[d]=f}break;case"Placemark":l++;for(var g=u.childNodes,p=!1,m=!1,v=!1,y=null,A=null,_=null,C=u,I=0;I<g.length;I++)switch(g[I].nodeName){case"Polygon":v=!0;break;case"LineString":m=!0;break;case"Point":p=!0;break;case"Style":A=g[I],y=g[I].childNodes;break;case"styleUrl":var b=g[I].textContent.slice(1);a[b]&&(y=a[b].childNodes);break;case"ExtendedData":_=g[I].childNodes;break;case"name":C=null;break}if(_){Ln.log("ExtendedData :",_);var S=n.extendedData;S&&typeof S=="function"&&S(t[l],_)}if(C){Ln.log("Name :",C);var R=n.nameData;R&&typeof R=="function"&&R(t[l],C)}if(p&&y&&y.length!==0){for(var P=null,w=null,x=0;x<y.length;x++)switch(y[x].nodeName){case"LabelStyle":P=y[x];break;case"IconStyle":w=y[x];break}var D=t[l].getProperties().name,k=t[l].getProperties().description,O=D||k;if(Ln.trace(O),!w&&P){var N=n.labelStyle;N&&typeof N=="function"&&N(t[l],P)}else if(w&&!P){var B=n.iconStyle;B&&typeof B=="function"&&B(t[l],w)}else if(w&&P){var V=n.iconLabelStyle;V&&typeof V=="function"&&V(t[l],w,P)}}else{var se=t[l],j=se.getStyle();if(j&&typeof j=="function"){var Ae=j.call(this,se,0);Ae&&Ae.length!==0&&(j=Ae[0])}if(v){var q=n.polygonStyle;q&&typeof q=="function"&&q(t[l],y)}if(m){var Te=n.lineStringStyle;Te&&typeof Te=="function"&&Te(t[l],y)}if(p&&j){var Ce=j.getImage();if(Ce&&Ce instanceof Ei){var pe=n.circleStyle;pe&&typeof pe=="function"&&pe(t[l],A)}else if(Ce&&Ce instanceof Qt){var Ie=n.pointStyle;Ie&&typeof Ie=="function"&&Ie(t[l],A)}}}break;default:Ln.trace("tag is not processing !")}}}writeFeatures(e,t){Ln.log("overload : ol.format.KML.writeFeatures");var n=super.writeFeaturesNode(e,t);if(n===null)return null;this.hasOwnProperty("extensions")&&this._writeRootExtensions(n,this.extensions);var r=this._writeExtendStylesFeatures(n,e,t),s=Ea.format(r);return s===""?null:s}_writeExtendStylesFeatures(e,t,n){function r(f,g){var p=f.toString(16);p.charAt(0)==="#"&&(p=p.slice(1)),g=g||1,g=parseInt(g*255,10),g=g.toString(16);var m=g;return m=m+p.substr(4,2),m=m+p.substr(2,2),m=m+p.substr(0,2),m.toLowerCase()}var s=function(f,g){if(Ln.trace("label with style :",g),!!f&&f.getStyle()instanceof Ee){var p=f.getStyle().getText();if(!p)return;var m="Sans",v="16px",y=p.getFont();if(y){var A=y.split(" ",2);v=A[0],m=A[1]}var _=f.getStyle().getText().getStroke();if(!_)return;if(_ instanceof je){var C=r("#FFFFFF"),I=_.getColor();if(Array.isArray(I)){var b="rgba(";b+=I[0]+",",b+=I[1]+",",b+=I[2]+",",b+=I[3]+")",I=b}if(Le.isRGB(I)){var S=Le.rgbaToHex(I);C=r(S.hex,S.opacity)}else C=r(I);var R=_.getWidth()||"0",P="1";if(g&&g.getElementsByTagName("LabelStyleSimpleExtensionGroup").length===0){var w=document.createElementNS(e.namespaceURI,"LabelStyleSimpleExtensionGroup");w.setAttribute("fontSize",v),w.setAttribute("fontFamily",m),w.setAttribute("haloColor",C),w.setAttribute("haloRadius",R),w.setAttribute("haloOpacity",P),g.appendChild(w)}}var x=f.getStyle().getImage();if(!x)return;if(x instanceof Ei){var D=null,k=null;if(x.getStroke()){if(k=x.getStroke().getWidth(),D=x.getStroke().getColor(),Array.isArray(D)){var O="rgba(";O+=D[0]+",",O+=D[1]+",",O+=D[2]+",",O+=D[3]+")",D=O}if(Le.isRGB(D)){var N=Le.rgbaToHex(D);D=r(N.hex,N.opacity)}else D=r(D)}var B=null;if(x.getFill()){if(B=x.getFill().getColor(),Array.isArray(B)){var V="rgba(";V+=B[0]+",",V+=B[1]+",",V+=B[2]+",",V+=B[3]+")",B=V}if(Le.isRGB(B)){var se=Le.rgbaToHex(B);B=r(se.hex,se.opacity)}else B=r(B)}if(g&&g.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var j=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");j.setAttribute("type","circle"),j.setAttribute("radius",x.getRadius()),j.setAttribute("fillColor",B),j.setAttribute("strokeColor",D),j.setAttribute("strokeWidth",k),g.appendChild(j)}}}},o=function(f,g){if(Ln.trace("marker with style (hotspot):",g),!!f&&f.getStyle()instanceof Ee){var p=f.getStyle().getImage();if(!p)return;if(p instanceof Qt){var m=0,v=0,y="pixels",A="pixels",_=p.getSize(),C=p.getAnchor();if(C.length&&(m=C[0],v=C[1],A==="fraction"?v=v===1?0:1-v:v=A==="pixels"&&v===_[1]?0:_[1]-v),g&&g.getElementsByTagName("hotSpot").length===0){var I=document.createElementNS(e.namespaceURI,"hotSpot");I.setAttribute("x",m),I.setAttribute("y",v),I.setAttribute("xunits",y),I.setAttribute("yunits",A),g.appendChild(I)}}}},a=function(f,g){if(f&&f.getStyle()instanceof Ee){var p=f.getStyle().getImage();if(!p)return;if(p instanceof Ei){var m=null,v=null;if(p.getStroke()){if(v=p.getStroke().getWidth(),m=p.getStroke().getColor(),Array.isArray(m)){var y="rgba(";y+=m[0]+",",y+=m[1]+",",y+=m[2]+",",y+=m[3]+")",m=y}if(Le.isRGB(m)){var A=Le.rgbaToHex(m);m=r(A.hex,A.opacity)}else m=r(m)}var _=null;if(p.getFill()){if(_=p.getFill().getColor(),Array.isArray(_)){var C="rgba(";C+=_[0]+",",C+=_[1]+",",C+=_[2]+",",C+=_[3]+")",_=C}if(Le.isRGB(_)){var I=Le.rgbaToHex(_);_=r(I.hex,I.opacity)}else _=r(_)}if(g&&g.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var b=document.createElementNS(e.namespaceURI,"LabelStyle"),S=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");S.setAttribute("type","circle"),S.setAttribute("radius",p.getRadius()),S.setAttribute("fillColor",_),S.setAttribute("strokeColor",m),S.setAttribute("strokeWidth",v),b.appendChild(S),g.appendChild(b)}}}},l=function(f,g){},c=function(f,g,p){Ln.trace("write an icon with a label"),o(f,g),s(f,p)},u=function(f,g){for(var p=0;p<g.length;p++){var m=g[p];if(m.nodeName==="name")return}var v=f.getProperties().name;if(v){var y=document.createElement("name");y.innerHTML=v,g.appendChild(y)}},h=function(f,g){if(g&&g.length){for(var p=[],m=0;m<g.length;m++){const y=g[m];if(y.nodeName==="Data"){var v=y.getAttribute("name");or.getListTags().includes(v)&&p.push(y)}}p&&p.length&&p.forEach(y=>{y.remove()})}};this._processKml(e,t,{labelStyle:s,iconStyle:o,iconLabelStyle:c,circleStyle:a,pointStyle:l,nameData:u,extendedData:h});var d=Ea.toString(e);return d||null}_writeRootExtensions(e,t){var n=document.createElementNS(e.namespaceURI,"ExtendedData");for(const a in t)if(Object.hasOwnProperty.call(t,a)){const l=t[a];var r=document.createElementNS(e.namespaceURI,"Data");r.setAttribute("name",a);var s=document.createTextNode(JSON.stringify(l));r.appendChild(s),n.appendChild(r)}var o=e.firstChild;e.insertBefore(n,o)}readFeatures(e,t){Ln.log("overload : ol.format.KML.readFeatures"),typeof e=="string"?this.source=Ea.parse(e):e!==null&&(this.source=e);var n=this._readExtendStylesFeatures(e,t);return Ln.trace("Styles tendus",n),n.forEach(r=>{or.definePropertiesFromStyle(r)}),n}_readExtendStylesFeatures(e,t){var n=super.readFeatures(e,t),r=null,s="";if(typeof e=="string"?s=e:s=e.documentElement.outerHTML,s=s.replace(/\n/g,""),s=s.replace(/(>)\s*(<)/g,"$1$2"),r=Ea.parse(s),r===null)return n;function o(d){var f="";f=f+d.substr(6,2),f=f+d.substr(4,2),f=f+d.substr(2,2);for(var g=parseInt(f,16).toString(16),p="",m=g.length||0,v=0;v<6-m;v++)p+="0";return g="#"+p+g,g}var a=function(d,f){if(Ln.trace("label with style :",f),!!d){for(var g=d.getProperties().name,p=o("ff000000"),m="#FFFFFF",v=0,y="Sans",A="16px",_=null,C=5,I="#000000",b="#ffffff",S=1,R=!1,P=!1,w=f.childNodes,x=0;x<w.length;x++)switch(w[x].nodeName){case"scale":break;case"colorMode":break;case"color":p=o(w[x].textContent);break;case"LabelStyleSimpleExtensionGroup":R=!0;for(var D=w[x].attributes,k=0;k<D.length;k++)switch(D[k].nodeName){case"fontFamily":y=D[k].nodeValue;break;case"fontSize":A=D[k].nodeValue;break;case"haloColor":m=o(D[k].nodeValue);break;case"haloRadius":v=parseInt(D[k].nodeValue,10);break}break;case"ObjectSimpleExtensionGroup":P=!0;for(var O=w[x].attributes,N=0;N<O.length;N++)switch(O[N].nodeName){case"type":_=O[N].nodeValue;break;case"radius":C=parseInt(O[N].nodeValue,10);break;case"fillColor":var B=O[N].nodeValue,V=Math.round(Le.num(B.substr(0,2))/255*10)/10,se=o(B);I=Le.hexToRgba(se,V);break;case"strokeColor":var j=O[N].nodeValue,Ae=Math.round(Le.num(j.substr(0,2))/255*10)/10,q=o(j);b=Le.hexToRgba(q,Ae);break;case"strokeWidth":S=parseInt(O[N].nodeValue,10);break}break}var Te=null;P&&_==="circle"?Te=new Ei({radius:C,fill:new $e({color:I}),stroke:new je({color:b,width:S})}):R&&(Te=new Qt({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"})),d.setStyle(new Ee({image:Te,text:new Nr({font:A+" "+y,textAlign:"left",text:g,fill:new $e({color:p}),stroke:new je({color:m,width:v})})}))}},l=function(d,f){Ln.trace("hotspot :",f);for(var g=null,p=null,m=o("ffffffff"),v=!1,y=51,A=38,_=!1,C=25.5,I="pixels",b=38,S="pixels",R=f.childNodes,P=!1,w=0;w<R.length;w++)switch(R[w].nodeName){case"Icon":P=!0;for(var x=R[w].childNodes,D=0;D<x.length;D++)switch(x[D].nodeName){case"href":g=x[D].textContent;break;case"gx:w":v=!0,y=parseFloat(x[D].textContent);break;case"gx:h":v=!0,A=parseFloat(x[D].textContent);break}break;case"hotSpot":_=!0;for(var k=R[w].attributes,O=0;O<k.length;O++)switch(k[O].nodeName){case"x":C=parseFloat(k[O].nodeValue);break;case"y":b=parseFloat(k[O].nodeValue);break;case"yunits":I=k[O].nodeValue;break;case"xunits":S=k[O].nodeValue;break}break;case"scale":p=parseFloat(R[w].textContent);break;case"color":m=o(R[w].textContent);break}var N=null;if(P){var B={src:g||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",color:m,crossOrigin:"anonymous",scale:p||1};v&&He.mergeParams(B,{size:[y,A]}),_&&He.mergeParams(B,{anchor:[C,b],anchorOrigin:"bottom-left",anchorXUnits:I||"pixels",anchorYUnits:S||"pixels"}),N=new Qt(B)}var V=d.getStyleFunction();if(V){var se=V(d,0);if(se&&!Array.isArray(se)&&(se=[se]),se&&se.length!==0){var j=se.length===1?se[0]:se[se.length-1];d.setStyle(new Ee({image:N,text:j.getText()}))}}},c=function(d,f){if(Ln.trace("extendData :",f),!!d){for(var g={},p=d.get("name")||"",m=d.get("description")||"",v=null,y=0;y<f.length;y++){var A=f[y],_=A.attributes[0],C=A.childNodes;if(_.nodeName==="name")switch(_.nodeValue){case"label":p=A.textContent,g.name=p;break;case"title":case"attributetitle":for(var I=0;I<C.length;I++)C[I].nodeName==="value"&&(v=C[I].textContent);break;default:g[_.nodeValue]=A.textContent;break}}v&&(m=m?v+" : "+m:v,g.description=m),Object.keys(g).length&&d.setProperties(g,!0)}},u=function(d,f,g){Ln.trace("display icon and label"),a(d,g),l(d,f)},h=function(d,f){};return this._processKml(r,n,{lineStringStyle:h,polygonStyle:h,pointStyle:h,labelStyle:this.showPointNames_?a:null,iconStyle:l,iconLabelStyle:this.showPointNames_?u:l,extendedData:c}),n}readRootExtensions(e){for(var t={},n=this.source.nodeName==="#document"?this.source.childNodes[0]:this.source,r=n.childNodes,s=0;s<r.length;s++){var o=r[s];if(o.nodeName==="ExtendedData")for(var a=o.childNodes,l=0;l<a.length;l++){var c=a[l];if(c.nodeName==="Data"){var u=c.attributes[0];if(u&&u.nodeName==="name"&&u.nodeValue===e){t=JSON.parse(c.textContent);break}}}}return t}};window.ol&&window.ol.format&&(window.ol.format.KMLExtended=_h);const Pi=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],v4="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",y4={rte:Nb,trk:Ub,wpt:Bb},A4=J(Pi,{rte:un(Nb),trk:un(Ub),wpt:un(Bb)}),_4=J(Pi,{text:L(ae,"linkText"),type:L(ae,"linkType")}),C4=J(Pi,{rte:ce(Y4),trk:ce(H4),wpt:ce(X4)});let I4=class extends pb{constructor(e){super(),e=e||{},this.dataProjection=Re("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,n=e.length;t<n;++t){const r=e[t];if(this.readExtensions_){const s=r.get("extensionsNode_")||null;this.readExtensions_(r,s)}r.set("extensionsNode_",void 0)}}readFeatureFromNode(e,t){if(!Pi.includes(e.namespaceURI))return null;const n=y4[e.localName];if(!n)return null;const r=n(e,[this.getReadOptions(e,t)]);return r?(this.handleReadExtensions_([r]),r):null}readFeaturesFromNode(e,t){if(!Pi.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const n=ve([],A4,e,[this.getReadOptions(e,t)]);return n?(this.handleReadExtensions_(n),n):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const n=$a("http://www.topografix.com/GPX/1/1","gpx");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",ng),n.setAttributeNS(ng,"xsi:schemaLocation",v4),n.setAttribute("version","1.1"),n.setAttribute("creator","OpenLayers"),Vt({node:n},C4,j4,e,[t]),n}};const E4=J(Pi,{name:L(ae),cmt:L(ae),desc:L(ae),src:L(ae),link:ky,number:L(xn),extensions:Fy,type:L(ae),rtept:z4}),w4=J(Pi,{ele:L(lt),time:L(Ry)}),b4=J(Pi,{name:L(ae),cmt:L(ae),desc:L(ae),src:L(ae),link:ky,number:L(xn),type:L(ae),extensions:Fy,trkseg:W4}),S4=J(Pi,{trkpt:V4}),x4=J(Pi,{ele:L(lt),time:L(Ry)}),P4=J(Pi,{ele:L(lt),time:L(Ry),magvar:L(lt),geoidheight:L(lt),name:L(ae),cmt:L(ae),desc:L(ae),src:L(ae),link:ky,sym:L(ae),type:L(ae),fix:L(ae),sat:L(xn),hdop:L(lt),vdop:L(lt),pdop:L(lt),ageofdgpsdata:L(lt),dgpsid:L(xn),extensions:Fy}),M4=["text","type"],R4=J(Pi,{text:ce(Dt),type:ce(Dt)}),T4=J(Pi,["name","cmt","desc","src","link","number","type","rtept"]),L4=J(Pi,{name:ce(Dt),cmt:ce(Dt),desc:ce(Dt),src:ce(Dt),link:ce(Ny),number:ce(sg),type:ce(Dt),rtept:fb(ce(Uy))}),G4=J(Pi,["ele","time"]),O4=J(Pi,["name","cmt","desc","src","link","number","type","trkseg"]),D4=J(Pi,{name:ce(Dt),cmt:ce(Dt),desc:ce(Dt),src:ce(Dt),link:ce(Ny),number:ce(sg),type:ce(Dt),trkseg:fb(ce(q4))}),k4=Wr("trkpt"),F4=J(Pi,{trkpt:ce(Uy)}),N4=J(Pi,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),U4=J(Pi,{ele:ce(Nn),time:ce(RF),magvar:ce(Nn),geoidheight:ce(Nn),name:ce(Dt),cmt:ce(Dt),desc:ce(Dt),src:ce(Dt),link:ce(Ny),sym:ce(Dt),type:ce(Dt),fix:ce(Dt),sat:ce(sg),hdop:ce(Nn),vdop:ce(Nn),pdop:ce(Nn),ageofdgpsdata:ce(Nn),dgpsid:ce(sg)}),B4={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function j4(i,e,t){const n=i.getGeometry();if(n){const r=B4[n.getType()];if(r){const s=e[e.length-1].node;return $a(s.namespaceURI,r)}}}function Oy(i,e,t,n){return i.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in n?(i.push(n.ele),delete n.ele,e.hasZ=!0):i.push(0),"time"in n?(i.push(n.time),delete n.time,e.hasM=!0):i.push(0),i}function Dy(i,e,t){let n="XY",r=2;if(i.hasZ&&i.hasM?(n="XYZM",r=4):i.hasZ?(n="XYZ",r=3):i.hasM&&(n="XYM",r=3),r!==4){for(let s=0,o=e.length/4;s<o;s++)e[s*r]=e[s*4],e[s*r+1]=e[s*4+1],i.hasZ&&(e[s*r+2]=e[s*4+2]),i.hasM&&(e[s*r+2]=e[s*4+3]);if(e.length=e.length/4*r,t)for(let s=0,o=t.length;s<o;s++)t[s]=t[s]/4*r}return n}function ky(i,e){const t=e[e.length-1],n=i.getAttribute("href");n!==null&&(t.link=n),Xo(_4,i,e)}function Fy(i,e){const t=e[e.length-1];t.extensionsNode_=i}function z4(i,e){const t=ve({},w4,i,e);if(t){const n=e[e.length-1],r=n.flatCoordinates,s=n.layoutOptions;Oy(r,s,i,t)}}function V4(i,e){const t=ve({},x4,i,e);if(t){const n=e[e.length-1],r=n.flatCoordinates,s=n.layoutOptions;Oy(r,s,i,t)}}function W4(i,e){const t=e[e.length-1];Xo(S4,i,e);const n=t.flatCoordinates;t.ends.push(n.length)}function Nb(i,e){const t=e[0],n=ve({flatCoordinates:[],layoutOptions:{}},E4,i,e);if(!n)return;const r=n.flatCoordinates;delete n.flatCoordinates;const s=n.layoutOptions;delete n.layoutOptions;const o=Dy(s,r),a=new Ji(r,o);br(a,!1,t);const l=new Ht(a);return l.setProperties(n,!0),l}function Ub(i,e){const t=e[0],n=ve({flatCoordinates:[],ends:[],layoutOptions:{}},b4,i,e);if(!n)return;const r=n.flatCoordinates;delete n.flatCoordinates;const s=n.ends;delete n.ends;const o=n.layoutOptions;delete n.layoutOptions;const a=Dy(o,r,s),l=new hr(r,a,s);br(l,!1,t);const c=new Ht(l);return c.setProperties(n,!0),c}function Bb(i,e){const t=e[0],n=ve({},P4,i,e);if(!n)return;const r={},s=Oy([],r,i,n),o=Dy(r,s),a=new Ki(s,o);br(a,!1,t);const l=new Ht(a);return l.setProperties(n,!0),l}function Ny(i,e,t){i.setAttribute("href",e);const r=t[t.length-1].properties,s=[r.linkText,r.linkType];Vt({node:i},R4,mn,s,t,M4)}function Uy(i,e,t){const n=t[t.length-1],s=n.node.namespaceURI,o=n.properties;switch(i.setAttributeNS(null,"lat",String(e[1])),i.setAttributeNS(null,"lon",String(e[0])),n.geometryLayout){case"XYZM":e[3]!==0&&(o.time=e[3]);case"XYZ":e[2]!==0&&(o.ele=e[2]);break;case"XYM":e[2]!==0&&(o.time=e[2]);break}const l=i.nodeName=="rtept"?G4[s]:N4[s],c=Hn(o,l);Vt({node:i,properties:o},U4,mn,c,t,l)}function Y4(i,e,t){const n=t[0],r=e.getProperties(),s={node:i};s.properties=r;const o=e.getGeometry();if(o.getType()=="LineString"){const u=br(o,!0,n);s.geometryLayout=u.getLayout(),r.rtept=u.getCoordinates()}const a=t[t.length-1].node,l=T4[a.namespaceURI],c=Hn(r,l);Vt(s,L4,mn,c,t,l)}function H4(i,e,t){const n=t[0],r=e.getProperties(),s={node:i};s.properties=r;const o=e.getGeometry();if(o.getType()=="MultiLineString"){const u=br(o,!0,n);r.trkseg=u.getLineStrings()}const a=t[t.length-1].node,l=O4[a.namespaceURI],c=Hn(r,l);Vt(s,D4,mn,c,t,l)}function q4(i,e,t){const n={node:i};n.geometryLayout=e.getLayout(),n.properties={},Vt(n,F4,k4,e.getCoordinates(),t)}function X4(i,e,t){const n=t[0],r=t[t.length-1];r.properties=e.getProperties();const s=e.getGeometry();if(s.getType()=="Point"){const o=br(s,!0,n);r.geometryLayout=o.getLayout(),Uy(i,o.getCoordinates(),t)}}const Z4=I4;var Ch=class jb extends Z4{constructor(e){if(super(e),!(this instanceof jb))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(this.options=e||{},this.options.readExtensions&&typeof this.options.readExtensions=="function"){var t=this.options.readExtensions;this.options.readExtensions=function(n,r){this.readExtensions(n,r),t.call(this,n,r)}}else this.options.readExtensions=this.readExtensions;return(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var n=super.readFeatures(e,t);typeof e=="string"?this.source=Ea.parse(e):e!==null&&(this.source=e);var r=this;return n.forEach(function(s,o,a){s.setId(o+1);var l=s.getProperties().desc;l&&s.setProperties({description:l});var c=s.getStyleFunction();if(!c){var u=or.defineStyleFunctionByDefault(r.options.defaultStyle);u&&s.setStyle(u)}}),n}writeFeatures(e,t){if(e.forEach(function(l,c,u){var h=l.getProperties().description;h&&l.setProperties({desc:h}),or.definePropertiesFromStyle(l);var d=l.getGeometry().getType();if(d==="Polygon"){var f=l.clone();f.set("type",d),f.setGeometry(new Ji(l.getGeometry().getCoordinates())),e.push(f),u.splice(c,1)}else if(d==="MultiPolygon"){var g=l.clone();g.set("type",d),g.setGeometry(new hr(l.getGeometry().getCoordinates())),e.push(g),u.splice(c,1)}}),this.options.orderBy!==void 0){var n=this.options.orderBy;if(n){var r=function(l,c){var u=l.get(n)||0,h=c.get(n)||0;return u.toString().localeCompare(h.toString(),void 0,{numeric:!0})};e.sort(r)}}var s=super.writeFeaturesNode(e,t);if(s===null)return null;this.options.hasOwnProperty("extensions")&&this.writeRootExtensions_(s,this.options.extensions),this.processExtensions_(s,e,{extensions:this.writeExtensions_});var o=Ea.toString(s);if(!o)return null;var a=Ea.format(o);return a===""?null:a}readExtensions(e,t){var n=t;if(!t){var r=e.getProperties();for(const l in r)if(Object.hasOwnProperty.call(r,l)){const c=r[l];if(c instanceof Node){n=c;break}}}if(!n){console.warn("node not found !");return}for(var s=0;s<n.childNodes.length;s++){var o=n.childNodes[s];o.nodeType===1&&e.set(o.nodeName,o.textContent)}or.APPLY_CONVERT_GEOM_GPX=!0;var a=or.defineStyleFromProperties(e);a&&e.setStyle(a)}readRootExtensions(e){for(var t={},n=this.source.childNodes[0],r=n.childNodes,s=0;s<r.length;s++){var o=r[s];if(o.nodeName==="metadata")for(var a=o.childNodes,l=0;l<a.length;l++){var c=a[l];if(c.nodeName==="extensions")for(var u=c.childNodes,h=0;h<u.length;h++){var d=u[h];if(d.nodeName==="data"){var f=d.attributes[0];if(f&&f.nodeName==="name"&&f.nodeValue===e){t=JSON.parse(d.textContent);break}}}}}return t}writeRootExtensions_(e,t,n){var r=document.createElement("metadata"),s=document.createElement("extensions");function o(u,h){for(const y in h)if(Object.hasOwnProperty.call(h,y)){var d=h[y]||"",f=document.createElement(y);if(typeof d=="string"||typeof d=="number")f.innerHTML=d,u.appendChild(f);else if(d instanceof Array){f.setAttribute("type","array"),f.setAttribute("index",d.length);for(let A=0;A<d.length;A++){var g=d[A]||"",p=document.createElement("value");if(typeof g=="string"||typeof g=="number")p.innerHTML=g,f.appendChild(p);else if(g instanceof Array){p.setAttribute("type","array"),p.setAttribute("index",g.length);for(let _=0;_<g.length;_++){var m=g[_]||"",v=document.createElement("value");(typeof m=="string"||typeof m=="number")&&(v.innerHTML=m,p.appendChild(v))}f.appendChild(p)}else g instanceof Object&&f.appendChild(o(p,g))}u.appendChild(f)}else d instanceof Object&&u.appendChild(o(f,d))}return u}if(n)o(s,t);else for(const u in t)if(Object.hasOwnProperty.call(t,u)){const h=t[u];var a=document.createElement("data");a.setAttribute("name",u);var l=document.createTextNode(JSON.stringify(h));a.appendChild(l),s.appendChild(a)}r.appendChild(s);var c=e.firstChild;e.insertBefore(r,c)}writeExtensions_(e,t){var n=document.createElementNS(t.parentNode.namespaceURI,"extensions");or.getListTags().forEach(r=>{if(e.get(r)){var s=document.createElementNS(t.parentNode.namespaceURI,r);s.innerHTML=e.get(r),n.appendChild(s)}}),t.appendChild(n)}processExtensions_(e,t,n){for(var r=-1,s=e.childNodes,o=0;o<s.length;o++){var a=s[o];switch(a.nodeName){case"wpt":case"rte":case"trk":r++;var l=t[r],c=l.getStyle();if(c){var u=n.extensions;u&&typeof u=="function"&&u(l,a)}break;case"metadata":break;default:console.warn("nodename unknown :",a.nodeName);break}}}};window.ol&&window.ol.format&&(window.ol.format.GPXExtended=Ch);class K4 extends xy{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(Sd(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(Sd(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return We()}readFeaturesFromObject(e,t){return We()}readGeometry(e,t){return this.readGeometryFromObject(Sd(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return We()}readProjection(e){return this.readProjectionFromObject(Sd(e))}readProjectionFromObject(e){return We()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return We()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return We()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return We()}}function Sd(i){if(typeof i=="string"){const e=JSON.parse(i);return e||null}return i!==null?i:null}let J4=class extends K4{constructor(e){e=e||{},super(),this.dataProjection=Re(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=Re(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let n=null;e.type==="Feature"?n=e:n={type:"Feature",geometry:e,properties:null};const r=By(n.geometry);if(this.featureClass===qi)return hb({geometry:r,id:n.id,properties:n.properties},t);const s=new Ht;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in n!==void 0&&s.setGeometryName(n.geometry_name),s.setGeometry(Py(r,t)),"id"in n&&s.setId(n.id),n.properties&&s.setProperties(n.properties,!0),s}readFeaturesFromObject(e,t){const n=e;let r=null;if(n.type==="FeatureCollection"){const s=e;r=[];const o=s.features;for(let a=0,l=o.length;a<l;++a){const c=this.readFeatureFromObject(o[a],t);c&&r.push(c)}}else r=[this.readFeatureFromObject(e,t)];return r.flat()}readGeometryFromObject(e,t){return Q4(e,t)}readProjectionFromObject(e){const t=e.crs;let n;if(t)if(t.type=="name")n=Re(t.properties.name);else if(t.type==="EPSG")n=Re("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(e,t){t=this.adaptOptions(t);const n={type:"Feature",geometry:null,properties:null},r=e.getId();if(r!==void 0&&(n.id=r),!e.hasProperties())return n;const s=e.getProperties(),o=e.getGeometry();return o&&(n.geometry=Lm(o,t),delete s[e.getGeometryName()]),ko(s)||(n.properties=s),n}writeFeaturesObject(e,t){t=this.adaptOptions(t);const n=[];for(let r=0,s=e.length;r<s;++r)n.push(this.writeFeatureObject(e[r],t));return{type:"FeatureCollection",features:n}}writeGeometryObject(e,t){return Lm(e,this.adaptOptions(t))}};function By(i,e){if(!i)return null;let t;switch(i.type){case"Point":{t=e8(i);break}case"LineString":{t=t8(i);break}case"Polygon":{t=s8(i);break}case"MultiPoint":{t=n8(i);break}case"MultiLineString":{t=i8(i);break}case"MultiPolygon":{t=r8(i);break}case"GeometryCollection":{t=$4(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return t}function Q4(i,e){const t=By(i);return Py(t,e)}function $4(i,e){return i.geometries.map(function(n){return By(n)})}function e8(i){const e=i.coordinates;return{type:"Point",flatCoordinates:e,layout:Ja(e.length)}}function t8(i){const e=i.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:Ja(e[0].length)}}function i8(i){const e=i.coordinates,t=e[0][0].length,n=[],r=Bh(n,0,e,t);return{type:"MultiLineString",flatCoordinates:n,ends:r,layout:Ja(t)}}function n8(i){const e=i.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:Ja(e[0].length)}}function r8(i){const e=i.coordinates,t=[],n=e[0][0][0].length,r=iw(t,0,e,n);return{type:"MultiPolygon",flatCoordinates:t,ends:r,layout:Ja(n)}}function s8(i){const e=i.coordinates,t=[],n=e[0][0].length,r=Bh(t,0,e,n);return{type:"Polygon",flatCoordinates:t,ends:r,layout:Ja(n)}}function Lm(i,e){i=br(i,!0,e);const t=i.getType();let n;switch(t){case"Point":{n=h8(i);break}case"LineString":{n=a8(i);break}case"Polygon":{n=d8(i,e);break}case"MultiPoint":{n=c8(i);break}case"MultiLineString":{n=l8(i);break}case"MultiPolygon":{n=u8(i,e);break}case"GeometryCollection":{n=o8(i,e);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return n}function o8(i,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(n){return Lm(n,e)})}}function a8(i,e){return{type:"LineString",coordinates:i.getCoordinates()}}function l8(i,e){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function c8(i,e){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function u8(i,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(t)}}function h8(i,e){return{type:"Point",coordinates:i.getCoordinates()}}function d8(i,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(t)}}const Gm=J4;var Dr=class zb extends Gm{constructor(e){if(super(e),!(this instanceof zb))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.options=e||{},(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var n=super.readFeatures(e,t);return typeof e=="string"?this.source=JSON.parse(e):e!==null&&(this.source=e),n.forEach(r=>{var s=r.getStyleFunction();if(s){var o=s.call(this,r,0);o&&o.length!==0&&r.setStyle(o[0])}else{var a=or.defineStyleFromProperties(r);if(a)r.setStyle(a);else{var l=or.defineStyleFunctionByDefault(this.options.defaultStyle);l&&(r.setStyle(l),or.definePropertiesFromStyle(r))}}}),n}writeFeatures(e,t){e.forEach(function(r){or.definePropertiesFromStyle(r)});var n=this.writeFeaturesObject(e,t);return this.options.hasOwnProperty("extensions")&&Object.assign(n,this.options.extensions),JSON.stringify(n)}readRootExtensions(e){return this.source[e]}};window.ol&&window.ol.format&&(window.ol.format.GeoJSONExtended=Dr);var Vb=class extends my{constructor(e){super(e)}getFeatureInfoUrl(e,t,n,r){var s=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,o=this.tileGrid,a=this.tileGrid.getTileCoordForCoordAndResolution(e,t),l=function(A,_,C){var I=[0,0,0],b=Yn(),S=A[1],R=A[2],P=_.getTileCoordExtent(A),w=C.getExtent();if(w!=null&&C.isGlobal()){var x=Math.ceil(Rt(w)/Rt(P));S=S%x,I[0]=A[0],I[1]=S,I[2]=A[2],P=_.getTileCoordExtent(I,b)}return Jt(P,w)?[A[0],S,R]:null},c=o.getTileCoordExtent(a),u=l(a,o,n);if(!(o.getResolutions().length<=a[0])){var h=o.getResolution(a[0]),d=o.getMatrixIds()[a[0]],f={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:u[1],TILEROW:u[2],TILEMATRIX:d,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};He.assign(f,r);var g=Math.floor((e[0]-c[0])/(h/s)),p=Math.floor((c[3]-e[1])/(h/s)),m=o.getTileSize(a[0]);g=Math.min(g,(m[0]|m)-1),p=Math.max(p,0),f.I=g,f.J=p;var v=this.urls[0],y=yt.Helper.normalyzeUrl(v,f);return y}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=Vb);var Wb={getZoomLevelFromScaleDenominator:function(i,e){var t={};switch(e){case"EPSG:2154":t={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:t={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var n=i*28e-5;for(var r in t)if(t.hasOwnProperty(r)&&t[r]<=n)return r=parseInt(r,10),r;return 0},getAttributions:function(i){var e=i.zoom,t=[];if(i.originators!=null&&i.visibility)for(var n,r=0,s=i.originators.length;r<s;r++){n=!0;for(var o=i.originators[r],a=i.originators[r].constraints||[],l=0,c=a.length;l<c;l++){var u=a[l];n=!0;var h=this.getZoomLevelFromScaleDenominator(u.maxScaleDenominator,i.crs),d=this.getZoomLevelFromScaleDenominator(u.minScaleDenominator,i.crs)||21;h&&h>e&&(n=!1),n&&d&&d<e&&(n=!1);var f=u.bbox;if(n&&f){n=!1;var g=i.extent;if(g){var p=[f.top,f.left,f.bottom,f.right];if(this.intersects(g,p)){n=!0;break}}}}if(n){var m=o.logo,v=o.url,y=o.name?o.name:"",A=o.attribution,_=document.createElement("div");_.className="gp-control-attribution";var C=null;C=document.createElement("a"),C.className="gp-control-attribution-link",C.target="_blank",_.appendChild(C),v&&(C.href=v);var I=!!m,b=null;I?(b=document.createElement("img"),C?(b.className="gp-control-attribution-image",C.appendChild(b)):(b.className="",_.appendChild(b)),b.src=m,b.title=A||y,b.style.height="30px",b.style.width="30px"):y?C.textContent=y:A?C.textContent=A:v?C.textContent=v:C.textContent="",t.push(_.innerHTML+" ")}}return t},intersects:function(i,e){var t=i[1]<=e[3]&&e[1]<=i[3],n=i[2]<=e[0]&&e[2]<=i[0];return t&&n}},Bi={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var i=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return i.Gp&&i.Gp.Config&&i.Gp.Config.layers&&Object.keys(i.Gp.Config.layers).length!==0?(this.configuration=i.Gp.Config,!0):!1}};ot.getLogger("sourcewmts");var Yb=class extends Vb{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");if(typeof e.ssl>"u"&&(e.ssl=!0),!Bi.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var t=Bi.configuration.getLayerId(e.layer,"WMTS");if(!t)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(!Bi.configuration.getLayerConf(t))throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal....");var n=Bi.configuration.getLayerParams(e.layer,"WMTS"),r=e.ssl===!1?"http://":"https://",s={"gp-ol-ext":Df.olExtVersion||Df.version};n.url.includes("/private/")&&(s.apikey=e.apiKey||Bi.configuration.getLayerKey(t)[0]);var o={url:yt.Helper.normalyzeUrl(n.url.replace(/(http|https):\/\//,r),s,!1),version:n.version,style:n.styles,format:n.format,projection:n.projection,maxZoom:Wb.getZoomLevelFromScaleDenominator(n.minScale),layer:e.layer,matrixSet:n.TMSLink,tileGrid:new H1({resolutions:n.nativeResolutions,matrixIds:n.matrixIds,origin:[n.tileMatrices[0].topLeftCorner.x,n.tileMatrices[0].topLeftCorner.y]})};return He.mergeParams(o,e.olParams),e.olParams&&!n.originators&&(n.originators=e.olParams.attributions),super(o),this._originators=n.originators,this._legends=e.legends||n.legends,this._metadata=e.metadata||n.metadata,this._description=e.description||n.description,this._title=e.title||n.title,this._quicklookUrl=e.quicklookUrl||n.quicklookUrl,this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=Yb);ot.getLogger("sourcewms");var Hb=class extends py{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");if(typeof e.ssl>"u"&&(e.ssl=!0),!Bi.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var t=Bi.configuration.getLayerId(e.layer,"WMS");if(!t)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(!Bi.configuration.getLayerConf(t))throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal....");var n=Bi.configuration.getLayerParams(e.layer,"WMS"),r=e.ssl===!1?"http://":"https://",s={"gp-ol-ext":Df.olExtVersion||Df.version};n.url.includes("/private/")&&(s.apikey=e.apiKey||Bi.configuration.getLayerKey(t)[0]);var o={url:yt.Helper.normalyzeUrl(n.url.replace(/(http|https):\/\//,r),s,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:n.version,STYLES:n.styles,FORMAT:n.format}};return He.mergeParams(o,e.olParams),e.olParams&&!n.originators&&(n.originators=e.olParams.attributions),super(o),this._originators=n.originators,this._legends=e.legends||n.legends,this._metadata=e.metadata||n.metadata,this._title=e.title||n.title,this._description=e.description||n.description,this._quicklookUrl=e.quicklookUrl||n.quicklookUrl,this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=Hb);var f8=class extends Fa{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");if(typeof e.ssl>"u"&&(e.ssl=!0),!Bi.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var t;e.olParams&&e.olParams.sourceParams&&(t=e.olParams.sourceParams);var n=new Yb({layer:e.layer,ssl:e.ssl,apiKey:e.apiKey,olParams:t}),r={source:n};if(n.getLayer()!==void 0){var s=Bi.configuration.getLayerId(e.layer,"WMTS"),o=Bi.configuration.getGlobalConstraints(s);if(o&&o.projection){var a;typeof o.projection=="string"&&(a=Re(o.projection)),a&&a.getUnits()&&(a.getUnits()==="m"?(r.minResolution=(o.minScale-1)*28e-5,r.maxResolution=(o.maxScale+1)*28e-5):a.getUnits()==="degrees"&&(r.minResolution=(o.minScale-1)*28e-5*180/(Math.PI*6378137),r.maxResolution=(o.maxScale+1)*28e-5*180/(Math.PI*6378137)))}}return He.mergeParams(r,e.olParams),super(r),this}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=f8);var g8=class extends Fa{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");if(typeof e.ssl>"u"&&(e.ssl=!0),!Bi.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var t;e.olParams&&e.olParams.sourceParams&&(t=e.olParams.sourceParams);var n=new Hb({layer:e.layer,ssl:e.ssl,apiKey:e.apiKey,olParams:t}),r={source:n};if(n.getParams().LAYERS!==void 0){var s=Bi.configuration.getLayerId(e.layer,"WMS"),o=Bi.configuration.getGlobalConstraints(s);if(t&&t.projection){var a=[o.extent.left,o.extent.bottom,o.extent.right,o.extent.top];r.extent=Ss(a,"EPSG:4326",t.projection);var l;typeof t.projection=="string"?l=Re(t.projection):typeof t.projection=="object"&&t.projection.getCode()&&(l=Re(t.projection.getCode())),l&&l.getUnits()&&(l.getUnits()==="m"?(r.minResolution=(o.minScale-1)*28e-5,r.maxResolution=(o.maxScale+1)*28e-5):l.getUnits()==="degrees"&&(r.minResolution=(o.minScale-1)*28e-5*180/(Math.PI*6378137),r.maxResolution=(o.maxScale+1)*28e-5*180/(Math.PI*6378137)))}}return He.mergeParams(r,e.olParams),super(r),this}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=g8);const p8={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},m8={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class v8 extends mw{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=Ir()}prepareTile(e,t,n){let r;const s=e.getState();return(s===ge.LOADED||s===ge.ERROR)&&(this.updateExecutorGroup_(e,t,n),this.tileImageNeedsRender_(e)&&(r=!0)),r}getTile(e,t,n,r){const s=r.pixelRatio,o=r.viewState,a=o.resolution,l=o.projection,c=this.getLayer(),u=c.getSource().getTile(e,t,n,s,l),h=r.viewHints,d=!(h[ai.ANIMATING]||h[ai.INTERACTING]);return(d||!u.wantedResolution)&&(u.wantedResolution=a),this.prepareTile(u,s,l)&&(d||Date.now()-r.time<8)&&c.getRenderMode()!=="vector"&&this.renderTileImage_(u,r),super.getTile(e,t,n,r)}isDrawableTile(e){const t=this.getLayer();return super.isDrawableTile(e)&&(t.getRenderMode()==="vector"?ke(t)in e.executorGroups:e.hasContext(t))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,n){const r=this.getLayer(),s=r.getRevision(),o=r.getRenderOrder()||null,a=e.wantedResolution,l=e.getReplayState(r);if(!l.dirty&&l.renderedResolution===a&&l.renderedRevision==s&&l.renderedRenderOrder==o)return;const c=r.getSource(),u=r.getDeclutter(),h=c.getTileGrid(),f=c.getTileGridForProjection(n).getTileCoordExtent(e.wrappedTileCoord),g=c.getSourceTiles(t,n,e),p=ke(r);delete e.hitDetectionImageData[p],e.executorGroups[p]=[],u&&(e.declutterExecutorGroups[p]=[]),l.dirty=!1;for(let m=0,v=g.length;m<v;++m){const y=g[m];if(y.getState()!=ge.LOADED)continue;const A=y.tileCoord,_=h.getTileCoordExtent(A),C=So(f,_),I=Fr(C,r.getRenderBuffer()*a,this.tmpExtent),b=No(_,C)?null:I,S=new Vf(0,I,a,t),R=u?new Vf(0,C,a,t):void 0,P=tb(a,t),w=function(N){let B;const V=N.getStyleFunction()||r.getStyleFunction();if(V&&(B=V(N,a)),B){const se=this.renderFeature(N,P,B,S,R);l.dirty=l.dirty||se}},x=y.getFeatures();o&&o!==l.renderedRenderOrder&&x.sort(o);for(let N=0,B=x.length;N<B;++N){const V=x[N];(!b||Jt(b,V.getGeometry().getExtent()))&&w.call(this,V)}const D=S.finish(),k=r.getRenderMode()!=="vector"&&u&&g.length===1?null:C,O=new Wf(k,a,t,c.getOverlaps(),D,r.getRenderBuffer());if(e.executorGroups[p].push(O),R){const N=new Wf(null,a,t,c.getOverlaps(),R.finish(),r.getRenderBuffer());e.declutterExecutorGroups[p].push(N)}}l.renderedRevision=s,l.renderedRenderOrder=o,l.renderedResolution=a}forEachFeatureAtCoordinate(e,t,n,r,s){const o=t.viewState.resolution,a=t.viewState.rotation;n=n??0;const l=this.getLayer(),u=l.getSource().getTileGridForProjection(t.viewState.projection),h=Fn([e]);Fr(h,o*n,h);const d={},f=function(m,v,y){let A=m.getId();A===void 0&&(A=ke(m));const _=d[A];if(_){if(_!==!0&&y<_.distanceSq){if(y===0)return d[A]=!0,s.splice(s.lastIndexOf(_),1),r(m,l,v);_.geometry=v,_.distanceSq=y}}else{if(y===0)return d[A]=!0,r(m,l,v);s.push(d[A]={feature:m,layer:l,geometry:v,distanceSq:y,callback:r})}},g=this.renderedTiles;let p;for(let m=0,v=g.length;!p&&m<v;++m){const y=g[m],A=u.getTileCoordExtent(y.wrappedTileCoord);if(!Jt(A,h))continue;const _=ke(l),C=[y.executorGroups[_]],I=y.declutterExecutorGroups[_];I&&C.push(I),C.some(b=>{const S=b===I?t.declutterTree.all().map(R=>R.value):null;for(let R=0,P=b.length;R<P;++R)if(p=b[R].forEachFeatureAtCoordinate(e,o,a,n,f,S),p)return!0})}return p}getFeatures(e){return new Promise((t,n)=>{const r=this.getLayer(),s=ke(r),o=r.getSource(),a=this.renderedProjection,l=a.getExtent(),c=this.renderedResolution,u=o.getTileGridForProjection(a),h=Gi(this.renderedPixelToCoordinateTransform_,e.slice()),d=u.getTileCoordForCoordAndResolution(h,c);let f;for(let A=0,_=this.renderedTiles.length;A<_;++A)if(d.toString()===this.renderedTiles[A].tileCoord.toString()){if(f=this.renderedTiles[A],f.getState()===ge.LOADED){const C=u.getTileCoordExtent(f.tileCoord);o.getWrapX()&&a.canWrapX()&&!Gr(l,C)&&Dv(h,a);break}f=void 0}if(!f||f.loadingSourceTiles>0){t([]);return}const g=u.getTileCoordExtent(f.wrappedTileCoord),p=ms(g),m=[(h[0]-p[0])/c,(p[1]-h[1])/c],v=f.getSourceTiles().reduce(function(A,_){return A.concat(_.getFeatures())},[]);let y=f.hitDetectionImageData[s];if(!y){const A=Sn(u.getTileSize(u.getZForResolution(c,o.zDirection))),_=this.renderedRotation_,C=[this.getRenderTransform(u.getTileCoordCenter(f.wrappedTileCoord),c,0,sr,A[0]*sr,A[1]*sr,0)];y=Qw(A,C,v,r.getStyleFunction(),u.getTileCoordExtent(f.wrappedTileCoord),f.getReplayState(r).renderedResolution,_),f.hitDetectionImageData[s]=y}t($w(m,v,y))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const t=this.context,n=t.globalAlpha;t.globalAlpha=this.getLayer().getOpacity();const r=e.viewHints,s=!(r[ai.ANIMATING]||r[ai.INTERACTING]),o=this.renderedTiles;for(let a=0,l=o.length;a<l;++a){const c=o[a],u=c.declutterExecutorGroups[ke(this.getLayer())];if(u)for(let h=u.length-1;h>=0;--h)u[h].execute(this.context,1,this.getTileRenderTransform(c,e),e.viewState.rotation,s,void 0,e.declutterTree)}t.globalAlpha=n}getTileRenderTransform(e,t){const n=t.pixelRatio,r=t.viewState,s=r.center,o=r.resolution,a=r.rotation,l=t.size,c=Math.round(l[0]*n),u=Math.round(l[1]*n),d=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),f=e.tileCoord,g=d.getTileCoordExtent(e.wrappedTileCoord),p=d.getTileCoordExtent(f,this.tmpExtent)[0]-g[0];return Zv(B0(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(s,o,a,n,c,u,p))}postRender(e,t){const n=t.viewHints,r=!(n[ai.ANIMATING]||n[ai.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;const s=this.getLayer(),o=s.getRenderMode(),a=e.globalAlpha;e.globalAlpha=s.getOpacity();const l=m8[o],c=t.viewState,u=c.rotation,h=s.getSource(),f=h.getTileGridForProjection(c.projection).getZForResolution(c.resolution,h.zDirection),g=this.renderedTiles,p=[],m=[];let v=!0;for(let y=g.length-1;y>=0;--y){const A=g[y];v=v&&!A.getReplayState(s).dirty;const _=A.executorGroups[ke(s)].filter(R=>R.hasExecutors(l));if(_.length===0)continue;const C=this.getTileRenderTransform(A,t),I=A.tileCoord[0];let b=!1;const S=_[0].getClipCoords(C);if(S){for(let R=0,P=p.length;R<P;++R)if(f!==I&&I<m[R]){const w=p[R];Jt([S[0],S[3],S[4],S[7]],[w[0],w[3],w[4],w[7]])&&(b||(e.save(),b=!0),e.beginPath(),e.moveTo(S[0],S[1]),e.lineTo(S[2],S[3]),e.lineTo(S[4],S[5]),e.lineTo(S[6],S[7]),e.moveTo(w[6],w[7]),e.lineTo(w[4],w[5]),e.lineTo(w[2],w[3]),e.lineTo(w[0],w[1]),e.clip())}p.push(S),m.push(I)}for(let R=0,P=_.length;R<P;++R)_[R].execute(e,1,C,u,r,l);b&&e.restore()}e.globalAlpha=a,this.ready=v,super.postRender(e,t)}renderFeature(e,t,n,r,s){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)o=Yf(r,e,n[a],t,this.boundHandleStyleImageChange_,void 0,s)||o;else o=Yf(r,e,n,t,this.boundHandleStyleImageChange_,void 0,s);return o}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const n=e.getReplayState(t),r=t.getRevision(),s=e.wantedResolution;return n.renderedTileResolution!==s||n.renderedTileRevision!==r}renderTileImage_(e,t){const n=this.getLayer(),r=e.getReplayState(n),s=n.getRevision(),o=e.executorGroups[ke(n)];r.renderedTileRevision=s;const a=e.wrappedTileCoord,l=a[0],c=n.getSource();let u=t.pixelRatio;const d=t.viewState.projection,f=c.getTileGridForProjection(d),g=f.getResolution(e.tileCoord[0]),p=t.pixelRatio/e.wantedResolution*g,m=f.getResolution(l),v=e.getContext(n);u=Math.round(Math.max(u,p/u));const y=c.getTilePixelSize(l,u,d);v.canvas.width=y[0],v.canvas.height=y[1];const A=u/p;if(A!==1){const b=cC(this.tmpTransform_);B0(b,A,A),v.setTransform.apply(v,b)}const _=f.getTileCoordExtent(a,this.tmpExtent),C=p/m,I=cC(this.tmpTransform_);B0(I,C,-C),uO(I,-_[0],-_[3]);for(let b=0,S=o.length;b<S;++b)o[b].execute(v,A,I,0,!0,p8[n.getRenderMode()]);r.renderedTileResolution=e.wantedResolution}}class Ma extends Kw{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un;const n=e.renderMode||"hybrid";vt(n=="hybrid"||n=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new v8(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(yo.PRELOAD)}getUseInterimTilesOnError(){return this.get(yo.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(yo.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(yo.USE_INTERIM_TILES_ON_ERROR,e)}}function y8(i,e,t,n){const r=document.createElement("script"),s="olc_"+ke(e);function o(){delete window[s],r.parentNode.removeChild(r)}r.async=!0,r.src=i+(i.includes("?")?"&":"?")+(n||"callback")+"="+s;const a=setTimeout(function(){o(),t&&t()},1e4);window[s]=function(l){clearTimeout(a),o(),e(l)},document.head.appendChild(r)}class jy extends $g{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:Re("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)y8(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let n;try{n=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(n)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=Re("EPSG:4326"),n=this.getProjection();let r;if(e.bounds!==void 0){const c=Zg(t,n);r=Lv(e.bounds,c)}const s=Uh(n),o=e.minzoom||0,a=e.maxzoom||22,l=Jg({extent:s,maxZoom:a,minZoom:o,tileSize:this.tileSize_});if(this.tileGrid=l,this.tileUrlFunction=Z1(e.tiles,l),e.attribution&&!this.getAttributions()){const c=r!==void 0?r:s;this.setAttributions(function(u){return Jt(c,u.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}var zy={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */zy.read=function(i,e,t,n,r){var s,o,a=r*8-n-1,l=(1<<a)-1,c=l>>1,u=-7,h=t?r-1:0,d=t?-1:1,f=i[e+h];for(h+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=s*256+i[e+h],h+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=n;u>0;o=o*256+i[e+h],h+=d,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(f?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(f?-1:1)*o*Math.pow(2,s-n)};zy.write=function(i,e,t,n,r,s){var o,a,l,c=s*8-r-1,u=(1<<c)-1,h=u>>1,d=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,f=n?0:s-1,g=n?1:-1,p=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=d/l:e+=d*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*l-1)*Math.pow(2,r),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;i[t+f]=a&255,f+=g,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;i[t+f]=o&255,f+=g,o/=256,c-=8);i[t+f-g]|=p*128};var A8=Pt,xd=zy;function Pt(i){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(i)?i:new Uint8Array(i||0),this.pos=0,this.type=0,this.length=this.buf.length}Pt.Varint=0;Pt.Fixed64=1;Pt.Bytes=2;Pt.Fixed32=5;var Om=65536*65536,KC=1/Om,_8=12,qb=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Pt.prototype={destroy:function(){this.buf=null},readFields:function(i,e,t){for(t=t||this.length;this.pos<t;){var n=this.readVarint(),r=n>>3,s=this.pos;this.type=n&7,i(r,e,this),this.pos===s&&this.skip(n)}return e},readMessage:function(i,e){return this.readFields(i,e,this.readVarint()+this.pos)},readFixed32:function(){var i=Pd(this.buf,this.pos);return this.pos+=4,i},readSFixed32:function(){var i=QC(this.buf,this.pos);return this.pos+=4,i},readFixed64:function(){var i=Pd(this.buf,this.pos)+Pd(this.buf,this.pos+4)*Om;return this.pos+=8,i},readSFixed64:function(){var i=Pd(this.buf,this.pos)+QC(this.buf,this.pos+4)*Om;return this.pos+=8,i},readFloat:function(){var i=xd.read(this.buf,this.pos,!0,23,4);return this.pos+=4,i},readDouble:function(){var i=xd.read(this.buf,this.pos,!0,52,8);return this.pos+=8,i},readVarint:function(i){var e=this.buf,t,n;return n=e[this.pos++],t=n&127,n<128||(n=e[this.pos++],t|=(n&127)<<7,n<128)||(n=e[this.pos++],t|=(n&127)<<14,n<128)||(n=e[this.pos++],t|=(n&127)<<21,n<128)?t:(n=e[this.pos],t|=(n&15)<<28,C8(t,i,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var i=this.readVarint();return i%2===1?(i+1)/-2:i/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var i=this.readVarint()+this.pos,e=this.pos;return this.pos=i,i-e>=_8&&qb?D8(this.buf,e,i):O8(this.buf,e,i)},readBytes:function(){var i=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,i);return this.pos=i,e},readPackedVarint:function(i,e){if(this.type!==Pt.Bytes)return i.push(this.readVarint(e));var t=Cs(this);for(i=i||[];this.pos<t;)i.push(this.readVarint(e));return i},readPackedSVarint:function(i){if(this.type!==Pt.Bytes)return i.push(this.readSVarint());var e=Cs(this);for(i=i||[];this.pos<e;)i.push(this.readSVarint());return i},readPackedBoolean:function(i){if(this.type!==Pt.Bytes)return i.push(this.readBoolean());var e=Cs(this);for(i=i||[];this.pos<e;)i.push(this.readBoolean());return i},readPackedFloat:function(i){if(this.type!==Pt.Bytes)return i.push(this.readFloat());var e=Cs(this);for(i=i||[];this.pos<e;)i.push(this.readFloat());return i},readPackedDouble:function(i){if(this.type!==Pt.Bytes)return i.push(this.readDouble());var e=Cs(this);for(i=i||[];this.pos<e;)i.push(this.readDouble());return i},readPackedFixed32:function(i){if(this.type!==Pt.Bytes)return i.push(this.readFixed32());var e=Cs(this);for(i=i||[];this.pos<e;)i.push(this.readFixed32());return i},readPackedSFixed32:function(i){if(this.type!==Pt.Bytes)return i.push(this.readSFixed32());var e=Cs(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed32());return i},readPackedFixed64:function(i){if(this.type!==Pt.Bytes)return i.push(this.readFixed64());var e=Cs(this);for(i=i||[];this.pos<e;)i.push(this.readFixed64());return i},readPackedSFixed64:function(i){if(this.type!==Pt.Bytes)return i.push(this.readSFixed64());var e=Cs(this);for(i=i||[];this.pos<e;)i.push(this.readSFixed64());return i},skip:function(i){var e=i&7;if(e===Pt.Varint)for(;this.buf[this.pos++]>127;);else if(e===Pt.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Pt.Fixed32)this.pos+=4;else if(e===Pt.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(i,e){this.writeVarint(i<<3|e)},realloc:function(i){for(var e=this.length||16;e<this.pos+i;)e*=2;if(e!==this.length){var t=new Uint8Array(e);t.set(this.buf),this.buf=t,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(i){this.realloc(4),hl(this.buf,i,this.pos),this.pos+=4},writeSFixed32:function(i){this.realloc(4),hl(this.buf,i,this.pos),this.pos+=4},writeFixed64:function(i){this.realloc(8),hl(this.buf,i&-1,this.pos),hl(this.buf,Math.floor(i*KC),this.pos+4),this.pos+=8},writeSFixed64:function(i){this.realloc(8),hl(this.buf,i&-1,this.pos),hl(this.buf,Math.floor(i*KC),this.pos+4),this.pos+=8},writeVarint:function(i){if(i=+i||0,i>268435455||i<0){I8(i,this);return}this.realloc(4),this.buf[this.pos++]=i&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=(i>>>=7)&127|(i>127?128:0),!(i<=127)&&(this.buf[this.pos++]=i>>>7&127)))},writeSVarint:function(i){this.writeVarint(i<0?-i*2-1:i*2)},writeBoolean:function(i){this.writeVarint(!!i)},writeString:function(i){i=String(i),this.realloc(i.length*4),this.pos++;var e=this.pos;this.pos=k8(this.buf,i,this.pos);var t=this.pos-e;t>=128&&JC(e,t,this),this.pos=e-1,this.writeVarint(t),this.pos+=t},writeFloat:function(i){this.realloc(4),xd.write(this.buf,i,this.pos,!0,23,4),this.pos+=4},writeDouble:function(i){this.realloc(8),xd.write(this.buf,i,this.pos,!0,52,8),this.pos+=8},writeBytes:function(i){var e=i.length;this.writeVarint(e),this.realloc(e);for(var t=0;t<e;t++)this.buf[this.pos++]=i[t]},writeRawMessage:function(i,e){this.pos++;var t=this.pos;i(e,this);var n=this.pos-t;n>=128&&JC(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeMessage:function(i,e,t){this.writeTag(i,Pt.Bytes),this.writeRawMessage(e,t)},writePackedVarint:function(i,e){e.length&&this.writeMessage(i,b8,e)},writePackedSVarint:function(i,e){e.length&&this.writeMessage(i,S8,e)},writePackedBoolean:function(i,e){e.length&&this.writeMessage(i,M8,e)},writePackedFloat:function(i,e){e.length&&this.writeMessage(i,x8,e)},writePackedDouble:function(i,e){e.length&&this.writeMessage(i,P8,e)},writePackedFixed32:function(i,e){e.length&&this.writeMessage(i,R8,e)},writePackedSFixed32:function(i,e){e.length&&this.writeMessage(i,T8,e)},writePackedFixed64:function(i,e){e.length&&this.writeMessage(i,L8,e)},writePackedSFixed64:function(i,e){e.length&&this.writeMessage(i,G8,e)},writeBytesField:function(i,e){this.writeTag(i,Pt.Bytes),this.writeBytes(e)},writeFixed32Field:function(i,e){this.writeTag(i,Pt.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(i,e){this.writeTag(i,Pt.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(i,e){this.writeTag(i,Pt.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(i,e){this.writeTag(i,Pt.Fixed64),this.writeSFixed64(e)},writeVarintField:function(i,e){this.writeTag(i,Pt.Varint),this.writeVarint(e)},writeSVarintField:function(i,e){this.writeTag(i,Pt.Varint),this.writeSVarint(e)},writeStringField:function(i,e){this.writeTag(i,Pt.Bytes),this.writeString(e)},writeFloatField:function(i,e){this.writeTag(i,Pt.Fixed32),this.writeFloat(e)},writeDoubleField:function(i,e){this.writeTag(i,Pt.Fixed64),this.writeDouble(e)},writeBooleanField:function(i,e){this.writeVarintField(i,!!e)}};function C8(i,e,t){var n=t.buf,r,s;if(s=n[t.pos++],r=(s&112)>>4,s<128||(s=n[t.pos++],r|=(s&127)<<3,s<128)||(s=n[t.pos++],r|=(s&127)<<10,s<128)||(s=n[t.pos++],r|=(s&127)<<17,s<128)||(s=n[t.pos++],r|=(s&127)<<24,s<128)||(s=n[t.pos++],r|=(s&1)<<31,s<128))return ul(i,r,e);throw new Error("Expected varint not more than 10 bytes")}function Cs(i){return i.type===Pt.Bytes?i.readVarint()+i.pos:i.pos+1}function ul(i,e,t){return t?e*4294967296+(i>>>0):(e>>>0)*4294967296+(i>>>0)}function I8(i,e){var t,n;if(i>=0?(t=i%4294967296|0,n=i/4294967296|0):(t=~(-i%4294967296),n=~(-i/4294967296),t^4294967295?t=t+1|0:(t=0,n=n+1|0)),i>=18446744073709552e3||i<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),E8(t,n,e),w8(n,e)}function E8(i,e,t){t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos++]=i&127|128,i>>>=7,t.buf[t.pos]=i&127}function w8(i,e){var t=(i&7)<<4;e.buf[e.pos++]|=t|((i>>>=3)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127|((i>>>=7)?128:0),i&&(e.buf[e.pos++]=i&127)))))}function JC(i,e,t){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(n);for(var r=t.pos-1;r>=i;r--)t.buf[r+n]=t.buf[r]}function b8(i,e){for(var t=0;t<i.length;t++)e.writeVarint(i[t])}function S8(i,e){for(var t=0;t<i.length;t++)e.writeSVarint(i[t])}function x8(i,e){for(var t=0;t<i.length;t++)e.writeFloat(i[t])}function P8(i,e){for(var t=0;t<i.length;t++)e.writeDouble(i[t])}function M8(i,e){for(var t=0;t<i.length;t++)e.writeBoolean(i[t])}function R8(i,e){for(var t=0;t<i.length;t++)e.writeFixed32(i[t])}function T8(i,e){for(var t=0;t<i.length;t++)e.writeSFixed32(i[t])}function L8(i,e){for(var t=0;t<i.length;t++)e.writeFixed64(i[t])}function G8(i,e){for(var t=0;t<i.length;t++)e.writeSFixed64(i[t])}function Pd(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+i[e+3]*16777216}function hl(i,e,t){i[t]=e,i[t+1]=e>>>8,i[t+2]=e>>>16,i[t+3]=e>>>24}function QC(i,e){return(i[e]|i[e+1]<<8|i[e+2]<<16)+(i[e+3]<<24)}function O8(i,e,t){for(var n="",r=e;r<t;){var s=i[r],o=null,a=s>239?4:s>223?3:s>191?2:1;if(r+a>t)break;var l,c,u;a===1?s<128&&(o=s):a===2?(l=i[r+1],(l&192)===128&&(o=(s&31)<<6|l&63,o<=127&&(o=null))):a===3?(l=i[r+1],c=i[r+2],(l&192)===128&&(c&192)===128&&(o=(s&15)<<12|(l&63)<<6|c&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):a===4&&(l=i[r+1],c=i[r+2],u=i[r+3],(l&192)===128&&(c&192)===128&&(u&192)===128&&(o=(s&15)<<18|(l&63)<<12|(c&63)<<6|u&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,a=1):o>65535&&(o-=65536,n+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),n+=String.fromCharCode(o),r+=a}return n}function D8(i,e,t){return qb.decode(i.subarray(e,t))}function k8(i,e,t){for(var n=0,r,s;n<e.length;n++){if(r=e.charCodeAt(n),r>55295&&r<57344)if(s)if(r<56320){i[t++]=239,i[t++]=191,i[t++]=189,s=r;continue}else r=s-55296<<10|r-56320|65536,s=null;else{r>56319||n+1===e.length?(i[t++]=239,i[t++]=191,i[t++]=189):s=r;continue}else s&&(i[t++]=239,i[t++]=191,i[t++]=189,s=null);r<128?i[t++]=r:(r<2048?i[t++]=r>>6|192:(r<65536?i[t++]=r>>12|224:(i[t++]=r>>18|240,i[t++]=r>>12&63|128),i[t++]=r>>6&63|128),i[t++]=r&63|128)}return t}const F8=by(A8);class lg extends xy{constructor(e){super(),e=e||{},this.dataProjection=new Xg({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:qi,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,n,r){e.pos=t.geometry;const s=e.readVarint()+e.pos;let o=1,a=0,l=0,c=0,u=0,h=0;for(;e.pos<s;){if(!a){const d=e.readVarint();o=d&7,a=d>>3}if(a--,o===1||o===2)l+=e.readSVarint(),c+=e.readSVarint(),o===1&&u>h&&(r.push(u),h=u),n.push(l,c),u+=2;else if(o===7)u>h&&(n.push(n[h],n[h+1]),u+=2);else throw new Error("Invalid command found in the PBF")}u>h&&(r.push(u),h=u)}createFeature_(e,t,n){const r=t.type;if(r===0)return null;let s;const o=t.properties;let a;this.idProperty_?(a=o[this.idProperty_],delete o[this.idProperty_]):a=t.id,o[this.layerName_]=t.layer.name;const l=[],c=[];this.readRawGeometry_(e,t,l,c);const u=z8(r,c.length);if(this.featureClass_===qi)s=new this.featureClass_(u,l,c,2,o,a),s.transform(n.dataProjection);else{let h;if(u=="Polygon"){const g=cw(l,c);h=g.length>1?new jr(l,"XY",g):new wi(l,"XY",c)}else h=u==="Point"?new Ki(l,"XY"):u==="LineString"?new Ji(l,"XY"):u==="MultiPoint"?new Us(l,"XY"):u==="MultiLineString"?new hr(l,"XY",c):null;const d=this.featureClass_;s=new d,this.geometryName_&&s.setGeometryName(this.geometryName_);const f=br(h,!1,n);s.setGeometry(f),a!==void 0&&s.setId(a),s.setProperties(o,!0)}return s}getType(){return"arraybuffer"}readFeatures(e,t){const n=this.layers_;t=this.adaptOptions(t);const r=Re(t.dataProjection);r.setWorldExtent(t.extent),t.dataProjection=r;const s=new F8(e),o=s.readFields(N8,{}),a=[];for(const l in o){if(n&&!n.includes(l))continue;const c=o[l],u=c?[0,0,c.extent,c.extent]:null;r.setExtent(u);for(let h=0,d=c.length;h<d;++h){const f=j8(s,c,h),g=this.createFeature_(s,f,t);g!==null&&a.push(g)}}return a}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function N8(i,e,t){if(i===3){const n={keys:[],values:[],features:[]},r=t.readVarint()+t.pos;t.readFields(U8,n,r),n.length=n.features.length,n.length&&(e[n.name]=n)}}function U8(i,e,t){if(i===15)e.version=t.readVarint();else if(i===1)e.name=t.readString();else if(i===5)e.extent=t.readVarint();else if(i===2)e.features.push(t.pos);else if(i===3)e.keys.push(t.readString());else if(i===4){let n=null;const r=t.readVarint()+t.pos;for(;t.pos<r;)i=t.readVarint()>>3,n=i===1?t.readString():i===2?t.readFloat():i===3?t.readDouble():i===4?t.readVarint64():i===5?t.readVarint():i===6?t.readSVarint():i===7?t.readBoolean():null;e.values.push(n)}}function B8(i,e,t){if(i==1)e.id=t.readVarint();else if(i==2){const n=t.readVarint()+t.pos;for(;t.pos<n;){const r=e.layer.keys[t.readVarint()],s=e.layer.values[t.readVarint()];e.properties[r]=s}}else i==3?e.type=t.readVarint():i==4&&(e.geometry=t.pos)}function j8(i,e,t){i.pos=e.features[t];const n=i.readVarint()+i.pos,r={layer:e,type:0,properties:{}};return i.readFields(B8,r,n),r}function z8(i,e){let t;return i===1?t=e===1?"Point":"MultiPoint":i===2?t=e===1?"LineString":"MultiLineString":i===3&&(t="Polygon"),t}function Xb(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var V8={},Zb,$C={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Fu(i){return i=Math.round(i),i<0?0:i>255?255:i}function eI(i){return i<0?0:i>1?1:i}function cp(i){return i[i.length-1]==="%"?Fu(parseFloat(i)/100*255):Fu(parseInt(i))}function Md(i){return i[i.length-1]==="%"?eI(parseFloat(i)/100):eI(parseFloat(i))}function up(i,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?i+(e-i)*t*6:t*2<1?e:t*3<2?i+(e-i)*(2/3-t)*6:i}function W8(i){var e=i.replace(/ /g,"").toLowerCase();if(e in $C)return $C[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var n=e.indexOf("("),r=e.indexOf(")");if(n!==-1&&r+1===e.length){var s=e.substr(0,n),o=e.substr(n+1,r-(n+1)).split(","),a=1;switch(s){case"rgba":if(o.length!==4)return null;a=Md(o.pop());case"rgb":return o.length!==3?null:[cp(o[0]),cp(o[1]),cp(o[2]),a];case"hsla":if(o.length!==4)return null;a=Md(o.pop());case"hsl":if(o.length!==3)return null;var l=(parseFloat(o[0])%360+360)%360/360,c=Md(o[1]),u=Md(o[2]),h=u<=.5?u*(c+1):u+c-u*c,d=u*2-h;return[Fu(up(d,h,l+1/3)*255),Fu(up(d,h,l)*255),Fu(up(d,h,l-1/3)*255),a];default:return null}}return null}try{Zb=V8.parseCSSColor=W8}catch{}class qn{constructor(e,t,n,r=1){this.r=e,this.g=t,this.b=n,this.a=r}static parse(e){if(!e)return;if(e instanceof qn)return e;if(typeof e!="string")return;const t=Zb(e);if(t)return new qn(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,n,r]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(n)},${r})`}toArray(){const{r:e,g:t,b:n,a:r}=this;return r===0?[0,0,0,0]:[e*255/r,t*255/r,n*255/r,r]}toArray01(){const{r:e,g:t,b:n,a:r}=this;return r===0?[0,0,0,0]:[e/r,t/r,n/r,r]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:n,a:r}=this;return[e,t,n,r]}}qn.black=new qn(0,0,0,1);qn.white=new qn(1,1,1,1);qn.transparent=new qn(0,0,0,0);qn.red=new qn(1,0,0,1);qn.blue=new qn(0,0,1,1);var dr=qn;function Ih(i){return typeof i=="object"?["literal",i]:i}function Y8(i,e){let t=i.stops;if(!t)return H8(i,e);const n=t&&typeof t[0][0]=="object",r=n||i.property!==void 0,s=n||!r;return t=t.map(o=>!r&&e.tokens&&typeof o[1]=="string"?[o[0],K8(o[1])]:[o[0],Ih(o[1])]),n?q8(i,e,t):s?Z8(i,e,t):Dm(i,e,t)}function H8(i,e){const t=["get",i.property];if(i.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,i.default];{const n=[e.type==="color"?"to-color":e.type,t,Ih(i.default)];return e.type==="array"&&n.splice(1,0,e.value,e.length||null),n}}function Vy(i){switch(i.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function q8(i,e,t){const n={},r={},s=[];for(let a=0;a<t.length;a++){const l=t[a],c=l[0].zoom;n[c]===void 0&&(n[c]={zoom:c,type:i.type,property:i.property,default:i.default},r[c]=[],s.push(c)),r[c].push([l[0].value,l[1]])}if(Yy({},e)==="exponential"){const a=[Vy(i),["linear"],["zoom"]];for(const l of s){const c=Dm(n[l],e,r[l]);Kl(a,l,c,!1)}return a}else{const a=["step",["zoom"]];for(const l of s){const c=Dm(n[l],e,r[l]);Kl(a,l,c,!0)}return Wy(a),a}}function X8(i,e){if(i!==void 0)return i;if(e!==void 0)return e}function tI(i,e){const t=Ih(X8(i.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function Dm(i,e,t){const n=Yy(i,e),r=["get",i.property];if(n==="categorical"&&typeof t[0][0]=="boolean"){const s=["case"];for(const o of t)s.push(["==",r,o[0]],o[1]);return s.push(tI(i,e)),s}else if(n==="categorical"){const s=["match",r];for(const o of t)Kl(s,o[0],o[1],!1);return s.push(tI(i,e)),s}else if(n==="interval"){const s=["step",["number",r]];for(const o of t)Kl(s,o[0],o[1],!0);return Wy(s),i.default===void 0?s:["case",["==",["typeof",r],"number"],s,Ih(i.default)]}else if(n==="exponential"){const s=i.base!==void 0?i.base:1,o=[Vy(i),s===1?["linear"]:["exponential",s],["number",r]];for(const a of t)Kl(o,a[0],a[1],!1);return i.default===void 0?o:["case",["==",["typeof",r],"number"],o,Ih(i.default)]}else throw new Error(`Unknown property function type ${n}`)}function Z8(i,e,t,n=["zoom"]){const r=Yy(i,e);let s,o=!1;if(r==="interval")s=["step",n],o=!0;else if(r==="exponential"){const a=i.base!==void 0?i.base:1;s=[Vy(i),a===1?["linear"]:["exponential",a],n]}else throw new Error(`Unknown zoom function type "${r}"`);for(const a of t)Kl(s,a[0],a[1],o);return Wy(s),s}function Wy(i){i[0]==="step"&&i.length===3&&(i.push(0),i.push(i[3]))}function Kl(i,e,t,n){i.length>3&&e===i[i.length-2]||(n&&i.length===2||i.push(e),i.push(t))}function Yy(i,e){return i.type?i.type:e.expression.interpolated?"exponential":"interval"}function K8(i){const e=["concat"],t=/{([^{}]+)}/g;let n=0;for(let r=t.exec(i);r!==null;r=t.exec(i)){const s=i.slice(n,t.lastIndex-r[0].length);n=t.lastIndex,s.length>0&&e.push(s),e.push(["get",r[1]])}if(e.length===1)return i;if(n<i.length)e.push(i.slice(n));else if(e.length===2)return["to-string",e[1]];return e}class J8 extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var es=J8;class Hy{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[n,r]of t)this.bindings[n]=r}concat(e){return new Hy(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Q8=Hy;const h0={kind:"null"},he={kind:"number"},st={kind:"string"},it={kind:"boolean"},Ds={kind:"color"},Jl={kind:"object"},nt={kind:"value"},$8={kind:"error"},d0={kind:"collator"},f0={kind:"formatted"},Wh={kind:"resolvedImage"};function Ar(i,e){return{kind:"array",itemType:i,N:e}}function $t(i){if(i.kind==="array"){const e=$t(i.itemType);return typeof i.N=="number"?`array<${e}, ${i.N}>`:i.itemType.kind==="value"?"array":`array<${e}>`}else return i.kind}const e5=[h0,he,st,it,Ds,f0,Jl,Ar(nt),Wh];function Eh(i,e){if(e.kind==="error")return null;if(i.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!Eh(i.itemType,e.itemType))&&(typeof i.N!="number"||i.N===e.N))return null}else{if(i.kind===e.kind)return null;if(i.kind==="value"){for(const t of e5)if(!Eh(t,e))return null}}return`Expected ${$t(i)} but found ${$t(e)} instead.`}function qy(i,e){return e.some(t=>t.kind===i.kind)}function wh(i,e){return e.some(t=>t==="null"?i===null:t==="array"?Array.isArray(i):t==="object"?i&&!Array.isArray(i)&&typeof i=="object":t===typeof i)}class Xy{constructor(e,t,n){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class km{constructor(e,t,n,r,s){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=n,this.fontStack=r,this.textColor=s}}class os{constructor(e){this.sections=e}static fromString(e){return new os([new km(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof os?e:os.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const n={};t.fontStack&&(n["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(n["font-scale"]=t.scale),t.textColor&&(n["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(n)}return e}}class Zo{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new Zo({name:e,available:!1}):null}serialize(){return["image",this.name]}}function Kb(i,e,t,n){return typeof i=="number"&&i>=0&&i<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof n>"u"||typeof n=="number"&&n>=0&&n<=1?null:`Invalid rgba value [${[i,e,t,n].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof n=="number"?[i,e,t,n]:[i,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function cg(i){if(i===null)return!0;if(typeof i=="string")return!0;if(typeof i=="boolean")return!0;if(typeof i=="number")return!0;if(i instanceof dr)return!0;if(i instanceof Xy)return!0;if(i instanceof os)return!0;if(i instanceof Zo)return!0;if(Array.isArray(i)){for(const e of i)if(!cg(e))return!1;return!0}else if(typeof i=="object"){for(const e in i)if(!cg(i[e]))return!1;return!0}else return!1}function Oi(i){if(i===null)return h0;if(typeof i=="string")return st;if(typeof i=="boolean")return it;if(typeof i=="number")return he;if(i instanceof dr)return Ds;if(i instanceof Xy)return d0;if(i instanceof os)return f0;if(i instanceof Zo)return Wh;if(Array.isArray(i)){const e=i.length;let t;for(const n of i){const r=Oi(n);if(!t)t=r;else{if(t===r)continue;t=nt;break}}return Ar(t||nt,e)}else return Jl}function Nu(i){const e=typeof i;return i===null?"":e==="string"||e==="number"||e==="boolean"?String(i):i instanceof dr||i instanceof os||i instanceof Zo?i.toString():JSON.stringify(i)}class Zy{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!cg(e[1]))return t.error("invalid value");const n=e[1];let r=Oi(n);const s=t.expectedType;return r.kind==="array"&&r.N===0&&s&&s.kind==="array"&&(typeof s.N!="number"||s.N===0)&&(r=s),new Zy(r,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof dr?["rgba"].concat(this.value.toArray()):this.value instanceof os?this.value.serialize():this.value}}var ug=Zy;class t5{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var Qi=t5;const hp={string:st,number:he,boolean:it,object:Jl};class Ky{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let n=1,r;const s=e[0];if(s==="array"){let a;if(e.length>2){const c=e[1];if(typeof c!="string"||!(c in hp)||c==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);a=hp[c],n++}else a=nt;let l;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);l=e[2],n++}r=Ar(a,l)}else r=hp[s];const o=[];for(;n<e.length;n++){const a=t.parse(e[n],n,nt);if(!a)return null;o.push(a)}return new Ky(r,o)}evaluate(e){for(let t=0;t<this.args.length;t++){const n=this.args[t].evaluate(e);if(Eh(this.type,Oi(n))){if(t===this.args.length-1)throw new Qi(`Expected value to be of type ${$t(this.type)}, but found ${$t(Oi(n))} instead.`)}else return n}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const n=e.itemType;if(n.kind==="string"||n.kind==="number"||n.kind==="boolean"){t.push(n.kind);const r=e.N;(typeof r=="number"||this.args.length>1)&&t.push(r)}}return t.concat(this.args.map(n=>n.serialize()))}}var bs=Ky;class g0{constructor(e){this.type=f0,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[1];if(!Array.isArray(n)&&typeof n=="object")return t.error("First argument must be an image or text section.");const r=[];let s=!1;for(let o=1;o<=e.length-1;++o){const a=e[o];if(s&&typeof a=="object"&&!Array.isArray(a)){s=!1;let l=null;if(a["font-scale"]&&(l=t.parse(a["font-scale"],1,he),!l))return null;let c=null;if(a["text-font"]&&(c=t.parse(a["text-font"],1,Ar(st)),!c))return null;let u=null;if(a["text-color"]&&(u=t.parse(a["text-color"],1,Ds),!u))return null;const h=r[r.length-1];h.scale=l,h.font=c,h.textColor=u}else{const l=t.parse(e[o],1,nt);if(!l)return null;const c=l.type.kind;if(c!=="string"&&c!=="value"&&c!=="null"&&c!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");s=!0,r.push({content:l,scale:null,font:null,textColor:null})}}return new g0(r)}evaluate(e){const t=n=>{const r=n.content.evaluate(e);return Oi(r)===Wh?new km("",r,null,null,null):new km(Nu(r),null,n.scale?n.scale.evaluate(e):null,n.font?n.font.evaluate(e).join(","):null,n.textColor?n.textColor.evaluate(e):null)};return new os(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const n={};t.scale&&(n["font-scale"]=t.scale.serialize()),t.font&&(n["text-font"]=t.font.serialize()),t.textColor&&(n["text-color"]=t.textColor.serialize()),e.push(n)}return e}}class p0{constructor(e){this.type=Wh,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const n=t.parse(e[1],1,st);return n?new p0(n):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),n=Zo.fromString(t);return n&&e.availableImages&&(n.available=e.availableImages.indexOf(t)>-1),n}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const i5={"to-boolean":it,"to-color":Ds,"to-number":he,"to-string":st};class Jy{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const n=e[0];if((n==="to-boolean"||n==="to-string")&&e.length!==2)return t.error("Expected one argument.");const r=i5[n],s=[];for(let o=1;o<e.length;o++){const a=t.parse(e[o],o,nt);if(!a)return null;s.push(a)}return new Jy(r,s)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,n;for(const r of this.args){if(t=r.evaluate(e),n=null,t instanceof dr)return t;if(typeof t=="string"){const s=e.parseColor(t);if(s)return s}else if(Array.isArray(t)&&(t.length<3||t.length>4?n=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:n=Kb(t[0],t[1],t[2],t[3]),!n))return new dr(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new Qi(n||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const n of this.args){if(t=n.evaluate(e),t===null)return 0;const r=Number(t);if(!isNaN(r))return r}throw new Qi(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?os.fromString(Nu(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?Zo.fromString(Nu(this.args[0].evaluate(e))):Nu(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new g0([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new p0(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Tl=Jy;const n5=["Unknown","Point","LineString","Polygon"];class r5{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?n5[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:n,y:r}=this.featureTileCoord,s=n*t-e[0],o=r*t-e[1],a=this.featureDistanceData.bearing[0],l=this.featureDistanceData.bearing[1];return a*s+l*o}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=dr.parse(e)),t}}var Jb=r5;class Ll{constructor(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const n=e[0],r=Ll.definitions[n];if(!r)return t.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const s=Array.isArray(r)?r[0]:r.type,o=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,a=o.filter(([c])=>!Array.isArray(c)||c.length===e.length-1);let l=null;for(const[c,u]of a){l=new iS(t.registry,t.path,null,t.scope);const h=[];let d=!1;for(let f=1;f<e.length;f++){const g=e[f],p=Array.isArray(c)?c[f-1]:c.type,m=l.parse(g,1+h.length,p);if(!m){d=!0;break}h.push(m)}if(!d){if(Array.isArray(c)&&c.length!==h.length){l.error(`Expected ${c.length} arguments, but found ${h.length} instead.`);continue}for(let f=0;f<h.length;f++){const g=Array.isArray(c)?c[f]:c.type,p=h[f];l.concat(f+1).checkSubtype(g,p.type)}if(l.errors.length===0)return new Ll(n,s,u,h)}}if(a.length===1)t.errors.push(...l.errors);else{const u=(a.length?a:o).map(([d])=>s5(d)).join(" | "),h=[];for(let d=1;d<e.length;d++){const f=t.parse(e[d],1+h.length);if(!f)return null;h.push($t(f.type))}t.error(`Expected arguments of type ${u}, but found (${h.join(", ")}) instead.`)}return null}static register(e,t){Ll.definitions=t;for(const n in t)e[n]=Ll}}function s5(i){return Array.isArray(i)?`(${i.map($t).join(", ")})`:`(${$t(i.type)}...)`}var Bc=Ll;class m0{constructor(e,t,n){this.type=d0,this.locale=n,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const n=e[1];if(typeof n!="object"||Array.isArray(n))return t.error("Collator options argument must be an object.");const r=t.parse(n["case-sensitive"]===void 0?!1:n["case-sensitive"],1,it);if(!r)return null;const s=t.parse(n["diacritic-sensitive"]===void 0?!1:n["diacritic-sensitive"],1,it);if(!s)return null;let o=null;return n.locale&&(o=t.parse(n.locale,1,st),!o)?null:new m0(r,s,o)}evaluate(e){return new Xy(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const Mo=8192;function Qy(i,e){i[0]=Math.min(i[0],e[0]),i[1]=Math.min(i[1],e[1]),i[2]=Math.max(i[2],e[0]),i[3]=Math.max(i[3],e[1])}function o5(i){return(180+i)/360}function a5(i){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+i*Math.PI/360)))/360}function hg(i,e){return!(i[0]<=e[0]||i[2]>=e[2]||i[1]<=e[1]||i[3]>=e[3])}function l5(i,e){const t=o5(i[0]),n=a5(i[1]),r=Math.pow(2,e.z);return[Math.round(t*r*Mo),Math.round(n*r*Mo)]}function c5(i,e,t){const n=i[0]-e[0],r=i[1]-e[1],s=i[0]-t[0],o=i[1]-t[1];return n*o-s*r===0&&n*s<=0&&r*o<=0}function u5(i,e,t){return e[1]>i[1]!=t[1]>i[1]&&i[0]<(t[0]-e[0])*(i[1]-e[1])/(t[1]-e[1])+e[0]}function $y(i,e){let t=!1;for(let n=0,r=e.length;n<r;n++){const s=e[n];for(let o=0,a=s.length;o<a-1;o++){if(c5(i,s[o],s[o+1]))return!1;u5(i,s[o],s[o+1])&&(t=!t)}}return t}function h5(i,e){for(let t=0;t<e.length;t++)if($y(i,e[t]))return!0;return!1}function d5(i,e){return i[0]*e[1]-i[1]*e[0]}function iI(i,e,t,n){const r=i[0]-t[0],s=i[1]-t[1],o=e[0]-t[0],a=e[1]-t[1],l=n[0]-t[0],c=n[1]-t[1],u=r*c-l*s,h=o*c-l*a;return u>0&&h<0||u<0&&h>0}function f5(i,e,t,n){const r=[e[0]-i[0],e[1]-i[1]],s=[n[0]-t[0],n[1]-t[1]];return d5(s,r)===0?!1:!!(iI(i,e,t,n)&&iI(t,n,i,e))}function g5(i,e,t){for(const n of t)for(let r=0;r<n.length-1;++r)if(f5(i,e,n[r],n[r+1]))return!0;return!1}function Qb(i,e){for(let t=0;t<i.length;++t)if(!$y(i[t],e))return!1;for(let t=0;t<i.length-1;++t)if(g5(i[t],i[t+1],e))return!1;return!0}function p5(i,e){for(let t=0;t<e.length;t++)if(Qb(i,e[t]))return!0;return!1}function eA(i,e,t){const n=[];for(let r=0;r<i.length;r++){const s=[];for(let o=0;o<i[r].length;o++){const a=l5(i[r][o],t);Qy(e,a),s.push(a)}n.push(s)}return n}function $b(i,e,t){const n=[];for(let r=0;r<i.length;r++){const s=eA(i[r],e,t);n.push(s)}return n}function eS(i,e,t,n){if(i[0]<t[0]||i[0]>t[2]){const r=n*.5;let s=i[0]-t[0]>r?-n:t[0]-i[0]>r?n:0;s===0&&(s=i[0]-t[2]>r?-n:t[2]-i[0]>r?n:0),i[0]+=s}Qy(e,i)}function m5(i){i[0]=i[1]=1/0,i[2]=i[3]=-1/0}function nI(i,e,t,n){const r=Math.pow(2,n.z)*Mo,s=[n.x*Mo,n.y*Mo],o=[];if(!i)return o;for(const a of i)for(const l of a){const c=[l.x+s[0],l.y+s[1]];eS(c,e,t,r),o.push(c)}return o}function rI(i,e,t,n){const r=Math.pow(2,n.z)*Mo,s=[n.x*Mo,n.y*Mo],o=[];if(!i)return o;for(const a of i){const l=[];for(const c of a){const u=[c.x+s[0],c.y+s[1]];Qy(e,u),l.push(u)}o.push(l)}if(e[2]-e[0]<=r/2){m5(e);for(const a of o)for(const l of a)eS(l,e,t,r)}return o}function v5(i,e){const t=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=i.canonicalID();if(!r)return!1;if(e.type==="Polygon"){const s=eA(e.coordinates,n,r),o=nI(i.geometry(),t,n,r);if(!hg(t,n))return!1;for(const a of o)if(!$y(a,s))return!1}if(e.type==="MultiPolygon"){const s=$b(e.coordinates,n,r),o=nI(i.geometry(),t,n,r);if(!hg(t,n))return!1;for(const a of o)if(!h5(a,s))return!1}return!0}function y5(i,e){const t=[1/0,1/0,-1/0,-1/0],n=[1/0,1/0,-1/0,-1/0],r=i.canonicalID();if(!r)return!1;if(e.type==="Polygon"){const s=eA(e.coordinates,n,r),o=rI(i.geometry(),t,n,r);if(!hg(t,n))return!1;for(const a of o)if(!Qb(a,s))return!1}if(e.type==="MultiPolygon"){const s=$b(e.coordinates,n,r),o=rI(i.geometry(),t,n,r);if(!hg(t,n))return!1;for(const a of o)if(!p5(a,s))return!1}return!0}class Uu{constructor(e,t){this.type=it,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(cg(e[1])){const n=e[1];if(n.type==="FeatureCollection")for(let r=0;r<n.features.length;++r){const s=n.features[r].geometry.type;if(s==="Polygon"||s==="MultiPolygon")return new Uu(n,n.features[r].geometry)}else if(n.type==="Feature"){const r=n.geometry.type;if(r==="Polygon"||r==="MultiPolygon")return new Uu(n,n.geometry)}else if(n.type==="Polygon"||n.type==="MultiPolygon")return new Uu(n,n)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return v5(e,this.geometries);if(e.geometryType()==="LineString")return y5(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var tA=Uu;function v0(i){if(i instanceof Bc){if(i.name==="get"&&i.args.length===1)return!1;if(i.name==="feature-state")return!1;if(i.name==="has"&&i.args.length===1)return!1;if(i.name==="properties"||i.name==="geometry-type"||i.name==="id")return!1;if(/^filter-/.test(i.name))return!1}if(i instanceof tA)return!1;let e=!0;return i.eachChild(t=>{e&&!v0(t)&&(e=!1)}),e}function iA(i){if(i instanceof Bc&&i.name==="feature-state")return!1;let e=!0;return i.eachChild(t=>{e&&!iA(t)&&(e=!1)}),e}function nA(i,e){if(i instanceof Bc&&e.indexOf(i.name)>=0)return!1;let t=!0;return i.eachChild(n=>{t&&!nA(n,e)&&(t=!1)}),t}class rA{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const n=e[1];return t.scope.has(n)?new rA(n,t.scope.get(n)):t.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var tS=rA;class sA{constructor(e,t=[],n,r=new Q8,s=[]){this.registry=e,this.path=t,this.key=t.map(o=>`[${o}]`).join(""),this.scope=r,this.errors=s,this.expectedType=n}parse(e,t,n,r,s={}){return t?this.concat(t,n,r)._parse(e,s):this._parse(e,s)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function n(r,s,o){return o==="assert"?new bs(s,[r]):o==="coerce"?new Tl(s,[r]):r}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const r=e[0];if(typeof r!="string")return this.error(`Expression name must be a string, but found ${typeof r} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const s=this.registry[r];if(s){let o=s.parse(e,this);if(!o)return null;if(this.expectedType){const a=this.expectedType,l=o.type;if((a.kind==="string"||a.kind==="number"||a.kind==="boolean"||a.kind==="object"||a.kind==="array")&&l.kind==="value")o=n(o,a,t.typeAnnotation||"assert");else if((a.kind==="color"||a.kind==="formatted"||a.kind==="resolvedImage")&&(l.kind==="value"||l.kind==="string"))o=n(o,a,t.typeAnnotation||"coerce");else if(this.checkSubtype(a,l))return null}if(!(o instanceof ug)&&o.type.kind!=="resolvedImage"&&Fm(o)){const a=new Jb;try{o=new ug(o.type,o.evaluate(a))}catch(l){return this.error(l.message),null}}return o}return this.error(`Unknown expression "${r}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,n){const r=typeof e=="number"?this.path.concat(e):this.path,s=n?this.scope.concat(n):this.scope;return new sA(this.registry,r,t||null,s,this.errors)}error(e,...t){const n=`${this.key}${t.map(r=>`[${r}]`).join("")}`;this.errors.push(new es(n,e))}checkSubtype(e,t){const n=Eh(e,t);return n&&this.error(n),n}}var iS=sA;function Fm(i){if(i instanceof tS)return Fm(i.boundExpression);if(i instanceof Bc&&i.name==="error")return!1;if(i instanceof m0)return!1;if(i instanceof tA)return!1;const e=i instanceof Tl||i instanceof bs;let t=!0;return i.eachChild(n=>{e?t=t&&Fm(n):t=t&&n instanceof ug}),t?v0(i)&&nA(i,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function nS(i,e){const t=i.length-1;let n=0,r=t,s=0,o,a;for(;n<=r;)if(s=Math.floor((n+r)/2),o=i[s],a=i[s+1],o<=e){if(s===t||e<a)return s;n=s+1}else if(o>e)r=s-1;else throw new Qi("Input is not a number.");return 0}class oA{constructor(e,t,n){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[r,s]of n)this.labels.push(r),this.outputs.push(s)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const n=t.parse(e[1],1,he);if(!n)return null;const r=[];let s=null;t.expectedType&&t.expectedType.kind!=="value"&&(s=t.expectedType);for(let o=1;o<e.length;o+=2){const a=o===1?-1/0:e[o],l=e[o+1],c=o,u=o+1;if(typeof a!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',c);if(r.length&&r[r.length-1][0]>=a)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',c);const h=t.parse(l,u,s);if(!h)return null;s=s||h.type,r.push([a,h])}return new oA(s,n,r)}evaluate(e){const t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const s=t.length;if(r>=t[s-1])return n[s-1].evaluate(e);const o=nS(t,r);return n[o].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var rS=oA,A5=jc;function jc(i,e,t,n){this.cx=3*i,this.bx=3*(t-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(n-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=n,this.p2x=t,this.p2y=n}jc.prototype.sampleCurveX=function(i){return((this.ax*i+this.bx)*i+this.cx)*i};jc.prototype.sampleCurveY=function(i){return((this.ay*i+this.by)*i+this.cy)*i};jc.prototype.sampleCurveDerivativeX=function(i){return(3*this.ax*i+2*this.bx)*i+this.cx};jc.prototype.solveCurveX=function(i,e){typeof e>"u"&&(e=1e-6);var t,n,r,s,o;for(r=i,o=0;o<8;o++){if(s=this.sampleCurveX(r)-i,Math.abs(s)<e)return r;var a=this.sampleCurveDerivativeX(r);if(Math.abs(a)<1e-6)break;r=r-s/a}if(t=0,n=1,r=i,r<t)return t;if(r>n)return n;for(;t<n;){if(s=this.sampleCurveX(r),Math.abs(s-i)<e)return r;i>s?t=r:n=r,r=(n-t)*.5+t}return r};jc.prototype.solve=function(i,e){return this.sampleCurveY(this.solveCurveX(i,e))};var _5=Xb(A5);function lr(i,e,t){return i*(1-t)+e*t}function C5(i,e,t){return new dr(lr(i.r,e.r,t),lr(i.g,e.g,t),lr(i.b,e.b,t),lr(i.a,e.a,t))}function I5(i,e,t){return i.map((n,r)=>lr(n,e[r],t))}var E5=Object.freeze({__proto__:null,number:lr,color:C5,array:I5});const sS=.95047,oS=1,aS=1.08883,lS=4/29,Ql=6/29,cS=3*Ql*Ql,w5=Ql*Ql*Ql,b5=Math.PI/180,S5=180/Math.PI;function dp(i){return i>w5?Math.pow(i,1/3):i/cS+lS}function fp(i){return i>Ql?i*i*i:cS*(i-lS)}function gp(i){return 255*(i<=.0031308?12.92*i:1.055*Math.pow(i,1/2.4)-.055)}function pp(i){return i/=255,i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4)}function uS(i){const e=pp(i.r),t=pp(i.g),n=pp(i.b),r=dp((.4124564*e+.3575761*t+.1804375*n)/sS),s=dp((.2126729*e+.7151522*t+.072175*n)/oS),o=dp((.0193339*e+.119192*t+.9503041*n)/aS);return{l:116*s-16,a:500*(r-s),b:200*(s-o),alpha:i.a}}function hS(i){let e=(i.l+16)/116,t=isNaN(i.a)?e:e+i.a/500,n=isNaN(i.b)?e:e-i.b/200;return e=oS*fp(e),t=sS*fp(t),n=aS*fp(n),new dr(gp(3.2404542*t-1.5371385*e-.4985314*n),gp(-.969266*t+1.8760108*e+.041556*n),gp(.0556434*t-.2040259*e+1.0572252*n),i.alpha)}function x5(i,e,t){return{l:lr(i.l,e.l,t),a:lr(i.a,e.a,t),b:lr(i.b,e.b,t),alpha:lr(i.alpha,e.alpha,t)}}function P5(i){const{l:e,a:t,b:n}=uS(i),r=Math.atan2(n,t)*S5;return{h:r<0?r+360:r,c:Math.sqrt(t*t+n*n),l:e,alpha:i.a}}function M5(i){const e=i.h*b5,t=i.c,n=i.l;return hS({l:n,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:i.alpha})}function R5(i,e,t){const n=e-i;return i+t*(n>180||n<-180?n-360*Math.round(n/360):n)}function T5(i,e,t){return{h:R5(i.h,e.h,t),c:lr(i.c,e.c,t),l:lr(i.l,e.l,t),alpha:lr(i.alpha,e.alpha,t)}}const Rd={forward:uS,reverse:hS,interpolate:x5},Td={forward:P5,reverse:M5,interpolate:T5};class dg{constructor(e,t,n,r,s){this.type=e,this.operator=t,this.interpolation=n,this.input=r,this.labels=[],this.outputs=[];for(const[o,a]of s)this.labels.push(o),this.outputs.push(a)}static interpolationFactor(e,t,n,r){let s=0;if(e.name==="exponential")s=mp(t,e.base,n,r);else if(e.name==="linear")s=mp(t,1,n,r);else if(e.name==="cubic-bezier"){const o=e.controlPoints;s=new _5(o[0],o[1],o[2],o[3]).solve(mp(t,1,n,r))}return s}static parse(e,t){let[n,r,s,...o]=e;if(!Array.isArray(r)||r.length===0)return t.error("Expected an interpolation type expression.",1);if(r[0]==="linear")r={name:"linear"};else if(r[0]==="exponential"){const c=r[1];if(typeof c!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:c}}else if(r[0]==="cubic-bezier"){const c=r.slice(1);if(c.length!==4||c.some(u=>typeof u!="number"||u<0||u>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:c}}else return t.error(`Unknown interpolation type ${String(r[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(s=t.parse(s,2,he),!s)return null;const a=[];let l=null;n==="interpolate-hcl"||n==="interpolate-lab"?l=Ds:t.expectedType&&t.expectedType.kind!=="value"&&(l=t.expectedType);for(let c=0;c<o.length;c+=2){const u=o[c],h=o[c+1],d=c+3,f=c+4;if(typeof u!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(a.length&&a[a.length-1][0]>=u)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);const g=t.parse(h,f,l);if(!g)return null;l=l||g.type,a.push([u,g])}return l.kind!=="number"&&l.kind!=="color"&&!(l.kind==="array"&&l.itemType.kind==="number"&&typeof l.N=="number")?t.error(`Type ${$t(l)} is not interpolatable.`):new dg(l,n,r,s,a)}evaluate(e){const t=this.labels,n=this.outputs;if(t.length===1)return n[0].evaluate(e);const r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);const s=t.length;if(r>=t[s-1])return n[s-1].evaluate(e);const o=nS(t,r),a=t[o],l=t[o+1],c=dg.interpolationFactor(this.interpolation,r,a,l),u=n[o].evaluate(e),h=n[o+1].evaluate(e);return this.operator==="interpolate"?E5[this.type.kind.toLowerCase()](u,h,c):this.operator==="interpolate-hcl"?Td.reverse(Td.interpolate(Td.forward(u),Td.forward(h),c)):Rd.reverse(Rd.interpolate(Rd.forward(u),Rd.forward(h),c))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let n=0;n<this.labels.length;n++)t.push(this.labels[n],this.outputs[n].serialize());return t}}function mp(i,e,t,n){const r=n-t,s=i-t;return r===0?0:e===1?s/r:(Math.pow(e,s)-1)/(Math.pow(e,r)-1)}var Ra=dg;class fg{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let n=null;const r=t.expectedType;r&&r.kind!=="value"&&(n=r);const s=[];for(const a of e.slice(1)){const l=t.parse(a,1+s.length,n,void 0,{typeAnnotation:"omit"});if(!l)return null;n=n||l.type,s.push(l)}return r&&s.some(a=>Eh(r,a.type))?new fg(nt,s):new fg(n,s)}evaluate(e){let t=null,n=0,r;for(const s of this.args){if(n++,t=s.evaluate(e),t&&t instanceof Zo&&!t.available&&(r||(r=t),t=null,n===this.args.length))return r;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var dS=fg;class aA{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const n=[];for(let s=1;s<e.length-1;s+=2){const o=e[s];if(typeof o!="string")return t.error(`Expected string, but found ${typeof o} instead.`,s);if(/[^a-zA-Z0-9_]/.test(o))return t.error("Variable names must contain only alphanumeric characters or '_'.",s);const a=t.parse(e[s+1],s+1);if(!a)return null;n.push([o,a])}const r=t.parse(e[e.length-1],e.length-1,t.expectedType,n);return r?new aA(n,r):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,n]of this.bindings)e.push(t,n.serialize());return e.push(this.result.serialize()),e}}var fS=aA;class lA{constructor(e,t,n){this.type=e,this.index=t,this.input=n}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,he),r=t.parse(e[2],2,Ar(t.expectedType||nt));if(!n||!r)return null;const s=r.type;return new lA(s.itemType,n,r)}evaluate(e){const t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0)throw new Qi(`Array index out of bounds: ${t} < 0.`);if(t>=n.length)throw new Qi(`Array index out of bounds: ${t} > ${n.length-1}.`);if(t!==Math.floor(t))throw new Qi(`Array index must be an integer, but found ${t} instead.`);return n[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var L5=lA;class cA{constructor(e,t){this.type=it,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,nt),r=t.parse(e[2],2,nt);return!n||!r?null:qy(n.type,[it,st,he,h0,nt])?new cA(n,r):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${$t(n.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(n==null)return!1;if(!wh(t,["boolean","string","number","null"]))throw new Qi(`Expected first argument to be of type boolean, string, number or null, but found ${$t(Oi(t))} instead.`);if(!wh(n,["string","array"]))throw new Qi(`Expected second argument to be of type array or string, but found ${$t(Oi(n))} instead.`);return n.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var G5=cA;class gg{constructor(e,t,n){this.type=he,this.needle=e,this.haystack=t,this.fromIndex=n}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,nt),r=t.parse(e[2],2,nt);if(!n||!r)return null;if(!qy(n.type,[it,st,he,h0,nt]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${$t(n.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,he);return s?new gg(n,r,s):null}else return new gg(n,r)}evaluate(e){const t=this.needle.evaluate(e),n=this.haystack.evaluate(e);if(!wh(t,["boolean","string","number","null"]))throw new Qi(`Expected first argument to be of type boolean, string, number or null, but found ${$t(Oi(t))} instead.`);if(!wh(n,["string","array"]))throw new Qi(`Expected second argument to be of type array or string, but found ${$t(Oi(n))} instead.`);if(this.fromIndex){const r=this.fromIndex.evaluate(e);return n.indexOf(t,r)}return n.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var O5=gg;class uA{constructor(e,t,n,r,s,o){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=s,this.otherwise=o}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let n,r;t.expectedType&&t.expectedType.kind!=="value"&&(r=t.expectedType);const s={},o=[];for(let c=2;c<e.length-1;c+=2){let u=e[c];const h=e[c+1];Array.isArray(u)||(u=[u]);const d=t.concat(c);if(u.length===0)return d.error("Expected at least one branch label.");for(const g of u){if(typeof g!="number"&&typeof g!="string")return d.error("Branch labels must be numbers or strings.");if(typeof g=="number"&&Math.abs(g)>Number.MAX_SAFE_INTEGER)return d.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof g=="number"&&Math.floor(g)!==g)return d.error("Numeric branch labels must be integer values.");if(!n)n=Oi(g);else if(d.checkSubtype(n,Oi(g)))return null;if(typeof s[String(g)]<"u")return d.error("Branch labels must be unique.");s[String(g)]=o.length}const f=t.parse(h,c,r);if(!f)return null;r=r||f.type,o.push(f)}const a=t.parse(e[1],1,nt);if(!a)return null;const l=t.parse(e[e.length-1],e.length-1,r);return!l||a.type.kind!=="value"&&t.concat(1).checkSubtype(n,a.type)?null:new uA(n,r,a,s,o,l)}evaluate(e){const t=this.input.evaluate(e);return(Oi(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),n=[],r={};for(const o of t){const a=r[this.cases[o]];a===void 0?(r[this.cases[o]]=n.length,n.push([this.cases[o],[o]])):n[a][1].push(o)}const s=o=>this.inputType.kind==="number"?Number(o):o;for(const[o,a]of n)a.length===1?e.push(s(a[0])):e.push(a.map(s)),e.push(this.outputs[o].serialize());return e.push(this.otherwise.serialize()),e}}var D5=uA;class hA{constructor(e,t,n){this.type=e,this.branches=t,this.otherwise=n}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let n;t.expectedType&&t.expectedType.kind!=="value"&&(n=t.expectedType);const r=[];for(let o=1;o<e.length-1;o+=2){const a=t.parse(e[o],o,it);if(!a)return null;const l=t.parse(e[o+1],o+1,n);if(!l)return null;r.push([a,l]),n=n||l.type}const s=t.parse(e[e.length-1],e.length-1,n);return s?new hA(n,r,s):null}evaluate(e){for(const[t,n]of this.branches)if(t.evaluate(e))return n.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,n]of this.branches)e(t),e(n);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var k5=hA;class pg{constructor(e,t,n,r){this.type=e,this.input=t,this.beginIndex=n,this.endIndex=r}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const n=t.parse(e[1],1,nt),r=t.parse(e[2],2,he);if(!n||!r)return null;if(!qy(n.type,[Ar(nt),st,nt]))return t.error(`Expected first argument to be of type array or string, but found ${$t(n.type)} instead`);if(e.length===4){const s=t.parse(e[3],3,he);return s?new pg(n.type,n,r,s):null}else return new pg(n.type,n,r)}evaluate(e){const t=this.input.evaluate(e),n=this.beginIndex.evaluate(e);if(!wh(t,["string","array"]))throw new Qi(`Expected first argument to be of type array or string, but found ${$t(Oi(t))} instead.`);if(this.endIndex){const r=this.endIndex.evaluate(e);return t.slice(n,r)}return t.slice(n)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var F5=pg;function sI(i,e){return i==="=="||i==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function N5(i,e,t){return e===t}function U5(i,e,t){return e!==t}function B5(i,e,t){return e<t}function j5(i,e,t){return e>t}function z5(i,e,t){return e<=t}function V5(i,e,t){return e>=t}function gS(i,e,t,n){return n.compare(e,t)===0}function W5(i,e,t,n){return!gS(i,e,t,n)}function Y5(i,e,t,n){return n.compare(e,t)<0}function H5(i,e,t,n){return n.compare(e,t)>0}function q5(i,e,t,n){return n.compare(e,t)<=0}function X5(i,e,t,n){return n.compare(e,t)>=0}function zc(i,e,t){const n=i!=="=="&&i!=="!=";return class pS{constructor(s,o,a){this.type=it,this.lhs=s,this.rhs=o,this.collator=a,this.hasUntypedArgument=s.type.kind==="value"||o.type.kind==="value"}static parse(s,o){if(s.length!==3&&s.length!==4)return o.error("Expected two or three arguments.");const a=s[0];let l=o.parse(s[1],1,nt);if(!l)return null;if(!sI(a,l.type))return o.concat(1).error(`"${a}" comparisons are not supported for type '${$t(l.type)}'.`);let c=o.parse(s[2],2,nt);if(!c)return null;if(!sI(a,c.type))return o.concat(2).error(`"${a}" comparisons are not supported for type '${$t(c.type)}'.`);if(l.type.kind!==c.type.kind&&l.type.kind!=="value"&&c.type.kind!=="value")return o.error(`Cannot compare types '${$t(l.type)}' and '${$t(c.type)}'.`);n&&(l.type.kind==="value"&&c.type.kind!=="value"?l=new bs(c.type,[l]):l.type.kind!=="value"&&c.type.kind==="value"&&(c=new bs(l.type,[c])));let u=null;if(s.length===4){if(l.type.kind!=="string"&&c.type.kind!=="string"&&l.type.kind!=="value"&&c.type.kind!=="value")return o.error("Cannot use collator to compare non-string types.");if(u=o.parse(s[3],3,d0),!u)return null}return new pS(l,c,u)}evaluate(s){const o=this.lhs.evaluate(s),a=this.rhs.evaluate(s);if(n&&this.hasUntypedArgument){const l=Oi(o),c=Oi(a);if(l.kind!==c.kind||!(l.kind==="string"||l.kind==="number"))throw new Qi(`Expected arguments for "${i}" to be (string, string) or (number, number), but found (${l.kind}, ${c.kind}) instead.`)}if(this.collator&&!n&&this.hasUntypedArgument){const l=Oi(o),c=Oi(a);if(l.kind!=="string"||c.kind!=="string")return e(s,o,a)}return this.collator?t(s,o,a,this.collator.evaluate(s)):e(s,o,a)}eachChild(s){s(this.lhs),s(this.rhs),this.collator&&s(this.collator)}outputDefined(){return!0}serialize(){const s=[i];return this.eachChild(o=>{s.push(o.serialize())}),s}}}const Z5=zc("==",N5,gS),K5=zc("!=",U5,W5),J5=zc("<",B5,Y5),Q5=zc(">",j5,H5),$5=zc("<=",z5,q5),eU=zc(">=",V5,X5);class dA{constructor(e,t,n,r,s,o){this.type=st,this.number=e,this.locale=t,this.currency=n,this.unit=r,this.minFractionDigits=s,this.maxFractionDigits=o}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const n=t.parse(e[1],1,he);if(!n)return null;const r=e[2];if(typeof r!="object"||Array.isArray(r))return t.error("NumberFormat options argument must be an object.");let s=null;if(r.locale&&(s=t.parse(r.locale,1,st),!s))return null;let o=null;if(r.currency&&(o=t.parse(r.currency,1,st),!o))return null;let a=null;if(r.unit&&(a=t.parse(r.unit,1,st),!a))return null;let l=null;if(r["min-fraction-digits"]&&(l=t.parse(r["min-fraction-digits"],1,he),!l))return null;let c=null;return r["max-fraction-digits"]&&(c=t.parse(r["max-fraction-digits"],1,he),!c)?null:new dA(n,s,o,a,l,c)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class fA{constructor(e){this.type=he,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const n=t.parse(e[1],1);return n?n.type.kind!=="array"&&n.type.kind!=="string"&&n.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${$t(n.type)} instead.`):new fA(n):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new Qi(`Expected value to be of type string or array, but found ${$t(Oi(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var tU=fA;const mS={"==":Z5,"!=":K5,">":Q5,"<":J5,">=":eU,"<=":$5,array:bs,at:L5,boolean:bs,case:k5,coalesce:dS,collator:m0,format:g0,image:p0,in:G5,"index-of":O5,interpolate:Ra,"interpolate-hcl":Ra,"interpolate-lab":Ra,length:tU,let:fS,literal:ug,match:D5,number:bs,"number-format":dA,object:bs,slice:F5,step:rS,string:bs,"to-boolean":Tl,"to-color":Tl,"to-number":Tl,"to-string":Tl,var:tS,within:tA};function oI(i,[e,t,n,r]){e=e.evaluate(i),t=t.evaluate(i),n=n.evaluate(i);const s=r?r.evaluate(i):1,o=Kb(e,t,n,s);if(o)throw new Qi(o);return new dr(e/255*s,t/255*s,n/255*s,s)}function aI(i,e){return i in e}function vp(i,e){const t=e[i];return typeof t>"u"?null:t}function iU(i,e,t,n){for(;t<=n;){const r=t+n>>1;if(e[r]===i)return!0;e[r]>i?n=r-1:t=r+1}return!1}function na(i){return{type:i}}Bc.register(mS,{error:[$8,[st],(i,[e])=>{throw new Qi(e.evaluate(i))}],typeof:[st,[nt],(i,[e])=>$t(Oi(e.evaluate(i)))],"to-rgba":[Ar(he,4),[Ds],(i,[e])=>e.evaluate(i).toArray()],rgb:[Ds,[he,he,he],oI],rgba:[Ds,[he,he,he,he],oI],has:{type:it,overloads:[[[st],(i,[e])=>aI(e.evaluate(i),i.properties())],[[st,Jl],(i,[e,t])=>aI(e.evaluate(i),t.evaluate(i))]]},get:{type:nt,overloads:[[[st],(i,[e])=>vp(e.evaluate(i),i.properties())],[[st,Jl],(i,[e,t])=>vp(e.evaluate(i),t.evaluate(i))]]},"feature-state":[nt,[st],(i,[e])=>vp(e.evaluate(i),i.featureState||{})],properties:[Jl,[],i=>i.properties()],"geometry-type":[st,[],i=>i.geometryType()],id:[nt,[],i=>i.id()],zoom:[he,[],i=>i.globals.zoom],pitch:[he,[],i=>i.globals.pitch||0],"distance-from-center":[he,[],i=>i.distanceFromCenter()],"heatmap-density":[he,[],i=>i.globals.heatmapDensity||0],"line-progress":[he,[],i=>i.globals.lineProgress||0],"sky-radial-progress":[he,[],i=>i.globals.skyRadialProgress||0],accumulated:[nt,[],i=>i.globals.accumulated===void 0?null:i.globals.accumulated],"+":[he,na(he),(i,e)=>{let t=0;for(const n of e)t+=n.evaluate(i);return t}],"*":[he,na(he),(i,e)=>{let t=1;for(const n of e)t*=n.evaluate(i);return t}],"-":{type:he,overloads:[[[he,he],(i,[e,t])=>e.evaluate(i)-t.evaluate(i)],[[he],(i,[e])=>-e.evaluate(i)]]},"/":[he,[he,he],(i,[e,t])=>e.evaluate(i)/t.evaluate(i)],"%":[he,[he,he],(i,[e,t])=>e.evaluate(i)%t.evaluate(i)],ln2:[he,[],()=>Math.LN2],pi:[he,[],()=>Math.PI],e:[he,[],()=>Math.E],"^":[he,[he,he],(i,[e,t])=>Math.pow(e.evaluate(i),t.evaluate(i))],sqrt:[he,[he],(i,[e])=>Math.sqrt(e.evaluate(i))],log10:[he,[he],(i,[e])=>Math.log(e.evaluate(i))/Math.LN10],ln:[he,[he],(i,[e])=>Math.log(e.evaluate(i))],log2:[he,[he],(i,[e])=>Math.log(e.evaluate(i))/Math.LN2],sin:[he,[he],(i,[e])=>Math.sin(e.evaluate(i))],cos:[he,[he],(i,[e])=>Math.cos(e.evaluate(i))],tan:[he,[he],(i,[e])=>Math.tan(e.evaluate(i))],asin:[he,[he],(i,[e])=>Math.asin(e.evaluate(i))],acos:[he,[he],(i,[e])=>Math.acos(e.evaluate(i))],atan:[he,[he],(i,[e])=>Math.atan(e.evaluate(i))],min:[he,na(he),(i,e)=>Math.min(...e.map(t=>t.evaluate(i)))],max:[he,na(he),(i,e)=>Math.max(...e.map(t=>t.evaluate(i)))],abs:[he,[he],(i,[e])=>Math.abs(e.evaluate(i))],round:[he,[he],(i,[e])=>{const t=e.evaluate(i);return t<0?-Math.round(-t):Math.round(t)}],floor:[he,[he],(i,[e])=>Math.floor(e.evaluate(i))],ceil:[he,[he],(i,[e])=>Math.ceil(e.evaluate(i))],"filter-==":[it,[st,nt],(i,[e,t])=>i.properties()[e.value]===t.value],"filter-id-==":[it,[nt],(i,[e])=>i.id()===e.value],"filter-type-==":[it,[st],(i,[e])=>i.geometryType()===e.value],"filter-<":[it,[st,nt],(i,[e,t])=>{const n=i.properties()[e.value],r=t.value;return typeof n==typeof r&&n<r}],"filter-id-<":[it,[nt],(i,[e])=>{const t=i.id(),n=e.value;return typeof t==typeof n&&t<n}],"filter->":[it,[st,nt],(i,[e,t])=>{const n=i.properties()[e.value],r=t.value;return typeof n==typeof r&&n>r}],"filter-id->":[it,[nt],(i,[e])=>{const t=i.id(),n=e.value;return typeof t==typeof n&&t>n}],"filter-<=":[it,[st,nt],(i,[e,t])=>{const n=i.properties()[e.value],r=t.value;return typeof n==typeof r&&n<=r}],"filter-id-<=":[it,[nt],(i,[e])=>{const t=i.id(),n=e.value;return typeof t==typeof n&&t<=n}],"filter->=":[it,[st,nt],(i,[e,t])=>{const n=i.properties()[e.value],r=t.value;return typeof n==typeof r&&n>=r}],"filter-id->=":[it,[nt],(i,[e])=>{const t=i.id(),n=e.value;return typeof t==typeof n&&t>=n}],"filter-has":[it,[nt],(i,[e])=>e.value in i.properties()],"filter-has-id":[it,[],i=>i.id()!==null&&i.id()!==void 0],"filter-type-in":[it,[Ar(st)],(i,[e])=>e.value.indexOf(i.geometryType())>=0],"filter-id-in":[it,[Ar(nt)],(i,[e])=>e.value.indexOf(i.id())>=0],"filter-in-small":[it,[st,Ar(nt)],(i,[e,t])=>t.value.indexOf(i.properties()[e.value])>=0],"filter-in-large":[it,[st,Ar(nt)],(i,[e,t])=>iU(i.properties()[e.value],t.value,0,t.value.length-1)],all:{type:it,overloads:[[[it,it],(i,[e,t])=>e.evaluate(i)&&t.evaluate(i)],[na(it),(i,e)=>{for(const t of e)if(!t.evaluate(i))return!1;return!0}]]},any:{type:it,overloads:[[[it,it],(i,[e,t])=>e.evaluate(i)||t.evaluate(i)],[na(it),(i,e)=>{for(const t of e)if(t.evaluate(i))return!0;return!1}]]},"!":[it,[it],(i,[e])=>!e.evaluate(i)],"is-supported-script":[it,[st],(i,[e])=>{const t=i.globals&&i.globals.isSupportedScript;return t?t(e.evaluate(i)):!0}],upcase:[st,[st],(i,[e])=>e.evaluate(i).toUpperCase()],downcase:[st,[st],(i,[e])=>e.evaluate(i).toLowerCase()],concat:[st,na(nt),(i,e)=>e.map(t=>Nu(t.evaluate(i))).join("")],"resolved-locale":[st,[d0],(i,[e])=>e.evaluate(i).resolvedLocale()]});var vS=mS;function Nm(i){return{result:"success",value:i}}function _l(i){return{result:"error",value:i}}function nU(i){return i["property-type"]==="data-driven"}function rU(i){return!!i.expression&&i.expression.parameters.indexOf("zoom")>-1}function sU(i){return!!i.expression&&i.expression.interpolated}function yS(i){return typeof i=="object"&&i!==null&&!Array.isArray(i)}class oU{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new Jb,this._defaultValue=t?uU(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,n,r,s,o,a,l){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=n,this._evaluator.canonical=r||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=l||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,n,r,s,o,a,l){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=n||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=s||null,this._evaluator.formattedSection=o||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=l||null;try{const c=this.expression.evaluate(this._evaluator);if(c==null||typeof c=="number"&&c!==c)return this._defaultValue;if(this._enumValues&&!(c in this._enumValues))throw new Qi(`Expected value to be one of ${Object.keys(this._enumValues).map(u=>JSON.stringify(u)).join(", ")}, but found ${JSON.stringify(c)} instead.`);return c}catch(c){return this._warningHistory[c.message]||(this._warningHistory[c.message]=!0,typeof console<"u"&&console.warn(c.message)),this._defaultValue}}}function aU(i){return Array.isArray(i)&&i.length>0&&typeof i[0]=="string"&&i[0]in vS}function Um(i,e){const t=new iS(vS,[],e?cU(e):void 0),n=t.parse(i,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return n?Nm(new oU(n,e)):_l(t.errors)}class lI{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!iA(t.expression)}evaluateWithoutErrorHandling(e,t,n,r,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,s,o)}evaluate(e,t,n,r,s,o){return this._styleExpression.evaluate(e,t,n,r,s,o)}}class cI{constructor(e,t,n,r){this.kind=e,this.zoomStops=n,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!iA(t.expression),this.interpolationType=r}evaluateWithoutErrorHandling(e,t,n,r,s,o){return this._styleExpression.evaluateWithoutErrorHandling(e,t,n,r,s,o)}evaluate(e,t,n,r,s,o){return this._styleExpression.evaluate(e,t,n,r,s,o)}interpolationFactor(e,t,n){return this.interpolationType?Ra.interpolationFactor(this.interpolationType,e,t,n):0}}function lU(i,e){if(i=Um(i,e),i.result==="error")return i;const t=i.value.expression,n=v0(t);if(!n&&!nU(e))return _l([new es("","data expressions not supported")]);const r=nA(t,["zoom","pitch","distance-from-center"]);if(!r&&!rU(e))return _l([new es("","zoom expressions not supported")]);const s=Qd(t);if(!s&&!r)return _l([new es("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(s instanceof es)return _l([s]);if(s instanceof Ra&&!sU(e))return _l([new es("",'"interpolate" expressions cannot be used with this property')]);if(!s)return Nm(n?new lI("constant",i.value):new lI("source",i.value));const o=s instanceof Ra?s.interpolation:void 0;return Nm(n?new cI("camera",i.value,s.labels,o):new cI("composite",i.value,s.labels,o))}function Qd(i){let e=null;if(i instanceof fS)e=Qd(i.result);else if(i instanceof dS){for(const t of i.args)if(e=Qd(t),e)break}else(i instanceof rS||i instanceof Ra)&&i.input instanceof Bc&&i.input.name==="zoom"&&(e=i);return e instanceof es||i.eachChild(t=>{const n=Qd(t);n instanceof es?e=n:!e&&n?e=new es("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new es("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function cU(i){const e={color:Ds,string:st,number:he,enum:st,boolean:it,formatted:f0,resolvedImage:Wh};return i.type==="array"?Ar(e[i.value]||nt,i.length):e[i.type]}function uU(i){return i.type==="color"&&(yS(i.default)||Array.isArray(i.default))?new dr(0,0,0,0):i.type==="color"?dr.parse(i.default)||null:i.default===void 0?null:i.default}function hU(i){return i instanceof Number||i instanceof String||i instanceof Boolean?i.valueOf():i}function Bm(i){if(Array.isArray(i))return i.map(Bm);if(i instanceof Object&&!(i instanceof Number||i instanceof String||i instanceof Boolean)){const e={};for(const t in i)e[t]=Bm(i[t]);return e}return hU(i)}var AS={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function _S(i){if(i===!0||i===!1)return!0;if(!Array.isArray(i)||i.length===0)return!1;switch(i[0]){case"has":return i.length>=2&&i[1]!=="$id"&&i[1]!=="$type";case"in":return i.length>=3&&(typeof i[1]!="string"||Array.isArray(i[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return i.length!==3||Array.isArray(i[1])||Array.isArray(i[2]);case"any":case"all":for(const e of i.slice(1))if(!_S(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function dU(i,e="fill"){if(i==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};_S(i)||(i=mg(i));const t=i;let n=!0;try{n=fU(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const r=AS[`filter_${e}`],s=Um(n,r);let o=null;if(s.result==="error")throw new Error(s.value.map(u=>`${u.key}: ${u.message}`).join(", "));o=(u,h,d)=>s.value.evaluate(u,h,{},d);let a=null,l=null;if(n!==t){const u=Um(t,r);if(u.result==="error")throw new Error(u.value.map(h=>`${h.key}: ${h.message}`).join(", "));a=(h,d,f,g,p)=>u.value.evaluate(h,d,{},f,void 0,void 0,g,p),l=!v0(u.value.expression)}o=o;const c=ES(n);return{filter:o,dynamicFilter:a||void 0,needGeometry:c,needFeature:!!l}}function fU(i){if(!$l(i))return i;let e=Bm(i);return IS(e),e=CS(e),e}function CS(i){if(!Array.isArray(i))return i;const e=mU(i);return e===!0?e:e.map(t=>CS(t))}function IS(i){let e=!1;const t=[];if(i[0]==="case"){for(let n=1;n<i.length-1;n+=2)e=e||$l(i[n]),t.push(i[n+1]);t.push(i[i.length-1])}else if(i[0]==="match"){e=e||$l(i[1]);for(let n=2;n<i.length-1;n+=2)t.push(i[n+1]);t.push(i[i.length-1])}else if(i[0]==="step"){e=e||$l(i[1]);for(let n=1;n<i.length-1;n+=2)t.push(i[n+1])}e&&(i.length=0,i.push("any",...t));for(let n=1;n<i.length;n++)IS(i[n])}function $l(i){if(!Array.isArray(i))return!1;if(gU(i[0]))return!0;for(let e=1;e<i.length;e++){const t=i[e];if($l(t))return!0}return!1}function gU(i){return i==="pitch"||i==="distance-from-center"}const pU=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function mU(i){if(pU.has(i[0]))for(let e=1;e<i.length;e++){const t=i[e];if($l(t))return!0}return i}function vU(i,e){return i<e?-1:i>e?1:0}function ES(i){if(!Array.isArray(i))return!1;if(i[0]==="within")return!0;for(let e=1;e<i.length;e++)if(ES(i[e]))return!0;return!1}function mg(i){if(!i)return!0;const e=i[0];return i.length<=1?e!=="any":e==="=="?yp(i[1],i[2],"=="):e==="!="?Ld(yp(i[1],i[2],"==")):e==="<"||e===">"||e==="<="||e===">="?yp(i[1],i[2],e):e==="any"?yU(i.slice(1)):e==="all"?["all"].concat(i.slice(1).map(mg)):e==="none"?["all"].concat(i.slice(1).map(mg).map(Ld)):e==="in"?uI(i[1],i.slice(2)):e==="!in"?Ld(uI(i[1],i.slice(2))):e==="has"?hI(i[1]):e==="!has"?Ld(hI(i[1])):e==="within"?i:!0}function yp(i,e,t){switch(i){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,i,e]}}function yU(i){return["any"].concat(i.map(mg))}function uI(i,e){if(e.length===0)return!1;switch(i){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",i,["literal",e.sort(vU)]]:["filter-in-small",i,["literal",e]]}}function hI(i){switch(i){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",i]}}function Ld(i){return["!",i]}var AU=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function _U(i,e){const t={};for(const n in i)n!=="ref"&&(t[n]=i[n]);return AU.forEach(n=>{n in e&&(t[n]=e[n])}),t}function CU(i){i=i.slice();const e=Object.create(null);for(let t=0;t<i.length;t++)e[i[t].id]=i[t];for(let t=0;t<i.length;t++)"ref"in i[t]&&(i[t]=_U(i[t],e[i[t].ref]));return i}var dI={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},iu=" ",fI=/(italic|oblique)$/i,gI={},IU=function(i,e,t){var n=gI[i];if(!n){Array.isArray(i)||(i=[i]);for(var r=400,s="normal",o=[],a,l,c=0,u=i.length;c<u;++c){var h=i[c],d=h.split(" "),f=d[d.length-1].toLowerCase();f=="normal"||f=="italic"||f=="oblique"?(s=l?s:f,d.pop(),f=d[d.length-1].toLowerCase()):fI.test(f)&&(f=f.replace(fI,""),s=l?s:d[d.length-1].replace(f,""));for(var g in dI){var p=d.length>1?d[d.length-2].toLowerCase():"";if(f==g||f==g.replace("-","")||p+"-"+f==g){r=a?r:dI[g],d.pop(),p&&g.startsWith(p)&&d.pop();break}}!a&&typeof f=="number"&&(r=f);var m=d.join(iu).replace("Klokantech Noto Sans","Noto Sans");m.indexOf(iu)!==-1&&(m='"'+m+'"'),o.push(m)}n=gI[i]=[s,r,o]}return n[0]+iu+n[1]+iu+e+"px"+(t?"/"+t:"")+iu+n[2]},jm=Xb(IU);const wS="https://api.mapbox.com";function gA(i){const e="mapbox://";return i.indexOf(e)!==0?"":i.slice(e.length)}function EU(i,e,t){const n=gA(i);if(!n)return decodeURI(new URL(i,t).href);const r="sprites/";if(n.indexOf(r)!==0)throw new Error(`unexpected sprites url: ${i}`);const s=n.slice(r.length);return`${wS}/styles/v1/${s}/sprite?access_token=${e}`}function bS(i,e){const t=gA(i);if(!t)return decodeURI(new URL(i,location.href).href);const n="styles/";if(t.indexOf(n)!==0)throw new Error(`unexpected style url: ${i}`);const r=t.slice(n.length);return`${wS}/styles/v1/${r}?&access_token=${e}`}function $d(i,e,t,n){const r=new URL(i,n),s=gA(i);if(!s)return e&&(r.searchParams.has(t)||r.searchParams.set(t,e)),decodeURI(r.href);if(s==="mapbox.satellite"){const o=window.devicePixelRatio>=1.5?"@2x":"";return`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${o}.webp?access_token=${e}`}return`https://{a-d}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`}const pI={},mI={};let wU=0;function pA(i){return i.id||(i.id=wU++),i.id}function bU(i,e){return pA(i)+"."+ke(e)}function SU(i){let e=pI[i.id];return e||(e={},pI[pA(i)]=e),e}function xU(i){let e=mI[i.id];return e||(e={},mI[pA(i)]=e),e}function Ap(i){return i*Math.PI/180}const y0=function(){const i=[];for(let e=78271.51696402048;i.length<=24;e/=2)i.push(e);return i}();new Gc({extent:Re("EPSG:3857").getExtent(),resolutions:y0});function SS(i,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(i,e);const t=document.createElement("canvas");return t.width=i,t.height=e,t}function PU(i,e){let t=0;const n=e.length;for(;t<n;++t)if(e[t]<i&&t+1<n){const s=e[t]/e[t+1];return t+Math.log(e[t]/i)/Math.log(s)}return n-1}const dl={};function Cc(i,e,t={},n){if(e in dl)return n&&(n.request=dl[e][0]),dl[e][1];const r=t.transformRequest&&t.transformRequest(e,i)||e,s=eh(()=>r).then(o=>(o instanceof Request||(o=new Request(o)),o.headers.get("Accept")||o.headers.set("Accept","application/json"),n&&(n.request=o),fetch(o).then(function(a){return delete dl[e],a.ok?a.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(a){return delete dl[e],Promise.reject(new Error("Error fetching source "+e))})));return dl[e]=[r,s],s}function MU(i,e){if(typeof i=="string")if(i.trim().startsWith("{"))try{const t=JSON.parse(i);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return i=bS(i,e.accessToken),Cc("Style",i,e);else return Promise.resolve(i)}const vI={};function RU(i,e,t={}){const n=[e,JSON.stringify(i)].toString();let r=vI[n];if(!r||t.transformRequest){let s;t.transformRequest&&(s=(a,l)=>{const c=t.transformRequest&&t.transformRequest(l,"Tiles")||l;if(a instanceof Mw)a.setLoader((u,h,d)=>{eh(()=>c).then(f=>{fetch(f).then(g=>g.arrayBuffer()).then(g=>{const m=a.getFormat().readFeatures(g,{extent:u,featureProjection:d});a.setFeatures(m)}).catch(g=>a.setState(ge.ERROR))})});else{const u=a.getImage();eh(()=>c).then(h=>{h instanceof Request?fetch(h).then(d=>d.blob()).then(d=>{const f=URL.createObjectURL(d);u.addEventListener("load",()=>URL.revokeObjectURL(f)),u.addEventListener("error",()=>URL.revokeObjectURL(f)),u.src=f}).catch(d=>a.setState(ge.ERROR)):u.src=h})}});const o=i.url;if(o&&!i.tiles){const a=$d(o,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(o.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},i,{url:void 0,tiles:Yv(a)}),tileLoadFunction:s});else{const l={};r=Cc("Source",a,t,l).then(function(c){return c.tiles=c.tiles.map(function(u){return c.scheme==="tms"&&(u=u.replace("{y}","{-y}")),$d(u,t.accessToken,t.accessTokenParam||"access_token",l.request.url)}),Promise.resolve({tileJson:c,tileLoadFunction:s})})}}else i=Object.assign({},i,{tiles:i.tiles.map(function(a){return i.scheme==="tms"&&(a=a.replace("{y}","{-y}")),$d(a,t.accessToken,t.accessTokenParam||"access_token",e||location.href)})}),r=Promise.resolve({tileJson:Object.assign({},i),tileLoadFunction:s});vI[n]=r}return r}function yI(i,e,t,n){const r=document.createElement("canvas"),s=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height];r.width=s[0],r.height=s[1];const o=r.getContext("2d");o.drawImage(i,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const a=o.getImageData(0,0,s[0],s[1]);o.globalCompositeOperation="destination-over",o.fillStyle=`rgba(${n.r*255},${n.g*255},${n.b*255},${n.a})`;const l=a.data;for(let c=0,u=a.width;c<u;++c)for(let h=0,d=a.height;h<d;++h){const f=(h*u+c)*4;l[f+3]>0&&o.arc(c,h,t*e.pixelRatio,0,2*Math.PI)}return o.fill(),r}function TU(i,e,t){const n=Math.max(0,Math.min(1,(t-i)/(e-i)));return n*n*(3-2*n)}function AI(i,e,t){const n=document.createElement("canvas");n.width=e.width,n.height=e.height;const r=n.getContext("2d");r.drawImage(i,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),o=s.data;for(let a=0,l=s.width;a<l;++a)for(let c=0,u=s.height;c<u;++c){const h=(c*l+a)*4,d=o[h+3]/255,f=.75,g=.1,p=TU(f-g,f+g,d);p>0?(o[h+0]=Math.round(255*t.r*p),o[h+1]=Math.round(255*t.g*p),o[h+2]=Math.round(255*t.b*p),o[h+3]=Math.round(255*p)):o[h+3]=0}return r.putImageData(s,0,0),n}const LU=Array(256).join("");function zm(i,e){if(e>=.05){let t="";const n=i.split(`
`),r=LU.slice(0,Math.round(e/.1));for(let s=0,o=n.length;s<o;++s)s>0&&(t+=`
`),t+=n[s].split("").join(r);return t}return i}let _p;function xS(){return _p||(_p=SS(1,1).getContext("2d")),_p}function ra(i,e){return xS().measureText(i).width+(i.length-1)*e}const _I={};function Vm(i,e,t,n){if(i.indexOf(`
`)!==-1){const o=i.split(`
`),a=[];for(let l=0,c=o.length;l<c;++l)a.push(Vm(o[l],e,t,n));return a.join(`
`)}const r=t+","+e+","+i+","+n;let s=_I[r];if(!s){const o=i.split(" ");if(o.length>1){const a=xS();a.font=e;const c=a.measureText("M").width*t;let u="";const h=[];for(let d=0,f=o.length;d<f;++d){const g=o[d],p=u+(u?" ":"")+g;ra(p,n)<=c?u=p:(u&&h.push(u),u=g)}u&&h.push(u);for(let d=0,f=h.length;d<f&&f>1;++d){const g=h[d];if(ra(g,n)<c*.35){const p=d>0?ra(h[d-1],n):1/0,m=d<f-1?ra(h[d+1],n):1/0;h.splice(d,1),f-=1,p<m?(h[d-1]+=" "+g,d-=1):h[d]=g+" "+h[d]}}for(let d=0,f=h.length-1;d<f;++d){const g=h[d],p=h[d+1];if(ra(g,n)>c*.7&&ra(p,n)<c*.6){const m=g.split(" "),v=m.pop();ra(v,n)<c*.2&&(h[d]=m.join(" "),h[d+1]=v+" "+p),f-=1}}s=h.join(`
`)}else s=i;s=zm(s,n),_I[r]=s}return s}const GU=/font-family: ?([^;]*);/,OU=/("|')/g;let Gd;function DU(i){if(!Gd){Gd={};const e=document.styleSheets;for(let t=0,n=e.length;t<n;++t){const r=e[t];try{const s=r.rules||r.cssRules;if(s)for(let o=0,a=s.length;o<a;++o){const l=s[o];if(l.type==5){const c=l.cssText.match(GU);Gd[c[1].replace(OU,"")]=!0}}}catch{}}}return i in Gd}const Cp={};function kU(i,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=i.toString();if(t in Cp)return Cp[t];const n=[];for(let r=0,s=i.length;r<s;++r){i[r]=i[r].replace("Arial Unicode MS","Arial");const o=i[r],a=jm(o,1);Aw(a);const l=a.split(" ");n.push([l.slice(3).join(" ").replace(/"/g,""),l[1],l[0]])}for(let r=0,s=n.length;r<s;++r){const o=n[r],a=o[0];if(!DU(a)&&Zr.get(`${o[2]}
${o[1]} 
${a}`)!==100){const l=e.replace("{font-family}",a.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",a.replace(/ /g,"+")).replace("{fontweight}",o[1]).replace("{-fontstyle}",o[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",o[2]);if(!document.querySelector('link[href="'+l+'"]')){const c=document.createElement("link");c.href=l,c.rel="stylesheet",document.head.appendChild(c)}}}return Cp[t]=i,i}const FU={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},NU={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},UU=function(i,e){const t=lU(i,e);if(t.result==="error")throw new Error(t.value.map(n=>`${n.key}: ${n.message}`).join(", "));return t.value},Wm={},vg={zoom:0};let Od,Ip;function Be(i,e,t,n,r,s,o){const a=i.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[a]||(s[a]={});const l=s[a];if(!l[t]){let c=(i[e]||Wm)[t];const u=AS[`${e}_${i.type}`][t];c===void 0&&(c=u.default);let h=aU(c);if(!h&&yS(c)&&(c=Y8(c,u),h=!0),h){const d=UU(c,u);l[t]=d.evaluate.bind(d)}else u.type=="color"&&(c=dr.parse(c)),l[t]=function(){return c}}return vg.zoom=n,l[t](vg,r,o)}function CI(i,e,t,n,r){return Be(i,"layout",`${n}-allow-overlap`,e,t,r)?Be(i,"layout",`${n}-ignore-placement`,e,t,r)?"none":"obstacle":"declutter"}function BU(i,e,t,n,r){return r||console.warn("No filterCache provided to evaluateFilter()"),i in r||(r[i]=dU(e).filter),vg.zoom=n,r[i](vg,t)}function sa(i,e){if(i){if(i.a===0||e===0)return;const t=i.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(i.r*255/t)+","+Math.round(i.g*255/t)+","+Math.round(i.b*255/t)+","+t*e+")"}return i}const jU=/\{[^{}}]*\}/g;function Ep(i,e){return i.replace(jU,function(t){return e[t.slice(1,-1)]||""})}const zU={};function VU(i,e,t,n=y0,r=void 0,s=void 0,o=void 0,a=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");zU[bU(e,i)]=Array.from(arguments);let l,c,u;if(s){if(typeof Image<"u"){const b=new Image;let S;eh(()=>s).then(R=>{R instanceof Request?fetch(R).then(P=>P.blob()).then(P=>{S=URL.createObjectURL(P),b.src=S}).catch(()=>{}):(b.crossOrigin="anonymous",b.src=R,S&&URL.revokeObjectURL(S))}),b.onload=function(){l=b,c=[b.width,b.height],i.changed(),b.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const b=self;b.postMessage({action:"loadImage",src:s}),b.addEventListener("message",function(R){R.data.action==="imageLoaded"&&R.data.src===s&&(l=R.data.image,c=[l.width,l.height])})}}const h=CU(e.layers),d={},f=[],g={},p={},m=SU(e),v=xU(e);let y;for(let b=0,S=h.length;b<S;++b){const R=h[b],P=R.id;if(typeof t=="string"&&R.source==t||Array.isArray(t)&&t.indexOf(P)!==-1){const w=R["source-layer"];if(y){if(R.source!==y)throw new Error(`Layer "${P}" does not use source "${y}`)}else{y=R.source;const D=e.sources[y];if(!D)throw new Error(`Source "${y}" is not defined`);const k=D.type;if(k!=="vector"&&k!=="geojson")throw new Error(`Source "${y}" is not of type "vector" or "geojson", but "${k}"`)}let x=d[w];x||(x=[],d[w]=x),x.push({layer:R,index:b}),f.push(P)}}const A=new je,_=new $e,C=[],I=function(b,S,R){const P=b.getProperties(),w=d[P.layer];if(!w)return;let x=n.indexOf(S);x==-1&&(x=PU(S,n));const D=FU[b.getGeometry().getType()],k={id:b.getId(),properties:P,type:D},O=i.get("mapbox-featurestate")[b.getId()];let N=-1;for(let B=0,V=w.length;B<V;++B){const se=w[B],j=se.layer,Ae=j.id;if(R!==void 0&&R!==Ae)continue;const q=j.layout||Wm,Te=j.paint||Wm;if(q.visibility==="none"||"minzoom"in j&&x<j.minzoom||"maxzoom"in j&&x>=j.maxzoom)continue;const Ce=j.filter;if(!Ce||BU(Ae,Ce,k,x,v)){let pe,Ie,z,oe,ne,Y;const Pe=se.index;if(D==3&&(j.type=="fill"||j.type=="fill-extrusion"))if(Ie=Be(j,"paint",j.type+"-opacity",x,k,m,O),j.type+"-pattern"in Te){const F=Be(j,"paint",j.type+"-pattern",x,k,m,O);if(F){const U=typeof F=="string"?Ep(F,P):F.toString();if(l&&r&&r[U]){++N,Y=C[N],(!Y||!Y.getFill()||Y.getStroke()||Y.getText())&&(Y=new Ee({fill:new $e}),C[N]=Y),z=Y.getFill(),Y.setZIndex(Pe);const H=U+"."+Ie;let te=p[H];if(!te){const ee=r[U],ue=SS(ee.width,ee.height),Me=ue.getContext("2d");Me.globalAlpha=Ie,Me.drawImage(l,ee.x,ee.y,ee.width,ee.height,0,0,ee.width,ee.height),te=Me.createPattern(ue,"repeat"),p[H]=te}z.setColor(te)}}}else pe=sa(Be(j,"paint",j.type+"-color",x,k,m,O),Ie),j.type+"-outline-color"in Te&&(ne=sa(Be(j,"paint",j.type+"-outline-color",x,k,m,O),Ie)),ne||(ne=pe),(pe||ne)&&(++N,Y=C[N],(!Y||pe&&!Y.getFill()||!pe&&Y.getFill()||ne&&!Y.getStroke()||!ne&&Y.getStroke()||Y.getText())&&(Y=new Ee({fill:pe?new $e:void 0,stroke:ne?new je:void 0}),C[N]=Y),pe&&(z=Y.getFill(),z.setColor(pe)),ne&&(oe=Y.getStroke(),oe.setColor(ne),oe.setWidth(.5)),Y.setZIndex(Pe));if(D!=1&&j.type=="line"){"line-pattern"in Te?pe=void 0:pe=sa(Be(j,"paint","line-color",x,k,m,O),Be(j,"paint","line-opacity",x,k,m,O));const F=Be(j,"paint","line-width",x,k,m,O);pe&&F>0&&(++N,Y=C[N],(!Y||!Y.getStroke()||Y.getFill()||Y.getText())&&(Y=new Ee({stroke:new je}),C[N]=Y),oe=Y.getStroke(),oe.setLineCap(Be(j,"layout","line-cap",x,k,m,O)),oe.setLineJoin(Be(j,"layout","line-join",x,k,m,O)),oe.setMiterLimit(Be(j,"layout","line-miter-limit",x,k,m,O)),oe.setColor(pe),oe.setWidth(F),oe.setLineDash(Te["line-dasharray"]?Be(j,"paint","line-dasharray",x,k,m,O).map(function(U){return U*F}):null),Y.setZIndex(Pe))}let tt=!1,E=null,M=0,G,W,X;if((D==1||D==2)&&"icon-image"in q){const F=Be(j,"layout","icon-image",x,k,m,O);if(F){G=typeof F=="string"?Ep(F,P):F.toString();let U;const H=a?a(i,G):void 0;if(l&&r&&r[G]||H){const te=Be(j,"layout","icon-rotation-alignment",x,k,m,O);if(D==2){const ee=b.getGeometry();if(ee.getFlatMidpoint||ee.getFlatMidpoints){const ue=ee.getExtent();if(Math.sqrt(Math.max(Math.pow((ue[2]-ue[0])/S,2),Math.pow((ue[3]-ue[1])/S,2)))>150){const be=ee.getType()==="MultiLineString"?ee.getFlatMidpoints():ee.getFlatMidpoint();if(Ip||(Od=[NaN,NaN],Ip=new qi("Point",Od,[],2,{},void 0)),U=Ip,Od[0]=be[0],Od[1]=be[1],Be(j,"layout","symbol-placement",x,k,m,O)==="line"&&te==="map"){const wt=ee.getStride(),Wt=ee.getFlatCoordinates();for(let mt=0,Ne=Wt.length-wt;mt<Ne;mt+=wt){const ct=Wt[mt],At=Wt[mt+1],ti=Wt[mt+wt],Bt=Wt[mt+wt+1],Fi=Math.min(ct,ti),Ni=Math.min(At,Bt),Jn=Math.max(ct,ti),Rn=Math.max(At,Bt);if(be[0]>=Fi&&be[0]<=Jn&&be[1]>=Ni&&be[1]<=Rn){M=Math.atan2(At-Bt,ti-ct);break}}}}}}if(D!==2||U){const ee=Be(j,"layout","icon-size",x,k,m,O),ue=Te["icon-color"]!==void 0?Be(j,"paint","icon-color",x,k,m,O):null;if(!ue||ue.a!==0){const Me=Be(j,"paint","icon-halo-color",x,k,m,O),be=Be(j,"paint","icon-halo-width",x,k,m,O);let pt=`${G}.${ee}.${be}.${Me}`;if(ue!==null&&(pt+=`.${ue}`),W=g[pt],!W){const wt=CI(j,x,k,"icon",m);let Wt;"icon-offset"in q&&(Wt=Be(j,"layout","icon-offset",x,k,m,O).slice(0),Wt[0]*=ee,Wt[1]*=-ee);let mt=ue?[ue.r*255,ue.g*255,ue.b*255,ue.a]:void 0;if(H){const Ne={color:mt,rotateWithView:te==="map",displacement:Wt,declutterMode:wt,scale:ee};typeof H=="string"?Ne.src=H:(Ne.img=H,Ne.imgSize=[H.width,H.height]),W=new Qt(Ne)}else{const Ne=r[G];let ct,At,ti;be?Ne.sdf?(ct=yI(AI(l,Ne,ue),{x:0,y:0,width:Ne.width,height:Ne.height,pixelRatio:Ne.pixelRatio},be,Me),mt=void 0):ct=yI(l,Ne,be,Me):(Ne.sdf?(u||(u=AI(l,{x:0,y:0,width:c[0],height:c[1]},{r:1,g:1,b:1,a:1})),ct=u):ct=l,At=[Ne.width,Ne.height],ti=[Ne.x,Ne.y]),W=new Qt({color:mt,img:ct,imgSize:c,size:At,offset:ti,rotateWithView:te==="map",scale:ee/Ne.pixelRatio,displacement:Wt,declutterMode:wt})}g[pt]=W}}W&&(++N,Y=C[N],(!Y||!Y.getImage()||Y.getFill()||Y.getStroke())&&(Y=new Ee,C[N]=Y),Y.setGeometry(U),W.setRotation(M+Ap(Be(j,"layout","icon-rotate",x,k,m,O))),W.setOpacity(Be(j,"paint","icon-opacity",x,k,m,O)),W.setAnchor(NU[Be(j,"layout","icon-anchor",x,k,m,O)]),Y.setImage(W),E=Y.getText(),Y.setText(void 0),Y.setZIndex(Pe),tt=!0,X=!1)}else X=!0}}}if(D==1&&j.type==="circle"){++N,Y=C[N],(!Y||!Y.getImage()||Y.getFill()||Y.getStroke())&&(Y=new Ee,C[N]=Y);const F="circle-radius"in Te?Be(j,"paint","circle-radius",x,k,m,O):5,U=sa(Be(j,"paint","circle-stroke-color",x,k,m,O),Be(j,"paint","circle-stroke-opacity",x,k,m,O)),H=Be(j,"paint","circle-translate",x,k,m,O),te=sa(Be(j,"paint","circle-color",x,k,m,O),Be(j,"paint","circle-opacity",x,k,m,O)),ee=Be(j,"paint","circle-stroke-width",x,k,m,O),ue=F+"."+U+"."+te+"."+ee+"."+H[0]+"."+H[1];W=g[ue],W||(W=new Ei({radius:F,displacement:[H[0],-H[1]],stroke:U&&ee>0?new je({width:ee,color:U}):void 0,fill:te?new $e({color:te}):void 0,declutterMode:"none"}),g[ue]=W),Y.setImage(W),E=Y.getText(),Y.setText(void 0),Y.setGeometry(void 0),Y.setZIndex(Pe),tt=!0}let K,ie,$,Q,Z,T;if("text-field"in q){Q=Math.round(Be(j,"layout","text-size",x,k,m,O));const F=Be(j,"layout","text-font",x,k,m,O);$=Be(j,"layout","text-line-height",x,k,m,O),ie=jm(o?o(F,e.metadata?e.metadata["ol:webfonts"]:void 0):F,Q,$),ie.includes("sans-serif")||(ie+=",sans-serif"),Z=Be(j,"layout","text-letter-spacing",x,k,m,O),T=Be(j,"layout","text-max-width",x,k,m,O);const U=Be(j,"layout","text-field",x,k,m,O);typeof U=="object"&&U.sections?U.sections.length===1?K=U.toString():K=U.sections.reduce((H,te,ee)=>{const ue=te.fontStack?te.fontStack.split(","):F,Me=jm(o?o(ue):ue,Q*(te.scale||1),$);let be=te.text;if(be===`
`)return H.push(`
`,""),H;if(D==2){H.push(zm(be,Z),Me);return}be=Vm(be,Me,T,Z).split(`
`);for(let pt=0,wt=be.length;pt<wt;++pt)pt>0&&H.push(`
`,""),H.push(be[pt],Me);return H},[]):K=Ep(U,P).trim(),Ie=Be(j,"paint","text-opacity",x,k,m,O)}if(K&&Ie&&!X){tt||(++N,Y=C[N],(!Y||!Y.getText()||Y.getFill()||Y.getStroke())&&(Y=new Ee,C[N]=Y),Y.setImage(void 0),Y.setGeometry(void 0));const F=CI(j,x,k,"text",m);Y.getText()||Y.setText(E),E=Y.getText(),(!E||"getDeclutterMode"in E&&E.getDeclutterMode()!==F)&&(E=new Nr({padding:[2,2,2,2],declutterMode:F}),Y.setText(E));const U=Be(j,"layout","text-transform",x,k,m,O);U=="uppercase"?K=Array.isArray(K)?K.map((Bt,Fi)=>Fi%2?Bt:Bt.toUpperCase()):K.toUpperCase():U=="lowercase"&&(K=Array.isArray(K)?K.map((Bt,Fi)=>Fi%2?Bt:Bt.toLowerCase()):K.toLowerCase());const H=Array.isArray(K)?K:D==2?zm(K,Z):Vm(K,ie,T,Z);E.setText(H),E.setFont(ie),E.setRotation(Ap(Be(j,"layout","text-rotate",x,k,m,O)));const te=Be(j,"layout","text-anchor",x,k,m,O),ee=tt||D==1?"point":Be(j,"layout","symbol-placement",x,k,m,O);let ue;if(ee==="line-center"?(E.setPlacement("line"),ue="center"):E.setPlacement(ee),ee==="line"&&typeof E.setRepeat=="function"){const Bt=Be(j,"layout","symbol-spacing",x,k,m,O);E.setRepeat(Bt*2)}E.setOverflow(ee==="point");let Me=Be(j,"paint","text-halo-width",x,k,m,O);const be=Be(j,"layout","text-offset",x,k,m,O),pt=Be(j,"paint","text-translate",x,k,m,O);let wt=0,Wt=0;if(ee=="point"){ue="center",te.indexOf("left")!==-1?(ue="left",Wt=Me):te.indexOf("right")!==-1&&(ue="right",Wt=-Me);const Bt=Be(j,"layout","text-rotation-alignment",x,k,m,O);E.setRotateWithView(Bt=="map")}else E.setMaxAngle(Ap(Be(j,"layout","text-max-angle",x,k,m,O))*K.length/H.length),E.setRotateWithView(!1);E.setTextAlign(ue);let mt="middle";te.indexOf("bottom")==0?(mt="bottom",wt=-Me-.5*($-1)*Q):te.indexOf("top")==0&&(mt="top",wt=Me+.5*($-1)*Q),E.setTextBaseline(mt);const Ne=Be(j,"layout","text-justify",x,k,m,O);E.setJustify(Ne==="auto"?void 0:Ne),E.setOffsetX(be[0]*Q+Wt+pt[0]),E.setOffsetY(be[1]*Q+wt+pt[1]),_.setColor(sa(Be(j,"paint","text-color",x,k,m,O),Ie)),E.setFill(_);const ct=sa(Be(j,"paint","text-halo-color",x,k,m,O),Ie);if(ct&&Me>0){A.setColor(ct),Me*=2;const Bt=.5*Q;A.setWidth(Me<=Bt?Me:Bt),E.setStroke(A)}else E.setStroke(void 0);const At=Be(j,"layout","text-padding",x,k,m,O),ti=E.getPadding();At!==ti[0]&&(ti[0]=At,ti[1]=At,ti[2]=At,ti[3]=At),Y.setZIndex(Pe)}}}if(N>-1)return C.length=N+1,C};return i.setStyle(I),i.set("mapbox-source",y),i.set("mapbox-layers",f),i.set("mapbox-featurestate",i.get("mapbox-featurestate")||{}),I}function WU(i,e=512){return i.getExtent()?Jg({extent:i.getExtent(),tileSize:e,maxZoom:22}).getResolutions():y0}function YU(i,e){return e.accessToken||(e=Object.assign({},e),new URL(i).searchParams.forEach((n,r)=>{e.accessToken=n,e.accessTokenParam=r})),e}function Cl(i,e,t="",n={},r=void 0){let s,o,a,l,c=!0;return typeof t!="string"&&!Array.isArray(t)?(a=t,l=a.source||a.layers,n=a):l=t,typeof n=="string"?(s=n,a={}):(s=n.styleUrl,a=n),a.updateSource===!1&&(c=!1),r||(r=a.resolutions),!s&&typeof e=="string"&&!e.trim().startsWith("{")&&(s=e),s&&(s=s.startsWith("data:")?location.href:bS(s,a.accessToken),a=YU(s,a)),new Promise(function(u,h){MU(e,a).then(function(d){if(d.version!=8)return h(new Error("glStyle version 8 required."));if(!(i instanceof Di||i instanceof Ma))return h(new Error("Can only apply to VectorLayer or VectorTileLayer"));const f=i instanceof Ma?"vector":"geojson";if(l?Array.isArray(l)?o=d.layers.find(function(_){return _.id===l[0]}).source:o=l:(o=Object.keys(d.sources).find(function(_){return d.sources[_].type===f}),l=o),!o)return h(new Error(`No ${f} source found in the glStyle.`));function g(){if(!c)return Promise.resolve();if(i instanceof Ma)return XU(d.sources[o],s,a).then(function(b){const S=i.getSource();if(S?b!==S&&(S.setTileUrlFunction(b.getTileUrlFunction()),typeof S.setUrls=="function"&&typeof b.getUrls=="function"&&S.setUrls(b.getUrls()),S.format_||(S.format_=b.format_),S.getAttributions()||S.setAttributions(b.getAttributions()),S.getTileLoadFunction()===Tw&&S.setTileLoadFunction(b.getTileLoadFunction()),$r(S.getProjection(),b.getProjection())&&(S.tileGrid=b.getTileGrid())):i.setSource(b),!isFinite(i.getMaxResolution())&&!isFinite(i.getMinZoom())){const R=i.getSource().getTileGrid();i.setMaxResolution(R.getResolution(R.getMinZoom()))}});const _=d.sources[o];let C=i.getSource();(!C||C.get("mapbox-source")!==_)&&(C=KU(_,s,a));const I=i.getSource();return I?C!==I&&(I.getAttributions()||I.setAttributions(C.getAttributions()),I.format_||(I.format_=C.getFormat()),I.url_=C.getUrl()):i.setSource(C),Promise.resolve()}let p,m,v,y;function A(){if(!y&&(!d.sprite||m)){if(a.projection&&!r){const C=Re(a.projection).getUnits();C!=="m"&&(r=y0.map(I=>I/Ga[C]))}y=VU(i,d,l,r,m,v,kU,a.getImage),i.getStyle()?g().then(u).catch(h):h(new Error(`Nothing to show for source [${o}]`))}else y?(i.setStyle(y),g().then(u).catch(h)):h(new Error("Something went wrong trying to apply style."))}if(d.sprite){const _=new URL(EU(d.sprite,a.accessToken,s||location.href));p=window.devicePixelRatio>=1.5?.5:1;const C=p==.5?"@2x":"";let I=_.origin+_.pathname+C+".json"+_.search;new Promise(function(b,S){Cc("Sprite",I,a).then(b).catch(function(R){I=_.origin+_.pathname+".json"+_.search,Cc("Sprite",I,a).then(b).catch(S)})}).then(function(b){if(b===void 0&&h(new Error("No sprites found.")),m=b,v=_.origin+_.pathname+C+".png"+_.search,a.transformRequest){const S=a.transformRequest(v,"SpriteImage")||v;(S instanceof Request||S instanceof Promise)&&(v=S)}A()}).catch(function(b){h(new Error(`Sprites cannot be loaded: ${I}: ${b.message}`))})}else A()}).catch(h)})}function HU(i,e){const t=i.bounds;if(t){const n=$_([t[0],t[1]],e),r=$_([t[2],t[3]],e);return[n[0],n[1],r[0],r[1]]}return Re(e).getExtent()}function qU(i,e,t){const n=new jy({tileJSON:e,tileSize:i.tileSize||e.tileSize||512}),r=n.getTileJSON(),s=n.getTileGrid(),o=Re(t.projection||"EPSG:3857"),a=HU(r,o),l=o.getExtent(),c=r.minzoom||0,u=r.maxzoom||22,h={attributions:n.getAttributions(),projection:o,tileGrid:new Gc({origin:l?ms(l):s.getOrigin(0),extent:a||s.getExtent(),minZoom:c,resolutions:WU(o,e.tileSize).slice(0,u+1),tileSize:s.getTileSize(0)})};return Array.isArray(r.tiles)?h.urls=r.tiles:h.url=r.tiles,h}function XU(i,e,t){return new Promise(function(n,r){RU(i,e,t).then(function({tileJson:s,tileLoadFunction:o}){const a=qU(i,s,t);a.tileLoadFunction=o,a.format=new lg,n(new Hl(a))}).catch(r)})}function ZU(i){return`{bbox-${(i?i.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function KU(i,e,t){const n=t.projection?new Gm({dataProjection:t.projection}):new Gm,r=i.data,s={};if(typeof r=="string"){const a=$d(r,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(a)){const c=(h,d,f)=>{const g=ZU(f);return a.replace(g,`${h.join(",")}`)},u=new gn({attributions:i.attribution,format:n,loader:(h,d,f,g,p)=>{const m=typeof c=="function"?c(h,d,f):c;Cc("GeoJSON",m,t).then(v=>{const y=u.getFormat().readFeatures(v,{featureProjection:f});u.addFeatures(y),g(y)}).catch(v=>{u.removeLoadedExtent(h),p()})},strategy:rk});return u.set("mapbox-source",i),u}const l=new gn({attributions:i.attribution,format:n,url:a,loader:(c,u,h,d,f)=>{Cc("GeoJSON",a,t).then(g=>{const p=l.getFormat().readFeatures(g,{featureProjection:h});l.addFeatures(p),d(p)}).catch(g=>{l.removeLoadedExtent(c),f()})}});return l}s.features=n.readFeatures(r,{featureProjection:"EPSG:3857"});const o=new gn(Object.assign({attributions:i.attribution,format:n},s));return o.set("mapbox-source",i),o}var JU=class extends Ma{constructor(e,t){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var n=e.ssl===!1?"http://":"https://";if(!Bi.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var r=e.layer+"$GEOPORTAIL:GPP:TMS",s=Bi.configuration.getLayerConf(r);if(!s)throw new Error("ERROR : Layer ID not found into the catalogue !?");for(var o=null,a="",l=e.style,c=0;c<s.styles.length;c++){var u=s.styles[c];if(l&&u.name===l){o=u.url,a=u.title;break}else if(!l&&u.current){l=u.name,o=u.url,a=u.title;break}}if(!o)throw new Error("ERROR : Style URL not found !?");o.replace(/(http|https):\/\//,n);var h=new Hl({state:"loading",format:new lg});h._originators=s.originators,h._legends=s.legends,h._metadata=s.metadata,h._description=s.description,h._title=s.title+" ("+a+")",h._quicklookUrl=s.quicklookUrl;var d={source:h};return He.mergeParams(d,t),e.olParams&&!s.originators&&(h._originators=e.olParams.attributions),super(d),this.protocol=n,this.sourceId=e.source,this.styleUrl=o,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(t){t.ok&&t.json().then(function(n){e.onStyleMapBoxLoad(n)})}).catch(function(t){e.onStyleMapBoxError(t)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var t=e.sources[this.sourceId];if(!t){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(t.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var n=this.getSource();if(t.url){t.url.replace(/(http|https):\/\//,this.protocol);var r=new jy({url:t.url}),s=this,o=r.on("change",function(){if(r.getState()==="ready"){var l=r.getTileJSON();if(!l)return;s.set("mapbox-extensions",l);for(var c=Array.isArray(l.tiles)?l.tiles:[l.tiles],u=0;u<t.tiles.length;u++)c[u].replace(/(http|https):\/\//,this.protocol);n.setUrls(c),gi(o)}})}if(t.tiles){for(var a=0;a<t.tiles.length;a++)t.tiles[a].replace(/(http|https):\/\//,this.protocol);n.setUrls(t.tiles)}Cl(this,e,this.sourceId).then(()=>{n.setState("ready"),this.set("mapbox-styles",e)}).catch(l=>{this.onStyleMapBoxError(l)})}onStyleMapBoxError(e){var t=this.getSource();t.setState("error"),console.error(e.message)}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=JU);var Xn=class extends qs{constructor(e){super(e)}setPosition(e){var t=new $U(this);t.set(e)}};const QU=["top-left","top-right","bottom-left","bottom-right"];var Pg,PS,wa,hu,Mg,MS;class $U{constructor(e){td(this,Pg);td(this,wa);td(this,Mg);return this.caller=e,Jo(this,wa,hu).call(this,"top-left"),Jo(this,wa,hu).call(this,"top-right"),Jo(this,wa,hu).call(this,"bottom-left"),Jo(this,wa,hu).call(this,"bottom-right"),this}set(e){QU.includes(e.toLowerCase())&&(Jo(this,Mg,MS).call(this,e),document.getElementById("position-container-"+e).appendChild(this.caller.element))}}Pg=new WeakSet,PS=function(e){var t=document.getElementById("position-container-"+e);return!!t},wa=new WeakSet,hu=function(e){if(!Jo(this,Pg,PS).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position-container-"+e;var n=this.caller.getMap().getOverlayContainerStopEvent();n.appendChild(t)}},Mg=new WeakSet,MS=function(e){const t=o=>{var a=document.getElementById("position-container-"+o),l=a.offsetWidth;return l},n=o=>{o.style.top="unset",o.style.bottom="unset",o.style.left="unset",o.style.right="unset"};n(this.caller.element),this.caller.element.style.position="unset";var r=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(r.length!==0){r.forEach(o=>{n(o)});var s=r[0];switch(e.toLowerCase()){case"top-left":s.style.top="0px",s.style.left=t(e)+"px";break;case"bottom-left":s.style.bottom="0px",s.style.left=t(e)+"px";break;case"top-right":s.style.top="0px",s.style.right=t(e)+"px";break;case"bottom-right":s.style.bottom="0px",s.style.right=t(e)+"px";break}}};var Xe={generate:function(){var i=Math.floor(Date.now());return function(){return i++}}(),name:function(i){var e=null,t=i.lastIndexOf("-");return t===-1?e=i:e=i.substring(0,t),e},index:function(i){var e=null,t=this.name(i),n=t.lastIndexOf("_");return n!==-1&&(e=t.substring(n+1)),e},uuid:function(i){var e=null,t=i.lastIndexOf("-");return t!==-1&&(e=parseInt(i.substring(t+1),10)),e}};/**!
 * Sortable 1.15.2
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function II(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function fs(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?II(Object(t),!0).forEach(function(n){e6(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):II(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function ef(i){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ef=function(e){return typeof e}:ef=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ef(i)}function e6(i,e,t){return e in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Vs(){return Vs=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},Vs.apply(this,arguments)}function t6(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function i6(i,e){if(i==null)return{};var t=t6(i,e),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(r=0;r<s.length;r++)n=s[r],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(i,n)&&(t[n]=i[n])}return t}var n6="1.15.2";function ks(i){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(i)}var Zs=ks(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Yh=ks(/Edge/i),EI=ks(/firefox/i),Bu=ks(/safari/i)&&!ks(/chrome/i)&&!ks(/android/i),RS=ks(/iP(ad|od|hone)/i),TS=ks(/chrome/i)&&ks(/android/i),LS={capture:!1,passive:!1};function Mt(i,e,t){i.addEventListener(e,t,!Zs&&LS)}function _t(i,e,t){i.removeEventListener(e,t,!Zs&&LS)}function yg(i,e){if(e){if(e[0]===">"&&(e=e.substring(1)),i)try{if(i.matches)return i.matches(e);if(i.msMatchesSelector)return i.msMatchesSelector(e);if(i.webkitMatchesSelector)return i.webkitMatchesSelector(e)}catch{return!1}return!1}}function r6(i){return i.host&&i!==document&&i.host.nodeType?i.host:i.parentNode}function Mr(i,e,t,n){if(i){t=t||document;do{if(e!=null&&(e[0]===">"?i.parentNode===t&&yg(i,e):yg(i,e))||n&&i===t)return i;if(i===t)break}while(i=r6(i))}return null}var wI=/\s+/g;function Qn(i,e,t){if(i&&e)if(i.classList)i.classList[t?"add":"remove"](e);else{var n=(" "+i.className+" ").replace(wI," ").replace(" "+e+" "," ");i.className=(n+(t?" "+e:"")).replace(wI," ")}}function qe(i,e,t){var n=i&&i.style;if(n){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(i,""):i.currentStyle&&(t=i.currentStyle),e===void 0?t:t[e];!(e in n)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),n[e]=t+(typeof t=="string"?"":"px")}}function ec(i,e){var t="";if(typeof i=="string")t=i;else do{var n=qe(i,"transform");n&&n!=="none"&&(t=n+" "+t)}while(!e&&(i=i.parentNode));var r=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return r&&new r(t)}function GS(i,e,t){if(i){var n=i.getElementsByTagName(e),r=0,s=n.length;if(t)for(;r<s;r++)t(n[r],r);return n}return[]}function as(){var i=document.scrollingElement;return i||document.documentElement}function Ci(i,e,t,n,r){if(!(!i.getBoundingClientRect&&i!==window)){var s,o,a,l,c,u,h;if(i!==window&&i.parentNode&&i!==as()?(s=i.getBoundingClientRect(),o=s.top,a=s.left,l=s.bottom,c=s.right,u=s.height,h=s.width):(o=0,a=0,l=window.innerHeight,c=window.innerWidth,u=window.innerHeight,h=window.innerWidth),(e||t)&&i!==window&&(r=r||i.parentNode,!Zs))do if(r&&r.getBoundingClientRect&&(qe(r,"transform")!=="none"||t&&qe(r,"position")!=="static")){var d=r.getBoundingClientRect();o-=d.top+parseInt(qe(r,"border-top-width")),a-=d.left+parseInt(qe(r,"border-left-width")),l=o+s.height,c=a+s.width;break}while(r=r.parentNode);if(n&&i!==window){var f=ec(r||i),g=f&&f.a,p=f&&f.d;f&&(o/=p,a/=g,h/=g,u/=p,l=o+u,c=a+h)}return{top:o,left:a,bottom:l,right:c,width:h,height:u}}}function bI(i,e,t){for(var n=Io(i,!0),r=Ci(i)[e];n;){var s=Ci(n)[t],o=void 0;if(t==="top"||t==="left"?o=r>=s:o=r<=s,!o)return n;if(n===as())break;n=Io(n,!1)}return!1}function Ic(i,e,t,n){for(var r=0,s=0,o=i.children;s<o.length;){if(o[s].style.display!=="none"&&o[s]!==Ve.ghost&&(n||o[s]!==Ve.dragged)&&Mr(o[s],t.draggable,i,!1)){if(r===e)return o[s];r++}s++}return null}function mA(i,e){for(var t=i.lastElementChild;t&&(t===Ve.ghost||qe(t,"display")==="none"||e&&!yg(t,e));)t=t.previousElementSibling;return t||null}function vr(i,e){var t=0;if(!i||!i.parentNode)return-1;for(;i=i.previousElementSibling;)i.nodeName.toUpperCase()!=="TEMPLATE"&&i!==Ve.clone&&(!e||yg(i,e))&&t++;return t}function SI(i){var e=0,t=0,n=as();if(i)do{var r=ec(i),s=r.a,o=r.d;e+=i.scrollLeft*s,t+=i.scrollTop*o}while(i!==n&&(i=i.parentNode));return[e,t]}function s6(i,e){for(var t in i)if(i.hasOwnProperty(t)){for(var n in e)if(e.hasOwnProperty(n)&&e[n]===i[t][n])return Number(t)}return-1}function Io(i,e){if(!i||!i.getBoundingClientRect)return as();var t=i,n=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var r=qe(t);if(t.clientWidth<t.scrollWidth&&(r.overflowX=="auto"||r.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(r.overflowY=="auto"||r.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return as();if(n||e)return t;n=!0}}while(t=t.parentNode);return as()}function o6(i,e){if(i&&e)for(var t in e)e.hasOwnProperty(t)&&(i[t]=e[t]);return i}function wp(i,e){return Math.round(i.top)===Math.round(e.top)&&Math.round(i.left)===Math.round(e.left)&&Math.round(i.height)===Math.round(e.height)&&Math.round(i.width)===Math.round(e.width)}var ju;function OS(i,e){return function(){if(!ju){var t=arguments,n=this;t.length===1?i.call(n,t[0]):i.apply(n,t),ju=setTimeout(function(){ju=void 0},e)}}}function a6(){clearTimeout(ju),ju=void 0}function DS(i,e,t){i.scrollLeft+=e,i.scrollTop+=t}function kS(i){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(i).cloneNode(!0):t?t(i).clone(!0)[0]:i.cloneNode(!0)}function FS(i,e,t){var n={};return Array.from(i.children).forEach(function(r){var s,o,a,l;if(!(!Mr(r,e.draggable,i,!1)||r.animated||r===t)){var c=Ci(r);n.left=Math.min((s=n.left)!==null&&s!==void 0?s:1/0,c.left),n.top=Math.min((o=n.top)!==null&&o!==void 0?o:1/0,c.top),n.right=Math.max((a=n.right)!==null&&a!==void 0?a:-1/0,c.right),n.bottom=Math.max((l=n.bottom)!==null&&l!==void 0?l:-1/0,c.bottom)}}),n.width=n.right-n.left,n.height=n.bottom-n.top,n.x=n.left,n.y=n.top,n}var ar="Sortable"+new Date().getTime();function l6(){var i=[],e;return{captureAnimationState:function(){if(i=[],!!this.options.animation){var n=[].slice.call(this.el.children);n.forEach(function(r){if(!(qe(r,"display")==="none"||r===Ve.ghost)){i.push({target:r,rect:Ci(r)});var s=fs({},i[i.length-1].rect);if(r.thisAnimationDuration){var o=ec(r,!0);o&&(s.top-=o.f,s.left-=o.e)}r.fromRect=s}})}},addAnimationState:function(n){i.push(n)},removeAnimationState:function(n){i.splice(s6(i,{target:n}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(e),typeof n=="function"&&n();return}var s=!1,o=0;i.forEach(function(a){var l=0,c=a.target,u=c.fromRect,h=Ci(c),d=c.prevFromRect,f=c.prevToRect,g=a.rect,p=ec(c,!0);p&&(h.top-=p.f,h.left-=p.e),c.toRect=h,c.thisAnimationDuration&&wp(d,h)&&!wp(u,h)&&(g.top-h.top)/(g.left-h.left)===(u.top-h.top)/(u.left-h.left)&&(l=u6(g,d,f,r.options)),wp(h,u)||(c.prevFromRect=u,c.prevToRect=h,l||(l=r.options.animation),r.animate(c,g,h,l)),l&&(s=!0,o=Math.max(o,l),clearTimeout(c.animationResetTimer),c.animationResetTimer=setTimeout(function(){c.animationTime=0,c.prevFromRect=null,c.fromRect=null,c.prevToRect=null,c.thisAnimationDuration=null},l),c.thisAnimationDuration=l)}),clearTimeout(e),s?e=setTimeout(function(){typeof n=="function"&&n()},o):typeof n=="function"&&n(),i=[]},animate:function(n,r,s,o){if(o){qe(n,"transition",""),qe(n,"transform","");var a=ec(this.el),l=a&&a.a,c=a&&a.d,u=(r.left-s.left)/(l||1),h=(r.top-s.top)/(c||1);n.animatingX=!!u,n.animatingY=!!h,qe(n,"transform","translate3d("+u+"px,"+h+"px,0)"),this.forRepaintDummy=c6(n),qe(n,"transition","transform "+o+"ms"+(this.options.easing?" "+this.options.easing:"")),qe(n,"transform","translate3d(0,0,0)"),typeof n.animated=="number"&&clearTimeout(n.animated),n.animated=setTimeout(function(){qe(n,"transition",""),qe(n,"transform",""),n.animated=!1,n.animatingX=!1,n.animatingY=!1},o)}}}}function c6(i){return i.offsetWidth}function u6(i,e,t,n){return Math.sqrt(Math.pow(e.top-i.top,2)+Math.pow(e.left-i.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*n.animation}var fl=[],bp={initializeByDefault:!0},Hh={mount:function(e){for(var t in bp)bp.hasOwnProperty(t)&&!(t in e)&&(e[t]=bp[t]);fl.forEach(function(n){if(n.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),fl.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var s=e+"Global";fl.forEach(function(o){t[o.pluginName]&&(t[o.pluginName][s]&&t[o.pluginName][s](fs({sortable:t},n)),t.options[o.pluginName]&&t[o.pluginName][e]&&t[o.pluginName][e](fs({sortable:t},n)))})},initializePlugins:function(e,t,n,r){fl.forEach(function(a){var l=a.pluginName;if(!(!e.options[l]&&!a.initializeByDefault)){var c=new a(e,t,e.options);c.sortable=e,c.options=e.options,e[l]=c,Vs(n,c.defaults)}});for(var s in e.options)if(e.options.hasOwnProperty(s)){var o=this.modifyOption(e,s,e.options[s]);typeof o<"u"&&(e.options[s]=o)}},getEventProperties:function(e,t){var n={};return fl.forEach(function(r){typeof r.eventProperties=="function"&&Vs(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var r;return fl.forEach(function(s){e[s.pluginName]&&s.optionListeners&&typeof s.optionListeners[t]=="function"&&(r=s.optionListeners[t].call(e[s.pluginName],n))}),r}};function h6(i){var e=i.sortable,t=i.rootEl,n=i.name,r=i.targetEl,s=i.cloneEl,o=i.toEl,a=i.fromEl,l=i.oldIndex,c=i.newIndex,u=i.oldDraggableIndex,h=i.newDraggableIndex,d=i.originalEvent,f=i.putSortable,g=i.extraEventProperties;if(e=e||t&&t[ar],!!e){var p,m=e.options,v="on"+n.charAt(0).toUpperCase()+n.substr(1);window.CustomEvent&&!Zs&&!Yh?p=new CustomEvent(n,{bubbles:!0,cancelable:!0}):(p=document.createEvent("Event"),p.initEvent(n,!0,!0)),p.to=o||t,p.from=a||t,p.item=r||t,p.clone=s,p.oldIndex=l,p.newIndex=c,p.oldDraggableIndex=u,p.newDraggableIndex=h,p.originalEvent=d,p.pullMode=f?f.lastPutMode:void 0;var y=fs(fs({},g),Hh.getEventProperties(n,e));for(var A in y)p[A]=y[A];t&&t.dispatchEvent(p),m[v]&&m[v].call(e,p)}}var d6=["evt"],Gn=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,s=i6(n,d6);Hh.pluginEvent.bind(Ve)(e,t,fs({dragEl:fe,parentEl:si,ghostEl:Qe,rootEl:Xt,nextEl:ga,lastDownEl:tf,cloneEl:ni,cloneHidden:go,dragStarted:du,putSortable:Yi,activeSortable:Ve.active,originalEvent:r,oldIndex:Gl,oldDraggableIndex:zu,newIndex:tr,newDraggableIndex:ho,hideGhostForTarget:jS,unhideGhostForTarget:zS,cloneNowHidden:function(){go=!0},cloneNowShown:function(){go=!1},dispatchSortableEvent:function(a){wn({sortable:t,name:a,originalEvent:r})}},s))};function wn(i){h6(fs({putSortable:Yi,cloneEl:ni,targetEl:fe,rootEl:Xt,oldIndex:Gl,oldDraggableIndex:zu,newIndex:tr,newDraggableIndex:ho},i))}var fe,si,Qe,Xt,ga,tf,ni,go,Gl,tr,zu,ho,Dd,Yi,Il=!1,Ag=!1,_g=[],oa,Sr,Sp,xp,xI,PI,du,gl,Vu,Wu=!1,kd=!1,nf,rn,Pp=[],Ym=!1,Cg=[],A0=typeof document<"u",Fd=RS,MI=Yh||Zs?"cssFloat":"float",f6=A0&&!TS&&!RS&&"draggable"in document.createElement("div"),NS=function(){if(A0){if(Zs)return!1;var i=document.createElement("x");return i.style.cssText="pointer-events:auto",i.style.pointerEvents==="auto"}}(),US=function(e,t){var n=qe(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),s=Ic(e,0,t),o=Ic(e,1,t),a=s&&qe(s),l=o&&qe(o),c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Ci(s).width,u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Ci(o).width;if(n.display==="flex")return n.flexDirection==="column"||n.flexDirection==="column-reverse"?"vertical":"horizontal";if(n.display==="grid")return n.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(s&&a.float&&a.float!=="none"){var h=a.float==="left"?"left":"right";return o&&(l.clear==="both"||l.clear===h)?"vertical":"horizontal"}return s&&(a.display==="block"||a.display==="flex"||a.display==="table"||a.display==="grid"||c>=r&&n[MI]==="none"||o&&n[MI]==="none"&&c+u>r)?"vertical":"horizontal"},g6=function(e,t,n){var r=n?e.left:e.top,s=n?e.right:e.bottom,o=n?e.width:e.height,a=n?t.left:t.top,l=n?t.right:t.bottom,c=n?t.width:t.height;return r===a||s===l||r+o/2===a+c/2},p6=function(e,t){var n;return _g.some(function(r){var s=r[ar].options.emptyInsertThreshold;if(!(!s||mA(r))){var o=Ci(r),a=e>=o.left-s&&e<=o.right+s,l=t>=o.top-s&&t<=o.bottom+s;if(a&&l)return n=r}}),n},BS=function(e){function t(s,o){return function(a,l,c,u){var h=a.options.group.name&&l.options.group.name&&a.options.group.name===l.options.group.name;if(s==null&&(o||h))return!0;if(s==null||s===!1)return!1;if(o&&s==="clone")return s;if(typeof s=="function")return t(s(a,l,c,u),o)(a,l,c,u);var d=(o?a:l).options.group.name;return s===!0||typeof s=="string"&&s===d||s.join&&s.indexOf(d)>-1}}var n={},r=e.group;(!r||ef(r)!="object")&&(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},jS=function(){!NS&&Qe&&qe(Qe,"display","none")},zS=function(){!NS&&Qe&&qe(Qe,"display","")};A0&&!TS&&document.addEventListener("click",function(i){if(Ag)return i.preventDefault(),i.stopPropagation&&i.stopPropagation(),i.stopImmediatePropagation&&i.stopImmediatePropagation(),Ag=!1,!1},!0);var aa=function(e){if(fe){e=e.touches?e.touches[0]:e;var t=p6(e.clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[ar]._onDragOver(n)}}},m6=function(e){fe&&fe.parentNode[ar]._isOutsideThisEl(e.target)};function Ve(i,e){if(!(i&&i.nodeType&&i.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(i));this.el=i,this.options=e=Vs({},e),i[ar]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(i.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return US(i,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(o,a){o.setData("Text",a.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ve.supportPointer!==!1&&"PointerEvent"in window&&!Bu,emptyInsertThreshold:5};Hh.initializePlugins(this,i,t);for(var n in t)!(n in e)&&(e[n]=t[n]);BS(e);for(var r in this)r.charAt(0)==="_"&&typeof this[r]=="function"&&(this[r]=this[r].bind(this));this.nativeDraggable=e.forceFallback?!1:f6,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Mt(i,"pointerdown",this._onTapStart):(Mt(i,"mousedown",this._onTapStart),Mt(i,"touchstart",this._onTapStart)),this.nativeDraggable&&(Mt(i,"dragover",this),Mt(i,"dragenter",this)),_g.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Vs(this,l6())}Ve.prototype={constructor:Ve,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(gl=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,fe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,s=r.preventOnFilter,o=e.type,a=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,l=(a||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||l,u=r.filter;if(w6(n),!fe&&!(/mousedown|pointerdown/.test(o)&&e.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Bu&&l&&l.tagName.toUpperCase()==="SELECT")&&(l=Mr(l,r.draggable,n,!1),!(l&&l.animated)&&tf!==l)){if(Gl=vr(l),zu=vr(l,r.draggable),typeof u=="function"){if(u.call(this,e,l,this)){wn({sortable:t,rootEl:c,name:"filter",targetEl:l,toEl:n,fromEl:n}),Gn("filter",t,{evt:e}),s&&e.cancelable&&e.preventDefault();return}}else if(u&&(u=u.split(",").some(function(h){if(h=Mr(c,h.trim(),n,!1),h)return wn({sortable:t,rootEl:h,name:"filter",targetEl:l,fromEl:n,toEl:n}),Gn("filter",t,{evt:e}),!0}),u)){s&&e.cancelable&&e.preventDefault();return}r.handle&&!Mr(c,r.handle,n,!1)||this._prepareDragStart(e,a,l)}}},_prepareDragStart:function(e,t,n){var r=this,s=r.el,o=r.options,a=s.ownerDocument,l;if(n&&!fe&&n.parentNode===s){var c=Ci(n);if(Xt=s,fe=n,si=fe.parentNode,ga=fe.nextSibling,tf=n,Dd=o.group,Ve.dragged=fe,oa={target:fe,clientX:(t||e).clientX,clientY:(t||e).clientY},xI=oa.clientX-c.left,PI=oa.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,fe.style["will-change"]="all",l=function(){if(Gn("delayEnded",r,{evt:e}),Ve.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!EI&&r.nativeDraggable&&(fe.draggable=!0),r._triggerDragStart(e,t),wn({sortable:r,name:"choose",originalEvent:e}),Qn(fe,o.chosenClass,!0)},o.ignore.split(",").forEach(function(u){GS(fe,u.trim(),Mp)}),Mt(a,"dragover",aa),Mt(a,"mousemove",aa),Mt(a,"touchmove",aa),Mt(a,"mouseup",r._onDrop),Mt(a,"touchend",r._onDrop),Mt(a,"touchcancel",r._onDrop),EI&&this.nativeDraggable&&(this.options.touchStartThreshold=4,fe.draggable=!0),Gn("delayStart",this,{evt:e}),o.delay&&(!o.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Yh||Zs))){if(Ve.eventCanceled){this._onDrop();return}Mt(a,"mouseup",r._disableDelayedDrag),Mt(a,"touchend",r._disableDelayedDrag),Mt(a,"touchcancel",r._disableDelayedDrag),Mt(a,"mousemove",r._delayedDragTouchMoveHandler),Mt(a,"touchmove",r._delayedDragTouchMoveHandler),o.supportPointer&&Mt(a,"pointermove",r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(l,o.delay)}else l()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){fe&&Mp(fe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;_t(e,"mouseup",this._disableDelayedDrag),_t(e,"touchend",this._disableDelayedDrag),_t(e,"touchcancel",this._disableDelayedDrag),_t(e,"mousemove",this._delayedDragTouchMoveHandler),_t(e,"touchmove",this._delayedDragTouchMoveHandler),_t(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?Mt(document,"pointermove",this._onTouchMove):t?Mt(document,"touchmove",this._onTouchMove):Mt(document,"mousemove",this._onTouchMove):(Mt(fe,"dragend",this),Mt(Xt,"dragstart",this._onDragStart));try{document.selection?rf(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Il=!1,Xt&&fe){Gn("dragStarted",this,{evt:t}),this.nativeDraggable&&Mt(document,"dragover",m6);var n=this.options;!e&&Qn(fe,n.dragClass,!1),Qn(fe,n.ghostClass,!0),Ve.active=this,e&&this._appendGhost(),wn({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(Sr){this._lastX=Sr.clientX,this._lastY=Sr.clientY,jS();for(var e=document.elementFromPoint(Sr.clientX,Sr.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Sr.clientX,Sr.clientY),e!==t);)t=e;if(fe.parentNode[ar]._isOutsideThisEl(e),t)do{if(t[ar]){var n=void 0;if(n=t[ar]._onDragOver({clientX:Sr.clientX,clientY:Sr.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=t.parentNode);zS()}},_onTouchMove:function(e){if(oa){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,s=e.touches?e.touches[0]:e,o=Qe&&ec(Qe,!0),a=Qe&&o&&o.a,l=Qe&&o&&o.d,c=Fd&&rn&&SI(rn),u=(s.clientX-oa.clientX+r.x)/(a||1)+(c?c[0]-Pp[0]:0)/(a||1),h=(s.clientY-oa.clientY+r.y)/(l||1)+(c?c[1]-Pp[1]:0)/(l||1);if(!Ve.active&&!Il){if(n&&Math.max(Math.abs(s.clientX-this._lastX),Math.abs(s.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(Qe){o?(o.e+=u-(Sp||0),o.f+=h-(xp||0)):o={a:1,b:0,c:0,d:1,e:u,f:h};var d="matrix(".concat(o.a,",").concat(o.b,",").concat(o.c,",").concat(o.d,",").concat(o.e,",").concat(o.f,")");qe(Qe,"webkitTransform",d),qe(Qe,"mozTransform",d),qe(Qe,"msTransform",d),qe(Qe,"transform",d),Sp=u,xp=h,Sr=s}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Qe){var e=this.options.fallbackOnBody?document.body:Xt,t=Ci(fe,!0,Fd,!0,e),n=this.options;if(Fd){for(rn=e;qe(rn,"position")==="static"&&qe(rn,"transform")==="none"&&rn!==document;)rn=rn.parentNode;rn!==document.body&&rn!==document.documentElement?(rn===document&&(rn=as()),t.top+=rn.scrollTop,t.left+=rn.scrollLeft):rn=as(),Pp=SI(rn)}Qe=fe.cloneNode(!0),Qn(Qe,n.ghostClass,!1),Qn(Qe,n.fallbackClass,!0),Qn(Qe,n.dragClass,!0),qe(Qe,"transition",""),qe(Qe,"transform",""),qe(Qe,"box-sizing","border-box"),qe(Qe,"margin",0),qe(Qe,"top",t.top),qe(Qe,"left",t.left),qe(Qe,"width",t.width),qe(Qe,"height",t.height),qe(Qe,"opacity","0.8"),qe(Qe,"position",Fd?"absolute":"fixed"),qe(Qe,"zIndex","100000"),qe(Qe,"pointerEvents","none"),Ve.ghost=Qe,e.appendChild(Qe),qe(Qe,"transform-origin",xI/parseInt(Qe.style.width)*100+"% "+PI/parseInt(Qe.style.height)*100+"%")}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,s=n.options;if(Gn("dragStart",this,{evt:e}),Ve.eventCanceled){this._onDrop();return}Gn("setupClone",this),Ve.eventCanceled||(ni=kS(fe),ni.removeAttribute("id"),ni.draggable=!1,ni.style["will-change"]="",this._hideClone(),Qn(ni,this.options.chosenClass,!1),Ve.clone=ni),n.cloneId=rf(function(){Gn("clone",n),!Ve.eventCanceled&&(n.options.removeCloneOnHide||Xt.insertBefore(ni,fe),n._hideClone(),wn({sortable:n,name:"clone"}))}),!t&&Qn(fe,s.dragClass,!0),t?(Ag=!0,n._loopId=setInterval(n._emulateDragOver,50)):(_t(document,"mouseup",n._onDrop),_t(document,"touchend",n._onDrop),_t(document,"touchcancel",n._onDrop),r&&(r.effectAllowed="move",s.setData&&s.setData.call(n,r,fe)),Mt(document,"drop",n),qe(fe,"transform","translateZ(0)")),Il=!0,n._dragStartId=rf(n._dragStarted.bind(n,t,e)),Mt(document,"selectstart",n),du=!0,Bu&&qe(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,n=e.target,r,s,o,a=this.options,l=a.group,c=Ve.active,u=Dd===l,h=a.sort,d=Yi||c,f,g=this,p=!1;if(Ym)return;function m(V,se){Gn(V,g,fs({evt:e,isOwner:u,axis:f?"vertical":"horizontal",revert:o,dragRect:r,targetRect:s,canSort:h,fromSortable:d,target:n,completed:y,onMove:function(Ae,q){return Nd(Xt,t,fe,r,Ae,Ci(Ae),e,q)},changed:A},se))}function v(){m("dragOverAnimationCapture"),g.captureAnimationState(),g!==d&&d.captureAnimationState()}function y(V){return m("dragOverCompleted",{insertion:V}),V&&(u?c._hideClone():c._showClone(g),g!==d&&(Qn(fe,Yi?Yi.options.ghostClass:c.options.ghostClass,!1),Qn(fe,a.ghostClass,!0)),Yi!==g&&g!==Ve.active?Yi=g:g===Ve.active&&Yi&&(Yi=null),d===g&&(g._ignoreWhileAnimating=n),g.animateAll(function(){m("dragOverAnimationComplete"),g._ignoreWhileAnimating=null}),g!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===fe&&!fe.animated||n===t&&!n.animated)&&(gl=null),!a.dragoverBubble&&!e.rootEl&&n!==document&&(fe.parentNode[ar]._isOutsideThisEl(e.target),!V&&aa(e)),!a.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),p=!0}function A(){tr=vr(fe),ho=vr(fe,a.draggable),wn({sortable:g,name:"change",toEl:t,newIndex:tr,newDraggableIndex:ho,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=Mr(n,a.draggable,t,!0),m("dragOver"),Ve.eventCanceled)return p;if(fe.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||g._ignoreWhileAnimating===n)return y(!1);if(Ag=!1,c&&!a.disabled&&(u?h||(o=si!==Xt):Yi===this||(this.lastPutMode=Dd.checkPull(this,c,fe,e))&&l.checkPut(this,c,fe,e))){if(f=this._getDirection(e,n)==="vertical",r=Ci(fe),m("dragOverValid"),Ve.eventCanceled)return p;if(o)return si=Xt,v(),this._hideClone(),m("revert"),Ve.eventCanceled||(ga?Xt.insertBefore(fe,ga):Xt.appendChild(fe)),y(!0);var _=mA(t,a.draggable);if(!_||_6(e,f,this)&&!_.animated){if(_===fe)return y(!1);if(_&&t===e.target&&(n=_),n&&(s=Ci(n)),Nd(Xt,t,fe,r,n,s,e,!!n)!==!1)return v(),_&&_.nextSibling?t.insertBefore(fe,_.nextSibling):t.appendChild(fe),si=t,A(),y(!0)}else if(_&&A6(e,f,this)){var C=Ic(t,0,a,!0);if(C===fe)return y(!1);if(n=C,s=Ci(n),Nd(Xt,t,fe,r,n,s,e,!1)!==!1)return v(),t.insertBefore(fe,C),si=t,A(),y(!0)}else if(n.parentNode===t){s=Ci(n);var I=0,b,S=fe.parentNode!==t,R=!g6(fe.animated&&fe.toRect||r,n.animated&&n.toRect||s,f),P=f?"top":"left",w=bI(n,"top","top")||bI(fe,"top","top"),x=w?w.scrollTop:void 0;gl!==n&&(b=s[P],Wu=!1,kd=!R&&a.invertSwap||S),I=C6(e,n,s,f,R?1:a.swapThreshold,a.invertedSwapThreshold==null?a.swapThreshold:a.invertedSwapThreshold,kd,gl===n);var D;if(I!==0){var k=vr(fe);do k-=I,D=si.children[k];while(D&&(qe(D,"display")==="none"||D===Qe))}if(I===0||D===n)return y(!1);gl=n,Vu=I;var O=n.nextElementSibling,N=!1;N=I===1;var B=Nd(Xt,t,fe,r,n,s,e,N);if(B!==!1)return(B===1||B===-1)&&(N=B===1),Ym=!0,setTimeout(y6,30),v(),N&&!O?t.appendChild(fe):n.parentNode.insertBefore(fe,N?O:n),w&&DS(w,0,x-w.scrollTop),si=fe.parentNode,b!==void 0&&!kd&&(nf=Math.abs(b-Ci(n)[P])),A(),y(!0)}if(t.contains(fe))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){_t(document,"mousemove",this._onTouchMove),_t(document,"touchmove",this._onTouchMove),_t(document,"pointermove",this._onTouchMove),_t(document,"dragover",aa),_t(document,"mousemove",aa),_t(document,"touchmove",aa)},_offUpEvents:function(){var e=this.el.ownerDocument;_t(e,"mouseup",this._onDrop),_t(e,"touchend",this._onDrop),_t(e,"pointerup",this._onDrop),_t(e,"touchcancel",this._onDrop),_t(document,"selectstart",this)},_onDrop:function(e){var t=this.el,n=this.options;if(tr=vr(fe),ho=vr(fe,n.draggable),Gn("drop",this,{evt:e}),si=fe&&fe.parentNode,tr=vr(fe),ho=vr(fe,n.draggable),Ve.eventCanceled){this._nulling();return}Il=!1,kd=!1,Wu=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),Hm(this.cloneId),Hm(this._dragStartId),this.nativeDraggable&&(_t(document,"drop",this),_t(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Bu&&qe(document.body,"user-select",""),qe(fe,"transform",""),e&&(du&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),Qe&&Qe.parentNode&&Qe.parentNode.removeChild(Qe),(Xt===si||Yi&&Yi.lastPutMode!=="clone")&&ni&&ni.parentNode&&ni.parentNode.removeChild(ni),fe&&(this.nativeDraggable&&_t(fe,"dragend",this),Mp(fe),fe.style["will-change"]="",du&&!Il&&Qn(fe,Yi?Yi.options.ghostClass:this.options.ghostClass,!1),Qn(fe,this.options.chosenClass,!1),wn({sortable:this,name:"unchoose",toEl:si,newIndex:null,newDraggableIndex:null,originalEvent:e}),Xt!==si?(tr>=0&&(wn({rootEl:si,name:"add",toEl:si,fromEl:Xt,originalEvent:e}),wn({sortable:this,name:"remove",toEl:si,originalEvent:e}),wn({rootEl:si,name:"sort",toEl:si,fromEl:Xt,originalEvent:e}),wn({sortable:this,name:"sort",toEl:si,originalEvent:e})),Yi&&Yi.save()):tr!==Gl&&tr>=0&&(wn({sortable:this,name:"update",toEl:si,originalEvent:e}),wn({sortable:this,name:"sort",toEl:si,originalEvent:e})),Ve.active&&((tr==null||tr===-1)&&(tr=Gl,ho=zu),wn({sortable:this,name:"end",toEl:si,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Gn("nulling",this),Xt=fe=si=Qe=ga=ni=tf=go=oa=Sr=du=tr=ho=Gl=zu=gl=Vu=Yi=Dd=Ve.dragged=Ve.ghost=Ve.clone=Ve.active=null,Cg.forEach(function(e){e.checked=!0}),Cg.length=Sp=xp=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":fe&&(this._onDragOver(e),v6(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,r=0,s=n.length,o=this.options;r<s;r++)t=n[r],Mr(t,o.draggable,this.el,!1)&&e.push(t.getAttribute(o.dataIdAttr)||E6(t));return e},sort:function(e,t){var n={},r=this.el;this.toArray().forEach(function(s,o){var a=r.children[o];Mr(a,this.options.draggable,r,!1)&&(n[s]=a)},this),t&&this.captureAnimationState(),e.forEach(function(s){n[s]&&(r.removeChild(n[s]),r.appendChild(n[s]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return Mr(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var r=Hh.modifyOption(this,e,t);typeof r<"u"?n[e]=r:n[e]=t,e==="group"&&BS(n)},destroy:function(){Gn("destroy",this);var e=this.el;e[ar]=null,_t(e,"mousedown",this._onTapStart),_t(e,"touchstart",this._onTapStart),_t(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(_t(e,"dragover",this),_t(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),_g.splice(_g.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!go){if(Gn("hideClone",this),Ve.eventCanceled)return;qe(ni,"display","none"),this.options.removeCloneOnHide&&ni.parentNode&&ni.parentNode.removeChild(ni),go=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(go){if(Gn("showClone",this),Ve.eventCanceled)return;fe.parentNode==Xt&&!this.options.group.revertClone?Xt.insertBefore(ni,fe):ga?Xt.insertBefore(ni,ga):Xt.appendChild(ni),this.options.group.revertClone&&this.animate(fe,ni),qe(ni,"display",""),go=!1}}};function v6(i){i.dataTransfer&&(i.dataTransfer.dropEffect="move"),i.cancelable&&i.preventDefault()}function Nd(i,e,t,n,r,s,o,a){var l,c=i[ar],u=c.options.onMove,h;return window.CustomEvent&&!Zs&&!Yh?l=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(l=document.createEvent("Event"),l.initEvent("move",!0,!0)),l.to=e,l.from=i,l.dragged=t,l.draggedRect=n,l.related=r||e,l.relatedRect=s||Ci(e),l.willInsertAfter=a,l.originalEvent=o,i.dispatchEvent(l),u&&(h=u.call(c,l,o)),h}function Mp(i){i.draggable=!1}function y6(){Ym=!1}function A6(i,e,t){var n=Ci(Ic(t.el,0,t.options,!0)),r=FS(t.el,t.options,Qe),s=10;return e?i.clientX<r.left-s||i.clientY<n.top&&i.clientX<n.right:i.clientY<r.top-s||i.clientY<n.bottom&&i.clientX<n.left}function _6(i,e,t){var n=Ci(mA(t.el,t.options.draggable)),r=FS(t.el,t.options,Qe),s=10;return e?i.clientX>r.right+s||i.clientY>n.bottom&&i.clientX>n.left:i.clientY>r.bottom+s||i.clientX>n.right&&i.clientY>n.top}function C6(i,e,t,n,r,s,o,a){var l=n?i.clientY:i.clientX,c=n?t.height:t.width,u=n?t.top:t.left,h=n?t.bottom:t.right,d=!1;if(!o){if(a&&nf<c*r){if(!Wu&&(Vu===1?l>u+c*s/2:l<h-c*s/2)&&(Wu=!0),Wu)d=!0;else if(Vu===1?l<u+nf:l>h-nf)return-Vu}else if(l>u+c*(1-r)/2&&l<h-c*(1-r)/2)return I6(e)}return d=d||o,d&&(l<u+c*s/2||l>h-c*s/2)?l>u+c/2?1:-1:0}function I6(i){return vr(fe)<vr(i)?1:-1}function E6(i){for(var e=i.tagName+i.className+i.src+i.href+i.textContent,t=e.length,n=0;t--;)n+=e.charCodeAt(t);return n.toString(36)}function w6(i){Cg.length=0;for(var e=i.getElementsByTagName("input"),t=e.length;t--;){var n=e[t];n.checked&&Cg.push(n)}}function rf(i){return setTimeout(i,0)}function Hm(i){return clearTimeout(i)}A0&&Mt(document,"touchmove",function(i){(Ve.active||Il)&&i.cancelable&&i.preventDefault()});Ve.utils={on:Mt,off:_t,css:qe,find:GS,is:function(e,t){return!!Mr(e,t,e,!1)},extend:o6,throttle:OS,closest:Mr,toggleClass:Qn,clone:kS,index:vr,nextTick:rf,cancelNextTick:Hm,detectDirection:US,getChild:Ic};Ve.get=function(i){return i[ar]};Ve.mount=function(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(n){if(!n.prototype||!n.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(n));n.utils&&(Ve.utils=fs(fs({},Ve.utils),n.utils)),Hh.mount(n)})};Ve.create=function(i,e){return new Ve(i,e)};Ve.version=n6;var yi=[],fu,qm,Xm=!1,Rp,Tp,Ig,gu;function b6(){function i(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return i.prototype={dragStarted:function(t){var n=t.originalEvent;this.sortable.nativeDraggable?Mt(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Mt(document,"pointermove",this._handleFallbackAutoScroll):n.touches?Mt(document,"touchmove",this._handleFallbackAutoScroll):Mt(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var n=t.originalEvent;!this.options.dragOverBubble&&!n.rootEl&&this._handleAutoScroll(n)},drop:function(){this.sortable.nativeDraggable?_t(document,"dragover",this._handleAutoScroll):(_t(document,"pointermove",this._handleFallbackAutoScroll),_t(document,"touchmove",this._handleFallbackAutoScroll),_t(document,"mousemove",this._handleFallbackAutoScroll)),RI(),sf(),a6()},nulling:function(){Ig=qm=fu=Xm=gu=Rp=Tp=null,yi.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,n){var r=this,s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,a=document.elementFromPoint(s,o);if(Ig=t,n||this.options.forceAutoScrollFallback||Yh||Zs||Bu){Lp(t,this.options,a,n);var l=Io(a,!0);Xm&&(!gu||s!==Rp||o!==Tp)&&(gu&&RI(),gu=setInterval(function(){var c=Io(document.elementFromPoint(s,o),!0);c!==l&&(l=c,sf()),Lp(t,r.options,c,n)},10),Rp=s,Tp=o)}else{if(!this.options.bubbleScroll||Io(a,!0)===as()){sf();return}Lp(t,this.options,Io(a,!1),!1)}}},Vs(i,{pluginName:"scroll",initializeByDefault:!0})}function sf(){yi.forEach(function(i){clearInterval(i.pid)}),yi=[]}function RI(){clearInterval(gu)}var Lp=OS(function(i,e,t,n){if(e.scroll){var r=(i.touches?i.touches[0]:i).clientX,s=(i.touches?i.touches[0]:i).clientY,o=e.scrollSensitivity,a=e.scrollSpeed,l=as(),c=!1,u;qm!==t&&(qm=t,sf(),fu=e.scroll,u=e.scrollFn,fu===!0&&(fu=Io(t,!0)));var h=0,d=fu;do{var f=d,g=Ci(f),p=g.top,m=g.bottom,v=g.left,y=g.right,A=g.width,_=g.height,C=void 0,I=void 0,b=f.scrollWidth,S=f.scrollHeight,R=qe(f),P=f.scrollLeft,w=f.scrollTop;f===l?(C=A<b&&(R.overflowX==="auto"||R.overflowX==="scroll"||R.overflowX==="visible"),I=_<S&&(R.overflowY==="auto"||R.overflowY==="scroll"||R.overflowY==="visible")):(C=A<b&&(R.overflowX==="auto"||R.overflowX==="scroll"),I=_<S&&(R.overflowY==="auto"||R.overflowY==="scroll"));var x=C&&(Math.abs(y-r)<=o&&P+A<b)-(Math.abs(v-r)<=o&&!!P),D=I&&(Math.abs(m-s)<=o&&w+_<S)-(Math.abs(p-s)<=o&&!!w);if(!yi[h])for(var k=0;k<=h;k++)yi[k]||(yi[k]={});(yi[h].vx!=x||yi[h].vy!=D||yi[h].el!==f)&&(yi[h].el=f,yi[h].vx=x,yi[h].vy=D,clearInterval(yi[h].pid),(x!=0||D!=0)&&(c=!0,yi[h].pid=setInterval((function(){n&&this.layer===0&&Ve.active._onTouchMove(Ig);var O=yi[this.layer].vy?yi[this.layer].vy*a:0,N=yi[this.layer].vx?yi[this.layer].vx*a:0;typeof u=="function"&&u.call(Ve.dragged.parentNode[ar],N,O,i,Ig,yi[this.layer].el)!=="continue"||DS(yi[this.layer].el,N,O)}).bind({layer:h}),24))),h++}while(e.bubbleScroll&&d!==l&&(d=Io(d,!1)));Xm=c}},30),VS=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,s=e.activeSortable,o=e.dispatchSortableEvent,a=e.hideGhostForTarget,l=e.unhideGhostForTarget;if(t){var c=n||s;a();var u=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,h=document.elementFromPoint(u.clientX,u.clientY);l(),c&&!c.el.contains(h)&&(o("spill"),this.onSpill({dragEl:r,putSortable:n}))}};function vA(){}vA.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Ic(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:VS};Vs(vA,{pluginName:"revertOnSpill"});function yA(){}yA.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable,r=n||this.sortable;r.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),r.animateAll()},drop:VS};Vs(yA,{pluginName:"removeOnSpill"});Ve.mount(new b6);Ve.mount(yA,vA);var S6={_createDraggableElement:function(i,e){navigator.userAgent.match(/chrome|chromium|crios/i)?Ve.create(i,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(t){e._onDragAndDropLayerClick(t)}}):Ve.create(i,{handle:".GPlayerName",draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(t){e._onDragAndDropLayerClick(t)}})},_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPlayerSwitcher"),i.className="GPwidget gpf-widget",i},_createMainLayersShowElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPshowLayersList"),i.type="checkbox",i},_createMainLayersElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPlayersList"),i.className="GPpanel gpf-panel fr-modal",i},_createMainLayersDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createMainPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon-layerswitcher fr-btn",e.htmlFor=this._addUID("GPshowLayersList"),e.title="Afficher/masquer le gestionnaire de couches",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";if(t.target.setAttribute("aria-pressed",!n),document.getElementById(i._addUID("GPshowLayersList")).checked=n,document.getElementById(i._addUID("GPshowLayersList")).checked){for(var r=document.getElementsByClassName("GPlayerInfoOpened"),s=0;s<r.length;s++)r[s].className="GPlayerInfo";document.getElementById(i._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";if(t.target.setAttribute("aria-pressed",!n),document.getElementById(i._addUID("GPshowLayersList")).checked){for(var r=document.getElementsByClassName("GPlayerInfoOpened"),s=0;s<r.length;s++)r[s].className="GPlayerInfo";document.getElementById(i._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}}),e},_createMainInfoElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPlayerInfoPanel"),i.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",i},_createContainerLayerElement:function(i){var e=document.createElement("div");e.id=this._addUID("GPlayerSwitcher_ID_"+i.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(i));for(var t=this._createAdvancedToolShowElement(i),n=0;n<t.length;n++)e.appendChild(t[n]);return e.appendChild(this._createAdvancedToolElement(i)),e},_createBasicToolElement:function(i){var e=document.createElement("div");e.id=this._addUID("GPbasicTools_ID_"+i.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(i));for(var t=this._createBasicToolVisibilityElement(i),n=0;n<t.length;n++)e.appendChild(t[n]);return e},_createBasicToolNameElement:function(i){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+i.id),e.className="GPlayerName gpf-label fr-label",e.title=i.description||i.title,e.innerHTML=i.title,e},_createBasicToolVisibilityElement:function(i){var e=[],t=typeof i.visibility<"u"?i.visibility:!0,n=this._addUID("GPvisibility_ID_"+i.id),r=document.createElement("input");r.id=n,r.type="checkbox",r.checked=t;var s=document.createElement("label");s.htmlFor=n,s.id=this._addUID("GPvisibilityPicto_ID_"+i.id),s.className="GPlayerVisibility gpf-label fr-label",s.title="Afficher/masquer la couche";var o=this;return r.addEventListener?r.addEventListener("click",function(a){o._onVisibilityLayerClick(a)}):r.attachEvent&&r.attachEvent("onclick",function(a){o._onVisibilityLayerClick(a)}),e.push(r),e.push(s),e},_createAdvancedToolShowElement:function(i){var e=[],t=document.createElement("label");t.id=this._addUID("GPshowAdvancedToolsPicto_ID_"+i.id),t.htmlFor=this._addUID("GPshowAdvancedTools_ID_"+i.id),t.title="Plus d'outils",t.className="GPshowMoreOptions GPshowLayerAdvancedTools gpf-label fr-label";var n=document.createElement("input");return n.type="checkbox",n.id=this._addUID("GPshowAdvancedTools_ID_"+i.id),e.push(n),e.push(t),e},_createAdvancedToolElement:function(i){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+i.id),e.className="GPlayerAdvancedTools",e.appendChild(this._createAdvancedToolDeleteElement(i)),i.title&&i.description&&e.appendChild(this._createAdvancedToolInformationElement(i)),i.type!=="feature")for(var t=this._createAdvancedToolOpacityElement(i),n=0;n<t.length;n++)e.appendChild(t[n]);return e},_createAdvancedToolDeleteElement:function(i){var e=document.createElement("div");e.id=this._addUID("GPremove_ID_"+i.id),e.className="GPlayerRemove",e.title="Supprimer la couche",e.layerId=i.id;var t=this;return e.addEventListener?e.addEventListener("click",function(n){t._onDropLayerClick(n)}):e.attachEvent&&e.attachEvent("onclick",function(n){t._onDropLayerClick(n)}),e},_createAdvancedToolInformationElement:function(i){var e=document.createElement("div");e.id=this._addUID("GPinfo_ID_"+i.id),e.className="GPlayerInfo",e.title="Informations/lgende",e.layerId=i.id;var t=this;return e.addEventListener?e.addEventListener("click",function(n){t._onOpenLayerInfoClick(n)}):e.attachEvent&&e.attachEvent("onclick",function(n){t._onOpenLayerInfoClick(n)}),e},_createAdvancedToolOpacityElement:function(i){var e=[],t=document.createElement("div");t.id=this._addUID("GPopacity_ID_"+i.id),t.className="GPlayerOpacity",t.title="Opacit";var n=typeof i.opacity<"u"?i.opacity:1;n=Math.round(n*100);var r=document.createElement("input");r.id=this._addUID("GPopacityValueDiv_ID_"+i.id),r.type="range",r.value=n,r.ariaLabel="Opacit";var s=this;r.addEventListener?r.addEventListener("change",function(l){s._onChangeLayerOpacity(l)}):r.attachEvent&&r.attachEvent("onchange",function(l){s._onChangeLayerOpacity(l)}),r.addEventListener?r.addEventListener("input",function(l){s._onChangeLayerOpacity(l)}):r.attachEvent&&r.attachEvent("oninput",function(l){s._onChangeLayerOpacity(l)}),t.appendChild(r);var o=document.createElement("div");o.id=this._addUID("GPopacityValueDiv_ID_"+i.id),o.className="GPlayerOpacityValue";var a=document.createElement("span");return a.id=this._addUID("GPopacityValue_ID_"+i.id),a.innerHTML=n+"%",o.appendChild(a),e.push(t),e.push(o),e},_createContainerLayerInfoElement:function(i){var e=document.createElement("div");e.id=this._addUID("GPlayerInfoContent");var t=document.createElement("div");if(t.id=this._addUID("GPlayerInfoTitle"),t.innerHTML=i.title,e.appendChild(t),i.quicklookUrl){var n=document.createElement("div");n.id=this._addUID("GPlayerInfoQuicklook"),n.title="Afficher un aperu de la couche";var r=document.createElement("a");r.href=i.quicklookUrl,r.appendChild(n),e.appendChild(r)}var s=document.createElement("div");s.id=this._addUID("GPlayerInfoClose"),s.title="Fermer la fentre";var o=this,a=function(){document.getElementById(o._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed";for(var P=document.getElementsByClassName("GPlayerInfoOpened"),w=0;w<P.length;w++)P[w].className="GPlayerInfo"};s.addEventListener?s.addEventListener("click",a):s.attachEvent&&s.attachEvent("onclick",a),e.appendChild(s);var l=document.createElement("div");if(l.id=this._addUID("GPlayerInfoDescription"),l.innerHTML=i.description,e.appendChild(l),i.metadata){var c=document.createElement("div");c.id=this._addUID("GPlayerInfoMetadata");var u=document.createElement("div");u.className="GPlayerInfoSubtitle",u.innerHTML="Mtadonnes",c.appendChild(u);for(var h=0;h<i.metadata.length;h++){var d=i.metadata[h].url,f=document.createElement("div");f.className="GPlayerInfoLink";var g=document.createElement("a");g.href=d,g.innerHTML=d,f.appendChild(g),c.appendChild(f)}i.metadata.length!==0&&e.appendChild(c)}if(i.legends){var p=document.createElement("div");p.id=this._addUID("GPlayerInfoLegend");var m=document.createElement("div");m.className="GPlayerInfoSubtitle",m.innerHTML="Lgende",p.appendChild(m);for(var v={},y=i.maxScaleDenominator||56e7,A=0;A<i.legends.length;A++){var _=i.legends[A].minScaleDenominator;if(_){var C=_.toString();_=Math.round(parseInt(C.substring(0,3),10)/10)*Math.pow(10,C.length-2)}else _=270;v[_]=i.legends[A]}for(var I in v)if(v.hasOwnProperty(I)){var b=v[I].url;if(typeof b=="string"&&b.toLowerCase().indexOf("nolegend.jpg")===-1){var S=document.createElement("div");S.className="GPlayerInfoLink",y=v[I].maxScaleDenominator||y;var R=document.createElement("a");R.href=b,R.innerHTML="Du 1/"+I+" au 1/"+y,S.appendChild(R),p.appendChild(S)}else delete v[I]}Object.keys(v).length!==0&&e.appendChild(p)}return e}},la=ot.getLogger("layerswitcher"),gs=class WS extends Xn{constructor(e){e=e||{};var t=e.options||{},n=e.layers||[];if(super({element:t.element,target:t.target,render:t.render}),!(this instanceof WS))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(n))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof t!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this._initialize(t,n),this.container=this._initContainer(t),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",n=>{var r=n.element,s;r.hasOwnProperty("gpLayerId")?s=r.gpLayerId:(s=this._layerId,r.gpLayerId=s,this._layerId++),this._layers[s]||this.addLayer(r)}),this._listeners.onRemoveListener=e.getLayers().on("remove",n=>{var r=n.element,s=r.gpLayerId;this._layers[s]&&this.removeLayer(r)});else{gi(this._listeners.onMoveListener),gi(this._listeners.onAddListener),gi(this._listeners.onRemoveListener);for(var t=this._layersOrder.length-1;t>=0;t--)this._layersOrder[t].layer.setZIndex(0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}addLayer(e,t){var n=this.getMap();if(t=t||{},!e){la.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var r=e.gpLayerId;if(typeof r>"u"){la.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var s=!1;if(n.getLayers().forEach(m=>{m.gpLayerId===r&&(s=!0)}),!s){la.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[r]){for(var d in t)t.hasOwnProperty(d)&&(this._layers[r][d]=t[d]);if(t.title){var f=document.getElementById(this._addUID("GPname_ID_"+r));f&&(f.innerHTML=t.title,f.title=t.description||t.title)}var g=document.getElementById(this._addUID("GPinfo_ID_"+r));if(!document.getElementById(this._addUID("GPinfo_ID_"+r))&&t.description){var p=document.getElementById(this._addUID("GPadvancedTools_ID_"+r));p&&p.appendChild(this._createAdvancedToolInformationElement({id:r}))}g&&g.className==="GPlayerInfoOpened"&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",g.className="GPlayerInfo")}else{var o=this.getLayerInfo(e)||{},a=e.getOpacity(),l=e.getVisible(),c=this.isInRange(e,n),u={layer:e,id:r,opacity:a??1,visibility:l??!0,inRange:c??!0,title:t.title!=null?t.title:o._title||r,description:t.description||o._description||null,legends:t.legends||o._legends||[],metadata:t.metadata||o._metadata||[],quicklookUrl:t.quicklookUrl||o._quicklookUrl||null};this._layers[r]=u;var h=this._createLayerDiv(u);this._layers[r].div=h,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(u),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(h,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",m=>this._updateLayerOpacity(m)),this._listeners.updateLayerVisibility=e.on("change:visible",m=>this._updateLayerVisibility(m)),this._layers[r].onZIndexChangeEvent==null&&(this._layers[r].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}}removeLayer(e){if(e){gi(this._listeners.updateLayerOpacity),gi(this._listeners.updateLayerVisibility),la.trace(e);var t=e.gpLayerId,n=document.getElementById(this._addUID("GPlayersList")).firstChild,r=document.getElementById(this._addUID("GPinfo_ID_"+t));r&&r.className==="GPlayerInfoOpened"&&(document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed",r.className="GPlayerInfo");var s=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+t));s&&n.removeChild(s);var o=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(o,1),this._lastZIndex--;for(var a=this._layersOrder,l=0;l<a.length;l++)a[l].layer.setZIndex(this._lastZIndex-l);delete this._layers[t]}}setCollapsed(e){if(e===void 0){la.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var t=!document.getElementById(this._addUID("GPshowLayersList")).checked;if(!(e&&t||!e&&!t)){if(!t){for(var n=document.getElementsByClassName("GPlayerInfoOpened"),r=0;r<n.length;r++)n[r].className="GPlayerInfo";document.getElementById(this._addUID("GPlayerInfoPanel")).className="GPlayerInfoPanelClosed"}document.getElementById(this._addUID("GPshowLayersList")).checked=!e}}getCollapsed(){return this.collapsed}setRemovable(e,t){if(e){var n=e.gpLayerId;if(n==null){la.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var r=document.getElementById(this._addUID("GPremove_ID_"+n));r&&(t===!1?r.style.display="none":t===!0&&(r.style.display="block"))}}_initialize(e,t){this._uid=Xe.generate(),this.options=e,this.options.layers=t,this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=e.collapsed!==void 0?e.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var n=0;n<t.length;n++){var r=t[n].layer;if(r){var s;r.hasOwnProperty("gpLayerId")?s=r.gpLayerId:(s=this._layerId,r.gpLayerId=s,this._layerId++);var o=t[n].config||{},a=r.getOpacity(),l=r.getVisible(),c={layer:r,id:s,opacity:a??1,visibility:l??!0,title:o.title!=null?o.title:o.id?o.id:s,description:o.description||null,legends:o.legends||[],metadata:o.metadata||[],quicklookUrl:o.quicklookUrl||null};this._layers[s]=c}}}_initContainer(){var e=this._createMainContainerElement(),t=this._createMainLayersShowElement();e.appendChild(t),this.collapsed?this.collapsed=!0:(t.checked="checked",this.collapsed=!1);var n=this,r=function(c){this.collapsed=!c.target.checked,this.dispatchEvent("change:collapsed")};t.addEventListener("click",function(c){r.call(n,c)});var s=this._createMainPictoElement();e.appendChild(s);var o=this._createMainLayersElement();e.appendChild(o);var a=this._layerListContainer=this._createMainLayersDivElement();o.appendChild(a),this._createDraggableElement(a,this);var l=this._createMainInfoElement();return e.appendChild(l),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(l=>{var c;l.hasOwnProperty("gpLayerId")?c=l.gpLayerId:(c=this._layerId,l.gpLayerId=c,this._layerId++);var u=this.getLayerInfo(l)||{};if(this._layers[c])this._layers[c].opacity=l.getOpacity(),this._layers[c].visibility=l.getVisible(),this._layers[c].inRange=this.isInRange(l,e);else{var h=l.getOpacity(),d=l.getVisible(),f=this.isInRange(l,e),g={layer:l,id:c,opacity:h??1,visibility:d??!0,inRange:f??!0,title:u._title||c,description:u._description||null,legends:u._legends||[],metadata:u._metadata||[],quicklookUrl:u._quicklookUrl||null};this._layers[c]=g}if(this._listeners.updateLayerOpacity=l.on("change:opacity",m=>this._updateLayerOpacity(m)),this._listeners._updateLayerVisibility=l.on("change:visible",m=>this._updateLayerVisibility(m)),l.getZIndex!==void 0){var p=l.getZIndex()||0;(!this._layersIndex[p]||!Array.isArray(this._layersIndex[p]))&&(this._layersIndex[p]=[]),this._layersIndex[p].push(this._layers[c])}});for(var t in this._layersIndex)if(this._layersIndex.hasOwnProperty(t))for(var n=this._layersIndex[t],r=0;r<n.length;r++)this._layersOrder.unshift(n[r]),this._lastZIndex++,n[r].layer.setZIndex(this._lastZIndex),this._layers[n[r].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[n[r].layer.gpLayerId].onZIndexChangeEvent=n[r].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var s=0;s<this._layersOrder.length;s++){var o=this._layersOrder[s],a=this._createLayerDiv(o);this._layerListContainer.appendChild(a),this._layers[o.id].div=a}}_createLayerDiv(e){var t=e.legends&&e.legends.length!==0,n=e.metadata&&e.metadata.length!==0,r=e.quicklookUrl;(t||n||r)&&(e.displayInformationElement=!0);var s=this._createContainerLayerElement(e);return e.inRange||s.classList.add("outOfRange"),s}_onChangeLayerOpacity(e){var t=e.target.id,n=Xe.index(t),r=this._layers[n].layer,s=e.target.value,o=document.getElementById(this._addUID("GPopacityValue_ID_"+n));o.innerHTML=s+"%",r.setOpacity(s/100)}_updateLayerOpacity(e){var t=e.target.getOpacity();t>1&&(t=1),t<0&&(t=0);var n=e.target.gpLayerId,r=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+n));r&&(r.value=Math.round(t*100));var s=document.getElementById(this._addUID("GPopacityValue_ID_"+n));s&&(s.innerHTML=Math.round(t*100)+"%")}_onVisibilityLayerClick(e){var t=e.target.id,n=Xe.index(t),r=this._layers[n].layer;r.setVisible(e.target.checked)}_updateLayerVisibility(e){var t=e.target.getVisible(),n=e.target.gpLayerId,r=document.getElementById(this._addUID("GPvisibility_ID_"+n));r&&(r.checked=t)}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var t,n;e.getLayers().forEach(c=>{n=c.gpLayerId,gi(this._layers[n].onZIndexChangeEvent),this._layers[n].onZIndexChangeEvent=null,t=null,c.getZIndex!==void 0&&(t=c.getZIndex(),(!this._layersIndex[t]||!Array.isArray(this._layersIndex[t]))&&(this._layersIndex[t]=[]),this._layersIndex[t].push(this._layers[n]))}),this._lastZIndex=0,this._layersOrder=[];for(var r in this._layersIndex)if(this._layersIndex.hasOwnProperty(r))for(var s=this._layersIndex[r],o=0;o<s.length;o++)this._layersOrder.unshift(s[o]),this._lastZIndex++,this._layers[s[o].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[s[o].layer.gpLayerId].onZIndexChangeEvent=s[o].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(;this._layerListContainer.firstChild;)this._layerListContainer.removeChild(this._layerListContainer.firstChild);for(var a=0;a<this._layersOrder.length;a++){var l=this._layersOrder[a];this._layerListContainer.appendChild(l.div)}}else la.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var t=e.target.id,n=Xe.index(t),r=this._layers[n],s,o;if(t=document.getElementById(e.target.id),t.className==="GPlayerInfoOpened"){t.classList!==void 0&&(t.classList.remove("GPlayerInfoOpened"),t.classList.add("GPlayerInfo")),s=document.getElementById(this._addUID("GPlayerInfoPanel")),s.classList!==void 0&&(s.classList.remove("GPpanel"),s.classList.remove("GPlayerInfoPanelOpened"),s.classList.add("GPlayerInfoPanelClosed")),o=document.getElementById(this._addUID("GPlayerInfoContent")),s.removeChild(o);return}for(var a=document.getElementsByClassName("GPlayerInfoOpened"),l=0;l<a.length;l++)a[l].className="GPlayerInfo";t.classList!==void 0&&(t.classList.remove("GPlayerInfo"),t.classList.add("GPlayerInfoOpened")),s=document.getElementById(this._addUID("GPlayerInfoPanel")),s.classList!==void 0&&(s.classList.add("GPpanel"),s.classList.remove("GPlayerInfoPanelClosed"),s.classList.add("GPlayerInfoPanelOpened")),o=document.getElementById(this._addUID("GPlayerInfoContent")),o&&s.removeChild(o);var c={title:r.title,description:r.description,quicklookUrl:r.quicklookUrl,metadata:r.metadata,legends:r.legends},u=r.layer.getMaxResolution();u===1/0?c._maxScaleDenominator=56e7:c._maxScaleDenominator=Math.round(u/28e-5);var h=this._createContainerLayerInfoElement(c);s.appendChild(h)}_onDropLayerClick(e){var t=e.target.id,n=Xe.index(t),r=this._layers[n].layer;this.getMap().getLayers().remove(r)}_onDragAndDropLayerClick(){var e=this.getMap(),t=document.querySelectorAll("div.GPlayerSwitcher_layer"),n=t.length;this._layersOrder=[];for(var r=0;r<t.length;r++){var s=t[r].id,o=Xe.index(s),a=this._layers[o].layer;gi(this._layers[o].onZIndexChangeEvent),this._layers[o].onZIndexChangeEvent=null,a.setZIndex&&(a.setZIndex(n),this._layersOrder.push(this._layers[o]),n--),this._layers[o].onZIndexChangeEvent==null&&(this._layers[o].onZIndexChangeEvent=a.on("change:zIndex",()=>this._updateLayersOrder()))}e.updateSize()}_onMapMoveEnd(e){e.getLayers().forEach(t=>{var n=t.gpLayerId;if(this._layers[n]){var r=this._layers[n],s;this.isInRange(t,e)&&!r.inRange?(r.inRange=!0,s=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+n)),s.classList.remove("outOfRange")):!this.isInRange(t,e)&&r.inRange&&(r.inRange=!1,s=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+n)),s.classList.add("outOfRange"))}})}getLayerDOMId(e){var t=null;return this.getMap().getLayers().forEach(n=>{n===e&&(t=n.hasOwnProperty("gpLayerId")?n.gpLayerId:null)}),t!==null?this._addUID("GPlayerSwitcher_ID_"+t):null}isInRange(e,t){if(t){var n=t.getView().getResolution();if(n>e.getMaxResolution()||n<e.getMinResolution())return!1;var r=t.getView().calculateExtent(t.getSize()),s=e.getExtent();return!(s&&!Jt(r,s))}}getLayerInfo(e){var t={};if(e.getProperties!==void 0&&e.getSource!==void 0){var n=e.getProperties(),r=n.source;r&&(t._title=r._title||n.id||"",t._description=r._description||"",t._quicklookUrl=r._quicklookUrl||"",t._metadata=r._metadata||[],t._legends=r._legends||[])}return t}};Object.assign(gs.prototype,S6);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=gs);var x6={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPgetFeatureInfo"),i.className="GPwidget gpf-widget",i},_createMainPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPgetFeatureInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPgetFeatureInfoPicto gpf-btn gpf-btn-icon-getfeatureinfo fr-btn",e.title="activer/desactiver l'interrogation des couches",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onActivateGetFeatureInfoElementChange(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onActivateGetFeatureInfoElementChange(t)}),e}},ci=ot.getLogger("getfeatureinfo"),YS=class HS extends Xn{constructor(e){e=e||{};var t=e.options||{},n=e.layers||[];if(super({element:t.element,target:t.target,render:t.render}),!(this instanceof HS))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(n))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof t!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this._initialize(t,n),this._container=this._initContainer(t),this.element?this.element.appendChild(this._container):this.element=this._container,this}_initialize(e,t){if(this._uid=Xe.generate(),this.options=e,this.options.layers=t,this._events={dblclick:!1,singleclick:!1,contextmenu:!1},this._eventsHandler={},typeof e.auto<"u"&&typeof e.auto!="boolean"){ci.log("[ERROR] GetFeatureInfo:_initialize - auto parameter should be a boolean");return}if(this._auto=e.auto||!1,typeof e.active<"u"&&typeof e.active!="boolean"){ci.log("[ERROR] GetFeatureInfo:_initialize - active parameter should be a boolean");return}if(this._active=typeof e.active>"u"?!0:e.active,e.defaultEvent&&typeof e.defaultEvent!="string"){ci.log("[ERROR] GetFeatureInfo:_initialize - defaultEvent parameter should be a string");return}if(this._defaultEvent=e.defaultEvent||"singleclick",!this._isValidEvent(this._defaultEvent)){ci.log("[ERROR] GetFeatureInfo:_initialize - _defaultEvent '"+this._defaultEvent+"' is not a valid event");return}if(e.defaultInfoFormat&&typeof e.defaultInfoFormat!="string"){ci.log("[ERROR] GetFeatureInfo:_initialize - defaultInfoFormat parameter should be a string");return}if(this._defaultInfoFormat=e.defaultInfoFormat||"text/html",e.cursorStyle&&typeof e.cursorStyle!="string"){ci.log("[ERROR] GetFeatureInfo:_initialize - cursorStyle parameter should be a string");return}if(this._cursorStyle=e.cursorStyle||"pointer",e.proxyUrl){if(typeof e.proxyUrl!="string"){ci.log("[ERROR] GetFeatureInfo:_initialize - proxyUrl parameter should be a string");return}this._proxyUrl=e.proxyUrl}if(e.noProxyDomains){if(!Array.isArray(e.noProxyDomains)){ci.log("[ERROR] GetFeatureInfo:_initialize - noProxyDomains parameter should be a array");return}this._noProxyDomains=e.noProxyDomains}if(typeof e.autoPan<"u"&&typeof e.autoPan!="boolean"){ci.log("[ERROR] GetFeatureInfo:_initialize - autoPan parameter should be a boolean");return}if(this._autoPan=typeof e.autoPan>"u"?!0:e.autoPan,e.autoPanAnimation){if(e.autoPanAnimation.duration&&typeof e.autoPanAnimation.duration!="number"){ci.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : duration should be a number.");return}if(e.autoPanAnimation.easing&&typeof e.autoPanAnimation.easing!="function"){ci.log("[ERROR] GetFeatureInfo:_initialize - autoPanAnimation parameter is invalid : easing should be a ol.easing function or a custom function.");return}this._autoPanAnimation=e.autoPanAnimation}if(e.autoPanMargin){if(typeof e.autoPanMargin!="number"){ci.log("[ERROR] GetFeatureInfo:_initialize - autoPanMargin parameter should be a number");return}this._autoPanMargin=e.autoPanMargin}if(!Array.isArray(t)){ci.log("[ERROR] GetFeatureInfo:_initialize - layers parameter should be an array");return}this._setLayers(t),this._activateGetFeatureInfoButton=null}setMap(e){if(e){if(this._updateEvents(e),this._cursorStyle&&this._active&&this._activateCursor(!0,e),e.getLayers().on("remove",n=>{for(var r=0;r<this._layers.length;++r)if(this._layers[r].obj===n.element){this._layers.splice(r,1);break}this._updateEvents(e)}),this._auto){var t=!1;e.getLayers().forEach(n=>{var r=Gu.getLayerFormat(n);!this._hasLayer(n)&&r==="vector"&&(this._layers.push({obj:n}),t=!0)}),t&&this._updateEvents(e),e.getLayers().on("add",n=>{var r=Gu.getLayerFormat(n.element);r==="vector"&&this._layers.push({obj:n.element}),this._updateEvents(e)})}}else this._clearEvents(),this._activateCursor(!1);super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getLayers(){return this._layers}setDefaultEvent(e){if(typeof e!="string"){ci.log("[ERROR] GetFeatureInfo:setDefaultEvent - eventName parameter should be a string");return}if(!e||!this._isValidEvent(e)){ci.log("[ERROR] GetFeatureInfo:setDefaultEvent - event '"+e+"' is not allowed.");return}this._defaultEvent=e,this._updateEvents()}setCursorStyle(e){if(typeof e!="string"){ci.log("[ERROR] GetFeatureInfo:setCursorStyle - cursorStyle parameter should be a string");return}this._active&&(!this._cursorStyle&&e?this._activateCursor(!0):this._cursorStyle&&!e&&this._activateCursor(!1)),this._cursorStyle=e}setActive(e){this._setActive(e),this._activateGetFeatureInfoButton.setAttribute("aria-pressed",e)}_setActive(e){if(typeof e!="boolean"){ci.log("[ERROR] GetFeatureInfo:_setActive - active parameter should be a boolean");return}this._active!==e&&(this._active=e,this._cursorStyle&&this._activateCursor(e))}isActive(){return this._active}setHidden(e){this.element.style.visibility=e?"hidden":""}isHidden(){return this.element.style.visibility==="hidden"}setLayers(e){this._setLayers(e),this._updateEvents()}_isValidEvent(e){return Object.keys(this._events).indexOf(e)>-1}_activateEvent(e,t){var n=this,r=function(s){Gu.onDisplayFeatureInfo(s,n)};e==="contextmenu"?t.getViewport().addEventListener(e,r):t.on(e,r),this._eventsHandler[e]=r,this._events[e]=!0}_deactivateEvent(e,t){e==="contextmenu"?t.getViewport().removeEventListener(e,this._eventsHandler[e]):t.un(e,this._eventsHandler[e]),delete this._eventsHandler[e],this._events[e]=!1}_updateEvents(e){e||(e=this.getMap());for(var t=[],n=0;n<this._layers.length;++n){var r=this._layers[n].event?this._layers[n].event:this._defaultEvent;t.indexOf(r)<0&&t.push(r)}for(var s in this._events)!this._events[s]&&t.indexOf(s)>=0?this._activateEvent(s,e):this._events[s]&&t.indexOf(s)<0&&this._deactivateEvent(s,e)}_clearEvents(){var e=this.getMap();for(var t in this._events)this._events[t]&&this._deactivateEvent(t,e)}_hasLayer(e){for(var t=0;t<this._layers.length;++t)if(this._layers[t].obj===e)return!0;return!1}_activateCursor(e,t){if(t||(t=this.getMap()),e){if(this._eventsHandler.hasOwnProperty("pointermove")){ci.log("[ERROR] _activateCursor - inconsistent state: pointermove event handler already registered");return}var n=this,r=function(s){var o=t.forEachFeatureAtPixel(s.pixel,(a,l)=>{for(var c=n.getLayers(),u=0;u<c.length;++u)if(c[u].obj===l)return!0});o?t.getTargetElement().style.cursor=n._cursorStyle:t.getTargetElement().style.cursor=""};this._eventsHandler.pointermove=r,t.on("pointermove",r)}else this._eventsHandler.hasOwnProperty("pointermove")&&(t.un("pointermove",this._eventsHandler.pointermove),delete this._eventsHandler.pointermove),t.getTargetElement().style.cursor=""}_setLayers(e){if(!e||!Array.isArray(e)){ci.log("[ERROR] GetFeatureInfo:setLayers - gfiLayers parameter should be a array");return}this._layers=[];for(var t=0;t<e.length;++t){var n=this._layers.push({})-1;e[t].event&&(this._isValidEvent(e[t].event)?this._layers[n].event=e[t].event:ci.log("[ERROR] GetFeatureInfo:setLayers - layer event '"+this._layers[t].event+"' is not allowed.")),e[t].infoFormat&&(this._layers[n].infoFormat=e[t].infoFormat),this._layers[n].obj=e[t].obj}}onActivateGetFeatureInfoElementChange(e){var t=e.target.getAttribute("aria-pressed");this._setActive(t==="true")}_initContainer(e){var t=this._createMainContainerElement(),n=this._createMainPictoElement();if(t.appendChild(n),typeof e.hidden<"u"){if(typeof e.hidden!="boolean"){ci.log("[ERROR] GetFeatureInfo:_initContainer - hidden parameter should be a boolean");return}e.hidden&&(t.style.visibility="hidden")}return t}};Object.assign(YS.prototype,x6);window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=YS);var TI={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetire","arodrome","rservoir","administratif","construction linaire","construction ponctuelle","construction surfacique","cours d'eau","dtail hydrographique","dtail orographique","quipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par cble","zone d'activit ou d'intrt","zone d'habitation","lieu-dit non habit"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code dpartement (INSEE)",description:"Code INSEE du dpartement (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"city",title:"Nom commune",description:"Nom de la commune"},{name:"oldmunicipalitycode",title:"Commune absorbe",description:"Commune absorbe : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractres (chiffre et/ou lettre)"},{name:"number",title:"Numro",description:"Numro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numro de la feuille cadastrale"}]},zoomToResultsByDefault:function(i){var e=15,t=i.service,n=i.fields,r=i.type,s={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return t==="SuggestedLocation"&&r==="PositionOfInterest"&&(e=s[n.classification]),t==="GeocodedLocation"&&r==="PositionOfInterest"&&(e=s[n.importance]||14),r==="StreetAddress"&&(e=17),r==="CadastralParcel"&&(e=17),e}},ts={getGeocodedLocationFreeform:function(i){var e=i.placeAttributes;if(e.label)return e.label;if(i.type==="PositionOfInterest"){var t=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?t=t+", "+e.category[1]:e.postcode&&(t=t+", "+e.postcode[0],e.city&&(t=t+" "+e.city[0])),t}else return i.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:i.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(i){if(i.fullText)return i.fullText;var e=[];return e.push(i.street||""),e.push(i.postalCode||""),e.push(i.commune||""),i.type==="PositionOfInterest"&&(e.push(i.poi||""),e.push(i.kind||"")),e.join(" - ")}},P6={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPsearchEngine"),i.className="GPwidget gpf-widget",i},_createShowSearchEnginePictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchEnginePicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon-search fr-btn",e.title="Afficher/masquer la recherche par lieux",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var r=document.getElementById(i._addUID("GPshowAdvancedSearch"));r&&(r.style.display=null,document.getElementById(i._addUID("GPadvancedSearchPanel")).style.display="none");var s="#GPsearchInput-"+i._uid;document.querySelector(s+" input").disabled=!1,i.onShowSearchEngineClick()}),e},_createSearchInputElement:function(i){var e=this,t=document.createElement("form");t.id=this._addUID("GPsearchInput"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(r){return r.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(r)),!1});var n=document.createElement("input");return n.id=this._addUID("GPsearchInputText"),n.className="GPsearchInputText gpf-input fr-input",n.type="text",n.placeholder=i,n.autocomplete="off",n.addEventListener("keyup",function(r){var s=r.which||r.keyCode;s===13||s===10||s===38||s===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),n.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(r))}),n.addEventListener("keydown",function(r){var s=r.which||r.keyCode,o=document.getElementById(e._addUID("GPautocompleteResults"));if(o){var a=o.getElementsByClassName("GPautoCompleteProposal current"),l=o.getElementsByClassName("GPautoCompleteProposal"),c=l.length;if(c){var u=null;if(a.length)u=a[0];else{u=l[0],u.className="GPautoCompleteProposal current",u.style.color="#000000",u.style["background-color"]="#CEDBEF";return}var h=parseInt(Xe.index(u.id),10),d=h===c-1?l[0]:l[h+1],f=h===0?l[c-1]:l[h-1];switch(u.style["background-color"]="",u.style.color="",f.style["background-color"]="",f.style.color="",d.style["background-color"]="",d.style.color="",s){case 38:u.className="GPautoCompleteProposal",f.className="GPautoCompleteProposal current",f.style.color="#000000",f.style["background-color"]="#CEDBEF";break;case 40:u.className="GPautoCompleteProposal",d.className="GPautoCompleteProposal current",d.style.color="#000000",d.style["background-color"]="#CEDBEF";break;case 13:r.preventDefault(),u.click(r);break}u.focus()}}}),t.appendChild(n),t.appendChild(this._createSearchResetElement()),t},_createSearchResetElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen gpf-btn gpf-btn-icon-close fr-btn fr-btn--secondary",e.addEventListener("click",function(t){document.getElementById(i._addUID("GPsearchInputText")).value="",document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),i.onSearchResetClick()}),e},_createShowAdvancedSearchElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn fr-btn fr-btn--secondary",e.title="Ouvrir la recherche avance",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n);var r="#GPsearchInput-"+i._uid;document.querySelector(r+" input").disabled=!0,document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPshowAdvancedSearch")).style.display="none",document.getElementById(i._addUID("GPadvancedSearchPanel")).style.display="inline-block"}),e},_createAdvancedSearchPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPadvancedSearchPanel"),i.className="GPpanel gpf-panel fr-modal",i},_createAdvancedSearchPanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createGeocodeResultsElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPgeocodeResultsList"),i.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",i.appendChild(this._createGeocodeResultsHeaderElement()),i},_createAutoCompleteElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPautoCompleteList"),i.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",i},_createAutoCompleteListElement:function(){var i=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="gpf-panel__list",e.addEventListener?e.addEventListener("click",function(t){i.onAutoCompletedResultsItemClick(t),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(t){i.onAutoCompletedResultsItemClick(t),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationElement:function(i,e){var t=document.getElementById(this._addUID("GPautocompleteResults")),n=document.createElement("div");n.id=this._addUID("AutoCompletedLocation_"+e),n.className="GPautoCompleteProposal gpf-panel__items",n.innerHTML=ts.getSuggestedLocationFreeform(i),n.addEventListener?n.addEventListener("click",function(r){t.click(r)},!1):n.attachEvent&&n.attachEvent("onclick",function(r){t.click(r)}),t.appendChild(n)},_createAdvancedSearchPanelHeaderElement:function(){var i=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title",t.innerHTML="Recherche avance",e.appendChild(t);var n=document.createElement("button");n.id=this._addUID("GPadvancedSearchClose"),n.className="GPpanelClose gpf-btn gpf-icon-close fr-btn--close fr-btn fr-btn--secondary",n.title="Fermer la recherche avance",n.addEventListener?n.addEventListener("click",function(){var s="#GPsearchInput-"+i._uid;document.querySelector(s+" input").disabled=!1,document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(i._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(i._addUID("GPadvancedSearchPanel")).style.display="none"},!1):n.attachEvent&&n.attachEvent("onclick",function(){var s="#GPsearchInput-"+i._uid;document.querySelector(s+" input").disabled=!1,document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(i._addUID("GPshowAdvancedSearch")).style.display="inline-block",document.getElementById(i._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(i._addUID("GPadvancedSearchPanel")).style.display="none"});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",n.appendChild(r),e.appendChild(n),e},_createAdvancedSearchPanelFormElement:function(i){var e=this,t=document.createElement("form");t.id=this._addUID("GPadvancedSearchForm"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(o){o.preventDefault();for(var a=[],l="#GPadvancedSearchFilters-"+e._uid,c=document.querySelectorAll(l+" > div > div > input"),u=0;u<c.length;u++){var h=c[u];a.push({key:h.name,value:h.value})}return e.onGeocodingAdvancedSearchSubmit(o,a),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var n=document.createElement("div");n.className="GPflexInput gpf-flex";var r=document.createElement("label");r.className="GPadvancedSearchCodeLabel gpf-label fr-label",r.innerHTML="Recherche par",n.appendChild(r);var s=this._createAdvancedSearchFormCodeElement(i);return n.appendChild(s),t.appendChild(n),t},_createAdvancedSearchFormCodeElement:function(i){var e=this,t=document.createElement("select");t.id=this._addUID("GPadvancedSearchCode"),t.className="GPadvancedSearchCode gpf-select fr-select",t.addEventListener("change",function(s){e.onGeocodingAdvancedSearchCodeChange(s)},!1),i||(i=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var n=0;n<i.length;n++){var r=document.createElement("option");r.value=i[n].id,r.text=i[n].title,t.appendChild(r)}return t},_createAdvancedSearchFormInputElement:function(){var i=document.createElement("input");return i.type="submit",i.id=this._addUID("GPadvancedSearchSubmit"),i.className="GPsubmit gpf-btn gpf-btn-submit fr-btn fr-btn--secondary",i.value="Chercher",i},_createAdvancedSearchFormFiltersElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPadvancedSearchFilters"),i},_createAdvancedSearchFiltersTableElement:function(i,e){var t=document.createElement("div");return t.id=this._addUID(i),e||(t.style.display="none"),t},_createAdvancedSearchFiltersAttributElement:function(i){var e=null,t=i.name,n=i.title,r=i.description,s=i.code,o=i.value,a=document.createElement("div");a.className="GPflexInput gpf-flex";var l=document.createElement("label");l.className="GPadvancedSearchFilterLabel gpf-label fr-label",l.htmlFor=t,l.title=r||n,l.innerHTML=n,a.appendChild(l);var c=document.createElement("input");if(c.id=t,c.className="GPadvancedSearchFilterInput gpf-input fr-input",c.type="text",c.name=t,o)if(Array.isArray(o)){var u=t+"_list";c.setAttribute("list",u);var h=document.createElement("datalist");h.id=u;for(var d=0;d<o.length;++d){var f=document.createElement("option");f.value=o[d],h.appendChild(f)}a.appendChild(h)}else c.value=o;return a.appendChild(c),e=document.getElementById(this._addUID(s)),e?e.appendChild(a):e=a,e},_createGeocodeResultsHeaderElement:function(){var i=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title",t.innerHTML="Rsultats de la recherche",e.appendChild(t);var n=document.createElement("button");n.id=this._addUID("GPgeocodeResultsClose"),n.className="GPpanelClose gpf-btn gpf-icon-close fr-btn--close fr-btn fr-btn--secondary",n.title="Fermer la fentre de rsultats",n.addEventListener?n.addEventListener("click",function(){document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):n.attachEvent&&n.attachEvent("onclick",function(){document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",n.appendChild(r),e.appendChild(n),e},_createGeocodeResultsListElement:function(){var i=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(t){t.ctrlKey||(document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),i.onGeocodedResultsItemClick(t)},!1):e.attachEvent&&e.attachEvent("onclick",function(t){t.ctrlKey||(document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(i._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),i.onGeocodedResultsItemClick(t)}),e},_createGeocodedLocationElement:function(i,e){var t=document.getElementById(this._addUID("GPgeocodeResults")),n=document.createElement("div");n.id=this._addUID("GeocodedLocation_"+e),n.className="GPautoCompleteProposal gpf-panel__items",typeof i=="string"?n.innerHTML=i:n.innerHTML=ts.getGeocodedLocationFreeform(i),t.appendChild(n)}},at=ot.getLogger("searchengine"),AA=class qS extends Xn{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof qS))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){at.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e)}getData(){return this._geocodedLocations}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,zoomTo:"",resources:{geocode:"",autocomplete:[]},displayAdvancedSearch:!0,advancedSearch:{},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",placeholder:"Rechercher un lieu, une adresse"},He.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode="address,poi"),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.collapsed=this.options.collapsed,this._uid=Xe.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._suggestedContainer=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._marker=null;var t=this.options.markerStyle;this._markerUrl=Object.keys(jt).indexOf(t)===-1?jt.lightOrange:jt[t],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var t;if(e.resources)if(typeof e.resources=="object"){var n=e.resources.geocode;if(n)if(Array.isArray(n)){var r=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(t=0;t<n.length;t++)r.indexOf(n[t])===-1&&at.log("[SearchEngine] options.resources.geocode : "+n[t]+" is not a resource for geocode")}else at.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),n=null;var s=e.resources.autocomplete;if(s)if(Array.isArray(s)){var o=["StreetAddress","PositionOfInterest"];for(t=0;t<s.length;t++)o.indexOf(s[t])===-1&&at.log("[SearchEngine] options.resources.autocomplete : "+s[t]+" is not a resource for autocomplete")}else at.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),s=null}else at.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)switch(e[t]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),at.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=TI.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;He.assign(this._advancedSearchFilters,e),at.log("advancedSearchFilters",this._advancedSearchFilters)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var n=document.createElement("input");return n.type="button",n.className="gp-styling-button closer",n.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",t.appendChild(this._popupContent),t.appendChild(n),t}_initContainer(){var e=this._createMainContainerElement(),t=this._showSearchEngineButton=this._createShowSearchEnginePictoElement();e.appendChild(t);var n=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder),r=this;if(n.addEventListener?n.addEventListener("click",function(){r.onAutoCompleteInputClick()}):n.attachEvent&&n.attachEvent("onclick",function(){r.onAutoCompleteInputClick()}),e.appendChild(n),this.options.displayAdvancedSearch){var s=this._createShowAdvancedSearchElement();e.appendChild(s);var o=this._createAdvancedSearchPanelElement(),a=this._createAdvancedSearchPanelDivElement(),l=this._createAdvancedSearchPanelHeaderElement(),c=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),u=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var h=this._createAdvancedSearchFormInputElement();c.appendChild(u),c.appendChild(h),a.appendChild(l),a.appendChild(c),o.appendChild(a),e.appendChild(o)}var d=this._autocompleteContainer=this._createAutoCompleteElement(),f=this._suggestedContainer=this._createAutoCompleteListElement();d.appendChild(f),e.appendChild(d);var g=this._createGeocodeResultsElement(),p=this._geocodedContainer=this._createGeocodeResultsListElement();return g.appendChild(p),e.appendChild(g),e}_setFilter(e){for(var t=this._filterContainer,n=!1,r=0;r<this._advancedSearchCodes.length;r++)if(this._advancedSearchCodes[r].id===e){n=!0;break}if(!n){for(;t.firstChild;)t.removeChild(t.firstChild);return}for(this._currentGeocodingCode=e;t.firstChild;)t.removeChild(t.firstChild);var s=this._advancedSearchFilters[e];if(!(!s||s.length===0)){for(var o=this._createAdvancedSearchFiltersTableElement(e,!0),a=0;a<s.length;a++){var l=this._createAdvancedSearchFiltersAttributElement(s[a]);o.appendChild(l)}return t.appendChild(o),t}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){at.log(e);var t={};He.assign(t,this.options.autocompleteOptions.serviceOptions),He.assign(t,e);var n=this.options.resources.autocomplete;n&&Array.isArray(n)&&(t.type||(t.type=n)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),at.log(t),yt.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._suggestedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);this._displaySuggestedLocation();for(var n=0;n<e.length;n++)this._createAutoCompletedLocationElement(e[n],n)}}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){at.log(e);var t={};He.assign(t,this.options.geocodeOptions.serviceOptions),He.assign(t,e);var n=this,r=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",s=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(s){var o=function(c){e.onSuccess.call(n,c),n.options.geocodeOptions.serviceOptions.onSuccess.call(n,c)};t.onSuccess=o}if(r){var a=function(c){e.onFailure.call(n,c),n.options.geocodeOptions.serviceOptions.onFailure.call(n,c)};t.onFailure=a}var l=this.options.resources.geocode;l&&(t.index||(t.index=l)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),at.log(t),yt.Services.geocode(t)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var t=this._geocodedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var n=0;n<e.length;n++)at.log(e[n]),this._createGeocodedLocationElement(e[n],n);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,t){var n=this.getMap().getView();n.setCenter(e),n.setZoom(t)}_setMarker(e,t){var n=this.getMap(),r=this;if(this._marker!=null&&(n.removeOverlay(this._marker),this._marker=null),e){var s=document.createElement("img");s.src=this._markerUrl,s.addEventListener?s.addEventListener("click",function(){r._onResultMarkerSelect(t)}):s.attachEvent&&s.attachEvent("onclick",function(){r._onResultMarkerSelect(t)}),this._marker=new jn({position:e,offset:[-25.5,-38],element:s,stopEvent:!1}),n.addOverlay(this._marker)}}_getZoom(e){var t=this.getMap(),n=this.options.zoomTo,r=null;if(typeof n=="function"&&(at.trace("zoom function"),r=n.call(this,e)),typeof n=="number"&&(at.trace("zoom level"),r=n),typeof n=="string")if(n==="auto")at.trace("zoom auto"),r=TI.zoomToResultsByDefault(e);else{at.trace("zoom level parsing");var s=parseInt(n,10);isNaN(s)||(at.trace("zoom parsing"),r=s)}Number.isInteger=Number.isInteger||function(l){return typeof l=="number"&&isFinite(l)&&Math.floor(l)===l},(!r||r===""||!Number.isInteger(r))&&(at.trace("zoom not found, current zoom..."),r=t.getView().getZoom());var o=t.minZoom,a=t.maxZoom;return r<o&&(at.trace("zoom level min..."),r=o),r>a&&(at.trace("zoom level max..."),r=a),at.trace("zoom",r),r}_onResultMarkerSelect(e){var t=this.getMap(),n="";if(typeof e!="string")if(e.service==="GeocodedLocation"){n="<ul>";var r=e.location.placeAttributes;for(var s in r)r.hasOwnProperty(s)&&s!=="trueGeometry"&&s!=="extraFields"&&s!=="houseNumberInfos"&&s!=="_count"&&(n+="<li>",n+='<span class="gp-attname-others-span">'+s.toUpperCase()+" : </span>",n+=r[s],n+=" </li>");n+=" </ul>"}else e.service==="SuggestedLocation"?n=ts.getSuggestedLocationFreeform(e.location):n="sans informations.";else n=e;this._popupContent.innerHTML=n,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new jn({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),t.addOverlay(this._popupOverlay))}onShowSearchEngineClick(){var e=this.getMap();ds.unset(e);var t=this._showSearchEngineButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed")}onSearchResetClick(){this._clearResults()}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){if(this._currentGeocodingLocation=t,t.length<3){this._clearSuggestedLocation();return}var n=this.options.autocompleteOptions.triggerGeocode,r=this.options.autocompleteOptions.triggerDelay,s=this;this._requestAutoComplete({text:t,onSuccess:function(a){if(at.log("request from AutoComplete",a),a){s._suggestedLocations=a.suggestedLocations,s._locationsToBeDisplayed=[];for(var l=0;l<s._suggestedLocations.length;l++){var c=s._suggestedLocations[l];c.position&&c.position.x===0&&c.position.y===0&&c.fullText?s._getGeocodeCoordinatesFromFullText(c,l):s._locationsToBeDisplayed.push(c)}s._fillAutoCompletedLocationListContainer(s._locationsToBeDisplayed),s._triggerHandler&&(clearTimeout(s._triggerHandler),s._triggerHandler=null,at.warn("Cancel a geocode request !"))}},onFailure:function(a){s._clearSuggestedLocation(),at.log(a.message),a.message==="No suggestion matching the search"&&n&&(s._triggerHandler&&(clearTimeout(s._triggerHandler),at.warn("Cancel the last geocode request !")),s._triggerHandler=setTimeout(function(){at.warn("Launch a geocode request (code postal) !"),s._requestGeocoding({location:t,onSuccess:function(l){if(at.log("request from Geocoding",l),l){s._locationsToBeDisplayed=[];for(var c=l.locations,u=0;u<c.length;u++){var h=c[u];h.fullText=ts.getGeocodedLocationFreeform(h),h.position={x:h.position.lon,y:h.position.lat},s._locationsToBeDisplayed.push(h)}s._fillAutoCompletedLocationListContainer(c)}},onFailure:function(l){at.log(l.message)}})},r))}});var o=this.getMap();o.on("click",this._hideSuggestedLocation,this),o.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,t){var n=this;yt.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:ts.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(r){at.log("request from Geocoding (coordinates null)",r),r.locations&&r.locations.length!==0&&r.locations[0].position&&n._suggestedLocations&&n._suggestedLocations[t]&&(n._suggestedLocations[t].position={lon:r.locations[0].position.y,lat:r.locations[0].position.x},n._locationsToBeDisplayed.unshift(n._suggestedLocations[t]),n._fillAutoCompletedLocationListContainer(n._locationsToBeDisplayed))},onFailure:function(){n._suggestedLocations&&n._suggestedLocations[t]&&n._createAutoCompletedLocationElement(n._suggestedLocations[t],t)}})}onAutoCompletedResultsItemClick(e){var t=Xe.index(e.target.id);if(at.log(t),at.log(this._locationsToBeDisplayed[t]),!!t){var n=[this._locationsToBeDisplayed[t].position.x,this._locationsToBeDisplayed[t].position.y],r={service:"SuggestedLocation",location:this._locationsToBeDisplayed[t]},s=ts.getSuggestedLocationFreeform(this._locationsToBeDisplayed[t]);this._setLabel(s),this._currentGeocodingLocation=s;var o=this.getMap().getView(),a=o.getProjection().getCode();a!=="EPSG:4326"&&(n=Et(n,"EPSG:4326",a));var l=this._getZoom(r);this._setPosition(n,l),this._displayMarker&&this._setMarker(n,r),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[t]})}}onGeocodingSearchSubmit(e){var t=e.target[0].value;if(t){this._currentGeocodingLocation=t;var n=this;this._requestGeocoding({query:t,onSuccess:function(r){if(at.log("request from Geocoding",r),r){var s=r.locations;n._fillGeocodedLocationListContainer(s)}},onFailure:function(r){n._clearGeocodedLocation(),at.log(r.message)}})}}onGeocodedResultsItemClick(e){var t=Xe.index(e.target.id);if(t){var n=[this._geocodedLocations[t].position.lon,this._geocodedLocations[t].position.lat],r={service:"GeocodedLocation",location:this._geocodedLocations[t]},s=ts.getGeocodedLocationFreeform(this._geocodedLocations[t]);this._setLabel(s);var o=this.getMap().getView(),a=o.getProjection().getCode();a!=="EPSG:4326"&&(n=Et(n,"EPSG:4326",a));var l=this._getZoom(r);this._setPosition(n,l),this._displayMarker&&this._setMarker(n,r),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[t]})}}onGeocodingAdvancedSearchCodeChange(e){at.log(e);var t=e.target.selectedIndex,n=e.target.options[t].value;n&&this._setFilter(n)}onGeocodingAdvancedSearchSubmit(e,t){if(at.log(t),!(!t||t.length===0)){for(var n,r={},s=0;s<t.length;s++){var o=t[s];o.value&&(r[o.key]=o.value)}var a=document.getElementById("GPsearchInputText-"+this._uid);n=a.value,this._currentGeocodingCode==="CadastralParcel"&&(n="");var l=this;this._requestGeocoding({query:n,index:this._currentGeocodingCode,filters:r,onSuccess:function(c){if(at.log(c),c){var u=c.locations;l._fillGeocodedLocationListContainer(u)}},onFailure:function(c){l._clearGeocodedLocation(),at.log(c.message)}})}}_getCadastralParcelRequestParams(e){var t="",n,r=e.department;r?(n=r.length,n===2?t=r:n===1?t="0"+r:t=r.substring(0,2)):t="__";var s=e.commune;s?(n=s.length,n===3?t+=s:n===2?t+="_"+s:n===1?t+="__"+s:t+=s.substring(0,3)):t+="___";var o=e.insee;o&&o.length===5&&(t=o);var a=e.absorbedCity;a?(n=a.length,n===3?t+=a:n<3?n===2?t+="_"+a:n===1&&(t+="__"+a):t+=a.substring(0,3)):t+="___";var l=e.section;l?(n=l.length,n===2?t+=l:n===1?t+="_"+l:t+=l.substring(0,2)):t+="__";var c=e.number;return c?(n=c.length,n===4?t+=c:n===3?t+="_"+c:n===2?t+="__"+c:n===1?t+="___"+c:t+=c.substring(0,4)):t+="___",at.log("location : "+t),t}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._suggestedContainer)for(;this._suggestedContainer.firstChild;)this._suggestedContainer.removeChild(this._suggestedContainer.firstChild)}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(AA.prototype,P6);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=AA);var Hr={modulo:function(i,e){var t=i%e;return t*e<0?t+e:t},decimalToDMS:function(i,e,t){var n=this.modulo(i+180,360)-180,r=Math.abs(3600*n),s=t||0,o=Math.pow(10,s),a=Math.floor(r/3600),l=Math.floor((r-a*3600)/60),c=r-a*3600-l*60;c=Math.ceil(c*o)/o,c>=60&&(c=0,l+=1),l>=60&&(l=0,a+=1);var u=e.charAt(n<0?1:0);return{d:a,m:l,s:c,direction:u}},toInteger:function(i,e){var t=e||10,n=parseInt(i,t);return!isNaN(n)&&isFinite(n)?n:null},isInteger:function(i){if(isNaN(i))return!1;var e=parseFloat(i);return(e|0)===e},toFloat:function(i){var e=parseFloat(i);return!isNaN(e)&&isFinite(e)?e:null}},Gp=ot.getLogger("draggable"),Ro={dragElement:function(i,e,t){var n,r,s=!1,o={x:0,y:0};e?e.addEventListener("mousedown",a,!0):i.addEventListener("mousedown",a,!0);function a(u){u=u||window.event,u.preventDefault(),s=!0,u._pageX=u._pageX||u.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),u._pageY=u._pageY||u.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop),o.x=u._pageX-i.offsetLeft,o.y=u._pageY-i.offsetTop,document.addEventListener("mouseup",l,!0),document.addEventListener("mousemove",c,!0)}function l(){s=!1,document.removeEventListener("mouseup",l,!0),document.removeEventListener("mousemove",c,!0)}function c(u){if(u=u||window.event,s){u._pageX=u._pageX||u.clientX+(document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft),u._pageY=u._pageY||u.clientY+(document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop);var h=t?t.offsetLeft:i.parentElement.offsetLeft,d=t?t.offsetTop:i.parentElement.parentElement.offsetTop;Gp.trace("parent offset",h,d),u._pageX-o.x<0-h?n=0-h:u._pageX-o.x+i.clientWidth>document.body.clientWidth?n=document.body.clientWidth-i.clientWidth:n=u._pageX-o.x,Gp.trace("left/right constraint",n),u._pageY-o.y<0-d?r=0-d:u._pageY-o.y+i.clientHeight>document.body.clientHeight?r=document.body.clientHeight-i.clientHeight:r=u._pageY-o.y,Gp.trace("top/bottom constraint",r),i.style.top=r+"px",i.style.bottom="unset",i.style.left=n+"px",i.style.right="unset"}}}};function M6(i){i("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),i("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),i("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),i.WGS84=i["EPSG:4326"],i["EPSG:3785"]=i["EPSG:3857"],i.GOOGLE=i["EPSG:3857"],i["EPSG:900913"]=i["EPSG:3857"],i["EPSG:102113"]=i["EPSG:3857"]}var Wa=1,Ya=2,tc=3,R6=4,Zm=5,LI=6378137,T6=6356752314e-3,GI=.0066943799901413165,Yu=484813681109536e-20,le=Math.PI/2,L6=.16666666666666666,G6=.04722222222222222,O6=.022156084656084655,ye=1e-10,Hi=.017453292519943295,ns=57.29577951308232,Lt=Math.PI/4,bh=Math.PI*2,fi=3.14159265359,Zn={};Zn.greenwich=0;Zn.lisbon=-9.131906111111;Zn.paris=2.337229166667;Zn.bogota=-74.080916666667;Zn.madrid=-3.687938888889;Zn.rome=12.452333333333;Zn.bern=7.439583333333;Zn.jakarta=106.807719444444;Zn.ferro=-17.666666666667;Zn.brussels=4.367975;Zn.stockholm=18.058277777778;Zn.athens=23.7163375;Zn.oslo=10.722916666667;const D6={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var OI=/[\s_\-\/\(\)]/g;function Vo(i,e){if(i[e])return i[e];for(var t=Object.keys(i),n=e.toLowerCase().replace(OI,""),r=-1,s,o;++r<t.length;)if(s=t[r],o=s.toLowerCase().replace(OI,""),o===n)return i[s]}function Km(i){var e={},t=i.split("+").map(function(a){return a.trim()}).filter(function(a){return a}).reduce(function(a,l){var c=l.split("=");return c.push(!0),a[c[0].toLowerCase()]=c[1],a},{}),n,r,s,o={proj:"projName",datum:"datumCode",rf:function(a){e.rf=parseFloat(a)},lat_0:function(a){e.lat0=a*Hi},lat_1:function(a){e.lat1=a*Hi},lat_2:function(a){e.lat2=a*Hi},lat_ts:function(a){e.lat_ts=a*Hi},lon_0:function(a){e.long0=a*Hi},lon_1:function(a){e.long1=a*Hi},lon_2:function(a){e.long2=a*Hi},alpha:function(a){e.alpha=parseFloat(a)*Hi},gamma:function(a){e.rectified_grid_angle=parseFloat(a)},lonc:function(a){e.longc=a*Hi},x_0:function(a){e.x0=parseFloat(a)},y_0:function(a){e.y0=parseFloat(a)},k_0:function(a){e.k0=parseFloat(a)},k:function(a){e.k0=parseFloat(a)},a:function(a){e.a=parseFloat(a)},b:function(a){e.b=parseFloat(a)},r_a:function(){e.R_A=!0},zone:function(a){e.zone=parseInt(a,10)},south:function(){e.utmSouth=!0},towgs84:function(a){e.datum_params=a.split(",").map(function(l){return parseFloat(l)})},to_meter:function(a){e.to_meter=parseFloat(a)},units:function(a){e.units=a;var l=Vo(D6,a);l&&(e.to_meter=l.to_meter)},from_greenwich:function(a){e.from_greenwich=a*Hi},pm:function(a){var l=Vo(Zn,a);e.from_greenwich=(l||parseFloat(a))*Hi},nadgrids:function(a){a==="@null"?e.datumCode="none":e.nadgrids=a},axis:function(a){var l="ewnsud";a.length===3&&l.indexOf(a.substr(0,1))!==-1&&l.indexOf(a.substr(1,1))!==-1&&l.indexOf(a.substr(2,1))!==-1&&(e.axis=a)},approx:function(){e.approx=!0}};for(n in t)r=t[n],n in o?(s=o[n],typeof s=="function"?s(r):e[s]=r):e[n]=r;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var Sh=1,XS=2,ZS=3,Eg=4,KS=5,_A=-1,k6=/\s/,F6=/[A-Za-z]/,N6=/[A-Za-z84_]/,_0=/[,\]]/,JS=/[\d\.E\-\+]/;function Ks(i){if(typeof i!="string")throw new Error("not a string");this.text=i.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=Sh}Ks.prototype.readCharicter=function(){var i=this.text[this.place++];if(this.state!==Eg)for(;k6.test(i);){if(this.place>=this.text.length)return;i=this.text[this.place++]}switch(this.state){case Sh:return this.neutral(i);case XS:return this.keyword(i);case Eg:return this.quoted(i);case KS:return this.afterquote(i);case ZS:return this.number(i);case _A:return}};Ks.prototype.afterquote=function(i){if(i==='"'){this.word+='"',this.state=Eg;return}if(_0.test(i)){this.word=this.word.trim(),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in afterquote yet, index '+this.place)};Ks.prototype.afterItem=function(i){if(i===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=Sh;return}if(i==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=Sh,this.currentObject=this.stack.pop(),this.currentObject||(this.state=_A);return}};Ks.prototype.number=function(i){if(JS.test(i)){this.word+=i;return}if(_0.test(i)){this.word=parseFloat(this.word),this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in number yet, index '+this.place)};Ks.prototype.quoted=function(i){if(i==='"'){this.state=KS;return}this.word+=i};Ks.prototype.keyword=function(i){if(N6.test(i)){this.word+=i;return}if(i==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=Sh;return}if(_0.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in keyword yet, index '+this.place)};Ks.prototype.neutral=function(i){if(F6.test(i)){this.word=i,this.state=XS;return}if(i==='"'){this.word="",this.state=Eg;return}if(JS.test(i)){this.word=i,this.state=ZS;return}if(_0.test(i)){this.afterItem(i);return}throw new Error(`havn't handled "`+i+'" in neutral yet, index '+this.place)};Ks.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===_A)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function U6(i){var e=new Ks(i);return e.output()}function DI(i,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var n=e?{}:i,r=t.reduce(function(s,o){return Ol(o,s),s},n);e&&(i[e]=r)}function Ol(i,e){if(!Array.isArray(i)){e[i]=!0;return}var t=i.shift();if(t==="PARAMETER"&&(t=i.shift()),i.length===1){if(Array.isArray(i[0])){e[t]={},Ol(i[0],e[t]);return}e[t]=i[0];return}if(!i.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=i;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(i);return}Array.isArray(t)||(e[t]={});var n;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:i[0].toLowerCase(),convert:i[1]},i.length===3&&Ol(i[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:i[0],a:i[1],rf:i[2]},i.length===4&&Ol(i[3],e[t]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":i[0]=["name",i[0]],DI(e,t,i);return;default:for(n=-1;++n<i.length;)if(!Array.isArray(i[n]))return Ol(i,e[t]);return DI(e,t,i)}}var B6=.017453292519943295;function j6(i,e){var t=e[0],n=e[1];!(t in i)&&n in i&&(i[t]=i[n],e.length===3&&(i[t]=e[2](i[t])))}function qr(i){return i*B6}function z6(i){if(i.type==="GEOGCS"?i.projName="longlat":i.type==="LOCAL_CS"?(i.projName="identity",i.local=!0):typeof i.PROJECTION=="object"?i.projName=Object.keys(i.PROJECTION)[0]:i.projName=i.PROJECTION,i.AXIS){for(var e="",t=0,n=i.AXIS.length;t<n;++t){var r=[i.AXIS[t][0].toLowerCase(),i.AXIS[t][1].toLowerCase()];r[0].indexOf("north")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="north"?e+="n":r[0].indexOf("south")!==-1||(r[0]==="y"||r[0]==="lat")&&r[1]==="south"?e+="s":r[0].indexOf("east")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="east"?e+="e":(r[0].indexOf("west")!==-1||(r[0]==="x"||r[0]==="lon")&&r[1]==="west")&&(e+="w")}e.length===2&&(e+="u"),e.length===3&&(i.axis=e)}i.UNIT&&(i.units=i.UNIT.name.toLowerCase(),i.units==="metre"&&(i.units="meter"),i.UNIT.convert&&(i.type==="GEOGCS"?i.DATUM&&i.DATUM.SPHEROID&&(i.to_meter=i.UNIT.convert*i.DATUM.SPHEROID.a):i.to_meter=i.UNIT.convert));var s=i.GEOGCS;i.type==="GEOGCS"&&(s=i),s&&(s.DATUM?i.datumCode=s.DATUM.name.toLowerCase():i.datumCode=s.name.toLowerCase(),i.datumCode.slice(0,2)==="d_"&&(i.datumCode=i.datumCode.slice(2)),(i.datumCode==="new_zealand_geodetic_datum_1949"||i.datumCode==="new_zealand_1949")&&(i.datumCode="nzgd49"),(i.datumCode==="wgs_1984"||i.datumCode==="world_geodetic_system_1984")&&(i.PROJECTION==="Mercator_Auxiliary_Sphere"&&(i.sphere=!0),i.datumCode="wgs84"),i.datumCode.slice(-6)==="_ferro"&&(i.datumCode=i.datumCode.slice(0,-6)),i.datumCode.slice(-8)==="_jakarta"&&(i.datumCode=i.datumCode.slice(0,-8)),~i.datumCode.indexOf("belge")&&(i.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(i.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),i.ellps.toLowerCase().slice(0,13)==="international"&&(i.ellps="intl"),i.a=s.DATUM.SPHEROID.a,i.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(i.datum_params=s.DATUM.TOWGS84),~i.datumCode.indexOf("osgb_1936")&&(i.datumCode="osgb36"),~i.datumCode.indexOf("osni_1952")&&(i.datumCode="osni52"),(~i.datumCode.indexOf("tm65")||~i.datumCode.indexOf("geodetic_datum_of_1965"))&&(i.datumCode="ire65"),i.datumCode==="ch1903+"&&(i.datumCode="ch1903"),~i.datumCode.indexOf("israel")&&(i.datumCode="isr93")),i.b&&!isFinite(i.b)&&(i.b=i.a);function o(c){var u=i.to_meter||1;return c*u}var a=function(c){return j6(i,c)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",qr],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",qr],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",qr],["lat0","latitude_of_origin",qr],["lat0","standard_parallel_1",qr],["lat1","standard_parallel_1",qr],["lat2","standard_parallel_2",qr],["azimuth","Azimuth"],["alpha","azimuth",qr],["srsCode","name"]];l.forEach(a),!i.long0&&i.longc&&(i.projName==="Albers_Conic_Equal_Area"||i.projName==="Lambert_Azimuthal_Equal_Area")&&(i.long0=i.longc),!i.lat_ts&&i.lat1&&(i.projName==="Stereographic_South_Pole"||i.projName==="Polar Stereographic (variant B)")?(i.lat0=qr(i.lat1>0?90:-90),i.lat_ts=i.lat1):!i.lat_ts&&i.lat0&&i.projName==="Polar_Stereographic"&&(i.lat_ts=i.lat0,i.lat0=qr(i.lat0>0?90:-90))}function QS(i){var e=U6(i),t=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",t]);var r={};return Ol(e,r),z6(r),r}function bn(i){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?bn[i]=Km(arguments[1]):bn[i]=QS(arguments[1]):bn[i]=t}else if(arguments.length===1){if(Array.isArray(i))return i.map(function(n){Array.isArray(n)?bn.apply(e,n):bn(n)});if(typeof i=="string"){if(i in bn)return bn[i]}else"EPSG"in i?bn["EPSG:"+i.EPSG]=i:"ESRI"in i?bn["ESRI:"+i.ESRI]=i:"IAU2000"in i?bn["IAU2000:"+i.IAU2000]=i:console.log(i);return}}M6(bn);function V6(i){return typeof i=="string"}function W6(i){return i in bn}var Y6=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function H6(i){return Y6.some(function(e){return i.indexOf(e)>-1})}var q6=["3857","900913","3785","102113"];function X6(i){var e=Vo(i,"authority");if(e){var t=Vo(e,"epsg");return t&&q6.indexOf(t)>-1}}function Z6(i){var e=Vo(i,"extension");if(e)return Vo(e,"proj4")}function K6(i){return i[0]==="+"}function J6(i){if(V6(i)){if(W6(i))return bn[i];if(H6(i)){var e=QS(i);if(X6(e))return bn["EPSG:3857"];var t=Z6(e);return t?Km(t):e}if(K6(i))return Km(i)}else return i}function kI(i,e){i=i||{};var t,n;if(!e)return i;for(n in e)t=e[n],t!==void 0&&(i[n]=t);return i}function ps(i,e,t){var n=i*e;return t/Math.sqrt(1-n*n)}function qh(i){return i<0?-1:1}function we(i){return Math.abs(i)<=fi?i:i-qh(i)*bh}function Ur(i,e,t){var n=i*t,r=.5*i;return n=Math.pow((1-n)/(1+n),r),Math.tan(.5*(le-e))/n}function xh(i,e){for(var t=.5*i,n,r,s=le-2*Math.atan(e),o=0;o<=15;o++)if(n=i*Math.sin(s),r=le-2*Math.atan(e*Math.pow((1-n)/(1+n),t))-s,s+=r,Math.abs(r)<=1e-10)return s;return-9999}function Q6(){var i=this.b/this.a;this.es=1-i*i,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=ps(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function $6(i){var e=i.x,t=i.y;if(t*ns>90&&t*ns<-90&&e*ns>180&&e*ns<-180)return null;var n,r;if(Math.abs(Math.abs(t)-le)<=ye)return null;if(this.sphere)n=this.x0+this.a*this.k0*we(e-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(Lt+.5*t));else{var s=Math.sin(t),o=Ur(this.e,t,s);n=this.x0+this.a*this.k0*we(e-this.long0),r=this.y0-this.a*this.k0*Math.log(o)}return i.x=n,i.y=r,i}function eB(i){var e=i.x-this.x0,t=i.y-this.y0,n,r;if(this.sphere)r=le-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var s=Math.exp(-t/(this.a*this.k0));if(r=xh(this.e,s),r===-9999)return null}return n=we(this.long0+e/(this.a*this.k0)),i.x=n,i.y=r,i}var tB=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const iB={init:Q6,forward:$6,inverse:eB,names:tB};function nB(){}function FI(i){return i}var rB=["longlat","identity"];const sB={init:nB,forward:FI,inverse:FI,names:rB};var oB=[iB,sB],of={},wg=[];function $S(i,e){var t=wg.length;return i.names?(wg[t]=i,i.names.forEach(function(n){of[n.toLowerCase()]=t}),this):(console.log(e),!0)}function aB(i){if(!i)return!1;var e=i.toLowerCase();if(typeof of[e]<"u"&&wg[of[e]])return wg[of[e]]}function lB(){oB.forEach($S)}const cB={start:lB,add:$S,get:aB};var Ke={};Ke.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};Ke.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};Ke.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};Ke.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};Ke.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};Ke.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};Ke.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};Ke.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};Ke.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};Ke.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};Ke.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};Ke.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};Ke.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};Ke.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};Ke.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};Ke.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};Ke.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};Ke.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};Ke.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};Ke.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};Ke.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};Ke.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};Ke.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};Ke.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};Ke.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};Ke.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};Ke.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};Ke.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};Ke.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};Ke.hough={a:6378270,rf:297,ellipseName:"Hough"};Ke.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};Ke.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};Ke.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};Ke.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};Ke.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};Ke.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};Ke.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};Ke.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};Ke.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};Ke.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};Ke.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};Ke.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var uB=Ke.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Ke.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function hB(i,e,t,n){var r=i*i,s=e*e,o=(r-s)/r,a=0;n?(i*=1-o*(L6+o*(G6+o*O6)),r=i*i,o=0):a=Math.sqrt(o);var l=(r-s)/s;return{es:o,e:a,ep2:l}}function dB(i,e,t,n,r){if(!i){var s=Vo(Ke,n);s||(s=uB),i=s.a,e=s.b,t=s.rf}return t&&!e&&(e=(1-1/t)*i),(t===0||Math.abs(i-e)<ye)&&(r=!0,e=i),{a:i,b:e,rf:t,sphere:r}}var ki={};ki.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"};ki.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"};ki.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"};ki.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"};ki.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"};ki.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"};ki.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"};ki.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"};ki.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"};ki.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"};ki.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"};ki.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"};ki.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"};ki.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"};ki.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"};ki.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"};ki.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"};ki.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};function fB(i,e,t,n,r,s,o){var a={};return i===void 0||i==="none"?a.datum_type=Zm:a.datum_type=R6,e&&(a.datum_params=e.map(parseFloat),(a.datum_params[0]!==0||a.datum_params[1]!==0||a.datum_params[2]!==0)&&(a.datum_type=Wa),a.datum_params.length>3&&(a.datum_params[3]!==0||a.datum_params[4]!==0||a.datum_params[5]!==0||a.datum_params[6]!==0)&&(a.datum_type=Ya,a.datum_params[3]*=Yu,a.datum_params[4]*=Yu,a.datum_params[5]*=Yu,a.datum_params[6]=a.datum_params[6]/1e6+1)),o&&(a.datum_type=tc,a.grids=o),a.a=t,a.b=n,a.es=r,a.ep2=s,a}var ex={};function gB(i,e){var t=new DataView(e),n=vB(t),r=yB(t,n),s=AB(t,r,n),o={header:r,subgrids:s};return ex[i]=o,o}function pB(i){if(i===void 0)return null;var e=i.split(",");return e.map(mB)}function mB(i){if(i.length===0)return null;var e=i[0]==="@";return e&&(i=i.slice(1)),i==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:i,mandatory:!e,grid:ex[i]||null,isNull:!1}}function Dl(i){return i/3600*Math.PI/180}function vB(i){var e=i.getInt32(8,!1);return e===11?!1:(e=i.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function yB(i,e){return{nFields:i.getInt32(8,e),nSubgridFields:i.getInt32(24,e),nSubgrids:i.getInt32(40,e),shiftType:Jm(i,56,64).trim(),fromSemiMajorAxis:i.getFloat64(120,e),fromSemiMinorAxis:i.getFloat64(136,e),toSemiMajorAxis:i.getFloat64(152,e),toSemiMinorAxis:i.getFloat64(168,e)}}function Jm(i,e,t){return String.fromCharCode.apply(null,new Uint8Array(i.buffer.slice(e,t)))}function AB(i,e,t){for(var n=176,r=[],s=0;s<e.nSubgrids;s++){var o=CB(i,n,t),a=IB(i,n,o,t),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[Dl(o.lowerLongitude),Dl(o.lowerLatitude)],del:[Dl(o.longitudeInterval),Dl(o.latitudeInterval)],lim:[l,c],count:o.gridNodeCount,cvs:_B(a)}),n+=176+o.gridNodeCount*16}return r}function _B(i){return i.map(function(e){return[Dl(e.longitudeShift),Dl(e.latitudeShift)]})}function CB(i,e,t){return{name:Jm(i,e+8,e+16).trim(),parent:Jm(i,e+24,e+24+8).trim(),lowerLatitude:i.getFloat64(e+72,t),upperLatitude:i.getFloat64(e+88,t),lowerLongitude:i.getFloat64(e+104,t),upperLongitude:i.getFloat64(e+120,t),latitudeInterval:i.getFloat64(e+136,t),longitudeInterval:i.getFloat64(e+152,t),gridNodeCount:i.getInt32(e+168,t)}}function IB(i,e,t,n){for(var r=e+176,s=16,o=[],a=0;a<t.gridNodeCount;a++){var l={latitudeShift:i.getFloat32(r+a*s,n),longitudeShift:i.getFloat32(r+a*s+4,n),latitudeAccuracy:i.getFloat32(r+a*s+8,n),longitudeAccuracy:i.getFloat32(r+a*s+12,n)};o.push(l)}return o}function ls(i,e){if(!(this instanceof ls))return new ls(i);e=e||function(c){if(c)throw c};var t=J6(i);if(typeof t!="object"){e(i);return}var n=ls.projections.get(t.projName);if(!n){e(i);return}if(t.datumCode&&t.datumCode!=="none"){var r=Vo(ki,t.datumCode);r&&(t.datum_params=t.datum_params||(r.towgs84?r.towgs84.split(","):null),t.ellps=r.ellipse,t.datumName=r.datumName?r.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var s=dB(t.a,t.b,t.rf,t.ellps,t.sphere),o=hB(s.a,s.b,s.rf,t.R_A),a=pB(t.nadgrids),l=t.datum||fB(t.datumCode,t.datum_params,s.a,s.b,o.es,o.ep2,a);kI(this,t),kI(this,n),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}ls.projections=cB;ls.projections.start();function EB(i,e){return i.datum_type!==e.datum_type||i.a!==e.a||Math.abs(i.es-e.es)>5e-11?!1:i.datum_type===Wa?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]:i.datum_type===Ya?i.datum_params[0]===e.datum_params[0]&&i.datum_params[1]===e.datum_params[1]&&i.datum_params[2]===e.datum_params[2]&&i.datum_params[3]===e.datum_params[3]&&i.datum_params[4]===e.datum_params[4]&&i.datum_params[5]===e.datum_params[5]&&i.datum_params[6]===e.datum_params[6]:!0}function tx(i,e,t){var n=i.x,r=i.y,s=i.z?i.z:0,o,a,l,c;if(r<-le&&r>-1.001*le)r=-le;else if(r>le&&r<1.001*le)r=le;else{if(r<-le)return{x:-1/0,y:-1/0,z:i.z};if(r>le)return{x:1/0,y:1/0,z:i.z}}return n>Math.PI&&(n-=2*Math.PI),a=Math.sin(r),c=Math.cos(r),l=a*a,o=t/Math.sqrt(1-e*l),{x:(o+s)*c*Math.cos(n),y:(o+s)*c*Math.sin(n),z:(o*(1-e)+s)*a}}function ix(i,e,t,n){var r=1e-12,s=r*r,o=30,a,l,c,u,h,d,f,g,p,m,v,y,A,_=i.x,C=i.y,I=i.z?i.z:0,b,S,R;if(a=Math.sqrt(_*_+C*C),l=Math.sqrt(_*_+C*C+I*I),a/t<r){if(b=0,l/t<r)return S=le,R=-n,{x:i.x,y:i.y,z:i.z}}else b=Math.atan2(C,_);c=I/l,u=a/l,h=1/Math.sqrt(1-e*(2-e)*u*u),g=u*(1-e)*h,p=c*h,A=0;do A++,f=t/Math.sqrt(1-e*p*p),R=a*g+I*p-f*(1-e*p*p),d=e*f/(f+R),h=1/Math.sqrt(1-d*(2-d)*u*u),m=u*(1-d)*h,v=c*h,y=v*g-m*p,g=m,p=v;while(y*y>s&&A<o);return S=Math.atan(v/Math.abs(m)),{x:b,y:S,z:R}}function wB(i,e,t){if(e===Wa)return{x:i.x+t[0],y:i.y+t[1],z:i.z+t[2]};if(e===Ya){var n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6];return{x:c*(i.x-l*i.y+a*i.z)+n,y:c*(l*i.x+i.y-o*i.z)+r,z:c*(-a*i.x+o*i.y+i.z)+s}}}function bB(i,e,t){if(e===Wa)return{x:i.x-t[0],y:i.y-t[1],z:i.z-t[2]};if(e===Ya){var n=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=t[6],u=(i.x-n)/c,h=(i.y-r)/c,d=(i.z-s)/c;return{x:u+l*h-a*d,y:-l*u+h+o*d,z:a*u-o*h+d}}}function Ud(i){return i===Wa||i===Ya}function SB(i,e,t){if(EB(i,e)||i.datum_type===Zm||e.datum_type===Zm)return t;var n=i.a,r=i.es;if(i.datum_type===tc){var s=NI(i,!1,t);if(s!==0)return;n=LI,r=GI}var o=e.a,a=e.b,l=e.es;if(e.datum_type===tc&&(o=LI,a=T6,l=GI),r===l&&n===o&&!Ud(i.datum_type)&&!Ud(e.datum_type))return t;if(t=tx(t,r,n),Ud(i.datum_type)&&(t=wB(t,i.datum_type,i.datum_params)),Ud(e.datum_type)&&(t=bB(t,e.datum_type,e.datum_params)),t=ix(t,l,o,a),e.datum_type===tc){var c=NI(e,!0,t);if(c!==0)return}return t}function NI(i,e,t){if(i.grids===null||i.grids.length===0)return console.log("Grid shift grids not found"),-1;var n={x:-t.x,y:t.y},r={x:Number.NaN,y:Number.NaN},s=[];e:for(var o=0;o<i.grids.length;o++){var a=i.grids[o];if(s.push(a.name),a.isNull){r=n;break}if(a.mandatory,a.grid===null){if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1;continue}for(var l=a.grid.subgrids,c=0,u=l.length;c<u;c++){var h=l[c],d=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,f=h.ll[0]-d,g=h.ll[1]-d,p=h.ll[0]+(h.lim[0]-1)*h.del[0]+d,m=h.ll[1]+(h.lim[1]-1)*h.del[1]+d;if(!(g>n.y||f>n.x||m<n.y||p<n.x)&&(r=xB(n,e,h),!isNaN(r.x)))break e}}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*ns+" "+n.y*ns+" tried: '"+s+"'"),-1):(t.x=-r.x,t.y=r.y,0)}function xB(i,e,t){var n={x:Number.NaN,y:Number.NaN};if(isNaN(i.x))return n;var r={x:i.x,y:i.y};r.x-=t.ll[0],r.y-=t.ll[1],r.x=we(r.x-Math.PI)+Math.PI;var s=UI(r,t);if(e){if(isNaN(s.x))return n;s.x=r.x-s.x,s.y=r.y-s.y;var o=9,a=1e-12,l,c;do{if(c=UI(s,t),isNaN(c.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}l={x:r.x-(c.x+s.x),y:r.y-(c.y+s.y)},s.x+=l.x,s.y+=l.y}while(o--&&Math.abs(l.x)>a&&Math.abs(l.y)>a);if(o<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=we(s.x+t.ll[0]),n.y=s.y+t.ll[1]}else isNaN(s.x)||(n.x=i.x+s.x,n.y=i.y+s.y);return n}function UI(i,e){var t={x:i.x/e.del[0],y:i.y/e.del[1]},n={x:Math.floor(t.x),y:Math.floor(t.y)},r={x:t.x-1*n.x,y:t.y-1*n.y},s={x:Number.NaN,y:Number.NaN},o;if(n.x<0||n.x>=e.lim[0]||n.y<0||n.y>=e.lim[1])return s;o=n.y*e.lim[0]+n.x;var a={x:e.cvs[o][0],y:e.cvs[o][1]};o++;var l={x:e.cvs[o][0],y:e.cvs[o][1]};o+=e.lim[0];var c={x:e.cvs[o][0],y:e.cvs[o][1]};o--;var u={x:e.cvs[o][0],y:e.cvs[o][1]},h=r.x*r.y,d=r.x*(1-r.y),f=(1-r.x)*(1-r.y),g=(1-r.x)*r.y;return s.x=f*a.x+d*l.x+g*u.x+h*c.x,s.y=f*a.y+d*l.y+g*u.y+h*c.y,s}function BI(i,e,t){var n=t.x,r=t.y,s=t.z||0,o,a,l,c={};for(l=0;l<3;l++)if(!(e&&l===2&&t.z===void 0))switch(l===0?(o=n,"ew".indexOf(i.axis[l])!==-1?a="x":a="y"):l===1?(o=r,"ns".indexOf(i.axis[l])!==-1?a="y":a="x"):(o=s,a="z"),i.axis[l]){case"e":c[a]=o;break;case"w":c[a]=-o;break;case"n":c[a]=o;break;case"s":c[a]=-o;break;case"u":t[a]!==void 0&&(c.z=o);break;case"d":t[a]!==void 0&&(c.z=-o);break;default:return null}return c}function nx(i){var e={x:i[0],y:i[1]};return i.length>2&&(e.z=i[2]),i.length>3&&(e.m=i[3]),e}function PB(i){jI(i.x),jI(i.y)}function jI(i){if(typeof Number.isFinite=="function"){if(Number.isFinite(i))return;throw new TypeError("coordinates must be finite numbers")}if(typeof i!="number"||i!==i||!isFinite(i))throw new TypeError("coordinates must be finite numbers")}function MB(i,e){return(i.datum.datum_type===Wa||i.datum.datum_type===Ya||i.datum.datum_type===tc)&&e.datumCode!=="WGS84"||(e.datum.datum_type===Wa||e.datum.datum_type===Ya||e.datum.datum_type===tc)&&i.datumCode!=="WGS84"}function bg(i,e,t,n){var r;Array.isArray(t)?t=nx(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var s=t.z!==void 0;if(PB(t),i.datum&&e.datum&&MB(i,e)&&(r=new ls("WGS84"),t=bg(i,r,t,n),i=r),n&&i.axis!=="enu"&&(t=BI(i,!1,t)),i.projName==="longlat")t={x:t.x*Hi,y:t.y*Hi,z:t.z||0};else if(i.to_meter&&(t={x:t.x*i.to_meter,y:t.y*i.to_meter,z:t.z||0}),t=i.inverse(t),!t)return;if(i.from_greenwich&&(t.x+=i.from_greenwich),t=SB(i.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*ns,y:t.y*ns,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),n&&e.axis!=="enu"?BI(e,!0,t):(t&&!s&&delete t.z,t)}var zI=ls("WGS84");function Op(i,e,t,n){var r,s,o;return Array.isArray(t)?(r=bg(i,e,t,n)||{x:NaN,y:NaN},t.length>2?typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof r.z=="number"?[r.x,r.y,r.z].concat(t.splice(3)):[r.x,r.y,t[2]].concat(t.splice(3)):[r.x,r.y].concat(t.splice(2)):[r.x,r.y]):(s=bg(i,e,t,n),o=Object.keys(t),o.length===2||o.forEach(function(a){if(typeof i.name<"u"&&i.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(a==="x"||a==="y"||a==="z")return}else if(a==="x"||a==="y")return;s[a]=t[a]}),s)}function VI(i){return i instanceof ls?i:i.oProj?i.oProj:ls(i)}function hi(i,e,t){i=VI(i);var n=!1,r;return typeof e>"u"?(e=i,i=zI,n=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=i,i=zI,n=!0),e=VI(e),t?Op(i,e,t):(r={forward:function(s,o){return Op(i,e,s,o)},inverse:function(s,o){return Op(e,i,s,o)}},n&&(r.oProj=e),r)}var WI=6,rx="AJSAJS",sx="AFAFAF",kl=65,Dn=73,mr=79,pu=86,mu=90;const RB={forward:ox,inverse:TB,toPoint:ax};function ox(i,e){return e=e||5,OB(LB({lat:i[1],lon:i[0]}),e)}function TB(i){var e=CA(cx(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function ax(i){var e=CA(cx(i.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Dp(i){return i*(Math.PI/180)}function YI(i){return 180*(i/Math.PI)}function LB(i){var e=i.lat,t=i.lon,n=6378137,r=.00669438,s=.9996,o,a,l,c,u,h,d,f=Dp(e),g=Dp(t),p,m;m=Math.floor((t+180)/6)+1,t===180&&(m=60),e>=56&&e<64&&t>=3&&t<12&&(m=32),e>=72&&e<84&&(t>=0&&t<9?m=31:t>=9&&t<21?m=33:t>=21&&t<33?m=35:t>=33&&t<42&&(m=37)),o=(m-1)*6-180+3,p=Dp(o),a=r/(1-r),l=n/Math.sqrt(1-r*Math.sin(f)*Math.sin(f)),c=Math.tan(f)*Math.tan(f),u=a*Math.cos(f)*Math.cos(f),h=Math.cos(f)*(g-p),d=n*((1-r/4-3*r*r/64-5*r*r*r/256)*f-(3*r/8+3*r*r/32+45*r*r*r/1024)*Math.sin(2*f)+(15*r*r/256+45*r*r*r/1024)*Math.sin(4*f)-35*r*r*r/3072*Math.sin(6*f));var v=s*l*(h+(1-c+u)*h*h*h/6+(5-18*c+c*c+72*u-58*a)*h*h*h*h*h/120)+5e5,y=s*(d+l*Math.tan(f)*(h*h/2+(5-c+9*u+4*u*u)*h*h*h*h/24+(61-58*c+c*c+600*u-330*a)*h*h*h*h*h*h/720));return e<0&&(y+=1e7),{northing:Math.round(y),easting:Math.round(v),zoneNumber:m,zoneLetter:GB(e)}}function CA(i){var e=i.northing,t=i.easting,n=i.zoneLetter,r=i.zoneNumber;if(r<0||r>60)return null;var s=.9996,o=6378137,a=.00669438,l,c=(1-Math.sqrt(1-a))/(1+Math.sqrt(1-a)),u,h,d,f,g,p,m,v,y,A=t-5e5,_=e;n<"N"&&(_-=1e7),m=(r-1)*6-180+3,l=a/(1-a),p=_/s,v=p/(o*(1-a/4-3*a*a/64-5*a*a*a/256)),y=v+(3*c/2-27*c*c*c/32)*Math.sin(2*v)+(21*c*c/16-55*c*c*c*c/32)*Math.sin(4*v)+151*c*c*c/96*Math.sin(6*v),u=o/Math.sqrt(1-a*Math.sin(y)*Math.sin(y)),h=Math.tan(y)*Math.tan(y),d=l*Math.cos(y)*Math.cos(y),f=o*(1-a)/Math.pow(1-a*Math.sin(y)*Math.sin(y),1.5),g=A/(u*s);var C=y-u*Math.tan(y)/f*(g*g/2-(5+3*h+10*d-4*d*d-9*l)*g*g*g*g/24+(61+90*h+298*d+45*h*h-252*l-3*d*d)*g*g*g*g*g*g/720);C=YI(C);var I=(g-(1+2*h+d)*g*g*g/6+(5-2*d+28*h-3*d*d+8*l+24*h*h)*g*g*g*g*g/120)/Math.cos(y);I=m+YI(I);var b;if(i.accuracy){var S=CA({northing:i.northing+i.accuracy,easting:i.easting+i.accuracy,zoneLetter:i.zoneLetter,zoneNumber:i.zoneNumber});b={top:S.lat,right:S.lon,bottom:C,left:I}}else b={lat:C,lon:I};return b}function GB(i){var e="Z";return 84>=i&&i>=72?e="X":72>i&&i>=64?e="W":64>i&&i>=56?e="V":56>i&&i>=48?e="U":48>i&&i>=40?e="T":40>i&&i>=32?e="S":32>i&&i>=24?e="R":24>i&&i>=16?e="Q":16>i&&i>=8?e="P":8>i&&i>=0?e="N":0>i&&i>=-8?e="M":-8>i&&i>=-16?e="L":-16>i&&i>=-24?e="K":-24>i&&i>=-32?e="J":-32>i&&i>=-40?e="H":-40>i&&i>=-48?e="G":-48>i&&i>=-56?e="F":-56>i&&i>=-64?e="E":-64>i&&i>=-72?e="D":-72>i&&i>=-80&&(e="C"),e}function OB(i,e){var t="00000"+i.easting,n="00000"+i.northing;return i.zoneNumber+i.zoneLetter+DB(i.easting,i.northing,i.zoneNumber)+t.substr(t.length-5,e)+n.substr(n.length-5,e)}function DB(i,e,t){var n=lx(t),r=Math.floor(i/1e5),s=Math.floor(e/1e5)%20;return kB(r,s,n)}function lx(i){var e=i%WI;return e===0&&(e=WI),e}function kB(i,e,t){var n=t-1,r=rx.charCodeAt(n),s=sx.charCodeAt(n),o=r+i-1,a=s+e,l=!1;o>mu&&(o=o-mu+kl-1,l=!0),(o===Dn||r<Dn&&o>Dn||(o>Dn||r<Dn)&&l)&&o++,(o===mr||r<mr&&o>mr||(o>mr||r<mr)&&l)&&(o++,o===Dn&&o++),o>mu&&(o=o-mu+kl-1),a>pu?(a=a-pu+kl-1,l=!0):l=!1,(a===Dn||s<Dn&&a>Dn||(a>Dn||s<Dn)&&l)&&a++,(a===mr||s<mr&&a>mr||(a>mr||s<mr)&&l)&&(a++,a===Dn&&a++),a>pu&&(a=a-pu+kl-1);var c=String.fromCharCode(o)+String.fromCharCode(a);return c}function cx(i){if(i&&i.length===0)throw"MGRSPoint coverting from nothing";for(var e=i.length,t=null,n="",r,s=0;!/[A-Z]/.test(r=i.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+i;n+=r,s++}var o=parseInt(n,10);if(s===0||s+3>e)throw"MGRSPoint bad conversion from: "+i;var a=i.charAt(s++);if(a<="A"||a==="B"||a==="Y"||a>="Z"||a==="I"||a==="O")throw"MGRSPoint zone letter "+a+" not handled: "+i;t=i.substring(s,s+=2);for(var l=lx(o),c=FB(t.charAt(0),l),u=NB(t.charAt(1),l);u<UB(a);)u+=2e6;var h=e-s;if(h%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+i;var d=h/2,f=0,g=0,p,m,v,y,A;return d>0&&(p=1e5/Math.pow(10,d),m=i.substring(s,s+d),f=parseFloat(m)*p,v=i.substring(s+d),g=parseFloat(v)*p),y=f+c,A=g+u,{easting:y,northing:A,zoneLetter:a,zoneNumber:o,accuracy:p}}function FB(i,e){for(var t=rx.charCodeAt(e-1),n=1e5,r=!1;t!==i.charCodeAt(0);){if(t++,t===Dn&&t++,t===mr&&t++,t>mu){if(r)throw"Bad character: "+i;t=kl,r=!0}n+=1e5}return n}function NB(i,e){if(i>"V")throw"MGRSPoint given invalid Northing "+i;for(var t=sx.charCodeAt(e-1),n=0,r=!1;t!==i.charCodeAt(0);){if(t++,t===Dn&&t++,t===mr&&t++,t>pu){if(r)throw"Bad character: "+i;t=kl,r=!0}n+=1e5}return n}function UB(i){var e;switch(i){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+i}function Ec(i,e,t){if(!(this instanceof Ec))return new Ec(i,e,t);if(Array.isArray(i))this.x=i[0],this.y=i[1],this.z=i[2]||0;else if(typeof i=="object")this.x=i.x,this.y=i.y,this.z=i.z||0;else if(typeof i=="string"&&typeof e>"u"){var n=i.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=i,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Ec.fromMGRS=function(i){return new Ec(ax(i))};Ec.prototype.toMGRS=function(i){return ox([this.x,this.y],i)};var BB=1,jB=.25,HI=.046875,qI=.01953125,XI=.01068115234375,zB=.75,VB=.46875,WB=.013020833333333334,YB=.007120768229166667,HB=.3645833333333333,qB=.005696614583333333,XB=.3076171875;function ux(i){var e=[];e[0]=BB-i*(jB+i*(HI+i*(qI+i*XI))),e[1]=i*(zB-i*(HI+i*(qI+i*XI)));var t=i*i;return e[2]=t*(VB-i*(WB+i*YB)),t*=i,e[3]=t*(HB-i*qB),e[4]=t*i*XB,e}function C0(i,e,t,n){return t*=e,e*=e,n[0]*i-t*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var ZB=20;function hx(i,e,t){for(var n=1/(1-e),r=i,s=ZB;s;--s){var o=Math.sin(r),a=1-e*o*o;if(a=(C0(r,o,Math.cos(r),t)-i)*(a*Math.sqrt(a))*n,r-=a,Math.abs(a)<ye)return r}return r}function KB(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=ux(this.es),this.ml0=C0(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function JB(i){var e=i.x,t=i.y,n=we(e-this.long0),r,s,o,a=Math.sin(t),l=Math.cos(t);if(this.es){var u=l*n,h=Math.pow(u,2),d=this.ep2*Math.pow(l,2),f=Math.pow(d,2),g=Math.abs(l)>ye?Math.tan(t):0,p=Math.pow(g,2),m=Math.pow(p,2);r=1-this.es*Math.pow(a,2),u=u/Math.sqrt(r);var v=C0(t,a,l,this.en);s=this.a*(this.k0*u*(1+h/6*(1-p+d+h/20*(5-18*p+m+14*d-58*p*d+h/42*(61+179*m-m*p-479*p)))))+this.x0,o=this.a*(this.k0*(v-this.ml0+a*n*u/2*(1+h/12*(5-p+9*d+4*f+h/30*(61+m-58*p+270*d-330*p*d+h/56*(1385+543*m-m*p-3111*p))))))+this.y0}else{var c=l*Math.sin(n);if(Math.abs(Math.abs(c)-1)<ye)return 93;if(s=.5*this.a*this.k0*Math.log((1+c)/(1-c))+this.x0,o=l*Math.cos(n)/Math.sqrt(1-Math.pow(c,2)),c=Math.abs(o),c>=1){if(c-1>ye)return 93;o=0}else o=Math.acos(o);t<0&&(o=-o),o=this.a*this.k0*(o-this.lat0)+this.y0}return i.x=s,i.y=o,i}function QB(i){var e,t,n,r,s=(i.x-this.x0)*(1/this.a),o=(i.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,t=hx(e,this.es,this.en),Math.abs(t)<le){var h=Math.sin(t),d=Math.cos(t),f=Math.abs(d)>ye?Math.tan(t):0,g=this.ep2*Math.pow(d,2),p=Math.pow(g,2),m=Math.pow(f,2),v=Math.pow(m,2);e=1-this.es*Math.pow(h,2);var y=s*Math.sqrt(e)/this.k0,A=Math.pow(y,2);e=e*f,n=t-e*A/(1-this.es)*.5*(1-A/12*(5+3*m-9*g*m+g-4*p-A/30*(61+90*m-252*g*m+45*v+46*g-A/56*(1385+3633*m+4095*v+1574*v*m)))),r=we(this.long0+y*(1-A/6*(1+2*m+g-A/20*(5+28*m+24*v+8*g*m+6*g-A/42*(61+662*m+1320*v+720*v*m))))/d)}else n=le*qh(o),r=0;else{var a=Math.exp(s/this.k0),l=.5*(a-1/a),c=this.lat0+o/this.k0,u=Math.cos(c);e=Math.sqrt((1-Math.pow(u,2))/(1+Math.pow(l,2))),n=Math.asin(e),o<0&&(n=-n),l===0&&u===0?r=0:r=we(Math.atan2(l,u)+this.long0)}return i.x=r,i.y=n,i}var $B=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const af={init:KB,forward:JB,inverse:QB,names:$B};function dx(i){var e=Math.exp(i);return e=(e-1/e)/2,e}function _r(i,e){i=Math.abs(i),e=Math.abs(e);var t=Math.max(i,e),n=Math.min(i,e)/(t||1);return t*Math.sqrt(1+Math.pow(n,2))}function e9(i){var e=1+i,t=e-1;return t===0?i:i*Math.log(e)/t}function t9(i){var e=Math.abs(i);return e=e9(e*(1+e/(_r(1,e)+1))),i<0?-e:e}function IA(i,e){for(var t=2*Math.cos(2*e),n=i.length-1,r=i[n],s=0,o;--n>=0;)o=-s+t*r+i[n],s=r,r=o;return e+o*Math.sin(2*e)}function i9(i,e){for(var t=2*Math.cos(e),n=i.length-1,r=i[n],s=0,o;--n>=0;)o=-s+t*r+i[n],s=r,r=o;return Math.sin(e)*o}function n9(i){var e=Math.exp(i);return e=(e+1/e)/2,e}function fx(i,e,t){for(var n=Math.sin(e),r=Math.cos(e),s=dx(t),o=n9(t),a=2*r*o,l=-2*n*s,c=i.length-1,u=i[c],h=0,d=0,f=0,g,p;--c>=0;)g=d,p=h,d=u,h=f,u=-g+a*d-l*h+i[c],f=-p+l*d+a*h;return a=n*o,l=r*s,[a*u-l*f,a*f+l*u]}function r9(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(af.init.apply(this),this.forward=af.forward,this.inverse=af.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var i=this.es/(1+Math.sqrt(1-this.es)),e=i/(2-i),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var n=IA(this.cbg,this.lat0);this.Zb=-this.Qn*(n+i9(this.gtu,2*n))}function s9(i){var e=we(i.x-this.long0),t=i.y;t=IA(this.cbg,t);var n=Math.sin(t),r=Math.cos(t),s=Math.sin(e),o=Math.cos(e);t=Math.atan2(n,o*r),e=Math.atan2(s*r,_r(n,r*o)),e=t9(Math.tan(e));var a=fx(this.gtu,2*t,2*e);t=t+a[0],e=e+a[1];var l,c;return Math.abs(e)<=2.623395162778?(l=this.a*(this.Qn*e)+this.x0,c=this.a*(this.Qn*t+this.Zb)+this.y0):(l=1/0,c=1/0),i.x=l,i.y=c,i}function o9(i){var e=(i.x-this.x0)*(1/this.a),t=(i.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var n,r;if(Math.abs(e)<=2.623395162778){var s=fx(this.utg,2*t,2*e);t=t+s[0],e=e+s[1],e=Math.atan(dx(e));var o=Math.sin(t),a=Math.cos(t),l=Math.sin(e),c=Math.cos(e);t=Math.atan2(o*c,_r(l,c*a)),e=Math.atan2(l,c*a),n=we(e+this.long0),r=IA(this.cgb,t)}else n=1/0,r=1/0;return i.x=n,i.y=r,i}var a9=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const lf={init:r9,forward:s9,inverse:o9,names:a9};function l9(i,e){if(i===void 0){if(i=Math.floor((we(e)+Math.PI)*30/Math.PI)+1,i<0)return 0;if(i>60)return 60}return i}var c9="etmerc";function u9(){var i=l9(this.zone,this.long0);if(i===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(i)-183)*Hi,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,lf.init.apply(this),this.forward=lf.forward,this.inverse=lf.inverse}var h9=["Universal Transverse Mercator System","utm"];const d9={init:u9,names:h9,dependsOn:c9};function EA(i,e){return Math.pow((1-i)/(1+i),e)}var f9=20;function g9(){var i=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*i*i),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(i/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+Lt)/(Math.pow(Math.tan(.5*this.lat0+Lt),this.C)*EA(this.e*i,this.ratexp))}function p9(i){var e=i.x,t=i.y;return i.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+Lt),this.C)*EA(this.e*Math.sin(t),this.ratexp))-le,i.x=this.C*e,i}function m9(i){for(var e=1e-14,t=i.x/this.C,n=i.y,r=Math.pow(Math.tan(.5*n+Lt)/this.K,1/this.C),s=f9;s>0&&(n=2*Math.atan(r*EA(this.e*Math.sin(i.y),-.5*this.e))-le,!(Math.abs(n-i.y)<e));--s)i.y=n;return s?(i.x=t,i.y=n,i):null}var v9=["gauss"];const wA={init:g9,forward:p9,inverse:m9,names:v9};function y9(){wA.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function A9(i){var e,t,n,r;return i.x=we(i.x-this.long0),wA.forward.apply(this,[i]),e=Math.sin(i.y),t=Math.cos(i.y),n=Math.cos(i.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*n),i.x=r*t*Math.sin(i.x),i.y=r*(this.cosc0*e-this.sinc0*t*n),i.x=this.a*i.x+this.x0,i.y=this.a*i.y+this.y0,i}function _9(i){var e,t,n,r,s;if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,s=_r(i.x,i.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),t=Math.cos(o),r=Math.asin(t*this.sinc0+i.y*e*this.cosc0/s),n=Math.atan2(i.x*e,s*this.cosc0*t-i.y*this.sinc0*e)}else r=this.phic0,n=0;return i.x=n,i.y=r,wA.inverse.apply(this,[i]),i.x=we(i.x+this.long0),i}var C9=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const I9={init:y9,forward:A9,inverse:_9,names:C9};function E9(i,e,t){return e*=t,Math.tan(.5*(le+i))*Math.pow((1-e)/(1+e),.5*t)}function w9(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ye&&(this.k0=.5*(1+qh(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=ye&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=ye&&Math.abs(Math.cos(this.lat_ts))>ye&&(this.k0=.5*this.cons*ps(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/Ur(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=ps(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-le,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function b9(i){var e=i.x,t=i.y,n=Math.sin(t),r=Math.cos(t),s,o,a,l,c,u,h=we(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=ye&&Math.abs(t+this.lat0)<=ye?(i.x=NaN,i.y=NaN,i):this.sphere?(s=2*this.k0/(1+this.sinlat0*n+this.coslat0*r*Math.cos(h)),i.x=this.a*s*r*Math.sin(h)+this.x0,i.y=this.a*s*(this.coslat0*n-this.sinlat0*r*Math.cos(h))+this.y0,i):(o=2*Math.atan(this.ssfn_(t,n,this.e))-le,l=Math.cos(o),a=Math.sin(o),Math.abs(this.coslat0)<=ye?(c=Ur(this.e,t*this.con,this.con*n),u=2*this.a*this.k0*c/this.cons,i.x=this.x0+u*Math.sin(e-this.long0),i.y=this.y0-this.con*u*Math.cos(e-this.long0),i):(Math.abs(this.sinlat0)<ye?(s=2*this.a*this.k0/(1+l*Math.cos(h)),i.y=s*a):(s=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*a+this.cosX0*l*Math.cos(h))),i.y=s*(this.cosX0*a-this.sinX0*l*Math.cos(h))+this.y0),i.x=s*l*Math.sin(h)+this.x0,i))}function S9(i){i.x-=this.x0,i.y-=this.y0;var e,t,n,r,s,o=Math.sqrt(i.x*i.x+i.y*i.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,t=this.lat0,o<=ye?(i.x=e,i.y=t,i):(t=Math.asin(Math.cos(a)*this.sinlat0+i.y*Math.sin(a)*this.coslat0/o),Math.abs(this.coslat0)<ye?this.lat0>0?e=we(this.long0+Math.atan2(i.x,-1*i.y)):e=we(this.long0+Math.atan2(i.x,i.y)):e=we(this.long0+Math.atan2(i.x*Math.sin(a),o*this.coslat0*Math.cos(a)-i.y*this.sinlat0*Math.sin(a))),i.x=e,i.y=t,i)}else if(Math.abs(this.coslat0)<=ye){if(o<=ye)return t=this.lat0,e=this.long0,i.x=e,i.y=t,i;i.x*=this.con,i.y*=this.con,n=o*this.cons/(2*this.a*this.k0),t=this.con*xh(this.e,n),e=this.con*we(this.con*this.long0+Math.atan2(i.x,-1*i.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=ye?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+i.y*Math.sin(r)*this.cosX0/o),e=we(this.long0+Math.atan2(i.x*Math.sin(r),o*this.cosX0*Math.cos(r)-i.y*this.sinX0*Math.sin(r)))),t=-1*xh(this.e,Math.tan(.5*(le+s)));return i.x=e,i.y=t,i}var x9=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const P9={init:w9,forward:b9,inverse:S9,names:x9,ssfn_:E9};function M9(){var i=this.lat0;this.lambda0=this.long0;var e=Math.sin(i),t=this.a,n=this.rf,r=1/n,s=2*r-Math.pow(r,2),o=this.e=Math.sqrt(s);this.R=this.k0*t*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(i),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+i/2)),c=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*c}function R9(i){var e=Math.log(Math.tan(Math.PI/4-i.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(i.y))/(1-this.e*Math.sin(i.y))),n=-this.alpha*(e+t)+this.K,r=2*(Math.atan(Math.exp(n))-Math.PI/4),s=this.alpha*(i.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return i.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,i.x=this.R*o+this.x0,i}function T9(i){for(var e=i.x-this.x0,t=i.y-this.y0,n=e/this.R,r=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(n)),o=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,l=0,c=s,u=-1e3,h=0;Math.abs(c-u)>1e-7;){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return i.x=a,i.y=c,i}var L9=["somerc"];const G9={init:M9,forward:R9,inverse:T9,names:L9};var El=1e-7;function O9(i){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof i.PROJECTION=="object"?Object.keys(i.PROJECTION)[0]:i.PROJECTION;return"no_uoff"in i||"no_off"in i||e.indexOf(t)!==-1}function D9(){var i,e,t,n,r,s,o,a,l,c,u=0,h,d=0,f=0,g=0,p=0,m=0,v=0;this.no_off=O9(this),this.no_rot="no_rot"in this;var y=!1;"alpha"in this&&(y=!0);var A=!1;if("rectified_grid_angle"in this&&(A=!0),y&&(v=this.alpha),A&&(u=this.rectified_grid_angle*Hi),y||A)d=this.longc;else if(f=this.long1,p=this.lat1,g=this.long2,m=this.lat2,Math.abs(p-m)<=El||(i=Math.abs(p))<=El||Math.abs(i-le)<=El||Math.abs(Math.abs(this.lat0)-le)<=El||Math.abs(Math.abs(m)-le)<=El)throw new Error;var _=1-this.es;e=Math.sqrt(_),Math.abs(this.lat0)>ye?(a=Math.sin(this.lat0),t=Math.cos(this.lat0),i=1-this.es*a*a,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/_),this.A=this.B*this.k0*e/i,n=this.B*e/(t*Math.sqrt(i)),r=n*n-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=n,this.E*=Math.pow(Ur(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=r=1),y||A?(y?(h=Math.asin(Math.sin(v)/n),A||(u=v)):(h=u,v=Math.asin(n*Math.sin(h))),this.lam0=d-Math.asin(.5*(r-1/r)*Math.tan(h))/this.B):(s=Math.pow(Ur(this.e,p,Math.sin(p)),this.B),o=Math.pow(Ur(this.e,m,Math.sin(m)),this.B),r=this.E/s,l=(o-s)/(o+s),c=this.E*this.E,c=(c-o*s)/(c+o*s),i=f-g,i<-Math.pi?g-=bh:i>Math.pi&&(g+=bh),this.lam0=we(.5*(f+g)-Math.atan(c*Math.tan(.5*this.B*(f-g))/l)/this.B),h=Math.atan(2*Math.sin(this.B*we(f-this.lam0))/(r-1/r)),u=v=Math.asin(n*Math.sin(h))),this.singam=Math.sin(h),this.cosgam=Math.cos(h),this.sinrot=Math.sin(u),this.cosrot=Math.cos(u),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(v))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*h,this.v_pole_n=this.ArB*Math.log(Math.tan(Lt-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(Lt+r))}function k9(i){var e={},t,n,r,s,o,a,l,c;if(i.x=i.x-this.lam0,Math.abs(Math.abs(i.y)-le)>ye){if(o=this.E/Math.pow(Ur(this.e,i.y,Math.sin(i.y)),this.B),a=1/o,t=.5*(o-a),n=.5*(o+a),s=Math.sin(this.B*i.x),r=(t*this.singam-s*this.cosgam)/n,Math.abs(Math.abs(r)-1)<ye)throw new Error;c=.5*this.ArB*Math.log((1-r)/(1+r)),a=Math.cos(this.B*i.x),Math.abs(a)<El?l=this.A*i.x:l=this.ArB*Math.atan2(t*this.cosgam+s*this.singam,a)}else c=i.y>0?this.v_pole_n:this.v_pole_s,l=this.ArB*i.y;return this.no_rot?(e.x=l,e.y=c):(l-=this.u_0,e.x=c*this.cosrot+l*this.sinrot,e.y=l*this.cosrot-c*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function F9(i){var e,t,n,r,s,o,a,l={};if(i.x=(i.x-this.x0)*(1/this.a),i.y=(i.y-this.y0)*(1/this.a),this.no_rot?(t=i.y,e=i.x):(t=i.x*this.cosrot-i.y*this.sinrot,e=i.y*this.cosrot+i.x*this.sinrot+this.u_0),n=Math.exp(-this.BrA*t),r=.5*(n-1/n),s=.5*(n+1/n),o=Math.sin(this.BrA*e),a=(o*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(a)-1)<ye)l.x=0,l.y=a<0?-le:le;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=xh(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var N9=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const U9={init:D9,forward:k9,inverse:F9,names:N9};function B9(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<ye)){var i=this.b/this.a;this.e=Math.sqrt(1-i*i);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),n=ps(this.e,e,t),r=Ur(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=ps(this.e,s,o),l=Ur(this.e,this.lat2,s),c=Ur(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>ye?this.ns=Math.log(n/a)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function j9(i){var e=i.x,t=i.y;Math.abs(2*Math.abs(t)-Math.PI)<=ye&&(t=qh(t)*(le-2*ye));var n=Math.abs(Math.abs(t)-le),r,s;if(n>ye)r=Ur(this.e,t,Math.sin(t)),s=this.a*this.f0*Math.pow(r,this.ns);else{if(n=t*this.ns,n<=0)return null;s=0}var o=this.ns*we(e-this.long0);return i.x=this.k0*(s*Math.sin(o))+this.x0,i.y=this.k0*(this.rh-s*Math.cos(o))+this.y0,i}function z9(i){var e,t,n,r,s,o=(i.x-this.x0)/this.k0,a=this.rh-(i.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),t=1):(e=-Math.sqrt(o*o+a*a),t=-1);var l=0;if(e!==0&&(l=Math.atan2(t*o,t*a)),e!==0||this.ns>0){if(t=1/this.ns,n=Math.pow(e/(this.a*this.f0),t),r=xh(this.e,n),r===-9999)return null}else r=-le;return s=we(l/this.ns+this.long0),i.x=s,i.y=r,i}var V9=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const W9={init:B9,forward:j9,inverse:z9,names:V9};function Y9(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function H9(i){var e,t,n,r,s,o,a,l=i.x,c=i.y,u=we(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),n=-u*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(n)),s=Math.asin(Math.cos(t)*Math.sin(n)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),i.y=a*Math.cos(o)/1,i.x=a*Math.sin(o)/1,this.czech||(i.y*=-1,i.x*=-1),i}function q9(i){var e,t,n,r,s,o,a,l,c=i.x;i.x=i.y,i.y=c,this.czech||(i.y*=-1,i.x*=-1),o=Math.sqrt(i.x*i.x+i.y*i.y),s=Math.atan2(i.y,i.x),r=s/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),t=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(e)),i.x=this.long0-t/this.alfa,a=e,l=0;var u=0;do i.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-i.y)<1e-10&&(l=1),a=i.y,u+=1;while(l===0&&u<15);return u>=15?null:i}var X9=["Krovak","krovak"];const Z9={init:Y9,forward:H9,inverse:q9,names:X9};function Pn(i,e,t,n,r){return i*r-e*Math.sin(2*r)+t*Math.sin(4*r)-n*Math.sin(6*r)}function Xh(i){return 1-.25*i*(1+i/16*(3+1.25*i))}function Zh(i){return .375*i*(1+.25*i*(1+.46875*i))}function Kh(i){return .05859375*i*i*(1+.75*i)}function Jh(i){return i*i*i*(35/3072)}function wc(i,e,t){var n=e*t;return i/Math.sqrt(1-n*n)}function Vc(i){return Math.abs(i)<le?i:i-qh(i)*Math.PI}function Sg(i,e,t,n,r){var s,o;s=i/e;for(var a=0;a<15;a++)if(o=(i-(e*s-t*Math.sin(2*s)+n*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*t*Math.cos(2*s)+4*n*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function K9(){this.sphere||(this.e0=Xh(this.es),this.e1=Zh(this.es),this.e2=Kh(this.es),this.e3=Jh(this.es),this.ml0=this.a*Pn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function J9(i){var e,t,n=i.x,r=i.y;if(n=we(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(n)),t=this.a*(Math.atan2(Math.tan(r),Math.cos(n))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=wc(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),c=n*Math.cos(r),u=c*c,h=this.es*o*o/(1-this.es),d=this.a*Pn(this.e0,this.e1,this.e2,this.e3,r);e=a*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),t=d-this.ml0+a*s/o*u*(.5+(5-l+6*h)*u/24)}return i.x=e+this.x0,i.y=t+this.y0,i}function Q9(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,t=i.y/this.a,n,r;if(this.sphere){var s=t+this.lat0;n=Math.asin(Math.sin(s)*Math.cos(e)),r=Math.atan2(Math.tan(e),Math.cos(s))}else{var o=this.ml0/this.a+t,a=Sg(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-le)<=ye)return i.x=this.long0,i.y=le,t<0&&(i.y*=-1),i;var l=wc(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),h=e*this.a/l,d=h*h;n=a-l*Math.tan(a)/c*h*h*(.5-(1+3*u)*h*h/24),r=h*(1-d*(u/3+(1+3*u)*u*d/15))/Math.cos(a)}return i.x=we(r+this.long0),i.y=Vc(n),i}var $9=["Cassini","Cassini_Soldner","cass"];const e7={init:K9,forward:J9,inverse:Q9,names:$9};function To(i,e){var t;return i>1e-7?(t=i*e,(1-i*i)*(e/(1-t*t)-.5/i*Math.log((1-t)/(1+t)))):2*e}var t7=1,i7=2,n7=3,r7=4;function s7(){var i=Math.abs(this.lat0);if(Math.abs(i-le)<ye?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(i)<ye?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=To(this.e,1),this.mmf=.5/(1-this.es),this.apa=g7(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=To(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function o7(i){var e,t,n,r,s,o,a,l,c,u,h=i.x,d=i.y;if(h=we(h-this.long0),this.sphere){if(s=Math.sin(d),u=Math.cos(d),n=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+u*n:1+this.sinph0*s+this.cosph0*u*n,t<=ye)return null;t=Math.sqrt(2/t),e=t*u*Math.sin(h),t*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*u*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(d+this.lat0)<ye)return null;t=Lt-d*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(h),t*=n}}else{switch(a=0,l=0,c=0,n=Math.cos(h),r=Math.sin(h),s=Math.sin(d),o=To(this.e,s),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*n;break;case this.EQUIT:c=1+l*n;break;case this.N_POLE:c=le+d,o=this.qp-o;break;case this.S_POLE:c=d-le,o=this.qp+o;break}if(Math.abs(c)<ye)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),this.mode===this.OBLIQ?t=this.ymf*c*(this.cosb1*a-this.sinb1*l*n):t=(c=Math.sqrt(2/(1+l*n)))*a*this.ymf,e=this.xmf*c*l*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*r,t=n*(this.mode===this.S_POLE?c:-c)):e=t=0;break}}return i.x=this.a*e+this.x0,i.y=this.a*t+this.y0,i}function a7(i){i.x-=this.x0,i.y-=this.y0;var e=i.x/this.a,t=i.y/this.a,n,r,s,o,a,l,c;if(this.sphere){var u=0,h,d=0;if(h=Math.sqrt(e*e+t*t),r=h*.5,r>1)return null;switch(r=2*Math.asin(r),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(d=Math.sin(r),u=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(h)<=ye?0:Math.asin(t*d/h),e*=d,t=u*h;break;case this.OBLIQ:r=Math.abs(h)<=ye?this.lat0:Math.asin(u*this.sinph0+t*d*this.cosph0/h),e*=d*this.cosph0,t=(u-Math.sin(r)*this.sinph0)*h;break;case this.N_POLE:t=-t,r=le-r;break;case this.S_POLE:r-=le;break}n=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(c=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,l=Math.sqrt(e*e+t*t),l<ye)return i.x=this.long0,i.y=this.lat0,i;o=2*Math.asin(.5*l/this.rq),s=Math.cos(o),e*=o=Math.sin(o),this.mode===this.OBLIQ?(c=s*this.sinb1+t*o*this.cosb1/l,a=this.qp*c,t=l*this.cosb1*s-t*this.sinb1*o):(c=t*o/l,a=this.qp*c,t=l*s)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),a=e*e+t*t,!a)return i.x=this.long0,i.y=this.lat0,i;c=1-a/this.qp,this.mode===this.S_POLE&&(c=-c)}n=Math.atan2(e,t),r=p7(Math.asin(c),this.apa)}return i.x=we(this.long0+n),i.y=r,i}var l7=.3333333333333333,c7=.17222222222222222,u7=.10257936507936508,h7=.06388888888888888,d7=.0664021164021164,f7=.016415012942191543;function g7(i){var e,t=[];return t[0]=i*l7,e=i*i,t[0]+=e*c7,t[1]=e*h7,e*=i,t[0]+=e*u7,t[1]+=e*d7,t[2]=e*f7,t}function p7(i,e){var t=i+i;return i+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var m7=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const v7={init:s7,forward:o7,inverse:a7,names:m7,S_POLE:t7,N_POLE:i7,EQUIT:n7,OBLIQ:r7};function Wo(i){return Math.abs(i)>1&&(i=i>1?1:-1),Math.asin(i)}function y7(){Math.abs(this.lat1+this.lat2)<ye||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=ps(this.e3,this.sin_po,this.cos_po),this.qs1=To(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=ps(this.e3,this.sin_po,this.cos_po),this.qs2=To(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=To(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>ye?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function A7(i){var e=i.x,t=i.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var n=To(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,s=this.ns0*we(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return i.x=o,i.y=a,i}function _7(i){var e,t,n,r,s,o;return i.x-=this.x0,i.y=this.rh-i.y+this.y0,this.ns0>=0?(e=Math.sqrt(i.x*i.x+i.y*i.y),n=1):(e=-Math.sqrt(i.x*i.x+i.y*i.y),n=-1),r=0,e!==0&&(r=Math.atan2(n*i.x,n*i.y)),n=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-n*n)/(2*this.ns0)):(t=(this.c-n*n)/this.ns0,o=this.phi1z(this.e3,t)),s=we(r/this.ns0+this.long0),i.x=s,i.y=o,i}function C7(i,e){var t,n,r,s,o,a=Wo(.5*e);if(i<ye)return a;for(var l=i*i,c=1;c<=25;c++)if(t=Math.sin(a),n=Math.cos(a),r=i*t,s=1-r*r,o=.5*s*s/n*(e/(1-l)-t/s+.5/i*Math.log((1-r)/(1+r))),a=a+o,Math.abs(o)<=1e-7)return a;return null}var I7=["Albers_Conic_Equal_Area","Albers","aea"];const E7={init:y7,forward:A7,inverse:_7,names:I7,phi1z:C7};function w7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function b7(i){var e,t,n,r,s,o,a,l,c=i.x,u=i.y;return n=we(c-this.long0),e=Math.sin(u),t=Math.cos(u),r=Math.cos(n),o=this.sin_p14*e+this.cos_p14*t*r,s=1,o>0||Math.abs(o)<=ye?(a=this.x0+this.a*s*t*Math.sin(n)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*r)/o):(a=this.x0+this.infinity_dist*t*Math.sin(n),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*r)),i.x=a,i.y=l,i}function S7(i){var e,t,n,r,s,o;return i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,i.x/=this.k0,i.y/=this.k0,(e=Math.sqrt(i.x*i.x+i.y*i.y))?(r=Math.atan2(e,this.rc),t=Math.sin(r),n=Math.cos(r),o=Wo(n*this.sin_p14+i.y*t*this.cos_p14/e),s=Math.atan2(i.x*t,e*this.cos_p14*n-i.y*this.sin_p14*t),s=we(this.long0+s)):(o=this.phic0,s=0),i.x=s,i.y=o,i}var x7=["gnom"];const P7={init:w7,forward:b7,inverse:S7,names:x7};function M7(i,e){var t=1-(1-i*i)/(2*i)*Math.log((1-i)/(1+i));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*le:le;for(var n=Math.asin(.5*e),r,s,o,a,l=0;l<30;l++)if(s=Math.sin(n),o=Math.cos(n),a=i*s,r=Math.pow(1-a*a,2)/(2*o)*(e/(1-i*i)-s/(1-a*a)+.5/i*Math.log((1-a)/(1+a))),n+=r,Math.abs(r)<=1e-10)return n;return NaN}function R7(){this.sphere||(this.k0=ps(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function T7(i){var e=i.x,t=i.y,n,r,s=we(e-this.long0);if(this.sphere)n=this.x0+this.a*s*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var o=To(this.e,Math.sin(t));n=this.x0+this.a*this.k0*s,r=this.y0+this.a*o*.5/this.k0}return i.x=n,i.y=r,i}function L7(i){i.x-=this.x0,i.y-=this.y0;var e,t;return this.sphere?(e=we(this.long0+i.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(i.y/this.a*Math.cos(this.lat_ts))):(t=M7(this.e,2*i.y*this.k0/this.a),e=we(this.long0+i.x/(this.a*this.k0))),i.x=e,i.y=t,i}var G7=["cea"];const O7={init:R7,forward:T7,inverse:L7,names:G7};function D7(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function k7(i){var e=i.x,t=i.y,n=we(e-this.long0),r=Vc(t-this.lat0);return i.x=this.x0+this.a*n*this.rc,i.y=this.y0+this.a*r,i}function F7(i){var e=i.x,t=i.y;return i.x=we(this.long0+(e-this.x0)/(this.a*this.rc)),i.y=Vc(this.lat0+(t-this.y0)/this.a),i}var N7=["Equirectangular","Equidistant_Cylindrical","eqc"];const U7={init:D7,forward:k7,inverse:F7,names:N7};var ZI=20;function B7(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Xh(this.es),this.e1=Zh(this.es),this.e2=Kh(this.es),this.e3=Jh(this.es),this.ml0=this.a*Pn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function j7(i){var e=i.x,t=i.y,n,r,s,o=we(e-this.long0);if(s=o*Math.sin(t),this.sphere)Math.abs(t)<=ye?(n=this.a*o,r=-1*this.a*this.lat0):(n=this.a*Math.sin(s)/Math.tan(t),r=this.a*(Vc(t-this.lat0)+(1-Math.cos(s))/Math.tan(t)));else if(Math.abs(t)<=ye)n=this.a*o,r=-1*this.ml0;else{var a=wc(this.a,this.e,Math.sin(t))/Math.tan(t);n=a*Math.sin(s),r=this.a*Pn(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+a*(1-Math.cos(s))}return i.x=n+this.x0,i.y=r+this.y0,i}function z7(i){var e,t,n,r,s,o,a,l,c;if(n=i.x-this.x0,r=i.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=ye)e=we(n/this.a+this.long0),t=0;else{o=this.lat0+r/this.a,a=n*n/this.a/this.a+o*o,l=o;var u;for(s=ZI;s;--s)if(u=Math.tan(l),c=-1*(o*(l*u+1)-l-.5*(l*l+a)*u)/((l-o)/u-1),l+=c,Math.abs(c)<=ye){t=l;break}e=we(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(t))}else if(Math.abs(r+this.ml0)<=ye)t=0,e=we(this.long0+n/this.a);else{o=(this.ml0+r)/this.a,a=n*n/this.a/this.a+o*o,l=o;var h,d,f,g,p;for(s=ZI;s;--s)if(p=this.e*Math.sin(l),h=Math.sqrt(1-p*p)*Math.tan(l),d=this.a*Pn(this.e0,this.e1,this.e2,this.e3,l),f=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),g=d/this.a,c=(o*(h*g+1)-g-.5*h*(g*g+a))/(this.es*Math.sin(2*l)*(g*g+a-2*o*g)/(4*h)+(o-g)*(h*f-2/Math.sin(2*l))-f),l-=c,Math.abs(c)<=ye){t=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=we(this.long0+Math.asin(n*h/this.a)/Math.sin(t))}return i.x=e,i.y=t,i}var V7=["Polyconic","poly"];const W7={init:B7,forward:j7,inverse:z7,names:V7};function Y7(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function H7(i){var e,t=i.x,n=i.y,r=n-this.lat0,s=t-this.long0,o=r/Yu*1e-5,a=s,l=1,c=0;for(e=1;e<=10;e++)l=l*o,c=c+this.A[e]*l;var u=c,h=a,d=1,f=0,g,p,m=0,v=0;for(e=1;e<=6;e++)g=d*u-f*h,p=f*u+d*h,d=g,f=p,m=m+this.B_re[e]*d-this.B_im[e]*f,v=v+this.B_im[e]*d+this.B_re[e]*f;return i.x=v*this.a+this.x0,i.y=m*this.a+this.y0,i}function q7(i){var e,t=i.x,n=i.y,r=t-this.x0,s=n-this.y0,o=s/this.a,a=r/this.a,l=1,c=0,u,h,d=0,f=0;for(e=1;e<=6;e++)u=l*o-c*a,h=c*o+l*a,l=u,c=h,d=d+this.C_re[e]*l-this.C_im[e]*c,f=f+this.C_im[e]*l+this.C_re[e]*c;for(var g=0;g<this.iterations;g++){var p=d,m=f,v,y,A=o,_=a;for(e=2;e<=6;e++)v=p*d-m*f,y=m*d+p*f,p=v,m=y,A=A+(e-1)*(this.B_re[e]*p-this.B_im[e]*m),_=_+(e-1)*(this.B_im[e]*p+this.B_re[e]*m);p=1,m=0;var C=this.B_re[1],I=this.B_im[1];for(e=2;e<=6;e++)v=p*d-m*f,y=m*d+p*f,p=v,m=y,C=C+e*(this.B_re[e]*p-this.B_im[e]*m),I=I+e*(this.B_im[e]*p+this.B_re[e]*m);var b=C*C+I*I;d=(A*C+_*I)/b,f=(_*C-A*I)/b}var S=d,R=f,P=1,w=0;for(e=1;e<=9;e++)P=P*S,w=w+this.D[e]*P;var x=this.lat0+w*Yu*1e5,D=this.long0+R;return i.x=D,i.y=x,i}var X7=["New_Zealand_Map_Grid","nzmg"];const Z7={init:Y7,forward:H7,inverse:q7,names:X7};function K7(){}function J7(i){var e=i.x,t=i.y,n=we(e-this.long0),r=this.x0+this.a*n,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return i.x=r,i.y=s,i}function Q7(i){i.x-=this.x0,i.y-=this.y0;var e=we(this.long0+i.x/this.a),t=2.5*(Math.atan(Math.exp(.8*i.y/this.a))-Math.PI/4);return i.x=e,i.y=t,i}var $7=["Miller_Cylindrical","mill"];const ej={init:K7,forward:J7,inverse:Q7,names:$7};var tj=20;function ij(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=ux(this.es)}function nj(i){var e,t,n=i.x,r=i.y;if(n=we(n-this.long0),this.sphere){if(!this.m)r=this.n!==1?Math.asin(this.n*Math.sin(r)):r;else for(var s=this.n*Math.sin(r),o=tj;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<ye)break}e=this.a*this.C_x*n*(this.m+Math.cos(r)),t=this.a*this.C_y*r}else{var l=Math.sin(r),c=Math.cos(r);t=this.a*C0(r,l,c,this.en),e=this.a*n*c/Math.sqrt(1-this.es*l*l)}return i.x=e,i.y=t,i}function rj(i){var e,t,n,r;return i.x-=this.x0,n=i.x/this.a,i.y-=this.y0,e=i.y/this.a,this.sphere?(e/=this.C_y,n=n/(this.C_x*(this.m+Math.cos(e))),this.m?e=Wo((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=Wo(Math.sin(e)/this.n)),n=we(n+this.long0),e=Vc(e)):(e=hx(i.y/this.a,this.es,this.en),r=Math.abs(e),r<le?(r=Math.sin(e),t=this.long0+i.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),n=we(t)):r-ye<le&&(n=this.long0)),i.x=n,i.y=e,i}var sj=["Sinusoidal","sinu"];const oj={init:ij,forward:nj,inverse:rj,names:sj};function aj(){}function lj(i){for(var e=i.x,t=i.y,n=we(e-this.long0),r=t,s=Math.PI*Math.sin(t);;){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<ye)break}r/=2,Math.PI/2-Math.abs(t)<ye&&(n=0);var a=.900316316158*this.a*n*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return i.x=a,i.y=l,i}function cj(i){var e,t;i.x-=this.x0,i.y-=this.y0,t=i.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var n=we(this.long0+i.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var r=Math.asin(t);return i.x=n,i.y=r,i}var uj=["Mollweide","moll"];const hj={init:aj,forward:lj,inverse:cj,names:uj};function dj(){Math.abs(this.lat1+this.lat2)<ye||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=Xh(this.es),this.e1=Zh(this.es),this.e2=Kh(this.es),this.e3=Jh(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=ps(this.e,this.sinphi,this.cosphi),this.ml1=Pn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<ye?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=ps(this.e,this.sinphi,this.cosphi),this.ml2=Pn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=Pn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function fj(i){var e=i.x,t=i.y,n;if(this.sphere)n=this.a*(this.g-t);else{var r=Pn(this.e0,this.e1,this.e2,this.e3,t);n=this.a*(this.g-r)}var s=this.ns*we(e-this.long0),o=this.x0+n*Math.sin(s),a=this.y0+this.rh-n*Math.cos(s);return i.x=o,i.y=a,i}function gj(i){i.x-=this.x0,i.y=this.rh-i.y+this.y0;var e,t,n,r;this.ns>=0?(t=Math.sqrt(i.x*i.x+i.y*i.y),e=1):(t=-Math.sqrt(i.x*i.x+i.y*i.y),e=-1);var s=0;if(t!==0&&(s=Math.atan2(e*i.x,e*i.y)),this.sphere)return r=we(this.long0+s/this.ns),n=Vc(this.g-t/this.a),i.x=r,i.y=n,i;var o=this.g-t/this.a;return n=Sg(o,this.e0,this.e1,this.e2,this.e3),r=we(this.long0+s/this.ns),i.x=r,i.y=n,i}var pj=["Equidistant_Conic","eqdc"];const mj={init:dj,forward:fj,inverse:gj,names:pj};function vj(){this.R=this.a}function yj(i){var e=i.x,t=i.y,n=we(e-this.long0),r,s;Math.abs(t)<=ye&&(r=this.x0+this.R*n,s=this.y0);var o=Wo(2*Math.abs(t/Math.PI));(Math.abs(n)<=ye||Math.abs(Math.abs(t)-le)<=ye)&&(r=this.x0,t>=0?s=this.y0+Math.PI*this.R*Math.tan(.5*o):s=this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/n-n/Math.PI),l=a*a,c=Math.sin(o),u=Math.cos(o),h=u/(c+u-1),d=h*h,f=h*(2/c-1),g=f*f,p=Math.PI*this.R*(a*(h-g)+Math.sqrt(l*(h-g)*(h-g)-(g+l)*(d-g)))/(g+l);n<0&&(p=-p),r=this.x0+p;var m=l+h;return p=Math.PI*this.R*(f*m-a*Math.sqrt((g+l)*(l+1)-m*m))/(g+l),t>=0?s=this.y0+p:s=this.y0-p,i.x=r,i.y=s,i}function Aj(i){var e,t,n,r,s,o,a,l,c,u,h,d,f;return i.x-=this.x0,i.y-=this.y0,h=Math.PI*this.R,n=i.x/h,r=i.y/h,s=n*n+r*r,o=-Math.abs(r)*(1+s),a=o-2*r*r+n*n,l=-2*o+1+2*r*r+s*s,f=r*r/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,c=(o-a*a/3/l)/l,u=2*Math.sqrt(-c/3),h=3*f/c/u,Math.abs(h)>1&&(h>=0?h=1:h=-1),d=Math.acos(h)/3,i.y>=0?t=(-u*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI:t=-(-u*Math.cos(d+Math.PI/3)-a/3/l)*Math.PI,Math.abs(n)<ye?e=this.long0:e=we(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-r*r)+s*s))/2/n),i.x=e,i.y=t,i}var _j=["Van_der_Grinten_I","VanDerGrinten","vandg"];const Cj={init:vj,forward:yj,inverse:Aj,names:_j};function Ij(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function Ej(i){var e=i.x,t=i.y,n=Math.sin(i.y),r=Math.cos(i.y),s=we(e-this.long0),o,a,l,c,u,h,d,f,g,p,m,v,y,A,_,C,I,b,S,R,P,w,x;return this.sphere?Math.abs(this.sin_p12-1)<=ye?(i.x=this.x0+this.a*(le-t)*Math.sin(s),i.y=this.y0-this.a*(le-t)*Math.cos(s),i):Math.abs(this.sin_p12+1)<=ye?(i.x=this.x0+this.a*(le+t)*Math.sin(s),i.y=this.y0+this.a*(le+t)*Math.cos(s),i):(b=this.sin_p12*n+this.cos_p12*r*Math.cos(s),C=Math.acos(b),I=C?C/Math.sin(C):1,i.x=this.x0+this.a*I*r*Math.sin(s),i.y=this.y0+this.a*I*(this.cos_p12*n-this.sin_p12*r*Math.cos(s)),i):(o=Xh(this.es),a=Zh(this.es),l=Kh(this.es),c=Jh(this.es),Math.abs(this.sin_p12-1)<=ye?(u=this.a*Pn(o,a,l,c,le),h=this.a*Pn(o,a,l,c,t),i.x=this.x0+(u-h)*Math.sin(s),i.y=this.y0-(u-h)*Math.cos(s),i):Math.abs(this.sin_p12+1)<=ye?(u=this.a*Pn(o,a,l,c,le),h=this.a*Pn(o,a,l,c,t),i.x=this.x0+(u+h)*Math.sin(s),i.y=this.y0+(u+h)*Math.cos(s),i):(d=n/r,f=wc(this.a,this.e,this.sin_p12),g=wc(this.a,this.e,n),p=Math.atan((1-this.es)*d+this.es*f*this.sin_p12/(g*r)),m=Math.atan2(Math.sin(s),this.cos_p12*Math.tan(p)-this.sin_p12*Math.cos(s)),m===0?S=Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):Math.abs(Math.abs(m)-Math.PI)<=ye?S=-Math.asin(this.cos_p12*Math.sin(p)-this.sin_p12*Math.cos(p)):S=Math.asin(Math.sin(s)*Math.cos(p)/Math.sin(m)),v=this.e*this.sin_p12/Math.sqrt(1-this.es),y=this.e*this.cos_p12*Math.cos(m)/Math.sqrt(1-this.es),A=v*y,_=y*y,R=S*S,P=R*S,w=P*S,x=w*S,C=f*S*(1-R*_*(1-_)/6+P/8*A*(1-2*_)+w/120*(_*(4-7*_)-3*v*v*(1-7*_))-x/48*A),i.x=this.x0+C*Math.sin(m),i.y=this.y0+C*Math.cos(m),i))}function wj(i){i.x-=this.x0,i.y-=this.y0;var e,t,n,r,s,o,a,l,c,u,h,d,f,g,p,m,v,y,A,_,C,I,b,S;return this.sphere?(e=Math.sqrt(i.x*i.x+i.y*i.y),e>2*le*this.a?void 0:(t=e/this.a,n=Math.sin(t),r=Math.cos(t),s=this.long0,Math.abs(e)<=ye?o=this.lat0:(o=Wo(r*this.sin_p12+i.y*n*this.cos_p12/e),a=Math.abs(this.lat0)-le,Math.abs(a)<=ye?this.lat0>=0?s=we(this.long0+Math.atan2(i.x,-i.y)):s=we(this.long0-Math.atan2(-i.x,i.y)):s=we(this.long0+Math.atan2(i.x*n,e*this.cos_p12*r-i.y*this.sin_p12*n))),i.x=s,i.y=o,i)):(l=Xh(this.es),c=Zh(this.es),u=Kh(this.es),h=Jh(this.es),Math.abs(this.sin_p12-1)<=ye?(d=this.a*Pn(l,c,u,h,le),e=Math.sqrt(i.x*i.x+i.y*i.y),f=d-e,o=Sg(f/this.a,l,c,u,h),s=we(this.long0+Math.atan2(i.x,-1*i.y)),i.x=s,i.y=o,i):Math.abs(this.sin_p12+1)<=ye?(d=this.a*Pn(l,c,u,h,le),e=Math.sqrt(i.x*i.x+i.y*i.y),f=e-d,o=Sg(f/this.a,l,c,u,h),s=we(this.long0+Math.atan2(i.x,i.y)),i.x=s,i.y=o,i):(e=Math.sqrt(i.x*i.x+i.y*i.y),m=Math.atan2(i.x,i.y),g=wc(this.a,this.e,this.sin_p12),v=Math.cos(m),y=this.e*this.cos_p12*v,A=-y*y/(1-this.es),_=3*this.es*(1-A)*this.sin_p12*this.cos_p12*v/(1-this.es),C=e/g,I=C-A*(1+A)*Math.pow(C,3)/6-_*(1+3*A)*Math.pow(C,4)/24,b=1-A*I*I/2-C*I*I*I/6,p=Math.asin(this.sin_p12*Math.cos(I)+this.cos_p12*Math.sin(I)*v),s=we(this.long0+Math.asin(Math.sin(m)*Math.sin(I)/Math.cos(p))),S=Math.sin(p),o=Math.atan2((S-this.es*b*this.sin_p12)*Math.tan(p),S*(1-this.es)),i.x=s,i.y=o,i))}var bj=["Azimuthal_Equidistant","aeqd"];const Sj={init:Ij,forward:Ej,inverse:wj,names:bj};function xj(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function Pj(i){var e,t,n,r,s,o,a,l,c=i.x,u=i.y;return n=we(c-this.long0),e=Math.sin(u),t=Math.cos(u),r=Math.cos(n),o=this.sin_p14*e+this.cos_p14*t*r,s=1,(o>0||Math.abs(o)<=ye)&&(a=this.a*s*t*Math.sin(n),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*t*r)),i.x=a,i.y=l,i}function Mj(i){var e,t,n,r,s,o,a;return i.x-=this.x0,i.y-=this.y0,e=Math.sqrt(i.x*i.x+i.y*i.y),t=Wo(e/this.a),n=Math.sin(t),r=Math.cos(t),o=this.long0,Math.abs(e)<=ye?(a=this.lat0,i.x=o,i.y=a,i):(a=Wo(r*this.sin_p14+i.y*n*this.cos_p14/e),s=Math.abs(this.lat0)-le,Math.abs(s)<=ye?(this.lat0>=0?o=we(this.long0+Math.atan2(i.x,-i.y)):o=we(this.long0-Math.atan2(-i.x,i.y)),i.x=o,i.y=a,i):(o=we(this.long0+Math.atan2(i.x*n,e*this.cos_p14*r-i.y*this.sin_p14*n)),i.x=o,i.y=a,i))}var Rj=["ortho"];const Tj={init:xj,forward:Pj,inverse:Mj,names:Rj};var ri={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Gt={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Lj(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=le-Lt/2?this.face=ri.TOP:this.lat0<=-(le-Lt/2)?this.face=ri.BOTTOM:Math.abs(this.long0)<=Lt?this.face=ri.FRONT:Math.abs(this.long0)<=le+Lt?this.face=this.long0>0?ri.RIGHT:ri.LEFT:this.face=ri.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function Gj(i){var e={x:0,y:0},t,n,r,s,o,a,l={value:0};if(i.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(i.y)):t=i.y,n=i.x,this.face===ri.TOP)s=le-t,n>=Lt&&n<=le+Lt?(l.value=Gt.AREA_0,r=n-le):n>le+Lt||n<=-(le+Lt)?(l.value=Gt.AREA_1,r=n>0?n-fi:n+fi):n>-(le+Lt)&&n<=-Lt?(l.value=Gt.AREA_2,r=n+le):(l.value=Gt.AREA_3,r=n);else if(this.face===ri.BOTTOM)s=le+t,n>=Lt&&n<=le+Lt?(l.value=Gt.AREA_0,r=-n+le):n<Lt&&n>=-Lt?(l.value=Gt.AREA_1,r=-n):n<-Lt&&n>=-(le+Lt)?(l.value=Gt.AREA_2,r=-n-le):(l.value=Gt.AREA_3,r=n>0?-n+fi:-n-fi);else{var c,u,h,d,f,g,p;this.face===ri.RIGHT?n=ic(n,+le):this.face===ri.BACK?n=ic(n,+fi):this.face===ri.LEFT&&(n=ic(n,-le)),d=Math.sin(t),f=Math.cos(t),g=Math.sin(n),p=Math.cos(n),c=f*p,u=f*g,h=d,this.face===ri.FRONT?(s=Math.acos(c),r=Bd(s,h,u,l)):this.face===ri.RIGHT?(s=Math.acos(u),r=Bd(s,h,-c,l)):this.face===ri.BACK?(s=Math.acos(-c),r=Bd(s,h,-u,l)):this.face===ri.LEFT?(s=Math.acos(-u),r=Bd(s,h,c,l)):(s=r=0,l.value=Gt.AREA_0)}return a=Math.atan(12/fi*(r+Math.acos(Math.sin(r)*Math.cos(Lt))-le)),o=Math.sqrt((1-Math.cos(s))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===Gt.AREA_1?a+=le:l.value===Gt.AREA_2?a+=fi:l.value===Gt.AREA_3&&(a+=1.5*fi),e.x=o*Math.cos(a),e.y=o*Math.sin(a),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,i.x=e.x,i.y=e.y,i}function Oj(i){var e={lam:0,phi:0},t,n,r,s,o,a,l,c,u,h={value:0};if(i.x=(i.x-this.x0)/this.a,i.y=(i.y-this.y0)/this.a,n=Math.atan(Math.sqrt(i.x*i.x+i.y*i.y)),t=Math.atan2(i.y,i.x),i.x>=0&&i.x>=Math.abs(i.y)?h.value=Gt.AREA_0:i.y>=0&&i.y>=Math.abs(i.x)?(h.value=Gt.AREA_1,t-=le):i.x<0&&-i.x>=Math.abs(i.y)?(h.value=Gt.AREA_2,t=t<0?t+fi:t-fi):(h.value=Gt.AREA_3,t+=le),u=fi/12*Math.tan(t),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),r=Math.cos(t),s=Math.tan(n),l=1-r*r*s*s*(1-Math.cos(Math.atan(1/Math.cos(a)))),l<-1?l=-1:l>1&&(l=1),this.face===ri.TOP)c=Math.acos(l),e.phi=le-c,h.value===Gt.AREA_0?e.lam=a+le:h.value===Gt.AREA_1?e.lam=a<0?a+fi:a-fi:h.value===Gt.AREA_2?e.lam=a-le:e.lam=a;else if(this.face===ri.BOTTOM)c=Math.acos(l),e.phi=c-le,h.value===Gt.AREA_0?e.lam=-a+le:h.value===Gt.AREA_1?e.lam=-a:h.value===Gt.AREA_2?e.lam=-a-le:e.lam=a<0?-a-fi:-a+fi;else{var d,f,g;d=l,u=d*d,u>=1?g=0:g=Math.sqrt(1-u)*Math.sin(a),u+=g*g,u>=1?f=0:f=Math.sqrt(1-u),h.value===Gt.AREA_1?(u=f,f=-g,g=u):h.value===Gt.AREA_2?(f=-f,g=-g):h.value===Gt.AREA_3&&(u=f,f=g,g=-u),this.face===ri.RIGHT?(u=d,d=-f,f=u):this.face===ri.BACK?(d=-d,f=-f):this.face===ri.LEFT&&(u=d,d=f,f=-u),e.phi=Math.acos(-g)-le,e.lam=Math.atan2(f,d),this.face===ri.RIGHT?e.lam=ic(e.lam,-le):this.face===ri.BACK?e.lam=ic(e.lam,-fi):this.face===ri.LEFT&&(e.lam=ic(e.lam,+le))}if(this.es!==0){var p,m,v;p=e.phi<0?1:0,m=Math.tan(e.phi),v=this.b/Math.sqrt(m*m+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-v*v)/(this.one_minus_f*v)),p&&(e.phi=-e.phi)}return e.lam+=this.long0,i.x=e.lam,i.y=e.phi,i}function Bd(i,e,t,n){var r;return i<ye?(n.value=Gt.AREA_0,r=0):(r=Math.atan2(e,t),Math.abs(r)<=Lt?n.value=Gt.AREA_0:r>Lt&&r<=le+Lt?(n.value=Gt.AREA_1,r-=le):r>le+Lt||r<=-(le+Lt)?(n.value=Gt.AREA_2,r=r>=0?r-fi:r+fi):(n.value=Gt.AREA_3,r+=le)),r}function ic(i,e){var t=i+e;return t<-fi?t+=bh:t>+fi&&(t-=bh),t}var Dj=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const kj={init:Lj,forward:Gj,inverse:Oj,names:Dj};var Qm=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],vu=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],gx=.8487,px=1.3523,mx=ns/5,Fj=1/mx,Fl=18,xg=function(i,e){return i[0]+e*(i[1]+e*(i[2]+e*i[3]))},Nj=function(i,e){return i[1]+e*(2*i[2]+e*3*i[3])};function Uj(i,e,t,n){for(var r=e;n;--n){var s=i(r);if(r-=s,Math.abs(s)<t)break}return r}function Bj(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function jj(i){var e=we(i.x-this.long0),t=Math.abs(i.y),n=Math.floor(t*mx);n<0?n=0:n>=Fl&&(n=Fl-1),t=ns*(t-Fj*n);var r={x:xg(Qm[n],t)*e,y:xg(vu[n],t)};return i.y<0&&(r.y=-r.y),r.x=r.x*this.a*gx+this.x0,r.y=r.y*this.a*px+this.y0,r}function zj(i){var e={x:(i.x-this.x0)/(this.a*gx),y:Math.abs(i.y-this.y0)/(this.a*px)};if(e.y>=1)e.x/=Qm[Fl][0],e.y=i.y<0?-le:le;else{var t=Math.floor(e.y*Fl);for(t<0?t=0:t>=Fl&&(t=Fl-1);;)if(vu[t][0]>e.y)--t;else if(vu[t+1][0]<=e.y)++t;else break;var n=vu[t],r=5*(e.y-n[0])/(vu[t+1][0]-n[0]);r=Uj(function(s){return(xg(n,s)-e.y)/Nj(n,s)},r,ye,100),e.x/=xg(Qm[t],r),e.y=(5*t+r)*Hi,i.y<0&&(e.y=-e.y)}return e.x=we(e.x+this.long0),e}var Vj=["Robinson","robin"];const Wj={init:Bj,forward:jj,inverse:zj,names:Vj};function Yj(){this.name="geocent"}function Hj(i){var e=tx(i,this.es,this.a);return e}function qj(i){var e=ix(i,this.es,this.a,this.b);return e}var Xj=["Geocentric","geocentric","geocent","Geocent"];const Zj={init:Yj,forward:Hj,inverse:qj,names:Xj};var an={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},nu={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function Kj(){if(Object.keys(nu).forEach((function(t){if(typeof this[t]>"u")this[t]=nu[t].def;else{if(nu[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);nu[t].num&&(this[t]=parseFloat(this[t]))}nu[t].degrees&&(this[t]=this[t]*Hi)}).bind(this)),Math.abs(Math.abs(this.lat0)-le)<ye?this.mode=this.lat0<0?an.S_POLE:an.N_POLE:Math.abs(this.lat0)<ye?this.mode=an.EQUIT:(this.mode=an.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var i=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(i),this.sw=Math.sin(i)}function Jj(i){i.x-=this.long0;var e=Math.sin(i.y),t=Math.cos(i.y),n=Math.cos(i.x),r,s;switch(this.mode){case an.OBLIQ:s=this.sinph0*e+this.cosph0*t*n;break;case an.EQUIT:s=t*n;break;case an.S_POLE:s=-e;break;case an.N_POLE:s=e;break}switch(s=this.pn1/(this.p-s),r=s*t*Math.sin(i.x),this.mode){case an.OBLIQ:s*=this.cosph0*e-this.sinph0*t*n;break;case an.EQUIT:s*=e;break;case an.N_POLE:s*=-(t*n);break;case an.S_POLE:s*=t*n;break}var o,a;return o=s*this.cg+r*this.sg,a=1/(o*this.sw*this.h1+this.cw),r=(r*this.cg-s*this.sg)*this.cw*a,s=o*a,i.x=r*this.a,i.y=s*this.a,i}function Qj(i){i.x/=this.a,i.y/=this.a;var e={x:i.x,y:i.y},t,n,r;r=1/(this.pn1-i.y*this.sw),t=this.pn1*i.x*r,n=this.pn1*i.y*this.cw*r,i.x=t*this.cg+n*this.sg,i.y=n*this.cg-t*this.sg;var s=_r(i.x,i.y);if(Math.abs(s)<ye)e.x=0,e.y=i.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case an.OBLIQ:e.y=Math.asin(o*this.sinph0+i.y*a*this.cosph0/s),i.y=(o-this.sinph0*Math.sin(e.y))*s,i.x*=a*this.cosph0;break;case an.EQUIT:e.y=Math.asin(i.y*a/s),i.y=o*s,i.x*=a;break;case an.N_POLE:e.y=Math.asin(o),i.y=-i.y;break;case an.S_POLE:e.y=-Math.asin(o);break}e.x=Math.atan2(i.x,i.y)}return i.x=e.x+this.long0,i.y=e.y,i}var $j=["Tilted_Perspective","tpers"];const ez={init:Kj,forward:Jj,inverse:Qj,names:$j};function tz(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var i=1-this.es,e=1/i;this.radius_p=Math.sqrt(i),this.radius_p2=i,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function iz(i){var e=i.x,t=i.y,n,r,s,o;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var a=this.radius_p/_r(this.radius_p*Math.cos(t),Math.sin(t));if(r=a*Math.cos(e)*Math.cos(t),s=a*Math.sin(e)*Math.cos(t),o=a*Math.sin(t),(this.radius_g-r)*r-s*s-o*o*this.radius_p_inv2<0)return i.x=Number.NaN,i.y=Number.NaN,i;n=this.radius_g-r,this.flip_axis?(i.x=this.radius_g_1*Math.atan(s/_r(o,n)),i.y=this.radius_g_1*Math.atan(o/n)):(i.x=this.radius_g_1*Math.atan(s/n),i.y=this.radius_g_1*Math.atan(o/_r(s,n)))}else this.shape==="sphere"&&(n=Math.cos(t),r=Math.cos(e)*n,s=Math.sin(e)*n,o=Math.sin(t),n=this.radius_g-r,this.flip_axis?(i.x=this.radius_g_1*Math.atan(s/_r(o,n)),i.y=this.radius_g_1*Math.atan(o/n)):(i.x=this.radius_g_1*Math.atan(s/n),i.y=this.radius_g_1*Math.atan(o/_r(s,n))));return i.x=i.x*this.a,i.y=i.y*this.a,i}function nz(i){var e=-1,t=0,n=0,r,s,o,a;if(i.x=i.x/this.a,i.y=i.y/this.a,this.shape==="ellipse"){this.flip_axis?(n=Math.tan(i.y/this.radius_g_1),t=Math.tan(i.x/this.radius_g_1)*_r(1,n)):(t=Math.tan(i.x/this.radius_g_1),n=Math.tan(i.y/this.radius_g_1)*_r(1,t));var l=n/this.radius_p;if(r=t*t+l*l+e*e,s=2*this.radius_g*e,o=s*s-4*r*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-s-Math.sqrt(o))/(2*r),e=this.radius_g+a*e,t*=a,n*=a,i.x=Math.atan2(t,e),i.y=Math.atan(n*Math.cos(i.x)/e),i.y=Math.atan(this.radius_p_inv2*Math.tan(i.y))}else if(this.shape==="sphere"){if(this.flip_axis?(n=Math.tan(i.y/this.radius_g_1),t=Math.tan(i.x/this.radius_g_1)*Math.sqrt(1+n*n)):(t=Math.tan(i.x/this.radius_g_1),n=Math.tan(i.y/this.radius_g_1)*Math.sqrt(1+t*t)),r=t*t+n*n+e*e,s=2*this.radius_g*e,o=s*s-4*r*this.C,o<0)return i.x=Number.NaN,i.y=Number.NaN,i;a=(-s-Math.sqrt(o))/(2*r),e=this.radius_g+a*e,t*=a,n*=a,i.x=Math.atan2(t,e),i.y=Math.atan(n*Math.cos(i.x)/e)}return i.x=i.x+this.long0,i}var rz=["Geostationary Satellite View","Geostationary_Satellite","geos"];const sz={init:tz,forward:iz,inverse:nz,names:rz};function oz(i){i.Proj.projections.add(af),i.Proj.projections.add(lf),i.Proj.projections.add(d9),i.Proj.projections.add(I9),i.Proj.projections.add(P9),i.Proj.projections.add(G9),i.Proj.projections.add(U9),i.Proj.projections.add(W9),i.Proj.projections.add(Z9),i.Proj.projections.add(e7),i.Proj.projections.add(v7),i.Proj.projections.add(E7),i.Proj.projections.add(P7),i.Proj.projections.add(O7),i.Proj.projections.add(U7),i.Proj.projections.add(W7),i.Proj.projections.add(Z7),i.Proj.projections.add(ej),i.Proj.projections.add(oj),i.Proj.projections.add(hj),i.Proj.projections.add(mj),i.Proj.projections.add(Cj),i.Proj.projections.add(Sj),i.Proj.projections.add(Tj),i.Proj.projections.add(kj),i.Proj.projections.add(Wj),i.Proj.projections.add(Zj),i.Proj.projections.add(ez),i.Proj.projections.add(sz)}hi.defaultDatum="WGS84";hi.Proj=ls;hi.WGS84=new hi.Proj("WGS84");hi.Point=Ec;hi.toPoint=nx;hi.defs=bn;hi.nadgrid=gB;hi.transform=bg;hi.mgrs=RB;hi.version="__VERSION__";oz(hi);var az=ot.getLogger("CRS");function pa(i){const e=Object.keys(i.defs);az.trace("proj. codes :",e);const t=e.length;let n,r;for(n=0;n<t;++n){const s=e[n];if(!Re(s)){const o=i.defs(s);Fv(new Xg({code:s,axisOrientation:o.axis,metersPerUnit:o.to_meter,units:o.units}))}}for(n=0;n<t;++n){const s=e[n],o=Re(s);for(r=0;r<t;++r){const a=e[r],l=Re(a);if(!T1(s,a))if(i.defs[s]===i.defs[a])lm([o,l]);else{const c=i(s,a);GG(o,l,c.forward,c.inverse)}}}}var Ai={isLoaded:!1,get:function(i){if(!(i===""||i===null||typeof i>"u")){var e=i.split(":");if(e.length===2){var t=e[0],n=e[1];if(this.hasOwnProperty(t)&&this[t].hasOwnProperty(n))return this[t][n]}}},exist:function(i){if(i===""||i===null||typeof i>"u")return!1;var e=i.split(":");if(e.length!==2)return!1;var t=e[0],n=e[1];return!(!this.hasOwnProperty(t)||!this[t].hasOwnProperty(n))},load:function(i){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],t=0;t<e.length;t++){var n=e[t],r=this[n];for(var s in r)if(r.hasOwnProperty(s)){var o=n+":"+s;i.defs(o,this.get(o))}}this.isLoaded=!0}},loadByDefault:function(i){var e={EPSG:{2154:Ai.EPSG[2154],27571:Ai.EPSG[27571],27572:Ai.EPSG[27572],27573:Ai.EPSG[27573],27574:Ai.EPSG[27574]},CRS:{84:Ai.CRS[84]},IGNF:{LAMB93:Ai.IGNF.LAMB93,LAMBE:Ai.IGNF.LAMBE,LAMB1:Ai.IGNF.LAMB1,LAMB2:Ai.IGNF.LAMB2,LAMB3:Ai.IGNF.LAMB3,LAMB4:Ai.IGNF.LAMB4,RGF93G:Ai.IGNF.RGF93G,WGS84G:Ai.IGNF.WGS84G}};for(var t in e)if(e.hasOwnProperty(t)){var n=e[t];for(var r in n)if(n.hasOwnProperty(r)){var s=t+":"+r;i.defs(s,n[r])}}},loadByName:function(i,e){if(!this.exist(e))return!1;try{i.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},ca=ot.getLogger("CRS"),lz={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(ca.trace("Loading custom definitions projections"),!Ai.isLoaded){Ai.load(hi);try{pa(hi),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=pa,window.ol.proj.proj4.register(hi))}catch(i){ca.error(i)}}},loadByDefault:function(){if(ca.trace("Loading custom definitions projections by default"),!Ai.isLoaded){Ai.loadByDefault(hi);try{pa(hi),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=pa,window.ol.proj.proj4.register(hi))}catch(i){ca.error(i)}}},loadByName:function(i){if(ca.trace("Loading a custom definition projection : ",i),!Ai.isLoaded){Ai.loadByName(hi,i);try{pa(hi),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=pa,window.ol.proj.proj4.register(hi))}catch(e){ca.error(e)}}},overload:function(){ca.trace("Loading projections aera (extent)");for(var i in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(i)){var e=this.projectionsExtent[i],t=Re(i),n=Da("EPSG:4326",t),r=Lv([e.bottom,e.right,e.top,e.left],n);t.setExtent(r),Fv(t),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(t)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=pa);var cz={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPmousePosition"),i.className="GPwidget gpf-widget",i},_createShowMousePositionPictoElement:function(i){var e=this,t=document.createElement("button");return t.id=this._addUID("GPshowMousePositionPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn fr-btn",t.title="Afficher les coordonnes du curseur",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.addEventListener?t.addEventListener("click",function(n){var r=n.target.ariaPressed==="true";n.target.setAttribute("aria-pressed",!r),e.onShowMousePositionClick()}):t.attachEvent&&t.attachEvent("onclick",function(n){var r=n.target.ariaPressed==="true";n.target.setAttribute("aria-pressed",!r),e.onShowMousePositionClick()}),t},_createMousePositionPanelElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPmousePositionPanel"),i.className="GPpanel gpf-panel fr-modal",i},_createMousePositionPanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createMapCenter:function(){var i=document.createElement("div");return i.id="GPmapCenter",i.className="",i},_createMousePositionPanelTitleElement:function(){var i=document.createElement("div");return i.className="GPpanelTitle gpf-panel__title fr-modal__title",i.id=this._addUID("GPmousePositionHeaderTitle"),i.innerHTML="Coordonnes",i},_createMousePositionPanelHeaderElement:function(){var i=document.createElement("div");return i.className="GPpanelHeader gpf-panel__header fr-modal__header",i},_createMousePositionPanelCloseElement:function(){var i=this,e=document.createElement("button");e.id=this._addUID("GPmousePositionPanelClose"),e.className="GPpanelClose gpf-btn gpf-btn-close fr-btn--close fr-btn fr-btn--secondary",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(i._addUID("GPshowMousePositionPicto")).click()},!1),e.addEventListener("keydown",function(n){n.keyCode===13&&document.getElementById(i._addUID("GPshowMousePositionPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowMousePositionPicto")).click()}),e.attachEvent("onkeydown",function(n){n.keyCode===13&&document.getElementById(i._addUID("GPshowMousePositionPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createMousePositionPanelBasicElement:function(i,e,t,n){i=typeof i>"u"?!0:i,e=typeof e>"u"?!0:e,t=typeof t>"u"?!1:t;var r=document.createElement("div");return r.id=this._addUID("GPmousePositionBasicPanel"),r.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,t,n)),r.appendChild(this._createMousePositionPanelEditToolsElement(t)),r.appendChild(this._createMousePositionPanelBasicAltitudeElement(i)),r},_createCoordinateElement:function(i,e){var t=this;if(["Lon","Lat"].indexOf(i)===-1)return[];var n=[],r=document.createElement("input");r.id=this._addUID("GPmousePosition"+i),r.title=e===!0?"Cliquer pour saisir des coordonnes":"",r.readOnly=!0,e&&(r.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),r.addEventListener("change",function(o){this.classList.remove("error");var a=t.validateExtentCoordinate(i,this.value,o);a?this.classList.remove("error"):this.classList.add("error")})),n.push(r);var s=document.createElement("span");return s.className="GPmousePositionUnits",n.push(s),n},_createDMSCoordinateElement:function(i,e){if(["Lon","Lat"].indexOf(i)===-1)return[];var t=this,n=[],r=document.createElement("input");r.id=this._addUID("GPmousePosition"+i+"Degrees"),r.className="GPSexagesimal",r.setAttribute("name","degrees"),r.title=e===!0?"Cliquer pour saisir des coordonnes":"",r.readOnly=!0,r.dataset.min=0,r.dataset.max=i==="Lon"?180:90,e&&(r.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),r.addEventListener("change",function(){this.classList.remove("error");var f=t._checkDMSDegrees(i,this);f?this.classList.remove("error"):this.classList.add("error")})),n.push(r);var s=document.createElement("span");s.className="GPmousePositionSexagesimalLabel",s.innerHTML="",n.push(s);var o=document.createElement("input");o.id=this._addUID("GPmousePosition"+i+"Minutes"),o.className="GPSexagesimal",o.setAttribute("name","minutes"),o.title=e===!0?"Cliquer pour saisir des coordonnes":"",o.readOnly=!0,o.dataset.min=0,o.dataset.max=59,e&&(o.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),o.addEventListener("change",function(){this.classList.remove("error");var f=t._checkDMSElement(this);f?this.classList.remove("error"):this.classList.add("error")})),n.push(o);var a=document.createElement("span");a.className="GPmousePositionSexagesimalLabel",a.innerHTML="'",n.push(a);var l=document.createElement("input");l.id=this._addUID("GPmousePosition"+i+"Seconds"),l.className="GPSexagesimalsec",l.setAttribute("name","seconds"),l.title=e===!0?"Cliquer pour saisir des coordonnes":"",l.readOnly=!0,l.dataset.min=0,l.dataset.max=59,e&&(l.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),l.addEventListener("change",function(){this.classList.remove("error");var f=t._checkDMSElement(this,!0);f?this.classList.remove("error"):this.classList.add("error")})),n.push(l);var c=document.createElement("span");c.className="GPmousePositionSexagesimalLabel",c.innerHTML="''",n.push(c);var u=document.createElement("select");u.id=this._addUID("GPmousePosition"+i+"Direction"),u.className="GPmousePositionDirection",u.setAttribute("name","direction"),u.disabled=!0;var h=document.createElement("option");h.value=i==="Lon"?"E":"N",h.innerHTML=i==="Lon"?"E":"N",u.appendChild(h);var d=document.createElement("option");return d.value=i==="Lon"?"O":"S",d.innerHTML=i==="Lon"?"O":"S",u.appendChild(d),n.push(u),n},_createMousePositionPanelBasicCoordinateElement:function(i,e,t){var n=document.createElement("div");n.id=this._addUID("GPmousePositionCoordinate"),n.style.display=i?"block":"none";var r=document.createElement("div"),s=document.createElement("span");s.className="GPmousePositionLabel",s.id=this._addUID("GPmousePositionLatLabel"),s.innerHTML="Latitude : ",r.appendChild(s);var o=document.createElement("span");o.id=this._addUID("GPmousePositionLatCoordinate");var a;t==="DMS"?a=this._createDMSCoordinateElement("Lat",e):a=this._createCoordinateElement("Lat",e);for(var l=0;l<a.length;l++)o.appendChild(a[l]);r.appendChild(o),n.appendChild(r);var c=document.createElement("div"),u=document.createElement("span");u.className="GPmousePositionLabel",u.id=this._addUID("GPmousePositionLonLabel"),u.innerHTML="Longitude : ",c.appendChild(u);var h=document.createElement("span");h.id=this._addUID("GPmousePositionLonCoordinate");var d;t==="DMS"?d=this._createDMSCoordinateElement("Lon",e):d=this._createCoordinateElement("Lon",e);for(var f=0;f<d.length;f++)h.appendChild(d[f]);return c.appendChild(h),n.appendChild(c),n},_createMousePositionPanelBasicAltitudeElement:function(i){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.style.display=i?"block":"none";var t=document.createElement("span");t.className="GPmousePositionLabel",t.innerHTML="Altitude : ",e.appendChild(t);var n=document.createElement("span");n.className="GPmousePositionCoords",n.id=this._addUID("GPmousePositionAlt"),n.innerHTML="...",e.appendChild(n);var r=document.createElement("span");return r.className="GPmousePositionAltitudeUnits",r.innerHTML="m",e.appendChild(r),e},_createMousePositionPanelEditToolsElement:function(i){var e=this,t=document.createElement("div");t.className="GPmousePositionPanelEditTools",t.id=this._addUID("GPmousePositionPanelEditTools"),i||(t.style.display="none");var n=document.createElement("span");n.className="GPmousePositionEditTool",n.id=this._addUID("GPmousePositionLocate"),n.title=i===!0?"Cliquer pour saisir des coordonnes":"",i&&n.addEventListener("click",function(){e.onMousePositionEditModeLocateClick()}),t.appendChild(n);var r=document.createElement("span");return r.className="GPmousePositionEditTool",r.id=this._addUID("GPmousePositionCloseEdit"),r.title="Quitter la saisie des coordonnes",r.style.display="none",i&&r.addEventListener("click",function(){e.onMousePositionEditModeClick(!1)}),t.appendChild(r),t},_createShowMousePositionSettingsElement:function(i){var e=this,t=document.createElement("button");return t.id=this._addUID("GPshowMousePositionSettings"),t.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto gpf-btn fr-btn--sm fr-btn--secondary fr-icon-arrow-down-fill",t.title="Rglages",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.addEventListener?t.addEventListener("click",function(n){var r=n.target.ariaPressed==="true";n.target.setAttribute("aria-pressed",!r),e.onShowMousePositionSettingsClick(n)}):t.attachEvent&&t.attachEvent("onclick",function(n){var r=n.target.ariaPressed==="true";n.target.setAttribute("aria-pressed",!r),e.onShowMousePositionSettingsClick(n)}),t},_createMousePositionSettingsElement:function(i){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=i===void 0||i?"block":"none";var t=document.createElement("span");return t.className="GPmousePositionSettingsLabel",t.innerHTML="Systme de rfrence",e.appendChild(t),e},_createMousePositionSettingsSystemsElement:function(i){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionSystem"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select",t.addEventListener("change",function(o){e.onMousePositionProjectionSystemChange(o)}),t.addEventListener("mouseover",function(o){o.target.nodeName!=="OPTION"&&e.onMousePositionProjectionSystemMouseOver(o)});for(var n=0;n<i.length;n++){var r=i[n],s=document.createElement("option");s.value=r.code,s.text=r.label||n,t.appendChild(s)}return t},_createMousePositionSettingsUnitsElement:function(i){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionUnits"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select",t.addEventListener("change",function(o){e.onMousePositionProjectionUnitsChange(o)});for(var n=0;n<i.length;n++){var r=i[n],s=document.createElement("option");s.value=r.code?r.code:n,s.text=r.label||n,t.appendChild(s)}return t},_resetLabelElements:function(i){var e=document.getElementById(this._addUID("GPmousePositionLatLabel"));e.innerHTML=i==="Geographical"?"Latitude :":"X :";var t=document.getElementById(this._addUID("GPmousePositionLonLabel"));t.innerHTML=i==="Geographical"?"Longitude :":"Y :"},_resetUnitElements:function(i){var e="";(i==="M"||i==="KM")&&(e=i.toLowerCase());for(var t=document.getElementsByClassName("GPmousePositionUnits"),n=0;n<t.length;n++)t[n].innerHTML=e},_resetCoordinateElements:function(i,e,t){for(var n=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));n.firstChild;)n.removeChild(n.firstChild);var r;t==="DMS"?r=this._createDMSCoordinateElement("Lat",i):r=this._createCoordinateElement("Lat",i);for(var s=0;s<r.length;s++)n.appendChild(r[s]);for(var o=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));o.firstChild;)o.removeChild(o.firstChild);var a;t==="DMS"?a=this._createDMSCoordinateElement("Lon",i):a=this._createCoordinateElement("Lon",i);for(var l=0;l<a.length;l++)o.appendChild(a[l])},_setEditMode:function(i){var e=document.getElementById(this._addUID("GPmousePositionLocate"));e.title=i?"Aller  la position ...":"Cliquer pour saisir des coordonnes";var t=document.getElementById(this._addUID("GPmousePositionCloseEdit"));t.style.display=i?"inline-block":"none";for(var n="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",r=document.querySelectorAll(n+" input"),s=0;s<r.length;s++)r[s].readOnly=!i,i&&(r[s].value="",r[s].classList.remove("error"));for(var o=document.querySelectorAll(n+" select"),a=0;a<o.length;a++)o[a].disabled=!i},_checkDMSElement:function(i,e){var t=e!==void 0,n=i.value;if(t&&(n=n.replace(",",".")),isNaN(n))return!1;var r=parseFloat(n);if(!t&&(r|0)!==r)return!1;var s=Number(i.dataset.min),o=Number(i.dataset.max);return r>=s&&r<=o},_checkDMSDegrees:function(i,e){if(isNaN(e.value))return!1;var t=parseFloat(e.value);if((t|0)!==t)return!1;var n=Number(e.dataset.min),r=Number(e.dataset.max);if(t<n||t>r)return!1;var s=document.getElementById(this._addUID("GPmousePosition"+i+"Minutes")),o=document.getElementById(this._addUID("GPmousePosition"+i+"Seconds"));return t>=r?(s.dataset.max=0,o.dataset.max=0):(s.dataset.max=59,o.dataset.max=59.9999),!0},GPdisplayCoords:function(i){if(i){var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),t=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(i.x||i.y?(t.innerHTML="X : ",e.innerHTML="Y : "):i.e||i.n?(t.innerHTML="E : ",e.innerHTML="N : "):(t.innerHTML="Latitude : ",e.innerHTML="Longitude : "),typeof i.lat=="object"&&typeof i.lng=="object"){var n={lng:"Lon",lat:"Lat"},r=["Degrees","Minutes","Seconds"];for(var s in n)for(var o=0;o<r.length;++o){var a="GPmousePosition"+n[s]+r[o],l=document.getElementById(this._addUID(a)),c=r[o].charAt(0).toLowerCase();l.value=i[s][c]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=i.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=i.lat.direction}else{var u=document.getElementById(this._addUID("GPmousePositionLat")),h=document.getElementById(this._addUID("GPmousePositionLon"));u.value=i.x||i.lat||i.e||"0",h.value=i.y||i.lng||i.lon||i.n||"0";for(var d=i.unit===void 0?"":i.unit,f=document.getElementsByClassName("GPmousePositionUnits"),g=0;g<f.length;++g)f[g].innerHTML=d}}},GPdisplayElevation:function(i,e,t,n){var r=this,s;e||(e=500),clearTimeout(s),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",t==null&&(t=-99999),n==null&&(n=99980);var o=t+n,a=t-n;i&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(s=setTimeout(function(){r.onRequestAltitude(i,function(l){a<l&&l<o?r.GPresetElevation():document.getElementById(r._addUID("GPmousePositionAlt")).innerHTML=l})},e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}},Mi=ot.getLogger("GeoportalMousePosition"),vx=class yx extends Xn{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof yx))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(e);var t=this._initContainer(this.options);return this.element?this.element.appendChild(t):this.element=t,this}setMap(e){var t=this;if(e){var n=this._createMapCenter();if(e.getViewport().appendChild(n),!this.collapsed&&!this._isDesktop&&(n.className="GPmapCenterVisible"),this.draggable&&Ro.dragElement(this._panelMousePositionContainer,this._panelHeaderMousePositionContainer,this.options.position?null:e.getTargetElement()),this.collapsed||(this._isDesktop?this.listenerKey=e.on("pointermove",o=>{this.onMouseMove(o)}):this.listenerKey=e.on("moveend",o=>this.onMapMove(o)),this._showMousePositionButton.setAttribute("aria-pressed",!0)),this.options.editCoordinates){var r=document.createElement("img");r.id=this._addUID("GPmousePositionMarker"),r.src=this._markerUrl,r.title="Cliquer pour supprimer",r.addEventListener("click",function(){t._markerOverlay.setPosition(void 0)}),this._markerOverlay=new jn({offset:this._markerOffset,element:r,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}else gi(this.listenerKey);if(super.setMap(e),e!==null&&(this.options.position&&this.setPosition(this.options.position),!this.collapsed)){var s=document.getElementById("GPshowMousePosition-"+this._uid);s.checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}}addSystem(e){if(typeof e!="object"){Mi.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){Mi.error("crs not defined !");return}if(e.label||(Mi.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(Mi.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),lz.loadByName(e.crs),!Re(e.crs)){Mi.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._projectionSystems.length;t++){var n=this._projectionSystems[t];e.crs===n.crs&&Mi.info("crs '{}' already configured",n.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var r=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(r){var s=document.createElement("option");s.value=e.code,s.text=e.label,r.appendChild(s)}}addSystems(e){if(e){if(!Array.isArray(e)){Mi.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");return}for(var t=0;t<e.length;t++)this.addSystem(e[t])}}removeSystem(e){if(!e||typeof e!="string"){Mi.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");return}for(var t=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),n=null,r=0;r<this._projectionSystems.length;r++){var s=this._projectionSystems[r];if(e===s.crs){n=s.code,this._projectionSystems.splice(r,1);break}}if(n==null){Mi.log("[WARN] MousePosition:removeSystem - system not found");return}for(var o=[],a=0;a<this._projectionSystems.length;a++)o[Number(this._projectionSystems[a].code)]=a,this._projectionSystems[a].code=a;for(var l=null,c=0;c<t.childNodes.length;c++){if(n===t.childNodes[a].value){l=c;continue}t.childNodes[a].value=o[Number(t.childNodes[a].value)]}l!=null&&t.removeChild(t.childNodes[l]),this._currentProjectionSystems.code===Number(n)&&(t.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(t.childNodes[0].value))}setUnits(e){!e||!Array.isArray(e)||(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))}setAltitudeOptions(e){if(!(!e||typeof e!="object")&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var t in e.serviceOptions)e.serviceOptions.hasOwnProperty(t)&&(this.options.altitude.serviceOptions[t]=e.serviceOptions[t])}displayAltitude(e){e!==void 0&&(this.options.displayAltitude=e,this._setElevationPanel(e))}displayCoordinates(e){e!==void 0&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))}setCollapsed(e){if(e===void 0){Mi.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e)}_initialize(e){if(e=e||{},this.options=e,this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=e.displayAltitude!==void 0?e.displayAltitude:!0,this.options.displayCoordinates=e.displayCoordinates!==void 0?e.displayCoordinates:!0,this.options.displayCoordinates?this.options.editCoordinates=e.editCoordinates!==void 0?e.editCoordinates:!1:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var t=e.altitude;this.options.altitude={triggerDelay:t.triggerDelay!==void 0?t.triggerDelay:200,responseDelay:t.responseDelay!==void 0?t.responseDelay:500,serviceOptions:t.serviceOptions||{},noDataValue:t.noDataValue!==void 0?t.noDataValue:-99999,noDataValueTolerance:t.noDataValueTolerance!==void 0?t.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=Xe.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=He.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,!this.options.displayAltitude&&!this.options.displayCoordinates&&(this.options.displayCoordinates=!0),this.listenerKey=null}_initMarker(e){if(this.options.editCoordinates){if(!e){this._markerUrl=jt.lightOrange,this._markerOffset=jt.defaultOffset;return}this._hideMarker=e.hide!==void 0?e.hide:!1,e.offset?Array.isArray(e.offset)&&e.offset.length===2?this._markerOffset=e.offset:(Mi.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=jt.defaultOffset):this._markerOffset=jt.defaultOffset;var t=e.url;t?t.match(/^[a-zA-Z]+$/)?this._markerUrl=jt[t]!==void 0?jt[t]:jt.lightOrange:this._markerUrl=t:this._markerUrl=jt.lightOrange}}_initProjectionSystems(){for(var e=[{label:"Gographique",crs:Re("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:Re("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:Re("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II tendu",crs:Re("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],t=this.options.systems,n=0;n<t.length;n++){var r=t[n];this.addSystem(r)}if(this._projectionSystems.length===0)for(var s=0;s<e.length;s++)this.addSystem(e[s])}_initProjectionUnits(){var e={Geographical:[{code:"DEC",label:"degrs dcimaux",format:this._displayDEC},{code:"DMS",label:"degrs sexagsimaux",format:this._displayDMS},{code:"RAD",label:"radians",format:this._displayRAD},{code:"GON",label:"grades",format:this._displayGON}],Metric:[{code:"M",label:"mtres",format:this._displayMeter},{code:"KM",label:"kilomtres",format:this._displayKMeter}]},t=this.options.units;for(var n in e)if(e.hasOwnProperty(n)){for(var r=!1,s=0;s<e[n].length;s++)for(var o=e[n][s],a=0;a<t.length;a++){var l=t[a];o.code===l&&(r=!0,this._projectionUnits[n]||(this._projectionUnits[n]=[]),this._projectionUnits[n].push(o))}r||(this._projectionUnits[n]=e[n])}typeof this._projectionUnits=="object"&&Object.keys(this._projectionUnits).length===0&&(this._projectionUnits=e)}_getCurrentProjectionInformation(){for(var e=[this._currentProjectionSystems.label,"en"],t=this._projectionUnits[this._currentProjectionType],n=0;n<t.length;++n)if(t[n].code===this._currentProjectionUnits){e.push(t[n].label);break}return e.join(" ")}_initContainer(){var e=this._createMainContainerElement(),t=this._showMousePositionButton=this._createShowMousePositionPictoElement();e.appendChild(t);var n=this._panelMousePositionContainer=this._createMousePositionPanelElement(),r=this._createMousePositionPanelDivElement();n.appendChild(r);var s=this._panelHeaderContainer=this._createMousePositionPanelHeaderElement(),o=this._panelTitleContainer=this._createMousePositionPanelTitleElement();s.appendChild(o);var a=this._panelCloseButton=this._createMousePositionPanelCloseElement();s.appendChild(a),r.appendChild(s);var l=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);r.appendChild(l);var c=this._createShowMousePositionSettingsElement(this.options.displayCoordinates);r.appendChild(c);var u=this._createMousePositionSettingsElement(),h=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),d=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return u.appendChild(h),u.appendChild(d),r.appendChild(u),e.appendChild(n),e}_setElevationPanel(e){var t=null;e?(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display=""):(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display="none")}_setCoordinatesPanel(e){var t=document.getElementById("GPmousePositionCoordinate-"+this._uid);e?t.style.display="":t.style.display="none"}_setSettingsPanel(e){var t=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),n=document.getElementById("GPmousePositionSettings-"+this._uid);e?(t.style.display="",n.style.display=""):(t.style.display="none",n.style.display="none")}_setTypeUnitsPanel(e){for(var t=this._projectionUnitsContainer;t.firstChild;)t.removeChild(t.firstChild);for(var n=this._projectionUnits[e],r=0;r<n.length;r++){var s=n[r],o=document.createElement("option");o.value=s.code?s.code:r,o.text=s.label||r,t.appendChild(o)}var a=this._projectionUnits[e][0].code;(this._currentProjectionUnits==="DMS"||a==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,e,a),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(a),this._currentProjectionUnits=a}_displayDEC(e){var t={};return t.lat=e[1].toFixed(6),t.lng=e[0].toFixed(6),t.unit="",t}_displayDMS(e){return{lng:Hr.decimalToDMS(e[0],"EO",2),lat:Hr.decimalToDMS(e[1],"NS",2),unit:"DMS"}}_displayRAD(e){var t={},n=.017453292519943295;return t.lng=e[0]*n,t.lng=t.lng.toFixed(8),t.lat=e[1]*n,t.lat=t.lat.toFixed(8),t.unit="rad",t}_displayGON(e){var t={},n=1.1111111111111112;return t.lng=e[0]*n,t.lng=t.lng.toFixed(8),t.lat=e[1]*n,t.lat=t.lat.toFixed(8),t.unit="gon",t}_displayMeter(e){var t={};return t.x=e[0].toFixed(2),t.y=e[1].toFixed(2),t.unit="m",t}_displayKMeter(e){var t={};return t.x=(e[0]/1e3).toFixed(2),t.y=(e[1]/1e3).toFixed(2),t.unit="km",t}_setCoordinate(e,t){var n={},r=this._currentProjectionSystems.crs;if(!r){Mi.log("ERROR : system crs not found");return}e=Et(e,t,r);for(var s=this._currentProjectionSystems.type,o=null,a=this._projectionUnits[s],l=0;l<a.length;l++)if(a[l].code===this._currentProjectionUnits){o=a[l].format;break}if(!o||typeof o!="function"){Mi.log("WARNING : coordinates format function not found");return}else n=o(e);!n||Object.keys(n).length===0||this.GPdisplayCoords(n)}_setElevation(e){var t=this.options.altitude.responseDelay,n=this.options.altitude.noDataValue,r=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(e,t,n,r)}onMoveStopped(e,t){var n=Et(e,t,"EPSG:4326");this._setElevation(n)}onMouseMove(e){var t=this,n=e.coordinate;if(!(!e.map||!e.map.getView())){var r=e.map.getView().getProjection();this._setCoordinate(n,r),clearTimeout(this._timer),this._timer=setTimeout(function(){t.onMoveStopped(n,r)},this.options.altitude.triggerDelay)}}onMapMove(){var e=this,t=this.getMap();if(!(!t||!t.getView())){var n=t.getView(),r=n.getCenter(),s=n.getProjection();this._setCoordinate(r,s),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(r,s)},this.options.altitude.triggerDelay)}}onRequestAltitude(e,t){if(!(!e||Object.keys(e).length===0)&&this.options.displayAltitude){var n=this.options.altitude.serviceOptions||{},r=n.protocol||"XHR",s=n.timeOut||0;r==="JSONP"&&s===0&&(s=15e3);var o=n.outputFormat||"json",a=!0,a;n.zonly===!1?a=n.zonly:a=!0;var l=n.measures||!1,c=[{lon:e[0],lat:e[1]}],u=n.resource,h=this,d=n.rawResponse||!1,f=n.onSuccess||null,g=null,p=null;d?g=function(y){f&&f.call(this,y),Mi.log("alti service raw response : ",y)}:g=function(y){y&&Object.keys(y).length&&(f&&f.call(this,y),t.call(this,y.elevations[0].z))},p=function(y){Mi.log("[getAltitude] ERROR : "+y.message)};var m=n.apiKey||this.options.apiKey;typeof n.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?n.ssl=this.options.ssl:n.ssl=!0);var v=n.ssl;yt.Services.getAltitude({apiKey:m,protocol:r,ssl:v,timeOut:s,scope:h,outputFormat:o,rawResponse:d,onSuccess:g,onFailure:p,zonly:a,measures:l,resource:u,positions:c})}}onShowMousePositionClick(){var e=this.getMap();ds.unset(e);var t=this._showMousePositionButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),t==="false"?gi(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=e.on("pointermove",n=>{this.onMouseMove(n)}):(this.listenerKey=e.on("moveend",n=>this.onMapMove(n)),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}onShowMousePositionSettingsClick(e){this.draggable||e.target.ariaPressed}onMousePositionEditModeClick(e){if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var t=this.getMap();this._isDesktop?this.editing?gi(this.listenerKey):(this.listenerKey=t.on("pointermove",n=>{this.onMouseMove(n)}),this.onMapMove()):this.editing?gi(this.listenerKey):(this.listenerKey=t.on("moveend",n=>this.onMapMove(n)),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}}getCoordinate(e){var t=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),n=t.value;if(!n||(n=n.replace(",","."),!Hr.isInteger(n)))return null;var r=Hr.toInteger(n);if(r<Number(t.dataset.min)||r>Number(t.dataset.max))return null;var s=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,o=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),a=o.value;if(a&&(a=a.replace(",","."),Hr.isInteger(a))){var l=Hr.toInteger(a);l>=Number(o.dataset.min)&&l<=Number(o.dataset.max)&&(r+=l/60)}var c=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),u=c.value;if(u){u=u.replace(",",".");var h=Hr.toFloat(u);h&&h>=Number(c.dataset.min)&&h<=Number(c.dataset.max)&&(r+=h/3600)}return(s==="O"||s==="S")&&(r=-r),r}locateDMSCoordinates(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(!(e[0]===null||e[1]===null)){var t=this._currentProjectionSystems.crs;if(!t){Mi.log("ERROR : system crs not found");return}var n=this.getMap().getView(),r=Et(e,t,n.getProjection());n.setCenter(r),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(r)}}locateCoordinates(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),e=Hr.toFloat(e),e!==null){var t=document.getElementById(this._addUID("GPmousePositionLat")).value;if(t=t.replace(",","."),t=Hr.toFloat(t),t!==null){var n=this._currentProjectionSystems.crs;if(!n){Mi.log("ERROR : system crs not found");return}var r;this._currentProjectionSystems.type==="Geographical"?r=[this.convert(e),this.convert(t)]:r=[this.convert(t),this.convert(e)];var s=Et(r,this._currentProjectionSystems.crs,"EPSG:4326"),o=this._currentProjectionSystems.geoBBox;if(o){var a=[o.left,o.bottom,o.right,o.top];if(s[0]<a[0]||s[0]>a[2]||s[1]<a[1]||s[1]>a[3])return}var l=this.getMap().getView(),c=Et(r,n,l.getProjection());l.setCenter(c),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(c)}}}onMousePositionEditModeLocateClick(){if(this.options.editCoordinates){if(!this.editing){this.onMousePositionEditModeClick(!0);return}this._currentProjectionUnits==="DMS"?this.locateDMSCoordinates():this.locateCoordinates();var e=this.options.mapCenterCallback;if(typeof e=="function"){var t=this.getMap().getView(),n=t.getCenter();e.call(this,n)}}}onMousePositionProjectionSystemChange(e){var t=e.target.selectedIndex,n=e.target.options[t].value;this._setCurrentSystem(n)}_setCurrentSystem(e){for(var t=null,n=0;n<this._projectionSystems.length;++n)if(this._projectionSystems[n].code===Number(e)){t=this._projectionSystems[n].type;break}if(!t){Mi.log("system not found in projection systems container");return}this._currentProjectionSystems=this._projectionSystems[Number(e)],t!==this._currentProjectionType&&this._setTypeUnitsPanel(t),this._isDesktop||this.onMapMove()}onMousePositionProjectionSystemMouseOver(e){Mi.trace(e);var t=this.getMap();if(!(!t||!t.getView())){var n=t.getView(),r=n.getProjection(),s=n.calculateExtent(t.getSize());s=Ss(s,r,"EPSG:4326");var o=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));o.innerHTML="";for(var a=0;a<this._projectionSystems.length;a++){var l=this._projectionSystems[a],c=null;if(l.geoBBox&&(s[0]>l.geoBBox.right||s[1]>l.geoBBox.top||s[2]<l.geoBBox.left||s[3]<l.geoBBox.bottom)){l===this._currentProjectionSystems&&(c=document.createElement("option"),c.value=l.code,c.text=l.label||a,c.setAttribute("selected","selected"),c.setAttribute("disabled","disabled"),o.appendChild(c));continue}var u=document.createElement("option");u.value=l.code,u.text=l.label||a,l===this._currentProjectionSystems&&u.setAttribute("selected","selected"),o.appendChild(u)}}}onMousePositionProjectionUnitsChange(e){var t=e.target.selectedIndex,n=e.target.options[t].value,r=this._currentProjectionUnits;this._currentProjectionUnits=n,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),(r==="DMS"||this._currentProjectionUnits==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()}convert(e){var t;if(this._currentProjectionUnits==="M"||this._currentProjectionUnits==="DEC")t=e;else if(this._currentProjectionUnits==="KM")t=e*1e3;else if(this._currentProjectionUnits==="RAD"){var n=(180/Math.PI).toFixed(20);t=(e*n).toFixed(20)}else if(this._currentProjectionUnits==="GON"){var r=.9.toFixed(20);t=(e*r).toFixed(20)}return t}validateExtentCoordinate(e,t){if(["Lon","Lat"].indexOf(e)===-1)return!1;var n=t.replace(",",".");if(n=Hr.toFloat(n),n===null)return!1;n=this.convert(n);var r=this._currentProjectionSystems.geoBBox;if(r===void 0)return!0;var s=[r.left,r.bottom,r.right,r.top];return s=Ss(s,"EPSG:4326",this._currentProjectionSystems.crs),!(e==="Lat"&&(n<s[0]||n>s[2])||e==="Lon"&&(n<s[1]||n>s[3]))}};Object.assign(vx.prototype,cz);window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=vx);var uz={drawing_portail:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD//////////////////////////////////////////////////////////fv/+fL//////////////////////////////////////////////////////////////////////////////////////v7//////fr/////+vL//////////////////Pj//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////9+v/9ej/9+z/7tT/3q3/y3//v2D/uU//+O7/5L3/xW//piH/mQH/mAD//v7/79f/yXj/oxr/lwD/mQD//fv/58T/tkr/mQL//v3/58P/sTz/79b/tUf/x3X/mQP/5Lv/oRX/ng3/s0H/w2n/u1b/4rf/8Nr/9eb/7tX/pBv/x3P/8d7/3av/79j///7/zH//mgX/2qP//vz/9+3/wGH/qyz/6Mb/vFj/sj//7NH/wGL/rTP/6sr/+fH/yXf/oBP/37H/2aH/6sz/nw//oBT/0pD/+vT/9OX/uE7/pB3/y33/7ND//Pj/26b/mwj/nAn/sT7/w2r/zYL/8+P/ulT/mwb/5Lz/qCj/+/b/1JT/nQz/nQ3/9uj/w2j/mAH/9un/6sv/skH/lwH/3Kf/pB7/pR7/3Kj/nAj/y37/+/f/8t//mQT/rDD/rDH/1JX/7tb/4LT/pR//z4j/z4n/vFn/7dP/4rn//fq31ydlAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKnVAysoAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDM6MjIrMDA6MDB1WI3HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACplBMVEUAAAD//////////////////////////////////////////////////////////fz/9/P//////////////////////////////////////////////////////////////////////////////////////v7//////Pr/////////////////////+/n//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////8+3/8er/9O7/5dj/zrX/s4z/oHH/lmL/9fD/2MT/qX7/ejj/Zxz/Zhn/Zhr//v7/59z/rof/djL/ZBf/Zxv//fz/3Mr/k13/aBz/ZRn//f3/i1D/5tr/kVr/ZRj/rIP//v3/1sL/cy3/byf/jVX/pnn/aB3/mmf/077/6d7/8On/5tn/dzT/q4H/6+H/zbP/lmH/s43/ah//yK3/9O//oXL/gUP/3cz/m2n/jVT/5Nb/onP/hkn/4ND/9vL/rob/cSv/0Ln/x6r/Zxr/Yxb/pXn/8+7/4NH/cCj/ciz/vZz/+PX/7+f/lWH/eDT/sov/49X/+/n/ya//ayH/bCP/jFL/pnr/tJD/7ub/mWb/ZBb/aiD/18P/fj3/+vf/vp//bSX/bib/v5//pXj/8uv/yrD/eDX/eTb/y7H/bCL/soz/7OL/18T/g0b/hEb/v6D/cy7/wKH/9vP/5tv/jlX/59v/0rz/ejf/uJX/nGr/aR//nGv/g0X/1cD//PvyoJNrAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAA0JJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/oBAICvLzcnOykyTExRhh8pJSRcUlpWWFheVgUFhYVlpSXCQlCVHBKC0jW1FZVV1TjgRqqqsqK2RlpEEq5OQVaivrygrLUUBhWV1lrYK8HNAALp6k+oZGNHmgisaG+iQeLkYGQXHF1KZ8mO2NZWUwtYX5TamK4oIMXErNLa0FEKGatvbMzPa2GoiSgtaWZiUuBmWV5I5GiHxnV3dPb29Pd1cnREVjR7KKMoOqWl9/IcTICROLkoCgaOIEiJWF/X1qqgzqGpPA3MKyycVgeaCK4slgTxXmT9JQZ9AUmAJRPnVaRRIUVEybChGbIqDJoDV9BpjTOHNWEhzMmgl2VuGM6VoMScmzwQrK5sxFKJg7pwysYHZyEoP29HkQE+YvQChYMB9iwrzp2gw6CxeBFRQsXlIEky9ashgcMoWLFuow6OotBXOWLV+xEqZg5Yrly8CalurpMugbrFoNMWLN2nUQ+XVr10AMWL3KQJ/B0Gj9BkhINm7ctBkkv3nTRqjAhvVGhgzGJlu2boMG7fYdO3ft2rljOzTot23dYmLMYGqmvXvPXmgE7i3bt69sLzQ69+7ZrW1mysBpblGx/0AjLLGBAITdeGB/hYU5JwOjpaHVwUOHMRPMkaMHrQwtgWmO0dpGO+VYAXqSK+g4bmtnDU61nPYOjgvaURNdYWP7Kkcne05Ispdzdqk4cbIGSUVhzanTFa7OcrCMIejmfnDTmQKEgoIzZw+6eyCyFqenl/e5PeVwIwrL95zz9vLkRMqcPr5J5y/AHFpYcPG8qK8Pavb2k026dBkaGo2XryTJ+qPIMzAE2KlcXbEN7IyCbR1XVQIDUOUZGIOC+a61VwMtKay+foMvJAjNAKCK0LCkm7dAIX3rZlJYOIY8UIVkRMXtI4WFR25XREhikQcGeWRU8p27d+8lR0VaY1MAdEa0bdr9+2m20UFY5YEqYmJrHzyojY3BIQ+M+bj4hw/j4yxxKQA6IyExMQHVAQBpWLIaKI0lIgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDQ6MDYrMDA6MDAh7rXQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD/////////////////////////////////////////////////////////+/v/8vL//////////////////////////////////////////////////////////////////////////////////////v7/////+vr/////////////////////+Pj//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////6+v/6Oj/7Oz/1NT/ra3/f3//YGD/T0//7u7/vb3/b2//ISH/AQH/AAD//v7/19f/eHj/Ghr/+/v/xMT/Skr/AgL//f3/w8P/PDz/1tb/R0f/dXX/AwP/u7v/FRX/DQ3/QUH/aWn/Vlb/t7f/2tr/5ub/1dX/Gxv/c3P/3t7/q6v/2Nj/BQX/o6P//Pz/7e3/YWH/LCz/xsb/WFj/Pz//0dH/YmL/MzP/ysr/8fH/d3f/ExP/sbH/oaH/zMz/Dw//FBT/kJD/9PT/5eX/Tk7/HR3/fX3/0ND/+Pj/pqb/CAj/CQn/Pj7/amr/goL/4+P/VFT/Bgb/vLz/KCj/9vb/lJT/DAz/aGj/6en/y8v/p6f/Hh7/qKj/fn7/9/f/39//BAT/MDD/MTH/lZX/tLT/Hx//iIj/iYn/WVn/09P/ubn/+vpgzcAPAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo0NDoxOSswMDowMBsMxacAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACf1BMVEUAAAD//////////////////////////////////////////////////////////P3/9Pn//////////////////////////////////////////////////////////////////////////////////////v7/////+/3/////9fr/////////////////+vz//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////7/f/7PX/8Pf/3O7/vd7/mcv/gL//c7n/8fj/yuT/jMX/Tab/NJn/MZj/Mpj//v7/3+//k8n/R6P/L5f/M5n//P3/0Of/brb//f7/z+f/Y7H/MJf/bLX/kcf/yeT/Q6H/PZ7/ZrP/h8P/d7v/xeL/4fD/6/X/3e7/SaT/j8f/5PH/u93/crn//v//mMz/N5r/tdr/gcD/Vqv/0ej/ebz/ZrL/2uz/gsD/XK3/1er/8/n/ksn/QaD/wN//tNn/1ur/P5//QqD/ptL/9vr/6vT/cbj/l8v/+vz/t9v/OJv/Opz/ZLH/iMP/m83/6fP/d7r/N5v/Uqj/Mpn/+Pv/qdT/PJ3/7fb/Z7L/uNz/SqT/S6X/udz/OZz/mMv/5fL/drr/Waz/Wqz/qtT/RKH/q9T/9Pn/3u7/Z7P/w+D/TKX/oM//PZ3/erz/Npr/3O3/x+L/+/0F2pMDAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM4SURBVDjLdZNnWxNBFIVnEZGEGpBeROkSuoIUwS4KFkTFQp+wFEWzk+AmEFhEDBZQlA5ioxcRsCDYELADSvlBbnY2kACeTztz3r1znztnAOBEEAYbDDcabTKG0HiT0UbDDQYEAXRECIQmpmbmFpaS7GyJpYW5mamJUKBDECIr6802ZE5uXv6lS/l5uTmkzWZrK9EyQdja2cPLBVeuSinEipJevVJwGdrb2RJa38FRJi+8RiOk4IQQfa1QLnN0wATh5OyiLCqWUgodUdLiIqWLs5OGcN3ipiopZZBCT4gpLVG5bXFlCwhNobxsta8hyuTQVEgAkd1W8rpUezrDSvstvU5utRMB4TZV+Q18PqIqbubn36ygMELdKFdtEwJ3D4ma4X+pvHX7zp3btyr5goxa4uEOPL3uViHsV9+TQVaye9WYQFV3vTyBt899bomYGvkDyOmBvIZrBEnv+3gD3+0PMV5bp4K8VHW1eO/hdl/gR9ZzC6ahES6rsYFrC9WTfgBKmjiAbm5ZAVqaaQ5okkAgJltxhUdtK0DbI1yhlRQD/8dPOIB6+kym9WXPnnKTQU8e+4OAwOe4IVpNagFSTeO954EBICi4vQOvOru6sd/d1Yl3OtqDg0BIaE8vnjRT1dfCniJr6avCo6V6e0JDwI6d/QMv+NEOvhwaHh56OciP/sVA/84dICxcPPKK5i+Qpl+/pmn+OulXI+LwMCDYFaEsf8PH6a0mk2/5UL0pV0bsEgAiMiRq9N3Y2sCMvRuNColkM0dE7xaPq6nVkaPU4zGx0VxqBXv27mtr1g8dYt637du/R4Bj73rgoPLDR90aiPr0WXnogKv2YYgOx432Tejknhr8Mhp3ZOVpCY7GJ0xOKZZLIMXUZEL8UYHO4zx2HBZMaw9B1NcCm+PH9J/3CRf47Tt/CPX9B3Q5qecDkBjr8VON26Amhn56nErU9wGRdNr8129NfJH0t9z8TNKqAixxNhnOzGpGPTsDk8+t8VnC4bxybgyhP3PK8w7r+OzIL1yU/J2f/yu5eCF6PYBtIyVmYXp6ISYlaV2fJVLTVIuLqrTU//jszadnLC1lpEf+D2DbyMzKytRv4B+n7ayGbXJj1gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDQ6MjkrMDA6MDCVg8JEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACslBMVEUAAAD////////////////////////////////////////////////////////+/fz79/T////////////////////////////////////////////////////////////////////////////////////+/v7////9/Pv////79/X////////////////9+/r////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////58+/48ez69PDz5dzpzr3cspnUoIDQlXP69PHt18rYqIzDeU27ZjS6ZTG6ZTL+/v7059/brpPCdUe6Yy+7ZjP+/fzv29DOkm67ZzS6ZDH+/f3v28/LiWO6YzD05t/OkGy6ZDDarJH+/v3t1snAckO+bj3MjWbUn4DXpYfRmXfr08X16eH48Ovz5t3CdknZqo/26+TozLvQlXL//v7dspi8aTfmyLXUoIHGgFbv3NHSm3m5Yy/LjGby49rVoYLIhVzx39X79vPbrZK/cEHq0MDmxrS6ZjK5Yi/58/Dx4Na+bz/AcULhvab8+Pb47+rPlHHCd0ncsZf9+/rnybe9aji9azrLi2TXpojdtJv37unt18nFfVK7ZTL8+vjivqm+bTziv6n58e3WpIfWpYfx4NXMjWfnyrjCd0rDeEvoyrm9azncsZj27OXRmHbHg1nIg1rt2Mriv6rAckTjwKv79vS8ajm9ajnXpYj05t7r0sPDeUzfuKC+bT3Sm3q8aTbIglns1cf9/Pua7OXrAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANISURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlRUUVYFBUVF5WWlIsJQlRwSgtI1tZVV1TW4EEamuqqyplZaRBKuTkFerqGxqLKlBAUWNDfZ2CvBzQAC6e5KbmFjR5oIqW5qZkHi5GBkFxxbTWApjtLY2NMLVFBa1piuKCDFxKbe0dhRCh2s6u7u6uzlqIksKO9jYlLgZllZSeFoh8TW9f/4QJ/X29NRAVLT0pKsoMqmoTJxVBjJw8pTgZCIqnTIZYWTRpopoqg7rGVDC3qHFayfRkMJheMg3sqaKCqRrqDJpaMyDKZ86qS4aCulkzIWIztDQZtNNmgzktc+Ymw8HcOWBnFc1O02ZITpkHVjB/wUKEgoUL5oMVzEtJZtBJWwQxYfEShIIliyEmLErTYdBdugysoHD5imKYfPGK5eCQKVq2VJdBT38lWMGq1T1rYArW9KxeBVawUl+PwcBw7TqIk9dv2AiR37hhPURk3VpDAwYj402bITHdsmXrQqAtxQu3boEEbe3mTcZGDCam27bvgAbtzl279+zZvWsnNOh3bN9masJgZq6zt3c+NALnz585c/58aHTO792rY27GwGlhWblvPzQ5HQClyQPQRLV/X6WlBScDo5WR9cFDhzETzOEjB62NrIBpjtHGVufosUL0JFd4/KidvQ041XI6ODqd6EJNdEUtJ084OTtwQpK9nItr5anTtUgqimrPnK10c5GDZQxBd4+DW88VIhQU7jx/0MMTkbU4vbx9LlysgBtRVHHxgo+3FydS5vT1S869BHNoUeHlK6J+vqjZ2182+eo1aGjUXrueLBuAIs/AEGivcqPnJtgZhbdu31AJCkSVZ2AMDuG7cxKU3otqTpbwhQajGQBUERaefPceKKjv3U0Oj8CQB6qQjKy8f7io6MH9ykhJLPLAII+KTnn46NHDlOgoG2wKgM6IsUt//DjdLiYYqzxQRWxc3ZMndXGxOOSBMR+f8PRpQrwVLgVAZyQmJSWiOgAArqa4BP2YBKMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ0OjQ2KzAwOjAwpaS7KgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAChVBMVEUAAAD//////////////////////////////////////////////////////////vv//fL//////////////////////////////////////////////////////////////////////////////////////v7//////vr//////////////////////vj//////v///////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7//////////////Ov/++j//Oz/+dT/863/7X//6mD/50///O7/9r3/62//4SH/3QH/3AD//v7/+df/7Xj/4Br/3QD//vv/98T/5kr/3QL//v3/98P/5Tz/+db/5kf/7HX/3QP/9rv/4BX/3g3/5UH/6WD/62n/6Fb/9bf/+tr/++b/+dX/4Bv/7HP/+t7///7/86v/+dj/3QX/8qP//vz//O3/6mH/4iz/98b/6Fj/5T//+dH/6mL/4zP/+Mr//fH/7Hf/3xP/9LH/8qH/6mn/+Mz/3g//3xT/8JD//fT/++X/507/4B3/7X3/+ND//vj/86b/3Qj/3gn/5T7/62r/7oL/++P/6FT/3Qb/9rz/4ij//fb/8ZT/3gz//Oj/62j/3AH//On/+Mv/86f/4R7/86j/7n7//vf/+t//3QT/4zD/4zH/8JX/3xX/3gj/9bT/4R//74j/74n/6Fn/+dP/9bn//vrsMn7uAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAxZJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSVAqVIwADJKiosKpSQhKhilZWTLyisqobJQNZUV5WWyMtIgFXLyClXVNQUo8iBTaqqrFOTlgAZw8STV1qHLg1TU1SbxcDEyCIorptY3IGxHuKShPlVRXJCBS6mqsakAKt3c0tra0gxVUtDUWKXExaCsktwGFahs7+js6ursaIc6uKAtWUWZQVWtuwfML8jv7etPAoL+vt58iEhPt5oqg7rGBDC3oCBrYmESGBROzALbUpA/QUOdQVMgA6J80uQpSVAwZfIkiFiGgCaD1tRpEM70GUlwMGM6RGzaVC2GpOSZEM6s2QgFs2dBxGYmJzFoT50D4cydh1Awby5EbM5UbQad+QsgnIWLCmHyhYsWQsQWzNdh0NVbDPX1klSYgtQlUKHFeroM+gZLl0GUL1+xEiK/csVyiMiypQb6DIZGq1ZD1a9Zuw5oS+G6tWugAqtXGRkyGJus37ARKrBp85atW7ds3gTlbtyw3sSYwdRMe9t2RGTu2IGIzu3btM1MGTjNLcp27oIlB0Rslxbs2llmYc7JwGhpaLV7z17MBNO8Z7eVoSUwzTFa22jv238APckd2HLQ1s4anGo57R0cD7Wgqig40HLI0cmeE5Ls5Zxdyg4fQVZQUHDkaJmrsxwsYwi6ue9euxFJRcGmY8fdPRBZi9PTy/vE9pNwFQUnt5/w9vLkRMqcPr5JOacQOet0jqivD2r29pNNOnMWpuDsmSRZfxR5BoYAO5X5becgcbSpbb5KYACqPANjUDBfbQsoAxU0tBTxhQShGQBUERqWdP4CKKgvnE8KC8eQB6qQjCi7uLegYO+lsghJLPLAII+MSr48adLl5KhIa2wKgM6Itr1y6tQV2+ggrPJAFTGxU65enRIbg0MeGPNx8deuxcdZ4lIAdEZCYmICqgMA6f6os3UKuXAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ0OjU4KzAwOjAwOTHA6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACr1BMVEUAAAD////////////////////////////////////////////////////////7/v3y+/n////////////////////////////////////////////////////////////////////////////////////+/v7////6/f3////y+/r////////////////4/fz//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r+ffo+PXs+ffU8+2t591/28tg0r5Pzbju+vi97ORv1sQhwKUBt5gAtpf+/v7X9O942ckavqIAtZYAt5j7/v3E7udKy7UCt5j9/v7D7uY8x7DW8+5Hy7QAtpZ118cDt5i77OQVvKANup1BybJg0b5p1cJWz7q36uLa9PDm9/XV8u4bvqNz18be9fGr59zY8+9/2ssFuJmj5dr8/v7t+fdh0r8sw6rG7+hYz7s/ybHR8uxi0r8zxazK8Onx+/l32MgTvJ+x6N+h5Nlp1MLM8OoPu54UvJ+Q39L0/Prl9/ROzbcdv6N92srQ8ez4/fym5tsIuJoJuZs+yLBq1cOC28zj9/NUz7oGuJq87OMowaf2/PuU4NQMupwNupyU4dTo+PZo1MIBtpdq1cLp+fbL8OoBtpan5tsev6Mev6So5twIuZt+2sv3/Pvf9fJUzroEt5gwxKsxxKuV4NQVvaCV4dTW8+/X8++06eEfv6T7/f2I3c6J3c9Zz7wFuJrT8u256+L6/f3ow7cxAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMvSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN/QiCYPVNHYUJ/Mw8XIICiumNbUDLO9sawMprawuSlNUVyQgUuppqW1EOq4tvaOjvY2qGMLW1tqlLgYlFVSOhuhDuvq7unt7enugjq4sTNFRZlBVa2vH8wvLJgwsSgZCIomTiiAiPT3qakyqGtMAnMLG7Mng+WBKiZngx1SWDBJQ51BU2sKRPnUadOToWD6tKkQsSlamgzaM2aCOY2zZifDwexZYGcVzpyhzZCcMgesoGzuPISCeXPLwArmpCQz6MyYDzFhwUKEgoULICbMn6HDoLtoMcS+JUuLYPJFS5dAxBYv0mXQ018G4ZQtT4MpSFsOiZrCZfp6DAaGK1ZCeKtWr4HIr1m9CiKycoWhAYOR8dp10IBbv2Ej0JaijRvWQ4N23VpjIwYT002bt0BVbN22fceO7du2QuW3bN5kasJgZq6zc1cZLBGU7d5dBksaZbt26pibMXBaWFbs2QtLDqAkCWPu3VNhacHJwGhlZL1v/wHMBHPw0D5rIytgmmO0sdU5fOQoepI7euy4nb0NONVyOjg6nWg/iZpoT7afcHJ24IQkezkX14pTpwuRVBQWnjlb4eYiB8sYgu4e+zacQ1aw9fwFD09E1uL08va5eOkyXEXh5UsXfby9OJEyp69fcu4VRM66mivq54uavf1lk6+1whRcv5EsG4Aiz8AQaK+yaDnEGYVbly9SCQpElWdgDA7hu9kOykCFze23+EKD0QwAqggLT759BxTUd24nh0dgyANVSEbevXegsPDA/buRkljkgUEeFZ3y4OHDBynRUTbYFACdEWP36MqVR3YxwVjlgSpi46Y/fjw9LhaHPDDm4xOePEmIt8KlAOiMxKSkRFQHAAAsgrQ2sknLAAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDU6MTIrMDA6MDD2yfpjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACfFBMVEUAAAD////////////////////////////////////////////////////////8/vz0/fT////////////////////////////////////////////////////////////////////////////////////+/v7////7/vv////1/fX////////////////6/vr//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////v/O/s++zw/PDc+dy9872Z7ZmA6oBz53Px/PHK9sqM64xN4U003TQx3DEy3DL+/v7f+d+T7ZNH4Ecv3C8z3TP8/vzQ99Bu5m79/v3P989j5WMw3DBs5myR7JHJ9slD4EM93j1m5WaA6YCH64d36HfF9cXh+uHr++vd+d1J4EmP7I/k+uT+//6787ty53KY7Zg33Te18rWB6oFW4lbR99F56Hna+dqC6oJc41zV+NXz/fOS7JJB30HA9MC08rQy3TKH6ofW+NY/3j9C30Km8Kb2/fbq++px53GX7Zfa+Nr6/vq387c43Tg63jpk5WSI64ib7pvp++lS4lL4/fip8ak83jzt/O1n5We487hK4UpL4Uu587k53TmY7pj4/vjl+uV26HZZ41la41qq8KpE30Sr8Kv0/fQ53jne+d7D9cNM4Uyg76B66Ho23TbH9cf7/vts+qXUAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM8SURBVDjLdZP3X9NQFMVfFIUWLJRpVcoeYlVEQEUExIUyFFFRcfJqqiyb12paDQQKpQXZorJXARcbFRC3oohb/yHTJIUW8fyU5Hxz7/3cdx4ArDBs2XK7FSvtHSB0sF+5wm75MgwDVsIEQkenVSJnF/mlS3IXZ9EqJ0ehwIrAxK5u7h644vKVnNzcnCuXFbiHu5ureJ7APL1Ww7z8gqtKAjEilFcL8vPgai9PzOJL1qjU166TCGlYIURev6ZWrZFwBLZ2nbf2xk0lobESobx5Q+u9bq2ZkPr4UoVFNNLYCNFFhZSvj5QpIHSC6uLFvpkoVkMnIQbEXn54idLSnWZkeVaW4H5eYiD0p3SlXH9ElOnLy/VlBIcQpTrKXwgCAuUGmv/FWFF561ZlhZEvSBvkgQEgKLiqGnF+TW0dZFRXW8MRqLoqOAiEhNazr4huUKsgK5W6gR0EKetDQ8D6sNsc3niHgryoO43ct9th68EG/C77Qt9rgvNquseOhe7iGwCUN7MAqW9ZAFr0JAs0yyGQ4a1chbb2BaC9javQisvAxo5OFiC6ulUWX9XdxW4GdXZsBJs297CAiezFLQDeS5pYoGfzJhC+pa+fG/n+g4ec//DBfe5Lf9+WcBCx9dFjbtN09cAg00U1OFDNrZZ4/GhrBIiMGhoe4Vc7Ojb+5Mn42Ci/+pHhoahIEL1N9tRI8gdIko2NJMkfJ2l8KtsWDQTbd2h1z/g4mcyZNPGheqbT7tguAFhMxM6Jyal/AzM1ObEzIobJHBa7S/bcQCyOHGF4Hhcfy6ZWkLA7sV1vGzpET7cn7kkQcLGX7t2nffGSMFn//+q1dv9eqeViiA8kTQy8sco9Mfr2XdLBhaslOJSc8v6DZr4J0nx4n5J8SGB1OVPTYP6MZVBEfMz3SEu1vd6HveGnWb4JMfsZeh+x8QFIjw+cM3xhCeLL+Fzg0XRbH2AZx0Rfp83xRcppteh4xqICDHEiE377bl71928w8+Q/PkNITml/TCFU9kN7SrKEz6z8dJb8569fP+VZp2OXApgxzsQpZmYUcWcylvQZ4uw56vdv6tzZ//jMyZ+/8OfPhfMx/wOYMS5mZ1+0HeAvs9msMpv5tz0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ1OjQxKzAwOjAwj8HumgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACr1BMVEUAAAD////////////////////////////////////////////////////////9/vv5+/L////////////////////////////////////////////////////////////////////////////////////+/v7////9/fr////5+/P////////////////8/fn////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////3+uz1+en3+u3t9Nbd6rHK34W912i20lj4+u/j7sDD23ajxyyWvw6VvguVvgz+/v7u9drH3X+gxSWUvgmWvw39/vvm8Me00VP+/v3m8MauzkXu9Nmz0FDG3HyUvgrj7r+exCCbwhqwz0rB2XGWvw+51F7h7Lrv9dz0+Oft9NehxifF3Hrx9t/c6a+201j+//7K3oaYwBHZ56j+/vy+12moyjfn8Mn2+uy61WCwzkns89P3+u6+12qryz7p8c35+/HH3X6dwx7e67XY56aVvg2UvQjq8s6cwhuexB/R45b6/PT0+Oa20leVvgqhxijJ3oT8/fna6KqYwBOZwRavzkfB2XLL34nz+OS41F2UvQmYwBKmyDGWvwz7/PfS5JmawRebwhjT5JrB2XD1+erp8s79/vzb6ayiximixir7/PbJ3oOZwRXK3oTx9+Cpyzuqyzvj7sGexCH5+/KZwBSwz0vu9dng7LijxivO4Y6awRjO4Y+61WGXwBHt89Wpyzri7bz9/frM0I39AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANESURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlhUUVYFBUWF5WWlIsJQlRwSgtI1tZVV1QWIEECguqqyplZaRBKuTkFWpq68qLKlBAUXldbY2CvBzQAC6e5PoGdHmQiob6ZB4uRgZBccW0xgKY7U3l5U0wdkFjmqK4IAOXUk1zSyHUca1tWVltrVDHFrY01yhxMSirpLQ3QeQ7Oru6e3q6uzo7ICqa2lNUlBlU1Xr7iiBG9k8oTgaC4gn9ECuL+nrVVBnUNSaCuUXlk0omJ4PB5JJJYEcXFUzUUGfQ1JoCUT512vRkKJg+bSpEbIqWJoN22gwwp2nmrGQ4mDUT7KyiGWnaDMmz54AVlM+dh1Awb245WMGc2ckMOvMXQBQsXIRQsGghRMGC+ToMuouXgBUULl1WDJMvXrYUHDJFSxbrMujpLwdzVqxsT4MpSGtfuQKsabm+HoOB4arVECPWrF0HkV+3dg3EgNWrDA0YjIzXb9gICbhNm+cBbSmet3kTJGg3blhvbMRgYrpl6zZo0G7fsXPXrp07tkODftvWLaYmDGbmOrv3rIQmk5V79+3buxKadFbu2a1jbsbAaWFZ2bwfYknFAVCaPABhb9zfXGlpwcnAaGVkffDQYcwEc+ToQWsjK2CaY7Sx1Uk9Voie5Ap3HreztwGnWk4HR6cTbU0oKoqa2k44OTtwQpK9nIvryVOnNyKpKNp45tRJNxc5WMYQdPc4e+48UrovPH/hoIcnImtxenn7XNxTATeiqGLPRR9vL06kzOnrl5x7CZGzLl8R9fNFzd7+sslHr0JDY+PVo8myASjyDAyB9irX2q+DnVF4vf2aSlAgqjwDY3AIX30bKPkWFdy4yRcajGYAUEVYePKt26Cgvn0rOTwCQx6oQjKy8s7doqK79yojJbHIA4M8Knr2/QcP7s+OjrLBpgDojBi7h48ePbSLCcYqD1QRGzf98ePpcbE45IExH5/w5ElCvBUuBUBnJCYlJaI6AADXv7i4Kd/lawAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDk6NDUrMDA6MDBhsioHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACnVBMVEUAAAD////////////////////////////////////////////////////////7/fvy+fL////////////////////////////////////////////////////////////////////////////////////+/v7////6/Pr////////////////////4/Pj////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r9uvo9Ojs9uzU69St2K1/w39gtWBPrU/u9+694L1vu28hlyEBiAEAhwD+/v7X7Nd4wHgalBoAhgAAiAD7/fvE48RKqkoCiAL9/v3D48M8pDzW7NZHqUd1vnUDiAO737sVkRUNjg1BpkFgtGBpuWkCiQJWsFa33bfa7drm8+bV69UblBtzvXPe796r16vY7Nj+//4FigWj1KP8/fzt9u1htWEsnCzG5Mbr9etYsVg/pT/R6dFitmIzoDPK5srx+PF3wHcTkBOx2rGh06EAhQDM58wPjg8UkRSQy5D0+vTl8uVOrE4dlR19wn3Q6dD4/Pim1aYIiwgJjAk+pD5qumqCxYLj8uNUr1QGiga837womij2+/aUzZQMjQwNjQ1ouGgBhwFquWrp9OnL5ssBhgGn1qcelR4elh6o1qj2+vZ+w373+/ff8N8EiAQwnjAxnjGVzZUVkhUJiwm03LQflh+IyIiJyIlZsVnT6tP8/vy53rn6/Pq97PRtAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAzFJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSWlBQVlYFBQUFpSXFQoJQlRwSgtI1teUVkFlYWqqaqsKJeVkQapkJNXqK6pLUWRB6oora2pVpCXAxrAxZNUV48uD1JRX5fEw8XIICiumNrQCLO9FAhg7MaGVEVxQQYupeqm5gKo41pa29paW6COLWhuqlbiYlBWSW4vhQh0dHZ19/R0d3V2QFSUtierKDOoqvX2gfkF+f0TCpOAoHBCfz5EpK9XTZVBXWMimFtQmjVpchIYTJ6UBXZIQf5EDXUGTYEMiPIpU6clQcG0qVMgYhkCmgxa02eAOaUzZyXBwayZYGcVzJiuxZA0ew5Ewdx5CAXz5kIUzJmdxKA9fT5EwYKFCAULF0AUzJ+uzaCzaDHEviVLC2HyhUuXQMQWL9Jh0NVbBuEsb0+FKUhtXw4RW6any6BvsGIlhLdq9RqI/JrVqyAiK1cY6DMYGq1dBwnJ0vUbNgJDYvLGDeuhAuvWGhkyGJts2rwFGrRbt23fsWP7tq3QoN+yeZOJMYOpmfbOXcuhEbi8dPfu0uXQ6Fy+a6e2mSkDp7lF+Z69pbBUUABLd2Wle/eUW5hzMjBaGlrt238AM8Ec3L/PytASmOYYrW20Uw4dRk9yh48ctbWzBqdaTnsHx2Otx1ET7fHWY45O9pyQZC/n7FJ+4mQBkoqCglOny12d5WAZQ9DN/cyGLcgKtp495+6ByFqcnl7e53ddgKsouLDrvLeXJydS5vTxTcq5iMhZl3JEfX1Qs7efbNLlK9DQKL1yOUnWH0WegSHATmVRO8QZBVfbF6kEBqDKMzAGBfPVtYIyUEFjaxFfSBCaAUAVoWFJ166Dgvr6taSwcAx5oArJiPIbBwoKDtwsj5DEIg8M8sio2bemTLk1OyrSGpsCoDOibW9fvHjbNjoIqzxQRUzsnbt378TG4JAHxnxc/L178XGWuBQAnZGQmJiA6gAAFLyvxAL3bxQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ5OjU2KzAwOjAwnPAwBAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD////////////////////////////////////////////////////////7//3y//n////////////////////////////////////////////////////////////////////////////////////+//7////6//3////y//r////////////////4//z////////////////////////////////////////////////////////////////////////+//7////////////////////////////////////+//7////////////////////////////////////////////////////////////////////////////+//7////////////r//fo//Xs//fU/+6t/95//8tg/79P/7nu//i9/+Rv/8Uh/6YB/5kA/5j+//7X/+94/8ka/6MA/5cA/5n7//3E/+dK/7YC/5n9//7D/+c8/7HW/+9H/7V1/8cD/5m7/+QV/6EN/55B/7Np/8NW/7u3/+La//Dm//XV/+4b/6Rz/8fe//Gr/93Y/+/+//9//8wF/5qj/9r8//7t//dh/8As/6vG/+hY/7w//7LR/+xi/8Az/63K/+rx//l3/8kT/6Cx/9+h/9nM/+oP/58U/6CQ/9L0//rl//RO/7gd/6R9/8vQ/+z4//ym/9sI/5sJ/5w+/7Fq/8OC/83j//NU/7oG/5u8/+Qo/6j2//uU/9QM/50N/53o//Zo/8MB/5jp//bL/+pB/7IB/5en/9we/6Qe/6Wo/9wI/5x+/8v3//vf//IE/5kw/6wx/6yV/9TW/+60/+Af/6WI/8+J/89Z/7zT/+25/+L6//2DMMmrAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTA6MDYrMDA6MDDpi8pqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD////////////////////////////////////////////////////////7///y///////////////////////////////////////////////////////////////////////////////////////+///////6///////////////////////4///////////////////////////////////////////////////////////////////////////+///////////////////////////////////////+///////////////////////////////////////////////////////////////////////////////+///////////////r///o///s///U//+t//9///9g//9P///u//+9//9v//8h//8B//8A///+///X//94//8a///7///E//9K//8C///9///D//88///W//9H//91//8D//+7//8V//8N//9B//9p//9W//+3///a///m///V//8b//9z///e//+r///Y//8F//+j///8///t//9h//8s///G//9Y//8////R//9i//8z///K///x//93//8T//+x//+h///M//8P//8U//+Q///0///l//9O//8d//99///Q///4//+m//8I//8J//8+//9q//+C///j//9U//8G//+8//8o///2//+U//8M//9o///p///L//+n//8e//+o//9+///3///f//8E//8w//8x//+V//+0//8f//+I//+J//9Z///T//+5///6//8Ngdu6AAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MDoyMSswMDowMG4J85kAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACu1BMVEUAAAD////////////////////////////////////////////////////////8/f3y9/r////////////////////////////////////////////////////////////////////////////////////+/v7////6/P3////z9/r////////////////5+/z//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////s8/jp8fft9PjW5vCwz+KEtdJno8hXmcLu9fnA2Oh1q80qfrIMa6cJaqYKaqb+/v7Z6PF+sdAkea8HaKULa6f8/f3G3epRlcAJaab9/f7G3OpEjrsHaaXY5/FOlL97rs8Iaab9/v6+2Ocfdq0Yc6tJkb1no8dvqMsIaaUNbKhdncS61ebb6fLn8PbX5vAle7B5rs7f7POuzuGFtdMPbainyt/8/f5oo8g1hbbI3utfnsVHkLzT5O/u9PhppMk8ibjM4Ozx9/p9sNAcda200eSlyN4La6YGaKVwqMvO4e0Zc6wddq2Vv9j0+Pvm8PZWmMIme7GDs9LS5O/+/v/5+/ypy98Rb6kTcKpGj7xxqcyIt9Pk7/VcnMQQbqj7/f0wgbQKaqf3+vyYwdkVcaoWcquZwdpvp8vq8vfN4e1JkL2rzOAnfLEofLGszOH2+vyCs9ITb6mDtNLg7PNbnMQ5h7c5h7jA2egfd66awtry9/pvqMoSb6kMbKe30+UpfbGNutaOutZgn8XV5vC81ub7/P0PF+8/AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANLSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlhUUVYFBUWF5WWlIsJQlRwSgtI1tZVV1QU4EEagqqqyplZaRBKuTkFWrr6huKKlBAUUN9Xa2CvBzQAC6e5MYmdHmQiqbGZB4uRgZBccW05gKY7S3l5S0wdkFzmqK4IAOXUmtbeyFEqKajs6urs6MGoqSwva1ViYtBWSWluwci39vXP2HixAn9fb0QFT3dKSrKDKpqkyYXQYycMrU4GQiKp06BWFk0eZKaKoO6xjQwt6ghuwQsD1RRkg12dFHBNA11Bk2t6RDlM2bOSoaCWTNnQMSma2kyaKfNBnNa5sxNhoO5c1rACmanaTMkp8wDKyifvwChYMH8crCCeSnJDDoLF4EVNCxeglCwZHEDWMGihToMukuXgRUULl9RDJMvXrEcHDJFy5bqMujprwRzVq1ekwZTkLZm9SqwppX6egwGhmvXQYxYv2EjRH7jhvUQA9atNTRgMDLetBns5IqWLVu3bU9O3r5t6xaowOZNxkYMJqY7du6CBG3L7j179+3bu2c3RL5o184dpiYMZuY6+w+shkRg4erygwfLV0OirmL1gf065mYMnBaWh9oOQ/RUHAGlySMQdsvhtkOWFpwMjFZG1kePHcdMMCdOHrU2sgKmOUYbW53UU4XoSa5wzWk7extwquV0cHQ6c7YFRUVRy9kzTs4OnJBkL+fiWnnuPLKKopYLFyvdXORgGUPQ3ePS5SuFCAWFu68e9fBEZC1OL2+fa9cr4EYUVRy45uPtxYmUOX39knNvIHLWzVuifr6o2dtfNvnkbWhotNy+kywbgCLPwBBor3L33n2wMwrvr7mrEhSIKs/AGBzC13j2AdCSogdnS/hCg9EMAKoIC09++AgU1I8eJodHYMgDVUhGHnp8oqjoxJNDkZJY5IFBHhWd8nTGjKcp0VE22BQAnRFj9+zGjWd2McFY5YEqYuNmPX8+Ky4Whzww5uMTXrxIiLfCpQDojMSkpERUBwAAPAa7YJpbYIgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUwOjM0KzAwOjAw8JvcoAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACzVBMVEUAAAD////////////////////////////////////////////////////////7/Pzy9Pb////////////////////////////////////////////////////////////////////////////////////+/v7////6+/v////////////////////4+fr////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r7/Ho7O/s7/LU2+GtusZ/lKdge5JPbIfu8fO9yNFvh5whRWYBK1AAKE8AKU/+/v7X3uR4j6IaP2EAJk0AKlD7/PzEztZKZ4ICK1EAKE79/f3DzdY8XHkAJ03W3eNHZYB1jKADK1EAJ067xtAVO14NNVlBYHxgepHr7vFpgpgCLFFWcou3ws3a4OXm6u3V2+IbQWMBK1Fzip7e4+iruMVPbIbY3uQFLlOjssD8/f3t8PJhe5IsT27Gz9hYc4w/X3vR2d9ifJMzVXPK09vx8/V3jqITOVyxvcmhsL4AKVAAJUzM1NwPNloUOl2QorP09vfl6e1Oa4UdQmN9k6bQ2N/4+fqmtMIIL1QJMVY+XXpqg5mCl6nj6OxUcYoAJkwGL1S8x9EoSmr2+PmUpbUMM1cNNFiUprVogZgBKE5qgpjp7PDL1NsBJ06ntcIeQmQeQ2WotsP29/l9kqUIMVV+k6b3+Pnf5OlUcIoEKlAwUnExUnG9yNKVprYVPF4IMFUJMFVBYH3X3uO0wMwfRGWInK0MNFiJnK5ZdI3T2uEwUnC5xM/6+/yAxxLtAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAA0hJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/oBAICvLzcnOykyTExRhh8pJSRcUlpWWFheVgUFhYVlpSXCQlCVHBKC0jW1FZVV1TjgRqqqsqK2RlpEEq5OQVauvqGwrLUUBhQ31drYK8HNAALp6kxiZ0eZCKpsYkHi5GBkFxxdTmFpjtrWVlrTB2S3OqorggA5dSbVs7xP7Cmo7Orq7OjhqIkpr2tlolLgZlle6eBoh8b1//hIkTJ/T39UJUNPR0qygzqKpNmgzmF06ZOq0oCQiKpk2dAhGZPElNlUFdY3p+IdhRM2aC5YEqZs4AO7owf7qGOoOmQAZE+azZc5KgYM7sWRCxDAFNBq2588Cc1vkLkuBgwfxWsIJ5c7UYkroXghWULVqMULB4URlYwcLuJAbtuUvAChqWLkMoWLYU7LHCJXO1GXSWrwArKFi5qggmX7RqZQFYwYrlOgy6eqvBCtas7UmFKUjtWbsGrGC1ni6DvsG69RAnb9i4CSK/aeMGiMj6dQb6DIZGm7dAQrp167btQFuKtm/b2goJ6y2bjQwZjE127NwFCdrW3Xv27tu3d89uiHzhrp07TIwZTM209x84CI3AgwcPHTp4EBqdBw/s1zYzZeA0t6g4fKQGlthAAJqojhyusDDnZGC0NLQ6euw4ZoI5cfKolaElMM0xWttop5w6jZ7kTp85a2tnDU61nPYOjuc6z6OoKDzfec7RyZ4TkuzlnF0qLlysQVJRWHPpcoWrsxwsYwi6uV+5eg0p3dfsvn7D3QORtTg9vbxv3roNN6Lw9q2b3l6enEiZ08c3KecOzJLCmrv3RH19ULO3n2zSfWjiLq95cD9J1h9FnoEhwE5lec9DcCQXPOpZrhIYgCrPwBgUzNfYCcpAhS2Pn/CFBKEZAFQRGpb09BkopJ89TQoLx5AHqpCMqHj+orDwxcuKCEks8sAgj4zqfjVr1qvuqEhrbAqAzoi2ff3mzWvb6CCs8kAVMbFz3r6dExuDQx4Y83Hx797Fx1niUgB0RkJiYgKqAwC8prs7Sn3FCAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTA6NDMrMDA6MDA/+es3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACfFBMVEUAAAD////////////////////////////////////////////////////////8/P709P3////////////////////////////////////////////////////////////////////////////////////+/v7////7+/7////19f3////////////////6+v7///////7////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////v7/zs7Pvw8Pzc3Pm9vfOZme2AgOpzc+fx8fzKyvaMjOtNTeE0NN0xMdwyMtz+/v7f3/mTk+1HR+AvL9wzM938/P7Q0Pdubub9/f7Pz/djY+UwMNxsbOaRkezJyfZDQ+A9Pd5mZuWAgOmHh+t3d+jFxfXh4frr6/vd3flJSeCPj+zk5Pr+/v+7u/NycueYmO03N921tfKBgepWVuLR0fd5eeja2vmCgupcXOPV1fjz8/2SkuxBQd/AwPS0tPIyMt2Hh+rW1vg/P95CQt+mpvD29v3q6vtxceeXl+3a2vj6+v63t/M4ON06Ot5kZOWIiOubm+7p6ftSUuL4+P2pqfE8PN7t7fxnZ+W4uPNKSuFLS+G5ufM5Od2YmO74+P7l5fp2duhZWeNaWuOqqvBERN+rq/D09P05Od7e3vnDw/VMTOGgoO96eug2Nt3Hx/X7+/4Nm4E+AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM8SURBVDjLdZP3X9NQFMVfFIUWLJRpVcoeYlVEQEUExIUyFFFRcfJqqiyb12paDQQKpQXZorJXARcbFRC3oohb/yHTJIUW8fyU5Hxz7/3cdx4ArDBs2XK7FSvtHSB0sF+5wm75MgwDVsIEQkenVSJnF/mlS3IXZ9EqJ0ehwIrAxK5u7h644vKVnNzcnCuXFbiHu5ureJ7APL1Ww7z8gqtKAjEilFcL8vPgai9PzOJL1qjU166TCGlYIURev6ZWrZFwBLZ2nbf2xk0lobESobx5Q+u9bq2ZkPr4UoVFNNLYCNFFhZSvj5QpIHSC6uLFvpkoVkMnIQbEXn54idLSnWZkeVaW4H5eYiD0p3SlXH9ElOnLy/VlBIcQpTrKXwgCAuUGmv/FWFF561ZlhZEvSBvkgQEgKLiqGnF+TW0dZFRXW8MRqLoqOAiEhNazr4huUKsgK5W6gR0EKetDQ8D6sNsc3niHgryoO43ct9th68EG/C77Qt9rgvNquseOhe7iGwCUN7MAqW9ZAFr0JAs0yyGQ4a1chbb2BaC9javQisvAxo5OFiC6ulUWX9XdxW4GdXZsBJs297CAiezFLQDeS5pYoGfzJhC+pa+fG/n+g4ec//DBfe5Lf9+WcBCx9dFjbtN09cAg00U1OFDNrZZ4/GhrBIiMGhoe4Vc7Ojb+5Mn42Ci/+pHhoahIEL1N9tRI8gdIko2NJMkfJ2l8KtsWDQTbd2h1z/g4mcyZNPGheqbT7tguAFhMxM6Jyal/AzM1ObEzIobJHBa7S/bcQCyOHGF4Hhcfy6ZWkLA7sV1vGzpET7cn7kkQcLGX7t2nffGSMFn//+q1dv9eqeViiA8kTQy8sco9Mfr2XdLBhaslOJSc8v6DZr4J0nx4n5J8SGB1OVPTYP6MZVBEfMz3SEu1vd6HveGnWb4JMfsZeh+x8QFIjw+cM3xhCeLL+Fzg0XRbH2AZx0Rfp83xRcppteh4xqICDHEiE377bl71928w8+Q/PkNITml/TCFU9kN7SrKEz6z8dJb8569fP+VZp2OXApgxzsQpZmYUcWcylvQZ4uw56vdv6tzZ//jMyZ+/8OfPhfMx/wOYMS5mZ1+0HeAvs9msMpv5tz0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUwOjU2KzAwOjAwoWvEDgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACTFBMVEUAAAD////////////////////////////////////////////////////////9/v/5+v/////////////////////////////////////////////////////////////////////////////////////+/v/////8/f/////////////////////8/P///////v/////////////////////////////////////////////////////////////////+/v/////////////////////////////////////+/v/////////////////////////////////////////////////////////////////////////////+/v/////////////2+P/09//r8P/Y5P/D1P+1yv+txP/3+f/g6f+7z/+Xtf+Iqv+Hqf/+/v/s8f/A0v+Usv+GqP/9/f/j6/+qwv+kvv+pwf++0f+Gqf/f6P+RsP+Orv+mv/+0yv+5zf+Jq/+wxv/d5//t8v/z9v+Us/+90P/v9P/X4/+Kq//U4P/9/v/2+f+cuP/k7P/1+P+xx/+lv//p7/+2yv+gu//m7f/4+v+Qr//a5P/T3/+FqP/n7f/L2v/6+//y9v+sxP+Vs//C1P/8/P/V4f+LrP+Mrf+6zf/F1f/y9f+vxv+KrP+atv/7/P/N2/+Nrf+Nrv+4zP/W4v+VtP+WtP/6/P/C0/+MrP/D0//w9P+euv+SsP+Ssf/N3P/c5v/I1//q8P/e5//8/f/tCMxjAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAyFJREFUOMt1k+db01AUxm+U1QKllT0KAlXUInsjoOICRREVFZGRMMrKTSFlBVoKKGgZUqZShiJDUUARFyrrHzPkJrRlnE855/09J+9z7jkAcIFhx47b2NrZO+C4g72drc3xYxgGLAITiR2dnCUuUqKkhJC6SJydHMUiCwKTnXB1cydKy8pVFRWq8rJSwt3N9YRsj8A8PL3wyqrqGhJyQdZUV1XiXp4emKB7+1Dq2jqalbiAkK6rVVM+3ojAfP3kmvoGkld5hmyo18j9fHcJ/4CTVH0jbaWzBN1YT50M8GcbiJ1wddN+fZdoUuNOYgzIPAOJZqE/ZGiaEb7JZiLQUwbEQVRLK+TNaXVtbTotbxa2tlBBYhCsIPQ0KrR3dD57/vxZZ0c7Img9oQgGp06XdkHUsvsFhbNBvehGv4RdpadPgZAzL7kU0hVqnA91BWcaki/PhICz0nKEG3p6BaC3x4Bq5dKz4FyfikuY/lf4XrzqZzhA1XcO4ANGDqAHh8zA0CDnGxoHcKDsG0bAyKgZGB1BwHCfEoSO1aL/vX5DCTr15jWq1Y6FgvNh4ygx6QkBIPQmVBsPOw/CIya0KGudnEL61CQaLdRORISDyKjpt5xlknk3w/kcmnnHF95OR0WC6Jj3s3NotMx848KHDwuN80iHc7PvY6JBbJzy46KJf0AT/ekTbeKf07T4URkXC0TxCZqWz4ywBVDYO5L53KJJiBcBLDEyaWl55eDCfFleSopMZHcOS76gLPkK968c1JekpCZzWytKu3hpVMdYLy2jG710OU2E1t4//Ypm9ZtlDwjXVjVX0/2Fw5Bdu/79x5wl8PPX0vUb5tMSZWTe/L1ovgxILv6+mZkhsjjOW1l41br5star3LNuWZ/3bTm+/IefBvP3Hy6/Y6UDkJ2qGNMjG3BOP6a4m22tAyznnkSt27UBSZ1acj9nXwOWeJCLb6ztjnptA899eEBnCe9Hms0VCFc2NY+8D9HZkT/OGzAaDMaBvMfJhwGsjScpW+vrWylPcg7VWSL/KbW9TT3NP0JnX76gcGensCDxKIC1UVRcXGRt4D+SPpTGEJHXggAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTE6MDYrMDA6MDAGSaFUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD////////////////////////////////////////////////////////9+//58v/////////////////////////////////////////////////////////////////////////////////////+/v/////9+v/////68v/////////////////8+P/////////////////////////////////////////////////////////////////////////+/v/////////////////////////////////////+/v/////////////////////////////////////////////////////////////////////////////+/v/////////////36//16P/37P/u1P/erf/Lf/+/YP+5T//47v/kvf/Fb/+mIf+ZAf+YAP/+/v/v1//JeP+jGv+XAP+ZAP/9+//nxP+2Sv+ZAv/+/f/nw/+xPP/v1v+1R//Hdf+ZA//ku/+hFf+eDf+zQf/Daf+7Vv/it//w2v/15v/u1f+kG//Hc//x3v/dq//v2P///v/Mf/+aBf/ao//+/P/37f/AYf+rLP/oxv+8WP+yP//s0f/AYv+tM//qyv/58f/Jd/+gE//fsf/Zof/qzP+fD/+gFP/SkP/69P/05f+4Tv+kHf/Lff/s0P/8+P/bpv+bCP+cCf+xPv/Dav/Ngv/z4/+6VP+bBv/kvP+oKP/79v/UlP+dDP+dDf/26P/DaP+YAf/26f/qy/+yQf+XAf/cp/+kHv+lHv/cqP+cCP/Lfv/79//y3/+ZBP+sMP+sMf/Ulf/u1v/gtP+lH//PiP/Pif+8Wf/t0//iuf/9+v/1rAt3AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTE6MjArMDA6MDAnvJMTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD/////////////////////////////////////////////////////////+///8v///////////////////////////////////////////////////////////////////////////////////////v//////+v//////////////////////+P///////////////////////////////////////////////////////////////////////////v///////////////////////////////////////v///////////////////////////////////////////////////////////////////////////////v//////////////6///6P//7P//1P//rf//f///YP//T///7v//vf//b///If//Af//AP///v//1///eP//Gv//+///xP//Sv//Av///f//w///PP//1v//R///df//A///u///Ff//Df//Qf//af//Vv//t///2v//5v//1f//G///c///3v//q///2P//Bf//o////P//7f//Yf//LP//xv//WP//P///0f//Yv//M///yv//8f//d///E///sf//of//zP//D///FP//kP//9P//5f//Tv//Hf//ff//0P//+P//pv//CP//Cf//Pv//av//gv//4///VP//Bv//vP//KP//9v//lP//DP//aP//6f//y///p///Hv//qP//fv//9///3///BP//MP//Mf//lf//tP//H///iP//if//Wf//0///uf//+v8BRUUXAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MTo0MiswMDowMHZMi70AAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAADj0lEQVRIx5WWO2xURxSGvzN7H7a0AdFRkFSQBovKqcCyBF0kmlDS0SHRpkJKEYmGEBeENImFRJMoLlLk4caJrCguEDSguMEijYMQAu+uwfZ672v+FHe93nu9fnCmO3P+f87jn7nXGDIBNPiAD5limgk+oglsssoyf/E3/7FBAcZIEzKd0CXd1yslPve+ULm897kSvdJ9XdIJmfaBhzqnu1qTL5QrUVeb2tCGNtVVolyF5LWmuzqnUCPg47qsJalQqi2tq63W0GprXVtKVUjSki5rfIfC+rWP8xlf6GNPSoLf3RruDo6YCIet8CU/s21llCDiU77S6YJtMvZtEgJCxmlgz/mceVLDAY4Jbh4OL3cytinQaW4ygQMnOM4NJv2h8GEKD5Pc4LhwhFzgiifZA9fQqlMkeLjCBUJHk2s6VpBW4EIYITExIVYhMSClQMe4RjPgDNMixVfgJdhhgCjz0yDC8KQ0sGnOBFxUU2S1XsfENAaeBg5Hb4gCMsZQ0y46pnBFZQuiCrykiIkqnRAFOKYcZ0uC4fQj3J7+OyKsEleA46zjpMzXTnMjhmm4WlYeGScd8d7Q0VoY6Y8dvu6rzv0Qv3e0rFaxx48IFb52lsOg5XiGH67N8GQjCbKKVqABnmeOR+YdrgLJSGsUIq1pxeEwzyPHApkjqOWQ0KMYeAp6JLXzAxxkLDie8NRqMzYKenTpss02Xbr0KGpSjzB4yhNHh1nzAWFtZCKj119ZTakQEmCeWTqOlAUWjZhG7draYHRWu+YNYgwWWSB1iJfcsdcBcaWMHZK6fIQjJsBec4eXyBnkLDFjPiKCfUS0C4eICCv4miVyw4HBFj8xZ4oJD6QoH9UIE3PMsWXQF6FY5RtbbhCPuIdV9cU0sH+4x2p5kitrxfOYGVsPR3RieHgxIbbODI/xxoAADHJ+Y5Zk5w0cBQ+JIWGW38ltkNNOx8UaD2zR9V+jupTLV8nJFnnA2u73dahkg2W+5XkwshPl8PiXeyxbxV+ZO3/wvXWiWhll+hHW4Tv+tBpx1Xr8wK+WjhEMKIQRMIal/MKP9DjYhD7RQylRRy211VZLHSWS9FCT4ggmdFUvvLr9f4S2uvLSC109EhyEmrqtd4U21FZbGyqkd7qt5hEJQOiU5pXnequ3yqVc8zp1ZHif4rxWvFKl8tKKzr8XHIQCXfdvvLz8G11X8J4E/U7cUkst3Tqo+v8BGqkQrMMFpyAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUyOjAxKzAwOjAwKNkk2QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAD/0lEQVRIx5WVP2wcRRTGf29u9/44a5/Pd2cHEagIEgoFRYSQHMtSQkVJOsoICUVKi+gokFIgghubArAipTHCBVL448ZBFiI0caQ4whGKFRoTx3aS89k+fL7b3ZtHcb7zzdkOyWyzOzPf99773jezQsdQgAS9vMIIo7zJqwTAvyyzyG/8zj9UaIBw6FBUNKfn9Kquad3GsY001FAjja2Nta5relXPaU5FO1DSEd3nDT7kAwZiiaixS0gMeCTJkMbHUzaYYpK/iMQlUMjwLp8wHFNli01C3DhJ+snSgwd/8Dk32JV9AoUM7/Opvl6nRInQTa6lDkny5EkhS3zGD00KAYUk7/GFvrbDKtvoUSKhCH28xDHkAR8zQygIqOEtvtbTO6xQ4UiN25n08jLHkNt8xIJYo5DlEqdrrP4vvLlaYZUanOYSWcXgc4bzMSW2D9S9/7gU25SI4Txn8A0BF7SvSsmpXVES9FGgQB8Jh0RQSlTRPi4QeJxktEGZyIELOfKkSAAN6pQodwQQIsr04I1y0uOsBhFbXVoPUSS5B/BJkSbJupPjFoMkAjlrGMHUiBydsxTa8JaNCmTbfgCIqIFhxHDKml2HW8iR6uqGkCLn7FF2sYZThuMqobM5cwDeosg4MyEqHDekwDoLCcyhHjAknG8LkDJYugDW6XunuLaLELCGkuA7C3WiQyiUiLoz4yNQMtwXm3ZqjdiicYCgwZbjFUgjlvuGW8am8RynldnoomiwQdmxmkcaY7llmCXyCZwcYtZYp9qeqbLOGrETP8CHiFmPBe567wywje2wasgaFTL4QMQuOx2roBgG8OAuCx5lJs3bgclSdrKwVKhgWu3qckaWAGOZpGwImWXOp0i669gKYLHt9/34aYr4MMcsoUF5xBV5HDBIoqt9sve47UwwSIA85gqPUCMQc5MxY3MMwBEm2odDnhymwZfcJBYMCOzwPdOeFuh9JkXzRszjKdNMsyMtP6IsMy6LPRRJHkmhQJIiPcifTLDc3Gb2FLbMMyab/RSOOErNzQX6kU3GmMcKbQIQiPmZSannySKHngWhnzxSZ5JfiKVN2lJceco1mUtRJHOgDAUyFEmpzHGNp/v/1458BRb5igd9FLrOJ4BPgV74mwkWOxvrFCxwg28p5+nHdOSgGPrJQ5lv+NX1RbdiNab4KREOEbSVUISAIRIhP/IdNZ5FIPCQCe6kGdxraLN5g6ThDhM87L4tD/RMYJ5xVrIU9+7ABEWysMI4tw9etoc3/TpTUimQxWDIUkAqTHGd5x2KntAZjat6T+9pVTXWGT2hz41vUgzrktVN3VSruqTDLwQHRT29aJ9YtWqf6EX1XpAAFA30spa0pJc1OBr+H/Nbm042akI7AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MjoyOCswMDowMP9kZncAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAEJklEQVRIx5XVT2xc1RUG8N+9M2M79tgxJDLR1MHYjosQrdRFVFUKUSToqsuy6xJVqpDYVuy6qMSiKmSTdNHWQmKTqllUon+yIFRRVbohSAQRgRxRJXWwSQzGjpzYnsnMOyzsOPPGNoX7Nk9P9/vO+b7z5yVdJ6Bi2FEnnfI9j6vjrnlX/cu/3bSmQ7LnCZHikXguXo9b0SzarWIzNmIjNqNVFO1oxq14PZ6LRyJFFyp1Ra95ys/9zKPNtOmuVeta6DNoVN2A/vClc2Z97H4qEwQH/NjLTrSsWrTonnKcIQ0No/r4j99420Z6SBAc8FO/iu+u+Z8b1iVlpYEw6AkThqVrfu0vWxSJoM9P/LY49qWP3RL7mSQkRzzlUfkTv3RBK0lE9gO/j+PLPrQk7QvfNtqY7zskvecXrqQiBwe95Piaj/4vnCRZ8pE1jnvJwZDVPOP5phtu98BDKBSix87kthuaPO8ZtazuhRhZdb2kPYSaMVOmjKmVSJJw3aoY8YJ61YxTLQs25S549h2ThlTRds91CwoPa79pwaj+U2aqno36psVS9GTGMYM73+qGDbrWlWOyaFpfPT2bnYy8ZqOUfMOkoS7KZMikRknIhjWRncye7uQ7Jf0V44Z3+T9sXKXkwx2d7OnsSKT1nqv1PYqZ1Hto10VyJOsPnVLx+rsidZ+K/lJBO4L+rEg9gLZiT4JCu4cwUWTLyUAp1bs2SpEeZLbhbknagMRyNpeLsram21q7CFpua/Z4lQtz2bu5GFHbiZkkN833pNs272ZXq4eaEbnwbnYx3T9grCSiac6c1Z0vq+bMaZYEjDkg3Xex6ooP+n501C2drj5bN2fJQQPYdMeKdqlXK47q4wNXqlbMVn54ODfMl3qvbcnS9izYNacNh1UKs1aylosuDZgy0jO2WdLR2X7rho+YMsAlF7WysOjVvHTYjGpP+dL2Uy5nzYzD8pJXLYqcaHvH6UoxboI9OqAMZ8K4Ssdr3tFOMol7/ux8f0wa+1qKwJgn9IfzzruX2N4iYd6ZdHXUtKF9KQJDpo1KHzprfuta3tKqcNnpvNowsc8oQcWEhrzqtMuKLW/yA7u0/d1sbk5qSHvOQtIwKTfN+of2A2t3FmEKX3gjXdpKsldGYNS0oUiXvOGLh//Xh5tU4qrf+WTMpP5dGQyYMsZ/nXW1u7C5+1LibX+0MuGoSlcOoWLc46z4g3+W+yL3BNp0zt9qrWMO7TgRkkOOqbX81Z9s+jqCxKfOen/EkwbZ3sODnjTC+876tHdb9mYgcdkZC4+ZVgVV0x5jwRnv7V62uwjAm87ltUkNWd4q3ppz3vRNT4jxuBDt1Xgr3orViHZciPH4xvgtihNxrYjP4rMoIq7FiW8FJ0Q1Xiw+70Qnis/jxah+SwJC1OOVWI7leCXq+8O/AuFKp/3c1qOQAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1Mjo0MiswMDowMJ17ML4AAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAER0lEQVRIx5XVS2xV1xXG8d/evrbxC7CpMbVSECGg2qlRU5tXDEVNOmmHzazDqFIVKdOqsw4qZVA1RZGgg7ZWpEyoyqBS+qADgpxSOglYkIQE2aFCIuGNMcEOhsu9Z3WAgXts0yb7zI7O919nfevbeycNK6BJl2/YY69vWa8Tcy4445/+5VOz6iTLrhApuuPFeDOuxL167W4xF7fjdszF3aJei3txJd6MF6M7UjSoUkP1ZgN+4sd67qRZ110xYx5tuq3Tq0t7uOmgMWfdT2VA0Ob7fm503iUf+9iMcp1ugwb1a+PffuUd8+kxIGjzI7+ILTdMmHBLVu40UFht2LCvSVN+6c8PEImgxQ/9unjmgnFT6vLyJik02eJ71svn/Mxh1SQR2bf9rhi54B/OS0/y+KHRNvqB9fJJP3U6FTlY5VUjNxz9v3KS5LyjbjDiVatC1my3l+446ZNF8lAsPLEI8YmT7vCS3ZqzTi/HyosmRIM8FFbYbJttNltRgiRhwkWx0ss6Kzbbe8dHZhusC9mQYWu0oGrahA8VHs9+1kf6dey1ueKF6JxztlQ9222X7kfv1ui1yvES4qxd2jvTC9meIl/zecnnAdsb5A9itN2AaGjkc9cU2Z7s2Vq+Wuq/YsiaRdNI1hhSKflwVS17NltXTzMl73v1LBOlrEdvaR4z6sm6rDXUSoB2LctmoEV7CVATtGZF0lz62ar6soC6aqmxZokim846SoCbbpcqPfyz226WAB0y09lkpVhbAsyZMr8EMG/KXAmwVqUwmb3XVPRpa6iZfeCUakledcoHpai16dNUeC87ku6v9HQpqnOOedflhXfhsncdK9UPT1sp3Xek4rT323duNan26INsxjHn9enCrKs+VS3Vb7ZVO+87XTFjrLJ9Yx50WlNDG/edc25hL5BLySgM2qhSGDOTVR0x3mWHPkXJzCZZTU3WVDKv0GeHLsYdUc3CJa/naxs8r3XR+NLCUx7nCqM2yNe87pLIiZrj9jUXWw2zTALKcr5jSHPdbxxXSzKJL/zJoY4Ysam045bKwyYjOsIhh3yRWPAmXLA/nem3Q88TESH02KFf+tABFx58lh/0qnDCvnxr0PATthK0GDYo37LPCUXyCECi5m/GKveGfVNadi8kA4ZV7hnzd7XHmXnoeLjhrTTeY6evLzEz0G+nnkjj3nLj8f3akI/EGb917hnbdS4BdNpmE/9xwJnGwZaOnsQ7/mDmOUNaGhChxZDnmPF7R8u5WHx23XXQX1dUn7f+kRMh2WDUiqq/+KO7/hcg8ZkDTq31XasXRsdqe/RyygGfLb76lpyeiRP2u7jFTq2g1S5buGi/k0tvzuVv8rcdzLPbDGjSZMCIPOugt33ZFeKpOBy1y/FGvBGXI2pxOJ6KL61/gBiNqXpMxmTUI6Zi9CvJCVGJV4rrtahFcT1eicpXBBCiM16L6ZiO16LzyfL/AjzmtojnBFLlAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1Mjo1NCswMDowMDIBBRoAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAEXklEQVRIx5XVS2xdxR3H8c/MuX5g/CBGTQzkATIggQt1K7fNgzgI5YVDWmjaRdsdrRQhsa2666ISi6o0m6SLtu6CRYIS1Er0EdGYEKV1GwlbTaxGRYkCgWAiYuKH4kaxfX3PdOHg3HPttDBnNXPm9x39/vObmaCqJci0WGOzLb5orWb8xyVnnfQ3H5pWIVRpQkEe3OUrvq/Piko2G8shR1SXGvKsYtJRB/3TlBSWAhJ1HvFD39N+LUz40EVjptFipQes0a41mXBIv3eUQxGQuMNWP7Zp2rtO+YcrKov0JLPKRht0auHvfuZNN8ItQOIO3/KT9PCoYwaMiUV3EnIrbbPdauG8n/r9AiKQqNfn55UH3/GqIRXR8i2X+arvekR2wY8cNRcEUtTtV3nPv/3WiFhYubYluS/5gUfFYXudCXlMtHlRz6iD/1dOEI04aJQeL2pLojpP2HPNG4Zr5EmuoiJfyEcVYtgbrrHHE+pKmj2ft15wTF7lPUnu9LBVuOK864JbG5c7pkd3a3zeYMlDtkwbNCGrkke9drhXI2Zc9hd/lS8iogmDOrVt8VDJU6l5yqnC6tEe39CxKLjXal/wuwLilG9qbQ5PRZsr8QNXC8436KuSE3Tos6FQjas+UIk2R11z8X2panq9XvfV7EZwn171Vf3kfXNRV9QxH8YKYVnrnmWiFN1jrbxqZMx80BE1JLOFqS0al81Ao5ZCf1aiIcpDjeCG8rKAshs1wEAejWfaCm4/Nl6IzqfFHfdxoTJtMsajc/X5uoLXScOmlwCmDZss1Gad+ty56O26fJ3mqjUzJx03U5DPOO5kIWrN1qnLvR0NKN/t8SpAMOU1h723OPKew14zVWUgedzdlA2UnDHSuv5JQ8pVObviiBEPaMeEi86ZKWS13pNaGXGmZFJ/3dceixu9pVRViVmnnb55FsgK7iu2eExdrt9kNGfAiXa73F+ISZDJlJVlskL1c/fbpZ0TBsxFyWUvZ2NdntVUc/JvfdXbeafndMnGvOyyFAPzBu1ryHttY5kEFNPANr0aKn5h0HwQCVx32JG70k7d0v9AJEm3HdqSI464HrhZm+SS/eFsp11W3RaRJB2e0Sn8ywGXFqbFBbdyQ/ZlUxtt13hbQKPtNsqm7DMkDxYBBOb9SX/97E5fF5c9C9F6O9TN6vdn87cy82nNk6teCSc67Na5xEaSPGi3jhROeMXVsPi7Kh+Bs37pwpf1WbEEsMLTunnXAWert7Vw9QTe9BuTW/VqqEIkDXptZdKvHS9edrV314xD/tg096xHFyuRRF2e0zTnD16tOaa1gMCoA06v9R0rb3pnpW9bw2kHjNY+fUtuz8CQ/T7q8Ywm0GS3Hj6y3/DSl3P5l/x1h7Lpp61XUrLeTtm0Q173WVuSVqejaf5i2pv2pospzaejaXX6zPoFxKZ0vpKG0lCqpHQ+bfpccpJUSi/kn5RTOeWfpBdS6XMCSFJzeimNp/H0Umq+vfy/0JikOgfvvUIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUzOjA1KzAwOjAwM1Rr9AAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAADzElEQVRIx5WVTUxUVxiG33tnhmF0iJ0iCVF+NJpghTSUVNOoTTMrCS1qm4mJZVFSu+h048Jg2dCdSatb3TWkTaw2ISkbBY2waGBBJGmsoggkasEfyDhDsQjM33m6YGjnzgw4fmd1v++8z7nnnPecYykrkCSXylStD/WRGlQjv6RFTWtMv2tIM/pHacnK0lgOuaW31KQ2tSiQci3bcSstySUvPuNOa159+kV/6G9h5QOQPHpHX+lzvR21ZjWhO/pL85ICqtW7qlOlylFMl/WjxpXM/gtJCB+tDEOMQU6xEwtlNYudnGKQGMAwrfjIk7cxYRink20OaXbbRifjGJigLQuBKOEYU0mGacFeVy6ETQvDJGGKY5RkENg0MZpmiEMbitfaIYZIwyhN2KvjB+iG+xwuSi7EYe4DdBNAwkMrCy/owFU0wEUHL2CBVjwiQG+am1TkdSsjSDvtBCnLq1VwkzT0EhD7iUUI5y3WcfqZ5BnPmKSf43mLGyYCMfaLTpO4x/acXT/NQwxrYXjI6RxnbOceJkGnuJZI9eQUj/IgS76KeMDRnEF6SKS4Zqt+xR5Ttq88Cmm3nFa1tFsheRzmG9OKrXpblUlr2tG5TrvkUm64tEt1jsy0kpYqbXmNlh2Fcm1Wodiscsf3sozktWVsbXIUFhUvCIhr0fG9SbZkbEXdqnAUHuu5Y03W5vxcjx2ZCrmlqK0Jr9nrKER1XbE8QEzXFXVk9sprNGHrltfUa4uj1KNLeuXIvNIl9TgyW1Qvr9Et0czSU47k+KyaLm5nvGC4TRfVOT2O8BSWaLaoVG/8g9/0pVYcI/i0Tw2qlDSrMY3m7FSpuvWZvCP6VHg5SXqGUMFzV0JJwXyIGUhzEq+wqGEgyQB7ij7OexggCQPUYAnhppm5JS7gL0pexgWWYI5m3KzuMH6+JT3L1zmHqlCz+IY5SHEG///XqsUOrhgzSvA1CIsgoxjDZXZkvS4ImwPcSXKFmg0BNfxKEv7kAHbuy+ChnfkluihdV+7jO5Zhni/w5Jkdi62cNyuPCOEuKHcT4hFmhfNsxVJ+IBroh0EaCwLeYxAM/TSgdQLxCVNwscAdXcFFgCk+XlcuSZRyhtgC4ZyV8BFmAWJ0UKoNAaKKn4nfJ5j10LgIMg5xfqJqw/EziH2MwFVq/wPUchVghPdfK88g2niS5PuMtf38QBKe0FaUPGPtc7yMcAIPHk4QgZecy7JuEYgq+kjdpZFG7kKKviJmn4M4yGSKG9wgBZMcfCO5Vo0XNpEECUyEcObgviHCz1miRDm70ez/BYYI/lv2W3BZAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MzoxNiswMDowMM4WcfcAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]}],drawing_api:[{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]},{src:"data:image/png;base64,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",anchor:[.5,1]}]},hz=ot.getLogger("DrawingDOM"),dz={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPdrawing"),i.className="GPwidget gpf-widget",i},_createShowDrawingPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowDrawingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowDrawingPicto gpf-btn gpf-btn-icon-drawing fr-btn",e.title=this.options.labels.control,e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowDrawingClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowDrawingClick(t)}),e},_createDrawingPanelElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPdrawingPanel"),i.className="GPpanel gpf-panel fr-modal",i},_createDrawingPanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createDrawingToolsDivSections:function(){var i=document.createElement("div");return i.className="gpf-panel__content fr-modal__content",i},_createDrawingPanelHeaderElement:function(){var i=document.createElement("div");i.className="GPpanelHeader gpf-panel__header fr-modal__header";var e=document.createElement("div");e.className="GPpanelTitle gpf-panel__title fr-modal__title",e.innerHTML=this.options.controlLabel||"Annoter la carte",i.appendChild(e);var t=document.createElement("button");t.id=this._addUID("GPdrawingPanelClose"),t.className="GPpanelClose GPdrawingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",t.title="Fermer le panneau";var n=this;t.addEventListener?t.addEventListener("click",function(){document.getElementById(n._addUID("GPshowDrawingPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(n._addUID("GPshowDrawingPicto")).click()});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",t.appendChild(r),i.appendChild(t),i},_createDrawingToolsSections:function(){var i=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&i.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&i.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&i.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),i},_createDrawingToolSection:function(i,e){var t=document.createElement("div");t.className="drawing-tool-section";var n=document.createElement("p");n.className="drawing-tool-section-title",n.innerHTML=i,t.appendChild(n);var r=document.createElement("ul");r.className="drawing-tools-flex-display";var s=this;function o(c){s._handleDOMToolClick(c,this.id,s),s._handleToolClick(c,this.id,s)}for(var a in this.dtOptions)if(this.dtOptions[a].panel===e){var l=document.createElement("li");l.className="drawing-tool",l.id=this._addUID("drawing-tool-"+this.dtOptions[a].id),l.title=this.dtOptions[a].label,l.addEventListener("click",o),r.appendChild(l)}return t.appendChild(r),t},_createSavingSection:function(i,e){var t=document.createElement("div");t.className="drawing-tool-section drawing-tools-flex-display";var n=document.createElement("button");n.title=e,n.className="tool-form-submit drawing-button",n.id=this._addUID("drawing-export"),n.type="button",n.textContent=i;var r=this;return n.onclick=function(){r.onExportFeatureClick()},t.appendChild(n),t},_createMarkersChooser:function(i){var e=document.createElement("li");e.className=i.className;for(var t=0;t<this.options.markersList.length;t++){var n=document.createElement("input");n.type="radio",n.name="marker",n.id=this._addUID("marker-"+t),n.value=this.options.markersList[t].src,n.className="marker-input-radio",i.defaultValue===n.value&&(n.checked=!0),e.appendChild(n);var r=document.createElement("label");r.className="marker-label",r.setAttribute("for",n.id);var s=document.createElement("img");s.src=n.value,r.appendChild(s),e.appendChild(r)}return e},_createStylingElement:function(i){var e=document.createElement("li");e.className=i.className;var t=document.createTextNode(i.label);e.appendChild(t);var n=document.createElement("input");try{n.type=i.type}catch{n.type="text"}return n.id=i.id,n.value=i.defaultValue,i.title&&(n.title=i.title),i.checked!==void 0&&(n.checked=i.checked),i.min!==void 0&&(n.min=i.min),i.max!==void 0&&(n.max=i.max),i.step!==void 0&&(n.step=i.step),e.appendChild(n),e},_createStylingDiv:function(i){var e=document.createElement("div");e.className="gp-styling-div";var t=document.createElement("ul"),n=null,r=i.geomType.toLowerCase();switch(r){case"point&text":case"point":n=this._createMarkersChooser({className:"gp-styling-option",defaultValue:i.initValues.markerSrc}),t.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.markerSize,title:"petit, moyen ou grand",id:this._addUID("markerSize"),min:5,max:15,step:5,defaultValue:i.initValues.markerSize*10}),t.appendChild(n),i.initValues.markerCustom,r==="point&text"&&(n=this._createStylingElement({type:"checkbox",className:"gp-styling-option",label:this.options.labels.labelDisplay,id:this._addUID("labelDisplay"),checked:i.initValues.labelDisplay,defaultValue:i.initValues.labelDisplay}),t.appendChild(n));break;case"text":n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:i.initValues.fillColor}),t.appendChild(n),n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:i.initValues.strokeColor}),t.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1  10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:i.initValues.strokeWidth}),t.appendChild(n);break;case"line":n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:i.initValues.strokeColor}),t.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1  10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:i.initValues.strokeWidth}),t.appendChild(n);break;case"polygon":n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:i.initValues.strokeColor}),t.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1  10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:i.initValues.strokeWidth}),t.appendChild(n),n=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:i.initValues.fillColor}),t.appendChild(n),n=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.fillOpacity,title:"0 (transparent)  100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:i.initValues.fillOpacity*10}),t.appendChild(n);break;default:hz.log("Unhandled geometry type for styling.")}e.appendChild(t);var s=document.createElement("input");s.type="button",s.className="gp-styling-button",s.value=this.options.labels.applyToObject,s.onclick=function(){i.applyFunc.call(this,"apply")},e.appendChild(s);var o=document.createElement("input");o.type="button",o.value=this.options.labels.setAsDefault,o.className="gp-styling-button",o.onclick=function(){i.applyFunc.call(this,"default")},e.appendChild(o);var a=document.createElement("input");return a.type="button",a.className="gp-styling-button closer",a.onclick=function(){i.applyFunc.call(this,"cancel")},e.appendChild(a),e},_createLabelDiv:function(i){var e=document.createElement("div");e.className="gp-label-div";var t=null;if(i.geomType==="Text"?(t=document.createElement("input"),t.type="text",t.className="gp-input-label-style"):(t=document.createElement("textArea"),t.rows=2,t.cols=40,t.className="gp-textarea-att-label-style"),i.text&&(t.value=i.text),t.autocomplete="off",t.placeholder=i.placeholder,t.id=i.inputId,e.appendChild(t),t.onblur=function(){i.applyFunc.call(this,i.key,t.value,!0)},t.onkeyup=function(o){i.geomType==="Text"&&o.keyCode===13&&i.applyFunc.call(this,i.key,t.value,!0),o.keyCode===27&&i.applyFunc.call(this,i.key,t.value,!1)},i.measure&&i.geomType!=="Text"){var n=document.createElement("input");n.type="text",n.readonly=!0,n.className="gp-input-measure-style",n.value=i.measure,e.appendChild(n)}if(i.geomType!=="Text"){var r=document.createElement("input");r.type="button",r.className="gp-styling-button",r.value=this.options.labels.saveDescription,r.onclick=function(){i.applyFunc.call(this,i.key,t.value,!0)},e.appendChild(r);var s=document.createElement("input");s.type="button",s.className="gp-styling-button closer",s.onclick=function(){i.applyFunc.call(this,i.key,t.value,!1)},e.appendChild(s)}return e},_handleDOMToolClick:function(i,e,t){for(var n in t.dtOptions){var r=t._addUID("drawing-tool-"+t.dtOptions[n].id),s=document.getElementById(r);if(r!==e){s.className="drawing-tool",t.dtOptions[n].active=!1;continue}t.dtOptions[n].active?s.className="drawing-tool":s.className="drawing-tool drawing-tool-active",t.dtOptions[n].active=!t.dtOptions[n].active}}},zi=ot.getLogger("Drawing"),_i,Ax=(_i=class extends Xn{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof _i))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this._initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){super.setMap(e),this.getMap()&&this.eventKey&&gi(this.eventKey),e!=null&&(this.options.position&&this.setPosition(this.options.position),this.draggable&&Ro.dragElement(this._drawingPanel,this._drawingPanelHeader,this.options.position?null:e.getTargetElement()),this.collapsed||this._showDrawingButton.setAttribute("aria-pressed",!0),this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",t=>{t.element===this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))}))}exportFeatures(){var e=null;if(Xn.prototype.getMap.call(this)==null)return zi.log("Impossible to export : control isn't attached to any map."),e;if(!this.layer)return zi.log("Impossible to export : no layer is hosting features."),e;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return zi.log("Impossible to export : no features found."),e;this.featuresCollectionSelected&&this.featuresCollectionSelected.clear();var t=null;switch(this.getExportFormat()){case"KML":t=new _h({writeStyles:!0});break;case"GPX":t=new Ch({});break;case"GEOJSON":t=new Dr({});break}if(!t)return zi.log("Impossible to export : format unknown !?"),e;var n=this.layer.getSource().getProjection();return n=n||this.getMap().getView().getProjection(),e=t.writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:n}),e}setCollapsed(e){if(e===void 0){zi.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingButton.click())}setExportName(e){this._exportName=e}getExportName(){return this._exportName}setExportFormat(e){switch(this._exportFormat=e?e.toUpperCase():"KML",e.toUpperCase()){case"KML":this._exportExt=".kml",this._exportMimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this._exportExt=".gpx",this._exportMimeType="application/gpx+xml";break;case"GEOJSON":this._exportExt=".geojson",this._exportMimeType="application/geo+json";break;default:this._exportFormat="KML";break}}getExportFormat(){return this._exportFormat}setLayer(e){if(!e){this.layer=null;return}if(!(e instanceof Di)){zi.log("no valid layer given for hosting drawn features.");return}var t=this.getMap().getLayers();if(t){var n=!1;t.forEach(r=>{r===e&&(zi.trace("layer already in map. Not adding."),n=!0)}),n||this.getMap().addLayer(e),e.getSource().getFeatures().forEach(r=>{var s=r.getStyle();if(typeof s=="function"){var o=r.getStyleFunction();if(o){var a=o.call(this,r,0);a&&a.length!==0&&r.setStyle(Array.isArray(a)?a[0]:a)}}}),this.layer=e,this.getMap().getControls().forEach(r=>{if(r instanceof gs){var s=this.layer.gpLayerId;r._layers[s].title===s&&r.addLayer(this.layer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}}getLayer(){return this.layer}getContainer(){return this._container}_getsMarkersOptionsFromSrc(e){for(var t=null,n=0;n<this.options.markersList.length;n++)if(e&&this.options.markersList[n].src===e)return t=this.options.markersList[n],t;return t}_getIconStyleOptions(e){var t={};return Object.keys(e).forEach(n=>{switch(n){case"src":case"size":case"scale":case"color":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":t[n]=e[n];break}}),t}_initialize(e){this._uid=Xe.generate(),this._exportName="Croquis",this._exportFormat="KML",this._exportMimeType="application/vnd.google-earth.kml+xml",this._exportExt=".kml",e=e||{},this.options=e,this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(_i.DefaultTools).forEach(t=>{this.options.tools.hasOwnProperty(t)||(this.options.tools[t]=_i.DefaultTools[t])}),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(_i.DefaultCursorStyle).forEach(t=>{this.options.cursorStyle.hasOwnProperty(t)||(this.options.cursorStyle[t]=_i.DefaultCursorStyle[t])}),this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this.options.markersList=e.markersList||uz.drawing_api,this.options.labels||(this.options.labels={}),Object.keys(_i.DefaultLabels).forEach(t=>{this.options.labels.hasOwnProperty(t)||(this.options.labels[t]=_i.DefaultLabels[t])}),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(_i.DefaultStyles).forEach(t=>{if(!e.defaultStyles.hasOwnProperty(t)){this.options.defaultStyles[t]=_i.DefaultStyles[t];return}if(t==="polyFillOpacity"&&(e.defaultStyles[t]<0||e.defaultStyles[t]>1)){zi.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),this.options.defaultStyles[t]=_i.DefaultStyles[t];return}if(t==="strokeWidth"||t==="polyStrokeWidth"){var n=parseInt(e.defaultStyles[t],10);if(isNaN(n)||n<0){zi.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.strokeWidth. Must be a positive interger value."),this.options.defaultStyles[t]=_i.DefaultStyles[t];return}this.options.defaultStyles[t]=n}if(t==="markerSize"){var r=parseFloat(e.defaultStyles[t]);if(isNaN(r)||r<0){zi.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.markerSize. Must be a positive value."),this.options.defaultStyles[t]=_i.DefaultStyles[t];return}this.options.defaultStyles[t]=r}}),this.interactionCurrent=null,this.interactionSelectEdit=null,this.featuresCollectionSelected=null,this.stylingOvl=null,this.popupOvl=null,this.layer=null,this.options.layer&&this.options.layer instanceof Di&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})}_createEmptyLayer(){var e=new bi,t=new Di({source:new gn({features:e})});t.gpResultLayerId="drawing",this.setLayer(t)}_detectSupport(){var e=!0,t=window.navigator.userAgent.toLowerCase();return(t.indexOf("iphone")!==-1||t.indexOf("ipod")!==-1||t.indexOf("ipad")!==-1||t.indexOf("android")!==-1||t.indexOf("mobile")!==-1||t.indexOf("blackberry")!==-1||t.indexOf("tablet")!==-1||t.indexOf("phone")!==-1||t.indexOf("touch")!==-1)&&(e=!1),(t.indexOf("msie")!==-1||t.indexOf("trident")!==-1)&&(e=!0),e}_initContainer(){var e=this._createMainContainerElement(),t=this._showDrawingButton=this._createShowDrawingPictoElement();e.appendChild(t);var n=this._drawingPanel=this._createDrawingPanelElement(),r=this._createDrawingPanelDivElement();n.appendChild(r);var s=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();r.appendChild(s);var o=this._createDrawingToolsDivSections();r.appendChild(o);for(var a=this._createDrawingToolsSections(),l=0;l<a.length;l++)o.appendChild(a[l]);return e.appendChild(n),e}_drawEndFeature(e,t){var n=null;switch(t){case"Point":n=new Ee({image:new Qt(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":n=new Ee({stroke:new je({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":n=new Ee({fill:new $e({color:Le.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new je({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})});break}if(e.setStyle(n),this._updateMeasure(e,t),this.options.popup.display){var r=this,s=function(u,h,d){if(r.getMap().removeOverlay(r.popupOvl),r.popupOvl=null,d&&h&&h.trim().length>0){var f={};f[u]=h.replace(/\n/g,"<br>"),e.setProperties(f)}},o=null,a=!0,l=this.options.popup.function;l&&typeof l=="function"&&(o=l.call(r,{feature:e,geomType:t,closeFunc:function(){s(null,!1)},saveFunc:function(u){s(u,!0)}}),o&&(a=!1,o.tabIndex=-1,o.onblur=function(){r.getMap().removeOverlay(r.popupOvl),r.popupOvl=null})),a&&(o=this._createLabelDiv({applyFunc:s,inputId:this._addUID("att-input"),placeholder:"Saisir une description...",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:t,key:"description"})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new jn({element:o,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var c=e.getGeometry().getExtent();this.popupOvl.setPosition([(c[0]+c[2])/2,(c[1]+c[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}}_createRemoveInteraction(){var e=new Tr({layers:[this.layer],style:!1});return e.on("select",t=>{!t||!t.selected||t.selected.length===0||(this.layer.getSource().removeFeature(t.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))}),e}_createStylingInteraction(){var e=new Tr({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),!(!t||!t.selected||t.selected.length===0)){var n=null,r=null,s=null,o=null,a={},l=t.selected[0].getGeometry(),c=t.selected[0].getStyle();if(l instanceof Ki||l instanceof Us){if(c&&c.getImage()&&typeof c.getImage().getSrc=="function"&&c.getImage().getSrc()!==this.options.defaultStyles.textIcon1x1.src&&(o="Point",typeof c.getImage().getSrc=="function"?(a.markerSrc=c.getImage().getSrc(),a.markerSize=c.getImage().getScale()||1,a.markerAnchor=c.getImage().getAnchor(),c.getImage().getColor()?(n=c.getImage().getColor(),Array.isArray(n)?n="rgba("+n.join()+")":a.markerColor=n,r=Le.isRGB(n)?Le.rgbaToHex(n):{hex:n,opacity:1},a.markerColor=r.hex,a.markerOpacity=r.opacity):a.markerColor=this.options.markersList[0].color||"#ffffff"):(a.markerSrc=this.options.markersList[0].src,a.markerSize=this.options.markersList[0].scale||1,a.markerColor=this.options.markersList[0].color||"#ffffff",a.markerAnchor=this.options.markersList[0].anchor),a.markerCustom=!this._getsMarkersOptionsFromSrc(a.markerSrc)),c&&c.getText()){var u=t.selected[0].getProperties().name;if(u&&(o=o==="Point"?"Point&Text":"Text",c.getText().getStroke()&&c.getText().getStroke().getColor()&&(n=c.getText().getStroke().getColor(),Array.isArray(n)?n="rgba("+n.join()+")":a.strokeColor=n,r=Le.isRGB(n)?Le.rgbaToHex(n):{hex:n,opacity:1},a.strokeColor=r.hex,a.strokeOpacity=r.opacity),c.getText().getStroke()&&c.getText().getStroke().getWidth()&&(a.strokeWidth=c.getText().getStroke().getWidth()),c.getText().getFill()&&c.getText().getFill().getColor()&&(n=c.getText().getFill().getColor(),Array.isArray(n)?n="rgba("+n.join()+")":a.fillColor=n,r=Le.isRGB(n)?Le.rgbaToHex(n):{hex:n,opacity:1},a.fillColor=r.hex,a.fillOpacity=r.opacity),a.strokeColor=a.hasOwnProperty("strokeColor")?a.strokeColor:this.options.defaultStyles.textStrokeColor,a.strokeWidth=a.hasOwnProperty("strokeWidth")?a.strokeWidth:this.options.defaultStyles.textStrokeWidth,a.fillColor=a.hasOwnProperty("fillColor")?a.fillColor:this.options.defaultStyles.textFillColor,o==="Point&Text")){var h=c.getText().getText();h||c.getText().setText(u);var d=t.selected[0].get("checked");a.labelDisplay=d===void 0?this.options.defaultStyles.labelDisplay:d}}}else l instanceof Ji||l instanceof hr?(o="Line",c&&c.getStroke()&&(c.getStroke().getWidth()&&(a.strokeWidth=c.getStroke().getWidth()),c.getStroke().getColor()&&(n=c.getStroke().getColor(),Array.isArray(n)?n="rgba("+n.join()+")":a.strokeColor=n,r=Le.isRGB(n)?Le.rgbaToHex(n):{hex:n,opacity:1},a.strokeColor=r.hex,a.strokeOpacity=r.opacity)),a.strokeWidth=a.hasOwnProperty("strokeWidth")?a.strokeWidth:this.options.defaultStyles.strokeWidth,a.strokeColor=a.hasOwnProperty("strokeColor")?a.strokeColor:this.options.defaultStyles.strokeColor):(l instanceof wi||l instanceof jr)&&(o="Polygon",c&&c.getStroke()&&(c.getStroke().getWidth()&&(a.strokeWidth=c.getStroke().getWidth()),c.getStroke().getColor()&&(n=c.getStroke().getColor(),Array.isArray(n)?n="rgba("+n.join()+")":a.strokeColor=n,r=Le.isRGB(n)?Le.rgbaToHex(n):{hex:n,opacity:1},a.strokeColor=r.hex,a.strokeOpacity=r.opacity)),c&&c.getFill()&&c.getFill().getColor()&&(n=c.getFill().getColor(),Array.isArray(n)?n="rgba("+n.join()+")":a.fillColor=n,r=Le.isRGB(n)?Le.rgbaToHex(n):{hex:n,opacity:1},a.fillColor=r.hex,a.fillOpacity=r.opacity),a.strokeWidth=a.hasOwnProperty("strokeWidth")?a.strokeWidth:this.options.defaultStyles.polyStrokeWidth,a.strokeColor=a.hasOwnProperty("strokeColor")?a.strokeColor:this.options.defaultStyles.polyStrokeColor,a.fillColor=a.hasOwnProperty("fillColor")?a.fillColor:this.options.defaultStyles.polyFillColor,a.fillOpacity=a.hasOwnProperty("fillOpacity")?a.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!o){zi.log("Unhandled geometry type for styling.");return}var f=this,g=function(m){if(m==="cancel"){f.getMap().removeOverlay(s);return}var v=m!=="apply",y=document.getElementById(f._addUID("fillColor")),A=document.getElementById(f._addUID("fillOpacity")),_=document.getElementById(f._addUID("strokeColor")),C=document.getElementById(f._addUID("strokeWidth")),I=document.getElementById(f._addUID("markerSize"));switch(o.toLowerCase()){case"text":v?(f.options.defaultStyles.textStrokeColor=_.value,f.options.defaultStyles.textStrokeWidth=C.value,f.options.defaultStyles.textFillColor=y.value):t.selected[0].setStyle(new Ee({text:new Nr({font:"16px sans",textAlign:"left",text:c.getText().getText(),fill:new $e({color:y.value}),stroke:new je({color:_.value,width:parseInt(C.value,10)})})}));break;case"point&text":case"point":var b=document.querySelector("input[type='checkbox']"),S=null,R=parseInt(I.value,10)/10,P=document.querySelector("input[name='marker']:checked");if(P&&(S=f._getsMarkersOptionsFromSrc(P.value),S.scale=R),v){if(f.options.defaultStyles.markerSize=R,f.options.markersList.length>1){var w=f.options.markersList.findIndex(function(k){return k===S});w>0&&(f.options.markersList.splice(w,1),f.options.markersList.splice(0,0,S))}o.toLowerCase()==="point&text"&&(f.options.defaultStyles.textStrokeColor=a.strokeColor,f.options.defaultStyles.textStrokeWidth=a.strokeWidth,f.options.defaultStyles.textFillColor=a.fillColor,f.options.defaultStyles.labelDisplay=a.labelDisplay)}else{var x={};o.toLowerCase()==="point&text"&&(t.selected[0].set("checked",b.checked),x={text:new Nr({font:"16px sans",textAlign:"left",text:b.checked?t.selected[0].get("name"):"",fill:new $e({color:a.fillColor}),stroke:new je({color:a.strokeColor,width:parseInt(a.strokeWidth,10)})})}),S?t.selected[0].setStyle(new Ee(Object.assign({image:new Qt(f._getIconStyleOptions(S))},x))):t.selected[0].setStyle(new Ee(Object.assign({image:new Qt({src:a.markerSrc,anchor:a.markerAnchor,anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels",scale:R})},x)))}break;case"line":v?(f.options.defaultStyles.strokeColor=_.value,f.options.defaultStyles.strokeWidth=parseInt(C.value,10)):t.selected[0].setStyle(new Ee({stroke:new je({width:parseInt(C.value,10),color:_.value})}));break;case"polygon":var D=parseInt(A.value,10)/10;v?(f.options.defaultStyles.polyStrokeColor=_.value,f.options.defaultStyles.polyFillColor=y.value,f.options.defaultStyles.polyFillOpacity=D,f.options.defaultStyles.polyStrokeWidth=parseInt(C.value,10)):t.selected[0].setStyle(new Ee({stroke:new je({width:parseInt(C.value,10),color:_.value}),fill:new $e({color:Le.hexToRgba(y.value,D)})}));break}v||f.getMap().removeOverlay(s)},p=this._createStylingDiv({geomType:o,initValues:a,applyFunc:g});s=new jn({element:p,positioning:"top-center"}),this.getMap().addOverlay(s),s.setPosition(t.mapBrowserEvent.coordinate),this.stylingOvl=s,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_createLabelInteraction(){var e=new Tr({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),!(!t||!t.selected||t.selected.length===0)){var n=null,r=null,s=null,o=null,a=t.selected[0].getGeometry(),l=t.selected[0].getStyle();if(a instanceof Ki||a instanceof Us){var c=t.selected[0].getProperties().name;l&&l.getText()&&c?r="Text":l&&l.getImage()&&(r="Point")}else if(a instanceof Ji||a instanceof hr)r="Line";else if(a instanceof wi||a instanceof jr)r="Polygon";else{zi.log("Geometry type for styling not supported .");return}if(!r){zi.log("Unhandled geometry type for styling.");return}if(r==="Text")s=l.getText().getText();else{var u=t.selected[0].getProperties();u&&(u.hasOwnProperty("description")||u.hasOwnProperty("desc"))&&(s=u.description||u.desc),u&&u.hasOwnProperty("measure")&&(o=u.measure)}var h=this,d=function(g,p,m){if(h.getMap().removeOverlay(n),!!m){var v=t.selected[0];if(r==="Text"){var y=v.getStyle();y.getText().setText(p),v.setProperties({name:p}),v.setStyle(y);return}var A={};A[g]=p.replace(/\n/g,"<br>"),v.setProperties(A)}},f=this._createLabelDiv({applyFunc:d,inputId:this._addUID("label-input"),placeholder:r==="Text"?"Saisir un label...":"Saisir une description...",text:s,key:"description",measure:this.options.tools.measure?o:null,geomType:r});n=new jn({element:f,positioning:"top-center"}),this.getMap().addOverlay(n),n.setPosition(t.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=n,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_updateMeasure(e,t){zi.log(e);var n=null,r=this.getMap().getView().getProjection();function s(C,I){I=I||2;var b=Math.pow(10,I);return Math.round(C*b)/b}var o=t||e.getProperties().type;switch(o){case"Point":var a=e.getGeometry().getCoordinates(),l=Et(a,r,"EPSG:4326");n="lon : ",n+=s(l[0],4)+"",n+=" / ",n+="lat : ",n+=s(l[1],4)+"";break;case"LineString":for(var c=0,u=e.getGeometry().getCoordinates(),h=0,d=u.length-1;h<d;++h){var f=Et(u[h],r,"EPSG:4326"),g=Et(u[h+1],r,"EPSG:4326");c+=Oa(f,g)}n=c>1e3?s(c/1e3,3)+" km":s(c,3)+" m";break;case"Polygon":var p=0,m=e.getGeometry().clone(),v=m.getLinearRing(0).getCoordinates();p=Math.abs(bf(new wi([v])));var y=m.getLinearRings();if(y.length>1)for(var A=1;A<y.length;A++){var _=y[A].getCoordinates();p-=Math.abs(bf(new wi([_])))}n=p>1e6?s(p/1e6,3)+" km^2":s(p,2)+" m^2";break}e.setProperties({measure:n,type:o})}_handleToolClick(e,t,n){var r=n.getMap();if(!r){zi.trace("Drawing control not attached to any map.");return}switch(ds.unset(r,{current:"Drawing"}),n.interactionCurrent&&(r.removeInteraction(n.interactionCurrent),n.interactionCurrent=null),n.interactionSelectEdit&&(r.removeInteraction(n.interactionSelectEdit),n.interactionSelectEdit=null),n.popupOvl&&(n.getMap().removeOverlay(n.popupOvl),n.popupOvl=null),this.layer||this._createEmptyLayer(),t){case this._addUID("drawing-tool-point"):n.dtOptions.points.active&&(n.interactionCurrent=new yr({stopClick:!0,source:n.layer.getSource(),style:new Ee({image:new Qt(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),n.interactionCurrent.on("drawend",function(s){n._drawEndFeature(s.feature,"Point")},n));break;case this._addUID("drawing-tool-line"):n.dtOptions.lines.active&&(n.interactionCurrent=new yr({stopClick:!0,source:n.layer.getSource(),style:new Ee({image:new Ei({radius:this.options.cursorStyle.radius,stroke:new je({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new $e({color:this.options.cursorStyle.fillColor})}),stroke:new je({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString"}),n.interactionCurrent.on("drawend",function(s){n._drawEndFeature(s.feature,"LineString")},n));break;case this._addUID("drawing-tool-polygon"):n.dtOptions.polygons.active&&(n.interactionCurrent=new yr({stopClick:!0,source:n.layer.getSource(),style:new Ee({image:new Ei({radius:this.options.cursorStyle.radius,stroke:new je({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new $e({color:this.options.cursorStyle.fillColor})}),stroke:new je({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new $e({color:Le.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),n.interactionCurrent.on("drawend",function(s){n._drawEndFeature(s.feature,"Polygon")},n));break;case this._addUID("drawing-tool-holes"):n.dtOptions.holes.active&&(n.interactionSelectEdit=new Tr({stopClick:!0,condition:hy,layers:[this.layer]}),n.interactionSelectEdit.setProperties({name:"Drawing",source:n}),r.addInteraction(n.interactionSelectEdit),n.interactionCurrent=new yr({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Ee({image:new Ei({radius:this.options.cursorStyle.radius,stroke:new je({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new $e({color:this.options.cursorStyle.fillColor})}),stroke:new je({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new $e({color:Le.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),n.interactionCurrent.on("drawstart",function(s){},n),n.interactionCurrent.on("drawend",function(s){var o=n.interactionSelectEdit.getFeatures();if(o.getLength()){for(var a=o.item(0),l=s.feature.getGeometry().getCoordinates()[0],c=!0,u=0;u<l.length;u++)if(!a.getGeometry().intersectsCoordinate(l[u])){c=!1;break}if(!c)return;a.getGeometry().appendLinearRing(new fc(l)),s.feature=a,n._drawEndFeature(s.feature,"Polygon")}},n));break;case this._addUID("drawing-tool-text"):n.dtOptions.text.active&&(n.interactionCurrent=new yr({stopClick:!0,source:n.layer.getSource(),style:new Ee({image:new Ei({radius:this.options.cursorStyle.radius,stroke:new je({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new $e({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),n.interactionCurrent.on("drawend",s=>{var o=null,a=function(c,u,h){if(n.getMap().removeOverlay(o),!h){n.layer.getSource().removeFeature(s.feature);return}var d={};d[c]=u,s.feature.setProperties(d),s.feature.setStyle(new Ee({image:new Qt(n._getIconStyleOptions(n.options.defaultStyles.textIcon1x1)),text:new Nr({textAlign:"left",font:"16px sans",text:u,fill:new $e({color:n.options.defaultStyles.textFillColor}),stroke:new je({color:n.options.defaultStyles.textStrokeColor,width:3})})}))},l=this._createLabelDiv({applyFunc:a,inputId:n._addUID("label-input"),geomType:"Text",key:"name",placeholder:"Saisir un label..."});o=new jn({element:l,positioning:"top-center"}),n.getMap().addOverlay(o),o.setPosition(s.feature.getGeometry().getCoordinates()),document.getElementById(this._addUID("label-input")).focus()}));break;case this._addUID("drawing-tool-edit"):n.dtOptions.edit.active&&(this.featuresCollectionSelected=new bi,n.interactionSelectEdit=new Tr({condition:dy,layers:[this.layer],features:this.featuresCollectionSelected}),n.interactionSelectEdit.on("select",s=>{}),n.interactionSelectEdit.setProperties({name:"Drawing",source:n}),r.addInteraction(n.interactionSelectEdit),n.interactionCurrent=new Ey({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Ee({image:new Ei({radius:this.options.cursorStyle.radius,stroke:new je({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new $e({color:this.options.cursorStyle.fillColor})})})}),n.interactionCurrent.on("modifyend",s=>{var o=s.features.item(0);n._updateMeasure(o)}));break;case this._addUID("drawing-tool-display"):n.dtOptions.display.active&&(n.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):n.dtOptions.tooltip.active&&(n.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):n.dtOptions.remove.active&&(n.interactionCurrent=n._createRemoveInteraction());break;default:zi.trace("unhandled tool type")}n.interactionCurrent&&(n.interactionCurrent.setProperties({name:"Drawing",source:this}),r.addInteraction(n.interactionCurrent)),zi.log("interactions",r.getInteractions())}onShowDrawingClick(){var e=this.getMap();ds.unset(e);var t=this._showDrawingButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed");for(var n in this.dtOptions)if(this.dtOptions.hasOwnProperty(n)&&this.dtOptions[n].active){var r=this._addUID("drawing-tool-"+this.dtOptions[n].id);document.getElementById(r).className="drawing-tool",this.dtOptions[n].active=!1}}onExportFeatureClick(){var e=this.exportFeatures();if(e){var t=document.createElement("a"),n="utf-8";if(t.setAttribute("href","data:"+this._exportMimeType+";charset="+n+","+encodeURIComponent(e)),t.setAttribute("download",this.getExportName()+this._exportExt),document.createEvent){var r=document.createEvent("MouseEvents");r.initEvent("click",!0,!0),t.dispatchEvent(r)}else t.click()}}},Ko(_i,"DefaultTools",{points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1}),Ko(_i,"DefaultLabels",{control:"Annoter la carte",creatingTools:"Outils de cration",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"Crer des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"Outils d'dition",edit:"Editer les tracs",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer  l'objet",saveDescription:"Enregistrer",setAsDefault:"Dfinir par dfaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacit du remplissage : ",markerSize:"Taille du pictogramme : ",markerColor:"Couleur du pictogramme : ",labelDisplay:"Afficher le label : "}),Ko(_i,"DefaultStyles",{textFillColor:"#000000",textStrokeColor:"#FFFFFF",textStrokeWidth:6,textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#ffffff",polyFillOpacity:.4,polyStrokeColor:"#ffcc33",polyStrokeWidth:4,strokeColor:"#ffcc33",strokeWidth:4,markerSize:1,markerColor:"#ffcc33",labelDisplay:!0}),Ko(_i,"DefaultCursorStyle",{radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"}),_i);Object.assign(Ax.prototype,dz);window.ol&&window.ol.control&&(window.ol.control.Drawing=Ax);var kp=ot.getLogger("LocationSelectorDOM"),fz={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.className=this._addUID("GPlocationPoint"),i.className+=" GPwidget gpf-widget",i},_createLocationPointElement:function(i,e){var t=document.createElement("div");return t.id=this._addUID("GPlocationPoint_"+i),t.className=e?"GPflexInput GPlocationStageFlexInput gpf-flex":"GPflexInput GPelementHidden gpf-flex gpf-hidden",t.style.cssText="",t},_createLocationPointLabelElement:function(i,e){var t=this,n=document.createElement("button");return n.id=this._addUID("GPlocationOriginLabel_"+i),n.innerHTML=e,n.className="GPlocationOriginLabel gpf-btn gpf-btn-icon-label fr-btn fr-btn--secondary",n.addEventListener("click",function(r){for(var s=Xe.index(this.id),o=document.getElementsByClassName(t._addUID("GPlocationPoint")),a=0;a<o.length;a++){var l=o[a].childNodes[0].id,c=Xe.index(l);document.getElementById(t._addUID("GPlocationPoint_"+c)).style.cssText=""}document.getElementById(t._addUID("GPlocationOriginCoords_"+s)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+s)).value="",document.getElementById(t._addUID("GPlocationPoint_"+s)).style.cssText="",document.getElementById(t._addUID("GPlocationOriginPointer_"+s)).checked=!1,document.getElementById(t._addUID("GPlocationOrigin_"+s)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(t._addUID("GPlocationOriginCoords_"+s)).className="GPelementHidden gpf-hidden",document.getElementById(t._addUID("GPlocationStageRemove_"+s))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+s)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary"),t.onLocationClearPointClick(r)}),n},_createLocationAutoCompleteteInputElement:function(i){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOrigin_"+i),t.className="GPelementShow gpf-show gpf-input fr-input",t.type="text",t.placeholder="Saisir une adresse",t.autocomplete="off",t.addEventListener("keyup",function(n){var r=n.which||n.keyCode;if(!(r===13||r===10||r===38||r===40)){var s=Xe.index(this.id);document.getElementById(e._addUID("GPlocationOrigin_"+s)).value.length>2?(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+s)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+s)).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+s)).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+s)).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(n)}}),t.addEventListener("keydown",function(n){var r=n.which||n.keyCode,s=document.getElementById(e._addUID("GPlocationAutoCompleteResult_"+i));if(s){var o=s.getElementsByClassName("GPautoCompleteProposal current"),a=s.getElementsByClassName("GPautoCompleteProposal"),l=a.length;if(l){var c=null;if(o.length)c=o[0];else{c=a[0],c.className="GPautoCompleteProposal current",c.style.color="#000000",c.style["background-color"]="#CEDBEF";return}var u=parseInt(Xe.index(c.id),10),h=u===l-1?a[0]:a[u+1],d=u===0?a[l-1]:a[u-1];switch(c.style["background-color"]="",c.style.color="",d.style["background-color"]="",d.style.color="",h.style["background-color"]="",h.style.color="",r){case 38:kp.log("arrow up"),c.className="GPautoCompleteProposal",d.className="GPautoCompleteProposal current",d.style.color="#000000",d.style["background-color"]="#CEDBEF";break;case 40:kp.log("arrow down"),c.className="GPautoCompleteProposal",h.className="GPautoCompleteProposal current",h.style.color="#000000",h.style["background-color"]="#CEDBEF";break;case 13:kp.log("enter"),c.click(n);break}c.focus()}}}),t},_createLocationCoordinateInputElement:function(i){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOriginCoords_"+i),t.className="GPelementHidden gpf-input gpf-hidden fr-input",t.type="text",t.disabled=!1,t.addEventListener("click",function(){var n=Xe.index(this.id);document.getElementById(e._addUID("GPlocationOriginLabel_"+n)).click()}),t},_createLocationPointerShowInputElement:function(i){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+i),e.className="GPelementHidden gpf-hidden",e.type="checkbox",e},_createLocationPointerInputElement:function(i){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationOriginPointerImg_"+i),t.htmlFor=this._addUID("GPlocationOriginPointer_"+i),t.className="GPlocationOriginPointerImg gpf-btn gpf-btn-icon-pointer fr-btn fr-btn--secondary",t.title="Pointer un lieu sur la carte",t.addEventListener("click",function(n){n.preventDefault(),n.stopPropagation();var r=Xe.index(this.id),s=document.getElementsByClassName(e._addUID("GPlocationPoint")),o,a,l;for(o=0;o<s.length;o++)a=s[o].childNodes[0].id,l=Xe.index(a),r!==l&&(document.getElementById(e._addUID("GPlocationOriginPointer_"+l)).checked=!1,document.getElementById(e._addUID("GPlocationOriginCoords_"+l)).value==="Pointer un lieu sur la carte"&&(document.getElementById(e._addUID("GPlocationOriginCoords_"+l)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+l)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+l)).className="GPelementHidden gpf-hidden"));if(document.getElementById(e._addUID("GPlocationOriginPointer_"+r)).checked){for(document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).value="",o=0;o<s.length;o++)a=s[o].childNodes[0].id,l=Xe.index(a),document.getElementById(e._addUID("GPlocationPoint_"+l)).style.cssText="";document.getElementById(e._addUID("GPlocationStageRemove_"+r))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+r)).className="GPlocationStageRemove  gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary"),document.getElementById(e._addUID("GPlocationOriginPointer_"+r)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+r)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).className="GPelementHidden gpf-hidden"}else{for(document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).value="Pointer un lieu sur la carte",o=0;o<s.length;o++)a=s[o].childNodes[0].id,l=Xe.index(a),r===l?document.getElementById(e._addUID("GPlocationPoint_"+l)).style.cssText="":document.getElementById(e._addUID("GPlocationPoint_"+l)).style.display="none";document.getElementById(e._addUID("GPlocationStageRemove_"+r))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+r)).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationOriginPointer_"+r)).checked=!0,document.getElementById(e._addUID("GPlocationOrigin_"+r)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+r)).disabled=!0}e.onActivateMapPointClick(n)}),t},_createLocationRemovePointElement:function(i){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationStageRemove_"+i),t.className="GPlocationOpen GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary",t.title="Supprimer l'tape",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.addEventListener("click",function(n){var r=n.target.ariaPressed==="true";n.target.setAttribute("aria-pressed",!r);var s=document.getElementsByClassName(e._addUID("GPlocationPoint")),o=s.length-1,a=s[0].childNodes[0].id,l=s[o].childNodes[0].id,c=Xe.index(a),u=Xe.index(l);if(i!==c&&i!==u){var h=Xe.index(this.id);document.getElementById(e._addUID("GPlocationPoint_"+h)).className="GPflexInput GPelementHidden gpf-flex gpf-hidden",document.getElementById(e._addUID("GPlocationOrigin_"+h)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+h)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+h)).value="",document.getElementById(e._addUID("GPlocationOriginCoords_"+h)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationStageAdd")).style.display="",e.onLocationRemovePointClick(n)}}),t},_createLocationAddPointElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPlocationStageAdd"),e.className="GPlocationOpen GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary",e.title="Ajouter une tape",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){for(var n=1,r=0,s=document.getElementsByClassName(i._addUID("GPlocationPoint")),o=1;o<s.length-1;o++){var a=s[o].childNodes[0].id,l=Xe.index(a);document.getElementById(i._addUID("GPlocationPoint_"+l))&&(document.getElementById(i._addUID("GPlocationPoint_"+l)).className==="GPflexInput GPelementHidden gpf-flex gpf-hidden"?n===1&&(n=l):r++)}n<s.length&&(document.getElementById(i._addUID("GPlocationPoint_"+n)).className="GPflexInput GPlocationStageFlexInput gpf-flex"),r===4&&(document.getElementById(i._addUID("GPlocationStageAdd")).style.display="none");var c=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!c),i.onLocationAddPointClick(t)}),e},_createLocationAutoCompleteElement:function(i){var e=document.createElement("div");return e.id=this._addUID("GPlocationAutoCompleteList_"+i),e.className="GPlocationAutoCompleteList GPelementHidden gpf-panel gpf-hidden fr-modal",e},_createLocationAutoCompleteResultElement:function(i){var e=this,t=document.createElement("div");return t.id=this._addUID("GPlocationAutoCompleteResult_"+i),t.className="GPadvancedAutoCompleteResult gpf-panel__list",t.addEventListener?t.addEventListener("click",function(n){e.onAutoCompletedResultsItemClick(n),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+i)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+i)).classList.replace("gpf-hidden","gpf-visible")},!1):t.attachEvent&&t.attachEvent("onclick",function(n){e.onAutoCompletedResultsItemClick(n),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+i)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+i)).classList.replace("gpf-hidden","gpf-visible")}),t},_createLocationAutoCompletedLocationElement:function(i,e,t){var n=document.getElementById(this._addUID("GPlocationAutoCompleteResult_"+i)),r=document.createElement("div");r.id=this._addUID("AutoCompletedLocation_"+t),r.className="GPautoCompleteProposal gpf-panel__items",r.innerHTML=ts.getSuggestedLocationFreeform(e),n.appendChild(r)},GPdisplayCoordinate:function(i){for(var e=document.getElementsByClassName(this._addUID("GPlocationPoint")),t=0;t<e.length;t++){var n=e[t].childNodes[0].id,r=Xe.index(n);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).value=i,document.getElementById(this._addUID("GPlocationOriginCoords_"+r)).disabled=!1;for(var s=0;s<e.length;s++){n=e[s].childNodes[0].id;var o=Xe.index(n);document.getElementById(this._addUID("GPlocationPoint_"+o)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+o))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+o)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary")}document.getElementById(this._addUID("GPlocationOriginPointer_"+r)).checked=!1,document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm");return}}}},ua=ot.getLogger("locationselector"),nc=class _x extends qs{constructor(e){if(e=e||{},super({element:e.element||document.createElement("div"),render:e.render,target:e.target}),!(this instanceof _x))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}initialize(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},He.mergeParams(this.options,e),this._uid=this.options.tag.groupId||Xe.generate(),this._map=null,this._inputsContainer=null,this._buttonLabel=null,this._inputAutoComplete=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedList=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this.listenerKey=null}_initMarker(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&e.length===2?this._markerOffset=e:ua.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=jt.lightOrange,this._markerOffset=jt.defaultOffset}getCoordinate(){return this._coordinate}setCoordinate(e,t){var n=this.getMap(),r=n.getView().getProjection().getCode();t||(t=r),this._setCoordinate(e,t),e=Et(e,t,r),this._setMarker([e[0],e[1]],null,!1)}clear(){this.clearResults(),this._buttonLabel.click()}clearResults(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),gi(this.listenerKey)}_initContainer(){var e=this.options.tag.id,t=this._createMainContainerElement(),n=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);t.appendChild(n);var r=this._buttonLabel=this._createLocationPointLabelElement(e,this.options.tag.label);n.appendChild(r);var s=this._inputAutoComplete=this._createLocationAutoCompleteteInputElement(e);s.addEventListener?s.addEventListener("click",()=>this.onAutoCompleteInputClick()):s.attachEvent&&s.attachEvent("onclick",()=>this.onAutoCompleteInputClick()),n.appendChild(s);var o=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);n.appendChild(o);var a=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);n.appendChild(a);var l=this._inputShowPointer=this._createLocationPointerInputElement(e);if(n.appendChild(l),this.options.tag.addOption){var c=this._addPointElement=this._createLocationAddPointElement();n.appendChild(c)}if(this.options.tag.removeOption){var u=this._removePointElement=this._createLocationRemovePointElement(e);n.appendChild(u)}var h=this._suggestedContainer=this._createLocationAutoCompleteElement(e),d=this._suggestedList=this._createLocationAutoCompleteResultElement(e);return h.appendChild(d),t.appendChild(h),t}onAutoCompleteInputClick(){this._inputAutoComplete&&this._inputAutoComplete.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){var n=this.options.autocompleteOptions||{},r=n.onSuccess||null,s=n.onFailure||null;if(this._currentLocation=t,t.length<3){this._clearSuggestedLocation();return}var o=this;this._requestAutoComplete({text:t,maximumResponses:5,onSuccess:function(l){if(l){var c=l.suggestedLocations;o._fillAutoCompletedLocationListContainer(c),r&&r.call(this,l)}},onFailure:function(l){o._clearSuggestedLocation(),ua.log(l.message),s&&s.call(this,l)}});var a=this.getMap();a.on("click",()=>this._hideSuggestedLocation()),a.on("pointerdrag",()=>this._hideSuggestedLocation())}}onAutoCompletedResultsItemClick(e){var t=Xe.index(e.target.id);if(t){var n=[this._suggestedLocations[t].position.x,this._suggestedLocations[t].position.y];this._coordinate=n;var r={type:this._suggestedLocations[t].type,fields:this._suggestedLocations[t]},s=ts.getSuggestedLocationFreeform(this._suggestedLocations[t]);this._setLabel(s);var o=this.getMap().getView(),a=o.getProjection().getCode();a!=="EPSG:4326"&&(n=Et(n,"EPSG:4326",a)),this._setPosition(n),this._setMarker(n,r,this.options.displayInfo)}}onActivateMapPointClick(){var e=this.getMap();this._inputShowPointerContainer.checked?(this.clearResults(),this.listenerKey=e.on("click",t=>this.onMouseMapClick(t)),this._setCursor("crosshair")):(gi(this.listenerKey),this._setCursor())}onLocationClearPointClick(){this._setCursor(),this.clearResults()}onLocationRemovePointClick(){this._setCursor(),this.clearResults()}onLocationAddPointClick(e){ua.log("onRouteAddPointClick",e)}onMouseMapClick(e){var t=e.coordinate;if(!(!e.map||!e.map.getView())){var n=e.map.getView().getProjection();this._setCoordinate(t,n),this._setMarker([t[0],t[1]],null,!1),this.onActivateMapPointClick(e)}}_setLabel(e){this._inputAutoComplete.value=e}_setCursor(e){var t=this.getMap(),n=t.getTargetElement();e?n.style.cursor=e:n.style.cursor=null}_setCoordinate(e,t){this._coordinate=Et(e,t,"EPSG:4326");var n=this._coordinate[0].toFixed(4),r=this._coordinate[1].toFixed(4),s=r+" / "+n;this.GPdisplayCoordinate(s)}_setPosition(e){var t=this.getMap().getView();t.setCenter(e)}_setMarker(e,t,n){var r=this.getMap();if(this._marker!=null&&(r.removeOverlay(this._marker),this._marker=null),e){var s=document.createElement("img");s.src=this._markerUrl,this._marker=new jn({position:e,offset:this._markerOffset,element:s,stopEvent:!1}),r.addOverlay(this._marker),n&&ua.log("marker information : ",t)}}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._suggestedList)for(;this._suggestedList.firstChild;)this._suggestedList.removeChild(this._suggestedList.firstChild)}_hideSuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementVisible","GPelementHidden"),this._suggestedContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementHidden","GPelementVisible"),this._suggestedContainer.classList.replace("gpf-hidden","gpf-visible"))}_requestAutoComplete(e){if(ua.log("_requestAutoComplete()",e),!(!e||Object.keys(e).length===0)&&e.text){ua.log(e);var t={};He.assign(t,this.options.autocompleteOptions),He.assign(t,e);var n=this._resources.AutoCompletion||null;n&&Array.isArray(n)&&(t.filterOptions||(t.filterOptions={}),t.filterOptions.type=n),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),ua.log(t),yt.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._suggestedList;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var n=0;n<e.length;n++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[n],n);this._suggestedLocations=e}}};Object.assign(nc.prototype,fz);window.ol&&window.ol.control&&(window.ol.control.LocationSelector=nc);var gz={_addUID:function(i){var e=this.uid?i+"-"+this.uid:i;return e}},ru=ot.getLogger("export");class el extends qs{constructor(e){if(e=e||{control:null,target:null,format:"geojson",name:"export",title:"Exporter",menu:!1,onExport:null},ru.trace("[constructor] Export",e),super({element:document.createElement("div"),render:e.render,target:e.target}),!(this instanceof el))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.EXPORT_ROUTE={},this.EXPORT_ISOCHRON={},this.EXPORT_PROFILE={},this.uid=e.id||Xe.generate(),this.extension=null,this.mimeType=null,this.container=null,this.button=null,this.menu=null,this.icon=" ",this.menuClassHidden="GPelementHidden gpf-hidden",this.initOptions(e),this.initContainer()}render(){if(!this.options.target&&this.options.control){var e=this.options.control.getContainer();this.options.target=e.lastChild}this.container&&this.options.target.appendChild(this.container)}initOptions(e){this.options=e,this.options.control,this.options.target;var t=this.options.format;t?this.setFormat(t):this.setFormat(""),this.options.name||this.setName("export"),this.options.title||this.setTitle("Exporter"),this.options.menu===void 0&&this.setMenu(!1)}initContainer(){var e=this.options.title;this.options.menu&&(e=this.icon+this.options.title);var t=document.createElement("div");t.id=this._addUID("GPexportContainer"),t.className="GPexportMenuContainer";var n=this.stringToHTML(`
            <input type="button"
                id="${this._addUID("GPexportButton")}" 
                class="GPsubmit gpf-btn gpf-btn-submit fr-btn"
                value="${e}">
        `);this.button=n.firstChild,this.button&&this.button.addEventListener("click",a=>this.onClickButtonExport(a)),t.appendChild(n.firstChild);var r=this.stringToHTML(`
            <div class="GPexportMenuContent ${this.menuClassHidden}">
                <label class="container">GeoJSON
                    <input type="radio" 
                        id="GPmenuFormatGeojson-${this.uid}"
                        name="format" 
                        value="geojson">
                    <span class="checkmark"></span>
                </label>
                <label class="container">KML
                    <input type="radio" 
                        id="GPmenuFormatKml-${this.uid}"
                        name="format" 
                        value="kml">
                    <span class="checkmark"></span>
                </label>
                <label class="container">GPX
                    <input type="radio" 
                        id="GPmenuFormatGpx-${this.uid}"
                        name="format" 
                        value="gpx">
                    <span class="checkmark"></span>
                </label>
            </div>
        `);if(this.menu=r.firstChild,this.menu){if(this.options.menu){var s=this.menu.className;this.menu.className=s.replace(this.menuClassHidden,"")}var o=this.menu.querySelectorAll('input[type=radio][name="format"]');o.forEach(a=>{a.id.toUpperCase().includes(this.options.format.toUpperCase())&&(a.checked=!0),a.addEventListener("change",l=>{this.setFormat(l.target.value)})})}t.appendChild(r.firstChild),this.container=t}stringToHTML(e){var t=function(){if(!window.DOMParser)return!1;var o=new DOMParser;try{o.parseFromString("x","text/html")}catch{return!1}return!0};if(t()){var n=new DOMParser,r=n.parseFromString(e,"text/html");return r.body}var s=document.createElement("div");return s.innerHTML=e,s}isPluggableControl(){return!!(this.options.control&&typeof this.options.control.getContainer=="function"&&typeof this.options.control.getLayer=="function")}exportFeatures(e,t,n){var r=null;if(!e)return ru.warn("Impossible to export : no layer is hosting features."),r;if(!e.getSource()||!e.getSource().getFeatures()||!e.getSource().getFeatures().length)return ru.warn("Impossible to export : no features found."),r;e.getSource().getFeatures().forEach(u=>{var h=u.getStyle();!h&&typeof this.options.control.getStyle=="function"&&u.setStyle(this.options.control.getStyle())});var s={defaultStyle:n};t&&(s.extensions={"geoportail:compute":t});var o=null;switch(this.options.format.toUpperCase()){case"KML":s.writeStyles=!0,s.showPointNames=!0,o=new _h(s);break;case"GPX":o=new Ch(s);break;case"GEOJSON":o=new Dr(s);break}if(!o)return ru.warn("Impossible to export : format unknown !?"),r;var a=e.getSource().getProjection(),l=this.getMap();l&&(a=a||l.getView().getProjection());var c=e.getSource().getFeatures();return r=o.writeFeatures(c,{dataProjection:"EPSG:4326",featureProjection:a||"EPSG:3857"}),r}onClickButtonExport(e){if(!this.isPluggableControl()){ru.warn("Componant not pluggable with the control !");return}var t=this.options.control.getLayer(),n=this.options.control.getData!==void 0?this.options.control.getData():{},r=this.options.control.getStyle!==void 0?this.options.control.getStyle():{},s=this.exportFeatures(t,n,r);if(!(!s||s==="null")){if(this.dispatchEvent({type:"export:compute",content:s}),this.options.onExport&&typeof this.options.onExport=="function"){this.options.onExport(s);return}var o=document.createElement("a"),a="utf-8";if(o.setAttribute("href","data:"+this.mimeType+";charset="+a+","+encodeURIComponent(s)),o.setAttribute("download",this.options.name+this.extension),document.createEvent){var l=document.createEvent("MouseEvents");l.initEvent("click",!0,!0),o.dispatchEvent(l)}else o.click()}}setControl(e){this.options.control=e}setTarget(e){this.options.target=e}setFormat(e){switch(this.options.format=e.toUpperCase(),this.options.format){case"KML":this.extension=".kml",this.mimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this.extension=".gpx",this.mimeType="application/gpx+xml";break;case"GEOJSON":this.extension=".geojson",this.mimeType="application/geo+json";break;default:this.options.format="GEOJSON",this.extension=".geojson",this.mimeType="application/geo+json";break}}setName(e){this.options.name=e}setTitle(e){this.options.title=e,this.button&&(this.button.value=this.options.menu?this.icon+e:e)}setMenu(e){if(this.options.menu=e,this.button&&(this.button.value=this.options.menu?this.icon+this.options.title:this.options.title),this.menu&&this.options.menu){var t=this.menu.className;this.menu.className=t.replace(this.menuClassHidden,"");var n=this.menu.querySelectorAll('input[type=radio][name="format"]');n.forEach(r=>{r.id.toUpperCase().includes(this.options.format.toUpperCase())&&(r.checked=!0)})}}}Object.assign(el.prototype,gz);window.ol&&window.ol.control&&(window.ol.control.Export=el);var pz=ot.getLogger("RouteDOM"),mz={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GProute"),i.className="GPwidget gpf-widget",i},_createShowRoutePictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowRoutePicto gpf-btn gpf-btn-icon-route fr-btn",e.title="Ouvrir le calcul d'itinraire",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowRoutePanelClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowRoutePanelClick(t)}),e},_createRoutePanelElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GProutePanel"),i.className="GPpanel gpf-panel fr-modal",i},_createRoutePanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createRoutePanelHeaderElement:function(){var i=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title",t.innerHTML="Calcul d'itinraire",e.appendChild(t);var n=document.createElement("button");n.id=this._addUID("GProutePanelClose"),n.className="GPpanelClose GProutePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",n.title="Masquer le panneau",n.addEventListener?n.addEventListener("click",function(){document.getElementById(i._addUID("GPshowRoutePicto")).click()},!1):n.attachEvent&&n.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowRoutePicto")).click()});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",n.appendChild(r),e.appendChild(n),e},_createRoutePanelFooterElement:function(){var i=document.createElement("div");return i.className="GPpanelFooter gpf-panel__footer fr-modal__footer",i},_createRoutePanelFormElement:function(){var i=this,e=document.createElement("form");return e.id=this._addUID("GProuteForm"),e.className="gpf-panel__content fr-modal__content",e.setAttribute("onkeypress","return event.keyCode != 13;"),e.addEventListener("submit",function(t){pz.log(t),t.preventDefault();var n=document.getElementsByClassName(i._addUID("GPlocationPoint")),r=n[0].childNodes[0].id,s=n[n.length-1].childNodes[0].id,o=Xe.index(r),a=Xe.index(s);if(document.getElementById(i._addUID("GPlocationOrigin_"+o)).value===""&&document.getElementById(i._addUID("GPlocationOriginCoords_"+o)).value===""||document.getElementById(i._addUID("GPlocationOrigin_"+a)).value===""&&document.getElementById(i._addUID("GPlocationOriginCoords_"+a)).value==="")return!1;i._addRouteResultsStagesValuesElement(n);var l=null;if(document.getElementById(i._addUID("GProuteComputationSelect"))){var c=document.getElementById(i._addUID("GProuteResultsComputationSelect"));c.selectedIndex=document.getElementById(i._addUID("GProuteComputationSelect")).selectedIndex,l=c.options[c.selectedIndex].value}var u=null;document.getElementById(i._addUID("GProuteTransportCar"))&&document.getElementById(i._addUID("GProuteTransportCar")).checked&&(u=document.getElementById(i._addUID("GProuteTransportCar")).value),document.getElementById(i._addUID("GProuteTransportPedestrian"))&&document.getElementById(i._addUID("GProuteTransportPedestrian")).checked&&(u=document.getElementById(i._addUID("GProuteTransportPedestrian")).value);for(var h=[],d=document.getElementsByClassName("GProuteExclusionsOption"),f=0;f<d.length;f++){var g=d[f].htmlFor,p=document.getElementById(g);p.checked||h.push(p.value)}return i.onRouteComputationSubmit({computation:l,transport:u,exclusions:h}),!1}),e},_createRoutePanelResultsElement:function(){var i=document.createElement("div");i.id=this._addUID("GProuteResultsPanel"),i.className="GPelementHidden gpf-hidden",i.appendChild(this._createRouteResultsStagesElement()),i.appendChild(this._createRouteResultsElement());var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",i.appendChild(e),i.appendChild(this._createRouteShowResultsDetailsElement());var t=document.createElement("label");t.htmlFor=this._addUID("GProuteResultsShowDetails"),t.innerHTML="Afficher le dtail",i.appendChild(t);var n=document.createElement("label");n.htmlFor=this._addUID("GProuteResultsShowDetails"),n.innerHTML="Masquer le dtail",i.appendChild(n);var r=document.createElement("div");return r.className="GPfakeBorder",i.appendChild(r),i.appendChild(this._createRouteResultsDetailsElement()),i},_createRouteWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GProuteCalcWaitingContainer"),i.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",i.appendChild(e),i},_createRouteResultsStagesElement:function(){var i=document.createElement("div");return i.id=this._addUID("GProuteResultsStages"),i},_addRouteResultsStagesValuesElement:function(i){document.getElementById(this._addUID("GProuteResultsStages")).innerHTML="";for(var e=0;e<i.length;e++){var t=i[e].childNodes[0].id,n=Xe.index(t);if(document.getElementById(this._addUID("GPlocationPoint_"+n)).className==="GPflexInput GPlocationStageFlexInput gpf-flex"){var r=document.createElement("div");r.className="GProuteResultsStages";var s=document.createElement("div");s.className="GProuteResultStageLabel",s.innerHTML=document.getElementById(this._addUID("GPlocationOriginLabel_"+n)).innerHTML+" :",r.appendChild(s);var o=document.createElement("div");o.className="GProuteResultStageValue";var a=document.getElementById(this._addUID("GPlocationOriginCoords_"+n)),l=a.value,c=a.className==="GPelementVisible gpf-visible";l!==null&&l!==""&&c?o.innerHTML=l:o.innerHTML=document.getElementById(this._addUID("GPlocationOrigin_"+n)).value,r.appendChild(o),o.innerHTML!==""&&document.getElementById(this._addUID("GProuteResultsStages")).appendChild(r)}}},_createRouteResultsElement:function(){var i=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var t=document.createElement("div");t.id=this._addUID("GProuteResultsValues"),e.appendChild(t);var n=document.createElement("div");n.id=this._addUID("GProuteResultsMode");var r=document.createElement("select");r.id=this._addUID("GProuteResultsComputationSelect"),r.className="GPselect",r.addEventListener("change",function(c){i.onRouteModeComputationChangeAndRun(c)});for(var s=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],o=0;o<s.length;o++){var a=document.createElement("option");a.value=s[o].code,a.text=s[o].label,r.appendChild(a)}n.appendChild(r),e.appendChild(n);var l=document.createElement("div");return l.id=this._addUID("GProuteResultsNew"),l.title="Modifier le calcul",l.addEventListener("click",function(c){document.getElementById(i._addUID("GProuteResultsPanel")).className="GPelementHidden gpf-hidden",document.getElementById(i._addUID("GProuteForm")).className="gpf-panel__content fr-modal__content",i.onShowRouteResultsNewClick(c)}),e.appendChild(l),e},_addRouteResultsValuesElement:function(i,e,t){var n=document.getElementById(this._addUID("GProuteResultsValues"));if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);var r=document.createElement("div");r.className="GProuteResultsValue";var s=document.createElement("label");s.className="GProuteResultsValueLabel",s.innerHTML="Distance :",r.appendChild(s);var o=0,a=parseInt(i/1e3,10);if(!a)o=Math.round(i)+" m";else{var l=Math.round(i);l=l/1e3,o=l+" km"}var c=document.createElement("div");c.id=this._addUID("GProuteResultsValueDist"),c.innerHTML=o,r.appendChild(c),n.appendChild(r);var u=document.createElement("div");u.className="GProuteResultsValue";var h=document.createElement("label");h.className="GProuteResultsValueLabel",h.innerHTML="Dure :",u.appendChild(h);var d=document.createElement("div");return d.id=this._addUID("GProuteResultsValueDist"),d.innerHTML=t(e),u.appendChild(d),n.appendChild(u),n},_createRouteShowResultsDetailsElement:function(){var i=document.createElement("input");return i.id=this._addUID("GProuteResultsShowDetails"),i.type="checkbox",i},_createRouteResultsDetailsElement:function(){var i=document.createElement("div");return i.id=this._addUID("GProuteResultsDetails"),i},_addRouteResultsDetailsElement:function(i,e){var t=this,n=document.getElementById(this._addUID("GProuteResultsDetails"));if(n.childElementCount)for(;n.firstChild;)n.removeChild(n.firstChild);for(var r=0,s=0,o=0;o<i.length;o++){var a=o+1,l=i[o],c=document.createElement("div");c.className="GProuteResultsDetailsNumber",c.innerHTML=a+".",n.appendChild(c),s+=parseFloat(l.duration),r+=parseFloat(l.distance);var u=0,h=parseInt(r/1e3,10);if(!h)u=Math.round(r)+" m";else{var d=Math.round(r);d=d/1e3,u=d+" km"}var f=document.createElement("div");f.className="GProuteResultsDetailsInstruction",f.id=this._addUID("GProuteResultsDetailsInstruction_"+a),f.title="distance : "+u+" / temps : "+e(s),f.innerHTML=l.instruction,f.addEventListener("mouseover",function(g){t.onRouteResultsDetailsMouseOver(g)}),f.addEventListener("mouseout",function(g){t.onRouteResultsDetailsMouseOut(g)}),f.addEventListener("click",function(g){typeof t.onRouteResultsDetailsClick=="function"&&t.onRouteResultsDetailsClick(g)}),n.appendChild(f)}return n},_createRoutePanelFormPointElement:function(i,e,t){var n=this,r=document.createElement("div");r.id="GProutePoint"+i,r.className=t?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var s=document.createElement("label");s.id="GProuteOriginLabel"+i,s.htmlFor="GProuteOrigin"+i,s.innerHTML=e,s.addEventListener("click",function(){var u=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+u).value="";for(var h=1;h<8;h++)document.getElementById("GProutePoint"+h).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+u).checked=!1,document.getElementById("GProuteOrigin"+u).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+u).className="GPelementHidden gpf-hidden"}),r.appendChild(s);var o=document.createElement("input");o.id="GProuteOrigin"+i,o.className="GPelementVisible gpf-visible",o.type="text",o.placeholder="Saisir une adresse",o.addEventListener("keyup",function(u){var h=u.which||u.keyCode;if(!(h===13||h===10)){var d=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+d).value.length>2?document.getElementById("GProuteAutoCompleteList"+d).style.display="block":document.getElementById("GProuteAutoCompleteList"+d).style.display="none",n.onAutoCompleteSearchText(u)}}),o.addEventListener("blur",function(){var u=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+u).style.display="none"}),r.appendChild(o);var a=document.createElement("input");a.id="GProuteOriginCoords"+i,a.className="GPelementHidden gpf-hidden",a.type="text",a.disabled=!0,r.appendChild(a);var l=document.createElement("input");l.id="GProuteOriginPointer"+i,l.type="checkbox",r.appendChild(l);var c=document.createElement("label");return c.id="GProuteOriginPointerImg"+i,c.htmlFor="GProuteOriginPointer"+i,c.className="GProuteOriginPointerImg",c.title="Pointer un lieu sur la carte",c.addEventListener("click",function(u){u.preventDefault(),u.stopPropagation();var h=this.id.charAt(this.id.length-1),d;for(d=1;d<8;d++)h!==d&&(document.getElementById("GProuteOriginPointer"+d).checked=!1,document.getElementById("GProuteOriginCoords"+d).value==="Pointer un lieu sur la carte"&&(document.getElementById("GProuteOriginCoords"+d).value="",document.getElementById("GProuteOrigin"+d).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+d).className="GPelementHidden gpf-hidden"));if(document.getElementById("GProuteOriginPointer"+h).checked){for(document.getElementById("GProuteOriginCoords"+h).value="",d=1;d<8;d++)document.getElementById("GProutePoint"+d).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+h).checked=!1,document.getElementById("GProuteOrigin"+h).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+h).className="GPelementHidden gpf-hidden"}else{for(document.getElementById("GProuteOriginCoords"+h).value="Pointer un lieu sur la carte",d=1;d<8;d++)h===d?document.getElementById("GProutePoint"+d).style.display="flex":document.getElementById("GProutePoint"+d).style.display="none";document.getElementById("GProuteForm").className="GProuteFormMini gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+h).checked=!0,document.getElementById("GProuteOrigin"+h).className="GPelementHidden gpf-hidden",document.getElementById("GProuteOriginCoords"+h).className="GPelementVisible gpf-visible"}n.onRouteMapPointClick(u)}),r.appendChild(c),r},_createRoutePanelFormRemoveStageElement:function(i){var e=this,t=document.createElement("div");return t.id="GProuteStageRemove"+i,t.className="GProuteStageRemove",t.title="Supprimer l'tape",i!==1&&i!==7&&t.addEventListener("click",function(n){var r=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+r).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+r).value="",document.getElementById("GProuteOrigin"+r).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+r).value="",document.getElementById("GProuteOriginCoords"+r).className="GPelementHidden gpf-hidden",document.getElementById("GProuteStageAdd").style.display="",e.onRouteRemovePointClick(n)}),t},_createRoutePanelFormAddStageElement:function(){var i=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une tape",e.addEventListener("click",function(t){for(var n=1,r=0,s=2;s<7;s++)document.getElementById("GProutePoint"+s).className==="GPflexInput GProuteStageFlexInputHidden"?n===1&&(n=s):r++;n<7&&(document.getElementById("GProutePoint"+n).className="GPflexInput GProuteStageFlexInput"),r===4&&(document.getElementById("GProuteStageAdd").style.display="none"),i.onRouteAddPointClick(t)}),e},_createRoutePanelFormAutoCompleteListElement:function(i){var e=this,t=document.createElement("div");return t.id="GProuteAutoCompleteList"+i,t.className="GPadvancedAutoCompleteList",t.addEventListener?t.addEventListener("click",function(n){e.onAutoCompletedResultsItemClick(n),document.getElementById("GProuteAutoCompleteList"+i).style.display="none"},!1):t.attachEvent&&t.attachEvent("onclick",function(n){e.onAutoCompletedResultsItemClick(n),document.getElementById("GProuteAutoCompleteList"+i).style.display="none"}),t},_createRouteAutoCompletedLocationElement:function(i,e,t){var n=document.getElementById("GProuteAutoCompleteList"+e),r=document.createElement("div");r.id="AutoCompletedLocation"+t,r.className="GPautoCompleteProposal",r.innerHTML=ts.getSuggestedLocationFreeform(i),n.appendChild(r)},_createRoutePanelFormModeChoiceElement:function(){var i=document.createElement("div");return i.id=this._addUID("GProuteModeChoice"),i},_createRoutePanelFormModeChoiceTransportElement:function(i){var e=this,t=document.createElement("div");t.id=this._addUID("GProuteTransportChoice");var n=document.createElement("label");n.className="GProuteModeLabel gpf-label fr-label",n.innerHTML="Mode de transport",t.appendChild(n);for(var r=0;r<i.length;r++){var s=i[r],o=document.createElement("div");if(o.className="GProuteTransportChoice gpf-flex gpf-radio-group fr-radio-group",s==="Voiture"){var a=document.createElement("input");a.id=this._addUID("GProuteTransportCar"),a.type="radio",a.name="GProuteTransport",a.value="Voiture",r===0&&(a.checked=!0),a.addEventListener?a.addEventListener("change",function(h){e.onRouteModeTransportChange(h)}):a.attachEvent&&a.attachEvent("onchange",function(h){e.onRouteModeTransportChange(h)}),o.appendChild(a);var l=document.createElement("label");l.className="GProuteTransportImg gpf-label fr-label",l.htmlFor=this._addUID("GProuteTransportCar"),l.title="Voiture",l.innerHTML="Voiture",o.appendChild(l)}if(s==="Pieton"){var c=document.createElement("input");c.id=this._addUID("GProuteTransportPedestrian"),c.type="radio",c.name="GProuteTransport",c.value="Pieton",r===0&&(c.checked=!0),c.addEventListener?c.addEventListener("change",function(h){e.onRouteModeTransportChange(h)}):c.attachEvent&&c.attachEvent("onchange",function(h){e.onRouteModeTransportChange(h)}),o.appendChild(c);var u=document.createElement("label");u.className="GProuteTransportImg gpf-label fr-label",u.htmlFor=this._addUID("GProuteTransportPedestrian"),u.title="Piton",u.innerHTML="Piton",o.appendChild(u)}t.appendChild(o)}return t},_createRoutePanelFormModeChoiceComputeElement:function(){var i=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice");var t=document.createElement("label");t.htmlFor=this._addUID("GProuteComputationSelect"),t.innerHTML="Mode de calcul";var n=document.createElement("span");n.className="GProuteModeLabel",n.appendChild(t),e.appendChild(n);var r=document.createElement("select");r.id=this._addUID("GProuteComputationSelect"),r.className="GPselect gpf-select fr-select",r.addEventListener("change",function(l){i.onRouteModeComputationChange(l)});for(var s=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],o=0;o<s.length;o++){var a=document.createElement("option");a.value=s[o].code,a.text=s[o].label,r.appendChild(a)}return e.appendChild(r),e},_createShowRouteExclusionsPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowRouteExclusionsPicto"),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto gpf-btn fr-btn--sm fr-btn--secondary fr-icon-arrow-down-fill",e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowRouteExclusionsClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowRouteExclusionsClick(t)}),e},_createRoutePanelFormExclusionsElement:function(){var i=document.createElement("div");i.id=this._addUID("GProuteExclusions");var e=document.createElement("span");return e.className="GProuteExclusionsLabel",e.innerHTML="Passages autoriss",i.appendChild(e),i},_createRoutePanelFormExclusionOptionsElement:function(i){var e=this,t=document.createElement("div");t.className="GProuteExclusionsOptions gpf-flex";for(var n in i)if(i.hasOwnProperty(n)){var r=i[n];switch(n){case"toll":var s=document.createElement("input");s.id=this._addUID("GProuteExclusionsToll"),s.type="checkbox",s.value="Toll",s.checked=!r,s.addEventListener?s.addEventListener("change",function(h){e.onRouteExclusionsChange(h)}):s.attachEvent&&s.attachEvent("onchange",function(h){e.onRouteExclusionsChange(h)}),t.appendChild(s);var o=document.createElement("label");o.className="GProuteExclusionsOption",o.htmlFor=this._addUID("GProuteExclusionsToll"),o.innerHTML="Pages",t.appendChild(o);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GProuteExclusionsTunnel"),a.type="checkbox",a.value="Tunnel",a.checked=!r,a.addEventListener?a.addEventListener("change",function(h){e.onRouteExclusionsChange(h)}):a.attachEvent&&a.attachEvent("onchange",function(h){e.onRouteExclusionsChange(h)}),t.appendChild(a);var l=document.createElement("label");l.className="GProuteExclusionsOption",l.htmlFor=this._addUID("GProuteExclusionsTunnel"),l.innerHTML="Tunnels",t.appendChild(l);break;case"bridge":var c=document.createElement("input");c.id=this._addUID("GProuteExclusionsBridge"),c.type="checkbox",c.value="Bridge",c.checked=!r,c.addEventListener?c.addEventListener("change",function(h){e.onRouteExclusionsChange(h)}):c.attachEvent&&c.attachEvent("onchange",function(h){e.onRouteExclusionsChange(h)}),t.appendChild(c);var u=document.createElement("label");u.className="GProuteExclusionsOption",u.htmlFor=this._addUID("GProuteExclusionsBridge"),u.innerHTML="Ponts",t.appendChild(u);break}}return t},_createRouteSubmitFormElement:function(){var i=document.createElement("input");return i.id=this._addUID("GProuteSubmit"),i.className="GPsubmit gpf-btn gpf-btn-submit fr-btn fr-btn--secondary",i.type="submit",i.value="Calculer",i},_createRouteFormResetElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GProuteReset"),e.title="Rinitialiser les paramtres",e.className="GPresetPicto gpf-btn gpf-icon-return fr-btn fr-btn--secondary",e.title="Rinitialiser les paramtres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onRouteResetClick(t)}),e}},Vi=ot.getLogger("route"),bA=class Cx extends Xn{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Cx))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.element=this._container,this.options.export){var t=He.assign({control:this},this.options.export);this.export=new el(t),this.export.render();var n=this;this.export.on("export:compute",r=>{n.dispatchEvent({type:"export:compute",content:r.content})})}this.draggable&&Ro.dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,this.options.position?null:e.getTargetElement()),this.collapsed||this._showRouteButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){Vi.log("[ERROR] Route:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():this._showRouteButton.click(),this.collapsed=e)}getLayer(){return this._geojsonSections}setLayer(e){if(!e){this._geojsonSections=null;return}if(!(e instanceof Di)){Vi.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonSections=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){Vi.log("no valid geojson given :"+t.message)}}getData(){var e=[];for(let n=0;n<this._currentPoints.length;n++){const r=this._currentPoints[n];e.push(r.getCoordinate())}var t={type:"route",points:e,transport:this._currentTransport,exclusions:this._currentExclusions,computation:this._currentComputation,results:{}};return He.assign(t.results,this._currentRouteInformations),t}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;for(var t=0;t<this._currentPoints.length;t++){var n=this._currentPoints[t];if(n.getCoordinate()){n.clearResults();var r=t+1+"-"+this._uid;document.getElementById("GPlocationOriginCoords_"+r).value="",document.getElementById("GPlocationOrigin_"+r).value="",document.getElementById("GPlocationPoint_"+r).style.cssText="",t>0&&t<6&&(document.getElementById("GPlocationPoint_"+r).className="GPflexInput GPelementHidden gpf-flex gpf-hidden "),document.getElementById("GPlocationOriginPointer_"+r).checked=!1,document.getElementById("GPlocationOrigin_"+r).className="GPelementVisible gpf-visible",document.getElementById("GPlocationOriginCoords_"+r).className="GPelementHidden gpf-hidden"}}for(var s=0;s<e.points.length;s++){const o=e.points[s];o&&this._currentPoints[s].setCoordinate(o,"EPSG:4326")}this._currentRouteInformations=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}init(){for(let f=0;f<this._currentPoints.length;f++){const g=this._currentPoints[f];var e=f+1,t=g.getCoordinate();if(t){var n=document.getElementById("GPlocationOrigin_"+e+"-"+this._uid);n.value=t[1].toFixed(4)+" / "+t[0].toFixed(4),f>0&&f<6&&(document.getElementById("GPlocationPoint_"+e+"-"+this._uid).className="GPflexInput GPlocationStageFlexInput gpf-flex")}}var r=document.getElementsByClassName("GPlocationPoint-"+this._uid);this._addRouteResultsStagesValuesElement(r);var s;this._currentTransport==="Pieton"?(s=document.getElementById("GProuteTransportPedestrian-"+this._uid),s&&(s.checked="true")):(s=document.getElementById("GProuteTransportCar-"+this._uid),s&&(s.checked="true"));var o=document.getElementById("GProuteComputationSelect-"+this._uid);o&&(o.value=this._currentComputation);var a=document.getElementById("GProuteExclusionsToll-"+this._uid);a&&(this._currentExclusions.indexOf("toll")!==-1?a.checked=!1:a.checked=!0);var l=document.getElementById("GProuteExclusionsTunnel-"+this._uid);l&&(this._currentExclusions.indexOf("tunnel")!==-1?l.checked=!1:l.checked=!0);var c=document.getElementById("GProuteExclusionsBridge-"+this._uid);c&&(this._currentExclusions.indexOf("bridge")!==-1?c.checked=!1:c.checked=!0);var u=this._currentRouteInformations.totalDistance,h=this._currentRouteInformations.totalTime,d=this._simplifiedInstructions(this._currentRouteInformations.routeInstructions);d&&this._fillRouteResultsDetailsContainer(u,h,d),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}clean(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null;for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations(),this._clearRouteInputOptions(),this._clearRouteResultsDetails(),this.setLayer(),this._formRouteContainer.className="gpf-panel__content fr-modal__content",this._resultsRouteContainer.className="GPelementHidden gpf-hidden"}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"Itinraire",description:"Itinraire bas sur un graphe"}},He.assign(this.options,e);var t={departure:{url:jt.red,offset:jt.defaultOffset},stages:{url:jt.lightOrange,offset:jt.defaultOffset},arrival:{url:jt.darkOrange,offset:jt.defaultOffset}};this.options.markersOpts=He.assign(t,e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=Xe.generate(),this._showRouteButton=null,this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._geojsonObject=null,this.export=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new Ee({stroke:new je({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new Ee({stroke:new je({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this.listenerKey=null}_checkInputOptions(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var t=0;t<e.graphs.length;t++)typeof e.graphs[t]=="string"?(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture")):(Vi.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[t]=null);else Vi.warn("'graphs' parameter should be an array"),e.graphs=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initContainer(e){var t=this._container,n=this._showRouteButton=this._createShowRoutePictoElement();t.appendChild(n);var r=this._panelRouteContainer=this._createRoutePanelElement(),s=this._createRoutePanelDivElement();r.appendChild(s);var o=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();s.appendChild(o);for(var a=this._formRouteContainer=this._createRoutePanelFormElement(),l=this._createRoutePanelFormPointsElement(e),c=0;c<l.length;c++)a.appendChild(l[c]);var u=this._createRoutePanelFormModeChoiceElement();u.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs)),u.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),a.appendChild(u),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),a.appendChild(this._showRouteExclusionsElement);var h=this._createRoutePanelFormExclusionsElement();h.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),a.appendChild(h);var d=this._createRoutePanelFooterElement();a.appendChild(d);var f=this._createRouteFormResetElement();d.appendChild(f);var g=this._createRouteSubmitFormElement();d.appendChild(g),s.appendChild(a);var p=this._resultsRouteContainer=this._createRoutePanelResultsElement();s.appendChild(p);var m=this._waitingContainer=this._createRouteWaitingElement();return s.appendChild(m),t.appendChild(r),t.addEventListener&&t.addEventListener("click",v=>this._hideRouteSuggestedLocations(v)),t}_initTransport(){this._currentTransport="Voiture";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Voiture","Pieton"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.routeOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e[t]&&this._currentExclusions.push(t);var n=this.options.routeOptions;Array.isArray(n.exclusions)&&(this._currentExclusions=n.exclusions)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var n=document.createElement("input");return n.type="button",n.className="gp-styling-button closer",n.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(n),t}_createRoutePanelFormPointsElement(e){var t=[],n=1,r=new nc({apiKey:this.options.apiKey||null,tag:{id:n,groupId:this._uid,markerOpts:this.options.markersOpts.departure,label:"Dpart",display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(r.setMap(e),this._addFormPointsEventListeners(r),t.push(r._container),this._currentPoints.push(r),n=2;n<7;n++){var s=new nc({apiKey:this.options.apiKey||null,tag:{id:n,groupId:this._uid,label:"Etape",markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});s.setMap(e),this._addFormPointsEventListeners(s),t.push(s._container),this._currentPoints.push(s)}var o=new nc({apiKey:this.options.apiKey||null,tag:{id:n,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,label:"Arrive",display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return o.setMap(e),this._addFormPointsEventListeners(o),t.push(o._container),this._currentPoints.push(o),t}_addFormPointsEventListeners(e){e&&(e._buttonLabel.addEventListener?(e._buttonLabel.addEventListener("click",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.addEventListener("click",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.addEventListener("click",t=>{Vi.trace("click on _removePointElement",t)}),e._addPointElement&&e._addPointElement.addEventListener("click",t=>{Vi.trace("click on _addPointElement",t)})):e._buttonLabel.attachEvent&&(e._buttonLabel.attachEvent("onclick",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.attachEvent("onclick",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.attachEvent("onclick",t=>{}),e._addPointElement&&e._addPointElement.attachEvent("onclick",t=>{})))}onRouteComputationSubmit(e){Vi.log("onRouteComputationSubmit",e);var t=this._currentPoints,n;if(t[0]&&t[0].getCoordinate){var r=t[0].getCoordinate();n={x:r[0],y:r[1]},Vi.log("start",n)}var s,o=t[t.length-1];if(o&&o.getCoordinate){var a=o.getCoordinate();s={x:a[0],y:a[1]},Vi.log("end",s)}for(var l=[],c=1;c<t.length-1;c++)if(t[c]&&t[c].getCoordinate){var u=t[c].getCoordinate();if(u){var h={x:u[0],y:u[1]};Vi.log("step",h),l.push(h)}}this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var d=this.options.routeOptions,f;d.resource?f=d.resource:this._currentComputation==="fastest"&&this._currentTransport==="Pieton"&&(f="bdtopo-valhalla");var g=d.protocol||"XHR",p=d.timeOut||0;g==="JSONP"&&p===0&&(p=15e3);var m=d.onFailure!==null&&typeof d.onFailure=="function",v=d.onSuccess!==null&&typeof d.onSuccess=="function",y=this;this._requestRouting({startPoint:n,endPoint:s,viaPoints:l,graph:d.graph||this._currentTransport,routePreference:d.routePreference||this._currentComputation,exclusions:d.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:p,protocol:g,resource:f,onSuccess:function(A){Vi.log(A),A&&y._fillRouteResultsDetails(A),v&&d.onSuccess.call(y,A)},onFailure:function(A){y._hideWaitingContainer(),y._clearRouteResultsDetails(),Vi.log(A.message),m&&d.onFailure.call(y,A)}})}onRouteOriginLabelClick(){this._formRouteContainer.className="gpf-panel__content fr-modal__content",gi(this.listenerKey),this.dispatchEvent("route:drawend")}onRouteOriginPointerClick(e,t){var n=this.getMap();t._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini gpf-panel__content fr-modal__content",this.listenerKey=n.on("click",()=>{this._formRouteContainer.className==="GProuteFormMini gpf-panel__content fr-modal__content"&&(this._formRouteContainer.className="gpf-panel__content fr-modal__content"),gi(this.listenerKey),this.dispatchEvent("route:drawend")}),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",gi(this.listenerKey),this.dispatchEvent("route:drawend"))}onShowRoutePanelClick(e){var t=this.getMap();ds.unset(t),!this._geojsonSections&&!this._waiting&&this._clear();var n=this._showRouteButton.ariaPressed;this.collapsed=n!=="true",this.dispatchEvent("change:collapsed")}onRouteModeComputationChange(e){var t=e.target.selectedIndex,n=e.target.options[t].value;n&&(Vi.log(n),this._currentComputation=n)}onRouteModeComputationChangeAndRun(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})}onRouteModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onShowRouteExclusionsClick(e){Vi.log("onShowRouteExclusionsClick",e)}onRouteExclusionsChange(e){var t=e.target.value,n=e.target.checked;if(!(!t||typeof t!="string")){t=t.toLowerCase();for(var r=!1,s=null,o=0;o<this._currentExclusions.length;o++)this._currentExclusions[o]===t&&(s=o,r=!0);!r&&!n&&this._currentExclusions.push(t),r&&n&&this._currentExclusions.splice(s,1)}}onRouteResetClick(){for(var e=this._currentPoints,t=0;t<e.length;t++)e[t].clear();this._clear(),this._clearRouteInputOptions()}onShowRouteResultsNewClick(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry()}onRouteResultsDetailsMouseOver(e){var t=e.target.id,n=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var r=this._geojsonSections.getSource().getFeatureById(parseInt(n,10));r.setStyle(this._selectedFeatureStyle)}}onRouteResultsDetailsMouseOut(e){var t=e.target.id,n=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var r=this._geojsonSections.getSource().getFeatureById(parseInt(n,10));r.setStyle(null)}}_requestRouting(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.startPoint&&e.endPoint&&(e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey,typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),Vi.log(e),this._displayWaitingContainer(),yt.Services.route(e))}_fillRouteResultsDetails(e){var t=e.totalDistance,n=e.totalTime,r=this._simplifiedInstructions(e.routeInstructions);r&&this._fillRouteResultsDetailsContainer(t,n,r);var s=e.routeGeometry;s&&this._fillRouteResultsDetailsGeometry(s,this._defaultFeatureStyle),r&&r[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(r,this._defaultFeatureStyle);var o=e.bbox;if(o){var a=this.getMap(),l=[o.left,o.bottom,o.right,o.top],c=a.getView().getProjection().getCode();c!=="EPSG:4326"&&(l=Ss(l,"EPSG:4326",c)),a.getView().fit(l,a.getSize())}this._currentRouteInformations=e,this.dispatchEvent({type:"route:compute"}),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}_fillRouteResultsDetailsContainer(e,t,n){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,t,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(n,this._convertSecondsToTime)}_fillRouteResultsDetailsGeometry(e,t){this._clearRouteResultsGeometry();var n=this.getMap();if(e){var r={type:"FeatureCollection",features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e}]},s=new Dr({defaultDataProjection:"EPSG:4326",defaultStyle:t}),o=s.readFeatures(r,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new Di({source:new gn({features:o}),style:t}),n.addLayer(this._geojsonRoute)}}_fillRouteResultsDetailsFeatureGeometry(e,t){this._clearRouteResultsFeatureGeometry();var n=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]};for(var r=0;r<e.length;r++){for(var s=e[r],o=r+1,a=s.geometry.coordinates,l=0;l<a.length;l++)typeof a[l][0]=="string"&&(a[l][0]=parseFloat(a[l][0]),a[l][1]=parseFloat(a[l][1]));this._geojsonObject.features.push({type:"Feature",geometry:s.geometry,properties:{popupContent:"("+o+") distance : "+this._convertDistance(s.distance)+" / temps : "+this._convertSecondsToTime(s.duration)},id:o})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[0].getCoordinate()},properties:{description:"Point de dpart","marker-symbol":this.options.markersOpts.departure.url}});for(var c=1;c<this._currentPoints.length-1;c++)if(this._currentPoints[c]&&this._currentPoints[c].getCoordinate){var u=this._currentPoints[c].getCoordinate();u&&this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:u},properties:{description:"Point d'tape","marker-symbol":this.options.markersOpts.stages.url}})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[this._currentPoints.length-1].getCoordinate()},properties:{description:"Point d'arrive","marker-symbol":this.options.markersOpts.arrival.url}});var h=new Dr({defaultDataProjection:"EPSG:4326",defaultStyle:t}),d=this.getMap().getView().getProjection().getCode(),f=h.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:d});this._geojsonSections=new Di({source:new gn({features:f}),style:t,opacity:.9});var g;this._currentTransport==="Pieton"?(g="piton",this._geojsonSections.gpResultLayerId="Pieton$OGC:OPENLS;Itineraire"):(g="voiture",this._geojsonSections.gpResultLayerId="Voiture$OGC:OPENLS;Itineraire"),n.addLayer(this._geojsonSections),n.getControls().forEach(p=>{if(p instanceof gs){var m=this._geojsonSections.gpLayerId;p._layers[m].title===m&&p.addLayer(this._geojsonSections,{title:this.options.layerDescription.title+" ("+g+")",description:this.options.layerDescription.description})}},this),this._resultsHoverInteraction=new Tr({condition:hy,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",p=>this._onResultsFeatureMouseOver(p)),n.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Tr({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",p=>this._onResultsFeatureSelect(p)),n.addInteraction(this._resultsSelectInteraction)}_onResultsFeatureMouseOver(e){if(e.selected.length!==0){var t=e.selected[0],n=document.getElementById("GProuteResultsDetailsInstruction_"+t.getId()+"-"+this._uid);n&&n.classList&&n.classList.add("GProuteResultsDetailsInstructionHighlight")}if(e.deselected.length!==0){var r=e.deselected[0],s=document.getElementById("GProuteResultsDetailsInstruction_"+r.getId()+"-"+this._uid);s&&s.classList&&s.classList.remove("GProuteResultsDetailsInstructionHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var n=e.selected[0];this._popupContent.innerHTML=n.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new jn({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay))}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}_clear(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()}_clearRouteInputOptions(){this._initTransport(),this._initComputation(),this._initExclusions();var e;this._currentTransport==="Pieton"?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid),e&&(e.checked="true")):(e=document.getElementById("GProuteTransportCar-"+this._uid),e&&(e.checked="true"));var t=document.getElementById("GProuteComputationSelect-"+this._uid);t&&(t.value=this._currentComputation);var n=document.getElementById("GProuteExclusionsToll-"+this._uid);n&&(this._currentExclusions.indexOf("toll")!==-1?n.checked=!1:n.checked=!0);var r=document.getElementById("GProuteExclusionsTunnel-"+this._uid);r&&(this._currentExclusions.indexOf("tunnel")!==-1?r.checked=!1:r.checked=!0);var s=document.getElementById("GProuteExclusionsBridge-"+this._uid);s&&(this._currentExclusions.indexOf("bridge")!==-1?s.checked=!1:s.checked=!0)}_removeRouteStepLocations(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(e.length!==0){for(var t=[],n=0;n<e.length;n++)e[n].id.indexOf(this._uid)!==-1&&t.push(e[n]);for(var r=1;r<t.length-1;r++){var s=t[r].classList;if(s.length!==0)for(var o=0;o<s.length;o++)s[o]==="GPlocationStageFlexInput"&&document.getElementById(this._addUID("GPlocationStageRemove_"+(r+1))).click()}}}_clearRouteResultsDetails(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var t=this._resultsRouteValuesContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild)}}_clearRouteResultsGeometry(){var e=this.getMap();this._geojsonRoute!=null&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)}_clearRouteResultsFeatureGeometry(){var e=this.getMap();this._geojsonSections!=null&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null,this._geojsonObject=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_hideRouteSuggestedLocations(e){if(e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1)for(var t=parseInt(e.target.id.split("_")[1][0],10)-1,n=0;n<this._currentPoints.length;n++)n!==parseInt(t,10)&&this._currentPoints[n]._hideSuggestedLocation();else for(var r=0;r<this._currentPoints.length;r++)this._currentPoints[r]._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}_simplifiedInstructions(e){var t=[],n=e[0];e.length===1&&t.push(n);for(var r=1;r<e.length;r++){var s=e[r];if(s.instruction===n.instruction){n.distance=(parseFloat(s.distance)+parseFloat(n.distance)).toString(),n.duration=(parseFloat(s.duration)+parseFloat(n.duration)).toString();for(var o=1;o<s.geometry.coordinates.length;o++)n.geometry.coordinates.push(s.geometry.coordinates[o])}else t.push(n),n=s,r===e.length-1&&(t.push(s),n=null)}return Vi.log(t),t}_convertSecondsToTime(e){var t="";e=Math.round(e);var n=Math.floor(e/(60*60)),r=e%(60*60),s=Math.floor(r/60);return n&&(t=n+"h "),t+=s+" min",t}_convertDistance(e){var t="",n=parseInt(e/1e3,10);return n?t=n+" km":t=parseInt(e,10)+" m",t}};Object.assign(bA.prototype,mz);window.ol&&window.ol.control&&(window.ol.control.Route=bA);var vz={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPisochron"),i.className="GPwidget gpf-widget",i},_createShowIsoPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowIsochronPicto gpf-btn gpf-btn-icon-isocurve fr-btn",e.title="Calculer une isochrone",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowIsoPanelClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowIsoPanelClick(t)}),e},_createIsoPanelElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPisochronPanel"),i.className="GPpanel gpf-panel fr-modal",i},_createIsoPanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createIsoPanelHeaderElement:function(){var i=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title",t.innerHTML="Calcul d'isochrone",e.appendChild(t);var n=document.createElement("button");n.id=this._addUID("GPisochronPanelClose"),n.className="GPpanelClose GPisochronPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",n.title="Fermer le panneau",n.addEventListener?n.addEventListener("click",function(){document.getElementById(i._addUID("GPshowIsochronPicto")).click()},!1):n.attachEvent&&n.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowIsochronPicto")).click()});var r=document.createElement("span");return r.className="GPelementHidden gpf-visible",r.innerText="Fermer",n.appendChild(r),e.appendChild(n),e},_createIsoPanelFormElement:function(){var i=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),i.onIsoComputationSubmit(t),!1}),e},_createIsoWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GPisochronCalcWaitingContainer"),i.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",i.appendChild(e),i},_createIsoPanelFooterElement:function(){var i=document.createElement("div");return i.className="GPpanelFooter gpf-panel__footer fr-modal__footer",i},_createIsoPanelFormTypeChoiceElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPisochronChoice"),i},_createIsoPanelFormTypeChoiceChronElement:function(i){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var n=document.createElement("input");n.id=this._addUID("GPisochronChoiceAltChron"),n.name="GPisochronChoiceMode",n.type="radio",n.checked=!!i,n.addEventListener?n.addEventListener("change",function(o){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",e.onIsoTypeChoiceChange(o)},!1):n.attachEvent&&n.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",e.onIsoTypeChoiceChange()}),n.value="isochron",t.appendChild(n);var r=document.createElement("label");r.className="GPisochronChoiceAltImg gpf-label fr-label",r.htmlFor=this._addUID("GPisochronChoiceAltChron"),r.innerHTML="isochrone",t.appendChild(r);var s=document.createElement("span");return s.id=this._addUID("GPisochronChoiceAltChronTxt"),s.className="gpf-hidden",s.innerHTML="isochrone",s.addEventListener?s.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()},!1):s.attachEvent&&s.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),t.appendChild(s),t},_createIsoPanelFormTypeChoiceDistElement:function(i){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var n=document.createElement("input");n.id=this._addUID("GPisochronChoiceAltDist"),n.name="GPisochronChoiceMode",n.type="radio",n.checked=!!i,n.addEventListener?n.addEventListener("change",function(o){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",e.onIsoTypeChoiceChange(o)},!1):n.attachEvent&&n.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",e.onIsoTypeChoiceChange()}),n.value="isodistance",t.appendChild(n);var r=document.createElement("label");r.className="GPisochronChoiceAltImg gpf-label fr-label",r.htmlFor=this._addUID("GPisochronChoiceAltDist"),r.innerHTML="isodistance",t.appendChild(r);var s=document.createElement("span");return s.id=this._addUID("GPisochronChoiceAltDistTxt"),s.className="gpf-hidden",s.innerHTML="isodistance",s.addEventListener?s.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()},!1):s.attachEvent&&s.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),t.appendChild(s),t},_createIsoPanelFormValueIsochronElement:function(i){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueChron"),t.className=i?"GPflexInput gpf-flex":"GPelementHidden gpf-hidden";var n=document.createElement("label");n.id=this._addUID("GPisochronValueChronLabel"),n.className="gpf-label fr-label",n.htmlFor=this._addUID("GPisochronValueChronInput"),n.innerHTML="Temps",t.appendChild(n);var r=document.createElement("input");r.id=this._addUID("GPisochronValueChronInput1"),r.className="gpf-input fr-input",r.min="0",r.step="1",r.value="0",r.type="number",r.addEventListener?r.addEventListener("change",function(l){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(l)}):r.attachEvent&&r.attachEvent("onchange",function(l){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(l)}),t.appendChild(r);var s=document.createElement("label");s.innerHTML="h",s.className="gpf-label fr-label",t.appendChild(s);var o=document.createElement("input");o.id=this._addUID("GPisochronValueChronInput2"),o.className="gpf-input fr-input",o.min="0",o.max="59",o.step="1",o.value="0",o.type="number",o.addEventListener?o.addEventListener("change",function(l){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(l)}):o.attachEvent&&o.attachEvent("onchange",function(l){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(l)}),t.appendChild(o);var a=document.createElement("label");return a.innerHTML="min",a.className="gpf-label fr-label",t.appendChild(a),t},_createIsoPanelFormValueIsodistanceElement:function(i){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueDist"),t.className=i?"GPflexInput gpf-flex":"GPelementHidden gpf-hidden";var n=document.createElement("label");n.id=this._addUID("GPisochronValueDistLabel"),n.className="gpf-label fr-label",n.htmlFor=this._addUID("GPisochronValueDistInput"),n.innerHTML="Distance",t.appendChild(n);var r=document.createElement("input");r.id=this._addUID("GPisochronValueDistInput"),r.className="gpf-input fr-input",r.min="0",r.step="any",r.value="0",r.type="number",r.addEventListener?r.addEventListener("change",function(o){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(o)}):r.attachEvent&&r.attachEvent("onchange",function(o){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(o)}),t.appendChild(r);var s=document.createElement("label");return s.innerHTML="km",n.className="gpf-label fr-label",t.appendChild(s),t},_createIsoPanelFormModeChoiceElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPisochronModeChoice"),i},_createIsoPanelFormModeChoiceTransportElement:function(i){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronTransportChoice");var n=document.createElement("label");n.className="GPisochronModeLabel gpf-label fr-label",n.innerHTML="Mode de transport",t.appendChild(n);for(var r=0;r<i.length;r++){var s=i[r],o=document.createElement("div");if(o.className="GPisochronTransportChoice gpf-flex gpf-radio-group fr-radio-group",s==="Voiture"){var a=document.createElement("input");a.id=this._addUID("GPisochronTransportCar"),a.type="radio",a.name="GPisochronTransport",r===0&&(a.checked=!0),a.addEventListener?a.addEventListener("change",function(h){e.onIsoModeTransportChange(h)}):a.attachEvent&&a.attachEvent("onchange",function(h){e.onIsoModeTransportChange(h)}),a.value="Voiture",o.appendChild(a);var l=document.createElement("label");l.className="GPisochronTransportImg gpf-label fr-label",l.htmlFor=this._addUID("GPisochronTransportCar"),l.title="Voiture",l.innerHTML="Voiture",o.appendChild(l)}if(s==="Pieton"){var c=document.createElement("input");c.id=this._addUID("GPisochronTransportPedestrian"),c.type="radio",c.name="GPisochronTransport",r===0&&(c.checked=!0),c.addEventListener?c.addEventListener("change",function(h){e.onIsoModeTransportChange(h)}):c.attachEvent&&c.attachEvent("onchange",function(h){e.onIsoModeTransportChange(h)}),c.value="Pieton",o.appendChild(c);var u=document.createElement("label");u.className="GPisochronTransportImg gpf-label fr-label",u.htmlFor=this._addUID("GPisochronTransportPedestrian"),u.title="Piton",u.innerHTML="Piton",o.appendChild(u)}t.appendChild(o)}return t},_createIsoPanelFormModeChoiceDirectionElement:function(i){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronDirectionChoice");var n=document.createElement("label");n.className="GPisochronModeLabel gpf-label fr-label",n.innerHTML="Sens de parcours",t.appendChild(n);var r=document.createElement("select");r.id=this._addUID("GPisochronDirectionSelect"),r.className="GPselect gpf-select fr-select",r.addEventListener("change",function(c){e.onIsoModeDirectionChange(c)});for(var s=0;s<i.length;s++){var o=i[s];if(o.toLowerCase()==="departure"){var a=document.createElement("option");s===0&&(a.selected="selected"),a.value="departure",a.text="Dpart",r.appendChild(a)}if(o.toLowerCase()==="arrival"){var l=document.createElement("option");s===0&&(l.selected="selected"),l.value="arrival",l.text="Arrive",r.appendChild(l)}}return t.appendChild(r),t},_createShowIsoExclusionsPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowIsoExclusionsPicto"),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto gpf-btn fr-btn--sm fr-btn--secondary fr-icon-arrow-down-fill",e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowIsoSettingsClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowIsoSettingsClick(t)}),e},_createIsoPanelFormExclusionsElement:function(){var i=document.createElement("div");i.id=this._addUID("GPisoExclusions");var e=document.createElement("label");return e.className="GPisoExclusionsLabel gpf-label fr-label",e.innerHTML="Passages autoriss",i.appendChild(e),i},_createIsoPanelFormExclusionOptionsElement:function(i){var e=this,t=document.createElement("div");t.className="GPisoExclusionsOptions gpf-flex";for(var n in i)if(i.hasOwnProperty(n)){var r=i[n];switch(n){case"toll":var s=document.createElement("input");s.id=this._addUID("GPisoExclusionsToll"),s.type="checkbox",s.checked=!r,s.addEventListener?s.addEventListener("change",function(h){e.onIsoExclusionsChange(h)}):s.attachEvent&&s.attachEvent("onchange",function(h){e.onIsoExclusionsChange(h)}),s.value="Toll",t.appendChild(s);var o=document.createElement("label");o.className="GPisoExclusionsOption",o.htmlFor=this._addUID("GPisoExclusionsToll"),o.innerHTML="Pages",t.appendChild(o);break;case"tunnel":var a=document.createElement("input");a.id=this._addUID("GPisoExclusionsTunnel"),a.type="checkbox",a.checked=!r,a.addEventListener?a.addEventListener("change",function(h){e.onIsoExclusionsChange(h)}):a.attachEvent&&a.attachEvent("onchange",function(h){e.onIsoExclusionsChange(h)}),a.value="Tunnel",t.appendChild(a);var l=document.createElement("label");l.className="GPisoExclusionsOption",l.htmlFor=this._addUID("GPisoExclusionsTunnel"),l.innerHTML="Tunnels",t.appendChild(l);break;case"bridge":var c=document.createElement("input");c.id=this._addUID("GPisoExclusionsBridge"),c.type="checkbox",c.checked=!r,c.addEventListener?c.addEventListener("change",function(h){e.onIsoExclusionsChange(h)}):c.attachEvent&&c.attachEvent("onchange",function(h){e.onIsoExclusionsChange(h)}),c.value="Bridge",t.appendChild(c);var u=document.createElement("label");u.className="GPisoExclusionsOption",u.htmlFor=this._addUID("GPisoExclusionsBridge"),u.innerHTML="Ponts",t.appendChild(u);break}}return t},_createIsoSubmitFormElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPisochronSubmit"),i.className="GPsubmit gpf-btn fr-btn fr-btn--secondary",i.type="submit",i.value="Calculer",i},_createIsoFormResetElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPisochronReset"),e.className="GPresetPicto GPisochronReset gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary",e.title="Rinitialiser les paramtres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onIsoResetClick(t)}),e}},Wi=ot.getLogger("isocurve"),SA=class Ix extends Xn{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Ix))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.options.export){var t=He.assign({control:this},this.options.export);this.export=new el(t),this.export.render();var n=this;this.export.on("export:compute",r=>{n.dispatchEvent({type:"export:compute",content:r.content})})}this.draggable&&Ro.dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,this.options.position?null:e.getTargetElement()),this.collapsed||this._pictoIsoButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){Wi.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getLayer(){return this._geojsonLayer}setLayer(e){if(!e){this._geojsonLayer=null;return}if(!(e instanceof Di)){Wi.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonLayer=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){Wi.log("no valid geojson given :"+t.message)}}getData(){var e={type:"isocurve",transport:this._currentTransport,computation:this._currentComputation,exclusions:this._currentExclusions,direction:this._currentDirection,point:this._originPoint.getCoordinate(),results:{}};return He.assign(e.results,this._currentIsoResults),e}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions,this._currentDirection=e.direction;var t=document.getElementById("GPlocationOriginPointer_1-"+this._uid);t.checked=!0;var n=document.getElementById("GPlocationOriginCoords_1-"+this._uid);n.value="",this._originPoint.setCoordinate(e.point,"EPSG:4326"),this._currentIsoResults=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}compute(e,t,n){this._clear();var r=this._pictoIsoButton.ariaPressed;r!=="true"&&this._pictoIsoButton.click();var s=this.getMap();if(s){var o={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};He.assign(o,n),this._originPoint.setCoordinate(e);var a=this._originPoint.getCoordinate(),l=document.getElementById("GPlocationOrigin_1-"+this._uid);if(l.value=a[0].toFixed(4)+" / "+a[1].toFixed(4),this._currentTransport=o.transport,o.transport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=o.exclusions,this._currentComputation=o.method,o.method==="time"){var c=t.split(".");this._currentTimeHour=c[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=c[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=t,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=o.direction,o.direction==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1,this.onIsoComputationSubmit()}}init(){var e=this._originPoint.getCoordinate(),t=document.getElementById("GPlocationOrigin_1-"+this._uid);if(t.value=e[1].toFixed(4)+" / "+e[0].toFixed(4),this._currentTransport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentComputation==="time"){var n=this._currentIsoResults.time/60;this._currentTimeHour=Math.floor(n/60),document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Math.round((n/60-this._currentTimeHour)*60),document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=this._currentIsoResults.distance/1e3,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,methods:["time","distance"],graphs:["Voiture","Pieton"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:jt.lightOrange,offset:jt.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrone/isodistance bas sur un graphe"}},He.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=Xe.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._pictoIsoButton=null,this._waitingContainer=null,this._formContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._geojsonObject=null,this.export=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new Ee({fill:new $e({color:"rgba(0, 183, 152, 0.7)"}),stroke:new je({color:"rgba(0, 183, 152, 0)",width:1})}),this._resources={},this.listenerKey=null}_checkInputOptions(e){var t;if(e.methods)if(Array.isArray(e.methods))if(e.methods.length===0)e.methods=null;else for(t=0;t<e.methods.length;t++)typeof e.methods[t]!="string"&&Wi.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else Wi.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(e.graphs.length===0)e.graphs=null;else for(t=0;t<e.graphs.length;t++)typeof e.graphs[t]!="string"?Wi.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture"));else Wi.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(e.directions.length===0)e.directions=null;else for(t=0;t<e.directions.length;t++)typeof e.directions[t]!="string"&&Wi.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else Wi.warn("'directions' parameter should be an array"),e.directions=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initTransport(){this._currentTransport="Voiture";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Voiture","Pieton"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.isocurveOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="time";var e=this.options.methods;(!e||e.length===0)&&(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&(e[0]==="time"||e[0]==="distance")&&(this._currentComputation=e[0]);var t=this.options.isocurveOptions;t.method&&(this._currentComputation=t.method),t.time&&(this._currentComputation="time"),t.distance&&(this._currentComputation="distance")}_initDirection(){this._currentDirection="departure";var e=this.options.directions;(!e||e.length===0)&&(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&(e[0]==="departure"||e[0]==="arrival")&&(this._currentDirection=e[0]);var t=this.options.isocurveOptions;t.reverse||(this._currentDirection="departure"),t.reverse===!0&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e.k&&this._currentExclusions.push(t);var n=this.options.isocurveOptions;Array.isArray(n.exclusions)&&(this._currentExclusions=n.exclusions)}_initContainer(e){var t=this._container,n=this._pictoIsoButton=this._createShowIsoPictoElement();t.appendChild(n);var r=this._IsoPanelContainer=this._createIsoPanelElement(),s=this._createIsoPanelDivElement();r.appendChild(s);var o=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();s.appendChild(o);var a=this._formContainer=this._createIsoPanelFormElement(),l=this._createIsoPanelFormPointElement(e);a.appendChild(l);for(var c=!1,u=!1,h=this._createIsoPanelFormTypeChoiceElement(),d=0;d<this.options.methods.length;d++)this.options.methods[d]==="time"&&(c=d===0,h.appendChild(this._createIsoPanelFormTypeChoiceChronElement(c))),this.options.methods[d]==="distance"&&(u=d===0,h.appendChild(this._createIsoPanelFormTypeChoiceDistElement(u)));a.appendChild(h),a.appendChild(this._createIsoPanelFormValueIsochronElement(c)),a.appendChild(this._createIsoPanelFormValueIsodistanceElement(u));var f=this._createIsoPanelFormModeChoiceElement();if(f.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),f.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),a.appendChild(f),this.options.exclusions&&typeof this.options.exclusions=="object"&&Object.keys(this.options.exclusions).length!==0){a.appendChild(this._createShowIsoExclusionsPictoElement());var g=this._createIsoPanelFormExclusionsElement();g.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),a.appendChild(g)}var p=this._createIsoPanelFooterElement();a.appendChild(p);var m=this._createIsoFormResetElement();p.appendChild(m);var v=this._submitContainer=this._createIsoSubmitFormElement();p.appendChild(v),s.appendChild(a);var y=this._waitingContainer=this._createIsoWaitingElement();return r.appendChild(y),t.appendChild(r),t.addEventListener&&t.addEventListener("click",A=>this._hideIsoSuggestedLocations(A)),t}_createIsoPanelFormPointElement(e){this._originPoint=new nc({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,label:"Dpart",display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var t=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){t._clearGeojsonLayer();var n=t.getMap();t._originPoint._inputShowPointerContainer.checked?(t._formContainer.className="GPisochronFormMini gpf-panel__content fr-modal__content",this.listenerKey=n.on("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content",t.dispatchEvent("isocurve:drawend")})):(t._formContainer.className="gpf-panel__content fr-modal__content",gi(this.listenerKey)),t.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t._formContainer.className="gpf-panel__content fr-modal__content",e.un("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content"}),t.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t.dispatchEvent("isocurve:drawend")},this._originPoint._container}onIsoComputationSubmit(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate()){Wi.log("[Isocurve] Missing position parameter to submit isocurve request");return}var e=this._originPoint.getCoordinate(),t={x:e[0],y:e[1]};Wi.log("origin : ",t);var n,r;if(this._currentComputation.toLowerCase()==="time"){var s=document.getElementById("GPisochronValueChronInput1-"+this._uid),o=parseInt(s.value,10);isNaN&&isNaN(o)&&(o=0);var a=document.getElementById("GPisochronValueChronInput2-"+this._uid),l=parseInt(a.value,10);isNaN&&isNaN(l)&&(l=0),n=o*3600+l*60,Wi.log("time : "+n)}if(this._currentComputation.toLowerCase()==="distance"){var c=document.getElementById("GPisochronValueDistInput-"+this._uid);r=parseFloat(c.value)*1e3,Wi.log("distance : "+r)}if(!n&&!r){Wi.log("[Isocurve] Missing time or distance parameter to submit isocurve request");return}var u=this.options.isocurveOptions||{},h=u.protocol||"XHR",d=u.timeOut||0;h==="JSONP"&&d===0&&(d=15e3);var f=u.onFailure!==null&&typeof u.onFailure=="function",g=u.onSuccess!==null&&typeof u.onSuccess=="function",p=this,m={position:t,graph:u.graph||this._currentTransport,exclusions:u.exclusions||this._currentExclusions,method:u.method||this._currentComputation,smoothing:u.smoothing||!0,timeOut:d,protocol:h,resource:u.resource,onSuccess:function(v){Wi.log(v),v&&p._drawIsoResults(v),g&&u.onSuccess.call(p,v)},onFailure:function(v){p._hideWaitingContainer(),Wi.log(v.message),f&&u.onFailure.call(p,v)}};(this._currentDirection.toLowerCase()==="arrival"||u.reverse)&&(m.reverse=!0),n&&(m.time=n),r&&(m.distance=r),this._requestIsoCurve(m)}onShowIsoPanelClick(){var e=this.getMap();ds.unset(e);var t=this._pictoIsoButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed")}onIsoTypeChoiceChange(e){var t=e.target.value;t&&(t==="isodistance"&&(this._currentComputation="distance"),t==="isochron"&&(this._currentComputation="time"))}onIsoModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onIsoModeDirectionChange(e){var t=e.target.value;t&&(t.toLowerCase()==="arrival"?this._originPoint._buttonLabel.innerHTML="Arrive":this._originPoint._buttonLabel.innerHTML="Dpart",this._currentDirection=t)}onIsoExclusionsChange(e){var t=e.target.value,n=e.target.checked;if(t){for(var r=!1,s=null,o=0;o<this._currentExclusions.length;o++)Ex(this._currentExclusions[o],t.toLowerCase())&&(s=o,r=!0);!r&&!n&&this._currentExclusions.push(t.toLowerCase()),r&&n&&(this._currentExclusions[s]=null)}}onIsoResetClick(){this._clear()}onShowIsoSettingsClick(){}_requestIsoCurve(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.position&&(typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),Wi.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),yt.Services.isoCurve(e))}_drawIsoResults(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),!!e.geometry){var t=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry}]},this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._originPoint.getCoordinate()},properties:{description:"Point d'origine","marker-symbol":this.options.markerOpts.url}});var n=new Dr({defaultDataProjection:"EPSG:4326",defaultStyle:this._defaultFeatureStyle}),r=t.getView().getProjection().getCode(),s=n.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:r});this._geojsonLayer=new Di({source:new gn({features:s}),style:this._defaultFeatureStyle,opacity:.9});var o;if(this._currentTransport==="Pieton"?(o="piton",this._geojsonLayer.gpResultLayerId="Pieton$GEOPORTAIL:GPP:Isocurve"):(o="voiture",this._geojsonLayer.gpResultLayerId="Voiture$GEOPORTAIL:GPP:Isocurve"),t.addLayer(this._geojsonLayer),this.dispatchEvent({type:"isocurve:compute"}),s[0]&&s[0].getGeometry()&&s[0].getGeometry().getExtent()){var a=s[0].getGeometry().getExtent();t.getView().fit(a,t.getSize())}var l=this._currentComputation==="time"?"Isochrone":"Isodistance";t.getControls().forEach(c=>{if(c instanceof gs){var u=this._geojsonLayer.gpLayerId;c._layers[u].title===u&&c.addLayer(this._geojsonLayer,{title:this.options.layerDescription.title+" ("+l+"/"+o+")",description:this.options.layerDescription.description})}})}}_clear(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null}_clearIsoInputs(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var t=document.getElementById("GPisochronValueChronInput2-"+this._uid);t&&(t.value="0");var n=document.getElementById("GPisochronValueDistInput-"+this._uid);n&&(n.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var r;this._currentTransport==="Pieton"?(r=document.getElementById("GPisochronTransportPedestrian-"+this._uid),r&&(r.checked="true")):(r=document.getElementById("GPisochronTransportCar-"+this._uid),r&&(r.checked="true"));var s;this._currentComputation.toLowerCase()==="distance"?(s=document.getElementById("GPisochronChoiceAltDist-"+this._uid),s&&(s.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPelementHidden gpf-hidden")):(s=document.getElementById("GPisochronChoiceAltChron-"+this._uid),s&&(s.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPelementHidden gpf-hidden"));var o=document.getElementById("GPisochronDirectionSelect-"+this._uid);o&&(o.value=this._currentDirection),this._currentDirection==="arrival"?this._originPoint._buttonLabel.innerHTML="Arrive":this._originPoint._buttonLabel.innerHTML="Dpart";var a=document.getElementById("GPisoExclusionsToll-"+this._uid);a&&(this._currentExclusions.indexOf("toll")!==-1?a.checked=!1:a.checked=!0);var l=document.getElementById("GPisoExclusionsTunnel-"+this._uid);l&&(this._currentExclusions.indexOf("tunnel")!==-1?l.checked=!1:l.checked=!0);var c=document.getElementById("GPisoExclusionsBridge-"+this._uid);c&&(this._currentExclusions.indexOf("bridge")!==-1?c.checked=!1:c.checked=!0)}_clearGeojsonLayer(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null),this._geojsonObject=null}_hideIsoSuggestedLocations(e){e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1||this._originPoint._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}};Object.assign(SA.prototype,vz);window.ol&&window.ol.control&&(window.ol.control.Isocurve=SA);const Ex=function(i,e){if(i===e)return!0;if(typeof i=="object"&&i!=null&&typeof e=="object"&&e!=null){if(Object.keys(i).length!==Object.keys(e).length)return!1;for(var t in i)if(e.hasOwnProperty(t)){if(!Ex(i[t],e[t]))return!1}else return!1;return!0}else return!1};var yz={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPreverseGeocoding"),i.className="GPwidget gpf-widget",i},_createShowReverseGeocodingPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowReverseGeocodingPicto gpf-btn gpf-btn-icon-reverse fr-btn",e.title="Ouvrir la recherche inverse",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowReverseGeocodingClick()}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowReverseGeocodingClick()}),e},_createReverseGeocodingWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),i.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",i.appendChild(e),i},_createReverseGeocodingResultsPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPreverseGeocodingResultsPanel"),i.className="GPpanel GPelementHidden gpf-panel gpf-panel-reverse gpf-panel--hidden",i},_createReverseGeocodingResultsListElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPreverseGeocodingResultsList"),i.className="gpf-panel__list",i.setAttribute("tabindex","0"),i},_createReverseGeocodingResultElement:function(i,e){var t=this,n=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),r=document.createElement("div");r.id=this._addUID("GPreverseGeocodedLocation_"+e),r.setAttribute("tabindex","0"),r.className="GPautoCompleteProposal gpf-panel__items",r.innerHTML=i,r.title=i,r.addEventListener?(r.addEventListener("mouseover",function(s){t.onReverseGeocodingResultMouseOver(s)}),r.addEventListener("focus",function(s){t.onReverseGeocodingResultMouseOver(s)}),r.addEventListener("mouseout",function(s){t.onReverseGeocodingResultMouseOut(s)}),r.addEventListener("blur",function(s){t.onReverseGeocodingResultMouseOut(s)}),r.addEventListener("click",function(s){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(s)})):r.attachEvent&&(r.attachEvent("onmouseover",function(s){t.onReverseGeocodingResultMouseOver(s)}),r.attachEvent("onmouseout",function(s){t.onReverseGeocodingResultMouseOut(s)}),r.attachEvent("onclick",function(s){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(s)})),n.appendChild(r)},_createReverseGeocodingPanelElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPreverseGeocodingPanel"),i.className="GPpanel gpf-panel fr-modal",i},_createReverseGeocodingPanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createReverseGeocodingPanelHeaderElement:function(){var i=document.createElement("div");return i.className="GPpanelHeader gpf-panel__header fr-modal__header",i},_createReverseGeocodingPanelReturnPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreturnPicto GPreverseGeocodingReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary",e.classList.add("GPelementHidden"),e.classList.add("gpf-hidden"),e.addEventListener?e.addEventListener("click",function(t){document.getElementById(i._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(i._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(i._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(i._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(i._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),i.onGPreverseGeocodingReturnPictoClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){document.getElementById(i._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(i._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(i._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(i._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(i._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),i.onGPreverseGeocodingReturnPictoClick(t)}),e},_createReverseGeocodingPanelTitleElement:function(){var i=document.createElement("div");return i.className="GPpanelTitle gpf-panel__title fr-modal__title",i.id=this._addUID("GPreverseGeocodingHeaderTitle"),i.innerHTML="Recherche inverse",i},_createReverseGeocodingPanelCloseElement:function(){var i=this,e=document.createElement("button");e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose GPreverseGeocodingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(i._addUID("GPshowReverseGeocodingPicto")).click()},!1),e.addEventListener("keydown",function(n){n.keyCode===13&&document.getElementById(i._addUID("GPshowReverseGeocodingPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowReverseGeocodingPicto")).click()}),e.attachEvent("onkeydown",function(n){n.keyCode===13&&document.getElementById(i._addUID("GPshowReverseGeocodingPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createReverseGeocodingPanelFormElement:function(){var i=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),i.onReverseGeocodingSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),i.onReverseGeocodingSubmit()}),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(i){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse";var n=document.createElement("label");n.id="label-recherche-par",n.className="GPlabel gpf-label fr-label",n.innerHTML="Recherche par",n.title="Recherche par",t.appendChild(n);var r=document.createElement("select");r.setAttribute("aria-labelledby","label-recherche-par"),r.className="GPselect gpf-select fr-select",r.addEventListener?r.addEventListener("change",function(c){e.onReverseGeocodingTypeChange(c)}):r.attachEvent&&r.attachEvent("onchange",function(c){e.onReverseGeocodingTypeChange(c)}),(!i||!Array.isArray(i))&&(i=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var s=0;s<i.length;s++)switch(i[s]){case"PositionOfInterest":var o=document.createElement("option");o.value="PositionOfInterest",o.text="Lieux/toponymes",r.appendChild(o);break;case"StreetAddress":var a=document.createElement("option");a.value="StreetAddress",a.text="Adresses",r.appendChild(a);break;case"CadastralParcel":var l=document.createElement("option");l.value="CadastralParcel",l.text="Parcelles cadastrales",r.appendChild(l);break}return t.appendChild(r),t},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(i){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse";var n=document.createElement("label");n.id="label-delimitation",n.className="GPlabel gpf-label fr-label",n.innerHTML="Dlimitation",n.title="Dlimitation",t.appendChild(n);var r=document.createElement("select");r.setAttribute("aria-labelledby","label-delimitation"),r.className="GPselect gpf-select fr-select",r.addEventListener?r.addEventListener("change",function(c){e.onReverseGeocodingDelimitationChange(c)}):r.attachEvent&&r.attachEvent("onchange",function(c){e.onReverseGeocodingDelimitationChange(c)}),(!i||!Array.isArray(i))&&(i=["Point","Circle","Extent"]);for(var s=0;s<i.length;s++)switch(i[s].toLowerCase()){case"point":var o=document.createElement("option");o.value="point",o.text="Pointer un lieu",r.appendChild(o);break;case"circle":var a=document.createElement("option");a.value="circle",a.text="Dessiner un cercle",r.appendChild(a);break;case"extent":var l=document.createElement("option");l.value="extent",l.text="Dessiner une emprise",r.appendChild(l);break}return t.appendChild(r),t},_createReverseGeocodingSubmitFormElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPreverseGeocodingSubmit"),i.className="GPsubmit gpf-btn fr-btn fr-btn--secondary",i.type="submit",i.value="Rechercher",i}},ii=ot.getLogger("reversegeocoding"),wx=class bx extends Xn{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof bx))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){ii.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showReverseGeocodingButton.click(),this.collapsed=e)}setMap(e){if(e)this._activateMapInteraction(e),this.draggable&&Ro.dragElement(this._panelContainer,this._panelHeaderContainer,this.options.position?null:e.getTargetElement()),this.collapsed||this._showReverseGeocodingButton.setAttribute("aria-pressed",!0);else{var t=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),this._inputFeaturesLayer!=null&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getData(){return this._reverseGeocodingLocations}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},He.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=Xe.generate(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingButton=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._panelCloseButton=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestGeom=null,this._requestPosition=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new Ee({image:new Qt({src:jt.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new Ee({image:new Qt({src:jt.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null}_checkInputOptions(e){var t,n;if(e.resources){var r=e.resources;if(Array.isArray(r)){var s=["StreetAddress","PositionOfInterest","CadastralParcel"],o=[];for(t=0;t<r.length;t++)s.indexOf(r[t])===-1&&(o.push(t),ii.log("[ReverseGeocode] options.resources : "+r[t]+" is not a resource for reverse geocode"));if(o.length!==0)for(n=0;n<o.length;n++)r.splice(o[n],1)}else ii.log("[ReverseGeocode] 'options.resources' parameter should be an array"),r=null}if(e.delimitations){var a=e.delimitations;if(Array.isArray(a)){var l=["Circle","Point","Extent"],c=[];for(t=0;t<a.length;t++)l.indexOf(a[t])===-1&&(c.push(t),ii.log("[ReverseGeocode] options.delimitations : "+a[t]+" is not a delimitation for reverse geocode"));if(c.length!==0)for(n=0;n<c.length;n++)a.splice(c[n],1)}else ii.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),a=null}}_initGeocodingType(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;(!e||e.length===0)&&(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(e)&&e.length&&(e[0]==="StreetAddress"||e[0]==="PositionOfInterest"||e[0]==="CadastralParcel")&&(this._currentGeocodingType=e[0]);var t=this.options.reverseGeocodeOptions;t.filterOptions&&Array.isArray(t.filterOptions.type)&&t.filterOptions.type.length!==0&&(this._currentGeocodingType=t.filterOptions.type[0])}_initGeocodingDelimitation(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if((!e||e.length===0)&&(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var t=e[0].toLowerCase();(t==="point"||t==="circle"||t==="extent")&&(this._currentGeocodingDelimitation=e[0])}}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var n=document.createElement("input");return n.type="button",n.className="gp-styling-button closer",n.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(n),t}_initContainer(){var e=this._createMainContainerElement(),t=this._showReverseGeocodingButton=this._createShowReverseGeocodingPictoElement();e.appendChild(t);var n=this._panelContainer=this._createReverseGeocodingPanelElement(),r=this._createReverseGeocodingPanelDivElement();n.appendChild(r);var s=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),o=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();s.appendChild(o);var a=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();s.appendChild(a);var l=this._panelCloseButton=this._createReverseGeocodingPanelCloseElement();s.appendChild(l),r.appendChild(s);var c=this._formContainer=this._createReverseGeocodingPanelFormElement();c.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),c.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var u=this._createReverseGeocodingSubmitFormElement();c.appendChild(u),r.appendChild(c);var h=this._waitingContainer=this._createReverseGeocodingWaitingElement();r.appendChild(h);var d=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),f=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return d.appendChild(f),r.appendChild(d),e.appendChild(n),ii.log(e),e}_activateMapInteraction(e){if(!this.collapsed){this._inputFeaturesLayer==null&&(this._inputFeatures=new bi,this._inputFeaturesSource=new gn({features:this._inputFeatures}),this._inputFeaturesLayer=new Di({source:this._inputFeaturesSource,style:new Ee({fill:new $e({color:"rgba(0, 183, 152, 0.3)"}),stroke:new je({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Qt({src:jt.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer));var t=this._currentGeocodingDelimitation.toLowerCase();switch(t){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e);break}e.getControls().forEach(n=>{if(n instanceof gs){var r=this._inputFeaturesLayer.gpLayerId;n._layers[r].title===r&&(n.addLayer(this._inputFeaturesLayer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description}),n.setRemovable(this._inputFeaturesLayer,!1))}})}}_activatePointInteraction(e){this._mapInteraction=new yr({style:new Ee({image:new Ei({radius:0,fill:new $e({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",t=>{ii.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"point")}),this._mapInteraction.on("drawend",t=>{ii.log("on drawend",t),t.feature&&t.feature.getGeometry&&(this._requestGeom={type:"Point",coordinates:[this._requestPosition.lon,this._requestPosition.lat]})}),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)}_activateCircleInteraction(e){this._mapInteraction=new yr({style:new Ee({fill:new $e({color:"rgba(0, 183, 152, 0.3)"}),stroke:new je({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Ei({radius:4,fill:new $e({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",t=>{ii.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"circle")}),this._mapInteraction.on("drawend",t=>{if(ii.log("on drawend",t),t.feature&&t.feature.getGeometry){var n=t.feature.getGeometry().getRadius();this._requestGeom={},this._requestGeom.type="Circle",this._requestGeom.radius=n,this._requestPosition&&(this._requestGeom.coordinates=[this._requestPosition.lon,this._requestPosition.lat]),ii.log("circle radius : ",n)}}),e.addInteraction(this._mapInteraction)}_activateBoxInteraction(e){var t=function(n,r){r||(r=new wi([]));var s=n[0],o=n[1];return r.setCoordinates([[s,[s[0],o[1]],o,[o[0],s[1]],s]]),r};this._mapInteraction=new yr({style:new Ee({fill:new $e({color:"rgba(0, 183, 152, 0.3)"}),stroke:new je({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Ei({radius:4,fill:new $e({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:t}),this._mapInteraction.on("drawstart",n=>{ii.log("on drawstart",n),this._inputFeatures.clear(),this._onDrawStart(n,"polygon")}),this._mapInteraction.on("drawend",n=>{ii.log("on drawend",n),this._onBoxDrawEnd(n)}),e.addInteraction(this._mapInteraction)}_removeMapInteraction(e){this._mapInteraction!=null&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()}_onDrawStart(e,t){var n;if(e.feature&&e.feature.getGeometry){var r=e.feature.getGeometry();t==="point"&&(n=r.getCoordinates()),t==="circle"&&(n=r.getCenter()),t==="polygon"&&(n=r.getFirstCoordinate())}if(n){var s;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)s=this.options.reverseGeocodeOptions.srs;else{var o=this.getMap();if(!o||!o.getView())return;s=o.getView().getProjection()}var a=Et(n,s,"EPSG:4326");this._requestPosition={lon:a[0],lat:a[1]},ii.log("position coordinates : ",this._requestPosition)}}_onBoxDrawEnd(e){if(e.feature&&e.feature.getGeometry){var t=e.feature.getGeometry().getCoordinates()[0],n=t[0],r=t[2],s;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)s=this.options.reverseGeocodeOptions.srs;else{var o=this.getMap();if(!o||!o.getView())return;s=o.getView().getProjection()}var a=Et(n,s,"EPSG:4326"),l=Et(r,s,"EPSG:4326"),c={};a[0]<l[0]?(c.left=a[0],c.right=l[0]):(c.left=l[0],c.right=a[0]),a[1]<l[1]?(c.bottom=a[1],c.top=l[1]):(c.bottom=l[1],c.top=a[1]),this._requestGeom={type:"Polygon",coordinates:[[[c.left,c.top],[c.left,c.bottom],[c.right,c.bottom],[c.right,c.top],[c.left,c.top]]]},ii.log("searchGeometry filter : ",this._requestGeom)}}_setCursor(e,t){if(t=t||this.getMap(),!!t){var n=t.getTargetElement();e?n.style.cursor=e:n.style.cursor=null}}_reverseGeocodingRequest(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),yt.Services.reverseGeocode(this._requestOptions)}_getReverseGeocodingRequestOptions(){var e=this.getMap(),t=this.options.reverseGeocodeOptions,n=this;typeof this.options.ssl!="boolean"&&(this.options.ssl=!0);var r=t.onFailure!==null&&typeof t.onFailure=="function",s=t.onSuccess!==null&&typeof t.onSuccess=="function",o={apiKey:t.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:t.maximumResponses||18,timeOut:t.timeOut||3e4,onSuccess:function(a){a.locations&&(ii.log("reverseGeocode results : ",a.locations),n._displayGeocodedLocations(a.locations)),s&&t.onSuccess.call(n,a.locations)},onFailure:function(a){n._hideWaitingContainer(),n._clearResults(),n._clearInputFeatures(),n._activateMapInteraction(e),ii.log(a.message),r&&t.onFailure.call(n,a)}};return this._requestGeom.type.toLowerCase()==="circle"?(this._requestGeom.radius>500&&(ii.log("INFO : initial circle radius ("+this._requestGeom.radius+") limited to 1000m."),this._requestGeom.radius=500),o.searchGeometry=this._requestGeom):this._requestGeom.type.toLowerCase()==="polygon"?o.searchGeometry=this._requestGeom:this._requestGeom.type.toLowerCase()==="point"&&(this._currentGeocodingType==="StreetAddress"?(o.searchGeometry={type:"Circle",radius:50,coordinates:this._requestGeom.coordinates},o.maximumResponses=1):o.searchGeometry=this._requestGeom),ii.log("reverseGeocode request options : ",o),o}_displayGeocodedLocations(e){this._clearResults(),this._reverseGeocodingLocations=e,this.dispatchEvent({type:"reversegeocode:compute"}),this._formContainer.className="GPelementHidden gpf-hidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Rsultats de la recherche",this._returnPictoContainer.classList.remove("GPelementHidden"),this._returnPictoContainer.classList.remove("gpf-hidden"),this._resultsContainer.className="GPpanel gpf-panel gpf-panel-reverse",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)}_fillGeocodedLocationListContainer(e){for(var t=0;t<e.length;t++){var n=e[t];ii.log(n);var r=this._fillGeocodedLocationDescription(n);r.length!==0&&this._createReverseGeocodingResultElement(r,t)}}_fillGeocodedLocationDescription(e){if(!(!e||!e.placeAttributes)){var t=e.placeAttributes,n="";switch(e.type){case"StreetAddress":t.street&&(n+=t.housenumber?t.housenumber+" ":"",n+=t.street+", "),n+=t.postcode+" "+t.city;break;case"PositionOfInterest":n+=t.toponym,t.postcode.length===1&&(n+=", "+t.postcode[0]),n+=" ("+t.category.join(",")+")";break;case"CadastralParcel":n+=t.id,n+=t.city?" ("+t.city+")":"";break;default:n+=t.city?t.city:"";break}return n}}_displayGeocodedLocationsOnMap(e){if(this._reverseGeocodingLocations.length!==0){var t=this.getMap();this._createResultsLayer();for(var n=0;n<e.length;n++)this._addResultFeature(e[n],n);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var r=this._resultsFeaturesSource.getExtent();t.getView().fit(r,t.getSize())}}else{var s=this._resultsFeatures.item(0),o=s.getGeometry().getCoordinates();t.getView().setCenter(o),t.getView().setZoom(17)}this._resultsHoverInteraction=new Tr({condition:hy,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",l=>this._onResultsFeatureMouseOver(l)),t.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Tr({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",l=>this._onResultsFeatureSelect(l)),t.addInteraction(this._resultsSelectInteraction);var a="";switch(this._currentGeocodingType){case"StreetAddress":a="adresses";break;case"PositionOfInterest":a="toponymes";break;case"CadastralParcel":a="parcelles cadastrales";break}t.getControls().forEach(l=>{if(l instanceof gs){var c=this._resultsFeaturesLayer.gpLayerId;l._layers[c].title===c&&(l.addLayer(this._resultsFeaturesLayer,{title:"Rsultats de la recherche inverse",description:"Rsultats de la recherche inverse sur les "+a}),l.setRemovable(this._resultsFeaturesLayer,!1))}})}}_createResultsLayer(){var e=this.getMap();this._resultsFeatures=new bi,this._resultsFeaturesSource=new gn({features:this._resultsFeatures}),this._resultsFeaturesLayer=new Di({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)}_addResultFeature(e,t){var n=this.getMap(),r=[e.position.lon,e.position.lat];if(r.length!==0){var s=n.getView(),o=s.getProjection().getCode();o!=="EPSG:4326"&&(r=Et(r,"EPSG:4326",o));var a=new Ht({geometry:new Ki(r)});a.setStyle(this._resultsDefaultStyle),a.setId(t),a.setProperties({location:e,popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(a)}}_fillPopupContent(e){var t="<ul>",n=e.placeAttributes;for(var r in n)n.hasOwnProperty(r)&&r!=="trueGeometry"&&r!=="extraFields"&&r!=="houseNumberInfos"&&r!=="_count"&&(t+="<li>",t+='<span class="gp-attname-others-span">'+r.toUpperCase()+" : </span>",t+=n[r],t+=" </li>");return t+=" </ul>",t}_onResultsFeatureMouseOver(e){var t;if(e.selected.length!==0){if(t=e.selected[0],t.setStyle(this._resultsSelectedStyle),t.getId()!=null){var n=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);n&&n.classList&&n.classList.add("GPlocationHighlight")}document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid)}if(e.deselected.length!==0){t=e.deselected[0],t.setStyle(this._resultsDefaultStyle);var r=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);r&&r.classList&&r.classList.remove("GPlocationHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var n=e.selected[0];this._popupContent.innerHTML=n.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new jn({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay)),this.dispatchEvent({type:"reversegeocode:onclickresult",location:n.getProperties().location})}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}onShowReverseGeocodingClick(){var e=this.getMap();if(e){ds.unset(e);var t=this._showReverseGeocodingButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),!this._waiting&&!this._reverseGeocodingLocations.length&&(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(e),this._inputFeaturesLayer!=null&&(e.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(e))}}onReverseGeocodingTypeChange(e){var t=e.target.selectedIndex,n=e.target.options[t].value;n&&(ii.log(n),this._currentGeocodingType=n)}onReverseGeocodingDelimitationChange(e){var t=e.target.selectedIndex,n=e.target.options[t].value;if(n){ii.log(n),this._currentGeocodingDelimitation=n;var r=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(r),this._activateMapInteraction(r)}}onGPreverseGeocodingReturnPictoClick(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())}onReverseGeocodingSubmit(){if(!this._requestPosition){ii.log("missing position");return}this._reverseGeocodingRequest()}onReverseGeocodingResultClick(e){var t=e.target.id,n=t.substring(t.indexOf("_")+1),r=this._resultsFeaturesSource.getFeatureById(parseInt(n,10));this.dispatchEvent({type:"reversegeocode:onclickresult",location:r.getProperties().location})}onReverseGeocodingResultMouseOver(e){var t=e.target.id,n=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GPlocationHighlight"),!!this._resultsFeaturesSource){var r=this._resultsFeaturesSource.getFeatureById(parseInt(n,10));r.setStyle(this._resultsSelectedStyle)}}onReverseGeocodingResultMouseOut(e){var t=e.target.id,n=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GPlocationHighlight"),!!this._resultsFeaturesSource){var r=this._resultsFeaturesSource.getFeatureById(parseInt(n,10));r.setStyle(this._resultsDefaultStyle)}}_clearResults(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_clearInputFeatures(){this._inputFeatures&&this._inputFeatures.clear(),this._requestGeom=null,this._requestPosition=null}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}};Object.assign(wx.prototype,yz);window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=wx);class xA{read(e){if(!e)return null;if(typeof e=="string"){const t=Ps(e);return this.readFromDocument(t)}return xs(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){We()}}const Az="http://www.w3.org/1999/xlink";function Wc(i){return i.getAttributeNS(Az,"href")}const tn=[null,"http://www.opengis.net/wms"],_z=J(tn,{Service:L(jz),Capability:L(Bz)}),Cz=J(tn,{Request:L(Xz),Exception:L(Yz),Layer:L(Hz)});class Iz extends xA{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=ve({version:this.version},_z,e,[]);return t||null}}const Ez=J(tn,{Name:L(ae),Title:L(ae),Abstract:L(ae),KeywordList:L(Mx),OnlineResource:L(Wc),ContactInformation:L(zz),Fees:L(ae),AccessConstraints:L(ae),LayerLimit:L(xn),MaxWidth:L(xn),MaxHeight:L(xn)}),wz=J(tn,{ContactPersonPrimary:L(Vz),ContactPosition:L(ae),ContactAddress:L(Wz),ContactVoiceTelephone:L(ae),ContactFacsimileTelephone:L(ae),ContactElectronicMailAddress:L(ae)}),bz=J(tn,{ContactPerson:L(ae),ContactOrganization:L(ae)}),Sz=J(tn,{AddressType:L(ae),Address:L(ae),City:L(ae),StateOrProvince:L(ae),PostCode:L(ae),Country:L(ae)}),xz=J(tn,{Format:un(ae)}),Sx=J(tn,{Name:L(ae),Title:L(ae),Abstract:L(ae),KeywordList:L(Mx),CRS:Yt(ae),EX_GeographicBoundingBox:L(Uz),BoundingBox:Yt(Nz),Dimension:Yt(qz),Attribution:L(Fz),AuthorityURL:Yt(Jz),Identifier:Yt(ae),MetadataURL:Yt(Qz),DataURL:Yt(Ws),FeatureListURL:Yt(Ws),Style:Yt($z),MinScaleDenominator:L(lt),MaxScaleDenominator:L(lt),Layer:Yt(xx)}),Pz=J(tn,{Title:L(ae),OnlineResource:L(Wc),LogoURL:L(Px)}),Mz=J(tn,{westBoundLongitude:L(lt),eastBoundLongitude:L(lt),southBoundLatitude:L(lt),northBoundLatitude:L(lt)}),Rz=J(tn,{GetCapabilities:L(Fp),GetMap:L(Fp),GetFeatureInfo:L(Fp)}),Tz=J(tn,{Format:Yt(ae),DCPType:Yt(Zz)}),Lz=J(tn,{HTTP:L(Kz)}),Gz=J(tn,{Get:L(Ws),Post:L(Ws)}),Oz=J(tn,{Name:L(ae),Title:L(ae),Abstract:L(ae),LegendURL:Yt(Px),StyleSheetURL:L(Ws),StyleURL:L(Ws)}),Dz=J(tn,{Format:L(ae),OnlineResource:L(Wc)}),kz=J(tn,{Keyword:un(ae)});function Fz(i,e){return ve({},Pz,i,e)}function Nz(i,e){const t=[ws(i.getAttribute("minx")),ws(i.getAttribute("miny")),ws(i.getAttribute("maxx")),ws(i.getAttribute("maxy"))],n=[ws(i.getAttribute("resx")),ws(i.getAttribute("resy"))];return{crs:i.getAttribute("CRS"),extent:t,res:n}}function Uz(i,e){const t=ve({},Mz,i,e);if(!t)return;const n=t.westBoundLongitude,r=t.southBoundLatitude,s=t.eastBoundLongitude,o=t.northBoundLatitude;if(!(n===void 0||r===void 0||s===void 0||o===void 0))return[n,r,s,o]}function Bz(i,e){return ve({},Cz,i,e)}function jz(i,e){return ve({},Ez,i,e)}function zz(i,e){return ve({},wz,i,e)}function Vz(i,e){return ve({},bz,i,e)}function Wz(i,e){return ve({},Sz,i,e)}function Yz(i,e){return ve([],xz,i,e)}function Hz(i,e){const t=ve({},Sx,i,e);return t.Layer===void 0?Object.assign(t,xx(i,e)):t}function xx(i,e){const t=e[e.length-1],n=ve({},Sx,i,e);if(!n)return;let r=Pa(i.getAttribute("queryable"));r===void 0&&(r=t.queryable),n.queryable=r!==void 0?r:!1;let s=rg(i.getAttribute("cascaded"));s===void 0&&(s=t.cascaded),n.cascaded=s;let o=Pa(i.getAttribute("opaque"));o===void 0&&(o=t.opaque),n.opaque=o!==void 0?o:!1;let a=Pa(i.getAttribute("noSubsets"));a===void 0&&(a=t.noSubsets),n.noSubsets=a!==void 0?a:!1;let l=ws(i.getAttribute("fixedWidth"));l||(l=t.fixedWidth),n.fixedWidth=l;let c=ws(i.getAttribute("fixedHeight"));return c||(c=t.fixedHeight),n.fixedHeight=c,["Style","CRS","AuthorityURL"].forEach(function(d){if(d in t){const f=n[d]||[];n[d]=f.concat(t[d])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(d){if(!(d in n)){const f=t[d];n[d]=f}}),n}function qz(i,e){return{name:i.getAttribute("name"),units:i.getAttribute("units"),unitSymbol:i.getAttribute("unitSymbol"),default:i.getAttribute("default"),multipleValues:Pa(i.getAttribute("multipleValues")),nearestValue:Pa(i.getAttribute("nearestValue")),current:Pa(i.getAttribute("current")),values:ae(i)}}function Ws(i,e){return ve({},Dz,i,e)}function Xz(i,e){return ve({},Rz,i,e)}function Zz(i,e){return ve({},Lz,i,e)}function Kz(i,e){return ve({},Gz,i,e)}function Fp(i,e){return ve({},Tz,i,e)}function Px(i,e){const t=Ws(i,e);if(t){const n=[rg(i.getAttribute("width")),rg(i.getAttribute("height"))];return t.size=n,t}}function Jz(i,e){const t=Ws(i,e);if(t)return t.name=i.getAttribute("name"),t}function Qz(i,e){const t=Ws(i,e);if(t)return t.type=i.getAttribute("type"),t}function $z(i,e){return ve({},Oz,i,e)}function Mx(i,e){return ve([],kz,i,e)}const Kn=[null,"http://www.opengis.net/ows/1.1"],eV=J(Kn,{ServiceIdentification:L(bV),ServiceProvider:L(xV),OperationsMetadata:L(EV)});class tV extends xA{constructor(){super()}readFromNode(e){const t=ve({},eV,e,[]);return t||null}}const iV=J(Kn,{DeliveryPoint:L(ae),City:L(ae),AdministrativeArea:L(ae),PostalCode:L(ae),Country:L(ae),ElectronicMailAddress:L(ae)}),nV=J(Kn,{Value:Yt(PV)}),rV=J(Kn,{AllowedValues:L(mV)}),sV=J(Kn,{Phone:L(wV),Address:L(pV)}),oV=J(Kn,{HTTP:L(CV)}),aV=J(Kn,{Get:Yt(_V),Post:void 0}),lV=J(Kn,{DCP:L(AV)}),cV=J(Kn,{Operation:IV}),uV=J(Kn,{Voice:L(ae),Facsimile:L(ae)}),hV=J(Kn,{Constraint:Yt(vV)}),dV=J(Kn,{IndividualName:L(ae),PositionName:L(ae),ContactInfo:L(yV)}),fV=J(Kn,{Abstract:L(ae),AccessConstraints:L(ae),Fees:L(ae),Title:L(ae),ServiceTypeVersion:L(ae),ServiceType:L(ae)}),gV=J(Kn,{ProviderName:L(ae),ProviderSite:L(Wc),ServiceContact:L(SV)});function pV(i,e){return ve({},iV,i,e)}function mV(i,e){return ve({},nV,i,e)}function vV(i,e){const t=i.getAttribute("name");if(t)return ve({name:t},rV,i,e)}function yV(i,e){return ve({},sV,i,e)}function AV(i,e){return ve({},oV,i,e)}function _V(i,e){const t=Wc(i);if(t)return ve({href:t},hV,i,e)}function CV(i,e){return ve({},aV,i,e)}function IV(i,e){const t=i.getAttribute("name"),n=ve({},lV,i,e);if(!n)return;const r=e[e.length-1];r[t]=n}function EV(i,e){return ve({},cV,i,e)}function wV(i,e){return ve({},uV,i,e)}function bV(i,e){return ve({},fV,i,e)}function SV(i,e){return ve({},dV,i,e)}function xV(i,e){return ve({},gV,i,e)}function PV(i,e){return ae(i)}const vs=[null,"http://www.opengis.net/wmts/1.0"],Yc=[null,"http://www.opengis.net/ows/1.1"],MV=J(vs,{Contents:L(jV)});class RV extends xA{constructor(){super(),this.owsParser_=new tV}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let n=this.owsParser_.readFromNode(e);return n?(n.version=t,n=ve(n,MV,e,[]),n||null):null}}const TV=J(vs,{Layer:Yt(zV),TileMatrixSet:Yt(VV)}),LV=J(vs,{Style:Yt(WV),Format:Yt(ae),TileMatrixSetLink:Yt(YV),Dimension:Yt(HV),ResourceURL:Yt(qV)},J(Yc,{Title:L(ae),Abstract:L(ae),WGS84BoundingBox:L(Rx),Identifier:L(ae)})),GV=J(vs,{LegendURL:Yt(XV)},J(Yc,{Title:L(ae),Identifier:L(ae)})),OV=J(vs,{TileMatrixSet:L(ae),TileMatrixSetLimits:L(KV)}),DV=J(vs,{TileMatrixLimits:un(JV)}),kV=J(vs,{TileMatrix:L(ae),MinTileRow:L(xn),MaxTileRow:L(xn),MinTileCol:L(xn),MaxTileCol:L(xn)}),FV=J(vs,{Default:L(ae),Value:Yt(ae)},J(Yc,{Identifier:L(ae)})),NV=J(Yc,{LowerCorner:un($m),UpperCorner:un($m)}),UV=J(vs,{WellKnownScaleSet:L(ae),TileMatrix:Yt(ZV)},J(Yc,{SupportedCRS:L(ae),Identifier:L(ae),BoundingBox:L(Rx)})),BV=J(vs,{TopLeftCorner:L($m),ScaleDenominator:L(lt),TileWidth:L(xn),TileHeight:L(xn),MatrixWidth:L(xn),MatrixHeight:L(xn)},J(Yc,{Identifier:L(ae)}));function jV(i,e){return ve({},TV,i,e)}function zV(i,e){return ve({},LV,i,e)}function VV(i,e){return ve({},UV,i,e)}function WV(i,e){const t=ve({},GV,i,e);if(!t)return;const n=i.getAttribute("isDefault")==="true";return t.isDefault=n,t}function YV(i,e){return ve({},OV,i,e)}function HV(i,e){return ve({},FV,i,e)}function qV(i,e){const t=i.getAttribute("format"),n=i.getAttribute("template"),r=i.getAttribute("resourceType"),s={};return t&&(s.format=t),n&&(s.template=n),r&&(s.resourceType=r),s}function Rx(i,e){const t=ve([],NV,i,e);if(t.length==2)return Fn(t)}function XV(i,e){const t={};return t.format=i.getAttribute("format"),t.href=Wc(i),t}function $m(i,e){const t=ae(i).split(/\s+/);if(!t||t.length!=2)return;const n=+t[0],r=+t[1];if(!(isNaN(n)||isNaN(r)))return[n,r]}function ZV(i,e){return ve({},BV,i,e)}function KV(i,e){return ve([],DV,i,e)}function JV(i,e){return ve({},kV,i,e)}var Tx={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(Lu,function(){var t={};t=function(){this.listeners={}},t.prototype={addEventListener:function(r,s,o){for(var a=[],l=arguments.length,c=0;c<l;c++)a.push(arguments[c]);a=a.length>3?a.splice(3,a.length-1):[],typeof this.listeners[r]<"u"?this.listeners[r].push({scope:o,callback:s,args:a}):this.listeners[r]=[{scope:o,callback:s,args:a}]},removeEventListener:function(r,s,o){if(typeof this.listeners[r]<"u"){for(var a=this.listeners[r].length,l=[],c=0;c<a;c++){var u=this.listeners[r][c];u.scope==o&&u.callback==s||l.push(u)}this.listeners[r]=l}},hasEventListener:function(r,s,o){if(typeof this.listeners[r]<"u"){var a=this.listeners[r].length;if(s===void 0&&o===void 0)return a>0;for(var l=0;l<a;l++){var c=this.listeners[r][l];if((!o||c.scope==o)&&c.callback==s)return!0}}return!1},dispatch:function(r,s){for(var o={type:r,target:s},a=[],l=arguments.length,c=0;c<l;c++)a.push(arguments[c]);if(a=a.length>2?a.splice(2,a.length-1):[],a=[o].concat(a),typeof this.listeners[r]<"u")for(var u=this.listeners[r].slice(),h=u.length,c=0;c<h;c++){var d=u[c];if(d&&d.callback){var f=a.concat(d.args);d.callback.apply(d.scope,f)}}},getEvents:function(){var r="";for(var s in this.listeners)for(var o=this.listeners[s].length,a=0;a<o;a++){var l=this.listeners[s][a];r+=l.scope&&l.scope.className?l.scope.className:"anonymous",r+=" listen for '"+s+`'
`}return r}};var n=new t;return n})})(Tx);var QV=Tx.exports;const $i=by(QV);var Mn={onloaded:"editor:onloaded",layer:{onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},legend:{onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},group:{oncollapse:"editor:group:oncollapse"},style:{oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},filter:{oneditjson:"editor:filter:oneditjson"},themes:{onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"},search:{onsubmit:"editor:search:onsubmit",onautocomplete:"editor:search:onautocomplete"}},Is=ot.getLogger("editor-style");class I0{constructor(e){if(Is.trace("[constructor] Style",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof I0))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={scale:!0,edition:!1};this.options.tools||(this.options.tools=e),He.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}}_initContainer(){var e=this,t=!1,n=JSON.parse(JSON.stringify(this.options.obj)),r={};n.paint&&(t=!0,r.paint=n.paint,Object.keys(n.paint).length===0&&Is.info("tag 'paint' is empty !")),n.layout&&(t=!0,r.layout=n.layout,n.layout.visibility&&delete r.visibility,Object.keys(n.layout).length===0&&Is.info("tag 'layout' is empty !"));var s=document.createElement("div");s.className=this.name.container;var o=null;if(t){var a=JSON.stringify(r,null,4);o=this._syntaxHighlight(a)}var l=document.createElement("div");l.className=this.name.containerjson;var c=document.createElement("label");c.className=this.name.jsonlabel,c.innerHTML=this.options.title,l.appendChild(c);var u=document.createElement("pre");u.className=this.name.jsondisplay,u.innerHTML=o,u.addEventListener?u.addEventListener("click",function(h){e.options.tools.edition&&e.onEditJsonStyleMapBox(h)}):u.attachEvent&&u.attachEvent("onclick",function(h){e.options.tools.edition&&e.onEditJsonStyleMapBox(h)}),l.appendChild(u),s.appendChild(l),this.options.tools.scale&&s.appendChild(this._createElementToolsScale({min:r.layout?r.layout.minzoom:0,max:r.layout?r.layout.maxzoom:21})),this.options.tools.edition&&s.appendChild(this._createElementToolsEdition()),this.container=s}_createElementToolsScale(e){Is.trace("_createElementToolsScale");var t=this,n=this.options.obj,r=document.createElement("div");r.className=this.name.containertoolsscale;var s=document.createElement("div");s.className=this.name.containertoolsminscale;var o=document.createElement("label");o.className=this.name.scalelabelmin,o.innerHTML="min :",s.appendChild(o);var a=document.createElement("input");a.className=this.name.scaleinputmin,a.type="range",a.value=e.min||0,a.title=e.min||0,a.disabled=!1,a.min=0,a.max=21,a.data=n,a.addEventListener?a.addEventListener("change",function(h){t.onChangeStyleScaleMinMapBox(h)}):a.appendChild&&a.appendChild("onchange",function(h){t.onChangeStyleScaleMinMapBox(h)}),s.appendChild(a),r.appendChild(s);var l=document.createElement("div");l.className=this.name.containertoolsmaxscale;var c=document.createElement("label");c.className=this.name.scalelabelmax,c.innerHTML="max :",l.appendChild(c);var u=document.createElement("input");return u.className=this.name.scaleinputmin,u.type="range",u.value=e.max||21,u.title=e.max||21,u.disabled=!1,u.min=0,u.max=21,u.data=n,u.addEventListener?u.addEventListener("change",function(h){t.onChangeStyleScaleMaxMapBox(h)}):u.appendChild&&u.appendChild("onchange",function(h){t.onChangeStyleScaleMaxMapBox(h)}),l.appendChild(u),r.appendChild(l),r}_createElementToolsEdition(){Is.warn("_createElementToolsEdition, it's not yet implemented !");var e=document.createElement("div");return e.className=this.name.containertoolsedit,e}_syntaxHighlight(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(t){var n="gp-json-number";return/^"/.test(t)?/:$/.test(t)?n="gp-json-key":n="gp-json-string":/true|false/.test(t)?n="gp-json-boolean":/null/.test(t)&&(n="gp-json-null"),"<span class='"+n+"'>"+t+"</span>"})}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return Is.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonStyleMapBox(e){Is.trace("onEditJsonStyleMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.style.oneditjson,e)}onChangeStyleScaleMinMapBox(e){Is.trace("onChangeStyleScaleMinMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.style.scale.onchangemin,e)}onChangeStyleScaleMaxMapBox(e){Is.trace("onChangeStyleScaleMaxMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.style.scale.onchangemax,e)}}var jd=ot.getLogger("editor-themes");class PA{constructor(e){if(jd.trace("[constructor] Themes",e),this.options=e||{},!(this instanceof PA))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={thumbnails:!0,button:{visible:!0,type:"radio"}};(!this.options.tools||Object.keys(this.options.tools).length===0)&&(this.options.tools=e),He.mergeParams(this.options.tools,e,!1),(typeof this.options.obj>"u"||this.options.obj===null||!this.options.obj)&&(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}}_initContainer(){var e=this,t=this.options.obj,n=this.id||Xe.generate(),r=document.createElement("div");r.className=this.name.container,r.title=t.themesSummary||"";var s=t.themes;if(s)for(var o=0;o<s.length;o++){var a=s[o],l=document.createElement("div");l.id=this.name.containerthemeID+o+"_"+n,l.className=this.name.containertheme,l.tabIndex=o;var c=a.url,u=a.selected||!1;if(c){var h=this.options.tools.button;if(h.visible){var d=h.type==="checkbox"?"checkbox":"radio",f=document.createElement("input");f.type=d,f.id=this.name.inputID+o+"_"+n,f.className=this.name.input,f.name=n,f.checked=u,f.data=c,f.addEventListener?f.addEventListener("click",function(v){e.onClickThemeTitleMapBox(v)}):f.attachEvent&&f.attachEvent("onclick",function(v){e.onClickThemeTitleMapBox(v)}),l.appendChild(f)}if(this.options.tools.thumbnails&&a.thumbnail){var g=document.createElement("img");g.id=this.name.imageID+o+"_"+n,g.className=this.name.image,g.src=a.thumbnail,g.alt=a.thumbnail,g.title=a.description||"",g.data=c,g.addEventListener?g.addEventListener("click",function(v){e.onClickThemeImageMapBox(v);var y=v.target.parentElement.childNodes;if(y){var A=y[0];A.tagName.toLowerCase()==="input"&&(A.checked=!A.checked)}}):g.attachEvent&&g.attachEvent("onclick",function(v){e.onClickThemeImageMapBox(v);var y=v.target.parentElement.childNodes;if(y){var A=y[0];A.tagName.toLowerCase()==="input"&&(A.checked=!A.checked)}}),l.appendChild(g)}if(a.name){var p=document.createElement("label");p.id=this.name.labelID+o+"_"+n,this.options.tools.button.visible&&(p.htmlFor=f.id),p.className=this.name.label,p.innerHTML=a.name,p.title=a.description||"",p.data=c,this.options.tools.button.visible||(p.addEventListener?p.addEventListener("click",function(v){e.onClickThemeTitleMapBox(v)}):p.attachEvent&&p.attachEvent("onclick",function(v){e.onClickThemeTitleMapBox(v)})),l.appendChild(p)}}else{var m=document.createElement("label");m.className=this.name.message,m.innerHTML="Thme non disponible...",l.appendChild(m)}r.appendChild(l)}this.container=r}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return jd.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onClickThemeImageMapBox(e){if(jd.trace("onClickThemeImageMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.previousSibling.id.substring(e.target.previousSibling.id.lastIndexOf("_")+1),n=document.getElementsByClassName(this.name.input),r=0;r<n.length;r++){var s=n[r];if(s.id!==e.target.previousSibling.id){var o=s.id.substring(s.id.lastIndexOf("_")+1);o===t&&(s.checked=!1)}}$i.dispatch(Mn.themes.onclickimage,e)}onClickThemeTitleMapBox(e){if(jd.trace("onClickThemeTitleMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.id.substring(e.target.id.lastIndexOf("_")+1),n=document.getElementsByClassName(this.name.input),r=0;r<n.length;r++){var s=n[r];if(s.id!==e.target.id){var o=s.id.substring(s.id.lastIndexOf("_")+1);o===t&&(s.checked=!1)}}$i.dispatch(Mn.themes.onclicktitle,e)}}var zd=ot.getLogger("editor-filter");class E0{constructor(e){if(zd.trace("[constructor] Filter",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof E0))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={edition:!1};this.options.tools||(this.options.tools=e),He.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}}_initContainer(){var e=this,t=!1,n=JSON.parse(JSON.stringify(this.options.obj));n.filter&&(t=!0,n.filter.length===0&&zd.info("tag 'filter' is empty !"));var r=document.createElement("div");r.className=this.name.container;var s=null;t&&(s=JSON.stringify(n.filter,null,4));var o=document.createElement("div");o.className=this.name.containerjson;var a=document.createElement("label");a.className=this.name.jsonlabel,a.innerHTML=this.options.title,o.appendChild(a);var l=document.createElement("pre");if(l.className=this.name.jsondisplay,l.innerHTML=s,l.addEventListener?l.addEventListener("click",function(u){e.options.tools.edition&&e.onEditJsonFilterMapBox(u)}):l.attachEvent&&l.attachEvent("onclick",function(u){e.options.tools.edition&&e.onEditJsonFilterMapBox(u)}),o.appendChild(l),r.appendChild(o),this.options.tools.edition){var c=document.createElement("div");c.className=this.name.containertoolsedit,r.appendChild(c)}this.container=r}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return zd.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonFilterMapBox(e){zd.trace("onEditJsonFilterMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.filter.oneditjson,e)}}var In=ot.getLogger("editor-legend");class bc{constructor(e){if(In.trace("[constructor] Legend",e),this.options=e||{target:null,position:0,sprites:null,obj:null},!(this instanceof bc))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var e=this.options.obj.editable;this.editable=typeof e<"u"?e:!1,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"Opacit du trait","fill-color":"Couleur de remplissage","fill-opacity":"Opacit du remplissage"}}_initContainer(){var e=this.options.obj,t=document.createElement("div");t.className=this.name.container;var n=Object.assign({},e.paint,e.layout),r=Object.keys(n);if(r.length===0){In.info("tag 'paint' or 'layout' is empty !");return}for(var s={},o=!1,a=0;a<r.length;a++){var l=r[a];if(/fill-/.test(l)||/line-/.test(l)||/circle-/.test(l)||/background-/.test(l)||/text-/.test(l)||/icon-/.test(l)){o=!0;var c=e.title||"",u=l.split("-")[0];(u==="text"||u==="icon")&&(u="symbol"),this.legendRender=this._getProperties(u,n),s={edit:this.editable,title:c,type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(s));break}}o||(s={edit:this.editable,title:"",type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(s)),In.warn("legend type unknown, default legend used...")),this.toolscontainer=this._createElementEditionLegend(s),t.appendChild(this.toolscontainer),this.container=t}_getProperties(e,t){if(e==="symbol"){var n=t["text-field"],r=t["icon-image"];if(e=n&&r?"icon":n?"text":r?"icon":"unknow",e==="unknow"){In.warn("type unknow !?");return}}var s={};for(const c in t)if(Object.hasOwnProperty.call(t,c)){const u=t[c];if(bc.PROPERTIES[e].includes(c)){var o=c.replace(e,"").slice(1),a=this._getValue(u);if(a){if((o==="pattern"||o==="image")&&(!this.options.sprites||!this.options.sprites.json||!this.options.sprites.json[a])){var l=e+":"+o;In.warn("sprites mandatory for key ",l);break}s[o]=a}}else In.warn("property not supported : ",c)}return{type:e,values:s}}_renderThumbnail(e,t){var n=this.rendercontainer;if(!n)return!1;var r=null,s=3;switch(t.color||(t.color="#FFFFFF"),e){case"text":var o="font-size: 5em;font-weight: bold;";r=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' dominant-baseline='central' style='%style%'> T </text></svg>")`,n.style.background=r.replace("%color%",t.color.indexOf("rgb")===0?t.color:Le.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%style%",o);break;case"icon":if(t.image)r="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.image].x).replace("%y%",this.options.sprites.json[t.image].y).replace(/%w%/g,this.options.sprites.json[t.image].width).replace(/%h%/g,this.options.sprites.json[t.image].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),n.innerHTML=r;else{var a="fill: transparent;stroke-width: 10;";r=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>")`,n.style.background=r.replace("%color%",t.color.indexOf("rgb")===0?t.color:Le.hexToRgba(t.color,1)).replace("%style%",a)}break;case"line":var l=Array.isArray(t.dasharray)?t.dasharray.join(" "):0;r=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><line x1='0' y1='100' x2='100' y2='0' stroke='%color%' stroke-width='%stroke-width%' stroke-opacity='%stroke-opacity%' stroke-dasharray='%stroke-dasharray%' /></svg>")`,n.style.background=r.replace("%color%",t.color.indexOf("rgb")===0?t.color:Le.hexToRgba(t.color,1)).replace("%stroke-opacity%",t.opacity||1).replace("%stroke-dasharray%",l).replace("%stroke-width%",(t.width||0)*s);break;case"circle":var c=t["stroke-color"]||"#FFFFFF";r=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke-color%' stroke-width='%stroke-width%' stroke-opacity='%strock-opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>")`,n.style.background=r.replace("%color%",t.color.indexOf("rgb")===0?t.color:Le.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",c.indexOf("rgb")===0?c:Le.hexToRgba(c,1)).replace("%stroke-opacity%",t["stroke-opacity"]||1).replace("%stroke-width%",(t["stroke-width"]||0)*s);break;case"background":case"fill":if(t.pattern)r="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.pattern].x).replace("%y%",this.options.sprites.json[t.pattern].y).replace(/%w%/g,this.options.sprites.json[t.pattern].width).replace(/%h%/g,this.options.sprites.json[t.pattern].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),n.innerHTML=r;else{var u=t["outline-color"]||"#FFFFFF";r=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' stroke='%stroke-color%' stroke-width='3' fill='%color%' fill-opacity='%opacity%' /></svg>")`,n.style.background=r.replace("%color%",t.color.indexOf("rgb")===0?t.color:Le.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",u.indexOf("rgb")===0?u:Le.hexToRgba(u,1))}break;default:return In.warn("type not found, no thumbnail..."),!1}return!0}_getValue(e){var t=null;if(typeof e=="string")t=e;else if(typeof e=="number")t=e;else if(Array.isArray(e)){var n=!0;e.forEach(s=>{typeof s!="number"&&(n=!1)}),n&&(t=e)}else if(typeof e=="object"){if(t=null,"stops"in e){e.stops.sort((s,o)=>{var a=s[0],l=o[0];return a>l?-1:a<l?1:0});var r=e.stops.slice(-1);t=r[0][1]}}else In.warn("value not supported !");return t}_createElementIconLegend(e){var t=this,n=document.createElement("div");n.className=this.name.containerlegendrender;var r=this.rendercontainer=document.createElement("div");r.className=this.name.legendrender,e.edit&&(r.className+=" ",r.className+=this.name.legendeditable,r.addEventListener?r.addEventListener("click",function(a){t.onEditionLegendMapBox(a)}):r.attachEvent&&r.attachEvent("onclick",function(a){t.onEditionLegendMapBox(a)}));var s=e.type;this._renderThumbnail(s,e.values)?r.className+=e.edit?" legend-"+s:" legend-"+s+"-not-editable":r.className+=" legend-unknow",n.appendChild(r);var o=document.createElement("span");return o.className=this.name.legendtitle,o.innerHTML=e.title||"",n.appendChild(o),n}_createElementEditionLegend(e){var t=this,n=document.createElement("div");if(n.className=this.name.containerlegendtools,!e.edit)return n;switch(e.type){case"line":r.call(t),s.call(t),o.call(t);break;case"background":case"fill":a.call(t),l.call(t);break}function r(){var c=document.createElement("div");c.className="legend-styling-div";var u=document.createElement("label");u.className="legend-line",u.htmlFor=this.id?"line-color-"+this.id:"line-color",u.innerHTML=this.labels["line-color"];var h=document.createElement("input");h.className="legend-styling",h.id=this.id?"line-color-"+this.id:"line-color",h.title="Selectionner une couleur de trait",h.type="color",h.value=e.values.color,h.setAttribute("data-id","line-color"),h.addEventListener?h.addEventListener("change",function(d){t._renderThumbnail(e.type,Object.assign(e.values,{color:d.target.value})),t.onChangeValueLegendMapBox(d)}):h.attachEvent&&h.attachEvent("onchange",function(d){t._renderThumbnail(e.type,Object.assign(e.values,{color:d.target.value})),t.onChangeValueLegendMapBox(d)}),c.appendChild(u),c.appendChild(h),n.appendChild(c)}function s(){var c=document.createElement("div");c.className="legend-styling-div";var u=document.createElement("label");u.className="legend-line",u.htmlFor=this.id?"line-width-"+this.id:"line-width",u.innerHTML=this.labels["line-width"];var h=document.createElement("input");h.className="legend-styling",h.id=this.id?"line-width-"+this.id:"line-width",h.title=e.values.width,h.type="range",h.min="0",h.max="10",h.step="1",h.defaultValue=e.values.width,h.setAttribute("data-id","line-width"),h.addEventListener?h.addEventListener("change",function(d){In.trace(d),d.target.title=d.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:d.target.value})),t.onChangeValueLegendMapBox(d)}):h.attachEvent&&h.attachEvent("onchange",function(d){In.trace(d),d.target.title=d.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:d.target.value})),t.onChangeValueLegendMapBox(d)}),c.appendChild(u),c.appendChild(h),n.appendChild(c)}function o(){var c=document.createElement("div");c.className="legend-styling-div";var u=document.createElement("label");u.className="legend-line",u.htmlFor=this.id?"line-opacity-"+this.id:"line-opacity",u.innerHTML=this.labels["line-opacity"];var h=document.createElement("input");h.className="legend-styling",h.id=this.id?"line-opacity-"+this.id:"line-opacity",h.title=e.values.opacity,h.type="range",h.min="0",h.max="1",h.step="0.1",h.defaultValue=e.values.opacity,h.setAttribute("data-id","line-opacity"),h.addEventListener?h.addEventListener("change",function(d){In.trace(d),d.target.title=d.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:d.target.value})),t.onChangeValueLegendMapBox(d)}):h.attachEvent&&h.attachEvent("onchange",function(d){In.trace(d),d.target.title=d.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:d.target.value})),t.onChangeValueLegendMapBox(d)}),c.appendChild(u),c.appendChild(h),n.appendChild(c)}function a(){var c=document.createElement("div");c.className="legend-styling-div";var u=document.createElement("label");u.className="legend-fill",u.htmlFor=this.id?"fill-color-"+this.id:"fill-color",u.innerHTML=this.labels["fill-color"];var h=document.createElement("input");h.className="legend-styling",h.id=this.id?"fill-color-"+this.id:"fill-color",h.title="Selectionner une couleur de remplissage",h.type="color",h.value=e.values.color,h.setAttribute("data-id","fill-color"),h.addEventListener?h.addEventListener("change",function(d){t._renderThumbnail(e.type,Object.assign(e.values,{color:d.target.value})),t.onChangeValueLegendMapBox(d)}):h.attachEvent&&h.attachEvent("onchange",function(d){t._renderThumbnail(e.type,Object.assign(e.values,{color:d.target.value})),t.onChangeValueLegendMapBox(d)}),c.appendChild(u),c.appendChild(h),n.appendChild(c)}function l(){var c=document.createElement("div");c.className="legend-styling-div";var u=document.createElement("label");u.className="legend-fill",u.htmlFor=this.id?"fill-opacity-"+this.id:"fill-opacity",u.innerHTML=this.labels["fill-opacity"];var h=document.createElement("input");h.className="legend-styling",h.id=this.id?"fill-opacity-"+this.id:"fill-opacity",h.title=e.values.opacity,h.type="range",h.min="0",h.max="1",h.step="0.1",h.defaultValue=e.values.opacity,h.setAttribute("data-id","fill-opacity"),h.addEventListener?h.addEventListener("change",function(d){d.target.title=d.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:d.target.value})),t.onChangeValueLegendMapBox(d)}):h.attachEvent&&h.attachEvent("onchange",function(d){d.target.title=d.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:d.target.value})),t.onChangeValueLegendMapBox(d)}),c.appendChild(u),c.appendChild(h),n.appendChild(c)}return n}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return In.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}isEditable(){return this.editable}getRenderContainer(){return this.rendercontainer}getToolsContainer(){return this.toolscontainer}getContainer(){return this.container}onEditionLegendMapBox(e){In.trace("onEditionLegendMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.legend.onclickedition,e)}onChangeValueLegendMapBox(e){In.trace("onChangeValueLegendMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.legend.onchangevalue,e)}}bc.PROPERTIES={line:["line-color","line-dasharray","line-opacity","line-width"],fill:["fill-color","fill-opacity","fill-outline-color","fill-pattern"],background:["background-color","background-opacity","background-pattern"],circle:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"],icon:["icon-color","icon-image","icon-opacity","__icon-size"],text:["__text-anchor","text-color","text-field","__text-font","__text-opacity","__text-size"]};var sn=ot.getLogger("editor-layer");class MA{constructor(e){if(sn.trace("[constructor] Layer",e),this.options=e||{},!(this instanceof MA))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=e),He.mergeParams(this.options.tools,e,!1);var t={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=t),He.mergeParams(this.options.obj,t,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}}_initContainer(){var e=this,t=this.options.obj,n=document.createElement("div");n.className=this.name.container;var r=document.createElement("div");if(r.id=this.name.containertitle+"-"+this.options.position,r.className=this.name.containertitle,this.options.tools.pin){var s=document.createElement("input");s.id=this.name.imagelabelinput+"-"+this.options.position,s.className=this.name.imagelabelinput,s.type="checkbox",r.appendChild(s);var o=document.createElement("label");o.className=this.name.imagelabel,o.htmlFor=s.id,o.addEventListener?o.addEventListener("click",function(d){e.onClickLayerMapBox(d)}):o.attachEvent&&o.attachEvent("onclick",function(d){e.onClickLayerMapBox(d)}),r.appendChild(o)}var a=function(){var d=document.createElement("div");if(d.id=this.name.containertools+"-"+this.options.position,d.className=this.name.containertools,this.options.tools.visibility){var f=document.createElement("input");f.id=this.name.visibilityinput+"-"+this.options.position,f.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,f.type="checkbox",f.checked="checked",f.addEventListener?f.addEventListener("click",function(p){e.onVisibilityLayerMapBox(p)}):f.attachEvent&&f.attachEvent("onclick",function(p){e.onVisibilityLayerMapBox(p)}),d.appendChild(f),this.DomVisibility=f;var g=document.createElement("label");g.htmlFor=this.name.visibilityinput+"-"+this.options.position,g.id=this.name.visibilitylabel+"-"+this.options.position,g.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,g.title="Afficher/masquer la couche",d.appendChild(g),n.appendChild(d)}this.options.tools.clone&&sn.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&sn.warn("Dom for tools remove, it's not yet implemented !")};if(this.options.tools.icon.anchor==="start"&&a.apply(this),this.options.tools.type&&t.type){var l=document.createElement("img");switch(l.className=this.name.typeimg,t.type.toUpperCase()){case"SYMBOL-ICON":l.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":l.style["background-position"]="-194px 0";break;case"SYMBOL":l.style["background-position"]="-84px 0";break;case"LINE":l.style["background-position"]="-28px 0";break;case"FILL":l.style["background-position"]="-56px 0";break;case"BACKGROUND":l.style["background-position"]="-140px 0";break;case"CIRCLE":l.style["background-position"]="-168px 0";break;default:l.style["background-position"]="-112px 0"}r.appendChild(l)}var c=document.createElement("div");c.id=this.name.containerlegend+"-"+this.options.position,c.className=this.name.containerlegend,r.appendChild(c);var u=document.createElement("input");u.id=this.name.titleinput+"-"+this.options.position,u.className=this.name.titleinput,u.type="checkbox",r.appendChild(u);var h=document.createElement("label");h.className=this.name.titlelabel,h.htmlFor=u.id,h.innerHTML=t.id||t["source-layer"]||t.source,h.title=t["source-layer"]||t.source||t.id,h.addEventListener?h.addEventListener("click",function(d){e.onClickLayerMapBox(d)}):h.attachEvent&&h.attachEvent("onclick",function(d){e.onClickLayerMapBox(d)}),r.appendChild(h),this.DomToggle=h,n.appendChild(r),this.options.tools.icon.anchor==="end"&&a.apply(this),this.container=n}add(){if(sn.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}addStyle(e){sn.trace("addStyle()",e),e&&typeof e=="object"&&e instanceof I0&&(this.oStyle=e,this.oStyle.display(!1))}addFilter(e){sn.trace("addFilter()",e),e&&typeof e=="object"&&e instanceof E0&&(this.oFilter=e,this.oFilter.display(!1))}addLegend(e){sn.trace("addLegend()",e),e&&typeof e=="object"&&e instanceof bc&&(this.oLegend=e,this.oLegend.display(!1))}slotLegend(){var e=this.oLegend;if(e){var t=null,n=this.container.childNodes;if(n.length)for(var r=this.options.tools.icon.anchor==="start"?1:0,s=n[r].childNodes,o=0;o<s.length;o++){var a=s[o];a.id.indexOf(this.name.containerlegend)!==-1&&(t=a)}if(t){var l=e.getRenderContainer();l&&(t.appendChild(l),this.bSlotLegend=!0)}}}visibility(e){if(sn.trace("visibility()",e),!!this.options.tools.visibility)return typeof e<"u"&&(this.DomVisibility.checked=e?"checked":""),this.DomVisibility.checked}collapse(){sn.trace("collapse()"),this.DomToggle.click()}visible(){sn.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()}display(e){sn.trace("display()",e);var t=document.getElementById(this.DomToggle.htmlFor).checked;return typeof e<"u"&&(this.container.style.display=e?"inline-flex":"none",this.oStyle&&this.oStyle.display(e&&t),this.oFilter&&this.oFilter.display(e&&t),this.oLegend&&this.oLegend.display(e&&t)),t}active(e){return sn.trace("active()",e),typeof e<"u"&&(this.container.className=e?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container}getContainer(){return this.container}onClickLayerMapBox(e){sn.trace("onClickLayerMapBox",e);var t=e.target.htmlFor.substring(e.target.htmlFor.indexOf("-")),n=document.getElementById(e.target.htmlFor).checked;e.target.htmlFor===this.name.imagelabelinput+t&&(document.getElementById(this.name.titleinput+t).checked=!n),e.target.htmlFor===this.name.titleinput+t&&document.getElementById(this.name.imagelabelinput+t)&&(document.getElementById(this.name.imagelabelinput+t).checked=!n),this.oStyle&&this.oStyle.display(!n),this.oFilter&&this.oFilter.display(!n),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!n)}onVisibilityLayerMapBox(e){sn.trace("onVisibilityLayerMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.layer.onclickvisibility,e)}onCloneLayerMapBox(e){sn.trace("onCloneLayerMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.layer.onclickclone,e)}onRemoveLayerMapBox(e){sn.trace("onRemoveLayerMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.layer.onclickremove,e)}}var KI=ot.getLogger("editor-group");class RA{constructor(e){if(KI.trace("[constructor] Group",e),this.options=e||{},!(this instanceof RA))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.title||(this.options.title="Dtails du groupe..."),typeof this.options.collapse>"u"&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}}_initContainer(){var e=document.createElement("div");e.className=this.name.container;var t=document.createElement("details");t.className=this.name.details,t.open=!this.options.collapse,e.appendChild(t);var n=document.createElement("summary");n.className=this.name.summary,n.innerHTML=this.options.title,t.appendChild(n),this.container=e}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)}display(e){this.container.style.display=e?"flex":"none"}getContainer(){var e=this.container.childNodes;return e.length?e[0]:this.container}onCollapseGroupMapBox(e){KI.trace("onCollapseGroupMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.group.oncollapse,e)}}var su=ot.getLogger("editor-search");class TA{constructor(e){if(su.trace("[constructor] Search",e),this.options=e||{target:null,tools:null,title:null,obj:null},!(this instanceof TA))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={};this.options.tools||(this.options.tools=e),He.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={}),this.options.title||(this.options.title="Recherche de couches :"),this.container=null,this.name={target:"GPEditorMapBoxSearchTarget",container:"GPEditorMapBoxSearchContainer"}}_initContainer(){var e=JSON.parse(JSON.stringify(this.options.obj));e.layers&&e.layers.length===0&&su.info("tag 'layers' is empty !");var t=document.createElement("div");t.className=this.name.container,this.container=t}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return su.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onSubmitSearchLayersMapBox(e){su.trace("onSubmitSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.search.onsubmit,e)}onAutocompleteSearchLayersMapBox(e){su.trace("onAutocompleteSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,$i.dispatch(Mn.search.onautocomplete,e)}}var $V={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e}},Ri=ot.getLogger("editor");class Qh{constructor(e){if(Ri.trace("[constructor] Editor",e),this.options=e||{},!(this instanceof Qh))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}_initialize(){if(this.options.target||Ri.info("La 'target' n'est pas renseigne (options.target)."),!this.options.style){Ri.error("Le 'style' MapBox n'est pas renseign (options.style) !");return}this.options.events?this._initEvents():Ri.warn("Les 'handlers' ne sont pas renseigns (options.events) !"),this.options.themes||Ri.info("Les 'themes' MapBox ne sont pas renseigns (options.themes).");var e={themes:!1,layers:!0,search:!1,style:!1,filter:!1,legend:!1,group:!1,groupAuto:!1,sort:!0,sortBy:"id",sortOrder:"asc",title:!0,collapse:void 0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(Ri.trace("Utilisation des outils MapBox par dfaut (options.tools)."),this.options.tools=e),He.mergeParams(this.options.tools,e,!1),this.id=this.options.id||Xe.generate(),this.context={},this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}}_initEvents(){var e=this.options.scope||this,t=this.options.events;if(t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];r&&($i.hasEventListener(n,r,e)||$i.addEventListener(n,r,e))}}}_initContainer(){Ri.trace(this.mapbox);var e=document.createElement("div");e.id=this.name.containerID+this.id,e.className=this.name.container;var t=this.options.tools.themes;if(t&&this.options.themes){if(this.options.tools.title){var n=document.createElement("div");n.id=this.name.titleThemesID+this.id,n.className=this.name.titleThemes,n.innerHTML="Liste des 'thmes'",e.appendChild(n)}var r=new PA({id:this.id,target:e,tools:typeof t=="object"?t:{},obj:this.options.themes});r.add()}if(this.options.tools.search){var s=new TA({id:this.id,target:e,tools:{},obj:this.mapbox.layers});s.add()}for(var o in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(o)){if(this.options.tools.layers){var a=Object.keys(this.mapbox.sources).length>1?1:0;if(a){var l=document.createElement("hr");l.className=this.name.sep,e.appendChild(l)}if(this.options.tools.title){var c=document.createElement("div");c.id=this.name.titleLayersID+this.id,c.className=this.name.titleLayers,c.innerHTML=a?"Liste des 'couches' ("+o+")":"Liste des 'couches'",e.appendChild(c)}}var u=this.mapbox.layers.slice();if(u.forEach(function(V,se){var j=V.metadata;j?j["geoportail:order"]=se:V.metadata={"geoportail:order":se}}),this.options.tools.sort){var h=this.options.tools.sortBy,d=this.options.tools.sortOrder,f=function(V,se){var j=0;if(V.metadata&&V.metadata["geoportail:group"]&&se.metadata&&se.metadata["geoportail:group"]){var Ae=null,q=null;Ae=V.metadata["geoportail:group"],q=se.metadata["geoportail:group"],j=Ae.localeCompare(q)}else switch(h){case"geom":j=d==="asc"?V.type.localeCompare(se.type)||V.id.localeCompare(se.id):se.type.localeCompare(V.type)||se.id.localeCompare(V.id);break;case"class":j=d==="asc"?V["source-layer"].localeCompare(se["source-layer"])||V.id.localeCompare(se.id):se["source-layer"].localeCompare(V["source-layer"])||se.id.localeCompare(V.id);break;case"id":default:j=d==="asc"?V.id.localeCompare(se.id):se.id.localeCompare(V.id);break}return j};u.sort(f)}Ri.trace("Layers : ",u);var g=this.options.tools.sortBy,p=this.options.tools.groupAuto,m={};u.forEach(function(V){var se=V.metadata;if(se&&se["geoportail:group"]){var j=se["geoportail:group"];m[j]=m[j]?m[j]+1:1}else{var Ae=null;switch(g){case"class":Ae=V["source-layer"];break;case"geom":Ae=V.type;break;case"id":default:Ae=V.id;break}var q=Ae;if(p){var Te=/_|-|:|=/,Ce=Ae.search(Te);q=Ce!==-1?Ae.substring(0,Ce).trim():Ae}m[q]=m[q]?m[q]+1:1,se?se["geoportail:group"]=q:V.metadata={"geoportail:group":q}}}),Ri.trace("Groups : ",m);var v=document.createElement("div");v.className=this.name.containerLayers,e.appendChild(v);var y;if(this.options.tools.collapse!==void 0){y=document.createElement("details"),y.className="",y.open=!this.options.tools.collapse,v.appendChild(y);var A=document.createElement("summary");A.className="",A.innerHTML="",y.appendChild(A)}for(var _=this.options.tools.collapse!==void 0?y:v,C=-1,I=0;I<u.length;I++){var b=u[I];if(C++,b.source===o){if(this.options.tools.group&&this.options.tools.sort){var S=b.metadata;if(S){var R=b.metadata["geoportail:group"];if(R)if(m[R]>1){m[R]=-1;var P=new RA({id:this.id,target:this.options.tools.collapse!==void 0?y:v,title:R,collapse:!0});P.add(),_=P.getContainer()}else m[R]===1&&(_=this.options.tools.collapse!==void 0?y:v);else _=this.options.tools.collapse!==void 0?y:v}else _=this.options.tools.collapse!==void 0?y:v}if(this.options.tools.layers){var w=new MA({id:this.id,target:_,position:C+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:b.id,type:b.type,source:b.source,"source-layer":b["source-layer"]}});w.add(),b.layout&&b.layout.visibility&&b.layout.visibility==="none"&&w.visibility(!1),this.layers.push(w)}if(this.options.tools.legend){var x=this.options.tools.editable;typeof x>"u"&&(x=b.editable);var D=new bc({id:this.id,target:_,sprites:this.sprites,obj:{id:b.id,source:b.source,title:b.id,editable:typeof x<"u"?x:!1,paint:b.paint,layout:b.layout}});D.add(),D.display(!1),w&&(w.addLegend(D),w.slotLegend())}if(this.options.tools.style){var k=new I0({id:this.id,target:_,position:C+"_"+this.id,obj:{id:b.id,source:b.source,layout:b.layout,paint:b.paint}});k.add(),k.display(!1),w&&w.addStyle(k),b.layout&&b.layout.visibility&&b.layout.visibility==="none"&&w.visibility(!1)}if(this.options.tools.filter){var O=new E0({id:this.id,target:_,position:C+"_"+this.id,obj:{id:b.id,source:b.source,filter:b.Filter}});O.add(),O.display(!1),w&&w.addFilter(O)}}else C>=0&&C--}}if(this.container=e,!this.options.target){if(!document.getElementById(this.name.target)){var N=document.createElement("div");N.id=this.name.target;var B=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement;B.appendChild(N)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),$i.dispatch(Mn.onloaded,this)}_getSprites(e){var t=this;if(e&&e.startsWith("mapbox://"))return new Promise((s,o)=>{Ri.error("Protocole mapbox:// non gr !"),s(t)});if(!e)return new Promise((s,o)=>{Ri.error("Auncun sprites disponibles !"),s(t)});var n=function(){var s=e+".png";return fetch(s,{credentials:"same-origin"}).then(function(o){if(o.ok)return o.blob().then(function(l){t.sprites.url=s;var c=new Image;return c.src=s,c.decode().then(function(){t.sprites.size={},t.sprites.size.h=c.height,t.sprites.size.w=c.width})}).catch(l=>{Ri.warn("fetch image sprites exception :",l)});var a=new Error("HTTP status code: "+o.status);throw a}).catch(o=>new Promise((a,l)=>{Ri.error("fetch image sprites exception :",o),l(o)}))},r=function(){var s=e+".json";return fetch(s,{credentials:"same-origin"}).then(function(o){if(o.ok)return o.json().then(function(l){t.sprites.json=l}).catch(l=>{Ri.warn("fetch json sprites exception :",l)});var a=new Error("HTTP status code: "+o.status);throw a}).catch(o=>new Promise((a,l)=>{Ri.error("fetch json sprites exception :",o),l(o)}))};return Promise.all([n(),r()])}createElement(){var e=this;if(typeof this.options.style=="object")return this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(t=>{Ri.warn("fetch sprites exception :",t)}):new Promise((t,n)=>{e._initContainer(),t(e)});if(typeof this.options.style=="string")return fetch(this.options.style,{credentials:"same-origin"}).then(t=>t.json().then(n=>{e.mapbox=n}).then(function(){return e.options.tools.legend?e._getSprites(e.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(n=>{Ri.warn("fetch sprites exception :",n)}):new Promise((n,r)=>{e._initContainer(),n(e)})}).catch(n=>{Ri.error("json exception :",n)})).catch(t=>{Ri.error("fetch exception :",t)})}display(e){this.container.style.display=e?"block":"none"}setContext(e,t){this.context[e]=t}getContext(e){return this.context[e]}getID(){return this.id}getContainer(){return this.container}getStyle(){return this.mapbox}getStyleLayer(e){for(var t=null,n=this.getLayer(e),r=n.options.obj.id,s=0;s<this.mapbox.layers.length;s++){var o=this.mapbox.layers[s];if(o.id===r){t=o;break}}return t}getLayerFromStyle(e){for(var t=null,n=this.mapbox.layers[e],r=0;r<this.getLayers().length;r++){var s=this.getLayer(r);if(n.id===s.options.obj.id){t=s;break}}return t}getLayers(){return this.layers}getLayer(e){return this.layers[e]}}He.assign(Qh.prototype,$V);window.ol&&window.ol.style&&(window.ol.style.Editor=Qh);var eW={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createLoadingElement:function(){var i=document.createElement("div");return i.id="GPmapLoading",i.className="",i},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPimport"),i.className="GPwidget gpf-widget",i},_createShowImportPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowImportPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowImportPicto gpf-btn gpf-btn-icon-import fr-btn",e.title="Ouvrir l'import de couches",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i._onShowImportClick()}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i._onShowImportClick()}),e},_createImportPanelElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPimportPanel"),i.className="GPpanel gpf-panel fr-modal",i},_createImportPanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createImportPanelHeaderElement:function(){var i=document.createElement("div");return i.className="GPpanelHeader gpf-panel__header fr-modal__header",i},_createImportPanelTitleElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportHeaderTitle"),i.className="GPpanelTitle gpf-panel__title fr-modal__title",i.innerHTML="Import de donnes",i},_createImportPanelCloseElement:function(){var i=this,e=document.createElement("button");e.id=this._addUID("GPimportPanelClose"),e.className="GPpanelClose GPimportPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(i._addUID("GPshowImportPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowImportPicto")).click()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createImportPanelFormElement:function(){var i=this,e=document.createElement("form");return e.id=this._addUID("GPimportForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),i._onImportSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),i._onImportSubmit()}),e},_createImportTypeLineElement:function(i){var e=this,t=document.createElement("div");t.id=this._addUID("GPimportTypeLine"),t.className="GPimportInputLine";var n=document.createElement("label");n.id=this._addUID("GPimportTypeLabel"),n.className="GPlabel gpf-label fr-label",n.innerHTML="Type de donne",n.title="Type de donne",t.appendChild(n);var r=document.createElement("select");r.setAttribute("aria-labelledby",this._addUID("GPimportTypeLabel")),r.className="GPselect gpf-select fr-select",r.addEventListener?r.addEventListener("change",function(a){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange(a)}):r.attachEvent&&r.attachEvent("onchange",function(){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange()}),r.id=this._addUID("GPimportTypeSelect"),(!i||!Array.isArray(i))&&(i=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var s,o=0;o<i.length;o++)s=document.createElement("option"),s.value=i[o],s.text=i[o]==="MAPBOX"?"Tuiles vectorielles":i[o],r.appendChild(s);return t.appendChild(r),t},_createImportWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GPimportWaitingContainer"),i.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",i.appendChild(e),i},_createImportStaticParamsContainer:function(i){var e=document.createElement("div");return e.id=this._addUID("GPimportStaticParams"),i==="KML"||i==="GPX"||i==="GeoJSON"||i==="MAPBOX"?e.className="GPelementVisible gpf-visible":e.className="GPelementHidden gpf-hidden",e},_createStaticNameLabel:function(){var i=document.createElement("div");i.className="GPimportInputLine";var e=document.createElement("label");e.className="GPlabel gpf-label fr-label",e.htmlFor=this._addUID("GPimportName"),e.innerHTML="Nom",e.title="Nom",i.appendChild(e);var t=document.createElement("input");return t.type="text",t.id=this._addUID("GPimportName"),t.className="GPinput gpf-input fr-input",i.appendChild(t),i},_createStaticModeChoiceDiv:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportChoice"),i},_createStaticLocalChoiceDiv:function(){var i=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(r){document.getElementById(i._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(i._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",i._onStaticImportTypeChange(r)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(i._addUID("GPimportValueLocal")).className="GPimportInputLine",document.getElementById(i._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",i._onStaticImportTypeChange()}),t.name="GPimportChoiceMode",t.value="local",t.checked=!0,t.id=this._addUID("GPimportChoiceAltLocal"),e.appendChild(t);var n=document.createElement("label");return n.className="GPimportChoiceAltTxt gpf-label fr-label",n.htmlFor=this._addUID("GPimportChoiceAltLocal"),n.innerHTML="par fichier local",n.title="par fichier local",e.appendChild(n),e},_createStaticUrlChoiceDiv:function(){var i=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(r){document.getElementById(i._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(i._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",i._onStaticImportTypeChange(r)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(i._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(i._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",i._onStaticImportTypeChange()}),t.id=this._addUID("GPimportChoiceAltUrl"),t.name="GPimportChoiceMode",t.value="url",t.checked=!1,e.appendChild(t);var n=document.createElement("label");return n.className="GPimportChoiceAltTxt gpf-label fr-label",n.htmlFor=this._addUID("GPimportChoiceAltUrl"),n.innerHTML="par URL",n.title="par URL",e.appendChild(n),e},_createStaticLocalInputDiv:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportValueLocal"),i.className="GPimportInputLine",i},_createStaticLocalInputLabel:function(){var i=document.createElement("label");return i.className="GPlabel gpf-label fr-label",i.htmlFor=this._addUID("GPimportFile"),i.innerHTML="Fichier local",i.title="Fichier local",i},_createStaticLocalInput:function(){var i=document.createElement("input");return i.type="file",i.id=this._addUID("GPimportFile"),i.className="GPimportInputFile gpf-upload fr-upload",i},_createStaticUrlInputDiv:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportValueUrl"),i.className="GPelementHidden gpf-hidden",i},_createStaticUrlInputLabel:function(){var i=document.createElement("label");return i.className="GPlabel gpf-label fr-label",i.htmlFor=this._addUID("GPimportUrl"),i.innerHTML="URL",i.title="URL",i},_createStaticUrlInput:function(){var i=document.createElement("input");return i.type="text",i.id=this._addUID("GPimportUrl"),i.className="GPinput gpf-input fr-input",i},_createServiceParamsContainer:function(i){var e=document.createElement("div");return e.id=this._addUID("GPimportServiceParams"),i==="WMS"||i==="WMTS"||i==="WFS"?e.className="GPelementVisible gpf-visible":e.className="GPelementHidden gpf-hidden",e},_createServiceUrlDiv:function(){var i=document.createElement("div");return i.className="GPimportInputLine",i},_createServiceUrlInputLabel:function(){var i=document.createElement("label");return i.className="GPlabel gpf-label fr-label",i.htmlFor=this._addUID("GPimportServiceUrl"),i.innerHTML="URL du service",i.title="URL du service",i},_createServiceUrlInput:function(){var i=document.createElement("input");return i.type="text",i.id=this._addUID("GPimportServiceUrl"),i.className="GPinput gpf-input fr-input",i},_createImportSubmitFormElement:function(){var i=document.createElement("input");return i.id=this._addUID("GPimportSubmit"),i.className="GPsubmit gpf-btn fr-btn fr-btn--secondary",i.type="submit",i.value="Importer",i},_createImportGetCapPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportGetCapPanel"),i.className="GPpanel gpf-panel fr-modal",i},_createImportGetCapPanelHeaderElement:function(){var i=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title",t.innerHTML="Couches accessibles",t.title="Couches accessibles",e.appendChild(t);var n=document.createElement("button");return n.className="GPpanelClose GPimportGetCapPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",n.title="Fermer le panneau",n.id=this._addUID("GPimportGetCapPanelClose"),n.addEventListener?n.addEventListener("click",function(){document.getElementById(i._addUID("GPshowImportPicto")).click(),document.getElementById(i._addUID("GPimportGetCapPanel")).style.display="none",i._onGetCapPanelClose()}):n.attachEvent&&n.attachEvent("click",function(){document.getElementById(i._addUID("GPshowImportPicto")).click(),document.getElementById(i._addUID("GPimportGetCapPanel")).style.display="none",i._onGetCapPanelClose()}),e.appendChild(n),e},_createImportGetCapResultsContainer:function(){var i=document.createElement("div");return i.className="GPimportGetCapRoot gpf-panel__list",i.id=this._addUID("GPimportGetCapResults"),i},_addImportGetCapResultListRubrique:function(i,e){var t=document.createElement("ul");return t.className="GPimportGetCapListRubrique",t.title=i,e.appendChild(t),e},_addImportGetCapResultRubrique:function(i,e){var t=document.createElement("li");t.className="GPimportGetCapRubrique gpf-panel__items";var n=document.createElement("input");n.id="GPimportGetCapRubrique-"+Xe.generate(),n.className="GPimportGetCapRubrique",n.type="checkbox",t.appendChild(n);var r=document.createElement("label");return r.className="GPimportGetCapRubriqueTitle gpf-label fr-btn fr-btn--secondary",r.htmlFor=n.id,r.innerHTML=i,r.title=i,t.appendChild(r),e.appendChild(t),e},_addImportGetCapResultListLayer:function(i){var e=document.createElement("ul");return e.className="GPimportGetCapListLayer",i.appendChild(e),i},_addImportGetCapResultLayer:function(i,e,t){var n=document.createElement("li");n.className="GPimportGetCapProposal gpf-panel__items",n.innerHTML=i.content,n.title=i.title,n.id="GPimportGetCapProposal_"+e;var r=this;return n.addEventListener?n.addEventListener("click",function(s){r._onGetCapResponseLayerClick(s)}):n.attachEvent&&n.attachEvent("onclick",function(){r._onGetCapResponseLayerClick()}),t.appendChild(n),t},_createImportMapBoxPanelElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPimportMapBoxPanel"),i.className="GPpanel gpf-panel fr-modal",i},_createImportMapBoxPanelHeaderElement:function(){var i=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("button");t.id=this._addUID("GPimportMapBoxPanelReturnPicto"),t.title="Masquer le panneau",t.className="GPreturnPicto GPimportMapBoxPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary",t.addEventListener?t.addEventListener("click",function(s){document.getElementById(i._addUID("GPshowImportPicto")).click(),i._onMapBoxReturnPictoClick(s)}):t.attachEvent&&t.attachEvent("onclick",function(s){document.getElementById(i._addUID("GPshowImportPicto")).click(),i._onMapBoxReturnPictoClick(s)}),e.appendChild(t);var n=document.createElement("div");n.className="GPpanelTitle gpf-panel__title fr-modal__title",n.innerHTML="Edition des styles",n.title="Edition des styles",e.appendChild(n);var r=document.createElement("button");return r.className="GPpanelClose GPimportMapBoxPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",r.title="Fermer le panneau",r.id=this._addUID("GPimportMapBoxPanelClose"),r.addEventListener?r.addEventListener("click",function(){document.getElementById(i._addUID("GPshowImportPicto")).click(),document.getElementById(i._addUID("GPimportMapBoxPanel")).style.display="none",i._onMapBoxPanelClose()}):r.attachEvent&&r.attachEvent("click",function(){document.getElementById(i._addUID("GPshowImportPicto")).click(),document.getElementById(i._addUID("GPimportMapBoxPanel")).style.display="none",i._onMapBoxPanelClose()}),e.appendChild(r),e},_createImportMapBoxResultsContainer:function(){var i=document.createElement("div");return i.className="GPimportMapBoxpRoot",i.id=this._addUID("GPimportMapBoxResults"),i}},tW={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(i){return i?this._toolboxId+"-"+i:this._toolboxId},getButtonID:function(i){return i?this._buttonId+"-"+i:this._buttonId},getWidgetID:function(i){return i?this._widgetId+"-"+i:this._widgetId},_createToolBoxContainerElement:function(i){var e=document.createElement("div");e.id=this.getToolBoxID(i),e.className="GPshowAdvancedToolPicto";var t=document.createElement("button");t.id=this.getButtonID(i),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowToolBoxPicto gpf-btn gpf-btn-icon-toolbox fr-btn",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1);var n=this;t.addEventListener("click",function(s){var o=s.target.ariaPressed==="true";s.target.setAttribute("aria-pressed",!o),this.blur();var a=document.getElementById(n.getWidgetID(i));a.style.display==="block"?a.style.display="none":a.style.display="block"}),e.appendChild(t);var r=document.createElement("div");return r.id=this.getWidgetID(i),r.addEventListener("click",function(){},!1),e.appendChild(r),e}},Vd=ot.getLogger("toolbox"),$h={_toolbox:{},add:function(i,e){if(Vd.trace("ToolBox.add()",e),!i){Vd.trace("map doesn't exist !?");return}var t=typeof window<"u"?window:typeof self<"u"?self:null;t&&(this._toolbox=t.gpShareMeasureToolBox||{});var n=i.getTargetElement(),r=n.ownerDocument,s=n.id;!this._toolbox||Object.keys(this._toolbox).length===0?(this._toolbox={},this._toolbox[s]=Xe.generate()):this._toolbox[s]||(this._toolbox[s]=Xe.generate());var o=this._toolbox[s];if(!r.getElementById(this.getToolBoxID(o))){Vd.trace("create toolbox !");var a=this._createToolBoxContainerElement(o);a.style.pointerEvents="auto";var l=n.getElementsByClassName("ol-overlaycontainer-stopevent");l[0].appendChild(a)}var c=r.getElementById(this.getWidgetID(o));e.setTarget(c),t&&(t.gpShareMeasureToolBox=this._toolbox),Vd.trace("add control to toolbox !")}};He.assign($h,tW);var Np=ot.getLogger("measures"),nr={DEFAULT_POINTER_STYLE:new Ei({radius:5,stroke:new je({color:"#002A50",width:2}),fill:new $e({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new Ee({fill:new $e({color:"rgba(0, 183, 152, 0.2)"}),stroke:new je({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new Ee({fill:new $e({color:"rgba(0, 183, 152, 0.3)"}),stroke:new je({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var i=this.CLASSNAME;Np.trace("["+i+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._pictoContainer.setAttribute("aria-pressed",!1)},onPointerMoveHandler:function(i){if(!i.dragging){var e=i.coordinate;if(this.sketch){var t,n=this.sketch.getGeometry();if(t=this.format(n),n.getType()==="LineString")e=n.getLastCoordinate();else if(n.getType()==="Polygon")e=n.getInteriorPoint().getCoordinates();else return;this.measureTooltipElement.innerHTML=t,this.measureTooltip.setPosition(e)}}},onShowMeasureClick:function(i,e){var t=this.getMap(),n=t.getTargetElement().id,r=typeof window<"u"?window:typeof self<"u"?self:null;r&&(this.tools=r.gpShareMeasures||{});var s=this.CLASSNAME;for(var o in this.tools)if(this.tools.hasOwnProperty(o))for(var a=this.tools[o],l=0;l<a.length;l++){var c=a[l];c&&c.active&&o!==s&&c.map===n&&(c.active=!1,c.instance!==null&&c.instance.clean())}ds.unset(t,{current:"Measures"});var u=this._pictoContainer.ariaPressed;if(u==="true"){this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(e);for(var h=0;h<this.tools[s].length;h++)this.tools[s][h].map===n&&(this.tools[s][h].active=!0)}else{this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var d=0;d<this.tools[s].length;d++)this.tools[s][d].map===n&&(this.tools[s][d].active=!1)}},clearMeasureToolTip:function(){var i=this.getMap();if(i)for(var e=i.getTargetElement(),t=e.getElementsByClassName("ol-overlaycontainer"),n=0;n<t.length;n++){for(var r=t[n],s=r.children.length,o=[],a=0;a<s;a++){var l=r.children[a];if(l.children.length!==0){var c=l.children[0];(c.className==="GPmeasureTooltip GPmeasureTooltip-static"||c.className==="GPmeasureTooltip GPmeasureTooltip-measure")&&o.push(l)}}for(var u=0;u<o.length;u++)r.removeChild(o[u])}},clearMeasure:function(){var i=this.getMap();this.measureVector&&(i.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(i.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(i){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new jn({element:this.measureTooltipElement,stopEvent:!1,offset:[0,-15],positioning:"bottom-center"}),i.addOverlay(this.measureTooltip)},createHelpTooltip:function(i){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new jn({element:this.helpTooltipElement,stopEvent:!1,offset:[15,0],positioning:"center-left"}),i.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(i){this.options.styles=i||{},Np.trace("style start",this.options.styles.start);var e={image:nr.DEFAULT_POINTER_STYLE,fill:nr.DEFAULT_DRAW_START_STYLE.getFill(),stroke:nr.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(e.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof Ee&&(this.options.styles.start.getFill()!=null&&(e.fill=this.options.styles.start.getFill()),this.options.styles.start.getStroke()!=null&&(e.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new Ee(e),Np.trace("style finish",this.options.styles.finish);var t={fill:nr.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:nr.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof Ee&&(this.options.styles.finish.getFill()!=null&&(t.fill=this.options.styles.finish.getFill()),this.options.styles.finish.getStroke()!=null&&(t.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new Ee(t)},addMeasureInteraction:function(i){var e=this.getMap(),t=this;this.measureDraw=new yr({source:this.measureSource,condition:function(n){return n.originalEvent.ctrlKey?(t.sketch&&this.removeLastPoint(),!1):!0},type:i,style:this.options.styles.start||nr.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),e.addInteraction(this.measureDraw),this.createMeasureTooltip(e),this.measureDraw.on("drawstart",n=>{t.sketch=n.feature}),this.measureDraw.on("drawend",()=>{if(t.sketch){var n,r,s=t.sketch.getGeometry();if(n=t.format(s),s.getType()==="LineString")r=s.getLastCoordinate();else if(s.getType()==="Polygon")r=s.getInteriorPoint().getCoordinates();else return;t.measureTooltipElement.innerHTML=n,t.measureTooltip.setPosition(r)}t.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",t.measureTooltip.setOffset([0,-7]),t.sketch=null,t.measureTooltipElement=null,t.createMeasureTooltip(e)})},initMeasureInteraction:function(){var i=this.getMap();this.measureSource=new gn,this.measureVector=new Di({source:this.measureSource,style:this.options.styles.finish||nr.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",i.addLayer(this.measureVector),i.getControls().forEach(e=>{if(e instanceof gs){var t=this.measureVector.gpLayerId;e._layers[t].title===t&&e.addLayer(this.measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}},iW={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPelevationPath"),i.className="GPwidget gpf-widget",i},_createShowElevationPathPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-icon-elevation fr-btn",e.title="Calculer un profil",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowElevationPathClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowElevationPathClick(t)}),e},_createElevationPathPanelElement:function(){var i=document.createElement("dialog");return i.id=this._addUID("GPelevationPathPanel"),i.className="GPpanel gpf-panel fr-modal",i},_createElevationPathPanelDivElement:function(){var i=document.createElement("div");return i.className="gpf-panel__body fr-modal__body",i},_createElevationPathPanelHeaderElement:function(){var i=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("button");t.id=this._addUID("GPelevationPathPanelInfo"),t.className="GPpanelInfo gpf-btn gpf-btn-icon-info fr-btn fr-btn--secondary",t.title="Informations",t.addEventListener?t.addEventListener("click",function(){i.onOpenElevationPathInfoClick()}):t.attachEvent&&t.attachEvent("onclick",function(){i.onOpenElevationPathInfoClick()}),e.appendChild(t);var n=document.createElement("div");n.className="GPpanelTitle gpf-panel__title fr-modal__title",n.innerHTML="Profil Altimtrique",e.appendChild(n);var r=document.createElement("button");r.id=this._addUID("GPelevationPathPanelReduce"),r.className="GPpanelReduce gpf-btn gpf-btn-icon-reduce fr-btn fr-btn--secondary",r.title="Masquer le panneau",r.addEventListener?r.addEventListener("click",function(a){typeof i.onReduceElevationPathPanelClick=="function"&&i.onReduceElevationPathPanelClick()},!1):r.attachEvent&&r.attachEvent("onclick",function(a){typeof i.onReduceElevationPathPanelClick=="function"&&i.onReduceElevationPathPanelClick()}),e.appendChild(r);var s=document.createElement("button");s.id=this._addUID("GPelevationPathPanelClose"),s.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--secondary",s.title="Fermer le panneau",s.addEventListener?s.addEventListener("click",function(){document.getElementById(i._addUID("GPshowElevationPathPicto")).click()},!1):s.attachEvent&&s.attachEvent("onclick",function(){document.getElementById(i._addUID("GPshowElevationPathPicto")).click()});var o=document.createElement("span");return o.className="GPelementHidden gpf-visible",o.innerText="Fermer",s.appendChild(o),e.appendChild(s),e},_createElevationPathPanelProfilElement:function(){var i=document.createElement("div");return i.id="GPelevationPathProfil",i},_createElevationPathWaitingElement:function(){var i=document.createElement("div");i.id=this._addUID("GPelevationPathCalcWaitingContainer"),i.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",i.appendChild(e),i},_createElevationPathInformationsElement:function(){var i=document.createElement("div");i.id=this._addUID("GPelevationPathInformationsContainer"),i.className="GPelementHidden gpf-hidden";var e=document.createElement("p");return e.className="GPelevationPathInformations",e.innerHTML="Aucune information...",i.appendChild(e),i},_addElevationPathInformationsItem:function(i){var e=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(e){var t=document.createElement("p");t.className="GPelevationPathInformations",t.innerHTML=i,e.appendChild(t)}return e}},Wd={_getCssProperty:function(i,e){return window.getComputedStyle(i,null).getPropertyValue(e)},_getTextWidth:function(i,e,t=null){var n=this.canvas||(this.canvas=document.createElement("canvas")),r=n.getContext("2d");t===null?r.font=`${this._getCssProperty(e,"font-weight")} ${this._getCssProperty(e,"font-size")} ${this._getCssProperty(e,"font-family")}`:r.font=t;var s=r.measureText(i);return s.width},_dataZToSvgY:function(i,e,t,n){return e-(i-t)*n-.5},_dataDistToSvgX:function(i,e,t,n){return e-t+i*n},_svgXToDataDist:function(i,e,t,n){return(i+t-e)/n},_arrayBisect:function(i,e){let t;if(i.length===0)return 0;for(t=0;t<i.length;t++)if(e<i[t].dist)return t;return t-1},displayProfileByDefault:function(i,e,t,n){var r=t;if(!e||!i)return;for(;e.firstChild;)e.removeChild(e.firstChild);const s={top:25,right:15,bottom:10,left:10};var o=r.options.displayProfileOptions,a=i.points,l=JSON.parse(JSON.stringify(a));l.sort(function(ft,li){return ft.z-li.z});var c=l[0].z,u=l[l.length-1].z,h=i.distance;let d="m";const f=document.createElement("div");f.id="profileElevationByDefault",e.appendChild(f);var g=window.getComputedStyle(e).getPropertyValue("width").replace(/px/,""),p=window.getComputedStyle(e).getPropertyValue("height").replace(/px/,"");const m=p-s.top-s.bottom,v=g-s.left-s.right,y=17,A=this._getTextWidth(Math.round(u).toLocaleString()+",88",e,"400 10 Verdana"),_=17,C=15,I=15,b=this._getTextWidth(Math.round(h).toLocaleString()+",5",e),S=1,R=m-_-C,P=v-y-A,w=document.createElementNS("http://www.w3.org/2000/svg","svg");w.id="profileElevationByDefaultSvg",w.setAttribute("style","display: block; margin: auto; overflow: visible; position: absolute; left: 10px;"),w.setAttribute("viewBox",`0 0 ${g} ${p}`),w.setAttribute("width","100%"),w.setAttribute("height","100%");const x=Math.floor(R/I);let D;u===c?D=.1:D=Math.pow(10,Math.ceil(Math.log((u-c)/x)/Math.log(10)))/2;let k=Math.floor(c/D)*D,O=Math.ceil(u/D)*D;O===u&&(O+=D),k=Math.round(k*100)/100,O=Math.round(O*100)/100;let N=Math.round((O-k)/D);N+1>x&&(D=Math.pow(10,Math.ceil(Math.log((u-c)/x)/Math.log(10))),k=Math.floor(c/D)*D,O=Math.ceil(u/D)*D,O===u&&(O+=D),k=Math.round(k*100)/100,O=Math.round(O*100)/100,N=Math.floor((O-k)/D)),N=Math.max(Math.round(N),1);const B=document.createElementNS("http://www.w3.org/2000/svg","g");B.setAttribute("class","profile-z-vertical");const V=document.createElementNS("http://www.w3.org/2000/svg","g"),se=R/N;let j;u===c?j=R/.2:j=R/(O-k);let Ae,q,Te,Ce,pe,Ie;for(let ft=0;ft<=N;ft++)Ae=document.createElementNS("http://www.w3.org/2000/svg","text"),Ae.setAttribute("class","profile-z-graduation"),Ae.setAttribute("font-family","Verdana"),Ae.setAttribute("font-size","10px"),Ae.setAttribute("fill","#5E5E5E"),Ae.textContent=(Math.round(100*(k+ft*D))/100).toLocaleString(),q=R-ft*se,Ae.setAttribute("transform",`translate(${y+A-8}, ${q+5})`),Ae.setAttribute("text-anchor","end"),B.appendChild(Ae),Te=Math.round(q)-.5,Ce=document.createElementNS("http://www.w3.org/2000/svg","g"),pe=document.createElementNS("http://www.w3.org/2000/svg","path"),pe.setAttribute("cs","100,100"),pe.setAttribute("stroke-width","1"),ft!==0?pe.setAttribute("stroke-opacity","0.2"):pe.setAttribute("stroke-opacity","1"),pe.setAttribute("stroke","#000000"),pe.setAttribute("fill","none"),pe.setAttribute("d",`M${y+A},${Te} L${P+y+A},${Te}`),Ie=document.createElementNS("http://www.w3.org/2000/svg","path"),Ie.setAttribute("cs","100,100"),Ie.setAttribute("stroke-width","1"),Ie.setAttribute("stroke-opacity","1"),Ie.setAttribute("stroke","#000000"),Ie.setAttribute("fill","none"),Ie.setAttribute("d",`M${y+A},${Te} L${y+A+5},${Te}`),Ie.setAttribute("transform","translate(-5, 0)"),Ce.appendChild(Ie),Ce.appendChild(pe),V.appendChild(Ce);var z=document.createElementNS("http://www.w3.org/2000/svg","text");z.setAttribute("class","profile-z-legend"),z.setAttribute("font-family","Verdana"),z.setAttribute("font-size","11px"),z.setAttribute("fill","#5E5E5E"),z.textContent="Altitude (m)",z.setAttribute("transform",`translate(${y-8}, ${Math.round(R/2)}) rotate(-90)`),z.setAttribute("text-anchor","middle"),B.appendChild(z),w.appendChild(B),w.appendChild(V),h>2e3&&(h/=1e3,d="km");const oe=Math.floor(P/b);let ne=Math.pow(10,Math.ceil(Math.log(h/oe)/Math.log(10)))/2;const Y=h;let Pe=Math.floor(Y/ne);Pe>oe?(ne=Math.pow(10,Math.ceil(Math.log(h/oe)/Math.log(10))),Pe=Math.floor(Y/ne)):Pe<S&&(ne=Math.pow(10,Math.ceil(Math.log(h/oe)/Math.log(10))-1),Pe=Math.floor(Y/ne)),Pe=Math.max(Pe,1);const tt=ne*Pe,E=document.createElementNS("http://www.w3.org/2000/svg","g");E.setAttribute("class","profile-x-vertical");const M=document.createElementNS("http://www.w3.org/2000/svg","g"),G=P/Y,W=(Y-tt)*G,X=Math.round((P-W)/Pe);let K,ie,$,Q,Z,T;for(let ft=0;ft<=Pe+1;ft++)K=document.createElementNS("http://www.w3.org/2000/svg","text"),K.setAttribute("class","profile-x-graduation"),K.setAttribute("font-family","Verdana"),K.setAttribute("font-size","10px"),K.setAttribute("fill","#5E5E5E"),ft!==Pe+1&&(K.textContent=(Math.round(100*ft*ne)/100).toLocaleString()),ie=y+A+ft*X,ft===Pe+1&&(ie=y+A+P),K.setAttribute("transform",`translate(${ie}, ${R+C+5})`),K.setAttribute("text-anchor","middle"),E.appendChild(K),$=ie-.5,Q=document.createElementNS("http://www.w3.org/2000/svg","g"),Z=document.createElementNS("http://www.w3.org/2000/svg","path"),Z.setAttribute("cs","100,100"),Z.setAttribute("stroke-width","1"),ft!==0?Z.setAttribute("stroke-opacity","0.2"):Z.setAttribute("stroke-opacity","1"),Z.setAttribute("stroke","#000000"),Z.setAttribute("fill","none"),Z.setAttribute("d",`M${$},${R} L${$},0`),T=document.createElementNS("http://www.w3.org/2000/svg","path"),T.setAttribute("cs","100,100"),T.setAttribute("stroke-width","1"),T.setAttribute("stroke-opacity","1"),T.setAttribute("stroke","#000000"),T.setAttribute("fill","none"),T.setAttribute("d",`M${$},${R} L${$},${R-5}`),T.setAttribute("transform","translate(0, 5)"),Q.appendChild(T),Q.appendChild(Z),M.appendChild(Q);var F=document.createElementNS("http://www.w3.org/2000/svg","text");F.setAttribute("class","profile-x-legend"),F.setAttribute("font-family","Verdana"),F.setAttribute("font-size","11px"),F.setAttribute("fill","#5E5E5E"),F.textContent=`Distance (${d})`,F.setAttribute("transform",`translate(${y+A+P/2}, ${R+C+_+3})`),F.setAttribute("text-anchor","middle"),E.appendChild(F),w.appendChild(E),w.appendChild(M);const U=document.createElementNS("http://www.w3.org/2000/svg","g");let H=1;d==="km"&&(H=1e3);let te=this._dataDistToSvgX(a[0].dist/H,v,P,G),ee=this._dataZToSvgY(a[0].z,R,k,j),ue=`M${te},${ee}`;for(let ft=1;ft<a.length;ft++)te=this._dataDistToSvgX(a[ft].dist/H,v,P,G),ee=this._dataZToSvgY(a[ft].z,R,k,j),ue+=` L${te},${ee}`;const Me=document.createElementNS("http://www.w3.org/2000/svg","path");Me.setAttribute("cs","100,100"),Me.setAttribute("stroke-width","1"),Me.setAttribute("stroke-opacity","1"),Me.setAttribute("stroke","#0B6BA7"),Me.setAttribute("fill","none"),Me.setAttribute("d",ue),ue+=` L${te},${R}`,ue+=` L${v-P},${R}`;const be=document.createElementNS("http://www.w3.org/2000/svg","path");be.setAttribute("cs","100,100"),be.setAttribute("stroke-width","1"),be.setAttribute("stroke-opacity","0"),be.setAttribute("stroke","#000000"),be.setAttribute("fill","#00B798"),be.setAttribute("fill-opacity","0.4"),be.setAttribute("d",ue),U.appendChild(Me),U.appendChild(be),w.appendChild(U);const pt=document.createElementNS("http://www.w3.org/2000/svg","g"),wt=document.createElementNS("http://www.w3.org/2000/svg","rect");wt.setAttribute("width",P),wt.setAttribute("height",R),wt.setAttribute("transform",`translate(${v-P},0)`),wt.setAttribute("visibility","hidden"),wt.setAttribute("pointer-events","all");const Wt=JSON.parse(JSON.stringify(a));Wt.sort(function(ft,li){return ft.dist-li.dist});const mt=document.createElementNS("http://www.w3.org/2000/svg","line");mt.setAttribute("id","focusLineX"),mt.setAttribute("class","focusLine-default"),mt.setAttribute("fill","none"),mt.setAttribute("stroke","#F90"),mt.setAttribute("stroke-width","0.5px"),mt.setAttribute("visibility","hidden");const Ne=document.createElementNS("http://www.w3.org/2000/svg","line");Ne.setAttribute("id","focusLineY"),Ne.setAttribute("class","focusLine-default"),Ne.setAttribute("fill","none"),Ne.setAttribute("stroke","#F90"),Ne.setAttribute("stroke-width","0.5px"),Ne.setAttribute("visibility","hidden");const ct=document.createElementNS("http://www.w3.org/2000/svg","circle");ct.setAttribute("id","focusCircle"),ct.setAttribute("r",4),ct.setAttribute("class","circle-default focusCircle-default"),ct.setAttribute("fill","#F90"),ct.setAttribute("visibility","hidden"),pt.appendChild(ct),pt.appendChild(mt),pt.appendChild(Ne);const At=document.createElementNS("http://www.w3.org/2000/svg","text"),ti=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Bt=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Fi=document.createElementNS("http://www.w3.org/2000/svg","tspan");At.setAttribute("style","text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:Verdana; z-index:50;"),At.style.pointerEvents="none",At.style.position="fixed",At.setAttribute("class","tooltipInit"),At.setAttribute("text-anchor","middle"),f.appendChild(At),ti.setAttribute("class","altiPathValue"),ti.setAttribute("x","0"),ti.setAttribute("dy","-.7em"),Bt.setAttribute("class","altiPathValue"),Bt.setAttribute("x","0"),Bt.setAttribute("dy","1em"),Fi.setAttribute("class","altiPathCoords"),Fi.setAttribute("x","0"),Fi.setAttribute("dy","1em"),At.appendChild(ti),o.currentSlope&&At.appendChild(Bt),At.appendChild(Fi);const Ni=document.createElementNS("http://www.w3.org/2000/svg","g");pt.appendChild(Ni);const Jn=document.createElementNS("http://www.w3.org/2000/svg","path");Jn.setAttribute("cs","100,100"),Jn.setAttribute("fill","#FFFFFF"),Jn.setAttribute("stroke","#CCCCCC"),Jn.setAttribute("fill-opacity","0.8"),Jn.setAttribute("stroke-width","1"),Jn.setAttribute("stroke-opacity","1");const Rn=document.createElementNS("http://www.w3.org/2000/svg","path");Rn.setAttribute("cs","100,100"),Rn.setAttribute("fill","#FFFFFF"),Rn.setAttribute("stroke","#000000"),Rn.setAttribute("fill-opacity","0"),Rn.setAttribute("stroke-width","1"),Rn.setAttribute("stroke-opacity","0.4"),Rn.setAttribute("transform","translate(1,1)"),Ni.appendChild(Rn),Ni.appendChild(Jn),Ni.appendChild(At),Ni.setAttribute("class","tooltipInit"),Ni.style.pointerEvents="none";function _n(){mt.setAttribute("visibility","visible"),Ne.setAttribute("visibility","visible"),ct.setAttribute("visibility","visible"),n.__createProfileMarker(r,a[0]),At.setAttribute("class","tooltipFadeIn"),Ni.setAttribute("class","tooltipFadeIn")}function Js(){mt.setAttribute("visibility","hidden"),Ne.setAttribute("visibility","hidden"),ct.setAttribute("visibility","hidden"),n.__removeProfileMarker(r),At.setAttribute("class","tooltipFadeOut"),Ni.setAttribute("class","tooltipFadeOut")}function Tn(ft){const li=w.createSVGPoint();li.x=ft.clientX,li.y=ft.clientY;const tl=li.matrixTransform(w.getScreenCTM().inverse()),Qs=this._svgXToDataDist(tl.x,v,P,G)*H,ji=Math.max(1,this._arrayBisect(Wt,Qs)),Cn=a[ji-1],gr=a[ji];let pr=Cn;Qs-Cn.dist>gr.dist-Qs&&(pr=gr);const Hc=this._dataDistToSvgX(pr.dist/H,v,P,G),qc=this._dataZToSvgY(pr.z,R,k,j);ct.setAttribute("cx",Hc),ct.setAttribute("cy",qc),mt.setAttribute("x1",Hc),mt.setAttribute("y1",R),mt.setAttribute("x2",Hc),mt.setAttribute("y2",0),Ne.setAttribute("x1",y+A),Ne.setAttribute("y1",qc),Ne.setAttribute("x2",P+y+A),Ne.setAttribute("y2",qc),n.__updateProfileMarker(r,pr);const FA=`Altitude : ${pr.z.toLocaleString()} m`,Fx=`Pente : ${pr.slope} %`,NA=`(lat : ${pr.lat.toLocaleString()} / lon : ${pr.lon.toLocaleString()})`;ti.innerHTML=FA,Bt.innerHTML=Fx,Fi.innerHTML=NA;const il=Math.max(this._getTextWidth(NA,Fi),this._getTextWidth(FA,ti));let ed;pr.dist>h*H/2?(ed=`M -0.5 -0.5 l -6 6 l 0 16 l -${il+10} 0 l 0 -44 l ${il+10} 0 l 0 16 l 6 6`,At.setAttribute("transform",`translate(${-(il/2+12)},0)`)):pr.dist<=h*H/2&&(ed=`M -0.5 -0.5 l 6 6 l 0 16 l ${il+10} 0 l 0 -44 l -${il+10} 0 l 0 16 l -6 6`,At.setAttribute("transform",`translate(${il/2+12},0)`)),Jn.setAttribute("d",ed),Rn.setAttribute("d",ed),Ni.setAttribute("transform",`translate(${Hc},${qc})`),Ni.style.transform=`translate(${Hc}px,${qc}px)`}return wt.addEventListener("pointerover",_n),wt.addEventListener("pointerout",Js),wt.addEventListener("pointermove",Tn.bind(this)),pt.appendChild(wt),w.appendChild(pt),f.appendChild(w),e},displayProfileRaw:function(i,e,t,n){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var r=i&&i.points?i.points:{},s=document.createElement("textarea");return s.id="profilElevationResults",s.rows=10,s.cols=50,s.style.width="100%",s.innerHTML=JSON.stringify(r,void 0,4),s.addEventListener("mouseover",function(o){n.__customRawProfileMouseOverEvent(t,o)}),e.appendChild(s),e}},displayProfileLibD3:function(i,e,t,n){var r=t;if(e&&i){for(;e.firstChild;)e.removeChild(e.firstChild);var s=i.points;if(i.distance>2e3){i.unit="km";for(let S=0;S<s.length;S++)s[S].dist/=1e3}var o=r.options.displayProfileOptions,a={top:20,right:20,bottom:30,left:40},l=window.getComputedStyle(e).getPropertyValue("width"),c=window.getComputedStyle(e).getPropertyValue("height"),u=l.replace(/px/,"")-a.left-a.right,h=c.replace(/px/,"")-a.top-a.bottom,d=d3.scale.linear().range([0,u]),f=d3.scale.linear().range([h,0]),g=d3.svg.axis().scale(d).orient("bottom").ticks(5),p=d3.svg.axis().scale(f).orient("left").ticks(5),m=d3.svg.line().interpolate("basis").x(function(S){return d(S.dist)}).y(function(S){return f(S.z)}),v=d3.svg.area().interpolate("basis").x(function(S){return d(S.dist)}).y0(h).y1(function(S){return f(S.z)}),y=d3.select(e).append("svg").attr("width",u+a.left+a.right).attr("height",h+a.top+a.bottom).append("g").attr("transform","translate("+a.left+","+a.top+")"),A=d3.extent(s,function(S){return S.dist});d.domain(A);var _=[0,d3.max(s,function(S){return S.z})];f.domain(_),y.append("path").datum(s).attr("class","area-d3").attr("d",v),y.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+h+")").call(g).append("text").attr("y",-15).attr("dy",".71em").attr("x",u).text("Distance ("+i.unit+")"),y.append("g").attr("class","y axis-d3").call(p).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),y.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+h+")").call(g.orient("bottom").tickSize(-h,0,0).tickFormat("")),y.append("g").attr("class","grid-d3 horizontal").call(p.orient("left").tickSize(-u,0,0).tickFormat("")),y.append("path").datum(s).attr("class","line-d3").attr("d",m),y.selectAll("circle").data(s).enter().append("circle").attr("cx",function(S){return d(S.dist)}).attr("cy",function(S){return f(S.z)}).attr("r",0).attr("class","circle-d3");var C=y.append("g").style("display","none");C.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),C.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),C.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var I=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),b=d3.bisector(function(S){return S.dist}).left;return y.append("rect").attr("class","overlay-d3").attr("width",u).attr("height",h).on("mouseover",function(){C.style("display",null),n.__createProfileMarker(r,s[0])}).on("mouseout",function(){C.style("display","none"),n.__removeProfileMarker(r),I.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var S=d3.mouse(this),R=d.invert(S[0]),P=Math.max(1,b(s,R)),w=s[P-1],x=s[P],D=R-w[0]>x[0]-R?x:w,k=d(D.dist),O=f(D.z);C.select("#focusCircle").attr("cx",k).attr("cy",O),C.select("#focusLineX").attr("x1",k).attr("y1",f(_[0])).attr("x2",k).attr("y2",f(_[1])),C.select("#focusLineY").attr("x1",d(A[0])).attr("y1",O).attr("x2",d(A[1])).attr("y2",O),n.__updateProfileMarker(r,D),I.transition().duration(200).style("opacity",.9);var N="";N+=" Altitude : "+D.z+" m",o.currentSlope&&(N+="<br/> Pente : "+D.slope+" %"),N+="<br/> (Lat : "+D.lat+"/ Lon : "+D.lon+")",I.html(N).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),y}},displayProfileLibAmCharts:function(i,e,t,n){var r=t;if(e&&i){var s=i.points,o="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>",a=r.options.displayProfileOptions.currentSlope;if(a&&(o+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),o+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){}),i.distance>2e3){i.unit="km";for(let d=0;d<s.length;d++)s[d].dist/=1e3}for(let d=0;d<s.length;d++){var l=s[d].dist,c=100;l>100?c=1:l>10&&(c=10),l=Math.round(l*c)/c,s[d].dist=l}var u={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+i.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:o,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:s},h=AmCharts.makeChart(e,u);return h.addListener("changed",function(d){var f=d.chart.dataProvider[d.index];n.__updateProfileMarker(r,f)}),h}}},Je=ot.getLogger("elevationpath"),on,LA=(on=class extends Xn{constructor(e){if(Je.trace("ElevationPath()"),e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof on))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ElevationPath",this._uid=Xe.generate(),this._showContainer=null,this._pictoButton=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}static __removeProfileMarker(e){var t=e;t._marker&&(t._measureSource.removeFeature(t._marker),t._marker=null)}static __createProfileMarker(e,t){var n=e;n._marker&&(n._measureSource.removeFeature(n._marker),n._marker=null);var r=n.getMap(),s=r.getView().getProjection(),o=Et([t.lon,t.lat],"EPSG:4326",s),a=n._measureSource.getFeatures()[0].getGeometry().getClosestPoint(o),l=new Ki(a);n._marker=new Ht({geometry:l}),Je.trace(l),n._marker.setStyle(n._markerStyle),n._measureSource.addFeature(n._marker)}static __updateProfileMarker(e,t){var n=e;on.__removeProfileMarker(n),on.__createProfileMarker(n,t)}static __customRawProfileOperation(e,t){Je.log("__customRawProfileOperation");for(var n=e,r=t.points,s=n.getMap().getView().getProjection(),o=0;o<r.length;o++){var a=r[o],l=Et([a.lon,a.lat],"EPSG:4326",s),c=new Ki(l);n._marker=new Ht({geometry:c}),Je.trace(c);var u=on.DEFAULT_STYLES.RESULTS,h=new Ei({radius:u.imageRadius,stroke:new je({color:u.imageStrokeColor,width:u.imageStrokeWidth}),fill:new $e({color:u.imageFillColor})});n._marker.setStyle(new Ee({image:h})),n._measureSource.addFeature(n._marker)}}static __customRawProfileMouseOverEvent(e,t){Je.log("__customRawProfileMouseOverEvent",e,t)}static DISPLAY_PROFILE_LIB_AMCHARTS(e,t,n){if(Je.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),typeof AmCharts>"u"){Je.log("Lib. AmCharts is not loaded !");return}var r=Wd.displayProfileLibAmCharts(e,t,n,on);r&&(this._profile=r)}static DISPLAY_PROFILE_LIB_D3(e,t,n){if(Je.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),typeof d3>"u"){Je.log("Lib. D3 is not loaded !");return}var r=Wd.displayProfileLibD3(e,t,n,on);r&&(this._profile=r)}static DISPLAY_PROFILE_RAW(e,t,n){Je.trace("ElevationPath.DISPLAY_PROFILE_RAW");var r=Wd.displayProfileRaw(e,t,n,on);r&&(this._profile=r)}static DISPLAY_PROFILE_BY_DEFAULT(e,t,n){Je.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var r=Wd.displayProfileByDefault(e,t,n,on);r&&(this._profile=r)}setMap(e){if(Je.trace("ElevationPath::setMap"),e&&(this.options.active&&(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),!this.options.target&&!this.options.position&&$h.add(e,this),this.options.export)){var t=He.assign({control:this},this.options.export);this.export=new el(t),this.export.render();var n=this;this.export.on("export:compute",r=>{n.dispatchEvent({type:"export:compute",content:r.content})})}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getActive(){return Je.trace("ElevationPath::getActive"),this.options.active}setActive(e){Je.trace("ElevationPath::setActive"),this.options.active=e}getData(){return He.assign({type:"elevationpath"},this._data)}setData(e){this._data=e}getContainer(){return this._container}getLayer(){return this._measureVector}setLayer(e){if(!e){this._measureVector=null;return}if(!(e instanceof Di)){Je.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._drawStyleFinish),this._measureVector=e,this._measureSource=e.getSource()}getGeoJSON(){var e=this._measureVector.getSource().getFeatures(),t=new Dr({defaultStyle:this._drawStyleFinish}),n=t.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return n}getStyle(){return this._drawStyleFinish}clean(e){Je.trace("ElevationPath::clean");var t=this.getMap();this._panelContainer.style.display="none",this._pictoButton.setAttribute("aria-pressed",!1),this._removeProfile(),this._removeMeasureInteraction(t,typeof e<"u"?e:!1),this.setLayer()}init(){this._pictoButton.setAttribute("aria-pressed",!0),this._panelContainer.style.display="block",this._displayProfile(this._data),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden"}_initialize(e){Je.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,export:!1,elevationOptions:{outputFormat:"json"},layerDescription:{title:"Profil altimtrique",description:"Mon profil altimtrique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},He.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var t=e.displayProfileOptions||{};this.export=null;var n=t.apply;this.options.displayProfileOptions.apply=typeof n=="function"?n:on.DISPLAY_PROFILE_BY_DEFAULT;var r=t.target;this.options.displayProfileOptions.target=typeof r<"u"?r:null;var s=e.stylesOptions||{};this.options.stylesOptions.draw=s.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=s.marker||{},this._createStylingMarker()}_initializeContainer(){Je.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoButton=this._createShowElevationPathPictoElement();e.appendChild(t),this.options.active&&this._pictoButton.click();var n=this._panelContainer=this._createElevationPathPanelElement(),r=this._createElevationPathPanelDivElement();n.appendChild(r);var s=this._createElevationPathPanelHeaderElement();r.appendChild(s);var o=this._profileContainer=this._createElevationPathPanelProfilElement();r.appendChild(o);var a=this._waitingContainer=this._createElevationPathWaitingElement();r.appendChild(a);var l=this._infoContainer=this._createElevationPathInformationsElement();return r.appendChild(l),this.options.displayProfileOptions.target===null&&e.appendChild(n),e}_createStylingMarker(){Je.trace("ElevationPath::_createStylingMarker ");var e=on.DEFAULT_STYLES.MARKER;Je.trace("style marker",e),this.options.stylesOptions.marker instanceof Bf&&(e=this.options.stylesOptions.marker),this._markerStyle=new Ee({image:e})}_createStylingDraw(){Je.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;Je.trace("style start",e.start);var t={image:nr.DEFAULT_POINTER_STYLE,stroke:nr.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof Bf&&(t.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof je&&(t.stroke=e.start),this._drawStyleStart=new Ee(t),Je.trace("style finish",e.finish);var n={stroke:nr.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof je&&(n.stroke=e.finish),this._drawStyleFinish=new Ee(n)}_createStylingProfile(){Je.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;Je.trace("style profile",e);var t=on.DEFAULT_STYLES.PROFILE;Object.keys(t).forEach(n=>{if(!e.hasOwnProperty(n))e[n]=t[n];else{var r=t[n];typeof r=="object"&&(He.mergeParams(r,e[n]),e[n]=r)}})}_initMeasureInteraction(e){Je.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new gn,this._measureVector=new Di({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure:profil",e.addLayer(this._measureVector),e.getControls().forEach(t=>{if(t instanceof gs){var n=this._measureVector.gpLayerId;t._layers[n].title===n&&t.addLayer(this._measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}}))}_addMeasureInteraction(e){Je.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new yr({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",t=>{Je.trace("drawstart",t),this._marker!==null&&(this._measureSource.removeFeature(this._marker),this._marker=null),this._lastSketch!==null&&(this._measureSource.removeFeature(this._lastSketch),this._lastSketch=null),this._currentSketch=t.feature;for(var n=this._measureSource.getFeatures(),r=0;r<n.length;r++)this._measureSource.removeFeature(n[r]);this.dispatchEvent("elevationpath:drawstart")}),this._measureDraw.on("drawend",t=>{Je.trace("drawend",t),this.dispatchEvent("elevationpath:drawend"),this._lastSketch=this._currentSketch,typeof this.options.elevationOptions.onSuccess>"u"&&this.options.displayProfileOptions.target===null&&(this._panelContainer.style.display="block"),this._measureDraw.setActive(!1),this._requestService()}))}_removeMeasureInteraction(e,t){Je.trace("ElevationPath::_removeMeasureInteraction()"),e&&(t&&this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))}_getGeometry(){if(this._currentSketch===null){Je.warn("Current Feature undefined !?");return}for(var e=[],t=this.getMap(),n=t.getView().getProjection(),r="EPSG:4326",s=this._currentSketch.getGeometry().getCoordinates(),o=0;o<s.length;o++){var a=s[o],l=a;n!==r&&(l=Et(a,n,r)),e.push({lon:Math.round(l[0]*1e8)/1e8,lat:Math.round(l[1]*1e8)/1e8})}return e}_getLength(){if(this._currentSketch===null){Je.warn("Current Feature undefined !?");return}for(var e=0,t=this.getMap(),n=t.getView().getProjection(),r="EPSG:4326",s=this._currentSketch.getGeometry().getCoordinates(),o=0,a=s.length-1;o<a;++o){var l=Et(s[o],n,r),c=Et(s[o+1],n,r);l[0]=Math.round(l[0]*1e8)/1e8,l[1]=Math.round(l[1]*1e8)/1e8,c[0]=Math.round(c[0]*1e8)/1e8,c[1]=Math.round(c[1]*1e8)/1e8,e+=Oa(l,c)}return e}_getSketchCoords(){if(this._currentSketch===null){Je.warn("Current Feature undefined !?");return}for(var e=this.getMap(),t=e.getView().getProjection(),n="EPSG:4326",r=[],s=this._currentSketch.getGeometry().getCoordinates(),o=0;o<s.length;o++){var a=Et(s[o],t,n);a[0]=Math.round(a[0]*1e8)/1e8,a[1]=Math.round(a[1]*1e8)/1e8,r.push(a)}return r}_requestService(){Je.trace("ElevationPath::_requestService");var e=this._getGeometry();if(Je.trace("geometry",e),!e){Je.warn("missing geometry !?");return}var t={};He.mergeParams(t,this.options.elevationOptions),He.mergeParams(t,{apiKey:t.apiKey||this.options.apiKey}),typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),He.mergeParams(t,{ssl:t.ssl});var n=this,r=this.options.elevationOptions.onFailure!==null&&typeof this.options.elevationOptions.onFailure=="function",s=this.options.elevationOptions.onSuccess!==null&&typeof this.options.elevationOptions.onSuccess=="function",o=function(f){Je.trace(f),f&&(n._panelContainer.style.display="block",n._data&&(n._data={}),n._data=n._computeElevationMeasure(f.elevations),n._displayProfile(n._data),n._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",n._waiting=!1,n._measureDraw.setActive(!0)),s&&n.options.elevationOptions.onSuccess.call(n,n.getData())},a=function(f){n._panelContainer.style.display="none",Je.error(f.message),n._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",n._waiting=!1,n._measureDraw.setActive(!0),r&&n.options.elevationOptions.onFailure.call(n,f)};He.mergeParams(t,{onSuccess:o,onFailure:a});var l=t.sampling;if(!l){var c,u=this._getLength();Je.trace("length",u);var h=Math.max(50,Math.floor(u)/5);h>200?c=200:c=Math.floor(h);var d=this._getSketchCoords().length;d>100&&(c=0)}c>0&&He.mergeParams(t,{sampling:c}),He.mergeParams(t,{positions:e}),Je.trace("options du service",t),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",yt.Services.getAltitude(t)}_computeElevationMeasure(e){Je.trace("ElevationPath::_computeElevationMeasure",e);var t=e,n="m",r=this._getSketchCoords();if(r){var s=0,o=0,a=r[1];t[0].dist=0,t[0].slope=0,t[0].lat=Math.round(t[0].lat*1e4)/1e4,t[0].lon=Math.round(t[0].lon*1e4)/1e4;for(var l=0,c=0,u=0,h=0,d=0,f=0,g=[],p=1;p<t.length;p++){var m=[t[p].lon,t[p].lat],v=o+Oa(m,r[s]),y=v-d;m[0]===a[0]&&m[1]===a[1]&&(s++,o=v,p!==t.length-1&&(a=r[s+1]));var A=t[p].z,_=t[p-1].z;A<0&&(A=0),_<0&&(_=0);var C=A-_;C<0?(l+=y,h+=C):C>0&&(c+=y,u+=C),d=v,t[p].dist=v,g.push(v),f+=C?Math.abs(Math.round(C/y*100)):0,t[p].slope=C?Math.abs(Math.round(C/y*100)):0;var I=t[p].slope;I>15&&I<30?t[p].color="#005b4c":I>30&&I<45?t[p].color="#00362d":I>45?t[p].color="#00120f":t[p].color="#00B798",t[p].lat=Math.round(t[p].lat*1e4)/1e4,t[p].lon=Math.round(t[p].lon*1e4)/1e4}Je.trace("List Distances",g);for(var b=t[0].z,S=t[0].z,R=t[0].slope,P=0;P<t.length;P++){var w=t[P];w.z<-100&&(w.z=0),w.z>S&&(S=w.z),w.z<b&&(b=w.z),w.slope>R&&(R=w.slope)}return{greaterSlope:R,meanSlope:Math.round(f/t.length),distancePlus:c,distanceMinus:l,ascendingElevation:u,descendingElevation:h,altMin:b.toLocaleString(),altMax:S.toLocaleString(),distance:this._getLength(),unit:n,points:t}}}_displayProfile(e){Je.trace("ElevationPath::_displayProfile",e),this._updateInfoContainer();var t=this.options.displayProfileOptions.target;t&&t.appendChild(this._panelContainer),t=this._profileContainer;var n=this,r=this.options.displayProfileOptions.apply;r.call(this,e,t,n);var s=this.options.displayProfileOptions,o=document.getElementById("GPelevationPathPanelInfo-"+this._uid);o&&(s.totalDistance||s.greaterSlope||s.meanSlope||s.ascendingElevation||s.descendingElevation)&&(o.style.display="block"),this.dispatchEvent({type:"elevationpath:compute"})}_updateInfoContainer(){Je.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,t=this.options.displayProfileOptions.meanSlope,n=this.options.displayProfileOptions.greaterSlope,r=this.options.displayProfileOptions.ascendingElevation,s=this.options.displayProfileOptions.descendingElevation,o=this._infoContainer;if(o.childElementCount)for(;o.firstChild;)o.removeChild(o.firstChild);e&&this._addElevationPathInformationsItem("Distance totale : "+Math.round(this._data.distance).toLocaleString()+" m"),r&&this._addElevationPathInformationsItem("Dnivel positif : "+this._data.ascendingElevation.toLocaleString()+" m"),s&&this._addElevationPathInformationsItem("Dnivel ngatif : "+this._data.descendingElevation.toLocaleString()+" m"),t&&this._addElevationPathInformationsItem("Pente moyenne : "+this._data.meanSlope.toLocaleString()+" %"),n&&this._addElevationPathInformationsItem("Plus forte pente : "+this._data.greaterSlope.toLocaleString()+" %")}_removeMeasure(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),t=0;t<e.length;t++)this._measureSource.removeFeature(e[t])}}_removeProfile(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)}onShowElevationPathClick(e){var t=this.getMap();ds.unset(t,{current:"ElevationPath"});var n=this._pictoButton.ariaPressed;n==="true"?(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(t),this._addMeasureInteraction(t)):(this._panelContainer.style.display="none",e&&e.target.dataset&&e.target.dataset.removeMeasure?e.target.dataset.removeMeasure==="true"?this._removeMeasure():(this._lastSketch=null,this._currentSketch=null):this._removeMeasure(),this._removeProfile(),e&&e.target.dataset&&e.target.dataset.removeLayer?this._removeMeasureInteraction(t,e.target.dataset.removeLayer==="true"):this._removeMeasureInteraction(t,!0))}onOpenElevationPathInfoClick(){var e=this._infoContainer;e.className==="GPelementVisible gpf-visible"?(clearTimeout(this._timerHdlr),e.className="GPelementHidden gpf-hidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){e.className="GPelementHidden gpf-hidden"},4e3)}},Ko(on,"DEFAULT_STYLES",{MARKER:new Qt({src:jt.lightOrange,anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}}),on);Object.assign(LA.prototype,iW);window.ol&&window.ol.control&&(window.ol.control.ElevationPath=LA);var Fe=ot.getLogger("layerimport"),oi,Lx=(oi=class extends Xn{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof oi))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this._initialize(e),this._container=this._initContainer(e),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){var t=this;e.getLayers().on("remove",function(n){n.element.gpResultLayerId==="layerimport:MAPBOX"&&n.element.gpEditorId&&t._mapBoxPanel&&t._importPanel&&(t.cleanMapBoxResults(n.element.gpEditorId),t._mapBoxPanel.style.display="none",t._importPanel.style.display="")},t),this.draggable&&(Ro.dragElement(this._importPanel,this._importPanelHeader,this.options.position?null:e.getTargetElement()),Ro.dragElement(this._getCapPanel,this._getCapPanelHeader,e.getTargetElement()),Ro.dragElement(this._mapBoxPanel,this._mapBoxPanelHeader,e.getTargetElement())),this.collapsed||this._showImportButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){Fe.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showImportButton.click(),this.collapsed=e)}getStaticImportContent(){return this.contentStatic}getServiceImportContent(){return this.contentService}getName(){return this._name}_initialize(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},editor:{}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new Ee({image:oi.DefaultStyles.image,stroke:oi.DefaultStyles.stroke,fill:oi.DefaultStyles.fill,text:oi.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new Ee({image:oi.DefaultStyles.image,stroke:oi.DefaultStyles.stroke,fill:oi.DefaultStyles.fill,text:oi.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new Ee({image:oi.DefaultStyles.image,stroke:oi.DefaultStyles.stroke,fill:oi.DefaultStyles.fill,text:oi.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions.MapBox.defaultStyle:this.options.vectorStyleOptions.MapBox.defaultStyle=new Ee({image:oi.DefaultStyles.image,stroke:oi.DefaultStyles.stroke,fill:oi.DefaultStyles.fill,text:oi.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.editor?this.options.vectorStyleOptions.MapBox.editor=e.vectorStyleOptions.MapBox.editor:this.options.vectorStyleOptions.MapBox.editor={title:!0,collapse:!1,themes:!1,layers:!0,style:!0,filter:!1,legend:!0,group:!1},e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.hasOwnProperty("display")?this.options.vectorStyleOptions.MapBox.display=e.vectorStyleOptions.MapBox.display:this.options.vectorStyleOptions.MapBox.display=!0,Array.isArray(e.layerTypes)){for(var t=[],n=0;n<e.layerTypes.length;n++)t.push(e.layerTypes[n]);this.options.layerTypes=t}He.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=Xe.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportButton=null,this._importPanel=null,this._panelCloseButton=null,this._importPanelHeader=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapPanelHeader=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxPanelHeader=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this._hasMapBoxResults=!1,this.contentStatic=null,this._url=null,this._file=null,this._name=null}_checkInputOptions(e){if(e.layerTypes){var t=e.layerTypes;if(!Array.isArray(t))Fe.warn(`[ol.control.LayerImport] 'options.layerTypes' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]`),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"];else{for(var n=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],r=[],s=0;s<t.length;s++)typeof t[s]!="string"?(r.push(s),Fe.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+t[s]+")")):(t[s]=t[s].toUpperCase(),n.indexOf(t[s])===-1&&(r.push(s),Fe.log("[ol.control.LayerImport] options.layerTypes : "+t[s]+" is not a supported type")),t[s]==="GEOJSON"&&(t[s]="GeoJSON"),t[s]==="MAPBOX"&&(t[s]="MAPBOX"));if(r.length!==0)for(var o=r.length-1;o>=0;o--)t.splice(r[o],1)}}}_initDefaultStyles(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new Ee({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var t=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new Ee({image:t.image,stroke:t.stroke,fill:t.fill,text:t.text});var n=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new Ee({image:n.image,stroke:n.stroke,fill:n.fill,text:n.text});var r=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new Ee({image:r.image,stroke:r.stroke,fill:r.fill,text:r.text})}_initImportTypes(){this._currentImportType=this.options.layerTypes[0]||"KML",this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"}_initContainer(){var e=this._createMainContainerElement(),t=this._showImportButton=this._createShowImportPictoElement();e.appendChild(t);var n=this._importPanel=this._createImportPanelElement(),r=this._createImportPanelDivElement();n.appendChild(r);var s=this._importPanelHeader=this._createImportPanelHeaderElement(),o=this._createImportPanelTitleElement();s.appendChild(o);var a=this._panelCloseButton=this._createImportPanelCloseElement();s.appendChild(a),r.appendChild(s);var l=this._formContainer=this._initInputFormElement();r.appendChild(l);var c=this._getCapPanel=this._createImportGetCapPanelElement(),u=this._getCapPanelHeader=this._createImportGetCapPanelHeaderElement();c.appendChild(u);var h=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();c.appendChild(h),r.appendChild(c);var d=this._mapBoxPanel=this._createImportMapBoxPanelElement(),f=this._mapBoxPanelHeader=this._createImportMapBoxPanelHeaderElement();d.appendChild(f);var g=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();d.appendChild(g);var p=this._loadingContainer=this._createLoadingElement();d.appendChild(p),r.appendChild(d);var m=this._waitingContainer=this._createImportWaitingElement();return r.appendChild(m),e.appendChild(n),e}_initInputFormElement(){var e=this._createImportPanelFormElement(),t=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(t);var n=this._createImportStaticParamsContainer(this.options.layerTypes[0]),r=this._createStaticNameLabel();n.appendChild(r);var s=this._createStaticModeChoiceDiv(),o=this._createStaticLocalChoiceDiv();s.appendChild(o);var a=this._createStaticUrlChoiceDiv();s.appendChild(a),n.appendChild(s);var l=this._createStaticLocalInputDiv();l.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),l.appendChild(this._staticLocalImportInput),n.appendChild(l);var c=this._createStaticUrlInputDiv();c.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),c.appendChild(this._staticUrlImportInput),n.appendChild(c),e.appendChild(n);var u=this._createServiceParamsContainer(this.options.layerTypes[0]),h=this._createServiceUrlDiv();h.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),h.appendChild(this._serviceUrlImportInput),u.appendChild(h),e.appendChild(u);var d=this._createImportSubmitFormElement();return e.appendChild(d),e}_onShowImportClick(){var e=this.getMap();ds.unset(e);var t=this._showImportButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this._hasMapBoxResults?this._mapBoxPanel.style.display="block":(this._formContainer.style.display="block",this._importPanelHeader.style.display="")}_onImportTypeChange(e){this._currentImportType=e.target.value,this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1)}_onStaticImportTypeChange(e){this._currentStaticImportType=e.target.value}_onGetCapPanelClose(){(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&this.cleanGetCapResultsList()}_onMapBoxPanelClose(){this.cleanMapBoxResultsList(),this._loadingContainer.className=""}_onMapBoxReturnPictoClick(e){this._mapBoxPanel.style.display="none",this._loadingContainer.className=""}_onImportSubmit(){Fe.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?this._importStaticLayer():this._importServiceLayers()}_importStaticLayer(){var e,t=document.getElementById(this._addUID("GPimportName"));t&&(e=t.value||"",Fe.log("import layer name : "+e)),this._currentStaticImportType==="local"?(Fe.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):this._currentStaticImportType==="url"&&(Fe.log("import static layer from url"),this._importStaticLayerFromUrl(e))}_importStaticLayerFromUrl(e){var t=this._staticUrlImportInput.value;if(Fe.log("url : ",t),t.length===0){Fe.error("[ol.control.LayerImport] url parameter is mandatory");return}t.trim&&(t=t.trim()),this._url=t,e||(e=this._url.substring(this._url.lastIndexOf("/")+1,this._url.lastIndexOf("."))),this._name=e,this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(t=Sm.proxifyUrl(t,this.options.webServicesOptions));var n=this;yt.Protocols.XHR.call({url:t,method:"GET",timeOut:15e3,onResponse:function(r){n._hideWaitingContainer(),n._addFeaturesFromImportStaticLayer(r,e)},onFailure:function(r){n._hideWaitingContainer(),Fe.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",r)}})}_importStaticLayerFromLocalFile(e){var t=this._staticLocalImportInput.files[0];if(!t){Fe.warn("[ol.control.LayerImport] missing file");return}this._file=t,e||(e=this._file.name.substring(this._file.name.lastIndexOf("/")+1,this._file.name.lastIndexOf("."))),this._name=e;var n=new FileReader,r=this;n.onerror=s=>{r._hideWaitingContainer(),Fe.error("error fileReader : ",s)},n.onprogress=()=>{Fe.log("onprogress")},n.onloadstart=()=>{r._displayWaitingContainer(),Fe.log("onloadstart")},n.onabort=()=>{r._hideWaitingContainer(),Fe.log("onabort")},n.onloadend=s=>{Fe.log("onloadend : ",s)},n.onload=s=>{Fe.log("fileReader onload - file content : ",s.target.result),r._hideWaitingContainer(),r._addFeaturesFromImportStaticLayer(s.target.result,e)},n.readAsText(t)}_addFeaturesFromImportStaticLayer(e,t){var n=this.getMap();if(!(!n||!e)){var r=null,s=null,o=null,a=null;if(this.contentStatic=e,this._currentImportType==="MAPBOX"){this._hasMapBoxResults=!0;var l=this,c=JSON.parse(e),u=c.sources,h=Object.keys(u).length>1?1:0;for(var d in u)if(u.hasOwnProperty(d)){var f="",g="",p=null,m=null,v=null,y=null;if(c.metadata){for(var A in c.metadata)if(c.metadata.hasOwnProperty(A)){var _=A.split(":");if(_[0]==="geoportail"){var C=_[1];if(C==="title"){f=c.metadata[A];continue}if(C==="description"){g=c.metadata[A];continue}if(C==="quicklookUrl"){p=c.metadata[A];continue}if(C==="legends"){m=c.metadata[A];continue}if(C==="metadata"){v=c.metadata[A];continue}if(C==="originators"){y=c.metadata[A];continue}}}}f||(f="Couche MapBox"),g||(g="Couche MapBox"),f=h?f+"("+d+")":f;var I=u[d],b=I.type;if(b==="vector"){var S=I.url,R=I.tiles,P=c.sprite;if(S&&S.indexOf("mapbox://")===0){var w=this._url;if(w){if(R=["a","b","c","d"].map(function(G){var W=S.replace("mapbox://",""),X=w.split("?")[1];return"https://"+G+".tiles.mapbox.com/v4/"+W+"/{z}/{x}/{y}.vector.pbf?"+X}),P.indexOf("mapbox://")===0){var x=w.split("?");c.sprite=x[0]+"/sprite?"+x[1]}}else Fe.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(R)o=new lg({featureClass:Ht}),s=new Hl({attributions:I.attribution,format:o,urls:R}),s._title=f,s._description=g,s._quicklookUrl=p,s._metadata=v,s._legends=m,s._originators=y,s.on("tileloadstart",function(G){l._loadingContainer.className="GPmapLoadingVisible"}),s.on("tileloadend",function(G){l._loadingContainer.className=""}),s.on("tileloaderror",function(G){l._loadingContainer.className=""}),r=new Ma({source:s,visible:!1,declutter:!0}),r.id=d,r.gpResultLayerId="layerimport:"+this._currentImportType;else if(S){o=new lg({featureClass:Ht}),r=new Ma({visible:!1,declutter:!0}),r.id=d,r.gpResultLayerId="layerimport:"+this._currentImportType;var D=new jy({url:S}),k=D.on("change",function(){if(D.getState()==="ready"){for(var G=D.getTileJSON(),W=Array.isArray(G.tiles)?G.tiles:[G.tiles],X=0;X<W.length;X++){var K=W[X];K.indexOf("http")!==0&&(W[X]=S+K)}s=new Hl({attributions:D.getAttributions()||G.attribution,format:o,urls:W}),s._title=f,s._description=g,s._quicklookUrl=p,s._metadata=v,s._legends=m,s._originators=y,s.on("tileloadstart",function(ie){l._loadingContainer.className="GPmapLoadingVisible"}),s.on("tileloadend",function(ie){l._loadingContainer.className=""}),r.setSource(s),r.set("mapbox-extension",G.vector_layers),gi(k)}})}}else if(b==="geojson"){var O=I.data;o=new Dr,s=new Hl({attributions:I.attribution,format:o,url:O}),s._title=f,s._description=g,s._quicklookUrl=p,s._metadata=v,s._legends=m,s._originators=y,r=new Ma({source:s,visible:!1,declutter:!0}),r.id=d,r.gpResultLayerId="layerimport:"+this._currentImportType}else{Fe.warn("Type MapBox format unknown !");return}var N=JSON.parse(JSON.stringify(c));if(h){for(var B=N.layers,V=0;V<B.length;V++){var se=B[V];if(se.source!==d){B.splice(V,1);continue}}for(var j in N.sources)N.sources.hasOwnProperty(j)&&j!==d&&delete N.sources[j]}var Ae={id:d,styles:N,layer:r,options:{title:t||f,description:g,quicklookUrl:p,metadata:v,legends:m,originators:y}};(function(G){var W=()=>{Cl(G.layer,G.styles,G.id).then(function(){var ie=!0;G.layer.setVisible(ie);var $=1;G.layer.setOpacity($)}).then(function(){var ie=n.getView().getProjection().getCode();n.getView()&&G.styles.center&&G.styles.center.length&&n.getView().setCenter(Et(G.styles.center,"EPSG:4326",ie)),n.getView()&&(G.styles.zoom||G.styles.zoom===0)&&n.getView().setZoom(G.styles.zoom);var $=G.layer.getSource();if(n.getView()&&n.getSize()&&$.getExtent){var Q=$.getExtent();Q&&Q[0]!==1/0&&n.getView().fit($.getExtent(),n.getSize())}}).then(function(){l._formContainer.style.display="none",l._importPanelHeader.style.display="none";var ie=new Qh({target:l._mapBoxResultsListContainer,style:JSON.parse(JSON.stringify(G.styles)),scope:this,events:{"editor:onloaded":l._onLoadedMapBox,"editor:layer:onclickvisibility":l._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":l._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":l._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":l._onChangeLegendValueSourceMapBox,"editor:legend:onclickedition":l._onDisplayLayerSourceMapBox},tools:l.options.vectorStyleOptions.MapBox.editor});return ie.setContext("map",n),ie.setContext("layer",G.layer),ie.createElement().then(function(){if(ie.getLayers().length===0)throw new Error("Il n'existe pas de styles pour la source demande !?")}).then(function(){l.options.vectorStyleOptions.MapBox.display&&(l._mapBoxPanel.style.display="block")}).then(function(){var $=l._mapBoxResultsListContainer.getElementsByClassName("GPEditorMapBoxLayerTitleLabel");for(let Q=0;Q<$.length;Q++){const Z=$[Q];Z.textContent==="bckgrd"&&(Z.textContent="Couleur de remplissage")}}).then(function(){G.layer.set("mapbox-editor",ie.getID()),setTimeout(function(){n.dispatchEvent({id:ie.getID(),type:"editor:loaded",style:G.styles,layer:G.layer})},100)}).catch(function($){throw $})}).then(function(){n.dispatchEvent({id:G.id,type:"render:success",style:G.styles})}).catch(function(ie){Fe.error(ie),n.dispatchEvent({id:G.id,type:"render:failure",error:ie})})};Fe.warn(G.layer);var X=n.get("mapbox-styles")||{},K=G.id;X[K]=G.styles,n.set("mapbox-styles",X),G.layer.set("mapbox-styles",G.styles),n.addLayer(G.layer),G.layer.getSource()?W():G.layer.once("change:source",W),n.getControls().forEach(ie=>{ie instanceof gs&&ie.addLayer(G.layer,G.options)})})(Ae)}}else{this._currentImportType==="KML"?(a=this.options.vectorStyleOptions.KML.defaultStyle,o=new _h({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[a]})):this._currentImportType==="GPX"?(a=this.options.vectorStyleOptions.GPX.defaultStyle,o=new Ch({defaultStyle:a})):this._currentImportType==="GeoJSON"&&(a=this.options.vectorStyleOptions.GeoJSON.defaultStyle,o=new Dr({defaultStyle:a}));var q=o.readProjection(e),Te=this._getMapProjectionCode(),Ce=null;Ce=o.readFeatures(e,{dataProjection:q,featureProjection:Te}),Fe.log("loaded features : ",Ce),s=new gn({features:new bi}),s.addFeatures(Ce),Fe.trace(s),s._title=s._description=t,r=new Di({source:s,style:a}),r.gpResultLayerId="layerimport:"+this._currentImportType;var pe=o.readRootExtensions("geoportail:compute");if(pe&&Object.keys(pe).length!==0){var Ie={route:{class:bA,name:"itineraire"},isocurve:{class:SA,name:"isocurve"},elevationpath:{class:LA,name:"profil altimetrique"}},z=pe.type,oe=pe.transport;if(z){var ne=Ie[z].name,Y=oe?ne+" ("+oe+")":ne,Pe=Ie[z].class;if(Pe){r.gpResultLayerId="layerimport:COMPUTE",r.set("control",z),r.set("name",ne),r.set("graph",oe),r.set("data",pe),r.set("title",Y);var tt=new Dr({defaultStyle:a}),E=tt.writeFeatures(Ce,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});r.set("geojson",E),this.getMap().getControls().forEach(G=>{G instanceof Pe&&(G.setData(pe),G.setLayer(r),G.init())})}}}if(n.addLayer(r),n.getView()&&n.getSize()&&s.getExtent){var M=s.getExtent();M&&M[0]!==1/0&&n.getView().fit(s.getExtent(),n.getSize())}}}}_addFeaturesFromImportStaticLayerUrl(e,t){var n=this.getMap();if(!(!n||!e)){var r,s,o;if(this._currentImportType==="MAPBOX"?Fe.trace("Not yet implemented !"):(this._currentImportType==="KML"?o=new _h({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):this._currentImportType==="GPX"?o=new Ch({defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle}):this._currentImportType==="GeoJSON"&&(o=new Dr({defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle})),r=new gn({url:e,format:o}),this._currentImportType==="GPX"&&r.forEachFeature(function(l){l.getStyle()==null&&(Fe.log("[ol.control.LayerImport] set default style for GPX feature"),l.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),this._currentImportType==="GeoJSON"&&r.forEachFeature(function(l){l.getStyle()==null&&(Fe.log("[ol.control.LayerImport] set default style for GeoJSON feature"),l.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),r._title=r._description=t,s=new Di({source:r})),s.gpResultLayerId="layerimport:"+this._currentImportType,n.addLayer(s),n.getView()&&n.getSize()&&r.getExtent){var a=r.getExtent();a&&a[0]!==1/0&&n.getView().fit(r.getExtent(),n.getSize())}}}_onLoadedMapBox(e){var t=e.target.data.obj,n=this.getContext("layer");n.get("mapbox-source")===t.source&&(n.get("mapbox-editor"),e.target.editorID)}_onChangeVisibilitySourceMapBox(e){var t=e.target.data.obj,n=e.target.srcElement,r=this.getContext("layer");if(r.get("mapbox-source")===t.source&&r.get("mapbox-editor")===e.target.editorID){for(var s=r.get("mapbox-styles"),o=s.layers,a=0;a<o.length;a++)if(o[a].id===t.id){var l=o[a].layout;l?l.visibility=n.checked?"visible":"none":o[a].layout={visibility:n.checked?"visible":"none"};break}Cl(r,s,t.source).then(function(){}).catch(function(c){Fe.error(c)})}}_onChangeScaleMinSourceMapBox(e){var t=e.target.data.obj,n=e.target.srcElement,r=this.getContext("layer");if(r.get("mapbox-source")===t.source&&r.get("mapbox-editor")===e.target.editorID){for(var s=r.get("mapbox-styles"),o=s.layers,a=0;a<o.length;a++)if(o[a].id===t.id){o[a].minzoom=n.value,n.title=n.value;break}Cl(r,s,t.source).then(function(){}).catch(function(l){Fe.error(l)})}}_onChangeScaleMaxSourceMapBox(e){var t=e.target.data.obj,n=e.target.srcElement,r=this.getContext("layer");if(r.get("mapbox-source")===t.source&&r.get("mapbox-editor")===e.target.editorID){for(var s=r.get("mapbox-styles"),o=s.layers,a=0;a<o.length;a++)if(o[a].id===t.id){o[a].maxzoom=n.value,n.title=n.value;break}Cl(r,s,t.source).then(function(){}).catch(function(l){Fe.error(l)})}}_onChangeLegendValueSourceMapBox(e){var t=e.target.data.obj,n=e.target.srcElement,r=this.getContext("layer");if(r.get("mapbox-source")===t.source&&r.get("mapbox-editor")===e.target.editorID){for(var s=r.get("mapbox-styles"),o=s.layers,a=0;a<o.length;a++)if(o[a].id===t.id){var l=o[a].paint;l&&(l[n.dataset.id]=n.value);break}Cl(r,s,t.source).then(function(){}).catch(function(c){Fe.error(c)})}}_onDisplayLayerSourceMapBox(e){var t=e.target.data.obj,n=this.getContext("layer");if(n.get("mapbox-source")===t.source&&n.get("mapbox-editor")===e.target.editorID){var r=e.target.currentTarget.parentNode.id,s=r.substring(r.indexOf("-")+1,r.indexOf("_")),o=this.getLayer(s);o.collapse()}}_importServiceLayers(){if(this._currentImportType==="WFS"){Fe.warn("[ol.control.LayerImport] WFS layer import is not implemented yet");return}this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!e){Fe.error("[ol.control.LayerImport] url parameter is mandatory");return}Fe.log("url : ",e),e.trim&&(e=e.trim());var t=e.indexOf("?");t<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":t===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(e=Sm.proxifyUrl(e,this.options.webServicesOptions)),this._displayWaitingContainer();var n=this;yt.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(r){n._hideWaitingContainer(),n._displayGetCapResponseLayers(r)},onFailure:function(r){n._hideWaitingContainer(),Fe.error("[ol.control.LayerImport] getCapabilities request failed : ",r)}})}_displayGetCapResponseLayers(e){var t,n,r={content:null,title:null},s;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._importPanel.style.display="none",this._getCapPanel.style.display="block",this._currentImportType==="WMS"){t=new Iz;var o=this._getCapResponseWMS=t.read(e);if(Fe.log("getCapabilities response : ",o),o&&o.Capability&&o.Capability.Layer){var a=o.Capability.Layer;if(Array.isArray(a))for(var l=0;l<a.length;l++)this._displayGetCapResponseWMSLayer(a[l]);else this._displayGetCapResponseWMSLayer(a)}}else if(this._currentImportType==="WMTS"){t=new RV;var c=this._getCapResponseWMTS=t.read(e);if(Fe.log("getCapabilities response : ",c),c&&c.Contents&&c.Contents.Layer&&(n=c.Contents.Layer,Array.isArray(n))){this._getCapResponseWMTSLayers=n;for(var u=0;u<n.length;u++)if(s=this._getWMTSLayerProjection(n[u],c),s&&typeof s=="string")if(Re(s)||Re(s.toUpperCase()))r={content:n[u].Title,title:n[u].Abstract||n[u].Title},this._getCapResultsListContainer&&this._addImportGetCapResultLayer(r,u,this._getCapResultsListContainer);else{Fe.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",n[u]);continue}}}}_displayGetCapResponseWMSLayer(e,t){if(!e){Fe.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");return}Fe.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var n=this._getMapProjectionCode(),r,s={content:null,title:null};if(t){var o,a,l=["CRS","Style"];for(a=0;a<l.length;a++)if(o=l[a],Array.isArray(t[o])&&t[o].length!==0)if(Array.isArray(e[o])&&e[o].length!==0)for(var c=0;c<t[o].length;c++)e[o].indexOf(t[o][c])===-1&&e[o].push(t[o][c]);else e[o]=t[o];var u=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(a=0;a<u.length;a++)o=u[a],t[o]&&!e[o]&&(e[o]=t[o])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){var h=e?e._container:t._container,d=e?e.Title:t.Title;e._container=this._addImportGetCapResultListRubrique(d,h).lastChild;for(var f=0;f<e.Layer.length;f++){for(var g=!1,p=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),m=0;m<p.length;m++)p[m].title===e.Title&&(g=!0,e.Layer[f]._container=p[m].parentElement);g||(e.Layer[f]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[f],e)}}}else{var v=this._getCapResponseWMSLayers.length;if(r=this._getWMSLayerProjection(e,n),!r)Fe.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e);else{e._projection=r,s={content:e.Title,title:e.Abstract||e.Title};var y=e._container;y.localName==="ul"&&(y=y.lastChild),this._addImportGetCapResultLayer(s,v,y),this._getCapResponseWMSLayers[v]=e}}}_onGetCapResponseLayerClick(e){if(e.target&&e.target.id){var t=parseInt(e.target.id.substr(23),10);if(isNaN(t))return;var n;this._currentImportType==="WMS"?(n=this._getCapResponseWMSLayers[t],this._addGetCapWMSLayer(n)):this._currentImportType==="WMTS"&&(n=this._getCapResponseWMTSLayers[t],this._addGetCapWMTSLayer(n))}}_addGetCapWMSLayer(e){var t=this.getMap();if(!t){Fe.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");return}if(!e){Fe.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");return}var n=this._getMapProjectionCode(),r={},s=this._getWMSLayerGetMapUrl();if(s)r.url=s;else{var o=this._getCapRequestUrl.indexOf("?");o!==-1?r.url=this._getCapRequestUrl.substring(0,o):r.url=this._getCapRequestUrl}if(r.params={},e.Name)r.params.LAYERS=e.Name;else{Fe.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e);return}r.params.SERVICE="WMS",this._getCapResponseWMS.version&&(r.params.VERSION=this._getCapResponseWMS.version);var a=e._projection;if(a)a!==n&&(r.projection=a);else{Fe.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");return}var l;if(e.Style&&Array.isArray(e.Style)){var c=e.Style[0];r.params.STYLES=c.Name,c.LegendURL&&Array.isArray(c.LegendURL)&&c.LegendURL.length!==0&&(l=c.LegendURL[0].OnlineResource)}var u=new py(r);this._getWMSLayerInfoForLayerSwitcher(e,l,u);var h={};h.source=u,this._getWMSLayerMinMaxResolution(e,n,h),this._getWMSLayerExtent(e,n,h);var d=new Fa(h);d.gpResultLayerId="layerimport:WMS",e.queryable&&(d.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(d.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),t.addLayer(d)}_getWMSLayerGetMapUrl(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var t=this._getCapResponseWMS.Capability.Request.GetMap;if(t.DCPType&&Array.isArray(t.DCPType)&&t.DCPType.length!==0){var n=t.DCPType[0];n&&n.HTTP&&n.HTTP.Get&&(e=n.HTTP.Get.OnlineResource)}}return e}_getWMSLayerProjection(e,t){var n;if(!e||typeof e!="object"){Fe.warn("missing layer information (from getCapabilities)");return}var r=e.CRS;if(Array.isArray(r)){if(r.includes(t))return n=t,n;var s,o;for(o=0;o<r.length;o++)if(s=r[o],s&&typeof s=="string"&&(Re(s)||Re(s.toUpperCase())))return n=s,n}return n}_getWMSLayerMinMaxResolution(e,t,n){var r=Re(t).getUnits();if(r==="m")e.MinScaleDenominator&&(n.minResolution=e.MinScaleDenominator*28e-5),e.MaxScaleDenominator&&(n.maxResolution=e.MaxScaleDenominator*28e-5);else if(r==="degrees"){var s=.05039999999999999/(Math.PI*6378137);e.MinScaleDenominator&&(n.minResolution=e.MinScaleDenominator*s),e.MaxScaleDenominator&&(n.maxResolution=e.MaxScaleDenominator*s)}}_getWMSLayerExtent(e,t,n){if(!e){Fe.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");return}var r=e.EX_GeographicBoundingBox,s=e.BoundingBox;if(r&&Array.isArray(r))t==="EPSG:4326"?n.extent=r:n.extent=Ss(r,"EPSG:4326",t);else if(s&&Array.isArray(s)){for(var o,a,l=0;l<s.length;l++)if(o=s[l].crs,a=s[l].extent,o){if(o===t){n.extent=a;break}else if(typeof o=="string"){var c=Re(o)?Re(o):Re(o.toUpperCase());if(c){if(c.getUnits()==="degrees"&&o.toUpperCase().indexOf("EPSG")===0){var u=[a[1],a[0],a[3],a[2]];n.extent=Ss(u,c,t)}else n.extent=Ss(a,c,t);break}}}}}_getWMSLayerInfoForLayerSwitcher(e,t,n){if(e.Title?(n._title=e.Title,n._description=e.Abstract?e.Abstract:e.Title):(n._title=e.Name,n._description=e.Abstract?e.Abstract:e.Name),t&&(n._legends=[{url:t}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){n._metadata=[];for(var r=0;r<e.MetadataURL.length;r++){var s=e.MetadataURL[r].OnlineResource;s&&n._metadata.push({url:s})}}if(e.Attribution){var o=e.Attribution;n._originators={},o.OnlineResource&&(n._originators.url=o.OnlineResource),o.Title&&(n._originators.name=n._originators.attribution=o.Title),o.LogoURL&&o.LogoURL.OnlineResource&&(n._originators.logo=o.LogoURL.OnlineResource)}}_addGetCapWMTSLayer(e){if(!e||!e.Identifier){Fe.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");return}var t=this.getMap();if(t){var n={};n.layer=e.Identifier,this._getCapResponseWMTS.version&&(n.version=this._getCapResponseWMTS.version);var r=this._getWMTSLayerGetTileUrl();if(r)n.url=r;else{var s=this._getCapRequestUrl.indexOf("?");s!==-1?n.url=this._getCapRequestUrl.substring(0,s):n.url=this._getCapRequestUrl}var o=this._getTMSParams(e);n.matrixSet=o.tms,n.projection=o.projCode,n.tileGrid=new H1({resolutions:o.resolutions,matrixIds:o.matrixIds,origin:o.origin});var a,l;if(e.Style&&Array.isArray(e.Style))for(var c,u=0;u<e.Style.length&&(c=e.Style[u],a=c.Identifier,!c.isDefault);u++)c.LegendURL&&Array.isArray(c.LegendURL)&&c.LegendURL.length!==0&&(l=c.LegendURL[0].href);a==null&&Fe.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),n.style=a;var h;e.Format&&Array.isArray(e.Format)&&(h=e.Format[0]),h==null&&Fe.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),n.format=h;var d=new my(n);e.Title?(d._title=e.Title,d._description=e.Abstract?e.Abstract:e.Title):(d._title=e.Identifier,d._description=e.Abstract?e.Abstract:e.Identifier),l&&(d._legends=[{url:l}]);var f={};f.source=d,f.extent=this._getWMTSLayerExtent(e);var g;try{g=new Fa(f)}catch(p){Fe.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",p);return}g.gpResultLayerId="layerimport:WMTS",t.addLayer(g)}}_getWMTSLayerGetTileUrl(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var t=this._getCapResponseWMTS.OperationsMetadata.GetTile;t.DCP&&t.DCP.HTTP&&t.DCP.HTTP.Get&&Array.isArray(t.DCP.HTTP.Get)&&t.DCP.HTTP.Get.length!==0&&(e=t.DCP.HTTP.Get[0].href)}return e}_getWMTSLayerProjection(e,t){var n;if(!e||typeof e!="object"){Fe.warn("missing layer information (from getCapabilities)");return}if(!t||typeof t!="object"){Fe.warn("missing getCapabilities response");return}if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var r=e.TileMatrixSetLink[0].TileMatrixSet,s;if(t.Contents&&Array.isArray(t.Contents.TileMatrixSet)){for(var o=t.Contents.TileMatrixSet,a=0;a<o.length;a++)if(o[a].Identifier===r&&o[a].TileMatrix){var l=o[a];s=l.SupportedCRS,s&&typeof s=="string"&&(Re(s)||Re(s.toUpperCase()))&&(n=s);break}}}return n}_getTMSParams(e){var t={},n=[],r=[],s=[],o,a,l,c=this.getMap();if(c){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink))if(o=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var u=this._getCapResponseWMTS.Contents.TileMatrixSet,h=0;h<u.length;h++)if(u[h].Identifier===o&&u[h].TileMatrix){var d=u[h],f,g,p,m,v;if(d.SupportedCRS&&(a=d.SupportedCRS,l=Re(a)),l&&l.getUnits&&(v=l.getUnits()),Array.isArray(d.TileMatrix))for(var y=0;y<d.TileMatrix.length;y++)f=d.TileMatrix[y],f.Identifier!=null&&(g=parseInt(f.Identifier,10),n.push(g)),p=f.ScaleDenominator,v==="degrees"?m=p*28e-5*180/(Math.PI*6378137):m=p*28e-5,r.push(m),s=f.TopLeftCorner;r.sort!==void 0&&r.sort(function(A,_){return _-A}),n.sort!==void 0&&n.sort(function(A,_){return A-_})}}else Fe.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);else return;return t.tms=o,t.projCode=a,t.matrixIds=n,t.resolutions=r,t.origin=s,t}}_getWMTSLayerExtent(e){var t,n=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(t=Ss(e.WGS84BoundingBox,"EPSG:4326",n)),t}_getMapProjectionCode(){var e=this.getMap();if(!e||!e.getView||!e.getView().getProjection){Fe.warn("unable to get layerimport's map");return}var t=e.getView().getProjection().getCode();return t}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}cleanGetCapResultsList(){if(this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)}cleanMapBoxResultsList(){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)}cleanMapBoxResults(e){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer){var t=this._mapBoxResultsListContainer.childNodes;for(let n=0;n<t.length;n++){const r=t[n];r.id==="GPEditorMapBoxContainer_ID_"+e&&r.remove()}}}},Ko(oi,"DefaultStyles",{image:new Qt({src:jt.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new je({color:"rgba(0,42,80,0.8)",width:4}),fill:new $e({color:"rgba(0, 183, 152, 0.5)"}),text:new Nr({font:"16px Sans",textAlign:"left",fill:new $e({color:"rgba(255, 255, 255, 1)"}),stroke:new je({color:"rgba(0, 0, 0, 1)",width:2})})}),oi);Object.assign(Lx.prototype,eW);window.ol&&window.ol.control&&(window.ol.control.LayerImport=Lx);var Up=ot.getLogger("geoportalattribution"),nW=class ev extends Cw{constructor(e){if(e=e||{},e.collapsible=!0,e.collapsed=!0,super(e),!(this instanceof ev))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this}setMap(e){if(e!=null){var t=e.getControls();t.forEach(n=>{if(!(n instanceof ev)&&n){for(var r=n.element.classList,s=0;s<r.length;s++)if(r[s]==="ol-attribution"){t.remove(n);break}}}),this._updateAttributions(e),e.on("moveend",()=>{this._updateAttributions(e)}),e.getLayers().on("add",()=>{this._updateAttributions(e)}),e.getLayers().on("remove",()=>{this._updateAttributions(e)})}super.setMap(e)}_updateAttributions(e){for(var t={},n=e.getView(),r=n.calculateExtent(e.getSize()),s=n.getProjection().getCode(),o=Ss(r,s,"EPSG:4326"),a=[o[3],o[0],o[1],o[2]],l=n.getZoom(),c=e.getLayers().getArray(),u=0;u<c.length;u++)if(c[u].getSource)this._updateLayerAttributions(c[u],t,a,s,l);else if(c[u].getLayers){var h=c[u].getLayers();h.forEach(d=>{d.getSource?this._updateLayerAttributions(d,t,a,s,l):Up.log("cannot find layer source in layergroup ",c[u])})}}_updateLayerAttributions(e,t,n,r,s){if(!e){Up.trace("layer is null !?");return}var o=e.getSource();if(!o){Up.trace("source is not yet loaded !");return}t||(t={});var a=[],l=e.getVisible(),c=o._originators;if(typeof c<"u"&&o.setAttributions(),c&&l){for(var u=Wb.getAttributions({extent:n,crs:r,zoom:s,visibility:l,originators:c}),h=0;h<u.length;h++){var d=u[h];t.hasOwnProperty(d)||(a.push(d),t[d]=!0)}a.length!==0&&(o.setAttributions(a),this.dispatchEvent({type:"attributions:update",attributions:a}))}}};window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=nW);var rW={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPmeasureLength"),i.className="GPwidget gpf-widget",i},_createShowMeasureLengthPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowMeasureLengthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon-length fr-btn",e.title="Mesurer une distance",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowMeasureLengthClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowMeasureLengthClick(t)}),e}},ha=ot.getLogger("measurelength"),GA=class Gx extends Xn{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Gx))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureLength",this._uid=Xe.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){ha.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&$h.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement().id:null});var n=typeof window<"u"?window:typeof self<"u"?self:null;n&&(n.gpShareMeasures||(n.gpShareMeasures={}),n.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}_initialize(e){ha.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){ha.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(t),e}addMeasureEvents(){ha.trace("call MeasureLength::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t))}removeMeasureEvents(){ha.trace("call MeasureLength::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandle(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t))}format(e){ha.trace("call MeasureLength::format()");var t=this.getMap(),n;if(this.options.geodesic){var r=e.getCoordinates();n=0;for(var s=t.getView().getProjection(),o=0,a=r.length-1;o<a;++o){var l=Et(r[o],s,"EPSG:4326"),c=Et(r[o+1],s,"EPSG:4326");n+=Oa(l,c)}}else n=Math.round(e.getLength()*100)/100;var u;return n>1e3?u=Math.round(n/1e3*100)/100+" km":u=Math.round(n*100)/100+" m",u}onShowMeasureLengthClick(e){ha.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")}};Object.assign(GA.prototype,nr);Object.assign(GA.prototype,rW);window.ol&&window.ol.control&&(window.ol.control.MeasureLength=GA);var sW={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPmeasureArea"),i.className="GPwidget gpf-widget",i},_createShowMeasureAreaPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowMeasureAreaPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon-area fr-btn",e.title="Mesurer une surface",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowMeasureAreaClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowMeasureAreaClick(t)}),e}},da=ot.getLogger("measurearea"),OA=class Ox extends Xn{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Ox))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureArea",this._uid=Xe.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){da.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&$h.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement().id:null});var n=typeof window<"u"?window:typeof self<"u"?self:null;n&&(n.gpShareMeasures||(n.gpShareMeasures={}),n.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}_initialize(e){da.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){da.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(t),e}addMeasureEvents(){da.trace("call MeasureArea::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t))}removeMeasureEvents(){da.trace("call MeasureArea::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandler(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t))}format(e){da.trace("call MeasureArea::format()");var t;if(this.options.geodesic){var n=e.clone(),r=n.getLinearRing(0).getCoordinates();t=Math.abs(bf(new wi([r])))}else t=e.getArea();var s;return t>1e6?s=Math.round(t/1e6*100)/100+" km<sup>2</sup>":t>1e5?s=Math.round(t/1e6*1e3)/1e3+" km<sup>2</sup>":t>1e3?s=Math.round(t/10)*10+" m<sup>2</sup>":s=Math.round(t*100)/100+" m<sup>2</sup>",s}onShowMeasureAreaClick(e){da.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")}};Object.assign(OA.prototype,nr);Object.assign(OA.prototype,sW);window.ol&&window.ol.control&&(window.ol.control.MeasureArea=OA);var oW={_addUID:function(i){var e=this._uid?i+"-"+this._uid:i;return e},_createMainContainerElement:function(){var i=document.createElement("div");return i.id=this._addUID("GPmeasureAzimuth"),i.className="GPwidget gpf-widget",i},_createShowMeasureAzimuthPictoElement:function(){var i=this,e=document.createElement("button");return e.id=this._addUID("GPshowMeasureAzimuthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn-icon-azimuth fr-btn",e.title="Mesurer un azimut",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener?e.addEventListener("click",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowMeasureAzimuthClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var n=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!n),i.onShowMeasureAzimuthClick(t)}),e}},Xr=ot.getLogger("measureazimut"),DA=class Dx extends Xn{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof Dx))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureAzimuth",this._uid=Xe.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){Xr.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&$h.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement().id:null});var n=typeof window<"u"?window:typeof self<"u"?self:null;n&&(n.gpShareMeasures||(n.gpShareMeasures={}),n.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}setGeodesic(e){this.options.geodesic=typeof e<"u"?e:!1}isGeodesic(){return this.options.geodesic}_initialize(e){Xr.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!1,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){Xr.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(t),e}addMeasureEvents(){Xr.trace("call MeasureAzimuth::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.on("pointermove",t=>this.onPointerMoveAzimutHandler(t))}removeMeasureEvents(){Xr.trace("call MeasureAzimuth::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.un("pointermove",t=>this.onPointerMoveAzimutHandler(t))}format(e){Xr.trace("call MeasureAzimuth::format()");var t=this.getMap(),n=t.getView().getProjection(),r=Et(e.getFirstCoordinate(),n,"EPSG:4326"),s=Et(e.getLastCoordinate(),n,"EPSG:4326");if(!this.options.geodesic){var o=Oa(r,s);if(Xr.trace("measure between 2 points with geodesic method",o),o>500){var a=500/o;Xr.trace("%",a),s=Et(e.getCoordinateAt(a),n,"EPSG:4326")}}var l=Math.PI/180,c=180/Math.PI,u=l*r[0],h=l*s[0],d=l*r[1],f=l*s[1],g=Math.sin(h-u)*Math.cos(f),p=Math.cos(d)*Math.sin(f)-Math.sin(d)*Math.cos(f)*Math.cos(h-u),m=Math.atan2(g,p),v=c*m;Xr.trace("azimut",v),v<0&&(v+=360);var y=Math.round(v*100)/100+" ";return y}onShowMeasureAzimuthClick(e){Xr.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")}onPointerMoveAzimutHandler(e){if(this.onPointerMoveHandler(e),this.sketch){var t=this.sketch.getGeometry();t.getCoordinates().length>2&&this.measureDraw.finishDrawing()}}};Object.assign(DA.prototype,nr);Object.assign(DA.prototype,oW);window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=DA);const aW=Ut({__name:"SearchEngine",props:{visibility:Boolean,searchEngineOptions:Object},setup(i){const e=i,t=Vn("map"),n=Si(new AA(e.searchEngineOptions));return wr(()=>{e.visibility&&(t==null||t.addControl(n.value))}),Ng(()=>{e.visibility||t==null||t.removeControl(n.value)}),Mh(()=>{e.visibility&&(t==null||t.addControl(n.value))}),()=>{}}}),Bp=.75,Yd=.1;class lW extends qs{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",n=e.tipLabel!==void 0?e.tipLabel:"Overview map",r=e.collapseLabel!==void 0?e.collapseLabel:"";typeof r=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r):this.collapseLabel_=r;const s=e.label!==void 0?e.label:"";typeof s=="string"?(this.label_=document.createElement("span"),this.label_.textContent=s):this.label_=s;const o=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,a=document.createElement("button");a.setAttribute("type","button"),a.title=n,a.appendChild(o),a.addEventListener(ze.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const l=new Pw({view:e.view,controls:new bi,interactions:new bi});this.ovmap_=l,e.layers&&e.layers.forEach(function(y){l.addLayer(y)});const c=document.createElement("div");c.className="ol-overviewmap-box",c.style.boxSizing="border-box",this.boxOverlay_=new jn({position:[0,0],positioning:"center-center",element:c}),this.ovmap_.addOverlay(this.boxOverlay_);const u=t+" "+Oc+" "+r0+(this.collapsed_&&this.collapsible_?" "+Rf:"")+(this.collapsible_?"":" ol-uncollapsible"),h=this.element;h.className=u,h.appendChild(this.ovmapDiv_),h.appendChild(a);const d=this,f=this.boxOverlay_,g=this.boxOverlay_.getElement(),p=function(y){return{clientX:y.clientX,clientY:y.clientY}},m=function(y){const A=p(y),_=l.getEventCoordinateInternal(A);f.setPosition(_)},v=function(y){const A=l.getEventCoordinateInternal(y);d.getMap().getView().setCenterInternal(A),window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",v)};g.addEventListener("mousedown",function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",v)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const n=t.getView();n&&this.unbindView_(n),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(ht(e,ka.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const n=e.getView();n&&(this.bindView_(n),n.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===Ti.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const n=this.getMap().getView();this.bindView_(n)}else!this.ovmap_.isRendered()&&(e.key===Ti.TARGET||e.key===Ti.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new Rr({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener($n.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener($n.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const n=e.getSize(),s=e.getView().calculateExtentInternal(n);if(this.viewExtent_&&No(s,this.viewExtent_))return;this.viewExtent_=s;const o=t.getSize(),l=t.getView().calculateExtentInternal(o),c=t.getPixelFromCoordinateInternal(ms(s)),u=t.getPixelFromCoordinateInternal(Dh(s)),h=Math.abs(c[0]-u[0]),d=Math.abs(c[1]-u[1]),f=o[0],g=o[1];h<f*Yd||d<g*Yd||h>f*Bp||d>g*Bp?this.resetExtent_():Gr(l,s)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,n=e.getSize(),s=e.getView().calculateExtentInternal(n),o=t.getView(),a=Math.log(Bp/Yd)/Math.LN2,l=1/(Math.pow(2,a/2)*Yd);gG(s,l),o.fitInternal(fm(s))}recenter_(){const e=this.getMap(),t=this.ovmap_,n=e.getView();t.getView().setCenterInternal(n.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const n=e.getSize(),r=e.getView(),s=t.getView(),o=this.rotateWithView_?0:-r.getRotation(),a=this.boxOverlay_,l=this.boxOverlay_.getElement(),c=r.getCenterInternal(),u=r.getResolution(),h=s.getResolution(),d=n[0]*u/h,f=n[1]*u/h;if(a.setPosition(c),l){l.style.width=d+"px",l.style.height=f+"px";const g="rotate("+o+"rad)";l.style.transform=g}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=th(this.ovmap_,Kr.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(Rf),this.collapsed_?If(this.collapseLabel_,this.label_):If(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}const cW=lW,jp="units",uW=[1,2,5],ou=25.4/.28;class hW extends qs{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const n=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+Oc,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(jp,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(jp)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(jp,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,n=e.projection,r=this.getUnits(),s=r=="degrees"?"degrees":"m";let o=Sf(n,e.resolution,t,s);const a=this.minWidth_*(this.dpi_||ou)/ou,l=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||ou)/ou:void 0;let c=a*o,u="";if(r=="degrees"){const A=Ga.degrees;c*=A,c<A/60?(u="",o*=3600):c<A?(u="",o*=60):u=""}else if(r=="imperial")c<.9144?(u="in",o/=.0254):c<1609.344?(u="ft",o/=.3048):(u="mi",o/=1609.344);else if(r=="nautical")o/=1852,u="NM";else if(r=="metric")c<.001?(u="m",o*=1e6):c<1?(u="mm",o*=1e3):c<1e3?u="m":(u="km",o/=1e3);else if(r=="us")c<.9144?(u="in",o*=39.37):c<1609.344?(u="ft",o/=.30480061):(u="mi",o/=1609.3472);else throw new Error("Invalid units");let h=3*Math.floor(Math.log(a*o)/Math.log(10)),d,f,g,p,m,v;for(;;){g=Math.floor(h/3);const A=Math.pow(10,g);if(d=uW[(h%3+3)%3]*A,f=Math.round(d/o),isNaN(f)){this.element.style.display="none",this.renderedVisible_=!1;return}if(l!==void 0&&f>=l){d=p,f=m,g=v;break}else if(f>=a)break;p=d,m=f,v=g,++h}const y=this.scaleBar_?this.createScaleBar(f,d,u):d.toFixed(g<0?-g:0)+" "+u;this.renderedHTML_!=y&&(this.innerElement_.innerHTML=y,this.renderedHTML_=y),this.renderedWidth_!=f&&(this.innerElement_.style.width=f+"px",this.renderedWidth_=f),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,n){const r=this.getScaleForResolution(),s=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),o=this.scaleBarSteps_,a=e/o,l=[this.createMarker("absolute")];for(let u=0;u<o;++u){const h=u%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";l.push(`<div><div class="ol-scale-singlebar ${h}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(u%2===0||o===2?this.createStepText(u,e,!1,t,n):"")+"</div>")}return l.push(this.createStepText(o,e,!0,t,n)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+s+"</div>":"")+l.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,n,r,s){const a=(e===0?0:Math.round(r/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+s),l=e===0?-3:t/this.scaleBarSteps_*-1,c=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${l}px;text-align: ${e===0?"left":"center"};min-width: ${c}px;left: ${n?t+"px":"unset"};">`+a+"</div>"}getScaleForResolution(){const e=Sf(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||ou,n=1e3/25.4;return e*n*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const dW=hW,fW=Ut({__name:"ScaleLine",props:{visibility:Boolean,scaleLineOptions:Object},setup(i){const e=i,t=Vn("map"),n=Si(new dW(e.scaleLineOptions));return wr(()=>{e.visibility&&(t==null||t.addControl(n.value))}),Ng(()=>{e.visibility||t==null||t.removeControl(n.value)}),Mh(()=>{e.visibility&&(t==null||t.addControl(n.value))}),()=>{}}}),gW=Ut({__name:"OverviewMap",props:{visibility:Boolean,layer:Fa},setup(i){const e=i,t=Vn("map"),n=Si(new cW({className:"ol-overviewmap ol-custom-overviewmap",layers:[e.layer],collapseLabel:"",label:"",collapsed:!1}));return wr(()=>{e.visibility&&(t==null||t.addControl(n.value))}),Ng(()=>{e.visibility||t==null||t.removeControl(n.value)}),Mh(()=>{e.visibility&&(t==null||t.addControl(n.value))}),()=>{}}}),cf={OverviewMap:"OverviewMap",SearchEngine:"SearchEngine",ScaleLine:"ScaleLine"},pW=Ut({__name:"Control",props:{controlOptions:Array},setup(i){const e=i,t={units:"metric",bar:!1},n={collapsed:!1},r=new Fa({source:new K1});return(s,o)=>{var a,l,c;return de(),Ge(Kt,null,[dt(aW,{visibility:(a=e.controlOptions)==null?void 0:a.includes(Nt(cf).SearchEngine),"search-engine-options":n},null,8,["visibility"]),dt(fW,{visibility:(l=e.controlOptions)==null?void 0:l.includes(Nt(cf).ScaleLine),"scale-line-options":t},null,8,["visibility"]),dt(gW,{visibility:(c=e.controlOptions)==null?void 0:c.includes(Nt(cf).OverviewMap),layer:Nt(r)},null,8,["visibility","layer"])],64)}}}),mW=10,vW=Ut({__name:"portailCarto",setup(i){const e=[-234814.550892,4774562534805e-6],t=[new Fa({source:new K1})],n=Object.values(cf);return(r,s)=>(de(),qt(SD,null,{default:zn(()=>[dt(xD,{center:e,zoom:mW,layers:t}),dt(pW,{"control-options":Nt(n)},null,8,["control-options"])]),_:1}))}}),yW={};function AW(i,e){return de(),Ge("h1",null,"Catalogue Vue")}const _W=jh(yW,[["render",AW]]),CW={};function IW(i,e){return de(),Ge("h1",null,"Login Vue")}const EW=jh(CW,[["render",IW]]),wW={};function bW(i,e){return de(),Ge("h1",null,"Prsentation Vue")}const SW=jh(wW,[["render",bW]]),xW={};function PW(i,e){return de(),Ge("h1",null,"Accueil Vue")}const MW=jh(xW,[["render",PW]]),RW="Carte.gouv",TW=[{path:"/",name:"Carte",component:vW},{path:"/accueil",name:"Accueil",component:MW},{path:"/catalogue",name:"Catalogue",component:_W},{path:"/login",name:"Se connecter",component:EW},{path:"/presentation-generale",name:"Prsentation gnrale",component:SW},{path:"/tuto",name:"Commencer sur cartes.gouv.fr"},{path:"/a11y-conformite",component:{template:"<div>Conformit RGAA</div>"}},{path:"/mentions-legales",component:{template:"<div>Mentions lgales</div>"}},{path:"/donnees-personnelles",component:{template:"<div>Donnes personnelles</div>"}},{path:"/cookies",component:{template:"<div>cookies</div>"}},{path:"/after",component:{template:"<div>after</div>"}},{path:"/before",component:{template:"<div>before</div>"}},{path:"/_frame",component:{template:"<div>frame</div>"}}],kx=kL({history:hL("/cartes.gouv.fr-entree-carto"),routes:TW});kx.beforeEach(i=>{if(i.fullPath==="/accueil"&&!window.location.href.includes("/accueil"))return window.open(i.href),!1;const e=i.meta.title?`${i.meta.title} - `:"";document.title=`${e}${RW}`});const LW={name:"ri-arrow-right-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"/>'},GW={name:"ri-close-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/>'},OW={name:"ri-flag-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5 16v6H3V3h9.382a1 1 0 01.894.553L14 5h6a1 1 0 011 1v11a1 1 0 01-1 1h-6.382a1 1 0 01-.894-.553L12 16H5zM5 5v9h8.236l1 2H19V7h-6.236l-1-2H5z"/>'},DW={name:"ri-home-2-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346 0L23 11h-3v9a1 1 0 01-1 1zM6 19h12V9.157l-6-5.454-6 5.454V19z"/>'},kW={name:"ri-home-4-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346 0L23 11h-3v9a1 1 0 01-1 1zm-6-2h5V9.157l-6-5.454-6 5.454V19h5v-6h2v6z"/>'},FW={name:"ri-question-mark",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12 19a1.5 1.5 0 11-.001 3.001A1.5 1.5 0 0112 19zm0-17a6 6 0 016 6c0 2.165-.753 3.29-2.674 4.923C13.399 14.56 13 15.297 13 17h-2c0-2.474.787-3.695 3.031-5.601C15.548 10.11 16 9.434 16 8c0-2.21-1.79-4-4-4S8 5.79 8 8v1H6V8a6 6 0 016-6z"/>'},NW={name:"ri-refresh-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5.463 4.433A9.961 9.961 0 0112 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 006.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0112 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0013.54 5.772l.997 1.795z"/>'},UW={name:"fa-user-circle",minX:-51.52,minY:-43.52,width:599.04,height:599.04,raw:'<path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/>'},BW=Object.freeze(Object.defineProperty({__proto__:null,FaUserCircle:UW,RiArrowRightLine:LW,RiCloseLine:GW,RiFlagLine:OW,RiHome2Line:DW,RiHome4Line:kW,RiQuestionMark:FW,RiRefreshLine:NW},Symbol.toStringTag,{value:"Module"}));gR(...Object.values(BW));oR(qL).use(kx).mount("#app")});export default jW();
