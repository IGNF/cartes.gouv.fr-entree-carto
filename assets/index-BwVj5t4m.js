var jp=Object.defineProperty;var Mf=r=>{throw TypeError(r)};var Vp=(r,e,t)=>e in r?jp(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var cu=(r,e,t)=>Vp(r,typeof e!="symbol"?e+"":e,t),zp=(r,e,t)=>e.has(r)||Mf("Cannot "+t);var Rf=(r,e,t)=>e.has(r)?Mf("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t);var Zc=(r,e,t)=>(zp(r,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const Oe of document.querySelectorAll('link[rel="modulepreload"]'))ke(Oe);new MutationObserver(Oe=>{for(const Ge of Oe)if(Ge.type==="childList")for(const Be of Ge.addedNodes)Be.tagName==="LINK"&&Be.rel==="modulepreload"&&ke(Be)}).observe(document,{childList:!0,subtree:!0});function t(Oe){const Ge={};return Oe.integrity&&(Ge.integrity=Oe.integrity),Oe.referrerPolicy&&(Ge.referrerPolicy=Oe.referrerPolicy),Oe.crossOrigin==="use-credentials"?Ge.credentials="include":Oe.crossOrigin==="anonymous"?Ge.credentials="omit":Ge.credentials="same-origin",Ge}function ke(Oe){if(Oe.ep)return;Oe.ep=!0;const Ge=t(Oe);fetch(Oe.href,Ge)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(r){const e=Object.create(null);for(const t of r.split(","))e[t]=1;return t=>t in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&(r.charCodeAt(2)>122||r.charCodeAt(2)<97),isModelListener=r=>r.startsWith("onUpdate:"),extend$5=Object.assign,remove=(r,e)=>{const t=r.indexOf(e);t>-1&&r.splice(t,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(r,e)=>hasOwnProperty$1.call(r,e),isArray$1=Array.isArray,isMap=r=>toTypeString(r)==="[object Map]",isSet=r=>toTypeString(r)==="[object Set]",isDate=r=>toTypeString(r)==="[object Date]",isRegExp=r=>toTypeString(r)==="[object RegExp]",isFunction$1=r=>typeof r=="function",isString=r=>typeof r=="string",isSymbol=r=>typeof r=="symbol",isObject$1=r=>r!==null&&typeof r=="object",isPromise=r=>(isObject$1(r)||isFunction$1(r))&&isFunction$1(r.then)&&isFunction$1(r.catch),objectToString=Object.prototype.toString,toTypeString=r=>objectToString.call(r),toRawType=r=>toTypeString(r).slice(8,-1),isPlainObject$1=r=>toTypeString(r)==="[object Object]",isIntegerKey=r=>isString(r)&&r!=="NaN"&&r[0]!=="-"&&""+parseInt(r,10)===r,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=r=>{const e=Object.create(null);return t=>e[t]||(e[t]=r(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(r=>r.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(r=>r.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(r=>r.charAt(0).toUpperCase()+r.slice(1)),toHandlerKey=cacheStringFunction(r=>r?`on${capitalize(r)}`:""),hasChanged=(r,e)=>!Object.is(r,e),invokeArrayFns=(r,...e)=>{for(let t=0;t<r.length;t++)r[t](...e)},def=(r,e,t,ke=!1)=>{Object.defineProperty(r,e,{configurable:!0,enumerable:!1,writable:ke,value:t})},looseToNumber=r=>{const e=parseFloat(r);return isNaN(e)?r:e},toNumber=r=>{const e=isString(r)?Number(r):NaN;return isNaN(e)?r:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GLOBALS_ALLOWED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",isGloballyAllowed=makeMap(GLOBALS_ALLOWED);function normalizeStyle(r){if(isArray$1(r)){const e={};for(let t=0;t<r.length;t++){const ke=r[t],Oe=isString(ke)?parseStringStyle(ke):normalizeStyle(ke);if(Oe)for(const Ge in Oe)e[Ge]=Oe[Ge]}return e}else if(isString(r)||isObject$1(r))return r}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(r){const e={};return r.replace(styleCommentRE,"").split(listDelimiterRE).forEach(t=>{if(t){const ke=t.split(propertyDelimiterRE);ke.length>1&&(e[ke[0].trim()]=ke[1].trim())}}),e}function normalizeClass(r){let e="";if(isString(r))e=r;else if(isArray$1(r))for(let t=0;t<r.length;t++){const ke=normalizeClass(r[t]);ke&&(e+=ke+" ")}else if(isObject$1(r))for(const t in r)r[t]&&(e+=t+" ");return e.trim()}function normalizeProps(r){if(!r)return null;let{class:e,style:t}=r;return e&&!isString(e)&&(r.class=normalizeClass(e)),t&&(r.style=normalizeStyle(t)),r}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(r){return!!r||r===""}function looseCompareArrays(r,e){if(r.length!==e.length)return!1;let t=!0;for(let ke=0;t&&ke<r.length;ke++)t=looseEqual(r[ke],e[ke]);return t}function looseEqual(r,e){if(r===e)return!0;let t=isDate(r),ke=isDate(e);if(t||ke)return t&&ke?r.getTime()===e.getTime():!1;if(t=isSymbol(r),ke=isSymbol(e),t||ke)return r===e;if(t=isArray$1(r),ke=isArray$1(e),t||ke)return t&&ke?looseCompareArrays(r,e):!1;if(t=isObject$1(r),ke=isObject$1(e),t||ke){if(!t||!ke)return!1;const Oe=Object.keys(r).length,Ge=Object.keys(e).length;if(Oe!==Ge)return!1;for(const Be in r){const je=r.hasOwnProperty(Be),Ve=e.hasOwnProperty(Be);if(je&&!Ve||!je&&Ve||!looseEqual(r[Be],e[Be]))return!1}}return String(r)===String(e)}function looseIndexOf(r,e){return r.findIndex(t=>looseEqual(t,e))}const isRef$1=r=>!!(r&&r.__v_isRef===!0),toDisplayString=r=>isString(r)?r:r==null?"":isArray$1(r)||isObject$1(r)&&(r.toString===objectToString||!isFunction$1(r.toString))?isRef$1(r)?toDisplayString(r.value):JSON.stringify(r,replacer,2):String(r),replacer=(r,e)=>isRef$1(e)?replacer(r,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[ke,Oe],Ge)=>(t[stringifySymbol(ke,Ge)+" =>"]=Oe,t),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>stringifySymbol(t))}:isSymbol(e)?stringifySymbol(e):isObject$1(e)&&!isArray$1(e)&&!isPlainObject$1(e)?String(e):e,stringifySymbol=(r,e="")=>{var t;return isSymbol(r)?`Symbol(${(t=r.description)!=null?t:e})`:r};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){this._active=!1;let t,ke;for(t=0,ke=this.effects.length;t<ke;t++)this.effects[t].stop();for(this.effects.length=0,t=0,ke=this.cleanups.length;t<ke;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,ke=this.scopes.length;t<ke;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const Oe=this.parent.scopes.pop();Oe&&Oe!==this&&(this.parent.scopes[this.index]=Oe,Oe.index=this.index)}this.parent=void 0}}}function effectScope(r){return new EffectScope(r)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(r,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(r)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,t=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(r,e=!1){if(r.flags|=8,e){r.next=batchedComputed,batchedComputed=r;return}r.next=batchedSub,batchedSub=r}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let r;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(ke){r||(r=ke)}e=t}}if(r)throw r}function prepareDeps(r){for(let e=r.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(r){let e,t=r.depsTail,ke=t;for(;ke;){const Oe=ke.prevDep;ke.version===-1?(ke===t&&(t=Oe),removeSub(ke),removeDep(ke)):e=ke,ke.dep.activeLink=ke.prevActiveLink,ke.prevActiveLink=void 0,ke=Oe}r.deps=e,r.depsTail=t}function isDirty(r){for(let e=r.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!r._dirty}function refreshComputed(r){if(r.flags&4&&!(r.flags&16)||(r.flags&=-17,r.globalVersion===globalVersion))return;r.globalVersion=globalVersion;const e=r.dep;if(r.flags|=2,e.version>0&&!r.isSSR&&r.deps&&!isDirty(r)){r.flags&=-3;return}const t=activeSub,ke=shouldTrack;activeSub=r,shouldTrack=!0;try{prepareDeps(r);const Oe=r.fn(r._value);(e.version===0||hasChanged(Oe,r._value))&&(r._value=Oe,e.version++)}catch(Oe){throw e.version++,Oe}finally{activeSub=t,shouldTrack=ke,cleanupDeps(r),r.flags&=-3}}function removeSub(r,e=!1){const{dep:t,prevSub:ke,nextSub:Oe}=r;if(ke&&(ke.nextSub=Oe,r.prevSub=void 0),Oe&&(Oe.prevSub=ke,r.nextSub=void 0),t.subs===r&&(t.subs=ke,!ke&&t.computed)){t.computed.flags&=-5;for(let Ge=t.computed.deps;Ge;Ge=Ge.nextDep)removeSub(Ge,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function removeDep(r){const{prevDep:e,nextDep:t}=r;e&&(e.nextDep=t,r.prevDep=void 0),t&&(t.prevDep=e,r.nextDep=void 0)}function effect(r,e){r.effect instanceof ReactiveEffect&&(r=r.effect.fn);const t=new ReactiveEffect(r);e&&extend$5(t,e);try{t.run()}catch(Oe){throw t.stop(),Oe}const ke=t.run.bind(t);return ke.effect=t,ke}function stop(r){r.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const r=trackStack.pop();shouldTrack=r===void 0?!0:r}function cleanupEffect(r){const{cleanup:e}=r;if(r.cleanup=void 0,e){const t=activeSub;activeSub=void 0;try{e()}finally{activeSub=t}}}let globalVersion=0;class Link{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==activeSub)t=this.activeLink=new Link(activeSub,this),activeSub.deps?(t.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=t,activeSub.depsTail=t):activeSub.deps=activeSub.depsTail=t,addSub(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const ke=t.nextDep;ke.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=ke),t.prevDep=activeSub.depsTail,t.nextDep=void 0,activeSub.depsTail.nextDep=t,activeSub.depsTail=t,activeSub.deps===t&&(activeSub.deps=ke)}return t}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{endBatch()}}}function addSub(r){if(r.dep.sc++,r.sub.flags&4){const e=r.dep.computed;if(e&&!r.dep.subs){e.flags|=20;for(let ke=e.deps;ke;ke=ke.nextDep)addSub(ke)}const t=r.dep.subs;t!==r&&(r.prevSub=t,t&&(t.nextSub=r)),r.dep.subs=r}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(r,e,t){if(shouldTrack&&activeSub){let ke=targetMap.get(r);ke||targetMap.set(r,ke=new Map);let Oe=ke.get(t);Oe||(ke.set(t,Oe=new Dep),Oe.map=ke,Oe.key=t),Oe.track()}}function trigger(r,e,t,ke,Oe,Ge){const Be=targetMap.get(r);if(!Be){globalVersion++;return}const je=Ve=>{Ve&&Ve.trigger()};if(startBatch(),e==="clear")Be.forEach(je);else{const Ve=isArray$1(r),Ze=Ve&&isIntegerKey(t);if(Ve&&t==="length"){const Qe=Number(ke);Be.forEach((en,tn)=>{(tn==="length"||tn===ARRAY_ITERATE_KEY||!isSymbol(tn)&&tn>=Qe)&&je(en)})}else switch((t!==void 0||Be.has(void 0))&&je(Be.get(t)),Ze&&je(Be.get(ARRAY_ITERATE_KEY)),e){case"add":Ve?Ze&&je(Be.get("length")):(je(Be.get(ITERATE_KEY)),isMap(r)&&je(Be.get(MAP_KEY_ITERATE_KEY)));break;case"delete":Ve||(je(Be.get(ITERATE_KEY)),isMap(r)&&je(Be.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(r)&&je(Be.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(r,e){const t=targetMap.get(r);return t&&t.get(e)}function reactiveReadArray(r){const e=toRaw(r);return e===r?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(r)?e:e.map(toReactive))}function shallowReadArray(r){return track(r=toRaw(r),"iterate",ARRAY_ITERATE_KEY),r}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...r){return reactiveReadArray(this).concat(...r.map(e=>isArray$1(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",r=>(r[1]=toReactive(r[1]),r))},every(r,e){return apply$1(this,"every",r,e,void 0,arguments)},filter(r,e){return apply$1(this,"filter",r,e,t=>t.map(toReactive),arguments)},find(r,e){return apply$1(this,"find",r,e,toReactive,arguments)},findIndex(r,e){return apply$1(this,"findIndex",r,e,void 0,arguments)},findLast(r,e){return apply$1(this,"findLast",r,e,toReactive,arguments)},findLastIndex(r,e){return apply$1(this,"findLastIndex",r,e,void 0,arguments)},forEach(r,e){return apply$1(this,"forEach",r,e,void 0,arguments)},includes(...r){return searchProxy(this,"includes",r)},indexOf(...r){return searchProxy(this,"indexOf",r)},join(r){return reactiveReadArray(this).join(r)},lastIndexOf(...r){return searchProxy(this,"lastIndexOf",r)},map(r,e){return apply$1(this,"map",r,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...r){return noTracking(this,"push",r)},reduce(r,...e){return reduce(this,"reduce",r,e)},reduceRight(r,...e){return reduce(this,"reduceRight",r,e)},shift(){return noTracking(this,"shift")},some(r,e){return apply$1(this,"some",r,e,void 0,arguments)},splice(...r){return noTracking(this,"splice",r)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(r){return reactiveReadArray(this).toSorted(r)},toSpliced(...r){return reactiveReadArray(this).toSpliced(...r)},unshift(...r){return noTracking(this,"unshift",r)},values(){return iterator(this,"values",toReactive)}};function iterator(r,e,t){const ke=shallowReadArray(r),Oe=ke[e]();return ke!==r&&!isShallow(r)&&(Oe._next=Oe.next,Oe.next=()=>{const Ge=Oe._next();return Ge.value&&(Ge.value=t(Ge.value)),Ge}),Oe}const arrayProto=Array.prototype;function apply$1(r,e,t,ke,Oe,Ge){const Be=shallowReadArray(r),je=Be!==r&&!isShallow(r),Ve=Be[e];if(Ve!==arrayProto[e]){const en=Ve.apply(r,Ge);return je?toReactive(en):en}let Ze=t;Be!==r&&(je?Ze=function(en,tn){return t.call(this,toReactive(en),tn,r)}:t.length>2&&(Ze=function(en,tn){return t.call(this,en,tn,r)}));const Qe=Ve.call(Be,Ze,ke);return je&&Oe?Oe(Qe):Qe}function reduce(r,e,t,ke){const Oe=shallowReadArray(r);let Ge=t;return Oe!==r&&(isShallow(r)?t.length>3&&(Ge=function(Be,je,Ve){return t.call(this,Be,je,Ve,r)}):Ge=function(Be,je,Ve){return t.call(this,Be,toReactive(je),Ve,r)}),Oe[e](Ge,...ke)}function searchProxy(r,e,t){const ke=toRaw(r);track(ke,"iterate",ARRAY_ITERATE_KEY);const Oe=ke[e](...t);return(Oe===-1||Oe===!1)&&isProxy(t[0])?(t[0]=toRaw(t[0]),ke[e](...t)):Oe}function noTracking(r,e,t=[]){pauseTracking(),startBatch();const ke=toRaw(r)[e].apply(r,t);return endBatch(),resetTracking(),ke}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(r=>r!=="arguments"&&r!=="caller").map(r=>Symbol[r]).filter(isSymbol));function hasOwnProperty(r){isSymbol(r)||(r=String(r));const e=toRaw(this);return track(e,"has",r),e.hasOwnProperty(r)}class BaseReactiveHandler{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,ke){if(t==="__v_skip")return e.__v_skip;const Oe=this._isReadonly,Ge=this._isShallow;if(t==="__v_isReactive")return!Oe;if(t==="__v_isReadonly")return Oe;if(t==="__v_isShallow")return Ge;if(t==="__v_raw")return ke===(Oe?Ge?shallowReadonlyMap:readonlyMap:Ge?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(ke)?e:void 0;const Be=isArray$1(e);if(!Oe){let Ve;if(Be&&(Ve=arrayInstrumentations[t]))return Ve;if(t==="hasOwnProperty")return hasOwnProperty}const je=Reflect.get(e,t,isRef(e)?e:ke);return(isSymbol(t)?builtInSymbols.has(t):isNonTrackableKeys(t))||(Oe||track(e,"get",t),Ge)?je:isRef(je)?Be&&isIntegerKey(t)?je:je.value:isObject$1(je)?Oe?readonly(je):reactive(je):je}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,t,ke,Oe){let Ge=e[t];if(!this._isShallow){const Ve=isReadonly(Ge);if(!isShallow(ke)&&!isReadonly(ke)&&(Ge=toRaw(Ge),ke=toRaw(ke)),!isArray$1(e)&&isRef(Ge)&&!isRef(ke))return Ve?!1:(Ge.value=ke,!0)}const Be=isArray$1(e)&&isIntegerKey(t)?Number(t)<e.length:hasOwn(e,t),je=Reflect.set(e,t,ke,isRef(e)?e:Oe);return e===toRaw(Oe)&&(Be?hasChanged(ke,Ge)&&trigger(e,"set",t,ke):trigger(e,"add",t,ke)),je}deleteProperty(e,t){const ke=hasOwn(e,t);e[t];const Oe=Reflect.deleteProperty(e,t);return Oe&&ke&&trigger(e,"delete",t,void 0),Oe}has(e,t){const ke=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),ke}ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=r=>r,getProto=r=>Reflect.getPrototypeOf(r);function createIterableMethod(r,e,t){return function(...ke){const Oe=this.__v_raw,Ge=toRaw(Oe),Be=isMap(Ge),je=r==="entries"||r===Symbol.iterator&&Be,Ve=r==="keys"&&Be,Ze=Oe[r](...ke),Qe=t?toShallow:e?toReadonly:toReactive;return!e&&track(Ge,"iterate",Ve?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:en,done:tn}=Ze.next();return tn?{value:en,done:tn}:{value:je?[Qe(en[0]),Qe(en[1])]:Qe(en),done:tn}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(r){return function(...e){return r==="delete"?!1:r==="clear"?void 0:this}}function createInstrumentations(r,e){const t={get(Oe){const Ge=this.__v_raw,Be=toRaw(Ge),je=toRaw(Oe);r||(hasChanged(Oe,je)&&track(Be,"get",Oe),track(Be,"get",je));const{has:Ve}=getProto(Be),Ze=e?toShallow:r?toReadonly:toReactive;if(Ve.call(Be,Oe))return Ze(Ge.get(Oe));if(Ve.call(Be,je))return Ze(Ge.get(je));Ge!==Be&&Ge.get(Oe)},get size(){const Oe=this.__v_raw;return!r&&track(toRaw(Oe),"iterate",ITERATE_KEY),Reflect.get(Oe,"size",Oe)},has(Oe){const Ge=this.__v_raw,Be=toRaw(Ge),je=toRaw(Oe);return r||(hasChanged(Oe,je)&&track(Be,"has",Oe),track(Be,"has",je)),Oe===je?Ge.has(Oe):Ge.has(Oe)||Ge.has(je)},forEach(Oe,Ge){const Be=this,je=Be.__v_raw,Ve=toRaw(je),Ze=e?toShallow:r?toReadonly:toReactive;return!r&&track(Ve,"iterate",ITERATE_KEY),je.forEach((Qe,en)=>Oe.call(Ge,Ze(Qe),Ze(en),Be))}};return extend$5(t,r?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(Oe){!e&&!isShallow(Oe)&&!isReadonly(Oe)&&(Oe=toRaw(Oe));const Ge=toRaw(this);return getProto(Ge).has.call(Ge,Oe)||(Ge.add(Oe),trigger(Ge,"add",Oe,Oe)),this},set(Oe,Ge){!e&&!isShallow(Ge)&&!isReadonly(Ge)&&(Ge=toRaw(Ge));const Be=toRaw(this),{has:je,get:Ve}=getProto(Be);let Ze=je.call(Be,Oe);Ze||(Oe=toRaw(Oe),Ze=je.call(Be,Oe));const Qe=Ve.call(Be,Oe);return Be.set(Oe,Ge),Ze?hasChanged(Ge,Qe)&&trigger(Be,"set",Oe,Ge):trigger(Be,"add",Oe,Ge),this},delete(Oe){const Ge=toRaw(this),{has:Be,get:je}=getProto(Ge);let Ve=Be.call(Ge,Oe);Ve||(Oe=toRaw(Oe),Ve=Be.call(Ge,Oe)),je&&je.call(Ge,Oe);const Ze=Ge.delete(Oe);return Ve&&trigger(Ge,"delete",Oe,void 0),Ze},clear(){const Oe=toRaw(this),Ge=Oe.size!==0,Be=Oe.clear();return Ge&&trigger(Oe,"clear",void 0,void 0),Be}}),["keys","values","entries",Symbol.iterator].forEach(Oe=>{t[Oe]=createIterableMethod(Oe,r,e)}),t}function createInstrumentationGetter(r,e){const t=createInstrumentations(r,e);return(ke,Oe,Ge)=>Oe==="__v_isReactive"?!r:Oe==="__v_isReadonly"?r:Oe==="__v_raw"?ke:Reflect.get(hasOwn(t,Oe)&&Oe in ke?t:ke,Oe,Ge)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(r){switch(r){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(r){return r.__v_skip||!Object.isExtensible(r)?0:targetTypeMap(toRawType(r))}function reactive(r){return isReadonly(r)?r:createReactiveObject(r,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(r){return createReactiveObject(r,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(r){return createReactiveObject(r,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(r){return createReactiveObject(r,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(r,e,t,ke,Oe){if(!isObject$1(r)||r.__v_raw&&!(e&&r.__v_isReactive))return r;const Ge=Oe.get(r);if(Ge)return Ge;const Be=getTargetType(r);if(Be===0)return r;const je=new Proxy(r,Be===2?ke:t);return Oe.set(r,je),je}function isReactive(r){return isReadonly(r)?isReactive(r.__v_raw):!!(r&&r.__v_isReactive)}function isReadonly(r){return!!(r&&r.__v_isReadonly)}function isShallow(r){return!!(r&&r.__v_isShallow)}function isProxy(r){return r?!!r.__v_raw:!1}function toRaw(r){const e=r&&r.__v_raw;return e?toRaw(e):r}function markRaw(r){return!hasOwn(r,"__v_skip")&&Object.isExtensible(r)&&def(r,"__v_skip",!0),r}const toReactive=r=>isObject$1(r)?reactive(r):r,toReadonly=r=>isObject$1(r)?readonly(r):r;function isRef(r){return r?r.__v_isRef===!0:!1}function ref(r){return createRef(r,!1)}function shallowRef(r){return createRef(r,!0)}function createRef(r,e){return isRef(r)?r:new RefImpl(r,e)}class RefImpl{constructor(e,t){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,ke=this.__v_isShallow||isShallow(e)||isReadonly(e);e=ke?e:toRaw(e),hasChanged(e,t)&&(this._rawValue=e,this._value=ke?e:toReactive(e),this.dep.trigger())}}function triggerRef(r){r.dep&&r.dep.trigger()}function unref(r){return isRef(r)?r.value:r}function toValue$1(r){return isFunction$1(r)?r():unref(r)}const shallowUnwrapHandlers={get:(r,e,t)=>e==="__v_raw"?r:unref(Reflect.get(r,e,t)),set:(r,e,t,ke)=>{const Oe=r[e];return isRef(Oe)&&!isRef(t)?(Oe.value=t,!0):Reflect.set(r,e,t,ke)}};function proxyRefs(r){return isReactive(r)?r:new Proxy(r,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Dep,{get:ke,set:Oe}=e(t.track.bind(t),t.trigger.bind(t));this._get=ke,this._set=Oe}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(r){return new CustomRefImpl(r)}function toRefs(r){const e=isArray$1(r)?new Array(r.length):{};for(const t in r)e[t]=propertyToRef(r,t);return e}class ObjectRefImpl{constructor(e,t,ke){this._object=e,this._key=t,this._defaultValue=ke,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(r,e,t){return isRef(r)?r:isFunction$1(r)?new GetterRefImpl(r):isObject$1(r)&&arguments.length>1?propertyToRef(r,e,t):ref(r)}function propertyToRef(r,e,t){const ke=r[e];return isRef(ke)?ke:new ObjectRefImpl(r,e,t)}class ComputedRefImpl{constructor(e,t,ke){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=ke}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(r,e,t=!1){let ke,Oe;return isFunction$1(r)?ke=r:(ke=r.get,Oe=r.set),new ComputedRefImpl(ke,Oe,t)}const TrackOpTypes={GET:"get",HAS:"has",ITERATE:"iterate"},TriggerOpTypes={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function getCurrentWatcher(){return activeWatcher}function onWatcherCleanup(r,e=!1,t=activeWatcher){if(t){let ke=cleanupMap.get(t);ke||cleanupMap.set(t,ke=[]),ke.push(r)}}function watch$1(r,e,t=EMPTY_OBJ){const{immediate:ke,deep:Oe,once:Ge,scheduler:Be,augmentJob:je,call:Ve}=t,Ze=yn=>Oe?yn:isShallow(yn)||Oe===!1||Oe===0?traverse(yn,1):traverse(yn);let Qe,en,tn,an,cn=!1,dn=!1;if(isRef(r)?(en=()=>r.value,cn=isShallow(r)):isReactive(r)?(en=()=>Ze(r),cn=!0):isArray$1(r)?(dn=!0,cn=r.some(yn=>isReactive(yn)||isShallow(yn)),en=()=>r.map(yn=>{if(isRef(yn))return yn.value;if(isReactive(yn))return Ze(yn);if(isFunction$1(yn))return Ve?Ve(yn,2):yn()})):isFunction$1(r)?e?en=Ve?()=>Ve(r,2):r:en=()=>{if(tn){pauseTracking();try{tn()}finally{resetTracking()}}const yn=activeWatcher;activeWatcher=Qe;try{return Ve?Ve(r,3,[an]):r(an)}finally{activeWatcher=yn}}:en=NOOP,e&&Oe){const yn=en,Cn=Oe===!0?1/0:Oe;en=()=>traverse(yn(),Cn)}const hn=getCurrentScope(),fn=()=>{Qe.stop(),hn&&hn.active&&remove(hn.effects,Qe)};if(Ge&&e){const yn=e;e=(...Cn)=>{yn(...Cn),fn()}}let pn=dn?new Array(r.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const mn=yn=>{if(!(!(Qe.flags&1)||!Qe.dirty&&!yn))if(e){const Cn=Qe.run();if(Oe||cn||(dn?Cn.some((wn,bn)=>hasChanged(wn,pn[bn])):hasChanged(Cn,pn))){tn&&tn();const wn=activeWatcher;activeWatcher=Qe;try{const bn=[Cn,pn===INITIAL_WATCHER_VALUE?void 0:dn&&pn[0]===INITIAL_WATCHER_VALUE?[]:pn,an];Ve?Ve(e,3,bn):e(...bn),pn=Cn}finally{activeWatcher=wn}}}else Qe.run()};return je&&je(mn),Qe=new ReactiveEffect(en),Qe.scheduler=Be?()=>Be(mn,!1):mn,an=yn=>onWatcherCleanup(yn,!1,Qe),tn=Qe.onStop=()=>{const yn=cleanupMap.get(Qe);if(yn){if(Ve)Ve(yn,4);else for(const Cn of yn)Cn();cleanupMap.delete(Qe)}},e?ke?mn(!0):pn=Qe.run():Be?Be(mn.bind(null,!0),!0):Qe.run(),fn.pause=Qe.pause.bind(Qe),fn.resume=Qe.resume.bind(Qe),fn.stop=fn,fn}function traverse(r,e=1/0,t){if(e<=0||!isObject$1(r)||r.__v_skip||(t=t||new Set,t.has(r)))return r;if(t.add(r),e--,isRef(r))traverse(r.value,e,t);else if(isArray$1(r))for(let ke=0;ke<r.length;ke++)traverse(r[ke],e,t);else if(isSet(r)||isMap(r))r.forEach(ke=>{traverse(ke,e,t)});else if(isPlainObject$1(r)){for(const ke in r)traverse(r[ke],e,t);for(const ke of Object.getOwnPropertySymbols(r))Object.prototype.propertyIsEnumerable.call(r,ke)&&traverse(r[ke],e,t)}return r}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function pushWarningContext(r){stack.push(r)}function popWarningContext(){stack.pop()}let isWarning=!1;function warn$1(r,...e){if(isWarning)return;isWarning=!0,pauseTracking();const t=stack.length?stack[stack.length-1].component:null,ke=t&&t.appContext.config.warnHandler,Oe=getComponentTrace();if(ke)callWithErrorHandling(ke,t,11,[r+e.map(Ge=>{var Be,je;return(je=(Be=Ge.toString)==null?void 0:Be.call(Ge))!=null?je:JSON.stringify(Ge)}).join(""),t&&t.proxy,Oe.map(({vnode:Ge})=>`at <${formatComponentName(t,Ge.type)}>`).join(`
`),Oe]);else{const Ge=[`[Vue warn]: ${r}`,...e];Oe.length&&Ge.push(`
`,...formatTrace(Oe)),console.warn(...Ge)}resetTracking(),isWarning=!1}function getComponentTrace(){let r=stack[stack.length-1];if(!r)return[];const e=[];for(;r;){const t=e[0];t&&t.vnode===r?t.recurseCount++:e.push({vnode:r,recurseCount:0});const ke=r.component&&r.component.parent;r=ke&&ke.vnode}return e}function formatTrace(r){const e=[];return r.forEach((t,ke)=>{e.push(...ke===0?[]:[`
`],...formatTraceEntry(t))}),e}function formatTraceEntry({vnode:r,recurseCount:e}){const t=e>0?`... (${e} recursive calls)`:"",ke=r.component?r.component.parent==null:!1,Oe=` at <${formatComponentName(r.component,r.type,ke)}`,Ge=">"+t;return r.props?[Oe,...formatProps(r.props),Ge]:[Oe+Ge]}function formatProps(r){const e=[],t=Object.keys(r);return t.slice(0,3).forEach(ke=>{e.push(...formatProp(ke,r[ke]))}),t.length>3&&e.push(" ..."),e}function formatProp(r,e,t){return isString(e)?(e=JSON.stringify(e),t?e:[`${r}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?t?e:[`${r}=${e}`]:isRef(e)?(e=formatProp(r,toRaw(e.value),!0),t?e:[`${r}=Ref<`,e,">"]):isFunction$1(e)?[`${r}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),t?e:[`${r}=`,e])}function assertNumber(r,e){}const ErrorCodes={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function callWithErrorHandling(r,e,t,ke){try{return ke?r(...ke):r()}catch(Oe){handleError(Oe,e,t)}}function callWithAsyncErrorHandling(r,e,t,ke){if(isFunction$1(r)){const Oe=callWithErrorHandling(r,e,t,ke);return Oe&&isPromise(Oe)&&Oe.catch(Ge=>{handleError(Ge,e,t)}),Oe}if(isArray$1(r)){const Oe=[];for(let Ge=0;Ge<r.length;Ge++)Oe.push(callWithAsyncErrorHandling(r[Ge],e,t,ke));return Oe}}function handleError(r,e,t,ke=!0){const Oe=e?e.vnode:null,{errorHandler:Ge,throwUnhandledErrorInProduction:Be}=e&&e.appContext.config||EMPTY_OBJ;if(e){let je=e.parent;const Ve=e.proxy,Ze=`https://vuejs.org/error-reference/#runtime-${t}`;for(;je;){const Qe=je.ec;if(Qe){for(let en=0;en<Qe.length;en++)if(Qe[en](r,Ve,Ze)===!1)return}je=je.parent}if(Ge){pauseTracking(),callWithErrorHandling(Ge,null,10,[r,Ve,Ze]),resetTracking();return}}logError(r,t,Oe,ke,Be)}function logError(r,e,t,ke=!0,Oe=!1){if(Oe)throw r;console.error(r)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(r){const e=currentFlushPromise||resolvedPromise;return r?e.then(this?r.bind(this):r):e}function findInsertionIndex$1(r){let e=flushIndex+1,t=queue.length;for(;e<t;){const ke=e+t>>>1,Oe=queue[ke],Ge=getId(Oe);Ge<r||Ge===r&&Oe.flags&2?e=ke+1:t=ke}return e}function queueJob(r){if(!(r.flags&1)){const e=getId(r),t=queue[queue.length-1];!t||!(r.flags&2)&&e>=getId(t)?queue.push(r):queue.splice(findInsertionIndex$1(e),0,r),r.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(r){isArray$1(r)?pendingPostFlushCbs.push(...r):activePostFlushCbs&&r.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,r):r.flags&1||(pendingPostFlushCbs.push(r),r.flags|=1),queueFlush()}function flushPreFlushCbs(r,e,t=flushIndex+1){for(;t<queue.length;t++){const ke=queue[t];if(ke&&ke.flags&2){if(r&&ke.id!==r.uid)continue;queue.splice(t,1),t--,ke.flags&4&&(ke.flags&=-2),ke(),ke.flags&4||(ke.flags&=-2)}}}function flushPostFlushCbs(r){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((t,ke)=>getId(t)-getId(ke));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const t=activePostFlushCbs[postFlushIndex];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=r=>r.id==null?r.flags&2?-1:1/0:r.id;function flushJobs(r){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools$1,buffer$1=[];function setDevtoolsHook$1(r,e){var t,ke;devtools$1=r,devtools$1?(devtools$1.enabled=!0,buffer$1.forEach(({event:Oe,args:Ge})=>devtools$1.emit(Oe,...Ge)),buffer$1=[]):typeof window<"u"&&window.HTMLElement&&!((ke=(t=window.navigator)==null?void 0:t.userAgent)!=null&&ke.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(Ge=>{setDevtoolsHook$1(Ge,e)}),setTimeout(()=>{devtools$1||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer$1=[])},3e3)):buffer$1=[]}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(r){const e=currentRenderingInstance;return currentRenderingInstance=r,currentScopeId=r&&r.type.__scopeId||null,e}function pushScopeId(r){currentScopeId=r}function popScopeId(){currentScopeId=null}const withScopeId=r=>withCtx;function withCtx(r,e=currentRenderingInstance,t){if(!e||r._n)return r;const ke=(...Oe)=>{ke._d&&setBlockTracking(-1);const Ge=setCurrentRenderingInstance(e);let Be;try{Be=r(...Oe)}finally{setCurrentRenderingInstance(Ge),ke._d&&setBlockTracking(1)}return Be};return ke._n=!0,ke._c=!0,ke._d=!0,ke}function withDirectives(r,e){if(currentRenderingInstance===null)return r;const t=getComponentPublicInstance(currentRenderingInstance),ke=r.dirs||(r.dirs=[]);for(let Oe=0;Oe<e.length;Oe++){let[Ge,Be,je,Ve=EMPTY_OBJ]=e[Oe];Ge&&(isFunction$1(Ge)&&(Ge={mounted:Ge,updated:Ge}),Ge.deep&&traverse(Be),ke.push({dir:Ge,instance:t,value:Be,oldValue:void 0,arg:je,modifiers:Ve}))}return r}function invokeDirectiveHook(r,e,t,ke){const Oe=r.dirs,Ge=e&&e.dirs;for(let Be=0;Be<Oe.length;Be++){const je=Oe[Be];Ge&&(je.oldValue=Ge[Be].value);let Ve=je.dir[ke];Ve&&(pauseTracking(),callWithAsyncErrorHandling(Ve,t,8,[r.el,je,r,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=r=>r.__isTeleport,isTeleportDisabled=r=>r&&(r.disabled||r.disabled===""),isTeleportDeferred=r=>r&&(r.defer||r.defer===""),isTargetSVG=r=>typeof SVGElement<"u"&&r instanceof SVGElement,isTargetMathML=r=>typeof MathMLElement=="function"&&r instanceof MathMLElement,resolveTarget=(r,e)=>{const t=r&&r.to;return isString(t)?e?e(t):null:t},TeleportImpl={name:"Teleport",__isTeleport:!0,process(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze){const{mc:Qe,pc:en,pbc:tn,o:{insert:an,querySelector:cn,createText:dn,createComment:hn}}=Ze,fn=isTeleportDisabled(e.props);let{shapeFlag:pn,children:mn,dynamicChildren:yn}=e;if(r==null){const Cn=e.el=dn(""),wn=e.anchor=dn("");an(Cn,t,ke),an(wn,t,ke);const bn=(Mn,Tn)=>{pn&16&&(Oe&&Oe.isCE&&(Oe.ce._teleportTarget=Mn),Qe(mn,Mn,Tn,Oe,Ge,Be,je,Ve))},Sn=()=>{const Mn=e.target=resolveTarget(e.props,cn),Tn=prepareAnchor(Mn,e,dn,an);Mn&&(Be!=="svg"&&isTargetSVG(Mn)?Be="svg":Be!=="mathml"&&isTargetMathML(Mn)&&(Be="mathml"),fn||(bn(Mn,Tn),updateCssVars(e,!1)))};fn&&(bn(t,wn),updateCssVars(e,!0)),isTeleportDeferred(e.props)?queuePostRenderEffect(()=>{Sn(),e.el.__isMounted=!0},Ge):Sn()}else{if(isTeleportDeferred(e.props)&&!r.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze),delete r.el.__isMounted},Ge);return}e.el=r.el,e.targetStart=r.targetStart;const Cn=e.anchor=r.anchor,wn=e.target=r.target,bn=e.targetAnchor=r.targetAnchor,Sn=isTeleportDisabled(r.props),Mn=Sn?t:wn,Tn=Sn?Cn:bn;if(Be==="svg"||isTargetSVG(wn)?Be="svg":(Be==="mathml"||isTargetMathML(wn))&&(Be="mathml"),yn?(tn(r.dynamicChildren,yn,Mn,Oe,Ge,Be,je),traverseStaticChildren(r,e,!0)):Ve||en(r,e,Mn,Tn,Oe,Ge,Be,je,!1),fn)Sn?e.props&&r.props&&e.props.to!==r.props.to&&(e.props.to=r.props.to):moveTeleport(e,t,Cn,Ze,1);else if((e.props&&e.props.to)!==(r.props&&r.props.to)){const En=e.target=resolveTarget(e.props,cn);En&&moveTeleport(e,En,null,Ze,0)}else Sn&&moveTeleport(e,wn,bn,Ze,1);updateCssVars(e,fn)}},remove(r,e,t,{um:ke,o:{remove:Oe}},Ge){const{shapeFlag:Be,children:je,anchor:Ve,targetStart:Ze,targetAnchor:Qe,target:en,props:tn}=r;if(en&&(Oe(Ze),Oe(Qe)),Ge&&Oe(Ve),Be&16){const an=Ge||!isTeleportDisabled(tn);for(let cn=0;cn<je.length;cn++){const dn=je[cn];ke(dn,e,t,an,!!dn.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(r,e,t,{o:{insert:ke},m:Oe},Ge=2){Ge===0&&ke(r.targetAnchor,e,t);const{el:Be,anchor:je,shapeFlag:Ve,children:Ze,props:Qe}=r,en=Ge===2;if(en&&ke(Be,e,t),(!en||isTeleportDisabled(Qe))&&Ve&16)for(let tn=0;tn<Ze.length;tn++)Oe(Ze[tn],e,t,2);en&&ke(je,e,t)}function hydrateTeleport(r,e,t,ke,Oe,Ge,{o:{nextSibling:Be,parentNode:je,querySelector:Ve,insert:Ze,createText:Qe}},en){const tn=e.target=resolveTarget(e.props,Ve);if(tn){const an=isTeleportDisabled(e.props),cn=tn._lpa||tn.firstChild;if(e.shapeFlag&16)if(an)e.anchor=en(Be(r),e,je(r),t,ke,Oe,Ge),e.targetStart=cn,e.targetAnchor=cn&&Be(cn);else{e.anchor=Be(r);let dn=cn;for(;dn;){if(dn&&dn.nodeType===8){if(dn.data==="teleport start anchor")e.targetStart=dn;else if(dn.data==="teleport anchor"){e.targetAnchor=dn,tn._lpa=e.targetAnchor&&Be(e.targetAnchor);break}}dn=Be(dn)}e.targetAnchor||prepareAnchor(tn,e,Qe,Ze),en(cn&&Be(cn),e,tn,t,ke,Oe,Ge)}updateCssVars(e,an)}return e.anchor&&Be(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(r,e){const t=r.ctx;if(t&&t.ut){let ke,Oe;for(e?(ke=r.el,Oe=r.anchor):(ke=r.targetStart,Oe=r.targetAnchor);ke&&ke!==Oe;)ke.nodeType===1&&ke.setAttribute("data-v-owner",t.uid),ke=ke.nextSibling;t.ut()}}function prepareAnchor(r,e,t,ke){const Oe=e.targetStart=t(""),Ge=e.targetAnchor=t("");return Oe[TeleportEndKey]=Ge,r&&(ke(Oe,r),ke(Ge,r)),Ge}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const r={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{r.isMounted=!0}),onBeforeUnmount(()=>{r.isUnmounting=!0}),r}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=r=>{const e=r.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(r,{slots:e}){const t=getCurrentInstance(),ke=useTransitionState();return()=>{const Oe=e.default&&getTransitionRawChildren(e.default(),!0);if(!Oe||!Oe.length)return;const Ge=findNonCommentChild(Oe),Be=toRaw(r),{mode:je}=Be;if(ke.isLeaving)return emptyPlaceholder(Ge);const Ve=getInnerChild$1(Ge);if(!Ve)return emptyPlaceholder(Ge);let Ze=resolveTransitionHooks(Ve,Be,ke,t,en=>Ze=en);Ve.type!==Comment&&setTransitionHooks(Ve,Ze);let Qe=t.subTree&&getInnerChild$1(t.subTree);if(Qe&&Qe.type!==Comment&&!isSameVNodeType(Ve,Qe)&&recursiveGetSubtree(t).type!==Comment){let en=resolveTransitionHooks(Qe,Be,ke,t);if(setTransitionHooks(Qe,en),je==="out-in"&&Ve.type!==Comment)return ke.isLeaving=!0,en.afterLeave=()=>{ke.isLeaving=!1,t.job.flags&8||t.update(),delete en.afterLeave,Qe=void 0},emptyPlaceholder(Ge);je==="in-out"&&Ve.type!==Comment?en.delayLeave=(tn,an,cn)=>{const dn=getLeavingNodesForType(ke,Qe);dn[String(Qe.key)]=Qe,tn[leaveCbKey]=()=>{an(),tn[leaveCbKey]=void 0,delete Ze.delayedLeave,Qe=void 0},Ze.delayedLeave=()=>{cn(),delete Ze.delayedLeave,Qe=void 0}}:Qe=void 0}else Qe&&(Qe=void 0);return Ge}}};function findNonCommentChild(r){let e=r[0];if(r.length>1){for(const t of r)if(t.type!==Comment){e=t;break}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(r,e){const{leavingVNodes:t}=r;let ke=t.get(e.type);return ke||(ke=Object.create(null),t.set(e.type,ke)),ke}function resolveTransitionHooks(r,e,t,ke,Oe){const{appear:Ge,mode:Be,persisted:je=!1,onBeforeEnter:Ve,onEnter:Ze,onAfterEnter:Qe,onEnterCancelled:en,onBeforeLeave:tn,onLeave:an,onAfterLeave:cn,onLeaveCancelled:dn,onBeforeAppear:hn,onAppear:fn,onAfterAppear:pn,onAppearCancelled:mn}=e,yn=String(r.key),Cn=getLeavingNodesForType(t,r),wn=(Mn,Tn)=>{Mn&&callWithAsyncErrorHandling(Mn,ke,9,Tn)},bn=(Mn,Tn)=>{const En=Tn[1];wn(Mn,Tn),isArray$1(Mn)?Mn.every(An=>An.length<=1)&&En():Mn.length<=1&&En()},Sn={mode:Be,persisted:je,beforeEnter(Mn){let Tn=Ve;if(!t.isMounted)if(Ge)Tn=hn||Ve;else return;Mn[leaveCbKey]&&Mn[leaveCbKey](!0);const En=Cn[yn];En&&isSameVNodeType(r,En)&&En.el[leaveCbKey]&&En.el[leaveCbKey](),wn(Tn,[Mn])},enter(Mn){let Tn=Ze,En=Qe,An=en;if(!t.isMounted)if(Ge)Tn=fn||Ze,En=pn||Qe,An=mn||en;else return;let Ln=!1;const Rn=Mn[enterCbKey$1]=Gn=>{Ln||(Ln=!0,Gn?wn(An,[Mn]):wn(En,[Mn]),Sn.delayedLeave&&Sn.delayedLeave(),Mn[enterCbKey$1]=void 0)};Tn?bn(Tn,[Mn,Rn]):Rn()},leave(Mn,Tn){const En=String(r.key);if(Mn[enterCbKey$1]&&Mn[enterCbKey$1](!0),t.isUnmounting)return Tn();wn(tn,[Mn]);let An=!1;const Ln=Mn[leaveCbKey]=Rn=>{An||(An=!0,Tn(),Rn?wn(dn,[Mn]):wn(cn,[Mn]),Mn[leaveCbKey]=void 0,Cn[En]===r&&delete Cn[En])};Cn[En]=r,an?bn(an,[Mn,Ln]):Ln()},clone(Mn){const Tn=resolveTransitionHooks(Mn,e,t,ke,Oe);return Oe&&Oe(Tn),Tn}};return Sn}function emptyPlaceholder(r){if(isKeepAlive(r))return r=cloneVNode(r),r.children=null,r}function getInnerChild$1(r){if(!isKeepAlive(r))return isTeleport(r.type)&&r.children?findNonCommentChild(r.children):r;const{shapeFlag:e,children:t}=r;if(t){if(e&16)return t[0];if(e&32&&isFunction$1(t.default))return t.default()}}function setTransitionHooks(r,e){r.shapeFlag&6&&r.component?(r.transition=e,setTransitionHooks(r.component.subTree,e)):r.shapeFlag&128?(r.ssContent.transition=e.clone(r.ssContent),r.ssFallback.transition=e.clone(r.ssFallback)):r.transition=e}function getTransitionRawChildren(r,e=!1,t){let ke=[],Oe=0;for(let Ge=0;Ge<r.length;Ge++){let Be=r[Ge];const je=t==null?Be.key:String(t)+String(Be.key!=null?Be.key:Ge);Be.type===Fragment?(Be.patchFlag&128&&Oe++,ke=ke.concat(getTransitionRawChildren(Be.children,e,je))):(e||Be.type!==Comment)&&ke.push(je!=null?cloneVNode(Be,{key:je}):Be)}if(Oe>1)for(let Ge=0;Ge<ke.length;Ge++)ke[Ge].patchFlag=-2;return ke}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(r,e){return isFunction$1(r)?extend$5({name:r.name},e,{setup:r}):r}function useId(){const r=getCurrentInstance();return r?(r.appContext.config.idPrefix||"v")+"-"+r.ids[0]+r.ids[1]++:""}function markAsyncBoundary(r){r.ids=[r.ids[0]+r.ids[2]+++"-",0,0]}function useTemplateRef(r){const e=getCurrentInstance(),t=shallowRef(null);if(e){const Oe=e.refs===EMPTY_OBJ?e.refs={}:e.refs;Object.defineProperty(Oe,r,{enumerable:!0,get:()=>t.value,set:Ge=>t.value=Ge})}return t}function setRef(r,e,t,ke,Oe=!1){if(isArray$1(r)){r.forEach((cn,dn)=>setRef(cn,e&&(isArray$1(e)?e[dn]:e),t,ke,Oe));return}if(isAsyncWrapper(ke)&&!Oe){ke.shapeFlag&512&&ke.type.__asyncResolved&&ke.component.subTree.component&&setRef(r,e,t,ke.component.subTree);return}const Ge=ke.shapeFlag&4?getComponentPublicInstance(ke.component):ke.el,Be=Oe?null:Ge,{i:je,r:Ve}=r,Ze=e&&e.r,Qe=je.refs===EMPTY_OBJ?je.refs={}:je.refs,en=je.setupState,tn=toRaw(en),an=en===EMPTY_OBJ?()=>!1:cn=>hasOwn(tn,cn);if(Ze!=null&&Ze!==Ve&&(isString(Ze)?(Qe[Ze]=null,an(Ze)&&(en[Ze]=null)):isRef(Ze)&&(Ze.value=null)),isFunction$1(Ve))callWithErrorHandling(Ve,je,12,[Be,Qe]);else{const cn=isString(Ve),dn=isRef(Ve);if(cn||dn){const hn=()=>{if(r.f){const fn=cn?an(Ve)?en[Ve]:Qe[Ve]:Ve.value;Oe?isArray$1(fn)&&remove(fn,Ge):isArray$1(fn)?fn.includes(Ge)||fn.push(Ge):cn?(Qe[Ve]=[Ge],an(Ve)&&(en[Ve]=Qe[Ve])):(Ve.value=[Ge],r.k&&(Qe[r.k]=Ve.value))}else cn?(Qe[Ve]=Be,an(Ve)&&(en[Ve]=Be)):dn&&(Ve.value=Be,r.k&&(Qe[r.k]=Be))};Be?(hn.id=-1,queuePostRenderEffect(hn,t)):hn()}}}let hasLoggedMismatchError=!1;const logMismatchError=()=>{hasLoggedMismatchError||(console.error("Hydration completed but contains mismatches."),hasLoggedMismatchError=!0)},isSVGContainer=r=>r.namespaceURI.includes("svg")&&r.tagName!=="foreignObject",isMathMLContainer=r=>r.namespaceURI.includes("MathML"),getContainerType=r=>{if(r.nodeType===1){if(isSVGContainer(r))return"svg";if(isMathMLContainer(r))return"mathml"}},isComment=r=>r.nodeType===8;function createHydrationFunctions(r){const{mt:e,p:t,o:{patchProp:ke,createText:Oe,nextSibling:Ge,parentNode:Be,remove:je,insert:Ve,createComment:Ze}}=r,Qe=(mn,yn)=>{if(!yn.hasChildNodes()){t(null,mn,yn),flushPostFlushCbs(),yn._vnode=mn;return}en(yn.firstChild,mn,null,null,null),flushPostFlushCbs(),yn._vnode=mn},en=(mn,yn,Cn,wn,bn,Sn=!1)=>{Sn=Sn||!!yn.dynamicChildren;const Mn=isComment(mn)&&mn.data==="[",Tn=()=>dn(mn,yn,Cn,wn,bn,Mn),{type:En,ref:An,shapeFlag:Ln,patchFlag:Rn}=yn;let Gn=mn.nodeType;yn.el=mn,Rn===-2&&(Sn=!1,yn.dynamicChildren=null);let Nn=null;switch(En){case Text$1:Gn!==3?yn.children===""?(Ve(yn.el=Oe(""),Be(mn),mn),Nn=mn):Nn=Tn():(mn.data!==yn.children&&(logMismatchError(),mn.data=yn.children),Nn=Ge(mn));break;case Comment:pn(mn)?(Nn=Ge(mn),fn(yn.el=mn.content.firstChild,mn,Cn)):Gn!==8||Mn?Nn=Tn():Nn=Ge(mn);break;case Static:if(Mn&&(mn=Ge(mn),Gn=mn.nodeType),Gn===1||Gn===3){Nn=mn;const jn=!yn.children.length;for(let Dn=0;Dn<yn.staticCount;Dn++)jn&&(yn.children+=Nn.nodeType===1?Nn.outerHTML:Nn.data),Dn===yn.staticCount-1&&(yn.anchor=Nn),Nn=Ge(Nn);return Mn?Ge(Nn):Nn}else Tn();break;case Fragment:Mn?Nn=cn(mn,yn,Cn,wn,bn,Sn):Nn=Tn();break;default:if(Ln&1)(Gn!==1||yn.type.toLowerCase()!==mn.tagName.toLowerCase())&&!pn(mn)?Nn=Tn():Nn=tn(mn,yn,Cn,wn,bn,Sn);else if(Ln&6){yn.slotScopeIds=bn;const jn=Be(mn);if(Mn?Nn=hn(mn):isComment(mn)&&mn.data==="teleport start"?Nn=hn(mn,mn.data,"teleport end"):Nn=Ge(mn),e(yn,jn,null,Cn,wn,getContainerType(jn),Sn),isAsyncWrapper(yn)&&!yn.type.__asyncResolved){let Dn;Mn?(Dn=createVNode(Fragment),Dn.anchor=Nn?Nn.previousSibling:jn.lastChild):Dn=mn.nodeType===3?createTextVNode(""):createVNode("div"),Dn.el=mn,yn.component.subTree=Dn}}else Ln&64?Gn!==8?Nn=Tn():Nn=yn.type.hydrate(mn,yn,Cn,wn,bn,Sn,r,an):Ln&128&&(Nn=yn.type.hydrate(mn,yn,Cn,wn,getContainerType(Be(mn)),bn,Sn,r,en))}return An!=null&&setRef(An,null,wn,yn),Nn},tn=(mn,yn,Cn,wn,bn,Sn)=>{Sn=Sn||!!yn.dynamicChildren;const{type:Mn,props:Tn,patchFlag:En,shapeFlag:An,dirs:Ln,transition:Rn}=yn,Gn=Mn==="input"||Mn==="option";if(Gn||En!==-1){Ln&&invokeDirectiveHook(yn,null,Cn,"created");let Nn=!1;if(pn(mn)){Nn=needTransition(null,Rn)&&Cn&&Cn.vnode.props&&Cn.vnode.props.appear;const Dn=mn.content.firstChild;Nn&&Rn.beforeEnter(Dn),fn(Dn,mn,Cn),yn.el=mn=Dn}if(An&16&&!(Tn&&(Tn.innerHTML||Tn.textContent))){let Dn=an(mn.firstChild,yn,mn,Cn,wn,bn,Sn);for(;Dn;){isMismatchAllowed(mn,1)||logMismatchError();const Ci=Dn;Dn=Dn.nextSibling,je(Ci)}}else if(An&8){let Dn=yn.children;Dn[0]===`
`&&(mn.tagName==="PRE"||mn.tagName==="TEXTAREA")&&(Dn=Dn.slice(1)),mn.textContent!==Dn&&(isMismatchAllowed(mn,0)||logMismatchError(),mn.textContent=yn.children)}if(Tn){if(Gn||!Sn||En&48){const Dn=mn.tagName.includes("-");for(const Ci in Tn)(Gn&&(Ci.endsWith("value")||Ci==="indeterminate")||isOn(Ci)&&!isReservedProp(Ci)||Ci[0]==="."||Dn)&&ke(mn,Ci,null,Tn[Ci],void 0,Cn)}else if(Tn.onClick)ke(mn,"onClick",null,Tn.onClick,void 0,Cn);else if(En&4&&isReactive(Tn.style))for(const Dn in Tn.style)Tn.style[Dn]}let jn;(jn=Tn&&Tn.onVnodeBeforeMount)&&invokeVNodeHook(jn,Cn,yn),Ln&&invokeDirectiveHook(yn,null,Cn,"beforeMount"),((jn=Tn&&Tn.onVnodeMounted)||Ln||Nn)&&queueEffectWithSuspense(()=>{jn&&invokeVNodeHook(jn,Cn,yn),Nn&&Rn.enter(mn),Ln&&invokeDirectiveHook(yn,null,Cn,"mounted")},wn)}return mn.nextSibling},an=(mn,yn,Cn,wn,bn,Sn,Mn)=>{Mn=Mn||!!yn.dynamicChildren;const Tn=yn.children,En=Tn.length;for(let An=0;An<En;An++){const Ln=Mn?Tn[An]:Tn[An]=normalizeVNode(Tn[An]),Rn=Ln.type===Text$1;mn?(Rn&&!Mn&&An+1<En&&normalizeVNode(Tn[An+1]).type===Text$1&&(Ve(Oe(mn.data.slice(Ln.children.length)),Cn,Ge(mn)),mn.data=Ln.children),mn=en(mn,Ln,wn,bn,Sn,Mn)):Rn&&!Ln.children?Ve(Ln.el=Oe(""),Cn):(isMismatchAllowed(Cn,1)||logMismatchError(),t(null,Ln,Cn,null,wn,bn,getContainerType(Cn),Sn))}return mn},cn=(mn,yn,Cn,wn,bn,Sn)=>{const{slotScopeIds:Mn}=yn;Mn&&(bn=bn?bn.concat(Mn):Mn);const Tn=Be(mn),En=an(Ge(mn),yn,Tn,Cn,wn,bn,Sn);return En&&isComment(En)&&En.data==="]"?Ge(yn.anchor=En):(logMismatchError(),Ve(yn.anchor=Ze("]"),Tn,En),En)},dn=(mn,yn,Cn,wn,bn,Sn)=>{if(isMismatchAllowed(mn.parentElement,1)||logMismatchError(),yn.el=null,Sn){const En=hn(mn);for(;;){const An=Ge(mn);if(An&&An!==En)je(An);else break}}const Mn=Ge(mn),Tn=Be(mn);return je(mn),t(null,yn,Tn,Mn,Cn,wn,getContainerType(Tn),bn),Cn&&(Cn.vnode.el=yn.el,updateHOCHostEl(Cn,yn.el)),Mn},hn=(mn,yn="[",Cn="]")=>{let wn=0;for(;mn;)if(mn=Ge(mn),mn&&isComment(mn)&&(mn.data===yn&&wn++,mn.data===Cn)){if(wn===0)return Ge(mn);wn--}return mn},fn=(mn,yn,Cn)=>{const wn=yn.parentNode;wn&&wn.replaceChild(mn,yn);let bn=Cn;for(;bn;)bn.vnode.el===yn&&(bn.vnode.el=bn.subTree.el=mn),bn=bn.parent},pn=mn=>mn.nodeType===1&&mn.tagName==="TEMPLATE";return[Qe,en]}const allowMismatchAttr="data-allow-mismatch",MismatchTypeString={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function isMismatchAllowed(r,e){if(e===0||e===1)for(;r&&!r.hasAttribute(allowMismatchAttr);)r=r.parentElement;const t=r&&r.getAttribute(allowMismatchAttr);if(t==null)return!1;if(t==="")return!0;{const ke=t.split(",");return e===0&&ke.includes("children")?!0:t.split(",").includes(MismatchTypeString[e])}}const requestIdleCallback=getGlobalThis().requestIdleCallback||(r=>setTimeout(r,1)),cancelIdleCallback=getGlobalThis().cancelIdleCallback||(r=>clearTimeout(r)),hydrateOnIdle=(r=1e4)=>e=>{const t=requestIdleCallback(e,{timeout:r});return()=>cancelIdleCallback(t)};function elementIsVisibleInViewport(r){const{top:e,left:t,bottom:ke,right:Oe}=r.getBoundingClientRect(),{innerHeight:Ge,innerWidth:Be}=window;return(e>0&&e<Ge||ke>0&&ke<Ge)&&(t>0&&t<Be||Oe>0&&Oe<Be)}const hydrateOnVisible=r=>(e,t)=>{const ke=new IntersectionObserver(Oe=>{for(const Ge of Oe)if(Ge.isIntersecting){ke.disconnect(),e();break}},r);return t(Oe=>{if(Oe instanceof Element){if(elementIsVisibleInViewport(Oe))return e(),ke.disconnect(),!1;ke.observe(Oe)}}),()=>ke.disconnect()},hydrateOnMediaQuery=r=>e=>{if(r){const t=matchMedia(r);if(t.matches)e();else return t.addEventListener("change",e,{once:!0}),()=>t.removeEventListener("change",e)}},hydrateOnInteraction=(r=[])=>(e,t)=>{isString(r)&&(r=[r]);let ke=!1;const Oe=Be=>{ke||(ke=!0,Ge(),e(),Be.target.dispatchEvent(new Be.constructor(Be.type,Be)))},Ge=()=>{t(Be=>{for(const je of r)Be.removeEventListener(je,Oe)})};return t(Be=>{for(const je of r)Be.addEventListener(je,Oe,{once:!0})}),Ge};function forEachElement(r,e){if(isComment(r)&&r.data==="["){let t=1,ke=r.nextSibling;for(;ke;){if(ke.nodeType===1){if(e(ke)===!1)break}else if(isComment(ke))if(ke.data==="]"){if(--t===0)break}else ke.data==="["&&t++;ke=ke.nextSibling}}else e(r)}const isAsyncWrapper=r=>!!r.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(r){isFunction$1(r)&&(r={loader:r});const{loader:e,loadingComponent:t,errorComponent:ke,delay:Oe=200,hydrate:Ge,timeout:Be,suspensible:je=!0,onError:Ve}=r;let Ze=null,Qe,en=0;const tn=()=>(en++,Ze=null,an()),an=()=>{let cn;return Ze||(cn=Ze=e().catch(dn=>{if(dn=dn instanceof Error?dn:new Error(String(dn)),Ve)return new Promise((hn,fn)=>{Ve(dn,()=>hn(tn()),()=>fn(dn),en+1)});throw dn}).then(dn=>cn!==Ze&&Ze?Ze:(dn&&(dn.__esModule||dn[Symbol.toStringTag]==="Module")&&(dn=dn.default),Qe=dn,dn)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:an,__asyncHydrate(cn,dn,hn){const fn=Ge?()=>{const pn=Ge(hn,mn=>forEachElement(cn,mn));pn&&(dn.bum||(dn.bum=[])).push(pn)}:hn;Qe?fn():an().then(()=>!dn.isUnmounted&&fn())},get __asyncResolved(){return Qe},setup(){const cn=currentInstance;if(markAsyncBoundary(cn),Qe)return()=>createInnerComp(Qe,cn);const dn=mn=>{Ze=null,handleError(mn,cn,13,!ke)};if(je&&cn.suspense||isInSSRComponentSetup)return an().then(mn=>()=>createInnerComp(mn,cn)).catch(mn=>(dn(mn),()=>ke?createVNode(ke,{error:mn}):null));const hn=ref(!1),fn=ref(),pn=ref(!!Oe);return Oe&&setTimeout(()=>{pn.value=!1},Oe),Be!=null&&setTimeout(()=>{if(!hn.value&&!fn.value){const mn=new Error(`Async component timed out after ${Be}ms.`);dn(mn),fn.value=mn}},Be),an().then(()=>{hn.value=!0,cn.parent&&isKeepAlive(cn.parent.vnode)&&cn.parent.update()}).catch(mn=>{dn(mn),fn.value=mn}),()=>{if(hn.value&&Qe)return createInnerComp(Qe,cn);if(fn.value&&ke)return createVNode(ke,{error:fn.value});if(t&&!pn.value)return createVNode(t)}}})}function createInnerComp(r,e){const{ref:t,props:ke,children:Oe,ce:Ge}=e.vnode,Be=createVNode(r,ke,Oe);return Be.ref=t,Be.ce=Ge,delete e.vnode.ce,Be}const isKeepAlive=r=>r.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(r,{slots:e}){const t=getCurrentInstance(),ke=t.ctx;if(!ke.renderer)return()=>{const pn=e.default&&e.default();return pn&&pn.length===1?pn[0]:pn};const Oe=new Map,Ge=new Set;let Be=null;const je=t.suspense,{renderer:{p:Ve,m:Ze,um:Qe,o:{createElement:en}}}=ke,tn=en("div");ke.activate=(pn,mn,yn,Cn,wn)=>{const bn=pn.component;Ze(pn,mn,yn,0,je),Ve(bn.vnode,pn,mn,yn,bn,je,Cn,pn.slotScopeIds,wn),queuePostRenderEffect(()=>{bn.isDeactivated=!1,bn.a&&invokeArrayFns(bn.a);const Sn=pn.props&&pn.props.onVnodeMounted;Sn&&invokeVNodeHook(Sn,bn.parent,pn)},je)},ke.deactivate=pn=>{const mn=pn.component;invalidateMount(mn.m),invalidateMount(mn.a),Ze(pn,tn,null,1,je),queuePostRenderEffect(()=>{mn.da&&invokeArrayFns(mn.da);const yn=pn.props&&pn.props.onVnodeUnmounted;yn&&invokeVNodeHook(yn,mn.parent,pn),mn.isDeactivated=!0},je)};function an(pn){resetShapeFlag(pn),Qe(pn,t,je,!0)}function cn(pn){Oe.forEach((mn,yn)=>{const Cn=getComponentName(mn.type);Cn&&!pn(Cn)&&dn(yn)})}function dn(pn){const mn=Oe.get(pn);mn&&(!Be||!isSameVNodeType(mn,Be))?an(mn):Be&&resetShapeFlag(Be),Oe.delete(pn),Ge.delete(pn)}watch(()=>[r.include,r.exclude],([pn,mn])=>{pn&&cn(yn=>matches$1(pn,yn)),mn&&cn(yn=>!matches$1(mn,yn))},{flush:"post",deep:!0});let hn=null;const fn=()=>{hn!=null&&(isSuspense(t.subTree.type)?queuePostRenderEffect(()=>{Oe.set(hn,getInnerChild(t.subTree))},t.subTree.suspense):Oe.set(hn,getInnerChild(t.subTree)))};return onMounted(fn),onUpdated(fn),onBeforeUnmount(()=>{Oe.forEach(pn=>{const{subTree:mn,suspense:yn}=t,Cn=getInnerChild(mn);if(pn.type===Cn.type&&pn.key===Cn.key){resetShapeFlag(Cn);const wn=Cn.component.da;wn&&queuePostRenderEffect(wn,yn);return}an(pn)})}),()=>{if(hn=null,!e.default)return Be=null;const pn=e.default(),mn=pn[0];if(pn.length>1)return Be=null,pn;if(!isVNode(mn)||!(mn.shapeFlag&4)&&!(mn.shapeFlag&128))return Be=null,mn;let yn=getInnerChild(mn);if(yn.type===Comment)return Be=null,yn;const Cn=yn.type,wn=getComponentName(isAsyncWrapper(yn)?yn.type.__asyncResolved||{}:Cn),{include:bn,exclude:Sn,max:Mn}=r;if(bn&&(!wn||!matches$1(bn,wn))||Sn&&wn&&matches$1(Sn,wn))return yn.shapeFlag&=-257,Be=yn,mn;const Tn=yn.key==null?Cn:yn.key,En=Oe.get(Tn);return yn.el&&(yn=cloneVNode(yn),mn.shapeFlag&128&&(mn.ssContent=yn)),hn=Tn,En?(yn.el=En.el,yn.component=En.component,yn.transition&&setTransitionHooks(yn,yn.transition),yn.shapeFlag|=512,Ge.delete(Tn),Ge.add(Tn)):(Ge.add(Tn),Mn&&Ge.size>parseInt(Mn,10)&&dn(Ge.values().next().value)),yn.shapeFlag|=256,Be=yn,isSuspense(mn.type)?mn:yn}}},KeepAlive=KeepAliveImpl;function matches$1(r,e){return isArray$1(r)?r.some(t=>matches$1(t,e)):isString(r)?r.split(",").includes(e):isRegExp(r)?(r.lastIndex=0,r.test(e)):!1}function onActivated(r,e){registerKeepAliveHook(r,"a",e)}function onDeactivated(r,e){registerKeepAliveHook(r,"da",e)}function registerKeepAliveHook(r,e,t=currentInstance){const ke=r.__wdc||(r.__wdc=()=>{let Oe=t;for(;Oe;){if(Oe.isDeactivated)return;Oe=Oe.parent}return r()});if(injectHook(e,ke,t),t){let Oe=t.parent;for(;Oe&&Oe.parent;)isKeepAlive(Oe.parent.vnode)&&injectToKeepAliveRoot(ke,e,t,Oe),Oe=Oe.parent}}function injectToKeepAliveRoot(r,e,t,ke){const Oe=injectHook(e,r,ke,!0);onUnmounted(()=>{remove(ke[e],Oe)},t)}function resetShapeFlag(r){r.shapeFlag&=-257,r.shapeFlag&=-513}function getInnerChild(r){return r.shapeFlag&128?r.ssContent:r}function injectHook(r,e,t=currentInstance,ke=!1){if(t){const Oe=t[r]||(t[r]=[]),Ge=e.__weh||(e.__weh=(...Be)=>{pauseTracking();const je=setCurrentInstance(t),Ve=callWithAsyncErrorHandling(e,t,r,Be);return je(),resetTracking(),Ve});return ke?Oe.unshift(Ge):Oe.push(Ge),Ge}}const createHook=r=>(e,t=currentInstance)=>{(!isInSSRComponentSetup||r==="sp")&&injectHook(r,(...ke)=>e(...ke),t)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(r,e=currentInstance){injectHook("ec",r,e)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(r,e){return resolveAsset(COMPONENTS,r,!0,e)||r}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(r){return isString(r)?resolveAsset(COMPONENTS,r,!1)||r:r||NULL_DYNAMIC_COMPONENT}function resolveDirective(r){return resolveAsset(DIRECTIVES,r)}function resolveAsset(r,e,t=!0,ke=!1){const Oe=currentRenderingInstance||currentInstance;if(Oe){const Ge=Oe.type;if(r===COMPONENTS){const je=getComponentName(Ge,!1);if(je&&(je===e||je===camelize(e)||je===capitalize(camelize(e))))return Ge}const Be=resolve(Oe[r]||Ge[r],e)||resolve(Oe.appContext[r],e);return!Be&&ke?Ge:Be}}function resolve(r,e){return r&&(r[e]||r[camelize(e)]||r[capitalize(camelize(e))])}function renderList(r,e,t,ke){let Oe;const Ge=t&&t[ke],Be=isArray$1(r);if(Be||isString(r)){const je=Be&&isReactive(r);let Ve=!1;je&&(Ve=!isShallow(r),r=shallowReadArray(r)),Oe=new Array(r.length);for(let Ze=0,Qe=r.length;Ze<Qe;Ze++)Oe[Ze]=e(Ve?toReactive(r[Ze]):r[Ze],Ze,void 0,Ge&&Ge[Ze])}else if(typeof r=="number"){Oe=new Array(r);for(let je=0;je<r;je++)Oe[je]=e(je+1,je,void 0,Ge&&Ge[je])}else if(isObject$1(r))if(r[Symbol.iterator])Oe=Array.from(r,(je,Ve)=>e(je,Ve,void 0,Ge&&Ge[Ve]));else{const je=Object.keys(r);Oe=new Array(je.length);for(let Ve=0,Ze=je.length;Ve<Ze;Ve++){const Qe=je[Ve];Oe[Ve]=e(r[Qe],Qe,Ve,Ge&&Ge[Ve])}}else Oe=[];return t&&(t[ke]=Oe),Oe}function createSlots(r,e){for(let t=0;t<e.length;t++){const ke=e[t];if(isArray$1(ke))for(let Oe=0;Oe<ke.length;Oe++)r[ke[Oe].name]=ke[Oe].fn;else ke&&(r[ke.name]=ke.key?(...Oe)=>{const Ge=ke.fn(...Oe);return Ge&&(Ge.key=ke.key),Ge}:ke.fn)}return r}function renderSlot(r,e,t={},ke,Oe){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return e!=="default"&&(t.name=e),openBlock(),createBlock(Fragment,null,[createVNode("slot",t,ke&&ke())],64);let Ge=r[e];Ge&&Ge._c&&(Ge._d=!1),openBlock();const Be=Ge&&ensureValidVNode(Ge(t)),je=t.key||Be&&Be.key,Ve=createBlock(Fragment,{key:(je&&!isSymbol(je)?je:`_${e}`)+(!Be&&ke?"_fb":"")},Be||(ke?ke():[]),Be&&r._===1?64:-2);return!Oe&&Ve.scopeId&&(Ve.slotScopeIds=[Ve.scopeId+"-s"]),Ge&&Ge._c&&(Ge._d=!0),Ve}function ensureValidVNode(r){return r.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?r:null}function toHandlers(r,e){const t={};for(const ke in r)t[e&&/[A-Z]/.test(ke)?`on:${ke}`:toHandlerKey(ke)]=r[ke];return t}const getPublicInstance=r=>r?isStatefulComponent(r)?getComponentPublicInstance(r):getPublicInstance(r.parent):null,publicPropertiesMap=extend$5(Object.create(null),{$:r=>r,$el:r=>r.vnode.el,$data:r=>r.data,$props:r=>r.props,$attrs:r=>r.attrs,$slots:r=>r.slots,$refs:r=>r.refs,$parent:r=>getPublicInstance(r.parent),$root:r=>getPublicInstance(r.root),$host:r=>r.ce,$emit:r=>r.emit,$options:r=>resolveMergedOptions(r),$forceUpdate:r=>r.f||(r.f=()=>{queueJob(r.update)}),$nextTick:r=>r.n||(r.n=nextTick.bind(r.proxy)),$watch:r=>instanceWatch.bind(r)}),hasSetupBinding=(r,e)=>r!==EMPTY_OBJ&&!r.__isScriptSetup&&hasOwn(r,e),PublicInstanceProxyHandlers={get({_:r},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:ke,data:Oe,props:Ge,accessCache:Be,type:je,appContext:Ve}=r;let Ze;if(e[0]!=="$"){const an=Be[e];if(an!==void 0)switch(an){case 1:return ke[e];case 2:return Oe[e];case 4:return t[e];case 3:return Ge[e]}else{if(hasSetupBinding(ke,e))return Be[e]=1,ke[e];if(Oe!==EMPTY_OBJ&&hasOwn(Oe,e))return Be[e]=2,Oe[e];if((Ze=r.propsOptions[0])&&hasOwn(Ze,e))return Be[e]=3,Ge[e];if(t!==EMPTY_OBJ&&hasOwn(t,e))return Be[e]=4,t[e];shouldCacheAccess&&(Be[e]=0)}}const Qe=publicPropertiesMap[e];let en,tn;if(Qe)return e==="$attrs"&&track(r.attrs,"get",""),Qe(r);if((en=je.__cssModules)&&(en=en[e]))return en;if(t!==EMPTY_OBJ&&hasOwn(t,e))return Be[e]=4,t[e];if(tn=Ve.config.globalProperties,hasOwn(tn,e))return tn[e]},set({_:r},e,t){const{data:ke,setupState:Oe,ctx:Ge}=r;return hasSetupBinding(Oe,e)?(Oe[e]=t,!0):ke!==EMPTY_OBJ&&hasOwn(ke,e)?(ke[e]=t,!0):hasOwn(r.props,e)||e[0]==="$"&&e.slice(1)in r?!1:(Ge[e]=t,!0)},has({_:{data:r,setupState:e,accessCache:t,ctx:ke,appContext:Oe,propsOptions:Ge}},Be){let je;return!!t[Be]||r!==EMPTY_OBJ&&hasOwn(r,Be)||hasSetupBinding(e,Be)||(je=Ge[0])&&hasOwn(je,Be)||hasOwn(ke,Be)||hasOwn(publicPropertiesMap,Be)||hasOwn(Oe.config.globalProperties,Be)},defineProperty(r,e,t){return t.get!=null?r._.accessCache[e]=0:hasOwn(t,"value")&&this.set(r,e,t.value,null),Reflect.defineProperty(r,e,t)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$5({},PublicInstanceProxyHandlers,{get(r,e){if(e!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(r,e,r)},has(r,e){return e[0]!=="_"&&!isGloballyAllowed(e)}});function defineProps(){return null}function defineEmits(){return null}function defineExpose(r){}function defineOptions(r){}function defineSlots(){return null}function defineModel(){}function withDefaults(r,e){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const r=getCurrentInstance();return r.setupContext||(r.setupContext=createSetupContext(r))}function normalizePropsOrEmits(r){return isArray$1(r)?r.reduce((e,t)=>(e[t]=null,e),{}):r}function mergeDefaults(r,e){const t=normalizePropsOrEmits(r);for(const ke in e){if(ke.startsWith("__skip"))continue;let Oe=t[ke];Oe?isArray$1(Oe)||isFunction$1(Oe)?Oe=t[ke]={type:Oe,default:e[ke]}:Oe.default=e[ke]:Oe===null&&(Oe=t[ke]={default:e[ke]}),Oe&&e[`__skip_${ke}`]&&(Oe.skipFactory=!0)}return t}function mergeModels(r,e){return!r||!e?r||e:isArray$1(r)&&isArray$1(e)?r.concat(e):extend$5({},normalizePropsOrEmits(r),normalizePropsOrEmits(e))}function createPropsRestProxy(r,e){const t={};for(const ke in r)e.includes(ke)||Object.defineProperty(t,ke,{enumerable:!0,get:()=>r[ke]});return t}function withAsyncContext(r){const e=getCurrentInstance();let t=r();return unsetCurrentInstance(),isPromise(t)&&(t=t.catch(ke=>{throw setCurrentInstance(e),ke})),[t,()=>setCurrentInstance(e)]}let shouldCacheAccess=!0;function applyOptions(r){const e=resolveMergedOptions(r),t=r.proxy,ke=r.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,r,"bc");const{data:Oe,computed:Ge,methods:Be,watch:je,provide:Ve,inject:Ze,created:Qe,beforeMount:en,mounted:tn,beforeUpdate:an,updated:cn,activated:dn,deactivated:hn,beforeDestroy:fn,beforeUnmount:pn,destroyed:mn,unmounted:yn,render:Cn,renderTracked:wn,renderTriggered:bn,errorCaptured:Sn,serverPrefetch:Mn,expose:Tn,inheritAttrs:En,components:An,directives:Ln,filters:Rn}=e;if(Ze&&resolveInjections(Ze,ke,null),Be)for(const jn in Be){const Dn=Be[jn];isFunction$1(Dn)&&(ke[jn]=Dn.bind(t))}if(Oe){const jn=Oe.call(t,t);isObject$1(jn)&&(r.data=reactive(jn))}if(shouldCacheAccess=!0,Ge)for(const jn in Ge){const Dn=Ge[jn],Ci=isFunction$1(Dn)?Dn.bind(t,t):isFunction$1(Dn.get)?Dn.get.bind(t,t):NOOP,Jn=!isFunction$1(Dn)&&isFunction$1(Dn.set)?Dn.set.bind(t):NOOP,Ki=computed({get:Ci,set:Jn});Object.defineProperty(ke,jn,{enumerable:!0,configurable:!0,get:()=>Ki.value,set:xn=>Ki.value=xn})}if(je)for(const jn in je)createWatcher(je[jn],ke,t,jn);if(Ve){const jn=isFunction$1(Ve)?Ve.call(t):Ve;Reflect.ownKeys(jn).forEach(Dn=>{provide(Dn,jn[Dn])})}Qe&&callHook$1(Qe,r,"c");function Nn(jn,Dn){isArray$1(Dn)?Dn.forEach(Ci=>jn(Ci.bind(t))):Dn&&jn(Dn.bind(t))}if(Nn(onBeforeMount,en),Nn(onMounted,tn),Nn(onBeforeUpdate,an),Nn(onUpdated,cn),Nn(onActivated,dn),Nn(onDeactivated,hn),Nn(onErrorCaptured,Sn),Nn(onRenderTracked,wn),Nn(onRenderTriggered,bn),Nn(onBeforeUnmount,pn),Nn(onUnmounted,yn),Nn(onServerPrefetch,Mn),isArray$1(Tn))if(Tn.length){const jn=r.exposed||(r.exposed={});Tn.forEach(Dn=>{Object.defineProperty(jn,Dn,{get:()=>t[Dn],set:Ci=>t[Dn]=Ci})})}else r.exposed||(r.exposed={});Cn&&r.render===NOOP&&(r.render=Cn),En!=null&&(r.inheritAttrs=En),An&&(r.components=An),Ln&&(r.directives=Ln),Mn&&markAsyncBoundary(r)}function resolveInjections(r,e,t=NOOP){isArray$1(r)&&(r=normalizeInject(r));for(const ke in r){const Oe=r[ke];let Ge;isObject$1(Oe)?"default"in Oe?Ge=inject(Oe.from||ke,Oe.default,!0):Ge=inject(Oe.from||ke):Ge=inject(Oe),isRef(Ge)?Object.defineProperty(e,ke,{enumerable:!0,configurable:!0,get:()=>Ge.value,set:Be=>Ge.value=Be}):e[ke]=Ge}}function callHook$1(r,e,t){callWithAsyncErrorHandling(isArray$1(r)?r.map(ke=>ke.bind(e.proxy)):r.bind(e.proxy),e,t)}function createWatcher(r,e,t,ke){let Oe=ke.includes(".")?createPathGetter(t,ke):()=>t[ke];if(isString(r)){const Ge=e[r];isFunction$1(Ge)&&watch(Oe,Ge)}else if(isFunction$1(r))watch(Oe,r.bind(t));else if(isObject$1(r))if(isArray$1(r))r.forEach(Ge=>createWatcher(Ge,e,t,ke));else{const Ge=isFunction$1(r.handler)?r.handler.bind(t):e[r.handler];isFunction$1(Ge)&&watch(Oe,Ge,r)}}function resolveMergedOptions(r){const e=r.type,{mixins:t,extends:ke}=e,{mixins:Oe,optionsCache:Ge,config:{optionMergeStrategies:Be}}=r.appContext,je=Ge.get(e);let Ve;return je?Ve=je:!Oe.length&&!t&&!ke?Ve=e:(Ve={},Oe.length&&Oe.forEach(Ze=>mergeOptions$1(Ve,Ze,Be,!0)),mergeOptions$1(Ve,e,Be)),isObject$1(e)&&Ge.set(e,Ve),Ve}function mergeOptions$1(r,e,t,ke=!1){const{mixins:Oe,extends:Ge}=e;Ge&&mergeOptions$1(r,Ge,t,!0),Oe&&Oe.forEach(Be=>mergeOptions$1(r,Be,t,!0));for(const Be in e)if(!(ke&&Be==="expose")){const je=internalOptionMergeStrats[Be]||t&&t[Be];r[Be]=je?je(r[Be],e[Be]):e[Be]}return r}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(r,e){return e?r?function(){return extend$5(isFunction$1(r)?r.call(this,this):r,isFunction$1(e)?e.call(this,this):e)}:e:r}function mergeInject(r,e){return mergeObjectOptions(normalizeInject(r),normalizeInject(e))}function normalizeInject(r){if(isArray$1(r)){const e={};for(let t=0;t<r.length;t++)e[r[t]]=r[t];return e}return r}function mergeAsArray(r,e){return r?[...new Set([].concat(r,e))]:e}function mergeObjectOptions(r,e){return r?extend$5(Object.create(null),r,e):e}function mergeEmitsOrPropsOptions(r,e){return r?isArray$1(r)&&isArray$1(e)?[...new Set([...r,...e])]:extend$5(Object.create(null),normalizePropsOrEmits(r),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(r,e){if(!r)return e;if(!e)return r;const t=extend$5(Object.create(null),r);for(const ke in e)t[ke]=mergeAsArray(r[ke],e[ke]);return t}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(r,e){return function(ke,Oe=null){isFunction$1(ke)||(ke=extend$5({},ke)),Oe!=null&&!isObject$1(Oe)&&(Oe=null);const Ge=createAppContext(),Be=new WeakSet,je=[];let Ve=!1;const Ze=Ge.app={_uid:uid$1++,_component:ke,_props:Oe,_container:null,_context:Ge,_instance:null,version:version$3,get config(){return Ge.config},set config(Qe){},use(Qe,...en){return Be.has(Qe)||(Qe&&isFunction$1(Qe.install)?(Be.add(Qe),Qe.install(Ze,...en)):isFunction$1(Qe)&&(Be.add(Qe),Qe(Ze,...en))),Ze},mixin(Qe){return Ge.mixins.includes(Qe)||Ge.mixins.push(Qe),Ze},component(Qe,en){return en?(Ge.components[Qe]=en,Ze):Ge.components[Qe]},directive(Qe,en){return en?(Ge.directives[Qe]=en,Ze):Ge.directives[Qe]},mount(Qe,en,tn){if(!Ve){const an=Ze._ceVNode||createVNode(ke,Oe);return an.appContext=Ge,tn===!0?tn="svg":tn===!1&&(tn=void 0),en&&e?e(an,Qe):r(an,Qe,tn),Ve=!0,Ze._container=Qe,Qe.__vue_app__=Ze,getComponentPublicInstance(an.component)}},onUnmount(Qe){je.push(Qe)},unmount(){Ve&&(callWithAsyncErrorHandling(je,Ze._instance,16),r(null,Ze._container),delete Ze._container.__vue_app__)},provide(Qe,en){return Ge.provides[Qe]=en,Ze},runWithContext(Qe){const en=currentApp;currentApp=Ze;try{return Qe()}finally{currentApp=en}}};return Ze}}let currentApp=null;function provide(r,e){if(currentInstance){let t=currentInstance.provides;const ke=currentInstance.parent&&currentInstance.parent.provides;ke===t&&(t=currentInstance.provides=Object.create(ke)),t[r]=e}}function inject(r,e,t=!1){const ke=currentInstance||currentRenderingInstance;if(ke||currentApp){const Oe=currentApp?currentApp._context.provides:ke?ke.parent==null?ke.vnode.appContext&&ke.vnode.appContext.provides:ke.parent.provides:void 0;if(Oe&&r in Oe)return Oe[r];if(arguments.length>1)return t&&isFunction$1(e)?e.call(ke&&ke.proxy):e}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=r=>Object.getPrototypeOf(r)===internalObjectProto;function initProps(r,e,t,ke=!1){const Oe={},Ge=createInternalObject();r.propsDefaults=Object.create(null),setFullProps(r,e,Oe,Ge);for(const Be in r.propsOptions[0])Be in Oe||(Oe[Be]=void 0);t?r.props=ke?Oe:shallowReactive(Oe):r.type.props?r.props=Oe:r.props=Ge,r.attrs=Ge}function updateProps(r,e,t,ke){const{props:Oe,attrs:Ge,vnode:{patchFlag:Be}}=r,je=toRaw(Oe),[Ve]=r.propsOptions;let Ze=!1;if((ke||Be>0)&&!(Be&16)){if(Be&8){const Qe=r.vnode.dynamicProps;for(let en=0;en<Qe.length;en++){let tn=Qe[en];if(isEmitListener(r.emitsOptions,tn))continue;const an=e[tn];if(Ve)if(hasOwn(Ge,tn))an!==Ge[tn]&&(Ge[tn]=an,Ze=!0);else{const cn=camelize(tn);Oe[cn]=resolvePropValue(Ve,je,cn,an,r,!1)}else an!==Ge[tn]&&(Ge[tn]=an,Ze=!0)}}}else{setFullProps(r,e,Oe,Ge)&&(Ze=!0);let Qe;for(const en in je)(!e||!hasOwn(e,en)&&((Qe=hyphenate(en))===en||!hasOwn(e,Qe)))&&(Ve?t&&(t[en]!==void 0||t[Qe]!==void 0)&&(Oe[en]=resolvePropValue(Ve,je,en,void 0,r,!0)):delete Oe[en]);if(Ge!==je)for(const en in Ge)(!e||!hasOwn(e,en))&&(delete Ge[en],Ze=!0)}Ze&&trigger(r.attrs,"set","")}function setFullProps(r,e,t,ke){const[Oe,Ge]=r.propsOptions;let Be=!1,je;if(e)for(let Ve in e){if(isReservedProp(Ve))continue;const Ze=e[Ve];let Qe;Oe&&hasOwn(Oe,Qe=camelize(Ve))?!Ge||!Ge.includes(Qe)?t[Qe]=Ze:(je||(je={}))[Qe]=Ze:isEmitListener(r.emitsOptions,Ve)||(!(Ve in ke)||Ze!==ke[Ve])&&(ke[Ve]=Ze,Be=!0)}if(Ge){const Ve=toRaw(t),Ze=je||EMPTY_OBJ;for(let Qe=0;Qe<Ge.length;Qe++){const en=Ge[Qe];t[en]=resolvePropValue(Oe,Ve,en,Ze[en],r,!hasOwn(Ze,en))}}return Be}function resolvePropValue(r,e,t,ke,Oe,Ge){const Be=r[t];if(Be!=null){const je=hasOwn(Be,"default");if(je&&ke===void 0){const Ve=Be.default;if(Be.type!==Function&&!Be.skipFactory&&isFunction$1(Ve)){const{propsDefaults:Ze}=Oe;if(t in Ze)ke=Ze[t];else{const Qe=setCurrentInstance(Oe);ke=Ze[t]=Ve.call(null,e),Qe()}}else ke=Ve;Oe.ce&&Oe.ce._setProp(t,ke)}Be[0]&&(Ge&&!je?ke=!1:Be[1]&&(ke===""||ke===hyphenate(t))&&(ke=!0))}return ke}const mixinPropsCache=new WeakMap;function normalizePropsOptions(r,e,t=!1){const ke=t?mixinPropsCache:e.propsCache,Oe=ke.get(r);if(Oe)return Oe;const Ge=r.props,Be={},je=[];let Ve=!1;if(!isFunction$1(r)){const Qe=en=>{Ve=!0;const[tn,an]=normalizePropsOptions(en,e,!0);extend$5(Be,tn),an&&je.push(...an)};!t&&e.mixins.length&&e.mixins.forEach(Qe),r.extends&&Qe(r.extends),r.mixins&&r.mixins.forEach(Qe)}if(!Ge&&!Ve)return isObject$1(r)&&ke.set(r,EMPTY_ARR),EMPTY_ARR;if(isArray$1(Ge))for(let Qe=0;Qe<Ge.length;Qe++){const en=camelize(Ge[Qe]);validatePropName(en)&&(Be[en]=EMPTY_OBJ)}else if(Ge)for(const Qe in Ge){const en=camelize(Qe);if(validatePropName(en)){const tn=Ge[Qe],an=Be[en]=isArray$1(tn)||isFunction$1(tn)?{type:tn}:extend$5({},tn),cn=an.type;let dn=!1,hn=!0;if(isArray$1(cn))for(let fn=0;fn<cn.length;++fn){const pn=cn[fn],mn=isFunction$1(pn)&&pn.name;if(mn==="Boolean"){dn=!0;break}else mn==="String"&&(hn=!1)}else dn=isFunction$1(cn)&&cn.name==="Boolean";an[0]=dn,an[1]=hn,(dn||hasOwn(an,"default"))&&je.push(en)}}const Ze=[Be,je];return isObject$1(r)&&ke.set(r,Ze),Ze}function validatePropName(r){return r[0]!=="$"&&!isReservedProp(r)}const isInternalKey=r=>r[0]==="_"||r==="$stable",normalizeSlotValue=r=>isArray$1(r)?r.map(normalizeVNode):[normalizeVNode(r)],normalizeSlot$1=(r,e,t)=>{if(e._n)return e;const ke=withCtx((...Oe)=>normalizeSlotValue(e(...Oe)),t);return ke._c=!1,ke},normalizeObjectSlots=(r,e,t)=>{const ke=r._ctx;for(const Oe in r){if(isInternalKey(Oe))continue;const Ge=r[Oe];if(isFunction$1(Ge))e[Oe]=normalizeSlot$1(Oe,Ge,ke);else if(Ge!=null){const Be=normalizeSlotValue(Ge);e[Oe]=()=>Be}}},normalizeVNodeSlots=(r,e)=>{const t=normalizeSlotValue(e);r.slots.default=()=>t},assignSlots=(r,e,t)=>{for(const ke in e)(t||ke!=="_")&&(r[ke]=e[ke])},initSlots=(r,e,t)=>{const ke=r.slots=createInternalObject();if(r.vnode.shapeFlag&32){const Oe=e._;Oe?(assignSlots(ke,e,t),t&&def(ke,"_",Oe,!0)):normalizeObjectSlots(e,ke)}else e&&normalizeVNodeSlots(r,e)},updateSlots=(r,e,t)=>{const{vnode:ke,slots:Oe}=r;let Ge=!0,Be=EMPTY_OBJ;if(ke.shapeFlag&32){const je=e._;je?t&&je===1?Ge=!1:assignSlots(Oe,e,t):(Ge=!e.$stable,normalizeObjectSlots(e,Oe)),Be=e}else e&&(normalizeVNodeSlots(r,e),Be={default:1});if(Ge)for(const je in Oe)!isInternalKey(je)&&Be[je]==null&&delete Oe[je]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(r){return baseCreateRenderer(r)}function createHydrationRenderer(r){return baseCreateRenderer(r,createHydrationFunctions)}function baseCreateRenderer(r,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:ke,remove:Oe,patchProp:Ge,createElement:Be,createText:je,createComment:Ve,setText:Ze,setElementText:Qe,parentNode:en,nextSibling:tn,setScopeId:an=NOOP,insertStaticContent:cn}=r,dn=(Un,Qn,Hn,Fn=null,Hi=null,zi=null,Oi=void 0,Vi=null,Bi=!!Qn.dynamicChildren)=>{if(Un===Qn)return;Un&&!isSameVNodeType(Un,Qn)&&(Fn=Kn(Un),xn(Un,Hi,zi,!0),Un=null),Qn.patchFlag===-2&&(Bi=!1,Qn.dynamicChildren=null);const{type:Fi,ref:Si,shapeFlag:Li}=Qn;switch(Fi){case Text$1:hn(Un,Qn,Hn,Fn);break;case Comment:fn(Un,Qn,Hn,Fn);break;case Static:Un==null&&pn(Qn,Hn,Fn,Oi);break;case Fragment:An(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi);break;default:Li&1?Cn(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi):Li&6?Ln(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi):(Li&64||Li&128)&&Fi.process(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi,Mi)}Si!=null&&Hi&&setRef(Si,Un&&Un.ref,zi,Qn||Un,!Qn)},hn=(Un,Qn,Hn,Fn)=>{if(Un==null)ke(Qn.el=je(Qn.children),Hn,Fn);else{const Hi=Qn.el=Un.el;Qn.children!==Un.children&&Ze(Hi,Qn.children)}},fn=(Un,Qn,Hn,Fn)=>{Un==null?ke(Qn.el=Ve(Qn.children||""),Hn,Fn):Qn.el=Un.el},pn=(Un,Qn,Hn,Fn)=>{[Un.el,Un.anchor]=cn(Un.children,Qn,Hn,Fn,Un.el,Un.anchor)},mn=({el:Un,anchor:Qn},Hn,Fn)=>{let Hi;for(;Un&&Un!==Qn;)Hi=tn(Un),ke(Un,Hn,Fn),Un=Hi;ke(Qn,Hn,Fn)},yn=({el:Un,anchor:Qn})=>{let Hn;for(;Un&&Un!==Qn;)Hn=tn(Un),Oe(Un),Un=Hn;Oe(Qn)},Cn=(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi)=>{Qn.type==="svg"?Oi="svg":Qn.type==="math"&&(Oi="mathml"),Un==null?wn(Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi):Mn(Un,Qn,Hi,zi,Oi,Vi,Bi)},wn=(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi)=>{let Bi,Fi;const{props:Si,shapeFlag:Li,transition:Ri,dirs:$i}=Un;if(Bi=Un.el=Be(Un.type,zi,Si&&Si.is,Si),Li&8?Qe(Bi,Un.children):Li&16&&Sn(Un.children,Bi,null,Fn,Hi,resolveChildrenNamespace(Un,zi),Oi,Vi),$i&&invokeDirectiveHook(Un,null,Fn,"created"),bn(Bi,Un,Un.scopeId,Oi,Fn),Si){for(const ar in Si)ar!=="value"&&!isReservedProp(ar)&&Ge(Bi,ar,null,Si[ar],zi,Fn);"value"in Si&&Ge(Bi,"value",null,Si.value,zi),(Fi=Si.onVnodeBeforeMount)&&invokeVNodeHook(Fi,Fn,Un)}$i&&invokeDirectiveHook(Un,null,Fn,"beforeMount");const er=needTransition(Hi,Ri);er&&Ri.beforeEnter(Bi),ke(Bi,Qn,Hn),((Fi=Si&&Si.onVnodeMounted)||er||$i)&&queuePostRenderEffect(()=>{Fi&&invokeVNodeHook(Fi,Fn,Un),er&&Ri.enter(Bi),$i&&invokeDirectiveHook(Un,null,Fn,"mounted")},Hi)},bn=(Un,Qn,Hn,Fn,Hi)=>{if(Hn&&an(Un,Hn),Fn)for(let zi=0;zi<Fn.length;zi++)an(Un,Fn[zi]);if(Hi){let zi=Hi.subTree;if(Qn===zi||isSuspense(zi.type)&&(zi.ssContent===Qn||zi.ssFallback===Qn)){const Oi=Hi.vnode;bn(Un,Oi,Oi.scopeId,Oi.slotScopeIds,Hi.parent)}}},Sn=(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi=0)=>{for(let Fi=Bi;Fi<Un.length;Fi++){const Si=Un[Fi]=Vi?cloneIfMounted(Un[Fi]):normalizeVNode(Un[Fi]);dn(null,Si,Qn,Hn,Fn,Hi,zi,Oi,Vi)}},Mn=(Un,Qn,Hn,Fn,Hi,zi,Oi)=>{const Vi=Qn.el=Un.el;let{patchFlag:Bi,dynamicChildren:Fi,dirs:Si}=Qn;Bi|=Un.patchFlag&16;const Li=Un.props||EMPTY_OBJ,Ri=Qn.props||EMPTY_OBJ;let $i;if(Hn&&toggleRecurse(Hn,!1),($i=Ri.onVnodeBeforeUpdate)&&invokeVNodeHook($i,Hn,Qn,Un),Si&&invokeDirectiveHook(Qn,Un,Hn,"beforeUpdate"),Hn&&toggleRecurse(Hn,!0),(Li.innerHTML&&Ri.innerHTML==null||Li.textContent&&Ri.textContent==null)&&Qe(Vi,""),Fi?Tn(Un.dynamicChildren,Fi,Vi,Hn,Fn,resolveChildrenNamespace(Qn,Hi),zi):Oi||Dn(Un,Qn,Vi,null,Hn,Fn,resolveChildrenNamespace(Qn,Hi),zi,!1),Bi>0){if(Bi&16)En(Vi,Li,Ri,Hn,Hi);else if(Bi&2&&Li.class!==Ri.class&&Ge(Vi,"class",null,Ri.class,Hi),Bi&4&&Ge(Vi,"style",Li.style,Ri.style,Hi),Bi&8){const er=Qn.dynamicProps;for(let ar=0;ar<er.length;ar++){const Rr=er[ar],Gs=Li[Rr],Pr=Ri[Rr];(Pr!==Gs||Rr==="value")&&Ge(Vi,Rr,Gs,Pr,Hi,Hn)}}Bi&1&&Un.children!==Qn.children&&Qe(Vi,Qn.children)}else!Oi&&Fi==null&&En(Vi,Li,Ri,Hn,Hi);(($i=Ri.onVnodeUpdated)||Si)&&queuePostRenderEffect(()=>{$i&&invokeVNodeHook($i,Hn,Qn,Un),Si&&invokeDirectiveHook(Qn,Un,Hn,"updated")},Fn)},Tn=(Un,Qn,Hn,Fn,Hi,zi,Oi)=>{for(let Vi=0;Vi<Qn.length;Vi++){const Bi=Un[Vi],Fi=Qn[Vi],Si=Bi.el&&(Bi.type===Fragment||!isSameVNodeType(Bi,Fi)||Bi.shapeFlag&70)?en(Bi.el):Hn;dn(Bi,Fi,Si,null,Fn,Hi,zi,Oi,!0)}},En=(Un,Qn,Hn,Fn,Hi)=>{if(Qn!==Hn){if(Qn!==EMPTY_OBJ)for(const zi in Qn)!isReservedProp(zi)&&!(zi in Hn)&&Ge(Un,zi,Qn[zi],null,Hi,Fn);for(const zi in Hn){if(isReservedProp(zi))continue;const Oi=Hn[zi],Vi=Qn[zi];Oi!==Vi&&zi!=="value"&&Ge(Un,zi,Vi,Oi,Hi,Fn)}"value"in Hn&&Ge(Un,"value",Qn.value,Hn.value,Hi)}},An=(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi)=>{const Fi=Qn.el=Un?Un.el:je(""),Si=Qn.anchor=Un?Un.anchor:je("");let{patchFlag:Li,dynamicChildren:Ri,slotScopeIds:$i}=Qn;$i&&(Vi=Vi?Vi.concat($i):$i),Un==null?(ke(Fi,Hn,Fn),ke(Si,Hn,Fn),Sn(Qn.children||[],Hn,Si,Hi,zi,Oi,Vi,Bi)):Li>0&&Li&64&&Ri&&Un.dynamicChildren?(Tn(Un.dynamicChildren,Ri,Hn,Hi,zi,Oi,Vi),(Qn.key!=null||Hi&&Qn===Hi.subTree)&&traverseStaticChildren(Un,Qn,!0)):Dn(Un,Qn,Hn,Si,Hi,zi,Oi,Vi,Bi)},Ln=(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi)=>{Qn.slotScopeIds=Vi,Un==null?Qn.shapeFlag&512?Hi.ctx.activate(Qn,Hn,Fn,Oi,Bi):Rn(Qn,Hn,Fn,Hi,zi,Oi,Bi):Gn(Un,Qn,Bi)},Rn=(Un,Qn,Hn,Fn,Hi,zi,Oi)=>{const Vi=Un.component=createComponentInstance(Un,Fn,Hi);if(isKeepAlive(Un)&&(Vi.ctx.renderer=Mi),setupComponent(Vi,!1,Oi),Vi.asyncDep){if(Hi&&Hi.registerDep(Vi,Nn,Oi),!Un.el){const Bi=Vi.subTree=createVNode(Comment);fn(null,Bi,Qn,Hn)}}else Nn(Vi,Un,Qn,Hn,Hi,zi,Oi)},Gn=(Un,Qn,Hn)=>{const Fn=Qn.component=Un.component;if(shouldUpdateComponent(Un,Qn,Hn))if(Fn.asyncDep&&!Fn.asyncResolved){jn(Fn,Qn,Hn);return}else Fn.next=Qn,Fn.update();else Qn.el=Un.el,Fn.vnode=Qn},Nn=(Un,Qn,Hn,Fn,Hi,zi,Oi)=>{const Vi=()=>{if(Un.isMounted){let{next:Li,bu:Ri,u:$i,parent:er,vnode:ar}=Un;{const Zs=locateNonHydratedAsyncRoot(Un);if(Zs){Li&&(Li.el=ar.el,jn(Un,Li,Oi)),Zs.asyncDep.then(()=>{Un.isUnmounted||Vi()});return}}let Rr=Li,Gs;toggleRecurse(Un,!1),Li?(Li.el=ar.el,jn(Un,Li,Oi)):Li=ar,Ri&&invokeArrayFns(Ri),(Gs=Li.props&&Li.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Gs,er,Li,ar),toggleRecurse(Un,!0);const Pr=renderComponentRoot(Un),no=Un.subTree;Un.subTree=Pr,dn(no,Pr,en(no.el),Kn(no),Un,Hi,zi),Li.el=Pr.el,Rr===null&&updateHOCHostEl(Un,Pr.el),$i&&queuePostRenderEffect($i,Hi),(Gs=Li.props&&Li.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Gs,er,Li,ar),Hi)}else{let Li;const{el:Ri,props:$i}=Qn,{bm:er,m:ar,parent:Rr,root:Gs,type:Pr}=Un,no=isAsyncWrapper(Qn);if(toggleRecurse(Un,!1),er&&invokeArrayFns(er),!no&&(Li=$i&&$i.onVnodeBeforeMount)&&invokeVNodeHook(Li,Rr,Qn),toggleRecurse(Un,!0),Ri&&Br){const Zs=()=>{Un.subTree=renderComponentRoot(Un),Br(Ri,Un.subTree,Un,Hi,null)};no&&Pr.__asyncHydrate?Pr.__asyncHydrate(Ri,Un,Zs):Zs()}else{Gs.ce&&Gs.ce._injectChildStyle(Pr);const Zs=Un.subTree=renderComponentRoot(Un);dn(null,Zs,Hn,Fn,Un,Hi,zi),Qn.el=Zs.el}if(ar&&queuePostRenderEffect(ar,Hi),!no&&(Li=$i&&$i.onVnodeMounted)){const Zs=Qn;queuePostRenderEffect(()=>invokeVNodeHook(Li,Rr,Zs),Hi)}(Qn.shapeFlag&256||Rr&&isAsyncWrapper(Rr.vnode)&&Rr.vnode.shapeFlag&256)&&Un.a&&queuePostRenderEffect(Un.a,Hi),Un.isMounted=!0,Qn=Hn=Fn=null}};Un.scope.on();const Bi=Un.effect=new ReactiveEffect(Vi);Un.scope.off();const Fi=Un.update=Bi.run.bind(Bi),Si=Un.job=Bi.runIfDirty.bind(Bi);Si.i=Un,Si.id=Un.uid,Bi.scheduler=()=>queueJob(Si),toggleRecurse(Un,!0),Fi()},jn=(Un,Qn,Hn)=>{Qn.component=Un;const Fn=Un.vnode.props;Un.vnode=Qn,Un.next=null,updateProps(Un,Qn.props,Fn,Hn),updateSlots(Un,Qn.children,Hn),pauseTracking(),flushPreFlushCbs(Un),resetTracking()},Dn=(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi=!1)=>{const Fi=Un&&Un.children,Si=Un?Un.shapeFlag:0,Li=Qn.children,{patchFlag:Ri,shapeFlag:$i}=Qn;if(Ri>0){if(Ri&128){Jn(Fi,Li,Hn,Fn,Hi,zi,Oi,Vi,Bi);return}else if(Ri&256){Ci(Fi,Li,Hn,Fn,Hi,zi,Oi,Vi,Bi);return}}$i&8?(Si&16&&Ti(Fi,Hi,zi),Li!==Fi&&Qe(Hn,Li)):Si&16?$i&16?Jn(Fi,Li,Hn,Fn,Hi,zi,Oi,Vi,Bi):Ti(Fi,Hi,zi,!0):(Si&8&&Qe(Hn,""),$i&16&&Sn(Li,Hn,Fn,Hi,zi,Oi,Vi,Bi))},Ci=(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi)=>{Un=Un||EMPTY_ARR,Qn=Qn||EMPTY_ARR;const Fi=Un.length,Si=Qn.length,Li=Math.min(Fi,Si);let Ri;for(Ri=0;Ri<Li;Ri++){const $i=Qn[Ri]=Bi?cloneIfMounted(Qn[Ri]):normalizeVNode(Qn[Ri]);dn(Un[Ri],$i,Hn,null,Hi,zi,Oi,Vi,Bi)}Fi>Si?Ti(Un,Hi,zi,!0,!1,Li):Sn(Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi,Li)},Jn=(Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi)=>{let Fi=0;const Si=Qn.length;let Li=Un.length-1,Ri=Si-1;for(;Fi<=Li&&Fi<=Ri;){const $i=Un[Fi],er=Qn[Fi]=Bi?cloneIfMounted(Qn[Fi]):normalizeVNode(Qn[Fi]);if(isSameVNodeType($i,er))dn($i,er,Hn,null,Hi,zi,Oi,Vi,Bi);else break;Fi++}for(;Fi<=Li&&Fi<=Ri;){const $i=Un[Li],er=Qn[Ri]=Bi?cloneIfMounted(Qn[Ri]):normalizeVNode(Qn[Ri]);if(isSameVNodeType($i,er))dn($i,er,Hn,null,Hi,zi,Oi,Vi,Bi);else break;Li--,Ri--}if(Fi>Li){if(Fi<=Ri){const $i=Ri+1,er=$i<Si?Qn[$i].el:Fn;for(;Fi<=Ri;)dn(null,Qn[Fi]=Bi?cloneIfMounted(Qn[Fi]):normalizeVNode(Qn[Fi]),Hn,er,Hi,zi,Oi,Vi,Bi),Fi++}}else if(Fi>Ri)for(;Fi<=Li;)xn(Un[Fi],Hi,zi,!0),Fi++;else{const $i=Fi,er=Fi,ar=new Map;for(Fi=er;Fi<=Ri;Fi++){const Ws=Qn[Fi]=Bi?cloneIfMounted(Qn[Fi]):normalizeVNode(Qn[Fi]);Ws.key!=null&&ar.set(Ws.key,Fi)}let Rr,Gs=0;const Pr=Ri-er+1;let no=!1,Zs=0;const ho=new Array(Pr);for(Fi=0;Fi<Pr;Fi++)ho[Fi]=0;for(Fi=$i;Fi<=Li;Fi++){const Ws=Un[Fi];if(Gs>=Pr){xn(Ws,Hi,zi,!0);continue}let oo;if(Ws.key!=null)oo=ar.get(Ws.key);else for(Rr=er;Rr<=Ri;Rr++)if(ho[Rr-er]===0&&isSameVNodeType(Ws,Qn[Rr])){oo=Rr;break}oo===void 0?xn(Ws,Hi,zi,!0):(ho[oo-er]=Fi+1,oo>=Zs?Zs=oo:no=!0,dn(Ws,Qn[oo],Hn,null,Hi,zi,Oi,Vi,Bi),Gs++)}const co=no?getSequence(ho):EMPTY_ARR;for(Rr=co.length-1,Fi=Pr-1;Fi>=0;Fi--){const Ws=er+Fi,oo=Qn[Ws],to=Ws+1<Si?Qn[Ws+1].el:Fn;ho[Fi]===0?dn(null,oo,Hn,to,Hi,zi,Oi,Vi,Bi):no&&(Rr<0||Fi!==co[Rr]?Ki(oo,Hn,to,2):Rr--)}}},Ki=(Un,Qn,Hn,Fn,Hi=null)=>{const{el:zi,type:Oi,transition:Vi,children:Bi,shapeFlag:Fi}=Un;if(Fi&6){Ki(Un.component.subTree,Qn,Hn,Fn);return}if(Fi&128){Un.suspense.move(Qn,Hn,Fn);return}if(Fi&64){Oi.move(Un,Qn,Hn,Mi);return}if(Oi===Fragment){ke(zi,Qn,Hn);for(let Li=0;Li<Bi.length;Li++)Ki(Bi[Li],Qn,Hn,Fn);ke(Un.anchor,Qn,Hn);return}if(Oi===Static){mn(Un,Qn,Hn);return}if(Fn!==2&&Fi&1&&Vi)if(Fn===0)Vi.beforeEnter(zi),ke(zi,Qn,Hn),queuePostRenderEffect(()=>Vi.enter(zi),Hi);else{const{leave:Li,delayLeave:Ri,afterLeave:$i}=Vi,er=()=>ke(zi,Qn,Hn),ar=()=>{Li(zi,()=>{er(),$i&&$i()})};Ri?Ri(zi,er,ar):ar()}else ke(zi,Qn,Hn)},xn=(Un,Qn,Hn,Fn=!1,Hi=!1)=>{const{type:zi,props:Oi,ref:Vi,children:Bi,dynamicChildren:Fi,shapeFlag:Si,patchFlag:Li,dirs:Ri,cacheIndex:$i}=Un;if(Li===-2&&(Hi=!1),Vi!=null&&setRef(Vi,null,Hn,Un,!0),$i!=null&&(Qn.renderCache[$i]=void 0),Si&256){Qn.ctx.deactivate(Un);return}const er=Si&1&&Ri,ar=!isAsyncWrapper(Un);let Rr;if(ar&&(Rr=Oi&&Oi.onVnodeBeforeUnmount)&&invokeVNodeHook(Rr,Qn,Un),Si&6)Ai(Un.component,Hn,Fn);else{if(Si&128){Un.suspense.unmount(Hn,Fn);return}er&&invokeDirectiveHook(Un,null,Qn,"beforeUnmount"),Si&64?Un.type.remove(Un,Qn,Hn,Mi,Fn):Fi&&!Fi.hasOnce&&(zi!==Fragment||Li>0&&Li&64)?Ti(Fi,Qn,Hn,!1,!0):(zi===Fragment&&Li&384||!Hi&&Si&16)&&Ti(Bi,Qn,Hn),Fn&&qn(Un)}(ar&&(Rr=Oi&&Oi.onVnodeUnmounted)||er)&&queuePostRenderEffect(()=>{Rr&&invokeVNodeHook(Rr,Qn,Un),er&&invokeDirectiveHook(Un,null,Qn,"unmounted")},Hn)},qn=Un=>{const{type:Qn,el:Hn,anchor:Fn,transition:Hi}=Un;if(Qn===Fragment){$n(Hn,Fn);return}if(Qn===Static){yn(Un);return}const zi=()=>{Oe(Hn),Hi&&!Hi.persisted&&Hi.afterLeave&&Hi.afterLeave()};if(Un.shapeFlag&1&&Hi&&!Hi.persisted){const{leave:Oi,delayLeave:Vi}=Hi,Bi=()=>Oi(Hn,zi);Vi?Vi(Un.el,zi,Bi):Bi()}else zi()},$n=(Un,Qn)=>{let Hn;for(;Un!==Qn;)Hn=tn(Un),Oe(Un),Un=Hn;Oe(Qn)},Ai=(Un,Qn,Hn)=>{const{bum:Fn,scope:Hi,job:zi,subTree:Oi,um:Vi,m:Bi,a:Fi}=Un;invalidateMount(Bi),invalidateMount(Fi),Fn&&invokeArrayFns(Fn),Hi.stop(),zi&&(zi.flags|=8,xn(Oi,Un,Qn,Hn)),Vi&&queuePostRenderEffect(Vi,Qn),queuePostRenderEffect(()=>{Un.isUnmounted=!0},Qn),Qn&&Qn.pendingBranch&&!Qn.isUnmounted&&Un.asyncDep&&!Un.asyncResolved&&Un.suspenseId===Qn.pendingId&&(Qn.deps--,Qn.deps===0&&Qn.resolve())},Ti=(Un,Qn,Hn,Fn=!1,Hi=!1,zi=0)=>{for(let Oi=zi;Oi<Un.length;Oi++)xn(Un[Oi],Qn,Hn,Fn,Hi)},Kn=Un=>{if(Un.shapeFlag&6)return Kn(Un.component.subTree);if(Un.shapeFlag&128)return Un.suspense.next();const Qn=tn(Un.anchor||Un.el),Hn=Qn&&Qn[TeleportEndKey];return Hn?tn(Hn):Qn};let Ii=!1;const Pi=(Un,Qn,Hn)=>{Un==null?Qn._vnode&&xn(Qn._vnode,null,null,!0):dn(Qn._vnode||null,Un,Qn,null,null,null,Hn),Qn._vnode=Un,Ii||(Ii=!0,flushPreFlushCbs(),flushPostFlushCbs(),Ii=!1)},Mi={p:dn,um:xn,m:Ki,r:qn,mt:Rn,mc:Sn,pc:Dn,pbc:Tn,n:Kn,o:r};let tr,Br;return e&&([tr,Br]=e(Mi)),{render:Pi,hydrate:tr,createApp:createAppAPI(Pi,tr)}}function resolveChildrenNamespace({type:r,props:e},t){return t==="svg"&&r==="foreignObject"||t==="mathml"&&r==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function toggleRecurse({effect:r,job:e},t){t?(r.flags|=32,e.flags|=4):(r.flags&=-33,e.flags&=-5)}function needTransition(r,e){return(!r||r&&!r.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(r,e,t=!1){const ke=r.children,Oe=e.children;if(isArray$1(ke)&&isArray$1(Oe))for(let Ge=0;Ge<ke.length;Ge++){const Be=ke[Ge];let je=Oe[Ge];je.shapeFlag&1&&!je.dynamicChildren&&((je.patchFlag<=0||je.patchFlag===32)&&(je=Oe[Ge]=cloneIfMounted(Oe[Ge]),je.el=Be.el),!t&&je.patchFlag!==-2&&traverseStaticChildren(Be,je)),je.type===Text$1&&(je.el=Be.el)}}function getSequence(r){const e=r.slice(),t=[0];let ke,Oe,Ge,Be,je;const Ve=r.length;for(ke=0;ke<Ve;ke++){const Ze=r[ke];if(Ze!==0){if(Oe=t[t.length-1],r[Oe]<Ze){e[ke]=Oe,t.push(ke);continue}for(Ge=0,Be=t.length-1;Ge<Be;)je=Ge+Be>>1,r[t[je]]<Ze?Ge=je+1:Be=je;Ze<r[t[Ge]]&&(Ge>0&&(e[ke]=t[Ge-1]),t[Ge]=ke)}}for(Ge=t.length,Be=t[Ge-1];Ge-- >0;)t[Ge]=Be,Be=e[Be];return t}function locateNonHydratedAsyncRoot(r){const e=r.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(r){if(r)for(let e=0;e<r.length;e++)r[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(r,e){return doWatch(r,null,e)}function watchPostEffect(r,e){return doWatch(r,null,{flush:"post"})}function watchSyncEffect(r,e){return doWatch(r,null,{flush:"sync"})}function watch(r,e,t){return doWatch(r,e,t)}function doWatch(r,e,t=EMPTY_OBJ){const{immediate:ke,deep:Oe,flush:Ge,once:Be}=t,je=extend$5({},t),Ve=e&&ke||!e&&Ge!=="post";let Ze;if(isInSSRComponentSetup){if(Ge==="sync"){const an=useSSRContext();Ze=an.__watcherHandles||(an.__watcherHandles=[])}else if(!Ve){const an=()=>{};return an.stop=NOOP,an.resume=NOOP,an.pause=NOOP,an}}const Qe=currentInstance;je.call=(an,cn,dn)=>callWithAsyncErrorHandling(an,Qe,cn,dn);let en=!1;Ge==="post"?je.scheduler=an=>{queuePostRenderEffect(an,Qe&&Qe.suspense)}:Ge!=="sync"&&(en=!0,je.scheduler=(an,cn)=>{cn?an():queueJob(an)}),je.augmentJob=an=>{e&&(an.flags|=4),en&&(an.flags|=2,Qe&&(an.id=Qe.uid,an.i=Qe))};const tn=watch$1(r,e,je);return isInSSRComponentSetup&&(Ze?Ze.push(tn):Ve&&tn()),tn}function instanceWatch(r,e,t){const ke=this.proxy,Oe=isString(r)?r.includes(".")?createPathGetter(ke,r):()=>ke[r]:r.bind(ke,ke);let Ge;isFunction$1(e)?Ge=e:(Ge=e.handler,t=e);const Be=setCurrentInstance(this),je=doWatch(Oe,Ge.bind(ke),t);return Be(),je}function createPathGetter(r,e){const t=e.split(".");return()=>{let ke=r;for(let Oe=0;Oe<t.length&&ke;Oe++)ke=ke[t[Oe]];return ke}}function useModel(r,e,t=EMPTY_OBJ){const ke=getCurrentInstance(),Oe=camelize(e),Ge=hyphenate(e),Be=getModelModifiers(r,Oe),je=customRef((Ve,Ze)=>{let Qe,en=EMPTY_OBJ,tn;return watchSyncEffect(()=>{const an=r[Oe];hasChanged(Qe,an)&&(Qe=an,Ze())}),{get(){return Ve(),t.get?t.get(Qe):Qe},set(an){const cn=t.set?t.set(an):an;if(!hasChanged(cn,Qe)&&!(en!==EMPTY_OBJ&&hasChanged(an,en)))return;const dn=ke.vnode.props;dn&&(e in dn||Oe in dn||Ge in dn)&&(`onUpdate:${e}`in dn||`onUpdate:${Oe}`in dn||`onUpdate:${Ge}`in dn)||(Qe=an,Ze()),ke.emit(`update:${e}`,cn),hasChanged(an,cn)&&hasChanged(an,en)&&!hasChanged(cn,tn)&&Ze(),en=an,tn=cn}}});return je[Symbol.iterator]=()=>{let Ve=0;return{next(){return Ve<2?{value:Ve++?Be||EMPTY_OBJ:je,done:!1}:{done:!0}}}},je}const getModelModifiers=(r,e)=>e==="modelValue"||e==="model-value"?r.modelModifiers:r[`${e}Modifiers`]||r[`${camelize(e)}Modifiers`]||r[`${hyphenate(e)}Modifiers`];function emit(r,e,...t){if(r.isUnmounted)return;const ke=r.vnode.props||EMPTY_OBJ;let Oe=t;const Ge=e.startsWith("update:"),Be=Ge&&getModelModifiers(ke,e.slice(7));Be&&(Be.trim&&(Oe=t.map(Qe=>isString(Qe)?Qe.trim():Qe)),Be.number&&(Oe=t.map(looseToNumber)));let je,Ve=ke[je=toHandlerKey(e)]||ke[je=toHandlerKey(camelize(e))];!Ve&&Ge&&(Ve=ke[je=toHandlerKey(hyphenate(e))]),Ve&&callWithAsyncErrorHandling(Ve,r,6,Oe);const Ze=ke[je+"Once"];if(Ze){if(!r.emitted)r.emitted={};else if(r.emitted[je])return;r.emitted[je]=!0,callWithAsyncErrorHandling(Ze,r,6,Oe)}}function normalizeEmitsOptions(r,e,t=!1){const ke=e.emitsCache,Oe=ke.get(r);if(Oe!==void 0)return Oe;const Ge=r.emits;let Be={},je=!1;if(!isFunction$1(r)){const Ve=Ze=>{const Qe=normalizeEmitsOptions(Ze,e,!0);Qe&&(je=!0,extend$5(Be,Qe))};!t&&e.mixins.length&&e.mixins.forEach(Ve),r.extends&&Ve(r.extends),r.mixins&&r.mixins.forEach(Ve)}return!Ge&&!je?(isObject$1(r)&&ke.set(r,null),null):(isArray$1(Ge)?Ge.forEach(Ve=>Be[Ve]=null):extend$5(Be,Ge),isObject$1(r)&&ke.set(r,Be),Be)}function isEmitListener(r,e){return!r||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(r,e[0].toLowerCase()+e.slice(1))||hasOwn(r,hyphenate(e))||hasOwn(r,e))}function markAttrsAccessed(){}function renderComponentRoot(r){const{type:e,vnode:t,proxy:ke,withProxy:Oe,propsOptions:[Ge],slots:Be,attrs:je,emit:Ve,render:Ze,renderCache:Qe,props:en,data:tn,setupState:an,ctx:cn,inheritAttrs:dn}=r,hn=setCurrentRenderingInstance(r);let fn,pn;try{if(t.shapeFlag&4){const yn=Oe||ke,Cn=yn;fn=normalizeVNode(Ze.call(Cn,yn,Qe,en,an,tn,cn)),pn=je}else{const yn=e;fn=normalizeVNode(yn.length>1?yn(en,{attrs:je,slots:Be,emit:Ve}):yn(en,null)),pn=e.props?je:getFunctionalFallthrough(je)}}catch(yn){blockStack.length=0,handleError(yn,r,1),fn=createVNode(Comment)}let mn=fn;if(pn&&dn!==!1){const yn=Object.keys(pn),{shapeFlag:Cn}=mn;yn.length&&Cn&7&&(Ge&&yn.some(isModelListener)&&(pn=filterModelListeners(pn,Ge)),mn=cloneVNode(mn,pn,!1,!0))}return t.dirs&&(mn=cloneVNode(mn,null,!1,!0),mn.dirs=mn.dirs?mn.dirs.concat(t.dirs):t.dirs),t.transition&&setTransitionHooks(mn,t.transition),fn=mn,setCurrentRenderingInstance(hn),fn}function filterSingleRoot(r,e=!0){let t;for(let ke=0;ke<r.length;ke++){const Oe=r[ke];if(isVNode(Oe)){if(Oe.type!==Comment||Oe.children==="v-if"){if(t)return;t=Oe}}else return}return t}const getFunctionalFallthrough=r=>{let e;for(const t in r)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=r[t]);return e},filterModelListeners=(r,e)=>{const t={};for(const ke in r)(!isModelListener(ke)||!(ke.slice(9)in e))&&(t[ke]=r[ke]);return t};function shouldUpdateComponent(r,e,t){const{props:ke,children:Oe,component:Ge}=r,{props:Be,children:je,patchFlag:Ve}=e,Ze=Ge.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&Ve>=0){if(Ve&1024)return!0;if(Ve&16)return ke?hasPropsChanged(ke,Be,Ze):!!Be;if(Ve&8){const Qe=e.dynamicProps;for(let en=0;en<Qe.length;en++){const tn=Qe[en];if(Be[tn]!==ke[tn]&&!isEmitListener(Ze,tn))return!0}}}else return(Oe||je)&&(!je||!je.$stable)?!0:ke===Be?!1:ke?Be?hasPropsChanged(ke,Be,Ze):!0:!!Be;return!1}function hasPropsChanged(r,e,t){const ke=Object.keys(e);if(ke.length!==Object.keys(r).length)return!0;for(let Oe=0;Oe<ke.length;Oe++){const Ge=ke[Oe];if(e[Ge]!==r[Ge]&&!isEmitListener(t,Ge))return!0}return!1}function updateHOCHostEl({vnode:r,parent:e},t){for(;e;){const ke=e.subTree;if(ke.suspense&&ke.suspense.activeBranch===r&&(ke.el=r.el),ke===r)(r=e.vnode).el=t,e=e.parent;else break}}const isSuspense=r=>r.__isSuspense;let suspenseId=0;const SuspenseImpl={name:"Suspense",__isSuspense:!0,process(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze){if(r==null)mountSuspense(e,t,ke,Oe,Ge,Be,je,Ve,Ze);else{if(Ge&&Ge.deps>0&&!r.suspense.isInFallback){e.suspense=r.suspense,e.suspense.vnode=e,e.el=r.el;return}patchSuspense(r,e,t,ke,Oe,Be,je,Ve,Ze)}},hydrate:hydrateSuspense,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(r,e){const t=r.props&&r.props[e];isFunction$1(t)&&t()}function mountSuspense(r,e,t,ke,Oe,Ge,Be,je,Ve){const{p:Ze,o:{createElement:Qe}}=Ve,en=Qe("div"),tn=r.suspense=createSuspenseBoundary(r,Oe,ke,e,en,t,Ge,Be,je,Ve);Ze(null,tn.pendingBranch=r.ssContent,en,null,ke,tn,Ge,Be),tn.deps>0?(triggerEvent(r,"onPending"),triggerEvent(r,"onFallback"),Ze(null,r.ssFallback,e,t,ke,null,Ge,Be),setActiveBranch(tn,r.ssFallback)):tn.resolve(!1,!0)}function patchSuspense(r,e,t,ke,Oe,Ge,Be,je,{p:Ve,um:Ze,o:{createElement:Qe}}){const en=e.suspense=r.suspense;en.vnode=e,e.el=r.el;const tn=e.ssContent,an=e.ssFallback,{activeBranch:cn,pendingBranch:dn,isInFallback:hn,isHydrating:fn}=en;if(dn)en.pendingBranch=tn,isSameVNodeType(tn,dn)?(Ve(dn,tn,en.hiddenContainer,null,Oe,en,Ge,Be,je),en.deps<=0?en.resolve():hn&&(fn||(Ve(cn,an,t,ke,Oe,null,Ge,Be,je),setActiveBranch(en,an)))):(en.pendingId=suspenseId++,fn?(en.isHydrating=!1,en.activeBranch=dn):Ze(dn,Oe,en),en.deps=0,en.effects.length=0,en.hiddenContainer=Qe("div"),hn?(Ve(null,tn,en.hiddenContainer,null,Oe,en,Ge,Be,je),en.deps<=0?en.resolve():(Ve(cn,an,t,ke,Oe,null,Ge,Be,je),setActiveBranch(en,an))):cn&&isSameVNodeType(tn,cn)?(Ve(cn,tn,t,ke,Oe,en,Ge,Be,je),en.resolve(!0)):(Ve(null,tn,en.hiddenContainer,null,Oe,en,Ge,Be,je),en.deps<=0&&en.resolve()));else if(cn&&isSameVNodeType(tn,cn))Ve(cn,tn,t,ke,Oe,en,Ge,Be,je),setActiveBranch(en,tn);else if(triggerEvent(e,"onPending"),en.pendingBranch=tn,tn.shapeFlag&512?en.pendingId=tn.component.suspenseId:en.pendingId=suspenseId++,Ve(null,tn,en.hiddenContainer,null,Oe,en,Ge,Be,je),en.deps<=0)en.resolve();else{const{timeout:pn,pendingId:mn}=en;pn>0?setTimeout(()=>{en.pendingId===mn&&en.fallback(an)},pn):pn===0&&en.fallback(an)}}function createSuspenseBoundary(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe=!1){const{p:en,m:tn,um:an,n:cn,o:{parentNode:dn,remove:hn}}=Ze;let fn;const pn=isVNodeSuspensible(r);pn&&e&&e.pendingBranch&&(fn=e.pendingId,e.deps++);const mn=r.props?toNumber(r.props.timeout):void 0,yn=Ge,Cn={vnode:r,parent:e,parentComponent:t,namespace:Be,container:ke,hiddenContainer:Oe,deps:0,pendingId:suspenseId++,timeout:typeof mn=="number"?mn:-1,activeBranch:null,pendingBranch:null,isInFallback:!Qe,isHydrating:Qe,isUnmounted:!1,effects:[],resolve(wn=!1,bn=!1){const{vnode:Sn,activeBranch:Mn,pendingBranch:Tn,pendingId:En,effects:An,parentComponent:Ln,container:Rn}=Cn;let Gn=!1;Cn.isHydrating?Cn.isHydrating=!1:wn||(Gn=Mn&&Tn.transition&&Tn.transition.mode==="out-in",Gn&&(Mn.transition.afterLeave=()=>{En===Cn.pendingId&&(tn(Tn,Rn,Ge===yn?cn(Mn):Ge,0),queuePostFlushCb(An))}),Mn&&(dn(Mn.el)===Rn&&(Ge=cn(Mn)),an(Mn,Ln,Cn,!0)),Gn||tn(Tn,Rn,Ge,0)),setActiveBranch(Cn,Tn),Cn.pendingBranch=null,Cn.isInFallback=!1;let Nn=Cn.parent,jn=!1;for(;Nn;){if(Nn.pendingBranch){Nn.effects.push(...An),jn=!0;break}Nn=Nn.parent}!jn&&!Gn&&queuePostFlushCb(An),Cn.effects=[],pn&&e&&e.pendingBranch&&fn===e.pendingId&&(e.deps--,e.deps===0&&!bn&&e.resolve()),triggerEvent(Sn,"onResolve")},fallback(wn){if(!Cn.pendingBranch)return;const{vnode:bn,activeBranch:Sn,parentComponent:Mn,container:Tn,namespace:En}=Cn;triggerEvent(bn,"onFallback");const An=cn(Sn),Ln=()=>{Cn.isInFallback&&(en(null,wn,Tn,An,Mn,null,En,je,Ve),setActiveBranch(Cn,wn))},Rn=wn.transition&&wn.transition.mode==="out-in";Rn&&(Sn.transition.afterLeave=Ln),Cn.isInFallback=!0,an(Sn,Mn,null,!0),Rn||Ln()},move(wn,bn,Sn){Cn.activeBranch&&tn(Cn.activeBranch,wn,bn,Sn),Cn.container=wn},next(){return Cn.activeBranch&&cn(Cn.activeBranch)},registerDep(wn,bn,Sn){const Mn=!!Cn.pendingBranch;Mn&&Cn.deps++;const Tn=wn.vnode.el;wn.asyncDep.catch(En=>{handleError(En,wn,0)}).then(En=>{if(wn.isUnmounted||Cn.isUnmounted||Cn.pendingId!==wn.suspenseId)return;wn.asyncResolved=!0;const{vnode:An}=wn;handleSetupResult(wn,En,!1),Tn&&(An.el=Tn);const Ln=!Tn&&wn.subTree.el;bn(wn,An,dn(Tn||wn.subTree.el),Tn?null:cn(wn.subTree),Cn,Be,Sn),Ln&&hn(Ln),updateHOCHostEl(wn,An.el),Mn&&--Cn.deps===0&&Cn.resolve()})},unmount(wn,bn){Cn.isUnmounted=!0,Cn.activeBranch&&an(Cn.activeBranch,t,wn,bn),Cn.pendingBranch&&an(Cn.pendingBranch,t,wn,bn)}};return Cn}function hydrateSuspense(r,e,t,ke,Oe,Ge,Be,je,Ve){const Ze=e.suspense=createSuspenseBoundary(e,ke,t,r.parentNode,document.createElement("div"),null,Oe,Ge,Be,je,!0),Qe=Ve(r,Ze.pendingBranch=e.ssContent,t,Ze,Ge,Be);return Ze.deps===0&&Ze.resolve(!1,!0),Qe}function normalizeSuspenseChildren(r){const{shapeFlag:e,children:t}=r,ke=e&32;r.ssContent=normalizeSuspenseSlot(ke?t.default:t),r.ssFallback=ke?normalizeSuspenseSlot(t.fallback):createVNode(Comment)}function normalizeSuspenseSlot(r){let e;if(isFunction$1(r)){const t=isBlockTreeEnabled&&r._c;t&&(r._d=!1,openBlock()),r=r(),t&&(r._d=!0,e=currentBlock,closeBlock())}return isArray$1(r)&&(r=filterSingleRoot(r)),r=normalizeVNode(r),e&&!r.dynamicChildren&&(r.dynamicChildren=e.filter(t=>t!==r)),r}function queueEffectWithSuspense(r,e){e&&e.pendingBranch?isArray$1(r)?e.effects.push(...r):e.effects.push(r):queuePostFlushCb(r)}function setActiveBranch(r,e){r.activeBranch=e;const{vnode:t,parentComponent:ke}=r;let Oe=e.el;for(;!Oe&&e.component;)e=e.component.subTree,Oe=e.el;t.el=Oe,ke&&ke.subTree===t&&(ke.vnode.el=Oe,updateHOCHostEl(ke,Oe))}function isVNodeSuspensible(r){const e=r.props&&r.props.suspensible;return e!=null&&e!==!1}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(r=!1){blockStack.push(currentBlock=r?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(r,e=!1){isBlockTreeEnabled+=r,r<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(r){return r.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),r}function createElementBlock(r,e,t,ke,Oe,Ge){return setupBlock(createBaseVNode(r,e,t,ke,Oe,Ge,!0))}function createBlock(r,e,t,ke,Oe){return setupBlock(createVNode(r,e,t,ke,Oe,!0))}function isVNode(r){return r?r.__v_isVNode===!0:!1}function isSameVNodeType(r,e){return r.type===e.type&&r.key===e.key}function transformVNodeArgs(r){}const normalizeKey=({key:r})=>r??null,normalizeRef=({ref:r,ref_key:e,ref_for:t})=>(typeof r=="number"&&(r=""+r),r!=null?isString(r)||isRef(r)||isFunction$1(r)?{i:currentRenderingInstance,r,k:e,f:!!t}:r:null);function createBaseVNode(r,e=null,t=null,ke=0,Oe=null,Ge=r===Fragment?0:1,Be=!1,je=!1){const Ve={__v_isVNode:!0,__v_skip:!0,type:r,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:Ge,patchFlag:ke,dynamicProps:Oe,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return je?(normalizeChildren(Ve,t),Ge&128&&r.normalize(Ve)):t&&(Ve.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!Be&&currentBlock&&(Ve.patchFlag>0||Ge&6)&&Ve.patchFlag!==32&&currentBlock.push(Ve),Ve}const createVNode=_createVNode;function _createVNode(r,e=null,t=null,ke=0,Oe=null,Ge=!1){if((!r||r===NULL_DYNAMIC_COMPONENT)&&(r=Comment),isVNode(r)){const je=cloneVNode(r,e,!0);return t&&normalizeChildren(je,t),isBlockTreeEnabled>0&&!Ge&&currentBlock&&(je.shapeFlag&6?currentBlock[currentBlock.indexOf(r)]=je:currentBlock.push(je)),je.patchFlag=-2,je}if(isClassComponent(r)&&(r=r.__vccOpts),e){e=guardReactiveProps(e);let{class:je,style:Ve}=e;je&&!isString(je)&&(e.class=normalizeClass(je)),isObject$1(Ve)&&(isProxy(Ve)&&!isArray$1(Ve)&&(Ve=extend$5({},Ve)),e.style=normalizeStyle(Ve))}const Be=isString(r)?1:isSuspense(r)?128:isTeleport(r)?64:isObject$1(r)?4:isFunction$1(r)?2:0;return createBaseVNode(r,e,t,ke,Oe,Be,Ge,!0)}function guardReactiveProps(r){return r?isProxy(r)||isInternalObject(r)?extend$5({},r):r:null}function cloneVNode(r,e,t=!1,ke=!1){const{props:Oe,ref:Ge,patchFlag:Be,children:je,transition:Ve}=r,Ze=e?mergeProps(Oe||{},e):Oe,Qe={__v_isVNode:!0,__v_skip:!0,type:r.type,props:Ze,key:Ze&&normalizeKey(Ze),ref:e&&e.ref?t&&Ge?isArray$1(Ge)?Ge.concat(normalizeRef(e)):[Ge,normalizeRef(e)]:normalizeRef(e):Ge,scopeId:r.scopeId,slotScopeIds:r.slotScopeIds,children:je,target:r.target,targetStart:r.targetStart,targetAnchor:r.targetAnchor,staticCount:r.staticCount,shapeFlag:r.shapeFlag,patchFlag:e&&r.type!==Fragment?Be===-1?16:Be|16:Be,dynamicProps:r.dynamicProps,dynamicChildren:r.dynamicChildren,appContext:r.appContext,dirs:r.dirs,transition:Ve,component:r.component,suspense:r.suspense,ssContent:r.ssContent&&cloneVNode(r.ssContent),ssFallback:r.ssFallback&&cloneVNode(r.ssFallback),el:r.el,anchor:r.anchor,ctx:r.ctx,ce:r.ce};return Ve&&ke&&setTransitionHooks(Qe,Ve.clone(Qe)),Qe}function createTextVNode(r=" ",e=0){return createVNode(Text$1,null,r,e)}function createStaticVNode(r,e){const t=createVNode(Static,null,r);return t.staticCount=e,t}function createCommentVNode(r="",e=!1){return e?(openBlock(),createBlock(Comment,null,r)):createVNode(Comment,null,r)}function normalizeVNode(r){return r==null||typeof r=="boolean"?createVNode(Comment):isArray$1(r)?createVNode(Fragment,null,r.slice()):isVNode(r)?cloneIfMounted(r):createVNode(Text$1,null,String(r))}function cloneIfMounted(r){return r.el===null&&r.patchFlag!==-1||r.memo?r:cloneVNode(r)}function normalizeChildren(r,e){let t=0;const{shapeFlag:ke}=r;if(e==null)e=null;else if(isArray$1(e))t=16;else if(typeof e=="object")if(ke&65){const Oe=e.default;Oe&&(Oe._c&&(Oe._d=!1),normalizeChildren(r,Oe()),Oe._c&&(Oe._d=!0));return}else{t=32;const Oe=e._;!Oe&&!isInternalObject(e)?e._ctx=currentRenderingInstance:Oe===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,r.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),ke&64?(t=16,e=[createTextVNode(e)]):t=8);r.children=e,r.shapeFlag|=t}function mergeProps(...r){const e={};for(let t=0;t<r.length;t++){const ke=r[t];for(const Oe in ke)if(Oe==="class")e.class!==ke.class&&(e.class=normalizeClass([e.class,ke.class]));else if(Oe==="style")e.style=normalizeStyle([e.style,ke.style]);else if(isOn(Oe)){const Ge=e[Oe],Be=ke[Oe];Be&&Ge!==Be&&!(isArray$1(Ge)&&Ge.includes(Be))&&(e[Oe]=Ge?[].concat(Ge,Be):Be)}else Oe!==""&&(e[Oe]=ke[Oe])}return e}function invokeVNodeHook(r,e,t,ke=null){callWithAsyncErrorHandling(r,e,7,[t,ke])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(r,e,t){const ke=r.type,Oe=(e?e.appContext:r.appContext)||emptyAppContext,Ge={uid:uid++,vnode:r,type:ke,parent:e,appContext:Oe,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(Oe.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(ke,Oe),emitsOptions:normalizeEmitsOptions(ke,Oe),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:ke.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Ge.ctx={_:Ge},Ge.root=e?e.root:Ge,Ge.emit=emit.bind(null,Ge),r.ce&&r.ce(Ge),Ge}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const r=getGlobalThis(),e=(t,ke)=>{let Oe;return(Oe=r[t])||(Oe=r[t]=[]),Oe.push(ke),Ge=>{Oe.length>1?Oe.forEach(Be=>Be(Ge)):Oe[0](Ge)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",t=>currentInstance=t),setInSSRSetupState=e("__VUE_SSR_SETTERS__",t=>isInSSRComponentSetup=t)}const setCurrentInstance=r=>{const e=currentInstance;return internalSetCurrentInstance(r),r.scope.on(),()=>{r.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(r){return r.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(r,e=!1,t=!1){e&&setInSSRSetupState(e);const{props:ke,children:Oe}=r.vnode,Ge=isStatefulComponent(r);initProps(r,ke,Ge,e),initSlots(r,Oe,t);const Be=Ge?setupStatefulComponent(r,e):void 0;return e&&setInSSRSetupState(!1),Be}function setupStatefulComponent(r,e){const t=r.type;r.accessCache=Object.create(null),r.proxy=new Proxy(r.ctx,PublicInstanceProxyHandlers);const{setup:ke}=t;if(ke){pauseTracking();const Oe=r.setupContext=ke.length>1?createSetupContext(r):null,Ge=setCurrentInstance(r),Be=callWithErrorHandling(ke,r,0,[r.props,Oe]),je=isPromise(Be);if(resetTracking(),Ge(),(je||r.sp)&&!isAsyncWrapper(r)&&markAsyncBoundary(r),je){if(Be.then(unsetCurrentInstance,unsetCurrentInstance),e)return Be.then(Ve=>{handleSetupResult(r,Ve,e)}).catch(Ve=>{handleError(Ve,r,0)});r.asyncDep=Be}else handleSetupResult(r,Be,e)}else finishComponentSetup(r,e)}function handleSetupResult(r,e,t){isFunction$1(e)?r.type.__ssrInlineRender?r.ssrRender=e:r.render=e:isObject$1(e)&&(r.setupState=proxyRefs(e)),finishComponentSetup(r,t)}let compile$1,installWithProxy;function registerRuntimeCompiler(r){compile$1=r,installWithProxy=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(r,e,t){const ke=r.type;if(!r.render){if(!e&&compile$1&&!ke.render){const Oe=ke.template||resolveMergedOptions(r).template;if(Oe){const{isCustomElement:Ge,compilerOptions:Be}=r.appContext.config,{delimiters:je,compilerOptions:Ve}=ke,Ze=extend$5(extend$5({isCustomElement:Ge,delimiters:je},Be),Ve);ke.render=compile$1(Oe,Ze)}}r.render=ke.render||NOOP,installWithProxy&&installWithProxy(r)}{const Oe=setCurrentInstance(r);pauseTracking();try{applyOptions(r)}finally{resetTracking(),Oe()}}}const attrsProxyHandlers={get(r,e){return track(r,"get",""),r[e]}};function createSetupContext(r){const e=t=>{r.exposed=t||{}};return{attrs:new Proxy(r.attrs,attrsProxyHandlers),slots:r.slots,emit:r.emit,expose:e}}function getComponentPublicInstance(r){return r.exposed?r.exposeProxy||(r.exposeProxy=new Proxy(proxyRefs(markRaw(r.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](r)},has(e,t){return t in e||t in publicPropertiesMap}})):r.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=r=>r.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(r,e=!0){return isFunction$1(r)?r.displayName||r.name:r.name||e&&r.__name}function formatComponentName(r,e,t=!1){let ke=getComponentName(e);if(!ke&&e.__file){const Oe=e.__file.match(/([^/\\]+)\.\w+$/);Oe&&(ke=Oe[1])}if(!ke&&r&&r.parent){const Oe=Ge=>{for(const Be in Ge)if(Ge[Be]===e)return Be};ke=Oe(r.components||r.parent.type.components)||Oe(r.appContext.components)}return ke?classify(ke):t?"App":"Anonymous"}function isClassComponent(r){return isFunction$1(r)&&"__vccOpts"in r}const computed=(r,e)=>computed$1(r,e,isInSSRComponentSetup);function h$2(r,e,t){const ke=arguments.length;return ke===2?isObject$1(e)&&!isArray$1(e)?isVNode(e)?createVNode(r,null,[e]):createVNode(r,e):createVNode(r,null,e):(ke>3?t=Array.prototype.slice.call(arguments,2):ke===3&&isVNode(t)&&(t=[t]),createVNode(r,e,t))}function initCustomFormatter(){}function withMemo(r,e,t,ke){const Oe=t[ke];if(Oe&&isMemoSame(Oe,r))return Oe;const Ge=e();return Ge.memo=r.slice(),Ge.cacheIndex=ke,t[ke]=Ge}function isMemoSame(r,e){const t=r.memo;if(t.length!=e.length)return!1;for(let ke=0;ke<t.length;ke++)if(hasChanged(t[ke],e[ke]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(r),!0}const version$3="3.5.13",warn$2=NOOP,ErrorTypeStrings=ErrorTypeStrings$1,devtools=devtools$1,setDevtoolsHook=setDevtoolsHook$1,_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode,getComponentPublicInstance,ensureValidVNode,pushWarningContext,popWarningContext},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,DeprecationTypes=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$2=typeof window<"u"&&window.trustedTypes;if(tt$2)try{policy=tt$2.createPolicy("vue",{createHTML:r=>r})}catch{}const unsafeToTrustedHTML=policy?r=>policy.createHTML(r):r=>r,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(r,e,t)=>{e.insertBefore(r,t||null)},remove:r=>{const e=r.parentNode;e&&e.removeChild(r)},createElement:(r,e,t,ke)=>{const Oe=e==="svg"?doc.createElementNS(svgNS,r):e==="mathml"?doc.createElementNS(mathmlNS,r):t?doc.createElement(r,{is:t}):doc.createElement(r);return r==="select"&&ke&&ke.multiple!=null&&Oe.setAttribute("multiple",ke.multiple),Oe},createText:r=>doc.createTextNode(r),createComment:r=>doc.createComment(r),setText:(r,e)=>{r.nodeValue=e},setElementText:(r,e)=>{r.textContent=e},parentNode:r=>r.parentNode,nextSibling:r=>r.nextSibling,querySelector:r=>doc.querySelector(r),setScopeId(r,e){r.setAttribute(e,"")},insertStaticContent(r,e,t,ke,Oe,Ge){const Be=t?t.previousSibling:e.lastChild;if(Oe&&(Oe===Ge||Oe.nextSibling))for(;e.insertBefore(Oe.cloneNode(!0),t),!(Oe===Ge||!(Oe=Oe.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(ke==="svg"?`<svg>${r}</svg>`:ke==="mathml"?`<math>${r}</math>`:r);const je=templateContainer.content;if(ke==="svg"||ke==="mathml"){const Ve=je.firstChild;for(;Ve.firstChild;)je.appendChild(Ve.firstChild);je.removeChild(Ve)}e.insertBefore(je,t)}return[Be?Be.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$5({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=r=>(r.displayName="Transition",r.props=TransitionPropsValidators,r),Transition=decorate$1((r,{slots:e})=>h$2(BaseTransition,resolveTransitionProps(r),e)),callHook=(r,e=[])=>{isArray$1(r)?r.forEach(t=>t(...e)):r&&r(...e)},hasExplicitCallback=r=>r?isArray$1(r)?r.some(e=>e.length>1):r.length>1:!1;function resolveTransitionProps(r){const e={};for(const An in r)An in DOMTransitionPropsValidators||(e[An]=r[An]);if(r.css===!1)return e;const{name:t="v",type:ke,duration:Oe,enterFromClass:Ge=`${t}-enter-from`,enterActiveClass:Be=`${t}-enter-active`,enterToClass:je=`${t}-enter-to`,appearFromClass:Ve=Ge,appearActiveClass:Ze=Be,appearToClass:Qe=je,leaveFromClass:en=`${t}-leave-from`,leaveActiveClass:tn=`${t}-leave-active`,leaveToClass:an=`${t}-leave-to`}=r,cn=normalizeDuration(Oe),dn=cn&&cn[0],hn=cn&&cn[1],{onBeforeEnter:fn,onEnter:pn,onEnterCancelled:mn,onLeave:yn,onLeaveCancelled:Cn,onBeforeAppear:wn=fn,onAppear:bn=pn,onAppearCancelled:Sn=mn}=e,Mn=(An,Ln,Rn,Gn)=>{An._enterCancelled=Gn,removeTransitionClass(An,Ln?Qe:je),removeTransitionClass(An,Ln?Ze:Be),Rn&&Rn()},Tn=(An,Ln)=>{An._isLeaving=!1,removeTransitionClass(An,en),removeTransitionClass(An,an),removeTransitionClass(An,tn),Ln&&Ln()},En=An=>(Ln,Rn)=>{const Gn=An?bn:pn,Nn=()=>Mn(Ln,An,Rn);callHook(Gn,[Ln,Nn]),nextFrame(()=>{removeTransitionClass(Ln,An?Ve:Ge),addTransitionClass(Ln,An?Qe:je),hasExplicitCallback(Gn)||whenTransitionEnds(Ln,ke,dn,Nn)})};return extend$5(e,{onBeforeEnter(An){callHook(fn,[An]),addTransitionClass(An,Ge),addTransitionClass(An,Be)},onBeforeAppear(An){callHook(wn,[An]),addTransitionClass(An,Ve),addTransitionClass(An,Ze)},onEnter:En(!1),onAppear:En(!0),onLeave(An,Ln){An._isLeaving=!0;const Rn=()=>Tn(An,Ln);addTransitionClass(An,en),An._enterCancelled?(addTransitionClass(An,tn),forceReflow()):(forceReflow(),addTransitionClass(An,tn)),nextFrame(()=>{An._isLeaving&&(removeTransitionClass(An,en),addTransitionClass(An,an),hasExplicitCallback(yn)||whenTransitionEnds(An,ke,hn,Rn))}),callHook(yn,[An,Rn])},onEnterCancelled(An){Mn(An,!1,void 0,!0),callHook(mn,[An])},onAppearCancelled(An){Mn(An,!0,void 0,!0),callHook(Sn,[An])},onLeaveCancelled(An){Tn(An),callHook(Cn,[An])}})}function normalizeDuration(r){if(r==null)return null;if(isObject$1(r))return[NumberOf(r.enter),NumberOf(r.leave)];{const e=NumberOf(r);return[e,e]}}function NumberOf(r){return toNumber(r)}function addTransitionClass(r,e){e.split(/\s+/).forEach(t=>t&&r.classList.add(t)),(r[vtcKey]||(r[vtcKey]=new Set)).add(e)}function removeTransitionClass(r,e){e.split(/\s+/).forEach(ke=>ke&&r.classList.remove(ke));const t=r[vtcKey];t&&(t.delete(e),t.size||(r[vtcKey]=void 0))}function nextFrame(r){requestAnimationFrame(()=>{requestAnimationFrame(r)})}let endId=0;function whenTransitionEnds(r,e,t,ke){const Oe=r._endId=++endId,Ge=()=>{Oe===r._endId&&ke()};if(t!=null)return setTimeout(Ge,t);const{type:Be,timeout:je,propCount:Ve}=getTransitionInfo(r,e);if(!Be)return ke();const Ze=Be+"end";let Qe=0;const en=()=>{r.removeEventListener(Ze,tn),Ge()},tn=an=>{an.target===r&&++Qe>=Ve&&en()};setTimeout(()=>{Qe<Ve&&en()},je+1),r.addEventListener(Ze,tn)}function getTransitionInfo(r,e){const t=window.getComputedStyle(r),ke=cn=>(t[cn]||"").split(", "),Oe=ke(`${TRANSITION}Delay`),Ge=ke(`${TRANSITION}Duration`),Be=getTimeout(Oe,Ge),je=ke(`${ANIMATION}Delay`),Ve=ke(`${ANIMATION}Duration`),Ze=getTimeout(je,Ve);let Qe=null,en=0,tn=0;e===TRANSITION?Be>0&&(Qe=TRANSITION,en=Be,tn=Ge.length):e===ANIMATION?Ze>0&&(Qe=ANIMATION,en=Ze,tn=Ve.length):(en=Math.max(Be,Ze),Qe=en>0?Be>Ze?TRANSITION:ANIMATION:null,tn=Qe?Qe===TRANSITION?Ge.length:Ve.length:0);const an=Qe===TRANSITION&&/\b(transform|all)(,|$)/.test(ke(`${TRANSITION}Property`).toString());return{type:Qe,timeout:en,propCount:tn,hasTransform:an}}function getTimeout(r,e){for(;r.length<e.length;)r=r.concat(r);return Math.max(...e.map((t,ke)=>toMs(t)+toMs(r[ke])))}function toMs(r){return r==="auto"?0:Number(r.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(r,e,t){const ke=r[vtcKey];ke&&(e=(e?[e,...ke]:[...ke]).join(" ")),e==null?r.removeAttribute("class"):t?r.setAttribute("class",e):r.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(r,{value:e},{transition:t}){r[vShowOriginalDisplay]=r.style.display==="none"?"":r.style.display,t&&e?t.beforeEnter(r):setDisplay(r,e)},mounted(r,{value:e},{transition:t}){t&&e&&t.enter(r)},updated(r,{value:e,oldValue:t},{transition:ke}){!e!=!t&&(ke?e?(ke.beforeEnter(r),setDisplay(r,!0),ke.enter(r)):ke.leave(r,()=>{setDisplay(r,!1)}):setDisplay(r,e))},beforeUnmount(r,{value:e}){setDisplay(r,e)}};function setDisplay(r,e){r.style.display=e?r[vShowOriginalDisplay]:"none",r[vShowHidden]=!e}function initVShowForSSR(){vShow.getSSRProps=({value:r})=>{if(!r)return{style:{display:"none"}}}}const CSS_VAR_TEXT=Symbol("");function useCssVars(r){const e=getCurrentInstance();if(!e)return;const t=e.ut=(Oe=r(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(Ge=>setVarsOnNode(Ge,Oe))},ke=()=>{const Oe=r(e.proxy);e.ce?setVarsOnNode(e.ce,Oe):setVarsOnVNode(e.subTree,Oe),t(Oe)};onBeforeUpdate(()=>{queuePostFlushCb(ke)}),onMounted(()=>{watch(ke,NOOP,{flush:"post"});const Oe=new MutationObserver(ke);Oe.observe(e.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>Oe.disconnect())})}function setVarsOnVNode(r,e){if(r.shapeFlag&128){const t=r.suspense;r=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{setVarsOnVNode(t.activeBranch,e)})}for(;r.component;)r=r.component.subTree;if(r.shapeFlag&1&&r.el)setVarsOnNode(r.el,e);else if(r.type===Fragment)r.children.forEach(t=>setVarsOnVNode(t,e));else if(r.type===Static){let{el:t,anchor:ke}=r;for(;t&&(setVarsOnNode(t,e),t!==ke);)t=t.nextSibling}}function setVarsOnNode(r,e){if(r.nodeType===1){const t=r.style;let ke="";for(const Oe in e)t.setProperty(`--${Oe}`,e[Oe]),ke+=`--${Oe}: ${e[Oe]};`;t[CSS_VAR_TEXT]=ke}}const displayRE=/(^|;)\s*display\s*:/;function patchStyle(r,e,t){const ke=r.style,Oe=isString(t);let Ge=!1;if(t&&!Oe){if(e)if(isString(e))for(const Be of e.split(";")){const je=Be.slice(0,Be.indexOf(":")).trim();t[je]==null&&setStyle(ke,je,"")}else for(const Be in e)t[Be]==null&&setStyle(ke,Be,"");for(const Be in t)Be==="display"&&(Ge=!0),setStyle(ke,Be,t[Be])}else if(Oe){if(e!==t){const Be=ke[CSS_VAR_TEXT];Be&&(t+=";"+Be),ke.cssText=t,Ge=displayRE.test(t)}}else e&&r.removeAttribute("style");vShowOriginalDisplay in r&&(r[vShowOriginalDisplay]=Ge?ke.display:"",r[vShowHidden]&&(ke.display="none"))}const importantRE=/\s*!important$/;function setStyle(r,e,t){if(isArray$1(t))t.forEach(ke=>setStyle(r,e,ke));else if(t==null&&(t=""),e.startsWith("--"))r.setProperty(e,t);else{const ke=autoPrefix(r,e);importantRE.test(t)?r.setProperty(hyphenate(ke),t.replace(importantRE,""),"important"):r[ke]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(r,e){const t=prefixCache[e];if(t)return t;let ke=camelize(e);if(ke!=="filter"&&ke in r)return prefixCache[e]=ke;ke=capitalize(ke);for(let Oe=0;Oe<prefixes.length;Oe++){const Ge=prefixes[Oe]+ke;if(Ge in r)return prefixCache[e]=Ge}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(r,e,t,ke,Oe,Ge=isSpecialBooleanAttr(e)){ke&&e.startsWith("xlink:")?t==null?r.removeAttributeNS(xlinkNS,e.slice(6,e.length)):r.setAttributeNS(xlinkNS,e,t):t==null||Ge&&!includeBooleanAttr(t)?r.removeAttribute(e):r.setAttribute(e,Ge?"":isSymbol(t)?String(t):t)}function patchDOMProp(r,e,t,ke,Oe){if(e==="innerHTML"||e==="textContent"){t!=null&&(r[e]=e==="innerHTML"?unsafeToTrustedHTML(t):t);return}const Ge=r.tagName;if(e==="value"&&Ge!=="PROGRESS"&&!Ge.includes("-")){const je=Ge==="OPTION"?r.getAttribute("value")||"":r.value,Ve=t==null?r.type==="checkbox"?"on":"":String(t);(je!==Ve||!("_value"in r))&&(r.value=Ve),t==null&&r.removeAttribute(e),r._value=t;return}let Be=!1;if(t===""||t==null){const je=typeof r[e];je==="boolean"?t=includeBooleanAttr(t):t==null&&je==="string"?(t="",Be=!0):je==="number"&&(t=0,Be=!0)}try{r[e]=t}catch{}Be&&r.removeAttribute(Oe||e)}function addEventListener(r,e,t,ke){r.addEventListener(e,t,ke)}function removeEventListener(r,e,t,ke){r.removeEventListener(e,t,ke)}const veiKey=Symbol("_vei");function patchEvent(r,e,t,ke,Oe=null){const Ge=r[veiKey]||(r[veiKey]={}),Be=Ge[e];if(ke&&Be)Be.value=ke;else{const[je,Ve]=parseName(e);if(ke){const Ze=Ge[e]=createInvoker(ke,Oe);addEventListener(r,je,Ze,Ve)}else Be&&(removeEventListener(r,je,Be,Ve),Ge[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(r){let e;if(optionsModifierRE.test(r)){e={};let ke;for(;ke=r.match(optionsModifierRE);)r=r.slice(0,r.length-ke[0].length),e[ke[0].toLowerCase()]=!0}return[r[2]===":"?r.slice(3):hyphenate(r.slice(2)),e]}let cachedNow=0;const p$2=Promise.resolve(),getNow=()=>cachedNow||(p$2.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(r,e){const t=ke=>{if(!ke._vts)ke._vts=Date.now();else if(ke._vts<=t.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(ke,t.value),e,5,[ke])};return t.value=r,t.attached=getNow(),t}function patchStopImmediatePropagation(r,e){if(isArray$1(e)){const t=r.stopImmediatePropagation;return r.stopImmediatePropagation=()=>{t.call(r),r._stopped=!0},e.map(ke=>Oe=>!Oe._stopped&&ke&&ke(Oe))}else return e}const isNativeOn=r=>r.charCodeAt(0)===111&&r.charCodeAt(1)===110&&r.charCodeAt(2)>96&&r.charCodeAt(2)<123,patchProp=(r,e,t,ke,Oe,Ge)=>{const Be=Oe==="svg";e==="class"?patchClass(r,ke,Be):e==="style"?patchStyle(r,t,ke):isOn(e)?isModelListener(e)||patchEvent(r,e,t,ke,Ge):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(r,e,ke,Be))?(patchDOMProp(r,e,ke),!r.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(r,e,ke,Be,Ge,e!=="value")):r._isVueCE&&(/[A-Z]/.test(e)||!isString(ke))?patchDOMProp(r,camelize(e),ke,Ge,e):(e==="true-value"?r._trueValue=ke:e==="false-value"&&(r._falseValue=ke),patchAttr(r,e,ke,Be))};function shouldSetAsProp(r,e,t,ke){if(ke)return!!(e==="innerHTML"||e==="textContent"||e in r&&isNativeOn(e)&&isFunction$1(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&r.tagName==="INPUT"||e==="type"&&r.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const Oe=r.tagName;if(Oe==="IMG"||Oe==="VIDEO"||Oe==="CANVAS"||Oe==="SOURCE")return!1}return isNativeOn(e)&&isString(t)?!1:e in r}const REMOVAL={};/*! #__NO_SIDE_EFFECTS__ */function defineCustomElement(r,e,t){const ke=defineComponent(r,e);isPlainObject$1(ke)&&extend$5(ke,e);class Oe extends VueElement{constructor(Be){super(ke,Be,t)}}return Oe.def=ke,Oe}/*! #__NO_SIDE_EFFECTS__ */const defineSSRCustomElement=(r,e)=>defineCustomElement(r,e,createSSRApp),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(e,t={},ke=createApp){super(),this._def=e,this._props=t,this._createApp=ke,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&ke!==createApp?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof VueElement){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let ke=0;ke<this.attributes.length;ke++)this._setAttr(this.attributes[ke].name);this._ob=new MutationObserver(ke=>{for(const Oe of ke)this._setAttr(Oe.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(ke,Oe=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:Ge,styles:Be}=ke;let je;if(Ge&&!isArray$1(Ge))for(const Ve in Ge){const Ze=Ge[Ve];(Ze===Number||Ze&&Ze.type===Number)&&(Ve in this._props&&(this._props[Ve]=toNumber(this._props[Ve])),(je||(je=Object.create(null)))[camelize(Ve)]=!0)}this._numberProps=je,Oe&&this._resolveProps(ke),this.shadowRoot&&this._applyStyles(Be),this._mount(ke)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(ke=>e(this._def=ke,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const ke in t)hasOwn(this,ke)||Object.defineProperty(this,ke,{get:()=>unref(t[ke])})}_resolveProps(e){const{props:t}=e,ke=isArray$1(t)?t:Object.keys(t||{});for(const Oe of Object.keys(this))Oe[0]!=="_"&&ke.includes(Oe)&&this._setProp(Oe,this[Oe]);for(const Oe of ke.map(camelize))Object.defineProperty(this,Oe,{get(){return this._getProp(Oe)},set(Ge){this._setProp(Oe,Ge,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let ke=t?this.getAttribute(e):REMOVAL;const Oe=camelize(e);t&&this._numberProps&&this._numberProps[Oe]&&(ke=toNumber(ke)),this._setProp(Oe,ke,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,ke=!0,Oe=!1){if(t!==this._props[e]&&(t===REMOVAL?delete this._props[e]:(this._props[e]=t,e==="key"&&this._app&&(this._app._ceVNode.key=t)),Oe&&this._instance&&this._update(),ke)){const Ge=this._ob;Ge&&Ge.disconnect(),t===!0?this.setAttribute(hyphenate(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(hyphenate(e),t+""):t||this.removeAttribute(hyphenate(e)),Ge&&Ge.observe(this,{attributes:!0})}}_update(){render$1(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=createVNode(this._def,extend$5(e,this._props));return this._instance||(t.ce=ke=>{this._instance=ke,ke.ce=this,ke.isCE=!0;const Oe=(Ge,Be)=>{this.dispatchEvent(new CustomEvent(Ge,isPlainObject$1(Be[0])?extend$5({detail:Be},Be[0]):{detail:Be}))};ke.emit=(Ge,...Be)=>{Oe(Ge,Be),hyphenate(Ge)!==Ge&&Oe(hyphenate(Ge),Be)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const ke=this._nonce;for(let Oe=e.length-1;Oe>=0;Oe--){const Ge=document.createElement("style");ke&&Ge.setAttribute("nonce",ke),Ge.textContent=e[Oe],this.shadowRoot.prepend(Ge)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const ke=t.nodeType===1&&t.getAttribute("slot")||"default";(e[ke]||(e[ke]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let ke=0;ke<e.length;ke++){const Oe=e[ke],Ge=Oe.getAttribute("name")||"default",Be=this._slots[Ge],je=Oe.parentNode;if(Be)for(const Ve of Be){if(t&&Ve.nodeType===1){const Ze=t+"-s",Qe=document.createTreeWalker(Ve,1);Ve.setAttribute(Ze,"");let en;for(;en=Qe.nextNode();)en.setAttribute(Ze,"")}je.insertBefore(Ve,Oe)}else for(;Oe.firstChild;)je.insertBefore(Oe.firstChild,Oe);je.removeChild(Oe)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function useHost(r){const e=getCurrentInstance(),t=e&&e.ce;return t||null}function useShadowRoot(){const r=useHost();return r&&r.shadowRoot}function useCssModule(r="$style"){{const e=getCurrentInstance();if(!e)return EMPTY_OBJ;const t=e.type.__cssModules;if(!t)return EMPTY_OBJ;const ke=t[r];return ke||EMPTY_OBJ}}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=r=>(delete r.props.mode,r),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend$5({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(r,{slots:e}){const t=getCurrentInstance(),ke=useTransitionState();let Oe,Ge;return onUpdated(()=>{if(!Oe.length)return;const Be=r.moveClass||`${r.name||"v"}-move`;if(!hasCSSTransform(Oe[0].el,t.vnode.el,Be))return;Oe.forEach(callPendingCbs),Oe.forEach(recordPosition);const je=Oe.filter(applyTranslation);forceReflow(),je.forEach(Ve=>{const Ze=Ve.el,Qe=Ze.style;addTransitionClass(Ze,Be),Qe.transform=Qe.webkitTransform=Qe.transitionDuration="";const en=Ze[moveCbKey]=tn=>{tn&&tn.target!==Ze||(!tn||/transform$/.test(tn.propertyName))&&(Ze.removeEventListener("transitionend",en),Ze[moveCbKey]=null,removeTransitionClass(Ze,Be))};Ze.addEventListener("transitionend",en)})}),()=>{const Be=toRaw(r),je=resolveTransitionProps(Be);let Ve=Be.tag||Fragment;if(Oe=[],Ge)for(let Ze=0;Ze<Ge.length;Ze++){const Qe=Ge[Ze];Qe.el&&Qe.el instanceof Element&&(Oe.push(Qe),setTransitionHooks(Qe,resolveTransitionHooks(Qe,je,ke,t)),positionMap.set(Qe,Qe.el.getBoundingClientRect()))}Ge=e.default?getTransitionRawChildren(e.default()):[];for(let Ze=0;Ze<Ge.length;Ze++){const Qe=Ge[Ze];Qe.key!=null&&setTransitionHooks(Qe,resolveTransitionHooks(Qe,je,ke,t))}return createVNode(Ve,null,Ge)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(r){const e=r.el;e[moveCbKey]&&e[moveCbKey](),e[enterCbKey]&&e[enterCbKey]()}function recordPosition(r){newPositionMap.set(r,r.el.getBoundingClientRect())}function applyTranslation(r){const e=positionMap.get(r),t=newPositionMap.get(r),ke=e.left-t.left,Oe=e.top-t.top;if(ke||Oe){const Ge=r.el.style;return Ge.transform=Ge.webkitTransform=`translate(${ke}px,${Oe}px)`,Ge.transitionDuration="0s",r}}function hasCSSTransform(r,e,t){const ke=r.cloneNode(),Oe=r[vtcKey];Oe&&Oe.forEach(je=>{je.split(/\s+/).forEach(Ve=>Ve&&ke.classList.remove(Ve))}),t.split(/\s+/).forEach(je=>je&&ke.classList.add(je)),ke.style.display="none";const Ge=e.nodeType===1?e:e.parentNode;Ge.appendChild(ke);const{hasTransform:Be}=getTransitionInfo(ke);return Ge.removeChild(ke),Be}const getModelAssigner=r=>{const e=r.props["onUpdate:modelValue"]||!1;return isArray$1(e)?t=>invokeArrayFns(e,t):e};function onCompositionStart(r){r.target.composing=!0}function onCompositionEnd(r){const e=r.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(r,{modifiers:{lazy:e,trim:t,number:ke}},Oe){r[assignKey]=getModelAssigner(Oe);const Ge=ke||Oe.props&&Oe.props.type==="number";addEventListener(r,e?"change":"input",Be=>{if(Be.target.composing)return;let je=r.value;t&&(je=je.trim()),Ge&&(je=looseToNumber(je)),r[assignKey](je)}),t&&addEventListener(r,"change",()=>{r.value=r.value.trim()}),e||(addEventListener(r,"compositionstart",onCompositionStart),addEventListener(r,"compositionend",onCompositionEnd),addEventListener(r,"change",onCompositionEnd))},mounted(r,{value:e}){r.value=e??""},beforeUpdate(r,{value:e,oldValue:t,modifiers:{lazy:ke,trim:Oe,number:Ge}},Be){if(r[assignKey]=getModelAssigner(Be),r.composing)return;const je=(Ge||r.type==="number")&&!/^0\d/.test(r.value)?looseToNumber(r.value):r.value,Ve=e??"";je!==Ve&&(document.activeElement===r&&r.type!=="range"&&(ke&&e===t||Oe&&r.value.trim()===Ve)||(r.value=Ve))}},vModelCheckbox={deep:!0,created(r,e,t){r[assignKey]=getModelAssigner(t),addEventListener(r,"change",()=>{const ke=r._modelValue,Oe=getValue$1(r),Ge=r.checked,Be=r[assignKey];if(isArray$1(ke)){const je=looseIndexOf(ke,Oe),Ve=je!==-1;if(Ge&&!Ve)Be(ke.concat(Oe));else if(!Ge&&Ve){const Ze=[...ke];Ze.splice(je,1),Be(Ze)}}else if(isSet(ke)){const je=new Set(ke);Ge?je.add(Oe):je.delete(Oe),Be(je)}else Be(getCheckboxValue(r,Ge))})},mounted:setChecked,beforeUpdate(r,e,t){r[assignKey]=getModelAssigner(t),setChecked(r,e,t)}};function setChecked(r,{value:e,oldValue:t},ke){r._modelValue=e;let Oe;if(isArray$1(e))Oe=looseIndexOf(e,ke.props.value)>-1;else if(isSet(e))Oe=e.has(ke.props.value);else{if(e===t)return;Oe=looseEqual(e,getCheckboxValue(r,!0))}r.checked!==Oe&&(r.checked=Oe)}const vModelRadio={created(r,{value:e},t){r.checked=looseEqual(e,t.props.value),r[assignKey]=getModelAssigner(t),addEventListener(r,"change",()=>{r[assignKey](getValue$1(r))})},beforeUpdate(r,{value:e,oldValue:t},ke){r[assignKey]=getModelAssigner(ke),e!==t&&(r.checked=looseEqual(e,ke.props.value))}},vModelSelect={deep:!0,created(r,{value:e,modifiers:{number:t}},ke){const Oe=isSet(e);addEventListener(r,"change",()=>{const Ge=Array.prototype.filter.call(r.options,Be=>Be.selected).map(Be=>t?looseToNumber(getValue$1(Be)):getValue$1(Be));r[assignKey](r.multiple?Oe?new Set(Ge):Ge:Ge[0]),r._assigning=!0,nextTick(()=>{r._assigning=!1})}),r[assignKey]=getModelAssigner(ke)},mounted(r,{value:e}){setSelected(r,e)},beforeUpdate(r,e,t){r[assignKey]=getModelAssigner(t)},updated(r,{value:e}){r._assigning||setSelected(r,e)}};function setSelected(r,e){const t=r.multiple,ke=isArray$1(e);if(!(t&&!ke&&!isSet(e))){for(let Oe=0,Ge=r.options.length;Oe<Ge;Oe++){const Be=r.options[Oe],je=getValue$1(Be);if(t)if(ke){const Ve=typeof je;Ve==="string"||Ve==="number"?Be.selected=e.some(Ze=>String(Ze)===String(je)):Be.selected=looseIndexOf(e,je)>-1}else Be.selected=e.has(je);else if(looseEqual(getValue$1(Be),e)){r.selectedIndex!==Oe&&(r.selectedIndex=Oe);return}}!t&&r.selectedIndex!==-1&&(r.selectedIndex=-1)}}function getValue$1(r){return"_value"in r?r._value:r.value}function getCheckboxValue(r,e){const t=e?"_trueValue":"_falseValue";return t in r?r[t]:e}const vModelDynamic={created(r,e,t){callModelHook(r,e,t,null,"created")},mounted(r,e,t){callModelHook(r,e,t,null,"mounted")},beforeUpdate(r,e,t,ke){callModelHook(r,e,t,ke,"beforeUpdate")},updated(r,e,t,ke){callModelHook(r,e,t,ke,"updated")}};function resolveDynamicModel(r,e){switch(r){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(e){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(r,e,t,ke,Oe){const Be=resolveDynamicModel(r.tagName,t.props&&t.props.type)[Oe];Be&&Be(r,e,t,ke)}function initVModelForSSR(){vModelText.getSSRProps=({value:r})=>({value:r}),vModelRadio.getSSRProps=({value:r},e)=>{if(e.props&&looseEqual(e.props.value,r))return{checked:!0}},vModelCheckbox.getSSRProps=({value:r},e)=>{if(isArray$1(r)){if(e.props&&looseIndexOf(r,e.props.value)>-1)return{checked:!0}}else if(isSet(r)){if(e.props&&r.has(e.props.value))return{checked:!0}}else if(r)return{checked:!0}},vModelDynamic.getSSRProps=(r,e)=>{if(typeof e.type!="string")return;const t=resolveDynamicModel(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(r,e)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:r=>r.stopPropagation(),prevent:r=>r.preventDefault(),self:r=>r.target!==r.currentTarget,ctrl:r=>!r.ctrlKey,shift:r=>!r.shiftKey,alt:r=>!r.altKey,meta:r=>!r.metaKey,left:r=>"button"in r&&r.button!==0,middle:r=>"button"in r&&r.button!==1,right:r=>"button"in r&&r.button!==2,exact:(r,e)=>systemModifiers.some(t=>r[`${t}Key`]&&!e.includes(t))},withModifiers=(r,e)=>{const t=r._withMods||(r._withMods={}),ke=e.join(".");return t[ke]||(t[ke]=(Oe,...Ge)=>{for(let Be=0;Be<e.length;Be++){const je=modifierGuards[e[Be]];if(je&&je(Oe,e))return}return r(Oe,...Ge)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(r,e)=>{const t=r._withKeys||(r._withKeys={}),ke=e.join(".");return t[ke]||(t[ke]=Oe=>{if(!("key"in Oe))return;const Ge=hyphenate(Oe.key);if(e.some(Be=>Be===Ge||keyNames[Be]===Ge))return r(Oe)})},rendererOptions=extend$5({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$1=(...r)=>{ensureRenderer().render(...r)},hydrate=(...r)=>{ensureHydrationRenderer().hydrate(...r)},createApp=(...r)=>{const e=ensureRenderer().createApp(...r),{mount:t}=e;return e.mount=ke=>{const Oe=normalizeContainer(ke);if(!Oe)return;const Ge=e._component;!isFunction$1(Ge)&&!Ge.render&&!Ge.template&&(Ge.template=Oe.innerHTML),Oe.nodeType===1&&(Oe.textContent="");const Be=t(Oe,!1,resolveRootNamespace(Oe));return Oe instanceof Element&&(Oe.removeAttribute("v-cloak"),Oe.setAttribute("data-v-app","")),Be},e},createSSRApp=(...r)=>{const e=ensureHydrationRenderer().createApp(...r),{mount:t}=e;return e.mount=ke=>{const Oe=normalizeContainer(ke);if(Oe)return t(Oe,!0,resolveRootNamespace(Oe))},e};function resolveRootNamespace(r){if(r instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&r instanceof MathMLElement)return"mathml"}function normalizeContainer(r){return isString(r)?document.querySelector(r):r}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const compile=()=>{},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,BaseTransitionPropsValidators,Comment,DeprecationTypes,EffectScope,ErrorCodes,ErrorTypeStrings,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text:Text$1,TrackOpTypes,Transition,TransitionGroup,TriggerOpTypes,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,devtools,effect,effectScope,getCurrentInstance,getCurrentScope,getCurrentWatcher,getTransitionRawChildren,guardReactiveProps,h:h$2,handleError,hasInjectionContext,hydrate,hydrateOnIdle,hydrateOnInteraction,hydrateOnMediaQuery,hydrateOnVisible,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,onWatcherCleanup,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render:render$1,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue:toValue$1,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useHost,useId,useModel,useSSRContext,useShadowRoot,useSlots,useTemplateRef,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$3,warn:warn$2,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));var isVue2=!1;/*!
 * pinia v2.3.0
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=r=>activePinia=r,piniaSymbol=Symbol();function isPlainObject(r){return r&&typeof r=="object"&&Object.prototype.toString.call(r)==="[object Object]"&&typeof r.toJSON!="function"}var MutationType;(function(r){r.direct="direct",r.patchObject="patch object",r.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const r=effectScope(!0),e=r.run(()=>ref({}));let t=[],ke=[];const Oe=markRaw({install(Ge){setActivePinia(Oe),Oe._a=Ge,Ge.provide(piniaSymbol,Oe),Ge.config.globalProperties.$pinia=Oe,ke.forEach(Be=>t.push(Be)),ke=[]},use(Ge){return!this._a&&!isVue2?ke.push(Ge):t.push(Ge),this},_p:t,_a:null,_e:r,_s:new Map,state:e});return Oe}const noop$2=()=>{};function addSubscription(r,e,t,ke=noop$2){r.push(e);const Oe=()=>{const Ge=r.indexOf(e);Ge>-1&&(r.splice(Ge,1),ke())};return!t&&getCurrentScope()&&onScopeDispose(Oe),Oe}function triggerSubscriptions(r,...e){r.slice().forEach(t=>{t(...e)})}const fallbackRunWithContext=r=>r(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(r,e){r instanceof Map&&e instanceof Map?e.forEach((t,ke)=>r.set(ke,t)):r instanceof Set&&e instanceof Set&&e.forEach(r.add,r);for(const t in e){if(!e.hasOwnProperty(t))continue;const ke=e[t],Oe=r[t];isPlainObject(Oe)&&isPlainObject(ke)&&r.hasOwnProperty(t)&&!isRef(ke)&&!isReactive(ke)?r[t]=mergeReactiveObjects(Oe,ke):r[t]=ke}return r}const skipHydrateSymbol=Symbol();function shouldHydrate(r){return!isPlainObject(r)||!r.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(r){return!!(isRef(r)&&r.effect)}function createOptionsStore(r,e,t,ke){const{state:Oe,actions:Ge,getters:Be}=e,je=t.state.value[r];let Ve;function Ze(){je||(t.state.value[r]=Oe?Oe():{});const Qe=toRefs(t.state.value[r]);return assign$1(Qe,Ge,Object.keys(Be||{}).reduce((en,tn)=>(en[tn]=markRaw(computed(()=>{setActivePinia(t);const an=t._s.get(r);return Be[tn].call(an,an)})),en),{}))}return Ve=createSetupStore(r,Ze,e,t,ke,!0),Ve}function createSetupStore(r,e,t={},ke,Oe,Ge){let Be;const je=assign$1({actions:{}},t),Ve={deep:!0};let Ze,Qe,en=[],tn=[],an;const cn=ke.state.value[r];!Ge&&!cn&&(ke.state.value[r]={}),ref({});let dn;function hn(Sn){let Mn;Ze=Qe=!1,typeof Sn=="function"?(Sn(ke.state.value[r]),Mn={type:MutationType.patchFunction,storeId:r,events:an}):(mergeReactiveObjects(ke.state.value[r],Sn),Mn={type:MutationType.patchObject,payload:Sn,storeId:r,events:an});const Tn=dn=Symbol();nextTick().then(()=>{dn===Tn&&(Ze=!0)}),Qe=!0,triggerSubscriptions(en,Mn,ke.state.value[r])}const fn=Ge?function(){const{state:Mn}=t,Tn=Mn?Mn():{};this.$patch(En=>{assign$1(En,Tn)})}:noop$2;function pn(){Be.stop(),en=[],tn=[],ke._s.delete(r)}const mn=(Sn,Mn="")=>{if(ACTION_MARKER in Sn)return Sn[ACTION_NAME]=Mn,Sn;const Tn=function(){setActivePinia(ke);const En=Array.from(arguments),An=[],Ln=[];function Rn(jn){An.push(jn)}function Gn(jn){Ln.push(jn)}triggerSubscriptions(tn,{args:En,name:Tn[ACTION_NAME],store:Cn,after:Rn,onError:Gn});let Nn;try{Nn=Sn.apply(this&&this.$id===r?this:Cn,En)}catch(jn){throw triggerSubscriptions(Ln,jn),jn}return Nn instanceof Promise?Nn.then(jn=>(triggerSubscriptions(An,jn),jn)).catch(jn=>(triggerSubscriptions(Ln,jn),Promise.reject(jn))):(triggerSubscriptions(An,Nn),Nn)};return Tn[ACTION_MARKER]=!0,Tn[ACTION_NAME]=Mn,Tn},yn={_p:ke,$id:r,$onAction:addSubscription.bind(null,tn),$patch:hn,$reset:fn,$subscribe(Sn,Mn={}){const Tn=addSubscription(en,Sn,Mn.detached,()=>En()),En=Be.run(()=>watch(()=>ke.state.value[r],An=>{(Mn.flush==="sync"?Qe:Ze)&&Sn({storeId:r,type:MutationType.direct,events:an},An)},assign$1({},Ve,Mn)));return Tn},$dispose:pn},Cn=reactive(yn);ke._s.set(r,Cn);const bn=(ke._a&&ke._a.runWithContext||fallbackRunWithContext)(()=>ke._e.run(()=>(Be=effectScope()).run(()=>e({action:mn}))));for(const Sn in bn){const Mn=bn[Sn];if(isRef(Mn)&&!isComputed(Mn)||isReactive(Mn))Ge||(cn&&shouldHydrate(Mn)&&(isRef(Mn)?Mn.value=cn[Sn]:mergeReactiveObjects(Mn,cn[Sn])),ke.state.value[r][Sn]=Mn);else if(typeof Mn=="function"){const Tn=mn(Mn,Sn);bn[Sn]=Tn,je.actions[Sn]=Mn}}return assign$1(Cn,bn),assign$1(toRaw(Cn),bn),Object.defineProperty(Cn,"$state",{get:()=>ke.state.value[r],set:Sn=>{hn(Mn=>{assign$1(Mn,Sn)})}}),ke._p.forEach(Sn=>{assign$1(Cn,Be.run(()=>Sn({store:Cn,app:ke._a,pinia:ke,options:je})))}),cn&&Ge&&t.hydrate&&t.hydrate(Cn.$state,cn),Ze=!0,Qe=!0,Cn}/*! #__NO_SIDE_EFFECTS__ */function defineStore(r,e,t){let ke,Oe;const Ge=typeof e=="function";typeof r=="string"?(ke=r,Oe=Ge?t:e):(Oe=r,ke=r.id);function Be(je,Ve){const Ze=hasInjectionContext();return je=je||(Ze?inject(piniaSymbol,null):null),je&&setActivePinia(je),je=activePinia,je._s.has(ke)||(Ge?createSetupStore(ke,e,Oe,je):createOptionsStore(ke,Oe,je)),je._s.get(ke)}return Be.$id=ke,Be}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function getAugmentedNamespace(r){if(r.__esModule)return r;var e=r.default;if(typeof e=="function"){var t=function ke(){return this instanceof ke?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(r).forEach(function(ke){var Oe=Object.getOwnPropertyDescriptor(r,ke);Object.defineProperty(t,ke,Oe.get?Oe:{enumerable:!0,get:function(){return r[ke]}})}),t}var dist={},logger$F={};const require$$0=getAugmentedNamespace(vue_runtime_esmBundler);Object.defineProperty(logger$F,"__esModule",{value:!0});logger$F.useLogger=logger$F.createLogger=logger$F.VueLogger=void 0;const vue_1=require$$0,isProduction$1=!0,loggerSymbol=Symbol("vue-logger-plugin"),levels=["debug","info","warn","error","log"],defaultOptions={enabled:!0,consoleEnabled:!0,level:"debug",callerInfo:!1,prefixFormat:({level:r,caller:e})=>e?`[${r.toUpperCase()}] [${e==null?void 0:e.fileName}:${e==null?void 0:e.functionName}:${e==null?void 0:e.lineNumber}]`:`[${r.toUpperCase()}]`};class VueLogger{constructor(e){this.apply(e),this._consoleFunctions=levels.filter(t=>typeof console[t]=="function")}apply(e){const t=this._options||defaultOptions;this._options={...t,...e},this.installHooks(this._options.beforeHooks),this.installHooks(this._options.afterHooks)}debug(...e){this.invoke("debug",...e).then(()=>{}).catch(()=>{})}info(...e){this.invoke("info",...e).then(()=>{}).catch(()=>{})}warn(...e){this.invoke("warn",...e).then(()=>{}).catch(()=>{})}error(...e){this.invoke("error",...e).then(()=>{}).catch(()=>{})}log(...e){this.invoke("log",...e).then(()=>{}).catch(()=>{})}async invoke(e,...t){if(this._options.enabled&&levels.indexOf(e)>=levels.indexOf(this._options.level)){const ke=this._options.callerInfo?this.getCallerInfo():void 0,Oe={level:e,caller:ke,argumentArray:t};if(await this.invokeHooks(this._options.beforeHooks,Oe),this._options.consoleEnabled){const Ge=this._options.prefixFormat({level:e,caller:ke});this._consoleFunctions.indexOf(e)>=0?console[e](Ge,...t):console.log(Ge,...t)}await this.invokeHooks(this._options.afterHooks,Oe)}}installHooks(e){if(e&&e.length>0){for(const t of e)if(t.install)try{t.install(this._options)}catch(ke){console.warn("LoggerHook install failure",ke)}}}async invokeHooks(e,t){if(e&&e.length>0)for(const ke of e)try{await ke.run(t)}catch(Oe){console.warn("LoggerHook run failure",Oe)}}getCallerInfo(){const e=new Error;if(e.stack)try{const ke=e.stack.split(`
`)[0].startsWith("Error")?4:3,Oe=e.stack.split(`
`)[ke].trim().replace("(","").replace(")","");let Ge;Oe.indexOf("at ")>-1?Ge=Oe.substring(Oe.indexOf("at ")+3,Oe.lastIndexOf(" ")).split(".").reverse()[0]:Oe.indexOf("@")>-1&&(Ge=Oe.substring(0,Oe.indexOf("@")));const Be=Oe.split(":").reverse(),je=Be[2].substring(Math.max(Be[2].lastIndexOf("/"),Be[2].lastIndexOf("\\"))+1).split("?")[0],Ve=Be[1];return{functionName:Ge,fileName:je,lineNumber:Ve}}catch{}}get enabled(){return this._options.enabled}get level(){return this._options.level}install(e){e.provide(loggerSymbol,this),e.config.globalProperties.$log=this,e.config.globalProperties.$logger=this}}logger$F.VueLogger=VueLogger;function createLogger(r={}){return new VueLogger(r)}logger$F.createLogger=createLogger;function useLogger(){const r=vue_1.inject(loggerSymbol);return!r&&!isProduction$1&&console.warn("vue-logger-plugin :: useLogger missing inject"),r}logger$F.useLogger=useLogger;var hooks={};Object.defineProperty(hooks,"__esModule",{value:!0});hooks.StringifyAndParseObjectsHook=hooks.StringifyObjectsHook=void 0;hooks.StringifyObjectsHook={run(r){for(let e=0;e<r.argumentArray.length;e++)r.argumentArray[e]!=null&&typeof r.argumentArray[e]=="object"&&(r.argumentArray[e]=JSON.stringify(r.argumentArray[e]))}};hooks.StringifyAndParseObjectsHook={run(r){for(let e=0;e<r.argumentArray.length;e++)r.argumentArray[e]!=null&&typeof r.argumentArray[e]=="object"&&(r.argumentArray[e]=JSON.parse(JSON.stringify(r.argumentArray[e])))}};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.StringifyAndParseObjectsHook=r.StringifyObjectsHook=r.useLogger=r.createLogger=r.VueLogger=void 0;var e=logger$F;Object.defineProperty(r,"VueLogger",{enumerable:!0,get:function(){return e.VueLogger}}),Object.defineProperty(r,"createLogger",{enumerable:!0,get:function(){return e.createLogger}}),Object.defineProperty(r,"useLogger",{enumerable:!0,get:function(){return e.useLogger}});var t=hooks;Object.defineProperty(r,"StringifyObjectsHook",{enumerable:!0,get:function(){return t.StringifyObjectsHook}}),Object.defineProperty(r,"StringifyAndParseObjectsHook",{enumerable:!0,get:function(){return t.StringifyAndParseObjectsHook}})})(dist);const scriptRel="modulepreload",assetsURL=function(r){return"/cartes.gouv.fr-entree-carto/"+r},seen={},__vitePreload=function(e,t,ke){let Oe=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const Be=document.querySelector("meta[property=csp-nonce]"),je=(Be==null?void 0:Be.nonce)||(Be==null?void 0:Be.getAttribute("nonce"));Oe=Promise.allSettled(t.map(Ve=>{if(Ve=assetsURL(Ve),Ve in seen)return;seen[Ve]=!0;const Ze=Ve.endsWith(".css"),Qe=Ze?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Ve}"]${Qe}`))return;const en=document.createElement("link");if(en.rel=Ze?"stylesheet":scriptRel,Ze||(en.as="script"),en.crossOrigin="",en.href=Ve,je&&en.setAttribute("nonce",je),document.head.appendChild(en),Ze)return new Promise((tn,an)=>{en.addEventListener("load",tn),en.addEventListener("error",()=>an(new Error(`Unable to preload CSS for ${Ve}`)))})}))}function Ge(Be){const je=new Event("vite:preloadError",{cancelable:!0});if(je.payload=Be,window.dispatchEvent(je),!je.defaultPrevented)throw Be}return Oe.then(Be=>{for(const je of Be||[])je.status==="rejected"&&Ge(je.reason);return e().catch(Ge)})},eulerianSymbol=Symbol("vue-eulerian-plugin");class Eulerian{constructor(e){console.debug(e),this.options=e,window.dsfr={verbose:e.verbose,mode:"vue"},window.dsfr.analytics=e,this.key="@codegouvfr/react-dsfr finalityConsent eulerianAnalytics",this.status=!1,this.load().then(()=>{console.debug("import dynamic dsfr !");var t=JSON.parse(localStorage.getItem(this.key));t&&(t.eulerianAnalytics?this.start():this.stop())})}async load(){await __vitePreload(()=>import("./dsfr.module-LPRVXo12.js"),[]).then(()=>{console.debug("import dynamic dsfr.module !")}),await __vitePreload(()=>import("./analytics.module-DYklPv7z.js"),[]).then(()=>{console.debug("import dynamic analytics.module !")})}start(){console.debug("start"),localStorage.setItem(this.key,'{"eulerianAnalytics":true,"isFullConsent":true}'),window.dsfr.analytics.opt.enable(),window.dsfr.start(),window.dsfr.analytics.readiness.then(()=>{console.debug("start promise !"),this.options.verbose||(window.dsfr.inspector.level=10),window.dsfr.analytics.reset(),window.dsfr.analytics.collect()}),this.status=!0}stop(){console.debug("stop"),localStorage.setItem(this.key,'{"eulerianAnalytics":false,"isFullConsent":false}'),window.dsfr.stop(),this.status=!1}pause(){this.status&&window.dsfr.stop(),console.debug("pause",this.status)}resume(){this.status&&window.dsfr.start(),console.debug("resume",this.status)}getKey(){return this.key}setKey(e){this.key=e}hasKey(){var e=localStorage.getItem(this.key);return!!e}install(e){e.provide(eulerianSymbol,this),e.config.globalProperties.$eulerian=this}}function createEulerian(r){return new Eulerian(r)}function useEulerian(){return inject(eulerianSymbol)}const l$1={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","&":"&amp;"};let h$1=0;var f$1=r=>r.replace(/[<>"&]/g,e=>l$1[e]||e),p$1=r=>r+h$1++;const u$1={},m$1=r=>{const{name:e,paths:t=[],d:ke,polygons:Oe=[],points:Ge}=r;ke&&t.push({d:ke}),Ge&&Oe.push({points:Ge}),u$1[e]=Object.assign({},r,{paths:t,polygons:Oe}),u$1[e].minX||(u$1[e].minX=0),u$1[e].minY||(u$1[e].minY=0)},c$1=(...r)=>{for(const e of r)m$1(e)},g$1=defineComponent({name:"OhVueIcon",props:{name:{type:String,validator:r=>!r||r in u$1||(console.warn(`Invalid prop: prop "name" is referring to an unregistered icon "${r}".
Please make sure you have imported this icon before using it.`),!1)},title:String,fill:String,scale:{type:[Number,String],default:1},animation:{validator:r=>["spin","spin-pulse","wrench","ring","pulse","flash","float"].includes(r)},hover:Boolean,flip:{validator:r=>["horizontal","vertical","both"].includes(r)},speed:{validator:r=>r==="fast"||r==="slow"},label:String,inverse:Boolean},setup(r){const e=ref([]),t=reactive({outerScale:1.2,x:null,y:null}),ke=reactive({width:0,height:0}),Oe=computed(()=>{const dn=Number(r.scale);return isNaN(dn)||dn<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),t.outerScale):dn*t.outerScale}),Ge=computed(()=>({"ov-icon":!0,"ov-inverse":r.inverse,"ov-flip-horizontal":r.flip==="horizontal","ov-flip-vertical":r.flip==="vertical","ov-flip-both":r.flip==="both","ov-spin":r.animation==="spin","ov-spin-pulse":r.animation==="spin-pulse","ov-wrench":r.animation==="wrench","ov-ring":r.animation==="ring","ov-pulse":r.animation==="pulse","ov-flash":r.animation==="flash","ov-float":r.animation==="float","ov-hover":r.hover,"ov-fast":r.speed==="fast","ov-slow":r.speed==="slow"})),Be=computed(()=>r.name?u$1[r.name]:null),je=computed(()=>Be.value?`${Be.value.minX} ${Be.value.minY} ${Be.value.width} ${Be.value.height}`:`0 0 ${Ze.value} ${Qe.value}`),Ve=computed(()=>{if(!Be.value)return 1;const{width:dn,height:hn}=Be.value;return Math.max(dn,hn)/16}),Ze=computed(()=>ke.width||Be.value&&Be.value.width/Ve.value*Oe.value||0),Qe=computed(()=>ke.height||Be.value&&Be.value.height/Ve.value*Oe.value||0),en=computed(()=>Oe.value!==1&&{fontSize:Oe.value+"em"}),tn=computed(()=>{if(!Be.value||!Be.value.raw)return null;const dn={};let hn=Be.value.raw;return hn=hn.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,(fn,pn,mn)=>{const yn=p$1("vat-");return dn[mn]=yn,` id="${yn}"`}),hn=hn.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(fn,pn,mn,yn)=>{const Cn=pn||yn;return Cn&&dn[Cn]?`#${dn[Cn]}`:fn}),hn}),an=computed(()=>Be.value&&Be.value.attr?Be.value.attr:{}),cn=()=>{if(!r.name&&r.name!==null&&e.value.length===0)return void console.warn('Invalid prop: prop "name" is required.');if(Be.value)return;let dn=0,hn=0;e.value.forEach(fn=>{fn.outerScale=Oe.value,dn=Math.max(dn,fn.width),hn=Math.max(hn,fn.height)}),ke.width=dn,ke.height=hn,e.value.forEach(fn=>{fn.x=(dn-fn.width)/2,fn.y=(hn-fn.height)/2})};return onMounted(()=>{cn()}),onUpdated(()=>{cn()}),{...toRefs(t),children:e,icon:Be,klass:Ge,style:en,width:Ze,height:Qe,box:je,attribs:an,raw:tn}},created(){const r=this.$parent;r&&r.children&&r.children.push(this)},render(){const r=Object.assign({role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":!(this.label||this.title),width:this.width,height:this.height,viewBox:this.box},this.attribs);this.attribs.stroke?r.stroke=this.fill?this.fill:"currentColor":r.fill=this.fill?this.fill:"currentColor",this.x&&(r.x=this.x.toString()),this.y&&(r.y=this.y.toString());let e={class:this.klass,style:this.style};if(e=Object.assign(e,r),this.raw){const Oe=this.title?`<title>${f$1(this.title)}</title>${this.raw}`:this.raw;e.innerHTML=Oe}const t=this.title?[h$2("title",this.title)]:[],ke=(Oe,Ge,Be)=>h$2(Oe,{...Ge,key:`${Oe}-${Be}`});return h$2("svg",e,this.raw?void 0:t.concat([this.$slots.default?this.$slots.default():this.icon?[...this.icon.paths.map((Oe,Ge)=>ke("path",Oe,Ge)),...this.icon.polygons.map((Oe,Ge)=>ke("polygon",Oe,Ge))]:[]]))}});function w$1(r,e){e===void 0&&(e={});var t=e.insertAt;if(r&&typeof document<"u"){var ke=document.head||document.getElementsByTagName("head")[0],Oe=document.createElement("style");Oe.type="text/css",t==="top"&&ke.firstChild?ke.insertBefore(Oe,ke.firstChild):ke.appendChild(Oe),Oe.styleSheet?Oe.styleSheet.cssText=r:Oe.appendChild(document.createTextNode(r))}}w$1(`.ov-icon {
  display: inline-block;
  overflow: visible;
  vertical-align: -0.2em;
}
`);w$1(`/* ---------------- spin ---------------- */
.ov-spin:not(.ov-hover),
.ov-spin.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-spin {
  animation: ov-spin 1s linear infinite;
}

.ov-spin:not(.ov-hover).ov-fast,
.ov-spin.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-spin.ov-fast {
  animation: ov-spin 0.7s linear infinite;
}

.ov-spin:not(.ov-hover).ov-slow,
.ov-spin.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-spin.ov-slow {
  animation: ov-spin 2s linear infinite;
}

/* ---------------- spin-pulse ---------------- */

.ov-spin-pulse:not(.ov-hover),
.ov-spin-pulse.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse {
  animation: ov-spin 1s infinite steps(8);
}

.ov-spin-pulse:not(.ov-hover).ov-fast,
.ov-spin-pulse.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse.ov-fast {
  animation: ov-spin 0.7s infinite steps(8);
}

.ov-spin-pulse:not(.ov-hover).ov-slow,
.ov-spin-pulse.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse.ov-slow {
  animation: ov-spin 2s infinite steps(8);
}

@keyframes ov-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* ---------------- wrench ---------------- */
.ov-wrench:not(.ov-hover),
.ov-wrench.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-wrench {
  animation: ov-wrench 2.5s ease infinite;
}

.ov-wrench:not(.ov-hover).ov-fast,
.ov-wrench.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-wrench.ov-fast {
  animation: ov-wrench 1.2s ease infinite;
}

.ov-wrench:not(.ov-hover).ov-slow,
.ov-wrench.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-wrench.ov-slow {
  animation: ov-wrench 3.7s ease infinite;
}

@keyframes ov-wrench {
  0% {
    transform: rotate(-12deg);
  }

  8% {
    transform: rotate(12deg);
  }

  10%, 28%, 30%, 48%, 50%, 68% {
    transform: rotate(24deg);
  }

  18%, 20%, 38%, 40%, 58%, 60% {
    transform: rotate(-24deg);
  }

  75%, 100% {
    transform: rotate(0deg);
  }
}

/* ---------------- ring ---------------- */
.ov-ring:not(.ov-hover),
.ov-ring.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-ring {
  animation: ov-ring 2s ease infinite;
}

.ov-ring:not(.ov-hover).ov-fast,
.ov-ring.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-ring.ov-fast {
  animation: ov-ring 1s ease infinite;
}

.ov-ring:not(.ov-hover).ov-slow,
.ov-ring.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-ring.ov-slow {
  animation: ov-ring 3s ease infinite;
}

@keyframes ov-ring {
  0% {
    transform: rotate(-15deg);
  }

  2% {
    transform: rotate(15deg);
  }

  4%, 12% {
    transform: rotate(-18deg);
  }

  6% {
    transform: rotate(18deg);
  }

  8% {
    transform: rotate(-22deg);
  }

  10% {
    transform: rotate(22deg);
  }

  12% {
    transform: rotate(-18deg);
  }

  14% {
    transform: rotate(18deg);
  }

  16% {
    transform: rotate(-12deg);
  }

  18% {
    transform: rotate(12deg);
  }

  20%, 100% {
    transform: rotate(0deg);
  }
}

/* ---------------- pulse ---------------- */
.ov-pulse:not(.ov-hover),
.ov-pulse.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-pulse {
  animation: ov-pulse 2s linear infinite;
}

.ov-pulse:not(.ov-hover).ov-fast,
.ov-pulse.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-pulse.ov-fast {
  animation: ov-pulse 1s linear infinite;
}

.ov-pulse:not(.ov-hover).ov-slow,
.ov-pulse.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-pulse.ov-slow {
  animation: ov-pulse 3s linear infinite;
}

@keyframes ov-pulse {
  0% {
    transform: scale(1.1);
  }

  50% {
    transform: scale(0.8);
  }

  100% {
    transform: scale(1.1);
  }
}

/* ---------------- flash ---------------- */
.ov-flash:not(.ov-hover),
.ov-flash.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-flash {
  animation: ov-flash 2s ease infinite;
}

.ov-flash:not(.ov-hover).ov-fast,
.ov-flash.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-flash.ov-fast {
  animation: ov-flash 1s ease infinite;
}

.ov-flash:not(.ov-hover).ov-slow,
.ov-flash.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-flash.ov-slow {
  animation: ov-flash 3s ease infinite;
}

@keyframes ov-flash {
  0%, 100%, 50%{
    opacity: 1;
  }
  25%, 75%{
    opacity: 0;
  }
}

/* ---------------- float ---------------- */
.ov-float:not(.ov-hover),
.ov-float.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-float {
  animation: ov-float 2s linear infinite;
}

.ov-float:not(.ov-hover).ov-fast,
.ov-float.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-float.ov-fast {
  animation: ov-float 1s linear infinite;
}

.ov-float:not(.ov-hover).ov-slow,
.ov-float.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-float.ov-slow {
  animation: ov-float 3s linear infinite;
}

@keyframes ov-float {
  0%, 100% {
    transform: translateY(-3px);
  }
  50% {
    transform: translateY(3px);
  }
}
`);w$1(`.ov-flip-horizontal {
  transform: scale(-1, 1);
}

.ov-flip-vertical {
  transform: scale(1, -1);
}

.ov-flip-both {
  transform: scale(-1, -1);
}

.ov-inverse {
  color: #fff;
}
`);const la="abcdefghijklmnopqrstuvwyz0123456789",Ke=la.repeat(10),sa=()=>{const r=Math.floor(Math.random()*Ke.length);return Ke[r]},oa=r=>Array.from({length:r}).map(sa).join(""),j$1=(r="",e="")=>(r?`${r}-`:"")+oa(5)+(e?`-${e}`:""),ia="(prefers-color-scheme: dark)",Me="vue-dsfr-scheme",Ie="light",_e="dark",ge$1="system",We="data-fr-theme",Pe=r=>{const e=r??(localStorage.getItem(Me)||ge$1);return[Ie,_e,ge$1].includes(e)?e:ge$1},Ue=(r,e)=>(r=Pe(r),r===ge$1?e!=null&&e.matches?_e:Ie:r),Hc=r=>{if(typeof window>"u")return;const e={scheme:localStorage.getItem(Me)||ge$1,dataThemeAttribute:We,...r},t=window.matchMedia&&window.matchMedia(ia),ke=ref(Pe(e.scheme));localStorage.setItem(Me,ke.value);const Oe=ref(Ue(ke.value,t)),Ge=ref(ke.value!==ge$1);watchEffect(()=>{var Qe;(Qe=document.body.parentElement)==null||Qe.setAttribute(e.dataThemeAttribute||We,Oe.value)}),t==null||t.addEventListener("change",Qe=>{Ge.value||(Qe.matches?Oe.value=_e:Oe.value=Ie)}),!Ge.value&&t!=null&&t.matches&&(Oe.value=_e);const Be=Qe=>{if(ke.value=Pe(Qe),localStorage.setItem(Me,ke.value),[Ie,_e].includes(ke.value)){Oe.value=ke.value,Ge.value=!0;return}Oe.value=Ue(ke.value,t),Ge.value=!1},je=document.documentElement,Ve={subtree:!1,childList:!1,attributes:!0},Ze=new MutationObserver(Qe=>{for(const en of Qe)if(en.type==="attributes"&&en.attributeName==="data-fr-theme"){const tn=en.target.getAttribute(en.attributeName);tn!==ke.value&&Be(tn)}});return Ze.observe(je,Ve),window.addEventListener("unload",()=>Ze.disconnect()),Be(ke.value),{setScheme:Be,theme:computed(()=>Oe.value),scheme:computed(()=>ke.value)}},ce$1=()=>{const r=ref(),e=ref(!1),t=ref(!1),ke=()=>{if(!r.value)return;r.value.style.setProperty("--collapser","none");const Oe=r.value.offsetHeight;r.value.style.setProperty("--collapse",`${-Oe}px`),r.value.style.setProperty("--collapser","")};return{collapse:r,collapsing:e,cssExpanded:t,doExpand:Oe=>{r.value&&(Oe===!0&&r.value.style.setProperty("--collapse-max-height","none"),window.requestAnimationFrame(()=>{e.value=!0,ke(),window.requestAnimationFrame(()=>{t.value=Oe})}))},adjust:ke,onTransitionEnd:Oe=>{e.value=!1,r.value&&Oe===!1&&r.value.style.removeProperty("--collapse-max-height")}}},da={class:"fr-accordion"},ua$1=["aria-expanded","aria-controls"],ca=["id"],fa=defineComponent({__name:"DsfrAccordion",props:{id:{default:()=>j$1("accordion")},expandedId:{default:void 0},title:{default:"Sans intitulé"},titleTag:{default:"h3"}},emits:["expand"],setup(r,{emit:e}){const t=r,ke=e,{collapse:Oe,collapsing:Ge,cssExpanded:Be,doExpand:je,onTransitionEnd:Ve}=ce$1(),Ze=computed(()=>t.expandedId===t.id);onMounted(()=>{Ze.value&&je(!0)}),watch(Ze,(en,tn)=>{en!==tn&&je(en)});const Qe=()=>{ke("expand",Ze.value?void 0:t.id)};return(en,tn)=>(openBlock(),createElementBlock("section",da,[(openBlock(),createBlock(resolveDynamicComponent(en.titleTag),{class:"fr-accordion__title"},{default:withCtx(()=>[createBaseVNode("button",{class:"fr-accordion__btn","aria-expanded":Ze.value,"aria-controls":en.id,type:"button",onClick:tn[0]||(tn[0]=an=>Qe())},[renderSlot(en.$slots,"title",{},()=>[createBaseVNode("span",null,toDisplayString(en.title),1)])],8,ua$1)]),_:3})),createBaseVNode("div",{id:en.id,ref_key:"collapse",ref:Oe,class:normalizeClass(["fr-collapse",{"fr-collapse--expanded":unref(Be),"fr-collapsing":unref(Ge)}]),onTransitionend:tn[1]||(tn[1]=an=>unref(Ve)(Ze.value))},[renderSlot(en.$slots,"default")],42,ca)]))}}),pa=defineComponent({__name:"DsfrAccordionsGroup",setup(r){const e=ref(),t=ke=>{e.value=ke};return(ke,Oe)=>(openBlock(),createElementBlock("ul",{class:"fr-accordions-group",onExpand:Oe[0]||(Oe[0]=Ge=>t(Ge))},[renderSlot(ke.$slots,"default",{expandedId:e.value})],32))}}),ha=["id"],va={class:"alert-content"},ma={class:"fr-alert__description"},ga=["title","aria-label"],ba=defineComponent({__name:"DsfrAlert",props:{closed:{type:Boolean},closeable:{type:Boolean},id:{default:()=>j$1("basic","alert")},title:{default:""},description:{},small:{type:Boolean},titleTag:{default:"h3"},type:{default:"info"},closeButtonLabel:{default:"Fermer"}},emits:["close"],setup(r,{emit:e}){const t=r,ke=e,Oe=()=>ke("close"),Ge=computed(()=>[`fr-alert--${t.type}`,{"fr-alert--sm":t.small}]);return(Be,je)=>(openBlock(),createBlock(Transition,{name:"slide-fade"},{default:withCtx(()=>[Be.closed?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,id:Be.id,class:normalizeClass(["fr-alert",Ge.value])},[createBaseVNode("div",va,[Be.small?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(Be.titleTag),{key:0,class:"fr-alert__title"},{default:withCtx(()=>[createTextVNode(toDisplayString(Be.title),1)]),_:1})),createBaseVNode("p",ma,[renderSlot(Be.$slots,"default",{},()=>[createTextVNode(toDisplayString(Be.description),1)])])]),Be.closeable?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--close",title:Be.closeButtonLabel,"aria-label":Be.closeButtonLabel,onClick:Oe},null,8,ga)):createCommentVNode("",!0)],10,ha))]),_:3}))}}),Ia=["title","disabled","aria-disabled"],La={key:1},Ca=defineComponent({__name:"DsfrButton",props:{disabled:{type:Boolean},label:{default:void 0},secondary:{type:Boolean},tertiary:{type:Boolean},iconRight:{type:Boolean},iconOnly:{type:Boolean},noOutline:{type:Boolean},size:{default:"md"},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},setup(r,{expose:e}){const t=r,ke=computed(()=>["sm","small"].includes(t.size)),Oe=computed(()=>["md","medium"].includes(t.size)),Ge=computed(()=>["lg","large"].includes(t.size)),Be=ref(null);e({focus:()=>{var Qe;(Qe=Be.value)==null||Qe.focus()}});const je=computed(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),Ve=computed(()=>t.iconOnly?1.25:.8325),Ze=computed(()=>typeof t.icon=="string"?{scale:Ve.value,name:t.icon}:{scale:Ve.value,...t.icon});return(Qe,en)=>(openBlock(),createElementBlock("button",{ref_key:"btn",ref:Be,class:normalizeClass(["fr-btn",{"fr-btn--secondary":Qe.secondary&&!Qe.tertiary,"fr-btn--tertiary":Qe.tertiary&&!Qe.secondary&&!Qe.noOutline,"fr-btn--tertiary-no-outline":Qe.tertiary&&!Qe.secondary&&Qe.noOutline,"fr-btn--sm":ke.value,"fr-btn--md":Oe.value,"fr-btn--lg":Ge.value,"fr-btn--icon-right":!Qe.iconOnly&&je.value&&Qe.iconRight,"fr-btn--icon-left":!Qe.iconOnly&&je.value&&!Qe.iconRight,"inline-flex":!je.value,reverse:Qe.iconRight&&!je.value,"justify-center":!je.value&&Qe.iconOnly,[Qe.icon]:je.value}]),title:Qe.iconOnly?Qe.label:void 0,disabled:Qe.disabled,"aria-disabled":Qe.disabled,style:normalizeStyle(!je.value&&Qe.iconOnly?{"padding-inline":"0.5rem"}:{}),onClick:en[0]||(en[0]=tn=>Qe.onClick?Qe.onClick(tn):()=>{})},[Qe.icon&&!je.value?(openBlock(),createBlock(unref(g$1),normalizeProps(mergeProps({key:0},Ze.value)),null,16)):createCommentVNode("",!0),Qe.iconOnly?createCommentVNode("",!0):(openBlock(),createElementBlock("span",La,[createTextVNode(toDisplayString(Qe.label)+" ",1),renderSlot(Qe.$slots,"default",{},void 0,!0)]))],14,Ia))}}),ae$1=(r,e)=>{const t=r.__vccOpts||r;for(const[ke,Oe]of e)t[ke]=Oe;return t},Ae=ae$1(Ca,[["__scopeId","data-v-d2e9ceaf"]]),Ee=defineComponent({__name:"DsfrButtonGroup",props:{buttons:{default:()=>[]},reverse:{type:Boolean},equisized:{type:Boolean},iconRight:{type:Boolean},align:{default:void 0},inlineLayoutWhen:{type:[String,Boolean],default:"never"},size:{default:"md"}},setup(r){const e=r,t=ref(null),ke=computed(()=>["sm","small"].includes(e.size)),Oe=computed(()=>["md","medium"].includes(e.size)),Ge=computed(()=>["lg","large"].includes(e.size)),Be=computed(()=>["always","",!0].includes(e.inlineLayoutWhen)),je=computed(()=>["sm","small"].includes(e.inlineLayoutWhen)),Ve=computed(()=>["md","medium"].includes(e.inlineLayoutWhen)),Ze=computed(()=>["lg","large"].includes(e.inlineLayoutWhen)),Qe=computed(()=>e.align==="center"),en=computed(()=>e.align==="right"),tn=ref("auto"),an=computed(()=>`--equisized-width: ${tn.value};`),cn=async()=>{var dn;let hn=0;await new Promise(fn=>setTimeout(fn,100)),(dn=t.value)==null||dn.querySelectorAll(".fr-btn").forEach(fn=>{const pn=fn,mn=pn.offsetWidth,yn=window.getComputedStyle(pn),Cn=+yn.marginLeft.replace("px",""),wn=+yn.marginRight.replace("px","");pn.style.width="var(--equisized-width)";const bn=mn+Cn+wn;bn>hn&&(hn=bn)}),tn.value=`${hn}px`};return onMounted(async()=>{!t.value||!e.equisized||await cn()}),(dn,hn)=>(openBlock(),createElementBlock("ul",{ref_key:"buttonsEl",ref:t,style:normalizeStyle(an.value),class:normalizeClass(["fr-btns-group",{"fr-btns-group--equisized":dn.equisized,"fr-btns-group--sm":ke.value,"fr-btns-group--md":Oe.value,"fr-btns-group--lg":Ge.value,"fr-btns-group--inline-sm":Be.value||je.value,"fr-btns-group--inline-md":Be.value||Ve.value,"fr-btns-group--inline-lg":Be.value||Ze.value,"fr-btns-group--center":Qe.value,"fr-btns-group--right":en.value,"fr-btns-group--icon-right":dn.iconRight,"fr-btns-group--inline-reverse":dn.reverse}]),"data-testid":"fr-btns"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(dn.buttons,({onClick:fn,...pn},mn)=>(openBlock(),createElementBlock("li",{key:mn},[createVNode(Ae,mergeProps({ref_for:!0},pn,{onClick:fn}),null,16,["onClick"])]))),128)),renderSlot(dn.$slots,"default")],6))}}),Qa=["id","name","checked","data-testid","data-test"],Ga=["for"],Ka={key:0,class:"required"},Wa={key:0,class:"fr-hint-text"},Ua={key:0,class:"fr-messages-group","aria-live":"assertive",role:"alert"},vt$1=defineComponent({inheritAttrs:!1,__name:"DsfrCheckbox",props:{id:{default:()=>j$1("basic","checkbox")},name:{},required:{type:Boolean},modelValue:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},label:{default:""},errorMessage:{default:""},validMessage:{default:""},hint:{default:""}},emits:["update:modelValue"],setup(r,{emit:e}){const t=r,ke=e,Oe=computed(()=>t.errorMessage||t.validMessage),Ge=computed(()=>t.errorMessage?"fr-error-text":"fr-valid-text"),Be=je=>{ke("update:modelValue",je.target.checked)};return(je,Ve)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":je.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-checkbox-group",{"fr-checkbox-group--error":je.errorMessage,"fr-checkbox-group--valid":!je.errorMessage&&je.validMessage,"fr-checkbox-group--sm":je.small}])},[createBaseVNode("input",mergeProps({id:je.id,name:je.name,type:"checkbox",checked:je.modelValue},je.$attrs,{"data-testid":`input-checkbox-${je.id}`,"data-test":`input-checkbox-${je.id}`,onChange:Ve[0]||(Ve[0]=Ze=>Be(Ze))}),null,16,Qa),createBaseVNode("label",{for:je.id,class:"fr-label"},[renderSlot(je.$slots,"label",{},()=>[createTextVNode(toDisplayString(je.label)+" ",1),renderSlot(je.$slots,"required-tip",{},()=>[je.required?(openBlock(),createElementBlock("span",Ka," *")):createCommentVNode("",!0)])]),je.hint?(openBlock(),createElementBlock("span",Wa,toDisplayString(je.hint),1)):createCommentVNode("",!0)],8,Ga),Oe.value?(openBlock(),createElementBlock("div",Ua,[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",Ge.value])},toDisplayString(Oe.value),3)])):createCommentVNode("",!0)],2)],2))}}),nn={class:"fr-consent-banner__content"},rn={class:"fr-text--sm"},ln$1={class:"fr-consent-banner__buttons fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-sm"},sn=defineComponent({__name:"DsfrConsent",props:{url:{default:""}},emits:["acceptAll","refuseAll","customize"],setup(r){const e=r,t=computed(()=>typeof e.url=="string"&&e.url.startsWith("http")),ke=computed(()=>e.url?t.value?"a":"RouterLink":"a"),Oe=computed(()=>({[t.value?"href":"to"]:e.url}));return(Ge,Be)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",nn,[createBaseVNode("p",rn,[renderSlot(Ge.$slots,"default",{},()=>[createTextVNode(" Bienvenue ! Nous utilisons des cookies pour améliorer votre expérience et les services disponibles sur ce site. Pour en savoir plus, visitez la page "),(openBlock(),createBlock(resolveDynamicComponent(ke.value),mergeProps(Oe.value,{"data-testid":"link"}),{default:withCtx(()=>[createTextVNode(" Données personnelles et cookies ")]),_:1},16)),createTextVNode(". Vous pouvez, à tout moment, avoir le contrôle sur les cookies que vous souhaitez activer. ")])])]),createBaseVNode("ul",ln$1,[createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Autoriser tous les cookies",onClick:Be[0]||(Be[0]=withModifiers(je=>Ge.$emit("acceptAll"),["stop"]))}," Tout accepter ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Refuser tous les cookies",onClick:Be[1]||(Be[1]=withModifiers(je=>Ge.$emit("refuseAll"),["stop"]))}," Tout refuser ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--secondary","data-fr-opened":"false","aria-controls":"fr-consent-modal",title:"Personnaliser les cookies",onClick:Be[2]||(Be[2]=withModifiers(je=>Ge.$emit("customize"),["stop"]))}," Personnaliser ")])])],64))}}),nr=["innerHTML"],Le$1=defineComponent({__name:"DsfrLogo",props:{small:{type:Boolean},large:{type:Boolean},logoText:{default:()=>"Gouvernement"}},setup(r){const e=r,t=computed(()=>Array.isArray(e.logoText)?e.logoText.join("<br>"):e.logoText);return(ke,Oe)=>(openBlock(),createElementBlock("p",{class:normalizeClass(["fr-logo",{"fr-logo--sm":ke.small&&!ke.large,"fr-logo--lg":ke.large&&!ke.small}]),innerHTML:t.value},null,10,nr))}}),rr={class:"fr-footer__partners"},lr={key:0,class:"fr-footer__partners-title"},sr={class:"fr-footer__partners-logos"},or={key:0,class:"fr-footer__partners-main"},ir=["href"],dr=["src","alt"],ur={class:"fr-footer__partners-sub"},cr=["href"],fr=["src","alt"],yt$1=defineComponent({__name:"DsfrFooterPartners",props:{mainPartner:{default:void 0},subPartners:{default:()=>[]},title:{default:""}},setup(r){return(e,t)=>(openBlock(),createElementBlock("div",rr,[e.title?(openBlock(),createElementBlock("h4",lr,toDisplayString(e.title),1)):createCommentVNode("",!0),createBaseVNode("div",sr,[e.mainPartner?(openBlock(),createElementBlock("div",or,[createBaseVNode("a",{class:"fr-footer__partners-link",href:e.mainPartner.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:e.mainPartner.logo,alt:e.mainPartner.name},null,8,dr)],8,ir)])):createCommentVNode("",!0),createBaseVNode("div",ur,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.subPartners,(ke,Oe)=>(openBlock(),createElementBlock("li",{key:Oe},[createBaseVNode("a",{class:"fr-footer__partners-link",href:ke.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:ke.logo,alt:ke.name},null,8,fr)],8,cr)]))),128))])])])]))}}),Je=1,pr=defineComponent({__name:"DsfrFooterLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:void 0},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0}},setup(r){const e=r,t=computed(()=>{var Qe;return(Qe=e.href)==null?void 0:Qe.startsWith("http")}),ke=computed(()=>{var Qe;return(Qe=e.href)==null?void 0:Qe.startsWith("mailto")}),Oe=computed(()=>e.button?"button":t.value||ke.value?"a":"RouterLink"),Ge=computed(()=>{if(!(!t.value&&!ke.value))return e.href}),Be=computed(()=>{if(!(t.value||ke.value))return e.to}),je=computed(()=>Be.value?{to:Be.value}:{href:Ge.value}),Ve=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),Ze=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:Je,...e.iconAttrs??{}}:{scale:Je,...e.icon??{},...e.iconAttrs??{}});return(Qe,en)=>(openBlock(),createBlock(resolveDynamicComponent(Oe.value),mergeProps({class:["fr-footer__bottom-link",{"fr-btn--icon-right":Ve.value&&Qe.iconRight,"fr-btn--icon-left":Ve.value&&!Qe.iconRight,[String(Qe.icon)]:Ve.value}]},je.value,{target:Qe.target,onClick:withModifiers(Qe.onClick,["stop"])}),{default:withCtx(()=>{var tn,an;return[!Ve.value&&(Qe.icon||(tn=Qe.iconAttrs)!=null&&tn.name)&&!Qe.iconRight?(openBlock(),createBlock(unref(g$1),mergeProps({key:0,class:"fr-mr-1w"},Ze.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Qe.label)+" ",1),!Ve.value&&(Qe.icon||(an=Qe.iconAttrs)!=null&&an.name)&&Qe.iconRight?(openBlock(),createBlock(unref(g$1),mergeProps({key:1,class:"fr-ml-1w"},Ze.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),hr={id:"footer",class:"fr-footer",role:"contentinfo"},vr={key:0,class:"fr-footer__top"},mr={class:"fr-container"},gr={class:"fr-grid-row fr-grid-row--start fr-grid-row--gutters"},br={class:"fr-container"},yr={class:"fr-footer__body"},kr={key:0,class:"fr-footer__brand fr-enlarge-link"},wr=["href"],_r=["src","alt"],$r=["src","alt"],Dr={key:1,class:"fr-footer__brand fr-enlarge-link"},Mr={class:"fr-footer__content"},Ir={class:"fr-footer__content-desc"},Lr={class:"fr-footer__content-list"},Cr=["href"],zr={class:"fr-footer__bottom"},Sr={class:"fr-footer__bottom-list"},Tr={key:0,class:"fr-footer__bottom-copy"},Ar=defineComponent({__name:"DsfrFooter",props:{a11yCompliance:{default:"non conforme"},a11yComplianceLink:{default:"/a11y"},legalLink:{default:"/mentions-legales"},homeLink:{default:"/"},homeTitle:{default:"Retour à l’accueil"},partners:{default:()=>{}},personalDataLink:{default:"/donnees-personnelles"},cookiesLink:{default:"/cookies"},logoText:{default:()=>["République","Française"]},descText:{default:void 0},beforeMandatoryLinks:{default:()=>[]},afterMandatoryLinks:{default:()=>[]},mandatoryLinks:{default:r=>[{label:`Accessibilité : ${r.a11yCompliance}`,to:r.a11yComplianceLink},{label:"Mentions légales",to:r.legalLink,"data-testid":"/mentions-legales"},{label:"Données personnelles",to:r.personalDataLink},{label:"Gestion des cookies",to:r.cookiesLink}]},ecosystemLinks:{default:()=>[{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"info.gouv.fr",href:"https://info.gouv.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}]},operatorLinkText:{default:"Revenir à l’accueil"},operatorTo:{default:"/"},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:void 0},operatorImgSrc:{default:void 0},operatorImgAlt:{default:""},licenceTo:{default:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"},licenceLinkProps:{default:()=>{}},licenceText:{default:"Sauf mention contraire, tous les textes de ce site sont sous"},licenceName:{default:"licence etalab-2.0"}},setup(r){const e=r,t=computed(()=>[...e.beforeMandatoryLinks,...e.mandatoryLinks,...e.afterMandatoryLinks]),ke=useSlots(),Oe=computed(()=>{var Ze;return(Ze=ke["footer-link-lists"])==null?void 0:Ze.call(ke).length}),Ge=computed(()=>{const Ze=e.licenceTo||e.licenceLinkProps.to;return Ze&&typeof Ze=="string"&&Ze.startsWith("http")}),Be=computed(()=>Ge.value?"":e.licenceTo),je=computed(()=>Ge.value?e.licenceTo:""),Ve=computed(()=>typeof e.operatorTo=="string"&&e.operatorTo.startsWith("http"));return(Ze,Qe)=>{const en=resolveComponent("RouterLink");return openBlock(),createElementBlock("footer",hr,[Oe.value?(openBlock(),createElementBlock("div",vr,[createBaseVNode("div",mr,[createBaseVNode("div",gr,[renderSlot(Ze.$slots,"footer-link-lists",{},void 0,!0)])])])):createCommentVNode("",!0),createBaseVNode("div",br,[createBaseVNode("div",yr,[Ze.operatorImgSrc?(openBlock(),createElementBlock("div",kr,[createVNode(Le$1,{"logo-text":Ze.logoText},null,8,["logo-text"]),Ve.value?(openBlock(),createElementBlock("a",{key:0,href:Ze.operatorTo,"data-testid":"card-link",class:"fr-footer__brand-link"},[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(Ze.operatorImgStyle),src:Ze.operatorImgSrc,alt:Ze.operatorImgAlt},null,12,_r)],8,wr)):(openBlock(),createBlock(en,{key:1,class:"fr-footer__brand-link",to:Ze.homeLink,title:Ze.homeTitle},{default:withCtx(()=>[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(Ze.operatorImgStyle),src:Ze.operatorImgSrc,alt:Ze.operatorImgAlt},null,12,$r)]),_:1},8,["to","title"]))])):(openBlock(),createElementBlock("div",Dr,[createVNode(en,{to:Ze.homeLink,title:Ze.homeTitle},{default:withCtx(()=>[createVNode(Le$1,{"logo-text":Ze.logoText},null,8,["logo-text"])]),_:1},8,["to","title"])])),createBaseVNode("div",Mr,[createBaseVNode("p",Ir,[renderSlot(Ze.$slots,"description",{},()=>[createTextVNode(toDisplayString(Ze.descText),1)],!0)]),createBaseVNode("ul",Lr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ze.ecosystemLinks,(tn,an)=>(openBlock(),createElementBlock("li",{key:an,class:"fr-footer__content-item"},[createBaseVNode("a",{class:"fr-footer__content-link",href:tn.href,target:"_blank",rel:"noopener noreferrer"},toDisplayString(tn.label),9,Cr)]))),128))])])]),Ze.partners?(openBlock(),createBlock(yt$1,normalizeProps(mergeProps({key:0},Ze.partners)),null,16)):createCommentVNode("",!0),createBaseVNode("div",zr,[createBaseVNode("ul",Sr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.value,(tn,an)=>(openBlock(),createElementBlock("li",{key:an,class:"fr-footer__bottom-item"},[createVNode(pr,mergeProps({ref_for:!0},tn),null,16)]))),128))]),Ze.licenceText?(openBlock(),createElementBlock("div",Tr,[createBaseVNode("p",null,[createTextVNode(toDisplayString(Ze.licenceText)+" ",1),(openBlock(),createBlock(resolveDynamicComponent(Ge.value?"a":"RouterLink"),mergeProps({class:"fr-link-licence no-content-after",to:Ge.value?null:Be.value,href:je.value,target:Ge.value?"_blank":void 0,rel:"noopener noreferrer"},Ze.licenceLinkProps),{default:withCtx(()=>[createTextVNode(toDisplayString(Ze.licenceName),1)]),_:1},16,["to","href","target"]))])])):createCommentVNode("",!0)])])])}}}),Er=ae$1(Ar,[["__scopeId","data-v-a64fdd76"]]),Or=["for"],jr={key:0,class:"required"},qr={key:0,class:"fr-hint-text"},Qr=defineComponent({inheritAttrs:!1,__name:"DsfrInput",props:{id:{default:()=>j$1("basic","input")},descriptionId:{default:void 0},hint:{default:""},isInvalid:{type:Boolean},isValid:{type:Boolean},isTextarea:{type:Boolean},isWithWrapper:{type:Boolean},labelVisible:{type:Boolean},label:{default:""},labelClass:{default:""},modelValue:{default:""},wrapperClass:{default:""}},emits:["update:modelValue"],setup(r,{expose:e}){const t=r,ke=useAttrs(),Oe=ref(null),Ge=()=>{var Ze;return(Ze=Oe.value)==null?void 0:Ze.focus()},Be=computed(()=>t.isTextarea?"textarea":"input"),je=computed(()=>t.isWithWrapper||ke.type==="date"||!!t.wrapperClass),Ve=computed(()=>["fr-label",{invisible:!t.labelVisible},t.labelClass]);return e({focus:Ge}),(Ze,Qe)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("label",{class:normalizeClass(Ve.value),for:Ze.id},[renderSlot(Ze.$slots,"label",{},()=>[createTextVNode(toDisplayString(Ze.label)+" ",1),renderSlot(Ze.$slots,"required-tip",{},()=>["required"in Ze.$attrs&&Ze.$attrs.required!==!1?(openBlock(),createElementBlock("span",jr,"*")):createCommentVNode("",!0)],!0)],!0),Ze.hint?(openBlock(),createElementBlock("span",qr,toDisplayString(Ze.hint),1)):createCommentVNode("",!0)],10,Or),je.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([{"fr-input-wrap":Ze.isWithWrapper||Ze.$attrs.type==="date"},Ze.wrapperClass])},[(openBlock(),createBlock(resolveDynamicComponent(Be.value),mergeProps({id:Ze.id},Ze.$attrs,{ref_key:"__input",ref:Oe,class:["fr-input",{"fr-input--error":Ze.isInvalid,"fr-input--valid":Ze.isValid}],value:Ze.modelValue,"aria-describedby":Ze.descriptionId||void 0,onInput:Qe[1]||(Qe[1]=en=>Ze.$emit("update:modelValue",en.target.value))}),null,16,["id","class","value","aria-describedby"]))],2)):(openBlock(),createBlock(resolveDynamicComponent(Be.value),mergeProps({key:0,id:Ze.id},Ze.$attrs,{ref_key:"__input",ref:Oe,class:["fr-input",{"fr-input--error":Ze.isInvalid,"fr-input--valid":Ze.isValid}],value:Ze.modelValue,"aria-describedby":Ze.descriptionId||void 0,onInput:Qe[0]||(Qe[0]=en=>Ze.$emit("update:modelValue",en.target.value))}),null,16,["id","class","value","aria-describedby"]))],64))}}),qe=ae$1(Qr,[["__scopeId","data-v-771f90df"]]),Fe=defineComponent({__name:"DsfrSearchBar",props:{id:{default:()=>j$1("search","input")},label:{default:""},labelVisible:{type:Boolean},large:{type:Boolean},buttonText:{default:""},modelValue:{default:""},placeholder:{default:"Rechercher"},disabled:{type:Boolean}},emits:["update:modelValue","search"],setup(r,{emit:e}){const t=e;return(ke,Oe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-search-bar",{"fr-search-bar--lg":ke.large}]),role:"search"},[createVNode(qe,{id:ke.id,type:"search",placeholder:ke.placeholder,"model-value":ke.modelValue,"label-visible":ke.labelVisible,label:ke.label,disabled:ke.disabled,"aria-disabled":ke.disabled,"onUpdate:modelValue":Oe[0]||(Oe[0]=Ge=>t("update:modelValue",Ge)),onKeydown:Oe[1]||(Oe[1]=withKeys(Ge=>t("search",ke.modelValue),["enter"]))},null,8,["id","placeholder","model-value","label-visible","label","disabled","aria-disabled"]),createVNode(Ae,{title:"Rechercher",disabled:ke.disabled,"aria-disabled":ke.disabled,onClick:Oe[2]||(Oe[2]=Ge=>t("search",ke.modelValue))},{default:withCtx(()=>[createTextVNode(toDisplayString(ke.buttonText),1)]),_:1},8,["disabled","aria-disabled"])],2))}}),xe=1,kt$1=defineComponent({__name:"DsfrHeaderMenuLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:"_self"},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0}},setup(r){const e=r,t=computed(()=>typeof e.path=="string"),ke=computed(()=>{var en;return((en=e.href)==null?void 0:en.startsWith("http"))||t.value&&e.path.startsWith("http")}),Oe=computed(()=>{var en;return((en=e.href)==null?void 0:en.startsWith("mailto"))||t.value&&e.path.startsWith("mailto")}),Ge=computed(()=>e.button?"button":ke.value||Oe.value?"a":"RouterLink"),Be=computed(()=>{if(!(!ke.value&&!Oe.value))return e.href!==void 0?e.href:e.path}),je=computed(()=>{if(!(ke.value||Oe.value))return e.to||e.path}),Ve=computed(()=>je.value?{to:je.value}:{href:Be.value}),Ze=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),Qe=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:xe,...e.iconAttrs??{}}:{scale:xe,...e.icon??{},...e.iconAttrs??{}});return(en,tn)=>(openBlock(),createBlock(resolveDynamicComponent(Ge.value),mergeProps({class:["fr-btn",{"fr-btn--icon-right":Ze.value&&en.iconRight,"fr-btn--icon-left":Ze.value&&!en.iconRight,[String(en.icon)]:Ze.value}]},Ve.value,{target:en.target,onClick:withModifiers(en.onClick,["stop"])}),{default:withCtx(()=>{var an,cn;return[!Ze.value&&(en.icon||(an=en.iconAttrs)!=null&&an.name)&&!en.iconRight?(openBlock(),createBlock(unref(g$1),mergeProps({key:0,class:"fr-mr-1w"},Qe.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(en.label)+" ",1),!Ze.value&&(en.icon||(cn=en.iconAttrs)!=null&&cn.name)&&en.iconRight?(openBlock(),createBlock(unref(g$1),mergeProps({key:1,class:"fr-ml-1w"},Qe.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),Gr=["aria-label"],Kr={class:"fr-btns-group"},Ne$1=defineComponent({__name:"DsfrHeaderMenuLinks",props:{links:{default:()=>[]},navAriaLabel:{default:"Menu secondaire"}},emits:["linkClick"],setup(r,{emit:e}){const t=e;return(ke,Oe)=>(openBlock(),createElementBlock("nav",{role:"navigation","aria-label":ke.navAriaLabel},[createBaseVNode("ul",Kr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ke.links,(Ge,Be)=>(openBlock(),createElementBlock("li",{key:Be},[createVNode(kt$1,mergeProps({ref_for:!0},Ge,{"on-click":je=>{var Ve;t("linkClick",je),(Ve=Ge.onClick)==null||Ve.call(Ge,je)}}),null,16,["on-click"])]))),128))])],8,Gr))}}),Wr={role:"navigation",class:"fr-translate fr-nav"},Ur={class:"fr-nav__item"},Zr=["aria-controls","aria-expanded"],Jr={class:"fr-hidden-lg"},xr=["id"],el={class:"fr-menu__list"},tl=["hreflang","lang","aria-current","href","onClick"],Xe=defineComponent({__name:"DsfrLanguageSelector",props:{id:{default:()=>j$1("translate")},languages:{default:()=>[]},currentLanguage:{default:"fr"}},emits:["select"],setup(r,{emit:e}){const t=r,ke=e,{collapse:Oe,collapsing:Ge,cssExpanded:Be,doExpand:je,onTransitionEnd:Ve}=ce$1(),Ze=ref(!1);function Qe(tn){Ze.value=!1,ke("select",tn)}const en=computed(()=>t.languages.find(({codeIso:tn})=>tn===t.currentLanguage));return watch(Ze,(tn,an)=>{tn!==an&&je(tn)}),(tn,an)=>{var cn,dn;return openBlock(),createElementBlock("nav",Wr,[createBaseVNode("div",Ur,[createBaseVNode("button",{class:"fr-translate__btn fr-btn fr-btn--tertiary","aria-controls":tn.id,"aria-expanded":Ze.value,title:"Sélectionner une langue",type:"button",onClick:an[0]||(an[0]=withModifiers(hn=>Ze.value=!Ze.value,["prevent","stop"]))},[createTextVNode(toDisplayString((cn=en.value)==null?void 0:cn.codeIso.toUpperCase()),1),createBaseVNode("span",Jr," - "+toDisplayString((dn=en.value)==null?void 0:dn.label),1)],8,Zr),createBaseVNode("div",{id:tn.id,ref_key:"collapse",ref:Oe,class:normalizeClass(["fr-collapse fr-translate__menu fr-menu",{"fr-collapse--expanded":unref(Be),"fr-collapsing":unref(Ge)}]),onTransitionend:an[1]||(an[1]=hn=>unref(Ve)(Ze.value))},[createBaseVNode("ul",el,[(openBlock(!0),createElementBlock(Fragment,null,renderList(tn.languages,(hn,fn)=>(openBlock(),createElementBlock("li",{key:fn},[createBaseVNode("a",{class:"fr-translate__language fr-nav__link",hreflang:hn.codeIso,lang:hn.codeIso,"aria-current":tn.currentLanguage===hn.codeIso?!0:void 0,href:`#${hn.codeIso}`,onClick:withModifiers(pn=>Qe(hn),["prevent","stop"])},toDisplayString(`${hn.codeIso.toUpperCase()} - ${hn.label}`),9,tl)]))),128))])],42,xr)])])}}}),al={role:"banner",class:"fr-header"},nl={class:"fr-header__body"},rl={class:"fr-container width-inherit"},ll={class:"fr-header__body-row"},sl={class:"fr-header__brand fr-enlarge-link"},ol={class:"fr-header__brand-top"},il={class:"fr-header__logo"},dl={key:0,class:"fr-header__operator"},ul=["src","alt"],cl={key:1,class:"fr-header__navbar"},fl$1=["aria-label","title","data-fr-opened"],pl=["aria-label","title"],hl={key:0,class:"fr-header__service"},vl={class:"fr-header__service-title"},ml={key:0,class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},gl={key:0,class:"fr-header__service-tagline"},bl={key:1,class:"fr-header__service"},yl=createBaseVNode("p",{class:"fr-header__service-title"},[createBaseVNode("span",{class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},"BETA")],-1),kl=[yl],wl={class:"fr-header__tools"},_l={key:0,class:"fr-header__tools-links"},$l={key:1,class:"fr-header__search fr-modal"},Dl=["aria-label"],Ml={class:"fr-container"},Il={class:"fr-header__menu-links"},Ll={role:"navigation"},Cl={key:1,class:"flex justify-center items-center"},zl={key:1,class:"fr-hidden fr-unhidden-lg"},Sl=defineComponent({__name:"DsfrHeader",props:{searchbarId:{default:"searchbar-header"},serviceTitle:{default:void 0},serviceDescription:{default:void 0},homeTo:{default:"/"},logoText:{default:()=>"Gouvernement"},modelValue:{default:""},operatorImgAlt:{default:""},operatorImgSrc:{default:""},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:()=>({})},placeholder:{default:"Rechercher..."},quickLinks:{default:()=>[]},languageSelector:{default:void 0},searchLabel:{default:"Recherche"},quickLinksAriaLabel:{default:"Menu secondaire"},showSearch:{type:Boolean},showSearchLabel:{default:"Recherche"},showBeta:{type:Boolean},menuLabel:{default:"Menu"},menuModalLabel:{default:"Menu modal"},closeMenuModalLabel:{default:"Fermer"},homeLabel:{default:"Accueil"}},emits:["update:modelValue","search","language-select"],setup(r,{emit:e}){const t=r,ke=e,Oe=toRef(t,"languageSelector"),Ge=ref(!1),Be=ref(!1),je=ref(!1),Ve=()=>{var hn;je.value=!1,Ge.value=!1,Be.value=!1,(hn=document.getElementById("button-menu"))==null||hn.focus()},Ze=hn=>{hn.key==="Escape"&&Ve()};onMounted(()=>{document.addEventListener("keydown",Ze)}),onUnmounted(()=>{document.removeEventListener("keydown",Ze)});const Qe=()=>{var hn;je.value=!0,Ge.value=!0,Be.value=!1,(hn=document.getElementById("close-button"))==null||hn.focus()},en=()=>{je.value=!0,Ge.value=!1,Be.value=!0},tn=Ve,an=useSlots(),cn=computed(()=>{var hn;return!!((hn=an.operator)!=null&&hn.call(an).length)||!!t.operatorImgSrc}),dn=computed(()=>!!an.mainnav);return(hn,fn)=>{var pn,mn,yn;const Cn=resolveComponent("RouterLink");return openBlock(),createElementBlock("header",al,[createBaseVNode("div",nl,[createBaseVNode("div",rl,[createBaseVNode("div",ll,[createBaseVNode("div",sl,[createBaseVNode("div",ol,[createBaseVNode("div",il,[createVNode(Le$1,{"logo-text":hn.logoText,"data-testid":"header-logo"},null,8,["logo-text"])]),cn.value?(openBlock(),createElementBlock("div",dl,[renderSlot(hn.$slots,"operator",{},()=>[hn.operatorImgSrc?(openBlock(),createElementBlock("img",{key:0,class:"fr-responsive-img",src:hn.operatorImgSrc,alt:hn.operatorImgAlt,style:normalizeStyle(hn.operatorImgStyle)},null,12,ul)):createCommentVNode("",!0)])])):createCommentVNode("",!0),hn.showSearch||dn.value||(pn=hn.quickLinks)!=null&&pn.length?(openBlock(),createElementBlock("div",cl,[hn.showSearch?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--search","aria-controls":"header-search","aria-label":hn.showSearchLabel,title:hn.showSearchLabel,"data-fr-opened":Be.value,onClick:fn[0]||(fn[0]=withModifiers(wn=>en(),["prevent","stop"]))},null,8,fl$1)):createCommentVNode("",!0),dn.value||(mn=hn.quickLinks)!=null&&mn.length?(openBlock(),createElementBlock("button",{key:1,id:"button-menu",class:"fr-btn--menu fr-btn","data-fr-opened":Qe,"aria-controls":"header-navigation","aria-haspopup":"menu","aria-label":hn.menuLabel,title:hn.menuLabel,"data-testid":"open-menu-btn",onClick:fn[1]||(fn[1]=withModifiers(wn=>Qe(),["prevent","stop"]))},null,8,pl)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),hn.serviceTitle?(openBlock(),createElementBlock("div",hl,[createVNode(Cn,mergeProps({to:hn.homeTo,title:`${hn.homeLabel} - ${hn.serviceTitle}`},hn.$attrs),{default:withCtx(()=>[createBaseVNode("p",vl,[createTextVNode(toDisplayString(hn.serviceTitle)+" ",1),hn.showBeta?(openBlock(),createElementBlock("span",ml," BETA ")):createCommentVNode("",!0)])]),_:1},16,["to","title"]),hn.serviceDescription?(openBlock(),createElementBlock("p",gl,toDisplayString(hn.serviceDescription),1)):createCommentVNode("",!0)])):createCommentVNode("",!0),!hn.serviceTitle&&hn.showBeta?(openBlock(),createElementBlock("div",bl,kl)):createCommentVNode("",!0)]),createBaseVNode("div",wl,[(yn=hn.quickLinks)!=null&&yn.length||Oe.value?(openBlock(),createElementBlock("div",_l,[Ge.value?createCommentVNode("",!0):(openBlock(),createBlock(Ne$1,{key:0,links:hn.quickLinks,"nav-aria-label":hn.quickLinksAriaLabel},null,8,["links","nav-aria-label"])),Oe.value?(openBlock(),createBlock(Xe,mergeProps({key:1},Oe.value,{onSelect:fn[2]||(fn[2]=wn=>ke("language-select",wn))}),null,16)):createCommentVNode("",!0)])):createCommentVNode("",!0),hn.showSearch?(openBlock(),createElementBlock("div",$l,[createVNode(Fe,{"searchbar-id":hn.searchbarId,label:hn.searchLabel,"model-value":hn.modelValue,placeholder:hn.placeholder,style:{"justify-content":"flex-end"},"onUpdate:modelValue":fn[3]||(fn[3]=wn=>ke("update:modelValue",wn)),onSearch:fn[4]||(fn[4]=wn=>ke("search",wn))},null,8,["searchbar-id","label","model-value","placeholder"])])):createCommentVNode("",!0)])]),hn.showSearch||dn.value||hn.quickLinks&&hn.quickLinks.length||Oe.value?(openBlock(),createElementBlock("div",{key:0,id:"header-navigation",class:normalizeClass(["fr-header__menu fr-modal",{"fr-modal--opened":je.value}]),"aria-label":hn.menuModalLabel,role:"dialog","aria-modal":"true"},[createBaseVNode("div",Ml,[createBaseVNode("button",{id:"close-button",class:"fr-btn fr-btn--close","aria-controls":"header-navigation","data-testid":"close-modal-btn",onClick:fn[5]||(fn[5]=withModifiers(wn=>Ve(),["prevent","stop"]))},toDisplayString(hn.closeMenuModalLabel),1),createBaseVNode("div",Il,[Oe.value?(openBlock(),createBlock(Xe,mergeProps({key:0},Oe.value,{onSelect:fn[6]||(fn[6]=wn=>Oe.value.currentLanguage=wn.codeIso)}),null,16)):createCommentVNode("",!0),createBaseVNode("nav",Ll,[Ge.value?(openBlock(),createBlock(Ne$1,{key:0,role:"navigation",links:hn.quickLinks,"nav-aria-label":hn.quickLinksAriaLabel,onLinkClick:unref(tn)},null,8,["links","nav-aria-label","onLinkClick"])):createCommentVNode("",!0)])]),je.value?renderSlot(hn.$slots,"mainnav",{key:0,hidemodal:Ve}):createCommentVNode("",!0),Be.value?(openBlock(),createElementBlock("div",Cl,[createVNode(Fe,{"searchbar-id":hn.searchbarId,"model-value":hn.modelValue,placeholder:hn.placeholder,"onUpdate:modelValue":fn[7]||(fn[7]=wn=>ke("update:modelValue",wn)),onSearch:fn[8]||(fn[8]=wn=>ke("search",wn))},null,8,["searchbar-id","model-value","placeholder"])])):createCommentVNode("",!0)])],10,Dl)):createCommentVNode("",!0),dn.value&&!je.value?(openBlock(),createElementBlock("div",zl,[renderSlot(hn.$slots,"mainnav",{hidemodal:Ve})])):createCommentVNode("",!0),renderSlot(hn.$slots,"default")])])])}}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var wt$1=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ce=wt$1.join(","),_t$1=typeof Element>"u",ve$1=_t$1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ze=!_t$1&&Element.prototype.getRootNode?function(r){var e;return r==null||(e=r.getRootNode)===null||e===void 0?void 0:e.call(r)}:function(r){return r==null?void 0:r.ownerDocument},Se=function r(e,t){var ke;t===void 0&&(t=!0);var Oe=e==null||(ke=e.getAttribute)===null||ke===void 0?void 0:ke.call(e,"inert"),Ge=Oe===""||Oe==="true",Be=Ge||t&&e&&r(e.parentNode);return Be},Fl=function(r){var e,t=r==null||(e=r.getAttribute)===null||e===void 0?void 0:e.call(r,"contenteditable");return t===""||t==="true"},$t$1=function(r,e,t){if(Se(r))return[];var ke=Array.prototype.slice.apply(r.querySelectorAll(Ce));return e&&ve$1.call(r,Ce)&&ke.unshift(r),ke=ke.filter(t),ke},Dt$1=function r(e,t,ke){for(var Oe=[],Ge=Array.from(e);Ge.length;){var Be=Ge.shift();if(!Se(Be,!1))if(Be.tagName==="SLOT"){var je=Be.assignedElements(),Ve=je.length?je:Be.children,Ze=r(Ve,!0,ke);ke.flatten?Oe.push.apply(Oe,Ze):Oe.push({scopeParent:Be,candidates:Ze})}else{var Qe=ve$1.call(Be,Ce);Qe&&ke.filter(Be)&&(t||!e.includes(Be))&&Oe.push(Be);var en=Be.shadowRoot||typeof ke.getShadowRoot=="function"&&ke.getShadowRoot(Be),tn=!Se(en,!1)&&(!ke.shadowRootFilter||ke.shadowRootFilter(Be));if(en&&tn){var an=r(en===!0?Be.children:en.children,!0,ke);ke.flatten?Oe.push.apply(Oe,an):Oe.push({scopeParent:Be,candidates:an})}else Ge.unshift.apply(Ge,Be.children)}}return Oe},Mt$1=function(r){return!isNaN(parseInt(r.getAttribute("tabindex"),10))},he$1=function(r){if(!r)throw new Error("No node provided");return r.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(r.tagName)||Fl(r))&&!Mt$1(r)?0:r.tabIndex},Nl=function(r,e){var t=he$1(r);return t<0&&e&&!Mt$1(r)?0:t},Xl=function(r,e){return r.tabIndex===e.tabIndex?r.documentOrder-e.documentOrder:r.tabIndex-e.tabIndex},It$1=function(r){return r.tagName==="INPUT"},Yl=function(r){return It$1(r)&&r.type==="hidden"},Ol=function(r){var e=r.tagName==="DETAILS"&&Array.prototype.slice.apply(r.children).some(function(t){return t.tagName==="SUMMARY"});return e},jl=function(r,e){for(var t=0;t<r.length;t++)if(r[t].checked&&r[t].form===e)return r[t]},ql=function(r){if(!r.name)return!0;var e=r.form||ze(r),t=function(Ge){return e.querySelectorAll('input[type="radio"][name="'+Ge+'"]')},ke;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")ke=t(window.CSS.escape(r.name));else try{ke=t(r.name)}catch(Ge){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",Ge.message),!1}var Oe=jl(ke,r.form);return!Oe||Oe===r},Ql=function(r){return It$1(r)&&r.type==="radio"},Gl=function(r){return Ql(r)&&!ql(r)},Kl=function(r){var e,t=r&&ze(r),ke=(e=t)===null||e===void 0?void 0:e.host,Oe=!1;if(t&&t!==r){var Ge,Be,je;for(Oe=!!((Ge=ke)!==null&&Ge!==void 0&&(Be=Ge.ownerDocument)!==null&&Be!==void 0&&Be.contains(ke)||r!=null&&(je=r.ownerDocument)!==null&&je!==void 0&&je.contains(r));!Oe&&ke;){var Ve,Ze,Qe;t=ze(ke),ke=(Ve=t)===null||Ve===void 0?void 0:Ve.host,Oe=!!((Ze=ke)!==null&&Ze!==void 0&&(Qe=Ze.ownerDocument)!==null&&Qe!==void 0&&Qe.contains(ke))}}return Oe},et$2=function(r){var e=r.getBoundingClientRect(),t=e.width,ke=e.height;return t===0&&ke===0},Wl=function(r,e){var t=e.displayCheck,ke=e.getShadowRoot;if(getComputedStyle(r).visibility==="hidden")return!0;var Oe=ve$1.call(r,"details>summary:first-of-type"),Ge=Oe?r.parentElement:r;if(ve$1.call(Ge,"details:not([open]) *"))return!0;if(!t||t==="full"||t==="legacy-full"){if(typeof ke=="function"){for(var Be=r;r;){var je=r.parentElement,Ve=ze(r);if(je&&!je.shadowRoot&&ke(je)===!0)return et$2(r);r.assignedSlot?r=r.assignedSlot:!je&&Ve!==r.ownerDocument?r=Ve.host:r=je}r=Be}if(Kl(r))return!r.getClientRects().length;if(t!=="legacy-full")return!0}else if(t==="non-zero-area")return et$2(r);return!1},Ul=function(r){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(r.tagName))for(var e=r.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var t=0;t<e.children.length;t++){var ke=e.children.item(t);if(ke.tagName==="LEGEND")return ve$1.call(e,"fieldset[disabled] *")?!0:!ke.contains(r)}return!0}e=e.parentElement}return!1},Te=function(r,e){return!(e.disabled||Se(e)||Yl(e)||Wl(e,r)||Ol(e)||Ul(e))},Ye=function(r,e){return!(Gl(e)||he$1(e)<0||!Te(r,e))},Zl=function(r){var e=parseInt(r.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},Jl=function r(e){var t=[],ke=[];return e.forEach(function(Oe,Ge){var Be=!!Oe.scopeParent,je=Be?Oe.scopeParent:Oe,Ve=Nl(je,Be),Ze=Be?r(Oe.candidates):je;Ve===0?Be?t.push.apply(t,Ze):t.push(je):ke.push({documentOrder:Ge,tabIndex:Ve,item:Oe,isScope:Be,content:Ze})}),ke.sort(Xl).reduce(function(Oe,Ge){return Ge.isScope?Oe.push.apply(Oe,Ge.content):Oe.push(Ge.content),Oe},[]).concat(t)},xl=function(r,e){e=e||{};var t;return e.getShadowRoot?t=Dt$1([r],e.includeContainer,{filter:Ye.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Zl}):t=$t$1(r,e.includeContainer,Ye.bind(null,e)),Jl(t)},es=function(r,e){e=e||{};var t;return e.getShadowRoot?t=Dt$1([r],e.includeContainer,{filter:Te.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):t=$t$1(r,e.includeContainer,Te.bind(null,e)),t},me$1=function(r,e){if(e=e||{},!r)throw new Error("No node provided");return ve$1.call(r,Ce)===!1?!1:Ye(e,r)},ts=wt$1.concat("iframe").join(","),Re=function(r,e){if(e=e||{},!r)throw new Error("No node provided");return ve$1.call(r,ts)===!1?!1:Te(e,r)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function tt$1(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(r);e&&(ke=ke.filter(function(Oe){return Object.getOwnPropertyDescriptor(r,Oe).enumerable})),t.push.apply(t,ke)}return t}function at$1(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tt$1(Object(t),!0).forEach(function(ke){as(r,ke,t[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):tt$1(Object(t)).forEach(function(ke){Object.defineProperty(r,ke,Object.getOwnPropertyDescriptor(t,ke))})}return r}function as(r,e,t){return e=rs(e),e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function ns$2(r,e){if(typeof r!="object"||r===null)return r;var t=r[Symbol.toPrimitive];if(t!==void 0){var ke=t.call(r,e||"default");if(typeof ke!="object")return ke;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(r)}function rs(r){var e=ns$2(r,"string");return typeof e=="symbol"?e:String(e)}var nt$1={activateTrap:function(r,e){if(r.length>0){var t=r[r.length-1];t!==e&&t.pause()}var ke=r.indexOf(e);ke===-1||r.splice(ke,1),r.push(e)},deactivateTrap:function(r,e){var t=r.indexOf(e);t!==-1&&r.splice(t,1),r.length>0&&r[r.length-1].unpause()}},ls=function(r){return r.tagName&&r.tagName.toLowerCase()==="input"&&typeof r.select=="function"},ss=function(r){return(r==null?void 0:r.key)==="Escape"||(r==null?void 0:r.key)==="Esc"||(r==null?void 0:r.keyCode)===27},$e=function(r){return(r==null?void 0:r.key)==="Tab"||(r==null?void 0:r.keyCode)===9},os=function(r){return $e(r)&&!r.shiftKey},is=function(r){return $e(r)&&r.shiftKey},rt$1=function(r){return setTimeout(r,0)},lt$2=function(r,e){var t=-1;return r.every(function(ke,Oe){return e(ke)?(t=Oe,!1):!0}),t},we$1=function(r){for(var e=arguments.length,t=new Array(e>1?e-1:0),ke=1;ke<e;ke++)t[ke-1]=arguments[ke];return typeof r=="function"?r.apply(void 0,t):r},De=function(r){return r.target.shadowRoot&&typeof r.composedPath=="function"?r.composedPath()[0]:r.target},ds=[],us=function(r,e){var t=(e==null?void 0:e.document)||document,ke=(e==null?void 0:e.trapStack)||ds,Oe=at$1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:os,isKeyBackward:is},e),Ge={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},Be,je=function(Tn,En,An){return Tn&&Tn[En]!==void 0?Tn[En]:Oe[An||En]},Ve=function(Tn,En){var An=typeof(En==null?void 0:En.composedPath)=="function"?En.composedPath():void 0;return Ge.containerGroups.findIndex(function(Ln){var Rn=Ln.container,Gn=Ln.tabbableNodes;return Rn.contains(Tn)||(An==null?void 0:An.includes(Rn))||Gn.find(function(Nn){return Nn===Tn})})},Ze=function(Tn){var En=Oe[Tn];if(typeof En=="function"){for(var An=arguments.length,Ln=new Array(An>1?An-1:0),Rn=1;Rn<An;Rn++)Ln[Rn-1]=arguments[Rn];En=En.apply(void 0,Ln)}if(En===!0&&(En=void 0),!En){if(En===void 0||En===!1)return En;throw new Error("`".concat(Tn,"` was specified but was not a node, or did not return a node"))}var Gn=En;if(typeof En=="string"&&(Gn=t.querySelector(En),!Gn))throw new Error("`".concat(Tn,"` as selector refers to no known node"));return Gn},Qe=function(){var Tn=Ze("initialFocus");if(Tn===!1)return!1;if(Tn===void 0||!Re(Tn,Oe.tabbableOptions))if(Ve(t.activeElement)>=0)Tn=t.activeElement;else{var En=Ge.tabbableGroups[0],An=En&&En.firstTabbableNode;Tn=An||Ze("fallbackFocus")}if(!Tn)throw new Error("Your focus-trap needs to have at least one focusable element");return Tn},en=function(){if(Ge.containerGroups=Ge.containers.map(function(Tn){var En=xl(Tn,Oe.tabbableOptions),An=es(Tn,Oe.tabbableOptions),Ln=En.length>0?En[0]:void 0,Rn=En.length>0?En[En.length-1]:void 0,Gn=An.find(function(Dn){return me$1(Dn)}),Nn=An.slice().reverse().find(function(Dn){return me$1(Dn)}),jn=!!En.find(function(Dn){return he$1(Dn)>0});return{container:Tn,tabbableNodes:En,focusableNodes:An,posTabIndexesFound:jn,firstTabbableNode:Ln,lastTabbableNode:Rn,firstDomTabbableNode:Gn,lastDomTabbableNode:Nn,nextTabbableNode:function(Dn){var Ci=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Jn=En.indexOf(Dn);return Jn<0?Ci?An.slice(An.indexOf(Dn)+1).find(function(Ki){return me$1(Ki)}):An.slice(0,An.indexOf(Dn)).reverse().find(function(Ki){return me$1(Ki)}):En[Jn+(Ci?1:-1)]}}}),Ge.tabbableGroups=Ge.containerGroups.filter(function(Tn){return Tn.tabbableNodes.length>0}),Ge.tabbableGroups.length<=0&&!Ze("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(Ge.containerGroups.find(function(Tn){return Tn.posTabIndexesFound})&&Ge.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},tn=function Tn(En){var An=En.activeElement;if(An)return An.shadowRoot&&An.shadowRoot.activeElement!==null?Tn(An.shadowRoot):An},an=function Tn(En){if(En!==!1&&En!==tn(document)){if(!En||!En.focus){Tn(Qe());return}En.focus({preventScroll:!!Oe.preventScroll}),Ge.mostRecentlyFocusedNode=En,ls(En)&&En.select()}},cn=function(Tn){var En=Ze("setReturnFocus",Tn);return En||(En===!1?!1:Tn)},dn=function(Tn){var En=Tn.target,An=Tn.event,Ln=Tn.isBackward,Rn=Ln===void 0?!1:Ln;En=En||De(An),en();var Gn=null;if(Ge.tabbableGroups.length>0){var Nn=Ve(En,An),jn=Nn>=0?Ge.containerGroups[Nn]:void 0;if(Nn<0)Rn?Gn=Ge.tabbableGroups[Ge.tabbableGroups.length-1].lastTabbableNode:Gn=Ge.tabbableGroups[0].firstTabbableNode;else if(Rn){var Dn=lt$2(Ge.tabbableGroups,function($n){var Ai=$n.firstTabbableNode;return En===Ai});if(Dn<0&&(jn.container===En||Re(En,Oe.tabbableOptions)&&!me$1(En,Oe.tabbableOptions)&&!jn.nextTabbableNode(En,!1))&&(Dn=Nn),Dn>=0){var Ci=Dn===0?Ge.tabbableGroups.length-1:Dn-1,Jn=Ge.tabbableGroups[Ci];Gn=he$1(En)>=0?Jn.lastTabbableNode:Jn.lastDomTabbableNode}else $e(An)||(Gn=jn.nextTabbableNode(En,!1))}else{var Ki=lt$2(Ge.tabbableGroups,function($n){var Ai=$n.lastTabbableNode;return En===Ai});if(Ki<0&&(jn.container===En||Re(En,Oe.tabbableOptions)&&!me$1(En,Oe.tabbableOptions)&&!jn.nextTabbableNode(En))&&(Ki=Nn),Ki>=0){var xn=Ki===Ge.tabbableGroups.length-1?0:Ki+1,qn=Ge.tabbableGroups[xn];Gn=he$1(En)>=0?qn.firstTabbableNode:qn.firstDomTabbableNode}else $e(An)||(Gn=jn.nextTabbableNode(En))}}else Gn=Ze("fallbackFocus");return Gn},hn=function(Tn){var En=De(Tn);if(!(Ve(En,Tn)>=0)){if(we$1(Oe.clickOutsideDeactivates,Tn)){Be.deactivate({returnFocus:Oe.returnFocusOnDeactivate});return}we$1(Oe.allowOutsideClick,Tn)||Tn.preventDefault()}},fn=function(Tn){var En=De(Tn),An=Ve(En,Tn)>=0;if(An||En instanceof Document)An&&(Ge.mostRecentlyFocusedNode=En);else{Tn.stopImmediatePropagation();var Ln,Rn=!0;if(Ge.mostRecentlyFocusedNode)if(he$1(Ge.mostRecentlyFocusedNode)>0){var Gn=Ve(Ge.mostRecentlyFocusedNode),Nn=Ge.containerGroups[Gn].tabbableNodes;if(Nn.length>0){var jn=Nn.findIndex(function(Dn){return Dn===Ge.mostRecentlyFocusedNode});jn>=0&&(Oe.isKeyForward(Ge.recentNavEvent)?jn+1<Nn.length&&(Ln=Nn[jn+1],Rn=!1):jn-1>=0&&(Ln=Nn[jn-1],Rn=!1))}}else Ge.containerGroups.some(function(Dn){return Dn.tabbableNodes.some(function(Ci){return he$1(Ci)>0})})||(Rn=!1);else Rn=!1;Rn&&(Ln=dn({target:Ge.mostRecentlyFocusedNode,isBackward:Oe.isKeyBackward(Ge.recentNavEvent)})),an(Ln||Ge.mostRecentlyFocusedNode||Qe())}Ge.recentNavEvent=void 0},pn=function(Tn){var En=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Ge.recentNavEvent=Tn;var An=dn({event:Tn,isBackward:En});An&&($e(Tn)&&Tn.preventDefault(),an(An))},mn=function(Tn){if(ss(Tn)&&we$1(Oe.escapeDeactivates,Tn)!==!1){Tn.preventDefault(),Be.deactivate();return}(Oe.isKeyForward(Tn)||Oe.isKeyBackward(Tn))&&pn(Tn,Oe.isKeyBackward(Tn))},yn=function(Tn){var En=De(Tn);Ve(En,Tn)>=0||we$1(Oe.clickOutsideDeactivates,Tn)||we$1(Oe.allowOutsideClick,Tn)||(Tn.preventDefault(),Tn.stopImmediatePropagation())},Cn=function(){if(Ge.active)return nt$1.activateTrap(ke,Be),Ge.delayInitialFocusTimer=Oe.delayInitialFocus?rt$1(function(){an(Qe())}):an(Qe()),t.addEventListener("focusin",fn,!0),t.addEventListener("mousedown",hn,{capture:!0,passive:!1}),t.addEventListener("touchstart",hn,{capture:!0,passive:!1}),t.addEventListener("click",yn,{capture:!0,passive:!1}),t.addEventListener("keydown",mn,{capture:!0,passive:!1}),Be},wn=function(){if(Ge.active)return t.removeEventListener("focusin",fn,!0),t.removeEventListener("mousedown",hn,!0),t.removeEventListener("touchstart",hn,!0),t.removeEventListener("click",yn,!0),t.removeEventListener("keydown",mn,!0),Be},bn=function(Tn){var En=Tn.some(function(An){var Ln=Array.from(An.removedNodes);return Ln.some(function(Rn){return Rn===Ge.mostRecentlyFocusedNode})});En&&an(Qe())},Sn=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(bn):void 0,Mn=function(){Sn&&(Sn.disconnect(),Ge.active&&!Ge.paused&&Ge.containers.map(function(Tn){Sn.observe(Tn,{subtree:!0,childList:!0})}))};return Be={get active(){return Ge.active},get paused(){return Ge.paused},activate:function(Tn){if(Ge.active)return this;var En=je(Tn,"onActivate"),An=je(Tn,"onPostActivate"),Ln=je(Tn,"checkCanFocusTrap");Ln||en(),Ge.active=!0,Ge.paused=!1,Ge.nodeFocusedBeforeActivation=t.activeElement,En==null||En();var Rn=function(){Ln&&en(),Cn(),Mn(),An==null||An()};return Ln?(Ln(Ge.containers.concat()).then(Rn,Rn),this):(Rn(),this)},deactivate:function(Tn){if(!Ge.active)return this;var En=at$1({onDeactivate:Oe.onDeactivate,onPostDeactivate:Oe.onPostDeactivate,checkCanReturnFocus:Oe.checkCanReturnFocus},Tn);clearTimeout(Ge.delayInitialFocusTimer),Ge.delayInitialFocusTimer=void 0,wn(),Ge.active=!1,Ge.paused=!1,Mn(),nt$1.deactivateTrap(ke,Be);var An=je(En,"onDeactivate"),Ln=je(En,"onPostDeactivate"),Rn=je(En,"checkCanReturnFocus"),Gn=je(En,"returnFocus","returnFocusOnDeactivate");An==null||An();var Nn=function(){rt$1(function(){Gn&&an(cn(Ge.nodeFocusedBeforeActivation)),Ln==null||Ln()})};return Gn&&Rn?(Rn(cn(Ge.nodeFocusedBeforeActivation)).then(Nn,Nn),this):(Nn(),this)},pause:function(Tn){if(Ge.paused||!Ge.active)return this;var En=je(Tn,"onPause"),An=je(Tn,"onPostPause");return Ge.paused=!0,En==null||En(),wn(),Mn(),An==null||An(),this},unpause:function(Tn){if(!Ge.paused||!Ge.active)return this;var En=je(Tn,"onUnpause"),An=je(Tn,"onPostUnpause");return Ge.paused=!1,En==null||En(),en(),Cn(),Mn(),An==null||An(),this},updateContainerElements:function(Tn){var En=[].concat(Tn).filter(Boolean);return Ge.containers=En.map(function(An){return typeof An=="string"?t.querySelector(An):An}),Ge.active&&en(),Mn(),this}},Be.updateContainerElements(r),Be};/*!
  * focus-trap-vue v4.0.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const cs={escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:[Boolean,Function],default:!0},clickOutsideDeactivates:[Boolean,Function],initialFocus:[String,Function,Boolean],fallbackFocus:[String,Function],checkCanFocusTrap:Function,checkCanReturnFocus:Function,delayInitialFocus:{type:Boolean,default:!0},document:Object,preventScroll:Boolean,setReturnFocus:[Object,String,Boolean,Function],tabbableOptions:Object},fs=defineComponent({props:Object.assign({active:{type:Boolean,default:!0}},cs),emits:["update:active","activate","postActivate","deactivate","postDeactivate"],render(){return this.renderImpl()},setup(r,{slots:e,emit:t}){let ke;const Oe=ref(null),Ge=computed(()=>{const je=Oe.value;return je&&(je instanceof HTMLElement?je:je.$el)});function Be(){return ke||(ke=us(Ge.value,{escapeDeactivates:r.escapeDeactivates,allowOutsideClick:r.allowOutsideClick,returnFocusOnDeactivate:r.returnFocusOnDeactivate,clickOutsideDeactivates:r.clickOutsideDeactivates,onActivate:()=>{t("update:active",!0),t("activate")},onDeactivate:()=>{t("update:active",!1),t("deactivate")},onPostActivate:()=>t("postActivate"),onPostDeactivate:()=>t("postDeactivate"),initialFocus:r.initialFocus,fallbackFocus:r.fallbackFocus,tabbableOptions:r.tabbableOptions,delayInitialFocus:r.delayInitialFocus,preventScroll:r.preventScroll}))}return onMounted(()=>{watch(()=>r.active,je=>{je&&Ge.value?Be().activate():ke&&(ke.deactivate(),(!Ge.value||Ge.value.nodeType===Node.COMMENT_NODE)&&(ke=null))},{immediate:!0,flush:"post"})}),onUnmounted(()=>{ke&&ke.deactivate(),ke=null}),{activate(){Be().activate()},deactivate(){ke&&ke.deactivate()},renderImpl(){if(!e.default)return null;const je=e.default().filter(Ve=>Ve.type!==Comment);return!je||!je.length||je.length>1?(console.error("[focus-trap-vue]: FocusTrap requires exactly one child."),je):cloneVNode(je[0],{ref:Oe})}}}}),ps=["aria-labelledby","role","open"],hs={class:"fr-container fr-container--fluid fr-container-md"},vs={class:"fr-grid-row fr-grid-row--center"},ms={class:"fr-modal__body"},gs={class:"fr-modal__header"},bs=["title"],ys={class:"fr-modal__content"},ks=["id"],ws={key:0,class:"fr-modal__footer"},st$1=2,_s=defineComponent({__name:"DsfrModal",props:{modalId:{default:()=>j$1("modal","dialog")},opened:{type:Boolean},actions:{default:()=>[]},isAlert:{type:Boolean},origin:{default:()=>({focus(){}})},title:{},icon:{default:void 0},size:{default:"md"},closeButtonLabel:{default:"Fermer"},closeButtonTitle:{default:"Fermer la fenêtre modale"}},emits:["close"],setup(r,{emit:e}){const t=r,ke=e,Oe=cn=>{cn.key==="Escape"&&en()},Ge=computed(()=>t.isAlert?"alertdialog":"dialog"),Be=ref(null),je=ref();watch(()=>t.opened,cn=>{var dn,hn;cn?((dn=je.value)==null||dn.showModal(),setTimeout(()=>{var fn;(fn=Be.value)==null||fn.focus()},100)):(hn=je.value)==null||hn.close(),Ve(cn)});function Ve(cn){typeof window<"u"&&document.body.classList.toggle("modal-open",cn)}onMounted(()=>{Ze(),Ve(t.opened)}),onBeforeUnmount(()=>{Qe(),Ve(!1)});function Ze(){document.addEventListener("keydown",Oe)}function Qe(){document.removeEventListener("keydown",Oe)}async function en(){var cn;await nextTick(),(cn=t.origin)==null||cn.focus(),ke("close")}const tn=computed(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),an=computed(()=>tn.value?void 0:typeof t.icon=="string"?{name:t.icon,scale:st$1}:{scale:st$1,...t.icon??{}});return(cn,dn)=>cn.opened?(openBlock(),createBlock(unref(fs),{key:0},{default:withCtx(()=>{var hn,fn;return[createBaseVNode("dialog",{id:"fr-modal-1",ref_key:"modal",ref:je,"aria-labelledby":cn.modalId,role:Ge.value,class:normalizeClass(["fr-modal",{"fr-modal--opened":cn.opened}]),open:cn.opened},[createBaseVNode("div",hs,[createBaseVNode("div",vs,[createBaseVNode("div",{class:normalizeClass(["fr-col-12",{"fr-col-md-8":cn.size==="lg","fr-col-md-6":cn.size==="md","fr-col-md-4":cn.size==="sm"}])},[createBaseVNode("div",ms,[createBaseVNode("div",gs,[createBaseVNode("button",{ref_key:"closeBtn",ref:Be,class:"fr-btn fr-btn--close",title:cn.closeButtonTitle,"aria-controls":"fr-modal-1",type:"button",onClick:dn[0]||(dn[0]=pn=>en())},[createBaseVNode("span",null,toDisplayString(cn.closeButtonLabel),1)],8,bs)]),createBaseVNode("div",ys,[createBaseVNode("h1",{id:cn.modalId,class:"fr-modal__title"},[tn.value||an.value?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass({[String(cn.icon)]:tn.value})},[cn.icon&&an.value?(openBlock(),createBlock(unref(g$1),normalizeProps(mergeProps({key:0},an.value)),null,16)):createCommentVNode("",!0)],2)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(cn.title),1)],8,ks),renderSlot(cn.$slots,"default",{},void 0,!0)]),(hn=cn.actions)!=null&&hn.length||cn.$slots.footer?(openBlock(),createElementBlock("div",ws,[renderSlot(cn.$slots,"footer",{},void 0,!0),(fn=cn.actions)!=null&&fn.length?(openBlock(),createBlock(Ee,{key:0,align:"right",buttons:cn.actions,"inline-layout-when":"large",reverse:""},null,8,["buttons"])):createCommentVNode("",!0)])):createCommentVNode("",!0)])],2)])])],10,ps)]}),_:3})):createCommentVNode("",!0)}}),$s=ae$1(_s,[["__scopeId","data-v-43ec81d5"]]),Ds=["id","aria-current"],Ms=defineComponent({__name:"DsfrNavigationItem",props:{id:{default:()=>j$1("nav","item")},active:{type:Boolean}},setup(r){return(e,t)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-nav__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default",{},void 0,!0)],8,Ds))}}),Lt$1=ae$1(Ms,[["__scopeId","data-v-5909c19f"]]),Is=["href"],ot$1=2,He=defineComponent({__name:"DsfrNavigationMenuLink",props:{id:{default:()=>j$1("menu-link")},to:{default:"#"},text:{default:""},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},emits:["toggleId"],setup(r){const e=r,t=computed(()=>typeof e.to=="string"&&e.to.startsWith("http")),ke=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),Oe=computed(()=>ke.value||!e.icon?void 0:typeof e.icon=="string"?{scale:ot$1,name:e.icon}:{scale:ot$1,...e.icon||{}});return(Ge,Be)=>{const je=resolveComponent("RouterLink");return t.value?(openBlock(),createElementBlock("a",{key:0,class:"fr-nav__link","data-testid":"nav-external-link",href:Ge.to,onClick:Be[0]||(Be[0]=Ve=>Ge.$emit("toggleId",Ge.id))},toDisplayString(Ge.text),9,Is)):(openBlock(),createBlock(je,{key:1,class:normalizeClass(["fr-nav__link",{[String(Ge.icon)]:ke.value}]),"data-testid":"nav-router-link",to:Ge.to,onClick:Be[1]||(Be[1]=Ve=>Ge.$emit("toggleId",Ge.id))},{default:withCtx(()=>[Ge.icon&&Oe.value?(openBlock(),createBlock(unref(g$1),normalizeProps(mergeProps({key:0},Oe.value)),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Ge.text),1)]),_:1},8,["to","class"]))}}}),Ls=["id","aria-current"],Ct$1=defineComponent({__name:"DsfrNavigationMenuItem",props:{id:{default:()=>j$1("menu","item")},active:{type:Boolean}},setup(r){return(e,t)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-menu__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default")],8,Ls))}}),Cs=["aria-expanded","aria-current","aria-controls"],zs=["id"],Ss={class:"fr-menu__list"},zt$1=defineComponent({__name:"DsfrNavigationMenu",props:{id:{default:()=>j$1("menu")},title:{},links:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(r){const e=r,{collapse:t,collapsing:ke,cssExpanded:Oe,doExpand:Ge,onTransitionEnd:Be}=ce$1(),je=computed(()=>e.id===e.expandedId);return watch(je,(Ve,Ze)=>{Ve!==Ze&&Ge(Ve)}),onMounted(()=>{je.value&&Ge(!0)}),(Ve,Ze)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":je.value,"aria-current":Ve.active||void 0,"aria-controls":Ve.id,onClick:Ze[0]||(Ze[0]=Qe=>Ve.$emit("toggleId",Ve.id))},[createBaseVNode("span",null,toDisplayString(Ve.title),1)],8,Cs),createBaseVNode("div",{id:Ve.id,ref_key:"collapse",ref:t,class:normalizeClass(["fr-collapse fr-menu",{"fr-collapse--expanded":unref(Oe),"fr-collapsing":unref(ke)}]),"data-testid":"navigation-menu",onTransitionend:Ze[2]||(Ze[2]=Qe=>unref(Be)(je.value))},[createBaseVNode("ul",Ss,[renderSlot(Ve.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(Ve.links,(Qe,en)=>(openBlock(),createBlock(Ct$1,{key:en},{default:withCtx(()=>[createVNode(He,mergeProps({ref_for:!0},Qe,{onToggleId:Ze[1]||(Ze[1]=tn=>Ve.$emit("toggleId",Ve.expandedId))}),null,16)]),_:2},1024))),128))])],42,zs)],64))}}),Ts={class:"fr-col-12 fr-col-lg-3"},As={class:"fr-mega-menu__category"},Es={class:"fr-mega-menu__list"},St=defineComponent({__name:"DsfrNavigationMegaMenuCategory",props:{title:{},active:{type:Boolean},links:{}},setup(r){return(e,t)=>(openBlock(),createElementBlock("div",Ts,[createBaseVNode("h5",As,[createBaseVNode("a",{class:"fr-nav__link",href:"#",onClick:t[0]||(t[0]=withModifiers(()=>{},["prevent"]))},toDisplayString(e.title),1)]),createBaseVNode("ul",Es,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.links,(ke,Oe)=>(openBlock(),createElementBlock("li",{key:Oe,class:"fr-nav__link"},[createVNode(He,mergeProps({ref_for:!0},ke),null,16)]))),128))])]))}}),Hs=["aria-expanded","aria-current","aria-controls"],Bs=["id"],Vs={class:"fr-container fr-container--fluid fr-container-lg"},Rs={class:"fr-grid-row fr-grid-row-lg--gutters"},Ps={class:"fr-col-12 fr-col-lg-8 fr-col-offset-lg-4--right fr-mb-4v"},Fs={class:"fr-mega-menu__leader"},Ns={class:"fr-h4 fr-mb-2v"},Xs={class:"fr-hidden fr-displayed-lg"},Ys=defineComponent({__name:"DsfrNavigationMegaMenu",props:{id:{default:()=>j$1("menu")},title:{},description:{default:""},link:{default:()=>({to:"#",text:"Voir toute la rubrique"})},menus:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(r){const e=r,{collapse:t,collapsing:ke,cssExpanded:Oe,doExpand:Ge,onTransitionEnd:Be}=ce$1(),je=computed(()=>e.id===e.expandedId);return watch(je,(Ve,Ze)=>{Ve!==Ze&&Ge(Ve)}),onMounted(()=>{je.value&&Ge(!0)}),(Ve,Ze)=>{const Qe=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":je.value,"aria-current":Ve.active||void 0,"aria-controls":Ve.id,onClick:Ze[0]||(Ze[0]=en=>Ve.$emit("toggleId",Ve.id))},toDisplayString(Ve.title),9,Hs),createBaseVNode("div",{id:Ve.id,ref_key:"collapse",ref:t,"data-testid":"mega-menu-wrapper",class:normalizeClass(["fr-collapse fr-mega-menu",{"fr-collapse--expanded":unref(Oe),"fr-collapsing":unref(ke)}]),tabindex:"-1",onTransitionend:Ze[2]||(Ze[2]=en=>unref(Be)(je.value))},[createBaseVNode("div",Vs,[createBaseVNode("button",{class:"fr-link--close fr-link","aria-controls":"mega-menu-695",onClick:Ze[1]||(Ze[1]=en=>Ve.$emit("toggleId",Ve.id))}," Fermer "),createBaseVNode("div",Rs,[createBaseVNode("div",Ps,[createBaseVNode("div",Fs,[createBaseVNode("h4",Ns,toDisplayString(Ve.title),1),createBaseVNode("p",Xs,[createTextVNode(toDisplayString(Ve.description)+" ",1),renderSlot(Ve.$slots,"description",{},void 0,!0)]),createVNode(Qe,{class:"fr-link fr-icon-arrow-right-line fr-link--icon-right fr-link--align-on-content",to:Ve.link.to},{default:withCtx(()=>[createTextVNode(toDisplayString(Ve.link.text),1)]),_:1},8,["to"])])]),renderSlot(Ve.$slots,"default",{},void 0,!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(Ve.menus,(en,tn)=>(openBlock(),createBlock(St,mergeProps({key:tn,ref_for:!0},en),null,16))),128))])])],42,Bs)],64)}}}),Tt$1=ae$1(Ys,[["__scopeId","data-v-020a2672"]]),Os=["id","aria-label"],js={class:"fr-nav__list"},qs=defineComponent({__name:"DsfrNavigation",props:{id:{default:()=>j$1("menu")},label:{default:"Menu principal"},navItems:{default:()=>[]}},setup(r){const e=r,t=ref(void 0),ke=je=>{if(je===t.value){t.value=void 0;return}t.value=je},Oe=je=>{if(je!==document.getElementById(e.id)){if(!(je!=null&&je.parentNode)){ke(t.value);return}Oe(je.parentNode)}},Ge=je=>{Oe(je.target)},Be=je=>{je.key==="Escape"&&ke(t.value)};return onMounted(()=>{document.addEventListener("click",Ge),document.addEventListener("keydown",Be)}),onUnmounted(()=>{document.removeEventListener("click",Ge),document.removeEventListener("keydown",Be)}),(je,Ve)=>(openBlock(),createElementBlock("nav",{id:je.id,class:"fr-nav",role:"navigation","aria-label":je.label},[createBaseVNode("ul",js,[renderSlot(je.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(je.navItems,(Ze,Qe)=>(openBlock(),createBlock(Lt$1,{key:Qe},{default:withCtx(()=>[Ze.to&&Ze.text?(openBlock(),createBlock(He,mergeProps({key:0,ref_for:!0},Ze,{"expanded-id":t.value,onToggleId:Ve[0]||(Ve[0]=en=>ke(en))}),null,16,["expanded-id"])):Ze.title&&Ze.links?(openBlock(),createBlock(zt$1,mergeProps({key:1,ref_for:!0},Ze,{"expanded-id":t.value,onToggleId:Ve[1]||(Ve[1]=en=>ke(en))}),null,16,["expanded-id"])):Ze.title&&Ze.menus?(openBlock(),createBlock(Tt$1,mergeProps({key:2,ref_for:!0},Ze,{"expanded-id":t.value,onToggleId:Ve[2]||(Ve[2]=en=>ke(en))}),null,16,["expanded-id"])):createCommentVNode("",!0)]),_:2},1024))),128))])],8,Os))}}),_o=["id","name","value","checked","disabled"],$o=["for"],Do={key:0,class:"required"},Mo={key:0,class:"fr-hint-text"},Io={key:0,class:"fr-radio-rich__pictogram"},Lo=["src"],Co=["href"],zo=["href"],So=["href"],At$2=defineComponent({__name:"DsfrRadioButton",props:{id:{default:()=>j$1("basic","radio")},name:{},modelValue:{type:[String,Number,Boolean],default:""},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},value:{type:[String,Number,Boolean]},label:{default:""},hint:{default:""},img:{default:void 0},svgPath:{default:void 0},svgAttrs:{default:()=>({viewBox:"0 0 80 80",width:"80px",height:"80px"})}},emits:["update:modelValue"],setup(r){const e=r,t={viewBox:"0 0 80 80",width:"80px",height:"80px"},ke=computed(()=>!!e.img||!!e.svgPath);return(Oe,Ge)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":Oe.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-radio-group",{"fr-radio-rich":ke.value,"fr-radio-group--sm":Oe.small}])},[createBaseVNode("input",mergeProps({id:Oe.id,type:"radio",name:Oe.name,value:Oe.value,checked:Oe.modelValue===Oe.value,disabled:Oe.disabled},Oe.$attrs,{onClick:Ge[0]||(Ge[0]=Be=>Oe.$emit("update:modelValue",Oe.value))}),null,16,_o),createBaseVNode("label",{for:Oe.id,class:"fr-label"},[renderSlot(Oe.$slots,"label",{},()=>[createTextVNode(toDisplayString(Oe.label)+" ",1),renderSlot(Oe.$slots,"required-tip",{},()=>[Oe.$attrs.required?(openBlock(),createElementBlock("span",Do," *")):createCommentVNode("",!0)])]),Oe.hint?(openBlock(),createElementBlock("span",Mo,toDisplayString(Oe.hint),1)):createCommentVNode("",!0)],8,$o),Oe.img||Oe.svgPath?(openBlock(),createElementBlock("div",Io,[Oe.img?(openBlock(),createElementBlock("img",{key:0,src:Oe.img,class:"fr-artwork",alt:""},null,8,Lo)):(openBlock(),createElementBlock("svg",mergeProps({key:1,"aria-hidden":"true",class:"fr-artwork"},{...t,...Oe.svgAttrs}),[createBaseVNode("use",{class:"fr-artwork-decorative",href:`${Oe.svgPath}#artwork-decorative`},null,8,Co),createBaseVNode("use",{class:"fr-artwork-minor",href:`${Oe.svgPath}#artwork-minor`},null,8,zo),createBaseVNode("use",{class:"fr-artwork-major",href:`${Oe.svgPath}#artwork-major`},null,8,So)],16))])):createCommentVNode("",!0)],2)],2))}}),To={class:"fr-form-group"},Ao=["disabled","aria-labelledby","aria-invalid","role"],Eo=["id"],Ho={key:0,class:"fr-hint-text"},Bo={key:0,class:"required"},Vo=["id"],Ro={class:"line-1"},Po=defineComponent({__name:"DsfrRadioButtonSet",props:{titleId:{default:()=>j$1("radio-button","group")},disabled:{type:Boolean},required:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{},errorMessage:{default:""},validMessage:{default:""},legend:{default:""},hint:{default:""},modelValue:{type:[String,Number,Boolean]},options:{default:()=>[]},ariaInvalid:{type:[Boolean,String]}},emits:["update:modelValue"],setup(r,{emit:e}){const t=r,ke=e,Oe=computed(()=>t.errorMessage||t.validMessage),Ge=computed(()=>t.errorMessage?"fr-error-text":"fr-valid-text"),Be=Ve=>{Ve!==t.modelValue&&ke("update:modelValue",Ve)},je=computed(()=>Oe.value?`${t.titleId} messages-${t.titleId}`:t.titleId);return(Ve,Ze)=>(openBlock(),createElementBlock("div",To,[createBaseVNode("fieldset",{class:normalizeClass(["fr-fieldset",{"fr-fieldset--error":Ve.errorMessage,"fr-fieldset--valid":Ve.validMessage}]),disabled:Ve.disabled,"aria-labelledby":je.value,"aria-invalid":Ve.ariaInvalid,role:Ve.errorMessage||Ve.validMessage?"group":void 0},[Ve.legend||Ve.$slots.legend||Ve.hint||Ve.$slots.hint?(openBlock(),createElementBlock("legend",{key:0,id:Ve.titleId,class:"fr-fieldset__legend fr-fieldset__legend--regular"},[renderSlot(Ve.$slots,"legend",{},()=>[createTextVNode(toDisplayString(Ve.legend)+" ",1),Ve.hint||Ve.$slots.hint?(openBlock(),createElementBlock("span",Ho,[renderSlot(Ve.$slots,"hint",{},()=>[createTextVNode(toDisplayString(Ve.hint),1)])])):createCommentVNode("",!0),renderSlot(Ve.$slots,"required-tip",{},()=>[Ve.required?(openBlock(),createElementBlock("span",Bo," *")):createCommentVNode("",!0)])])],8,Eo)):createCommentVNode("",!0),renderSlot(Ve.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ve.options,(Qe,en)=>(openBlock(),createBlock(At$2,mergeProps({key:typeof Qe.value=="boolean"?en:Qe.value||en,name:Ve.name,"aria-disabled":Qe.disabled,ref_for:!0},Qe,{small:Ve.small,inline:Ve.inline,"model-value":Ve.modelValue,"onUpdate:modelValue":Ze[0]||(Ze[0]=tn=>Be(tn))}),null,16,["name","aria-disabled","small","inline","model-value"]))),128))]),Oe.value?(openBlock(),createElementBlock("div",{key:1,id:`messages-${Ve.titleId}`,class:"fr-messages-group","aria-live":"assertive",role:"alert"},[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",Ge.value])},[createBaseVNode("span",Ro,toDisplayString(Oe.value),1)],2)],8,Vo)):createCommentVNode("",!0)],10,Ao)]))}}),Uo={class:"fr-segmented__element"},Zo=["id","name","value","checked","disabled","aria-disabled"],Jo=["for"],xo={key:1},Et$1=defineComponent({__name:"DsfrSegmented",props:{id:{default:()=>j$1("basic","checkbox")},name:{default:void 0},modelValue:{default:""},value:{},label:{default:""},disabled:{type:Boolean},icon:{default:void 0}},emits:["update:modelValue"],setup(r){const e=r,t=computed(()=>typeof e.icon=="string"?{name:e.icon}:e.icon),ke=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-")?e.icon:"");return(Oe,Ge)=>(openBlock(),createElementBlock("div",Uo,[createBaseVNode("input",mergeProps({id:Oe.id,type:"radio",name:Oe.name,value:Oe.value,checked:Oe.modelValue===Oe.value,disabled:Oe.disabled,"aria-disabled":Oe.disabled},Oe.$attrs,{onClick:Ge[0]||(Ge[0]=Be=>Oe.$emit("update:modelValue",Oe.value))}),null,16,Zo),createBaseVNode("label",{for:Oe.id,class:normalizeClass(["fr-label",{[ke.value]:ke.value}])},[Oe.icon&&!ke.value?(openBlock(),createBlock(unref(g$1),normalizeProps(mergeProps({key:0},t.value)),null,16)):createCommentVNode("",!0),Oe.icon?(openBlock(),createElementBlock("span",xo," ")):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Oe.label),1)],10,Jo)]))}}),ei={class:"fr-form-group"},ti=["disabled"],ai=["id"],ni={key:0,class:"fr-hint-text"},ri={class:"fr-segmented__elements"},li=defineComponent({__name:"DsfrSegmentedSet",props:{titleId:{default:()=>j$1("radio-button","group")},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{default:"no-name"},hint:{},legend:{default:""},modelValue:{},options:{default:()=>[]}},emits:["update:modelValue"],setup(r,{emit:e}){const t=r,ke=e,Oe=Ge=>{Ge!==t.modelValue&&ke("update:modelValue",Ge)};return(Ge,Be)=>(openBlock(),createElementBlock("div",ei,[createBaseVNode("fieldset",{class:normalizeClass(["fr-segmented",{"fr-segmented--sm":Ge.small,"fr-segmented--no-legend":!Ge.legend}]),disabled:Ge.disabled},[Ge.legend?(openBlock(),createElementBlock("legend",{key:0,id:Ge.titleId,class:normalizeClass(["fr-segmented__legend",{"fr-segmented__legend--inline":Ge.inline}])},[renderSlot(Ge.$slots,"legend",{},()=>[createTextVNode(toDisplayString(Ge.legend),1)]),Ge.hint?(openBlock(),createElementBlock("span",ni,toDisplayString(Ge.hint),1)):createCommentVNode("",!0)],10,ai)):createCommentVNode("",!0),createBaseVNode("div",ri,[renderSlot(Ge.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ge.options,(je,Ve)=>(openBlock(),createBlock(Et$1,mergeProps({key:je.value||Ve,name:Ge.name||je.name,ref_for:!0},{...je,disabled:Ge.disabled||je.disabled},{"model-value":Ge.modelValue,"onUpdate:modelValue":Be[0]||(Be[0]=Ze=>Oe(Ze))}),null,16,["name","model-value"]))),128))])])],10,ti)]))}}),si=["for"],oi={key:0,class:"required"},ii={key:0,class:"fr-hint-text"},di=["id","name","disabled","aria-disabled","required"],ui=["selected"],ci=["selected","value","disabled","aria-disabled"],fi=["id"],pi=defineComponent({inheritAttrs:!1,__name:"DsfrSelect",props:{required:{type:Boolean},disabled:{type:Boolean},selectId:{default:()=>j$1("select")},name:{default:void 0},description:{default:void 0},modelValue:{default:void 0},label:{default:""},options:{default:()=>[]},successMessage:{default:""},errorMessage:{default:""},defaultUnselectedText:{default:"Sélectionner une option"}},emits:["update:modelValue"],setup(r){const e=r,t=computed(()=>e.errorMessage||e.successMessage),ke=computed(()=>e.errorMessage?"error":"valid");return(Oe,Ge)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-select-group",{[`fr-select-group--${ke.value}`]:t.value}])},[createBaseVNode("label",{class:"fr-label",for:Oe.selectId},[renderSlot(Oe.$slots,"label",{},()=>[createTextVNode(toDisplayString(Oe.label)+" ",1),renderSlot(Oe.$slots,"required-tip",{},()=>[Oe.required?(openBlock(),createElementBlock("span",oi," *")):createCommentVNode("",!0)])]),Oe.description?(openBlock(),createElementBlock("span",ii,toDisplayString(Oe.description),1)):createCommentVNode("",!0)],8,si),createBaseVNode("select",mergeProps({id:Oe.selectId,class:[{[`fr-select--${ke.value}`]:t.value},"fr-select"],name:Oe.name||Oe.selectId,disabled:Oe.disabled,"aria-disabled":Oe.disabled,required:Oe.required},Oe.$attrs,{onChange:Ge[0]||(Ge[0]=Be=>{var je;return Oe.$emit("update:modelValue",(je=Be.target)==null?void 0:je.value)})}),[createBaseVNode("option",{selected:Oe.modelValue==null,disabled:"",hidden:""},toDisplayString(Oe.defaultUnselectedText),9,ui),(openBlock(!0),createElementBlock(Fragment,null,renderList(Oe.options,(Be,je)=>(openBlock(),createElementBlock("option",{key:je,selected:Oe.modelValue===Be||typeof Be=="object"&&Be.value===Oe.modelValue,value:typeof Be=="object"?Be.value:Be,disabled:!!(typeof Be=="object"&&Be.disabled),"aria-disabled":!!(typeof Be=="object"&&Be.disabled)},toDisplayString(typeof Be=="object"?Be.text:Be),9,ci))),128))],16,di),t.value?(openBlock(),createElementBlock("p",{key:0,id:`select-${ke.value}-desc-${ke.value}`,class:normalizeClass(`fr-${ke.value}-text`)},toDisplayString(t.value),11,fi)):createCommentVNode("",!0)],2))}}),hi={class:"fr-share"},vi={class:"fr-share__title"},mi={class:"fr-btns-group"},gi=["title","href","onClick"],bi={key:0},yi=["href","title"],ki=["title"],wi=defineComponent({__name:"DsfrShare",props:{title:{default:"Partager la page"},copyLabel:{default:"Copier dans le presse-papier"},mail:{default:()=>{}},networks:{default:()=>[]}},setup(r){const e=()=>{const ke=window.location.href;navigator.clipboard.writeText(ke)},t=({url:ke,label:Oe})=>{window.open(ke,Oe,"toolbar=no,location=yes,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=450")};return(ke,Oe)=>{var Ge;return openBlock(),createElementBlock("div",hi,[createBaseVNode("p",vi,toDisplayString(ke.title),1),createBaseVNode("ul",mi,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ke.networks,(Be,je)=>(openBlock(),createElementBlock("li",{key:je},[createBaseVNode("a",{class:normalizeClass(`fr-btn fr-btn--${Be.name}`),title:`${Be.label} - nouvelle fenêtre`,href:Be.url,target:"_blank",rel:"noopener noreferrer",onClick:withModifiers(Ve=>t(Be),["prevent"])},toDisplayString(Be.label),11,gi)]))),128)),(Ge=ke.mail)!=null&&Ge.to?(openBlock(),createElementBlock("li",bi,[createBaseVNode("a",{class:"fr-btn fr-btn--mail",href:ke.mail.to,title:ke.mail.label,target:"_blank",rel:"noopener noreferrer"},toDisplayString(ke.mail.label),9,yi)])):createCommentVNode("",!0),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--copy",title:ke.copyLabel,onClick:Oe[0]||(Oe[0]=Be=>e())},toDisplayString(ke.copyLabel),9,ki)])])])}}}),Wi={role:"presentation"},Ui=["id","data-testid","tabindex","aria-selected","aria-controls"],Zi={key:0,style:{"margin-left":"-0.25rem","margin-right":"0.5rem","font-size":"0.95rem"}},Rt$1=defineComponent({__name:"DsfrTabItem",props:{panelId:{},tabId:{},selected:{type:Boolean},icon:{default:void 0}},emits:["click","next","previous","first","last"],setup(r,{emit:e}){const t=r,ke=e,Oe=ref(null);watch(()=>t.selected,je=>{var Ve;je&&((Ve=Oe.value)==null||Ve.focus())});const Ge={ArrowRight:"next",ArrowLeft:"previous",ArrowDown:"next",ArrowUp:"previous",Home:"first",End:"last"};function Be(je){const Ve=je==null?void 0:je.key,Ze=Ge[Ve];Ze&&ke(Ze)}return(je,Ve)=>(openBlock(),createElementBlock("li",Wi,[createBaseVNode("button",{id:je.tabId,ref_key:"button",ref:Oe,"data-testid":`test-${je.tabId}`,class:"fr-tabs__tab",tabindex:je.selected?0:-1,role:"tab",type:"button","aria-selected":je.selected,"aria-controls":je.panelId,onClick:Ve[0]||(Ve[0]=withModifiers(Ze=>je.$emit("click",Ze),["prevent"])),onKeydown:Ve[1]||(Ve[1]=Ze=>Be(Ze))},[je.icon?(openBlock(),createElementBlock("span",Zi,[createVNode(unref(g$1),{name:je.icon},null,8,["name"])])):createCommentVNode("",!0),renderSlot(je.$slots,"default")],40,Ui)]))}}),Ji=["id","aria-labelledby","tabindex"],xi=defineComponent({__name:"DsfrTabContent",props:{asc:{type:Boolean},selected:{type:Boolean},panelId:{},tabId:{}},setup(r){useCssVars(Ge=>({"71a34239":ke.value,"6beade6c":Oe.value}));const e=r,t={true:"100%",false:"-100%"},ke=computed(()=>t[String(e.asc)]),Oe=computed(()=>t[String(!e.asc)]);return(Ge,Be)=>(openBlock(),createBlock(Transition,{name:"slide-fade",mode:"in-out"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:Ge.panelId,class:normalizeClass(["fr-tabs__panel",{"fr-tabs__panel--selected":Ge.selected}]),role:"tabpanel","aria-labelledby":Ge.tabId,tabindex:Ge.selected?0:-1},[renderSlot(Ge.$slots,"default",{},void 0,!0)],10,Ji),[[vShow,Ge.selected]])]),_:3}))}}),Pt$1=ae$1(xi,[["__scopeId","data-v-f60b34d7"]]),ed=["aria-label"],td$1=defineComponent({__name:"DsfrTabs",props:{tabListName:{},tabTitles:{default:()=>[]},tabContents:{default:()=>[]},initialSelectedIndex:{default:0}},emits:["selectTab"],setup(r,{expose:e,emit:t}){const ke=r,Oe=t,Ge=ref(ke.initialSelectedIndex||0),Be=reactive({}),je=ref(!0),Ve=ref(null),Ze=ref(null),Qe=ref(null),en=mn=>Ge.value===mn,tn=()=>{var mn,yn;if(Ge.value<0||!Qe.value||!Qe.value.offsetHeight)return;const Cn=Qe.value.offsetHeight,wn=(mn=Ze.value)==null?void 0:mn.querySelectorAll(".fr-tabs__panel")[Ge.value];if(!wn||!wn.offsetHeight)return;const bn=wn.offsetHeight;(yn=Ze.value)==null||yn.style.setProperty("--tabs-height",`${Cn+bn}px`)},an=mn=>{if(Be[mn])return Be[mn];const yn=j$1("tab");return Be[mn]=yn,yn},cn=async mn=>{je.value=mn>Ge.value,Ge.value=mn,Oe("selectTab",mn)},dn=async()=>{const mn=Ge.value===0?ke.tabTitles.length-1:Ge.value-1;await cn(mn)},hn=async()=>{const mn=Ge.value===ke.tabTitles.length-1?0:Ge.value+1;await cn(mn)},fn=async()=>{await cn(0)},pn=async()=>{await cn(ke.tabTitles.length-1)};return onMounted(()=>{var mn;window.ResizeObserver&&(Ve.value=new window.ResizeObserver(()=>{tn()})),(mn=Ze.value)==null||mn.querySelectorAll(".fr-tabs__panel").forEach(yn=>{var Cn;yn&&((Cn=Ve.value)==null||Cn.observe(yn))})}),onUnmounted(()=>{var mn;(mn=Ze.value)==null||mn.querySelectorAll(".fr-tabs__panel").forEach(yn=>{var Cn;yn&&((Cn=Ve.value)==null||Cn.unobserve(yn))})}),e({renderTabs:tn,selectIndex:cn,selectFirst:fn,selectLast:pn}),(mn,yn)=>(openBlock(),createElementBlock("div",{ref_key:"$el",ref:Ze,class:"fr-tabs"},[createBaseVNode("ul",{ref_key:"tablist",ref:Qe,class:"fr-tabs__list",role:"tablist","aria-label":mn.tabListName},[renderSlot(mn.$slots,"tab-items",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(mn.tabTitles,(Cn,wn)=>(openBlock(),createBlock(Rt$1,{key:wn,icon:Cn.icon,"panel-id":Cn.panelId||`${an(wn)}-panel`,"tab-id":Cn.tabId||an(wn),selected:en(wn),onClick:bn=>cn(wn),onNext:yn[0]||(yn[0]=bn=>hn()),onPrevious:yn[1]||(yn[1]=bn=>dn()),onFirst:yn[2]||(yn[2]=bn=>fn()),onLast:yn[3]||(yn[3]=bn=>pn())},{default:withCtx(()=>[createTextVNode(toDisplayString(Cn.title),1)]),_:2},1032,["icon","panel-id","tab-id","selected","onClick"]))),128))])],8,ed),(openBlock(!0),createElementBlock(Fragment,null,renderList(mn.tabContents,(Cn,wn)=>{var bn,Sn,Mn,Tn;return openBlock(),createBlock(Pt$1,{key:wn,"panel-id":((Sn=(bn=mn.tabTitles)==null?void 0:bn[wn])==null?void 0:Sn.panelId)||`${an(wn)}-panel`,"tab-id":((Tn=(Mn=mn.tabTitles)==null?void 0:Mn[wn])==null?void 0:Tn.tabId)||an(wn),selected:en(wn),asc:je.value},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(Cn),1)]),_:2},1032,["panel-id","tab-id","selected","asc"])}),128)),renderSlot(mn.$slots,"default")],512))}}),Hd=["id","disabled","aria-disabled","checked","data-testid","aria-describedby"],Bd=["id","for","data-fr-checked-label","data-fr-unchecked-label"],Vd=["id"],Rd=defineComponent({__name:"DsfrToggleSwitch",props:{modelValue:{type:Boolean},inputId:{default:()=>j$1("toggle")},hint:{default:""},label:{default:""},disabled:{type:Boolean},labelLeft:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},activeText:{default:"Activé"},inactiveText:{default:"Désactivé"},noText:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(r){const e=r,t=computed(()=>`${e.inputId}-hint-text`);return(ke,Oe)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-toggle",{"fr-toggle--label-left":ke.labelLeft,"fr-toggle--border-bottom":ke.borderBottom}])},[createBaseVNode("input",{id:ke.inputId,disabled:ke.disabled,"aria-disabled":ke.disabled,type:"checkbox",checked:ke.modelValue,"data-testid":ke.inputId,class:"fr-toggle__input","aria-describedby":t.value,onInput:Oe[0]||(Oe[0]=Ge=>ke.$emit("update:modelValue",Ge.target.checked))},null,40,Hd),createBaseVNode("label",{id:t.value,class:"fr-toggle__label",for:ke.inputId,"data-fr-checked-label":ke.noText?void 0:ke.activeText,"data-fr-unchecked-label":ke.noText?void 0:ke.inactiveText,style:{"--toggle-status-width":"3.55208125rem"}},toDisplayString(ke.label),9,Bd),ke.hint?(openBlock(),createElementBlock("p",{key:0,id:`${ke.inputId}-hint-text`,class:"fr-hint-text"},toDisplayString(ke.hint),9,Vd)):createCommentVNode("",!0)],2))}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(r){return typeof r=="object"||"displayName"in r||"props"in r||"__vccOpts"in r}function isESModule(r){return r.__esModule||r[Symbol.toStringTag]==="Module"||r.default&&isRouteComponent(r.default)}const assign=Object.assign;function applyToParams(r,e){const t={};for(const ke in e){const Oe=e[ke];t[ke]=isArray(Oe)?Oe.map(r):r(Oe)}return t}const noop$1=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(r){return encodeURI(""+r).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(r){return commonEncode(r).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(r){return commonEncode(r).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(r){return encodeQueryValue(r).replace(EQUAL_RE,"%3D")}function encodePath(r){return commonEncode(r).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(r){return r==null?"":encodePath(r).replace(SLASH_RE,"%2F")}function decode$2(r){try{return decodeURIComponent(""+r)}catch{}return""+r}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=r=>r.replace(TRAILING_SLASH_RE,"");function parseURL(r,e,t="/"){let ke,Oe={},Ge="",Be="";const je=e.indexOf("#");let Ve=e.indexOf("?");return je<Ve&&je>=0&&(Ve=-1),Ve>-1&&(ke=e.slice(0,Ve),Ge=e.slice(Ve+1,je>-1?je:e.length),Oe=r(Ge)),je>-1&&(ke=ke||e.slice(0,je),Be=e.slice(je,e.length)),ke=resolveRelativePath(ke??e,t),{fullPath:ke+(Ge&&"?")+Ge+Be,path:ke,query:Oe,hash:decode$2(Be)}}function stringifyURL(r,e){const t=e.query?r(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function stripBase(r,e){return!e||!r.toLowerCase().startsWith(e.toLowerCase())?r:r.slice(e.length)||"/"}function isSameRouteLocation(r,e,t){const ke=e.matched.length-1,Oe=t.matched.length-1;return ke>-1&&ke===Oe&&isSameRouteRecord(e.matched[ke],t.matched[Oe])&&isSameRouteLocationParams(e.params,t.params)&&r(e.query)===r(t.query)&&e.hash===t.hash}function isSameRouteRecord(r,e){return(r.aliasOf||r)===(e.aliasOf||e)}function isSameRouteLocationParams(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(const t in r)if(!isSameRouteLocationParamsValue(r[t],e[t]))return!1;return!0}function isSameRouteLocationParamsValue(r,e){return isArray(r)?isEquivalentArray(r,e):isArray(e)?isEquivalentArray(e,r):r===e}function isEquivalentArray(r,e){return isArray(e)?r.length===e.length&&r.every((t,ke)=>t===e[ke]):r.length===1&&r[0]===e}function resolveRelativePath(r,e){if(r.startsWith("/"))return r;if(!r)return e;const t=e.split("/"),ke=r.split("/"),Oe=ke[ke.length-1];(Oe===".."||Oe===".")&&ke.push("");let Ge=t.length-1,Be,je;for(Be=0;Be<ke.length;Be++)if(je=ke[Be],je!==".")if(je==="..")Ge>1&&Ge--;else break;return t.slice(0,Ge).join("/")+"/"+ke.slice(Be).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(r){r.pop="pop",r.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(r){r.back="back",r.forward="forward",r.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(r){if(!r)if(isBrowser){const e=document.querySelector("base");r=e&&e.getAttribute("href")||"/",r=r.replace(/^\w+:\/\/[^\/]+/,"")}else r="/";return r[0]!=="/"&&r[0]!=="#"&&(r="/"+r),removeTrailingSlash(r)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(r,e){return r.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(r,e){const t=document.documentElement.getBoundingClientRect(),ke=r.getBoundingClientRect();return{behavior:e.behavior,left:ke.left-t.left-(e.left||0),top:ke.top-t.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(r){let e;if("el"in r){const t=r.el,ke=typeof t=="string"&&t.startsWith("#"),Oe=typeof t=="string"?ke?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!Oe)return;e=getElementPosition(Oe,r)}else e=r;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(r,e){return(history.state?history.state.position-e:-1)+r}const scrollPositions=new Map;function saveScrollPosition(r,e){scrollPositions.set(r,e)}function getSavedScrollPosition(r){const e=scrollPositions.get(r);return scrollPositions.delete(r),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(r,e){const{pathname:t,search:ke,hash:Oe}=e,Ge=r.indexOf("#");if(Ge>-1){let je=Oe.includes(r.slice(Ge))?r.slice(Ge).length:1,Ve=Oe.slice(je);return Ve[0]!=="/"&&(Ve="/"+Ve),stripBase(Ve,"")}return stripBase(t,r)+ke+Oe}function useHistoryListeners(r,e,t,ke){let Oe=[],Ge=[],Be=null;const je=({state:tn})=>{const an=createCurrentLocation(r,location),cn=t.value,dn=e.value;let hn=0;if(tn){if(t.value=an,e.value=tn,Be&&Be===cn){Be=null;return}hn=dn?tn.position-dn.position:0}else ke(an);Oe.forEach(fn=>{fn(t.value,cn,{delta:hn,type:NavigationType.pop,direction:hn?hn>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function Ve(){Be=t.value}function Ze(tn){Oe.push(tn);const an=()=>{const cn=Oe.indexOf(tn);cn>-1&&Oe.splice(cn,1)};return Ge.push(an),an}function Qe(){const{history:tn}=window;tn.state&&tn.replaceState(assign({},tn.state,{scroll:computeScrollPosition()}),"")}function en(){for(const tn of Ge)tn();Ge=[],window.removeEventListener("popstate",je),window.removeEventListener("beforeunload",Qe)}return window.addEventListener("popstate",je),window.addEventListener("beforeunload",Qe,{passive:!0}),{pauseListeners:Ve,listen:Ze,destroy:en}}function buildState(r,e,t,ke=!1,Oe=!1){return{back:r,current:e,forward:t,replaced:ke,position:window.history.length,scroll:Oe?computeScrollPosition():null}}function useHistoryStateNavigation(r){const{history:e,location:t}=window,ke={value:createCurrentLocation(r,t)},Oe={value:e.state};Oe.value||Ge(ke.value,{back:null,current:ke.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function Ge(Ve,Ze,Qe){const en=r.indexOf("#"),tn=en>-1?(t.host&&document.querySelector("base")?r:r.slice(en))+Ve:createBaseLocation()+r+Ve;try{e[Qe?"replaceState":"pushState"](Ze,"",tn),Oe.value=Ze}catch(an){console.error(an),t[Qe?"replace":"assign"](tn)}}function Be(Ve,Ze){const Qe=assign({},e.state,buildState(Oe.value.back,Ve,Oe.value.forward,!0),Ze,{position:Oe.value.position});Ge(Ve,Qe,!0),ke.value=Ve}function je(Ve,Ze){const Qe=assign({},Oe.value,e.state,{forward:Ve,scroll:computeScrollPosition()});Ge(Qe.current,Qe,!0);const en=assign({},buildState(ke.value,Ve,null),{position:Qe.position+1},Ze);Ge(Ve,en,!1),ke.value=Ve}return{location:ke,state:Oe,push:je,replace:Be}}function createWebHistory(r){r=normalizeBase(r);const e=useHistoryStateNavigation(r),t=useHistoryListeners(r,e.state,e.location,e.replace);function ke(Ge,Be=!0){Be||t.pauseListeners(),history.go(Ge)}const Oe=assign({location:"",base:r,go:ke,createHref:createHref.bind(null,r)},e,t);return Object.defineProperty(Oe,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(Oe,"state",{enumerable:!0,get:()=>e.state.value}),Oe}function isRouteLocation(r){return typeof r=="string"||r&&typeof r=="object"}function isRouteName(r){return typeof r=="string"||typeof r=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(r){r[r.aborted=4]="aborted",r[r.cancelled=8]="cancelled",r[r.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(r,e){return assign(new Error,{type:r,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(r,e){return r instanceof Error&&NavigationFailureSymbol in r&&(e==null||!!(r.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(r,e){const t=assign({},BASE_PATH_PARSER_OPTIONS,e),ke=[];let Oe=t.start?"^":"";const Ge=[];for(const Ze of r){const Qe=Ze.length?[]:[90];t.strict&&!Ze.length&&(Oe+="/");for(let en=0;en<Ze.length;en++){const tn=Ze[en];let an=40+(t.sensitive?.25:0);if(tn.type===0)en||(Oe+="/"),Oe+=tn.value.replace(REGEX_CHARS_RE,"\\$&"),an+=40;else if(tn.type===1){const{value:cn,repeatable:dn,optional:hn,regexp:fn}=tn;Ge.push({name:cn,repeatable:dn,optional:hn});const pn=fn||BASE_PARAM_PATTERN;if(pn!==BASE_PARAM_PATTERN){an+=10;try{new RegExp(`(${pn})`)}catch(yn){throw new Error(`Invalid custom RegExp for param "${cn}" (${pn}): `+yn.message)}}let mn=dn?`((?:${pn})(?:/(?:${pn}))*)`:`(${pn})`;en||(mn=hn&&Ze.length<2?`(?:/${mn})`:"/"+mn),hn&&(mn+="?"),Oe+=mn,an+=20,hn&&(an+=-8),dn&&(an+=-20),pn===".*"&&(an+=-50)}Qe.push(an)}ke.push(Qe)}if(t.strict&&t.end){const Ze=ke.length-1;ke[Ze][ke[Ze].length-1]+=.7000000000000001}t.strict||(Oe+="/?"),t.end?Oe+="$":t.strict&&!Oe.endsWith("/")&&(Oe+="(?:/|$)");const Be=new RegExp(Oe,t.sensitive?"":"i");function je(Ze){const Qe=Ze.match(Be),en={};if(!Qe)return null;for(let tn=1;tn<Qe.length;tn++){const an=Qe[tn]||"",cn=Ge[tn-1];en[cn.name]=an&&cn.repeatable?an.split("/"):an}return en}function Ve(Ze){let Qe="",en=!1;for(const tn of r){(!en||!Qe.endsWith("/"))&&(Qe+="/"),en=!1;for(const an of tn)if(an.type===0)Qe+=an.value;else if(an.type===1){const{value:cn,repeatable:dn,optional:hn}=an,fn=cn in Ze?Ze[cn]:"";if(isArray(fn)&&!dn)throw new Error(`Provided param "${cn}" is an array but it is not repeatable (* or + modifiers)`);const pn=isArray(fn)?fn.join("/"):fn;if(!pn)if(hn)tn.length<2&&(Qe.endsWith("/")?Qe=Qe.slice(0,-1):en=!0);else throw new Error(`Missing required param "${cn}"`);Qe+=pn}}return Qe||"/"}return{re:Be,score:ke,keys:Ge,parse:je,stringify:Ve}}function compareScoreArray(r,e){let t=0;for(;t<r.length&&t<e.length;){const ke=e[t]-r[t];if(ke)return ke;t++}return r.length<e.length?r.length===1&&r[0]===80?-1:1:r.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(r,e){let t=0;const ke=r.score,Oe=e.score;for(;t<ke.length&&t<Oe.length;){const Ge=compareScoreArray(ke[t],Oe[t]);if(Ge)return Ge;t++}if(Math.abs(Oe.length-ke.length)===1){if(isLastScoreNegative(ke))return 1;if(isLastScoreNegative(Oe))return-1}return Oe.length-ke.length}function isLastScoreNegative(r){const e=r[r.length-1];return r.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(r){if(!r)return[[]];if(r==="/")return[[ROOT_TOKEN]];if(!r.startsWith("/"))throw new Error(`Invalid path "${r}"`);function e(an){throw new Error(`ERR (${t})/"${Ze}": ${an}`)}let t=0,ke=t;const Oe=[];let Ge;function Be(){Ge&&Oe.push(Ge),Ge=[]}let je=0,Ve,Ze="",Qe="";function en(){Ze&&(t===0?Ge.push({type:0,value:Ze}):t===1||t===2||t===3?(Ge.length>1&&(Ve==="*"||Ve==="+")&&e(`A repeatable param (${Ze}) must be alone in its segment. eg: '/:ids+.`),Ge.push({type:1,value:Ze,regexp:Qe,repeatable:Ve==="*"||Ve==="+",optional:Ve==="*"||Ve==="?"})):e("Invalid state to consume buffer"),Ze="")}function tn(){Ze+=Ve}for(;je<r.length;){if(Ve=r[je++],Ve==="\\"&&t!==2){ke=t,t=4;continue}switch(t){case 0:Ve==="/"?(Ze&&en(),Be()):Ve===":"?(en(),t=1):tn();break;case 4:tn(),t=ke;break;case 1:Ve==="("?t=2:VALID_PARAM_RE.test(Ve)?tn():(en(),t=0,Ve!=="*"&&Ve!=="?"&&Ve!=="+"&&je--);break;case 2:Ve===")"?Qe[Qe.length-1]=="\\"?Qe=Qe.slice(0,-1)+Ve:t=3:Qe+=Ve;break;case 3:en(),t=0,Ve!=="*"&&Ve!=="?"&&Ve!=="+"&&je--,Qe="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${Ze}"`),en(),Be(),Oe}function createRouteRecordMatcher(r,e,t){const ke=tokensToParser(tokenizePath(r.path),t),Oe=assign(ke,{record:r,parent:e,children:[],alias:[]});return e&&!Oe.record.aliasOf==!e.record.aliasOf&&e.children.push(Oe),Oe}function createRouterMatcher(r,e){const t=[],ke=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function Oe(en){return ke.get(en)}function Ge(en,tn,an){const cn=!an,dn=normalizeRouteRecord(en);dn.aliasOf=an&&an.record;const hn=mergeOptions(e,en),fn=[dn];if("alias"in en){const yn=typeof en.alias=="string"?[en.alias]:en.alias;for(const Cn of yn)fn.push(normalizeRouteRecord(assign({},dn,{components:an?an.record.components:dn.components,path:Cn,aliasOf:an?an.record:dn})))}let pn,mn;for(const yn of fn){const{path:Cn}=yn;if(tn&&Cn[0]!=="/"){const wn=tn.record.path,bn=wn[wn.length-1]==="/"?"":"/";yn.path=tn.record.path+(Cn&&bn+Cn)}if(pn=createRouteRecordMatcher(yn,tn,hn),an?an.alias.push(pn):(mn=mn||pn,mn!==pn&&mn.alias.push(pn),cn&&en.name&&!isAliasRecord(pn)&&Be(en.name)),isMatchable(pn)&&Ve(pn),dn.children){const wn=dn.children;for(let bn=0;bn<wn.length;bn++)Ge(wn[bn],pn,an&&an.children[bn])}an=an||pn}return mn?()=>{Be(mn)}:noop$1}function Be(en){if(isRouteName(en)){const tn=ke.get(en);tn&&(ke.delete(en),t.splice(t.indexOf(tn),1),tn.children.forEach(Be),tn.alias.forEach(Be))}else{const tn=t.indexOf(en);tn>-1&&(t.splice(tn,1),en.record.name&&ke.delete(en.record.name),en.children.forEach(Be),en.alias.forEach(Be))}}function je(){return t}function Ve(en){const tn=findInsertionIndex(en,t);t.splice(tn,0,en),en.record.name&&!isAliasRecord(en)&&ke.set(en.record.name,en)}function Ze(en,tn){let an,cn={},dn,hn;if("name"in en&&en.name){if(an=ke.get(en.name),!an)throw createRouterError(1,{location:en});hn=an.record.name,cn=assign(paramsFromLocation(tn.params,an.keys.filter(mn=>!mn.optional).concat(an.parent?an.parent.keys.filter(mn=>mn.optional):[]).map(mn=>mn.name)),en.params&&paramsFromLocation(en.params,an.keys.map(mn=>mn.name))),dn=an.stringify(cn)}else if(en.path!=null)dn=en.path,an=t.find(mn=>mn.re.test(dn)),an&&(cn=an.parse(dn),hn=an.record.name);else{if(an=tn.name?ke.get(tn.name):t.find(mn=>mn.re.test(tn.path)),!an)throw createRouterError(1,{location:en,currentLocation:tn});hn=an.record.name,cn=assign({},tn.params,en.params),dn=an.stringify(cn)}const fn=[];let pn=an;for(;pn;)fn.unshift(pn.record),pn=pn.parent;return{name:hn,path:dn,params:cn,matched:fn,meta:mergeMetaFields(fn)}}r.forEach(en=>Ge(en));function Qe(){t.length=0,ke.clear()}return{addRoute:Ge,resolve:Ze,removeRoute:Be,clearRoutes:Qe,getRoutes:je,getRecordMatcher:Oe}}function paramsFromLocation(r,e){const t={};for(const ke of e)ke in r&&(t[ke]=r[ke]);return t}function normalizeRouteRecord(r){const e={path:r.path,redirect:r.redirect,name:r.name,meta:r.meta||{},aliasOf:r.aliasOf,beforeEnter:r.beforeEnter,props:normalizeRecordProps(r),children:r.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in r?r.components||null:r.component&&{default:r.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function normalizeRecordProps(r){const e={},t=r.props||!1;if("component"in r)e.default=t;else for(const ke in r.components)e[ke]=typeof t=="object"?t[ke]:t;return e}function isAliasRecord(r){for(;r;){if(r.record.aliasOf)return!0;r=r.parent}return!1}function mergeMetaFields(r){return r.reduce((e,t)=>assign(e,t.meta),{})}function mergeOptions(r,e){const t={};for(const ke in r)t[ke]=ke in e?e[ke]:r[ke];return t}function findInsertionIndex(r,e){let t=0,ke=e.length;for(;t!==ke;){const Ge=t+ke>>1;comparePathParserScore(r,e[Ge])<0?ke=Ge:t=Ge+1}const Oe=getInsertionAncestor(r);return Oe&&(ke=e.lastIndexOf(Oe,ke-1)),ke}function getInsertionAncestor(r){let e=r;for(;e=e.parent;)if(isMatchable(e)&&comparePathParserScore(r,e)===0)return e}function isMatchable({record:r}){return!!(r.name||r.components&&Object.keys(r.components).length||r.redirect)}function parseQuery(r){const e={};if(r===""||r==="?")return e;const ke=(r[0]==="?"?r.slice(1):r).split("&");for(let Oe=0;Oe<ke.length;++Oe){const Ge=ke[Oe].replace(PLUS_RE," "),Be=Ge.indexOf("="),je=decode$2(Be<0?Ge:Ge.slice(0,Be)),Ve=Be<0?null:decode$2(Ge.slice(Be+1));if(je in e){let Ze=e[je];isArray(Ze)||(Ze=e[je]=[Ze]),Ze.push(Ve)}else e[je]=Ve}return e}function stringifyQuery(r){let e="";for(let t in r){const ke=r[t];if(t=encodeQueryKey(t),ke==null){ke!==void 0&&(e+=(e.length?"&":"")+t);continue}(isArray(ke)?ke.map(Ge=>Ge&&encodeQueryValue(Ge)):[ke&&encodeQueryValue(ke)]).forEach(Ge=>{Ge!==void 0&&(e+=(e.length?"&":"")+t,Ge!=null&&(e+="="+Ge))})}return e}function normalizeQuery(r){const e={};for(const t in r){const ke=r[t];ke!==void 0&&(e[t]=isArray(ke)?ke.map(Oe=>Oe==null?null:""+Oe):ke==null?ke:""+ke)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let r=[];function e(ke){return r.push(ke),()=>{const Oe=r.indexOf(ke);Oe>-1&&r.splice(Oe,1)}}function t(){r=[]}return{add:e,list:()=>r.slice(),reset:t}}function guardToPromiseFn(r,e,t,ke,Oe,Ge=Be=>Be()){const Be=ke&&(ke.enterCallbacks[Oe]=ke.enterCallbacks[Oe]||[]);return()=>new Promise((je,Ve)=>{const Ze=tn=>{tn===!1?Ve(createRouterError(4,{from:t,to:e})):tn instanceof Error?Ve(tn):isRouteLocation(tn)?Ve(createRouterError(2,{from:e,to:tn})):(Be&&ke.enterCallbacks[Oe]===Be&&typeof tn=="function"&&Be.push(tn),je())},Qe=Ge(()=>r.call(ke&&ke.instances[Oe],e,t,Ze));let en=Promise.resolve(Qe);r.length<3&&(en=en.then(Ze)),en.catch(tn=>Ve(tn))})}function extractComponentsGuards(r,e,t,ke,Oe=Ge=>Ge()){const Ge=[];for(const Be of r)for(const je in Be.components){let Ve=Be.components[je];if(!(e!=="beforeRouteEnter"&&!Be.instances[je]))if(isRouteComponent(Ve)){const Qe=(Ve.__vccOpts||Ve)[e];Qe&&Ge.push(guardToPromiseFn(Qe,t,ke,Be,je,Oe))}else{let Ze=Ve();Ge.push(()=>Ze.then(Qe=>{if(!Qe)throw new Error(`Couldn't resolve component "${je}" at "${Be.path}"`);const en=isESModule(Qe)?Qe.default:Qe;Be.mods[je]=Qe,Be.components[je]=en;const an=(en.__vccOpts||en)[e];return an&&guardToPromiseFn(an,t,ke,Be,je,Oe)()}))}}return Ge}function useLink(r){const e=inject(routerKey),t=inject(routeLocationKey),ke=computed(()=>{const Ve=unref(r.to);return e.resolve(Ve)}),Oe=computed(()=>{const{matched:Ve}=ke.value,{length:Ze}=Ve,Qe=Ve[Ze-1],en=t.matched;if(!Qe||!en.length)return-1;const tn=en.findIndex(isSameRouteRecord.bind(null,Qe));if(tn>-1)return tn;const an=getOriginalPath(Ve[Ze-2]);return Ze>1&&getOriginalPath(Qe)===an&&en[en.length-1].path!==an?en.findIndex(isSameRouteRecord.bind(null,Ve[Ze-2])):tn}),Ge=computed(()=>Oe.value>-1&&includesParams(t.params,ke.value.params)),Be=computed(()=>Oe.value>-1&&Oe.value===t.matched.length-1&&isSameRouteLocationParams(t.params,ke.value.params));function je(Ve={}){if(guardEvent(Ve)){const Ze=e[unref(r.replace)?"replace":"push"](unref(r.to)).catch(noop$1);return r.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>Ze),Ze}return Promise.resolve()}return{route:ke,href:computed(()=>ke.value.href),isActive:Ge,isExactActive:Be,navigate:je}}function preferSingleVNode(r){return r.length===1?r[0]:r}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(r,{slots:e}){const t=reactive(useLink(r)),{options:ke}=inject(routerKey),Oe=computed(()=>({[getLinkClass(r.activeClass,ke.linkActiveClass,"router-link-active")]:t.isActive,[getLinkClass(r.exactActiveClass,ke.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const Ge=e.default&&preferSingleVNode(e.default(t));return r.custom?Ge:h$2("a",{"aria-current":t.isExactActive?r.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:Oe.value},Ge)}}}),RouterLink=RouterLinkImpl;function guardEvent(r){if(!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)&&!r.defaultPrevented&&!(r.button!==void 0&&r.button!==0)){if(r.currentTarget&&r.currentTarget.getAttribute){const e=r.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return r.preventDefault&&r.preventDefault(),!0}}function includesParams(r,e){for(const t in e){const ke=e[t],Oe=r[t];if(typeof ke=="string"){if(ke!==Oe)return!1}else if(!isArray(Oe)||Oe.length!==ke.length||ke.some((Ge,Be)=>Ge!==Oe[Be]))return!1}return!0}function getOriginalPath(r){return r?r.aliasOf?r.aliasOf.path:r.path:""}const getLinkClass=(r,e,t)=>r??e??t,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(r,{attrs:e,slots:t}){const ke=inject(routerViewLocationKey),Oe=computed(()=>r.route||ke.value),Ge=inject(viewDepthKey,0),Be=computed(()=>{let Ze=unref(Ge);const{matched:Qe}=Oe.value;let en;for(;(en=Qe[Ze])&&!en.components;)Ze++;return Ze}),je=computed(()=>Oe.value.matched[Be.value]);provide(viewDepthKey,computed(()=>Be.value+1)),provide(matchedRouteKey,je),provide(routerViewLocationKey,Oe);const Ve=ref();return watch(()=>[Ve.value,je.value,r.name],([Ze,Qe,en],[tn,an,cn])=>{Qe&&(Qe.instances[en]=Ze,an&&an!==Qe&&Ze&&Ze===tn&&(Qe.leaveGuards.size||(Qe.leaveGuards=an.leaveGuards),Qe.updateGuards.size||(Qe.updateGuards=an.updateGuards))),Ze&&Qe&&(!an||!isSameRouteRecord(Qe,an)||!tn)&&(Qe.enterCallbacks[en]||[]).forEach(dn=>dn(Ze))},{flush:"post"}),()=>{const Ze=Oe.value,Qe=r.name,en=je.value,tn=en&&en.components[Qe];if(!tn)return normalizeSlot(t.default,{Component:tn,route:Ze});const an=en.props[Qe],cn=an?an===!0?Ze.params:typeof an=="function"?an(Ze):an:null,hn=h$2(tn,assign({},cn,e,{onVnodeUnmounted:fn=>{fn.component.isUnmounted&&(en.instances[Qe]=null)},ref:Ve}));return normalizeSlot(t.default,{Component:hn,route:Ze})||hn}}});function normalizeSlot(r,e){if(!r)return null;const t=r(e);return t.length===1?t[0]:t}const RouterView=RouterViewImpl;function createRouter(r){const e=createRouterMatcher(r.routes,r),t=r.parseQuery||parseQuery,ke=r.stringifyQuery||stringifyQuery,Oe=r.history,Ge=useCallbacks(),Be=useCallbacks(),je=useCallbacks(),Ve=shallowRef(START_LOCATION_NORMALIZED);let Ze=START_LOCATION_NORMALIZED;isBrowser&&r.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const Qe=applyToParams.bind(null,Kn=>""+Kn),en=applyToParams.bind(null,encodeParam),tn=applyToParams.bind(null,decode$2);function an(Kn,Ii){let Pi,Mi;return isRouteName(Kn)?(Pi=e.getRecordMatcher(Kn),Mi=Ii):Mi=Kn,e.addRoute(Mi,Pi)}function cn(Kn){const Ii=e.getRecordMatcher(Kn);Ii&&e.removeRoute(Ii)}function dn(){return e.getRoutes().map(Kn=>Kn.record)}function hn(Kn){return!!e.getRecordMatcher(Kn)}function fn(Kn,Ii){if(Ii=assign({},Ii||Ve.value),typeof Kn=="string"){const Qn=parseURL(t,Kn,Ii.path),Hn=e.resolve({path:Qn.path},Ii),Fn=Oe.createHref(Qn.fullPath);return assign(Qn,Hn,{params:tn(Hn.params),hash:decode$2(Qn.hash),redirectedFrom:void 0,href:Fn})}let Pi;if(Kn.path!=null)Pi=assign({},Kn,{path:parseURL(t,Kn.path,Ii.path).path});else{const Qn=assign({},Kn.params);for(const Hn in Qn)Qn[Hn]==null&&delete Qn[Hn];Pi=assign({},Kn,{params:en(Qn)}),Ii.params=en(Ii.params)}const Mi=e.resolve(Pi,Ii),tr=Kn.hash||"";Mi.params=Qe(tn(Mi.params));const Br=stringifyURL(ke,assign({},Kn,{hash:encodeHash(tr),path:Mi.path})),Un=Oe.createHref(Br);return assign({fullPath:Br,hash:tr,query:ke===stringifyQuery?normalizeQuery(Kn.query):Kn.query||{}},Mi,{redirectedFrom:void 0,href:Un})}function pn(Kn){return typeof Kn=="string"?parseURL(t,Kn,Ve.value.path):assign({},Kn)}function mn(Kn,Ii){if(Ze!==Kn)return createRouterError(8,{from:Ii,to:Kn})}function yn(Kn){return bn(Kn)}function Cn(Kn){return yn(assign(pn(Kn),{replace:!0}))}function wn(Kn){const Ii=Kn.matched[Kn.matched.length-1];if(Ii&&Ii.redirect){const{redirect:Pi}=Ii;let Mi=typeof Pi=="function"?Pi(Kn):Pi;return typeof Mi=="string"&&(Mi=Mi.includes("?")||Mi.includes("#")?Mi=pn(Mi):{path:Mi},Mi.params={}),assign({query:Kn.query,hash:Kn.hash,params:Mi.path!=null?{}:Kn.params},Mi)}}function bn(Kn,Ii){const Pi=Ze=fn(Kn),Mi=Ve.value,tr=Kn.state,Br=Kn.force,Un=Kn.replace===!0,Qn=wn(Pi);if(Qn)return bn(assign(pn(Qn),{state:typeof Qn=="object"?assign({},tr,Qn.state):tr,force:Br,replace:Un}),Ii||Pi);const Hn=Pi;Hn.redirectedFrom=Ii;let Fn;return!Br&&isSameRouteLocation(ke,Mi,Pi)&&(Fn=createRouterError(16,{to:Hn,from:Mi}),Ki(Mi,Mi,!0,!1)),(Fn?Promise.resolve(Fn):Tn(Hn,Mi)).catch(Hi=>isNavigationFailure(Hi)?isNavigationFailure(Hi,2)?Hi:Jn(Hi):Dn(Hi,Hn,Mi)).then(Hi=>{if(Hi){if(isNavigationFailure(Hi,2))return bn(assign({replace:Un},pn(Hi.to),{state:typeof Hi.to=="object"?assign({},tr,Hi.to.state):tr,force:Br}),Ii||Hn)}else Hi=An(Hn,Mi,!0,Un,tr);return En(Hn,Mi,Hi),Hi})}function Sn(Kn,Ii){const Pi=mn(Kn,Ii);return Pi?Promise.reject(Pi):Promise.resolve()}function Mn(Kn){const Ii=$n.values().next().value;return Ii&&typeof Ii.runWithContext=="function"?Ii.runWithContext(Kn):Kn()}function Tn(Kn,Ii){let Pi;const[Mi,tr,Br]=extractChangingRecords(Kn,Ii);Pi=extractComponentsGuards(Mi.reverse(),"beforeRouteLeave",Kn,Ii);for(const Qn of Mi)Qn.leaveGuards.forEach(Hn=>{Pi.push(guardToPromiseFn(Hn,Kn,Ii))});const Un=Sn.bind(null,Kn,Ii);return Pi.push(Un),Ti(Pi).then(()=>{Pi=[];for(const Qn of Ge.list())Pi.push(guardToPromiseFn(Qn,Kn,Ii));return Pi.push(Un),Ti(Pi)}).then(()=>{Pi=extractComponentsGuards(tr,"beforeRouteUpdate",Kn,Ii);for(const Qn of tr)Qn.updateGuards.forEach(Hn=>{Pi.push(guardToPromiseFn(Hn,Kn,Ii))});return Pi.push(Un),Ti(Pi)}).then(()=>{Pi=[];for(const Qn of Br)if(Qn.beforeEnter)if(isArray(Qn.beforeEnter))for(const Hn of Qn.beforeEnter)Pi.push(guardToPromiseFn(Hn,Kn,Ii));else Pi.push(guardToPromiseFn(Qn.beforeEnter,Kn,Ii));return Pi.push(Un),Ti(Pi)}).then(()=>(Kn.matched.forEach(Qn=>Qn.enterCallbacks={}),Pi=extractComponentsGuards(Br,"beforeRouteEnter",Kn,Ii,Mn),Pi.push(Un),Ti(Pi))).then(()=>{Pi=[];for(const Qn of Be.list())Pi.push(guardToPromiseFn(Qn,Kn,Ii));return Pi.push(Un),Ti(Pi)}).catch(Qn=>isNavigationFailure(Qn,8)?Qn:Promise.reject(Qn))}function En(Kn,Ii,Pi){je.list().forEach(Mi=>Mn(()=>Mi(Kn,Ii,Pi)))}function An(Kn,Ii,Pi,Mi,tr){const Br=mn(Kn,Ii);if(Br)return Br;const Un=Ii===START_LOCATION_NORMALIZED,Qn=isBrowser?history.state:{};Pi&&(Mi||Un?Oe.replace(Kn.fullPath,assign({scroll:Un&&Qn&&Qn.scroll},tr)):Oe.push(Kn.fullPath,tr)),Ve.value=Kn,Ki(Kn,Ii,Pi,Un),Jn()}let Ln;function Rn(){Ln||(Ln=Oe.listen((Kn,Ii,Pi)=>{if(!Ai.listening)return;const Mi=fn(Kn),tr=wn(Mi);if(tr){bn(assign(tr,{replace:!0,force:!0}),Mi).catch(noop$1);return}Ze=Mi;const Br=Ve.value;isBrowser&&saveScrollPosition(getScrollKey(Br.fullPath,Pi.delta),computeScrollPosition()),Tn(Mi,Br).catch(Un=>isNavigationFailure(Un,12)?Un:isNavigationFailure(Un,2)?(bn(assign(pn(Un.to),{force:!0}),Mi).then(Qn=>{isNavigationFailure(Qn,20)&&!Pi.delta&&Pi.type===NavigationType.pop&&Oe.go(-1,!1)}).catch(noop$1),Promise.reject()):(Pi.delta&&Oe.go(-Pi.delta,!1),Dn(Un,Mi,Br))).then(Un=>{Un=Un||An(Mi,Br,!1),Un&&(Pi.delta&&!isNavigationFailure(Un,8)?Oe.go(-Pi.delta,!1):Pi.type===NavigationType.pop&&isNavigationFailure(Un,20)&&Oe.go(-1,!1)),En(Mi,Br,Un)}).catch(noop$1)}))}let Gn=useCallbacks(),Nn=useCallbacks(),jn;function Dn(Kn,Ii,Pi){Jn(Kn);const Mi=Nn.list();return Mi.length?Mi.forEach(tr=>tr(Kn,Ii,Pi)):console.error(Kn),Promise.reject(Kn)}function Ci(){return jn&&Ve.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((Kn,Ii)=>{Gn.add([Kn,Ii])})}function Jn(Kn){return jn||(jn=!Kn,Rn(),Gn.list().forEach(([Ii,Pi])=>Kn?Pi(Kn):Ii()),Gn.reset()),Kn}function Ki(Kn,Ii,Pi,Mi){const{scrollBehavior:tr}=r;if(!isBrowser||!tr)return Promise.resolve();const Br=!Pi&&getSavedScrollPosition(getScrollKey(Kn.fullPath,0))||(Mi||!Pi)&&history.state&&history.state.scroll||null;return nextTick().then(()=>tr(Kn,Ii,Br)).then(Un=>Un&&scrollToPosition(Un)).catch(Un=>Dn(Un,Kn,Ii))}const xn=Kn=>Oe.go(Kn);let qn;const $n=new Set,Ai={currentRoute:Ve,listening:!0,addRoute:an,removeRoute:cn,clearRoutes:e.clearRoutes,hasRoute:hn,getRoutes:dn,resolve:fn,options:r,push:yn,replace:Cn,go:xn,back:()=>xn(-1),forward:()=>xn(1),beforeEach:Ge.add,beforeResolve:Be.add,afterEach:je.add,onError:Nn.add,isReady:Ci,install(Kn){const Ii=this;Kn.component("RouterLink",RouterLink),Kn.component("RouterView",RouterView),Kn.config.globalProperties.$router=Ii,Object.defineProperty(Kn.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(Ve)}),isBrowser&&!qn&&Ve.value===START_LOCATION_NORMALIZED&&(qn=!0,yn(Oe.location).catch(tr=>{}));const Pi={};for(const tr in START_LOCATION_NORMALIZED)Object.defineProperty(Pi,tr,{get:()=>Ve.value[tr],enumerable:!0});Kn.provide(routerKey,Ii),Kn.provide(routeLocationKey,shallowReactive(Pi)),Kn.provide(routerViewLocationKey,Ve);const Mi=Kn.unmount;$n.add(Kn),Kn.unmount=function(){$n.delete(Kn),$n.size<1&&(Ze=START_LOCATION_NORMALIZED,Ln&&Ln(),Ln=null,Ve.value=START_LOCATION_NORMALIZED,qn=!1,jn=!1),Mi()}}};function Ti(Kn){return Kn.reduce((Ii,Pi)=>Ii.then(()=>Mn(Pi)),Promise.resolve())}return Ai}function extractChangingRecords(r,e){const t=[],ke=[],Oe=[],Ge=Math.max(e.matched.length,r.matched.length);for(let Be=0;Be<Ge;Be++){const je=e.matched[Be];je&&(r.matched.find(Ze=>isSameRouteRecord(Ze,je))?ke.push(je):t.push(je));const Ve=r.matched[Be];Ve&&(e.matched.find(Ze=>isSameRouteRecord(Ze,Ve))||Oe.push(Ve))}return[t,ke,Oe]}function useRouter(){return inject(routerKey)}function useRoute(r){return inject(routeLocationKey)}function tryOnScopeDispose(r){return getCurrentScope()?(onScopeDispose(r),!0):!1}function toValue(r){return typeof r=="function"?r():unref(r)}const isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const toString$4=Object.prototype.toString,isObject=r=>toString$4.call(r)==="[object Object]",noop=()=>{};function createFilterWrapper(r,e){function t(...ke){return new Promise((Oe,Ge)=>{Promise.resolve(r(()=>e.apply(this,ke),{fn:e,thisArg:this,args:ke})).then(Oe).catch(Ge)})}return t}const bypassFilter=r=>r();function pausableFilter(r=bypassFilter){const e=ref(!0);function t(){e.value=!1}function ke(){e.value=!0}const Oe=(...Ge)=>{e.value&&r(...Ge)};return{isActive:readonly(e),pause:t,resume:ke,eventFilter:Oe}}function createSingletonPromise(r){let e;function t(){return e||(e=r()),e}return t.reset=async()=>{const ke=e;e=void 0,ke&&await ke},t}function getLifeCycleTarget(r){return getCurrentInstance()}function watchWithFilter(r,e,t={}){const{eventFilter:ke=bypassFilter,...Oe}=t;return watch(r,createFilterWrapper(ke,e),Oe)}function watchPausable(r,e,t={}){const{eventFilter:ke,...Oe}=t,{eventFilter:Ge,pause:Be,resume:je,isActive:Ve}=pausableFilter(ke);return{stop:watchWithFilter(r,e,{...Oe,eventFilter:Ge}),pause:Be,resume:je,isActive:Ve}}function tryOnMounted(r,e=!0,t){getLifeCycleTarget()?onMounted(r,t):e?r():nextTick(r)}function useTimeoutFn(r,e,t={}){const{immediate:ke=!0}=t,Oe=ref(!1);let Ge=null;function Be(){Ge&&(clearTimeout(Ge),Ge=null)}function je(){Oe.value=!1,Be()}function Ve(...Ze){Be(),Oe.value=!0,Ge=setTimeout(()=>{Oe.value=!1,Ge=null,r(...Ze)},toValue(e))}return ke&&(Oe.value=!0,isClient&&Ve()),tryOnScopeDispose(je),{isPending:readonly(Oe),start:Ve,stop:je}}function unrefElement(r){var e;const t=toValue(r);return(e=t==null?void 0:t.$el)!=null?e:t}const defaultWindow=isClient?window:void 0,defaultNavigator=isClient?window.navigator:void 0;function useEventListener(...r){let e,t,ke,Oe;if(typeof r[0]=="string"||Array.isArray(r[0])?([t,ke,Oe]=r,e=defaultWindow):[e,t,ke,Oe]=r,!e)return noop;Array.isArray(t)||(t=[t]),Array.isArray(ke)||(ke=[ke]);const Ge=[],Be=()=>{Ge.forEach(Qe=>Qe()),Ge.length=0},je=(Qe,en,tn,an)=>(Qe.addEventListener(en,tn,an),()=>Qe.removeEventListener(en,tn,an)),Ve=watch(()=>[unrefElement(e),toValue(Oe)],([Qe,en])=>{if(Be(),!Qe)return;const tn=isObject(en)?{...en}:en;Ge.push(...t.flatMap(an=>ke.map(cn=>je(Qe,an,cn,tn))))},{immediate:!0,flush:"post"}),Ze=()=>{Ve(),Be()};return tryOnScopeDispose(Ze),Ze}function useMounted(){const r=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{r.value=!0},e),r}function useSupported(r){const e=useMounted();return computed(()=>(e.value,!!r()))}function useMediaQuery(r,e={}){const{window:t=defaultWindow}=e,ke=useSupported(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let Oe;const Ge=ref(!1),Be=Ze=>{Ge.value=Ze.matches},je=()=>{Oe&&("removeEventListener"in Oe?Oe.removeEventListener("change",Be):Oe.removeListener(Be))},Ve=watchEffect(()=>{ke.value&&(je(),Oe=t.matchMedia(toValue(r)),"addEventListener"in Oe?Oe.addEventListener("change",Be):Oe.addListener(Be),Ge.value=Oe.matches)});return tryOnScopeDispose(()=>{Ve(),je(),Oe=void 0}),Ge}function usePermission(r,e={}){const{controls:t=!1,navigator:ke=defaultNavigator}=e,Oe=useSupported(()=>ke&&"permissions"in ke);let Ge;const Be=typeof r=="string"?{name:r}:r,je=ref(),Ve=()=>{Ge&&(je.value=Ge.state)},Ze=createSingletonPromise(async()=>{if(Oe.value){if(!Ge)try{Ge=await ke.permissions.query(Be),useEventListener(Ge,"change",Ve),Ve()}catch{je.value="prompt"}return Ge}});return Ze(),t?{state:je,isSupported:Oe,query:Ze}:je}function useClipboard(r={}){const{navigator:e=defaultNavigator,read:t=!1,source:ke,copiedDuring:Oe=1500,legacy:Ge=!1}=r,Be=useSupported(()=>e&&"clipboard"in e),je=usePermission("clipboard-read"),Ve=usePermission("clipboard-write"),Ze=computed(()=>Be.value||Ge),Qe=ref(""),en=ref(!1),tn=useTimeoutFn(()=>en.value=!1,Oe);function an(){Be.value&&fn(je.value)?e.clipboard.readText().then(pn=>{Qe.value=pn}):Qe.value=hn()}Ze.value&&t&&useEventListener(["copy","cut"],an);async function cn(pn=toValue(ke)){Ze.value&&pn!=null&&(Be.value&&fn(Ve.value)?await e.clipboard.writeText(pn):dn(pn),Qe.value=pn,en.value=!0,tn.start())}function dn(pn){const mn=document.createElement("textarea");mn.value=pn??"",mn.style.position="absolute",mn.style.opacity="0",document.body.appendChild(mn),mn.select(),document.execCommand("copy"),mn.remove()}function hn(){var pn,mn,yn;return(yn=(mn=(pn=document==null?void 0:document.getSelection)==null?void 0:pn.call(document))==null?void 0:mn.toString())!=null?yn:""}function fn(pn){return pn==="granted"||pn==="prompt"}return{isSupported:Ze,text:Qe,copied:en,copy:cn}}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers=getHandlers();function getHandlers(){return globalKey in _global||(_global[globalKey]=_global[globalKey]||{}),_global[globalKey]}function getSSRHandler(r,e){return handlers[r]||e}function guessSerializerType(r){return r==null?"any":r instanceof Set?"set":r instanceof Map?"map":r instanceof Date?"date":typeof r=="boolean"?"boolean":typeof r=="string"?"string":typeof r=="object"?"object":Number.isNaN(r)?"any":"number"}const StorageSerializers={boolean:{read:r=>r==="true",write:r=>String(r)},object:{read:r=>JSON.parse(r),write:r=>JSON.stringify(r)},number:{read:r=>Number.parseFloat(r),write:r=>String(r)},any:{read:r=>r,write:r=>String(r)},string:{read:r=>r,write:r=>String(r)},map:{read:r=>new Map(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r.entries()))},set:{read:r=>new Set(JSON.parse(r)),write:r=>JSON.stringify(Array.from(r))},date:{read:r=>new Date(r),write:r=>r.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(r,e,t,ke={}){var Oe;const{flush:Ge="pre",deep:Be=!0,listenToStorageChanges:je=!0,writeDefaults:Ve=!0,mergeDefaults:Ze=!1,shallow:Qe,window:en=defaultWindow,eventFilter:tn,onError:an=Tn=>{console.error(Tn)},initOnMounted:cn}=ke,dn=(Qe?shallowRef:ref)(typeof e=="function"?e():e);if(!t)try{t=getSSRHandler("getDefaultStorage",()=>{var Tn;return(Tn=defaultWindow)==null?void 0:Tn.localStorage})()}catch(Tn){an(Tn)}if(!t)return dn;const hn=toValue(e),fn=guessSerializerType(hn),pn=(Oe=ke.serializer)!=null?Oe:StorageSerializers[fn],{pause:mn,resume:yn}=watchPausable(dn,()=>wn(dn.value),{flush:Ge,deep:Be,eventFilter:tn});en&&je&&tryOnMounted(()=>{useEventListener(en,"storage",Sn),useEventListener(en,customStorageEventName,Mn),cn&&Sn()}),cn||Sn();function Cn(Tn,En){en&&en.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:r,oldValue:Tn,newValue:En,storageArea:t}}))}function wn(Tn){try{const En=t.getItem(r);if(Tn==null)Cn(En,null),t.removeItem(r);else{const An=pn.write(Tn);En!==An&&(t.setItem(r,An),Cn(En,An))}}catch(En){an(En)}}function bn(Tn){const En=Tn?Tn.newValue:t.getItem(r);if(En==null)return Ve&&hn!=null&&t.setItem(r,pn.write(hn)),hn;if(!Tn&&Ze){const An=pn.read(En);return typeof Ze=="function"?Ze(An,hn):fn==="object"&&!Array.isArray(An)?{...hn,...An}:An}else return typeof En!="string"?En:pn.read(En)}function Sn(Tn){if(!(Tn&&Tn.storageArea!==t)){if(Tn&&Tn.key==null){dn.value=hn;return}if(!(Tn&&Tn.key!==r)){mn();try{(Tn==null?void 0:Tn.newValue)!==pn.write(dn.value)&&(dn.value=bn(Tn))}catch(En){an(En)}finally{Tn?nextTick(yn):yn()}}}}function Mn(Tn){Sn(Tn.detail)}return dn}function useResizeObserver(r,e,t={}){const{window:ke=defaultWindow,...Oe}=t;let Ge;const Be=useSupported(()=>ke&&"ResizeObserver"in ke),je=()=>{Ge&&(Ge.disconnect(),Ge=void 0)},Ve=computed(()=>Array.isArray(r)?r.map(en=>unrefElement(en)):[unrefElement(r)]),Ze=watch(Ve,en=>{if(je(),Be.value&&ke){Ge=new ResizeObserver(e);for(const tn of en)tn&&Ge.observe(tn,Oe)}},{immediate:!0,flush:"post"}),Qe=()=>{je(),Ze()};return tryOnScopeDispose(Qe),{isSupported:Be,stop:Qe}}function useElementSize(r,e={width:0,height:0},t={}){const{window:ke=defaultWindow,box:Oe="content-box"}=t,Ge=computed(()=>{var en,tn;return(tn=(en=unrefElement(r))==null?void 0:en.namespaceURI)==null?void 0:tn.includes("svg")}),Be=ref(e.width),je=ref(e.height),{stop:Ve}=useResizeObserver(r,([en])=>{const tn=Oe==="border-box"?en.borderBoxSize:Oe==="content-box"?en.contentBoxSize:en.devicePixelContentBoxSize;if(ke&&Ge.value){const an=unrefElement(r);if(an){const cn=an.getBoundingClientRect();Be.value=cn.width,je.value=cn.height}}else if(tn){const an=Array.isArray(tn)?tn:[tn];Be.value=an.reduce((cn,{inlineSize:dn})=>cn+dn,0),je.value=an.reduce((cn,{blockSize:dn})=>cn+dn,0)}else Be.value=en.contentRect.width,je.value=en.contentRect.height},t);tryOnMounted(()=>{const en=unrefElement(r);en&&(Be.value="offsetWidth"in en?en.offsetWidth:e.width,je.value="offsetHeight"in en?en.offsetHeight:e.height)});const Ze=watch(()=>unrefElement(r),en=>{Be.value=en?e.width:0,je.value=en?e.height:0});function Qe(){Ve(),Ze()}return{width:Be,height:je,stop:Qe}}function useUrlSearchParams(r="history",e={}){const{initialValue:t={},removeNullishValues:ke=!0,removeFalsyValues:Oe=!1,write:Ge=!0,window:Be=defaultWindow}=e;if(!Be)return reactive(t);const je=reactive({});function Ve(){if(r==="history")return Be.location.search||"";if(r==="hash"){const fn=Be.location.hash||"",pn=fn.indexOf("?");return pn>0?fn.slice(pn):""}else return(Be.location.hash||"").replace(/^#/,"")}function Ze(fn){const pn=fn.toString();if(r==="history")return`${pn?`?${pn}`:""}${Be.location.hash||""}`;if(r==="hash-params")return`${Be.location.search||""}${pn?`#${pn}`:""}`;const mn=Be.location.hash||"#",yn=mn.indexOf("?");return yn>0?`${mn.slice(0,yn)}${pn?`?${pn}`:""}`:`${mn}${pn?`?${pn}`:""}`}function Qe(){return new URLSearchParams(Ve())}function en(fn){const pn=new Set(Object.keys(je));for(const mn of fn.keys()){const yn=fn.getAll(mn);je[mn]=yn.length>1?yn:fn.get(mn)||"",pn.delete(mn)}Array.from(pn).forEach(mn=>delete je[mn])}const{pause:tn,resume:an}=watchPausable(je,()=>{const fn=new URLSearchParams("");Object.keys(je).forEach(pn=>{const mn=je[pn];Array.isArray(mn)?mn.forEach(yn=>fn.append(pn,yn)):ke&&mn==null||Oe&&!mn?fn.delete(pn):fn.set(pn,mn)}),cn(fn)},{deep:!0});function cn(fn,pn){tn(),pn&&en(fn),Be.history.replaceState(Be.history.state,Be.document.title,Be.location.pathname+Ze(fn)),an()}function dn(){Ge&&cn(Qe(),!0)}useEventListener(Be,"popstate",dn,!1),r!=="history"&&useEventListener(Be,"hashchange",dn,!1);const hn=Qe();return hn.keys().next().value?en(hn):Object.assign(je,t),je}function useMatchMedia(r){var e={SM:"576px",MD:"768px",LG:"992px",XL:"1440px"};if(e[r]!==void 0){const t="(max-width: "+e[r]+")";return useMediaQuery(t)}}function useMatchMediaHeight(r){var e={XS:"739px",SM:"719px",LG:"779px",XL:"859px"};{const t="(max-height: "+e[r]+")";return useMediaQuery(t)}}function useBaseUrl(){return"https://cartes.gouv.fr"}function useHeaderParams(){return{serviceTitle:"cartes.gouv.fr",serviceDescription:"Le service public des cartes et données du territoire",logoText:["RÉPUBLIQUE","FRANÇAISE"],quickLinks:[{label:"Accueil",to:"/",href:useBaseUrl()+"/",icon:"ri-arrow-right-line",iconRight:!0},{label:"Catalogue",to:"/catalogue",href:useBaseUrl()+"/catalogue",icon:"ri-arrow-right-line",iconRight:!0}],searchQuery:ref("")}}const LogoIGN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAABaCAYAAABuUm4xAAAACXBIWXMAAANcAAADXAG0iWi0AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADJhJREFUeJztnWlQFGcax/89A8OcHHIJIogkCIInIHjibYwnnkk0HjGlW7Vbu1VbW7X5tlX7Ybdqd1NJNpuoGIP3lZi4xjtRY/DCi/sQRO7hnosZYGaY7v3AklUj003TM9Pjvr8PfKCffp+nu/799vs+7/P2UAzDMCAQhojE0wEQvBMiHAIviHAIvCDCIfCCCIfACyIcAi+IcAi8IMIh8IIIh8ALIhwCL4hwCLwgwiHwggiHwAsiHAIviHAIvCDCIfCCCIfACyIcAi98PB2AK3E4HDCaTOjU6WG2WGC1WtHX1wepVAqZTAaVUokRQUEYERQIHx/X3IoH+QVQyOVISkxwSfueQvC7xaWEmaIood0CAGiaRm19A8ofP0Z1TS20zS3o7e0FnPljGMhkMkRGRCD+tbFIHj8eo0dFChbjxe+vQqfXY9P6tUidOkWQNgfDnfdecOGcu3QZeQ8fObXZvGE9EuJfF8yn3mDArbt5ePCoAAaT6fmDbDeKomCz21FbX4/a+npcufYjwkJDkJGWioy0VCgVimHHxzAMjp/+FiqVConj4ofd3mCcOP0tSisqBj2enpKCFUuXCOJLcOH0Wm0wmy1Obfr6+gTxZTSacPGHq7j/KB8Oh0OQNgGgrb0DZy9cwuWr1zAzPR0L5s6BSqkcVpsOhwMHjh7Hr3fuQHRUlECRPk9vb6/Te2+1WgXz5ZWDY5qm8WPuTfzlw49w9/4DQUXzLFarDdd+ysVfP/wYBcUlw2/PZkP2gUNo7+gQIDrP4nXCMXV1Yff+HJw5fxFWm80tPs0WC46d+lqQntJstmDPlwdh6uoSIDLP4VXC0ba04KPPdqOq+qnbfctkMkilUkHa6tTpkJ1zED29vYK05wm8RjiNWi0+y94PvcHoEf9yPz9BZ4ON2mbkHDkm2HjP3XhFHqejU4e9Xx6Epbt7yOdKpVIEBQYiKDAAKqUSUqkUfX19sHR3Q6fTw2A0guYwjVUIMLt6kcon1Tj21Wls3rgeEonXPMMAvEA4VpsN+w8dQZfZzPkctUqFqZMmIikxATHRoyH38xvU1mLpRk1dHYpKy1BYUjrozEOhkA85di48KiyCWqXCmpXLXdK+qxC9cM6cO4/m1lZOtmqVCm8snI/01BT4+vpyOkelUiJ5fCKSxycia8Uy3LxzF9du5P5i/KGQu0Y4APDT7Tvw12iwcF6my3wIjaiFU1X9FHfvP+RkOzFpPDauzRpWvkUhl2PRvLlIT03BqW/+jZLy8v8dc8Gr6lnOXb4Cf40G01KnutSPUIj2xUrTNM6cu8Apjb4gcza2b35n2Em6Afw1GuzYsgnL31j884DYlT3OACe/+RZlFY9d7kcIRCucwuISNDU3s9rNykjHiqVvCL7+RVEUFs7NxMY1qyGhKEGWHthw0DQOHDuB2rp6l/saLqIUDgPgeu4tVrvoqChkrVjm0lgy0lKxatmbkLuhxwEAm82GLw4dQWtbu1v88UWUwmnSalHf2OjURiKRYMOaVYIl5ZyROWsGpkya4HI/A5gtFmTnHITRaGI39hCiFE5+YRGrzaTkJERFRrohmn7UKpXbfAFAp16PvQcOoqenx61+uSJK4ZSWsw8Q58yc7oZIPIu2uQX7Dx+F3S6+7LLohGM0mdDa7vz9PiIoEDHR0W6KyLM8eVqDIydPgabF9Y1P0eVxGhqbWKfg8XFxkHCaRTHQWSrRYMhFm6kAhu4qmG2tsDvMYBgaPlIFlL4h8FfEIFiViJH+aYgMzIBMqhbmYgSisKQU33z3HdatWunpUH5GdMJpbmHPEo9mKYSyOcwobz6Ospaj0FsqB7Vz0L2w2vXQd1ehrvMHAIBUIsfooDlIGLkRY4IXQUK59hb5yWScykNu3smDv0aDxfPnuTQerohOOJ06HatNWGjIoMdKm4/gXu3f0GPjVyzloHtR23kFtZ1X4K+IQUr07zAufJ3LBLR4/jwUFJegoamJ1fbi91ehUasxfVqaS2IZCqIb45hYFjMZhkGAv2bQ4/W6a7xF84tYeupw/fHvcTp/Odq72Gd6fJDL/bBz2xaEBgez2jIMg6/PnEVJWTmrrasRnXB6eliKmygKMpls0MOz4v4MmU+AoDG1dxXhdMFKFDbuAwPhB6kajRq73tsGf83gD8QADprGoRMn8bS2TvA4hoLohONwOJ96Us/8fRkaeRTmxf8dQl8aTdtwq/pPuFH1ARhG+BrnkOAR2PXeVk5rYjabHfsPHUFLa5vgcXBFdMJhK2hiGAZ2u92pTVzocmTEfiBkWD9Tpj2M65V/cEnPMyoiAu9v2cypJMTS3Y29OQc8VhEpOuH4yQYvugL6Fx/NHIq6pkb/BumxH8BZ78SXipaTeFj3ieDtAkDc2Fi8+9YGThWBeoMRe3MOoNsD2WXRCUetZk/td3CYeQFASvRvsTDxX/CRCr9ccL/uH2gy3Ba8XaC/tmj96pWcVvxbWtvwxcHDrL2w0IhOOEGBgaw22uYWzu3Fh2Vh/dSLGBkwbThh/QKGoXGj6o9w0MJtcnuW6dPS8ObihZxsn9bW4dDxk6Bp2iWxvAzRCcdZjmaAJ09rhtRmkPI1ZE06jQUJnyJAEcs3tBegEKh8HXbH0AvoubJwbiYyZ87gZFtcVo6yx4MnO4VGdAnA0aNGsdo0NTdDbzAiKJD7tJuipBgXvhavh61ETcdllDYfhdZwCzQztAVEiUSGmBELMDlqFyIE7sVehKIorFq2FGaLBQ8LClntXbWj9WWITjjhYaFQKZVOt8LQNI0H+flYNG/ukNuXUL6IC12OuNDl6LF3oEGfi2ZjHtq7imHsrYWtz/TMdJuCr1QFjXw0QjUTMCpgBmKC50Phy94rCoVEIsE769fC0t2Nisoqt/llQ3TCkUgkGPdaHB4VFTu1u3knD5mzZkLGcTfDy1D4hiA+LAvxYVn//Q8Du6MbfbQVAA0pJYOvVA2Kev6NTjMMx0VWYZBKpdi++R18vm8/6hqcF7i5C9GNcQBg4oRkVhujyYQbuTcF9tzfwyh8R0DhGwKZjz8oSgKGYaA3GPCwoBBHTn6FfTkHBfbLjp9Mhp3btiA8LNTtvl+G6HocAEhKGMf6ugKAK9dvIDlpPCLCwwXzbbfbcfjEKQCAzW6H2WyBTq9/LlcSG+OZWiCVSoVfbd+GT/Zkw2D0TOJvAFH2OL6+vshIS2W1s9vtyDl8DBaLcDMbB02juKwcRaVlqKisQqNW65EE22AEBQVi1/atgm0F4osohQP0F4j7OVnMHKCtowN7vsyB2eL8Y06vEhEjw/H+1s1OF3tdjWiF46/RYO7smZxsG5q0+PizPaw7I14lYmNisPXtjW7Z5fEyRCscAFiQOYdTnQrQvwzxye5snDl/YXivLnGV9jolKTEBb63JctnHOJ0hysHxADKZDG+vX4vPsr+Ag0M63eFw4MfcW7hz7z5SJk9GyqSJGBMTzfpU0jSDltZWFJeVI7+oiNO2Y7GQljIFXRYzzl645Fa/ohYOAIwdE4MVS5fgzPmLnM+xWm24nXcPt/PuQe7nh1GRkQgPDYG/vz/kfrL+L41abTCZu9De0YkmbbNXj5Hmz5kNs9mCaz/lus2n6IUDAHNnz0JHpw437+YN+dxeqxXVNTWorhna+pa3sWLpEpgtFtxj+VSwUIh6jPMsa1etEEWRtlihKAob16x22xfcvUY4FEVhQ9YqLFkw3yODQW9AKpVi69sbMTYmxuW+vEY4QL94li5agB3vboKGQ8GXK/CTyZCUIN7fZZDJZNixdTMiRwqXTX8ZXjHGeZHk8YmIiR6Nsxcu4UF+gVtmQSqVEjPTp2H2jOnQqMW10/NFVEoldm7fin/uzobOYHCJD68UDgBo1Gps2rAOc2ZMx5Vr11FaXsHp66FDQSKRIC52DNKmTsHkCckezdQOlcCAAOx6bxs+3bvPJTNGihH4ca18Ug1ti/PSzuTERIQEjxDSLTo6dbj/KB+FxSVoaeO/bUStUiEudgwSx8UjKSEBGs3wepe7Dx72/4LNIMTHxSEyYuSwfDijrqERn+/bD6vNhlkZ6Vi3Wpj954ILRwzo9AY8ra1FY5MWbe0dMBiN6O7phs1mBwPA18cHcj8/qNUqBAYEIDQ4GCPDwxA1KhIhwcGv3OC7orIKh0+cwrSUqVi1bKkgbb6SwhmMgUt91YTBBYZhBL3u/yvhEITDq6bjBPFAhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF4Q4RB4QYRD4AURDoEXRDgEXhDhEHhBhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF78BxTBP6hVBWeZAAAAAElFTkSuQmCC",LogoTRANSFO="/cartes.gouv.fr-entree-carto/assets/logo-transformation-fonction-publiques-C9P2QqWZ.png",LogoECOLO="/cartes.gouv.fr-entree-carto/assets/logo-transition-ecologique-D0O5Izlc.png",LogoCNIG="/cartes.gouv.fr-entree-carto/assets/logo-cnig-CXEVuuxB.png";function useFooterParams(){return{beforeMandatoryLinks:[{label:"Plan du site",href:useBaseUrl()+"/plan-du-site"}],a11yCompliance:"partiellement conforme",legalLink:"/mentions-legales",personalDataLink:"/donnees-personnelles",cookiesLink:"/cookies",a11yComplianceLink:"/accessibilite",descText:"Cartes.gouv.fr est développé par l’Institut national de l’information géographique et forestière (IGN) et ses partenaires. Le site s’appuie sur la Géoplateforme, la nouvelle infrastructure publique, ouverte et collaborative des données géographiques.",homeLink:"/",licenceText:void 0,licenceTo:void 0,licenceName:void 0,licenceLinkProps:void 0,ecosystemLinks:[{label:"info.gouv.fr",href:"https://info.gouv.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}],partners:{title:"Nos partenaires",mainPartner:{},subPartners:[{href:"https://www.ign.fr/",logo:LogoIGN,name:"IGN"},{href:"https://www.transformation.gouv.fr/",logo:LogoTRANSFO,name:"Ministère de la transformation et de la fonction publiques"},{href:"https://www.ecologie.gouv.fr/",logo:LogoECOLO,name:"Ministère de la Transition Écologique et de la Cohésion des Territoires"},{href:"https://cnig.gouv.fr/",logo:LogoCNIG,name:"Conseil national de l’information géolocalisée"}]},mandatoryLinks:[{label:"Accessibilité : partiellement conforme",href:useBaseUrl()+"/accessibilite"},{label:"Mentions légales",href:useBaseUrl()+"/mentions-legales"},{label:"Données personnelles",href:useBaseUrl()+"/donnees-personnelles"},{label:"Gestion des cookies",href:useBaseUrl()+"/cookies"}]}}const __default__$h={},_sfc_main$M=Object.assign(__default__$h,{__name:"ModalConsent",setup(r,{expose:e}){const t=useRouter(),ke=useEulerian();var Oe=ke.hasKey();const Ge=ref(!Oe),Be="Panneau de gestion des cookies",je="md",Ve=useBaseUrl()+"/donnees-personnelles",Ze=()=>{Ge.value=!0,ke.pause()},Qe=()=>{Ge.value=!1,t.push({path:"/"}),ke.resume()};e({openModalConsent:Ze,onModalConsentClose:Qe});const en=()=>{ke.start(),Qe()},tn=()=>{ke.stop(),Qe()};return(an,cn)=>{const dn=sn,hn=$s;return openBlock(),createBlock(hn,{opened:unref(Ge),title:Be,size:je,onClose:Qe},{default:withCtx(()=>[createBaseVNode("p",null,[createVNode(dn,{onAcceptAll:cn[0]||(cn[0]=fn=>en()),onRefuseAll:cn[1]||(cn[1]=fn=>tn())},{default:withCtx(()=>[cn[2]||(cn[2]=createTextVNode(" Préférences pour tous les services. ")),createBaseVNode("a",{href:Ve},"Données personnelles et cookies")]),_:1})]),cn[3]||(cn[3]=createBaseVNode("hr",null,null,-1)),cn[4]||(cn[4]=createBaseVNode("p",null,[createBaseVNode("h5",null,"Eulerian Analytics"),createTextVNode(" En cliquant sur 'Tout accepter', vous consentez à l'utilisation des cookies pour nous aider à améliorer notre site web en collectant et en rapportant des informations sur votre utilisation grâce à Eulerian Analytics. "),createBaseVNode("br"),createTextVNode(" Si vous n'êtes pas d'accord, veuillez cliquer sur 'Tout refuser'. Votre expérience de navigation ne sera pas affectée. ")],-1))]),_:1},8,["opened"])}}}),LogoSun="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M19,72c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1%20c0-0.55145,0.4486-1,1-1s1,0.44855,1,1C32,9.5514,31.5514,10,31,10z%20M67,66c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S67.5514,66,67,66z%20M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M9,32c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M32.4453,44.1679c0.4595-0.3063,1.0804-0.1821,1.3867,0.2774C35.3156,46.6706,38.5061,48,41,48%20c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1c-3.1061,0-6.931-1.5937-8.8321-4.4453C31.8616,45.0952,31.9858,44.4743,32.4453,44.1679z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M39.00671,20.04651L39,19.92981v-5.47369c0-0.55225,0.44769-1,1-1c0.51282,0,0.93549,0.38611,0.99329,0.88336%20L41,14.45612v5.47369c0,0.55231-0.44769,1-1,1C39.48718,20.92981,39.06451,20.54382,39.00671,20.04651z%20M19.37927,39H14%20l-0.11658,0.00671C13.38599,39.06451,13,39.48718,13,40c0,0.55231,0.44769,1,1,1h5.37927l0.11664-0.00671%20c0.49738-0.0578,0.88336-0.48047,0.88336-0.99329C20.37927,39.44769,19.93158,39,19.37927,39z%20M66,39h-5.37927l-0.11664,0.00671%20c-0.49738,0.0578-0.88336,0.48047-0.88336,0.99329c0,0.55231,0.44769,1,1,1H66l0.11658-0.00671C66.61401,40.93549,67,40.51282,67,40%20C67,39.44769,66.55231,39,66,39z%20M40,59.07019c-0.55231,0-1,0.44769-1,1v5.47369l0.00671,0.11664%20c0.0578,0.49725,0.48047,0.88336,0.99329,0.88336c0.55231,0,1-0.44769,1-1v-5.47369l-0.00671-0.11658%20C40.93549,59.45618,40.51282,59.07019,40,59.07019z%20M24.04541,53.89557l-1.79309,1.82452l-0.0824,0.09503%20c-0.30164,0.3949-0.26892,0.96185,0.09467,1.31915c0.39392,0.38715,1.02704,0.38159,1.41412-0.01227l1.79309-1.82458l0.0824-0.09491%20c0.30157-0.3949,0.26898-0.96191-0.0946-1.31921C25.06561,53.49622,24.4325,53.50171,24.04541,53.89557z%20M55.95459,24.27991%20l1.79309-1.82458l0.0824-0.09491c0.30164-0.3949,0.26892-0.96191-0.09467-1.31921c-0.39392-0.38721-1.02704-0.38159-1.41412,0.01233%20l-1.79321,1.82446L54.4458,22.9729c-0.30157,0.39502-0.26898,0.96191,0.0946,1.31927%20C54.93439,24.67932,55.5675,24.67383,55.95459,24.27991z%20M23.67871,21.05353l-0.09338-0.08405%20c-0.38971-0.30847-0.95715-0.28571-1.32074,0.07172c-0.39386,0.38708-0.39941,1.0202-0.01227,1.41412l1.79309,1.82458%20l0.09351,0.08398c0.38959,0.30841,0.95697,0.28558,1.32068-0.07172c0.39392-0.38708,0.39941-1.02026,0.01221-1.41418%20L23.67871,21.05353z%20M55.95459,53.89557l-0.09351-0.08398c-0.38959-0.30847-0.95697-0.28571-1.32068,0.07172%20c-0.39392,0.38708-0.39941,1.0202-0.01233,1.41412l1.79321,1.82458l0.09338,0.08398%20c0.38971,0.30841,0.95715,0.28558,1.32074-0.07172c0.39386-0.38708,0.39941-1.02026,0.01227-1.41418L55.95459,53.89557z%20M40,26%20c-7.73199,0-14,6.26801-14,14c0,1.91528,0.38538,3.77838,1.12323,5.50281c0.21716,0.50781,0.80499,0.74329,1.31268,0.52606%20c0.50781-0.21729,0.74329-0.80499,0.52606-1.31274C28.33002,43.2392,28,41.64362,28,40c0-6.62738,5.37262-12,12-12s12,5.37262,12,12%20s-5.37262,12-12,12c-3.5495,0-6.84521-1.54871-9.11212-4.19141c-0.35956-0.41907-0.99091-0.46747-1.4101-0.10791%20c-0.41919,0.35962-0.46747,0.99091-0.10791,1.4101C32.01282,52.19177,35.86072,54,40,54c7.73199,0,14-6.26801,14-14%20S47.73199,26,40,26z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoMoon="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M19,72c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1c0-0.55145,0.4486-1,1-1s1,0.44855,1,1%20C32,9.5514,31.5514,10,31,10z%20M69,60c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S69.5514,60,69,60z%20M45,70%20c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S45.5514,70,45,70z%20M9,32c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M41,30c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1S41.5523,30,41,30z%20M59,38c-0.5523,0-1,0.4477-1,1%20s0.4477,1,1,1s1-0.4477,1-1S59.5523,38,59,38z%20M55,38c0.5523,0,1,0.4477,1,1c0,0.5128-0.386,0.9355-0.8834,0.9933L55,40h-2%20c-0.5523,0-1-0.4477-1-1c0-0.5128,0.386-0.9355,0.8834-0.9933L53,38H55z%20M48,31c0-0.5523-0.4477-1-1-1h-2l-0.1166,0.0067%20C44.386,30.0645,44,30.4872,44,31c0,0.5523,0.4477,1,1,1h2l0.1166-0.0067C47.614,31.9355,48,31.5128,48,31z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M59.90668,47.08899c-2.4024,7.6662-9.49188,12.91333-17.52948,12.91333%20c-10.14819,0-18.37512-8.26733-18.37512-18.46643c0-7.85461,4.93793-14.82916,12.2738-17.42346%20c1.87921-0.66461,3.32355,1.68457,1.9613,3.1073c-2.30841,2.41095-3.5921,5.59399-3.5921,8.95575%20c0,6.76794,5.2041,12.37939,11.8927,12.89435c0.5506,0.04236,0.96271,0.52319,0.92035,1.07379%20c-0.04242,0.55066-0.52325,0.96271-1.07385,0.92029c-7.72986-0.59503-13.7392-7.07483-13.7392-14.88843%20c0-3.61078,1.28583-7.04816,3.61322-9.75067l0.22668-0.25684L36.2854,26.2464c-6.06519,2.4425-10.13849,8.30981-10.2796,14.9339%20l-0.00372,0.35559c0,9.09668,7.33374,16.46643,16.37512,16.46643c6.92578,0,13.0639-4.375,15.39703-10.84619l0.06879-0.19916%20l-0.19684,0.18811c-1.96747,1.82373-4.37738,3.07861-6.99451,3.63629l-0.39404,0.07843%20c-0.54303,0.1004-1.0647-0.25842-1.1651-0.80151c-0.10052-0.54309,0.25836-1.0647,0.80145-1.16516%20c2.62329-0.48511,5.02313-1.77515,6.89282-3.70404C58.17792,43.75378,60.4975,45.2038,59.90668,47.08899z%20M15,58%20c-0.55231,0-1,0.44769-1,1s0.44769,1,1,1s1-0.44769,1-1S15.55231,58,15,58z%20M55,28h2l0.11658-0.00671%20C57.61401,27.93549,58,27.51282,58,27c0-0.55231-0.44769-1-1-1h-2l-0.11658,0.00671C54.38599,26.06451,54,26.48718,54,27%20C54,27.55231,54.44769,28,55,28z%20M23,58h-4l-0.11658,0.00671C18.38599,58.06451,18,58.48718,18,59c0,0.55231,0.44769,1,1,1h4%20l0.11658-0.00671C23.61401,59.93549,24,59.51282,24,59C24,58.44769,23.55231,58,23,58z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoSystem="/cartes.gouv.fr-entree-carto/assets/system-DTLRiYhn.svg",title="Paramètres d'affichage",size="md",legend="Choisissez un thème pour personnaliser l'apparence du site.",_sfc_main$L={__name:"ModalTheme",setup(r,{expose:e}){const t=useEulerian(),{setScheme:ke,theme:Oe,scheme:Ge}=Hc(),Be=ref(Ge.value);watch(Ge,()=>{Be.value=Ge.value});const je=[{label:"Thème clair",value:"light",id:"fr-radios-theme-light",name:"fr-radios-theme",img:LogoSun},{label:"Thème sombre",id:"fr-radios-theme-dark",value:"dark",name:"fr-radios-theme",img:LogoMoon},{label:"Système",id:"fr-radios-theme-system",value:"system",name:"fr-radios-theme",hint:"Utilise les paramètres sytème.",img:LogoSystem}],Ve=()=>{ke(Be.value)},Ze=ref(!1),Qe=()=>{Ze.value=!0,t.pause()},en=()=>{Ze.value=!1,t.resume()};return e({openModalTheme:Qe,onModalThemeClose:en}),(tn,an)=>{const cn=Po,dn=$s;return openBlock(),createBlock(dn,{ref:"modal",opened:unref(Ze),title,size,onClose:en},{default:withCtx(()=>[createVNode(cn,{modelValue:unref(Be),"onUpdate:modelValue":[an[0]||(an[0]=hn=>isRef(Be)?Be.value=hn:null),Ve],legend,name:"fr-radios-theme",options:je},null,8,["modelValue"])]),_:1},8,["opened"])}}},{setScheme,theme,scheme}=Hc(),NAMESPACE$1="cartes.gouv.fr",ns$1=r=>NAMESPACE$1+"."+r,VERSION="4",SCHEME_KEY_LS_MAIN="scheme",SCHEME_KEY_LS_CARTES="vue-dsfr-scheme",useAppStore=defineStore("app",()=>{var r=useStorage(ns$1("version"),VERSION);r.value!==VERSION&&(localStorage.clear(),localStorage.setItem(ns$1("version"),VERSION),r.value=VERSION),watch(r,()=>{localStorage.setItem(ns$1("version"),r.value)});var e=useStorage(SCHEME_KEY_LS_MAIN);e.value&&(localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)),watch(e,()=>{localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)}),watch(scheme,()=>{localStorage.setItem(SCHEME_KEY_LS_MAIN,scheme.value)})}),_hoisted_1$c={class:"fr-container fr-container--fluid fr-container-md"},_sfc_main$K=defineComponent({__name:"Main",setup(r){useAppStore(),dist.useLogger(),useMatchMedia("LG");const e=useHeaderParams(),t=useFooterParams(),ke=ref(null),Oe=computed(()=>[{label:"Paramètres d’affichage",button:!0,class:"fr-icon-theme-fill fr-link--icon-left fr-px-2v",to:"/settings",onclick:ke.value?ke.value.openModalTheme:null}]),Ge=ref(null),Be=computed(()=>t.mandatoryLinks.map(Ze=>(Ze.label==="Gestion des cookies"&&(delete Ze.href,Ze.onclick=Ge.value?Ge.value.openModalConsent:null,Ze.to="/"),Ze))),je=useRoute(),Ve=[{title:"Commencer avec cartes.gouv",get active(){return["Documentation","Offre","Nous rejoindre"].includes(je.name)},links:[{to:`${useBaseUrl()}/documentation`,text:"Documentation"},{to:`${useBaseUrl()}/offre`,text:"Offre"},{to:`${useBaseUrl()}/nous-rejoindre`,text:"Nous rejoindre"}]},{to:`${useBaseUrl()}/catalogue`,text:"Catalogue"},{to:`${useBaseUrl()}/actualites`,text:"Actualités"},{title:"Assistance",get active(){return["Questions fréquentes","Nous écrire","Niveau de service"].includes(je.name)},links:[{to:`${useBaseUrl()}/faq`,text:"Questions fréquentes"},{to:`${useBaseUrl()}/nous-ecrire`,text:"Nous écrire"},{to:`${useBaseUrl()}/niveau-de-service`,text:"Niveau de service"}]},{to:`${useBaseUrl()}/a-propos`,text:"À propos"}];return(Ze,Qe)=>{const en=qs,tn=Sl,an=resolveComponent("router-view"),cn=Er;return openBlock(),createElementBlock(Fragment,null,[createVNode(tn,{modelValue:unref(e).serviceTitle,"onUpdate:modelValue":Qe[0]||(Qe[0]=dn=>unref(e).serviceTitle=dn),"service-title":unref(e).serviceTitle,"show-beta":!0,"service-description":unref(e).serviceDescription,"logo-text":unref(e).logoText,"quick-links":unref(e).quickLinks},{mainnav:withCtx(()=>[createVNode(en,{"nav-items":Ve})]),_:1},8,["modelValue","service-title","service-description","logo-text","quick-links"]),createBaseVNode("div",null,[createVNode(an)]),Qe[1]||(Qe[1]=createBaseVNode("label",{class:"fr-footer-toggle-label fr-btn fr-btn--tertiary-no-outline",for:"fr-footer-toggle"},null,-1)),Qe[2]||(Qe[2]=createBaseVNode("input",{id:"fr-footer-toggle",type:"checkbox"},null,-1)),createVNode(cn,{"before-mandatory-links":unref(t).beforeMandatoryLinks,"after-mandatory-links":unref(Oe),"logo-text":unref(t).logoText,"desc-text":unref(t).descText,"home-link":unref(t).homeLink,partners:unref(t).partners,"licence-text":unref(t).licenceText,"licence-to":unref(t).licenceTo,"licence-name":unref(t).licenceName,"licence-link-props":unref(t).licenceLinkProps,"ecosystem-links":unref(t).ecosystemLinks,"mandatory-links":unref(Be)},null,8,["before-mandatory-links","after-mandatory-links","logo-text","desc-text","home-link","partners","licence-text","licence-to","licence-name","licence-link-props","ecosystem-links","mandatory-links"]),createBaseVNode("div",_hoisted_1$c,[createVNode(_sfc_main$L,{ref_key:"refModalTheme",ref:ke},null,512),createVNode(_sfc_main$M,{ref_key:"refModalConsent",ref:Ge},null,512)])],64)}}}),_sfc_main$J=defineComponent({__name:"App",setup(r){return(e,t)=>(openBlock(),createBlock(_sfc_main$K))}}),name$1="geopf-extensions-openlayers",description$1="French Geoportal Extensions for OpenLayers libraries",version$2="1.0.0-beta.1-296",date$1="11/12/2024",module$1="src/index.js",directories={},engines$1={node:">=20"},repository$1={type:"git",url:"https://github.com/IGNF/geopf-extensions-openlayers.git"},author$1="IGNF",keywords$1=["geoportail","geoplateforme","javascript","OpenLayers 8"],license$1="AGPL-3.0",bugs={url:"https://github.com/IGNF/geopf-extensions-openlayers/issues"},homepage$1="https://github.com/IGNF/geopf-extensions-openlayers#readme",dependencies$1={"@gouvfr/dsfr":"^1.11.0","@mapbox/mapbox-gl-style-spec":"14.7.1","@xmldom/xmldom":"^0.9.0",eventbusjs:"0.2.0","geoportal-access-lib":"3.4.4",loglevel:"^1.9.1","markdown-toc":"^1.2.0",ol:"8.2.0","ol-mapbox-style":"12.3.5",proj4:"2.14.0",sortablejs:"1.15.3",typescript:"^5.3.3","whatwg-fetch":"3.6.20"},Pkg$1={name:name$1,description:description$1,version:version$2,date:date$1,module:module$1,directories,engines:engines$1,repository:repository$1,author:author$1,keywords:keywords$1,license:license$1,bugs,homepage:homepage$1,dependencies:dependencies$1};class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ObjectEventType={PROPERTYCHANGE:"propertychange"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(r,e,t){let ke,Oe;t=t||ascending;let Ge=0,Be=r.length,je=!1;for(;Ge<Be;)ke=Ge+(Be-Ge>>1),Oe=+t(r[ke],e),Oe<0?Ge=ke+1:(Be=ke,je=!Oe);return je?Ge:~Ge}function ascending(r,e){return r>e?1:r<e?-1:0}function linearFindNearest(r,e,t){if(r[0]<=e)return 0;const ke=r.length;if(e<=r[ke-1])return ke-1;if(typeof t=="function"){for(let Oe=1;Oe<ke;++Oe){const Ge=r[Oe];if(Ge===e)return Oe;if(Ge<e)return t(e,r[Oe-1],Ge)>0?Oe-1:Oe}return ke-1}if(t>0){for(let Oe=1;Oe<ke;++Oe)if(r[Oe]<e)return Oe-1;return ke-1}if(t<0){for(let Oe=1;Oe<ke;++Oe)if(r[Oe]<=e)return Oe;return ke-1}for(let Oe=1;Oe<ke;++Oe){if(r[Oe]==e)return Oe;if(r[Oe]<e)return r[Oe-1]-e<e-r[Oe]?Oe-1:Oe}return ke-1}function reverseSubArray(r,e,t){for(;e<t;){const ke=r[e];r[e]=r[t],r[t]=ke,++e,--t}}function extend$4(r,e){const t=Array.isArray(e)?e:[e],ke=t.length;for(let Oe=0;Oe<ke;Oe++)r[r.length]=t[Oe]}function equals$2(r,e){const t=r.length;if(t!==e.length)return!1;for(let ke=0;ke<t;ke++)if(r[ke]!==e[ke])return!1;return!0}function isSorted(r,e,t){const ke=e||ascending;return r.every(function(Oe,Ge){if(Ge===0)return!0;const Be=ke(r[Ge-1],Oe);return!(Be>0||Be===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(r){let e=!1,t,ke,Oe;return function(){const Ge=Array.prototype.slice.call(arguments);return(!e||this!==Oe||!equals$2(Ge,ke))&&(e=!0,Oe=this,ke=Ge,t=r.apply(this,arguments)),t}}function toPromise(r){function e(){let t;try{t=r()}catch(ke){return Promise.reject(ke)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function clear$1(r){for(const e in r)delete r[e]}function isEmpty$1(r){let e;for(e in r)return!1;return!e}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const ke=this.listeners_||(this.listeners_={}),Oe=ke[e]||(ke[e]=[]);Oe.includes(t)||Oe.push(t)}dispatchEvent(e){const t=typeof e=="string",ke=t?e:e.type,Oe=this.listeners_&&this.listeners_[ke];if(!Oe)return;const Ge=t?new BaseEvent(e):e;Ge.target||(Ge.target=this.eventTarget_||this);const Be=this.dispatching_||(this.dispatching_={}),je=this.pendingRemovals_||(this.pendingRemovals_={});ke in Be||(Be[ke]=0,je[ke]=0),++Be[ke];let Ve;for(let Ze=0,Qe=Oe.length;Ze<Qe;++Ze)if("handleEvent"in Oe[Ze]?Ve=Oe[Ze].handleEvent(Ge):Ve=Oe[Ze].call(this,Ge),Ve===!1||Ge.propagationStopped){Ve=!1;break}if(--Be[ke]===0){let Ze=je[ke];for(delete je[ke];Ze--;)this.removeEventListener(ke,VOID);delete Be[ke]}return Ve}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const ke=this.listeners_[e];if(!ke)return;const Oe=ke.indexOf(t);Oe!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(ke[Oe]=VOID,++this.pendingRemovals_[e]):(ke.splice(Oe,1),ke.length===0&&delete this.listeners_[e]))}}const EventType={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function listen(r,e,t,ke,Oe){if(ke&&ke!==r&&(t=t.bind(ke)),Oe){const Be=t;t=function(){r.removeEventListener(e,t),Be.apply(this,arguments)}}const Ge={target:r,type:e,listener:t};return r.addEventListener(e,t),Ge}function listenOnce(r,e,t,ke){return listen(r,e,t,ke,!0)}function unlistenByKey(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),clear$1(r))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const ke=e.length,Oe=new Array(ke);for(let Ge=0;Ge<ke;++Ge)Oe[Ge]=listen(this,e[Ge],t);return Oe}return listen(this,e,t)}onceInternal(e,t){let ke;if(Array.isArray(e)){const Oe=e.length;ke=new Array(Oe);for(let Ge=0;Ge<Oe;++Ge)ke[Ge]=listenOnce(this,e[Ge],t)}else ke=listenOnce(this,e,t);return t.ol_key=ke,ke}unInternal(e,t){const ke=t.ol_key;if(ke)unByKey(ke);else if(Array.isArray(e))for(let Oe=0,Ge=e.length;Oe<Ge;++Oe)this.removeEventListener(e[Oe],t);else this.removeEventListener(e,t)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(r){if(Array.isArray(r))for(let e=0,t=r.length;e<t;++e)unlistenByKey(r[e]);else unlistenByKey(r)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(r){return r.ol_uid||(r.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,t,ke){super(e),this.key=t,this.oldValue=ke}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let ke;ke=`change:${e}`,this.hasListener(ke)&&this.dispatchEvent(new ObjectEvent(ke,e,t)),ke=ObjectEventType.PROPERTYCHANGE,this.hasListener(ke)&&this.dispatchEvent(new ObjectEvent(ke,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,ke){const Oe=this.values_||(this.values_={});if(ke)Oe[e]=t;else{const Ge=Oe[e];Oe[e]=t,Ge!==t&&this.notify(e,Ge)}}setProperties(e,t){for(const ke in e)this.set(ke,e[ke],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const ke=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),t||this.notify(e,ke)}}}const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(r){const e=r.match(fontRegEx);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let ke=0,Oe=fontRegExMatchIndex.length;ke<Oe;++ke){const Ge=e[ke+1];Ge!==void 0&&(t[fontRegExMatchIndex[ke]]=Ge)}return t.families=t.family.split(/,\s?/),t},Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(r){const e=createEmpty();for(let t=0,ke=r.length;t<ke;++t)extendCoordinate(e,r[t]);return e}function _boundingExtentXYs(r,e,t){const ke=Math.min.apply(null,r),Oe=Math.min.apply(null,e),Ge=Math.max.apply(null,r),Be=Math.max.apply(null,e);return createOrUpdate$2(ke,Oe,Ge,Be,t)}function buffer(r,e,t){return t?(t[0]=r[0]-e,t[1]=r[1]-e,t[2]=r[2]+e,t[3]=r[3]+e,t):[r[0]-e,r[1]-e,r[2]+e,r[3]+e]}function clone$1(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r.slice()}function closestSquaredDistanceXY(r,e,t){let ke,Oe;return e<r[0]?ke=r[0]-e:r[2]<e?ke=e-r[2]:ke=0,t<r[1]?Oe=r[1]-t:r[3]<t?Oe=t-r[3]:Oe=0,ke*ke+Oe*Oe}function containsCoordinate(r,e){return containsXY(r,e[0],e[1])}function containsExtent(r,e){return r[0]<=e[0]&&e[2]<=r[2]&&r[1]<=e[1]&&e[3]<=r[3]}function containsXY(r,e,t){return r[0]<=e&&e<=r[2]&&r[1]<=t&&t<=r[3]}function coordinateRelationship(r,e){const t=r[0],ke=r[1],Oe=r[2],Ge=r[3],Be=e[0],je=e[1];let Ve=Relationship.UNKNOWN;return Be<t?Ve=Ve|Relationship.LEFT:Be>Oe&&(Ve=Ve|Relationship.RIGHT),je<ke?Ve=Ve|Relationship.BELOW:je>Ge&&(Ve=Ve|Relationship.ABOVE),Ve===Relationship.UNKNOWN&&(Ve=Relationship.INTERSECTING),Ve}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(r,e,t,ke,Oe){return Oe?(Oe[0]=r,Oe[1]=e,Oe[2]=t,Oe[3]=ke,Oe):[r,e,t,ke]}function createOrUpdateEmpty(r){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,r)}function createOrUpdateFromCoordinate(r,e){const t=r[0],ke=r[1];return createOrUpdate$2(t,ke,t,ke,e)}function createOrUpdateFromFlatCoordinates(r,e,t,ke,Oe){const Ge=createOrUpdateEmpty(Oe);return extendFlatCoordinates(Ge,r,e,t,ke)}function equals$1(r,e){return r[0]==e[0]&&r[2]==e[2]&&r[1]==e[1]&&r[3]==e[3]}function extend$3(r,e){return e[0]<r[0]&&(r[0]=e[0]),e[2]>r[2]&&(r[2]=e[2]),e[1]<r[1]&&(r[1]=e[1]),e[3]>r[3]&&(r[3]=e[3]),r}function extendCoordinate(r,e){e[0]<r[0]&&(r[0]=e[0]),e[0]>r[2]&&(r[2]=e[0]),e[1]<r[1]&&(r[1]=e[1]),e[1]>r[3]&&(r[3]=e[1])}function extendFlatCoordinates(r,e,t,ke,Oe){for(;t<ke;t+=Oe)extendXY(r,e[t],e[t+1]);return r}function extendXY(r,e,t){r[0]=Math.min(r[0],e),r[1]=Math.min(r[1],t),r[2]=Math.max(r[2],e),r[3]=Math.max(r[3],t)}function forEachCorner(r,e){let t;return t=e(getBottomLeft(r)),t||(t=e(getBottomRight(r)),t)||(t=e(getTopRight(r)),t)||(t=e(getTopLeft(r)),t)?t:!1}function getArea$1(r){let e=0;return isEmpty(r)||(e=getWidth(r)*getHeight(r)),e}function getBottomLeft(r){return[r[0],r[1]]}function getBottomRight(r){return[r[2],r[1]]}function getCenter(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function getCorner(r,e){let t;if(e==="bottom-left")t=getBottomLeft(r);else if(e==="bottom-right")t=getBottomRight(r);else if(e==="top-left")t=getTopLeft(r);else if(e==="top-right")t=getTopRight(r);else throw new Error("Invalid corner");return t}function getForViewAndSize(r,e,t,ke,Oe){const[Ge,Be,je,Ve,Ze,Qe,en,tn]=getRotatedViewport(r,e,t,ke);return createOrUpdate$2(Math.min(Ge,je,Ze,en),Math.min(Be,Ve,Qe,tn),Math.max(Ge,je,Ze,en),Math.max(Be,Ve,Qe,tn),Oe)}function getRotatedViewport(r,e,t,ke){const Oe=e*ke[0]/2,Ge=e*ke[1]/2,Be=Math.cos(t),je=Math.sin(t),Ve=Oe*Be,Ze=Oe*je,Qe=Ge*Be,en=Ge*je,tn=r[0],an=r[1];return[tn-Ve+en,an-Ze-Qe,tn-Ve-en,an-Ze+Qe,tn+Ve-en,an+Ze+Qe,tn+Ve+en,an+Ze-Qe,tn-Ve+en,an-Ze-Qe]}function getHeight(r){return r[3]-r[1]}function getIntersection(r,e,t){const ke=t||createEmpty();return intersects$1(r,e)?(r[0]>e[0]?ke[0]=r[0]:ke[0]=e[0],r[1]>e[1]?ke[1]=r[1]:ke[1]=e[1],r[2]<e[2]?ke[2]=r[2]:ke[2]=e[2],r[3]<e[3]?ke[3]=r[3]:ke[3]=e[3]):createOrUpdateEmpty(ke),ke}function getTopLeft(r){return[r[0],r[3]]}function getTopRight(r){return[r[2],r[3]]}function getWidth(r){return r[2]-r[0]}function intersects$1(r,e){return r[0]<=e[2]&&r[2]>=e[0]&&r[1]<=e[3]&&r[3]>=e[1]}function isEmpty(r){return r[2]<r[0]||r[3]<r[1]}function returnOrUpdate(r,e){return e?(e[0]=r[0],e[1]=r[1],e[2]=r[2],e[3]=r[3],e):r}function scaleFromCenter(r,e){const t=(r[2]-r[0])/2*(e-1),ke=(r[3]-r[1])/2*(e-1);r[0]-=t,r[2]+=t,r[1]-=ke,r[3]+=ke}function intersectsSegment(r,e,t){let ke=!1;const Oe=coordinateRelationship(r,e),Ge=coordinateRelationship(r,t);if(Oe===Relationship.INTERSECTING||Ge===Relationship.INTERSECTING)ke=!0;else{const Be=r[0],je=r[1],Ve=r[2],Ze=r[3],Qe=e[0],en=e[1],tn=t[0],an=t[1],cn=(an-en)/(tn-Qe);let dn,hn;Ge&Relationship.ABOVE&&!(Oe&Relationship.ABOVE)&&(dn=tn-(an-Ze)/cn,ke=dn>=Be&&dn<=Ve),!ke&&Ge&Relationship.RIGHT&&!(Oe&Relationship.RIGHT)&&(hn=an-(tn-Ve)*cn,ke=hn>=je&&hn<=Ze),!ke&&Ge&Relationship.BELOW&&!(Oe&Relationship.BELOW)&&(dn=tn-(an-je)/cn,ke=dn>=Be&&dn<=Ve),!ke&&Ge&Relationship.LEFT&&!(Oe&Relationship.LEFT)&&(hn=an-(tn-Be)*cn,ke=hn>=je&&hn<=Ze)}return ke}function applyTransform(r,e,t,ke){if(isEmpty(r))return createOrUpdateEmpty(t);let Oe=[];Oe=[r[0],r[1],r[2],r[1],r[2],r[3],r[0],r[3]],e(Oe,Oe,2);const Ge=[],Be=[];for(let je=0,Ve=Oe.length;je<Ve;je+=2)Ge.push(Oe[je]),Be.push(Oe[je+1]);return _boundingExtentXYs(Ge,Be,t)}function wrapX$2(r,e){const t=e.getExtent(),ke=getCenter(r);if(e.canWrapX()&&(ke[0]<t[0]||ke[0]>=t[2])){const Oe=getWidth(t),Be=Math.floor((ke[0]-t[0])/Oe)*Oe;r[0]-=Be,r[2]-=Be}return r}function wrapAndSliceX(r,e){if(e.canWrapX()){const t=e.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[t[0],r[1],t[2],r[3]]];wrapX$2(r,e);const ke=getWidth(t);if(getWidth(r)>ke)return[[t[0],r[1],t[2],r[3]]];if(r[0]<t[0])return[[r[0]+ke,r[1],t[2],r[3]],[t[0],r[1],r[2],r[3]]];if(r[2]>t[2])return[[r[0],r[1],t[2],r[3]],[t[0],r[1],r[2]-ke,r[3]]]}return[r]}const ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,CREATE_IMAGE_BITMAP=typeof createImageBitmap=="function",PASSIVE_EVENT_LISTENERS=function(){let r=!1;try{const e=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return r}();function createCanvasContext2D(r,e,t,ke){let Oe;return t&&t.length?Oe=t.shift():WORKER_OFFSCREEN_CANVAS?Oe=new OffscreenCanvas(r||300,e||300):Oe=document.createElement("canvas"),r&&(Oe.width=r),e&&(Oe.height=e),Oe.getContext("2d",ke)}function releaseCanvas(r){const e=r.canvas;e.width=1,e.height=1,r.clearRect(0,0,1,1)}function outerWidth(r){let e=r.offsetWidth;const t=getComputedStyle(r);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function outerHeight(r){let e=r.offsetHeight;const t=getComputedStyle(r);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function replaceNode(r,e){const t=e.parentNode;t&&t.replaceChild(r,e)}function removeNode(r){return r&&r.parentNode?r.parentNode.removeChild(r):null}function removeChildren(r){for(;r.lastChild;)r.removeChild(r.lastChild)}function replaceChildren(r,e){const t=r.childNodes;for(let ke=0;;++ke){const Oe=t[ke],Ge=e[ke];if(!Oe&&!Ge)break;if(Oe!==Ge){if(!Oe){r.appendChild(Ge);continue}if(!Ge){r.removeChild(Oe),--ke;continue}r.insertBefore(Ge,Oe)}}}const Property$3={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property$3.ELEMENT,this.handleElementChanged),this.addChangeListener(Property$3.MAP,this.handleMapChanged),this.addChangeListener(Property$3.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property$3.POSITION,this.handlePositionChanged),this.addChangeListener(Property$3.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property$3.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property$3.MAP)||null}getOffset(){return this.get(Property$3.OFFSET)}getPosition(){return this.get(Property$3.POSITION)}getPositioning(){return this.get(Property$3.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){this.mapPostrenderListenerKey&&(removeNode(this.element),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const t=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?t.insertBefore(this.element,t.childNodes[0]||null):t.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property$3.ELEMENT,e)}setMap(e){this.set(Property$3.MAP,e)}setOffset(e){this.set(Property$3.OFFSET,e)}setPosition(e){this.set(Property$3.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Property$3.POSITION))return;const ke=this.getRect(t.getTargetElement(),t.getSize()),Oe=this.getElement(),Ge=this.getRect(Oe,[outerWidth(Oe),outerHeight(Oe)]);e=e||{};const Be=e.margin===void 0?20:e.margin;if(!containsExtent(ke,Ge)){const je=Ge[0]-ke[0],Ve=ke[2]-Ge[2],Ze=Ge[1]-ke[1],Qe=ke[3]-Ge[3],en=[0,0];if(je<0?en[0]=je-Be:Ve<0&&(en[0]=Math.abs(Ve)+Be),Ze<0?en[1]=Ze-Be:Qe<0&&(en[1]=Math.abs(Qe)+Be),en[0]!==0||en[1]!==0){const tn=t.getView().getCenterInternal(),an=t.getPixelFromCoordinateInternal(tn);if(!an)return;const cn=[an[0]+en[0],an[1]+en[1]],dn=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(cn),duration:dn.duration,easing:dn.easing})}}}getRect(e,t){const ke=e.getBoundingClientRect(),Oe=ke.left+window.pageXOffset,Ge=ke.top+window.pageYOffset;return[Oe,Ge,Oe+t[0],Ge+t[1]]}setPositioning(e){this.set(Property$3.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const ke=e.getPixelFromCoordinate(t),Oe=e.getSize();this.updateRenderedPosition(ke,Oe)}updateRenderedPosition(e,t){const ke=this.element.style,Oe=this.getOffset(),Ge=this.getPositioning();this.setVisible(!0);const Be=Math.round(e[0]+Oe[0])+"px",je=Math.round(e[1]+Oe[1])+"px";let Ve="0%",Ze="0%";Ge=="bottom-right"||Ge=="center-right"||Ge=="top-right"?Ve="-100%":(Ge=="bottom-center"||Ge=="center-center"||Ge=="top-center")&&(Ve="-50%"),Ge=="bottom-left"||Ge=="bottom-center"||Ge=="bottom-right"?Ze="-100%":(Ge=="center-left"||Ge=="center-center"||Ge=="center-right")&&(Ze="-50%");const Qe=`translate(${Ve}, ${Ze}) translate(${Be}, ${je})`;this.rendered.transform_!=Qe&&(this.rendered.transform_=Qe,ke.transform=Qe)}getOptions(){return this.options}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function easeIn(r){return Math.pow(r,3)}function easeOut(r){return 1-easeIn(1-r)}function inAndOut(r){return 3*r*r-2*r*r*r}function linear(r){return r}class Tile extends Target{constructor(e,t,ke){super(),ke=ke||{},this.tileCoord=e,this.state=t,this.interimTile=null,this.key="",this.transition_=ke.transition===void 0?250:ke.transition,this.transitionStarts_={},this.interpolate=!!ke.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let e=this.interimTile;if(!e)return this;do{if(e.getState()==TileState.LOADED)return this.transition_=0,e;e=e.interimTile}while(e);return this}refreshInterimChain(){let e=this.interimTile;if(!e)return;let t=this;do{if(e.getState()==TileState.LOADED){e.interimTile=null;break}e.getState()==TileState.LOADING?t=e:e.getState()==TileState.IDLE?t.interimTile=e.interimTile:t=e,e=t.interimTile}while(e)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){abstract()}getAlpha(e,t){if(!this.transition_)return 1;let ke=this.transitionStarts_[e];if(!ke)ke=t,this.transitionStarts_[e]=ke;else if(ke===-1)return 1;const Oe=t-ke+1e3/60;return Oe>=this.transition_?1:easeIn(Oe/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}}let VectorTile$1=class extends Tile{constructor(e,t,ke,Oe,Ge,Be){super(e,t,Be),this.extent=null,this.format_=Oe,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=Ge,this.url_=ke,this.key=ke}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}};function assert(r,e){if(!r)throw new Error(e)}class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const ke=this.entries_[e];return assert(ke!==void 0,"Tried to get a value for a key that does not exist in the cache"),ke===this.newest_||(ke===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(ke.newer.older=ke.older,ke.older.newer=ke.newer),ke.newer=null,ke.older=this.newest_,this.newest_.newer=ke,this.newest_=ke),ke.value_}remove(e){const t=this.entries_[e];return assert(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,ke;for(ke=this.newest_;ke;ke=ke.older)e[t++]=ke.key_;return e}getValues(){const e=new Array(this.count_);let t=0,ke;for(ke=this.newest_;ke;ke=ke.older)e[t++]=ke.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const ke={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=ke:this.oldest_=ke,this.newest_=ke,this.entries_[e]=ke,++this.count_}setSize(e){this.highWaterMark=e}}function createOrUpdate$1(r,e,t,ke){return ke!==void 0?(ke[0]=r,ke[1]=e,ke[2]=t,ke):[r,e,t]}function getKeyZXY(r,e,t){return r+"/"+e+"/"+t}function getKey$1(r){return getKeyZXY(r[0],r[1],r[2])}function getCacheKeyForTileKey(r){const[e,t,ke]=r.substring(r.lastIndexOf("/")+1,r.length).split(",").map(Number);return getKeyZXY(e,t,ke)}function fromKey(r){return r.split("/").map(Number)}function hash(r){return(r[1]<<r[0])+r[2]}function withinExtentAndZ(r,e){const t=r[0],ke=r[1],Oe=r[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const Ge=e.getFullTileRange(t);return Ge?Ge.containsXY(ke,Oe):!0}class TileCache extends LRUCache{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(e){for(;this.canExpireCache()&&!(this.peekLast().getKey()in e);)this.pop().release()}pruneExceptNewestZ(){if(this.getCount()===0)return;const e=this.peekFirstKey(),ke=fromKey(e)[0];this.forEach(Oe=>{Oe.tileCoord[0]!==ke&&(this.remove(getKey$1(Oe.tileCoord)),Oe.release())})}}class TileRange{constructor(e,t,ke,Oe){this.minX=e,this.maxX=t,this.minY=ke,this.maxY=Oe}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate(r,e,t,ke,Oe){return Oe!==void 0?(Oe.minX=r,Oe.maxX=e,Oe.minY=t,Oe.maxY=ke,Oe):new TileRange(r,e,t,ke)}const DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256;function clamp(r,e,t){return Math.min(Math.max(r,e),t)}function squaredSegmentDistance(r,e,t,ke,Oe,Ge){const Be=Oe-t,je=Ge-ke;if(Be!==0||je!==0){const Ve=((r-t)*Be+(e-ke)*je)/(Be*Be+je*je);Ve>1?(t=Oe,ke=Ge):Ve>0&&(t+=Be*Ve,ke+=je*Ve)}return squaredDistance$1(r,e,t,ke)}function squaredDistance$1(r,e,t,ke){const Oe=t-r,Ge=ke-e;return Oe*Oe+Ge*Ge}function solveLinearSystem(r){const e=r.length;for(let ke=0;ke<e;ke++){let Oe=ke,Ge=Math.abs(r[ke][ke]);for(let je=ke+1;je<e;je++){const Ve=Math.abs(r[je][ke]);Ve>Ge&&(Ge=Ve,Oe=je)}if(Ge===0)return null;const Be=r[Oe];r[Oe]=r[ke],r[ke]=Be;for(let je=ke+1;je<e;je++){const Ve=-r[je][ke]/r[ke][ke];for(let Ze=ke;Ze<e+1;Ze++)ke==Ze?r[je][Ze]=0:r[je][Ze]+=Ve*r[ke][Ze]}}const t=new Array(e);for(let ke=e-1;ke>=0;ke--){t[ke]=r[ke][e]/r[ke][ke];for(let Oe=ke-1;Oe>=0;Oe--)r[Oe][e]-=r[Oe][ke]*t[ke]}return t}function toRadians(r){return r*Math.PI/180}function modulo(r,e){const t=r%e;return t*e<0?t+e:t}function lerp(r,e,t){return r+t*(e-r)}function toFixed(r,e){const t=Math.pow(10,e);return Math.round(r*t)/t}function round(r,e){return Math.round(toFixed(r,e))}function floor(r,e){return Math.floor(toFixed(r,e))}function ceil(r,e){return Math.ceil(toFixed(r,e))}function forEach(r,e,t,ke,Oe){let Ge;for(e+=ke;e<t;e+=ke)if(Ge=Oe(r.slice(e-ke,e),r.slice(e,e+ke)),Ge)return Ge;return!1}function linearRingContainsExtent(r,e,t,ke,Oe){return!forEachCorner(Oe,function(Be){return!linearRingContainsXY(r,e,t,ke,Be[0],Be[1])})}function linearRingContainsXY(r,e,t,ke,Oe,Ge){let Be=0,je=r[t-ke],Ve=r[t-ke+1];for(;e<t;e+=ke){const Ze=r[e],Qe=r[e+1];Ve<=Ge?Qe>Ge&&(Ze-je)*(Ge-Ve)-(Oe-je)*(Qe-Ve)>0&&Be++:Qe<=Ge&&(Ze-je)*(Ge-Ve)-(Oe-je)*(Qe-Ve)<0&&Be--,je=Ze,Ve=Qe}return Be!==0}function linearRingsContainsXY(r,e,t,ke,Oe,Ge){if(t.length===0||!linearRingContainsXY(r,e,t[0],ke,Oe,Ge))return!1;for(let Be=1,je=t.length;Be<je;++Be)if(linearRingContainsXY(r,t[Be-1],t[Be],ke,Oe,Ge))return!1;return!0}function linearRingssContainsXY(r,e,t,ke,Oe,Ge){if(t.length===0)return!1;for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];if(linearRingsContainsXY(r,e,Ve,ke,Oe,Ge))return!0;e=Ve[Ve.length-1]}return!1}function intersectsLineString(r,e,t,ke,Oe){const Ge=extendFlatCoordinates(createEmpty(),r,e,t,ke);return intersects$1(Oe,Ge)?containsExtent(Oe,Ge)||Ge[0]>=Oe[0]&&Ge[2]<=Oe[2]||Ge[1]>=Oe[1]&&Ge[3]<=Oe[3]?!0:forEach(r,e,t,ke,function(Be,je){return intersectsSegment(Oe,Be,je)}):!1}function intersectsLineStringArray(r,e,t,ke,Oe){for(let Ge=0,Be=t.length;Ge<Be;++Ge){if(intersectsLineString(r,e,t[Ge],ke,Oe))return!0;e=t[Ge]}return!1}function intersectsLinearRing(r,e,t,ke,Oe){return!!(intersectsLineString(r,e,t,ke,Oe)||linearRingContainsXY(r,e,t,ke,Oe[0],Oe[1])||linearRingContainsXY(r,e,t,ke,Oe[0],Oe[3])||linearRingContainsXY(r,e,t,ke,Oe[2],Oe[1])||linearRingContainsXY(r,e,t,ke,Oe[2],Oe[3]))}function intersectsLinearRingArray(r,e,t,ke,Oe){if(!intersectsLinearRing(r,e,t[0],ke,Oe))return!1;if(t.length===1)return!0;for(let Ge=1,Be=t.length;Ge<Be;++Ge)if(linearRingContainsExtent(r,t[Ge-1],t[Ge],ke,Oe)&&!intersectsLineString(r,t[Ge-1],t[Ge],ke,Oe))return!1;return!0}function intersectsLinearRingMultiArray(r,e,t,ke,Oe){for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=t[Ge];if(intersectsLinearRingArray(r,e,je,ke,Oe))return!0;e=je[je.length-1]}return!1}function hasArea(r){return r[0]>0&&r[1]>0}function scale$3(r,e,t){return t===void 0&&(t=[0,0]),t[0]=r[0]*e+.5|0,t[1]=r[1]*e+.5|0,t}function toSize(r,e){return Array.isArray(r)?r:(e===void 0?e=[r,r]:(e[0]=r,e[1]=r),e)}const tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(Oe,Ge)=>Ge-Oe),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let Oe=0,Ge=this.resolutions_.length-1;Oe<Ge;++Oe)if(!t)t=this.resolutions_[Oe]/this.resolutions_[Oe+1];else if(this.resolutions_[Oe]/this.resolutions_[Oe+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const ke=e.extent;ke!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(ke)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=ke!==void 0?ke:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((Oe,Ge)=>{const Be=new TileRange(Math.min(0,Oe[0]),Math.max(Oe[0]-1,-1),Math.min(0,Oe[1]),Math.max(Oe[1]-1,-1));if(ke){const je=this.getTileRangeForExtentAndZ(ke,Ge);Be.minX=Math.max(je.minX,Be.minX),Be.maxX=Math.min(je.maxX,Be.maxX),Be.minY=Math.max(je.minY,Be.minY),Be.maxY=Math.min(je.maxY,Be.maxY)}return Be}):ke&&this.calculateTileRanges_(ke)}forEachTileCoord(e,t,ke){const Oe=this.getTileRangeForExtentAndZ(e,t);for(let Ge=Oe.minX,Be=Oe.maxX;Ge<=Be;++Ge)for(let je=Oe.minY,Ve=Oe.maxY;je<=Ve;++je)ke([t,Ge,je])}forEachTileCoordParentTileRange(e,t,ke,Oe){let Ge,Be,je,Ve=null,Ze=e[0]-1;for(this.zoomFactor_===2?(Be=e[1],je=e[2]):Ve=this.getTileCoordExtent(e,Oe);Ze>=this.minZoom;){if(Be!==void 0&&je!==void 0?(Be=Math.floor(Be/2),je=Math.floor(je/2),Ge=createOrUpdate(Be,Be,je,je,ke)):Ge=this.getTileRangeForExtentAndZ(Ve,Ze,ke),t(Ze,Ge))return!0;--Ze}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,ke){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const Ge=e[1]*2,Be=e[2]*2;return createOrUpdate(Ge,Ge+1,Be,Be+1,t)}const Oe=this.getTileCoordExtent(e,ke||this.tmpExtent_);return this.getTileRangeForExtentAndZ(Oe,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,ke){if(t>this.maxZoom||t<this.minZoom)return null;const Oe=e[0],Ge=e[1],Be=e[2];if(t===Oe)return createOrUpdate(Ge,Be,Ge,Be,ke);if(this.zoomFactor_){const Ve=Math.pow(this.zoomFactor_,t-Oe),Ze=Math.floor(Ge*Ve),Qe=Math.floor(Be*Ve);if(t<Oe)return createOrUpdate(Ze,Ze,Qe,Qe,ke);const en=Math.floor(Ve*(Ge+1))-1,tn=Math.floor(Ve*(Be+1))-1;return createOrUpdate(Ze,en,Qe,tn,ke)}const je=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(je,t,ke)}getTileRangeForExtentAndZ(e,t,ke){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,tmpTileCoord);const Oe=tmpTileCoord[1],Ge=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,tmpTileCoord);const Be=tmpTileCoord[1],je=tmpTileCoord[2];return createOrUpdate(Oe,Be,Ge,je,ke)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),ke=this.getResolution(e[0]),Oe=toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*Oe[0]*ke,t[1]-(e[2]+.5)*Oe[1]*ke]}getTileCoordExtent(e,t){const ke=this.getOrigin(e[0]),Oe=this.getResolution(e[0]),Ge=toSize(this.getTileSize(e[0]),this.tmpSize_),Be=ke[0]+e[1]*Ge[0]*Oe,je=ke[1]-(e[2]+1)*Ge[1]*Oe,Ve=Be+Ge[0]*Oe,Ze=je+Ge[1]*Oe;return createOrUpdate$2(Be,je,Ve,Ze,t)}getTileCoordForCoordAndResolution(e,t,ke){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,ke)}getTileCoordForXYAndResolution_(e,t,ke,Oe,Ge){const Be=this.getZForResolution(ke),je=ke/this.getResolution(Be),Ve=this.getOrigin(Be),Ze=toSize(this.getTileSize(Be),this.tmpSize_);let Qe=je*(e-Ve[0])/ke/Ze[0],en=je*(Ve[1]-t)/ke/Ze[1];return Oe?(Qe=ceil(Qe,DECIMALS$1)-1,en=ceil(en,DECIMALS$1)-1):(Qe=floor(Qe,DECIMALS$1),en=floor(en,DECIMALS$1)),createOrUpdate$1(Be,Qe,en,Ge)}getTileCoordForXYAndZ_(e,t,ke,Oe,Ge){const Be=this.getOrigin(ke),je=this.getResolution(ke),Ve=toSize(this.getTileSize(ke),this.tmpSize_);let Ze=(e-Be[0])/je/Ve[0],Qe=(Be[1]-t)/je/Ve[1];return Oe?(Ze=ceil(Ze,DECIMALS$1)-1,Qe=ceil(Qe,DECIMALS$1)-1):(Ze=floor(Ze,DECIMALS$1),Qe=floor(Qe,DECIMALS$1)),createOrUpdate$1(ke,Ze,Qe,Ge)}getTileCoordForCoordAndZ(e,t,ke){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,ke)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const ke=linearFindNearest(this.resolutions_,e,t||0);return clamp(ke,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return intersectsLinearRing(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,ke=new Array(t);for(let Oe=this.minZoom;Oe<t;++Oe)ke[Oe]=this.getTileRangeForExtentAndZ(e,Oe);this.fullTileRanges_=ke}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(t,ke){return t/Math.cosh(ke[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(r,e,t){const ke=r.length;t=t>1?t:2,e===void 0&&(t>2?e=r.slice():e=new Array(ke));for(let Oe=0;Oe<ke;Oe+=t){e[Oe]=HALF_SIZE*r[Oe]/180;let Ge=RADIUS$1*Math.log(Math.tan(Math.PI*(+r[Oe+1]+90)/360));Ge>MAX_SAFE_Y?Ge=MAX_SAFE_Y:Ge<-MAX_SAFE_Y&&(Ge=-MAX_SAFE_Y),e[Oe+1]=Ge}return e}function toEPSG4326(r,e,t){const ke=r.length;t=t>1?t:2,e===void 0&&(t>2?e=r.slice():e=new Array(ke));for(let Oe=0;Oe<ke;Oe+=t)e[Oe]=180*r[Oe]/HALF_SIZE,e[Oe+1]=360*Math.atan(Math.exp(r[Oe+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,t){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:t,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$5(r){return cache$1[r]||cache$1[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$3(r,e){cache$1[r]=e}let transforms={};function add$2(r,e,t){const ke=r.getCode(),Oe=e.getCode();ke in transforms||(transforms[ke]={}),transforms[ke][Oe]=t}function get$4(r,e){let t;return r in transforms&&e in transforms[r]&&(t=transforms[r][e]),t}function padNumber(r,e,t){const ke=t!==void 0?r.toFixed(t):""+r;let Oe=ke.indexOf(".");return Oe=Oe===-1?ke.length:Oe,Oe>e?ke:new Array(1+e-Oe).join("0")+ke}function compareVersions(r,e){const t=(""+r).split("."),ke=(""+e).split(".");for(let Oe=0;Oe<Math.max(t.length,ke.length);Oe++){const Ge=parseInt(t[Oe]||"0",10),Be=parseInt(ke[Oe]||"0",10);if(Ge>Be)return 1;if(Be>Ge)return-1}return 0}function add$1(r,e){return r[0]+=+e[0],r[1]+=+e[1],r}function closestOnSegment(r,e){const t=r[0],ke=r[1],Oe=e[0],Ge=e[1],Be=Oe[0],je=Oe[1],Ve=Ge[0],Ze=Ge[1],Qe=Ve-Be,en=Ze-je,tn=Qe===0&&en===0?0:(Qe*(t-Be)+en*(ke-je))/(Qe*Qe+en*en||0);let an,cn;return tn<=0?(an=Be,cn=je):tn>=1?(an=Ve,cn=Ze):(an=Be+tn*Qe,cn=je+tn*en),[an,cn]}function equals(r,e){let t=!0;for(let ke=r.length-1;ke>=0;--ke)if(r[ke]!=e[ke]){t=!1;break}return t}function rotate$1(r,e){const t=Math.cos(e),ke=Math.sin(e),Oe=r[0]*t-r[1]*ke,Ge=r[1]*t+r[0]*ke;return r[0]=Oe,r[1]=Ge,r}function scale$2(r,e){return r[0]*=e,r[1]*=e,r}function squaredDistance(r,e){const t=r[0]-e[0],ke=r[1]-e[1];return t*t+ke*ke}function distance(r,e){return Math.sqrt(squaredDistance(r,e))}function squaredDistanceToSegment(r,e){return squaredDistance(r,closestOnSegment(r,e))}function wrapX$1(r,e){if(e.canWrapX()){const t=getWidth(e.getExtent()),ke=getWorldsAway(r,e,t);ke&&(r[0]-=ke*t)}return r}function getWorldsAway(r,e,t){const ke=e.getExtent();let Oe=0;return e.canWrapX()&&(r[0]<ke[0]||r[0]>ke[2])&&(t=t||getWidth(ke),Oe=Math.floor((r[0]-ke[0])/t)),Oe}const DEFAULT_RADIUS=63710088e-1;function getDistance(r,e,t){t=t||DEFAULT_RADIUS;const ke=toRadians(r[1]),Oe=toRadians(e[1]),Ge=(Oe-ke)/2,Be=toRadians(e[0]-r[0])/2,je=Math.sin(Ge)*Math.sin(Ge)+Math.sin(Be)*Math.sin(Be)*Math.cos(ke)*Math.cos(Oe);return 2*t*Math.atan2(Math.sqrt(je),Math.sqrt(1-je))}function getAreaInternal(r,e){let t=0;const ke=r.length;let Oe=r[ke-1][0],Ge=r[ke-1][1];for(let Be=0;Be<ke;Be++){const je=r[Be][0],Ve=r[Be][1];t+=toRadians(je-Oe)*(2+Math.sin(toRadians(Ge))+Math.sin(toRadians(Ve))),Oe=je,Ge=Ve}return t*e*e/2}function getArea(r,e){e=e||{};const t=e.radius||DEFAULT_RADIUS,ke=e.projection||"EPSG:3857",Oe=r.getType();Oe!=="GeometryCollection"&&(r=r.clone().transform(ke,"EPSG:4326"));let Ge=0,Be,je,Ve,Ze,Qe,en;switch(Oe){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(Be=r.getCoordinates(),Ge=Math.abs(getAreaInternal(Be[0],t)),Ve=1,Ze=Be.length;Ve<Ze;++Ve)Ge-=Math.abs(getAreaInternal(Be[Ve],t));break}case"MultiPolygon":{for(Be=r.getCoordinates(),Ve=0,Ze=Be.length;Ve<Ze;++Ve)for(je=Be[Ve],Ge+=Math.abs(getAreaInternal(je[0],t)),Qe=1,en=je.length;Qe<en;++Qe)Ge-=Math.abs(getAreaInternal(je[Qe],t));break}case"GeometryCollection":{const tn=r.getGeometries();for(Ve=0,Ze=tn.length;Ve<Ze;++Ve)Ge+=getArea(tn[Ve],e);break}default:throw new Error("Unsupported geometry type: "+Oe)}return Ge}function warn(...r){console.warn(...r)}let showCoordinateWarning=!0;function disableCoordinateWarning(r){showCoordinateWarning=!1}function cloneTransform(r,e){if(e!==void 0){for(let t=0,ke=r.length;t<ke;++t)e[t]=r[t];e=e}else e=r.slice();return e}function identityTransform(r,e){if(e!==void 0&&r!==e){for(let t=0,ke=r.length;t<ke;++t)e[t]=r[t];r=e}return r}function addProjection(r){add$3(r.getCode(),r),add$2(r,r,cloneTransform)}function addProjections(r){r.forEach(addProjection)}function get$3(r){return typeof r=="string"?get$5(r):r||null}function getPointResolution(r,e,t,ke){r=get$3(r);let Oe;const Ge=r.getPointResolutionFunc();if(Ge){if(Oe=Ge(e,t),ke&&ke!==r.getUnits()){const Be=r.getMetersPerUnit();Be&&(Oe=Oe*Be/METERS_PER_UNIT$1[ke])}}else{const Be=r.getUnits();if(Be=="degrees"&&!ke||ke=="degrees")Oe=e;else{const je=getTransformFromProjections(r,get$3("EPSG:4326"));if(je===identityTransform&&Be!=="degrees")Oe=e*r.getMetersPerUnit();else{let Ze=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];Ze=je(Ze,Ze,2);const Qe=getDistance(Ze.slice(0,2),Ze.slice(2,4)),en=getDistance(Ze.slice(4,6),Ze.slice(6,8));Oe=(Qe+en)/2}const Ve=ke?METERS_PER_UNIT$1[ke]:r.getMetersPerUnit();Ve!==void 0&&(Oe/=Ve)}}return Oe}function addEquivalentProjections(r){addProjections(r),r.forEach(function(e){r.forEach(function(t){e!==t&&add$2(e,t,cloneTransform)})})}function addEquivalentTransforms(r,e,t,ke){r.forEach(function(Oe){e.forEach(function(Ge){add$2(Oe,Ge,t),add$2(Ge,Oe,ke)})})}function createProjection(r,e){return r?typeof r=="string"?get$3(r):r:get$3(e)}function createTransformFromCoordinateTransform(r){return function(e,t,ke){const Oe=e.length;ke=ke!==void 0?ke:2,t=t!==void 0?t:new Array(Oe);for(let Ge=0;Ge<Oe;Ge+=ke){const Be=r(e.slice(Ge,Ge+ke)),je=Be.length;for(let Ve=0,Ze=ke;Ve<Ze;++Ve)t[Ge+Ve]=Ve>=je?e[Ge+Ve]:Be[Ve]}return t}}function addCoordinateTransforms(r,e,t,ke){const Oe=get$3(r),Ge=get$3(e);add$2(Oe,Ge,createTransformFromCoordinateTransform(t)),add$2(Ge,Oe,createTransformFromCoordinateTransform(ke))}function fromLonLat(r,e){return disableCoordinateWarning(),transform$1(r,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function toLonLat(r,e){const t=transform$1(r,"EPSG:3857","EPSG:4326"),ke=t[0];return(ke<-180||ke>180)&&(t[0]=modulo(ke+180,360)-180),t}function equivalent(r,e){if(r===e)return!0;const t=r.getUnits()===e.getUnits();return(r.getCode()===e.getCode()||getTransformFromProjections(r,e)===cloneTransform)&&t}function getTransformFromProjections(r,e){const t=r.getCode(),ke=e.getCode();let Oe=get$4(t,ke);return Oe||(Oe=identityTransform),Oe}function getTransform(r,e){const t=get$3(r),ke=get$3(e);return getTransformFromProjections(t,ke)}function transform$1(r,e,t){return getTransform(e,t)(r,void 0,r.length)}function transformExtent(r,e,t,ke){const Oe=getTransform(e,t);return applyTransform(r,Oe,void 0)}function toUserCoordinate(r,e){return r}function fromUserCoordinate(r,e){return showCoordinateWarning&&!equals(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function toUserExtent(r,e){return r}function fromUserExtent(r,e){return r}function fromUserResolution(r,e){return r}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible!==void 0?e.attributionsCollapsible:!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(ke,Oe){t.viewResolver=ke,t.viewRejector=Oe})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(r){return r?Array.isArray(r)?function(e){return r}:typeof r=="function"?r:function(e){return[r]}:null}class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function getForProjection(r){let e=r.getDefaultTileGrid();return e||(e=createForProjection(r),r.setDefaultTileGrid(e)),e}function wrapX(r,e,t){const ke=e[0],Oe=r.getTileCoordCenter(e),Ge=extentFromProjection(t);if(!containsCoordinate(Ge,Oe)){const Be=getWidth(Ge),je=Math.ceil((Ge[0]-Oe[0])/Be);return Oe[0]+=Be*je,r.getTileCoordForCoordAndZ(Oe,ke)}return e}function createForExtent(r,e,t,ke){ke=ke!==void 0?ke:"top-left";const Oe=resolutionsFromExtent(r,e,t);return new TileGrid({extent:r,origin:getCorner(r,ke),resolutions:Oe,tileSize:t})}function createXYZ(r){const e=r||{},t=e.extent||get$3("EPSG:3857").getExtent(),ke={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(t,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(ke)}function resolutionsFromExtent(r,e,t,ke){e=e!==void 0?e:DEFAULT_MAX_ZOOM,t=toSize(t!==void 0?t:DEFAULT_TILE_SIZE);const Oe=getHeight(r),Ge=getWidth(r);ke=ke>0?ke:Math.max(Ge/t[0],Oe/t[1]);const Be=e+1,je=new Array(Be);for(let Ve=0;Ve<Be;++Ve)je[Ve]=ke/Math.pow(2,Ve);return je}function createForProjection(r,e,t,ke){const Oe=extentFromProjection(r);return createForExtent(Oe,e,t,ke)}function extentFromProjection(r){r=get$3(r);let e=r.getExtent();if(!e){const t=180*METERS_PER_UNIT$1.degrees/r.getMetersPerUnit();e=createOrUpdate$2(-t,-t,t,t)}return e}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.opaque_=e.opaque!==void 0?e.opaque:!1,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tileCache=new TileCache(e.cacheSize||0),this.tmpSize=[0,0],this.key_=e.key||"",this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(e,t){const ke=this.getTileCacheForProjection(e);ke&&ke.expireCache(t)}forEachLoadedTile(e,t,ke,Oe){const Ge=this.getTileCacheForProjection(e);if(!Ge)return!1;let Be=!0,je,Ve,Ze;for(let Qe=ke.minX;Qe<=ke.maxX;++Qe)for(let en=ke.minY;en<=ke.maxY;++en)Ve=getKeyZXY(t,Qe,en),Ze=!1,Ge.containsKey(Ve)&&(je=Ge.get(Ve),Ze=je.getState()===TileState.LOADED,Ze&&(Ze=Oe(je)!==!1)),Ze||(Be=!1);return Be}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getOpaque(e){return this.opaque_}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,ke,Oe,Ge){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTileCacheForProjection(e){const t=this.getProjection();return assert(t===null||equivalent(t,e),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,ke){const Oe=this.getTileGridForProjection(ke),Ge=this.getTilePixelRatio(t),Be=toSize(Oe.getTileSize(e),this.tmpSize);return Ge==1?Be:scale$3(Be,Ge,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){t=t!==void 0?t:this.getProjection();const ke=this.getTileGridForProjection(t);return this.getWrapX()&&t.isGlobal()&&(e=wrapX(ke,e,t)),withinExtentAndZ(e,ke)?e:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(e,t){const ke=this.getTileCacheForProjection(t);e>ke.highWaterMark&&(ke.highWaterMark=e)}useTile(e,t,ke,Oe){}}class TileSourceEvent extends BaseEvent{constructor(e,t){super(e),this.tile=t}}function createFromTemplate(r,e){const t=/\{z\}/g,ke=/\{x\}/g,Oe=/\{y\}/g,Ge=/\{-y\}/g;return function(Be,je,Ve){if(Be)return r.replace(t,Be[0].toString()).replace(ke,Be[1].toString()).replace(Oe,Be[2].toString()).replace(Ge,function(){const Ze=Be[0],Qe=e.getFullTileRange(Ze);if(!Qe)throw new Error("The {-y} placeholder requires a tile grid with extent");return(Qe.getHeight()-Be[2]-1).toString()})}}function createFromTemplates(r,e){const t=r.length,ke=new Array(t);for(let Oe=0;Oe<t;++Oe)ke[Oe]=createFromTemplate(r[Oe],e);return createFromTileUrlFunctions(ke)}function createFromTileUrlFunctions(r){return r.length===1?r[0]:function(e,t,ke){if(!e)return;const Oe=hash(e),Ge=modulo(Oe,r.length);return r[Ge](e,t,ke)}}function expandUrl(r){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(r);if(t){const ke=t[1].charCodeAt(0),Oe=t[2].charCodeAt(0);let Ge;for(Ge=ke;Ge<=Oe;++Ge)e.push(r.replace(t[0],String.fromCharCode(Ge)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(r),t){const ke=parseInt(t[2],10);for(let Oe=parseInt(t[1],10);Oe<=ke;Oe++)e.push(r.replace(t[0],Oe.toString()));return e}return e.push(r),e}class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,ke=getUid(t),Oe=t.getState();let Ge;Oe==TileState.LOADING?(this.tileLoadingKeys_[ke]=!0,Ge=TileEventType.TILELOADSTART):ke in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[ke],Ge=Oe==TileState.ERROR?TileEventType.TILELOADERROR:Oe==TileState.LOADED?TileEventType.TILELOADEND:void 0),Ge!=null&&this.dispatchEvent(new TileSourceEvent(Ge,t))}setTileLoadFunction(e){this.tileCache.clear(),this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,this.tileCache.pruneExceptNewestZ(),typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=expandUrl(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,ke){}useTile(e,t,ke){const Oe=getKeyZXY(e,t,ke);this.tileCache.containsKey(Oe)&&this.tileCache.get(Oe)}}const canvasPool$2=[];class VectorRenderTile extends Tile{constructor(e,t,ke,Oe){super(e,t,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=Oe.bind(void 0,this),this.wrappedTileCoord=ke}getContext(e){const t=getUid(e);return t in this.context_||(this.context_[t]=createCanvasContext2D(1,1,canvasPool$2)),this.context_[t]}hasContext(e){return getUid(e)in this.context_}getImage(e){return this.hasContext(e)?this.getContext(e).canvas:null}getReplayState(e){const t=getUid(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){for(const e in this.context_){const t=this.context_[e];releaseCanvas(t),canvasPool$2.push(t.canvas),delete this.context_[e]}super.release()}}let withCredentials=!1;function loadFeaturesXhr(r,e,t,ke,Oe,Ge,Be){const je=new XMLHttpRequest;je.open("GET",typeof r=="function"?r(t,ke,Oe):r,!0),e.getType()=="arraybuffer"&&(je.responseType="arraybuffer"),je.withCredentials=withCredentials,je.onload=function(Ve){if(!je.status||je.status>=200&&je.status<300){const Ze=e.getType();let Qe;Ze=="json"?Qe=JSON.parse(je.responseText):Ze=="text"?Qe=je.responseText:Ze=="xml"?(Qe=je.responseXML,Qe||(Qe=new DOMParser().parseFromString(je.responseText,"application/xml"))):Ze=="arraybuffer"&&(Qe=je.response),Qe?Ge(e.readFeatures(Qe,{extent:t,featureProjection:Oe}),e.readProjection(Qe)):Be()}else Be()},je.onerror=Be,je.send()}function xhr(r,e){return function(t,ke,Oe,Ge,Be){const je=this;loadFeaturesXhr(r,e,t,ke,Oe,function(Ve,Ze){je.addFeatures(Ve),Ge!==void 0&&Ge(Ve)},Be||VOID)}}class VectorTile extends UrlTile{constructor(e){const t=e.projection||"EPSG:3857",ke=e.extent||extentFromProjection(t),Oe=e.tileGrid||createXYZ({extent:ke,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,opaque:!1,projection:t,state:e.state,tileGrid:Oe,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.sourceTileCache=new TileCache(this.tileCache.highWaterMark),this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getFeaturesInExtent(e){const t=[],ke=this.tileCache;if(ke.getCount()===0)return t;const Oe=fromKey(ke.peekFirstKey())[0],Ge=this.tileGrid;return ke.forEach(function(Be){if(Be.tileCoord[0]!==Oe||Be.getState()!==TileState.LOADED)return;const je=Be.getSourceTiles();for(let Ve=0,Ze=je.length;Ve<Ze;++Ve){const Qe=je[Ve],en=Qe.tileCoord;if(intersects$1(e,Ge.getTileCoordExtent(en))){const tn=Qe.getFeatures();if(tn)for(let an=0,cn=tn.length;an<cn;++an){const dn=tn[an],hn=dn.getGeometry();intersects$1(e,hn.getExtent())&&t.push(dn)}}}}),t}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(e,t){const ke=this.getTileCacheForProjection(e),Oe=Object.keys(t).reduce((Ge,Be)=>{const je=getCacheKeyForTileKey(Be),Ve=ke.peek(je);if(Ve){const Ze=Ve.sourceTiles;for(let Qe=0,en=Ze.length;Qe<en;++Qe)Ge[Ze[Qe].getKey()]=!0}return Ge},{});super.expireCache(e,t),this.sourceTileCache.expireCache(Oe)}getSourceTiles(e,t,ke){if(ke.getState()===TileState.IDLE){ke.setState(TileState.LOADING);const Oe=ke.wrappedTileCoord,Ge=this.getTileGridForProjection(t),Be=Ge.getTileCoordExtent(Oe),je=Oe[0],Ve=Ge.getResolution(je);buffer(Be,-Ve,Be);const Ze=this.tileGrid,Qe=Ze.getExtent();Qe&&getIntersection(Be,Qe,Be);const en=Ze.getZForResolution(Ve,this.zDirection);Ze.forEachTileCoord(Be,en,tn=>{const an=this.tileUrlFunction(tn,e,t),cn=this.sourceTileCache.containsKey(an)?this.sourceTileCache.get(an):new this.tileClass(tn,an?TileState.IDLE:TileState.EMPTY,an,this.format_,this.tileLoadFunction);ke.sourceTiles.push(cn);const dn=cn.getState();if(dn<TileState.LOADED){const hn=fn=>{this.handleTileChange(fn);const pn=cn.getState();if(pn===TileState.LOADED||pn===TileState.ERROR){const mn=cn.getKey();mn in ke.errorTileKeys?cn.getState()===TileState.LOADED&&delete ke.errorTileKeys[mn]:ke.loadingSourceTiles--,pn===TileState.ERROR?ke.errorTileKeys[mn]=!0:cn.removeEventListener(EventType.CHANGE,hn),ke.loadingSourceTiles===0&&ke.setState(isEmpty$1(ke.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};cn.addEventListener(EventType.CHANGE,hn),ke.loadingSourceTiles++}dn===TileState.IDLE&&(cn.extent=Ze.getTileCoordExtent(tn),cn.projection=t,cn.resolution=Ze.getResolution(tn[0]),this.sourceTileCache.set(an,cn),cn.load())}),ke.loadingSourceTiles||ke.setState(ke.sourceTiles.some(tn=>tn.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return ke.sourceTiles}getTile(e,t,ke,Oe,Ge){const Be=getKeyZXY(e,t,ke),je=this.getKey();let Ve;if(this.tileCache.containsKey(Be)&&(Ve=this.tileCache.get(Be),Ve.key===je))return Ve;const Ze=[e,t,ke];let Qe=this.getTileCoordForTileUrlFunction(Ze,Ge);const en=this.getTileGrid().getExtent(),tn=this.getTileGridForProjection(Ge);if(Qe&&en){const dn=tn.getTileCoordExtent(Qe);buffer(dn,-tn.getResolution(e),dn),intersects$1(en,dn)||(Qe=null)}let an=!0;if(Qe!==null){const dn=this.tileGrid,hn=tn.getResolution(e),fn=dn.getZForResolution(hn,1),pn=tn.getTileCoordExtent(Qe);buffer(pn,-hn,pn),dn.forEachTileCoord(pn,fn,mn=>{an=an&&!this.tileUrlFunction(mn,Oe,Ge)})}const cn=new VectorRenderTile(Ze,an?TileState.EMPTY:TileState.IDLE,Qe,this.getSourceTiles.bind(this,Oe,Ge));return cn.key=je,Ve?(cn.interimTile=Ve,cn.refreshInterimChain(),this.tileCache.replace(Be,cn)):this.tileCache.set(Be,cn),cn}getTileGridForProjection(e){const t=e.getCode();let ke=this.tileGrids_[t];if(!ke){const Oe=this.tileGrid,Ge=Oe.getResolutions().slice(),Be=Ge.map(function(Ze,Qe){return Oe.getOrigin(Qe)}),je=Ge.map(function(Ze,Qe){return Oe.getTileSize(Qe)}),Ve=DEFAULT_MAX_ZOOM+1;for(let Ze=Ge.length;Ze<Ve;++Ze)Ge.push(Ge[Ze-1]/2),Be.push(Be[Ze-1]),je.push(je[Ze-1]);ke=new TileGrid({extent:Oe.getExtent(),origins:Be,resolutions:Ge,tileSizes:je}),this.tileGrids_[t]=ke}return ke}getTilePixelRatio(e){return e}getTilePixelSize(e,t,ke){const Oe=this.getTileGridForProjection(ke),Ge=toSize(Oe.getTileSize(e),this.tmpSize);return[Math.round(Ge[0]*t),Math.round(Ge[1]*t)]}updateCacheSize(e,t){super.updateCacheSize(e*2,t),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(t).highWaterMark}}function defaultLoadFunction(r,e){r.setLoader(function(t,ke,Oe){loadFeaturesXhr(e,r.getFormat(),t,ke,Oe,r.onLoad.bind(r),r.onError.bind(r))})}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$2={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,t,ke){super(e),this.element=t,this.index=ke}}class Collection extends BaseObject{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let ke=0,Oe=this.array_.length;ke<Oe;++ke)this.assertUnique_(this.array_[ke],ke);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,ke=e.length;t<ke;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let ke=0,Oe=t.length;ke<Oe;++ke)e(t[ke],ke,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$2.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let ke=0,Oe=t.length;ke<Oe;++ke)if(t[ke]===e)return this.removeAt(ke)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,t,e)),t}setAt(e,t){const ke=this.getLength();if(e>=ke){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const Oe=this.array_[e];this.array_[e]=t,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,Oe,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}updateLength_(){this.set(Property$2.LENGTH,this.array_.length)}assertUnique_(e,t){for(let ke=0,Oe=this.array_.length;ke<Oe;++ke)if(this.array_[ke]===e&&ke!==t)throw new Error("Duplicate item added to a unique collection")}}function quickselect(r,e,t,ke,Oe){quickselectStep(r,e,t||0,ke||r.length-1,Oe||defaultCompare)}function quickselectStep(r,e,t,ke,Oe){for(;ke>t;){if(ke-t>600){var Ge=ke-t+1,Be=e-t+1,je=Math.log(Ge),Ve=.5*Math.exp(2*je/3),Ze=.5*Math.sqrt(je*Ve*(Ge-Ve)/Ge)*(Be-Ge/2<0?-1:1),Qe=Math.max(t,Math.floor(e-Be*Ve/Ge+Ze)),en=Math.min(ke,Math.floor(e+(Ge-Be)*Ve/Ge+Ze));quickselectStep(r,e,Qe,en,Oe)}var tn=r[e],an=t,cn=ke;for(swap(r,t,e),Oe(r[ke],tn)>0&&swap(r,t,ke);an<cn;){for(swap(r,an,cn),an++,cn--;Oe(r[an],tn)<0;)an++;for(;Oe(r[cn],tn)>0;)cn--}Oe(r[t],tn)===0?swap(r,t,cn):(cn++,swap(r,cn,ke)),cn<=e&&(t=cn+1),e<=cn&&(ke=cn-1)}}function swap(r,e,t){var ke=r[e];r[e]=r[t],r[t]=ke}function defaultCompare(r,e){return r<e?-1:r>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const ke=[];if(!intersects(e,t))return ke;const Oe=this.toBBox,Ge=[];for(;t;){for(let Be=0;Be<t.children.length;Be++){const je=t.children[Be],Ve=t.leaf?Oe(je):je;intersects(e,Ve)&&(t.leaf?ke.push(je):contains(e,Ve)?this._all(je,ke):Ge.push(je))}t=Ge.pop()}return ke}collides(e){let t=this.data;if(!intersects(e,t))return!1;const ke=[];for(;t;){for(let Oe=0;Oe<t.children.length;Oe++){const Ge=t.children[Oe],Be=t.leaf?this.toBBox(Ge):Ge;if(intersects(e,Be)){if(t.leaf||contains(e,Be))return!0;ke.push(Ge)}}t=ke.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let ke=0;ke<e.length;ke++)this.insert(e[ke]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const ke=this.data;this.data=t,t=ke}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,t){if(!e)return this;let ke=this.data;const Oe=this.toBBox(e),Ge=[],Be=[];let je,Ve,Ze;for(;ke||Ge.length;){if(ke||(ke=Ge.pop(),Ve=Ge[Ge.length-1],je=Be.pop(),Ze=!0),ke.leaf){const Qe=findItem(e,ke.children,t);if(Qe!==-1)return ke.children.splice(Qe,1),Ge.push(ke),this._condense(Ge),this}!Ze&&!ke.leaf&&contains(ke,Oe)?(Ge.push(ke),Be.push(je),je=0,Ve=ke,ke=ke.children[0]):Ve?(je++,ke=Ve.children[je],Ze=!1):ke=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const ke=[];for(;e;)e.leaf?t.push(...e.children):ke.push(...e.children),e=ke.pop();return t}_build(e,t,ke,Oe){const Ge=ke-t+1;let Be=this._maxEntries,je;if(Ge<=Be)return je=createNode(e.slice(t,ke+1)),calcBBox(je,this.toBBox),je;Oe||(Oe=Math.ceil(Math.log(Ge)/Math.log(Be)),Be=Math.ceil(Ge/Math.pow(Be,Oe-1))),je=createNode([]),je.leaf=!1,je.height=Oe;const Ve=Math.ceil(Ge/Be),Ze=Ve*Math.ceil(Math.sqrt(Be));multiSelect(e,t,ke,Ze,this.compareMinX);for(let Qe=t;Qe<=ke;Qe+=Ze){const en=Math.min(Qe+Ze-1,ke);multiSelect(e,Qe,en,Ve,this.compareMinY);for(let tn=Qe;tn<=en;tn+=Ve){const an=Math.min(tn+Ve-1,en);je.children.push(this._build(e,tn,an,Oe-1))}}return calcBBox(je,this.toBBox),je}_chooseSubtree(e,t,ke,Oe){for(;Oe.push(t),!(t.leaf||Oe.length-1===ke);){let Ge=1/0,Be=1/0,je;for(let Ve=0;Ve<t.children.length;Ve++){const Ze=t.children[Ve],Qe=bboxArea(Ze),en=enlargedArea(e,Ze)-Qe;en<Be?(Be=en,Ge=Qe<Ge?Qe:Ge,je=Ze):en===Be&&Qe<Ge&&(Ge=Qe,je=Ze)}t=je||t.children[0]}return t}_insert(e,t,ke){const Oe=ke?e:this.toBBox(e),Ge=[],Be=this._chooseSubtree(Oe,this.data,t,Ge);for(Be.children.push(e),extend$2(Be,Oe);t>=0&&Ge[t].children.length>this._maxEntries;)this._split(Ge,t),t--;this._adjustParentBBoxes(Oe,Ge,t)}_split(e,t){const ke=e[t],Oe=ke.children.length,Ge=this._minEntries;this._chooseSplitAxis(ke,Ge,Oe);const Be=this._chooseSplitIndex(ke,Ge,Oe),je=createNode(ke.children.splice(Be,ke.children.length-Be));je.height=ke.height,je.leaf=ke.leaf,calcBBox(ke,this.toBBox),calcBBox(je,this.toBBox),t?e[t-1].children.push(je):this._splitRoot(ke,je)}_splitRoot(e,t){this.data=createNode([e,t]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,t,ke){let Oe,Ge=1/0,Be=1/0;for(let je=t;je<=ke-t;je++){const Ve=distBBox(e,0,je,this.toBBox),Ze=distBBox(e,je,ke,this.toBBox),Qe=intersectionArea(Ve,Ze),en=bboxArea(Ve)+bboxArea(Ze);Qe<Ge?(Ge=Qe,Oe=je,Be=en<Be?en:Be):Qe===Ge&&en<Be&&(Be=en,Oe=je)}return Oe||ke-t}_chooseSplitAxis(e,t,ke){const Oe=e.leaf?this.compareMinX:compareNodeMinX,Ge=e.leaf?this.compareMinY:compareNodeMinY,Be=this._allDistMargin(e,t,ke,Oe),je=this._allDistMargin(e,t,ke,Ge);Be<je&&e.children.sort(Oe)}_allDistMargin(e,t,ke,Oe){e.children.sort(Oe);const Ge=this.toBBox,Be=distBBox(e,0,t,Ge),je=distBBox(e,ke-t,ke,Ge);let Ve=bboxMargin(Be)+bboxMargin(je);for(let Ze=t;Ze<ke-t;Ze++){const Qe=e.children[Ze];extend$2(Be,e.leaf?Ge(Qe):Qe),Ve+=bboxMargin(Be)}for(let Ze=ke-t-1;Ze>=t;Ze--){const Qe=e.children[Ze];extend$2(je,e.leaf?Ge(Qe):Qe),Ve+=bboxMargin(je)}return Ve}_adjustParentBBoxes(e,t,ke){for(let Oe=ke;Oe>=0;Oe--)extend$2(t[Oe],e)}_condense(e){for(let t=e.length-1,ke;t>=0;t--)e[t].children.length===0?t>0?(ke=e[t-1].children,ke.splice(ke.indexOf(e[t]),1)):this.clear():calcBBox(e[t],this.toBBox)}};function findItem(r,e,t){if(!t)return e.indexOf(r);for(let ke=0;ke<e.length;ke++)if(t(r,e[ke]))return ke;return-1}function calcBBox(r,e){distBBox(r,0,r.children.length,e,r)}function distBBox(r,e,t,ke,Oe){Oe||(Oe=createNode(null)),Oe.minX=1/0,Oe.minY=1/0,Oe.maxX=-1/0,Oe.maxY=-1/0;for(let Ge=e;Ge<t;Ge++){const Be=r.children[Ge];extend$2(Oe,r.leaf?ke(Be):Be)}return Oe}function extend$2(r,e){return r.minX=Math.min(r.minX,e.minX),r.minY=Math.min(r.minY,e.minY),r.maxX=Math.max(r.maxX,e.maxX),r.maxY=Math.max(r.maxY,e.maxY),r}function compareNodeMinX(r,e){return r.minX-e.minX}function compareNodeMinY(r,e){return r.minY-e.minY}function bboxArea(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function bboxMargin(r){return r.maxX-r.minX+(r.maxY-r.minY)}function enlargedArea(r,e){return(Math.max(e.maxX,r.maxX)-Math.min(e.minX,r.minX))*(Math.max(e.maxY,r.maxY)-Math.min(e.minY,r.minY))}function intersectionArea(r,e){const t=Math.max(r.minX,e.minX),ke=Math.max(r.minY,e.minY),Oe=Math.min(r.maxX,e.maxX),Ge=Math.min(r.maxY,e.maxY);return Math.max(0,Oe-t)*Math.max(0,Ge-ke)}function contains(r,e){return r.minX<=e.minX&&r.minY<=e.minY&&e.maxX<=r.maxX&&e.maxY<=r.maxY}function intersects(r,e){return e.minX<=r.maxX&&e.minY<=r.maxY&&e.maxX>=r.minX&&e.maxY>=r.minY}function createNode(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(r,e,t,ke,Oe){const Ge=[e,t];for(;Ge.length;){if(t=Ge.pop(),e=Ge.pop(),t-e<=ke)continue;const Be=e+Math.ceil((t-e)/ke/2)*ke;quickselect(r,Be,e,t,Oe),Ge.push(e,Be,Be,t)}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,t){const ke={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(ke),this.items_[getUid(t)]=ke}load(e,t){const ke=new Array(t.length);for(let Oe=0,Ge=t.length;Oe<Ge;Oe++){const Be=e[Oe],je=t[Oe],Ve={minX:Be[0],minY:Be[1],maxX:Be[2],maxY:Be[3],value:je};ke[Oe]=Ve,this.items_[getUid(je)]=Ve}this.rbush_.load(ke)}remove(e){const t=getUid(e),ke=this.items_[t];return delete this.items_[t],this.rbush_.remove(ke)!==null}update(e,t){const ke=this.items_[getUid(t)],Oe=[ke.minX,ke.minY,ke.maxX,ke.maxY];equals$1(Oe,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(Oe){return Oe.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let ke;for(let Oe=0,Ge=e.length;Oe<Ge;Oe++)if(ke=t(e[Oe]),ke)return ke;return ke}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return createOrUpdate$2(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const ke=this.getStyle();return ke&&e.setStyle(ke),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(r){if(typeof r=="function")return r;let e;return Array.isArray(r)?e=r:(assert(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[r]),function(){return e}}const tmp_=new Array(6);function create(){return[1,0,0,1,0,0]}function reset(r){return set(r,1,0,0,1,0,0)}function multiply(r,e){const t=r[0],ke=r[1],Oe=r[2],Ge=r[3],Be=r[4],je=r[5],Ve=e[0],Ze=e[1],Qe=e[2],en=e[3],tn=e[4],an=e[5];return r[0]=t*Ve+Oe*Ze,r[1]=ke*Ve+Ge*Ze,r[2]=t*Qe+Oe*en,r[3]=ke*Qe+Ge*en,r[4]=t*tn+Oe*an+Be,r[5]=ke*tn+Ge*an+je,r}function set(r,e,t,ke,Oe,Ge,Be){return r[0]=e,r[1]=t,r[2]=ke,r[3]=Oe,r[4]=Ge,r[5]=Be,r}function setFromArray(r,e){return r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=e[3],r[4]=e[4],r[5]=e[5],r}function apply(r,e){const t=e[0],ke=e[1];return e[0]=r[0]*t+r[2]*ke+r[4],e[1]=r[1]*t+r[3]*ke+r[5],e}function scale$1(r,e,t){return multiply(r,set(tmp_,e,0,0,t,0,0))}function makeScale(r,e,t){return set(r,e,0,0,t,0,0)}function translate$1(r,e,t){return multiply(r,set(tmp_,1,0,0,1,e,t))}function compose(r,e,t,ke,Oe,Ge,Be,je){const Ve=Math.sin(Ge),Ze=Math.cos(Ge);return r[0]=ke*Ze,r[1]=Oe*Ve,r[2]=-ke*Ve,r[3]=Oe*Ze,r[4]=Be*ke*Ze-je*ke*Ve+e,r[5]=Be*Oe*Ve+je*Oe*Ze+t,r}function makeInverse(r,e){const t=determinant(e);assert(t!==0,"Transformation matrix cannot be inverted");const ke=e[0],Oe=e[1],Ge=e[2],Be=e[3],je=e[4],Ve=e[5];return r[0]=Be/t,r[1]=-Oe/t,r[2]=-Ge/t,r[3]=ke/t,r[4]=(Ge*Ve-Be*je)/t,r[5]=-(ke*Ve-Oe*je)/t,r}function determinant(r){return r[0]*r[3]-r[1]*r[2]}let transformStringDiv;function toString$3(r){const e="matrix("+r.join(", ")+")";if(WORKER_OFFSCREEN_CANVAS)return e;const t=transformStringDiv||(transformStringDiv=document.createElement("div"));return t.style.transform=e,t.style.transform}function transform2D(r,e,t,ke,Oe,Ge){Ge=Ge||[];let Be=0;for(let je=e;je<t;je+=ke){const Ve=r[je],Ze=r[je+1];Ge[Be++]=Oe[0]*Ve+Oe[2]*Ze+Oe[4],Ge[Be++]=Oe[1]*Ve+Oe[3]*Ze+Oe[5]}return Ge&&Ge.length!=Be&&(Ge.length=Be),Ge}function rotate(r,e,t,ke,Oe,Ge,Be){Be=Be||[];const je=Math.cos(Oe),Ve=Math.sin(Oe),Ze=Ge[0],Qe=Ge[1];let en=0;for(let tn=e;tn<t;tn+=ke){const an=r[tn]-Ze,cn=r[tn+1]-Qe;Be[en++]=Ze+an*je-cn*Ve,Be[en++]=Qe+an*Ve+cn*je;for(let dn=tn+2;dn<tn+ke;++dn)Be[en++]=r[dn]}return Be&&Be.length!=en&&(Be.length=en),Be}function scale(r,e,t,ke,Oe,Ge,Be,je){je=je||[];const Ve=Be[0],Ze=Be[1];let Qe=0;for(let en=e;en<t;en+=ke){const tn=r[en]-Ve,an=r[en+1]-Ze;je[Qe++]=Ve+Oe*tn,je[Qe++]=Ze+Ge*an;for(let cn=en+2;cn<en+ke;++cn)je[Qe++]=r[cn]}return je&&je.length!=Qe&&(je.length=Qe),je}function translate(r,e,t,ke,Oe,Ge,Be){Be=Be||[];let je=0;for(let Ve=e;Ve<t;Ve+=ke){Be[je++]=r[Ve]+Oe,Be[je++]=r[Ve+1]+Ge;for(let Ze=Ve+2;Ze<Ve+ke;++Ze)Be[je++]=r[Ze]}return Be&&Be.length!=je&&(Be.length=je),Be}const tmpTransform$1=create();class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,t,ke)=>{if(!ke)return this.getSimplifiedGeometry(t);const Oe=this.clone();return Oe.applyTransform(ke),Oe.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return abstract()}closestPointXY(e,t,ke,Oe){return abstract()}containsXY(e,t){const ke=this.getClosestPoint([e,t]);return ke[0]===e&&ke[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&createOrUpdateEmpty(t),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,t){abstract()}scale(e,t,ke){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,t){abstract()}transform(e,t){const ke=get$3(e),Oe=ke.getUnits()=="tile-pixels"?function(Ge,Be,je){const Ve=ke.getExtent(),Ze=ke.getWorldExtent(),Qe=getHeight(Ze)/getHeight(Ve);return compose(tmpTransform$1,Ze[0],Ze[3],Qe,-Qe,0,0,0),transform2D(Ge,0,Ge.length,je,tmpTransform$1,Be),getTransform(ke,t)(Ge,Be,je)}:getTransform(ke,t);return this.applyTransform(Oe),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){abstract()}setLayout(e,t,ke){let Oe;if(e)Oe=getStrideForLayout(e);else{for(let Ge=0;Ge<ke;++Ge){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}Oe=t.length,e=getLayoutForStride(Oe)}this.layout=e,this.stride=Oe}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(e,t){const ke=this.getFlatCoordinates();if(ke){const Oe=this.getStride();rotate(ke,0,ke.length,Oe,e,t,ke),this.changed()}}scale(e,t,ke){t===void 0&&(t=e),ke||(ke=getCenter(this.getExtent()));const Oe=this.getFlatCoordinates();if(Oe){const Ge=this.getStride();scale(Oe,0,Oe.length,Ge,e,t,ke,Oe),this.changed()}}translate(e,t){const ke=this.getFlatCoordinates();if(ke){const Oe=this.getStride();translate(ke,0,ke.length,Oe,e,t,ke),this.changed()}}}function getLayoutForStride(r){let e;return r==2?e="XY":r==3?e="XYZ":r==4&&(e="XYZM"),e}function getStrideForLayout(r){let e;return r=="XY"?e=2:r=="XYZ"||r=="XYM"?e=3:r=="XYZM"&&(e=4),e}function transformGeom2D(r,e,t){const ke=r.getFlatCoordinates();if(!ke)return null;const Oe=r.getStride();return transform2D(ke,0,ke.length,Oe,e,t)}function deflateCoordinate(r,e,t,ke){for(let Oe=0,Ge=t.length;Oe<Ge;++Oe)r[e++]=t[Oe];return e}function deflateCoordinates(r,e,t,ke){for(let Oe=0,Ge=t.length;Oe<Ge;++Oe){const Be=t[Oe];for(let je=0;je<ke;++je)r[e++]=Be[je]}return e}function deflateCoordinatesArray(r,e,t,ke,Oe){Oe=Oe||[];let Ge=0;for(let Be=0,je=t.length;Be<je;++Be){const Ve=deflateCoordinates(r,e,t[Be],ke);Oe[Ge++]=Ve,e=Ve}return Oe.length=Ge,Oe}function deflateMultiCoordinatesArray(r,e,t,ke,Oe){Oe=Oe||[];let Ge=0;for(let Be=0,je=t.length;Be<je;++Be){const Ve=deflateCoordinatesArray(r,e,t[Be],ke,Oe[Ge]);Ve.length===0&&(Ve[0]=e),Oe[Ge++]=Ve,e=Ve[Ve.length-1]}return Oe.length=Ge,Oe}class Circle extends SimpleGeometry{constructor(e,t,ke){super(),ke!==void 0&&t===void 0?this.setFlatCoordinates(ke,e):(t=t||0,this.setCenterAndRadius(e,t,ke))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,ke,Oe){const Ge=this.flatCoordinates,Be=e-Ge[0],je=t-Ge[1],Ve=Be*Be+je*je;if(Ve<Oe){if(Ve===0)for(let Ze=0;Ze<this.stride;++Ze)ke[Ze]=Ge[Ze];else{const Ze=this.getRadius()/Math.sqrt(Ve);ke[0]=Ge[0]+Ze*Be,ke[1]=Ge[1]+Ze*je;for(let Qe=2;Qe<this.stride;++Qe)ke[Qe]=Ge[Qe]}return ke.length=this.stride,Ve}return Oe}containsXY(e,t){const ke=this.flatCoordinates,Oe=e-ke[0],Ge=t-ke[1];return Oe*Oe+Ge*Ge<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,ke=t[this.stride]-t[0];return createOrUpdate$2(t[0]-ke,t[1]-ke,t[0]+ke,t[1]+ke,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(intersects$1(e,t)){const ke=this.getCenter();return e[0]<=ke[0]&&e[2]>=ke[0]||e[1]<=ke[1]&&e[3]>=ke[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,ke=this.flatCoordinates[t]-this.flatCoordinates[0],Oe=e.slice();Oe[t]=Oe[0]+ke;for(let Ge=1;Ge<t;++Ge)Oe[t+Ge]=e[Ge];this.setFlatCoordinates(this.layout,Oe),this.changed()}setCenterAndRadius(e,t,ke){this.setLayout(ke,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const Oe=this.flatCoordinates;let Ge=deflateCoordinate(Oe,0,e,this.stride);Oe[Ge++]=Oe[0]+t;for(let Be=1,je=this.stride;Be<je;++Be)Oe[Ge++]=Oe[Be];Oe.length=Ge,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const ke=this.getCenter(),Oe=this.getStride();this.setCenter(rotate(ke,0,ke.length,Oe,e,t,ke)),this.changed()}}Circle.prototype.transform;class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let e=0,t=this.geometries_.length;e<t;++e)this.changeEventsKeys_.push(listen(this.geometries_[e],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(null);return e.setGeometries(this.geometries_),e.applyProperties(this),e}closestPointXY(e,t,ke,Oe){if(Oe<closestSquaredDistanceXY(this.getExtent(),e,t))return Oe;const Ge=this.geometries_;for(let Be=0,je=Ge.length;Be<je;++Be)Oe=Ge[Be].closestPointXY(e,t,ke,Oe);return Oe}containsXY(e,t){const ke=this.geometries_;for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe)if(ke[Oe].containsXY(e,t))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const t=this.geometries_;for(let ke=0,Oe=t.length;ke<Oe;++ke)extend$3(e,t[ke].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let ke=0,Oe=t.length;ke<Oe;++ke)t[ke].getType()===this.getType()?e=e.concat(t[ke].getGeometriesArrayRecursive()):e.push(t[ke]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],ke=this.geometries_;let Oe=!1;for(let Ge=0,Be=ke.length;Ge<Be;++Ge){const je=ke[Ge],Ve=je.getSimplifiedGeometry(e);t.push(Ve),Ve!==je&&(Oe=!0)}if(Oe){const Ge=new GeometryCollection(null);return Ge.setGeometriesArray(t),Ge}return this.simplifiedGeometryMaxMinSquaredTolerance=e,this}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let ke=0,Oe=t.length;ke<Oe;++ke)if(t[ke].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const ke=this.geometries_;for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe)ke[Oe].rotate(e,t);this.changed()}scale(e,t,ke){ke||(ke=getCenter(this.getExtent()));const Oe=this.geometries_;for(let Ge=0,Be=Oe.length;Ge<Be;++Ge)Oe[Ge].scale(e,t,ke);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let ke=0,Oe=t.length;ke<Oe;++ke)t[ke].applyTransform(e);this.changed()}translate(e,t){const ke=this.geometries_;for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe)ke[Oe].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(r){const e=[];for(let t=0,ke=r.length;t<ke;++t)e.push(r[t].clone());return e}function assignClosest(r,e,t,ke,Oe,Ge,Be){const je=r[e],Ve=r[e+1],Ze=r[t]-je,Qe=r[t+1]-Ve;let en;if(Ze===0&&Qe===0)en=e;else{const tn=((Oe-je)*Ze+(Ge-Ve)*Qe)/(Ze*Ze+Qe*Qe);if(tn>1)en=t;else if(tn>0){for(let an=0;an<ke;++an)Be[an]=lerp(r[e+an],r[t+an],tn);Be.length=ke;return}else en=e}for(let tn=0;tn<ke;++tn)Be[tn]=r[en+tn];Be.length=ke}function maxSquaredDelta(r,e,t,ke,Oe){let Ge=r[e],Be=r[e+1];for(e+=ke;e<t;e+=ke){const je=r[e],Ve=r[e+1],Ze=squaredDistance$1(Ge,Be,je,Ve);Ze>Oe&&(Oe=Ze),Ge=je,Be=Ve}return Oe}function arrayMaxSquaredDelta(r,e,t,ke,Oe){for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=t[Ge];Oe=maxSquaredDelta(r,e,je,ke,Oe),e=je}return Oe}function multiArrayMaxSquaredDelta(r,e,t,ke,Oe){for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=t[Ge];Oe=arrayMaxSquaredDelta(r,e,je,ke,Oe),e=je[je.length-1]}return Oe}function assignClosestPoint(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe){if(e==t)return Ze;let en,tn;if(Oe===0){if(tn=squaredDistance$1(Be,je,r[e],r[e+1]),tn<Ze){for(en=0;en<ke;++en)Ve[en]=r[e+en];return Ve.length=ke,tn}return Ze}Qe=Qe||[NaN,NaN];let an=e+ke;for(;an<t;)if(assignClosest(r,an-ke,an,ke,Be,je,Qe),tn=squaredDistance$1(Be,je,Qe[0],Qe[1]),tn<Ze){for(Ze=tn,en=0;en<ke;++en)Ve[en]=Qe[en];Ve.length=ke,an+=ke}else an+=ke*Math.max((Math.sqrt(tn)-Math.sqrt(Ze))/Oe|0,1);if(Ge&&(assignClosest(r,t-ke,e,ke,Be,je,Qe),tn=squaredDistance$1(Be,je,Qe[0],Qe[1]),tn<Ze)){for(Ze=tn,en=0;en<ke;++en)Ve[en]=Qe[en];Ve.length=ke}return Ze}function assignClosestArrayPoint(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe){Qe=Qe||[NaN,NaN];for(let en=0,tn=t.length;en<tn;++en){const an=t[en];Ze=assignClosestPoint(r,e,an,ke,Oe,Ge,Be,je,Ve,Ze,Qe),e=an}return Ze}function assignClosestMultiArrayPoint(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe){Qe=Qe||[NaN,NaN];for(let en=0,tn=t.length;en<tn;++en){const an=t[en];Ze=assignClosestArrayPoint(r,e,an,ke,Oe,Ge,Be,je,Ve,Ze,Qe),e=an[an.length-1]}return Ze}function douglasPeucker(r,e,t,ke,Oe,Ge,Be){const je=(t-e)/ke;if(je<3){for(;e<t;e+=ke)Ge[Be++]=r[e],Ge[Be++]=r[e+1];return Be}const Ve=new Array(je);Ve[0]=1,Ve[je-1]=1;const Ze=[e,t-ke];let Qe=0;for(;Ze.length>0;){const en=Ze.pop(),tn=Ze.pop();let an=0;const cn=r[tn],dn=r[tn+1],hn=r[en],fn=r[en+1];for(let pn=tn+ke;pn<en;pn+=ke){const mn=r[pn],yn=r[pn+1],Cn=squaredSegmentDistance(mn,yn,cn,dn,hn,fn);Cn>an&&(Qe=pn,an=Cn)}an>Oe&&(Ve[(Qe-e)/ke]=1,tn+ke<Qe&&Ze.push(tn,Qe),Qe+ke<en&&Ze.push(Qe,en))}for(let en=0;en<je;++en)Ve[en]&&(Ge[Be++]=r[e+en*ke],Ge[Be++]=r[e+en*ke+1]);return Be}function douglasPeuckerArray(r,e,t,ke,Oe,Ge,Be,je){for(let Ve=0,Ze=t.length;Ve<Ze;++Ve){const Qe=t[Ve];Be=douglasPeucker(r,e,Qe,ke,Oe,Ge,Be),je.push(Be),e=Qe}return Be}function snap(r,e){return e*Math.round(r/e)}function quantize(r,e,t,ke,Oe,Ge,Be){if(e==t)return Be;let je=snap(r[e],Oe),Ve=snap(r[e+1],Oe);e+=ke,Ge[Be++]=je,Ge[Be++]=Ve;let Ze,Qe;do if(Ze=snap(r[e],Oe),Qe=snap(r[e+1],Oe),e+=ke,e==t)return Ge[Be++]=Ze,Ge[Be++]=Qe,Be;while(Ze==je&&Qe==Ve);for(;e<t;){const en=snap(r[e],Oe),tn=snap(r[e+1],Oe);if(e+=ke,en==Ze&&tn==Qe)continue;const an=Ze-je,cn=Qe-Ve,dn=en-je,hn=tn-Ve;if(an*hn==cn*dn&&(an<0&&dn<an||an==dn||an>0&&dn>an)&&(cn<0&&hn<cn||cn==hn||cn>0&&hn>cn)){Ze=en,Qe=tn;continue}Ge[Be++]=Ze,Ge[Be++]=Qe,je=Ze,Ve=Qe,Ze=en,Qe=tn}return Ge[Be++]=Ze,Ge[Be++]=Qe,Be}function quantizeArray(r,e,t,ke,Oe,Ge,Be,je){for(let Ve=0,Ze=t.length;Ve<Ze;++Ve){const Qe=t[Ve];Be=quantize(r,e,Qe,ke,Oe,Ge,Be),je.push(Be),e=Qe}return Be}function quantizeMultiArray(r,e,t,ke,Oe,Ge,Be,je){for(let Ve=0,Ze=t.length;Ve<Ze;++Ve){const Qe=t[Ve],en=[];Be=quantizeArray(r,e,Qe,ke,Oe,Ge,Be,en),je.push(en),e=Qe[Qe.length-1]}return Be}function inflateCoordinates(r,e,t,ke,Oe){Oe=Oe!==void 0?Oe:[];let Ge=0;for(let Be=e;Be<t;Be+=ke)Oe[Ge++]=r.slice(Be,Be+ke);return Oe.length=Ge,Oe}function inflateCoordinatesArray(r,e,t,ke,Oe){Oe=Oe!==void 0?Oe:[];let Ge=0;for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];Oe[Ge++]=inflateCoordinates(r,e,Ve,ke,Oe[Ge]),e=Ve}return Oe.length=Ge,Oe}function inflateMultiCoordinatesArray(r,e,t,ke,Oe){Oe=Oe!==void 0?Oe:[];let Ge=0;for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];Oe[Ge++]=Ve.length===1&&Ve[0]===e?[]:inflateCoordinatesArray(r,e,Ve,ke,Oe[Ge]),e=Ve[Ve.length-1]}return Oe.length=Ge,Oe}function linearRing(r,e,t,ke){let Oe=0,Ge=r[t-ke],Be=r[t-ke+1];for(;e<t;e+=ke){const je=r[e],Ve=r[e+1];Oe+=Be*je-Ge*Ve,Ge=je,Be=Ve}return Oe/2}function linearRings(r,e,t,ke){let Oe=0;for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=t[Ge];Oe+=linearRing(r,e,je,ke),e=je}return Oe}function linearRingss$1(r,e,t,ke){let Oe=0;for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=t[Ge];Oe+=linearRings(r,e,je,ke),e=je[je.length-1]}return Oe}class LinearRing extends SimpleGeometry{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,ke,Oe){return Oe<closestSquaredDistanceXY(this.getExtent(),e,t)?Oe:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,ke,Oe))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LinearRing(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function interpolatePoint(r,e,t,ke,Oe,Ge,Be){let je,Ve;const Ze=(t-e)/ke;if(Ze===1)je=e;else if(Ze===2)je=e,Ve=Oe;else if(Ze!==0){let Qe=r[e],en=r[e+1],tn=0;const an=[0];for(let hn=e+ke;hn<t;hn+=ke){const fn=r[hn],pn=r[hn+1];tn+=Math.sqrt((fn-Qe)*(fn-Qe)+(pn-en)*(pn-en)),an.push(tn),Qe=fn,en=pn}const cn=Oe*tn,dn=binarySearch$1(an,cn);dn<0?(Ve=(cn-an[-dn-2])/(an[-dn-1]-an[-dn-2]),je=e+(-dn-2)*ke):je=e+dn*ke}Be=Be>1?Be:2,Ge=Ge||new Array(Be);for(let Qe=0;Qe<Be;++Qe)Ge[Qe]=je===void 0?NaN:Ve===void 0?r[je+Qe]:lerp(r[je+Qe],r[je+ke+Qe],Ve);return Ge}function lineStringCoordinateAtM(r,e,t,ke,Oe,Ge){if(t==e)return null;let Be;if(Oe<r[e+ke-1])return Ge?(Be=r.slice(e,e+ke),Be[ke-1]=Oe,Be):null;if(r[t-1]<Oe)return Ge?(Be=r.slice(t-ke,t),Be[ke-1]=Oe,Be):null;if(Oe==r[e+ke-1])return r.slice(e,e+ke);let je=e/ke,Ve=t/ke;for(;je<Ve;){const tn=je+Ve>>1;Oe<r[(tn+1)*ke-1]?Ve=tn:je=tn+1}const Ze=r[je*ke-1];if(Oe==Ze)return r.slice((je-1)*ke,(je-1)*ke+ke);const Qe=r[(je+1)*ke-1],en=(Oe-Ze)/(Qe-Ze);Be=[];for(let tn=0;tn<ke-1;++tn)Be.push(lerp(r[(je-1)*ke+tn],r[je*ke+tn],en));return Be.push(Oe),Be}function lineStringsCoordinateAtM(r,e,t,ke,Oe,Ge,Be){if(Be)return lineStringCoordinateAtM(r,e,t[t.length-1],ke,Oe,Ge);let je;if(Oe<r[ke-1])return Ge?(je=r.slice(0,ke),je[ke-1]=Oe,je):null;if(r[r.length-1]<Oe)return Ge?(je=r.slice(r.length-ke),je[ke-1]=Oe,je):null;for(let Ve=0,Ze=t.length;Ve<Ze;++Ve){const Qe=t[Ve];if(e!=Qe){if(Oe<r[e+ke-1])return null;if(Oe<=r[Qe-1])return lineStringCoordinateAtM(r,e,Qe,ke,Oe,!1);e=Qe}}return null}function lineStringLength(r,e,t,ke){let Oe=r[e],Ge=r[e+1],Be=0;for(let je=e+ke;je<t;je+=ke){const Ve=r[je],Ze=r[je+1];Be+=Math.sqrt((Ve-Oe)*(Ve-Oe)+(Ze-Ge)*(Ze-Ge)),Oe=Ve,Ge=Ze}return Be}class LineString extends SimpleGeometry{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,ke,Oe){return Oe<closestSquaredDistanceXY(this.getExtent(),e,t)?Oe:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,ke,Oe))}forEachSegment(e){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LineString(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,t,ke){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&ke)this.setFlatCoordinates(t,e),this.ends_=ke;else{const Oe=e,Ge=[],Be=[];for(let Ve=0,Ze=Oe.length;Ve<Ze;++Ve){const Qe=Oe[Ve];extend$4(Ge,Qe.getFlatCoordinates()),Be.push(Ge.length)}const je=Oe.length===0?this.getLayout():Oe[0].getLayout();this.setFlatCoordinates(je,Ge),this.ends_=Be}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,ke,Oe){return Oe<closestSquaredDistanceXY(this.getExtent(),e,t)?Oe:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,ke,Oe))}getCoordinateAtM(e,t,ke){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,ke=ke!==void 0?ke:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,t,ke))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,ke=this.layout,Oe=[];let Ge=0;for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be],Ze=new LineString(e.slice(Ge,Ve),ke);Oe.push(Ze),Ge=Ve}return Oe}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let ke=0;const Oe=this.ends_,Ge=this.stride;for(let Be=0,je=Oe.length;Be<je;++Be){const Ve=Oe[Be],Ze=interpolatePoint(t,ke,Ve,Ge,.5);extend$4(e,Ze),ke=Ve}return e}getSimplifiedGeometryInternal(e){const t=[],ke=[];return t.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,ke),new MultiLineString(t,"XY",ke)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const ke=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=ke.length===0?0:ke[ke.length-1],this.changed()}}let Point$1=class Nf extends SimpleGeometry{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new Nf(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,ke,Oe){const Ge=this.flatCoordinates,Be=squaredDistance$1(e,t,Ge[0],Ge[1]);if(Be<Oe){const je=this.stride;for(let Ve=0;Ve<je;++Ve)ke[Ve]=Ge[Ve];return ke.length=je,Be}return Oe}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};class MultiPoint extends SimpleGeometry{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,ke,Oe){if(Oe<closestSquaredDistanceXY(this.getExtent(),e,t))return Oe;const Ge=this.flatCoordinates,Be=this.stride;for(let je=0,Ve=Ge.length;je<Ve;je+=Be){const Ze=squaredDistance$1(e,t,Ge[je],Ge[je+1]);if(Ze<Oe){Oe=Ze;for(let Qe=0;Qe<Be;++Qe)ke[Qe]=Ge[je+Qe];ke.length=Be}}return Oe}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,ke=this.stride,Oe=[];for(let Ge=0,Be=e.length;Ge<Be;Ge+=ke){const je=new Point$1(e.slice(Ge,Ge+ke),t);Oe.push(je)}return Oe}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,ke=this.stride;for(let Oe=0,Ge=t.length;Oe<Ge;Oe+=ke){const Be=t[Oe],je=t[Oe+1];if(containsXY(e,Be,je))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function getInteriorPointOfArray(r,e,t,ke,Oe,Ge,Be){let je,Ve,Ze,Qe,en,tn,an;const cn=Oe[Ge+1],dn=[];for(let pn=0,mn=t.length;pn<mn;++pn){const yn=t[pn];for(Qe=r[yn-ke],tn=r[yn-ke+1],je=e;je<yn;je+=ke)en=r[je],an=r[je+1],(cn<=tn&&an<=cn||tn<=cn&&cn<=an)&&(Ze=(cn-tn)/(an-tn)*(en-Qe)+Qe,dn.push(Ze)),Qe=en,tn=an}let hn=NaN,fn=-1/0;for(dn.sort(ascending),Qe=dn[0],je=1,Ve=dn.length;je<Ve;++je){en=dn[je];const pn=Math.abs(en-Qe);pn>fn&&(Ze=(Qe+en)/2,linearRingsContainsXY(r,e,t,ke,Ze,cn)&&(hn=Ze,fn=pn)),Qe=en}return isNaN(hn)&&(hn=Oe[Ge]),Be?(Be.push(hn,cn,fn),Be):[hn,cn,fn]}function getInteriorPointsOfMultiArray(r,e,t,ke,Oe){let Ge=[];for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];Ge=getInteriorPointOfArray(r,e,Ve,ke,Oe,2*Be,Ge),e=Ve[Ve.length-1]}return Ge}function coordinates(r,e,t,ke){for(;e<t-ke;){for(let Oe=0;Oe<ke;++Oe){const Ge=r[e+Oe];r[e+Oe]=r[t-ke+Oe],r[t-ke+Oe]=Ge}e+=ke,t-=ke}}function linearRingIsClockwise(r,e,t,ke){let Oe=0,Ge=r[t-ke],Be=r[t-ke+1];for(;e<t;e+=ke){const je=r[e],Ve=r[e+1];Oe+=(je-Ge)*(Ve+Be),Ge=je,Be=Ve}return Oe===0?void 0:Oe>0}function linearRingsAreOriented(r,e,t,ke,Oe){Oe=Oe!==void 0?Oe:!1;for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=t[Ge],Ve=linearRingIsClockwise(r,e,je,ke);if(Ge===0){if(Oe&&Ve||!Oe&&!Ve)return!1}else if(Oe&&!Ve||!Oe&&Ve)return!1;e=je}return!0}function linearRingssAreOriented(r,e,t,ke,Oe){for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=t[Ge];if(!linearRingsAreOriented(r,e,je,ke,Oe))return!1;je.length&&(e=je[je.length-1])}return!0}function orientLinearRings(r,e,t,ke,Oe){Oe=Oe!==void 0?Oe:!1;for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=t[Ge],Ve=linearRingIsClockwise(r,e,je,ke);(Ge===0?Oe&&Ve||!Oe&&!Ve:Oe&&!Ve||!Oe&&Ve)&&coordinates(r,e,je,ke),e=je}return e}function orientLinearRingsArray(r,e,t,ke,Oe){for(let Ge=0,Be=t.length;Ge<Be;++Ge)e=orientLinearRings(r,e,t[Ge],ke,Oe);return e}function inflateEnds(r,e){const t=[];let ke=0,Oe=0,Ge;for(let Be=0,je=e.length;Be<je;++Be){const Ve=e[Be],Ze=linearRingIsClockwise(r,ke,Ve,2);if(Ge===void 0&&(Ge=Ze),Ze===Ge)t.push(e.slice(Oe,Be+1));else{if(t.length===0)continue;t[t.length-1].push(e[Oe])}Oe=Be+1,ke=Ve}return t}class Polygon extends SimpleGeometry{constructor(e,t,ke){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&ke?(this.setFlatCoordinates(t,e),this.ends_=ke):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,ke,Oe){return Oe<closestSquaredDistanceXY(this.getExtent(),e,t)?Oe:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,ke,Oe))}containsXY(e,t){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,inflateCoordinatesArray(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,ke=this.ends_,Oe=[];let Ge=0;for(let Be=0,je=ke.length;Be<je;++Be){const Ve=ke[Be],Ze=new LinearRing(t.slice(Ge,Ve),e);Oe.push(Ze),Ge=Ve}return Oe}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],ke=[];return t.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,ke),new Polygon(t,"XY",ke)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const ke=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=ke.length===0?0:ke[ke.length-1],this.changed()}}function fromExtent(r){if(isEmpty(r))throw new Error("Cannot create polygon from empty extent");const e=r[0],t=r[1],ke=r[2],Oe=r[3],Ge=[e,t,e,Oe,ke,Oe,ke,t,e,t];return new Polygon(Ge,"XY",[Ge.length])}function linearRingss(r,e,t,ke){const Oe=[];let Ge=createEmpty();for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];Ge=createOrUpdateFromFlatCoordinates(r,e,Ve[0],ke),Oe.push((Ge[0]+Ge[2])/2,(Ge[1]+Ge[3])/2),e=Ve[Ve.length-1]}return Oe}class MultiPolygon extends SimpleGeometry{constructor(e,t,ke){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!ke&&!Array.isArray(e[0])){const Oe=e,Ge=[],Be=[];for(let je=0,Ve=Oe.length;je<Ve;++je){const Ze=Oe[je],Qe=Ge.length,en=Ze.getEnds();for(let tn=0,an=en.length;tn<an;++tn)en[tn]+=Qe;extend$4(Ge,Ze.getFlatCoordinates()),Be.push(en)}t=Oe.length===0?this.getLayout():Oe[0].getLayout(),e=Ge,ke=Be}t!==void 0&&ke?(this.setFlatCoordinates(t,e),this.endss_=ke):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const ke=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let Oe=0,Ge=t.length;Oe<Ge;++Oe)t[Oe]+=ke}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let Oe=0;Oe<e;++Oe)t[Oe]=this.endss_[Oe].slice();const ke=new MultiPolygon(this.flatCoordinates.slice(),this.layout,t);return ke.applyProperties(this),ke}closestPointXY(e,t,ke,Oe){return Oe<closestSquaredDistanceXY(this.getExtent(),e,t)?Oe:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,ke,Oe))}containsXY(e,t){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,inflateMultiCoordinatesArray(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],ke=[];return t.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,ke),new MultiPolygon(t,"XY",ke)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const Ge=this.endss_[e-1];t=Ge[Ge.length-1]}const ke=this.endss_[e].slice(),Oe=ke[ke.length-1];if(t!==0)for(let Ge=0,Be=ke.length;Ge<Be;++Ge)ke[Ge]-=t;return new Polygon(this.flatCoordinates.slice(t,Oe),this.layout,ke)}getPolygons(){const e=this.layout,t=this.flatCoordinates,ke=this.endss_,Oe=[];let Ge=0;for(let Be=0,je=ke.length;Be<je;++Be){const Ve=ke[Be].slice(),Ze=Ve[Ve.length-1];if(Ge!==0)for(let en=0,tn=Ve.length;en<tn;++en)Ve[en]-=Ge;const Qe=new Polygon(t.slice(Ge,Ze),e,Ve);Oe.push(Qe),Ge=Ze}return Oe}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const ke=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(ke.length===0)this.flatCoordinates.length=0;else{const Oe=ke[ke.length-1];this.flatCoordinates.length=Oe.length===0?0:Oe[Oe.length-1]}this.changed()}}const tmpTransform=create();class RenderFeature{constructor(e,t,ke,Oe,Ge,Be){this.styleFunction,this.extent_,this.id_=Be,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=ke,this.properties_=Ge,this.squaredTolerance_,this.stride_=Oe,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),t=linearRingss(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const ke=this.ends_;for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe){const Be=ke[Oe],je=interpolatePoint(e,t,Be,2,.5);extend$4(this.flatMidpoints_,je),t=Be}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const t=e.getExtent(),ke=e.getWorldExtent();if(t&&ke){const Oe=getHeight(ke)/getHeight(t);compose(tmpTransform,ke[0],ke[3],Oe,-Oe,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new RenderFeature(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const ke=this.simplifiedGeometry_.getFlatCoordinates();let Oe;switch(this.type_){case"LineString":ke.length=douglasPeucker(ke,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,ke,0),Oe=[ke.length];break;case"MultiLineString":Oe=[],ke.length=douglasPeuckerArray(ke,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,ke,0,Oe);break;case"Polygon":Oe=[],ke.length=quantizeArray(ke,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),ke,0,Oe);break}return Oe&&(this.simplifiedGeometry_=new RenderFeature(this.type_,ke,Oe,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function all$1(r,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(r,e){return[r]}function tile(r){return function(e,t,ke){const Oe=r.getZForResolution(fromUserResolution(t)),Ge=r.getTileRangeForExtentAndZ(fromUserExtent(e),Oe),Be=[],je=[Oe,0,0];for(je[1]=Ge.minX;je[1]<=Ge.maxX;++je[1])for(je[2]=Ge.minY;je[2]<=Ge.maxY;++je[2])Be.push(toUserExtent(r.getTileCoordExtent(je)));return Be}}class VectorSourceEvent extends BaseEvent{constructor(e,t,ke){super(e),this.feature=t,this.features=ke}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all$1;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let ke,Oe;Array.isArray(e.features)?Oe=e.features:e.features&&(ke=e.features,Oe=ke.getArray()),!t&&ke===void 0&&(ke=new Collection(Oe)),Oe!==void 0&&this.addFeaturesInternal(Oe),ke!==void 0&&this.bindFeaturesCollection_(ke)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=getUid(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const ke=e.getGeometry();if(ke){const Oe=ke.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(Oe,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(t,EventType.CHANGE,this.handleFeatureChange_,this),listen(t,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let ke=!0;if(t.getId()!==void 0){const Oe=String(t.getId());if(!(Oe in this.idIndex_))this.idIndex_[Oe]=t;else if(t instanceof RenderFeature){const Ge=this.idIndex_[Oe];Ge instanceof RenderFeature?Array.isArray(Ge)?Ge.push(t):this.idIndex_[Oe]=[Ge,t]:ke=!1}else ke=!1}return ke&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),ke}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],ke=[],Oe=[];for(let Ge=0,Be=e.length;Ge<Be;Ge++){const je=e[Ge],Ve=getUid(je);this.addToIndex_(Ve,je)&&ke.push(je)}for(let Ge=0,Be=ke.length;Ge<Be;Ge++){const je=ke[Ge],Ve=getUid(je);this.setupChangeEvents_(Ve,je);const Ze=je.getGeometry();if(Ze){const Qe=Ze.getExtent();t.push(Qe),Oe.push(je)}else this.nullGeometryFeatures_[Ve]=je}if(this.featuresRtree_&&this.featuresRtree_.load(t,Oe),this.hasListener(VectorEventType.ADDFEATURE))for(let Ge=0,Be=ke.length;Ge<Be;Ge++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,ke[Ge]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(ke){t||(t=!0,e.push(ke.feature),t=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(ke){t||(t=!0,e.remove(ke.feature),t=!1)}),e.addEventListener(CollectionEventType.ADD,ke=>{t||(t=!0,this.addFeature(ke.element),t=!1)}),e.addEventListener(CollectionEventType.REMOVE,ke=>{t||(t=!0,this.removeFeature(ke.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const ke in this.featureChangeKeys_)this.featureChangeKeys_[ke].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const ke=Oe=>{this.removeFeatureInternal(Oe)};this.featuresRtree_.forEach(ke);for(const Oe in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[Oe])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const ke=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(ke,function(Oe){const Ge=Oe.getGeometry();if(Ge instanceof RenderFeature||Ge.intersectsCoordinate(e))return t(Oe)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(ke){const Oe=ke.getGeometry();if(Oe instanceof RenderFeature||Oe.intersectsExtent(e)){const Ge=t(ke);if(Ge)return Ge}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(ke){t.push(ke)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const Oe=wrapAndSliceX(e,t);return[].concat(...Oe.map(Ge=>this.featuresRtree_.getInExtent(Ge)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const ke=e[0],Oe=e[1];let Ge=null;const Be=[NaN,NaN];let je=1/0;const Ve=[-1/0,-1/0,1/0,1/0];return t=t||TRUE,this.featuresRtree_.forEachInExtent(Ve,function(Ze){if(t(Ze)){const Qe=Ze.getGeometry(),en=je;if(je=Qe instanceof RenderFeature?0:Qe.closestPointXY(ke,Oe,Be,je),je<en){Ge=Ze;const tn=Math.sqrt(je);Ve[0]=ke-tn,Ve[1]=Oe-tn,Ve[2]=ke+tn,Ve[3]=Oe+tn}}}),Ge}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,ke=getUid(t),Oe=t.getGeometry();if(!Oe)ke in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[ke]=t);else{const Be=Oe.getExtent();ke in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[ke],this.featuresRtree_&&this.featuresRtree_.insert(Be,t)):this.featuresRtree_&&this.featuresRtree_.update(Be,t)}const Ge=t.getId();if(Ge!==void 0){const Be=Ge.toString();this.idIndex_[Be]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[Be]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[ke]=t;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,ke){const Oe=this.loadedExtentsRtree_,Ge=this.strategy_(e,t,ke);for(let Be=0,je=Ge.length;Be<je;++Be){const Ve=Ge[Be];Oe.forEachInExtent(Ve,function(Qe){return containsExtent(Qe.extent,Ve)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,Ve,t,ke,Qe=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,Qe))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),Oe.insert(Ve,{extent:Ve.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_;let ke;t.forEachInExtent(e,function(Oe){if(equals$1(Oe.extent,e))return ke=Oe,!0}),ke&&t.remove(ke)}removeFeature(e){if(!e)return;const t=getUid(e);t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e),this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=getUid(e),ke=this.featureChangeKeys_[t];if(!ke)return;ke.forEach(unlistenByKey),delete this.featureChangeKeys_[t];const Oe=e.getId();return Oe!==void 0&&delete this.idIndex_[Oe.toString()],delete this.uidIndex_[t],this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),e}removeFromIdIndex_(e){let t=!1;for(const ke in this.idIndex_){const Oe=this.idIndex_[ke];if(e instanceof RenderFeature&&Array.isArray(Oe)&&Oe.includes(e))Oe.splice(Oe.indexOf(e),1);else if(this.idIndex_[ke]===e){delete this.idIndex_[ke],t=!0;break}}return t}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ImageWrapper extends Target{constructor(e,t,ke,Oe){super(),this.extent=e,this.pixelRatio_=ke,this.resolution=t,this.state=typeof Oe=="function"?ImageState.IDLE:Oe,this.image_=null,this.loader=typeof Oe=="function"?Oe:null}changed(){this.dispatchEvent(EventType.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ImageState.IDLE&&this.loader){this.state=ImageState.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;toPromise(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(ke=>{"image"in ke&&(this.image_=ke.image),"extent"in ke&&(this.extent=ke.extent),"resolution"in ke&&(this.resolution=ke.resolution),"pixelRatio"in ke&&(this.pixelRatio_=ke.pixelRatio),(ke instanceof HTMLImageElement||ke instanceof ImageBitmap||ke instanceof HTMLCanvasElement||ke instanceof HTMLVideoElement)&&(this.image_=ke),this.state=ImageState.LOADED}).catch(ke=>{this.state=ImageState.ERROR,console.error(ke)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function listenImage(r,e,t){const ke=r;let Oe=!0,Ge=!1,Be=!1;const je=[listenOnce(ke,EventType.LOAD,function(){Be=!0,Ge||e()})];return ke.src&&IMAGE_DECODE?(Ge=!0,ke.decode().then(function(){Oe&&e()}).catch(function(Ve){Oe&&(Be?e():t())})):je.push(listenOnce(ke,EventType.ERROR,t)),function(){Oe=!1,je.forEach(unlistenByKey)}}function load(r,e){return new Promise((t,ke)=>{function Oe(){Be(),t(r)}function Ge(){Be(),ke(new Error("Image load error"))}function Be(){r.removeEventListener("load",Oe),r.removeEventListener("error",Ge)}r.addEventListener("load",Oe),r.addEventListener("error",Ge)})}function decodeFallback(r,e){return e&&(r.src=e),r.src&&IMAGE_DECODE?new Promise((t,ke)=>r.decode().then(()=>t(r)).catch(Oe=>r.complete&&r.width?t(r):ke(Oe))):load(r)}function decode$1(r,e){return e&&(r.src=e),r.src&&IMAGE_DECODE&&CREATE_IMAGE_BITMAP?r.decode().then(()=>createImageBitmap(r)).catch(t=>{if(r.complete&&r.width)return r;throw t}):decodeFallback(r)}class ImageTile extends Tile{constructor(e,t,ke,Oe,Ge,Be){super(e,t,Be),this.crossOrigin_=Oe,this.src_=ke,this.key=ke,this.image_=new Image,Oe!==null&&(this.image_.crossOrigin=Oe),this.unlisten_=null,this.tileLoadFunction_=Ge}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function getBlankImage(){const r=createCanvasContext2D(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}const ERROR_THRESHOLD=.5,MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,t,ke,Oe,Ge,Be){this.sourceProj_=e,this.targetProj_=t;let je={};const Ve=getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(pn){const mn=pn[0]+"/"+pn[1];return je[mn]||(je[mn]=Ve(pn)),je[mn]},this.maxSourceExtent_=Oe,this.errorThresholdSquared_=Ge*Ge,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!Oe&&!!this.sourceProj_.getExtent()&&getWidth(Oe)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const Ze=getTopLeft(ke),Qe=getTopRight(ke),en=getBottomRight(ke),tn=getBottomLeft(ke),an=this.transformInv_(Ze),cn=this.transformInv_(Qe),dn=this.transformInv_(en),hn=this.transformInv_(tn),fn=MAX_SUBDIVISION+(Be?Math.max(0,Math.ceil(Math.log2(getArea$1(ke)/(Be*Be*256*256)))):0);if(this.addQuad_(Ze,Qe,en,tn,an,cn,dn,hn,fn),this.wrapsXInSource_){let pn=1/0;this.triangles_.forEach(function(mn,yn,Cn){pn=Math.min(pn,mn.source[0][0],mn.source[1][0],mn.source[2][0])}),this.triangles_.forEach(mn=>{if(Math.max(mn.source[0][0],mn.source[1][0],mn.source[2][0])-pn>this.sourceWorldWidth_/2){const yn=[[mn.source[0][0],mn.source[0][1]],[mn.source[1][0],mn.source[1][1]],[mn.source[2][0],mn.source[2][1]]];yn[0][0]-pn>this.sourceWorldWidth_/2&&(yn[0][0]-=this.sourceWorldWidth_),yn[1][0]-pn>this.sourceWorldWidth_/2&&(yn[1][0]-=this.sourceWorldWidth_),yn[2][0]-pn>this.sourceWorldWidth_/2&&(yn[2][0]-=this.sourceWorldWidth_);const Cn=Math.min(yn[0][0],yn[1][0],yn[2][0]);Math.max(yn[0][0],yn[1][0],yn[2][0])-Cn<this.sourceWorldWidth_/2&&(mn.source=yn)}})}je={}}addTriangle_(e,t,ke,Oe,Ge,Be){this.triangles_.push({source:[Oe,Ge,Be],target:[e,t,ke]})}addQuad_(e,t,ke,Oe,Ge,Be,je,Ve,Ze){const Qe=boundingExtent([Ge,Be,je,Ve]),en=this.sourceWorldWidth_?getWidth(Qe)/this.sourceWorldWidth_:null,tn=this.sourceWorldWidth_,an=this.sourceProj_.canWrapX()&&en>.5&&en<1;let cn=!1;if(Ze>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const hn=boundingExtent([e,t,ke,Oe]);cn=getWidth(hn)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||cn}!an&&this.sourceProj_.isGlobal()&&en&&(cn=en>MAX_TRIANGLE_WIDTH||cn)}if(!cn&&this.maxSourceExtent_&&isFinite(Qe[0])&&isFinite(Qe[1])&&isFinite(Qe[2])&&isFinite(Qe[3])&&!intersects$1(Qe,this.maxSourceExtent_))return;let dn=0;if(!cn&&(!isFinite(Ge[0])||!isFinite(Ge[1])||!isFinite(Be[0])||!isFinite(Be[1])||!isFinite(je[0])||!isFinite(je[1])||!isFinite(Ve[0])||!isFinite(Ve[1]))){if(Ze>0)cn=!0;else if(dn=(!isFinite(Ge[0])||!isFinite(Ge[1])?8:0)+(!isFinite(Be[0])||!isFinite(Be[1])?4:0)+(!isFinite(je[0])||!isFinite(je[1])?2:0)+(!isFinite(Ve[0])||!isFinite(Ve[1])?1:0),dn!=1&&dn!=2&&dn!=4&&dn!=8)return}if(Ze>0){if(!cn){const hn=[(e[0]+ke[0])/2,(e[1]+ke[1])/2],fn=this.transformInv_(hn);let pn;an?pn=(modulo(Ge[0],tn)+modulo(je[0],tn))/2-modulo(fn[0],tn):pn=(Ge[0]+je[0])/2-fn[0];const mn=(Ge[1]+je[1])/2-fn[1];cn=pn*pn+mn*mn>this.errorThresholdSquared_}if(cn){if(Math.abs(e[0]-ke[0])<=Math.abs(e[1]-ke[1])){const hn=[(t[0]+ke[0])/2,(t[1]+ke[1])/2],fn=this.transformInv_(hn),pn=[(Oe[0]+e[0])/2,(Oe[1]+e[1])/2],mn=this.transformInv_(pn);this.addQuad_(e,t,hn,pn,Ge,Be,fn,mn,Ze-1),this.addQuad_(pn,hn,ke,Oe,mn,fn,je,Ve,Ze-1)}else{const hn=[(e[0]+t[0])/2,(e[1]+t[1])/2],fn=this.transformInv_(hn),pn=[(ke[0]+Oe[0])/2,(ke[1]+Oe[1])/2],mn=this.transformInv_(pn);this.addQuad_(e,hn,pn,Oe,Ge,fn,mn,Ve,Ze-1),this.addQuad_(hn,t,ke,pn,fn,Be,je,mn,Ze-1)}return}}if(an){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}dn&11||this.addTriangle_(e,ke,Oe,Ge,je,Ve),dn&14||this.addTriangle_(e,ke,t,Ge,je,Be),dn&&(dn&13||this.addTriangle_(t,Oe,e,Be,Ve,Ge),dn&7||this.addTriangle_(t,Oe,ke,Be,Ve,je))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(t,ke,Oe){const Ge=t.source;extendCoordinate(e,Ge[0]),extendCoordinate(e,Ge[1]),extendCoordinate(e,Ge[2])}),e}getTriangles(){return this.triangles_}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(r,e,t,ke,Oe){r.beginPath(),r.moveTo(0,0),r.lineTo(e,t),r.lineTo(ke,Oe),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(e,ke)+1,Math.max(t,Oe)),r.restore()}function verifyBrokenDiagonalRendering(r,e){return Math.abs(r[e*4]-210)>2||Math.abs(r[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const r=createCanvasContext2D(6,6,canvasPool$1);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(r,4,5,4,0),drawTestTriangle(r,4,5,0,5);const e=r.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(r),canvasPool$1.push(r.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(r,e,t,ke){const Oe=transform$1(t,e,r);let Ge=getPointResolution(e,ke,t);const Be=e.getMetersPerUnit();Be!==void 0&&(Ge*=Be);const je=r.getMetersPerUnit();je!==void 0&&(Ge/=je);const Ve=r.getExtent();if(!Ve||containsCoordinate(Ve,Oe)){const Ze=getPointResolution(r,Ge,Oe)/Ge;isFinite(Ze)&&Ze>0&&(Ge/=Ze)}return Ge}function calculateSourceExtentResolution(r,e,t,ke){const Oe=getCenter(t);let Ge=calculateSourceResolution(r,e,Oe,ke);return(!isFinite(Ge)||Ge<=0)&&forEachCorner(t,function(Be){return Ge=calculateSourceResolution(r,e,Be,ke),isFinite(Ge)&&Ge>0}),Ge}function render(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn){const an=createCanvasContext2D(Math.round(t*r),Math.round(t*e),canvasPool$1);if(en||(an.imageSmoothingEnabled=!1),Ve.length===0)return an.canvas;an.scale(t,t);function cn(pn){return Math.round(pn*t)/t}an.globalCompositeOperation="lighter";const dn=createEmpty();Ve.forEach(function(pn,mn,yn){extend$3(dn,pn.extent)});let hn;if(!tn||Ve.length!==1||Ze!==0){const pn=getWidth(dn),mn=getHeight(dn);hn=createCanvasContext2D(Math.round(t*pn/ke),Math.round(t*mn/ke),canvasPool$1),en||(hn.imageSmoothingEnabled=!1);const yn=t/ke;Ve.forEach(function(Cn,wn,bn){const Sn=Cn.extent[0]-dn[0],Mn=-(Cn.extent[3]-dn[3]),Tn=getWidth(Cn.extent),En=getHeight(Cn.extent);Cn.image.width>0&&Cn.image.height>0&&hn.drawImage(Cn.image,Ze,Ze,Cn.image.width-2*Ze,Cn.image.height-2*Ze,Sn*yn,Mn*yn,Tn*yn,En*yn)})}const fn=getTopLeft(Be);return je.getTriangles().forEach(function(pn,mn,yn){const Cn=pn.source,wn=pn.target;let bn=Cn[0][0],Sn=Cn[0][1],Mn=Cn[1][0],Tn=Cn[1][1],En=Cn[2][0],An=Cn[2][1];const Ln=cn((wn[0][0]-fn[0])/Ge),Rn=cn(-(wn[0][1]-fn[1])/Ge),Gn=cn((wn[1][0]-fn[0])/Ge),Nn=cn(-(wn[1][1]-fn[1])/Ge),jn=cn((wn[2][0]-fn[0])/Ge),Dn=cn(-(wn[2][1]-fn[1])/Ge),Ci=bn,Jn=Sn;bn=0,Sn=0,Mn-=Ci,Tn-=Jn,En-=Ci,An-=Jn;const Ki=[[Mn,Tn,0,0,Gn-Ln],[En,An,0,0,jn-Ln],[0,0,Mn,Tn,Nn-Rn],[0,0,En,An,Dn-Rn]],xn=solveLinearSystem(Ki);if(!xn)return;if(an.save(),an.beginPath(),isBrokenDiagonalRendering()||!en){an.moveTo(Gn,Nn);const $n=4,Ai=Ln-Gn,Ti=Rn-Nn;for(let Kn=0;Kn<$n;Kn++)an.lineTo(Gn+cn((Kn+1)*Ai/$n),Nn+cn(Kn*Ti/($n-1))),Kn!=$n-1&&an.lineTo(Gn+cn((Kn+1)*Ai/$n),Nn+cn((Kn+1)*Ti/($n-1)));an.lineTo(jn,Dn)}else an.moveTo(Gn,Nn),an.lineTo(Ln,Rn),an.lineTo(jn,Dn);an.clip(),an.transform(xn[0],xn[2],xn[1],xn[3],Ln,Rn),an.translate(dn[0]-Ci,dn[3]-Jn);let qn;if(hn)qn=hn.canvas,an.scale(ke/t,-ke/t);else{const $n=Ve[0],Ai=$n.extent;qn=$n.image,an.scale(getWidth(Ai)/qn.width,-getHeight(Ai)/qn.height)}an.drawImage(qn,0,0),an.restore()}),hn&&(releaseCanvas(hn),canvasPool$1.push(hn.canvas)),Qe&&(an.save(),an.globalCompositeOperation="source-over",an.strokeStyle="black",an.lineWidth=1,je.getTriangles().forEach(function(pn,mn,yn){const Cn=pn.target,wn=(Cn[0][0]-fn[0])/Ge,bn=-(Cn[0][1]-fn[1])/Ge,Sn=(Cn[1][0]-fn[0])/Ge,Mn=-(Cn[1][1]-fn[1])/Ge,Tn=(Cn[2][0]-fn[0])/Ge,En=-(Cn[2][1]-fn[1])/Ge;an.beginPath(),an.moveTo(Sn,Mn),an.lineTo(wn,bn),an.lineTo(Tn,En),an.closePath(),an.stroke()}),an.restore()),an.canvas}class ReprojTile extends Tile{constructor(e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn){super(Ge,TileState.IDLE,tn),this.renderEdges_=en!==void 0?en:!1,this.pixelRatio_=je,this.gutter_=Ve,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=Oe,this.wrappedTileCoord_=Be||Ge,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const an=Oe.getTileCoordExtent(this.wrappedTileCoord_),cn=this.targetTileGrid_.getExtent();let dn=this.sourceTileGrid_.getExtent();const hn=cn?getIntersection(an,cn):an;if(getArea$1(hn)===0){this.state=TileState.EMPTY;return}const fn=e.getExtent();fn&&(dn?dn=getIntersection(dn,fn):dn=fn);const pn=Oe.getResolution(this.wrappedTileCoord_[0]),mn=calculateSourceExtentResolution(e,ke,hn,pn);if(!isFinite(mn)||mn<=0){this.state=TileState.EMPTY;return}const yn=Qe!==void 0?Qe:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,ke,hn,dn,mn*yn,pn),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=t.getZForResolution(mn);let Cn=this.triangulation_.calculateSourceExtent();if(dn&&(e.canWrapX()?(Cn[1]=clamp(Cn[1],dn[1],dn[3]),Cn[3]=clamp(Cn[3],dn[1],dn[3])):Cn=getIntersection(Cn,dn)),!getArea$1(Cn))this.state=TileState.EMPTY;else{const wn=t.getTileRangeForExtentAndZ(Cn,this.sourceZ_);for(let bn=wn.minX;bn<=wn.maxX;bn++)for(let Sn=wn.minY;Sn<=wn.maxY;Sn++){const Mn=Ze(this.sourceZ_,bn,Sn,je);Mn&&this.sourceTiles_.push(Mn)}this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{t&&t.getState()==TileState.LOADED&&e.push({extent:this.sourceTileGrid_.getTileCoordExtent(t.tileCoord),image:t.getImage()})}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const t=this.wrappedTileCoord_[0],ke=this.targetTileGrid_.getTileSize(t),Oe=typeof ke=="number"?ke:ke[0],Ge=typeof ke=="number"?ke:ke[1],Be=this.targetTileGrid_.getResolution(t),je=this.sourceTileGrid_.getResolution(this.sourceZ_),Ve=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render(Oe,Ge,this.pixelRatio_,je,this.sourceTileGrid_.getExtent(),Be,Ve,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(t=>{const ke=t.getState();if(ke==TileState.IDLE||ke==TileState.LOADING){e++;const Oe=listen(t,EventType.CHANGE,function(Ge){const Be=t.getState();(Be==TileState.LOADED||Be==TileState.ERROR||Be==TileState.EMPTY)&&(unlistenByKey(Oe),e--,e===0&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(Oe)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,ke,Oe){t.getState()==TileState.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,opaque:e.opaque,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const e in this.tileCacheForProjection)if(this.tileCacheForProjection[e].canExpireCache())return!0;return!1}expireCache(e,t){const ke=this.getTileCacheForProjection(e);this.tileCache.expireCache(this.tileCache==ke?t:{});for(const Oe in this.tileCacheForProjection){const Ge=this.tileCacheForProjection[Oe];Ge.expireCache(Ge==ke?t:{})}}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getOpaque(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?!1:super.getOpaque(e)}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||equivalent(t,e)))return this.tileGrid;const ke=getUid(e);return ke in this.tileGridForProjection||(this.tileGridForProjection[ke]=getForProjection(e)),this.tileGridForProjection[ke]}getTileCacheForProjection(e){const t=this.getProjection();if(!t||equivalent(t,e))return this.tileCache;const ke=getUid(e);return ke in this.tileCacheForProjection||(this.tileCacheForProjection[ke]=new TileCache(this.tileCache.highWaterMark)),this.tileCacheForProjection[ke]}createTile_(e,t,ke,Oe,Ge,Be){const je=[e,t,ke],Ve=this.getTileCoordForTileUrlFunction(je,Ge),Ze=Ve?this.tileUrlFunction(Ve,Oe,Ge):void 0,Qe=new this.tileClass(je,Ze!==void 0?TileState.IDLE:TileState.EMPTY,Ze!==void 0?Ze:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return Qe.key=Be,Qe.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),Qe}getTile(e,t,ke,Oe,Ge){const Be=this.getProjection();if(!Be||!Ge||equivalent(Be,Ge))return this.getTileInternal(e,t,ke,Oe,Be||Ge);const je=this.getTileCacheForProjection(Ge),Ve=[e,t,ke];let Ze;const Qe=getKey$1(Ve);je.containsKey(Qe)&&(Ze=je.get(Qe));const en=this.getKey();if(Ze&&Ze.key==en)return Ze;const tn=this.getTileGridForProjection(Be),an=this.getTileGridForProjection(Ge),cn=this.getTileCoordForTileUrlFunction(Ve,Ge),dn=new ReprojTile(Be,tn,Ge,an,Ve,cn,this.getTilePixelRatio(Oe),this.getGutter(),(hn,fn,pn,mn)=>this.getTileInternal(hn,fn,pn,mn,Be),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return dn.key=en,Ze?(dn.interimTile=Ze,dn.refreshInterimChain(),je.replace(Qe,dn)):je.set(Qe,dn),dn}getTileInternal(e,t,ke,Oe,Ge){let Be=null;const je=getKeyZXY(e,t,ke),Ve=this.getKey();if(!this.tileCache.containsKey(je))Be=this.createTile_(e,t,ke,Oe,Ge,Ve),this.tileCache.set(je,Be);else if(Be=this.tileCache.get(je),Be.key!=Ve){const Ze=Be;Be=this.createTile_(e,t,ke,Oe,Ge,Ve),Ze.getState()==TileState.IDLE?Be.interimTile=Ze.interimTile:Be.interimTile=Ze,Be.refreshInterimChain(),this.tileCache.replace(je,Be)}return Be}setRenderReprojectionEdges(e){if(this.renderReprojectionEdges_!=e){this.renderReprojectionEdges_=e;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(e,t){const ke=get$3(e);if(ke){const Oe=getUid(ke);Oe in this.tileGridForProjection||(this.tileGridForProjection[Oe]=t)}}clear(){super.clear();for(const e in this.tileCacheForProjection)this.tileCacheForProjection[e].clear()}}function defaultTileLoadFunction(r,e){r.getImage().src=e}const DECIMALS=4;function appendParams(r,e){const t=[];Object.keys(e).forEach(function(Oe){e[Oe]!==null&&e[Oe]!==void 0&&t.push(Oe+"="+encodeURIComponent(e[Oe]))});const ke=t.join("&");return r=r.replace(/[?&]$/,""),r+=r.includes("?")?"&":"?",r+ke}function fromResolutionLike(r){return Array.isArray(r)?Math.min(...r):r}class ReprojImage extends ImageWrapper{constructor(e,t,ke,Oe,Ge,Be,je){let Ve=e.getExtent();Ve&&e.canWrapX()&&(Ve=Ve.slice(),Ve[0]=-1/0,Ve[2]=1/0);let Ze=t.getExtent();Ze&&t.canWrapX()&&(Ze=Ze.slice(),Ze[0]=-1/0,Ze[2]=1/0);const Qe=Ze?getIntersection(ke,Ze):ke,en=getCenter(Qe),tn=calculateSourceResolution(e,t,en,Oe),an=ERROR_THRESHOLD,cn=new Triangulation(e,t,Qe,Ve,tn*an,Oe),dn=cn.calculateSourceExtent(),hn=isEmpty(dn)?null:Be(dn,tn,Ge),fn=hn?ImageState.IDLE:ImageState.EMPTY,pn=hn?hn.getPixelRatio():1;super(ke,Oe,pn,fn),this.targetProj_=t,this.maxSourceExtent_=Ve,this.triangulation_=cn,this.targetResolution_=Oe,this.targetExtent_=ke,this.sourceImage_=hn,this.sourcePixelRatio_=pn,this.interpolate_=je,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ImageState.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ImageState.LOADED){const t=getWidth(this.targetExtent_)/this.targetResolution_,ke=getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=render(t,ke,this.sourcePixelRatio_,fromResolutionLike(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ImageState.IDLE){this.state=ImageState.LOADING,this.changed();const e=this.sourceImage_.getState();e==ImageState.LOADED||e==ImageState.ERROR?this.reproject_():(this.sourceListenerKey_=listen(this.sourceImage_,EventType.CHANGE,function(t){const ke=this.sourceImage_.getState();(ke==ImageState.LOADED||ke==ImageState.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null}}const ImageSourceEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ImageSourceEvent extends BaseEvent{constructor(e,t){super(e),this.image=t}}class ImageSource extends Source{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const ke=linearFindNearest(t,e,0);e=t[ke]}return e}getImage(e,t,ke,Oe){const Ge=this.getProjection();if(!Ge||!Oe||equivalent(Ge,Oe))return Ge&&(Oe=Ge),this.getImageInternal(e,t,ke,Oe);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&equivalent(this.reprojectedImage_.getProjection(),Oe)&&this.reprojectedImage_.getResolution()==t&&equals$1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ReprojImage(Ge,Oe,e,t,ke,(Be,je,Ve)=>this.getImageInternal(Be,je,Ve,Ge),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,ke,Oe){if(this.loader){const Ge=getRequestExtent(e,t,ke,1),Be=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===Oe&&(this.wantedExtent_&&containsExtent(this.wantedExtent_,Ge)||containsExtent(this.image.getExtent(),Ge))&&(this.wantedResolution_&&fromResolutionLike(this.wantedResolution_)===Be||fromResolutionLike(this.image.getResolution())===Be)))return this.image;this.wantedProjection_=Oe,this.wantedExtent_=Ge,this.wantedResolution_=Be,this.image=new ImageWrapper(Ge,Be,ke,this.loader),this.image.addEventListener(EventType.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let ke;switch(t.getState()){case ImageState.LOADING:this.loading=!0,ke=ImageSourceEventType.IMAGELOADSTART;break;case ImageState.LOADED:this.loading=!1,ke=ImageSourceEventType.IMAGELOADEND;break;case ImageState.ERROR:this.loading=!1,ke=ImageSourceEventType.IMAGELOADERROR;break;default:return}this.hasListener(ke)&&this.dispatchEvent(new ImageSourceEvent(ke,t))}}function defaultImageLoadFunction(r,e){r.getImage().src=e}function getRequestExtent(r,e,t,ke){const Oe=e/t,Ge=getCenter(r),Be=ceil(getWidth(r)/Oe,DECIMALS),je=ceil(getHeight(r)/Oe,DECIMALS),Ve=ceil((ke-1)*Be/2,DECIMALS),Ze=Be+2*Ve,Qe=ceil((ke-1)*je/2,DECIMALS),en=je+2*Qe;return getForViewAndSize(Ge,Oe,0,[Ze,en])}const DEFAULT_VERSION="1.3.0",GETFEATUREINFO_IMAGE_SIZE=[101,101];function getRequestUrl(r,e,t,ke,Oe){Oe.WIDTH=t[0],Oe.HEIGHT=t[1];const Ge=ke.getAxisOrientation();let Be;const je=compareVersions(Oe.VERSION,"1.3")>=0;return Oe[je?"CRS":"SRS"]=ke.getCode(),je&&Ge.substr(0,2)=="ne"?Be=[e[1],e[0],e[3],e[2]]:Be=e,Oe.BBOX=Be.join(","),appendParams(r,Oe)}function getImageSrc(r,e,t,ke,Oe,Ge,Be){Ge=Object.assign({REQUEST:"GetMap"},Ge);const je=e/t,Ve=[round(getWidth(r)/je,DECIMALS),round(getHeight(r)/je,DECIMALS)];if(t!=1)switch(Be){case"geoserver":const Qe=90*t+.5|0;"FORMAT_OPTIONS"in Ge?Ge.FORMAT_OPTIONS+=";dpi:"+Qe:Ge.FORMAT_OPTIONS="dpi:"+Qe;break;case"mapserver":Ge.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":Ge.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(Oe,r,Ve,ke,Ge)}function getRequestParams(r,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},r)}function createLoader(r){const e=r.hidpi===void 0?!0:r.hidpi,t=get$3(r.projection||"EPSG:3857"),ke=r.ratio||1.5,Oe=r.load||decode$1;return(Ge,Be,je)=>{Ge=getRequestExtent(Ge,Be,je,ke),je!=1&&(!e||r.serverType===void 0)&&(je=1);const Ve=getImageSrc(Ge,Be,je,t,r.url,getRequestParams(r.params,"GetMap"),r.serverType),Ze=new Image;return r.crossOrigin!==null&&(Ze.crossOrigin=r.crossOrigin),Oe(Ze,Ve).then(Qe=>({image:Qe,extent:Ge,pixelRatio:je}))}}function getFeatureInfoUrl(r,e,t){if(r.url===void 0)return;const ke=get$3(r.projection||"EPSG:3857"),Oe=getForViewAndSize(e,t,0,GETFEATUREINFO_IMAGE_SIZE),Ge={QUERY_LAYERS:r.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(Ge,getRequestParams(r.params,"GetFeatureInfo"),r.params);const Be=floor((e[0]-Oe[0])/t,DECIMALS),je=floor((Oe[3]-e[1])/t,DECIMALS),Ve=compareVersions(Ge.VERSION,"1.3")>=0;return Ge[Ve?"I":"X"]=Be,Ge[Ve?"J":"Y"]=je,getRequestUrl(r.url,Oe,GETFEATUREINFO_IMAGE_SIZE,ke,Ge)}function getLegendUrl(r,e){if(r.url===void 0)return;const t={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(r.params===void 0||r.params.LAYER===void 0){const ke=r.params.LAYERS;if(!(!Array.isArray(ke)||ke.length===1))return;t.LAYER=ke}if(e!==void 0){const ke=get$3(r.projection||"EPSG:3857").getMetersPerUnit()||1,Oe=28e-5;t.SCALE=e*ke/Oe}return Object.assign(t,r.params),appendParams(r.url,t)}class TileWMS extends TileImage{constructor(e){e=e||{};const t=Object.assign({},e.params),ke="TRANSPARENT"in t?t.TRANSPARENT:!0;super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,opaque:!ke,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,ke,Oe){const Ge=get$3(ke),Be=this.getProjection()||Ge;let je=this.getTileGrid();je||(je=this.getTileGridForProjection(Be));const Ve=transform$1(e,Ge,Be),Ze=calculateSourceResolution(Be,Ge,e,t),Qe=je.getZForResolution(Ze,this.zDirection),en=je.getResolution(Qe),tn=je.getTileCoordForCoordAndZ(Ve,Qe);if(je.getResolutions().length<=tn[0])return;let an=je.getTileCoordExtent(tn,this.tmpExtent_);const cn=this.gutter_;cn!==0&&(an=buffer(an,en*cn,an));const dn={QUERY_LAYERS:this.params_.LAYERS};Object.assign(dn,getRequestParams(this.params_,"GetFeatureInfo"),Oe);const hn=Math.floor((Ve[0]-an[0])/en),fn=Math.floor((an[3]-Ve[1])/en);return dn[this.v13_?"I":"X"]=hn,dn[this.v13_?"J":"Y"]=fn,this.getRequestUrl_(tn,an,1,Be||Ge,dn)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const ke={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const Oe=this.params_.LAYERS;if(!(!Array.isArray(Oe)||Oe.length===1))return;ke.LAYER=Oe}if(e!==void 0){const Oe=this.getProjection()?this.getProjection().getMetersPerUnit():1,Ge=28e-5;ke.SCALE=e*Oe/Ge}return Object.assign(ke,t),appendParams(this.urls[0],ke)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,ke,Oe,Ge){const Be=this.urls;if(!Be)return;let je;if(Be.length==1)je=Be[0];else{const Ve=modulo(hash(e),Be.length);je=Be[Ve]}return getImageSrc(t,(this.tileGrid||this.getTileGridForProjection(Oe)).getResolution(e[0]),ke,Oe,je,Ge,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const ke in this.params_)t[e++]=ke+"-"+this.params_[ke];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,t,ke){let Oe=this.getTileGrid();if(Oe||(Oe=this.getTileGridForProjection(ke)),Oe.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const Ge=Oe.getResolution(e[0]);let Be=Oe.getTileCoordExtent(e,this.tmpExtent_);const je=this.gutter_;je!==0&&(Be=buffer(Be,Ge*je,Be));const Ve=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,Be,t,ke,Ve)}}let WMTS$1=class extends TileImage{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",ke=e.tileGrid;let Oe=e.urls;Oe===void 0&&e.url!==void 0&&(Oe=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:ke,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:Oe,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),Oe&&Oe.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(Oe.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,ke={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(ke,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?appendParams(e,ke):e.replace(/\{(\w+?)\}/g,function(Be,je){return je.toLowerCase()in ke?ke[je.toLowerCase()]:Be});const Oe=this.tileGrid,Ge=this.dimensions_;return function(Be,je,Ve){if(!Be)return;const Ze={TileMatrix:Oe.getMatrixId(Be[0]),TileCol:Be[1],TileRow:Be[2]};Object.assign(Ze,Ge);let Qe=e;return t=="KVP"?Qe=appendParams(Qe,Ze):Qe=Qe.replace(/\{(\w+?)\}/g,function(en,tn){return Ze[tn]}),Qe}}};class ImageWMS extends ImageSource{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:defaultImageLoadFunction,this.params_=e.params,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,ke,Oe){const Ge=get$3(ke),Be=this.getProjection();Be&&Be!==Ge&&(t=calculateSourceResolution(Be,Ge,e,t),e=transform$1(e,Ge,Be));const je={url:this.url_,params:{...this.params_,...Oe},projection:Be||Ge};return getFeatureInfoUrl(je,e,t)}getLegendUrl(e,t){return getLegendUrl({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,ke,Oe){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==Oe)&&(this.loaderProjection_=Oe,this.loader=createLoader({crossOrigin:this.crossOrigin_,params:this.params_,projection:Oe,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(Ge,Be)=>(this.image.setImage(Ge),this.imageLoadFunction_(this.image,Be),decode$1(Ge))})),super.getImageInternal(e,t,ke,Oe))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(r,e,t){const ke=r.getCenterInternal();if(ke){const Oe=[ke[0]+e[0],ke[1]+e[1]];r.animateInternal({duration:t!==void 0?t:250,easing:linear,center:r.getConstrainedCenter(Oe)})}}function zoomByDelta(r,e,t,ke){const Oe=r.getZoom();if(Oe===void 0)return;const Ge=r.getConstrainedZoom(Oe+e),Be=r.getResolutionForZoom(Ge);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:Be,anchor:t,duration:ke!==void 0?ke:250,easing:easeOut})}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==MapBrowserEventType.DBLCLICK){const ke=e.originalEvent,Oe=e.map,Ge=e.coordinate,Be=ke.shiftKey?-this.delta_:this.delta_,je=Oe.getView();zoomByDelta(je,Be,Ge,this.duration_),ke.preventDefault(),t=!0}return!t}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const ke=this.handleUpEvent(e);this.handlingDownUpSequence=ke&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const ke=this.handleDownEvent(e);this.handlingDownUpSequence=ke,t=this.stopDown(ke)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(r){const e=r.length;let t=0,ke=0;for(let Oe=0;Oe<e;Oe++)t+=r[Oe].clientX,ke+=r[Oe].clientY;return{clientX:t/e,clientY:ke/e}}class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,ke="px",Oe=this.element_.style;Oe.left=Math.min(e[0],t[0])+ke,Oe.top=Math.min(e[1],t[1])+ke,Oe.width=Math.abs(t[0]-e[0])+ke,Oe.height=Math.abs(t[1]-e[1])+ke}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const e=this.startPixel_,t=this.endPixel_,Oe=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);Oe[4]=Oe[0].slice(),this.geometry_?this.geometry_.setCoordinates([Oe]):this.geometry_=new Polygon([Oe])}getGeometry(){return this.geometry_}}function all(r){const e=arguments;return function(t){let ke=!0;for(let Oe=0,Ge=e.length;Oe<Ge&&(ke=ke&&e[Oe](t),!!ke);++Oe);return ke}}const altKeyOnly=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(r){const e=r.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(r){const e=r.map.getTargetElement(),t=r.map.getOwnerDocument().activeElement;return e.contains(t)},focusWithTabindex=function(r){return r.map.getTargetElement().hasAttribute("tabindex")?focus(r):!0},always$1=TRUE,mouseActionButton=function(r){const e=r.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,pointerMove=function(r){return r.type=="pointermove"},singleClick=function(r){return r.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(r){const e=r.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(r){const e=r.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(r){const e=r.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(r){const e=r.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(r){const e=r.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0},DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,t,ke){super(e),this.coordinate=t,this.mapBrowserEvent=ke}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea!==void 0?e.minArea:64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition?e.condition:mouseActionButton,this.boxEndCondition_=e.boxEndCondition?e.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,ke){const Oe=ke[0]-t[0],Ge=ke[1]-t[1];return Oe*Oe+Ge*Ge>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e))}handleUpEvent(e){this.box_.setMap(null);const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(t?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}}class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:all(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all(focusWithTabindex,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const ke=this.targetPointers,Oe=t.getEventPixel(centroid(ke));if(ke.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(Oe[0],Oe[1]),this.lastCentroid){const Ge=[this.lastCentroid[0]-Oe[0],Oe[1]-this.lastCentroid[1]],je=e.map.getView();scale$2(Ge,je.getResolution()),rotate$1(Ge,je.getRotation()),je.adjustCenterInternal(Ge)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=Oe,this.lastPointersCount_=ke.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,ke=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const Oe=this.kinetic_.getDistance(),Ge=this.kinetic_.getAngle(),Be=ke.getCenterInternal(),je=t.getPixelFromCoordinateInternal(Be),Ve=t.getCoordinateFromPixelInternal([je[0]-Oe*Math.cos(Ge),je[1]-Oe*Math.sin(Ge)]);ke.animateInternal({center:ke.getConstrainedCenter(Ve),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,ke.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const ke=e.map.getView();return this.lastCentroid=null,ke.getAnimating()&&ke.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}function disable(r){if(r!==void 0)return 0}function none$1(r){if(r!==void 0)return r}function createSnapToN(r){const e=2*Math.PI/r;return function(t,ke){if(ke)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function createSnapToZero(r){const e=toRadians(5);return function(t,ke){return ke||t===void 0?t:Math.abs(t)<=e?0:t}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const t=e.map,ke=t.getView();if(ke.getConstraints().rotation===disable)return;const Oe=t.getSize(),Ge=e.pixel,Be=Math.atan2(Oe[1]/2-Ge[1],Ge[0]-Oe[0]/2);if(this.lastAngle_!==void 0){const je=Be-this.lastAngle_;ke.adjustRotationInternal(-je)}this.lastAngle_=Be}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class DragZoom extends DragBox{constructor(e){e=e||{};const t=e.condition?e.condition:shiftKeyOnly;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const ke=this.getMap().getView();let Oe=this.getGeometry();if(this.out_){const Ge=ke.rotatedExtentForGeometry(Oe),Be=ke.getResolutionForExtentInternal(Ge),je=ke.getResolution()/Be;Oe=Oe.clone(),Oe.scale(je*je)}ke.fitInternal(Oe,{duration:this.duration_,easing:easeOut})}}class MapEvent extends BaseEvent{constructor(e,t,ke){super(e),this.map=t,this.frameState=ke!==void 0?ke:null}}class MapBrowserEvent extends MapEvent{constructor(e,t,ke,Oe,Ge,Be){super(e,t,Ge),this.originalEvent=ke,this.pixel_=null,this.coordinate_=null,this.dragging=Oe!==void 0?Oe:!1,this.activePointers=Be}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof t[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),t[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,t[LayerProperty.Z_INDEX]=e.zIndex,t[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},ke=this.getZIndex();return t.opacity=clamp(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=ke===void 0&&!t.managed?1/0:ke,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ViewHint={ANIMATING:0,INTERACTING:1},ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function createExtent(r,e,t){return function(ke,Oe,Ge,Be,je){if(!ke)return;if(!Oe&&!e)return ke;const Ve=e?0:Ge[0]*Oe,Ze=e?0:Ge[1]*Oe,Qe=je?je[0]:0,en=je?je[1]:0;let tn=r[0]+Ve/2+Qe,an=r[2]-Ve/2+Qe,cn=r[1]+Ze/2+en,dn=r[3]-Ze/2+en;tn>an&&(tn=(an+tn)/2,an=tn),cn>dn&&(cn=(dn+cn)/2,dn=cn);let hn=clamp(ke[0],tn,an),fn=clamp(ke[1],cn,dn);if(Be&&t&&Oe){const pn=30*Oe;hn+=-pn*Math.log(1+Math.max(0,tn-ke[0])/pn)+pn*Math.log(1+Math.max(0,ke[0]-an)/pn),fn+=-pn*Math.log(1+Math.max(0,cn-ke[1])/pn)+pn*Math.log(1+Math.max(0,ke[1]-dn)/pn)}return[hn,fn]}}function none(r){return r}function getViewportClampedResolution(r,e,t,ke){const Oe=getWidth(e)/t[0],Ge=getHeight(e)/t[1];return ke?Math.min(r,Math.max(Oe,Ge)):Math.min(r,Math.min(Oe,Ge))}function getSmoothClampedResolution(r,e,t){let ke=Math.min(r,e);const Oe=50;return ke*=Math.log(1+Oe*Math.max(0,r/e-1))/Oe+1,t&&(ke=Math.max(ke,t),ke/=Math.log(1+Oe*Math.max(0,t/r-1))/Oe+1),clamp(ke,t/2,e*2)}function createSnapToResolutions(r,e,t,ke){return e=e!==void 0?e:!0,function(Oe,Ge,Be,je){if(Oe!==void 0){const Ve=r[0],Ze=r[r.length-1],Qe=t?getViewportClampedResolution(Ve,t,Be,ke):Ve;if(je)return e?getSmoothClampedResolution(Oe,Qe,Ze):clamp(Oe,Ze,Qe);const en=Math.min(Qe,Oe),tn=Math.floor(linearFindNearest(r,en,Ge));return r[tn]>Qe&&tn<r.length-1?r[tn+1]:r[tn]}}}function createSnapToPower(r,e,t,ke,Oe,Ge){return ke=ke!==void 0?ke:!0,t=t!==void 0?t:0,function(Be,je,Ve,Ze){if(Be!==void 0){const Qe=Oe?getViewportClampedResolution(e,Oe,Ve,Ge):e;if(Ze)return ke?getSmoothClampedResolution(Be,Qe,t):clamp(Be,t,Qe);const en=1e-9,tn=Math.ceil(Math.log(e/Qe)/Math.log(r)-en),an=-je*(.5-en)+.5,cn=Math.min(Qe,Be),dn=Math.floor(Math.log(e/cn)/Math.log(r)+an),hn=Math.max(tn,dn),fn=e/Math.pow(r,hn);return clamp(fn,t,Qe)}}}function createMinMaxResolution(r,e,t,ke,Oe){return t=t!==void 0?t:!0,function(Ge,Be,je,Ve){if(Ge!==void 0){const Ze=ke?getViewportClampedResolution(r,ke,je,Oe):r;return!t||!Ve?clamp(Ge,e,Ze):getSmoothClampedResolution(Ge,Ze,e)}}}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const je in ViewProperty)delete t[je];this.setProperties(t,!0);const ke=createResolutionConstraint(e);this.maxResolution_=ke.maxResolution,this.minResolution_=ke.minResolution,this.zoomFactor_=ke.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=ke.minZoom;const Oe=createCenterConstraint(e),Ge=ke.constraint,Be=createRotationConstraint(e);this.constraints_={center:Oe,resolution:Ge,rotation:Be},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const ke=this.getCenterInternal();if(ke){const Oe=e||[0,0,0,0];t=t||[0,0,0,0];const Ge=this.getResolution(),Be=Ge/2*(Oe[3]-t[3]+t[1]-Oe[1]),je=Ge/2*(Oe[0]-t[0]+t[2]-Oe[2]);this.setCenterInternal([ke[0]+Be,ke[1]-je])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let ke=0;ke<t.length;++ke){let Oe=arguments[ke];Oe.center&&(Oe=Object.assign({},Oe),Oe.center=fromUserCoordinate(Oe.center,this.getProjection())),Oe.anchor&&(Oe=Object.assign({},Oe),Oe.anchor=fromUserCoordinate(Oe.anchor,this.getProjection())),t[ke]=Oe}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,ke;t>1&&typeof arguments[t-1]=="function"&&(ke=arguments[t-1],--t);let Oe=0;for(;Oe<t&&!this.isDef();++Oe){const Qe=arguments[Oe];Qe.center&&this.setCenterInternal(Qe.center),Qe.zoom!==void 0?this.setZoom(Qe.zoom):Qe.resolution&&this.setResolution(Qe.resolution),Qe.rotation!==void 0&&this.setRotation(Qe.rotation)}if(Oe===t){ke&&animationCallback(ke,!0);return}let Ge=Date.now(),Be=this.targetCenter_.slice(),je=this.targetResolution_,Ve=this.targetRotation_;const Ze=[];for(;Oe<t;++Oe){const Qe=arguments[Oe],en={start:Ge,complete:!1,anchor:Qe.anchor,duration:Qe.duration!==void 0?Qe.duration:1e3,easing:Qe.easing||inAndOut,callback:ke};if(Qe.center&&(en.sourceCenter=Be,en.targetCenter=Qe.center.slice(),Be=en.targetCenter),Qe.zoom!==void 0?(en.sourceResolution=je,en.targetResolution=this.getResolutionForZoom(Qe.zoom),je=en.targetResolution):Qe.resolution&&(en.sourceResolution=je,en.targetResolution=Qe.resolution,je=en.targetResolution),Qe.rotation!==void 0){en.sourceRotation=Ve;const tn=modulo(Qe.rotation-Ve+Math.PI,2*Math.PI)-Math.PI;en.targetRotation=Ve+tn,Ve=en.targetRotation}isNoopAnimation(en)?en.complete=!0:Ge+=en.duration,Ze.push(en)}this.animations_.push(Ze),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let t=0,ke=this.animations_.length;t<ke;++t){const Oe=this.animations_[t];if(Oe[0].callback&&animationCallback(Oe[0].callback,!1),!e)for(let Ge=0,Be=Oe.length;Ge<Be;++Ge){const je=Oe[Ge];if(!je.complete){e=je.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let ke=this.animations_.length-1;ke>=0;--ke){const Oe=this.animations_[ke];let Ge=!0;for(let Be=0,je=Oe.length;Be<je;++Be){const Ve=Oe[Be];if(Ve.complete)continue;const Ze=e-Ve.start;let Qe=Ve.duration>0?Ze/Ve.duration:1;Qe>=1?(Ve.complete=!0,Qe=1):Ge=!1;const en=Ve.easing(Qe);if(Ve.sourceCenter){const tn=Ve.sourceCenter[0],an=Ve.sourceCenter[1],cn=Ve.targetCenter[0],dn=Ve.targetCenter[1];this.nextCenter_=Ve.targetCenter;const hn=tn+en*(cn-tn),fn=an+en*(dn-an);this.targetCenter_=[hn,fn]}if(Ve.sourceResolution&&Ve.targetResolution){const tn=en===1?Ve.targetResolution:Ve.sourceResolution+en*(Ve.targetResolution-Ve.sourceResolution);if(Ve.anchor){const an=this.getViewportSize_(this.getRotation()),cn=this.constraints_.resolution(tn,0,an,!0);this.targetCenter_=this.calculateCenterZoom(cn,Ve.anchor)}this.nextResolution_=Ve.targetResolution,this.targetResolution_=tn,this.applyTargetState_(!0)}if(Ve.sourceRotation!==void 0&&Ve.targetRotation!==void 0){const tn=en===1?modulo(Ve.targetRotation+Math.PI,2*Math.PI)-Math.PI:Ve.sourceRotation+en*(Ve.targetRotation-Ve.sourceRotation);if(Ve.anchor){const an=this.constraints_.rotation(tn,!0);this.targetCenter_=this.calculateCenterRotate(an,Ve.anchor)}this.nextRotation_=Ve.targetRotation,this.targetRotation_=tn}if(this.applyTargetState_(!0),t=!0,!Ve.complete)break}if(Ge){this.animations_[ke]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const Be=Oe[0].callback;Be&&animationCallback(Be,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let ke;const Oe=this.getCenterInternal();return Oe!==void 0&&(ke=[Oe[0]-t[0],Oe[1]-t[1]],rotate$1(ke,e-this.getRotation()),add$1(ke,t)),ke}calculateCenterZoom(e,t){let ke;const Oe=this.getCenterInternal(),Ge=this.getResolution();if(Oe!==void 0&&Ge!==void 0){const Be=t[0]-e*(t[0]-Oe[0])/Ge,je=t[1]-e*(t[1]-Oe[1])/Ge;ke=[Be,je]}return ke}getViewportSize_(e){const t=this.viewportSize_;if(e){const ke=t[0],Oe=t[1];return[Math.abs(ke*Math.cos(e))+Math.abs(Oe*Math.sin(e)),Math.abs(ke*Math.sin(e))+Math.abs(Oe*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return toUserExtent(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();assert(t,"The view center is not defined");const ke=this.getResolution();assert(ke!==void 0,"The view resolution is not defined");const Oe=this.getRotation();return assert(Oe!==void 0,"The view rotation is not defined"),getForViewAndSize(t,ke,Oe,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const ke=getWidth(e)/t[0],Oe=getHeight(e)/t[1];return Math.max(ke,Oe)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),ke=this.minResolution_,Oe=Math.log(t/ke)/Math.log(e);return function(Ge){return t/Math.pow(e,Ge*Oe)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),ke=this.getConstrainedResolution(this.maxResolution_),Oe=this.minResolution_,Ge=Math.log(ke/Oe)/t;return function(Be){return Math.log(ke/Be)/t/Ge}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const ke=this.padding_;return ke&&(t=[t[0]-ke[1]-ke[3],t[1]-ke[0]-ke[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),ke=this.getRotation();let Oe=this.getCenterInternal();const Ge=this.padding_;if(Ge){const Be=this.getViewportSizeMinusPadding_();Oe=calculateCenterOn(Oe,this.getViewportSize_(),[Be[0]/2+Ge[3],Be[1]/2+Ge[0]],t,ke)}return{center:Oe.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:ke,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,ke,Oe;if(this.resolutions_){const Ge=linearFindNearest(this.resolutions_,e,1);t=Ge,ke=this.resolutions_[Ge],Ge==this.resolutions_.length-1?Oe=2:Oe=ke/this.resolutions_[Ge+1]}else ke=this.maxResolution_,Oe=this.zoomFactor_;return t+Math.log(ke/e)/Math.log(Oe)}getResolutionForZoom(e){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const t=clamp(Math.floor(e),0,this.resolutions_.length-2),ke=this.resolutions_[t]/this.resolutions_[t+1];return this.resolutions_[t]/Math.pow(ke,clamp(e-t,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let ke;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const Oe=fromUserExtent(e,this.getProjection());ke=fromExtent(Oe)}else if(e.getType()==="Circle"){const Oe=fromUserExtent(e.getExtent(),this.getProjection());ke=fromExtent(Oe),ke.rotate(this.getRotation(),getCenter(Oe))}else ke=e;this.fitInternal(ke,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),ke=Math.cos(t),Oe=Math.sin(-t),Ge=e.getFlatCoordinates(),Be=e.getStride();let je=1/0,Ve=1/0,Ze=-1/0,Qe=-1/0;for(let en=0,tn=Ge.length;en<tn;en+=Be){const an=Ge[en]*ke-Ge[en+1]*Oe,cn=Ge[en]*Oe+Ge[en+1]*ke;je=Math.min(je,an),Ve=Math.min(Ve,cn),Ze=Math.max(Ze,an),Qe=Math.max(Qe,cn)}return[je,Ve,Ze,Qe]}fitInternal(e,t){t=t||{};let ke=t.size;ke||(ke=this.getViewportSizeMinusPadding_());const Oe=t.padding!==void 0?t.padding:[0,0,0,0],Ge=t.nearest!==void 0?t.nearest:!1;let Be;t.minResolution!==void 0?Be=t.minResolution:t.maxZoom!==void 0?Be=this.getResolutionForZoom(t.maxZoom):Be=0;const je=this.rotatedExtentForGeometry(e);let Ve=this.getResolutionForExtentInternal(je,[ke[0]-Oe[1]-Oe[3],ke[1]-Oe[0]-Oe[2]]);Ve=isNaN(Ve)?Be:Math.max(Ve,Be),Ve=this.getConstrainedResolution(Ve,Ge?0:1);const Ze=this.getRotation(),Qe=Math.sin(Ze),en=Math.cos(Ze),tn=getCenter(je);tn[0]+=(Oe[1]-Oe[3])/2*Ve,tn[1]+=(Oe[0]-Oe[2])/2*Ve;const an=tn[0]*en-tn[1]*Qe,cn=tn[1]*en+tn[0]*Qe,dn=this.getConstrainedCenter([an,cn],Ve),hn=t.callback?t.callback:VOID;t.duration!==void 0?this.animateInternal({resolution:Ve,center:dn,duration:t.duration,easing:t.easing},hn):(this.targetResolution_=Ve,this.targetCenter_=dn,this.applyTargetState_(!1,!0),animationCallback(hn,!0))}centerOn(e,t,ke){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),t,ke)}centerOnInternal(e,t,ke){this.setCenterInternal(calculateCenterOn(e,t,ke,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,ke,Oe){let Ge;const Be=this.padding_;if(Be&&e){const je=this.getViewportSizeMinusPadding_(-ke),Ve=calculateCenterOn(e,Oe,[je[0]/2+Be[3],je[1]/2+Be[0]],t,ke);Ge=[e[0]-Ve[0],e[1]-Ve[1]]}return Ge}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&fromUserCoordinate(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const ke=this.getAnimating()||this.getInteracting(),Oe=this.getViewportSize_(this.getRotation()),Ge=this.constraints_.resolution(this.targetResolution_*e,0,Oe,ke);t&&(this.targetCenter_=this.calculateCenterZoom(Ge,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=fromUserCoordinate(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const ke=this.getAnimating()||this.getInteracting(),Oe=this.constraints_.rotation(this.targetRotation_+e,ke);t&&(this.targetCenter_=this.calculateCenterRotate(Oe,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const ke=this.getAnimating()||this.getInteracting()||t,Oe=this.constraints_.rotation(this.targetRotation_,ke),Ge=this.getViewportSize_(Oe),Be=this.constraints_.resolution(this.targetResolution_,0,Ge,ke),je=this.constraints_.center(this.targetCenter_,Be,Ge,ke,this.calculateCenterShift(this.targetCenter_,Be,Oe,Ge));this.get(ViewProperty.ROTATION)!==Oe&&this.set(ViewProperty.ROTATION,Oe),this.get(ViewProperty.RESOLUTION)!==Be&&(this.set(ViewProperty.RESOLUTION,Be),this.set("zoom",this.getZoom(),!0)),(!je||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),je))&&this.set(ViewProperty.CENTER,je),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,ke){e=e!==void 0?e:200;const Oe=t||0,Ge=this.constraints_.rotation(this.targetRotation_),Be=this.getViewportSize_(Ge),je=this.constraints_.resolution(this.targetResolution_,Oe,Be),Ve=this.constraints_.center(this.targetCenter_,je,Be,!1,this.calculateCenterShift(this.targetCenter_,je,Ge,Be));if(e===0&&!this.cancelAnchor_){this.targetResolution_=je,this.targetRotation_=Ge,this.targetCenter_=Ve,this.applyTargetState_();return}ke=ke||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==je||this.getRotation()!==Ge||!this.getCenterInternal()||!equals(this.getCenterInternal(),Ve))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:Ge,center:Ve,resolution:je,duration:e,easing:easeOut,anchor:ke}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,t,ke){ke=ke&&fromUserCoordinate(ke,this.getProjection()),this.endInteractionInternal(e,t,ke)}endInteractionInternal(e,t,ke){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,t,ke))}getConstrainedCenter(e,t){const ke=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),ke)}getConstrainedZoom(e,t){const ke=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(ke,t))}getConstrainedResolution(e,t){t=t||0;const ke=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,ke)}}function animationCallback(r,e){setTimeout(function(){r(e)},0)}function createCenterConstraint(r){if(r.extent!==void 0){const t=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return createExtent(r.extent,r.constrainOnlyCenter,t)}const e=createProjection(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,createExtent(t,!1,!1)}return none}function createResolutionConstraint(r){let e,t,ke,Be=r.minZoom!==void 0?r.minZoom:DEFAULT_MIN_ZOOM,je=r.maxZoom!==void 0?r.maxZoom:28;const Ve=r.zoomFactor!==void 0?r.zoomFactor:2,Ze=r.multiWorld!==void 0?r.multiWorld:!1,Qe=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,en=r.showFullExtent!==void 0?r.showFullExtent:!1,tn=createProjection(r.projection,"EPSG:3857"),an=tn.getExtent();let cn=r.constrainOnlyCenter,dn=r.extent;if(!Ze&&!dn&&tn.isGlobal()&&(cn=!1,dn=an),r.resolutions!==void 0){const hn=r.resolutions;t=hn[Be],ke=hn[je]!==void 0?hn[je]:hn[hn.length-1],r.constrainResolution?e=createSnapToResolutions(hn,Qe,!cn&&dn,en):e=createMinMaxResolution(t,ke,Qe,!cn&&dn,en)}else{const fn=(an?Math.max(getWidth(an),getHeight(an)):360*METERS_PER_UNIT$1.degrees/tn.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),pn=fn/Math.pow(2,28-DEFAULT_MIN_ZOOM);t=r.maxResolution,t!==void 0?Be=0:t=fn/Math.pow(Ve,Be),ke=r.minResolution,ke===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?ke=t/Math.pow(Ve,je):ke=fn/Math.pow(Ve,je):ke=pn),je=Be+Math.floor(Math.log(t/ke)/Math.log(Ve)),ke=t/Math.pow(Ve,je-Be),r.constrainResolution?e=createSnapToPower(Ve,t,ke,Qe,!cn&&dn,en):e=createMinMaxResolution(t,ke,Qe,!cn&&dn,en)}return{constraint:e,maxResolution:t,minResolution:ke,minZoom:Be,zoomFactor:Ve}}function createRotationConstraint(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const t=r.constrainRotation;return t===void 0||t===!0?createSnapToZero():t===!1?none$1:typeof t=="number"?createSnapToN(t):none$1}return disable}function isNoopAnimation(r){return!(r.sourceCenter&&r.targetCenter&&!equals(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function calculateCenterOn(r,e,t,ke,Oe){const Ge=Math.cos(-Oe);let Be=Math.sin(-Oe),je=r[0]*Ge-r[1]*Be,Ve=r[1]*Ge+r[0]*Be;je+=(e[0]/2-t[0])*ke,Ve+=(t[1]-e[1]/2)*ke,Be=-Be;const Ze=je*Ge-Ve*Be,Qe=Ve*Ge+je*Be;return[Ze,Qe]}let Layer$1=class extends BaseLayer{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const ke=e.source?e.source:null;this.setSource(ke)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const ke=this.getMapInternal();!e&&ke&&(e=ke.getView()),e instanceof View?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&ke&&(t.layerStatesArray=ke.getLayerGroup().getLayerStatesArray());let Oe;t.layerStatesArray?Oe=t.layerStatesArray.find(Be=>Be.layer===this):Oe=this.getLayerState();const Ge=this.getExtent();return inView(Oe,t.viewState)&&(!Ge||intersects$1(Ge,t.extent))}getAttributions(e){if(!this.isVisible(e))return[];let t;const ke=this.getSource();if(ke&&(t=ke.getAttributions()),!t)return[];const Oe=e instanceof View?e.getViewStateAndExtent():e;let Ge=t(Oe);return Array.isArray(Ge)||(Ge=[Ge]),Ge}render(e,t){const ke=this.getRenderer();return ke.prepareFrame(e)?(this.rendered=!0,ke.renderFrame(e,t)):null}unrender(){this.rendered=!1}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,function(t){const Oe=t.frameState.layerStatesArray,Ge=this.getLayerState(!1);assert(!Oe.some(function(Be){return Be.layer===Ge.layer}),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),Oe.push(Ge)},this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}};function inView(r,e){if(!r.visible)return!1;const t=e.resolution;if(t<r.minResolution||t>=r.maxResolution)return!1;const ke=e.zoom;return ke>r.minZoom&&ke<=r.maxZoom}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]};var xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"]};xyz.whitepoint={2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(r,e){e=e||xyz.whitepoint[2].E;var t=r[0]/e[0],ke=r[1]/e[1],Oe=r[2]/e[2],Ge,Be,je;return Ge=t*3.240969941904521+ke*-1.537383177570093+Oe*-.498610760293,Be=t*-.96924363628087+ke*1.87596750150772+Oe*.041555057407175,je=t*.055630079696993+ke*-.20397695888897+Oe*1.056971514242878,Ge=Ge>.0031308?1.055*Math.pow(Ge,1/2.4)-.055:Ge=Ge*12.92,Be=Be>.0031308?1.055*Math.pow(Be,1/2.4)-.055:Be=Be*12.92,je=je>.0031308?1.055*Math.pow(je,1/2.4)-.055:je=je*12.92,Ge=Math.min(Math.max(0,Ge),1),Be=Math.min(Math.max(0,Be),1),je=Math.min(Math.max(0,je),1),[Ge*255,Be*255,je*255]};rgb.xyz=function(r,e){var t=r[0]/255,ke=r[1]/255,Oe=r[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,ke=ke>.04045?Math.pow((ke+.055)/1.055,2.4):ke/12.92,Oe=Oe>.04045?Math.pow((Oe+.055)/1.055,2.4):Oe/12.92;var Ge=t*.41239079926595+ke*.35758433938387+Oe*.18048078840183,Be=t*.21263900587151+ke*.71516867876775+Oe*.072192315360733,je=t*.019330818715591+ke*.11919477979462+Oe*.95053215224966;return e=e||xyz.whitepoint[2].E,[Ge*e[0],Be*e[1],je*e[2]]};const luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(r,e,t){var ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,dn;if(Ge=r[0],Be=r[1],je=r[2],Ge===0)return[0,0,0];var hn=.0011070564598794539;return e=e||"D65",t=t||2,en=xyz.whitepoint[t][e][0],tn=xyz.whitepoint[t][e][1],an=xyz.whitepoint[t][e][2],cn=4*en/(en+15*tn+3*an),dn=9*tn/(en+15*tn+3*an),ke=Be/(13*Ge)+cn||0,Oe=je/(13*Ge)+dn||0,Ze=Ge>8?tn*Math.pow((Ge+16)/116,3):tn*Ge*hn,Ve=Ze*9*ke/(4*Oe)||0,Qe=Ze*(12-3*ke-20*Oe)/(4*Oe)||0,[Ve,Ze,Qe]}};xyz.luv=function(r,e,t){var ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,dn,hn=.008856451679035631,fn=903.2962962962961;e=e||"D65",t=t||2,en=xyz.whitepoint[t][e][0],tn=xyz.whitepoint[t][e][1],an=xyz.whitepoint[t][e][2],cn=4*en/(en+15*tn+3*an),dn=9*tn/(en+15*tn+3*an),Ve=r[0],Ze=r[1],Qe=r[2],ke=4*Ve/(Ve+15*Ze+3*Qe)||0,Oe=9*Ze/(Ve+15*Ze+3*Qe)||0;var pn=Ze/tn;return Ge=pn<=hn?fn*pn:116*Math.pow(pn,1/3)-16,Be=13*Ge*(ke-cn),je=13*Ge*(Oe-dn),[Ge,Be,je]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(r){var e=r[0],t=r[1],ke=r[2],Oe,Ge,Be;return Be=ke/360*2*Math.PI,Oe=t*Math.cos(Be),Ge=t*Math.sin(Be),[e,Oe,Ge]},xyz:function(r){return luv.xyz(lchuv.luv(r))}};luv.lchuv=function(r){var e=r[0],t=r[1],ke=r[2],Oe=Math.sqrt(t*t+ke*ke),Ge=Math.atan2(ke,t),Be=Ge*360/2/Math.PI;return Be<0&&(Be+=360),[e,Oe,Be]};xyz.lchuv=function(r){return luv.lchuv(xyz.luv(r))};const names$z={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$3(r){var Qe,en;var e,t=[],ke=1,Oe;if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(typeof r=="number")return{space:"rgb",values:[r>>>16,(r&65280)>>>8,r&255],alpha:1};if(r=String(r).toLowerCase(),names$z[r])t=names$z[r].slice(),Oe="rgb";else if(r==="transparent")ke=0,Oe="rgb",t=[0,0,0];else if(r[0]==="#"){var Ge=r.slice(1),Be=Ge.length,je=Be<=4;ke=1,je?(t=[parseInt(Ge[0]+Ge[0],16),parseInt(Ge[1]+Ge[1],16),parseInt(Ge[2]+Ge[2],16)],Be===4&&(ke=parseInt(Ge[3]+Ge[3],16)/255)):(t=[parseInt(Ge[0]+Ge[1],16),parseInt(Ge[2]+Ge[3],16),parseInt(Ge[4]+Ge[5],16)],Be===8&&(ke=parseInt(Ge[6]+Ge[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),Oe="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(r)){var Ve=e[1];Oe=Ve.replace(/a$/,"");var Ze=Oe==="cmyk"?4:Oe==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),Oe==="color"&&(Oe=t.shift()),t=t.map(function(tn,an){if(tn[tn.length-1]==="%")return tn=parseFloat(tn)/100,an===3?tn:Oe==="rgb"?tn*255:Oe[0]==="h"||Oe[0]==="l"&&!an?tn*100:Oe==="lab"?tn*125:Oe==="lch"?an<2?tn*150:tn*360:Oe[0]==="o"&&!an?tn:Oe==="oklab"?tn*.4:Oe==="oklch"?an<2?tn*.4:tn*360:tn;if(Oe[an]==="h"||an===2&&Oe[Oe.length-1]==="h"){if(baseHues[tn]!==void 0)return baseHues[tn];if(tn.endsWith("deg"))return parseFloat(tn);if(tn.endsWith("turn"))return parseFloat(tn)*360;if(tn.endsWith("grad"))return parseFloat(tn)*360/400;if(tn.endsWith("rad"))return parseFloat(tn)*180/Math.PI}return tn==="none"?0:parseFloat(tn)}),ke=t.length>Ze?t.pop():1}else/[0-9](?:\s|\/|,)/.test(r)&&(t=r.match(/([0-9]+)/g).map(function(tn){return parseFloat(tn)}),Oe=((en=(Qe=r.match(/([a-z])/ig))==null?void 0:Qe.join(""))==null?void 0:en.toLowerCase())||"rgb");return{space:Oe,values:t,alpha:ke}}const hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(r){var e=r[0]/360,t=r[1]/100,ke=r[2]/100,Oe,Ge,Be,je,Ve,Ze=0;if(t===0)return Ve=ke*255,[Ve,Ve,Ve];for(Ge=ke<.5?ke*(1+t):ke+t-ke*t,Oe=2*ke-Ge,je=[0,0,0];Ze<3;)Be=e+1/3*-(Ze-1),Be<0?Be++:Be>1&&Be--,Ve=6*Be<1?Oe+(Ge-Oe)*6*Be:2*Be<1?Ge:3*Be<2?Oe+(Ge-Oe)*(2/3-Be)*6:Oe,je[Ze++]=Ve*255;return je}};rgb.hsl=function(r){var e=r[0]/255,t=r[1]/255,ke=r[2]/255,Oe=Math.min(e,t,ke),Ge=Math.max(e,t,ke),Be=Ge-Oe,je,Ve,Ze;return Ge===Oe?je=0:e===Ge?je=(t-ke)/Be:t===Ge?je=2+(ke-e)/Be:ke===Ge&&(je=4+(e-t)/Be),je=Math.min(je*60,360),je<0&&(je+=360),Ze=(Oe+Ge)/2,Ge===Oe?Ve=0:Ze<=.5?Ve=Be/(Ge+Oe):Ve=Be/(2-Ge-Oe),[je,Ve*100,Ze*100]};function rgba$1(r){Array.isArray(r)&&r.raw&&(r=String.raw(...arguments)),r instanceof Number&&(r=+r);var e,t=parse$3(r);if(!t.space)return[];const ke=t.space[0]==="h"?hsl.min:rgb.min,Oe=t.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],ke[0]),Oe[0]),e[1]=Math.min(Math.max(t.values[1],ke[1]),Oe[1]),e[2]=Math.min(Math.max(t.values[2],ke[2]),Oe[2]),t.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}function asString(r){return typeof r=="string"?r:toString$2(r)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(r){if(r.length===4)return r;const e=r.slice();return e[3]=1,e}function rgbaToLcha(r){const e=xyz.lchuv(rgb.xyz(r));return e[3]=r[3],e}function lchaToRgba(r){const e=xyz.rgb(lchuv.xyz(r));return e[3]=r[3],e}function fromString(r){if(cache.hasOwnProperty(r))return cache[r];if(cacheSize>=MAX_CACHE_SIZE){let t=0;for(const ke in cache)t++&3||(delete cache[ke],--cacheSize)}const e=rgba$1(r);if(e.length!==4)throw new Error('Failed to parse "'+r+'" as color');for(const t of e)if(isNaN(t))throw new Error('Failed to parse "'+r+'" as color');return normalize(e),cache[r]=e,++cacheSize,e}function asArray(r){return Array.isArray(r)?r:fromString(r)}function normalize(r){return r[0]=clamp(r[0]+.5|0,0,255),r[1]=clamp(r[1]+.5|0,0,255),r[2]=clamp(r[2]+.5|0,0,255),r[3]=clamp(r[3],0,1),r}function toString$2(r){let e=r[0];e!=(e|0)&&(e=e+.5|0);let t=r[1];t!=(t|0)&&(t=t+.5|0);let ke=r[2];ke!=(ke|0)&&(ke=ke+.5|0);const Oe=r[3]===void 0?1:Math.round(r[3]*100)/100;return"rgba("+e+","+t+","+ke+","+Oe+")"}function isStringColor(r){try{return fromString(r),!0}catch{return!1}}function asColorLike(r){return Array.isArray(r)?toString$2(r):r}const defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",t=["monospace","serif"],ke=t.length,Oe="wmytzilWMYTZIL@#/&?$%10";let Ge,Be;function je(Ze,Qe,en){let tn=!0;for(let an=0;an<ke;++an){const cn=t[an];if(Be=measureTextWidth(Ze+" "+Qe+" "+e+cn,Oe),en!=cn){const dn=measureTextWidth(Ze+" "+Qe+" "+e+en+","+cn,Oe);tn=tn&&dn!=Be}}return!!tn}function Ve(){let Ze=!0;const Qe=checkedFonts.getKeys();for(let en=0,tn=Qe.length;en<tn;++en){const an=Qe[en];checkedFonts.get(an)<100&&(je.apply(this,an.split(`
`))?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(an,100)):(checkedFonts.set(an,checkedFonts.get(an)+1,!0),Ze=!1))}Ze&&(clearInterval(Ge),Ge=void 0)}return function(Ze){const Qe=getFontParameters(Ze);if(!Qe)return;const en=Qe.families;for(let tn=0,an=en.length;tn<an;++tn){const cn=en[tn],dn=Qe.style+`
`+Qe.weight+`
`+cn;checkedFonts.get(dn)===void 0&&(checkedFonts.set(dn,100,!0),je(Qe.style,Qe.weight,cn)||(checkedFonts.set(dn,0,!0),Ge===void 0&&(Ge=setInterval(Ve,32))))}}}(),measureTextHeight=function(){let r;return function(e){let t=textHeights[e];if(t==null){if(WORKER_OFFSCREEN_CANVAS){const ke=getFontParameters(e),Oe=measureText$1(e,"Žg");t=(isNaN(Number(ke.lineHeight))?1.2:Number(ke.lineHeight))*(Oe.actualBoundingBoxAscent+Oe.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=e,document.body.appendChild(r),t=r.offsetHeight,document.body.removeChild(r);textHeights[e]=t}return t}}();function measureText$1(r,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),r!=measureFont&&(measureContext$1.font=r,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(r,e){return measureText$1(r,e).width}function measureAndCacheTextWidth(r,e,t){if(e in t)return t[e];const ke=e.split(`
`).reduce((Oe,Ge)=>Math.max(Oe,measureTextWidth(r,Ge)),0);return t[e]=ke,ke}function getTextDimensions(r,e){const t=[],ke=[],Oe=[];let Ge=0,Be=0,je=0,Ve=0;for(let Ze=0,Qe=e.length;Ze<=Qe;Ze+=2){const en=e[Ze];if(en===`
`||Ze===Qe){Ge=Math.max(Ge,Be),Oe.push(Be),Be=0,je+=Ve;continue}const tn=e[Ze+1]||r.font,an=measureTextWidth(tn,en);t.push(an),Be+=an;const cn=measureTextHeight(tn);ke.push(cn),Ve=Math.max(Ve,cn)}return{width:Ge,height:je,widths:t,heights:ke,lineWidths:Oe}}function drawImageOrLabel(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe){r.save(),t!==1&&(r.globalAlpha*=t),e&&r.transform.apply(r,e),ke.contextInstructions?(r.translate(Ve,Ze),r.scale(Qe[0],Qe[1]),executeLabelInstructions(ke,r)):Qe[0]<0||Qe[1]<0?(r.translate(Ve,Ze),r.scale(Qe[0],Qe[1]),r.drawImage(ke,Oe,Ge,Be,je,0,0,Be,je)):r.drawImage(ke,Oe,Ge,Be,je,Ve,Ze,Be*Qe[0],je*Qe[1]),r.restore()}function executeLabelInstructions(r,e){const t=r.contextInstructions;for(let ke=0,Oe=t.length;ke<Oe;ke+=2)Array.isArray(t[ke+1])?e[t[ke]].apply(e,t[ke+1]):e[t[ke]]=t[ke+1]}class RegularShape extends ImageStyle{constructor(e){const t=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:1,rotateWithView:t,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius_=e.radius!==void 0?e.radius:e.radius1,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.render()}clone(){const e=this.getScale(),t=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),ke=this.getScaleArray();return[e[0]/2-t[0]/ke[0],e[1]/2+t[1]/ke[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){let t=this.canvases_[e];if(!t){const ke=this.renderOptions_,Oe=createCanvasContext2D(ke.size*e,ke.size*e);this.draw_(ke,Oe,e),t=Oe.canvas,this.canvases_[e]=t}return t}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return ImageState.LOADED}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,ke){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let Oe=this.radius_,Ge=this.radius2_===void 0?Oe:this.radius2_;if(Oe<Ge){const wn=Oe;Oe=Ge,Ge=wn}const Be=this.radius2_===void 0?this.points_:this.points_*2,je=2*Math.PI/Be,Ve=Ge*Math.sin(je),Ze=Math.sqrt(Ge*Ge-Ve*Ve),Qe=Oe-Ze,en=Math.sqrt(Ve*Ve+Qe*Qe),tn=en/Ve;if(e==="miter"&&tn<=ke)return tn*t;const an=t/2/tn,cn=t/2*(Qe/en),hn=Math.sqrt((Oe+an)*(Oe+an)+cn*cn)-Oe;if(this.radius2_===void 0||e==="bevel")return hn*2;const fn=Oe*Math.sin(je),pn=Math.sqrt(Oe*Oe-fn*fn),mn=Ge-pn,Cn=Math.sqrt(fn*fn+mn*mn)/fn;if(Cn<=ke){const wn=Cn*t/2-Ge-Oe;return 2*Math.max(hn,wn)}return hn*2}createRenderOptions(){let e=defaultLineCap,t=defaultLineJoin,ke=0,Oe=null,Ge=0,Be,je=0;this.stroke_&&(Be=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),je=this.stroke_.getWidth()??defaultLineWidth,Oe=this.stroke_.getLineDash(),Ge=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,ke=this.stroke_.getMiterLimit()??defaultMiterLimit);const Ve=this.calculateLineJoinSize_(t,je,ke),Ze=Math.max(this.radius_,this.radius2_||0),Qe=Math.ceil(2*Ze+Ve);return{strokeStyle:Be,strokeWidth:je,size:Qe,lineCap:e,lineDash:Oe,lineDashOffset:Ge,lineJoin:t,miterLimit:ke}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,ke){if(t.scale(ke,ke),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let Oe=this.fill_.getColor();Oe===null&&(Oe=defaultFillStyle),t.fillStyle=asColorLike(Oe),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let ke=this.fill_.getColor(),Oe=0;typeof ke=="string"&&(ke=asArray(ke)),ke===null?Oe=1:Array.isArray(ke)&&(Oe=ke.length===4?ke[3]:1),Oe===0&&(t=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const ke=this.radius_;if(t===1/0)e.arc(0,0,ke,0,2*Math.PI);else{const Oe=this.radius2_===void 0?ke:this.radius2_;this.radius2_!==void 0&&(t*=2);const Ge=this.angle_-Math.PI/2,Be=2*Math.PI/t;for(let je=0;je<t;je++){const Ve=Ge+je*Be,Ze=je%2===0?ke:Oe;e.lineTo(Ze*Math.cos(Ve),Ze*Math.sin(Ve))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=defaultFillStyle,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius_=e,this.render()}}class Fill{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){this.color_=e}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}let Style$1=class kf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new kf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function toFunction(r){let e;if(typeof r=="function")e=r;else{let t;Array.isArray(r)?t=r:(assert(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[r]),e=function(){return t}}return e}let defaultStyles=null;function createDefaultStyle(r,e){if(!defaultStyles){const t=new Fill({color:"rgba(255,255,255,0.4)"}),ke=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style$1({image:new CircleStyle({fill:t,stroke:ke,radius:5}),fill:t,stroke:ke})]}return defaultStyles}function createEditingStyle(){const r={},e=[255,255,255,1],t=[0,153,255,1],ke=3;return r.Polygon=[new Style$1({fill:new Fill({color:[255,255,255,.5]})})],r.MultiPolygon=r.Polygon,r.LineString=[new Style$1({stroke:new Stroke({color:e,width:ke+2})}),new Style$1({stroke:new Stroke({color:t,width:ke})})],r.MultiLineString=r.LineString,r.Circle=r.Polygon.concat(r.LineString),r.Point=[new Style$1({image:new CircleStyle({radius:ke*2,fill:new Fill({color:t}),stroke:new Stroke({color:e,width:ke/2})}),zIndex:1/0})],r.MultiPoint=r.Point,r.GeometryCollection=r.Polygon.concat(r.LineString,r.Point),r}function defaultGeometryFunction(r){return r.getGeometry()}class IconImageCache{constructor(){this.cache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const ke=this.cache_[t];!(e++&3)&&!ke.hasListener()&&(delete this.cache_[t],--this.cacheSize_)}}}get(e,t,ke){const Oe=getKey(e,t,ke);return Oe in this.cache_?this.cache_[Oe]:null}set(e,t,ke,Oe){const Ge=getKey(e,t,ke);this.cache_[Ge]=Oe,++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getKey(r,e,t){const ke=t?asString(t):"null";return e+":"+r+":"+ke}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(e,t,ke,Oe,Ge){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=ke,this.canvas_={},this.color_=Ge,this.imageState_=Oe===void 0?ImageState.IDLE:Oe,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],ke=createCanvasContext2D(e,t);ke.fillRect(0,0,e,t),this.hitDetectionImage_=ke.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const t=this.image_,ke=document.createElement("canvas");ke.width=Math.ceil(t.width*e),ke.height=Math.ceil(t.height*e);const Oe=ke.getContext("2d");Oe.scale(e,e),Oe.drawImage(t,0,0),Oe.globalCompositeOperation="multiply",Oe.fillStyle=asString(this.color_),Oe.fillRect(0,0,ke.width/e,ke.height/e),Oe.globalCompositeOperation="destination-in",Oe.drawImage(t,0,0),this.canvas_[e]=ke}}function get$2(r,e,t,ke,Oe){let Ge=e===void 0?void 0:shared.get(e,t,Oe);return Ge||(Ge=new IconImage(r,r instanceof HTMLImageElement?r.src||void 0:e,t,ke,Oe),shared.set(e,t,Oe,Ge)),Ge}function calculateScale(r,e,t,ke){return t!==void 0&&ke!==void 0?[t/r,ke/e]:t!==void 0?t/r:ke!==void 0?ke/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,ke=e.rotation!==void 0?e.rotation:0,Oe=e.scale!==void 0?e.scale:1,Ge=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:ke,scale:Oe,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:Ge,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const Be=e.img!==void 0?e.img:null;let je=e.src;assert(!(je!==void 0&&Be),"`image` and `src` cannot be provided at the same time"),(je===void 0||je.length===0)&&Be&&(je=Be.src||getUid(Be)),assert(je!==void 0&&je.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let Ve;if(e.src!==void 0?Ve=ImageState.IDLE:Be!==void 0&&(Be instanceof HTMLImageElement?Be.complete?Ve=Be.src?ImageState.LOADED:ImageState.IDLE:Ve=ImageState.LOADING:Ve=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(Be,je,this.crossOrigin_,Ve,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,e.width!==void 0||e.height!==void 0){let Ze,Qe;if(e.size)[Ze,Qe]=e.size;else{const en=this.getImage(1);if(en.width&&en.height)Ze=en.width,Qe=en.height;else if(en instanceof HTMLImageElement){this.initialOptions_=e;const tn=()=>{if(this.unlistenImageChange(tn),!this.initialOptions_)return;const an=this.iconImage_.getSize();this.setScale(calculateScale(an[0],an[1],e.width,e.height))};this.listenImageChange(tn);return}}Ze!==void 0&&this.setScale(calculateScale(Ze,Qe,e.width,e.height))}}clone(){let e,t,ke;return this.initialOptions_?(t=this.initialOptions_.width,ke=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:ke,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const Oe=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!Oe)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=Oe[0]),this.anchorYUnits_=="fraction"&&(e[1]*=Oe[1])}if(this.anchorOrigin_!="top-left"){if(!Oe)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+Oe[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+Oe[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),ke=this.getScaleArray();return[e[0]-t[0]/ke[0],e[1]+t[1]/ke[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),ke=this.iconImage_.getSize();if(!t||!ke)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=ke[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=ke[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}}const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let numTypes=0;const NoneType=0,BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function typeName(r){const e=[];for(const t of namedTypes)includesType(r,t)&&e.push(typeNames[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(r,e){return(r&e)===e}function overlapsType(r,e){return!!(r&e)}function isType(r,e){return r===e}class LiteralExpression{constructor(e,t){this.type=e,this.value=t}}class CallExpression{constructor(e,t,...ke){this.type=e,this.operator=t,this.args=ke}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function getTypeFromHint(r){switch(r){case"string":return StringType$1;case"color":return ColorType$1;case"number":return NumberType$1;case"boolean":return BooleanType$1;case"number[]":return NumberArrayType;default:throw new Error(`Unrecognized type hint: ${r}`)}}function parse$2(r,e,t){switch(typeof r){case"boolean":return new LiteralExpression(BooleanType$1,r);case"number":return new LiteralExpression(NumberType$1,r);case"string":{let Oe=StringType$1;return isStringColor(r)&&(Oe|=ColorType$1),isType(Oe&t,NoneType)||(Oe&=t),new LiteralExpression(Oe,r)}}if(!Array.isArray(r))throw new Error("Expression must be an array or a primitive value");if(r.length===0)throw new Error("Empty expression");if(typeof r[0]=="string")return parseCallExpression(r,e,t);for(const Oe of r)if(typeof Oe!="number")throw new Error("Expected an array of numbers");let ke=NumberArrayType;return(r.length===3||r.length===4)&&(ke|=ColorType$1),t&&(ke&=t),new LiteralExpression(ke,r)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},parsers={[Ops.Get]:createParser(([r,e])=>e!==void 0?getTypeFromHint(e.value):AnyType,withArgsCount(1,2),withGetArgs),[Ops.Var]:createParser(([r])=>r.type,withArgsCount(1,1),withVarArgs),[Ops.Id]:createParser(NumberType$1|StringType$1,withNoArgs,usesFeatureId),[Ops.Concat]:createParser(StringType$1,withArgsCount(2,1/0),parseArgsOfType(AnyType)),[Ops.GeometryType]:createParser(StringType$1,withNoArgs),[Ops.Resolution]:createParser(NumberType$1,withNoArgs),[Ops.Zoom]:createParser(NumberType$1,withNoArgs),[Ops.Time]:createParser(NumberType$1,withNoArgs),[Ops.Any]:createParser(BooleanType$1,withArgsCount(2,1/0),parseArgsOfType(BooleanType$1)),[Ops.All]:createParser(BooleanType$1,withArgsCount(2,1/0),parseArgsOfType(BooleanType$1)),[Ops.Not]:createParser(BooleanType$1,withArgsCount(1,1),parseArgsOfType(BooleanType$1)),[Ops.Equal]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.NotEqual]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThan]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.GreaterThanOrEqualTo]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThan]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.LessThanOrEqualTo]:createParser(BooleanType$1,withArgsCount(2,2),parseArgsOfType(AnyType),narrowArgsType),[Ops.Multiply]:createParser(r=>{let e=NumberType$1|ColorType$1;for(let t=0;t<r.length;t++)e&=r[t].type;return e},withArgsCount(2,1/0),parseArgsOfType(NumberType$1|ColorType$1),narrowArgsType),[Ops.Divide]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Add]:createParser(NumberType$1,withArgsCount(2,1/0),parseArgsOfType(NumberType$1)),[Ops.Subtract]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Clamp]:createParser(NumberType$1,withArgsCount(3,3),parseArgsOfType(NumberType$1)),[Ops.Mod]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Pow]:createParser(NumberType$1,withArgsCount(2,2),parseArgsOfType(NumberType$1)),[Ops.Abs]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Floor]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Ceil]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Round]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Sin]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Cos]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Atan]:createParser(NumberType$1,withArgsCount(1,2),parseArgsOfType(NumberType$1)),[Ops.Sqrt]:createParser(NumberType$1,withArgsCount(1,1),parseArgsOfType(NumberType$1)),[Ops.Match]:createParser(r=>{let e=AnyType;for(let t=2;t<r.length;t+=2)e&=r[t].type;return e&=r[r.length-1].type,e},withArgsCount(4,1/0),withEvenArgs,parseMatchArgs),[Ops.Between]:createParser(BooleanType$1,withArgsCount(3,3),parseArgsOfType(NumberType$1)),[Ops.Interpolate]:createParser(r=>{let e=ColorType$1|NumberType$1;for(let t=3;t<r.length;t+=2)e&=r[t].type;return e},withArgsCount(6,1/0),withEvenArgs,parseInterpolateArgs),[Ops.Case]:createParser(r=>{let e=AnyType;for(let t=1;t<r.length;t+=2)e&=r[t].type;return e&=r[r.length-1].type,e},withArgsCount(3,1/0),withOddArgs,parseCaseArgs),[Ops.In]:createParser(BooleanType$1,withArgsCount(2,2),parseInArgs),[Ops.Number]:createParser(NumberType$1,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.String]:createParser(StringType$1,withArgsCount(1,1/0),parseArgsOfType(AnyType)),[Ops.Array]:createParser(r=>r.length===3||r.length===4?NumberArrayType|ColorType$1:NumberArrayType,withArgsCount(1,1/0),parseArgsOfType(NumberType$1)),[Ops.Color]:createParser(ColorType$1,withArgsCount(3,4),parseArgsOfType(NumberType$1)),[Ops.Band]:createParser(NumberType$1,withArgsCount(1,3),parseArgsOfType(NumberType$1)),[Ops.Palette]:createParser(ColorType$1,withArgsCount(2,2),parsePaletteArgs)};function withGetArgs(r,e){const t=parse$2(r[1],e);if(!(t instanceof LiteralExpression))throw new Error("Expected a literal argument for get operation");if(typeof t.value!="string")throw new Error("Expected a string argument for get operation");if(e.properties.add(t.value),r.length===3){const ke=parse$2(r[2],e);return[t,ke]}return[t]}function withVarArgs(r,e,t,ke){const Oe=r[1];if(typeof Oe!="string")throw new Error("Expected a string argument for var operation");if(e.variables.add(Oe),!("variables"in e.style)||e.style.variables[Oe]===void 0)return[new LiteralExpression(AnyType,Oe)];const Ge=e.style.variables[Oe],Be=parse$2(Ge,e);if(Be.value=Oe,ke&&!overlapsType(ke,Be.type))throw new Error(`The variable ${Oe} has type ${typeName(Be.type)} but the following type was expected: ${typeName(ke)}`);return[Be]}function usesFeatureId(r,e){e.featureId=!0}function withNoArgs(r,e){const t=r[0];if(r.length!==1)throw new Error(`Expected no arguments for ${t} operation`);return[]}function withArgsCount(r,e){return function(t,ke){const Oe=t[0],Ge=t.length-1;if(r===e){if(Ge!==r){const Be=r===1?"":"s";throw new Error(`Expected ${r} argument${Be} for ${Oe}, got ${Ge}`)}}else if(Ge<r||Ge>e){const Be=e===1/0?`${r} or more`:`${r} to ${e}`;throw new Error(`Expected ${Be} arguments for ${Oe}, got ${Ge}`)}}}function parseArgsOfType(r){return function(e,t){const ke=e[0],Oe=e.length-1,Ge=new Array(Oe);for(let Be=0;Be<Oe;++Be){const je=parse$2(e[Be+1],t);if(!overlapsType(r,je.type)){const Ve=typeName(r),Ze=typeName(je.type);throw new Error(`Unexpected type for argument ${Be} of ${ke} operation, got ${Ve} but expected ${Ze}`)}je.type&=r,Ge[Be]=je}return Ge}}function narrowArgsType(r,e,t){const ke=r[0],Oe=r.length-1;let Ge=AnyType;for(let je=0;je<t.length;++je)Ge&=t[je].type;if(Ge===NoneType)throw new Error(`No common type could be found for arguments of ${ke} operation`);const Be=new Array(Oe);for(let je=0;je<Oe;++je)Be[je]=parse$2(r[je+1],e,Ge);return Be}function withOddArgs(r,e){const t=r[0],ke=r.length-1;if(ke%2===0)throw new Error(`An odd amount of arguments was expected for operation ${t}, got ${JSON.stringify(ke)} instead`)}function withEvenArgs(r,e){const t=r[0],ke=r.length-1;if(ke%2===1)throw new Error(`An even amount of arguments was expected for operation ${t}, got ${JSON.stringify(ke)} instead`)}function parseMatchArgs(r,e,t,ke){const Oe=r.length-1;let Be=parse$2(r[1],e).type;const je=parse$2(r[r.length-1],e);let Ve=ke!==void 0?ke&je.type:je.type;const Ze=new Array(Oe-2);for(let en=0;en<Oe-2;en+=2){const tn=parse$2(r[en+2],e),an=parse$2(r[en+3],e);Be&=tn.type,Ve&=an.type,Ze[en]=tn,Ze[en+1]=an}const Qe=StringType$1|NumberType$1|BooleanType$1;if(!overlapsType(Qe,Be))throw new Error(`Expected an input of type ${typeName(Qe)} for the interpolate operation, got ${typeName(Be)} instead`);if(isType(Ve,NoneType))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(r));for(let en=0;en<Oe-2;en+=2){const tn=parse$2(r[en+2],e,Be),an=parse$2(r[en+3],e,Ve);Ze[en]=tn,Ze[en+1]=an}return[parse$2(r[1],e,Be),...Ze,parse$2(r[r.length-1],e,Ve)]}function parseInterpolateArgs(r,e,t,ke){const Oe=r[1];let Ge;switch(Oe[0]){case"linear":Ge=1;break;case"exponential":if(Ge=Oe[1],typeof Ge!="number")throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(Ge)} instead`);break;default:Ge=null}if(!Ge)throw new Error(`Invalid interpolation type: ${JSON.stringify(Oe)}`);Ge=parse$2(Ge,e);let Be=parse$2(r[2],e);if(!overlapsType(NumberType$1,Be.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${typeName(Be.type)} instead`);Be=parse$2(r[2],e,NumberType$1);const je=new Array(r.length-3);for(let Ve=0;Ve<je.length;Ve+=2){let Ze=parse$2(r[Ve+3],e);if(!overlapsType(NumberType$1,Ze.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${typeName(Ze.type)} at position ${Ve+2} instead`);let Qe=parse$2(r[Ve+4],e);if(!overlapsType(NumberType$1|ColorType$1,Qe.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${typeName(Qe.type)} at position ${Ve+3} instead`);Ze=parse$2(r[Ve+3],e,NumberType$1),Qe=parse$2(r[Ve+4],e,NumberType$1|ColorType$1),je[Ve]=Ze,je[Ve+1]=Qe}return[Ge,Be,...je]}function parseCaseArgs(r,e,t,ke){const Oe=parse$2(r[r.length-1],e);let Ge=ke!==void 0?ke&Oe.type:Oe.type;const Be=new Array(r.length-1);for(let je=0;je<Be.length-1;je+=2){const Ve=parse$2(r[je+1],e),Ze=parse$2(r[je+2],e);if(!overlapsType(BooleanType$1,Ve.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${typeName(Ve.type)} at position ${je} instead`);Ge&=Ze.type,Be[je]=Ve,Be[je+1]=Ze}if(isType(Ge,NoneType))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(r));for(let je=0;je<Be.length-1;je+=2)Be[je+1]=parse$2(r[je+2],e,Ge);return Be[Be.length-1]=parse$2(r[r.length-1],e,Ge),Be}function parseInArgs(r,e){let t=r[2];if(!Array.isArray(t))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if(typeof t[0]=="string"){if(t[0]!=="literal")throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(t[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');t=t[1]}let ke=StringType$1|NumberType$1;const Oe=new Array(t.length);for(let Be=0;Be<Oe.length;Be++){const je=parse$2(t[Be],e);ke&=je.type,Oe[Be]=je}if(isType(ke,NoneType))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(r));return[parse$2(r[1],e,ke),...Oe]}function parsePaletteArgs(r,e){const t=parse$2(r[1],e,NumberType$1);if(t.type!==NumberType$1)throw new Error(`The first argument of palette must be an number, got ${typeName(t.type)} instead`);const ke=r[2];if(!Array.isArray(ke))throw new Error("The second argument of palette must be an array");const Oe=new Array(ke.length);for(let Ge=0;Ge<Oe.length;Ge++){const Be=parse$2(ke[Ge],e,ColorType$1);if(!(Be instanceof LiteralExpression))throw new Error(`The palette color at index ${Ge} must be a literal value`);if(!overlapsType(Be.type,ColorType$1))throw new Error(`The palette color at index ${Ge} should be of type color, got ${typeName(Be.type)} instead`);Oe[Ge]=Be}return[t,...Oe]}function createParser(r,...e){return function(t,ke,Oe){const Ge=t[0];let Be=[];for(let Ve=0;Ve<e.length;Ve++)Be=e[Ve](t,ke,Be,Oe)||Be;let je=typeof r=="function"?r(Be):r;if(Oe!==void 0){if(!overlapsType(je,Oe))throw new Error(`The following expression was expected to return ${typeName(Oe)}, but returns ${typeName(je)} instead: ${JSON.stringify(t)}`);je&=Oe}if(je===NoneType)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(t)}`);return new CallExpression(je,Ge,...Be)}}function parseCallExpression(r,e,t){const ke=r[0],Oe=parsers[ke];if(!Oe)throw new Error(`Unknown operator: ${ke}`);return Oe(r,e,t)}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function buildExpression(r,e,t){const ke=parse$2(r,t);if(!overlapsType(e,ke.type)){const Oe=typeName(e),Ge=typeName(ke.type);throw new Error(`Expected expression to be of type ${Oe}, got ${Ge}`)}return compileExpression(ke)}function compileExpression(r,e){if(r instanceof LiteralExpression){if(r.type===ColorType$1&&typeof r.value=="string"){const ke=fromString(r.value);return function(){return ke}}return function(){return r.value}}const t=r.operator;switch(t){case Ops.Number:case Ops.String:return compileAssertionExpression(r);case Ops.Get:case Ops.Var:return compileAccessorExpression(r);case Ops.Id:return ke=>ke.featureId;case Ops.Concat:{const ke=r.args.map(Oe=>compileExpression(Oe));return Oe=>"".concat(...ke.map(Ge=>Ge(Oe).toString()))}case Ops.Resolution:return ke=>ke.resolution;case Ops.Any:case Ops.All:case Ops.Not:return compileLogicalExpression(r);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(r);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(r);case Ops.Match:return compileMatchExpression(r);case Ops.Interpolate:return compileInterpolateExpression(r);default:throw new Error(`Unsupported operator ${t}`)}}function compileAssertionExpression(r,e){const t=r.operator,ke=r.args.length,Oe=new Array(ke);for(let Ge=0;Ge<ke;++Ge)Oe[Ge]=compileExpression(r.args[Ge]);switch(t){case Ops.Number:case Ops.String:return Ge=>{for(let Be=0;Be<ke;++Be){const je=Oe[Be](Ge);if(typeof je===t)return je}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function compileAccessorExpression(r,e){const ke=r.args[0].value;switch(r.operator){case Ops.Get:return Oe=>Oe.properties[ke];case Ops.Var:return Oe=>Oe.variables[ke];default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function compileComparisonExpression(r,e){const t=r.operator,ke=compileExpression(r.args[0]),Oe=compileExpression(r.args[1]);switch(t){case Ops.Equal:return Ge=>ke(Ge)===Oe(Ge);case Ops.NotEqual:return Ge=>ke(Ge)!==Oe(Ge);case Ops.LessThan:return Ge=>ke(Ge)<Oe(Ge);case Ops.LessThanOrEqualTo:return Ge=>ke(Ge)<=Oe(Ge);case Ops.GreaterThan:return Ge=>ke(Ge)>Oe(Ge);case Ops.GreaterThanOrEqualTo:return Ge=>ke(Ge)>=Oe(Ge);default:throw new Error(`Unsupported comparison operator ${t}`)}}function compileLogicalExpression(r,e){const t=r.operator,ke=r.args.length,Oe=new Array(ke);for(let Ge=0;Ge<ke;++Ge)Oe[Ge]=compileExpression(r.args[Ge]);switch(t){case Ops.Any:return Ge=>{for(let Be=0;Be<ke;++Be)if(Oe[Be](Ge))return!0;return!1};case Ops.All:return Ge=>{for(let Be=0;Be<ke;++Be)if(!Oe[Be](Ge))return!1;return!0};case Ops.Not:return Ge=>!Oe[0](Ge);default:throw new Error(`Unsupported logical operator ${t}`)}}function compileNumericExpression(r,e){const t=r.operator,ke=r.args.length,Oe=new Array(ke);for(let Ge=0;Ge<ke;++Ge)Oe[Ge]=compileExpression(r.args[Ge]);switch(t){case Ops.Multiply:return Ge=>{let Be=1;for(let je=0;je<ke;++je)Be*=Oe[je](Ge);return Be};case Ops.Divide:return Ge=>Oe[0](Ge)/Oe[1](Ge);case Ops.Add:return Ge=>{let Be=0;for(let je=0;je<ke;++je)Be+=Oe[je](Ge);return Be};case Ops.Subtract:return Ge=>Oe[0](Ge)-Oe[1](Ge);case Ops.Clamp:return Ge=>{const Be=Oe[0](Ge),je=Oe[1](Ge);if(Be<je)return je;const Ve=Oe[2](Ge);return Be>Ve?Ve:Be};case Ops.Mod:return Ge=>Oe[0](Ge)%Oe[1](Ge);case Ops.Pow:return Ge=>Math.pow(Oe[0](Ge),Oe[1](Ge));case Ops.Abs:return Ge=>Math.abs(Oe[0](Ge));case Ops.Floor:return Ge=>Math.floor(Oe[0](Ge));case Ops.Ceil:return Ge=>Math.ceil(Oe[0](Ge));case Ops.Round:return Ge=>Math.round(Oe[0](Ge));case Ops.Sin:return Ge=>Math.sin(Oe[0](Ge));case Ops.Cos:return Ge=>Math.cos(Oe[0](Ge));case Ops.Atan:return ke===2?Ge=>Math.atan2(Oe[0](Ge),Oe[1](Ge)):Ge=>Math.atan(Oe[0](Ge));case Ops.Sqrt:return Ge=>Math.sqrt(Oe[0](Ge));default:throw new Error(`Unsupported numeric operator ${t}`)}}function compileMatchExpression(r,e){const t=r.args.length,ke=new Array(t);for(let Oe=0;Oe<t;++Oe)ke[Oe]=compileExpression(r.args[Oe]);return Oe=>{const Ge=ke[0](Oe);for(let Be=1;Be<t;Be+=2)if(Ge===ke[Be](Oe))return ke[Be+1](Oe);return ke[t-1](Oe)}}function compileInterpolateExpression(r,e){const t=r.args.length,ke=new Array(t);for(let Oe=0;Oe<t;++Oe)ke[Oe]=compileExpression(r.args[Oe]);return Oe=>{const Ge=ke[0](Oe),Be=ke[1](Oe);let je,Ve;for(let Ze=2;Ze<t;Ze+=2){const Qe=ke[Ze](Oe);let en=ke[Ze+1](Oe);const tn=Array.isArray(en);if(tn&&(en=withAlpha(en)),Qe>=Be)return Ze===2?en:tn?interpolateColor(Ge,Be,je,Ve,Qe,en):interpolateNumber(Ge,Be,je,Ve,Qe,en);je=Qe,Ve=en}return Ve}}function interpolateNumber(r,e,t,ke,Oe,Ge){const Be=Oe-t;if(Be===0)return ke;const je=e-t,Ve=r===1?je/Be:(Math.pow(r,je)-1)/(Math.pow(r,Be)-1);return ke+Ve*(Ge-ke)}function interpolateColor(r,e,t,ke,Oe,Ge){if(Oe-t===0)return ke;const je=rgbaToLcha(ke),Ve=rgbaToLcha(Ge);let Ze=Ve[2]-je[2];Ze>180?Ze-=360:Ze<-180&&(Ze+=360);const Qe=[interpolateNumber(r,e,t,je[0],Oe,Ve[0]),interpolateNumber(r,e,t,je[1],Oe,Ve[1]),je[2]+interpolateNumber(r,e,t,0,Oe,Ze),interpolateNumber(r,e,t,ke[3],Oe,Ge[3])];return normalize(lchaToRgba(Qe))}function always(r){return!0}function rulesToStyleFunction(r){const e=newParsingContext(),t=buildRuleSet(r,e),ke=newEvaluationContext();return function(Oe,Ge){if(ke.properties=Oe.getPropertiesInternal(),ke.resolution=Ge,e.featureId){const Be=Oe.getId();Be!==void 0?ke.featureId=Be:ke.featureId=null}return t(ke)}}function flatStylesToStyleFunction(r){const e=newParsingContext(),t=r.length,ke=new Array(t);for(let Be=0;Be<t;++Be)ke[Be]=buildStyle(r[Be],e);const Oe=newEvaluationContext(),Ge=new Array(t);return function(Be,je){if(Oe.properties=Be.getPropertiesInternal(),Oe.resolution=je,e.featureId){const Ze=Be.getId();Ze!==void 0?Oe.featureId=Ze:Oe.featureId=null}let Ve=0;for(let Ze=0;Ze<t;++Ze){const Qe=ke[Ze](Oe);Qe&&(Ge[Ve]=Qe,Ve+=1)}return Ge.length=Ve,Ge}}function buildRuleSet(r,e){const t=r.length,ke=new Array(t);for(let Oe=0;Oe<t;++Oe){const Ge=r[Oe],Be="filter"in Ge?buildExpression(Ge.filter,BooleanType$1,e):always;let je;if(Array.isArray(Ge.style)){const Ve=Ge.style.length;je=new Array(Ve);for(let Ze=0;Ze<Ve;++Ze)je[Ze]=buildStyle(Ge.style[Ze],e)}else je=[buildStyle(Ge.style,e)];ke[Oe]={filter:Be,styles:je}}return function(Oe){const Ge=[];let Be=!1;for(let je=0;je<t;++je){const Ve=ke[je].filter;if(Ve(Oe)&&!(r[je].else&&Be)){Be=!0;for(const Ze of ke[je].styles){const Qe=Ze(Oe);Qe&&Ge.push(Qe)}}}return Ge}}function buildStyle(r,e){const t=buildFill(r,"",e),ke=buildStroke(r,"",e),Oe=buildText(r,e),Ge=buildImage(r,e),Be=numberEvaluator(r,"z-index",e);if(!t&&!ke&&!Oe&&!Ge&&!isEmpty$1(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const je=new Style$1;return function(Ve){let Ze=!0;if(t){const Qe=t(Ve);Qe&&(Ze=!1),je.setFill(Qe)}if(ke){const Qe=ke(Ve);Qe&&(Ze=!1),je.setStroke(Qe)}if(Oe){const Qe=Oe(Ve);Qe&&(Ze=!1),je.setText(Qe)}if(Ge){const Qe=Ge(Ve);Qe&&(Ze=!1),je.setImage(Qe)}return Be&&je.setZIndex(Be(Ve)),Ze?null:je}}function buildFill(r,e,t){const ke=colorLikeEvaluator(r,e+"fill-color",t);if(!ke)return null;const Oe=new Fill;return function(Ge){const Be=ke(Ge);return Be==="none"?null:(Oe.setColor(Be),Oe)}}function buildStroke(r,e,t){const ke=numberEvaluator(r,e+"stroke-width",t),Oe=colorLikeEvaluator(r,e+"stroke-color",t);if(!ke&&!Oe)return null;const Ge=stringEvaluator(r,e+"stroke-line-cap",t),Be=stringEvaluator(r,e+"stroke-line-join",t),je=numberArrayEvaluator(r,e+"stroke-line-dash",t),Ve=numberEvaluator(r,e+"stroke-line-dash-offset",t),Ze=numberEvaluator(r,e+"stroke-miter-limit",t),Qe=new Stroke;return function(en){if(Oe){const tn=Oe(en);if(tn==="none")return null;Qe.setColor(tn)}if(ke&&Qe.setWidth(ke(en)),Ge){const tn=Ge(en);if(tn!=="butt"&&tn!=="round"&&tn!=="square")throw new Error("Expected butt, round, or square line cap");Qe.setLineCap(tn)}if(Be){const tn=Be(en);if(tn!=="bevel"&&tn!=="round"&&tn!=="miter")throw new Error("Expected bevel, round, or miter line join");Qe.setLineJoin(tn)}return je&&Qe.setLineDash(je(en)),Ve&&Qe.setLineDashOffset(Ve(en)),Ze&&Qe.setMiterLimit(Ze(en)),Qe}}function buildText(r,e){const t="text-",ke=stringEvaluator(r,t+"value",e);if(!ke)return null;const Oe=buildFill(r,t,e),Ge=buildFill(r,t+"background-",e),Be=buildStroke(r,t,e),je=buildStroke(r,t+"background-",e),Ve=stringEvaluator(r,t+"font",e),Ze=numberEvaluator(r,t+"max-angle",e),Qe=numberEvaluator(r,t+"offset-x",e),en=numberEvaluator(r,t+"offset-y",e),tn=booleanEvaluator(r,t+"overflow",e),an=stringEvaluator(r,t+"placement",e),cn=numberEvaluator(r,t+"repeat",e),dn=sizeLikeEvaluator(r,t+"scale",e),hn=booleanEvaluator(r,t+"rotate-with-view",e),fn=numberEvaluator(r,t+"rotation",e),pn=stringEvaluator(r,t+"align",e),mn=stringEvaluator(r,t+"justify",e),yn=stringEvaluator(r,t+"baseline",e),Cn=numberArrayEvaluator(r,t+"padding",e),wn=new Text({});return function(bn){if(wn.setText(ke(bn)),Oe&&wn.setFill(Oe(bn)),Ge&&wn.setBackgroundFill(Ge(bn)),Be&&wn.setStroke(Be(bn)),je&&wn.setBackgroundStroke(je(bn)),Ve&&wn.setFont(Ve(bn)),Ze&&wn.setMaxAngle(Ze(bn)),Qe&&wn.setOffsetX(Qe(bn)),en&&wn.setOffsetY(en(bn)),tn&&wn.setOverflow(tn(bn)),an){const Sn=an(bn);if(Sn!=="point"&&Sn!=="line")throw new Error("Expected point or line for text-placement");wn.setPlacement(Sn)}if(cn&&wn.setRepeat(cn(bn)),dn&&wn.setScale(dn(bn)),hn&&wn.setRotateWithView(hn(bn)),fn&&wn.setRotation(fn(bn)),pn){const Sn=pn(bn);if(Sn!=="left"&&Sn!=="center"&&Sn!=="right"&&Sn!=="end"&&Sn!=="start")throw new Error("Expected left, right, center, start, or end for text-align");wn.setTextAlign(Sn)}if(mn){const Sn=mn(bn);if(Sn!=="left"&&Sn!=="right"&&Sn!=="center")throw new Error("Expected left, right, or center for text-justify");wn.setJustify(Sn)}if(yn){const Sn=yn(bn);if(Sn!=="bottom"&&Sn!=="top"&&Sn!=="middle"&&Sn!=="alphabetic"&&Sn!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");wn.setTextBaseline(Sn)}return Cn&&wn.setPadding(Cn(bn)),wn}}function buildImage(r,e){return"icon-src"in r?buildIcon(r,e):"shape-points"in r?buildShape(r,e):"circle-radius"in r?buildCircle(r,e):null}function buildIcon(r,e){const t="icon-",ke=t+"src",Oe=requireString(r[ke],ke),Ge=coordinateEvaluator(r,t+"anchor",e),Be=sizeLikeEvaluator(r,t+"scale",e),je=numberEvaluator(r,t+"opacity",e),Ve=coordinateEvaluator(r,t+"displacement",e),Ze=numberEvaluator(r,t+"rotation",e),Qe=booleanEvaluator(r,t+"rotate-with-view",e),en=optionalIconOrigin(r,t+"anchor-origin"),tn=optionalIconAnchorUnits(r,t+"anchor-x-units"),an=optionalIconAnchorUnits(r,t+"anchor-y-units"),cn=optionalColorLike(r,t+"color"),dn=optionalString(r,t+"cross-origin"),hn=optionalNumberArray(r,t+"offset"),fn=optionalIconOrigin(r,t+"offset-origin"),pn=optionalNumber(r,t+"width"),mn=optionalNumber(r,t+"height"),yn=optionalSize(r,t+"size"),Cn=optionalDeclutterMode(r,t+"declutter"),wn=new Icon({src:Oe,anchorOrigin:en,anchorXUnits:tn,anchorYUnits:an,color:cn,crossOrigin:dn,offset:hn,offsetOrigin:fn,height:mn,width:pn,size:yn,declutterMode:Cn});return function(bn){return je&&wn.setOpacity(je(bn)),Ve&&wn.setDisplacement(Ve(bn)),Ze&&wn.setRotation(Ze(bn)),Qe&&wn.setRotateWithView(Qe(bn)),Be&&wn.setScale(Be(bn)),Ge&&wn.setAnchor(Ge(bn)),wn}}function buildShape(r,e){const t="shape-",ke=t+"points",Oe=requireNumber(r[ke],ke),Ge=buildFill(r,t,e),Be=buildStroke(r,t,e),je=sizeLikeEvaluator(r,t+"scale",e),Ve=coordinateEvaluator(r,t+"displacement",e),Ze=numberEvaluator(r,t+"rotation",e),Qe=booleanEvaluator(r,t+"rotate-with-view",e),en=optionalNumber(r,t+"radius"),tn=optionalNumber(r,t+"radius1"),an=optionalNumber(r,t+"radius2"),cn=optionalNumber(r,t+"angle"),dn=optionalDeclutterMode(r,t+"declutter-mode"),hn=new RegularShape({points:Oe,radius:en,radius1:tn,radius2:an,angle:cn,declutterMode:dn});return function(fn){return Ge&&hn.setFill(Ge(fn)),Be&&hn.setStroke(Be(fn)),Ve&&hn.setDisplacement(Ve(fn)),Ze&&hn.setRotation(Ze(fn)),Qe&&hn.setRotateWithView(Qe(fn)),je&&hn.setScale(je(fn)),hn}}function buildCircle(r,e){const t="circle-",ke=buildFill(r,t,e),Oe=buildStroke(r,t,e),Ge=numberEvaluator(r,t+"radius",e),Be=sizeLikeEvaluator(r,t+"scale",e),je=coordinateEvaluator(r,t+"displacement",e),Ve=numberEvaluator(r,t+"rotation",e),Ze=booleanEvaluator(r,t+"rotate-with-view",e),Qe=optionalDeclutterMode(r,t+"declutter-mode"),en=new CircleStyle({radius:5,declutterMode:Qe});return function(tn){return Ge&&en.setRadius(Ge(tn)),ke&&en.setFill(ke(tn)),Oe&&en.setStroke(Oe(tn)),je&&en.setDisplacement(je(tn)),Ve&&en.setRotation(Ve(tn)),Ze&&en.setRotateWithView(Ze(tn)),Be&&en.setScale(Be(tn)),en}}function numberEvaluator(r,e,t){if(!(e in r))return;const ke=buildExpression(r[e],NumberType$1,t);return function(Oe){return requireNumber(ke(Oe),e)}}function stringEvaluator(r,e,t){if(!(e in r))return null;const ke=buildExpression(r[e],StringType$1,t);return function(Oe){return requireString(ke(Oe),e)}}function booleanEvaluator(r,e,t){if(!(e in r))return null;const ke=buildExpression(r[e],BooleanType$1,t);return function(Oe){const Ge=ke(Oe);if(typeof Ge!="boolean")throw new Error(`Expected a boolean for ${e}`);return Ge}}function colorLikeEvaluator(r,e,t){if(!(e in r))return null;const ke=buildExpression(r[e],ColorType$1|StringType$1,t);return function(Oe){return requireColorLike(ke(Oe),e)}}function numberArrayEvaluator(r,e,t){if(!(e in r))return null;const ke=buildExpression(r[e],NumberArrayType,t);return function(Oe){return requireNumberArray(ke(Oe),e)}}function coordinateEvaluator(r,e,t){if(!(e in r))return null;const ke=buildExpression(r[e],NumberArrayType,t);return function(Oe){const Ge=requireNumberArray(ke(Oe),e);if(Ge.length!==2)throw new Error(`Expected two numbers for ${e}`);return Ge}}function sizeLikeEvaluator(r,e,t){if(!(e in r))return null;const ke=buildExpression(r[e],NumberArrayType|NumberType$1,t);return function(Oe){return requireSizeLike(ke(Oe),e)}}function optionalNumber(r,e){const t=r[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function optionalSize(r,e){const t=r[e];if(t!==void 0){if(typeof t=="number")return toSize(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function optionalString(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function optionalIconOrigin(r,e){const t=r[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function optionalIconAnchorUnits(r,e){const t=r[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function optionalNumberArray(r,e){const t=r[e];if(t!==void 0)return requireNumberArray(t,e)}function optionalDeclutterMode(r,e){const t=r[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function optionalColorLike(r,e){const t=r[e];if(t!==void 0)return requireColorLike(t,e)}function requireNumberArray(r,e){if(!Array.isArray(r))throw new Error(`Expected an array for ${e}`);const t=r.length;for(let ke=0;ke<t;++ke)if(typeof r[ke]!="number")throw new Error(`Expected an array of numbers for ${e}`);return r}function requireString(r,e){if(typeof r!="string")throw new Error(`Expected a string for ${e}`);return r}function requireNumber(r,e){if(typeof r!="number")throw new Error(`Expected a number for ${e}`);return r}function requireColorLike(r,e){if(typeof r=="string")return r;const t=requireNumberArray(r,e),ke=t.length;if(ke<3||ke>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function requireSizeLike(r,e){if(typeof r=="number")return r;const t=requireNumberArray(r,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}const Property$1={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer$1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter!==void 0?e.declutter:!1,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$1.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new RBush$1(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(e){this.set(Property$1.RENDER_ORDER,e)}setStyle(e){this.style_=toStyleLike(e),this.styleFunction_=e===null?void 0:toFunction(this.style_),this.changed()}}function toStyleLike(r){if(r===void 0)return createDefaultStyle;if(!r)return null;if(typeof r=="function"||r instanceof Style$1)return r;if(!Array.isArray(r))return flatStylesToStyleFunction([r]);if(r.length===0)return[];const e=r.length,t=r[0];if(t instanceof Style$1){const Oe=new Array(e);for(let Ge=0;Ge<e;++Ge){const Be=r[Ge];if(!(Be instanceof Style$1))throw new Error("Expected a list of style instances");Oe[Ge]=Be}return Oe}if("style"in t){const Oe=new Array(e);for(let Ge=0;Ge<e;++Ge){const Be=r[Ge];if(!("style"in Be))throw new Error("Expected a list of rules with a style property");Oe[Ge]=Be}return rulesToStyleFunction(Oe)}return flatStylesToStyleFunction(r)}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class VectorContext{drawCustom(e,t,ke,Oe){}drawGeometry(e){}setStyle(e){}drawCircle(e,t){}drawFeature(e,t){}drawGeometryCollection(e,t){}drawLineString(e,t){}drawMultiLineString(e,t){}drawMultiPoint(e,t){}drawMultiPolygon(e,t){}drawPoint(e,t){}drawPolygon(e,t){}drawText(e,t){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class CanvasBuilder extends VectorContext{constructor(e,t,ke,Oe){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=Oe,this.maxLineWidth=0,this.resolution=ke,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(ke){return ke*t})}appendFlatPointCoordinates(e,t){const ke=this.getBufferedMaxExtent(),Oe=this.tmpCoordinate_,Ge=this.coordinates;let Be=Ge.length;for(let je=0,Ve=e.length;je<Ve;je+=t)Oe[0]=e[je],Oe[1]=e[je+1],containsCoordinate(ke,Oe)&&(Ge[Be++]=Oe[0],Ge[Be++]=Oe[1]);return Be}appendFlatLineCoordinates(e,t,ke,Oe,Ge,Be){const je=this.coordinates;let Ve=je.length;const Ze=this.getBufferedMaxExtent();Be&&(t+=Oe);let Qe=e[t],en=e[t+1];const tn=this.tmpCoordinate_;let an=!0,cn,dn,hn;for(cn=t+Oe;cn<ke;cn+=Oe)tn[0]=e[cn],tn[1]=e[cn+1],hn=coordinateRelationship(Ze,tn),hn!==dn?(an&&(je[Ve++]=Qe,je[Ve++]=en,an=!1),je[Ve++]=tn[0],je[Ve++]=tn[1]):hn===Relationship.INTERSECTING?(je[Ve++]=tn[0],je[Ve++]=tn[1],an=!1):an=!0,Qe=tn[0],en=tn[1],dn=hn;return(Ge&&an||cn===t+Oe)&&(je[Ve++]=Qe,je[Ve++]=en),Ve}drawCustomCoordinates_(e,t,ke,Oe,Ge){for(let Be=0,je=ke.length;Be<je;++Be){const Ve=ke[Be],Ze=this.appendFlatLineCoordinates(e,t,Ve,Oe,!1,!1);Ge.push(Ze),t=Ve}return t}drawCustom(e,t,ke,Oe){this.beginGeometry(e,t);const Ge=e.getType(),Be=e.getStride(),je=this.coordinates.length;let Ve,Ze,Qe,en,tn;switch(Ge){case"MultiPolygon":Ve=e.getOrientedFlatCoordinates(),en=[];const an=e.getEndss();tn=0;for(let cn=0,dn=an.length;cn<dn;++cn){const hn=[];tn=this.drawCustomCoordinates_(Ve,tn,an[cn],Be,hn),en.push(hn)}this.instructions.push([Instruction.CUSTOM,je,en,e,ke,inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,je,en,e,Oe||ke,inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":Qe=[],Ve=Ge=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),tn=this.drawCustomCoordinates_(Ve,0,e.getEnds(),Be,Qe),this.instructions.push([Instruction.CUSTOM,je,Qe,e,ke,inflateCoordinatesArray]),this.hitDetectionInstructions.push([Instruction.CUSTOM,je,Qe,e,Oe||ke,inflateCoordinatesArray]);break;case"LineString":case"Circle":Ve=e.getFlatCoordinates(),Ze=this.appendFlatLineCoordinates(Ve,0,Ve.length,Be,!1,!1),this.instructions.push([Instruction.CUSTOM,je,Ze,e,ke,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,je,Ze,e,Oe||ke,inflateCoordinates]);break;case"MultiPoint":Ve=e.getFlatCoordinates(),Ze=this.appendFlatPointCoordinates(Ve,Be),Ze>je&&(this.instructions.push([Instruction.CUSTOM,je,Ze,e,ke,inflateCoordinates]),this.hitDetectionInstructions.push([Instruction.CUSTOM,je,Ze,e,Oe||ke,inflateCoordinates]));break;case"Point":Ve=e.getFlatCoordinates(),this.coordinates.push(Ve[0],Ve[1]),Ze=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,je,Ze,e,ke]),this.hitDetectionInstructions.push([Instruction.CUSTOM,je,Ze,e,Oe||ke]);break}this.endGeometry(t)}beginGeometry(e,t){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,t,0,e],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,t,0,e],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const ke=e.length;let Oe,Ge,Be=-1;for(t=0;t<ke;++t)Oe=e[t],Ge=Oe[0],Ge==Instruction.END_GEOMETRY?Be=t:Ge==Instruction.BEGIN_GEOMETRY&&(Oe[2]=t,reverseSubArray(this.hitDetectionInstructions,Be,t),Be=-1)}setFillStrokeStyle(e,t){const ke=this.state;if(e){const Oe=e.getColor();ke.fillStyle=asColorLike(Oe||defaultFillStyle)}else ke.fillStyle=void 0;if(t){const Oe=t.getColor();ke.strokeStyle=asColorLike(Oe||defaultStrokeStyle);const Ge=t.getLineCap();ke.lineCap=Ge!==void 0?Ge:defaultLineCap;const Be=t.getLineDash();ke.lineDash=Be?Be.slice():defaultLineDash;const je=t.getLineDashOffset();ke.lineDashOffset=je||defaultLineDashOffset;const Ve=t.getLineJoin();ke.lineJoin=Ve!==void 0?Ve:defaultLineJoin;const Ze=t.getWidth();ke.lineWidth=Ze!==void 0?Ze:defaultLineWidth;const Qe=t.getMiterLimit();ke.miterLimit=Qe!==void 0?Qe:defaultMiterLimit,ke.lineWidth>this.maxLineWidth&&(this.maxLineWidth=ke.lineWidth,this.bufferedMaxExtent_=null)}else ke.strokeStyle=void 0,ke.lineCap=void 0,ke.lineDash=null,ke.lineDashOffset=void 0,ke.lineJoin=void 0,ke.lineWidth=void 0,ke.miterLimit=void 0}createFill(e){const t=e.fillStyle,ke=[Instruction.SET_FILL_STYLE,t];return typeof t!="string"&&ke.push(!0),ke}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const ke=e.fillStyle;(typeof ke!="string"||e.currentFillStyle!=ke)&&(ke!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=ke)}updateStrokeStyle(e,t){const ke=e.strokeStyle,Oe=e.lineCap,Ge=e.lineDash,Be=e.lineDashOffset,je=e.lineJoin,Ve=e.lineWidth,Ze=e.miterLimit;(e.currentStrokeStyle!=ke||e.currentLineCap!=Oe||Ge!=e.currentLineDash&&!equals$2(e.currentLineDash,Ge)||e.currentLineDashOffset!=Be||e.currentLineJoin!=je||e.currentLineWidth!=Ve||e.currentMiterLimit!=Ze)&&(ke!==void 0&&t.call(this,e),e.currentStrokeStyle=ke,e.currentLineCap=Oe,e.currentLineDash=Ge,e.currentLineDashOffset=Be,e.currentLineJoin=je,e.currentLineWidth=Ve,e.currentMiterLimit=Ze)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Instruction.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,t,ke,Oe){super(e,t,ke,Oe),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const ke=e.getFlatCoordinates(),Oe=e.getStride(),Ge=this.coordinates.length,Be=this.appendFlatPointCoordinates(ke,Oe);this.instructions.push([Instruction.DRAW_IMAGE,Ge,Be,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,Ge,Be,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t){if(!this.image_)return;this.beginGeometry(e,t);const ke=e.getFlatCoordinates(),Oe=e.getStride(),Ge=this.coordinates.length,Be=this.appendFlatPointCoordinates(ke,Oe);this.instructions.push([Instruction.DRAW_IMAGE,Ge,Be,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,Ge,Be,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const ke=e.getAnchor(),Oe=e.getSize(),Ge=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=ke[0],this.anchorY_=ke[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=Oe[1],this.opacity_=e.getOpacity(),this.originX_=Ge[0],this.originY_=Ge[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=Oe[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,t,ke,Oe){super(e,t,ke,Oe)}drawFlatCoordinates_(e,t,ke,Oe){const Ge=this.coordinates.length,Be=this.appendFlatLineCoordinates(e,t,ke,Oe,!1,!1),je=[Instruction.MOVE_TO_LINE_TO,Ge,Be];return this.instructions.push(je),this.hitDetectionInstructions.push(je),ke}drawLineString(e,t){const ke=this.state,Oe=ke.strokeStyle,Ge=ke.lineWidth;if(Oe===void 0||Ge===void 0)return;this.updateStrokeStyle(ke,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const Be=e.getFlatCoordinates(),je=e.getStride();this.drawFlatCoordinates_(Be,0,Be.length,je),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}drawMultiLineString(e,t){const ke=this.state,Oe=ke.strokeStyle,Ge=ke.lineWidth;if(Oe===void 0||Ge===void 0)return;this.updateStrokeStyle(ke,this.applyStroke),this.beginGeometry(e,t),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const Be=e.getEnds(),je=e.getFlatCoordinates(),Ve=e.getStride();let Ze=0;for(let Qe=0,en=Be.length;Qe<en;++Qe)Ze=this.drawFlatCoordinates_(je,Ze,Be[Qe],Ve);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,t,ke,Oe){super(e,t,ke,Oe)}drawFlatCoordinatess_(e,t,ke,Oe){const Ge=this.state,Be=Ge.fillStyle!==void 0,je=Ge.strokeStyle!==void 0,Ve=ke.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let Ze=0;Ze<Ve;++Ze){const Qe=ke[Ze],en=this.coordinates.length,tn=this.appendFlatLineCoordinates(e,t,Qe,Oe,!0,!je),an=[Instruction.MOVE_TO_LINE_TO,en,tn];this.instructions.push(an),this.hitDetectionInstructions.push(an),je&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),t=Qe}return Be&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),je&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),t}drawCircle(e,t){const ke=this.state,Oe=ke.fillStyle,Ge=ke.strokeStyle;if(Oe===void 0&&Ge===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),ke.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ke.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset]);const Be=e.getFlatCoordinates(),je=e.getStride(),Ve=this.coordinates.length;this.appendFlatLineCoordinates(Be,0,Be.length,je,!1,!1);const Ze=[Instruction.CIRCLE,Ve];this.instructions.push(beginPathInstruction,Ze),this.hitDetectionInstructions.push(beginPathInstruction,Ze),ke.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),ke.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(t)}drawPolygon(e,t){const ke=this.state,Oe=ke.fillStyle,Ge=ke.strokeStyle;if(Oe===void 0&&Ge===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),ke.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ke.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset]);const Be=e.getEnds(),je=e.getOrientedFlatCoordinates(),Ve=e.getStride();this.drawFlatCoordinatess_(je,0,Be,Ve),this.endGeometry(t)}drawMultiPolygon(e,t){const ke=this.state,Oe=ke.fillStyle,Ge=ke.strokeStyle;if(Oe===void 0&&Ge===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t),ke.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),ke.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,ke.strokeStyle,ke.lineWidth,ke.lineCap,ke.lineJoin,ke.miterLimit,defaultLineDash,defaultLineDashOffset]);const Be=e.getEndss(),je=e.getOrientedFlatCoordinates(),Ve=e.getStride();let Ze=0;for(let Qe=0,en=Be.length;Qe<en;++Qe)Ze=this.drawFlatCoordinatess_(je,Ze,Be[Qe],Ve);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let ke=0,Oe=t.length;ke<Oe;++ke)t[ke]=snap(t[ke],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(r,e,t,ke,Oe){const Ge=[];let Be=t,je=0,Ve=e.slice(t,2);for(;je<r&&Be+Oe<ke;){const[Ze,Qe]=Ve.slice(-2),en=e[Be+Oe],tn=e[Be+Oe+1],an=Math.sqrt((en-Ze)*(en-Ze)+(tn-Qe)*(tn-Qe));if(je+=an,je>=r){const cn=(r-je+an)/an,dn=lerp(Ze,en,cn),hn=lerp(Qe,tn,cn);Ve.push(dn,hn),Ge.push(Ve),Ve=[dn,hn],je==r&&(Be+=Oe),je=0}else if(je<r)Ve.push(e[Be+Oe],e[Be+Oe+1]),Be+=Oe;else{const cn=an-je,dn=lerp(Ze,en,cn/an),hn=lerp(Qe,tn,cn/an);Ve.push(dn,hn),Ge.push(Ve),Ve=[dn,hn],je=0,Be+=Oe}}return je>0&&Ge.push(Ve),Ge}function matchingChunk(r,e,t,ke,Oe){let Ge=t,Be=t,je=0,Ve=0,Ze=t,Qe,en,tn,an,cn,dn,hn,fn,pn,mn;for(en=t;en<ke;en+=Oe){const yn=e[en],Cn=e[en+1];cn!==void 0&&(pn=yn-cn,mn=Cn-dn,an=Math.sqrt(pn*pn+mn*mn),hn!==void 0&&(Ve+=tn,Qe=Math.acos((hn*pn+fn*mn)/(tn*an)),Qe>r&&(Ve>je&&(je=Ve,Ge=Ze,Be=en),Ve=0,Ze=en-Oe)),tn=an,hn=pn,fn=mn),cn=yn,dn=Cn}return Ve+=an,Ve>je?[Ze,en]:[Ge,Be]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,t,ke,Oe){super(e,t,ke,Oe),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t){const ke=this.textFillState_,Oe=this.textStrokeState_,Ge=this.textState_;if(this.text_===""||!Ge||!ke&&!Oe)return;const Be=this.coordinates;let je=Be.length;const Ve=e.getType();let Ze=null,Qe=e.getStride();if(Ge.placement==="line"&&(Ve=="LineString"||Ve=="MultiLineString"||Ve=="Polygon"||Ve=="MultiPolygon")){if(!intersects$1(this.getBufferedMaxExtent(),e.getExtent()))return;let en;if(Ze=e.getFlatCoordinates(),Ve=="LineString")en=[Ze.length];else if(Ve=="MultiLineString")en=e.getEnds();else if(Ve=="Polygon")en=e.getEnds().slice(0,1);else if(Ve=="MultiPolygon"){const dn=e.getEndss();en=[];for(let hn=0,fn=dn.length;hn<fn;++hn)en.push(dn[hn][0])}this.beginGeometry(e,t);const tn=Ge.repeat,an=tn?void 0:Ge.textAlign;let cn=0;for(let dn=0,hn=en.length;dn<hn;++dn){let fn;tn?fn=lineChunk(tn*this.resolution,Ze,cn,en[dn],Qe):fn=[Ze.slice(cn,en[dn])];for(let pn=0,mn=fn.length;pn<mn;++pn){const yn=fn[pn];let Cn=0,wn=yn.length;if(an==null){const Sn=matchingChunk(Ge.maxAngle,yn,0,yn.length,2);Cn=Sn[0],wn=Sn[1]}for(let Sn=Cn;Sn<wn;Sn+=Qe)Be.push(yn[Sn],yn[Sn+1]);const bn=Be.length;cn=en[dn],this.drawChars_(je,bn),je=bn}}this.endGeometry(t)}else{let en=Ge.overflow?null:[];switch(Ve){case"Point":case"MultiPoint":Ze=e.getFlatCoordinates();break;case"LineString":Ze=e.getFlatMidpoint();break;case"Circle":Ze=e.getCenter();break;case"MultiLineString":Ze=e.getFlatMidpoints(),Qe=2;break;case"Polygon":Ze=e.getFlatInteriorPoint(),Ge.overflow||en.push(Ze[2]/this.resolution),Qe=3;break;case"MultiPolygon":const fn=e.getFlatInteriorPoints();Ze=[];for(let pn=0,mn=fn.length;pn<mn;pn+=3)Ge.overflow||en.push(fn[pn+2]/this.resolution),Ze.push(fn[pn],fn[pn+1]);if(Ze.length===0)return;Qe=2;break}const tn=this.appendFlatPointCoordinates(Ze,Qe);if(tn===je)return;if(en&&(tn-je)/2!==Ze.length/Qe){let fn=je/2;en=en.filter((pn,mn)=>{const yn=Be[(fn+mn)*2]===Ze[mn*Qe]&&Be[(fn+mn)*2+1]===Ze[mn*Qe+1];return yn||--fn,yn})}this.saveTextStates_(),(Ge.backgroundFill||Ge.backgroundStroke)&&(this.setFillStrokeStyle(Ge.backgroundFill,Ge.backgroundStroke),Ge.backgroundFill&&this.updateFillStyle(this.state,this.createFill),Ge.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t);let an=Ge.padding;if(an!=defaultPadding&&(Ge.scale[0]<0||Ge.scale[1]<0)){let fn=Ge.padding[0],pn=Ge.padding[1],mn=Ge.padding[2],yn=Ge.padding[3];Ge.scale[0]<0&&(pn=-pn,yn=-yn),Ge.scale[1]<0&&(fn=-fn,mn=-mn),an=[fn,pn,mn,yn]}const cn=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,je,tn,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,an==defaultPadding?defaultPadding:an.map(function(fn){return fn*cn}),!!Ge.backgroundFill,!!Ge.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,en]);const dn=1/cn,hn=this.state.fillStyle;Ge.backgroundFill&&(this.state.fillStyle=defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,je,tn,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[dn,dn],NaN,void 0,this.declutterImageWithText_,an,!!Ge.backgroundFill,!!Ge.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,en]),Ge.backgroundFill&&(this.state.fillStyle=hn,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,ke=this.textFillState_,Oe=this.strokeKey_;e&&(Oe in this.strokeStates||(this.strokeStates[Oe]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const Ge=this.textKey_;Ge in this.textStates||(this.textStates[Ge]={font:t.font,textAlign:t.textAlign||defaultTextAlign,justify:t.justify,textBaseline:t.textBaseline||defaultTextBaseline,scale:t.scale});const Be=this.fillKey_;ke&&(Be in this.fillStates||(this.fillStates[Be]={fillStyle:ke.fillStyle}))}drawChars_(e,t){const ke=this.textStrokeState_,Oe=this.textState_,Ge=this.strokeKey_,Be=this.textKey_,je=this.fillKey_;this.saveTextStates_();const Ve=this.pixelRatio,Ze=TEXT_ALIGN[Oe.textBaseline],Qe=this.textOffsetY_*Ve,en=this.text_,tn=ke?ke.lineWidth*Math.abs(Oe.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,t,Ze,Oe.overflow,je,Oe.maxAngle,Ve,Qe,Ge,tn*Ve,en,Be,1]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,t,Ze,Oe.overflow,je&&defaultFillStyle,Oe.maxAngle,Ve,Qe,Ge,tn*Ve,en,Be,1/Ve])}setTextStyle(e,t){let ke,Oe,Ge;if(!e)this.text_="";else{const Be=e.getFill();Be?(Oe=this.textFillState_,Oe||(Oe={},this.textFillState_=Oe),Oe.fillStyle=asColorLike(Be.getColor()||defaultFillStyle)):(Oe=null,this.textFillState_=Oe);const je=e.getStroke();if(!je)Ge=null,this.textStrokeState_=Ge;else{Ge=this.textStrokeState_,Ge||(Ge={},this.textStrokeState_=Ge);const cn=je.getLineDash(),dn=je.getLineDashOffset(),hn=je.getWidth(),fn=je.getMiterLimit();Ge.lineCap=je.getLineCap()||defaultLineCap,Ge.lineDash=cn?cn.slice():defaultLineDash,Ge.lineDashOffset=dn===void 0?defaultLineDashOffset:dn,Ge.lineJoin=je.getLineJoin()||defaultLineJoin,Ge.lineWidth=hn===void 0?defaultLineWidth:hn,Ge.miterLimit=fn===void 0?defaultMiterLimit:fn,Ge.strokeStyle=asColorLike(je.getColor()||defaultStrokeStyle)}ke=this.textState_;const Ve=e.getFont()||defaultFont;registerFont(Ve);const Ze=e.getScaleArray();ke.overflow=e.getOverflow(),ke.font=Ve,ke.maxAngle=e.getMaxAngle(),ke.placement=e.getPlacement(),ke.textAlign=e.getTextAlign(),ke.repeat=e.getRepeat(),ke.justify=e.getJustify(),ke.textBaseline=e.getTextBaseline()||defaultTextBaseline,ke.backgroundFill=e.getBackgroundFill(),ke.backgroundStroke=e.getBackgroundStroke(),ke.padding=e.getPadding()||defaultPadding,ke.scale=Ze===void 0?[1,1]:Ze;const Qe=e.getOffsetX(),en=e.getOffsetY(),tn=e.getRotateWithView(),an=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=Qe===void 0?0:Qe,this.textOffsetY_=en===void 0?0:en,this.textRotateWithView_=tn===void 0?!1:tn,this.textRotation_=an===void 0?0:an,this.strokeKey_=Ge?(typeof Ge.strokeStyle=="string"?Ge.strokeStyle:getUid(Ge.strokeStyle))+Ge.lineCap+Ge.lineDashOffset+"|"+Ge.lineWidth+Ge.lineJoin+Ge.miterLimit+"["+Ge.lineDash.join()+"]":"",this.textKey_=ke.font+ke.scale+(ke.textAlign||"?")+(ke.repeat||"?")+(ke.justify||"?")+(ke.textBaseline||"?"),this.fillKey_=Oe?typeof Oe.fillStyle=="string"?Oe.fillStyle:"|"+getUid(Oe.fillStyle):""}this.declutterImageWithText_=t}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,t,ke,Oe){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=Oe,this.resolution_=ke,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const ke=this.buildersByZIndex_[t];for(const Oe in ke){const Ge=ke[Oe].finish();e[t][Oe]=Ge}}return e}getBuilder(e,t){const ke=e!==void 0?e.toString():"0";let Oe=this.buildersByZIndex_[ke];Oe===void 0&&(Oe={},this.buildersByZIndex_[ke]=Oe);let Ge=Oe[t];if(Ge===void 0){const Be=BATCH_CONSTRUCTORS[t];Ge=new Be(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),Oe[t]=Ge}return Ge}}class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.declutterExecutorGroup=null}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,t){return abstract()}loadedTileCallback(e,t,ke){e[t]||(e[t]={}),e[t][ke.tileCoord.toString()]=ke}createLoadedTileFinder(e,t,ke){return(Oe,Ge)=>{const Be=this.loadedTileCallback.bind(this,ke,Oe);return e.forEachLoadedTile(t,Oe,Ge,Be)}}forEachFeatureAtCoordinate(e,t,ke,Oe,Ge){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ImageState.LOADED||t.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ImageState.LOADED&&t!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),t==ImageState.IDLE&&(e.load(),t=e.getState()),t==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}class RenderEvent extends BaseEvent{constructor(e,t,ke,Oe){super(e),this.inversePixelTransform=t,this.frameState=ke,this.context=Oe}}const canvasPool=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create(),this.pixelTransform=create(),this.inversePixelTransform=create(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(e,t,ke){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let Oe;try{pixelContext.drawImage(e,t,ke,1,1,0,0,1,1),Oe=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return Oe}getBackground(e){let ke=this.getLayer().getBackground();return typeof ke=="function"&&(ke=ke(e.viewState.resolution)),ke||void 0}useContainer(e,t,ke){const Oe=this.getLayer().getClassName();let Ge,Be;if(e&&e.className===Oe&&(!ke||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(ke)))){const je=e.firstElementChild;je instanceof HTMLCanvasElement&&(Be=je.getContext("2d"))}if(Be&&Be.canvas.style.transform===t?(this.container=e,this.context=Be,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){Ge=document.createElement("div"),Ge.className=Oe;let je=Ge.style;je.position="absolute",je.width="100%",je.height="100%",Be=createCanvasContext2D();const Ve=Be.canvas;Ge.appendChild(Ve),je=Ve.style,je.position="absolute",je.left="0",je.transformOrigin="top left",this.container=Ge,this.context=Be}!this.containerReused&&ke&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=ke)}clipUnrotated(e,t,ke){const Oe=getTopLeft(ke),Ge=getTopRight(ke),Be=getBottomRight(ke),je=getBottomLeft(ke);apply(t.coordinateToPixelTransform,Oe),apply(t.coordinateToPixelTransform,Ge),apply(t.coordinateToPixelTransform,Be),apply(t.coordinateToPixelTransform,je);const Ve=this.inversePixelTransform;apply(Ve,Oe),apply(Ve,Ge),apply(Ve,Be),apply(Ve,je),e.save(),e.beginPath(),e.moveTo(Math.round(Oe[0]),Math.round(Oe[1])),e.lineTo(Math.round(Ge[0]),Math.round(Ge[1])),e.lineTo(Math.round(Be[0]),Math.round(Be[1])),e.lineTo(Math.round(je[0]),Math.round(je[1])),e.clip()}dispatchRenderEvent_(e,t,ke){const Oe=this.getLayer();if(Oe.hasListener(e)){const Ge=new RenderEvent(e,this.inversePixelTransform,ke,t);Oe.dispatchEvent(Ge)}}preRender(e,t){this.frameState=t,this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,t)}postRender(e,t){this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,t)}getRenderTransform(e,t,ke,Oe,Ge,Be,je){const Ve=Ge/2,Ze=Be/2,Qe=Oe/t,en=-Qe,tn=-e[0]+je,an=-e[1];return compose(this.tempTransform,Ve,Ze,Qe,en,-ke,tn,an)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function drawTextOnPath(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe,en){let tn=r[e],an=r[e+1],cn=0,dn=0,hn=0,fn=0;function pn(){cn=tn,dn=an,e+=ke,tn=r[e],an=r[e+1],fn+=hn,hn=Math.sqrt((tn-cn)*(tn-cn)+(an-dn)*(an-dn))}do pn();while(e<t-ke&&fn+hn<Ge);let mn=hn===0?0:(Ge-fn)/hn;const yn=lerp(cn,tn,mn),Cn=lerp(dn,an,mn),wn=e-ke,bn=fn,Sn=Ge+je*Ve(Ze,Oe,Qe);for(;e<t-ke&&fn+hn<Sn;)pn();mn=hn===0?0:(Sn-fn)/hn;const Mn=lerp(cn,tn,mn),Tn=lerp(dn,an,mn);let En;if(en){const Nn=[yn,Cn,Mn,Tn];rotate(Nn,0,4,2,en,Nn,Nn),En=Nn[0]>Nn[2]}else En=yn>Mn;const An=Math.PI,Ln=[],Rn=wn+ke===e;e=wn,hn=0,fn=bn,tn=r[e],an=r[e+1];let Gn;if(Rn){pn(),Gn=Math.atan2(an-dn,tn-cn),En&&(Gn+=Gn>0?-An:An);const Nn=(Mn+yn)/2,jn=(Tn+Cn)/2;return Ln[0]=[Nn,jn,(Sn-Ge)/2,Gn,Oe],Ln}Oe=Oe.replace(/\n/g," ");for(let Nn=0,jn=Oe.length;Nn<jn;){pn();let Dn=Math.atan2(an-dn,tn-cn);if(En&&(Dn+=Dn>0?-An:An),Gn!==void 0){let $n=Dn-Gn;if($n+=$n>An?-2*An:$n<-An?2*An:0,Math.abs($n)>Be)return null}Gn=Dn;const Ci=Nn;let Jn=0;for(;Nn<jn;++Nn){const $n=En?jn-Nn-1:Nn,Ai=je*Ve(Ze,Oe[$n],Qe);if(e+ke<t&&fn+hn<Ge+Jn+Ai/2)break;Jn+=Ai}if(Nn===Ci)continue;const Ki=En?Oe.substring(jn-Ci,jn-Nn):Oe.substring(Ci,Nn);mn=hn===0?0:(Ge+Jn/2-fn)/hn;const xn=lerp(cn,tn,mn),qn=lerp(dn,an,mn);Ln.push([xn,qn,Jn/2,Dn,Ki]),Ge+=Jn}return Ln}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(r){return r[3].declutterBox}const rtlRegEx=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function horizontalTextAlign(r,e){return e==="start"?e=rtlRegEx.test(r)?"right":"left":e==="end"&&(e=rtlRegEx.test(r)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(r,e,t){return t>0&&r.push(`
`,""),r.push(e,""),r}class Executor{constructor(e,t,ke,Oe){this.overlaps=ke,this.pixelRatio=t,this.resolution=e,this.alignFill_,this.instructions=Oe.instructions,this.coordinates=Oe.coordinates,this.coordinateCache_={},this.renderedTransform_=create(),this.hitDetectionInstructions=Oe.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=Oe.fillStates||{},this.strokeStates=Oe.strokeStates||{},this.textStates=Oe.textStates||{},this.widths_={},this.labels_={}}createLabel(e,t,ke,Oe){const Ge=e+t+ke+Oe;if(this.labels_[Ge])return this.labels_[Ge];const Be=Oe?this.strokeStates[Oe]:null,je=ke?this.fillStates[ke]:null,Ve=this.textStates[t],Ze=this.pixelRatio,Qe=[Ve.scale[0]*Ze,Ve.scale[1]*Ze],en=Array.isArray(e),tn=Ve.justify?TEXT_ALIGN[Ve.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,Ve.textAlign||defaultTextAlign),an=Oe&&Be.lineWidth?Be.lineWidth:0,cn=en?e:e.split(`
`).reduce(createTextChunks,[]),{width:dn,height:hn,widths:fn,heights:pn,lineWidths:mn}=getTextDimensions(Ve,cn),yn=dn+an,Cn=[],wn=(yn+2)*Qe[0],bn=(hn+an)*Qe[1],Sn={width:wn<0?Math.floor(wn):Math.ceil(wn),height:bn<0?Math.floor(bn):Math.ceil(bn),contextInstructions:Cn};(Qe[0]!=1||Qe[1]!=1)&&Cn.push("scale",Qe),Oe&&(Cn.push("strokeStyle",Be.strokeStyle),Cn.push("lineWidth",an),Cn.push("lineCap",Be.lineCap),Cn.push("lineJoin",Be.lineJoin),Cn.push("miterLimit",Be.miterLimit),Cn.push("setLineDash",[Be.lineDash]),Cn.push("lineDashOffset",Be.lineDashOffset)),ke&&Cn.push("fillStyle",je.fillStyle),Cn.push("textBaseline","middle"),Cn.push("textAlign","center");const Mn=.5-tn;let Tn=tn*yn+Mn*an;const En=[],An=[];let Ln=0,Rn=0,Gn=0,Nn=0,jn;for(let Dn=0,Ci=cn.length;Dn<Ci;Dn+=2){const Jn=cn[Dn];if(Jn===`
`){Rn+=Ln,Ln=0,Tn=tn*yn+Mn*an,++Nn;continue}const Ki=cn[Dn+1]||Ve.font;Ki!==jn&&(Oe&&En.push("font",Ki),ke&&An.push("font",Ki),jn=Ki),Ln=Math.max(Ln,pn[Gn]);const xn=[Jn,Tn+Mn*fn[Gn]+tn*(fn[Gn]-mn[Nn]),.5*(an+Ln)+Rn];Tn+=fn[Gn],Oe&&En.push("strokeText",xn),ke&&An.push("fillText",xn),++Gn}return Array.prototype.push.apply(Cn,En),Array.prototype.push.apply(Cn,An),this.labels_[Ge]=Sn,Sn}replayTextBackground_(e,t,ke,Oe,Ge,Be,je){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,ke),e.lineTo.apply(e,Oe),e.lineTo.apply(e,Ge),e.lineTo.apply(e,t),Be&&(this.alignFill_=Be[2],this.fill_(e)),je&&(this.setStrokeStyle_(e,je),e.stroke())}calculateImageOrLabelDimensions_(e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,dn,hn){je*=tn[0],Ve*=tn[1];let fn=ke-je,pn=Oe-Ve;const mn=Ge+Ze>e?e-Ze:Ge,yn=Be+Qe>t?t-Qe:Be,Cn=cn[3]+mn*tn[0]+cn[1],wn=cn[0]+yn*tn[1]+cn[2],bn=fn-cn[3],Sn=pn-cn[0];(dn||en!==0)&&(p1[0]=bn,p4[0]=bn,p1[1]=Sn,p2[1]=Sn,p2[0]=bn+Cn,p3[0]=p2[0],p3[1]=Sn+wn,p4[1]=p3[1]);let Mn;return en!==0?(Mn=compose(create(),ke,Oe,1,1,en,-ke,-Oe),apply(Mn,p1),apply(Mn,p2),apply(Mn,p3),apply(Mn,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(bn,bn+Cn),Math.min(Sn,Sn+wn),Math.max(bn,bn+Cn),Math.max(Sn,Sn+wn),tmpExtent),an&&(fn=Math.round(fn),pn=Math.round(pn)),{drawImageX:fn,drawImageY:pn,drawImageW:mn,drawImageH:yn,originX:Ze,originY:Qe,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:hn},canvasTransform:Mn,scale:tn}}replayImageOrLabel_(e,t,ke,Oe,Ge,Be,je){const Ve=!!(Be||je),Ze=Oe.declutterBox,Qe=e.canvas,en=je?je[2]*Oe.scale[0]/2:0;return Ze.minX-en<=Qe.width/t&&Ze.maxX+en>=0&&Ze.minY-en<=Qe.height/t&&Ze.maxY+en>=0&&(Ve&&this.replayTextBackground_(e,p1,p2,p3,p4,Be,je),drawImageOrLabel(e,Oe.canvasTransform,Ge,ke,Oe.originX,Oe.originY,Oe.drawImageW,Oe.drawImageH,Oe.drawImageX,Oe.drawImageY,Oe.scale)),!0}fill_(e){if(this.alignFill_){const t=apply(this.renderedTransform_,[0,0]),ke=512*this.pixelRatio;e.save(),e.translate(t[0]%ke,t[1]%ke),e.rotate(this.viewRotation_)}e.fill(),this.alignFill_&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,ke,Oe){const Ge=this.textStates[t],Be=this.createLabel(e,t,Oe,ke),je=this.strokeStates[ke],Ve=this.pixelRatio,Ze=horizontalTextAlign(Array.isArray(e)?e[0]:e,Ge.textAlign||defaultTextAlign),Qe=TEXT_ALIGN[Ge.textBaseline||defaultTextBaseline],en=je&&je.lineWidth?je.lineWidth:0,tn=Be.width/Ve-2*Ge.scale[0],an=Ze*tn+2*(.5-Ze)*en,cn=Qe*Be.height/Ve+2*(.5-Qe)*en;return{label:Be,anchorX:an,anchorY:cn}}execute_(e,t,ke,Oe,Ge,Be,je,Ve){let Ze;this.pixelCoordinates_&&equals$2(ke,this.renderedTransform_)?Ze=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),Ze=transform2D(this.coordinates,0,this.coordinates.length,2,ke,this.pixelCoordinates_),setFromArray(this.renderedTransform_,ke));let Qe=0;const en=Oe.length;let tn=0,an,cn,dn,hn,fn,pn,mn,yn,Cn,wn,bn,Sn,Mn=0,Tn=0,En=null,An=null;const Ln=this.coordinateCache_,Rn=this.viewRotation_,Gn=Math.round(Math.atan2(-ke[1],ke[0])*1e12)/1e12,Nn={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Rn},jn=this.instructions!=Oe||this.overlaps?0:200;let Dn,Ci,Jn,Ki;for(;Qe<en;){const xn=Oe[Qe];switch(xn[0]){case Instruction.BEGIN_GEOMETRY:Dn=xn[1],Ki=xn[3],Dn.getGeometry()?je!==void 0&&!intersects$1(je,Ki.getExtent())?Qe=xn[2]+1:++Qe:Qe=xn[2];break;case Instruction.BEGIN_PATH:Mn>jn&&(this.fill_(e),Mn=0),Tn>jn&&(e.stroke(),Tn=0),!Mn&&!Tn&&(e.beginPath(),hn=NaN,fn=NaN),++Qe;break;case Instruction.CIRCLE:tn=xn[1];const $n=Ze[tn],Ai=Ze[tn+1],Ti=Ze[tn+2],Kn=Ze[tn+3],Ii=Ti-$n,Pi=Kn-Ai,Mi=Math.sqrt(Ii*Ii+Pi*Pi);e.moveTo($n+Mi,Ai),e.arc($n,Ai,Mi,0,2*Math.PI,!0),++Qe;break;case Instruction.CLOSE_PATH:e.closePath(),++Qe;break;case Instruction.CUSTOM:tn=xn[1],an=xn[2];const tr=xn[3],Br=xn[4],Un=xn.length==6?xn[5]:void 0;Nn.geometry=tr,Nn.feature=Dn,Qe in Ln||(Ln[Qe]=[]);const Qn=Ln[Qe];Un?Un(Ze,tn,an,2,Qn):(Qn[0]=Ze[tn],Qn[1]=Ze[tn+1],Qn.length=2),Br(Qn,Nn),++Qe;break;case Instruction.DRAW_IMAGE:tn=xn[1],an=xn[2],yn=xn[3],cn=xn[4],dn=xn[5];let Hn=xn[6];const Fn=xn[7],Hi=xn[8],zi=xn[9],Oi=xn[10];let Vi=xn[11];const Bi=xn[12];let Fi=xn[13];const Si=xn[14],Li=xn[15];if(!yn&&xn.length>=20){Cn=xn[19],wn=xn[20],bn=xn[21],Sn=xn[22];const so=this.drawLabelWithPointPlacement_(Cn,wn,bn,Sn);yn=so.label,xn[3]=yn;const $a=xn[23];cn=(so.anchorX-$a)*this.pixelRatio,xn[4]=cn;const ko=xn[24];dn=(so.anchorY-ko)*this.pixelRatio,xn[5]=dn,Hn=yn.height,xn[6]=Hn,Fi=yn.width,xn[13]=Fi}let Ri;xn.length>25&&(Ri=xn[25]);let $i,er,ar;xn.length>17?($i=xn[16],er=xn[17],ar=xn[18]):($i=defaultPadding,er=!1,ar=!1),Oi&&Gn?Vi+=Rn:!Oi&&!Gn&&(Vi-=Rn);let Rr=0;for(;tn<an;tn+=2){if(Ri&&Ri[Rr++]<Fi/this.pixelRatio)continue;const so=this.calculateImageOrLabelDimensions_(yn.width,yn.height,Ze[tn],Ze[tn+1],Fi,Hn,cn,dn,Hi,zi,Vi,Bi,Ge,$i,er||ar,Dn),$a=[e,t,yn,so,Fn,er?En:null,ar?An:null];if(Ve){if(Si==="none")continue;if(Si==="obstacle"){Ve.insert(so.declutterBox);continue}else{let ko,Aa;if(Li){const uo=an-tn;if(!Li[uo]){Li[uo]=$a;continue}if(ko=Li[uo],delete Li[uo],Aa=getDeclutterBox(ko),Ve.collides(Aa))continue}if(Ve.collides(so.declutterBox))continue;ko&&(Ve.insert(Aa),this.replayImageOrLabel_.apply(this,ko)),Ve.insert(so.declutterBox)}}this.replayImageOrLabel_.apply(this,$a)}++Qe;break;case Instruction.DRAW_CHARS:const Gs=xn[1],Pr=xn[2],no=xn[3],Zs=xn[4];Sn=xn[5];const ho=xn[6],co=xn[7],Ws=xn[8];bn=xn[9];const oo=xn[10];Cn=xn[11],wn=xn[12];const to=[xn[13],xn[13]],mo=this.textStates[wn],ao=mo.font,jo=[mo.scale[0]*co,mo.scale[1]*co];let na;ao in this.widths_?na=this.widths_[ao]:(na={},this.widths_[ao]=na);const yo=lineStringLength(Ze,Gs,Pr,2),io=Math.abs(jo[0])*measureAndCacheTextWidth(ao,Cn,na);if(Zs||io<=yo){const so=this.textStates[wn].textAlign,$a=(yo-io)*horizontalTextAlign(Cn,so),ko=drawTextOnPath(Ze,Gs,Pr,2,Cn,$a,ho,Math.abs(jo[0]),measureAndCacheTextWidth,ao,na,Gn?0:this.viewRotation_);e:if(ko){const Aa=[];let uo,eo,Oa,qo,Fo;if(bn)for(uo=0,eo=ko.length;uo<eo;++uo){Fo=ko[uo],Oa=Fo[4],qo=this.createLabel(Oa,wn,"",bn),cn=Fo[2]+(jo[0]<0?-oo:oo),dn=no*qo.height+(.5-no)*2*oo*jo[1]/jo[0]-Ws;const Oo=this.calculateImageOrLabelDimensions_(qo.width,qo.height,Fo[0],Fo[1],qo.width,qo.height,cn,dn,0,0,Fo[3],to,!1,defaultPadding,!1,Dn);if(Ve&&Ve.collides(Oo.declutterBox))break e;Aa.push([e,t,qo,Oo,1,null,null])}if(Sn)for(uo=0,eo=ko.length;uo<eo;++uo){Fo=ko[uo],Oa=Fo[4],qo=this.createLabel(Oa,wn,Sn,""),cn=Fo[2],dn=no*qo.height-Ws;const Oo=this.calculateImageOrLabelDimensions_(qo.width,qo.height,Fo[0],Fo[1],qo.width,qo.height,cn,dn,0,0,Fo[3],to,!1,defaultPadding,!1,Dn);if(Ve&&Ve.collides(Oo.declutterBox))break e;Aa.push([e,t,qo,Oo,1,null,null])}Ve&&Ve.load(Aa.map(getDeclutterBox));for(let Oo=0,ta=Aa.length;Oo<ta;++Oo)this.replayImageOrLabel_.apply(this,Aa[Oo])}}++Qe;break;case Instruction.END_GEOMETRY:if(Be!==void 0){Dn=xn[1];const so=Be(Dn,Ki);if(so)return so}++Qe;break;case Instruction.FILL:jn?Mn++:this.fill_(e),++Qe;break;case Instruction.MOVE_TO_LINE_TO:for(tn=xn[1],an=xn[2],Ci=Ze[tn],Jn=Ze[tn+1],pn=Ci+.5|0,mn=Jn+.5|0,(pn!==hn||mn!==fn)&&(e.moveTo(Ci,Jn),hn=pn,fn=mn),tn+=2;tn<an;tn+=2)Ci=Ze[tn],Jn=Ze[tn+1],pn=Ci+.5|0,mn=Jn+.5|0,(tn==an-2||pn!==hn||mn!==fn)&&(e.lineTo(Ci,Jn),hn=pn,fn=mn);++Qe;break;case Instruction.SET_FILL_STYLE:En=xn,this.alignFill_=xn[2],Mn&&(this.fill_(e),Mn=0,Tn&&(e.stroke(),Tn=0)),e.fillStyle=xn[1],++Qe;break;case Instruction.SET_STROKE_STYLE:An=xn,Tn&&(e.stroke(),Tn=0),this.setStrokeStyle_(e,xn),++Qe;break;case Instruction.STROKE:jn?Tn++:e.stroke(),++Qe;break;default:++Qe;break}}Mn&&this.fill_(e),Tn&&e.stroke()}execute(e,t,ke,Oe,Ge,Be){this.viewRotation_=Oe,this.execute_(e,t,ke,this.instructions,Ge,void 0,void 0,Be)}executeHitDetection(e,t,ke,Oe,Ge){return this.viewRotation_=ke,this.execute_(e,1,t,this.hitDetectionInstructions,!0,Oe,Ge)}}const ORDER=["Polygon","Circle","LineString","Image","Text","Default"];class ExecutorGroup{constructor(e,t,ke,Oe,Ge,Be){this.maxExtent_=e,this.overlaps_=Oe,this.pixelRatio_=ke,this.resolution_=t,this.renderBuffer_=Be,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create(),this.createExecutors_(Ge)}clip(e,t){const ke=this.getClipCoords(t);e.beginPath(),e.moveTo(ke[0],ke[1]),e.lineTo(ke[2],ke[3]),e.lineTo(ke[4],ke[5]),e.lineTo(ke[6],ke[7]),e.clip()}createExecutors_(e){for(const t in e){let ke=this.executorsByZIndex_[t];ke===void 0&&(ke={},this.executorsByZIndex_[t]=ke);const Oe=e[t];for(const Ge in Oe){const Be=Oe[Ge];ke[Ge]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,Be)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const ke=this.executorsByZIndex_[t];for(let Oe=0,Ge=e.length;Oe<Ge;++Oe)if(e[Oe]in ke)return!0}return!1}forEachFeatureAtCoordinate(e,t,ke,Oe,Ge,Be){Oe=Math.round(Oe);const je=Oe*2+1,Ve=compose(this.hitDetectionTransform_,Oe+.5,Oe+.5,1/t,-1/t,-ke,-e[0],-e[1]),Ze=!this.hitDetectionContext_;Ze&&(this.hitDetectionContext_=createCanvasContext2D(je,je,void 0,{willReadFrequently:!0}));const Qe=this.hitDetectionContext_;Qe.canvas.width!==je||Qe.canvas.height!==je?(Qe.canvas.width=je,Qe.canvas.height=je):Ze||Qe.clearRect(0,0,je,je);let en;this.renderBuffer_!==void 0&&(en=createEmpty(),extendCoordinate(en,e),buffer(en,t*(this.renderBuffer_+Oe),en));const tn=getPixelIndexArray(Oe);let an;function cn(Cn,wn){const bn=Qe.getImageData(0,0,je,je).data;for(let Sn=0,Mn=tn.length;Sn<Mn;Sn++)if(bn[tn[Sn]]>0){if(!Be||an!=="Image"&&an!=="Text"||Be.includes(Cn)){const Tn=(tn[Sn]-3)/4,En=Oe-Tn%je,An=Oe-(Tn/je|0),Ln=Ge(Cn,wn,En*En+An*An);if(Ln)return Ln}Qe.clearRect(0,0,je,je);break}}const dn=Object.keys(this.executorsByZIndex_).map(Number);dn.sort(ascending);let hn,fn,pn,mn,yn;for(hn=dn.length-1;hn>=0;--hn){const Cn=dn[hn].toString();for(pn=this.executorsByZIndex_[Cn],fn=ORDER.length-1;fn>=0;--fn)if(an=ORDER[fn],mn=pn[an],mn!==void 0&&(yn=mn.executeHitDetection(Qe,Ve,ke,cn,en),yn))return yn}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const ke=t[0],Oe=t[1],Ge=t[2],Be=t[3],je=[ke,Oe,ke,Be,Ge,Be,Ge,Oe];return transform2D(je,0,8,2,e,je),je}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,t,ke,Oe,Ge,Be,je){const Ve=Object.keys(this.executorsByZIndex_).map(Number);Ve.sort(ascending),this.maxExtent_&&(e.save(),this.clip(e,ke)),Be=Be||ORDER;let Ze,Qe,en,tn,an,cn;for(je&&Ve.reverse(),Ze=0,Qe=Ve.length;Ze<Qe;++Ze){const dn=Ve[Ze].toString();for(an=this.executorsByZIndex_[dn],en=0,tn=Be.length;en<tn;++en){const hn=Be[en];cn=an[hn],cn!==void 0&&cn.execute(e,t,ke,Oe,Ge,je)}}this.maxExtent_&&e.restore()}}const circlePixelIndexArrayCache={};function getPixelIndexArray(r){if(circlePixelIndexArrayCache[r]!==void 0)return circlePixelIndexArrayCache[r];const e=r*2+1,t=r*r,ke=new Array(t+1);for(let Ge=0;Ge<=r;++Ge)for(let Be=0;Be<=r;++Be){const je=Ge*Ge+Be*Be;if(je>t)break;let Ve=ke[je];Ve||(Ve=[],ke[je]=Ve),Ve.push(((r+Ge)*e+(r+Be))*4+3),Ge>0&&Ve.push(((r-Ge)*e+(r+Be))*4+3),Be>0&&(Ve.push(((r+Ge)*e+(r-Be))*4+3),Ge>0&&Ve.push(((r-Ge)*e+(r-Be))*4+3))}const Oe=[];for(let Ge=0,Be=ke.length;Ge<Be;++Ge)ke[Ge]&&Oe.push(...ke[Ge]);return circlePixelIndexArrayCache[r]=Oe,Oe}class CanvasImmediateRenderer extends VectorContext{constructor(e,t,ke,Oe,Ge,Be,je){super(),this.context_=e,this.pixelRatio_=t,this.extent_=ke,this.transform_=Oe,this.transformRotation_=Oe?toFixed(Math.atan2(Oe[1],Oe[0]),10):0,this.viewRotation_=Ge,this.squaredTolerance_=Be,this.userTransform_=je,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create()}drawImages_(e,t,ke,Oe){if(!this.image_)return;const Ge=transform2D(e,t,ke,Oe,this.transform_,this.pixelCoordinates_),Be=this.context_,je=this.tmpLocalTransform_,Ve=Be.globalAlpha;this.imageOpacity_!=1&&(Be.globalAlpha=Ve*this.imageOpacity_);let Ze=this.imageRotation_;this.transformRotation_===0&&(Ze-=this.viewRotation_),this.imageRotateWithView_&&(Ze+=this.viewRotation_);for(let Qe=0,en=Ge.length;Qe<en;Qe+=2){const tn=Ge[Qe]-this.imageAnchorX_,an=Ge[Qe+1]-this.imageAnchorY_;if(Ze!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const cn=tn+this.imageAnchorX_,dn=an+this.imageAnchorY_;compose(je,cn,dn,1,1,Ze,-cn,-dn),Be.save(),Be.transform.apply(Be,je),Be.translate(cn,dn),Be.scale(this.imageScale_[0],this.imageScale_[1]),Be.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),Be.restore()}else Be.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,tn,an,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(Be.globalAlpha=Ve)}drawText_(e,t,ke,Oe){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const Ge=transform2D(e,t,ke,Oe,this.transform_,this.pixelCoordinates_),Be=this.context_;let je=this.textRotation_;for(this.transformRotation_===0&&(je-=this.viewRotation_),this.textRotateWithView_&&(je+=this.viewRotation_);t<ke;t+=Oe){const Ve=Ge[t]+this.textOffsetX_,Ze=Ge[t+1]+this.textOffsetY_;je!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(Be.save(),Be.translate(Ve-this.textOffsetX_,Ze-this.textOffsetY_),Be.rotate(je),Be.translate(this.textOffsetX_,this.textOffsetY_),Be.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&Be.strokeText(this.text_,0,0),this.textFillState_&&Be.fillText(this.text_,0,0),Be.restore()):(this.textStrokeState_&&Be.strokeText(this.text_,Ve,Ze),this.textFillState_&&Be.fillText(this.text_,Ve,Ze))}}moveToLineTo_(e,t,ke,Oe,Ge){const Be=this.context_,je=transform2D(e,t,ke,Oe,this.transform_,this.pixelCoordinates_);Be.moveTo(je[0],je[1]);let Ve=je.length;Ge&&(Ve-=2);for(let Ze=2;Ze<Ve;Ze+=2)Be.lineTo(je[Ze],je[Ze+1]);return Ge&&Be.closePath(),ke}drawRings_(e,t,ke,Oe){for(let Ge=0,Be=ke.length;Ge<Be;++Ge)t=this.moveToLineTo_(e,t,ke[Ge],Oe,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=transformGeom2D(e,this.transform_,this.pixelCoordinates_),ke=t[2]-t[0],Oe=t[3]-t[1],Ge=Math.sqrt(ke*ke+Oe*Oe),Be=this.context_;Be.beginPath(),Be.arc(t[0],t[1],Ge,0,2*Math.PI),this.fillState_&&Be.fill(),this.strokeState_&&Be.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const ke=t.getGeometryFunction()(e);ke&&(this.setStyle(t),this.drawGeometry(ke))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let ke=0,Oe=t.length;ke<Oe;++ke)this.drawGeometry(t[ke])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),ke=e.getStride();this.image_&&this.drawImages_(t,0,t.length,ke),this.text_!==""&&this.drawText_(t,0,t.length,ke)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),ke=e.getStride();this.image_&&this.drawImages_(t,0,t.length,ke),this.text_!==""&&this.drawText_(t,0,t.length,ke)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,ke=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(ke,0,ke.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(intersects$1(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const ke=this.context_,Oe=e.getFlatCoordinates();let Ge=0;const Be=e.getEnds(),je=e.getStride();ke.beginPath();for(let Ve=0,Ze=Be.length;Ve<Ze;++Ve)Ge=this.moveToLineTo_(Oe,Ge,Be[Ve],je,!1);ke.stroke()}if(this.text_!==""){const ke=e.getFlatMidpoints();this.drawText_(ke,0,ke.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,ke=e.getOrientedFlatCoordinates();let Oe=0;const Ge=e.getEndss(),Be=e.getStride();t.beginPath();for(let je=0,Ve=Ge.length;je<Ve;++je){const Ze=Ge[je];Oe=this.drawRings_(ke,Oe,Ze,Be)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,ke=this.contextFillState_;ke?ke.fillStyle!=e.fillStyle&&(ke.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,ke=this.contextStrokeState_;ke?(ke.lineCap!=e.lineCap&&(ke.lineCap=e.lineCap,t.lineCap=e.lineCap),equals$2(ke.lineDash,e.lineDash)||t.setLineDash(ke.lineDash=e.lineDash),ke.lineDashOffset!=e.lineDashOffset&&(ke.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),ke.lineJoin!=e.lineJoin&&(ke.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),ke.lineWidth!=e.lineWidth&&(ke.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),ke.miterLimit!=e.miterLimit&&(ke.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),ke.strokeStyle!=e.strokeStyle&&(ke.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,ke=this.contextTextState_,Oe=e.textAlign?e.textAlign:defaultTextAlign;ke?(ke.font!=e.font&&(ke.font=e.font,t.font=e.font),ke.textAlign!=Oe&&(ke.textAlign=Oe,t.textAlign=Oe),ke.textBaseline!=e.textBaseline&&(ke.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=Oe,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:Oe,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const ke=e.getColor();this.fillState_={fillStyle:asColorLike(ke||defaultFillStyle)}}if(!t)this.strokeState_=null;else{const ke=t.getColor(),Oe=t.getLineCap(),Ge=t.getLineDash(),Be=t.getLineDashOffset(),je=t.getLineJoin(),Ve=t.getWidth(),Ze=t.getMiterLimit(),Qe=Ge||defaultLineDash;this.strokeState_={lineCap:Oe!==void 0?Oe:defaultLineCap,lineDash:this.pixelRatio_===1?Qe:Qe.map(en=>en*this.pixelRatio_),lineDashOffset:(Be||defaultLineDashOffset)*this.pixelRatio_,lineJoin:je!==void 0?je:defaultLineJoin,lineWidth:(Ve!==void 0?Ve:defaultLineWidth)*this.pixelRatio_,miterLimit:Ze!==void 0?Ze:defaultMiterLimit,strokeStyle:asColorLike(ke||defaultStrokeStyle)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const ke=e.getPixelRatio(this.pixelRatio_),Oe=e.getAnchor(),Ge=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=Oe[0]*ke,this.imageAnchorY_=Oe[1]*ke,this.imageHeight_=t[1]*ke,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=Ge[0],this.imageOriginY_=Ge[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const Be=e.getScaleArray();this.imageScale_=[Be[0]*this.pixelRatio_/ke,Be[1]*this.pixelRatio_/ke],this.imageWidth_=t[0]*ke}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const an=t.getColor();this.textFillState_={fillStyle:asColorLike(an||defaultFillStyle)}}const ke=e.getStroke();if(!ke)this.textStrokeState_=null;else{const an=ke.getColor(),cn=ke.getLineCap(),dn=ke.getLineDash(),hn=ke.getLineDashOffset(),fn=ke.getLineJoin(),pn=ke.getWidth(),mn=ke.getMiterLimit();this.textStrokeState_={lineCap:cn!==void 0?cn:defaultLineCap,lineDash:dn||defaultLineDash,lineDashOffset:hn||defaultLineDashOffset,lineJoin:fn!==void 0?fn:defaultLineJoin,lineWidth:pn!==void 0?pn:defaultLineWidth,miterLimit:mn!==void 0?mn:defaultMiterLimit,strokeStyle:asColorLike(an||defaultStrokeStyle)}}const Oe=e.getFont(),Ge=e.getOffsetX(),Be=e.getOffsetY(),je=e.getRotateWithView(),Ve=e.getRotation(),Ze=e.getScaleArray(),Qe=e.getText(),en=e.getTextAlign(),tn=e.getTextBaseline();this.textState_={font:Oe!==void 0?Oe:defaultFont,textAlign:en!==void 0?en:defaultTextAlign,textBaseline:tn!==void 0?tn:defaultTextBaseline},this.text_=Qe!==void 0?Array.isArray(Qe)?Qe.reduce((an,cn,dn)=>an+=dn%2?" ":cn,""):Qe:"",this.textOffsetX_=Ge!==void 0?this.pixelRatio_*Ge:0,this.textOffsetY_=Be!==void 0?this.pixelRatio_*Be:0,this.textRotateWithView_=je!==void 0?je:!1,this.textRotation_=Ve!==void 0?Ve:0,this.textScale_=[this.pixelRatio_*Ze[0],this.pixelRatio_*Ze[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(r,e,t,ke,Oe,Ge,Be){const je=r[0]*HIT_DETECT_RESOLUTION,Ve=r[1]*HIT_DETECT_RESOLUTION,Ze=createCanvasContext2D(je,Ve);Ze.imageSmoothingEnabled=!1;const Qe=Ze.canvas,en=new CanvasImmediateRenderer(Ze,HIT_DETECT_RESOLUTION,Oe,null,Be),tn=t.length,an=Math.floor((256*256*256-1)/tn),cn={};for(let hn=1;hn<=tn;++hn){const fn=t[hn-1],pn=fn.getStyleFunction()||ke;if(!pn)continue;let mn=pn(fn,Ge);if(!mn)continue;Array.isArray(mn)||(mn=[mn]);const Cn=(hn*an).toString(16).padStart(7,"#00000");for(let wn=0,bn=mn.length;wn<bn;++wn){const Sn=mn[wn],Mn=Sn.getGeometryFunction()(fn);if(!Mn||!intersects$1(Oe,Mn.getExtent()))continue;const Tn=Sn.clone(),En=Tn.getFill();En&&En.setColor(Cn);const An=Tn.getStroke();An&&(An.setColor(Cn),An.setLineDash(null)),Tn.setText(void 0);const Ln=Sn.getImage();if(Ln){const jn=Ln.getImageSize();if(!jn)continue;const Dn=createCanvasContext2D(jn[0],jn[1],void 0,{alpha:!1}),Ci=Dn.canvas;Dn.fillStyle=Cn,Dn.fillRect(0,0,Ci.width,Ci.height),Tn.setImage(new Icon({img:Ci,anchor:Ln.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Ln.getOrigin(),opacity:1,size:Ln.getSize(),scale:Ln.getScale(),rotation:Ln.getRotation(),rotateWithView:Ln.getRotateWithView()}))}const Rn=Tn.getZIndex()||0;let Gn=cn[Rn];Gn||(Gn={},cn[Rn]=Gn,Gn.Polygon=[],Gn.Circle=[],Gn.LineString=[],Gn.Point=[]);const Nn=Mn.getType();if(Nn==="GeometryCollection"){const jn=Mn.getGeometriesArrayRecursive();for(let Dn=0,Ci=jn.length;Dn<Ci;++Dn){const Jn=jn[Dn];Gn[Jn.getType().replace("Multi","")].push(Jn,Tn)}}else Gn[Nn.replace("Multi","")].push(Mn,Tn)}}const dn=Object.keys(cn).map(Number).sort(ascending);for(let hn=0,fn=dn.length;hn<fn;++hn){const pn=cn[dn[hn]];for(const mn in pn){const yn=pn[mn];for(let Cn=0,wn=yn.length;Cn<wn;Cn+=2){en.setStyle(yn[Cn+1]);for(let bn=0,Sn=e.length;bn<Sn;++bn)en.setTransform(e[bn]),en.drawGeometry(yn[Cn])}}}return Ze.getImageData(0,0,Qe.width,Qe.height)}function hitDetect(r,e,t){const ke=[];if(t){const Oe=Math.floor(Math.round(r[0])*HIT_DETECT_RESOLUTION),Ge=Math.floor(Math.round(r[1])*HIT_DETECT_RESOLUTION),Be=(clamp(Oe,0,t.width-1)+clamp(Ge,0,t.height-1)*t.width)*4,je=t.data[Be],Ve=t.data[Be+1],Qe=t.data[Be+2]+256*(Ve+256*je),en=Math.floor((256*256*256-1)/e.length);Qe&&Qe%en===0&&ke.push(e[Qe/en-1])}return ke}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(r,e){return parseInt(getUid(r),10)-parseInt(getUid(e),10)}function getSquaredTolerance(r,e){const t=getTolerance(r,e);return t*t}function getTolerance(r,e){return SIMPLIFY_TOLERANCE*r/e}function renderCircleGeometry(r,e,t,ke,Oe){const Ge=t.getFill(),Be=t.getStroke();if(Ge||Be){const Ve=r.getBuilder(t.getZIndex(),"Circle");Ve.setFillStrokeStyle(Ge,Be),Ve.drawCircle(e,ke)}const je=t.getText();if(je&&je.getText()){const Ve=(Oe||r).getBuilder(t.getZIndex(),"Text");Ve.setTextStyle(je),Ve.drawText(e,ke)}}function renderFeature$1(r,e,t,ke,Oe,Ge,Be){let je=!1;const Ve=t.getImage();if(Ve){const Ze=Ve.getImageState();Ze==ImageState.LOADED||Ze==ImageState.ERROR?Ve.unlistenImageChange(Oe):(Ze==ImageState.IDLE&&Ve.load(),Ve.listenImageChange(Oe),je=!0)}return renderFeatureInternal(r,e,t,ke,Ge,Be),je}function renderFeatureInternal(r,e,t,ke,Oe,Ge){const Be=t.getGeometryFunction()(e);if(!Be)return;const je=Be.simplifyTransformed(ke,Oe);if(t.getRenderer())renderGeometry(r,je,t,e);else{const Ze=GEOMETRY_RENDERERS[je.getType()];Ze(r,je,t,e,Ge)}}function renderGeometry(r,e,t,ke){if(e.getType()=="GeometryCollection"){const Ge=e.getGeometries();for(let Be=0,je=Ge.length;Be<je;++Be)renderGeometry(r,Ge[Be],t,ke);return}r.getBuilder(t.getZIndex(),"Default").drawCustom(e,ke,t.getRenderer(),t.getHitDetectionRenderer())}function renderGeometryCollectionGeometry(r,e,t,ke,Oe){const Ge=e.getGeometriesArray();let Be,je;for(Be=0,je=Ge.length;Be<je;++Be){const Ve=GEOMETRY_RENDERERS[Ge[Be].getType()];Ve(r,Ge[Be],t,ke,Oe)}}function renderLineStringGeometry(r,e,t,ke,Oe){const Ge=t.getStroke();if(Ge){const je=r.getBuilder(t.getZIndex(),"LineString");je.setFillStrokeStyle(null,Ge),je.drawLineString(e,ke)}const Be=t.getText();if(Be&&Be.getText()){const je=(Oe||r).getBuilder(t.getZIndex(),"Text");je.setTextStyle(Be),je.drawText(e,ke)}}function renderMultiLineStringGeometry(r,e,t,ke,Oe){const Ge=t.getStroke();if(Ge){const je=r.getBuilder(t.getZIndex(),"LineString");je.setFillStrokeStyle(null,Ge),je.drawMultiLineString(e,ke)}const Be=t.getText();if(Be&&Be.getText()){const je=(Oe||r).getBuilder(t.getZIndex(),"Text");je.setTextStyle(Be),je.drawText(e,ke)}}function renderMultiPolygonGeometry(r,e,t,ke,Oe){const Ge=t.getFill(),Be=t.getStroke();if(Be||Ge){const Ve=r.getBuilder(t.getZIndex(),"Polygon");Ve.setFillStrokeStyle(Ge,Be),Ve.drawMultiPolygon(e,ke)}const je=t.getText();if(je&&je.getText()){const Ve=(Oe||r).getBuilder(t.getZIndex(),"Text");Ve.setTextStyle(je),Ve.drawText(e,ke)}}function renderPointGeometry(r,e,t,ke,Oe){const Ge=t.getImage(),Be=t.getText();let je;if(Ge){if(Ge.getImageState()!=ImageState.LOADED)return;let Ve=r;if(Oe){const Qe=Ge.getDeclutterMode();if(Qe!=="none")if(Ve=Oe,Qe==="obstacle"){const en=r.getBuilder(t.getZIndex(),"Image");en.setImageStyle(Ge,je),en.drawPoint(e,ke)}else Be&&Be.getText()&&(je={})}const Ze=Ve.getBuilder(t.getZIndex(),"Image");Ze.setImageStyle(Ge,je),Ze.drawPoint(e,ke)}if(Be&&Be.getText()){let Ve=r;Oe&&(Ve=Oe);const Ze=Ve.getBuilder(t.getZIndex(),"Text");Ze.setTextStyle(Be,je),Ze.drawText(e,ke)}}function renderMultiPointGeometry(r,e,t,ke,Oe){const Ge=t.getImage(),Be=t.getText();let je;if(Ge){if(Ge.getImageState()!=ImageState.LOADED)return;let Ve=r;if(Oe){const Qe=Ge.getDeclutterMode();if(Qe!=="none")if(Ve=Oe,Qe==="obstacle"){const en=r.getBuilder(t.getZIndex(),"Image");en.setImageStyle(Ge,je),en.drawMultiPoint(e,ke)}else Be&&Be.getText()&&(je={})}const Ze=Ve.getBuilder(t.getZIndex(),"Image");Ze.setImageStyle(Ge,je),Ze.drawMultiPoint(e,ke)}if(Be&&Be.getText()){let Ve=r;Oe&&(Ve=Oe);const Ze=Ve.getBuilder(t.getZIndex(),"Text");Ze.setTextStyle(Be,je),Ze.drawText(e,ke)}}function renderPolygonGeometry(r,e,t,ke,Oe){const Ge=t.getFill(),Be=t.getStroke();if(Ge||Be){const Ve=r.getBuilder(t.getZIndex(),"Polygon");Ve.setFillStrokeStyle(Ge,Be),Ve.drawPolygon(e,ke)}const je=t.getText();if(je&&je.getText()){const Ve=(Oe||r).getBuilder(t.getZIndex(),"Text");Ve.setTextStyle(je),Ve.drawText(e,ke)}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(e,t,ke){const Oe=t.extent,Ge=t.viewState,Be=Ge.center,je=Ge.resolution,Ve=Ge.projection,Ze=Ge.rotation,Qe=Ve.getExtent(),en=this.getLayer().getSource(),tn=t.pixelRatio,an=t.viewHints,cn=!(an[ViewHint.ANIMATING]||an[ViewHint.INTERACTING]),dn=this.compositionContext_,hn=Math.round(t.size[0]*tn),fn=Math.round(t.size[1]*tn),pn=en.getWrapX()&&Ve.canWrapX(),mn=pn?getWidth(Qe):null,yn=pn?Math.ceil((Oe[2]-Qe[2])/mn)+1:1;let Cn=pn?Math.floor((Oe[0]-Qe[0])/mn):0;do{const wn=this.getRenderTransform(Be,je,Ze,tn,hn,fn,Cn*mn);e.execute(dn,1,wn,Ze,cn,void 0,ke)}while(++Cn<yn)}setupCompositionContext_(){if(this.opacity_!==1){const e=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool);this.compositionContext_=e}else this.compositionContext_=this.context}releaseCompositionContext_(){if(this.opacity_!==1){const e=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=e,releaseCanvas(this.compositionContext_),canvasPool.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(e){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,e,e.declutterTree),this.releaseCompositionContext_())}renderFrame(e,t){const ke=e.pixelRatio,Oe=e.layerStatesArray[e.layerIndex];makeScale(this.pixelTransform,1/ke,1/ke),makeInverse(this.inversePixelTransform,this.pixelTransform);const Ge=toString$3(this.pixelTransform);this.useContainer(t,Ge,this.getBackground(e));const Be=this.context,je=Be.canvas,Ve=this.replayGroup_,Ze=this.declutterExecutorGroup;let Qe=Ve&&!Ve.isEmpty()||Ze&&!Ze.isEmpty();if(!Qe&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return null;const en=Math.round(e.size[0]*ke),tn=Math.round(e.size[1]*ke);je.width!=en||je.height!=tn?(je.width=en,je.height=tn,je.style.transform!==Ge&&(je.style.transform=Ge)):this.containerReused||Be.clearRect(0,0,en,tn),this.preRender(Be,e);const an=e.viewState;an.projection,this.opacity_=Oe.opacity,this.setupCompositionContext_();let cn=!1;if(Qe&&Oe.extent&&this.clipping){const dn=fromUserExtent(Oe.extent);Qe=intersects$1(dn,e.extent),cn=Qe&&!containsExtent(dn,e.extent),cn&&this.clipUnrotated(this.compositionContext_,e,dn)}return Qe&&this.renderWorlds(Ve,e),cn&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(Be,e),this.renderedRotation_!==an.rotation&&(this.renderedRotation_=an.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(e){return new Promise(t=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const ke=[this.context.canvas.width,this.context.canvas.height];apply(this.pixelTransform,ke);const Oe=this.renderedCenter_,Ge=this.renderedResolution_,Be=this.renderedRotation_,je=this.renderedProjection_,Ve=this.wrappedRenderedExtent_,Ze=this.getLayer(),Qe=[],en=ke[0]*HIT_DETECT_RESOLUTION,tn=ke[1]*HIT_DETECT_RESOLUTION;Qe.push(this.getRenderTransform(Oe,Ge,Be,HIT_DETECT_RESOLUTION,en,tn,0).slice());const an=Ze.getSource(),cn=je.getExtent();if(an.getWrapX()&&je.canWrapX()&&!containsExtent(cn,Ve)){let dn=Ve[0];const hn=getWidth(cn);let fn=0,pn;for(;dn<cn[0];)--fn,pn=hn*fn,Qe.push(this.getRenderTransform(Oe,Ge,Be,HIT_DETECT_RESOLUTION,en,tn,pn).slice()),dn+=hn;for(fn=0,dn=Ve[2];dn>cn[2];)++fn,pn=hn*fn,Qe.push(this.getRenderTransform(Oe,Ge,Be,HIT_DETECT_RESOLUTION,en,tn,pn).slice()),dn-=hn}this.hitDetectionImageData_=createHitDetectionImageData(ke,Qe,this.renderedFeatures_,Ze.getStyleFunction(),Ve,Ge,Be)}t(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,ke,Oe,Ge){if(!this.replayGroup_)return;const Be=t.viewState.resolution,je=t.viewState.rotation,Ve=this.getLayer(),Ze={},Qe=function(an,cn,dn){const hn=getUid(an),fn=Ze[hn];if(fn){if(fn!==!0&&dn<fn.distanceSq){if(dn===0)return Ze[hn]=!0,Ge.splice(Ge.lastIndexOf(fn),1),Oe(an,Ve,cn);fn.geometry=cn,fn.distanceSq=dn}}else{if(dn===0)return Ze[hn]=!0,Oe(an,Ve,cn);Ge.push(Ze[hn]={feature:an,layer:Ve,geometry:cn,distanceSq:dn,callback:Oe})}};let en;const tn=[this.replayGroup_];return this.declutterExecutorGroup&&tn.push(this.declutterExecutorGroup),tn.some(an=>en=an.forEachFeatureAtCoordinate(e,Be,je,ke,Qe,an===this.declutterExecutorGroup&&t.declutterTree?t.declutterTree.all().map(cn=>cn.value):null)),en}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),ke=t.getSource();if(!ke)return!1;const Oe=e.viewHints[ViewHint.ANIMATING],Ge=e.viewHints[ViewHint.INTERACTING],Be=t.getUpdateWhileAnimating(),je=t.getUpdateWhileInteracting();if(this.ready&&!Be&&Oe||!je&&Ge)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const Ve=e.extent,Ze=e.viewState,Qe=Ze.projection,en=Ze.resolution,tn=e.pixelRatio,an=t.getRevision(),cn=t.getRenderBuffer();let dn=t.getRenderOrder();dn===void 0&&(dn=defaultOrder);const hn=Ze.center.slice(),fn=buffer(Ve,cn*en),pn=fn.slice(),mn=[fn.slice()],yn=Qe.getExtent();if(ke.getWrapX()&&Qe.canWrapX()&&!containsExtent(yn,e.extent)){const Gn=getWidth(yn),Nn=Math.max(getWidth(fn)/2,Gn);fn[0]=yn[0]-Nn,fn[2]=yn[2]+Nn,wrapX$1(hn,Qe);const jn=wrapX$2(mn[0],Qe);jn[0]<yn[0]&&jn[2]<yn[2]?mn.push([jn[0]+Gn,jn[1],jn[2]+Gn,jn[3]]):jn[0]>yn[0]&&jn[2]>yn[2]&&mn.push([jn[0]-Gn,jn[1],jn[2]-Gn,jn[3]])}if(this.ready&&this.renderedResolution_==en&&this.renderedRevision_==an&&this.renderedRenderOrder_==dn&&containsExtent(this.wrappedRenderedExtent_,fn))return equals$2(this.renderedExtent_,pn)||(this.hitDetectionImageData_=null,this.renderedExtent_=pn),this.renderedCenter_=hn,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const Cn=new BuilderGroup(getTolerance(en,tn),fn,en,tn);let wn;this.getLayer().getDeclutter()&&(wn=new BuilderGroup(getTolerance(en,tn),fn,en,tn));let bn;for(let Gn=0,Nn=mn.length;Gn<Nn;++Gn)ke.loadFeatures(mn[Gn],en,Qe);const Sn=getSquaredTolerance(en,tn);let Mn=!0;const Tn=Gn=>{let Nn;const jn=Gn.getStyleFunction()||t.getStyleFunction();if(jn&&(Nn=jn(Gn,en)),Nn){const Dn=this.renderFeature(Gn,Sn,Nn,Cn,bn,wn);Mn=Mn&&!Dn}},En=toUserExtent(fn),An=ke.getFeaturesInExtent(En);dn&&An.sort(dn);for(let Gn=0,Nn=An.length;Gn<Nn;++Gn)Tn(An[Gn]);this.renderedFeatures_=An,this.ready=Mn;const Ln=Cn.finish(),Rn=new ExecutorGroup(fn,en,tn,ke.getOverlaps(),Ln,t.getRenderBuffer());return wn&&(this.declutterExecutorGroup=new ExecutorGroup(fn,en,tn,ke.getOverlaps(),wn.finish(),t.getRenderBuffer())),this.renderedResolution_=en,this.renderedRevision_=an,this.renderedRenderOrder_=dn,this.renderedExtent_=pn,this.wrappedRenderedExtent_=fn,this.renderedCenter_=hn,this.renderedProjection_=Qe,this.replayGroup_=Rn,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,ke,Oe,Ge,Be){if(!ke)return!1;let je=!1;if(Array.isArray(ke))for(let Ve=0,Ze=ke.length;Ve<Ze;++Ve)je=renderFeature$1(Oe,e,ke[Ve],t,this.boundHandleStyleImageChange_,Ge,Be)||je;else je=renderFeature$1(Oe,e,ke,t,this.boundHandleStyleImageChange_,Ge,Be);return je}}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,t){super(e),this.feature=t}}function getTraceTargets(r,e){const t=[];for(let ke=0;ke<e.length;++ke){const Ge=e[ke].getGeometry();appendGeometryTraceTargets(r,Ge,t)}return t}function getSquaredDistance(r,e){return squaredDistance$1(r[0],r[1],e[0],e[1])}function getCoordinate(r,e){const t=r.length;return e<0?r[e+t]:e>=t?r[e-t]:r[e]}function getCumulativeSquaredDistance(r,e,t){let ke,Oe;e<t?(ke=e,Oe=t):(ke=t,Oe=e);const Ge=Math.ceil(ke),Be=Math.floor(Oe);if(Ge>Be){const Ve=interpolateCoordinate(r,ke),Ze=interpolateCoordinate(r,Oe);return getSquaredDistance(Ve,Ze)}let je=0;if(ke<Ge){const Ve=interpolateCoordinate(r,ke),Ze=getCoordinate(r,Ge);je+=getSquaredDistance(Ve,Ze)}if(Be<Oe){const Ve=getCoordinate(r,Be),Ze=interpolateCoordinate(r,Oe);je+=getSquaredDistance(Ve,Ze)}for(let Ve=Ge;Ve<Be-1;++Ve){const Ze=getCoordinate(r,Ve),Qe=getCoordinate(r,Ve+1);je+=getSquaredDistance(Ze,Qe)}return je}function appendGeometryTraceTargets(r,e,t){if(e instanceof LineString){appendTraceTarget(r,e.getCoordinates(),!1,t);return}if(e instanceof MultiLineString){const ke=e.getCoordinates();for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe)appendTraceTarget(r,ke[Oe],!1,t);return}if(e instanceof Polygon){const ke=e.getCoordinates();for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe)appendTraceTarget(r,ke[Oe],!0,t);return}if(e instanceof MultiPolygon){const ke=e.getCoordinates();for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe){const Be=ke[Oe];for(let je=0,Ve=Be.length;je<Ve;++je)appendTraceTarget(r,Be[je],!0,t)}return}if(e instanceof GeometryCollection){const ke=e.getGeometries();for(let Oe=0;Oe<ke.length;++Oe)appendGeometryTraceTargets(r,ke[Oe],t);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(r,e,t,ke){const Oe=r[0],Ge=r[1];let Be=1/0,je=-1,Ve=NaN;for(let en=0;en<e.targets.length;++en){const tn=e.targets[en],an=tn.coordinates;let cn=1/0,dn;for(let hn=0;hn<an.length-1;++hn){const fn=an[hn],pn=an[hn+1],mn=getPointSegmentRelationship(Oe,Ge,fn,pn);mn.squaredDistance<cn&&(cn=mn.squaredDistance,dn=hn+mn.along)}cn<Be&&(Be=cn,tn.ring&&e.targetIndex===en&&(tn.endIndex>tn.startIndex?dn<tn.startIndex&&(dn+=an.length):tn.endIndex<tn.startIndex&&dn>tn.startIndex&&(dn-=an.length)),Ve=dn,je=en)}const Ze=e.targets[je];let Qe=Ze.ring;if(e.targetIndex===je&&Qe){const en=interpolateCoordinate(Ze.coordinates,Ve),tn=t.getPixelFromCoordinate(en);distance(tn,e.startPx)>ke&&(Qe=!1)}if(Qe){const en=Ze.coordinates,tn=en.length,an=Ze.startIndex,cn=Ve;if(an<cn){const dn=getCumulativeSquaredDistance(en,an,cn);getCumulativeSquaredDistance(en,an,cn-tn)<dn&&(Ve-=tn)}else{const dn=getCumulativeSquaredDistance(en,an,cn);getCumulativeSquaredDistance(en,an,cn+tn)<dn&&(Ve+=tn)}}return sharedUpdateInfo.index=je,sharedUpdateInfo.endIndex=Ve,sharedUpdateInfo}function appendTraceTarget(r,e,t,ke){const Oe=r[0],Ge=r[1];for(let Be=0,je=e.length-1;Be<je;++Be){const Ve=e[Be],Ze=e[Be+1],Qe=getPointSegmentRelationship(Oe,Ge,Ve,Ze);if(Qe.squaredDistance===0){const en=Be+Qe.along;ke.push({coordinates:e,ring:t,startIndex:en,endIndex:en});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(r,e,t,ke){const Oe=t[0],Ge=t[1],Be=ke[0],je=ke[1],Ve=Be-Oe,Ze=je-Ge;let Qe=0,en=Oe,tn=Ge;return(Ve!==0||Ze!==0)&&(Qe=clamp(((r-Oe)*Ve+(e-Ge)*Ze)/(Ve*Ve+Ze*Ze),0,1),en+=Ve*Qe,tn+=Ze*Qe),sharedRel.along=Qe,sharedRel.squaredDistance=toFixed(squaredDistance$1(r,e,en,tn),10),sharedRel}function interpolateCoordinate(r,e){const t=r.length;let ke=Math.floor(e);const Oe=e-ke;ke>=t?ke-=t:ke<0&&(ke+=t);let Ge=ke+1;Ge>=t&&(Ge-=t);const Be=r[ke],je=Be[0],Ve=Be[1],Ze=r[Ge],Qe=Ze[0]-je,en=Ze[1]-Ve;return[je+Qe*Oe,Ve+en*Oe]}class Draw extends PointerInteraction{constructor(e){const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let ke=e.geometryFunction;if(!ke){const Oe=this.mode_;if(Oe==="Circle")ke=function(Ge,Be,je){const Ve=Be||new Circle([NaN,NaN]),Ze=fromUserCoordinate(Ge[0]),Qe=squaredDistance(Ze,fromUserCoordinate(Ge[Ge.length-1]));return Ve.setCenterAndRadius(Ze,Math.sqrt(Qe),this.geometryLayout_),Ve};else{let Ge;Oe==="Point"?Ge=Point$1:Oe==="LineString"?Ge=LineString:Oe==="Polygon"&&(Ge=Polygon),ke=function(Be,je,Ve){return je?Oe==="Polygon"?Be[0].length?je.setCoordinates([Be[0].concat([Be[0][0]])],this.geometryLayout_):je.setCoordinates([],this.geometryLayout_):je.setCoordinates(Be,this.geometryLayout_):je=new Ge(Be,this.geometryLayout_),je}}}this.geometryFunction_=ke,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always$1:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=always$1:t=e:t=never,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===MapBrowserEventType.POINTERMOVE,ke=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),ke=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?ke=!1:t&&this.getPointerCount()<2?(ke=e.type===MapBrowserEventType.POINTERMOVE,ke&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(ke=!1),super.handleEvent(e)&&ke}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),ke=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),Oe=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),Ge=boundingExtent([ke,Oe]),Be=this.traceSource_.getFeaturesInExtent(Ge);if(Be.length===0)return;const je=getTraceTargets(e.coordinate,Be);je.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:je,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const ke=e.startIndex<=e.endIndex,Oe=e.startIndex<=t;ke===Oe?ke&&t>e.endIndex||!ke&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(ke&&t<e.endIndex||!ke&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let ke=0;if(e<t){const Oe=Math.ceil(e);let Ge=Math.floor(t);Ge===t&&(Ge-=1),ke=Ge-Oe+1}else{const Oe=Math.floor(e);let Ge=Math.ceil(t);Ge===t&&(Ge+=1),ke=Oe-Ge+1}ke>0&&this.removeLastPoints_(ke)}addTracedCoordinates_(e,t,ke){if(t===ke)return;const Oe=[];if(t<ke){const Ge=Math.ceil(t);let Be=Math.floor(ke);Be===ke&&(Be-=1);for(let je=Ge;je<=Be;++je)Oe.push(getCoordinate(e.coordinates,je))}else{const Ge=Math.floor(t);let Be=Math.ceil(ke);Be===ke&&(Be+=1);for(let je=Ge;je>=Be;--je)Oe.push(getCoordinate(e.coordinates,je))}Oe.length&&this.appendCoordinates(Oe)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&distance(t.startPx,e.pixel)<this.snapTolerance_)return;const ke=getTraceTargetUpdate(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==ke.index){if(t.targetIndex!==-1){const Ve=t.targets[t.targetIndex];this.removeTracedCoordinates_(Ve.startIndex,Ve.endIndex)}const je=t.targets[ke.index];this.addTracedCoordinates_(je,je.startIndex,ke.endIndex)}else{const je=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(je,ke.endIndex)}t.targetIndex=ke.index;const Oe=t.targets[t.targetIndex];Oe.endIndex=ke.endIndex;const Ge=interpolateCoordinate(Oe.coordinates,Oe.endIndex),Be=this.getMap().getPixelFromCoordinate(Ge);e.coordinate=Ge,e.pixel=[Math.round(Be[0]),Math.round(Be[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const ke=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const Oe=!this.finishCoordinate_;Oe&&this.startDrawing_(e.coordinate),!Oe&&this.freehand_?this.finishDrawing():!this.freehand_&&(!Oe||this.mode_==="Point")&&(this.atFinish_(e.pixel,ke)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,ke=e.pixel,Oe=t[0]-ke[0],Ge=t[1]-ke[1],Be=Oe*Oe+Ge*Ge;if(this.shouldHandle_=this.freehand_?Be>this.squaredClickTolerance_:Be<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let ke=!1;if(this.sketchFeature_){let Oe=!1,Ge=[this.finishCoordinate_];const Be=this.mode_;if(Be==="Point")ke=!0;else if(Be==="Circle")ke=this.sketchCoords_.length===2;else if(Be==="LineString")Oe=!t&&this.sketchCoords_.length>this.minPoints_;else if(Be==="Polygon"){const je=this.sketchCoords_;Oe=je[0].length>this.minPoints_,Ge=[je[0][0],je[0][je[0].length-2]],t?Ge=[je[0][0]]:Ge=[je[0][0],je[0][je[0].length-2]]}if(Oe){const je=this.getMap();for(let Ve=0,Ze=Ge.length;Ve<Ze;Ve++){const Qe=Ge[Ve],en=je.getPixelFromCoordinate(Qe),tn=e[0]-en[0],an=e[1]-en[1],cn=this.freehand_?1:this.snapTolerance_;if(ke=Math.sqrt(tn*tn+an*an)<=cn,ke){this.finishCoordinate_=Qe;break}}}}return ke}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const t=e.getLinearRing(0);let ke=this.sketchLine_.getGeometry();ke?(ke.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),ke.changed()):(ke=new LineString(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(ke))}startDrawing_(e){const t=this.getMap().getView().getProjection(),ke=getStrideForLayout(this.geometryLayout_);for(;e.length<ke;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const Oe=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(Oe),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),ke=this.sketchFeature_.getGeometry(),Oe=t.getView().getProjection(),Ge=getStrideForLayout(this.geometryLayout_);let Be,je;for(;e.length<Ge;)e.push(0);this.mode_==="Point"?je=this.sketchCoords_:this.mode_==="Polygon"?(Be=this.sketchCoords_[0],je=Be[Be.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(Be=this.sketchCoords_,je=Be[Be.length-1]),je[0]=e[0],je[1]=e[1],this.geometryFunction_(this.sketchCoords_,ke,Oe),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),ke.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(ke):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),ke=this.getMap().getView().getProjection();let Oe,Ge;const Be=this.mode_;Be==="LineString"||Be==="Circle"?(this.finishCoordinate_=e.slice(),Ge=this.sketchCoords_,Ge.length>=this.maxPoints_&&(this.freehand_?Ge.pop():Oe=!0),Ge.push(e.slice()),this.geometryFunction_(Ge,t,ke)):Be==="Polygon"&&(Ge=this.sketchCoords_[0],Ge.length>=this.maxPoints_&&(this.freehand_?Ge.pop():Oe=!0),Ge.push(e.slice()),Oe&&(this.finishCoordinate_=Ge[0]),this.geometryFunction_(this.sketchCoords_,t,ke)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),Oe&&this.finishDrawing()}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),ke=this.getMap().getView().getProjection(),Oe=this.mode_;for(let Ge=0;Ge<e;++Ge){let Be;if(Oe==="LineString"||Oe==="Circle"){if(Be=this.sketchCoords_,Be.splice(-2,1),Be.length>=2){this.finishCoordinate_=Be[Be.length-2].slice();const je=this.finishCoordinate_.slice();Be[Be.length-1]=je,this.createOrUpdateSketchPoint_(je)}this.geometryFunction_(Be,t,ke),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(Oe==="Polygon"){Be=this.sketchCoords_[0],Be.splice(-2,1);const je=this.sketchLine_.getGeometry();if(Be.length>=2){const Ve=Be[Be.length-2].slice();Be[Be.length-1]=Ve,this.createOrUpdateSketchPoint_(Ve)}je.setCoordinates(Be),this.geometryFunction_(this.sketchCoords_,t,ke)}if(Be.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return;let t=this.sketchCoords_;const ke=e.getGeometry(),Oe=this.getMap().getView().getProjection();this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,ke,Oe)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,ke,Oe),t=ke.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([t])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([t])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([t])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,ke=!this.sketchFeature_;ke&&this.startDrawing_(e[0]);let Oe;if(t==="LineString"||t==="Circle")Oe=this.sketchCoords_;else if(t==="Polygon")Oe=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;ke&&Oe.shift(),Oe.pop();for(let Be=0;Be<e.length;Be++)this.addToDrawing_(e[Be]);const Ge=e[e.length-1];this.addToDrawing_(Ge),this.modifyDrawing_(Ge)}extend(e){const ke=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=ke.getCoordinates();const Oe=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=Oe.slice(),this.sketchCoords_.push(Oe.slice()),this.sketchPoint_=new Feature(new Point$1(Oe)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function getDefaultStyleFunction$2(){const r=createEditingStyle();return function(e,t){return r[e.getGeometry().getType()]}}function getMode(r){switch(r){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+r)}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return noModifierKeys(t)&&targetNotEditable(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN){const ke=e.originalEvent,Oe=ke.key;if(this.condition_(e)&&(Oe==Key.DOWN||Oe==Key.LEFT||Oe==Key.RIGHT||Oe==Key.UP)){const Be=e.map.getView(),je=Be.getResolution()*this.pixelDelta_;let Ve=0,Ze=0;Oe==Key.DOWN?Ze=-je:Oe==Key.LEFT?Ve=-je:Oe==Key.RIGHT?Ve=je:Ze=je;const Qe=[Ve,Ze];rotate$1(Qe,Be.getRotation()),pan(Be,Qe,this.duration_),ke.preventDefault(),t=!0}}return!t}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!platformModifierKey(t)&&targetNotEditable(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const ke=e.originalEvent,Oe=ke.key;if(this.condition_(e)&&(Oe==="+"||Oe==="-")){const Ge=e.map,Be=Oe==="+"?this.delta_:-this.delta_,je=Ge.getView();zoomByDelta(je,Be,void 0,this.duration_),ke.preventDefault(),t=!0}}return!t}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,t,ke){super(e),this.features=t,this.mapBrowserEvent=ke}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(ke){return altKeyOnly(ke)&&singleClick(ke)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always$1,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const Oe=this.SEGMENT_WRITERS_[t.getType()];Oe&&Oe(e,t)}const ke=this.getMap();ke&&ke.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,ke),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const ke=this.featuresBeingModified_.getArray();for(let Oe=0,Ge=t.length;Oe<Ge;++Oe){const Be=t[Oe];for(let je=0,Ve=Be.length;je<Ve;++je){const Ze=Be[je].feature;Ze&&!ke.includes(Ze)&&this.featuresBeingModified_.push(Ze)}}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,ke=[];t.forEach(function(Oe){e===Oe.feature&&ke.push(Oe)});for(let Oe=ke.length-1;Oe>=0;--Oe){const Ge=ke[Oe];for(let Be=this.dragSegments_.length-1;Be>=0;--Be)this.dragSegments_[Be][0]===Ge&&this.dragSegments_.splice(Be,1);t.remove(Ge)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const ke=t.getCoordinates(),Oe={feature:e,geometry:t,segment:[ke,ke]};this.rBush_.insert(t.getExtent(),Oe)}writeMultiPointGeometry_(e,t){const ke=t.getCoordinates();for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe){const Be=ke[Oe],je={feature:e,geometry:t,depth:[Oe],index:Oe,segment:[Be,Be]};this.rBush_.insert(t.getExtent(),je)}}writeLineStringGeometry_(e,t){const ke=t.getCoordinates();for(let Oe=0,Ge=ke.length-1;Oe<Ge;++Oe){const Be=ke.slice(Oe,Oe+2),je={feature:e,geometry:t,index:Oe,segment:Be};this.rBush_.insert(boundingExtent(Be),je)}}writeMultiLineStringGeometry_(e,t){const ke=t.getCoordinates();for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe){const Be=ke[Oe];for(let je=0,Ve=Be.length-1;je<Ve;++je){const Ze=Be.slice(je,je+2),Qe={feature:e,geometry:t,depth:[Oe],index:je,segment:Ze};this.rBush_.insert(boundingExtent(Ze),Qe)}}}writePolygonGeometry_(e,t){const ke=t.getCoordinates();for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe){const Be=ke[Oe];for(let je=0,Ve=Be.length-1;je<Ve;++je){const Ze=Be.slice(je,je+2),Qe={feature:e,geometry:t,depth:[Oe],index:je,segment:Ze};this.rBush_.insert(boundingExtent(Ze),Qe)}}}writeMultiPolygonGeometry_(e,t){const ke=t.getCoordinates();for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe){const Be=ke[Oe];for(let je=0,Ve=Be.length;je<Ve;++je){const Ze=Be[je];for(let Qe=0,en=Ze.length-1;Qe<en;++Qe){const tn=Ze.slice(Qe,Qe+2),an={feature:e,geometry:t,depth:[je,Oe],index:Qe,segment:tn};this.rBush_.insert(boundingExtent(tn),an)}}}}writeCircleGeometry_(e,t){const ke=t.getCenter(),Oe={feature:e,geometry:t,index:CIRCLE_CENTER_INDEX,segment:[ke,ke]},Ge={feature:e,geometry:t,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[ke,ke]},Be=[Oe,Ge];Oe.featureSegments=Be,Ge.featureSegments=Be,this.rBush_.insert(createOrUpdateFromCoordinate(ke),Oe);let je=t;this.rBush_.insert(je.getExtent(),Ge)}writeGeometryCollectionGeometry_(e,t){const ke=t.getGeometriesArray();for(let Oe=0;Oe<ke.length;++Oe){const Ge=ke[Oe],Be=this.SEGMENT_WRITERS_[Ge.getType()];Be(e,Ge)}}createOrUpdateVertexFeature_(e,t,ke){let Oe=this.vertexFeature_;return Oe?Oe.getGeometry().setCoordinates(e):(Oe=new Feature(new Point$1(e)),this.vertexFeature_=Oe,this.overlay_.getSource().addFeature(Oe)),Oe.set("features",t),Oe.set("geometries",ke),Oe}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_);const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],ke=[],Oe=[];for(let Ge=0,Be=this.dragSegments_.length;Ge<Be;++Ge){const je=this.dragSegments_[Ge],Ve=je[0],Ze=Ve.feature;ke.includes(Ze)||ke.push(Ze);const Qe=Ve.geometry;Oe.includes(Qe)||Oe.push(Qe);const en=Ve.depth;let tn;const an=Ve.segment,cn=je[1];for(;t.length<Qe.getStride();)t.push(an[cn][t.length]);switch(Qe.getType()){case"Point":tn=t,an[0]=t,an[1]=t;break;case"MultiPoint":tn=Qe.getCoordinates(),tn[Ve.index]=t,an[0]=t,an[1]=t;break;case"LineString":tn=Qe.getCoordinates(),tn[Ve.index+cn]=t,an[cn]=t;break;case"MultiLineString":tn=Qe.getCoordinates(),tn[en[0]][Ve.index+cn]=t,an[cn]=t;break;case"Polygon":tn=Qe.getCoordinates(),tn[en[0]][Ve.index+cn]=t,an[cn]=t;break;case"MultiPolygon":tn=Qe.getCoordinates(),tn[en[1]][en[0]][Ve.index+cn]=t,an[cn]=t;break;case"Circle":if(an[0]=t,an[1]=t,Ve.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,Qe.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let dn=distance(fromUserCoordinate(Qe.getCenter()),fromUserCoordinate(t));Qe.setRadius(dn),this.changingFeature_=!1}break}tn&&this.setGeometryCoordinates_(Qe,tn)}this.createOrUpdateVertexFeature_(t,ke,Oe)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate;this.handlePointerAtPixel_(e.pixel,e.map,t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const ke=this.vertexFeature_;if(ke){e.map.getView().getProjection();const Oe=[],Ge=ke.getGeometry().getCoordinates(),Be=boundingExtent([Ge]),je=this.rBush_.getInExtent(Be),Ve={};je.sort(compareIndexes);for(let Ze=0,Qe=je.length;Ze<Qe;++Ze){const en=je[Ze],tn=en.segment;let an=getUid(en.geometry);const cn=en.depth;if(cn&&(an+="-"+cn.join("-")),Ve[an]||(Ve[an]=new Array(2)),en.geometry.getType()==="Circle"&&en.index===CIRCLE_CIRCUMFERENCE_INDEX){const dn=closestOnSegmentData(t,en);equals(dn,Ge)&&!Ve[an][0]&&(this.dragSegments_.push([en,0]),Ve[an][0]=en);continue}if(equals(tn[0],Ge)&&!Ve[an][0]){this.dragSegments_.push([en,0]),Ve[an][0]=en;continue}if(equals(tn[1],Ge)&&!Ve[an][1]){if(Ve[an][0]&&Ve[an][0].index===0){let dn=en.geometry.getCoordinates();switch(en.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":dn=dn[cn[1]];case"Polygon":if(en.index!==dn[cn[0]].length-2)continue;break}}this.dragSegments_.push([en,1]),Ve[an][1]=en;continue}getUid(tn)in this.vertexSegments_&&!Ve[an][0]&&!Ve[an][1]&&this.insertVertexCondition_(e)&&Oe.push(en)}Oe.length&&this.willModifyFeatures_(e,[Oe]);for(let Ze=Oe.length-1;Ze>=0;--Ze)this.insertVertex_(Oe[Ze],Ge)}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const ke=this.dragSegments_[t][0],Oe=ke.geometry;if(Oe.getType()==="Circle"){const Ge=Oe.getCenter(),Be=ke.featureSegments[0],je=ke.featureSegments[1];Be.segment[0]=Ge,Be.segment[1]=Ge,je.segment[0]=Ge,je.segment[1]=Ge,this.rBush_.update(createOrUpdateFromCoordinate(Ge),Be);let Ve=Oe;this.rBush_.update(Ve.getExtent(),je)}else this.rBush_.update(boundingExtent(ke.segment),ke)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.pixel,e.map,e.coordinate)}handlePointerAtPixel_(e,t,ke){const Oe=ke||t.getCoordinateFromPixel(e);t.getView().getProjection();const Ge=function(Ve,Ze){return projectedDistanceToSegmentDataSquared(Oe,Ve)-projectedDistanceToSegmentDataSquared(Oe,Ze)};let Be,je;if(this.hitDetection_){const Ve=typeof this.hitDetection_=="object"?Ze=>Ze===this.hitDetection_:void 0;t.forEachFeatureAtPixel(e,(Ze,Qe,en)=>{en&&en.getType()==="Point"&&(en=new Point$1(toUserCoordinate(en.getCoordinates())));const tn=en||Ze.getGeometry();if(Ze instanceof Feature&&this.features_.getArray().includes(Ze)){je=tn;const an=Ze.getGeometry().getFlatCoordinates().slice(0,2);Be=[{feature:Ze,geometry:je,segment:[an,an]}]}return!0},{layerFilter:Ve})}if(!Be){const Ve=fromUserExtent(createOrUpdateFromCoordinate(Oe,tempExtent)),Ze=t.getView().getResolution()*this.pixelTolerance_,Qe=toUserExtent(buffer(Ve,Ze,tempExtent));Be=this.rBush_.getInExtent(Qe)}if(Be&&Be.length>0){const Ve=Be.sort(Ge)[0],Ze=Ve.segment;let Qe=closestOnSegmentData(Oe,Ve);const en=t.getPixelFromCoordinate(Qe);let tn=distance(e,en);if(je||tn<=this.pixelTolerance_){const an={};if(an[getUid(Ze)]=!0,this.snapToPointer_||(this.delta_[0]=Qe[0]-Oe[0],this.delta_[1]=Qe[1]-Oe[1]),Ve.geometry.getType()==="Circle"&&Ve.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(Qe,[Ve.feature],[Ve.geometry]);else{const cn=t.getPixelFromCoordinate(Ze[0]),dn=t.getPixelFromCoordinate(Ze[1]),hn=squaredDistance(en,cn),fn=squaredDistance(en,dn);tn=Math.sqrt(Math.min(hn,fn)),this.snappedToVertex_=tn<=this.pixelTolerance_,this.snappedToVertex_&&(Qe=hn>fn?Ze[1]:Ze[0]),this.createOrUpdateVertexFeature_(Qe,[Ve.feature],[Ve.geometry]);const pn={};pn[getUid(Ve.geometry)]=!0;for(let mn=1,yn=Be.length;mn<yn;++mn){const Cn=Be[mn].segment;if(equals(Ze[0],Cn[0])&&equals(Ze[1],Cn[1])||equals(Ze[0],Cn[1])&&equals(Ze[1],Cn[0])){const wn=getUid(Be[mn].geometry);wn in pn||(pn[wn]=!0,an[getUid(Cn)]=!0)}else break}}this.vertexSegments_=an;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const ke=e.segment,Oe=e.feature,Ge=e.geometry,Be=e.depth,je=e.index;let Ve;for(;t.length<Ge.getStride();)t.push(0);switch(Ge.getType()){case"MultiLineString":Ve=Ge.getCoordinates(),Ve[Be[0]].splice(je+1,0,t);break;case"Polygon":Ve=Ge.getCoordinates(),Ve[Be[0]].splice(je+1,0,t);break;case"MultiPolygon":Ve=Ge.getCoordinates(),Ve[Be[1]][Be[0]].splice(je+1,0,t);break;case"LineString":Ve=Ge.getCoordinates(),Ve.splice(je+1,0,t);break;default:return}this.setGeometryCoordinates_(Ge,Ve);const Ze=this.rBush_;Ze.remove(e),this.updateSegmentIndices_(Ge,je,Be,1);const Qe={segment:[ke[0],t],feature:Oe,geometry:Ge,depth:Be,index:je};Ze.insert(boundingExtent(Qe.segment),Qe),this.dragSegments_.push([Qe,1]);const en={segment:[t,ke[1]],feature:Oe,geometry:Ge,depth:Be,index:je+1};Ze.insert(boundingExtent(en.segment),en),this.dragSegments_.push([en,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const e=this.lastPointerEvent_;this.willModifyFeatures_(e,this.dragSegments_);const t=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null,t}return!1}removeVertex_(){const e=this.dragSegments_,t={};let ke=!1,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn;for(Ve=e.length-1;Ve>=0;--Ve)Be=e[Ve],an=Be[0],cn=getUid(an.feature),an.depth&&(cn+="-"+an.depth.join("-")),cn in t||(t[cn]={}),Be[1]===0?(t[cn].right=an,t[cn].index=an.index):Be[1]==1&&(t[cn].left=an,t[cn].index=an.index+1);for(cn in t){switch(tn=t[cn].right,Qe=t[cn].left,Ze=t[cn].index,en=Ze-1,Qe!==void 0?an=Qe:an=tn,en<0&&(en=0),je=an.geometry,Ge=je.getCoordinates(),Oe=Ge,ke=!1,je.getType()){case"MultiLineString":Ge[an.depth[0]].length>2&&(Ge[an.depth[0]].splice(Ze,1),ke=!0);break;case"LineString":Ge.length>2&&(Ge.splice(Ze,1),ke=!0);break;case"MultiPolygon":Oe=Oe[an.depth[1]];case"Polygon":Oe=Oe[an.depth[0]],Oe.length>4&&(Ze==Oe.length-1&&(Ze=0),Oe.splice(Ze,1),ke=!0,Ze===0&&(Oe.pop(),Oe.push(Oe[0]),en=Oe.length-1));break}if(ke){this.setGeometryCoordinates_(je,Ge);const dn=[];if(Qe!==void 0&&(this.rBush_.remove(Qe),dn.push(Qe.segment[0])),tn!==void 0&&(this.rBush_.remove(tn),dn.push(tn.segment[1])),Qe!==void 0&&tn!==void 0){const hn={depth:an.depth,feature:an.feature,geometry:an.geometry,index:en,segment:dn};this.rBush_.insert(boundingExtent(hn.segment),hn)}this.updateSegmentIndices_(je,Ze,an.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return ke}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,ke,Oe){this.rBush_.forEachInExtent(e.getExtent(),function(Ge){Ge.geometry===e&&(ke===void 0||Ge.depth===void 0||equals$2(Ge.depth,ke))&&Ge.index>t&&(Ge.index+=Oe)})}}function compareIndexes(r,e){return r.index-e.index}function projectedDistanceToSegmentDataSquared(r,e,t){const ke=e.geometry;if(ke.getType()==="Circle"){let Ge=ke;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const Be=squaredDistance(Ge.getCenter(),fromUserCoordinate(r)),je=Math.sqrt(Be)-Ge.getRadius();return je*je}}const Oe=fromUserCoordinate(r);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(Oe,tempSegment)}function closestOnSegmentData(r,e,t){const ke=e.geometry;if(ke.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(ke.getClosestPoint(fromUserCoordinate(r)));const Oe=fromUserCoordinate(r);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(Oe,tempSegment))}function getDefaultStyleFunction$1(){const r=createEditingStyle();return function(e,t){return r.Point}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:always$1;this.condition_=e.onFocusOnly?all(focusWithTabindex,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const ke=e.map,Oe=e.originalEvent;Oe.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.coordinate);let Ge;if(e.type==EventType.WHEEL&&(Ge=Oe.deltaY,FIREFOX&&Oe.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(Ge/=DEVICE_PIXEL_RATIO),Oe.deltaMode===WheelEvent.DOM_DELTA_LINE&&(Ge*=40)),Ge===0)return!1;this.lastDelta_=Ge;const Be=Date.now();this.startTime_===void 0&&(this.startTime_=Be),(!this.mode_||Be-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(Ge)<4?"trackpad":"wheel");const je=ke.getView();if(this.mode_==="trackpad"&&!(je.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(je.getAnimating()&&je.cancelAnimations(),je.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),je.adjustZoom(-Ge/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=Be,!1;this.totalDelta_+=Ge;const Ve=Math.max(this.timeout_-(Be-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,ke),Ve),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let ke=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(ke=ke?ke>0?1:-1:0),zoomByDelta(t,ke,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const ke=this.targetPointers[0],Oe=this.targetPointers[1],Ge=Math.atan2(Oe.clientY-ke.clientY,Oe.clientX-ke.clientX);if(this.lastAngle_!==void 0){const Ve=Ge-this.lastAngle_;this.rotationDelta_+=Ve,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=Ve}this.lastAngle_=Ge;const Be=e.map,je=Be.getView();je.getConstraints().rotation!==disable&&(this.anchor_=Be.getCoordinateFromPixelInternal(Be.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(Be.render(),je.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const ke=this.targetPointers[0],Oe=this.targetPointers[1],Ge=ke.clientX-Oe.clientX,Be=ke.clientY-Oe.clientY,je=Math.sqrt(Ge*Ge+Be*Be);this.lastDistance_!==void 0&&(t=this.lastDistance_/je),this.lastDistance_=je;const Ve=e.map,Ze=Ve.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=Ve.getCoordinateFromPixelInternal(Ve.getEventPixel(centroid(this.targetPointers))),Ve.render(),Ze.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const ke=e.map.getView(),Oe=this.lastScaleDelta_>1?1:-1;return ke.endInteraction(this.duration_,Oe),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,t,ke,Oe){super(e),this.selected=t,this.deselected=ke,this.mapBrowserEvent=Oe}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const ke=e.layers;t=function(Oe){return ke.includes(Oe)}}else t=TRUE;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[getUid(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const ke=this.getMap().getAllLayers().find(function(Oe){if(Oe instanceof VectorLayer&&Oe.getSource()&&Oe.getSource().hasFeature(t))return Oe});ke&&this.addFeatureLayerAssociation_(t,ke)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=getUid(e);t in originalFeatureStyles||(originalFeatureStyles[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let Oe=t.length-1;Oe>=0;--Oe){const Ge=t[Oe];if(Ge!==this&&Ge instanceof Select&&Ge.getStyle()&&Ge.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(Ge.getStyle());return}}const ke=getUid(e);e.setStyle(originalFeatureStyles[ke]),delete originalFeatureStyles[ke]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),ke=this.removeCondition_(e),Oe=this.toggleCondition_(e),Ge=!t&&!ke&&!Oe,Be=e.map,je=this.getFeatures(),Ve=[],Ze=[];if(Ge){clear$1(this.featureLayerAssociation_),Be.forEachFeatureAtPixel(e.pixel,(Qe,en)=>{if(!(!(Qe instanceof Feature)||!this.filter_(Qe,en)))return this.addFeatureLayerAssociation_(Qe,en),Ze.push(Qe),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let Qe=je.getLength()-1;Qe>=0;--Qe){const en=je.item(Qe),tn=Ze.indexOf(en);tn>-1?Ze.splice(tn,1):(je.remove(en),Ve.push(en))}Ze.length!==0&&je.extend(Ze)}else{Be.forEachFeatureAtPixel(e.pixel,(Qe,en)=>{if(!(!(Qe instanceof Feature)||!this.filter_(Qe,en)))return(t||Oe)&&!je.getArray().includes(Qe)?(this.addFeatureLayerAssociation_(Qe,en),Ze.push(Qe)):(ke||Oe)&&je.getArray().includes(Qe)&&(Ve.push(Qe),this.removeFeatureLayerAssociation_(Qe)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let Qe=Ve.length-1;Qe>=0;--Qe)je.remove(Ve[Qe]);je.extend(Ze)}return(Ze.length>0||Ve.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,Ze,Ve,e)),!0}}function getDefaultStyleFunction(){const r=createEditingStyle();return extend$4(r.Polygon,r.LineString),extend$4(r.GeometryCollection,r.LineString),function(e){return e.getGeometry()?r[e.getGeometry().getType()]:null}}class Kinetic{constructor(e,t,ke){this.decay_=e,this.minVelocity_=t,this.delay_=ke,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let ke=t-3;for(;ke>0&&this.points_[ke+2]>e;)ke-=3;const Oe=this.points_[t+2]-this.points_[ke+2];if(Oe<1e3/60)return!1;const Ge=this.points_[t]-this.points_[ke],Be=this.points_[t+1]-this.points_[ke+1];return this.angle_=Math.atan2(Be,Ge),this.initialVelocity_=Math.sqrt(Ge*Ge+Be*Be)/Oe,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}function defaults$2(r){r=r||{};const e=new Collection,t=new Kinetic(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&e.push(new DragRotate),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&e.push(new DragPan({onFocusOnly:r.onFocusOnly,kinetic:t})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&e.push(new PinchRotate),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&e.push(new PinchZoom({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&e.push(new DragZoom({duration:r.zoomDuration})),e}var loglevel={exports:{}};(function(r){(function(e,t){r.exports?r.exports=t():e.log=t()})(commonjsGlobal,function(){var e=function(){},t="undefined",ke=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),Oe=["trace","debug","info","warn","error"],Ge={},Be=null;function je(dn,hn){var fn=dn[hn];if(typeof fn.bind=="function")return fn.bind(dn);try{return Function.prototype.bind.call(fn,dn)}catch{return function(){return Function.prototype.apply.apply(fn,[dn,arguments])}}}function Ve(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function Ze(dn){return dn==="debug"&&(dn="log"),typeof console===t?!1:dn==="trace"&&ke?Ve:console[dn]!==void 0?je(console,dn):console.log!==void 0?je(console,"log"):e}function Qe(){for(var dn=this.getLevel(),hn=0;hn<Oe.length;hn++){var fn=Oe[hn];this[fn]=hn<dn?e:this.methodFactory(fn,dn,this.name)}if(this.log=this.debug,typeof console===t&&dn<this.levels.SILENT)return"No console available for logging"}function en(dn){return function(){typeof console!==t&&(Qe.call(this),this[dn].apply(this,arguments))}}function tn(dn,hn,fn){return Ze(dn)||en.apply(this,arguments)}function an(dn,hn){var fn=this,pn,mn,yn,Cn="loglevel";typeof dn=="string"?Cn+=":"+dn:typeof dn=="symbol"&&(Cn=void 0);function wn(En){var An=(Oe[En]||"silent").toUpperCase();if(!(typeof window===t||!Cn)){try{window.localStorage[Cn]=An;return}catch{}try{window.document.cookie=encodeURIComponent(Cn)+"="+An+";"}catch{}}}function bn(){var En;if(!(typeof window===t||!Cn)){try{En=window.localStorage[Cn]}catch{}if(typeof En===t)try{var An=window.document.cookie,Ln=encodeURIComponent(Cn),Rn=An.indexOf(Ln+"=");Rn!==-1&&(En=/^([^;]+)/.exec(An.slice(Rn+Ln.length+1))[1])}catch{}return fn.levels[En]===void 0&&(En=void 0),En}}function Sn(){if(!(typeof window===t||!Cn)){try{window.localStorage.removeItem(Cn)}catch{}try{window.document.cookie=encodeURIComponent(Cn)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function Mn(En){var An=En;if(typeof An=="string"&&fn.levels[An.toUpperCase()]!==void 0&&(An=fn.levels[An.toUpperCase()]),typeof An=="number"&&An>=0&&An<=fn.levels.SILENT)return An;throw new TypeError("log.setLevel() called with invalid level: "+En)}fn.name=dn,fn.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},fn.methodFactory=hn||tn,fn.getLevel=function(){return yn??mn??pn},fn.setLevel=function(En,An){return yn=Mn(En),An!==!1&&wn(yn),Qe.call(fn)},fn.setDefaultLevel=function(En){mn=Mn(En),bn()||fn.setLevel(En,!1)},fn.resetLevel=function(){yn=null,Sn(),Qe.call(fn)},fn.enableAll=function(En){fn.setLevel(fn.levels.TRACE,En)},fn.disableAll=function(En){fn.setLevel(fn.levels.SILENT,En)},fn.rebuild=function(){if(Be!==fn&&(pn=Mn(Be.getLevel())),Qe.call(fn),Be===fn)for(var En in Ge)Ge[En].rebuild()},pn=Mn(Be?Be.getLevel():"WARN");var Tn=bn();Tn!=null&&(yn=Mn(Tn)),Qe.call(fn)}Be=new an,Be.getLogger=function(hn){if(typeof hn!="symbol"&&typeof hn!="string"||hn==="")throw new TypeError("You must supply a name when creating a logger.");var fn=Ge[hn];return fn||(fn=Ge[hn]=new an(hn,Be.methodFactory)),fn};var cn=typeof window!==t?window.log:void 0;return Be.noConflict=function(){return typeof window!==t&&window.log===Be&&(window.log=cn),Be},Be.getLoggers=function(){return Ge},Be.default=Be,Be})})(loglevel);var loglevelExports=loglevel.exports,LoggerByDefault$1={getLogger:function(r){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=r||"default";return loglevelExports.getLogger(t)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(r,e){if(Object.keys(arguments).length===0)return"Message indefined !";var t=Array.prototype.slice.call(arguments),ke=t.shift(),Oe=t,Ge=this[ke];try{Array.isArray(Oe)&&Oe.length>0?Ge=Ge.replace("%var%",Oe.join(" - ")):Ge=Ge.replace("%var%","%var% (not specified)")}catch{}return Ge}},Helper$1={normalyzeParameters:function(r){var e=null;if(r){var t=[];for(var ke in r)if(r.hasOwnProperty(ke)){var Oe=r[ke];Oe||(Oe=""),t.push(ke+"="+Oe)}e=t.join("&")}return e},normalyzeUrl:function(r,e,t){var ke=r;if(r){if(r.split("?").length-1>=2){var Oe=r.search(/\?/)+1;ke=r.substring(0,Oe)+r.slice(Oe).replace(/\?/g,"&")}var Ge=r.indexOf("?");Ge===-1&&(ke+="?"),Ge!==-1&&Ge!==r.length-1&&(ke+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),ke+=e):ke+=this.normalyzeParameters(e)),t&&(ke=encodeURIComponent(ke)),ke},indent:function(r,e){var t=r||0;return new Array(t+1).join("	")+e}};function commonjsRequire(r){throw new Error('Could not dynamically require "'+r+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(r,e){(function(t,ke){r.exports=ke()})(commonjsGlobal,function(){function t(Si){var Li=typeof Si;return Si!==null&&(Li==="object"||Li==="function")}function ke(Si){return typeof Si=="function"}var Oe=void 0;Array.isArray?Oe=Array.isArray:Oe=function(Si){return Object.prototype.toString.call(Si)==="[object Array]"};var Ge=Oe,Be=0,je=void 0,Ve=void 0,Ze=function(Li,Ri){wn[Be]=Li,wn[Be+1]=Ri,Be+=2,Be===2&&(Ve?Ve(bn):Mn())};function Qe(Si){Ve=Si}function en(Si){Ze=Si}var tn=typeof window<"u"?window:void 0,an=tn||{},cn=an.MutationObserver||an.WebKitMutationObserver,dn=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",hn=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function fn(){return function(){return process.nextTick(bn)}}function pn(){return typeof je<"u"?function(){je(bn)}:Cn()}function mn(){var Si=0,Li=new cn(bn),Ri=document.createTextNode("");return Li.observe(Ri,{characterData:!0}),function(){Ri.data=Si=++Si%2}}function yn(){var Si=new MessageChannel;return Si.port1.onmessage=bn,function(){return Si.port2.postMessage(0)}}function Cn(){var Si=setTimeout;return function(){return Si(bn,1)}}var wn=new Array(1e3);function bn(){for(var Si=0;Si<Be;Si+=2){var Li=wn[Si],Ri=wn[Si+1];Li(Ri),wn[Si]=void 0,wn[Si+1]=void 0}Be=0}function Sn(){try{var Si=Function("return this")().require("vertx");return je=Si.runOnLoop||Si.runOnContext,pn()}catch{return Cn()}}var Mn=void 0;dn?Mn=fn():cn?Mn=mn():hn?Mn=yn():tn===void 0&&typeof commonjsRequire=="function"?Mn=Sn():Mn=Cn();function Tn(Si,Li){var Ri=this,$i=new this.constructor(Ln);$i[An]===void 0&&Un($i);var er=Ri._state;if(er){var ar=arguments[er-1];Ze(function(){return Pi(er,$i,ar,Ri._result)})}else Kn(Ri,$i,Si,Li);return $i}function En(Si){var Li=this;if(Si&&typeof Si=="object"&&Si.constructor===Li)return Si;var Ri=new Li(Ln);return qn(Ri,Si),Ri}var An=Math.random().toString(36).substring(2);function Ln(){}var Rn=void 0,Gn=1,Nn=2;function jn(){return new TypeError("You cannot resolve a promise with itself")}function Dn(){return new TypeError("A promises callback cannot return that same promise.")}function Ci(Si,Li,Ri,$i){try{Si.call(Li,Ri,$i)}catch(er){return er}}function Jn(Si,Li,Ri){Ze(function($i){var er=!1,ar=Ci(Ri,Li,function(Rr){er||(er=!0,Li!==Rr?qn($i,Rr):Ai($i,Rr))},function(Rr){er||(er=!0,Ti($i,Rr))},"Settle: "+($i._label||" unknown promise"));!er&&ar&&(er=!0,Ti($i,ar))},Si)}function Ki(Si,Li){Li._state===Gn?Ai(Si,Li._result):Li._state===Nn?Ti(Si,Li._result):Kn(Li,void 0,function(Ri){return qn(Si,Ri)},function(Ri){return Ti(Si,Ri)})}function xn(Si,Li,Ri){Li.constructor===Si.constructor&&Ri===Tn&&Li.constructor.resolve===En?Ki(Si,Li):Ri===void 0?Ai(Si,Li):ke(Ri)?Jn(Si,Li,Ri):Ai(Si,Li)}function qn(Si,Li){if(Si===Li)Ti(Si,jn());else if(t(Li)){var Ri=void 0;try{Ri=Li.then}catch($i){Ti(Si,$i);return}xn(Si,Li,Ri)}else Ai(Si,Li)}function $n(Si){Si._onerror&&Si._onerror(Si._result),Ii(Si)}function Ai(Si,Li){Si._state===Rn&&(Si._result=Li,Si._state=Gn,Si._subscribers.length!==0&&Ze(Ii,Si))}function Ti(Si,Li){Si._state===Rn&&(Si._state=Nn,Si._result=Li,Ze($n,Si))}function Kn(Si,Li,Ri,$i){var er=Si._subscribers,ar=er.length;Si._onerror=null,er[ar]=Li,er[ar+Gn]=Ri,er[ar+Nn]=$i,ar===0&&Si._state&&Ze(Ii,Si)}function Ii(Si){var Li=Si._subscribers,Ri=Si._state;if(Li.length!==0){for(var $i=void 0,er=void 0,ar=Si._result,Rr=0;Rr<Li.length;Rr+=3)$i=Li[Rr],er=Li[Rr+Ri],$i?Pi(Ri,$i,er,ar):er(ar);Si._subscribers.length=0}}function Pi(Si,Li,Ri,$i){var er=ke(Ri),ar=void 0,Rr=void 0,Gs=!0;if(er){try{ar=Ri($i)}catch(Pr){Gs=!1,Rr=Pr}if(Li===ar){Ti(Li,Dn());return}}else ar=$i;Li._state!==Rn||(er&&Gs?qn(Li,ar):Gs===!1?Ti(Li,Rr):Si===Gn?Ai(Li,ar):Si===Nn&&Ti(Li,ar))}function Mi(Si,Li){try{Li(function($i){qn(Si,$i)},function($i){Ti(Si,$i)})}catch(Ri){Ti(Si,Ri)}}var tr=0;function Br(){return tr++}function Un(Si){Si[An]=tr++,Si._state=void 0,Si._result=void 0,Si._subscribers=[]}function Qn(){return new Error("Array Methods must be provided an Array")}var Hn=function(){function Si(Li,Ri){this._instanceConstructor=Li,this.promise=new Li(Ln),this.promise[An]||Un(this.promise),Ge(Ri)?(this.length=Ri.length,this._remaining=Ri.length,this._result=new Array(this.length),this.length===0?Ai(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ri),this._remaining===0&&Ai(this.promise,this._result))):Ti(this.promise,Qn())}return Si.prototype._enumerate=function(Ri){for(var $i=0;this._state===Rn&&$i<Ri.length;$i++)this._eachEntry(Ri[$i],$i)},Si.prototype._eachEntry=function(Ri,$i){var er=this._instanceConstructor,ar=er.resolve;if(ar===En){var Rr=void 0,Gs=void 0,Pr=!1;try{Rr=Ri.then}catch(Zs){Pr=!0,Gs=Zs}if(Rr===Tn&&Ri._state!==Rn)this._settledAt(Ri._state,$i,Ri._result);else if(typeof Rr!="function")this._remaining--,this._result[$i]=Ri;else if(er===Bi){var no=new er(Ln);Pr?Ti(no,Gs):xn(no,Ri,Rr),this._willSettleAt(no,$i)}else this._willSettleAt(new er(function(Zs){return Zs(Ri)}),$i)}else this._willSettleAt(ar(Ri),$i)},Si.prototype._settledAt=function(Ri,$i,er){var ar=this.promise;ar._state===Rn&&(this._remaining--,Ri===Nn?Ti(ar,er):this._result[$i]=er),this._remaining===0&&Ai(ar,this._result)},Si.prototype._willSettleAt=function(Ri,$i){var er=this;Kn(Ri,void 0,function(ar){return er._settledAt(Gn,$i,ar)},function(ar){return er._settledAt(Nn,$i,ar)})},Si}();function Fn(Si){return new Hn(this,Si).promise}function Hi(Si){var Li=this;return Ge(Si)?new Li(function(Ri,$i){for(var er=Si.length,ar=0;ar<er;ar++)Li.resolve(Si[ar]).then(Ri,$i)}):new Li(function(Ri,$i){return $i(new TypeError("You must pass an array to race."))})}function zi(Si){var Li=this,Ri=new Li(Ln);return Ti(Ri,Si),Ri}function Oi(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function Vi(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Bi=function(){function Si(Li){this[An]=Br(),this._result=this._state=void 0,this._subscribers=[],Ln!==Li&&(typeof Li!="function"&&Oi(),this instanceof Si?Mi(this,Li):Vi())}return Si.prototype.catch=function(Ri){return this.then(null,Ri)},Si.prototype.finally=function(Ri){var $i=this,er=$i.constructor;return ke(Ri)?$i.then(function(ar){return er.resolve(Ri()).then(function(){return ar})},function(ar){return er.resolve(Ri()).then(function(){throw ar})}):$i.then(Ri,Ri)},Si}();Bi.prototype.then=Tn,Bi.all=Fn,Bi.race=Hi,Bi.resolve=En,Bi.reject=zi,Bi._setScheduler=Qe,Bi._setAsap=en,Bi._asap=Ze;function Fi(){var Si=void 0;if(typeof commonjsGlobal<"u")Si=commonjsGlobal;else if(typeof self<"u")Si=self;else try{Si=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Li=Si.Promise;if(Li){var Ri=null;try{Ri=Object.prototype.toString.call(Li.resolve())}catch{}if(Ri==="[object Promise]"&&!Li.cast)return}Si.Promise=Bi}return Bi.polyfill=Fi,Bi.Promise=Bi,Bi})})(es6Promise);var es6PromiseExports=es6Promise.exports;const ES6Promise=getDefaultExportFromCjs$1(es6PromiseExports);var XHR={call:function(r){var e=LoggerByDefault$1.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!r.url)throw new Error("missing parameter : url is not defined !");if(!r.method)throw new Error("missing parameter : method is not defined !");r.format||(r.format="text");var t={};switch(t.url=r.url,t.data=r.data?r.data:null,t.method=r.method,t.timeOut=r.timeOut||0,t.scope=r.scope||this,t.proxy=r.proxy||null,t.content=r.content||null,t.headers=r.headers||{referer:"http://localhost"},r.method){case"DELETE":case"GET":break;case"PUT":case"POST":t.content=r.content?r.content:"application/x-www-form-urlencoded",t.headers=r.headers?r.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(r.format){case"text":this.__call(t).then(function(ke){e.trace(ke),r.onResponse.call(this,ke)}).catch(function(ke){r.onFailure.call(this,ke)});break;case"json":this.__callJSON(t).then(function(ke){e.trace(ke),r.onResponse.call(this,ke)}).catch(function(ke){r.onFailure.call(this,ke)});break;case"xml":this.__callXML(t).then(function(ke){e.trace(ke),r.onResponse.call(this,ke)}).catch(function(ke){r.onFailure.call(this,ke)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(r){var e=LoggerByDefault$1.getLogger("XHR");e.trace("[XHR::__call()]");var t=new Promise(function(ke,Oe){var Ge=r.method==="POST"||r.method==="PUT"?1:0;r.data&&(typeof r.data=="object"&&Object.keys(r.data).length||typeof r.data=="string"&&r.data.length)&&!Ge&&(r.url=Helper$1.normalyzeUrl(r.url,r.data)),e.trace("URL = ",r.url);var Be=null;if(typeof window>"u"){var je=require("node-fetch"),Ve={headers:{Referer:"https://localhost"}};return r.data&&typeof r.data=="string"&&Ge&&(Ve={method:r.method,body:r.data,headers:{"Content-Type":r.content,Referer:"https://localhost"}}),je(r.url,Ve).then(function(tn){if(tn.ok)ke(tn.text());else{var an="Errors Occured on Http Request (status : '"+tn.statusText+"' | url : '"+tn.url+"')",cn=tn.status;Oe({message:an,status:cn})}}).catch(function(tn){Oe({message:tn,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),Be=new XMLHttpRequest,Be.open(r.method,r.url,!0),Be.overrideMimeType=r.content;var Ze=null;r.timeOut>0&&(e.trace("XHR - TimeOut actif !"),Ze=window.setTimeout(function(){var tn="TimeOut Occured on Http Request with XMLHttpRequest !";Oe({message:tn,status:-1})},r.timeOut)),Ge&&(e.trace("data = ",r.data),Be.setRequestHeader("Content-type",r.content)),Be.onerror=function(tn){console.log(tn),Oe(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},Be.ontimeout=function(tn){console.log(tn),Oe(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},Be.onreadystatechange=function(tn){if(Be.readyState===4)if(Be.status===200)window.clearTimeout(Ze),ke(Be.response);else{var an="Errors Occured on Http Request (status : '"+tn.target.statusText+"' | url : '"+tn.target.responseURL+"' | response : '"+tn.target.response+"')",cn=tn.target.status;Oe({message:an,status:cn})}};var Qe=r.data&&Ge?r.data:null;Be.send(Qe)}else if(window.XDomainRequest){e.trace("XDomainRequest"),Be=new XDomainRequest,Be.open(r.method,r.url),Be.overrideMimeType=r.content,r.timeOut>0&&(Be.timeout=r.timeout,e.trace("XHR - TimeOut actif !")),Ge&&Be.setRequestHeader("Content-type",r.content),Be.onerror=function(){Oe(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},Be.ontimeout=function(){Oe(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},Be.onload=function(tn){if(Be.status===200)ke(Be.responseText);else{var an="Errors Occured on Http Request (status : '"+tn.target.statusText+"' | url : '"+tn.target.responseURL+"')",cn=tn.target.status;Oe({message:an,status:cn})}};var en=r.data&&Ge?r.data:null;Be.send(en)}else throw new Error("CORS not supported")});return t},__callJSON:function(r){return this.__call(r).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",r.url,e)})},__callXML:function(r){return this.__call(r).then(function(e){var t;if(typeof window>"u"){var ke=require("@xmldom/xmldom").DOMParser;t=new ke().parseFromString(e,"text/xml")}else if(window.DOMParser){var Oe=new window.DOMParser;t=Oe.parseFromString(e,"text/xml")}else t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e);return t}).catch(function(e){console.log("__callXML failed on : ",r.url,e)})}},JSONP={uuid:function(){var r=Math.floor(Date.now());return function(){return r++}}(),call:function(r){var e=LoggerByDefault$1.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!r)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!r.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(r.timeOut||(e.info("setting 'options.timeOut' default value"),r.timeOut=0),!r.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var t=typeof r.callbackSuffix=="string"?r.callbackSuffix:this.uuid(),ke=!1,Oe=!1,Ge=r.url.indexOf("callback=");if(Ge!==-1){ke=!0;var Be=r.url.indexOf("&",Ge);Be===-1&&(Be=r.url.length);var je=r.url.substring(Ge+9,Be);je&&(Oe=!0,r.callbackName=je,e.info("setting 'options.callbackName' value ("+r.callbackName+") from 'options.url' parameter"))}if(!ke){var Ve=r.url.indexOf("?");Ve===-1?r.url=r.url+"?callback=":Ve===r.url.length?r.url=r.url+"callback=":r.url=r.url+"&callback=",e.info("setting callback default key in 'options.url' : "+r.url)}var Ze=r.callbackName?!0:Oe;if(Oe||(r.callbackName||(e.info("setting 'options.callbackName' default value"),r.callbackName="callback",(t||t==="")&&(r.callbackName+=t)),r.url=r.url.replace("callback=","callback="+r.callbackName),e.info("setting callback function name in 'options.url' : "+r.url)),r.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),r.onTimeOut=function(){console.log("TimeOut while invoking url : "+r.url)}),!Ze){var Qe=this,en=null;r.timeOut>0&&(en=window.setTimeout(function(){window[r.callbackName]=function(){},r.onTimeOut(),Qe._deleteScript(t)},r.timeOut)),window[r.callbackName]=function(tn){window.clearTimeout(en),r.onResponse(tn),Qe._deleteScript(t)}}this._createScript(t,r.url)},_createScript:function(r,e){var t,ke=document.getElementById("results"+r);t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),t.setAttribute("charset","UTF-8"),t.setAttribute("id","results"+r),t.setAttribute("async","true");var Oe=document.documentElement||document.getElementsByTagName("head")[0];ke===null?Oe.appendChild(t):Oe.replaceChild(t,ke)},_deleteScript:function(r){var e=document.getElementById("results"+r);if(e){var t=e.parentNode||document.documentElement;if(!t)return;t.removeChild(e)}}},Protocol={send:function(r){var e=r||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&r.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(r.protocol==="XHR"||r.format==="json"?e.wrap=!1:r.protocol==="JSONP"&&r.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var t={};t.output=e.output,t.callback=e.callback,delete t.callback,e.url=Helper$1.normalyzeUrl(r.url,t)}switch(e.protocol){case"XHR":r.method==="GET"&&r.nocache&&(e.url=Helper$1.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper$1.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(r){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=r;typeof r=="string"||r instanceof String?(this.message=r,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const name="geoportal-access-lib",version$1="3.4.4",date="17/11/2024",description="French Geoportal resources access library",module="src/Gp.js",main="dist/GpServices-src.js",homepage="https://github.com/IGNF/geoportal-access-lib#readme",scripts={clean:'echo "Warning: no yet implemented!" && exit 0',setup:"npm install",cover:"nyc --reporter=lcov --reporter=text npm run test",eslint:"eslint src/",build:"webpack --mode=none","build:prod":"webpack --mode=production","build:dev":"webpack --mode=development",test:'mocha-webpack --reporter mochawesome --reporter-options reportDir=test-report,reportFilename=index --webpack-config ./test/webpack/webpack.test.js --glob "test_*.js" test/spec/',"test:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.js","test:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.test.serve.docker.js","test:end-to-end:serve":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.js","test:end-to-end:serve:docker":"webpack-dev-server --hot --config ./test/webpack/webpack.end-to-end.serve.docker.js",sample:"npm run sample:serve","sample:serve":"webpack-dev-server --mode=none --open-page samples/index-src.html --https --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:prod":"webpack-dev-server --mode=production --open-page samples/index-prod.html --content-base . --output-public-path '/dist/' --port 9001 --open","sample:serve:dev":"webpack-dev-server --mode=development --open-page samples/index-map.html --content-base . --output-public-path '/dist/' --port 9001 --open",doc:"npm run doc:serve","doc:serve":"webpack-dev-server --content-base jsdoc --port 9001 --open"},engines={node:"<=16"},nyc={include:["src/**/*.js"],instrument:!1,sourceMap:!1},repository={type:"git",url:"https://github.com/IGNF/geoportal-access-lib.git"},keywords=["geoplateforme","geoportail","webservice","javascript","es6"],author="IGNF",license="CECILL-B",dependencies={"es6-promise":"^4.2.4","node-fetch":"^2.6.1","@xmldom/xmldom":"^0.8.10"},devDependencies={"@babel/core":"^7.12.10","@babel/plugin-transform-template-literals":"^7.12.1","@babel/preset-env":"^7.12.11","babel-loader":"^8.2.2",chai:"^4.1.2","clean-webpack-plugin":"^3.0.0","copy-webpack-plugin":"^5.1.2",eslint:"^7.18.0","eslint-config-standard":"^16.0.2","eslint-loader":"^4.0.2","eslint-plugin-import":"^2.22.1","eslint-plugin-node":"^11.1.0","eslint-plugin-promise":"^4.2.1","eslint-plugin-standard":"^5.0.0",glob:"^7.1.2","handlebars-layouts":"^3.1.4","handlebars-webpack-plugin":"^1.4.1","html-webpack-plugin":"^4.5.1","istanbul-instrumenter-loader":"^3.0.1","jsdoc-webpack-plugin":"^0.3.0",loglevel:"^1.6.1",mocha:"^7.2.0","mocha-loader":"^5.1.5","mocha-webpack":"^2.0.0-beta.0",mochawesome:"^6.2.1",nyc:"^15.1.0",path:"^0.12.7","replace-bundle-webpack-plugin":"^1.0.0",sinon:"^9.2.4","sinon-es6":"0.0.3","speed-measure-webpack-plugin":"^1.4.2","string-template":"^1.0.0","terser-webpack-plugin":"^2.3.8",webpack:"^4.46.0","webpack-cli":"^3.3.12","webpack-dev-server":"^3.11.2","webpack-node-externals":"^2.5.2","webpack-shell-plugin":"^0.5.0"},bundledDependencies=[],peerDependencies={},optionalDependencies={},Pkg={name,version:version$1,date,description,module,main,homepage,scripts,engines,nyc,repository,keywords,author,license,dependencies,devDependencies,bundledDependencies,peerDependencies,optionalDependencies};function CommonService(r){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault$1.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(ke){console.log("onSuccess - la reponse est la suivante : ",ke)},onFailure:function(ke){ke.status===200||!ke.status?console.log("onFailure : ",ke.message):console.log("onFailure - Erreur (",ke.status,") : ",ke.message)}};for(var e in r)r.hasOwnProperty(e)&&(this.options[e]=r[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(ke){console.log("onSuccess - la réponse brute du service est la suivante : ",ke)});var t=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!t)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof r.httpMethod=="string"?r.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof r.protocol=="string"?r.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=r.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var r=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(r,Ge,t)}e.call(r);function t(Be){this.logger.trace("CommonService::onBuildRequest : ",Be),this.callService.call(r,Ge,ke)}function ke(Be){this.logger.trace("CommonService::onCallService : ",Be),this.analyzeResponse.call(r,Ge,Oe)}function Oe(Be){if(this.logger.trace("CommonService::onAnalyzeResponse : ",Be),Be)this.options.onSuccess.call(this,Be);else return Ge.call(this,new ErrorService("Analyse de la reponse en échec !?"))}function Ge(Be){this.logger.trace("CommonService::onError()");var je=Be;je instanceof ErrorService||(je=new ErrorService(Be.message)),this.options.onFailure.call(this,je)}},buildRequest:function(r,e){this.logger.error("overwritten method !"),r&&r.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(r,e){var t=null,ke=this.request,Oe=!!(this.options.proxyURL&&this.options.protocol==="XHR"),Ge={"gp-access-lib":Pkg.version};this.options.apiKey&&(Ge.apiKey=this.options.apiKey),this.options.serverUrl=Helper$1.normalyzeUrl(this.options.serverUrl,Ge,!1),Oe&&(this.options.httpMethod==="GET"&&(t=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,this.request,!0),ke=null),this.options.httpMethod==="POST"&&(t=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,null,!0),ke=this.request));var Be=this,je={url:t||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:ke,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(Ve){Be.logger.trace("callService::onResponse()");var Ze=null;if(Be.options.protocol==="XHR"&&(Be.logger.trace("Response XHR",Ve),Ze=Ve),Be.options.protocol==="JSONP")if(Be.logger.trace("Response JSON",Ve),Ve)if(Ve.http)if(Ve.http.status!==200){r.call(Be,new ErrorService({status:Ve.http.status,message:Ve.http.error,type:ErrorService.TYPE_SRVERR}));return}else Ze=Ve.xml,Be.options.rawResponse&&(Ze=Ve);else Ze=Ve;else{r.call(Be,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof Be.options.onBeforeParse=="function"){var Qe=Be.options.onBeforeParse(Ze);typeof Qe=="string"&&(Ze=Qe)}Be.response=Ze,e.call(Be,Ze)},onFailure:function(Ve){Be.logger.trace("callService::onFailure()"),Ve.type=ErrorService.TYPE_SRVERR,r.call(Be,new ErrorService(Ve))},onTimeOut:function(){Be.logger.trace("callService::onTimeOut()"),r.call(Be,new ErrorService("TimeOut!"))}};Protocol.send(je)},analyzeResponse:function(r,e){this.logger.error("overwritten method !"),r&&r.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(r){var e="data.geopf.fr",t;return DefaultUrlService.ssl===!1?t="http://":t="https://",t+e+r},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(r){Array.isArray(r)||(r=r.split(","));for(var e=[],t=0;t<r.length;t++)e[t]=this._key+r[t]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(r){if(r)return!!this.generalOptions.apiKeys[r]},getLayersId:function(r){return this.generalOptions.apiKeys[r]},getLayerId:function(r,e){if(!(!r||!e)){var t=null;if(this.layers){var ke=this.layers;for(var Oe in ke)if(ke.hasOwnProperty(Oe)){var Ge=Oe.split("$");if(r===Ge[0]&&Ge[1]){var Be=Ge[1].split(":"),je=Ge[1].split(";");if(je[1]===e.toUpperCase()){t=Oe;break}if(Be[2]===e.toUpperCase()){t=Oe;break}}}}if(t)return t}},getLayersConf:function(r){var e={},t=this.getLayersId(r);if(t)for(var ke=0;ke<t.length;ke++){var Oe=t[ke];e[Oe]=this.layers[Oe]}return e},getLayerConf:function(r){if(this.layers)return this.layers[r]},getLayerParams:function(r,e){var t={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var ke=this.getLayerId(r,e);if(ke){var Oe=this.getLayerConf(ke),Ge=this.getLayerKey(ke);if(Ge.length===0)return;for(var Be=0;Be<Ge.length;Be++)Oe.serviceParams.serverUrl[Ge[Be]]&&(t.url=Oe.serviceParams.serverUrl[Ge[Be]]);if(e!=="WFS"&&(/\/v\//.test(t.url)?t.styles=" ":t.styles=Oe.styles[0].name),t.version=Oe.serviceParams.version,t.format=Oe.formats&&Oe.formats.length?Oe.formats[0].name:"",t.projection=Oe.defaultProjection,t.minScale=Oe.globalConstraint.minScaleDenominator,t.maxScale=Oe.globalConstraint.maxScaleDenominator,t.extent=Oe.globalConstraint.bbox,t.legends=Oe.legends,t.title=Oe.title,t.description=Oe.description,e==="WMS"&&(t.metadata=Oe.metadata),Oe.wmtsOptions){t.tileMatrixSetLimits=Oe.wmtsOptions.tileMatrixSetLimits;var je=Oe.wmtsOptions.tileMatrixSetLink;if(je){t.TMSLink=je;var Ve=this.getTMSConf(je);t.matrixIds=Object.keys(Ve.tileMatrices),t.tileMatrices=Ve.tileMatrices,t.nativeResolutions=Ve.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return t},getLayerKey:function(r){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var t=this.generalOptions.apiKeys;for(var ke in t){var Oe=t[ke];Oe.forEach(function(Ge){Ge===r&&e.push(ke)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(r){if(this.tileMatrixSets)return this.tileMatrixSets[r]},getGlobalConstraints:function(r){var e={};if(r){var t=this.getLayerConf(r);e.projection=t.defaultProjection,e.minScale=t.globalConstraint.minScaleDenominator,e.maxScale=t.globalConstraint.maxScaleDenominator,e.extent=t.globalConstraint.bbox}return e}};function Config$1(r){if(!(this instanceof Config$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault$1.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=r.onSuccess!==null&&typeof r.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!r.apiKey&&!r.customConfigFile&&(r.apiKey="full"),this.options={},this.options.onSuccess=r.onSuccess,this.options.onFailure=r.onFailure,this.options.sync=r.sync||!1,this.options.listConfigUrls=r.customConfigFile?[r.customConfigFile]:Array.isArray(r.apiKey)?DefaultUrlService.Config.url(r.apiKey):DefaultUrlService.Config.url(r.apiKey.split(","))}Config$1.prototype=Object.create(CommonService.prototype,{});Config$1.prototype.constructor=Config$1;Config$1.prototype.buildRequest=function(r,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){r.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config$1.prototype.callService=function(r,e){this.options.sync?__callServiceSync.call(this,r,e):__callService.call(this,r,e)};var __callService=function(r,e){this.listConfigResults=[];let t=null;if(typeof window>"u"){var ke=require("node-fetch");t=ke}else t=window.fetch;var Oe=Be=>t(Be,{credentials:"same-origin"}).then(je=>{if(je.ok)return je.json().then(Ve=>Ve).catch(Ve=>{throw new Error("Exception Json : "+Ve)});throw new Error("Exception HTTP : "+je.status+" (status code) !")}).catch(je=>new Promise((Ve,Ze)=>{Ze(je)})),Ge=[];for(let Be=0;Be<this.listConfigUrls.length;Be++){const je=this.listConfigUrls[Be];Ge.push(Oe(je))}Promise.all(Ge).then(Be=>{if(!Be)throw new Error("results config empty !?");Be.forEach(je=>{this.listConfigResults.push(je)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(Be=>{r.call(this,Be)})},__callServiceSync=function(r,e){this.listConfigResults=[];for(var t=0;t<this.listConfigUrls.length;t++){const Oe=this.listConfigUrls[t],Ge=new XMLHttpRequest;if(Ge.open("GET",Oe,!1),Ge.send(null),Ge.status===200){var ke=JSON.parse(Ge.responseText);this.listConfigResults.push(ke)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):r.call(this,new Error("..."))};Config$1.prototype.analyzeResponse=function(r,e){var t=function(je){for(var Ve={},Ze={},Qe={},en=0;en<je.length;en++){if(!je[en].generalOptions||!je[en].layers)return;Ze={...Ze,...je[en].generalOptions.apiKeys},Ve={...Ve,...je[en].layers},Qe={...Qe,...je[en].tileMatrixSets}}var tn={generalOptions:{apiKeys:Ze},layers:Ve,tileMatrixSets:Qe};return tn},ke=t(this.listConfigResults);if(!ke){r.call(this,new Error("configuration structure not conforme !"));return}var Oe=new ConfigInterface;Object.assign(Oe,ke);var Ge=typeof window<"u"?window:{};if(Ge.Gp||(Ge.Gp={}),Ge.Gp.Config){Object.assign(Ge.Gp.Config,Oe);for(var Be in Oe)Ge.Gp.Config[Be]=Oe[Be]}else Ge.Gp.Config=Oe;e.call(this,Ge.Gp.Config)};function AltiRequest(r){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=r||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(r){for(var e=[],t=0;t<r.length;t++){var ke=r[t];ke.lon&&ke.lat&&e.push(ke)}this.positions=e},getPositions:function(r){if(!r)return this.positions;var e=this.positions.length-1;return r>e||r<e?(this.logger.warn("index out of range !"),this.positions):this.positions[r]},addPositions:function(r){for(var e=0;e<r.length;e++){var t=r[e];t.lon&&t.lat&&this.positions.push(r[e])}},getLon:function(){for(var r=[],e=0;e<this.positions.length;e++)r.push(this.positions[e].lon);return this.logger.trace(r),r.join(this.delimiter)},getLat:function(){for(var r=[],e=0;e<this.positions.length;e++)r.push(this.positions[e].lat);return this.logger.trace(r),r.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var r=[];return r.push({k:"lon",v:this.getLon()}),r.push({k:"lat",v:this.getLat()}),r.push({k:"delimiter",v:this.delimiter}),r.push({k:"indent",v:this.indent}),r.push({k:"crs",v:this.crs}),r.push({k:"format",v:this.format}),r};function AltiElevationRequest(r){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(r){this._zonly=r}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var r=[];return r.push({k:"lon",v:this.getLon()}),r.push({k:"lat",v:this.getLat()}),r.push({k:"indent",v:this.indent}),r.push({k:"crs",v:this.crs}),r.push({k:"zonly",v:this.zonly}),r.push({k:"format",v:this.format}),r.push({k:"resource",v:this.resource}),r};function AltiProfilRequest(r){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(r){this._sampling=r}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var r=[];return r.push({k:"lon",v:this.getLon()}),r.push({k:"lat",v:this.getLat()}),r.push({k:"indent",v:this.indent}),r.push({k:"crs",v:this.crs}),r.push({k:"sampling",v:this.sampling}),r.push({k:"format",v:this.format}),r.push({k:"resource",v:this.resource}),r};function AltiRequestREST(r){if(this.logger=LoggerByDefault$1.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=r||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var r="";return this.method==="POST"?r=this.template.post.value:this.method==="GET"&&(r=this.template.get.value),r=r.replace(/__LON__/g,this.DataObject.getLon()),r=r.replace(/__LAT__/g,this.DataObject.getLat()),r=r.replace(/__INDENT__/g,this.DataObject.indent),r=r.replace(/__CRS__/g,this.DataObject.crs),r=r.replace(/__RESOURCE__/g,this.DataObject.resource),r=r.replace(/__MEASURES__/g,this.DataObject.measures),r=r+this.__addDataInputs(),this.logger.trace("traduction tmpl",r),this.requestString=r,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var r;if(this.method==="POST")r=this.template.post;else if(this.method==="GET")r=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=r.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=r.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(r){if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=r||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var r=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return r.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var r="";if(this.method==="POST")r=this.template.post.value;else if(this.method==="GET")r=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return r=r.replace(/__SERVICE__/g,this.paramservice),r=r.replace(/__VERSION__/g,this.paramversion),r=r.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),r=r.replace(/__IDENTIFIER__/g,this.paramidentifier),r=r.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(r=r.replace(/__NAMESPACE__/g,this.namespaceByDefault),r=r.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),r=r.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),r?(this.requestString=r,this.logger.trace("traduction tmpl",r),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var r=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",t="",ke=this,Oe=this.DataObject.getData(),Ge=0;Ge<Oe.length;Ge++)(function(Be){e&&(e=Be===Oe.length-1?"":";"),t=t.concat(ke.__addDataInput(r,Oe[Be].k,Oe[Be].v),e)})(Ge);return t},__addDataInput:function(r,e,t){var ke=r;return ke=ke.replace(/__KEY__/g,e),ke=ke.replace(/__DATA__/g,t),ke},setMethod:function(r){r==="GET"||r==="POST"?this.method=r:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(r){var e=LoggerByDefault$1.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!r)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!r.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var t=null;switch(r.type){case"Elevation":r.wps.identifier="gs:WPSElevation",t=new AltiElevationRequest(r.param);break;case"Profil":r.wps.identifier="gs:WPSLineElevation",t=new AltiProfilRequest(r.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var ke={data:t,method:r.method,param:r.wps},Oe=new WPS(ke);if(!Oe.processRequestString())throw new Error("Enable to process request !");return Oe.requestString}},AltiRequestFactory={build:function(r){var e=LoggerByDefault$1.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var t=null,ke={type:r.sampling?"Profil":"Elevation",method:r.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};ke.param.positions=r.positions,ke.param.format=r.outputFormat,ke.param.sampling=r.sampling,ke.param.zonly=r.zonly,ke.param.measures=r.measures,ke.param.resource=r.resource;var Oe=r.onError!==null&&typeof r.onError=="function",Ge=r.onSuccess!==null&&typeof r.onSuccess=="function",Be=null;switch(r.api){case"REST":var je=new AltiRequestREST(ke);if(!je.processRequestString()){if(Be="Error in process request (rest) !",Oe){r.onError.call(r.scope,new ErrorService(Be));return}throw new Error(Be)}t=je.requestString;break;case"WPS":if(ke.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},t=AltiRequestWPS.build(ke),!t){if(Be="Error in process request (wps) !",Oe){r.onError.call(r.scope,new ErrorService(Be));return}throw new Error(Be)}break;default:if(Be="Type of API is not supported by service (REST or WPS) !",Oe){r.onError.call(r.scope,new ErrorService(Be));return}throw new Error(Be)}return Ge&&r.onSuccess.call(r.scope,t),t}};function XML$1(r){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,r&&(r.xmlString&&typeof r.xmlString=="string"&&(this.xmlString=r.xmlString,this.xmlDoc=__getXMLDOC(r.xmlString)),r.reader&&this.setReader(r.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(r){r&&typeof r=="string"&&(this.xmlString=r,this.xmlDoc=__getXMLDOC(r))},getReader:function(){return this.reader},setReader:function(r){r&&r.read&&typeof r.read=="function"&&(this.reader=r)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(r){this.xmlDoc=r},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var r=__getRootNode(this.xmlDoc);if(r){var e;return this.reader&&this.reader.read?e=this.reader.read(r):(e={},e[r.nodeName]=__readDefault(r)),e}else return{}}}};function __getXMLDOC(r){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(r,"text/xml")}else{var t,ke,Oe="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){ke=new window.ActiveXObject("Microsoft.XMLDOM"),ke.async=!1,ke.loadXML(r);var Ge=ke.parseError;if(Ge.errorCode)throw Ge.line&&Ge.linepos&&(Oe+="( ligne "+Ge.line+", colonne "+Ge.linepos),Ge.reason&&(Oe+=":  "+Ge.reason+")"),new Error(Oe);return ke}else if(window.DOMParser){t=new window.DOMParser;try{ke=t.parseFromString(r,"text/xml")}catch(Ze){throw Ze.message==="SyntaxError"?new Error(Oe):new Error("Erreur lors du parsing de la réponse du service : "+Ze.message)}if(ke.getElementsByTagName("parsererror").length>0)for(var Be=ke.getElementsByTagName("parsererror"),je=0;je<Be.length;je++){var Ve=Be[je].innerHTML;if(Ve.indexOf("Huge input lookup")===-1)throw Oe+="("+Ve+")",new Error(Oe)}else if(!ke.documentElement)throw new Error(Oe);return ke}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(r){var e;return r.nodeType===9?e=r.documentElement:r.nodeType===1&&(e=r),e}function __readDefault(r){var e={};if(r.attributes.length>0){var t=__getAttributes(r);e.attributes=t}if(r.hasChildNodes()){for(var ke={},Oe,Ge=r.childNodes,Be=0;Be<Ge.length;Be++)if(Oe=Ge[Be],Oe.nodeType===3)e.textContent=Oe.nodeValue;else if(Oe.nodeType===1)if(ke=__readDefault(Oe),!e[Oe.nodeName])e[Oe.nodeName]=ke;else{if(!Array.isArray(e[Oe.nodeName])){var je=e[Oe.nodeName];e[Oe.nodeName]=[],e[Oe.nodeName].push(je)}e[Oe.nodeName].push(ke)}}return e}function __getAttributes(r){if(r.attributes.length>0){for(var e={},t=r.attributes,ke=0;ke<t.length;ke++){var Oe=t[ke];e[Oe.nodeName]=Oe.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(r){var e=new AltiResponse;if(r.hasChildNodes())for(var t=r.childNodes,ke,Oe,Ge=0;Ge<t.length;Ge++)ke=t[Ge],AltiResponseReader.READERS[ke.nodeName]&&(Oe=AltiResponseReader.READERS[ke.nodeName](ke),e.elevations.push(Oe));return e},elevation:function(r){var e=new Elevation;if(r.hasChildNodes())for(var t=r.childNodes,ke,Oe=0;Oe<t.length;Oe++)ke=t[Oe],AltiResponseReader.READERS[ke.nodeName]&&AltiResponseReader.READERS[ke.nodeName](ke,e);return e},lat:function(r,e){var t=r.firstChild;if(t&&t.nodeType===3)e.lat=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente")},lon:function(r,e){var t=r.firstChild;if(t&&t.nodeType===3)e.lon=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente")},z:function(r,e){var t=r.firstChild;if(t&&t.nodeType===3)if(e)e.z=parseFloat(t.nodeValue);else return e=new Elevation,e.z=parseFloat(t.nodeValue),e;else throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente")},acc:function(r,e){var t=r.firstChild;if(t&&t.nodeType===3)e.acc=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente")},source_name:function(r,e){var t=r.firstChild;if(t&&t.nodeType===3)e.source_name=t.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_name attendue mais absente")},source_measure:function(r,e){var t=r.firstChild;if(t&&t.nodeType===3)e.source_measure=t.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_measure attendue mais absente")},measures:function(r,e){e.measures=[];var t;if(r.hasChildNodes())for(var ke=r.childNodes,Oe,Ge,Be=0;Be<ke.length;Be++){t=new Measure,Oe=ke[Be],Ge=Oe.childNodes;for(var je=0;je<Ge.length;je++)if(AltiResponseReader.READERS[Ge[je].nodeName])AltiResponseReader.READERS[Ge[je].nodeName](Ge[je],t);else throw new Error("Erreur dans la lecture de la réponse du service : measures attendues mais absentes");e.measures.push(t)}},exceptionreport:function(r){var e={};if(r.hasChildNodes())for(var t=r.childNodes,ke,Oe=0;Oe<t.length;Oe++)ke=t[Oe],ke.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(ke));return e},exception:function(r){var e={},t=r.getAttribute("exceptionCode");t&&(e.exceptionCode=t);var ke=r.firstChild;return ke&&ke.nodeType===3&&(e.exception=ke.nodeValue),e},error:function(r){var e={error:{}};if(r.hasChildNodes())for(var t=r.childNodes,ke,Oe=0;Oe<t.length;Oe++){ke=t[Oe];var Ge;ke.nodeType===1&&ke.nodeName==="code"&&(Ge=ke.firstChild,Ge&&Ge.nodeType===3&&(e.error.code=Ge.nodeValue)),ke.nodeType===1&&ke.nodeName==="description"&&(Ge=ke.firstChild,Ge&&Ge.nodeType===3&&(e.error.description=Ge.nodeValue))}return e}};AltiResponseReader.read=function(r){if(r.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(r);return e}else if(r.nodeName==="ExceptionReport"){var t=AltiResponseReader.READERS.exceptionreport(r);return t}else if(r.nodeName==="error"){var ke=AltiResponseReader.READERS.error(r);return ke}else throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(r){var e=LoggerByDefault$1.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var t=null;if(r.response)if(r.rawResponse)e.trace("analyze response : raw"),t=r.response;else{switch(r.outputFormat){case"xml":e.trace("analyze response : xml");try{var ke=new XML$1({reader:AltiResponseReader});if(typeof r.response=="string"?ke.setXMLString(r.response):ke.setXMLDoc(r.response),t=ke.parse(),!t)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(en){var Oe=en.message;r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Oe),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof r.response);var Ge=null;if(typeof r.response=="string"?Ge=JSON.parse(r.response):Ge=r.response,Ge&&Ge.error){r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Ge.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(Ge){var Be=Ge.elevations,je=new AltiResponse,Ve;if(Array.isArray(Be)&&Be.length)for(var Ze=0;Ze<Be.length;Ze++)Ve=new Elevation,typeof Be[Ze]=="object"?(Be[Ze].lon&&(Ve.lon=Be[Ze].lon),Be[Ze].lat&&(Ve.lat=Be[Ze].lat),Be[Ze].z&&(Ve.z=Be[Ze].z),Be[Ze].acc&&(Ve.acc=Be[Ze].acc),Be[Ze].measures&&(Ve.measures=Be[Ze].measures)):typeof Be[Ze]=="number"&&(Ve.z=Be[Ze]),Array.isArray(je.elevations)&&je.elevations.push(Ve);t=je}if(!t){r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(t.error){var Qe=t.error.description;r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Qe),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{r.onError.call(r.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}r.onSuccess.call(r.scope,t)}};function Alti(r){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!r.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(r.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=r.positions,this.options.outputFormat=typeof r.outputFormat=="string"?r.outputFormat.toLowerCase():"xml",this.options.resource=r.resource||"ign_rge_alti_wld",this.options.sampling=r.sampling||null,this.options.api=typeof r.api=="string"?r.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=r.zonly||!1,this.options.measures=r.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),t=null;switch(this.options.api){case"WPS":t=e.wps;break;case"REST":var ke=(r.sampling?"profil":"elevation")+"-"+this.options.outputFormat;t=e[ke];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!t)throw new Error("Url by default not found !");this.options.serverUrl=t,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var Oe=this.options.serverUrl.lastIndexOf(".");if(Oe!==-1){var Ge=this.options.serverUrl.substring(Oe+1);if(Ge&&Ge.length<5)switch(this.logger.trace("Server Extension URL : "+Ge),Ge.toLowerCase()){case"json":case"xml":this.options.outputFormat=Ge.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(r,e){var t={httpMethod:this.options.httpMethod,onSuccess:function(ke){this.request=ke,e.call(this,this.request)},onError:r,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(t)};Alti.prototype.analyzeResponse=function(r,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:r,onSuccess:e,scope:this};AltiResponseFactory.build(t)}else r.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(r){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=r||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var r={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(r[e]=this.filters[e]);return r},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var r=[];this.geocodeMethod==="search"&&r.push({k:"q",v:this.query}),this.index&&r.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&r.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(r.push({k:"lon",v:this.lon}),r.push({k:"lat",v:this.lat})),this.maxResp&&r.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&r.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var t in e)r.push({k:t,v:e[t]});return r};function GeocodeRequestREST(r){if(this.logger=LoggerByDefault$1.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!r)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=r}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var r="";const t=new GeocodeParamREST(this.settings).getParams();for(var ke=0;ke<t.length;ke++){var Oe=t[ke];r&&(r+="&"),r+=Oe.k+"="+Oe.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+r,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(r){var e=LoggerByDefault$1.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var t=r||{},ke=new GeocodeRequestREST(t);if(!ke.processRequestString())throw new Error("Error process request (rest) !");var Oe=ke.requestString;return e.trace(Oe),Oe}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(r){var e=new GeocodeResponse;const t=JSON.parse(r);if(t.type==="FeatureCollection")for(var ke=0;ke<t.features.length;++ke)_parseFeature(t.features[ke],e);else if(t.type==="Feature")_parseFeature(t,e);else{if(t.type==="SERVICE_ERROR")return _parseError(t);var Oe=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t.type);throw new ErrorService({message:Oe,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(r,e){var t=new GeocodedLocation;if(r.geometry&&r.geometry.type==="Point"&&(t.position={lon:r.geometry.coordinates[0],lat:r.geometry.coordinates[1]}),r.properties){for(var ke in r.properties)ke==="score"?t.accuracy=r.properties[ke]:ke==="_type"?r.properties[ke]==="address"?t.type="StreetAddress":r.properties[ke]==="poi"?t.type="PositionOfInterest":(r.properties[ke]==="parcel"||r.properties[ke]==="cadastral")&&(t.type="CadastralParcel"):t.placeAttributes[ke]=r.properties[ke];r.properties._type==="address"&&(t.matchType=r.properties.number!==void 0&&r.properties.number!==null?"street number":"street")}e.locations.push(t)}function _parseError(r){return{exceptionReport:r}}var GeocodeReponseFactory={build:function(r){var e=null;if(r.response)if(r.rawResponse)e=r.response;else{try{if(e=new GeocodeResponseParser().parse(r.response),!e)throw new Error("L'analyse de la réponse du service !?")}catch(ke){var t=ke.message;typeof r.response=="string"?t+="('"+r.response+"')":t+="('"+r.response.documentElement.innerHTML+"')",r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}r.onSuccess.call(r.scope,e)}};function Geocode(r){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(r);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),ke=0;ke<t.length;ke++){var Oe=t[ke];(typeof e.filters[Oe]>"u"||typeof e.filters[Oe]=="object"&&Object.keys(e.filters[Oe]).length===0||typeof e.filters[Oe]=="string"&&e.filters[Oe].length===0||Array.isArray(e.filters[Oe])&&e.filters[Oe].length===0)&&delete this.options.filters[Oe]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(r){const e=r;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(r,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):r.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(r,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:r,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else r.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode$1(r){if(!(this instanceof ReverseGeocode$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(r);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),ke=0;ke<t.length;ke++){var Oe=t[ke];(typeof e.filters[Oe]>"u"||typeof e.filters[Oe]=="object"&&Object.keys(e.filters[Oe]).length===0||typeof e.filters[Oe]=="string"&&e.filters[Oe].length===0||Array.isArray(e.filters[Oe])&&e.filters[Oe].length===0)&&delete this.options.filters[Oe]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode$1.prototype=Object.create(CommonService.prototype,{});ReverseGeocode$1.prototype.constructor=ReverseGeocode$1;ReverseGeocode$1.prototype.patchOptionConvertor=function(r){var e=r;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode$1.prototype.buildRequest=function(r,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):r.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode$1.prototype.analyzeResponse=function(r,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:r,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else r.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode$1.prototype.bbox2Json=function(r){return{type:"Polygon",coordinates:[[[r.left,r.top],[r.right,r.top],[r.right,r.bottom],[r.left,r.bottom],[r.left,r.top]]]}};ReverseGeocode$1.prototype.circle2Json=function(r){return{type:"Circle",radius:r.radius,coordinates:[r.x,r.y]}};ReverseGeocode$1.prototype.polygon2Json=function(r){for(var e={type:"Polygon",coordinates:[[]]},t=0;t<r.length;++t)e.coordinates[0].push([r[t].x,r[t].y]);return e};ReverseGeocode$1.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(r){var e=LoggerByDefault$1.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var t=null;if(r.response)if(r.rawResponse)e.trace("analyze response : raw"),t=r.response;else{var ke=null;if(typeof r.response=="string"?ke=JSON.parse(r.response):ke=r.response,ke){if(ke.error){r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",ke.error.description),status:ke.error.code,type:ErrorService.TYPE_SRVERR}));return}if(t=new AutoCompleteResponse,ke.results&&Array.isArray(ke.results))for(var Oe=null,Ge=0;Ge<ke.results.length;Ge++){var Be=ke.results[Ge];Oe=new SuggestedLocation,Be&&(Be.country==="StreetAddress"?(Oe.street=Be.street,Oe.type="StreetAddress"):Be.country==="PositionOfInterest"&&(Oe.poi=Be.street,Oe.type="PositionOfInterest",Oe.poiType=Be.poiType),Oe.position&&(Oe.position.x=Be.x,Oe.position.y=Be.y),Oe.kind=Be.kind,Oe.commune=Be.city,Oe.fullText=Be.fulltext,Oe.postalCode=Be.zipcode,Oe.classification=Be.classification),t.suggestedLocations.push(Oe)}else{r.onError.call(r.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!t.suggestedLocations.length){r.onError.call(r.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!t){r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{r.onError.call(r.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}r.onSuccess.call(r.scope,t)}};function AutoComplete(r){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault$1.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(r);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(r){const e=r;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(r,e){var t="";this.options.territory&&(t=this.options.territory);var ke="";this.options.type&&(ke=this.options.type.join(",")),this.request=Helper$1.normalyzeParameters({text:encodeURIComponent(this.options.text),type:ke,terr:t,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):r.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(r,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:r,scope:this};AutoCompleteResponseFactory.build(t)}else r.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(r){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=r||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var r=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var t=this.intermediates[e];r.push(t.x+","+t.y)}return r.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var r=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)r.push(JSON.stringify(this.constraints[e]));return r.join("|")}};RouteParamREST.prototype.getParams=function(){var r=[];return r.push({k:"resource",v:this.resource}),r.push({k:"start",v:this.start}),r.push({k:"end",v:this.end}),r.push({k:"geometryFormat",v:"geojson"}),this.optimization&&r.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&r.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&r.push({k:"profile",v:this.getProfile()}),this.constraints&&r.push({k:"constraints",v:this.getConstraints()}),this.crs&&r.push({k:"crs",v:this.crs}),this.distanceUnit&&r.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&r.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&r.push({k:"waysAttributes",v:this.getWaysAttributes()}),r};function RouteRequestREST(r){if(this.logger=LoggerByDefault$1.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!r)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=r}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var r=new RouteParamREST(this.settings),e=r.getParams(),t="",ke=0;ke<e.length;ke++){var Oe=e[ke];t&&(t+="&"),t+=Oe.k+"="+Oe.v}return this.logger.trace(t),this.requestString=t,this.requestString}};var RouteRequestFactory={build:function(r){var e=LoggerByDefault$1.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var t=null,ke=r||{},Oe=r.onError!==null&&typeof r.onError=="function",Ge=null,Be=new RouteRequestREST(ke);if(!Be.processRequestString()){if(Ge="Error process request (rest) !",Oe){r.onError.call(r.scope,new ErrorService(Ge));return}throw new Error(Ge)}return t=Be.requestString,t}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(r){var e=LoggerByDefault$1.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var t=null;if(r.response)if(r.rawResponse)e.trace("analyze response : raw"),t=r.response;else{e.trace("analyze response : json");var ke;if(typeof r.response=="string"?ke=JSON.parse(r.response):ke=r.response,ke){if(ke.message){r.onError.call(r.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",ke.message)));return}var Oe=[],Ge=[],Be=[];if(t=new RouteResponse,t.hasOwnProperty("totalTime")&&(t.totalTime=parseFloat(ke.duration)),t.hasOwnProperty("totalDistance")&&(t.totalDistance=parseFloat(ke.distance)),t.hasOwnProperty("bbox")&&(t.bbox.left=parseFloat(ke.bbox[0]),t.bbox.bottom=parseFloat(ke.bbox[1]),t.bbox.right=parseFloat(ke.bbox[2]),t.bbox.top=parseFloat(ke.bbox[3])),t.hasOwnProperty("routeGeometry")&&!r.geometryInInstructions&&(t.routeGeometry=ke.geometry),t.hasOwnProperty("routeInstructions")&&r.geometryInInstructions){var je=ke.portions,Ve;if(Array.isArray(je)&&je.length)for(Ve=0;Ve<je.length;Ve++)Oe.push(je[Ve]);if(Oe.length)for(Ve=0;Ve<Oe.length;Ve++)Ge.push(Oe[Ve].steps);if(Ge.length)for(Ve=0;Ve<Ge.length;Ve++)Be=Be.concat(Ge[Ve]);Be.forEach(function(Ze){switch(t.routeInstructions.push(new RouteInstruction),t.routeInstructions[t.routeInstructions.length-1].duration=Ze.duration,t.routeInstructions[t.routeInstructions.length-1].distance=Ze.distance,t.routeInstructions[t.routeInstructions.length-1].code="",t.routeInstructions[t.routeInstructions.length-1].instruction="",t.routeInstructions[t.routeInstructions.length-1].geometry=Ze.geometry,Ze.name==="Valeur non renseignée"&&(Ze.name=""),Ze.instruction.type){case"turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Tourner";break;case"new name":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":t.routeInstructions[t.routeInstructions.length-1].instruction+="Départ";break;case"arrive":t.routeInstructions[t.routeInstructions.length-1].instruction+="Arrivée";break;case"merge":t.routeInstructions[t.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":t.routeInstructions[t.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":t.routeInstructions[t.routeInstructions.length-1].instruction+="À la fin de la route, prendre";break;case"use lane":t.routeInstructions[t.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":t.routeInstructions[t.routeInstructions.length-1].instruction+="";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+="?"+Ze.instruction.type+"?";break}if(Ze.instruction.modifier)switch(Ze.instruction.modifier){case"uturn":t.routeInstructions[t.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" complètement à droite";break;case"right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" à droite";break;case"slight right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" légèrement à droite";break;case"straight":t.routeInstructions[t.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" lègèrement à gauche";break;case"left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" à gauche";break;case"sharp left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" complètement à gauche";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+=" ?"+Ze.instruction.modifier+"?";break}Ze.instruction.exit&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=`${Ze.instruction.exit}e sortie`),Ze.attributes.name&&((Ze.attributes.name.nom_1_droite||Ze.attributes.name.toponyme)&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=" sur"),Ze.attributes.name.nom_1_droite&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${Ze.attributes.name.nom_1_droite}`),Ze.attributes.name.toponyme&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${Ze.attributes.name.toponyme}`))})}}if(!t){r.onError.call(r.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(t.exceptionReport){r.onError.call(r.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{r.onError.call(r.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}r.onSuccess.call(r.scope,t)}};function Route$1(r){if(!(this instanceof Route$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!r.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(r.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(r.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!r.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(r.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(r.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(r.outputFormat&&r.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=r.resource||"bdtopo-osrm",this.options.startPoint=r.startPoint,this.options.endPoint=r.endPoint,this.options.viaPoints=r.viaPoints||[],this.options.routePreference=r.routePreference||"fastest",r.graph?(r.graph==="Voiture"&&(this.options.graph="car"),r.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],r.constraints)if(Array.isArray(r.constraints))for(var e=0;e<r.constraints.length;e++)this.options.constraints.push(r.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},ke={},Oe={};if(r.exclusions&&r.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Ge=0;Ge<r.exclusions.length;Ge++){if(typeof r.exclusions[Ge]=="string")r.exclusions[Ge]=r.exclusions[Ge].toLowerCase();else continue;r.exclusions[Ge]==="toll"&&(Oe.constraintType="banned",Oe.key="wayType",Oe.operator="=",Oe.value="autoroute",this.options.constraints.push(Oe)),r.exclusions[Ge]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),r.exclusions[Ge]==="bridge"&&(ke.constraintType="banned",ke.key="wayType",ke.operator="=",ke.value="pont",this.options.constraints.push(ke))}}if(this.options.geometryInInstructions=r.geometryInInstructions||!1,this.options.provideBbox=r.provideBbox||!0,this.options.distanceUnit=r.distanceUnit||"m",this.options.timeUnit=r.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=r.srs||"EPSG:4326",this.options.waysAttributes=r.waysAttributes||[],!this.options.serverUrl){var Be=DefaultUrlService.Route.newUrl();if(!Be)throw new Error("Url by default not found !");this.options.serverUrl=Be,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route$1.prototype=Object.create(CommonService.prototype,{});Route$1.prototype.constructor=Route$1;Route$1.prototype.buildRequest=function(r,e){var t={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(t),this.request?e.call(this,this.request):r.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route$1.prototype.analyzeResponse=function(r,e){if(this.response){var t={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:r,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(t)}else r.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(r){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=r||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var r=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)r.push(JSON.stringify(this.constraints[e]));return r.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var r=[];return r.push({k:"resource",v:this.resource}),r.push({k:"point",v:this.getLocation()}),r.push({k:"direction",v:this.getDirection()}),r.push({k:"costType",v:this.costType}),r.push({k:"costValue",v:this.costValue}),r.push({k:"profile",v:this.profile}),r.push({k:"timeUnit",v:this.timeUnit}),r.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&r.push({k:"crs",v:this.crs}),this.constraints&&r.push({k:"constraints",v:this.getConstraints()}),r};function ProcessIsoCurveRequest(r){if(this.logger=LoggerByDefault$1.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!r)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=r,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var r="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var t=new ProcessIsoCurveParam(this.settings),ke=t.getParams();for(e=0;e<ke.length;e++){var Oe=ke[e];r&&(r+="&"),r+=Oe.k+"="+Oe.v}break;case"POST":this.logger.trace("Process POST Request");var Ge={};Ge.resource=this.settings.resource,Ge.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(Ge.costType="distance",Ge.costValue=this.settings.distance):(Ge.costType="time",Ge.costValue=this.settings.time),Ge.profile=this.settings.graph,this.settings.reverse?Ge.direction="arrival":Ge.direction="departure",Ge.constraints=this.settings.constraints,Ge.distanceUnit=this.settings.distanceUnit,Ge.timeUnit=this.settings.timeUnit,Ge.crs=this.settings.srs,r=JSON.stringify(Ge);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(r),this.requestString=r,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(r){var e=LoggerByDefault$1.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var t=null;if(r.response)if(r.rawResponse)e.trace("analyze response : raw"),t=r.response;else{e.trace("analyze response : json");var ke;if(typeof r.response=="string"?ke=JSON.parse(r.response):ke=r.response,t=new ProcessIsoCurveResponse,ke){ke.costType==="distance"?(t.time="",t.distance=ke.costValue):(t.time=ke.costValue,t.distance=""),t.message="",t.id="",t.srs=ke.crs,t.geometry=ke.geometry;var Oe=ke.point.split(",");t.location&&(t.location.x=Oe[0],t.location.y=Oe[1])}else{r.onError.call(r.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",r.response)));return}if(t.exceptionReport){r.onError.call(r.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{r.onError.call(r.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}r.onSuccess.call(r.scope,t)}};function ProcessIsoCurve(r){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!r.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(r.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(r.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!r.time&&!r.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!r.time&&r.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),r.time&&!r.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=r.resource||"bdtopo-valhalla",this.options.exclusions=r.exclusions||[],this.options.reverse=r.reverse||!1,this.options.srs=r.srs||"EPSG:4326",this.options.distanceUnit=r.distanceUnit||"m",this.options.timeUnit=r.timeUnit||"second",r.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,r.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,r.graph?(r.graph==="Voiture"&&(this.options.graph="car"),r.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],r.constraints)if(Array.isArray(r.constraints))for(var e=0;e<r.constraints.length;e++)this.options.constraints.push(r.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},ke={},Oe={};if(r.exclusions&&r.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Ge=0;Ge<r.exclusions.length;Ge++){if(typeof r.exclusions[Ge]=="string")r.exclusions[Ge]=r.exclusions[Ge].toLowerCase();else continue;r.exclusions[Ge]==="toll"&&(Oe.constraintType="banned",Oe.key="wayType",Oe.operator="=",Oe.value="autoroute",this.options.constraints.push(Oe)),r.exclusions[Ge]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),r.exclusions[Ge]==="bridge"&&(ke.constraintType="banned",ke.key="wayType",ke.operator="=",ke.value="pont",this.options.constraints.push(ke))}}if(this.options.outputFormat=typeof r.outputFormat=="string"?r.outputFormat.toLowerCase():"json",r.outputFormat&&r.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var Be=DefaultUrlService.ProcessIsoCurve.newUrl();if(!Be)throw new Error("Url by default not found !");this.options.serverUrl=Be,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(r,e){try{var t=new ProcessIsoCurveRequest(this.options);if(!t.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=t.requestString}catch(ke){r.call(this,new ErrorService(ke.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(r,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:r,scope:this};ProcessIsoCurveResponseFactory.build(t)}else r.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(r){var e=new Config$1(r);e.call()},getAltitude:function(r){var e=new Alti(r);e.call()},geocode:function(r){var e=new Geocode(r);e.call()},reverseGeocode:function(r){var e=new ReverseGeocode$1(r);e.call()},autoComplete:function(r){var e=new AutoComplete(r);e.call()},route:function(r){var e=new Route$1(r);e.call()},isoCurve:function(r){var e=new ProcessIsoCurve(r);e.call()}};const servicesVersion=Pkg.version,servicesDate=Pkg.date;var Gp$1={};Gp$1.servicesVersion=servicesVersion;Gp$1.servicesDate=servicesDate;Gp$1.Protocols={};Gp$1.Protocols.XHR=XHR;Gp$1.Services=Services;Gp$1.Services.DefaultUrl=DefaultUrlService;Gp$1.Services.AltiResponse=AltiResponse;Gp$1.Services.Alti={};Gp$1.Services.Alti.Elevation=Elevation;Gp$1.Services.AutoCompleteResponse=AutoCompleteResponse;Gp$1.Services.AutoComplete={};Gp$1.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp$1.Services.Config=Config$1;Gp$1.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp$1.Services.RouteResponse=RouteResponse;Gp$1.Services.Route={};Gp$1.Services.Route.RouteInstruction=RouteInstruction;Gp$1.Error=ErrorService;Gp$1.Helper=Helper$1;var LoggerByDefault={getLogger:function(r){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=r||"default";return loglevelExports.getLogger(t)},disableAll:function(){var r=loglevelExports.getLoggers();for(const e in r)Object.hasOwnProperty.call(r,e)&&r[e].disableAll()},enableAll:function(){var r=loglevelExports.getLoggers();for(const e in r)Object.hasOwnProperty.call(r,e)&&r[e].enableAll()}};window.Gp&&(window.Gp.Logger=LoggerByDefault);var ProxyUtils={proxifyUrl:function(r,e){var t=LoggerByDefault.getLogger("proxifyUrl");if(!e||!e.hasOwnProperty("proxyUrl")||e.proxyUrl===null||e.proxyUrl.trim().length===0)return r;if(e.noProxyDomains&&Array.isArray(e.noProxyDomains)&&e.noProxyDomains.length>0){for(var ke in e.noProxyDomains)if(t.trace("[ProxyUtils] proxifyUrl : analyzing "+e.noProxyDomains[ke]),r.indexOf(e.noProxyDomains[ke])!==-1)return t.info("[ProxyUtils] proxifyUrl : "+r+" found in noProxyDomains list ("+e.noProxyDomains[ke]+")."),r}return e.proxyUrl+encodeURIComponent(r)}},logger$E=LoggerByDefault.getLogger("GfiUtils"),Gfi={getLayerFormat:function(r){var e=typeof r.getType=="function"?r.getType():null,t=r.getSource();if(e){if(e==="VECTOR"||e==="VECTOR_TILE")return"vector";if(e==="TILE")return t.tileGrid?"wmts":"wms";if(e==="IMAGE")return"wms"}else{if(t instanceof TileWMS||t instanceof ImageWMS)return"wms";if(t instanceof WMTS$1)return"wmts";if(t instanceof VectorSource||t instanceof VectorTile)return"vector"}return"unknown"},displayInfo:function(r,e,t,ke,Oe){if(logger$E.trace("[Gfi] : displayInfo..."),ke||(ke="text/html"),t!==null){var Ge=null,Be=null,je=t;je=je.replace(/\n/g,""),je=je.replace(/(>)\s*(<)/g,"$1$2");var Ve=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var Ze=require("@xmldom/xmldom").DOMParser;Be=new Ze,Ge=Be.parseFromString(je,ke)}else if(Ve.DOMParser)Be=new Ve.DOMParser,Ge=Be.parseFromString(je,ke);else if(Ve.ActiveXObject)Ge=new Ve.ActiveXObject("Microsoft.XMLDOM"),Ge.async=!1,Ge.loadXML(je);else return logger$E.log("Incompatible environment for DOM Parser !"),!1;var Qe=Ge.getElementsByTagName("body");if(Qe&&Qe.length===1&&!Qe[0].hasChildNodes())return!1;var en=document.createElement("div");en.className="gp-feature-info-div";var tn=document.createElement("button");tn.className="gp-styling-button closer",tn.onclick=function(){return r.featuresOverlay&&(r.removeOverlay(r.featuresOverlay),r.featuresOverlay=null),!1};var an=document.createElement("div");return an.className="gp-features-content-div",an.innerHTML=t,en.appendChild(an),en.appendChild(tn),r.featuresOverlay&&(r.removeOverlay(r.featuresOverlay),r.featuresOverlay=null),r.featuresOverlay=new Overlay({element:en,autoPan:Oe.autoPan,autoPanAnimation:Oe.autoPanAnimation,autoPanMargin:Oe.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),r.addOverlay(r.featuresOverlay),r.featuresOverlay.setPosition(e),r.featuresOverlay.render(),!0}},features2html:function(r,e){var t=document.createElement("div");return e.forEach(function(ke){var Oe=ke.getProperties();if(Oe.hasOwnProperty("render"))t.insertAdjacentHTML("beforeend",Oe.render);else{if(Oe.hasOwnProperty("name")){var Ge=document.createElement("div");Ge.className="gp-att-name-div",Ge.insertAdjacentHTML("afterbegin",Oe.name),t.appendChild(Ge)}if(Oe.hasOwnProperty("description")){var Be=document.createElement("div");Be.className="gp-att-description-div",Be.insertAdjacentHTML("afterbegin",Oe.description),t.appendChild(Be)}var je=null,Ve=!1,Ze=null,Qe=null,en=null,tn=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(je in Oe)if(Oe[je]!==void 0&&tn.indexOf(je)===-1){Ve||(Ze=document.createElement("div"),Ze.className="gp-att-others-div",Qe=document.createElement("ul"),Ve=!0),en=document.createElement("li");var an=document.createElement("span");an.className="gp-attname-others-span",an.appendChild(document.createTextNode(je+" : ")),en.appendChild(an),en.appendChild(document.createTextNode(Oe[je])),Qe.appendChild(en)}Qe&&(Ze.appendChild(Qe),t.appendChild(Ze))}},r),t.hasChildNodes()||(t=null),t},layerGetFeatureAtCoordinates:function(r,e,t){var ke=r.getPixelFromCoordinate(t);return r.hasFeatureAtPixel(ke,function(Oe){return Oe===e})},displayVectorFeatureInfo:function(r,e,t,ke){var Oe=r.getPixelFromCoordinate(e),Ge=[];if(r.forEachFeatureAtPixel(Oe,function(je,Ve){(!t||t.indexOf(Ve)>-1)&&Ge.push(je)}),Ge.length===0)return!1;var Be=this.features2html(r,Ge);return Be===null?!1:(this.displayInfo(r,e,Be.innerHTML,"text/html",ke),!0)},displayFeatureInfo:function(r,e,t,ke,Oe){for(var Ge={},Be=0;Be<t.length;Be++){var je=t[Be],Ve=je.obj.getZIndex();Ge[Ve]||(Ge[Ve]=[]),Ge[Ve].push(je)}var Ze=[],Qe=Object.keys(Ge);Qe.sort(function(bn,Sn){return Sn-bn});for(var en=0;en<Qe.length;en++)for(var tn=Qe[en],an=0;an<Ge[tn].length;++an){var cn=Ge[tn][an].obj,dn=Ge[tn][an].infoFormat||"text/html",hn=!0;if(cn.minResolution&&cn.minResolution>r.getResolution()&&(hn=!1),hn&&cn.maxResolution&&cn.maxResolution<r.getResolution()&&(hn=!1),cn.getVisible()&&hn){var fn=this.getLayerFormat(cn);if(fn==="vector"){this.layerGetFeatureAtCoordinates(r,cn,e)&&Ze.push({format:fn,scope:this,coordinate:e});continue}else if(fn!=="wms"&&fn!=="wmts"){logger$E.log("[ERROR] DisplayFeatureInfo - layer format '"+fn+"' not allowed");continue}var pn=r.getView().getResolution(),mn=null;fn==="wmts"?mn=cn.getSource().getFeatureInfoUrl.call(cn.getSource(),e,pn,r.getView().getProjection(),{INFOFORMAT:dn}):mn=cn.getSource().getFeatureInfoUrl.call(cn.getSource(),e,pn,r.getView().getProjection(),{INFO_FORMAT:dn}),Ze.push({format:dn,url:ProxyUtils.proxifyUrl(mn,ke),scope:this,coordinate:e})}}var yn=null;function Cn(bn,Sn,Mn){if(bn.length===0)return;var Tn=0;function En(An){Tn++,An||Tn===bn.length?Mn():Sn(bn[Tn],En)}Sn(bn[0],En)}var wn=this;Cn(Ze,function(bn,Sn){if(bn.format==="vector"){if(!yn){yn=[];for(var Mn=0;Mn<Qe.length;Mn++)for(var Tn=Qe[Mn],En=0;En<Ge[Tn].length;++En)yn.push(Ge[Tn][En].obj)}Sn(bn.scope.displayVectorFeatureInfo(r,bn.coordinate,yn,Oe))}else Gp$1.Protocols.XHR.call({url:bn.url,method:"GET",scope:bn.scope,onResponse:function(An){var Ln=!1;(An.trim().length===0||An.indexOf("ServiceExceptionReport")!==-1||An.indexOf("java.lang.NullPointerException")!==-1||An.indexOf("java.lang.OutOfMemoryError")!==-1||An.indexOf("not queryable")!==-1)&&(Ln=!0);var Rn=!Ln&&wn.displayInfo(r,bn.coordinate,An,"text/html",Oe);Sn(Rn)},onFailure:function(An){logger$E.log(An),Sn(!1)}})},function(){logger$E.trace("Finish sync to GFI !")})},getPosition:function(r,e){if(r.coordinate)return r.coordinate;var t=[0,0];if(r.offsetX||r.offsetY)t[0]=r.offsetX,t[1]=r.offsetY;else if(r.pointerType==="touch"){var ke=r.pointers[0];t[0]=ke.pageX,t[1]=ke.pageY}var Oe=e.getCoordinateFromPixel(t);return Oe},onDisplayFeatureInfo:function(r,e){if(e.isActive()){logger$E.trace(r);var t=e.getMap();if(r.type==="contextmenu"||r.type==="dblclick")r.preventDefault();else if(r.type==="singleclick"){for(var ke=t.getInteractions().getArray(),Oe=0;Oe<ke.length;Oe++)if(ke[Oe].getActive()&&(ke[Oe]instanceof Select||ke[Oe]instanceof Modify||ke[Oe]instanceof Draw))return}var Ge={};e._proxyUrl&&(Ge.proxyUrl=e._proxyUrl),e._noProxyDomains&&(Ge.noProxyDomains=e._noProxyDomains);var Be={};e._autoPan&&(Be.autoPan=e._autoPan),e._autoPanAnimation&&(Be.autoPanAnimation=e._autoPanAnimation),e._autoPanMargin&&(Be.autoPanMargin=e._autoPanMargin);for(var je=[],Ve=0;Ve<e._layers.length;++Ve){var Ze=e._layers[Ve].event?e._layers[Ve].event:e._defaultEvent;if(Ze===r.type){var Qe=je.push(e._layers[Ve])-1;je[Qe].infoFormat||(je[Qe].infoFormat=e._defaultInfoFormat)}}var en=this.getPosition(r,t);this.displayFeatureInfo(t,en,je,Ge,Be)}}};window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=Gfi:window.ol.gp={GfiUtils:Gfi});class Control extends BaseObject{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){removeNode(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(e){this.map_&&removeNode(this.element);for(let t=0,ke=this.listenerKeys.length;t<ke;++t)unlistenByKey(this.listenerKeys[t]);this.listenerKeys.length=0,this.map_=e,e&&((this.target_?this.target_:e.getOverlayContainerStopEvent()).appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render())}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var Helper={detectSupport:function(){var r=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(r=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(r=!0),r},assign:function(r,e){r=r||{};for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r},mergeParams:function(r,e,t){if(!(typeof r>"u"||typeof e>"u")){typeof t>"u"&&(t=!0);for(var ke in e)e.hasOwnProperty(ke)&&(typeof e[ke]=="object"?r.hasOwnProperty(ke)?this.mergeParams(r[ke],e[ke],t):r[ke]=e[ke]:r.hasOwnProperty(ke)?t&&(r[ke]=e[ke]):r[ke]=e[ke])}}},logger$D=LoggerByDefault.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(r,e){logger$D.trace("unset()");var t={};Helper.mergeParams(t,this._options),Helper.mergeParams(t,e);for(var ke=r.getInteractions().getArray(),Oe=0;Oe<ke.length;Oe++)if(ke[Oe].getActive()&&(ke[Oe]instanceof Draw||ke[Oe]instanceof Select||ke[Oe]instanceof Modify)){var Ge=ke[Oe].getProperties(),Be=Ge.name;if(typeof Be<"u"&&this._extensions.indexOf(Be)>-1){if(t.current&&t.current===Be)continue;ke[Oe].setActive(!1);var je=Ge.source;if(typeof je<"u"&&je instanceof Control){for(var Ve in t)if(t.hasOwnProperty(Ve)){if(Ve==="current")continue;if(typeof je[Ve]=="function"){var Ze=Array.isArray(t[Ve])?t[Ve]:[t[Ve]];je[Ve].apply(je,Ze)}}}}else ke[Oe].setActive(!1)}}},Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let ke=t.dataProjection?get$3(t.dataProjection):this.readProjection(e);t.extent&&ke&&ke.getUnits()==="tile-pixels"&&(ke=get$3(ke),ke.setWorldExtent(t.extent)),t={dataProjection:ke,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,t){return abstract()}readFeatures(e,t){return abstract()}readGeometry(e,t){return abstract()}readProjection(e){return abstract()}writeFeature(e,t){return abstract()}writeFeatures(e,t){return abstract()}writeGeometry(e,t){return abstract()}}function transformGeometryWithOptions(r,e,t){const ke=t?get$3(t.featureProjection):null,Oe=t?get$3(t.dataProjection):null;let Ge=r;if(ke&&Oe&&!equivalent(ke,Oe)){e&&(Ge=r.clone());const Be=e?ke:Oe,je=e?Oe:ke;Be.getUnits()==="tile-pixels"?Ge.transform(Be,je):Ge.applyTransform(getTransform(Be,je))}if(e&&t&&t.decimals!==void 0){const Be=Math.pow(10,t.decimals),je=function(Ve){for(let Ze=0,Qe=Ve.length;Ze<Qe;++Ze)Ve[Ze]=Math.round(Ve[Ze]*Be)/Be;return Ve};Ge===r&&(Ge=r.clone()),Ge.applyTransform(je)}return Ge}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(r,e,t){return Array.isArray(e[0])?(linearRingssAreOriented(r,0,e,t)||(r=r.slice(),orientLinearRingsArray(r,0,e,t)),r):(linearRingsAreOriented(r,0,e,t)||(r=r.slice(),orientLinearRings(r,0,e,t)),r)}function createRenderFeature(r,e){var Ge;const t=r.geometry;if(!t)return[];if(Array.isArray(t))return t.map(Be=>createRenderFeature({...r,geometry:Be})).flat();const ke=t.type==="MultiPolygon"?"Polygon":t.type;if(ke==="GeometryCollection"||ke==="Circle")throw new Error("Unsupported geometry type: "+ke);const Oe=t.layout.length;return transformGeometryWithOptions(new RenderFeature(ke,ke==="Polygon"?orientFlatCoordinates(t.flatCoordinates,t.ends,Oe):t.flatCoordinates,(Ge=t.ends)==null?void 0:Ge.flat(),Oe,r.properties||{},r.id).enableSimplifyTransformed(),!1,e)}function createGeometry(r,e){if(!r)return null;if(Array.isArray(r)){const ke=r.map(Oe=>createGeometry(Oe,e));return new GeometryCollection(ke)}const t=GeometryConstructor[r.type];return transformGeometryWithOptions(new t(r.flatCoordinates,r.layout,r.ends),!1,e)}const XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance";function createElementNS(r,e){return getDocument().createElementNS(r,e)}function getAllTextContent(r,e){return getAllTextContent_(r,e,[]).join("")}function getAllTextContent_(r,e,t){if(r.nodeType==Node.CDATA_SECTION_NODE||r.nodeType==Node.TEXT_NODE)t.push(r.nodeValue);else{let ke;for(ke=r.firstChild;ke;ke=ke.nextSibling)getAllTextContent_(ke,e,t)}return t}function isDocument(r){return"documentElement"in r}function parse$1(r){return new DOMParser().parseFromString(r,"application/xml")}function makeArrayExtender(r,e){return function(t,ke){const Oe=r.call(e!==void 0?e:this,t,ke);if(Oe!==void 0){const Ge=ke[ke.length-1];extend$4(Ge,Oe)}}}function makeArrayPusher(r,e){return function(t,ke){const Oe=r.call(e!==void 0?e:this,t,ke);Oe!==void 0&&ke[ke.length-1].push(Oe)}}function makeReplacer(r,e){return function(t,ke){const Oe=r.call(this,t,ke);Oe!==void 0&&(ke[ke.length-1]=Oe)}}function makeObjectPropertyPusher(r,e,t){return function(ke,Oe){const Ge=r.call(this,ke,Oe);if(Ge!==void 0){const Be=Oe[Oe.length-1],je=ke.localName;let Ve;je in Be?Ve=Be[je]:(Ve=[],Be[je]=Ve),Ve.push(Ge)}}}function makeObjectPropertySetter(r,e,t){return function(ke,Oe){const Ge=r.call(this,ke,Oe);if(Ge!==void 0){const Be=Oe[Oe.length-1],je=e!==void 0?e:ke.localName;Be[je]=Ge}}}function makeChildAppender(r,e){return function(t,ke,Oe){r.call(this,t,ke,Oe),Oe[Oe.length-1].node.appendChild(t)}}function makeArraySerializer(r,e){let t,ke;return function(Oe,Ge,Be){if(t===void 0){t={};const je={};je[Oe.localName]=r,t[Oe.namespaceURI]=je,ke=makeSimpleNodeFactory(Oe.localName)}serialize(t,ke,Ge,Be)}}function makeSimpleNodeFactory(r,e){return function(t,ke,Oe){const Be=ke[ke.length-1].node;let je=r;je===void 0&&(je=Oe);const Ve=Be.namespaceURI;return createElementNS(Ve,je)}}const OBJECT_PROPERTY_NODE_FACTORY=makeSimpleNodeFactory();function makeSequence(r,e){const t=e.length,ke=new Array(t);for(let Oe=0;Oe<t;++Oe)ke[Oe]=r[e[Oe]];return ke}function makeStructureNS(r,e,t){t=t!==void 0?t:{};let ke,Oe;for(ke=0,Oe=r.length;ke<Oe;++ke)t[r[ke]]=e;return t}function parseNode(r,e,t,ke){let Oe;for(Oe=e.firstElementChild;Oe;Oe=Oe.nextElementSibling){const Ge=r[Oe.namespaceURI];if(Ge!==void 0){const Be=Ge[Oe.localName];Be!==void 0&&Be.call(ke,Oe,t)}}}function pushParseAndPop(r,e,t,ke,Oe){return ke.push(r),parseNode(e,t,ke,Oe),ke.pop()}function serialize(r,e,t,ke,Oe,Ge){const Be=(Oe!==void 0?Oe:t).length;let je,Ve;for(let Ze=0;Ze<Be;++Ze)je=t[Ze],je!==void 0&&(Ve=e.call(Ge!==void 0?Ge:this,je,ke,Oe!==void 0?Oe[Ze]:void 0),Ve!==void 0&&r[Ve.namespaceURI][Ve.localName].call(Ge,Ve,je,ke))}function pushSerializeAndPop(r,e,t,ke,Oe,Ge,Be){return Oe.push(r),serialize(e,t,ke,Oe,Ge,Be),Oe.pop()}let xmlSerializer_;function getXMLSerializer(){return xmlSerializer_===void 0&&typeof XMLSerializer<"u"&&(xmlSerializer_=new XMLSerializer),xmlSerializer_}let document_;function getDocument(){return document_===void 0&&typeof document<"u"&&(document_=document.implementation.createDocument("","",null)),document_}class XMLFeature extends FeatureFormat{constructor(){super(),this.xmlSerializer_=getXMLSerializer()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const ke=parse$1(e);return this.readFeatureFromDocument(ke,t)}return isDocument(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const ke=this.readFeaturesFromDocument(e,t);return ke.length>0?ke[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const ke=parse$1(e);return this.readFeaturesFromDocument(ke,t)}return isDocument(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const ke=[];for(let Oe=e.firstChild;Oe;Oe=Oe.nextSibling)Oe.nodeType==Node.ELEMENT_NODE&&extend$4(ke,this.readFeaturesFromNode(Oe,t));return ke}readFeaturesFromNode(e,t){return abstract()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const ke=parse$1(e);return this.readGeometryFromDocument(ke,t)}return isDocument(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=parse$1(e);return this.readProjectionFromDocument(t)}return isDocument(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const ke=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(ke)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const ke=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(ke)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const ke=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(ke)}writeGeometryNode(e,t){return null}}function readBoolean(r){const e=getAllTextContent(r,!1);return readBooleanString(e)}function readBooleanString(r){const e=/^\s*(true|1)|(false|0)\s*$/.exec(r);if(e)return e[1]!==void 0||!1}function readDateTime(r){const e=getAllTextContent(r,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function readDecimal(r){const e=getAllTextContent(r,!1);return readDecimalString(e)}function readDecimalString(r){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(r);if(e)return parseFloat(e[1])}function readPositiveInteger(r){const e=getAllTextContent(r,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(r){const e=/^\s*(\d+)\s*$/.exec(r);if(e)return parseInt(e[1],10)}function readString(r){return getAllTextContent(r,!1).trim()}function writeBooleanTextNode(r,e){writeStringTextNode(r,e?"1":"0")}function writeCDATASection(r,e){r.appendChild(getDocument().createCDATASection(e))}function writeDateTimeTextNode(r,e){const t=new Date(e*1e3),ke=t.getUTCFullYear()+"-"+padNumber(t.getUTCMonth()+1,2)+"-"+padNumber(t.getUTCDate(),2)+"T"+padNumber(t.getUTCHours(),2)+":"+padNumber(t.getUTCMinutes(),2)+":"+padNumber(t.getUTCSeconds(),2)+"Z";r.appendChild(getDocument().createTextNode(ke))}function writeDecimalTextNode(r,e){const t=e.toPrecision();r.appendChild(getDocument().createTextNode(t))}function writeNonNegativeIntegerTextNode(r,e){const t=e.toString();r.appendChild(getDocument().createTextNode(t))}function writeStringTextNode(r,e){r.appendChild(getDocument().createTextNode(e))}const GX_NAMESPACE_URIS=["http://www.google.com/kml/ext/2.2"],NAMESPACE_URIS$4=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],SCHEMA_LOCATION$1="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",ICON_ANCHOR_UNITS_MAP={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},PLACEMARK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,MultiGeometry:makeObjectPropertySetter(readMultiGeometry,"geometry"),LineString:makeObjectPropertySetter(readLineString,"geometry"),LinearRing:makeObjectPropertySetter(readLinearRing,"geometry"),Point:makeObjectPropertySetter(readPoint,"geometry"),Polygon:makeObjectPropertySetter(readPolygon,"geometry"),Style:makeObjectPropertySetter(readStyle$2),StyleMap:placemarkStyleMapParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL),visibility:makeObjectPropertySetter(readBoolean)},makeStructureNS(GX_NAMESPACE_URIS,{MultiTrack:makeObjectPropertySetter(readGxMultiTrack,"geometry"),Track:makeObjectPropertySetter(readGxTrack,"geometry")})),NETWORK_LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,Link:linkParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),visibility:makeObjectPropertySetter(readBoolean)}),LINK_PARSERS$1=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)}),CAMERA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Altitude:makeObjectPropertySetter(readDecimal),Longitude:makeObjectPropertySetter(readDecimal),Latitude:makeObjectPropertySetter(readDecimal),Tilt:makeObjectPropertySetter(readDecimal),AltitudeMode:makeObjectPropertySetter(readString),Heading:makeObjectPropertySetter(readDecimal),Roll:makeObjectPropertySetter(readDecimal)}),REGION_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LatLonAltBox:latLonAltBoxParser,Lod:lodParser}),KML_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["Document","Placemark"]),KML_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Document:makeChildAppender(writeDocument),Placemark:makeChildAppender(writePlacemark)});let DEFAULT_COLOR,DEFAULT_FILL_STYLE=null,DEFAULT_IMAGE_STYLE_ANCHOR,DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,DEFAULT_IMAGE_STYLE_SIZE,DEFAULT_IMAGE_STYLE_SRC,DEFAULT_IMAGE_STYLE=null,DEFAULT_NO_IMAGE_STYLE,DEFAULT_STROKE_STYLE=null,DEFAULT_TEXT_STROKE_STYLE,DEFAULT_TEXT_STYLE=null,DEFAULT_STYLE=null,DEFAULT_STYLE_ARRAY=null;function scaleForSize(r){return 32/Math.min(r[0],r[1])}function createStyleDefaults(){DEFAULT_COLOR=[255,255,255,1],DEFAULT_FILL_STYLE=new Fill({color:DEFAULT_COLOR}),DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels",DEFAULT_IMAGE_STYLE_SIZE=[64,64],DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",DEFAULT_IMAGE_STYLE=new Icon({anchor:DEFAULT_IMAGE_STYLE_ANCHOR,anchorOrigin:"bottom-left",anchorXUnits:DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,anchorYUnits:DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,crossOrigin:"anonymous",rotation:0,scale:scaleForSize(DEFAULT_IMAGE_STYLE_SIZE),size:DEFAULT_IMAGE_STYLE_SIZE,src:DEFAULT_IMAGE_STYLE_SRC}),DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",DEFAULT_STROKE_STYLE=new Stroke({color:DEFAULT_COLOR,width:1}),DEFAULT_TEXT_STROKE_STYLE=new Stroke({color:[51,51,51,1],width:2}),DEFAULT_TEXT_STYLE=new Text({font:"bold 16px Helvetica",fill:DEFAULT_FILL_STYLE,stroke:DEFAULT_TEXT_STROKE_STYLE,scale:.8}),DEFAULT_STYLE=new Style$1({fill:DEFAULT_FILL_STYLE,image:DEFAULT_IMAGE_STYLE,text:DEFAULT_TEXT_STYLE,stroke:DEFAULT_STROKE_STYLE,zIndex:0}),DEFAULT_STYLE_ARRAY=[DEFAULT_STYLE]}let TEXTAREA;function defaultIconUrlFunction(r){return r}let KML$1=class extends XMLFeature{constructor(e){super(),e=e||{},DEFAULT_STYLE_ARRAY||createStyleDefaults(),this.dataProjection=get$3("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:DEFAULT_STYLE_ARRAY,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:defaultIconUrlFunction,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const ke=makeStructureNS(NAMESPACE_URIS$4,{Document:makeArrayExtender(this.readDocumentOrFolder_,this),Folder:makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),Oe=pushParseAndPop([],ke,e,t,this);if(Oe)return Oe}readPlacemark_(e,t){const ke=pushParseAndPop({geometry:null},PLACEMARK_PARSERS,e,t,this);if(!ke)return;const Oe=new Feature,Ge=e.getAttribute("id");Ge!==null&&Oe.setId(Ge);const Be=t[0],je=ke.geometry;if(je&&transformGeometryWithOptions(je,!1,Be),Oe.setGeometry(je),delete ke.geometry,this.extractStyles_){const Ve=ke.Style,Ze=ke.styleUrl,Qe=createFeatureStyleFunction(Ve,Ze,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);Oe.setStyle(Qe)}return delete ke.Style,Oe.setProperties(ke,!0),Oe}readSharedStyle_(e,t){const ke=e.getAttribute("id");if(ke!==null){const Oe=readStyle$2.call(this,e,t);if(Oe){let Ge,Be=e.baseURI;(!Be||Be=="about:blank")&&(Be=window.location.href),Be?Ge=new URL("#"+ke,Be).href:Ge="#"+ke,this.sharedStyles_[Ge]=Oe}}}readSharedStyleMap_(e,t){const ke=e.getAttribute("id");if(ke===null)return;const Oe=readStyleMapValue.call(this,e,t);if(!Oe)return;let Ge,Be=e.baseURI;(!Be||Be=="about:blank")&&(Be=window.location.href),Be?Ge=new URL("#"+ke,Be).href:Ge="#"+ke,this.sharedStyles_[Ge]=Oe}readFeatureFromNode(e,t){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return null;const ke=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return ke||null}readFeaturesFromNode(e,t){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return[];let ke;const Oe=e.localName;if(Oe=="Document"||Oe=="Folder")return ke=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),ke||[];if(Oe=="Placemark"){const Ge=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return Ge?[Ge]:[]}if(Oe=="kml"){ke=[];for(let Ge=e.firstElementChild;Ge;Ge=Ge.nextElementSibling){const Be=this.readFeaturesFromNode(Ge,t);Be&&extend$4(ke,Be)}return ke}return[]}readName(e){if(e){if(typeof e=="string"){const t=parse$1(e);return this.readNameFromDocument(t)}return isDocument(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const ke=this.readNameFromNode(t);if(ke)return ke}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(NAMESPACE_URIS$4.includes(t.namespaceURI)&&t.localName=="name")return readString(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const ke=t.localName;if(NAMESPACE_URIS$4.includes(t.namespaceURI)&&(ke=="Document"||ke=="Folder"||ke=="Placemark"||ke=="kml")){const Oe=this.readNameFromNode(t);if(Oe)return Oe}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const ke=parse$1(e);extend$4(t,this.readNetworkLinksFromDocument(ke))}else isDocument(e)?extend$4(t,this.readNetworkLinksFromDocument(e)):extend$4(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType==Node.ELEMENT_NODE&&extend$4(t,this.readNetworkLinksFromNode(ke));return t}readNetworkLinksFromNode(e){const t=[];for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling)if(NAMESPACE_URIS$4.includes(ke.namespaceURI)&&ke.localName=="NetworkLink"){const Oe=pushParseAndPop({},NETWORK_LINK_PARSERS,ke,[]);t.push(Oe)}for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Oe=ke.localName;NAMESPACE_URIS$4.includes(ke.namespaceURI)&&(Oe=="Document"||Oe=="Folder"||Oe=="kml")&&extend$4(t,this.readNetworkLinksFromNode(ke))}return t}readRegion(e){const t=[];if(typeof e=="string"){const ke=parse$1(e);extend$4(t,this.readRegionFromDocument(ke))}else isDocument(e)?extend$4(t,this.readRegionFromDocument(e)):extend$4(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType==Node.ELEMENT_NODE&&extend$4(t,this.readRegionFromNode(ke));return t}readRegionFromNode(e){const t=[];for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling)if(NAMESPACE_URIS$4.includes(ke.namespaceURI)&&ke.localName=="Region"){const Oe=pushParseAndPop({},REGION_PARSERS,ke,[]);t.push(Oe)}for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Oe=ke.localName;NAMESPACE_URIS$4.includes(ke.namespaceURI)&&(Oe=="Document"||Oe=="Folder"||Oe=="kml")&&extend$4(t,this.readRegionFromNode(ke))}return t}readCamera(e){const t=[];if(typeof e=="string"){const ke=parse$1(e);extend$4(t,this.readCameraFromDocument(ke))}else isDocument(e)?extend$4(t,this.readCameraFromDocument(e)):extend$4(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType===Node.ELEMENT_NODE&&extend$4(t,this.readCameraFromNode(ke));return t}readCameraFromNode(e){const t=[];for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling)if(NAMESPACE_URIS$4.includes(ke.namespaceURI)&&ke.localName==="Camera"){const Oe=pushParseAndPop({},CAMERA_PARSERS,ke,[]);t.push(Oe)}for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Oe=ke.localName;NAMESPACE_URIS$4.includes(ke.namespaceURI)&&(Oe==="Document"||Oe==="Folder"||Oe==="Placemark"||Oe==="kml")&&extend$4(t,this.readCameraFromNode(ke))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const ke=createElementNS(NAMESPACE_URIS$4[4],"kml"),Oe="http://www.w3.org/2000/xmlns/";ke.setAttributeNS(Oe,"xmlns:gx",GX_NAMESPACE_URIS[0]),ke.setAttributeNS(Oe,"xmlns:xsi",XML_SCHEMA_INSTANCE_URI),ke.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION$1);const Ge={node:ke},Be={};e.length>1?Be.Document=e:e.length==1&&(Be.Placemark=e[0]);const je=KML_SEQUENCE[ke.namespaceURI],Ve=makeSequence(Be,je);return pushSerializeAndPop(Ge,KML_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ve,[t],je,this),ke}};function createNameStyleFunction(r,e){const t=[0,0];let ke="start";const Oe=r.getImage();if(Oe){const je=Oe.getSize();if(je&&je.length==2){const Ve=Oe.getScaleArray(),Ze=Oe.getAnchor();t[0]=Ve[0]*(je[0]-Ze[0]),t[1]=Ve[1]*(je[1]/2-Ze[1]),ke="left"}}let Ge=r.getText();return Ge?(Ge=Ge.clone(),Ge.setFont(Ge.getFont()||DEFAULT_TEXT_STYLE.getFont()),Ge.setScale(Ge.getScale()||DEFAULT_TEXT_STYLE.getScale()),Ge.setFill(Ge.getFill()||DEFAULT_TEXT_STYLE.getFill()),Ge.setStroke(Ge.getStroke()||DEFAULT_TEXT_STROKE_STYLE)):Ge=DEFAULT_TEXT_STYLE.clone(),Ge.setText(e),Ge.setOffsetX(t[0]),Ge.setOffsetY(t[1]),Ge.setTextAlign(ke),new Style$1({image:Oe,text:Ge})}function createFeatureStyleFunction(r,e,t,ke,Oe){return function(Ge,Be){let je=Oe,Ve="",Ze=[];if(je){const en=Ge.getGeometry();if(en)if(en instanceof GeometryCollection)Ze=en.getGeometriesArrayRecursive().filter(function(tn){const an=tn.getType();return an==="Point"||an==="MultiPoint"}),je=Ze.length>0;else{const tn=en.getType();je=tn==="Point"||tn==="MultiPoint"}}je&&(Ve=Ge.get("name"),je=je&&!!Ve,je&&/&[^&]+;/.test(Ve)&&(TEXTAREA||(TEXTAREA=document.createElement("textarea")),TEXTAREA.innerHTML=Ve,Ve=TEXTAREA.value));let Qe=t;if(r?Qe=r:e&&(Qe=findStyle(e,t,ke)),je){const en=createNameStyleFunction(Qe[0],Ve);if(Ze.length>0){en.setGeometry(new GeometryCollection(Ze));const tn=new Style$1({geometry:Qe[0].getGeometry(),image:null,fill:Qe[0].getFill(),stroke:Qe[0].getStroke(),text:null});return[en,tn].concat(Qe.slice(1))}return en}return Qe}}function findStyle(r,e,t){return Array.isArray(r)?r:typeof r=="string"?findStyle(t[r],e,t):e}function readColor(r){const e=getAllTextContent(r,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const ke=t[1];return[parseInt(ke.substr(6,2),16),parseInt(ke.substr(4,2),16),parseInt(ke.substr(2,2),16),parseInt(ke.substr(0,2),16)/255]}}function readFlatCoordinates(r){let e=getAllTextContent(r,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const ke=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let Oe;for(;Oe=ke.exec(e);){const Ge=parseFloat(Oe[1]),Be=parseFloat(Oe[2]),je=Oe[3]?parseFloat(Oe[3]):0;t.push(Ge,Be,je),e=e.substr(Oe[0].length)}if(e==="")return t}function readURI(r){const e=getAllTextContent(r,!1).trim();let t=r.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function readStyleURL(r){const e=getAllTextContent(r,!1).trim().replace(/^(?!.*#)/,"#");let t=r.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function readVec2(r){const e=r.getAttribute("xunits"),t=r.getAttribute("yunits");let ke;return e!=="insetPixels"?t!=="insetPixels"?ke="bottom-left":ke="top-left":t!=="insetPixels"?ke="bottom-right":ke="top-right",{x:parseFloat(r.getAttribute("x")),xunits:ICON_ANCHOR_UNITS_MAP[e],y:parseFloat(r.getAttribute("y")),yunits:ICON_ANCHOR_UNITS_MAP[t],origin:ke}}function readScale(r){return readDecimal(r)}const STYLE_MAP_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Pair:pairDataParser});function readStyleMapValue(r,e){return pushParseAndPop(void 0,STYLE_MAP_PARSERS,r,e,this)}const ICON_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeObjectPropertySetter(readIcon),color:makeObjectPropertySetter(readColor),heading:makeObjectPropertySetter(readDecimal),hotSpot:makeObjectPropertySetter(readVec2),scale:makeObjectPropertySetter(readScale)});function iconStyleParser(r,e){const t=pushParseAndPop({},ICON_STYLE_PARSERS,r,e);if(!t)return;const ke=e[e.length-1],Oe="Icon"in t?t.Icon:{},Ge=!("Icon"in t)||Object.keys(Oe).length>0;let Be;const je=Oe.href;je?Be=je:Ge&&(Be=DEFAULT_IMAGE_STYLE_SRC);let Ve,Ze,Qe,en="bottom-left";const tn=t.hotSpot;tn?(Ve=[tn.x,tn.y],Ze=tn.xunits,Qe=tn.yunits,en=tn.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(Be)&&(Be.includes("pushpin")?(Ve=DEFAULT_IMAGE_STYLE_ANCHOR,Ze=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,Qe=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):Be.includes("arrow-reverse")?(Ve=[54,42],Ze=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,Qe=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):Be.includes("paddle")&&(Ve=[32,1],Ze=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,Qe=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS));let an;const cn=Oe.x,dn=Oe.y;cn!==void 0&&dn!==void 0&&(an=[cn,dn]);let hn;const fn=Oe.w,pn=Oe.h;fn!==void 0&&pn!==void 0&&(hn=[fn,pn]);let mn;const yn=t.heading;yn!==void 0&&(mn=toRadians(yn));const Cn=t.scale,wn=t.color;if(Ge){Be==DEFAULT_IMAGE_STYLE_SRC&&(hn=DEFAULT_IMAGE_STYLE_SIZE);const bn=new Icon({anchor:Ve,anchorOrigin:en,anchorXUnits:Ze,anchorYUnits:Qe,crossOrigin:this.crossOrigin_,offset:an,offsetOrigin:"bottom-left",rotation:mn,scale:Cn,size:hn,src:this.iconUrlFunction_(Be),color:wn}),Sn=bn.getScaleArray()[0],Mn=bn.getSize();if(Mn===null){const Tn=bn.getImageState();if(Tn===ImageState.IDLE||Tn===ImageState.LOADING){const En=function(){const An=bn.getImageState();if(!(An===ImageState.IDLE||An===ImageState.LOADING)){const Ln=bn.getSize();if(Ln&&Ln.length==2){const Rn=scaleForSize(Ln);bn.setScale(Sn*Rn)}bn.unlistenImageChange(En)}};bn.listenImageChange(En),Tn===ImageState.IDLE&&bn.load()}}else if(Mn.length==2){const Tn=scaleForSize(Mn);bn.setScale(Sn*Tn)}ke.imageStyle=bn}else ke.imageStyle=DEFAULT_NO_IMAGE_STYLE}const LABEL_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),scale:makeObjectPropertySetter(readScale)});function labelStyleParser(r,e){const t=pushParseAndPop({},LABEL_STYLE_PARSERS,r,e);if(!t)return;const ke=e[e.length-1],Oe=new Text({fill:new Fill({color:"color"in t?t.color:DEFAULT_COLOR}),scale:t.scale});ke.textStyle=Oe}const LINE_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),width:makeObjectPropertySetter(readDecimal)});function lineStyleParser(r,e){const t=pushParseAndPop({},LINE_STYLE_PARSERS,r,e);if(!t)return;const ke=e[e.length-1],Oe=new Stroke({color:"color"in t?t.color:DEFAULT_COLOR,width:"width"in t?t.width:1});ke.strokeStyle=Oe}const POLY_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),fill:makeObjectPropertySetter(readBoolean),outline:makeObjectPropertySetter(readBoolean)});function polyStyleParser(r,e){const t=pushParseAndPop({},POLY_STYLE_PARSERS,r,e);if(!t)return;const ke=e[e.length-1],Oe=new Fill({color:"color"in t?t.color:DEFAULT_COLOR});ke.fillStyle=Oe;const Ge=t.fill;Ge!==void 0&&(ke.fill=Ge);const Be=t.outline;Be!==void 0&&(ke.outline=Be)}const FLAT_LINEAR_RING_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatLinearRing(r,e){return pushParseAndPop(null,FLAT_LINEAR_RING_PARSERS,r,e)}function gxCoordParser(r,e){const ke=e[e.length-1].coordinates,Oe=getAllTextContent(r,!1),Be=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(Oe);if(Be){const je=parseFloat(Be[1]),Ve=parseFloat(Be[2]),Ze=parseFloat(Be[3]);ke.push([je,Ve,Ze])}else ke.push([])}const GX_MULTITRACK_GEOMETRY_PARSERS=makeStructureNS(GX_NAMESPACE_URIS,{Track:makeArrayPusher(readGxTrack)});function readGxMultiTrack(r,e){const t=pushParseAndPop([],GX_MULTITRACK_GEOMETRY_PARSERS,r,e);if(t)return new MultiLineString(t)}const GX_TRACK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{when:whenParser},makeStructureNS(GX_NAMESPACE_URIS,{coord:gxCoordParser}));function readGxTrack(r,e){const t=pushParseAndPop({coordinates:[],whens:[]},GX_TRACK_PARSERS,r,e);if(!t)return;const ke=[],Oe=t.coordinates,Ge=t.whens;for(let Be=0,je=Math.min(Oe.length,Ge.length);Be<je;++Be)Oe[Be].length==3&&ke.push(Oe[Be][0],Oe[Be][1],Oe[Be][2],Ge[Be]);return new LineString(ke,"XYZM")}const ICON_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeObjectPropertySetter(readDecimal),y:makeObjectPropertySetter(readDecimal),w:makeObjectPropertySetter(readDecimal),h:makeObjectPropertySetter(readDecimal)}));function readIcon(r,e){const t=pushParseAndPop({},ICON_PARSERS,r,e);return t||null}const GEOMETRY_FLAT_COORDINATES_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatCoordinatesFromNode(r,e){return pushParseAndPop(null,GEOMETRY_FLAT_COORDINATES_PARSERS,r,e)}const EXTRUDE_AND_ALTITUDE_MODE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeObjectPropertySetter(readBoolean),tessellate:makeObjectPropertySetter(readBoolean),altitudeMode:makeObjectPropertySetter(readString)});function readLineString(r,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,r,e),ke=readFlatCoordinatesFromNode(r,e);if(ke){const Oe=new LineString(ke,"XYZ");return Oe.setProperties(t,!0),Oe}}function readLinearRing(r,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,r,e),ke=readFlatCoordinatesFromNode(r,e);if(ke){const Oe=new Polygon(ke,"XYZ",[ke.length]);return Oe.setProperties(t,!0),Oe}}const MULTI_GEOMETRY_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeArrayPusher(readLineString),LinearRing:makeArrayPusher(readLinearRing),MultiGeometry:makeArrayPusher(readMultiGeometry),Point:makeArrayPusher(readPoint),Polygon:makeArrayPusher(readPolygon)});function readMultiGeometry(r,e){const t=pushParseAndPop([],MULTI_GEOMETRY_PARSERS,r,e);if(!t)return null;if(t.length===0)return new GeometryCollection(t);let ke,Oe=!0;const Ge=t[0].getType();let Be;for(let je=1,Ve=t.length;je<Ve;++je)if(Be=t[je],Be.getType()!=Ge){Oe=!1;break}if(Oe){let je,Ve;if(Ge=="Point"){const Ze=t[0];je=Ze.getLayout(),Ve=Ze.getFlatCoordinates();for(let Qe=1,en=t.length;Qe<en;++Qe)Be=t[Qe],extend$4(Ve,Be.getFlatCoordinates());ke=new MultiPoint(Ve,je),setCommonGeometryProperties(ke,t)}else if(Ge=="LineString")ke=new MultiLineString(t),setCommonGeometryProperties(ke,t);else if(Ge=="Polygon")ke=new MultiPolygon(t),setCommonGeometryProperties(ke,t);else if(Ge=="GeometryCollection")ke=new GeometryCollection(t);else throw new Error("Unknown geometry type found")}else ke=new GeometryCollection(t);return ke}function readPoint(r,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,r,e),ke=readFlatCoordinatesFromNode(r,e);if(ke){const Oe=new Point$1(ke,"XYZ");return Oe.setProperties(t,!0),Oe}}const FLAT_LINEAR_RINGS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{innerBoundaryIs:innerBoundaryIsParser,outerBoundaryIs:outerBoundaryIsParser});function readPolygon(r,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,r,e),ke=pushParseAndPop([null],FLAT_LINEAR_RINGS_PARSERS,r,e);if(ke&&ke[0]){const Oe=ke[0],Ge=[Oe.length];for(let je=1,Ve=ke.length;je<Ve;++je)extend$4(Oe,ke[je]),Ge.push(Oe.length);const Be=new Polygon(Oe,"XYZ",Ge);return Be.setProperties(t,!0),Be}}const STYLE_PARSERS$2=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:iconStyleParser,LabelStyle:labelStyleParser,LineStyle:lineStyleParser,PolyStyle:polyStyleParser});function readStyle$2(r,e){const t=pushParseAndPop({},STYLE_PARSERS$2,r,e,this);if(!t)return null;let ke="fillStyle"in t?t.fillStyle:DEFAULT_FILL_STYLE;const Oe=t.fill;Oe!==void 0&&!Oe&&(ke=null);let Ge;"imageStyle"in t?t.imageStyle!=DEFAULT_NO_IMAGE_STYLE&&(Ge=t.imageStyle):Ge=DEFAULT_IMAGE_STYLE;const Be="textStyle"in t?t.textStyle:DEFAULT_TEXT_STYLE,je="strokeStyle"in t?t.strokeStyle:DEFAULT_STROKE_STYLE,Ve=t.outline;return Ve!==void 0&&!Ve?[new Style$1({geometry:function(Ze){const Qe=Ze.getGeometry(),en=Qe.getType();if(en==="GeometryCollection"){const tn=Qe;return new GeometryCollection(tn.getGeometriesArrayRecursive().filter(function(an){const cn=an.getType();return cn!=="Polygon"&&cn!=="MultiPolygon"}))}if(en!=="Polygon"&&en!=="MultiPolygon")return Qe},fill:ke,image:Ge,stroke:je,text:Be,zIndex:void 0}),new Style$1({geometry:function(Ze){const Qe=Ze.getGeometry(),en=Qe.getType();if(en==="GeometryCollection"){const tn=Qe;return new GeometryCollection(tn.getGeometriesArrayRecursive().filter(function(an){const cn=an.getType();return cn==="Polygon"||cn==="MultiPolygon"}))}if(en==="Polygon"||en==="MultiPolygon")return Qe},fill:ke,stroke:null,zIndex:void 0})]:[new Style$1({fill:ke,image:Ge,stroke:je,text:Be,zIndex:void 0})]}function setCommonGeometryProperties(r,e){const t=e.length,ke=new Array(e.length),Oe=new Array(e.length),Ge=new Array(e.length);let Be,je,Ve;Be=!1,je=!1,Ve=!1;for(let Ze=0;Ze<t;++Ze){const Qe=e[Ze];ke[Ze]=Qe.get("extrude"),Oe[Ze]=Qe.get("tessellate"),Ge[Ze]=Qe.get("altitudeMode"),Be=Be||ke[Ze]!==void 0,je=je||Oe[Ze]!==void 0,Ve=Ve||Ge[Ze]}Be&&r.set("extrude",ke),je&&r.set("tessellate",Oe),Ve&&r.set("altitudeMode",Ge)}const DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{displayName:makeObjectPropertySetter(readString),value:makeObjectPropertySetter(readString)});function dataParser(r,e){const t=r.getAttribute("name");parseNode(DATA_PARSERS,r,e);const ke=e[e.length-1];t&&ke.displayName?ke[t]={value:ke.value,displayName:ke.displayName,toString:function(){return ke.value}}:t!==null?ke[t]=ke.value:ke.displayName!==null&&(ke[ke.displayName]=ke.value),delete ke.value}const EXTENDED_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Data:dataParser,SchemaData:schemaDataParser});function extendedDataParser(r,e){parseNode(EXTENDED_DATA_PARSERS,r,e)}function regionParser(r,e){parseNode(REGION_PARSERS,r,e)}const PAIR_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Style:makeObjectPropertySetter(readStyle$2),key:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL)});function pairDataParser(r,e){const t=pushParseAndPop({},PAIR_PARSERS,r,e,this);if(!t)return;const ke=t.key;if(ke&&ke=="normal"){const Oe=t.styleUrl;Oe&&(e[e.length-1]=Oe);const Ge=t.Style;Ge&&(e[e.length-1]=Ge)}}function placemarkStyleMapParser(r,e){const t=readStyleMapValue.call(this,r,e);if(!t)return;const ke=e[e.length-1];if(Array.isArray(t))ke.Style=t;else if(typeof t=="string")ke.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const SCHEMA_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{SimpleData:simpleDataParser});function schemaDataParser(r,e){parseNode(SCHEMA_DATA_PARSERS,r,e)}function simpleDataParser(r,e){const t=r.getAttribute("name");if(t!==null){const ke=readString(r),Oe=e[e.length-1];Oe[t]=ke}}const LAT_LON_ALT_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{altitudeMode:makeObjectPropertySetter(readString),minAltitude:makeObjectPropertySetter(readDecimal),maxAltitude:makeObjectPropertySetter(readDecimal),north:makeObjectPropertySetter(readDecimal),south:makeObjectPropertySetter(readDecimal),east:makeObjectPropertySetter(readDecimal),west:makeObjectPropertySetter(readDecimal)});function latLonAltBoxParser(r,e){const t=pushParseAndPop({},LAT_LON_ALT_BOX_PARSERS,r,e);if(!t)return;const ke=e[e.length-1],Oe=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];ke.extent=Oe,ke.altitudeMode=t.altitudeMode,ke.minAltitude=parseFloat(t.minAltitude),ke.maxAltitude=parseFloat(t.maxAltitude)}const LOD_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{minLodPixels:makeObjectPropertySetter(readDecimal),maxLodPixels:makeObjectPropertySetter(readDecimal),minFadeExtent:makeObjectPropertySetter(readDecimal),maxFadeExtent:makeObjectPropertySetter(readDecimal)});function lodParser(r,e){const t=pushParseAndPop({},LOD_PARSERS,r,e);if(!t)return;const ke=e[e.length-1];ke.minLodPixels=parseFloat(t.minLodPixels),ke.maxLodPixels=parseFloat(t.maxLodPixels),ke.minFadeExtent=parseFloat(t.minFadeExtent),ke.maxFadeExtent=parseFloat(t.maxFadeExtent)}const INNER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeArrayPusher(readFlatLinearRing)});function innerBoundaryIsParser(r,e){const t=pushParseAndPop([],INNER_BOUNDARY_IS_PARSERS,r,e);t.length>0&&e[e.length-1].push(...t)}const OUTER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeReplacer(readFlatLinearRing)});function outerBoundaryIsParser(r,e){const t=pushParseAndPop(void 0,OUTER_BOUNDARY_IS_PARSERS,r,e);if(t){const ke=e[e.length-1];ke[0]=t}}function linkParser(r,e){parseNode(LINK_PARSERS$1,r,e)}function whenParser(r,e){const ke=e[e.length-1].whens,Oe=getAllTextContent(r,!1),Ge=Date.parse(Oe);ke.push(isNaN(Ge)?0:Ge)}function writeColorTextNode(r,e){const t=asArray(e),Oe=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let Ge=0;Ge<4;++Ge){const Be=Math.floor(Oe[Ge]).toString(16);Oe[Ge]=Be.length==1?"0"+Be:Be}writeStringTextNode(r,Oe.join(""))}function writeCoordinatesTextNode(r,e,t){const ke=t[t.length-1],Oe=ke.layout,Ge=ke.stride;let Be;if(Oe=="XY"||Oe=="XYM")Be=2;else if(Oe=="XYZ"||Oe=="XYZM")Be=3;else throw new Error("Invalid geometry layout");const je=e.length;let Ve="";if(je>0){Ve+=e[0];for(let Ze=1;Ze<Be;++Ze)Ve+=","+e[Ze];for(let Ze=Ge;Ze<je;Ze+=Ge){Ve+=" "+e[Ze];for(let Qe=1;Qe<Be;++Qe)Ve+=","+e[Ze+Qe]}}writeStringTextNode(r,Ve)}const EXTENDEDDATA_NODE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Data:makeChildAppender(writeDataNode),value:makeChildAppender(writeDataNodeValue),displayName:makeChildAppender(writeDataNodeName)});function writeDataNode(r,e,t){r.setAttribute("name",e.name);const ke={node:r},Oe=e.value;typeof Oe=="object"?(Oe!==null&&Oe.displayName&&pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Oe.displayName],t,["displayName"]),Oe!==null&&Oe.value&&pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Oe.value],t,["value"])):pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Oe],t,["value"])}function writeDataNodeName(r,e){writeCDATASection(r,e)}function writeDataNodeValue(r,e){writeStringTextNode(r,e)}const DOCUMENT_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Placemark:makeChildAppender(writePlacemark)}),DOCUMENT_NODE_FACTORY=function(r,e,t){const ke=e[e.length-1].node;return createElementNS(ke.namespaceURI,"Placemark")};function writeDocument(r,e,t){pushSerializeAndPop({node:r},DOCUMENT_SERIALIZERS,DOCUMENT_NODE_FACTORY,e,t,void 0,this)}const DATA_NODE_FACTORY=makeSimpleNodeFactory("Data");function writeExtendedData(r,e,t){const ke={node:r},Oe=e.names,Ge=e.values,Be=Oe.length;for(let je=0;je<Be;je++)pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,DATA_NODE_FACTORY,[{name:Oe[je],value:Ge[je]}],t)}const ICON_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["href"],makeStructureNS(GX_NAMESPACE_URIS,["x","y","w","h"])),ICON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeChildAppender(writeStringTextNode)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeChildAppender(writeDecimalTextNode),y:makeChildAppender(writeDecimalTextNode),w:makeChildAppender(writeDecimalTextNode),h:makeChildAppender(writeDecimalTextNode)})),GX_NODE_FACTORY=function(r,e,t){return createElementNS(GX_NAMESPACE_URIS[0],"gx:"+t)};function writeIcon(r,e,t){const ke={node:r},Oe=t[t.length-1].node;let Ge=ICON_SEQUENCE[Oe.namespaceURI],Be=makeSequence(e,Ge);pushSerializeAndPop(ke,ICON_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Be,t,Ge),Ge=ICON_SEQUENCE[GX_NAMESPACE_URIS[0]],Be=makeSequence(e,Ge),pushSerializeAndPop(ke,ICON_SERIALIZERS,GX_NODE_FACTORY,Be,t,Ge)}const ICON_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["scale","heading","Icon","color","hotSpot"]),ICON_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeChildAppender(writeIcon),color:makeChildAppender(writeColorTextNode),heading:makeChildAppender(writeDecimalTextNode),hotSpot:makeChildAppender(writeVec2),scale:makeChildAppender(writeScaleTextNode)});function writeIconStyle(r,e,t){const ke={node:r},Oe={},Ge=e.getSrc(),Be=e.getSize(),je=e.getImageSize(),Ve={href:Ge};if(Be){Ve.w=Be[0],Ve.h=Be[1];const hn=e.getAnchor(),fn=e.getOrigin();if(fn&&je&&fn[0]!==0&&fn[1]!==Be[1]&&(Ve.x=fn[0],Ve.y=je[1]-(fn[1]+Be[1])),hn&&(hn[0]!==Be[0]/2||hn[1]!==Be[1]/2)){const pn={x:hn[0],xunits:"pixels",y:Be[1]-hn[1],yunits:"pixels"};Oe.hotSpot=pn}}Oe.Icon=Ve;let Ze=e.getScaleArray()[0],Qe=Be;if(Qe===null&&(Qe=DEFAULT_IMAGE_STYLE_SIZE),Qe.length==2){const hn=scaleForSize(Qe);Ze=Ze/hn}Ze!==1&&(Oe.scale=Ze);const en=e.getRotation();en!==0&&(Oe.heading=en);const tn=e.getColor();tn&&(Oe.color=tn);const an=t[t.length-1].node,cn=ICON_STYLE_SEQUENCE[an.namespaceURI],dn=makeSequence(Oe,cn);pushSerializeAndPop(ke,ICON_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,dn,t,cn)}const LABEL_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","scale"]),LABEL_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),scale:makeChildAppender(writeScaleTextNode)});function writeLabelStyle(r,e,t){const ke={node:r},Oe={},Ge=e.getFill();Ge&&(Oe.color=Ge.getColor());const Be=e.getScale();Be&&Be!==1&&(Oe.scale=Be);const je=t[t.length-1].node,Ve=LABEL_STYLE_SEQUENCE[je.namespaceURI],Ze=makeSequence(Oe,Ve);pushSerializeAndPop(ke,LABEL_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ze,t,Ve)}const LINE_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","width"]),LINE_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),width:makeChildAppender(writeDecimalTextNode)});function writeLineStyle(r,e,t){const ke={node:r},Oe={color:e.getColor(),width:Number(e.getWidth())||1},Ge=t[t.length-1].node,Be=LINE_STYLE_SEQUENCE[Ge.namespaceURI],je=makeSequence(Oe,Be);pushSerializeAndPop(ke,LINE_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,je,t,Be)}const GEOMETRY_TYPE_TO_NODENAME$1={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},GEOMETRY_NODE_FACTORY=function(r,e,t){if(r){const ke=e[e.length-1].node;return createElementNS(ke.namespaceURI,GEOMETRY_TYPE_TO_NODENAME$1[r.getType()])}},POINT_NODE_FACTORY=makeSimpleNodeFactory("Point"),LINE_STRING_NODE_FACTORY=makeSimpleNodeFactory("LineString"),LINEAR_RING_NODE_FACTORY=makeSimpleNodeFactory("LinearRing"),POLYGON_NODE_FACTORY=makeSimpleNodeFactory("Polygon"),MULTI_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),GeometryCollection:makeChildAppender(writeMultiGeometry)});function writeMultiGeometry(r,e,t){const ke={node:r},Oe=e.getType();let Ge=[],Be;if(Oe==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(je){const Ve=je.getType();if(Ve==="MultiPoint")Ge=Ge.concat(je.getPoints());else if(Ve==="MultiLineString")Ge=Ge.concat(je.getLineStrings());else if(Ve==="MultiPolygon")Ge=Ge.concat(je.getPolygons());else if(Ve==="Point"||Ve==="LineString"||Ve==="Polygon")Ge.push(je);else throw new Error("Unknown geometry type")}),Be=GEOMETRY_NODE_FACTORY;else if(Oe==="MultiPoint")Ge=e.getPoints(),Be=POINT_NODE_FACTORY;else if(Oe==="MultiLineString")Ge=e.getLineStrings(),Be=LINE_STRING_NODE_FACTORY;else if(Oe==="MultiPolygon")Ge=e.getPolygons(),Be=POLYGON_NODE_FACTORY;else throw new Error("Unknown geometry type");pushSerializeAndPop(ke,MULTI_GEOMETRY_SERIALIZERS,Be,Ge,t)}const BOUNDARY_IS_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeChildAppender(writePrimitiveGeometry)});function writeBoundaryIs(r,e,t){pushSerializeAndPop({node:r},BOUNDARY_IS_SERIALIZERS,LINEAR_RING_NODE_FACTORY,[e],t)}const PLACEMARK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:makeChildAppender(writeExtendedData),MultiGeometry:makeChildAppender(writeMultiGeometry),LineString:makeChildAppender(writePrimitiveGeometry),LinearRing:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),Style:makeChildAppender(writeStyle),address:makeChildAppender(writeStringTextNode),description:makeChildAppender(writeStringTextNode),name:makeChildAppender(writeStringTextNode),open:makeChildAppender(writeBooleanTextNode),phoneNumber:makeChildAppender(writeStringTextNode),styleUrl:makeChildAppender(writeStringTextNode),visibility:makeChildAppender(writeBooleanTextNode)}),PLACEMARK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),EXTENDEDDATA_NODE_FACTORY=makeSimpleNodeFactory("ExtendedData");function writePlacemark(r,e,t){const ke={node:r};e.getId()&&r.setAttribute("id",e.getId());const Oe=e.getProperties(),Ge={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Ge[e.getGeometryName()]=1;const Be=Object.keys(Oe||{}).sort().filter(function(an){return!Ge[an]}),je=e.getStyleFunction();if(je){const an=je(e,0);if(an){const cn=Array.isArray(an)?an:[an];let dn=cn;if(e.getGeometry()&&(dn=cn.filter(function(hn){const fn=hn.getGeometryFunction()(e);if(fn){const pn=fn.getType();return pn==="GeometryCollection"?fn.getGeometriesArrayRecursive().filter(function(mn){const yn=mn.getType();return yn==="Point"||yn==="MultiPoint"}).length:pn==="Point"||pn==="MultiPoint"}})),this.writeStyles_){let hn=cn,fn=cn;e.getGeometry()&&(hn=cn.filter(function(pn){const mn=pn.getGeometryFunction()(e);if(mn){const yn=mn.getType();return yn==="GeometryCollection"?mn.getGeometriesArrayRecursive().filter(function(Cn){const wn=Cn.getType();return wn==="LineString"||wn==="MultiLineString"}).length:yn==="LineString"||yn==="MultiLineString"}}),fn=cn.filter(function(pn){const mn=pn.getGeometryFunction()(e);if(mn){const yn=mn.getType();return yn==="GeometryCollection"?mn.getGeometriesArrayRecursive().filter(function(Cn){const wn=Cn.getType();return wn==="Polygon"||wn==="MultiPolygon"}).length:yn==="Polygon"||yn==="MultiPolygon"}})),Oe.Style={pointStyles:dn,lineStyles:hn,polyStyles:fn}}if(dn.length&&Oe.name===void 0){const hn=dn[0].getText();hn&&(Oe.name=hn.getText())}}}const Ve=t[t.length-1].node,Ze=PLACEMARK_SEQUENCE[Ve.namespaceURI],Qe=makeSequence(Oe,Ze);if(pushSerializeAndPop(ke,PLACEMARK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,Ze),Be.length>0){const an=makeSequence(Oe,Be);pushSerializeAndPop(ke,PLACEMARK_SERIALIZERS,EXTENDEDDATA_NODE_FACTORY,[{names:Be,values:an}],t)}const en=t[0];let tn=e.getGeometry();tn&&(tn=transformGeometryWithOptions(tn,!0,en)),pushSerializeAndPop(ke,PLACEMARK_SERIALIZERS,GEOMETRY_NODE_FACTORY,[tn],t)}const PRIMITIVE_GEOMETRY_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["extrude","tessellate","altitudeMode","coordinates"]),PRIMITIVE_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeChildAppender(writeBooleanTextNode),tessellate:makeChildAppender(writeBooleanTextNode),altitudeMode:makeChildAppender(writeStringTextNode),coordinates:makeChildAppender(writeCoordinatesTextNode)});function writePrimitiveGeometry(r,e,t){const ke=e.getFlatCoordinates(),Oe={node:r};Oe.layout=e.getLayout(),Oe.stride=e.getStride();const Ge=e.getProperties();Ge.coordinates=ke;const Be=t[t.length-1].node,je=PRIMITIVE_GEOMETRY_SEQUENCE[Be.namespaceURI],Ve=makeSequence(Ge,je);pushSerializeAndPop(Oe,PRIMITIVE_GEOMETRY_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ve,t,je)}const POLY_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","fill","outline"]),POLYGON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{outerBoundaryIs:makeChildAppender(writeBoundaryIs),innerBoundaryIs:makeChildAppender(writeBoundaryIs)}),INNER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("innerBoundaryIs"),OUTER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("outerBoundaryIs");function writePolygon(r,e,t){const ke=e.getLinearRings(),Oe=ke.shift(),Ge={node:r};pushSerializeAndPop(Ge,POLYGON_SERIALIZERS,INNER_BOUNDARY_NODE_FACTORY,ke,t),pushSerializeAndPop(Ge,POLYGON_SERIALIZERS,OUTER_BOUNDARY_NODE_FACTORY,[Oe],t)}const POLY_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),fill:makeChildAppender(writeBooleanTextNode),outline:makeChildAppender(writeBooleanTextNode)});function writePolyStyle(r,e,t){const ke={node:r},Oe=e.getFill(),Ge=e.getStroke(),Be={color:Oe?Oe.getColor():void 0,fill:Oe?void 0:!1,outline:Ge?void 0:!1},je=t[t.length-1].node,Ve=POLY_STYLE_SEQUENCE[je.namespaceURI],Ze=makeSequence(Be,Ve);pushSerializeAndPop(ke,POLY_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ze,t,Ve)}function writeScaleTextNode(r,e){writeDecimalTextNode(r,Math.round(e*1e6)/1e6)}const STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:makeChildAppender(writeIconStyle),LabelStyle:makeChildAppender(writeLabelStyle),LineStyle:makeChildAppender(writeLineStyle),PolyStyle:makeChildAppender(writePolyStyle)});function writeStyle(r,e,t){const ke={node:r},Oe={};if(e.pointStyles.length){const Ve=e.pointStyles[0].getText();Ve&&(Oe.LabelStyle=Ve);const Ze=e.pointStyles[0].getImage();Ze&&typeof Ze.getSrc=="function"&&(Oe.IconStyle=Ze)}if(e.lineStyles.length){const Ve=e.lineStyles[0].getStroke();Ve&&(Oe.LineStyle=Ve)}if(e.polyStyles.length){const Ve=e.polyStyles[0].getStroke();Ve&&!Oe.LineStyle&&(Oe.LineStyle=Ve),Oe.PolyStyle=e.polyStyles[0]}const Ge=t[t.length-1].node,Be=STYLE_SEQUENCE[Ge.namespaceURI],je=makeSequence(Oe,Be);pushSerializeAndPop(ke,STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,je,t,Be)}function writeVec2(r,e){r.setAttribute("x",String(e.x)),r.setAttribute("y",String(e.y)),r.setAttribute("xunits",e.xunits),r.setAttribute("yunits",e.yunits)}var ColorUtils={hex:function(r){if(r>255)throw new Error("'"+r+"'' is greater than 255(0xff);");var e=Number(r).toString(16);return("0"+e).slice(-2)},num:function(r){return parseInt(r,16)},arrayToRgba:function(r){if(!Array.isArray(r))throw new Error("Not an array !");var e=r[0],t=r[1],ke=r[2],Oe=r[3]||1,Ge="rgba("+e+", "+t+", "+ke+", "+parseFloat(Oe)+")";return Ge},arrayToHex:function(r){if(!Array.isArray(r))throw new Error("Not an array !");var e=r[0],t=r[1],ke=r[2],Oe=r[3],Ge=[this.hex(e),this.hex(t),this.hex(ke)],Be={};return Be.hex="#"+Ge.join(""),Oe&&(Be.opacity=parseFloat(Oe)),Be},rgbaToHex:function(r){var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(r);if(!t)throw new Error("Invalid format: "+r);var ke=t[1],Oe=t[2],Ge=t[3],Be=t[4],je=[this.hex(ke),this.hex(Oe),this.hex(Ge)],Ve={};return Ve.hex="#"+je.join(""),Be&&(Ve.opacity=parseFloat(Be)),Ve},hexToRgba:function(r,e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;if(!r)throw new Error("Invalid format");r=r.replace(t,function(Ge,Be,je,Ve){return Be+Be+je+je+Ve+Ve});var ke=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(r);ke=ke?{r:parseInt(ke[1],16),g:parseInt(ke[2],16),b:parseInt(ke[3],16)}:null;var Oe=ke?"rgba("+ke.r+", "+ke.g+", "+ke.b+", "+e+")":null;return Oe},isHex:function(r){if(!r||r.charAt(0)!=="#")return!1;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,t=e.exec(r);return!!t},isRGB:function(r){if(!r)return!1;var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(r);return!!t}},logger$C=LoggerByDefault.getLogger("styling");Feature.prototype.setPropertyFill=function(){var r=this.getStyle();if(r&&!(Array.isArray(r)&&r.length===0)){var e=r.getFill();if(e){var t=e.getColor();if(Array.isArray(t)){var ke="rgba(";ke+=t[0]+",",ke+=t[1]+",",ke+=t[2]+",",ke+=t[3]+")",t=ke}if(ColorUtils.isRGB(t)){var Oe=ColorUtils.rgbaToHex(t);this.set("fill",Oe.hex),this.set("fill-opacity",Oe.opacity)}else this.set("fill",t),this.set("fill-opacity",1)}}};Feature.prototype.setPropertyStroke=function(){var r=this.getStyle();if(r&&!(Array.isArray(r)&&r.length===0)){var e=r.getStroke();if(e){var t=e.getColor();if(Array.isArray(t)){var ke="rgba(";ke+=t[0]+",",ke+=t[1]+",",ke+=t[2]+",",ke+=t[3]+")",t=ke}if(ColorUtils.isRGB(t)){var Oe=ColorUtils.rgbaToHex(t);this.set("stroke",Oe.hex),this.set("stroke-opacity",Oe.opacity)}else this.set("stroke",t),this.set("stroke-opacity",1);this.set("stroke-width",e.getWidth())}}};Feature.prototype.setPropertyLabel=function(){var r=this.getStyle();if(r&&!(Array.isArray(r)&&r.length===0)){var e=this.get("name")!==void 0,t=r.getText();if(t&&e){var ke=r.getText().getFill();if(ke){var Oe=ke.getColor();if(Array.isArray(Oe)){var Ge="rgba(";Ge+=Oe[0]+",",Ge+=Oe[1]+",",Ge+=Oe[2]+",",Ge+=Oe[3]+")",Oe=Ge}if(ColorUtils.isRGB(Oe)){var Be=ColorUtils.rgbaToHex(Oe);this.set("label-fill",Be.hex),this.set("label-fill-opacity",Be.opacity)}else this.set("label-fill",Oe),this.set("label-fill-opacity",1)}var je=r.getText().getStroke();if(je){var Ve=je.getColor();if(Array.isArray(Ve)){var Ze="rgba(";Ze+=Ve[0]+",",Ze+=Ve[1]+",",Ze+=Ve[2]+",",Ze+=Ve[3]+")",Ve=Ze}if(ColorUtils.isRGB(Ve)){var Qe=ColorUtils.rgbaToHex(Ve);this.set("label-stroke",Qe.hex),this.set("label-stroke-opacity",Qe.opacity)}else this.set("label-stroke",Ve),this.set("label-stroke-opacity",1);this.set("label-stroke-width",je.getWidth())}this.set("label-font",r.getText().getFont()||Styling.DEFAULT_TEXT.font),this.set("label-textAlign",r.getText().getTextAlign()||Styling.DEFAULT_TEXT.textAlign)}}};Feature.prototype.setPropertyMarker=function(){var r=this.getStyle();if(r&&!(Array.isArray(r)&&r.length===0)){var e=r.getImage();if(e)if(e instanceof Icon){var t=e.getColor();if(Array.isArray(t)){var ke="rgba(";ke+=t[0]+",",ke+=t[1]+",",ke+=t[2]+",",ke+=t[3]+")",t=ke}if(t){var Oe=ColorUtils.rgbaToHex(t);this.set("marker-color",Oe.hex)}var Ge=e.getScale();switch(Math.round(Ge*2)/2){case 0:case .5:this.set("marker-size","small");break;case 1:this.set("marker-size","medium");break;case 1.5:case 2:this.set("marker-size","large");break}var Be=e.getSrc();Be&&this.set("marker-symbol",Be),this.unset("circle-fill"),this.unset("circle-fill-opacity"),this.unset("circle-stroke"),this.unset("circle-stroke-width"),this.unset("circle-stroke-opacity"),this.unset("circle-radius")}else{var je=e.getFill();if(je){var Ve=je.getColor();if(Array.isArray(Ve)){var Ze="rgba(";Ze+=Ve[0]+",",Ze+=Ve[1]+",",Ze+=Ve[2]+",",Ze+=Ve[3]+")",Ve=Ze}if(ColorUtils.isRGB(Ve)){var Qe=ColorUtils.rgbaToHex(Ve);this.set("circle-fill",Qe.hex),this.set("circle-fill-opacity",Qe.opacity)}else this.set("circle-fill",Ve),this.set("circle-fill-opacity",1)}var en=e.getStroke();if(en){var tn=en.getColor();if(Array.isArray(tn)){var an="rgba(";an+=tn[0]+",",an+=tn[1]+",",an+=tn[2]+",",an+=tn[3]+")",tn=an}if(ColorUtils.isRGB(tn)){var cn=ColorUtils.rgbaToHex(tn);this.set("circle-stroke",cn.hex),this.set("circle-stroke-opacity",cn.opacity)}else this.set("circle-stroke",tn),this.set("circle-stroke-opacity",1);this.set("circle-stroke-width",en.getWidth())}var dn=e.getRadius();this.set("circle-radius",dn)}}};var Styling={APPLY_CONVERT_GEOM_GPX:!0,DEFAULT_ICON:{src:Marker.lightOrange,anchor:[.5,1],scale:1},DEFAULT_CIRCLE:{radius:10,fill:{opacity:1,color:[0,0,0,1]},stroke:{width:1,opacity:1,color:[0,0,0,1]}},DEFAULT_STROKE:{width:5,opacity:1,color:[250,250,250,1]},DEFAULT_FILL:{opacity:1,color:[0,0,0,1]},DEFAULT_TEXT:{font:"16px sans",textAlign:"left",stroke:{color:[250,250,250,1],width:5,opactity:1},fill:{opacity:1,color:[0,0,0,1]}},getListTags:function(){return["type","fill","fill-opacity","stroke","stroke-opacity","stroke-width","circle-fill","circle-fill-opacity","circle-stroke","circle-stroke-opacity","circle-stroke-width","circle-radius","marker-symbol","marker-color","marker-size","label-fill","label-fill-opacity","label-stroke","label-stroke-width","label-stroke-opacity","label-font","label-textAlign"]},defineStyleFromProperties:function(r){var e=null,t={},ke=null;if(r.get("marker-color")||r.get("marker-size")||r.get("marker-symbol")){ke={},ke.src=this.DEFAULT_ICON.src,ke.anchor=this.DEFAULT_ICON.anchor;var Oe=r.get("marker-symbol");Oe&&Oe.search("data:image/png;base64")!==-1&&(ke.src=Oe);var Ge=r.get("marker-color");ColorUtils.isHex(Ge)&&(ke.color=ColorUtils.hexToRgba(Ge,1));var Be=r.get("marker-size");if(Be)switch(Be){case"small":ke.scale=.5;break;case"medium":ke.scale=1;break;case"large":ke.scale=1.5;break;default:ke.scale=this.DEFAULT_ICON.scale;break}}var je=null;(r.get("stroke")||r.get("stroke-opacity")||r.get("stroke-width"))&&(je={},je.color=ColorUtils.hexToRgba(r.get("stroke"),+r.get("stroke-opacity")||this.DEFAULT_STROKE.opacity),je.width=+r.get("stroke-width")||this.DEFAULT_STROKE.width);var Ve=null;(r.get("fill")||r.get("fill-opacity"))&&(Ve={},Ve.color=ColorUtils.hexToRgba(r.get("fill"),+r.get("fill-opacity")||this.DEFAULT_FILL.opacity));var Ze=null,Qe=null,en=r.get("name")!=="";en&&((r.get("label-fill")||r.get("label-fill-opacity"))&&(Qe={},Qe.color=ColorUtils.hexToRgba(r.get("label-fill"),+r.get("label-fill-opacity")||this.DEFAULT_TEXT.fill.opacity)),(r.get("label-stroke")||r.get("label-stroke-opacity")||r.get("label-stroke-width"))&&(Ze={},Ze.color=ColorUtils.hexToRgba(r.get("label-stroke"),+r.get("label-stroke-opacity")||this.DEFAULT_TEXT.stroke.opacity),Ze.width=+r.get("label-stroke-width")||this.DEFAULT_TEXT.stroke.width));var tn=r.get("circle-radius")||this.DEFAULT_CIRCLE.radius,an=null;(r.get("circle-stroke")||r.get("circle-stroke-opacity")||r.get("circle-stroke-width"))&&(an={},an.color=ColorUtils.hexToRgba(r.get("circle-stroke"),+r.get("circle-stroke-opacity")||this.DEFAULT_CIRCLE.stroke.opacity),an.width=+r.get("circle-stroke-width")||this.DEFAULT_CIRCLE.stroke.width);var cn=null;if((r.get("circle-fill")||r.get("circle-fill-opacity"))&&(cn={},cn.color=ColorUtils.hexToRgba(r.get("circle-fill"),+r.get("circle-fill-opacity")||this.DEFAULT_CIRCLE.fill.opacity)),r.getGeometry()){var dn=r.getGeometry().getType();switch(dn){case"Circle":case"Point":case"MultiPoint":var hn=!1,fn={};if(an&&(fn.stroke=new Stroke(an)),cn&&(fn.fill=new Fill(cn)),Object.keys(fn).length!==0&&(hn=!0,fn.radius=+tn,t.image=new CircleStyle(fn)),ke&&(t.image=new Icon(ke)),en){var pn={};if(Ze&&(pn.stroke=new Stroke(Ze)),Qe&&(pn.fill=new Fill(Qe)),Object.keys(pn).length!==0)pn.text=r.get("name"),pn.textAlign=r.get("label-textAlign")||this.DEFAULT_TEXT.textAlign,pn.font=r.get("label-font")||this.DEFAULT_TEXT.font,t.text=new Text(Object.assign({},this.DEFAULT_TEXT,pn));else if(ke||hn){var mn=new Text(Object.assign({},this.DEFAULT_TEXT,{fill:new Fill(this.DEFAULT_TEXT.fill),stroke:new Stroke(this.DEFAULT_TEXT.stroke)}));if(mn){var yn=mn.clone();yn.setText(r.get("name")),t.text=yn}}}break;case"Polygon":case"MultiPolygon":je&&(t.stroke=new Stroke(je)),Ve&&(t.fill=new Fill(Ve));break;case"LineString":case"MultiLineString":if(je&&(t.stroke=new Stroke(je)),this.APPLY_CONVERT_GEOM_GPX&&Ve){var Cn=r.get("type");if(Cn&&(Cn==="Polygon"||Cn==="MultiPolygon")){t.fill=new Fill(Ve);var wn=r.clone(),bn=dn==="LineString"?Polygon:MultiPolygon;r.setGeometry(new bn([wn.getGeometry().getCoordinates()]))}}break}}return Object.keys(t).length!==0&&(e=new Style$1(t)),e},defineStyleFunctionByDefault:function(r){if(!r)return[];if(Object.keys(r).length===0)return[];var e=(t,ke)=>{if(t.getGeometry()){var Oe=null,Ge=t.getGeometry().getType();switch(Ge){case"Point":case"MultiPoint":var Be={};if(r.getImage()&&(Be.image=r.getImage()),r.getText()&&t.get("name")){var je=r.getText().clone();je.setText(t.get("name")),Be.text=je}Oe=new Style$1(Be);break;case"Circle":var Ve={},Ze={};if(r.getFill()&&(Ze.fill=r.getFill()),r.getStroke()&&(Ze.stroke=r.getStroke()),r.getText()&&t.get("name")){var Qe=r.getText().clone();Qe.setText(t.get("name")),Ve.text=Qe}Object.keys(Ze).length!==0&&(Ze.radius=3,Ve.image=new CircleStyle(Ze)),Oe=new Style$1(Ve);break;case"Polygon":case"MultiPolygon":var en={};r.getFill()&&(en.fill=r.getFill()),r.getStroke()&&(en.stroke=r.getStroke()),Oe=new Style$1(en);break;case"LineString":case"LinearRing":case"MultiLineString":var tn={};r.getStroke()&&(tn.stroke=r.getStroke()),Oe=new Style$1(tn);break}return[Oe]}};return e},definePropertiesFromStyleByType:function(r){if(r.getGeometry()){var e=r.getGeometry().getType();switch(e){case"Point":case"MultiPoint":r.setPropertyMarker(),r.setPropertyLabel();break;case"LineString":case"MultiLineString":r.setPropertyStroke();break;case"Polygon":case"MultiPolygon":r.setPropertyStroke(),r.setPropertyFill();break}}},definePropertiesFromStyle:function(r){var e=r.getStyle()||r.getStyleFunction();if(e){if(typeof e=="function"){var t=e.call(this,r,0);if(t&&t.length!==0)e=Array.isArray(t)?t[0]:t,r.setStyle(e);else return}this.definePropertiesFromStyleByType(r)}},defineTagFromStyle:function(r,e){return logger$C.trace("todo..."),null}},logger$B=LoggerByDefault.getLogger("parser"),Parser$1={parse:function(r){var e=null,t=null,ke=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var Oe=require("@xmldom/xmldom").DOMParser;t=new Oe,e=t.parseFromString(r,"text/xml")}else ke.DOMParser?(t=new ke.DOMParser,e=t.parseFromString(r,"text/xml")):ke.ActiveXObject?(e=new ke.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(r)):logger$B.log("Incompatible environment for DOM Parser !");var Ge=e.querySelector("parsererror");return Ge?(console.error(Ge),null):(logger$B.trace(e),e)},toString:function(r){var e=new XMLSerializer,t=e.serializeToString(r);return logger$B.trace(t),t},format:function(r){var e=/(>)\s*(<)(\/*)/g,t=/ *(.*) +\n/g,ke=/(<.+>)(.+\n)/g;r=r.replace(e,`$1
$2$3`).replace(t,`$1
`).replace(ke,`$1
$2`);for(var Oe="",Ge=r.split(`
`),Be=0,je="other",Ve={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},Ze=0;Ze<Ge.length;Ze++){var Qe=Ge[Ze],en=!!Qe.match(/<.+\/>/),tn=!!Qe.match(/<\/.+>/),an=!!Qe.match(/<[^!].*>/),cn=en?"single":tn?"closing":an?"opening":"other",dn=je+"->"+cn;je=cn;var hn="";Be+=Ve[dn];for(var fn=0;fn<Be;fn++)hn+="	";dn==="opening->closing"?Oe=Oe.substr(0,Oe.length-1)+Qe+`
`:Oe+=hn+Qe+`
`}return logger$B.trace(Oe),Oe}},logger$A=LoggerByDefault.getLogger("extended KML format"),KML=class Of extends KML$1{constructor(e){if(super(e),!(this instanceof Of))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e=e||{},this.source=null,this.extensions=e.extensions||null,e.defaultStyle&&!Array.isArray(e.defaultStyle)&&(e.defaultStyle=[e.defaultStyle]),(e.defaultStyle===null||typeof e.defaultStyle>"u")&&(e.defaultStyle=[]),this}_processKml(e,t,ke){for(var Oe=e.nodeName==="#document"?e.childNodes[0].childNodes:e.childNodes,Ge=Oe,Be=0;Be<Oe.length;Be++){const Kn=Oe[Be];if(Kn.nodeName==="Document"){Ge=Kn.childNodes;break}if(Kn.nodeName==="Placemark"){Ge=[Kn];break}}for(var je={},Ve=-1,Ze=0;Ze<Ge.length;Ze++){var Qe=Ge[Ze];switch(Qe.nodeName){case"Style":var en=Qe.attributes[0];if(en&&en.nodeName==="id"){var tn=en.nodeValue,an=Qe;je[tn]=an}break;case"Placemark":Ve++;for(var cn=Qe.childNodes,dn=!1,hn=!1,fn=!1,pn=null,mn=null,yn=null,Cn=Qe,wn=0;wn<cn.length;wn++)switch(cn[wn].nodeName){case"Polygon":fn=!0;break;case"LineString":hn=!0;break;case"Point":dn=!0;break;case"Style":mn=cn[wn],pn=cn[wn].childNodes;break;case"styleUrl":var bn=cn[wn].textContent.slice(1);je[bn]&&(pn=je[bn].childNodes);break;case"ExtendedData":yn=cn[wn].childNodes;break;case"name":Cn=null;break}if(yn){logger$A.log("ExtendedData :",yn);var Sn=ke.extendedData;Sn&&typeof Sn=="function"&&Sn(t[Ve],yn)}if(Cn){logger$A.log("Name :",Cn);var Mn=ke.nameData;Mn&&typeof Mn=="function"&&Mn(t[Ve],Cn)}if(dn&&pn&&pn.length!==0){for(var Tn=null,En=null,An=0;An<pn.length;An++)switch(pn[An].nodeName){case"LabelStyle":Tn=pn[An];break;case"IconStyle":En=pn[An];break}var Ln=t[Ve].getProperties().name,Rn=t[Ve].getProperties().description,Gn=Ln||Rn;if(logger$A.trace(Gn),!En&&Tn){var Nn=ke.labelStyle;Nn&&typeof Nn=="function"&&Nn(t[Ve],Tn)}else if(En&&!Tn){var jn=ke.iconStyle;jn&&typeof jn=="function"&&jn(t[Ve],En)}else if(En&&Tn){var Dn=ke.iconLabelStyle;Dn&&typeof Dn=="function"&&Dn(t[Ve],En,Tn)}}else{var Ci=t[Ve],Jn=Ci.getStyle();if(Jn&&typeof Jn=="function"){var Ki=Jn.call(this,Ci,0);Ki&&Ki.length!==0&&(Jn=Ki[0])}if(fn){var xn=ke.polygonStyle;xn&&typeof xn=="function"&&xn(t[Ve],pn)}if(hn){var qn=ke.lineStringStyle;qn&&typeof qn=="function"&&qn(t[Ve],pn)}if(dn&&Jn){var $n=Jn.getImage();if($n&&$n instanceof CircleStyle){var Ai=ke.circleStyle;Ai&&typeof Ai=="function"&&Ai(t[Ve],mn)}else if($n&&$n instanceof Icon){var Ti=ke.pointStyle;Ti&&typeof Ti=="function"&&Ti(t[Ve],mn)}}}break;default:logger$A.trace("tag is not processing !")}}}writeFeatures(e,t){logger$A.log("overload : ol.format.KML.writeFeatures");var ke=super.writeFeaturesNode(e,t);if(ke===null)return null;this.hasOwnProperty("extensions")&&this._writeRootExtensions(ke,this.extensions);var Oe=this._writeExtendStylesFeatures(ke,e,t),Ge=Parser$1.format(Oe);return Ge===""?null:Ge}_writeExtendStylesFeatures(e,t,ke){function Oe(an,cn){var dn=an.toString(16);dn.charAt(0)==="#"&&(dn=dn.slice(1)),cn=cn||1,cn=parseInt(cn*255,10),cn=cn.toString(16);var hn=cn;return hn=hn+dn.substr(4,2),hn=hn+dn.substr(2,2),hn=hn+dn.substr(0,2),hn.toLowerCase()}var Ge=function(an,cn){if(logger$A.trace("label with style :",cn),!!an&&an.getStyle()instanceof Style$1){var dn=an.getStyle().getText();if(!dn)return;var hn="Sans",fn="16px",pn=dn.getFont();if(pn){var mn=pn.split(" ",2);fn=mn[0],hn=mn[1]}var yn=an.getStyle().getText().getStroke();if(!yn)return;if(yn instanceof Stroke){var Cn=Oe("#FFFFFF"),wn=yn.getColor();if(Array.isArray(wn)){var bn="rgba(";bn+=wn[0]+",",bn+=wn[1]+",",bn+=wn[2]+",",bn+=wn[3]+")",wn=bn}if(ColorUtils.isRGB(wn)){var Sn=ColorUtils.rgbaToHex(wn);Cn=Oe(Sn.hex,Sn.opacity)}else Cn=Oe(wn);var Mn=yn.getWidth()||"0",Tn="1";if(cn&&cn.getElementsByTagName("LabelStyleSimpleExtensionGroup").length===0){var En=document.createElementNS(e.namespaceURI,"LabelStyleSimpleExtensionGroup");En.setAttribute("fontSize",fn),En.setAttribute("fontFamily",hn),En.setAttribute("haloColor",Cn),En.setAttribute("haloRadius",Mn),En.setAttribute("haloOpacity",Tn),cn.appendChild(En)}}var An=an.getStyle().getImage();if(!An)return;if(An instanceof CircleStyle){var Ln=null,Rn=null;if(An.getStroke()){if(Rn=An.getStroke().getWidth(),Ln=An.getStroke().getColor(),Array.isArray(Ln)){var Gn="rgba(";Gn+=Ln[0]+",",Gn+=Ln[1]+",",Gn+=Ln[2]+",",Gn+=Ln[3]+")",Ln=Gn}if(ColorUtils.isRGB(Ln)){var Nn=ColorUtils.rgbaToHex(Ln);Ln=Oe(Nn.hex,Nn.opacity)}else Ln=Oe(Ln)}var jn=null;if(An.getFill()){if(jn=An.getFill().getColor(),Array.isArray(jn)){var Dn="rgba(";Dn+=jn[0]+",",Dn+=jn[1]+",",Dn+=jn[2]+",",Dn+=jn[3]+")",jn=Dn}if(ColorUtils.isRGB(jn)){var Ci=ColorUtils.rgbaToHex(jn);jn=Oe(Ci.hex,Ci.opacity)}else jn=Oe(jn)}if(cn&&cn.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var Jn=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");Jn.setAttribute("type","circle"),Jn.setAttribute("radius",An.getRadius()),Jn.setAttribute("fillColor",jn),Jn.setAttribute("strokeColor",Ln),Jn.setAttribute("strokeWidth",Rn),cn.appendChild(Jn)}}}},Be=function(an,cn){if(logger$A.trace("marker with style (hotspot):",cn),!!an&&an.getStyle()instanceof Style$1){var dn=an.getStyle().getImage();if(!dn)return;if(dn instanceof Icon){var hn=0,fn=0,pn="pixels",mn="pixels",yn=dn.getSize(),Cn=dn.getAnchor();if(Cn.length&&(hn=Cn[0],fn=Cn[1],mn==="fraction"?fn=fn===1?0:1-fn:fn=mn==="pixels"&&fn===yn[1]?0:yn[1]-fn),cn&&cn.getElementsByTagName("hotSpot").length===0){var wn=document.createElementNS(e.namespaceURI,"hotSpot");wn.setAttribute("x",hn),wn.setAttribute("y",fn),wn.setAttribute("xunits",pn),wn.setAttribute("yunits",mn),cn.appendChild(wn)}}}},je=function(an,cn){if(an&&an.getStyle()instanceof Style$1){var dn=an.getStyle().getImage();if(!dn)return;if(dn instanceof CircleStyle){var hn=null,fn=null;if(dn.getStroke()){if(fn=dn.getStroke().getWidth(),hn=dn.getStroke().getColor(),Array.isArray(hn)){var pn="rgba(";pn+=hn[0]+",",pn+=hn[1]+",",pn+=hn[2]+",",pn+=hn[3]+")",hn=pn}if(ColorUtils.isRGB(hn)){var mn=ColorUtils.rgbaToHex(hn);hn=Oe(mn.hex,mn.opacity)}else hn=Oe(hn)}var yn=null;if(dn.getFill()){if(yn=dn.getFill().getColor(),Array.isArray(yn)){var Cn="rgba(";Cn+=yn[0]+",",Cn+=yn[1]+",",Cn+=yn[2]+",",Cn+=yn[3]+")",yn=Cn}if(ColorUtils.isRGB(yn)){var wn=ColorUtils.rgbaToHex(yn);yn=Oe(wn.hex,wn.opacity)}else yn=Oe(yn)}if(cn&&cn.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var bn=document.createElementNS(e.namespaceURI,"LabelStyle"),Sn=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");Sn.setAttribute("type","circle"),Sn.setAttribute("radius",dn.getRadius()),Sn.setAttribute("fillColor",yn),Sn.setAttribute("strokeColor",hn),Sn.setAttribute("strokeWidth",fn),bn.appendChild(Sn),cn.appendChild(bn)}}}},Ve=function(an,cn){},Ze=function(an,cn,dn){logger$A.trace("write an icon with a label"),Be(an,cn),Ge(an,dn)},Qe=function(an,cn){for(var dn=0;dn<cn.length;dn++){var hn=cn[dn];if(hn.nodeName==="name")return}var fn=an.getProperties().name;if(fn){var pn=document.createElement("name");pn.innerHTML=fn,cn.appendChild(pn)}},en=function(an,cn){if(cn&&cn.length){for(var dn=[],hn=0;hn<cn.length;hn++){const pn=cn[hn];if(pn.nodeName==="Data"){var fn=pn.getAttribute("name");Styling.getListTags().includes(fn)&&dn.push(pn)}}dn&&dn.length&&dn.forEach(pn=>{pn.remove()})}};this._processKml(e,t,{labelStyle:Ge,iconStyle:Be,iconLabelStyle:Ze,circleStyle:je,pointStyle:Ve,nameData:Qe,extendedData:en});var tn=Parser$1.toString(e);return tn||null}_writeRootExtensions(e,t){var ke=document.createElementNS(e.namespaceURI,"ExtendedData");for(const je in t)if(Object.hasOwnProperty.call(t,je)){const Ve=t[je];var Oe=document.createElementNS(e.namespaceURI,"Data");Oe.setAttribute("name",je);var Ge=document.createTextNode(JSON.stringify(Ve));Oe.appendChild(Ge),ke.appendChild(Oe)}var Be=e.firstChild;e.insertBefore(ke,Be)}readFeatures(e,t){logger$A.log("overload : ol.format.KML.readFeatures"),typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var ke=this._readExtendStylesFeatures(e,t);return logger$A.trace("Styles étendus",ke),ke.forEach(Oe=>{Styling.definePropertiesFromStyle(Oe)}),ke}_readExtendStylesFeatures(e,t){var ke=super.readFeatures(e,t),Oe=null,Ge="";if(typeof e=="string"?Ge=e:Ge=e.documentElement.outerHTML,Ge=Ge.replace(/\n/g,""),Ge=Ge.replace(/(>)\s*(<)/g,"$1$2"),Oe=Parser$1.parse(Ge),Oe===null)return ke;function Be(tn){var an="";an=an+tn.substr(6,2),an=an+tn.substr(4,2),an=an+tn.substr(2,2);for(var cn=parseInt(an,16).toString(16),dn="",hn=cn.length||0,fn=0;fn<6-hn;fn++)dn+="0";return cn="#"+dn+cn,cn}var je=function(tn,an){if(logger$A.trace("label with style :",an),!!tn){for(var cn=tn.getProperties().name,dn=Be("ff000000"),hn="#FFFFFF",fn=0,pn="Sans",mn="16px",yn=null,Cn=5,wn="#000000",bn="#ffffff",Sn=1,Mn=!1,Tn=!1,En=an.childNodes,An=0;An<En.length;An++)switch(En[An].nodeName){case"scale":break;case"colorMode":break;case"color":dn=Be(En[An].textContent);break;case"LabelStyleSimpleExtensionGroup":Mn=!0;for(var Ln=En[An].attributes,Rn=0;Rn<Ln.length;Rn++)switch(Ln[Rn].nodeName){case"fontFamily":pn=Ln[Rn].nodeValue;break;case"fontSize":mn=Ln[Rn].nodeValue;break;case"haloColor":hn=Be(Ln[Rn].nodeValue);break;case"haloRadius":fn=parseInt(Ln[Rn].nodeValue,10);break}break;case"ObjectSimpleExtensionGroup":Tn=!0;for(var Gn=En[An].attributes,Nn=0;Nn<Gn.length;Nn++)switch(Gn[Nn].nodeName){case"type":yn=Gn[Nn].nodeValue;break;case"radius":Cn=parseInt(Gn[Nn].nodeValue,10);break;case"fillColor":var jn=Gn[Nn].nodeValue,Dn=Math.round(ColorUtils.num(jn.substr(0,2))/255*10)/10,Ci=Be(jn);wn=ColorUtils.hexToRgba(Ci,Dn);break;case"strokeColor":var Jn=Gn[Nn].nodeValue,Ki=Math.round(ColorUtils.num(Jn.substr(0,2))/255*10)/10,xn=Be(Jn);bn=ColorUtils.hexToRgba(xn,Ki);break;case"strokeWidth":Sn=parseInt(Gn[Nn].nodeValue,10);break}break}var qn=null;Tn&&yn==="circle"?qn=new CircleStyle({radius:Cn,fill:new Fill({color:wn}),stroke:new Stroke({color:bn,width:Sn})}):Mn&&(qn=new Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"})),tn.setStyle(new Style$1({image:qn,text:new Text({font:mn+" "+pn,textAlign:"left",text:cn,fill:new Fill({color:dn}),stroke:new Stroke({color:hn,width:fn})})}))}},Ve=function(tn,an){logger$A.trace("hotspot :",an);for(var cn=null,dn=null,hn=Be("ffffffff"),fn=!1,pn=51,mn=38,yn=!1,Cn=25.5,wn="pixels",bn=38,Sn="pixels",Mn=an.childNodes,Tn=!1,En=0;En<Mn.length;En++)switch(Mn[En].nodeName){case"Icon":Tn=!0;for(var An=Mn[En].childNodes,Ln=0;Ln<An.length;Ln++)switch(An[Ln].nodeName){case"href":cn=An[Ln].textContent;break;case"gx:w":fn=!0,pn=parseFloat(An[Ln].textContent);break;case"gx:h":fn=!0,mn=parseFloat(An[Ln].textContent);break}break;case"hotSpot":yn=!0;for(var Rn=Mn[En].attributes,Gn=0;Gn<Rn.length;Gn++)switch(Rn[Gn].nodeName){case"x":Cn=parseFloat(Rn[Gn].nodeValue);break;case"y":bn=parseFloat(Rn[Gn].nodeValue);break;case"yunits":wn=Rn[Gn].nodeValue;break;case"xunits":Sn=Rn[Gn].nodeValue;break}break;case"scale":dn=parseFloat(Mn[En].textContent);break;case"color":hn=Be(Mn[En].textContent);break}var Nn=null;if(Tn){var jn={src:cn||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",color:hn,crossOrigin:"anonymous",scale:dn||1};fn&&Helper.mergeParams(jn,{size:[pn,mn]}),yn&&Helper.mergeParams(jn,{anchor:[Cn,bn],anchorOrigin:"bottom-left",anchorXUnits:wn||"pixels",anchorYUnits:Sn||"pixels"}),Nn=new Icon(jn)}var Dn=tn.getStyleFunction();if(Dn){var Ci=Dn(tn,0);if(Ci&&!Array.isArray(Ci)&&(Ci=[Ci]),Ci&&Ci.length!==0){var Jn=Ci.length===1?Ci[0]:Ci[Ci.length-1];tn.setStyle(new Style$1({image:Nn,text:Jn.getText()}))}}},Ze=function(tn,an){if(logger$A.trace("extendData :",an),!!tn){for(var cn={},dn=tn.get("name")||"",hn=tn.get("description")||"",fn=null,pn=0;pn<an.length;pn++){var mn=an[pn],yn=mn.attributes[0],Cn=mn.childNodes;if(yn.nodeName==="name")switch(yn.nodeValue){case"label":dn=mn.textContent,cn.name=dn;break;case"title":case"attributetitle":for(var wn=0;wn<Cn.length;wn++)Cn[wn].nodeName==="value"&&(fn=Cn[wn].textContent);break;default:cn[yn.nodeValue]=mn.textContent;break}}fn&&(hn=hn?fn+" : "+hn:fn,cn.description=hn),Object.keys(cn).length&&tn.setProperties(cn,!0)}},Qe=function(tn,an,cn){logger$A.trace("display icon and label"),je(tn,cn),Ve(tn,an)},en=function(tn,an){};return this._processKml(Oe,ke,{lineStringStyle:en,polygonStyle:en,pointStyle:en,labelStyle:this.showPointNames_?je:null,iconStyle:Ve,iconLabelStyle:this.showPointNames_?Qe:Ve,extendedData:Ze}),ke}readRootExtensions(e){for(var t={},ke=this.source.nodeName==="#document"?this.source.childNodes[0]:this.source,Oe=ke.childNodes,Ge=0;Ge<Oe.length;Ge++){var Be=Oe[Ge];if(Be.nodeName==="ExtendedData")for(var je=Be.childNodes,Ve=0;Ve<je.length;Ve++){var Ze=je[Ve];if(Ze.nodeName==="Data"){var Qe=Ze.attributes[0];if(Qe&&Qe.nodeName==="name"&&Qe.nodeValue===e){t=JSON.parse(Ze.textContent);break}}}}return t}};window.ol&&window.ol.format&&(window.ol.format.KMLExtended=KML);const NAMESPACE_URIS$3=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],SCHEMA_LOCATION="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",FEATURE_READER={rte:readRte,trk:readTrk,wpt:readWpt},GPX_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeArrayPusher(readRte),trk:makeArrayPusher(readTrk),wpt:makeArrayPusher(readWpt)}),LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeObjectPropertySetter(readString,"linkText"),type:makeObjectPropertySetter(readString,"linkType")}),GPX_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeChildAppender(writeRte),trk:makeChildAppender(writeTrk),wpt:makeChildAppender(writeWpt)});let GPX$1=class extends XMLFeature{constructor(e){super(),e=e||{},this.dataProjection=get$3("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,ke=e.length;t<ke;++t){const Oe=e[t];if(this.readExtensions_){const Ge=Oe.get("extensionsNode_")||null;this.readExtensions_(Oe,Ge)}Oe.set("extensionsNode_",void 0)}}readFeatureFromNode(e,t){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;const ke=FEATURE_READER[e.localName];if(!ke)return null;const Oe=ke(e,[this.getReadOptions(e,t)]);return Oe?(this.handleReadExtensions_([Oe]),Oe):null}readFeaturesFromNode(e,t){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const ke=pushParseAndPop([],GPX_PARSERS,e,[this.getReadOptions(e,t)]);return ke?(this.handleReadExtensions_(ke),ke):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const ke=createElementNS("http://www.topografix.com/GPX/1/1","gpx");return ke.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",XML_SCHEMA_INSTANCE_URI),ke.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION),ke.setAttribute("version","1.1"),ke.setAttribute("creator","OpenLayers"),pushSerializeAndPop({node:ke},GPX_SERIALIZERS,GPX_NODE_FACTORY,e,[t]),ke}};const RTE_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions,type:makeObjectPropertySetter(readString),rtept:parseRtePt}),RTEPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),TRK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),type:makeObjectPropertySetter(readString),extensions:parseExtensions,trkseg:parseTrkSeg}),TRKSEG_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:parseTrkPt}),TRKPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),WPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime),magvar:makeObjectPropertySetter(readDecimal),geoidheight:makeObjectPropertySetter(readDecimal),name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,sym:makeObjectPropertySetter(readString),type:makeObjectPropertySetter(readString),fix:makeObjectPropertySetter(readString),sat:makeObjectPropertySetter(readPositiveInteger),hdop:makeObjectPropertySetter(readDecimal),vdop:makeObjectPropertySetter(readDecimal),pdop:makeObjectPropertySetter(readDecimal),ageofdgpsdata:makeObjectPropertySetter(readDecimal),dgpsid:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions}),LINK_SEQUENCE=["text","type"],LINK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode)}),RTE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","rtept"]),RTE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),rtept:makeArraySerializer(makeChildAppender(writeWptType))}),RTEPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time"]),TRK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","trkseg"]),TRK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),trkseg:makeArraySerializer(makeChildAppender(writeTrkSeg))}),TRKSEG_NODE_FACTORY=makeSimpleNodeFactory("trkpt"),TRKSEG_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:makeChildAppender(writeWptType)}),WPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),WPT_TYPE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeChildAppender(writeDecimalTextNode),time:makeChildAppender(writeDateTimeTextNode),magvar:makeChildAppender(writeDecimalTextNode),geoidheight:makeChildAppender(writeDecimalTextNode),name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),sym:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode),fix:makeChildAppender(writeStringTextNode),sat:makeChildAppender(writeNonNegativeIntegerTextNode),hdop:makeChildAppender(writeDecimalTextNode),vdop:makeChildAppender(writeDecimalTextNode),pdop:makeChildAppender(writeDecimalTextNode),ageofdgpsdata:makeChildAppender(writeDecimalTextNode),dgpsid:makeChildAppender(writeNonNegativeIntegerTextNode)}),GEOMETRY_TYPE_TO_NODENAME={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function GPX_NODE_FACTORY(r,e,t){const ke=r.getGeometry();if(ke){const Oe=GEOMETRY_TYPE_TO_NODENAME[ke.getType()];if(Oe){const Ge=e[e.length-1].node;return createElementNS(Ge.namespaceURI,Oe)}}}function appendCoordinate(r,e,t,ke){return r.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in ke?(r.push(ke.ele),delete ke.ele,e.hasZ=!0):r.push(0),"time"in ke?(r.push(ke.time),delete ke.time,e.hasM=!0):r.push(0),r}function applyLayoutOptions(r,e,t){let ke="XY",Oe=2;if(r.hasZ&&r.hasM?(ke="XYZM",Oe=4):r.hasZ?(ke="XYZ",Oe=3):r.hasM&&(ke="XYM",Oe=3),Oe!==4){for(let Ge=0,Be=e.length/4;Ge<Be;Ge++)e[Ge*Oe]=e[Ge*4],e[Ge*Oe+1]=e[Ge*4+1],r.hasZ&&(e[Ge*Oe+2]=e[Ge*4+2]),r.hasM&&(e[Ge*Oe+2]=e[Ge*4+3]);if(e.length=e.length/4*Oe,t)for(let Ge=0,Be=t.length;Ge<Be;Ge++)t[Ge]=t[Ge]/4*Oe}return ke}function parseLink(r,e){const t=e[e.length-1],ke=r.getAttribute("href");ke!==null&&(t.link=ke),parseNode(LINK_PARSERS,r,e)}function parseExtensions(r,e){const t=e[e.length-1];t.extensionsNode_=r}function parseRtePt(r,e){const t=pushParseAndPop({},RTEPT_PARSERS,r,e);if(t){const ke=e[e.length-1],Oe=ke.flatCoordinates,Ge=ke.layoutOptions;appendCoordinate(Oe,Ge,r,t)}}function parseTrkPt(r,e){const t=pushParseAndPop({},TRKPT_PARSERS,r,e);if(t){const ke=e[e.length-1],Oe=ke.flatCoordinates,Ge=ke.layoutOptions;appendCoordinate(Oe,Ge,r,t)}}function parseTrkSeg(r,e){const t=e[e.length-1];parseNode(TRKSEG_PARSERS,r,e);const ke=t.flatCoordinates;t.ends.push(ke.length)}function readRte(r,e){const t=e[0],ke=pushParseAndPop({flatCoordinates:[],layoutOptions:{}},RTE_PARSERS,r,e);if(!ke)return;const Oe=ke.flatCoordinates;delete ke.flatCoordinates;const Ge=ke.layoutOptions;delete ke.layoutOptions;const Be=applyLayoutOptions(Ge,Oe),je=new LineString(Oe,Be);transformGeometryWithOptions(je,!1,t);const Ve=new Feature(je);return Ve.setProperties(ke,!0),Ve}function readTrk(r,e){const t=e[0],ke=pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},TRK_PARSERS,r,e);if(!ke)return;const Oe=ke.flatCoordinates;delete ke.flatCoordinates;const Ge=ke.ends;delete ke.ends;const Be=ke.layoutOptions;delete ke.layoutOptions;const je=applyLayoutOptions(Be,Oe,Ge),Ve=new MultiLineString(Oe,je,Ge);transformGeometryWithOptions(Ve,!1,t);const Ze=new Feature(Ve);return Ze.setProperties(ke,!0),Ze}function readWpt(r,e){const t=e[0],ke=pushParseAndPop({},WPT_PARSERS,r,e);if(!ke)return;const Oe={},Ge=appendCoordinate([],Oe,r,ke),Be=applyLayoutOptions(Oe,Ge),je=new Point$1(Ge,Be);transformGeometryWithOptions(je,!1,t);const Ve=new Feature(je);return Ve.setProperties(ke,!0),Ve}function writeLink(r,e,t){r.setAttribute("href",e);const Oe=t[t.length-1].properties,Ge=[Oe.linkText,Oe.linkType];pushSerializeAndPop({node:r},LINK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ge,t,LINK_SEQUENCE)}function writeWptType(r,e,t){const ke=t[t.length-1],Ge=ke.node.namespaceURI,Be=ke.properties;switch(r.setAttributeNS(null,"lat",String(e[1])),r.setAttributeNS(null,"lon",String(e[0])),ke.geometryLayout){case"XYZM":e[3]!==0&&(Be.time=e[3]);case"XYZ":e[2]!==0&&(Be.ele=e[2]);break;case"XYM":e[2]!==0&&(Be.time=e[2]);break}const Ve=r.nodeName=="rtept"?RTEPT_TYPE_SEQUENCE[Ge]:WPT_TYPE_SEQUENCE[Ge],Ze=makeSequence(Be,Ve);pushSerializeAndPop({node:r,properties:Be},WPT_TYPE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ze,t,Ve)}function writeRte(r,e,t){const ke=t[0],Oe=e.getProperties(),Ge={node:r};Ge.properties=Oe;const Be=e.getGeometry();if(Be.getType()=="LineString"){const Qe=transformGeometryWithOptions(Be,!0,ke);Ge.geometryLayout=Qe.getLayout(),Oe.rtept=Qe.getCoordinates()}const je=t[t.length-1].node,Ve=RTE_SEQUENCE[je.namespaceURI],Ze=makeSequence(Oe,Ve);pushSerializeAndPop(Ge,RTE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ze,t,Ve)}function writeTrk(r,e,t){const ke=t[0],Oe=e.getProperties(),Ge={node:r};Ge.properties=Oe;const Be=e.getGeometry();if(Be.getType()=="MultiLineString"){const Qe=transformGeometryWithOptions(Be,!0,ke);Oe.trkseg=Qe.getLineStrings()}const je=t[t.length-1].node,Ve=TRK_SEQUENCE[je.namespaceURI],Ze=makeSequence(Oe,Ve);pushSerializeAndPop(Ge,TRK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ze,t,Ve)}function writeTrkSeg(r,e,t){const ke={node:r};ke.geometryLayout=e.getLayout(),ke.properties={},pushSerializeAndPop(ke,TRKSEG_SERIALIZERS,TRKSEG_NODE_FACTORY,e.getCoordinates(),t)}function writeWpt(r,e,t){const ke=t[0],Oe=t[t.length-1];Oe.properties=e.getProperties();const Ge=e.getGeometry();if(Ge.getType()=="Point"){const Be=transformGeometryWithOptions(Ge,!0,ke);Oe.geometryLayout=Be.getLayout(),writeWptType(r,Be.getCoordinates(),t)}}var GPX=class Df extends GPX$1{constructor(e){if(super(e),!(this instanceof Df))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(this.options=e||{},this.options.readExtensions&&typeof this.options.readExtensions=="function"){var t=this.options.readExtensions;this.options.readExtensions=function(ke,Oe){this.readExtensions(ke,Oe),t.call(this,ke,Oe)}}else this.options.readExtensions=this.readExtensions;return(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var ke=super.readFeatures(e,t);typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var Oe=this;return ke.forEach(function(Ge,Be,je){Ge.setId(Be+1);var Ve=Ge.getProperties().desc;Ve&&Ge.setProperties({description:Ve});var Ze=Ge.getStyleFunction();if(!Ze){var Qe=Styling.defineStyleFunctionByDefault(Oe.options.defaultStyle);Qe&&Ge.setStyle(Qe)}}),ke}writeFeatures(e,t){if(e.forEach(function(Ve,Ze,Qe){var en=Ve.getProperties().description;en&&Ve.setProperties({desc:en}),Styling.definePropertiesFromStyle(Ve);var tn=Ve.getGeometry().getType();if(tn==="Polygon"){var an=Ve.clone();an.set("type",tn),an.setGeometry(new LineString(Ve.getGeometry().getCoordinates())),e.push(an),Qe.splice(Ze,1)}else if(tn==="MultiPolygon"){var cn=Ve.clone();cn.set("type",tn),cn.setGeometry(new MultiLineString(Ve.getGeometry().getCoordinates())),e.push(cn),Qe.splice(Ze,1)}}),this.options.orderBy!==void 0){var ke=this.options.orderBy;if(ke){var Oe=function(Ve,Ze){var Qe=Ve.get(ke)||0,en=Ze.get(ke)||0;return Qe.toString().localeCompare(en.toString(),void 0,{numeric:!0})};e.sort(Oe)}}var Ge=super.writeFeaturesNode(e,t);if(Ge===null)return null;this.options.hasOwnProperty("extensions")&&this.writeRootExtensions_(Ge,this.options.extensions),this.processExtensions_(Ge,e,{extensions:this.writeExtensions_});var Be=Parser$1.toString(Ge);if(!Be)return null;var je=Parser$1.format(Be);return je===""?null:je}readExtensions(e,t){var ke=t;if(!t){var Oe=e.getProperties();for(const Ve in Oe)if(Object.hasOwnProperty.call(Oe,Ve)){const Ze=Oe[Ve];if(Ze instanceof Node){ke=Ze;break}}}if(!ke){console.warn("node not found !");return}for(var Ge=0;Ge<ke.childNodes.length;Ge++){var Be=ke.childNodes[Ge];Be.nodeType===1&&e.set(Be.nodeName,Be.textContent)}Styling.APPLY_CONVERT_GEOM_GPX=!0;var je=Styling.defineStyleFromProperties(e);je&&e.setStyle(je)}readRootExtensions(e){for(var t={},ke=this.source.childNodes[0],Oe=ke.childNodes,Ge=0;Ge<Oe.length;Ge++){var Be=Oe[Ge];if(Be.nodeName==="metadata")for(var je=Be.childNodes,Ve=0;Ve<je.length;Ve++){var Ze=je[Ve];if(Ze.nodeName==="extensions")for(var Qe=Ze.childNodes,en=0;en<Qe.length;en++){var tn=Qe[en];if(tn.nodeName==="data"){var an=tn.attributes[0];if(an&&an.nodeName==="name"&&an.nodeValue===e){t=JSON.parse(tn.textContent);break}}}}}return t}writeRootExtensions_(e,t,ke){var Oe=document.createElement("metadata"),Ge=document.createElement("extensions");function Be(Qe,en){for(const pn in en)if(Object.hasOwnProperty.call(en,pn)){var tn=en[pn]||"",an=document.createElement(pn);if(typeof tn=="string"||typeof tn=="number")an.innerHTML=tn,Qe.appendChild(an);else if(tn instanceof Array){an.setAttribute("type","array"),an.setAttribute("index",tn.length);for(let mn=0;mn<tn.length;mn++){var cn=tn[mn]||"",dn=document.createElement("value");if(typeof cn=="string"||typeof cn=="number")dn.innerHTML=cn,an.appendChild(dn);else if(cn instanceof Array){dn.setAttribute("type","array"),dn.setAttribute("index",cn.length);for(let yn=0;yn<cn.length;yn++){var hn=cn[yn]||"",fn=document.createElement("value");(typeof hn=="string"||typeof hn=="number")&&(fn.innerHTML=hn,dn.appendChild(fn))}an.appendChild(dn)}else cn instanceof Object&&an.appendChild(Be(dn,cn))}Qe.appendChild(an)}else tn instanceof Object&&Qe.appendChild(Be(an,tn))}return Qe}if(ke)Be(Ge,t);else for(const Qe in t)if(Object.hasOwnProperty.call(t,Qe)){const en=t[Qe];var je=document.createElement("data");je.setAttribute("name",Qe);var Ve=document.createTextNode(JSON.stringify(en));je.appendChild(Ve),Ge.appendChild(je)}Oe.appendChild(Ge);var Ze=e.firstChild;e.insertBefore(Oe,Ze)}writeExtensions_(e,t){var ke=document.createElementNS(t.parentNode.namespaceURI,"extensions");Styling.getListTags().forEach(Oe=>{if(e.get(Oe)){var Ge=document.createElementNS(t.parentNode.namespaceURI,Oe);Ge.innerHTML=e.get(Oe),ke.appendChild(Ge)}}),t.appendChild(ke)}processExtensions_(e,t,ke){for(var Oe=-1,Ge=e.childNodes,Be=0;Be<Ge.length;Be++){var je=Ge[Be];switch(je.nodeName){case"wpt":case"rte":case"trk":Oe++;var Ve=t[Oe],Ze=Ve.getStyle();if(Ze){var Qe=ke.extensions;Qe&&typeof Qe=="function"&&Qe(Ve,je)}break;case"metadata":break;default:console.warn("nodename unknown :",je.nodeName);break}}}};window.ol&&window.ol.format&&(window.ol.format.GPXExtended=GPX);class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return abstract()}readFeaturesFromObject(e,t){return abstract()}readGeometry(e,t){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return abstract()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return abstract()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return abstract()}}function getObject(r){if(typeof r=="string"){const e=JSON.parse(r);return e||null}return r!==null?r:null}let GeoJSON$1=class extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let ke=null;e.type==="Feature"?ke=e:ke={type:"Feature",geometry:e,properties:null};const Oe=readGeometryInternal(ke.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:Oe,id:ke.id,properties:ke.properties},t);const Ge=new Feature;return this.geometryName_?Ge.setGeometryName(this.geometryName_):this.extractGeometryName_&&"geometry_name"in ke!==void 0&&Ge.setGeometryName(ke.geometry_name),Ge.setGeometry(createGeometry(Oe,t)),"id"in ke&&Ge.setId(ke.id),ke.properties&&Ge.setProperties(ke.properties,!0),Ge}readFeaturesFromObject(e,t){const ke=e;let Oe=null;if(ke.type==="FeatureCollection"){const Ge=e;Oe=[];const Be=Ge.features;for(let je=0,Ve=Be.length;je<Ve;++je){const Ze=this.readFeatureFromObject(Be[je],t);Ze&&Oe.push(Ze)}}else Oe=[this.readFeatureFromObject(e,t)];return Oe.flat()}readGeometryFromObject(e,t){return readGeometry(e,t)}readProjectionFromObject(e){const t=e.crs;let ke;if(t)if(t.type=="name")ke=get$3(t.properties.name);else if(t.type==="EPSG")ke=get$3("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else ke=this.dataProjection;return ke}writeFeatureObject(e,t){t=this.adaptOptions(t);const ke={type:"Feature",geometry:null,properties:null},Oe=e.getId();if(Oe!==void 0&&(ke.id=Oe),!e.hasProperties())return ke;const Ge=e.getProperties(),Be=e.getGeometry();return Be&&(ke.geometry=writeGeometry(Be,t),delete Ge[e.getGeometryName()]),isEmpty$1(Ge)||(ke.properties=Ge),ke}writeFeaturesObject(e,t){t=this.adaptOptions(t);const ke=[];for(let Oe=0,Ge=e.length;Oe<Ge;++Oe)ke.push(this.writeFeatureObject(e[Oe],t));return{type:"FeatureCollection",features:ke}}writeGeometryObject(e,t){return writeGeometry(e,this.adaptOptions(t))}};function readGeometryInternal(r,e){if(!r)return null;let t;switch(r.type){case"Point":{t=readPointGeometry(r);break}case"LineString":{t=readLineStringGeometry(r);break}case"Polygon":{t=readPolygonGeometry(r);break}case"MultiPoint":{t=readMultiPointGeometry(r);break}case"MultiLineString":{t=readMultiLineStringGeometry(r);break}case"MultiPolygon":{t=readMultiPolygonGeometry(r);break}case"GeometryCollection":{t=readGeometryCollectionGeometry(r);break}default:throw new Error("Unsupported GeoJSON type: "+r.type)}return t}function readGeometry(r,e){const t=readGeometryInternal(r);return createGeometry(t,e)}function readGeometryCollectionGeometry(r,e){return r.geometries.map(function(ke){return readGeometryInternal(ke)})}function readPointGeometry(r){const e=r.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(r){const e=r.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:getLayoutForStride(e[0].length)}}function readMultiLineStringGeometry(r){const e=r.coordinates,t=e[0][0].length,ke=[],Oe=deflateCoordinatesArray(ke,0,e,t);return{type:"MultiLineString",flatCoordinates:ke,ends:Oe,layout:getLayoutForStride(t)}}function readMultiPointGeometry(r){const e=r.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(e[0].length)}}function readMultiPolygonGeometry(r){const e=r.coordinates,t=[],ke=e[0][0][0].length,Oe=deflateMultiCoordinatesArray(t,0,e,ke);return{type:"MultiPolygon",flatCoordinates:t,ends:Oe,layout:getLayoutForStride(ke)}}function readPolygonGeometry(r){const e=r.coordinates,t=[],ke=e[0][0].length,Oe=deflateCoordinatesArray(t,0,e,ke);return{type:"Polygon",flatCoordinates:t,ends:Oe,layout:getLayoutForStride(ke)}}function writeGeometry(r,e){r=transformGeometryWithOptions(r,!0,e);const t=r.getType();let ke;switch(t){case"Point":{ke=writePointGeometry(r);break}case"LineString":{ke=writeLineStringGeometry(r);break}case"Polygon":{ke=writePolygonGeometry(r,e);break}case"MultiPoint":{ke=writeMultiPointGeometry(r);break}case"MultiLineString":{ke=writeMultiLineStringGeometry(r);break}case"MultiPolygon":{ke=writeMultiPolygonGeometry(r,e);break}case"GeometryCollection":{ke=writeGeometryCollectionGeometry(r,e);break}case"Circle":{ke={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return ke}function writeGeometryCollectionGeometry(r,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:r.getGeometriesArray().map(function(ke){return writeGeometry(ke,e)})}}function writeLineStringGeometry(r,e){return{type:"LineString",coordinates:r.getCoordinates()}}function writeMultiLineStringGeometry(r,e){return{type:"MultiLineString",coordinates:r.getCoordinates()}}function writeMultiPointGeometry(r,e){return{type:"MultiPoint",coordinates:r.getCoordinates()}}function writeMultiPolygonGeometry(r,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:r.getCoordinates(t)}}function writePointGeometry(r,e){return{type:"Point",coordinates:r.getCoordinates()}}function writePolygonGeometry(r,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:r.getCoordinates(t)}}var GeoJSON=class Gf extends GeoJSON$1{constructor(e){if(super(e),!(this instanceof Gf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.options=e||{},(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var ke=super.readFeatures(e,t);return typeof e=="string"?this.source=JSON.parse(e):e!==null&&(this.source=e),ke.forEach(Oe=>{var Ge=Oe.getStyleFunction();if(Ge){var Be=Ge.call(this,Oe,0);Be&&Be.length!==0&&Oe.setStyle(Be[0])}else{var je=Styling.defineStyleFromProperties(Oe);if(je)Oe.setStyle(je);else{var Ve=Styling.defineStyleFunctionByDefault(this.options.defaultStyle);Ve&&(Oe.setStyle(Ve),Styling.definePropertiesFromStyle(Oe))}}}),ke}writeFeatures(e,t){e.forEach(function(Oe){Styling.definePropertiesFromStyle(Oe)});var ke=this.writeFeaturesObject(e,t);return this.options.hasOwnProperty("extensions")&&Object.assign(ke,this.options.extensions),JSON.stringify(ke)}readRootExtensions(e){return this.source[e]}};window.ol&&window.ol.format&&(window.ol.format.GeoJSONExtended=GeoJSON);var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,t,ke,Oe){var Ge=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,Be=this.tileGrid,je=this.tileGrid.getTileCoordForCoordAndResolution(e,t),Ve=function(mn,yn,Cn){var wn=[0,0,0],bn=createEmpty(),Sn=mn[1],Mn=mn[2],Tn=yn.getTileCoordExtent(mn),En=Cn.getExtent();if(En!=null&&Cn.isGlobal()){var An=Math.ceil(getWidth(En)/getWidth(Tn));Sn=Sn%An,wn[0]=mn[0],wn[1]=Sn,wn[2]=mn[2],Tn=yn.getTileCoordExtent(wn,bn)}return intersects$1(Tn,En)?[mn[0],Sn,Mn]:null},Ze=Be.getTileCoordExtent(je),Qe=Ve(je,Be,ke);if(!(Be.getResolutions().length<=je[0])){var en=Be.getResolution(je[0]),tn=Be.getMatrixIds()[je[0]],an={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:Qe[1],TILEROW:Qe[2],TILEMATRIX:tn,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper.assign(an,Oe);var cn=Math.floor((e[0]-Ze[0])/(en/Ge)),dn=Math.floor((Ze[3]-e[1])/(en/Ge)),hn=Be.getTileSize(je[0]);cn=Math.min(cn,(hn[0]|hn)-1),dn=Math.max(dn,0),an.I=cn,an.J=dn;var fn=this.urls[0],pn=Gp$1.Helper.normalyzeUrl(fn,an);return pn}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(r,e){var t={};switch(e){case"EPSG:2154":t={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:t={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var ke=r*28e-5;for(var Oe in t)if(t.hasOwnProperty(Oe)&&t[Oe]<=ke)return Oe=parseInt(Oe,10),Oe;return 0},getAttributions:function(r){var e=r.zoom,t=[];if(r.originators!=null&&r.visibility)for(var ke,Oe=0,Ge=r.originators.length;Oe<Ge;Oe++){ke=!0;for(var Be=r.originators[Oe],je=r.originators[Oe].constraints||[],Ve=0,Ze=je.length;Ve<Ze;Ve++){var Qe=je[Ve];ke=!0;var en=this.getZoomLevelFromScaleDenominator(Qe.maxScaleDenominator,r.crs),tn=this.getZoomLevelFromScaleDenominator(Qe.minScaleDenominator,r.crs)||21;en&&en>e&&(ke=!1),ke&&tn&&tn<e&&(ke=!1);var an=Qe.bbox;if(ke&&an){ke=!1;var cn=r.extent;if(cn){var dn=[an.top,an.left,an.bottom,an.right];if(this.intersects(cn,dn)){ke=!0;break}}}}if(ke){var hn=Be.logo,fn=Be.url,pn=Be.name?Be.name:"",mn=Be.attribution,yn=document.createElement("div");yn.className="gp-control-attribution";var Cn=null;Cn=document.createElement("a"),Cn.className="gp-control-attribution-link",Cn.target="_blank",yn.appendChild(Cn),fn&&(Cn.href=fn);var wn=!!hn,bn=null;wn?(bn=document.createElement("img"),Cn?(bn.className="gp-control-attribution-image",Cn.appendChild(bn)):(bn.className="",yn.appendChild(bn)),bn.src=hn,bn.title=mn||pn,bn.style.height="30px",bn.style.width="30px"):pn?Cn.textContent=pn:mn?Cn.textContent=mn:fn?Cn.textContent=fn:Cn.textContent="",t.push(yn.innerHTML+" ")}}return t},intersects:function(r,e){var t=r[1]<=e[3]&&e[1]<=r[3],ke=r[2]<=e[0]&&e[2]<=r[0];return t&&ke}},Config={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var r=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return r.Gp&&r.Gp.Config&&r.Gp.Config.layers&&Object.keys(r.Gp.Config.layers).length!==0?(this.configuration=r.Gp.Config,!0):!1}};LoggerByDefault.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,ke=t?t.params:null,Oe=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ge=Config.configuration.getLayerId(e.layer,"WMTS");if(!Ge)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Ge),!t)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");Oe=Config.configuration.getLayerKey(Ge)[0],ke=Config.configuration.getLayerParams(e.layer,"WMTS")}var Be=e.ssl===!1?"http://":"https://",je={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(ke.url.includes("/private/")){var Ve=e.apiKey||Oe;if(!Ve)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");je.apikey=Ve}var Ze={url:Gp$1.Helper.normalyzeUrl(ke.url.replace(/(http|https):\/\//,Be),je,!1),version:ke.version,style:ke.styles,format:ke.format,projection:ke.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(ke.minScale),layer:e.layer,matrixSet:ke.TMSLink,tileGrid:new WMTSTileGrid({resolutions:ke.nativeResolutions,matrixIds:ke.matrixIds,origin:[Object.values(ke.tileMatrices)[0].topLeftCorner.x,Object.values(ke.tileMatrices)[0].topLeftCorner.y]}),crossOrigin:"anonymous"};return Helper.mergeParams(Ze,e.olParams),e.olParams&&!ke.originators&&(ke.originators=e.olParams.attributions),super(Ze),this._originators=ke.originators,this._legends=e.legends||ke.legends,this._metadata=e.metadata||ke.metadata,this._description=e.description||ke.description,this._title=e.title||ke.title,this._quicklookUrl=e.quicklookUrl||ke.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);LoggerByDefault.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,ke=t?t.params:null,Oe=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ge=Config.configuration.getLayerId(e.layer,"WMS");if(!Ge)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Ge),!t)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");Oe=Config.configuration.getLayerKey(Ge)[0],ke=Config.configuration.getLayerParams(e.layer,"WMS")}var Be=e.ssl===!1?"http://":"https://",je={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(ke.url.includes("/private/")){var Ve=e.apiKey||Oe;if(!Ve)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");je.apikey=Ve}var Ze={url:Gp$1.Helper.normalyzeUrl(ke.url.replace(/(http|https):\/\//,Be),je,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:ke.version,STYLES:ke.styles,FORMAT:ke.format},crossOrigin:"anonymous"};return Helper.mergeParams(Ze,e.olParams),e.olParams&&!ke.originators&&(ke.originators=e.olParams.attributions),super(Ze),this._originators=ke.originators,this._legends=e.legends||ke.legends,this._metadata=e.metadata||ke.metadata,this._title=e.title||ke.title,this._description=e.description||ke.description,this._quicklookUrl=e.quicklookUrl||ke.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);LoggerByDefault.getLogger("sourcewfs");var SourceWFS=class extends VectorSource{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,ke=t?t.params:null,Oe=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ge=Config.configuration.getLayerId(e.layer,"WFS");if(!Ge)throw new Error(`ERROR : WFS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Ge),!t)throw new Error("ERROR : WFS Layer configuration cannot be found in Geoportal.");Oe=Config.configuration.getLayerKey(Ge)[0],ke=Config.configuration.getLayerParams(e.layer,"WFS")}var Be=e.ssl===!1?"http://":"https://",je={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(ke.url.includes("/private/")){var Ve=e.apiKey||Oe;if(!Ve)throw new Error("ERROR : WFS Layer apiKey cannot be found in Geoportal Configuration.");je.apikey=Ve}var Ze=(en,tn,an,cn)=>{const dn=new XMLHttpRequest;dn.open("GET",tn);const hn=function(){en.removeLoadedExtent(extent),cn()};dn.onerror=hn,dn.onload=function(){if(dn.status==200){var fn=JSON.parse(dn.responseText);const pn=en.getFormat().readFeatures(fn);if(en.addFeatures(pn),an(pn),fn.links)for(let mn=0;mn<fn.links.length;mn++){const yn=fn.links[mn];yn.rel==="next"&&Ze(en,yn.href,an,cn)}}else hn()},dn.send()},Qe={format:new GeoJSON$1,loader:function(en,tn,an,cn,dn){var hn=this;const fn=e.maxFeatures,pn=e.layer,mn=an.getCode(),yn=Gp.Helper.normalyzeUrl(ke.url.replace(/(http|https):\/\//,Be),je,!1)+"&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typename="+pn+"&outputFormat=application/json&srsname="+mn+"&bbox="+en.join(",")+","+mn+"&maxFeatures="+fn+"&count="+fn+"&startIndex=0";Ze(hn,yn,cn,dn)},strategy:tile(createXYZ({minZoom:e.olParams.minZoom||15,maxZoom:e.olParams.maxZoom||21,tileSize:512})),crossOrigin:"anonymous"};return Helper.mergeParams(Qe,e.olParams),e.olParams&&!ke.originators&&(ke.originators=e.olParams.attributions),super(Qe),this._originators=ke.originators,this._legends=e.legends||ke.legends,this._metadata=e.metadata||ke.metadata,this._title=e.title||ke.title,this._description=e.description||ke.description,this._quicklookUrl=e.quicklookUrl||ke.quicklookUrl,this.name=e.layer,this.service="WFS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWFS=SourceWFS);const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer$1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=createEmpty(),this.tmpTileRange_=new TileRange(0,0,0,0)}isDrawableTile(e){const t=this.getLayer(),ke=e.getState(),Oe=t.getUseInterimTilesOnError();return ke==TileState.LOADED||ke==TileState.EMPTY||ke==TileState.ERROR&&!Oe}getTile(e,t,ke,Oe){const Ge=Oe.pixelRatio,Be=Oe.viewState.projection,je=this.getLayer();let Ze=je.getSource().getTile(e,t,ke,Ge,Be);return Ze.getState()==TileState.ERROR&&je.getUseInterimTilesOnError()&&je.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(Ze)||(Ze=Ze.getInterimTile()),Ze}getData(e){const t=this.frameState;if(!t)return null;const ke=this.getLayer(),Oe=apply(t.pixelToCoordinateTransform,e.slice()),Ge=ke.getExtent();if(Ge&&!containsCoordinate(Ge,Oe))return null;const Be=t.pixelRatio,je=t.viewState.projection,Ve=t.viewState,Ze=ke.getRenderSource(),Qe=Ze.getTileGridForProjection(Ve.projection),en=Ze.getTilePixelRatio(t.pixelRatio);for(let tn=Qe.getZForResolution(Ve.resolution);tn>=Qe.getMinZoom();--tn){const an=Qe.getTileCoordForCoordAndZ(Oe,tn),cn=Ze.getTile(tn,an[1],an[2],Be,je);if(!(cn instanceof ImageTile||cn instanceof ReprojTile)||cn instanceof ReprojTile&&cn.getState()===TileState.EMPTY)return null;if(cn.getState()!==TileState.LOADED)continue;const dn=Qe.getOrigin(tn),hn=toSize(Qe.getTileSize(tn)),fn=Qe.getResolution(tn),pn=Math.floor(en*((Oe[0]-dn[0])/fn-an[1]*hn[0])),mn=Math.floor(en*((dn[1]-Oe[1])/fn-an[2]*hn[1])),yn=Math.round(en*Ze.getGutterForProjection(Ve.projection));return this.getImageData(cn.getImage(),pn+yn,mn+yn)}return null}loadedTileCallback(e,t,ke){return this.isDrawableTile(ke)?super.loadedTileCallback(e,t,ke):!1}prepareFrame(e){return!!this.getLayer().getSource()}renderFrame(e,t){const ke=e.layerStatesArray[e.layerIndex],Oe=e.viewState,Ge=Oe.projection,Be=Oe.resolution,je=Oe.center,Ve=Oe.rotation,Ze=e.pixelRatio,Qe=this.getLayer(),en=Qe.getSource(),tn=en.getRevision(),an=en.getTileGridForProjection(Ge),cn=an.getZForResolution(Be,en.zDirection),dn=an.getResolution(cn);let hn=e.extent;const fn=e.viewState.resolution,pn=en.getTilePixelRatio(Ze),mn=Math.round(getWidth(hn)/fn*Ze),yn=Math.round(getHeight(hn)/fn*Ze),Cn=ke.extent&&fromUserExtent(ke.extent);Cn&&(hn=getIntersection(hn,fromUserExtent(ke.extent)));const wn=dn*mn/2/pn,bn=dn*yn/2/pn,Sn=[je[0]-wn,je[1]-bn,je[0]+wn,je[1]+bn],Mn=an.getTileRangeForExtentAndZ(hn,cn),Tn={};Tn[cn]={};const En=this.createLoadedTileFinder(en,Ge,Tn),An=this.tmpExtent,Ln=this.tmpTileRange_;this.newTiles_=!1;const Rn=Ve?getRotatedViewport(Oe.center,fn,Ve,e.size):void 0;for(let qn=Mn.minX;qn<=Mn.maxX;++qn)for(let $n=Mn.minY;$n<=Mn.maxY;++$n){if(Ve&&!an.tileCoordIntersectsViewport([cn,qn,$n],Rn))continue;const Ai=this.getTile(cn,qn,$n,e);if(this.isDrawableTile(Ai)){const Ii=getUid(this);if(Ai.getState()==TileState.LOADED){Tn[cn][Ai.tileCoord.toString()]=Ai;let Pi=Ai.inTransition(Ii);Pi&&ke.opacity!==1&&(Ai.endTransition(Ii),Pi=!1),!this.newTiles_&&(Pi||!this.renderedTiles.includes(Ai))&&(this.newTiles_=!0)}if(Ai.getAlpha(Ii,e.time)===1)continue}const Ti=an.getTileCoordChildTileRange(Ai.tileCoord,Ln,An);let Kn=!1;Ti&&(Kn=En(cn+1,Ti)),Kn||an.forEachTileCoordParentTileRange(Ai.tileCoord,En,Ln,An)}const Gn=dn/Be*Ze/pn;compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/Ze,1/Ze,Ve,-mn/2,-yn/2);const Nn=toString$3(this.pixelTransform);this.useContainer(t,Nn,this.getBackground(e));const jn=this.context,Dn=jn.canvas;makeInverse(this.inversePixelTransform,this.pixelTransform),compose(this.tempTransform,mn/2,yn/2,Gn,Gn,0,-mn/2,-yn/2),Dn.width!=mn||Dn.height!=yn?(Dn.width=mn,Dn.height=yn):this.containerReused||jn.clearRect(0,0,mn,yn),Cn&&this.clipUnrotated(jn,e,Cn),en.getInterpolate()||(jn.imageSmoothingEnabled=!1),this.preRender(jn,e),this.renderedTiles.length=0;let Ci=Object.keys(Tn).map(Number);Ci.sort(ascending);let Jn,Ki,xn;ke.opacity===1&&(!this.containerReused||en.getOpaque(e.viewState.projection))?Ci=Ci.reverse():(Jn=[],Ki=[]);for(let qn=Ci.length-1;qn>=0;--qn){const $n=Ci[qn],Ai=en.getTilePixelSize($n,Ze,Ge),Kn=an.getResolution($n)/dn,Ii=Ai[0]*Kn*Gn,Pi=Ai[1]*Kn*Gn,Mi=an.getTileCoordForCoordAndZ(getTopLeft(Sn),$n),tr=an.getTileCoordExtent(Mi),Br=apply(this.tempTransform,[pn*(tr[0]-Sn[0])/dn,pn*(Sn[3]-tr[3])/dn]),Un=pn*en.getGutterForProjection(Ge),Qn=Tn[$n];for(const Hn in Qn){const Fn=Qn[Hn],Hi=Fn.tileCoord,zi=Mi[1]-Hi[1],Oi=Math.round(Br[0]-(zi-1)*Ii),Vi=Mi[2]-Hi[2],Bi=Math.round(Br[1]-(Vi-1)*Pi),Fi=Math.round(Br[0]-zi*Ii),Si=Math.round(Br[1]-Vi*Pi),Li=Oi-Fi,Ri=Bi-Si,$i=cn===$n,er=$i&&Fn.getAlpha(getUid(this),e.time)!==1;let ar=!1;if(!er)if(Jn){xn=[Fi,Si,Fi+Li,Si,Fi+Li,Si+Ri,Fi,Si+Ri];for(let Rr=0,Gs=Jn.length;Rr<Gs;++Rr)if(cn!==$n&&$n<Ki[Rr]){const Pr=Jn[Rr];intersects$1([Fi,Si,Fi+Li,Si+Ri],[Pr[0],Pr[3],Pr[4],Pr[7]])&&(ar||(jn.save(),ar=!0),jn.beginPath(),jn.moveTo(xn[0],xn[1]),jn.lineTo(xn[2],xn[3]),jn.lineTo(xn[4],xn[5]),jn.lineTo(xn[6],xn[7]),jn.moveTo(Pr[6],Pr[7]),jn.lineTo(Pr[4],Pr[5]),jn.lineTo(Pr[2],Pr[3]),jn.lineTo(Pr[0],Pr[1]),jn.clip())}Jn.push(xn),Ki.push($n)}else jn.clearRect(Fi,Si,Li,Ri);this.drawTileImage(Fn,e,Fi,Si,Li,Ri,Un,$i),Jn&&!er?(ar&&jn.restore(),this.renderedTiles.unshift(Fn)):this.renderedTiles.push(Fn),this.updateUsedTiles(e.usedTiles,en,Fn)}}return this.renderedRevision=tn,this.renderedResolution=dn,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,Sn),this.renderedExtent_=Sn,this.renderedPixelRatio=Ze,this.renderedProjection=Ge,this.manageTilePyramid(e,en,an,Ze,Ge,hn,cn,Qe.getPreload()),this.scheduleExpireCache(e,en),this.postRender(jn,e),ke.extent&&jn.restore(),jn.imageSmoothingEnabled=!0,Nn!==Dn.style.transform&&(Dn.style.transform=Nn),this.container}drawTileImage(e,t,ke,Oe,Ge,Be,je,Ve){const Ze=this.getTileImage(e);if(!Ze)return;const Qe=getUid(this),en=t.layerStatesArray[t.layerIndex],tn=en.opacity*(Ve?e.getAlpha(Qe,t.time):1),an=tn!==this.context.globalAlpha;an&&(this.context.save(),this.context.globalAlpha=tn),this.context.drawImage(Ze,je,je,Ze.width-2*je,Ze.height-2*je,ke,Oe,Ge,Be),an&&this.context.restore(),tn!==en.opacity?t.animate=!0:Ve&&e.endTransition(Qe)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}scheduleExpireCache(e,t){if(t.canExpireCache()){const ke=(function(Oe,Ge,Be){const je=getUid(Oe);je in Be.usedTiles&&Oe.expireCache(Be.viewState.projection,Be.usedTiles[je])}).bind(null,t);e.postRenderFunctions.push(ke)}}updateUsedTiles(e,t,ke){const Oe=getUid(t);Oe in e||(e[Oe]={}),e[Oe][ke.getKey()]=!0}manageTilePyramid(e,t,ke,Oe,Ge,Be,je,Ve,Ze){const Qe=getUid(t);Qe in e.wantedTiles||(e.wantedTiles[Qe]={});const en=e.wantedTiles[Qe],tn=e.tileQueue,an=ke.getMinZoom(),cn=e.viewState.rotation,dn=cn?getRotatedViewport(e.viewState.center,e.viewState.resolution,cn,e.size):void 0;let hn=0,fn,pn,mn,yn,Cn,wn;for(wn=an;wn<=je;++wn)for(pn=ke.getTileRangeForExtentAndZ(Be,wn,pn),mn=ke.getResolution(wn),yn=pn.minX;yn<=pn.maxX;++yn)for(Cn=pn.minY;Cn<=pn.maxY;++Cn)cn&&!ke.tileCoordIntersectsViewport([wn,yn,Cn],dn)||(je-wn<=Ve?(++hn,fn=t.getTile(wn,yn,Cn,Oe,Ge),fn.getState()==TileState.IDLE&&(en[fn.getKey()]=!0,tn.isKeyQueued(fn.getKey())||tn.enqueue([fn,Qe,ke.getTileCoordCenter(fn.tileCoord),mn])),Ze!==void 0&&Ze(fn)):t.useTile(wn,yn,Cn,Ge));t.updateCacheSize(hn,Ge)}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this)}}var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var ke=Config.configuration.getLayerId(e.layer,"WMTS");if(t=Config.configuration.getLayerConf(ke),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Oe;e.olParams&&e.olParams.sourceParams&&(Oe=e.olParams.sourceParams);var Ge=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:Oe}),Be={source:Ge};if(Ge.getLayer()!==void 0&&t.globalConstrainWFSts&&t.globalConstraints.projection){var je;typeof t.globalConstraints.projection=="string"&&(je=get$3(t.globalConstraints.projection)),je&&je.getUnits()&&(je.getUnits()==="m"?(Be.minResolution=(t.globalConstraints.minScale-1)*28e-5,Be.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):je.getUnits()==="degrees"&&(Be.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),Be.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(Be,e.olParams),super(Be),this.name=e.layer,this.service="WMTS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var ke=Config.configuration.getLayerId(e.layer,"WMS");if(t=Config.configuration.getLayerConf(ke),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Oe;e.olParams&&e.olParams.sourceParams&&(Oe=e.olParams.sourceParams);var Ge=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:Oe}),Be={source:Ge};if(Ge.getParams().LAYERS!==void 0&&Oe&&Oe.projection){var je=[t.globalConstraints.extent.left,t.globalConstraints.extent.bottom,t.globalConstraints.extent.right,t.globalConstraints.extent.top];Be.extent=transformExtent(je,"EPSG:4326",Oe.projection);var Ve;typeof Oe.projection=="string"?Ve=get$3(Oe.projection):typeof Oe.projection=="object"&&Oe.projection.getCode()&&(Ve=get$3(Oe.projection.getCode())),Ve&&Ve.getUnits()&&(Ve.getUnits()==="m"?(Be.minResolution=(t.globalConstraints.minScale-1)*28e-5,Be.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):Ve.getUnits()==="degrees"&&(Be.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),Be.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(Be,e.olParams),super(Be),this.name=e.layer,this.service="WMS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);const MAXFEATURES=500,MINZOOMDEFAULT=15,MAXZOOMDEFAULT=21,STYLEBYDEFAULT=new Style$1({stroke:new Stroke({color:"rgba(0, 0, 255, 1.0)",width:2}),fill:new Fill({color:"rgba(0, 0, 255, 0.5)"})});var LayerWFS=class extends VectorLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var ke=Config.configuration.getLayerId(e.layer,"WFS");if(t=Config.configuration.getLayerConf(ke),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Oe;e.olParams&&e.olParams.sourceParams&&(Oe=e.olParams.sourceParams);var Ge=new SourceWFS({layer:e.layer,configuration:e.configuration,maxFeatures:e.maxFeatures||MAXFEATURES,ssl:e.ssl,apiKey:e.apiKey,olParams:Oe||{minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT}}),Be={source:Ge};return e.olParams?Helper.mergeParams({minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},e.olParams):e.olParams={minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},Helper.mergeParams(Be,e.olParams),super(Be),this.name=e.layer,this.service="WFS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWFS=LayerWFS);const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=create()}prepareTile(e,t,ke){let Oe;const Ge=e.getState();return(Ge===TileState.LOADED||Ge===TileState.ERROR)&&(this.updateExecutorGroup_(e,t,ke),this.tileImageNeedsRender_(e)&&(Oe=!0)),Oe}getTile(e,t,ke,Oe){const Ge=Oe.pixelRatio,Be=Oe.viewState,je=Be.resolution,Ve=Be.projection,Ze=this.getLayer(),Qe=Ze.getSource().getTile(e,t,ke,Ge,Ve),en=Oe.viewHints,tn=!(en[ViewHint.ANIMATING]||en[ViewHint.INTERACTING]);return(tn||!Qe.wantedResolution)&&(Qe.wantedResolution=je),this.prepareTile(Qe,Ge,Ve)&&(tn||Date.now()-Oe.time<8)&&Ze.getRenderMode()!=="vector"&&this.renderTileImage_(Qe,Oe),super.getTile(e,t,ke,Oe)}isDrawableTile(e){const t=this.getLayer();return super.isDrawableTile(e)&&(t.getRenderMode()==="vector"?getUid(t)in e.executorGroups:e.hasContext(t))}getTileImage(e){return e.getImage(this.getLayer())}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,ke){const Oe=this.getLayer(),Ge=Oe.getRevision(),Be=Oe.getRenderOrder()||null,je=e.wantedResolution,Ve=e.getReplayState(Oe);if(!Ve.dirty&&Ve.renderedResolution===je&&Ve.renderedRevision==Ge&&Ve.renderedRenderOrder==Be)return;const Ze=Oe.getSource(),Qe=Oe.getDeclutter(),en=Ze.getTileGrid(),an=Ze.getTileGridForProjection(ke).getTileCoordExtent(e.wrappedTileCoord),cn=Ze.getSourceTiles(t,ke,e),dn=getUid(Oe);delete e.hitDetectionImageData[dn],e.executorGroups[dn]=[],Qe&&(e.declutterExecutorGroups[dn]=[]),Ve.dirty=!1;for(let hn=0,fn=cn.length;hn<fn;++hn){const pn=cn[hn];if(pn.getState()!=TileState.LOADED)continue;const mn=pn.tileCoord,yn=en.getTileCoordExtent(mn),Cn=getIntersection(an,yn),wn=buffer(Cn,Oe.getRenderBuffer()*je,this.tmpExtent),bn=equals$1(yn,Cn)?null:wn,Sn=new BuilderGroup(0,wn,je,t),Mn=Qe?new BuilderGroup(0,Cn,je,t):void 0,Tn=getSquaredTolerance(je,t),En=function(Nn){let jn;const Dn=Nn.getStyleFunction()||Oe.getStyleFunction();if(Dn&&(jn=Dn(Nn,je)),jn){const Ci=this.renderFeature(Nn,Tn,jn,Sn,Mn);Ve.dirty=Ve.dirty||Ci}},An=pn.getFeatures();Be&&Be!==Ve.renderedRenderOrder&&An.sort(Be);for(let Nn=0,jn=An.length;Nn<jn;++Nn){const Dn=An[Nn];(!bn||intersects$1(bn,Dn.getGeometry().getExtent()))&&En.call(this,Dn)}const Ln=Sn.finish(),Rn=Oe.getRenderMode()!=="vector"&&Qe&&cn.length===1?null:Cn,Gn=new ExecutorGroup(Rn,je,t,Ze.getOverlaps(),Ln,Oe.getRenderBuffer());if(e.executorGroups[dn].push(Gn),Mn){const Nn=new ExecutorGroup(null,je,t,Ze.getOverlaps(),Mn.finish(),Oe.getRenderBuffer());e.declutterExecutorGroups[dn].push(Nn)}}Ve.renderedRevision=Ge,Ve.renderedRenderOrder=Be,Ve.renderedResolution=je}forEachFeatureAtCoordinate(e,t,ke,Oe,Ge){const Be=t.viewState.resolution,je=t.viewState.rotation;ke=ke??0;const Ve=this.getLayer(),Qe=Ve.getSource().getTileGridForProjection(t.viewState.projection),en=boundingExtent([e]);buffer(en,Be*ke,en);const tn={},an=function(hn,fn,pn){let mn=hn.getId();mn===void 0&&(mn=getUid(hn));const yn=tn[mn];if(yn){if(yn!==!0&&pn<yn.distanceSq){if(pn===0)return tn[mn]=!0,Ge.splice(Ge.lastIndexOf(yn),1),Oe(hn,Ve,fn);yn.geometry=fn,yn.distanceSq=pn}}else{if(pn===0)return tn[mn]=!0,Oe(hn,Ve,fn);Ge.push(tn[mn]={feature:hn,layer:Ve,geometry:fn,distanceSq:pn,callback:Oe})}},cn=this.renderedTiles;let dn;for(let hn=0,fn=cn.length;!dn&&hn<fn;++hn){const pn=cn[hn],mn=Qe.getTileCoordExtent(pn.wrappedTileCoord);if(!intersects$1(mn,en))continue;const yn=getUid(Ve),Cn=[pn.executorGroups[yn]],wn=pn.declutterExecutorGroups[yn];wn&&Cn.push(wn),Cn.some(bn=>{const Sn=bn===wn?t.declutterTree.all().map(Mn=>Mn.value):null;for(let Mn=0,Tn=bn.length;Mn<Tn;++Mn)if(dn=bn[Mn].forEachFeatureAtCoordinate(e,Be,je,ke,an,Sn),dn)return!0})}return dn}getFeatures(e){return new Promise((t,ke)=>{const Oe=this.getLayer(),Ge=getUid(Oe),Be=Oe.getSource(),je=this.renderedProjection,Ve=je.getExtent(),Ze=this.renderedResolution,Qe=Be.getTileGridForProjection(je),en=apply(this.renderedPixelToCoordinateTransform_,e.slice()),tn=Qe.getTileCoordForCoordAndResolution(en,Ze);let an;for(let mn=0,yn=this.renderedTiles.length;mn<yn;++mn)if(tn.toString()===this.renderedTiles[mn].tileCoord.toString()){if(an=this.renderedTiles[mn],an.getState()===TileState.LOADED){const Cn=Qe.getTileCoordExtent(an.tileCoord);Be.getWrapX()&&je.canWrapX()&&!containsExtent(Ve,Cn)&&wrapX$1(en,je);break}an=void 0}if(!an||an.loadingSourceTiles>0){t([]);return}const cn=Qe.getTileCoordExtent(an.wrappedTileCoord),dn=getTopLeft(cn),hn=[(en[0]-dn[0])/Ze,(dn[1]-en[1])/Ze],fn=an.getSourceTiles().reduce(function(mn,yn){return mn.concat(yn.getFeatures())},[]);let pn=an.hitDetectionImageData[Ge];if(!pn){const mn=toSize(Qe.getTileSize(Qe.getZForResolution(Ze,Be.zDirection))),yn=this.renderedRotation_,Cn=[this.getRenderTransform(Qe.getTileCoordCenter(an.wrappedTileCoord),Ze,0,HIT_DETECT_RESOLUTION,mn[0]*HIT_DETECT_RESOLUTION,mn[1]*HIT_DETECT_RESOLUTION,0)];pn=createHitDetectionImageData(mn,Cn,fn,Oe.getStyleFunction(),Qe.getTileCoordExtent(an.wrappedTileCoord),an.getReplayState(Oe).renderedResolution,yn),an.hitDetectionImageData[Ge]=pn}t(hitDetect(hn,fn,pn))})}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e){const t=this.context,ke=t.globalAlpha;t.globalAlpha=this.getLayer().getOpacity();const Oe=e.viewHints,Ge=!(Oe[ViewHint.ANIMATING]||Oe[ViewHint.INTERACTING]),Be=this.renderedTiles;for(let je=0,Ve=Be.length;je<Ve;++je){const Ze=Be[je],Qe=Ze.declutterExecutorGroups[getUid(this.getLayer())];if(Qe)for(let en=Qe.length-1;en>=0;--en)Qe[en].execute(this.context,1,this.getTileRenderTransform(Ze,e),e.viewState.rotation,Ge,void 0,e.declutterTree)}t.globalAlpha=ke}getTileRenderTransform(e,t){const ke=t.pixelRatio,Oe=t.viewState,Ge=Oe.center,Be=Oe.resolution,je=Oe.rotation,Ve=t.size,Ze=Math.round(Ve[0]*ke),Qe=Math.round(Ve[1]*ke),tn=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),an=e.tileCoord,cn=tn.getTileCoordExtent(e.wrappedTileCoord),dn=tn.getTileCoordExtent(an,this.tmpExtent)[0]-cn[0];return multiply(scale$1(this.inversePixelTransform.slice(),1/ke,1/ke),this.getRenderTransform(Ge,Be,je,ke,Ze,Qe,dn))}postRender(e,t){const ke=t.viewHints,Oe=!(ke[ViewHint.ANIMATING]||ke[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation;const Ge=this.getLayer(),Be=Ge.getRenderMode(),je=e.globalAlpha;e.globalAlpha=Ge.getOpacity();const Ve=VECTOR_REPLAYS[Be],Ze=t.viewState,Qe=Ze.rotation,en=Ge.getSource(),an=en.getTileGridForProjection(Ze.projection).getZForResolution(Ze.resolution,en.zDirection),cn=this.renderedTiles,dn=[],hn=[];let fn=!0;for(let pn=cn.length-1;pn>=0;--pn){const mn=cn[pn];fn=fn&&!mn.getReplayState(Ge).dirty;const yn=mn.executorGroups[getUid(Ge)].filter(Mn=>Mn.hasExecutors(Ve));if(yn.length===0)continue;const Cn=this.getTileRenderTransform(mn,t),wn=mn.tileCoord[0];let bn=!1;const Sn=yn[0].getClipCoords(Cn);if(Sn){for(let Mn=0,Tn=dn.length;Mn<Tn;++Mn)if(an!==wn&&wn<hn[Mn]){const En=dn[Mn];intersects$1([Sn[0],Sn[3],Sn[4],Sn[7]],[En[0],En[3],En[4],En[7]])&&(bn||(e.save(),bn=!0),e.beginPath(),e.moveTo(Sn[0],Sn[1]),e.lineTo(Sn[2],Sn[3]),e.lineTo(Sn[4],Sn[5]),e.lineTo(Sn[6],Sn[7]),e.moveTo(En[6],En[7]),e.lineTo(En[4],En[5]),e.lineTo(En[2],En[3]),e.lineTo(En[0],En[1]),e.clip())}dn.push(Sn),hn.push(wn)}for(let Mn=0,Tn=yn.length;Mn<Tn;++Mn)yn[Mn].execute(e,1,Cn,Qe,Oe,Ve);bn&&e.restore()}e.globalAlpha=je,this.ready=fn,super.postRender(e,t)}renderFeature(e,t,ke,Oe,Ge){if(!ke)return!1;let Be=!1;if(Array.isArray(ke))for(let je=0,Ve=ke.length;je<Ve;++je)Be=renderFeature$1(Oe,e,ke[je],t,this.boundHandleStyleImageChange_,void 0,Ge)||Be;else Be=renderFeature$1(Oe,e,ke,t,this.boundHandleStyleImageChange_,void 0,Ge);return Be}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const ke=e.getReplayState(t),Oe=t.getRevision(),Ge=e.wantedResolution;return ke.renderedTileResolution!==Ge||ke.renderedTileRevision!==Oe}renderTileImage_(e,t){const ke=this.getLayer(),Oe=e.getReplayState(ke),Ge=ke.getRevision(),Be=e.executorGroups[getUid(ke)];Oe.renderedTileRevision=Ge;const je=e.wrappedTileCoord,Ve=je[0],Ze=ke.getSource();let Qe=t.pixelRatio;const tn=t.viewState.projection,an=Ze.getTileGridForProjection(tn),cn=an.getResolution(e.tileCoord[0]),dn=t.pixelRatio/e.wantedResolution*cn,hn=an.getResolution(Ve),fn=e.getContext(ke);Qe=Math.round(Math.max(Qe,dn/Qe));const pn=Ze.getTilePixelSize(Ve,Qe,tn);fn.canvas.width=pn[0],fn.canvas.height=pn[1];const mn=Qe/dn;if(mn!==1){const bn=reset(this.tmpTransform_);scale$1(bn,mn,mn),fn.setTransform.apply(fn,bn)}const yn=an.getTileCoordExtent(je,this.tmpExtent),Cn=dn/hn,wn=reset(this.tmpTransform_);scale$1(wn,Cn,-Cn),translate$1(wn,-yn[0],-yn[3]);for(let bn=0,Sn=Be.length;bn<Sn;++bn)Be[bn].execute(fn,mn,wn,0,!0,IMAGE_REPLAYS[ke.getRenderMode()]);Oe.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un;const ke=e.renderMode||"hybrid";assert(ke=="hybrid"||ke=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=ke,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this)}getFeatures(e){return super.getFeatures(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}function jsonp(r,e,t,ke){const Oe=document.createElement("script"),Ge="olc_"+getUid(e);function Be(){delete window[Ge],Oe.parentNode.removeChild(Oe)}Oe.async=!0,Oe.src=r+(r.includes("?")?"&":"?")+"callback="+Ge;const je=setTimeout(function(){Be(),t&&t()},1e4);window[Ge]=function(Ve){clearTimeout(je),Be(),e(Ve)},document.head.appendChild(Oe)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let ke;try{ke=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(ke)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=get$3("EPSG:4326"),ke=this.getProjection();let Oe;if(e.bounds!==void 0){const Ze=getTransformFromProjections(t,ke);Oe=applyTransform(e.bounds,Ze)}const Ge=extentFromProjection(ke),Be=e.minzoom||0,je=e.maxzoom||22,Ve=createXYZ({extent:Ge,maxZoom:je,minZoom:Be,tileSize:this.tileSize_});if(this.tileGrid=Ve,this.tileUrlFunction=createFromTemplates(e.tiles,Ve),e.attribution&&!this.getAttributions()){const Ze=Oe!==void 0?Oe:Ge;this.setAttributions(function(Qe){return intersects$1(Ze,Qe.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}var ieee754$1={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */ieee754$1.read=function(r,e,t,ke,Oe){var Ge,Be,je=Oe*8-ke-1,Ve=(1<<je)-1,Ze=Ve>>1,Qe=-7,en=t?Oe-1:0,tn=t?-1:1,an=r[e+en];for(en+=tn,Ge=an&(1<<-Qe)-1,an>>=-Qe,Qe+=je;Qe>0;Ge=Ge*256+r[e+en],en+=tn,Qe-=8);for(Be=Ge&(1<<-Qe)-1,Ge>>=-Qe,Qe+=ke;Qe>0;Be=Be*256+r[e+en],en+=tn,Qe-=8);if(Ge===0)Ge=1-Ze;else{if(Ge===Ve)return Be?NaN:(an?-1:1)*(1/0);Be=Be+Math.pow(2,ke),Ge=Ge-Ze}return(an?-1:1)*Be*Math.pow(2,Ge-ke)};ieee754$1.write=function(r,e,t,ke,Oe,Ge){var Be,je,Ve,Ze=Ge*8-Oe-1,Qe=(1<<Ze)-1,en=Qe>>1,tn=Oe===23?Math.pow(2,-24)-Math.pow(2,-77):0,an=ke?0:Ge-1,cn=ke?1:-1,dn=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(je=isNaN(e)?1:0,Be=Qe):(Be=Math.floor(Math.log(e)/Math.LN2),e*(Ve=Math.pow(2,-Be))<1&&(Be--,Ve*=2),Be+en>=1?e+=tn/Ve:e+=tn*Math.pow(2,1-en),e*Ve>=2&&(Be++,Ve/=2),Be+en>=Qe?(je=0,Be=Qe):Be+en>=1?(je=(e*Ve-1)*Math.pow(2,Oe),Be=Be+en):(je=e*Math.pow(2,en-1)*Math.pow(2,Oe),Be=0));Oe>=8;r[t+an]=je&255,an+=cn,je/=256,Oe-=8);for(Be=Be<<Oe|je,Ze+=Oe;Ze>0;r[t+an]=Be&255,an+=cn,Be/=256,Ze-=8);r[t+an-cn]|=dn*128};var pbf=Pbf,ieee754=ieee754$1;function Pbf(r){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(r)?r:new Uint8Array(r||0),this.pos=0,this.type=0,this.length=this.buf.length}Pbf.Varint=0;Pbf.Fixed64=1;Pbf.Bytes=2;Pbf.Fixed32=5;var SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf8");Pbf.prototype={destroy:function(){this.buf=null},readFields:function(r,e,t){for(t=t||this.length;this.pos<t;){var ke=this.readVarint(),Oe=ke>>3,Ge=this.pos;this.type=ke&7,r(Oe,e,this),this.pos===Ge&&this.skip(ke)}return e},readMessage:function(r,e){return this.readFields(r,e,this.readVarint()+this.pos)},readFixed32:function(){var r=readUInt32(this.buf,this.pos);return this.pos+=4,r},readSFixed32:function(){var r=readInt32(this.buf,this.pos);return this.pos+=4,r},readFixed64:function(){var r=readUInt32(this.buf,this.pos)+readUInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,r},readSFixed64:function(){var r=readUInt32(this.buf,this.pos)+readInt32(this.buf,this.pos+4)*SHIFT_LEFT_32;return this.pos+=8,r},readFloat:function(){var r=ieee754.read(this.buf,this.pos,!0,23,4);return this.pos+=4,r},readDouble:function(){var r=ieee754.read(this.buf,this.pos,!0,52,8);return this.pos+=8,r},readVarint:function(r){var e=this.buf,t,ke;return ke=e[this.pos++],t=ke&127,ke<128||(ke=e[this.pos++],t|=(ke&127)<<7,ke<128)||(ke=e[this.pos++],t|=(ke&127)<<14,ke<128)||(ke=e[this.pos++],t|=(ke&127)<<21,ke<128)?t:(ke=e[this.pos],t|=(ke&15)<<28,readVarintRemainder(t,r,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var r=this.readVarint();return r%2===1?(r+1)/-2:r/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var r=this.readVarint()+this.pos,e=this.pos;return this.pos=r,r-e>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?readUtf8TextDecoder(this.buf,e,r):readUtf8(this.buf,e,r)},readBytes:function(){var r=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,r);return this.pos=r,e},readPackedVarint:function(r,e){if(this.type!==Pbf.Bytes)return r.push(this.readVarint(e));var t=readPackedEnd(this);for(r=r||[];this.pos<t;)r.push(this.readVarint(e));return r},readPackedSVarint:function(r){if(this.type!==Pbf.Bytes)return r.push(this.readSVarint());var e=readPackedEnd(this);for(r=r||[];this.pos<e;)r.push(this.readSVarint());return r},readPackedBoolean:function(r){if(this.type!==Pbf.Bytes)return r.push(this.readBoolean());var e=readPackedEnd(this);for(r=r||[];this.pos<e;)r.push(this.readBoolean());return r},readPackedFloat:function(r){if(this.type!==Pbf.Bytes)return r.push(this.readFloat());var e=readPackedEnd(this);for(r=r||[];this.pos<e;)r.push(this.readFloat());return r},readPackedDouble:function(r){if(this.type!==Pbf.Bytes)return r.push(this.readDouble());var e=readPackedEnd(this);for(r=r||[];this.pos<e;)r.push(this.readDouble());return r},readPackedFixed32:function(r){if(this.type!==Pbf.Bytes)return r.push(this.readFixed32());var e=readPackedEnd(this);for(r=r||[];this.pos<e;)r.push(this.readFixed32());return r},readPackedSFixed32:function(r){if(this.type!==Pbf.Bytes)return r.push(this.readSFixed32());var e=readPackedEnd(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed32());return r},readPackedFixed64:function(r){if(this.type!==Pbf.Bytes)return r.push(this.readFixed64());var e=readPackedEnd(this);for(r=r||[];this.pos<e;)r.push(this.readFixed64());return r},readPackedSFixed64:function(r){if(this.type!==Pbf.Bytes)return r.push(this.readSFixed64());var e=readPackedEnd(this);for(r=r||[];this.pos<e;)r.push(this.readSFixed64());return r},skip:function(r){var e=r&7;if(e===Pbf.Varint)for(;this.buf[this.pos++]>127;);else if(e===Pbf.Bytes)this.pos=this.readVarint()+this.pos;else if(e===Pbf.Fixed32)this.pos+=4;else if(e===Pbf.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+e)},writeTag:function(r,e){this.writeVarint(r<<3|e)},realloc:function(r){for(var e=this.length||16;e<this.pos+r;)e*=2;if(e!==this.length){var t=new Uint8Array(e);t.set(this.buf),this.buf=t,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(r){this.realloc(4),writeInt32(this.buf,r,this.pos),this.pos+=4},writeSFixed32:function(r){this.realloc(4),writeInt32(this.buf,r,this.pos),this.pos+=4},writeFixed64:function(r){this.realloc(8),writeInt32(this.buf,r&-1,this.pos),writeInt32(this.buf,Math.floor(r*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeSFixed64:function(r){this.realloc(8),writeInt32(this.buf,r&-1,this.pos),writeInt32(this.buf,Math.floor(r*SHIFT_RIGHT_32),this.pos+4),this.pos+=8},writeVarint:function(r){if(r=+r||0,r>268435455||r<0){writeBigVarint(r,this);return}this.realloc(4),this.buf[this.pos++]=r&127|(r>127?128:0),!(r<=127)&&(this.buf[this.pos++]=(r>>>=7)&127|(r>127?128:0),!(r<=127)&&(this.buf[this.pos++]=(r>>>=7)&127|(r>127?128:0),!(r<=127)&&(this.buf[this.pos++]=r>>>7&127)))},writeSVarint:function(r){this.writeVarint(r<0?-r*2-1:r*2)},writeBoolean:function(r){this.writeVarint(!!r)},writeString:function(r){r=String(r),this.realloc(r.length*4),this.pos++;var e=this.pos;this.pos=writeUtf8(this.buf,r,this.pos);var t=this.pos-e;t>=128&&makeRoomForExtraLength(e,t,this),this.pos=e-1,this.writeVarint(t),this.pos+=t},writeFloat:function(r){this.realloc(4),ieee754.write(this.buf,r,this.pos,!0,23,4),this.pos+=4},writeDouble:function(r){this.realloc(8),ieee754.write(this.buf,r,this.pos,!0,52,8),this.pos+=8},writeBytes:function(r){var e=r.length;this.writeVarint(e),this.realloc(e);for(var t=0;t<e;t++)this.buf[this.pos++]=r[t]},writeRawMessage:function(r,e){this.pos++;var t=this.pos;r(e,this);var ke=this.pos-t;ke>=128&&makeRoomForExtraLength(t,ke,this),this.pos=t-1,this.writeVarint(ke),this.pos+=ke},writeMessage:function(r,e,t){this.writeTag(r,Pbf.Bytes),this.writeRawMessage(e,t)},writePackedVarint:function(r,e){e.length&&this.writeMessage(r,writePackedVarint,e)},writePackedSVarint:function(r,e){e.length&&this.writeMessage(r,writePackedSVarint,e)},writePackedBoolean:function(r,e){e.length&&this.writeMessage(r,writePackedBoolean,e)},writePackedFloat:function(r,e){e.length&&this.writeMessage(r,writePackedFloat,e)},writePackedDouble:function(r,e){e.length&&this.writeMessage(r,writePackedDouble,e)},writePackedFixed32:function(r,e){e.length&&this.writeMessage(r,writePackedFixed32,e)},writePackedSFixed32:function(r,e){e.length&&this.writeMessage(r,writePackedSFixed32,e)},writePackedFixed64:function(r,e){e.length&&this.writeMessage(r,writePackedFixed64,e)},writePackedSFixed64:function(r,e){e.length&&this.writeMessage(r,writePackedSFixed64,e)},writeBytesField:function(r,e){this.writeTag(r,Pbf.Bytes),this.writeBytes(e)},writeFixed32Field:function(r,e){this.writeTag(r,Pbf.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(r,e){this.writeTag(r,Pbf.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(r,e){this.writeTag(r,Pbf.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(r,e){this.writeTag(r,Pbf.Fixed64),this.writeSFixed64(e)},writeVarintField:function(r,e){this.writeTag(r,Pbf.Varint),this.writeVarint(e)},writeSVarintField:function(r,e){this.writeTag(r,Pbf.Varint),this.writeSVarint(e)},writeStringField:function(r,e){this.writeTag(r,Pbf.Bytes),this.writeString(e)},writeFloatField:function(r,e){this.writeTag(r,Pbf.Fixed32),this.writeFloat(e)},writeDoubleField:function(r,e){this.writeTag(r,Pbf.Fixed64),this.writeDouble(e)},writeBooleanField:function(r,e){this.writeVarintField(r,!!e)}};function readVarintRemainder(r,e,t){var ke=t.buf,Oe,Ge;if(Ge=ke[t.pos++],Oe=(Ge&112)>>4,Ge<128||(Ge=ke[t.pos++],Oe|=(Ge&127)<<3,Ge<128)||(Ge=ke[t.pos++],Oe|=(Ge&127)<<10,Ge<128)||(Ge=ke[t.pos++],Oe|=(Ge&127)<<17,Ge<128)||(Ge=ke[t.pos++],Oe|=(Ge&127)<<24,Ge<128)||(Ge=ke[t.pos++],Oe|=(Ge&1)<<31,Ge<128))return toNum(r,Oe,e);throw new Error("Expected varint not more than 10 bytes")}function readPackedEnd(r){return r.type===Pbf.Bytes?r.readVarint()+r.pos:r.pos+1}function toNum(r,e,t){return t?e*4294967296+(r>>>0):(e>>>0)*4294967296+(r>>>0)}function writeBigVarint(r,e){var t,ke;if(r>=0?(t=r%4294967296|0,ke=r/4294967296|0):(t=~(-r%4294967296),ke=~(-r/4294967296),t^4294967295?t=t+1|0:(t=0,ke=ke+1|0)),r>=18446744073709552e3||r<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(t,ke,e),writeBigVarintHigh(ke,e)}function writeBigVarintLow(r,e,t){t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos++]=r&127|128,r>>>=7,t.buf[t.pos]=r&127}function writeBigVarintHigh(r,e){var t=(r&7)<<4;e.buf[e.pos++]|=t|((r>>>=3)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127|((r>>>=7)?128:0),r&&(e.buf[e.pos++]=r&127)))))}function makeRoomForExtraLength(r,e,t){var ke=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(ke);for(var Oe=t.pos-1;Oe>=r;Oe--)t.buf[Oe+ke]=t.buf[Oe]}function writePackedVarint(r,e){for(var t=0;t<r.length;t++)e.writeVarint(r[t])}function writePackedSVarint(r,e){for(var t=0;t<r.length;t++)e.writeSVarint(r[t])}function writePackedFloat(r,e){for(var t=0;t<r.length;t++)e.writeFloat(r[t])}function writePackedDouble(r,e){for(var t=0;t<r.length;t++)e.writeDouble(r[t])}function writePackedBoolean(r,e){for(var t=0;t<r.length;t++)e.writeBoolean(r[t])}function writePackedFixed32(r,e){for(var t=0;t<r.length;t++)e.writeFixed32(r[t])}function writePackedSFixed32(r,e){for(var t=0;t<r.length;t++)e.writeSFixed32(r[t])}function writePackedFixed64(r,e){for(var t=0;t<r.length;t++)e.writeFixed64(r[t])}function writePackedSFixed64(r,e){for(var t=0;t<r.length;t++)e.writeSFixed64(r[t])}function readUInt32(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+r[e+3]*16777216}function writeInt32(r,e,t){r[t]=e,r[t+1]=e>>>8,r[t+2]=e>>>16,r[t+3]=e>>>24}function readInt32(r,e){return(r[e]|r[e+1]<<8|r[e+2]<<16)+(r[e+3]<<24)}function readUtf8(r,e,t){for(var ke="",Oe=e;Oe<t;){var Ge=r[Oe],Be=null,je=Ge>239?4:Ge>223?3:Ge>191?2:1;if(Oe+je>t)break;var Ve,Ze,Qe;je===1?Ge<128&&(Be=Ge):je===2?(Ve=r[Oe+1],(Ve&192)===128&&(Be=(Ge&31)<<6|Ve&63,Be<=127&&(Be=null))):je===3?(Ve=r[Oe+1],Ze=r[Oe+2],(Ve&192)===128&&(Ze&192)===128&&(Be=(Ge&15)<<12|(Ve&63)<<6|Ze&63,(Be<=2047||Be>=55296&&Be<=57343)&&(Be=null))):je===4&&(Ve=r[Oe+1],Ze=r[Oe+2],Qe=r[Oe+3],(Ve&192)===128&&(Ze&192)===128&&(Qe&192)===128&&(Be=(Ge&15)<<18|(Ve&63)<<12|(Ze&63)<<6|Qe&63,(Be<=65535||Be>=1114112)&&(Be=null))),Be===null?(Be=65533,je=1):Be>65535&&(Be-=65536,ke+=String.fromCharCode(Be>>>10&1023|55296),Be=56320|Be&1023),ke+=String.fromCharCode(Be),Oe+=je}return ke}function readUtf8TextDecoder(r,e,t){return utf8TextDecoder.decode(r.subarray(e,t))}function writeUtf8(r,e,t){for(var ke=0,Oe,Ge;ke<e.length;ke++){if(Oe=e.charCodeAt(ke),Oe>55295&&Oe<57344)if(Ge)if(Oe<56320){r[t++]=239,r[t++]=191,r[t++]=189,Ge=Oe;continue}else Oe=Ge-55296<<10|Oe-56320|65536,Ge=null;else{Oe>56319||ke+1===e.length?(r[t++]=239,r[t++]=191,r[t++]=189):Ge=Oe;continue}else Ge&&(r[t++]=239,r[t++]=191,r[t++]=189,Ge=null);Oe<128?r[t++]=Oe:(Oe<2048?r[t++]=Oe>>6|192:(Oe<65536?r[t++]=Oe>>12|224:(r[t++]=Oe>>18|240,r[t++]=Oe>>12&63|128),r[t++]=Oe>>6&63|128),r[t++]=Oe&63|128)}return t}const PBF=getDefaultExportFromCjs$1(pbf);class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass_=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,ke,Oe){e.pos=t.geometry;const Ge=e.readVarint()+e.pos;let Be=1,je=0,Ve=0,Ze=0,Qe=0,en=0;for(;e.pos<Ge;){if(!je){const tn=e.readVarint();Be=tn&7,je=tn>>3}if(je--,Be===1||Be===2)Ve+=e.readSVarint(),Ze+=e.readSVarint(),Be===1&&Qe>en&&(Oe.push(Qe),en=Qe),ke.push(Ve,Ze),Qe+=2;else if(Be===7)Qe>en&&(ke.push(ke[en],ke[en+1]),Qe+=2);else throw new Error("Invalid command found in the PBF")}Qe>en&&(Oe.push(Qe),en=Qe)}createFeature_(e,t,ke){const Oe=t.type;if(Oe===0)return null;let Ge;const Be=t.properties;let je;this.idProperty_?(je=Be[this.idProperty_],delete Be[this.idProperty_]):je=t.id,Be[this.layerName_]=t.layer.name;const Ve=[],Ze=[];this.readRawGeometry_(e,t,Ve,Ze);const Qe=getGeometryType(Oe,Ze.length);if(this.featureClass_===RenderFeature)Ge=new this.featureClass_(Qe,Ve,Ze,2,Be,je),Ge.transform(ke.dataProjection);else{let en;if(Qe=="Polygon"){const cn=inflateEnds(Ve,Ze);en=cn.length>1?new MultiPolygon(Ve,"XY",cn):new Polygon(Ve,"XY",Ze)}else en=Qe==="Point"?new Point$1(Ve,"XY"):Qe==="LineString"?new LineString(Ve,"XY"):Qe==="MultiPoint"?new MultiPoint(Ve,"XY"):Qe==="MultiLineString"?new MultiLineString(Ve,"XY",Ze):null;const tn=this.featureClass_;Ge=new tn,this.geometryName_&&Ge.setGeometryName(this.geometryName_);const an=transformGeometryWithOptions(en,!1,ke);Ge.setGeometry(an),je!==void 0&&Ge.setId(je),Ge.setProperties(Be,!0)}return Ge}getType(){return"arraybuffer"}readFeatures(e,t){const ke=this.layers_;t=this.adaptOptions(t);const Oe=get$3(t.dataProjection);Oe.setWorldExtent(t.extent),t.dataProjection=Oe;const Ge=new PBF(e),Be=Ge.readFields(layersPBFReader,{}),je=[];for(const Ve in Be){if(ke&&!ke.includes(Ve))continue;const Ze=Be[Ve],Qe=Ze?[0,0,Ze.extent,Ze.extent]:null;Oe.setExtent(Qe);for(let en=0,tn=Ze.length;en<tn;++en){const an=readRawFeature(Ge,Ze,en),cn=this.createFeature_(Ge,an,t);cn!==null&&je.push(cn)}}return je}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(r,e,t){if(r===3){const ke={keys:[],values:[],features:[]},Oe=t.readVarint()+t.pos;t.readFields(layerPBFReader,ke,Oe),ke.length=ke.features.length,ke.length&&(e[ke.name]=ke)}}function layerPBFReader(r,e,t){if(r===15)e.version=t.readVarint();else if(r===1)e.name=t.readString();else if(r===5)e.extent=t.readVarint();else if(r===2)e.features.push(t.pos);else if(r===3)e.keys.push(t.readString());else if(r===4){let ke=null;const Oe=t.readVarint()+t.pos;for(;t.pos<Oe;)r=t.readVarint()>>3,ke=r===1?t.readString():r===2?t.readFloat():r===3?t.readDouble():r===4?t.readVarint64():r===5?t.readVarint():r===6?t.readSVarint():r===7?t.readBoolean():null;e.values.push(ke)}}function featurePBFReader(r,e,t){if(r==1)e.id=t.readVarint();else if(r==2){const ke=t.readVarint()+t.pos;for(;t.pos<ke;){const Oe=e.layer.keys[t.readVarint()],Ge=e.layer.values[t.readVarint()];e.properties[Oe]=Ge}}else r==3?e.type=t.readVarint():r==4&&(e.geometry=t.pos)}function readRawFeature(r,e,t){r.pos=e.features[t];const ke=r.readVarint()+r.pos,Oe={layer:e,type:0,properties:{}};return r.readFields(featurePBFReader,Oe,ke),Oe}function getGeometryType(r,e){let t;return r===1?t=e===1?"Point":"MultiPoint":r===2?t=e===1?"LineString":"MultiLineString":r===3&&(t="Polygon"),t}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){abstract()}calculateMatrices2D(e){const t=e.viewState,ke=e.coordinateToPixelTransform,Oe=e.pixelToCoordinateTransform;compose(ke,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),makeInverse(Oe,ke)}forEachFeatureAtCoordinate(e,t,ke,Oe,Ge,Be,je,Ve){let Ze;const Qe=t.viewState;function en(yn,Cn,wn,bn){return Ge.call(Be,Cn,yn?wn:null,bn)}const tn=Qe.projection,an=wrapX$1(e.slice(),tn),cn=[[0,0]];if(tn.canWrapX()&&Oe){const yn=tn.getExtent(),Cn=getWidth(yn);cn.push([-Cn,0],[Cn,0])}const dn=t.layerStatesArray,hn=dn.length,fn=[],pn=[];for(let yn=0;yn<cn.length;yn++)for(let Cn=hn-1;Cn>=0;--Cn){const wn=dn[Cn],bn=wn.layer;if(bn.hasRenderer()&&inView(wn,Qe)&&je.call(Ve,bn)){const Sn=bn.getRenderer(),Mn=bn.getSource();if(Sn&&Mn){const Tn=Mn.getWrapX()?an:e,En=en.bind(null,wn.managed);pn[0]=Tn[0]+cn[yn][0],pn[1]=Tn[1]+cn[yn][1],Ze=Sn.forEachFeatureAtCoordinate(pn,t,ke,En,fn)}if(Ze)return Ze}}if(fn.length===0)return;const mn=1/fn.length;return fn.forEach((yn,Cn)=>yn.distanceSq+=Cn*mn),fn.sort((yn,Cn)=>yn.distanceSq-Cn.distanceSq),fn.some(yn=>Ze=yn.callback(yn.feature,yn.layer,yn.geometry)),Ze}hasFeatureAtCoordinate(e,t,ke,Oe,Ge,Be){return this.forEachFeatureAtCoordinate(e,t,ke,Oe,TRUE,this,Ge,Be)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}flushDeclutterItems(e){}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(r,e){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText.bind(e)),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const ke=e.getViewport();ke.insertBefore(this.element_,ke.firstChild||null),this.children_=[],this.renderedVisible_=!0,this.declutterLayers_=[]}dispatchRenderEvent(e,t){const ke=this.getMap();if(ke.hasListener(e)){const Oe=new RenderEvent(e,void 0,t);ke.dispatchEvent(Oe)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const t=e.layerStatesArray.sort(function(Be,je){return Be.zIndex-je.zIndex}),ke=e.viewState;this.children_.length=0;const Oe=this.declutterLayers_;Oe.length=0;let Ge=null;for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];e.layerIndex=Be;const Ze=Ve.layer,Qe=Ze.getSourceState();if(!inView(Ve,ke)||Qe!="ready"&&Qe!="undefined"){Ze.unrender();continue}const en=Ze.render(e,Ge);en&&(en!==Ge&&(this.children_.push(en),Ge=en),"getDeclutter"in Ze&&Oe.push(Ze))}this.flushDeclutterItems(e),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}flushDeclutterItems(e){const t=this.declutterLayers_;for(let ke=t.length-1;ke>=0;--ke)t[ke].renderDeclutter(e);t.length=0}}class GroupEvent extends BaseEvent{constructor(e,t){super(e),this.layer=t}}const Property={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let ke=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property.LAYERS,this.handleLayersChanged_),ke?Array.isArray(ke)?ke=new Collection(ke.slice(),{unique:!0}):assert(typeof ke.getArray=="function","Expected `layers` to be an array or a `Collection`"):ke=new Collection(void 0,{unique:!0}),this.setLayers(ke)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const ke in this.listenerKeys_)this.listenerKeys_[ke].forEach(unlistenByKey);clear$1(this.listenerKeys_);const t=e.getArray();for(let ke=0,Oe=t.length;ke<Oe;ke++){const Ge=t[ke];this.registerLayerListeners_(Ge),this.dispatchEvent(new GroupEvent("addlayer",Ge))}this.changed()}registerLayerListeners_(e){const t=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&t.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new GroupEvent("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,ke=getUid(t);this.listenerKeys_[ke].forEach(unlistenByKey),delete this.listenerKeys_[ke],this.dispatchEvent(new GroupEvent("removelayer",t)),this.changed()}getLayers(){return this.get(Property.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const ke=t.getArray();for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe)this.dispatchEvent(new GroupEvent("removelayer",ke[Oe]))}this.set(Property.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],ke=t.length;this.getLayers().forEach(function(Be){Be.getLayerStatesArray(t)});const Oe=this.getLayerState();let Ge=Oe.zIndex;!e&&Oe.zIndex===void 0&&(Ge=0);for(let Be=ke,je=t.length;Be<je;Be++){const Ve=t[Be];Ve.opacity*=Oe.opacity,Ve.visible=Ve.visible&&Oe.visible,Ve.maxResolution=Math.min(Ve.maxResolution,Oe.maxResolution),Ve.minResolution=Math.max(Ve.minResolution,Oe.minResolution),Ve.minZoom=Math.max(Ve.minZoom,Oe.minZoom),Ve.maxZoom=Math.min(Ve.maxZoom,Oe.maxZoom),Oe.extent!==void 0&&(Ve.extent!==void 0?Ve.extent=getIntersection(Ve.extent,Oe.extent):Ve.extent=Oe.extent),Ve.zIndex===void 0&&(Ve.zIndex=Ge)}return t}getSourceState(){return"ready"}}const PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class MapBrowserEventHandler extends Target{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const ke=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=ke,this.pointerdownListenerKey_=listen(ke,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(ke,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let t=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const ke=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(ke)},250)}updateActivePointers_(e){const t=e,ke=t.pointerId;if(t.type==MapBrowserEventType.POINTERUP||t.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[ke];for(const Oe in this.trackedTouches_)if(this.trackedTouches_[Oe].target!==t.target){delete this.trackedTouches_[Oe];break}}else(t.type==MapBrowserEventType.POINTERDOWN||t.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[ke]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const ke=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(ke,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(ke,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==ke&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,ke=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const Oe=this.keyFunction_(ke);return delete this.queuedElements_[Oe],ke}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=DROP?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,ke=this.priorities_,Oe=t.length,Ge=t[e],Be=ke[e],je=e;for(;e<Oe>>1;){const Ve=this.getLeftChildIndex_(e),Ze=this.getRightChildIndex_(e),Qe=Ze<Oe&&ke[Ze]<ke[Ve]?Ze:Ve;t[e]=t[Qe],ke[e]=ke[Qe],e=Qe}t[e]=Ge,ke[e]=Be,this.siftDown_(je,e)}siftDown_(e,t){const ke=this.elements_,Oe=this.priorities_,Ge=ke[t],Be=Oe[t];for(;t>e;){const je=this.getParentIndex_(t);if(Oe[je]>Be)ke[t]=ke[je],Oe[t]=Oe[je],t=je;else break}ke[t]=Ge,Oe[t]=Be}reprioritize(){const e=this.priorityFunction_,t=this.elements_,ke=this.priorities_;let Oe=0;const Ge=t.length;let Be,je,Ve;for(je=0;je<Ge;++je)Be=t[je],Ve=e(Be),Ve==DROP?delete this.queuedElements_[this.keyFunction_(Be)]:(ke[Oe]=Ve,t[Oe++]=Be);t.length=Oe,ke.length=Oe,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,t){super(function(ke){return e.apply(null,ke)},function(ke){return ke[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,ke=t.getState();if(ke===TileState.LOADED||ke===TileState.ERROR||ke===TileState.EMPTY){ke!==TileState.ERROR&&t.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const Oe=t.getKey();Oe in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[Oe],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let ke=0,Oe,Ge,Be;for(;this.tilesLoading_<e&&ke<t&&this.getCount()>0;)Ge=this.dequeue()[0],Be=Ge.getKey(),Oe=Ge.getState(),Oe===TileState.IDLE&&!(Be in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[Be]=!0,++this.tilesLoading_,++ke,Ge.load())}}function getTilePriority(r,e,t,ke,Oe){if(!r||!(t in r.wantedTiles)||!r.wantedTiles[t][e.getKey()])return DROP;const Ge=r.viewState.center,Be=ke[0]-Ge[0],je=ke[1]-Ge[1];return 65536*Math.log(Oe)+Math.sqrt(Be*Be+je*je)/Oe}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1);const t=e.className!==void 0?e.className:"ol-attribution",ke=e.tipLabel!==void 0?e.tipLabel:"Attributions",Oe=e.expandClassName!==void 0?e.expandClassName:t+"-expand",Ge=e.collapseLabel!==void 0?e.collapseLabel:"›",Be=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof Ge=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Ge,this.collapseLabel_.className=Be):this.collapseLabel_=Ge;const je=e.label!==void 0?e.label:"i";typeof je=="string"?(this.label_=document.createElement("span"),this.label_.textContent=je,this.label_.className=Oe):this.label_=je;const Ve=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=ke,this.toggleButton_.appendChild(Ve),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const Ze=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),Qe=this.element;Qe.className=Ze,Qe.appendChild(this.toggleButton_),Qe.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=Array.from(new Set(this.getMap().getAllLayers().flatMap(Oe=>Oe.getAttributions(e)))),ke=!this.getMap().getAllLayers().some(Oe=>Oe.getSource()&&Oe.getSource().getAttributionsCollapsible()===!1);return this.overrideCollapsible_||this.setCollapsible(ke),t}updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=this.collectSourceAttributions_(e),ke=t.length>0;if(this.renderedVisible_!=ke&&(this.element.style.display=ke?"":"none",this.renderedVisible_=ke),!equals$2(t,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let Oe=0,Ge=t.length;Oe<Ge;++Oe){const Be=document.createElement("li");Be.innerHTML=t[Oe],this.ulElement_.appendChild(Be)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",ke=e.label!==void 0?e.label:"⇧",Oe=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof ke=="string"?(this.label_=document.createElement("span"),this.label_.className=Oe,this.label_.textContent=ke):(this.label_=ke,this.label_.classList.add(Oe));const Ge=e.tipLabel?e.tipLabel:"Reset rotation",Be=document.createElement("button");Be.className=t+"-reset",Be.setAttribute("type","button"),Be.title=Ge,Be.appendChild(this.label_),Be.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const je=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,Ve=this.element;Ve.className=je,Ve.appendChild(Be),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const ke=t.getRotation();ke!==void 0&&(this.duration_>0&&ke%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:easeOut}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const ke=t.viewState.rotation;if(ke!=this.rotation_){const Oe="rotate("+ke+"rad)";if(this.autoHide_){const Ge=this.element.classList.contains(CLASS_HIDDEN);!Ge&&ke===0?this.element.classList.add(CLASS_HIDDEN):Ge&&ke!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=Oe}this.rotation_=ke}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",ke=e.delta!==void 0?e.delta:1,Oe=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",Ge=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",Be=e.zoomInLabel!==void 0?e.zoomInLabel:"+",je=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",Ve=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",Ze=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",Qe=document.createElement("button");Qe.className=Oe,Qe.setAttribute("type","button"),Qe.title=Ve,Qe.appendChild(typeof Be=="string"?document.createTextNode(Be):Be),Qe.addEventListener(EventType.CLICK,this.handleClick_.bind(this,ke),!1);const en=document.createElement("button");en.className=Ge,en.setAttribute("type","button"),en.title=Ze,en.appendChild(typeof je=="string"?document.createTextNode(je):je),en.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-ke),!1);const tn=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,an=this.element;an.className=tn,an.appendChild(Qe),an.appendChild(en),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const ke=this.getMap().getView();if(!ke)return;const Oe=ke.getZoom();if(Oe!==void 0){const Ge=ke.getConstrainedZoom(Oe+e);this.duration_>0?(ke.getAnimating()&&ke.cancelAnimations(),ke.animate({zoom:Ge,duration:this.duration_,easing:easeOut})):ke.setZoom(Ge)}}}function defaults$1(r){r=r||{};const e=new Collection;return(r.zoom!==void 0?r.zoom:!0)&&e.push(new Zoom(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&e.push(new Rotate(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&e.push(new Attribution(r.attributionOptions)),e}function removeLayerMapProperty(r){if(r instanceof Layer$1){r.setMapInternal(null);return}r instanceof LayerGroup&&r.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(r,e){if(r instanceof Layer$1){r.setMapInternal(e);return}if(r instanceof LayerGroup){const t=r.getLayers().getArray();for(let ke=0,Oe=t.length;ke<Oe;++ke)setLayerMapProperty(t[ke],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=createOptionsInternal(e);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create(),this.pixelToCoordinateTransform_=create(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||defaults$1(),this.interactions=t.interactions||defaults$2({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const ke=this;e.view&&!(e.view instanceof View)&&e.view.then(function(Oe){ke.setView(new View(Oe))}),this.controls.addEventListener(CollectionEventType.ADD,Oe=>{Oe.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,Oe=>{Oe.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,Oe=>{Oe.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,Oe=>{Oe.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,Oe=>{this.addOverlayInternal_(Oe.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,Oe=>{const Ge=Oe.element.getId();Ge!==void 0&&delete this.overlayIdIndex_[Ge.toString()],Oe.element.setMap(null)}),this.controls.forEach(Oe=>{Oe.setMap(this)}),this.interactions.forEach(Oe=>{Oe.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,ke){if(!this.frameState_||!this.renderer_)return;const Oe=this.getCoordinateFromPixelInternal(e);ke=ke!==void 0?ke:{};const Ge=ke.hitTolerance!==void 0?ke.hitTolerance:0,Be=ke.layerFilter!==void 0?ke.layerFilter:TRUE,je=ke.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(Oe,this.frameState_,Ge,je,t,null,Be,null)}getFeaturesAtPixel(e,t){const ke=[];return this.forEachFeatureAtPixel(e,function(Oe){ke.push(Oe)},t),ke}getAllLayers(){const e=[];function t(ke){ke.forEach(function(Oe){Oe instanceof LayerGroup?t(Oe.getLayers()):e.push(Oe)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const ke=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const Oe=t.layerFilter!==void 0?t.layerFilter:TRUE,Ge=t.hitTolerance!==void 0?t.hitTolerance:0,Be=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(ke,this.frameState_,Ge,Be,Oe,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const ke=this.viewport_.getBoundingClientRect(),Oe=this.getSize(),Ge=ke.width/Oe[0],Be=ke.height/Oe[1],je="changedTouches"in e?e.changedTouches[0]:e;return[(je.clientX-ke.left)/Ge,(je.clientY-ke.top)/Be]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?apply(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Collection){t.setLayers(e);return}const ke=t.getLayers();ke.clear(),ke.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,ke=e.length;t<ke;++t){const Oe=e[t];if(!Oe.visible)continue;const Ge=Oe.layer.getRenderer();if(Ge&&!Ge.ready)return!0;const Be=Oe.layer.getSource();if(Be&&Be.loading)return!0}return!1}getPixelFromCoordinate(e){const t=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?apply(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,ke,Oe){return getTilePriority(this.frameState_,e,t,ke,Oe)}handleBrowserEvent(e,t){t=t||e.type;const ke=new MapBrowserEvent(t,this,e);this.handleMapBrowserEvent(ke)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,ke=t.type;if(ke===PointerEventType.POINTERDOWN||ke===EventType.WHEEL||ke===EventType.KEYDOWN){const Oe=this.getOwnerDocument(),Ge=this.viewport_.getRootNode?this.viewport_.getRootNode():Oe,Be=t.target;if(this.overlayContainerStopEvent_.contains(Be)||!(Ge===Oe?Oe.documentElement:Ge).contains(Be))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const Oe=this.getInteractions().getArray().slice();for(let Ge=Oe.length-1;Ge>=0;Ge--){const Be=Oe[Ge];if(Be.getMap()!==this||!Be.getActive()||!this.getTargetElement())continue;if(!Be.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let Oe=this.maxTilesLoading_,Ge=Oe;if(e){const Be=e.viewHints;if(Be[ViewHint.ANIMATING]||Be[ViewHint.INTERACTING]){const je=Date.now()-e.time>8;Oe=je?0:8,Ge=je?0:2}}t.getTilesLoading()<Oe&&(t.reprioritize(),t.loadMoreTiles(Oe,Ge))}e&&this.renderer_&&!e.animate&&(this.renderComplete_===!0?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const ke=this.postRenderFunctions_;for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe)ke[Oe](this,e);ke.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let ke=0,Oe=this.targetChangeHandlerKeys_.length;ke<Oe;++ke)unlistenByKey(this.targetChangeHandlerKeys_[ke]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,removeNode(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const ke=this.targetElement_.getRootNode();ke instanceof ShadowRoot&&this.resizeObserver_.unobserve(ke.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const Ge in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[Ge],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);const ke=this.keyboardEventTarget_?this.keyboardEventTarget_:t;this.targetChangeHandlerKeys_=[listen(ke,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(ke,EventType.KEYPRESS,this.handleBrowserEvent,this)];const Oe=t.getRootNode();Oe instanceof ShadowRoot&&this.resizeObserver_.observe(Oe.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,ke=e.length;t<ke;++t){const Oe=e[t].layer;Oe.hasRenderer()&&Oe.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}flushDeclutterItems(){const e=this.frameState_;e&&this.renderer_.flushDeclutterItems(e)}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),ke=this.getView(),Oe=this.frameState_;let Ge=null;if(t!==void 0&&hasArea(t)&&ke&&ke.isDef()){const Be=ke.getHints(this.frameState_?this.frameState_.viewHints:void 0),je=ke.getState();if(Ge={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutterTree:null,extent:getForViewAndSize(je.center,je.resolution,je.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:je,viewHints:Be,wantedTiles:{},mapId:getUid(this),renderTargets:{}},je.nextCenter&&je.nextResolution){const Ve=isNaN(je.nextRotation)?je.rotation:je.nextRotation;Ge.nextExtent=getForViewAndSize(je.nextCenter,je.nextResolution,Ve,t)}}this.frameState_=Ge,this.renderer_.renderFrame(Ge),Ge&&(Ge.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Ge.postRenderFunctions),Oe&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(Ge.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,Oe)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!Ge.viewHints[ViewHint.ANIMATING]&&!Ge.viewHints[ViewHint.INTERACTING]&&!equals$1(Ge.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,Ge)),clone$1(Ge.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,Ge)),this.renderComplete_=this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new GroupEvent("removelayer",t)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const t=this;e.then(function(ke){t.setView(new View(ke))})}updateSize(){const e=this.getTargetElement();let t;if(e){const Oe=getComputedStyle(e),Ge=e.offsetWidth-parseFloat(Oe.borderLeftWidth)-parseFloat(Oe.paddingLeft)-parseFloat(Oe.paddingRight)-parseFloat(Oe.borderRightWidth),Be=e.offsetHeight-parseFloat(Oe.borderTopWidth)-parseFloat(Oe.paddingTop)-parseFloat(Oe.paddingBottom)-parseFloat(Oe.borderBottomWidth);!isNaN(Ge)&&!isNaN(Be)&&(t=[Ge,Be],!hasArea(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const ke=this.getSize();t&&(!ke||!equals$2(t,ke))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function createOptionsInternal(r){let e=null;r.keyboardEventTarget!==void 0&&(e=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const t={},ke=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new LayerGroup({layers:r.layers});t[MapProperty.LAYERGROUP]=ke,t[MapProperty.TARGET]=r.target,t[MapProperty.VIEW]=r.view instanceof View?r.view:new View;let Oe;r.controls!==void 0&&(Array.isArray(r.controls)?Oe=new Collection(r.controls.slice()):(assert(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),Oe=r.controls));let Ge;r.interactions!==void 0&&(Array.isArray(r.interactions)?Ge=new Collection(r.interactions.slice()):(assert(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),Ge=r.interactions));let Be;return r.overlays!==void 0?Array.isArray(r.overlays)?Be=new Collection(r.overlays.slice()):(assert(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),Be=r.overlays):Be=new Collection,{controls:Oe,interactions:Ge,keyboardEventTarget:e,overlays:Be,values:t}}function getDefaultExportFromCjs(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var csscolorparser={},parseCSSColor_1,kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(r){return r=Math.round(r),r<0?0:r>255?255:r}function clamp_css_float(r){return r<0?0:r>1?1:r}function parse_css_int(r){return r[r.length-1]==="%"?clamp_css_byte(parseFloat(r)/100*255):clamp_css_byte(parseInt(r))}function parse_css_float(r){return r[r.length-1]==="%"?clamp_css_float(parseFloat(r)/100):clamp_css_float(parseFloat(r))}function css_hue_to_rgb(r,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?r+(e-r)*t*6:t*2<1?e:t*3<2?r+(e-r)*(2/3-t)*6:r}function parseCSSColor(r){var e=r.replace(/ /g,"").toLowerCase();if(e in kCSSColorTable)return kCSSColorTable[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var ke=e.indexOf("("),Oe=e.indexOf(")");if(ke!==-1&&Oe+1===e.length){var Ge=e.substr(0,ke),Be=e.substr(ke+1,Oe-(ke+1)).split(","),je=1;switch(Ge){case"rgba":if(Be.length!==4)return null;je=parse_css_float(Be.pop());case"rgb":return Be.length!==3?null:[parse_css_int(Be[0]),parse_css_int(Be[1]),parse_css_int(Be[2]),je];case"hsla":if(Be.length!==4)return null;je=parse_css_float(Be.pop());case"hsl":if(Be.length!==3)return null;var Ve=(parseFloat(Be[0])%360+360)%360/360,Ze=parse_css_float(Be[1]),Qe=parse_css_float(Be[2]),en=Qe<=.5?Qe*(Ze+1):Qe+Ze-Qe*Ze,tn=Qe*2-en;return[clamp_css_byte(css_hue_to_rgb(tn,en,Ve+1/3)*255),clamp_css_byte(css_hue_to_rgb(tn,en,Ve)*255),clamp_css_byte(css_hue_to_rgb(tn,en,Ve-1/3)*255),je];default:return null}}return null}try{parseCSSColor_1=csscolorparser.parseCSSColor=parseCSSColor}catch{}class Color{constructor(e,t,ke,Oe=1){this.r=e,this.g=t,this.b=ke,this.a=Oe}static parse(e){if(!e)return;if(e instanceof Color)return e;if(typeof e!="string")return;const t=parseCSSColor_1(e);if(t)return new Color(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,ke,Oe]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(ke)},${Oe})`}toArray(){const{r:e,g:t,b:ke,a:Oe}=this;return Oe===0?[0,0,0,0]:[e*255/Oe,t*255/Oe,ke*255/Oe,Oe]}toArray01(){const{r:e,g:t,b:ke,a:Oe}=this;return Oe===0?[0,0,0,0]:[e/Oe,t/Oe,ke/Oe,Oe]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:ke,a:Oe}=this;return[e,t,ke,Oe]}}Color.black=new Color(0,0,0,1);Color.white=new Color(1,1,1,1);Color.transparent=new Color(0,0,0,0);Color.red=new Color(1,0,0,1);Color.blue=new Color(0,0,1,1);var Color$1=Color;function convertLiteral(r){return typeof r=="object"?["literal",r]:r}function convertFunction(r,e){let t=r.stops;if(!t)return convertIdentityFunction(r,e);const ke=t&&typeof t[0][0]=="object",Oe=ke||r.property!==void 0,Ge=ke||!Oe;return t=t.map(Be=>!Oe&&e.tokens&&typeof Be[1]=="string"?[Be[0],convertTokenString(Be[1])]:[Be[0],convertLiteral(Be[1])]),ke?convertZoomAndPropertyFunction(r,e,t):Ge?convertZoomFunction(r,e,t):convertPropertyFunction(r,e,t)}function convertIdentityFunction(r,e){const t=["get",r.property];if(r.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,r.default];{const ke=[e.type==="color"?"to-color":e.type,t,convertLiteral(r.default)];return e.type==="array"&&ke.splice(1,0,e.value,e.length||null),ke}}function getInterpolateOperator(r){switch(r.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(r,e,t){const ke={},Oe={},Ge=[];for(let je=0;je<t.length;je++){const Ve=t[je],Ze=Ve[0].zoom;ke[Ze]===void 0&&(ke[Ze]={zoom:Ze,type:r.type,property:r.property,default:r.default},Oe[Ze]=[],Ge.push(Ze)),Oe[Ze].push([Ve[0].value,Ve[1]])}if(getFunctionType({},e)==="exponential"){const je=[getInterpolateOperator(r),["linear"],["zoom"]];for(const Ve of Ge){const Ze=convertPropertyFunction(ke[Ve],e,Oe[Ve]);appendStopPair(je,Ve,Ze,!1)}return je}else{const je=["step",["zoom"]];for(const Ve of Ge){const Ze=convertPropertyFunction(ke[Ve],e,Oe[Ve]);appendStopPair(je,Ve,Ze,!0)}return fixupDegenerateStepCurve(je),je}}function coalesce(r,e){if(r!==void 0)return r;if(e!==void 0)return e}function getFallback(r,e){const t=convertLiteral(coalesce(r.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function convertPropertyFunction(r,e,t){const ke=getFunctionType(r,e),Oe=["get",r.property];if(ke==="categorical"&&typeof t[0][0]=="boolean"){const Ge=["case"];for(const Be of t)Ge.push(["==",Oe,Be[0]],Be[1]);return Ge.push(getFallback(r,e)),Ge}else if(ke==="categorical"){const Ge=["match",Oe];for(const Be of t)appendStopPair(Ge,Be[0],Be[1],!1);return Ge.push(getFallback(r,e)),Ge}else if(ke==="interval"){const Ge=["step",["number",Oe]];for(const Be of t)appendStopPair(Ge,Be[0],Be[1],!0);return fixupDegenerateStepCurve(Ge),r.default===void 0?Ge:["case",["==",["typeof",Oe],"number"],Ge,convertLiteral(r.default)]}else if(ke==="exponential"){const Ge=r.base!==void 0?r.base:1,Be=[getInterpolateOperator(r),Ge===1?["linear"]:["exponential",Ge],["number",Oe]];for(const je of t)appendStopPair(Be,je[0],je[1],!1);return r.default===void 0?Be:["case",["==",["typeof",Oe],"number"],Be,convertLiteral(r.default)]}else throw new Error(`Unknown property function type ${ke}`)}function convertZoomFunction(r,e,t,ke=["zoom"]){const Oe=getFunctionType(r,e);let Ge,Be=!1;if(Oe==="interval")Ge=["step",ke],Be=!0;else if(Oe==="exponential"){const je=r.base!==void 0?r.base:1;Ge=[getInterpolateOperator(r),je===1?["linear"]:["exponential",je],ke]}else throw new Error(`Unknown zoom function type "${Oe}"`);for(const je of t)appendStopPair(Ge,je[0],je[1],Be);return fixupDegenerateStepCurve(Ge),Ge}function fixupDegenerateStepCurve(r){r[0]==="step"&&r.length===3&&(r.push(0),r.push(r[3]))}function appendStopPair(r,e,t,ke){r.length>3&&e===r[r.length-2]||(ke&&r.length===2||r.push(e),r.push(t))}function getFunctionType(r,e){return r.type?r.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(r){const e=["concat"],t=/{([^{}]+)}/g;let ke=0;for(let Oe=t.exec(r);Oe!==null;Oe=t.exec(r)){const Ge=r.slice(ke,t.lastIndex-Oe[0].length);ke=t.lastIndex,Ge.length>0&&e.push(Ge),e.push(["get",Oe[1]])}if(e.length===1)return r;if(ke<r.length)e.push(r.slice(ke));else if(e.length===2)return["to-string",e[1]];return e}class ParsingError extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var ParsingError$1=ParsingError;class Scope{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[ke,Oe]of t)this.bindings[ke]=Oe}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Scope$1=Scope;const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},ResolvedImageType={kind:"resolvedImage"};function array$1(r,e){return{kind:"array",itemType:r,N:e}}function toString$1(r){if(r.kind==="array"){const e=toString$1(r.itemType);return typeof r.N=="number"?`array<${e}, ${r.N}>`:r.itemType.kind==="value"?"array":`array<${e}>`}else return r.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,FormattedType,ObjectType,array$1(ValueType),ResolvedImageType];function checkSubtype(r,e){if(e.kind==="error")return null;if(r.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(r.itemType,e.itemType))&&(typeof r.N!="number"||r.N===e.N))return null}else{if(r.kind===e.kind)return null;if(r.kind==="value"){for(const t of valueMemberTypes)if(!checkSubtype(t,e))return null}}return`Expected ${toString$1(r)} but found ${toString$1(e)} instead.`}function isValidType(r,e){return e.some(t=>t.kind===r.kind)}function isValidNativeType(r,e){return e.some(t=>t==="null"?r===null:t==="array"?Array.isArray(r):t==="object"?r&&!Array.isArray(r)&&typeof r=="object":t===typeof r)}class Collator{constructor(e,t,ke){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=ke,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class FormattedSection{constructor(e,t,ke,Oe,Ge){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=ke,this.fontStack=Oe,this.textColor=Ge}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const ke={};t.fontStack&&(ke["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(ke["font-scale"]=t.scale),t.textColor&&(ke["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(ke)}return e}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}serialize(){return["image",this.name]}}function validateRGBA(r,e,t,ke){return typeof r=="number"&&r>=0&&r<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof ke>"u"||typeof ke=="number"&&ke>=0&&ke<=1?null:`Invalid rgba value [${[r,e,t,ke].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof ke=="number"?[r,e,t,ke]:[r,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(r){if(r===null)return!0;if(typeof r=="string")return!0;if(typeof r=="boolean")return!0;if(typeof r=="number")return!0;if(r instanceof Color$1)return!0;if(r instanceof Collator)return!0;if(r instanceof Formatted)return!0;if(r instanceof ResolvedImage)return!0;if(Array.isArray(r)){for(const e of r)if(!isValue(e))return!1;return!0}else if(typeof r=="object"){for(const e in r)if(!isValue(r[e]))return!1;return!0}else return!1}function typeOf(r){if(r===null)return NullType;if(typeof r=="string")return StringType;if(typeof r=="boolean")return BooleanType;if(typeof r=="number")return NumberType;if(r instanceof Color$1)return ColorType;if(r instanceof Collator)return CollatorType;if(r instanceof Formatted)return FormattedType;if(r instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(r)){const e=r.length;let t;for(const ke of r){const Oe=typeOf(ke);if(!t)t=Oe;else{if(t===Oe)continue;t=ValueType;break}}return array$1(t||ValueType,e)}else return ObjectType}function toString(r){const e=typeof r;return r===null?"":e==="string"||e==="number"||e==="boolean"?String(r):r instanceof Color$1||r instanceof Formatted||r instanceof ResolvedImage?r.toString():JSON.stringify(r)}class Literal{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return t.error("invalid value");const ke=e[1];let Oe=typeOf(ke);const Ge=t.expectedType;return Oe.kind==="array"&&Oe.N===0&&Ge&&Ge.kind==="array"&&(typeof Ge.N!="number"||Ge.N===0)&&(Oe=Ge),new Literal(Oe,ke)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Color$1?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value}}var Literal$1=Literal;class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var RuntimeError$1=RuntimeError;const types$2={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let ke=1,Oe;const Ge=e[0];if(Ge==="array"){let je;if(e.length>2){const Ze=e[1];if(typeof Ze!="string"||!(Ze in types$2)||Ze==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);je=types$2[Ze],ke++}else je=ValueType;let Ve;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);Ve=e[2],ke++}Oe=array$1(je,Ve)}else Oe=types$2[Ge];const Be=[];for(;ke<e.length;ke++){const je=t.parse(e[ke],ke,ValueType);if(!je)return null;Be.push(je)}return new Assertion(Oe,Be)}evaluate(e){for(let t=0;t<this.args.length;t++){const ke=this.args[t].evaluate(e);if(checkSubtype(this.type,typeOf(ke))){if(t===this.args.length-1)throw new RuntimeError$1(`Expected value to be of type ${toString$1(this.type)}, but found ${toString$1(typeOf(ke))} instead.`)}else return ke}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const ke=e.itemType;if(ke.kind==="string"||ke.kind==="number"||ke.kind==="boolean"){t.push(ke.kind);const Oe=e.N;(typeof Oe=="number"||this.args.length>1)&&t.push(Oe)}}return t.concat(this.args.map(ke=>ke.serialize()))}}var Assertion$1=Assertion;class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const ke=e[1];if(!Array.isArray(ke)&&typeof ke=="object")return t.error("First argument must be an image or text section.");const Oe=[];let Ge=!1;for(let Be=1;Be<=e.length-1;++Be){const je=e[Be];if(Ge&&typeof je=="object"&&!Array.isArray(je)){Ge=!1;let Ve=null;if(je["font-scale"]&&(Ve=t.parse(je["font-scale"],1,NumberType),!Ve))return null;let Ze=null;if(je["text-font"]&&(Ze=t.parse(je["text-font"],1,array$1(StringType)),!Ze))return null;let Qe=null;if(je["text-color"]&&(Qe=t.parse(je["text-color"],1,ColorType),!Qe))return null;const en=Oe[Oe.length-1];en.scale=Ve,en.font=Ze,en.textColor=Qe}else{const Ve=t.parse(e[Be],1,ValueType);if(!Ve)return null;const Ze=Ve.type.kind;if(Ze!=="string"&&Ze!=="value"&&Ze!=="null"&&Ze!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Ge=!0,Oe.push({content:Ve,scale:null,font:null,textColor:null})}}return new FormatExpression(Oe)}evaluate(e){const t=ke=>{const Oe=ke.content.evaluate(e);return typeOf(Oe)===ResolvedImageType?new FormattedSection("",Oe,null,null,null):new FormattedSection(toString(Oe),null,ke.scale?ke.scale.evaluate(e):null,ke.font?ke.font.evaluate(e).join(","):null,ke.textColor?ke.textColor.evaluate(e):null)};return new Formatted(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const ke={};t.scale&&(ke["font-scale"]=t.scale.serialize()),t.font&&(ke["text-font"]=t.font.serialize()),t.textColor&&(ke["text-color"]=t.textColor.serialize()),e.push(ke)}return e}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const ke=t.parse(e[1],1,StringType);return ke?new ImageExpression(ke):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),ke=ResolvedImage.fromString(t);return ke&&e.availableImages&&(ke.available=e.availableImages.indexOf(t)>-1),ke}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const types$1={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const ke=e[0];if((ke==="to-boolean"||ke==="to-string")&&e.length!==2)return t.error("Expected one argument.");const Oe=types$1[ke],Ge=[];for(let Be=1;Be<e.length;Be++){const je=t.parse(e[Be],Be,ValueType);if(!je)return null;Ge.push(je)}return new Coercion(Oe,Ge)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,ke;for(const Oe of this.args){if(t=Oe.evaluate(e),ke=null,t instanceof Color$1)return t;if(typeof t=="string"){const Ge=e.parseColor(t);if(Ge)return Ge}else if(Array.isArray(t)&&(t.length<3||t.length>4?ke=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:ke=validateRGBA(t[0],t[1],t[2],t[3]),!ke))return new Color$1(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new RuntimeError$1(ke||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const ke of this.args){if(t=ke.evaluate(e),t===null)return 0;const Oe=Number(t);if(!isNaN(Oe))return Oe}throw new RuntimeError$1(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Formatted.fromString(toString(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ResolvedImage.fromString(toString(this.args[0].evaluate(e))):toString(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ImageExpression(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Coercion$1=Coercion;const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:ke,y:Oe}=this.featureTileCoord,Ge=ke*t-e[0],Be=Oe*t-e[1],je=this.featureDistanceData.bearing[0],Ve=this.featureDistanceData.bearing[1];return je*Ge+Ve*Be}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Color$1.parse(e)),t}}var EvaluationContext$1=EvaluationContext;class CompoundExpression{constructor(e,t,ke,Oe){this.name=e,this.type=t,this._evaluate=ke,this.args=Oe}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const ke=e[0],Oe=CompoundExpression.definitions[ke];if(!Oe)return t.error(`Unknown expression "${ke}". If you wanted a literal array, use ["literal", [...]].`,0);const Ge=Array.isArray(Oe)?Oe[0]:Oe.type,Be=Array.isArray(Oe)?[[Oe[1],Oe[2]]]:Oe.overloads,je=Be.filter(([Ze])=>!Array.isArray(Ze)||Ze.length===e.length-1);let Ve=null;for(const[Ze,Qe]of je){Ve=new ParsingContext$1(t.registry,t.path,null,t.scope);const en=[];let tn=!1;for(let an=1;an<e.length;an++){const cn=e[an],dn=Array.isArray(Ze)?Ze[an-1]:Ze.type,hn=Ve.parse(cn,1+en.length,dn);if(!hn){tn=!0;break}en.push(hn)}if(!tn){if(Array.isArray(Ze)&&Ze.length!==en.length){Ve.error(`Expected ${Ze.length} arguments, but found ${en.length} instead.`);continue}for(let an=0;an<en.length;an++){const cn=Array.isArray(Ze)?Ze[an]:Ze.type,dn=en[an];Ve.concat(an+1).checkSubtype(cn,dn.type)}if(Ve.errors.length===0)return new CompoundExpression(ke,Ge,Qe,en)}}if(je.length===1)t.errors.push(...Ve.errors);else{const Qe=(je.length?je:Be).map(([tn])=>stringifySignature(tn)).join(" | "),en=[];for(let tn=1;tn<e.length;tn++){const an=t.parse(e[tn],1+en.length);if(!an)return null;en.push(toString$1(an.type))}t.error(`Expected arguments of type ${Qe}, but found (${en.join(", ")}) instead.`)}return null}static register(e,t){CompoundExpression.definitions=t;for(const ke in t)e[ke]=CompoundExpression}}function stringifySignature(r){return Array.isArray(r)?`(${r.map(toString$1).join(", ")})`:`(${toString$1(r.type)}...)`}var CompoundExpression$1=CompoundExpression;class CollatorExpression{constructor(e,t,ke){this.type=CollatorType,this.locale=ke,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const ke=e[1];if(typeof ke!="object"||Array.isArray(ke))return t.error("Collator options argument must be an object.");const Oe=t.parse(ke["case-sensitive"]===void 0?!1:ke["case-sensitive"],1,BooleanType);if(!Oe)return null;const Ge=t.parse(ke["diacritic-sensitive"]===void 0?!1:ke["diacritic-sensitive"],1,BooleanType);if(!Ge)return null;let Be=null;return ke.locale&&(Be=t.parse(ke.locale,1,StringType),!Be)?null:new CollatorExpression(Oe,Ge,Be)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const EXTENT=8192;function updateBBox(r,e){r[0]=Math.min(r[0],e[0]),r[1]=Math.min(r[1],e[1]),r[2]=Math.max(r[2],e[0]),r[3]=Math.max(r[3],e[1])}function mercatorXfromLng(r){return(180+r)/360}function mercatorYfromLat(r){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360}function boxWithinBox(r,e){return!(r[0]<=e[0]||r[2]>=e[2]||r[1]<=e[1]||r[3]>=e[3])}function getTileCoordinates(r,e){const t=mercatorXfromLng(r[0]),ke=mercatorYfromLat(r[1]),Oe=Math.pow(2,e.z);return[Math.round(t*Oe*EXTENT),Math.round(ke*Oe*EXTENT)]}function onBoundary(r,e,t){const ke=r[0]-e[0],Oe=r[1]-e[1],Ge=r[0]-t[0],Be=r[1]-t[1];return ke*Be-Ge*Oe===0&&ke*Ge<=0&&Oe*Be<=0}function rayIntersect(r,e,t){return e[1]>r[1]!=t[1]>r[1]&&r[0]<(t[0]-e[0])*(r[1]-e[1])/(t[1]-e[1])+e[0]}function pointWithinPolygon(r,e){let t=!1;for(let ke=0,Oe=e.length;ke<Oe;ke++){const Ge=e[ke];for(let Be=0,je=Ge.length;Be<je-1;Be++){if(onBoundary(r,Ge[Be],Ge[Be+1]))return!1;rayIntersect(r,Ge[Be],Ge[Be+1])&&(t=!t)}}return t}function pointWithinPolygons(r,e){for(let t=0;t<e.length;t++)if(pointWithinPolygon(r,e[t]))return!0;return!1}function perp(r,e){return r[0]*e[1]-r[1]*e[0]}function twoSided(r,e,t,ke){const Oe=r[0]-t[0],Ge=r[1]-t[1],Be=e[0]-t[0],je=e[1]-t[1],Ve=ke[0]-t[0],Ze=ke[1]-t[1],Qe=Oe*Ze-Ve*Ge,en=Be*Ze-Ve*je;return Qe>0&&en<0||Qe<0&&en>0}function lineIntersectLine(r,e,t,ke){const Oe=[e[0]-r[0],e[1]-r[1]],Ge=[ke[0]-t[0],ke[1]-t[1]];return perp(Ge,Oe)===0?!1:!!(twoSided(r,e,t,ke)&&twoSided(t,ke,r,e))}function lineIntersectPolygon(r,e,t){for(const ke of t)for(let Oe=0;Oe<ke.length-1;++Oe)if(lineIntersectLine(r,e,ke[Oe],ke[Oe+1]))return!0;return!1}function lineStringWithinPolygon(r,e){for(let t=0;t<r.length;++t)if(!pointWithinPolygon(r[t],e))return!1;for(let t=0;t<r.length-1;++t)if(lineIntersectPolygon(r[t],r[t+1],e))return!1;return!0}function lineStringWithinPolygons(r,e){for(let t=0;t<e.length;t++)if(lineStringWithinPolygon(r,e[t]))return!0;return!1}function getTilePolygon(r,e,t){const ke=[];for(let Oe=0;Oe<r.length;Oe++){const Ge=[];for(let Be=0;Be<r[Oe].length;Be++){const je=getTileCoordinates(r[Oe][Be],t);updateBBox(e,je),Ge.push(je)}ke.push(Ge)}return ke}function getTilePolygons(r,e,t){const ke=[];for(let Oe=0;Oe<r.length;Oe++){const Ge=getTilePolygon(r[Oe],e,t);ke.push(Ge)}return ke}function updatePoint(r,e,t,ke){if(r[0]<t[0]||r[0]>t[2]){const Oe=ke*.5;let Ge=r[0]-t[0]>Oe?-ke:t[0]-r[0]>Oe?ke:0;Ge===0&&(Ge=r[0]-t[2]>Oe?-ke:t[2]-r[0]>Oe?ke:0),r[0]+=Ge}updateBBox(e,r)}function resetBBox(r){r[0]=r[1]=1/0,r[2]=r[3]=-1/0}function getTilePoints(r,e,t,ke){const Oe=Math.pow(2,ke.z)*EXTENT,Ge=[ke.x*EXTENT,ke.y*EXTENT],Be=[];if(!r)return Be;for(const je of r)for(const Ve of je){const Ze=[Ve.x+Ge[0],Ve.y+Ge[1]];updatePoint(Ze,e,t,Oe),Be.push(Ze)}return Be}function getTileLines(r,e,t,ke){const Oe=Math.pow(2,ke.z)*EXTENT,Ge=[ke.x*EXTENT,ke.y*EXTENT],Be=[];if(!r)return Be;for(const je of r){const Ve=[];for(const Ze of je){const Qe=[Ze.x+Ge[0],Ze.y+Ge[1]];updateBBox(e,Qe),Ve.push(Qe)}Be.push(Ve)}if(e[2]-e[0]<=Oe/2){resetBBox(e);for(const je of Be)for(const Ve of je)updatePoint(Ve,e,t,Oe)}return Be}function pointsWithinPolygons(r,e){const t=[1/0,1/0,-1/0,-1/0],ke=[1/0,1/0,-1/0,-1/0],Oe=r.canonicalID();if(!Oe)return!1;if(e.type==="Polygon"){const Ge=getTilePolygon(e.coordinates,ke,Oe),Be=getTilePoints(r.geometry(),t,ke,Oe);if(!boxWithinBox(t,ke))return!1;for(const je of Be)if(!pointWithinPolygon(je,Ge))return!1}if(e.type==="MultiPolygon"){const Ge=getTilePolygons(e.coordinates,ke,Oe),Be=getTilePoints(r.geometry(),t,ke,Oe);if(!boxWithinBox(t,ke))return!1;for(const je of Be)if(!pointWithinPolygons(je,Ge))return!1}return!0}function linesWithinPolygons(r,e){const t=[1/0,1/0,-1/0,-1/0],ke=[1/0,1/0,-1/0,-1/0],Oe=r.canonicalID();if(!Oe)return!1;if(e.type==="Polygon"){const Ge=getTilePolygon(e.coordinates,ke,Oe),Be=getTileLines(r.geometry(),t,ke,Oe);if(!boxWithinBox(t,ke))return!1;for(const je of Be)if(!lineStringWithinPolygon(je,Ge))return!1}if(e.type==="MultiPolygon"){const Ge=getTilePolygons(e.coordinates,ke,Oe),Be=getTileLines(r.geometry(),t,ke,Oe);if(!boxWithinBox(t,ke))return!1;for(const je of Be)if(!lineStringWithinPolygons(je,Ge))return!1}return!0}class Within{constructor(e,t){this.type=BooleanType,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const ke=e[1];if(ke.type==="FeatureCollection")for(let Oe=0;Oe<ke.features.length;++Oe){const Ge=ke.features[Oe].geometry.type;if(Ge==="Polygon"||Ge==="MultiPolygon")return new Within(ke,ke.features[Oe].geometry)}else if(ke.type==="Feature"){const Oe=ke.geometry.type;if(Oe==="Polygon"||Oe==="MultiPolygon")return new Within(ke,ke.geometry)}else if(ke.type==="Polygon"||ke.type==="MultiPolygon")return new Within(ke,ke)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Within$1=Within;function isFeatureConstant(r){if(r instanceof CompoundExpression$1){if(r.name==="get"&&r.args.length===1)return!1;if(r.name==="feature-state")return!1;if(r.name==="has"&&r.args.length===1)return!1;if(r.name==="properties"||r.name==="geometry-type"||r.name==="id")return!1;if(/^filter-/.test(r.name))return!1}if(r instanceof Within$1)return!1;let e=!0;return r.eachChild(t=>{e&&!isFeatureConstant(t)&&(e=!1)}),e}function isStateConstant(r){if(r instanceof CompoundExpression$1&&r.name==="feature-state")return!1;let e=!0;return r.eachChild(t=>{e&&!isStateConstant(t)&&(e=!1)}),e}function isGlobalPropertyConstant(r,e){if(r instanceof CompoundExpression$1&&e.indexOf(r.name)>=0)return!1;let t=!0;return r.eachChild(ke=>{t&&!isGlobalPropertyConstant(ke,e)&&(t=!1)}),t}class Var{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const ke=e[1];return t.scope.has(ke)?new Var(ke,t.scope.get(ke)):t.error(`Unknown variable "${ke}". Make sure "${ke}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Var$1=Var;class ParsingContext{constructor(e,t=[],ke,Oe=new Scope$1,Ge=[]){this.registry=e,this.path=t,this.key=t.map(Be=>`[${Be}]`).join(""),this.scope=Oe,this.errors=Ge,this.expectedType=ke}parse(e,t,ke,Oe,Ge={}){return t?this.concat(t,ke,Oe)._parse(e,Ge):this._parse(e,Ge)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function ke(Oe,Ge,Be){return Be==="assert"?new Assertion$1(Ge,[Oe]):Be==="coerce"?new Coercion$1(Ge,[Oe]):Oe}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const Oe=e[0];if(typeof Oe!="string")return this.error(`Expression name must be a string, but found ${typeof Oe} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const Ge=this.registry[Oe];if(Ge){let Be=Ge.parse(e,this);if(!Be)return null;if(this.expectedType){const je=this.expectedType,Ve=Be.type;if((je.kind==="string"||je.kind==="number"||je.kind==="boolean"||je.kind==="object"||je.kind==="array")&&Ve.kind==="value")Be=ke(Be,je,t.typeAnnotation||"assert");else if((je.kind==="color"||je.kind==="formatted"||je.kind==="resolvedImage")&&(Ve.kind==="value"||Ve.kind==="string"))Be=ke(Be,je,t.typeAnnotation||"coerce");else if(this.checkSubtype(je,Ve))return null}if(!(Be instanceof Literal$1)&&Be.type.kind!=="resolvedImage"&&isConstant(Be)){const je=new EvaluationContext$1;try{Be=new Literal$1(Be.type,Be.evaluate(je))}catch(Ve){return this.error(Ve.message),null}}return Be}return this.error(`Unknown expression "${Oe}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,ke){const Oe=typeof e=="number"?this.path.concat(e):this.path,Ge=ke?this.scope.concat(ke):this.scope;return new ParsingContext(this.registry,Oe,t||null,Ge,this.errors)}error(e,...t){const ke=`${this.key}${t.map(Oe=>`[${Oe}]`).join("")}`;this.errors.push(new ParsingError$1(ke,e))}checkSubtype(e,t){const ke=checkSubtype(e,t);return ke&&this.error(ke),ke}}var ParsingContext$1=ParsingContext;function isConstant(r){if(r instanceof Var$1)return isConstant(r.boundExpression);if(r instanceof CompoundExpression$1&&r.name==="error")return!1;if(r instanceof CollatorExpression)return!1;if(r instanceof Within$1)return!1;const e=r instanceof Coercion$1||r instanceof Assertion$1;let t=!0;return r.eachChild(ke=>{e?t=t&&isConstant(ke):t=t&&ke instanceof Literal$1}),t?isFeatureConstant(r)&&isGlobalPropertyConstant(r,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function findStopLessThanOrEqualTo(r,e){const t=r.length-1;let ke=0,Oe=t,Ge=0,Be,je;for(;ke<=Oe;)if(Ge=Math.floor((ke+Oe)/2),Be=r[Ge],je=r[Ge+1],Be<=e){if(Ge===t||e<je)return Ge;ke=Ge+1}else if(Be>e)Oe=Ge-1;else throw new RuntimeError$1("Input is not a number.");return 0}class Step{constructor(e,t,ke){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[Oe,Ge]of ke)this.labels.push(Oe),this.outputs.push(Ge)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const ke=t.parse(e[1],1,NumberType);if(!ke)return null;const Oe=[];let Ge=null;t.expectedType&&t.expectedType.kind!=="value"&&(Ge=t.expectedType);for(let Be=1;Be<e.length;Be+=2){const je=Be===1?-1/0:e[Be],Ve=e[Be+1],Ze=Be,Qe=Be+1;if(typeof je!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ze);if(Oe.length&&Oe[Oe.length-1][0]>=je)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Ze);const en=t.parse(Ve,Qe,Ge);if(!en)return null;Ge=Ge||en.type,Oe.push([je,en])}return new Step(Ge,ke,Oe)}evaluate(e){const t=this.labels,ke=this.outputs;if(t.length===1)return ke[0].evaluate(e);const Oe=this.input.evaluate(e);if(Oe<=t[0])return ke[0].evaluate(e);const Ge=t.length;if(Oe>=t[Ge-1])return ke[Ge-1].evaluate(e);const Be=findStopLessThanOrEqualTo(t,Oe);return ke[Be].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Step$1=Step,unitbezier=UnitBezier;function UnitBezier(r,e,t,ke){this.cx=3*r,this.bx=3*(t-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(ke-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=ke,this.p2x=t,this.p2y=ke}UnitBezier.prototype.sampleCurveX=function(r){return((this.ax*r+this.bx)*r+this.cx)*r};UnitBezier.prototype.sampleCurveY=function(r){return((this.ay*r+this.by)*r+this.cy)*r};UnitBezier.prototype.sampleCurveDerivativeX=function(r){return(3*this.ax*r+2*this.bx)*r+this.cx};UnitBezier.prototype.solveCurveX=function(r,e){typeof e>"u"&&(e=1e-6);var t,ke,Oe,Ge,Be;for(Oe=r,Be=0;Be<8;Be++){if(Ge=this.sampleCurveX(Oe)-r,Math.abs(Ge)<e)return Oe;var je=this.sampleCurveDerivativeX(Oe);if(Math.abs(je)<1e-6)break;Oe=Oe-Ge/je}if(t=0,ke=1,Oe=r,Oe<t)return t;if(Oe>ke)return ke;for(;t<ke;){if(Ge=this.sampleCurveX(Oe),Math.abs(Ge-r)<e)return Oe;r>Ge?t=Oe:ke=Oe,Oe=(ke-t)*.5+t}return Oe};UnitBezier.prototype.solve=function(r,e){return this.sampleCurveY(this.solveCurveX(r,e))};var UnitBezier$1=getDefaultExportFromCjs(unitbezier);function number(r,e,t){return r*(1-t)+e*t}function color(r,e,t){return new Color$1(number(r.r,e.r,t),number(r.g,e.g,t),number(r.b,e.b,t),number(r.a,e.a,t))}function array(r,e,t){return r.map((ke,Oe)=>number(ke,e[Oe],t))}var interpolate=Object.freeze({__proto__:null,number,color,array});const Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function xyz2lab(r){return r>t3?Math.pow(r,1/3):r/t2+t0}function lab2xyz(r){return r>t1?r*r*r:t2*(r-t0)}function xyz2rgb(r){return 255*(r<=.0031308?12.92*r:1.055*Math.pow(r,1/2.4)-.055)}function rgb2xyz(r){return r/=255,r<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function rgbToLab(r){const e=rgb2xyz(r.r),t=rgb2xyz(r.g),ke=rgb2xyz(r.b),Oe=xyz2lab((.4124564*e+.3575761*t+.1804375*ke)/Xn),Ge=xyz2lab((.2126729*e+.7151522*t+.072175*ke)/Yn),Be=xyz2lab((.0193339*e+.119192*t+.9503041*ke)/Zn);return{l:116*Ge-16,a:500*(Oe-Ge),b:200*(Ge-Be),alpha:r.a}}function labToRgb(r){let e=(r.l+16)/116,t=isNaN(r.a)?e:e+r.a/500,ke=isNaN(r.b)?e:e-r.b/200;return e=Yn*lab2xyz(e),t=Xn*lab2xyz(t),ke=Zn*lab2xyz(ke),new Color$1(xyz2rgb(3.2404542*t-1.5371385*e-.4985314*ke),xyz2rgb(-.969266*t+1.8760108*e+.041556*ke),xyz2rgb(.0556434*t-.2040259*e+1.0572252*ke),r.alpha)}function interpolateLab(r,e,t){return{l:number(r.l,e.l,t),a:number(r.a,e.a,t),b:number(r.b,e.b,t),alpha:number(r.alpha,e.alpha,t)}}function rgbToHcl(r){const{l:e,a:t,b:ke}=rgbToLab(r),Oe=Math.atan2(ke,t)*rad2deg;return{h:Oe<0?Oe+360:Oe,c:Math.sqrt(t*t+ke*ke),l:e,alpha:r.a}}function hclToRgb(r){const e=r.h*deg2rad$1,t=r.c,ke=r.l;return labToRgb({l:ke,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:r.alpha})}function interpolateHue(r,e,t){const ke=e-r;return r+t*(ke>180||ke<-180?ke-360*Math.round(ke/360):ke)}function interpolateHcl(r,e,t){return{h:interpolateHue(r.h,e.h,t),c:number(r.c,e.c,t),l:number(r.l,e.l,t),alpha:number(r.alpha,e.alpha,t)}}const lab={forward:rgbToLab,reverse:labToRgb,interpolate:interpolateLab},hcl={forward:rgbToHcl,reverse:hclToRgb,interpolate:interpolateHcl};class Interpolate{constructor(e,t,ke,Oe,Ge){this.type=e,this.operator=t,this.interpolation=ke,this.input=Oe,this.labels=[],this.outputs=[];for(const[Be,je]of Ge)this.labels.push(Be),this.outputs.push(je)}static interpolationFactor(e,t,ke,Oe){let Ge=0;if(e.name==="exponential")Ge=exponentialInterpolation(t,e.base,ke,Oe);else if(e.name==="linear")Ge=exponentialInterpolation(t,1,ke,Oe);else if(e.name==="cubic-bezier"){const Be=e.controlPoints;Ge=new UnitBezier$1(Be[0],Be[1],Be[2],Be[3]).solve(exponentialInterpolation(t,1,ke,Oe))}return Ge}static parse(e,t){let[ke,Oe,Ge,...Be]=e;if(!Array.isArray(Oe)||Oe.length===0)return t.error("Expected an interpolation type expression.",1);if(Oe[0]==="linear")Oe={name:"linear"};else if(Oe[0]==="exponential"){const Ze=Oe[1];if(typeof Ze!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);Oe={name:"exponential",base:Ze}}else if(Oe[0]==="cubic-bezier"){const Ze=Oe.slice(1);if(Ze.length!==4||Ze.some(Qe=>typeof Qe!="number"||Qe<0||Qe>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Oe={name:"cubic-bezier",controlPoints:Ze}}else return t.error(`Unknown interpolation type ${String(Oe[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(Ge=t.parse(Ge,2,NumberType),!Ge)return null;const je=[];let Ve=null;ke==="interpolate-hcl"||ke==="interpolate-lab"?Ve=ColorType:t.expectedType&&t.expectedType.kind!=="value"&&(Ve=t.expectedType);for(let Ze=0;Ze<Be.length;Ze+=2){const Qe=Be[Ze],en=Be[Ze+1],tn=Ze+3,an=Ze+4;if(typeof Qe!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',tn);if(je.length&&je[je.length-1][0]>=Qe)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',tn);const cn=t.parse(en,an,Ve);if(!cn)return null;Ve=Ve||cn.type,je.push([Qe,cn])}return Ve.kind!=="number"&&Ve.kind!=="color"&&!(Ve.kind==="array"&&Ve.itemType.kind==="number"&&typeof Ve.N=="number")?t.error(`Type ${toString$1(Ve)} is not interpolatable.`):new Interpolate(Ve,ke,Oe,Ge,je)}evaluate(e){const t=this.labels,ke=this.outputs;if(t.length===1)return ke[0].evaluate(e);const Oe=this.input.evaluate(e);if(Oe<=t[0])return ke[0].evaluate(e);const Ge=t.length;if(Oe>=t[Ge-1])return ke[Ge-1].evaluate(e);const Be=findStopLessThanOrEqualTo(t,Oe),je=t[Be],Ve=t[Be+1],Ze=Interpolate.interpolationFactor(this.interpolation,Oe,je,Ve),Qe=ke[Be].evaluate(e),en=ke[Be+1].evaluate(e);return this.operator==="interpolate"?interpolate[this.type.kind.toLowerCase()](Qe,en,Ze):this.operator==="interpolate-hcl"?hcl.reverse(hcl.interpolate(hcl.forward(Qe),hcl.forward(en),Ze)):lab.reverse(lab.interpolate(lab.forward(Qe),lab.forward(en),Ze))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let ke=0;ke<this.labels.length;ke++)t.push(this.labels[ke],this.outputs[ke].serialize());return t}}function exponentialInterpolation(r,e,t,ke){const Oe=ke-t,Ge=r-t;return Oe===0?0:e===1?Ge/Oe:(Math.pow(e,Ge)-1)/(Math.pow(e,Oe)-1)}var Interpolate$1=Interpolate;class Coalesce{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let ke=null;const Oe=t.expectedType;Oe&&Oe.kind!=="value"&&(ke=Oe);const Ge=[];for(const je of e.slice(1)){const Ve=t.parse(je,1+Ge.length,ke,void 0,{typeAnnotation:"omit"});if(!Ve)return null;ke=ke||Ve.type,Ge.push(Ve)}return Oe&&Ge.some(je=>checkSubtype(Oe,je.type))?new Coalesce(ValueType,Ge):new Coalesce(ke,Ge)}evaluate(e){let t=null,ke=0,Oe;for(const Ge of this.args){if(ke++,t=Ge.evaluate(e),t&&t instanceof ResolvedImage&&!t.available&&(Oe||(Oe=t),t=null,ke===this.args.length))return Oe;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Coalesce$1=Coalesce;class Let{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const ke=[];for(let Ge=1;Ge<e.length-1;Ge+=2){const Be=e[Ge];if(typeof Be!="string")return t.error(`Expected string, but found ${typeof Be} instead.`,Ge);if(/[^a-zA-Z0-9_]/.test(Be))return t.error("Variable names must contain only alphanumeric characters or '_'.",Ge);const je=t.parse(e[Ge+1],Ge+1);if(!je)return null;ke.push([Be,je])}const Oe=t.parse(e[e.length-1],e.length-1,t.expectedType,ke);return Oe?new Let(ke,Oe):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,ke]of this.bindings)e.push(t,ke.serialize());return e.push(this.result.serialize()),e}}var Let$1=Let;let At$1=class Ff{constructor(e,t,ke){this.type=e,this.index=t,this.input=ke}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const ke=t.parse(e[1],1,NumberType),Oe=t.parse(e[2],2,array$1(t.expectedType||ValueType));if(!ke||!Oe)return null;const Ge=Oe.type;return new Ff(Ge.itemType,ke,Oe)}evaluate(e){const t=this.index.evaluate(e),ke=this.input.evaluate(e);if(t<0)throw new RuntimeError$1(`Array index out of bounds: ${t} < 0.`);if(t>=ke.length)throw new RuntimeError$1(`Array index out of bounds: ${t} > ${ke.length-1}.`);if(t!==Math.floor(t))throw new RuntimeError$1(`Array index must be an integer, but found ${t} instead.`);return ke[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}};var At$1$1=At$1;class In{constructor(e,t){this.type=BooleanType,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const ke=t.parse(e[1],1,ValueType),Oe=t.parse(e[2],2,ValueType);return!ke||!Oe?null:isValidType(ke.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(ke,Oe):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(ke.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),ke=this.haystack.evaluate(e);if(ke==null)return!1;if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(t))} instead.`);if(!isValidNativeType(ke,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(ke))} instead.`);return ke.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var In$1=In;class IndexOf{constructor(e,t,ke){this.type=NumberType,this.needle=e,this.haystack=t,this.fromIndex=ke}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const ke=t.parse(e[1],1,ValueType),Oe=t.parse(e[2],2,ValueType);if(!ke||!Oe)return null;if(!isValidType(ke.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(ke.type)} instead`);if(e.length===4){const Ge=t.parse(e[3],3,NumberType);return Ge?new IndexOf(ke,Oe,Ge):null}else return new IndexOf(ke,Oe)}evaluate(e){const t=this.needle.evaluate(e),ke=this.haystack.evaluate(e);if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(t))} instead.`);if(!isValidNativeType(ke,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(ke))} instead.`);if(this.fromIndex){const Oe=this.fromIndex.evaluate(e);return ke.indexOf(t,Oe)}return ke.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var IndexOf$1=IndexOf;class Match{constructor(e,t,ke,Oe,Ge,Be){this.inputType=e,this.type=t,this.input=ke,this.cases=Oe,this.outputs=Ge,this.otherwise=Be}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let ke,Oe;t.expectedType&&t.expectedType.kind!=="value"&&(Oe=t.expectedType);const Ge={},Be=[];for(let Ze=2;Ze<e.length-1;Ze+=2){let Qe=e[Ze];const en=e[Ze+1];Array.isArray(Qe)||(Qe=[Qe]);const tn=t.concat(Ze);if(Qe.length===0)return tn.error("Expected at least one branch label.");for(const cn of Qe){if(typeof cn!="number"&&typeof cn!="string")return tn.error("Branch labels must be numbers or strings.");if(typeof cn=="number"&&Math.abs(cn)>Number.MAX_SAFE_INTEGER)return tn.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof cn=="number"&&Math.floor(cn)!==cn)return tn.error("Numeric branch labels must be integer values.");if(!ke)ke=typeOf(cn);else if(tn.checkSubtype(ke,typeOf(cn)))return null;if(typeof Ge[String(cn)]<"u")return tn.error("Branch labels must be unique.");Ge[String(cn)]=Be.length}const an=t.parse(en,Ze,Oe);if(!an)return null;Oe=Oe||an.type,Be.push(an)}const je=t.parse(e[1],1,ValueType);if(!je)return null;const Ve=t.parse(e[e.length-1],e.length-1,Oe);return!Ve||je.type.kind!=="value"&&t.concat(1).checkSubtype(ke,je.type)?null:new Match(ke,Oe,je,Ge,Be,Ve)}evaluate(e){const t=this.input.evaluate(e);return(typeOf(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),ke=[],Oe={};for(const Be of t){const je=Oe[this.cases[Be]];je===void 0?(Oe[this.cases[Be]]=ke.length,ke.push([this.cases[Be],[Be]])):ke[je][1].push(Be)}const Ge=Be=>this.inputType.kind==="number"?Number(Be):Be;for(const[Be,je]of ke)je.length===1?e.push(Ge(je[0])):e.push(je.map(Ge)),e.push(this.outputs[Be].serialize());return e.push(this.otherwise.serialize()),e}}var Match$1=Match;class Case{constructor(e,t,ke){this.type=e,this.branches=t,this.otherwise=ke}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let ke;t.expectedType&&t.expectedType.kind!=="value"&&(ke=t.expectedType);const Oe=[];for(let Be=1;Be<e.length-1;Be+=2){const je=t.parse(e[Be],Be,BooleanType);if(!je)return null;const Ve=t.parse(e[Be+1],Be+1,ke);if(!Ve)return null;Oe.push([je,Ve]),ke=ke||Ve.type}const Ge=t.parse(e[e.length-1],e.length-1,ke);return Ge?new Case(ke,Oe,Ge):null}evaluate(e){for(const[t,ke]of this.branches)if(t.evaluate(e))return ke.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,ke]of this.branches)e(t),e(ke);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Case$1=Case;class Slice{constructor(e,t,ke,Oe){this.type=e,this.input=t,this.beginIndex=ke,this.endIndex=Oe}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const ke=t.parse(e[1],1,ValueType),Oe=t.parse(e[2],2,NumberType);if(!ke||!Oe)return null;if(!isValidType(ke.type,[array$1(ValueType),StringType,ValueType]))return t.error(`Expected first argument to be of type array or string, but found ${toString$1(ke.type)} instead`);if(e.length===4){const Ge=t.parse(e[3],3,NumberType);return Ge?new Slice(ke.type,ke,Oe,Ge):null}else return new Slice(ke.type,ke,Oe)}evaluate(e){const t=this.input.evaluate(e),ke=this.beginIndex.evaluate(e);if(!isValidNativeType(t,["string","array"]))throw new RuntimeError$1(`Expected first argument to be of type array or string, but found ${toString$1(typeOf(t))} instead.`);if(this.endIndex){const Oe=this.endIndex.evaluate(e);return t.slice(ke,Oe)}return t.slice(ke)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Slice$1=Slice;function isComparableType(r,e){return r==="=="||r==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(r,e,t){return e===t}function neq(r,e,t){return e!==t}function lt$1(r,e,t){return e<t}function gt$1(r,e,t){return e>t}function lteq(r,e,t){return e<=t}function gteq(r,e,t){return e>=t}function eqCollate(r,e,t,ke){return ke.compare(e,t)===0}function neqCollate(r,e,t,ke){return!eqCollate(r,e,t,ke)}function ltCollate(r,e,t,ke){return ke.compare(e,t)<0}function gtCollate(r,e,t,ke){return ke.compare(e,t)>0}function lteqCollate(r,e,t,ke){return ke.compare(e,t)<=0}function gteqCollate(r,e,t,ke){return ke.compare(e,t)>=0}function makeComparison(r,e,t){const ke=r!=="=="&&r!=="!=";return class Bf{constructor(Ge,Be,je){this.type=BooleanType,this.lhs=Ge,this.rhs=Be,this.collator=je,this.hasUntypedArgument=Ge.type.kind==="value"||Be.type.kind==="value"}static parse(Ge,Be){if(Ge.length!==3&&Ge.length!==4)return Be.error("Expected two or three arguments.");const je=Ge[0];let Ve=Be.parse(Ge[1],1,ValueType);if(!Ve)return null;if(!isComparableType(je,Ve.type))return Be.concat(1).error(`"${je}" comparisons are not supported for type '${toString$1(Ve.type)}'.`);let Ze=Be.parse(Ge[2],2,ValueType);if(!Ze)return null;if(!isComparableType(je,Ze.type))return Be.concat(2).error(`"${je}" comparisons are not supported for type '${toString$1(Ze.type)}'.`);if(Ve.type.kind!==Ze.type.kind&&Ve.type.kind!=="value"&&Ze.type.kind!=="value")return Be.error(`Cannot compare types '${toString$1(Ve.type)}' and '${toString$1(Ze.type)}'.`);ke&&(Ve.type.kind==="value"&&Ze.type.kind!=="value"?Ve=new Assertion$1(Ze.type,[Ve]):Ve.type.kind!=="value"&&Ze.type.kind==="value"&&(Ze=new Assertion$1(Ve.type,[Ze])));let Qe=null;if(Ge.length===4){if(Ve.type.kind!=="string"&&Ze.type.kind!=="string"&&Ve.type.kind!=="value"&&Ze.type.kind!=="value")return Be.error("Cannot use collator to compare non-string types.");if(Qe=Be.parse(Ge[3],3,CollatorType),!Qe)return null}return new Bf(Ve,Ze,Qe)}evaluate(Ge){const Be=this.lhs.evaluate(Ge),je=this.rhs.evaluate(Ge);if(ke&&this.hasUntypedArgument){const Ve=typeOf(Be),Ze=typeOf(je);if(Ve.kind!==Ze.kind||!(Ve.kind==="string"||Ve.kind==="number"))throw new RuntimeError$1(`Expected arguments for "${r}" to be (string, string) or (number, number), but found (${Ve.kind}, ${Ze.kind}) instead.`)}if(this.collator&&!ke&&this.hasUntypedArgument){const Ve=typeOf(Be),Ze=typeOf(je);if(Ve.kind!=="string"||Ze.kind!=="string")return e(Ge,Be,je)}return this.collator?t(Ge,Be,je,this.collator.evaluate(Ge)):e(Ge,Be,je)}eachChild(Ge){Ge(this.lhs),Ge(this.rhs),this.collator&&Ge(this.collator)}outputDefined(){return!0}serialize(){const Ge=[r];return this.eachChild(Be=>{Ge.push(Be.serialize())}),Ge}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt$1,ltCollate),GreaterThan=makeComparison(">",gt$1,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class NumberFormat{constructor(e,t,ke,Oe,Ge,Be){this.type=StringType,this.number=e,this.locale=t,this.currency=ke,this.unit=Oe,this.minFractionDigits=Ge,this.maxFractionDigits=Be}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const ke=t.parse(e[1],1,NumberType);if(!ke)return null;const Oe=e[2];if(typeof Oe!="object"||Array.isArray(Oe))return t.error("NumberFormat options argument must be an object.");let Ge=null;if(Oe.locale&&(Ge=t.parse(Oe.locale,1,StringType),!Ge))return null;let Be=null;if(Oe.currency&&(Be=t.parse(Oe.currency,1,StringType),!Be))return null;let je=null;if(Oe.unit&&(je=t.parse(Oe.unit,1,StringType),!je))return null;let Ve=null;if(Oe["min-fraction-digits"]&&(Ve=t.parse(Oe["min-fraction-digits"],1,NumberType),!Ve))return null;let Ze=null;return Oe["max-fraction-digits"]&&(Ze=t.parse(Oe["max-fraction-digits"],1,NumberType),!Ze)?null:new NumberFormat(ke,Ge,Be,je,Ve,Ze)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const ke=t.parse(e[1],1);return ke?ke.type.kind!=="array"&&ke.type.kind!=="string"&&ke.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${toString$1(ke.type)} instead.`):new Length(ke):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new RuntimeError$1(`Expected value to be of type string or array, but found ${toString$1(typeOf(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Length$1=Length;const expressions={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion$1,at:At$1$1,boolean:Assertion$1,case:Case$1,coalesce:Coalesce$1,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In$1,"index-of":IndexOf$1,interpolate:Interpolate$1,"interpolate-hcl":Interpolate$1,"interpolate-lab":Interpolate$1,length:Length$1,let:Let$1,literal:Literal$1,match:Match$1,number:Assertion$1,"number-format":NumberFormat,object:Assertion$1,slice:Slice$1,step:Step$1,string:Assertion$1,"to-boolean":Coercion$1,"to-color":Coercion$1,"to-number":Coercion$1,"to-string":Coercion$1,var:Var$1,within:Within$1};function rgba(r,[e,t,ke,Oe]){e=e.evaluate(r),t=t.evaluate(r),ke=ke.evaluate(r);const Ge=Oe?Oe.evaluate(r):1,Be=validateRGBA(e,t,ke,Ge);if(Be)throw new RuntimeError$1(Be);return new Color$1(e/255*Ge,t/255*Ge,ke/255*Ge,Ge)}function has(r,e){return r in e}function get$1(r,e){const t=e[r];return typeof t>"u"?null:t}function binarySearch(r,e,t,ke){for(;t<=ke;){const Oe=t+ke>>1;if(e[Oe]===r)return!0;e[Oe]>r?ke=Oe-1:t=Oe+1}return!1}function varargs(r){return{type:r}}CompoundExpression$1.register(expressions,{error:[ErrorType,[StringType],(r,[e])=>{throw new RuntimeError$1(e.evaluate(r))}],typeof:[StringType,[ValueType],(r,[e])=>toString$1(typeOf(e.evaluate(r)))],"to-rgba":[array$1(NumberType,4),[ColorType],(r,[e])=>e.evaluate(r).toArray()],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(r,[e])=>has(e.evaluate(r),r.properties())],[[StringType,ObjectType],(r,[e,t])=>has(e.evaluate(r),t.evaluate(r))]]},get:{type:ValueType,overloads:[[[StringType],(r,[e])=>get$1(e.evaluate(r),r.properties())],[[StringType,ObjectType],(r,[e,t])=>get$1(e.evaluate(r),t.evaluate(r))]]},"feature-state":[ValueType,[StringType],(r,[e])=>get$1(e.evaluate(r),r.featureState||{})],properties:[ObjectType,[],r=>r.properties()],"geometry-type":[StringType,[],r=>r.geometryType()],id:[ValueType,[],r=>r.id()],zoom:[NumberType,[],r=>r.globals.zoom],pitch:[NumberType,[],r=>r.globals.pitch||0],"distance-from-center":[NumberType,[],r=>r.distanceFromCenter()],"heatmap-density":[NumberType,[],r=>r.globals.heatmapDensity||0],"line-progress":[NumberType,[],r=>r.globals.lineProgress||0],"sky-radial-progress":[NumberType,[],r=>r.globals.skyRadialProgress||0],accumulated:[ValueType,[],r=>r.globals.accumulated===void 0?null:r.globals.accumulated],"+":[NumberType,varargs(NumberType),(r,e)=>{let t=0;for(const ke of e)t+=ke.evaluate(r);return t}],"*":[NumberType,varargs(NumberType),(r,e)=>{let t=1;for(const ke of e)t*=ke.evaluate(r);return t}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(r,[e,t])=>e.evaluate(r)-t.evaluate(r)],[[NumberType],(r,[e])=>-e.evaluate(r)]]},"/":[NumberType,[NumberType,NumberType],(r,[e,t])=>e.evaluate(r)/t.evaluate(r)],"%":[NumberType,[NumberType,NumberType],(r,[e,t])=>e.evaluate(r)%t.evaluate(r)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(r,[e,t])=>Math.pow(e.evaluate(r),t.evaluate(r))],sqrt:[NumberType,[NumberType],(r,[e])=>Math.sqrt(e.evaluate(r))],log10:[NumberType,[NumberType],(r,[e])=>Math.log(e.evaluate(r))/Math.LN10],ln:[NumberType,[NumberType],(r,[e])=>Math.log(e.evaluate(r))],log2:[NumberType,[NumberType],(r,[e])=>Math.log(e.evaluate(r))/Math.LN2],sin:[NumberType,[NumberType],(r,[e])=>Math.sin(e.evaluate(r))],cos:[NumberType,[NumberType],(r,[e])=>Math.cos(e.evaluate(r))],tan:[NumberType,[NumberType],(r,[e])=>Math.tan(e.evaluate(r))],asin:[NumberType,[NumberType],(r,[e])=>Math.asin(e.evaluate(r))],acos:[NumberType,[NumberType],(r,[e])=>Math.acos(e.evaluate(r))],atan:[NumberType,[NumberType],(r,[e])=>Math.atan(e.evaluate(r))],min:[NumberType,varargs(NumberType),(r,e)=>Math.min(...e.map(t=>t.evaluate(r)))],max:[NumberType,varargs(NumberType),(r,e)=>Math.max(...e.map(t=>t.evaluate(r)))],abs:[NumberType,[NumberType],(r,[e])=>Math.abs(e.evaluate(r))],round:[NumberType,[NumberType],(r,[e])=>{const t=e.evaluate(r);return t<0?-Math.round(-t):Math.round(t)}],floor:[NumberType,[NumberType],(r,[e])=>Math.floor(e.evaluate(r))],ceil:[NumberType,[NumberType],(r,[e])=>Math.ceil(e.evaluate(r))],"filter-==":[BooleanType,[StringType,ValueType],(r,[e,t])=>r.properties()[e.value]===t.value],"filter-id-==":[BooleanType,[ValueType],(r,[e])=>r.id()===e.value],"filter-type-==":[BooleanType,[StringType],(r,[e])=>r.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(r,[e,t])=>{const ke=r.properties()[e.value],Oe=t.value;return typeof ke==typeof Oe&&ke<Oe}],"filter-id-<":[BooleanType,[ValueType],(r,[e])=>{const t=r.id(),ke=e.value;return typeof t==typeof ke&&t<ke}],"filter->":[BooleanType,[StringType,ValueType],(r,[e,t])=>{const ke=r.properties()[e.value],Oe=t.value;return typeof ke==typeof Oe&&ke>Oe}],"filter-id->":[BooleanType,[ValueType],(r,[e])=>{const t=r.id(),ke=e.value;return typeof t==typeof ke&&t>ke}],"filter-<=":[BooleanType,[StringType,ValueType],(r,[e,t])=>{const ke=r.properties()[e.value],Oe=t.value;return typeof ke==typeof Oe&&ke<=Oe}],"filter-id-<=":[BooleanType,[ValueType],(r,[e])=>{const t=r.id(),ke=e.value;return typeof t==typeof ke&&t<=ke}],"filter->=":[BooleanType,[StringType,ValueType],(r,[e,t])=>{const ke=r.properties()[e.value],Oe=t.value;return typeof ke==typeof Oe&&ke>=Oe}],"filter-id->=":[BooleanType,[ValueType],(r,[e])=>{const t=r.id(),ke=e.value;return typeof t==typeof ke&&t>=ke}],"filter-has":[BooleanType,[ValueType],(r,[e])=>e.value in r.properties()],"filter-has-id":[BooleanType,[],r=>r.id()!==null&&r.id()!==void 0],"filter-type-in":[BooleanType,[array$1(StringType)],(r,[e])=>e.value.indexOf(r.geometryType())>=0],"filter-id-in":[BooleanType,[array$1(ValueType)],(r,[e])=>e.value.indexOf(r.id())>=0],"filter-in-small":[BooleanType,[StringType,array$1(ValueType)],(r,[e,t])=>t.value.indexOf(r.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array$1(ValueType)],(r,[e,t])=>binarySearch(r.properties()[e.value],t.value,0,t.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(r,[e,t])=>e.evaluate(r)&&t.evaluate(r)],[varargs(BooleanType),(r,e)=>{for(const t of e)if(!t.evaluate(r))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(r,[e,t])=>e.evaluate(r)||t.evaluate(r)],[varargs(BooleanType),(r,e)=>{for(const t of e)if(t.evaluate(r))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(r,[e])=>!e.evaluate(r)],"is-supported-script":[BooleanType,[StringType],(r,[e])=>{const t=r.globals&&r.globals.isSupportedScript;return t?t(e.evaluate(r)):!0}],upcase:[StringType,[StringType],(r,[e])=>e.evaluate(r).toUpperCase()],downcase:[StringType,[StringType],(r,[e])=>e.evaluate(r).toLowerCase()],concat:[StringType,varargs(ValueType),(r,e)=>e.map(t=>toString(t.evaluate(r))).join("")],"resolved-locale":[StringType,[CollatorType],(r,[e])=>e.evaluate(r).resolvedLocale()]});var definitions=expressions;function success(r){return{result:"success",value:r}}function error(r){return{result:"error",value:r}}function supportsPropertyExpression(r){return r["property-type"]==="data-driven"}function supportsZoomExpression(r){return!!r.expression&&r.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(r){return!!r.expression&&r.expression.interpolated}function isFunction(r){return typeof r=="object"&&r!==null&&!Array.isArray(r)}class StyleExpression{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext$1,this._defaultValue=t?getDefaultValue(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,ke,Oe,Ge,Be,je,Ve){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=ke,this._evaluator.canonical=Oe||null,this._evaluator.availableImages=Ge||null,this._evaluator.formattedSection=Be,this._evaluator.featureTileCoord=je||null,this._evaluator.featureDistanceData=Ve||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,ke,Oe,Ge,Be,je,Ve){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=ke||null,this._evaluator.canonical=Oe||null,this._evaluator.availableImages=Ge||null,this._evaluator.formattedSection=Be||null,this._evaluator.featureTileCoord=je||null,this._evaluator.featureDistanceData=Ve||null;try{const Ze=this.expression.evaluate(this._evaluator);if(Ze==null||typeof Ze=="number"&&Ze!==Ze)return this._defaultValue;if(this._enumValues&&!(Ze in this._enumValues))throw new RuntimeError$1(`Expected value to be one of ${Object.keys(this._enumValues).map(Qe=>JSON.stringify(Qe)).join(", ")}, but found ${JSON.stringify(Ze)} instead.`);return Ze}catch(Ze){return this._warningHistory[Ze.message]||(this._warningHistory[Ze.message]=!0,typeof console<"u"&&console.warn(Ze.message)),this._defaultValue}}}function isExpression(r){return Array.isArray(r)&&r.length>0&&typeof r[0]=="string"&&r[0]in definitions}function createExpression(r,e){const t=new ParsingContext$1(definitions,[],e?getExpectedType(e):void 0),ke=t.parse(r,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return ke?success(new StyleExpression(ke,e)):error(t.errors)}class ZoomConstantExpression{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!isStateConstant(t.expression)}evaluateWithoutErrorHandling(e,t,ke,Oe,Ge,Be){return this._styleExpression.evaluateWithoutErrorHandling(e,t,ke,Oe,Ge,Be)}evaluate(e,t,ke,Oe,Ge,Be){return this._styleExpression.evaluate(e,t,ke,Oe,Ge,Be)}}class ZoomDependentExpression{constructor(e,t,ke,Oe){this.kind=e,this.zoomStops=ke,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!isStateConstant(t.expression),this.interpolationType=Oe}evaluateWithoutErrorHandling(e,t,ke,Oe,Ge,Be){return this._styleExpression.evaluateWithoutErrorHandling(e,t,ke,Oe,Ge,Be)}evaluate(e,t,ke,Oe,Ge,Be){return this._styleExpression.evaluate(e,t,ke,Oe,Ge,Be)}interpolationFactor(e,t,ke){return this.interpolationType?Interpolate$1.interpolationFactor(this.interpolationType,e,t,ke):0}}function createPropertyExpression(r,e){if(r=createExpression(r,e),r.result==="error")return r;const t=r.value.expression,ke=isFeatureConstant(t);if(!ke&&!supportsPropertyExpression(e))return error([new ParsingError$1("","data expressions not supported")]);const Oe=isGlobalPropertyConstant(t,["zoom","pitch","distance-from-center"]);if(!Oe&&!supportsZoomExpression(e))return error([new ParsingError$1("","zoom expressions not supported")]);const Ge=findZoomCurve(t);if(!Ge&&!Oe)return error([new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Ge instanceof ParsingError$1)return error([Ge]);if(Ge instanceof Interpolate$1&&!supportsInterpolation(e))return error([new ParsingError$1("",'"interpolate" expressions cannot be used with this property')]);if(!Ge)return success(ke?new ZoomConstantExpression("constant",r.value):new ZoomConstantExpression("source",r.value));const Be=Ge instanceof Interpolate$1?Ge.interpolation:void 0;return success(ke?new ZoomDependentExpression("camera",r.value,Ge.labels,Be):new ZoomDependentExpression("composite",r.value,Ge.labels,Be))}function findZoomCurve(r){let e=null;if(r instanceof Let$1)e=findZoomCurve(r.result);else if(r instanceof Coalesce$1){for(const t of r.args)if(e=findZoomCurve(t),e)break}else(r instanceof Step$1||r instanceof Interpolate$1)&&r.input instanceof CompoundExpression$1&&r.input.name==="zoom"&&(e=r);return e instanceof ParsingError$1||r.eachChild(t=>{const ke=findZoomCurve(t);ke instanceof ParsingError$1?e=ke:!e&&ke?e=new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&ke&&e!==ke&&(e=new ParsingError$1("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(r){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,resolvedImage:ResolvedImageType};return r.type==="array"?array$1(e[r.value]||ValueType,r.length):e[r.type]}function getDefaultValue(r){return r.type==="color"&&(isFunction(r.default)||Array.isArray(r.default))?new Color$1(0,0,0,0):r.type==="color"?Color$1.parse(r.default)||null:r.default===void 0?null:r.default}function unbundle(r){return r instanceof Number||r instanceof String||r instanceof Boolean?r.valueOf():r}function deepUnbundle(r){if(Array.isArray(r))return r.map(deepUnbundle);if(r instanceof Object&&!(r instanceof Number||r instanceof String||r instanceof Boolean)){const e={};for(const t in r)e[t]=deepUnbundle(r[t]);return e}return unbundle(r)}var spec={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function isExpressionFilter(r){if(r===!0||r===!1)return!0;if(!Array.isArray(r)||r.length===0)return!1;switch(r[0]){case"has":return r.length>=2&&r[1]!=="$id"&&r[1]!=="$type";case"in":return r.length>=3&&(typeof r[1]!="string"||Array.isArray(r[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return r.length!==3||Array.isArray(r[1])||Array.isArray(r[2]);case"any":case"all":for(const e of r.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function createFilter(r,e="fill"){if(r==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};isExpressionFilter(r)||(r=convertFilter(r));const t=r;let ke=!0;try{ke=extractStaticFilter(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const Oe=spec[`filter_${e}`],Ge=createExpression(ke,Oe);let Be=null;if(Ge.result==="error")throw new Error(Ge.value.map(Qe=>`${Qe.key}: ${Qe.message}`).join(", "));Be=(Qe,en,tn)=>Ge.value.evaluate(Qe,en,{},tn);let je=null,Ve=null;if(ke!==t){const Qe=createExpression(t,Oe);if(Qe.result==="error")throw new Error(Qe.value.map(en=>`${en.key}: ${en.message}`).join(", "));je=(en,tn,an,cn,dn)=>Qe.value.evaluate(en,tn,{},an,void 0,void 0,cn,dn),Ve=!isFeatureConstant(Qe.value.expression)}Be=Be;const Ze=geometryNeeded(ke);return{filter:Be,dynamicFilter:je||void 0,needGeometry:Ze,needFeature:!!Ve}}function extractStaticFilter(r){if(!isDynamicFilter(r))return r;let e=deepUnbundle(r);return unionDynamicBranches(e),e=collapseDynamicBooleanExpressions(e),e}function collapseDynamicBooleanExpressions(r){if(!Array.isArray(r))return r;const e=collapsedExpression(r);return e===!0?e:e.map(t=>collapseDynamicBooleanExpressions(t))}function unionDynamicBranches(r){let e=!1;const t=[];if(r[0]==="case"){for(let ke=1;ke<r.length-1;ke+=2)e=e||isDynamicFilter(r[ke]),t.push(r[ke+1]);t.push(r[r.length-1])}else if(r[0]==="match"){e=e||isDynamicFilter(r[1]);for(let ke=2;ke<r.length-1;ke+=2)t.push(r[ke+1]);t.push(r[r.length-1])}else if(r[0]==="step"){e=e||isDynamicFilter(r[1]);for(let ke=1;ke<r.length-1;ke+=2)t.push(r[ke+1])}e&&(r.length=0,r.push("any",...t));for(let ke=1;ke<r.length;ke++)unionDynamicBranches(r[ke])}function isDynamicFilter(r){if(!Array.isArray(r))return!1;if(isRootExpressionDynamic(r[0]))return!0;for(let e=1;e<r.length;e++){const t=r[e];if(isDynamicFilter(t))return!0}return!1}function isRootExpressionDynamic(r){return r==="pitch"||r==="distance-from-center"}const dynamicConditionExpressions=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function collapsedExpression(r){if(dynamicConditionExpressions.has(r[0]))for(let e=1;e<r.length;e++){const t=r[e];if(isDynamicFilter(t))return!0}return r}function compare(r,e){return r<e?-1:r>e?1:0}function geometryNeeded(r){if(!Array.isArray(r))return!1;if(r[0]==="within")return!0;for(let e=1;e<r.length;e++)if(geometryNeeded(r[e]))return!0;return!1}function convertFilter(r){if(!r)return!0;const e=r[0];return r.length<=1?e!=="any":e==="=="?convertComparisonOp(r[1],r[2],"=="):e==="!="?convertNegation(convertComparisonOp(r[1],r[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp(r[1],r[2],e):e==="any"?convertDisjunctionOp(r.slice(1)):e==="all"?["all"].concat(r.slice(1).map(convertFilter)):e==="none"?["all"].concat(r.slice(1).map(convertFilter).map(convertNegation)):e==="in"?convertInOp(r[1],r.slice(2)):e==="!in"?convertNegation(convertInOp(r[1],r.slice(2))):e==="has"?convertHasOp(r[1]):e==="!has"?convertNegation(convertHasOp(r[1])):e==="within"?r:!0}function convertComparisonOp(r,e,t){switch(r){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,r,e]}}function convertDisjunctionOp(r){return["any"].concat(r.map(convertFilter))}function convertInOp(r,e){if(e.length===0)return!1;switch(r){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",r,["literal",e.sort(compare)]]:["filter-in-small",r,["literal",e]]}}function convertHasOp(r){switch(r){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",r]}}function convertNegation(r){return["!",r]}var refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(r,e){const t={};for(const ke in r)ke!=="ref"&&(t[ke]=r[ke]);return refProperties.forEach(ke=>{ke in e&&(t[ke]=e[ke])}),t}function derefLayers(r){r=r.slice();const e=Object.create(null);for(let t=0;t<r.length;t++)e[r[t].id]=r[t];for(let t=0;t<r.length;t++)"ref"in r[t]&&(r[t]=deref(r[t],e[r[t].ref]));return r}var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={},mapboxToCssFont=function(r,e,t){var ke=fontCache[r];if(!ke){Array.isArray(r)||(r=[r]);for(var Oe=400,Ge="normal",Be=[],je,Ve,Ze=0,Qe=r.length;Ze<Qe;++Ze){var en=r[Ze],tn=en.split(" "),an=tn[tn.length-1].toLowerCase();an=="normal"||an=="italic"||an=="oblique"?(Ge=Ve?Ge:an,Ve=!0,tn.pop(),an=tn[tn.length-1].toLowerCase()):italicRE.test(an)&&(an=an.replace(italicRE,""),Ge=Ve?Ge:tn[tn.length-1].replace(an,""),Ve=!0);for(var cn in fontWeights){var dn=tn.length>1?tn[tn.length-2].toLowerCase():"";if(an==cn||an==cn.replace("-","")||dn+"-"+an==cn){Oe=je?Oe:fontWeights[cn],tn.pop(),dn&&cn.startsWith(dn)&&tn.pop();break}}!je&&typeof an=="number"&&(Oe=an,je=!0);var hn=tn.join(sp).replace("Klokantech Noto Sans","Noto Sans");hn.indexOf(sp)!==-1&&(hn='"'+hn+'"'),Be.push(hn)}ke=fontCache[r]=[Ge,Oe,Be]}return ke[0]+sp+ke[1]+sp+e+"px"+(t?"/"+t:"")+sp+ke[2]},mb2css=getDefaultExportFromCjs(mapboxToCssFont);const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(r){const e="mapbox://";return r.indexOf(e)!==0?"":r.slice(e.length)}function normalizeSpriteUrl(r,e,t){const ke=getMapboxPath(r);if(!ke)return decodeURI(new URL(r,t).href);const Oe="sprites/";if(ke.indexOf(Oe)!==0)throw new Error(`unexpected sprites url: ${r}`);const Ge=ke.slice(Oe.length);return`${mapboxBaseUrl}/styles/v1/${Ge}/sprite?access_token=${e}`}function normalizeStyleUrl(r,e){const t=getMapboxPath(r);if(!t)return decodeURI(new URL(r,location.href).href);const ke="styles/";if(t.indexOf(ke)!==0)throw new Error(`unexpected style url: ${r}`);const Oe=t.slice(ke.length);return`${mapboxBaseUrl}/styles/v1/${Oe}?&access_token=${e}`}function normalizeSourceUrl(r,e,t,ke){const Oe=new URL(r,ke),Ge=getMapboxPath(r);if(!Ge)return e&&(Oe.searchParams.has(t)||Oe.searchParams.set(t,e)),decodeURI(Oe.href);if(Ge==="mapbox.satellite"){const Be=window.devicePixelRatio>=1.5?"@2x":"";return`https://api.mapbox.com/v4/${Ge}/{z}/{x}/{y}${Be}.webp?access_token=${e}`}return`https://{a-d}.tiles.mapbox.com/v4/${Ge}/{z}/{x}/{y}.vector.pbf?access_token=${e}`}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(r){return r.id||(r.id=styleId++),r.id}function getStyleFunctionKey(r,e){return getStyleId(r)+"."+getUid(e)}function getFunctionCache(r){let e=functionCacheByStyleId[r.id];return e||(e={},functionCacheByStyleId[getStyleId(r)]=e),e}function getFilterCache(r){let e=filterCacheByStyleId[r.id];return e||(e={},filterCacheByStyleId[getStyleId(r)]=e),e}function deg2rad(r){return r*Math.PI/180}const defaultResolutions=function(){const r=[];for(let e=78271.51696402048;r.length<=24;e/=2)r.push(e);return r}();function createCanvas(r,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(r,e);const t=document.createElement("canvas");return t.width=r,t.height=e,t}function getZoomForResolution(r,e){let t=0;const ke=e.length;for(;t<ke;++t)if(e[t]<r&&t+1<ke){const Ge=e[t]/e[t+1];return t+Math.log(e[t]/r)/Math.log(Ge)}return ke-1}function getResolutionForZoom(r,e){const t=Math.floor(r),ke=Math.pow(2,r-t);return e[t]/ke}const pendingRequests={};function fetchResource(r,e,t={},ke){if(e in pendingRequests)return ke&&(ke.request=pendingRequests[e][0]),pendingRequests[e][1];const Oe=t.transformRequest&&t.transformRequest(e,r)||e,Ge=toPromise(()=>Oe).then(Be=>(Be instanceof Request||(Be=new Request(Be)),Be.headers.get("Accept")||Be.headers.set("Accept","application/json"),ke&&(ke.request=Be),fetch(Be).then(function(je){return delete pendingRequests[e],je.ok?je.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(je){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))})));return pendingRequests[e]=[Oe,Ge],Ge}function getGlStyle(r,e){if(typeof r=="string")if(r.trim().startsWith("{"))try{const t=JSON.parse(r);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return r=normalizeStyleUrl(r,e.accessToken),fetchResource("Style",r,e);else return Promise.resolve(r)}const tilejsonCache={};function getTileJson(r,e,t={}){const ke=[e,JSON.stringify(r)].toString();let Oe=tilejsonCache[ke];if(!Oe||t.transformRequest){let Ge;t.transformRequest&&(Ge=(je,Ve)=>{const Ze=t.transformRequest&&t.transformRequest(Ve,"Tiles")||Ve;if(je instanceof VectorTile$1)je.setLoader((Qe,en,tn)=>{toPromise(()=>Ze).then(an=>{fetch(an).then(cn=>cn.arrayBuffer()).then(cn=>{const hn=je.getFormat().readFeatures(cn,{extent:Qe,featureProjection:tn});je.setFeatures(hn)}).catch(cn=>je.setState(TileState.ERROR))})});else{const Qe=je.getImage();toPromise(()=>Ze).then(en=>{en instanceof Request?fetch(en).then(tn=>tn.blob()).then(tn=>{const an=URL.createObjectURL(tn);Qe.addEventListener("load",()=>URL.revokeObjectURL(an)),Qe.addEventListener("error",()=>URL.revokeObjectURL(an)),Qe.src=an}).catch(tn=>je.setState(TileState.ERROR)):Qe.src=en})}});const Be=r.url;if(Be&&!r.tiles){const je=normalizeSourceUrl(Be,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(Be.startsWith("mapbox://"))Oe=Promise.resolve({tileJson:Object.assign({},r,{url:void 0,tiles:expandUrl(je)}),tileLoadFunction:Ge});else{const Ve={};Oe=fetchResource("Source",je,t,Ve).then(function(Ze){return Ze.tiles=Ze.tiles.map(function(Qe){return Ze.scheme==="tms"&&(Qe=Qe.replace("{y}","{-y}")),normalizeSourceUrl(Qe,t.accessToken,t.accessTokenParam||"access_token",Ve.request.url)}),Promise.resolve({tileJson:Ze,tileLoadFunction:Ge})})}}else r=Object.assign({},r,{tiles:r.tiles.map(function(je){return r.scheme==="tms"&&(je=je.replace("{y}","{-y}")),normalizeSourceUrl(je,t.accessToken,t.accessTokenParam||"access_token",e||location.href)})}),Oe=Promise.resolve({tileJson:Object.assign({},r),tileLoadFunction:Ge});tilejsonCache[ke]=Oe}return Oe}function drawIconHalo(r,e,t,ke){const Oe=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],Ge=createCanvas(Oe[0],Oe[1]),Be=Ge.getContext("2d");Be.drawImage(r,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const je=Be.getImageData(0,0,Oe[0],Oe[1]);Be.globalCompositeOperation="destination-over",Be.fillStyle=`rgba(${ke.r*255},${ke.g*255},${ke.b*255},${ke.a})`;const Ve=je.data;for(let Ze=0,Qe=je.width;Ze<Qe;++Ze)for(let en=0,tn=je.height;en<tn;++en){const an=(en*Qe+Ze)*4;Ve[an+3]>0&&Be.arc(Ze,en,t*e.pixelRatio,0,2*Math.PI)}return Be.fill(),Ge}function smoothstep(r,e,t){const ke=Math.max(0,Math.min(1,(t-r)/(e-r)));return ke*ke*(3-2*ke)}function drawSDF(r,e,t){const ke=createCanvas(e.width,e.height),Oe=ke.getContext("2d");Oe.drawImage(r,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const Ge=Oe.getImageData(0,0,e.width,e.height),Be=Ge.data;for(let je=0,Ve=Ge.width;je<Ve;++je)for(let Ze=0,Qe=Ge.height;Ze<Qe;++Ze){const en=(Ze*Ve+je)*4,tn=Be[en+3]/255,an=.75,cn=.1,dn=smoothstep(an-cn,an+cn,tn);dn>0?(Be[en+0]=Math.round(255*t.r*dn),Be[en+1]=Math.round(255*t.g*dn),Be[en+2]=Math.round(255*t.b*dn),Be[en+3]=Math.round(255*dn)):Be[en+3]=0}return Oe.putImageData(Ge,0,0),ke}const hairSpacePool=Array(256).join(" ");function applyLetterSpacing(r,e){if(e>=.05){let t="";const ke=r.split(`
`),Oe=hairSpacePool.slice(0,Math.round(e/.1));for(let Ge=0,Be=ke.length;Ge<Be;++Ge)Ge>0&&(t+=`
`),t+=ke[Ge].split("").join(Oe);return t}return r}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(r,e){return getMeasureContext().measureText(r).width+(r.length-1)*e}const measureCache={};function wrapText(r,e,t,ke){if(r.indexOf(`
`)!==-1){const Be=r.split(`
`),je=[];for(let Ve=0,Ze=Be.length;Ve<Ze;++Ve)je.push(wrapText(Be[Ve],e,t,ke));return je.join(`
`)}const Oe=t+","+e+","+r+","+ke;let Ge=measureCache[Oe];if(!Ge){const Be=r.split(" ");if(Be.length>1){const je=getMeasureContext();je.font=e;const Ze=je.measureText("M").width*t;let Qe="";const en=[];for(let tn=0,an=Be.length;tn<an;++tn){const cn=Be[tn],dn=Qe+(Qe?" ":"")+cn;measureText(dn,ke)<=Ze?Qe=dn:(Qe&&en.push(Qe),Qe=cn)}Qe&&en.push(Qe);for(let tn=0,an=en.length;tn<an&&an>1;++tn){const cn=en[tn];if(measureText(cn,ke)<Ze*.35){const dn=tn>0?measureText(en[tn-1],ke):1/0,hn=tn<an-1?measureText(en[tn+1],ke):1/0;en.splice(tn,1),an-=1,dn<hn?(en[tn-1]+=" "+cn,tn-=1):en[tn]=cn+" "+en[tn]}}for(let tn=0,an=en.length-1;tn<an;++tn){const cn=en[tn],dn=en[tn+1];if(measureText(cn,ke)>Ze*.7&&measureText(dn,ke)<Ze*.6){const hn=cn.split(" "),fn=hn.pop();measureText(fn,ke)<Ze*.2&&(en[tn]=hn.join(" "),en[tn+1]=fn+" "+dn),an-=1}}Ge=en.join(`
`)}else Ge=r;Ge=applyLetterSpacing(Ge,ke),measureCache[Oe]=Ge}return Ge}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(r){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let t=0,ke=e.length;t<ke;++t){const Oe=e[t];try{const Ge=Oe.rules||Oe.cssRules;if(Ge)for(let Be=0,je=Ge.length;Be<je;++Be){const Ve=Ge[Be];if(Ve.type==5){const Ze=Ve.cssText.match(fontFamilyRegEx);loadedFontFamilies[Ze[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return r in loadedFontFamilies}const processedFontFamilies={};function getFonts(r,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=r.toString();if(t in processedFontFamilies)return processedFontFamilies[t];const ke=[];for(let Oe=0,Ge=r.length;Oe<Ge;++Oe){r[Oe]=r[Oe].replace("Arial Unicode MS","Arial");const Be=r[Oe],je=mb2css(Be,1);registerFont(je);const Ve=je.split(" ");ke.push([Ve.slice(3).join(" ").replace(/"/g,""),Ve[1],Ve[0]])}for(let Oe=0,Ge=ke.length;Oe<Ge;++Oe){const Be=ke[Oe],je=Be[0];if(!hasFontFamily(je)&&checkedFonts.get(`${Be[2]}
${Be[1]} 
${je}`)!==100){const Ve=e.replace("{font-family}",je.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",je.replace(/ /g,"+")).replace("{fontweight}",Be[1]).replace("{-fontstyle}",Be[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",Be[2]);if(!document.querySelector('link[href="'+Ve+'"]')){const Ze=document.createElement("link");Ze.href=Ve,Ze.rel="stylesheet",document.head.appendChild(Ze)}}}return processedFontFamilies[t]=r,r}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(r,e){const t=createPropertyExpression(r,e);if(t.result==="error")throw new Error(t.value.map(ke=>`${ke.key}: ${ke.message}`).join(", "));return t.value},emptyObj$1={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(r,e,t,ke,Oe,Ge,Be){const je=r.id;Ge||(Ge={},console.warn("No functionCache provided to getValue()")),Ge[je]||(Ge[je]={});const Ve=Ge[je];if(!Ve[t]){let Ze=(r[e]||emptyObj$1)[t];const Qe=spec[`${e}_${r.type}`][t];Ze===void 0&&(Ze=Qe.default);let en=isExpression(Ze);if(!en&&isFunction(Ze)&&(Ze=convertFunction(Ze,Qe),en=!0),en){const tn=expressionData(Ze,Qe);Ve[t]=tn.evaluate.bind(tn)}else Qe.type=="color"&&(Ze=Color$1.parse(Ze)),Ve[t]=function(){return Ze}}return zoomObj.zoom=ke,Ve[t](zoomObj,Oe,Be)}function getDeclutterMode(r,e,t,ke,Oe){return getValue(r,"layout",`${ke}-allow-overlap`,e,t,Oe)?getValue(r,"layout",`${ke}-ignore-placement`,e,t,Oe)?"none":"obstacle":"declutter"}function evaluateFilter(r,e,t,ke,Oe){return Oe||console.warn("No filterCache provided to evaluateFilter()"),r in Oe||(Oe[r]=createFilter(e).filter),zoomObj.zoom=ke,Oe[r](zoomObj,t)}function colorWithOpacity(r,e){if(r){if(r.a===0||e===0)return;const t=r.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(r.r*255/t)+","+Math.round(r.g*255/t)+","+Math.round(r.b*255/t)+","+t*e+")"}return r}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(r,e){return r.replace(templateRegEx,function(t){return e[t.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(r,e,t,ke=defaultResolutions,Oe=void 0,Ge=void 0,Be=void 0,je=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,r)]=Array.from(arguments);let Ve,Ze,Qe;if(Ge){if(typeof Image<"u"){const bn=new Image;let Sn;toPromise(()=>Ge).then(Mn=>{Mn instanceof Request?fetch(Mn).then(Tn=>Tn.blob()).then(Tn=>{Sn=URL.createObjectURL(Tn),bn.src=Sn}).catch(()=>{}):(bn.crossOrigin="anonymous",bn.src=Mn,Sn&&URL.revokeObjectURL(Sn))}),bn.onload=function(){Ve=bn,Ze=[bn.width,bn.height],r.changed(),bn.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const bn=self;bn.postMessage({action:"loadImage",src:Ge}),bn.addEventListener("message",function(Mn){Mn.data.action==="imageLoaded"&&Mn.data.src===Ge&&(Ve=Mn.data.image,Ze=[Ve.width,Ve.height])})}}const en=derefLayers(e.layers),tn={},an=[],cn={},dn={},hn=getFunctionCache(e),fn=getFilterCache(e);let pn;for(let bn=0,Sn=en.length;bn<Sn;++bn){const Mn=en[bn],Tn=Mn.id;if(typeof t=="string"&&Mn.source==t||Array.isArray(t)&&t.indexOf(Tn)!==-1){const En=Mn["source-layer"];if(pn){if(Mn.source!==pn)throw new Error(`Layer "${Tn}" does not use source "${pn}`)}else{pn=Mn.source;const Ln=e.sources[pn];if(!Ln)throw new Error(`Source "${pn}" is not defined`);const Rn=Ln.type;if(Rn!=="vector"&&Rn!=="geojson")throw new Error(`Source "${pn}" is not of type "vector" or "geojson", but "${Rn}"`)}let An=tn[En];An||(An=[],tn[En]=An),An.push({layer:Mn,index:bn}),an.push(Tn)}}const mn=new Stroke,yn=new Fill,Cn=[],wn=function(bn,Sn,Mn){const Tn=bn.getProperties(),En=tn[Tn.layer];if(!En)return;let An=ke.indexOf(Sn);An==-1&&(An=getZoomForResolution(Sn,ke));const Ln=types[bn.getGeometry().getType()],Rn={id:bn.getId(),properties:Tn,type:Ln},Gn=r.get("mapbox-featurestate")[bn.getId()];let Nn=-1;for(let jn=0,Dn=En.length;jn<Dn;++jn){const Ci=En[jn],Jn=Ci.layer,Ki=Jn.id;if(Mn!==void 0&&Mn!==Ki)continue;const xn=Jn.layout||emptyObj$1,qn=Jn.paint||emptyObj$1;if(xn.visibility==="none"||"minzoom"in Jn&&An<Jn.minzoom||"maxzoom"in Jn&&An>=Jn.maxzoom)continue;const $n=Jn.filter;if(!$n||evaluateFilter(Ki,$n,Rn,An,fn)){let Ai,Ti,Kn,Ii,Pi,Mi;const tr=Ci.index;if(Ln==3&&(Jn.type=="fill"||Jn.type=="fill-extrusion"))if(Ti=getValue(Jn,"paint",Jn.type+"-opacity",An,Rn,hn,Gn),Jn.type+"-pattern"in qn){const Li=getValue(Jn,"paint",Jn.type+"-pattern",An,Rn,hn,Gn);if(Li){const Ri=typeof Li=="string"?fromTemplate(Li,Tn):Li.toString();if(Ve&&Oe&&Oe[Ri]){++Nn,Mi=Cn[Nn],(!Mi||!Mi.getFill()||Mi.getStroke()||Mi.getText())&&(Mi=new Style$1({fill:new Fill}),Cn[Nn]=Mi),Kn=Mi.getFill(),Mi.setZIndex(tr);const $i=Ri+"."+Ti;let er=dn[$i];if(!er){const ar=Oe[Ri],Rr=createCanvas(ar.width,ar.height),Gs=Rr.getContext("2d");Gs.globalAlpha=Ti,Gs.drawImage(Ve,ar.x,ar.y,ar.width,ar.height,0,0,ar.width,ar.height),er=Gs.createPattern(Rr,"repeat"),dn[$i]=er}Kn.setColor(er)}}}else Ai=colorWithOpacity(getValue(Jn,"paint",Jn.type+"-color",An,Rn,hn,Gn),Ti),Jn.type+"-outline-color"in qn&&(Pi=colorWithOpacity(getValue(Jn,"paint",Jn.type+"-outline-color",An,Rn,hn,Gn),Ti)),Pi||(Pi=Ai),(Ai||Pi)&&(++Nn,Mi=Cn[Nn],(!Mi||Ai&&!Mi.getFill()||!Ai&&Mi.getFill()||Pi&&!Mi.getStroke()||!Pi&&Mi.getStroke()||Mi.getText())&&(Mi=new Style$1({fill:Ai?new Fill:void 0,stroke:Pi?new Stroke:void 0}),Cn[Nn]=Mi),Ai&&(Kn=Mi.getFill(),Kn.setColor(Ai)),Pi&&(Ii=Mi.getStroke(),Ii.setColor(Pi),Ii.setWidth(.5)),Mi.setZIndex(tr));if(Ln!=1&&Jn.type=="line"){"line-pattern"in qn?Ai=void 0:Ai=colorWithOpacity(getValue(Jn,"paint","line-color",An,Rn,hn,Gn),getValue(Jn,"paint","line-opacity",An,Rn,hn,Gn));const Li=getValue(Jn,"paint","line-width",An,Rn,hn,Gn);Ai&&Li>0&&(++Nn,Mi=Cn[Nn],(!Mi||!Mi.getStroke()||Mi.getFill()||Mi.getText())&&(Mi=new Style$1({stroke:new Stroke}),Cn[Nn]=Mi),Ii=Mi.getStroke(),Ii.setLineCap(getValue(Jn,"layout","line-cap",An,Rn,hn,Gn)),Ii.setLineJoin(getValue(Jn,"layout","line-join",An,Rn,hn,Gn)),Ii.setMiterLimit(getValue(Jn,"layout","line-miter-limit",An,Rn,hn,Gn)),Ii.setColor(Ai),Ii.setWidth(Li),Ii.setLineDash(qn["line-dasharray"]?getValue(Jn,"paint","line-dasharray",An,Rn,hn,Gn).map(function(Ri){return Ri*Li}):null),Mi.setZIndex(tr))}let Br=!1,Un=null,Qn=0,Hn,Fn,Hi;if((Ln==1||Ln==2)&&"icon-image"in xn){const Li=getValue(Jn,"layout","icon-image",An,Rn,hn,Gn);if(Li){Hn=typeof Li=="string"?fromTemplate(Li,Tn):Li.toString();let Ri;const $i=je?je(r,Hn):void 0;if(Ve&&Oe&&Oe[Hn]||$i){const er=getValue(Jn,"layout","icon-rotation-alignment",An,Rn,hn,Gn);if(Ln==2){const ar=bn.getGeometry();if(ar.getFlatMidpoint||ar.getFlatMidpoints){const Rr=ar.getExtent();if(Math.sqrt(Math.max(Math.pow((Rr[2]-Rr[0])/Sn,2),Math.pow((Rr[3]-Rr[1])/Sn,2)))>150){const Pr=ar.getType()==="MultiLineString"?ar.getFlatMidpoints():ar.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),Ri=renderFeature,renderFeatureCoordinates[0]=Pr[0],renderFeatureCoordinates[1]=Pr[1],getValue(Jn,"layout","symbol-placement",An,Rn,hn,Gn)==="line"&&er==="map"){const Zs=ar.getStride(),ho=ar.getFlatCoordinates();for(let co=0,Ws=ho.length-Zs;co<Ws;co+=Zs){const oo=ho[co],to=ho[co+1],mo=ho[co+Zs],ao=ho[co+Zs+1],jo=Math.min(oo,mo),na=Math.min(to,ao),yo=Math.max(oo,mo),io=Math.max(to,ao);if(Pr[0]>=jo&&Pr[0]<=yo&&Pr[1]>=na&&Pr[1]<=io){Qn=Math.atan2(to-ao,mo-oo);break}}}}}}if(Ln!==2||Ri){const ar=getValue(Jn,"layout","icon-size",An,Rn,hn,Gn),Rr=qn["icon-color"]!==void 0?getValue(Jn,"paint","icon-color",An,Rn,hn,Gn):null;if(!Rr||Rr.a!==0){const Gs=getValue(Jn,"paint","icon-halo-color",An,Rn,hn,Gn),Pr=getValue(Jn,"paint","icon-halo-width",An,Rn,hn,Gn);let no=`${Hn}.${ar}.${Pr}.${Gs}`;if(Rr!==null&&(no+=`.${Rr}`),Fn=cn[no],!Fn){const Zs=getDeclutterMode(Jn,An,Rn,"icon",hn);let ho;"icon-offset"in xn&&(ho=getValue(Jn,"layout","icon-offset",An,Rn,hn,Gn).slice(0),ho[0]*=ar,ho[1]*=-ar);let co=Rr?[Rr.r*255,Rr.g*255,Rr.b*255,Rr.a]:void 0;if($i){const Ws={color:co,rotateWithView:er==="map",displacement:ho,declutterMode:Zs,scale:ar};typeof $i=="string"?Ws.src=$i:(Ws.img=$i,Ws.imgSize=[$i.width,$i.height]),Fn=new Icon(Ws)}else{const Ws=Oe[Hn];let oo,to,mo;Pr?Ws.sdf?(oo=drawIconHalo(drawSDF(Ve,Ws,Rr||[0,0,0,1]),{x:0,y:0,width:Ws.width,height:Ws.height,pixelRatio:Ws.pixelRatio},Pr,Gs),co=void 0):oo=drawIconHalo(Ve,Ws,Pr,Gs):(Ws.sdf?(Qe||(Qe=drawSDF(Ve,{x:0,y:0,width:Ze[0],height:Ze[1]},{r:1,g:1,b:1,a:1})),oo=Qe):oo=Ve,to=[Ws.width,Ws.height],mo=[Ws.x,Ws.y]),Fn=new Icon({color:co,img:oo,imgSize:Ze,size:to,offset:mo,rotateWithView:er==="map",scale:ar/Ws.pixelRatio,displacement:ho,declutterMode:Zs})}cn[no]=Fn}}Fn&&(++Nn,Mi=Cn[Nn],(!Mi||!Mi.getImage()||Mi.getFill()||Mi.getStroke())&&(Mi=new Style$1,Cn[Nn]=Mi),Mi.setGeometry(Ri),Fn.setRotation(Qn+deg2rad(getValue(Jn,"layout","icon-rotate",An,Rn,hn,Gn))),Fn.setOpacity(getValue(Jn,"paint","icon-opacity",An,Rn,hn,Gn)),Fn.setAnchor(anchor[getValue(Jn,"layout","icon-anchor",An,Rn,hn,Gn)]),Mi.setImage(Fn),Un=Mi.getText(),Mi.setText(void 0),Mi.setZIndex(tr),Br=!0,Hi=!1)}else Hi=!0}}}if(Ln==1&&Jn.type==="circle"){++Nn,Mi=Cn[Nn],(!Mi||!Mi.getImage()||Mi.getFill()||Mi.getStroke())&&(Mi=new Style$1,Cn[Nn]=Mi);const Li="circle-radius"in qn?getValue(Jn,"paint","circle-radius",An,Rn,hn,Gn):5,Ri=colorWithOpacity(getValue(Jn,"paint","circle-stroke-color",An,Rn,hn,Gn),getValue(Jn,"paint","circle-stroke-opacity",An,Rn,hn,Gn)),$i=getValue(Jn,"paint","circle-translate",An,Rn,hn,Gn),er=colorWithOpacity(getValue(Jn,"paint","circle-color",An,Rn,hn,Gn),getValue(Jn,"paint","circle-opacity",An,Rn,hn,Gn)),ar=getValue(Jn,"paint","circle-stroke-width",An,Rn,hn,Gn),Rr=Li+"."+Ri+"."+er+"."+ar+"."+$i[0]+"."+$i[1];Fn=cn[Rr],Fn||(Fn=new CircleStyle({radius:Li,displacement:[$i[0],-$i[1]],stroke:Ri&&ar>0?new Stroke({width:ar,color:Ri}):void 0,fill:er?new Fill({color:er}):void 0,declutterMode:"none"}),cn[Rr]=Fn),Mi.setImage(Fn),Un=Mi.getText(),Mi.setText(void 0),Mi.setGeometry(void 0),Mi.setZIndex(tr),Br=!0}let zi,Oi,Vi,Bi,Fi,Si;if("text-field"in xn){Bi=Math.round(getValue(Jn,"layout","text-size",An,Rn,hn,Gn));const Li=getValue(Jn,"layout","text-font",An,Rn,hn,Gn);Vi=getValue(Jn,"layout","text-line-height",An,Rn,hn,Gn),Oi=mb2css(Be?Be(Li,e.metadata?e.metadata["ol:webfonts"]:void 0):Li,Bi,Vi),Oi.includes("sans-serif")||(Oi+=",sans-serif"),Fi=getValue(Jn,"layout","text-letter-spacing",An,Rn,hn,Gn),Si=getValue(Jn,"layout","text-max-width",An,Rn,hn,Gn);const Ri=getValue(Jn,"layout","text-field",An,Rn,hn,Gn);typeof Ri=="object"&&Ri.sections?Ri.sections.length===1?zi=Ri.toString():zi=Ri.sections.reduce(($i,er,ar)=>{const Rr=er.fontStack?er.fontStack.split(","):Li,Gs=mb2css(Be?Be(Rr):Rr,Bi*(er.scale||1),Vi);let Pr=er.text;if(Pr===`
`)return $i.push(`
`,""),$i;if(Ln==2){$i.push(applyLetterSpacing(Pr,Fi),Gs);return}Pr=wrapText(Pr,Gs,Si,Fi).split(`
`);for(let no=0,Zs=Pr.length;no<Zs;++no)no>0&&$i.push(`
`,""),$i.push(Pr[no],Gs);return $i},[]):zi=fromTemplate(Ri,Tn).trim(),Ti=getValue(Jn,"paint","text-opacity",An,Rn,hn,Gn)}if(zi&&Ti&&!Hi){Br||(++Nn,Mi=Cn[Nn],(!Mi||!Mi.getText()||Mi.getFill()||Mi.getStroke())&&(Mi=new Style$1,Cn[Nn]=Mi),Mi.setImage(void 0),Mi.setGeometry(void 0));const Li=getDeclutterMode(Jn,An,Rn,"text",hn);Mi.getText()||Mi.setText(Un),Un=Mi.getText(),(!Un||"getDeclutterMode"in Un&&Un.getDeclutterMode()!==Li)&&(Un=new Text({padding:[2,2,2,2],declutterMode:Li}),Mi.setText(Un));const Ri=getValue(Jn,"layout","text-transform",An,Rn,hn,Gn);Ri=="uppercase"?zi=Array.isArray(zi)?zi.map((ao,jo)=>jo%2?ao:ao.toUpperCase()):zi.toUpperCase():Ri=="lowercase"&&(zi=Array.isArray(zi)?zi.map((ao,jo)=>jo%2?ao:ao.toLowerCase()):zi.toLowerCase());const $i=Array.isArray(zi)?zi:Ln==2?applyLetterSpacing(zi,Fi):wrapText(zi,Oi,Si,Fi);Un.setText($i),Un.setFont(Oi),Un.setRotation(deg2rad(getValue(Jn,"layout","text-rotate",An,Rn,hn,Gn)));const er=getValue(Jn,"layout","text-anchor",An,Rn,hn,Gn),ar=Br||Ln==1?"point":getValue(Jn,"layout","symbol-placement",An,Rn,hn,Gn);let Rr;if(ar==="line-center"?(Un.setPlacement("line"),Rr="center"):Un.setPlacement(ar),ar==="line"&&typeof Un.setRepeat=="function"){const ao=getValue(Jn,"layout","symbol-spacing",An,Rn,hn,Gn);Un.setRepeat(ao*2)}Un.setOverflow(ar==="point");let Gs=getValue(Jn,"paint","text-halo-width",An,Rn,hn,Gn);const Pr=getValue(Jn,"layout","text-offset",An,Rn,hn,Gn),no=getValue(Jn,"paint","text-translate",An,Rn,hn,Gn);let Zs=0,ho=0;if(ar=="point"){Rr="center",er.indexOf("left")!==-1?(Rr="left",ho=Gs):er.indexOf("right")!==-1&&(Rr="right",ho=-Gs);const ao=getValue(Jn,"layout","text-rotation-alignment",An,Rn,hn,Gn);Un.setRotateWithView(ao=="map")}else Un.setMaxAngle(deg2rad(getValue(Jn,"layout","text-max-angle",An,Rn,hn,Gn))*zi.length/$i.length),Un.setRotateWithView(!1);Un.setTextAlign(Rr);let co="middle";er.indexOf("bottom")==0?(co="bottom",Zs=-Gs-.5*(Vi-1)*Bi):er.indexOf("top")==0&&(co="top",Zs=Gs+.5*(Vi-1)*Bi),Un.setTextBaseline(co);const Ws=getValue(Jn,"layout","text-justify",An,Rn,hn,Gn);Un.setJustify(Ws==="auto"?void 0:Ws),Un.setOffsetX(Pr[0]*Bi+ho+no[0]),Un.setOffsetY(Pr[1]*Bi+Zs+no[1]),yn.setColor(colorWithOpacity(getValue(Jn,"paint","text-color",An,Rn,hn,Gn),Ti)),Un.setFill(yn);const oo=colorWithOpacity(getValue(Jn,"paint","text-halo-color",An,Rn,hn,Gn),Ti);if(oo&&Gs>0){mn.setColor(oo),Gs*=2;const ao=.5*Bi;mn.setWidth(Gs<=ao?Gs:ao),Un.setStroke(mn)}else Un.setStroke(void 0);const to=getValue(Jn,"layout","text-padding",An,Rn,hn,Gn),mo=Un.getPadding();to!==mo[0]&&(mo[0]=to,mo[1]=to,mo[2]=to,mo[3]=to),Mi.setZIndex(tr)}}}if(Nn>-1)return Cn.length=Nn+1,Cn};return r.setStyle(wn),r.set("mapbox-source",pn),r.set("mapbox-layers",an),r.set("mapbox-featurestate",r.get("mapbox-featurestate")||{}),wn}function getTileResolutions(r,e=512){return r.getExtent()?createXYZ({extent:r.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(r,e){return e.accessToken||(e=Object.assign({},e),new URL(r).searchParams.forEach((ke,Oe)=>{e.accessToken=ke,e.accessTokenParam=Oe})),e}function applyStyle(r,e,t="",ke={},Oe=void 0){let Ge,Be,je,Ve,Ze=!0;return typeof t!="string"&&!Array.isArray(t)?(je=t,Ve=je.source||je.layers,ke=je):Ve=t,typeof ke=="string"?(Ge=ke,je={}):(Ge=ke.styleUrl,je=ke),je.updateSource===!1&&(Ze=!1),Oe||(Oe=je.resolutions),!Ge&&typeof e=="string"&&!e.trim().startsWith("{")&&(Ge=e),Ge&&(Ge=Ge.startsWith("data:")?location.href:normalizeStyleUrl(Ge,je.accessToken),je=completeOptions(Ge,je)),new Promise(function(Qe,en){getGlStyle(e,je).then(function(tn){if(tn.version!=8)return en(new Error("glStyle version 8 required."));if(!(r instanceof VectorLayer||r instanceof VectorTileLayer))return en(new Error("Can only apply to VectorLayer or VectorTileLayer"));const an=r instanceof VectorTileLayer?"vector":"geojson";if(Ve?Array.isArray(Ve)?Be=tn.layers.find(function(yn){return yn.id===Ve[0]}).source:Be=Ve:(Be=Object.keys(tn.sources).find(function(yn){return tn.sources[yn].type===an}),Ve=Be),!Be)return en(new Error(`No ${an} source found in the glStyle.`));function cn(){if(!Ze)return Promise.resolve();if(r instanceof VectorTileLayer)return setupVectorSource(tn.sources[Be],Ge,je).then(function(bn){const Sn=r.getSource();Sn?bn!==Sn&&(Sn.setTileUrlFunction(bn.getTileUrlFunction()),typeof Sn.setUrls=="function"&&typeof bn.getUrls=="function"&&Sn.setUrls(bn.getUrls()),Sn.format_||(Sn.format_=bn.format_),Sn.getAttributions()||Sn.setAttributions(bn.getAttributions()),Sn.getTileLoadFunction()===defaultLoadFunction&&Sn.setTileLoadFunction(bn.getTileLoadFunction()),equivalent(Sn.getProjection(),bn.getProjection())&&(Sn.tileGrid=bn.getTileGrid())):r.setSource(bn);const Mn=r.getSource().getTileGrid();!isFinite(r.getMaxResolution())&&!isFinite(r.getMinZoom())&&Mn.getMinZoom()>0&&r.setMaxResolution(getResolutionForZoom(Math.max(0,Mn.getMinZoom()-1e-12),Mn.getResolutions()))});const yn=tn.sources[Be];let Cn=r.getSource();(!Cn||Cn.get("mapbox-source")!==yn)&&(Cn=setupGeoJSONSource(yn,Ge,je));const wn=r.getSource();return wn?Cn!==wn&&(wn.getAttributions()||wn.setAttributions(Cn.getAttributions()),wn.format_||(wn.format_=Cn.getFormat()),wn.url_=Cn.getUrl()):r.setSource(Cn),Promise.resolve()}let dn,hn,fn,pn;function mn(){if(!pn&&(!tn.sprite||hn)){if(je.projection&&!Oe){const Cn=get$3(je.projection).getUnits();Cn!=="m"&&(Oe=defaultResolutions.map(wn=>wn/METERS_PER_UNIT$1[Cn]))}pn=stylefunction(r,tn,Ve,Oe,hn,fn,(yn,Cn=je.webfonts)=>getFonts(yn,Cn),je.getImage),r.getStyle()?cn().then(Qe).catch(en):en(new Error(`Nothing to show for source [${Be}]`))}else pn?(r.setStyle(pn),cn().then(Qe).catch(en)):en(new Error("Something went wrong trying to apply style."))}if(tn.sprite){const yn=new URL(normalizeSpriteUrl(tn.sprite,je.accessToken,Ge||location.href));dn=window.devicePixelRatio>=1.5?.5:1;const Cn=dn==.5?"@2x":"";let wn=yn.origin+yn.pathname+Cn+".json"+yn.search;new Promise(function(bn,Sn){fetchResource("Sprite",wn,je).then(bn).catch(function(Mn){wn=yn.origin+yn.pathname+".json"+yn.search,fetchResource("Sprite",wn,je).then(bn).catch(Sn)})}).then(function(bn){if(bn===void 0&&en(new Error("No sprites found.")),hn=bn,fn=yn.origin+yn.pathname+Cn+".png"+yn.search,je.transformRequest){const Sn=je.transformRequest(fn,"SpriteImage")||fn;(Sn instanceof Request||Sn instanceof Promise)&&(fn=Sn)}mn()}).catch(function(bn){en(new Error(`Sprites cannot be loaded: ${wn}: ${bn.message}`))})}else mn()}).catch(en)})}function extentFromTileJSON(r,e){const t=r.bounds;if(t){const ke=fromLonLat([t[0],t[1]],e),Oe=fromLonLat([t[2],t[3]],e);return[ke[0],ke[1],Oe[0],Oe[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(r,e,t){const ke=new TileJSON({tileJSON:e,tileSize:r.tileSize||e.tileSize||512}),Oe=ke.getTileJSON(),Ge=ke.getTileGrid(),Be=get$3(t.projection||"EPSG:3857"),je=extentFromTileJSON(Oe,Be),Ve=Be.getExtent(),Ze=Oe.minzoom||0,Qe=Oe.maxzoom||22,en={attributions:ke.getAttributions(),projection:Be,tileGrid:new TileGrid({origin:Ve?getTopLeft(Ve):Ge.getOrigin(0),extent:je||Ge.getExtent(),minZoom:Ze,resolutions:getTileResolutions(Be,e.tileSize).slice(0,Qe+1),tileSize:Ge.getTileSize(0)})};return Array.isArray(Oe.tiles)?en.urls=Oe.tiles:en.url=Oe.tiles,en}function setupVectorSource(r,e,t){return new Promise(function(ke,Oe){getTileJson(r,e,t).then(function({tileJson:Ge,tileLoadFunction:Be}){const je=sourceOptionsFromTileJSON(r,Ge,t);je.tileLoadFunction=Be,je.format=new MVT,ke(new VectorTile(je))}).catch(Oe)})}function getBboxTemplate(r){return`{bbox-${(r?r.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(r,e,t){const ke=t.projection?new GeoJSON$1({dataProjection:t.projection}):new GeoJSON$1,Oe=r.data,Ge={};if(typeof Oe=="string"){const je=normalizeSourceUrl(Oe,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(je)){const Ze=(en,tn,an)=>{const cn=getBboxTemplate(an);return je.replace(cn,`${en.join(",")}`)},Qe=new VectorSource({attributions:r.attribution,format:ke,loader:(en,tn,an,cn,dn)=>{const hn=typeof Ze=="function"?Ze(en,tn,an):Ze;fetchResource("GeoJSON",hn,t).then(fn=>{const pn=Qe.getFormat().readFeatures(fn,{featureProjection:an});Qe.addFeatures(pn),cn(pn)}).catch(fn=>{Qe.removeLoadedExtent(en),dn()})},strategy:bbox});return Qe.set("mapbox-source",r),Qe}const Ve=new VectorSource({attributions:r.attribution,format:ke,url:je,loader:(Ze,Qe,en,tn,an)=>{fetchResource("GeoJSON",je,t).then(cn=>{const dn=Ve.getFormat().readFeatures(cn,{featureProjection:en});Ve.addFeatures(dn),tn(dn)}).catch(cn=>{Ve.removeLoadedExtent(Ze),an()})}});return Ve}Ge.features=ke.readFeatures(Oe,{featureProjection:"EPSG:3857"});const Be=new VectorSource(Object.assign({attributions:r.attribution,format:ke},Ge));return Be.set("mapbox-source",r),Be}var LayerMapBox=class extends VectorTileLayer{constructor(e,t){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var ke=e.ssl===!1?"http://":"https://",Oe=e.configuration;if(!Oe){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Ge=e.layer+"$GEOPORTAIL:GPP:TMS";if(Oe=Config.configuration.getLayerConf(Ge),!Oe)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var Be=null,je="",Ve=e.style,Ze=0;Ze<Oe.styles.length;Ze++){var Qe=Oe.styles[Ze];if(Ve&&Qe.name===Ve){Be=Qe.url,je=Qe.title;break}else if(!Ve&&Qe.current){Ve=Qe.name,Be=Qe.url,je=Qe.title;break}}if(!Be)throw new Error("ERROR : Style URL not found !?");Be.replace(/(http|https):\/\//,ke);var en=new VectorTile({state:"loading",format:new MVT});en._originators=Oe.originators,en._legends=Oe.legends,en._metadata=Oe.metadata,en._description=Oe.description,en._title=Oe.title+" ("+je+")",en._quicklookUrl=Oe.quicklookUrl;var tn={source:en};return Helper.mergeParams(tn,t),e.olParams&&!Oe.originators&&(en._originators=e.olParams.attributions),super(tn),this.name=e.layer,this.service="TMS",this.protocol=ke,this.sourceId=e.source,this.styleUrl=Be,this.config=Oe,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(t){t.ok&&t.json().then(function(ke){e.onStyleMapBoxLoad(ke)})}).catch(function(t){e.onStyleMapBoxError(t)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var t=e.sources[this.sourceId];if(!t){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(t.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var ke=this.getSource();if(t.url){t.url.replace(/(http|https):\/\//,this.protocol);var Oe=new TileJSON({url:t.url}),Ge=this,Be=Oe.on("change",function(){if(Oe.getState()==="ready"){var Ve=Oe.getTileJSON();if(!Ve)return;Ge.set("mapbox-extensions",Ve);for(var Ze=Array.isArray(Ve.tiles)?Ve.tiles:[Ve.tiles],Qe=0;Qe<t.tiles.length;Qe++)Ze[Qe].replace(/(http|https):\/\//,this.protocol);ke.setUrls(Ze),unByKey(Be)}})}if(t.tiles){for(var je=0;je<t.tiles.length;je++)t.tiles[je].replace(/(http|https):\/\//,this.protocol);ke.setUrls(t.tiles)}applyStyle(this,e,this.sourceId).then(()=>{ke.setState("ready"),this.set("mapbox-styles",e)}).catch(Ve=>{this.onStyleMapBoxError(Ve)})}onStyleMapBoxError(e){var t=this.getSource();t.setState("error"),console.error(e.message)}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);const exceptions=["GPoverviewMap","GPfullScreen"];function getSameSideOpenedPanel(r,e){var t=[...exceptions,e],ke=[];if(r&&r.includes("left")){var Oe=document.getElementById("position-container-bottom-left"),Ge=document.getElementById("position-container-top-left");ke=[...Oe.children,...Ge.children]}if(r&&r.includes("right")){var Be=document.getElementById("position-container-bottom-right"),je=document.getElementById("position-container-top-right");ke=[...Be.children,...je.children]}return ke.filter(Ve=>{var Ze=Ve.id.match(/(\w+)-[0-9]+/)[1],Qe=t.includes(Ze),en=Ve.getElementsByTagName("button")[0].getAttribute("aria-pressed");if(en==="true"&&!Qe)return Ve})}var PanelManager=function(r,e){var t=getSameSideOpenedPanel(r,e);t.length>0&&t[0].getElementsByTagName("button")[0].click()},Widget={onPanelOpen:function(){PanelManager(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}},checkDsfr=function(){var r=getComputedStyle(document.documentElement),e=r.getPropertyValue("--blue-france-sun-113-625");return e!==""},ControlExtended=class extends Control{constructor(e){e=e||{},super({element:e.element,target:e.target,render:e.render}),e&&e.listable?this.listable=!0:this.listable=!1,e&&e.description?this.description=e.description:this.description=""}setPosition(e){if(this.getMap()){var t=new PositionFactory(this);t.set(e)}}updatePosition(e){if(this.getMap()){var t=new PositionFactory(this);t.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var mc,Uf,vd,ef;class PositionFactory{constructor(e){Rf(this,mc);return this.caller=e,this.container=null,Zc(this,mc,vd).call(this,"top-left"),Zc(this,mc,vd).call(this,"top-right"),Zc(this,mc,vd).call(this,"bottom-left"),Zc(this,mc,vd).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(Zc(this,mc,ef).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&Zc(this,mc,ef).call(this,e,!0)}}mc=new WeakSet,Uf=function(e){var t=this.container.children["position-container-"+e];return!!t},vd=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!Zc(this,mc,Uf).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position position-container-"+e,this.container.appendChild(t)}},ef=function(e,t){var ke=this;const Oe=Qe=>{var en=ke.container.children["position-container-"+Qe];return en.children.length},Ge=Qe=>{var en=ke.container.children["position-container-"+Qe],tn=en.offsetWidth;return tn},Be=Qe=>{var en=ke.container.children["position-container-"+Qe],tn=en.offsetHeight;if(t){Qe.includes("top")&&(tn=0);for(let an=0;an<en.children.length;an++){if(en.children[an].id===ke.caller.element.id){tn=Qe.includes("bottom")?tn-ke.caller.element.offsetHeight:tn*-1;break}tn-=en.children[an].offsetHeight}}return tn},je=Qe=>{Qe.style.top="unset",Qe.style.bottom="unset",Qe.style.left="unset",Qe.style.right="unset"};je(this.caller.element),this.caller.element.style.position="unset";var Ve=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(Ve.length!==0){var Ze=0;Ve.forEach(Qe=>{if(Qe.nodeName.toLowerCase()==="dialog"){switch(je(Qe),e.toLowerCase()){case"top-left":checkDsfr()?Qe.style.top="0px":Qe.style.top=Oe(e)?Be(e)+"px":"0px",Qe.style.left=Ge(e)+Ze+"px";break;case"bottom-left":checkDsfr()?Qe.style.top="0px":Qe.style.bottom=Oe(e)?Be(e)+"px":"0px",Qe.style.left=Ge(e)+Ze+"px";break;case"top-right":checkDsfr()?Qe.style.top="0px":Qe.style.top=Oe(e)?Be(e)+"px":"0px",Qe.style.right=Ge(e)+Ze+"px";break;case"bottom-right":checkDsfr()?Qe.style.top="0px":Qe.style.bottom=Oe(e)?Be(e)+"px":"0px",Qe.style.right=Ge(e)+Ze+"px";break}Ze+=Qe.offsetWidth}})}};var SelectorID={generate:function(){var r=Math.floor(Date.now());return function(){return r++}}(),name:function(r){var e=null,t=r.lastIndexOf("-");return t===-1?e=r:e=r.substring(0,t),e},index:function(r){var e=null,t=this.name(r),ke=t.lastIndexOf("_");return ke!==-1&&(e=t.substring(ke+1)),e},uuid:function(r){var e=null,t=r.lastIndexOf("-");return t!==-1&&(e=parseInt(r.substring(t+1),10)),e}};/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(r,e){var t=Object.keys(r);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(r);e&&(ke=ke.filter(function(Oe){return Object.getOwnPropertyDescriptor(r,Oe).enumerable})),t.push.apply(t,ke)}return t}function _objectSpread2(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(ke){_defineProperty(r,ke,t[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(ke){Object.defineProperty(r,ke,Object.getOwnPropertyDescriptor(t,ke))})}return r}function _typeof$1(r){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(e){return typeof e}:_typeof$1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(r)}function _defineProperty(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function _extends(){return _extends=Object.assign||function(r){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var ke in t)Object.prototype.hasOwnProperty.call(t,ke)&&(r[ke]=t[ke])}return r},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(r,e){if(r==null)return{};var t={},ke=Object.keys(r),Oe,Ge;for(Ge=0;Ge<ke.length;Ge++)Oe=ke[Ge],!(e.indexOf(Oe)>=0)&&(t[Oe]=r[Oe]);return t}function _objectWithoutProperties(r,e){if(r==null)return{};var t=_objectWithoutPropertiesLoose(r,e),ke,Oe;if(Object.getOwnPropertySymbols){var Ge=Object.getOwnPropertySymbols(r);for(Oe=0;Oe<Ge.length;Oe++)ke=Ge[Oe],!(e.indexOf(ke)>=0)&&Object.prototype.propertyIsEnumerable.call(r,ke)&&(t[ke]=r[ke])}return t}var version="1.15.3";function userAgent(r){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(r)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(r,e,t){r.addEventListener(e,t,!IE11OrLess&&captureMode)}function off(r,e,t){r.removeEventListener(e,t,!IE11OrLess&&captureMode)}function matches(r,e){if(e){if(e[0]===">"&&(e=e.substring(1)),r)try{if(r.matches)return r.matches(e);if(r.msMatchesSelector)return r.msMatchesSelector(e);if(r.webkitMatchesSelector)return r.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(r){return r.host&&r!==document&&r.host.nodeType?r.host:r.parentNode}function closest(r,e,t,ke){if(r){t=t||document;do{if(e!=null&&(e[0]===">"?r.parentNode===t&&matches(r,e):matches(r,e))||ke&&r===t)return r;if(r===t)break}while(r=getParentOrHost(r))}return null}var R_SPACE=/\s+/g;function toggleClass(r,e,t){if(r&&e)if(r.classList)r.classList[t?"add":"remove"](e);else{var ke=(" "+r.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");r.className=(ke+(t?" "+e:"")).replace(R_SPACE," ")}}function css(r,e,t){var ke=r&&r.style;if(ke){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(r,""):r.currentStyle&&(t=r.currentStyle),e===void 0?t:t[e];!(e in ke)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),ke[e]=t+(typeof t=="string"?"":"px")}}function matrix(r,e){var t="";if(typeof r=="string")t=r;else do{var ke=css(r,"transform");ke&&ke!=="none"&&(t=ke+" "+t)}while(!e&&(r=r.parentNode));var Oe=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return Oe&&new Oe(t)}function find(r,e,t){if(r){var ke=r.getElementsByTagName(e),Oe=0,Ge=ke.length;if(t)for(;Oe<Ge;Oe++)t(ke[Oe],Oe);return ke}return[]}function getWindowScrollingElement(){var r=document.scrollingElement;return r||document.documentElement}function getRect(r,e,t,ke,Oe){if(!(!r.getBoundingClientRect&&r!==window)){var Ge,Be,je,Ve,Ze,Qe,en;if(r!==window&&r.parentNode&&r!==getWindowScrollingElement()?(Ge=r.getBoundingClientRect(),Be=Ge.top,je=Ge.left,Ve=Ge.bottom,Ze=Ge.right,Qe=Ge.height,en=Ge.width):(Be=0,je=0,Ve=window.innerHeight,Ze=window.innerWidth,Qe=window.innerHeight,en=window.innerWidth),(e||t)&&r!==window&&(Oe=Oe||r.parentNode,!IE11OrLess))do if(Oe&&Oe.getBoundingClientRect&&(css(Oe,"transform")!=="none"||t&&css(Oe,"position")!=="static")){var tn=Oe.getBoundingClientRect();Be-=tn.top+parseInt(css(Oe,"border-top-width")),je-=tn.left+parseInt(css(Oe,"border-left-width")),Ve=Be+Ge.height,Ze=je+Ge.width;break}while(Oe=Oe.parentNode);if(ke&&r!==window){var an=matrix(Oe||r),cn=an&&an.a,dn=an&&an.d;an&&(Be/=dn,je/=cn,en/=cn,Qe/=dn,Ve=Be+Qe,Ze=je+en)}return{top:Be,left:je,bottom:Ve,right:Ze,width:en,height:Qe}}}function isScrolledPast(r,e,t){for(var ke=getParentAutoScrollElement(r,!0),Oe=getRect(r)[e];ke;){var Ge=getRect(ke)[t],Be=void 0;if(Be=Oe>=Ge,!Be)return ke;if(ke===getWindowScrollingElement())break;ke=getParentAutoScrollElement(ke,!1)}return!1}function getChild(r,e,t,ke){for(var Oe=0,Ge=0,Be=r.children;Ge<Be.length;){if(Be[Ge].style.display!=="none"&&Be[Ge]!==Sortable.ghost&&(ke||Be[Ge]!==Sortable.dragged)&&closest(Be[Ge],t.draggable,r,!1)){if(Oe===e)return Be[Ge];Oe++}Ge++}return null}function lastChild(r,e){for(var t=r.lastElementChild;t&&(t===Sortable.ghost||css(t,"display")==="none"||e&&!matches(t,e));)t=t.previousElementSibling;return t||null}function index(r,e){var t=0;if(!r||!r.parentNode)return-1;for(;r=r.previousElementSibling;)r.nodeName.toUpperCase()!=="TEMPLATE"&&r!==Sortable.clone&&(!e||matches(r,e))&&t++;return t}function getRelativeScrollOffset(r){var e=0,t=0,ke=getWindowScrollingElement();if(r)do{var Oe=matrix(r),Ge=Oe.a,Be=Oe.d;e+=r.scrollLeft*Ge,t+=r.scrollTop*Be}while(r!==ke&&(r=r.parentNode));return[e,t]}function indexOfObject(r,e){for(var t in r)if(r.hasOwnProperty(t)){for(var ke in e)if(e.hasOwnProperty(ke)&&e[ke]===r[t][ke])return Number(t)}return-1}function getParentAutoScrollElement(r,e){if(!r||!r.getBoundingClientRect)return getWindowScrollingElement();var t=r,ke=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var Oe=css(t);if(t.clientWidth<t.scrollWidth&&(Oe.overflowX=="auto"||Oe.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(Oe.overflowY=="auto"||Oe.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return getWindowScrollingElement();if(ke||e)return t;ke=!0}}while(t=t.parentNode);return getWindowScrollingElement()}function extend$1(r,e){if(r&&e)for(var t in e)e.hasOwnProperty(t)&&(r[t]=e[t]);return r}function isRectEqual(r,e){return Math.round(r.top)===Math.round(e.top)&&Math.round(r.left)===Math.round(e.left)&&Math.round(r.height)===Math.round(e.height)&&Math.round(r.width)===Math.round(e.width)}var _throttleTimeout;function throttle(r,e){return function(){if(!_throttleTimeout){var t=arguments,ke=this;t.length===1?r.call(ke,t[0]):r.apply(ke,t),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(r,e,t){r.scrollLeft+=e,r.scrollTop+=t}function clone(r){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(r).cloneNode(!0):t?t(r).clone(!0)[0]:r.cloneNode(!0)}function getChildContainingRectFromElement(r,e,t){var ke={};return Array.from(r.children).forEach(function(Oe){var Ge,Be,je,Ve;if(!(!closest(Oe,e.draggable,r,!1)||Oe.animated||Oe===t)){var Ze=getRect(Oe);ke.left=Math.min((Ge=ke.left)!==null&&Ge!==void 0?Ge:1/0,Ze.left),ke.top=Math.min((Be=ke.top)!==null&&Be!==void 0?Be:1/0,Ze.top),ke.right=Math.max((je=ke.right)!==null&&je!==void 0?je:-1/0,Ze.right),ke.bottom=Math.max((Ve=ke.bottom)!==null&&Ve!==void 0?Ve:-1/0,Ze.bottom)}}),ke.width=ke.right-ke.left,ke.height=ke.bottom-ke.top,ke.x=ke.left,ke.y=ke.top,ke}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var r=[],e;return{captureAnimationState:function(){if(r=[],!!this.options.animation){var ke=[].slice.call(this.el.children);ke.forEach(function(Oe){if(!(css(Oe,"display")==="none"||Oe===Sortable.ghost)){r.push({target:Oe,rect:getRect(Oe)});var Ge=_objectSpread2({},r[r.length-1].rect);if(Oe.thisAnimationDuration){var Be=matrix(Oe,!0);Be&&(Ge.top-=Be.f,Ge.left-=Be.e)}Oe.fromRect=Ge}})}},addAnimationState:function(ke){r.push(ke)},removeAnimationState:function(ke){r.splice(indexOfObject(r,{target:ke}),1)},animateAll:function(ke){var Oe=this;if(!this.options.animation){clearTimeout(e),typeof ke=="function"&&ke();return}var Ge=!1,Be=0;r.forEach(function(je){var Ve=0,Ze=je.target,Qe=Ze.fromRect,en=getRect(Ze),tn=Ze.prevFromRect,an=Ze.prevToRect,cn=je.rect,dn=matrix(Ze,!0);dn&&(en.top-=dn.f,en.left-=dn.e),Ze.toRect=en,Ze.thisAnimationDuration&&isRectEqual(tn,en)&&!isRectEqual(Qe,en)&&(cn.top-en.top)/(cn.left-en.left)===(Qe.top-en.top)/(Qe.left-en.left)&&(Ve=calculateRealTime(cn,tn,an,Oe.options)),isRectEqual(en,Qe)||(Ze.prevFromRect=Qe,Ze.prevToRect=en,Ve||(Ve=Oe.options.animation),Oe.animate(Ze,cn,en,Ve)),Ve&&(Ge=!0,Be=Math.max(Be,Ve),clearTimeout(Ze.animationResetTimer),Ze.animationResetTimer=setTimeout(function(){Ze.animationTime=0,Ze.prevFromRect=null,Ze.fromRect=null,Ze.prevToRect=null,Ze.thisAnimationDuration=null},Ve),Ze.thisAnimationDuration=Ve)}),clearTimeout(e),Ge?e=setTimeout(function(){typeof ke=="function"&&ke()},Be):typeof ke=="function"&&ke(),r=[]},animate:function(ke,Oe,Ge,Be){if(Be){css(ke,"transition",""),css(ke,"transform","");var je=matrix(this.el),Ve=je&&je.a,Ze=je&&je.d,Qe=(Oe.left-Ge.left)/(Ve||1),en=(Oe.top-Ge.top)/(Ze||1);ke.animatingX=!!Qe,ke.animatingY=!!en,css(ke,"transform","translate3d("+Qe+"px,"+en+"px,0)"),this.forRepaintDummy=repaint(ke),css(ke,"transition","transform "+Be+"ms"+(this.options.easing?" "+this.options.easing:"")),css(ke,"transform","translate3d(0,0,0)"),typeof ke.animated=="number"&&clearTimeout(ke.animated),ke.animated=setTimeout(function(){css(ke,"transition",""),css(ke,"transform",""),ke.animated=!1,ke.animatingX=!1,ke.animatingY=!1},Be)}}}}function repaint(r){return r.offsetWidth}function calculateRealTime(r,e,t,ke){return Math.sqrt(Math.pow(e.top-r.top,2)+Math.pow(e.left-r.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*ke.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var t in defaults)defaults.hasOwnProperty(t)&&!(t in e)&&(e[t]=defaults[t]);plugins.forEach(function(ke){if(ke.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,t,ke){var Oe=this;this.eventCanceled=!1,ke.cancel=function(){Oe.eventCanceled=!0};var Ge=e+"Global";plugins.forEach(function(Be){t[Be.pluginName]&&(t[Be.pluginName][Ge]&&t[Be.pluginName][Ge](_objectSpread2({sortable:t},ke)),t.options[Be.pluginName]&&t[Be.pluginName][e]&&t[Be.pluginName][e](_objectSpread2({sortable:t},ke)))})},initializePlugins:function(e,t,ke,Oe){plugins.forEach(function(je){var Ve=je.pluginName;if(!(!e.options[Ve]&&!je.initializeByDefault)){var Ze=new je(e,t,e.options);Ze.sortable=e,Ze.options=e.options,e[Ve]=Ze,_extends(ke,Ze.defaults)}});for(var Ge in e.options)if(e.options.hasOwnProperty(Ge)){var Be=this.modifyOption(e,Ge,e.options[Ge]);typeof Be<"u"&&(e.options[Ge]=Be)}},getEventProperties:function(e,t){var ke={};return plugins.forEach(function(Oe){typeof Oe.eventProperties=="function"&&_extends(ke,Oe.eventProperties.call(t[Oe.pluginName],e))}),ke},modifyOption:function(e,t,ke){var Oe;return plugins.forEach(function(Ge){e[Ge.pluginName]&&Ge.optionListeners&&typeof Ge.optionListeners[t]=="function"&&(Oe=Ge.optionListeners[t].call(e[Ge.pluginName],ke))}),Oe}};function dispatchEvent(r){var e=r.sortable,t=r.rootEl,ke=r.name,Oe=r.targetEl,Ge=r.cloneEl,Be=r.toEl,je=r.fromEl,Ve=r.oldIndex,Ze=r.newIndex,Qe=r.oldDraggableIndex,en=r.newDraggableIndex,tn=r.originalEvent,an=r.putSortable,cn=r.extraEventProperties;if(e=e||t&&t[expando],!!e){var dn,hn=e.options,fn="on"+ke.charAt(0).toUpperCase()+ke.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?dn=new CustomEvent(ke,{bubbles:!0,cancelable:!0}):(dn=document.createEvent("Event"),dn.initEvent(ke,!0,!0)),dn.to=Be||t,dn.from=je||t,dn.item=Oe||t,dn.clone=Ge,dn.oldIndex=Ve,dn.newIndex=Ze,dn.oldDraggableIndex=Qe,dn.newDraggableIndex=en,dn.originalEvent=tn,dn.pullMode=an?an.lastPutMode:void 0;var pn=_objectSpread2(_objectSpread2({},cn),PluginManager.getEventProperties(ke,e));for(var mn in pn)dn[mn]=pn[mn];t&&t.dispatchEvent(dn),hn[fn]&&hn[fn].call(e,dn)}}var _excluded=["evt"],pluginEvent=function(e,t){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Oe=ke.evt,Ge=_objectWithoutProperties(ke,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:Oe,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(je){_dispatchEvent({sortable:t,name:je,originalEvent:Oe})}},Ge))};function _dispatchEvent(r){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},r))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var r=document.createElement("x");return r.style.cssText="pointer-events:auto",r.style.pointerEvents==="auto"}}(),_detectDirection=function(e,t){var ke=css(e),Oe=parseInt(ke.width)-parseInt(ke.paddingLeft)-parseInt(ke.paddingRight)-parseInt(ke.borderLeftWidth)-parseInt(ke.borderRightWidth),Ge=getChild(e,0,t),Be=getChild(e,1,t),je=Ge&&css(Ge),Ve=Be&&css(Be),Ze=je&&parseInt(je.marginLeft)+parseInt(je.marginRight)+getRect(Ge).width,Qe=Ve&&parseInt(Ve.marginLeft)+parseInt(Ve.marginRight)+getRect(Be).width;if(ke.display==="flex")return ke.flexDirection==="column"||ke.flexDirection==="column-reverse"?"vertical":"horizontal";if(ke.display==="grid")return ke.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(Ge&&je.float&&je.float!=="none"){var en=je.float==="left"?"left":"right";return Be&&(Ve.clear==="both"||Ve.clear===en)?"vertical":"horizontal"}return Ge&&(je.display==="block"||je.display==="flex"||je.display==="table"||je.display==="grid"||Ze>=Oe&&ke[CSSFloatProperty]==="none"||Be&&ke[CSSFloatProperty]==="none"&&Ze+Qe>Oe)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,ke){var Oe=ke?e.left:e.top,Ge=ke?e.right:e.bottom,Be=ke?e.width:e.height,je=ke?t.left:t.top,Ve=ke?t.right:t.bottom,Ze=ke?t.width:t.height;return Oe===je||Ge===Ve||Oe+Be/2===je+Ze/2},_detectNearestEmptySortable=function(e,t){var ke;return sortables.some(function(Oe){var Ge=Oe[expando].options.emptyInsertThreshold;if(!(!Ge||lastChild(Oe))){var Be=getRect(Oe),je=e>=Be.left-Ge&&e<=Be.right+Ge,Ve=t>=Be.top-Ge&&t<=Be.bottom+Ge;if(je&&Ve)return ke=Oe}}),ke},_prepareGroup=function(e){function t(Ge,Be){return function(je,Ve,Ze,Qe){var en=je.options.group.name&&Ve.options.group.name&&je.options.group.name===Ve.options.group.name;if(Ge==null&&(Be||en))return!0;if(Ge==null||Ge===!1)return!1;if(Be&&Ge==="clone")return Ge;if(typeof Ge=="function")return t(Ge(je,Ve,Ze,Qe),Be)(je,Ve,Ze,Qe);var tn=(Be?je:Ve).options.group.name;return Ge===!0||typeof Ge=="string"&&Ge===tn||Ge.join&&Ge.indexOf(tn)>-1}}var ke={},Oe=e.group;(!Oe||_typeof$1(Oe)!="object")&&(Oe={name:Oe}),ke.name=Oe.name,ke.checkPull=t(Oe.pull,!0),ke.checkPut=t(Oe.put),ke.revertClone=Oe.revertClone,e.group=ke},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(r){if(ignoreNextClick)return r.preventDefault(),r.stopPropagation&&r.stopPropagation(),r.stopImmediatePropagation&&r.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var ke={};for(var Oe in e)e.hasOwnProperty(Oe)&&(ke[Oe]=e[Oe]);ke.target=ke.rootEl=t,ke.preventDefault=void 0,ke.stopPropagation=void 0,t[expando]._onDragOver(ke)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(r,e){if(!(r&&r.nodeType&&r.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(r));this.el=r,this.options=e=_extends({},e),r[expando]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(r.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(r,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(Be,je){Be.setData("Text",je.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,r,t);for(var ke in t)!(ke in e)&&(e[ke]=t[ke]);_prepareGroup(e);for(var Oe in this)Oe.charAt(0)==="_"&&typeof this[Oe]=="function"&&(this[Oe]=this[Oe].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(r,"pointerdown",this._onTapStart):(on(r,"mousedown",this._onTapStart),on(r,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(r,"dragover",this),on(r,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,ke=this.el,Oe=this.options,Ge=Oe.preventOnFilter,Be=e.type,je=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,Ve=(je||e).target,Ze=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||Ve,Qe=Oe.filter;if(_saveInputCheckedState(ke),!dragEl&&!(/mousedown|pointerdown/.test(Be)&&e.button!==0||Oe.disabled)&&!Ze.isContentEditable&&!(!this.nativeDraggable&&Safari&&Ve&&Ve.tagName.toUpperCase()==="SELECT")&&(Ve=closest(Ve,Oe.draggable,ke,!1),!(Ve&&Ve.animated)&&lastDownEl!==Ve)){if(oldIndex=index(Ve),oldDraggableIndex=index(Ve,Oe.draggable),typeof Qe=="function"){if(Qe.call(this,e,Ve,this)){_dispatchEvent({sortable:t,rootEl:Ze,name:"filter",targetEl:Ve,toEl:ke,fromEl:ke}),pluginEvent("filter",t,{evt:e}),Ge&&e.cancelable&&e.preventDefault();return}}else if(Qe&&(Qe=Qe.split(",").some(function(en){if(en=closest(Ze,en.trim(),ke,!1),en)return _dispatchEvent({sortable:t,rootEl:en,name:"filter",targetEl:Ve,fromEl:ke,toEl:ke}),pluginEvent("filter",t,{evt:e}),!0}),Qe)){Ge&&e.cancelable&&e.preventDefault();return}Oe.handle&&!closest(Ze,Oe.handle,ke,!1)||this._prepareDragStart(e,je,Ve)}}},_prepareDragStart:function(e,t,ke){var Oe=this,Ge=Oe.el,Be=Oe.options,je=Ge.ownerDocument,Ve;if(ke&&!dragEl&&ke.parentNode===Ge){var Ze=getRect(ke);if(rootEl=Ge,dragEl=ke,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=ke,activeGroup=Be.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-Ze.left,tapDistanceTop=tapEvt.clientY-Ze.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",Ve=function(){if(pluginEvent("delayEnded",Oe,{evt:e}),Sortable.eventCanceled){Oe._onDrop();return}Oe._disableDelayedDragEvents(),!FireFox&&Oe.nativeDraggable&&(dragEl.draggable=!0),Oe._triggerDragStart(e,t),_dispatchEvent({sortable:Oe,name:"choose",originalEvent:e}),toggleClass(dragEl,Be.chosenClass,!0)},Be.ignore.split(",").forEach(function(Qe){find(dragEl,Qe.trim(),_disableDraggable)}),on(je,"dragover",nearestEmptyInsertDetectEvent),on(je,"mousemove",nearestEmptyInsertDetectEvent),on(je,"touchmove",nearestEmptyInsertDetectEvent),on(je,"mouseup",Oe._onDrop),on(je,"touchend",Oe._onDrop),on(je,"touchcancel",Oe._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),Be.delay&&(!Be.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(je,"mouseup",Oe._disableDelayedDrag),on(je,"touchend",Oe._disableDelayedDrag),on(je,"touchcancel",Oe._disableDelayedDrag),on(je,"mousemove",Oe._delayedDragTouchMoveHandler),on(je,"touchmove",Oe._delayedDragTouchMoveHandler),Be.supportPointer&&on(je,"pointermove",Oe._delayedDragTouchMoveHandler),Oe._dragStartTimer=setTimeout(Ve,Be.delay)}else Ve()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):t?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var ke=this.options;!e&&toggleClass(dragEl,ke.dragClass,!1),toggleClass(dragEl,ke.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==t);)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando]){var ke=void 0;if(ke=t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t}),ke&&!this.options.dragoverBubble)break}e=t}while(t=getParentOrHost(t));_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,ke=t.fallbackTolerance,Oe=t.fallbackOffset,Ge=e.touches?e.touches[0]:e,Be=ghostEl&&matrix(ghostEl,!0),je=ghostEl&&Be&&Be.a,Ve=ghostEl&&Be&&Be.d,Ze=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),Qe=(Ge.clientX-tapEvt.clientX+Oe.x)/(je||1)+(Ze?Ze[0]-ghostRelativeParentInitialScroll[0]:0)/(je||1),en=(Ge.clientY-tapEvt.clientY+Oe.y)/(Ve||1)+(Ze?Ze[1]-ghostRelativeParentInitialScroll[1]:0)/(Ve||1);if(!Sortable.active&&!awaitingDragStarted){if(ke&&Math.max(Math.abs(Ge.clientX-this._lastX),Math.abs(Ge.clientY-this._lastY))<ke)return;this._onDragStart(e,!0)}if(ghostEl){Be?(Be.e+=Qe-(lastDx||0),Be.f+=en-(lastDy||0)):Be={a:1,b:0,c:0,d:1,e:Qe,f:en};var tn="matrix(".concat(Be.a,",").concat(Be.b,",").concat(Be.c,",").concat(Be.d,",").concat(Be.e,",").concat(Be.f,")");css(ghostEl,"webkitTransform",tn),css(ghostEl,"mozTransform",tn),css(ghostEl,"msTransform",tn),css(ghostEl,"transform",tn),lastDx=Qe,lastDy=en,touchEvt=Ge}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),ke=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,ke.ghostClass,!1),toggleClass(ghostEl,ke.fallbackClass,!0),toggleClass(ghostEl,ke.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var ke=this,Oe=e.dataTransfer,Ge=ke.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),ke.cloneId=_nextTick(function(){pluginEvent("clone",ke),!Sortable.eventCanceled&&(ke.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),ke._hideClone(),_dispatchEvent({sortable:ke,name:"clone"}))}),!t&&toggleClass(dragEl,Ge.dragClass,!0),t?(ignoreNextClick=!0,ke._loopId=setInterval(ke._emulateDragOver,50)):(off(document,"mouseup",ke._onDrop),off(document,"touchend",ke._onDrop),off(document,"touchcancel",ke._onDrop),Oe&&(Oe.effectAllowed="move",Ge.setData&&Ge.setData.call(ke,Oe,dragEl)),on(document,"drop",ke),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,ke._dragStartId=_nextTick(ke._dragStarted.bind(ke,t,e)),on(document,"selectstart",ke),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,ke=e.target,Oe,Ge,Be,je=this.options,Ve=je.group,Ze=Sortable.active,Qe=activeGroup===Ve,en=je.sort,tn=putSortable||Ze,an,cn=this,dn=!1;if(_silent)return;function hn(Dn,Ci){pluginEvent(Dn,cn,_objectSpread2({evt:e,isOwner:Qe,axis:an?"vertical":"horizontal",revert:Be,dragRect:Oe,targetRect:Ge,canSort:en,fromSortable:tn,target:ke,completed:pn,onMove:function(Ki,xn){return _onMove(rootEl,t,dragEl,Oe,Ki,getRect(Ki),e,xn)},changed:mn},Ci))}function fn(){hn("dragOverAnimationCapture"),cn.captureAnimationState(),cn!==tn&&tn.captureAnimationState()}function pn(Dn){return hn("dragOverCompleted",{insertion:Dn}),Dn&&(Qe?Ze._hideClone():Ze._showClone(cn),cn!==tn&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:Ze.options.ghostClass,!1),toggleClass(dragEl,je.ghostClass,!0)),putSortable!==cn&&cn!==Sortable.active?putSortable=cn:cn===Sortable.active&&putSortable&&(putSortable=null),tn===cn&&(cn._ignoreWhileAnimating=ke),cn.animateAll(function(){hn("dragOverAnimationComplete"),cn._ignoreWhileAnimating=null}),cn!==tn&&(tn.animateAll(),tn._ignoreWhileAnimating=null)),(ke===dragEl&&!dragEl.animated||ke===t&&!ke.animated)&&(lastTarget=null),!je.dragoverBubble&&!e.rootEl&&ke!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!Dn&&nearestEmptyInsertDetectEvent(e)),!je.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),dn=!0}function mn(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,je.draggable),_dispatchEvent({sortable:cn,name:"change",toEl:t,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),ke=closest(ke,je.draggable,t,!0),hn("dragOver"),Sortable.eventCanceled)return dn;if(dragEl.contains(e.target)||ke.animated&&ke.animatingX&&ke.animatingY||cn._ignoreWhileAnimating===ke)return pn(!1);if(ignoreNextClick=!1,Ze&&!je.disabled&&(Qe?en||(Be=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,Ze,dragEl,e))&&Ve.checkPut(this,Ze,dragEl,e))){if(an=this._getDirection(e,ke)==="vertical",Oe=getRect(dragEl),hn("dragOverValid"),Sortable.eventCanceled)return dn;if(Be)return parentEl=rootEl,fn(),this._hideClone(),hn("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),pn(!0);var yn=lastChild(t,je.draggable);if(!yn||_ghostIsLast(e,an,this)&&!yn.animated){if(yn===dragEl)return pn(!1);if(yn&&t===e.target&&(ke=yn),ke&&(Ge=getRect(ke)),_onMove(rootEl,t,dragEl,Oe,ke,Ge,e,!!ke)!==!1)return fn(),yn&&yn.nextSibling?t.insertBefore(dragEl,yn.nextSibling):t.appendChild(dragEl),parentEl=t,mn(),pn(!0)}else if(yn&&_ghostIsFirst(e,an,this)){var Cn=getChild(t,0,je,!0);if(Cn===dragEl)return pn(!1);if(ke=Cn,Ge=getRect(ke),_onMove(rootEl,t,dragEl,Oe,ke,Ge,e,!1)!==!1)return fn(),t.insertBefore(dragEl,Cn),parentEl=t,mn(),pn(!0)}else if(ke.parentNode===t){Ge=getRect(ke);var wn=0,bn,Sn=dragEl.parentNode!==t,Mn=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||Oe,ke.animated&&ke.toRect||Ge,an),Tn=an?"top":"left",En=isScrolledPast(ke,"top","top")||isScrolledPast(dragEl,"top","top"),An=En?En.scrollTop:void 0;lastTarget!==ke&&(bn=Ge[Tn],pastFirstInvertThresh=!1,isCircumstantialInvert=!Mn&&je.invertSwap||Sn),wn=_getSwapDirection(e,ke,Ge,an,Mn?1:je.swapThreshold,je.invertedSwapThreshold==null?je.swapThreshold:je.invertedSwapThreshold,isCircumstantialInvert,lastTarget===ke);var Ln;if(wn!==0){var Rn=index(dragEl);do Rn-=wn,Ln=parentEl.children[Rn];while(Ln&&(css(Ln,"display")==="none"||Ln===ghostEl))}if(wn===0||Ln===ke)return pn(!1);lastTarget=ke,lastDirection=wn;var Gn=ke.nextElementSibling,Nn=!1;Nn=wn===1;var jn=_onMove(rootEl,t,dragEl,Oe,ke,Ge,e,Nn);if(jn!==!1)return(jn===1||jn===-1)&&(Nn=jn===1),_silent=!0,setTimeout(_unsilent,30),fn(),Nn&&!Gn?t.appendChild(dragEl):ke.parentNode.insertBefore(dragEl,Nn?Gn:ke),En&&scrollBy(En,0,An-En.scrollTop),parentEl=dragEl.parentNode,bn!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(bn-getRect(ke)[Tn])),mn(),pn(!0)}if(t.contains(dragEl))return pn(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,ke=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,ke.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,ke.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!ke.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,ke=this.el.children,Oe=0,Ge=ke.length,Be=this.options;Oe<Ge;Oe++)t=ke[Oe],closest(t,Be.draggable,this.el,!1)&&e.push(t.getAttribute(Be.dataIdAttr)||_generateId(t));return e},sort:function(e,t){var ke={},Oe=this.el;this.toArray().forEach(function(Ge,Be){var je=Oe.children[Be];closest(je,this.options.draggable,Oe,!1)&&(ke[Ge]=je)},this),t&&this.captureAnimationState(),e.forEach(function(Ge){ke[Ge]&&(Oe.removeChild(ke[Ge]),Oe.appendChild(ke[Ge]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var ke=this.options;if(t===void 0)return ke[e];var Oe=PluginManager.modifyOption(this,e,t);typeof Oe<"u"?ke[e]=Oe:ke[e]=t,e==="group"&&_prepareGroup(ke)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(r){r.dataTransfer&&(r.dataTransfer.dropEffect="move"),r.cancelable&&r.preventDefault()}function _onMove(r,e,t,ke,Oe,Ge,Be,je){var Ve,Ze=r[expando],Qe=Ze.options.onMove,en;return window.CustomEvent&&!IE11OrLess&&!Edge?Ve=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(Ve=document.createEvent("Event"),Ve.initEvent("move",!0,!0)),Ve.to=e,Ve.from=r,Ve.dragged=t,Ve.draggedRect=ke,Ve.related=Oe||e,Ve.relatedRect=Ge||getRect(e),Ve.willInsertAfter=je,Ve.originalEvent=Be,r.dispatchEvent(Ve),Qe&&(en=Qe.call(Ze,Ve,Be)),en}function _disableDraggable(r){r.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(r,e,t){var ke=getRect(getChild(t.el,0,t.options,!0)),Oe=getChildContainingRectFromElement(t.el,t.options,ghostEl),Ge=10;return e?r.clientX<Oe.left-Ge||r.clientY<ke.top&&r.clientX<ke.right:r.clientY<Oe.top-Ge||r.clientY<ke.bottom&&r.clientX<ke.left}function _ghostIsLast(r,e,t){var ke=getRect(lastChild(t.el,t.options.draggable)),Oe=getChildContainingRectFromElement(t.el,t.options,ghostEl),Ge=10;return e?r.clientX>Oe.right+Ge||r.clientY>ke.bottom&&r.clientX>ke.left:r.clientY>Oe.bottom+Ge||r.clientX>ke.right&&r.clientY>ke.top}function _getSwapDirection(r,e,t,ke,Oe,Ge,Be,je){var Ve=ke?r.clientY:r.clientX,Ze=ke?t.height:t.width,Qe=ke?t.top:t.left,en=ke?t.bottom:t.right,tn=!1;if(!Be){if(je&&targetMoveDistance<Ze*Oe){if(!pastFirstInvertThresh&&(lastDirection===1?Ve>Qe+Ze*Ge/2:Ve<en-Ze*Ge/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)tn=!0;else if(lastDirection===1?Ve<Qe+targetMoveDistance:Ve>en-targetMoveDistance)return-lastDirection}else if(Ve>Qe+Ze*(1-Oe)/2&&Ve<en-Ze*(1-Oe)/2)return _getInsertDirection(e)}return tn=tn||Be,tn&&(Ve<Qe+Ze*Ge/2||Ve>en-Ze*Ge/2)?Ve>Qe+Ze/2?1:-1:0}function _getInsertDirection(r){return index(dragEl)<index(r)?1:-1}function _generateId(r){for(var e=r.tagName+r.className+r.src+r.href+r.textContent,t=e.length,ke=0;t--;)ke+=e.charCodeAt(t);return ke.toString(36)}function _saveInputCheckedState(r){savedInputChecked.length=0;for(var e=r.getElementsByTagName("input"),t=e.length;t--;){var ke=e[t];ke.checked&&savedInputChecked.push(ke)}}function _nextTick(r){return setTimeout(r,0)}function _cancelNextTick(r){return clearTimeout(r)}documentExists&&on(document,"touchmove",function(r){(Sortable.active||awaitingDragStarted)&&r.cancelable&&r.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,t){return!!closest(e,t,e,!1)},extend:extend$1,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(r){return r[expando]};Sortable.mount=function(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(ke){if(!ke.prototype||!ke.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(ke));ke.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),ke.utils)),PluginManager.mount(ke)})};Sortable.create=function(r,e){return new Sortable(r,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function r(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return r.prototype={dragStarted:function(t){var ke=t.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):ke.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var ke=t.originalEvent;!this.options.dragOverBubble&&!ke.rootEl&&this._handleAutoScroll(ke)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,ke){var Oe=this,Ge=(t.touches?t.touches[0]:t).clientX,Be=(t.touches?t.touches[0]:t).clientY,je=document.elementFromPoint(Ge,Be);if(touchEvt$1=t,ke||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(t,this.options,je,ke);var Ve=getParentAutoScrollElement(je,!0);scrolling&&(!pointerElemChangedInterval||Ge!==lastAutoScrollX||Be!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var Ze=getParentAutoScrollElement(document.elementFromPoint(Ge,Be),!0);Ze!==Ve&&(Ve=Ze,clearAutoScrolls()),autoScroll(t,Oe.options,Ze,ke)},10),lastAutoScrollX=Ge,lastAutoScrollY=Be)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(je,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(t,this.options,getParentAutoScrollElement(je,!1),!1)}}},_extends(r,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(r){clearInterval(r.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(r,e,t,ke){if(e.scroll){var Oe=(r.touches?r.touches[0]:r).clientX,Ge=(r.touches?r.touches[0]:r).clientY,Be=e.scrollSensitivity,je=e.scrollSpeed,Ve=getWindowScrollingElement(),Ze=!1,Qe;scrollRootEl!==t&&(scrollRootEl=t,clearAutoScrolls(),scrollEl=e.scroll,Qe=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(t,!0)));var en=0,tn=scrollEl;do{var an=tn,cn=getRect(an),dn=cn.top,hn=cn.bottom,fn=cn.left,pn=cn.right,mn=cn.width,yn=cn.height,Cn=void 0,wn=void 0,bn=an.scrollWidth,Sn=an.scrollHeight,Mn=css(an),Tn=an.scrollLeft,En=an.scrollTop;an===Ve?(Cn=mn<bn&&(Mn.overflowX==="auto"||Mn.overflowX==="scroll"||Mn.overflowX==="visible"),wn=yn<Sn&&(Mn.overflowY==="auto"||Mn.overflowY==="scroll"||Mn.overflowY==="visible")):(Cn=mn<bn&&(Mn.overflowX==="auto"||Mn.overflowX==="scroll"),wn=yn<Sn&&(Mn.overflowY==="auto"||Mn.overflowY==="scroll"));var An=Cn&&(Math.abs(pn-Oe)<=Be&&Tn+mn<bn)-(Math.abs(fn-Oe)<=Be&&!!Tn),Ln=wn&&(Math.abs(hn-Ge)<=Be&&En+yn<Sn)-(Math.abs(dn-Ge)<=Be&&!!En);if(!autoScrolls[en])for(var Rn=0;Rn<=en;Rn++)autoScrolls[Rn]||(autoScrolls[Rn]={});(autoScrolls[en].vx!=An||autoScrolls[en].vy!=Ln||autoScrolls[en].el!==an)&&(autoScrolls[en].el=an,autoScrolls[en].vx=An,autoScrolls[en].vy=Ln,clearInterval(autoScrolls[en].pid),(An!=0||Ln!=0)&&(Ze=!0,autoScrolls[en].pid=setInterval((function(){ke&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var Gn=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*je:0,Nn=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*je:0;typeof Qe=="function"&&Qe.call(Sortable.dragged.parentNode[expando],Nn,Gn,r,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,Nn,Gn)}).bind({layer:en}),24))),en++}while(e.bubbleScroll&&tn!==Ve&&(tn=getParentAutoScrollElement(tn,!1)));scrolling=Ze}},30),drop=function(e){var t=e.originalEvent,ke=e.putSortable,Oe=e.dragEl,Ge=e.activeSortable,Be=e.dispatchSortableEvent,je=e.hideGhostForTarget,Ve=e.unhideGhostForTarget;if(t){var Ze=ke||Ge;je();var Qe=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,en=document.elementFromPoint(Qe.clientX,Qe.clientY);Ve(),Ze&&!Ze.el.contains(en)&&(Be("spill"),this.onSpill({dragEl:Oe,putSortable:ke}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,ke=e.putSortable;this.sortable.captureAnimationState(),ke&&ke.captureAnimationState();var Oe=getChild(this.sortable.el,this.startIndex,this.options);Oe?this.sortable.el.insertBefore(t,Oe):this.sortable.el.appendChild(t),this.sortable.animateAll(),ke&&ke.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var t=e.dragEl,ke=e.putSortable,Oe=ke||this.sortable;Oe.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),Oe.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var LayerSwitcherDOM={_createDraggableElement:function(r,e){let t=".GPlayerName";checkDsfr()&&(t=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(r,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(ke){e._onEndDragAndDropLayerClick(ke)}}):Sortable.create(r,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(ke){e._onEndDragAndDropLayerClick(ke)}})},_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPlayerSwitcher"),r.className="GPwidget gpf-widget gpf-mobile-fullscreen gpf-widget-button",r},_createMainLayersShowElement:function(){var r=document.createElement("input");return r.id=this._addUID("GPshowLayersList"),r.type="checkbox",r},_createMainLayersElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPlayersList"),r.className="GPpanel gpf-panel fr-modal",r},_createMainLayersDivElement:function(){var r=document.createElement("div");return r.className="GPpanelBody gpf-panel__body_ls fr-modal__body",r},_createMainPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn fr-btn--tertiary",e.htmlFor=this._addUID("GPshowLayersList"),e.setAttribute("aria-label","Afficher/masquer le gestionnaire de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),document.getElementById(r._addUID("GPshowLayersList")).checked=Oe,document.getElementById(r._addUID("GPshowLayersList")).checked&&(document.getElementById(r._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(r._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),r.onShowLayerSwitcherClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),document.getElementById(r._addUID("GPshowLayersList")).checked&&(document.getElementById(r._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(r._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),r.onShowLayerSwitcherClick(ke)}),e},_createMainCounterLayersElement:function(){var r=document.createElement("span");return r.id=this._addUID("GPlayerCounter"),r.className="GPlayerCounter",r.innerHTML="0",r},_createMainInfoElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPlayerInfoPanel"),r.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",r},_createMainInfoDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createLayersPanelHeaderElement:function(){var r=document.createElement("div");return r.className="GPpanelHeader gpf-panel__header_ls",r},_createLayersPanelIconElement:function(){var r=document.createElement("label");return r.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",r.title="Couches de données",r},_createLayersPanelTitleElement:function(){var r=document.createElement("div");return r.className="GPpanelTitle gpf-panel__title_ls",r.id=this._addUID("GPlayersHeaderTitle"),r.innerHTML="Couches de données",r},_createLayersPanelCloseElement:function(){var r=this,e=document.createElement("button");e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible fr-mx-1w",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(r._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(r){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+r.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(r)),e.appendChild(this._createAdvancedToolShowElement(r)),e.appendChild(this._createAdvancedToolElement(r)),e},_createBasicToolElement:function(r){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+r.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(r)),e.appendChild(this._createBasicToolVisibilityElement(r)),e.appendChild(this._createBasicToolDragNDropElement(r)),e},_createBasicToolDragNDropElement:function(r){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+r.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop gpf-btn--tertiary fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0");var t=this;return e.addEventListener?e.addEventListener("click",function(ke){t._onStartDragAndDropLayerClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){t._onStartDragAndDropLayerClick(ke)}),e},_createBasicToolNameElement:function(r){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+r.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=r.description||r.title,e.innerHTML=r.title,e},_createBasicToolVisibilityElement:function(r){var e=typeof r.visibility<"u"?r.visibility:!0,t=document.createElement("button");t.id=this._addUID("GPvisibilityPicto_ID_"+r.id),t.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Afficher/masquer la couche",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",e),t.setAttribute("type","button");var ke=this;return t.addEventListener?t.addEventListener("click",function(Oe){var Ge=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Ge),ke._onVisibilityLayerClick(Oe)}):t.attachEvent&&t.attachEvent("onclick",function(Oe){var Ge=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Ge),ke._onVisibilityLayerClick(Oe)}),t},_createAdvancedToolShowElement:function(r){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+r.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var t=this;return e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe);var Ge=document.getElementById(t._addUID("GPadvancedTools_ID_"+r.id));Oe?(Ge.classList.replace("GPelementVisible","GPelementHidden"),Ge.classList.replace("gpf-visible","gpf-hidden")):(Ge.classList.replace("GPelementHidden","GPelementVisible"),Ge.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(r){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+r.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(r)),e.appendChild(this._createAdvancedToolInformationElement(r)),r.type!=="feature")for(var t=this._createAdvancedToolOpacityElement(r),ke=0;ke<t.length;ke++)e.appendChild(t[ke]);if(e.appendChild(this._createAdvancedToolExtentElement(r)),checkDsfr()){var Oe=document.createElement("button");Oe.className="GPlayerAdvancedToolsContextual fr-btn gpf-btn gpf-btn--tertiary fr-btn--tertiary-no-outline",Oe.setAttribute("aria-pressed",!1),Oe.addEventListener?Oe.addEventListener("click",function(Be){var je=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!je)}):Oe.attachEvent&&Oe.attachEvent("onclick",function(Be){var je=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!je)});var Ge=document.createElement("div");Ge.appendChild(this._createAdvancedToolDeleteElement(r,!0)),Ge.appendChild(this._createAdvancedToolInformationElement(r,!0)),Ge.appendChild(this._createAdvancedToolExtentElement(r,!0)),e.appendChild(Oe),e.appendChild(Ge)}return e},_createAdvancedToolDeleteElement:function(r,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPremoveContextual_ID_"+r.id):t.id=this._addUID("GPremove_ID_"+r.id),t.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Supprimer la couche",t.layerId=r.id,e&&(t.innerText="Supprimer"),t.setAttribute("tabindex","0"),t.setAttribute("type","button");var ke=this;return t.addEventListener?t.addEventListener("click",function(Oe){ke._onDropLayerClick(Oe)}):t.attachEvent&&t.attachEvent("onclick",function(Oe){ke._onDropLayerClick(Oe)}),t},_createAdvancedToolInformationElement:function(r,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPinfoContextual_ID_"+r.id):t.id=this._addUID("GPinfo_ID_"+r.id),t.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!r.title||!r.description)&&(t.style.opacity="0",t.style.visibility="hidden",e&&(t.style.display="none")),t.title="Informations/légende",t.layerId=r.id,e&&(t.innerText="Informations"),t.setAttribute("tabindex","0"),t.setAttribute("type","button");var ke=this;return t.addEventListener?t.addEventListener("click",function(Oe){ke._onOpenLayerInfoClick(Oe)}):t.attachEvent&&t.attachEvent("onclick",function(Oe){ke._onOpenLayerInfoClick(Oe)}),t},_createAdvancedToolOpacityElement:function(r){var e=[],t=document.createElement("div");t.id=this._addUID("GPopacity_ID_"+r.id),t.className="GPlayerOpacity fr-range fr-range--sm",t.dataset.frJsRange="true",t.title="Opacité";var ke=typeof r.opacity<"u"?r.opacity:1;ke=Math.round(ke*100),t.style.setProperty("--progress-right",ke+"%");var Oe=document.createElement("input");Oe.id=this._addUID("GPopacityValueDiv_ID_"+r.id),Oe.type="range",Oe.value=ke,Oe.ariaLabel="Opacité";var Ge=this;Oe.addEventListener?Oe.addEventListener("change",function(Ve){Ge._onChangeLayerOpacity(Ve)}):Oe.attachEvent&&Oe.attachEvent("onchange",function(Ve){Ge._onChangeLayerOpacity(Ve)}),Oe.addEventListener?Oe.addEventListener("input",function(Ve){Ge._onChangeLayerOpacity(Ve)}):Oe.attachEvent&&Oe.attachEvent("oninput",function(Ve){Ge._onChangeLayerOpacity(Ve)}),t.appendChild(Oe);var Be=document.createElement("div");Be.id=this._addUID("GPopacityValueDiv_ID_"+r.id),Be.className="GPlayerOpacityValue";var je=document.createElement("span");return je.id=this._addUID("GPopacityValue_ID_"+r.id),je.className="gpf-range__output fr-range__output gpf-visible",je.innerHTML=ke+"%",Be.appendChild(je),e.push(t),e.push(Be),e},_createAdvancedToolExtentElement:function(r,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPextentContextual_ID_"+r.id):t.id=this._addUID("GPextent_ID_"+r.id),t.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Zoomer dans l'étendue",t.layerId=r.id,e&&(t.innerText="Zoomer"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!0),t.setAttribute("type","button");var ke=this;return t.addEventListener?t.addEventListener("click",function(Oe){var Ge=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Ge),ke._onZoomToExtentClick(Oe)}):t.attachEvent&&t.attachEvent("onclick",function(Oe){var Ge=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Ge),ke._onZoomToExtentClick(Oe)}),t},_createContainerLayerInfoElement:function(r){var e=document.createElement("div"),t=document.createElement("div");t.className="gpf-panel__header_ls",e.appendChild(t);var ke=document.createElement("label");ke.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",ke.title="Informations",t.appendChild(ke);var Oe=document.createElement("div");Oe.id=this._addUID("GPlayerInfoTitle"),Oe.innerHTML=r.title,Oe.className="gpf-panel__title_ls",t.appendChild(Oe);var Ge=document.createElement("button");Ge.id=this._addUID("GPlayerInfoClose"),Ge.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ge.title="Fermer la fenêtre";var Be=this,je=function(){document.getElementById(Be._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(Be._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(r.id).classList.add("GPlayerInfoClosed"),document.getElementById(r.id).classList.remove("GPlayerInfoOpened")};Ge.addEventListener?Ge.addEventListener("click",je):Ge.attachEvent&&Ge.attachEvent("onclick",je),this.addEventListener("layerswitcher:remove",Ln=>{parseInt(r.id.split("-")[0].split("GPinfo_ID_")[1])===Ln.layer.id&&(document.getElementById(Be._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(Be._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"))}),t.appendChild(Ge),e.appendChild(t);var Ve=document.createElement("div");if(Ve.id=this._addUID("GPlayerInfoContent"),Ve.className="gpf-panel__content fr-modal__content",e.appendChild(Ve),r.quicklookUrl){var Ze=document.createElement("div");Ze.id=this._addUID("GPlayerInfoQuicklook"),Ze.title="Afficher un aperçu de la couche";var Qe=document.createElement("a");Qe.href=r.quicklookUrl,Qe.appendChild(Ze),Ve.appendChild(Qe)}var en=document.createElement("div");if(en.id=this._addUID("GPlayerInfoDescription"),en.innerHTML=r.description,Ve.appendChild(en),r.metadata){var tn=document.createElement("div");tn.id=this._addUID("GPlayerInfoMetadata");var an=document.createElement("div");an.className="GPlayerInfoSubtitle",an.innerHTML="Métadonnées",tn.appendChild(an);for(var cn=0;cn<r.metadata.length;cn++){var dn=r.metadata[cn].url,hn=document.createElement("div");hn.className="GPlayerInfoLink";var fn=document.createElement("a");fn.href=dn,fn.innerHTML=dn,hn.appendChild(fn),tn.appendChild(hn)}r.metadata.length!==0&&Ve.appendChild(tn)}if(r.legends){var pn=document.createElement("div");pn.id=this._addUID("GPlayerInfoLegend");var mn=document.createElement("div");mn.className="GPlayerInfoSubtitle",mn.innerHTML="Légende",pn.appendChild(mn);for(var yn={},Cn=r.maxScaleDenominator||56e7,wn=0;wn<r.legends.length;wn++){var bn=r.legends[wn].minScaleDenominator;if(bn){var Sn=bn.toString();bn=Math.round(parseInt(Sn.substring(0,3),10)/10)*Math.pow(10,Sn.length-2)}else bn=270;yn[bn]=r.legends[wn]}for(var Mn in yn)if(yn.hasOwnProperty(Mn)){var Tn=yn[Mn].url;if(typeof Tn=="string"&&Tn.toLowerCase().indexOf("nolegend.jpg")===-1){var En=document.createElement("div");En.className="GPlayerInfoLink",Cn=yn[Mn].maxScaleDenominator||Cn;var An=document.createElement("a");An.className="fr-link",An.href=Tn,An.target="_blank",An.innerHTML="Du 1/"+Mn+" au 1/"+Cn,En.appendChild(An),pn.appendChild(En)}else delete yn[Mn]}Object.keys(yn).length!==0&&Ve.appendChild(pn)}return e}},logger$z=LoggerByDefault.getLogger("layerswitcher"),LayerSwitcher=class jf extends ControlExtended{constructor(e){e=e||{};var t=e.options||{},ke=e.layers||[];if(super(t),!(this instanceof jf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(ke))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof t!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(t,ke),this.container=this._initContainer(t),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",ke=>{var Oe=ke.element,Ge;Oe.hasOwnProperty("gpLayerId")?Ge=Oe.gpLayerId:(Ge=this._layerId,Oe.gpLayerId=Ge,this._layerId++),this._layers[Ge]||this.addLayer(Oe)}),this._listeners.onRemoveListener=e.getLayers().on("remove",ke=>{var Oe=ke.element,Ge=Oe.gpLayerId;this._layers[Ge]&&this.removeLayer(Oe)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var t=this._layersOrder.length-1;t>=0;t--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}addLayer(e,t){var ke=this.getMap();if(t=t||{},!e){logger$z.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var Oe=e.gpLayerId;if(typeof Oe>"u"){logger$z.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var Ge=!1;if(ke.getLayers().forEach(hn=>{hn.gpLayerId===Oe&&(Ge=!0)}),!Ge){logger$z.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[Oe]){for(var tn in t)t.hasOwnProperty(tn)&&(this._layers[Oe][tn]=t[tn]);if(t.title){var an=document.getElementById(this._addUID("GPname_ID_"+Oe));an&&(an.innerHTML=t.title,an.title=t.description||t.title)}var cn=document.getElementById(this._addUID("GPinfo_ID_"+Oe));if(!document.getElementById(this._addUID("GPinfo_ID_"+Oe))&&t.description){var dn=document.getElementById(this._addUID("GPadvancedTools_ID_"+Oe));dn&&dn.appendChild(this._createAdvancedToolInformationElement({id:Oe}))}cn&&cn.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var Be=this.getLayerInfo(e)||{},je=e.getOpacity(),Ve=e.getVisible(),Ze=this.isInRange(e,ke),Qe={layer:e,id:Oe,name:e.name,service:e.service,opacity:je??1,visibility:Ve??!0,inRange:Ze??!0,title:t.title!=null?t.title:Be._title||Oe,description:t.description||Be._description||null,legends:t.legends||Be._legends||[],metadata:t.metadata||Be._metadata||[],quicklookUrl:t.quicklookUrl||Be._quicklookUrl||null};this._layers[Oe]=Qe;var en=this._createLayerDiv(Qe);this._layers[Oe].div=en,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(Qe),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(en,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",hn=>this._updateLayerOpacity(hn)),this._listeners.updateLayerVisibility=e.on("change:visible",hn=>this._updateLayerVisibility(hn)),this._layers[Oe].onZIndexChangeEvent==null&&(this._layers[Oe].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[Oe]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$z.trace(e);var t=e.gpLayerId,ke=document.getElementById(this._addUID("GPinfo_ID_"+t));ke&&ke.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var Oe=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+t));Oe&&this._layerListContainer.removeChild(Oe);var Ge=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(Ge,1),this._lastZIndex--;for(var Be=this._layersOrder,je=0;je<Be.length;je++)Be[je].layer.setZIndex(this._lastZIndex-je);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[t]}),delete this._layers[t],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$z.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var t=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&t||!e&&!t||(t||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,t){if(e){var ke=e.gpLayerId;if(ke==null){logger$z.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var Oe=document.getElementById(this._addUID("GPremove_ID_"+ke));Oe&&(t===!1?Oe.style.display="none":t===!0&&(Oe.style.display="block"))}}getContainer(){return this.container}_initialize(e,t){this._uid=e.id||SelectorID.generate(),this.options=e,this.options.layers=t,this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=e.collapsed!==void 0?e.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var ke=0;ke<t.length;ke++){var Oe=t[ke].layer;if(Oe){var Ge;Oe.hasOwnProperty("gpLayerId")?Ge=Oe.gpLayerId:(Ge=this._layerId,Oe.gpLayerId=Ge,this._layerId++);var Be=t[ke].config||{},je=Oe.getOpacity(),Ve=Oe.getVisible(),Ze={layer:Oe,id:Ge,name:Oe.name,service:Oe.service,opacity:je??1,visibility:Ve??!0,title:Be.title!=null?Be.title:Be.id?Be.id:Ge,description:Be.description||null,legends:Be.legends||[],metadata:Be.metadata||[],quicklookUrl:Be.quicklookUrl||null};this._layers[Ge]=Ze}}}_initContainer(){var e=this._createMainContainerElement(),t=this._createMainLayersShowElement();e.appendChild(t),this.collapsed?this.collapsed=!0:(t.checked="checked",this.collapsed=!1);var ke=this,Oe=function(dn){this.collapsed=!dn.target.checked,this.dispatchEvent("change:collapsed")};t.addEventListener("click",function(dn){Oe.call(ke,dn)});var Ge=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(Ge),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var Be=this._layerSwitcherCounter=this._createMainCounterLayersElement();Ge.appendChild(Be)}var je=this._createMainLayersElement();if(e.appendChild(je),this.options.panel){var Ve=this._createLayersPanelHeaderElement();je.appendChild(Ve);var Ze=this._createLayersPanelIconElement();Ve.appendChild(Ze);var Qe=this._createLayersPanelTitleElement();Ve.appendChild(Qe);var en=this._createLayersPanelCloseElement();Ve.appendChild(en)}var tn=this._layerListContainer=this._createMainLayersDivElement();je.appendChild(tn),this._createDraggableElement(tn,this);var an=this._createMainInfoElement(),cn=this._createMainInfoDivElement();return an.appendChild(cn),e.appendChild(an),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(Ve=>{var Ze=null;Ve.hasOwnProperty("gpLayerId")?Ze=Ve.gpLayerId:(Ze=this._layerId,Ve.gpLayerId=Ze,this._layerId++);var Qe=this.getLayerInfo(Ve)||{};if(this._layers[Ze])this._layers[Ze].opacity=Ve.getOpacity(),this._layers[Ze].visibility=Ve.getVisible(),this._layers[Ze].inRange=this.isInRange(Ve,e);else{var en=Ve.getOpacity(),tn=Ve.getVisible(),an=this.isInRange(Ve,e),cn={layer:Ve,id:Ze,name:Ve.name,service:Ve.service,opacity:en??1,visibility:tn??!0,inRange:an??!0,title:Qe._title||Ze,description:Qe._description||null,legends:Qe._legends||[],metadata:Qe._metadata||[],quicklookUrl:Qe._quicklookUrl||null};this._layers[Ze]=cn}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=Ve.on("change:opacity",hn=>this._updateLayerOpacity(hn)),this._listeners._updateLayerVisibility=Ve.on("change:visible",hn=>this._updateLayerVisibility(hn)),Ve.getZIndex!==void 0){var dn=Ve.getZIndex()||0;(!this._layersIndex[dn]||!Array.isArray(this._layersIndex[dn]))&&(this._layersIndex[dn]=[]),this._layersIndex[dn].push(this._layers[Ze])}});for(var t in this._layersIndex)if(this._layersIndex.hasOwnProperty(t))for(var ke=this._layersIndex[t],Oe=0;Oe<ke.length;Oe++)this._layersOrder.unshift(ke[Oe]),this._lastZIndex++,ke[Oe].layer.setZIndex(this._lastZIndex),this._layers[ke[Oe].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[ke[Oe].layer.gpLayerId].onZIndexChangeEvent=ke[Oe].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var Ge=0;Ge<this._layersOrder.length;Ge++){var Be=this._layersOrder[Ge],je=this._createLayerDiv(Be);this._layerListContainer.querySelector("#"+je.id)||this._layerListContainer.appendChild(je),this._layers[Be.id].div=je}}_createLayerDiv(e){var t=e.legends&&e.legends.length!==0,ke=e.metadata&&e.metadata.length!==0,Oe=e.quicklookUrl;(t||ke||Oe)&&(e.displayInformationElement=!0);var Ge=this._createContainerLayerElement(e);return e.inRange||Ge.classList.add("outOfRange"),Ge}onShowLayerSwitcherClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this._showLayerSwitcherButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var t=e.target.id,ke=SelectorID.index(t),Oe=this._layers[ke].layer,Ge=e.target.value,Be=document.getElementById(this._addUID("GPopacityValue_ID_"+ke));Be.innerHTML=Ge+"%",Oe.setOpacity(Ge/100)}_updateLayerOpacity(e){var t=e.target.getOpacity();t>1&&(t=1),t<0&&(t=0);var ke=e.target.gpLayerId,Oe=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+ke));Oe&&(Oe.value=Math.round(t*100));var Ge=document.getElementById(this._addUID("GPopacityValue_ID_"+ke));Ge&&(Ge.innerHTML=Math.round(t*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:t,layer:this._layers[ke]})}_onVisibilityLayerClick(e){var t=e.target.id,ke=SelectorID.index(t),Oe=this._layers[ke].layer;Oe.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var t=e.target.getVisible(),ke=e.target.gpLayerId,Oe=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+ke));Oe&&(Oe.ariaPressed=t),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:t,layer:this._layers[ke]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var t,ke;e.getLayers().forEach(Ze=>{ke=Ze.gpLayerId,unByKey(this._layers[ke].onZIndexChangeEvent),this._layers[ke].onZIndexChangeEvent=null,t=null,Ze.getZIndex!==void 0&&(t=Ze.getZIndex(),(!this._layersIndex[t]||!Array.isArray(this._layersIndex[t]))&&(this._layersIndex[t]=[]),this._layersIndex[t].push(this._layers[ke]))}),this._lastZIndex=0,this._layersOrder=[];for(var Oe in this._layersIndex)if(this._layersIndex.hasOwnProperty(Oe))for(var Ge=this._layersIndex[Oe],Be=0;Be<Ge.length;Be++)this._layersOrder.unshift(Ge[Be]),this._lastZIndex++,this._layers[Ge[Be].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[Ge[Be].layer.gpLayerId].onZIndexChangeEvent=Ge[Be].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let Ze=0;Ze<this._layerListContainer.childNodes.length;Ze++){const Qe=this._layerListContainer.childNodes[Ze];Qe.id!==""&&Qe.remove()}for(var je=0;je<this._layersOrder.length;je++){var Ve=this._layersOrder[je];this._layerListContainer.appendChild(Ve.div)}}else logger$z.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var t=e.target.id,ke=SelectorID.index(t),Oe=this._layers[ke],Ge,Be,je=document.getElementById(e.target.id);if(je.classList.contains("GPlayerInfoOpened")){je.classList.remove("GPlayerInfoOpened"),je.classList.add("GPlayerInfoClosed"),Ge=document.getElementById(this._addUID("GPlayerInfoPanel")),Ge.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),Ge.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),Be=document.getElementById(this._addUID("GPlayerInfoContent")),Be&&Be.parentNode.remove();return}je.classList.contains("GPlayerInfoClosed")&&(je.classList.remove("GPlayerInfoClosed"),je.classList.add("GPlayerInfoOpened")),Ge=document.getElementById(this._addUID("GPlayerInfoPanel")),Ge.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),Ge.classList.add("GPlayerInfoPanelOpened","gpf-visible"),Be=document.getElementById(this._addUID("GPlayerInfoContent")),Be&&Be.parentNode.remove();var Ve={id:t,title:Oe.title,description:Oe.description,quicklookUrl:Oe.quicklookUrl,metadata:Oe.metadata,legends:Oe.legends},Ze=Oe.layer.getMaxResolution();Ze===1/0?Ve._maxScaleDenominator=56e7:Ve._maxScaleDenominator=Math.round(Ze/28e-5);var Qe=this._createContainerLayerInfoElement(Ve);Ge.firstChild.appendChild(Qe)}_onDropLayerClick(e){var t=e.target.id,ke=SelectorID.index(t),Oe=this._layers[ke].layer;this.getMap().getLayers().remove(Oe)}_onEndDragAndDropLayerClick(e){logger$z.trace(e);var t=this.getMap(),ke=document.querySelectorAll("div.GPlayerSwitcher_layer"),Oe=ke.length;this._layersOrder=[];for(var Ge=0;Ge<ke.length;Ge++){var Be=ke[Ge].id,je=SelectorID.index(Be),Ve=this._layers[je].layer;unByKey(this._layers[je].onZIndexChangeEvent),this._layers[je].onZIndexChangeEvent=null,Ve.setZIndex&&(Ve.setZIndex(Oe),this._layersOrder.push(this._layers[je]),Oe--),this._layers[je].onZIndexChangeEvent==null&&(this._layers[je].onZIndexChangeEvent=Ve.on("change:zIndex",()=>this._updateLayersOrder()))}t.updateSize(),this.dispatchEvent({type:"layerswitcher:change:position",position:e.newIndex,layer:this._layersOrder[e.newIndex],layers:this._layersOrder})}_onStartDragAndDropLayerClick(e){logger$z.debug(e)}_onZoomToExtentClick(e){logger$z.debug(e);var t=e.target.id,ke=SelectorID.index(t),Oe=this._layers[ke],Ge=null,Be=null,je=this.getMap();if(Oe.layer.hasOwnProperty("gpResultLayerId")&&(Oe.layer.gpResultLayerId.split(":")[0]==="layerimport"||Oe.layer.gpResultLayerId.split(":")[0]==="drawing"||Oe.layer.gpResultLayerId.split(":")[0]==="compute")){if(je.getView()&&je.getSize()){var Ve=Oe.layer.getExtent()||Oe.layer.getSource().getExtent();Ve&&Ve[0]!==1/0&&je.getView().fit(Ve,je.getSize())}}else try{if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var Ze=Oe.layer.name||Oe.layer.getSource().name,Qe=Oe.layer.service||Oe.layer.getSource().service,en=Config.configuration.getLayerId(Ze,Qe);if(!en)throw"ERROR : Layer ID not found into the catalogue !?";var tn=Config.configuration.getGlobalConstraints(en);if(tn){if(!je||!je.getView())return;var an=je.getView(),cn=an.getProjection(),dn=[tn.extent.left,tn.extent.bottom,tn.extent.right,tn.extent.top],hn=tn.crs;hn||(hn="EPSG:4326"),Ge=transformExtent(dn,hn,cn),Ge&&an.fit(Ge)}}catch(fn){Be=fn}this.dispatchEvent({type:"layerswitcher:extent",extent:Ge,layer:Oe,error:Be})}_onMapMoveEnd(e){e.getLayers().forEach(t=>{var ke=t.gpLayerId;if(this._layers[ke]){var Oe=this._layers[ke],Ge;this.isInRange(t,e)&&!Oe.inRange?(Oe.inRange=!0,Ge=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+ke)),Ge.classList.remove("outOfRange")):!this.isInRange(t,e)&&Oe.inRange&&(Oe.inRange=!1,Ge=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+ke)),Ge.classList.add("outOfRange"))}})}getLayerDOMId(e){var t=null;return this.getMap().getLayers().forEach(ke=>{ke===e&&(t=ke.hasOwnProperty("gpLayerId")?ke.gpLayerId:null)}),t!==null?this._addUID("GPlayerSwitcher_ID_"+t):null}isInRange(e,t){if(t){var ke=t.getView().getResolution();if(ke>e.getMaxResolution()||ke<e.getMinResolution())return!1;var Oe=t.getView().calculateExtent(t.getSize()),Ge=e.getExtent();return!(Ge&&!intersects$1(Oe,Ge))}}getLayerInfo(e){var t={};if(e.getProperties!==void 0&&e.getSource!==void 0){var ke=e.getProperties(),Oe=ke.source;Oe&&(t._title=Oe._title||ke.title||ke.id||"",t._description=Oe._description||ke.description||"",t._quicklookUrl=Oe._quicklookUrl||ke.quicklookUrl||"",t._metadata=Oe._metadata||ke.metadata||[],t._legends=Oe._legends||ke.legends||[])}return t}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);Object.assign(LayerSwitcher.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);LoggerByDefault.getLogger("draggable");var Draggable={dragElement:function(r,e,t){let ke=0,Oe=0,Ge=0,Be=0,je=0,Ve=0;e?e.addEventListener("mousedown",en,!0):r.addEventListener("mousedown",en,!0);var Ze,Qe={bottom:0,left:0,right:0,top:0};function en(cn){cn=cn||window.event,cn.preventDefault(),ke=cn.clientX,Oe=cn.clientY,Ze=r.getBoundingClientRect();const dn=t.getBoundingClientRect();Qe={bottom:dn.bottom,left:dn.left,right:dn.right,top:dn.top},document.addEventListener("mouseup",tn,!0),document.addEventListener("mousemove",an,!0)}function tn(){je-=Ge,Ve-=Be,document.removeEventListener("mouseup",tn,!0),document.removeEventListener("mousemove",an,!0)}function an(cn){cn=cn||window.event;let dn=cn.clientX,hn=cn.clientY,fn=Ge,pn=Be;Ge=ke-dn,Be=Oe-hn;var mn=Ze.left-Ge,yn=Ze.top-Be;if(mn<Qe.left||yn<Qe.top||mn+Ze.width>Qe.right||yn+Ze.height>Qe.bottom)Ge=fn,Be=pn;else{let Cn=je-Ge,wn=Ve-Be;r.style.transform="translate("+Cn+"px,"+wn+"px)"}}}};class AsyncData{constructor(e){this.data=e,this.subscribers=[]}subscribe(e){if(typeof e!="function")throw new Error("Callback must be a function");this.subscribers.push(e)}async set(e,t){this.data[e]=t;const ke=this.subscribers.map(async Oe=>{await Oe(e,t)});await Promise.allSettled(ke)}get(e){return this.data[e]}}var GetFeatureInfoDOM={_addUID:function(r){var e=this.uid?r+"-"+this.uid:r;return e},stringToHTML:function(r){var e=function(){if(!window.DOMParser)return!1;var Ge=new DOMParser;try{Ge.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var t=new DOMParser,ke=t.parseFromString(r,"text/html");return ke.body}var Oe=document.createElement("div");return Oe.innerHTML=r,Oe},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPgetFeatureInfo"),r.className="GPgetFeatureInfo gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowGetFeatureInfoPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPgetFeatureInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPgetFeatureInfoPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-getfeatureinfo fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Activer/désactiver l'interrogation des couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowGetFeatureInfoClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowGetFeatureInfoClick(ke)}),e},_createGetFeatureInfoPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPgetFeatureInfoPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createGetFeatureInfoPanelDivElement:function(){var r=document.createElement("div");return r.className="GPpanelBody gpf-panel__body fr-modal__body",r},_createGetFeatureInfoPanelHeaderElement:function(){var r=document.createElement("div");return r.className="GPpanelHeader gpf-panel__header fr-modal__header",r},_createGetFeatureInfoPanelTitleElement:function(){var r=document.createElement("div");return r.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",r.innerHTML="GetFeatureInfo",r},_createGetFeatureInfoPanelCloseElement:function(){var r=this,e=document.createElement("button");e.className="GPpanelClose GPcloseGetFeatureInfo gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(ke){e.setAttribute("aria-pressed",!1),r.onCloseGetFeatureInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(ke){e.setAttribute("aria-pressed",!1),r.onCloseGetFeatureInfoClick()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createGetFeatureInfoWaitingDiv:function(){var r=`
        <div class="waiting-div-container"><div class="lds-ring"><div></div><div></div><div></div><div></div></div><div>
        `;return r},_createGetFeatureInfoNoData:function(){var r=document.createElement("div");return r.className="GPgetFeatureInfoNoData fr-py-2w fr-px-2w",r.innerText="Aucune donnée à afficher",r},_createGetFeatureInfoAccordionGroup:function(){var r=document.createElement("div");return r.id=this._addUID("GPgetFeatureInfoAccordionGroup"),r.className="GPgetFeatureInfoAccordionGroup fr-accordions-group",r},_createGetFeatureInfoLayerAccordion:function(r){var e=this.stringToHTML(`
            <section class="fr-accordion">
                <h3 class="fr-accordion__title">
                    <button class="GPgfiLayerButton fr-accordion__btn" aria-expanded="false" aria-controls="accordion-${r}">
                        <span class="GPshowGfiLayerFeature"></span>
                        <span id="gfiLayerName">${r}</span>
                    </button>
                </h3>
                <div class="fr-collapse GPgetFeatureInfoAccordionContent GPelementHidden" id="accordion-${r}" style="margin:unset;">
                    ${this._createGetFeatureInfoWaitingDiv()}
                </div>
            </section>
        `),t=e.firstChild,ke=t.querySelector("button, button.fr-accordion__btn");return ke.addEventListener("click",Oe=>{Oe.currentTarget.ariaExpanded=Oe.currentTarget.ariaExpanded!=="true";var Ge=document.getElementById(Oe.currentTarget.getAttribute("aria-controls"));Oe.currentTarget.ariaExpanded==="true"?(Ge.classList.add("fr-collapse--expanded"),Ge.classList.remove("GPelementHidden")):(Ge.classList.remove("fr-collapse--expanded"),Ge.classList.add("GPelementHidden"))}),t}},logger$y=LoggerByDefault.getLogger("getFeatureInfo"),GetFeatureInfo=class Vf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Vf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="GetFeatureInfo",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(this.draggable&&Draggable.dragElement(this.panelGetFeatureInfoContainer,this.panelGetFeatureInfoHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonGetFeatureInfoShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):this.auto&&this.removeEventsListeners(),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonGetFeatureInfoShow=null,this.panelGetFeatureInfoContainer=null,this.getFeatureInfoPanelDiv=null,this.panelGetFeatureInfoHeaderContainer=null,this.buttonGetFeatureInfoClose=null,this.getFeatureInfoAccordionGroup=null,this.noDataMessage=null,this.panelGetFeatureInfoEntriesContainer=null,this.eventsListeners=[],this.pixel=[],this.coordinates=[],this.layers=[],this.res=null}initContainer(){var e=this._createMainContainerElement(),t=this.buttonGetFeatureInfoShow=this._createShowGetFeatureInfoPictoElement();e.appendChild(t);var ke=this.panelGetFeatureInfoContainer=this._createGetFeatureInfoPanelElement(),Oe=this.getFeatureInfoPanelDiv=this._createGetFeatureInfoPanelDivElement();ke.appendChild(Oe);var Ge=this.panelGetFeatureInfoHeaderContainer=this._createGetFeatureInfoPanelHeaderElement(),Be=this._createGetFeatureInfoPanelTitleElement();Ge.appendChild(Be);var je=this.buttonGetFeatureInfoClose=this._createGetFeatureInfoPanelCloseElement();Ge.appendChild(je),Oe.appendChild(Ge);var Ve=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();return Oe.appendChild(Ve),this.noDataMessage=this._createGetFeatureInfoNoData(),e.appendChild(ke),logger$y.log(e),e}addEventsListeners(e){var t=this;this.eventsListeners.singleclick=function(ke){logger$y.trace(ke),t.onMapClick(ke)},e.on("singleclick",this.eventsListeners.singleclick)}removeEventsListeners(){var e=this.getMap();e.getLayers().un("singleclick",this.eventsListeners.singleclick),delete this.eventsListeners.singleclick}getFeatureInfoIsActive(){return this.buttonGetFeatureInfoShow.getAttribute("aria-pressed")}onMapClick(e){if(this.getFeatureInfoIsActive()==="true")if(this.getFeatureInfoAccordionGroup.remove(),this.noDataMessage.remove(),this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!0),this.layers=e.map.getLayers().getArray().filter(ke=>{if(ke.isVisible(e.map.getView())&&ke.getOpacity()>0)return ke}).sort((ke,Oe)=>Oe.getZIndex()-ke.getZIndex()),this.layers.length>0){var t=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();this.getFeatureInfoPanelDiv.appendChild(t),this.map=e.map,this.pixel=e.pixel,this.coordinates=e.coordinate,this.res=e.map.getView().getResolution(),this.displayGetFeatureInfo()}else this.getFeatureInfoPanelDiv.append(this.noDataMessage)}getGetFeatureInfoLayer(e){var t={};let ke=this.getLayerFormat(e);if(t={format:ke,layer:e},ke==="wmts"){let Oe=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFOFORMAT:"text/html",STYLES:""});t={...t,url:Oe}}if(ke==="wms"){let Oe=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFO_FORMAT:"text/html",STYLES:""});t={...t,url:Oe}}return t}getFeaturesAtClick(e){var t=[];return this.getMap().forEachFeatureAtPixel(this.pixel,function(ke,Oe){e==Oe&&t.push(ke)}),t}async getGetFeatureInfoContent(e){var t=null;if(e.format==="vector"){var ke=this.getFeaturesAtClick(e.layer);return ke&&(t=this.features2html(ke)),t}else return fetch(e.url).then(Oe=>Oe.text()).then(Oe=>{var Ge=!1;if((Oe.trim().length===0||Oe.indexOf("ServiceExceptionReport")!==-1||Oe.indexOf("java.lang.NullPointerException")!==-1||Oe.indexOf("java.lang.OutOfMemoryError")!==-1||Oe.indexOf("not queryable")!==-1||Oe.indexOf("No data")!==-1||Oe.indexOf("non interrogeable")!==-1)&&(Ge=!0),Ge)return null;var Be=this.stringToHTML(Oe);return Be&&Be.innerHTML&&Be.innerHTML.trim().length>0?Oe:null}).catch(Oe=>(logger$y.log(Oe),Oe))}getLayerTitle(e){if(e.layer.getProperties!==void 0&&e.layer.getSource!==void 0){var t=e.layer.getProperties(),ke=t.source,Oe="";ke&&(Oe=ke._title||ke.name||t.title||t.name||ke.url_||"Couche de données")}return Oe}displayGetFeatureInfo(){var e=this.layers.map(ke=>this.getGetFeatureInfoLayer(ke)),t=e.map(ke=>{var Oe=this.getLayerTitle(ke),Ge=null,Be=this._createGetFeatureInfoLayerAccordion(Oe),je=!0;return new AsyncData({...ke,layername:Oe,content:Ge,contentDiv:Be,pending:je})});for(let ke=0;ke<t.length;ke++)this.getFeatureInfoAccordionGroup.append(t[ke].data.contentDiv);t.forEach(ke=>{ke.subscribe((Oe,Ge)=>{Oe=="content"&&(ke.set("pending",!1),ke.get("content")?ke.get("contentDiv").querySelector("div.fr-collapse").innerHTML=ke.get("content"):ke.get("contentDiv").remove(),t.filter(Be=>Be.get("pending")===!0).length==0&&t.filter(Be=>Be.get("content")).length==0&&this.getFeatureInfoPanelDiv.append(this.noDataMessage))})}),t.forEach(ke=>{this.getGetFeatureInfoContent(ke.data).then(Oe=>{ke.set("content",Oe)})})}getLayerFormat(e){var t=typeof e.getType=="function"?e.getType():null,ke=e.getSource();if(t){if(t==="VECTOR"||t==="VECTOR_TILE")return"vector";if(t==="TILE")return ke.tileGrid?"wmts":"wms";if(t==="IMAGE")return"wms"}else{if(ke instanceof TileWMS||ke instanceof ImageWMS)return"wms";if(ke instanceof WMTS$1)return"wmts";if(ke instanceof VectorSource||ke instanceof VectorTile)return"vector"}return"unknown"}features2html(e){var t=document.createElement("div");return e.forEach(function(ke){var Oe=ke.getProperties();if(Oe.hasOwnProperty("render"))t.insertAdjacentHTML("beforeend",Oe.render);else{if(Oe.hasOwnProperty("name")){var Ge=document.createElement("div");Ge.className="gp-att-name-div",Ge.insertAdjacentHTML("afterbegin",Oe.name),t.appendChild(Ge)}if(Oe.hasOwnProperty("description")){var Be=document.createElement("div");Be.className="gp-att-description-div",Be.insertAdjacentHTML("afterbegin",Oe.description),t.appendChild(Be)}var je=null,Ve=!1,Ze=null,Qe=null,en=null,tn=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(je in Oe)if(Oe[je]!==void 0&&tn.indexOf(je)===-1){Ve||(Ze=document.createElement("div"),Ze.className="gp-att-others-div",Qe=document.createElement("ul"),Ve=!0),en=document.createElement("li");var an=document.createElement("span");an.className="gp-attname-others-span",an.appendChild(document.createTextNode(je+" : ")),en.appendChild(an),en.appendChild(document.createTextNode(Oe[je])),Qe.appendChild(en)}Qe&&(Ze.appendChild(Qe),t.appendChild(Ze))}}),t.hasChildNodes()?t=t.innerHTML:t="",t}onShowGetFeatureInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),e.target.ariaPressed==="false"&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1),logger$y.trace(e)}onCloseGetFeatureInfoClick(e){logger$y.trace(e)}onGetFeatureInfoComputationSubmit(e){logger$y.trace(e)}};Object.assign(GetFeatureInfo.prototype,GetFeatureInfoDOM);Object.assign(GetFeatureInfo.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=GetFeatureInfo);var MathUtils={modulo:function(r,e){var t=r%e;return t*e<0?t+e:t},decimalToDMS:function(r,e,t){var ke=this.modulo(r+180,360)-180,Oe=Math.abs(3600*ke),Ge=t||0,Be=Math.pow(10,Ge),je=Math.floor(Oe/3600),Ve=Math.floor((Oe-je*3600)/60),Ze=Oe-je*3600-Ve*60;Ze=Math.ceil(Ze*Be)/Be,Ze>=60&&(Ze=0,Ve+=1),Ve>=60&&(Ve=0,je+=1);var Qe=e.charAt(ke<0?1:0);return{d:je,m:Ve,s:Ze,direction:Qe}},dmsToDecimal(r,e,t,ke){var Oe=r+e/60+t/3600;return(ke=="S"||ke=="O")&&(Oe=Oe*-1),Oe},coordinateToDecimal(r){var e={};return e.lat=r[1].toFixed(6),e.lng=r[0].toFixed(6),e.unit="°",e},coordinateToDMS(r){return{lng:MathUtils.decimalToDMS(r[0],"EO",2),lat:MathUtils.decimalToDMS(r[1],"NS",2),unit:"DMS"}},coordinateToRad(r){var e={},t=.017453292519943295;return e.lng=r[0]*t,e.lng=e.lng.toFixed(8),e.lat=r[1]*t,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(r){var e={},t=1.1111111111111112;return e.lng=r[0]*t,e.lng=e.lng.toFixed(8),e.lat=r[1]*t,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(r){var e={};return e.x=r[0].toFixed(2),e.y=r[1].toFixed(2),e.unit="m",e},coordinateToKMeter(r){var e={};return e.x=(r[0]/1e3).toFixed(2),e.y=(r[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(r,e){var t=e||10,ke=parseInt(r,t);return!isNaN(ke)&&isFinite(ke)?ke:null},isInteger:function(r){if(isNaN(r))return!1;var e=parseFloat(r);return(e|0)===e},toFloat:function(r){var e=parseFloat(r);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetière","aérodrome","réservoir","administratif","construction linéaire","construction ponctuelle","construction surfacique","cours d'eau","détail hydrographique","détail orographique","équipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par câble","zone d'activité ou d'intérêt","zone d'habitation","lieu-dit non habité"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code département (INSEE)",description:"Code INSEE du département (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractères (chiffre et/ou lettre)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numéro de la feuille cadastrale"}]},zoomToResultsByDefault:function(r){var e=15,t=r.service,ke=r.fields,Oe=r.type,Ge={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return t==="SuggestedLocation"&&Oe==="PositionOfInterest"&&(e=Ge[ke.classification]),t==="GeocodedLocation"&&Oe==="PositionOfInterest"&&(e=Ge[ke.importance]||14),Oe==="StreetAddress"&&(e=17),Oe==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(r){var e=r.placeAttributes;if(e.label)return e.label;if(r.type==="PositionOfInterest"){var t=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?t=t+", "+e.category[1]:e.postcode&&(t=t+", "+e.postcode[0],e.city&&(t=t+" "+e.city[0])),t}else return r.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:r.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(r){if(r.fullText)return r.fullText;var e=[];return e.push(r.street||""),e.push(r.postalCode||""),e.push(r.commune||""),r.type==="PositionOfInterest"&&(e.push(r.poi||""),e.push(r.kind||"")),e.join(" - ")}};function globals(r){r("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),r("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),r("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=0;e<=60;++e)r("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),r("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");r.WGS84=r["EPSG:4326"],r["EPSG:3785"]=r["EPSG:3857"],r.GOOGLE=r["EPSG:3857"],r["EPSG:900913"]=r["EPSG:3857"],r["EPSG:102113"]=r["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(r,e){if(r[e])return r[e];for(var t=Object.keys(r),ke=e.toLowerCase().replace(ignoredChar,""),Oe=-1,Ge,Be;++Oe<t.length;)if(Ge=t[Oe],Be=Ge.toLowerCase().replace(ignoredChar,""),Be===ke)return r[Ge]}function projStr(r){var e={},t=r.split("+").map(function(je){return je.trim()}).filter(function(je){return je}).reduce(function(je,Ve){var Ze=Ve.split("=");return Ze.push(!0),je[Ze[0].toLowerCase()]=Ze[1],je},{}),ke,Oe,Ge,Be={proj:"projName",datum:"datumCode",rf:function(je){e.rf=parseFloat(je)},lat_0:function(je){e.lat0=je*D2R$1},lat_1:function(je){e.lat1=je*D2R$1},lat_2:function(je){e.lat2=je*D2R$1},lat_ts:function(je){e.lat_ts=je*D2R$1},lon_0:function(je){e.long0=je*D2R$1},lon_1:function(je){e.long1=je*D2R$1},lon_2:function(je){e.long2=je*D2R$1},alpha:function(je){e.alpha=parseFloat(je)*D2R$1},gamma:function(je){e.rectified_grid_angle=parseFloat(je)},lonc:function(je){e.longc=je*D2R$1},x_0:function(je){e.x0=parseFloat(je)},y_0:function(je){e.y0=parseFloat(je)},k_0:function(je){e.k0=parseFloat(je)},k:function(je){e.k0=parseFloat(je)},a:function(je){e.a=parseFloat(je)},b:function(je){e.b=parseFloat(je)},r:function(je){e.a=e.b=parseFloat(je)},r_a:function(){e.R_A=!0},zone:function(je){e.zone=parseInt(je,10)},south:function(){e.utmSouth=!0},towgs84:function(je){e.datum_params=je.split(",").map(function(Ve){return parseFloat(Ve)})},to_meter:function(je){e.to_meter=parseFloat(je)},units:function(je){e.units=je;var Ve=match(units,je);Ve&&(e.to_meter=Ve.to_meter)},from_greenwich:function(je){e.from_greenwich=je*D2R$1},pm:function(je){var Ve=match(exports$2,je);e.from_greenwich=(Ve||parseFloat(je))*D2R$1},nadgrids:function(je){je==="@null"?e.datumCode="none":e.nadgrids=je},axis:function(je){var Ve="ewnsud";je.length===3&&Ve.indexOf(je.substr(0,1))!==-1&&Ve.indexOf(je.substr(1,1))!==-1&&Ve.indexOf(je.substr(2,1))!==-1&&(e.axis=je)},approx:function(){e.approx=!0}};for(ke in t)Oe=t[ke],ke in Be?(Ge=Be[ke],typeof Ge=="function"?Ge(Oe):e[Ge]=Oe):e[ke]=Oe;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(r){if(typeof r!="string")throw new Error("not a string");this.text=r.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var r=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(r);){if(this.place>=this.text.length)return;r=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(r);case KEYWORD:return this.keyword(r);case QUOTED:return this.quoted(r);case AFTERQUOTE:return this.afterquote(r);case NUMBER:return this.number(r);case ENDED:return}};Parser.prototype.afterquote=function(r){if(r==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(r)){this.word=this.word.trim(),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(r){if(r===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(r==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(r){if(digets.test(r)){this.word+=r;return}if(endThings.test(r)){this.word=parseFloat(this.word),this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(r){if(r==='"'){this.state=AFTERQUOTE;return}this.word+=r};Parser.prototype.keyword=function(r){if(keyword.test(r)){this.word+=r;return}if(r==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(r){if(latin.test(r)){this.word=r,this.state=KEYWORD;return}if(r==='"'){this.word="",this.state=QUOTED;return}if(digets.test(r)){this.word=r,this.state=NUMBER;return}if(endThings.test(r)){this.afterItem(r);return}throw new Error(`havn't handled "`+r+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(r){var e=new Parser(r);return e.output()}function mapit(r,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var ke=e?{}:r,Oe=t.reduce(function(Ge,Be){return sExpr(Be,Ge),Ge},ke);e&&(r[e]=Oe)}function sExpr(r,e){if(!Array.isArray(r)){e[r]=!0;return}var t=r.shift();if(t==="PARAMETER"&&(t=r.shift()),r.length===1){if(Array.isArray(r[0])){e[t]={},sExpr(r[0],e[t]);return}e[t]=r[0];return}if(!r.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=r;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(r);return}Array.isArray(t)||(e[t]={});var ke;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:r[0].toLowerCase(),convert:r[1]},r.length===3&&sExpr(r[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:r[0],a:r[1],rf:r[2]},r.length===4&&sExpr(r[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":r[0]=["name",r[0]],mapit(e,t,r);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":r[0]=["name",r[0]],mapit(e,t,r),e[t].type=t;return;default:for(ke=-1;++ke<r.length;)if(!Array.isArray(r[ke]))return sExpr(r,e[t]);return mapit(e,t,r)}}var D2R=.017453292519943295,knownTypes=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rename(r,e){var t=e[0],ke=e[1];!(t in r)&&ke in r&&(r[t]=r[ke],e.length===3&&(r[t]=e[2](r[t])))}function d2r(r){return r*D2R}function cleanWKT(r){for(var e=Object.keys(r),t=0,ke=e.length;t<ke;++t){var Oe=e[t];knownTypes.indexOf(Oe)!==-1&&setPropertiesFromWkt(r[Oe]),typeof r[Oe]=="object"&&cleanWKT(r[Oe])}}function setPropertiesFromWkt(r){if(r.AUTHORITY){var e=Object.keys(r.AUTHORITY)[0];e&&e in r.AUTHORITY&&(r.title=e+":"+r.AUTHORITY[e])}if(r.type==="GEOGCS"?r.projName="longlat":r.type==="LOCAL_CS"?(r.projName="identity",r.local=!0):typeof r.PROJECTION=="object"?r.projName=Object.keys(r.PROJECTION)[0]:r.projName=r.PROJECTION,r.AXIS){for(var t="",ke=0,Oe=r.AXIS.length;ke<Oe;++ke){var Ge=[r.AXIS[ke][0].toLowerCase(),r.AXIS[ke][1].toLowerCase()];Ge[0].indexOf("north")!==-1||(Ge[0]==="y"||Ge[0]==="lat")&&Ge[1]==="north"?t+="n":Ge[0].indexOf("south")!==-1||(Ge[0]==="y"||Ge[0]==="lat")&&Ge[1]==="south"?t+="s":Ge[0].indexOf("east")!==-1||(Ge[0]==="x"||Ge[0]==="lon")&&Ge[1]==="east"?t+="e":(Ge[0].indexOf("west")!==-1||(Ge[0]==="x"||Ge[0]==="lon")&&Ge[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(r.axis=t)}r.UNIT&&(r.units=r.UNIT.name.toLowerCase(),r.units==="metre"&&(r.units="meter"),r.UNIT.convert&&(r.type==="GEOGCS"?r.DATUM&&r.DATUM.SPHEROID&&(r.to_meter=r.UNIT.convert*r.DATUM.SPHEROID.a):r.to_meter=r.UNIT.convert));var Be=r.GEOGCS;r.type==="GEOGCS"&&(Be=r),Be&&(Be.DATUM?r.datumCode=Be.DATUM.name.toLowerCase():r.datumCode=Be.name.toLowerCase(),r.datumCode.slice(0,2)==="d_"&&(r.datumCode=r.datumCode.slice(2)),r.datumCode==="new_zealand_1949"&&(r.datumCode="nzgd49"),(r.datumCode==="wgs_1984"||r.datumCode==="world_geodetic_system_1984")&&(r.PROJECTION==="Mercator_Auxiliary_Sphere"&&(r.sphere=!0),r.datumCode="wgs84"),r.datumCode==="belge_1972"&&(r.datumCode="rnb72"),Be.DATUM&&Be.DATUM.SPHEROID&&(r.ellps=Be.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),r.ellps.toLowerCase().slice(0,13)==="international"&&(r.ellps="intl"),r.a=Be.DATUM.SPHEROID.a,r.rf=parseFloat(Be.DATUM.SPHEROID.rf,10)),Be.DATUM&&Be.DATUM.TOWGS84&&(r.datum_params=Be.DATUM.TOWGS84),~r.datumCode.indexOf("osgb_1936")&&(r.datumCode="osgb36"),~r.datumCode.indexOf("osni_1952")&&(r.datumCode="osni52"),(~r.datumCode.indexOf("tm65")||~r.datumCode.indexOf("geodetic_datum_of_1965"))&&(r.datumCode="ire65"),r.datumCode==="ch1903+"&&(r.datumCode="ch1903"),~r.datumCode.indexOf("israel")&&(r.datumCode="isr93")),r.b&&!isFinite(r.b)&&(r.b=r.a);function je(Qe){var en=r.to_meter||1;return Qe*en}var Ve=function(Qe){return rename(r,Qe)},Ze=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",je],["y0","false_northing",je],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];Ze.forEach(Ve),!r.long0&&r.longc&&(r.projName==="Albers_Conic_Equal_Area"||r.projName==="Lambert_Azimuthal_Equal_Area")&&(r.long0=r.longc),!r.lat_ts&&r.lat1&&(r.projName==="Stereographic_South_Pole"||r.projName==="Polar Stereographic (variant B)")?(r.lat0=d2r(r.lat1>0?90:-90),r.lat_ts=r.lat1):!r.lat_ts&&r.lat0&&r.projName==="Polar_Stereographic"&&(r.lat_ts=r.lat0,r.lat0=d2r(r.lat0>0?90:-90))}function wkt(r){var e=parseString(r),t=e[0],ke={};return sExpr(e,ke),cleanWKT(ke),ke[t]}function defs(r){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?defs[r]=projStr(arguments[1]):defs[r]=wkt(arguments[1]):defs[r]=t}else if(arguments.length===1){if(Array.isArray(r))return r.map(function(ke){Array.isArray(ke)?defs.apply(e,ke):defs(ke)});if(typeof r=="string"){if(r in defs)return defs[r]}else"EPSG"in r?defs["EPSG:"+r.EPSG]=r:"ESRI"in r?defs["ESRI:"+r.ESRI]=r:"IAU2000"in r?defs["IAU2000:"+r.IAU2000]=r:console.log(r);return}}globals(defs);function testObj(r){return typeof r=="string"}function testDef(r){return r in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(r){return codeWords.some(function(e){return r.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(r){var e=match(r,"authority");if(e){var t=match(e,"epsg");return t&&codes.indexOf(t)>-1}}function checkProjStr(r){var e=match(r,"extension");if(e)return match(e,"proj4")}function testProj(r){return r[0]==="+"}function parse(r){if(testObj(r)){if(testDef(r))return defs[r];if(testWKT(r)){var e=wkt(r);if(checkMercator(e))return defs["EPSG:3857"];var t=checkProjStr(e);return t?projStr(t):e}if(testProj(r))return projStr(r)}else return r}function extend(r,e){r=r||{};var t,ke;if(!e)return r;for(ke in e)t=e[ke],t!==void 0&&(r[ke]=t);return r}function msfnz(r,e,t){var ke=r*e;return t/Math.sqrt(1-ke*ke)}function sign(r){return r<0?-1:1}function adjust_lon(r){return Math.abs(r)<=SPI?r:r-sign(r)*TWO_PI}function tsfnz(r,e,t){var ke=r*t,Oe=.5*r;return ke=Math.pow((1-ke)/(1+ke),Oe),Math.tan(.5*(HALF_PI-e))/ke}function phi2z(r,e){for(var t=.5*r,ke,Oe,Ge=HALF_PI-2*Math.atan(e),Be=0;Be<=15;Be++)if(ke=r*Math.sin(Ge),Oe=HALF_PI-2*Math.atan(e*Math.pow((1-ke)/(1+ke),t))-Ge,Ge+=Oe,Math.abs(Oe)<=1e-10)return Ge;return-9999}function init$x(){var r=this.b/this.a;this.es=1-r*r,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(r){var e=r.x,t=r.y;if(t*R2D>90&&t*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var ke,Oe;if(Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)return null;if(this.sphere)ke=this.x0+this.a*this.k0*adjust_lon(e-this.long0),Oe=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*t));else{var Ge=Math.sin(t),Be=tsfnz(this.e,t,Ge);ke=this.x0+this.a*this.k0*adjust_lon(e-this.long0),Oe=this.y0-this.a*this.k0*Math.log(Be)}return r.x=ke,r.y=Oe,r}function inverse$v(r){var e=r.x-this.x0,t=r.y-this.y0,ke,Oe;if(this.sphere)Oe=HALF_PI-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var Ge=Math.exp(-t/(this.a*this.k0));if(Oe=phi2z(this.e,Ge),Oe===-9999)return null}return ke=adjust_lon(this.long0+e/(this.a*this.k0)),r.x=ke,r.y=Oe,r}var names$y=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$x,forward:forward$v,inverse:inverse$v,names:names$y};function init$w(){}function identity(r){return r}var names$x=["longlat","identity"];const longlat={init:init$w,forward:identity,inverse:identity,names:names$x};var projs=[merc,longlat],names$w={},projStore=[];function add(r,e){var t=projStore.length;return r.names?(projStore[t]=r,r.names.forEach(function(ke){names$w[ke.toLowerCase()]=t}),this):(console.log(e),!0)}function get(r){if(!r)return!1;var e=r.toLowerCase();if(typeof names$w[e]<"u"&&projStore[names$w[e]])return projStore[names$w[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(r,e,t,ke){var Oe=r*r,Ge=e*e,Be=(Oe-Ge)/Oe,je=0;ke?(r*=1-Be*(SIXTH+Be*(RA4+Be*RA6)),Oe=r*r,Be=0):je=Math.sqrt(Be);var Ve=(Oe-Ge)/Ge;return{es:Be,e:je,ep2:Ve}}function sphere(r,e,t,ke,Oe){if(!r){var Ge=match(exports$1,ke);Ge||(Ge=WGS84),r=Ge.a,e=Ge.b,t=Ge.rf}return t&&!e&&(e=(1-1/t)*r),(t===0||Math.abs(r-e)<EPSLN)&&(Oe=!0,e=r),{a:r,b:e,rf:t,sphere:Oe}}var datums={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},militargeographische_institut:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var key in datums){var datum$1=datums[key];datums[datum$1.datumName]=datum$1}function datum(r,e,t,ke,Oe,Ge,Be){var je={};return r===void 0||r==="none"?je.datum_type=PJD_NODATUM:je.datum_type=PJD_WGS84,e&&(je.datum_params=e.map(parseFloat),(je.datum_params[0]!==0||je.datum_params[1]!==0||je.datum_params[2]!==0)&&(je.datum_type=PJD_3PARAM),je.datum_params.length>3&&(je.datum_params[3]!==0||je.datum_params[4]!==0||je.datum_params[5]!==0||je.datum_params[6]!==0)&&(je.datum_type=PJD_7PARAM,je.datum_params[3]*=SEC_TO_RAD,je.datum_params[4]*=SEC_TO_RAD,je.datum_params[5]*=SEC_TO_RAD,je.datum_params[6]=je.datum_params[6]/1e6+1)),Be&&(je.datum_type=PJD_GRIDSHIFT,je.grids=Be),je.a=t,je.b=ke,je.es=Oe,je.ep2=Ge,je}var loadedNadgrids={};function nadgrid(r,e){var t=new DataView(e),ke=detectLittleEndian(t),Oe=readHeader(t,ke),Ge=readSubgrids(t,Oe,ke),Be={header:Oe,subgrids:Ge};return loadedNadgrids[r]=Be,Be}function getNadgrids(r){if(r===void 0)return null;var e=r.split(",");return e.map(parseNadgridString)}function parseNadgridString(r){if(r.length===0)return null;var e=r[0]==="@";return e&&(r=r.slice(1)),r==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:r,mandatory:!e,grid:loadedNadgrids[r]||null,isNull:!1}}function secondsToRadians(r){return r/3600*Math.PI/180}function detectLittleEndian(r){var e=r.getInt32(8,!1);return e===11?!1:(e=r.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(r,e){return{nFields:r.getInt32(8,e),nSubgridFields:r.getInt32(24,e),nSubgrids:r.getInt32(40,e),shiftType:decodeString(r,56,64).trim(),fromSemiMajorAxis:r.getFloat64(120,e),fromSemiMinorAxis:r.getFloat64(136,e),toSemiMajorAxis:r.getFloat64(152,e),toSemiMinorAxis:r.getFloat64(168,e)}}function decodeString(r,e,t){return String.fromCharCode.apply(null,new Uint8Array(r.buffer.slice(e,t)))}function readSubgrids(r,e,t){for(var ke=176,Oe=[],Ge=0;Ge<e.nSubgrids;Ge++){var Be=readGridHeader(r,ke,t),je=readGridNodes(r,ke,Be,t),Ve=Math.round(1+(Be.upperLongitude-Be.lowerLongitude)/Be.longitudeInterval),Ze=Math.round(1+(Be.upperLatitude-Be.lowerLatitude)/Be.latitudeInterval);Oe.push({ll:[secondsToRadians(Be.lowerLongitude),secondsToRadians(Be.lowerLatitude)],del:[secondsToRadians(Be.longitudeInterval),secondsToRadians(Be.latitudeInterval)],lim:[Ve,Ze],count:Be.gridNodeCount,cvs:mapNodes(je)}),ke+=176+Be.gridNodeCount*16}return Oe}function mapNodes(r){return r.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(r,e,t){return{name:decodeString(r,e+8,e+16).trim(),parent:decodeString(r,e+24,e+24+8).trim(),lowerLatitude:r.getFloat64(e+72,t),upperLatitude:r.getFloat64(e+88,t),lowerLongitude:r.getFloat64(e+104,t),upperLongitude:r.getFloat64(e+120,t),latitudeInterval:r.getFloat64(e+136,t),longitudeInterval:r.getFloat64(e+152,t),gridNodeCount:r.getInt32(e+168,t)}}function readGridNodes(r,e,t,ke){for(var Oe=e+176,Ge=16,Be=[],je=0;je<t.gridNodeCount;je++){var Ve={latitudeShift:r.getFloat32(Oe+je*Ge,ke),longitudeShift:r.getFloat32(Oe+je*Ge+4,ke),latitudeAccuracy:r.getFloat32(Oe+je*Ge+8,ke),longitudeAccuracy:r.getFloat32(Oe+je*Ge+12,ke)};Be.push(Ve)}return Be}function Projection(r,e){if(!(this instanceof Projection))return new Projection(r);e=e||function(Ze){if(Ze)throw Ze};var t=parse(r);if(typeof t!="object"){e("Could not parse to valid json: "+r);return}var ke=Projection.projections.get(t.projName);if(!ke){e("Could not get projection name from: "+r);return}if(t.datumCode&&t.datumCode!=="none"){var Oe=match(datums,t.datumCode);Oe&&(t.datum_params=t.datum_params||(Oe.towgs84?Oe.towgs84.split(","):null),t.ellps=Oe.ellipse,t.datumName=Oe.datumName?Oe.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var Ge=sphere(t.a,t.b,t.rf,t.ellps,t.sphere),Be=eccentricity(Ge.a,Ge.b,Ge.rf,t.R_A),je=getNadgrids(t.nadgrids),Ve=t.datum||datum(t.datumCode,t.datum_params,Ge.a,Ge.b,Be.es,Be.ep2,je);extend(this,t),extend(this,ke),this.a=Ge.a,this.b=Ge.b,this.rf=Ge.rf,this.sphere=Ge.sphere,this.es=Be.es,this.e=Be.e,this.ep2=Be.ep2,this.datum=Ve,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(r,e){return r.datum_type!==e.datum_type||r.a!==e.a||Math.abs(r.es-e.es)>5e-11?!1:r.datum_type===PJD_3PARAM?r.datum_params[0]===e.datum_params[0]&&r.datum_params[1]===e.datum_params[1]&&r.datum_params[2]===e.datum_params[2]:r.datum_type===PJD_7PARAM?r.datum_params[0]===e.datum_params[0]&&r.datum_params[1]===e.datum_params[1]&&r.datum_params[2]===e.datum_params[2]&&r.datum_params[3]===e.datum_params[3]&&r.datum_params[4]===e.datum_params[4]&&r.datum_params[5]===e.datum_params[5]&&r.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(r,e,t){var ke=r.x,Oe=r.y,Ge=r.z?r.z:0,Be,je,Ve,Ze;if(Oe<-HALF_PI&&Oe>-1.001*HALF_PI)Oe=-HALF_PI;else if(Oe>HALF_PI&&Oe<1.001*HALF_PI)Oe=HALF_PI;else{if(Oe<-HALF_PI)return{x:-1/0,y:-1/0,z:r.z};if(Oe>HALF_PI)return{x:1/0,y:1/0,z:r.z}}return ke>Math.PI&&(ke-=2*Math.PI),je=Math.sin(Oe),Ze=Math.cos(Oe),Ve=je*je,Be=t/Math.sqrt(1-e*Ve),{x:(Be+Ge)*Ze*Math.cos(ke),y:(Be+Ge)*Ze*Math.sin(ke),z:(Be*(1-e)+Ge)*je}}function geocentricToGeodetic(r,e,t,ke){var Oe=1e-12,Ge=Oe*Oe,Be=30,je,Ve,Ze,Qe,en,tn,an,cn,dn,hn,fn,pn,mn,yn=r.x,Cn=r.y,wn=r.z?r.z:0,bn,Sn,Mn;if(je=Math.sqrt(yn*yn+Cn*Cn),Ve=Math.sqrt(yn*yn+Cn*Cn+wn*wn),je/t<Oe){if(bn=0,Ve/t<Oe)return Sn=HALF_PI,Mn=-ke,{x:r.x,y:r.y,z:r.z}}else bn=Math.atan2(Cn,yn);Ze=wn/Ve,Qe=je/Ve,en=1/Math.sqrt(1-e*(2-e)*Qe*Qe),cn=Qe*(1-e)*en,dn=Ze*en,mn=0;do mn++,an=t/Math.sqrt(1-e*dn*dn),Mn=je*cn+wn*dn-an*(1-e*dn*dn),tn=e*an/(an+Mn),en=1/Math.sqrt(1-tn*(2-tn)*Qe*Qe),hn=Qe*(1-tn)*en,fn=Ze*en,pn=fn*cn-hn*dn,cn=hn,dn=fn;while(pn*pn>Ge&&mn<Be);return Sn=Math.atan(fn/Math.abs(hn)),{x:bn,y:Sn,z:Mn}}function geocentricToWgs84(r,e,t){if(e===PJD_3PARAM)return{x:r.x+t[0],y:r.y+t[1],z:r.z+t[2]};if(e===PJD_7PARAM){var ke=t[0],Oe=t[1],Ge=t[2],Be=t[3],je=t[4],Ve=t[5],Ze=t[6];return{x:Ze*(r.x-Ve*r.y+je*r.z)+ke,y:Ze*(Ve*r.x+r.y-Be*r.z)+Oe,z:Ze*(-je*r.x+Be*r.y+r.z)+Ge}}}function geocentricFromWgs84(r,e,t){if(e===PJD_3PARAM)return{x:r.x-t[0],y:r.y-t[1],z:r.z-t[2]};if(e===PJD_7PARAM){var ke=t[0],Oe=t[1],Ge=t[2],Be=t[3],je=t[4],Ve=t[5],Ze=t[6],Qe=(r.x-ke)/Ze,en=(r.y-Oe)/Ze,tn=(r.z-Ge)/Ze;return{x:Qe+Ve*en-je*tn,y:-Ve*Qe+en+Be*tn,z:je*Qe-Be*en+tn}}}function checkParams(r){return r===PJD_3PARAM||r===PJD_7PARAM}function datum_transform(r,e,t){if(compareDatums(r,e)||r.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return t;var ke=r.a,Oe=r.es;if(r.datum_type===PJD_GRIDSHIFT){var Ge=applyGridShift(r,!1,t);if(Ge!==0)return;ke=SRS_WGS84_SEMIMAJOR,Oe=SRS_WGS84_ESQUARED}var Be=e.a,je=e.b,Ve=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(Be=SRS_WGS84_SEMIMAJOR,je=SRS_WGS84_SEMIMINOR,Ve=SRS_WGS84_ESQUARED),Oe===Ve&&ke===Be&&!checkParams(r.datum_type)&&!checkParams(e.datum_type))return t;if(t=geodeticToGeocentric(t,Oe,ke),checkParams(r.datum_type)&&(t=geocentricToWgs84(t,r.datum_type,r.datum_params)),checkParams(e.datum_type)&&(t=geocentricFromWgs84(t,e.datum_type,e.datum_params)),t=geocentricToGeodetic(t,Ve,Be,je),e.datum_type===PJD_GRIDSHIFT){var Ze=applyGridShift(e,!0,t);if(Ze!==0)return}return t}function applyGridShift(r,e,t){if(r.grids===null||r.grids.length===0)return console.log("Grid shift grids not found"),-1;var ke={x:-t.x,y:t.y},Oe={x:Number.NaN,y:Number.NaN},Ge=[];e:for(var Be=0;Be<r.grids.length;Be++){var je=r.grids[Be];if(Ge.push(je.name),je.isNull){Oe=ke;break}if(je.mandatory,je.grid===null){if(je.mandatory)return console.log("Unable to find mandatory grid '"+je.name+"'"),-1;continue}for(var Ve=je.grid.subgrids,Ze=0,Qe=Ve.length;Ze<Qe;Ze++){var en=Ve[Ze],tn=(Math.abs(en.del[1])+Math.abs(en.del[0]))/1e4,an=en.ll[0]-tn,cn=en.ll[1]-tn,dn=en.ll[0]+(en.lim[0]-1)*en.del[0]+tn,hn=en.ll[1]+(en.lim[1]-1)*en.del[1]+tn;if(!(cn>ke.y||an>ke.x||hn<ke.y||dn<ke.x)&&(Oe=applySubgridShift(ke,e,en),!isNaN(Oe.x)))break e}}return isNaN(Oe.x)?(console.log("Failed to find a grid shift table for location '"+-ke.x*R2D+" "+ke.y*R2D+" tried: '"+Ge+"'"),-1):(t.x=-Oe.x,t.y=Oe.y,0)}function applySubgridShift(r,e,t){var ke={x:Number.NaN,y:Number.NaN};if(isNaN(r.x))return ke;var Oe={x:r.x,y:r.y};Oe.x-=t.ll[0],Oe.y-=t.ll[1],Oe.x=adjust_lon(Oe.x-Math.PI)+Math.PI;var Ge=nadInterpolate(Oe,t);if(e){if(isNaN(Ge.x))return ke;Ge.x=Oe.x-Ge.x,Ge.y=Oe.y-Ge.y;var Be=9,je=1e-12,Ve,Ze;do{if(Ze=nadInterpolate(Ge,t),isNaN(Ze.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}Ve={x:Oe.x-(Ze.x+Ge.x),y:Oe.y-(Ze.y+Ge.y)},Ge.x+=Ve.x,Ge.y+=Ve.y}while(Be--&&Math.abs(Ve.x)>je&&Math.abs(Ve.y)>je);if(Be<0)return console.log("Inverse grid shift iterator failed to converge."),ke;ke.x=adjust_lon(Ge.x+t.ll[0]),ke.y=Ge.y+t.ll[1]}else isNaN(Ge.x)||(ke.x=r.x+Ge.x,ke.y=r.y+Ge.y);return ke}function nadInterpolate(r,e){var t={x:r.x/e.del[0],y:r.y/e.del[1]},ke={x:Math.floor(t.x),y:Math.floor(t.y)},Oe={x:t.x-1*ke.x,y:t.y-1*ke.y},Ge={x:Number.NaN,y:Number.NaN},Be;if(ke.x<0||ke.x>=e.lim[0]||ke.y<0||ke.y>=e.lim[1])return Ge;Be=ke.y*e.lim[0]+ke.x;var je={x:e.cvs[Be][0],y:e.cvs[Be][1]};Be++;var Ve={x:e.cvs[Be][0],y:e.cvs[Be][1]};Be+=e.lim[0];var Ze={x:e.cvs[Be][0],y:e.cvs[Be][1]};Be--;var Qe={x:e.cvs[Be][0],y:e.cvs[Be][1]},en=Oe.x*Oe.y,tn=Oe.x*(1-Oe.y),an=(1-Oe.x)*(1-Oe.y),cn=(1-Oe.x)*Oe.y;return Ge.x=an*je.x+tn*Ve.x+cn*Qe.x+en*Ze.x,Ge.y=an*je.y+tn*Ve.y+cn*Qe.y+en*Ze.y,Ge}function adjust_axis(r,e,t){var ke=t.x,Oe=t.y,Ge=t.z||0,Be,je,Ve,Ze={};for(Ve=0;Ve<3;Ve++)if(!(e&&Ve===2&&t.z===void 0))switch(Ve===0?(Be=ke,"ew".indexOf(r.axis[Ve])!==-1?je="x":je="y"):Ve===1?(Be=Oe,"ns".indexOf(r.axis[Ve])!==-1?je="y":je="x"):(Be=Ge,je="z"),r.axis[Ve]){case"e":Ze[je]=Be;break;case"w":Ze[je]=-Be;break;case"n":Ze[je]=Be;break;case"s":Ze[je]=-Be;break;case"u":t[je]!==void 0&&(Ze.z=Be);break;case"d":t[je]!==void 0&&(Ze.z=-Be);break;default:return null}return Ze}function common(r){var e={x:r[0],y:r[1]};return r.length>2&&(e.z=r[2]),r.length>3&&(e.m=r[3]),e}function checkSanity(r){checkCoord(r.x),checkCoord(r.y)}function checkCoord(r){if(typeof Number.isFinite=="function"){if(Number.isFinite(r))return;throw new TypeError("coordinates must be finite numbers")}if(typeof r!="number"||r!==r||!isFinite(r))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(r,e){return(r.datum.datum_type===PJD_3PARAM||r.datum.datum_type===PJD_7PARAM||r.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&r.datumCode!=="WGS84"}function transform(r,e,t,ke){var Oe;Array.isArray(t)?t=common(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var Ge=t.z!==void 0;if(checkSanity(t),r.datum&&e.datum&&checkNotWGS(r,e)&&(Oe=new Projection("WGS84"),t=transform(r,Oe,t,ke),r=Oe),ke&&r.axis!=="enu"&&(t=adjust_axis(r,!1,t)),r.projName==="longlat")t={x:t.x*D2R$1,y:t.y*D2R$1,z:t.z||0};else if(r.to_meter&&(t={x:t.x*r.to_meter,y:t.y*r.to_meter,z:t.z||0}),t=r.inverse(t),!t)return;if(r.from_greenwich&&(t.x+=r.from_greenwich),t=datum_transform(r.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*R2D,y:t.y*R2D,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),ke&&e.axis!=="enu"?adjust_axis(e,!0,t):(t&&!Ge&&delete t.z,t)}var wgs84=Projection("WGS84");function transformer(r,e,t,ke){var Oe,Ge,Be;return Array.isArray(t)?(Oe=transform(r,e,t,ke)||{x:NaN,y:NaN},t.length>2?typeof r.name<"u"&&r.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof Oe.z=="number"?[Oe.x,Oe.y,Oe.z].concat(t.slice(3)):[Oe.x,Oe.y,t[2]].concat(t.slice(3)):[Oe.x,Oe.y].concat(t.slice(2)):[Oe.x,Oe.y]):(Ge=transform(r,e,t,ke),Be=Object.keys(t),Be.length===2||Be.forEach(function(je){if(typeof r.name<"u"&&r.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(je==="x"||je==="y"||je==="z")return}else if(je==="x"||je==="y")return;Ge[je]=t[je]}),Ge)}function checkProj(r){return r instanceof Projection?r:r.oProj?r.oProj:Projection(r)}function proj4(r,e,t){r=checkProj(r);var ke=!1,Oe;return typeof e>"u"?(e=r,r=wgs84,ke=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=r,r=wgs84,ke=!0),e=checkProj(e),t?transformer(r,e,t):(Oe={forward:function(Ge,Be){return transformer(r,e,Ge,Be)},inverse:function(Ge,Be){return transformer(e,r,Ge,Be)}},ke&&(Oe.oProj=e),Oe)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A$1=65,I$1=73,O$1=79,V$1=86,Z$1=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(r,e){return e=e||5,encode(LLtoUTM({lat:r[1],lon:r[0]}),e)}function inverse$u(r){var e=UTMtoLL(decode(r.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(r){var e=UTMtoLL(decode(r.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(r){return r*(Math.PI/180)}function radToDeg(r){return 180*(r/Math.PI)}function LLtoUTM(r){var e=r.lat,t=r.lon,ke=6378137,Oe=.00669438,Ge=.9996,Be,je,Ve,Ze,Qe,en,tn,an=degToRad(e),cn=degToRad(t),dn,hn;hn=Math.floor((t+180)/6)+1,t===180&&(hn=60),e>=56&&e<64&&t>=3&&t<12&&(hn=32),e>=72&&e<84&&(t>=0&&t<9?hn=31:t>=9&&t<21?hn=33:t>=21&&t<33?hn=35:t>=33&&t<42&&(hn=37)),Be=(hn-1)*6-180+3,dn=degToRad(Be),je=Oe/(1-Oe),Ve=ke/Math.sqrt(1-Oe*Math.sin(an)*Math.sin(an)),Ze=Math.tan(an)*Math.tan(an),Qe=je*Math.cos(an)*Math.cos(an),en=Math.cos(an)*(cn-dn),tn=ke*((1-Oe/4-3*Oe*Oe/64-5*Oe*Oe*Oe/256)*an-(3*Oe/8+3*Oe*Oe/32+45*Oe*Oe*Oe/1024)*Math.sin(2*an)+(15*Oe*Oe/256+45*Oe*Oe*Oe/1024)*Math.sin(4*an)-35*Oe*Oe*Oe/3072*Math.sin(6*an));var fn=Ge*Ve*(en+(1-Ze+Qe)*en*en*en/6+(5-18*Ze+Ze*Ze+72*Qe-58*je)*en*en*en*en*en/120)+5e5,pn=Ge*(tn+Ve*Math.tan(an)*(en*en/2+(5-Ze+9*Qe+4*Qe*Qe)*en*en*en*en/24+(61-58*Ze+Ze*Ze+600*Qe-330*je)*en*en*en*en*en*en/720));return e<0&&(pn+=1e7),{northing:Math.round(pn),easting:Math.round(fn),zoneNumber:hn,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(r){var e=r.northing,t=r.easting,ke=r.zoneLetter,Oe=r.zoneNumber;if(Oe<0||Oe>60)return null;var Ge=.9996,Be=6378137,je=.00669438,Ve,Ze=(1-Math.sqrt(1-je))/(1+Math.sqrt(1-je)),Qe,en,tn,an,cn,dn,hn,fn,pn,mn=t-5e5,yn=e;ke<"N"&&(yn-=1e7),hn=(Oe-1)*6-180+3,Ve=je/(1-je),dn=yn/Ge,fn=dn/(Be*(1-je/4-3*je*je/64-5*je*je*je/256)),pn=fn+(3*Ze/2-27*Ze*Ze*Ze/32)*Math.sin(2*fn)+(21*Ze*Ze/16-55*Ze*Ze*Ze*Ze/32)*Math.sin(4*fn)+151*Ze*Ze*Ze/96*Math.sin(6*fn),Qe=Be/Math.sqrt(1-je*Math.sin(pn)*Math.sin(pn)),en=Math.tan(pn)*Math.tan(pn),tn=Ve*Math.cos(pn)*Math.cos(pn),an=Be*(1-je)/Math.pow(1-je*Math.sin(pn)*Math.sin(pn),1.5),cn=mn/(Qe*Ge);var Cn=pn-Qe*Math.tan(pn)/an*(cn*cn/2-(5+3*en+10*tn-4*tn*tn-9*Ve)*cn*cn*cn*cn/24+(61+90*en+298*tn+45*en*en-252*Ve-3*tn*tn)*cn*cn*cn*cn*cn*cn/720);Cn=radToDeg(Cn);var wn=(cn-(1+2*en+tn)*cn*cn*cn/6+(5-2*tn+28*en-3*tn*tn+8*Ve+24*en*en)*cn*cn*cn*cn*cn/120)/Math.cos(pn);wn=hn+radToDeg(wn);var bn;if(r.accuracy){var Sn=UTMtoLL({northing:r.northing+r.accuracy,easting:r.easting+r.accuracy,zoneLetter:r.zoneLetter,zoneNumber:r.zoneNumber});bn={top:Sn.lat,right:Sn.lon,bottom:Cn,left:wn}}else bn={lat:Cn,lon:wn};return bn}function getLetterDesignator(r){var e="Z";return 84>=r&&r>=72?e="X":72>r&&r>=64?e="W":64>r&&r>=56?e="V":56>r&&r>=48?e="U":48>r&&r>=40?e="T":40>r&&r>=32?e="S":32>r&&r>=24?e="R":24>r&&r>=16?e="Q":16>r&&r>=8?e="P":8>r&&r>=0?e="N":0>r&&r>=-8?e="M":-8>r&&r>=-16?e="L":-16>r&&r>=-24?e="K":-24>r&&r>=-32?e="J":-32>r&&r>=-40?e="H":-40>r&&r>=-48?e="G":-48>r&&r>=-56?e="F":-56>r&&r>=-64?e="E":-64>r&&r>=-72?e="D":-72>r&&r>=-80&&(e="C"),e}function encode(r,e){var t="00000"+r.easting,ke="00000"+r.northing;return r.zoneNumber+r.zoneLetter+get100kID(r.easting,r.northing,r.zoneNumber)+t.substr(t.length-5,e)+ke.substr(ke.length-5,e)}function get100kID(r,e,t){var ke=get100kSetForZone(t),Oe=Math.floor(r/1e5),Ge=Math.floor(e/1e5)%20;return getLetter100kID(Oe,Ge,ke)}function get100kSetForZone(r){var e=r%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(r,e,t){var ke=t-1,Oe=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(ke),Ge=SET_ORIGIN_ROW_LETTERS.charCodeAt(ke),Be=Oe+r-1,je=Ge+e,Ve=!1;Be>Z$1&&(Be=Be-Z$1+A$1-1,Ve=!0),(Be===I$1||Oe<I$1&&Be>I$1||(Be>I$1||Oe<I$1)&&Ve)&&Be++,(Be===O$1||Oe<O$1&&Be>O$1||(Be>O$1||Oe<O$1)&&Ve)&&(Be++,Be===I$1&&Be++),Be>Z$1&&(Be=Be-Z$1+A$1-1),je>V$1?(je=je-V$1+A$1-1,Ve=!0):Ve=!1,(je===I$1||Ge<I$1&&je>I$1||(je>I$1||Ge<I$1)&&Ve)&&je++,(je===O$1||Ge<O$1&&je>O$1||(je>O$1||Ge<O$1)&&Ve)&&(je++,je===I$1&&je++),je>V$1&&(je=je-V$1+A$1-1);var Ze=String.fromCharCode(Be)+String.fromCharCode(je);return Ze}function decode(r){if(r&&r.length===0)throw"MGRSPoint coverting from nothing";for(var e=r.length,t=null,ke="",Oe,Ge=0;!/[A-Z]/.test(Oe=r.charAt(Ge));){if(Ge>=2)throw"MGRSPoint bad conversion from: "+r;ke+=Oe,Ge++}var Be=parseInt(ke,10);if(Ge===0||Ge+3>e)throw"MGRSPoint bad conversion from: "+r;var je=r.charAt(Ge++);if(je<="A"||je==="B"||je==="Y"||je>="Z"||je==="I"||je==="O")throw"MGRSPoint zone letter "+je+" not handled: "+r;t=r.substring(Ge,Ge+=2);for(var Ve=get100kSetForZone(Be),Ze=getEastingFromChar(t.charAt(0),Ve),Qe=getNorthingFromChar(t.charAt(1),Ve);Qe<getMinNorthing(je);)Qe+=2e6;var en=e-Ge;if(en%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+r;var tn=en/2,an=0,cn=0,dn,hn,fn,pn,mn;return tn>0&&(dn=1e5/Math.pow(10,tn),hn=r.substring(Ge,Ge+tn),an=parseFloat(hn)*dn,fn=r.substring(Ge+tn),cn=parseFloat(fn)*dn),pn=an+Ze,mn=cn+Qe,{easting:pn,northing:mn,zoneLetter:je,zoneNumber:Be,accuracy:dn}}function getEastingFromChar(r,e){for(var t=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),ke=1e5,Oe=!1;t!==r.charCodeAt(0);){if(t++,t===I$1&&t++,t===O$1&&t++,t>Z$1){if(Oe)throw"Bad character: "+r;t=A$1,Oe=!0}ke+=1e5}return ke}function getNorthingFromChar(r,e){if(r>"V")throw"MGRSPoint given invalid Northing "+r;for(var t=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),ke=0,Oe=!1;t!==r.charCodeAt(0);){if(t++,t===I$1&&t++,t===O$1&&t++,t>V$1){if(Oe)throw"Bad character: "+r;t=A$1,Oe=!0}ke+=1e5}return ke}function getMinNorthing(r){var e;switch(r){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+r}function Point(r,e,t){if(!(this instanceof Point))return new Point(r,e,t);if(Array.isArray(r))this.x=r[0],this.y=r[1],this.z=r[2]||0;else if(typeof r=="object")this.x=r.x,this.y=r.y,this.z=r.z||0;else if(typeof r=="string"&&typeof e>"u"){var ke=r.split(",");this.x=parseFloat(ke[0],10),this.y=parseFloat(ke[1],10),this.z=parseFloat(ke[2],10)||0}else this.x=r,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(r){return new Point(toPoint(r))};Point.prototype.toMGRS=function(r){return forward$u([this.x,this.y],r)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(r){var e=[];e[0]=C00-r*(C02+r*(C04+r*(C06+r*C08))),e[1]=r*(C22-r*(C04+r*(C06+r*C08)));var t=r*r;return e[2]=t*(C44-r*(C46+r*C48)),t*=r,e[3]=t*(C66-r*C68),e[4]=t*r*C88,e}function pj_mlfn(r,e,t,ke){return t*=e,e*=e,ke[0]*r-t*(ke[1]+e*(ke[2]+e*(ke[3]+e*ke[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(r,e,t){for(var ke=1/(1-e),Oe=r,Ge=MAX_ITER$3;Ge;--Ge){var Be=Math.sin(Oe),je=1-e*Be*Be;if(je=(pj_mlfn(Oe,Be,Math.cos(Oe),t)-r)*(je*Math.sqrt(je))*ke,Oe-=je,Math.abs(je)<EPSLN)return Oe}return Oe}function init$v(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(r){var e=r.x,t=r.y,ke=adjust_lon(e-this.long0),Oe,Ge,Be,je=Math.sin(t),Ve=Math.cos(t);if(this.es){var Qe=Ve*ke,en=Math.pow(Qe,2),tn=this.ep2*Math.pow(Ve,2),an=Math.pow(tn,2),cn=Math.abs(Ve)>EPSLN?Math.tan(t):0,dn=Math.pow(cn,2),hn=Math.pow(dn,2);Oe=1-this.es*Math.pow(je,2),Qe=Qe/Math.sqrt(Oe);var fn=pj_mlfn(t,je,Ve,this.en);Ge=this.a*(this.k0*Qe*(1+en/6*(1-dn+tn+en/20*(5-18*dn+hn+14*tn-58*dn*tn+en/42*(61+179*hn-hn*dn-479*dn)))))+this.x0,Be=this.a*(this.k0*(fn-this.ml0+je*ke*Qe/2*(1+en/12*(5-dn+9*tn+4*an+en/30*(61+hn-58*dn+270*tn-330*dn*tn+en/56*(1385+543*hn-hn*dn-3111*dn))))))+this.y0}else{var Ze=Ve*Math.sin(ke);if(Math.abs(Math.abs(Ze)-1)<EPSLN)return 93;if(Ge=.5*this.a*this.k0*Math.log((1+Ze)/(1-Ze))+this.x0,Be=Ve*Math.cos(ke)/Math.sqrt(1-Math.pow(Ze,2)),Ze=Math.abs(Be),Ze>=1){if(Ze-1>EPSLN)return 93;Be=0}else Be=Math.acos(Be);t<0&&(Be=-Be),Be=this.a*this.k0*(Be-this.lat0)+this.y0}return r.x=Ge,r.y=Be,r}function inverse$t(r){var e,t,ke,Oe,Ge=(r.x-this.x0)*(1/this.a),Be=(r.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+Be/this.k0,t=pj_inv_mlfn(e,this.es,this.en),Math.abs(t)<HALF_PI){var en=Math.sin(t),tn=Math.cos(t),an=Math.abs(tn)>EPSLN?Math.tan(t):0,cn=this.ep2*Math.pow(tn,2),dn=Math.pow(cn,2),hn=Math.pow(an,2),fn=Math.pow(hn,2);e=1-this.es*Math.pow(en,2);var pn=Ge*Math.sqrt(e)/this.k0,mn=Math.pow(pn,2);e=e*an,ke=t-e*mn/(1-this.es)*.5*(1-mn/12*(5+3*hn-9*cn*hn+cn-4*dn-mn/30*(61+90*hn-252*cn*hn+45*fn+46*cn-mn/56*(1385+3633*hn+4095*fn+1574*fn*hn)))),Oe=adjust_lon(this.long0+pn*(1-mn/6*(1+2*hn+cn-mn/20*(5+28*hn+24*fn+8*cn*hn+6*cn-mn/42*(61+662*hn+1320*fn+720*fn*hn))))/tn)}else ke=HALF_PI*sign(Be),Oe=0;else{var je=Math.exp(Ge/this.k0),Ve=.5*(je-1/je),Ze=this.lat0+Be/this.k0,Qe=Math.cos(Ze);e=Math.sqrt((1-Math.pow(Qe,2))/(1+Math.pow(Ve,2))),ke=Math.asin(e),Be<0&&(ke=-ke),Ve===0&&Qe===0?Oe=0:Oe=adjust_lon(Math.atan2(Ve,Qe)+this.long0)}return r.x=Oe,r.y=ke,r}var names$v=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$v,forward:forward$t,inverse:inverse$t,names:names$v};function sinh(r){var e=Math.exp(r);return e=(e-1/e)/2,e}function hypot(r,e){r=Math.abs(r),e=Math.abs(e);var t=Math.max(r,e),ke=Math.min(r,e)/(t||1);return t*Math.sqrt(1+Math.pow(ke,2))}function log1py(r){var e=1+r,t=e-1;return t===0?r:r*Math.log(e)/t}function asinhy(r){var e=Math.abs(r);return e=log1py(e*(1+e/(hypot(1,e)+1))),r<0?-e:e}function gatg(r,e){for(var t=2*Math.cos(2*e),ke=r.length-1,Oe=r[ke],Ge=0,Be;--ke>=0;)Be=-Ge+t*Oe+r[ke],Ge=Oe,Oe=Be;return e+Be*Math.sin(2*e)}function clens(r,e){for(var t=2*Math.cos(e),ke=r.length-1,Oe=r[ke],Ge=0,Be;--ke>=0;)Be=-Ge+t*Oe+r[ke],Ge=Oe,Oe=Be;return Math.sin(e)*Be}function cosh(r){var e=Math.exp(r);return e=(e+1/e)/2,e}function clens_cmplx(r,e,t){for(var ke=Math.sin(e),Oe=Math.cos(e),Ge=sinh(t),Be=cosh(t),je=2*Oe*Be,Ve=-2*ke*Ge,Ze=r.length-1,Qe=r[Ze],en=0,tn=0,an=0,cn,dn;--Ze>=0;)cn=tn,dn=en,tn=Qe,en=an,Qe=-cn+je*tn-Ve*en+r[Ze],an=-dn+Ve*tn+je*en;return je=ke*Be,Ve=Oe*Ge,[je*Qe-Ve*an,je*an+Ve*Qe]}function init$u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var r=this.es/(1+Math.sqrt(1-this.es)),e=r/(2-r),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var ke=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(ke+clens(this.gtu,2*ke))}function forward$s(r){var e=adjust_lon(r.x-this.long0),t=r.y;t=gatg(this.cbg,t);var ke=Math.sin(t),Oe=Math.cos(t),Ge=Math.sin(e),Be=Math.cos(e);t=Math.atan2(ke,Be*Oe),e=Math.atan2(Ge*Oe,hypot(ke,Oe*Be)),e=asinhy(Math.tan(e));var je=clens_cmplx(this.gtu,2*t,2*e);t=t+je[0],e=e+je[1];var Ve,Ze;return Math.abs(e)<=2.623395162778?(Ve=this.a*(this.Qn*e)+this.x0,Ze=this.a*(this.Qn*t+this.Zb)+this.y0):(Ve=1/0,Ze=1/0),r.x=Ve,r.y=Ze,r}function inverse$s(r){var e=(r.x-this.x0)*(1/this.a),t=(r.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var ke,Oe;if(Math.abs(e)<=2.623395162778){var Ge=clens_cmplx(this.utg,2*t,2*e);t=t+Ge[0],e=e+Ge[1],e=Math.atan(sinh(e));var Be=Math.sin(t),je=Math.cos(t),Ve=Math.sin(e),Ze=Math.cos(e);t=Math.atan2(Be*Ze,hypot(Ve,Ze*je)),e=Math.atan2(Ve,Ze*je),ke=adjust_lon(e+this.long0),Oe=gatg(this.cgb,t)}else ke=1/0,Oe=1/0;return r.x=ke,r.y=Oe,r}var names$u=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$u,forward:forward$s,inverse:inverse$s,names:names$u};function adjust_zone(r,e){if(r===void 0){if(r=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,r<0)return 0;if(r>60)return 60}return r}var dependsOn="etmerc";function init$t(){var r=adjust_zone(this.zone,this.long0);if(r===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(r)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$t=["Universal Transverse Mercator System","utm"];const utm={init:init$t,names:names$t,dependsOn};function srat(r,e){return Math.pow((1-r)/(1+r),e)}var MAX_ITER$2=20;function init$s(){var r=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*r*r),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(r/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*r,this.ratexp))}function forward$r(r){var e=r.x,t=r.y;return r.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+FORTPI),this.C)*srat(this.e*Math.sin(t),this.ratexp))-HALF_PI,r.x=this.C*e,r}function inverse$r(r){for(var e=1e-14,t=r.x/this.C,ke=r.y,Oe=Math.pow(Math.tan(.5*ke+FORTPI)/this.K,1/this.C),Ge=MAX_ITER$2;Ge>0&&(ke=2*Math.atan(Oe*srat(this.e*Math.sin(r.y),-.5*this.e))-HALF_PI,!(Math.abs(ke-r.y)<e));--Ge)r.y=ke;return Ge?(r.x=t,r.y=ke,r):null}var names$s=["gauss"];const gauss={init:init$s,forward:forward$r,inverse:inverse$r,names:names$s};function init$r(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(r){var e,t,ke,Oe;return r.x=adjust_lon(r.x-this.long0),gauss.forward.apply(this,[r]),e=Math.sin(r.y),t=Math.cos(r.y),ke=Math.cos(r.x),Oe=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*ke),r.x=Oe*t*Math.sin(r.x),r.y=Oe*(this.cosc0*e-this.sinc0*t*ke),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function inverse$q(r){var e,t,ke,Oe,Ge;if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,Ge=hypot(r.x,r.y)){var Be=2*Math.atan2(Ge,this.R2);e=Math.sin(Be),t=Math.cos(Be),Oe=Math.asin(t*this.sinc0+r.y*e*this.cosc0/Ge),ke=Math.atan2(r.x*e,Ge*this.cosc0*t-r.y*this.sinc0*e)}else Oe=this.phic0,ke=0;return r.x=ke,r.y=Oe,gauss.inverse.apply(this,[r]),r.x=adjust_lon(r.x+this.long0),r}var names$r=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$r,forward:forward$q,inverse:inverse$q,names:names$r};function ssfn_(r,e,t){return e*=t,Math.tan(.5*(HALF_PI+r))*Math.pow((1-e)/(1+e),.5*t)}function init$q(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(r){var e=r.x,t=r.y,ke=Math.sin(t),Oe=Math.cos(t),Ge,Be,je,Ve,Ze,Qe,en=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(t+this.lat0)<=EPSLN?(r.x=NaN,r.y=NaN,r):this.sphere?(Ge=2*this.k0/(1+this.sinlat0*ke+this.coslat0*Oe*Math.cos(en)),r.x=this.a*Ge*Oe*Math.sin(en)+this.x0,r.y=this.a*Ge*(this.coslat0*ke-this.sinlat0*Oe*Math.cos(en))+this.y0,r):(Be=2*Math.atan(this.ssfn_(t,ke,this.e))-HALF_PI,Ve=Math.cos(Be),je=Math.sin(Be),Math.abs(this.coslat0)<=EPSLN?(Ze=tsfnz(this.e,t*this.con,this.con*ke),Qe=2*this.a*this.k0*Ze/this.cons,r.x=this.x0+Qe*Math.sin(e-this.long0),r.y=this.y0-this.con*Qe*Math.cos(e-this.long0),r):(Math.abs(this.sinlat0)<EPSLN?(Ge=2*this.a*this.k0/(1+Ve*Math.cos(en)),r.y=Ge*je):(Ge=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*je+this.cosX0*Ve*Math.cos(en))),r.y=Ge*(this.cosX0*je-this.sinX0*Ve*Math.cos(en))+this.y0),r.x=Ge*Ve*Math.sin(en)+this.x0,r))}function inverse$p(r){r.x-=this.x0,r.y-=this.y0;var e,t,ke,Oe,Ge,Be=Math.sqrt(r.x*r.x+r.y*r.y);if(this.sphere){var je=2*Math.atan(Be/(2*this.a*this.k0));return e=this.long0,t=this.lat0,Be<=EPSLN?(r.x=e,r.y=t,r):(t=Math.asin(Math.cos(je)*this.sinlat0+r.y*Math.sin(je)*this.coslat0/Be),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(r.x,-1*r.y)):e=adjust_lon(this.long0+Math.atan2(r.x,r.y)):e=adjust_lon(this.long0+Math.atan2(r.x*Math.sin(je),Be*this.coslat0*Math.cos(je)-r.y*this.sinlat0*Math.sin(je))),r.x=e,r.y=t,r)}else if(Math.abs(this.coslat0)<=EPSLN){if(Be<=EPSLN)return t=this.lat0,e=this.long0,r.x=e,r.y=t,r;r.x*=this.con,r.y*=this.con,ke=Be*this.cons/(2*this.a*this.k0),t=this.con*phi2z(this.e,ke),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(r.x,-1*r.y))}else Oe=2*Math.atan(Be*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,Be<=EPSLN?Ge=this.X0:(Ge=Math.asin(Math.cos(Oe)*this.sinX0+r.y*Math.sin(Oe)*this.cosX0/Be),e=adjust_lon(this.long0+Math.atan2(r.x*Math.sin(Oe),Be*this.cosX0*Math.cos(Oe)-r.y*this.sinX0*Math.sin(Oe)))),t=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+Ge)));return r.x=e,r.y=t,r}var names$q=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$q,forward:forward$p,inverse:inverse$p,names:names$q,ssfn_};function init$p(){var r=this.lat0;this.lambda0=this.long0;var e=Math.sin(r),t=this.a,ke=this.rf,Oe=1/ke,Ge=2*Oe-Math.pow(Oe,2),Be=this.e=Math.sqrt(Ge);this.R=this.k0*t*Math.sqrt(1-Ge)/(1-Ge*Math.pow(e,2)),this.alpha=Math.sqrt(1+Ge/(1-Ge)*Math.pow(Math.cos(r),4)),this.b0=Math.asin(e/this.alpha);var je=Math.log(Math.tan(Math.PI/4+this.b0/2)),Ve=Math.log(Math.tan(Math.PI/4+r/2)),Ze=Math.log((1+Be*e)/(1-Be*e));this.K=je-this.alpha*Ve+this.alpha*Be/2*Ze}function forward$o(r){var e=Math.log(Math.tan(Math.PI/4-r.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(r.y))/(1-this.e*Math.sin(r.y))),ke=-this.alpha*(e+t)+this.K,Oe=2*(Math.atan(Math.exp(ke))-Math.PI/4),Ge=this.alpha*(r.x-this.lambda0),Be=Math.atan(Math.sin(Ge)/(Math.sin(this.b0)*Math.tan(Oe)+Math.cos(this.b0)*Math.cos(Ge))),je=Math.asin(Math.cos(this.b0)*Math.sin(Oe)-Math.sin(this.b0)*Math.cos(Oe)*Math.cos(Ge));return r.y=this.R/2*Math.log((1+Math.sin(je))/(1-Math.sin(je)))+this.y0,r.x=this.R*Be+this.x0,r}function inverse$o(r){for(var e=r.x-this.x0,t=r.y-this.y0,ke=e/this.R,Oe=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),Ge=Math.asin(Math.cos(this.b0)*Math.sin(Oe)+Math.sin(this.b0)*Math.cos(Oe)*Math.cos(ke)),Be=Math.atan(Math.sin(ke)/(Math.cos(this.b0)*Math.cos(ke)-Math.sin(this.b0)*Math.tan(Oe))),je=this.lambda0+Be/this.alpha,Ve=0,Ze=Ge,Qe=-1e3,en=0;Math.abs(Ze-Qe)>1e-7;){if(++en>20)return;Ve=1/this.alpha*(Math.log(Math.tan(Math.PI/4+Ge/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(Ze))/2)),Qe=Ze,Ze=2*Math.atan(Math.exp(Ve))-Math.PI/2}return r.x=je,r.y=Ze,r}var names$p=["somerc"];const somerc={init:init$p,forward:forward$o,inverse:inverse$o,names:names$p};var TOL=1e-7;function isTypeA(r){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof r.PROJECTION=="object"?Object.keys(r.PROJECTION)[0]:r.PROJECTION;return"no_uoff"in r||"no_off"in r||e.indexOf(t)!==-1}function init$o(){var r,e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe=0,en,tn=0,an=0,cn=0,dn=0,hn=0,fn=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var pn=!1;"alpha"in this&&(pn=!0);var mn=!1;if("rectified_grid_angle"in this&&(mn=!0),pn&&(fn=this.alpha),mn&&(Qe=this.rectified_grid_angle*D2R$1),pn||mn)tn=this.longc;else if(an=this.long1,dn=this.lat1,cn=this.long2,hn=this.lat2,Math.abs(dn-hn)<=TOL||(r=Math.abs(dn))<=TOL||Math.abs(r-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(hn)-HALF_PI)<=TOL)throw new Error;var yn=1-this.es;e=Math.sqrt(yn),Math.abs(this.lat0)>EPSLN?(je=Math.sin(this.lat0),t=Math.cos(this.lat0),r=1-this.es*je*je,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/yn),this.A=this.B*this.k0*e/r,ke=this.B*e/(t*Math.sqrt(r)),Oe=ke*ke-1,Oe<=0?Oe=0:(Oe=Math.sqrt(Oe),this.lat0<0&&(Oe=-Oe)),this.E=Oe+=ke,this.E*=Math.pow(tsfnz(this.e,this.lat0,je),this.B)):(this.B=1/e,this.A=this.k0,this.E=ke=Oe=1),pn||mn?(pn?(en=Math.asin(Math.sin(fn)/ke),mn||(Qe=fn)):(en=Qe,fn=Math.asin(ke*Math.sin(en))),this.lam0=tn-Math.asin(.5*(Oe-1/Oe)*Math.tan(en))/this.B):(Ge=Math.pow(tsfnz(this.e,dn,Math.sin(dn)),this.B),Be=Math.pow(tsfnz(this.e,hn,Math.sin(hn)),this.B),Oe=this.E/Ge,Ve=(Be-Ge)/(Be+Ge),Ze=this.E*this.E,Ze=(Ze-Be*Ge)/(Ze+Be*Ge),r=an-cn,r<-Math.pi?cn-=TWO_PI:r>Math.pi&&(cn+=TWO_PI),this.lam0=adjust_lon(.5*(an+cn)-Math.atan(Ze*Math.tan(.5*this.B*(an-cn))/Ve)/this.B),en=Math.atan(2*Math.sin(this.B*adjust_lon(an-this.lam0))/(Oe-1/Oe)),Qe=fn=Math.asin(ke*Math.sin(en))),this.singam=Math.sin(en),this.cosgam=Math.cos(en),this.sinrot=Math.sin(Qe),this.cosrot=Math.cos(Qe),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(ke*ke-1)/Math.cos(fn))),this.lat0<0&&(this.u_0=-this.u_0)),Oe=.5*en,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-Oe)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+Oe))}function forward$n(r){var e={},t,ke,Oe,Ge,Be,je,Ve,Ze;if(r.x=r.x-this.lam0,Math.abs(Math.abs(r.y)-HALF_PI)>EPSLN){if(Be=this.E/Math.pow(tsfnz(this.e,r.y,Math.sin(r.y)),this.B),je=1/Be,t=.5*(Be-je),ke=.5*(Be+je),Ge=Math.sin(this.B*r.x),Oe=(t*this.singam-Ge*this.cosgam)/ke,Math.abs(Math.abs(Oe)-1)<EPSLN)throw new Error;Ze=.5*this.ArB*Math.log((1-Oe)/(1+Oe)),je=Math.cos(this.B*r.x),Math.abs(je)<TOL?Ve=this.A*r.x:Ve=this.ArB*Math.atan2(t*this.cosgam+Ge*this.singam,je)}else Ze=r.y>0?this.v_pole_n:this.v_pole_s,Ve=this.ArB*r.y;return this.no_rot?(e.x=Ve,e.y=Ze):(Ve-=this.u_0,e.x=Ze*this.cosrot+Ve*this.sinrot,e.y=Ve*this.cosrot-Ze*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(r){var e,t,ke,Oe,Ge,Be,je,Ve={};if(r.x=(r.x-this.x0)*(1/this.a),r.y=(r.y-this.y0)*(1/this.a),this.no_rot?(t=r.y,e=r.x):(t=r.x*this.cosrot-r.y*this.sinrot,e=r.y*this.cosrot+r.x*this.sinrot+this.u_0),ke=Math.exp(-this.BrA*t),Oe=.5*(ke-1/ke),Ge=.5*(ke+1/ke),Be=Math.sin(this.BrA*e),je=(Be*this.cosgam+Oe*this.singam)/Ge,Math.abs(Math.abs(je)-1)<EPSLN)Ve.x=0,Ve.y=je<0?-HALF_PI:HALF_PI;else{if(Ve.y=this.E/Math.sqrt((1+je)/(1-je)),Ve.y=phi2z(this.e,Math.pow(Ve.y,1/this.B)),Ve.y===1/0)throw new Error;Ve.x=-this.rB*Math.atan2(Oe*this.cosgam-Be*this.singam,Math.cos(this.BrA*e))}return Ve.x+=this.lam0,Ve}var names$o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$o,forward:forward$n,inverse:inverse$n,names:names$o};function init$n(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var r=this.b/this.a;this.e=Math.sqrt(1-r*r);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),ke=msfnz(this.e,e,t),Oe=tsfnz(this.e,this.lat1,e),Ge=Math.sin(this.lat2),Be=Math.cos(this.lat2),je=msfnz(this.e,Ge,Be),Ve=tsfnz(this.e,this.lat2,Ge),Ze=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(ke/je)/Math.log(Oe/Ve):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=ke/(this.ns*Math.pow(Oe,this.ns)),this.rh=this.a*this.f0*Math.pow(Ze,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(r){var e=r.x,t=r.y;Math.abs(2*Math.abs(t)-Math.PI)<=EPSLN&&(t=sign(t)*(HALF_PI-2*EPSLN));var ke=Math.abs(Math.abs(t)-HALF_PI),Oe,Ge;if(ke>EPSLN)Oe=tsfnz(this.e,t,Math.sin(t)),Ge=this.a*this.f0*Math.pow(Oe,this.ns);else{if(ke=t*this.ns,ke<=0)return null;Ge=0}var Be=this.ns*adjust_lon(e-this.long0);return r.x=this.k0*(Ge*Math.sin(Be))+this.x0,r.y=this.k0*(this.rh-Ge*Math.cos(Be))+this.y0,r}function inverse$m(r){var e,t,ke,Oe,Ge,Be=(r.x-this.x0)/this.k0,je=this.rh-(r.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(Be*Be+je*je),t=1):(e=-Math.sqrt(Be*Be+je*je),t=-1);var Ve=0;if(e!==0&&(Ve=Math.atan2(t*Be,t*je)),e!==0||this.ns>0){if(t=1/this.ns,ke=Math.pow(e/(this.a*this.f0),t),Oe=phi2z(this.e,ke),Oe===-9999)return null}else Oe=-HALF_PI;return Ge=adjust_lon(Ve/this.ns+this.long0),r.x=Ge,r.y=Oe,r}var names$n=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$n,forward:forward$m,inverse:inverse$m,names:names$n};function init$m(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(r){var e,t,ke,Oe,Ge,Be,je,Ve=r.x,Ze=r.y,Qe=adjust_lon(Ve-this.long0);return e=Math.pow((1+this.e*Math.sin(Ze))/(1-this.e*Math.sin(Ze)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(Ze/2+this.s45),this.alfa)/e)-this.s45),ke=-Qe*this.alfa,Oe=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(ke)),Ge=Math.asin(Math.cos(t)*Math.sin(ke)/Math.cos(Oe)),Be=this.n*Ge,je=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(Oe/2+this.s45),this.n),r.y=je*Math.cos(Be)/1,r.x=je*Math.sin(Be)/1,this.czech||(r.y*=-1,r.x*=-1),r}function inverse$l(r){var e,t,ke,Oe,Ge,Be,je,Ve,Ze=r.x;r.x=r.y,r.y=Ze,this.czech||(r.y*=-1,r.x*=-1),Be=Math.sqrt(r.x*r.x+r.y*r.y),Ge=Math.atan2(r.y,r.x),Oe=Ge/Math.sin(this.s0),ke=2*(Math.atan(Math.pow(this.ro0/Be,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(ke)-Math.sin(this.ad)*Math.cos(ke)*Math.cos(Oe)),t=Math.asin(Math.cos(ke)*Math.sin(Oe)/Math.cos(e)),r.x=this.long0-t/this.alfa,je=e,Ve=0;var Qe=0;do r.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(je))/(1-this.e*Math.sin(je)),this.e/2))-this.s45),Math.abs(je-r.y)<1e-10&&(Ve=1),je=r.y,Qe+=1;while(Ve===0&&Qe<15);return Qe>=15?null:r}var names$m=["Krovak","krovak"];const krovak={init:init$m,forward:forward$l,inverse:inverse$l,names:names$m};function mlfn(r,e,t,ke,Oe){return r*Oe-e*Math.sin(2*Oe)+t*Math.sin(4*Oe)-ke*Math.sin(6*Oe)}function e0fn(r){return 1-.25*r*(1+r/16*(3+1.25*r))}function e1fn(r){return .375*r*(1+.25*r*(1+.46875*r))}function e2fn(r){return .05859375*r*r*(1+.75*r)}function e3fn(r){return r*r*r*(35/3072)}function gN(r,e,t){var ke=e*t;return r/Math.sqrt(1-ke*ke)}function adjust_lat(r){return Math.abs(r)<HALF_PI?r:r-sign(r)*Math.PI}function imlfn(r,e,t,ke,Oe){var Ge,Be;Ge=r/e;for(var je=0;je<15;je++)if(Be=(r-(e*Ge-t*Math.sin(2*Ge)+ke*Math.sin(4*Ge)-Oe*Math.sin(6*Ge)))/(e-2*t*Math.cos(2*Ge)+4*ke*Math.cos(4*Ge)-6*Oe*Math.cos(6*Ge)),Ge+=Be,Math.abs(Be)<=1e-10)return Ge;return NaN}function init$l(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(r){var e,t,ke=r.x,Oe=r.y;if(ke=adjust_lon(ke-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(Oe)*Math.sin(ke)),t=this.a*(Math.atan2(Math.tan(Oe),Math.cos(ke))-this.lat0);else{var Ge=Math.sin(Oe),Be=Math.cos(Oe),je=gN(this.a,this.e,Ge),Ve=Math.tan(Oe)*Math.tan(Oe),Ze=ke*Math.cos(Oe),Qe=Ze*Ze,en=this.es*Be*Be/(1-this.es),tn=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,Oe);e=je*Ze*(1-Qe*Ve*(1/6-(8-Ve+8*en)*Qe/120)),t=tn-this.ml0+je*Ge/Be*Qe*(.5+(5-Ve+6*en)*Qe/24)}return r.x=e+this.x0,r.y=t+this.y0,r}function inverse$k(r){r.x-=this.x0,r.y-=this.y0;var e=r.x/this.a,t=r.y/this.a,ke,Oe;if(this.sphere){var Ge=t+this.lat0;ke=Math.asin(Math.sin(Ge)*Math.cos(e)),Oe=Math.atan2(Math.tan(e),Math.cos(Ge))}else{var Be=this.ml0/this.a+t,je=imlfn(Be,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(je)-HALF_PI)<=EPSLN)return r.x=this.long0,r.y=HALF_PI,t<0&&(r.y*=-1),r;var Ve=gN(this.a,this.e,Math.sin(je)),Ze=Ve*Ve*Ve/this.a/this.a*(1-this.es),Qe=Math.pow(Math.tan(je),2),en=e*this.a/Ve,tn=en*en;ke=je-Ve*Math.tan(je)/Ze*en*en*(.5-(1+3*Qe)*en*en/24),Oe=en*(1-tn*(Qe/3+(1+3*Qe)*Qe*tn/15))/Math.cos(je)}return r.x=adjust_lon(Oe+this.long0),r.y=adjust_lat(ke),r}var names$l=["Cassini","Cassini_Soldner","cass"];const cass={init:init$l,forward:forward$k,inverse:inverse$k,names:names$l};function qsfnz(r,e){var t;return r>1e-7?(t=r*e,(1-r*r)*(e/(1-t*t)-.5/r*Math.log((1-t)/(1+t)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$k(){var r=Math.abs(this.lat0);if(Math.abs(r-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(r)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(r){var e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe,en=r.x,tn=r.y;if(en=adjust_lon(en-this.long0),this.sphere){if(Ge=Math.sin(tn),Qe=Math.cos(tn),ke=Math.cos(en),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+Qe*ke:1+this.sinph0*Ge+this.cosph0*Qe*ke,t<=EPSLN)return null;t=Math.sqrt(2/t),e=t*Qe*Math.sin(en),t*=this.mode===this.EQUIT?Ge:this.cosph0*Ge-this.sinph0*Qe*ke}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(ke=-ke),Math.abs(tn+this.lat0)<EPSLN)return null;t=FORTPI-tn*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(en),t*=ke}}else{switch(je=0,Ve=0,Ze=0,ke=Math.cos(en),Oe=Math.sin(en),Ge=Math.sin(tn),Be=qsfnz(this.e,Ge),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(je=Be/this.qp,Ve=Math.sqrt(1-je*je)),this.mode){case this.OBLIQ:Ze=1+this.sinb1*je+this.cosb1*Ve*ke;break;case this.EQUIT:Ze=1+Ve*ke;break;case this.N_POLE:Ze=HALF_PI+tn,Be=this.qp-Be;break;case this.S_POLE:Ze=tn-HALF_PI,Be=this.qp+Be;break}if(Math.abs(Ze)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Ze=Math.sqrt(2/Ze),this.mode===this.OBLIQ?t=this.ymf*Ze*(this.cosb1*je-this.sinb1*Ve*ke):t=(Ze=Math.sqrt(2/(1+Ve*ke)))*je*this.ymf,e=this.xmf*Ze*Ve*Oe;break;case this.N_POLE:case this.S_POLE:Be>=0?(e=(Ze=Math.sqrt(Be))*Oe,t=ke*(this.mode===this.S_POLE?Ze:-Ze)):e=t=0;break}}return r.x=this.a*e+this.x0,r.y=this.a*t+this.y0,r}function inverse$j(r){r.x-=this.x0,r.y-=this.y0;var e=r.x/this.a,t=r.y/this.a,ke,Oe,Ge,Be,je,Ve,Ze;if(this.sphere){var Qe=0,en,tn=0;if(en=Math.sqrt(e*e+t*t),Oe=en*.5,Oe>1)return null;switch(Oe=2*Math.asin(Oe),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(tn=Math.sin(Oe),Qe=Math.cos(Oe)),this.mode){case this.EQUIT:Oe=Math.abs(en)<=EPSLN?0:Math.asin(t*tn/en),e*=tn,t=Qe*en;break;case this.OBLIQ:Oe=Math.abs(en)<=EPSLN?this.lat0:Math.asin(Qe*this.sinph0+t*tn*this.cosph0/en),e*=tn*this.cosph0,t=(Qe-Math.sin(Oe)*this.sinph0)*en;break;case this.N_POLE:t=-t,Oe=HALF_PI-Oe;break;case this.S_POLE:Oe-=HALF_PI;break}ke=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(Ze=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,Ve=Math.sqrt(e*e+t*t),Ve<EPSLN)return r.x=this.long0,r.y=this.lat0,r;Be=2*Math.asin(.5*Ve/this.rq),Ge=Math.cos(Be),e*=Be=Math.sin(Be),this.mode===this.OBLIQ?(Ze=Ge*this.sinb1+t*Be*this.cosb1/Ve,je=this.qp*Ze,t=Ve*this.cosb1*Ge-t*this.sinb1*Be):(Ze=t*Be/Ve,je=this.qp*Ze,t=Ve*Ge)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),je=e*e+t*t,!je)return r.x=this.long0,r.y=this.lat0,r;Ze=1-je/this.qp,this.mode===this.S_POLE&&(Ze=-Ze)}ke=Math.atan2(e,t),Oe=authlat(Math.asin(Ze),this.apa)}return r.x=adjust_lon(this.long0+ke),r.y=Oe,r}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(r){var e,t=[];return t[0]=r*P00,e=r*r,t[0]+=e*P01,t[1]=e*P10,e*=r,t[0]+=e*P02,t[1]+=e*P11,t[2]=e*P20,t}function authlat(r,e){var t=r+r;return r+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var names$k=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$k,forward:forward$j,inverse:inverse$j,names:names$k,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(r){return Math.abs(r)>1&&(r=r>1?1:-1),Math.asin(r)}function init$j(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(r){var e=r.x,t=r.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var ke=qsfnz(this.e3,this.sin_phi),Oe=this.a*Math.sqrt(this.c-this.ns0*ke)/this.ns0,Ge=this.ns0*adjust_lon(e-this.long0),Be=Oe*Math.sin(Ge)+this.x0,je=this.rh-Oe*Math.cos(Ge)+this.y0;return r.x=Be,r.y=je,r}function inverse$i(r){var e,t,ke,Oe,Ge,Be;return r.x-=this.x0,r.y=this.rh-r.y+this.y0,this.ns0>=0?(e=Math.sqrt(r.x*r.x+r.y*r.y),ke=1):(e=-Math.sqrt(r.x*r.x+r.y*r.y),ke=-1),Oe=0,e!==0&&(Oe=Math.atan2(ke*r.x,ke*r.y)),ke=e*this.ns0/this.a,this.sphere?Be=Math.asin((this.c-ke*ke)/(2*this.ns0)):(t=(this.c-ke*ke)/this.ns0,Be=this.phi1z(this.e3,t)),Ge=adjust_lon(Oe/this.ns0+this.long0),r.x=Ge,r.y=Be,r}function phi1z(r,e){var t,ke,Oe,Ge,Be,je=asinz(.5*e);if(r<EPSLN)return je;for(var Ve=r*r,Ze=1;Ze<=25;Ze++)if(t=Math.sin(je),ke=Math.cos(je),Oe=r*t,Ge=1-Oe*Oe,Be=.5*Ge*Ge/ke*(e/(1-Ve)-t/Ge+.5/r*Math.log((1-Oe)/(1+Oe))),je=je+Be,Math.abs(Be)<=1e-7)return je;return null}var names$j=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$j,forward:forward$i,inverse:inverse$i,names:names$j,phi1z};function init$i(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(r){var e,t,ke,Oe,Ge,Be,je,Ve,Ze=r.x,Qe=r.y;return ke=adjust_lon(Ze-this.long0),e=Math.sin(Qe),t=Math.cos(Qe),Oe=Math.cos(ke),Be=this.sin_p14*e+this.cos_p14*t*Oe,Ge=1,Be>0||Math.abs(Be)<=EPSLN?(je=this.x0+this.a*Ge*t*Math.sin(ke)/Be,Ve=this.y0+this.a*Ge*(this.cos_p14*e-this.sin_p14*t*Oe)/Be):(je=this.x0+this.infinity_dist*t*Math.sin(ke),Ve=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*Oe)),r.x=je,r.y=Ve,r}function inverse$h(r){var e,t,ke,Oe,Ge,Be;return r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,r.x/=this.k0,r.y/=this.k0,(e=Math.sqrt(r.x*r.x+r.y*r.y))?(Oe=Math.atan2(e,this.rc),t=Math.sin(Oe),ke=Math.cos(Oe),Be=asinz(ke*this.sin_p14+r.y*t*this.cos_p14/e),Ge=Math.atan2(r.x*t,e*this.cos_p14*ke-r.y*this.sin_p14*t),Ge=adjust_lon(this.long0+Ge)):(Be=this.phic0,Ge=0),r.x=Ge,r.y=Be,r}var names$i=["gnom"];const gnom={init:init$i,forward:forward$h,inverse:inverse$h,names:names$i};function iqsfnz(r,e){var t=1-(1-r*r)/(2*r)*Math.log((1-r)/(1+r));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var ke=Math.asin(.5*e),Oe,Ge,Be,je,Ve=0;Ve<30;Ve++)if(Ge=Math.sin(ke),Be=Math.cos(ke),je=r*Ge,Oe=Math.pow(1-je*je,2)/(2*Be)*(e/(1-r*r)-Ge/(1-je*je)+.5/r*Math.log((1-je)/(1+je))),ke+=Oe,Math.abs(Oe)<=1e-10)return ke;return NaN}function init$h(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(r){var e=r.x,t=r.y,ke,Oe,Ge=adjust_lon(e-this.long0);if(this.sphere)ke=this.x0+this.a*Ge*Math.cos(this.lat_ts),Oe=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var Be=qsfnz(this.e,Math.sin(t));ke=this.x0+this.a*this.k0*Ge,Oe=this.y0+this.a*Be*.5/this.k0}return r.x=ke,r.y=Oe,r}function inverse$g(r){r.x-=this.x0,r.y-=this.y0;var e,t;return this.sphere?(e=adjust_lon(this.long0+r.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(r.y/this.a*Math.cos(this.lat_ts))):(t=iqsfnz(this.e,2*r.y*this.k0/this.a),e=adjust_lon(this.long0+r.x/(this.a*this.k0))),r.x=e,r.y=t,r}var names$h=["cea"];const cea={init:init$h,forward:forward$g,inverse:inverse$g,names:names$h};function init$g(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(r){var e=r.x,t=r.y,ke=adjust_lon(e-this.long0),Oe=adjust_lat(t-this.lat0);return r.x=this.x0+this.a*ke*this.rc,r.y=this.y0+this.a*Oe,r}function inverse$f(r){var e=r.x,t=r.y;return r.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),r.y=adjust_lat(this.lat0+(t-this.y0)/this.a),r}var names$g=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$g,forward:forward$f,inverse:inverse$f,names:names$g};var MAX_ITER$1=20;function init$f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(r){var e=r.x,t=r.y,ke,Oe,Ge,Be=adjust_lon(e-this.long0);if(Ge=Be*Math.sin(t),this.sphere)Math.abs(t)<=EPSLN?(ke=this.a*Be,Oe=-1*this.a*this.lat0):(ke=this.a*Math.sin(Ge)/Math.tan(t),Oe=this.a*(adjust_lat(t-this.lat0)+(1-Math.cos(Ge))/Math.tan(t)));else if(Math.abs(t)<=EPSLN)ke=this.a*Be,Oe=-1*this.ml0;else{var je=gN(this.a,this.e,Math.sin(t))/Math.tan(t);ke=je*Math.sin(Ge),Oe=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+je*(1-Math.cos(Ge))}return r.x=ke+this.x0,r.y=Oe+this.y0,r}function inverse$e(r){var e,t,ke,Oe,Ge,Be,je,Ve,Ze;if(ke=r.x-this.x0,Oe=r.y-this.y0,this.sphere)if(Math.abs(Oe+this.a*this.lat0)<=EPSLN)e=adjust_lon(ke/this.a+this.long0),t=0;else{Be=this.lat0+Oe/this.a,je=ke*ke/this.a/this.a+Be*Be,Ve=Be;var Qe;for(Ge=MAX_ITER$1;Ge;--Ge)if(Qe=Math.tan(Ve),Ze=-1*(Be*(Ve*Qe+1)-Ve-.5*(Ve*Ve+je)*Qe)/((Ve-Be)/Qe-1),Ve+=Ze,Math.abs(Ze)<=EPSLN){t=Ve;break}e=adjust_lon(this.long0+Math.asin(ke*Math.tan(Ve)/this.a)/Math.sin(t))}else if(Math.abs(Oe+this.ml0)<=EPSLN)t=0,e=adjust_lon(this.long0+ke/this.a);else{Be=(this.ml0+Oe)/this.a,je=ke*ke/this.a/this.a+Be*Be,Ve=Be;var en,tn,an,cn,dn;for(Ge=MAX_ITER$1;Ge;--Ge)if(dn=this.e*Math.sin(Ve),en=Math.sqrt(1-dn*dn)*Math.tan(Ve),tn=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,Ve),an=this.e0-2*this.e1*Math.cos(2*Ve)+4*this.e2*Math.cos(4*Ve)-6*this.e3*Math.cos(6*Ve),cn=tn/this.a,Ze=(Be*(en*cn+1)-cn-.5*en*(cn*cn+je))/(this.es*Math.sin(2*Ve)*(cn*cn+je-2*Be*cn)/(4*en)+(Be-cn)*(en*an-2/Math.sin(2*Ve))-an),Ve-=Ze,Math.abs(Ze)<=EPSLN){t=Ve;break}en=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=adjust_lon(this.long0+Math.asin(ke*en/this.a)/Math.sin(t))}return r.x=e,r.y=t,r}var names$f=["Polyconic","poly"];const poly={init:init$f,forward:forward$e,inverse:inverse$e,names:names$f};function init$e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(r){var e,t=r.x,ke=r.y,Oe=ke-this.lat0,Ge=t-this.long0,Be=Oe/SEC_TO_RAD*1e-5,je=Ge,Ve=1,Ze=0;for(e=1;e<=10;e++)Ve=Ve*Be,Ze=Ze+this.A[e]*Ve;var Qe=Ze,en=je,tn=1,an=0,cn,dn,hn=0,fn=0;for(e=1;e<=6;e++)cn=tn*Qe-an*en,dn=an*Qe+tn*en,tn=cn,an=dn,hn=hn+this.B_re[e]*tn-this.B_im[e]*an,fn=fn+this.B_im[e]*tn+this.B_re[e]*an;return r.x=fn*this.a+this.x0,r.y=hn*this.a+this.y0,r}function inverse$d(r){var e,t=r.x,ke=r.y,Oe=t-this.x0,Ge=ke-this.y0,Be=Ge/this.a,je=Oe/this.a,Ve=1,Ze=0,Qe,en,tn=0,an=0;for(e=1;e<=6;e++)Qe=Ve*Be-Ze*je,en=Ze*Be+Ve*je,Ve=Qe,Ze=en,tn=tn+this.C_re[e]*Ve-this.C_im[e]*Ze,an=an+this.C_im[e]*Ve+this.C_re[e]*Ze;for(var cn=0;cn<this.iterations;cn++){var dn=tn,hn=an,fn,pn,mn=Be,yn=je;for(e=2;e<=6;e++)fn=dn*tn-hn*an,pn=hn*tn+dn*an,dn=fn,hn=pn,mn=mn+(e-1)*(this.B_re[e]*dn-this.B_im[e]*hn),yn=yn+(e-1)*(this.B_im[e]*dn+this.B_re[e]*hn);dn=1,hn=0;var Cn=this.B_re[1],wn=this.B_im[1];for(e=2;e<=6;e++)fn=dn*tn-hn*an,pn=hn*tn+dn*an,dn=fn,hn=pn,Cn=Cn+e*(this.B_re[e]*dn-this.B_im[e]*hn),wn=wn+e*(this.B_im[e]*dn+this.B_re[e]*hn);var bn=Cn*Cn+wn*wn;tn=(mn*Cn+yn*wn)/bn,an=(yn*Cn-mn*wn)/bn}var Sn=tn,Mn=an,Tn=1,En=0;for(e=1;e<=9;e++)Tn=Tn*Sn,En=En+this.D[e]*Tn;var An=this.lat0+En*SEC_TO_RAD*1e5,Ln=this.long0+Mn;return r.x=Ln,r.y=An,r}var names$e=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$e,forward:forward$d,inverse:inverse$d,names:names$e};function init$d(){}function forward$c(r){var e=r.x,t=r.y,ke=adjust_lon(e-this.long0),Oe=this.x0+this.a*ke,Ge=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return r.x=Oe,r.y=Ge,r}function inverse$c(r){r.x-=this.x0,r.y-=this.y0;var e=adjust_lon(this.long0+r.x/this.a),t=2.5*(Math.atan(Math.exp(.8*r.y/this.a))-Math.PI/4);return r.x=e,r.y=t,r}var names$d=["Miller_Cylindrical","mill"];const mill={init:init$d,forward:forward$c,inverse:inverse$c,names:names$d};var MAX_ITER=20;function init$c(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(r){var e,t,ke=r.x,Oe=r.y;if(ke=adjust_lon(ke-this.long0),this.sphere){if(!this.m)Oe=this.n!==1?Math.asin(this.n*Math.sin(Oe)):Oe;else for(var Ge=this.n*Math.sin(Oe),Be=MAX_ITER;Be;--Be){var je=(this.m*Oe+Math.sin(Oe)-Ge)/(this.m+Math.cos(Oe));if(Oe-=je,Math.abs(je)<EPSLN)break}e=this.a*this.C_x*ke*(this.m+Math.cos(Oe)),t=this.a*this.C_y*Oe}else{var Ve=Math.sin(Oe),Ze=Math.cos(Oe);t=this.a*pj_mlfn(Oe,Ve,Ze,this.en),e=this.a*ke*Ze/Math.sqrt(1-this.es*Ve*Ve)}return r.x=e,r.y=t,r}function inverse$b(r){var e,t,ke,Oe;return r.x-=this.x0,ke=r.x/this.a,r.y-=this.y0,e=r.y/this.a,this.sphere?(e/=this.C_y,ke=ke/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),ke=adjust_lon(ke+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(r.y/this.a,this.es,this.en),Oe=Math.abs(e),Oe<HALF_PI?(Oe=Math.sin(e),t=this.long0+r.x*Math.sqrt(1-this.es*Oe*Oe)/(this.a*Math.cos(e)),ke=adjust_lon(t)):Oe-EPSLN<HALF_PI&&(ke=this.long0)),r.x=ke,r.y=e,r}var names$c=["Sinusoidal","sinu"];const sinu={init:init$c,forward:forward$b,inverse:inverse$b,names:names$c};function init$b(){}function forward$a(r){for(var e=r.x,t=r.y,ke=adjust_lon(e-this.long0),Oe=t,Ge=Math.PI*Math.sin(t);;){var Be=-(Oe+Math.sin(Oe)-Ge)/(1+Math.cos(Oe));if(Oe+=Be,Math.abs(Be)<EPSLN)break}Oe/=2,Math.PI/2-Math.abs(t)<EPSLN&&(ke=0);var je=.900316316158*this.a*ke*Math.cos(Oe)+this.x0,Ve=1.4142135623731*this.a*Math.sin(Oe)+this.y0;return r.x=je,r.y=Ve,r}function inverse$a(r){var e,t;r.x-=this.x0,r.y-=this.y0,t=r.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var ke=adjust_lon(this.long0+r.x/(.900316316158*this.a*Math.cos(e)));ke<-Math.PI&&(ke=-Math.PI),ke>Math.PI&&(ke=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var Oe=Math.asin(t);return r.x=ke,r.y=Oe,r}var names$b=["Mollweide","moll"];const moll={init:init$b,forward:forward$a,inverse:inverse$a,names:names$b};function init$a(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(r){var e=r.x,t=r.y,ke;if(this.sphere)ke=this.a*(this.g-t);else{var Oe=mlfn(this.e0,this.e1,this.e2,this.e3,t);ke=this.a*(this.g-Oe)}var Ge=this.ns*adjust_lon(e-this.long0),Be=this.x0+ke*Math.sin(Ge),je=this.y0+this.rh-ke*Math.cos(Ge);return r.x=Be,r.y=je,r}function inverse$9(r){r.x-=this.x0,r.y=this.rh-r.y+this.y0;var e,t,ke,Oe;this.ns>=0?(t=Math.sqrt(r.x*r.x+r.y*r.y),e=1):(t=-Math.sqrt(r.x*r.x+r.y*r.y),e=-1);var Ge=0;if(t!==0&&(Ge=Math.atan2(e*r.x,e*r.y)),this.sphere)return Oe=adjust_lon(this.long0+Ge/this.ns),ke=adjust_lat(this.g-t/this.a),r.x=Oe,r.y=ke,r;var Be=this.g-t/this.a;return ke=imlfn(Be,this.e0,this.e1,this.e2,this.e3),Oe=adjust_lon(this.long0+Ge/this.ns),r.x=Oe,r.y=ke,r}var names$a=["Equidistant_Conic","eqdc"];const eqdc={init:init$a,forward:forward$9,inverse:inverse$9,names:names$a};function init$9(){this.R=this.a}function forward$8(r){var e=r.x,t=r.y,ke=adjust_lon(e-this.long0),Oe,Ge;Math.abs(t)<=EPSLN&&(Oe=this.x0+this.R*ke,Ge=this.y0);var Be=asinz(2*Math.abs(t/Math.PI));(Math.abs(ke)<=EPSLN||Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)&&(Oe=this.x0,t>=0?Ge=this.y0+Math.PI*this.R*Math.tan(.5*Be):Ge=this.y0+Math.PI*this.R*-Math.tan(.5*Be));var je=.5*Math.abs(Math.PI/ke-ke/Math.PI),Ve=je*je,Ze=Math.sin(Be),Qe=Math.cos(Be),en=Qe/(Ze+Qe-1),tn=en*en,an=en*(2/Ze-1),cn=an*an,dn=Math.PI*this.R*(je*(en-cn)+Math.sqrt(Ve*(en-cn)*(en-cn)-(cn+Ve)*(tn-cn)))/(cn+Ve);ke<0&&(dn=-dn),Oe=this.x0+dn;var hn=Ve+en;return dn=Math.PI*this.R*(an*hn-je*Math.sqrt((cn+Ve)*(Ve+1)-hn*hn))/(cn+Ve),t>=0?Ge=this.y0+dn:Ge=this.y0-dn,r.x=Oe,r.y=Ge,r}function inverse$8(r){var e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an;return r.x-=this.x0,r.y-=this.y0,en=Math.PI*this.R,ke=r.x/en,Oe=r.y/en,Ge=ke*ke+Oe*Oe,Be=-Math.abs(Oe)*(1+Ge),je=Be-2*Oe*Oe+ke*ke,Ve=-2*Be+1+2*Oe*Oe+Ge*Ge,an=Oe*Oe/Ve+(2*je*je*je/Ve/Ve/Ve-9*Be*je/Ve/Ve)/27,Ze=(Be-je*je/3/Ve)/Ve,Qe=2*Math.sqrt(-Ze/3),en=3*an/Ze/Qe,Math.abs(en)>1&&(en>=0?en=1:en=-1),tn=Math.acos(en)/3,r.y>=0?t=(-Qe*Math.cos(tn+Math.PI/3)-je/3/Ve)*Math.PI:t=-(-Qe*Math.cos(tn+Math.PI/3)-je/3/Ve)*Math.PI,Math.abs(ke)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(Ge-1+Math.sqrt(1+2*(ke*ke-Oe*Oe)+Ge*Ge))/2/ke),r.x=e,r.y=t,r}var names$9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$9,forward:forward$8,inverse:inverse$8,names:names$9};function init$8(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(r){var e=r.x,t=r.y,ke=Math.sin(r.y),Oe=Math.cos(r.y),Ge=adjust_lon(e-this.long0),Be,je,Ve,Ze,Qe,en,tn,an,cn,dn,hn,fn,pn,mn,yn,Cn,wn,bn,Sn,Mn,Tn,En,An;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(r.x=this.x0+this.a*(HALF_PI-t)*Math.sin(Ge),r.y=this.y0-this.a*(HALF_PI-t)*Math.cos(Ge),r):Math.abs(this.sin_p12+1)<=EPSLN?(r.x=this.x0+this.a*(HALF_PI+t)*Math.sin(Ge),r.y=this.y0+this.a*(HALF_PI+t)*Math.cos(Ge),r):(bn=this.sin_p12*ke+this.cos_p12*Oe*Math.cos(Ge),Cn=Math.acos(bn),wn=Cn?Cn/Math.sin(Cn):1,r.x=this.x0+this.a*wn*Oe*Math.sin(Ge),r.y=this.y0+this.a*wn*(this.cos_p12*ke-this.sin_p12*Oe*Math.cos(Ge)),r):(Be=e0fn(this.es),je=e1fn(this.es),Ve=e2fn(this.es),Ze=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(Qe=this.a*mlfn(Be,je,Ve,Ze,HALF_PI),en=this.a*mlfn(Be,je,Ve,Ze,t),r.x=this.x0+(Qe-en)*Math.sin(Ge),r.y=this.y0-(Qe-en)*Math.cos(Ge),r):Math.abs(this.sin_p12+1)<=EPSLN?(Qe=this.a*mlfn(Be,je,Ve,Ze,HALF_PI),en=this.a*mlfn(Be,je,Ve,Ze,t),r.x=this.x0+(Qe+en)*Math.sin(Ge),r.y=this.y0+(Qe+en)*Math.cos(Ge),r):(tn=ke/Oe,an=gN(this.a,this.e,this.sin_p12),cn=gN(this.a,this.e,ke),dn=Math.atan((1-this.es)*tn+this.es*an*this.sin_p12/(cn*Oe)),hn=Math.atan2(Math.sin(Ge),this.cos_p12*Math.tan(dn)-this.sin_p12*Math.cos(Ge)),hn===0?Sn=Math.asin(this.cos_p12*Math.sin(dn)-this.sin_p12*Math.cos(dn)):Math.abs(Math.abs(hn)-Math.PI)<=EPSLN?Sn=-Math.asin(this.cos_p12*Math.sin(dn)-this.sin_p12*Math.cos(dn)):Sn=Math.asin(Math.sin(Ge)*Math.cos(dn)/Math.sin(hn)),fn=this.e*this.sin_p12/Math.sqrt(1-this.es),pn=this.e*this.cos_p12*Math.cos(hn)/Math.sqrt(1-this.es),mn=fn*pn,yn=pn*pn,Mn=Sn*Sn,Tn=Mn*Sn,En=Tn*Sn,An=En*Sn,Cn=an*Sn*(1-Mn*yn*(1-yn)/6+Tn/8*mn*(1-2*yn)+En/120*(yn*(4-7*yn)-3*fn*fn*(1-7*yn))-An/48*mn),r.x=this.x0+Cn*Math.sin(hn),r.y=this.y0+Cn*Math.cos(hn),r))}function inverse$7(r){r.x-=this.x0,r.y-=this.y0;var e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,dn,hn,fn,pn,mn,yn,Cn,wn,bn,Sn;return this.sphere?(e=Math.sqrt(r.x*r.x+r.y*r.y),e>2*HALF_PI*this.a?void 0:(t=e/this.a,ke=Math.sin(t),Oe=Math.cos(t),Ge=this.long0,Math.abs(e)<=EPSLN?Be=this.lat0:(Be=asinz(Oe*this.sin_p12+r.y*ke*this.cos_p12/e),je=Math.abs(this.lat0)-HALF_PI,Math.abs(je)<=EPSLN?this.lat0>=0?Ge=adjust_lon(this.long0+Math.atan2(r.x,-r.y)):Ge=adjust_lon(this.long0-Math.atan2(-r.x,r.y)):Ge=adjust_lon(this.long0+Math.atan2(r.x*ke,e*this.cos_p12*Oe-r.y*this.sin_p12*ke))),r.x=Ge,r.y=Be,r)):(Ve=e0fn(this.es),Ze=e1fn(this.es),Qe=e2fn(this.es),en=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(tn=this.a*mlfn(Ve,Ze,Qe,en,HALF_PI),e=Math.sqrt(r.x*r.x+r.y*r.y),an=tn-e,Be=imlfn(an/this.a,Ve,Ze,Qe,en),Ge=adjust_lon(this.long0+Math.atan2(r.x,-1*r.y)),r.x=Ge,r.y=Be,r):Math.abs(this.sin_p12+1)<=EPSLN?(tn=this.a*mlfn(Ve,Ze,Qe,en,HALF_PI),e=Math.sqrt(r.x*r.x+r.y*r.y),an=e-tn,Be=imlfn(an/this.a,Ve,Ze,Qe,en),Ge=adjust_lon(this.long0+Math.atan2(r.x,r.y)),r.x=Ge,r.y=Be,r):(e=Math.sqrt(r.x*r.x+r.y*r.y),hn=Math.atan2(r.x,r.y),cn=gN(this.a,this.e,this.sin_p12),fn=Math.cos(hn),pn=this.e*this.cos_p12*fn,mn=-pn*pn/(1-this.es),yn=3*this.es*(1-mn)*this.sin_p12*this.cos_p12*fn/(1-this.es),Cn=e/cn,wn=Cn-mn*(1+mn)*Math.pow(Cn,3)/6-yn*(1+3*mn)*Math.pow(Cn,4)/24,bn=1-mn*wn*wn/2-Cn*wn*wn*wn/6,dn=Math.asin(this.sin_p12*Math.cos(wn)+this.cos_p12*Math.sin(wn)*fn),Ge=adjust_lon(this.long0+Math.asin(Math.sin(hn)*Math.sin(wn)/Math.cos(dn))),Sn=Math.sin(dn),Be=Math.atan2((Sn-this.es*bn*this.sin_p12)*Math.tan(dn),Sn*(1-this.es)),r.x=Ge,r.y=Be,r))}var names$8=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$8,forward:forward$7,inverse:inverse$7,names:names$8};function init$7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(r){var e,t,ke,Oe,Ge,Be,je,Ve,Ze=r.x,Qe=r.y;return ke=adjust_lon(Ze-this.long0),e=Math.sin(Qe),t=Math.cos(Qe),Oe=Math.cos(ke),Be=this.sin_p14*e+this.cos_p14*t*Oe,Ge=1,(Be>0||Math.abs(Be)<=EPSLN)&&(je=this.a*Ge*t*Math.sin(ke),Ve=this.y0+this.a*Ge*(this.cos_p14*e-this.sin_p14*t*Oe)),r.x=je,r.y=Ve,r}function inverse$6(r){var e,t,ke,Oe,Ge,Be,je;return r.x-=this.x0,r.y-=this.y0,e=Math.sqrt(r.x*r.x+r.y*r.y),t=asinz(e/this.a),ke=Math.sin(t),Oe=Math.cos(t),Be=this.long0,Math.abs(e)<=EPSLN?(je=this.lat0,r.x=Be,r.y=je,r):(je=asinz(Oe*this.sin_p14+r.y*ke*this.cos_p14/e),Ge=Math.abs(this.lat0)-HALF_PI,Math.abs(Ge)<=EPSLN?(this.lat0>=0?Be=adjust_lon(this.long0+Math.atan2(r.x,-r.y)):Be=adjust_lon(this.long0-Math.atan2(-r.x,r.y)),r.x=Be,r.y=je,r):(Be=adjust_lon(this.long0+Math.atan2(r.x*ke,e*this.cos_p14*Oe-r.y*this.sin_p14*ke)),r.x=Be,r.y=je,r))}var names$7=["ortho"];const ortho={init:init$7,forward:forward$6,inverse:inverse$6,names:names$7};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(r){var e={x:0,y:0},t,ke,Oe,Ge,Be,je,Ve={value:0};if(r.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(r.y)):t=r.y,ke=r.x,this.face===FACE_ENUM.TOP)Ge=HALF_PI-t,ke>=FORTPI&&ke<=HALF_PI+FORTPI?(Ve.value=AREA_ENUM.AREA_0,Oe=ke-HALF_PI):ke>HALF_PI+FORTPI||ke<=-(HALF_PI+FORTPI)?(Ve.value=AREA_ENUM.AREA_1,Oe=ke>0?ke-SPI:ke+SPI):ke>-(HALF_PI+FORTPI)&&ke<=-FORTPI?(Ve.value=AREA_ENUM.AREA_2,Oe=ke+HALF_PI):(Ve.value=AREA_ENUM.AREA_3,Oe=ke);else if(this.face===FACE_ENUM.BOTTOM)Ge=HALF_PI+t,ke>=FORTPI&&ke<=HALF_PI+FORTPI?(Ve.value=AREA_ENUM.AREA_0,Oe=-ke+HALF_PI):ke<FORTPI&&ke>=-FORTPI?(Ve.value=AREA_ENUM.AREA_1,Oe=-ke):ke<-FORTPI&&ke>=-(HALF_PI+FORTPI)?(Ve.value=AREA_ENUM.AREA_2,Oe=-ke-HALF_PI):(Ve.value=AREA_ENUM.AREA_3,Oe=ke>0?-ke+SPI:-ke-SPI);else{var Ze,Qe,en,tn,an,cn,dn;this.face===FACE_ENUM.RIGHT?ke=qsc_shift_lon_origin(ke,+HALF_PI):this.face===FACE_ENUM.BACK?ke=qsc_shift_lon_origin(ke,+SPI):this.face===FACE_ENUM.LEFT&&(ke=qsc_shift_lon_origin(ke,-HALF_PI)),tn=Math.sin(t),an=Math.cos(t),cn=Math.sin(ke),dn=Math.cos(ke),Ze=an*dn,Qe=an*cn,en=tn,this.face===FACE_ENUM.FRONT?(Ge=Math.acos(Ze),Oe=qsc_fwd_equat_face_theta(Ge,en,Qe,Ve)):this.face===FACE_ENUM.RIGHT?(Ge=Math.acos(Qe),Oe=qsc_fwd_equat_face_theta(Ge,en,-Ze,Ve)):this.face===FACE_ENUM.BACK?(Ge=Math.acos(-Ze),Oe=qsc_fwd_equat_face_theta(Ge,en,-Qe,Ve)):this.face===FACE_ENUM.LEFT?(Ge=Math.acos(-Qe),Oe=qsc_fwd_equat_face_theta(Ge,en,Ze,Ve)):(Ge=Oe=0,Ve.value=AREA_ENUM.AREA_0)}return je=Math.atan(12/SPI*(Oe+Math.acos(Math.sin(Oe)*Math.cos(FORTPI))-HALF_PI)),Be=Math.sqrt((1-Math.cos(Ge))/(Math.cos(je)*Math.cos(je))/(1-Math.cos(Math.atan(1/Math.cos(Oe))))),Ve.value===AREA_ENUM.AREA_1?je+=HALF_PI:Ve.value===AREA_ENUM.AREA_2?je+=SPI:Ve.value===AREA_ENUM.AREA_3&&(je+=1.5*SPI),e.x=Be*Math.cos(je),e.y=Be*Math.sin(je),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,r.x=e.x,r.y=e.y,r}function inverse$5(r){var e={lam:0,phi:0},t,ke,Oe,Ge,Be,je,Ve,Ze,Qe,en={value:0};if(r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a,ke=Math.atan(Math.sqrt(r.x*r.x+r.y*r.y)),t=Math.atan2(r.y,r.x),r.x>=0&&r.x>=Math.abs(r.y)?en.value=AREA_ENUM.AREA_0:r.y>=0&&r.y>=Math.abs(r.x)?(en.value=AREA_ENUM.AREA_1,t-=HALF_PI):r.x<0&&-r.x>=Math.abs(r.y)?(en.value=AREA_ENUM.AREA_2,t=t<0?t+SPI:t-SPI):(en.value=AREA_ENUM.AREA_3,t+=HALF_PI),Qe=SPI/12*Math.tan(t),Be=Math.sin(Qe)/(Math.cos(Qe)-1/Math.sqrt(2)),je=Math.atan(Be),Oe=Math.cos(t),Ge=Math.tan(ke),Ve=1-Oe*Oe*Ge*Ge*(1-Math.cos(Math.atan(1/Math.cos(je)))),Ve<-1?Ve=-1:Ve>1&&(Ve=1),this.face===FACE_ENUM.TOP)Ze=Math.acos(Ve),e.phi=HALF_PI-Ze,en.value===AREA_ENUM.AREA_0?e.lam=je+HALF_PI:en.value===AREA_ENUM.AREA_1?e.lam=je<0?je+SPI:je-SPI:en.value===AREA_ENUM.AREA_2?e.lam=je-HALF_PI:e.lam=je;else if(this.face===FACE_ENUM.BOTTOM)Ze=Math.acos(Ve),e.phi=Ze-HALF_PI,en.value===AREA_ENUM.AREA_0?e.lam=-je+HALF_PI:en.value===AREA_ENUM.AREA_1?e.lam=-je:en.value===AREA_ENUM.AREA_2?e.lam=-je-HALF_PI:e.lam=je<0?-je-SPI:-je+SPI;else{var tn,an,cn;tn=Ve,Qe=tn*tn,Qe>=1?cn=0:cn=Math.sqrt(1-Qe)*Math.sin(je),Qe+=cn*cn,Qe>=1?an=0:an=Math.sqrt(1-Qe),en.value===AREA_ENUM.AREA_1?(Qe=an,an=-cn,cn=Qe):en.value===AREA_ENUM.AREA_2?(an=-an,cn=-cn):en.value===AREA_ENUM.AREA_3&&(Qe=an,an=cn,cn=-Qe),this.face===FACE_ENUM.RIGHT?(Qe=tn,tn=-an,an=Qe):this.face===FACE_ENUM.BACK?(tn=-tn,an=-an):this.face===FACE_ENUM.LEFT&&(Qe=tn,tn=an,an=-Qe),e.phi=Math.acos(-cn)-HALF_PI,e.lam=Math.atan2(an,tn),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-SPI):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var dn,hn,fn;dn=e.phi<0?1:0,hn=Math.tan(e.phi),fn=this.b/Math.sqrt(hn*hn+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-fn*fn)/(this.one_minus_f*fn)),dn&&(e.phi=-e.phi)}return e.lam+=this.long0,r.x=e.lam,r.y=e.phi,r}function qsc_fwd_equat_face_theta(r,e,t,ke){var Oe;return r<EPSLN?(ke.value=AREA_ENUM.AREA_0,Oe=0):(Oe=Math.atan2(e,t),Math.abs(Oe)<=FORTPI?ke.value=AREA_ENUM.AREA_0:Oe>FORTPI&&Oe<=HALF_PI+FORTPI?(ke.value=AREA_ENUM.AREA_1,Oe-=HALF_PI):Oe>HALF_PI+FORTPI||Oe<=-(HALF_PI+FORTPI)?(ke.value=AREA_ENUM.AREA_2,Oe=Oe>=0?Oe-SPI:Oe+SPI):(ke.value=AREA_ENUM.AREA_3,Oe+=HALF_PI)),Oe}function qsc_shift_lon_origin(r,e){var t=r+e;return t<-SPI?t+=TWO_PI:t>+SPI&&(t-=TWO_PI),t}var names$6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$6,forward:forward$5,inverse:inverse$5,names:names$6};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(r,e){return r[0]+e*(r[1]+e*(r[2]+e*r[3]))},poly3_der=function(r,e){return r[1]+e*(2*r[2]+e*3*r[3])};function newton_rapshon(r,e,t,ke){for(var Oe=e;ke;--ke){var Ge=r(Oe);if(Oe-=Ge,Math.abs(Ge)<t)break}return Oe}function init$5(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(r){var e=adjust_lon(r.x-this.long0),t=Math.abs(r.y),ke=Math.floor(t*C1);ke<0?ke=0:ke>=NODES&&(ke=NODES-1),t=R2D*(t-RC1*ke);var Oe={x:poly3_val(COEFS_X[ke],t)*e,y:poly3_val(COEFS_Y[ke],t)};return r.y<0&&(Oe.y=-Oe.y),Oe.x=Oe.x*this.a*FXC+this.x0,Oe.y=Oe.y*this.a*FYC+this.y0,Oe}function inverse$4(r){var e={x:(r.x-this.x0)/(this.a*FXC),y:Math.abs(r.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=r.y<0?-HALF_PI:HALF_PI;else{var t=Math.floor(e.y*NODES);for(t<0?t=0:t>=NODES&&(t=NODES-1);;)if(COEFS_Y[t][0]>e.y)--t;else if(COEFS_Y[t+1][0]<=e.y)++t;else break;var ke=COEFS_Y[t],Oe=5*(e.y-ke[0])/(COEFS_Y[t+1][0]-ke[0]);Oe=newton_rapshon(function(Ge){return(poly3_val(ke,Ge)-e.y)/poly3_der(ke,Ge)},Oe,EPSLN,100),e.x/=poly3_val(COEFS_X[t],Oe),e.y=(5*t+Oe)*D2R$1,r.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$5=["Robinson","robin"];const robin={init:init$5,forward:forward$4,inverse:inverse$4,names:names$5};function init$4(){this.name="geocent"}function forward$3(r){var e=geodeticToGeocentric(r,this.es,this.a);return e}function inverse$3(r){var e=geocentricToGeodetic(r,this.es,this.a,this.b);return e}var names$4=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$4,forward:forward$3,inverse:inverse$3,names:names$4};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$3(){if(Object.keys(params).forEach((function(t){if(typeof this[t]>"u")this[t]=params[t].def;else{if(params[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);params[t].num&&(this[t]=parseFloat(this[t]))}params[t].degrees&&(this[t]=this[t]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var r=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(r),this.sw=Math.sin(r)}function forward$2(r){r.x-=this.long0;var e=Math.sin(r.y),t=Math.cos(r.y),ke=Math.cos(r.x),Oe,Ge;switch(this.mode){case mode.OBLIQ:Ge=this.sinph0*e+this.cosph0*t*ke;break;case mode.EQUIT:Ge=t*ke;break;case mode.S_POLE:Ge=-e;break;case mode.N_POLE:Ge=e;break}switch(Ge=this.pn1/(this.p-Ge),Oe=Ge*t*Math.sin(r.x),this.mode){case mode.OBLIQ:Ge*=this.cosph0*e-this.sinph0*t*ke;break;case mode.EQUIT:Ge*=e;break;case mode.N_POLE:Ge*=-(t*ke);break;case mode.S_POLE:Ge*=t*ke;break}var Be,je;return Be=Ge*this.cg+Oe*this.sg,je=1/(Be*this.sw*this.h1+this.cw),Oe=(Oe*this.cg-Ge*this.sg)*this.cw*je,Ge=Be*je,r.x=Oe*this.a,r.y=Ge*this.a,r}function inverse$2(r){r.x/=this.a,r.y/=this.a;var e={x:r.x,y:r.y},t,ke,Oe;Oe=1/(this.pn1-r.y*this.sw),t=this.pn1*r.x*Oe,ke=this.pn1*r.y*this.cw*Oe,r.x=t*this.cg+ke*this.sg,r.y=ke*this.cg-t*this.sg;var Ge=hypot(r.x,r.y);if(Math.abs(Ge)<EPSLN)e.x=0,e.y=r.y;else{var Be,je;switch(je=1-Ge*Ge*this.pfact,je=(this.p-Math.sqrt(je))/(this.pn1/Ge+Ge/this.pn1),Be=Math.sqrt(1-je*je),this.mode){case mode.OBLIQ:e.y=Math.asin(Be*this.sinph0+r.y*je*this.cosph0/Ge),r.y=(Be-this.sinph0*Math.sin(e.y))*Ge,r.x*=je*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(r.y*je/Ge),r.y=Be*Ge,r.x*=je;break;case mode.N_POLE:e.y=Math.asin(Be),r.y=-r.y;break;case mode.S_POLE:e.y=-Math.asin(Be);break}e.x=Math.atan2(r.x,r.y)}return r.x=e.x+this.long0,r.y=e.y,r}var names$3=["Tilted_Perspective","tpers"];const tpers={init:init$3,forward:forward$2,inverse:inverse$2,names:names$3};function init$2(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var r=1-this.es,e=1/r;this.radius_p=Math.sqrt(r),this.radius_p2=r,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(r){var e=r.x,t=r.y,ke,Oe,Ge,Be;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var je=this.radius_p/hypot(this.radius_p*Math.cos(t),Math.sin(t));if(Oe=je*Math.cos(e)*Math.cos(t),Ge=je*Math.sin(e)*Math.cos(t),Be=je*Math.sin(t),(this.radius_g-Oe)*Oe-Ge*Ge-Be*Be*this.radius_p_inv2<0)return r.x=Number.NaN,r.y=Number.NaN,r;ke=this.radius_g-Oe,this.flip_axis?(r.x=this.radius_g_1*Math.atan(Ge/hypot(Be,ke)),r.y=this.radius_g_1*Math.atan(Be/ke)):(r.x=this.radius_g_1*Math.atan(Ge/ke),r.y=this.radius_g_1*Math.atan(Be/hypot(Ge,ke)))}else this.shape==="sphere"&&(ke=Math.cos(t),Oe=Math.cos(e)*ke,Ge=Math.sin(e)*ke,Be=Math.sin(t),ke=this.radius_g-Oe,this.flip_axis?(r.x=this.radius_g_1*Math.atan(Ge/hypot(Be,ke)),r.y=this.radius_g_1*Math.atan(Be/ke)):(r.x=this.radius_g_1*Math.atan(Ge/ke),r.y=this.radius_g_1*Math.atan(Be/hypot(Ge,ke))));return r.x=r.x*this.a,r.y=r.y*this.a,r}function inverse$1(r){var e=-1,t=0,ke=0,Oe,Ge,Be,je;if(r.x=r.x/this.a,r.y=r.y/this.a,this.shape==="ellipse"){this.flip_axis?(ke=Math.tan(r.y/this.radius_g_1),t=Math.tan(r.x/this.radius_g_1)*hypot(1,ke)):(t=Math.tan(r.x/this.radius_g_1),ke=Math.tan(r.y/this.radius_g_1)*hypot(1,t));var Ve=ke/this.radius_p;if(Oe=t*t+Ve*Ve+e*e,Ge=2*this.radius_g*e,Be=Ge*Ge-4*Oe*this.C,Be<0)return r.x=Number.NaN,r.y=Number.NaN,r;je=(-Ge-Math.sqrt(Be))/(2*Oe),e=this.radius_g+je*e,t*=je,ke*=je,r.x=Math.atan2(t,e),r.y=Math.atan(ke*Math.cos(r.x)/e),r.y=Math.atan(this.radius_p_inv2*Math.tan(r.y))}else if(this.shape==="sphere"){if(this.flip_axis?(ke=Math.tan(r.y/this.radius_g_1),t=Math.tan(r.x/this.radius_g_1)*Math.sqrt(1+ke*ke)):(t=Math.tan(r.x/this.radius_g_1),ke=Math.tan(r.y/this.radius_g_1)*Math.sqrt(1+t*t)),Oe=t*t+ke*ke+e*e,Ge=2*this.radius_g*e,Be=Ge*Ge-4*Oe*this.C,Be<0)return r.x=Number.NaN,r.y=Number.NaN,r;je=(-Ge-Math.sqrt(Be))/(2*Oe),e=this.radius_g+je*e,t*=je,ke*=je,r.x=Math.atan2(t,e),r.y=Math.atan(ke*Math.cos(r.x)/e)}return r.x=r.x+this.long0,r}var names$2=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$2,forward:forward$1,inverse:inverse$1,names:names$2};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M$1=Math.sqrt(3)/2;function init$1(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(r){var e=adjust_lon(r.x-this.long0),t=r.y,ke=Math.asin(M$1*Math.sin(t)),Oe=ke*ke,Ge=Oe*Oe*Oe;return r.x=e*Math.cos(ke)/(M$1*(A1+3*A2*Oe+Ge*(7*A3+9*A4*Oe))),r.y=ke*(A1+A2*Oe+Ge*(A3+A4*Oe)),r.x=this.a*r.x+this.x0,r.y=this.a*r.y+this.y0,r}function inverse(r){r.x=(r.x-this.x0)/this.a,r.y=(r.y-this.y0)/this.a;var e=1e-9,t=12,ke=r.y,Oe,Ge,Be,je,Ve,Ze;for(Ze=0;Ze<t&&(Oe=ke*ke,Ge=Oe*Oe*Oe,Be=ke*(A1+A2*Oe+Ge*(A3+A4*Oe))-r.y,je=A1+3*A2*Oe+Ge*(7*A3+9*A4*Oe),ke-=Ve=Be/je,!(Math.abs(Ve)<e));++Ze);return Oe=ke*ke,Ge=Oe*Oe*Oe,r.x=M$1*r.x*(A1+3*A2*Oe+Ge*(7*A3+9*A4*Oe))/Math.cos(ke),r.y=Math.asin(Math.sin(ke)/M$1),r.x=adjust_lon(r.x+this.long0),r}var names$1=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init:init$1,forward,inverse,names:names$1};var EPS10=1e-10;function init(){var r;if(this.phi1=this.lat1,Math.abs(this.phi1)<EPS10)throw new Error;this.es?(this.en=pj_enfn(this.es),this.m1=pj_mlfn(this.phi1,this.am1=Math.sin(this.phi1),r=Math.cos(this.phi1),this.en),this.am1=r/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=e_inv,this.forward=e_fwd):(Math.abs(this.phi1)+EPS10>=HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=s_inv,this.forward=s_fwd)}function e_fwd(r){var e=adjust_lon(r.x-(this.long0||0)),t=r.y,ke,Oe,Ge;return ke=this.am1+this.m1-pj_mlfn(t,Oe=Math.sin(t),Ge=Math.cos(t),this.en),Oe=Ge*e/(ke*Math.sqrt(1-this.es*Oe*Oe)),r.x=ke*Math.sin(Oe),r.y=this.am1-ke*Math.cos(Oe),r.x=this.a*r.x+(this.x0||0),r.y=this.a*r.y+(this.y0||0),r}function e_inv(r){r.x=(r.x-(this.x0||0))/this.a,r.y=(r.y-(this.y0||0))/this.a;var e,t,ke,Oe;if(t=hypot(r.x,r.y=this.am1-r.y),Oe=pj_inv_mlfn(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(Oe))<HALF_PI)e=Math.sin(Oe),ke=t*Math.atan2(r.x,r.y)*Math.sqrt(1-this.es*e*e)/Math.cos(Oe);else if(Math.abs(e-HALF_PI)<=EPS10)ke=0;else throw new Error;return r.x=adjust_lon(ke+(this.long0||0)),r.y=adjust_lat(Oe),r}function s_fwd(r){var e=adjust_lon(r.x-(this.long0||0)),t=r.y,ke,Oe;return Oe=this.cphi1+this.phi1-t,Math.abs(Oe)>EPS10?(r.x=Oe*Math.sin(ke=e*Math.cos(t)/Oe),r.y=this.cphi1-Oe*Math.cos(ke)):r.x=r.y=0,r.x=this.a*r.x+(this.x0||0),r.y=this.a*r.y+(this.y0||0),r}function s_inv(r){r.x=(r.x-(this.x0||0))/this.a,r.y=(r.y-(this.y0||0))/this.a;var e,t,ke=hypot(r.x,r.y=this.cphi1-r.y);if(t=this.cphi1+this.phi1-ke,Math.abs(t)>HALF_PI)throw new Error;return Math.abs(Math.abs(t)-HALF_PI)<=EPS10?e=0:e=ke*Math.atan2(r.x,r.y)/Math.cos(t),r.x=adjust_lon(e+(this.long0||0)),r.y=adjust_lat(t),r}var names=["bonne","Bonne (Werner lat_1=90)"];const bonne={init,names};function includedProjections(r){r.Proj.projections.add(tmerc),r.Proj.projections.add(etmerc),r.Proj.projections.add(utm),r.Proj.projections.add(sterea),r.Proj.projections.add(stere),r.Proj.projections.add(somerc),r.Proj.projections.add(omerc),r.Proj.projections.add(lcc),r.Proj.projections.add(krovak),r.Proj.projections.add(cass),r.Proj.projections.add(laea),r.Proj.projections.add(aea),r.Proj.projections.add(gnom),r.Proj.projections.add(cea),r.Proj.projections.add(eqc),r.Proj.projections.add(poly),r.Proj.projections.add(nzmg),r.Proj.projections.add(mill),r.Proj.projections.add(sinu),r.Proj.projections.add(moll),r.Proj.projections.add(eqdc),r.Proj.projections.add(vandg),r.Proj.projections.add(aeqd),r.Proj.projections.add(ortho),r.Proj.projections.add(qsc),r.Proj.projections.add(robin),r.Proj.projections.add(geocent),r.Proj.projections.add(tpers),r.Proj.projections.add(geos),r.Proj.projections.add(eqearth),r.Proj.projections.add(bonne)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$x=LoggerByDefault.getLogger("CRS");function register(r){const e=Object.keys(r.defs);logger$x.trace("proj. codes :",e);const t=e.length;let ke,Oe;for(ke=0;ke<t;++ke){const Ge=e[ke];if(!get$3(Ge)){const Be=r.defs(Ge);addProjection(new Projection$1({code:Ge,axisOrientation:Be.axis,metersPerUnit:Be.to_meter,units:Be.units}))}}for(ke=0;ke<t;++ke){const Ge=e[ke],Be=get$3(Ge);for(Oe=0;Oe<t;++Oe){const je=e[Oe],Ve=get$3(je);if(!get$4(Ge,je))if(r.defs[Ge]===r.defs[je])addEquivalentProjections([Be,Ve]);else{const Ze=r(Ge,je);addCoordinateTransforms(Be,Ve,Ze.forward,Ze.inverse)}}}}var Register={isLoaded:!1,get:function(r){if(!(r===""||r===null||typeof r>"u")){var e=r.split(":");if(e.length===2){var t=e[0],ke=e[1];if(this.hasOwnProperty(t)&&this[t].hasOwnProperty(ke))return this[t][ke]}}},exist:function(r){if(r===""||r===null||typeof r>"u")return!1;var e=r.split(":");if(e.length!==2)return!1;var t=e[0],ke=e[1];return!(!this.hasOwnProperty(t)||!this[t].hasOwnProperty(ke))},load:function(r){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],t=0;t<e.length;t++){var ke=e[t],Oe=this[ke];for(var Ge in Oe)if(Oe.hasOwnProperty(Ge)){var Be=ke+":"+Ge;r.defs(Be,this.get(Be))}}this.isLoaded=!0}},loadByDefault:function(r){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var t in e)if(e.hasOwnProperty(t)){var ke=e[t];for(var Oe in ke)if(ke.hasOwnProperty(Oe)){var Ge=t+":"+Oe;r.defs(Ge,ke[Oe])}}},loadByName:function(r,e){if(!this.exist(e))return!1;try{r.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$w=LoggerByDefault.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$w.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(r){logger$w.error(r)}}},loadByDefault:function(){if(logger$w.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(r){logger$w.error(r)}}},loadByName:function(r){if(logger$w.trace("Loading a custom definition projection : ",r),!Register.isLoaded){Register.loadByName(proj4,r);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$w.error(e)}}},overload:function(){logger$w.trace("Loading projections aera (extent)");for(var r in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(r)){var e=this.projectionsExtent[r],t=get$3(r),ke=getTransform("EPSG:4326",t),Oe=applyTransform([e.bottom,e.right,e.top,e.left],ke);t.setExtent(Oe),addProjection(t),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(t)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=10,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByLayerPriority=[],m_filterWMTSPriority=!1,m_filterByTMS=["ADMIN_EXPRESS","ISOHYPSE","PLAN.IGN","OCSGE_2016","OCSGE_2019","PCI","BDTOPO"],m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async r=>{clear(),controller=new AbortController;let e=new URL(m_url),t={text:r,fields:m_fields,size:m_size};Object.keys(t).forEach(Ve=>e.searchParams.append(Ve,t[Ve]));var ke=await fetch(e,{}),Oe=await ke.json();if(ke.status!==200)throw new Error(ke.message);if(!(!Oe||Oe.length===0)){for(let Ve=0;Ve<Oe.length;Ve++){const Ze=Oe[Ve];m_filterByLayerPriority.findIndex(en=>en.includes(Ze.source.layer_name))>=0&&(Oe[Ve].score+=100)}Oe.sort((Ve,Ze)=>Ze.score-Ve.score);var Ge=null;m_filterWMTSPriority&&(Ge=inventory(Oe));for(let Ve=0;Ve<Oe.length;Ve++){const Ze=Oe[Ve];var Be=m_filterByService.length===0||m_filterByService.includes(Ze.source.type);if(Be){if(unique().length>=m_maximumResponses)break;var je={attribution:Ze.source.attribution||{},srs:Ze.source.srs||[],keywords:Ze.source.keywords||[],extent:Ze.source.extent||{},metadata:Ze.source.metadata_urls||[],name:Ze.source.layer_name||"",title:Ze.source.title||"",description:Ze.source.description,service:Ze.source.type||"",url:Ze.source.url||"",tech:Ze.source.tech||{},tags:Ze.source.tags||{},theme:Ze.source.theme||"",producer:Ze.source.producer||""};if(m_filterByTMS.length&&(je.service==="WMTS"&&m_filterByTMS.includes(je.name)||je.service==="TMS"&&!m_filterByTMS.includes(je.name))||m_filterByProjection.length&&m_filterByProjection.includes(je.srs[0])||Ge&&Ge[je.name]&&je.service==="WMS")continue;m_suggestions.push(je)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique=()=>m_suggestions.filter((r,e,t)=>e===t.findIndex(ke=>ke.service===r.service&&ke.name===r.name&&ke.title===r.title&&ke.description===r.description)),clear=()=>{controller.abort(),m_suggestions=[]},inventory=r=>{var e={};for(let t=0;t<r.length;t++){const ke=r[t].source.type,Oe=r[t].source.layer_name;(ke==="WMTS"||ke==="WMS")&&(e[Oe]===void 0&&(e[Oe]=ke==="WMTS"),e[Oe]||(e[Oe]=ke==="WMTS"))}return e},getSuggestions=()=>unique(),getNames=()=>unique().map(r=>r.name),getTitles=()=>unique().map(r=>r.title),setIndex=r=>{m_index=r},setFields=r=>{m_fields=r},setSize=r=>{m_size=parseInt(r)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=r=>{m_maximumResponses=parseInt(r)},setFiltersByService=r=>{m_filterByService=r===""?[]:r.split(",")},setFiltersByProjection=r=>{m_filterByProjection=r===""?[]:r.split(",")},setFiltersByLayerPriority=r=>{m_filterByLayerPriority=r===""?[]:r.split(",")},setFilterWMTSPriority=r=>{m_filterWMTSPriority=r},setFiltersByTMS=r=>{m_filterByTMS=r===""?[]:r.split(",")},updateFilterByTMS=async r=>{var e=r;e||(e="https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/vectorTileConfig/fullVectorTileConfig.json");const t=await fetch(e),ke=await t.json();if(t.status!==200)throw new Error(t.message);if(!ke)throw new Error("Liste vide !");var Oe=Object.keys(ke.layers).map(Ge=>Ge.split("$")[0]);return Oe&&setFiltersByTMS(Oe.toString()),m_filterByTMS},Search$1={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByTMS,updateFilterByTMS,setFiltersByProjection,setFiltersByLayerPriority,setFilterWMTSPriority};var SearchEngineDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPsearchEngine"),r.className="GPwidget gpf-widget",r},_createSearchDivElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPshowSearchDiv"),r},_createShowSearchEnginePictoElement:function(r){var e=this;checkDsfr()&&(r=!0);var t=document.createElement("button");return t.id=this._addUID("GPshowSearchEnginePicto"),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",t.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(t.title="Rechercher"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!r),t.disabled=!r,t.setAttribute("type","button"),t.addEventListener("click",function(ke){if(checkDsfr()){var Oe=document.getElementById(e._addUID("GPautocompleteResults")),Ge=Oe.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),Be=Oe.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),je=Be.length;if(!je)return;var Ve=null;Ge.length?Ve=Ge[0]:(Ve=Be[0],Ve.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Ve.style.color="#000000",Ve.style["background-color"]="#CEDBEF"),Ve.click();return}var Ze=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ze),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var Qe=document.getElementById(e._addUID("GPshowAdvancedSearch"));Qe&&(Qe.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var en=document.getElementById(e._addUID("GPshowGeolocate"));en&&(en.style.display=null);var tn=document.getElementById(e._addUID("GPshowSearchByCoordinate"));tn&&(tn.style.display=null);var an="#GPsearchInput-"+e._uid;document.querySelector(an+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick(ke)}),t},_createSearchInputElement:function(r){var e=this,t=document.createElement("form");t.id=this._addUID("GPsearchInput"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(Oe){return Oe.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(Oe)),!1});var ke=document.createElement("input");return ke.id=this._addUID("GPsearchInputText"),ke.className="GPsearchInputText gpf-input fr-input",ke.type="text",ke.placeholder=r,ke.autocomplete="off",ke.addEventListener("keyup",function(Oe){var Ge=Oe.which||Oe.keyCode;Ge===13||Ge===10||Ge===38||Ge===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),ke.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(Oe))}),ke.addEventListener("keydown",function(Oe){var Ge=Oe.which||Oe.keyCode;Ge===13&&Oe.preventDefault();var Be=document.getElementById(e._addUID("GPautocompleteResults"));if(Be){var je=Be.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),Ve=Be.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),Ze=Ve.length;if(Ze){var Qe=null;if(je.length)Qe=je[0];else if(Qe=Ve[0],Qe.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Qe.style.color="#000000",Qe.style["background-color"]="#CEDBEF",Ge!==13)return;var en=parseInt(SelectorID.index(Qe.id),10),tn=en===Ze-1?Ve[0]:Ve[en+1],an=en===0?Ve[Ze-1]:Ve[en-1];switch(Qe.style["background-color"]="",Qe.style.color="",an.style["background-color"]="",an.style.color="",tn.style["background-color"]="",tn.style.color="",Ge){case 38:Qe.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",an.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",an.style.color="#000000",an.style["background-color"]="#CEDBEF",Qe.scrollIntoView();break;case 40:Qe.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",tn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",tn.style.color="#000000",tn.style["background-color"]="#CEDBEF",Qe.scrollIntoView();break;case 13:Oe.preventDefault(),Qe.click(Oe);break}Qe.focus()}}}),t.appendChild(ke),t},_createSearchResetElement:function(){var r=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(t){document.getElementById(r._addUID("GPsearchInputText")).value="",document.getElementById(r._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),r.onSearchResetClick()}),e},_createButtonsElement:function(){var r=document.createElement("div");return r.className="GPbuttonsContainer",r},_createFirstLineWrapper:function(){var r=document.createElement("div");return r.className="GPsearchFirstLineWrapper",r},_createRadioContainer:function(){var r=document.createElement("div");return r.className="GPsearchRadioContainer",r},_createRadioElements:function(){var r=document.createElement("div");r.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var t=document.createElement("input");t.id=this._addUID("GPsearchSplitLocations"),t.type="radio",t.name="GPsearchSplit",t.value="address",t.checked=!0,e.appendChild(t);var ke=document.createElement("label");ke.className="gpf-label fr-label",ke.htmlFor=this._addUID("GPsearchSplitLocations"),ke.title="Adresses",ke.innerHTML="Adresses",e.appendChild(ke),t.addEventListener?t.addEventListener("change",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):t.attachEvent&&t.attachEvent("onchange",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var Oe=document.createElement("div");Oe.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Ge=document.createElement("input");Ge.id=this._addUID("GPsearchSplitData"),Ge.type="radio",Ge.name="GPsearchSplit",Ge.value="data",Oe.appendChild(Ge);var Be=document.createElement("label");return Be.className="gpf-label fr-label",Be.htmlFor=this._addUID("GPsearchSplitData"),Be.title="Cartes et données",Be.innerHTML="Cartes et données",Oe.appendChild(Be),Ge.addEventListener?Ge.addEventListener("change",function(){Ge.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):Ge.attachEvent&&Ge.attachEvent("onchange",function(){Ge.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),r.appendChild(e),r.appendChild(Oe),[r,t,Ge]},_createShowAdvancedSearchElement:function(){var r=this,e=document.createElement("span");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen  GPshowAdvancedSearch",e.innerText="Recherche avancée",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke);var Oe="#GPsearchInput-"+r._uid;ke?(document.getElementById(r._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(Oe+" input").disabled=!1,document.querySelector(Oe+" .GPsearchInputReset")&&(document.querySelector(Oe+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+r._uid).disabled=!1)):(document.getElementById(r._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(r._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(Oe+" input").disabled=!0,document.querySelector(Oe+" .GPsearchInputReset")&&(document.querySelector(Oe+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+r._uid).disabled=!0)),document.getElementById(r._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(r._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(r._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var r=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la géolocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke),r.onShowSearchGeolocateClick(t)}),e},_createShowSearchByCoordinateElement:function(){var r=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnées",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke);var Oe="#GPsearchInput-"+r._uid;ke?(document.getElementById(r._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(Oe+" input").disabled=!1,document.querySelector(Oe+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+r._uid).disabled=!1)):(document.getElementById(r._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(r._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(Oe+" input").disabled=!0,document.querySelector(Oe+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+r._uid).disabled=!0)),document.getElementById(r._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(r._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(r._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPadvancedSearchPanel"),r.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",r},_createAdvancedSearchPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createGeocodeResultsElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPgeocodeResultsList"),r.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",r.appendChild(this._createGeocodeResultsHeaderElement()),r},_createGeocodeResultsDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createAutoCompleteElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPautoCompleteList"),r.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",r},_createCoordinateSearchPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPcoordinateSearchPanel"),r.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",r},_createCoordinateSearchPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createAutoCompleteListElement:function(){var r=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(t){document.getElementById(r._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(t){document.getElementById(r._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var r=document.createElement("select");return r.id=this._addUID("GPautocompleteResultsLocation"),r.className="GPelementHidden gpf-hidden gpf-select",r.size=20,r.autofocus=!0,r},_createAutoCompletedLocationTitleElement(){var r=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Lieux et adresses",r.appendChild(e)},_createAutoCompletedLocationElement:function(r,e){var t=this,ke=document.getElementById(this._addUID("GPautocompleteResultsLocation")),Oe=document.createElement("option");Oe.id=this._addUID("AutoCompletedLocation_"+e),Oe.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine";var Ge=GeocodeUtils.getSuggestedLocationFreeform(r);Oe.innerHTML=Ge,Oe.title=Ge,Oe.addEventListener?Oe.addEventListener("click",function(Be){t.onAutoCompletedResultsItemClick(Be)},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(Be){t.onAutoCompletedResultsItemClick(Be)}),ke.appendChild(Oe)},_createSearchedSuggestContainer(){var r=document.createElement("select");return r.id=this._addUID("GPautocompleteResultsSuggest"),r.className="GPelementHidden gpf-hidden gpf-select",r.size=6,r.autofocus=!0,r},_createSearchedSuggestTitleElement(){var r=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("option");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Cartes et données",r.appendChild(e)},_createSearchedSuggestElement:function(r,e){var t=this,ke=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),Oe=document.createElement("option");Oe.id=this._addUID("AutoCompletedSuggest_"+e),Oe.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Oe.innerHTML=r.title+" ("+r.service+")",Oe.dataset.layer=r.name,Oe.title=`${r.description} (nom technique : ${r.name})`,Oe.addEventListener?Oe.addEventListener("click",function(Ge){t.onSearchedResultsItemClick(Ge)},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(Ge){t.onSearchedResultsItemClick(Ge)}),ke.appendChild(Oe)},_createAdvancedSearchPanelHeaderElement:function(){var r=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche avancée",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GPadvancedSearchClose"),ke.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer la recherche avancée",ke.addEventListener?ke.addEventListener("click",function(){var Ge="#GPsearchInput-"+r._uid;document.querySelector(Ge+" input").disabled=!1,document.querySelector(Ge+" .GPsearchInputReset")&&(document.querySelector(Ge+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+r._uid).disabled=!1),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(r._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(r._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){var Ge="#GPsearchInput-"+r._uid;document.querySelector(Ge+" input").disabled=!1,document.querySelector(Ge+" .GPsearchInputReset")&&(document.querySelector(Ge+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+r._uid).disabled=!1),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(r._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(r._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var Oe=document.createElement("span");return Oe.className="GPelementHidden gpf-visible",Oe.innerText="Fermer",ke.appendChild(Oe),e.appendChild(ke),e},_createAdvancedSearchPanelFormElement:function(r){var e=this,t=document.createElement("form");t.id=this._addUID("GPadvancedSearchForm"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(Be){Be.preventDefault();for(var je=[],Ve="#GPadvancedSearchFilters-"+e._uid,Ze=document.querySelectorAll(Ve+" > div > div > input,select#category"),Qe=0;Qe<Ze.length;Qe++){var en=Ze[Qe];je.push({key:en.name,value:en.value})}return e.onGeocodingAdvancedSearchSubmit(Be,je),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var ke=document.createElement("div");ke.className="GPflexInput gpf-flex-column ";var Oe=document.createElement("label");Oe.className="GPadvancedSearchCodeLabel gpf-label fr-label",Oe.innerHTML="Recherche par",ke.appendChild(Oe);var Ge=this._createAdvancedSearchFormCodeElement(r);return ke.appendChild(Ge),t.appendChild(ke),t},_createAdvancedSearchFormCodeElement:function(r){var e=this,t=document.createElement("select");t.id=this._addUID("GPadvancedSearchCode"),t.title="Choisir un type de recherche",t.className="GPadvancedSearchCode gpf-select fr-select",t.addEventListener("change",function(Ge){e.onGeocodingAdvancedSearchCodeChange(Ge)},!1),r||(r=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var ke=0;ke<r.length;ke++){var Oe=document.createElement("option");Oe.value=r[ke].id,Oe.text=r[ke].title,t.appendChild(Oe)}return t},_createAdvancedSearchFormInputElement:function(){var r=document.createElement("input");return r.type="submit",r.id=this._addUID("GPadvancedSearchSubmit"),r.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",r.value="Chercher",r},_createAdvancedSearchFormFiltersElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPadvancedSearchFilters"),r},_createAdvancedSearchFiltersTableElement:function(r,e){var t=document.createElement("div");return t.id=this._addUID(r),e||(t.style.display="none"),t},_createAdvancedSearchFiltersAttributElement:function(r){var e=null,t=r.name,ke=r.title,Oe=r.description,Ge=r.code,Be=r.value,je=document.createElement("div");je.className="GPflexInput gpf-flex-column ";var Ve=document.createElement("label");if(Ve.className="GPadvancedSearchFilterLabel gpf-label fr-label",Ve.htmlFor=t,Ve.title=Oe||ke,Ve.innerHTML=ke,je.appendChild(Ve),t==="category"){var Ze=document.createElement("select");if(Ze.id=t,Ze.name=t,Ze.title=ke,Ze.className="GPadvancedSearchFilterInput gpf-select fr-select",Be&&Array.isArray(Be))for(var Qe=0;Qe<Be.length;Qe++){var en=document.createElement("option");en.value=Be[Qe],en.text=Be[Qe],Ze.appendChild(en)}je.appendChild(Ze)}else{var tn=document.createElement("input");if(tn.id=t,tn.className="GPadvancedSearchFilterInput gpf-input fr-input",tn.type="text",tn.name=t,Be)if(Array.isArray(Be)){var an=t+"_list";tn.setAttribute("list",an);var cn=document.createElement("datalist");cn.id=an;for(var Qe=0;Qe<Be.length;++Qe){var en=document.createElement("option");en.value=Be[Qe],cn.appendChild(en)}je.appendChild(cn)}else tn.value=Be;je.appendChild(tn)}return e=document.getElementById(this._addUID(Ge)),e?e.appendChild(je):e=je,e},_createGeocodeResultsHeaderElement:function(){var r=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Résultats de la recherche",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GPgeocodeResultsClose"),ke.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer la fenêtre de résultats",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var Oe=document.createElement("span");return Oe.className="GPelementHidden gpf-visible",Oe.innerText="Fermer",ke.appendChild(Oe),e.appendChild(ke),e},_createGeocodeResultsListElement:function(){var r=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(t){t.ctrlKey||(document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),r.onGeocodedResultsItemClick(t)},!1):e.attachEvent&&e.attachEvent("onclick",function(t){t.ctrlKey||(document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),r.onGeocodedResultsItemClick(t)}),e},_createGeocodedLocationElement:function(r,e){var t=document.getElementById(this._addUID("GPgeocodeResults")),ke=document.createElement("div");ke.id=this._addUID("GeocodedLocation_"+e),ke.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",typeof r=="string"?ke.innerHTML=r:ke.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(r),t.appendChild(ke)},_createCoordinateSearchPanelHeaderElement(){var r=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche par coordonnées",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GPcoordinateSearchClose"),ke.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer la recherche par coordonnées",ke.addEventListener?ke.addEventListener("click",function(){var Ge="#GPsearchInput-"+r._uid;document.querySelector(Ge+" input").disabled=!1,document.querySelector(Ge+" .GPsearchInputReset")&&(document.querySelector(Ge+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+r._uid).disabled=!1),document.getElementById(r._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(r._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),r.onCoordinateSearchClose()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){var Ge="#GPsearchInput-"+r._uid;document.querySelector(Ge+" input").disabled=!1,document.querySelector(Ge+" .GPsearchInputReset")&&(document.querySelector(Ge+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+r._uid).disabled=!1),document.getElementById(r._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(r._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),r.onCoordinateSearchClose()});var Oe=document.createElement("span");return Oe.className="GPelementHidden gpf-visible",Oe.innerText="Fermer",ke.appendChild(Oe),e.appendChild(ke),e},_createCoordinateSearchPanelFormElement(){var r=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),r.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var r=document.createElement("div");return r.className="GPflexInput gpf-flex-column ",r},_createCoordinateSearchSystemsLabelElement(){var r=document.createElement("label");return r.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",r.innerHTML="Système de référence",r},_setCoordinateSearchSystemsSelectElement(r){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchSystem"),t.title="Choisir un système de réference",t.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",t.addEventListener("change",function(Be){e.onCoordinateSearchSystemChange(Be)});for(var ke=0;ke<r.length;ke++){var Oe=r[ke],Ge=document.createElement("option");Ge.value=Oe.code,Ge.text=Oe.label||ke,t.appendChild(Ge)}return t},_createCoordinateSearchUnitsLabelElement(){var r=document.createElement("label");return r.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",r.innerHTML="Unités",r},_setCoordinateSearchUnitsSelectElement(r){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchUnits"),t.title="Choisir un type d'unité",t.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",t.addEventListener("change",function(Be){e.onCoordinateSearchUnitsChange(Be)});for(var ke=0;ke<r.length;ke++){var Oe=r[ke],Ge=document.createElement("option");Ge.value=Oe.code?Oe.code:ke,Ge.text=Oe.label||ke,t.appendChild(Ge)}return t},_setCoordinateSearchLngLabelElement(r){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=r==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(r){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",r){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLngDMSElement(){var r=document.createElement("div");return r.id=this._addUID("GPcoordinateSearchLngDMS"),r.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degré entre 0° et 180°"
                type="number"
                required=""
                min="0"
                max="180">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,r},_setCoordinateSearchLatLabelElement(r){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=r==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(r){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",r){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLatDMSElement(){var r=document.createElement("div");return r.id=this._addUID("GPcoordinateSearchLatDMS"),r.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degré entre 0° et 85°"
                type="number"
                required=""
                min="0"
                max="85">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,r},_createCoordinateSearchSubmitElement(){var r=document.createElement("input");return r.type="submit",r.id=this._addUID("GPcoordinateSearchSubmit"),r.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",r.value="Chercher",r}},logger$v=LoggerByDefault.getLogger("searchengine"),SearchEngine=class zf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof zf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="SearchEngine",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$v.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,serviceOptions:{maximumResponses:5}},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3},displayMarker:!0,markerStyle:"lightOrange",markerUrl:"",placeholder:"Rechercher un lieu, une adresse",splitResults:!0},Helper.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search$1.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search$1.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search$1.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search$1.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search$1.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search$1.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterLayersPriority&&Search$1.setFiltersByLayerPriority(this.options.searchOptions.filterLayersPriority),this.options.searchOptions.filterWMTSPriority&&Search$1.setFilterWMTSPriority(this.options.searchOptions.filterWMTSPriority),this.options.searchOptions.filterVectortiles&&Search$1.setFiltersByTMS(this.options.searchOptions.filterVectortiles),this.options.searchOptions.updateVectortiles&&Search$1.updateFilterByTMS()),Search$1.target.addEventListener("suggest",Oe=>{logger$v.debug(Oe),this._fillSearchedSuggestListContainer(Oe.detail)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=this.options.id||SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var t=this.options.markerStyle,ke=this.options.markerUrl;ke?this._markerUrl=ke:this._markerUrl=Object.keys(Marker).indexOf(t)===-1?Marker.lightOrange:Marker[t],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var t;if(e.resources)if(typeof e.resources=="object"){var ke=e.resources.geocode;if(ke)if(Array.isArray(ke)){var Oe=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(t=0;t<ke.length;t++)Oe.indexOf(ke[t])===-1&&logger$v.log("[SearchEngine] options.resources.geocode : "+ke[t]+" is not a resource for geocode")}else logger$v.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),ke=null;var Ge=e.resources.autocomplete;if(Ge)if(Array.isArray(Ge)){var Be=["StreetAddress","PositionOfInterest"];for(t=0;t<Ge.length;t++)Be.indexOf(Ge[t])===-1&&logger$v.log("[SearchEngine] options.resources.autocomplete : "+Ge[t]+" is not a resource for autocomplete")}else logger$v.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),Ge=null}else logger$v.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)switch(e[t]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger$v.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper.assign(this._advancedSearchFilters,e),logger$v.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],t=this.options.coordinateSearch.systems;if(t)for(var ke=0;ke<t.length;ke++){var Oe=t[ke];this._setSystem(Oe)}if(this._coordinateSearchSystems.length===0)for(var Ge=0;Ge<e.length;Ge++)this._setSystem(e[Ge])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrés sexagésimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomètres",format:MathUtils.coordinateToKMeter}]},t=this.options.coordinateSearch.units;if(t){for(var ke in e)if(e.hasOwnProperty(ke)){for(var Oe=!1,Ge=0;Ge<e[ke].length;Ge++)for(var Be=e[ke][Ge],je=0;je<t.length;je++){var Ve=t[je];Be.code===Ve&&(Oe=!0,this._coordinateSearchUnits[ke]||(this._coordinateSearchUnits[ke]=[]),this._coordinateSearchUnits[ke].push(Be))}Oe||(this._coordinateSearchUnits[ke]=e[ke])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div gpf-widget-color";var ke=document.createElement("button");return ke.className="gp-styling-button closer",ke.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",t.appendChild(this._popupContent),t.appendChild(ke),t}_initContainer(){var e=this._createMainContainerElement(),t=this._createSearchDivElement(),ke=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);t.appendChild(ke),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var Oe=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&Oe.appendChild(this._createSearchResetElement());var Ge=this;Oe.addEventListener?Oe.addEventListener("click",function(){Ge.onAutoCompleteInputClick()}):Oe.attachEvent&&Oe.attachEvent("onclick",function(){Ge.onAutoCompleteInputClick()}),t.appendChild(Oe);var Be=this._createButtonsElement(),je=this._createFirstLineWrapper();if(je.appendChild(t),je.appendChild(Be),e.appendChild(je),checkDsfr()&&this.options.splitResults||this.options.displayButtonAdvancedSearch){var Ve=this._createRadioContainer();e.appendChild(Ve)}if(checkDsfr()&&this.options.splitResults){var Ze;[Ze,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),Ve.appendChild(Ze)}if(this.options.displayButtonAdvancedSearch){var Qe=this._createShowAdvancedSearchElement();Ve.appendChild(Qe);var en=this._createAdvancedSearchPanelElement(),tn=this._createAdvancedSearchPanelDivElement(),an=this._createAdvancedSearchPanelHeaderElement(),cn=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),dn=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var hn=this._createAdvancedSearchFormInputElement();cn.appendChild(dn),cn.appendChild(hn),tn.appendChild(an),tn.appendChild(cn),en.appendChild(tn),e.appendChild(en)}if(this.options.displayButtonGeolocate){var fn=this._createShowGeolocateElement();Be.appendChild(fn)}if(this.options.displayButtonCoordinateSearch){var pn=this._createShowSearchByCoordinateElement();Be.appendChild(pn);var mn=this._createCoordinateSearchPanelElement(),yn=this._createCoordinateSearchPanelDivElement(),Cn=this._createCoordinateSearchPanelHeaderElement(),wn=this._createCoordinateSearchPanelFormElement(),bn=null;bn=this._containerSystems=this.__createCoordinateSearchDivElement(),wn.appendChild(bn);var Sn=this._createCoordinateSearchSystemsLabelElement(),Mn=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);bn.appendChild(Sn),bn.appendChild(Mn),bn=this._containerUnits=this.__createCoordinateSearchDivElement(),wn.appendChild(bn);var Tn=this._createCoordinateSearchUnitsLabelElement(),En=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);bn.appendChild(Tn),bn.appendChild(En),bn=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),wn.appendChild(bn);var An=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),Ln=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);bn.appendChild(An),bn.appendChild(Ln),bn=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),wn.appendChild(bn);var Rn=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),Gn=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);bn.appendChild(Rn),bn.appendChild(Gn);var Nn=this._createCoordinateSearchSubmitElement();wn.appendChild(Nn),yn.appendChild(Cn),yn.appendChild(wn),mn.appendChild(yn),e.appendChild(mn)}var jn=this._autocompleteContainer=this._createAutoCompleteElement(),Dn=this._createAutoCompleteListElement(),Ci=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),Jn=this._containerResultsSuggest=this._createSearchedSuggestContainer();Dn.appendChild(Ci),Dn.appendChild(Jn),jn.appendChild(Dn),e.appendChild(jn);var Ki=this._createGeocodeResultsElement(),xn=this._createGeocodeResultsDivElement();Ki.appendChild(xn);var qn=this._geocodedContainer=this._createGeocodeResultsListElement();return xn.appendChild(qn),e.appendChild(Ki),e}_setFilter(e){for(var t=this._filterContainer,ke=!1,Oe=0;Oe<this._advancedSearchCodes.length;Oe++)if(this._advancedSearchCodes[Oe].id===e){ke=!0;break}if(!ke){for(;t.firstChild;)t.removeChild(t.firstChild);return}for(this._currentGeocodingCode=e;t.firstChild;)t.removeChild(t.firstChild);var Ge=this._advancedSearchFilters[e];if(!(!Ge||Ge.length===0)){for(var Be=this._createAdvancedSearchFiltersTableElement(e,!0),je=0;je<Ge.length;je++){var Ve=this._createAdvancedSearchFiltersAttributElement(Ge[je]);Be.appendChild(Ve)}return t.appendChild(Be),t}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger$v.log(e);var t={};Helper.assign(t,this.options.autocompleteOptions.serviceOptions),Helper.assign(t,e);var ke=this.options.resources.autocomplete;ke&&Array.isArray(ke)&&(t.type||(t.type=ke)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$v.log(t),Gp$1.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._containerResultsLocation;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var ke=0;ke<e.length;ke++)this._createAutoCompletedLocationElement(e[ke],ke)}}}_fillSearchedSuggestListContainer(e){var t=this._containerResultsSuggest;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let ke=0;ke<e.length;ke++){const Oe=e[ke];this._createSearchedSuggestElement(Oe,ke)}}}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger$v.log(e);var t={};Helper.assign(t,this.options.geocodeOptions.serviceOptions),Helper.assign(t,e);var ke=this,Oe=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",Ge=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(Ge){var Be=function(Ze){e.onSuccess.call(ke,Ze),ke.options.geocodeOptions.serviceOptions.onSuccess.call(ke,Ze)};t.onSuccess=Be}if(Oe){var je=function(Ze){e.onFailure.call(ke,Ze),ke.options.geocodeOptions.serviceOptions.onFailure.call(ke,Ze)};t.onFailure=je}var Ve=this.options.resources.geocode;Ve&&(t.index||(t.index=Ve)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$v.log(t),Gp$1.Services.geocode(t)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var t=this._geocodedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var ke=0;ke<e.length;ke++)logger$v.log(e[ke]),this._createGeocodedLocationElement(e[ke],ke);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,t){var ke=this.getMap().getView();ke.setCenter(e),ke.setZoom(t)}_setMarker(e,t){var ke=this.getMap(),Oe=this;if(this._marker!=null&&(ke.removeOverlay(this._marker),this._marker=null),e){var Ge=document.createElement("img");Ge.src=this._markerUrl,Ge.addEventListener?Ge.addEventListener("click",function(){Oe._onResultMarkerSelect(t)}):Ge.attachEvent&&Ge.attachEvent("onclick",function(){Oe._onResultMarkerSelect(t)}),this._marker=new Overlay({position:e,positioning:"center-center",element:Ge,stopEvent:!1}),ke.addOverlay(this._marker)}}_getZoom(e){var t=this.getMap(),ke=this.options.zoomTo,Oe=null;if(typeof ke=="function"&&(logger$v.trace("zoom function"),Oe=ke.call(this,e)),typeof ke=="number"&&(logger$v.trace("zoom level"),Oe=ke),typeof ke=="string")if(ke==="auto")logger$v.trace("zoom auto"),Oe=SearchEngineUtils.zoomToResultsByDefault(e);else{logger$v.trace("zoom level parsing");var Ge=parseInt(ke,10);isNaN(Ge)||(logger$v.trace("zoom parsing"),Oe=Ge)}Number.isInteger=Number.isInteger||function(Ve){return typeof Ve=="number"&&isFinite(Ve)&&Math.floor(Ve)===Ve},(!Oe||Oe===""||!Number.isInteger(Oe))&&(logger$v.trace("zoom not found, current zoom..."),Oe=t.getView().getZoom());var Be=t.minZoom,je=t.maxZoom;return Oe<Be&&(logger$v.trace("zoom level min..."),Oe=Be),Oe>je&&(logger$v.trace("zoom level max..."),Oe=je),logger$v.trace("zoom",Oe),Oe}_onResultMarkerSelect(e){var t=this.getMap(),ke="";if(typeof e!="string")if(e.service==="GeocodedLocation"){ke="<ul>";var Oe=e.location.placeAttributes;for(var Ge in Oe)Oe.hasOwnProperty(Ge)&&Ge!=="trueGeometry"&&Ge!=="extraFields"&&Ge!=="houseNumberInfos"&&Ge!=="_count"&&(ke+="<li>",ke+='<span class="gp-attname-others-span">'+Ge.toUpperCase()+" : </span>",ke+=Oe[Ge],ke+=" </li>");ke+=" </ul>"}else e.service==="SuggestedLocation"?ke=GeocodeUtils.getSuggestedLocationFreeform(e.location):ke="sans informations.";else ke=e;this._popupContent.innerHTML=ke,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),t.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger$v.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$v.error("crs not defined !");return}if(e.label||(logger$v.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$v.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$v.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._coordinateSearchSystems.length;t++){var ke=this._coordinateSearchSystems[t];e.crs===ke.crs&&logger$v.info("crs '{}' already configured",ke.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._showSearchEngineButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var t=this.getMap().getView(),ke=t.getProjection().getCode(),Oe=[e.coords.longitude,e.coords.latitude],Ge;if(ke!=="EPSG:4326"?Ge=transform$1(Oe,"EPSG:4326",ke):Ge=Oe,isNaN(Ge[0])||isNaN(Ge[1])){this._setMarker();return}if(this._setPosition(Ge,10),this._displayMarker){var Be="<h6> Ma position </h6> longitude : "+Oe[0]+"<br/> latitude : "+Oe[1];this._setMarker(Ge,Be)}this.dispatchEvent({type:"searchengine:geolocation:click",coordinates:Ge})})}onShowSearchByCoordinateClick(){var e=null,t=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),t=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,t=this._coordinateSearchLatInput.value),!(!e||!t)){var ke=[e,t],Oe=this.getMap().getView(),Ge=Oe.getProjection().getCode();if(Ge!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",Ge)),isNaN(ke[0])||isNaN(ke[1])){this._setMarker();return}this._setPosition(ke,10),this._displayMarker&&this._setMarker(ke,"sans information"),this.dispatchEvent({type:"searchengine:coordinates:click",coordinates:ke})}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var t=e.querySelectorAll("[name]");if(t){var ke=MathUtils.toInteger(t[0].value),Oe=MathUtils.toInteger(t[1].value),Ge=MathUtils.toInteger(t[2].value),Be=t[3].options[t[3].selectedIndex].text;return!ke||!Oe||!Ge||!Be?void 0:MathUtils.dmsToDecimal(ke,Oe,Ge,Be)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){if(this._currentGeocodingLocation=t,t.length<3){this._clearSuggestedLocation();return}var ke=this.options.autocompleteOptions.triggerGeocode,Oe=this.options.autocompleteOptions.triggerDelay,Ge=this;this._requestAutoComplete({text:t,onSuccess:function(je){if(logger$v.log("request from AutoComplete",je),je){Ge._suggestedLocations=je.suggestedLocations,Ge._locationsToBeDisplayed=[];for(var Ve=0;Ve<Ge._suggestedLocations.length;Ve++){var Ze=Ge._suggestedLocations[Ve];Ze.position&&Ze.position.x===0&&Ze.position.y===0&&Ze.fullText?Ge._getGeocodeCoordinatesFromFullText(Ze,Ve):Ge._locationsToBeDisplayed.push(Ze)}Ge._fillAutoCompletedLocationListContainer(Ge._locationsToBeDisplayed),Ge._triggerHandler&&(clearTimeout(Ge._triggerHandler),Ge._triggerHandler=null,logger$v.warn("Cancel a geocode request !"))}},onFailure:function(je){Ge._clearSuggestedLocation(),logger$v.log(je.message),je.message==="No suggestion matching the search"&&ke&&(Ge._triggerHandler&&(clearTimeout(Ge._triggerHandler),logger$v.warn("Cancel the last geocode request !")),Ge._triggerHandler=setTimeout(function(){logger$v.warn("Launch a geocode request !"),Ge._requestGeocoding({location:t,onSuccess:function(Ve){if(logger$v.log("request from Geocoding",Ve),Ve){Ge._locationsToBeDisplayed=[];for(var Ze=Ve.locations,Qe=0;Qe<Ze.length;Qe++){var en=Ze[Qe];en.fullText=GeocodeUtils.getGeocodedLocationFreeform(en),en.position={x:en.position.lon,y:en.position.lat},Ge._locationsToBeDisplayed.push(en)}Ge._fillAutoCompletedLocationListContainer(Ze)}},onFailure:function(Ve){logger$v.log(Ve.message)}})},Oe))}}),this.options.resources.search&&Search$1.suggest(t);var Be=this.getMap();Be.on("click",this._hideSuggestedLocation,this),Be.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,t){var ke=this;Gp$1.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(Oe){logger$v.log("request from Geocoding (coordinates null)",Oe),Oe.locations&&Oe.locations.length!==0&&Oe.locations[0].position&&ke._suggestedLocations&&ke._suggestedLocations[t]&&(ke._suggestedLocations[t].position={lon:Oe.locations[0].position.y,lat:Oe.locations[0].position.x},ke._locationsToBeDisplayed.unshift(ke._suggestedLocations[t]),ke._fillAutoCompletedLocationListContainer(ke._locationsToBeDisplayed))},onFailure:function(){ke._suggestedLocations&&ke._suggestedLocations[t]&&ke._createAutoCompletedLocationElement(ke._suggestedLocations[t],t)}})}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(logger$v.log(t),logger$v.log(this._locationsToBeDisplayed[t]),!!t){var ke=[this._locationsToBeDisplayed[t].position.x,this._locationsToBeDisplayed[t].position.y],Oe={service:"SuggestedLocation",location:this._locationsToBeDisplayed[t]},Ge=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[t]);this._setLabel(Ge),this._currentGeocodingLocation=Ge;var Be=this.getMap().getView(),je=Be.getProjection().getCode();je!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",je));var Ve=this._getZoom(Oe);this._setPosition(ke,Ve),this._displayMarker&&this._setMarker(ke,Oe),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[t]})}}onSearchedResultsItemClick(e){var t=SelectorID.index(e.target.id),ke=null;try{var Oe=Search$1.getSuggestions()[t];if(!Oe)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var Ge=Oe.service,Be=Oe.name,je=null;switch(Ge){case"WMS":je=new LayerWMS({layer:Be});break;case"WMTS":je=new LayerWMTS({layer:Be});break;case"TMS":je=new LayerMapBox({layer:Be});default:break}if(je){var Ve=this.getMap();Ve.addLayer(je)}}}catch(Ze){ke=Ze}this.dispatchEvent({type:"searchengine:search:click",suggest:Oe,error:ke})}onGeocodingSearchSubmit(e){var t=e.target[0].value;if(t){this._currentGeocodingLocation=t;var ke=this;this._requestGeocoding({query:t,onSuccess:function(Oe){if(logger$v.log("request from Geocoding",Oe),Oe){var Ge=Oe.locations;ke._fillGeocodedLocationListContainer(Ge)}},onFailure:function(Oe){ke._clearGeocodedLocation(),logger$v.log(Oe.message)}})}}onGeocodedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var ke=[this._geocodedLocations[t].position.lon,this._geocodedLocations[t].position.lat],Oe={service:"GeocodedLocation",location:this._geocodedLocations[t]},Ge=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[t]);this._setLabel(Ge);var Be=this.getMap().getView(),je=Be.getProjection().getCode();je!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",je));var Ve=this._getZoom(this.options.zoomTo);this._setPosition(ke,Ve),this._displayMarker&&this._setMarker(ke,Oe),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[t]})}}onGeocodingAdvancedSearchCodeChange(e){logger$v.log(e);var t=e.target.selectedIndex,ke=e.target.options[t].value;ke&&this._setFilter(ke)}onGeocodingAdvancedSearchSubmit(e,t){if(logger$v.log(t),!(!t||t.length===0)){for(var ke,Oe={},Ge=0;Ge<t.length;Ge++){var Be=t[Ge];Be.value&&(Be.key==="section"&&(Be.value=Be.value.toUpperCase()),Oe[Be.key]=Be.value)}var je=document.getElementById("GPsearchInputText-"+this._uid);ke=je.value,this._currentGeocodingCode==="CadastralParcel"&&(ke="");var Ve=this;this._requestGeocoding({query:ke,index:this._currentGeocodingCode,filters:Oe,onSuccess:function(Ze){if(logger$v.log(Ze),Ze){var Qe=Ze.locations;Ve._fillGeocodedLocationListContainer(Qe)}},onFailure:function(Ze){Ve._clearGeocodedLocation(),logger$v.log(Ze.message)}})}}_getCadastralParcelRequestParams(e){var t="",ke,Oe=e.department;Oe?(ke=Oe.length,ke===2?t=Oe:ke===1?t="0"+Oe:t=Oe.substring(0,2)):t="__";var Ge=e.commune;Ge?(ke=Ge.length,ke===3?t+=Ge:ke===2?t+="_"+Ge:ke===1?t+="__"+Ge:t+=Ge.substring(0,3)):t+="___";var Be=e.insee;Be&&Be.length===5&&(t=Be);var je=e.absorbedCity;je?(ke=je.length,ke===3?t+=je:ke<3?ke===2?t+="_"+je:ke===1&&(t+="__"+je):t+=je.substring(0,3)):t+="___";var Ve=e.section;Ve?(ke=Ve.length,ke===2?t+=Ve:ke===1?t+="_"+Ve:t+=Ve.substring(0,2)):t+="__";var Ze=e.number;return Ze?(ke=Ze.length,ke===4?t+=Ze:ke===3?t+="_"+Ze:ke===2?t+="__"+Ze:ke===1?t+="___"+Ze:t+=Ze.substring(0,4)):t+="___",logger$v.log("location : "+t),t}onCoordinateSearchSystemChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var Oe=null,Ge=0;Ge<this._coordinateSearchSystems.length;++Ge)if(this._coordinateSearchSystems[Ge].code===Number(ke)){Oe=this._coordinateSearchSystems[Ge].type;break}if(!Oe){logger$v.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(ke)],Oe!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=Oe,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[Oe][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[Oe])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=ke,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(t),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(t)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search$1.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);Object.assign(SearchEngine.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);var MousePositionDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPmousePosition"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowMousePositionPictoElement:function(r){var e=this,t=document.createElement("button"),ke=document.createElement("span");return t.appendChild(ke),t.id=this._addUID("GPshowMousePositionPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-position fr-btn fr-btn--tertiary",t.setAttribute("aria-label","Afficher les coordonnées du curseur"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener?t.addEventListener("click",function(Oe){var Ge=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Ge),e.onShowMousePositionClick(Oe)}):t.attachEvent&&t.attachEvent("onclick",function(Oe){var Ge=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Ge),e.onShowMousePositionClick(Oe)}),t},_createMousePositionPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPmousePositionPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createMousePositionPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createMapCenter:function(){var r=document.createElement("div");return r.id="GPmapCenter",r.className="",r},_createMousePositionPanelTitleElement:function(){var r=document.createElement("div");return r.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",r.id=this._addUID("GPmousePositionHeaderTitle"),r.innerHTML="Coordonnées",r},_createMousePositionPanelHeaderElement:function(){var r=document.createElement("div");return r.className="GPpanelHeader gpf-panel__header fr-modal__header",r},_createMousePositionPanelCloseElement:function(){var r=this,e=document.createElement("button");e.id=this._addUID("GPmousePositionPanelClose"),e.className="GPpanelClose gpf-btn gpf-btn-icon-close  fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(r._addUID("GPshowMousePositionPicto")).click()},!1),e.addEventListener("keydown",function(ke){ke.keyCode===13&&document.getElementById(r._addUID("GPshowMousePositionPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowMousePositionPicto")).click()}),e.attachEvent("onkeydown",function(ke){ke.keyCode===13&&document.getElementById(r._addUID("GPshowMousePositionPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createMousePositionPanelBasicElement:function(r,e,t,ke){r=typeof r>"u"?!0:r,e=typeof e>"u"?!0:e,t=typeof t>"u"?!1:t;var Oe=document.createElement("div");return Oe.id=this._addUID("GPmousePositionBasicPanel"),Oe.classList.add("fr-mx-1w"),Oe.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,t,ke)),Oe.appendChild(this._createMousePositionPanelEditToolsElement(t)),Oe.appendChild(this._createMousePositionPanelBasicAltitudeElement(r)),Oe},_createCoordinateElement:function(r,e){var t=this;if(["Lon","Lat"].indexOf(r)===-1)return[];var ke=[],Oe=document.createElement("input");Oe.id=this._addUID("GPmousePosition"+r),Oe.title=e===!0?"Cliquer pour saisir des coordonnées":"",Oe.readOnly=!0,e&&(Oe.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),Oe.addEventListener("change",function(Be){this.classList.remove("error");var je=t.validateExtentCoordinate(r,this.value,Be);je?this.classList.remove("error"):this.classList.add("error")})),ke.push(Oe);var Ge=document.createElement("span");return Ge.className="GPmousePositionUnits",ke.push(Ge),ke},_createDMSCoordinateElement:function(r,e){if(["Lon","Lat"].indexOf(r)===-1)return[];var t=this,ke=[],Oe=document.createElement("input");Oe.id=this._addUID("GPmousePosition"+r+"Degrees"),Oe.className="GPSexagesimal",Oe.setAttribute("name","degrees"),Oe.title=e===!0?"Cliquer pour saisir des coordonnées":"",Oe.readOnly=!0,Oe.dataset.min=0,Oe.dataset.max=r==="Lon"?180:90,e&&(Oe.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),Oe.addEventListener("change",function(){this.classList.remove("error");var an=t._checkDMSDegrees(r,this);an?this.classList.remove("error"):this.classList.add("error")})),ke.push(Oe);var Ge=document.createElement("span");Ge.className="GPmousePositionSexagesimalLabel",Ge.innerHTML="°",ke.push(Ge);var Be=document.createElement("input");Be.id=this._addUID("GPmousePosition"+r+"Minutes"),Be.className="GPSexagesimal",Be.setAttribute("name","minutes"),Be.title=e===!0?"Cliquer pour saisir des coordonnées":"",Be.readOnly=!0,Be.dataset.min=0,Be.dataset.max=59,e&&(Be.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),Be.addEventListener("change",function(){this.classList.remove("error");var an=t._checkDMSElement(this);an?this.classList.remove("error"):this.classList.add("error")})),ke.push(Be);var je=document.createElement("span");je.className="GPmousePositionSexagesimalLabel",je.innerHTML="'",ke.push(je);var Ve=document.createElement("input");Ve.id=this._addUID("GPmousePosition"+r+"Seconds"),Ve.className="GPSexagesimalsec",Ve.setAttribute("name","seconds"),Ve.title=e===!0?"Cliquer pour saisir des coordonnées":"",Ve.readOnly=!0,Ve.dataset.min=0,Ve.dataset.max=59,e&&(Ve.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),Ve.addEventListener("change",function(){this.classList.remove("error");var an=t._checkDMSElement(this,!0);an?this.classList.remove("error"):this.classList.add("error")})),ke.push(Ve);var Ze=document.createElement("span");Ze.className="GPmousePositionSexagesimalLabel",Ze.innerHTML="''",ke.push(Ze);var Qe=document.createElement("select");Qe.id=this._addUID("GPmousePosition"+r+"Direction"),Qe.className="GPmousePositionDirection",Qe.setAttribute("name","direction"),Qe.disabled=!0;var en=document.createElement("option");en.value=r==="Lon"?"E":"N",en.innerHTML=r==="Lon"?"E":"N",Qe.appendChild(en);var tn=document.createElement("option");return tn.value=r==="Lon"?"O":"S",tn.innerHTML=r==="Lon"?"O":"S",Qe.appendChild(tn),ke.push(Qe),ke},_createMousePositionPanelBasicCoordinateElement:function(r,e,t){var ke=document.createElement("div");ke.id=this._addUID("GPmousePositionCoordinate"),ke.style.display=r?"block":"none";var Oe=document.createElement("div");Oe.classList.add("fr-mb-1w");var Ge=document.createElement("span");Ge.className="GPmousePositionLabel",Ge.id=this._addUID("GPmousePositionLatLabel"),Ge.innerHTML="Latitude : ",Oe.appendChild(Ge);var Be=document.createElement("span");Be.id=this._addUID("GPmousePositionLatCoordinate");var je;t==="DMS"?je=this._createDMSCoordinateElement("Lat",e):je=this._createCoordinateElement("Lat",e);for(var Ve=0;Ve<je.length;Ve++)Be.appendChild(je[Ve]);Oe.appendChild(Be),ke.appendChild(Oe);var Ze=document.createElement("div");Ze.classList.add("fr-mb-1w");var Qe=document.createElement("span");Qe.className="GPmousePositionLabel",Qe.id=this._addUID("GPmousePositionLonLabel"),Qe.innerHTML="Longitude : ",Ze.appendChild(Qe);var en=document.createElement("span");en.id=this._addUID("GPmousePositionLonCoordinate");var tn;t==="DMS"?tn=this._createDMSCoordinateElement("Lon",e):tn=this._createCoordinateElement("Lon",e);for(var an=0;an<tn.length;an++)en.appendChild(tn[an]);return Ze.appendChild(en),ke.appendChild(Ze),ke},_createMousePositionPanelBasicAltitudeElement:function(r){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.classList.add("fr-mb-1w"),e.style.display=r?"block":"none";var t=document.createElement("span");t.className="GPmousePositionLabel",t.innerHTML="Altitude : ",e.appendChild(t);var ke=document.createElement("span");ke.className="GPmousePositionCoords",ke.id=this._addUID("GPmousePositionAlt"),ke.innerHTML="...",e.appendChild(ke);var Oe=document.createElement("span");return Oe.className="GPmousePositionAltitudeUnits",Oe.innerHTML="m",e.appendChild(Oe),e},_createMousePositionPanelEditToolsElement:function(r){var e=this,t=document.createElement("div");t.className="GPmousePositionPanelEditTools",t.id=this._addUID("GPmousePositionPanelEditTools"),r||(t.style.display="none");var ke=document.createElement("span");ke.className="GPmousePositionEditTool",ke.id=this._addUID("GPmousePositionLocate"),ke.title=r===!0?"Cliquer pour saisir des coordonnées":"",r&&ke.addEventListener("click",function(){e.onMousePositionEditModeLocateClick()}),t.appendChild(ke);var Oe=document.createElement("span");return Oe.className="GPmousePositionEditTool",Oe.id=this._addUID("GPmousePositionCloseEdit"),Oe.title="Quitter la saisie des coordonnées",Oe.style.display="none",r&&Oe.addEventListener("click",function(){e.onMousePositionEditModeClick(!1)}),t.appendChild(Oe),t},_createShowMousePositionSettingsElement:function(r){var e=this,t=document.createElement("button");return t.id=this._addUID("GPshowMousePositionSettings"),t.className="GPelementHidden GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto gpf-hidden gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill",t.title="Réglages",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!0),t.addEventListener?t.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),e.onShowMousePositionSettingsClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),e.onShowMousePositionSettingsClick(ke)}),t},_createMousePositionSettingsElement:function(r){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=r===void 0||r?"block":"none",e.classList.add("fr-m-1w");var t=document.createElement("span");return t.className="GPmousePositionSettingsLabel",t.innerHTML="Système de référence",e.appendChild(t),e},_createMousePositionSettingsSystemsElement:function(r){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionSystem"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select fr-my-1w",t.addEventListener("change",function(Be){e.onMousePositionProjectionSystemChange(Be)}),t.addEventListener("mouseover",function(Be){Be.target.nodeName!=="OPTION"&&e.onMousePositionProjectionSystemMouseOver(Be)}),t.title="Type de système";for(var ke=0;ke<r.length;ke++){var Oe=r[ke],Ge=document.createElement("option");Ge.value=Oe.code,Ge.text=Oe.label||ke,t.appendChild(Ge)}return t},_createMousePositionSettingsUnitsElement:function(r){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionUnits"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select",t.addEventListener("change",function(Be){e.onMousePositionProjectionUnitsChange(Be)}),t.title="Unités du système";for(var ke=0;ke<r.length;ke++){var Oe=r[ke],Ge=document.createElement("option");Ge.value=Oe.code?Oe.code:ke,Ge.text=Oe.label||ke,t.appendChild(Ge)}return t},_resetLabelElements:function(r){var e=document.getElementById(this._addUID("GPmousePositionLatLabel"));e.innerHTML=r==="Geographical"?"Latitude :":"X :";var t=document.getElementById(this._addUID("GPmousePositionLonLabel"));t.innerHTML=r==="Geographical"?"Longitude :":"Y :"},_resetUnitElements:function(r){var e="";(r==="M"||r==="KM")&&(e=r.toLowerCase());for(var t=document.getElementsByClassName("GPmousePositionUnits"),ke=0;ke<t.length;ke++)t[ke].innerHTML=e},_resetCoordinateElements:function(r,e,t){for(var ke=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));ke.firstChild;)ke.removeChild(ke.firstChild);var Oe;t==="DMS"?Oe=this._createDMSCoordinateElement("Lat",r):Oe=this._createCoordinateElement("Lat",r);for(var Ge=0;Ge<Oe.length;Ge++)ke.appendChild(Oe[Ge]);for(var Be=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));Be.firstChild;)Be.removeChild(Be.firstChild);var je;t==="DMS"?je=this._createDMSCoordinateElement("Lon",r):je=this._createCoordinateElement("Lon",r);for(var Ve=0;Ve<je.length;Ve++)Be.appendChild(je[Ve])},_setEditMode:function(r){var e=document.getElementById(this._addUID("GPmousePositionLocate"));e.title=r?"Aller à la position ...":"Cliquer pour saisir des coordonnées";var t=document.getElementById(this._addUID("GPmousePositionCloseEdit"));t.style.display=r?"inline-block":"none";for(var ke="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",Oe=document.querySelectorAll(ke+" input"),Ge=0;Ge<Oe.length;Ge++)Oe[Ge].readOnly=!r,r&&(Oe[Ge].value="",Oe[Ge].classList.remove("error"));for(var Be=document.querySelectorAll(ke+" select"),je=0;je<Be.length;je++)Be[je].disabled=!r},_checkDMSElement:function(r,e){var t=e!==void 0,ke=r.value;if(t&&(ke=ke.replace(",",".")),isNaN(ke))return!1;var Oe=parseFloat(ke);if(!t&&(Oe|0)!==Oe)return!1;var Ge=Number(r.dataset.min),Be=Number(r.dataset.max);return Oe>=Ge&&Oe<=Be},_checkDMSDegrees:function(r,e){if(isNaN(e.value))return!1;var t=parseFloat(e.value);if((t|0)!==t)return!1;var ke=Number(e.dataset.min),Oe=Number(e.dataset.max);if(t<ke||t>Oe)return!1;var Ge=document.getElementById(this._addUID("GPmousePosition"+r+"Minutes")),Be=document.getElementById(this._addUID("GPmousePosition"+r+"Seconds"));return t>=Oe?(Ge.dataset.max=0,Be.dataset.max=0):(Ge.dataset.max=59,Be.dataset.max=59.9999),!0},GPdisplayCoords:function(r){if(r){var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),t=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(r.x||r.y?(t.innerHTML="X : ",e.innerHTML="Y : "):r.e||r.n?(t.innerHTML="E : ",e.innerHTML="N : "):(t.innerHTML="Latitude : ",e.innerHTML="Longitude : "),typeof r.lat=="object"&&typeof r.lng=="object"){var ke={lng:"Lon",lat:"Lat"},Oe=["Degrees","Minutes","Seconds"];for(var Ge in ke)for(var Be=0;Be<Oe.length;++Be){var je="GPmousePosition"+ke[Ge]+Oe[Be],Ve=document.getElementById(this._addUID(je)),Ze=Oe[Be].charAt(0).toLowerCase();Ve.value=r[Ge][Ze]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=r.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=r.lat.direction}else{var Qe=document.getElementById(this._addUID("GPmousePositionLat")),en=document.getElementById(this._addUID("GPmousePositionLon"));Qe.value=r.x||r.lat||r.e||"0",en.value=r.y||r.lng||r.lon||r.n||"0",Qe.title="Latitude",en.title="Longitude",Qe.type="text",en.type="text";for(var tn=r.unit===void 0?"":r.unit,an=document.getElementsByClassName("GPmousePositionUnits"),cn=0;cn<an.length;++cn)an[cn].innerHTML=tn}}},GPdisplayElevation:function(r,e,t,ke){var Oe=this,Ge;e||(e=500),clearTimeout(Ge),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",t==null&&(t=-99999),ke==null&&(ke=99980);var Be=t+ke,je=t-ke;r&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(Ge=setTimeout(function(){Oe.onRequestAltitude(r,function(Ve){je<Ve&&Ve<Be?Oe.GPresetElevation():document.getElementById(Oe._addUID("GPmousePositionAlt")).innerHTML=Ve})},e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}},logger$u=LoggerByDefault.getLogger("GeoportalMousePosition"),MousePosition=class Hf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Hf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MousePosition",this._initialize(e),this.container=this._initContainer(this.options),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){var t=this;if(e){var ke=this._createMapCenter();if(e.getViewport().appendChild(ke),!this.collapsed&&!this._isDesktop&&(ke.className="GPmapCenterVisible"),this.draggable&&Draggable.dragElement(this._panelMousePositionContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||(this._isDesktop?this.listenerKey=e.on("pointermove",Be=>{this.onMouseMove(Be)}):this.listenerKey=e.on("moveend",Be=>this.onMapMove(Be)),this._showMousePositionButton.setAttribute("aria-pressed",!0)),this.options.editCoordinates){var Oe=document.createElement("img");Oe.id=this._addUID("GPmousePositionMarker"),Oe.src=this._markerUrl,Oe.title="Cliquer pour supprimer",Oe.addEventListener("click",function(){t._markerOverlay.setPosition(void 0)}),this._markerOverlay=new Overlay({offset:this._markerOffset,element:Oe,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}else unByKey(this.listenerKey);if(super.setMap(e),e!==null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),!this.collapsed)){var Ge=document.getElementById("GPshowMousePosition-"+this._uid);Ge.checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}}addSystem(e){if(typeof e!="object"){logger$u.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$u.error("crs not defined !");return}if(e.label||(logger$u.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$u.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$u.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._projectionSystems.length;t++){var ke=this._projectionSystems[t];e.crs===ke.crs&&logger$u.info("crs '{}' already configured",ke.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var Oe=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(Oe){var Ge=document.createElement("option");Ge.value=e.code,Ge.text=e.label,Oe.appendChild(Ge)}}addSystems(e){if(e){if(!Array.isArray(e)){logger$u.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");return}for(var t=0;t<e.length;t++)this.addSystem(e[t])}}removeSystem(e){if(!e||typeof e!="string"){logger$u.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");return}for(var t=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),ke=null,Oe=0;Oe<this._projectionSystems.length;Oe++){var Ge=this._projectionSystems[Oe];if(e===Ge.crs){ke=Ge.code,this._projectionSystems.splice(Oe,1);break}}if(ke==null){logger$u.log("[WARN] MousePosition:removeSystem - system not found");return}for(var Be=[],je=0;je<this._projectionSystems.length;je++)Be[Number(this._projectionSystems[je].code)]=je,this._projectionSystems[je].code=je;for(var Ve=null,Ze=0;Ze<t.childNodes.length;Ze++){if(ke===t.childNodes[je].value){Ve=Ze;continue}t.childNodes[je].value=Be[Number(t.childNodes[je].value)]}Ve!=null&&t.removeChild(t.childNodes[Ve]),this._currentProjectionSystems.code===Number(ke)&&(t.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(t.childNodes[0].value))}setUnits(e){!e||!Array.isArray(e)||(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))}setAltitudeOptions(e){if(!(!e||typeof e!="object")&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var t in e.serviceOptions)e.serviceOptions.hasOwnProperty(t)&&(this.options.altitude.serviceOptions[t]=e.serviceOptions[t])}displayAltitude(e){e!==void 0&&(this.options.displayAltitude=e,this._setElevationPanel(e))}displayCoordinates(e){e!==void 0&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))}setCollapsed(e){if(e===void 0){logger$u.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e)}getContainer(){return this.container}_initialize(e){if(e=e||{},this.options=e,this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=e.displayAltitude!==void 0?e.displayAltitude:!0,this.options.displayCoordinates=e.displayCoordinates!==void 0?e.displayCoordinates:!0,this.options.displayCoordinates?this.options.editCoordinates=e.editCoordinates!==void 0?e.editCoordinates:!1:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var t=e.altitude;this.options.altitude={triggerDelay:t.triggerDelay!==void 0?t.triggerDelay:200,responseDelay:t.responseDelay!==void 0?t.responseDelay:500,serviceOptions:t.serviceOptions||{},noDataValue:t.noDataValue!==void 0?t.noDataValue:-99999,noDataValueTolerance:t.noDataValueTolerance!==void 0?t.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=this.options.id||SelectorID.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=Helper.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,!this.options.displayAltitude&&!this.options.displayCoordinates&&(this.options.displayCoordinates=!0),this.listenerKey=null}_initMarker(e){if(this.options.editCoordinates){if(!e){this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset;return}this._hideMarker=e.hide!==void 0?e.hide:!1,e.offset?Array.isArray(e.offset)&&e.offset.length===2?this._markerOffset=e.offset:(logger$u.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=Marker.defaultOffset):this._markerOffset=Marker.defaultOffset;var t=e.url;t?t.match(/^[a-zA-Z]+$/)?this._markerUrl=Marker[t]!==void 0?Marker[t]:Marker.lightOrange:this._markerUrl=t:this._markerUrl=Marker.lightOrange}}_initProjectionSystems(){for(var e=[{label:"Géographique",crs:get$3("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:get$3("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:get$3("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:get$3("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],t=this.options.systems,ke=0;ke<t.length;ke++){var Oe=t[ke];this.addSystem(Oe)}if(this._projectionSystems.length===0)for(var Ge=0;Ge<e.length;Ge++)this.addSystem(e[Ge])}_initProjectionUnits(){var e={Geographical:[{code:"DEC",label:"Degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"Degrés sexagésimaux",format:MathUtils.coordinateToDMS},{code:"RAD",label:"Radians",format:MathUtils.coordinateToRad},{code:"GON",label:"Grades",format:MathUtils.coordinateToGon}],Metric:[{code:"M",label:"Mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"Kilomètres",format:MathUtils.coordinateToKMeter}]},t=this.options.units;for(var ke in e)if(e.hasOwnProperty(ke)){for(var Oe=!1,Ge=0;Ge<e[ke].length;Ge++)for(var Be=e[ke][Ge],je=0;je<t.length;je++){var Ve=t[je];Be.code===Ve&&(Oe=!0,this._projectionUnits[ke]||(this._projectionUnits[ke]=[]),this._projectionUnits[ke].push(Be))}Oe||(this._projectionUnits[ke]=e[ke])}typeof this._projectionUnits=="object"&&Object.keys(this._projectionUnits).length===0&&(this._projectionUnits=e)}_getCurrentProjectionInformation(){for(var e=[this._currentProjectionSystems.label,"en"],t=this._projectionUnits[this._currentProjectionType],ke=0;ke<t.length;++ke)if(t[ke].code===this._currentProjectionUnits){e.push(t[ke].label);break}return e.join(" ")}_initContainer(){var e=this._createMainContainerElement(),t=this._showMousePositionButton=this._createShowMousePositionPictoElement();e.appendChild(t);var ke=this._panelMousePositionContainer=this._createMousePositionPanelElement(),Oe=this._createMousePositionPanelDivElement();ke.appendChild(Oe);var Ge=this._panelHeaderContainer=this._createMousePositionPanelHeaderElement(),Be=this._panelTitleContainer=this._createMousePositionPanelTitleElement();Ge.appendChild(Be);var je=this._panelCloseButton=this._createMousePositionPanelCloseElement();Ge.appendChild(je),Oe.appendChild(Ge);var Ve=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);Oe.appendChild(Ve);var Ze=this._createShowMousePositionSettingsElement(this.options.displayCoordinates);Oe.appendChild(Ze);var Qe=this._createMousePositionSettingsElement(),en=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),tn=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return Qe.appendChild(en),Qe.appendChild(tn),Oe.appendChild(Qe),e.appendChild(ke),e}_setElevationPanel(e){var t=null;e?(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display=""):(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display="none")}_setCoordinatesPanel(e){var t=document.getElementById("GPmousePositionCoordinate-"+this._uid);e?t.style.display="":t.style.display="none"}_setSettingsPanel(e){var t=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),ke=document.getElementById("GPmousePositionSettings-"+this._uid);e?(t.style.display="",ke.style.display=""):(t.style.display="none",ke.style.display="none")}_setTypeUnitsPanel(e){for(var t=this._projectionUnitsContainer;t.firstChild;)t.removeChild(t.firstChild);for(var ke=this._projectionUnits[e],Oe=0;Oe<ke.length;Oe++){var Ge=ke[Oe],Be=document.createElement("option");Be.value=Ge.code?Ge.code:Oe,Be.text=Ge.label||Oe,t.appendChild(Be)}var je=this._projectionUnits[e][0].code;(this._currentProjectionUnits==="DMS"||je==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,e,je),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(je),this._currentProjectionUnits=je}_setCoordinate(e,t){var ke={},Oe=this._currentProjectionSystems.crs;if(!Oe){logger$u.log("ERROR : system crs not found");return}e=transform$1(e,t,Oe);for(var Ge=this._currentProjectionSystems.type,Be=null,je=this._projectionUnits[Ge],Ve=0;Ve<je.length;Ve++)if(je[Ve].code===this._currentProjectionUnits){Be=je[Ve].format;break}if(!Be||typeof Be!="function"){logger$u.log("WARNING : coordinates format function not found");return}else ke=Be(e);!ke||Object.keys(ke).length===0||this.GPdisplayCoords(ke)}_setElevation(e){var t=this.options.altitude.responseDelay,ke=this.options.altitude.noDataValue,Oe=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(e,t,ke,Oe)}onMoveStopped(e,t){var ke=transform$1(e,t,"EPSG:4326");this._setElevation(ke)}onMouseMove(e){var t=this,ke=e.coordinate;if(!(!e.map||!e.map.getView())){var Oe=e.map.getView().getProjection();this._setCoordinate(ke,Oe),clearTimeout(this._timer),this._timer=setTimeout(function(){t.onMoveStopped(ke,Oe)},this.options.altitude.triggerDelay)}}onMapMove(){var e=this,t=this.getMap();if(!(!t||!t.getView())){var ke=t.getView(),Oe=ke.getCenter(),Ge=ke.getProjection();this._setCoordinate(Oe,Ge),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(Oe,Ge)},this.options.altitude.triggerDelay)}}onRequestAltitude(e,t){if(!(!e||Object.keys(e).length===0)&&this.options.displayAltitude){var ke=this.options.altitude.serviceOptions||{},Oe=ke.protocol||"XHR",Ge=ke.timeOut||0;Oe==="JSONP"&&Ge===0&&(Ge=15e3);var Be=ke.outputFormat||"json",je=!0,je;ke.zonly===!1?je=ke.zonly:je=!0;var Ve=ke.measures||!1,Ze=[{lon:e[0],lat:e[1]}],Qe=ke.resource,en=this,tn=ke.rawResponse||!1,an=ke.onSuccess||null,cn=null,dn=null;tn?cn=function(pn){an&&an.call(this,pn),logger$u.log("alti service raw response : ",pn)}:cn=function(pn){pn&&Object.keys(pn).length&&(an&&an.call(this,pn),t.call(this,pn.elevations[0].z))},dn=function(pn){logger$u.log("[getAltitude] ERROR : "+pn.message)};var hn=ke.apiKey||this.options.apiKey;typeof ke.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?ke.ssl=this.options.ssl:ke.ssl=!0);var fn=ke.ssl;Gp$1.Services.getAltitude({apiKey:hn,protocol:Oe,ssl:fn,timeOut:Ge,scope:en,outputFormat:Be,rawResponse:tn,onSuccess:cn,onFailure:dn,zonly:je,measures:Ve,resource:Qe,positions:Ze})}}onShowMousePositionClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._showMousePositionButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),ke==="false"?unByKey(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=t.on("pointermove",Oe=>{this.onMouseMove(Oe)}):(this.listenerKey=t.on("moveend",Oe=>this.onMapMove(Oe)),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}onShowMousePositionSettingsClick(e){this.draggable||e.target.ariaPressed}onMousePositionEditModeClick(e){if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var t=this.getMap();this._isDesktop?this.editing?unByKey(this.listenerKey):(this.listenerKey=t.on("pointermove",ke=>{this.onMouseMove(ke)}),this.onMapMove()):this.editing?unByKey(this.listenerKey):(this.listenerKey=t.on("moveend",ke=>this.onMapMove(ke)),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}}getCoordinate(e){var t=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),ke=t.value;if(!ke||(ke=ke.replace(",","."),!MathUtils.isInteger(ke)))return null;var Oe=MathUtils.toInteger(ke);if(Oe<Number(t.dataset.min)||Oe>Number(t.dataset.max))return null;var Ge=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,Be=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),je=Be.value;if(je&&(je=je.replace(",","."),MathUtils.isInteger(je))){var Ve=MathUtils.toInteger(je);Ve>=Number(Be.dataset.min)&&Ve<=Number(Be.dataset.max)&&(Oe+=Ve/60)}var Ze=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),Qe=Ze.value;if(Qe){Qe=Qe.replace(",",".");var en=MathUtils.toFloat(Qe);en&&en>=Number(Ze.dataset.min)&&en<=Number(Ze.dataset.max)&&(Oe+=en/3600)}return(Ge==="O"||Ge==="S")&&(Oe=-Oe),Oe}locateDMSCoordinates(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(!(e[0]===null||e[1]===null)){var t=this._currentProjectionSystems.crs;if(!t){logger$u.log("ERROR : system crs not found");return}var ke=this.getMap().getView(),Oe=transform$1(e,t,ke.getProjection());ke.setCenter(Oe),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(Oe)}}locateCoordinates(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),e=MathUtils.toFloat(e),e!==null){var t=document.getElementById(this._addUID("GPmousePositionLat")).value;if(t=t.replace(",","."),t=MathUtils.toFloat(t),t!==null){var ke=this._currentProjectionSystems.crs;if(!ke){logger$u.log("ERROR : system crs not found");return}var Oe;this._currentProjectionSystems.type==="Geographical"?Oe=[this.convert(e),this.convert(t)]:Oe=[this.convert(t),this.convert(e)];var Ge=transform$1(Oe,this._currentProjectionSystems.crs,"EPSG:4326"),Be=this._currentProjectionSystems.geoBBox;if(Be){var je=[Be.left,Be.bottom,Be.right,Be.top];if(Ge[0]<je[0]||Ge[0]>je[2]||Ge[1]<je[1]||Ge[1]>je[3])return}var Ve=this.getMap().getView(),Ze=transform$1(Oe,ke,Ve.getProjection());Ve.setCenter(Ze),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(Ze)}}}onMousePositionEditModeLocateClick(){if(this.options.editCoordinates){if(!this.editing){this.onMousePositionEditModeClick(!0);return}this._currentProjectionUnits==="DMS"?this.locateDMSCoordinates():this.locateCoordinates();var e=this.options.mapCenterCallback;if(typeof e=="function"){var t=this.getMap().getView(),ke=t.getCenter();e.call(this,ke)}}}onMousePositionProjectionSystemChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value;this._setCurrentSystem(ke)}_setCurrentSystem(e){for(var t=null,ke=0;ke<this._projectionSystems.length;++ke)if(this._projectionSystems[ke].code===Number(e)){t=this._projectionSystems[ke].type;break}if(!t){logger$u.log("system not found in projection systems container");return}this._currentProjectionSystems=this._projectionSystems[Number(e)],t!==this._currentProjectionType&&this._setTypeUnitsPanel(t),this._isDesktop||this.onMapMove()}onMousePositionProjectionSystemMouseOver(e){logger$u.trace(e);var t=this.getMap();if(!(!t||!t.getView())){var ke=t.getView(),Oe=ke.getProjection(),Ge=ke.calculateExtent(t.getSize());Ge=transformExtent(Ge,Oe,"EPSG:4326");var Be=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));Be.innerHTML="";for(var je=0;je<this._projectionSystems.length;je++){var Ve=this._projectionSystems[je],Ze=null;if(Ve.geoBBox&&(Ge[0]>Ve.geoBBox.right||Ge[1]>Ve.geoBBox.top||Ge[2]<Ve.geoBBox.left||Ge[3]<Ve.geoBBox.bottom)){Ve===this._currentProjectionSystems&&(Ze=document.createElement("option"),Ze.value=Ve.code,Ze.text=Ve.label||je,Ze.setAttribute("selected","selected"),Ze.setAttribute("disabled","disabled"),Be.appendChild(Ze));continue}var Qe=document.createElement("option");Qe.value=Ve.code,Qe.text=Ve.label||je,Ve===this._currentProjectionSystems&&Qe.setAttribute("selected","selected"),Be.appendChild(Qe)}}}onMousePositionProjectionUnitsChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value,Oe=this._currentProjectionUnits;this._currentProjectionUnits=ke,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),(Oe==="DMS"||this._currentProjectionUnits==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()}convert(e){var t;if(this._currentProjectionUnits==="M"||this._currentProjectionUnits==="DEC")t=e;else if(this._currentProjectionUnits==="KM")t=e*1e3;else if(this._currentProjectionUnits==="RAD"){var ke=(180/Math.PI).toFixed(20);t=(e*ke).toFixed(20)}else if(this._currentProjectionUnits==="GON"){var Oe=.9.toFixed(20);t=(e*Oe).toFixed(20)}return t}validateExtentCoordinate(e,t){if(["Lon","Lat"].indexOf(e)===-1)return!1;var ke=t.replace(",",".");if(ke=MathUtils.toFloat(ke),ke===null)return!1;ke=this.convert(ke);var Oe=this._currentProjectionSystems.geoBBox;if(Oe===void 0)return!0;var Ge=[Oe.left,Oe.bottom,Oe.right,Oe.top];return Ge=transformExtent(Ge,"EPSG:4326",this._currentProjectionSystems.crs),!(e==="Lat"&&(ke<Ge[0]||ke>Ge[2])||e==="Lon"&&(ke<Ge[1]||ke>Ge[3]))}};Object.assign(MousePosition.prototype,MousePositionDOM);Object.assign(MousePosition.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=MousePosition);var MarkersOther={drawing_portail:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD//////////////////////////////////////////////////////////fv/+fL//////////////////////////////////////////////////////////////////////////////////////v7//////fr/////+vL//////////////////Pj//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////9+v/9ej/9+z/7tT/3q3/y3//v2D/uU//+O7/5L3/xW//piH/mQH/mAD//v7/79f/yXj/oxr/lwD/mQD//fv/58T/tkr/mQL//v3/58P/sTz/79b/tUf/x3X/mQP/5Lv/oRX/ng3/s0H/w2n/u1b/4rf/8Nr/9eb/7tX/pBv/x3P/8d7/3av/79j///7/zH//mgX/2qP//vz/9+3/wGH/qyz/6Mb/vFj/sj//7NH/wGL/rTP/6sr/+fH/yXf/oBP/37H/2aH/6sz/nw//oBT/0pD/+vT/9OX/uE7/pB3/y33/7ND//Pj/26b/mwj/nAn/sT7/w2r/zYL/8+P/ulT/mwb/5Lz/qCj/+/b/1JT/nQz/nQ3/9uj/w2j/mAH/9un/6sv/skH/lwH/3Kf/pB7/pR7/3Kj/nAj/y37/+/f/8t//mQT/rDD/rDH/1JX/7tb/4LT/pR//z4j/z4n/vFn/7dP/4rn//fq31ydlAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKnVAysoAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDM6MjIrMDA6MDB1WI3HAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACplBMVEUAAAD//////////////////////////////////////////////////////////fz/9/P//////////////////////////////////////////////////////////////////////////////////////v7//////Pr/////////////////////+/n//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////8+3/8er/9O7/5dj/zrX/s4z/oHH/lmL/9fD/2MT/qX7/ejj/Zxz/Zhn/Zhr//v7/59z/rof/djL/ZBf/Zxv//fz/3Mr/k13/aBz/ZRn//f3/i1D/5tr/kVr/ZRj/rIP//v3/1sL/cy3/byf/jVX/pnn/aB3/mmf/077/6d7/8On/5tn/dzT/q4H/6+H/zbP/lmH/s43/ah//yK3/9O//oXL/gUP/3cz/m2n/jVT/5Nb/onP/hkn/4ND/9vL/rob/cSv/0Ln/x6r/Zxr/Yxb/pXn/8+7/4NH/cCj/ciz/vZz/+PX/7+f/lWH/eDT/sov/49X/+/n/ya//ayH/bCP/jFL/pnr/tJD/7ub/mWb/ZBb/aiD/18P/fj3/+vf/vp//bSX/bib/v5//pXj/8uv/yrD/eDX/eTb/y7H/bCL/soz/7OL/18T/g0b/hEb/v6D/cy7/wKH/9vP/5tv/jlX/59v/0rz/ejf/uJX/nGr/aR//nGv/g0X/1cD//PvyoJNrAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAA0JJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/oBAICvLzcnOykyTExRhh8pJSRcUlpWWFheVgUFhYVlpSXCQlCVHBKC0jW1FZVV1TjgRqqqsqK2RlpEEq5OQVaivrygrLUUBhWV1lrYK8HNAALp6k+oZGNHmgisaG+iQeLkYGQXHF1KZ8mO2NZWUwtYX5TamK4oIMXErNLa0FEKGatvbMzPa2GoiSgtaWZiUuBmWV5I5GiHxnV3dPb29Pd1cnREVjR7KKMoOqWl9/IcTICROLkoCgaOIEiJWF/X1qqgzqGpPA3MKyycVgeaCK4slgTxXmT9JQZ9AUmAJRPnVaRRIUVEybChGbIqDJoDV9BpjTOHNWEhzMmgl2VuGM6VoMScmzwQrK5sxFKJg7pwysYHZyEoP29HkQE+YvQChYMB9iwrzp2gw6CxeBFRQsXlIEky9ashgcMoWLFuow6OotBXOWLV+xEqZg5Yrly8CalurpMugbrFoNMWLN2nUQ+XVr10AMWL3KQJ/B0Gj9BkhINm7ctBkkv3nTRqjAhvVGhgzGJlu2boMG7fYdO3ft2rljOzTot23dYmLMYGqmvXvPXmgE7i3bt69sLzQ69+7ZrW1mysBpblGx/0AjLLGBAITdeGB/hYU5JwOjpaHVwUOHMRPMkaMHrQwtgWmO0dpGO+VYAXqSK+g4bmtnDU61nPYOjgvaURNdYWP7Kkcne05Ispdzdqk4cbIGSUVhzanTFa7OcrCMIejmfnDTmQKEgoIzZw+6eyCyFqenl/e5PeVwIwrL95zz9vLkRMqcPr5J5y/AHFpYcPG8qK8Pavb2k026dBkaGo2XryTJ+qPIMzAE2KlcXbEN7IyCbR1XVQIDUOUZGIOC+a61VwMtKay+foMvJAjNAKCK0LCkm7dAIX3rZlJYOIY8UIVkRMXtI4WFR25XREhikQcGeWRU8p27d+8lR0VaY1MAdEa0bdr9+2m20UFY5YEqYmJrHzyojY3BIQ+M+bj4hw/j4yxxKQA6IyExMQHVAQBpWLIaKI0lIgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDQ6MDYrMDA6MDAh7rXQAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD/////////////////////////////////////////////////////////+/v/8vL//////////////////////////////////////////////////////////////////////////////////////v7/////+vr/////////////////////+Pj//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////6+v/6Oj/7Oz/1NT/ra3/f3//YGD/T0//7u7/vb3/b2//ISH/AQH/AAD//v7/19f/eHj/Ghr/+/v/xMT/Skr/AgL//f3/w8P/PDz/1tb/R0f/dXX/AwP/u7v/FRX/DQ3/QUH/aWn/Vlb/t7f/2tr/5ub/1dX/Gxv/c3P/3t7/q6v/2Nj/BQX/o6P//Pz/7e3/YWH/LCz/xsb/WFj/Pz//0dH/YmL/MzP/ysr/8fH/d3f/ExP/sbH/oaH/zMz/Dw//FBT/kJD/9PT/5eX/Tk7/HR3/fX3/0ND/+Pj/pqb/CAj/CQn/Pj7/amr/goL/4+P/VFT/Bgb/vLz/KCj/9vb/lJT/DAz/aGj/6en/y8v/p6f/Hh7/qKj/fn7/9/f/39//BAT/MDD/MTH/lZX/tLT/Hx//iIj/iYn/WVn/09P/ubn/+vpgzcAPAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo0NDoxOSswMDowMBsMxacAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACf1BMVEUAAAD//////////////////////////////////////////////////////////P3/9Pn//////////////////////////////////////////////////////////////////////////////////////v7/////+/3/////9fr/////////////////+vz//////////////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7/////////////7/f/7PX/8Pf/3O7/vd7/mcv/gL//c7n/8fj/yuT/jMX/Tab/NJn/MZj/Mpj//v7/3+//k8n/R6P/L5f/M5n//P3/0Of/brb//f7/z+f/Y7H/MJf/bLX/kcf/yeT/Q6H/PZ7/ZrP/h8P/d7v/xeL/4fD/6/X/3e7/SaT/j8f/5PH/u93/crn//v//mMz/N5r/tdr/gcD/Vqv/0ej/ebz/ZrL/2uz/gsD/XK3/1er/8/n/ksn/QaD/wN//tNn/1ur/P5//QqD/ptL/9vr/6vT/cbj/l8v/+vz/t9v/OJv/Opz/ZLH/iMP/m83/6fP/d7r/N5v/Uqj/Mpn/+Pv/qdT/PJ3/7fb/Z7L/uNz/SqT/S6X/udz/OZz/mMv/5fL/drr/Waz/Wqz/qtT/RKH/q9T/9Pn/3u7/Z7P/w+D/TKX/oM//PZ3/erz/Npr/3O3/x+L/+/0F2pMDAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM4SURBVDjLdZNnWxNBFIVnEZGEGpBeROkSuoIUwS4KFkTFQp+wFEWzk+AmEFhEDBZQlA5ioxcRsCDYELADSvlBbnY2kACeTztz3r1znztnAOBEEAYbDDcabTKG0HiT0UbDDQYEAXRECIQmpmbmFpaS7GyJpYW5mamJUKBDECIr6802ZE5uXv6lS/l5uTmkzWZrK9EyQdja2cPLBVeuSinEipJevVJwGdrb2RJa38FRJi+8RiOk4IQQfa1QLnN0wATh5OyiLCqWUgodUdLiIqWLs5OGcN3ipiopZZBCT4gpLVG5bXFlCwhNobxsta8hyuTQVEgAkd1W8rpUezrDSvstvU5utRMB4TZV+Q18PqIqbubn36ygMELdKFdtEwJ3D4ma4X+pvHX7zp3btyr5goxa4uEOPL3uViHsV9+TQVaye9WYQFV3vTyBt899bomYGvkDyOmBvIZrBEnv+3gD3+0PMV5bp4K8VHW1eO/hdl/gR9ZzC6ahES6rsYFrC9WTfgBKmjiAbm5ZAVqaaQ5okkAgJltxhUdtK0DbI1yhlRQD/8dPOIB6+kym9WXPnnKTQU8e+4OAwOe4IVpNagFSTeO954EBICi4vQOvOru6sd/d1Yl3OtqDg0BIaE8vnjRT1dfCniJr6avCo6V6e0JDwI6d/QMv+NEOvhwaHh56OciP/sVA/84dICxcPPKK5i+Qpl+/pmn+OulXI+LwMCDYFaEsf8PH6a0mk2/5UL0pV0bsEgAiMiRq9N3Y2sCMvRuNColkM0dE7xaPq6nVkaPU4zGx0VxqBXv27mtr1g8dYt637du/R4Bj73rgoPLDR90aiPr0WXnogKv2YYgOx432Tejknhr8Mhp3ZOVpCY7GJ0xOKZZLIMXUZEL8UYHO4zx2HBZMaw9B1NcCm+PH9J/3CRf47Tt/CPX9B3Q5qecDkBjr8VON26Amhn56nErU9wGRdNr8129NfJH0t9z8TNKqAixxNhnOzGpGPTsDk8+t8VnC4bxybgyhP3PK8w7r+OzIL1yU/J2f/yu5eCF6PYBtIyVmYXp6ISYlaV2fJVLTVIuLqrTU//jszadnLC1lpEf+D2DbyMzKytRv4B+n7ayGbXJj1gAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDQ6MjkrMDA6MDCVg8JEAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACslBMVEUAAAD////////////////////////////////////////////////////////+/fz79/T////////////////////////////////////////////////////////////////////////////////////+/v7////9/Pv////79/X////////////////9+/r////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////58+/48ez69PDz5dzpzr3cspnUoIDQlXP69PHt18rYqIzDeU27ZjS6ZTG6ZTL+/v7059/brpPCdUe6Yy+7ZjP+/fzv29DOkm67ZzS6ZDH+/f3v28/LiWO6YzD05t/OkGy6ZDDarJH+/v3t1snAckO+bj3MjWbUn4DXpYfRmXfr08X16eH48Ovz5t3CdknZqo/26+TozLvQlXL//v7dspi8aTfmyLXUoIHGgFbv3NHSm3m5Yy/LjGby49rVoYLIhVzx39X79vPbrZK/cEHq0MDmxrS6ZjK5Yi/58/Dx4Na+bz/AcULhvab8+Pb47+rPlHHCd0ncsZf9+/rnybe9aji9azrLi2TXpojdtJv37unt18nFfVK7ZTL8+vjivqm+bTziv6n58e3WpIfWpYfx4NXMjWfnyrjCd0rDeEvoyrm9azncsZj27OXRmHbHg1nIg1rt2Mriv6rAckTjwKv79vS8ajm9ajnXpYj05t7r0sPDeUzfuKC+bT3Sm3q8aTbIglns1cf9/Pua7OXrAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANISURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlRUUVYFBUVF5WWlIsJQlRwSgtI1tZVV1TW4EEamuqqyplZaRBKuTkFerqGxqLKlBAUWNDfZ2CvBzQAC6e5KbmFjR5oIqW5qZkHi5GBkFxxbTWApjtLY2NMLVFBa1piuKCDFxKbe0dhRCh2s6u7u6uzlqIksKO9jYlLgZllZSeFoh8TW9f/4QJ/X29NRAVLT0pKsoMqmoTJxVBjJw8pTgZCIqnTIZYWTRpopoqg7rGVDC3qHFayfRkMJheMg3sqaKCqRrqDJpaMyDKZ86qS4aCulkzIWIztDQZtNNmgzktc+Ymw8HcOWBnFc1O02ZITpkHVjB/wUKEgoUL5oMVzEtJZtBJWwQxYfEShIIliyEmLErTYdBdugysoHD5imKYfPGK5eCQKVq2VJdBT38lWMGq1T1rYArW9KxeBVawUl+PwcBw7TqIk9dv2AiR37hhPURk3VpDAwYj402bITHdsmXrQqAtxQu3boEEbe3mTcZGDCam27bvgAbtzl279+zZvWsnNOh3bN9masJgZq6zt3c+NALnz585c/58aHTO792rY27GwGlhWblvPzQ5HQClyQPQRLV/X6WlBScDo5WR9cFDhzETzOEjB62NrIBpjtHGVufosUL0JFd4/KidvQ041XI6ODqd6EJNdEUtJ084OTtwQpK9nItr5anTtUgqimrPnK10c5GDZQxBd4+DW88VIhQU7jx/0MMTkbU4vbx9LlysgBtRVHHxgo+3FydS5vT1S869BHNoUeHlK6J+vqjZ2182+eo1aGjUXrueLBuAIs/AEGivcqPnJtgZhbdu31AJCkSVZ2AMDuG7cxKU3otqTpbwhQajGQBUERaefPceKKjv3U0Oj8CQB6qQjKy8f7io6MH9ykhJLPLAII+KTnn46NHDlOgoG2wKgM6IsUt//DjdLiYYqzxQRWxc3ZMndXGxOOSBMR+f8PRpQrwVLgVAZyQmJSWiOgAArqa4BP2YBKMAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ0OjQ2KzAwOjAwpaS7KgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAChVBMVEUAAAD//////////////////////////////////////////////////////////vv//fL//////////////////////////////////////////////////////////////////////////////////////v7//////vr//////////////////////vj//////v///////////////////////////////////////////////////////////////////v7//////////////////////////////////////v7//////////////////////////////////////////////////////////////////////////////v7//////////////Ov/++j//Oz/+dT/863/7X//6mD/50///O7/9r3/62//4SH/3QH/3AD//v7/+df/7Xj/4Br/3QD//vv/98T/5kr/3QL//v3/98P/5Tz/+db/5kf/7HX/3QP/9rv/4BX/3g3/5UH/6WD/62n/6Fb/9bf/+tr/++b/+dX/4Bv/7HP/+t7///7/86v/+dj/3QX/8qP//vz//O3/6mH/4iz/98b/6Fj/5T//+dH/6mL/4zP/+Mr//fH/7Hf/3xP/9LH/8qH/6mn/+Mz/3g//3xT/8JD//fT/++X/507/4B3/7X3/+ND//vj/86b/3Qj/3gn/5T7/62r/7oL/++P/6FT/3Qb/9rz/4ij//fb/8ZT/3gz//Oj/62j/3AH//On/+Mv/86f/4R7/86j/7n7//vf/+t//3QT/4zD/4zH/8JX/3xX/3gj/9bT/4R//74j/74n/6Fn/+dP/9bn//vrsMn7uAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAxZJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSVAqVIwADJKiosKpSQhKhilZWTLyisqobJQNZUV5WWyMtIgFXLyClXVNQUo8iBTaqqrFOTlgAZw8STV1qHLg1TU1SbxcDEyCIorptY3IGxHuKShPlVRXJCBS6mqsakAKt3c0tra0gxVUtDUWKXExaCsktwGFahs7+js6ursaIc6uKAtWUWZQVWtuwfML8jv7etPAoL+vt58iEhPt5oqg7rGBDC3oCBrYmESGBROzALbUpA/QUOdQVMgA6J80uQpSVAwZfIkiFiGgCaD1tRpEM70GUlwMGM6RGzaVC2GpOSZEM6s2QgFs2dBxGYmJzFoT50D4cydh1Awby5EbM5UbQad+QsgnIWLCmHyhYsWQsQWzNdh0NVbDPX1klSYgtQlUKHFeroM+gZLl0GUL1+xEiK/csVyiMiypQb6DIZGq1ZD1a9Zuw5oS+G6tWugAqtXGRkyGJus37ARKrBp85atW7ds3gTlbtyw3sSYwdRMe9t2RGTu2IGIzu3btM1MGTjNLcp27oIlB0Rslxbs2llmYc7JwGhpaLV7z17MBNO8Z7eVoSUwzTFa22jv238APckd2HLQ1s4anGo57R0cD7Wgqig40HLI0cmeE5Ls5Zxdyg4fQVZQUHDkaJmrsxwsYwi6ue9euxFJRcGmY8fdPRBZi9PTy/vE9pNwFQUnt5/w9vLkRMqcPr5JOacQOet0jqivD2r29pNNOnMWpuDsmSRZfxR5BoYAO5X5becgcbSpbb5KYACqPANjUDBfbQsoAxU0tBTxhQShGQBUERqWdP4CKKgvnE8KC8eQB6qQjCi7uLegYO+lsghJLPLAII+MSr48adLl5KhIa2wKgM6Itr1y6tQV2+ggrPJAFTGxU65enRIbg0MeGPNx8deuxcdZ4lIAdEZCYmICqgMA6f6os3UKuXAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ0OjU4KzAwOjAwOTHA6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACr1BMVEUAAAD////////////////////////////////////////////////////////7/v3y+/n////////////////////////////////////////////////////////////////////////////////////+/v7////6/f3////y+/r////////////////4/fz//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r+ffo+PXs+ffU8+2t591/28tg0r5Pzbju+vi97ORv1sQhwKUBt5gAtpf+/v7X9O942ckavqIAtZYAt5j7/v3E7udKy7UCt5j9/v7D7uY8x7DW8+5Hy7QAtpZ118cDt5i77OQVvKANup1BybJg0b5p1cJWz7q36uLa9PDm9/XV8u4bvqNz18be9fGr59zY8+9/2ssFuJmj5dr8/v7t+fdh0r8sw6rG7+hYz7s/ybHR8uxi0r8zxazK8Onx+/l32MgTvJ+x6N+h5Nlp1MLM8OoPu54UvJ+Q39L0/Prl9/ROzbcdv6N92srQ8ez4/fym5tsIuJoJuZs+yLBq1cOC28zj9/NUz7oGuJq87OMowaf2/PuU4NQMupwNupyU4dTo+PZo1MIBtpdq1cLp+fbL8OoBtpan5tsev6Mev6So5twIuZt+2sv3/Pvf9fJUzroEt5gwxKsxxKuV4NQVvaCV4dTW8+/X8++06eEfv6T7/f2I3c6J3c9Zz7wFuJrT8u256+L6/f3ow7cxAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMvSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN/QiCYPVNHYUJ/Mw8XIICiumNbUDLO9sawMprawuSlNUVyQgUuppqW1EOq4tvaOjvY2qGMLW1tqlLgYlFVSOhuhDuvq7unt7enugjq4sTNFRZlBVa2vH8wvLJgwsSgZCIomTiiAiPT3qakyqGtMAnMLG7Mng+WBKiZngx1SWDBJQ51BU2sKRPnUadOToWD6tKkQsSlamgzaM2aCOY2zZifDwexZYGcVzpyhzZCcMgesoGzuPISCeXPLwArmpCQz6MyYDzFhwUKEgoULICbMn6HDoLtoMcS+JUuLYPJFS5dAxBYv0mXQ018G4ZQtT4MpSFsOiZrCZfp6DAaGK1ZCeKtWr4HIr1m9CiKycoWhAYOR8dp10IBbv2Ej0JaijRvWQ4N23VpjIwYT002bt0BVbN22fceO7du2QuW3bN5kasJgZq6zc1cZLBGU7d5dBksaZbt26pibMXBaWFbs2QtLDqAkCWPu3VNhacHJwGhlZL1v/wHMBHPw0D5rIytgmmO0sdU5fOQoepI7euy4nb0NONVyOjg6nWg/iZpoT7afcHJ24IQkezkX14pTpwuRVBQWnjlb4eYiB8sYgu4e+zacQ1aw9fwFD09E1uL08va5eOkyXEXh5UsXfby9OJEyp69fcu4VRM66mivq54uavf1lk6+1whRcv5EsG4Aiz8AQaK+yaDnEGYVbly9SCQpElWdgDA7hu9kOykCFze23+EKD0QwAqggLT759BxTUd24nh0dgyANVSEbevXegsPDA/buRkljkgUEeFZ3y4OHDBynRUTbYFACdEWP36MqVR3YxwVjlgSpi46Y/fjw9LhaHPDDm4xOePEmIt8KlAOiMxKSkRFQHAAAsgrQ2sknLAAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDU6MTIrMDA6MDD2yfpjAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACfFBMVEUAAAD////////////////////////////////////////////////////////8/vz0/fT////////////////////////////////////////////////////////////////////////////////////+/v7////7/vv////1/fX////////////////6/vr//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////v/O/s++zw/PDc+dy9872Z7ZmA6oBz53Px/PHK9sqM64xN4U003TQx3DEy3DL+/v7f+d+T7ZNH4Ecv3C8z3TP8/vzQ99Bu5m79/v3P989j5WMw3DBs5myR7JHJ9slD4EM93j1m5WaA6YCH64d36HfF9cXh+uHr++vd+d1J4EmP7I/k+uT+//6787ty53KY7Zg33Te18rWB6oFW4lbR99F56Hna+dqC6oJc41zV+NXz/fOS7JJB30HA9MC08rQy3TKH6ofW+NY/3j9C30Km8Kb2/fbq++px53GX7Zfa+Nr6/vq387c43Tg63jpk5WSI64ib7pvp++lS4lL4/fip8ak83jzt/O1n5We487hK4UpL4Uu587k53TmY7pj4/vjl+uV26HZZ41la41qq8KpE30Sr8Kv0/fQ53jne+d7D9cNM4Uyg76B66Ho23TbH9cf7/vts+qXUAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM8SURBVDjLdZP3X9NQFMVfFIUWLJRpVcoeYlVEQEUExIUyFFFRcfJqqiyb12paDQQKpQXZorJXARcbFRC3oohb/yHTJIUW8fyU5Hxz7/3cdx4ArDBs2XK7FSvtHSB0sF+5wm75MgwDVsIEQkenVSJnF/mlS3IXZ9EqJ0ehwIrAxK5u7h644vKVnNzcnCuXFbiHu5ureJ7APL1Ww7z8gqtKAjEilFcL8vPgai9PzOJL1qjU166TCGlYIURev6ZWrZFwBLZ2nbf2xk0lobESobx5Q+u9bq2ZkPr4UoVFNNLYCNFFhZSvj5QpIHSC6uLFvpkoVkMnIQbEXn54idLSnWZkeVaW4H5eYiD0p3SlXH9ElOnLy/VlBIcQpTrKXwgCAuUGmv/FWFF561ZlhZEvSBvkgQEgKLiqGnF+TW0dZFRXW8MRqLoqOAiEhNazr4huUKsgK5W6gR0EKetDQ8D6sNsc3niHgryoO43ct9th68EG/C77Qt9rgvNquseOhe7iGwCUN7MAqW9ZAFr0JAs0yyGQ4a1chbb2BaC9javQisvAxo5OFiC6ulUWX9XdxW4GdXZsBJs297CAiezFLQDeS5pYoGfzJhC+pa+fG/n+g4ec//DBfe5Lf9+WcBCx9dFjbtN09cAg00U1OFDNrZZ4/GhrBIiMGhoe4Vc7Ojb+5Mn42Ci/+pHhoahIEL1N9tRI8gdIko2NJMkfJ2l8KtsWDQTbd2h1z/g4mcyZNPGheqbT7tguAFhMxM6Jyal/AzM1ObEzIobJHBa7S/bcQCyOHGF4Hhcfy6ZWkLA7sV1vGzpET7cn7kkQcLGX7t2nffGSMFn//+q1dv9eqeViiA8kTQy8sco9Mfr2XdLBhaslOJSc8v6DZr4J0nx4n5J8SGB1OVPTYP6MZVBEfMz3SEu1vd6HveGnWb4JMfsZeh+x8QFIjw+cM3xhCeLL+Fzg0XRbH2AZx0Rfp83xRcppteh4xqICDHEiE377bl71928w8+Q/PkNITml/TCFU9kN7SrKEz6z8dJb8569fP+VZp2OXApgxzsQpZmYUcWcylvQZ4uw56vdv6tzZ//jMyZ+/8OfPhfMx/wOYMS5mZ1+0HeAvs9msMpv5tz0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ1OjQxKzAwOjAwj8HumgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACr1BMVEUAAAD////////////////////////////////////////////////////////9/vv5+/L////////////////////////////////////////////////////////////////////////////////////+/v7////9/fr////5+/P////////////////8/fn////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////3+uz1+en3+u3t9Nbd6rHK34W912i20lj4+u/j7sDD23ajxyyWvw6VvguVvgz+/v7u9drH3X+gxSWUvgmWvw39/vvm8Me00VP+/v3m8MauzkXu9Nmz0FDG3HyUvgrj7r+exCCbwhqwz0rB2XGWvw+51F7h7Lrv9dz0+Oft9NehxifF3Hrx9t/c6a+201j+//7K3oaYwBHZ56j+/vy+12moyjfn8Mn2+uy61WCwzkns89P3+u6+12qryz7p8c35+/HH3X6dwx7e67XY56aVvg2UvQjq8s6cwhuexB/R45b6/PT0+Oa20leVvgqhxijJ3oT8/fna6KqYwBOZwRavzkfB2XLL34nz+OS41F2UvQmYwBKmyDGWvwz7/PfS5JmawRebwhjT5JrB2XD1+erp8s79/vzb6ayiximixir7/PbJ3oOZwRXK3oTx9+Cpyzuqyzvj7sGexCH5+/KZwBSwz0vu9dng7LijxivO4Y6awRjO4Y+61WGXwBHt89Wpyzri7bz9/frM0I39AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANESURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlhUUVYFBUWF5WWlIsJQlRwSgtI1tZVV1QWIEECguqqyplZaRBKuTkFWpq68qLKlBAUXldbY2CvBzQAC6e5PoGdHmQiob6ZB4uRgZBccW0xgKY7U3l5U0wdkFjmqK4IAOXUk1zSyHUca1tWVltrVDHFrY01yhxMSirpLQ3QeQ7Oru6e3q6uzo7ICqa2lNUlBlU1Xr7iiBG9k8oTgaC4gn9ECuL+nrVVBnUNSaCuUXlk0omJ4PB5JJJYEcXFUzUUGfQ1JoCUT512vRkKJg+bSpEbIqWJoN22gwwp2nmrGQ4mDUT7KyiGWnaDMmz54AVlM+dh1Awb245WMGc2ckMOvMXQBQsXIRQsGghRMGC+ToMuouXgBUULl1WDJMvXrYUHDJFSxbrMujpLwdzVqxsT4MpSGtfuQKsabm+HoOB4arVECPWrF0HkV+3dg3EgNWrDA0YjIzXb9gICbhNm+cBbSmet3kTJGg3blhvbMRgYrpl6zZo0G7fsXPXrp07tkODftvWLaYmDGbmOrv3rIQmk5V79+3buxKadFbu2a1jbsbAaWFZ2bwfYknFAVCaPABhb9zfXGlpwcnAaGVkffDQYcwEc+ToQWsjK2CaY7Sx1Uk9Voie5Ap3HreztwGnWk4HR6cTbU0oKoqa2k44OTtwQpK9nIvryVOnNyKpKNp45tRJNxc5WMYQdPc4e+48UrovPH/hoIcnImtxenn7XNxTATeiqGLPRR9vL06kzOnrl5x7CZGzLl8R9fNFzd7+sslHr0JDY+PVo8myASjyDAyB9irX2q+DnVF4vf2aSlAgqjwDY3AIX30bKPkWFdy4yRcajGYAUEVYePKt26Cgvn0rOTwCQx6oQjKy8s7doqK79yojJbHIA4M8Knr2/QcP7s+OjrLBpgDojBi7h48ePbSLCcYqD1QRGzf98ePpcbE45IExH5/w5ElCvBUuBUBnJCYlJaI6AADXv7i4Kd/lawAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NDk6NDUrMDA6MDBhsioHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACnVBMVEUAAAD////////////////////////////////////////////////////////7/fvy+fL////////////////////////////////////////////////////////////////////////////////////+/v7////6/Pr////////////////////4/Pj////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r9uvo9Ojs9uzU69St2K1/w39gtWBPrU/u9+694L1vu28hlyEBiAEAhwD+/v7X7Nd4wHgalBoAhgAAiAD7/fvE48RKqkoCiAL9/v3D48M8pDzW7NZHqUd1vnUDiAO737sVkRUNjg1BpkFgtGBpuWkCiQJWsFa33bfa7drm8+bV69UblBtzvXPe796r16vY7Nj+//4FigWj1KP8/fzt9u1htWEsnCzG5Mbr9etYsVg/pT/R6dFitmIzoDPK5srx+PF3wHcTkBOx2rGh06EAhQDM58wPjg8UkRSQy5D0+vTl8uVOrE4dlR19wn3Q6dD4/Pim1aYIiwgJjAk+pD5qumqCxYLj8uNUr1QGiga837womij2+/aUzZQMjQwNjQ1ouGgBhwFquWrp9OnL5ssBhgGn1qcelR4elh6o1qj2+vZ+w373+/ff8N8EiAQwnjAxnjGVzZUVkhUJiwm03LQflh+IyIiJyIlZsVnT6tP8/vy53rn6/Pq97PRtAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAzFJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSWlBQVlYFBQUFpSXFQoJQlRwSgtI1teUVkFlYWqqaqsKJeVkQapkJNXqK6pLUWRB6oora2pVpCXAxrAxZNUV48uD1JRX5fEw8XIICiumNrQCLO9FAhg7MaGVEVxQQYupeqm5gKo41pa29paW6COLWhuqlbiYlBWSW4vhQh0dHZ19/R0d3V2QFSUtierKDOoqvX2gfkF+f0TCpOAoHBCfz5EpK9XTZVBXWMimFtQmjVpchIYTJ6UBXZIQf5EDXUGTYEMiPIpU6clQcG0qVMgYhkCmgxa02eAOaUzZyXBwayZYGcVzJiuxZA0ew5Ewdx5CAXz5kIUzJmdxKA9fT5EwYKFCAULF0AUzJ+uzaCzaDHEviVLC2HyhUuXQMQWL9Jh0NVbBuEsb0+FKUhtXw4RW6any6BvsGIlhLdq9RqI/JrVqyAiK1cY6DMYGq1dBwnJ0vUbNgJDYvLGDeuhAuvWGhkyGJts2rwFGrRbt23fsWP7tq3QoN+yeZOJMYOpmfbOXcuhEbi8dPfu0uXQ6Fy+a6e2mSkDp7lF+Z69pbBUUABLd2Wle/eUW5hzMjBaGlrt238AM8Ec3L/PytASmOYYrW20Uw4dRk9yh48ctbWzBqdaTnsHx2Otx1ET7fHWY45O9pyQZC/n7FJ+4mQBkoqCglOny12d5WAZQ9DN/cyGLcgKtp495+6ByFqcnl7e53ddgKsouLDrvLeXJydS5vTxTcq5iMhZl3JEfX1Qs7efbNLlK9DQKL1yOUnWH0WegSHATmVRO8QZBVfbF6kEBqDKMzAGBfPVtYIyUEFjaxFfSBCaAUAVoWFJ166Dgvr6taSwcAx5oArJiPIbBwoKDtwsj5DEIg8M8sio2bemTLk1OyrSGpsCoDOibW9fvHjbNjoIqzxQRUzsnbt378TG4JAHxnxc/L178XGWuBQAnZGQmJiA6gAAFLyvxAL3bxQAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjQ5OjU2KzAwOjAwnPAwBAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD////////////////////////////////////////////////////////7//3y//n////////////////////////////////////////////////////////////////////////////////////+//7////6//3////y//r////////////////4//z////////////////////////////////////////////////////////////////////////+//7////////////////////////////////////+//7////////////////////////////////////////////////////////////////////////////+//7////////////r//fo//Xs//fU/+6t/95//8tg/79P/7nu//i9/+Rv/8Uh/6YB/5kA/5j+//7X/+94/8ka/6MA/5cA/5n7//3E/+dK/7YC/5n9//7D/+c8/7HW/+9H/7V1/8cD/5m7/+QV/6EN/55B/7Np/8NW/7u3/+La//Dm//XV/+4b/6Rz/8fe//Gr/93Y/+/+//9//8wF/5qj/9r8//7t//dh/8As/6vG/+hY/7w//7LR/+xi/8Az/63K/+rx//l3/8kT/6Cx/9+h/9nM/+oP/58U/6CQ/9L0//rl//RO/7gd/6R9/8vQ/+z4//ym/9sI/5sJ/5w+/7Fq/8OC/83j//NU/7oG/5u8/+Qo/6j2//uU/9QM/50N/53o//Zo/8MB/5jp//bL/+pB/7IB/5en/9we/6Qe/6Wo/9wI/5x+/8v3//vf//IE/5kw/6wx/6yV/9TW/+60/+Af/6WI/8+J/89Z/7zT/+25/+L6//2DMMmrAAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTA6MDYrMDA6MDDpi8pqAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD////////////////////////////////////////////////////////7///y///////////////////////////////////////////////////////////////////////////////////////+///////6///////////////////////4///////////////////////////////////////////////////////////////////////////+///////////////////////////////////////+///////////////////////////////////////////////////////////////////////////////+///////////////r///o///s///U//+t//9///9g//9P///u//+9//9v//8h//8B//8A///+///X//94//8a///7///E//9K//8C///9///D//88///W//9H//91//8D//+7//8V//8N//9B//9p//9W//+3///a///m///V//8b//9z///e//+r///Y//8F//+j///8///t//9h//8s///G//9Y//8////R//9i//8z///K///x//93//8T//+x//+h///M//8P//8U//+Q///0///l//9O//8d//99///Q///4//+m//8I//8J//8+//9q//+C///j//9U//8G//+8//8o///2//+U//8M//9o///p///L//+n//8e//+o//9+///3///f//8E//8w//8x//+V//+0//8f//+I//+J//9Z///T//+5///6//8Ngdu6AAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MDoyMSswMDowMG4J85kAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACu1BMVEUAAAD////////////////////////////////////////////////////////8/f3y9/r////////////////////////////////////////////////////////////////////////////////////+/v7////6/P3////z9/r////////////////5+/z//////v/////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////s8/jp8fft9PjW5vCwz+KEtdJno8hXmcLu9fnA2Oh1q80qfrIMa6cJaqYKaqb+/v7Z6PF+sdAkea8HaKULa6f8/f3G3epRlcAJaab9/f7G3OpEjrsHaaXY5/FOlL97rs8Iaab9/v6+2Ocfdq0Yc6tJkb1no8dvqMsIaaUNbKhdncS61ebb6fLn8PbX5vAle7B5rs7f7POuzuGFtdMPbainyt/8/f5oo8g1hbbI3utfnsVHkLzT5O/u9PhppMk8ibjM4Ozx9/p9sNAcda200eSlyN4La6YGaKVwqMvO4e0Zc6wddq2Vv9j0+Pvm8PZWmMIme7GDs9LS5O/+/v/5+/ypy98Rb6kTcKpGj7xxqcyIt9Pk7/VcnMQQbqj7/f0wgbQKaqf3+vyYwdkVcaoWcquZwdpvp8vq8vfN4e1JkL2rzOAnfLEofLGszOH2+vyCs9ITb6mDtNLg7PNbnMQ5h7c5h7jA2egfd66awtry9/pvqMoSb6kMbKe30+UpfbGNutaOutZgn8XV5vC81ub7/P0PF+8/AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAANLSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oLAICAoL8vNyc5IlxMUYYfKSUsUlpWXlhUUVYFBUWF5WWlIsJQlRwSgtI1tZVV1QU4EEagqqqyplZaRBKuTkFWrr6huKKlBAUUN9Xa2CvBzQAC6e5MYmdHmQiqbGZB4uRgZBccW05gKY7S3l5S0wdkFzmqK4IAOXUmtbeyFEqKajs6urs6MGoqSwva1ViYtBWSWluwci39vXP2HixAn9fb0QFT3dKSrKDKpqkyYXQYycMrU4GQiKp06BWFk0eZKaKoO6xjQwt6ghuwQsD1RRkg12dFHBNA11Bk2t6RDlM2bOSoaCWTNnQMSma2kyaKfNBnNa5sxNhoO5c1rACmanaTMkp8wDKyifvwChYMH8crCCeSnJDDoLF4EVNCxeglCwZHEDWMGihToMukuXgRUULl9RDJMvXrEcHDJFy5bqMujprwRzVq1ekwZTkLZm9SqwppX6egwGhmvXQYxYv2EjRH7jhvUQA9atNTRgMDLetBns5IqWLVu3bU9O3r5t6xaowOZNxkYMJqY7du6CBG3L7j179+3bu2c3RL5o184dpiYMZuY6+w+shkRg4erygwfLV0OirmL1gf065mYMnBaWh9oOQ/RUHAGlySMQdsvhtkOWFpwMjFZG1kePHcdMMCdOHrU2sgKmOUYbW53UU4XoSa5wzWk7extwquV0cHQ6c7YFRUVRy9kzTs4OnJBkL+fiWnnuPLKKopYLFyvdXORgGUPQ3ePS5SuFCAWFu68e9fBEZC1OL2+fa9cr4EYUVRy45uPtxYmUOX39knNvIHLWzVuifr6o2dtfNvnkbWhotNy+kywbgCLPwBBor3L33n2wMwrvr7mrEhSIKs/AGBzC13j2AdCSogdnS/hCg9EMAKoIC09++AgU1I8eJodHYMgDVUhGHnp8oqjoxJNDkZJY5IFBHhWd8nTGjKcp0VE22BQAnRFj9+zGjWd2McFY5YEqYuNmPX8+Ky4Whzww5uMTXrxIiLfCpQDojMSkpERUBwAAPAa7YJpbYIgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUwOjM0KzAwOjAw8JvcoAAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACzVBMVEUAAAD////////////////////////////////////////////////////////7/Pzy9Pb////////////////////////////////////////////////////////////////////////////////////+/v7////6+/v////////////////////4+fr////////////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////r7/Ho7O/s7/LU2+GtusZ/lKdge5JPbIfu8fO9yNFvh5whRWYBK1AAKE8AKU/+/v7X3uR4j6IaP2EAJk0AKlD7/PzEztZKZ4ICK1EAKE79/f3DzdY8XHkAJ03W3eNHZYB1jKADK1EAJ067xtAVO14NNVlBYHxgepHr7vFpgpgCLFFWcou3ws3a4OXm6u3V2+IbQWMBK1Fzip7e4+iruMVPbIbY3uQFLlOjssD8/f3t8PJhe5IsT27Gz9hYc4w/X3vR2d9ifJMzVXPK09vx8/V3jqITOVyxvcmhsL4AKVAAJUzM1NwPNloUOl2QorP09vfl6e1Oa4UdQmN9k6bQ2N/4+fqmtMIIL1QJMVY+XXpqg5mCl6nj6OxUcYoAJkwGL1S8x9EoSmr2+PmUpbUMM1cNNFiUprVogZgBKE5qgpjp7PDL1NsBJ06ntcIeQmQeQ2WotsP29/l9kqUIMVV+k6b3+Pnf5OlUcIoEKlAwUnExUnG9yNKVprYVPF4IMFUJMFVBYH3X3uO0wMwfRGWInK0MNFiJnK5ZdI3T2uEwUnC5xM/6+/yAxxLtAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAA0hJREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/oBAICvLzcnOykyTExRhh8pJSRcUlpWWFheVgUFhYVlpSXCQlCVHBKC0jW1FZVV1TjgRqqqsqK2RlpEEq5OQVauvqGwrLUUBhQ31drYK8HNAALp6kxiZ0eZCKpsYkHi5GBkFxxdTmFpjtrWVlrTB2S3OqorggA5dSbVs7xP7Cmo7Orq7OjhqIkpr2tlolLgZlle6eBoh8b1//hIkTJ/T39UJUNPR0qygzqKpNmgzmF06ZOq0oCQiKpk2dAhGZPElNlUFdY3p+IdhRM2aC5YEqZs4AO7owf7qGOoOmQAZE+azZc5KgYM7sWRCxDAFNBq2588Cc1vkLkuBgwfxWsIJ5c7UYkroXghWULVqMULB4URlYwcLuJAbtuUvAChqWLkMoWLYU7LHCJXO1GXSWrwArKFi5qggmX7RqZQFYwYrlOgy6eqvBCtas7UmFKUjtWbsGrGC1ni6DvsG69RAnb9i4CSK/aeMGiMj6dQb6DIZGm7dAQrp167btQFuKtm/b2goJ6y2bjQwZjE127NwFCdrW3Xv27tu3d89uiHzhrp07TIwZTM209x84CI3AgwcPHTp4EBqdBw/s1zYzZeA0t6g4fKQGlthAAJqojhyusDDnZGC0NLQ6euw4ZoI5cfKolaElMM0xWttop5w6jZ7kTp85a2tnDU61nPYOjuc6z6OoKDzfec7RyZ4TkuzlnF0qLlysQVJRWHPpcoWrsxwsYwi6uV+5eg0p3dfsvn7D3QORtTg9vbxv3roNN6Lw9q2b3l6enEiZ08c3KecOzJLCmrv3RH19ULO3n2zSfWjiLq95cD9J1h9FnoEhwE5lec9DcCQXPOpZrhIYgCrPwBgUzNfYCcpAhS2Pn/CFBKEZAFQRGpb09BkopJ89TQoLx5AHqpCMqHj+orDwxcuKCEks8sAgj4zqfjVr1qvuqEhrbAqAzoi2ff3mzWvb6CCs8kAVMbFz3r6dExuDQx4Y83Hx797Fx1niUgB0RkJiYgKqAwC8prs7Sn3FCAAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTA6NDMrMDA6MDA/+es3AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACfFBMVEUAAAD////////////////////////////////////////////////////////8/P709P3////////////////////////////////////////////////////////////////////////////////////+/v7////7+/7////19f3////////////////6+v7///////7////////////////////////////////////////////////////////////////+/v7////////////////////////////////////+/v7////////////////////////////////////////////////////////////////////////////+/v7////////////v7/zs7Pvw8Pzc3Pm9vfOZme2AgOpzc+fx8fzKyvaMjOtNTeE0NN0xMdwyMtz+/v7f3/mTk+1HR+AvL9wzM938/P7Q0Pdubub9/f7Pz/djY+UwMNxsbOaRkezJyfZDQ+A9Pd5mZuWAgOmHh+t3d+jFxfXh4frr6/vd3flJSeCPj+zk5Pr+/v+7u/NycueYmO03N921tfKBgepWVuLR0fd5eeja2vmCgupcXOPV1fjz8/2SkuxBQd/AwPS0tPIyMt2Hh+rW1vg/P95CQt+mpvD29v3q6vtxceeXl+3a2vj6+v63t/M4ON06Ot5kZOWIiOubm+7p6ftSUuL4+P2pqfE8PN7t7fxnZ+W4uPNKSuFLS+G5ufM5Od2YmO74+P7l5fp2duhZWeNaWuOqqvBERN+rq/D09P05Od7e3vnDw/VMTOGgoO96eug2Nt3Hx/X7+/4Nm4E+AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAM8SURBVDjLdZP3X9NQFMVfFIUWLJRpVcoeYlVEQEUExIUyFFFRcfJqqiyb12paDQQKpQXZorJXARcbFRC3oohb/yHTJIUW8fyU5Hxz7/3cdx4ArDBs2XK7FSvtHSB0sF+5wm75MgwDVsIEQkenVSJnF/mlS3IXZ9EqJ0ehwIrAxK5u7h644vKVnNzcnCuXFbiHu5ureJ7APL1Ww7z8gqtKAjEilFcL8vPgai9PzOJL1qjU166TCGlYIURev6ZWrZFwBLZ2nbf2xk0lobESobx5Q+u9bq2ZkPr4UoVFNNLYCNFFhZSvj5QpIHSC6uLFvpkoVkMnIQbEXn54idLSnWZkeVaW4H5eYiD0p3SlXH9ElOnLy/VlBIcQpTrKXwgCAuUGmv/FWFF561ZlhZEvSBvkgQEgKLiqGnF+TW0dZFRXW8MRqLoqOAiEhNazr4huUKsgK5W6gR0EKetDQ8D6sNsc3niHgryoO43ct9th68EG/C77Qt9rgvNquseOhe7iGwCUN7MAqW9ZAFr0JAs0yyGQ4a1chbb2BaC9javQisvAxo5OFiC6ulUWX9XdxW4GdXZsBJs297CAiezFLQDeS5pYoGfzJhC+pa+fG/n+g4ec//DBfe5Lf9+WcBCx9dFjbtN09cAg00U1OFDNrZZ4/GhrBIiMGhoe4Vc7Ojb+5Mn42Ci/+pHhoahIEL1N9tRI8gdIko2NJMkfJ2l8KtsWDQTbd2h1z/g4mcyZNPGheqbT7tguAFhMxM6Jyal/AzM1ObEzIobJHBa7S/bcQCyOHGF4Hhcfy6ZWkLA7sV1vGzpET7cn7kkQcLGX7t2nffGSMFn//+q1dv9eqeViiA8kTQy8sco9Mfr2XdLBhaslOJSc8v6DZr4J0nx4n5J8SGB1OVPTYP6MZVBEfMz3SEu1vd6HveGnWb4JMfsZeh+x8QFIjw+cM3xhCeLL+Fzg0XRbH2AZx0Rfp83xRcppteh4xqICDHEiE377bl71928w8+Q/PkNITml/TCFU9kN7SrKEz6z8dJb8569fP+VZp2OXApgxzsQpZmYUcWcylvQZ4uw56vdv6tzZ//jMyZ+/8OfPhfMx/wOYMS5mZ1+0HeAvs9msMpv5tz0AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUwOjU2KzAwOjAwoWvEDgAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACTFBMVEUAAAD////////////////////////////////////////////////////////9/v/5+v/////////////////////////////////////////////////////////////////////////////////////+/v/////8/f/////////////////////8/P///////v/////////////////////////////////////////////////////////////////+/v/////////////////////////////////////+/v/////////////////////////////////////////////////////////////////////////////+/v/////////////2+P/09//r8P/Y5P/D1P+1yv+txP/3+f/g6f+7z/+Xtf+Iqv+Hqf/+/v/s8f/A0v+Usv+GqP/9/f/j6/+qwv+kvv+pwf++0f+Gqf/f6P+RsP+Orv+mv/+0yv+5zf+Jq/+wxv/d5//t8v/z9v+Us/+90P/v9P/X4/+Kq//U4P/9/v/2+f+cuP/k7P/1+P+xx/+lv//p7/+2yv+gu//m7f/4+v+Qr//a5P/T3/+FqP/n7f/L2v/6+//y9v+sxP+Vs//C1P/8/P/V4f+LrP+Mrf+6zf/F1f/y9f+vxv+KrP+atv/7/P/N2/+Nrf+Nrv+4zP/W4v+VtP+WtP/6/P/C0/+MrP/D0//w9P+euv+SsP+Ssf/N3P/c5v/I1//q8P/e5//8/f/tCMxjAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAyFJREFUOMt1k+db01AUxm+U1QKllT0KAlXUInsjoOICRREVFZGRMMrKTSFlBVoKKGgZUqZShiJDUUARFyrrHzPkJrRlnE855/09J+9z7jkAcIFhx47b2NrZO+C4g72drc3xYxgGLAITiR2dnCUuUqKkhJC6SJydHMUiCwKTnXB1cydKy8pVFRWq8rJSwt3N9YRsj8A8PL3wyqrqGhJyQdZUV1XiXp4emKB7+1Dq2jqalbiAkK6rVVM+3ojAfP3kmvoGkld5hmyo18j9fHcJ/4CTVH0jbaWzBN1YT50M8GcbiJ1wddN+fZdoUuNOYgzIPAOJZqE/ZGiaEb7JZiLQUwbEQVRLK+TNaXVtbTotbxa2tlBBYhCsIPQ0KrR3dD57/vxZZ0c7Img9oQgGp06XdkHUsvsFhbNBvehGv4RdpadPgZAzL7kU0hVqnA91BWcaki/PhICz0nKEG3p6BaC3x4Bq5dKz4FyfikuY/lf4XrzqZzhA1XcO4ANGDqAHh8zA0CDnGxoHcKDsG0bAyKgZGB1BwHCfEoSO1aL/vX5DCTr15jWq1Y6FgvNh4ygx6QkBIPQmVBsPOw/CIya0KGudnEL61CQaLdRORISDyKjpt5xlknk3w/kcmnnHF95OR0WC6Jj3s3NotMx848KHDwuN80iHc7PvY6JBbJzy46KJf0AT/ekTbeKf07T4URkXC0TxCZqWz4ywBVDYO5L53KJJiBcBLDEyaWl55eDCfFleSopMZHcOS76gLPkK968c1JekpCZzWytKu3hpVMdYLy2jG710OU2E1t4//Ypm9ZtlDwjXVjVX0/2Fw5Bdu/79x5wl8PPX0vUb5tMSZWTe/L1ovgxILv6+mZkhsjjOW1l41br5star3LNuWZ/3bTm+/IefBvP3Hy6/Y6UDkJ2qGNMjG3BOP6a4m22tAyznnkSt27UBSZ1acj9nXwOWeJCLb6ztjnptA899eEBnCe9Hms0VCFc2NY+8D9HZkT/OGzAaDMaBvMfJhwGsjScpW+vrWylPcg7VWSL/KbW9TT3NP0JnX76gcGensCDxKIC1UVRcXGRt4D+SPpTGEJHXggAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTE6MDYrMDA6MDAGSaFUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAClFBMVEUAAAD////////////////////////////////////////////////////////9+//58v/////////////////////////////////////////////////////////////////////////////////////+/v/////9+v/////68v/////////////////8+P/////////////////////////////////////////////////////////////////////////+/v/////////////////////////////////////+/v/////////////////////////////////////////////////////////////////////////////+/v/////////////36//16P/37P/u1P/erf/Lf/+/YP+5T//47v/kvf/Fb/+mIf+ZAf+YAP/+/v/v1//JeP+jGv+XAP+ZAP/9+//nxP+2Sv+ZAv/+/f/nw/+xPP/v1v+1R//Hdf+ZA//ku/+hFf+eDf+zQf/Daf+7Vv/it//w2v/15v/u1f+kG//Hc//x3v/dq//v2P///v/Mf/+aBf/ao//+/P/37f/AYf+rLP/oxv+8WP+yP//s0f/AYv+tM//qyv/58f/Jd/+gE//fsf/Zof/qzP+fD/+gFP/SkP/69P/05f+4Tv+kHf/Lff/s0P/8+P/bpv+bCP+cCf+xPv/Dav/Ngv/z4/+6VP+bBv/kvP+oKP/79v/UlP+dDP+dDf/26P/DaP+YAf/26f/qy/+yQf+XAf/cp/+kHv+lHv/cqP+cCP/Lfv/79//y3/+ZBP+sMP+sMf/Ulf/u1v/gtP+lH//PiP/Pif+8Wf/t0//iuf/9+v/1rAt3AAAAY3RSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD++P3qw/2N+0j2GMcHYx68BOkMd/x2IKf+pjrS0WDvXxSL+Cy3TEsIdRyhoDXINOSK8rY72mnrhe2jCycJAAAAAWJLR0QB/wIt3gAAAAd0SU1FB+cFGQAhKwJH+lwAAAMmSURBVDjLY2AAA0ZGJmYWVjZ2juRkDnY2VhZmJkZGBiTAyMnFzcPLxy+QkpqaIsDPx8vDzcWJpIJRUEhYRDQtPSMzKzs7KzMjPU1URFhIEK6CUUxcIjknNy+/oBAMCvLzcnOSJcTFGGHyklJFxSWlZYWF5WBQWFhWWlJcJCUJUcEoLSNbUVlVDZWFqqmuqqyQlZEGqZCTV6iprStDkQeqKKurrVGQlwMawMWTXN+ALg9S0VCfzMPFyCAorpjW2ASzvQwIYOymxjRFcUEGLqWa5pZCqONa27Ky2lqhji1saa5R4mJQVklpL4M6rKOzq7u7q7MD6uCy9hQVZQZVtZ5eML+woK+/KBkIivr7CiAivT1qqgzqGhPA3MKy7ImTksFg0sRssEMKCyZoqDNoak2GKJ8ydVoyFEybOgUiNllLk0F7+gwwp2zmrGQ4mDUT7KzCGdO1GZJTZkMUzJmLUDB3DkTB7JRkBp3p8yAK5i9AKFgwH6Jg3nQdBt2FiyD2LV5SBJMvWrIYIrZooS6Dnv5SCKesPQ2mIK0dEpyFS/X1GAwMly2H8FasXAWRX7VyBURk+TJDAwYj49VroAG3dt16oC1F69ethQbtmtXGRgwmphs2boKq2Lxl67ZtW7dshspv2rjB1ITBzFxn+44yeGTu3AmPzrId23XMzRg4LSwrdu2GJQdQkoQxd++qsLTgZGC0MrLes3cfZoLZv3ePtZEVMM0x2tjqHDh4CD3JHdp62M7eBpxqOR0cnY4cPYaaaI8dPeLk7MAJSfZyLq4Vx08UIqkoLDx5qsLNRQ6WMQTdPfasO42sYPOZsx6eiKzF6eXtc27HebiKwvM7zvl4e3EiZU5fv+TcC4icdTFX1M8XNXv7yyZfaoEpaLmULBuAIs/AEGivsrAd4ozCze0LVYICUeUZGIND+C63gTJQYVNbMV9oMJoBQBVh4clXroKC+uqV5PAIDHmgCsnIimv7Cgv3Xa+IlMQiDwzyqOiUG1Om3EiJjrLBpgDojBi7mxcu3LSLCcYqD1QRGzft1q1pcbE45IExH59w+3ZCvBUuBUBnJCYlJaI6AABB269xUXFElwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyOTozNyswMDowMEpaoL8AAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjI6NTE6MjArMDA6MDAnvJMTAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAMAAABjq9sOAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACbVBMVEUAAAD/////////////////////////////////////////////////////////+///8v///////////////////////////////////////////////////////////////////////////////////////v//////+v//////////////////////+P///////////////////////////////////////////////////////////////////////////v///////////////////////////////////////v///////////////////////////////////////////////////////////////////////////////v//////////////6///6P//7P//1P//rf//f///YP//T///7v//vf//b///If//Af//AP///v//1///eP//Gv//+///xP//Sv//Av///f//w///PP//1v//R///df//A///u///Ff//Df//Qf//af//Vv//t///2v//5v//1f//G///c///3v//q///2P//Bf//o////P//7f//Yf//LP//xv//WP//P///0f//Yv//M///yv//8f//d///E///sf//of//zP//D///FP//kP//9P//5f//Tv//Hf//ff//0P//+P//pv//CP//Cf//Pv//av//gv//4///VP//Bv//vP//KP//9v//lP//DP//aP//6f//y///p///Hv//qP//fv//9///3///BP//MP//Mf//lf//tP//H///iP//if//Wf//0///uf//+v8BRUUXAAAAYnRSTlMAAAMQLWqp1fMBEUOe6Pn8/gUukuz+CU3EW9kGUNsCMsvxrzbuePq1/OD4/erD/Y37SPYYxwdjHrwE6Qx3/HYgp/6mOtLRYO9fFIv4LLdMSwh1HKGgNcg05IrytjvaaeuF7djGYAwAAAABYktHRAH/Ai3eAAAAB3RJTUUH5wUZACErAkf6XAAAAu1JREFUOMtjYAADRkYmZhZWNnaOpCQOdjZWFmYmRkYGJMDIycXNw8vHL5CckpIswM/Hy8PNxYmkglFQSFhENDUtPSMzKyszIz0tVVREWEgQroJRTFwiKTsnNy+/AAzy83JzspMkxMUYYfKSUoVFxSUFSKCkuKhQShKiglFaRra0rLyiAAVUlJeVyspIg1TIyStUVlUXYIDqqkoFeTmgAVw8STW1BVhAbU0SDxcjg6C4YmpdPTYF9XWpiuKCDFxKlQ2NMLGm5szM5iYYr7GhUomLQVkluQXmsNa29o6O9rZWmINbklWUGVTVOrug3u/uKUwCgsKebmiAdHWqqTKoa/RCuVl9YHmgir4sqJZeDXUGTYEMCK9/wsQkKJg4oR8iliGgyaA1aTKEM2VqEhxMnQIRmzxJiyEpeRqEM30GQsGM6RCxaclJDNqTZkI4s2YjFMyeBRGbOUmbQWfOXAhn3vxCmHzh/HkQsblzdBh09RbAfJ0KU5AKC5kFeroM+gYLF0F4i5cshcgvXbIYIrJooYE+g6HRsuVQ9StWrgLaUrhq5QqowPJlRoYMxiar16yFCqxbv2Hjxg3r10G5a9esNjFmMDXT3rQZEYVbtiDYmzdpm5kycJpblG7dhi26t20ttTDnZGC0NLTavmMnpnzTju1WhpbANMdobaOdsisfXT5/w25bO2twquW0d3Dc04ymIr95j6OTPSck2cs5u5Tu3YeqYN/+UldnOVjGEHRz375yLbL8ugMH3T0QWYvT08v70ObDCPnDmw95e3lyImVOH9+knCMIBUdzRH19ULO3n2zSMXjibjyWJOuPIs/AEGCnMqcF6ox1LXNUAgNQ5RkYg4L5aprBGai+uYgvJAjNAKCK0LCk4ydACk4cTwoLx5AHqpCMKD0JDPKdp0ojJLHIA4M8Mir5dH//6eSoSGtsCoDOiLY9c+TIGdvoIKzyQBUxsRPPnp0YG4NDHhjzcfHnzsXHWeJSAHRGQmJiAqoDAOgCnVLAYqeOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MTo0MiswMDowMHZMi70AAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAADj0lEQVRIx5WWO2xURxSGvzN7H7a0AdFRkFSQBovKqcCyBF0kmlDS0SHRpkJKEYmGEBeENImFRJMoLlLk4caJrCguEDSguMEijYMQAu+uwfZ672v+FHe93nu9fnCmO3P+f87jn7nXGDIBNPiAD5limgk+oglsssoyf/E3/7FBAcZIEzKd0CXd1yslPve+ULm897kSvdJ9XdIJmfaBhzqnu1qTL5QrUVeb2tCGNtVVolyF5LWmuzqnUCPg47qsJalQqi2tq63W0GprXVtKVUjSki5rfIfC+rWP8xlf6GNPSoLf3RruDo6YCIet8CU/s21llCDiU77S6YJtMvZtEgJCxmlgz/mceVLDAY4Jbh4OL3cytinQaW4ygQMnOM4NJv2h8GEKD5Pc4LhwhFzgiifZA9fQqlMkeLjCBUJHk2s6VpBW4EIYITExIVYhMSClQMe4RjPgDNMixVfgJdhhgCjz0yDC8KQ0sGnOBFxUU2S1XsfENAaeBg5Hb4gCMsZQ0y46pnBFZQuiCrykiIkqnRAFOKYcZ0uC4fQj3J7+OyKsEleA46zjpMzXTnMjhmm4WlYeGScd8d7Q0VoY6Y8dvu6rzv0Qv3e0rFaxx48IFb52lsOg5XiGH67N8GQjCbKKVqABnmeOR+YdrgLJSGsUIq1pxeEwzyPHApkjqOWQ0KMYeAp6JLXzAxxkLDie8NRqMzYKenTpss02Xbr0KGpSjzB4yhNHh1nzAWFtZCKj119ZTakQEmCeWTqOlAUWjZhG7draYHRWu+YNYgwWWSB1iJfcsdcBcaWMHZK6fIQjJsBec4eXyBnkLDFjPiKCfUS0C4eICCv4miVyw4HBFj8xZ4oJD6QoH9UIE3PMsWXQF6FY5RtbbhCPuIdV9cU0sH+4x2p5kitrxfOYGVsPR3RieHgxIbbODI/xxoAADHJ+Y5Zk5w0cBQ+JIWGW38ltkNNOx8UaD2zR9V+jupTLV8nJFnnA2u73dahkg2W+5XkwshPl8PiXeyxbxV+ZO3/wvXWiWhll+hHW4Tv+tBpx1Xr8wK+WjhEMKIQRMIal/MKP9DjYhD7RQylRRy211VZLHSWS9FCT4ggmdFUvvLr9f4S2uvLSC109EhyEmrqtd4U21FZbGyqkd7qt5hEJQOiU5pXnequ3yqVc8zp1ZHif4rxWvFKl8tKKzr8XHIQCXfdvvLz8G11X8J4E/U7cUkst3Tqo+v8BGqkQrMMFpyAAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUyOjAxKzAwOjAwKNkk2QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAD/0lEQVRIx5WVP2wcRRTGf29u9/44a5/Pd2cHEagIEgoFRYSQHMtSQkVJOsoICUVKi+gokFIgghubArAipTHCBVL448ZBFiI0caQ4whGKFRoTx3aS89k+fL7b3ZtHcb7zzdkOyWyzOzPf99773jezQsdQgAS9vMIIo7zJqwTAvyyzyG/8zj9UaIBw6FBUNKfn9Kquad3GsY001FAjja2Nta5relXPaU5FO1DSEd3nDT7kAwZiiaixS0gMeCTJkMbHUzaYYpK/iMQlUMjwLp8wHFNli01C3DhJ+snSgwd/8Dk32JV9AoUM7/Opvl6nRInQTa6lDkny5EkhS3zGD00KAYUk7/GFvrbDKtvoUSKhCH28xDHkAR8zQygIqOEtvtbTO6xQ4UiN25n08jLHkNt8xIJYo5DlEqdrrP4vvLlaYZUanOYSWcXgc4bzMSW2D9S9/7gU25SI4Txn8A0BF7SvSsmpXVES9FGgQB8Jh0RQSlTRPi4QeJxktEGZyIELOfKkSAAN6pQodwQQIsr04I1y0uOsBhFbXVoPUSS5B/BJkSbJupPjFoMkAjlrGMHUiBydsxTa8JaNCmTbfgCIqIFhxHDKml2HW8iR6uqGkCLn7FF2sYZThuMqobM5cwDeosg4MyEqHDekwDoLCcyhHjAknG8LkDJYugDW6XunuLaLELCGkuA7C3WiQyiUiLoz4yNQMtwXm3ZqjdiicYCgwZbjFUgjlvuGW8am8RynldnoomiwQdmxmkcaY7llmCXyCZwcYtZYp9qeqbLOGrETP8CHiFmPBe567wywje2wasgaFTL4QMQuOx2roBgG8OAuCx5lJs3bgclSdrKwVKhgWu3qckaWAGOZpGwImWXOp0i669gKYLHt9/34aYr4MMcsoUF5xBV5HDBIoqt9sve47UwwSIA85gqPUCMQc5MxY3MMwBEm2odDnhymwZfcJBYMCOzwPdOeFuh9JkXzRszjKdNMsyMtP6IsMy6LPRRJHkmhQJIiPcifTLDc3Gb2FLbMMyab/RSOOErNzQX6kU3GmMcKbQIQiPmZSannySKHngWhnzxSZ5JfiKVN2lJceco1mUtRJHOgDAUyFEmpzHGNp/v/1458BRb5igd9FLrOJ4BPgV74mwkWOxvrFCxwg28p5+nHdOSgGPrJQ5lv+NX1RbdiNab4KREOEbSVUISAIRIhP/IdNZ5FIPCQCe6kGdxraLN5g6ThDhM87L4tD/RMYJ5xVrIU9+7ABEWysMI4tw9etoc3/TpTUimQxWDIUkAqTHGd5x2KntAZjat6T+9pVTXWGT2hz41vUgzrktVN3VSruqTDLwQHRT29aJ9YtWqf6EX1XpAAFA30spa0pJc1OBr+H/Nbm042akI7AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MjoyOCswMDowMP9kZncAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAEJklEQVRIx5XVT2xc1RUG8N+9M2M79tgxJDLR1MHYjosQrdRFVFUKUSToqsuy6xJVqpDYVuy6qMSiKmSTdNHWQmKTqllUon+yIFRRVbohSAQRgRxRJXWwSQzGjpzYnsnMOyzsOPPGNoX7Nk9P9/vO+b7z5yVdJ6Bi2FEnnfI9j6vjrnlX/cu/3bSmQ7LnCZHikXguXo9b0SzarWIzNmIjNqNVFO1oxq14PZ6LRyJFFyp1Ra95ys/9zKPNtOmuVeta6DNoVN2A/vClc2Z97H4qEwQH/NjLTrSsWrTonnKcIQ0No/r4j99420Z6SBAc8FO/iu+u+Z8b1iVlpYEw6AkThqVrfu0vWxSJoM9P/LY49qWP3RL7mSQkRzzlUfkTv3RBK0lE9gO/j+PLPrQk7QvfNtqY7zskvecXrqQiBwe95Piaj/4vnCRZ8pE1jnvJwZDVPOP5phtu98BDKBSix87kthuaPO8ZtazuhRhZdb2kPYSaMVOmjKmVSJJw3aoY8YJ61YxTLQs25S549h2ThlTRds91CwoPa79pwaj+U2aqno36psVS9GTGMYM73+qGDbrWlWOyaFpfPT2bnYy8ZqOUfMOkoS7KZMikRknIhjWRncye7uQ7Jf0V44Z3+T9sXKXkwx2d7OnsSKT1nqv1PYqZ1Hto10VyJOsPnVLx+rsidZ+K/lJBO4L+rEg9gLZiT4JCu4cwUWTLyUAp1bs2SpEeZLbhbknagMRyNpeLsram21q7CFpua/Z4lQtz2bu5GFHbiZkkN833pNs272ZXq4eaEbnwbnYx3T9grCSiac6c1Z0vq+bMaZYEjDkg3Xex6ooP+n501C2drj5bN2fJQQPYdMeKdqlXK47q4wNXqlbMVn54ODfMl3qvbcnS9izYNacNh1UKs1aylosuDZgy0jO2WdLR2X7rho+YMsAlF7WysOjVvHTYjGpP+dL2Uy5nzYzD8pJXLYqcaHvH6UoxboI9OqAMZ8K4Ssdr3tFOMol7/ux8f0wa+1qKwJgn9IfzzruX2N4iYd6ZdHXUtKF9KQJDpo1KHzprfuta3tKqcNnpvNowsc8oQcWEhrzqtMuKLW/yA7u0/d1sbk5qSHvOQtIwKTfN+of2A2t3FmEKX3gjXdpKsldGYNS0oUiXvOGLh//Xh5tU4qrf+WTMpP5dGQyYMsZ/nXW1u7C5+1LibX+0MuGoSlcOoWLc46z4g3+W+yL3BNp0zt9qrWMO7TgRkkOOqbX81Z9s+jqCxKfOen/EkwbZ3sODnjTC+876tHdb9mYgcdkZC4+ZVgVV0x5jwRnv7V62uwjAm87ltUkNWd4q3ppz3vRNT4jxuBDt1Xgr3orViHZciPH4xvgtihNxrYjP4rMoIq7FiW8FJ0Q1Xiw+70Qnis/jxah+SwJC1OOVWI7leCXq+8O/AuFKp/3c1qOQAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1Mjo0MiswMDowMJ17ML4AAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAER0lEQVRIx5XVS2xV1xXG8d/evrbxC7CpMbVSECGg2qlRU5tXDEVNOmmHzazDqFIVKdOqsw4qZVA1RZGgg7ZWpEyoyqBS+qADgpxSOglYkIQE2aFCIuGNMcEOhsu9Z3WAgXts0yb7zI7O919nfevbeycNK6BJl2/YY69vWa8Tcy4445/+5VOz6iTLrhApuuPFeDOuxL167W4xF7fjdszF3aJei3txJd6MF6M7UjSoUkP1ZgN+4sd67qRZ110xYx5tuq3Tq0t7uOmgMWfdT2VA0Ob7fm503iUf+9iMcp1ugwb1a+PffuUd8+kxIGjzI7+ILTdMmHBLVu40UFht2LCvSVN+6c8PEImgxQ/9unjmgnFT6vLyJik02eJ71svn/Mxh1SQR2bf9rhi54B/OS0/y+KHRNvqB9fJJP3U6FTlY5VUjNxz9v3KS5LyjbjDiVatC1my3l+446ZNF8lAsPLEI8YmT7vCS3ZqzTi/HyosmRIM8FFbYbJttNltRgiRhwkWx0ss6Kzbbe8dHZhusC9mQYWu0oGrahA8VHs9+1kf6dey1ueKF6JxztlQ9222X7kfv1ui1yvES4qxd2jvTC9meIl/zecnnAdsb5A9itN2AaGjkc9cU2Z7s2Vq+Wuq/YsiaRdNI1hhSKflwVS17NltXTzMl73v1LBOlrEdvaR4z6sm6rDXUSoB2LctmoEV7CVATtGZF0lz62ar6soC6aqmxZokim846SoCbbpcqPfyz226WAB0y09lkpVhbAsyZMr8EMG/KXAmwVqUwmb3XVPRpa6iZfeCUakledcoHpai16dNUeC87ku6v9HQpqnOOedflhXfhsncdK9UPT1sp3Xek4rT323duNan26INsxjHn9enCrKs+VS3Vb7ZVO+87XTFjrLJ9Yx50WlNDG/edc25hL5BLySgM2qhSGDOTVR0x3mWHPkXJzCZZTU3WVDKv0GeHLsYdUc3CJa/naxs8r3XR+NLCUx7nCqM2yNe87pLIiZrj9jUXWw2zTALKcr5jSHPdbxxXSzKJL/zJoY4Ysam045bKwyYjOsIhh3yRWPAmXLA/nem3Q88TESH02KFf+tABFx58lh/0qnDCvnxr0PATthK0GDYo37LPCUXyCECi5m/GKveGfVNadi8kA4ZV7hnzd7XHmXnoeLjhrTTeY6evLzEz0G+nnkjj3nLj8f3akI/EGb917hnbdS4BdNpmE/9xwJnGwZaOnsQ7/mDmOUNaGhChxZDnmPF7R8u5WHx23XXQX1dUn7f+kRMh2WDUiqq/+KO7/hcg8ZkDTq31XasXRsdqe/RyygGfLb76lpyeiRP2u7jFTq2g1S5buGi/k0tvzuVv8rcdzLPbDGjSZMCIPOugt33ZFeKpOBy1y/FGvBGXI2pxOJ6KL61/gBiNqXpMxmTUI6Zi9CvJCVGJV4rrtahFcT1eicpXBBCiM16L6ZiO16LzyfL/AjzmtojnBFLlAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1Mjo1NCswMDowMDIBBRoAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAAEXklEQVRIx5XVS2xdxR3H8c/MuX5g/CBGTQzkATIggQt1K7fNgzgI5YVDWmjaRdsdrRQhsa2666ISi6o0m6SLtu6CRYIS1Er0EdGYEKV1GwlbTaxGRYkCgWAiYuKH4kaxfX3PdOHg3HPttDBnNXPm9x39/vObmaCqJci0WGOzLb5orWb8xyVnnfQ3H5pWIVRpQkEe3OUrvq/Piko2G8shR1SXGvKsYtJRB/3TlBSWAhJ1HvFD39N+LUz40EVjptFipQes0a41mXBIv3eUQxGQuMNWP7Zp2rtO+YcrKov0JLPKRht0auHvfuZNN8ItQOIO3/KT9PCoYwaMiUV3EnIrbbPdauG8n/r9AiKQqNfn55UH3/GqIRXR8i2X+arvekR2wY8cNRcEUtTtV3nPv/3WiFhYubYluS/5gUfFYXudCXlMtHlRz6iD/1dOEI04aJQeL2pLojpP2HPNG4Zr5EmuoiJfyEcVYtgbrrHHE+pKmj2ft15wTF7lPUnu9LBVuOK864JbG5c7pkd3a3zeYMlDtkwbNCGrkke9drhXI2Zc9hd/lS8iogmDOrVt8VDJU6l5yqnC6tEe39CxKLjXal/wuwLilG9qbQ5PRZsr8QNXC8436KuSE3Tos6FQjas+UIk2R11z8X2panq9XvfV7EZwn171Vf3kfXNRV9QxH8YKYVnrnmWiFN1jrbxqZMx80BE1JLOFqS0al81Ao5ZCf1aiIcpDjeCG8rKAshs1wEAejWfaCm4/Nl6IzqfFHfdxoTJtMsajc/X5uoLXScOmlwCmDZss1Gad+ty56O26fJ3mqjUzJx03U5DPOO5kIWrN1qnLvR0NKN/t8SpAMOU1h723OPKew14zVWUgedzdlA2UnDHSuv5JQ8pVObviiBEPaMeEi86ZKWS13pNaGXGmZFJ/3dceixu9pVRViVmnnb55FsgK7iu2eExdrt9kNGfAiXa73F+ISZDJlJVlskL1c/fbpZ0TBsxFyWUvZ2NdntVUc/JvfdXbeafndMnGvOyyFAPzBu1ryHttY5kEFNPANr0aKn5h0HwQCVx32JG70k7d0v9AJEm3HdqSI464HrhZm+SS/eFsp11W3RaRJB2e0Sn8ywGXFqbFBbdyQ/ZlUxtt13hbQKPtNsqm7DMkDxYBBOb9SX/97E5fF5c9C9F6O9TN6vdn87cy82nNk6teCSc67Na5xEaSPGi3jhROeMXVsPi7Kh+Bs37pwpf1WbEEsMLTunnXAWert7Vw9QTe9BuTW/VqqEIkDXptZdKvHS9edrV314xD/tg096xHFyuRRF2e0zTnD16tOaa1gMCoA06v9R0rb3pnpW9bw2kHjNY+fUtuz8CQ/T7q8Ywm0GS3Hj6y3/DSl3P5l/x1h7Lpp61XUrLeTtm0Q173WVuSVqejaf5i2pv2pospzaejaXX6zPoFxKZ0vpKG0lCqpHQ+bfpccpJUSi/kn5RTOeWfpBdS6XMCSFJzeimNp/H0Umq+vfy/0JikOgfvvUIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjk6MzcrMDA6MDBKWqC/AAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIyOjUzOjA1KzAwOjAwM1Rr9AAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAApCAQAAAD+fOO3AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAAAHdElNRQfnBRkAISsCR/pcAAADzElEQVRIx5WVTUxUVxiG33tnhmF0iJ0iCVF+NJpghTSUVNOoTTMrCS1qm4mJZVFSu+h048Jg2dCdSatb3TWkTaw2ISkbBY2waGBBJGmsoggkasEfyDhDsQjM33m6YGjnzgw4fmd1v++8z7nnnPecYykrkCSXylStD/WRGlQjv6RFTWtMv2tIM/pHacnK0lgOuaW31KQ2tSiQci3bcSstySUvPuNOa159+kV/6G9h5QOQPHpHX+lzvR21ZjWhO/pL85ICqtW7qlOlylFMl/WjxpXM/gtJCB+tDEOMQU6xEwtlNYudnGKQGMAwrfjIk7cxYRink20OaXbbRifjGJigLQuBKOEYU0mGacFeVy6ETQvDJGGKY5RkENg0MZpmiEMbitfaIYZIwyhN2KvjB+iG+xwuSi7EYe4DdBNAwkMrCy/owFU0wEUHL2CBVjwiQG+am1TkdSsjSDvtBCnLq1VwkzT0EhD7iUUI5y3WcfqZ5BnPmKSf43mLGyYCMfaLTpO4x/acXT/NQwxrYXjI6RxnbOceJkGnuJZI9eQUj/IgS76KeMDRnEF6SKS4Zqt+xR5Ttq88Cmm3nFa1tFsheRzmG9OKrXpblUlr2tG5TrvkUm64tEt1jsy0kpYqbXmNlh2Fcm1Wodiscsf3sozktWVsbXIUFhUvCIhr0fG9SbZkbEXdqnAUHuu5Y03W5vxcjx2ZCrmlqK0Jr9nrKER1XbE8QEzXFXVk9sprNGHrltfUa4uj1KNLeuXIvNIl9TgyW1Qvr9Et0czSU47k+KyaLm5nvGC4TRfVOT2O8BSWaLaoVG/8g9/0pVYcI/i0Tw2qlDSrMY3m7FSpuvWZvCP6VHg5SXqGUMFzV0JJwXyIGUhzEq+wqGEgyQB7ij7OexggCQPUYAnhppm5JS7gL0pexgWWYI5m3KzuMH6+JT3L1zmHqlCz+IY5SHEG///XqsUOrhgzSvA1CIsgoxjDZXZkvS4ImwPcSXKFmg0BNfxKEv7kAHbuy+ChnfkluihdV+7jO5Zhni/w5Jkdi62cNyuPCOEuKHcT4hFmhfNsxVJ+IBroh0EaCwLeYxAM/TSgdQLxCVNwscAdXcFFgCk+XlcuSZRyhtgC4ZyV8BFmAWJ0UKoNAaKKn4nfJ5j10LgIMg5xfqJqw/EziH2MwFVq/wPUchVghPdfK88g2niS5PuMtf38QBKe0FaUPGPtc7yMcAIPHk4QgZecy7JuEYgq+kjdpZFG7kKKviJmn4M4yGSKG9wgBZMcfCO5Vo0XNpEECUyEcObgviHCz1miRDm70ez/BYYI/lv2W3BZAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI5OjM3KzAwOjAwSlqgvwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMjo1MzoxNiswMDowMM4WcfcAAAAZdEVYdFNvZnR3YXJlAEFkb2JlIEltYWdlUmVhZHlxyWU8AAAAAElFTkSuQmCC",anchor:[.5,1]}],drawing_api:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mGtsFFUUgL9zZ6bdbaEP2kpRCYj4wlciRMHEHxo0MdHEqDFG/aExvmJiYmJ8G2P0B8YYYozC+oivCAl/VMRqIkTBUIygCAiNlr6oQAttd9vS7bQ7c48/pq0QdtvZFU9yM5nZOfd895xz7zmzQomibwFlgACVCCPUI1QDCcAFAsBHydBDP2ejOEAlyN2l2XRLhaUcyCDUsoQsK4DrgCuBRmAWcALoAfbQyDaUn1nGAZrRUk1KSV59DwhpRLgLuAe4JsZMPwPrsGzA0CuP/M+wugYwCMJFKM+g3IVQEU8ZgCywAeF1LH/ioPJwfPvFpUGA4LEYeBW4DSlCP3JLBXAfSgXCC7i0TS0jhpjYXk0BHjXAE8BtaMn57gK3IzxBjhpdE18xNiyKg3ADcD/glpbtExJF5AGUGwDnjMJqChBqgccRZhVYTDTCk8bks/zvzwIeBWr1vXiwcUNpgCuAqwuCgtKwtIcFtzqU19Ywls5waGPI8d8aUeS0SET3KxAuB34kRu7Gh1VuRCjPDyqWhbcMsGI1VJ1fCRPH/wX3DrHjyX46N9XlBY5O65XAT0RFZEaPxYMVlpAvvxSoXjTIsteGqTp/LvAvbNXiuSx7dZiqRZkCfnOAy9B4HHFhhagy5d9WsxcmmXN5XZ75DHOunEPVecmC8ypz0XjbtZjjJ5H3qQLGcxHJb1CkHPGcghkpFFrIaRL/6ILBAsbA7zvBWLov7+/+QB/+8ZFpfJc5s7CKRWlFCfPCDhxI0JKyaDh8ql44TMtaJd2SLAAbAn8BNg5GvDRQLEIzUdNy6iYTIMgm+H3VXMYz3Vz8UAavqoHc0HEOpMZpSc0nyJYVgM0RNTixYGMltq5BEM4DvkdYlGcxkRg3xKsAcR1sEBJkwQbONFbaEVYCnfLwzOds3JxV4CiwLq8XZGLYwGFsyMEfgPEhZwZQC3xO1PPGamZiV3hNAcqFCJ8Ay+PqTSM7EO6/86PGv347Uo6xEFqD41isiepHhe9zXU8Pk71Ocf1sCg+4HVgNzCuVUpWjA1nz3B3vn7PxSNZ4AbjGYkJrjOPY0BqxAuNJ389eMjjk7204i3meLRoWop70ZeBJwIuvHLnGKnZ7R2LbU183fHVs2PFdo65G6SiR71QRUcCiBChpA/vFaGvRjd4E8EKUtcBNeSv+NLxtfV778011m3YeSmSciYyWU94QUJ24CIAVGLXo98UUBQAmvp26UFYDHcXoDo6azPrds5t3dSfSjkElArFMDYmuIhbEiqgVQRStQLWmaNgJYCXNZuAdou+qGSUXEvzQmty1fvfsDiMgseIhgqqoyBE1prUkWACOESJ8DHzJdEePRlHd31Pe8vb2mt3jgdgYoAIYBR/YY6DJJBKHS//f4BIA0sAbqlwMXJUXQuDYsNOb2lHd3JX2sqe/ogKCTjbwgkU1CxxE5E+gO51MnqjO5YpqZE5leGTSb+zNhawOleGpJydd/RxjX+yb1bzlYLJXmAp/FF7FqAqoBsAI0KmwxXHdzxS+u7mzswU4MT+Tof3gwf/02RcxpaCzz6ltqLKvJD19zAju5KYOlfCntsTOF7+t33pkyPUdE9U6VUVExoERVdKCdomY1hCOqxCM9veHlbW14Di0tbdP2So9DU7y8M7nTAbHfFBfGSyt8PRaI5FjuwbcQx/+Uv3r34Ou7xp1VMkBaRE5BhwVkW7Xcw+j5KwNkFyouA71Cxbwx759+TLqzEjHKo8yx97RUBm+7TnMG/Rl+N3tNU1rm6v3ey5pgaOo/q3QU5FI9I6OjfkiguN5nLt8OZs//XRmx5wpWIDvnp6duLR+9KXaZPjgjs7k1mebGtals6bDiPY7IpnusrKReb5PeVkZB1pbi57/P6fByVKXDPzOtPtmwtX1f/Qm0u3pRL/b0+VXL2xEVbm+r49v+vtLnv8f2Pk64kl5WH4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjAyOjM4KzAwOjAwnw8TLgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr+195mLx3bshNghKWkNpCglPEBpUYSAKg88gGigUftARSJzkbiIB54QalQkKvGISkGQSkTQplJBKQgQbbmUW6CkTZuGVq0pjV3n4jSOnUzG47HHM545++fhjNs6npDjISzpaDQ6s9f69tr/XnvtMTo0fbYfAhACbN5knJ1ch9QHlseIgAZSHbMyhRsvUj0qvIPeHPbd6Y5iRp3CIkGjy8jUtnJ28mbgg8B7gEGgB5gDpoCXmD92GOxZ3pt/haN1dRrSOuLcvQYitwHpNsTtwE0gj5kAXeLfkGLgKGaPgPslIZ62A7P/X9hk6YMRuB5nX8PYBeoBiy+BbBfHA3OIXyDdh7NRXFP24/nU8VcnA3OG6R047QXtTACsmWaeQBNUAO7E6Ea6B984cYVJLjOXOqvD/aC4D/gSxk7MPFhY1WSx0Bq3E/gizVyf9vSmHp0aloBH3ALcCeZIakEnFkgk8RmCfQTkryqshvshoh/4AtBNu6WTjBAbzUWjUYfmYvJdWrkvDLX8fB58n/b0p4JNp1lhBG0D3k+yWZbDJkCBd95c5H0fz1LoX0u1VOKfv11k/Ln1SNaqFMuR4SaMbYgnSaHddLAmD+wAsm0zigI33lrh09/OMzDUD3QBxvY7Zvjp3lmO/aYX4ZYBmwHkEDswPQVccaOm1KwcaCuJ1i55FWDDlgq79i4yMLSJZHkd0M3A0CZ23bXIhi0V1FbiHtNWTKk4UsKagQ22/X0IMDhU4JobBlhZt41r3j3A4FCB0BbWgW1YSvOVLK1mAfKAtTbHm18Kn4kwy11mnll8RpeRpLX8prK0pUvALO0imjMqF+aols+3HTk/c4HZC3NJtVvhVUhlpFQHQ1rNCvQqEK/04GFiJMuhB+uEUFn2LoQKhx6sc2Yki2tbTptgY8hSwaY9bgNwBNMdYMujmkG9muPR7/RTnZ3glt095HsHWKic59CBOf68fwP1agbXLi9qAs9i6Q6YVMLWcK8hfx3oVxhvZ6UcDAl8pkmuYPjIEzdj6lURN6LW/mlXZ09g9knUPG0PzF0xu+k1GzSFeAQRt5mkMCBuRFTLnkpRVMv+v4KKGHEQaRrSySB1i6jdfeDYAuzD2E47/aY3j/Q0xpd3He0de74S4QLEweF9IDjDgEKtxofPnWNfa1DqFtEeKqPhNSeR7UNch/FWVtHMSK3EGIY0WWy4n9z2zJriVMMGWxyu9cQtv4uC6vmuQu1dA4NszIRVNt/DfRAoYHwd01fBMlz2TBfSG8VeyCRzTaF/lKKnvvHv7sfPL7paZIqUQFqr7VDrWA6IJqLkYMScRld9rdGePjBdC9wLfHTlVeYNyCC5gHmBCZmBjc378W8e7/79c+Wo7F2SLHvTWLCkUtpSf0QwWAjoifT97JIcDpTBwgTSD4Fxlu5ZCEkWZC4WviGyTcgE4aQkc6WGK/1sMvfMsdloxhuyBCTw+mPJp1kAC2YKZphQAal/1bAA9sCcmF74K/AjpPmlbAaZb4pMLKKAnLBkp5hoBGv8pZh5/ueTuVOOtN2AGZLJ7KycG+0IFoCLzZhgD4M9KpliETUhkuRkMsPUWlAk00jFH7//dP6FxWAhBagBTlADXnDwuMvnX+v8f4MtfVDIzlCvf09ia4x9QBKtZC5p2Awxtein9p/JH5lY8AsrOWVLZwqtNh+pCoxh9gowUerqmutrNFZxB7t06g+Xod4QxCO12H4Qi7IlZUnQSimiHlvt11PZI4eKmWnj9eVPlle4pHdXE5gHTgr+5KPoIcHvPnby5MvA3OaZGcbHxjr7k2NZXoZ7GatE/etzujvn9RVnconMZEEW/n4xc/Rbo4UnJ+uu7pcULGFmi8C8RMnQKTM3GsN5Gc2FYjHuXrsWvOfV8fFl2vif7fAn1tr6vG1bn42/3+X5kFlyLTgx70/eM1b4w+FSphglV6MGUDKzaWDSzCZ8FL2GaITQJG7EUuQp9PTw0osvrlzNqwELcPz2deRd+NS6rO7NODaXG1a6/1T+if1nci9nnJUMJpHOCM4V8vmphXq9Zmb4TIa3bd/OHw8cuGKMqwYL8NitA7kb8s27+jL63NOl6G93j/UcnGnYCYeK3mxmIpud31irkctm+dfo6Kr9d14N2thbolA/VbP7rnc6ODIXzZyqZy76M6cX1ly7EUnsuHCBx4rFjv3/B5an/+2QIsMIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMjo1MCswMDowMGqPVM4AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABPdJREFUWMO9mNtrXFUUh7+1z5nMmdhkkjZpE1RsWi1FqQWL0gp98EUQ7JP+AYJPPigIlvqgiIr4IFqxSFtQ1AqW4oMXUAreK7Zia0vv2Exz6SVNc5u0SZpJZ875+XBOa0oz6UwydcFimNln//a3195nrb3HmKPpxq8GtABZIAB8oAQUgFFgeHoXm+OY/lxhp417P7AOWA+sBtqABcA40A8cBvYAfwInbp7nbTbF3iZ4QfCnQBX4PsHzgiX/C20CaYKVgk8EExWCXvOJpN/KROe2wprgPsGXgmKVoNe8KNgluFdz374VRbVZsGUeoNOBP0j0bgusJ3hKMDZP0Gs+luh5tyOqLYKfawR6zX9IdCuySlOXAx4EHpl1TmvW9LNhg0dzcxP5/Cjffhty8GAb5ffmOmAV8Cu1SmkCX/B22b1qFmrDhkHlcn2SxiWVJI2rs7NPTz45KIhm2btvaf75/gbYOsE3ZQddvnxEhw93SQp1o4U6dKhLy5aNlIGNEt26Spe3EjPiyjTzci5dmmHVqkUz6DlWr15IR0dmFt0lVJjCqgl/ULYllfIxm3lAszSp1GxvfIYKrdLIAlwq2zI0NE4+PzRj28jIEIODE7PojtYaNgI6gXDG1hMnArZvjwjDsRt+D8Mxtm0TJ0+Wi14InEr0a2NJQXhWMFk2Z2azU9q0Kadc7owGBiaVy53Rxo05NTZOzZJnJxPd2hWG5EywTHB61iTv+yU1Npa0cKHU2FiS75duURROCzpqekZIKlhG8KYgrFH1CgVvJLoVWcUzSgRXAJ8Ba2sQg33AM0+3tZ06mE7jIggjh+dFRM4woL5QYH1/P1uTDhWnLouBu4H3gc1A+zxW6sKIc9ufuvPOwT7nFiccLvGQ+IW7KrgymKkvrGhdTHsqqm6vJNGtB14DXgRS1YJGEP0RBHteam39ZsDzCr7kK4a0JCTCTECEKCHyDo6bU2dVNTmJ7hVgK/F963Gq3EpdqVTPlqamIwOe1+yByWyagGI5xa+cYv52QUcofqimKFwHBnqJt0J3NX0vOTe6s6Fh74EgyHsgg8jiJU/c4k+zCCwyU2SGCdUjNVUNmwAL+BH4kDjSt7QilH7JZA7sbGjodhUvhxmSyaxPznXOCTaxEPgU+JpbnEUFHE+nT25pajp01SyqANQAp/h/h8MOvndBcH6+58g88I5gJfBQOYgBz7u4PZvd25tKXbn5GRkYUjIvI0K6AuQw+wc4m89kxrPFYlUHmZumngTtSBE2hzA203MFmPpqwYK9P2UyF+2/fvHyCicZSCVgAugR/OT5/ueC3U/09JwExu8eHaUrl5t/mRPQ43nNrVH0ekZ6zk3L3SGEvwfB/ldaWn7r8/2CF7OaJMzsKjAhkTfUa+Y6QxiUUZocHg7vaG4Gz+N0V9f1seZ9nTBgv3OjOPdRS6m0pl561CWT6PX9Mx9ns3+f8/2CL3mCIpA3swHggpmd9VP+eUQxikpYMRS+R8s993Ds6NGbxqrJ3efhYlHdqdSRy869lw7DDgftl83GdjU0/LUnk7mYigEvIJ0T9GfS6YuTU1OFeLbGXevW8uOOHRUFpma2u6EheGBy8tXmMHx2X5D57eXFrV/knet20rBnNnq2rm6ivVAgXVfHic7OqvVrd6sEFpVKhR7ffzeItPNYOsh3BcGw39tbyLa1IYnHhob4bnh4zvr/AlFvZYTScGjCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMzowMSswMDowMGvaOiAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABfxJREFUWMO1mF1sXEcVx39n5u5613btOIlrp0lEhBr6RSmKLUiQIkQFSH0rLSoI8VCE1DSqVKkIAeVDCPECQhChClKXB0qBRKpoQbQNRbSUNIoTKW1NmsZW6vgjNbHXjje79q7Xd33vncPDjYuc7qZ3t+ZIq5V27sz5zZn/mXPuCk2a7vwlZNNgBK5vE/JLm0E6UTIIHhCi+KBFSrk8nTcokYVqGzL85aZ8es3C0tkCI0Xhpq5byVf2AHuBO4BeoB0oAzngNNf1vorTk8z1D9MzqM26lKaiuusJMFEvTu4DvgJ88t2l6q2onAQOoe5pxMzKG/v+v7DafxAiI4jchOi3Qe8DaU04G5QK8DTITxF3DmdVhh5I7L8xGdhQcKkbgR8Dd6PiJd+ugNAKfBXVVlS+h3pj8S6SmUke1QEIUxsQHgbuBm0A9KoACfeAPIwEG7TvYOKJiWFRtSB3AvfH2d4caWziAV9D9E7Arius9g2AkS7gIZD2OpsBpxBEsBLF307j32vyajvwII4u7X8iEWwyzSoGx8eAT9QFBeW27hx7P2TpaNnAYrXIq+9EjFzqRVWQq09CQNiDyO3Av0ig3WSwggH9HEhLHVDHp3dc5ht7YFtHG/HRtnHXzkV+cSLP0clNUAuYFuCzKMeA8P0wkmrWgNxKLX05hW2dC+zvL7Gtowf4H+z2jh7295fY3lHE1QycBT4KmogjGawiKL3UyioFtl6X5caNm2qsZ9i5cSNbO7J1DllAe0ATZWtSGQBkam9EwTMeIrUdirRgxdZNNCSbiCFxZGNbqAMDBb/MYnW+5viiP0/RX0LqBq+4zrDqQEdBo/cMWYGxyxmeHXE4La0Zc1rimRFlrJDF1oBVIpS3UVwSioTlVh3IIHHTsjbJRMAPMzz57x5KK1N84eYibaluloJLPDu8wjMj2/HDNKYGrBAAJ2E9YQVHxCsYpoEPv2fcAKVqmj+c3sGfhsGKJXI34IcQOlsTNLZpVP6JTQabVLOKZQY4VDsKEkc4dJZy1bLgQ3nFEjp7Da06lD8COTRZM5O4wGv/AET6EUR+h7A76bxr2AlU7v/iwm/ffiOcxjiInMFahzOCAK2+z95cjtVWp7F+tm8gBdwDHAC2NEup6MxlV3n03uJv/jrtKqkQPOMwkTPGWhc5I05gJev7lVsWFv03u69nS8o1/FoTAM8Bu4BHgFQjiCA4VXc8mDj3zfJzXXOu/CUP4xkwGMSauMcw8cPOb8mEQ92ZgoGzM5GMNtznad8AwA5UH0f4PNcQZS3csWh+/LvlI8+fCt4pWonvM1nzhMSFRkDjwuYElh36j0aKAgDy+j6AC4geACYambvglouH/aHB14KpgsWoxCCOdz8Sf4s4ECeiTgRRtBXVDQ3DXgFWsoWXgF8BlSRzAo3CV4LR1w77QxMGqVudr/IkqIqKTKsxo03BAtA+F6HyJMpfrn31KKrK2Sg38ljl+NCKhi4BqABGwQdOGzhiMpmLzf9vcOkWWKFAmp8pejPKrtoQwpwrzQ5UTgxeiAqVGm2bgKz2OYrgUK0A5xE5B0wVstlyZxA01MisRXh9H6RQhDcDogMRq33BlSBf8e67oPrn6pnBl4PzswKrxx8fr2JUBVRDYAmYVHjZet7vFV68a3JyBChvLxYZP3/+A731xUx9A0xG813dpuNHWVL7jYi3mtWRanQsGDv1/fLfjk67Rd+KEUBUFRFZAZZUKQh6QcSMRnBJhXA5n4/aurrAWsbGx9do4wPbqTselc3Seftm03awldSnjAgKTIT5iR8u/f3IsWB83sNY4nu6ICJzwIyITFnPu4gSOBcSBZGqZ2ltb+etM2dqCGqdbOLjPyEt9t5uaXssJXbLgvNLv14+fuTx5cGzKfEKAjOo/kch15rJzC5Xq76IYFMptu3ezUtPPfW+PtYNFuDFXd/K3Kabf9Al2a+fCC4c/c7SC4cKrjJhkLwVKU6l00tbfJ+WdJrh0dGG12/+NqhhmzTrT0aFn2esd/itaLYwTiHvXcz5nVt3oKp8Zn6eF/L5ptf/L2sInRchOhqOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNjo0OCswMDowMJwhuk0AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmRJREFUWMO1mF2MlFcZx3//887Ozs5O96OwZekupiq0ptJigFhaJaZNa9MbbTVBY5pYY0MlxiZ640XjhfHGxtheGFNFL7AIGmIbEy2Cix8sCSWxSCiyKyy7QGGXhd1hZnc+dnbfec/jxSwI7ADvjvhPJm/yvufj93ycc54zokHt+tYqMnMtOHN0lu7RdGt2KdBuWApTQqIKVgHy3d2F7PhYu7koork0y6d3DTQ0Z6JR2Ltn23m/Y1Crcw88OJ3OPgpsBNYA3UAGKALjwNHx8bv6kT+06r1LA/9+bJk1Oqca6fTnF9fiAtftzW8CvgI8IsAAzQ9p1yDNvzkE7DRnu5zXxSd/8c//L+y+l9bjfSRMDyB9V2ITRjrOKDV2Kwt2yXjVnE74yNvTvzwSe/5FpYESgRT6lQY/AJ4FS6B49tY8rzTG8yZLm9krvmrDV+2IIRe3Yd/m9VhY7QC9jHhWIrHYLJpPlYShL2C87JrUsfeldbH7x4Y1LDDjCeAFoYYX5nwgEoKvSXrCILijsHs3ryMw1wl8k9pKX2iMGeY9vhriwzl8NcS8x2xhlAWYlAG+EeA7+15cHws2pofMefzDwCdvBiqwtg9/fHzpwxuDRLqto1qezk8c7Y8KZwe7zUy6IbcFYHoU00PA34mRu7FgHXKIp4DmeqCAX7rmM5fv3/Qd0l29rdRC29r9yDPTJ3e9lp04un+JGQuAgWaDJ4UdAKq354gh1do9SL38Mk/6nt6plZ/fUkh39S4DrsKmu1Ys++jnthTSXSvymK83dCBYjeJxxGpkmMC6qbP8zYyWJT0trT0rl9QZz2V6V93dsrSnpV7uIoRYdvUkuY1i5qwAUvUtMRQkEvViDCCpWUEQYDdNyZZ4DHE9a2DGVH07xFwxVwzL05P1Poel6cm5Yr50i8Mjf0dhJbzEEBAt+OYCSmPDqdH+t715X7jOSO8L5/vfstLocItcve3UIjM7aVY/oW9UvDQQHuMgtaLlulklEc1VUmf2bFsWlgvnejc+lw9SrV1RpTRxvv/tufMH3loRhZWktNAvZgqBQ8CdgzXkRfQ3cGPARxZ63hGWC8kP+n593+j+30EQBETRvdFcBR9Vg3qg8xrD7K9GEAs27tZlEFww2HkzL0jCR9UgnCkGYXGKcKYY1EDr56oZHmyHwTi3WH03cMRT3+b1eKL7hX4ltCFuv1voXcle+OG7UyeHp6o4D5F3BIHHu9pelq5U2Dg+zhvzHWIXEdsPj/HVtT3TkqaATwF3NUppxoVC6F99pT9/ZLIctXlol9Fupg7nLGNSRtCcqFZJRz6q3tuj1UvbFlk9iRD4A7AW49smmuKGpnaLAG/mB7PhiW3Hip3Ts/5LgUg4cDgUOAMwV2vuK82p6pGuVM7B8QuRhhZ9renbvA7gPsN+BvqsFlnUjhejke0DxT8OXQ7zgZOuGHGdSWbzDwF4wYzH+mLXs1f01NbDeDiL9DpwOn6dD6U5n99/vnLwVC7MOdW8p9qCnf+p9pQ8yEvmJWRYGrOORcMCPL31sCU6W/YJfgqU4/SJvFWPTYbvHThXOS1qu8ftJWEmk8bMuaGGYAHC7kwkbBuy399q6zFqxc7ZQjT4znD5SNWbjwEqwBlUgKMOdrtUarTh60lyYAKfnMvZXPJHGB8zbG09CAH5WX9x70j54KVyVF7YwgS6Yq7VTksrA6eQTgDnci0txfYwjH8Hu1GPbz2MhU0m0/tV43UPBfivj6+UhGHkZw+NzR48NhFevCb8tfAazkxgVgVKwBmDvwSJxHaDPc+cOTMIFFfk84ycOtXYnxzXat/mdVyaiTrbku77TY4tTkqY1S6GZhYdnwz/sWOguP9yxVdcjVRWuzbMASUzcsLOSm4oggkT1ZlsNmrt7IQgYHhk5Loo/c/6+ZfXKJPQQ21J90ZzwGNX0mG8VD3928HS7uOT4WQgAiAEcpIuARcknQsSiVGM0PsqURiZJQLSmQz/OnasbkrdEe14/hM0SV+8q1k/STgtL4e+8KeRmd17Ts8cD5xygguYnTcYT6dSF2dmZyuSCJqa6N2wgX1vvnnbOe4YLMBrz61NLc/Y9zJN+vqJy+H+7cdLOwuhP+0gG0j5c8lkaXmlQnMyycDQ0KLHb3g3qKdMk1UuzUQ/TrrEbz4o+NzFClmNjlZaP9SDmfH45CTvZLMNj/8ffOgG6JpOcn4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjAwKzAwOjAwxEaR7gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABZ5JREFUWMO1mF1oXFUQx39z7r3Z3aQx2TYxCVo1aaviJyhqK/TBUgVBRVT6oD4oIiqFgiAoqIjogyIaoYgGFGrFVuuDWloRrWgrxmKrYmtbbZovY76z2e0m2W6ye8/4cLe1obvN3bUOHO7DOTPzP/+ZM2fOFSoUHQaygAVyCB4NKHUIUcAF8ihZIMUUCepQCGbkosp8upWCJQM0IoxxBS6rgNXAtUAzsAiYBkaA36hlD5a9xDlMsgC6ApGKWO0GhGaUdcD9wE3ogtb2AluAbSijsvx/Bqs9gEUQLgOeBtahVJdhJYOyDXgV5U9AZUV4/+WlgUFQlgMvodwNuGXGphp4sPB9ljzdED4tTFms+tQDG1DuRsoGGojgAvcgbMCjXrvL4Sq8EwdYAzxUcFi5BPoPI6wBnHMKtsBqHFhPcNKLLCoxSgNehPI4lnhYdsMyZBCuQbmxaOiDSqBErh8hdqeDE6/HJlPMbPeZ/aUZkBIpswrhapTvCJG74cAqBrgVIVIUKGKpuWOSxe3gLashCG0Nix5Ik3gywcyOJWgRwIG9tcD3QH5hxsKCVa6gVH55bcepf3kKb1kT8C9Yb3kT8Zem8NpSJSw7KFcVyFhQwh4wIbiZigfTuyRG1dVLitgzVF27GLc1VoIEAZoIWe/DpUFgKlp6geciUtyhSATxikdEACVGSAlfuuB4yRl/Yho/OVF8bnICOz5zFiJSYet12Jy1KF0oftH53OEo6Q6L+lPz9fwp0u8oc0dKsecDRwl6twUlbOmyQCdB0zI/pALYTJTUK03Y1ADnPZrCnNeITY+T7pgj3bEUm6kqwV6OoMEJBTZUALQLAVoRvkZoK8E+iOsj1SCug+Z9NAOad87ipQfDWpQ+aVu4zobNWUUYRthSkgUhAGbTDv4k2LSzAFALfIhlhJDNTOhWpHAlXgq8D6wMq3cW+RGHh+57rPnoL39EMBZ8a3AcizXB/VGdzbJ6ZIS3CwqhGxJZBnqMXoQ3gXagpVKUqgxPpkzHvesvGB8aMecXcJjC8AuszylkxmPV2Usbz6fFs2U23wG71cALwJOAF14ZELAW+8PP0T1PvdL4+VjCybpGXQ1ASiGXFBEFLEoeJWngkBjtKqvVk2Wg3WSAtwneW7cRNpUkwNsz4PVt3Fx/YGzCiTsOonJ6y1DYkWphvYDQotDqK1+XcymcAgz0o7Sj9JajezxtUlu313buPxhNOg4qgpUg5IUhwVfEglgRtSKIotWo1pcNtgBYGWMX8BbBO3dByeXJf7s3tn/rjtpeY0BCxUMEVVGRITWmqyKwAEzio2xC+Qw9S+nRIKqHjkaObNxc/+tcTmwIoAIYDf5M/GbgCxONDlb+PFkOKEmE1xQuR7muKAiBsQlntOOjus7+QS9z5hoVEFQLWxMsqhngGCJ/AgPJWGy6Lpcrq5GZj+FygteBcCCXo933mTrJ5Onf7Cyzn361qPObztioyKnwB+FVjKqAah6YAfoUvnFc9wOFL2/v6zsCTC9Npeg5dqyynxzzeOmGvkEn3rjYvhiL6BPG4J481L7F/35fdN9zrzfsHhpzs05wn4mqIiJzwIwqSUH7RUyXD+Mq5E8kEn5NPA6OQ3dPzylf/+2VSlAd9m03KdS827A4f311VG82JiC2f9D9671P6n7+e8TNuq46quSApIiMAcMiMuB67iBKzto8kvMV16Hh4ov5/eDBM3z9Z7AAN9yV097d3oH0lHkj4vmtxtCSnpapj3fW/rTnp9io55EUZBjVvxVGYpHI6InZ2WywW+HCVSvZtXnzwsScC7An5ctNtdErV5x4Pl7nP/Ljr7Hdz7zWuCV53PQa0YQjkhqoqpppyWaJVFVxuKurbPvnhNmTsiSez/YNua9HI7r1965osmcgmnCT/dm6S5pRVW6ZmGBnIlGx/X8AIXpAQWXTlG4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjE0KzAwOjAw/KO1YwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABh1JREFUWMO1mH+MXFUVxz/nvje/3s7+mLa72wqNSykIxEKCqKUJf0jQgGJCIGKC/AEaUSEh4R+NGv8wEMUY0xgjTI2J2Go1/EWA7hbBxELcboKh0tItZZfd7a50Z3dmdmZ3Z2dndt67xz9mt7bd2fbNUE/y8jL35d77eed83znnjtCqvfRrcKPgCBS7ha7sFtBOkDioC+KDVFAt0lXKU0wqvgu5Tvjm11ra0m0ZNhqDXFXYHLuJzuztwB3ALcBWIAmUQDPAu8y3vYnRId6+bZg9R7XVLaWlWf1pUN2K8CDIQ8DnEb1oufOZBGAI5SDoixgzw93f+T/DHkqDEUH1U6A/AHkQUS/UMgqIlkFeROQXqJ4Gq9zzeOjtm5SBFdTsBJ4G7kNwQ7+vAIqH8DCqHuiPwX7IhSG4pJnQnANpwHQBTyLch0jzehcBVRflfuBJ1HTV173SsKiDcCfwCB/nwxShHhEeBbkTxbmysAP7wJoU8ARCsvG7aP2ywf+utbHG1EmE72I0xeHnQmGE9ZBB9GbgcxuCCvqZjp7MV3s+6aTcaFehVi2+nJ0M3lnIbkVVkIbavh3YBfyDENoNCasG4YtArBGogL23p29u7w17uNbraAMcoO0bV12/8NT7g/lXZyY2bwAcQ7kLkbcA//IeC+tZuGkV4mJadnid889c99nFa72OXuAc7E6vo/fpnbct7vA6ihs4zgE+jYbjCAsr1CvT+lgq9HntiV3JTZsbrGduad+86RqvI7FBkAWlFw2X/5r5quONh5WIGFeksShFJBYR4zT2rIBoIixAE6mL+cbDQm6lUirUqrlGT+dqlVx2ZXmpYfFQQCmGLQvhYBWLMgIEDVzHcGkuvm/qlA1UF89/FKgupieH9VSpkGiYDYQAkQ8QsWEwwsrAgg6i8hBy0UcmQjnw48+OH+st+tWpb199Y7HDjXQv+LXsvqnhlX1Tw9vLgR9tnLq0BgwhhIINV9gPpQVHr0F5HWTH+j3rcXSNCTwngivi+KpBOajhW+tskGMBxkDuQvwJ7n7ismIIq1kFpoGDqK73ggiI4FvrLNSqztxKhYVa1bkkqKpF9c/1nldCqTZ8i3g4DVavR+SPwO7Q8za2o4g8sv3nL3zgTpzFWAiswXEs1ggCeJUKd2QyPN80LMBrv4sQBPcDexHZ1jKm6rQpLf/wqmd+/3J8finig2ssJrDGOI4NrBErsJKoVMo3zi9Ujnf3sC1im+yeVGuovoKRW4GngEgTc+tysWq99ydO9/zhlZQ7v/h1NcY1YDCIYxRATV12thKL+8e64wUDJ6cDGWn+WHPoOTCmDyUNfAlpLjqRTH6s50D/q4mRySKOc9FhaPVXvTFCVQCswLJFX2+mKNTtK4+DmjOI7kV0vJmpprRc7DzyzmBidKqAMboKYjl3Sf0uYkGsiFoRRFEP1a7mYQG+/JgSLbwB/BYoh5oTBH7bidF/db717/G17HF5E0FVVOSsGjPSGixA8myAygsoL3GpXnS1AY9PZk5t6v/nMfF9GwJUAKNQAd410G/i8Y9aP55kb4aIKWD9X6J6A3Br45IqOMXFma7XhgYjs4XyeoWrgKzVFUWwqJaBUUROA1OFRKLUWas11chcaPc+BjZQ0OP4di92tS9YO8as3mWlVm0fOjHYdnx0BmEt/PXwKkZVQNUHloAJhb87rntA4fA9ExOngNL2YpGx0dEW/+Q43wbSOLm5lG1P/lQjke9hxD2XplQD7+TY2z1/GjjiFhYqGCOAqCoisgIsqVIQ9IyIGQkgq4K/nM8HbakUOA4fjo1doI2PbZH0jwQvuctvb3teY9E9a3KIZPLj3X/9W793ciynjnGAGlAQkVlgWkSmHNf9CKVmrU9QC1RdBy+Z5L0TJ9Yr6krAAkT2/wzruA8EnW2/wXG2mXJlMTUw2J86fPQkrlMAplH9j0LGi8dnlqvViojgRCJcvXs3b+zff9k9rhgsQPuz348vb9/yk8CLf8s7feZI74H+g6ZUHkck74gUp6LRpW2VCrFolOGRkabXbz0bNDC/PVFxZwu/0k9s+UtscrYQny3ka9lMRfv6UFW+kMtxKJ9vef3/AgyZp3iOwsFtAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNzozMyswMDowMHshjJAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABjBJREFUWMO1mFFsXFcRhr//3F1713biOCVxotiolJiUlpLKtiBFiiqqgpS3tkhFQjwU8QBRpUr0BSHEA+IFVNoIIVQeQ4CAKiVCoUSIFokEKUSENGpCYxJnnUQmteN4u+v12r7ru+cMD+tESbOO727DSFfn4dwz852ZOXPmXtGmDE0NkY/zuODYnGxWMVv8GEavyXJCGaBuZjFQnp+fL/b29prHU8vUOP/x823ZzLQL27vYy9imMe2Y2fFIMVN8AtgN7AS2AD1AFZgG3l23bt3xEMLJmb6Z8/2lfmvXptpZNFwYxsltCRaeB74GfB5raNMqKg07CRw07A2Zrr+z/Z3/L+zoxCg+eEnaIfRd4HmMrrRaDFvEeAP4iUwXAsHODJ1Jbb+lNIhcpGBhO/AjjGcMy0jp9yvUBXzdsC7Dvm91KwCp08K14tW6r28QegnjGURLoLcRZ4SeQ7ykrDaMFEZSL00Na7IIeAp4QVLbB/MmMPANSU8B0X2FHZkYwXnXB7xI46TfvRkzggUSS1i2ZRJLCBawVaIsqQfj2yGEvtHCaCrYVB4yzAWFz2J8rtlhMjMQ9mjno9O787uj9dH6DZVQKR9fOO7HamNbDFOzlBF6QtJjGH8jRe6mgpXJAV9CdDYFhfBk95MfvLzxZQayA900Qtu9p2dP5bXia8VjC8cewLgbuKHvacP+DtTX4kiXs4bDeIQm+RUIDGQH5vZu2Ds/kB3oB27BDmYH+/f27Z0fzA6WA6GZ5gjjM1g6jlQvGSbDttCkLhvGtuy2/PaO7Q800eeGOoY2bstsyzfNXUNAPynrfbo0aIQvt8pGyJDJaJU6JqkzUhQ1hRVg5NMwpPbsisw1hUGUfKla8ZXZZvMVX5kth/LCatcwopz2BkybswFjHMN/eCoiopAUcocrh0OwMH/7XLAwf6hyyArLhXzUpJwa5g27aFgghaQt7gE4QaNpucOqJOIQ5/aX9/fPh/nJZ9c/W+523ZsWwsKNw5XDy4cqhwbjEHc43e0XoQQ4uaJ/TUkVgNHxUXn8J5zcW4iHmjrfjIwyPqcckaLIm/exxdStHt3jWp4wZ09HFl059dCpNets2py1SNEU4uBqXpBE3epRNVSjOT9HNVSjNUCDYb8lMG1YqmYmdScyWhjF4z8l9CuhXWnX3UP+YZG9sPituYu1/9RxAXxwRFEguMZx7Ipjdk9P83qrsAAjl0ayiOeAfcDWtjGNqVAO35t7sXwkmg7ZOmRcwPngXBQFH5yCYDkfx4ufnqvEZzdtZms2tPhZIxLgj8Aw8B0g2wIgCCxYqJ9OLiz9uNqnYviqOTIOHA5FzgDMNd4OcWeufmZTruTgvSmv8ZYb0pX+80HDfin05Vaj46/6icWfVt/0Z5OyIsl0u4KbO7KVQQBBsBSwt1q5FAA4/cnTAFdl2odxuZW1Vgnl5SPxCX8uKRFhiKDGgV151BilAAqSBQkZ1oXZhpZhV4AtP5N/G/gFsJgKtG715GTyr+U348u4W1f4GiJhJpPeN+fG24IF6Pmgx5vZfjP7g9k9So81arC/6MfiA4tnLLGQAlSAM4iBdx0cdbnctbY/T25sv8GyLZc61PEK8LCZDTeFENhsuF77/eKJcM0vNunbBLpZaQ0RMFsELiFdACZL+Xy1N0laamTukNMPnyarrEk6S8I+PPM3PdkYV6zXQm35L7UTyYnkOroV/kZ4DWcmMKsDC8AVg79GmcyvDf6858qVMaA6WC4zcelSez85bpeRwgj+mu9zG90P6WSvnDK3lSlfP5WcWnq1eizMhFiRBMjMkLQMLJhREnZVcuMebpioLxWLvruvD6KIwsTEHbnxkWXnkZ1Srx5zG93r5PiCnBqFcrJ+eelnC0fr/0xmyRABCVCSNANMSZqMMplrGEkIdXzizTIRXT09/PvcuWYZdX/k8WOPo6y+oo36ubLaatUwH/9m6Wjt4NJ7yqoETGH2X4Pprlzu+lKtFksiymYZ2LWLtw8cWNPGfYMFGN4/nLMh+4F69c36meRY/MrCQT8XLksUI6k82dGxsDWO6ezo4Pz4eMv6P9rPig+J9Vns3/evRp2Z3/nxULJJila6FuvBbZgZX5yd5U/FYtv6/weDRwGc3Jre9AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MDc6NDkrMDA6MDDVlNrHAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmJJREFUWMO1l1tsXFcVhr9/7zPjGY/jSy6NXVHVScsttCBVqElBFU0FFYiXqkitVPEQBA8ERBFPqCIUIZAQApSHFgchSEorAuoTUJJSNalTUNNQLs0FO0qcOE6d+D6ecXwbe+bsxcPYpYknyvE0LOloP5yz1/r22v9Ze21Rpz3zxlrcYgULMes2NCk/Prte0AJkDEWCCkbJsOKVcnu+OT1sFfNMqYGnto/XFTOqF1bzC6Q2NKuSn9kyOT53H3A/8DGgHWgCZoAR4ERzeuSvoGP/mr21d2tu0OqOWc+krldzBNEuuUdlPA62FRP2bqfLng2QYXAMtN9CeMF7Rnc+MPv/hX2mO4cHmfFBQ99GPApqvKETq0YybE7wgmQ/DsYZ55zt/NR04virk0GIZfJ3gn4APCxTlGjJqgILNSL7opkaZXzHOzu/tJRE5pJ+2HV4Dbio1aQnEA9LilAC0HcDCwxFZjwCPFGJ1dp1eE3iXCWGNTMv9CCwg+WM1mFVZkWgL2E8iJm/qbBdR3I479pkfF2mplrZNDPMYuKwSBwWiMMiZjFmNXZZgKzJsK+ad217DucSwSbNkDPCRxH31tp3MwNht6z5+Ejnus/6dNTaulgpFgcmXorHZo63m5mklfME92HhbuAICbSbDNbkDD4jaLgOaOhc//nJT97xI1qym3KAB3Lv3/jYldfPPZkfmDi4biWwABqQfdqkvwGVG2YsKaxMW0Ar9GUEWjKbp7Z27ppuyW7aCLwD25LdvPHeTbumW7KbikZY6Ra8obsMJeJIBiuEaKeGBswCzdnbs2tzH1lXw59bl7tr7ZpsZ9Ys1PYMG1GymrKavzpznbQjRVFNUQKSGpwiX0uSSxOySSttosxa9ZmqDeMolfMzC+XiRK33pXJholTOz6rWTlcdF28qrCAI+oB45TvP5OzpTO/w3mAWrjo7zcJ0z9Bem5ztzYqV5dREbOKsiUACSyQDCwTEUeBxXRNVEpV4LvPvt3dvXKhMDW7p2FFM+TUbyvH0eM/QvsXeob23VeL5dK3MCsrAMW4mbEDBQTeEIUybr/0dJMdCuZg+Pvh0Z8/lXyN5bxbfWg5zhFD215OAiSEz92okSwSbVAaG4mGJ/chCLY1JEELZL1SmfKk8yUJlyldBax13gCwIfisXRixhM5O4RezqzoHcBzB+g7Gtvk74KntDnh37v9d89lJ/hAsQB4f3geCqtayxVOL+kRH2rBYWoOtQcwofHgF2Y+qoF9jMhuem3ZP7nmr9U7moVAUiF3BxcM77EAenIFjMlkpzH566Ujq54RY6UmGV/awoI3uR4O4x8S1BKjkgSIYFhYu96TMv/bKpbb7oHvPOIgcOh7wzAHNVWYRSQ6by1oZMwUHPcKy+Veem60gOC64T+IXgoaSnz7IsJ4ei/pf35f586Uyq6L3JrnKwfKWwpUFQLZvzAXslcT+7bF97YJYguwi227ALq5k7P+OKJ7ozRy+fTRWcw0BBEHjnUXWUAihIFiRkWCNmrauGBfjG9hmb0vwhoZ9jzCXJaohV6T+R+ufJ7oYLUrV63NgkzGTSkDnXVxcswIVMHDvTs8AfanfYS5hW3c7RAX/62B8b36pUFBKACnAGJeCEg4Muk7lc9/Vk63Qb026+kFbqJ6APYdxTC0IyZgp+9M0DjUeLo36uRt8mEEvLNUTAbA44h3QGGCxkszMt5XLyO9i19pWHCjQoZZI7GSrstsA02HLQpdGoLGqh5/WGo+ePp0b53/ZXt9dwZgKzCjALDBgc9lH0vMFfPjcwcBqYua1YpP/cufde2ru6mymOubbG5vj7qTQ75SwyU7VMmeKBk6l/vPJs7rUrk77k3NLtywxJi8CsGQVhFyXXF8O4icp8Ph/n2trAe87391+ljfdsu361Vpmm+O5cc9iTzvAJaalMDfsLh5/PHRw4lZ5w3jzVxqUgaQwYljToo+gyRjmECnE5Nos8jU1N/OfUqZWSuhmwAD/8fQtRxBdyLeFpH1lHadZN//3FzME3DzT2uIiCYBizSwYjjZnM6PzCQkkSPpXifdu2cei5524Y46bBAnzzp+sz7beXv5ttCl8e7E2/9vLepv3zM+6CZHkvFQfT6dmOUomGdJrevr5V+6+7GtSyXHMoFcf8z1Jp+93Y26lCYawhz/jFUrazAzNj+8QEB/L5uv3/F2k1+QZ70J2JAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODowMiswMDowMKLS20oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABdtJREFUWMO1mFuMFFUax3/fqarp7ppLdzMDDCwmzAxegrIka7KLF2JkITFGE5NNfFAeNPuwGh8ML2rcbDYbXMNkszFmH7w8qYmYGB92jcuDwkYwQYzILEFmggODgDANc+menkvX0FXn24dqFJZuprrVf1KpTup85/zP/7uc77TQKv4KmNrvKoJHD0IWSAMuEKIEQIlZpsihGKAT+ENrS7otk3WBACHFejzuAjYDG4FeoAOYAwrAUTo5gOUQ9zLMAbTVJaUlq12A0IvyKMpjCL9JYHUI2I3wPsJFnvu5yQ7WbJRbgeeBRwE/ka0CwgLwPoZBLCewKC8mX77ZMBBgHbAT5RHATbxdARQfYTsWH+WPWE7VtpEITpOq5lFeALYjTRC9lrABbgUcDIf4LQH7kpmbZMO+39gW4Al+TGIKILjAk8AWJLlgyci+DCh5lGeIM/16KGCBCAhrb8uNnNwBPIUlz8vJyCZVyKD8Evh1XdfHyaN3rrqz8PC6h518Kp8rLhZLH45+GB0pHOlFkevs4pC4C2ED8CkJYjcZWcEA24BUPaKC2Idufmj6lS2vMJAbaCcOmfbH1z9e3rFvx9RHJz/qrksYUghbgc9q/lhCsaRkhfV140uhP98/89Lml2YHcgMrge/JrsuvW7lz887Z/lx/qa5ugoNwR02MJZE0wYT4ZLpeG4W12bWZDT0buuvMZzau2LisL9eXaeBkAVaSsN43k9XpRh88x3NFpO6CIpLyjNc445VMUgLNlK6ZRtpMLkzOFYPiZL3P08H05ERlYr6hdkIpab1OStYCo8QF6TqywxPD6Tf++4aNNJq9+lOk0ezrQ6/ryMRIpgGhCPimNv+SSFaQtyIo3cADtYJ+DdmqrbqHC4cz5cXyeF+ubz6yUaowXxgf/GKw/OpXr66euzyXakD2MvAmMMTepUtXMgfsQrD0IXyC0F93jILruJHv+bjiOqGG0UJ1gTAKnRusMlaT4lueX5ps0jBQhHFgN41cJhBGoVMOys50ZZpyUHaWIGpR3iXueRM1M8lbkV2AcgvC28CmxHaN8TnCEzd90PuNeymFsRBZg+NYrInPDz8I2Fwo8FrNIHnXtRfYRpm4KtxDfEFpDcq4qZjBNe+uGUrPeF0WsqJkVSVnjHaoSIdAyg1D/MhG4epfyB09XdJck7cLiJvtPwM7AK8Jglf6Aet/lz6wYt/yf7kLToCoq3E4Sm2AIhK3RUqIUjRwXIyOJlf2irpbqQInUW4HBuqe+PVQG+WVvNM9B5d9liq2CYYuFWkXET9+NH6rtovQAdKF0IPQH8Fcc2R/IDwDTAD3IOSTmprAlPJHs/s6T7VfqPW1KrHmtUfit4iCqIiqiIiiHqoXmyd7hfB9fIuLIb7VLh0OlrBjzD/YfTh/TFQ0mT9EUBUVuaAiXzRz3F6LEhHCWyj/RG9QemqapSdSI8u+yg1JJDYBUQGMQgAcNbDHpNPnW7+erAZmKOLzN4TbUH5Vl4SAM+dczA1lD3oz3kKd3QgIqrWtCRbVBeAkIieAc8VMZi5brTZRuv4fHwMPAB6XiJgHtiGkrsr6OL9DFrtGuv6THe4cE5UriRa7FzEgCBqCVIDzKhx2XfdTa+3xB8+cKZzM5S4vn59n5OzZFv/kuBqD4JScvPXtX9TVpxHcqwhH/tn0lyv29+x359wAE6eVqiIil4F5VYqCnhExoxFMqBBWpqai9nweHIdTY2PXxMaPhvesJ2TYEPrha+rp3T+UKff08gPde/xzmUk16gBVoCgil4BxETnnuO55lKq1IVE1UnUd/I4Ovj52rF5E/TTwXvCwrv1dlIn+gcMqsyiz+SO5Pfkj2eM4FIFxVL9TKPjp9MXK4mIgIjiex5pNm9j7zjtLrvGTkQXofLozXVlW+VOUin7vn8/sX7l/+W5TMacRnXJESufa2uZXBQGptjaGR0ebnr/1alAHYToM3JL7d+3W91KT6WK6nJ6qXjgT6NpeVJX7Jyf599RUy/P/D0pQLH84wUhqAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODoxNiswMDowMJo3/8cAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mF1sFFUUgL9zZ6bd3ULbBUpBJVTwB1E0UaJg4oNGTUw0MZoYoz5ojKAxMeFFQ4wxBh8wxhB/sWriPyY+GH+RBDT+FhQVFaSBQrtQhRba7ral22l35h4fZosou3R2qSe5mWTm3nu+e+6555w7QrWizwI1gAB1AiOzQBqABOACAeCD5qCnH85QcIA6kNurUulWDUstkBNIL4b8cuAq4BJgDjANOAb0AL/BnG9At8HS3dCm1WqU6qz6ChDOAbkNuAO4IsZU24ANYN8H04us/J9hdT1gBOR80EdAbwNJxRwMkAfeB3kK7B5wFFkRW32FbhAIeOcAa4CbQSoYLwAp4C7QFMij4O6fWEUcMfGt2gp4jcBDEahW6+8ucAvIQ1BojHZrqmFRB+Qa4O5IYXXuHom4wD2g1xCFiCmE1VZA0sCDINPKdCq28IQ28a5k/2nA/UA6OrCTS9ytNMDFwOXlQdHLaOq5iflOmtrGLGO5jzkY/sLROaBy8k4IwHKQJcBXxPDdCmD1OpDaUqAC9kZaBtaxnIXU11GM/ndy7tAqtvZ/SmZmaWBqgWuBb4mSyKQWiwkriynpX8oCGgafZOnwQuqbgeOw51DfvIalwwuoz5UxnANcBBqLIy6sEGWmkqeqhenJJcyYWWI+cwkzZpxNfbL8vNocWX1yqST8JEq/VjyMK0hJhYLUeohT3iWl3EJOkgpCF4PljNOHfyzLWF+prwP4fUfxR04R6nJTDKsWtAM0LAW7m4FEK+02RIdP/BKiwy/Tru1kk2VgQ2AvYONQxHQDtSBtREXLfw6ZkCdIrOXX5hzj3fexKFeP1zRE4Wgru8dbaZ+XJ6gpA1sgKnBiwcZLQ7peQM4GNoMsKNGhuHITpvBwESfAhnkCAqxzCjWdINcCGWTFpHE2rs8qcBjYUNoKAggB1hlizBnAZ4hxZxJQC7xLVPPGKmbiJ3htBfQ8kDeBZbHHlZetIHfPu/n1ve6vhzAWQmtwHIs1ggAp3+eqnh4mSp0K69lWD7gFWAfMrRpT9bAZyK8+89ZXP05k8l4ArrGY0BrjODa0RqzAeNL38xcMDvm/N81mrmcrhoWoJn0cWAV4FQyObGPVpr7r+mb2qk8+co8M+zjG1cgdi+lYFREFLEqAkjXwhxjtqLzOi4BbQF8GrqdMMijH6+3v65z9yMZPkz8czOE68u+Kobgg1eJDAKzAqEU3V5IUIonuTgdA1wFdlQw1udFcwzs72pLbu7O4RhGsRAet2CR6ilgQK6JWBFE0hWpj5bARsEJ2C/Ai0b1qcimEQd2XHT81bNjRFV3j4myICKqiIofUmI7qYAE4EoK8AXzIKUOPgiqJXT3tM577foeMBzYGqABGwQd+M7DRJBJ/ncZ/gwsAssDTqC4CLi0NITi9w72N67e2eZls/uQjHXmtanFlgkU1D+xDZA/QnU0mjzUUChUVMv9hWFk0G79TCNcRTtQFE0aOnuIXxqZ/sLOt7ot9vVHukGgFqqKKURVQDYARIKPwheO6bytsuiGTaQeOzcvl6Ny377RufUWmVpxMX9o21T+hSe8BjLjHT3WgYerb/dtnr/78a/fQkI9jBBBVRUTGgRFVsoIeEDEdIRxVIRjt7w/r0mlwHPZ3dh5XdRpu8I+FzfbVOYPzWjCr7jJNeVdiJApTBwYONr7648/un4O+usZBtQBkReQIcFhEul3P/QulYG2AFELFdZg1fz67du4s4VBTJF7XWmyNc2vYVPc8njPXDPrD6Re+35h+qe0PatwscBjVPxV6UolE7+jYmC8iOJ7HWcuWseWttya3y1TBAkzf9HBi9MJZj4WNyXtTWw983fzwZxvMQL4LI/2OSK67pmZkru9TW1PD7o6Oiuc/fTc4QYKZSd/NZJ/RRe57tbt6s4nObH9hqMfXlhZUlav7+visv7/q+f8Gb188Ax2DNawAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjMyKzAwOjAwLF3cqQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABQ5JREFUWMO9mNtvFFUcxz+/M9N2d1HaQgEbNVy8hEiURIIBEx98MTGRhIR/wMQnHzThQXwyPhkfjBcwBg0mKiJiTIiYoCQKEWOoEZWLXCIt2+VWWnrZddvSLTszXx9ma8tll9m2+EtOJrtnzvd85nd+8zu/M8Z0TZr6y4A2oBlIAT4QACWgAAwCkwPMpjWlP23YSchHgLXAU8BK4B7gLmAE6AWOAT8DvwKnroP+X0wC6R6kl5F+RVKC1oH0EtKiG1bljkIa0nKkT5BGE4JOtNHKuOUVnTsKa0gPIX2NVK4TdKKVkb5CehBpesGb0KutSO/PAHQq8JaK3h2B9ZA2IA3PEHSiDVf0vDvh1TakA7MEOtF+qOgmwkiauhzwGPBErUdaBb3rwGuFljwUvoXwzziVVYvNtcCjwE/MWkqTfKQ3q8WqSeE6qb9L6pE0IimQNNIp9Twn9SNFNWL3DaSZ5vvrYBuR9lSb9AFp6JiUlRTqeguPSNll0lAV2Kii25h0eZOYUWM5l0D6UZh/Cz23EuYthXQN3UVUD5PrrB73p6p1NIBvVSY0aGqAWm98moSW1LMA/1TrGICRPAzcqm8IBvphtIZuYbZhI6ATCG/VeQpSH0EUwvDU/0MY/hB0urr3QuBMRX+WLN4QXkAaq5Yzm6XxV6WuLun8FWmsSzr/itQ1VxqvkWfHKrqzuDHENcEypLO1krwvBXOlYJ6kuVLgS8FtNoWzSEuT1ghJw0DAZWBnrSULwCuCNwQUwQtqv1gR8AVxzZtoQ0he9cRb4sPAZ8Ca6S7SFOsAnr9//foz/tGjuAjCyOF5EZEzDMiUSjzV28vWyoDkqcsMpG7gPeBdoH3amNJlNzT00b0bNvSncrmFQczhKi2seP2a4Gp/OlN6eMFC2huiOjw76d0M8DqwEWioGzSKoswvv/y8cOPGPf6VKyU8z1cMWUnVEmYCIkSAyDs4aU6d9e3JsXevAluJz1vPUGcoNWSzudbNm4/7fX2t+L7JbIqAYjkpvsT87YKlofihnk1hEhjOEYdCdz1DXaFQaN6x41D68OE8vi/MIouXvNIsvppFYJGZIjNMKIPUUj9sDCzgR+AD4GqiMeVyMOfAgd+bd+7sxrmEx3EzJJNZj5zrnB5sbCHwKfANt0s9EqkTJ07P27LliF27FiUANcAp/u5wzMF3LpW6NNM6Mg+8hbQceLwahNfX19eydeuhhlzu6s33yOC/g64wosp70YXZ38CFfDo90lwu11XI3PDsRsWjxymX3yUMh295W6k0fvfu3Yfm7N/fh9nEuHh5hZMMpIC42MkJ9nu+/7lg37O53Glg5P5CgWxX1wy/yMTZIfJ6evZGCxZ8KudexLlJzSAI0x0dR1q2bz9j5bLwPANMEmZ2zWBUIg+cc2adIfTLCIr9/eGc1la+X7aMs9nsf3IzP06Y4Q4fLjj4OGhrW6VM5kmci9PUuXPnW7Zt+8O/eLEk3/eQykDezK4Al83sgt/gX0KUoyjAyqHwPdoWL+bEX3/dNNWsnH3Kq1erobv7uCsW3wmbmpbiXLsrFofn7tr1W+bgwT4aG/MGl5EuCnrTTU19Y+PjpYmHvW/tGn7cvv32fpkN2Am7e9++1NiKFa+FLa0vZDoOHVy0adNONzTUjXODnlnhQmPjaHupRFNjI6c6O+vWn8VTJQTz55f8XO5tLU992XTiZD6VzQ6Wi8WSlixBEk8PDLB3cHDa+v8CFsk24crxS5QAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjQ3KzAwOjAwdKD6FwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr9/nzMXj8ceu4mVG1VSFwiq4iIqKClVHygFqQgkRKNAqjyk4gFC+gBPRYI8IISgIKgQjdKXiFKUi6IGVQKiirb0kjakCiJtrk0dO26cxHbsiWdsjz23sxcPdkJIxs3xpGxpdGZ0zt77m3/9a+01I5ocXd99lrJLUnfQPXGnBtr6FxuWk5QGC5HqZpRlVlgzkckfzU1b6Opks5cZ+sUPmtozbBZ2OkjRVaxotD1910Bb/33AA8CngaVAFmMKGAbePd4+84ZDhz6x+sDJ0ye+ZM3uqWYmtXx/D4H5pSbWgx41+DwyhOAqyuwbk+Y2skPALnm3N8JGZrZv+P/CZjfvJgIhrRb2hLD1JjKKsYwBMqYN9prxJI7THqyyLT70gmygyEmB/zjYzxDfAMI4oFdVERnMNkrKGPy4Cn1cE4ubjSDug61bdoKzTqQfgW2UCJtxkSSHbLVQEJodSt27rlw7vC/WXBd3E5MFJnsQbJOkpkD/q7JC4DEHD3ostmCxYLOP78HVw05MWxDZhl/GjMgb1bqnUo+o1j2RN8waR1mQRfpeaOrMPr4zFmxczzocdyPdOx+okH125W3DD/csDzoyyY7CdLWw/9iF6J1zl5eamaRGkbD7TPQArxHDu7FgzZsDvoyRuj76c8r5r9694vIvv/kZuruyrczmQuu3P7dy4onnj+T3H7+waB7glMFDwAGgfnPF4sAKZ+IudGNCeoPurrbi1q/1THZ3ZZcAV2G7u9qWbP16z+Qdi7MF31i3wGCNmWJxxHpIIM2eTDdI481Yuai1Zc3y3KIG67meFR23rVqcbfENvSvJtESmWNm6kDqbbqi6QSJw4TymRFIqESiw+R3ZEhcgZukywIqNcsAJ8lOVqcJ0dazRzPFSZWxsslJy82knCnGrYDxYw2P0AtH1twInTl4spHe8ecZ7b5PX3vPeJne81Wcnh4otQWPaCHgf8HEwYtrAebCDGI9en2SSmK5F6d/+/dSS4kxt8LH77yy0pRNdE+Xq6B/e7KvueKvv9plalHQNXGJQAzskUyzYWAFo3bxHTnaHh5cQ3Q3FNyMRuCiTDAmcgshbNF2tU4t8MI+dMazfyx4KzA2Utm24aZ2Ne9yaR0PALmyekEnUIh8UZ6rB5VKF4kw1+DBQzLyMnc4YJmYzE/uAb92yB8x/EumPGGtvoTWYU5V/Stq0+MDT77vCIM5D5B1B4PFutpfLlMs8MDzM9rk5sZuI2uHnSaxdNyGjCNyPaGue1IZctfTkon/86kiqNNbuIScjZ6YO5yxrUlaQCut1MpGP6stXaM3idi2snzVqGH8B7gH7ISixEC1nOwjzqbHe0x3v7O105YlvmVzoZnsPBc4AzM3awpdT6fqRrvS4gxNDkXoXHMzWLbuR2SqDZ0z6imJa6YopE5OX+nPH9v01mT9bwAUyrl1g7pPZ3EUAXjDjsZdi97NXRmnbBgLvPzDpKeBsnNS48oirThcy594+mLw8MI6czYF4rr40e5U8yEvmJWRYBrOOBcMCFJ/ZaJVc58uCbcim4ySzfFRPX3rvX5lzb5+92m3cfJYwk0kXzbnepmABokwucuJZgxfsQ2kNmZEoXjiV7X3liKK6jwEqwBmUgXcd7Hfp9IWm/zdYNDpIXonxjNV+LbNPgd1Dw1NKhJXiSLbvtYNhaWz6RoubQMw1OobwmE0DZ5BOA4PjLS1TuVot/m+w60f+d+tpsbrJ7Cg+egpscjaX50Q2wwBXr1XS5/99MDXy3sg14Z8Nr+HMBGZ1oAQMGLwShOGfDF58eGDgFDB1e6FA/5kzt1raZ6uDK412+lT7TwmSm00KZYZJyCxKjZ4+nDv659eDcrGMnACZGZKqQMmMcWEfSK43glET9Zl8Pmrt7IQgoK+//3+8ccujfcPPRSrXE6Wy2wmSX7jSS4dTo2dzx1/YnxrtHTO5AKgB45IuAUOSBoMwvIBR875OVIvMwoBMNsvxY8du2OcjgQVo3/Q05oJHfCr7e3PhMledmcyeeXV/tu/VE7hwHBjC7LzBcCadHpmpVMqSCBIJPrZ2LS8/99xN9/jIYAG61v0kXWlftjVKtH4nNdb3eufRfbtUK50F5QOpMJhMlpaVy6SSSU729i54/aarQaMRJbNlVxr7jW9L7E5MXBxPlvP52vmRMitXYWZ8cWyMv+XzTa//H6b399ILDmv5AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOToxMyswMDowMCfNu14AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABhBJREFUWMO1l0tsXGcVx3//e+94xmPHzsSxPXm4NK/adRKKQISUKjz6QIBKFIQUpMCiwIoFSF3RDQsELCIWCLEosKiggiyyQKWQSFV5pJRHUKpaVbDj2HnUedmOPR57xmOPPfd+h8Wk1JbH9Z1p+kmf7uK795zfd87/nu98otHxkScgbAYLYM4XbdFWsHZQCiNAhIgy2CwtTTmKy0YgaHfwj5cbchk0DLvcCh23xcyOftqiRzGOIB4BskArMI8xAbzFfOXv4J1nb2KIkWVr1KUa+qr/GMhlMR0HToA+gRlohbm1SOcRp/B0GucmGfrDBwy7/yg4T4he4HtgxzGl41kyQAvAabCTOF0GZwzHl4RfF2zXPoH2gn4MHMeURHG3LDASyA5gZIEBQsszM/IBwO4/CngZ4DlMXwcLVqU9Ji/IA/UifHzO0/VwmanhWJ97dbjyMR4HnkHUD7oaOgC+gfQ4ZrEDFu/F/i8DdAA/AXpr5t2sOsMIogicvftarY1JTaAtyDtDV99CnOjGLV0epg8jDtVcNQOwjx3cN/Glz3zcz7S1bM4XSrMvn7sQvTl4JYuZ1snEo2AHwc5Rq340Bmse4imM5JqgmiFwT3/20MxPn/sme3qyLVQz1vK1pz9VePbkC7k//e1CxzrASeBJ0OtAuHHE4sJi/aiGbJyx+4Hs3I++e6K4pyfbDfwfdu8D27p/+J0Txd092VlcjcAZPsYBXDyOmLASKEstsTrHgzu6mw8+9KGOGva8R3of3LJrZ3czztU0DNYNFutvree4Ta23kAj8QKotSknJRODX/pGrpaw5LkA9pWuutkMxnS/O5wvz07WWZ+aK01P5Quk9St3s/YU1c5iNAtGaNd9j6MpY6penX3GRc8WVS5FzxV+cfsUujd5oxq/pKsIYwXDEGPHqbGefgA7E50GrpSNRqYTBG0NXmwvFhfFdO7OlyLnkxHR+/OQLvy/87Ldnts+XFpN4tWBtGfgVaIDp4Q1LV7xjqO+o8LxdwKvA7nWiTxAEUbo5SeB7fhi5aGGxTBhG/voSsGvIniTy3mb4pQ1h42rWEONgp9ZPmQjD0C8US/7MbJFCseS/J2jVzu8wTRDjQIgfWYD9x8DcQ6DfYDrcYCe8kvbfwDM9iyMjgVvAcxA5D99397pQSJfLHJmY4Pl7X8TvuqaGoau3AJoDPYbY1DinjXsWntxZHhpIuaU2B+0y2s202fOs1aRWQTIIQ9KRi8LtO3Rga5vqvdZUMP0R+CjwLJBogNSlXfFy19JYJrDwqwaBBx4e8r1qj+FVZeHKyVQ40JnKezA4Hmm0vuZ76jJ09VUQV4D9wB4M1SOJhCtf31q583rSLQmpzaQWSenqtOrTrEWiFdSG2IrYHcF8fbBQlUN3/xzmpoDHQJm4sJ6Fs5lw6i+bwtk7AEimahTvTVWfkoFMMpMkwxKYTdYPC3D3EuzreZtyk4d0hDhyMAtbo7l/dVQmLgqzeM27hJlMumPSf+o5blePlrkI6dfAS2xUesxIuYVLWyoTAzLnYoAK8AzKwFsenPVSqduNRRag9RBAGeMqZocQ29arhL5VJjsq4682u1L+nYCt2IlAqrbFgHCYlYBBpH8K3syn09PJMIx//1kzJoehsw+Mu2Al0FNIyRUQgJC5pbYo99f2KHdN74JW01u9PCIsBC0Ct028EQTBOefc4BfHxiaubN683FkqcenGjfdf2uk/hh8uZZwf/MDkfbvaO1RBMYvSUfFC1/KN1wKrlKm2kTIzJC0DJTPywsYkbzSCKRPhYi4XtWQy4PtcvXZtlTbe90js/ZxI+AdDgucN75PvpDnhytc7l26dTbvCtCEfqAB5SXeBcUk3/SC4jVFxLiSqRGaBT7q1lf9evLjGz32BBUj0fwHn+ErkNf0ctM2zsJipTJ7NVCYHkZcHxjG7ZTCRTqUmF5eWypLwEwl2Hj7Mn198cUMf9w0WYNPDn04tkv5+RPCtdDT/Wnfl5inPwutAzpdmbzY1lbaVyySbmhgaHa3b/n2Fbe57AnO2peI3b2+v5PJZG89Vbtwq244ePGBfsciZXK5h+/8DFYWTIIiuQPwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA5OjIzKzAwOjAwqUK8vQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABilJREFUWMO1mF9sXEcVh78zd9fetZ04TkmcKDYqJSalpaSyLUiRooqqIOWtLVKREA9FPEBUqRJ9QQjxgHgBlTZCCJXHECCgSolQKBGiRSJBSiNCGjWhMYljJ5FJ7Tje7np3bd/duzM/HtZFCazju9twpNU83J0z3znzmzN/jA5tZGSWfD7GucDWrYkVCtmPgPoly5mRARqSYqBUqVQK/f398h5qtQwXL360ozEzncL29y8zMbHFdu2af6hQyDwG7AV2A9uAPqAKzAHvbNiw4WQI4fT8/MDFwcGiOh3TOuk0OjqFc7YtBD0LfAX4LAgwbA2PEqeBwxKvmenm22/v/P/Cjo9P430wM9tlxreBZ0E9ad1ILINeA35kpkshoHPnRlKP35YMoshZCNoJ/AD0lETGLH28ZvQAX5Xokfiu1JiiOSWpzLWT1UbDbzLjBdBTYG2B3oacMeMZsBfMspvGxqZS90wNK1kEPAE8Z2YdL8wPgIGvmdkTQHRPYcfGpnHODwDP01zpLYIRIYgkEfV6sw1BaI1JNrM+0DdDCAPj4+mymypDEi4E+zToM60WkyTA9PDD3XN79+ajjRujTeVyKJ08ueQnJmrbJKyVZMx4zMweAf2FFNpNBWsmB3wBrLs1KOHxx3vff/HFzQwNZXtpTm3vvn195VdeKRROnFi6D9QC2LqBJyX+CjTW40ipWTnQQ7TQVwgwNJRd3L9/U2VoKDsI/Ad2eDg7uH//QGV4OFsKoaXjCPSppv/1LdWfJExiGy00IMGOHdn8zp1d97Xw50ZGujbv2JHJt9auDBgkZaFOKQMDyK0RCJkMGVujjplZdxRZ1BrWAOXTMKTO7KottoaBYtFXy2W/0Op7uewXSqWwtHZJtlLaHTCtZgNoEuT/+0sUwdRUkjt6tBxCUOX2byGocuRIWVNT9XzUoppKeInLEoEUlra4B+AUzUPLHcOaGXEccgcPlgYrlTDz9NMbS729bsvSUrh19Gi5fuRIeTiOQ5dzLUtXApxe9b+upcr/+Pikec/HnLM3wB5omXuJTMZ8LmdEkUXey8exaDQU3WVbnpbck1Gka2fOPLBunU2rWUWRzYIdXisLZkajoahaDdHioqdaDdE6oEHi1xDmpHSHmdQnkfHxKbznE2b8wow9afvdxd6SoueWF79xudb4Jy6AD44oCgRnGNATx+ydm+PVdmEBxsauZMGeAQ4A2zvn1GwIpe8slp4/FoW5bAMyLuB8cC6Kgg/OgkE9H8fLn1wsx+e3bGV7NrR7rbEE+D0wCnwLyLYBCBhSCI3k7KWV6g8HLBS+LFzGgcNhkROsbpdAiLtzjXNbckUH7856m2z7QLp6/rxf4udmfLHd2fH++vRy9cev++R8ySwyYbc5aAaEtNoYQDBYCeiNdjYFAM6e/TjAdTMdAF1tp69CuVSPj53yyYUiRAIL1lywqz9rtmYBLJgpmGFCPUib2oZdBVY+P/8m8DNgORWoGo0kOf33evz6VXCku2WYIZnM3pNzkx3BAvT1ve8lHZT0O0l3KT1CEt5fnoiXD52TkpAC1AAniIF3HBx3udyNjq8nt27tpF5XsavLXgIelDTaGsJQWLhZW/7tqeBvLP+vxGXNhbcamRGQloErmF0CZor5fLU/Sdo6yNxhZ88+SDZrMrPzkBwAX/kgk81mdfRQq9VrfzqVJKduNt8VbDUCmYSTDKQGsARcE/w5ymR+KfjjvmvXJoDqcKnE9JUrnT1y3G5jY1N4f2PAuc3fh+79Zi5zW5nyjeTMmZXqyydCmI/NIgNMzXtOHViSKBq6buYmPdyS0VgpFHzvwABEEVPT03do40Pb7t3HzKz/Eec2vwq5z5m5ZqFszFxdWfrJ8UbytwXIREACFM1sHpg1s5kok7mBSEJo4BMvZSJ6+vr4x4ULLQR1j+zRR09glv2S2eafmmW3K1Qr8cqvjtdWDr9rli0Cs0j/Esz15HI3V2q12MyIslmG9uzhzUOH1h3jnsECjI4ezEkj3zPr/3ojOXciXnrpsA+LVw0rRGalma6upe1xTHdXFxcnJ9v2/yEfK+40aSD2/r2Xo6j7N95fKYqZgm4UY9txP5L4/MICfygUOvb/b4OFAZuQsv++AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo0MSswMDowMPiypBMAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfxJREFUWMOtmF1sHNUVgL9zZ3a9u97gXRITO4CwImhpAqXioQ2oeWgESPAUgRQk4AHEQ4uQqJAQP614QFVRItSi/tD0CRVo08gR/xAhkQRIIhMURJxAfm2vHdzY63g3Hv/P7s7c04dxCm7WYXbJkUZXmtl7znfPOffcc1doUn7/smJSgIHalUiiyApR2lBSCC4QKPiAN62Uc4IaB5al4Zd3SVM23WZh3Sz4g0hLF2sSo9wCrAduAjqALDADFIHDy4S9Fg78fC3H9h5Bm7XZ1BI3dyuidChsUrhP4GcxNB4AtonQLZaxJ+9t3HRDM7Z0Kwiiyg9RnkLYBGTizFUFEeZQug1ssYaTVtHfbIqP0FgaWATDtcDvFDYCblxTIqCQEXjAChlVfmuFAYifFqYhrxpyCo8BG0Xig/4PGFDBVbgbeMyx5J7fHj+FY8OiOMAG4EG+x8aU6HFRHgI2CDiXFPb5HYoa8gqPEu30C9eiYBVCC0EYjVaj90tIFviVFfJxvRvXQ0bhx8BP64V+YfNoZ57itZ04LUlylSpe3yhh8Rwdqoj830QRUOUWgRuBj4mRu7FgBQzK7UBLPVDAXreKcxtuglyWVqLQtq65hqndvZT7R1heDxhoEbgN2AcE3+mxWLCKEVhTL78UyGeZXL+W6VyWlfANbD7LyvU3MJ3L4tVzm4AjcINIPI54G0wRlA7q1GVVaGslvaKN5XX0mSvauDzXSlrr0wrCSiRevY+Xs5Gq1FKfHYMrSxgUocWYpXe8QjoWQ2zPRjK51DrmKsz4VUr1vvtVSvMVZpdynSiexCy1cWEt0AeEdTzH+CSp3gJWlelFXlOmDw2g45OkpT5tiHAKwcaBiFu6rEIPUdOyKKQiEISkDpxgpV9l+Cer8ZIJ2qs1xnsLVHsLXB2EJJeArRE1OJcQVrCqfCTKCMLqet71qyQPnqKrdwDE4KhlVS06HBxZKgeUEZQ9EtOzcdNAxTIKbEPrKxaJwPwaznwF/BrORUGjaP0LoYjEa2Zi9yKbtysq/EDgFYR1ceddRD4V4cG3/7Tx1OhwL8ZCaA2OY7EmKi0Z32d9scjWRmEBNndrgqhjehHobJZSVUfnZ849s+OP97wTzAwlAnCNxYTWGMexoTViBapp35/70eSUf6T9CjoTtuHuqQa8C9wMPA4k4gOe7wesPXNq/8mPtz+er0ydvdcYxzVgMIhjFEBNdDBavyUVHGpPTRg4OhpKX8N3i83dCtClyt+BOyTm6bOAjHd2oLB3x1PvFQufecZxRRcdXwrIwspAVQCswLxFP2zkUADg6egacpooFQYbmevPet6xT//ZUxw8OCHGVRArUdlaeCQaRSyIFVErgiiaQTXXMOwCsNZy7BJ4CWUuzhwb1oKvj+/5/MSBbYMipm4LdqGIoCoqMqLG9DUFC+BdSSjKPxTe0ov0oqqgqpTOfHX80K4/HwqDqo0BKkQ9tA8cNrDTpFJnmr6erDoMk2kmMgEviOr1CjfXgxCB2cmxscMfbe2ZKg3NccFvVEDO98WKYFGdA/oROQkMT6TTM221WkONzCJ54n4hHaAuHLFB7UW14fR5T357DGt+pe+LN3pOH9s9hsj58EfhVYyqgGoAzAJDCrsd131N4YM7h4aOAzNXex6F/v7m/uT4tmzpVrzSUD6zrP05N5F+RIxxvylTQTh8Yt/B/a8/88mMN+Ib4wggGl0bqsCsKhOCnhYxfSGMqxDMl8thaz4PjsNAobAoN763/PqFg5LOrLgxc9mKrYlk5lYRAyjeeGGw581ndw6f2FsyjusQ1ekJETkLjIrIsOO6Z1Bq1gaEtVDVdchks3z15ZcXptSlgAV4+qVB3GTynnS2/S+Ok+iszE1O9+75687ePX87atzkhMAoqv9RKGZSqbH5SsUXEZxEgqvWrWPXq69+p41LBgvwyHMfpC7vWPtsSyb/8Eh/zyf7dzy5bX723KCIKTsi3nAyOdvp+7Qkkxzr62tYf9PVoJ6kWpf7XnnoD8vd1L9LI0cnvFKhzNkpP9XVharyi1KJ98vlpvX/F5vAnOxV5r8nAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo1MiswMDowMAXwvhAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABa9JREFUWMOtmGtoHFUUx3/nzkyym7R5tIlNfdCH9f0CLdoK/aCoICiUFkTUDxWxKoLQL0oREdEPikjxGaP9oLVW8IOo2GqpilqJlfporU2oaZKNaW3SZrOb12aSnbnHD7PV1O42s2sPDBdm773nd8/933PurFChvYxSBQhQCzIBTQL1QAJwgQDwFbIDkD4X1In6cjdSkU+3UthqIAvSCJfnYCWwCrgGaAHmAOPAALC/Bb5T2LMcOtpBK/VZ0RLfQgmhReAu4B7ghhgT7QG2WfjQwOBDFbgua0QrigERuEThCYW7BGrijC2EMwd8KPCChUMO6PoyEMqSQQDiwTLgWWC1lDG+gFQD3KdQI/CkC92UIQsTt2MbigcNwGPAaq1c7y6wRuCxPDS0liHh2LAKjsDNwDrArew8R1bYkfs1ms85q7BtKAKNwKMSnfRii0GBcMZz8l2J/nOAh4HGt2JGN+5WGuBq4PpSoIA2X8fAojtxqhtpmMqQ/fNTwhO/0KLRofxvdAFWClwFfEMM7caGVbhVovR6OqhgF9/B8MpNUHchtURbW3vRvYz+sIF06jPmFwMmmu8WYDdREZk1YrFgBS6niL4UqF/KyPLnGKu7kAXwL2zdMhYsf5axuqVkS4TNAa7UmBxxYYWoMhU9V3MXk5x3FfOLzGfmXcO8uiUkS82rsEBj5vty0k+i2EsFjIcrUtyhCNXi4ZQSpFByIadZ7NQFjJRwhj/E+FSGoWK/+8MM+SeYOEPosmcVVsEqdGmUkU6DHe4g0dmG1ZCxU8aFjHW+iWY6SZaADYE/ABuHI5YMFKxAO9Gl5ZRDJkCQI7HveRZMZ+m/9EGyXh3N+VFOdLQx3dnGBUGOqhKweaILTizYWMJuRUVgCbBLYGmRxQBgXEKvBsTFsQFhkAMb4JzBSY9EqSu1Hpk1z8bVrALHgG3FoiCFxwY4U6M4/jBMj+LMAmqB94nuvLFKWOwS34aicLHAu8CKuOPOYD8IrNvasvqP/up9GAuhNTiOxZootdT4PqsGBmgtF7YA7AFrgE3AwkopFT2WM8MbN5+39tO8SXkBuMZiQmuM49jQGrEC00nfz102Mur/1nwOCz1bNixEd9KngQ2AFx8wioxibSrx/Xfbmzd8Mu4c9x113EIFk0IPRUQBixKgZAwcFKNdZd/0CsCLFd4EbpOydkdJe909n89/4rMjiR+zDq4oM6tJYUmqhUYgykSTFt1VTlEAoPDt1KeRFHrLGTtpstl9c7e2H03szRhcBbESHbTCI1ErYkGsiFoRRNEaVBvKhi0Aawa+BF4n+q6a1ULyQXfy65/2z93WKxgk1oaIoCoq8pca01URLMBxCAXeAT7mDKknuoArg9W/d7Y3vPJrINM2BqgQXUt9YL+BHSaROFrx/waXRU0GeFHRS4Fri0EIMO4MDv5Y39qe9VK50yWuAoJqYW2CRTUHHEbkENCfSSbH6/P5si4yp1hBuwr8FpLfpIRjJ1/MbPP4UwfmfNR+OPnVIMjJ7Y+2VzGqAqoBMAGkFL5yXPc9hS9uT6U6gfELsll6Dh+u8H+cGdaGMuSkGuts8zOeJh8RjPtvmgrC3sTuvTubNn476v7lm6igiaoiItPAhCoZQftETFcIJ1QIJtPpsLaxERyH7p6ef3xVLIOZEd5o9mYdw+baoOk6T2tuFAygDLt9f+6tf/vnEfeIb9R1FM0DGRE5DhwTkX7Xc4+i5K0NkHyouA5Nixbx+4EDRSV1Vux5rxfHVq2tDZtfdfAW+jIytqfhtR176t84aKjKCBxD9YjCQE0iMTg5NeWLCI7ncf6KFXy5ZcusPs4aLMDjc79INE1e8VQybHygL9H+7c5zHt+WM8O9oibtiGT7q6omFvo+1VVVdHR1lT3//5bBTEsG8/2Mm3rJtYkPBqsPZoYTPWn6Rv1ky2JUlZuGhtieTlc8/98L/TvfZZ49dwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MDQrMDA6MDATW3FEAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABQpJREFUWMO9mNtvVFUUh7+1z5nOTKWUSsE2ahRUQiRootGIiQ++mJhIYoJ/gIlPPmhi4u3F+GR8MN4gBokaFRU0Jt4SlYSLQhSIKAhyibRMWy6l9xl6nTLnnJ8Pc4pFmOFMW1yTlZMz++y1v73WPmvtfYwZitD0WwOagUYgA/hAABSBAjAI/3YwbEZj+jOFnQZ5O7AKeAC4E2gB5gGjQA9wENgF7AWOTof+X0TlX4vQ00J7hZRA9wg9JXSd/g/eGNKElgt9KDSWEHRKx+J+y2M7VxXWhG4T+lKoVCPolJaEvhC6VWhmizehV5uE1s0CdDrw2tjeVYH1hNYIjcwSdEpHYnve1fBqs9COOQKd0q2x3UQcSVOXA+4A7q06p7vpYTUeTSwgT4HvCNlPC1RMrKuAlcDPzFVKE/KFXq24Vk2hVqtf7eqWNCopkDSqNnXrEfULRVXW7itCs833F8HWCX1bcdBbNKSDykkKdbGEOqCclmqoAmwU261LGt4kYlAlnDeTZSULL2PPcSfXsoRsFbvXQbL6W4v7MxVbUvgVC76RJkW1Nz5LQknqWYBzFVsGGCXPwGXbhhign7EqdgtzDRsBbUB42dajZNhARMjIRf+HjPAu4lhF74XA8dj+3EhcEJ4QmqiYMxs1qRfUrnadVJ8m1K6Tek7tmq/JKnl2IrY7d4Uh3hMsFTpRNcn7CjRfga6VNF+BfAVXKAonhJYk3SMkXQYCzgKbqoYswGMYjyFgGI+g6osVAZ9R3vMmKgiJdz1xSVwGfAzcN9MoTZM9wOOPtTx6fH/6T1wEYeTwvIjIlVNLfbHIAz09rI87JE5dhiHUAbwFvAm0zpRS6OyQG9qw5vo1/d2uc3HM4WINY6+fF4z3Z+uLyxYtpjUV1XYYir1bD7wMPAOkagWNiKJfM7/senbRM9/2eX1FX56vMqSVAy1hJiBCBIi8gyPm1FZTTY69Ow6sp3zeeogal1Iuletct+DtQ31eb5OHb7Lp1URlc1L5UuZvFSwJxdZaisIFYKCL8lLoqKXvOVcobG74dPfvmX15D1+GRVYOeaxWvppFYJGZIjNMqB5pQc2wMbCAbcA7wHiSPiVKwU/ZHb9vbtjU4XAJj+NmSCazbjnXNiPYWELgI+AbrpB6hDiSPnxs3YK1B87b+SgBqAFO5e8OBx384DKZM7PdR+aB14SWA3dVgujzens3NK7f3ZXqHL/0GRkYUjwvI0IaB9ox+xs4lc9mRxtLpZo2Mv+ZuhF79FCJ0psh4cjlnitSnPx63le7t2e39xo21a8cXuEkAykAxoBOwXbP9z8RbHm4s/MYMHpjoUCuvX12X2Ti7BB1e93fL4oWfeTknnS4CzZDgnBvZs+BTxs2Hg+sJA/PAJOEmZ03GJPIA13OrC2EfhnBcH9/eE1TEz8uXcqJXO7CeLM+ThjGPrevgOP95qD57nrV3+9wCNHld538oPG9P077p4u+fE+oBOTNrA84a2an/JR/BlGKogArhcL3aL7pJg7/9dclY83J2eee0j3qSHUcGnbDb6TD9BKHax224ZEvGj7/bVd2Z2+KurwZZ5FOC3qy6XTvxORksTxb44ZV97Ft48YEjplD2dKwJbNiYsVLTWHTE3syu3e+uPj5TXk31OHkBj2zwqm6urHWYpF0XR1H29pqtj93p0pgYbCw2Ol3vp6JMpsPp4/kc5ncoN81XGxsuRlJPDgwwPeDgzO2/w/IRTXCFJZFPwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MTMrMDA6MDAaVk9UAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfVJREFUWMO9mE1sXFcVx3/nvnn2PI/leEZDHSNQ04gUUgGVQIIGqQuqgMSuYtEFRUoqNlRIlVixoKiqukIIwgZVhEr9CAS1Vj+Q2oJE+EijpmnTNiRNaxKnSWyntmM/z0wyiXnjmXf/LGZchXbGvHECR7q6i3vPub93znnnnveMDUq9XqfVaiGJarVqo6OjZTPbBOSBHNACEkm1hYWF5fHxcQE45xgdHd3QmbZR2DiOGRkZsXq9fhuwA7jTzG4HNgPDwBVgQdJx4BXgSD6ff6/RaKhUKv3/YKvVKmmabnbO3QN8B/hqBrUjwH4zewa4WCwW/7ewcRwTBIEBn5X0I0n3mNlQHyZWgGfM7KfAKUD9QOf6gfXem3PuM8AjwN1m1pe+pCEz+25n/rFz7n1AWfVd1o2VSoUgCEYlPQDcLakvUAAzo6P3bUkPeO9HK5VKZv3MsEBgZncBu4Gc2cbezY5eDrhP0l1AcENh4zhGUlHSD8xsuNseST1HDxmW9H1JxTiOM8FmDaUDvgh8pReomSkIgoUwDAMzG5VUazabaZqmmyVZj0jsAL4A/J0MuZvJs2bmgG8Agz1AfRiGy4VCgSiKCvl8PoiiqFAoFAjDcNnM1MPDg8BOM8uUCplhzey2Xkadc5eiKKoHQTAGFGjnYSEIgrEoiurOuVoP0wHw+awcWdPAaN9MXWPpnIucc0GXQ51zruScG0zTtJfdMTLW+37KT349O72S0swG6fHGd1SirAD9lK5LvRYkXZEU91iLJV1dR7e2TsXoH1aSlzQlqWss0zTNNxoNL6n+Eb16o9FQmqa9vJea2Wkz8zcM1sy8mR02s2aXNSTlkyQZS5Jk0Xs/671PvPezSZIsJkkyJmmwh+kmcCQrbKacdc75NE3/BsyZ2dZuwN77gSRJtjQaDWjn6Cc7l0KwtqeLzEn66w31rNoyD+yX1NVwx8OB9z7w3uO9DyQFZtYVtGPnd865BTI2M5kv+DiOMbNbgSfN7I6seus44LUgCHbvvvfe08dPnsR5SL0jCDzeGQYMJQl3LizwaEcnc+kql8tUKpVzwC+BPcD4dYDOV6vVX+/atWtp8cKFmzocrjNSwAOrgpWlaCi59RM3MR76/prvTjs3BDwE/BAI+wBcy23/xuuvv/LQgw/+YSmOk5xzObUhrR1oCTMBHtFCVB28a05TffWkpVKJSqWyAjwq6XYz+yYZU2ktb6enp8//Zu/eE0tLS8UgCExm1xhQ25zUntr844JbUvHnfi6FD4GBaTPbA5zLWtABLtVqtecmJg7/4+23q0EQyMy8tUPeGdaezTyYN5M3w4SGkEb7hu0Aa3h4+ADwKzNbyaLTarVahw4devO5Z58955wjW/NuhmQym5NzUxuCBQjDMDWzJ4AXtI571xrwycnJycf27j22urrqM4Aa4AQJcNzByy6f/6Dv76g1qdfrrK6uVsMw/JmZfU7Sl7pBmBmLi4sXn3z88cMXZmdXPr5HBkbncYXhkVaAM5idAmarUXRlU7PZVyPzHzIyMkIYhnLOnWg2m3vSNK2vefLaudFoNF5+8cXDhw4evHjNBdEOr3CSgdQCrgLnBX8Jcrl9gj996/z5SeDKp2s1zp4509+n+EelVCpRrVb9/Pz8S+Vy+Qnn3P3Oudw1ZSp96+jRYxNPP3261Wqp88/BOuurBlclqsC0M5tKYUlG6/LSUlooFvnj1q28f/bsh+ddFyxAsVjkwIEDNUmPlcvlL0dR9DXn2gGbnZmZ+e2+fW/Nzc0luVwukNQEqma2CMyb2WwuzH2AaHrfwpqpyAWUb76Zk++887GzrhsWYOfOnTp27NiJer3+i4GBgVucc+OXL1+uv/D882+89uqrF3MDA1WDeaQLgoVocPDivxqNBAAzPrXjDg489dR/PWfDP+a6ycTERH779u0/2bRp0/fePHr04CMPP7y/Vqudc2bLgVltdmDg6niSMDgwwHtTU33bvyGeXZNSqZTMzMz8fNu2bb//5+Sp6vT09HJQqyUjW7Ygia/HMS8tL2/Y/r8BRVECE4yt2dgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjMxKzAwOjAwz+xZAAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABihJREFUWMO1mF9sW2cVwH/n+6597aRVbLykf0S0iiJGpwLSGkGHtAcmQOINDWlIEw9DvIAmTeKhoAnxgHhCCFVa1UIRDxBEkaZ1He2YUCnQDalUqdextmvnpUs60sVxbMdO4tROfO93eMhNadO4vXbLka6u7v3uOefn853zfeez0KMUCgWazSbOOWZnZyWXyz0EDIhICvBUNRCRFlDPZDLVubk5tdbi+z67d+/uyafXK+z8/Dy7du2SQqHwaC6Xexx4AvgcsBXYBDSAGeCder3+pjHm7NDQ0OVSqaS9+pRelPL5PM65rcaYp4FngC9s9J3q/7hE5CxwREReUtXSyMjI/xd2bGwMa62o6iOq+kPgaaBP5N5mVBURuQG8BPxMVQvGGN2zZ09s/12lQRiGYoz5JPBT4OsiEls/+kF9qvotEekTkR+JyAdA7LQw3UTV87yMqj7fLeg6aE9VnwKeV9VMPp+PrRsbVkQs8CTwLPdRmGvAwLdV9UlVtQ8UNiqoLPAcq5V+h6gqqopz7ua19q6DbAK+a63Njo2NxYKNGyFjjPmsiHy+Eyig/f39MwMDA9bzvEwQBPX5+flwaWlpq6pKhyJ8PAzDzwCniZG7sWBV1QBfUVV/vdMI1GUymbnh4WF83+8HLNCfy+UWpqamqvV6PbcRsKr6wJdF5J9AcM+IxY0s8GgEcYekUqn57du3L/q+vwW4Cev7/pbofb2DXQvsjssRK7JRSLbSYV1OJpPpdDptN3Bq0un0x3zf95eXlzc0DWwh5nrfTVWnNnoZLfZep6QUEV9EbPTd+jGAdFyA2EsXMN8BhiAIGkEQVDYaD4KgEgTBUqddTlXrd1kxuodVVaeq40C40Xiz2UyVy2Wnqovr9BbL5bI2m81O0QtF5H0RcXE44qaBA86o6jPR5nBbZJ1zqVKptCUMw6nBwcG6MWbQOVcul8srlUpl2DmX3CiyqtoGzkb2Hwysqjpr7T+cc9PAJ9aPR6mQLJVKOyqVCqxW+fYwDFFV2ykFRGQa+HsYhrFg4+ashmFYBI50ioKIoKo2CAIbBAFBENi7gUZ2/gDMiEispI3dIkbt4adU9XfA3rh6d5F/WWuffWHfvvcL4+MYB6EzWOtwRhCgr9XiiZkZftktLMC5c+cSIvIUsB/Y1iulqhYXFhZe+MG+fccXqtVEAJ5xmNAZY60LnREnsJJutW7sml9oXRgcYlvCddc9iUgbOAE8BnwfSHQBuFaM7uKFC4WDL76YrdVq37TGeAYMBrFmtccwq32Ca/mp4O3BVM3Au8VQxrs+1kT95w7gV8BXu52d69evTxw+dOi1K5cv1z3PE73NQPSkGt0EwAk0HfrXbjYFAKKz04equl9VJ7vRXVxcrJ86efJM4b33atZajUAcNy9ZvYs4ECeiTgRRtA/VTNewEbA2m81TwEFVvRFHJwiC4Hw+nz918uSkiBDn3AYiqIqKTKsx4z3BAjQajVBEfisir3KXXnStAZ+cmLhy9OWX32632y4GqABGoQW8Y+B1k0p91PPxZGhoiGQyWVtZWfm5qn4aeGwjCBFhbm6u9Kdjx87MFIs37vxGBYSoPVAEx+psXUWkAEzV0unGQLvdVSNzm4yMjNBut1VVLwRBsN85t7gWyVvvK8vLy2+ePn3mrXy+dMv0r06vYlQFVANgCbim8Dfreb9X+MvXrl27AjSG63Umrl7t7U+OWyWfzzM9PZ3NZrM/8X3/e8YYb22ZUtXw3+fPn/v14cNvVCuVljFGAInGV4AlVWqCfihixkMoqxA0q9WwP5sFa/lgYuKmr/s6pa5FeHR0tC4iv8lkMntSqdQX16a6WCz+57UTJ94qz862rLU2alxqIjILFEVkykt4H6G0nQuQdqh4locefphLFy/emVL3C7smx48fJ5FIfCObzR7wPG9bo9FYfPWVV14/dvTou14iURMoonpdYaYvlSo1l5dbIoJNJPj43r2cGh29p48HBgtw4MCB1M6dO3+8efPm71y6eOmNw4cOHllYXJw0IlUrUp9KJpe2tVr4ySSXx8e7tn/faXCrZDKZVqlU+kUymfzj5ORkbbpYrJpqtbVpxw5UlS9VKvy5Wu3Z/n8BcY8RVtNG93EAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjQwKzAwOjAwY15brQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABh5JREFUWMO1mF9sW3cVxz/nd23Xf26bhFGaNEyNKrTB0lFpD9Ah7QEESPRpAimVKA9DvIAmTdoTQoiHiidUsWpCZTxVMESJHG3lb4VEl64gteWPuiZjTZrUdqZQ203sxk7s1H/u/R0e7FTpZqfXXvlK1pX98zm/zz3n/H6/c6/Qp86cOUM0GsUYw+joqOTz+Y+r6oCqRkUkBHhADSipalFE1HEcYrEYR48e7WvOUL+wruuSyWRkbGzsqVwu9yzwHHAYGAZcoALkgRkR+RtwdXx8/Mbs7Kz2O6f0Y5RMJlHVYWAC+Cbw+fsOpavLq8BZEUlaa+8cO3bs/wubTCYREVHVJ1X1+yIyAcSD2KoqIrKpqkngJ8aYm6qqExMTgefvqQystWKM+RTwY+D5XuzbEY8D3xKRuKr+UERSQOCyML1E1RgzCLwEPN9eRD2rbfd14CVr7eDk5GRg28CwquoAXwJe6CWiXRRS1W+3/TmPFHZqagpjzBDwIq2V3ulmUFWstfi+j7X2/m9d5ALfFZGhoNENGiEDfBb4XDdQEdGhoaH8yMiIE4lEBhuNRimXy/l3794dVlX54C4hIqjqs8DTwNsEqN3AsKr6FWBXJ1DA7t+//+7hw4dxXTdBK7WJAwcOrF+/fr2YzWYf6wTc9vdl4O+0DpGHRuyhUlUDPEWX+nJdtzw+Pr7huu4+4D6s67r7Dh06tOG6bqmLawc4JCKBOILCSvsQkA5jJBKJ2MDAwGMd/JmBgYGPJRKJWKfalZb2yQ4nyXYFKoO2r2jXOzYm1G1CEdlljNlpxceCMASObFvlbgP1er3SaDQKncYajUahXq9Xu9mqammHHaMvWAssAn6HyFEul6PpdNqq6sYHQDZSqZSWy+VYl8D7IrIgIjYIRNDdwAKXaTUtD6RURPB9Pzo/P7+v0WgsHzx4sBQOh/c2m83VdDrdSKfTj/u+H+kC26TV4Dw6WBGxqnpRVbMicrBTdBuNRmRhYWEslUphjHGstfvbh4PTbf2oalZVp4NGNmgZqLU2B5xV1Y6ORQRrrdNsNp16vU6z2XR2Am1H8zcikheRQEUbuEWcnJxERJ4AfiUiR4La7aArIvLCz199dWFpeRljwbcGx7FYIwgQr9V4Lp/ntV5hAZLJZJhWx3QKGOmXUlVzlUrlB6deeeUP9Uol7EHIWIxvjXEc61sjVqARq9U2P1Ner83u/QQjYdtz99QE/gg8A7wMhHsA3OoH7OLCws2pycmh6vr6MceYkAGDQRyjAGpafYKt7Yp67+yNrhl4L+fLYs+PNclkEmBMVX8BfDXo6bOllZWV9JtTU3/KpNMlx3FE2Z7e9jfV9kUArMA9i/61l0MBgPZjyPu0SiHTi+1mtVr655Url5cymTVjjLZBLPc/0rqKWBArolYEUTSO6mDPsG1gHRwcvACcVtXNIDa+73vzc3P//sfVqxkRIVhCRFAVFcmqMYt9wQKMjo76qvpL4Hfs0ItuNeDZ27fn3rpw4R3P82wAUAGMtt47zBg4b6LR230/nszMzBCLxdY8zzupqp8GnukEISKsl8t3Ll28eLlYKGx++D8qILTbA0WwtLJ1C5GbwPJaLFYZaDZ7amQe0PHjx/E8T4FZz/NOWWs3tiK5/dpsNuvXrl27PHfjxp1t6W+lVzGqAqoeUAWWFN5yQqFfK/zla0tLc0Dl8VKJ9K1b/b3k2K5kMkmhUBjavXv3iXA4/D1jTGjbNuUvzM//69wbb1wqlUo1Y4wA0h5vAFVV1gR9X8Qs+rCqgnevWPQTQ0PgOKTS6Qdq4yPr5MmTEo/Hn96zZ89rkUjkC1upXl1dzfz+3Lnzi/PzBeM4Dq19ek1EVoCciCw7odBtlKa1Hn7TVw05xF2X/7z77odL6lHAApw+fZpIJPIN13V/5jjOyL3NzY2L09Pn356efs8JhdYEcqj+VyEfj0bv3KvXayKCEw7zySNHuPD66w+d45HBApw4cSI6PDz8o3g8/p3UrdSlN6eSZyvVasaIFB2R0nIkUh2p1dgViXBjcbFn/x/1ZcUDSiQStWKx+NNQKPTbbDa7tlooFGVlpRYfG0NV+WKhwJ+Lxb79/w9bQvQtKYEySwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6NTArMDA6MDCv9FszAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABjJJREFUWMO1mE1sFOcZx3//d9beXePixQvCpFSp0qopNGlFKlGn2EhF5VIulSqlUsQhqDduPfClqqdeiEJPPeTApY1UKuVUCcIhaikpBrxRKEmJ7RrMR7CNd8GuP3a9O/bszNPDrhE4Xjy7oY80GmneeZ/nN8/832eed0SLduLECaIoAqCtrU1BEGw2sy5JKSBhZlVJPjCXyWRmZmZmLIoiisUip0+fbilmolXYarVKKpXS0tLSziAIXgf6gR8APUAnUALywGdzc3P/dM4NDgwMDO/du9dajalWJh09ehQz65H0hqQ3gR+ZGdLT7sye4hoEzpjZ+2ZWOHXq1P8X9siRIwCS9DJwDHhDUkfc+WZWBt6Pouht59yoc85OnjwZO36zMhDwbeB3kn7e7HxJHWZ20DnXIek3zrnbQGxZeE1mdZOk48BBSS3pXZKrvxnPzAb7+/v9gYGBWHNdE3E8YB/wVqugT1gCOATsM7PYCYt14/HjxwGykt4BXl69kKC2mMyMMAyJouhxWatncy237UC3c+6Dvr6+cpzsxs2Qk/R9YPdag/VKYNu3b8/v2LHDS6fTmUqlMjcyMhJOTEz0mJkaAL9uZq8CF4mh3ViwZuaA/UByLVAg2rlz538PHDhANpvdQO2Nbdi1a9fCuXPnZoaHh7MNgJNm9lPgElBdN2NxYc1sJ2vIxszIZrPz+/fvL2az2a3AY9hsNru1fn1uVc1dMc/MXqknY12LdZNq1sMaddnM6O7uTvf09GTX8Oe2bdvW3d3dnW4AK0lbG2lktTWzqlMNn9i5RKOAkpLOuWct5HRcgGZK13yjgXK5XKpUKtMNxqYXFxcX1xqrV5BGEmkZNgJuAeGXHDhHPp9P5XK5KIqi4lOToqg4ODhohUIh7dyaoULgZt3/uhZXBhFwBXiTVYtMEkEQpC5evLi1UqmM7969ey6VSm3xff9RLpdbzuVy3wiCoL2BSgJqDc7zhZX0DzN7ALy0elASlUql/dKlS98cHBzEOedFUfRCEASEYeg9Y/08AC6YWSzYuDIwM5sCzjTKgiTCMPR83/fK5TK+73vrgEaS/kyt540l2tgt4rFjxwC+A/wJ6I077xl2VdJbFz788OajmRlcBGHk8LyIyAkBHb5Pfz7Pu/UJsZuIy5cvs2fPngVJ88Ae4GutUprZ1NLS0tvnzp69XikWN0bQJaPLTBnnrNOkTkEyUa3SEUZh9YWv65XNG5vrniQFwFngNTP7taS2FkCjQj4/+kkutynw/V86KeHA4ZDnDMBcTRaRn0xVr29JzToYmgp1K3ZmV7Lb19cXAGOSvgd8iyZ3G8WFhbv//vTTSwvz83LObTRpg6SO2mG1s9kGiU7QRsRmxEshlJqCfQJ4HngE7DGzTTG/liwvLc3dGh39+8T4+ANJSDLVslg/VDtLBjKp1v0Y1oZZoWnYFeB9+/bdq1arDuiPI4coiqqTExNXhoeGblitBYsRScJMJj0wKdfM5/Ypy2QyoZn9UdJfWaf0mBmzs7Mjw8PD18MwjGKACnAGPvCZg/MulZpseXsyOTlJV1fXbLlcfsfMvgu81gjC9/3CzZGRK4vFYnmNRxGIentgiIjaLngMaRQYn02nS11BEL90rbarV6/S29uLmT2MomgR2C8pufL/YOUcVqtLd27fvnBnbOwOPN7i1F4vciCEVUEVYNLEJ4lE4mIURUM/++KL/Fgms7xlcZGR+/dbhwUYGBigr6/PSqXSuOd5m5xzP5TkngAOHxYK14Y///xfQRBU622kq+8aAokFYEpww8l9FEk5k+4vTk8X29Pp6lg2y+1798iXSo+18ZXt0KFD6ujoeDWZTL6bSCR+vCKH4sLC3evXrp0v5PPTkjxqjcuspIfAlKRxL5GYxAiiqEoYhGYJj47OTj6/ceNLcZ4LLMDhw4dxzv0inU7/wTm3bXl5ufifoaHzoyMjQ87zZoEpzCYM8h2pVKGytORLwmtrY3tvL3977711Yzw3WICDBw+mMpnMb5PJ5K8eFgofXfv44zNLy8t3BTOeNDfe3r64zfdJtrczfOtW0/6/6s+KpyyZTPqlUun3nuf9ZW5ufnaxXJ6JJif95IsvYmb8ZHqaD2ZmWvb/PzZaBDRi9tDdAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowMCswMDowMAjWPmkAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABixJREFUWMO1mE1sVNcVx3//+549Y2MMDkTMTBHCNgpVmlApi2IagVQ0SFVXlYpSKcoC1BXLrlKp6qLqKoq66gKpqzZSqciGSnXYuEVJIwWjVkIRkAhMBtt82MYej8fz4fHMe/d0MQZR8Mcbhx7p6S3uu+f87rn/d+55T2zTTp8+TbVaxXtPqVRSf3//XmCXpDQQAhHQMLOl2dnZYjabtTiOWVlZYXx8fFsxw+3CLi4ucuTIEd28efP1/v7+Y8Bx4PtABugDqsAs8GUmk/mXmY1PT09/NTg4aNuNqe1MyufzeO8zzrl3gHeBo1vNMbNx4IKkj733c1euXPn/wp48eRLnnIDDwPtm9g7QKyV2Uzezj83sA0m3nXM2NjaWOH5HMjAzmdkhSb8DfiqpUxn1Au9J6pX0a+AbILEsgqQP5vN5gAFJv5L0npmFHWT0qUlykg4DgaTx4eHhRqFQSDTXdRAkkHQSOANsC/QZC4GzwElJiROW6MFTp04RRdEeSR+uZeUFMzPMjCiKiOMY7z1PFrTBwrqBV7z3nwwPD9eTZDep5pxz7oikH2wECtjhw4dnR0ZGgp07d+6uVCpL165di+/cuZMxM60HbGbHgDeBT0mg3USw3nsHnDKz1PNB10D9sWPHFs+dO0cul9tBe8d25PP55fPnzxevXr26Zz1gSSkgD3xO+xDZPGNJMwu8zjqyMTNyuVz57NmzlVwutw94CpvL5fadOXOmks1ml9YW9bwFwBtJORI9pLZl1ttL7z2ZTKZncHBwzzr+3NDQ0CvZbLbHe7+ua2AfCet9J3UyvaGTMAy1wVskKRUEwWYvck9SgMSlCyhvAEO5XK5Wq9WF9cYrlcpCuVyubVLqll4qrJl5M5sws/gFB84xOTmZHh0d9d77yrNj3vvK6OioTU5O9ji3bqgYuAN4EliiOjs0NCRgD/Dj549YSbRarXBiYqKnVqvNZDKZmvc+tbi4OHPx4sXlS5cu5er1emoD2CbwR+B6oVDYsnQlEnY+n5eZDQJjkoY2yD5hGMapVIogCII4juPV1VWiKAo2kUAByEuaHBsb2xI2qWYNmJF0gU22LIqioFarBcvLy9RqtWALUA/8RdIsCZuZxAd8Pp9H0mtm9mdgJOm8TeyqpDOPpqfv1BsNnIfYO4LA450Q0NtocHx2lvNrExI3EYVCgcHBwWVJZeBtYOe3AJ2J4/iDyXv3rvtWq9/DLhm7zLTbOeszqU+QCqOI3tjHUe47emNvf2f9qKQW8Hczewv4paSuTinNzDdWVm7Pz80NEMc/NwgdOBwKXLvHcG1Z+EYqHV1/NV1ycGsm1kTizD7J7tDQUAu4K+l7wDAdSMmAVrN5b7FY/LzVbEpSv0k71prxXsnad7MdEn2gfsRexFAM1Y5gnwAfOnSoDMwDb5vZQNLe1sfxUmVp6Z+1avXR2k6Z2mtYu9S+SwYyqd39GNaF2VzHsE+ADxw4MCnJAceTyMHMolq1+kW5VLph7RYsQSQJM5n0yKRrnRy3/2NdXV2xmf0J+BtblB4zY3V19eulUum6994nABXgDBrAlw4uu3T64bb/GzSbTXp6ekpRFH1oZt8F3toIwsfx3HKp9EXUbNbXWYpArHWQhvCY1YG7SLeB+6WenuquVit56XrepqamOHjwIMBjM6tJOrXWTD/NpiTM+9Xl5eUrlXK5AE8/cdrbixwIYRFoBXho4j9hGH7qvb/1k6mp2bu7dzdfrdX4enp6ez85nrV8Pk+j0Rjo6ur6rXPunKTwKahZ3KjX/73w+PFnURQ11tpIrY03gZoZJWFTkpuIYd5EtFIsxjsGBiAI+OaZb7NvDQswMjKi7u7uN8MwPC/ph0/k0Go27xXn5y+v1OsLtA+gFlCS9Jj28X0/CMOHGC3vI+JWbBYG9Pb1cfPGjRfivBRYgBMnTiDpZ2EY/kFSNo7jSnlx8fJSqXTLOVcCZjB7YDDbm07PrayuNiQRdHWxf2SEf3z00ZYxXhoswNGjR9PpdPo3QRD8olFf+aw4//hCFMf3BMVAWrrf3V3LNhqkurv5amKiY//brgbrWRAEjVar9Xsn99dms1WKvC/6Bw8awf79mBk/Wljgk2Jx2/7/C8D87PcyjeWGAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowOSswMDowMJ1Oe7oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABNVJREFUWMO9l8trXHUUxz/nd+/NPJK5k5kmzbRG2iRWijZmESit0qUbaVb+A0JXLhRclK5EVETcuNCFLQhiF4K4asFVtbT1UZ8JsSbBzjQ1qU3zntQkzCRz7z0u7kRazKSTzI0HDhd+j+/5/n7n/M45V4hGBGgD0kAcsAEPKANLwAKgURhpdP9TwHHgBNAH5IAWYAWYBoaBa8APwGgUpHciOeDVKgmtQ68DrwAd/ydJAQ4DnwCrdRLd0NXqvsM07tW6iB4CvgAq2yS6oRXgc+CJ3SacAT5sgOiDhD+o4u2KWMCLwHKDRDd0uYpn7QbZNuByREQ39FIVty6x61xngGeAo1us0f7+/umBgQErk8m0FovFpYsXL/qDg4M5asfmcaAXuEKEKc0G3qVGrIqIPzAwMFcoFKZUdUVVPVVdyefzUydPnpwDAmrH7jvbuLS6pAm4UMtoT0/P4vDw8Liq+vqw+ENDQ+Pd3d2LNcgGVdymekiYOskKYRHY1J0HDx5M9Pb27tkEz/T19WW7uroSW+B2UGcK2871x2tNOI5ji8imBkUk5jjOVi8+QZ1S780C3K81MT8/v1IsFuc3m1tcXJyfm5tb3QJ3KWqyAZAH/M0mR0dH4+fOnQt8319+cNz3/eWzZ8/q2NhYrdvzgZtV/MjEAk4BJWrkzHQ6vXbmzJlCoVCYnJ2dLRUKhcnTp08XXNddo3aeLVVxIy0MAnQDt7YwrLZte67retlsVl3X9Wzb9ti6KNwCutiFHiEBvE3ouiiqlw+8xTYe2HZP9CTwKXAsgsNfB156PJe7acdimAD8wGBZAYERBEiWy5yYnuaj6obtxsrfhFnhOSDVANF7xpj3Ojs7h+KO4waQFiWtKq3GaIuKtAjEbM8j6Qe+t/8xOdLmyk5iJQm8AbwGODvYHyTj8Wt729sv2JZVRtXWMCtJ6GhVRMLqpngoRQMjYjS/k1dYAQrA00AP2wwlx3Fut2Wz38SamgRwVaRZRJKhavhVbRahBcRFaEPo9mFlpynjPjBHGA51N9DGmKVMOv11qrl5qjqk8tCjk/AroiAqoioioqiD6kwj+e1PQvedoL5w8FqSye/3ZDI3JHRzHSKCqqjIlIr82AhZBf4gzL9HeEQ4xGOxkfZs9lvLstbrYQkYhbLAqIhckXj8bqOVo0yY2I8C+2otsixrZk8mcykRjxc3ObOAiGr1sEKA6iowgsh3AoPFZHI+5nkaRZmbJfzFfh6IbXJFa67rXk6nUuMPNGahexEDgqAeSAm4q8Ivtm1fCYJg5IWJielCa+t6++oqY5OT0ZQ5y7IyQRC8qaov83Db6Sfj8Z/3trVdtW27HHJHVBURWQdWVSkKOiFi8j7MqeCVFhb85kwGLItb4+P/gkXyO2GMWTLGfOx5Xr+qPrsx7tj2ZGs6/att22VVtQjTXlFEZoF7InLHduy7KJUg8JCKr9gWbQcO8PuNG/+xEwnZSqWijuP8Zox53/f9LmCfEVl2U6mfkonETJXgPVT/UphOxGIzpbW1chgQQufxY3x1/vwj7UTa7aRSqXipVHrd9/1TyXjiasfe9s+MMbdRXbBElu40Na3uK5eJNTUxms9vGz9SsolEAlXNVtYr+9NuupjraF+oTEyUNZfDAIeWl/lyYWHH+P8AZ0RW2q2R2psAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjExOjE5KzAwOjAwUeR7JAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]}]},logger$t=LoggerByDefault.getLogger("DrawingDOM"),DrawingDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPdrawing"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowDrawingPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowDrawingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowDrawingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-drawing fr-btn fr-btn--tertiary",e.setAttribute("aria-label",this.options.labels.control),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowDrawingClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowDrawingClick(ke)}),e},_createDrawingPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPdrawingPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createDrawingPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createDrawingToolsDivSections:function(){var r=document.createElement("div");return r.className="gpf-panel__content fr-modal__content",r},_createDrawingPanelHeaderElement:function(){var r=document.createElement("div");r.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var e=document.createElement("div");e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=this.options.controlLabel||"Annoter la carte",r.appendChild(e);var t=document.createElement("button");t.id=this._addUID("GPdrawingPanelClose"),t.className="GPpanelClose GPdrawingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",t.title="Fermer le panneau";var ke=this;t.addEventListener?t.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowDrawingPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowDrawingPicto")).click()});var Oe=document.createElement("span");return Oe.className="GPelementHidden gpf-visible",Oe.innerText="Fermer",t.appendChild(Oe),r.appendChild(t),r},_createDrawingToolsSections:function(){var r=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&r.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&r.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&r.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),r},_createDrawingToolSection:function(r,e){var t=document.createElement("div");t.className="drawing-tool-section fr-m-1w";var ke=document.createElement("p");ke.className="drawing-tool-section-title fr-m-1w",ke.innerHTML=r,t.appendChild(ke);var Oe=document.createElement("div");Oe.className="drawing-tools-flex-display fr-m-1w";var Ge=this;function Be(Ze){Ge._handleDOMToolClick(Ze,this.id,Ge),Ge._handleToolClick(Ze,this.id,Ge)}for(var je in this.dtOptions)if(this.dtOptions[je].panel===e){var Ve=document.createElement("button");Ve.className="drawing-tool fr-m-1w fr-btn fr-btn--tertiary gpf-btn--tertiary",Ve.id=this._addUID("drawing-tool-"+this.dtOptions[je].id),Ve.title=this.dtOptions[je].label,Ve.addEventListener("click",Be),Oe.appendChild(Ve)}return t.appendChild(Oe),t},_createSavingSection:function(r,e){var t=document.createElement("div");t.className="drawing-tool-section drawing-tools-flex-display fr-m-1w";var ke=document.createElement("button");ke.title=e,ke.className="tool-form-submit drawing-button fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",ke.id=this._addUID("drawing-export"),ke.setAttribute("type","button"),ke.textContent=r;var Oe=this;return ke.onclick=function(){Oe.onExportFeatureClick()},t.appendChild(ke),t},_createMarkersChooser:function(r){var e=document.createElement("div");e.className=r.className;for(var t=0;t<this.options.markersList.length;t++){var ke=document.createElement("input");ke.type="radio",ke.name="marker",ke.id=this._addUID("marker-"+t),ke.value=this.options.markersList[t].src,ke.className="marker-input-radio",r.defaultValue===ke.value&&(ke.checked=!0),e.appendChild(ke);var Oe=document.createElement("label");Oe.className="marker-label",Oe.setAttribute("for",ke.id);var Ge=document.createElement("img");Ge.src=ke.value,Oe.appendChild(Ge),e.appendChild(Oe)}return e},_createStylingElement:function(r){var e=document.createElement("div");e.className=r.className;var t=document.createTextNode(r.label);e.appendChild(t);var ke=document.createElement("input");try{ke.type=r.type}catch{ke.type="text"}if(r.type==="range"){e.dataset.frJsRange="true",e.title=r.label;var Oe=r.defaultValue;Oe=Math.round((Oe-r.min)/(r.max-r.min)*100),e.style.setProperty("--progress-right",Oe+"%"),ke.addEventListener("change",Ge=>{Ge.target.parentNode.style.setProperty("--progress-right",`${(Ge.target.value-r.min)/(r.max-r.min)*100}%`)})}return ke.id=r.id,ke.value=r.defaultValue,r.title&&(ke.title=r.title),r.checked!==void 0&&(ke.checked=r.checked),r.min!==void 0&&(ke.min=r.min),r.max!==void 0&&(ke.max=r.max),r.step!==void 0&&(ke.step=r.step),e.appendChild(ke),e},_createStylingDiv:function(r){var e=document.createElement("dialog");e.className="gp-styling-div gpf-panel fr-modal gpf-visible GPelementVisible";var t=document.createElement("div");if(t.className="gpf-modal__body fr-modal__body",e.appendChild(t),checkDsfr()){var ke=document.createElement("div");ke.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var Oe=document.createElement("div");Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="Modifier le style",ke.appendChild(Oe);var Ge=document.createElement("button");Ge.id=this._addUID("GPdrawingStylePanelClose"),Ge.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ge.title="Fermer le panneau",Ge.addEventListener?Ge.addEventListener("click",function(){r.applyFunc.call(this,"cancel")},!1):Ge.attachEvent&&Ge.attachEvent("onclick",function(){r.applyFunc.call(this,"cancel")});var Be=document.createElement("span");Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Ge.appendChild(Be),ke.appendChild(Ge),t.appendChild(ke)}var je=document.createElement("div");je.className="gpf-modal__content fr-modal__content",t.appendChild(je);var Ve=document.createElement("div"),Ze=null,Qe=r.geomType.toLowerCase();switch(Qe){case"point&text":case"point":Ze=this._createMarkersChooser({className:"gp-styling-option",defaultValue:r.initValues.markerSrc}),Ve.appendChild(Ze),Ze=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.markerSize,title:"petit, moyen ou grand",id:this._addUID("markerSize"),min:5,max:15,step:5,defaultValue:r.initValues.markerSize*10}),Ve.appendChild(Ze),r.initValues.markerCustom,Qe==="point&text"&&(Ze=this._createStylingElement({type:"checkbox",className:"gp-styling-option",label:this.options.labels.labelDisplay,id:this._addUID("labelDisplay"),checked:r.initValues.labelDisplay,defaultValue:r.initValues.labelDisplay}),Ve.appendChild(Ze));break;case"text":Ze=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:r.initValues.fillColor}),Ve.appendChild(Ze),Ze=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:r.initValues.strokeColor}),Ve.appendChild(Ze),Ze=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:r.initValues.strokeWidth}),Ve.appendChild(Ze);break;case"line":Ze=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:r.initValues.strokeColor}),Ve.appendChild(Ze),Ze=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:r.initValues.strokeWidth}),Ve.appendChild(Ze);break;case"polygon":Ze=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:r.initValues.strokeColor}),Ve.appendChild(Ze),Ze=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:r.initValues.strokeWidth}),Ve.appendChild(Ze),Ze=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:r.initValues.fillColor}),Ve.appendChild(Ze),Ze=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.fillOpacity,title:"0 (transparent) à 100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:r.initValues.fillOpacity*10}),Ve.appendChild(Ze);break;default:logger$t.log("Unhandled geometry type for styling.")}je.appendChild(Ve);var en=document.createElement("input");en.type="button",en.className="gp-styling-button fr-btn fr-btn--tertiary",en.value=this.options.labels.applyToObject,en.onclick=function(){r.applyFunc.call(this,"apply")},je.appendChild(en);var tn=document.createElement("input");tn.type="button",tn.value=this.options.labels.setAsDefault,tn.className="gp-styling-button fr-btn fr-btn--tertiary",tn.onclick=function(){r.applyFunc.call(this,"default")},je.appendChild(tn);var an=document.createElement("input");return an.type="button",an.className="gp-styling-button closer",an.onclick=function(){r.applyFunc.call(this,"cancel")},je.appendChild(an),e},_createLabelDiv:function(r){var e=document.createElement("dialog");e.className="gp-label-div gpf-panel fr-modal gpf-visible GPelementVisible";var t=document.createElement("div");if(t.className="gpf-modal__body fr-modal__body",e.appendChild(t),checkDsfr()){var ke=document.createElement("div");ke.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var Oe=document.createElement("div");Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="Texte de l'annotation",ke.appendChild(Oe);var Ge=document.createElement("button");Ge.id=this._addUID("GPdrawingStylePanelClose"),Ge.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ge.title="Fermer le panneau",Ge.addEventListener?Ge.addEventListener("click",function(){r.applyFunc.call(this,"cancel")},!1):Ge.attachEvent&&Ge.attachEvent("onclick",function(){r.applyFunc.call(this,"cancel")});var Be=document.createElement("span");Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Ge.appendChild(Be),ke.appendChild(Ge),t.appendChild(ke)}var je=document.createElement("div");je.className="gpf-modal__content fr-modal__content",t.appendChild(je);var Ve=null;if(r.geomType==="Text"?(Ve=document.createElement("input"),Ve.type="text",Ve.className="gp-input-label-style fr-input"):(Ve=document.createElement("textArea"),Ve.rows=2,Ve.cols=40,Ve.className="gp-textarea-att-label-style fr-input"),r.text&&(Ve.value=r.text),Ve.autocomplete="off",Ve.placeholder=r.placeholder,Ve.id=r.inputId,je.appendChild(Ve),Ve.onkeyup=function(tn){r.geomType==="Text"&&tn.keyCode===13&&r.applyFunc.call(this,r.key,Ve.value,!0),tn.keyCode===27&&r.applyFunc.call(this,r.key,Ve.value,!1)},r.measure&&r.geomType!=="Text"){var Ze=document.createElement("input");Ze.type="text",Ze.readonly=!0,Ze.className="gp-input-measure-style",Ze.value=r.measure,je.appendChild(Ze)}if(r.geomType!=="Text"){var Qe=document.createElement("input");Qe.type="button",Qe.className="gp-styling-button fr-btn fr-btn--tertiary",Qe.value=this.options.labels.saveDescription,Qe.onclick=function(){r.applyFunc.call(this,r.key,Ve.value,!0)},je.appendChild(Qe);var en=document.createElement("input");en.type="button",en.className="gp-styling-button closer",en.onclick=function(){r.applyFunc.call(this,r.key,Ve.value,!1)},je.appendChild(en)}return e},_handleDOMToolClick:function(r,e,t){for(var ke in t.dtOptions){var Oe=t._addUID("drawing-tool-"+t.dtOptions[ke].id),Ge=document.getElementById(Oe);if(Oe!==e){Ge.className="drawing-tool fr-m-1w fr-btn fr-btn--tertiary gpf-btn--tertiary",t.dtOptions[ke].active=!1;continue}t.dtOptions[ke].active?Ge.className="drawing-tool fr-m-1w fr-btn fr-btn--tertiary gpf-btn--tertiary":Ge.className="drawing-tool drawing-tool-active fr-m-1w fr-btn fr-btn--tertiary gpf-btn--tertiary",t.dtOptions[ke].active=!t.dtOptions[ke].active}}},logger$s=LoggerByDefault.getLogger("Drawing"),Ta,Drawing=(Ta=class extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Ta))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Drawing",this._initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){super.setMap(e),this.getMap()&&this.eventKey&&unByKey(this.eventKey),e!=null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),this.draggable&&Draggable.dragElement(this._drawingPanel,this._drawingPanelHeader,e.getTargetElement()),this.collapsed||this._showDrawingButton.setAttribute("aria-pressed",!0),this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",t=>{t.element===this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))}))}exportFeatures(){var e=null;if(ControlExtended.prototype.getMap.call(this)==null)return logger$s.log("Impossible to export : control isn't attached to any map."),e;if(!this.layer)return logger$s.log("Impossible to export : no layer is hosting features."),e;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return logger$s.log("Impossible to export : no features found."),e;this.featuresCollectionSelected&&this.featuresCollectionSelected.clear();var t=null;switch(this.getExportFormat()){case"KML":t=new KML({writeStyles:!0});break;case"GPX":t=new GPX({});break;case"GEOJSON":t=new GeoJSON({});break}if(!t)return logger$s.log("Impossible to export : format unknown !?"),e;var ke=this.layer.getSource().getProjection();return ke=ke||this.getMap().getView().getProjection(),e=t.writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:ke}),e}setCollapsed(e){if(e===void 0){logger$s.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingButton.click())}setExportName(e){this._exportName=e}getExportName(){return this._exportName}setExportFormat(e){switch(this._exportFormat=e?e.toUpperCase():"KML",e.toUpperCase()){case"KML":this._exportExt=".kml",this._exportMimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this._exportExt=".gpx",this._exportMimeType="application/gpx+xml";break;case"GEOJSON":this._exportExt=".geojson",this._exportMimeType="application/geo+json";break;default:this._exportFormat="KML";break}}getExportFormat(){return this._exportFormat}setLayer(e){if(!e){this.layer=null;return}if(!(e instanceof VectorLayer)){logger$s.log("no valid layer given for hosting drawn features.");return}var t=this.getMap().getLayers();if(t){var ke=!1;t.forEach(Oe=>{Oe===e&&(logger$s.trace("layer already in map. Not adding."),ke=!0)}),ke||this.getMap().addLayer(e),e.getSource().getFeatures().forEach(Oe=>{var Ge=Oe.getStyle();if(typeof Ge=="function"){var Be=Oe.getStyleFunction();if(Be){var je=Be.call(this,Oe,0);je&&je.length!==0&&Oe.setStyle(Array.isArray(je)?je[0]:je)}}}),this.layer=e,this.getMap().getControls().forEach(Oe=>{if(Oe instanceof LayerSwitcher){var Ge=this.layer.gpLayerId;Oe._layers[Ge].title===Ge&&Oe.addLayer(this.layer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}}getLayer(){return this.layer}getContainer(){return this._container}_getsMarkersOptionsFromSrc(e){for(var t=null,ke=0;ke<this.options.markersList.length;ke++)if(e&&this.options.markersList[ke].src===e)return t=this.options.markersList[ke],t;return t}_getIconStyleOptions(e){var t={};return Object.keys(e).forEach(ke=>{switch(ke){case"src":case"size":case"scale":case"color":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":t[ke]=e[ke];break}}),t}_initialize(e){this._uid=e.id||SelectorID.generate(),this._exportName="Croquis",this._exportFormat="KML",this._exportMimeType="application/vnd.google-earth.kml+xml",this._exportExt=".kml",e=e||{},this.options=e,this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(Ta.DefaultTools).forEach(t=>{this.options.tools.hasOwnProperty(t)||(this.options.tools[t]=Ta.DefaultTools[t])}),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(Ta.DefaultCursorStyle).forEach(t=>{this.options.cursorStyle.hasOwnProperty(t)||(this.options.cursorStyle[t]=Ta.DefaultCursorStyle[t])}),this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this.options.markersList=e.markersList||MarkersOther.drawing_api,this.options.labels||(this.options.labels={}),Object.keys(Ta.DefaultLabels).forEach(t=>{this.options.labels.hasOwnProperty(t)||(this.options.labels[t]=Ta.DefaultLabels[t])}),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(Ta.DefaultStyles).forEach(t=>{if(!e.defaultStyles.hasOwnProperty(t)){this.options.defaultStyles[t]=Ta.DefaultStyles[t];return}if(t==="polyFillOpacity"&&(e.defaultStyles[t]<0||e.defaultStyles[t]>1)){logger$s.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),this.options.defaultStyles[t]=Ta.DefaultStyles[t];return}if(t==="strokeWidth"||t==="polyStrokeWidth"){var ke=parseInt(e.defaultStyles[t],10);if(isNaN(ke)||ke<0){logger$s.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.strokeWidth. Must be a positive interger value."),this.options.defaultStyles[t]=Ta.DefaultStyles[t];return}this.options.defaultStyles[t]=ke}if(t==="markerSize"){var Oe=parseFloat(e.defaultStyles[t]);if(isNaN(Oe)||Oe<0){logger$s.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.markerSize. Must be a positive value."),this.options.defaultStyles[t]=Ta.DefaultStyles[t];return}this.options.defaultStyles[t]=Oe}}),this.interactionCurrent=null,this.interactionSelectEdit=null,this.featuresCollectionSelected=null,this.stylingOvl=null,this.popupOvl=null,this.layer=null,this.options.layer&&this.options.layer instanceof VectorLayer&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})}_createEmptyLayer(){var e=new Collection,t=new VectorLayer({source:new VectorSource({features:e}),title:"Mon Croquis"});t.gpResultLayerId="drawing",this.setLayer(t)}_detectSupport(){var e=!0,t=window.navigator.userAgent.toLowerCase();return(t.indexOf("iphone")!==-1||t.indexOf("ipod")!==-1||t.indexOf("ipad")!==-1||t.indexOf("android")!==-1||t.indexOf("mobile")!==-1||t.indexOf("blackberry")!==-1||t.indexOf("tablet")!==-1||t.indexOf("phone")!==-1||t.indexOf("touch")!==-1)&&(e=!1),(t.indexOf("msie")!==-1||t.indexOf("trident")!==-1)&&(e=!0),e}_initContainer(){var e=this._createMainContainerElement(),t=this._showDrawingButton=this._createShowDrawingPictoElement();e.appendChild(t);var ke=this._drawingPanel=this._createDrawingPanelElement(),Oe=this._createDrawingPanelDivElement();ke.appendChild(Oe);var Ge=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();Oe.appendChild(Ge);var Be=this._createDrawingToolsDivSections();Oe.appendChild(Be);for(var je=this._createDrawingToolsSections(),Ve=0;Ve<je.length;Ve++)Be.appendChild(je[Ve]);return e.appendChild(ke),e}_drawEndFeature(e,t){var ke=null;switch(t){case"Point":ke=new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":ke=new Style$1({stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":ke=new Style$1({fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})});break}if(e.setStyle(ke),this._updateMeasure(e,t),this.options.popup.display){var Oe=this,Ge=function(Qe,en,tn){if(Oe.getMap().removeOverlay(Oe.popupOvl),Oe.popupOvl=null,tn&&en&&en.trim().length>0){var an={};an[Qe]=en.replace(/\n/g,"<br>"),e.setProperties(an)}},Be=null,je=!0,Ve=this.options.popup.function;Ve&&typeof Ve=="function"&&(Be=Ve.call(Oe,{feature:e,geomType:t,closeFunc:function(){Ge(null,!1)},saveFunc:function(Qe){Ge(Qe,!0)}}),Be&&(je=!1,Be.tabIndex=-1,Be.onblur=function(){Oe.getMap().removeOverlay(Oe.popupOvl),Oe.popupOvl=null})),je&&(Be=this._createLabelDiv({applyFunc:Ge,inputId:this._addUID("att-input"),placeholder:"Saisir une description...",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:t,key:"description"})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new Overlay({element:Be,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var Ze=e.getGeometry().getExtent();this.popupOvl.setPosition([(Ze[0]+Ze[2])/2,(Ze[1]+Ze[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}}_createRemoveInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{!t||!t.selected||t.selected.length===0||(this.layer.getSource().removeFeature(t.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))}),e}_createStylingInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),!(!t||!t.selected||t.selected.length===0)){var ke=null,Oe=null,Ge=null,Be=null,je={},Ve=t.selected[0].getGeometry(),Ze=t.selected[0].getStyle();if(Ve instanceof Point$1||Ve instanceof MultiPoint){if(Ze&&Ze.getImage()&&typeof Ze.getImage().getSrc=="function"&&Ze.getImage().getSrc()!==this.options.defaultStyles.textIcon1x1.src&&(Be="Point",typeof Ze.getImage().getSrc=="function"?(je.markerSrc=Ze.getImage().getSrc(),je.markerSize=Ze.getImage().getScale()||1,je.markerAnchor=Ze.getImage().getAnchor(),Ze.getImage().getColor()?(ke=Ze.getImage().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":je.markerColor=ke,Oe=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},je.markerColor=Oe.hex,je.markerOpacity=Oe.opacity):je.markerColor=this.options.markersList[0].color||"#ffffff"):(je.markerSrc=this.options.markersList[0].src,je.markerSize=this.options.markersList[0].scale||1,je.markerColor=this.options.markersList[0].color||"#ffffff",je.markerAnchor=this.options.markersList[0].anchor),je.markerCustom=!this._getsMarkersOptionsFromSrc(je.markerSrc)),Ze&&Ze.getText()){var Qe=t.selected[0].getProperties().name;if(Qe&&(Be=Be==="Point"?"Point&Text":"Text",Ze.getText().getStroke()&&Ze.getText().getStroke().getColor()&&(ke=Ze.getText().getStroke().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":je.strokeColor=ke,Oe=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},je.strokeColor=Oe.hex,je.strokeOpacity=Oe.opacity),Ze.getText().getStroke()&&Ze.getText().getStroke().getWidth()&&(je.strokeWidth=Ze.getText().getStroke().getWidth()),Ze.getText().getFill()&&Ze.getText().getFill().getColor()&&(ke=Ze.getText().getFill().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":je.fillColor=ke,Oe=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},je.fillColor=Oe.hex,je.fillOpacity=Oe.opacity),je.strokeColor=je.hasOwnProperty("strokeColor")?je.strokeColor:this.options.defaultStyles.textStrokeColor,je.strokeWidth=je.hasOwnProperty("strokeWidth")?je.strokeWidth:this.options.defaultStyles.textStrokeWidth,je.fillColor=je.hasOwnProperty("fillColor")?je.fillColor:this.options.defaultStyles.textFillColor,Be==="Point&Text")){var en=Ze.getText().getText();en||Ze.getText().setText(Qe);var tn=t.selected[0].get("checked");je.labelDisplay=tn===void 0?this.options.defaultStyles.labelDisplay:tn}}}else Ve instanceof LineString||Ve instanceof MultiLineString?(Be="Line",Ze&&Ze.getStroke()&&(Ze.getStroke().getWidth()&&(je.strokeWidth=Ze.getStroke().getWidth()),Ze.getStroke().getColor()&&(ke=Ze.getStroke().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":je.strokeColor=ke,Oe=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},je.strokeColor=Oe.hex,je.strokeOpacity=Oe.opacity)),je.strokeWidth=je.hasOwnProperty("strokeWidth")?je.strokeWidth:this.options.defaultStyles.strokeWidth,je.strokeColor=je.hasOwnProperty("strokeColor")?je.strokeColor:this.options.defaultStyles.strokeColor):(Ve instanceof Polygon||Ve instanceof MultiPolygon)&&(Be="Polygon",Ze&&Ze.getStroke()&&(Ze.getStroke().getWidth()&&(je.strokeWidth=Ze.getStroke().getWidth()),Ze.getStroke().getColor()&&(ke=Ze.getStroke().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":je.strokeColor=ke,Oe=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},je.strokeColor=Oe.hex,je.strokeOpacity=Oe.opacity)),Ze&&Ze.getFill()&&Ze.getFill().getColor()&&(ke=Ze.getFill().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":je.fillColor=ke,Oe=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},je.fillColor=Oe.hex,je.fillOpacity=Oe.opacity),je.strokeWidth=je.hasOwnProperty("strokeWidth")?je.strokeWidth:this.options.defaultStyles.polyStrokeWidth,je.strokeColor=je.hasOwnProperty("strokeColor")?je.strokeColor:this.options.defaultStyles.polyStrokeColor,je.fillColor=je.hasOwnProperty("fillColor")?je.fillColor:this.options.defaultStyles.polyFillColor,je.fillOpacity=je.hasOwnProperty("fillOpacity")?je.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!Be){logger$s.log("Unhandled geometry type for styling.");return}var an=this,cn=function(hn){if(hn==="cancel"){an.getMap().removeOverlay(Ge);return}var fn=hn!=="apply",pn=document.getElementById(an._addUID("fillColor")),mn=document.getElementById(an._addUID("fillOpacity")),yn=document.getElementById(an._addUID("strokeColor")),Cn=document.getElementById(an._addUID("strokeWidth")),wn=document.getElementById(an._addUID("markerSize"));switch(Be.toLowerCase()){case"text":fn?(an.options.defaultStyles.textStrokeColor=yn.value,an.options.defaultStyles.textStrokeWidth=Cn.value,an.options.defaultStyles.textFillColor=pn.value):t.selected[0].setStyle(new Style$1({text:new Text({font:"16px sans",textAlign:"left",text:Ze.getText().getText(),fill:new Fill({color:pn.value}),stroke:new Stroke({color:yn.value,width:parseInt(Cn.value,10)})})}));break;case"point&text":case"point":var bn=document.querySelector("input[type='checkbox']"),Sn=null,Mn=parseInt(wn.value,10)/10,Tn=document.querySelector("input[name='marker']:checked");if(Tn&&(Sn=an._getsMarkersOptionsFromSrc(Tn.value),Sn.scale=Mn),fn){if(an.options.defaultStyles.markerSize=Mn,an.options.markersList.length>1){var En=an.options.markersList.findIndex(function(Rn){return Rn===Sn});En>0&&(an.options.markersList.splice(En,1),an.options.markersList.splice(0,0,Sn))}Be.toLowerCase()==="point&text"&&(an.options.defaultStyles.textStrokeColor=je.strokeColor,an.options.defaultStyles.textStrokeWidth=je.strokeWidth,an.options.defaultStyles.textFillColor=je.fillColor,an.options.defaultStyles.labelDisplay=je.labelDisplay)}else{var An={};Be.toLowerCase()==="point&text"&&(t.selected[0].set("checked",bn.checked),An={text:new Text({font:"16px sans",textAlign:"left",text:bn.checked?t.selected[0].get("name"):"",fill:new Fill({color:je.fillColor}),stroke:new Stroke({color:je.strokeColor,width:parseInt(je.strokeWidth,10)})})}),Sn?t.selected[0].setStyle(new Style$1(Object.assign({image:new Icon(an._getIconStyleOptions(Sn))},An))):t.selected[0].setStyle(new Style$1(Object.assign({image:new Icon({src:je.markerSrc,anchor:je.markerAnchor,anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels",scale:Mn})},An)))}break;case"line":fn?(an.options.defaultStyles.strokeColor=yn.value,an.options.defaultStyles.strokeWidth=parseInt(Cn.value,10)):t.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(Cn.value,10),color:yn.value})}));break;case"polygon":var Ln=parseInt(mn.value,10)/10;fn?(an.options.defaultStyles.polyStrokeColor=yn.value,an.options.defaultStyles.polyFillColor=pn.value,an.options.defaultStyles.polyFillOpacity=Ln,an.options.defaultStyles.polyStrokeWidth=parseInt(Cn.value,10)):t.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(Cn.value,10),color:yn.value}),fill:new Fill({color:ColorUtils.hexToRgba(pn.value,Ln)})}));break}fn||an.getMap().removeOverlay(Ge)},dn=this._createStylingDiv({geomType:Be,initValues:je,applyFunc:cn});Ge=new Overlay({element:dn,positioning:"top-center"}),this.getMap().addOverlay(Ge),Ge.setPosition(t.mapBrowserEvent.coordinate),this.stylingOvl=Ge,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_createLabelInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),!(!t||!t.selected||t.selected.length===0)){var ke=null,Oe=null,Ge=null,Be=null,je=t.selected[0].getGeometry(),Ve=t.selected[0].getStyle();if(je instanceof Point$1||je instanceof MultiPoint){var Ze=t.selected[0].getProperties().name;Ve&&Ve.getText()&&Ze?Oe="Text":Ve&&Ve.getImage()&&(Oe="Point")}else if(je instanceof LineString||je instanceof MultiLineString)Oe="Line";else if(je instanceof Polygon||je instanceof MultiPolygon)Oe="Polygon";else{logger$s.log("Geometry type for styling not supported .");return}if(!Oe){logger$s.log("Unhandled geometry type for styling.");return}if(Oe==="Text")Ge=Ve.getText().getText();else{var Qe=t.selected[0].getProperties();Qe&&(Qe.hasOwnProperty("description")||Qe.hasOwnProperty("desc"))&&(Ge=Qe.description||Qe.desc),Qe&&Qe.hasOwnProperty("measure")&&(Be=Qe.measure)}var en=this,tn=function(cn,dn,hn){if(en.getMap().removeOverlay(ke),!!hn){var fn=t.selected[0];if(Oe==="Text"){var pn=fn.getStyle();pn.getText().setText(dn),fn.setProperties({name:dn}),fn.setStyle(pn);return}var mn={};mn[cn]=dn.replace(/\n/g,"<br>"),fn.setProperties(mn)}},an=this._createLabelDiv({applyFunc:tn,inputId:this._addUID("label-input"),placeholder:Oe==="Text"?"Saisir un label...":"Saisir une description...",text:Ge,key:"description",measure:this.options.tools.measure?Be:null,geomType:Oe});ke=new Overlay({element:an,positioning:"top-center"}),this.getMap().addOverlay(ke),ke.setPosition(t.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=ke,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_updateMeasure(e,t){logger$s.log(e);var ke=null,Oe=this.getMap().getView().getProjection();function Ge(Cn,wn){wn=wn||2;var bn=Math.pow(10,wn);return Math.round(Cn*bn)/bn}var Be=t||e.getProperties().type;switch(Be){case"Point":var je=e.getGeometry().getCoordinates(),Ve=transform$1(je,Oe,"EPSG:4326");ke="lon : ",ke+=Ge(Ve[0],4)+"°",ke+=" / ",ke+="lat : ",ke+=Ge(Ve[1],4)+"°";break;case"LineString":for(var Ze=0,Qe=e.getGeometry().getCoordinates(),en=0,tn=Qe.length-1;en<tn;++en){var an=transform$1(Qe[en],Oe,"EPSG:4326"),cn=transform$1(Qe[en+1],Oe,"EPSG:4326");Ze+=getDistance(an,cn)}ke=Ze>1e3?Ge(Ze/1e3,3)+" km":Ge(Ze,3)+" m";break;case"Polygon":var dn=0,hn=e.getGeometry().clone(),fn=hn.getLinearRing(0).getCoordinates();dn=Math.abs(getArea(new Polygon([fn])));var pn=hn.getLinearRings();if(pn.length>1)for(var mn=1;mn<pn.length;mn++){var yn=pn[mn].getCoordinates();dn-=Math.abs(getArea(new Polygon([yn])))}ke=dn>1e6?Ge(dn/1e6,3)+" km^2":Ge(dn,2)+" m^2";break}e.setProperties({measure:ke,type:Be})}_handleToolClick(e,t,ke){var Oe=ke.getMap();if(!Oe){logger$s.trace("Drawing control not attached to any map.");return}switch(Interactions.unset(Oe,{current:"Drawing"}),ke.interactionCurrent&&(Oe.removeInteraction(ke.interactionCurrent),ke.interactionCurrent=null),ke.interactionSelectEdit&&(Oe.removeInteraction(ke.interactionSelectEdit),ke.interactionSelectEdit=null),ke.popupOvl&&(ke.getMap().removeOverlay(ke.popupOvl),ke.popupOvl=null),this.layer||this._createEmptyLayer(),t){case this._addUID("drawing-tool-point"):ke.dtOptions.points.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),ke.interactionCurrent.on("drawend",function(Ge){ke._drawEndFeature(Ge.feature,"Point")},ke));break;case this._addUID("drawing-tool-line"):ke.dtOptions.lines.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString"}),ke.interactionCurrent.on("drawend",function(Ge){ke._drawEndFeature(Ge.feature,"LineString")},ke));break;case this._addUID("drawing-tool-polygon"):ke.dtOptions.polygons.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),ke.interactionCurrent.on("drawend",function(Ge){ke._drawEndFeature(Ge.feature,"Polygon")},ke));break;case this._addUID("drawing-tool-holes"):ke.dtOptions.holes.active&&(ke.interactionSelectEdit=new Select({stopClick:!0,condition:pointerMove,layers:[this.layer]}),ke.interactionSelectEdit.setProperties({name:"Drawing",source:ke}),Oe.addInteraction(ke.interactionSelectEdit),ke.interactionCurrent=new Draw({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),ke.interactionCurrent.on("drawstart",function(Ge){},ke),ke.interactionCurrent.on("drawend",function(Ge){var Be=ke.interactionSelectEdit.getFeatures();if(Be.getLength()){for(var je=Be.item(0),Ve=Ge.feature.getGeometry().getCoordinates()[0],Ze=!0,Qe=0;Qe<Ve.length;Qe++)if(!je.getGeometry().intersectsCoordinate(Ve[Qe])){Ze=!1;break}if(!Ze)return;je.getGeometry().appendLinearRing(new LinearRing(Ve)),Ge.feature=je,ke._drawEndFeature(Ge.feature,"Polygon")}},ke));break;case this._addUID("drawing-tool-text"):ke.dtOptions.text.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),ke.interactionCurrent.on("drawend",Ge=>{var Be=null,je=function(Ze,Qe,en){if(ke.getMap().removeOverlay(Be),!en){ke.layer.getSource().removeFeature(Ge.feature);return}var tn={};tn[Ze]=Qe,Ge.feature.setProperties(tn),Ge.feature.setStyle(new Style$1({image:new Icon(ke._getIconStyleOptions(ke.options.defaultStyles.textIcon1x1)),text:new Text({textAlign:"left",font:"16px sans",text:Qe,fill:new Fill({color:ke.options.defaultStyles.textFillColor}),stroke:new Stroke({color:ke.options.defaultStyles.textStrokeColor,width:3})})}))},Ve=this._createLabelDiv({applyFunc:je,inputId:ke._addUID("label-input"),geomType:"Text",key:"name",placeholder:"Saisir un label..."});Be=new Overlay({element:Ve,positioning:"top-center"}),ke.getMap().addOverlay(Be),Be.setPosition(Ge.feature.getGeometry().getCoordinates()),document.getElementById(this._addUID("label-input")).focus()}));break;case this._addUID("drawing-tool-edit"):ke.dtOptions.edit.active&&(this.featuresCollectionSelected=new Collection,ke.interactionSelectEdit=new Select({condition:singleClick,layers:[this.layer],features:this.featuresCollectionSelected}),ke.interactionSelectEdit.on("select",Ge=>{}),ke.interactionSelectEdit.setProperties({name:"Drawing",source:ke}),Oe.addInteraction(ke.interactionSelectEdit),ke.interactionCurrent=new Modify({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})})}),ke.interactionCurrent.on("modifyend",Ge=>{var Be=Ge.features.item(0);ke._updateMeasure(Be)}));break;case this._addUID("drawing-tool-display"):ke.dtOptions.display.active&&(ke.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):ke.dtOptions.tooltip.active&&(ke.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):ke.dtOptions.remove.active&&(ke.interactionCurrent=ke._createRemoveInteraction());break;default:logger$s.trace("unhandled tool type")}ke.interactionCurrent&&(ke.interactionCurrent.setProperties({name:"Drawing",source:this}),Oe.addInteraction(ke.interactionCurrent)),logger$s.log("interactions",Oe.getInteractions())}onShowDrawingClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._showDrawingButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position);for(var Oe in this.dtOptions)if(this.dtOptions.hasOwnProperty(Oe)&&this.dtOptions[Oe].active){var Ge=this._addUID("drawing-tool-"+this.dtOptions[Oe].id);document.getElementById(Ge).className="drawing-tool fr-m-1w fr-btn fr-btn--tertiary gpf-btn--tertiary",this.dtOptions[Oe].active=!1}}onExportFeatureClick(){var e=this.exportFeatures();if(e){var t=document.createElement("a"),ke="utf-8";if(t.setAttribute("href","data:"+this._exportMimeType+";charset="+ke+","+encodeURIComponent(e)),t.setAttribute("download",this.getExportName()+this._exportExt),document.createEvent){var Oe=document.createEvent("MouseEvents");Oe.initEvent("click",!0,!0),t.dispatchEvent(Oe)}else t.click()}}},cu(Ta,"DefaultTools",{points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1}),cu(Ta,"DefaultLabels",{control:"Annoter la carte",creatingTools:"Outils de création",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"Créer des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"Outils d'édition",edit:"Editer les tracés",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer à l'objet",saveDescription:"Enregistrer",setAsDefault:"Définir par défaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacité du remplissage : ",markerSize:"Taille du pictogramme : ",markerColor:"Couleur du pictogramme : ",labelDisplay:"Afficher le label : "}),cu(Ta,"DefaultStyles",{textFillColor:"#000000",textStrokeColor:"#FFFFFF",textStrokeWidth:6,textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#ffffff",polyFillOpacity:.4,polyStrokeColor:"#ffcc33",polyStrokeWidth:4,strokeColor:"#ffcc33",strokeWidth:4,markerSize:1,markerColor:"#ffcc33",labelDisplay:!0}),cu(Ta,"DefaultCursorStyle",{radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"}),Ta);Object.assign(Drawing.prototype,DrawingDOM);Object.assign(Drawing.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Drawing=Drawing);var logger$r=LoggerByDefault.getLogger("LocationSelectorDOM"),LocationSelectorDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.className=this._addUID("GPlocationPoint"),r.className+=" GPwidget gpf-widget ",r},_createLocationPointElement:function(r,e){var t=document.createElement("div");return t.id=this._addUID("GPlocationPoint_"+r),t.className=e?"GPflexInput GPlocationStageFlexInput gpf-flex":"GPflexInput GPelementHidden gpf-flex gpf-hidden",t.style.cssText="",t},_createLocationPointLabelElement:function(r,e){var t=this,ke=document.createElement("button");return ke.id=this._addUID("GPlocationOriginLabel_"+r),ke.innerHTML=e,ke.className="GPlocationOriginLabel gpf-btn gpf-btn-icon-label fr-btn fr-btn--secondary gpf-btn--secondary",ke.setAttribute("type","button"),ke.addEventListener("click",function(Oe){for(var Ge=SelectorID.index(this.id),Be=document.getElementsByClassName(t._addUID("GPlocationPoint")),je=0;je<Be.length;je++){var Ve=Be[je].childNodes[0].id,Ze=SelectorID.index(Ve);document.getElementById(t._addUID("GPlocationPoint_"+Ze)).style.cssText=""}document.getElementById(t._addUID("GPlocationOriginCoords_"+Ge)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+Ge)).value="",document.getElementById(t._addUID("GPlocationPoint_"+Ge)).style.cssText="",document.getElementById(t._addUID("GPlocationOriginPointer_"+Ge)).checked=!1,document.getElementById(t._addUID("GPlocationOrigin_"+Ge)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(t._addUID("GPlocationOriginCoords_"+Ge)).className="GPelementHidden gpf-hidden",document.getElementById(t._addUID("GPlocationStageRemove_"+Ge))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+Ge)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),t.onLocationClearPointClick(Oe)}),ke},_createLocationAutoCompleteteInputElement:function(r){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOrigin_"+r),t.className="GPelementShow gpf-show gpf-input fr-input",t.type="text",t.placeholder="Saisir une adresse, un lieu...",t.autocomplete="off",t.addEventListener("keyup",function(ke){var Oe=ke.which||ke.keyCode;if(!(Oe===13||Oe===10||Oe===38||Oe===40)){var Ge=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOrigin_"+Ge)).value.length>2?(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ge)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ge)).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ge)).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Ge)).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(ke)}}),t.addEventListener("keydown",function(ke){var Oe=ke.which||ke.keyCode,Ge=document.getElementById(e._addUID("GPlocationAutoCompleteResult_"+r));if(Ge){var Be=Ge.getElementsByClassName("GPautoCompleteProposal current"),je=Ge.getElementsByClassName("GPautoCompleteProposal"),Ve=je.length;if(Ve){var Ze=null;if(Be.length)Ze=Be[0];else{Ze=je[0],Ze.className="GPautoCompleteProposal current",Ze.style.color="#000000",Ze.style["background-color"]="#CEDBEF";return}var Qe=parseInt(SelectorID.index(Ze.id),10),en=Qe===Ve-1?je[0]:je[Qe+1],tn=Qe===0?je[Ve-1]:je[Qe-1];switch(Ze.style["background-color"]="",Ze.style.color="",tn.style["background-color"]="",tn.style.color="",en.style["background-color"]="",en.style.color="",Oe){case 38:logger$r.log("arrow up"),Ze.className="GPautoCompleteProposal",tn.className="GPautoCompleteProposal current",tn.style.color="#000000",tn.style["background-color"]="#CEDBEF";break;case 40:logger$r.log("arrow down"),Ze.className="GPautoCompleteProposal",en.className="GPautoCompleteProposal current",en.style.color="#000000",en.style["background-color"]="#CEDBEF";break;case 13:logger$r.log("enter"),Ze.click(ke);break}Ze.focus()}}}),t},_createLocationCoordinateInputElement:function(r){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOriginCoords_"+r),t.className="GPelementHidden gpf-input gpf-hidden fr-input",t.type="text",t.disabled=!1,t.addEventListener("click",function(){var ke=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOriginLabel_"+ke)).click()}),t},_createLocationPointerShowInputElement:function(r){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+r),e.className="GPelementHidden gpf-hidden",e.type="checkbox",e},_createLocationPointerInputElement:function(r){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationOriginPointerImg_"+r),t.htmlFor=this._addUID("GPlocationOriginPointer_"+r),t.className="GPlocationOriginPointerImg gpf-btn gpf-btn-icon-pointer fr-btn",t.title="Pointer un lieu sur la carte",t.setAttribute("type","button"),t.addEventListener("click",function(ke){ke.preventDefault(),ke.stopPropagation();var Oe=SelectorID.index(this.id),Ge=document.getElementsByClassName(e._addUID("GPlocationPoint")),Be,je,Ve;for(Be=0;Be<Ge.length;Be++)je=Ge[Be].childNodes[0].id,Ve=SelectorID.index(je),Oe!==Ve&&(document.getElementById(e._addUID("GPlocationOriginPointer_"+Ve)).checked=!1,document.getElementById(e._addUID("GPlocationOriginCoords_"+Ve)).value==="Pointer un lieu sur la carte"&&(document.getElementById(e._addUID("GPlocationOriginCoords_"+Ve)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+Ve)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Ve)).className="GPelementHidden gpf-hidden"));if(document.getElementById(e._addUID("GPlocationOriginPointer_"+Oe)).checked){for(document.getElementById(e._addUID("GPlocationOriginCoords_"+Oe)).value="",Be=0;Be<Ge.length;Be++)je=Ge[Be].childNodes[0].id,Ve=SelectorID.index(je),document.getElementById(e._addUID("GPlocationPoint_"+Ve)).style.cssText="";document.getElementById(e._addUID("GPlocationStageRemove_"+Oe))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+Oe)).className="GPlocationStageRemove  gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),document.getElementById(e._addUID("GPlocationOriginPointer_"+Oe)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+Oe)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Oe)).className="GPelementHidden gpf-hidden"}else{for(document.getElementById(e._addUID("GPlocationOriginCoords_"+Oe)).value="Pointer un lieu sur la carte",Be=0;Be<Ge.length;Be++)je=Ge[Be].childNodes[0].id,Ve=SelectorID.index(je),Oe===Ve?document.getElementById(e._addUID("GPlocationPoint_"+Ve)).style.cssText="":document.getElementById(e._addUID("GPlocationPoint_"+Ve)).style.display="none";document.getElementById(e._addUID("GPlocationStageRemove_"+Oe))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+Oe)).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationOriginPointer_"+Oe)).checked=!0,document.getElementById(e._addUID("GPlocationOrigin_"+Oe)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationOriginCoords_"+Oe)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Oe)).disabled=!0}e.onActivateMapPointClick(ke)}),t},_createLocationRemovePointElement:function(r){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationStageRemove_"+r),t.className="GPlocationOpen GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary",t.title="Supprimer l'étape",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe);var Ge=document.getElementsByClassName(e._addUID("GPlocationPoint")),Be=Ge.length-1,je=Ge[0].childNodes[0].id,Ve=Ge[Be].childNodes[0].id,Ze=SelectorID.index(je),Qe=SelectorID.index(Ve);if(r!==Ze&&r!==Qe){var en=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationPoint_"+en)).className="GPflexInput GPelementHidden gpf-flex gpf-hidden",document.getElementById(e._addUID("GPlocationOrigin_"+en)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+en)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+en)).value="",document.getElementById(e._addUID("GPlocationOriginCoords_"+en)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationStageAdd")).style.display="",document.getElementById(e._addUID("GPlocationPoint_"+en)).parentElement.previousSibling.classList.add("GPelementHidden","gpf-hidden"),e.onLocationRemovePointClick(ke)}}),t},_createLocationAddPointElement:function(){var r=this,e=document.createElement("button");return e.id=this._addUID("GPlocationStageAdd"),e.className="GPlocationOpen GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w",e.title="Ajouter une étape",checkDsfr()&&(e.innerText="Ajouter une étape"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener("click",function(t){for(var ke=1,Oe=0,Ge=document.getElementsByClassName(r._addUID("GPlocationPoint")),Be=1;Be<Ge.length-1;Be++){var je=Ge[Be].childNodes[0].id,Ve=SelectorID.index(je);document.getElementById(r._addUID("GPlocationPoint_"+Ve))&&(document.getElementById(r._addUID("GPlocationPoint_"+Ve)).className==="GPflexInput GPelementHidden gpf-flex gpf-hidden"?ke===1&&(ke=Ve):Oe++)}ke<Ge.length&&(document.getElementById(r._addUID("GPlocationPoint_"+ke)).className="GPflexInput GPlocationStageFlexInput gpf-flex",document.getElementById(r._addUID("GPlocationPoint_"+ke)).parentElement.previousSibling.classList.remove("GPelementHidden","gpf-hidden")),Oe===4&&(document.getElementById(r._addUID("GPlocationStageAdd")).style.display="none");var Ze=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Ze),r.onLocationAddPointClick(t)}),e},_createLocationAutoCompleteElement:function(r){var e=document.createElement("div");return e.id=this._addUID("GPlocationAutoCompleteList_"+r),e.className="GPlocationAutoCompleteList GPelementHidden gpf-panel gpf-hidden fr-modal",e},_createLocationAutoCompleteResultElement:function(r){var e=this,t=document.createElement("div");return t.id=this._addUID("GPlocationAutoCompleteResult_"+r),t.className="GPadvancedAutoCompleteResult gpf-panel__list",t.addEventListener?t.addEventListener("click",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+r)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+r)).classList.replace("gpf-hidden","gpf-visible")},!1):t.attachEvent&&t.attachEvent("onclick",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+r)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+r)).classList.replace("gpf-hidden","gpf-visible")}),t},_createLocationAutoCompletedLocationElement:function(r,e,t){var ke=document.getElementById(this._addUID("GPlocationAutoCompleteResult_"+r)),Oe=document.createElement("div");Oe.id=this._addUID("AutoCompletedLocation_"+t),Oe.className="GPautoCompleteProposal gpf-panel__items",Oe.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(e),ke.appendChild(Oe)},GPdisplayCoordinate:function(r){for(var e=document.getElementsByClassName(this._addUID("GPlocationPoint")),t=0;t<e.length;t++){var ke=e[t].childNodes[0].id,Oe=SelectorID.index(ke);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+Oe)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+Oe)).value=r,document.getElementById(this._addUID("GPlocationOriginCoords_"+Oe)).disabled=!1;for(var Ge=0;Ge<e.length;Ge++){ke=e[Ge].childNodes[0].id;var Be=SelectorID.index(ke);document.getElementById(this._addUID("GPlocationPoint_"+Be)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+Be))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+Be)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary")}document.getElementById(this._addUID("GPlocationOriginPointer_"+Oe)).checked=!1,document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm");return}}}},logger$q=LoggerByDefault.getLogger("locationselector"),LocationSelector=class qf extends Control{constructor(e){if(e=e||{},super({element:e.element||document.createElement("div"),render:e.render,target:e.target}),!(this instanceof qf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="LocationSelector",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}initialize(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},Helper.mergeParams(this.options,e),this._uid=this.options.tag.groupId||SelectorID.generate(),this._map=null,this._inputsContainer=null,this._buttonLabel=null,this._inputAutoComplete=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedList=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this.listenerKey=null}_initMarker(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&e.length===2?this._markerOffset=e:logger$q.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset}getCoordinate(){return this._coordinate}setCoordinate(e,t){var ke=this.getMap(),Oe=ke.getView().getProjection().getCode();t||(t=Oe),this._setCoordinate(e,t),e=transform$1(e,t,Oe),this._setMarker([e[0],e[1]],null,!1)}clear(){this.clearResults(),this._buttonLabel.click()}clearResults(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),unByKey(this.listenerKey)}_initContainer(){var e=this.options.tag.id,t=this._createMainContainerElement(),ke=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);t.appendChild(ke);var Oe=this._buttonLabel=this._createLocationPointLabelElement(e,this.options.tag.label);ke.appendChild(Oe);var Ge=this._inputAutoComplete=this._createLocationAutoCompleteteInputElement(e);Ge.addEventListener?Ge.addEventListener("click",()=>this.onAutoCompleteInputClick()):Ge.attachEvent&&Ge.attachEvent("onclick",()=>this.onAutoCompleteInputClick()),ke.appendChild(Ge);var Be=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);ke.appendChild(Be);var je=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);ke.appendChild(je);var Ve=this._inputShowPointer=this._createLocationPointerInputElement(e);if(ke.appendChild(Ve),this.options.tag.addOption){var Ze=this._addPointElement=this._createLocationAddPointElement();ke.appendChild(Ze)}if(this.options.tag.removeOption){var Qe=this._removePointElement=this._createLocationRemovePointElement(e);ke.appendChild(Qe)}var en=this._suggestedContainer=this._createLocationAutoCompleteElement(e),tn=this._suggestedList=this._createLocationAutoCompleteResultElement(e);return en.appendChild(tn),t.appendChild(en),t}onAutoCompleteInputClick(){this._inputAutoComplete&&this._inputAutoComplete.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){var ke=this.options.autocompleteOptions||{},Oe=ke.onSuccess||null,Ge=ke.onFailure||null;if(this._currentLocation=t,t.length<3){this._clearSuggestedLocation();return}var Be=this;this._requestAutoComplete({text:t,maximumResponses:5,onSuccess:function(Ve){if(Ve){var Ze=Ve.suggestedLocations;Be._fillAutoCompletedLocationListContainer(Ze),Oe&&Oe.call(this,Ve)}},onFailure:function(Ve){Be._clearSuggestedLocation(),logger$q.log(Ve.message),Ge&&Ge.call(this,Ve)}});var je=this.getMap();je.on("click",()=>this._hideSuggestedLocation()),je.on("pointerdrag",()=>this._hideSuggestedLocation())}}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var ke=[this._suggestedLocations[t].position.x,this._suggestedLocations[t].position.y];this._coordinate=ke;var Oe={type:this._suggestedLocations[t].type,fields:this._suggestedLocations[t]},Ge=GeocodeUtils.getSuggestedLocationFreeform(this._suggestedLocations[t]);this._setLabel(Ge);var Be=this.getMap().getView(),je=Be.getProjection().getCode();je!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",je)),this._setPosition(ke),this._setMarker(ke,Oe,this.options.displayInfo)}}onActivateMapPointClick(){var e=this.getMap();this._inputShowPointerContainer.checked?(this.clearResults(),this.listenerKey=e.on("click",t=>this.onMouseMapClick(t)),this._setCursor("crosshair")):(unByKey(this.listenerKey),this._setCursor())}onLocationClearPointClick(){this._setCursor(),this.clearResults()}onLocationRemovePointClick(){this._setCursor(),this.clearResults()}onLocationAddPointClick(e){logger$q.log("onRouteAddPointClick",e)}onMouseMapClick(e){var t=e.coordinate;if(!(!e.map||!e.map.getView())){var ke=e.map.getView().getProjection();this._setCoordinate(t,ke),this._setMarker([t[0],t[1]],null,!1),this.onActivateMapPointClick(e)}}_setLabel(e){this._inputAutoComplete.value=e}_setCursor(e){var t=this.getMap(),ke=t.getTargetElement();e?ke.style.cursor=e:ke.style.cursor=null}_setCoordinate(e,t){this._coordinate=transform$1(e,t,"EPSG:4326");var ke=this._coordinate[0].toFixed(4),Oe=this._coordinate[1].toFixed(4),Ge=Oe+" / "+ke;this.GPdisplayCoordinate(Ge)}_setPosition(e){var t=this.getMap().getView();t.setCenter(e)}_setMarker(e,t,ke){var Oe=this.getMap();if(this._marker!=null&&(Oe.removeOverlay(this._marker),this._marker=null),e){var Ge=document.createElement("img");Ge.src=this._markerUrl,this._marker=new Overlay({position:e,offset:this._markerOffset,element:Ge,stopEvent:!1}),Oe.addOverlay(this._marker),ke&&logger$q.log("marker information : ",t)}}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._suggestedList)for(;this._suggestedList.firstChild;)this._suggestedList.removeChild(this._suggestedList.firstChild)}_hideSuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementVisible","GPelementHidden"),this._suggestedContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementHidden","GPelementVisible"),this._suggestedContainer.classList.replace("gpf-hidden","gpf-visible"))}_requestAutoComplete(e){if(logger$q.log("_requestAutoComplete()",e),!(!e||Object.keys(e).length===0)&&e.text){logger$q.log(e);var t={};Helper.assign(t,this.options.autocompleteOptions),Helper.assign(t,e);var ke=this._resources.AutoCompletion||null;ke&&Array.isArray(ke)&&(t.filterOptions||(t.filterOptions={}),t.filterOptions.type=ke),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$q.log(t),Gp$1.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._suggestedList;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var ke=0;ke<e.length;ke++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[ke],ke);this._suggestedLocations=e}}};Object.assign(LocationSelector.prototype,LocationSelectorDOM);window.ol&&window.ol.control&&(window.ol.control.LocationSelector=LocationSelector);var ExportDOM={_addUID:function(r){var e=this.uid?r+"-"+this.uid:r;return e}},logger$p=LoggerByDefault.getLogger("export");class ButtonExport extends Control{constructor(e){if(e=e||{control:null,target:null,format:"geojson",name:"export",title:"Exporter",menu:!1,onExport:null},logger$p.trace("[constructor] Export",e),super({element:document.createElement("div"),render:e.render,target:e.target}),!(this instanceof ButtonExport))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="Export",this.EXPORT_ROUTE={},this.EXPORT_ISOCHRON={},this.EXPORT_PROFILE={},this.uid=e.id||SelectorID.generate(),this.extension=null,this.mimeType=null,this.container=null,this.button=null,this.menu=null,this.icon="☰ ",this.menuClassHidden="GPelementHidden gpf-hidden",this.initOptions(e),this.initContainer()}render(){if(!this.options.target&&this.options.control){var e=this.options.control.getContainer();this.options.target=e.lastChild}this.container&&this.options.target.appendChild(this.container)}initOptions(e){this.options=e,this.options.control,this.options.target;var t=this.options.format;t?this.setFormat(t):this.setFormat(""),this.options.name||this.setName("export"),this.options.title||this.setTitle("Exporter"),this.options.menu===void 0&&this.setMenu(!1)}initContainer(){var e=this.options.title;this.options.menu&&(e=this.icon+this.options.title);var t=document.createElement("div");t.id=this._addUID("GPexportContainer"),t.className="GPexportMenuContainer";var ke=this.stringToHTML(`
            <input type="button"
                id="${this._addUID("GPexportButton")}" 
                class="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn"
                value="${e}">
        `);this.button=ke.firstChild,this.button&&this.button.addEventListener("click",je=>this.onClickButtonExport(je)),t.appendChild(ke.firstChild);var Oe=this.stringToHTML(`
            <div class="GPexportMenuContent ${this.menuClassHidden}">
                <label class="container">GeoJSON
                    <input type="radio" 
                        id="GPmenuFormatGeojson-${this.uid}"
                        name="format" 
                        value="geojson">
                    <span class="checkmark"></span>
                </label>
                <label class="container">KML
                    <input type="radio" 
                        id="GPmenuFormatKml-${this.uid}"
                        name="format" 
                        value="kml">
                    <span class="checkmark"></span>
                </label>
                <label class="container">GPX
                    <input type="radio" 
                        id="GPmenuFormatGpx-${this.uid}"
                        name="format" 
                        value="gpx">
                    <span class="checkmark"></span>
                </label>
            </div>
        `);if(this.menu=Oe.firstChild,this.menu){if(this.options.menu){var Ge=this.menu.className;this.menu.className=Ge.replace(this.menuClassHidden,"")}var Be=this.menu.querySelectorAll('input[type=radio][name="format"]');Be.forEach(je=>{je.id.toUpperCase().includes(this.options.format.toUpperCase())&&(je.checked=!0),je.addEventListener("change",Ve=>{this.setFormat(Ve.target.value)})})}t.appendChild(Oe.firstChild),this.container=t}stringToHTML(e){var t=function(){if(!window.DOMParser)return!1;var Be=new DOMParser;try{Be.parseFromString("x","text/html")}catch{return!1}return!0};if(t()){var ke=new DOMParser,Oe=ke.parseFromString(e,"text/html");return Oe.body}var Ge=document.createElement("div");return Ge.innerHTML=e,Ge}isPluggableControl(){return!!(this.options.control&&typeof this.options.control.getContainer=="function"&&typeof this.options.control.getLayer=="function")}exportFeatures(e,t,ke){var Oe=null;if(!e)return logger$p.warn("Impossible to export : no layer is hosting features."),Oe;if(!e.getSource()||!e.getSource().getFeatures()||!e.getSource().getFeatures().length)return logger$p.warn("Impossible to export : no features found."),Oe;e.getSource().getFeatures().forEach(Qe=>{var en=Qe.getStyle();!en&&this.options.control&&typeof this.options.control.getStyle=="function"&&Qe.setStyle(this.options.control.getStyle())});var Ge={defaultStyle:ke};t&&(Ge.extensions={"geoportail:compute":t});var Be=null;switch(this.options.format.toUpperCase()){case"KML":Ge.writeStyles=!0,Ge.showPointNames=!0,Be=new KML(Ge);break;case"GPX":Be=new GPX(Ge);break;case"GEOJSON":Be=new GeoJSON(Ge);break}if(!Be)return logger$p.warn("Impossible to export : format unknown !?"),Oe;var je=e.getSource().getProjection(),Ve=this.getMap();Ve&&(je=je||Ve.getView().getProjection());var Ze=e.getSource().getFeatures();return Oe=Be.writeFeatures(Ze,{dataProjection:"EPSG:4326",featureProjection:je||"EPSG:3857"}),Oe}onClickButtonExport(e){this.isPluggableControl()||logger$p.warn("Componant not pluggable with the control !");var t=this.options.control&&this.options.control.getLayer!==void 0?this.options.control.getData():this.options.layer,ke=this.options.control&&this.options.control.getData!==void 0?this.options.control.getData():{},Oe=this.options.control&&this.options.control.getStyle!==void 0?this.options.control.getStyle():{},Ge=this.exportFeatures(t,ke,Oe);if(!(!Ge||Ge==="null")){if(this.dispatchEvent({type:"export:compute",content:Ge}),this.options.onExport&&typeof this.options.onExport=="function"){this.options.onExport(Ge);return}var Be=document.createElement("a"),je="utf-8";if(Be.setAttribute("href","data:"+this.mimeType+";charset="+je+","+encodeURIComponent(Ge)),Be.setAttribute("download",this.options.name+this.extension),document.createEvent){var Ve=document.createEvent("MouseEvents");Ve.initEvent("click",!0,!0),Be.dispatchEvent(Ve)}else Be.click()}}getContainer(){return this.container}setControl(e){this.options.control=e}setTarget(e){this.options.target=e}setFormat(e){switch(this.options.format=e.toUpperCase(),this.options.format){case"KML":this.extension=".kml",this.mimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this.extension=".gpx",this.mimeType="application/gpx+xml";break;case"GEOJSON":this.extension=".geojson",this.mimeType="application/geo+json";break;default:this.options.format="GEOJSON",this.extension=".geojson",this.mimeType="application/geo+json";break}}setName(e){this.options.name=e}setTitle(e){this.options.title=e,this.button&&(this.button.value=this.options.menu?this.icon+e:e)}setMenu(e){if(this.options.menu=e,this.button&&(this.button.value=this.options.menu?this.icon+this.options.title:this.options.title),this.menu&&this.options.menu){var t=this.menu.className;this.menu.className=t.replace(this.menuClassHidden,"");var ke=this.menu.querySelectorAll('input[type=radio][name="format"]');ke.forEach(Oe=>{Oe.id.toUpperCase().includes(this.options.format.toUpperCase())&&(Oe.checked=!0)})}}setLayer(e){this.options.layer=e}}Object.assign(ButtonExport.prototype,ExportDOM);Object.assign(ButtonExport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Export=ButtonExport);var logger$o=LoggerByDefault.getLogger("RouteDOM"),RouteDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GProute"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowRoutePictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowRoutePicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-route fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir le calcul d'itinéraire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowRoutePanelClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowRoutePanelClick(ke)}),e},_createRoutePanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GProutePanel"),r.className="GPpanel gpf-panel fr-modal",r},_createRoutePanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createRoutePanelHeaderElement:function(){var r=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Calcul d'itinéraire",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GProutePanelClose"),ke.className="GPpanelClose GProutePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Masquer le panneau",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(r._addUID("GPshowRoutePicto")).click()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowRoutePicto")).click()});var Oe=document.createElement("span");return Oe.className="GPelementHidden gpf-visible",Oe.innerText="Fermer",ke.appendChild(Oe),e.appendChild(ke),e},_createRoutePanelFooterElement:function(){var r=document.createElement("div");return r.className="GPpanelFooter gpf-panel__footer fr-modal__footer",r},_createRoutePanelFormPointLabel:function(r,e=!0){var t=document.createElement("p");t.innerHTML=r;var ke=e?"":" GPelementHidden gpf-hidden";return t.className="GProutePointLabelP gpf-label fr-label"+ke,t},_createRoutePanelFormElement:function(){var r=this,e=document.createElement("form");return e.id=this._addUID("GProuteForm"),e.className="gpf-panel__content fr-modal__content",e.setAttribute("onkeypress","return event.keyCode != 13;"),e.addEventListener("submit",function(t){logger$o.log(t),t.preventDefault();var ke=document.getElementsByClassName(r._addUID("GPlocationPoint")),Oe=ke[0].childNodes[0].id,Ge=ke[ke.length-1].childNodes[0].id,Be=SelectorID.index(Oe),je=SelectorID.index(Ge);if(document.getElementById(r._addUID("GPlocationOrigin_"+Be)).value===""&&document.getElementById(r._addUID("GPlocationOriginCoords_"+Be)).value===""||document.getElementById(r._addUID("GPlocationOrigin_"+je)).value===""&&document.getElementById(r._addUID("GPlocationOriginCoords_"+je)).value==="")return!1;r._addRouteResultsStagesValuesElement(ke);var Ve=null;document.getElementById(r._addUID("GProuteComputationChoice"))&&(document.getElementById(r._addUID("GProuteComputationFastest"))&&document.getElementById(r._addUID("GProuteComputationFastest")).checked&&(Ve=document.getElementById(r._addUID("GProuteComputationFastest")).value),document.getElementById(r._addUID("GProuteComputationShortest"))&&document.getElementById(r._addUID("GProuteComputationShortest")).checked&&(Ve=document.getElementById(r._addUID("GProuteComputationShortest")).value));var Ze=null;document.getElementById(r._addUID("GProuteTransportCar"))&&document.getElementById(r._addUID("GProuteTransportCar")).checked&&(Ze=document.getElementById(r._addUID("GProuteTransportCar")).value),document.getElementById(r._addUID("GProuteTransportPedestrian"))&&document.getElementById(r._addUID("GProuteTransportPedestrian")).checked&&(Ze=document.getElementById(r._addUID("GProuteTransportPedestrian")).value);for(var Qe=[],en=document.getElementsByClassName("GProuteExclusionsOption"),tn=0;tn<en.length;tn++){var an=en[tn].htmlFor,cn=document.getElementById(an);cn.checked||Qe.push(cn.value)}return r.onRouteComputationSubmit({computation:Ve,transport:Ze,exclusions:Qe}),!1}),e},_createRoutePanelResultsElement:function(){var r=document.createElement("div");return r.id=this._addUID("GProuteResultsPanel"),r.className="GPelementHidden gpf-hidden",r.appendChild(this._createRouteResultsStagesElement()),r.appendChild(this._createRouteResultsElement()),r.appendChild(this._createRouteShowResultsDetailsElement()),r.appendChild(this._createRouteResultsDetailsElement()),r},_createRouteWaitingElement:function(){var r=document.createElement("div");r.id=this._addUID("GProuteCalcWaitingContainer"),r.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",r.appendChild(e),r},_createRouteResultsStagesElement:function(){var r=document.createElement("div");return r.id=this._addUID("GProuteResultsStages"),r},_addRouteResultsStagesValuesElement:function(r){document.getElementById(this._addUID("GProuteResultsStages")).innerHTML="";for(var e=0;e<r.length;e++){var t=r[e].childNodes[0].id,ke=SelectorID.index(t);if(document.getElementById(this._addUID("GPlocationPoint_"+ke)).className==="GPflexInput GPlocationStageFlexInput gpf-flex"){var Oe=document.createElement("div");Oe.className="GProuteResultsStages";var Ge=document.createElement("div");Ge.className="GProuteResultStageLabel",Ge.innerHTML=document.getElementById(this._addUID("GPlocationOriginLabel_"+ke)).innerHTML+" :",Oe.appendChild(Ge);var Be=document.createElement("div");Be.className="GProuteResultStageValue";var je=document.getElementById(this._addUID("GPlocationOriginCoords_"+ke)),Ve=je.value,Ze=je.className==="GPelementVisible gpf-visible";Ve!==null&&Ve!==""&&Ze?Be.innerHTML=Ve:Be.innerHTML=document.getElementById(this._addUID("GPlocationOrigin_"+ke)).value,Oe.appendChild(Be),Be.innerHTML!==""&&document.getElementById(this._addUID("GProuteResultsStages")).appendChild(Oe)}}},_createRouteResultsElement:function(){var r=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var t=document.createElement("div");t.id=this._addUID("GProuteResultsValues"),e.appendChild(t);var ke=document.createElement("div");ke.id=this._addUID("GProuteResultsMode");var Oe=document.createElement("select");Oe.id=this._addUID("GProuteResultsComputationSelect"),Oe.className="GPselect gpf-select fr-select",Oe.addEventListener("change",function(Ze){r.onRouteModeComputationChangeAndRun(Ze)});for(var Ge=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],Be=0;Be<Ge.length;Be++){var je=document.createElement("option");je.value=Ge[Be].code,je.text=Ge[Be].label,Oe.appendChild(je)}ke.appendChild(Oe),e.appendChild(ke);var Ve=document.createElement("div");return Ve.id=this._addUID("GProuteResultsNew"),Ve.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",Ve.title="Modifier le calcul",Ve.addEventListener("click",function(Ze){document.getElementById(r._addUID("GProuteResultsPanel")).className="GPelementHidden gpf-hidden",document.getElementById(r._addUID("GProuteForm")).className="gpf-panel__content fr-modal__content",r.onShowRouteResultsNewClick(Ze)}),e.appendChild(Ve),e},_addRouteResultsValuesElement:function(r,e,t){var ke=document.getElementById(this._addUID("GProuteResultsValues"));if(ke.childElementCount)for(;ke.firstChild;)ke.removeChild(ke.firstChild);var Oe=document.createElement("div");Oe.className="GProuteResultsValue";var Ge=document.createElement("label");Ge.className="GProuteResultsValueLabel",Ge.innerHTML="Distance :",Oe.appendChild(Ge);var Be=0,je=parseInt(r/1e3,10);if(!je)Be=Math.round(r)+" m";else{var Ve=Math.round(r);Ve=Ve/1e3,Be=Ve+" km"}var Ze=document.createElement("div");Ze.id=this._addUID("GProuteResultsValueDist"),Ze.innerHTML=Be,Oe.appendChild(Ze),ke.appendChild(Oe);var Qe=document.createElement("div");Qe.className="GProuteResultsValue";var en=document.createElement("label");en.className="GProuteResultsValueLabel",en.innerHTML="Durée :",Qe.appendChild(en);var tn=document.createElement("div");return tn.id=this._addUID("GProuteResultsValueDist"),tn.innerHTML=t(e),Qe.appendChild(tn),ke.appendChild(Qe),ke},_createRouteShowResultsDetailsElement:function(){var r=document.createElement("div");if(r.className="GProuteResultsShowDetailsDiv gpf-flex fr-checkbox-group fr-m-1w",!checkDsfr()){var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",r.appendChild(e)}var t=document.createElement("input");t.id=this._addUID("GProuteResultsShowDetails"),t.type="checkbox",r.appendChild(t);var ke=document.createElement("label");if(ke.className="gpf-label fr-label",ke.htmlFor=this._addUID("GProuteResultsShowDetails"),ke.innerHTML="Afficher le détail",r.appendChild(ke),!checkDsfr()){var Oe=document.createElement("label");Oe.htmlFor=this._addUID("GProuteResultsShowDetails"),Oe.innerHTML="Masquer le détail",r.appendChild(Oe);var Ge=document.createElement("div");Ge.className="GPfakeBorder",r.appendChild(Ge)}return r},_createRouteResultsDetailsElement:function(){var r=document.createElement("div");return r.id=this._addUID("GProuteResultsDetails"),r},_addRouteResultsDetailsElement:function(r,e){var t=this,ke=document.getElementById(this._addUID("GProuteResultsDetails"));if(ke.childElementCount)for(;ke.firstChild;)ke.removeChild(ke.firstChild);for(var Oe=0,Ge=0,Be=0;Be<r.length;Be++){var je=Be+1,Ve=r[Be],Ze=document.createElement("div");Ze.className="GProuteResultsDetailsNumber",Ze.innerHTML=je+".",ke.appendChild(Ze),Ge+=parseFloat(Ve.duration),Oe+=parseFloat(Ve.distance);var Qe=0,en=parseInt(Oe/1e3,10);if(!en)Qe=Math.round(Oe)+" m";else{var tn=Math.round(Oe);tn=tn/1e3,Qe=tn+" km"}var an=document.createElement("div");an.className="GProuteResultsDetailsInstruction",an.id=this._addUID("GProuteResultsDetailsInstruction_"+je),an.title="distance : "+Qe+" / temps : "+e(Ge),an.innerHTML=Ve.instruction,an.addEventListener("mouseover",function(cn){t.onRouteResultsDetailsMouseOver(cn)}),an.addEventListener("mouseout",function(cn){t.onRouteResultsDetailsMouseOut(cn)}),an.addEventListener("click",function(cn){typeof t.onRouteResultsDetailsClick=="function"&&t.onRouteResultsDetailsClick(cn)}),ke.appendChild(an)}return ke},_createRoutePanelFormPointElement:function(r,e,t){var ke=this,Oe=document.createElement("div");Oe.id="GProutePoint"+r,Oe.className=t?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var Ge=document.createElement("label");Ge.id="GProuteOriginLabel"+r,Ge.htmlFor="GProuteOrigin"+r,Ge.innerHTML=e,Ge.addEventListener("click",function(){var Qe=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+Qe).value="";for(var en=1;en<8;en++)document.getElementById("GProutePoint"+en).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+Qe).checked=!1,document.getElementById("GProuteOrigin"+Qe).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Qe).className="GPelementHidden gpf-hidden"}),Oe.appendChild(Ge);var Be=document.createElement("input");Be.id="GProuteOrigin"+r,Be.className="GPelementVisible gpf-visible",Be.type="text",Be.placeholder="Saisir une adresse, un lieu...",Be.addEventListener("keyup",function(Qe){var en=Qe.which||Qe.keyCode;if(!(en===13||en===10)){var tn=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+tn).value.length>2?document.getElementById("GProuteAutoCompleteList"+tn).style.display="block":document.getElementById("GProuteAutoCompleteList"+tn).style.display="none",ke.onAutoCompleteSearchText(Qe)}}),Be.addEventListener("blur",function(){var Qe=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+Qe).style.display="none"}),Oe.appendChild(Be);var je=document.createElement("input");je.id="GProuteOriginCoords"+r,je.className="GPelementHidden gpf-hidden",je.type="text",je.disabled=!0,Oe.appendChild(je);var Ve=document.createElement("input");Ve.id="GProuteOriginPointer"+r,Ve.type="checkbox",Oe.appendChild(Ve);var Ze=document.createElement("label");return Ze.id="GProuteOriginPointerImg"+r,Ze.htmlFor="GProuteOriginPointer"+r,Ze.className="GProuteOriginPointerImg",Ze.title="Pointer un lieu sur la carte",Ze.addEventListener("click",function(Qe){Qe.preventDefault(),Qe.stopPropagation();var en=this.id.charAt(this.id.length-1),tn;for(tn=1;tn<8;tn++)en!==tn&&(document.getElementById("GProuteOriginPointer"+tn).checked=!1,document.getElementById("GProuteOriginCoords"+tn).value==="Pointer un lieu sur la carte"&&(document.getElementById("GProuteOriginCoords"+tn).value="",document.getElementById("GProuteOrigin"+tn).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+tn).className="GPelementHidden gpf-hidden"));if(document.getElementById("GProuteOriginPointer"+en).checked){for(document.getElementById("GProuteOriginCoords"+en).value="",tn=1;tn<8;tn++)document.getElementById("GProutePoint"+tn).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+en).checked=!1,document.getElementById("GProuteOrigin"+en).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+en).className="GPelementHidden gpf-hidden"}else{for(document.getElementById("GProuteOriginCoords"+en).value="Pointer un lieu sur la carte",tn=1;tn<8;tn++)en===tn?document.getElementById("GProutePoint"+tn).style.display="flex":document.getElementById("GProutePoint"+tn).style.display="none";document.getElementById("GProuteForm").className="GProuteFormMini gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+en).checked=!0,document.getElementById("GProuteOrigin"+en).className="GPelementHidden gpf-hidden",document.getElementById("GProuteOriginCoords"+en).className="GPelementVisible gpf-visible"}ke.onRouteMapPointClick(Qe)}),Oe.appendChild(Ze),Oe},_createRoutePanelFormRemoveStageElement:function(r){var e=this,t=document.createElement("div");return t.id="GProuteStageRemove"+r,t.className="GProuteStageRemove",t.title="Supprimer l'étape",r!==1&&r!==7&&t.addEventListener("click",function(ke){var Oe=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+Oe).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+Oe).value="",document.getElementById("GProuteOrigin"+Oe).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Oe).value="",document.getElementById("GProuteOriginCoords"+Oe).className="GPelementHidden gpf-hidden",document.getElementById("GProuteStageAdd").style.display="",e.onRouteRemovePointClick(ke)}),t},_createRoutePanelFormAddStageElement:function(){var r=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une étape",e.addEventListener("click",function(t){for(var ke=1,Oe=0,Ge=2;Ge<7;Ge++)document.getElementById("GProutePoint"+Ge).className==="GPflexInput GProuteStageFlexInputHidden"?ke===1&&(ke=Ge):Oe++;ke<7&&(document.getElementById("GProutePoint"+ke).className="GPflexInput GProuteStageFlexInput"),Oe===4&&(document.getElementById("GProuteStageAdd").style.display="none"),r.onRouteAddPointClick(t)}),e},_createRoutePanelFormAutoCompleteListElement:function(r){var e=this,t=document.createElement("div");return t.id="GProuteAutoCompleteList"+r,t.className="GPadvancedAutoCompleteList",t.addEventListener?t.addEventListener("click",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById("GProuteAutoCompleteList"+r).style.display="none"},!1):t.attachEvent&&t.attachEvent("onclick",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById("GProuteAutoCompleteList"+r).style.display="none"}),t},_createRouteAutoCompletedLocationElement:function(r,e,t){var ke=document.getElementById("GProuteAutoCompleteList"+e),Oe=document.createElement("div");Oe.id="AutoCompletedLocation"+t,Oe.className="GPautoCompleteProposal",Oe.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(r),ke.appendChild(Oe)},_createRoutePanelFormModeChoiceTransportElement:function(r){var e=this,t=document.createElement("div");t.id=this._addUID("GProuteTransportChoice");var ke=document.createElement("label");ke.className="GProuteModeLabel gpf-label fr-label",ke.innerHTML="Choisir un mode de déplacement",t.appendChild(ke);var Oe=document.createElement("div");Oe.className="gpf-radio-btn-group";for(var Ge=0;Ge<r.length;Ge++){var Be=r[Ge],je=document.createElement("div");if(je.className="GProuteTransportChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w",Be==="Voiture"){var Ve=document.createElement("input");Ve.id=this._addUID("GProuteTransportCar"),Ve.type="radio",Ve.name="GProuteTransport",Ve.value="Voiture",Ge===0&&(Ve.checked=!0),Ve.addEventListener?Ve.addEventListener("change",function(tn){e.onRouteModeTransportChange(tn)}):Ve.attachEvent&&Ve.attachEvent("onchange",function(tn){e.onRouteModeTransportChange(tn)}),je.appendChild(Ve);var Ze=document.createElement("label");Ze.className="GProuteTransportImg gpf-label fr-label",Ze.htmlFor=this._addUID("GProuteTransportCar"),Ze.title="Voiture",Ze.innerHTML="Voiture",je.appendChild(Ze)}if(Be==="Pieton"){var Qe=document.createElement("input");Qe.id=this._addUID("GProuteTransportPedestrian"),Qe.type="radio",Qe.name="GProuteTransport",Qe.value="Pieton",Ge===0&&(Qe.checked=!0),Qe.addEventListener?Qe.addEventListener("change",function(tn){e.onRouteModeTransportChange(tn)}):Qe.attachEvent&&Qe.attachEvent("onchange",function(tn){e.onRouteModeTransportChange(tn)}),je.appendChild(Qe);var en=document.createElement("label");en.className="GProuteTransportImg gpf-label fr-label",en.htmlFor=this._addUID("GProuteTransportPedestrian"),en.title="Piéton",en.innerHTML="Piéton",je.appendChild(en)}Oe.appendChild(je)}return t.appendChild(Oe),t},_createRoutePanelFormModeChoiceComputeElement:function(){var r=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice"),e.className="fr-mt-2w";var t=document.createElement("label");t.className="GProuteComputationLabel gpf-label fr-label",t.innerHTML="Mode de calcul",e.appendChild(t);var ke=document.createElement("div");ke.className="gpf-radio-btn-group";var Oe=document.createElement("div");Oe.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Ge=document.createElement("input");Ge.id=this._addUID("GProuteComputationFastest"),Ge.type="radio",Ge.name="GProuteComputation",Ge.value="fastest",Ge.checked=!0,Ge.addEventListener?Ge.addEventListener("change",function(Qe){r.onRouteModeComputationChange(Qe)}):Ge.attachEvent&&Ge.attachEvent("onchange",function(Qe){r.onRouteModeComputationChange(Qe)}),Oe.appendChild(Ge);var Be=document.createElement("label");Be.className="gpf-label fr-label",Be.htmlFor=this._addUID("GProuteComputationFastest"),Be.title="Plus rapide",Be.innerHTML="Plus rapide",Oe.appendChild(Be),ke.appendChild(Oe);var je=document.createElement("div");je.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Ve=document.createElement("input");Ve.id=this._addUID("GProuteComputationShortest"),Ve.type="radio",Ve.name="GProuteComputation",Ve.value="shortest",Ve.addEventListener?Ve.addEventListener("change",function(Qe){r.onRouteModeComputationChange(Qe)}):Ve.attachEvent&&Ve.attachEvent("onchange",function(Qe){r.onRouteModeComputationChange(Qe)}),je.appendChild(Ve);var Ze=document.createElement("label");return Ze.className="gpf-label fr-label",Ze.htmlFor=this._addUID("GProuteComputationShortest"),Ze.title="Plus court",Ze.innerHTML="Plus court",je.appendChild(Ze),ke.appendChild(je),e.appendChild(ke),e},_createShowRouteExclusionsPictoElement:function(){var r=this,e=document.createElement("button");e.id=this._addUID("GPshowRouteExclusionsPicto");var t="";return checkDsfr()&&(t="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto ${t} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(ke){ke.preventDefault();var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowRouteExclusionsClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){ke.preventDefault();var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowRouteExclusionsClick(ke)}),e},_createRoutePanelFormExclusionsElement:function(){var r=document.createElement("div");r.id=this._addUID("GProuteExclusions"),r.className="fr-mt-2w";var e=document.createElement("label");return e.className="GProuteExclusionsLabel fr-label",e.innerHTML="Passages autorisés",r.appendChild(e),r},_createRoutePanelFormExclusionOptionsElement:function(r){var e=this,t=document.createElement("div");t.className="GProuteExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var ke in r)if(r.hasOwnProperty(ke)){var Oe=r[ke];switch(ke){case"toll":var Ge=document.createElement("input");Ge.id=this._addUID("GProuteExclusionsToll"),Ge.type="checkbox",Ge.value="Toll",Ge.name="Peage",Ge.checked=!Oe,Ge.addEventListener?Ge.addEventListener("change",function(en){e.onRouteExclusionsChange(en)}):Ge.attachEvent&&Ge.attachEvent("onchange",function(en){e.onRouteExclusionsChange(en)}),t.appendChild(Ge);var Be=document.createElement("label");Be.className="GProuteExclusionsOption",Be.htmlFor=this._addUID("GProuteExclusionsToll"),Be.innerHTML="Péages",t.appendChild(Be);break;case"tunnel":var je=document.createElement("input");je.id=this._addUID("GProuteExclusionsTunnel"),je.type="checkbox",je.value="Tunnel",je.name="Tunnel",je.checked=!Oe,je.addEventListener?je.addEventListener("change",function(en){e.onRouteExclusionsChange(en)}):je.attachEvent&&je.attachEvent("onchange",function(en){e.onRouteExclusionsChange(en)}),t.appendChild(je);var Ve=document.createElement("label");Ve.className="GProuteExclusionsOption",Ve.htmlFor=this._addUID("GProuteExclusionsTunnel"),Ve.innerHTML="Tunnels",t.appendChild(Ve);break;case"bridge":var Ze=document.createElement("input");Ze.id=this._addUID("GProuteExclusionsBridge"),Ze.type="checkbox",Ze.value="Bridge",Ze.name="Ponts",Ze.checked=!Oe,Ze.addEventListener?Ze.addEventListener("change",function(en){e.onRouteExclusionsChange(en)}):Ze.attachEvent&&Ze.attachEvent("onchange",function(en){e.onRouteExclusionsChange(en)}),t.appendChild(Ze);var Qe=document.createElement("label");Qe.className="GProuteExclusionsOption",Qe.htmlFor=this._addUID("GProuteExclusionsBridge"),Qe.innerHTML="Ponts",t.appendChild(Qe);break}}return t},_createRouteSubmitFormElement:function(){var r=document.createElement("input");return r.id=this._addUID("GProuteSubmit"),r.className="GPsubmit gpf-btn gpf-btn-icon-submit fr-btn",r.type="submit",r.value="Calculer l'itinéraire",r},_createRouteFormResetElement:function(){var r=this,e=document.createElement("button");return e.id=this._addUID("GProuteReset"),e.title="Réinitialiser les paramètres",e.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke),r.onRouteResetClick(t)}),e}},logger$n=LoggerByDefault.getLogger("route"),Route=class Wf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Wf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Route",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.element=this._container,this.options.export){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var ke=this;this.export.on("export:compute",Oe=>{ke.dispatchEvent({type:"export:compute",content:Oe.content})})}this.draggable&&Draggable.dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,e.getTargetElement()),this.collapsed||this._showRouteButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$n.log("[ERROR] Route:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():this._showRouteButton.click(),this.collapsed=e)}getLayer(){return this._geojsonSections}setLayer(e){if(!e){this._geojsonSections=null;return}if(!(e instanceof VectorLayer)){logger$n.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonSections=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){logger$n.log("no valid geojson given :"+t.message)}}getData(){var e=[];for(let ke=0;ke<this._currentPoints.length;ke++){const Oe=this._currentPoints[ke];e.push(Oe.getCoordinate())}var t={type:"route",points:e,transport:this._currentTransport,exclusions:this._currentExclusions,computation:this._currentComputation,results:{}};return Helper.assign(t.results,this._currentRouteInformations),t}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;for(var t=0;t<this._currentPoints.length;t++){var ke=this._currentPoints[t];if(ke.getCoordinate()){ke.clearResults();var Oe=t+1+"-"+this._uid;document.getElementById("GPlocationOriginCoords_"+Oe).value="",document.getElementById("GPlocationOrigin_"+Oe).value="",document.getElementById("GPlocationPoint_"+Oe).style.cssText="",t>0&&t<6&&(document.getElementById("GPlocationPoint_"+Oe).className="GPflexInput GPelementHidden gpf-flex gpf-hidden "),document.getElementById("GPlocationOriginPointer_"+Oe).checked=!1,document.getElementById("GPlocationOrigin_"+Oe).className="GPelementVisible gpf-visible",document.getElementById("GPlocationOriginCoords_"+Oe).className="GPelementHidden gpf-hidden"}}for(var Ge=0;Ge<e.points.length;Ge++){const Be=e.points[Ge];Be&&this._currentPoints[Ge].setCoordinate(Be,"EPSG:4326")}this._currentRouteInformations=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}init(){for(let an=0;an<this._currentPoints.length;an++){const cn=this._currentPoints[an];var e=an+1,t=cn.getCoordinate();if(t){var ke=document.getElementById("GPlocationOrigin_"+e+"-"+this._uid);ke.value=t[1].toFixed(4)+" / "+t[0].toFixed(4),an>0&&an<6&&(document.getElementById("GPlocationPoint_"+e+"-"+this._uid).className="GPflexInput GPlocationStageFlexInput gpf-flex")}}var Oe=document.getElementsByClassName("GPlocationPoint-"+this._uid);this._addRouteResultsStagesValuesElement(Oe);var Ge;this._currentTransport==="Pieton"?(Ge=document.getElementById("GProuteTransportPedestrian-"+this._uid),Ge&&(Ge.checked="true")):(Ge=document.getElementById("GProuteTransportCar-"+this._uid),Ge&&(Ge.checked="true"));var Be=document.getElementById("GProuteComputationSelect-"+this._uid);Be&&(Be.value=this._currentComputation);var je=document.getElementById("GProuteExclusionsToll-"+this._uid);je&&(this._currentExclusions.indexOf("toll")!==-1?je.checked=!1:je.checked=!0);var Ve=document.getElementById("GProuteExclusionsTunnel-"+this._uid);Ve&&(this._currentExclusions.indexOf("tunnel")!==-1?Ve.checked=!1:Ve.checked=!0);var Ze=document.getElementById("GProuteExclusionsBridge-"+this._uid);Ze&&(this._currentExclusions.indexOf("bridge")!==-1?Ze.checked=!1:Ze.checked=!0);var Qe=this._currentRouteInformations.totalDistance,en=this._currentRouteInformations.totalTime,tn=this._simplifiedInstructions(this._currentRouteInformations.routeInstructions);tn&&this._fillRouteResultsDetailsContainer(Qe,en,tn),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}clean(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null;for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations(),this._clearRouteInputOptions(),this._clearRouteResultsDetails(),this.setLayer(),this._formRouteContainer.className="gpf-panel__content fr-modal__content",this._resultsRouteContainer.className="GPelementHidden gpf-hidden"}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"Itinéraire",description:"Itinéraire basé sur un graphe"}},Helper.assign(this.options,e);var t={departure:{url:Marker.red,offset:Marker.defaultOffset},stages:{url:Marker.lightOrange,offset:Marker.defaultOffset},arrival:{url:Marker.darkOrange,offset:Marker.defaultOffset}};this.options.markersOpts=Helper.assign(t,e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._showRouteButton=null,this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._geojsonObject=null,this.export=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this.listenerKey=null}_checkInputOptions(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var t=0;t<e.graphs.length;t++)typeof e.graphs[t]=="string"?(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture")):(logger$n.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[t]=null);else logger$n.warn("'graphs' parameter should be an array"),e.graphs=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initContainer(e){var t=this._container;if(t.childElementCount>0)return t;var ke=this._showRouteButton=this._createShowRoutePictoElement();t.appendChild(ke);var Oe=this._panelRouteContainer=this._createRoutePanelElement(),Ge=this._createRoutePanelDivElement();Oe.appendChild(Ge);var Be=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();Ge.appendChild(Be);var je=this._formRouteContainer=this._createRoutePanelFormElement();je.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs));for(var Ve=this._createRoutePanelFormPointsElement(e),Ze=0;Ze<Ve.length;Ze++)je.appendChild(Ve[Ze]);je.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),je.appendChild(this._showRouteExclusionsElement);var Qe=this._createRoutePanelFormExclusionsElement();Qe.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),je.appendChild(Qe);var en=this._createRoutePanelFooterElement();if(je.appendChild(en),!checkDsfr()){var tn=this._createRouteFormResetElement();en.appendChild(tn)}var an=this._createRouteSubmitFormElement();en.appendChild(an),Ge.appendChild(je);var cn=this._resultsRouteContainer=this._createRoutePanelResultsElement();Ge.appendChild(cn);var dn=this._waitingContainer=this._createRouteWaitingElement();return Ge.appendChild(dn),t.appendChild(Oe),t.addEventListener&&t.addEventListener("click",hn=>this._hideRouteSuggestedLocations(hn)),t}_initTransport(){this._currentTransport="Pieton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.routeOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e[t]&&this._currentExclusions.push(t);var ke=this.options.routeOptions;Array.isArray(ke.exclusions)&&(this._currentExclusions=ke.exclusions)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var ke=document.createElement("button");return ke.className="gp-styling-button closer",ke.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(ke),t}_createRoutePanelFormPointsElement(e){var t=[],ke=1,Oe=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:ke,groupId:this._uid,markerOpts:this.options.markersOpts.departure,display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(Oe.setMap(e),this._addFormPointsEventListeners(Oe),t.push(this._createRoutePanelFormPointLabel("Départ")),t.push(Oe._container),this._currentPoints.push(Oe),ke=2;ke<7;ke++){var Ge=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:ke,groupId:this._uid,markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});Ge.setMap(e),this._addFormPointsEventListeners(Ge),t.push(this._createRoutePanelFormPointLabel("Étape",!1)),t.push(Ge._container),this._currentPoints.push(Ge)}var Be=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:ke,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return Be.setMap(e),this._addFormPointsEventListeners(Be),t.push(this._createRoutePanelFormPointLabel("Arrivée")),t.push(Be._container),this._currentPoints.push(Be),t}_addFormPointsEventListeners(e){e&&(e._buttonLabel.addEventListener?(e._buttonLabel.addEventListener("click",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.addEventListener("click",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.addEventListener("click",t=>{logger$n.trace("click on _removePointElement",t)}),e._addPointElement&&e._addPointElement.addEventListener("click",t=>{logger$n.trace("click on _addPointElement",t)})):e._buttonLabel.attachEvent&&(e._buttonLabel.attachEvent("onclick",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.attachEvent("onclick",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.attachEvent("onclick",t=>{}),e._addPointElement&&e._addPointElement.attachEvent("onclick",t=>{})))}onRouteComputationSubmit(e){logger$n.log("onRouteComputationSubmit",e);var t=this._currentPoints,ke;if(t[0]&&t[0].getCoordinate){var Oe=t[0].getCoordinate();ke={x:Oe[0],y:Oe[1]},logger$n.log("start",ke)}var Ge,Be=t[t.length-1];if(Be&&Be.getCoordinate){var je=Be.getCoordinate();Ge={x:je[0],y:je[1]},logger$n.log("end",Ge)}for(var Ve=[],Ze=1;Ze<t.length-1;Ze++)if(t[Ze]&&t[Ze].getCoordinate){var Qe=t[Ze].getCoordinate();if(Qe){var en={x:Qe[0],y:Qe[1]};logger$n.log("step",en),Ve.push(en)}}this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var tn=this.options.routeOptions,an;tn.resource?an=tn.resource:this._currentComputation==="fastest"&&this._currentTransport==="Pieton"&&(an="bdtopo-valhalla");var cn=tn.protocol||"XHR",dn=tn.timeOut||0;cn==="JSONP"&&dn===0&&(dn=15e3);var hn=tn.onFailure!==null&&typeof tn.onFailure=="function",fn=tn.onSuccess!==null&&typeof tn.onSuccess=="function",pn=this;this._requestRouting({startPoint:ke,endPoint:Ge,viaPoints:Ve,graph:tn.graph||this._currentTransport,routePreference:tn.routePreference||this._currentComputation,exclusions:tn.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:dn,protocol:cn,resource:an,onSuccess:function(mn){logger$n.log(mn),mn&&pn._fillRouteResultsDetails(mn),fn&&tn.onSuccess.call(pn,mn)},onFailure:function(mn){pn._hideWaitingContainer(),pn._clearRouteResultsDetails(),logger$n.log(mn.message),hn&&tn.onFailure.call(pn,mn)}})}onRouteOriginLabelClick(){this._formRouteContainer.className="gpf-panel__content gpf-mobile-form fr-modal__content",unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}onRouteOriginPointerClick(e,t){var ke=this.getMap();t._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini gpf-panel__content fr-modal__content",e.target.parentElement.parentElement.classList.add("selected"),this.listenerKey=ke.on("click",()=>{e.target.parentElement.parentElement.classList.remove("selected"),this._formRouteContainer.className==="GProuteFormMini gpf-panel__content fr-modal__content"&&(this._formRouteContainer.className="gpf-panel__content fr-modal__content"),unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",unByKey(this.listenerKey),this.dispatchEvent("route:drawend"))}onShowRoutePanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t),!this._geojsonSections&&!this._waiting&&this._clear();var ke=this._showRouteButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onRouteModeComputationChange(e){var t=e.target.value;t&&(logger$n.log(t),this._currentComputation=t)}onRouteModeComputationChangeAndRun(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})}onRouteModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onShowRouteExclusionsClick(e){logger$n.log("onShowRouteExclusionsClick",e)}onRouteExclusionsChange(e){var t=e.target.value,ke=e.target.checked;if(!(!t||typeof t!="string")){t=t.toLowerCase();for(var Oe=!1,Ge=null,Be=0;Be<this._currentExclusions.length;Be++)this._currentExclusions[Be]===t&&(Ge=Be,Oe=!0);!Oe&&!ke&&this._currentExclusions.push(t),Oe&&ke&&this._currentExclusions.splice(Ge,1)}}onRouteResetClick(){for(var e=this._currentPoints,t=0;t<e.length;t++)e[t].clear();this._clear(),this._clearRouteInputOptions()}onShowRouteResultsNewClick(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry()}onRouteResultsDetailsMouseOver(e){var t=e.target.id,ke=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var Oe=this._geojsonSections.getSource().getFeatureById(parseInt(ke,10));Oe.setStyle(this._selectedFeatureStyle)}}onRouteResultsDetailsMouseOut(e){var t=e.target.id,ke=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var Oe=this._geojsonSections.getSource().getFeatureById(parseInt(ke,10));Oe.setStyle(null)}}_requestRouting(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.startPoint&&e.endPoint&&(e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey,typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$n.log(e),this._displayWaitingContainer(),Gp$1.Services.route(e))}_fillRouteResultsDetails(e){var t=e.totalDistance,ke=e.totalTime,Oe=this._simplifiedInstructions(e.routeInstructions);Oe&&this._fillRouteResultsDetailsContainer(t,ke,Oe);var Ge=e.routeGeometry;Ge&&this._fillRouteResultsDetailsGeometry(Ge,this._defaultFeatureStyle),Oe&&Oe[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(Oe,this._defaultFeatureStyle);var Be=e.bbox;if(Be){var je=this.getMap(),Ve=[Be.left,Be.bottom,Be.right,Be.top],Ze=je.getView().getProjection().getCode();Ze!=="EPSG:4326"&&(Ve=transformExtent(Ve,"EPSG:4326",Ze)),je.getView().fit(Ve,je.getSize())}this._currentRouteInformations=e,this.dispatchEvent({type:"route:compute"}),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}_fillRouteResultsDetailsContainer(e,t,ke){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,t,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(ke,this._convertSecondsToTime)}_fillRouteResultsDetailsGeometry(e,t){this._clearRouteResultsGeometry();var ke=this.getMap();if(e){var Oe={type:"FeatureCollection",features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e}]},Ge=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:t}),Be=Ge.readFeatures(Oe,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new VectorLayer({source:new VectorSource({features:Be}),style:t,title:"Mon Itinéraire"}),ke.addLayer(this._geojsonRoute)}}_fillRouteResultsDetailsFeatureGeometry(e,t){this._clearRouteResultsFeatureGeometry();var ke=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]};for(var Oe=0;Oe<e.length;Oe++){for(var Ge=e[Oe],Be=Oe+1,je=Ge.geometry.coordinates,Ve=0;Ve<je.length;Ve++)typeof je[Ve][0]=="string"&&(je[Ve][0]=parseFloat(je[Ve][0]),je[Ve][1]=parseFloat(je[Ve][1]));this._geojsonObject.features.push({type:"Feature",geometry:Ge.geometry,properties:{popupContent:"("+Be+") distance : "+this._convertDistance(Ge.distance)+" / temps : "+this._convertSecondsToTime(Ge.duration)},id:Be})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[0].getCoordinate()},properties:{description:"Point de départ","marker-symbol":this.options.markersOpts.departure.url}});for(var Ze=1;Ze<this._currentPoints.length-1;Ze++)if(this._currentPoints[Ze]&&this._currentPoints[Ze].getCoordinate){var Qe=this._currentPoints[Ze].getCoordinate();Qe&&this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:Qe},properties:{description:"Point d'étape","marker-symbol":this.options.markersOpts.stages.url}})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[this._currentPoints.length-1].getCoordinate()},properties:{description:"Point d'arrivée","marker-symbol":this.options.markersOpts.arrival.url}});var en=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:t}),tn=this.getMap().getView().getProjection().getCode(),an=en.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:tn});this._geojsonSections=new VectorLayer({source:new VectorSource({features:an}),style:t,opacity:.9,title:"Mon Itinéraire"});var cn;this._currentTransport==="Pieton"?(cn="piéton",this._geojsonSections.gpResultLayerId="compute:Pieton$OGC:OPENLS;Itineraire"):(cn="voiture",this._geojsonSections.gpResultLayerId="compute:Voiture$OGC:OPENLS;Itineraire"),ke.addLayer(this._geojsonSections),ke.getControls().forEach(dn=>{if(dn instanceof LayerSwitcher){var hn=this._geojsonSections.gpLayerId;dn._layers[hn].title===hn&&dn.addLayer(this._geojsonSections,{title:this.options.layerDescription.title+" ("+cn+")",description:this.options.layerDescription.description})}},this),this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",dn=>this._onResultsFeatureMouseOver(dn)),ke.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",dn=>this._onResultsFeatureSelect(dn)),ke.addInteraction(this._resultsSelectInteraction)}_onResultsFeatureMouseOver(e){if(e.selected.length!==0){var t=e.selected[0],ke=document.getElementById("GProuteResultsDetailsInstruction_"+t.getId()+"-"+this._uid);ke&&ke.classList&&ke.classList.add("GProuteResultsDetailsInstructionHighlight")}if(e.deselected.length!==0){var Oe=e.deselected[0],Ge=document.getElementById("GProuteResultsDetailsInstruction_"+Oe.getId()+"-"+this._uid);Ge&&Ge.classList&&Ge.classList.remove("GProuteResultsDetailsInstructionHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var ke=e.selected[0];this._popupContent.innerHTML=ke.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay))}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}_clear(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()}_clearRouteInputOptions(){this._initTransport(),this._initComputation(),this._initExclusions();var e;this._currentTransport==="Pieton"?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid),e&&(e.checked="true")):(e=document.getElementById("GProuteTransportCar-"+this._uid),e&&(e.checked="true"));var t=document.getElementById("GProuteComputationSelect-"+this._uid);t&&(t.value=this._currentComputation);var ke=document.getElementById("GProuteExclusionsToll-"+this._uid);ke&&(this._currentExclusions.indexOf("toll")!==-1?ke.checked=!1:ke.checked=!0);var Oe=document.getElementById("GProuteExclusionsTunnel-"+this._uid);Oe&&(this._currentExclusions.indexOf("tunnel")!==-1?Oe.checked=!1:Oe.checked=!0);var Ge=document.getElementById("GProuteExclusionsBridge-"+this._uid);Ge&&(this._currentExclusions.indexOf("bridge")!==-1?Ge.checked=!1:Ge.checked=!0)}_removeRouteStepLocations(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(e.length!==0){for(var t=[],ke=0;ke<e.length;ke++)e[ke].id.indexOf(this._uid)!==-1&&t.push(e[ke]);for(var Oe=1;Oe<t.length-1;Oe++){var Ge=t[Oe].classList;if(Ge.length!==0)for(var Be=0;Be<Ge.length;Be++)Ge[Be]==="GPlocationStageFlexInput"&&document.getElementById(this._addUID("GPlocationStageRemove_"+(Oe+1))).click()}}}_clearRouteResultsDetails(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var t=this._resultsRouteValuesContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild)}}_clearRouteResultsGeometry(){var e=this.getMap();this._geojsonRoute!=null&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)}_clearRouteResultsFeatureGeometry(){var e=this.getMap();this._geojsonSections!=null&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null,this._geojsonObject=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_hideRouteSuggestedLocations(e){if(e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1)for(var t=parseInt(e.target.id.split("_")[1][0],10)-1,ke=0;ke<this._currentPoints.length;ke++)ke!==parseInt(t,10)&&this._currentPoints[ke]._hideSuggestedLocation();else for(var Oe=0;Oe<this._currentPoints.length;Oe++)this._currentPoints[Oe]._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}_simplifiedInstructions(e){var t=[],ke=e[0];e.length===1&&t.push(ke);for(var Oe=1;Oe<e.length;Oe++){var Ge=e[Oe];if(Ge.instruction===ke.instruction){ke.distance=(parseFloat(Ge.distance)+parseFloat(ke.distance)).toString(),ke.duration=(parseFloat(Ge.duration)+parseFloat(ke.duration)).toString();for(var Be=1;Be<Ge.geometry.coordinates.length;Be++)ke.geometry.coordinates.push(Ge.geometry.coordinates[Be])}else t.push(ke),ke=Ge,Oe===e.length-1&&(t.push(Ge),ke=null)}return logger$n.log(t),t}_convertSecondsToTime(e){var t="";e=Math.round(e);var ke=Math.floor(e/(60*60)),Oe=e%(60*60),Ge=Math.floor(Oe/60);return ke&&(t=ke+"h "),t+=Ge+" min",t}_convertDistance(e){var t="",ke=parseInt(e/1e3,10);return ke?t=ke+" km":t=parseInt(e,10)+" m",t}};Object.assign(Route.prototype,RouteDOM);Object.assign(Route.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Route=Route);var IsoDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPisochron"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowIsoPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowIsochronPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-isocurve fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer une isochrone"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowIsoPanelClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowIsoPanelClick(ke)}),e},_createIsoPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPisochronPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createIsoPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createIsoPanelHeaderElement:function(){var r=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Calcul d'isochrone",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GPisochronPanelClose"),ke.className="GPpanelClose GPisochronPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(r._addUID("GPshowIsochronPicto")).click()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowIsochronPicto")).click()});var Oe=document.createElement("span");return Oe.className="GPelementHidden gpf-visible",Oe.innerText="Fermer",ke.appendChild(Oe),e.appendChild(ke),e},_createIsoPanelFormElement:function(){var r=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.className="GPform gpf-panel__content gpf-mobile-form fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),r.onIsoComputationSubmit(t),!1}),e},_createIsoWaitingElement:function(){var r=document.createElement("div");r.id=this._addUID("GPisochronCalcWaitingContainer"),r.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",r.appendChild(e),r},_createIsoPanelFooterElement:function(){var r=document.createElement("div");return r.className="GPpanelFooter gpf-panel__footer fr-modal__footer",r},_createIsoPanelFormPointLabel:function(){var r=document.createElement("p");return r.id=this._addUID("GPisochronPointLabelP"),r.className="gpf-label fr-label",r.innerHTML="Départ",r},_createIsoPanelFormTypeChoiceElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPisochronChoice"),r.className="fr-mt-2w",r},_createIsoPanelFormTypeChoiceChronElement:function(r){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var ke=document.createElement("input");ke.id=this._addUID("GPisochronChoiceAltChron"),ke.name="GPisochronChoiceMode",ke.type="radio",ke.checked=!!r,ke.addEventListener?ke.addEventListener("change",function(Be){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange(Be)},!1):ke.attachEvent&&ke.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange()}),ke.value="isochron",t.appendChild(ke);var Oe=document.createElement("label");Oe.className="GPisochronChoiceAltImg gpf-label fr-label",Oe.htmlFor=this._addUID("GPisochronChoiceAltChron"),Oe.innerHTML="Durée",Oe.title="Durée",t.appendChild(Oe);var Ge=document.createElement("span");return Ge.id=this._addUID("GPisochronChoiceAltChronTxt"),Ge.className="gpf-hidden",Ge.innerHTML="Durée",Ge.addEventListener?Ge.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()},!1):Ge.attachEvent&&Ge.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),t.appendChild(Ge),t},_createIsoPanelFormTypeChoiceDistElement:function(r){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var ke=document.createElement("input");ke.id=this._addUID("GPisochronChoiceAltDist"),ke.name="GPisochronChoiceMode",ke.type="radio",ke.checked=!!r,ke.addEventListener?ke.addEventListener("change",function(Be){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange(Be)},!1):ke.attachEvent&&ke.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange()}),ke.value="isodistance",t.appendChild(ke);var Oe=document.createElement("label");Oe.className="GPisochronChoiceAltImg gpf-label fr-label",Oe.htmlFor=this._addUID("GPisochronChoiceAltDist"),Oe.innerHTML="Distance",Oe.title="Distance",t.appendChild(Oe);var Ge=document.createElement("span");return Ge.id=this._addUID("GPisochronChoiceAltDistTxt"),Ge.className="gpf-hidden",Ge.innerHTML="Distance",Ge.addEventListener?Ge.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()},!1):Ge.attachEvent&&Ge.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),t.appendChild(Ge),t},_createIsoPanelFormLabelIsochronElement:function(r){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueChronLabelP"),e.className=r?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir un temps de trajet",e},_createIsoPanelFormValueIsochronElement:function(r){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueChron"),t.className=r?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var ke=document.createElement("input");ke.id=this._addUID("GPisochronValueChronInput1"),ke.className="gpf-input fr-input",ke.min="0",ke.step="1",ke.value="0",ke.type="number",ke.title="Temps",ke.addEventListener?ke.addEventListener("change",function(je){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(je)}):ke.attachEvent&&ke.attachEvent("onchange",function(je){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(je)}),t.appendChild(ke);var Oe=document.createElement("label");Oe.innerHTML="h",Oe.className="gpf-label fr-label",t.appendChild(Oe);var Ge=document.createElement("input");Ge.id=this._addUID("GPisochronValueChronInput2"),Ge.className="gpf-input fr-input",Ge.min="0",Ge.max="59",Ge.step="1",Ge.value="0",Ge.type="number",Ge.title="Heures",Ge.addEventListener?Ge.addEventListener("change",function(je){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(je)}):Ge.attachEvent&&Ge.attachEvent("onchange",function(je){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(je)}),t.appendChild(Ge);var Be=document.createElement("label");return Be.innerHTML="min",Be.className="gpf-label fr-label",t.appendChild(Be),t},_createIsoPanelFormLabelIsodistanceElement:function(r){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueDistLabelP"),e.className=r?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir une distance",e},_createIsoPanelFormValueIsodistanceElement:function(r){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueDist"),t.className=r?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var ke=document.createElement("input");ke.id=this._addUID("GPisochronValueDistInput"),ke.className="gpf-input fr-input fr-ml-1w",ke.min="0",ke.step="any",ke.value="0",ke.type="number",ke.title="Distance",ke.addEventListener?ke.addEventListener("change",function(Ge){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Ge)}):ke.attachEvent&&ke.attachEvent("onchange",function(Ge){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Ge)}),t.appendChild(ke);var Oe=document.createElement("label");return Oe.innerHTML="km",Oe.className="gpf-label fr-label",t.appendChild(Oe),t},_createIsoPanelFormModeChoiceTransportElement:function(r){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronTransportChoice");var ke=document.createElement("label");ke.className="GPisochronModeLabel gpf-label fr-label",ke.innerHTML="Choisir un mode de déplacement",t.appendChild(ke);for(var Oe=document.createElement("div"),Ge=0;Ge<r.length;Ge++){var Be=r[Ge],je=document.createElement("div");if(je.className="GPisochronTransportChoice gpf-flex gpf-radio-group fr-radio-group",Be==="Voiture"){var Ve=document.createElement("input");Ve.id=this._addUID("GPisochronTransportCar"),Ve.type="radio",Ve.name="GPisochronTransport",Ge===0&&(Ve.checked=!0),Ve.addEventListener?Ve.addEventListener("change",function(tn){e.onIsoModeTransportChange(tn)}):Ve.attachEvent&&Ve.attachEvent("onchange",function(tn){e.onIsoModeTransportChange(tn)}),Ve.value="Voiture",je.appendChild(Ve);var Ze=document.createElement("label");Ze.className="GPisochronTransportImg gpf-label fr-label",Ze.htmlFor=this._addUID("GPisochronTransportCar"),Ze.title="Voiture",Ze.innerHTML="Voiture",je.appendChild(Ze)}if(Be==="Pieton"){var Qe=document.createElement("input");Qe.id=this._addUID("GPisochronTransportPedestrian"),Qe.type="radio",Qe.name="GPisochronTransport",Ge===0&&(Qe.checked=!0),Qe.addEventListener?Qe.addEventListener("change",function(tn){e.onIsoModeTransportChange(tn)}):Qe.attachEvent&&Qe.attachEvent("onchange",function(tn){e.onIsoModeTransportChange(tn)}),Qe.value="Pieton",je.appendChild(Qe);var en=document.createElement("label");en.className="GPisochronTransportImg gpf-label fr-label",en.htmlFor=this._addUID("GPisochronTransportPedestrian"),en.title="Piéton",en.innerHTML="Piéton",je.appendChild(en)}Oe.appendChild(je)}return t.appendChild(Oe),t},_createIsoPanelFormModeChoiceDirectionElement:function(r){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronDirectionChoice"),t.className="fr-my-2w";var ke=document.createElement("label");ke.innerHTML="Définir un sens de parcours",ke.className="fr-label",t.appendChild(ke);var Oe=document.createElement("select");Oe.id=this._addUID("GPisochronDirectionSelect"),Oe.className="GPselect gpf-select fr-select",Oe.title="Sens de parcours",Oe.addEventListener("change",function(Ze){e.onIsoModeDirectionChange(Ze)});for(var Ge=0;Ge<r.length;Ge++){var Be=r[Ge];if(Be.toLowerCase()==="departure"){var je=document.createElement("option");Ge===0&&(je.selected="selected"),je.value="departure",je.text="Départ",Oe.appendChild(je)}if(Be.toLowerCase()==="arrival"){var Ve=document.createElement("option");Ge===0&&(Ve.selected="selected"),Ve.value="arrival",Ve.text="Arrivée",Oe.appendChild(Ve)}}return t.appendChild(Oe),t},_createShowIsoExclusionsPictoElement:function(){var r=this,e=document.createElement("button");e.id=this._addUID("GPshowIsoExclusionsPicto");var t="";return checkDsfr()&&(t="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto ${t} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(ke){ke.preventDefault();var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowIsoSettingsClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){ke.preventDefault();var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowIsoSettingsClick(ke)}),e},_createIsoPanelFormExclusionsElement:function(){var r=document.createElement("div");r.id=this._addUID("GPisoExclusions");var e=document.createElement("label");return e.className="GPisoExclusionsLabel gpf-label fr-label",e.innerHTML="Passages autorisés",r.appendChild(e),r},_createIsoPanelFormExclusionOptionsElement:function(r){var e=this,t=document.createElement("div");t.className="GPisoExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var ke in r)if(r.hasOwnProperty(ke)){var Oe=r[ke];switch(ke){case"toll":var Ge=document.createElement("input");Ge.id=this._addUID("GPisoExclusionsToll"),Ge.type="checkbox",Ge.name="Péages",Ge.checked=!Oe,Ge.addEventListener?Ge.addEventListener("change",function(en){e.onIsoExclusionsChange(en)}):Ge.attachEvent&&Ge.attachEvent("onchange",function(en){e.onIsoExclusionsChange(en)}),Ge.value="Toll",t.appendChild(Ge);var Be=document.createElement("label");Be.className="GPisoExclusionsOption",Be.htmlFor=this._addUID("GPisoExclusionsToll"),Be.innerHTML="Péages",t.appendChild(Be);break;case"tunnel":var je=document.createElement("input");je.id=this._addUID("GPisoExclusionsTunnel"),je.type="checkbox",je.name="Tunnel",je.checked=!Oe,je.addEventListener?je.addEventListener("change",function(en){e.onIsoExclusionsChange(en)}):je.attachEvent&&je.attachEvent("onchange",function(en){e.onIsoExclusionsChange(en)}),je.value="Tunnel",t.appendChild(je);var Ve=document.createElement("label");Ve.className="GPisoExclusionsOption",Ve.htmlFor=this._addUID("GPisoExclusionsTunnel"),Ve.innerHTML="Tunnels",t.appendChild(Ve);break;case"bridge":var Ze=document.createElement("input");Ze.id=this._addUID("GPisoExclusionsBridge"),Ze.type="checkbox",Ze.name="Ponts",Ze.checked=!Oe,Ze.addEventListener?Ze.addEventListener("change",function(en){e.onIsoExclusionsChange(en)}):Ze.attachEvent&&Ze.attachEvent("onchange",function(en){e.onIsoExclusionsChange(en)}),Ze.value="Bridge",t.appendChild(Ze);var Qe=document.createElement("label");Qe.className="GPisoExclusionsOption",Qe.htmlFor=this._addUID("GPisoExclusionsBridge"),Qe.innerHTML="Ponts",t.appendChild(Qe);break}}return t},_createIsoSubmitFormElement:function(){var r=document.createElement("input");return r.id=this._addUID("GPisochronSubmit"),r.className="GPsubmit gpf-btn fr-btn",r.type="submit",r.value="Calculer l'isochrone",r},_createIsoFormResetElement:function(){var r=this,e=document.createElement("button");return e.id=this._addUID("GPisochronReset"),e.className="GPresetPicto GPisochronReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-isocurve-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke),r.onIsoResetClick(t)}),e}},logger$m=LoggerByDefault.getLogger("isocurve"),Isocurve=class $f extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof $f))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Isocurve",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.options.export){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var ke=this;this.export.on("export:compute",Oe=>{ke.dispatchEvent({type:"export:compute",content:Oe.content})})}this.draggable&&Draggable.dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoIsoButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$m.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getLayer(){return this._geojsonLayer}setLayer(e){if(!e){this._geojsonLayer=null;return}if(!(e instanceof VectorLayer)){logger$m.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonLayer=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){logger$m.log("no valid geojson given :"+t.message)}}getData(){var e={type:"isocurve",transport:this._currentTransport,computation:this._currentComputation,exclusions:this._currentExclusions,direction:this._currentDirection,point:this._originPoint.getCoordinate(),results:{}};return Helper.assign(e.results,this._currentIsoResults),e}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions,this._currentDirection=e.direction;var t=document.getElementById("GPlocationOriginPointer_1-"+this._uid);t.checked=!0;var ke=document.getElementById("GPlocationOriginCoords_1-"+this._uid);ke.value="",this._originPoint.setCoordinate(e.point,"EPSG:4326"),this._currentIsoResults=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}compute(e,t,ke){this._clear();var Oe=this._pictoIsoButton.ariaPressed;Oe!=="true"&&this._pictoIsoButton.click();var Ge=this.getMap();if(Ge){var Be={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};Helper.assign(Be,ke),this._originPoint.setCoordinate(e);var je=this._originPoint.getCoordinate(),Ve=document.getElementById("GPlocationOrigin_1-"+this._uid);if(Ve.value=je[0].toFixed(4)+" / "+je[1].toFixed(4),this._currentTransport=Be.transport,Be.transport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=Be.exclusions,this._currentComputation=Be.method,Be.method==="time"){var Ze=t.split(".");this._currentTimeHour=Ze[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Ze[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=t,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=Be.direction,Be.direction==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1,this.onIsoComputationSubmit()}}init(){var e=this._originPoint.getCoordinate(),t=document.getElementById("GPlocationOrigin_1-"+this._uid);if(t.value=e[1].toFixed(4)+" / "+e[0].toFixed(4),this._currentTransport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentComputation==="time"){var ke=this._currentIsoResults.time/60;this._currentTimeHour=Math.floor(ke/60),document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Math.round((ke/60-this._currentTimeHour)*60),document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=this._currentIsoResults.distance/1e3,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,methods:["time","distance"],graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:Marker.lightOrange,offset:Marker.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrone/isodistance basé sur un graphe"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._pictoIsoButton=null,this._waitingContainer=null,this._formContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._geojsonObject=null,this.export=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.7)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0)",width:1})}),this._resources={},this.listenerKey=null}_checkInputOptions(e){var t;if(e.methods)if(Array.isArray(e.methods))if(e.methods.length===0)e.methods=null;else for(t=0;t<e.methods.length;t++)typeof e.methods[t]!="string"&&logger$m.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else logger$m.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(e.graphs.length===0)e.graphs=null;else for(t=0;t<e.graphs.length;t++)typeof e.graphs[t]!="string"?logger$m.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture"));else logger$m.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(e.directions.length===0)e.directions=null;else for(t=0;t<e.directions.length;t++)typeof e.directions[t]!="string"&&logger$m.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else logger$m.warn("'directions' parameter should be an array"),e.directions=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initTransport(){this._currentTransport="Piéton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.isocurveOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="time";var e=this.options.methods;(!e||e.length===0)&&(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&(e[0]==="time"||e[0]==="distance")&&(this._currentComputation=e[0]);var t=this.options.isocurveOptions;t.method&&(this._currentComputation=t.method),t.time&&(this._currentComputation="time"),t.distance&&(this._currentComputation="distance")}_initDirection(){this._currentDirection="departure";var e=this.options.directions;(!e||e.length===0)&&(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&(e[0]==="departure"||e[0]==="arrival")&&(this._currentDirection=e[0]);var t=this.options.isocurveOptions;t.reverse||(this._currentDirection="departure"),t.reverse===!0&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e.k&&this._currentExclusions.push(t);var ke=this.options.isocurveOptions;Array.isArray(ke.exclusions)&&(this._currentExclusions=ke.exclusions)}_initContainer(e){var t=this._container;if(t.childElementCount>0)return t;var ke=this._pictoIsoButton=this._createShowIsoPictoElement();t.appendChild(ke);var Oe=this._IsoPanelContainer=this._createIsoPanelElement(),Ge=this._createIsoPanelDivElement();Oe.appendChild(Ge);var Be=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();Ge.appendChild(Be);var je=this._formContainer=this._createIsoPanelFormElement();je.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),je.appendChild(this._createIsoPanelFormPointLabel());var Ve=this._createIsoPanelFormPointElement(e);je.appendChild(Ve);for(var Ze=!1,Qe=!1,en=this._createIsoPanelFormTypeChoiceElement(),tn=0;tn<this.options.methods.length;tn++)this.options.methods[tn]==="time"&&(Ze=tn===0,en.appendChild(this._createIsoPanelFormTypeChoiceChronElement(Ze))),this.options.methods[tn]==="distance"&&(Qe=tn===0,en.appendChild(this._createIsoPanelFormTypeChoiceDistElement(Qe)));if(je.appendChild(en),je.appendChild(this._createIsoPanelFormLabelIsochronElement(Ze)),je.appendChild(this._createIsoPanelFormValueIsochronElement(Ze)),je.appendChild(this._createIsoPanelFormLabelIsodistanceElement(Qe)),je.appendChild(this._createIsoPanelFormValueIsodistanceElement(Qe)),je.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),this.options.exclusions&&typeof this.options.exclusions=="object"&&Object.keys(this.options.exclusions).length!==0){je.appendChild(this._createShowIsoExclusionsPictoElement());var an=this._createIsoPanelFormExclusionsElement();an.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),je.appendChild(an)}var cn=this._createIsoPanelFooterElement();if(je.appendChild(cn),!checkDsfr()){var dn=this._createIsoFormResetElement();cn.appendChild(dn)}var hn=this._submitContainer=this._createIsoSubmitFormElement();cn.appendChild(hn),Ge.appendChild(je);var fn=this._waitingContainer=this._createIsoWaitingElement();return Oe.appendChild(fn),t.appendChild(Oe),t.addEventListener&&t.addEventListener("click",pn=>this._hideIsoSuggestedLocations(pn)),t}_createIsoPanelFormPointElement(e){this._originPoint=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var t=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){t._clearGeojsonLayer();var ke=t.getMap();t._originPoint._inputShowPointerContainer.checked?(t._formContainer.className="GPisochronFormMini gpf-panel__content fr-modal__content",this.listenerKey=ke.on("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content",t.dispatchEvent("isocurve:drawend")})):(t._formContainer.className="gpf-panel__content fr-modal__content",unByKey(this.listenerKey)),t.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t._formContainer.className="gpf-panel__content fr-modal__content",e.un("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content"}),t.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t.dispatchEvent("isocurve:drawend")},this._originPoint._container}onIsoComputationSubmit(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate()){logger$m.log("[Isocurve] Missing position parameter to submit isocurve request");return}var e=this._originPoint.getCoordinate(),t={x:e[0],y:e[1]};logger$m.log("origin : ",t);var ke,Oe;if(this._currentComputation.toLowerCase()==="time"){var Ge=document.getElementById("GPisochronValueChronInput1-"+this._uid),Be=parseInt(Ge.value,10);isNaN&&isNaN(Be)&&(Be=0);var je=document.getElementById("GPisochronValueChronInput2-"+this._uid),Ve=parseInt(je.value,10);isNaN&&isNaN(Ve)&&(Ve=0),ke=Be*3600+Ve*60,logger$m.log("time : "+ke)}if(this._currentComputation.toLowerCase()==="distance"){var Ze=document.getElementById("GPisochronValueDistInput-"+this._uid);Oe=parseFloat(Ze.value)*1e3,logger$m.log("distance : "+Oe)}if(!ke&&!Oe){logger$m.log("[Isocurve] Missing time or distance parameter to submit isocurve request");return}var Qe=this.options.isocurveOptions||{},en=Qe.protocol||"XHR",tn=Qe.timeOut||0;en==="JSONP"&&tn===0&&(tn=15e3);var an=Qe.onFailure!==null&&typeof Qe.onFailure=="function",cn=Qe.onSuccess!==null&&typeof Qe.onSuccess=="function",dn=this,hn={position:t,graph:Qe.graph||this._currentTransport,exclusions:Qe.exclusions||this._currentExclusions,method:Qe.method||this._currentComputation,smoothing:Qe.smoothing||!0,timeOut:tn,protocol:en,resource:Qe.resource,onSuccess:function(fn){logger$m.log(fn),fn&&dn._drawIsoResults(fn),cn&&Qe.onSuccess.call(dn,fn)},onFailure:function(fn){dn._hideWaitingContainer(),logger$m.log(fn.message),an&&Qe.onFailure.call(dn,fn)}};(this._currentDirection.toLowerCase()==="arrival"||Qe.reverse)&&(hn.reverse=!0),ke&&(hn.time=ke),Oe&&(hn.distance=Oe),this._requestIsoCurve(hn)}onShowIsoPanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._pictoIsoButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onIsoTypeChoiceChange(e){var t=e.target.value;t&&(t==="isodistance"&&(this._currentComputation="distance"),t==="isochron"&&(this._currentComputation="time"))}onIsoModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onIsoModeDirectionChange(e){var t=e.target.value;t&&(t.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ",this._currentDirection=t)}onIsoExclusionsChange(e){var t=e.target.value,ke=e.target.checked;if(t){for(var Oe=!1,Ge=null,Be=0;Be<this._currentExclusions.length;Be++)deepEqual(this._currentExclusions[Be],t.toLowerCase())&&(Ge=Be,Oe=!0);!Oe&&!ke&&this._currentExclusions.push(t.toLowerCase()),Oe&&ke&&(this._currentExclusions[Ge]=null)}}onIsoResetClick(){this._clear()}onShowIsoSettingsClick(){}_requestIsoCurve(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.position&&(typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$m.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),Gp$1.Services.isoCurve(e))}_drawIsoResults(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),!!e.geometry){var t=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry}]},this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._originPoint.getCoordinate()},properties:{description:"Point d'origine","marker-symbol":this.options.markerOpts.url}});var ke=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:this._defaultFeatureStyle}),Oe=t.getView().getProjection().getCode(),Ge=ke.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:Oe}),Ve=this._currentComputation==="time"?"Isochrone":"Isodistance";this._geojsonLayer=new VectorLayer({source:new VectorSource({features:Ge}),style:this._defaultFeatureStyle,opacity:.9,title:"Mon "+Ve});var Be;if(this._currentTransport==="Pieton"?(Be="piéton",this._geojsonLayer.gpResultLayerId="compute:Pieton$GEOPORTAIL:GPP:Isocurve"):(Be="voiture",this._geojsonLayer.gpResultLayerId="compute:Voiture$GEOPORTAIL:GPP:Isocurve"),t.addLayer(this._geojsonLayer),this.dispatchEvent({type:"isocurve:compute"}),Ge[0]&&Ge[0].getGeometry()&&Ge[0].getGeometry().getExtent()){var je=Ge[0].getGeometry().getExtent();t.getView().fit(je,t.getSize())}var Ve=this._currentComputation==="time"?"Isochrone":"Isodistance";t.getControls().forEach(Ze=>{if(Ze instanceof LayerSwitcher){var Qe=this._geojsonLayer.gpLayerId;Ze._layers[Qe].title===Qe&&Ze.addLayer(this._geojsonLayer,{title:this.options.layerDescription.title+" ("+Ve+"/"+Be+")",description:this.options.layerDescription.description})}})}}_clear(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null}_clearIsoInputs(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var t=document.getElementById("GPisochronValueChronInput2-"+this._uid);t&&(t.value="0");var ke=document.getElementById("GPisochronValueDistInput-"+this._uid);ke&&(ke.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var Oe;this._currentTransport==="Pieton"?(Oe=document.getElementById("GPisochronTransportPedestrian-"+this._uid),Oe&&(Oe.checked="true")):(Oe=document.getElementById("GPisochronTransportCar-"+this._uid),Oe&&(Oe.checked="true"));var Ge;this._currentComputation.toLowerCase()==="distance"?(Ge=document.getElementById("GPisochronChoiceAltDist-"+this._uid),Ge&&(Ge.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPelementHidden gpf-hidden")):(Ge=document.getElementById("GPisochronChoiceAltChron-"+this._uid),Ge&&(Ge.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPelementHidden gpf-hidden"));var Be=document.getElementById("GPisochronDirectionSelect-"+this._uid);Be&&(Be.value=this._currentDirection),Be.value.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ";var je=document.getElementById("GPisoExclusionsToll-"+this._uid);je&&(this._currentExclusions.indexOf("toll")!==-1?je.checked=!1:je.checked=!0);var Ve=document.getElementById("GPisoExclusionsTunnel-"+this._uid);Ve&&(this._currentExclusions.indexOf("tunnel")!==-1?Ve.checked=!1:Ve.checked=!0);var Ze=document.getElementById("GPisoExclusionsBridge-"+this._uid);Ze&&(this._currentExclusions.indexOf("bridge")!==-1?Ze.checked=!1:Ze.checked=!0)}_clearGeojsonLayer(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null),this._geojsonObject=null}_hideIsoSuggestedLocations(e){e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1||this._originPoint._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}};Object.assign(Isocurve.prototype,IsoDOM);Object.assign(Isocurve.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Isocurve=Isocurve);const deepEqual=function(r,e){if(r===e)return!0;if(typeof r=="object"&&r!=null&&typeof e=="object"&&e!=null){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(var t in r)if(e.hasOwnProperty(t)){if(!deepEqual(r[t],e[t]))return!1}else return!1;return!0}else return!1};var ReverseGeocodeDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPreverseGeocoding"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowReverseGeocodingPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowReverseGeocodingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-reverse fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir la recherche inverse"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowReverseGeocodingClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowReverseGeocodingClick(ke)}),e},_createReverseGeocodingWaitingElement:function(){var r=document.createElement("div");r.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),r.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",r.appendChild(e),r},_createReverseGeocodingResultsPanelElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPreverseGeocodingResultsPanel"),r.className="GPpanel GPelementHidden gpf-panel gpf-panel-reverse gpf-panel--hidden",r},_createReverseGeocodingResultsListElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPreverseGeocodingResultsList"),r.className="gpf-panel__list",r.setAttribute("tabindex","0"),r},_createReverseGeocodingResultElement:function(r,e){var t=this,ke=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),Oe=document.createElement("div");Oe.id=this._addUID("GPreverseGeocodedLocation_"+e),Oe.setAttribute("tabindex","0"),Oe.className="GPautoCompleteProposal gpf-panel__items",Oe.innerHTML=r,Oe.title=r,Oe.addEventListener?(Oe.addEventListener("mouseover",function(Ge){t.onReverseGeocodingResultMouseOver(Ge)}),Oe.addEventListener("focus",function(Ge){t.onReverseGeocodingResultMouseOver(Ge)}),Oe.addEventListener("mouseout",function(Ge){t.onReverseGeocodingResultMouseOut(Ge)}),Oe.addEventListener("blur",function(Ge){t.onReverseGeocodingResultMouseOut(Ge)}),Oe.addEventListener("click",function(Ge){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(Ge)})):Oe.attachEvent&&(Oe.attachEvent("onmouseover",function(Ge){t.onReverseGeocodingResultMouseOver(Ge)}),Oe.attachEvent("onmouseout",function(Ge){t.onReverseGeocodingResultMouseOut(Ge)}),Oe.attachEvent("onclick",function(Ge){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(Ge)})),ke.appendChild(Oe)},_createReverseGeocodingPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPreverseGeocodingPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createReverseGeocodingPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createReverseGeocodingPanelHeaderElement:function(){var r=document.createElement("div");return r.className="GPpanelHeader gpf-panel__header fr-modal__header",r},_createReverseGeocodingPanelReturnPictoElement:function(){var r=this,e=document.createElement("button");return e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreturnPicto GPreverseGeocodingReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary gpf-btn--secondary",e.classList.add("GPelementHidden"),e.classList.add("gpf-hidden"),e.addEventListener?e.addEventListener("click",function(t){document.getElementById(r._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(r._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(r._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(r._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(r._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),r.onGPreverseGeocodingReturnPictoClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){document.getElementById(r._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(r._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(r._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(r._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(r._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),r.onGPreverseGeocodingReturnPictoClick(t)}),e},_createReverseGeocodingPanelTitleElement:function(){var r=document.createElement("div");return r.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",r.id=this._addUID("GPreverseGeocodingHeaderTitle"),r.innerHTML="Recherche inverse",r},_createReverseGeocodingPanelCloseElement:function(){var r=this,e=document.createElement("button");e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose GPreverseGeocodingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(r._addUID("GPshowReverseGeocodingPicto")).click()},!1),e.addEventListener("keydown",function(ke){ke.keyCode===13&&document.getElementById(r._addUID("GPshowReverseGeocodingPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowReverseGeocodingPicto")).click()}),e.attachEvent("onkeydown",function(ke){ke.keyCode===13&&document.getElementById(r._addUID("GPshowReverseGeocodingPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createReverseGeocodingPanelFormElement:function(){var r=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),r.onReverseGeocodingSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),r.onReverseGeocodingSubmit()}),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(r){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-1w";var ke=document.createElement("label");ke.id="label-recherche-par",ke.className="GPlabel gpf-label fr-label",ke.innerHTML="Recherche par",ke.title="Recherche par",t.appendChild(ke);var Oe=document.createElement("select");Oe.setAttribute("aria-labelledby","label-recherche-par"),Oe.className="GPselect gpf-select fr-select",Oe.addEventListener?Oe.addEventListener("change",function(Ze){e.onReverseGeocodingTypeChange(Ze)}):Oe.attachEvent&&Oe.attachEvent("onchange",function(Ze){e.onReverseGeocodingTypeChange(Ze)}),(!r||!Array.isArray(r))&&(r=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var Ge=0;Ge<r.length;Ge++)switch(r[Ge]){case"PositionOfInterest":var Be=document.createElement("option");Be.value="PositionOfInterest",Be.text="Lieux/toponymes",Oe.appendChild(Be);break;case"StreetAddress":var je=document.createElement("option");je.value="StreetAddress",je.text="Adresses",Oe.appendChild(je);break;case"CadastralParcel":var Ve=document.createElement("option");Ve.value="CadastralParcel",Ve.text="Parcelles cadastrales",Oe.appendChild(Ve);break}return t.appendChild(Oe),t},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(r){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-2w";var ke=document.createElement("label");ke.id="label-delimitation",ke.className="GPlabel gpf-label fr-label",ke.innerHTML="Délimitation",ke.title="Délimitation",t.appendChild(ke);var Oe=document.createElement("select");Oe.setAttribute("aria-labelledby","label-delimitation"),Oe.className="GPselect gpf-select fr-select",Oe.addEventListener?Oe.addEventListener("change",function(Ze){e.onReverseGeocodingDelimitationChange(Ze)}):Oe.attachEvent&&Oe.attachEvent("onchange",function(Ze){e.onReverseGeocodingDelimitationChange(Ze)}),(!r||!Array.isArray(r))&&(r=["Point","Circle","Extent"]);for(var Ge=0;Ge<r.length;Ge++)switch(r[Ge].toLowerCase()){case"point":var Be=document.createElement("option");Be.value="point",Be.text="Pointer un lieu",Oe.appendChild(Be);break;case"circle":var je=document.createElement("option");je.value="circle",je.text="Dessiner un cercle",Oe.appendChild(je);break;case"extent":var Ve=document.createElement("option");Ve.value="extent",Ve.text="Dessiner une emprise",Oe.appendChild(Ve);break}return t.appendChild(Oe),t},_createReverseGeocodingSubmitFormElement:function(){var r=document.createElement("input");return r.id=this._addUID("GPreverseGeocodingSubmit"),r.className="GPsubmit gpf-btn fr-btn",r.type="submit",r.value="Rechercher",r}},logger$l=LoggerByDefault.getLogger("reversegeocoding"),ReverseGeocode=class Yf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Yf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ReverseGeocode",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$l.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showReverseGeocodingButton.click(),this.collapsed=e)}setMap(e){if(e)this._activateMapInteraction(e),this.draggable&&Draggable.dragElement(this._panelContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||this._showReverseGeocodingButton.setAttribute("aria-pressed",!0);else{var t=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),this._inputFeaturesLayer!=null&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getData(){return this._reverseGeocodingLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingButton=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._panelCloseButton=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestGeom=null,this._requestPosition=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new Style$1({image:new Icon({src:Marker.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new Style$1({image:new Icon({src:Marker.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null}_checkInputOptions(e){var t,ke;if(e.resources){var Oe=e.resources;if(Array.isArray(Oe)){var Ge=["StreetAddress","PositionOfInterest","CadastralParcel"],Be=[];for(t=0;t<Oe.length;t++)Ge.indexOf(Oe[t])===-1&&(Be.push(t),logger$l.log("[ReverseGeocode] options.resources : "+Oe[t]+" is not a resource for reverse geocode"));if(Be.length!==0)for(ke=0;ke<Be.length;ke++)Oe.splice(Be[ke],1)}else logger$l.log("[ReverseGeocode] 'options.resources' parameter should be an array"),Oe=null}if(e.delimitations){var je=e.delimitations;if(Array.isArray(je)){var Ve=["Circle","Point","Extent"],Ze=[];for(t=0;t<je.length;t++)Ve.indexOf(je[t])===-1&&(Ze.push(t),logger$l.log("[ReverseGeocode] options.delimitations : "+je[t]+" is not a delimitation for reverse geocode"));if(Ze.length!==0)for(ke=0;ke<Ze.length;ke++)je.splice(Ze[ke],1)}else logger$l.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),je=null}}_initGeocodingType(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;(!e||e.length===0)&&(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(e)&&e.length&&(e[0]==="StreetAddress"||e[0]==="PositionOfInterest"||e[0]==="CadastralParcel")&&(this._currentGeocodingType=e[0]);var t=this.options.reverseGeocodeOptions;t.filterOptions&&Array.isArray(t.filterOptions.type)&&t.filterOptions.type.length!==0&&(this._currentGeocodingType=t.filterOptions.type[0])}_initGeocodingDelimitation(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if((!e||e.length===0)&&(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var t=e[0].toLowerCase();(t==="point"||t==="circle"||t==="extent")&&(this._currentGeocodingDelimitation=e[0])}}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var ke=document.createElement("button");return ke.className="gp-styling-button closer",ke.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(ke),t}_initContainer(){var e=this._createMainContainerElement(),t=this._showReverseGeocodingButton=this._createShowReverseGeocodingPictoElement();e.appendChild(t);var ke=this._panelContainer=this._createReverseGeocodingPanelElement(),Oe=this._createReverseGeocodingPanelDivElement();ke.appendChild(Oe);var Ge=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),Be=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();Ge.appendChild(Be);var je=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();Ge.appendChild(je);var Ve=this._panelCloseButton=this._createReverseGeocodingPanelCloseElement();Ge.appendChild(Ve),Oe.appendChild(Ge);var Ze=this._formContainer=this._createReverseGeocodingPanelFormElement();Ze.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),Ze.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var Qe=this._createReverseGeocodingSubmitFormElement();Ze.appendChild(Qe),Oe.appendChild(Ze);var en=this._waitingContainer=this._createReverseGeocodingWaitingElement();Oe.appendChild(en);var tn=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),an=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return tn.appendChild(an),Oe.appendChild(tn),e.appendChild(ke),logger$l.log(e),e}_activateMapInteraction(e){if(!this.collapsed){this._inputFeaturesLayer==null&&(this._inputFeatures=new Collection,this._inputFeaturesSource=new VectorSource({features:this._inputFeatures}),this._inputFeaturesLayer=new VectorLayer({source:this._inputFeaturesSource,style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Icon({src:Marker.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer));var t=this._currentGeocodingDelimitation.toLowerCase();switch(t){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e);break}e.getControls().forEach(ke=>{if(ke instanceof LayerSwitcher){var Oe=this._inputFeaturesLayer.gpLayerId;ke._layers[Oe].title===Oe&&(ke.addLayer(this._inputFeaturesLayer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description}),ke.setRemovable(this._inputFeaturesLayer,!1))}})}}_activatePointInteraction(e){this._mapInteraction=new Draw({style:new Style$1({image:new CircleStyle({radius:0,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",t=>{logger$l.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"point")}),this._mapInteraction.on("drawend",t=>{logger$l.log("on drawend",t),t.feature&&t.feature.getGeometry&&(this._requestGeom={type:"Point",coordinates:[this._requestPosition.lon,this._requestPosition.lat]})}),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)}_activateCircleInteraction(e){this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",t=>{logger$l.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"circle")}),this._mapInteraction.on("drawend",t=>{if(logger$l.log("on drawend",t),t.feature&&t.feature.getGeometry){var ke=t.feature.getGeometry().getRadius();this._requestGeom={},this._requestGeom.type="Circle",this._requestGeom.radius=ke,this._requestPosition&&(this._requestGeom.coordinates=[this._requestPosition.lon,this._requestPosition.lat]),logger$l.log("circle radius : ",ke)}}),e.addInteraction(this._mapInteraction)}_activateBoxInteraction(e){var t=function(ke,Oe){Oe||(Oe=new Polygon([]));var Ge=ke[0],Be=ke[1];return Oe.setCoordinates([[Ge,[Ge[0],Be[1]],Be,[Be[0],Ge[1]],Ge]]),Oe};this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:t}),this._mapInteraction.on("drawstart",ke=>{logger$l.log("on drawstart",ke),this._inputFeatures.clear(),this._onDrawStart(ke,"polygon")}),this._mapInteraction.on("drawend",ke=>{logger$l.log("on drawend",ke),this._onBoxDrawEnd(ke)}),e.addInteraction(this._mapInteraction)}_removeMapInteraction(e){this._mapInteraction!=null&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()}_onDrawStart(e,t){var ke;if(e.feature&&e.feature.getGeometry){var Oe=e.feature.getGeometry();t==="point"&&(ke=Oe.getCoordinates()),t==="circle"&&(ke=Oe.getCenter()),t==="polygon"&&(ke=Oe.getFirstCoordinate())}if(ke){var Ge;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Ge=this.options.reverseGeocodeOptions.srs;else{var Be=this.getMap();if(!Be||!Be.getView())return;Ge=Be.getView().getProjection()}var je=transform$1(ke,Ge,"EPSG:4326");this._requestPosition={lon:je[0],lat:je[1]},logger$l.log("position coordinates : ",this._requestPosition)}}_onBoxDrawEnd(e){if(e.feature&&e.feature.getGeometry){var t=e.feature.getGeometry().getCoordinates()[0],ke=t[0],Oe=t[2],Ge;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Ge=this.options.reverseGeocodeOptions.srs;else{var Be=this.getMap();if(!Be||!Be.getView())return;Ge=Be.getView().getProjection()}var je=transform$1(ke,Ge,"EPSG:4326"),Ve=transform$1(Oe,Ge,"EPSG:4326"),Ze={};je[0]<Ve[0]?(Ze.left=je[0],Ze.right=Ve[0]):(Ze.left=Ve[0],Ze.right=je[0]),je[1]<Ve[1]?(Ze.bottom=je[1],Ze.top=Ve[1]):(Ze.bottom=Ve[1],Ze.top=je[1]),this._requestGeom={type:"Polygon",coordinates:[[[Ze.left,Ze.top],[Ze.left,Ze.bottom],[Ze.right,Ze.bottom],[Ze.right,Ze.top],[Ze.left,Ze.top]]]},logger$l.log("searchGeometry filter : ",this._requestGeom)}}_setCursor(e,t){if(t=t||this.getMap(),!!t){var ke=t.getTargetElement();e?ke.style.cursor=e:ke.style.cursor=null}}_reverseGeocodingRequest(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),Gp$1.Services.reverseGeocode(this._requestOptions)}_getReverseGeocodingRequestOptions(){var e=this.getMap(),t=this.options.reverseGeocodeOptions,ke=this;typeof this.options.ssl!="boolean"&&(this.options.ssl=!0);var Oe=t.onFailure!==null&&typeof t.onFailure=="function",Ge=t.onSuccess!==null&&typeof t.onSuccess=="function",Be={apiKey:t.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:t.maximumResponses||18,timeOut:t.timeOut||3e4,onSuccess:function(je){je.locations&&(logger$l.log("reverseGeocode results : ",je.locations),ke._displayGeocodedLocations(je.locations)),Ge&&t.onSuccess.call(ke,je.locations)},onFailure:function(je){ke._hideWaitingContainer(),ke._clearResults(),ke._clearInputFeatures(),ke._activateMapInteraction(e),logger$l.log(je.message),Oe&&t.onFailure.call(ke,je)}};return this._requestGeom.type.toLowerCase()==="circle"?(this._requestGeom.radius>500&&(logger$l.log("INFO : initial circle radius ("+this._requestGeom.radius+") limited to 1000m."),this._requestGeom.radius=500),Be.searchGeometry=this._requestGeom):this._requestGeom.type.toLowerCase()==="polygon"?Be.searchGeometry=this._requestGeom:this._requestGeom.type.toLowerCase()==="point"&&(this._currentGeocodingType==="StreetAddress"?(Be.searchGeometry={type:"Circle",radius:50,coordinates:this._requestGeom.coordinates},Be.maximumResponses=1):Be.searchGeometry=this._requestGeom),logger$l.log("reverseGeocode request options : ",Be),Be}_displayGeocodedLocations(e){this._clearResults(),this._reverseGeocodingLocations=e,this.dispatchEvent({type:"reversegeocode:compute"}),this._formContainer.className="GPelementHidden gpf-hidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Résultats de la recherche",this._returnPictoContainer.classList.remove("GPelementHidden"),this._returnPictoContainer.classList.remove("gpf-hidden"),this._resultsContainer.className="GPpanel gpf-panel gpf-panel-reverse",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)}_fillGeocodedLocationListContainer(e){for(var t=0;t<e.length;t++){var ke=e[t];logger$l.log(ke);var Oe=this._fillGeocodedLocationDescription(ke);Oe&&Oe.length!==0&&this._createReverseGeocodingResultElement(Oe,t)}}_fillGeocodedLocationDescription(e){if(!(!e||!e.placeAttributes)){var t=e.placeAttributes,ke="";switch(e.type){case"StreetAddress":t.street&&(ke+=t.housenumber?t.housenumber+" ":"",ke+=t.street+", "),ke+=t.postcode+" "+t.city;break;case"PositionOfInterest":ke+=t.toponym,t.postcode&&t.postcode.length===1&&(ke+=", "+t.postcode[0]),ke+=" ("+t.category.join(",")+")";break;case"CadastralParcel":ke+=t.id,ke+=t.city?" ("+t.city+")":"";break;default:ke+=t.city?t.city:"";break}return ke}}_displayGeocodedLocationsOnMap(e){if(this._reverseGeocodingLocations.length!==0){var t=this.getMap();this._createResultsLayer();for(var ke=0;ke<e.length;ke++)this._addResultFeature(e[ke],ke);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var Oe=this._resultsFeaturesSource.getExtent();t.getView().fit(Oe,t.getSize())}}else{var Ge=this._resultsFeatures.item(0),Be=Ge.getGeometry().getCoordinates();t.getView().setCenter(Be),t.getView().setZoom(17)}this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",Ve=>this._onResultsFeatureMouseOver(Ve)),t.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",Ve=>this._onResultsFeatureSelect(Ve)),t.addInteraction(this._resultsSelectInteraction);var je="";switch(this._currentGeocodingType){case"StreetAddress":je="adresses";break;case"PositionOfInterest":je="toponymes";break;case"CadastralParcel":je="parcelles cadastrales";break}t.getControls().forEach(Ve=>{if(Ve instanceof LayerSwitcher){var Ze=this._resultsFeaturesLayer.gpLayerId;Ve._layers[Ze].title===Ze&&(Ve.addLayer(this._resultsFeaturesLayer,{title:"Résultats de la recherche inverse",description:"Résultats de la recherche inverse sur les "+je}),Ve.setRemovable(this._resultsFeaturesLayer,!1))}})}}_createResultsLayer(){var e=this.getMap();this._resultsFeatures=new Collection,this._resultsFeaturesSource=new VectorSource({features:this._resultsFeatures}),this._resultsFeaturesLayer=new VectorLayer({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)}_addResultFeature(e,t){var ke=this.getMap(),Oe=[e.position.lon,e.position.lat];if(Oe.length!==0){var Ge=ke.getView(),Be=Ge.getProjection().getCode();Be!=="EPSG:4326"&&(Oe=transform$1(Oe,"EPSG:4326",Be));var je=new Feature({geometry:new Point$1(Oe)});je.setStyle(this._resultsDefaultStyle),je.setId(t),je.setProperties({location:e,popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(je)}}_fillPopupContent(e){var t="<ul>",ke=e.placeAttributes;for(var Oe in ke)ke.hasOwnProperty(Oe)&&Oe!=="trueGeometry"&&Oe!=="extraFields"&&Oe!=="houseNumberInfos"&&Oe!=="_count"&&(t+="<li>",t+='<span class="gp-attname-others-span">'+Oe.toUpperCase()+" : </span>",t+=ke[Oe],t+=" </li>");return t+=" </ul>",t}_onResultsFeatureMouseOver(e){var t;if(e.selected.length!==0){if(t=e.selected[0],t.setStyle(this._resultsSelectedStyle),t.getId()!=null){var ke=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);ke&&ke.classList&&ke.classList.add("GPlocationHighlight")}document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid)}if(e.deselected.length!==0){t=e.deselected[0],t.setStyle(this._resultsDefaultStyle);var Oe=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);Oe&&Oe.classList&&Oe.classList.remove("GPlocationHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var ke=e.selected[0];this._popupContent.innerHTML=ke.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay)),this.dispatchEvent({type:"reversegeocode:onclickresult",location:ke.getProperties().location})}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}onShowReverseGeocodingClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();if(t){Interactions.unset(t);var ke=this._showReverseGeocodingButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),!this._waiting&&!this._reverseGeocodingLocations.length&&(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),this._inputFeaturesLayer!=null&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(t))}}onReverseGeocodingTypeChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value;ke&&(logger$l.log(ke),this._currentGeocodingType=ke)}onReverseGeocodingDelimitationChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value;if(ke){logger$l.log(ke),this._currentGeocodingDelimitation=ke;var Oe=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(Oe),this._activateMapInteraction(Oe)}}onGPreverseGeocodingReturnPictoClick(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())}onReverseGeocodingSubmit(){if(!this._requestPosition){logger$l.log("missing position");return}this._reverseGeocodingRequest()}onReverseGeocodingResultClick(e){var t=e.target.id,ke=t.substring(t.indexOf("_")+1),Oe=this._resultsFeaturesSource.getFeatureById(parseInt(ke,10));this.dispatchEvent({type:"reversegeocode:onclickresult",location:Oe.getProperties().location})}onReverseGeocodingResultMouseOver(e){var t=e.target.id,ke=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GPlocationHighlight"),!!this._resultsFeaturesSource){var Oe=this._resultsFeaturesSource.getFeatureById(parseInt(ke,10));Oe.setStyle(this._resultsSelectedStyle)}}onReverseGeocodingResultMouseOut(e){var t=e.target.id,ke=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GPlocationHighlight"),!!this._resultsFeaturesSource){var Oe=this._resultsFeaturesSource.getFeatureById(parseInt(ke,10));Oe.setStyle(this._resultsDefaultStyle)}}_clearResults(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_clearInputFeatures(){this._inputFeatures&&this._inputFeatures.clear(),this._requestGeom=null,this._requestPosition=null}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}};Object.assign(ReverseGeocode.prototype,ReverseGeocodeDOM);Object.assign(ReverseGeocode.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=ReverseGeocode);class XML{read(e){if(!e)return null;if(typeof e=="string"){const t=parse$1(e);return this.readFromDocument(t)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(r){return r.getAttributeNS(NAMESPACE_URI,"href")}const NAMESPACE_URIS$2=[null,"http://www.opengis.net/wms"],PARSERS$2=makeStructureNS(NAMESPACE_URIS$2,{Service:makeObjectPropertySetter(readService),Capability:makeObjectPropertySetter(readCapability)}),CAPABILITY_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Request:makeObjectPropertySetter(readRequest),Exception:makeObjectPropertySetter(readException),Layer:makeObjectPropertySetter(readCapabilityLayer)});class WMSCapabilities extends XML{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=pushParseAndPop({version:this.version},PARSERS$2,e,[]);return t||null}}const SERVICE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),OnlineResource:makeObjectPropertySetter(readHref),ContactInformation:makeObjectPropertySetter(readContactInformation),Fees:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),LayerLimit:makeObjectPropertySetter(readPositiveInteger),MaxWidth:makeObjectPropertySetter(readPositiveInteger),MaxHeight:makeObjectPropertySetter(readPositiveInteger)}),CONTACT_INFORMATION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPersonPrimary:makeObjectPropertySetter(readContactPersonPrimary),ContactPosition:makeObjectPropertySetter(readString),ContactAddress:makeObjectPropertySetter(readContactAddress),ContactVoiceTelephone:makeObjectPropertySetter(readString),ContactFacsimileTelephone:makeObjectPropertySetter(readString),ContactElectronicMailAddress:makeObjectPropertySetter(readString)}),CONTACT_PERSON_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPerson:makeObjectPropertySetter(readString),ContactOrganization:makeObjectPropertySetter(readString)}),CONTACT_ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{AddressType:makeObjectPropertySetter(readString),Address:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),StateOrProvince:makeObjectPropertySetter(readString),PostCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString)}),EXCEPTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeArrayPusher(readString)}),LAYER_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),CRS:makeObjectPropertyPusher(readString),EX_GeographicBoundingBox:makeObjectPropertySetter(readEXGeographicBoundingBox),BoundingBox:makeObjectPropertyPusher(readBoundingBox$1),Dimension:makeObjectPropertyPusher(readDimension),Attribution:makeObjectPropertySetter(readAttribution),AuthorityURL:makeObjectPropertyPusher(readAuthorityURL),Identifier:makeObjectPropertyPusher(readString),MetadataURL:makeObjectPropertyPusher(readMetadataURL),DataURL:makeObjectPropertyPusher(readFormatOnlineresource),FeatureListURL:makeObjectPropertyPusher(readFormatOnlineresource),Style:makeObjectPropertyPusher(readStyle$1),MinScaleDenominator:makeObjectPropertySetter(readDecimal),MaxScaleDenominator:makeObjectPropertySetter(readDecimal),Layer:makeObjectPropertyPusher(readLayer$1)}),ATTRIBUTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Title:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref),LogoURL:makeObjectPropertySetter(readSizedFormatOnlineresource)}),EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{westBoundLongitude:makeObjectPropertySetter(readDecimal),eastBoundLongitude:makeObjectPropertySetter(readDecimal),southBoundLatitude:makeObjectPropertySetter(readDecimal),northBoundLatitude:makeObjectPropertySetter(readDecimal)}),REQUEST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{GetCapabilities:makeObjectPropertySetter(readOperationType),GetMap:makeObjectPropertySetter(readOperationType),GetFeatureInfo:makeObjectPropertySetter(readOperationType)}),OPERATIONTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertyPusher(readString),DCPType:makeObjectPropertyPusher(readDCPType)}),DCPTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{HTTP:makeObjectPropertySetter(readHTTP)}),HTTP_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Get:makeObjectPropertySetter(readFormatOnlineresource),Post:makeObjectPropertySetter(readFormatOnlineresource)}),STYLE_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),LegendURL:makeObjectPropertyPusher(readSizedFormatOnlineresource),StyleSheetURL:makeObjectPropertySetter(readFormatOnlineresource),StyleURL:makeObjectPropertySetter(readFormatOnlineresource)}),FORMAT_ONLINERESOURCE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref)}),KEYWORDLIST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Keyword:makeArrayPusher(readString)});function readAttribution(r,e){return pushParseAndPop({},ATTRIBUTION_PARSERS,r,e)}function readBoundingBox$1(r,e){const t=[readDecimalString(r.getAttribute("minx")),readDecimalString(r.getAttribute("miny")),readDecimalString(r.getAttribute("maxx")),readDecimalString(r.getAttribute("maxy"))],ke=[readDecimalString(r.getAttribute("resx")),readDecimalString(r.getAttribute("resy"))];return{crs:r.getAttribute("CRS"),extent:t,res:ke}}function readEXGeographicBoundingBox(r,e){const t=pushParseAndPop({},EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS,r,e);if(!t)return;const ke=t.westBoundLongitude,Oe=t.southBoundLatitude,Ge=t.eastBoundLongitude,Be=t.northBoundLatitude;if(!(ke===void 0||Oe===void 0||Ge===void 0||Be===void 0))return[ke,Oe,Ge,Be]}function readCapability(r,e){return pushParseAndPop({},CAPABILITY_PARSERS,r,e)}function readService(r,e){return pushParseAndPop({},SERVICE_PARSERS,r,e)}function readContactInformation(r,e){return pushParseAndPop({},CONTACT_INFORMATION_PARSERS,r,e)}function readContactPersonPrimary(r,e){return pushParseAndPop({},CONTACT_PERSON_PARSERS,r,e)}function readContactAddress(r,e){return pushParseAndPop({},CONTACT_ADDRESS_PARSERS,r,e)}function readException(r,e){return pushParseAndPop([],EXCEPTION_PARSERS,r,e)}function readCapabilityLayer(r,e){const t=pushParseAndPop({},LAYER_PARSERS$1,r,e);return t.Layer===void 0?Object.assign(t,readLayer$1(r,e)):t}function readLayer$1(r,e){const t=e[e.length-1],ke=pushParseAndPop({},LAYER_PARSERS$1,r,e);if(!ke)return;let Oe=readBooleanString(r.getAttribute("queryable"));Oe===void 0&&(Oe=t.queryable),ke.queryable=Oe!==void 0?Oe:!1;let Ge=readNonNegativeIntegerString(r.getAttribute("cascaded"));Ge===void 0&&(Ge=t.cascaded),ke.cascaded=Ge;let Be=readBooleanString(r.getAttribute("opaque"));Be===void 0&&(Be=t.opaque),ke.opaque=Be!==void 0?Be:!1;let je=readBooleanString(r.getAttribute("noSubsets"));je===void 0&&(je=t.noSubsets),ke.noSubsets=je!==void 0?je:!1;let Ve=readDecimalString(r.getAttribute("fixedWidth"));Ve||(Ve=t.fixedWidth),ke.fixedWidth=Ve;let Ze=readDecimalString(r.getAttribute("fixedHeight"));return Ze||(Ze=t.fixedHeight),ke.fixedHeight=Ze,["Style","CRS","AuthorityURL"].forEach(function(tn){if(tn in t){const an=ke[tn]||[];ke[tn]=an.concat(t[tn])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(tn){if(!(tn in ke)){const an=t[tn];ke[tn]=an}}),ke}function readDimension(r,e){return{name:r.getAttribute("name"),units:r.getAttribute("units"),unitSymbol:r.getAttribute("unitSymbol"),default:r.getAttribute("default"),multipleValues:readBooleanString(r.getAttribute("multipleValues")),nearestValue:readBooleanString(r.getAttribute("nearestValue")),current:readBooleanString(r.getAttribute("current")),values:readString(r)}}function readFormatOnlineresource(r,e){return pushParseAndPop({},FORMAT_ONLINERESOURCE_PARSERS,r,e)}function readRequest(r,e){return pushParseAndPop({},REQUEST_PARSERS,r,e)}function readDCPType(r,e){return pushParseAndPop({},DCPTYPE_PARSERS,r,e)}function readHTTP(r,e){return pushParseAndPop({},HTTP_PARSERS$1,r,e)}function readOperationType(r,e){return pushParseAndPop({},OPERATIONTYPE_PARSERS,r,e)}function readSizedFormatOnlineresource(r,e){const t=readFormatOnlineresource(r,e);if(t){const ke=[readNonNegativeIntegerString(r.getAttribute("width")),readNonNegativeIntegerString(r.getAttribute("height"))];return t.size=ke,t}}function readAuthorityURL(r,e){const t=readFormatOnlineresource(r,e);if(t)return t.name=r.getAttribute("name"),t}function readMetadataURL(r,e){const t=readFormatOnlineresource(r,e);if(t)return t.type=r.getAttribute("type"),t}function readStyle$1(r,e){return pushParseAndPop({},STYLE_PARSERS$1,r,e)}function readKeywordList(r,e){return pushParseAndPop([],KEYWORDLIST_PARSERS,r,e)}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const t=pushParseAndPop({},PARSERS$1,e,[]);return t||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(r,e){return pushParseAndPop({},ADDRESS_PARSERS,r,e)}function readAllowedValues(r,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,r,e)}function readConstraint(r,e){const t=r.getAttribute("name");if(t)return pushParseAndPop({name:t},CONSTRAINT_PARSERS,r,e)}function readContactInfo(r,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,r,e)}function readDcp(r,e){return pushParseAndPop({},DCP_PARSERS,r,e)}function readGet(r,e){const t=readHref(r);if(t)return pushParseAndPop({href:t},REQUEST_METHOD_PARSERS,r,e)}function readHttp(r,e){return pushParseAndPop({},HTTP_PARSERS,r,e)}function readOperation(r,e){const t=r.getAttribute("name"),ke=pushParseAndPop({},OPERATION_PARSERS,r,e);if(!ke)return;const Oe=e[e.length-1];Oe[t]=ke}function readOperationsMetadata(r,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,r,e)}function readPhone(r,e){return pushParseAndPop({},PHONE_PARSERS,r,e)}function readServiceIdentification(r,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,r,e)}function readServiceContact(r,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,r,e)}function readServiceProvider(r,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,r,e)}function readValue(r,e){return readString(r)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let ke=this.owsParser_.readFromNode(e);return ke?(ke.version=t,ke=pushParseAndPop(ke,PARSERS,e,[]),ke||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(r,e){return pushParseAndPop({},CONTENTS_PARSERS,r,e)}function readLayer(r,e){return pushParseAndPop({},LAYER_PARSERS,r,e)}function readTileMatrixSet(r,e){return pushParseAndPop({},TMS_PARSERS,r,e)}function readStyle(r,e){const t=pushParseAndPop({},STYLE_PARSERS,r,e);if(!t)return;const ke=r.getAttribute("isDefault")==="true";return t.isDefault=ke,t}function readTileMatrixSetLink(r,e){return pushParseAndPop({},TMS_LINKS_PARSERS,r,e)}function readDimensions(r,e){return pushParseAndPop({},DIMENSION_PARSERS,r,e)}function readResourceUrl(r,e){const t=r.getAttribute("format"),ke=r.getAttribute("template"),Oe=r.getAttribute("resourceType"),Ge={};return t&&(Ge.format=t),ke&&(Ge.template=ke),Oe&&(Ge.resourceType=Oe),Ge}function readBoundingBox(r,e){const t=pushParseAndPop([],WGS84_BBOX_READERS,r,e);if(t.length==2)return boundingExtent(t)}function readLegendUrl(r,e){const t={};return t.format=r.getAttribute("format"),t.href=readHref(r),t}function readCoordinates(r,e){const t=readString(r).split(/\s+/);if(!t||t.length!=2)return;const ke=+t[0],Oe=+t[1];if(!(isNaN(ke)||isNaN(Oe)))return[ke,Oe]}function readTileMatrix(r,e){return pushParseAndPop({},TM_PARSERS,r,e)}function readTileMatrixLimitsList(r,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,r,e)}function readTileMatrixLimits(r,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,r,e)}var eventbus_min={exports:{}};(function(r,e){(function(t,ke){r.exports=ke()})(commonjsGlobal,function(){var t={};t=function(){this.listeners={}},t.prototype={addEventListener:function(Oe,Ge,Be){for(var je=[],Ve=arguments.length,Ze=0;Ze<Ve;Ze++)je.push(arguments[Ze]);je=je.length>3?je.splice(3,je.length-1):[],typeof this.listeners[Oe]<"u"?this.listeners[Oe].push({scope:Be,callback:Ge,args:je}):this.listeners[Oe]=[{scope:Be,callback:Ge,args:je}]},removeEventListener:function(Oe,Ge,Be){if(typeof this.listeners[Oe]<"u"){for(var je=this.listeners[Oe].length,Ve=[],Ze=0;Ze<je;Ze++){var Qe=this.listeners[Oe][Ze];Qe.scope==Be&&Qe.callback==Ge||Ve.push(Qe)}this.listeners[Oe]=Ve}},hasEventListener:function(Oe,Ge,Be){if(typeof this.listeners[Oe]<"u"){var je=this.listeners[Oe].length;if(Ge===void 0&&Be===void 0)return je>0;for(var Ve=0;Ve<je;Ve++){var Ze=this.listeners[Oe][Ve];if((!Be||Ze.scope==Be)&&Ze.callback==Ge)return!0}}return!1},dispatch:function(Oe,Ge){for(var Be={type:Oe,target:Ge},je=[],Ve=arguments.length,Ze=0;Ze<Ve;Ze++)je.push(arguments[Ze]);if(je=je.length>2?je.splice(2,je.length-1):[],je=[Be].concat(je),typeof this.listeners[Oe]<"u")for(var Qe=this.listeners[Oe].slice(),en=Qe.length,Ze=0;Ze<en;Ze++){var tn=Qe[Ze];if(tn&&tn.callback){var an=je.concat(tn.args);tn.callback.apply(tn.scope,an)}}},getEvents:function(){var Oe="";for(var Ge in this.listeners)for(var Be=this.listeners[Ge].length,je=0;je<Be;je++){var Ve=this.listeners[Ge][je];Oe+=Ve.scope&&Ve.scope.className?Ve.scope.className:"anonymous",Oe+=" listen for '"+Ge+`'
`}return Oe}};var ke=new t;return ke})})(eventbus_min);var eventbus_minExports=eventbus_min.exports;const EventBus=getDefaultExportFromCjs$1(eventbus_minExports);var EventEditor={onloaded:"editor:onloaded",layer:{onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},legend:{onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},group:{oncollapse:"editor:group:oncollapse"},style:{oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},filter:{oneditjson:"editor:filter:oneditjson"},themes:{onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"},search:{onsubmit:"editor:search:onsubmit",onautocomplete:"editor:search:onautocomplete"}},logger$k=LoggerByDefault.getLogger("editor-style");class Style{constructor(e){if(logger$k.trace("[constructor] Style",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Style))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={scale:!0,edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}}_initContainer(){var e=this,t=!1,ke=JSON.parse(JSON.stringify(this.options.obj)),Oe={};ke.paint&&(t=!0,Oe.paint=ke.paint,Object.keys(ke.paint).length===0&&logger$k.info("tag 'paint' is empty !")),ke.layout&&(t=!0,Oe.layout=ke.layout,ke.layout.visibility&&delete Oe.visibility,Object.keys(ke.layout).length===0&&logger$k.info("tag 'layout' is empty !"));var Ge=document.createElement("div");Ge.className=this.name.container;var Be=null;if(t){var je=JSON.stringify(Oe,null,4);Be=this._syntaxHighlight(je)}var Ve=document.createElement("div");Ve.className=this.name.containerjson;var Ze=document.createElement("label");Ze.className=this.name.jsonlabel,Ze.innerHTML=this.options.title,Ve.appendChild(Ze);var Qe=document.createElement("pre");Qe.className=this.name.jsondisplay,Qe.innerHTML=Be,Qe.addEventListener?Qe.addEventListener("click",function(en){e.options.tools.edition&&e.onEditJsonStyleMapBox(en)}):Qe.attachEvent&&Qe.attachEvent("onclick",function(en){e.options.tools.edition&&e.onEditJsonStyleMapBox(en)}),Ve.appendChild(Qe),Ge.appendChild(Ve),this.options.tools.scale&&Ge.appendChild(this._createElementToolsScale({min:Oe.layout?Oe.layout.minzoom:0,max:Oe.layout?Oe.layout.maxzoom:21})),this.options.tools.edition&&Ge.appendChild(this._createElementToolsEdition()),this.container=Ge}_createElementToolsScale(e){logger$k.trace("_createElementToolsScale");var t=this,ke=this.options.obj,Oe=document.createElement("div");Oe.className=this.name.containertoolsscale;var Ge=document.createElement("div");Ge.className=this.name.containertoolsminscale;var Be=document.createElement("label");Be.className=this.name.scalelabelmin,Be.innerHTML="min :",Ge.appendChild(Be);var je=document.createElement("input");je.className=this.name.scaleinputmin,je.type="range",je.value=e.min||0,je.title=e.min||0,je.disabled=!1,je.min=0,je.max=21,je.data=ke,je.addEventListener?je.addEventListener("change",function(en){t.onChangeStyleScaleMinMapBox(en)}):je.appendChild&&je.appendChild("onchange",function(en){t.onChangeStyleScaleMinMapBox(en)}),Ge.appendChild(je),Oe.appendChild(Ge);var Ve=document.createElement("div");Ve.className=this.name.containertoolsmaxscale;var Ze=document.createElement("label");Ze.className=this.name.scalelabelmax,Ze.innerHTML="max :",Ve.appendChild(Ze);var Qe=document.createElement("input");return Qe.className=this.name.scaleinputmin,Qe.type="range",Qe.value=e.max||21,Qe.title=e.max||21,Qe.disabled=!1,Qe.min=0,Qe.max=21,Qe.data=ke,Qe.addEventListener?Qe.addEventListener("change",function(en){t.onChangeStyleScaleMaxMapBox(en)}):Qe.appendChild&&Qe.appendChild("onchange",function(en){t.onChangeStyleScaleMaxMapBox(en)}),Ve.appendChild(Qe),Oe.appendChild(Ve),Oe}_createElementToolsEdition(){logger$k.warn("_createElementToolsEdition, it's not yet implemented !");var e=document.createElement("div");return e.className=this.name.containertoolsedit,e}_syntaxHighlight(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(t){var ke="gp-json-number";return/^"/.test(t)?/:$/.test(t)?ke="gp-json-key":ke="gp-json-string":/true|false/.test(t)?ke="gp-json-boolean":/null/.test(t)&&(ke="gp-json-null"),"<span class='"+ke+"'>"+t+"</span>"})}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$k.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonStyleMapBox(e){logger$k.trace("onEditJsonStyleMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.oneditjson,e)}onChangeStyleScaleMinMapBox(e){logger$k.trace("onChangeStyleScaleMinMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemin,e)}onChangeStyleScaleMaxMapBox(e){logger$k.trace("onChangeStyleScaleMaxMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemax,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Style=Style);var logger$j=LoggerByDefault.getLogger("editor-themes");class Themes{constructor(e){if(logger$j.trace("[constructor] Themes",e),this.options=e||{},!(this instanceof Themes))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={thumbnails:!0,button:{visible:!0,type:"radio"}};(!this.options.tools||Object.keys(this.options.tools).length===0)&&(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),(typeof this.options.obj>"u"||this.options.obj===null||!this.options.obj)&&(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}}_initContainer(){var e=this,t=this.options.obj,ke=this.id||SelectorID.generate(),Oe=document.createElement("div");Oe.className=this.name.container,Oe.title=t.themesSummary||"";var Ge=t.themes;if(Ge)for(var Be=0;Be<Ge.length;Be++){var je=Ge[Be],Ve=document.createElement("div");Ve.id=this.name.containerthemeID+Be+"_"+ke,Ve.className=this.name.containertheme,Ve.tabIndex=Be;var Ze=je.url,Qe=je.selected||!1;if(Ze){var en=this.options.tools.button;if(en.visible){var tn=en.type==="checkbox"?"checkbox":"radio",an=document.createElement("input");an.type=tn,an.id=this.name.inputID+Be+"_"+ke,an.className=this.name.input,an.name=ke,an.checked=Qe,an.data=Ze,an.addEventListener?an.addEventListener("click",function(fn){e.onClickThemeTitleMapBox(fn)}):an.attachEvent&&an.attachEvent("onclick",function(fn){e.onClickThemeTitleMapBox(fn)}),Ve.appendChild(an)}if(this.options.tools.thumbnails&&je.thumbnail){var cn=document.createElement("img");cn.id=this.name.imageID+Be+"_"+ke,cn.className=this.name.image,cn.src=je.thumbnail,cn.alt=je.thumbnail,cn.title=je.description||"",cn.data=Ze,cn.addEventListener?cn.addEventListener("click",function(fn){e.onClickThemeImageMapBox(fn);var pn=fn.target.parentElement.childNodes;if(pn){var mn=pn[0];mn.tagName.toLowerCase()==="input"&&(mn.checked=!mn.checked)}}):cn.attachEvent&&cn.attachEvent("onclick",function(fn){e.onClickThemeImageMapBox(fn);var pn=fn.target.parentElement.childNodes;if(pn){var mn=pn[0];mn.tagName.toLowerCase()==="input"&&(mn.checked=!mn.checked)}}),Ve.appendChild(cn)}if(je.name){var dn=document.createElement("label");dn.id=this.name.labelID+Be+"_"+ke,this.options.tools.button.visible&&(dn.htmlFor=an.id),dn.className=this.name.label,dn.innerHTML=je.name,dn.title=je.description||"",dn.data=Ze,this.options.tools.button.visible||(dn.addEventListener?dn.addEventListener("click",function(fn){e.onClickThemeTitleMapBox(fn)}):dn.attachEvent&&dn.attachEvent("onclick",function(fn){e.onClickThemeTitleMapBox(fn)})),Ve.appendChild(dn)}}else{var hn=document.createElement("label");hn.className=this.name.message,hn.innerHTML="Thème non disponible...",Ve.appendChild(hn)}Oe.appendChild(Ve)}this.container=Oe}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$j.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onClickThemeImageMapBox(e){if(logger$j.trace("onClickThemeImageMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.previousSibling.id.substring(e.target.previousSibling.id.lastIndexOf("_")+1),ke=document.getElementsByClassName(this.name.input),Oe=0;Oe<ke.length;Oe++){var Ge=ke[Oe];if(Ge.id!==e.target.previousSibling.id){var Be=Ge.id.substring(Ge.id.lastIndexOf("_")+1);Be===t&&(Ge.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclickimage,e)}onClickThemeTitleMapBox(e){if(logger$j.trace("onClickThemeTitleMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.id.substring(e.target.id.lastIndexOf("_")+1),ke=document.getElementsByClassName(this.name.input),Oe=0;Oe<ke.length;Oe++){var Ge=ke[Oe];if(Ge.id!==e.target.id){var Be=Ge.id.substring(Ge.id.lastIndexOf("_")+1);Be===t&&(Ge.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclicktitle,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Themes=Themes);var logger$i=LoggerByDefault.getLogger("editor-filter");class Filter{constructor(e){if(logger$i.trace("[constructor] Filter",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Filter))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}}_initContainer(){var e=this,t=!1,ke=JSON.parse(JSON.stringify(this.options.obj));ke.filter&&(t=!0,ke.filter.length===0&&logger$i.info("tag 'filter' is empty !"));var Oe=document.createElement("div");Oe.className=this.name.container;var Ge=null;t&&(Ge=JSON.stringify(ke.filter,null,4));var Be=document.createElement("div");Be.className=this.name.containerjson;var je=document.createElement("label");je.className=this.name.jsonlabel,je.innerHTML=this.options.title,Be.appendChild(je);var Ve=document.createElement("pre");if(Ve.className=this.name.jsondisplay,Ve.innerHTML=Ge,Ve.addEventListener?Ve.addEventListener("click",function(Qe){e.options.tools.edition&&e.onEditJsonFilterMapBox(Qe)}):Ve.attachEvent&&Ve.attachEvent("onclick",function(Qe){e.options.tools.edition&&e.onEditJsonFilterMapBox(Qe)}),Be.appendChild(Ve),Oe.appendChild(Be),this.options.tools.edition){var Ze=document.createElement("div");Ze.className=this.name.containertoolsedit,Oe.appendChild(Ze)}this.container=Oe}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$i.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonFilterMapBox(e){logger$i.trace("onEditJsonFilterMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.filter.oneditjson,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Filter=Filter);var logger$h=LoggerByDefault.getLogger("editor-legend");class Legend{constructor(e){if(logger$h.trace("[constructor] Legend",e),this.options=e||{target:null,position:0,sprites:null,obj:null},!(this instanceof Legend))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var e=this.options.obj.editable;this.editable=typeof e<"u"?e:!1,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"Opacité du trait","fill-color":"Couleur de remplissage","fill-opacity":"Opacité du remplissage"}}_initContainer(){var e=this.options.obj,t=document.createElement("div");t.className=this.name.container;var ke=Object.assign({},e.paint,e.layout),Oe=Object.keys(ke);if(Oe.length===0){logger$h.info("tag 'paint' or 'layout' is empty !");return}for(var Ge={},Be=!1,je=0;je<Oe.length;je++){var Ve=Oe[je];if(/fill-/.test(Ve)||/line-/.test(Ve)||/circle-/.test(Ve)||/background-/.test(Ve)||/text-/.test(Ve)||/icon-/.test(Ve)){Be=!0;var Ze=e.title||"",Qe=Ve.split("-")[0];(Qe==="text"||Qe==="icon")&&(Qe="symbol"),this.legendRender=this._getProperties(Qe,ke),Ge={edit:this.editable,title:Ze,type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(Ge));break}}Be||(Ge={edit:this.editable,title:"",type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(Ge)),logger$h.warn("legend type unknown, default legend used...")),this.toolscontainer=this._createElementEditionLegend(Ge),t.appendChild(this.toolscontainer),this.container=t}_getProperties(e,t){if(e==="symbol"){var ke=t["text-field"],Oe=t["icon-image"];if(e=ke&&Oe?"icon":ke?"text":Oe?"icon":"unknow",e==="unknow"){logger$h.warn("type unknow !?");return}}var Ge={};for(const Ze in t)if(Object.hasOwnProperty.call(t,Ze)){const Qe=t[Ze];if(Legend.PROPERTIES[e].includes(Ze)){var Be=Ze.replace(e,"").slice(1),je=this._getValue(Qe);if(je){if((Be==="pattern"||Be==="image")&&(!this.options.sprites||!this.options.sprites.json||!this.options.sprites.json[je])){var Ve=e+":"+Be;logger$h.warn("sprites mandatory for key ",Ve);break}Ge[Be]=je}}else logger$h.warn("property not supported : ",Ze)}return{type:e,values:Ge}}_renderThumbnail(e,t){var ke=this.rendercontainer;if(!ke)return!1;var Oe=null,Ge=3;switch(t.color||(t.color="#FFFFFF"),e){case"text":var Be="font-size: 5em;font-weight: bold;";Oe=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' dominant-baseline='central' style='%style%'> T </text></svg>")`,ke.style.background=Oe.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%style%",Be);break;case"icon":if(t.image)Oe="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.image].x).replace("%y%",this.options.sprites.json[t.image].y).replace(/%w%/g,this.options.sprites.json[t.image].width).replace(/%h%/g,this.options.sprites.json[t.image].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),ke.innerHTML=Oe;else{var je="fill: transparent;stroke-width: 10;";Oe=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>")`,ke.style.background=Oe.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%style%",je)}break;case"line":var Ve=Array.isArray(t.dasharray)?t.dasharray.join(" "):0;Oe=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><line x1='0' y1='100' x2='100' y2='0' stroke='%color%' stroke-width='%stroke-width%' stroke-opacity='%stroke-opacity%' stroke-dasharray='%stroke-dasharray%' /></svg>")`,ke.style.background=Oe.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%stroke-opacity%",t.opacity||1).replace("%stroke-dasharray%",Ve).replace("%stroke-width%",(t.width||0)*Ge);break;case"circle":var Ze=t["stroke-color"]||"#FFFFFF";Oe=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke-color%' stroke-width='%stroke-width%' stroke-opacity='%strock-opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>")`,ke.style.background=Oe.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",Ze.indexOf("rgb")===0?Ze:ColorUtils.hexToRgba(Ze,1)).replace("%stroke-opacity%",t["stroke-opacity"]||1).replace("%stroke-width%",(t["stroke-width"]||0)*Ge);break;case"background":case"fill":if(t.pattern)Oe="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.pattern].x).replace("%y%",this.options.sprites.json[t.pattern].y).replace(/%w%/g,this.options.sprites.json[t.pattern].width).replace(/%h%/g,this.options.sprites.json[t.pattern].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),ke.innerHTML=Oe;else{var Qe=t["outline-color"]||"#FFFFFF";Oe=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' stroke='%stroke-color%' stroke-width='3' fill='%color%' fill-opacity='%opacity%' /></svg>")`,ke.style.background=Oe.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",Qe.indexOf("rgb")===0?Qe:ColorUtils.hexToRgba(Qe,1))}break;default:return logger$h.warn("type not found, no thumbnail..."),!1}return!0}_getValue(e){var t=null;if(typeof e=="string")t=e;else if(typeof e=="number")t=e;else if(Array.isArray(e)){var ke=!0;e.forEach(Ge=>{typeof Ge!="number"&&(ke=!1)}),ke&&(t=e)}else if(typeof e=="object"){if(t=null,"stops"in e){e.stops.sort((Ge,Be)=>{var je=Ge[0],Ve=Be[0];return je>Ve?-1:je<Ve?1:0});var Oe=e.stops.slice(-1);t=Oe[0][1]}}else logger$h.warn("value not supported !");return t}_createElementIconLegend(e){var t=this,ke=document.createElement("div");ke.className=this.name.containerlegendrender;var Oe=this.rendercontainer=document.createElement("div");Oe.className=this.name.legendrender,e.edit&&(Oe.className+=" ",Oe.className+=this.name.legendeditable,Oe.addEventListener?Oe.addEventListener("click",function(je){t.onEditionLegendMapBox(je)}):Oe.attachEvent&&Oe.attachEvent("onclick",function(je){t.onEditionLegendMapBox(je)}));var Ge=e.type;this._renderThumbnail(Ge,e.values)?Oe.className+=e.edit?" legend-"+Ge:" legend-"+Ge+"-not-editable":Oe.className+=" legend-unknow",ke.appendChild(Oe);var Be=document.createElement("span");return Be.className=this.name.legendtitle,Be.innerHTML=e.title||"",ke.appendChild(Be),ke}_createElementEditionLegend(e){var t=this,ke=document.createElement("div");if(ke.className=this.name.containerlegendtools,!e.edit)return ke;switch(e.type){case"line":Oe.call(t),Ge.call(t),Be.call(t);break;case"background":case"fill":je.call(t),Ve.call(t);break}function Oe(){var Ze=document.createElement("div");Ze.className="legend-styling-div";var Qe=document.createElement("label");Qe.className="legend-line",Qe.htmlFor=this.id?"line-color-"+this.id:"line-color",Qe.innerHTML=this.labels["line-color"];var en=document.createElement("input");en.className="legend-styling",en.id=this.id?"line-color-"+this.id:"line-color",en.title="Selectionner une couleur de trait",en.type="color",en.value=e.values.color,en.setAttribute("data-id","line-color"),en.addEventListener?en.addEventListener("change",function(tn){t._renderThumbnail(e.type,Object.assign(e.values,{color:tn.target.value})),t.onChangeValueLegendMapBox(tn)}):en.attachEvent&&en.attachEvent("onchange",function(tn){t._renderThumbnail(e.type,Object.assign(e.values,{color:tn.target.value})),t.onChangeValueLegendMapBox(tn)}),Ze.appendChild(Qe),Ze.appendChild(en),ke.appendChild(Ze)}function Ge(){var Ze=document.createElement("div");Ze.className="legend-styling-div";var Qe=document.createElement("label");Qe.className="legend-line",Qe.htmlFor=this.id?"line-width-"+this.id:"line-width",Qe.innerHTML=this.labels["line-width"];var en=document.createElement("input");en.className="legend-styling",en.id=this.id?"line-width-"+this.id:"line-width",en.title=e.values.width,en.type="range",en.min="0",en.max="10",en.step="1",en.defaultValue=e.values.width,en.setAttribute("data-id","line-width"),en.addEventListener?en.addEventListener("change",function(tn){logger$h.trace(tn),tn.target.title=tn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:tn.target.value})),t.onChangeValueLegendMapBox(tn)}):en.attachEvent&&en.attachEvent("onchange",function(tn){logger$h.trace(tn),tn.target.title=tn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:tn.target.value})),t.onChangeValueLegendMapBox(tn)}),Ze.appendChild(Qe),Ze.appendChild(en),ke.appendChild(Ze)}function Be(){var Ze=document.createElement("div");Ze.className="legend-styling-div";var Qe=document.createElement("label");Qe.className="legend-line",Qe.htmlFor=this.id?"line-opacity-"+this.id:"line-opacity",Qe.innerHTML=this.labels["line-opacity"];var en=document.createElement("input");en.className="legend-styling",en.id=this.id?"line-opacity-"+this.id:"line-opacity",en.title=e.values.opacity,en.type="range",en.min="0",en.max="1",en.step="0.1",en.defaultValue=e.values.opacity,en.setAttribute("data-id","line-opacity"),en.addEventListener?en.addEventListener("change",function(tn){logger$h.trace(tn),tn.target.title=tn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:tn.target.value})),t.onChangeValueLegendMapBox(tn)}):en.attachEvent&&en.attachEvent("onchange",function(tn){logger$h.trace(tn),tn.target.title=tn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:tn.target.value})),t.onChangeValueLegendMapBox(tn)}),Ze.appendChild(Qe),Ze.appendChild(en),ke.appendChild(Ze)}function je(){var Ze=document.createElement("div");Ze.className="legend-styling-div";var Qe=document.createElement("label");Qe.className="legend-fill",Qe.htmlFor=this.id?"fill-color-"+this.id:"fill-color",Qe.innerHTML=this.labels["fill-color"];var en=document.createElement("input");en.className="legend-styling",en.id=this.id?"fill-color-"+this.id:"fill-color",en.title="Selectionner une couleur de remplissage",en.type="color",en.value=e.values.color,en.setAttribute("data-id","fill-color"),en.addEventListener?en.addEventListener("change",function(tn){t._renderThumbnail(e.type,Object.assign(e.values,{color:tn.target.value})),t.onChangeValueLegendMapBox(tn)}):en.attachEvent&&en.attachEvent("onchange",function(tn){t._renderThumbnail(e.type,Object.assign(e.values,{color:tn.target.value})),t.onChangeValueLegendMapBox(tn)}),Ze.appendChild(Qe),Ze.appendChild(en),ke.appendChild(Ze)}function Ve(){var Ze=document.createElement("div");Ze.className="legend-styling-div";var Qe=document.createElement("label");Qe.className="legend-fill",Qe.htmlFor=this.id?"fill-opacity-"+this.id:"fill-opacity",Qe.innerHTML=this.labels["fill-opacity"];var en=document.createElement("input");en.className="legend-styling",en.id=this.id?"fill-opacity-"+this.id:"fill-opacity",en.title=e.values.opacity,en.type="range",en.min="0",en.max="1",en.step="0.1",en.defaultValue=e.values.opacity,en.setAttribute("data-id","fill-opacity"),en.addEventListener?en.addEventListener("change",function(tn){tn.target.title=tn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:tn.target.value})),t.onChangeValueLegendMapBox(tn)}):en.attachEvent&&en.attachEvent("onchange",function(tn){tn.target.title=tn.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:tn.target.value})),t.onChangeValueLegendMapBox(tn)}),Ze.appendChild(Qe),Ze.appendChild(en),ke.appendChild(Ze)}return ke}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$h.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}isEditable(){return this.editable}getRenderContainer(){return this.rendercontainer}getToolsContainer(){return this.toolscontainer}getContainer(){return this.container}onEditionLegendMapBox(e){logger$h.trace("onEditionLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onclickedition,e)}onChangeValueLegendMapBox(e){logger$h.trace("onChangeValueLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onchangevalue,e)}}Legend.PROPERTIES={line:["line-color","line-dasharray","line-opacity","line-width"],fill:["fill-color","fill-opacity","fill-outline-color","fill-pattern"],background:["background-color","background-opacity","background-pattern"],circle:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"],icon:["icon-color","icon-image","icon-opacity","__icon-size"],text:["__text-anchor","text-color","text-field","__text-font","__text-opacity","__text-size"]};window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Legend=Legend);var logger$g=LoggerByDefault.getLogger("editor-layer");class Layer{constructor(e){if(logger$g.trace("[constructor] Layer",e),this.options=e||{},!(this instanceof Layer))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1);var t={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=t),Helper.mergeParams(this.options.obj,t,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}}_initContainer(){var e=this,t=this.options.obj,ke=document.createElement("div");ke.className=this.name.container;var Oe=document.createElement("div");if(Oe.id=this.name.containertitle+"-"+this.options.position,Oe.className=this.name.containertitle,this.options.tools.pin){var Ge=document.createElement("input");Ge.id=this.name.imagelabelinput+"-"+this.options.position,Ge.className=this.name.imagelabelinput,Ge.type="checkbox",Oe.appendChild(Ge);var Be=document.createElement("label");Be.className=this.name.imagelabel,Be.htmlFor=Ge.id,Be.addEventListener?Be.addEventListener("click",function(tn){e.onClickLayerMapBox(tn)}):Be.attachEvent&&Be.attachEvent("onclick",function(tn){e.onClickLayerMapBox(tn)}),Oe.appendChild(Be)}var je=function(){var tn=document.createElement("div");if(tn.id=this.name.containertools+"-"+this.options.position,tn.className=this.name.containertools,this.options.tools.visibility){var an=document.createElement("input");an.id=this.name.visibilityinput+"-"+this.options.position,an.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,an.type="checkbox",an.checked="checked",an.addEventListener?an.addEventListener("click",function(dn){e.onVisibilityLayerMapBox(dn)}):an.attachEvent&&an.attachEvent("onclick",function(dn){e.onVisibilityLayerMapBox(dn)}),tn.appendChild(an),this.DomVisibility=an;var cn=document.createElement("label");cn.htmlFor=this.name.visibilityinput+"-"+this.options.position,cn.id=this.name.visibilitylabel+"-"+this.options.position,cn.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,cn.title="Afficher/masquer la couche",tn.appendChild(cn),ke.appendChild(tn)}this.options.tools.clone&&logger$g.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&logger$g.warn("Dom for tools remove, it's not yet implemented !")};if(this.options.tools.icon.anchor==="start"&&je.apply(this),this.options.tools.type&&t.type){var Ve=document.createElement("img");switch(Ve.className=this.name.typeimg,t.type.toUpperCase()){case"SYMBOL-ICON":Ve.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":Ve.style["background-position"]="-194px 0";break;case"SYMBOL":Ve.style["background-position"]="-84px 0";break;case"LINE":Ve.style["background-position"]="-28px 0";break;case"FILL":Ve.style["background-position"]="-56px 0";break;case"BACKGROUND":Ve.style["background-position"]="-140px 0";break;case"CIRCLE":Ve.style["background-position"]="-168px 0";break;default:Ve.style["background-position"]="-112px 0"}Oe.appendChild(Ve)}var Ze=document.createElement("div");Ze.id=this.name.containerlegend+"-"+this.options.position,Ze.className=this.name.containerlegend,Oe.appendChild(Ze);var Qe=document.createElement("input");Qe.id=this.name.titleinput+"-"+this.options.position,Qe.className=this.name.titleinput,Qe.type="checkbox",Oe.appendChild(Qe);var en=document.createElement("label");en.className=this.name.titlelabel,en.htmlFor=Qe.id,en.innerHTML=t.id||t["source-layer"]||t.source,en.title=t["source-layer"]||t.source||t.id,en.addEventListener?en.addEventListener("click",function(tn){e.onClickLayerMapBox(tn)}):en.attachEvent&&en.attachEvent("onclick",function(tn){e.onClickLayerMapBox(tn)}),Oe.appendChild(en),this.DomToggle=en,ke.appendChild(Oe),this.options.tools.icon.anchor==="end"&&je.apply(this),this.container=ke}add(){if(logger$g.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}addStyle(e){logger$g.trace("addStyle()",e),e&&typeof e=="object"&&e instanceof Style&&(this.oStyle=e,this.oStyle.display(!1))}addFilter(e){logger$g.trace("addFilter()",e),e&&typeof e=="object"&&e instanceof Filter&&(this.oFilter=e,this.oFilter.display(!1))}addLegend(e){logger$g.trace("addLegend()",e),e&&typeof e=="object"&&e instanceof Legend&&(this.oLegend=e,this.oLegend.display(!1))}slotLegend(){var e=this.oLegend;if(e){var t=null,ke=this.container.childNodes;if(ke.length)for(var Oe=this.options.tools.icon.anchor==="start"?1:0,Ge=ke[Oe].childNodes,Be=0;Be<Ge.length;Be++){var je=Ge[Be];je.id.indexOf(this.name.containerlegend)!==-1&&(t=je)}if(t){var Ve=e.getRenderContainer();Ve&&(t.appendChild(Ve),this.bSlotLegend=!0)}}}visibility(e){if(logger$g.trace("visibility()",e),!!this.options.tools.visibility)return typeof e<"u"&&(this.DomVisibility.checked=e?"checked":""),this.DomVisibility.checked}collapse(){logger$g.trace("collapse()"),this.DomToggle.click()}visible(){logger$g.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()}display(e){logger$g.trace("display()",e);var t=document.getElementById(this.DomToggle.htmlFor).checked;return typeof e<"u"&&(this.container.style.display=e?"inline-flex":"none",this.oStyle&&this.oStyle.display(e&&t),this.oFilter&&this.oFilter.display(e&&t),this.oLegend&&this.oLegend.display(e&&t)),t}active(e){return logger$g.trace("active()",e),typeof e<"u"&&(this.container.className=e?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container}getContainer(){return this.container}onClickLayerMapBox(e){logger$g.trace("onClickLayerMapBox",e);var t=e.target.htmlFor.substring(e.target.htmlFor.indexOf("-")),ke=document.getElementById(e.target.htmlFor).checked;e.target.htmlFor===this.name.imagelabelinput+t&&(document.getElementById(this.name.titleinput+t).checked=!ke),e.target.htmlFor===this.name.titleinput+t&&document.getElementById(this.name.imagelabelinput+t)&&(document.getElementById(this.name.imagelabelinput+t).checked=!ke),this.oStyle&&this.oStyle.display(!ke),this.oFilter&&this.oFilter.display(!ke),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!ke)}onVisibilityLayerMapBox(e){logger$g.trace("onVisibilityLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickvisibility,e)}onCloneLayerMapBox(e){logger$g.trace("onCloneLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickclone,e)}onRemoveLayerMapBox(e){logger$g.trace("onRemoveLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickremove,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Layer=Layer);var logger$f=LoggerByDefault.getLogger("editor-group");class Group{constructor(e){if(logger$f.trace("[constructor] Group",e),this.options=e||{},!(this instanceof Group))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.title||(this.options.title="Détails du groupe..."),typeof this.options.collapse>"u"&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}}_initContainer(){var e=document.createElement("div");e.className=this.name.container;var t=document.createElement("details");t.className=this.name.details,t.open=!this.options.collapse,e.appendChild(t);var ke=document.createElement("summary");ke.className=this.name.summary,ke.innerHTML=this.options.title,t.appendChild(ke),this.container=e}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)}display(e){this.container.style.display=e?"flex":"none"}getContainer(){var e=this.container.childNodes;return e.length?e[0]:this.container}onCollapseGroupMapBox(e){logger$f.trace("onCollapseGroupMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.group.oncollapse,e)}}var logger$e=LoggerByDefault.getLogger("editor-search");class Search{constructor(e){if(logger$e.trace("[constructor] Search",e),this.options=e||{target:null,tools:null,title:null,obj:null},!(this instanceof Search))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={}),this.options.title||(this.options.title="Recherche de couches :"),this.container=null,this.name={target:"GPEditorMapBoxSearchTarget",container:"GPEditorMapBoxSearchContainer"}}_initContainer(){var e=JSON.parse(JSON.stringify(this.options.obj));e.layers&&e.layers.length===0&&logger$e.info("tag 'layers' is empty !");var t=document.createElement("div");t.className=this.name.container,this.container=t}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$e.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onSubmitSearchLayersMapBox(e){logger$e.trace("onSubmitSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onsubmit,e)}onAutocompleteSearchLayersMapBox(e){logger$e.trace("onAutocompleteSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onautocomplete,e)}}var EditorDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e}},logger$d=LoggerByDefault.getLogger("editor");class Editor{constructor(e){if(logger$d.trace("[constructor] Editor",e),this.options=e||{},!(this instanceof Editor))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}_initialize(){if(this.options.target||logger$d.info("La 'target' n'est pas renseignée (options.target)."),!this.options.style){logger$d.error("Le 'style' MapBox n'est pas renseigné (options.style) !");return}this.options.events?this._initEvents():logger$d.warn("Les 'handlers' ne sont pas renseignés (options.events) !"),this.options.themes||logger$d.info("Les 'themes' MapBox ne sont pas renseignés (options.themes).");var e={themes:!1,layers:!0,search:!1,style:!1,filter:!1,legend:!1,group:!1,groupAuto:!1,sort:!0,sortBy:"id",sortOrder:"asc",title:!0,collapse:void 0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(logger$d.trace("Utilisation des outils MapBox par défaut (options.tools)."),this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.id=this.options.id||SelectorID.generate(),this.context={},this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}}_initEvents(){var e=this.options.scope||this,t=this.options.events;if(t){for(var ke in t)if(t.hasOwnProperty(ke)){var Oe=t[ke];Oe&&(EventBus.hasEventListener(ke,Oe,e)||EventBus.addEventListener(ke,Oe,e))}}}_initContainer(){logger$d.trace(this.mapbox);var e=document.createElement("div");e.id=this.name.containerID+this.id,e.className=this.name.container;var t=this.options.tools.themes;if(t&&this.options.themes){if(this.options.tools.title){var ke=document.createElement("div");ke.id=this.name.titleThemesID+this.id,ke.className=this.name.titleThemes,ke.innerHTML="Liste des 'thèmes'",e.appendChild(ke)}var Oe=new Themes({id:this.id,target:e,tools:typeof t=="object"?t:{},obj:this.options.themes});Oe.add()}if(this.options.tools.search){var Ge=new Search({id:this.id,target:e,tools:{},obj:this.mapbox.layers});Ge.add()}for(var Be in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(Be)){if(this.options.tools.layers){var je=Object.keys(this.mapbox.sources).length>1?1:0;if(je){var Ve=document.createElement("hr");Ve.className=this.name.sep,e.appendChild(Ve)}if(this.options.tools.title){var Ze=document.createElement("div");Ze.id=this.name.titleLayersID+this.id,Ze.className=this.name.titleLayers,Ze.innerHTML=je?"Liste des 'couches' ("+Be+")":"Liste des 'couches'",e.appendChild(Ze)}}var Qe=this.mapbox.layers.slice();if(Qe.forEach(function(Dn,Ci){var Jn=Dn.metadata;Jn?Jn["geoportail:order"]=Ci:Dn.metadata={"geoportail:order":Ci}}),this.options.tools.sort){var en=this.options.tools.sortBy,tn=this.options.tools.sortOrder,an=function(Dn,Ci){var Jn=0;if(Dn.metadata&&Dn.metadata["geoportail:group"]&&Ci.metadata&&Ci.metadata["geoportail:group"]){var Ki=null,xn=null;Ki=Dn.metadata["geoportail:group"],xn=Ci.metadata["geoportail:group"],Jn=Ki.localeCompare(xn)}else switch(en){case"geom":Jn=tn==="asc"?Dn.type.localeCompare(Ci.type)||Dn.id.localeCompare(Ci.id):Ci.type.localeCompare(Dn.type)||Ci.id.localeCompare(Dn.id);break;case"class":Jn=tn==="asc"?Dn["source-layer"].localeCompare(Ci["source-layer"])||Dn.id.localeCompare(Ci.id):Ci["source-layer"].localeCompare(Dn["source-layer"])||Ci.id.localeCompare(Dn.id);break;case"id":default:Jn=tn==="asc"?Dn.id.localeCompare(Ci.id):Ci.id.localeCompare(Dn.id);break}return Jn};Qe.sort(an)}logger$d.trace("Layers : ",Qe);var cn=this.options.tools.sortBy,dn=this.options.tools.groupAuto,hn={};Qe.forEach(function(Dn){var Ci=Dn.metadata;if(Ci&&Ci["geoportail:group"]){var Jn=Ci["geoportail:group"];hn[Jn]=hn[Jn]?hn[Jn]+1:1}else{var Ki=null;switch(cn){case"class":Ki=Dn["source-layer"];break;case"geom":Ki=Dn.type;break;case"id":default:Ki=Dn.id;break}var xn=Ki;if(dn){var qn=/_|-|:|=/,$n=Ki.search(qn);xn=$n!==-1?Ki.substring(0,$n).trim():Ki}hn[xn]=hn[xn]?hn[xn]+1:1,Ci?Ci["geoportail:group"]=xn:Dn.metadata={"geoportail:group":xn}}}),logger$d.trace("Groups : ",hn);var fn=document.createElement("div");fn.className=this.name.containerLayers,e.appendChild(fn);var pn;if(this.options.tools.collapse!==void 0){pn=document.createElement("details"),pn.className="",pn.open=!this.options.tools.collapse,fn.appendChild(pn);var mn=document.createElement("summary");mn.className="",mn.innerHTML="",pn.appendChild(mn)}for(var yn=this.options.tools.collapse!==void 0?pn:fn,Cn=-1,wn=0;wn<Qe.length;wn++){var bn=Qe[wn];if(Cn++,bn.source===Be){if(this.options.tools.group&&this.options.tools.sort){var Sn=bn.metadata;if(Sn){var Mn=bn.metadata["geoportail:group"];if(Mn)if(hn[Mn]>1){hn[Mn]=-1;var Tn=new Group({id:this.id,target:this.options.tools.collapse!==void 0?pn:fn,title:Mn,collapse:!0});Tn.add(),yn=Tn.getContainer()}else hn[Mn]===1&&(yn=this.options.tools.collapse!==void 0?pn:fn);else yn=this.options.tools.collapse!==void 0?pn:fn}else yn=this.options.tools.collapse!==void 0?pn:fn}if(this.options.tools.layers){var En=new Layer({id:this.id,target:yn,position:Cn+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:bn.id,type:bn.type,source:bn.source,"source-layer":bn["source-layer"]}});En.add(),bn.layout&&bn.layout.visibility&&bn.layout.visibility==="none"&&En.visibility(!1),this.layers.push(En)}if(this.options.tools.legend){var An=this.options.tools.editable;typeof An>"u"&&(An=bn.editable);var Ln=new Legend({id:this.id,target:yn,sprites:this.sprites,obj:{id:bn.id,source:bn.source,title:bn.id,editable:typeof An<"u"?An:!1,paint:bn.paint,layout:bn.layout}});Ln.add(),Ln.display(!1),En&&(En.addLegend(Ln),En.slotLegend())}if(this.options.tools.style){var Rn=new Style({id:this.id,target:yn,position:Cn+"_"+this.id,obj:{id:bn.id,source:bn.source,layout:bn.layout,paint:bn.paint}});Rn.add(),Rn.display(!1),En&&En.addStyle(Rn),bn.layout&&bn.layout.visibility&&bn.layout.visibility==="none"&&En.visibility(!1)}if(this.options.tools.filter){var Gn=new Filter({id:this.id,target:yn,position:Cn+"_"+this.id,obj:{id:bn.id,source:bn.source,filter:bn.Filter}});Gn.add(),Gn.display(!1),En&&En.addFilter(Gn)}}else Cn>=0&&Cn--}}if(this.container=e,!this.options.target){if(!document.getElementById(this.name.target)){var Nn=document.createElement("div");Nn.id=this.name.target;var jn=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement;jn.appendChild(Nn)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),EventBus.dispatch(EventEditor.onloaded,this)}_getSprites(e){var t=this;if(e&&e.startsWith("mapbox://"))return new Promise((Ge,Be)=>{logger$d.error("Protocole mapbox:// non géré !"),Ge(t)});if(!e)return new Promise((Ge,Be)=>{logger$d.error("Auncun sprites disponibles !"),Ge(t)});var ke=function(){var Ge=e+".png";return fetch(Ge,{credentials:"same-origin"}).then(function(Be){if(Be.ok)return Be.blob().then(function(Ve){t.sprites.url=Ge;var Ze=new Image;return Ze.src=Ge,Ze.decode().then(function(){t.sprites.size={},t.sprites.size.h=Ze.height,t.sprites.size.w=Ze.width})}).catch(Ve=>{logger$d.warn("fetch image sprites exception :",Ve)});var je=new Error("HTTP status code: "+Be.status);throw je}).catch(Be=>new Promise((je,Ve)=>{logger$d.error("fetch image sprites exception :",Be),Ve(Be)}))},Oe=function(){var Ge=e+".json";return fetch(Ge,{credentials:"same-origin"}).then(function(Be){if(Be.ok)return Be.json().then(function(Ve){t.sprites.json=Ve}).catch(Ve=>{logger$d.warn("fetch json sprites exception :",Ve)});var je=new Error("HTTP status code: "+Be.status);throw je}).catch(Be=>new Promise((je,Ve)=>{logger$d.error("fetch json sprites exception :",Be),Ve(Be)}))};return Promise.all([ke(),Oe()])}createElement(){var e=this;if(typeof this.options.style=="object")return this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(t=>{logger$d.warn("fetch sprites exception :",t)}):new Promise((t,ke)=>{e._initContainer(),t(e)});if(typeof this.options.style=="string")return fetch(this.options.style,{credentials:"same-origin"}).then(t=>t.json().then(ke=>{e.mapbox=ke}).then(function(){return e.options.tools.legend?e._getSprites(e.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(ke=>{logger$d.warn("fetch sprites exception :",ke)}):new Promise((ke,Oe)=>{e._initContainer(),ke(e)})}).catch(ke=>{logger$d.error("json exception :",ke)})).catch(t=>{logger$d.error("fetch exception :",t)})}display(e){this.container.style.display=e?"block":"none"}setContext(e,t){this.context[e]=t}getContext(e){return this.context[e]}getID(){return this.id}getContainer(){return this.container}getStyle(){return this.mapbox}getStyleLayer(e){for(var t=null,ke=this.getLayer(e),Oe=ke.options.obj.id,Ge=0;Ge<this.mapbox.layers.length;Ge++){var Be=this.mapbox.layers[Ge];if(Be.id===Oe){t=Be;break}}return t}getLayerFromStyle(e){for(var t=null,ke=this.mapbox.layers[e],Oe=0;Oe<this.getLayers().length;Oe++){var Ge=this.getLayer(Oe);if(ke.id===Ge.options.obj.id){t=Ge;break}}return t}getLayers(){return this.layers}getLayer(e){return this.layers[e]}}Helper.assign(Editor.prototype,EditorDOM);window.ol&&window.ol.style&&(window.ol.style.Editor=Editor);var LayerImportDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createLoadingElement:function(){var r=document.createElement("div");return r.id="GPmapLoading",r.className="",r},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPimport"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowImportPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowImportPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowImportPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-import fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir l'import de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r._onShowImportClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r._onShowImportClick(ke)}),e},_createImportPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPimportPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createImportPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createImportPanelHeaderElement:function(){var r=document.createElement("div");return r.className="GPpanelHeader GPelementVisible gpf-visible gpf-panel__header fr-modal__header",r},_createImportPanelReturnPictoElement:function(){var r=this,e=document.createElement("button");return e.id=this._addUID("GPimportPanelReturnPicto"),e.title="Masquer le panneau",e.className="GPreturnPicto GPimportPanelReturnPicto GPelementHidden gpf-hidden gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary gpf-btn--secondary",e.addEventListener?e.addEventListener("click",function(t){document.getElementById(r._addUID("GPshowImportPicto")).click(),r._onReturnPictoClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){document.getElementById(r._addUID("GPshowImportPicto")).click(),r._onReturnPictoClick(t)}),e},_createImportPanelTitleElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPimportHeaderTitle"),r.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",r.innerHTML="Import de données",r},_createImportPanelCloseElement:function(){var r=this,e=document.createElement("button");e.id=this._addUID("GPimportPanelClose"),e.className="GPpanelClose GPimportPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(r._addUID("GPshowImportPicto")).click(),r._onGetCapPanelClose(),r._onMapBoxPanelClose()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowImportPicto")).click(),r._onGetCapPanelClose(),r._onMapBoxPanelClose()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createImportPanelFormElement:function(){var r=this,e=document.createElement("form");return e.id=this._addUID("GPimportForm"),e.className="GPform GPelementVisible gpf-visible gpf-mobile-form gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),r._onImportSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),r._onImportSubmit()}),e},_createImportTypeLineElement:function(r){var e=this,t=document.createElement("div");t.id=this._addUID("GPimportTypeLine"),t.className="GPimportInputLine";var ke=document.createElement("label");ke.id=this._addUID("GPimportTypeLabel"),ke.className="GPlabel gpf-label fr-label",ke.innerHTML="Type de donnée",ke.title="Type de donnée",t.appendChild(ke);var Oe=document.createElement("select");Oe.setAttribute("aria-labelledby",this._addUID("GPimportTypeLabel")),Oe.className="GPselect gpf-select fr-select",Oe.addEventListener?Oe.addEventListener("change",function(je){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange(je)}):Oe.attachEvent&&Oe.attachEvent("onchange",function(){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange()}),Oe.id=this._addUID("GPimportTypeSelect"),(!r||!Array.isArray(r))&&(r=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var Ge,Be=0;Be<r.length;Be++)Ge=document.createElement("option"),Ge.value=r[Be],Ge.text=r[Be]==="MAPBOX"?"Tuiles vectorielles":r[Be],Oe.appendChild(Ge);return t.appendChild(Oe),t},_createImportWaitingElement:function(){var r=document.createElement("div");r.id=this._addUID("GPimportWaitingContainer"),r.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",r.appendChild(e),r},_createImportStaticParamsContainer:function(r){var e=document.createElement("div");return e.id=this._addUID("GPimportStaticParams"),r==="KML"||r==="GPX"||r==="GeoJSON"||r==="MAPBOX"?e.className="GPelementVisible gpf-visible fr-my-4w":e.className="GPelementHidden gpf-hidden",e},_createStaticNameLabel:function(){var r=document.createElement("div");r.className="GPimportInputLine fr-mb-1w";var e=document.createElement("label");e.className="GPlabel gpf-label fr-label",e.htmlFor=this._addUID("GPimportName"),e.innerHTML="Nom",e.title="Nom",r.appendChild(e);var t=document.createElement("input");return t.type="text",t.id=this._addUID("GPimportName"),t.className="GPinput gpf-input fr-input",r.appendChild(t),r},_createStaticModeChoiceDiv:function(){var r=document.createElement("div");return r.id=this._addUID("GPimportChoice"),r.className="fr-my-1w",r},_createStaticLocalChoiceDiv:function(){var r=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(Oe){document.getElementById(r._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(r._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",r._onStaticImportTypeChange(Oe)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(r._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(r._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",r._onStaticImportTypeChange()}),t.name="GPimportChoiceMode",t.value="local",t.checked=!0,t.id=this._addUID("GPimportChoiceAltLocal"),e.appendChild(t);var ke=document.createElement("label");return ke.className="GPimportChoiceAltTxt gpf-label fr-label",ke.htmlFor=this._addUID("GPimportChoiceAltLocal"),ke.innerHTML="par fichier local",ke.title="par fichier local",e.appendChild(ke),e},_createStaticUrlChoiceDiv:function(){var r=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(Oe){document.getElementById(r._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(r._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",r._onStaticImportTypeChange(Oe)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(r._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(r._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",r._onStaticImportTypeChange()}),t.id=this._addUID("GPimportChoiceAltUrl"),t.name="GPimportChoiceMode",t.value="url",t.checked=!1,e.appendChild(t);var ke=document.createElement("label");return ke.className="GPimportChoiceAltTxt gpf-label fr-label",ke.htmlFor=this._addUID("GPimportChoiceAltUrl"),ke.innerHTML="par URL",ke.title="par URL",e.appendChild(ke),e},_createStaticLocalInputDiv:function(){var r=document.createElement("div");return r.id=this._addUID("GPimportValueLocal"),r.className="GPimportInputLine",r},_createStaticLocalInputLabel:function(){var r=document.createElement("label");return r.className="GPlabel gpf-label fr-label fr-mb-1w",r.htmlFor=this._addUID("GPimportFile"),r.innerHTML="Fichier local",r.title="Fichier local",r},_createStaticLocalInput:function(){var r=document.createElement("input");return r.type="file",r.id=this._addUID("GPimportFile"),r.className="GPimportInputFile gpf-upload fr-upload",r},_createStaticUrlInputDiv:function(){var r=document.createElement("div");return r.id=this._addUID("GPimportValueUrl"),r.className="GPelementHidden gpf-hidden",r},_createStaticUrlInputLabel:function(){var r=document.createElement("label");return r.className="GPlabel gpf-label fr-label",r.htmlFor=this._addUID("GPimportUrl"),r.innerHTML="URL",r.title="URL",r},_createStaticUrlInput:function(){var r=document.createElement("input");return r.type="text",r.id=this._addUID("GPimportUrl"),r.className="GPinput gpf-input fr-input",r},_createServiceParamsContainer:function(r){var e=document.createElement("div");return e.id=this._addUID("GPimportServiceParams"),r==="WMS"||r==="WMTS"||r==="WFS"?e.className="GPelementVisible gpf-visible":e.className="GPelementHidden gpf-hidden",e},_createServiceUrlDiv:function(){var r=document.createElement("div");return r.className="GPimportInputLine",r},_createServiceUrlInputLabel:function(){var r=document.createElement("label");return r.className="GPlabel gpf-label fr-label",r.htmlFor=this._addUID("GPimportServiceUrl"),r.innerHTML="URL du service",r.title="URL du service",r},_createServiceUrlInput:function(){var r=document.createElement("input");return r.type="text",r.id=this._addUID("GPimportServiceUrl"),r.className="GPinput gpf-input fr-input",r},_createImportSubmitFormElement:function(){var r=document.createElement("input");return r.id=this._addUID("GPimportSubmit"),r.className="GPsubmit gpf-btn fr-btn",r.type="submit",r.value="Importer",r},_createImportGetCapPanelElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPimportGetCapPanel"),r.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",r},_createImportGetCapPanelHeaderElement:function(){var r=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Couches accessibles",t.title="Couches accessibles",e.appendChild(t);var ke=document.createElement("button");ke.className="GPpanelClose GPimportGetCapPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.id=this._addUID("GPimportGetCapPanelClose"),ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(r._addUID("GPshowImportPicto")).click(),document.getElementById(r._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),r._onGetCapPanelClose()}):ke.attachEvent&&ke.attachEvent("click",function(){document.getElementById(r._addUID("GPshowImportPicto")).click(),document.getElementById(r._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(r._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),r._onGetCapPanelClose()});var Oe=document.createElement("span");return Oe.className="GPelementHidden gpf-visible",Oe.innerText="Fermer",ke.appendChild(Oe),e.appendChild(ke),e},_createImportGetCapResultsContainer:function(){var r=document.createElement("div");return r.className="GPimportGetCapRoot gpf-panel__list",r.id=this._addUID("GPimportGetCapResults"),r},_addImportGetCapResultListRubrique:function(r,e){var t=document.createElement("ul");return t.className="GPimportGetCapListRubrique",t.title=r,e.appendChild(t),e},_addImportGetCapResultRubrique:function(r,e){var t=document.createElement("li");t.className="GPimportGetCapRubrique gpf-panel__items_layerimport";var ke=document.createElement("input");ke.id="GPimportGetCapRubrique-"+SelectorID.generate(),ke.className="GPimportGetCapRubrique",ke.type="checkbox",t.appendChild(ke);var Oe=document.createElement("label");return Oe.className="GPimportGetCapRubriqueTitle gpf-label fr-btn fr-btn--secondary",Oe.htmlFor=ke.id,Oe.innerHTML=r,Oe.title=r,t.appendChild(Oe),e.appendChild(t),e},_addImportGetCapResultListLayer:function(r){var e=document.createElement("ul");return e.className="GPimportGetCapListLayer",r.appendChild(e),r},_addImportGetCapResultLayer:function(r,e,t){var ke=document.createElement("li");ke.className="GPimportGetCapProposal gpf-panel__items_layerimport gpf-panel__items",ke.innerHTML=r.content,ke.title=r.title,ke.id="GPimportGetCapProposal_"+e;var Oe=this;return ke.addEventListener?ke.addEventListener("click",function(Ge){Oe._onGetCapResponseLayerClick(Ge)}):ke.attachEvent&&ke.attachEvent("onclick",function(){Oe._onGetCapResponseLayerClick()}),t.appendChild(ke),t},_createImportMapBoxPanelElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPimportMapBoxPanel"),r.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",r},_createImportMapBoxPanelHeaderElement:function(){var r=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("button");t.id=this._addUID("GPimportMapBoxPanelReturnPicto"),t.title="Masquer le panneau",t.className="GPreturnPicto GPimportMapBoxPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary gpf-btn--secondary",t.addEventListener?t.addEventListener("click",function(Be){document.getElementById(r._addUID("GPshowImportPicto")).click(),r._onMapBoxReturnPictoClick(Be)}):t.attachEvent&&t.attachEvent("onclick",function(Be){document.getElementById(r._addUID("GPshowImportPicto")).click(),r._onMapBoxReturnPictoClick(Be)}),e.appendChild(t);var ke=document.createElement("div");ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Edition des styles",ke.title="Edition des styles",e.appendChild(ke);var Oe=document.createElement("button");Oe.className="GPpanelClose GPimportMapBoxPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Oe.title="Fermer le panneau",Oe.id=this._addUID("GPimportMapBoxPanelClose"),Oe.addEventListener?Oe.addEventListener("click",function(){document.getElementById(r._addUID("GPshowImportPicto")).click(),document.getElementById(r._addUID("GPimportMapBoxPanel")).style.display="none",r._onMapBoxPanelClose()}):Oe.attachEvent&&Oe.attachEvent("click",function(){document.getElementById(r._addUID("GPshowImportPicto")).click(),document.getElementById(r._addUID("GPimportMapBoxPanel")).style.display="none",r._onMapBoxPanelClose()});var Ge=document.createElement("span");return Ge.className="GPelementHidden gpf-visible",Ge.innerText="Fermer",Oe.appendChild(Ge),e.appendChild(Oe),e},_createImportMapBoxResultsContainer:function(){var r=document.createElement("div");return r.className="GPimportMapBoxpRoot",r.id=this._addUID("GPimportMapBoxResults"),r}},MeasureToolBoxDOM={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(r){return r?this._toolboxId+"-"+r:this._toolboxId},getButtonID:function(r){return r?this._buttonId+"-"+r:this._buttonId},getWidgetID:function(r){return r?this._widgetId+"-"+r:this._widgetId},_createToolBoxContainerElement:function(r){var e=document.createElement("div");e.id=this.getToolBoxID(r),e.className="GPshowAdvancedToolPicto";var t=document.createElement("button");t.id=this.getButtonID(r),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowToolBoxPicto gpf-btn gpf-btn-icon-toolbox fr-btn",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button");var ke=this;t.addEventListener("click",function(Ge){var Be=Ge.target.ariaPressed==="true";Ge.target.setAttribute("aria-pressed",!Be),this.blur();var je=document.getElementById(ke.getWidgetID(r));je.style.display==="block"?je.style.display="none":je.style.display="block"}),e.appendChild(t);var Oe=document.createElement("div");return Oe.id=this.getWidgetID(r),Oe.addEventListener("click",function(){},!1),e.appendChild(Oe),e}},logger$c=LoggerByDefault.getLogger("toolbox"),MeasureToolBox={_toolbox:{},add:function(r,e){if(logger$c.trace("ToolBox.add()",e),!r){logger$c.trace("map doesn't exist !?");return}var t=typeof window<"u"?window:typeof self<"u"?self:null;t&&(this._toolbox=t.gpShareMeasureToolBox||{});var ke=r.getTargetElement(),Oe=ke.ownerDocument,Ge=ke.id;!this._toolbox||Object.keys(this._toolbox).length===0?(this._toolbox={},this._toolbox[Ge]=SelectorID.generate()):this._toolbox[Ge]||(this._toolbox[Ge]=SelectorID.generate());var Be=this._toolbox[Ge];if(!Oe.getElementById(this.getToolBoxID(Be))){logger$c.trace("create toolbox !");var je=this._createToolBoxContainerElement(Be);je.style.pointerEvents="auto";var Ve=ke.getElementsByClassName("ol-overlaycontainer-stopevent");Ve[0].appendChild(je)}var Ze=Oe.getElementById(this.getWidgetID(Be));e.setTarget(Ze),t&&(t.gpShareMeasureToolBox=this._toolbox),logger$c.trace("add control to toolbox !")}};Helper.assign(MeasureToolBox,MeasureToolBoxDOM);var logger$b=LoggerByDefault.getLogger("measures"),Measures={DEFAULT_POINTER_STYLE:new CircleStyle({radius:5,stroke:new Stroke({color:"#002A50",width:2}),fill:new Fill({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.2)"}),stroke:new Stroke({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,eventLayerRemove:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var r=this.CLASSNAME;logger$b.trace("["+r+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._pictoContainer.setAttribute("aria-pressed",!1)},onPointerMoveHandler:function(r){if(!r.dragging){var e=r.coordinate;if(this.sketch){var t,ke=this.sketch.getGeometry();if(t=this.format(ke),ke.getType()==="LineString")e=ke.getLastCoordinate();else if(ke.getType()==="Polygon")e=ke.getInteriorPoint().getCoordinates();else return;this.measureTooltipElement.innerHTML=t,this.measureTooltip.setPosition(e)}}},onShowMeasureClick:function(r,e){r.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap(),ke=t.getTargetElement().id,Oe=typeof window<"u"?window:typeof self<"u"?self:null;Oe&&(this.tools=Oe.gpShareMeasures||{});var Ge=this.CLASSNAME;for(var Be in this.tools)if(this.tools.hasOwnProperty(Be))for(var je=this.tools[Be],Ve=0;Ve<je.length;Ve++){var Ze=je[Ve];Ze&&Ze.active&&Be!==Ge&&Ze.map.id===ke&&(Ze.active=!1,Ze.instance!==null&&Ze.instance.clean())}Interactions.unset(t,{current:"Measures"});var Qe=this._pictoContainer.ariaPressed;if(Qe==="true"){this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(e);for(var en=0;en<this.tools[Ge].length;en++)this.tools[Ge][en].map.id===ke&&(this.tools[Ge][en].active=!0)}else{this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var tn=0;tn<this.tools[Ge].length;tn++)this.tools[Ge][tn].map.id===ke&&(this.tools[Ge][tn].active=!1)}},clearMeasureToolTip:function(){var r=this.getMap();if(r)for(var e=r.getTargetElement(),t=e.getElementsByClassName("ol-overlaycontainer"),ke=0;ke<t.length;ke++){for(var Oe=t[ke],Ge=Oe.children.length,Be=[],je=0;je<Ge;je++){var Ve=Oe.children[je];if(Ve.children.length!==0){var Ze=Ve.children[0];(Ze.className==="GPmeasureTooltip GPmeasureTooltip-static"||Ze.className==="GPmeasureTooltip GPmeasureTooltip-measure")&&Be.push(Ve)}}for(var Qe=0;Qe<Be.length;Qe++)Oe.removeChild(Be[Qe])}},clearMeasure:function(){var r=this.getMap();this.measureVector&&(r.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(r.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(r){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new Overlay({element:this.measureTooltipElement,stopEvent:!1,offset:[0,-15],positioning:"bottom-center"}),r.addOverlay(this.measureTooltip)},createHelpTooltip:function(r){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new Overlay({element:this.helpTooltipElement,stopEvent:!1,offset:[15,0],positioning:"center-left"}),r.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(r){this.options.styles=r||{},logger$b.trace("style start",this.options.styles.start);var e={image:Measures.DEFAULT_POINTER_STYLE,fill:Measures.DEFAULT_DRAW_START_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(e.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof Style$1&&(this.options.styles.start.getFill()!=null&&(e.fill=this.options.styles.start.getFill()),this.options.styles.start.getStroke()!=null&&(e.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new Style$1(e),logger$b.trace("style finish",this.options.styles.finish);var t={fill:Measures.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof Style$1&&(this.options.styles.finish.getFill()!=null&&(t.fill=this.options.styles.finish.getFill()),this.options.styles.finish.getStroke()!=null&&(t.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new Style$1(t)},addMeasureInteraction:function(r){var e=this.getMap(),t=this;this.measureDraw=new Draw({source:this.measureSource,condition:function(ke){return ke.originalEvent.ctrlKey?(t.sketch&&this.removeLastPoint(),!1):!0},type:r,style:this.options.styles.start||Measures.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),e.addInteraction(this.measureDraw),this.createMeasureTooltip(e),this.measureDraw.on("drawstart",ke=>{t.sketch=ke.feature}),this.measureDraw.on("drawend",()=>{if(t.sketch){var ke,Oe,Ge=t.sketch.getGeometry();if(ke=t.format(Ge),Ge.getType()==="LineString")Oe=Ge.getLastCoordinate();else if(Ge.getType()==="Polygon")Oe=Ge.getInteriorPoint().getCoordinates();else return;t.measureTooltipElement.innerHTML=ke,t.measureTooltip.setPosition(Oe)}t.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",t.measureTooltip.setOffset([0,-7]),t.sketch=null,t.measureTooltipElement=null,t.createMeasureTooltip(e)})},initMeasureInteraction:function(){var r=this.getMap();this.measureSource=new VectorSource,this.measureVector=new VectorLayer({source:this.measureSource,style:this.options.styles.finish||Measures.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",r.addLayer(this.measureVector),r.getControls().forEach(e=>{if(e.CLASSNAME==="LayerSwitcher"){var t=this.measureVector.gpLayerId;e._layers[t].title===t&&e.addLayer(this.measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}},ElevationPathDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPelevationPath"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowElevationPathPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-elevation fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer un profil altimétrique"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowElevationPathClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowElevationPathClick(ke)}),e},_createElevationPathPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPelevationPathPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createElevationPathPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createElevationPathPanelHeaderElement:function(){var r=this,e=document.createElement("div");if(e.className="GPpanelHeader gpf-panel__header fr-modal__header",!checkDsfr()){var t=document.createElement("button");t.id=this._addUID("GPelevationPathPanelInfo"),t.className="GPpanelInfo gpf-btn gpf-btn-icon-info fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",t.title="Informations",t.addEventListener?t.addEventListener("click",function(){r.onOpenElevationPathInfoClick()}):t.attachEvent&&t.attachEvent("onclick",function(){r.onOpenElevationPathInfoClick()}),e.appendChild(t)}var ke=document.createElement("div");ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Profil Altimétrique",e.appendChild(ke);var Oe=document.createElement("button");Oe.id=this._addUID("GPelevationPathPanelReduce"),Oe.className="GPpanelReduce gpf-btn gpf-btn-icon-reduce fr-btn fr-btn--secondary gpf-btn--secondary",Oe.title="Masquer le panneau",Oe.addEventListener?Oe.addEventListener("click",function(je){typeof r.onReduceElevationPathPanelClick=="function"&&r.onReduceElevationPathPanelClick()},!1):Oe.attachEvent&&Oe.attachEvent("onclick",function(je){typeof r.onReduceElevationPathPanelClick=="function"&&r.onReduceElevationPathPanelClick()}),e.appendChild(Oe);var Ge=document.createElement("button");Ge.id=this._addUID("GPelevationPathPanelClose"),Ge.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ge.title="Fermer le panneau",Ge.addEventListener?Ge.addEventListener("click",function(){document.getElementById(r._addUID("GPshowElevationPathPicto")).click()},!1):Ge.attachEvent&&Ge.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowElevationPathPicto")).click()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Ge.appendChild(Be),e.appendChild(Ge),e},_createElevationPathPanelProfilElement:function(){var r=document.createElement("div");r.className="GPelevationPathProfilWrapper";var e=document.createElement("div");return e.id="GPelevationPathProfil",r.appendChild(e),r},_createElevationPathWaitingElement:function(){var r=document.createElement("div");r.id=this._addUID("GPelevationPathCalcWaitingContainer"),r.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",r.appendChild(e),r},_createElevationPathInformationsElement:function(){var r=document.createElement("div");r.id=this._addUID("GPelevationPathInformationsContainer"),checkDsfr()||(r.className="GPelementHidden gpf-hidden");var e=document.createElement("p");return e.className="GPelevationPathInformations",e.innerHTML="Aucune information...",r.appendChild(e),r},_addElevationPathInformationsItem:function(r,e){var t=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(t){var ke=document.createElement("p");ke.className="GPelevationPathInformations";var Oe=document.createElement("span");Oe.innerText=r;var Ge=document.createElement("span");Ge.innerText=e,ke.appendChild(Oe),ke.appendChild(Ge),t.appendChild(ke)}return t}},ProfileElevationPathDOM={_getCssProperty:function(r,e){return window.getComputedStyle(r,null).getPropertyValue(e)},_getTextWidth:function(r,e,t=null){var ke=this.canvas||(this.canvas=document.createElement("canvas")),Oe=ke.getContext("2d");t===null?Oe.font=`${this._getCssProperty(e,"font-weight")} ${this._getCssProperty(e,"font-size")} ${this._getCssProperty(e,"font-family")}`:Oe.font=t;var Ge=Oe.measureText(r);return Ge.width},_dataZToSvgY:function(r,e,t,ke){return e-(r-t)*ke-.5},_dataDistToSvgX:function(r,e,t,ke){return e-t+r*ke},_svgXToDataDist:function(r,e,t,ke){return(r+t-e)/ke},_arrayBisect:function(r,e){let t;if(r.length===0)return 0;for(t=0;t<r.length;t++)if(e<r[t].dist)return t;return t-1},displayProfileByDefault:function(r,e,t,ke){var Oe=t;if(!e||!r)return;const Ge={fontFamily:"Arial",strokeColor:"#0B6BA7",fillColor:"#00B798",focusLineColor:"#F90"};for(checkDsfr()&&(Ge.fontFamily="Marianne",Ge.strokeColor="#2F4077",Ge.fillColor="#2F4077",Ge.focusLineColor="#639f6a");e.firstChild;)e.removeChild(e.firstChild);const Be={top:25,right:15,bottom:10,left:10};var je=Oe.options.displayProfileOptions,Ve=r.points,Ze=JSON.parse(JSON.stringify(Ve));Ze.sort(function(uo,eo){return uo.z-eo.z});var Qe=Ze[0].z,en=Ze[Ze.length-1].z,tn=r.distance;let an="m";const cn=document.createElement("div");cn.id="profileElevationByDefault",e.appendChild(cn);var dn=window.getComputedStyle(e).getPropertyValue("width").replace(/px/,""),hn=window.getComputedStyle(e).getPropertyValue("height").replace(/px/,"");const fn=hn-Be.top-Be.bottom,pn=dn-Be.left-Be.right,mn=17,yn=this._getTextWidth(Math.round(en).toLocaleString()+",88",e,`400 10 ${Ge.fontFamily}`),Cn=17,wn=15,bn=15,Sn=this._getTextWidth(Math.round(tn).toLocaleString()+",5",e),Mn=1,Tn=fn-Cn-wn,En=pn-mn-yn,An=document.createElementNS("http://www.w3.org/2000/svg","svg");An.id="profileElevationByDefaultSvg",An.setAttribute("style","display: block; margin: auto; overflow: visible;"),An.setAttribute("viewBox",`0 0 ${dn} ${hn}`),An.setAttribute("width","100%"),An.setAttribute("height","100%");const Ln=Math.floor(Tn/bn);let Rn;en===Qe?Rn=.1:Rn=Math.pow(10,Math.ceil(Math.log((en-Qe)/Ln)/Math.log(10)))/2;let Gn=Math.floor(Qe/Rn)*Rn,Nn=Math.ceil(en/Rn)*Rn;Nn===en&&(Nn+=Rn),Gn=Math.round(Gn*100)/100,Nn=Math.round(Nn*100)/100;let jn=Math.round((Nn-Gn)/Rn);jn+1>Ln&&(Rn=Math.pow(10,Math.ceil(Math.log((en-Qe)/Ln)/Math.log(10))),Gn=Math.floor(Qe/Rn)*Rn,Nn=Math.ceil(en/Rn)*Rn,Nn===en&&(Nn+=Rn),Gn=Math.round(Gn*100)/100,Nn=Math.round(Nn*100)/100,jn=Math.floor((Nn-Gn)/Rn)),jn=Math.max(Math.round(jn),1);const Dn=document.createElementNS("http://www.w3.org/2000/svg","g");Dn.setAttribute("class","profile-z-vertical");const Ci=document.createElementNS("http://www.w3.org/2000/svg","g"),Jn=Tn/jn;let Ki;en===Qe?Ki=Tn/.2:Ki=Tn/(Nn-Gn);let xn,qn,$n,Ai,Ti,Kn;for(let uo=0;uo<=jn;uo++)xn=document.createElementNS("http://www.w3.org/2000/svg","text"),xn.setAttribute("class","profile-z-graduation"),xn.setAttribute("font-family",Ge.fontFamily),xn.setAttribute("font-size","10px"),xn.setAttribute("fill","#5E5E5E"),xn.textContent=(Math.round(100*(Gn+uo*Rn))/100).toLocaleString(),qn=Tn-uo*Jn,xn.setAttribute("transform",`translate(${mn+yn-8}, ${qn+5})`),xn.setAttribute("text-anchor","end"),Dn.appendChild(xn),$n=Math.round(qn)-.5,Ai=document.createElementNS("http://www.w3.org/2000/svg","g"),Ti=document.createElementNS("http://www.w3.org/2000/svg","path"),Ti.setAttribute("cs","100,100"),Ti.setAttribute("stroke-width","1"),uo!==0?Ti.setAttribute("stroke-opacity","0.2"):Ti.setAttribute("stroke-opacity","1"),Ti.setAttribute("stroke","#000000"),Ti.setAttribute("fill","none"),Ti.setAttribute("d",`M${mn+yn},${$n} L${En+mn+yn},${$n}`),Kn=document.createElementNS("http://www.w3.org/2000/svg","path"),Kn.setAttribute("cs","100,100"),Kn.setAttribute("stroke-width","1"),Kn.setAttribute("stroke-opacity","1"),Kn.setAttribute("stroke","#000000"),Kn.setAttribute("fill","none"),Kn.setAttribute("d",`M${mn+yn},${$n} L${mn+yn+5},${$n}`),Kn.setAttribute("transform","translate(-5, 0)"),Ai.appendChild(Kn),Ai.appendChild(Ti),Ci.appendChild(Ai);var Ii=document.createElementNS("http://www.w3.org/2000/svg","text");Ii.setAttribute("class","profile-z-legend"),Ii.setAttribute("font-family",Ge.fontFamily),Ii.setAttribute("font-size","11px"),Ii.setAttribute("fill","#5E5E5E"),Ii.textContent="Altitude (m)",Ii.setAttribute("transform",`translate(${mn-8}, ${Math.round(Tn/2)}) rotate(-90)`),Ii.setAttribute("text-anchor","middle"),Dn.appendChild(Ii),An.appendChild(Dn),An.appendChild(Ci),tn>2e3&&(tn/=1e3,an="km");const Pi=Math.floor(En/Sn);let Mi=Math.pow(10,Math.ceil(Math.log(tn/Pi)/Math.log(10)))/2;const tr=tn;let Br=Math.floor(tr/Mi);Br>Pi?(Mi=Math.pow(10,Math.ceil(Math.log(tn/Pi)/Math.log(10))),Br=Math.floor(tr/Mi)):Br<Mn&&(Mi=Math.pow(10,Math.ceil(Math.log(tn/Pi)/Math.log(10))-1),Br=Math.floor(tr/Mi)),Br=Math.max(Br,1);const Un=Mi*Br,Qn=document.createElementNS("http://www.w3.org/2000/svg","g");Qn.setAttribute("class","profile-x-vertical");const Hn=document.createElementNS("http://www.w3.org/2000/svg","g"),Fn=En/tr,Hi=(tr-Un)*Fn,zi=Math.round((En-Hi)/Br);let Oi,Vi,Bi,Fi,Si,Li;for(let uo=0;uo<=Br+1;uo++)Oi=document.createElementNS("http://www.w3.org/2000/svg","text"),Oi.setAttribute("class","profile-x-graduation"),Oi.setAttribute("font-family",Ge.fontFamily),Oi.setAttribute("font-size","10px"),Oi.setAttribute("fill","#5E5E5E"),uo!==Br+1&&(Oi.textContent=(Math.round(100*uo*Mi)/100).toLocaleString()),Vi=mn+yn+uo*zi,uo===Br+1&&(Vi=mn+yn+En),Oi.setAttribute("transform",`translate(${Vi}, ${Tn+wn+5})`),Oi.setAttribute("text-anchor","middle"),Qn.appendChild(Oi),Bi=Vi-.5,Fi=document.createElementNS("http://www.w3.org/2000/svg","g"),Si=document.createElementNS("http://www.w3.org/2000/svg","path"),Si.setAttribute("cs","100,100"),Si.setAttribute("stroke-width","1"),uo!==0?Si.setAttribute("stroke-opacity","0.2"):Si.setAttribute("stroke-opacity","1"),Si.setAttribute("stroke","#000000"),Si.setAttribute("fill","none"),Si.setAttribute("d",`M${Bi},${Tn} L${Bi},0`),Li=document.createElementNS("http://www.w3.org/2000/svg","path"),Li.setAttribute("cs","100,100"),Li.setAttribute("stroke-width","1"),Li.setAttribute("stroke-opacity","1"),Li.setAttribute("stroke","#000000"),Li.setAttribute("fill","none"),Li.setAttribute("d",`M${Bi},${Tn} L${Bi},${Tn-5}`),Li.setAttribute("transform","translate(0, 5)"),Fi.appendChild(Li),Fi.appendChild(Si),Hn.appendChild(Fi);var Ri=document.createElementNS("http://www.w3.org/2000/svg","text");Ri.setAttribute("class","profile-x-legend"),Ri.setAttribute("font-family",Ge.fontFamily),Ri.setAttribute("font-size","11px"),Ri.setAttribute("fill","#5E5E5E"),Ri.textContent=`Distance (${an})`,Ri.setAttribute("transform",`translate(${mn+yn+En/2}, ${Tn+wn+Cn+3})`),Ri.setAttribute("text-anchor","middle"),Qn.appendChild(Ri),An.appendChild(Qn),An.appendChild(Hn);const $i=document.createElementNS("http://www.w3.org/2000/svg","g");let er=1;an==="km"&&(er=1e3);let ar=this._dataDistToSvgX(Ve[0].dist/er,pn,En,Fn),Rr=this._dataZToSvgY(Ve[0].z,Tn,Gn,Ki),Gs=`M${ar},${Rr}`;for(let uo=1;uo<Ve.length;uo++)ar=this._dataDistToSvgX(Ve[uo].dist/er,pn,En,Fn),Rr=this._dataZToSvgY(Ve[uo].z,Tn,Gn,Ki),Gs+=` L${ar},${Rr}`;const Pr=document.createElementNS("http://www.w3.org/2000/svg","path");Pr.setAttribute("cs","100,100"),Pr.setAttribute("stroke-width","1"),Pr.setAttribute("stroke-opacity","1"),Pr.setAttribute("stroke",Ge.strokeColor),Pr.setAttribute("fill","none"),Pr.setAttribute("d",Gs),Gs+=` L${ar},${Tn}`,Gs+=` L${pn-En},${Tn}`;const no=document.createElementNS("http://www.w3.org/2000/svg","path");no.setAttribute("cs","100,100"),no.setAttribute("stroke-width","1"),no.setAttribute("stroke-opacity","0"),no.setAttribute("stroke","#000000"),no.setAttribute("fill",Ge.fillColor),no.setAttribute("fill-opacity","0.2"),no.setAttribute("d",Gs),$i.appendChild(Pr),$i.appendChild(no),An.appendChild($i);const Zs=document.createElementNS("http://www.w3.org/2000/svg","g"),ho=document.createElementNS("http://www.w3.org/2000/svg","rect");ho.setAttribute("width",En),ho.setAttribute("height",Tn),ho.setAttribute("transform",`translate(${pn-En},0)`),ho.setAttribute("visibility","hidden"),ho.setAttribute("pointer-events","all");const co=JSON.parse(JSON.stringify(Ve));co.sort(function(uo,eo){return uo.dist-eo.dist});const Ws=document.createElementNS("http://www.w3.org/2000/svg","line");Ws.setAttribute("id","focusLineX"),Ws.setAttribute("class","focusLine-default"),Ws.setAttribute("fill","none"),Ws.setAttribute("stroke",Ge.focusLineColor),Ws.setAttribute("stroke-width","0.5px"),Ws.setAttribute("visibility","hidden");const oo=document.createElementNS("http://www.w3.org/2000/svg","line");oo.setAttribute("id","focusLineY"),oo.setAttribute("class","focusLine-default"),oo.setAttribute("fill","none"),oo.setAttribute("stroke",Ge.focusLineColor),oo.setAttribute("stroke-width","0.5px"),oo.setAttribute("visibility","hidden");const to=document.createElementNS("http://www.w3.org/2000/svg","circle");to.setAttribute("id","focusCircle"),to.setAttribute("r",4),to.setAttribute("class","circle-default focusCircle-default"),to.setAttribute("fill",Ge.focusLineColor),to.setAttribute("visibility","hidden"),Zs.appendChild(to),Zs.appendChild(Ws),Zs.appendChild(oo);const mo=document.createElementNS("http://www.w3.org/2000/svg","text"),ao=document.createElementNS("http://www.w3.org/2000/svg","tspan"),jo=document.createElementNS("http://www.w3.org/2000/svg","tspan"),na=document.createElementNS("http://www.w3.org/2000/svg","tspan");mo.setAttribute("style",`text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:${Ge.fontFamily}; z-index:50;`),mo.style.pointerEvents="none",mo.style.position="fixed",mo.setAttribute("class","tooltipInit"),mo.setAttribute("text-anchor","middle"),cn.appendChild(mo),ao.setAttribute("class","altiPathValue"),ao.setAttribute("x","0"),ao.setAttribute("dy","-.7em"),jo.setAttribute("class","altiPathValue"),jo.setAttribute("x","0"),jo.setAttribute("dy","1em"),na.setAttribute("class","altiPathCoords"),na.setAttribute("x","0"),na.setAttribute("dy","1em"),mo.appendChild(ao),je.currentSlope&&mo.appendChild(jo),mo.appendChild(na);const yo=document.createElementNS("http://www.w3.org/2000/svg","g");Zs.appendChild(yo);const io=document.createElementNS("http://www.w3.org/2000/svg","path");io.setAttribute("cs","100,100"),io.setAttribute("fill","#FFFFFF"),io.setAttribute("stroke","#CCCCCC"),io.setAttribute("fill-opacity","0.8"),io.setAttribute("stroke-width","1"),io.setAttribute("stroke-opacity","1");const so=document.createElementNS("http://www.w3.org/2000/svg","path");so.setAttribute("cs","100,100"),so.setAttribute("fill","#FFFFFF"),so.setAttribute("stroke","#000000"),so.setAttribute("fill-opacity","0"),so.setAttribute("stroke-width","1"),so.setAttribute("stroke-opacity","0.4"),so.setAttribute("transform","translate(1,1)"),yo.appendChild(so),yo.appendChild(io),yo.appendChild(mo),yo.setAttribute("class","tooltipInit"),yo.style.pointerEvents="none";function $a(){Ws.setAttribute("visibility","visible"),oo.setAttribute("visibility","visible"),to.setAttribute("visibility","visible"),ke.__createProfileMarker(Oe,Ve[0]),mo.classList.remove("tooltipInit"),yo.classList.remove("tooltipInit"),mo.classList.remove("tooltipFadeOut"),yo.classList.remove("tooltipFadeOut"),mo.classList.add("tooltipFadeIn"),yo.classList.add("tooltipFadeIn")}function ko(){Ws.setAttribute("visibility","hidden"),oo.setAttribute("visibility","hidden"),to.setAttribute("visibility","hidden"),ke.__removeProfileMarker(Oe),mo.classList.remove("tooltipFadeIn"),yo.classList.remove("tooltipFadeIn"),mo.classList.add("tooltipFadeOut"),yo.classList.add("tooltipFadeOut")}function Aa(uo){const eo=An.createSVGPoint();eo.x=uo.clientX,eo.y=uo.clientY;const Oa=eo.matrixTransform(An.getScreenCTM().inverse()),qo=this._svgXToDataDist(Oa.x,pn,En,Fn)*er,Fo=Math.max(1,this._arrayBisect(co,qo)),Oo=Ve[Fo-1],ta=Ve[Fo];let ra=Oo;qo-Oo.dist>ta.dist-qo&&(ra=ta);const ac=this._dataDistToSvgX(ra.dist/er,pn,En,Fn),Za=this._dataZToSvgY(ra.z,Tn,Gn,Ki);to.setAttribute("cx",ac),to.setAttribute("cy",Za),Ws.setAttribute("x1",ac),Ws.setAttribute("y1",Tn),Ws.setAttribute("x2",ac),Ws.setAttribute("y2",0),oo.setAttribute("x1",mn+yn),oo.setAttribute("y1",Za),oo.setAttribute("x2",En+mn+yn),oo.setAttribute("y2",Za),ke.__updateProfileMarker(Oe,ra);const Pl=`Altitude : ${ra.z.toLocaleString()} m`,nc=`Pente : ${ra.slope} %`,Tl=`(lat : ${ra.lat.toLocaleString()} / lon : ${ra.lon.toLocaleString()})`;ao.innerHTML=Pl,jo.innerHTML=nc,na.innerHTML=Tl;const ja=Math.max(this._getTextWidth(Tl,na),this._getTextWidth(Pl,ao));let Va;ra.dist>tn*er/2?(Va=`M -0.5 -0.5 l -6 6 l 0 16 l -${ja+10} 0 l 0 -44 l ${ja+10} 0 l 0 16 l 6 6`,mo.setAttribute("transform",`translate(${-(ja/2+12)},0)`)):ra.dist<=tn*er/2&&(Va=`M -0.5 -0.5 l 6 6 l 0 16 l ${ja+10} 0 l 0 -44 l -${ja+10} 0 l 0 16 l -6 6`,mo.setAttribute("transform",`translate(${ja/2+12},0)`)),io.setAttribute("d",Va),so.setAttribute("d",Va),yo.setAttribute("transform",`translate(${ac},${Za})`),yo.style.transform=`translate(${ac}px,${Za}px)`}return ho.addEventListener("pointerover",$a),ho.addEventListener("pointerout",ko),ho.addEventListener("pointermove",Aa.bind(this)),Zs.appendChild(ho),An.appendChild(Zs),cn.appendChild(An),e},displayProfileRaw:function(r,e,t,ke){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var Oe=r&&r.points?r.points:{},Ge=document.createElement("textarea");return Ge.id="profilElevationResults",Ge.rows=10,Ge.cols=50,Ge.style.width="100%",Ge.innerHTML=JSON.stringify(Oe,void 0,4),Ge.addEventListener("mouseover",function(Be){ke.__customRawProfileMouseOverEvent(t,Be)}),e.appendChild(Ge),e}},displayProfileLibD3:function(r,e,t,ke){var Oe=t;if(e&&r){for(;e.firstChild;)e.removeChild(e.firstChild);var Ge=r.points;if(r.distance>2e3){r.unit="km";for(let Sn=0;Sn<Ge.length;Sn++)Ge[Sn].dist/=1e3}var Be=Oe.options.displayProfileOptions,je={top:20,right:20,bottom:30,left:40},Ve=window.getComputedStyle(e).getPropertyValue("width"),Ze=window.getComputedStyle(e).getPropertyValue("height"),Qe=Ve.replace(/px/,"")-je.left-je.right,en=Ze.replace(/px/,"")-je.top-je.bottom,tn=d3.scale.linear().range([0,Qe]),an=d3.scale.linear().range([en,0]),cn=d3.svg.axis().scale(tn).orient("bottom").ticks(5),dn=d3.svg.axis().scale(an).orient("left").ticks(5),hn=d3.svg.line().interpolate("basis").x(function(Sn){return tn(Sn.dist)}).y(function(Sn){return an(Sn.z)}),fn=d3.svg.area().interpolate("basis").x(function(Sn){return tn(Sn.dist)}).y0(en).y1(function(Sn){return an(Sn.z)}),pn=d3.select(e).append("svg").attr("width",Qe+je.left+je.right).attr("height",en+je.top+je.bottom).append("g").attr("transform","translate("+je.left+","+je.top+")"),mn=d3.extent(Ge,function(Sn){return Sn.dist});tn.domain(mn);var yn=[0,d3.max(Ge,function(Sn){return Sn.z})];an.domain(yn),pn.append("path").datum(Ge).attr("class","area-d3").attr("d",fn),pn.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+en+")").call(cn).append("text").attr("y",-15).attr("dy",".71em").attr("x",Qe).text("Distance ("+r.unit+")"),pn.append("g").attr("class","y axis-d3").call(dn).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),pn.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+en+")").call(cn.orient("bottom").tickSize(-en,0,0).tickFormat("")),pn.append("g").attr("class","grid-d3 horizontal").call(dn.orient("left").tickSize(-Qe,0,0).tickFormat("")),pn.append("path").datum(Ge).attr("class","line-d3").attr("d",hn),pn.selectAll("circle").data(Ge).enter().append("circle").attr("cx",function(Sn){return tn(Sn.dist)}).attr("cy",function(Sn){return an(Sn.z)}).attr("r",0).attr("class","circle-d3");var Cn=pn.append("g").style("display","none");Cn.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),Cn.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),Cn.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var wn=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),bn=d3.bisector(function(Sn){return Sn.dist}).left;return pn.append("rect").attr("class","overlay-d3").attr("width",Qe).attr("height",en).on("mouseover",function(){Cn.style("display",null),ke.__createProfileMarker(Oe,Ge[0])}).on("mouseout",function(){Cn.style("display","none"),ke.__removeProfileMarker(Oe),wn.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var Sn=d3.mouse(this),Mn=tn.invert(Sn[0]),Tn=Math.max(1,bn(Ge,Mn)),En=Ge[Tn-1],An=Ge[Tn],Ln=Mn-En[0]>An[0]-Mn?An:En,Rn=tn(Ln.dist),Gn=an(Ln.z);Cn.select("#focusCircle").attr("cx",Rn).attr("cy",Gn),Cn.select("#focusLineX").attr("x1",Rn).attr("y1",an(yn[0])).attr("x2",Rn).attr("y2",an(yn[1])),Cn.select("#focusLineY").attr("x1",tn(mn[0])).attr("y1",Gn).attr("x2",tn(mn[1])).attr("y2",Gn),ke.__updateProfileMarker(Oe,Ln),wn.transition().duration(200).style("opacity",.9);var Nn="";Nn+=" Altitude : "+Ln.z+" m",Be.currentSlope&&(Nn+="<br/> Pente : "+Ln.slope+" %"),Nn+="<br/> (Lat : "+Ln.lat+"/ Lon : "+Ln.lon+")",wn.html(Nn).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),pn}},displayProfileLibAmCharts:function(r,e,t,ke){var Oe=t;if(e&&r){var Ge=r.points,Be="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>",je=Oe.options.displayProfileOptions.currentSlope;if(je&&(Be+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),Be+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){}),r.distance>2e3){r.unit="km";for(let tn=0;tn<Ge.length;tn++)Ge[tn].dist/=1e3}for(let tn=0;tn<Ge.length;tn++){var Ve=Ge[tn].dist,Ze=100;Ve>100?Ze=1:Ve>10&&(Ze=10),Ve=Math.round(Ve*Ze)/Ze,Ge[tn].dist=Ve}var Qe={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+r.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:Be,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:Ge},en=AmCharts.makeChart(e,Qe);return en.addListener("changed",function(tn){var an=tn.chart.dataProvider[tn.index];ke.__updateProfileMarker(Oe,an)}),en}}},logger$a=LoggerByDefault.getLogger("elevationpath"),qa,ElevationPath=(qa=class extends ControlExtended{constructor(e){if(logger$a.trace("ElevationPath()"),e=e||{},super(e),!(this instanceof qa))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ElevationPath",this._uid=e.id||SelectorID.generate(),this._showContainer=null,this._pictoButton=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}static __removeProfileMarker(e){var t=e;t._marker&&(t._measureSource.removeFeature(t._marker),t._marker=null)}static __createProfileMarker(e,t){var ke=e;ke._marker&&(ke._measureSource.removeFeature(ke._marker),ke._marker=null);var Oe=ke.getMap(),Ge=Oe.getView().getProjection(),Be=transform$1([t.lon,t.lat],"EPSG:4326",Ge),je=ke._measureSource.getFeatures()[0].getGeometry().getClosestPoint(Be),Ve=new Point$1(je);ke._marker=new Feature({geometry:Ve}),logger$a.trace(Ve),ke._marker.setStyle(ke._markerStyle),ke._measureSource.addFeature(ke._marker)}static __updateProfileMarker(e,t){var ke=e;qa.__removeProfileMarker(ke),qa.__createProfileMarker(ke,t)}static __customRawProfileOperation(e,t){logger$a.log("__customRawProfileOperation");for(var ke=e,Oe=t.points,Ge=ke.getMap().getView().getProjection(),Be=0;Be<Oe.length;Be++){var je=Oe[Be],Ve=transform$1([je.lon,je.lat],"EPSG:4326",Ge),Ze=new Point$1(Ve);ke._marker=new Feature({geometry:Ze}),logger$a.trace(Ze);var Qe=qa.DEFAULT_STYLES.RESULTS,en=new CircleStyle({radius:Qe.imageRadius,stroke:new Stroke({color:Qe.imageStrokeColor,width:Qe.imageStrokeWidth}),fill:new Fill({color:Qe.imageFillColor})});ke._marker.setStyle(new Style$1({image:en})),ke._measureSource.addFeature(ke._marker)}}static __customRawProfileMouseOverEvent(e,t){logger$a.log("__customRawProfileMouseOverEvent",e,t)}static DISPLAY_PROFILE_LIB_AMCHARTS(e,t,ke){if(logger$a.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),typeof AmCharts>"u"){logger$a.log("Lib. AmCharts is not loaded !");return}var Oe=ProfileElevationPathDOM.displayProfileLibAmCharts(e,t,ke,qa);Oe&&(this._profile=Oe)}static DISPLAY_PROFILE_LIB_D3(e,t,ke){if(logger$a.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),typeof d3>"u"){logger$a.log("Lib. D3 is not loaded !");return}var Oe=ProfileElevationPathDOM.displayProfileLibD3(e,t,ke,qa);Oe&&(this._profile=Oe)}static DISPLAY_PROFILE_RAW(e,t,ke){logger$a.trace("ElevationPath.DISPLAY_PROFILE_RAW");var Oe=ProfileElevationPathDOM.displayProfileRaw(e,t,ke,qa);Oe&&(this._profile=Oe)}static DISPLAY_PROFILE_BY_DEFAULT(e,t,ke){logger$a.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var Oe=ProfileElevationPathDOM.displayProfileByDefault(e,t,ke,qa);Oe&&(this._profile=Oe)}setMap(e){if(logger$a.trace("ElevationPath::setMap"),e&&(this.options.active&&(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this),this.options.export)){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var ke=this;this.export.on("export:compute",Oe=>{ke.dispatchEvent({type:"export:compute",content:Oe.content})})}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getActive(){return logger$a.trace("ElevationPath::getActive"),this.options.active}setActive(e){logger$a.trace("ElevationPath::setActive"),this.options.active=e}getData(){return Helper.assign({type:"elevationpath"},this._data)}setData(e){this._data=e}getContainer(){return this._container}getLayer(){return this._measureVector}setLayer(e){if(!e){this._measureVector=null;return}if(!(e instanceof VectorLayer)){logger$a.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._drawStyleFinish),this._measureVector=e,this._measureSource=e.getSource()}getGeoJSON(){var e=this._measureVector.getSource().getFeatures(),t=new GeoJSON({defaultStyle:this._drawStyleFinish}),ke=t.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return ke}getStyle(){return this._drawStyleFinish}clean(e){logger$a.trace("ElevationPath::clean");var t=this.getMap();this._panelContainer.style.display="none",this._pictoButton.setAttribute("aria-pressed",!1),this._removeProfile(),this._removeMeasureInteraction(t,typeof e<"u"?e:!1),this.setLayer()}init(){this._pictoButton.setAttribute("aria-pressed",!0),this._panelContainer.style.display="block",this._displayProfile(this._data),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden"}_initialize(e){logger$a.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,export:!1,elevationOptions:{outputFormat:"json"},layerDescription:{title:"Profil altimétrique",description:"Mon profil altimétrique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},Helper.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var t=e.displayProfileOptions||{};this.export=null;var ke=t.apply;this.options.displayProfileOptions.apply=typeof ke=="function"?ke:qa.DISPLAY_PROFILE_BY_DEFAULT;var Oe=t.target;this.options.displayProfileOptions.target=typeof Oe<"u"?Oe:null;var Ge=e.stylesOptions||{};this.options.stylesOptions.draw=Ge.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=Ge.marker||{},this._createStylingMarker()}_initializeContainer(){logger$a.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoButton=this._createShowElevationPathPictoElement();e.appendChild(t),this.options.active&&this._pictoButton.click();var ke=this._panelContainer=this._createElevationPathPanelElement(),Oe=this._createElevationPathPanelDivElement();ke.appendChild(Oe);var Ge=this._createElevationPathPanelHeaderElement();Oe.appendChild(Ge);var Be=this._createElevationPathPanelProfilElement();this._profileContainer=Be.firstChild,Oe.appendChild(Be);var je=this._waitingContainer=this._createElevationPathWaitingElement();Oe.appendChild(je);var Ve=this._infoContainer=this._createElevationPathInformationsElement();return Oe.appendChild(Ve),this.options.displayProfileOptions.target===null&&e.appendChild(ke),e}_createStylingMarker(){logger$a.trace("ElevationPath::_createStylingMarker ");var e=qa.DEFAULT_STYLES.MARKER;logger$a.trace("style marker",e),this.options.stylesOptions.marker instanceof ImageStyle&&(e=this.options.stylesOptions.marker),this._markerStyle=new Style$1({image:e})}_createStylingDraw(){logger$a.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;logger$a.trace("style start",e.start);var t={image:Measures.DEFAULT_POINTER_STYLE,stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof ImageStyle&&(t.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof Stroke&&(t.stroke=e.start),this._drawStyleStart=new Style$1(t),logger$a.trace("style finish",e.finish);var ke={stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof Stroke&&(ke.stroke=e.finish),this._drawStyleFinish=new Style$1(ke)}_createStylingProfile(){logger$a.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;logger$a.trace("style profile",e);var t=qa.DEFAULT_STYLES.PROFILE;Object.keys(t).forEach(ke=>{if(!e.hasOwnProperty(ke))e[ke]=t[ke];else{var Oe=t[ke];typeof Oe=="object"&&(Helper.mergeParams(Oe,e[ke]),e[ke]=Oe)}})}_initMeasureInteraction(e){logger$a.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new VectorSource,this._measureVector=new VectorLayer({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure:profil",e.addLayer(this._measureVector),e.getControls().forEach(t=>{if(t instanceof LayerSwitcher){var ke=this._measureVector.gpLayerId;t._layers[ke].title===ke&&t.addLayer(this._measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}}))}_addMeasureInteraction(e){logger$a.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new Draw({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",t=>{logger$a.trace("drawstart",t),this._marker!==null&&(this._measureSource.removeFeature(this._marker),this._marker=null),this._lastSketch!==null&&(this._measureSource.removeFeature(this._lastSketch),this._lastSketch=null),this._currentSketch=t.feature;for(var ke=this._measureSource.getFeatures(),Oe=0;Oe<ke.length;Oe++)this._measureSource.removeFeature(ke[Oe]);this.dispatchEvent("elevationpath:drawstart")}),this._measureDraw.on("drawend",t=>{logger$a.trace("drawend",t),this.dispatchEvent("elevationpath:drawend"),this._lastSketch=this._currentSketch,typeof this.options.elevationOptions.onSuccess>"u"&&this.options.displayProfileOptions.target===null&&(this._panelContainer.style.display="block"),this._measureDraw.setActive(!1),this._requestService()}))}_removeMeasureInteraction(e,t){logger$a.trace("ElevationPath::_removeMeasureInteraction()"),e&&(t&&this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))}_getGeometry(){if(this._currentSketch===null){logger$a.warn("Current Feature undefined !?");return}for(var e=[],t=this.getMap(),ke=t.getView().getProjection(),Oe="EPSG:4326",Ge=this._currentSketch.getGeometry().getCoordinates(),Be=0;Be<Ge.length;Be++){var je=Ge[Be],Ve=je;ke!==Oe&&(Ve=transform$1(je,ke,Oe)),e.push({lon:Math.round(Ve[0]*1e8)/1e8,lat:Math.round(Ve[1]*1e8)/1e8})}return e}_getLength(){if(this._currentSketch===null){logger$a.warn("Current Feature undefined !?");return}for(var e=0,t=this.getMap(),ke=t.getView().getProjection(),Oe="EPSG:4326",Ge=this._currentSketch.getGeometry().getCoordinates(),Be=0,je=Ge.length-1;Be<je;++Be){var Ve=transform$1(Ge[Be],ke,Oe),Ze=transform$1(Ge[Be+1],ke,Oe);Ve[0]=Math.round(Ve[0]*1e8)/1e8,Ve[1]=Math.round(Ve[1]*1e8)/1e8,Ze[0]=Math.round(Ze[0]*1e8)/1e8,Ze[1]=Math.round(Ze[1]*1e8)/1e8,e+=getDistance(Ve,Ze)}return e}_getSketchCoords(){if(this._currentSketch===null){logger$a.warn("Current Feature undefined !?");return}for(var e=this.getMap(),t=e.getView().getProjection(),ke="EPSG:4326",Oe=[],Ge=this._currentSketch.getGeometry().getCoordinates(),Be=0;Be<Ge.length;Be++){var je=transform$1(Ge[Be],t,ke);je[0]=Math.round(je[0]*1e8)/1e8,je[1]=Math.round(je[1]*1e8)/1e8,Oe.push(je)}return Oe}_requestService(){logger$a.trace("ElevationPath::_requestService");var e=this._getGeometry();if(logger$a.trace("geometry",e),!e){logger$a.warn("missing geometry !?");return}var t={};Helper.mergeParams(t,this.options.elevationOptions),Helper.mergeParams(t,{apiKey:t.apiKey||this.options.apiKey}),typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),Helper.mergeParams(t,{ssl:t.ssl});var ke=this,Oe=this.options.elevationOptions.onFailure!==null&&typeof this.options.elevationOptions.onFailure=="function",Ge=this.options.elevationOptions.onSuccess!==null&&typeof this.options.elevationOptions.onSuccess=="function",Be=function(Ze){logger$a.trace(Ze),Ze&&(ke._panelContainer.style.display="block",ke._data&&(ke._data={}),ke._data=ke._computeElevationMeasure(Ze.elevations),ke._displayProfile(ke._data),ke._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",ke._waiting=!1,ke._measureDraw.setActive(!0)),Ge&&ke.options.elevationOptions.onSuccess.call(ke,ke.getData())},je=function(Ze){ke._panelContainer.style.display="none",logger$a.error(Ze.message),ke._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",ke._waiting=!1,ke._measureDraw.setActive(!0),Oe&&ke.options.elevationOptions.onFailure.call(ke,Ze)};Helper.mergeParams(t,{onSuccess:Be,onFailure:je});var Ve=t.sampling||200;Ve>0&&Helper.mergeParams(t,{sampling:Ve}),Helper.mergeParams(t,{positions:e}),logger$a.trace("options du service",t),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",Gp$1.Services.getAltitude(t)}_computeElevationMeasure(e){logger$a.trace("ElevationPath::_computeElevationMeasure",e);var t=e;console.log(t);var ke="m",Oe=this._getSketchCoords();if(Oe){t[0].dist=0,t[0].slope=0,t[0].lat=Math.round(t[0].lat*1e4)/1e4,t[0].lon=Math.round(t[0].lon*1e4)/1e4;for(var Ge=0,Be=0,je=0,Ve=0,Ze=0,Qe=0,en=[],tn=1;tn<t.length;tn++){var an=[t[tn].lon,t[tn].lat],cn=getDistance(an,[t[tn-1].lon,t[tn-1].lat]),dn=cn+Ze,hn=t[tn].z,fn=t[tn-1].z;hn<0&&(hn=0),fn<0&&(fn=0);var pn=hn-fn;pn<0?(Ge+=cn,Ve+=pn):pn>0&&(Be+=cn,je+=pn),Ze=dn,t[tn].dist=dn,en.push(Ze),Qe+=pn?Math.abs(Math.round(pn/dn*100)):0,t[tn].slope=pn?Math.abs(Math.round(pn/dn*100)):0;var mn=t[tn].slope;mn>15&&mn<30?t[tn].color="#005b4c":mn>30&&mn<45?t[tn].color="#00362d":mn>45?t[tn].color="#00120f":t[tn].color="#00B798",t[tn].lat=Math.round(t[tn].lat*1e4)/1e4,t[tn].lon=Math.round(t[tn].lon*1e4)/1e4}logger$a.trace("List Distances",en);for(var yn=t[0].z,Cn=t[0].z,wn=t[0].slope,bn=0;bn<t.length;bn++){var Sn=t[bn];Sn.z<-100&&(Sn.z=0),Sn.z>Cn&&(Cn=Sn.z),Sn.z<yn&&(yn=Sn.z),Sn.slope>wn&&(wn=Sn.slope)}return{greaterSlope:wn,meanSlope:Math.round(Qe/t.length),distancePlus:Be,distanceMinus:Ge,ascendingElevation:je,descendingElevation:Ve,altMin:yn.toLocaleString(),altMax:Cn.toLocaleString(),distance:this._getLength(),unit:ke,points:t}}}_displayProfile(e){logger$a.trace("ElevationPath::_displayProfile",e),this._updateInfoContainer();var t=this.options.displayProfileOptions.target;t&&t.appendChild(this._panelContainer),t=this._profileContainer;var ke=this,Oe=this.options.displayProfileOptions.apply;Oe.call(this,e,t,ke);var Ge=this.options.displayProfileOptions,Be=document.getElementById("GPelevationPathPanelInfo-"+this._uid);Be&&(Ge.totalDistance||Ge.greaterSlope||Ge.meanSlope||Ge.ascendingElevation||Ge.descendingElevation)&&(Be.style.display="block"),this.dispatchEvent({type:"elevationpath:compute"})}_updateInfoContainer(){logger$a.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,t=this.options.displayProfileOptions.meanSlope,ke=this.options.displayProfileOptions.greaterSlope,Oe=this.options.displayProfileOptions.ascendingElevation,Ge=this.options.displayProfileOptions.descendingElevation,Be=this._infoContainer;if(Be.childElementCount)for(;Be.firstChild;)Be.removeChild(Be.firstChild);e&&this._addElevationPathInformationsItem("Distance totale : ",Math.round(this._data.distance).toLocaleString()+" m"),Oe&&this._addElevationPathInformationsItem("Dénivelé positif : ",this._data.ascendingElevation.toLocaleString()+" m"),Ge&&this._addElevationPathInformationsItem("Dénivelé négatif : ",this._data.descendingElevation.toLocaleString()+" m"),t&&this._addElevationPathInformationsItem("Pente moyenne : ",this._data.meanSlope.toLocaleString()+" %"),ke&&this._addElevationPathInformationsItem("Plus forte pente : ",this._data.greaterSlope.toLocaleString()+" %")}_removeMeasure(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),t=0;t<e.length;t++)this._measureSource.removeFeature(e[t])}}_removeProfile(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)}onShowElevationPathClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t,{current:"ElevationPath"});var ke=this._pictoButton.ariaPressed;ke==="true"?(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(t),this._addMeasureInteraction(t)):(this._panelContainer.style.display="none",e&&e.target.dataset&&e.target.dataset.removeMeasure?e.target.dataset.removeMeasure==="true"?this._removeMeasure():(this._lastSketch=null,this._currentSketch=null):this._removeMeasure(),this._removeProfile(),e&&e.target.dataset&&e.target.dataset.removeLayer?this._removeMeasureInteraction(t,e.target.dataset.removeLayer==="true"):this._removeMeasureInteraction(t,!0))}onOpenElevationPathInfoClick(){var e=this._infoContainer;e.className==="GPelementVisible gpf-visible"?(clearTimeout(this._timerHdlr),e.className="GPelementHidden gpf-hidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){e.className="GPelementHidden gpf-hidden"},4e3)}},cu(qa,"DEFAULT_STYLES",{MARKER:new Icon({src:Marker.lightOrange,anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}}),qa);Object.assign(ElevationPath.prototype,ElevationPathDOM);Object.assign(ElevationPath.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ElevationPath=ElevationPath);var logger$9=LoggerByDefault.getLogger("layerimport"),ya,LayerImport=(ya=class extends ControlExtended{constructor(e){if(e=e||{},super(e),this.CLASSNAME="LayerImport",!(this instanceof ya))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this._initialize(e),this._container=this._initContainer(e),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){var t=this;e.getLayers().on("remove",function(ke){ke.element.gpResultLayerId==="layerimport:MAPBOX"&&ke.element.gpEditorId&&t._mapBoxPanel&&t._importPanel&&(t.cleanMapBoxResults(ke.element.gpEditorId),t._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),t._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"))},t),this.draggable&&Draggable.dragElement(this._importPanel,this._importPanelHeader,e.getTargetElement()),this.collapsed||this._showImportButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$9.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showImportButton.click(),this.collapsed=e)}getStaticImportContent(){return this.contentStatic}getServiceImportContent(){return this.contentService}getName(){return this._name}getContainer(){return this._container}_initialize(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},editor:{}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new Style$1({image:ya.DefaultStyles.image,stroke:ya.DefaultStyles.stroke,fill:ya.DefaultStyles.fill,text:ya.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new Style$1({image:ya.DefaultStyles.image,stroke:ya.DefaultStyles.stroke,fill:ya.DefaultStyles.fill,text:ya.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new Style$1({image:ya.DefaultStyles.image,stroke:ya.DefaultStyles.stroke,fill:ya.DefaultStyles.fill,text:ya.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions.MapBox.defaultStyle:this.options.vectorStyleOptions.MapBox.defaultStyle=new Style$1({image:ya.DefaultStyles.image,stroke:ya.DefaultStyles.stroke,fill:ya.DefaultStyles.fill,text:ya.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.editor?this.options.vectorStyleOptions.MapBox.editor=e.vectorStyleOptions.MapBox.editor:this.options.vectorStyleOptions.MapBox.editor={title:!0,collapse:!1,themes:!1,layers:!0,style:!0,filter:!1,legend:!0,group:!1},e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.hasOwnProperty("display")?this.options.vectorStyleOptions.MapBox.display=e.vectorStyleOptions.MapBox.display:this.options.vectorStyleOptions.MapBox.display=!0,Array.isArray(e.layerTypes)){for(var t=[],ke=0;ke<e.layerTypes.length;ke++)t.push(e.layerTypes[ke]);this.options.layerTypes=t}Helper.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportButton=null,this._importPanel=null,this._panelCloseButton=null,this._importPanelHeader=null,this._importPanelTitle=null,this._importPanelReturnPicto=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapPanelHeader=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxPanelHeader=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this._hasMapBoxResults=!1,this.contentStatic=null,this._url=null,this._file=null,this._name=null}_checkInputOptions(e){if(e.layerTypes){var t=e.layerTypes;if(!Array.isArray(t))logger$9.warn(`[ol.control.LayerImport] 'options.layerTypes' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]`),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"];else{for(var ke=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],Oe=[],Ge=0;Ge<t.length;Ge++)typeof t[Ge]!="string"?(Oe.push(Ge),logger$9.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+t[Ge]+")")):(t[Ge]=t[Ge].toUpperCase(),ke.indexOf(t[Ge])===-1&&(Oe.push(Ge),logger$9.log("[ol.control.LayerImport] options.layerTypes : "+t[Ge]+" is not a supported type")),t[Ge]==="GEOJSON"&&(t[Ge]="GeoJSON"),t[Ge]==="MAPBOX"&&(t[Ge]="MAPBOX"));if(Oe.length!==0)for(var Be=Oe.length-1;Be>=0;Be--)t.splice(Oe[Be],1)}}}_initDefaultStyles(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new Style$1({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var t=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new Style$1({image:t.image,stroke:t.stroke,fill:t.fill,text:t.text});var ke=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new Style$1({image:ke.image,stroke:ke.stroke,fill:ke.fill,text:ke.text});var Oe=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new Style$1({image:Oe.image,stroke:Oe.stroke,fill:Oe.fill,text:Oe.text})}_initImportTypes(){this._currentImportType=this.options.layerTypes[0]||"KML",this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"}_initContainer(){var e=this._createMainContainerElement(),t=this._showImportButton=this._createShowImportPictoElement();e.appendChild(t);var ke=this._importPanel=this._createImportPanelElement(),Oe=this._createImportPanelDivElement();ke.appendChild(Oe);var Ge=this._importPanelHeader=this._createImportPanelHeaderElement(),Be=this._importPanelReturnPicto=this._createImportPanelReturnPictoElement();Ge.appendChild(Be);var je=this._importPanelTitle=this._createImportPanelTitleElement();Ge.appendChild(je);var Ve=this._panelCloseButton=this._createImportPanelCloseElement();Ge.appendChild(Ve),Oe.appendChild(Ge);var Ze=this._formContainer=this._initInputFormElement();Oe.appendChild(Ze);var Qe=this._getCapPanel=this._createImportGetCapPanelElement(),en=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();Qe.appendChild(en),Oe.appendChild(Qe);var tn=this._mapBoxPanel=this._createImportMapBoxPanelElement(),an=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();tn.appendChild(an);var cn=this._loadingContainer=this._createLoadingElement();tn.appendChild(cn),Oe.appendChild(tn);var dn=this._waitingContainer=this._createImportWaitingElement();return Oe.appendChild(dn),e.appendChild(ke),e}_initInputFormElement(){var e=this._createImportPanelFormElement(),t=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(t);var ke=this._createImportStaticParamsContainer(this.options.layerTypes[0]),Oe=this._createStaticNameLabel();ke.appendChild(Oe);var Ge=this._createStaticModeChoiceDiv(),Be=this._createStaticLocalChoiceDiv();Ge.appendChild(Be);var je=this._createStaticUrlChoiceDiv();Ge.appendChild(je),ke.appendChild(Ge);var Ve=this._createStaticLocalInputDiv();Ve.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),Ve.appendChild(this._staticLocalImportInput),ke.appendChild(Ve);var Ze=this._createStaticUrlInputDiv();Ze.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),Ze.appendChild(this._staticUrlImportInput),ke.appendChild(Ze),e.appendChild(ke);var Qe=this._createServiceParamsContainer(this.options.layerTypes[0]),en=this._createServiceUrlDiv();en.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),en.appendChild(this._serviceUrlImportInput),Qe.appendChild(en),e.appendChild(Qe);var tn=this._createImportSubmitFormElement();return e.appendChild(tn),e}_onShowImportClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._showImportButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this._hasMapBoxResults?(this._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),this._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):this._hasGetCapResults?(this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):(this._getCapPanel.classList.replace("GPelementVisible","GPelementHidden"),this._getCapPanel.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"),this._displayFormContainer())}_onImportTypeChange(e){this._currentImportType=e.target.value,this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1)}_onStaticImportTypeChange(e){this._currentStaticImportType=e.target.value}_onGetCapPanelClose(){(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&this.cleanGetCapResultsList()}_onMapBoxPanelClose(){this.cleanMapBoxResultsList(),this._loadingContainer.className="",this._importPanelReturnPicto.classList.replace("GPelementVisible","GPelementHidden"),this._importPanelReturnPicto.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden")}_onReturnPictoClick(e){this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"),this._loadingContainer.className=""}_onImportSubmit(){logger$9.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?(this.setCollapsed(!0),this._importStaticLayer()):this._importServiceLayers()}_importStaticLayer(){var e,t=document.getElementById(this._addUID("GPimportName"));t&&(e=t.value||"",logger$9.log("import layer name : "+e)),this._currentStaticImportType==="local"?(logger$9.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):this._currentStaticImportType==="url"&&(logger$9.log("import static layer from url"),this._importStaticLayerFromUrl(e))}_importStaticLayerFromUrl(e){var t=this._staticUrlImportInput.value;if(logger$9.log("url : ",t),t.length===0){logger$9.error("[ol.control.LayerImport] url parameter is mandatory");return}t.trim&&(t=t.trim()),this._url=t,e||(e=this._url.substring(this._url.lastIndexOf("/")+1,this._url.lastIndexOf("."))),this._name=e,this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(t=ProxyUtils.proxifyUrl(t,this.options.webServicesOptions));var ke=this;Gp$1.Protocols.XHR.call({url:t,method:"GET",timeOut:15e3,onResponse:function(Oe){ke._hideWaitingContainer(),ke._addFeaturesFromImportStaticLayer(Oe,e)},onFailure:function(Oe){ke._hideWaitingContainer(),logger$9.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",Oe)}})}_importStaticLayerFromLocalFile(e){var t=this._staticLocalImportInput.files[0];if(!t){logger$9.warn("[ol.control.LayerImport] missing file");return}this._file=t,e||(e=this._file.name.substring(this._file.name.lastIndexOf("/")+1,this._file.name.lastIndexOf("."))),this._name=e;var ke=new FileReader,Oe=this;ke.onerror=Ge=>{Oe._hideWaitingContainer(),logger$9.error("error fileReader : ",Ge)},ke.onprogress=()=>{logger$9.log("onprogress")},ke.onloadstart=()=>{Oe._displayWaitingContainer(),logger$9.log("onloadstart")},ke.onabort=()=>{Oe._hideWaitingContainer(),logger$9.log("onabort")},ke.onloadend=Ge=>{logger$9.log("onloadend : ",Ge)},ke.onload=Ge=>{logger$9.log("fileReader onload - file content : ",Ge.target.result),Oe._hideWaitingContainer(),Oe._addFeaturesFromImportStaticLayer(Ge.target.result,e)},ke.readAsText(t)}_addFeaturesFromImportStaticLayer(e,t){var ke=this.getMap();if(!(!ke||!e)){var Oe=null,Ge=null,Be=null,je=null;if(this.contentStatic=e,this._currentImportType==="MAPBOX"){this._hasMapBoxResults=!0;var Ve=this,Ze=JSON.parse(e),Qe=Ze.sources,en=Object.keys(Qe).length>1?1:0;for(var tn in Qe)if(Qe.hasOwnProperty(tn)){var an="",cn="",dn=null,hn=null,fn=null,pn=null;if(Ze.metadata){for(var mn in Ze.metadata)if(Ze.metadata.hasOwnProperty(mn)){var yn=mn.split(":");if(yn[0]==="geoportail"){var Cn=yn[1];if(Cn==="title"){an=Ze.metadata[mn];continue}if(Cn==="description"){cn=Ze.metadata[mn];continue}if(Cn==="quicklookUrl"){dn=Ze.metadata[mn];continue}if(Cn==="legends"){hn=Ze.metadata[mn];continue}if(Cn==="metadata"){fn=Ze.metadata[mn];continue}if(Cn==="originators"){pn=Ze.metadata[mn];continue}}}}an||(an="Couche MapBox"),cn||(cn="Couche MapBox"),an=en?an+"("+tn+")":an;var wn=Qe[tn],bn=wn.type;if(bn==="vector"){var Sn=wn.url,Mn=wn.tiles,Tn=Ze.sprite;if(Sn&&Sn.indexOf("mapbox://")===0){var En=this._url;if(En){if(Mn=["a","b","c","d"].map(function(Hn){var Fn=Sn.replace("mapbox://",""),Hi=En.split("?")[1];return"https://"+Hn+".tiles.mapbox.com/v4/"+Fn+"/{z}/{x}/{y}.vector.pbf?"+Hi}),Tn.indexOf("mapbox://")===0){var An=En.split("?");Ze.sprite=An[0]+"/sprite?"+An[1]}}else logger$9.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(Mn)Be=new MVT({featureClass:Feature}),Ge=new VectorTile({attributions:wn.attribution,format:Be,urls:Mn}),Ge._title=an,Ge._description=cn,Ge._quicklookUrl=dn,Ge._metadata=fn,Ge._legends=hn,Ge._originators=pn,Ge.on("tileloadstart",function(Hn){Ve._loadingContainer.className="GPmapLoadingVisible"}),Ge.on("tileloadend",function(Hn){Ve._loadingContainer.className=""}),Ge.on("tileloaderror",function(Hn){Ve._loadingContainer.className=""}),Oe=new VectorTileLayer({source:Ge,visible:!1,declutter:!0}),Oe.id=tn,Oe.gpResultLayerId="layerimport:"+this._currentImportType;else if(Sn){Be=new MVT({featureClass:Feature}),Oe=new VectorTileLayer({visible:!1,declutter:!0}),Oe.id=tn,Oe.gpResultLayerId="layerimport:"+this._currentImportType;var Ln=new TileJSON({url:Sn}),Rn=Ln.on("change",function(){if(Ln.getState()==="ready"){for(var Hn=Ln.getTileJSON(),Fn=Array.isArray(Hn.tiles)?Hn.tiles:[Hn.tiles],Hi=0;Hi<Fn.length;Hi++){var zi=Fn[Hi];zi.indexOf("http")!==0&&(Fn[Hi]=Sn+zi)}Ge=new VectorTile({attributions:Ln.getAttributions()||Hn.attribution,format:Be,urls:Fn}),Ge._title=an,Ge._description=cn,Ge._quicklookUrl=dn,Ge._metadata=fn,Ge._legends=hn,Ge._originators=pn,Ge.on("tileloadstart",function(Oi){Ve._loadingContainer.className="GPmapLoadingVisible"}),Ge.on("tileloadend",function(Oi){Ve._loadingContainer.className=""}),Oe.setSource(Ge),Oe.set("mapbox-extension",Hn.vector_layers),unByKey(Rn)}})}}else if(bn==="geojson"){var Gn=wn.data;Be=new GeoJSON,Ge=new VectorTile({attributions:wn.attribution,format:Be,url:Gn}),Ge._title=an,Ge._description=cn,Ge._quicklookUrl=dn,Ge._metadata=fn,Ge._legends=hn,Ge._originators=pn,Oe=new VectorTileLayer({source:Ge,visible:!1,declutter:!0}),Oe.id=tn,Oe.gpResultLayerId="layerimport:"+this._currentImportType}else{logger$9.warn("Type MapBox format unknown !");return}var Nn=JSON.parse(JSON.stringify(Ze));if(en){for(var jn=Nn.layers,Dn=0;Dn<jn.length;Dn++){var Ci=jn[Dn];if(Ci.source!==tn){jn.splice(Dn,1);continue}}for(var Jn in Nn.sources)Nn.sources.hasOwnProperty(Jn)&&Jn!==tn&&delete Nn.sources[Jn]}var Ki={id:tn,styles:Nn,layer:Oe,options:{title:t||an,description:cn,quicklookUrl:dn,metadata:fn,legends:hn,originators:pn}};(function(Hn){var Fn=()=>{applyStyle(Hn.layer,Hn.styles,{source:Hn.id}).then(function(){var Oi=!0;Hn.layer.setVisible(Oi);var Vi=1;Hn.layer.setOpacity(Vi)}).then(function(){var Oi=ke.getView().getProjection().getCode();ke.getView()&&Hn.styles.center&&Hn.styles.center.length&&ke.getView().setCenter(transform$1(Hn.styles.center,"EPSG:4326",Oi)),ke.getView()&&(Hn.styles.zoom||Hn.styles.zoom===0)&&ke.getView().setZoom(Hn.styles.zoom);var Vi=Hn.layer.getSource();if(ke.getView()&&ke.getSize()&&Vi.getExtent){var Bi=Vi.getExtent();Bi&&Bi[0]!==1/0&&ke.getView().fit(Bi,ke.getSize())}}).then(function(){Ve._hideFormContainer(),Ve._importPanelHeader.classList.replace("GPelementVisible","GPelementHidden"),Ve._importPanelHeader.classList.replace("gpf-visible","gpf-hidden"),Ve._importPanelTitle.innerHTML="Edition des styles";var Oi=new Editor({target:Ve._mapBoxResultsListContainer,style:JSON.parse(JSON.stringify(Hn.styles)),scope:this,events:{"editor:onloaded":Ve._onLoadedMapBox,"editor:layer:onclickvisibility":Ve._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":Ve._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":Ve._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":Ve._onChangeLegendValueSourceMapBox,"editor:legend:onclickedition":Ve._onDisplayLayerSourceMapBox},tools:Ve.options.vectorStyleOptions.MapBox.editor});return Oi.setContext("map",ke),Oi.setContext("layer",Hn.layer),Oi.createElement().then(function(){if(Oi.getLayers().length===0)throw new Error("Il n'existe pas de styles pour la source demandée !?")}).then(function(){Ve.options.vectorStyleOptions.MapBox.display&&(Ve._importPanelHeader.classList.replace("GPelementHidden","GPelementVisible"),Ve._importPanelHeader.classList.replace("gpf-hidden","gpf-visible"),Ve._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),Ve._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),Ve._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),Ve._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"))}).then(function(){var Vi=Ve._mapBoxResultsListContainer.getElementsByClassName("GPEditorMapBoxLayerTitleLabel");for(let Bi=0;Bi<Vi.length;Bi++){const Fi=Vi[Bi];Fi.textContent==="bckgrd"&&(Fi.textContent="Couleur de remplissage")}}).then(function(){Hn.layer.set("mapbox-editor",Oi.getID()),setTimeout(function(){ke.dispatchEvent({id:Oi.getID(),type:"editor:loaded",style:Hn.styles,layer:Hn.layer})},100)}).catch(function(Vi){throw Vi})}).then(function(){ke.dispatchEvent({id:Hn.id,type:"render:success",style:Hn.styles})}).catch(function(Oi){logger$9.error(Oi),ke.dispatchEvent({id:Hn.id,type:"render:failure",error:Oi})})};logger$9.warn(Hn.layer);var Hi=ke.get("mapbox-styles")||{},zi=Hn.id;Hi[zi]=Hn.styles,ke.set("mapbox-styles",Hi),Hn.layer.set("mapbox-styles",Hn.styles),ke.addLayer(Hn.layer),Hn.layer.getSource()?Fn():Hn.layer.once("change:source",Fn),ke.getControls().forEach(Oi=>{Oi instanceof LayerSwitcher&&Oi.addLayer(Hn.layer,Hn.options)})})(Ki)}}else{this._currentImportType==="KML"?(je=this.options.vectorStyleOptions.KML.defaultStyle,Be=new KML({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[je]})):this._currentImportType==="GPX"?(je=this.options.vectorStyleOptions.GPX.defaultStyle,Be=new GPX({defaultStyle:je})):this._currentImportType==="GeoJSON"&&(je=this.options.vectorStyleOptions.GeoJSON.defaultStyle,Be=new GeoJSON({defaultStyle:je}));var xn=Be.readProjection(e),qn=this._getMapProjectionCode(),$n=null;$n=Be.readFeatures(e,{dataProjection:xn,featureProjection:qn}),logger$9.log("loaded features : ",$n),Ge=new VectorSource({features:new Collection}),Ge.addFeatures($n),logger$9.trace(Ge),Ge._title=Ge._description=t,Oe=new VectorLayer({source:Ge,style:je}),Oe.gpResultLayerId="layerimport:"+this._currentImportType;var Ai=Be.readRootExtensions("geoportail:compute");if(Ai&&Object.keys(Ai).length!==0){var Ti={route:{class:Route,name:"itineraire"},isocurve:{class:Isocurve,name:"isocurve"},elevationpath:{class:ElevationPath,name:"profil altimetrique"}},Kn=Ai.type,Ii=Ai.transport;if(Kn){var Pi=Ti[Kn].name,Mi=Ii?Pi+" ("+Ii+")":Pi,tr=Ti[Kn].class;if(tr){Oe.gpResultLayerId="layerimport:COMPUTE",Oe.set("control",Kn),Oe.set("name",Pi),Oe.set("graph",Ii),Oe.set("data",Ai),Oe.set("title",Mi);var Br=new GeoJSON({defaultStyle:je}),Un=Br.writeFeatures($n,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});Oe.set("geojson",Un),this.getMap().getControls().forEach(Hn=>{Hn instanceof tr&&(Hn.setData(Ai),Hn.setLayer(Oe),Hn.init())})}}}if(ke.addLayer(Oe),ke.getView()&&ke.getSize()&&Ge.getExtent){var Qn=Ge.getExtent();Qn&&Qn[0]!==1/0&&ke.getView().fit(Qn,ke.getSize())}}}}_addFeaturesFromImportStaticLayerUrl(e,t){var ke=this.getMap();if(!(!ke||!e)){var Oe,Ge,Be;if(this._currentImportType==="MAPBOX"?logger$9.trace("Not yet implemented !"):(this._currentImportType==="KML"?Be=new KML({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):this._currentImportType==="GPX"?Be=new GPX({defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle}):this._currentImportType==="GeoJSON"&&(Be=new GeoJSON({defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle})),Oe=new VectorSource({url:e,format:Be}),this._currentImportType==="GPX"&&Oe.forEachFeature(function(Ve){Ve.getStyle()==null&&(logger$9.log("[ol.control.LayerImport] set default style for GPX feature"),Ve.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),this._currentImportType==="GeoJSON"&&Oe.forEachFeature(function(Ve){Ve.getStyle()==null&&(logger$9.log("[ol.control.LayerImport] set default style for GeoJSON feature"),Ve.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),Oe._title=Oe._description=t,Ge=new VectorLayer({source:Oe})),Ge.gpResultLayerId="layerimport:"+this._currentImportType,ke.addLayer(Ge),ke.getView()&&ke.getSize()&&Oe.getExtent){var je=Oe.getExtent();je&&je[0]!==1/0&&ke.getView().fit(je,ke.getSize())}}}_onLoadedMapBox(e){var t=e.target.data.obj,ke=this.getContext("layer");ke.get("mapbox-source")===t.source&&(ke.get("mapbox-editor"),e.target.editorID)}_onChangeVisibilitySourceMapBox(e){var t=e.target.data.obj,ke=e.target.srcElement,Oe=this.getContext("layer");if(Oe.get("mapbox-source")===t.source&&Oe.get("mapbox-editor")===e.target.editorID){for(var Ge=Oe.get("mapbox-styles"),Be=Ge.layers,je=0;je<Be.length;je++)if(Be[je].id===t.id){var Ve=Be[je].layout;Ve?Ve.visibility=ke.checked?"visible":"none":Be[je].layout={visibility:ke.checked?"visible":"none"};break}applyStyle(Oe,Ge,{source:t.source}).then(function(){}).catch(function(Ze){logger$9.error(Ze)})}}_onChangeScaleMinSourceMapBox(e){var t=e.target.data.obj,ke=e.target.srcElement,Oe=this.getContext("layer");if(Oe.get("mapbox-source")===t.source&&Oe.get("mapbox-editor")===e.target.editorID){for(var Ge=Oe.get("mapbox-styles"),Be=Ge.layers,je=0;je<Be.length;je++)if(Be[je].id===t.id){Be[je].minzoom=ke.value,ke.title=ke.value;break}applyStyle(Oe,Ge,{source:t.source}).then(function(){}).catch(function(Ve){logger$9.error(Ve)})}}_onChangeScaleMaxSourceMapBox(e){var t=e.target.data.obj,ke=e.target.srcElement,Oe=this.getContext("layer");if(Oe.get("mapbox-source")===t.source&&Oe.get("mapbox-editor")===e.target.editorID){for(var Ge=Oe.get("mapbox-styles"),Be=Ge.layers,je=0;je<Be.length;je++)if(Be[je].id===t.id){Be[je].maxzoom=ke.value,ke.title=ke.value;break}applyStyle(Oe,Ge,{source:t.source}).then(function(){}).catch(function(Ve){logger$9.error(Ve)})}}_onChangeLegendValueSourceMapBox(e){var t=e.target.data.obj,ke=e.target.srcElement,Oe=this.getContext("layer");if(Oe.get("mapbox-source")===t.source&&Oe.get("mapbox-editor")===e.target.editorID){for(var Ge=Oe.get("mapbox-styles"),Be=Ge.layers,je=0;je<Be.length;je++)if(Be[je].id===t.id){var Ve=Be[je].paint;Ve&&(Ve[ke.dataset.id]=ke.value);break}applyStyle(Oe,Ge,{source:t.source,updateSource:!0}).then(function(){}).catch(function(Ze){logger$9.error(Ze)})}}_onDisplayLayerSourceMapBox(e){var t=e.target.data.obj,ke=this.getContext("layer");if(ke.get("mapbox-source")===t.source&&ke.get("mapbox-editor")===e.target.editorID){var Oe=e.target.currentTarget.parentNode.id,Ge=Oe.substring(Oe.indexOf("-")+1,Oe.indexOf("_")),Be=this.getLayer(Ge);Be.collapse()}}_importServiceLayers(){if(this._currentImportType==="WFS"){logger$9.warn("[ol.control.LayerImport] WFS layer import is not implemented yet");return}this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!e){logger$9.error("[ol.control.LayerImport] url parameter is mandatory");return}logger$9.log("url : ",e),e.trim&&(e=e.trim());var t=e.indexOf("?");t<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":t===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(e=ProxyUtils.proxifyUrl(e,this.options.webServicesOptions)),this._displayWaitingContainer();var ke=this;Gp$1.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(Oe){ke._hideWaitingContainer(),ke._displayGetCapResponseLayers(Oe)},onFailure:function(Oe){ke._hideWaitingContainer(),logger$9.error("[ol.control.LayerImport] getCapabilities request failed : ",Oe)}})}_displayGetCapResponseLayers(e){var t,ke,Oe={content:null,title:null},Ge;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._hideFormContainer(),this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Couches accessibles",this._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),this._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"),this._hasGetCapResults=!0,this._currentImportType==="WMS"){t=new WMSCapabilities;var Be=this._getCapResponseWMS=t.read(e);if(logger$9.log("getCapabilities response : ",Be),Be&&Be.Capability&&Be.Capability.Layer){var je=Be.Capability.Layer;if(Array.isArray(je))for(var Ve=0;Ve<je.length;Ve++)this._displayGetCapResponseWMSLayer(je[Ve]);else this._displayGetCapResponseWMSLayer(je)}}else if(this._currentImportType==="WMTS"){t=new WMTSCapabilities;var Ze=this._getCapResponseWMTS=t.read(e);if(logger$9.log("getCapabilities response : ",Ze),Ze&&Ze.Contents&&Ze.Contents.Layer&&(ke=Ze.Contents.Layer,Array.isArray(ke))){this._getCapResponseWMTSLayers=ke;for(var Qe=0;Qe<ke.length;Qe++)if(Ge=this._getWMTSLayerProjection(ke[Qe],Ze),Ge&&typeof Ge=="string")if(get$3(Ge)||get$3(Ge.toUpperCase()))Oe={content:ke[Qe].Title,title:ke[Qe].Abstract||ke[Qe].Title},this._getCapResultsListContainer&&this._addImportGetCapResultLayer(Oe,Qe,this._getCapResultsListContainer);else{logger$9.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",ke[Qe]);continue}}}}_displayGetCapResponseWMSLayer(e,t){if(!e){logger$9.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");return}logger$9.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var ke=this._getMapProjectionCode(),Oe,Ge={content:null,title:null};if(t){var Be,je,Ve=["CRS","Style"];for(je=0;je<Ve.length;je++)if(Be=Ve[je],Array.isArray(t[Be])&&t[Be].length!==0)if(Array.isArray(e[Be])&&e[Be].length!==0)for(var Ze=0;Ze<t[Be].length;Ze++)e[Be].indexOf(t[Be][Ze])===-1&&e[Be].push(t[Be][Ze]);else e[Be]=t[Be];var Qe=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(je=0;je<Qe.length;je++)Be=Qe[je],t[Be]&&!e[Be]&&(e[Be]=t[Be])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){var en=e?e._container:t._container,tn=e?e.Title:t.Title;e._container=this._addImportGetCapResultListRubrique(tn,en).lastChild;for(var an=0;an<e.Layer.length;an++){for(var cn=!1,dn=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),hn=0;hn<dn.length;hn++)dn[hn].title===e.Title&&(cn=!0,e.Layer[an]._container=dn[hn].parentElement);cn||(e.Layer[an]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[an],e)}}}else{var fn=this._getCapResponseWMSLayers.length;if(Oe=this._getWMSLayerProjection(e,ke),!Oe)logger$9.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e);else{e._projection=Oe,Ge={content:e.Title,title:e.Abstract||e.Title};var pn=e._container;pn.localName==="ul"&&(pn=pn.lastChild),this._addImportGetCapResultLayer(Ge,fn,pn),this._getCapResponseWMSLayers[fn]=e}}}_onGetCapResponseLayerClick(e){if(e.target&&e.target.id){var t=parseInt(e.target.id.substr(23),10);if(isNaN(t))return;var ke;this._currentImportType==="WMS"?(ke=this._getCapResponseWMSLayers[t],this._addGetCapWMSLayer(ke)):this._currentImportType==="WMTS"&&(ke=this._getCapResponseWMTSLayers[t],this._addGetCapWMTSLayer(ke))}}_addGetCapWMSLayer(e){var t=this.getMap();if(!t){logger$9.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");return}if(!e){logger$9.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");return}var ke=this._getMapProjectionCode(),Oe={},Ge=this._getWMSLayerGetMapUrl();if(Ge)Oe.url=Ge;else{var Be=this._getCapRequestUrl.indexOf("?");Be!==-1?Oe.url=this._getCapRequestUrl.substring(0,Be):Oe.url=this._getCapRequestUrl}if(Oe.params={},e.Name)Oe.params.LAYERS=e.Name;else{logger$9.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e);return}Oe.params.SERVICE="WMS",this._getCapResponseWMS.version&&(Oe.params.VERSION=this._getCapResponseWMS.version);var je=e._projection;if(je)je!==ke&&(Oe.projection=je);else{logger$9.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");return}var Ve;if(e.Style&&Array.isArray(e.Style)){var Ze=e.Style[0];Oe.params.STYLES=Ze.Name,Ze.LegendURL&&Array.isArray(Ze.LegendURL)&&Ze.LegendURL.length!==0&&(Ve=Ze.LegendURL[0].OnlineResource)}var Qe=new TileWMS(Oe);this._getWMSLayerInfoForLayerSwitcher(e,Ve,Qe);var en={};en.source=Qe,this._getWMSLayerMinMaxResolution(e,ke,en),this._getWMSLayerExtent(e,ke,en);var tn=new TileLayer(en);if(tn.setExtent(en.extent),tn.gpResultLayerId="layerimport:WMS",e.queryable&&(tn.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(tn.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),t.addLayer(tn),t.getView()&&t.getSize()&&tn.getExtent){var an=tn.getExtent();an&&an[0]!==1/0&&t.getView().fit(an,t.getSize())}}_getWMSLayerGetMapUrl(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var t=this._getCapResponseWMS.Capability.Request.GetMap;if(t.DCPType&&Array.isArray(t.DCPType)&&t.DCPType.length!==0){var ke=t.DCPType[0];ke&&ke.HTTP&&ke.HTTP.Get&&(e=ke.HTTP.Get.OnlineResource)}}return e}_getWMSLayerProjection(e,t){var ke;if(!e||typeof e!="object"){logger$9.warn("missing layer information (from getCapabilities)");return}var Oe=e.CRS;if(Array.isArray(Oe)){if(Oe.includes(t))return ke=t,ke;var Ge,Be;for(Be=0;Be<Oe.length;Be++)if(Ge=Oe[Be],Ge&&typeof Ge=="string"&&(get$3(Ge)||get$3(Ge.toUpperCase())))return ke=Ge,ke}return ke}_getWMSLayerMinMaxResolution(e,t,ke){var Oe=get$3(t).getUnits();if(Oe==="m")e.MinScaleDenominator&&(ke.minResolution=e.MinScaleDenominator*28e-5),e.MaxScaleDenominator&&(ke.maxResolution=e.MaxScaleDenominator*28e-5);else if(Oe==="degrees"){var Ge=.05039999999999999/(Math.PI*6378137);e.MinScaleDenominator&&(ke.minResolution=e.MinScaleDenominator*Ge),e.MaxScaleDenominator&&(ke.maxResolution=e.MaxScaleDenominator*Ge)}}_getWMSLayerExtent(e,t,ke){if(!e){logger$9.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");return}var Oe=e.EX_GeographicBoundingBox,Ge=e.BoundingBox;if(Oe&&Array.isArray(Oe))t==="EPSG:4326"?ke.extent=Oe:ke.extent=transformExtent(Oe,"EPSG:4326",t);else if(Ge&&Array.isArray(Ge)){for(var Be,je,Ve=0;Ve<Ge.length;Ve++)if(Be=Ge[Ve].crs,je=Ge[Ve].extent,Be){if(Be===t){ke.extent=je;break}else if(typeof Be=="string"){var Ze=get$3(Be)?get$3(Be):get$3(Be.toUpperCase());if(Ze){if(Ze.getUnits()==="degrees"&&Be.toUpperCase().indexOf("EPSG")===0){var Qe=[je[1],je[0],je[3],je[2]];ke.extent=transformExtent(Qe,Ze,t)}else ke.extent=transformExtent(je,Ze,t);break}}}}}_getWMSLayerInfoForLayerSwitcher(e,t,ke){if(e.Title?(ke._title=e.Title,ke._description=e.Abstract?e.Abstract:e.Title):(ke._title=e.Name,ke._description=e.Abstract?e.Abstract:e.Name),t&&(ke._legends=[{url:t}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){ke._metadata=[];for(var Oe=0;Oe<e.MetadataURL.length;Oe++){var Ge=e.MetadataURL[Oe].OnlineResource;Ge&&ke._metadata.push({url:Ge})}}if(e.Attribution){var Be=e.Attribution;ke._originators={},Be.OnlineResource&&(ke._originators.url=Be.OnlineResource),Be.Title&&(ke._originators.name=ke._originators.attribution=Be.Title),Be.LogoURL&&Be.LogoURL.OnlineResource&&(ke._originators.logo=Be.LogoURL.OnlineResource)}}_addGetCapWMTSLayer(e){if(!e||!e.Identifier){logger$9.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");return}var t=this.getMap();if(t){var ke={};ke.layer=e.Identifier,this._getCapResponseWMTS.version&&(ke.version=this._getCapResponseWMTS.version);var Oe=this._getWMTSLayerGetTileUrl();if(Oe)ke.url=Oe;else{var Ge=this._getCapRequestUrl.indexOf("?");Ge!==-1?ke.url=this._getCapRequestUrl.substring(0,Ge):ke.url=this._getCapRequestUrl}var Be=this._getTMSParams(e);ke.matrixSet=Be.tms,ke.projection=Be.projCode,ke.tileGrid=new WMTSTileGrid({resolutions:Be.resolutions,matrixIds:Be.matrixIds,origin:Be.origin});var je,Ve;if(e.Style&&Array.isArray(e.Style))for(var Ze,Qe=0;Qe<e.Style.length&&(Ze=e.Style[Qe],je=Ze.Identifier,!Ze.isDefault);Qe++)Ze.LegendURL&&Array.isArray(Ze.LegendURL)&&Ze.LegendURL.length!==0&&(Ve=Ze.LegendURL[0].href);je==null&&logger$9.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),ke.style=je;var en;e.Format&&Array.isArray(e.Format)&&(en=e.Format[0]),en==null&&logger$9.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),ke.format=en;var tn=new WMTS$1(ke);e.Title?(tn._title=e.Title,tn._description=e.Abstract?e.Abstract:e.Title):(tn._title=e.Identifier,tn._description=e.Abstract?e.Abstract:e.Identifier),Ve&&(tn._legends=[{url:Ve}]);var an={};an.source=tn,an.extent=this._getWMTSLayerExtent(e);var cn;try{cn=new TileLayer(an),cn.setExtent(an.extent)}catch(hn){logger$9.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",hn);return}if(cn.gpResultLayerId="layerimport:WMTS",t.addLayer(cn),t.getView()&&t.getSize()&&cn.getExtent){var dn=cn.getExtent();dn&&dn[0]!==1/0&&t.getView().fit(dn,t.getSize())}}}_getWMTSLayerGetTileUrl(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var t=this._getCapResponseWMTS.OperationsMetadata.GetTile;t.DCP&&t.DCP.HTTP&&t.DCP.HTTP.Get&&Array.isArray(t.DCP.HTTP.Get)&&t.DCP.HTTP.Get.length!==0&&(e=t.DCP.HTTP.Get[0].href)}return e}_getWMTSLayerProjection(e,t){var ke;if(!e||typeof e!="object"){logger$9.warn("missing layer information (from getCapabilities)");return}if(!t||typeof t!="object"){logger$9.warn("missing getCapabilities response");return}if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var Oe=e.TileMatrixSetLink[0].TileMatrixSet,Ge;if(t.Contents&&Array.isArray(t.Contents.TileMatrixSet)){for(var Be=t.Contents.TileMatrixSet,je=0;je<Be.length;je++)if(Be[je].Identifier===Oe&&Be[je].TileMatrix){var Ve=Be[je];Ge=Ve.SupportedCRS,Ge&&typeof Ge=="string"&&(get$3(Ge)||get$3(Ge.toUpperCase()))&&(ke=Ge);break}}}return ke}_getTMSParams(e){var t={},ke=[],Oe=[],Ge=[],Be,je,Ve,Ze=this.getMap();if(Ze){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink))if(Be=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var Qe=this._getCapResponseWMTS.Contents.TileMatrixSet,en=0;en<Qe.length;en++)if(Qe[en].Identifier===Be&&Qe[en].TileMatrix){var tn=Qe[en],an,cn,dn,hn,fn;if(tn.SupportedCRS&&(je=tn.SupportedCRS,Ve=get$3(je)),Ve&&Ve.getUnits&&(fn=Ve.getUnits()),Array.isArray(tn.TileMatrix))for(var pn=0;pn<tn.TileMatrix.length;pn++)an=tn.TileMatrix[pn],an.Identifier!=null&&(cn=parseInt(an.Identifier,10),ke.push(cn)),dn=an.ScaleDenominator,fn==="degrees"?hn=dn*28e-5*180/(Math.PI*6378137):hn=dn*28e-5,Oe.push(hn),Ge=an.TopLeftCorner;Oe.sort!==void 0&&Oe.sort(function(mn,yn){return yn-mn}),ke.sort!==void 0&&ke.sort(function(mn,yn){return mn-yn})}}else logger$9.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);else return;return t.tms=Be,t.projCode=je,t.matrixIds=ke,t.resolutions=Oe,t.origin=Ge,t}}_getWMTSLayerExtent(e){var t,ke=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(t=transformExtent(e.WGS84BoundingBox,"EPSG:4326",ke)),t}_getMapProjectionCode(){var e=this.getMap();if(!e||!e.getView||!e.getView().getProjection){logger$9.warn("unable to get layerimport's map");return}var t=e.getView().getProjection().getCode();return t}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}_displayFormContainer(){this._formContainer.classList.replace("GPelementHidden","GPelementVisible"),this._formContainer.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Import de données"}_hideFormContainer(){this._formContainer.classList.replace("GPelementVisible","GPelementHidden"),this._formContainer.classList.replace("gpf-visible","gpf-hidden")}cleanGetCapResultsList(){if(this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)}cleanMapBoxResultsList(){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)}cleanMapBoxResults(e){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer){var t=this._mapBoxResultsListContainer.childNodes;for(let ke=0;ke<t.length;ke++){const Oe=t[ke];Oe.id==="GPEditorMapBoxContainer_ID_"+e&&Oe.remove()}}}},cu(ya,"DefaultStyles",{image:new Icon({src:Marker.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new Text({font:"16px Sans",textAlign:"left",fill:new Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new Stroke({color:"rgba(0, 0, 0, 1)",width:2})})}),ya);Object.assign(LayerImport.prototype,LayerImportDOM);Object.assign(LayerImport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerImport=LayerImport);var logger$8=LoggerByDefault.getLogger("geoportalattribution"),GeoportalAttribution=class tf extends Attribution{constructor(e){if(e=e||{},e.collapsible=!0,e.collapsed=!0,super(e),!(this instanceof tf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this}setMap(e){if(e!=null){var t=e.getControls();t.forEach(ke=>{if(!(ke instanceof tf)&&ke){for(var Oe=ke.element.classList,Ge=0;Ge<Oe.length;Ge++)if(Oe[Ge]==="ol-attribution"){t.remove(ke);break}}}),this._updateAttributions(e),e.on("moveend",()=>{this._updateAttributions(e)}),e.getLayers().on("add",()=>{this._updateAttributions(e)}),e.getLayers().on("remove",()=>{this._updateAttributions(e)})}super.setMap(e)}_updateAttributions(e){for(var t={},ke=e.getView(),Oe=ke.calculateExtent(e.getSize()),Ge=ke.getProjection().getCode(),Be=transformExtent(Oe,Ge,"EPSG:4326"),je=[Be[3],Be[0],Be[1],Be[2]],Ve=ke.getZoom(),Ze=e.getLayers().getArray(),Qe=0;Qe<Ze.length;Qe++)if(Ze[Qe].getSource)this._updateLayerAttributions(Ze[Qe],t,je,Ge,Ve);else if(Ze[Qe].getLayers){var en=Ze[Qe].getLayers();en.forEach(tn=>{tn.getSource?this._updateLayerAttributions(tn,t,je,Ge,Ve):logger$8.log("cannot find layer source in layergroup ",Ze[Qe])})}}_updateLayerAttributions(e,t,ke,Oe,Ge){if(!e){logger$8.trace("layer is null !?");return}var Be=e.getSource();if(!Be){logger$8.trace("source is not yet loaded !");return}t||(t={});var je=[],Ve=e.getVisible(),Ze=Be._originators;if(typeof Ze<"u"&&Be.setAttributions(),Ze&&Ve){for(var Qe=LayerUtils.getAttributions({extent:ke,crs:Oe,zoom:Ge,visibility:Ve,originators:Ze}),en=0;en<Qe.length;en++){var tn=Qe[en];t.hasOwnProperty(tn)||(je.push(tn),t[tn]=!0)}je.length!==0&&(Be.setAttributions(je),this.dispatchEvent({type:"attributions:update",attributions:je}))}}};window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=GeoportalAttribution);var MeasureLengthDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPmeasureLength"),r.className="GPwidget gpf-widget gpf-widget-button",r},_createShowMeasureLengthPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureLengthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-length fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une distance"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowMeasureLengthClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowMeasureLengthClick(ke)}),e}},logger$7=LoggerByDefault.getLogger("measurelength"),MeasureLength=class Kf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Kf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureLength",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$7.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(ke.gpShareMeasures||(ke.gpShareMeasures={}),ke.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$7.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$7.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$7.trace("call MeasureLength::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$7.trace("call MeasureLength::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandle(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$7.trace("call MeasureLength::format()");var t=this.getMap(),ke;if(this.options.geodesic){var Oe=e.getCoordinates();ke=0;for(var Ge=t.getView().getProjection(),Be=0,je=Oe.length-1;Be<je;++Be){var Ve=transform$1(Oe[Be],Ge,"EPSG:4326"),Ze=transform$1(Oe[Be+1],Ge,"EPSG:4326");ke+=getDistance(Ve,Ze)}}else ke=Math.round(e.getLength()*100)/100;var Qe;return ke>1e3?Qe=Math.round(ke/1e3*100)/100+" km":Qe=Math.round(ke*100)/100+" m",Qe}onShowMeasureLengthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$7.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")}};Object.assign(MeasureLength.prototype,Measures);Object.assign(MeasureLength.prototype,MeasureLengthDOM);Object.assign(MeasureLength.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureLength=MeasureLength);var MeasureAreaDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPmeasureArea"),r.className="GPwidget gpf-widget gpf-widget-button",r},_createShowMeasureAreaPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureAreaPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-area fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une surface"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowMeasureAreaClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowMeasureAreaClick(ke)}),e}},logger$6=LoggerByDefault.getLogger("measurearea"),MeasureArea=class Xf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Xf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureArea",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$6.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(ke.gpShareMeasures||(ke.gpShareMeasures={}),ke.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$6.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$6.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$6.trace("call MeasureArea::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$6.trace("call MeasureArea::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandler(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$6.trace("call MeasureArea::format()");var t;if(this.options.geodesic){var ke=e.clone(),Oe=ke.getLinearRing(0).getCoordinates();t=Math.abs(getArea(new Polygon([Oe])))}else t=e.getArea();var Ge;return t>1e6?Ge=Math.round(t/1e6*100)/100+" km<sup>2</sup>":t>1e5?Ge=Math.round(t/1e6*1e3)/1e3+" km<sup>2</sup>":t>1e3?Ge=Math.round(t/10)*10+" m<sup>2</sup>":Ge=Math.round(t*100)/100+" m<sup>2</sup>",Ge}onShowMeasureAreaClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$6.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")}};Object.assign(MeasureArea.prototype,Measures);Object.assign(MeasureArea.prototype,MeasureAreaDOM);Object.assign(MeasureArea.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureArea=MeasureArea);var MeasureAzimuthDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPmeasureAzimuth"),r.className="GPwidget gpf-widget gpf-widget-button",r},_createShowMeasureAzimuthPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureAzimuthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-azimuth fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer un azimut"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowMeasureAzimuthClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowMeasureAzimuthClick(ke)}),e}},logger$5=LoggerByDefault.getLogger("measureazimut"),MeasureAzimuth=class Zf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Zf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureAzimuth",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$5.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(ke.gpShareMeasures||(ke.gpShareMeasures={}),ke.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setGeodesic(e){this.options.geodesic=typeof e<"u"?e:!1}isGeodesic(){return this.options.geodesic}getContainer(){return this._container}_initialize(e){logger$5.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!1,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$5.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$5.trace("call MeasureAzimuth::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.on("pointermove",t=>this.onPointerMoveAzimutHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$5.trace("call MeasureAzimuth::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.un("pointermove",t=>this.onPointerMoveAzimutHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$5.trace("call MeasureAzimuth::format()");var t=this.getMap(),ke=t.getView().getProjection(),Oe=transform$1(e.getFirstCoordinate(),ke,"EPSG:4326"),Ge=transform$1(e.getLastCoordinate(),ke,"EPSG:4326");if(!this.options.geodesic){var Be=getDistance(Oe,Ge);if(logger$5.trace("measure between 2 points with geodesic method",Be),Be>500){var je=500/Be;logger$5.trace("%",je),Ge=transform$1(e.getCoordinateAt(je),ke,"EPSG:4326")}}var Ve=Math.PI/180,Ze=180/Math.PI,Qe=Ve*Oe[0],en=Ve*Ge[0],tn=Ve*Oe[1],an=Ve*Ge[1],cn=Math.sin(en-Qe)*Math.cos(an),dn=Math.cos(tn)*Math.sin(an)-Math.sin(tn)*Math.cos(an)*Math.cos(en-Qe),hn=Math.atan2(cn,dn),fn=Ze*hn;logger$5.trace("azimut",fn),fn<0&&(fn+=360);var pn=Math.round(fn*100)/100+" °";return pn}onShowMeasureAzimuthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$5.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")}onPointerMoveAzimutHandler(e){if(this.onPointerMoveHandler(e),this.sketch){var t=this.sketch.getGeometry();t.getCoordinates().length>2&&this.measureDraw.finishDrawing()}}};Object.assign(MeasureAzimuth.prototype,Measures);Object.assign(MeasureAzimuth.prototype,MeasureAzimuthDOM);Object.assign(MeasureAzimuth.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=MeasureAzimuth);LoggerByDefault.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var t="ol-custom-zoom";e.className=t,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var ke=document.createElement("div");ke.id=t,ke.classList.add("position"),ke.classList.add(t),this.container.appendChild(ke)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,t=this.element.childNodes;for(let Oe=0;Oe<t.length;Oe++){const Ge=t[Oe];if(Ge.classList.contains(this.options.className+"-in")){Ge.classList.add("GPzoomIn","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-in","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Ge.id="GPzoomIn",Ge.innerHTML="",Ge.removeAttribute("title"),Ge.setAttribute("aria-label","Zoomer");var ke=document.createElement("span");Ge.appendChild(ke),Ge.addEventListener?Ge.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):Ge.attachEvent&&Ge.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})}if(Ge.classList.contains(this.options.className+"-out")){Ge.classList.add("GPzoomOut","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-out","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Ge.id="GPzoomOut",Ge.innerHTML="",Ge.removeAttribute("title"),Ge.setAttribute("aria-label","Dézoomer");var ke=document.createElement("span");Ge.appendChild(ke),Ge.addEventListener?Ge.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):Ge.attachEvent&&Ge.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")})}}this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(ke=>{ke.element.classList.contains("ol-zoom")&&(ke.element.classList.add("ol-hidden"),ke.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const ke=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof ke=="string"?document.createTextNode(ke):ke;const Oe=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=Oe,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(isFullScreenSupported(t))if(isFullScreen(t))exitFullScreen(t);else{let ke;this.source_?ke=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:ke=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(ke):requestFullScreen(ke)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let ke=0,Oe=e.length;ke<Oe;++ke)unlistenByKey(e[ke]);e.length=0;const t=this.getMap();if(t){const ke=t.getOwnerDocument();isFullScreenSupported(ke)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let Oe=0,Ge=events.length;Oe<Ge;++Oe)e.push(listen(ke,events[Oe],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(r){const e=r.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&r.fullscreenEnabled)}function isFullScreen(r){return!!(r.webkitIsFullScreen||r.fullscreenElement)}function requestFullScreen(r){r.requestFullscreen?r.requestFullscreen():r.webkitRequestFullscreen&&r.webkitRequestFullscreen()}function requestFullScreenWithKeys(r){r.webkitRequestFullscreen?r.webkitRequestFullscreen():requestFullScreen(r)}function exitFullScreen(r){r.exitFullscreen?r.exitFullscreen():r.webkitExitFullscreen&&r.webkitExitFullscreen()}LoggerByDefault.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var t="ol-custom-full-screen";e.className=e.className||t,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||t+"-true",e.inactiveClassName=e.inactiveClassName||t+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein écran",super(e),this.CLASSNAME="FullScreen",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var ke=document.createElement("div");ke.id=t,ke.classList.add("position"),ke.classList.add(t),this.container.appendChild(ke)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0],t=document.createElement("span");e.appendChild(t),e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn","fr-btn--tertiary","gpf-btn--tertiary","gpf-btn","gpf-btn-icon"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.removeAttribute("title"),e.setAttribute("aria-label",this.options.tipLabel),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe)}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(ke=>{ke.element.classList.contains("ol-full-screen")&&(ke.element.classList.add("ol-hidden"),ke.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);const MAX_RATIO=.75,MIN_RATIO=.1;class OverviewMap extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",ke=e.tipLabel!==void 0?e.tipLabel:"Overview map",Oe=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof Oe=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Oe):this.collapseLabel_=Oe;const Ge=e.label!==void 0?e.label:"›";typeof Ge=="string"?(this.label_=document.createElement("span"),this.label_.textContent=Ge):this.label_=Ge;const Be=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,je=document.createElement("button");je.setAttribute("type","button"),je.title=ke,je.appendChild(Be),je.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const Ve=new Map$1({view:e.view,controls:new Collection,interactions:new Collection});this.ovmap_=Ve,e.layers&&e.layers.forEach(function(pn){Ve.addLayer(pn)});const Ze=document.createElement("div");Ze.className="ol-overviewmap-box",Ze.style.boxSizing="border-box",this.boxOverlay_=new Overlay({position:[0,0],positioning:"center-center",element:Ze}),this.ovmap_.addOverlay(this.boxOverlay_);const Qe=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),en=this.element;en.className=Qe,en.appendChild(this.ovmapDiv_),en.appendChild(je);const tn=this,an=this.boxOverlay_,cn=this.boxOverlay_.getElement(),dn=function(pn){return{clientX:pn.clientX,clientY:pn.clientY}},hn=function(pn){const mn=dn(pn),yn=Ve.getEventCoordinateInternal(mn);an.setPosition(yn)},fn=function(pn){const mn=Ve.getEventCoordinateInternal(pn);tn.getMap().getView().setCenterInternal(mn),window.removeEventListener("mousemove",hn),window.removeEventListener("mouseup",fn)};cn.addEventListener("mousedown",function(){window.addEventListener("mousemove",hn),window.addEventListener("mouseup",fn)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const ke=t.getView();ke&&this.unbindView_(ke),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(listen(e,ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const ke=e.getView();ke&&(this.bindView_(ke),ke.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===MapProperty.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const ke=this.getMap().getView();this.bindView_(ke)}else!this.ovmap_.isRendered()&&(e.key===MapProperty.TARGET||e.key===MapProperty.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new View({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(e){e.removeChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const ke=e.getSize(),Ge=e.getView().calculateExtentInternal(ke);if(this.viewExtent_&&equals$1(Ge,this.viewExtent_))return;this.viewExtent_=Ge;const Be=t.getSize(),Ve=t.getView().calculateExtentInternal(Be),Ze=t.getPixelFromCoordinateInternal(getTopLeft(Ge)),Qe=t.getPixelFromCoordinateInternal(getBottomRight(Ge)),en=Math.abs(Ze[0]-Qe[0]),tn=Math.abs(Ze[1]-Qe[1]),an=Be[0],cn=Be[1];en<an*MIN_RATIO||tn<cn*MIN_RATIO||en>an*MAX_RATIO||tn>cn*MAX_RATIO?this.resetExtent_():containsExtent(Ve,Ge)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,ke=e.getSize(),Ge=e.getView().calculateExtentInternal(ke),Be=t.getView(),je=Math.log(MAX_RATIO/MIN_RATIO)/Math.LN2,Ve=1/(Math.pow(2,je/2)*MIN_RATIO);scaleFromCenter(Ge,Ve),Be.fitInternal(fromExtent(Ge))}recenter_(){const e=this.getMap(),t=this.ovmap_,ke=e.getView();t.getView().setCenterInternal(ke.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const ke=e.getSize(),Oe=e.getView(),Ge=t.getView(),Be=this.rotateWithView_?0:-Oe.getRotation(),je=this.boxOverlay_,Ve=this.boxOverlay_.getElement(),Ze=Oe.getCenterInternal(),Qe=Oe.getResolution(),en=Ge.getResolution(),tn=ke[0]*Qe/en,an=ke[1]*Qe/en;if(je.setPosition(Ze),Ve){Ve.style.width=tn+"px",Ve.style.height=an+"px";const cn="rotate("+Be+"rad)";Ve.style.transform=cn}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=listenOnce(this.ovmap_,MapEventType.POSTRENDER,function(e){delete this.ovmapPostrenderKey_,this.updateBox_()},this))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}LoggerByDefault.getLogger("overviewMap");var GeoportalOverviewMap=class extends OverviewMap{constructor(e){e=e||{};const t={name:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",globalConstraint:{maxScaleDenominator:27954113201435894e-8,minScaleDenominator:2.1839150938621787e6,bbox:{left:-179.5,right:179.5,top:75,bottom:-75}},params:{url:"https://data.geopf.fr/wmts",styles:"normal",version:"1.0.0",format:"image/jpeg",projection:"EPSG:3857",minScale:2.1839150938621787e6,maxScale:27954113201435894e-8,extent:{left:-179.5,right:179.5,top:75,bottom:-75},legends:[{format:"image/jpeg",url:"https://data.geopf.fr/annexes/ressources/legendes/LEGEND.jpg",minScaleDenominator:"200"}],title:"Carte Mondiale pour la mini-vue",description:"Carte Mondiale pour la mini-vue",tileMatrixSetLimits:{1:{minTileRow:"0",maxTileRow:"1",minTileCol:"0",maxTileCol:"1"},2:{minTileRow:"0",maxTileRow:"3",minTileCol:"0",maxTileCol:"3"},3:{minTileRow:"1",maxTileRow:"6",minTileCol:"0",maxTileCol:"7"},4:{minTileRow:"2",maxTileRow:"13",minTileCol:"0",maxTileCol:"15"},5:{minTileRow:"5",maxTileRow:"26",minTileCol:"0",maxTileCol:"31"},6:{minTileRow:"11",maxTileRow:"52",minTileCol:"0",maxTileCol:"63"},7:{minTileRow:"22",maxTileRow:"105",minTileCol:"0",maxTileCol:"127"},8:{minTileRow:"45",maxTileRow:"210",minTileCol:"0",maxTileCol:"255"}},TMSLink:"PM_1_8",matrixIds:["1","2","3","4","5","6","7","8"],tileMatrices:{1:{matrixId:"1",matrixHeight:2,matrixWidth:2,scaleDenominator:27954113201435894e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},2:{matrixId:"2",matrixHeight:4,matrixWidth:4,scaleDenominator:1397705660071793e-7,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},3:{matrixId:"3",matrixHeight:8,matrixWidth:8,scaleDenominator:6988528300358965e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},4:{matrixId:"4",matrixHeight:16,matrixWidth:16,scaleDenominator:3494264150179486e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},5:{matrixId:"5",matrixHeight:32,matrixWidth:32,scaleDenominator:1747132075089743e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},6:{matrixId:"6",matrixHeight:64,matrixWidth:64,scaleDenominator:8735660375448715e-9,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},7:{matrixId:"7",matrixHeight:128,matrixWidth:128,scaleDenominator:4.3678301877243575e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},8:{matrixId:"8",matrixHeight:256,matrixWidth:256,scaleDenominator:2.1839150938621787e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}}},nativeResolutions:["78271.51696402048","39135.75848201023","19567.87924100512","9783.939620502561","4891.969810251280","2445.984905125640","1222.992452562820","611.4962262814100"]}};var ke="ol-overviewmap";e.className=e.className||ke,e.collapseLabel=e.collapseLabel||"",e.collapsed=e.collapsed,e.collapsed===void 0&&(e.collapsed=!0),e.label=e.label||"",e.tipLabel="Carte générale",e.layers=e.layers||[new LayerWMTS({layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",configuration:t})],super(e),this.CLASSNAME="OverviewMap",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var ke=document.createElement("div");ke.id=t,ke.classList.add("position"),ke.classList.add(t),this.container.appendChild(ke)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPoverviewMap-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.remove("ol-control");var e=this.element.childNodes,t=e[1];t.id="GPshowOverviewMap-"+this._uid,t.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPshowOverviewMap","gpf-btn-icon","gpf-btn-icon-overviewmap","fr-btn","fr-btn--tertiary","gpf-btn--tertiary"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!this.options.collapsed),t.setAttribute("type","button"),t.removeAttribute("title"),t.setAttribute("aria-label",this.options.tipLabel);var ke=this;t.addEventListener?t.addEventListener("click",function(Oe){var Ge=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Ge),ke.dispatchEvent({type:"overviewmap:toggle",status:Ge})}):t.attachEvent&&t.attachEvent("onclick",function(Oe){var Ge=Oe.target.ariaPressed==="true";Oe.target.setAttribute("aria-pressed",!Ge),ke.dispatchEvent({type:"overviewmap:toggle",status:Ge})}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){e&&(this._createContainerPosition(e),this._initContainer()),this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalOverviewMap=GeoportalOverviewMap);var LegendsDOM={_addUID:function(r){var e=this.uid?r+"-"+this.uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPlegends"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowLegendsPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowLegendsPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLegendsPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-legends fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Afficher les légendes"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowLegendsClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowLegendsClick(ke)}),e},_createLegendsPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPlegendsPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createLegendsPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__legends",r},_createLegendsPanelHeaderElement:function(){var r=document.createElement("div");return r.className="gpf-panel__header_legends",r},_createLegendsPanelIconElement:function(){var r=document.createElement("label");return r.className="gpf-btn-header-legends gpf-btn-icon-header-legends",r.title="Légendes",r},_createLegendsPanelTitleElement:function(){var r=document.createElement("div");return r.className="gpf-panel__title_legends",r.innerHTML="Légendes",r},_createLegendsPanelCloseElement:function(){var r=this,e=document.createElement("button");e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(r._addUID("GPshowLegendsPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowLegendsPicto")).click()}),e},_createLegendElement:function(){var r=document.createElement("div");return r.className="legends-entries gpf-panel__body fr-modal__body",r},_createLegendEntry:function(r){const e=Ge=>{var Be=function(){if(!window.DOMParser)return!1;var Qe=new DOMParser;try{Qe.parseFromString("x","text/html")}catch{return!1}return!0};if(Be()){var je=new DOMParser,Ve=je.parseFromString(Ge,"text/html");return Ve.body}var Ze=document.createElement("div");return Ze.innerHTML=Ge,Ze};if(r&&r.legends&&r.legends.length){var t=r.legends[0].url,ke=e(`
                    <div
                        id="${r.id}"
                        class="legend-entry-container gpf-panel__content fr-modal__content">
                        <label class="legend-entry-title gpf-label-legends-name fr-label">${r.title}</label>
                        <button
                            id="GPcollapseLegend_ID_${r.id}"
                            class="legend-entry-show gpf-btn gpf-btn-icon gpf-btn-icon-legends-collapse fr-btn fr-btn--tertiary gpf-btn--tertiary"
                            type="button"
                            title=""
                            tabindex="0"
                            aria-pressed="false"></button>
                        <div id="GPlegend_ID_${r.id}" class="legend-entry-image gpf-hidden">
                            <img src="${t}" alt="${r.desc}">
                        </div>
                    </div>
                `),Oe=ke.firstChild.querySelector("button");return Oe&&Oe.addEventListener("click",Ge=>{var Be=Ge.target.ariaPressed==="true";Ge.target.setAttribute("aria-pressed",!Be);var je=document.getElementById("GPlegend_ID_"+r.id);Be?je.classList.replace("gpf-visible","gpf-hidden"):je.classList.replace("gpf-hidden","gpf-visible")}),ke.firstChild}}},logger$4=LoggerByDefault.getLogger("legends"),Legends=class Jf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Jf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Legends",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e){if(this.draggable&&Draggable.dragElement(this.panelLegendsContainer,this.panelLegendsHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonLegendsShow.setAttribute("aria-pressed",!0),this.auto){var t=this;e.getLayers().forEach(ke=>{t.add(ke)})}this.auto&&this.addEventsListeners(e)}else this.auto&&this.removeEventsListeners();super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}getMetaInformations(e){if(e.hasOwnProperty("name"))return{id:e.name,title:e.getTitle(),legends:e.getLegends(),metadatas:e.getMetadata(),desc:e.getDescription(),url:e.getQuicklookUrl(),partners:e.getOriginators()}}adds(e){if(e)for(let t=0;t<e.length;t++)this.add(layer)}add(e){if(e){var t=this._createLegendEntry(this.getMetaInformations(e));if(t)return this.exist(t)?!1:(this.panelLegendsEntriesContainer.prepend(t),this.legends.push({obj:e,dom:t}),!0)}return!1}remove(e){var t=!1;if(e)for(let ke=0;ke<this.legends.length;ke++){const Oe=this.legends[ke];if(e.name===Oe.obj.name&&e.service===Oe.obj.service){Oe.dom&&this.legends[ke].dom.remove(),this.legends.splice(ke,1),t=!0;break}}return t}exist(e){var t=!1;for(let ke=0;ke<this.legends.length;ke++)if(this.legends[ke].dom.id===e.id){t=!0;break}return t}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonLegendsShow=null,this.panelLegendsContainer=null,this.panelLegendsEntriesContainer=null,this.panelLegendsHeaderContainer=null,this.buttonLegendsClose=null,this.eventsListeners=[],this.legends=[]}initContainer(){var e=this._createMainContainerElement(),t=this.buttonLegendsShow=this._createShowLegendsPictoElement();e.appendChild(t);var ke=this.panelLegendsContainer=this._createLegendsPanelElement(),Oe=this._createLegendsPanelDivElement();ke.appendChild(Oe);var Ge=this.panelLegendsEntriesContainer=this._createLegendElement();if(ke.appendChild(Ge),this.options.panel){var Be=this.panelLegendsHeaderContainer=this._createLegendsPanelHeaderElement(),je=this._createLegendsPanelIconElement();Be.appendChild(je);var Ve=this._createLegendsPanelTitleElement();Be.appendChild(Ve);var Ze=this.buttonLegendsClose=this._createLegendsPanelCloseElement();Be.appendChild(Ze),Oe.appendChild(Be)}return e.appendChild(ke),logger$4.log(e),e}addEventsListeners(e){var t=this;this.eventsListeners["layer:add"]=function(ke){if(logger$4.trace(ke),!t.add(ke.element)){logger$4.error("Layer already added...");return}},this.eventsListeners["layer:remove"]=function(ke){if(logger$4.trace(ke),!t.remove(ke.element)){logger$4.error("Layer already removed...");return}},this.eventsListeners["layer:change:position"]=function(ke){logger$4.trace(ke)},this.eventsListeners["view:change:resolution"]=function(ke){logger$4.trace(ke);var Oe=t.getMap();for(let tn=0;tn<t.legends.length;tn++){const an=t.legends[tn];var Ge=t.getMetaInformations(an.obj);if(Ge){var Be=Oe.getView().getResolution()||Oe.getView().getResolutionForZoom(Oe.getZoom()),je=Be*3570,Ve=Ge.legends.slice(),Ze=Ve[0];for(let cn=0;cn<Ve.length;++cn){const dn=Ve[cn];dn.minScaleDenominator||(dn.minScaleDenominator=0),(je>Ze.minScaleDenominator&&dn.minScaleDenominator>Ze.minScaleDenominator&&dn.minScaleDenominator<je||je<Ze.minScaleDenominator&&dn.minScaleDenominator<Ze.minScaleDenominator)&&(Ze=dn)}if(Ge.legends[0]!==Ze){Ge.legends=[],Ge.legends.push(Ze);var Qe=t._createLegendEntry(Ge),en=an.dom;en.replaceWith(Qe),an.dom=Qe}}}},e.getLayers().on("add",this.eventsListeners["layer:add"]),e.getLayers().on("remove",this.eventsListeners["layer:remove"]),e.getLayers().on("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().on("change:resolution",this.eventsListeners["view:change:resolution"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["layer:add"]),e.getLayers().un("remove",this.eventsListeners["layer:remove"]),e.getLayers().un("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().un("change:resolution",this.eventsListeners["view:change:resolution"]),delete this.eventsListeners["layer:add"],delete this.eventsListeners["layer:remove"],delete this.eventsListeners["layer:change:position"],delete this.eventsListeners["view:change:resolution"]}onShowLegendsClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$4.trace(e);var t=this.buttonLegendsShow.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}};Object.assign(Legends.prototype,LegendsDOM);Object.assign(Legends.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Legends=Legends);const stringToHTML=r=>{var e=function(){if(!window.DOMParser)return!1;var Ge=new DOMParser;try{Ge.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var t=new DOMParser,ke=t.parseFromString(r,"text/html");return ke.body}var Oe=document.createElement("div");return Oe.innerHTML=r,Oe};var CatalogDOM={_addUID:function(r){var e=this.uid?r+"-"+this.uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPcatalog"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowCatalogPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowCatalogPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowCatalogPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-catalog fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Catalogue de données"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowCatalogClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowCatalogClick(ke)}),e},_createCatalogPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPcatalogPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createCatalogPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createCatalogPanelContentDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__content fr-modal__content",r},_createCatalogPanelHeaderElement:function(){var r=document.createElement("div");return r.className="GPpanelHeader gpf-panel__header fr-modal__header",r},_createCatalogPanelTitleElement:function(r){var e=document.createElement("div");return e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=r,e},_createCatalogPanelCloseElement:function(){var r=this,e=document.createElement("button");e.id=this._addUID("GPcatalogPanelClose"),e.className="GPpanelClose GPcatalogPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(r._addUID("GPshowCatalogPicto")).click(),r.onCloseCatalogClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowCatalogPicto")).click(),r.onCloseCatalogClick()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createCatalogContentDivElement:function(){var r=stringToHTML('<div class="catalog-container-content" style="padding:10px"></div>');return r.firstChild},_createCatalogContentTitleElement:function(r){var e=stringToHTML(`
        <!-- titre -->
        <div class="catalog-container-title">
            <div class="fr-title">
                <h5 style="margin:unset">${r}</h5>
            </div>
        </div>
        `);return e.firstChild},_createCatalogContentSearchElement:function(){var r=`
        <!-- barre de recherche -->
        <!-- https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/barre-de-recherche -->
        <div class="catalog-container-search" style="padding-top:10px;padding-bottom:20px">
            <div class="fr-search-bar" id="header-search" role="search">
                <label class="fr-label" for="search-input">
                    Recherche
                </label>
                <input class="fr-input" placeholder="Rechercher une donnée" type="search" id="search-input" name="search-input" incremental>
                <button id="search-button" class="fr-btn" title="Rechercher">
                    Rechercher
                </button>
            </div>
        </div>
        `,e=stringToHTML(r);const t=e.attachShadow({mode:"open"});t.innerHTML=r.trim();var ke=t.getElementById("search-button");ke&&ke.addEventListener("click",()=>{this.onSearchCatalogButtonClick()});var Oe=t.getElementById("search-input");return Oe&&Oe.addEventListener("search",()=>{this.onSearchCatalogInputChange()}),t},_createCatalogWaitingElement:function(){var r=document.createElement("div");r.id=this._addUID("GPcatalogCalcWaitingContainer"),r.className="GPwaitingContainerHidden gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",r.appendChild(e),r},_createCatalogContentCategoriesTabs:function(r){var e="",t=(dn,hn,fn,pn)=>{var mn="GPtabButton fr-tabs__tab",yn="false",Cn=-1;return pn&&(mn="GPtabButton GPtabButtonActive fr-tabs__tab",yn="true",Cn=0),`
            <li class="GPtabList" role="presentation">
                <button id="tabbutton-${dn}_${hn}" class="${mn}" tabindex="${Cn}" role="tabbutton" aria-selected="${yn}" aria-controls="tabpanel-${dn}-panel_${hn}">${fn}</button>
            </li>
            `},ke="",Oe=dn=>{var hn=dn.default?"checked":"";return`
            <!-- sous categorie -->
            <div class="fr-fieldset__element fr-fieldset__element--inline">
                <div class="fr-radio-group fr-radio-group--sm">
                    <input type="radio" id="radio-inline_${dn.id}" name="radio-inline" ${hn} aria-controls="tabcontent-${dn.id}">
                    <label class="fr-label" for="radio-inline_${dn.id}">
                        ${dn.title}
                    </label>
                </div>
            </div>
            `},Ge=(dn,hn)=>{var fn="";for(let mn=0;mn<hn.length;mn++){const yn=hn[mn];ke+=Oe(yn);var pn="";yn.default||(pn="GPelementHidden gpf-hidden"),fn+=`<div class="tabcontent ${pn}" role="tabpanel-section" id="tabcontent-${yn.id}"></div>`}return`
            <!-- sous categories -->
            <fieldset class="fr-fieldset" id="radio-inline_${dn}" aria-labelledby="radio-inline-legend radio-inline-messages">
                ${ke}
                <div class="fr-messages-group" id="radio-inline-messages" aria-live="assertive"></div>
            </fieldset>
            ${fn}
            `},Be="",je=(dn,hn,fn,pn)=>{var mn="GPtabContent fr-tabs__panel",yn=-1;fn&&(mn="GPtabContent GPtabContentSelected fr-tabs__panel fr-tabs__panel--selected",yn=0);var Cn='<div class="tabcontent"></div>';return pn&&(Cn=Ge(hn,pn)),`
            <!-- panneaux -->
            <div id="tabpanel-${dn}-panel_${hn}" class="${mn}" role="tabpanel" aria-labelledby="tabbutton-${dn}_${hn}" tabindex="${yn}" style="max-height: 250px;overflow-y: auto;">
                ${Cn}
            </div>
            `};for(let dn=0;dn<r.length;dn++){const hn=r[dn];e+=t(dn,hn.id,hn.title,hn.default),Be+=je(dn,hn.id,hn.default,hn.items)}var Ve=`
        <!-- onglets -->
        <div class="catalog-container-tabs">
            <div class="GPtabs fr-tabs">
                <ul class="GPtabsList fr-tabs__list" role="tablist" aria-label="[A modifier | nom du système d'onglet]">
                    ${e}
                </ul>
                ${Be}
            </div>
        </div>
        `,Ze=stringToHTML(Ve.trim());const Qe=Ze.attachShadow({mode:"open"});Qe.innerHTML=Ve.trim();var en=Qe.querySelectorAll('[role="tabpanel-section"]'),tn=Qe.querySelectorAll('[name="radio-inline"]');tn&&tn.forEach(dn=>{dn.addEventListener("change",hn=>{for(let pn=0;pn<en.length;pn++){const mn=en[pn];mn.classList.add("gpf-hidden"),mn.classList.add("GPelementHidden")}var fn=document.getElementById(hn.target.getAttribute("aria-controls"));fn.classList.remove("gpf-hidden"),fn.classList.remove("GPelementHidden")})});var an=Qe.querySelectorAll('[role="tabpanel"]'),cn=Qe.querySelectorAll('[role="tabbutton"]');return cn&&cn.forEach(dn=>{dn.addEventListener("click",hn=>{for(let pn=0;pn<cn.length;pn++){const mn=cn[pn];mn.setAttribute("tabindex",-1),mn.ariaSelected=!1,mn.classList.remove("GPtabButtonActive")}hn.target.setAttribute("tabindex",0),hn.target.ariaSelected=!0,hn.target.classList.add("GPtabButtonActive");for(let pn=0;pn<an.length;pn++){const mn=an[pn];mn.setAttribute("tabindex",-1),mn.classList.remove("fr-tabs__panel--selected"),mn.classList.remove("GPtabContentSelected"),mn.classList.add("gpf-hidden"),mn.classList.add("GPelementHidden")}var fn=document.getElementById(hn.target.getAttribute("aria-controls"));fn.setAttribute("tabindex",0),fn.classList.add("fr-tabs__panel--selected"),fn.classList.add("GPtabContentSelected"),fn.classList.remove("gpf-hidden"),fn.classList.remove("GPelementHidden"),this.onSelectCatalogTabClick(hn)})}),Qe},_createCatalogContentCategoryTabContent:function(r,e){var t=Object.values(e),ke="",Oe=(mn,yn,Cn,wn,bn)=>`
            <div class="fr-fieldset__element" id="fieldset-${bn}_${yn}-${wn}">
                <div class="fr-checkbox-group">
                    <input
                        name="checkboxes-${bn}"
                        id="checkboxes-${bn}-${mn}_${yn}-${wn}"
                        type="checkbox"
                        data-layer="${yn}:${wn}"
                        aria-describedby="checkboxes-messages-${bn}-${mn}_${yn}-${wn}">
                    <label class="GPlabelActive fr-label" for="checkboxes-${bn}-${mn}_${yn}-${wn}" title="nom technique : ${yn}">
                        ${Cn} (${wn})
                    </label>
                    <div class="fr-messages-group" id="checkboxes-messages-${bn}-${mn}_${yn}-${wn}" aria-live="assertive"></div>
                </div>
            </div>
            `,Ge=(mn,yn,Cn,wn,bn)=>`
            <!-- section -->
            <section class="fr-accordion" style="width:100%;">
                <h3 class="fr-accordion__title">
                    <button class="GPcatalogButtonSection fr-accordion__btn" role="button-collapse-${yn}" aria-expanded="false" aria-controls="accordion-${mn}">
                        <span class="GPshowCatalogAdvancedTools gpf-hidden" role="button-icon-collapse-${yn}"></span>${Cn}
                    </button>
                </h3>
                <div class="fr-collapse GPelementHidden" id="accordion-${mn}">
                    ${bn}
                </div>
            </section>
            `,Be=r.section;Be&&(t=t.sort((mn,yn)=>mn[r.filter.field].localeCompare(yn[r.filter.field])));var je={};for(let mn=0;mn<t.length;mn++){const yn=t[mn];if(Be){var Ve=yn[r.filter.field];Ve&&(je.hasOwnProperty(Ve)||(je[Ve]=""),je[Ve]+=Oe(mn,yn.name,yn.title,yn.service,r.id))}else ke+=Oe(mn,yn.name,yn.title,yn.service,r.id)}if(Be){for(const mn in je)if(Object.prototype.hasOwnProperty.call(je,mn)){const yn=je[mn];var Ze=[...yn.matchAll(/fr-fieldset__element/g)].length,Qe=Math.abs(Array.from(mn).reduce((Cn,wn)=>Math.imul(31,Cn)+wn.charCodeAt(0)|0,0));ke+=Ge(Qe,r.id,mn,Ze,yn)}}var en=`
            <!-- liste de couches -->
            <fieldset class="fr-fieldset" id="checkboxes-${r.id}" aria-labelledby="checkboxes-legend checkboxes-messages">
                ${ke}
            </fieldset>
        `,tn=stringToHTML(en);const an=tn.attachShadow({mode:"open"});an.innerHTML=en.trim();var cn=`checkboxes-${r.id}`,dn=an.querySelectorAll('[name="'+cn+'"]');dn&&dn.forEach(mn=>{mn.addEventListener("click",yn=>{this.onSelectCatalogEntryClick(yn)})});var hn=`button-collapse-${r.id}`,fn=an.querySelectorAll('[role="'+hn+'"]');fn&&fn.forEach(mn=>{mn.addEventListener("click",yn=>{yn.target.ariaExpanded=yn.target.ariaExpanded!=="true";var Cn=document.getElementById(yn.target.getAttribute("aria-controls"));Cn&&(yn.target.ariaExpanded==="true"?(Cn.classList.add("fr-collapse--expanded"),Cn.classList.remove("GPelementHidden")):(Cn.classList.remove("fr-collapse--expanded"),Cn.classList.add("GPelementHidden")))},!1)}),`${r.id}`;var pn=an.querySelectorAll('[role="'+hn+'"]');return pn&&pn.forEach(mn=>{mn.addEventListener("click",yn=>{yn.target.parentElement.click()})}),an}},logger$3=LoggerByDefault.getLogger("widget"),Catalog=class Qf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Qf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Catalog",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this.showWaiting(),this.initLayersList().then(t=>{logger$3.trace(this,t),this.hideWaiting(),this.dispatchEvent({type:"catalog:loaded",data:t})}).catch(t=>{this.hideWaiting(),logger$3.error(t)}),this}setMap(e){e?(this.on("catalog:loaded",this.initMapLayers),this.draggable&&Draggable.dragElement(this.panelCatalogContainer,this.panelCatalogHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonCatalogShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):(this.un("catalog:loaded",this.initMapLayers),this.auto&&this.removeEventsListeners()),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,titlePrimary:"Gérer vos couches de données",titleSecondary:"",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Données",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.eventsListeners=[],this.buttonCatalogShow=null,this.panelCatalogContainer=null,this.panelCatalogHeaderContainer=null,this.buttonCatalogClose=null,this.contentCatalogContainer=null,this.waitingContainer=null,this.layersList=[],this.categories=this.options.categories.map(t=>{var ke=t.items;return t.items&&(ke=t.items.map(Oe=>({title:Oe.title,id:Oe.id||Math.abs(Array.from(Oe.title).reduce((Ge,Be)=>Math.imul(31,Ge)+Be.charCodeAt(0)|0,0)),section:Oe.hasOwnProperty("section")?Oe.section:!1,default:Oe.hasOwnProperty("default")?Oe.default:!1,filter:Oe.filter||null}))),{title:t.title,id:t.id||Math.abs(Array.from(t.title).reduce((Oe,Ge)=>Math.imul(31,Oe)+Ge.charCodeAt(0)|0,0)),default:t.hasOwnProperty("default")?t.default:!1,filter:t.filter||null,items:ke||null}}),this.categoryId=(()=>{var t=this.categories.findIndex(ke=>ke.default);return t===-1&&(t=0,this.categories[t].default=!0),this.categories[t].id})(),this.layersListOnMap={}}initContainer(){var e=this._createMainContainerElement(),t=this.buttonCatalogShow=this._createShowCatalogPictoElement();e.appendChild(t);var ke=this.panelCatalogContainer=this._createCatalogPanelElement(),Oe=this._createCatalogPanelDivElement();ke.appendChild(Oe);var Ge=this.panelCatalogHeaderContainer=this._createCatalogPanelHeaderElement(),Be=this._createCatalogPanelTitleElement(this.options.titlePrimary);Ge.appendChild(Be);var je=this.buttonCatalogClose=this._createCatalogPanelCloseElement();Ge.appendChild(je),Oe.appendChild(Ge);var Ve=this._createCatalogPanelContentDivElement(),Ze=this.contentCatalogContainer=this._createCatalogContentDivElement();Ze.appendChild(this._createCatalogContentTitleElement(this.options.titleSecondary)),this.options.search.display&&Ze.appendChild(this._createCatalogContentSearchElement());var Qe=this.waitingContainer=this._createCatalogWaitingElement();return Ze.appendChild(Qe),Ve.appendChild(Ze),Oe.appendChild(Ve),e.appendChild(ke),e}initMapLayers(){var e=this.getMap();if(e){var t=e.getLayers();t.forEach(ke=>{if(ke.name&&ke.service){this.layersListOnMap[ke.name+":"+ke.service]=ke;var Oe=document.querySelectorAll(`input[data-layer="${ke.name}:${ke.service}"]`);Oe&&Oe.forEach(Ge=>{Ge.checked=!0})}})}}async initLayersList(){var e=null,t=this;const ke=Ze=>{var Qe=t.contentCatalogContainer,en=t._createCatalogContentCategoriesTabs(this.categories);Qe.appendChild(en);var tn=[];t.categories.forEach(dn=>{if(dn.items)for(let hn=0;hn<dn.items.length;hn++){const fn=dn.items[hn];tn.push(fn)}else tn.push(dn)});var an=Qe.querySelectorAll(".tabcontent");for(let dn=0;dn<an.length;dn++){const hn=an[dn];var cn=Oe(tn[dn],Ze);hn.appendChild(t._createCatalogContentCategoryTabContent(tn[dn],cn))}},Oe=(Ze,Qe)=>{var en=Qe,tn=Ze.filter;if(tn){en={};for(const cn in Qe)if(Object.prototype.hasOwnProperty.call(Qe,cn)){const dn=Qe[cn];if(dn[tn.field]){var an=Array.isArray(tn.value)?tn.value.includes(dn[tn.field].toString()):tn.value==="*"||dn[tn.field].toString()===tn.value;an&&(en[cn]=dn,this.layersList[cn].categories.push(Ze.id))}}}return en},Ge=(Ze,Qe)=>Qe;if(this.options.configuration.data){e=this.options.configuration.data||{},Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const Ze in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,Ze)){const Qe=e.layers[Ze];var Be=Qe.serviceParams.id.split(":").slice(-1)[0];Qe.service=Be,Qe.categories=[]}var je=Ge(this.options.layerFilter,e.layers);return this.layersList=je,ke(je),new Promise((Ze,Qe)=>{Ze(e)})}if(this.options.configuration.urls){var Ve=[];for(let Ze=0;Ze<this.options.configuration.urls.length;Ze++){const Qe=this.options.configuration.urls[Ze],en=function(){return fetch(Qe,{}).then(function(tn){if(tn.ok)return tn.json().then(function(cn){return cn}).catch(cn=>{logger$3.warn("fetch json exception :",cn)});var an=new Error("HTTP status code: "+tn.status);throw an}).catch(tn=>new Promise((an,cn)=>{logger$3.error("fetch json exception :",tn),cn(tn)}))};Ve.push(en())}try{const Ze=await Promise.all(Ve);e=Ze[0];for(let en=1;en<Ze.length;en++){const tn=Ze[en];Helper.mergeParams(e,tn)}Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const en in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,en)){const tn=e.layers[en];var Be=tn.serviceParams.id.split(":").slice(-1)[0];tn.service=Be,tn.categories=[]}var je=Ge(this.options.layerFilter,e.layers);return this.layersList=je,ke(je),await new Promise((en,tn)=>{en(e)})}catch(Ze){return await new Promise((Qe,en)=>{en(Ze)})}}}addEventsListeners(e){var t=this;this.eventsListeners["map:add"]=function(ke){logger$3.trace(ke);var Oe=ke.element.name,Ge=ke.element.service;t.layersListOnMap[Oe+":"+Ge]=ke.element;var Be=document.querySelectorAll(`input[data-layer="${Oe}:${Ge}"]`);Be&&Be.forEach(je=>{je.checked=!0})},e.getLayers().on("add",this.eventsListeners["map:add"]),this.eventsListeners["map:remove"]=function(ke){logger$3.trace(ke);var Oe=ke.element.name,Ge=ke.element.service;delete t.layersListOnMap[Oe+":"+Ge];var Be=document.querySelectorAll(`input[data-layer="${Oe}:${Ge}"]`);Be&&Be.forEach(je=>{je.checked=!1})},e.getLayers().on("remove",this.eventsListeners["map:remove"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["map:add"]),delete this.eventsListeners["map:add"],e.getLayers().un("remove",this.eventsListeners["map:remove"]),delete this.eventsListeners["map:remove"]}addLayer(e,t){var ke=null,Oe=null;switch(t){case"WMS":Oe=new LayerWMS({layer:e});break;case"WMTS":Oe=new LayerWMTS({layer:e});break;case"TMS":Oe=new LayerMapBox({layer:e});break;case"WFS":Oe=new LayerWFS({layer:e});break}if(Oe){var Ge=this.getMap();Ge.addLayer(Oe),this.layersListOnMap[e+":"+t]=Oe,ke=Oe.getConfiguration()}return ke}removeLayer(e,t){var ke=null,Oe=this.layersListOnMap[e+":"+t];if(Oe){ke=Oe.getConfiguration();var Ge=this.getMap();Ge.removeLayer(Oe),delete this.layersListOnMap[e+":"+t]}return ke}hideWaiting(){this.waitingContainer.className="GPwaitingContainerHidden  gpf-waiting--hidden"}showWaiting(){this.waitingContainer.className="GPwaitingContainerVisible gpf-waiting--visible"}resetFilteredLayersList(){for(const e in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,e)){const t=this.layersList[e];t.hidden=!1,this.updateFilteredLayersListDOM(t.name,t.service,t.hidden)}}setFilteredLayersList(e){var t=this.options.search.criteria;for(const Oe in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,Oe)){const Ge=this.layersList[Oe];var ke="";for(let Be=0;Be<t.length;Be++){const je=t[Be];Ge[je]&&(ke+=Ge[je].toLowerCase())}Ge.hidden=!ke.includes(e.toLowerCase()),this.updateFilteredLayersListDOM(Ge.name,Ge.service,Ge.hidden)}}updateFilteredLayersListDOM(e,t,ke){var Oe=[];this.categories.forEach(Be=>{if(Be.items)for(let je=0;je<Be.items.length;je++){const Ve=Be.items[je];Oe.push(Ve.id)}else Oe.push(Be.id)});for(let Be=0;Be<Oe.length;Be++){const je=Oe[Be];var Ge=document.getElementById(`fieldset-${je}_${e}-${t}`);Ge&&(ke?(Ge.classList.add("gpf-hidden"),Ge.classList.add("GPelementHidden")):(Ge.classList.remove("gpf-hidden"),Ge.classList.remove("GPelementHidden")))}}onShowCatalogClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$3.trace(e)}onCloseCatalogClick(e){logger$3.trace(e)}onSelectCatalogTabClick(e){logger$3.trace(e);var t=e.target.id,ke=t.split("_")[1];this.categoryId=ke}onSelectCatalogEntryClick(e){logger$3.trace(e);var t=e.target.dataset.layer,ke=t.substring(0,t.lastIndexOf(":")),Oe=t.substring(t.lastIndexOf(":")+1),Ge={};e.target.checked?(this.options.addToMap&&(Ge=this.addLayer(ke,Oe)),this.dispatchEvent({type:"catalog:layer:add",name:ke,service:Oe,layer:Ge})):(this.options.addToMap&&(Ge=this.removeLayer(ke,Oe)),this.dispatchEvent({type:"catalog:layer:remove",name:ke,service:Oe,layer:Ge}))}onSearchCatalogButtonClick(){var e=document.getElementById("search-input").value;this.setFilteredLayersList(e)}onSearchCatalogInputChange(){this.onSearchCatalogButtonClick()}};Object.assign(Catalog.prototype,CatalogDOM);Object.assign(Catalog.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Catalog=Catalog);const TerritoriesJson=[{id:"FXX",title:"France métropolitaine",description:"",zoom:null,bbox:[-9.86,41.15,10.38,51.56],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/fxx.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/fxx.svg"},{id:"GLP",title:"Guadeloupe",description:"",zoom:null,bbox:[-61.97,15.72,-60.93,16.66],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/glp.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/glp.svg"},{id:"GUF",title:"Guyane",description:"",zoom:null,bbox:[-55.65,1.49,-51.2,6.21],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/guf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/guf.svg"},{id:"MTQ",title:"Martinique",description:"",zoom:null,bbox:[-61.4,14.25,-60.67,15.04],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/mtq.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/mtq.svg"},{id:"REU",title:"Réunion",description:"",zoom:10,bbox:[55.07,-21.46,55.86,-20.79],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/reu.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/reu.svg"},{id:"SPM",title:"Saint-Pierre-et-Miquelon",description:"",zoom:null,bbox:[-56.48,46.69,-56.07,47.19],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/spm.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/spm.svg"},{id:"IDF",title:"Paris petite couronne",description:"",zoom:12,bbox:[2.18,48.77,2.52,48.95],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/idf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/idf.svg"},{id:"MYT",title:"Mayotte",description:"",zoom:null,bbox:[44.95,-13.049,45.32,-12.57],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/myt.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/myt.svg"},{id:"NCL",title:"Nouvelle Calédonie",description:"",zoom:null,bbox:[163.02,-23.08,167.86,-19.5],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/ncl.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/ncl.svg"}];var TerritoriesDOM={_addUID:function(r){var e=this.uid?r+"-"+this.uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPterritories"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowTerritoriesPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowTerritoriesPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowTerritoriesPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-territories fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Sélecteur de territoire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowTerritoriesClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowTerritoriesClick(ke)}),e},_createTerritoriesPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPterritoriesPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createTerritoriesPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__territories",r},_createTerritoriesPanelHeaderElement:function(){var r=document.createElement("div");return r.className="gpf-panel__header_territories",r},_createTerritoriesPanelIconElement:function(){var r=document.createElement("label");return r.className="gpf-btn-header-territories gpf-btn-icon-header-territories",r.title="Selecteur de territoires",r},_createTerritoriesPanelTitleElement:function(r){var e=document.createElement("div");return e.className="gpf-panel__title_territories",e.innerHTML=r,e},_createTerritoriesPanelCloseElement:function(){var r=this,e=document.createElement("button");e.id="GPterritoriesPanelClose",e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(r._addUID("GPshowTerritoriesPicto")).click(),r.onCloseTerritoriesClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowTerritoriesPicto")).click(),r.onCloseTerritoriesClick()}),e},_createTerritoriesElement:function(){var r=document.createElement("div");return r.className="territories-entries gpf-panel__body_territories fr-modal__body",r},_createTerritoryEntry:function(r){var e=this;const t=Ze=>{var Qe=function(){if(!window.DOMParser)return!1;var cn=new DOMParser;try{cn.parseFromString("x","text/html")}catch{return!1}return!0};if(Qe()){var en=new DOMParser,tn=en.parseFromString(Ze,"text/html");return tn.body}var an=document.createElement("div");return an.innerHTML=Ze,an};if(r){var ke="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNTgxLjAwMDAwMHB0IiBoZWlnaHQ9IjM1Ni4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDU4MS4wMDAwMDAgMzU2LjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgoKPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMzU2LjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iI2I0YjNiMyIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTAgMTc4MCBsMCAtMTc4MCAyOTA1IDAgMjkwNSAwIDAgMTc4MCAwIDE3ODAgLTI5MDUgMCAtMjkwNSAwIDAKLTE3ODB6Ii8+CjwvZz4KPC9zdmc+Cg==",Oe=r.thumbnail||ke,Ge=r.icon||ke,Be=r.id.toLowerCase(),je=t(`
            <div class="gpf-tile fr-tile fr-tile--sm">
                <div class="fr-tile__body">
                    <div class="fr-tile__content">
                        <p class="fr-tile__title">
                            <label class="gpf-label fr-label" title="${r.description}">${r.title}</label>
                        </p>
                    </div>
                </div>
                <div class="gpf-tile__header fr-tile__header">
                    <div class="fr-tile__pictogram fr-tile__thumbnail">
                        <img id="thumbnail-${r.id}" src="${Oe}" width="100%" height="100%" title="${r.description}"/>
                    </div>
                    <div class="fr-tile__pictogram fr-tile__icon fr-tile__icon--${Be}">
                        <svg>       
                            <image id="icon-${r.id}" xlink:href="${Ge}"/>    
                        </svg>
                    </div>
                </div>
            </div>
            `),Ve=je.firstChild;return Ve&&Ve.addEventListener("click",Ze=>{e.onImageTerritoriesClick(Ze,r.id)}),je.firstChild}}},logger$2=LoggerByDefault.getLogger("territories"),Territories=class ep extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ep))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Territories",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e&&(this.draggable&&Draggable.dragElement(this.panelTerritoriesContainer,this.panelTerritoriesHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonTerritoriesShow.setAttribute("aria-pressed",!0),this.auto))for(let t=0;t<TerritoriesJson.length;t++){const ke=TerritoriesJson[t];this.setTerritory(ke)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setTerritory(e){var t=this.territories.some(Oe=>Oe.data.id===e.id);if(e&&!t){var ke=this._createTerritoryEntry(e);if(ke)return this.panelTerritoriesEntriesContainer.appendChild(ke),this.territories.push({data:e,dom:ke}),!0}return!1}removeTerritory(e){var t=!1;if(e){for(let ke=0;ke<this.territories.length;ke++)if(this.territories[ke].data.id===e){this.territories[ke].dom.remove(),this.territories.splice(ke,1),t=!0;break}}return t}setCollapse(e){if(e===void 0){logger$2.log("[ERROR] Territory:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPterritoriesPanelClose").click():this.buttonTerritoriesShow.click(),this.collapsed=e)}setReduce(e){e?this.panelTerritoriesEntriesContainer.classList.add("tiles-reduce"):this.panelTerritoriesEntriesContainer.classList.remove("tiles-reduce")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,panel:!0,title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3,territories:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.territories=[],this.buttonTerritoriesShow=null,this.panelTerritoriesContainer=null,this.panelTerritoriesHeaderContainer=null,this.buttonTerritoriesClose=null,this.panelTerritoriesEntriesContainer=null}initContainer(){var e=this._createMainContainerElement(),t=this.buttonTerritoriesShow=this._createShowTerritoriesPictoElement();e.appendChild(t);var ke=this.panelTerritoriesContainer=this._createTerritoriesPanelElement();ke.classList.add("tiles-direction"),ke.classList.add("tiles-"+this.options.tiles);var Oe=this._createTerritoriesPanelDivElement();ke.appendChild(Oe);var Ge=this.panelTerritoriesEntriesContainer=this._createTerritoriesElement();if(Ge.classList.add("tiles-direction"),Ge.classList.add("tiles-"+this.options.tiles),this.options.reduce&&Ge.classList.add("tiles-reduce"),this.options.thumbnail?Ge.classList.add("tiles-thumbnail"):Ge.classList.add("tiles-icon"),ke.appendChild(Ge),this.options.panel){var Be=this.panelTerritoriesHeaderContainer=this._createTerritoriesPanelHeaderElement(),je=this._createTerritoriesPanelIconElement();Be.appendChild(je);var Ve=this._createTerritoriesPanelTitleElement(this.options.title);Be.appendChild(Ve);var Ze=this.buttonTerritoriesClose=this._createTerritoriesPanelCloseElement();Be.appendChild(Ze),Oe.appendChild(Be)}return e.appendChild(ke),logger$2.log(e),e}onShowTerritoriesClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$2.trace(e),this.collapsed=!this.collapsed}onCloseTerritoriesClick(e){logger$2.trace(e)}onImageTerritoriesClick(e,t){logger$2.trace(e,t);var ke=this.territories.find(Ze=>Ze.data.id===t);if(ke){var Oe=ke.data.zoom,Ge=ke.data.bbox||[];if(!Ge.length)return;var Be=this.getMap(),je=Be.getView().getProjection().getCode(),Ve=transformExtent(Ge,"EPSG:4326",je);Be.getView().fit(Ve,Be.getSize()),Oe&&Be.getView().setZoom(Oe),this.setCollapse(!0)}}};Object.assign(Territories.prototype,TerritoriesDOM);Object.assign(Territories.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Territories=Territories);var ControlListDOM={_addUID:function(r){var e=this._uid?r+"-"+this._uid:r;return e},_createMainContainerElement:function(){var r=document.createElement("div");return r.id=this._addUID("GPcontrolList"),r.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",r},_createShowControlListPictoElement:function(){var r=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),t.innerText="+",e.id=this._addUID("GPshowControlListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowControlListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-controllist fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Tous mes outils"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowControlListPanelClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Oe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Oe),r.onShowControlListPanelClick(ke)}),e},_createControlListPanelElement:function(){var r=document.createElement("dialog");return r.id=this._addUID("GPcontrolListPanel"),r.className="GPpanel gpf-panel fr-modal",r},_createControlListPanelDivElement:function(){var r=document.createElement("div");return r.className="gpf-panel__body fr-modal__body",r},_createControlListPanelHeaderElement:function(){var r=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Mes outils",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GPcontrolListPanelClose"),ke.className="GPpanelClose GPcontrolListPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(r._addUID("GPshowControlListPicto")).click()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(r._addUID("GPshowControlListPicto")).click()});var Oe=document.createElement("span");return Oe.className="GPelementHidden gpf-visible",Oe.innerText="Fermer",ke.appendChild(Oe),e.appendChild(ke),e},_createControlListPanelContentElement:function(){var r=document.createElement("div");return r.className="gpf-panel__content fr-modal__content",r},_createControlListPanelFooterElement:function(r){var e=document.createElement("div");e.className="GPpanelFooter gpf-panel__footer fr-modal__footer";var t=document.createElement("button");return t.classList.add("gpf-btn","gpf-btn--tertiary","fr-btn","fr-btn--tertiary"),t.innerText="+ Ajouter plus d'outils",t.addEventListener("click",function(){r.click()}),e.appendChild(t),e},_createControlListPanelControl:function(r){const e=r.getContainer();var t=document.createElement("div"),ke=e.querySelector(".GPshowOpen").cloneNode();ke.id=ke.id+"-controllist",ke.classList.add("inside-control-list"),t.appendChild(ke);var Oe=document.createElement("div"),Ge=document.createElement("span");if(Oe.appendChild(Ge),e.querySelector(".GPpanelTitle")?Ge.innerText=e.querySelector(".GPpanelTitle").innerText:e.querySelector("[class^='gpf-btn-header-']")?Ge.innerText=e.querySelector("[class^='gpf-btn-header-']").title:Ge.innerText=e.querySelector(".GPshowOpen").ariaLabel,r.description){var Be=document.createElement("span");Be.innerText=r.description,Oe.appendChild(Be)}return t.appendChild(Oe),t.addEventListener("click",function(){e.querySelector(".GPshowOpen").click()}),t}},logger$1=LoggerByDefault.getLogger("controlList"),ControlList=class tp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof tp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e.controlCatalogElement?this.controlCatalogElement=e.controlCatalogElement:this.controlCatalogElement=null,this.CLASSNAME="ControlList",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){e&&(this.draggable&&Draggable.dragElement(this._ControlListPanelContainer,this._ControlListPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoControlListButton.setAttribute("aria-pressed",!0)),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$1.log("[ERROR] ControlList:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPcontrolListPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getContainer(){return this._container}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1),this.options={collapsed:!0,draggable:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate()}_initContainer(){var e=this._createMainContainerElement(),t=this._pictoControlListButton=this._createShowControlListPictoElement();e.appendChild(t);var ke=this._ControlListPanelContainer=this._createControlListPanelElement(),Oe=this._createControlListPanelDivElement();ke.appendChild(Oe);var Ge=this._ControlListPanelHeaderContainer=this._createControlListPanelHeaderElement();Oe.appendChild(Ge);var Be=this._ControlListPanelContentContainer=this._createControlListPanelContentElement();if(Oe.appendChild(Be),this.controlCatalogElement){var je=this._createControlListPanelFooterElement(this.controlCatalogElement);Oe.appendChild(je)}return e.appendChild(ke),e}onShowControlListPanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._pictoControlListButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed?this._ControlListPanelContentContainer.innerHTML="":this.getMap().getControls().getArray().forEach(Ge=>{if(Ge.listable){let Be=this._createControlListPanelControl(Ge);this._ControlListPanelContentContainer.appendChild(Be)}})}};Object.assign(ControlList.prototype,ControlListDOM);Object.assign(ControlList.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ControlList=ControlList);function useUrlParams(){var r={};const e=useUrlSearchParams("history");if(e){const Oe=Object.keys(e);for(let Ge=0;Ge<Oe.length;Ge++){const Be=Oe[Ge];switch(Be){case"c":var t=e[Be].split(",");r.lon=t[0],r.lat=t[1];var ke=fromLonLat(t);r.x=ke[0],r.y=ke[1],r.center=[r.lon,r.lat];break;case"l":r.layers=e[Be];break;case"w":r.controls=e[Be];break;case"z":r.zoom=parseInt(e[Be],10);break}}}return r}const useControls={OverviewMap:{id:"OverviewMap",active:!0,disable:!0,analytic:!0},SearchEngine:{id:"SearchEngine",active:!0,disable:!0,analytic:!1},ScaleLine:{id:"ScaleLine",active:!0,disable:!0,analytic:!1},LayerSwitcher:{id:"LayerSwitcher",active:!0,disable:!0,analytic:!0},GetFeatureInfo:{id:"GetFeatureInfo",active:!0,disable:!0,analytic:!0},Legends:{id:"Legends",active:!0,disable:!0,analytic:!0},Drawing:{id:"Drawing",active:!0,disable:!1,analytic:!0},Isocurve:{id:"Isocurve",active:!0,disable:!1,analytic:!0},ReverseGeocode:{id:"ReverseGeocode",active:!0,disable:!1,analytic:!0},Zoom:{id:"Zoom",active:!0,disable:!0,analytic:!1},Route:{id:"Route",active:!0,disable:!1,analytic:!0},FullScreen:{id:"FullScreen",active:!0,disable:!0,analytic:!1},MeasureLength:{id:"MeasureLength",active:!0,disable:!1,analytic:!0},MeasureArea:{id:"MeasureArea",active:!0,disable:!1,analytic:!0},MeasureAzimuth:{id:"MeasureAzimuth",active:!0,disable:!1,analytic:!0},Share:{id:"Share",active:!0,disable:!0,analytic:!0},Print:{id:"Print",active:!0,disable:!1,analytic:!0},MousePosition:{id:"MousePosition",active:!0,disable:!1,analytic:!1},Territories:{id:"Territories",active:!0,disable:!0,analytic:!0},ElevationPath:{id:"ElevationPath",active:!0,disable:!1,analytic:!1},LayerImport:{id:"LayerImport",active:!0,disable:!1,analytic:!0},ControlList:{id:"ControlList",active:!0,disable:!0,analytic:!0}};function useDefaultControls(){var r=[];for(var e in useControls)useControls[e].active===!0&&useControls[e].disable===!0&&r.push(useControls[e].id);return r}function useControlsMenuOptions(){return[{label:"Barre de Recherche",id:"searchEngine",name:useControls.SearchEngine.id,hint:"Barre de recherche sur la carte",disabled:useControls.SearchEngine.disable},{label:"Mini carte",id:"overview",name:useControls.OverviewMap.id,hint:"Petite carte pour se repérer",disabled:useControls.OverviewMap.disable},{label:"Scale Line",id:"scaleLine",name:useControls.ScaleLine.id,hint:"Echelle",disabled:useControls.ScaleLine.disable},{label:"Gestionnaire de couches",id:"layerSwitcher",name:useControls.LayerSwitcher.id,hint:"Gestionnaire de couches",disabled:useControls.LayerSwitcher.disable},{label:"GetFeatureInfo",id:"getFeatureInfo",name:useControls.GetFeatureInfo.id,hint:"Informations sur les couches",disabled:useControls.GetFeatureInfo.disable},{label:"Légendes",id:"legends",name:useControls.Legends.id,hint:"Légendes",disabled:useControls.Legends.disable},{label:"Croquis",id:"drawing",name:useControls.Drawing.id,hint:"Annoter la carte",disabled:useControls.Drawing.disable},{label:"Geocodage inverse",id:"reverseGeocode",name:useControls.ReverseGeocode.id,hint:"Geocodage inverse",disabled:useControls.ReverseGeocode.disable},{label:"Calcul d'isochrone",id:"isocurve",name:useControls.Isocurve.id,hint:"Calcul d'isochrone",disabled:useControls.Isocurve.disable},{label:"Calcul d'itinéraire",id:"route",name:useControls.Route.id,hint:"Calcul d'itinéraire",disabled:useControls.Route.disable},{label:"Zoom",id:"zoom",name:useControls.Zoom.id,hint:"Zoom",disabled:useControls.Zoom.disable},{label:"Plein écran",id:"fullscreen",name:useControls.FullScreen.id,hint:"Plein écran",disabled:useControls.FullScreen.disable},{label:"Mesure de distance",id:"measureLength",name:useControls.MeasureLength.id,hint:"Mesures",disabled:useControls.MeasureLength.disable},{label:"Mesure d'aire",id:"measureArea",name:useControls.MeasureArea.id,hint:"Mesures",disabled:useControls.MeasureArea.disable},{label:"Mesure d'azimut",id:"measureAzimuth",name:useControls.MeasureAzimuth.id,hint:"Mesures",disabled:useControls.MeasureAzimuth.disable},{label:"Partager une carte",id:"share",name:useControls.Share.id,hint:"Partages",disabled:useControls.Share.disable},{label:"Afficher les coordonnées",id:"mousePosition",name:useControls.MousePosition.id,hint:"Position de la souris",disabled:useControls.MousePosition.disable},{label:"Selectionner un territoire",id:"territories",name:useControls.Territories.id,hint:"Territoires",disabled:useControls.Territories.disable},{label:"Profil altimétrique",id:"elevationPath",name:useControls.ElevationPath.id,hint:"Profil altimétrique",disabled:useControls.ElevationPath.disable},{label:"Importer des données",id:"layerImport",name:useControls.LayerImport.id,hint:"Import de données",disabled:useControls.LayerImport.disable},{label:"Imprimer une carte",id:"print",name:useControls.Print.id,hint:"Impression",disabled:useControls.Print.disable},{label:"Liste des controles",id:"controlList",name:useControls.ControlList.id,hint:"Liste des controles supplémentaires non affichés",disabled:useControls.ControlList.disable}].filter(r=>Object.keys(useControls).includes(r.name)).filter(r=>!r.disabled)}var defaultControls=useDefaultControls();const DEFAULT={LAYERS:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2$GEOPORTAIL:OGC:WMTS(1;1;0)",CONTROLS:defaultControls.toString(),X:283734.248995,Y:565511710065e-5,LON:2.5479878714752027,LAT:50.800781249995744,ZOOM:12,FIRSTVISIT:!1,NOINFORMATION:null},NAMESPACE="cartes.gouv.fr",ns=r=>NAMESPACE+"."+r,useMapStore=defineStore("map",()=>{const r=ref({});var e=useUrlParams(),t=DEFAULT.CONTROLS.split(",");for(const Nn in e)if(Object.prototype.hasOwnProperty.call(e,Nn)){if(Nn==="controls"){var ke=e[Nn].split(",");t.forEach(function(Dn){ke.includes(Dn)||(e[Nn]=e[Nn]+","+Dn)})}const jn=e[Nn];localStorage.setItem(ns(Nn),jn)}var Oe=useStorage(ns("zoom"),DEFAULT.ZOOM),Ge=useStorage(ns("x"),DEFAULT.X),Be=useStorage(ns("y"),DEFAULT.Y),je=useStorage(ns("lon"),DEFAULT.LON),Ve=useStorage(ns("lat"),DEFAULT.LAT),Ze=useStorage(ns("firstVisit"),DEFAULT.FIRSTVISIT),Qe=useStorage(ns("noInformation"),DEFAULT.NOINFORMATION),en=computed(()=>{var Nn=location.pathname.slice(-1),jn=Nn==="/"?location.pathname.slice(0,-1):location.pathname,Dn=location.origin+jn.replace("/embed","");return`${Dn}?c=${an.value}&z=${Math.round(Oe.value)}&l=${cn.value}&w=${fn.value}&permalink=yes`}),tn=computed(()=>{var Nn=location.pathname.slice(-1),jn=Nn==="/"?location.pathname.slice(0,-1):location.pathname,Dn=location.origin+(jn.includes("/embed")?jn:jn+"/embed");return`${Dn}?c=${an.value}&z=${Math.round(Oe.value)}&l=${cn.value}&permalink=yes`}),an=computed(()=>[je.value,Ve.value]),cn=useStorage(ns("layers"),DEFAULT.LAYERS);if(!cn.value){var dn=DEFAULT.LAYERS.split(",").filter(function(Nn){return!!Nn});for(let Nn=0;Nn<dn.length;Nn++){var hn=dn[Nn].replace(/\(.*\)/,"");hn&&bn(hn)}}var fn=useStorage(ns("controls"),DEFAULT.CONTROLS);if(!fn.value){var pn=DEFAULT.CONTROLS.split(",").filter(function(Nn){return!!Nn});for(let Nn=0;Nn<pn.length;Nn++)Rn(pn[Nn])}localStorage.setItem(ns("center"),an.value),localStorage.setItem(ns("permalink"),en.value),localStorage.setItem(ns("permalinkShare"),tn.value),watch(Oe,()=>{localStorage.setItem(ns("zoom"),Math.round(Oe.value))}),watch(Ge,()=>{localStorage.setItem(ns("x"),Ge.value)}),watch(Be,()=>{localStorage.setItem(ns("y"),Be.value)}),watch(je,()=>{localStorage.setItem(ns("lon"),je.value)}),watch(Ve,()=>{localStorage.setItem(ns("lat"),Ve.value)}),watch(cn,()=>{localStorage.setItem(ns("layers"),cn.value.toString())}),watch(en,()=>{localStorage.setItem(ns("permalink"),en.value.toString())}),watch(tn,()=>{localStorage.setItem(ns("permalinkShare"),tn.value.toString())}),watch(an,()=>{localStorage.setItem(ns("center"),an.value.toString())}),watch(Ze,()=>{localStorage.setItem(ns("firstVisit"),Ze.value)}),watch(Qe,()=>{localStorage.setItem(ns("noInformation"),Qe.value)}),watch(fn,()=>{localStorage.setItem(ns("controls"),fn.value.toString())});function mn(){return r.value}function yn(Nn){r.value=Nn}function Cn(){return cn.value.split(",").map(function(Nn){const jn=/\(.*\)/gm;return Nn.replace(jn,"")}).filter(Nn=>Nn!="")}function wn(){cn.value=""}function bn(Nn){if(Nn&&!Cn().includes(Nn)){var jn=cn.value===""?[]:cn.value.split(",");jn.push(Nn+"(1;1;0)"),cn.value=jn.toString()}}function Sn(Nn){const jn=Cn().indexOf(Nn);if(jn!==-1){var Dn=cn.value.split(",");Dn.splice(jn,1),cn.value=Dn.toString()}}function Mn(Nn,jn){const Dn=Cn().indexOf(Nn);if(Dn!==-1){var Ci=cn.value.split(","),Jn=Ci[Dn],Ki=Jn.substring(Jn.indexOf("(")+1,Jn.indexOf(")")),xn=Ki.split(";");for(const qn in jn)if(Object.prototype.hasOwnProperty.call(jn,qn)){const $n=jn[qn];qn==="opacity"&&(xn[0]=$n),qn==="visible"&&(xn[1]=+$n),qn==="gray"&&(xn[2]=+$n)}cn.value=cn.value.replace(Ci[Dn],Nn+"("+xn.join(";")+")")}}function Tn(Nn){if(Nn){var jn=[];for(let Ci=0;Ci<Nn.length;Ci++){const Jn=Nn[Ci],Ki=Cn().indexOf(Jn);if(Ki!==-1){var Dn=cn.value.split(",")[Ki];jn.push(Dn)}}cn.value=jn.join(",")}}function En(Nn){const jn=Cn().indexOf(Nn);if(jn!==-1){var Dn=cn.value.split(","),Ci=Dn[jn],Jn=Ci.substring(Ci.indexOf("(")+1,Ci.indexOf(")")),Ki=Jn.split(";");return{opacity:Number(Ki[0]),visible:!!Number(Ki[1]),gray:!!Number(Ki[2])}}}function An(){return fn.value.split(",").filter(function(Nn){return!!Nn})}function Ln(){fn.value=""}function Rn(Nn){if(!An().includes(Nn)){var jn=fn.value===""?[]:fn.value.split(",");jn.push(Nn),fn.value=jn.toString()}}function Gn(Nn){const jn=An().indexOf(Nn);if(jn!==-1){var Dn=fn.value.split(",");Dn.splice(jn,1),fn.value=Dn.toString()}}return{map:r,zoom:Oe,center:an,x:Ge,y:Be,lon:je,lat:Ve,firstVisit:Ze,noInformation:Qe,permalink:en,permalinkShare:tn,getMap:mn,setMap:yn,getLayers:Cn,cleanLayers:wn,addLayer:bn,removeLayer:Sn,updateLayerProperty:Mn,updateLayerPosition:Tn,getLayerProperty:En,getControls:An,cleanControls:Ln,addControl:Rn,removeControl:Gn}}),_hoisted_1$b=["id"],__default__$g={name:"Map"},_sfc_main$I=Object.assign(__default__$g,{props:{mapId:String},setup(r,{expose:e}){useMapStore();const t=r,ke=ref(null),Oe=reactive(new Map$1({target:t.mapId,controls:[]}));provide(t.mapId,Oe),onMounted(()=>{CRS.load(),Oe.setTarget(ke.value);const je=ke.value.getElementsByTagName("canvas");je.length&&(je[0].tabIndex=0)});const Ge=()=>{document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="SELECT"&&ke.value.focus()};return e({mapRef:ke,updateSize:()=>{Oe.updateSize()}}),(je,Ve)=>(openBlock(),createElementBlock("div",{id:r.mapId,ref_key:"mapRef",ref:ke,tabindex:"0",onMouseover:Ge},[renderSlot(je.$slots,"default")],40,_hoisted_1$b))}}),mainMap="mainMap",printMap="printMap",__default__$f={name:"View"},_sfc_main$H=Object.assign(__default__$f,{props:{zoom:Number,center:Array,mapId:String},setup(r){const e=useMapStore(),t=r,ke=inject(t.mapId),Oe=new View({zoom:t.zoom,center:fromLonLat(t.center)});return Oe.on("change:center",Ge=>{if(t.mapId==mainMap){e.x=Ge.target.getCenter()[0],e.y=Ge.target.getCenter()[1];var Be=toLonLat(Ge.target.getCenter());e.lon=Be[0],e.lat=Be[1]}}),Oe.on("change:resolution",Ge=>{e.zoom=Oe.getZoom()}),onMounted(()=>{ke&&ke.setView(Oe)}),(Ge,Be)=>null}}),_sfc_main$G={__name:"FullScreen",props:{visibility:Boolean,analytic:Boolean,fullscreenOptions:Object},setup(r){const e=r,t=inject(mainMap),ke=ref(new GeoportalFullScreen(e.fullscreenOptions));return onMounted(()=>{e.visibility&&t.addControl(ke.value)}),onBeforeUpdate(()=>{e.visibility?t.addControl(ke.value):t.removeControl(ke.value)}),(Oe,Ge)=>null}},useDataStore=defineStore("data",()=>{const r=ref({}),e=ref([]),t=ref({}),ke=ref({}),Oe=ref({}),Ge=ref({}),Be=ref([]),je=ref([]),Ve=ref(!1),Ze=ref("");async function Qe(){try{const An="data/layers.json",Rn=await fetch("data/edito.json"),Nn=await(await fetch(An)).json(),jn=await Rn.json(),Dn=Object.fromEntries(Object.keys(jn.layers).map(Jn=>[Jn,{...Nn.layers[Jn],...jn.layers[Jn]}])),Ci={...Nn.layers,...Dn};return Object.keys(Ci).map(Jn=>{Ci[Jn].key=Jn;let Ki={};return Ki[Jn]=Ci[Jn],Ki}),Be.value=jn.territories,Ge.value=jn.contacts,r.value=jn.informations,e.value=jn.thematics,je.value=jn.featured||[],t.value=Ci,ke.value=Nn.generalOptions,Oe.value=Nn.tileMatrixSets,this.isLoaded=!0,Ci}catch(An){console.log(An),this.isLoaded=!1,Ze.value=An.message}}function en(){return Be.value}function tn(){return Ge.value}function an(){return r.value}function cn(){return e.value}function dn(){return je.value}function hn(){return t.value}function fn(An,Ln){for(const Rn in t.value)if(Object.hasOwnProperty.call(t.value,Rn)){const Gn=t.value[Rn];if(Gn.name===An&&Gn.serviceParams.id.split(":")[1]===Ln)return Gn.name+"$GEOPORTAIL:"+Gn.serviceParams.id}}function pn(An,Ln){const Rn=this.getLayerIdByName(An,Ln);return this.getLayerByID(Rn)}function mn(An){return t.value[An]}function yn(An){return Object.values(t.value).filter(Ln=>{if(An&&Ln.title==An)return Ln})}function Cn(An){var Ln=[],Rn=ke.value.apiKeys;for(var Gn in Rn){var Nn=Rn[Gn];Nn.forEach(function(jn){jn===An&&Ln.push(Gn)})}return Ln}function wn(An,Ln){var Rn=null;if((Ln==="WMS"||Object.keys(this.getTileMatrixSets()).length!==0)&&Object.keys(this.getLayers()).length!==0){var Gn=this.getLayerIdByName(An,Ln);Rn=this.getLayerParamsByID(Gn)}return Rn}function bn(An){var Ln=null;if(An){Ln={};var Rn=this.getLayerByID(An),Gn=this.getLayerKeysByID(An);if(Gn.length===0)return;for(var Nn=0;Nn<Gn.length;Nn++)Rn.serviceParams.serverUrl[Gn[Nn]]&&(Ln.url=Rn.serviceParams.serverUrl[Gn[Nn]]);if(/\/v\//.test(Ln.url)?Ln.styles=" ":Ln.styles=Rn.styles[0].name,Ln.version=Rn.serviceParams.version,Ln.format=Rn.formats[0].name,Ln.projection=Rn.defaultProjection,Ln.minScale=Rn.globalConstraint.minScaleDenominator,Ln.maxScale=Rn.globalConstraint.maxScaleDenominator,Ln.extent=Rn.globalConstraint.bbox,Ln.legends=Rn.legends,Ln.title=Rn.title,Ln.description=Rn.description,Rn.wmtsOptions){Ln.tileMatrixSetLimits=Rn.wmtsOptions.tileMatrixSetLimits;var jn=Rn.wmtsOptions.tileMatrixSetLink;if(jn){Ln.TMSLink=jn;var Dn=this.getTileMatrixSetByID(jn);Ln.matrixIds=Object.keys(Dn.tileMatrices),Ln.tileMatrices=Dn.tileMatrices,Ln.nativeResolutions=Dn.nativeResolutions}}}return Ln}function Sn(An){var Ln=null;if(An){var Rn=this.getLayerByID(An);Ln={},Ln.projection=Rn.defaultProjection,Ln.minScale=Rn.globalConstraint.minScaleDenominator,Ln.maxScale=Rn.globalConstraint.maxScaleDenominator,Ln.extent=Rn.globalConstraint.bbox}return Ln}function Mn(An,Ln){var Rn=this.getLayerIdByName(An,Ln);return this.getGlobalConstraintsByID(Rn)}function Tn(){return Oe.value}function En(An){return Oe.value[An]}return{error:Ze,isLoaded:Ve,fetchData:Qe,getTerritories:en,getContacts:tn,getInformations:an,getThematics:cn,getFeatured:dn,getLayers:hn,getLayerKeysByID:Cn,getLayerIdByName:fn,getLayerByName:pn,getLayerByID:mn,getLayerByTitle:yn,getTileMatrixSets:Tn,getTileMatrixSetByID:En,getLayerParamsByName:wn,getLayerParamsByID:bn,getGlobalConstraintsByID:Sn,getGlobalConstraintsByName:Mn}});function useActionButtonEulerian(r){r.setAttribute("data-fr-analytics-action",r.title),r.setAttribute("data-fr-js-button-actionee",!0)}const _sfc_main$F={__name:"ReverseGeocode",props:{visibility:Boolean,analytic:Boolean,reverseGeocodeOptions:Object},setup(r){const e=r,t=dist.useLogger();useDataStore();const ke=inject(mainMap),Oe=ref(new ReverseGeocode(e.reverseGeocodeOptions));onMounted(()=>{if(e.visibility&&(ke.addControl(Oe.value),Oe.value.on("reverseGeocode:onclickresult",Ge),Oe.value.on("reverseGeocode:compute",Be),e.analytic)){var je=Oe.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(je)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Oe.value),e.analytic)){var je=Oe.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(je)}});const Ge=je=>{t.debug(je)},Be=je=>{t.debug(je)};return(je,Ve)=>null}},_sfc_main$E={__name:"SearchEngine",props:{visibility:Boolean,analytic:Boolean,searchEngineOptions:Object},setup(r){const e=r,t=dist.useLogger(),ke=useMapStore(),Oe=useDataStore(),Ge=inject(mainMap),Be=ref(new SearchEngine(e.searchEngineOptions));onMounted(()=>{e.visibility&&(Ge.addControl(Be.value),Be.value.on("searchengine:search:click",je),Be.value.on("searchengine:autocomplete:click",Ve),Be.value.on("searchengine:geocode:click",Ze),Be.value.on("searchengine:coordinates:click",Qe),Be.value.on("searchengine:geolocation:click",en))}),onBeforeUpdate(()=>{e.visibility||Ge.removeControl(Be.value)}),onUpdated(()=>{e.visibility&&Ge.addControl(Be.value)}),onUnmounted(()=>{});const je=tn=>{var an=Oe.getLayerIdByName(tn.suggest.name,tn.suggest.service);t.debug("onClickSearch",an),ke.addLayer(an)},Ve=tn=>{},Ze=tn=>{},Qe=tn=>{},en=tn=>{};return(tn,an)=>null}},UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const ke=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=ke+"-inner",this.element.className=ke+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,ke=e.projection,Oe=this.getUnits(),Ge=Oe=="degrees"?"degrees":"m";let Be=getPointResolution(ke,e.resolution,t,Ge);const je=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,Ve=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let Ze=je*Be,Qe="";if(Oe=="degrees"){const mn=METERS_PER_UNIT$1.degrees;Ze*=mn,Ze<mn/60?(Qe="″",Be*=3600):Ze<mn?(Qe="′",Be*=60):Qe="°"}else if(Oe=="imperial")Ze<.9144?(Qe="in",Be/=.0254):Ze<1609.344?(Qe="ft",Be/=.3048):(Qe="mi",Be/=1609.344);else if(Oe=="nautical")Be/=1852,Qe="NM";else if(Oe=="metric")Ze<.001?(Qe="μm",Be*=1e6):Ze<1?(Qe="mm",Be*=1e3):Ze<1e3?Qe="m":(Qe="km",Be/=1e3);else if(Oe=="us")Ze<.9144?(Qe="in",Be*=39.37):Ze<1609.344?(Qe="ft",Be/=.30480061):(Qe="mi",Be/=1609.3472);else throw new Error("Invalid units");let en=3*Math.floor(Math.log(je*Be)/Math.log(10)),tn,an,cn,dn,hn,fn;for(;;){cn=Math.floor(en/3);const mn=Math.pow(10,cn);if(tn=LEADING_DIGITS[(en%3+3)%3]*mn,an=Math.round(tn/Be),isNaN(an)){this.element.style.display="none",this.renderedVisible_=!1;return}if(Ve!==void 0&&an>=Ve){tn=dn,an=hn,cn=fn;break}else if(an>=je)break;dn=tn,hn=an,fn=cn,++en}const pn=this.scaleBar_?this.createScaleBar(an,tn,Qe):tn.toFixed(cn<0?-cn:0)+" "+Qe;this.renderedHTML_!=pn&&(this.innerElement_.innerHTML=pn,this.renderedHTML_=pn),this.renderedWidth_!=an&&(this.innerElement_.style.width=an+"px",this.renderedWidth_=an),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,ke){const Oe=this.getScaleForResolution(),Ge=Oe<1?Math.round(1/Oe).toLocaleString()+" : 1":"1 : "+Math.round(Oe).toLocaleString(),Be=this.scaleBarSteps_,je=e/Be,Ve=[this.createMarker("absolute")];for(let Qe=0;Qe<Be;++Qe){const en=Qe%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";Ve.push(`<div><div class="ol-scale-singlebar ${en}" style="width: ${je}px;"></div>`+this.createMarker("relative")+(Qe%2===0||Be===2?this.createStepText(Qe,e,!1,t,ke):"")+"</div>")}return Ve.push(this.createStepText(Be,e,!0,t,ke)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+Ge+"</div>":"")+Ve.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,ke,Oe,Ge){const je=(e===0?0:Math.round(Oe/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+Ge),Ve=e===0?-3:t/this.scaleBarSteps_*-1,Ze=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${Ve}px;text-align: ${e===0?"left":"center"};min-width: ${Ze}px;left: ${ke?t+"px":"unset"};">`+je+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||DEFAULT_DPI,ke=1e3/25.4;return e*ke*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const _sfc_main$D={__name:"ScaleLine",props:{visibility:Boolean,analytic:Boolean,scaleLineOptions:Object},setup(r){const e=r,t=inject(mainMap),ke=ref(new ScaleLine(e.scaleLineOptions));return onMounted(()=>{e.visibility&&t.addControl(ke.value)}),onBeforeUpdate(()=>{e.visibility||t.removeControl(ke.value)}),onUpdated(()=>{e.visibility&&t.addControl(ke.value)}),(Oe,Ge)=>null}},_sfc_main$C={__name:"OverviewMap",props:{visibility:Boolean,analytic:Boolean,overviewMapOptions:Object},setup(r){const e=r,t=dist.useLogger(),ke=inject(mainMap),Oe=ref(new GeoportalOverviewMap(e.overviewMapOptions)),Ge=useMatchMedia("SM");watch(Ge,()=>{if(e.visibility&&!Ge.value){if(ke.addControl(Oe.value),e.analytic){var je=Oe.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(je)}}else ke.removeControl(Oe.value)}),onMounted(()=>{if(e.visibility&&!Ge.value&&(ke.addControl(Oe.value),Oe.value.on("overviewmap:toggle",Be),e.analytic)){var je=Oe.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(je)}}),onBeforeUpdate(()=>{if(e.visibility&&!Ge.value){if(ke.addControl(Oe.value),e.analytic){var je=Oe.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(je)}}else ke.removeControl(Oe.value)});function Be(je){t.debug(je)}return(je,Ve)=>null}},_sfc_main$B={__name:"Zoom",props:{visibility:Boolean,analytic:Boolean,zoomOptions:Object},setup(r){const e=r,t=dist.useLogger(),ke=inject(mainMap),Oe=ref(new GeoportalZoom(e.zoomOptions));onMounted(()=>{e.visibility&&(ke.addControl(Oe.value),Oe.value.on("zoom:in",Ge),Oe.value.on("zoom:out",Be))}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Oe.value)}),onUpdated(()=>{e.visibility&&ke.addControl(Oe.value)});function Ge(je){t.debug(je)}function Be(je){t.debug(je)}return(je,Ve)=>null}},_sfc_main$A={__name:"LayerSwitcher",props:{visibility:Boolean,analytic:Boolean,layerSwitcherOptions:Object},setup(r){const e=r,t=dist.useLogger(),ke=useMapStore(),Oe=useDataStore(),Ge=inject(mainMap),Be=ref(new LayerSwitcher(e.layerSwitcherOptions));onMounted(()=>{if(e.visibility){if(Ge.addControl(Be.value),e.analytic){var an=Be.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(an)}Be.value.on("layerswitcher:add",je),Be.value.on("layerswitcher:remove",Ve),Be.value.on("layerswitcher:extent",Ze),Be.value.on("layerswitcher:change:opacity",Qe),Be.value.on("layerswitcher:change:visibility",en),Be.value.on("layerswitcher:change:position",tn)}}),onBeforeUpdate(()=>{if(!e.visibility&&(Ge.removeControl(Be.value),e.analytic)){var an=Be.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(an)}}),onUpdated(()=>{e.visibility&&Ge.addControl(Be.value)});const je=an=>{var cn=Oe.getLayerIdByName(an.layer.name,an.layer.service);t.debug("onAddLayer",cn),cn&&ke.addLayer(cn)},Ve=an=>{var cn=Oe.getLayerIdByName(an.layer.name,an.layer.service);t.debug("onRemoveLayer",cn),cn&&ke.removeLayer(cn)},Ze=an=>{if(t.debug("onZoomToExtentLayer",an),an.error){var cn=Oe.getGlobalConstraintsByName(an.layer.name,an.layer.service);if(cn){var dn=Ge.getView(),hn=dn.getProjection(),fn=[cn.extent.left,cn.extent.bottom,cn.extent.right,cn.extent.top],pn=cn.crs;pn||(pn="EPSG:4326");var mn=transformExtent(fn,pn,hn);mn&&dn.fit(mn)}}},Qe=an=>{var cn=Oe.getLayerIdByName(an.layer.name,an.layer.service);t.debug("onChangeOpacityLayer",an),ke.updateLayerProperty(cn,{opacity:an.opacity})},en=an=>{var cn=Oe.getLayerIdByName(an.layer.name,an.layer.service);t.debug("onChangeVisibilityLayer",an),ke.updateLayerProperty(cn,{visible:an.visibility})},tn=an=>{t.debug("onChangePositionLayer",an),ke.updateLayerPosition(an.layers.reverse().map(cn=>{if(cn.name&&cn.service)return Oe.getLayerIdByName(cn.name,cn.service)}))};return(an,cn)=>null}},_sfc_main$z={__name:"Legends",props:{visibility:Boolean,analytic:Boolean,legendsOptions:Object},setup(r){const e=r,t=inject(mainMap),ke=ref(new Legends(e.legendsOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Oe=ke.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(Oe)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(ke.value),e.analytic){var Oe=ke.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(Oe)}}else t.removeControl(ke.value)}),(Oe,Ge)=>null}},_sfc_main$y={__name:"Drawing",props:{visibility:Boolean,analytic:Boolean,drawingOptions:Object},setup(r){const e=r,t=inject(mainMap),ke=ref(new Drawing(e.drawingOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Oe=ke.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(Oe)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(ke.value),e.analytic){var Oe=ke.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(Oe)}}else t.removeControl(ke.value)}),(Oe,Ge)=>null}},_sfc_main$x={__name:"Isocurve",props:{visibility:Boolean,analytic:Boolean,isocurveOptions:Object},setup(r){const e=r,t=dist.useLogger();useDataStore();const ke=inject(mainMap),Oe=ref(new Isocurve(e.isocurveOptions));onMounted(()=>{if(e.visibility){if(ke.addControl(Oe.value),e.analytic){var Ve=Oe.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(Ve)}Oe.value.on("isocurve:drawstart",Ge),Oe.value.on("socurve:drawend",Be),Oe.value.on("isocurve:compute",je)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Oe.value),e.analytic)){var Ve=Oe.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(Ve)}});const Ge=Ve=>{t.debug(Ve)},Be=Ve=>{t.debug(Ve)},je=Ve=>{t.debug(Ve)};return(Ve,Ze)=>null}},_sfc_main$w={__name:"Route",props:{visibility:Boolean,analytic:Boolean,routeOptions:Object},setup(r){const e=r,t=dist.useLogger();useDataStore();const ke=inject(mainMap),Oe=ref(new Route(e.routeOptions));onMounted(()=>{if(e.visibility&&(ke.addControl(Oe.value),Oe.value.on("route:drawstart",Ge),Oe.value.on("route:drawend",Be),Oe.value.on("route:compute",je),e.analytic)){var Ve=Oe.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(Ve)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Oe.value),e.analytic)){var Ve=Oe.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(Ve)}});const Ge=Ve=>{t.debug(Ve)},Be=Ve=>{t.debug(Ve)},je=Ve=>{t.debug(Ve)};return(Ve,Ze)=>null}},_sfc_main$v={__name:"MeasureLength",props:{visibility:Boolean,analytic:Boolean,measureLengthOptions:Object},setup(r){const e=r,t=inject(mainMap),ke=ref(new MeasureLength(e.measureLengthOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Oe=ke.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(Oe)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(ke.value),e.analytic){var Oe=ke.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(Oe)}}else t.removeControl(ke.value)}),(Oe,Ge)=>null}},_sfc_main$u={__name:"MeasureArea",props:{visibility:Boolean,analytic:Boolean,measureAreaOptions:Object},setup(r){const e=r,t=inject(mainMap),ke=ref(new MeasureArea(e.measureAreaOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Oe=ke.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(Oe)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(ke.value),e.analytic){var Oe=ke.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(Oe)}}else t.removeControl(ke.value)}),(Oe,Ge)=>null}},_sfc_main$t={__name:"MeasureAzimuth",props:{visibility:Boolean,analytic:Boolean,measureAzimuthOptions:Object},setup(r){const e=r,t=inject(mainMap),ke=ref(new MeasureAzimuth(e.measureAzimuthOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Oe=ke.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(Oe)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(ke.value),e.analytic){var Oe=ke.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(Oe)}}else t.removeControl(ke.value)}),(Oe,Ge)=>null}},_sfc_main$s={__name:"MousePosition",props:{visibility:Boolean,analytic:Boolean,mousePositionOptions:Object},setup(r){const e=r;dist.useLogger();const t=inject(mainMap),ke=ref(new MousePosition(e.mousePositionOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Oe=ke.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(Oe)}}),onBeforeUpdate(()=>{e.visibility||t.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Oe=ke.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(Oe)}}),(Oe,Ge)=>null}},_sfc_main$r={__name:"ElevationPath",props:{visibility:Boolean,analytic:Boolean,elevationPathOptions:Object},setup(r){const e=r,t=dist.useLogger(),ke=inject(mainMap),Oe=ref(new ElevationPath(e.elevationPathOptions));onMounted(()=>{if(e.visibility&&(ke.addControl(Oe.value),Oe.value.on("elevationpath:drawstart",Ge),Oe.value.on("elevationpath:drawend",Be),Oe.value.on("elevationpath:compute",je),e.analytic)){var Ve=Oe.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(Ve)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Oe.value),e.analytic)){var Ve=Oe.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(Ve)}});const Ge=Ve=>{t.debug(Ve)},Be=Ve=>{t.debug(Ve)},je=Ve=>{t.debug(Ve)};return(Ve,Ze)=>null}},_sfc_main$q={__name:"Territories",props:{visibility:Boolean,analytic:Boolean,territoriesOptions:Object},setup(r){const e=r;dist.useLogger();const t=useDataStore(),ke=inject(mainMap),Oe=ref(new Territories(e.territoriesOptions));function Ge(){var Be=t.getTerritories();for(let je=0;je<Be.length;je++){const Ve=Be[je];Oe.value.setTerritory(Ve)}}return onMounted(()=>{if(e.visibility&&(Ge(),ke.addControl(Oe.value),e.analytic)){var Be=Oe.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(Ge(),ke.addControl(Oe.value),e.analytic)){var Be=Oe.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(Be)}}),(Be,je)=>null}},_sfc_main$p={__name:"GetFeatureInfo",props:{visibility:Boolean,analytic:Boolean,getFeatureInfoOptions:Object},setup(r){const e=r,t=dist.useLogger(),ke=inject(mainMap),Oe=ref(new GetFeatureInfo(e.getFeatureInfoOptions)),Ge=useMatchMedia("SM");watch(Ge,()=>{if(e.visibility&&!Ge.value){if(ke.addControl(Oe.value),e.analytic){var je=Oe.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(je)}}else ke.removeControl(Oe.value)}),onMounted(()=>{if(e.visibility&&!Ge.value&&(ke.addControl(Oe.value),Oe.value.on("GetFeatureInfo:toggle",Be),e.analytic)){var je=Oe.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(je)}}),onBeforeUpdate(()=>{if(e.visibility&&!Ge.value){if(ke.addControl(Oe.value),e.analytic){var je=Oe.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(je)}}else ke.removeControl(Oe.value)});function Be(je){t.debug(je)}return(je,Ve)=>null}},_sfc_main$o={__name:"LayerImport",props:{visibility:Boolean,analytic:Boolean,layerImportOptions:Object},setup(r){const e=r,t=dist.useLogger(),ke=inject(mainMap),Oe=ref(new LayerImport(e.layerImportOptions));return onMounted(()=>{if(e.visibility&&(ke.addControl(Oe.value),e.analytic)){t.debug(Oe.value.element);var Ge=Oe.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(Ge)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Oe.value),e.analytic)){var Ge=Oe.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(Ge)}}),(Ge,Be)=>null}},selectedControls=computed(()=>useMapStore().getControls()),_sfc_main$n={__name:"ControlList",props:{visibility:Boolean,analytic:Boolean,controlListOptions:Object},setup(r){const e=r,t=dist.useLogger(),ke=inject(mainMap),Oe=ref(new ControlList(e.controlListOptions)),Ge=useMatchMedia("SM"),Be=useMatchMediaHeight("XS");return watch(Ge,()=>{e.visibility&&!Ge.value&&!Be.value?Oe.value.setPosition("top-right"):Oe.value.setPosition("bottom-right")}),watch(Be,()=>{e.visibility&&!Ge.value&&!Be.value?Oe.value.setPosition("top-right"):Oe.value.setPosition("bottom-right")}),watch(selectedControls,()=>{setTimeout(()=>{if(ke.removeControl(Oe.value),e.visibility){if(ke.addControl(Oe.value),e.analytic){t.debug(Oe.value.element);var je=Oe.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(je)}!Ge.value&&!Be.value?Oe.value.setPosition("top-right"):Oe.value.setPosition("bottom-right")}},10)}),onMounted(()=>{if(e.visibility&&(ke.addControl(Oe.value),e.analytic)){t.debug(Oe.value.element);var je=Oe.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(je)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Oe.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Oe.value),e.analytic)){var je=Oe.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(je)}}),(je,Ve)=>null}},_sfc_main$m={__name:"Layer",props:{layerOptions:Object,mapId:String},setup(r){const e=r,t=dist.useLogger();t.debug(e.layerOptions);const ke=useDataStore(),Oe=inject(e.mapId),Ge=ref(null);return onMounted(()=>{var Be=ke.getLayerByName(e.layerOptions.name,e.layerOptions.service),je=ke.getLayerParamsByName(e.layerOptions.name,e.layerOptions.service);Be.params=je,t.debug("layer to add",Be);var Ve=e.layerOptions.service,Ze=e.layerOptions.name,Qe={visible:e.layerOptions.visible,opacity:e.layerOptions.opacity,gray:e.layerOptions.gray,sourceParams:{crossOrigin:"anonymous"}},en={preload:1/0,cacheSize:1024};switch(Ve){case"WMS":Ge.value=new LayerWMS({layer:Ze,configuration:Be,apiKey:"ign_scan_ws",olParams:Object.assign(Qe,en)});break;case"WMTS":Ge.value=new LayerWMTS({layer:Ze,configuration:Be,apiKey:"ign_scan_ws",olParams:Object.assign(Qe,en)});break;case"TMS":Ge.value=new LayerMapBox({layer:Ze,configuration:Be,apiKey:"ign_scan_ws"},Qe);break}Ge.value&&Oe.addLayer(Ge.value)}),onUnmounted(()=>{Oe.removeLayer(Ge.value)}),(Be,je)=>(openBlock(),createElementBlock("div",null,[renderSlot(Be.$slots,"default")]))}},_sfc_main$l={__name:"Layers",props:{selectedLayers:Object,mapId:String},setup(r){const e=r;dist.useLogger();var t=computed(()=>toRaw(e.selectedLayers).map(ke=>({name:ke.name,service:ke.serviceParams.id.split(":")[1],key:ke.key,opacity:ke.hasOwnProperty("opacity")?ke.opacity:1,visible:ke.hasOwnProperty("visible")?ke.visible:!0,gray:ke.hasOwnProperty("gray")?ke.gray:!0})));return(ke,Oe)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(t),Ge=>(openBlock(),createBlock(_sfc_main$m,{key:Ge.key,"layer-options":Ge,"map-id":r.mapId},null,8,["layer-options","map-id"]))),128))}};function _typeof(r){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(r)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(r,e){for(var t=new u16(31),ke=0;ke<31;++ke)t[ke]=e+=1<<r[ke-1];for(var Oe=new i32(t[30]),ke=1;ke<30;++ke)for(var Ge=t[ke];Ge<t[ke+1];++Ge)Oe[Ge]=Ge-t[ke]<<5|ke;return{b:t,r:Oe}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(r,e,t){for(var ke=r.length,Oe=0,Ge=new u16(e);Oe<ke;++Oe)r[Oe]&&++Ge[r[Oe]-1];var Be=new u16(e);for(Oe=1;Oe<e;++Oe)Be[Oe]=Be[Oe-1]+Ge[Oe-1]<<1;var je;if(t){je=new u16(1<<e);var Ve=15-e;for(Oe=0;Oe<ke;++Oe)if(r[Oe])for(var Ze=Oe<<4|r[Oe],Qe=e-r[Oe],en=Be[r[Oe]-1]++<<Qe,tn=en|(1<<Qe)-1;en<=tn;++en)je[rev[en]>>Ve]=Ze}else for(je=new u16(ke),Oe=0;Oe<ke;++Oe)r[Oe]&&(je[Oe]=rev[Be[r[Oe]-1]++]>>15-r[Oe]);return je},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(r){for(var e=r[0],t=1;t<r.length;++t)r[t]>e&&(e=r[t]);return e},bits=function(r,e,t){var ke=e/8|0;return(r[ke]|r[ke+1]<<8)>>(e&7)&t},bits16=function(r,e){var t=e/8|0;return(r[t]|r[t+1]<<8|r[t+2]<<16)>>(e&7)},shft=function(r){return(r+7)/8|0},slc=function(r,e,t){return(t==null||t>r.length)&&(t=r.length),new u8(r.subarray(e,t))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(r,e,t){var ke=new Error(e||ec[r]);if(ke.code=r,Error.captureStackTrace&&Error.captureStackTrace(ke,err),!t)throw ke;return ke},inflt=function(r,e,t,ke){var Oe=r.length,Ge=0;if(!Oe||e.f&&!e.l)return t||new u8(0);var Be=!t,je=Be||e.i!=2,Ve=e.i;Be&&(t=new u8(Oe*3));var Ze=function(tr){var Br=t.length;if(tr>Br){var Un=new u8(Math.max(Br*2,tr));Un.set(t),t=Un}},Qe=e.f||0,en=e.p||0,tn=e.b||0,an=e.l,cn=e.d,dn=e.m,hn=e.n,fn=Oe*8;do{if(!an){Qe=bits(r,en,1);var pn=bits(r,en+1,3);if(en+=3,pn)if(pn==1)an=flrm,cn=fdrm,dn=9,hn=5;else if(pn==2){var wn=bits(r,en,31)+257,bn=bits(r,en+10,15)+4,Sn=wn+bits(r,en+5,31)+1;en+=14;for(var Mn=new u8(Sn),Tn=new u8(19),En=0;En<bn;++En)Tn[clim[En]]=bits(r,en+En*3,7);en+=bn*3;for(var An=max(Tn),Ln=(1<<An)-1,Rn=hMap(Tn,An,1),En=0;En<Sn;){var Gn=Rn[bits(r,en,Ln)];en+=Gn&15;var mn=Gn>>4;if(mn<16)Mn[En++]=mn;else{var Nn=0,jn=0;for(mn==16?(jn=3+bits(r,en,3),en+=2,Nn=Mn[En-1]):mn==17?(jn=3+bits(r,en,7),en+=3):mn==18&&(jn=11+bits(r,en,127),en+=7);jn--;)Mn[En++]=Nn}}var Dn=Mn.subarray(0,wn),Ci=Mn.subarray(wn);dn=max(Dn),hn=max(Ci),an=hMap(Dn,dn,1),cn=hMap(Ci,hn,1)}else err(1);else{var mn=shft(en)+4,yn=r[mn-4]|r[mn-3]<<8,Cn=mn+yn;if(Cn>Oe){Ve&&err(0);break}je&&Ze(tn+yn),t.set(r.subarray(mn,Cn),tn),e.b=tn+=yn,e.p=en=Cn*8,e.f=Qe;continue}if(en>fn){Ve&&err(0);break}}je&&Ze(tn+131072);for(var Jn=(1<<dn)-1,Ki=(1<<hn)-1,xn=en;;xn=en){var Nn=an[bits16(r,en)&Jn],qn=Nn>>4;if(en+=Nn&15,en>fn){Ve&&err(0);break}if(Nn||err(2),qn<256)t[tn++]=qn;else if(qn==256){xn=en,an=null;break}else{var $n=qn-254;if(qn>264){var En=qn-257,Ai=fleb[En];$n=bits(r,en,(1<<Ai)-1)+fl[En],en+=Ai}var Ti=cn[bits16(r,en)&Ki],Kn=Ti>>4;Ti||err(3),en+=Ti&15;var Ci=fd[Kn];if(Kn>3){var Ai=fdeb[Kn];Ci+=bits16(r,en)&(1<<Ai)-1,en+=Ai}if(en>fn){Ve&&err(0);break}je&&Ze(tn+131072);var Ii=tn+$n;if(tn<Ci){var Pi=Ge-Ci,Mi=Math.min(Ci,Ii);for(Pi+tn<0&&err(3);tn<Mi;++tn)t[tn]=ke[Pi+tn]}for(;tn<Ii;++tn)t[tn]=t[tn-Ci]}}e.l=an,e.p=xn,e.b=tn,e.f=Qe,an&&(Qe=1,e.m=dn,e.d=cn,e.n=hn)}while(!Qe);return tn!=t.length&&Be?slc(t,0,tn):t.subarray(0,tn)},wbits=function(r,e,t){t<<=e&7;var ke=e/8|0;r[ke]|=t,r[ke+1]|=t>>8},wbits16=function(r,e,t){t<<=e&7;var ke=e/8|0;r[ke]|=t,r[ke+1]|=t>>8,r[ke+2]|=t>>16},hTree=function(r,e){for(var t=[],ke=0;ke<r.length;++ke)r[ke]&&t.push({s:ke,f:r[ke]});var Oe=t.length,Ge=t.slice();if(!Oe)return{t:et$1,l:0};if(Oe==1){var Be=new u8(t[0].s+1);return Be[t[0].s]=1,{t:Be,l:1}}t.sort(function(Cn,wn){return Cn.f-wn.f}),t.push({s:-1,f:25001});var je=t[0],Ve=t[1],Ze=0,Qe=1,en=2;for(t[0]={s:-1,f:je.f+Ve.f,l:je,r:Ve};Qe!=Oe-1;)je=t[t[Ze].f<t[en].f?Ze++:en++],Ve=t[Ze!=Qe&&t[Ze].f<t[en].f?Ze++:en++],t[Qe++]={s:-1,f:je.f+Ve.f,l:je,r:Ve};for(var tn=Ge[0].s,ke=1;ke<Oe;++ke)Ge[ke].s>tn&&(tn=Ge[ke].s);var an=new u16(tn+1),cn=ln(t[Qe-1],an,0);if(cn>e){var ke=0,dn=0,hn=cn-e,fn=1<<hn;for(Ge.sort(function(wn,bn){return an[bn.s]-an[wn.s]||wn.f-bn.f});ke<Oe;++ke){var pn=Ge[ke].s;if(an[pn]>e)dn+=fn-(1<<cn-an[pn]),an[pn]=e;else break}for(dn>>=hn;dn>0;){var mn=Ge[ke].s;an[mn]<e?dn-=1<<e-an[mn]++-1:++ke}for(;ke>=0&&dn;--ke){var yn=Ge[ke].s;an[yn]==e&&(--an[yn],++dn)}cn=e}return{t:new u8(an),l:cn}},ln=function(r,e,t){return r.s==-1?Math.max(ln(r.l,e,t+1),ln(r.r,e,t+1)):e[r.s]=t},lc=function(r){for(var e=r.length;e&&!r[--e];);for(var t=new u16(++e),ke=0,Oe=r[0],Ge=1,Be=function(Ve){t[ke++]=Ve},je=1;je<=e;++je)if(r[je]==Oe&&je!=e)++Ge;else{if(!Oe&&Ge>2){for(;Ge>138;Ge-=138)Be(32754);Ge>2&&(Be(Ge>10?Ge-11<<5|28690:Ge-3<<5|12305),Ge=0)}else if(Ge>3){for(Be(Oe),--Ge;Ge>6;Ge-=6)Be(8304);Ge>2&&(Be(Ge-3<<5|8208),Ge=0)}for(;Ge--;)Be(Oe);Ge=1,Oe=r[je]}return{c:t.subarray(0,ke),n:e}},clen=function(r,e){for(var t=0,ke=0;ke<e.length;++ke)t+=r[ke]*e[ke];return t},wfblk=function(r,e,t){var ke=t.length,Oe=shft(e+2);r[Oe]=ke&255,r[Oe+1]=ke>>8,r[Oe+2]=r[Oe]^255,r[Oe+3]=r[Oe+1]^255;for(var Ge=0;Ge<ke;++Ge)r[Oe+Ge+4]=t[Ge];return(Oe+4+ke)*8},wblk=function(r,e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe){wbits(e,Qe++,t),++Oe[256];for(var en=hTree(Oe,15),tn=en.t,an=en.l,cn=hTree(Ge,15),dn=cn.t,hn=cn.l,fn=lc(tn),pn=fn.c,mn=fn.n,yn=lc(dn),Cn=yn.c,wn=yn.n,bn=new u16(19),Sn=0;Sn<pn.length;++Sn)++bn[pn[Sn]&31];for(var Sn=0;Sn<Cn.length;++Sn)++bn[Cn[Sn]&31];for(var Mn=hTree(bn,7),Tn=Mn.t,En=Mn.l,An=19;An>4&&!Tn[clim[An-1]];--An);var Ln=Ze+5<<3,Rn=clen(Oe,flt)+clen(Ge,fdt)+Be,Gn=clen(Oe,tn)+clen(Ge,dn)+Be+14+3*An+clen(bn,Tn)+2*bn[16]+3*bn[17]+7*bn[18];if(Ve>=0&&Ln<=Rn&&Ln<=Gn)return wfblk(e,Qe,r.subarray(Ve,Ve+Ze));var Nn,jn,Dn,Ci;if(wbits(e,Qe,1+(Gn<Rn)),Qe+=2,Gn<Rn){Nn=hMap(tn,an,0),jn=tn,Dn=hMap(dn,hn,0),Ci=dn;var Jn=hMap(Tn,En,0);wbits(e,Qe,mn-257),wbits(e,Qe+5,wn-1),wbits(e,Qe+10,An-4),Qe+=14;for(var Sn=0;Sn<An;++Sn)wbits(e,Qe+3*Sn,Tn[clim[Sn]]);Qe+=3*An;for(var Ki=[pn,Cn],xn=0;xn<2;++xn)for(var qn=Ki[xn],Sn=0;Sn<qn.length;++Sn){var $n=qn[Sn]&31;wbits(e,Qe,Jn[$n]),Qe+=Tn[$n],$n>15&&(wbits(e,Qe,qn[Sn]>>5&127),Qe+=qn[Sn]>>12)}}else Nn=flm,jn=flt,Dn=fdm,Ci=fdt;for(var Sn=0;Sn<je;++Sn){var Ai=ke[Sn];if(Ai>255){var $n=Ai>>18&31;wbits16(e,Qe,Nn[$n+257]),Qe+=jn[$n+257],$n>7&&(wbits(e,Qe,Ai>>23&31),Qe+=fleb[$n]);var Ti=Ai&31;wbits16(e,Qe,Dn[Ti]),Qe+=Ci[Ti],Ti>3&&(wbits16(e,Qe,Ai>>5&8191),Qe+=fdeb[Ti])}else wbits16(e,Qe,Nn[Ai]),Qe+=jn[Ai]}return wbits16(e,Qe,Nn[256]),Qe+jn[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(r,e,t,ke,Oe,Ge){var Be=Ge.z||r.length,je=new u8(ke+Be+5*(1+Math.ceil(Be/7e3))+Oe),Ve=je.subarray(ke,je.length-Oe),Ze=Ge.l,Qe=(Ge.r||0)&7;if(e){Qe&&(Ve[0]=Ge.r>>3);for(var en=deo[e-1],tn=en>>13,an=en&8191,cn=(1<<t)-1,dn=Ge.p||new u16(32768),hn=Ge.h||new u16(cn+1),fn=Math.ceil(t/3),pn=2*fn,mn=function(Qn){return(r[Qn]^r[Qn+1]<<fn^r[Qn+2]<<pn)&cn},yn=new i32(25e3),Cn=new u16(288),wn=new u16(32),bn=0,Sn=0,Mn=Ge.i||0,Tn=0,En=Ge.w||0,An=0;Mn+2<Be;++Mn){var Ln=mn(Mn),Rn=Mn&32767,Gn=hn[Ln];if(dn[Rn]=Gn,hn[Ln]=Rn,En<=Mn){var Nn=Be-Mn;if((bn>7e3||Tn>24576)&&(Nn>423||!Ze)){Qe=wblk(r,Ve,0,yn,Cn,wn,Sn,Tn,An,Mn-An,Qe),Tn=bn=Sn=0,An=Mn;for(var jn=0;jn<286;++jn)Cn[jn]=0;for(var jn=0;jn<30;++jn)wn[jn]=0}var Dn=2,Ci=0,Jn=an,Ki=Rn-Gn&32767;if(Nn>2&&Ln==mn(Mn-Ki))for(var xn=Math.min(tn,Nn)-1,qn=Math.min(32767,Mn),$n=Math.min(258,Nn);Ki<=qn&&--Jn&&Rn!=Gn;){if(r[Mn+Dn]==r[Mn+Dn-Ki]){for(var Ai=0;Ai<$n&&r[Mn+Ai]==r[Mn+Ai-Ki];++Ai);if(Ai>Dn){if(Dn=Ai,Ci=Ki,Ai>xn)break;for(var Ti=Math.min(Ki,Ai-2),Kn=0,jn=0;jn<Ti;++jn){var Ii=Mn-Ki+jn&32767,Pi=dn[Ii],Mi=Ii-Pi&32767;Mi>Kn&&(Kn=Mi,Gn=Ii)}}}Rn=Gn,Gn=dn[Rn],Ki+=Rn-Gn&32767}if(Ci){yn[Tn++]=268435456|revfl[Dn]<<18|revfd[Ci];var tr=revfl[Dn]&31,Br=revfd[Ci]&31;Sn+=fleb[tr]+fdeb[Br],++Cn[257+tr],++wn[Br],En=Mn+Dn,++bn}else yn[Tn++]=r[Mn],++Cn[r[Mn]]}}for(Mn=Math.max(Mn,En);Mn<Be;++Mn)yn[Tn++]=r[Mn],++Cn[r[Mn]];Qe=wblk(r,Ve,Ze,yn,Cn,wn,Sn,Tn,An,Mn-An,Qe),Ze||(Ge.r=Qe&7|Ve[Qe/8|0]<<3,Qe-=7,Ge.h=hn,Ge.p=dn,Ge.i=Mn,Ge.w=En)}else{for(var Mn=Ge.w||0;Mn<Be+Ze;Mn+=65535){var Un=Mn+65535;Un>=Be&&(Ve[Qe/8|0]=Ze,Un=Be),Qe=wfblk(Ve,Qe+1,r.subarray(Mn,Un))}Ge.i=Be}return slc(je,0,ke+shft(Qe)+Oe)},adler=function(){var r=1,e=0;return{p:function(t){for(var ke=r,Oe=e,Ge=t.length|0,Be=0;Be!=Ge;){for(var je=Math.min(Be+2655,Ge);Be<je;++Be)Oe+=ke+=t[Be];ke=(ke&65535)+15*(ke>>16),Oe=(Oe&65535)+15*(Oe>>16)}r=ke,e=Oe},d:function(){return r%=65521,e%=65521,(r&255)<<24|(r&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(r,e,t,ke,Oe){if(!Oe&&(Oe={l:1},e.dictionary)){var Ge=e.dictionary.subarray(-32768),Be=new u8(Ge.length+r.length);Be.set(Ge),Be.set(r,Ge.length),r=Be,Oe.w=Ge.length}return dflt(r,e.level==null?6:e.level,e.mem==null?Oe.l?Math.ceil(Math.max(8,Math.min(13,Math.log(r.length)))*1.5):20:12+e.mem,t,ke,Oe)},wbytes=function(r,e,t){for(;t;++e)r[e]=t,t>>>=8},zlh=function(r,e){var t=e.level,ke=t==0?0:t<6?1:t==9?3:2;if(r[0]=120,r[1]=ke<<6|(e.dictionary&&32),r[1]|=31-(r[0]<<8|r[1])%31,e.dictionary){var Oe=adler();Oe.p(e.dictionary),wbytes(r,2,Oe.d())}},zls=function(r,e){return((r[0]&15)!=8||r[0]>>4>7||(r[0]<<8|r[1])%31)&&err(6,"invalid zlib data"),(r[1]>>5&1)==+!e&&err(6,"invalid zlib data: "+(r[1]&32?"need":"unexpected")+" dictionary"),(r[1]>>3&4)+2};function zlibSync(r,e){e||(e={});var t=adler();t.p(r);var ke=dopt(r,e,e.dictionary?6:2,4);return zlh(ke,e),wbytes(ke,ke.length-4,t.d()),ke}function unzlibSync(r,e){return inflt(r.subarray(zls(r,e),-4),{i:2},e,e)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(r){}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(r){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(r){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(r))}};function o(r,e,t){var ke=new XMLHttpRequest;ke.open("GET",r),ke.responseType="blob",ke.onload=function(){l(ke.response,e,t)},ke.onerror=function(){a.error("could not download file")},ke.send()}function s(r){var e=new XMLHttpRequest;e.open("HEAD",r,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(r){try{r.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),r.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(r,e,t){var ke=n.URL||n.webkitURL,Oe=document.createElement("a");e=e||r.name||"download",Oe.download=e,Oe.rel="noopener",typeof r=="string"?(Oe.href=r,Oe.origin!==location.origin?s(Oe.href)?o(r,e,t):c(Oe,Oe.target="_blank"):c(Oe)):(Oe.href=ke.createObjectURL(r),setTimeout(function(){ke.revokeObjectURL(Oe.href)},4e4),setTimeout(function(){c(Oe)},0))}:"msSaveOrOpenBlob"in navigator?function(r,e,t){if(e=e||r.name||"download",typeof r=="string")if(s(r))o(r,e,t);else{var ke=document.createElement("a");ke.href=r,ke.target="_blank",setTimeout(function(){c(ke)})}else navigator.msSaveOrOpenBlob(function(Oe,Ge){return Ge===void 0?Ge={autoBom:!1}:_typeof(Ge)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Ge={autoBom:!Ge}),Ge.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Oe.type)?new Blob(["\uFEFF",Oe],{type:Oe.type}):Oe}(r,t),e)}:function(r,e,t,ke){if((ke=ke||open("","_blank"))&&(ke.document.title=ke.document.body.innerText="downloading..."),typeof r=="string")return o(r,e,t);var Oe=r.type==="application/octet-stream",Ge=/constructor/i.test(n.HTMLElement)||n.safari,Be=/CriOS\/[\d]+/.test(navigator.userAgent);if((Be||Oe&&Ge)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var je=new FileReader;je.onloadend=function(){var Qe=je.result;Qe=Be?Qe:Qe.replace(/^data:[^;]*;/,"data:attachment/file;"),ke?ke.location.href=Qe:location=Qe,ke=null},je.readAsDataURL(r)}else{var Ve=n.URL||n.webkitURL,Ze=Ve.createObjectURL(r);ke?ke.location=Ze:location.href=Ze,ke=null,setTimeout(function(){Ve.revokeObjectURL(Ze)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(r){var e;r=r||"",this.ok=!1,r.charAt(0)=="#"&&(r=r.substr(1,6)),r={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[r=(r=r.replace(/ /g,"")).toLowerCase()]||r;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(je){return[parseInt(je[1]),parseInt(je[2]),parseInt(je[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(je){return[parseInt(je[1],16),parseInt(je[2],16),parseInt(je[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(je){return[parseInt(je[1]+je[1],16),parseInt(je[2]+je[2],16),parseInt(je[3]+je[3],16)]}}],ke=0;ke<t.length;ke++){var Oe=t[ke].re,Ge=t[ke].process,Be=Oe.exec(r);Be&&(e=Ge(Be),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var je=this.r.toString(16),Ve=this.g.toString(16),Ze=this.b.toString(16);return je.length==1&&(je="0"+je),Ve.length==1&&(Ve="0"+Ve),Ze.length==1&&(Ze="0"+Ze),"#"+je+Ve+Ze}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(r,e){var t=r[0],ke=r[1],Oe=r[2],Ge=r[3];t=g(t,ke,Oe,Ge,e[0],7,-680876936),Ge=g(Ge,t,ke,Oe,e[1],12,-389564586),Oe=g(Oe,Ge,t,ke,e[2],17,606105819),ke=g(ke,Oe,Ge,t,e[3],22,-1044525330),t=g(t,ke,Oe,Ge,e[4],7,-176418897),Ge=g(Ge,t,ke,Oe,e[5],12,1200080426),Oe=g(Oe,Ge,t,ke,e[6],17,-1473231341),ke=g(ke,Oe,Ge,t,e[7],22,-45705983),t=g(t,ke,Oe,Ge,e[8],7,1770035416),Ge=g(Ge,t,ke,Oe,e[9],12,-1958414417),Oe=g(Oe,Ge,t,ke,e[10],17,-42063),ke=g(ke,Oe,Ge,t,e[11],22,-1990404162),t=g(t,ke,Oe,Ge,e[12],7,1804603682),Ge=g(Ge,t,ke,Oe,e[13],12,-40341101),Oe=g(Oe,Ge,t,ke,e[14],17,-1502002290),t=m(t,ke=g(ke,Oe,Ge,t,e[15],22,1236535329),Oe,Ge,e[1],5,-165796510),Ge=m(Ge,t,ke,Oe,e[6],9,-1069501632),Oe=m(Oe,Ge,t,ke,e[11],14,643717713),ke=m(ke,Oe,Ge,t,e[0],20,-373897302),t=m(t,ke,Oe,Ge,e[5],5,-701558691),Ge=m(Ge,t,ke,Oe,e[10],9,38016083),Oe=m(Oe,Ge,t,ke,e[15],14,-660478335),ke=m(ke,Oe,Ge,t,e[4],20,-405537848),t=m(t,ke,Oe,Ge,e[9],5,568446438),Ge=m(Ge,t,ke,Oe,e[14],9,-1019803690),Oe=m(Oe,Ge,t,ke,e[3],14,-187363961),ke=m(ke,Oe,Ge,t,e[8],20,1163531501),t=m(t,ke,Oe,Ge,e[13],5,-1444681467),Ge=m(Ge,t,ke,Oe,e[2],9,-51403784),Oe=m(Oe,Ge,t,ke,e[7],14,1735328473),t=v(t,ke=m(ke,Oe,Ge,t,e[12],20,-1926607734),Oe,Ge,e[5],4,-378558),Ge=v(Ge,t,ke,Oe,e[8],11,-2022574463),Oe=v(Oe,Ge,t,ke,e[11],16,1839030562),ke=v(ke,Oe,Ge,t,e[14],23,-35309556),t=v(t,ke,Oe,Ge,e[1],4,-1530992060),Ge=v(Ge,t,ke,Oe,e[4],11,1272893353),Oe=v(Oe,Ge,t,ke,e[7],16,-155497632),ke=v(ke,Oe,Ge,t,e[10],23,-1094730640),t=v(t,ke,Oe,Ge,e[13],4,681279174),Ge=v(Ge,t,ke,Oe,e[0],11,-358537222),Oe=v(Oe,Ge,t,ke,e[3],16,-722521979),ke=v(ke,Oe,Ge,t,e[6],23,76029189),t=v(t,ke,Oe,Ge,e[9],4,-640364487),Ge=v(Ge,t,ke,Oe,e[12],11,-421815835),Oe=v(Oe,Ge,t,ke,e[15],16,530742520),t=b(t,ke=v(ke,Oe,Ge,t,e[2],23,-995338651),Oe,Ge,e[0],6,-198630844),Ge=b(Ge,t,ke,Oe,e[7],10,1126891415),Oe=b(Oe,Ge,t,ke,e[14],15,-1416354905),ke=b(ke,Oe,Ge,t,e[5],21,-57434055),t=b(t,ke,Oe,Ge,e[12],6,1700485571),Ge=b(Ge,t,ke,Oe,e[3],10,-1894986606),Oe=b(Oe,Ge,t,ke,e[10],15,-1051523),ke=b(ke,Oe,Ge,t,e[1],21,-2054922799),t=b(t,ke,Oe,Ge,e[8],6,1873313359),Ge=b(Ge,t,ke,Oe,e[15],10,-30611744),Oe=b(Oe,Ge,t,ke,e[6],15,-1560198380),ke=b(ke,Oe,Ge,t,e[13],21,1309151649),t=b(t,ke,Oe,Ge,e[4],6,-145523070),Ge=b(Ge,t,ke,Oe,e[11],10,-1120210379),Oe=b(Oe,Ge,t,ke,e[2],15,718787259),ke=b(ke,Oe,Ge,t,e[9],21,-343485551),r[0]=_(t,r[0]),r[1]=_(ke,r[1]),r[2]=_(Oe,r[2]),r[3]=_(Ge,r[3])}function p(r,e,t,ke,Oe,Ge){return e=_(_(e,r),_(ke,Ge)),_(e<<Oe|e>>>32-Oe,t)}function g(r,e,t,ke,Oe,Ge,Be){return p(e&t|~e&ke,r,e,Oe,Ge,Be)}function m(r,e,t,ke,Oe,Ge,Be){return p(e&ke|t&~ke,r,e,Oe,Ge,Be)}function v(r,e,t,ke,Oe,Ge,Be){return p(e^t^ke,r,e,Oe,Ge,Be)}function b(r,e,t,ke,Oe,Ge,Be){return p(t^(e|~ke),r,e,Oe,Ge,Be)}function y(r){var e,t=r.length,ke=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=r.length;e+=64)d(ke,w(r.substring(e-64,e)));r=r.substring(e-64);var Oe=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<r.length;e++)Oe[e>>2]|=r.charCodeAt(e)<<(e%4<<3);if(Oe[e>>2]|=128<<(e%4<<3),e>55)for(d(ke,Oe),e=0;e<16;e++)Oe[e]=0;return Oe[14]=8*t,d(ke,Oe),ke}function w(r){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=r.charCodeAt(e)+(r.charCodeAt(e+1)<<8)+(r.charCodeAt(e+2)<<16)+(r.charCodeAt(e+3)<<24);return t}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(r){for(var e="",t=0;t<4;t++)e+=N[r>>8*t+4&15]+N[r>>8*t&15];return e}function A(r){return String.fromCharCode((255&r)>>0,(65280&r)>>8,(16711680&r)>>16,(4278190080&r)>>24)}function x(r){return y(r).map(A).join("")}var S=function(r){for(var e=0;e<r.length;e++)r[e]=L(r[e]);return r.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(r,e){if(S){var t=(65535&r)+(65535&e);return(r>>16)+(e>>16)+(t>>16)<<16|65535&t}return r+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(r,e){var t,ke,Oe,Ge;if(r!==t){for(var Be=(Oe=r,Ge=1+(256/r.length>>0),new Array(Ge+1).join(Oe)),je=[],Ve=0;Ve<256;Ve++)je[Ve]=Ve;var Ze=0;for(Ve=0;Ve<256;Ve++){var Qe=je[Ve];Ze=(Ze+Qe+Be.charCodeAt(Ve))%256,je[Ve]=je[Ze],je[Ze]=Qe}t=r,ke=je}else je=ke;var en=e.length,tn=0,an=0,cn="";for(Ve=0;Ve<en;Ve++)an=(an+(Qe=je[tn=(tn+1)%256]))%256,je[tn]=je[an],je[an]=Qe,Be=je[(je[tn]+je[an])%256],cn+=String.fromCharCode(e.charCodeAt(Ve)^Be);return cn}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(r,e,t,ke){this.v=1,this.r=2;var Oe=192;r.forEach(function(je){if(k.perm!==void 0)throw new Error("Invalid permission: "+je);Oe+=k[je]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var Ge=(e+this.padding).substr(0,32),Be=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(Ge,Be),this.P=-(1+(255^Oe)),this.encryptionKey=x(Ge+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(ke)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(r){if(/[^\u0000-\u00ff]/.test(r))throw new Error("Invalid PDF Name Object: "+r+", Only accept ASCII characters.");for(var e="",t=r.length,ke=0;ke<t;ke++){var Oe=r.charCodeAt(ke);Oe<33||Oe===35||Oe===37||Oe===40||Oe===41||Oe===47||Oe===60||Oe===62||Oe===91||Oe===93||Oe===123||Oe===125||Oe>126?e+="#"+("0"+Oe.toString(16)).slice(-2):e+=r[ke]}return e}function C(r){if(_typeof(r)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,ke,Oe){if(Oe=Oe||!1,typeof t!="string"||typeof ke!="function"||typeof Oe!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var Ge=Math.random().toString(35);return e[t][Ge]=[ke,!!Oe],Ge},this.unsubscribe=function(t){for(var ke in e)if(e[ke][t])return delete e[ke][t],Object.keys(e[ke]).length===0&&delete e[ke],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var ke=Array.prototype.slice.call(arguments,1),Oe=[];for(var Ge in e[t]){var Be=e[t][Ge];try{Be[0].apply(r,ke)}catch(je){n.console&&a.error("jsPDF PubSub Error",je.message,je)}Be[1]&&Oe.push(Ge)}Oe.length&&Oe.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(r){if(!(this instanceof j))return new j(r);var e="opacity,stroke-opacity".split(",");for(var t in r)r.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=r[t]);this.id="",this.objectNumber=-1}function O(r,e){this.gState=r,this.matrix=e,this.id="",this.objectNumber=-1}function B(r,e,t,ke,Oe){if(!(this instanceof B))return new B(r,e,t,ke,Oe);this.type=r==="axial"?2:3,this.coords=e,this.colors=t,O.call(this,ke,Oe)}function M(r,e,t,ke,Oe){if(!(this instanceof M))return new M(r,e,t,ke,Oe);this.boundingBox=r,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,O.call(this,ke,Oe)}function E(r){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",ke=arguments[1],Oe=arguments[2],Ge=arguments[3],Be=[],je=1,Ve=16,Ze="S",Qe=null;_typeof(r=r||{})==="object"&&(t=r.orientation,ke=r.unit||ke,Oe=r.format||Oe,Ge=r.compress||r.compressPdf||Ge,(Qe=r.encryption||null)!==null&&(Qe.userPassword=Qe.userPassword||"",Qe.ownerPassword=Qe.ownerPassword||"",Qe.userPermissions=Qe.userPermissions||[]),je=typeof r.userUnit=="number"?Math.abs(r.userUnit):1,r.precision!==void 0&&(e=r.precision),r.floatPrecision!==void 0&&(Ve=r.floatPrecision),Ze=r.defaultPathOperation||"S"),Be=r.filters||(Ge===!0?["FlateEncode"]:Be),ke=ke||"mm",t=(""+(t||"P")).toLowerCase();var en=r.putOnlyUsedFonts||!1,tn={},an={internal:{},__private__:{}};an.__private__.PubSub=C;var cn="1.3",dn=an.__private__.getPdfVersion=function(){return cn};an.__private__.setPdfVersion=function(vn){cn=vn};var hn={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};an.__private__.getPageFormats=function(){return hn};var fn=an.__private__.getPageFormat=function(vn){return hn[vn]};Oe=Oe||"a4";var pn={COMPAT:"compat",ADVANCED:"advanced"},mn=pn.COMPAT;function yn(){this.saveGraphicsState(),Fn(new eo(Pr,0,0,-Pr,0,Fc()*Pr).toString()+" cm"),this.setFontSize(this.getFontSize()/Pr),Ze="n",mn=pn.ADVANCED}function Cn(){this.restoreGraphicsState(),Ze="S",mn=pn.COMPAT}var wn=an.__private__.combineFontStyleAndFontWeight=function(vn,On){if(vn=="bold"&&On=="normal"||vn=="bold"&&On==400||vn=="normal"&&On=="italic"||vn=="bold"&&On=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return On&&(vn=On==400||On==="normal"?vn==="italic"?"italic":"normal":On!=700&&On!=="bold"||vn!=="normal"?(On==700?"bold":On)+""+vn:"bold"),vn};an.advancedAPI=function(vn){var On=mn===pn.COMPAT;return On&&yn.call(this),typeof vn!="function"||(vn(this),On&&Cn.call(this)),this},an.compatAPI=function(vn){var On=mn===pn.ADVANCED;return On&&Cn.call(this),typeof vn!="function"||(vn(this),On&&yn.call(this)),this},an.isAdvancedAPI=function(){return mn===pn.ADVANCED};var bn,Sn=function(vn){if(mn!==pn.ADVANCED)throw new Error(vn+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Mn=an.roundToPrecision=an.__private__.roundToPrecision=function(vn,On){var Ei=e||On;if(isNaN(vn)||isNaN(Ei))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return vn.toFixed(Ei).replace(/0+$/,"")};bn=an.hpf=an.__private__.hpf=typeof Ve=="number"?function(vn){if(isNaN(vn))throw new Error("Invalid argument passed to jsPDF.hpf");return Mn(vn,Ve)}:Ve==="smart"?function(vn){if(isNaN(vn))throw new Error("Invalid argument passed to jsPDF.hpf");return Mn(vn,vn>-1&&vn<1?16:5)}:function(vn){if(isNaN(vn))throw new Error("Invalid argument passed to jsPDF.hpf");return Mn(vn,16)};var Tn=an.f2=an.__private__.f2=function(vn){if(isNaN(vn))throw new Error("Invalid argument passed to jsPDF.f2");return Mn(vn,2)},En=an.__private__.f3=function(vn){if(isNaN(vn))throw new Error("Invalid argument passed to jsPDF.f3");return Mn(vn,3)},An=an.scale=an.__private__.scale=function(vn){if(isNaN(vn))throw new Error("Invalid argument passed to jsPDF.scale");return mn===pn.COMPAT?vn*Pr:mn===pn.ADVANCED?vn:void 0},Ln=function(vn){return mn===pn.COMPAT?Fc()-vn:mn===pn.ADVANCED?vn:void 0},Rn=function(vn){return An(Ln(vn))};an.__private__.setPrecision=an.setPrecision=function(vn){typeof parseInt(vn,10)=="number"&&(e=parseInt(vn,10))};var Gn,Nn="00000000000000000000000000000000",jn=an.__private__.getFileId=function(){return Nn},Dn=an.__private__.setFileId=function(vn){return Nn=vn!==void 0&&/^[a-fA-F0-9]{32}$/.test(vn)?vn.toUpperCase():Nn.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),Qe!==null&&(Ya=new I(Qe.userPermissions,Qe.userPassword,Qe.ownerPassword,Nn)),Nn};an.setFileId=function(vn){return Dn(vn),this},an.getFileId=function(){return jn()};var Ci=an.__private__.convertDateToPDFDate=function(vn){var On=vn.getTimezoneOffset(),Ei=On<0?"+":"-",Ni=Math.floor(Math.abs(On/60)),Yi=Math.abs(On%60),Fr=[Ei,$n(Ni),"'",$n(Yi),"'"].join("");return["D:",vn.getFullYear(),$n(vn.getMonth()+1),$n(vn.getDate()),$n(vn.getHours()),$n(vn.getMinutes()),$n(vn.getSeconds()),Fr].join("")},Jn=an.__private__.convertPDFDateToDate=function(vn){var On=parseInt(vn.substr(2,4),10),Ei=parseInt(vn.substr(6,2),10)-1,Ni=parseInt(vn.substr(8,2),10),Yi=parseInt(vn.substr(10,2),10),Fr=parseInt(vn.substr(12,2),10),xs=parseInt(vn.substr(14,2),10);return new Date(On,Ei,Ni,Yi,Fr,xs,0)},Ki=an.__private__.setCreationDate=function(vn){var On;if(vn===void 0&&(vn=new Date),vn instanceof Date)On=Ci(vn);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(vn))throw new Error("Invalid argument passed to jsPDF.setCreationDate");On=vn}return Gn=On},xn=an.__private__.getCreationDate=function(vn){var On=Gn;return vn==="jsDate"&&(On=Jn(Gn)),On};an.setCreationDate=function(vn){return Ki(vn),this},an.getCreationDate=function(vn){return xn(vn)};var qn,$n=an.__private__.padd2=function(vn){return("0"+parseInt(vn)).slice(-2)},Ai=an.__private__.padd2Hex=function(vn){return("00"+(vn=vn.toString())).substr(vn.length)},Ti=0,Kn=[],Ii=[],Pi=0,Mi=[],tr=[],Br=!1,Un=Ii,Qn=function(){Ti=0,Pi=0,Ii=[],Kn=[],Mi=[],Za=ta(),Pl=ta()};an.__private__.setCustomOutputDestination=function(vn){Br=!0,Un=vn};var Hn=function(vn){Br||(Un=vn)};an.__private__.resetCustomOutputDestination=function(){Br=!1,Un=Ii};var Fn=an.__private__.out=function(vn){return vn=vn.toString(),Pi+=vn.length+1,Un.push(vn),Un},Hi=an.__private__.write=function(vn){return Fn(arguments.length===1?vn.toString():Array.prototype.join.call(arguments," "))},zi=an.__private__.getArrayBuffer=function(vn){for(var On=vn.length,Ei=new ArrayBuffer(On),Ni=new Uint8Array(Ei);On--;)Ni[On]=vn.charCodeAt(On);return Ei},Oi=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];an.__private__.getStandardFonts=function(){return Oi};var Vi=r.fontSize||16;an.__private__.setFontSize=an.setFontSize=function(vn){return Vi=mn===pn.ADVANCED?vn/Pr:vn,this};var Bi,Fi=an.__private__.getFontSize=an.getFontSize=function(){return mn===pn.COMPAT?Vi:Vi*Pr},Si=r.R2L||!1;an.__private__.setR2L=an.setR2L=function(vn){return Si=vn,this},an.__private__.getR2L=an.getR2L=function(){return Si};var Li,Ri=an.__private__.setZoomMode=function(vn){var On=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(vn))Bi=vn;else if(isNaN(vn)){if(On.indexOf(vn)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+vn+'" is not recognized.');Bi=vn}else Bi=parseInt(vn,10)};an.__private__.getZoomMode=function(){return Bi};var $i,er=an.__private__.setPageMode=function(vn){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(vn)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+vn+'" is not recognized.');Li=vn};an.__private__.getPageMode=function(){return Li};var ar=an.__private__.setLayoutMode=function(vn){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(vn)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+vn+'" is not recognized.');$i=vn};an.__private__.getLayoutMode=function(){return $i},an.__private__.setDisplayMode=an.setDisplayMode=function(vn,On,Ei){return Ri(vn),ar(On),er(Ei),this};var Rr={title:"",subject:"",author:"",keywords:"",creator:""};an.__private__.getDocumentProperty=function(vn){if(Object.keys(Rr).indexOf(vn)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Rr[vn]},an.__private__.getDocumentProperties=function(){return Rr},an.__private__.setDocumentProperties=an.setProperties=an.setDocumentProperties=function(vn){for(var On in Rr)Rr.hasOwnProperty(On)&&vn[On]&&(Rr[On]=vn[On]);return this},an.__private__.setDocumentProperty=function(vn,On){if(Object.keys(Rr).indexOf(vn)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Rr[vn]=On};var Gs,Pr,no,Zs,ho,co={},Ws={},oo=[],to={},mo={},ao={},jo={},na=null,yo=0,io=[],so=new C(an),$a=r.hotfixes||[],ko={},Aa={},uo=[],eo=function vn(On,Ei,Ni,Yi,Fr,xs){if(!(this instanceof vn))return new vn(On,Ei,Ni,Yi,Fr,xs);isNaN(On)&&(On=1),isNaN(Ei)&&(Ei=0),isNaN(Ni)&&(Ni=0),isNaN(Yi)&&(Yi=1),isNaN(Fr)&&(Fr=0),isNaN(xs)&&(xs=0),this._matrix=[On,Ei,Ni,Yi,Fr,xs]};Object.defineProperty(eo.prototype,"sx",{get:function(){return this._matrix[0]},set:function(vn){this._matrix[0]=vn}}),Object.defineProperty(eo.prototype,"shy",{get:function(){return this._matrix[1]},set:function(vn){this._matrix[1]=vn}}),Object.defineProperty(eo.prototype,"shx",{get:function(){return this._matrix[2]},set:function(vn){this._matrix[2]=vn}}),Object.defineProperty(eo.prototype,"sy",{get:function(){return this._matrix[3]},set:function(vn){this._matrix[3]=vn}}),Object.defineProperty(eo.prototype,"tx",{get:function(){return this._matrix[4]},set:function(vn){this._matrix[4]=vn}}),Object.defineProperty(eo.prototype,"ty",{get:function(){return this._matrix[5]},set:function(vn){this._matrix[5]=vn}}),Object.defineProperty(eo.prototype,"a",{get:function(){return this._matrix[0]},set:function(vn){this._matrix[0]=vn}}),Object.defineProperty(eo.prototype,"b",{get:function(){return this._matrix[1]},set:function(vn){this._matrix[1]=vn}}),Object.defineProperty(eo.prototype,"c",{get:function(){return this._matrix[2]},set:function(vn){this._matrix[2]=vn}}),Object.defineProperty(eo.prototype,"d",{get:function(){return this._matrix[3]},set:function(vn){this._matrix[3]=vn}}),Object.defineProperty(eo.prototype,"e",{get:function(){return this._matrix[4]},set:function(vn){this._matrix[4]=vn}}),Object.defineProperty(eo.prototype,"f",{get:function(){return this._matrix[5]},set:function(vn){this._matrix[5]=vn}}),Object.defineProperty(eo.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(eo.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(eo.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(eo.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),eo.prototype.join=function(vn){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(bn).join(vn)},eo.prototype.multiply=function(vn){var On=vn.sx*this.sx+vn.shy*this.shx,Ei=vn.sx*this.shy+vn.shy*this.sy,Ni=vn.shx*this.sx+vn.sy*this.shx,Yi=vn.shx*this.shy+vn.sy*this.sy,Fr=vn.tx*this.sx+vn.ty*this.shx+this.tx,xs=vn.tx*this.shy+vn.ty*this.sy+this.ty;return new eo(On,Ei,Ni,Yi,Fr,xs)},eo.prototype.decompose=function(){var vn=this.sx,On=this.shy,Ei=this.shx,Ni=this.sy,Yi=this.tx,Fr=this.ty,xs=Math.sqrt(vn*vn+On*On),Js=(vn/=xs)*Ei+(On/=xs)*Ni;Ei-=vn*Js,Ni-=On*Js;var ro=Math.sqrt(Ei*Ei+Ni*Ni);return Js/=ro,vn*(Ni/=ro)<On*(Ei/=ro)&&(vn=-vn,On=-On,Js=-Js,xs=-xs),{scale:new eo(xs,0,0,ro,0,0),translate:new eo(1,0,0,1,Yi,Fr),rotate:new eo(vn,On,-On,vn,0,0),skew:new eo(1,0,Js,1,0,0)}},eo.prototype.toString=function(vn){return this.join(" ")},eo.prototype.inversed=function(){var vn=this.sx,On=this.shy,Ei=this.shx,Ni=this.sy,Yi=this.tx,Fr=this.ty,xs=1/(vn*Ni-On*Ei),Js=Ni*xs,ro=-On*xs,go=-Ei*xs,po=vn*xs;return new eo(Js,ro,go,po,-Js*Yi-go*Fr,-ro*Yi-po*Fr)},eo.prototype.applyToPoint=function(vn){var On=vn.x*this.sx+vn.y*this.shx+this.tx,Ei=vn.x*this.shy+vn.y*this.sy+this.ty;return new Eu(On,Ei)},eo.prototype.applyToRectangle=function(vn){var On=this.applyToPoint(vn),Ei=this.applyToPoint(new Eu(vn.x+vn.w,vn.y+vn.h));return new Yu(On.x,On.y,Ei.x-On.x,Ei.y-On.y)},eo.prototype.clone=function(){var vn=this.sx,On=this.shy,Ei=this.shx,Ni=this.sy,Yi=this.tx,Fr=this.ty;return new eo(vn,On,Ei,Ni,Yi,Fr)},an.Matrix=eo;var Oa=an.matrixMult=function(vn,On){return On.multiply(vn)},qo=new eo(1,0,0,1,0,0);an.unitMatrix=an.identityMatrix=qo;var Fo=function(vn,On){if(!mo[vn]){var Ei=(On instanceof B?"Sh":"P")+(Object.keys(to).length+1).toString(10);On.id=Ei,mo[vn]=Ei,to[Ei]=On,so.publish("addPattern",On)}};an.ShadingPattern=B,an.TilingPattern=M,an.addShadingPattern=function(vn,On){return Sn("addShadingPattern()"),Fo(vn,On),this},an.beginTilingPattern=function(vn){Sn("beginTilingPattern()"),Gd(vn.boundingBox[0],vn.boundingBox[1],vn.boundingBox[2]-vn.boundingBox[0],vn.boundingBox[3]-vn.boundingBox[1],vn.matrix)},an.endTilingPattern=function(vn,On){Sn("endTilingPattern()"),On.stream=tr[qn].join(`
`),Fo(vn,On),so.publish("endTilingPattern",On),uo.pop().restore()};var Oo=an.__private__.newObject=function(){var vn=ta();return ra(vn,!0),vn},ta=an.__private__.newObjectDeferred=function(){return Ti++,Kn[Ti]=function(){return Pi},Ti},ra=function(vn,On){return On=typeof On=="boolean"&&On,Kn[vn]=Pi,On&&Fn(vn+" 0 obj"),vn},ac=an.__private__.newAdditionalObject=function(){var vn={objId:ta(),content:""};return Mi.push(vn),vn},Za=ta(),Pl=ta(),nc=an.__private__.decodeColorString=function(vn){var On=vn.split(" ");if(On.length!==2||On[1]!=="g"&&On[1]!=="G")On.length===5&&(On[4]==="k"||On[4]==="K")&&(On=[(1-On[0])*(1-On[3]),(1-On[1])*(1-On[3]),(1-On[2])*(1-On[3]),"r"]);else{var Ei=parseFloat(On[0]);On=[Ei,Ei,Ei,"r"]}for(var Ni="#",Yi=0;Yi<3;Yi++)Ni+=("0"+Math.floor(255*parseFloat(On[Yi])).toString(16)).slice(-2);return Ni},Tl=an.__private__.encodeColorString=function(vn){var On;typeof vn=="string"&&(vn={ch1:vn});var Ei=vn.ch1,Ni=vn.ch2,Yi=vn.ch3,Fr=vn.ch4,xs=vn.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ei=="string"&&Ei.charAt(0)!=="#"){var Js=new f(Ei);if(Js.ok)Ei=Js.toHex();else if(!/^\d*\.?\d*$/.test(Ei))throw new Error('Invalid color "'+Ei+'" passed to jsPDF.encodeColorString.')}if(typeof Ei=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ei)&&(Ei="#"+Ei[1]+Ei[1]+Ei[2]+Ei[2]+Ei[3]+Ei[3]),typeof Ei=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ei)){var ro=parseInt(Ei.substr(1),16);Ei=ro>>16&255,Ni=ro>>8&255,Yi=255&ro}if(Ni===void 0||Fr===void 0&&Ei===Ni&&Ni===Yi)if(typeof Ei=="string")On=Ei+" "+xs[0];else switch(vn.precision){case 2:On=Tn(Ei/255)+" "+xs[0];break;case 3:default:On=En(Ei/255)+" "+xs[0]}else if(Fr===void 0||_typeof(Fr)==="object"){if(Fr&&!isNaN(Fr.a)&&Fr.a===0)return On=["1.","1.","1.",xs[1]].join(" ");if(typeof Ei=="string")On=[Ei,Ni,Yi,xs[1]].join(" ");else switch(vn.precision){case 2:On=[Tn(Ei/255),Tn(Ni/255),Tn(Yi/255),xs[1]].join(" ");break;default:case 3:On=[En(Ei/255),En(Ni/255),En(Yi/255),xs[1]].join(" ")}}else if(typeof Ei=="string")On=[Ei,Ni,Yi,Fr,xs[2]].join(" ");else switch(vn.precision){case 2:On=[Tn(Ei),Tn(Ni),Tn(Yi),Tn(Fr),xs[2]].join(" ");break;case 3:default:On=[En(Ei),En(Ni),En(Yi),En(Fr),xs[2]].join(" ")}return On},ja=an.__private__.getFilters=function(){return Be},Va=an.__private__.putStream=function(vn){var On=(vn=vn||{}).data||"",Ei=vn.filters||ja(),Ni=vn.alreadyAppliedFilters||[],Yi=vn.addLength1||!1,Fr=On.length,xs=vn.objectId,Js=function(Xa){return Xa};if(Qe!==null&&xs===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");Qe!==null&&(Js=Ya.encryptor(xs,0));var ro={};Ei===!0&&(Ei=["FlateEncode"]);var go=vn.additionalKeyValues||[],po=(ro=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(On,Ei):{data:On,reverseChain:[]}).reverseChain+(Array.isArray(Ni)?Ni.join(" "):Ni.toString());if(ro.data.length!==0&&(go.push({key:"Length",value:ro.data.length}),Yi===!0&&go.push({key:"Length1",value:Fr})),po.length!=0)if(po.split("/").length-1==1)go.push({key:"Filter",value:po});else{go.push({key:"Filter",value:"["+po+"]"});for(var wo=0;wo<go.length;wo+=1)if(go[wo].key==="DecodeParms"){for(var aa=[],Ea=0;Ea<ro.reverseChain.split("/").length-1;Ea+=1)aa.push("null");aa.push(go[wo].value),go[wo].value="["+aa.join(" ")+"]"}}Fn("<<");for(var Ma=0;Ma<go.length;Ma++)Fn("/"+go[Ma].key+" "+go[Ma].value);Fn(">>"),ro.data.length!==0&&(Fn("stream"),Fn(Js(ro.data)),Fn("endstream"))},Ec=an.__private__.putPage=function(vn){var On=vn.number,Ei=vn.data,Ni=vn.objId,Yi=vn.contentsObjId;ra(Ni,!0),Fn("<</Type /Page"),Fn("/Parent "+vn.rootDictionaryObjId+" 0 R"),Fn("/Resources "+vn.resourceDictionaryObjId+" 0 R"),Fn("/MediaBox ["+parseFloat(bn(vn.mediaBox.bottomLeftX))+" "+parseFloat(bn(vn.mediaBox.bottomLeftY))+" "+bn(vn.mediaBox.topRightX)+" "+bn(vn.mediaBox.topRightY)+"]"),vn.cropBox!==null&&Fn("/CropBox ["+bn(vn.cropBox.bottomLeftX)+" "+bn(vn.cropBox.bottomLeftY)+" "+bn(vn.cropBox.topRightX)+" "+bn(vn.cropBox.topRightY)+"]"),vn.bleedBox!==null&&Fn("/BleedBox ["+bn(vn.bleedBox.bottomLeftX)+" "+bn(vn.bleedBox.bottomLeftY)+" "+bn(vn.bleedBox.topRightX)+" "+bn(vn.bleedBox.topRightY)+"]"),vn.trimBox!==null&&Fn("/TrimBox ["+bn(vn.trimBox.bottomLeftX)+" "+bn(vn.trimBox.bottomLeftY)+" "+bn(vn.trimBox.topRightX)+" "+bn(vn.trimBox.topRightY)+"]"),vn.artBox!==null&&Fn("/ArtBox ["+bn(vn.artBox.bottomLeftX)+" "+bn(vn.artBox.bottomLeftY)+" "+bn(vn.artBox.topRightX)+" "+bn(vn.artBox.topRightY)+"]"),typeof vn.userUnit=="number"&&vn.userUnit!==1&&Fn("/UserUnit "+vn.userUnit),so.publish("putPage",{objId:Ni,pageContext:io[On],pageNumber:On,page:Ei}),Fn("/Contents "+Yi+" 0 R"),Fn(">>"),Fn("endobj");var Fr=Ei.join(`
`);return mn===pn.ADVANCED&&(Fr+=`
Q`),ra(Yi,!0),Va({data:Fr,filters:ja(),objectId:Yi}),Fn("endobj"),Ni},Jc=an.__private__.putPages=function(){var vn,On,Ei=[];for(vn=1;vn<=yo;vn++)io[vn].objId=ta(),io[vn].contentsObjId=ta();for(vn=1;vn<=yo;vn++)Ei.push(Ec({number:vn,data:tr[vn],objId:io[vn].objId,contentsObjId:io[vn].contentsObjId,mediaBox:io[vn].mediaBox,cropBox:io[vn].cropBox,bleedBox:io[vn].bleedBox,trimBox:io[vn].trimBox,artBox:io[vn].artBox,userUnit:io[vn].userUnit,rootDictionaryObjId:Za,resourceDictionaryObjId:Pl}));ra(Za,!0),Fn("<</Type /Pages");var Ni="/Kids [";for(On=0;On<yo;On++)Ni+=Ei[On]+" 0 R ";Fn(Ni+"]"),Fn("/Count "+yo),Fn(">>"),Fn("endobj"),so.publish("postPutPages")},uu=function(vn){so.publish("putFont",{font:vn,out:Fn,newObject:Oo,putStream:Va}),vn.isAlreadyPutted!==!0&&(vn.objectNumber=Oo(),Fn("<<"),Fn("/Type /Font"),Fn("/BaseFont /"+F(vn.postScriptName)),Fn("/Subtype /Type1"),typeof vn.encoding=="string"&&Fn("/Encoding /"+vn.encoding),Fn("/FirstChar 32"),Fn("/LastChar 255"),Fn(">>"),Fn("endobj"))},du=function(){for(var vn in co)co.hasOwnProperty(vn)&&(en===!1||en===!0&&tn.hasOwnProperty(vn))&&uu(co[vn])},hu=function(vn){vn.objectNumber=Oo();var On=[];On.push({key:"Type",value:"/XObject"}),On.push({key:"Subtype",value:"/Form"}),On.push({key:"BBox",value:"["+[bn(vn.x),bn(vn.y),bn(vn.x+vn.width),bn(vn.y+vn.height)].join(" ")+"]"}),On.push({key:"Matrix",value:"["+vn.matrix.toString()+"]"});var Ei=vn.pages[1].join(`
`);Va({data:Ei,additionalKeyValues:On,objectId:vn.objectNumber}),Fn("endobj")},fu=function(){for(var vn in ko)ko.hasOwnProperty(vn)&&hu(ko[vn])},yd=function(vn,On){var Ei,Ni=[],Yi=1/(On-1);for(Ei=0;Ei<1;Ei+=Yi)Ni.push(Ei);if(Ni.push(1),vn[0].offset!=0){var Fr={offset:0,color:vn[0].color};vn.unshift(Fr)}if(vn[vn.length-1].offset!=1){var xs={offset:1,color:vn[vn.length-1].color};vn.push(xs)}for(var Js="",ro=0,go=0;go<Ni.length;go++){for(Ei=Ni[go];Ei>vn[ro+1].offset;)ro++;var po=vn[ro].offset,wo=(Ei-po)/(vn[ro+1].offset-po),aa=vn[ro].color,Ea=vn[ro+1].color;Js+=Ai(Math.round((1-wo)*aa[0]+wo*Ea[0]).toString(16))+Ai(Math.round((1-wo)*aa[1]+wo*Ea[1]).toString(16))+Ai(Math.round((1-wo)*aa[2]+wo*Ea[2]).toString(16))}return Js.trim()},hh=function(vn,On){On||(On=21);var Ei=Oo(),Ni=yd(vn.colors,On),Yi=[];Yi.push({key:"FunctionType",value:"0"}),Yi.push({key:"Domain",value:"[0.0 1.0]"}),Yi.push({key:"Size",value:"["+On+"]"}),Yi.push({key:"BitsPerSample",value:"8"}),Yi.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Yi.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Va({data:Ni,additionalKeyValues:Yi,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ei}),Fn("endobj"),vn.objectNumber=Oo(),Fn("<< /ShadingType "+vn.type),Fn("/ColorSpace /DeviceRGB");var Fr="/Coords ["+bn(parseFloat(vn.coords[0]))+" "+bn(parseFloat(vn.coords[1]))+" ";vn.type===2?Fr+=bn(parseFloat(vn.coords[2]))+" "+bn(parseFloat(vn.coords[3])):Fr+=bn(parseFloat(vn.coords[2]))+" "+bn(parseFloat(vn.coords[3]))+" "+bn(parseFloat(vn.coords[4]))+" "+bn(parseFloat(vn.coords[5])),Fn(Fr+="]"),vn.matrix&&Fn("/Matrix ["+vn.matrix.toString()+"]"),Fn("/Function "+Ei+" 0 R"),Fn("/Extend [true true]"),Fn(">>"),Fn("endobj")},fh=function(vn,On){var Ei=ta(),Ni=Oo();On.push({resourcesOid:Ei,objectOid:Ni}),vn.objectNumber=Ni;var Yi=[];Yi.push({key:"Type",value:"/Pattern"}),Yi.push({key:"PatternType",value:"1"}),Yi.push({key:"PaintType",value:"1"}),Yi.push({key:"TilingType",value:"1"}),Yi.push({key:"BBox",value:"["+vn.boundingBox.map(bn).join(" ")+"]"}),Yi.push({key:"XStep",value:bn(vn.xStep)}),Yi.push({key:"YStep",value:bn(vn.yStep)}),Yi.push({key:"Resources",value:Ei+" 0 R"}),vn.matrix&&Yi.push({key:"Matrix",value:"["+vn.matrix.toString()+"]"}),Va({data:vn.stream,additionalKeyValues:Yi,objectId:vn.objectNumber}),Fn("endobj")},pu=function(vn){var On;for(On in to)to.hasOwnProperty(On)&&(to[On]instanceof B?hh(to[On]):to[On]instanceof M&&fh(to[On],vn))},Ad=function(vn){for(var On in vn.objectNumber=Oo(),Fn("<<"),vn)switch(On){case"opacity":Fn("/ca "+Tn(vn[On]));break;case"stroke-opacity":Fn("/CA "+Tn(vn[On]))}Fn(">>"),Fn("endobj")},ph=function(){var vn;for(vn in ao)ao.hasOwnProperty(vn)&&Ad(ao[vn])},Fu=function(){for(var vn in Fn("/XObject <<"),ko)ko.hasOwnProperty(vn)&&ko[vn].objectNumber>=0&&Fn("/"+vn+" "+ko[vn].objectNumber+" 0 R");so.publish("putXobjectDict"),Fn(">>")},gh=function(){Ya.oid=Oo(),Fn("<<"),Fn("/Filter /Standard"),Fn("/V "+Ya.v),Fn("/R "+Ya.r),Fn("/U <"+Ya.toHexString(Ya.U)+">"),Fn("/O <"+Ya.toHexString(Ya.O)+">"),Fn("/P "+Ya.P),Fn(">>"),Fn("endobj")},_d=function(){for(var vn in Fn("/Font <<"),co)co.hasOwnProperty(vn)&&(en===!1||en===!0&&tn.hasOwnProperty(vn))&&Fn("/"+vn+" "+co[vn].objectNumber+" 0 R");Fn(">>")},mh=function(){if(Object.keys(to).length>0){for(var vn in Fn("/Shading <<"),to)to.hasOwnProperty(vn)&&to[vn]instanceof B&&to[vn].objectNumber>=0&&Fn("/"+vn+" "+to[vn].objectNumber+" 0 R");so.publish("putShadingPatternDict"),Fn(">>")}},gu=function(vn){if(Object.keys(to).length>0){for(var On in Fn("/Pattern <<"),to)to.hasOwnProperty(On)&&to[On]instanceof an.TilingPattern&&to[On].objectNumber>=0&&to[On].objectNumber<vn&&Fn("/"+On+" "+to[On].objectNumber+" 0 R");so.publish("putTilingPatternDict"),Fn(">>")}},vh=function(){if(Object.keys(ao).length>0){var vn;for(vn in Fn("/ExtGState <<"),ao)ao.hasOwnProperty(vn)&&ao[vn].objectNumber>=0&&Fn("/"+vn+" "+ao[vn].objectNumber+" 0 R");so.publish("putGStateDict"),Fn(">>")}},wa=function(vn){ra(vn.resourcesOid,!0),Fn("<<"),Fn("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),_d(),mh(),gu(vn.objectOid),vh(),Fu(),Fn(">>"),Fn("endobj")},Cd=function(){var vn=[];du(),ph(),fu(),pu(vn),so.publish("putResources"),vn.forEach(wa),wa({resourcesOid:Pl,objectOid:Number.MAX_SAFE_INTEGER}),so.publish("postPutResources")},Ed=function(){so.publish("putAdditionalObjects");for(var vn=0;vn<Mi.length;vn++){var On=Mi[vn];ra(On.objId,!0),Fn(On.content),Fn("endobj")}so.publish("postPutAdditionalObjects")},Sd=function(vn){Ws[vn.fontName]=Ws[vn.fontName]||{},Ws[vn.fontName][vn.fontStyle]=vn.id},Bu=function(vn,On,Ei,Ni,Yi){var Fr={id:"F"+(Object.keys(co).length+1).toString(10),postScriptName:vn,fontName:On,fontStyle:Ei,encoding:Ni,isStandardFont:Yi||!1,metadata:{}};return so.publish("addFont",{font:Fr,instance:this}),co[Fr.id]=Fr,Sd(Fr),Fr.id},yh=function(vn){for(var On=0,Ei=Oi.length;On<Ei;On++){var Ni=Bu.call(this,vn[On][0],vn[On][1],vn[On][2],Oi[On][3],!0);en===!1&&(tn[Ni]=!0);var Yi=vn[On][0].split("-");Sd({id:Ni,fontName:Yi[0],fontStyle:Yi[1]||""})}so.publish("addFonts",{fonts:co,dictionary:Ws})},vc=function(vn){return vn.foo=function(){try{return vn.apply(this,arguments)}catch(Ni){var On=Ni.stack||"";~On.indexOf(" at ")&&(On=On.split(" at ")[1]);var Ei="Error in function "+On.split(`
`)[0].split("<")[0]+": "+Ni.message;if(!n.console)throw new Error(Ei);n.console.error(Ei,Ni),n.alert&&alert(Ei)}},vn.foo.bar=vn,vn.foo},mu=function(vn,On){var Ei,Ni,Yi,Fr,xs,Js,ro,go,po;if(Yi=(On=On||{}).sourceEncoding||"Unicode",xs=On.outputEncoding,(On.autoencode||xs)&&co[Gs].metadata&&co[Gs].metadata[Yi]&&co[Gs].metadata[Yi].encoding&&(Fr=co[Gs].metadata[Yi].encoding,!xs&&co[Gs].encoding&&(xs=co[Gs].encoding),!xs&&Fr.codePages&&(xs=Fr.codePages[0]),typeof xs=="string"&&(xs=Fr[xs]),xs)){for(ro=!1,Js=[],Ei=0,Ni=vn.length;Ei<Ni;Ei++)(go=xs[vn.charCodeAt(Ei)])?Js.push(String.fromCharCode(go)):Js.push(vn[Ei]),Js[Ei].charCodeAt(0)>>8&&(ro=!0);vn=Js.join("")}for(Ei=vn.length;ro===void 0&&Ei!==0;)vn.charCodeAt(Ei-1)>>8&&(ro=!0),Ei--;if(!ro)return vn;for(Js=On.noBOM?[]:[254,255],Ei=0,Ni=vn.length;Ei<Ni;Ei++){if((po=(go=vn.charCodeAt(Ei))>>8)>>8)throw new Error("Character at position "+Ei+" of string '"+vn+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Js.push(po),Js.push(go-(po<<8))}return String.fromCharCode.apply(void 0,Js)},Rl=an.__private__.pdfEscape=an.pdfEscape=function(vn,On){return mu(vn,On).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uu=an.__private__.beginPage=function(vn){tr[++yo]=[],io[yo]={objId:0,contentsObjId:0,userUnit:Number(je),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(vn[0]),topRightY:Number(vn[1])}},Id(yo),Hn(tr[qn])},bd=function(vn,On){var Ei,Ni,Yi;switch(t=On||t,typeof vn=="string"&&(Ei=fn(vn.toLowerCase()),Array.isArray(Ei)&&(Ni=Ei[0],Yi=Ei[1])),Array.isArray(vn)&&(Ni=vn[0]*Pr,Yi=vn[1]*Pr),isNaN(Ni)&&(Ni=Oe[0],Yi=Oe[1]),(Ni>14400||Yi>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ni=Math.min(14400,Ni),Yi=Math.min(14400,Yi)),Oe=[Ni,Yi],t.substr(0,1)){case"l":Yi>Ni&&(Oe=[Yi,Ni]);break;case"p":Ni>Yi&&(Oe=[Yi,Ni])}Uu(Oe),Md(Hu),Fn(yc),Wu!==0&&Fn(Wu+" J"),$u!==0&&Fn($u+" j"),so.publish("addPage",{pageNumber:yo})},Ah=function(vn){vn>0&&vn<=yo&&(tr.splice(vn,1),io.splice(vn,1),yo--,qn>yo&&(qn=yo),this.setPage(qn))},Id=function(vn){vn>0&&vn<=yo&&(qn=vn)},_h=an.__private__.getNumberOfPages=an.getNumberOfPages=function(){return tr.length-1},wd=function(vn,On,Ei){var Ni,Yi=void 0;return Ei=Ei||{},vn=vn!==void 0?vn:co[Gs].fontName,On=On!==void 0?On:co[Gs].fontStyle,Ni=vn.toLowerCase(),Ws[Ni]!==void 0&&Ws[Ni][On]!==void 0?Yi=Ws[Ni][On]:Ws[vn]!==void 0&&Ws[vn][On]!==void 0?Yi=Ws[vn][On]:Ei.disableWarning===!1&&a.warn("Unable to look up font label for font '"+vn+"', '"+On+"'. Refer to getFontList() for available fonts."),Yi||Ei.noFallback||(Yi=Ws.times[On])==null&&(Yi=Ws.times.normal),Yi},Ch=an.__private__.putInfo=function(){var vn=Oo(),On=function(Ni){return Ni};for(var Ei in Qe!==null&&(On=Ya.encryptor(vn,0)),Fn("<<"),Fn("/Producer ("+Rl(On("jsPDF "+E.version))+")"),Rr)Rr.hasOwnProperty(Ei)&&Rr[Ei]&&Fn("/"+Ei.substr(0,1).toUpperCase()+Ei.substr(1)+" ("+Rl(On(Rr[Ei]))+")");Fn("/CreationDate ("+Rl(On(Gn))+")"),Fn(">>"),Fn("endobj")},ju=an.__private__.putCatalog=function(vn){var On=(vn=vn||{}).rootDictionaryObjId||Za;switch(Oo(),Fn("<<"),Fn("/Type /Catalog"),Fn("/Pages "+On+" 0 R"),Bi||(Bi="fullwidth"),Bi){case"fullwidth":Fn("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Fn("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Fn("/OpenAction [3 0 R /Fit]");break;case"original":Fn("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ei=""+Bi;Ei.substr(Ei.length-1)==="%"&&(Bi=parseInt(Bi)/100),typeof Bi=="number"&&Fn("/OpenAction [3 0 R /XYZ null null "+Tn(Bi)+"]")}switch($i||($i="continuous"),$i){case"continuous":Fn("/PageLayout /OneColumn");break;case"single":Fn("/PageLayout /SinglePage");break;case"two":case"twoleft":Fn("/PageLayout /TwoColumnLeft");break;case"tworight":Fn("/PageLayout /TwoColumnRight")}Li&&Fn("/PageMode /"+Li),so.publish("putCatalog"),Fn(">>"),Fn("endobj")},Eh=an.__private__.putTrailer=function(){Fn("trailer"),Fn("<<"),Fn("/Size "+(Ti+1)),Fn("/Root "+Ti+" 0 R"),Fn("/Info "+(Ti-1)+" 0 R"),Qe!==null&&Fn("/Encrypt "+Ya.oid+" 0 R"),Fn("/ID [ <"+Nn+"> <"+Nn+"> ]"),Fn(">>")},Sh=an.__private__.putHeader=function(){Fn("%PDF-"+cn),Fn("%ºß¬à")},bh=an.__private__.putXRef=function(){var vn="0000000000";Fn("xref"),Fn("0 "+(Ti+1)),Fn("0000000000 65535 f ");for(var On=1;On<=Ti;On++)typeof Kn[On]=="function"?Fn((vn+Kn[On]()).slice(-10)+" 00000 n "):Kn[On]!==void 0?Fn((vn+Kn[On]).slice(-10)+" 00000 n "):Fn("0000000000 00000 n ")},Pc=an.__private__.buildDocument=function(){Qn(),Hn(Ii),so.publish("buildDocument"),Sh(),Jc(),Ed(),Cd(),Qe!==null&&gh(),Ch(),ju();var vn=Pi;return bh(),Eh(),Fn("startxref"),Fn(""+vn),Fn("%%EOF"),Hn(tr[qn]),Ii.join(`
`)},vu=an.__private__.getBlob=function(vn){return new Blob([zi(vn)],{type:"application/pdf"})},yu=an.output=an.__private__.output=vc(function(vn,On){switch(typeof(On=On||{})=="string"?On={filename:On}:On.filename=On.filename||"generated.pdf",vn){case void 0:return Pc();case"save":an.save(On.filename);break;case"arraybuffer":return zi(Pc());case"blob":return vu(Pc());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(vu(Pc()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ei="",Ni=Pc();try{Ei=h(Ni)}catch{Ei=h(unescape(encodeURIComponent(Ni)))}return"data:application/pdf;filename="+On.filename+";base64,"+Ei;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Yi="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Fr=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';On.pdfObjectUrl&&(Yi=On.pdfObjectUrl,Fr="");var xs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Yi+'"'+Fr+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(On)+");<\/script></body></html>",Js=n.open();return Js!==null&&Js.document.write(xs),Js}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var ro='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(On.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+On.filename+'" width="500px" height="400px" /></body></html>',go=n.open();if(go!==null){go.document.write(ro);var po=this;go.document.documentElement.querySelector("#pdfViewer").onload=function(){go.document.title=On.filename,go.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(po.output("bloburl"))}}return go}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var wo='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",On)+'"></iframe></body></html>',aa=n.open();if(aa!==null&&(aa.document.write(wo),aa.document.title=On.filename),aa||typeof safari>"u")return aa;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",On);default:return null}}),Pd=function(vn){return Array.isArray($a)===!0&&$a.indexOf(vn)>-1};switch(ke){case"pt":Pr=1;break;case"mm":Pr=72/25.4;break;case"cm":Pr=72/2.54;break;case"in":Pr=72;break;case"px":Pr=Pd("px_scaling")==1?.75:96/72;break;case"pc":case"em":Pr=12;break;case"ex":Pr=6;break;default:if(typeof ke!="number")throw new Error("Invalid unit: "+ke);Pr=ke}var Ya=null;Ki(),Dn();var Ih=function(vn){return Qe!==null?Ya.encryptor(vn,0):function(On){return On}},xd=an.__private__.getPageInfo=an.getPageInfo=function(vn){if(isNaN(vn)||vn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:io[vn].objId,pageNumber:vn,pageContext:io[vn]}},fo=an.__private__.getPageInfoByObjId=function(vn){if(isNaN(vn)||vn%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var On in io)if(io[On].objId===vn)break;return xd(On)},wh=an.__private__.getCurrentPageInfo=an.getCurrentPageInfo=function(){return{objId:io[qn].objId,pageNumber:qn,pageContext:io[qn]}};an.addPage=function(){return bd.apply(this,arguments),this},an.setPage=function(){return Id.apply(this,arguments),Hn.call(this,tr[qn]),this},an.insertPage=function(vn){return this.addPage(),this.movePage(qn,vn),this},an.movePage=function(vn,On){var Ei,Ni;if(vn>On){Ei=tr[vn],Ni=io[vn];for(var Yi=vn;Yi>On;Yi--)tr[Yi]=tr[Yi-1],io[Yi]=io[Yi-1];tr[On]=Ei,io[On]=Ni,this.setPage(On)}else if(vn<On){Ei=tr[vn],Ni=io[vn];for(var Fr=vn;Fr<On;Fr++)tr[Fr]=tr[Fr+1],io[Fr]=io[Fr+1];tr[On]=Ei,io[On]=Ni,this.setPage(On)}return this},an.deletePage=function(){return Ah.apply(this,arguments),this},an.__private__.text=an.text=function(vn,On,Ei,Ni,Yi){var Fr,xs,Js,ro,go,po,wo,aa,Ea,Ma=(Ni=Ni||{}).scope||this;if(typeof vn=="number"&&typeof On=="number"&&(typeof Ei=="string"||Array.isArray(Ei))){var Xa=Ei;Ei=On,On=vn,vn=Xa}if(arguments[3]instanceof eo?(Sn("The transform parameter of text() with a Matrix value"),Ea=Yi):(Js=arguments[4],ro=arguments[5],_typeof(wo=arguments[3])==="object"&&wo!==null||(typeof Js=="string"&&(ro=Js,Js=null),typeof wo=="string"&&(ro=wo,wo=null),typeof wo=="number"&&(Js=wo,wo=null),Ni={flags:wo,angle:Js,align:ro})),isNaN(On)||isNaN(Ei)||vn==null)throw new Error("Invalid arguments passed to jsPDF.text");if(vn.length===0)return Ma;var Da="",Ac=!1,ic=typeof Ni.lineHeightFactor=="number"?Ni.lineHeightFactor:eu,Ic=Ma.internal.scaleFactor;function Fd(Qo){return Qo=Qo.split("	").join(Array(Ni.TabLen||9).join(" ")),Rl(Qo,wo)}function Ju(Qo){for(var ea,xa=Qo.concat(),ka=[],Rc=xa.length;Rc--;)typeof(ea=xa.shift())=="string"?ka.push(ea):Array.isArray(Qo)&&(ea.length===1||ea[1]===void 0&&ea[2]===void 0)?ka.push(ea[0]):ka.push([ea[0],ea[1],ea[2]]);return ka}function Qu(Qo,ea){var xa;if(typeof Qo=="string")xa=ea(Qo)[0];else if(Array.isArray(Qo)){for(var ka,Rc,cd=Qo.concat(),Nu=[],Wd=cd.length;Wd--;)typeof(ka=cd.shift())=="string"?Nu.push(ea(ka)[0]):Array.isArray(ka)&&typeof ka[0]=="string"&&(Rc=ea(ka[0],ka[1],ka[2]),Nu.push([Rc[0],Rc[1],Rc[2]]));xa=Nu}return xa}var bu=!1,nd=!0;if(typeof vn=="string")bu=!0;else if(Array.isArray(vn)){var id=vn.concat();xs=[];for(var Iu,za=id.length;za--;)(typeof(Iu=id.shift())!="string"||Array.isArray(Iu)&&typeof Iu[0]!="string")&&(nd=!1);bu=nd}if(bu===!1)throw new Error('Type of text must be string or Array. "'+vn+'" is not recognized.');typeof vn=="string"&&(vn=vn.match(/[\r?\n]/)?vn.split(/\r\n|\r|\n/g):[vn]);var wu=Vi/Ma.internal.scaleFactor,Pu=wu*(ic-1);switch(Ni.baseline){case"bottom":Ei-=Pu;break;case"top":Ei+=wu-Pu;break;case"hanging":Ei+=wu-2*Pu;break;case"middle":Ei+=wu/2-Pu}if((po=Ni.maxWidth||0)>0&&(typeof vn=="string"?vn=Ma.splitTextToSize(vn,po):Object.prototype.toString.call(vn)==="[object Array]"&&(vn=vn.reduce(function(Qo,ea){return Qo.concat(Ma.splitTextToSize(ea,po))},[]))),Fr={text:vn,x:On,y:Ei,options:Ni,mutex:{pdfEscape:Rl,activeFontKey:Gs,fonts:co,activeFontSize:Vi}},so.publish("preProcessText",Fr),vn=Fr.text,Js=(Ni=Fr.options).angle,!(Ea instanceof eo)&&Js&&typeof Js=="number"){Js*=Math.PI/180,Ni.rotationDirection===0&&(Js=-Js),mn===pn.ADVANCED&&(Js=-Js);var xu=Math.cos(Js),rd=Math.sin(Js);Ea=new eo(xu,rd,-rd,xu,0,0)}else Js&&Js instanceof eo&&(Ea=Js);mn!==pn.ADVANCED||Ea||(Ea=qo),(go=Ni.charSpace||Cu)!==void 0&&(Da+=bn(An(go))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(aa=Ni.horizontalScale)!==void 0&&(Da+=bn(100*aa)+` Tz
`),Ni.lang;var Bl=-1,Dh=Ni.renderingMode!==void 0?Ni.renderingMode:Ni.stroke,sd=Ma.internal.getCurrentPageInfo().pageContext;switch(Dh){case 0:case!1:case"fill":Bl=0;break;case 1:case!0:case"stroke":Bl=1;break;case 2:case"fillThenStroke":Bl=2;break;case 3:case"invisible":Bl=3;break;case 4:case"fillAndAddForClipping":Bl=4;break;case 5:case"strokeAndAddPathForClipping":Bl=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Bl=6;break;case 7:case"addToPathForClipping":Bl=7}var Ud=sd.usedRenderingMode!==void 0?sd.usedRenderingMode:-1;Bl!==-1?Da+=Bl+` Tr
`:Ud!==-1&&(Da+=`0 Tr
`),Bl!==-1&&(sd.usedRenderingMode=Bl),ro=Ni.align||"left";var cc,Tu=Vi*ic,jd=Ma.internal.pageSize.getWidth(),zd=co[Gs];go=Ni.charSpace||Cu,po=Ni.maxWidth||0,wo=Object.assign({autoencode:!0,noBOM:!0},Ni.flags);var Bc=[],iu=function(Qo){return Ma.getStringUnitWidth(Qo,{font:zd,charSpace:go,fontSize:Vi,doKerning:!1})*Vi/Ic};if(Object.prototype.toString.call(vn)==="[object Array]"){var Vl;xs=Ju(vn),ro!=="left"&&(cc=xs.map(iu));var Ja,Uc=0;if(ro==="right"){On-=cc[0],vn=[],za=xs.length;for(var Tc=0;Tc<za;Tc++)Tc===0?(Ja=bc(On),Vl=xc(Ei)):(Ja=An(Uc-cc[Tc]),Vl=-Tu),vn.push([xs[Tc],Ja,Vl]),Uc=cc[Tc]}else if(ro==="center"){On-=cc[0]/2,vn=[],za=xs.length;for(var Lc=0;Lc<za;Lc++)Lc===0?(Ja=bc(On),Vl=xc(Ei)):(Ja=An((Uc-cc[Lc])/2),Vl=-Tu),vn.push([xs[Lc],Ja,Vl]),Uc=cc[Lc]}else if(ro==="left"){vn=[],za=xs.length;for(var Lu=0;Lu<za;Lu++)vn.push(xs[Lu])}else if(ro==="justify"&&zd.encoding==="Identity-H"){vn=[],za=xs.length,po=po!==0?po:jd;for(var Mc=0,Pa=0;Pa<za;Pa++)if(Vl=Pa===0?xc(Ei):-Tu,Ja=Pa===0?bc(On):Mc,Pa<za-1){var od=An((po-cc[Pa])/(xs[Pa].split(" ").length-1)),Al=xs[Pa].split(" ");vn.push([Al[0]+" ",Ja,Vl]),Mc=0;for(var uc=1;uc<Al.length;uc++){var Mu=(iu(Al[uc-1]+" "+Al[uc])-iu(Al[uc]))*Ic+od;uc==Al.length-1?vn.push([Al[uc],Mu,0]):vn.push([Al[uc]+" ",Mu,0]),Mc-=Mu}}else vn.push([xs[Pa],Ja,Vl]);vn.push(["",Mc,0])}else{if(ro!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(vn=[],za=xs.length,po=po!==0?po:jd,Pa=0;Pa<za;Pa++)Vl=Pa===0?xc(Ei):-Tu,Ja=Pa===0?bc(On):0,Pa<za-1?Bc.push(bn(An((po-cc[Pa])/(xs[Pa].split(" ").length-1)))):Bc.push(0),vn.push([xs[Pa],Ja,Vl])}}var qd=typeof Ni.R2L=="boolean"?Ni.R2L:Si;qd===!0&&(vn=Qu(vn,function(Qo,ea,xa){return[Qo.split("").reverse().join(""),ea,xa]})),Fr={text:vn,x:On,y:Ei,options:Ni,mutex:{pdfEscape:Rl,activeFontKey:Gs,fonts:co,activeFontSize:Vi}},so.publish("postProcessText",Fr),vn=Fr.text,Ac=Fr.mutex.isHex||!1;var ad=co[Gs].encoding;ad!=="WinAnsiEncoding"&&ad!=="StandardEncoding"||(vn=Qu(vn,function(Qo,ea,xa){return[Fd(Qo),ea,xa]})),xs=Ju(vn),vn=[];for(var ru,su,jc,ou=0,Ru=1,au=Array.isArray(xs[0])?Ru:ou,Vc="",ld=function(Qo,ea,xa){var ka="";return xa instanceof eo?(xa=typeof Ni.angle=="number"?Oa(xa,new eo(1,0,0,1,Qo,ea)):Oa(new eo(1,0,0,1,Qo,ea),xa),mn===pn.ADVANCED&&(xa=Oa(new eo(1,0,0,-1,0,0),xa)),ka=xa.join(" ")+` Tm
`):ka=bn(Qo)+" "+bn(ea)+` Td
`,ka},dc=0;dc<xs.length;dc++){switch(Vc="",au){case Ru:jc=(Ac?"<":"(")+xs[dc][0]+(Ac?">":")"),ru=parseFloat(xs[dc][1]),su=parseFloat(xs[dc][2]);break;case ou:jc=(Ac?"<":"(")+xs[dc]+(Ac?">":")"),ru=bc(On),su=xc(Ei)}Bc!==void 0&&Bc[dc]!==void 0&&(Vc=Bc[dc]+` Tw
`),dc===0?vn.push(Vc+ld(ru,su,Ea)+jc):au===ou?vn.push(Vc+jc):au===Ru&&vn.push(Vc+ld(ru,su,Ea)+jc)}vn=au===ou?vn.join(` Tj
T* `):vn.join(` Tj
`),vn+=` Tj
`;var hc=`BT
/`;return hc+=Gs+" "+Vi+` Tf
`,hc+=bn(Vi*ic)+` TL
`,hc+=tu+`
`,hc+=Da,hc+=vn,Fn(hc+="ET"),tn[Gs]=!0,Ma};var Ph=an.__private__.clip=an.clip=function(vn){return Fn(vn==="evenodd"?"W*":"W"),this};an.clipEvenOdd=function(){return Ph("evenodd")},an.__private__.discardPath=an.discardPath=function(){return Fn("n"),this};var Sc=an.__private__.isValidStyle=function(vn){var On=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(vn)!==-1&&(On=!0),On};an.__private__.setDefaultPathOperation=an.setDefaultPathOperation=function(vn){return Sc(vn)&&(Ze=vn),this};var Td=an.__private__.getStyle=an.getStyle=function(vn){var On=Ze;switch(vn){case"D":case"S":On="S";break;case"F":On="f";break;case"FD":case"DF":On="B";break;case"f":case"f*":case"B":case"B*":On=vn}return On},Ld=an.close=function(){return Fn("h"),this};an.stroke=function(){return Fn("S"),this},an.fill=function(vn){return Au("f",vn),this},an.fillEvenOdd=function(vn){return Au("f*",vn),this},an.fillStroke=function(vn){return Au("B",vn),this},an.fillStrokeEvenOdd=function(vn){return Au("B*",vn),this};var Au=function(vn,On){_typeof(On)==="object"?Th(On,vn):Fn(vn)},Vu=function(vn){vn===null||mn===pn.ADVANCED&&vn===void 0||(vn=Td(vn),Fn(vn))};function xh(vn,On,Ei,Ni,Yi){var Fr=new M(On||this.boundingBox,Ei||this.xStep,Ni||this.yStep,this.gState,Yi||this.matrix);Fr.stream=this.stream;var xs=vn+"$$"+this.cloneIndex+++"$$";return Fo(xs,Fr),Fr}var Th=function(vn,On){var Ei=mo[vn.key],Ni=to[Ei];if(Ni instanceof B)Fn("q"),Fn(Lh(On)),Ni.gState&&an.setGState(Ni.gState),Fn(vn.matrix.toString()+" cm"),Fn("/"+Ei+" sh"),Fn("Q");else if(Ni instanceof M){var Yi=new eo(1,0,0,-1,0,Fc());vn.matrix&&(Yi=Yi.multiply(vn.matrix||qo),Ei=xh.call(Ni,vn.key,vn.boundingBox,vn.xStep,vn.yStep,Yi).id),Fn("q"),Fn("/Pattern cs"),Fn("/"+Ei+" scn"),Ni.gState&&an.setGState(Ni.gState),Fn(On),Fn("Q")}},Lh=function(vn){switch(vn){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},zu=an.moveTo=function(vn,On){return Fn(bn(An(vn))+" "+bn(Rn(On))+" m"),this},Qc=an.lineTo=function(vn,On){return Fn(bn(An(vn))+" "+bn(Rn(On))+" l"),this},Dc=an.curveTo=function(vn,On,Ei,Ni,Yi,Fr){return Fn([bn(An(vn)),bn(Rn(On)),bn(An(Ei)),bn(Rn(Ni)),bn(An(Yi)),bn(Rn(Fr)),"c"].join(" ")),this};an.__private__.line=an.line=function(vn,On,Ei,Ni,Yi){if(isNaN(vn)||isNaN(On)||isNaN(Ei)||isNaN(Ni)||!Sc(Yi))throw new Error("Invalid arguments passed to jsPDF.line");return mn===pn.COMPAT?this.lines([[Ei-vn,Ni-On]],vn,On,[1,1],Yi||"S"):this.lines([[Ei-vn,Ni-On]],vn,On,[1,1]).stroke()},an.__private__.lines=an.lines=function(vn,On,Ei,Ni,Yi,Fr){var xs,Js,ro,go,po,wo,aa,Ea,Ma,Xa,Da,Ac;if(typeof vn=="number"&&(Ac=Ei,Ei=On,On=vn,vn=Ac),Ni=Ni||[1,1],Fr=Fr||!1,isNaN(On)||isNaN(Ei)||!Array.isArray(vn)||!Array.isArray(Ni)||!Sc(Yi)||typeof Fr!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(zu(On,Ei),xs=Ni[0],Js=Ni[1],go=vn.length,Xa=On,Da=Ei,ro=0;ro<go;ro++)(po=vn[ro]).length===2?(Xa=po[0]*xs+Xa,Da=po[1]*Js+Da,Qc(Xa,Da)):(wo=po[0]*xs+Xa,aa=po[1]*Js+Da,Ea=po[2]*xs+Xa,Ma=po[3]*Js+Da,Xa=po[4]*xs+Xa,Da=po[5]*Js+Da,Dc(wo,aa,Ea,Ma,Xa,Da));return Fr&&Ld(),Vu(Yi),this},an.path=function(vn){for(var On=0;On<vn.length;On++){var Ei=vn[On],Ni=Ei.c;switch(Ei.op){case"m":zu(Ni[0],Ni[1]);break;case"l":Qc(Ni[0],Ni[1]);break;case"c":Dc.apply(this,Ni);break;case"h":Ld()}}return this},an.__private__.rect=an.rect=function(vn,On,Ei,Ni,Yi){if(isNaN(vn)||isNaN(On)||isNaN(Ei)||isNaN(Ni)||!Sc(Yi))throw new Error("Invalid arguments passed to jsPDF.rect");return mn===pn.COMPAT&&(Ni=-Ni),Fn([bn(An(vn)),bn(Rn(On)),bn(An(Ei)),bn(An(Ni)),"re"].join(" ")),Vu(Yi),this},an.__private__.triangle=an.triangle=function(vn,On,Ei,Ni,Yi,Fr,xs){if(isNaN(vn)||isNaN(On)||isNaN(Ei)||isNaN(Ni)||isNaN(Yi)||isNaN(Fr)||!Sc(xs))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ei-vn,Ni-On],[Yi-Ei,Fr-Ni],[vn-Yi,On-Fr]],vn,On,[1,1],xs,!0),this},an.__private__.roundedRect=an.roundedRect=function(vn,On,Ei,Ni,Yi,Fr,xs){if(isNaN(vn)||isNaN(On)||isNaN(Ei)||isNaN(Ni)||isNaN(Yi)||isNaN(Fr)||!Sc(xs))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Js=4/3*(Math.SQRT2-1);return Yi=Math.min(Yi,.5*Ei),Fr=Math.min(Fr,.5*Ni),this.lines([[Ei-2*Yi,0],[Yi*Js,0,Yi,Fr-Fr*Js,Yi,Fr],[0,Ni-2*Fr],[0,Fr*Js,-Yi*Js,Fr,-Yi,Fr],[2*Yi-Ei,0],[-Yi*Js,0,-Yi,-Fr*Js,-Yi,-Fr],[0,2*Fr-Ni],[0,-Fr*Js,Yi*Js,-Fr,Yi,-Fr]],vn+Yi,On,[1,1],xs,!0),this},an.__private__.ellipse=an.ellipse=function(vn,On,Ei,Ni,Yi){if(isNaN(vn)||isNaN(On)||isNaN(Ei)||isNaN(Ni)||!Sc(Yi))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Fr=4/3*(Math.SQRT2-1)*Ei,xs=4/3*(Math.SQRT2-1)*Ni;return zu(vn+Ei,On),Dc(vn+Ei,On-xs,vn+Fr,On-Ni,vn,On-Ni),Dc(vn-Fr,On-Ni,vn-Ei,On-xs,vn-Ei,On),Dc(vn-Ei,On+xs,vn-Fr,On+Ni,vn,On+Ni),Dc(vn+Fr,On+Ni,vn+Ei,On+xs,vn+Ei,On),Vu(Yi),this},an.__private__.circle=an.circle=function(vn,On,Ei,Ni){if(isNaN(vn)||isNaN(On)||isNaN(Ei)||!Sc(Ni))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(vn,On,Ei,Ei,Ni)},an.setFont=function(vn,On,Ei){return Ei&&(On=wn(On,Ei)),Gs=wd(vn,On,{disableWarning:!1}),this};var Mh=an.__private__.getFont=an.getFont=function(){return co[wd.apply(an,arguments)]};an.__private__.getFontList=an.getFontList=function(){var vn,On,Ei={};for(vn in Ws)if(Ws.hasOwnProperty(vn))for(On in Ei[vn]=[],Ws[vn])Ws[vn].hasOwnProperty(On)&&Ei[vn].push(On);return Ei},an.addFont=function(vn,On,Ei,Ni,Yi){var Fr=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Fr.indexOf(arguments[3])!==-1?Yi=arguments[3]:arguments[3]&&Fr.indexOf(arguments[3])==-1&&(Ei=wn(Ei,Ni)),Yi=Yi||"Identity-H",Bu.call(this,vn,On,Ei,Yi)};var eu,Hu=r.lineWidth||.200025,_u=an.__private__.getLineWidth=an.getLineWidth=function(){return Hu},Md=an.__private__.setLineWidth=an.setLineWidth=function(vn){return Hu=vn,Fn(bn(An(vn))+" w"),this};an.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(vn,On){if(vn=vn||[],On=On||0,isNaN(On)||!Array.isArray(vn))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return vn=vn.map(function(Ei){return bn(An(Ei))}).join(" "),On=bn(An(On)),Fn("["+vn+"] "+On+" d"),this};var Nd=an.__private__.getLineHeight=an.getLineHeight=function(){return Vi*eu};an.__private__.getLineHeight=an.getLineHeight=function(){return Vi*eu};var kd=an.__private__.setLineHeightFactor=an.setLineHeightFactor=function(vn){return typeof(vn=vn||1.15)=="number"&&(eu=vn),this},Od=an.__private__.getLineHeightFactor=an.getLineHeightFactor=function(){return eu};kd(r.lineHeight);var bc=an.__private__.getHorizontalCoordinate=function(vn){return An(vn)},xc=an.__private__.getVerticalCoordinate=function(vn){return mn===pn.ADVANCED?vn:io[qn].mediaBox.topRightY-io[qn].mediaBox.bottomLeftY-An(vn)},Rh=an.__private__.getHorizontalCoordinateString=an.getHorizontalCoordinateString=function(vn){return bn(bc(vn))},Gc=an.__private__.getVerticalCoordinateString=an.getVerticalCoordinateString=function(vn){return bn(xc(vn))},yc=r.strokeColor||"0 G";an.__private__.getStrokeColor=an.getDrawColor=function(){return nc(yc)},an.__private__.setStrokeColor=an.setDrawColor=function(vn,On,Ei,Ni){return yc=Tl({ch1:vn,ch2:On,ch3:Ei,ch4:Ni,pdfColorType:"draw",precision:2}),Fn(yc),this};var qu=r.fillColor||"0 g";an.__private__.getFillColor=an.getFillColor=function(){return nc(qu)},an.__private__.setFillColor=an.setFillColor=function(vn,On,Ei,Ni){return qu=Tl({ch1:vn,ch2:On,ch3:Ei,ch4:Ni,pdfColorType:"fill",precision:2}),Fn(qu),this};var tu=r.textColor||"0 g",Nh=an.__private__.getTextColor=an.getTextColor=function(){return nc(tu)};an.__private__.setTextColor=an.setTextColor=function(vn,On,Ei,Ni){return tu=Tl({ch1:vn,ch2:On,ch3:Ei,ch4:Ni,pdfColorType:"text",precision:3}),this};var Cu=r.charSpace,kh=an.__private__.getCharSpace=an.getCharSpace=function(){return parseFloat(Cu||0)};an.__private__.setCharSpace=an.setCharSpace=function(vn){if(isNaN(vn))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cu=vn,this};var Wu=0;an.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},an.__private__.setLineCap=an.setLineCap=function(vn){var On=an.CapJoinStyles[vn];if(On===void 0)throw new Error("Line cap style of '"+vn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Wu=On,Fn(On+" J"),this};var $u=0;an.__private__.setLineJoin=an.setLineJoin=function(vn){var On=an.CapJoinStyles[vn];if(On===void 0)throw new Error("Line join style of '"+vn+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return $u=On,Fn(On+" j"),this},an.__private__.setLineMiterLimit=an.__private__.setMiterLimit=an.setLineMiterLimit=an.setMiterLimit=function(vn){if(vn=vn||0,isNaN(vn))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Fn(bn(An(vn))+" M"),this},an.GState=j,an.setGState=function(vn){(vn=typeof vn=="string"?ao[jo[vn]]:Dd(null,vn)).equals(na)||(Fn("/"+vn.id+" gs"),na=vn)};var Dd=function(vn,On){if(!vn||!jo[vn]){var Ei=!1;for(var Ni in ao)if(ao.hasOwnProperty(Ni)&&ao[Ni].equals(On)){Ei=!0;break}if(Ei)On=ao[Ni];else{var Yi="GS"+(Object.keys(ao).length+1).toString(10);ao[Yi]=On,On.id=Yi}return vn&&(jo[vn]=On.id),so.publish("addGState",On),On}};an.addGState=function(vn,On){return Dd(vn,On),this},an.saveGraphicsState=function(){return Fn("q"),oo.push({key:Gs,size:Vi,color:tu}),this},an.restoreGraphicsState=function(){Fn("Q");var vn=oo.pop();return Gs=vn.key,Vi=vn.size,tu=vn.color,na=null,this},an.setCurrentTransformationMatrix=function(vn){return Fn(vn.toString()+" cm"),this},an.comment=function(vn){return Fn("#"+vn),this};var Eu=function(vn,On){var Ei=vn||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ei},set:function(Fr){isNaN(Fr)||(Ei=parseFloat(Fr))}});var Ni=On||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ni},set:function(Fr){isNaN(Fr)||(Ni=parseFloat(Fr))}});var Yi="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Yi},set:function(Fr){Yi=Fr.toString()}}),this},Yu=function(vn,On,Ei,Ni){Eu.call(this,vn,On),this.type="rect";var Yi=Ei||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Yi},set:function(xs){isNaN(xs)||(Yi=parseFloat(xs))}});var Fr=Ni||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Fr},set:function(xs){isNaN(xs)||(Fr=parseFloat(xs))}}),this},Ku=function(){this.page=yo,this.currentPage=qn,this.pages=tr.slice(0),this.pagesContext=io.slice(0),this.x=no,this.y=Zs,this.matrix=ho,this.width=nu(qn),this.height=Fc(qn),this.outputDestination=Un,this.id="",this.objectNumber=-1};Ku.prototype.restore=function(){yo=this.page,qn=this.currentPage,io=this.pagesContext,tr=this.pages,no=this.x,Zs=this.y,ho=this.matrix,Xu(qn,this.width),Zu(qn,this.height),Un=this.outputDestination};var Gd=function(vn,On,Ei,Ni,Yi){uo.push(new Ku),yo=qn=0,tr=[],no=vn,Zs=On,ho=Yi,Uu([Ei,Ni])},Oh=function(vn){if(Aa[vn])uo.pop().restore();else{var On=new Ku,Ei="Xo"+(Object.keys(ko).length+1).toString(10);On.id=Ei,Aa[vn]=Ei,ko[Ei]=On,so.publish("addFormObject",On),uo.pop().restore()}};for(var Su in an.beginFormObject=function(vn,On,Ei,Ni,Yi){return Gd(vn,On,Ei,Ni,Yi),this},an.endFormObject=function(vn){return Oh(vn),this},an.doFormObject=function(vn,On){var Ei=ko[Aa[vn]];return Fn("q"),Fn(On.toString()+" cm"),Fn("/"+Ei.id+" Do"),Fn("Q"),this},an.getFormObject=function(vn){var On=ko[Aa[vn]];return{x:On.x,y:On.y,width:On.width,height:On.height,matrix:On.matrix}},an.save=function(vn,On){return vn=vn||"generated.pdf",(On=On||{}).returnPromise=On.returnPromise||!1,On.returnPromise===!1?(l(vu(Pc()),vn),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Ei,Ni){try{var Yi=l(vu(Pc()),vn);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Ei(Yi)}catch(Fr){Ni(Fr.message)}})},E.API)E.API.hasOwnProperty(Su)&&(Su==="events"&&E.API.events.length?function(vn,On){var Ei,Ni,Yi;for(Yi=On.length-1;Yi!==-1;Yi--)Ei=On[Yi][0],Ni=On[Yi][1],vn.subscribe.apply(vn,[Ei].concat(typeof Ni=="function"?[Ni]:Ni))}(so,E.API.events):an[Su]=E.API[Su]);var nu=an.getPageWidth=function(vn){return(io[vn=vn||qn].mediaBox.topRightX-io[vn].mediaBox.bottomLeftX)/Pr},Xu=an.setPageWidth=function(vn,On){io[vn].mediaBox.topRightX=On*Pr+io[vn].mediaBox.bottomLeftX},Fc=an.getPageHeight=function(vn){return(io[vn=vn||qn].mediaBox.topRightY-io[vn].mediaBox.bottomLeftY)/Pr},Zu=an.setPageHeight=function(vn,On){io[vn].mediaBox.topRightY=On*Pr+io[vn].mediaBox.bottomLeftY};return an.internal={pdfEscape:Rl,getStyle:Td,getFont:Mh,getFontSize:Fi,getCharSpace:kh,getTextColor:Nh,getLineHeight:Nd,getLineHeightFactor:Od,getLineWidth:_u,write:Hi,getHorizontalCoordinate:bc,getVerticalCoordinate:xc,getCoordinateString:Rh,getVerticalCoordinateString:Gc,collections:{},newObject:Oo,newAdditionalObject:ac,newObjectDeferred:ta,newObjectDeferredBegin:ra,getFilters:ja,putStream:Va,events:so,scaleFactor:Pr,pageSize:{getWidth:function(){return nu(qn)},setWidth:function(vn){Xu(qn,vn)},getHeight:function(){return Fc(qn)},setHeight:function(vn){Zu(qn,vn)}},encryptionOptions:Qe,encryption:Ya,getEncryptor:Ih,output:yu,getNumberOfPages:_h,pages:tr,out:Fn,f2:Tn,f3:En,getPageInfo:xd,getPageInfoByObjId:fo,getCurrentPageInfo:wh,getPDFVersion:dn,Point:Eu,Rectangle:Yu,Matrix:eo,hasHotfix:Pd},Object.defineProperty(an.internal.pageSize,"width",{get:function(){return nu(qn)},set:function(vn){Xu(qn,vn)},enumerable:!0,configurable:!0}),Object.defineProperty(an.internal.pageSize,"height",{get:function(){return Fc(qn)},set:function(vn){Zu(qn,vn)},enumerable:!0,configurable:!0}),yh.call(an,Oi),Gs="F1",bd(Oe,t),so.publish("initialized"),an}I.prototype.lsbFirstWord=function(r){return String.fromCharCode(r>>0&255,r>>8&255,r>>16&255,r>>24&255)},I.prototype.toHexString=function(r){return r.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(r){for(var e=[],t=0;t<r.length;t+=2)e.push(String.fromCharCode(parseInt(r.substr(t,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(r,e){return P(x(e).substr(0,5),r)},I.prototype.encryptor=function(r,e){var t=x(this.encryptionKey+String.fromCharCode(255&r,r>>8&255,r>>16&255,255&e,e>>8&255)).substr(0,10);return function(ke){return P(t,ke)}},j.prototype.equals=function(r){var e,t="id,objectNumber,equals";if(!r||_typeof(r)!==_typeof(this))return!1;var ke=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!r.hasOwnProperty(e)||this[e]!==r[e])return!1;ke++}for(e in r)r.hasOwnProperty(e)&&t.indexOf(e)<0&&ke--;return ke===0},E.API={events:[]},E.version="2.5.2";var q=E.API,D=1,R=function(r){return r.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(r){return r.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(r){return r.toFixed(2)},z=function(r){return r.toFixed(5)};q.__acroform__={};var H=function(r,e){r.prototype=Object.create(e.prototype),r.prototype.constructor=r},W=function(r){return r*D},V=function(r){var e=new ut,t=At.internal.getHeight(r)||0,ke=At.internal.getWidth(r)||0;return e.BBox=[0,0,Number(U(ke)),Number(U(t))],e},G=q.__acroform__.setBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return r|=1<<e},Y=q.__acroform__.clearBit=function(r,e){if(r=r||0,e=e||0,isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return r&=~(1<<e)},J=q.__acroform__.getBit=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return r&1<<e?1:0},X=q.__acroform__.getBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(r,e-1)},K=q.__acroform__.setBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(r,e-1)},Z=q.__acroform__.clearBitForPdf=function(r,e){if(isNaN(r)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(r,e-1)},$=q.__acroform__.calculateCoordinates=function(r,e){var t=e.internal.getHorizontalCoordinate,ke=e.internal.getVerticalCoordinate,Oe=r[0],Ge=r[1],Be=r[2],je=r[3],Ve={};return Ve.lowerLeft_X=t(Oe)||0,Ve.lowerLeft_Y=ke(Ge+je)||0,Ve.upperRight_X=t(Oe+Be)||0,Ve.upperRight_Y=ke(Ge)||0,[Number(U(Ve.lowerLeft_X)),Number(U(Ve.lowerLeft_Y)),Number(U(Ve.upperRight_X)),Number(U(Ve.upperRight_Y))]},Q=function(r){if(r.appearanceStreamContent)return r.appearanceStreamContent;if(r.V||r.DV){var e=[],t=r._V||r.DV,ke=tt(r,t),Oe=r.scope.internal.getFont(r.fontName,r.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(r.scope.__private__.encodeColorString(r.color)),e.push("/"+Oe+" "+U(ke.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(ke.text),e.push("ET"),e.push("Q"),e.push("EMC");var Ge=V(r);return Ge.scope=r.scope,Ge.stream=e.join(`
`),Ge}},tt=function(r,e){var t=r.fontSize===0?r.maxFontSize:r.fontSize,ke={text:"",fontSize:""},Oe=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");Oe=r.multiline?Oe.map(function(En){return En.split(`
`)}):Oe.map(function(En){return[En]});var Ge=t,Be=At.internal.getHeight(r)||0;Be=Be<0?-Be:Be;var je=At.internal.getWidth(r)||0;je=je<0?-je:je;var Ve=function(En,An,Ln){if(En+1<Oe.length){var Rn=An+" "+Oe[En+1][0];return et(Rn,r,Ln).width<=je-4}return!1};Ge++;e:for(;Ge>0;){e="",Ge--;var Ze,Qe,en=et("3",r,Ge).height,tn=r.multiline?Be-Ge:(Be-en)/2,an=tn+=2,cn=0,dn=0,hn=0;if(Ge<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,r,Ge=12).width+", FieldWidth:"+je+`
`;break}for(var fn="",pn=0,mn=0;mn<Oe.length;mn++)if(Oe.hasOwnProperty(mn)){var yn=!1;if(Oe[mn].length!==1&&hn!==Oe[mn].length-1){if((en+2)*(pn+2)+2>Be)continue e;fn+=Oe[mn][hn],yn=!0,dn=mn,mn--}else{fn=(fn+=Oe[mn][hn]+" ").substr(fn.length-1)==" "?fn.substr(0,fn.length-1):fn;var Cn=parseInt(mn),wn=Ve(Cn,fn,Ge),bn=mn>=Oe.length-1;if(wn&&!bn){fn+=" ",hn=0;continue}if(wn||bn){if(bn)dn=Cn;else if(r.multiline&&(en+2)*(pn+2)+2>Be)continue e}else{if(!r.multiline||(en+2)*(pn+2)+2>Be)continue e;dn=Cn}}for(var Sn="",Mn=cn;Mn<=dn;Mn++){var Tn=Oe[Mn];if(r.multiline){if(Mn===dn){Sn+=Tn[hn]+" ",hn=(hn+1)%Tn.length;continue}if(Mn===cn){Sn+=Tn[Tn.length-1]+" ";continue}}Sn+=Tn[0]+" "}switch(Sn=Sn.substr(Sn.length-1)==" "?Sn.substr(0,Sn.length-1):Sn,Qe=et(Sn,r,Ge).width,r.textAlign){case"right":Ze=je-Qe-2;break;case"center":Ze=(je-Qe)/2;break;case"left":default:Ze=2}e+=U(Ze)+" "+U(an)+` Td
`,e+="("+R(Sn)+`) Tj
`,e+=-U(Ze)+` 0 Td
`,an=-(Ge+2),Qe=0,cn=yn?dn:dn+1,pn++,fn=""}break}return ke.text=e,ke.fontSize=Ge,ke},et=function(r,e,t){var ke=e.scope.internal.getFont(e.fontName,e.fontStyle),Oe=e.scope.getStringUnitWidth(r,{font:ke,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:ke,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:Oe}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(r,e){var t={type:"reference",object:r};e.internal.getPageInfo(r.page).pageContext.annotations.find(function(ke){return ke.type===t.type&&ke.object===t.object})===void 0&&e.internal.getPageInfo(r.page).pageContext.annotations.push(t)},it=function(r,e){for(var t in r)if(r.hasOwnProperty(t)){var ke=t,Oe=r[t];e.internal.newObjectDeferredBegin(Oe.objId,!0),_typeof(Oe)==="object"&&typeof Oe.putStream=="function"&&Oe.putStream(),delete r[ke]}},at=function(r,e){if(e.scope=r,r.internal!==void 0&&(r.internal.acroformPlugin===void 0||r.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,r.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),r.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=r.internal.scaleFactor,r.internal.acroformPlugin.acroFormDictionaryRoot=new ht,r.internal.acroformPlugin.acroFormDictionaryRoot.scope=r,r.internal.acroformPlugin.acroFormDictionaryRoot._eventID=r.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(r)}),r.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var ke=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Oe in ke)if(ke.hasOwnProperty(Oe)){var Ge=ke[Oe];Ge.objId=void 0,Ge.hasAnnotation&&nt(Ge,t)}})(r)}),r.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(r)}),r.internal.events.subscribe("postPutPages",function(t){(function(ke,Oe){var Ge=!ke;for(var Be in ke||(Oe.internal.newObjectDeferredBegin(Oe.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Oe.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),ke=ke||Oe.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(ke.hasOwnProperty(Be)){var je=ke[Be],Ve=[],Ze=je.Rect;if(je.Rect&&(je.Rect=$(je.Rect,Oe)),Oe.internal.newObjectDeferredBegin(je.objId,!0),je.DA=At.createDefaultAppearanceStream(je),_typeof(je)==="object"&&typeof je.getKeyValueListForStream=="function"&&(Ve=je.getKeyValueListForStream()),je.Rect=Ze,je.hasAppearanceStream&&!je.appearanceStreamContent){var Qe=Q(je);Ve.push({key:"AP",value:"<</N "+Qe+">>"}),Oe.internal.acroformPlugin.xForms.push(Qe)}if(je.appearanceStreamContent){var en="";for(var tn in je.appearanceStreamContent)if(je.appearanceStreamContent.hasOwnProperty(tn)){var an=je.appearanceStreamContent[tn];if(en+="/"+tn+" ",en+="<<",Object.keys(an).length>=1||Array.isArray(an)){for(var Be in an)if(an.hasOwnProperty(Be)){var cn=an[Be];typeof cn=="function"&&(cn=cn.call(Oe,je)),en+="/"+Be+" "+cn+" ",Oe.internal.acroformPlugin.xForms.indexOf(cn)>=0||Oe.internal.acroformPlugin.xForms.push(cn)}}else typeof(cn=an)=="function"&&(cn=cn.call(Oe,je)),en+="/"+Be+" "+cn,Oe.internal.acroformPlugin.xForms.indexOf(cn)>=0||Oe.internal.acroformPlugin.xForms.push(cn);en+=">>"}Ve.push({key:"AP",value:`<<
`+en+">>"})}Oe.internal.putStream({additionalKeyValues:Ve,objectId:je.objId}),Oe.internal.out("endobj")}Ge&&it(Oe.internal.acroformPlugin.xForms,Oe)})(t,r)}),r.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(r,e,t){var ke=function(Be){return Be};if(Array.isArray(r)){for(var Oe="[",Ge=0;Ge<r.length;Ge++)switch(Ge!==0&&(Oe+=" "),_typeof(r[Ge])){case"boolean":case"number":case"object":Oe+=r[Ge].toString();break;case"string":r[Ge].substr(0,1)!=="/"?(e!==void 0&&t&&(ke=t.internal.getEncryptor(e)),Oe+="("+R(ke(r[Ge].toString()))+")"):Oe+=r[Ge].toString()}return Oe+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(r,e,t){var ke=function(Oe){return Oe};return e!==void 0&&t&&(ke=t.internal.getEncryptor(e)),(r=r||"").toString(),r="("+R(ke(r))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(r){this._objId=r}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var r=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:r,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var r=[],e=Object.getOwnPropertyNames(this).filter(function(Ge){return Ge!="content"&&Ge!="appearanceStreamContent"&&Ge!="scope"&&Ge!="objId"&&Ge.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var ke=e[t],Oe=this[ke];Oe&&(Array.isArray(Oe)?r.push({key:ke,value:ot(Oe,this.objId,this.scope)}):Oe instanceof ct?(Oe.scope=this.scope,r.push({key:ke,value:Oe.objId+" 0 R"})):typeof Oe!="function"&&r.push({key:ke,value:Oe}))}return r};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var r,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){r=t.trim()},get:function(){return r||null}})};H(ut,ct);var ht=function(){ct.call(this);var r,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(r){var t=function(ke){return ke};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+R(t(r))+")"}},set:function(t){r=t}})};H(ht,ct);var lt=function r(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(fn){if(isNaN(fn))throw new Error('Invalid value "'+fn+'" for attribute F supplied.');e=fn}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(e,3)},set:function(fn){fn?this.F=K(e,3):this.F=Z(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(fn){if(isNaN(fn))throw new Error('Invalid value "'+fn+'" for attribute Ff supplied.');t=fn}});var ke=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(ke.length!==0)return ke},set:function(fn){ke=fn!==void 0?fn:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[0])?0:ke[0]},set:function(fn){ke[0]=fn}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[1])?0:ke[1]},set:function(fn){ke[1]=fn}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[2])?0:ke[2]},set:function(fn){ke[2]=fn}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[3])?0:ke[3]},set:function(fn){ke[3]=fn}});var Oe="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Oe},set:function(fn){switch(fn){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Oe=fn;break;default:throw new Error('Invalid value "'+fn+'" for attribute FT supplied.')}}});var Ge=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Ge||Ge.length<1){if(this instanceof yt)return;Ge="FieldObject"+r.FieldNum++}var fn=function(pn){return pn};return this.scope&&(fn=this.scope.internal.getEncryptor(this.objId)),"("+R(fn(Ge))+")"},set:function(fn){Ge=fn.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Ge},set:function(fn){Ge=fn}});var Be="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return Be},set:function(fn){Be=fn}});var je="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return je},set:function(fn){je=fn}});var Ve=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Ve},set:function(fn){Ve=fn}});var Ze=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Ze===void 0?50/D:Ze},set:function(fn){Ze=fn}});var Qe="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return Qe},set:function(fn){Qe=fn}});var en="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!en||this instanceof yt||this instanceof Nt))return st(en,this.objId,this.scope)},set:function(fn){fn=fn.toString(),en=fn}});var tn=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(tn)return this instanceof mt?tn:st(tn,this.objId,this.scope)},set:function(fn){fn=fn.toString(),tn=this instanceof mt?fn:fn.substr(0,1)==="("?T(fn.substr(1,fn.length-2)):T(fn)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(tn.substr(1,tn.length-1)):tn},set:function(fn){fn=fn.toString(),tn=this instanceof mt?"/"+fn:fn}});var an=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(an)return an},set:function(fn){this.V=fn}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(an)return this instanceof mt?an:st(an,this.objId,this.scope)},set:function(fn){fn=fn.toString(),an=this instanceof mt?fn:fn.substr(0,1)==="("?T(fn.substr(1,fn.length-2)):T(fn)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(an.substr(1,an.length-1)):an},set:function(fn){fn=fn.toString(),an=this instanceof mt?"/"+fn:fn}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var cn,dn=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return dn},set:function(fn){fn=!!fn,dn=fn}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(cn)return cn},set:function(fn){cn=fn}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(fn){fn?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(fn){fn?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(fn){fn?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var hn=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(hn!==null)return hn},set:function(fn){if([0,1,2].indexOf(fn)===-1)throw new Error('Invalid value "'+fn+'" for attribute Q supplied.');hn=fn}}),Object.defineProperty(this,"textAlign",{get:function(){var fn;switch(hn){case 0:default:fn="left";break;case 1:fn="center";break;case 2:fn="right"}return fn},configurable:!0,enumerable:!0,set:function(fn){switch(fn){case"right":case 2:hn=2;break;case"center":case 1:hn=1;break;case"left":case 0:default:hn=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var r=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return r},set:function(t){r=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(t){var ke,Oe;Oe=[],typeof(ke=t)=="string"&&(Oe=function(Ge,Be,je){je||(je=1);for(var Ve,Ze=[];Ve=Be.exec(Ge);)Ze.push(Ve[je]);return Ze}(ke,/\((.*?)\)/g)),e=Oe}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,ke){for(ke=ke||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),ke!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(t){t?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(t){t?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(t){t?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(t){t?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(t){t?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(t){t?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(t){t?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(t){t?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(t){t?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var r,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(Ge){return Ge};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var ke,Oe=[];for(ke in Oe.push("<<"),e)Oe.push("/"+ke+" ("+R(t(e[ke]))+")");return Oe.push(">>"),Oe.join(`
`)}},set:function(t){_typeof(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var r=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var r,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return r},set:function(Oe){r=Oe}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(Oe){e=Oe}});var t,ke={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Oe=function(je){return je};this.scope&&(Oe=this.scope.internal.getEncryptor(this.objId));var Ge,Be=[];for(Ge in Be.push("<<"),ke)Be.push("/"+Ge+" ("+R(Oe(ke[Ge]))+")");return Be.push(">>"),Be.join(`
`)},set:function(Oe){_typeof(Oe)==="object"&&(ke=Oe)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return ke.CA||""},set:function(Oe){typeof Oe=="string"&&(ke.CA=Oe)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Oe){t=Oe}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(Oe){t="/"+Oe}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(r){if(!("createAppearanceStream"in r)||!("getCA"in r))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=r.createAppearanceStream(t.optionName),t.caption=r.getCA()}},bt.prototype.createOption=function(r){var e=new yt;return e.Parent=this,e.optionName=r,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var r=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return r},set:function(e){r=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return r},set:function(e){Number.isInteger(e)&&(r=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(r){r?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(r){var e=V(r);e.scope=r.scope;var t=[],ke=r.scope.internal.getFont(r.fontName,r.fontStyle).id,Oe=r.scope.__private__.encodeColorString(r.color),Ge=tt(r,r.caption);return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(r))+" "+U(At.internal.getHeight(r))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+ke+" "+U(Ge.fontSize)+" Tf "+Oe),t.push("BT"),t.push(Ge.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(r){var e=V(r);e.scope=r.scope;var t=r.scope.internal.getFont(r.fontName,r.fontStyle).id,ke=r.scope.__private__.encodeColorString(r.color),Oe=[],Ge=At.internal.getHeight(r),Be=At.internal.getWidth(r),je=tt(r,r.caption);return Oe.push("1 g"),Oe.push("0 0 "+U(Be)+" "+U(Ge)+" re"),Oe.push("f"),Oe.push("q"),Oe.push("0 0 1 rg"),Oe.push("0 0 "+U(Be-1)+" "+U(Ge-1)+" re"),Oe.push("W"),Oe.push("n"),Oe.push("0 g"),Oe.push("BT"),Oe.push("/"+t+" "+U(je.fontSize)+" Tf "+ke),Oe.push(je.text),Oe.push("ET"),Oe.push("Q"),e.stream=Oe.join(`
`),e},OffPushDown:function(r){var e=V(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(r))+" "+U(At.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(r){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[r]=At.RadioButton.Circle.YesNormal,e.D[r]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(r){var e=V(r);e.scope=r.scope;var t=[],ke=At.internal.getWidth(r)<=At.internal.getHeight(r)?At.internal.getWidth(r)/4:At.internal.getHeight(r)/4;ke=Number((.9*ke).toFixed(5));var Oe=At.internal.Bezier_C,Ge=Number((ke*Oe).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(r)/2)+" "+z(At.internal.getHeight(r)/2)+" cm"),t.push(ke+" 0 m"),t.push(ke+" "+Ge+" "+Ge+" "+ke+" 0 "+ke+" c"),t.push("-"+Ge+" "+ke+" -"+ke+" "+Ge+" -"+ke+" 0 c"),t.push("-"+ke+" -"+Ge+" -"+Ge+" -"+ke+" 0 -"+ke+" c"),t.push(Ge+" -"+ke+" "+ke+" -"+Ge+" "+ke+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=V(r);e.scope=r.scope;var t=[],ke=At.internal.getWidth(r)<=At.internal.getHeight(r)?At.internal.getWidth(r)/4:At.internal.getHeight(r)/4;ke=Number((.9*ke).toFixed(5));var Oe=Number((2*ke).toFixed(5)),Ge=Number((Oe*At.internal.Bezier_C).toFixed(5)),Be=Number((ke*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(r)/2)+" "+z(At.internal.getHeight(r)/2)+" cm"),t.push(Oe+" 0 m"),t.push(Oe+" "+Ge+" "+Ge+" "+Oe+" 0 "+Oe+" c"),t.push("-"+Ge+" "+Oe+" -"+Oe+" "+Ge+" -"+Oe+" 0 c"),t.push("-"+Oe+" -"+Ge+" -"+Ge+" -"+Oe+" 0 -"+Oe+" c"),t.push(Ge+" -"+Oe+" "+Oe+" -"+Ge+" "+Oe+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(r)/2)+" "+z(At.internal.getHeight(r)/2)+" cm"),t.push(ke+" 0 m"),t.push(ke+" "+Be+" "+Be+" "+ke+" 0 "+ke+" c"),t.push("-"+Be+" "+ke+" -"+ke+" "+Be+" -"+ke+" 0 c"),t.push("-"+ke+" -"+Be+" -"+Be+" -"+ke+" 0 -"+ke+" c"),t.push(Be+" -"+ke+" "+ke+" -"+Be+" "+ke+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(r){var e=V(r);e.scope=r.scope;var t=[],ke=At.internal.getWidth(r)<=At.internal.getHeight(r)?At.internal.getWidth(r)/4:At.internal.getHeight(r)/4;ke=Number((.9*ke).toFixed(5));var Oe=Number((2*ke).toFixed(5)),Ge=Number((Oe*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(r)/2)+" "+z(At.internal.getHeight(r)/2)+" cm"),t.push(Oe+" 0 m"),t.push(Oe+" "+Ge+" "+Ge+" "+Oe+" 0 "+Oe+" c"),t.push("-"+Ge+" "+Oe+" -"+Oe+" "+Ge+" -"+Oe+" 0 c"),t.push("-"+Oe+" -"+Ge+" -"+Ge+" -"+Oe+" 0 -"+Oe+" c"),t.push(Ge+" -"+Oe+" "+Oe+" -"+Ge+" "+Oe+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(r){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[r]=At.RadioButton.Cross.YesNormal,e.D[r]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(r){var e=V(r);e.scope=r.scope;var t=[],ke=At.internal.calculateCross(r);return t.push("q"),t.push("1 1 "+U(At.internal.getWidth(r)-2)+" "+U(At.internal.getHeight(r)-2)+" re"),t.push("W"),t.push("n"),t.push(U(ke.x1.x)+" "+U(ke.x1.y)+" m"),t.push(U(ke.x2.x)+" "+U(ke.x2.y)+" l"),t.push(U(ke.x4.x)+" "+U(ke.x4.y)+" m"),t.push(U(ke.x3.x)+" "+U(ke.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(r){var e=V(r);e.scope=r.scope;var t=At.internal.calculateCross(r),ke=[];return ke.push("0.749023 g"),ke.push("0 0 "+U(At.internal.getWidth(r))+" "+U(At.internal.getHeight(r))+" re"),ke.push("f"),ke.push("q"),ke.push("1 1 "+U(At.internal.getWidth(r)-2)+" "+U(At.internal.getHeight(r)-2)+" re"),ke.push("W"),ke.push("n"),ke.push(U(t.x1.x)+" "+U(t.x1.y)+" m"),ke.push(U(t.x2.x)+" "+U(t.x2.y)+" l"),ke.push(U(t.x4.x)+" "+U(t.x4.y)+" m"),ke.push(U(t.x3.x)+" "+U(t.x3.y)+" l"),ke.push("s"),ke.push("Q"),e.stream=ke.join(`
`),e},OffPushDown:function(r){var e=V(r);e.scope=r.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(r))+" "+U(At.internal.getHeight(r))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(r){var e=r.scope.internal.getFont(r.fontName,r.fontStyle).id,t=r.scope.__private__.encodeColorString(r.color);return"/"+e+" "+r.fontSize+" Tf "+t}};At.internal={Bezier_C:.551915024494,calculateCross:function(r){var e=At.internal.getWidth(r),t=At.internal.getHeight(r),ke=Math.min(e,t);return{x1:{x:(e-ke)/2,y:(t-ke)/2+ke},x2:{x:(e-ke)/2+ke,y:(t-ke)/2},x3:{x:(e-ke)/2,y:(t-ke)/2},x4:{x:(e-ke)/2+ke,y:(t-ke)/2+ke}}}},At.internal.getWidth=function(r){var e=0;return _typeof(r)==="object"&&(e=W(r.Rect[2])),e},At.internal.getHeight=function(r){var e=0;return _typeof(r)==="object"&&(e=W(r.Rect[3])),e};var xt=q.addField=function(r){if(at(this,r),!(r instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=r).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),r.page=r.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};function _t(r){return r.reduce(function(e,t,ke){return e[t]=ke,e},{})}(function(r){r.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},ke=r.__addimage__.getImageFileTypeByImageData=function(En,An){var Ln,Rn,Gn,Nn,jn,Dn=e;if((An=An||e)==="RGBA"||En.data!==void 0&&En.data instanceof Uint8ClampedArray&&"height"in En&&"width"in En)return"RGBA";if(wn(En))for(jn in t)for(Gn=t[jn],Ln=0;Ln<Gn.length;Ln+=1){for(Nn=!0,Rn=0;Rn<Gn[Ln].length;Rn+=1)if(Gn[Ln][Rn]!==void 0&&Gn[Ln][Rn]!==En[Rn]){Nn=!1;break}if(Nn===!0){Dn=jn;break}}else for(jn in t)for(Gn=t[jn],Ln=0;Ln<Gn.length;Ln+=1){for(Nn=!0,Rn=0;Rn<Gn[Ln].length;Rn+=1)if(Gn[Ln][Rn]!==void 0&&Gn[Ln][Rn]!==En.charCodeAt(Rn)){Nn=!1;break}if(Nn===!0){Dn=jn;break}}return Dn===e&&An!==e&&(Dn=An),Dn},Oe=function En(An){for(var Ln=this.internal.write,Rn=this.internal.putStream,Gn=(0,this.internal.getFilters)();Gn.indexOf("FlateEncode")!==-1;)Gn.splice(Gn.indexOf("FlateEncode"),1);An.objectId=this.internal.newObject();var Nn=[];if(Nn.push({key:"Type",value:"/XObject"}),Nn.push({key:"Subtype",value:"/Image"}),Nn.push({key:"Width",value:An.width}),Nn.push({key:"Height",value:An.height}),An.colorSpace===hn.INDEXED?Nn.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(An.palette.length/3-1)+" "+("sMask"in An&&An.sMask!==void 0?An.objectId+2:An.objectId+1)+" 0 R]"}):(Nn.push({key:"ColorSpace",value:"/"+An.colorSpace}),An.colorSpace===hn.DEVICE_CMYK&&Nn.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Nn.push({key:"BitsPerComponent",value:An.bitsPerComponent}),"decodeParameters"in An&&An.decodeParameters!==void 0&&Nn.push({key:"DecodeParms",value:"<<"+An.decodeParameters+">>"}),"transparency"in An&&Array.isArray(An.transparency)){for(var jn="",Dn=0,Ci=An.transparency.length;Dn<Ci;Dn++)jn+=An.transparency[Dn]+" "+An.transparency[Dn]+" ";Nn.push({key:"Mask",value:"["+jn+"]"})}An.sMask!==void 0&&Nn.push({key:"SMask",value:An.objectId+1+" 0 R"});var Jn=An.filter!==void 0?["/"+An.filter]:void 0;if(Rn({data:An.data,additionalKeyValues:Nn,alreadyAppliedFilters:Jn,objectId:An.objectId}),Ln("endobj"),"sMask"in An&&An.sMask!==void 0){var Ki="/Predictor "+An.predictor+" /Colors 1 /BitsPerComponent "+An.bitsPerComponent+" /Columns "+An.width,xn={width:An.width,height:An.height,colorSpace:"DeviceGray",bitsPerComponent:An.bitsPerComponent,decodeParameters:Ki,data:An.sMask};"filter"in An&&(xn.filter=An.filter),En.call(this,xn)}if(An.colorSpace===hn.INDEXED){var qn=this.internal.newObject();Rn({data:Sn(new Uint8Array(An.palette)),objectId:qn}),Ln("endobj")}},Ge=function(){var En=this.internal.collections.addImage_images;for(var An in En)Oe.call(this,En[An])},Be=function(){var En,An=this.internal.collections.addImage_images,Ln=this.internal.write;for(var Rn in An)Ln("/I"+(En=An[Rn]).index,En.objectId,"0","R")},je=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Ge),this.internal.events.subscribe("putXobjectDict",Be))},Ve=function(){var En=this.internal.collections.addImage_images;return je.call(this),En},Ze=function(){return Object.keys(this.internal.collections.addImage_images).length},Qe=function(En){return typeof r["process"+En.toUpperCase()]=="function"},en=function(En){return _typeof(En)==="object"&&En.nodeType===1},tn=function(En,An){if(En.nodeName==="IMG"&&En.hasAttribute("src")){var Ln=""+En.getAttribute("src");if(Ln.indexOf("data:image/")===0)return u(unescape(Ln).split("base64,").pop());var Rn=r.loadFile(Ln,!0);if(Rn!==void 0)return Rn}if(En.nodeName==="CANVAS"){if(En.width===0||En.height===0)throw new Error("Given canvas must have data. Canvas width: "+En.width+", height: "+En.height);var Gn;switch(An){case"PNG":Gn="image/png";break;case"WEBP":Gn="image/webp";break;case"JPEG":case"JPG":default:Gn="image/jpeg"}return u(En.toDataURL(Gn,1).split("base64,").pop())}},an=function(En){var An=this.internal.collections.addImage_images;if(An){for(var Ln in An)if(En===An[Ln].alias)return An[Ln]}},cn=function(En,An,Ln){return En||An||(En=-96,An=-96),En<0&&(En=-1*Ln.width*72/En/this.internal.scaleFactor),An<0&&(An=-1*Ln.height*72/An/this.internal.scaleFactor),En===0&&(En=An*Ln.width/Ln.height),An===0&&(An=En*Ln.height/Ln.width),[En,An]},dn=function(En,An,Ln,Rn,Gn,Nn){var jn=cn.call(this,Ln,Rn,Gn),Dn=this.internal.getCoordinateString,Ci=this.internal.getVerticalCoordinateString,Jn=Ve.call(this);if(Ln=jn[0],Rn=jn[1],Jn[Gn.index]=Gn,Nn){Nn*=Math.PI/180;var Ki=Math.cos(Nn),xn=Math.sin(Nn),qn=function(Ai){return Ai.toFixed(4)},$n=[qn(Ki),qn(xn),qn(-1*xn),qn(Ki),0,0,"cm"]}this.internal.write("q"),Nn?(this.internal.write([1,"0","0",1,Dn(En),Ci(An+Rn),"cm"].join(" ")),this.internal.write($n.join(" ")),this.internal.write([Dn(Ln),"0","0",Dn(Rn),"0","0","cm"].join(" "))):this.internal.write([Dn(Ln),"0","0",Dn(Rn),Dn(En),Ci(An+Rn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Gn.index+" Do"),this.internal.write("Q")},hn=r.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};r.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var fn=r.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},pn=r.__addimage__.sHashCode=function(En){var An,Ln,Rn=0;if(typeof En=="string")for(Ln=En.length,An=0;An<Ln;An++)Rn=(Rn<<5)-Rn+En.charCodeAt(An),Rn|=0;else if(wn(En))for(Ln=En.byteLength/2,An=0;An<Ln;An++)Rn=(Rn<<5)-Rn+En[An],Rn|=0;return Rn},mn=r.__addimage__.validateStringAsBase64=function(En){(En=En||"").toString().trim();var An=!0;return En.length===0&&(An=!1),En.length%4!=0&&(An=!1),/^[A-Za-z0-9+/]+$/.test(En.substr(0,En.length-2))===!1&&(An=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(En.substr(-2))===!1&&(An=!1),An},yn=r.__addimage__.extractImageFromDataUrl=function(En){var An=(En=En||"").split("base64,"),Ln=null;if(An.length===2){var Rn=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(An[0]);Array.isArray(Rn)&&(Ln={mimeType:Rn[1],charset:Rn[2],data:An[1]})}return Ln},Cn=r.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};r.__addimage__.isArrayBuffer=function(En){return Cn()&&En instanceof ArrayBuffer};var wn=r.__addimage__.isArrayBufferView=function(En){return Cn()&&typeof Uint32Array<"u"&&(En instanceof Int8Array||En instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&En instanceof Uint8ClampedArray||En instanceof Int16Array||En instanceof Uint16Array||En instanceof Int32Array||En instanceof Uint32Array||En instanceof Float32Array||En instanceof Float64Array)},bn=r.__addimage__.binaryStringToUint8Array=function(En){for(var An=En.length,Ln=new Uint8Array(An),Rn=0;Rn<An;Rn++)Ln[Rn]=En.charCodeAt(Rn);return Ln},Sn=r.__addimage__.arrayBufferToBinaryString=function(En){for(var An="",Ln=wn(En)?En:new Uint8Array(En),Rn=0;Rn<Ln.length;Rn+=8192)An+=String.fromCharCode.apply(null,Ln.subarray(Rn,Rn+8192));return An};r.addImage=function(){var En,An,Ln,Rn,Gn,Nn,jn,Dn,Ci;if(typeof arguments[1]=="number"?(An=e,Ln=arguments[1],Rn=arguments[2],Gn=arguments[3],Nn=arguments[4],jn=arguments[5],Dn=arguments[6],Ci=arguments[7]):(An=arguments[1],Ln=arguments[2],Rn=arguments[3],Gn=arguments[4],Nn=arguments[5],jn=arguments[6],Dn=arguments[7],Ci=arguments[8]),_typeof(En=arguments[0])==="object"&&!en(En)&&"imageData"in En){var Jn=En;En=Jn.imageData,An=Jn.format||An||e,Ln=Jn.x||Ln||0,Rn=Jn.y||Rn||0,Gn=Jn.w||Jn.width||Gn,Nn=Jn.h||Jn.height||Nn,jn=Jn.alias||jn,Dn=Jn.compression||Dn,Ci=Jn.rotation||Jn.angle||Ci}var Ki=this.internal.getFilters();if(Dn===void 0&&Ki.indexOf("FlateEncode")!==-1&&(Dn="SLOW"),isNaN(Ln)||isNaN(Rn))throw new Error("Invalid coordinates passed to jsPDF.addImage");je.call(this);var xn=Mn.call(this,En,An,jn,Dn);return dn.call(this,Ln,Rn,Gn,Nn,xn,Ci),this};var Mn=function(En,An,Ln,Rn){var Gn,Nn,jn;if(typeof En=="string"&&ke(En)===e){En=unescape(En);var Dn=Tn(En,!1);(Dn!==""||(Dn=r.loadFile(En,!0))!==void 0)&&(En=Dn)}if(en(En)&&(En=tn(En,An)),An=ke(En,An),!Qe(An))throw new Error("addImage does not support files of type '"+An+"', please ensure that a plugin for '"+An+"' support is added.");if(((jn=Ln)==null||jn.length===0)&&(Ln=function(Ci){return typeof Ci=="string"||wn(Ci)?pn(Ci):wn(Ci.data)?pn(Ci.data):null}(En)),(Gn=an.call(this,Ln))||(Cn()&&(En instanceof Uint8Array||An==="RGBA"||(Nn=En,En=bn(En))),Gn=this["process"+An.toUpperCase()](En,Ze.call(this),Ln,function(Ci){return Ci&&typeof Ci=="string"&&(Ci=Ci.toUpperCase()),Ci in r.image_compression?Ci:fn.NONE}(Rn),Nn)),!Gn)throw new Error("An unknown error occurred whilst processing the image.");return Gn},Tn=r.__addimage__.convertBase64ToBinaryString=function(En,An){var Ln;An=typeof An!="boolean"||An;var Rn,Gn="";if(typeof En=="string"){Rn=(Ln=yn(En))!==null?Ln.data:En;try{Gn=u(Rn)}catch(Nn){if(An)throw mn(Rn)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Nn.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Gn};r.getImageProperties=function(En){var An,Ln,Rn="";if(en(En)&&(En=tn(En)),typeof En=="string"&&ke(En)===e&&((Rn=Tn(En,!1))===""&&(Rn=r.loadFile(En)||""),En=Rn),Ln=ke(En),!Qe(Ln))throw new Error("addImage does not support files of type '"+Ln+"', please ensure that a plugin for '"+Ln+"' support is added.");if(!Cn()||En instanceof Uint8Array||(En=bn(En)),!(An=this["process"+Ln.toUpperCase()](En)))throw new Error("An unknown error occurred whilst processing the image");return An.fileType=Ln,An}})(E.API),function(r){var e=function(t){if(t!==void 0&&t!="")return!0};E.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),r.events.push(["putPage",function(t){for(var ke,Oe,Ge,Be=this.internal.getCoordinateString,je=this.internal.getVerticalCoordinateString,Ve=this.internal.getPageInfoByObjId(t.objId),Ze=t.pageContext.annotations,Qe=!1,en=0;en<Ze.length&&!Qe;en++)switch((ke=Ze[en]).type){case"link":(e(ke.options.url)||e(ke.options.pageNumber))&&(Qe=!0);break;case"reference":case"text":case"freetext":Qe=!0}if(Qe!=0){this.internal.write("/Annots [");for(var tn=0;tn<Ze.length;tn++){ke=Ze[tn];var an=this.internal.pdfEscape,cn=this.internal.getEncryptor(t.objId);switch(ke.type){case"reference":this.internal.write(" "+ke.object.objId+" 0 R ");break;case"text":var dn=this.internal.newAdditionalObject(),hn=this.internal.newAdditionalObject(),fn=this.internal.getEncryptor(dn.objId),pn=ke.title||"Note";Ge="<</Type /Annot /Subtype /Text "+(Oe="/Rect ["+Be(ke.bounds.x)+" "+je(ke.bounds.y+ke.bounds.h)+" "+Be(ke.bounds.x+ke.bounds.w)+" "+je(ke.bounds.y)+"] ")+"/Contents ("+an(fn(ke.contents))+")",Ge+=" /Popup "+hn.objId+" 0 R",Ge+=" /P "+Ve.objId+" 0 R",Ge+=" /T ("+an(fn(pn))+") >>",dn.content=Ge;var mn=dn.objId+" 0 R";Ge="<</Type /Annot /Subtype /Popup "+(Oe="/Rect ["+Be(ke.bounds.x+30)+" "+je(ke.bounds.y+ke.bounds.h)+" "+Be(ke.bounds.x+ke.bounds.w+30)+" "+je(ke.bounds.y)+"] ")+" /Parent "+mn,ke.open&&(Ge+=" /Open true"),Ge+=" >>",hn.content=Ge,this.internal.write(dn.objId,"0 R",hn.objId,"0 R");break;case"freetext":Oe="/Rect ["+Be(ke.bounds.x)+" "+je(ke.bounds.y)+" "+Be(ke.bounds.x+ke.bounds.w)+" "+je(ke.bounds.y+ke.bounds.h)+"] ";var yn=ke.color||"#000000";Ge="<</Type /Annot /Subtype /FreeText "+Oe+"/Contents ("+an(cn(ke.contents))+")",Ge+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+yn+")",Ge+=" /Border [0 0 0]",Ge+=" >>",this.internal.write(Ge);break;case"link":if(ke.options.name){var Cn=this.annotations._nameMap[ke.options.name];ke.options.pageNumber=Cn.page,ke.options.top=Cn.y}else ke.options.top||(ke.options.top=0);if(Oe="/Rect ["+ke.finalBounds.x+" "+ke.finalBounds.y+" "+ke.finalBounds.w+" "+ke.finalBounds.h+"] ",Ge="",ke.options.url)Ge="<</Type /Annot /Subtype /Link "+Oe+"/Border [0 0 0] /A <</S /URI /URI ("+an(cn(ke.options.url))+") >>";else if(ke.options.pageNumber)switch(Ge="<</Type /Annot /Subtype /Link "+Oe+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(ke.options.pageNumber).objId+" 0 R",ke.options.magFactor=ke.options.magFactor||"XYZ",ke.options.magFactor){case"Fit":Ge+=" /Fit]";break;case"FitH":Ge+=" /FitH "+ke.options.top+"]";break;case"FitV":ke.options.left=ke.options.left||0,Ge+=" /FitV "+ke.options.left+"]";break;case"XYZ":default:var wn=je(ke.options.top);ke.options.left=ke.options.left||0,ke.options.zoom===void 0&&(ke.options.zoom=0),Ge+=" /XYZ "+ke.options.left+" "+wn+" "+ke.options.zoom+"]"}Ge!=""&&(Ge+=" >>",this.internal.write(Ge))}}this.internal.write("]")}}]),r.createAnnotation=function(t){var ke=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":ke.pageContext.annotations.push(t)}},r.link=function(t,ke,Oe,Ge,Be){var je=this.internal.getCurrentPageInfo(),Ve=this.internal.getCoordinateString,Ze=this.internal.getVerticalCoordinateString;je.pageContext.annotations.push({finalBounds:{x:Ve(t),y:Ze(ke),w:Ve(t+Oe),h:Ze(ke+Ge)},options:Be,type:"link"})},r.textWithLink=function(t,ke,Oe,Ge){var Be,je,Ve=this.getTextWidth(t),Ze=this.internal.getLineHeight()/this.internal.scaleFactor;if(Ge.maxWidth!==void 0){je=Ge.maxWidth;var Qe=this.splitTextToSize(t,je).length;Be=Math.ceil(Ze*Qe)}else je=Ve,Be=Ze;return this.text(t,ke,Oe,Ge),Oe+=.2*Ze,Ge.align==="center"&&(ke-=Ve/2),Ge.align==="right"&&(ke-=Ve),this.link(ke,Oe-Ze,je,Be,Ge),Ve},r.getTextWidth=function(t){var ke=this.internal.getFontSize();return this.getStringUnitWidth(t)*ke/this.internal.scaleFactor}}(E.API),function(r){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},ke={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Oe=[1570,1571,1573,1575];r.__arabicParser__={};var Ge=r.__arabicParser__.isInArabicSubstitutionA=function(dn){return e[dn.charCodeAt(0)]!==void 0},Be=r.__arabicParser__.isArabicLetter=function(dn){return typeof dn=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(dn)},je=r.__arabicParser__.isArabicEndLetter=function(dn){return Be(dn)&&Ge(dn)&&e[dn.charCodeAt(0)].length<=2},Ve=r.__arabicParser__.isArabicAlfLetter=function(dn){return Be(dn)&&Oe.indexOf(dn.charCodeAt(0))>=0};r.__arabicParser__.arabicLetterHasIsolatedForm=function(dn){return Be(dn)&&Ge(dn)&&e[dn.charCodeAt(0)].length>=1};var Ze=r.__arabicParser__.arabicLetterHasFinalForm=function(dn){return Be(dn)&&Ge(dn)&&e[dn.charCodeAt(0)].length>=2};r.__arabicParser__.arabicLetterHasInitialForm=function(dn){return Be(dn)&&Ge(dn)&&e[dn.charCodeAt(0)].length>=3};var Qe=r.__arabicParser__.arabicLetterHasMedialForm=function(dn){return Be(dn)&&Ge(dn)&&e[dn.charCodeAt(0)].length==4},en=r.__arabicParser__.resolveLigatures=function(dn){var hn=0,fn=t,pn="",mn=0;for(hn=0;hn<dn.length;hn+=1)fn[dn.charCodeAt(hn)]!==void 0?(mn++,typeof(fn=fn[dn.charCodeAt(hn)])=="number"&&(pn+=String.fromCharCode(fn),fn=t,mn=0),hn===dn.length-1&&(fn=t,pn+=dn.charAt(hn-(mn-1)),hn-=mn-1,mn=0)):(fn=t,pn+=dn.charAt(hn-mn),hn-=mn,mn=0);return pn};r.__arabicParser__.isArabicDiacritic=function(dn){return dn!==void 0&&ke[dn.charCodeAt(0)]!==void 0};var tn=r.__arabicParser__.getCorrectForm=function(dn,hn,fn){return Be(dn)?Ge(dn)===!1?-1:!Ze(dn)||!Be(hn)&&!Be(fn)||!Be(fn)&&je(hn)||je(dn)&&!Be(hn)||je(dn)&&Ve(hn)||je(dn)&&je(hn)?0:Qe(dn)&&Be(hn)&&!je(hn)&&Be(fn)&&Ze(fn)?3:je(dn)||!Be(fn)?1:2:-1},an=function(dn){var hn=0,fn=0,pn=0,mn="",yn="",Cn="",wn=(dn=dn||"").split("\\s+"),bn=[];for(hn=0;hn<wn.length;hn+=1){for(bn.push(""),fn=0;fn<wn[hn].length;fn+=1)mn=wn[hn][fn],yn=wn[hn][fn-1],Cn=wn[hn][fn+1],Be(mn)?(pn=tn(mn,yn,Cn),bn[hn]+=pn!==-1?String.fromCharCode(e[mn.charCodeAt(0)][pn]):mn):bn[hn]+=mn;bn[hn]=en(bn[hn])}return bn.join(" ")},cn=r.__arabicParser__.processArabic=r.processArabic=function(){var dn,hn=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,fn=[];if(Array.isArray(hn)){var pn=0;for(fn=[],pn=0;pn<hn.length;pn+=1)Array.isArray(hn[pn])?fn.push([an(hn[pn][0]),hn[pn][1],hn[pn][2]]):fn.push([an(hn[pn])]);dn=fn}else dn=an(hn);return typeof arguments[0]=="string"?dn:(arguments[0].text=dn,arguments[0])};r.events.push(["preProcessText",cn])}(E.API),E.API.autoPrint=function(r){var e;switch((r=r||{}).variant=r.variant||"non-conform",r.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(r){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(je){t=je}});var ke=150;Object.defineProperty(this,"width",{get:function(){return ke},set:function(je){ke=isNaN(je)||Number.isInteger(je)===!1||je<0?150:je,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=ke+1)}});var Oe=300;Object.defineProperty(this,"height",{get:function(){return Oe},set:function(je){Oe=isNaN(je)||Number.isInteger(je)===!1||je<0?300:je,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Oe+1)}});var Ge=[];Object.defineProperty(this,"childNodes",{get:function(){return Ge},set:function(je){Ge=je}});var Be={};Object.defineProperty(this,"style",{get:function(){return Be},set:function(je){Be=je}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,ke){var Oe;if((t=t||"2d")!=="2d")return null;for(Oe in ke)this.pdf.context2d.hasOwnProperty(Oe)&&(this.pdf.context2d[Oe]=ke[Oe]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},r.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(r){var e={left:0,top:0,bottom:0,right:0},t=!1,ke=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),Oe.call(this))},Oe=function(){this.internal.__cell__.lastCell=new Ge,this.internal.__cell__.pages=1},Ge=function(){var Ve=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ve},set:function(dn){Ve=dn}});var Ze=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ze},set:function(dn){Ze=dn}});var Qe=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return Qe},set:function(dn){Qe=dn}});var en=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return en},set:function(dn){en=dn}});var tn=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return tn},set:function(dn){tn=dn}});var an=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return an},set:function(dn){an=dn}});var cn=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return cn},set:function(dn){cn=dn}}),this};Ge.prototype.clone=function(){return new Ge(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Ge.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},r.setHeaderFunction=function(Ve){return ke.call(this),this.internal.__cell__.headerFunction=typeof Ve=="function"?Ve:void 0,this},r.getTextDimensions=function(Ve,Ze){ke.call(this);var Qe=(Ze=Ze||{}).fontSize||this.getFontSize(),en=Ze.font||this.getFont(),tn=Ze.scaleFactor||this.internal.scaleFactor,an=0,cn=0,dn=0,hn=this;if(!Array.isArray(Ve)&&typeof Ve!="string"){if(typeof Ve!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Ve=String(Ve)}var fn=Ze.maxWidth;fn>0?typeof Ve=="string"?Ve=this.splitTextToSize(Ve,fn):Object.prototype.toString.call(Ve)==="[object Array]"&&(Ve=Ve.reduce(function(mn,yn){return mn.concat(hn.splitTextToSize(yn,fn))},[])):Ve=Array.isArray(Ve)?Ve:[Ve];for(var pn=0;pn<Ve.length;pn++)an<(dn=this.getStringUnitWidth(Ve[pn],{font:en})*Qe)&&(an=dn);return an!==0&&(cn=Ve.length),{w:an/=tn,h:Math.max((cn*Qe*this.getLineHeightFactor()-Qe*(this.getLineHeightFactor()-1))/tn,0)}},r.cellAddPage=function(){ke.call(this),this.addPage();var Ve=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Ge(Ve.left,Ve.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var Be=r.cell=function(){var Ve;Ve=arguments[0]instanceof Ge?arguments[0]:new Ge(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),ke.call(this);var Ze=this.internal.__cell__.lastCell,Qe=this.internal.__cell__.padding,en=this.internal.__cell__.margins||e,tn=this.internal.__cell__.tableHeaderRow,an=this.internal.__cell__.printHeaders;return Ze.lineNumber!==void 0&&(Ze.lineNumber===Ve.lineNumber?(Ve.x=(Ze.x||0)+(Ze.width||0),Ve.y=Ze.y||0):Ze.y+Ze.height+Ve.height+en.bottom>this.getPageHeight()?(this.cellAddPage(),Ve.y=en.top,an&&tn&&(this.printHeaderRow(Ve.lineNumber,!0),Ve.y+=tn[0].height)):Ve.y=Ze.y+Ze.height||Ve.y),Ve.text[0]!==void 0&&(this.rect(Ve.x,Ve.y,Ve.width,Ve.height,t===!0?"FD":void 0),Ve.align==="right"?this.text(Ve.text,Ve.x+Ve.width-Qe,Ve.y+Qe,{align:"right",baseline:"top"}):Ve.align==="center"?this.text(Ve.text,Ve.x+Ve.width/2,Ve.y+Qe,{align:"center",baseline:"top",maxWidth:Ve.width-Qe-Qe}):this.text(Ve.text,Ve.x+Qe,Ve.y+Qe,{align:"left",baseline:"top",maxWidth:Ve.width-Qe-Qe})),this.internal.__cell__.lastCell=Ve,this};r.table=function(Ve,Ze,Qe,en,tn){if(ke.call(this),!Qe)throw new Error("No data for PDF table.");var an,cn,dn,hn,fn=[],pn=[],mn=[],yn={},Cn={},wn=[],bn=[],Sn=(tn=tn||{}).autoSize||!1,Mn=tn.printHeaders!==!1,Tn=tn.css&&tn.css["font-size"]!==void 0?16*tn.css["font-size"]:tn.fontSize||12,En=tn.margins||Object.assign({width:this.getPageWidth()},e),An=typeof tn.padding=="number"?tn.padding:3,Ln=tn.headerBackgroundColor||"#c8c8c8",Rn=tn.headerTextColor||"#000";if(Oe.call(this),this.internal.__cell__.printHeaders=Mn,this.internal.__cell__.margins=En,this.internal.__cell__.table_font_size=Tn,this.internal.__cell__.padding=An,this.internal.__cell__.headerBackgroundColor=Ln,this.internal.__cell__.headerTextColor=Rn,this.setFontSize(Tn),en==null)pn=fn=Object.keys(Qe[0]),mn=fn.map(function(){return"left"});else if(Array.isArray(en)&&_typeof(en[0])==="object")for(fn=en.map(function(Jn){return Jn.name}),pn=en.map(function(Jn){return Jn.prompt||Jn.name||""}),mn=en.map(function(Jn){return Jn.align||"left"}),an=0;an<en.length;an+=1)Cn[en[an].name]=en[an].width*(19.049976/25.4);else Array.isArray(en)&&typeof en[0]=="string"&&(pn=fn=en,mn=fn.map(function(){return"left"}));if(Sn||Array.isArray(en)&&typeof en[0]=="string")for(an=0;an<fn.length;an+=1){for(yn[hn=fn[an]]=Qe.map(function(Jn){return Jn[hn]}),this.setFont(void 0,"bold"),wn.push(this.getTextDimensions(pn[an],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),cn=yn[hn],this.setFont(void 0,"normal"),dn=0;dn<cn.length;dn+=1)wn.push(this.getTextDimensions(cn[dn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);Cn[hn]=Math.max.apply(null,wn)+An+An,wn=[]}if(Mn){var Gn={};for(an=0;an<fn.length;an+=1)Gn[fn[an]]={},Gn[fn[an]].text=pn[an],Gn[fn[an]].align=mn[an];var Nn=je.call(this,Gn,Cn);bn=fn.map(function(Jn){return new Ge(Ve,Ze,Cn[Jn],Nn,Gn[Jn].text,void 0,Gn[Jn].align)}),this.setTableHeaderRow(bn),this.printHeaderRow(1,!1)}var jn=en.reduce(function(Jn,Ki){return Jn[Ki.name]=Ki.align,Jn},{});for(an=0;an<Qe.length;an+=1){"rowStart"in tn&&tn.rowStart instanceof Function&&tn.rowStart({row:an,data:Qe[an]},this);var Dn=je.call(this,Qe[an],Cn);for(dn=0;dn<fn.length;dn+=1){var Ci=Qe[an][fn[dn]];"cellStart"in tn&&tn.cellStart instanceof Function&&tn.cellStart({row:an,col:dn,data:Ci},this),Be.call(this,new Ge(Ve,Ze,Cn[fn[dn]],Dn,Ci,an+2,jn[fn[dn]]))}}return this.internal.__cell__.table_x=Ve,this.internal.__cell__.table_y=Ze,this};var je=function(Ve,Ze){var Qe=this.internal.__cell__.padding,en=this.internal.__cell__.table_font_size,tn=this.internal.scaleFactor;return Object.keys(Ve).map(function(an){var cn=Ve[an];return this.splitTextToSize(cn.hasOwnProperty("text")?cn.text:cn,Ze[an]-Qe-Qe)},this).map(function(an){return this.getLineHeightFactor()*an.length*en/tn+Qe+Qe},this).reduce(function(an,cn){return Math.max(an,cn)},0)};r.setTableHeaderRow=function(Ve){ke.call(this),this.internal.__cell__.tableHeaderRow=Ve},r.printHeaderRow=function(Ve,Ze){if(ke.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var Qe;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var en=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Ge(en[0],en[1],en[2],en[3],void 0,-1)}this.setFont(void 0,"bold");for(var tn=[],an=0;an<this.internal.__cell__.tableHeaderRow.length;an+=1){Qe=this.internal.__cell__.tableHeaderRow[an].clone(),Ze&&(Qe.y=this.internal.__cell__.margins.top||0,tn.push(Qe)),Qe.lineNumber=Ve;var cn=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),Be.call(this,Qe),this.setTextColor(cn)}tn.length>0&&this.setTableHeaderRow(tn),this.setFont(void 0,"normal"),t=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(r){var e=r.family.replace(/"|'/g,"").toLowerCase(),t=function(Ge){return Pt[Ge=Ge||"normal"]?Ge:"normal"}(r.style),ke=function(Ge){if(!Ge)return 400;if(typeof Ge=="number")return Ge>=100&&Ge<=900&&Ge%100==0?Ge:400;if(/^\d00$/.test(Ge))return parseInt(Ge);switch(Ge){case"bold":return 700;case"normal":default:return 400}}(r.weight),Oe=function(Ge){return typeof It[Ge=Ge||"normal"]=="number"?Ge:"normal"}(r.stretch);return{family:e,style:t,weight:ke,stretch:Oe,src:r.src||[],ref:r.ref||{name:e,style:[Oe,t,ke].join(" ")}}}function Ot(r,e,t,ke){var Oe;for(Oe=t;Oe>=0&&Oe<e.length;Oe+=ke)if(r[e[Oe]])return r[e[Oe]];for(Oe=t;Oe>=0&&Oe<e.length;Oe-=ke)if(r[e[Oe]])return r[e[Oe]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(r){return[r.stretch,r.style,r.weight,r.family].join(" ")}function qt(r,e,t){for(var ke=(t=t||{}).defaultFontFamily||"times",Oe=Object.assign({},Bt,t.genericFontFamilies||{}),Ge=null,Be=null,je=0;je<e.length;++je)if(Oe[(Ge=jt(e[je])).family]&&(Ge.family=Oe[Ge.family]),r.hasOwnProperty(Ge.family)){Be=r[Ge.family];break}if(!(Be=Be||r[ke]))throw new Error("Could not find a font-family for the rule '"+Et(Ge)+"' and default family '"+ke+"'.");if(Be=function(Ve,Ze){if(Ze[Ve])return Ze[Ve];var Qe=It[Ve],en=Qe<=It.normal?-1:1,tn=Ot(Ze,kt,Qe,en);if(!tn)throw new Error("Could not find a matching font-stretch value for "+Ve);return tn}(Ge.stretch,Be),Be=function(Ve,Ze){if(Ze[Ve])return Ze[Ve];for(var Qe=Pt[Ve],en=0;en<Qe.length;++en)if(Ze[Qe[en]])return Ze[Qe[en]];throw new Error("Could not find a matching font-style for "+Ve)}(Ge.style,Be),!(Be=function(Ve,Ze){if(Ze[Ve])return Ze[Ve];if(Ve===400&&Ze[500])return Ze[500];if(Ve===500&&Ze[400])return Ze[400];var Qe=Ct[Ve],en=Ot(Ze,Ft,Qe,Ve<400?-1:1);if(!en)throw new Error("Could not find a matching font-weight for value "+Ve);return en}(Ge.weight,Be)))throw new Error("Failed to resolve a font for the rule '"+Et(Ge)+"'.");return Be}function Dt(r){return r.trimLeft()}function Rt(r,e){for(var t=0;t<r.length;){if(r.charAt(t)===e)return[r.substring(0,t),r.substring(t+1)];t+=1}return null}function Tt(r){var e=r.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],r.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(r){var e,t,ke,Oe,Ge,Be,je,Ve,Ze,Qe=function(xn){return xn=xn||{},this.isStrokeTransparent=xn.isStrokeTransparent||!1,this.strokeOpacity=xn.strokeOpacity||1,this.strokeStyle=xn.strokeStyle||"#000000",this.fillStyle=xn.fillStyle||"#000000",this.isFillTransparent=xn.isFillTransparent||!1,this.fillOpacity=xn.fillOpacity||1,this.font=xn.font||"10px sans-serif",this.textBaseline=xn.textBaseline||"alphabetic",this.textAlign=xn.textAlign||"left",this.lineWidth=xn.lineWidth||1,this.lineJoin=xn.lineJoin||"miter",this.lineCap=xn.lineCap||"butt",this.path=xn.path||[],this.transform=xn.transform!==void 0?xn.transform.clone():new Ve,this.globalCompositeOperation=xn.globalCompositeOperation||"normal",this.globalAlpha=xn.globalAlpha||1,this.clip_path=xn.clip_path||[],this.currentPoint=xn.currentPoint||new Be,this.miterLimit=xn.miterLimit||10,this.lastPoint=xn.lastPoint||new Be,this.lineDashOffset=xn.lineDashOffset||0,this.lineDash=xn.lineDash||[],this.margin=xn.margin||[0,0,0,0],this.prevPageLastElemOffset=xn.prevPageLastElemOffset||0,this.ignoreClearRect=typeof xn.ignoreClearRect!="boolean"||xn.ignoreClearRect,this};r.events.push(["initialized",function(){this.context2d=new en(this),e=this.internal.f2,t=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString,Oe=this.internal.getHorizontalCoordinate,Ge=this.internal.getVerticalCoordinate,Be=this.internal.Point,je=this.internal.Rectangle,Ve=this.internal.Matrix,Ze=new Qe}]);var en=function(xn){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var qn=xn;Object.defineProperty(this,"pdf",{get:function(){return qn}});var $n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return $n},set:function(Hn){$n=!!Hn}});var Ai=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ai},set:function(Hn){Ai=!!Hn}});var Ti=0;Object.defineProperty(this,"posX",{get:function(){return Ti},set:function(Hn){isNaN(Hn)||(Ti=Hn)}});var Kn=0;Object.defineProperty(this,"posY",{get:function(){return Kn},set:function(Hn){isNaN(Hn)||(Kn=Hn)}}),Object.defineProperty(this,"margin",{get:function(){return Ze.margin},set:function(Hn){var Fn;typeof Hn=="number"?Fn=[Hn,Hn,Hn,Hn]:((Fn=new Array(4))[0]=Hn[0],Fn[1]=Hn.length>=2?Hn[1]:Fn[0],Fn[2]=Hn.length>=3?Hn[2]:Fn[0],Fn[3]=Hn.length>=4?Hn[3]:Fn[1]),Ze.margin=Fn}});var Ii=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ii},set:function(Hn){Ii=Hn}});var Pi=0;Object.defineProperty(this,"lastBreak",{get:function(){return Pi},set:function(Hn){Pi=Hn}});var Mi=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Mi},set:function(Hn){Mi=Hn}}),Object.defineProperty(this,"ctx",{get:function(){return Ze},set:function(Hn){Hn instanceof Qe&&(Ze=Hn)}}),Object.defineProperty(this,"path",{get:function(){return Ze.path},set:function(Hn){Ze.path=Hn}});var tr=[];Object.defineProperty(this,"ctxStack",{get:function(){return tr},set:function(Hn){tr=Hn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Hn){var Fn;Fn=tn(Hn),this.ctx.fillStyle=Fn.style,this.ctx.isFillTransparent=Fn.a===0,this.ctx.fillOpacity=Fn.a,this.pdf.setFillColor(Fn.r,Fn.g,Fn.b,{a:Fn.a}),this.pdf.setTextColor(Fn.r,Fn.g,Fn.b,{a:Fn.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Hn){var Fn=tn(Hn);this.ctx.strokeStyle=Fn.style,this.ctx.isStrokeTransparent=Fn.a===0,this.ctx.strokeOpacity=Fn.a,Fn.a===0?this.pdf.setDrawColor(255,255,255):(Fn.a,this.pdf.setDrawColor(Fn.r,Fn.g,Fn.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Hn){["butt","round","square"].indexOf(Hn)!==-1&&(this.ctx.lineCap=Hn,this.pdf.setLineCap(Hn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Hn){isNaN(Hn)||(this.ctx.lineWidth=Hn,this.pdf.setLineWidth(Hn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Hn){["bevel","round","miter"].indexOf(Hn)!==-1&&(this.ctx.lineJoin=Hn,this.pdf.setLineJoin(Hn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Hn){isNaN(Hn)||(this.ctx.miterLimit=Hn,this.pdf.setMiterLimit(Hn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Hn){this.ctx.textBaseline=Hn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Hn){["right","end","center","left","start"].indexOf(Hn)!==-1&&(this.ctx.textAlign=Hn)}});var Br=null;function Un(Hn,Fn){if(Br===null){var Hi=function(zi){var Oi=[];return Object.keys(zi).forEach(function(Vi){zi[Vi].forEach(function(Bi){var Fi=null;switch(Bi){case"bold":Fi={family:Vi,weight:"bold"};break;case"italic":Fi={family:Vi,style:"italic"};break;case"bolditalic":Fi={family:Vi,weight:"bold",style:"italic"};break;case"":case"normal":Fi={family:Vi}}Fi!==null&&(Fi.ref={name:Vi,style:Bi},Oi.push(Fi))})}),Oi}(Hn.getFontList());Br=function(zi){for(var Oi={},Vi=0;Vi<zi.length;++Vi){var Bi=jt(zi[Vi]),Fi=Bi.family,Si=Bi.stretch,Li=Bi.style,Ri=Bi.weight;Oi[Fi]=Oi[Fi]||{},Oi[Fi][Si]=Oi[Fi][Si]||{},Oi[Fi][Si][Li]=Oi[Fi][Si][Li]||{},Oi[Fi][Si][Li][Ri]=Bi}return Oi}(Hi.concat(Fn))}return Br}var Qn=null;Object.defineProperty(this,"fontFaces",{get:function(){return Qn},set:function(Hn){Br=null,Qn=Hn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Hn){var Fn;if(this.ctx.font=Hn,(Fn=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Hn))!==null){var Hi=Fn[1],zi=(Fn[2],Fn[3]),Oi=Fn[4],Vi=(Fn[5],Fn[6]),Bi=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Oi)[2];Oi=Math.floor(Bi==="px"?parseFloat(Oi)*this.pdf.internal.scaleFactor:Bi==="em"?parseFloat(Oi)*this.pdf.getFontSize():parseFloat(Oi)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Oi);var Fi=function(Rr){var Gs,Pr,no=[],Zs=Rr.trim();if(Zs==="")return Wt;if(Zs in Mt)return[Mt[Zs]];for(;Zs!=="";){switch(Pr=null,Gs=(Zs=Dt(Zs)).charAt(0)){case'"':case"'":Pr=Rt(Zs.substring(1),Gs);break;default:Pr=Tt(Zs)}if(Pr===null||(no.push(Pr[0]),(Zs=Dt(Pr[1]))!==""&&Zs.charAt(0)!==","))return Wt;Zs=Zs.replace(/^,/,"")}return no}(Vi);if(this.fontFaces){var Si=qt(Un(this.pdf,this.fontFaces),Fi.map(function(Rr){return{family:Rr,stretch:"normal",weight:zi,style:Hi}}));this.pdf.setFont(Si.ref.name,Si.ref.style)}else{var Li="";(zi==="bold"||parseInt(zi,10)>=700||Hi==="bold")&&(Li="bold"),Hi==="italic"&&(Li+="italic"),Li.length===0&&(Li="normal");for(var Ri="",$i={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},er=0;er<Fi.length;er++){if(this.pdf.internal.getFont(Fi[er],Li,{noFallback:!0,disableWarning:!0})!==void 0){Ri=Fi[er];break}if(Li==="bolditalic"&&this.pdf.internal.getFont(Fi[er],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ri=Fi[er],Li="bold";else if(this.pdf.internal.getFont(Fi[er],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ri=Fi[er],Li="normal";break}}if(Ri===""){for(var ar=0;ar<Fi.length;ar++)if($i[Fi[ar]]){Ri=$i[Fi[ar]];break}}Ri=Ri===""?"Times":Ri,this.pdf.setFont(Ri,Li)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Hn){this.ctx.globalCompositeOperation=Hn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Hn){this.ctx.globalAlpha=Hn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Hn){this.ctx.lineDashOffset=Hn,Ki.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Hn){this.ctx.lineDash=Hn,Ki.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Hn){this.ctx.ignoreClearRect=!!Hn}})};en.prototype.setLineDash=function(xn){this.lineDash=xn},en.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},en.prototype.fill=function(){yn.call(this,"fill",!1)},en.prototype.stroke=function(){yn.call(this,"stroke",!1)},en.prototype.beginPath=function(){this.path=[{type:"begin"}]},en.prototype.moveTo=function(xn,qn){if(isNaN(xn)||isNaN(qn))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var $n=this.ctx.transform.applyToPoint(new Be(xn,qn));this.path.push({type:"mt",x:$n.x,y:$n.y}),this.ctx.lastPoint=new Be(xn,qn)},en.prototype.closePath=function(){var xn=new Be(0,0),qn=0;for(qn=this.path.length-1;qn!==-1;qn--)if(this.path[qn].type==="begin"&&_typeof(this.path[qn+1])==="object"&&typeof this.path[qn+1].x=="number"){xn=new Be(this.path[qn+1].x,this.path[qn+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new Be(xn.x,xn.y)},en.prototype.lineTo=function(xn,qn){if(isNaN(xn)||isNaN(qn))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var $n=this.ctx.transform.applyToPoint(new Be(xn,qn));this.path.push({type:"lt",x:$n.x,y:$n.y}),this.ctx.lastPoint=new Be($n.x,$n.y)},en.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),yn.call(this,null,!0)},en.prototype.quadraticCurveTo=function(xn,qn,$n,Ai){if(isNaN($n)||isNaN(Ai)||isNaN(xn)||isNaN(qn))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Ti=this.ctx.transform.applyToPoint(new Be($n,Ai)),Kn=this.ctx.transform.applyToPoint(new Be(xn,qn));this.path.push({type:"qct",x1:Kn.x,y1:Kn.y,x:Ti.x,y:Ti.y}),this.ctx.lastPoint=new Be(Ti.x,Ti.y)},en.prototype.bezierCurveTo=function(xn,qn,$n,Ai,Ti,Kn){if(isNaN(Ti)||isNaN(Kn)||isNaN(xn)||isNaN(qn)||isNaN($n)||isNaN(Ai))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ii=this.ctx.transform.applyToPoint(new Be(Ti,Kn)),Pi=this.ctx.transform.applyToPoint(new Be(xn,qn)),Mi=this.ctx.transform.applyToPoint(new Be($n,Ai));this.path.push({type:"bct",x1:Pi.x,y1:Pi.y,x2:Mi.x,y2:Mi.y,x:Ii.x,y:Ii.y}),this.ctx.lastPoint=new Be(Ii.x,Ii.y)},en.prototype.arc=function(xn,qn,$n,Ai,Ti,Kn){if(isNaN(xn)||isNaN(qn)||isNaN($n)||isNaN(Ai)||isNaN(Ti))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Kn=!!Kn,!this.ctx.transform.isIdentity){var Ii=this.ctx.transform.applyToPoint(new Be(xn,qn));xn=Ii.x,qn=Ii.y;var Pi=this.ctx.transform.applyToPoint(new Be(0,$n)),Mi=this.ctx.transform.applyToPoint(new Be(0,0));$n=Math.sqrt(Math.pow(Pi.x-Mi.x,2)+Math.pow(Pi.y-Mi.y,2))}Math.abs(Ti-Ai)>=2*Math.PI&&(Ai=0,Ti=2*Math.PI),this.path.push({type:"arc",x:xn,y:qn,radius:$n,startAngle:Ai,endAngle:Ti,counterclockwise:Kn})},en.prototype.arcTo=function(xn,qn,$n,Ai,Ti){throw new Error("arcTo not implemented.")},en.prototype.rect=function(xn,qn,$n,Ai){if(isNaN(xn)||isNaN(qn)||isNaN($n)||isNaN(Ai))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(xn,qn),this.lineTo(xn+$n,qn),this.lineTo(xn+$n,qn+Ai),this.lineTo(xn,qn+Ai),this.lineTo(xn,qn),this.lineTo(xn+$n,qn),this.lineTo(xn,qn)},en.prototype.fillRect=function(xn,qn,$n,Ai){if(isNaN(xn)||isNaN(qn)||isNaN($n)||isNaN(Ai))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!an.call(this)){var Ti={};this.lineCap!=="butt"&&(Ti.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Ti.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(xn,qn,$n,Ai),this.fill(),Ti.hasOwnProperty("lineCap")&&(this.lineCap=Ti.lineCap),Ti.hasOwnProperty("lineJoin")&&(this.lineJoin=Ti.lineJoin)}},en.prototype.strokeRect=function(xn,qn,$n,Ai){if(isNaN(xn)||isNaN(qn)||isNaN($n)||isNaN(Ai))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");cn.call(this)||(this.beginPath(),this.rect(xn,qn,$n,Ai),this.stroke())},en.prototype.clearRect=function(xn,qn,$n,Ai){if(isNaN(xn)||isNaN(qn)||isNaN($n)||isNaN(Ai))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(xn,qn,$n,Ai))},en.prototype.save=function(xn){xn=typeof xn!="boolean"||xn;for(var qn=this.pdf.internal.getCurrentPageInfo().pageNumber,$n=0;$n<this.pdf.internal.getNumberOfPages();$n++)this.pdf.setPage($n+1),this.pdf.internal.out("q");if(this.pdf.setPage(qn),xn){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ai=new Qe(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ai}},en.prototype.restore=function(xn){xn=typeof xn!="boolean"||xn;for(var qn=this.pdf.internal.getCurrentPageInfo().pageNumber,$n=0;$n<this.pdf.internal.getNumberOfPages();$n++)this.pdf.setPage($n+1),this.pdf.internal.out("Q");this.pdf.setPage(qn),xn&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},en.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var tn=function(xn){var qn,$n,Ai,Ti;if(xn.isCanvasGradient===!0&&(xn=xn.getColor()),!xn)return{r:0,g:0,b:0,a:0,style:xn};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(xn))qn=0,$n=0,Ai=0,Ti=0;else{var Kn=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(xn);if(Kn!==null)qn=parseInt(Kn[1]),$n=parseInt(Kn[2]),Ai=parseInt(Kn[3]),Ti=1;else if((Kn=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(xn))!==null)qn=parseInt(Kn[1]),$n=parseInt(Kn[2]),Ai=parseInt(Kn[3]),Ti=parseFloat(Kn[4]);else{if(Ti=1,typeof xn=="string"&&xn.charAt(0)!=="#"){var Ii=new f(xn);xn=Ii.ok?Ii.toHex():"#000000"}xn.length===4?(qn=xn.substring(1,2),qn+=qn,$n=xn.substring(2,3),$n+=$n,Ai=xn.substring(3,4),Ai+=Ai):(qn=xn.substring(1,3),$n=xn.substring(3,5),Ai=xn.substring(5,7)),qn=parseInt(qn,16),$n=parseInt($n,16),Ai=parseInt(Ai,16)}}return{r:qn,g:$n,b:Ai,a:Ti,style:xn}},an=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},cn=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};en.prototype.fillText=function(xn,qn,$n,Ai){if(isNaN(qn)||isNaN($n)||typeof xn!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ai=isNaN(Ai)?void 0:Ai,!an.call(this)){var Ti=Dn(this.ctx.transform.rotation),Kn=this.ctx.transform.scaleX;An.call(this,{text:xn,x:qn,y:$n,scale:Kn,angle:Ti,align:this.textAlign,maxWidth:Ai})}},en.prototype.strokeText=function(xn,qn,$n,Ai){if(isNaN(qn)||isNaN($n)||typeof xn!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!cn.call(this)){Ai=isNaN(Ai)?void 0:Ai;var Ti=Dn(this.ctx.transform.rotation),Kn=this.ctx.transform.scaleX;An.call(this,{text:xn,x:qn,y:$n,scale:Kn,renderingMode:"stroke",angle:Ti,align:this.textAlign,maxWidth:Ai})}},en.prototype.measureText=function(xn){if(typeof xn!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var qn=this.pdf,$n=this.pdf.internal.scaleFactor,Ai=qn.internal.getFontSize(),Ti=qn.getStringUnitWidth(xn)*Ai/qn.internal.scaleFactor,Kn=function(Ii){var Pi=(Ii=Ii||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Pi}}),this};return new Kn({width:Ti*=Math.round(96*$n/72*1e4)/1e4})},en.prototype.scale=function(xn,qn){if(isNaN(xn)||isNaN(qn))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var $n=new Ve(xn,0,0,qn,0,0);this.ctx.transform=this.ctx.transform.multiply($n)},en.prototype.rotate=function(xn){if(isNaN(xn))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var qn=new Ve(Math.cos(xn),Math.sin(xn),-Math.sin(xn),Math.cos(xn),0,0);this.ctx.transform=this.ctx.transform.multiply(qn)},en.prototype.translate=function(xn,qn){if(isNaN(xn)||isNaN(qn))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var $n=new Ve(1,0,0,1,xn,qn);this.ctx.transform=this.ctx.transform.multiply($n)},en.prototype.transform=function(xn,qn,$n,Ai,Ti,Kn){if(isNaN(xn)||isNaN(qn)||isNaN($n)||isNaN(Ai)||isNaN(Ti)||isNaN(Kn))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ii=new Ve(xn,qn,$n,Ai,Ti,Kn);this.ctx.transform=this.ctx.transform.multiply(Ii)},en.prototype.setTransform=function(xn,qn,$n,Ai,Ti,Kn){xn=isNaN(xn)?1:xn,qn=isNaN(qn)?0:qn,$n=isNaN($n)?0:$n,Ai=isNaN(Ai)?1:Ai,Ti=isNaN(Ti)?0:Ti,Kn=isNaN(Kn)?0:Kn,this.ctx.transform=new Ve(xn,qn,$n,Ai,Ti,Kn)};var dn=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};en.prototype.drawImage=function(xn,qn,$n,Ai,Ti,Kn,Ii,Pi,Mi){var tr=this.pdf.getImageProperties(xn),Br=1,Un=1,Qn=1,Hn=1;Ai!==void 0&&Pi!==void 0&&(Qn=Pi/Ai,Hn=Mi/Ti,Br=tr.width/Ai*Pi/Ai,Un=tr.height/Ti*Mi/Ti),Kn===void 0&&(Kn=qn,Ii=$n,qn=0,$n=0),Ai!==void 0&&Pi===void 0&&(Pi=Ai,Mi=Ti),Ai===void 0&&Pi===void 0&&(Pi=tr.width,Mi=tr.height);for(var Fn,Hi=this.ctx.transform.decompose(),zi=Dn(Hi.rotate.shx),Oi=new Ve,Vi=(Oi=(Oi=(Oi=Oi.multiply(Hi.translate)).multiply(Hi.skew)).multiply(Hi.scale)).applyToRectangle(new je(Kn-qn*Qn,Ii-$n*Hn,Ai*Br,Ti*Un)),Bi=hn.call(this,Vi),Fi=[],Si=0;Si<Bi.length;Si+=1)Fi.indexOf(Bi[Si])===-1&&Fi.push(Bi[Si]);if(mn(Fi),this.autoPaging)for(var Li=Fi[0],Ri=Fi[Fi.length-1],$i=Li;$i<Ri+1;$i++){this.pdf.setPage($i);var er=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],ar=$i===1?this.posY+this.margin[0]:this.margin[0],Rr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Gs=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Pr=$i===1?0:Rr+($i-2)*Gs;if(this.ctx.clip_path.length!==0){var no=this.path;Fn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=pn(Fn,this.posX+this.margin[3],-Pr+ar+this.ctx.prevPageLastElemOffset),Cn.call(this,"fill",!0),this.path=no}var Zs=JSON.parse(JSON.stringify(Vi));Zs=pn([Zs],this.posX+this.margin[3],-Pr+ar+this.ctx.prevPageLastElemOffset)[0];var ho=($i>Li||$i<Ri)&&dn.call(this);ho&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],er,Gs,null).clip().discardPath()),this.pdf.addImage(xn,"JPEG",Zs.x,Zs.y,Zs.w,Zs.h,null,null,zi),ho&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(xn,"JPEG",Vi.x,Vi.y,Vi.w,Vi.h,null,null,zi)};var hn=function(xn,qn,$n){var Ai=[];qn=qn||this.pdf.internal.pageSize.width,$n=$n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Ti=this.posY+this.ctx.prevPageLastElemOffset;switch(xn.type){default:case"mt":case"lt":Ai.push(Math.floor((xn.y+Ti)/$n)+1);break;case"arc":Ai.push(Math.floor((xn.y+Ti-xn.radius)/$n)+1),Ai.push(Math.floor((xn.y+Ti+xn.radius)/$n)+1);break;case"qct":var Kn=Ci(this.ctx.lastPoint.x,this.ctx.lastPoint.y,xn.x1,xn.y1,xn.x,xn.y);Ai.push(Math.floor((Kn.y+Ti)/$n)+1),Ai.push(Math.floor((Kn.y+Kn.h+Ti)/$n)+1);break;case"bct":var Ii=Jn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,xn.x1,xn.y1,xn.x2,xn.y2,xn.x,xn.y);Ai.push(Math.floor((Ii.y+Ti)/$n)+1),Ai.push(Math.floor((Ii.y+Ii.h+Ti)/$n)+1);break;case"rect":Ai.push(Math.floor((xn.y+Ti)/$n)+1),Ai.push(Math.floor((xn.y+xn.h+Ti)/$n)+1)}for(var Pi=0;Pi<Ai.length;Pi+=1)for(;this.pdf.internal.getNumberOfPages()<Ai[Pi];)fn.call(this);return Ai},fn=function(){var xn=this.fillStyle,qn=this.strokeStyle,$n=this.font,Ai=this.lineCap,Ti=this.lineWidth,Kn=this.lineJoin;this.pdf.addPage(),this.fillStyle=xn,this.strokeStyle=qn,this.font=$n,this.lineCap=Ai,this.lineWidth=Ti,this.lineJoin=Kn},pn=function(xn,qn,$n){for(var Ai=0;Ai<xn.length;Ai++)switch(xn[Ai].type){case"bct":xn[Ai].x2+=qn,xn[Ai].y2+=$n;case"qct":xn[Ai].x1+=qn,xn[Ai].y1+=$n;case"mt":case"lt":case"arc":default:xn[Ai].x+=qn,xn[Ai].y+=$n}return xn},mn=function(xn){return xn.sort(function(qn,$n){return qn-$n})},yn=function(xn,qn){for(var $n,Ai,Ti=this.fillStyle,Kn=this.strokeStyle,Ii=this.lineCap,Pi=this.lineWidth,Mi=Math.abs(Pi*this.ctx.transform.scaleX),tr=this.lineJoin,Br=JSON.parse(JSON.stringify(this.path)),Un=JSON.parse(JSON.stringify(this.path)),Qn=[],Hn=0;Hn<Un.length;Hn++)if(Un[Hn].x!==void 0)for(var Fn=hn.call(this,Un[Hn]),Hi=0;Hi<Fn.length;Hi+=1)Qn.indexOf(Fn[Hi])===-1&&Qn.push(Fn[Hi]);for(var zi=0;zi<Qn.length;zi++)for(;this.pdf.internal.getNumberOfPages()<Qn[zi];)fn.call(this);if(mn(Qn),this.autoPaging)for(var Oi=Qn[0],Vi=Qn[Qn.length-1],Bi=Oi;Bi<Vi+1;Bi++){this.pdf.setPage(Bi),this.fillStyle=Ti,this.strokeStyle=Kn,this.lineCap=Ii,this.lineWidth=Mi,this.lineJoin=tr;var Fi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Si=Bi===1?this.posY+this.margin[0]:this.margin[0],Li=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ri=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$i=Bi===1?0:Li+(Bi-2)*Ri;if(this.ctx.clip_path.length!==0){var er=this.path;$n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=pn($n,this.posX+this.margin[3],-$i+Si+this.ctx.prevPageLastElemOffset),Cn.call(this,xn,!0),this.path=er}if(Ai=JSON.parse(JSON.stringify(Br)),this.path=pn(Ai,this.posX+this.margin[3],-$i+Si+this.ctx.prevPageLastElemOffset),qn===!1||Bi===0){var ar=(Bi>Oi||Bi<Vi)&&dn.call(this);ar&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fi,Ri,null).clip().discardPath()),Cn.call(this,xn,qn),ar&&this.pdf.restoreGraphicsState()}this.lineWidth=Pi}else this.lineWidth=Mi,Cn.call(this,xn,qn),this.lineWidth=Pi;this.path=Br},Cn=function(xn,qn){if((xn!=="stroke"||qn||!cn.call(this))&&(xn==="stroke"||qn||!an.call(this))){for(var $n,Ai,Ti=[],Kn=this.path,Ii=0;Ii<Kn.length;Ii++){var Pi=Kn[Ii];switch(Pi.type){case"begin":Ti.push({begin:!0});break;case"close":Ti.push({close:!0});break;case"mt":Ti.push({start:Pi,deltas:[],abs:[]});break;case"lt":var Mi=Ti.length;if(Kn[Ii-1]&&!isNaN(Kn[Ii-1].x)&&($n=[Pi.x-Kn[Ii-1].x,Pi.y-Kn[Ii-1].y],Mi>0)){for(;Mi>=0;Mi--)if(Ti[Mi-1].close!==!0&&Ti[Mi-1].begin!==!0){Ti[Mi-1].deltas.push($n),Ti[Mi-1].abs.push(Pi);break}}break;case"bct":$n=[Pi.x1-Kn[Ii-1].x,Pi.y1-Kn[Ii-1].y,Pi.x2-Kn[Ii-1].x,Pi.y2-Kn[Ii-1].y,Pi.x-Kn[Ii-1].x,Pi.y-Kn[Ii-1].y],Ti[Ti.length-1].deltas.push($n);break;case"qct":var tr=Kn[Ii-1].x+2/3*(Pi.x1-Kn[Ii-1].x),Br=Kn[Ii-1].y+2/3*(Pi.y1-Kn[Ii-1].y),Un=Pi.x+2/3*(Pi.x1-Pi.x),Qn=Pi.y+2/3*(Pi.y1-Pi.y),Hn=Pi.x,Fn=Pi.y;$n=[tr-Kn[Ii-1].x,Br-Kn[Ii-1].y,Un-Kn[Ii-1].x,Qn-Kn[Ii-1].y,Hn-Kn[Ii-1].x,Fn-Kn[Ii-1].y],Ti[Ti.length-1].deltas.push($n);break;case"arc":Ti.push({deltas:[],abs:[],arc:!0}),Array.isArray(Ti[Ti.length-1].abs)&&Ti[Ti.length-1].abs.push(Pi)}}Ai=qn?null:xn==="stroke"?"stroke":"fill";for(var Hi=!1,zi=0;zi<Ti.length;zi++)if(Ti[zi].arc)for(var Oi=Ti[zi].abs,Vi=0;Vi<Oi.length;Vi++){var Bi=Oi[Vi];Bi.type==="arc"?Sn.call(this,Bi.x,Bi.y,Bi.radius,Bi.startAngle,Bi.endAngle,Bi.counterclockwise,void 0,qn,!Hi):Ln.call(this,Bi.x,Bi.y),Hi=!0}else if(Ti[zi].close===!0)this.pdf.internal.out("h"),Hi=!1;else if(Ti[zi].begin!==!0){var Fi=Ti[zi].start.x,Si=Ti[zi].start.y;Rn.call(this,Ti[zi].deltas,Fi,Si),Hi=!0}Ai&&Mn.call(this,Ai),qn&&Tn.call(this)}},wn=function(xn){var qn=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,$n=qn*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return xn-$n;case"top":return xn+qn-$n;case"hanging":return xn+qn-2*$n;case"middle":return xn+qn/2-$n;case"ideographic":return xn;case"alphabetic":default:return xn}},bn=function(xn){return xn+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};en.prototype.createLinearGradient=function(){var xn=function(){};return xn.colorStops=[],xn.addColorStop=function(qn,$n){this.colorStops.push([qn,$n])},xn.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},xn.isCanvasGradient=!0,xn},en.prototype.createPattern=function(){return this.createLinearGradient()},en.prototype.createRadialGradient=function(){return this.createLinearGradient()};var Sn=function(xn,qn,$n,Ai,Ti,Kn,Ii,Pi,Mi){for(var tr=Nn.call(this,$n,Ai,Ti,Kn),Br=0;Br<tr.length;Br++){var Un=tr[Br];Br===0&&(Mi?En.call(this,Un.x1+xn,Un.y1+qn):Ln.call(this,Un.x1+xn,Un.y1+qn)),Gn.call(this,xn,qn,Un.x2,Un.y2,Un.x3,Un.y3,Un.x4,Un.y4)}Pi?Tn.call(this):Mn.call(this,Ii)},Mn=function(xn){switch(xn){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Tn=function(){this.pdf.clip(),this.pdf.discardPath()},En=function(xn,qn){this.pdf.internal.out(t(xn)+" "+ke(qn)+" m")},An=function(xn){var qn;switch(xn.align){case"right":case"end":qn="right";break;case"center":qn="center";break;case"left":case"start":default:qn="left"}var $n=this.pdf.getTextDimensions(xn.text),Ai=wn.call(this,xn.y),Ti=bn.call(this,Ai)-$n.h,Kn=this.ctx.transform.applyToPoint(new Be(xn.x,Ai)),Ii=this.ctx.transform.decompose(),Pi=new Ve;Pi=(Pi=(Pi=Pi.multiply(Ii.translate)).multiply(Ii.skew)).multiply(Ii.scale);for(var Mi,tr,Br,Un=this.ctx.transform.applyToRectangle(new je(xn.x,Ai,$n.w,$n.h)),Qn=Pi.applyToRectangle(new je(xn.x,Ti,$n.w,$n.h)),Hn=hn.call(this,Qn),Fn=[],Hi=0;Hi<Hn.length;Hi+=1)Fn.indexOf(Hn[Hi])===-1&&Fn.push(Hn[Hi]);if(mn(Fn),this.autoPaging)for(var zi=Fn[0],Oi=Fn[Fn.length-1],Vi=zi;Vi<Oi+1;Vi++){this.pdf.setPage(Vi);var Bi=Vi===1?this.posY+this.margin[0]:this.margin[0],Fi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Si=this.pdf.internal.pageSize.height-this.margin[2],Li=Si-this.margin[0],Ri=this.pdf.internal.pageSize.width-this.margin[1],$i=Ri-this.margin[3],er=Vi===1?0:Fi+(Vi-2)*Li;if(this.ctx.clip_path.length!==0){var ar=this.path;Mi=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=pn(Mi,this.posX+this.margin[3],-1*er+Bi),Cn.call(this,"fill",!0),this.path=ar}var Rr=pn([JSON.parse(JSON.stringify(Qn))],this.posX+this.margin[3],-er+Bi+this.ctx.prevPageLastElemOffset)[0];xn.scale>=.01&&(tr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(tr*xn.scale),Br=this.lineWidth,this.lineWidth=Br*xn.scale);var Gs=this.autoPaging!=="text";if(Gs||Rr.y+Rr.h<=Si){if(Gs||Rr.y>=Bi&&Rr.x<=Ri){var Pr=Gs?xn.text:this.pdf.splitTextToSize(xn.text,xn.maxWidth||Ri-Rr.x)[0],no=pn([JSON.parse(JSON.stringify(Un))],this.posX+this.margin[3],-er+Bi+this.ctx.prevPageLastElemOffset)[0],Zs=Gs&&(Vi>zi||Vi<Oi)&&dn.call(this);Zs&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$i,Li,null).clip().discardPath()),this.pdf.text(Pr,no.x,no.y,{angle:xn.angle,align:qn,renderingMode:xn.renderingMode}),Zs&&this.pdf.restoreGraphicsState()}}else Rr.y<Si&&(this.ctx.prevPageLastElemOffset+=Si-Rr.y);xn.scale>=.01&&(this.pdf.setFontSize(tr),this.lineWidth=Br)}else xn.scale>=.01&&(tr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(tr*xn.scale),Br=this.lineWidth,this.lineWidth=Br*xn.scale),this.pdf.text(xn.text,Kn.x+this.posX,Kn.y+this.posY,{angle:xn.angle,align:qn,renderingMode:xn.renderingMode,maxWidth:xn.maxWidth}),xn.scale>=.01&&(this.pdf.setFontSize(tr),this.lineWidth=Br)},Ln=function(xn,qn,$n,Ai){$n=$n||0,Ai=Ai||0,this.pdf.internal.out(t(xn+$n)+" "+ke(qn+Ai)+" l")},Rn=function(xn,qn,$n){return this.pdf.lines(xn,qn,$n,null,null)},Gn=function(xn,qn,$n,Ai,Ti,Kn,Ii,Pi){this.pdf.internal.out([e(Oe($n+xn)),e(Ge(Ai+qn)),e(Oe(Ti+xn)),e(Ge(Kn+qn)),e(Oe(Ii+xn)),e(Ge(Pi+qn)),"c"].join(" "))},Nn=function(xn,qn,$n,Ai){for(var Ti=2*Math.PI,Kn=Math.PI/2;qn>$n;)qn-=Ti;var Ii=Math.abs($n-qn);Ii<Ti&&Ai&&(Ii=Ti-Ii);for(var Pi=[],Mi=Ai?-1:1,tr=qn;Ii>1e-5;){var Br=tr+Mi*Math.min(Ii,Kn);Pi.push(jn.call(this,xn,tr,Br)),Ii-=Math.abs(Br-tr),tr=Br}return Pi},jn=function(xn,qn,$n){var Ai=($n-qn)/2,Ti=xn*Math.cos(Ai),Kn=xn*Math.sin(Ai),Ii=Ti,Pi=-Kn,Mi=Ii*Ii+Pi*Pi,tr=Mi+Ii*Ti+Pi*Kn,Br=4/3*(Math.sqrt(2*Mi*tr)-tr)/(Ii*Kn-Pi*Ti),Un=Ii-Br*Pi,Qn=Pi+Br*Ii,Hn=Un,Fn=-Qn,Hi=Ai+qn,zi=Math.cos(Hi),Oi=Math.sin(Hi);return{x1:xn*Math.cos(qn),y1:xn*Math.sin(qn),x2:Un*zi-Qn*Oi,y2:Un*Oi+Qn*zi,x3:Hn*zi-Fn*Oi,y3:Hn*Oi+Fn*zi,x4:xn*Math.cos($n),y4:xn*Math.sin($n)}},Dn=function(xn){return 180*xn/Math.PI},Ci=function(xn,qn,$n,Ai,Ti,Kn){var Ii=xn+.5*($n-xn),Pi=qn+.5*(Ai-qn),Mi=Ti+.5*($n-Ti),tr=Kn+.5*(Ai-Kn),Br=Math.min(xn,Ti,Ii,Mi),Un=Math.max(xn,Ti,Ii,Mi),Qn=Math.min(qn,Kn,Pi,tr),Hn=Math.max(qn,Kn,Pi,tr);return new je(Br,Qn,Un-Br,Hn-Qn)},Jn=function(xn,qn,$n,Ai,Ti,Kn,Ii,Pi){var Mi,tr,Br,Un,Qn,Hn,Fn,Hi,zi,Oi,Vi,Bi,Fi,Si,Li=$n-xn,Ri=Ai-qn,$i=Ti-$n,er=Kn-Ai,ar=Ii-Ti,Rr=Pi-Kn;for(tr=0;tr<41;tr++)zi=(Fn=(Br=xn+(Mi=tr/40)*Li)+Mi*((Qn=$n+Mi*$i)-Br))+Mi*(Qn+Mi*(Ti+Mi*ar-Qn)-Fn),Oi=(Hi=(Un=qn+Mi*Ri)+Mi*((Hn=Ai+Mi*er)-Un))+Mi*(Hn+Mi*(Kn+Mi*Rr-Hn)-Hi),tr==0?(Vi=zi,Bi=Oi,Fi=zi,Si=Oi):(Vi=Math.min(Vi,zi),Bi=Math.min(Bi,Oi),Fi=Math.max(Fi,zi),Si=Math.max(Si,Oi));return new je(Math.round(Vi),Math.round(Bi),Math.round(Fi-Vi),Math.round(Si-Bi))},Ki=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var xn,qn,$n=(xn=this.ctx.lineDash,qn=this.ctx.lineDashOffset,JSON.stringify({lineDash:xn,lineDashOffset:qn}));this.prevLineDash!==$n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=$n)}}})(E.API),function(r){var e=function(Ge){var Be,je,Ve,Ze,Qe,en,tn,an,cn,dn;for(je=[],Ve=0,Ze=(Ge+=Be="\0\0\0\0".slice(Ge.length%4||4)).length;Ze>Ve;Ve+=4)(Qe=(Ge.charCodeAt(Ve)<<24)+(Ge.charCodeAt(Ve+1)<<16)+(Ge.charCodeAt(Ve+2)<<8)+Ge.charCodeAt(Ve+3))!==0?(en=(Qe=((Qe=((Qe=((Qe=(Qe-(dn=Qe%85))/85)-(cn=Qe%85))/85)-(an=Qe%85))/85)-(tn=Qe%85))/85)%85,je.push(en+33,tn+33,an+33,cn+33,dn+33)):je.push(122);return function(hn,fn){for(var pn=fn;pn>0;pn--)hn.pop()}(je,Be.length),String.fromCharCode.apply(String,je)+"~>"},t=function(Ge){var Be,je,Ve,Ze,Qe,en=String,tn="length",an=255,cn="charCodeAt",dn="slice",hn="replace";for(Ge[dn](-2),Ge=Ge[dn](0,-2)[hn](/\s/g,"")[hn]("z","!!!!!"),Ve=[],Ze=0,Qe=(Ge+=Be="uuuuu"[dn](Ge[tn]%5||5))[tn];Qe>Ze;Ze+=5)je=52200625*(Ge[cn](Ze)-33)+614125*(Ge[cn](Ze+1)-33)+7225*(Ge[cn](Ze+2)-33)+85*(Ge[cn](Ze+3)-33)+(Ge[cn](Ze+4)-33),Ve.push(an&je>>24,an&je>>16,an&je>>8,an&je);return function(fn,pn){for(var mn=pn;mn>0;mn--)fn.pop()}(Ve,Be[tn]),en.fromCharCode.apply(en,Ve)},ke=function(Ge){var Be=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Ge=Ge.replace(/\s/g,"")).indexOf(">")!==-1&&(Ge=Ge.substr(0,Ge.indexOf(">"))),Ge.length%2&&(Ge+="0"),Be.test(Ge)===!1)return"";for(var je="",Ve=0;Ve<Ge.length;Ve+=2)je+=String.fromCharCode("0x"+(Ge[Ve]+Ge[Ve+1]));return je},Oe=function(Ge){for(var Be=new Uint8Array(Ge.length),je=Ge.length;je--;)Be[je]=Ge.charCodeAt(je);return Ge=(Be=zlibSync(Be)).reduce(function(Ve,Ze){return Ve+String.fromCharCode(Ze)},"")};r.processDataByFilters=function(Ge,Be){var je=0,Ve=Ge||"",Ze=[];for(typeof(Be=Be||[])=="string"&&(Be=[Be]),je=0;je<Be.length;je+=1)switch(Be[je]){case"ASCII85Decode":case"/ASCII85Decode":Ve=t(Ve),Ze.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Ve=e(Ve),Ze.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Ve=ke(Ve),Ze.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Ve=Ve.split("").map(function(Qe){return("0"+Qe.charCodeAt().toString(16)).slice(-2)}).join("")+">",Ze.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Ve=Oe(Ve),Ze.push("/FlateDecode");break;default:throw new Error('The filter: "'+Be[je]+'" is not implemented')}return{data:Ve,reverseChain:Ze.reverse().join(" ")}}}(E.API),function(r){r.loadFile=function(e,t,ke){return function(Oe,Ge,Be){Ge=Ge!==!1,Be=typeof Be=="function"?Be:function(){};var je=void 0;try{je=function(Ve,Ze,Qe){var en=new XMLHttpRequest,tn=0,an=function(cn){var dn=cn.length,hn=[],fn=String.fromCharCode;for(tn=0;tn<dn;tn+=1)hn.push(fn(255&cn.charCodeAt(tn)));return hn.join("")};if(en.open("GET",Ve,!Ze),en.overrideMimeType("text/plain; charset=x-user-defined"),Ze===!1&&(en.onload=function(){en.status===200?Qe(an(this.responseText)):Qe(void 0)}),en.send(null),Ze&&en.status===200)return an(en.responseText)}(Oe,Ge,Be)}catch{}return je}(e,t,ke)},r.loadImageFile=r.loadFile}(E.API),function(r){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(Be){return Promise.reject(new Error("Could not load html2canvas: "+Be))}).then(function(Be){return Be.default?Be.default:Be})}function t(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(Be){return Promise.reject(new Error("Could not load dompurify: "+Be))}).then(function(Be){return Be.default?Be.default:Be})}var ke=function(Be){var je=_typeof(Be);return je==="undefined"?"undefined":je==="string"||Be instanceof String?"string":je==="number"||Be instanceof Number?"number":je==="function"||Be instanceof Function?"function":Be&&Be.constructor===Array?"array":Be&&Be.nodeType===1?"element":je==="object"?"object":"unknown"},Oe=function(Be,je){var Ve=document.createElement(Be);for(var Ze in je.className&&(Ve.className=je.className),je.innerHTML&&je.dompurify&&(Ve.innerHTML=je.dompurify.sanitize(je.innerHTML)),je.style)Ve.style[Ze]=je.style[Ze];return Ve},Ge=function Be(je){var Ve=Object.assign(Be.convert(Promise.resolve()),JSON.parse(JSON.stringify(Be.template))),Ze=Be.convert(Promise.resolve(),Ve);return Ze=(Ze=Ze.setProgress(1,Be,1,[Be])).set(je)};(Ge.prototype=Object.create(Promise.prototype)).constructor=Ge,Ge.convert=function(Be,je){return Be.__proto__=je||Ge.prototype,Be},Ge.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Ge.prototype.from=function(Be,je){return this.then(function(){switch(je=je||function(Ve){switch(ke(Ve)){case"string":return"string";case"element":return Ve.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(Be)){case"string":return this.then(t).then(function(Ve){return this.set({src:Oe("div",{innerHTML:Be,dompurify:Ve})})});case"element":return this.set({src:Be});case"canvas":return this.set({canvas:Be});case"img":return this.set({img:Be});default:return this.error("Unknown source type.")}})},Ge.prototype.to=function(Be){switch(Be){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Ge.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var Be={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},je=function Ve(Ze,Qe){for(var en=Ze.nodeType===3?document.createTextNode(Ze.nodeValue):Ze.cloneNode(!1),tn=Ze.firstChild;tn;tn=tn.nextSibling)Qe!==!0&&tn.nodeType===1&&tn.nodeName==="SCRIPT"||en.appendChild(Ve(tn,Qe));return Ze.nodeType===1&&(Ze.nodeName==="CANVAS"?(en.width=Ze.width,en.height=Ze.height,en.getContext("2d").drawImage(Ze,0,0)):Ze.nodeName!=="TEXTAREA"&&Ze.nodeName!=="SELECT"||(en.value=Ze.value),en.addEventListener("load",function(){en.scrollTop=Ze.scrollTop,en.scrollLeft=Ze.scrollLeft},!0)),en}(this.prop.src,this.opt.html2canvas.javascriptEnabled);je.tagName==="BODY"&&(Be.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Oe("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Oe("div",{className:"html2pdf__container",style:Be}),this.prop.container.appendChild(je),this.prop.container.firstChild.appendChild(Oe("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Ge.prototype.toCanvas=function(){var Be=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Be).then(e).then(function(je){var Ve=Object.assign({},this.opt.html2canvas);return delete Ve.onrendered,je(this.prop.container,Ve)}).then(function(je){(this.opt.html2canvas.onrendered||function(){})(je),this.prop.canvas=je,document.body.removeChild(this.prop.overlay)})},Ge.prototype.toContext2d=function(){var Be=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(Be).then(e).then(function(je){var Ve=this.opt.jsPDF,Ze=this.opt.fontFaces,Qe=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,en=Object.assign({async:!0,allowTaint:!0,scale:Qe,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete en.onrendered,Ve.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Ve.context2d.posX=this.opt.x,Ve.context2d.posY=this.opt.y,Ve.context2d.margin=this.opt.margin,Ve.context2d.fontFaces=Ze,Ze)for(var tn=0;tn<Ze.length;++tn){var an=Ze[tn],cn=an.src.find(function(dn){return dn.format==="truetype"});cn&&Ve.addFont(cn.url,an.ref.name,an.ref.style)}return en.windowHeight=en.windowHeight||0,en.windowHeight=en.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):en.windowHeight,Ve.context2d.save(!0),je(this.prop.container,en)}).then(function(je){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(je),this.prop.canvas=je,document.body.removeChild(this.prop.overlay)})},Ge.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var Be=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=Be})},Ge.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Ge.prototype.output=function(Be,je,Ve){return(Ve=Ve||"pdf").toLowerCase()==="img"||Ve.toLowerCase()==="image"?this.outputImg(Be,je):this.outputPdf(Be,je)},Ge.prototype.outputPdf=function(Be,je){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(Be,je)})},Ge.prototype.outputImg=function(Be){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(Be){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+Be+'" is not supported.'}})},Ge.prototype.save=function(Be){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(Be?{filename:Be}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Ge.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Ge.prototype.set=function(Be){if(ke(Be)!=="object")return this;var je=Object.keys(Be||{}).map(function(Ve){if(Ve in Ge.template.prop)return function(){this.prop[Ve]=Be[Ve]};switch(Ve){case"margin":return this.setMargin.bind(this,Be.margin);case"jsPDF":return function(){return this.opt.jsPDF=Be.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,Be.pageSize);default:return function(){this.opt[Ve]=Be[Ve]}}},this);return this.then(function(){return this.thenList(je)})},Ge.prototype.get=function(Be,je){return this.then(function(){var Ve=Be in Ge.template.prop?this.prop[Be]:this.opt[Be];return je?je(Ve):Ve})},Ge.prototype.setMargin=function(Be){return this.then(function(){switch(ke(Be)){case"number":Be=[Be,Be,Be,Be];case"array":if(Be.length===2&&(Be=[Be[0],Be[1],Be[0],Be[1]]),Be.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=Be}).then(this.setPageSize)},Ge.prototype.setPageSize=function(Be){function je(Ve,Ze){return Math.floor(Ve*Ze/72*96)}return this.then(function(){(Be=Be||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(Be.inner={width:Be.width-this.opt.margin[1]-this.opt.margin[3],height:Be.height-this.opt.margin[0]-this.opt.margin[2]},Be.inner.px={width:je(Be.inner.width,Be.k),height:je(Be.inner.height,Be.k)},Be.inner.ratio=Be.inner.height/Be.inner.width),this.prop.pageSize=Be})},Ge.prototype.setProgress=function(Be,je,Ve,Ze){return Be!=null&&(this.progress.val=Be),je!=null&&(this.progress.state=je),Ve!=null&&(this.progress.n=Ve),Ze!=null&&(this.progress.stack=Ze),this.progress.ratio=this.progress.val/this.progress.state,this},Ge.prototype.updateProgress=function(Be,je,Ve,Ze){return this.setProgress(Be?this.progress.val+Be:null,je||null,Ve?this.progress.n+Ve:null,Ze?this.progress.stack.concat(Ze):null)},Ge.prototype.then=function(Be,je){var Ve=this;return this.thenCore(Be,je,function(Ze,Qe){return Ve.updateProgress(null,null,1,[Ze]),Promise.prototype.then.call(this,function(en){return Ve.updateProgress(null,Ze),en}).then(Ze,Qe).then(function(en){return Ve.updateProgress(1),en})})},Ge.prototype.thenCore=function(Be,je,Ve){Ve=Ve||Promise.prototype.then,Be&&(Be=Be.bind(this)),je&&(je=je.bind(this));var Ze=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Ge.convert(Object.assign({},this),Promise.prototype),Qe=Ve.call(Ze,Be,je);return Ge.convert(Qe,this.__proto__)},Ge.prototype.thenExternal=function(Be,je){return Promise.prototype.then.call(this,Be,je)},Ge.prototype.thenList=function(Be){var je=this;return Be.forEach(function(Ve){je=je.thenCore(Ve)}),je},Ge.prototype.catch=function(Be){Be&&(Be=Be.bind(this));var je=Promise.prototype.catch.call(this,Be);return Ge.convert(je,this)},Ge.prototype.catchExternal=function(Be){return Promise.prototype.catch.call(this,Be)},Ge.prototype.error=function(Be){return this.then(function(){throw new Error(Be)})},Ge.prototype.using=Ge.prototype.set,Ge.prototype.saveAs=Ge.prototype.save,Ge.prototype.export=Ge.prototype.output,Ge.prototype.run=Ge.prototype.then,E.getPageSize=function(Be,je,Ve){if(_typeof(Be)==="object"){var Ze=Be;Be=Ze.orientation,je=Ze.unit||je,Ve=Ze.format||Ve}je=je||"mm",Ve=Ve||"a4",Be=(""+(Be||"P")).toLowerCase();var Qe,en=(""+Ve).toLowerCase(),tn={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(je){case"pt":Qe=1;break;case"mm":Qe=72/25.4;break;case"cm":Qe=72/2.54;break;case"in":Qe=72;break;case"px":Qe=.75;break;case"pc":case"em":Qe=12;break;case"ex":Qe=6;break;default:throw"Invalid unit: "+je}var an,cn=0,dn=0;if(tn.hasOwnProperty(en))cn=tn[en][1]/Qe,dn=tn[en][0]/Qe;else try{cn=Ve[1],dn=Ve[0]}catch{throw new Error("Invalid format: "+Ve)}if(Be==="p"||Be==="portrait")Be="p",dn>cn&&(an=dn,dn=cn,cn=an);else{if(Be!=="l"&&Be!=="landscape")throw"Invalid orientation: "+Be;Be="l",cn>dn&&(an=dn,dn=cn,cn=an)}return{width:dn,height:cn,unit:je,k:Qe,orientation:Be}},r.html=function(Be,je){(je=je||{}).callback=je.callback||function(){},je.html2canvas=je.html2canvas||{},je.html2canvas.canvas=je.html2canvas.canvas||this.canvas,je.jsPDF=je.jsPDF||this,je.fontFaces=je.fontFaces?je.fontFaces.map(jt):null;var Ve=new Ge(je);return je.worker?Ve:Ve.from(Be).doCallback()}}(E.API),E.API.addJS=function(r){return Ht=r,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(r){var e;r.events.push(["postPutResources",function(){var t=this,ke=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Oe=t.outline.render().split(/\r\n/),Ge=0;Ge<Oe.length;Ge++){var Be=Oe[Ge],je=ke.exec(Be);if(je!=null){var Ve=je[1];t.internal.newObjectDeferredBegin(Ve,!1)}t.internal.write(Be)}if(this.outline.createNamedDestinations){var Ze=this.internal.pages.length,Qe=[];for(Ge=0;Ge<Ze;Ge++){var en=t.internal.newObject();Qe.push(en);var tn=t.internal.getPageInfo(Ge+1);t.internal.write("<< /D["+tn.objId+" 0 R /XYZ null null null]>> endobj")}var an=t.internal.newObject();for(t.internal.write("<< /Names [ "),Ge=0;Ge<Qe.length;Ge++)t.internal.write("(page_"+(Ge+1)+")"+Qe[Ge]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+an+" 0 R"),t.internal.write(">>","endobj")}}]),r.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),r.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(ke,Oe,Ge){var Be={title:Oe,options:Ge,children:[]};return ke==null&&(ke=this.root),ke.children.push(Be),Be},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(ke){ke.id=t.internal.newObjectDeferred();for(var Oe=0;Oe<ke.children.length;Oe++)this.genIds_r(ke.children[Oe])},t.outline.renderRoot=function(ke){this.objStart(ke),this.line("/Type /Outlines"),ke.children.length>0&&(this.line("/First "+this.makeRef(ke.children[0])),this.line("/Last "+this.makeRef(ke.children[ke.children.length-1]))),this.line("/Count "+this.count_r({count:0},ke)),this.objEnd()},t.outline.renderItems=function(ke){for(var Oe=this.ctx.pdf.internal.getVerticalCoordinateString,Ge=0;Ge<ke.children.length;Ge++){var Be=ke.children[Ge];this.objStart(Be),this.line("/Title "+this.makeString(Be.title)),this.line("/Parent "+this.makeRef(ke)),Ge>0&&this.line("/Prev "+this.makeRef(ke.children[Ge-1])),Ge<ke.children.length-1&&this.line("/Next "+this.makeRef(ke.children[Ge+1])),Be.children.length>0&&(this.line("/First "+this.makeRef(Be.children[0])),this.line("/Last "+this.makeRef(Be.children[Be.children.length-1])));var je=this.count=this.count_r({count:0},Be);if(je>0&&this.line("/Count "+je),Be.options&&Be.options.pageNumber){var Ve=t.internal.getPageInfo(Be.options.pageNumber);this.line("/Dest ["+Ve.objId+" 0 R /XYZ 0 "+Oe(0)+" 0]")}this.objEnd()}for(var Ze=0;Ze<ke.children.length;Ze++)this.renderItems(ke.children[Ze])},t.outline.line=function(ke){this.ctx.val+=ke+`\r
`},t.outline.makeRef=function(ke){return ke.id+" 0 R"},t.outline.makeString=function(ke){return"("+t.internal.pdfEscape(ke)+")"},t.outline.objStart=function(ke){this.ctx.val+=`\r
`+ke.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(ke,Oe){for(var Ge=0;Ge<Oe.children.length;Ge++)ke.count++,this.count_r(ke,Oe.children[Ge]);return ke.count}}])}(E.API),function(r){var e=[192,193,194,195,196,197,198,199];r.processJPEG=function(t,ke,Oe,Ge,Be,je){var Ve,Ze=this.decode.DCT_DECODE,Qe=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=Be||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(Ve=function(en){for(var tn,an=256*en.charCodeAt(4)+en.charCodeAt(5),cn=en.length,dn={width:0,height:0,numcomponents:1},hn=4;hn<cn;hn+=2){if(hn+=an,e.indexOf(en.charCodeAt(hn+1))!==-1){tn=256*en.charCodeAt(hn+5)+en.charCodeAt(hn+6),dn={width:256*en.charCodeAt(hn+7)+en.charCodeAt(hn+8),height:tn,numcomponents:en.charCodeAt(hn+9)};break}an=256*en.charCodeAt(hn+2)+en.charCodeAt(hn+3)}return dn}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:je=this.color_spaces.DEVICE_GRAY;break;case 4:je=this.color_spaces.DEVICE_CMYK;break;case 3:je=this.color_spaces.DEVICE_RGB}Qe={data:t,width:Ve.width,height:Ve.height,colorSpace:je,bitsPerComponent:8,filter:Ze,index:ke,alias:Oe}}return Qe}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var r,e,t;function ke(Ge){var Be,je,Ve,Ze,Qe,en,tn,an,cn,dn,hn,fn,pn,mn;for(this.data=Ge,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},en=null;;){switch(Be=this.readUInt32(),cn=(function(){var yn,Cn;for(Cn=[],yn=0;yn<4;++yn)Cn.push(String.fromCharCode(this.data[this.pos++]));return Cn}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(Be);break;case"fcTL":en&&this.animation.frames.push(en),this.pos+=4,en={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},Qe=this.readUInt16(),Ze=this.readUInt16()||100,en.delay=1e3*Qe/Ze,en.disposeOp=this.data[this.pos++],en.blendOp=this.data[this.pos++],en.data=[];break;case"IDAT":case"fdAT":for(cn==="fdAT"&&(this.pos+=4,Be-=4),Ge=(en!=null?en.data:void 0)||this.imgData,fn=0;0<=Be?fn<Be:fn>Be;0<=Be?++fn:--fn)Ge.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Ve=this.palette.length/3,this.transparency.indexed=this.read(Be),this.transparency.indexed.length>Ve)throw new Error("More transparent colors than palette size");if((dn=Ve-this.transparency.indexed.length)>0)for(pn=0;0<=dn?pn<dn:pn>dn;0<=dn?++pn:--pn)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(Be)[0];break;case 2:this.transparency.rgb=this.read(Be)}break;case"tEXt":tn=(hn=this.read(Be)).indexOf(0),an=String.fromCharCode.apply(String,hn.slice(0,tn)),this.text[an]=String.fromCharCode.apply(String,hn.slice(tn+1));break;case"IEND":return en&&this.animation.frames.push(en),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(mn=this.colorType)===4||mn===6,je=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*je,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=Be}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}ke.prototype.read=function(Ge){var Be,je;for(je=[],Be=0;0<=Ge?Be<Ge:Be>Ge;0<=Ge?++Be:--Be)je.push(this.data[this.pos++]);return je},ke.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},ke.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},ke.prototype.decodePixels=function(Ge){var Be=this.pixelBitlength/8,je=new Uint8Array(this.width*this.height*Be),Ve=0,Ze=this;if(Ge==null&&(Ge=this.imgData),Ge.length===0)return new Uint8Array(0);function Qe(en,tn,an,cn){var dn,hn,fn,pn,mn,yn,Cn,wn,bn,Sn,Mn,Tn,En,An,Ln,Rn,Gn,Nn,jn,Dn,Ci,Jn=Math.ceil((Ze.width-en)/an),Ki=Math.ceil((Ze.height-tn)/cn),xn=Ze.width==Jn&&Ze.height==Ki;for(An=Be*Jn,Tn=xn?je:new Uint8Array(An*Ki),yn=Ge.length,En=0,hn=0;En<Ki&&Ve<yn;){switch(Ge[Ve++]){case 0:for(pn=Gn=0;Gn<An;pn=Gn+=1)Tn[hn++]=Ge[Ve++];break;case 1:for(pn=Nn=0;Nn<An;pn=Nn+=1)dn=Ge[Ve++],mn=pn<Be?0:Tn[hn-Be],Tn[hn++]=(dn+mn)%256;break;case 2:for(pn=jn=0;jn<An;pn=jn+=1)dn=Ge[Ve++],fn=(pn-pn%Be)/Be,Ln=En&&Tn[(En-1)*An+fn*Be+pn%Be],Tn[hn++]=(Ln+dn)%256;break;case 3:for(pn=Dn=0;Dn<An;pn=Dn+=1)dn=Ge[Ve++],fn=(pn-pn%Be)/Be,mn=pn<Be?0:Tn[hn-Be],Ln=En&&Tn[(En-1)*An+fn*Be+pn%Be],Tn[hn++]=(dn+Math.floor((mn+Ln)/2))%256;break;case 4:for(pn=Ci=0;Ci<An;pn=Ci+=1)dn=Ge[Ve++],fn=(pn-pn%Be)/Be,mn=pn<Be?0:Tn[hn-Be],En===0?Ln=Rn=0:(Ln=Tn[(En-1)*An+fn*Be+pn%Be],Rn=fn&&Tn[(En-1)*An+(fn-1)*Be+pn%Be]),Cn=mn+Ln-Rn,wn=Math.abs(Cn-mn),Sn=Math.abs(Cn-Ln),Mn=Math.abs(Cn-Rn),bn=wn<=Sn&&wn<=Mn?mn:Sn<=Mn?Ln:Rn,Tn[hn++]=(dn+bn)%256;break;default:throw new Error("Invalid filter algorithm: "+Ge[Ve-1])}if(!xn){var qn=((tn+En*cn)*Ze.width+en)*Be,$n=En*An;for(pn=0;pn<Jn;pn+=1){for(var Ai=0;Ai<Be;Ai+=1)je[qn++]=Tn[$n++];qn+=(an-1)*Be}}En++}}return Ge=unzlibSync(Ge),Ze.interlaceMethod==1?(Qe(0,0,8,8),Qe(4,0,8,8),Qe(0,4,4,8),Qe(2,0,4,4),Qe(0,2,2,4),Qe(1,0,2,2),Qe(0,1,1,2)):Qe(0,0,1,1),je},ke.prototype.decodePalette=function(){var Ge,Be,je,Ve,Ze,Qe,en,tn,an;for(je=this.palette,Qe=this.transparency.indexed||[],Ze=new Uint8Array((Qe.length||0)+je.length),Ve=0,Ge=0,Be=en=0,tn=je.length;en<tn;Be=en+=3)Ze[Ve++]=je[Be],Ze[Ve++]=je[Be+1],Ze[Ve++]=je[Be+2],Ze[Ve++]=(an=Qe[Ge++])!=null?an:255;return Ze},ke.prototype.copyToImageData=function(Ge,Be){var je,Ve,Ze,Qe,en,tn,an,cn,dn,hn,fn;if(Ve=this.colors,dn=null,je=this.hasAlphaChannel,this.palette.length&&(dn=(fn=this._decodedPalette)!=null?fn:this._decodedPalette=this.decodePalette(),Ve=4,je=!0),cn=(Ze=Ge.data||Ge).length,en=dn||Be,Qe=tn=0,Ve===1)for(;Qe<cn;)an=dn?4*Be[Qe/4]:tn,hn=en[an++],Ze[Qe++]=hn,Ze[Qe++]=hn,Ze[Qe++]=hn,Ze[Qe++]=je?en[an++]:255,tn=an;else for(;Qe<cn;)an=dn?4*Be[Qe/4]:tn,Ze[Qe++]=en[an++],Ze[Qe++]=en[an++],Ze[Qe++]=en[an++],Ze[Qe++]=je?en[an++]:255,tn=an},ke.prototype.decode=function(){var Ge;return Ge=new Uint8Array(this.width*this.height*4),this.copyToImageData(Ge,this.decodePixels()),Ge};var Oe=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return Oe(),r=function(Ge){var Be;if(Oe()===!0)return t.width=Ge.width,t.height=Ge.height,t.clearRect(0,0,Ge.width,Ge.height),t.putImageData(Ge,0,0),(Be=new Image).src=e.toDataURL(),Be;throw new Error("This method requires a Browser with Canvas-capability.")},ke.prototype.decodeFrames=function(Ge){var Be,je,Ve,Ze,Qe,en,tn,an;if(this.animation){for(an=[],je=Qe=0,en=(tn=this.animation.frames).length;Qe<en;je=++Qe)Be=tn[je],Ve=Ge.createImageData(Be.width,Be.height),Ze=this.decodePixels(new Uint8Array(Be.data)),this.copyToImageData(Ve,Ze),Be.imageData=Ve,an.push(Be.image=r(Ve));return an}},ke.prototype.renderFrame=function(Ge,Be){var je,Ve,Ze;return je=(Ve=this.animation.frames)[Be],Ze=Ve[Be-1],Be===0&&Ge.clearRect(0,0,this.width,this.height),(Ze!=null?Ze.disposeOp:void 0)===1?Ge.clearRect(Ze.xOffset,Ze.yOffset,Ze.width,Ze.height):(Ze!=null?Ze.disposeOp:void 0)===2&&Ge.putImageData(Ze.imageData,Ze.xOffset,Ze.yOffset),je.blendOp===0&&Ge.clearRect(je.xOffset,je.yOffset,je.width,je.height),Ge.drawImage(je.image,je.xOffset,je.yOffset)},ke.prototype.animate=function(Ge){var Be,je,Ve,Ze,Qe,en,tn=this;return je=0,en=this.animation,Ze=en.numFrames,Ve=en.frames,Qe=en.numPlays,(Be=function(){var an,cn;if(an=je++%Ze,cn=Ve[an],tn.renderFrame(Ge,an),Ze>1&&je/Ze<Qe)return tn.animation._timeout=setTimeout(Be,cn.delay)})()},ke.prototype.stopAnimation=function(){var Ge;return clearTimeout((Ge=this.animation)!=null?Ge._timeout:void 0)},ke.prototype.render=function(Ge){var Be,je;return Ge._png&&Ge._png.stopAnimation(),Ge._png=this,Ge.width=this.width,Ge.height=this.height,Be=Ge.getContext("2d"),this.animation?(this.decodeFrames(Be),this.animate(Be)):(je=Be.createImageData(this.width,this.height),this.copyToImageData(je,this.decodePixels()),Be.putImageData(je,0,0))},ke}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(r){var e=0;if(r[e++]!==71||r[e++]!==73||r[e++]!==70||r[e++]!==56||(r[e++]+1&253)!=56||r[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=r[e++]|r[e++]<<8,ke=r[e++]|r[e++]<<8,Oe=r[e++],Ge=Oe>>7,Be=1<<(7&Oe)+1;r[e++],r[e++];var je=null,Ve=null;Ge&&(je=e,Ve=Be,e+=3*Be);var Ze=!0,Qe=[],en=0,tn=null,an=0,cn=null;for(this.width=t,this.height=ke;Ze&&e<r.length;)switch(r[e++]){case 33:switch(r[e++]){case 255:if(r[e]!==11||r[e+1]==78&&r[e+2]==69&&r[e+3]==84&&r[e+4]==83&&r[e+5]==67&&r[e+6]==65&&r[e+7]==80&&r[e+8]==69&&r[e+9]==50&&r[e+10]==46&&r[e+11]==48&&r[e+12]==3&&r[e+13]==1&&r[e+16]==0)e+=14,cn=r[e++]|r[e++]<<8,e++;else for(e+=12;;){if(!((En=r[e++])>=0))throw Error("Invalid block size");if(En===0)break;e+=En}break;case 249:if(r[e++]!==4||r[e+4]!==0)throw new Error("Invalid graphics extension block.");var dn=r[e++];en=r[e++]|r[e++]<<8,tn=r[e++],!(1&dn)&&(tn=null),an=dn>>2&7,e++;break;case 254:for(;;){if(!((En=r[e++])>=0))throw Error("Invalid block size");if(En===0)break;e+=En}break;default:throw new Error("Unknown graphic control label: 0x"+r[e-1].toString(16))}break;case 44:var hn=r[e++]|r[e++]<<8,fn=r[e++]|r[e++]<<8,pn=r[e++]|r[e++]<<8,mn=r[e++]|r[e++]<<8,yn=r[e++],Cn=yn>>6&1,wn=1<<(7&yn)+1,bn=je,Sn=Ve,Mn=!1;yn>>7&&(Mn=!0,bn=e,Sn=wn,e+=3*wn);var Tn=e;for(e++;;){var En;if(!((En=r[e++])>=0))throw Error("Invalid block size");if(En===0)break;e+=En}Qe.push({x:hn,y:fn,width:pn,height:mn,has_local_palette:Mn,palette_offset:bn,palette_size:Sn,data_offset:Tn,data_length:e-Tn,transparent_index:tn,interlaced:!!Cn,delay:en,disposal:an});break;case 59:Ze=!1;break;default:throw new Error("Unknown gif block: 0x"+r[e-1].toString(16))}this.numFrames=function(){return Qe.length},this.loopCount=function(){return cn},this.frameInfo=function(An){if(An<0||An>=Qe.length)throw new Error("Frame index out of range.");return Qe[An]},this.decodeAndBlitFrameBGRA=function(An,Ln){var Rn=this.frameInfo(An),Gn=Rn.width*Rn.height,Nn=new Uint8Array(Gn);$t(r,Rn.data_offset,Nn,Gn);var jn=Rn.palette_offset,Dn=Rn.transparent_index;Dn===null&&(Dn=256);var Ci=Rn.width,Jn=t-Ci,Ki=Ci,xn=4*(Rn.y*t+Rn.x),qn=4*((Rn.y+Rn.height)*t+Rn.x),$n=xn,Ai=4*Jn;Rn.interlaced===!0&&(Ai+=4*t*7);for(var Ti=8,Kn=0,Ii=Nn.length;Kn<Ii;++Kn){var Pi=Nn[Kn];if(Ki===0&&(Ki=Ci,($n+=Ai)>=qn&&(Ai=4*Jn+4*t*(Ti-1),$n=xn+(Ci+Jn)*(Ti<<1),Ti>>=1)),Pi===Dn)$n+=4;else{var Mi=r[jn+3*Pi],tr=r[jn+3*Pi+1],Br=r[jn+3*Pi+2];Ln[$n++]=Br,Ln[$n++]=tr,Ln[$n++]=Mi,Ln[$n++]=255}--Ki}},this.decodeAndBlitFrameRGBA=function(An,Ln){var Rn=this.frameInfo(An),Gn=Rn.width*Rn.height,Nn=new Uint8Array(Gn);$t(r,Rn.data_offset,Nn,Gn);var jn=Rn.palette_offset,Dn=Rn.transparent_index;Dn===null&&(Dn=256);var Ci=Rn.width,Jn=t-Ci,Ki=Ci,xn=4*(Rn.y*t+Rn.x),qn=4*((Rn.y+Rn.height)*t+Rn.x),$n=xn,Ai=4*Jn;Rn.interlaced===!0&&(Ai+=4*t*7);for(var Ti=8,Kn=0,Ii=Nn.length;Kn<Ii;++Kn){var Pi=Nn[Kn];if(Ki===0&&(Ki=Ci,($n+=Ai)>=qn&&(Ai=4*Jn+4*t*(Ti-1),$n=xn+(Ci+Jn)*(Ti<<1),Ti>>=1)),Pi===Dn)$n+=4;else{var Mi=r[jn+3*Pi],tr=r[jn+3*Pi+1],Br=r[jn+3*Pi+2];Ln[$n++]=Mi,Ln[$n++]=tr,Ln[$n++]=Br,Ln[$n++]=255}--Ki}}}function $t(r,e,t,ke){for(var Oe=r[e++],Ge=1<<Oe,Be=Ge+1,je=Be+1,Ve=Oe+1,Ze=(1<<Ve)-1,Qe=0,en=0,tn=0,an=r[e++],cn=new Int32Array(4096),dn=null;;){for(;Qe<16&&an!==0;)en|=r[e++]<<Qe,Qe+=8,an===1?an=r[e++]:--an;if(Qe<Ve)break;var hn=en&Ze;if(en>>=Ve,Qe-=Ve,hn!==Ge){if(hn===Be)break;for(var fn=hn<je?hn:dn,pn=0,mn=fn;mn>Ge;)mn=cn[mn]>>8,++pn;var yn=mn;if(tn+pn+(fn!==hn?1:0)>ke)return void a.log("Warning, gif stream longer than expected.");t[tn++]=yn;var Cn=tn+=pn;for(fn!==hn&&(t[tn++]=yn),mn=fn;pn--;)mn=cn[mn],t[--Cn]=255&mn,mn>>=8;dn!==null&&je<4096&&(cn[je++]=dn<<8|yn,je>=Ze+1&&Ve<12&&(++Ve,Ze=Ze<<1|1)),dn=hn}else je=Be+1,Ze=(1<<(Ve=Oe+1))-1,dn=null}return tn!==ke&&a.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(r){var e,t,ke,Oe,Ge,Be=Math.floor,je=new Array(64),Ve=new Array(64),Ze=new Array(64),Qe=new Array(64),en=new Array(65535),tn=new Array(65535),an=new Array(64),cn=new Array(64),dn=[],hn=0,fn=7,pn=new Array(64),mn=new Array(64),yn=new Array(64),Cn=new Array(256),wn=new Array(2048),bn=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],Sn=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Mn=[0,1,2,3,4,5,6,7,8,9,10,11],Tn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],En=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],An=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Ln=[0,1,2,3,4,5,6,7,8,9,10,11],Rn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Gn=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Nn(xn,qn){for(var $n=0,Ai=0,Ti=new Array,Kn=1;Kn<=16;Kn++){for(var Ii=1;Ii<=xn[Kn];Ii++)Ti[qn[Ai]]=[],Ti[qn[Ai]][0]=$n,Ti[qn[Ai]][1]=Kn,Ai++,$n++;$n*=2}return Ti}function jn(xn){for(var qn=xn[0],$n=xn[1]-1;$n>=0;)qn&1<<$n&&(hn|=1<<fn),$n--,--fn<0&&(hn==255?(Dn(255),Dn(0)):Dn(hn),fn=7,hn=0)}function Dn(xn){dn.push(xn)}function Ci(xn){Dn(xn>>8&255),Dn(255&xn)}function Jn(xn,qn,$n,Ai,Ti){for(var Kn,Ii=Ti[0],Pi=Ti[240],Mi=function(Oi,Vi){var Bi,Fi,Si,Li,Ri,$i,er,ar,Rr,Gs,Pr=0;for(Rr=0;Rr<8;++Rr){Bi=Oi[Pr],Fi=Oi[Pr+1],Si=Oi[Pr+2],Li=Oi[Pr+3],Ri=Oi[Pr+4],$i=Oi[Pr+5],er=Oi[Pr+6];var no=Bi+(ar=Oi[Pr+7]),Zs=Bi-ar,ho=Fi+er,co=Fi-er,Ws=Si+$i,oo=Si-$i,to=Li+Ri,mo=Li-Ri,ao=no+to,jo=no-to,na=ho+Ws,yo=ho-Ws;Oi[Pr]=ao+na,Oi[Pr+4]=ao-na;var io=.707106781*(yo+jo);Oi[Pr+2]=jo+io,Oi[Pr+6]=jo-io;var so=.382683433*((ao=mo+oo)-(yo=co+Zs)),$a=.5411961*ao+so,ko=1.306562965*yo+so,Aa=.707106781*(na=oo+co),uo=Zs+Aa,eo=Zs-Aa;Oi[Pr+5]=eo+$a,Oi[Pr+3]=eo-$a,Oi[Pr+1]=uo+ko,Oi[Pr+7]=uo-ko,Pr+=8}for(Pr=0,Rr=0;Rr<8;++Rr){Bi=Oi[Pr],Fi=Oi[Pr+8],Si=Oi[Pr+16],Li=Oi[Pr+24],Ri=Oi[Pr+32],$i=Oi[Pr+40],er=Oi[Pr+48];var Oa=Bi+(ar=Oi[Pr+56]),qo=Bi-ar,Fo=Fi+er,Oo=Fi-er,ta=Si+$i,ra=Si-$i,ac=Li+Ri,Za=Li-Ri,Pl=Oa+ac,nc=Oa-ac,Tl=Fo+ta,ja=Fo-ta;Oi[Pr]=Pl+Tl,Oi[Pr+32]=Pl-Tl;var Va=.707106781*(ja+nc);Oi[Pr+16]=nc+Va,Oi[Pr+48]=nc-Va;var Ec=.382683433*((Pl=Za+ra)-(ja=Oo+qo)),Jc=.5411961*Pl+Ec,uu=1.306562965*ja+Ec,du=.707106781*(Tl=ra+Oo),hu=qo+du,fu=qo-du;Oi[Pr+40]=fu+Jc,Oi[Pr+24]=fu-Jc,Oi[Pr+8]=hu+uu,Oi[Pr+56]=hu-uu,Pr++}for(Rr=0;Rr<64;++Rr)Gs=Oi[Rr]*Vi[Rr],an[Rr]=Gs>0?Gs+.5|0:Gs-.5|0;return an}(xn,qn),tr=0;tr<64;++tr)cn[bn[tr]]=Mi[tr];var Br=cn[0]-$n;$n=cn[0],Br==0?jn(Ai[0]):(jn(Ai[tn[Kn=32767+Br]]),jn(en[Kn]));for(var Un=63;Un>0&&cn[Un]==0;)Un--;if(Un==0)return jn(Ii),$n;for(var Qn,Hn=1;Hn<=Un;){for(var Fn=Hn;cn[Hn]==0&&Hn<=Un;)++Hn;var Hi=Hn-Fn;if(Hi>=16){Qn=Hi>>4;for(var zi=1;zi<=Qn;++zi)jn(Pi);Hi&=15}Kn=32767+cn[Hn],jn(Ti[(Hi<<4)+tn[Kn]]),jn(en[Kn]),Hn++}return Un!=63&&jn(Ii),$n}function Ki(xn){xn=Math.min(Math.max(xn,1),100),Ge!=xn&&(function(qn){for(var $n=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ai=0;Ai<64;Ai++){var Ti=Be(($n[Ai]*qn+50)/100);Ti=Math.min(Math.max(Ti,1),255),je[bn[Ai]]=Ti}for(var Kn=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ii=0;Ii<64;Ii++){var Pi=Be((Kn[Ii]*qn+50)/100);Pi=Math.min(Math.max(Pi,1),255),Ve[bn[Ii]]=Pi}for(var Mi=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],tr=0,Br=0;Br<8;Br++)for(var Un=0;Un<8;Un++)Ze[tr]=1/(je[bn[tr]]*Mi[Br]*Mi[Un]*8),Qe[tr]=1/(Ve[bn[tr]]*Mi[Br]*Mi[Un]*8),tr++}(xn<50?Math.floor(5e3/xn):Math.floor(200-2*xn)),Ge=xn)}this.encode=function(xn,qn){qn&&Ki(qn),dn=new Array,hn=0,fn=7,Ci(65496),Ci(65504),Ci(16),Dn(74),Dn(70),Dn(73),Dn(70),Dn(0),Dn(1),Dn(1),Dn(0),Ci(1),Ci(1),Dn(0),Dn(0),function(){Ci(65499),Ci(132),Dn(0);for(var Fi=0;Fi<64;Fi++)Dn(je[Fi]);Dn(1);for(var Si=0;Si<64;Si++)Dn(Ve[Si])}(),function(Fi,Si){Ci(65472),Ci(17),Dn(8),Ci(Si),Ci(Fi),Dn(3),Dn(1),Dn(17),Dn(0),Dn(2),Dn(17),Dn(1),Dn(3),Dn(17),Dn(1)}(xn.width,xn.height),function(){Ci(65476),Ci(418),Dn(0);for(var Fi=0;Fi<16;Fi++)Dn(Sn[Fi+1]);for(var Si=0;Si<=11;Si++)Dn(Mn[Si]);Dn(16);for(var Li=0;Li<16;Li++)Dn(Tn[Li+1]);for(var Ri=0;Ri<=161;Ri++)Dn(En[Ri]);Dn(1);for(var $i=0;$i<16;$i++)Dn(An[$i+1]);for(var er=0;er<=11;er++)Dn(Ln[er]);Dn(17);for(var ar=0;ar<16;ar++)Dn(Rn[ar+1]);for(var Rr=0;Rr<=161;Rr++)Dn(Gn[Rr])}(),Ci(65498),Ci(12),Dn(3),Dn(1),Dn(0),Dn(2),Dn(17),Dn(3),Dn(17),Dn(0),Dn(63),Dn(0);var $n=0,Ai=0,Ti=0;hn=0,fn=7,this.encode.displayName="_encode_";for(var Kn,Ii,Pi,Mi,tr,Br,Un,Qn,Hn,Fn=xn.data,Hi=xn.width,zi=xn.height,Oi=4*Hi,Vi=0;Vi<zi;){for(Kn=0;Kn<Oi;){for(tr=Oi*Vi+Kn,Un=-1,Qn=0,Hn=0;Hn<64;Hn++)Br=tr+(Qn=Hn>>3)*Oi+(Un=4*(7&Hn)),Vi+Qn>=zi&&(Br-=Oi*(Vi+1+Qn-zi)),Kn+Un>=Oi&&(Br-=Kn+Un-Oi+4),Ii=Fn[Br++],Pi=Fn[Br++],Mi=Fn[Br++],pn[Hn]=(wn[Ii]+wn[Pi+256>>0]+wn[Mi+512>>0]>>16)-128,mn[Hn]=(wn[Ii+768>>0]+wn[Pi+1024>>0]+wn[Mi+1280>>0]>>16)-128,yn[Hn]=(wn[Ii+1280>>0]+wn[Pi+1536>>0]+wn[Mi+1792>>0]>>16)-128;$n=Jn(pn,Ze,$n,e,ke),Ai=Jn(mn,Qe,Ai,t,Oe),Ti=Jn(yn,Qe,Ti,t,Oe),Kn+=32}Vi+=8}if(fn>=0){var Bi=[];Bi[1]=fn+1,Bi[0]=(1<<fn+1)-1,jn(Bi)}return Ci(65497),new Uint8Array(dn)},r=r||50,function(){for(var xn=String.fromCharCode,qn=0;qn<256;qn++)Cn[qn]=xn(qn)}(),e=Nn(Sn,Mn),t=Nn(An,Ln),ke=Nn(Tn,En),Oe=Nn(Rn,Gn),function(){for(var xn=1,qn=2,$n=1;$n<=15;$n++){for(var Ai=xn;Ai<qn;Ai++)tn[32767+Ai]=$n,en[32767+Ai]=[],en[32767+Ai][1]=$n,en[32767+Ai][0]=Ai;for(var Ti=-(qn-1);Ti<=-xn;Ti++)tn[32767+Ti]=$n,en[32767+Ti]=[],en[32767+Ti][1]=$n,en[32767+Ti][0]=qn-1+Ti;xn<<=1,qn<<=1}}(),function(){for(var xn=0;xn<256;xn++)wn[xn]=19595*xn,wn[xn+256>>0]=38470*xn,wn[xn+512>>0]=7471*xn+32768,wn[xn+768>>0]=-11059*xn,wn[xn+1024>>0]=-21709*xn,wn[xn+1280>>0]=32768*xn+8421375,wn[xn+1536>>0]=-27439*xn,wn[xn+1792>>0]=-5329*xn}(),Ki(r)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(r,e){if(this.pos=0,this.buffer=r,this.datav=new DataView(r.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(r){function e(Sn){if(!Sn)throw Error("assert :P")}function t(Sn,Mn,Tn){for(var En=0;4>En;En++)if(Sn[Mn+En]!=Tn.charCodeAt(En))return!0;return!1}function ke(Sn,Mn,Tn,En,An){for(var Ln=0;Ln<An;Ln++)Sn[Mn+Ln]=Tn[En+Ln]}function Oe(Sn,Mn,Tn,En){for(var An=0;An<En;An++)Sn[Mn+An]=Tn}function Ge(Sn){return new Int32Array(Sn)}function Be(Sn,Mn){for(var Tn=[],En=0;En<Sn;En++)Tn.push(new Mn);return Tn}function je(Sn,Mn){var Tn=[];return function En(An,Ln,Rn){for(var Gn=Rn[Ln],Nn=0;Nn<Gn&&(An.push(Rn.length>Ln+1?[]:new Mn),!(Rn.length<Ln+1));Nn++)En(An[Nn],Ln+1,Rn)}(Tn,0,Sn),Tn}var Ve=function(){var Sn=this;function Mn(un,gn){for(var _n=1<<gn-1>>>0;un&_n;)_n>>>=1;return _n?(un&_n-1)+_n:un}function Tn(un,gn,_n,Pn,kn){e(!(Pn%_n));do un[gn+(Pn-=_n)]=kn;while(0<Pn)}function En(un,gn,_n,Pn,kn){if(e(2328>=kn),512>=kn)var Bn=Ge(512);else if((Bn=Ge(kn))==null)return 0;return function(Vn,zn,Wn,_i,Di,Xi){var Qi,qi,Yr=zn,Nr=1<<Wn,Gi=Ge(16),ji=Ge(16);for(e(Di!=0),e(_i!=null),e(Vn!=null),e(0<Wn),qi=0;qi<Di;++qi){if(15<_i[qi])return 0;++Gi[_i[qi]]}if(Gi[0]==Di)return 0;for(ji[1]=0,Qi=1;15>Qi;++Qi){if(Gi[Qi]>1<<Qi)return 0;ji[Qi+1]=ji[Qi]+Gi[Qi]}for(qi=0;qi<Di;++qi)Qi=_i[qi],0<_i[qi]&&(Xi[ji[Qi]++]=qi);if(ji[15]==1)return(_i=new An).g=0,_i.value=Xi[0],Tn(Vn,Yr,1,Nr,_i),Nr;var Vr,Xr=-1,Hr=Nr-1,Qs=0,Us=1,lo=1,Ks=1<<Wn;for(qi=0,Qi=1,Di=2;Qi<=Wn;++Qi,Di<<=1){if(Us+=lo<<=1,0>(lo-=Gi[Qi]))return 0;for(;0<Gi[Qi];--Gi[Qi])(_i=new An).g=Qi,_i.value=Xi[qi++],Tn(Vn,Yr+Qs,Di,Ks,_i),Qs=Mn(Qs,Qi)}for(Qi=Wn+1,Di=2;15>=Qi;++Qi,Di<<=1){if(Us+=lo<<=1,0>(lo-=Gi[Qi]))return 0;for(;0<Gi[Qi];--Gi[Qi]){if(_i=new An,(Qs&Hr)!=Xr){for(Yr+=Ks,Vr=1<<(Xr=Qi)-Wn;15>Xr&&!(0>=(Vr-=Gi[Xr]));)++Xr,Vr<<=1;Nr+=Ks=1<<(Vr=Xr-Wn),Vn[zn+(Xr=Qs&Hr)].g=Vr+Wn,Vn[zn+Xr].value=Yr-zn-Xr}_i.g=Qi-Wn,_i.value=Xi[qi++],Tn(Vn,Yr+(Qs>>Wn),Di,Ks,_i),Qs=Mn(Qs,Qi)}}return Us!=2*ji[15]-1?0:Nr}(un,gn,_n,Pn,kn,Bn)}function An(){this.value=this.g=0}function Ln(){this.value=this.g=0}function Rn(){this.G=Be(5,An),this.H=Ge(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=Be(za,Ln)}function Gn(un,gn,_n,Pn){e(un!=null),e(gn!=null),e(2147483648>Pn),un.Ca=254,un.I=0,un.b=-8,un.Ka=0,un.oa=gn,un.pa=_n,un.Jd=gn,un.Yc=_n+Pn,un.Zc=4<=Pn?_n+Pn-4+1:_n,Kn(un)}function Nn(un,gn){for(var _n=0;0<gn--;)_n|=Pi(un,128)<<gn;return _n}function jn(un,gn){var _n=Nn(un,gn);return Ii(un)?-_n:_n}function Dn(un,gn,_n,Pn){var kn,Bn=0;for(e(un!=null),e(gn!=null),e(4294967288>Pn),un.Sb=Pn,un.Ra=0,un.u=0,un.h=0,4<Pn&&(Pn=4),kn=0;kn<Pn;++kn)Bn+=gn[_n+kn]<<8*kn;un.Ra=Bn,un.bb=Pn,un.oa=gn,un.pa=_n}function Ci(un){for(;8<=un.u&&un.bb<un.Sb;)un.Ra>>>=8,un.Ra+=un.oa[un.pa+un.bb]<<xu-8>>>0,++un.bb,un.u-=8;$n(un)&&(un.h=1,un.u=0)}function Jn(un,gn){if(e(0<=gn),!un.h&&gn<=Pu){var _n=qn(un)&wu[gn];return un.u+=gn,Ci(un),_n}return un.h=1,un.u=0}function Ki(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function xn(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function qn(un){return un.Ra>>>(un.u&xu-1)>>>0}function $n(un){return e(un.bb<=un.Sb),un.h||un.bb==un.Sb&&un.u>xu}function Ai(un,gn){un.u=gn,un.h=$n(un)}function Ti(un){un.u>=rd&&(e(un.u>=rd),Ci(un))}function Kn(un){e(un!=null&&un.oa!=null),un.pa<un.Zc?(un.I=(un.oa[un.pa++]|un.I<<8)>>>0,un.b+=8):(e(un!=null&&un.oa!=null),un.pa<un.Yc?(un.b+=8,un.I=un.oa[un.pa++]|un.I<<8):un.Ka?un.b=0:(un.I<<=8,un.b+=8,un.Ka=1))}function Ii(un){return Nn(un,1)}function Pi(un,gn){var _n=un.Ca;0>un.b&&Kn(un);var Pn=un.b,kn=_n*gn>>>8,Bn=(un.I>>>Pn>kn)+0;for(Bn?(_n-=kn,un.I-=kn+1<<Pn>>>0):_n=kn+1,Pn=_n,kn=0;256<=Pn;)kn+=8,Pn>>=8;return Pn=7^kn+Bl[Pn],un.b-=Pn,un.Ca=(_n<<Pn)-1,Bn}function Mi(un,gn,_n){un[gn+0]=_n>>24&255,un[gn+1]=_n>>16&255,un[gn+2]=_n>>8&255,un[gn+3]=_n>>0&255}function tr(un,gn){return un[gn+0]<<0|un[gn+1]<<8}function Br(un,gn){return tr(un,gn)|un[gn+2]<<16}function Un(un,gn){return tr(un,gn)|tr(un,gn+2)<<16}function Qn(un,gn){var _n=1<<gn;return e(un!=null),e(0<gn),un.X=Ge(_n),un.X==null?0:(un.Mb=32-gn,un.Xa=gn,1)}function Hn(un,gn){e(un!=null),e(gn!=null),e(un.Xa==gn.Xa),ke(gn.X,0,un.X,0,1<<gn.Xa)}function Fn(){this.X=[],this.Xa=this.Mb=0}function Hi(un,gn,_n,Pn){e(_n!=null),e(Pn!=null);var kn=_n[0],Bn=Pn[0];return kn==0&&(kn=(un*Bn+gn/2)/gn),Bn==0&&(Bn=(gn*kn+un/2)/un),0>=kn||0>=Bn?0:(_n[0]=kn,Pn[0]=Bn,1)}function zi(un,gn){return un+(1<<gn)-1>>>gn}function Oi(un,gn){return((4278255360&un)+(4278255360&gn)>>>0&4278255360)+((16711935&un)+(16711935&gn)>>>0&16711935)>>>0}function Vi(un,gn){Sn[gn]=function(_n,Pn,kn,Bn,Vn,zn,Wn){var _i;for(_i=0;_i<Vn;++_i){var Di=Sn[un](zn[Wn+_i-1],kn,Bn+_i);zn[Wn+_i]=Oi(_n[Pn+_i],Di)}}}function Bi(){this.ud=this.hd=this.jd=0}function Fi(un,gn){return((4278124286&(un^gn))>>>1)+(un&gn)>>>0}function Si(un){return 0<=un&&256>un?un:0>un?0:255<un?255:void 0}function Li(un,gn){return Si(un+(un-gn+.5>>1))}function Ri(un,gn,_n){return Math.abs(gn-_n)-Math.abs(un-_n)}function $i(un,gn,_n,Pn,kn,Bn,Vn){for(Pn=Bn[Vn-1],_n=0;_n<kn;++_n)Bn[Vn+_n]=Pn=Oi(un[gn+_n],Pn)}function er(un,gn,_n,Pn,kn){var Bn;for(Bn=0;Bn<_n;++Bn){var Vn=un[gn+Bn],zn=Vn>>8&255,Wn=16711935&(Wn=(Wn=16711935&Vn)+((zn<<16)+zn));Pn[kn+Bn]=(4278255360&Vn)+Wn>>>0}}function ar(un,gn){gn.jd=un>>0&255,gn.hd=un>>8&255,gn.ud=un>>16&255}function Rr(un,gn,_n,Pn,kn,Bn){var Vn;for(Vn=0;Vn<Pn;++Vn){var zn=gn[_n+Vn],Wn=zn>>>8,_i=zn,Di=255&(Di=(Di=zn>>>16)+((un.jd<<24>>24)*(Wn<<24>>24)>>>5));_i=255&(_i=(_i=_i+((un.hd<<24>>24)*(Wn<<24>>24)>>>5))+((un.ud<<24>>24)*(Di<<24>>24)>>>5)),kn[Bn+Vn]=(4278255360&zn)+(Di<<16)+_i}}function Gs(un,gn,_n,Pn,kn){Sn[gn]=function(Bn,Vn,zn,Wn,_i,Di,Xi,Qi,qi){for(Wn=Xi;Wn<Qi;++Wn)for(Xi=0;Xi<qi;++Xi)_i[Di++]=kn(zn[Pn(Bn[Vn++])])},Sn[un]=function(Bn,Vn,zn,Wn,_i,Di,Xi){var Qi=8>>Bn.b,qi=Bn.Ea,Yr=Bn.K[0],Nr=Bn.w;if(8>Qi)for(Bn=(1<<Bn.b)-1,Nr=(1<<Qi)-1;Vn<zn;++Vn){var Gi,ji=0;for(Gi=0;Gi<qi;++Gi)Gi&Bn||(ji=Pn(Wn[_i++])),Di[Xi++]=kn(Yr[ji&Nr]),ji>>=Qi}else Sn["VP8LMapColor"+_n](Wn,_i,Yr,Nr,Di,Xi,Vn,zn,qi)}}function Pr(un,gn,_n,Pn,kn){for(_n=gn+_n;gn<_n;){var Bn=un[gn++];Pn[kn++]=Bn>>16&255,Pn[kn++]=Bn>>8&255,Pn[kn++]=Bn>>0&255}}function no(un,gn,_n,Pn,kn){for(_n=gn+_n;gn<_n;){var Bn=un[gn++];Pn[kn++]=Bn>>16&255,Pn[kn++]=Bn>>8&255,Pn[kn++]=Bn>>0&255,Pn[kn++]=Bn>>24&255}}function Zs(un,gn,_n,Pn,kn){for(_n=gn+_n;gn<_n;){var Bn=(Vn=un[gn++])>>16&240|Vn>>12&15,Vn=Vn>>0&240|Vn>>28&15;Pn[kn++]=Bn,Pn[kn++]=Vn}}function ho(un,gn,_n,Pn,kn){for(_n=gn+_n;gn<_n;){var Bn=(Vn=un[gn++])>>16&248|Vn>>13&7,Vn=Vn>>5&224|Vn>>3&31;Pn[kn++]=Bn,Pn[kn++]=Vn}}function co(un,gn,_n,Pn,kn){for(_n=gn+_n;gn<_n;){var Bn=un[gn++];Pn[kn++]=Bn>>0&255,Pn[kn++]=Bn>>8&255,Pn[kn++]=Bn>>16&255}}function Ws(un,gn,_n,Pn,kn,Bn){if(Bn==0)for(_n=gn+_n;gn<_n;)Mi(Pn,((Bn=un[gn++])[0]>>24|Bn[1]>>8&65280|Bn[2]<<8&16711680|Bn[3]<<24)>>>0),kn+=32;else ke(Pn,kn,un,gn,_n)}function oo(un,gn){Sn[gn][0]=Sn[un+"0"],Sn[gn][1]=Sn[un+"1"],Sn[gn][2]=Sn[un+"2"],Sn[gn][3]=Sn[un+"3"],Sn[gn][4]=Sn[un+"4"],Sn[gn][5]=Sn[un+"5"],Sn[gn][6]=Sn[un+"6"],Sn[gn][7]=Sn[un+"7"],Sn[gn][8]=Sn[un+"8"],Sn[gn][9]=Sn[un+"9"],Sn[gn][10]=Sn[un+"10"],Sn[gn][11]=Sn[un+"11"],Sn[gn][12]=Sn[un+"12"],Sn[gn][13]=Sn[un+"13"],Sn[gn][14]=Sn[un+"0"],Sn[gn][15]=Sn[un+"0"]}function to(un){return un==Bh||un==Uh||un==Jd||un==jh}function mo(){this.eb=[],this.size=this.A=this.fb=0}function ao(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function jo(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new mo,this.f.kb=new ao,this.sd=null}function na(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function yo(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function io(un){return alert("todo:WebPSamplerProcessPlane"),un.T}function so(un,gn){var _n=un.T,Pn=gn.ba.f.RGBA,kn=Pn.eb,Bn=Pn.fb+un.ka*Pn.A,Vn=pc[gn.ba.S],zn=un.y,Wn=un.O,_i=un.f,Di=un.N,Xi=un.ea,Qi=un.W,qi=gn.cc,Yr=gn.dc,Nr=gn.Mc,Gi=gn.Nc,ji=un.ka,Vr=un.ka+un.T,Xr=un.U,Hr=Xr+1>>1;for(ji==0?Vn(zn,Wn,null,null,_i,Di,Xi,Qi,_i,Di,Xi,Qi,kn,Bn,null,null,Xr):(Vn(gn.ec,gn.fc,zn,Wn,qi,Yr,Nr,Gi,_i,Di,Xi,Qi,kn,Bn-Pn.A,kn,Bn,Xr),++_n);ji+2<Vr;ji+=2)qi=_i,Yr=Di,Nr=Xi,Gi=Qi,Di+=un.Rc,Qi+=un.Rc,Bn+=2*Pn.A,Vn(zn,(Wn+=2*un.fa)-un.fa,zn,Wn,qi,Yr,Nr,Gi,_i,Di,Xi,Qi,kn,Bn-Pn.A,kn,Bn,Xr);return Wn+=un.fa,un.j+Vr<un.o?(ke(gn.ec,gn.fc,zn,Wn,Xr),ke(gn.cc,gn.dc,_i,Di,Hr),ke(gn.Mc,gn.Nc,Xi,Qi,Hr),_n--):1&Vr||Vn(zn,Wn,null,null,_i,Di,Xi,Qi,_i,Di,Xi,Qi,kn,Bn+Pn.A,null,null,Xr),_n}function $a(un,gn,_n){var Pn=un.F,kn=[un.J];if(Pn!=null){var Bn=un.U,Vn=gn.ba.S,zn=Vn==Zd||Vn==Jd;gn=gn.ba.f.RGBA;var Wn=[0],_i=un.ka;Wn[0]=un.T,un.Kb&&(_i==0?--Wn[0]:(--_i,kn[0]-=un.width),un.j+un.ka+un.T==un.o&&(Wn[0]=un.o-un.j-_i));var Di=gn.eb;_i=gn.fb+_i*gn.A,un=ea(Pn,kn[0],un.width,Bn,Wn,Di,_i+(zn?0:3),gn.A),e(_n==Wn),un&&to(Vn)&&hc(Di,_i,zn,Bn,Wn,gn.A)}return 0}function ko(un){var gn=un.ma,_n=gn.ba.S,Pn=11>_n,kn=_n==Kd||_n==Xd||_n==Zd||_n==Fh||_n==12||to(_n);if(gn.memory=null,gn.Ib=null,gn.Jb=null,gn.Nd=null,!nd(gn.Oa,un,kn?11:12))return 0;if(kn&&to(_n)&&xs(),un.da)alert("todo:use_scaling");else{if(Pn){if(gn.Ib=io,un.Kb){if(_n=un.U+1>>1,gn.memory=Ge(un.U+2*_n),gn.memory==null)return 0;gn.ec=gn.memory,gn.fc=0,gn.cc=gn.ec,gn.dc=gn.fc+un.U,gn.Mc=gn.cc,gn.Nc=gn.dc+_n,gn.Ib=so,xs()}}else alert("todo:EmitYUV");kn&&(gn.Jb=$a,Pn&&Yi())}if(Pn&&!ff){for(un=0;256>un;++un)Cp[un]=89858*(un-128)+eh>>Qd,bp[un]=-22014*(un-128)+eh,Sp[un]=-45773*(un-128),Ep[un]=113618*(un-128)+eh>>Qd;for(un=dd;un<Hh;++un)gn=76283*(un-16)+eh>>Qd,Ip[un-dd]=ic(gn,255),wp[un-dd]=ic(gn+8>>4,15);ff=1}return 1}function Aa(un){var gn=un.ma,_n=un.U,Pn=un.T;return e(!(1&un.ka)),0>=_n||0>=Pn?0:(_n=gn.Ib(un,gn),gn.Jb!=null&&gn.Jb(un,gn,_n),gn.Dc+=_n,1)}function uo(un){un.ma.memory=null}function eo(un,gn,_n,Pn){return Jn(un,8)!=47?0:(gn[0]=Jn(un,14)+1,_n[0]=Jn(un,14)+1,Pn[0]=Jn(un,1),Jn(un,3)!=0?0:!un.h)}function Oa(un,gn){if(4>un)return un+1;var _n=un-2>>1;return(2+(1&un)<<_n)+Jn(gn,_n)+1}function qo(un,gn){return 120<gn?gn-120:1<=(_n=((_n=ap[gn-1])>>4)*un+(8-(15&_n)))?_n:1;var _n}function Fo(un,gn,_n){var Pn=qn(_n),kn=un[gn+=255&Pn].g-8;return 0<kn&&(Ai(_n,_n.u+8),Pn=qn(_n),gn+=un[gn].value,gn+=Pn&(1<<kn)-1),Ai(_n,_n.u+un[gn].g),un[gn].value}function Oo(un,gn,_n){return _n.g+=un.g,_n.value+=un.value<<gn>>>0,e(8>=_n.g),un.g}function ta(un,gn,_n){var Pn=un.xc;return e((gn=Pn==0?0:un.vc[un.md*(_n>>Pn)+(gn>>Pn)])<un.Wb),un.Ya[gn]}function ra(un,gn,_n,Pn){var kn=un.ab,Bn=un.c*gn,Vn=un.C;gn=Vn+gn;var zn=_n,Wn=Pn;for(Pn=un.Ta,_n=un.Ua;0<kn--;){var _i=un.gc[kn],Di=Vn,Xi=gn,Qi=zn,qi=Wn,Yr=(Wn=Pn,zn=_n,_i.Ea);switch(e(Di<Xi),e(Xi<=_i.nc),_i.hc){case 2:Ud(Qi,qi,(Xi-Di)*Yr,Wn,zn);break;case 0:var Nr=Di,Gi=Xi,ji=Wn,Vr=zn,Xr=(Ks=_i).Ea;Nr==0&&(Dh(Qi,qi,null,null,1,ji,Vr),$i(Qi,qi+1,0,0,Xr-1,ji,Vr+1),qi+=Xr,Vr+=Xr,++Nr);for(var Hr=1<<Ks.b,Qs=Hr-1,Us=zi(Xr,Ks.b),lo=Ks.K,Ks=Ks.w+(Nr>>Ks.b)*Us;Nr<Gi;){var Go=lo,Wo=Ks,No=1;for(sd(Qi,qi,ji,Vr-Xr,1,ji,Vr);No<Xr;){var bo=(No&~Qs)+Hr;bo>Xr&&(bo=Xr),(0,Bc[Go[Wo++]>>8&15])(Qi,qi+ +No,ji,Vr+No-Xr,bo-No,ji,Vr+No),No=bo}qi+=Xr,Vr+=Xr,++Nr&Qs||(Ks+=Us)}Xi!=_i.nc&&ke(Wn,zn-Yr,Wn,zn+(Xi-Di-1)*Yr,Yr);break;case 1:for(Yr=Qi,Gi=qi,Xr=(Qi=_i.Ea)-(Vr=Qi&~(ji=(qi=1<<_i.b)-1)),Nr=zi(Qi,_i.b),Hr=_i.K,_i=_i.w+(Di>>_i.b)*Nr;Di<Xi;){for(Qs=Hr,Us=_i,lo=new Bi,Ks=Gi+Vr,Go=Gi+Qi;Gi<Ks;)ar(Qs[Us++],lo),iu(lo,Yr,Gi,qi,Wn,zn),Gi+=qi,zn+=qi;Gi<Go&&(ar(Qs[Us++],lo),iu(lo,Yr,Gi,Xr,Wn,zn),Gi+=Xr,zn+=Xr),++Di&ji||(_i+=Nr)}break;case 3:if(Qi==Wn&&qi==zn&&0<_i.b){for(Gi=Wn,Qi=Yr=zn+(Xi-Di)*Yr-(Vr=(Xi-Di)*zi(_i.Ea,_i.b)),qi=Wn,ji=zn,Nr=[],Vr=(Xr=Vr)-1;0<=Vr;--Vr)Nr[Vr]=qi[ji+Vr];for(Vr=Xr-1;0<=Vr;--Vr)Gi[Qi+Vr]=Nr[Vr];cc(_i,Di,Xi,Wn,Yr,Wn,zn)}else cc(_i,Di,Xi,Qi,qi,Wn,zn)}zn=Pn,Wn=_n}Wn!=_n&&ke(Pn,_n,zn,Wn,Bn)}function ac(un,gn){var _n=un.V,Pn=un.Ba+un.c*un.C,kn=gn-un.C;if(e(gn<=un.l.o),e(16>=kn),0<kn){var Bn=un.l,Vn=un.Ta,zn=un.Ua,Wn=Bn.width;if(ra(un,kn,_n,Pn),kn=zn=[zn],e((_n=un.C)<(Pn=gn)),e(Bn.v<Bn.va),Pn>Bn.o&&(Pn=Bn.o),_n<Bn.j){var _i=Bn.j-_n;_n=Bn.j,kn[0]+=_i*Wn}if(_n>=Pn?_n=0:(kn[0]+=4*Bn.v,Bn.ka=_n-Bn.j,Bn.U=Bn.va-Bn.v,Bn.T=Pn-_n,_n=1),_n){if(zn=zn[0],11>(_n=un.ca).S){var Di=_n.f.RGBA,Xi=(Pn=_n.S,kn=Bn.U,Bn=Bn.T,_i=Di.eb,Di.A),Qi=Bn;for(Di=Di.fb+un.Ma*Di.A;0<Qi--;){var qi=Vn,Yr=zn,Nr=kn,Gi=_i,ji=Di;switch(Pn){case Yd:Vl(qi,Yr,Nr,Gi,ji);break;case Kd:Ja(qi,Yr,Nr,Gi,ji);break;case Bh:Ja(qi,Yr,Nr,Gi,ji),hc(Gi,ji,0,Nr,1,0);break;case nf:Lc(qi,Yr,Nr,Gi,ji);break;case Xd:Ws(qi,Yr,Nr,Gi,ji,1);break;case Uh:Ws(qi,Yr,Nr,Gi,ji,1),hc(Gi,ji,0,Nr,1,0);break;case Zd:Ws(qi,Yr,Nr,Gi,ji,0);break;case Jd:Ws(qi,Yr,Nr,Gi,ji,0),hc(Gi,ji,1,Nr,1,0);break;case Fh:Uc(qi,Yr,Nr,Gi,ji);break;case jh:Uc(qi,Yr,Nr,Gi,ji),Qo(Gi,ji,Nr,1,0);break;case rf:Tc(qi,Yr,Nr,Gi,ji);break;default:e(0)}zn+=Wn,Di+=Xi}un.Ma+=Bn}else alert("todo:EmitRescaledRowsYUVA");e(un.Ma<=_n.height)}}un.C=gn,e(un.C<=un.i)}function Za(un){var gn;if(0<un.ua)return 0;for(gn=0;gn<un.Wb;++gn){var _n=un.Ya[gn].G,Pn=un.Ya[gn].H;if(0<_n[1][Pn[1]+0].g||0<_n[2][Pn[2]+0].g||0<_n[3][Pn[3]+0].g)return 0}return 1}function Pl(un,gn,_n,Pn,kn,Bn){if(un.Z!=0){var Vn=un.qd,zn=un.rd;for(e(qc[un.Z]!=null);gn<_n;++gn)qc[un.Z](Vn,zn,Pn,kn,Pn,kn,Bn),Vn=Pn,zn=kn,kn+=Bn;un.qd=Vn,un.rd=zn}}function nc(un,gn){var _n=un.l.ma,Pn=_n.Z==0||_n.Z==1?un.l.j:un.C;if(Pn=un.C<Pn?Pn:un.C,e(gn<=un.l.o),gn>Pn){var kn=un.l.width,Bn=_n.ca,Vn=_n.tb+kn*Pn,zn=un.V,Wn=un.Ba+un.c*Pn,_i=un.gc;e(un.ab==1),e(_i[0].hc==3),jd(_i[0],Pn,gn,zn,Wn,Bn,Vn),Pl(_n,Pn,gn,Bn,Vn,kn)}un.C=un.Ma=gn}function Tl(un,gn,_n,Pn,kn,Bn,Vn){var zn=un.$/Pn,Wn=un.$%Pn,_i=un.m,Di=un.s,Xi=_n+un.$,Qi=Xi;kn=_n+Pn*kn;var qi=_n+Pn*Bn,Yr=280+Di.ua,Nr=un.Pb?zn:16777216,Gi=0<Di.ua?Di.Wa:null,ji=Di.wc,Vr=Xi<qi?ta(Di,Wn,zn):null;e(un.C<Bn),e(qi<=kn);var Xr=!1;e:for(;;){for(;Xr||Xi<qi;){var Hr=0;if(zn>=Nr){var Qs=Xi-_n;e((Nr=un).Pb),Nr.wd=Nr.m,Nr.xd=Qs,0<Nr.s.ua&&Hn(Nr.s.Wa,Nr.s.vb),Nr=zn+cp}if(Wn&ji||(Vr=ta(Di,Wn,zn)),e(Vr!=null),Vr.Qb&&(gn[Xi]=Vr.qb,Xr=!0),!Xr)if(Ti(_i),Vr.jc){Hr=_i,Qs=gn;var Us=Xi,lo=Vr.pd[qn(Hr)&za-1];e(Vr.jc),256>lo.g?(Ai(Hr,Hr.u+lo.g),Qs[Us]=lo.value,Hr=0):(Ai(Hr,Hr.u+lo.g-256),e(256<=lo.value),Hr=lo.value),Hr==0&&(Xr=!0)}else Hr=Fo(Vr.G[0],Vr.H[0],_i);if(_i.h)break;if(Xr||256>Hr){if(!Xr)if(Vr.nd)gn[Xi]=(Vr.qb|Hr<<8)>>>0;else{if(Ti(_i),Xr=Fo(Vr.G[1],Vr.H[1],_i),Ti(_i),Qs=Fo(Vr.G[2],Vr.H[2],_i),Us=Fo(Vr.G[3],Vr.H[3],_i),_i.h)break;gn[Xi]=(Us<<24|Xr<<16|Hr<<8|Qs)>>>0}if(Xr=!1,++Xi,++Wn>=Pn&&(Wn=0,++zn,Vn!=null&&zn<=Bn&&!(zn%16)&&Vn(un,zn),Gi!=null))for(;Qi<Xi;)Hr=gn[Qi++],Gi.X[(506832829*Hr&4294967295)>>>Gi.Mb]=Hr}else if(280>Hr){if(Hr=Oa(Hr-256,_i),Qs=Fo(Vr.G[4],Vr.H[4],_i),Ti(_i),Qs=qo(Pn,Qs=Oa(Qs,_i)),_i.h)break;if(Xi-_n<Qs||kn-Xi<Hr)break e;for(Us=0;Us<Hr;++Us)gn[Xi+Us]=gn[Xi+Us-Qs];for(Xi+=Hr,Wn+=Hr;Wn>=Pn;)Wn-=Pn,++zn,Vn!=null&&zn<=Bn&&!(zn%16)&&Vn(un,zn);if(e(Xi<=kn),Wn&ji&&(Vr=ta(Di,Wn,zn)),Gi!=null)for(;Qi<Xi;)Hr=gn[Qi++],Gi.X[(506832829*Hr&4294967295)>>>Gi.Mb]=Hr}else{if(!(Hr<Yr))break e;for(Xr=Hr-280,e(Gi!=null);Qi<Xi;)Hr=gn[Qi++],Gi.X[(506832829*Hr&4294967295)>>>Gi.Mb]=Hr;Hr=Xi,e(!(Xr>>>(Qs=Gi).Xa)),gn[Hr]=Qs.X[Xr],Xr=!0}Xr||e(_i.h==$n(_i))}if(un.Pb&&_i.h&&Xi<kn)e(un.m.h),un.a=5,un.m=un.wd,un.$=un.xd,0<un.s.ua&&Hn(un.s.vb,un.s.Wa);else{if(_i.h)break e;Vn!=null&&Vn(un,zn>Bn?Bn:zn),un.a=0,un.$=Xi-_n}return 1}return un.a=3,0}function ja(un){e(un!=null),un.vc=null,un.yc=null,un.Ya=null;var gn=un.Wa;gn!=null&&(gn.X=null),un.vb=null,e(un!=null)}function Va(){var un=new Oh;return un==null?null:(un.a=0,un.xb=af,oo("Predictor","VP8LPredictors"),oo("Predictor","VP8LPredictors_C"),oo("PredictorAdd","VP8LPredictorsAdd"),oo("PredictorAdd","VP8LPredictorsAdd_C"),Ud=er,iu=Rr,Vl=Pr,Ja=no,Uc=Zs,Tc=ho,Lc=co,Sn.VP8LMapColor32b=Tu,Sn.VP8LMapColor8b=zd,un)}function Ec(un,gn,_n,Pn,kn){var Bn=1,Vn=[un],zn=[gn],Wn=Pn.m,_i=Pn.s,Di=null,Xi=0;e:for(;;){if(_n)for(;Bn&&Jn(Wn,1);){var Qi=Vn,qi=zn,Yr=Pn,Nr=1,Gi=Yr.m,ji=Yr.gc[Yr.ab],Vr=Jn(Gi,2);if(Yr.Oc&1<<Vr)Bn=0;else{switch(Yr.Oc|=1<<Vr,ji.hc=Vr,ji.Ea=Qi[0],ji.nc=qi[0],ji.K=[null],++Yr.ab,e(4>=Yr.ab),Vr){case 0:case 1:ji.b=Jn(Gi,3)+2,Nr=Ec(zi(ji.Ea,ji.b),zi(ji.nc,ji.b),0,Yr,ji.K),ji.K=ji.K[0];break;case 3:var Xr,Hr=Jn(Gi,8)+1,Qs=16<Hr?0:4<Hr?1:2<Hr?2:3;if(Qi[0]=zi(ji.Ea,Qs),ji.b=Qs,Xr=Nr=Ec(Hr,1,0,Yr,ji.K)){var Us,lo=Hr,Ks=ji,Go=1<<(8>>Ks.b),Wo=Ge(Go);if(Wo==null)Xr=0;else{var No=Ks.K[0],bo=Ks.w;for(Wo[0]=Ks.K[0][0],Us=1;Us<1*lo;++Us)Wo[Us]=Oi(No[bo+Us],Wo[Us-1]);for(;Us<4*Go;++Us)Wo[Us]=0;Ks.K[0]=null,Ks.K[0]=Wo,Xr=1}}Nr=Xr;break;case 2:break;default:e(0)}Bn=Nr}}if(Vn=Vn[0],zn=zn[0],Bn&&Jn(Wn,1)&&!(Bn=1<=(Xi=Jn(Wn,4))&&11>=Xi)){Pn.a=3;break e}var Xo;if(Xo=Bn)t:{var Ko,vo,Ra,Hl=Pn,Na=Vn,tc=zn,Yo=Xi,sc=_n,oc=Hl.m,Fa=Hl.s,Ha=[null],El=1,gc=0,wc=lp[Yo];n:for(;;){if(sc&&Jn(oc,1)){var Ba=Jn(oc,3)+2,kc=zi(Na,Ba),lu=zi(tc,Ba),ku=kc*lu;if(!Ec(kc,lu,0,Hl,Ha))break n;for(Ha=Ha[0],Fa.xc=Ba,Ko=0;Ko<ku;++Ko){var Wc=Ha[Ko]>>8&65535;Ha[Ko]=Wc,Wc>=El&&(El=Wc+1)}}if(oc.h)break n;for(vo=0;5>vo;++vo){var Sa=sf[vo];!vo&&0<Yo&&(Sa+=1<<Yo),gc<Sa&&(gc=Sa)}var qh=Be(El*wc,An),mf=El,vf=Be(mf,Rn);if(vf==null)var nh=null;else e(65536>=mf),nh=vf;var hd=Ge(gc);if(nh==null||hd==null||qh==null){Hl.a=1;break n}var ih=qh;for(Ko=Ra=0;Ko<El;++Ko){var Cc=nh[Ko],Ou=Cc.G,Du=Cc.H,yf=0,rh=1,Af=0;for(vo=0;5>vo;++vo){Sa=sf[vo],Ou[vo]=ih,Du[vo]=Ra,!vo&&0<Yo&&(Sa+=1<<Yo);r:{var sh,Wh=Sa,oh=Hl,pd=hd,Tp=ih,Lp=Ra,$h=0,$c=oh.m,Mp=Jn($c,1);if(Oe(pd,0,0,Wh),Mp){var Rp=Jn($c,1)+1,Np=Jn($c,1),_f=Jn($c,Np==0?1:8);pd[_f]=1,Rp==2&&(pd[_f=Jn($c,8)]=1);var ah=1}else{var Cf=Ge(19),Ef=Jn($c,4)+4;if(19<Ef){oh.a=3;var lh=0;break r}for(sh=0;sh<Ef;++sh)Cf[op[sh]]=Jn($c,3);var Yh=void 0,gd=void 0,Sf=oh,kp=Cf,ch=Wh,bf=pd,Kh=0,Yc=Sf.m,If=8,wf=Be(128,An);i:for(;En(wf,0,7,kp,19);){if(Jn(Yc,1)){var Op=2+2*Jn(Yc,3);if((Yh=2+Jn(Yc,Op))>ch)break i}else Yh=ch;for(gd=0;gd<ch&&Yh--;){Ti(Yc);var Pf=wf[0+(127&qn(Yc))];Ai(Yc,Yc.u+Pf.g);var Gu=Pf.value;if(16>Gu)bf[gd++]=Gu,Gu!=0&&(If=Gu);else{var Dp=Gu==16,xf=Gu-16,Fp=ip[xf],Tf=Jn(Yc,np[xf])+Fp;if(gd+Tf>ch)break i;for(var Bp=Dp?If:0;0<Tf--;)bf[gd++]=Bp}}Kh=1;break i}Kh||(Sf.a=3),ah=Kh}(ah=ah&&!$c.h)&&($h=En(Tp,Lp,8,pd,Wh)),ah&&$h!=0?lh=$h:(oh.a=3,lh=0)}if(lh==0)break n;if(rh&&rp[vo]==1&&(rh=ih[Ra].g==0),yf+=ih[Ra].g,Ra+=lh,3>=vo){var md,Xh=hd[0];for(md=1;md<Sa;++md)hd[md]>Xh&&(Xh=hd[md]);Af+=Xh}}if(Cc.nd=rh,Cc.Qb=0,rh&&(Cc.qb=(Ou[3][Du[3]+0].value<<24|Ou[1][Du[1]+0].value<<16|Ou[2][Du[2]+0].value)>>>0,yf==0&&256>Ou[0][Du[0]+0].value&&(Cc.Qb=1,Cc.qb+=Ou[0][Du[0]+0].value<<8)),Cc.jc=!Cc.Qb&&6>Af,Cc.jc){var uh,Oc=Cc;for(uh=0;uh<za;++uh){var Kc=uh,Xc=Oc.pd[Kc],dh=Oc.G[0][Oc.H[0]+Kc];256<=dh.value?(Xc.g=dh.g+256,Xc.value=dh.value):(Xc.g=0,Xc.value=0,Kc>>=Oo(dh,8,Xc),Kc>>=Oo(Oc.G[1][Oc.H[1]+Kc],16,Xc),Kc>>=Oo(Oc.G[2][Oc.H[2]+Kc],0,Xc),Oo(Oc.G[3][Oc.H[3]+Kc],24,Xc))}}}Fa.vc=Ha,Fa.Wb=El,Fa.Ya=nh,Fa.yc=qh,Xo=1;break t}Xo=0}if(!(Bn=Xo)){Pn.a=3;break e}if(0<Xi){if(_i.ua=1<<Xi,!Qn(_i.Wa,Xi)){Pn.a=1,Bn=0;break e}}else _i.ua=0;var Zh=Pn,Lf=Vn,Up=zn,Jh=Zh.s,Qh=Jh.xc;if(Zh.c=Lf,Zh.i=Up,Jh.md=zi(Lf,Qh),Jh.wc=Qh==0?-1:(1<<Qh)-1,_n){Pn.xb=mp;break e}if((Di=Ge(Vn*zn))==null){Pn.a=1,Bn=0;break e}Bn=(Bn=Tl(Pn,Di,0,Vn,zn,zn,null))&&!Wn.h;break e}return Bn?(kn!=null?kn[0]=Di:(e(Di==null),e(_n)),Pn.$=0,_n||ja(_i)):ja(_i),Bn}function Jc(un,gn){var _n=un.c*un.i,Pn=_n+gn+16*gn;return e(un.c<=gn),un.V=Ge(Pn),un.V==null?(un.Ta=null,un.Ua=0,un.a=1,0):(un.Ta=un.V,un.Ua=un.Ba+_n+gn,1)}function uu(un,gn){var _n=un.C,Pn=gn-_n,kn=un.V,Bn=un.Ba+un.c*_n;for(e(gn<=un.l.o);0<Pn;){var Vn=16<Pn?16:Pn,zn=un.l.ma,Wn=un.l.width,_i=Wn*Vn,Di=zn.ca,Xi=zn.tb+Wn*_n,Qi=un.Ta,qi=un.Ua;ra(un,Vn,kn,Bn),xa(Qi,qi,Di,Xi,_i),Pl(zn,_n,_n+Vn,Di,Xi,Wn),Pn-=Vn,kn+=Vn*un.c,_n+=Vn}e(_n==gn),un.C=un.Ma=gn}function du(){this.ub=this.yd=this.td=this.Rb=0}function hu(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function fu(){this.Fb=this.Bb=this.Cb=0,this.Zb=Ge(4),this.Lb=Ge(4)}function yd(){this.Yb=function(){var un=[];return function gn(_n,Pn,kn){for(var Bn=kn[Pn],Vn=0;Vn<Bn&&(_n.push(kn.length>Pn+1?[]:0),!(kn.length<Pn+1));Vn++)gn(_n[Vn],Pn+1,kn)}(un,0,[3,11]),un}()}function hh(){this.jb=Ge(3),this.Wc=je([4,8],yd),this.Xc=je([4,17],yd)}function fh(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Ge(4),this.od=new Ge(4)}function pu(){this.ld=this.La=this.dd=this.tc=0}function Ad(){this.Na=this.la=0}function ph(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Fu(){this.ad=Ge(384),this.Za=0,this.Ob=Ge(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function gh(){this.uc=this.M=this.Nb=0,this.wa=Array(new pu),this.Y=0,this.ya=Array(new Fu),this.aa=0,this.l=new gu}function _d(){this.y=Ge(16),this.f=Ge(8),this.ea=Ge(8)}function mh(){this.cb=this.a=0,this.sc="",this.m=new Ki,this.Od=new du,this.Kc=new hu,this.ed=new fh,this.Qa=new fu,this.Ic=this.$c=this.Aa=0,this.D=new gh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=Be(8,Ki),this.ia=0,this.pb=Be(4,ph),this.Pa=new hh,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new _d),this.Hd=0,this.rb=Array(new Ad),this.sb=0,this.wa=Array(new pu),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Fu),this.L=this.aa=0,this.gd=je([4,2],pu),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function gu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function vh(){var un=new mh;return un!=null&&(un.a=0,un.sc="OK",un.cb=0,un.Xb=0,ud||(ud=Sd)),un}function wa(un,gn,_n){return un.a==0&&(un.a=gn,un.sc=_n,un.cb=0),0}function Cd(un,gn,_n){return 3<=_n&&un[gn+0]==157&&un[gn+1]==1&&un[gn+2]==42}function Ed(un,gn){if(un==null)return 0;if(un.a=0,un.sc="OK",gn==null)return wa(un,2,"null VP8Io passed to VP8GetHeaders()");var _n=gn.data,Pn=gn.w,kn=gn.ha;if(4>kn)return wa(un,7,"Truncated header.");var Bn=_n[Pn+0]|_n[Pn+1]<<8|_n[Pn+2]<<16,Vn=un.Od;if(Vn.Rb=!(1&Bn),Vn.td=Bn>>1&7,Vn.yd=Bn>>4&1,Vn.ub=Bn>>5,3<Vn.td)return wa(un,3,"Incorrect keyframe parameters.");if(!Vn.yd)return wa(un,4,"Frame not displayable.");Pn+=3,kn-=3;var zn=un.Kc;if(Vn.Rb){if(7>kn)return wa(un,7,"cannot parse picture header");if(!Cd(_n,Pn,kn))return wa(un,3,"Bad code word");zn.c=16383&(_n[Pn+4]<<8|_n[Pn+3]),zn.Td=_n[Pn+4]>>6,zn.i=16383&(_n[Pn+6]<<8|_n[Pn+5]),zn.Ud=_n[Pn+6]>>6,Pn+=7,kn-=7,un.za=zn.c+15>>4,un.Ub=zn.i+15>>4,gn.width=zn.c,gn.height=zn.i,gn.Da=0,gn.j=0,gn.v=0,gn.va=gn.width,gn.o=gn.height,gn.da=0,gn.ib=gn.width,gn.hb=gn.height,gn.U=gn.width,gn.T=gn.height,Oe((Bn=un.Pa).jb,0,255,Bn.jb.length),e((Bn=un.Qa)!=null),Bn.Cb=0,Bn.Bb=0,Bn.Fb=1,Oe(Bn.Zb,0,0,Bn.Zb.length),Oe(Bn.Lb,0,0,Bn.Lb)}if(Vn.ub>kn)return wa(un,7,"bad partition length");Gn(Bn=un.m,_n,Pn,Vn.ub),Pn+=Vn.ub,kn-=Vn.ub,Vn.Rb&&(zn.Ld=Ii(Bn),zn.Kd=Ii(Bn)),zn=un.Qa;var Wn,_i=un.Pa;if(e(Bn!=null),e(zn!=null),zn.Cb=Ii(Bn),zn.Cb){if(zn.Bb=Ii(Bn),Ii(Bn)){for(zn.Fb=Ii(Bn),Wn=0;4>Wn;++Wn)zn.Zb[Wn]=Ii(Bn)?jn(Bn,7):0;for(Wn=0;4>Wn;++Wn)zn.Lb[Wn]=Ii(Bn)?jn(Bn,6):0}if(zn.Bb)for(Wn=0;3>Wn;++Wn)_i.jb[Wn]=Ii(Bn)?Nn(Bn,8):255}else zn.Bb=0;if(Bn.Ka)return wa(un,3,"cannot parse segment header");if((zn=un.ed).zd=Ii(Bn),zn.Tb=Nn(Bn,6),zn.wb=Nn(Bn,3),zn.Pc=Ii(Bn),zn.Pc&&Ii(Bn)){for(_i=0;4>_i;++_i)Ii(Bn)&&(zn.vd[_i]=jn(Bn,6));for(_i=0;4>_i;++_i)Ii(Bn)&&(zn.od[_i]=jn(Bn,6))}if(un.L=zn.Tb==0?0:zn.zd?1:2,Bn.Ka)return wa(un,3,"cannot parse filter header");var Di=kn;if(kn=Wn=Pn,Pn=Wn+Di,zn=Di,un.Xb=(1<<Nn(un.m,2))-1,Di<3*(_i=un.Xb))_n=7;else{for(Wn+=3*_i,zn-=3*_i,Di=0;Di<_i;++Di){var Xi=_n[kn+0]|_n[kn+1]<<8|_n[kn+2]<<16;Xi>zn&&(Xi=zn),Gn(un.Jc[+Di],_n,Wn,Xi),Wn+=Xi,zn-=Xi,kn+=3}Gn(un.Jc[+_i],_n,Wn,zn),_n=Wn<Pn?0:5}if(_n!=0)return wa(un,_n,"cannot parse partitions");for(_n=Nn(Wn=un.m,7),kn=Ii(Wn)?jn(Wn,4):0,Pn=Ii(Wn)?jn(Wn,4):0,zn=Ii(Wn)?jn(Wn,4):0,_i=Ii(Wn)?jn(Wn,4):0,Wn=Ii(Wn)?jn(Wn,4):0,Di=un.Qa,Xi=0;4>Xi;++Xi){if(Di.Cb){var Qi=Di.Zb[Xi];Di.Fb||(Qi+=_n)}else{if(0<Xi){un.pb[Xi]=un.pb[0];continue}Qi=_n}var qi=un.pb[Xi];qi.Sc[0]=Vh[ic(Qi+kn,127)],qi.Sc[1]=zh[ic(Qi+0,127)],qi.Eb[0]=2*Vh[ic(Qi+Pn,127)],qi.Eb[1]=101581*zh[ic(Qi+zn,127)]>>16,8>qi.Eb[1]&&(qi.Eb[1]=8),qi.Qc[0]=Vh[ic(Qi+_i,117)],qi.Qc[1]=zh[ic(Qi+Wn,127)],qi.lc=Qi+Wn}if(!Vn.Rb)return wa(un,4,"Not a key frame.");for(Ii(Bn),Vn=un.Pa,_n=0;4>_n;++_n){for(kn=0;8>kn;++kn)for(Pn=0;3>Pn;++Pn)for(zn=0;11>zn;++zn)_i=Pi(Bn,pp[_n][kn][Pn][zn])?Nn(Bn,8):hp[_n][kn][Pn][zn],Vn.Wc[_n][kn].Yb[Pn][zn]=_i;for(kn=0;17>kn;++kn)Vn.Xc[_n][kn]=Vn.Wc[_n][gp[kn]]}return un.kc=Ii(Bn),un.kc&&(un.Bd=Nn(Bn,8)),un.cb=1}function Sd(un,gn,_n,Pn,kn,Bn,Vn){var zn=gn[kn].Yb[_n];for(_n=0;16>kn;++kn){if(!Pi(un,zn[_n+0]))return kn;for(;!Pi(un,zn[_n+1]);)if(zn=gn[++kn].Yb[0],_n=0,kn==16)return 16;var Wn=gn[kn+1].Yb;if(Pi(un,zn[_n+2])){var _i=un,Di=0;if(Pi(_i,(Qi=zn)[(Xi=_n)+3]))if(Pi(_i,Qi[Xi+6])){for(zn=0,Xi=2*(Di=Pi(_i,Qi[Xi+8]))+(Qi=Pi(_i,Qi[Xi+9+Di])),Di=0,Qi=up[Xi];Qi[zn];++zn)Di+=Di+Pi(_i,Qi[zn]);Di+=3+(8<<Xi)}else Pi(_i,Qi[Xi+7])?(Di=7+2*Pi(_i,165),Di+=Pi(_i,145)):Di=5+Pi(_i,159);else Di=Pi(_i,Qi[Xi+4])?3+Pi(_i,Qi[Xi+5]):2;zn=Wn[2]}else Di=1,zn=Wn[1];Wn=Vn+dp[kn],0>(_i=un).b&&Kn(_i);var Xi,Qi=_i.b,qi=(Xi=_i.Ca>>1)-(_i.I>>Qi)>>31;--_i.b,_i.Ca+=qi,_i.Ca|=1,_i.I-=(Xi+1&qi)<<Qi,Bn[Wn]=((Di^qi)-qi)*Pn[(0<kn)+0]}return 16}function Bu(un){var gn=un.rb[un.sb-1];gn.la=0,gn.Na=0,Oe(un.zc,0,0,un.zc.length),un.ja=0}function yh(un,gn){if(un==null)return 0;if(gn==null)return wa(un,2,"NULL VP8Io parameter in VP8Decode().");if(!un.cb&&!Ed(un,gn))return 0;if(e(un.cb),gn.ac==null||gn.ac(gn)){gn.ob&&(un.L=0);var _n=th[un.L];if(un.L==2?(un.yb=0,un.zb=0):(un.yb=gn.v-_n>>4,un.zb=gn.j-_n>>4,0>un.yb&&(un.yb=0),0>un.zb&&(un.zb=0)),un.Va=gn.o+15+_n>>4,un.Hb=gn.va+15+_n>>4,un.Hb>un.za&&(un.Hb=un.za),un.Va>un.Ub&&(un.Va=un.Ub),0<un.L){var Pn=un.ed;for(_n=0;4>_n;++_n){var kn;if(un.Qa.Cb){var Bn=un.Qa.Lb[_n];un.Qa.Fb||(Bn+=Pn.Tb)}else Bn=Pn.Tb;for(kn=0;1>=kn;++kn){var Vn=un.gd[_n][kn],zn=Bn;if(Pn.Pc&&(zn+=Pn.vd[0],kn&&(zn+=Pn.od[0])),0<(zn=0>zn?0:63<zn?63:zn)){var Wn=zn;0<Pn.wb&&(Wn=4<Pn.wb?Wn>>2:Wn>>1)>9-Pn.wb&&(Wn=9-Pn.wb),1>Wn&&(Wn=1),Vn.dd=Wn,Vn.tc=2*zn+Wn,Vn.ld=40<=zn?2:15<=zn?1:0}else Vn.tc=0;Vn.La=kn}}}_n=0}else wa(un,6,"Frame setup failed"),_n=un.a;if(_n=_n==0){if(_n){un.$c=0,0<un.Aa||(un.Ic=xp);e:{_n=un.Ic,Pn=4*(Wn=un.za);var _i=32*Wn,Di=Wn+1,Xi=0<un.L?Wn*(0<un.Aa?2:1):0,Qi=(un.Aa==2?2:1)*Wn;if((Vn=Pn+832+(kn=3*(16*_n+th[un.L])/2*_i)+(Bn=un.Fa!=null&&0<un.Fa.length?un.Kc.c*un.Kc.i:0))!=Vn)_n=0;else{if(Vn>un.Vb){if(un.Vb=0,un.Ec=Ge(Vn),un.Fc=0,un.Ec==null){_n=wa(un,1,"no memory during frame initialization.");break e}un.Vb=Vn}Vn=un.Ec,zn=un.Fc,un.Ac=Vn,un.Bc=zn,zn+=Pn,un.Gd=Be(_i,_d),un.Hd=0,un.rb=Be(Di+1,Ad),un.sb=1,un.wa=Xi?Be(Xi,pu):null,un.Y=0,un.D.Nb=0,un.D.wa=un.wa,un.D.Y=un.Y,0<un.Aa&&(un.D.Y+=Wn),e(!0),un.oc=Vn,un.pc=zn,zn+=832,un.ya=Be(Qi,Fu),un.aa=0,un.D.ya=un.ya,un.D.aa=un.aa,un.Aa==2&&(un.D.aa+=Wn),un.R=16*Wn,un.B=8*Wn,Wn=(_i=th[un.L])*un.R,_i=_i/2*un.B,un.sa=Vn,un.ta=zn+Wn,un.qa=un.sa,un.ra=un.ta+16*_n*un.R+_i,un.Ha=un.qa,un.Ia=un.ra+8*_n*un.B+_i,un.$c=0,zn+=kn,un.mb=Bn?Vn:null,un.nb=Bn?zn:null,e(zn+Bn<=un.Fc+un.Vb),Bu(un),Oe(un.Ac,un.Bc,0,Pn),_n=1}}if(_n){if(gn.ka=0,gn.y=un.sa,gn.O=un.ta,gn.f=un.qa,gn.N=un.ra,gn.ea=un.Ha,gn.Vd=un.Ia,gn.fa=un.R,gn.Rc=un.B,gn.F=null,gn.J=0,!Wd){for(_n=-255;255>=_n;++_n)ka[255+_n]=0>_n?-_n:_n;for(_n=-1020;1020>=_n;++_n)Rc[1020+_n]=-128>_n?-128:127<_n?127:_n;for(_n=-112;112>=_n;++_n)cd[112+_n]=-16>_n?-16:15<_n?15:_n;for(_n=-255;510>=_n;++_n)Nu[255+_n]=0>_n?0:255<_n?255:_n;Wd=1}Lu=Ch,Mc=Ah,od=Id,Al=_h,uc=wd,Pa=bd,Mu=qu,qd=tu,ad=kh,ru=Wu,su=Nh,jc=Cu,ou=$u,Ru=Dd,au=Od,Vc=bc,ld=xc,dc=Rh,_c[0]=Sc,_c[1]=Eh,_c[2]=wh,_c[3]=Ph,_c[4]=Td,_c[5]=Au,_c[6]=Ld,_c[7]=Vu,_c[8]=Th,_c[9]=xh,zc[0]=Pd,zc[1]=bh,zc[2]=Pc,zc[3]=vu,zc[4]=Ya,zc[5]=Ih,zc[6]=xd,Nc[0]=Dc,Nc[1]=Sh,Nc[2]=Lh,Nc[3]=zu,Nc[4]=eu,Nc[5]=Mh,Nc[6]=Hu,_n=1}else _n=0}_n&&(_n=function(qi,Yr){for(qi.M=0;qi.M<qi.Va;++qi.M){var Nr,Gi=qi.Jc[qi.M&qi.Xb],ji=qi.m,Vr=qi;for(Nr=0;Nr<Vr.za;++Nr){var Xr=ji,Hr=Vr,Qs=Hr.Ac,Us=Hr.Bc+4*Nr,lo=Hr.zc,Ks=Hr.ya[Hr.aa+Nr];if(Hr.Qa.Bb?Ks.$b=Pi(Xr,Hr.Pa.jb[0])?2+Pi(Xr,Hr.Pa.jb[2]):Pi(Xr,Hr.Pa.jb[1]):Ks.$b=0,Hr.kc&&(Ks.Ad=Pi(Xr,Hr.Bd)),Ks.Za=!Pi(Xr,145)+0,Ks.Za){var Go=Ks.Ob,Wo=0;for(Hr=0;4>Hr;++Hr){var No,bo=lo[0+Hr];for(No=0;4>No;++No){bo=fp[Qs[Us+No]][bo];for(var Xo=of[Pi(Xr,bo[0])];0<Xo;)Xo=of[2*Xo+Pi(Xr,bo[Xo])];bo=-Xo,Qs[Us+No]=bo}ke(Go,Wo,Qs,Us,4),Wo+=4,lo[0+Hr]=bo}}else bo=Pi(Xr,156)?Pi(Xr,128)?1:3:Pi(Xr,163)?2:0,Ks.Ob[0]=bo,Oe(Qs,Us,bo,4),Oe(lo,0,bo,4);Ks.Dd=Pi(Xr,142)?Pi(Xr,114)?Pi(Xr,183)?1:3:2:0}if(Vr.m.Ka)return wa(qi,7,"Premature end-of-partition0 encountered.");for(;qi.ja<qi.za;++qi.ja){if(Vr=Gi,Xr=(ji=qi).rb[ji.sb-1],Qs=ji.rb[ji.sb+ji.ja],Nr=ji.ya[ji.aa+ji.ja],Us=ji.kc?Nr.Ad:0)Xr.la=Qs.la=0,Nr.Za||(Xr.Na=Qs.Na=0),Nr.Hc=0,Nr.Gc=0,Nr.ia=0;else{var Ko,vo;if(Xr=Qs,Qs=Vr,Us=ji.Pa.Xc,lo=ji.ya[ji.aa+ji.ja],Ks=ji.pb[lo.$b],Hr=lo.ad,Go=0,Wo=ji.rb[ji.sb-1],bo=No=0,Oe(Hr,Go,0,384),lo.Za)var Ra=0,Hl=Us[3];else{Xo=Ge(16);var Na=Xr.Na+Wo.Na;if(Na=ud(Qs,Us[1],Na,Ks.Eb,0,Xo,0),Xr.Na=Wo.Na=(0<Na)+0,1<Na)Lu(Xo,0,Hr,Go);else{var tc=Xo[0]+3>>3;for(Xo=0;256>Xo;Xo+=16)Hr[Go+Xo]=tc}Ra=1,Hl=Us[0]}var Yo=15&Xr.la,sc=15&Wo.la;for(Xo=0;4>Xo;++Xo){var oc=1&sc;for(tc=vo=0;4>tc;++tc)Yo=Yo>>1|(oc=(Na=ud(Qs,Hl,Na=oc+(1&Yo),Ks.Sc,Ra,Hr,Go))>Ra)<<7,vo=vo<<2|(3<Na?3:1<Na?2:Hr[Go+0]!=0),Go+=16;Yo>>=4,sc=sc>>1|oc<<7,No=(No<<8|vo)>>>0}for(Hl=Yo,Ra=sc>>4,Ko=0;4>Ko;Ko+=2){for(vo=0,Yo=Xr.la>>4+Ko,sc=Wo.la>>4+Ko,Xo=0;2>Xo;++Xo){for(oc=1&sc,tc=0;2>tc;++tc)Na=oc+(1&Yo),Yo=Yo>>1|(oc=0<(Na=ud(Qs,Us[2],Na,Ks.Qc,0,Hr,Go)))<<3,vo=vo<<2|(3<Na?3:1<Na?2:Hr[Go+0]!=0),Go+=16;Yo>>=2,sc=sc>>1|oc<<5}bo|=vo<<4*Ko,Hl|=Yo<<4<<Ko,Ra|=(240&sc)<<Ko}Xr.la=Hl,Wo.la=Ra,lo.Hc=No,lo.Gc=bo,lo.ia=43690&bo?0:Ks.ia,Us=!(No|bo)}if(0<ji.L&&(ji.wa[ji.Y+ji.ja]=ji.gd[Nr.$b][Nr.Za],ji.wa[ji.Y+ji.ja].La|=!Us),Vr.Ka)return wa(qi,7,"Premature end-of-file encountered.")}if(Bu(qi),ji=Yr,Vr=1,Nr=(Gi=qi).D,Xr=0<Gi.L&&Gi.M>=Gi.zb&&Gi.M<=Gi.Va,Gi.Aa==0)e:{if(Nr.M=Gi.M,Nr.uc=Xr,Qu(Gi,Nr),Vr=1,Nr=(vo=Gi.D).Nb,Xr=(bo=th[Gi.L])*Gi.R,Qs=bo/2*Gi.B,Xo=16*Nr*Gi.R,tc=8*Nr*Gi.B,Us=Gi.sa,lo=Gi.ta-Xr+Xo,Ks=Gi.qa,Hr=Gi.ra-Qs+tc,Go=Gi.Ha,Wo=Gi.Ia-Qs+tc,sc=(Yo=vo.M)==0,No=Yo>=Gi.Va-1,Gi.Aa==2&&Qu(Gi,vo),vo.uc)for(oc=(Na=Gi).D.M,e(Na.D.uc),vo=Na.yb;vo<Na.Hb;++vo){Ra=vo,Hl=oc;var Fa=(Ha=(Sa=Na).D).Nb;Ko=Sa.R;var Ha=Ha.wa[Ha.Y+Ra],El=Sa.sa,gc=Sa.ta+16*Fa*Ko+16*Ra,wc=Ha.dd,Ba=Ha.tc;if(Ba!=0)if(e(3<=Ba),Sa.L==1)0<Ra&&Vc(El,gc,Ko,Ba+4),Ha.La&&dc(El,gc,Ko,Ba),0<Hl&&au(El,gc,Ko,Ba+4),Ha.La&&ld(El,gc,Ko,Ba);else{var kc=Sa.B,lu=Sa.qa,ku=Sa.ra+8*Fa*kc+8*Ra,Wc=Sa.Ha,Sa=Sa.Ia+8*Fa*kc+8*Ra;Fa=Ha.ld,0<Ra&&(qd(El,gc,Ko,Ba+4,wc,Fa),ru(lu,ku,Wc,Sa,kc,Ba+4,wc,Fa)),Ha.La&&(jc(El,gc,Ko,Ba,wc,Fa),Ru(lu,ku,Wc,Sa,kc,Ba,wc,Fa)),0<Hl&&(Mu(El,gc,Ko,Ba+4,wc,Fa),ad(lu,ku,Wc,Sa,kc,Ba+4,wc,Fa)),Ha.La&&(su(El,gc,Ko,Ba,wc,Fa),ou(lu,ku,Wc,Sa,kc,Ba,wc,Fa))}}if(Gi.ia&&alert("todo:DitherRow"),ji.put!=null){if(vo=16*Yo,Yo=16*(Yo+1),sc?(ji.y=Gi.sa,ji.O=Gi.ta+Xo,ji.f=Gi.qa,ji.N=Gi.ra+tc,ji.ea=Gi.Ha,ji.W=Gi.Ia+tc):(vo-=bo,ji.y=Us,ji.O=lo,ji.f=Ks,ji.N=Hr,ji.ea=Go,ji.W=Wo),No||(Yo-=bo),Yo>ji.o&&(Yo=ji.o),ji.F=null,ji.J=null,Gi.Fa!=null&&0<Gi.Fa.length&&vo<Yo&&(ji.J=Zu(Gi,ji,vo,Yo-vo),ji.F=Gi.mb,ji.F==null&&ji.F.length==0)){Vr=wa(Gi,3,"Could not decode alpha data.");break e}vo<ji.j&&(bo=ji.j-vo,vo=ji.j,e(!(1&bo)),ji.O+=Gi.R*bo,ji.N+=Gi.B*(bo>>1),ji.W+=Gi.B*(bo>>1),ji.F!=null&&(ji.J+=ji.width*bo)),vo<Yo&&(ji.O+=ji.v,ji.N+=ji.v>>1,ji.W+=ji.v>>1,ji.F!=null&&(ji.J+=ji.v),ji.ka=vo-ji.j,ji.U=ji.va-ji.v,ji.T=Yo-vo,Vr=ji.put(ji))}Nr+1!=Gi.Ic||No||(ke(Gi.sa,Gi.ta-Xr,Us,lo+16*Gi.R,Xr),ke(Gi.qa,Gi.ra-Qs,Ks,Hr+8*Gi.B,Qs),ke(Gi.Ha,Gi.Ia-Qs,Go,Wo+8*Gi.B,Qs))}if(!Vr)return wa(qi,6,"Output aborted.")}return 1}(un,gn)),gn.bc!=null&&gn.bc(gn),_n&=1}return _n?(un.cb=0,_n):0}function vc(un,gn,_n,Pn,kn){kn=un[gn+_n+32*Pn]+(kn>>3),un[gn+_n+32*Pn]=-256&kn?0>kn?0:255:kn}function mu(un,gn,_n,Pn,kn,Bn){vc(un,gn,0,_n,Pn+kn),vc(un,gn,1,_n,Pn+Bn),vc(un,gn,2,_n,Pn-Bn),vc(un,gn,3,_n,Pn-kn)}function Rl(un){return(20091*un>>16)+un}function Uu(un,gn,_n,Pn){var kn,Bn=0,Vn=Ge(16);for(kn=0;4>kn;++kn){var zn=un[gn+0]+un[gn+8],Wn=un[gn+0]-un[gn+8],_i=(35468*un[gn+4]>>16)-Rl(un[gn+12]),Di=Rl(un[gn+4])+(35468*un[gn+12]>>16);Vn[Bn+0]=zn+Di,Vn[Bn+1]=Wn+_i,Vn[Bn+2]=Wn-_i,Vn[Bn+3]=zn-Di,Bn+=4,gn++}for(kn=Bn=0;4>kn;++kn)zn=(un=Vn[Bn+0]+4)+Vn[Bn+8],Wn=un-Vn[Bn+8],_i=(35468*Vn[Bn+4]>>16)-Rl(Vn[Bn+12]),vc(_n,Pn,0,0,zn+(Di=Rl(Vn[Bn+4])+(35468*Vn[Bn+12]>>16))),vc(_n,Pn,1,0,Wn+_i),vc(_n,Pn,2,0,Wn-_i),vc(_n,Pn,3,0,zn-Di),Bn++,Pn+=32}function bd(un,gn,_n,Pn){var kn=un[gn+0]+4,Bn=35468*un[gn+4]>>16,Vn=Rl(un[gn+4]),zn=35468*un[gn+1]>>16;mu(_n,Pn,0,kn+Vn,un=Rl(un[gn+1]),zn),mu(_n,Pn,1,kn+Bn,un,zn),mu(_n,Pn,2,kn-Bn,un,zn),mu(_n,Pn,3,kn-Vn,un,zn)}function Ah(un,gn,_n,Pn,kn){Uu(un,gn,_n,Pn),kn&&Uu(un,gn+16,_n,Pn+4)}function Id(un,gn,_n,Pn){Mc(un,gn+0,_n,Pn,1),Mc(un,gn+32,_n,Pn+128,1)}function _h(un,gn,_n,Pn){var kn;for(un=un[gn+0]+4,kn=0;4>kn;++kn)for(gn=0;4>gn;++gn)vc(_n,Pn,gn,kn,un)}function wd(un,gn,_n,Pn){un[gn+0]&&Al(un,gn+0,_n,Pn),un[gn+16]&&Al(un,gn+16,_n,Pn+4),un[gn+32]&&Al(un,gn+32,_n,Pn+128),un[gn+48]&&Al(un,gn+48,_n,Pn+128+4)}function Ch(un,gn,_n,Pn){var kn,Bn=Ge(16);for(kn=0;4>kn;++kn){var Vn=un[gn+0+kn]+un[gn+12+kn],zn=un[gn+4+kn]+un[gn+8+kn],Wn=un[gn+4+kn]-un[gn+8+kn],_i=un[gn+0+kn]-un[gn+12+kn];Bn[0+kn]=Vn+zn,Bn[8+kn]=Vn-zn,Bn[4+kn]=_i+Wn,Bn[12+kn]=_i-Wn}for(kn=0;4>kn;++kn)Vn=(un=Bn[0+4*kn]+3)+Bn[3+4*kn],zn=Bn[1+4*kn]+Bn[2+4*kn],Wn=Bn[1+4*kn]-Bn[2+4*kn],_i=un-Bn[3+4*kn],_n[Pn+0]=Vn+zn>>3,_n[Pn+16]=_i+Wn>>3,_n[Pn+32]=Vn-zn>>3,_n[Pn+48]=_i-Wn>>3,Pn+=64}function ju(un,gn,_n){var Pn,kn=gn-32,Bn=rc,Vn=255-un[kn-1];for(Pn=0;Pn<_n;++Pn){var zn,Wn=Bn,_i=Vn+un[gn-1];for(zn=0;zn<_n;++zn)un[gn+zn]=Wn[_i+un[kn+zn]];gn+=32}}function Eh(un,gn){ju(un,gn,4)}function Sh(un,gn){ju(un,gn,8)}function bh(un,gn){ju(un,gn,16)}function Pc(un,gn){var _n;for(_n=0;16>_n;++_n)ke(un,gn+32*_n,un,gn-32,16)}function vu(un,gn){var _n;for(_n=16;0<_n;--_n)Oe(un,gn,un[gn-1],16),gn+=32}function yu(un,gn,_n){var Pn;for(Pn=0;16>Pn;++Pn)Oe(gn,_n+32*Pn,un,16)}function Pd(un,gn){var _n,Pn=16;for(_n=0;16>_n;++_n)Pn+=un[gn-1+32*_n]+un[gn+_n-32];yu(Pn>>5,un,gn)}function Ya(un,gn){var _n,Pn=8;for(_n=0;16>_n;++_n)Pn+=un[gn-1+32*_n];yu(Pn>>4,un,gn)}function Ih(un,gn){var _n,Pn=8;for(_n=0;16>_n;++_n)Pn+=un[gn+_n-32];yu(Pn>>4,un,gn)}function xd(un,gn){yu(128,un,gn)}function fo(un,gn,_n){return un+2*gn+_n+2>>2}function wh(un,gn){var _n,Pn=gn-32;for(Pn=new Uint8Array([fo(un[Pn-1],un[Pn+0],un[Pn+1]),fo(un[Pn+0],un[Pn+1],un[Pn+2]),fo(un[Pn+1],un[Pn+2],un[Pn+3]),fo(un[Pn+2],un[Pn+3],un[Pn+4])]),_n=0;4>_n;++_n)ke(un,gn+32*_n,Pn,0,Pn.length)}function Ph(un,gn){var _n=un[gn-1],Pn=un[gn-1+32],kn=un[gn-1+64],Bn=un[gn-1+96];Mi(un,gn+0,16843009*fo(un[gn-1-32],_n,Pn)),Mi(un,gn+32,16843009*fo(_n,Pn,kn)),Mi(un,gn+64,16843009*fo(Pn,kn,Bn)),Mi(un,gn+96,16843009*fo(kn,Bn,Bn))}function Sc(un,gn){var _n,Pn=4;for(_n=0;4>_n;++_n)Pn+=un[gn+_n-32]+un[gn-1+32*_n];for(Pn>>=3,_n=0;4>_n;++_n)Oe(un,gn+32*_n,Pn,4)}function Td(un,gn){var _n=un[gn-1+0],Pn=un[gn-1+32],kn=un[gn-1+64],Bn=un[gn-1-32],Vn=un[gn+0-32],zn=un[gn+1-32],Wn=un[gn+2-32],_i=un[gn+3-32];un[gn+0+96]=fo(Pn,kn,un[gn-1+96]),un[gn+1+96]=un[gn+0+64]=fo(_n,Pn,kn),un[gn+2+96]=un[gn+1+64]=un[gn+0+32]=fo(Bn,_n,Pn),un[gn+3+96]=un[gn+2+64]=un[gn+1+32]=un[gn+0+0]=fo(Vn,Bn,_n),un[gn+3+64]=un[gn+2+32]=un[gn+1+0]=fo(zn,Vn,Bn),un[gn+3+32]=un[gn+2+0]=fo(Wn,zn,Vn),un[gn+3+0]=fo(_i,Wn,zn)}function Ld(un,gn){var _n=un[gn+1-32],Pn=un[gn+2-32],kn=un[gn+3-32],Bn=un[gn+4-32],Vn=un[gn+5-32],zn=un[gn+6-32],Wn=un[gn+7-32];un[gn+0+0]=fo(un[gn+0-32],_n,Pn),un[gn+1+0]=un[gn+0+32]=fo(_n,Pn,kn),un[gn+2+0]=un[gn+1+32]=un[gn+0+64]=fo(Pn,kn,Bn),un[gn+3+0]=un[gn+2+32]=un[gn+1+64]=un[gn+0+96]=fo(kn,Bn,Vn),un[gn+3+32]=un[gn+2+64]=un[gn+1+96]=fo(Bn,Vn,zn),un[gn+3+64]=un[gn+2+96]=fo(Vn,zn,Wn),un[gn+3+96]=fo(zn,Wn,Wn)}function Au(un,gn){var _n=un[gn-1+0],Pn=un[gn-1+32],kn=un[gn-1+64],Bn=un[gn-1-32],Vn=un[gn+0-32],zn=un[gn+1-32],Wn=un[gn+2-32],_i=un[gn+3-32];un[gn+0+0]=un[gn+1+64]=Bn+Vn+1>>1,un[gn+1+0]=un[gn+2+64]=Vn+zn+1>>1,un[gn+2+0]=un[gn+3+64]=zn+Wn+1>>1,un[gn+3+0]=Wn+_i+1>>1,un[gn+0+96]=fo(kn,Pn,_n),un[gn+0+64]=fo(Pn,_n,Bn),un[gn+0+32]=un[gn+1+96]=fo(_n,Bn,Vn),un[gn+1+32]=un[gn+2+96]=fo(Bn,Vn,zn),un[gn+2+32]=un[gn+3+96]=fo(Vn,zn,Wn),un[gn+3+32]=fo(zn,Wn,_i)}function Vu(un,gn){var _n=un[gn+0-32],Pn=un[gn+1-32],kn=un[gn+2-32],Bn=un[gn+3-32],Vn=un[gn+4-32],zn=un[gn+5-32],Wn=un[gn+6-32],_i=un[gn+7-32];un[gn+0+0]=_n+Pn+1>>1,un[gn+1+0]=un[gn+0+64]=Pn+kn+1>>1,un[gn+2+0]=un[gn+1+64]=kn+Bn+1>>1,un[gn+3+0]=un[gn+2+64]=Bn+Vn+1>>1,un[gn+0+32]=fo(_n,Pn,kn),un[gn+1+32]=un[gn+0+96]=fo(Pn,kn,Bn),un[gn+2+32]=un[gn+1+96]=fo(kn,Bn,Vn),un[gn+3+32]=un[gn+2+96]=fo(Bn,Vn,zn),un[gn+3+64]=fo(Vn,zn,Wn),un[gn+3+96]=fo(zn,Wn,_i)}function xh(un,gn){var _n=un[gn-1+0],Pn=un[gn-1+32],kn=un[gn-1+64],Bn=un[gn-1+96];un[gn+0+0]=_n+Pn+1>>1,un[gn+2+0]=un[gn+0+32]=Pn+kn+1>>1,un[gn+2+32]=un[gn+0+64]=kn+Bn+1>>1,un[gn+1+0]=fo(_n,Pn,kn),un[gn+3+0]=un[gn+1+32]=fo(Pn,kn,Bn),un[gn+3+32]=un[gn+1+64]=fo(kn,Bn,Bn),un[gn+3+64]=un[gn+2+64]=un[gn+0+96]=un[gn+1+96]=un[gn+2+96]=un[gn+3+96]=Bn}function Th(un,gn){var _n=un[gn-1+0],Pn=un[gn-1+32],kn=un[gn-1+64],Bn=un[gn-1+96],Vn=un[gn-1-32],zn=un[gn+0-32],Wn=un[gn+1-32],_i=un[gn+2-32];un[gn+0+0]=un[gn+2+32]=_n+Vn+1>>1,un[gn+0+32]=un[gn+2+64]=Pn+_n+1>>1,un[gn+0+64]=un[gn+2+96]=kn+Pn+1>>1,un[gn+0+96]=Bn+kn+1>>1,un[gn+3+0]=fo(zn,Wn,_i),un[gn+2+0]=fo(Vn,zn,Wn),un[gn+1+0]=un[gn+3+32]=fo(_n,Vn,zn),un[gn+1+32]=un[gn+3+64]=fo(Pn,_n,Vn),un[gn+1+64]=un[gn+3+96]=fo(kn,Pn,_n),un[gn+1+96]=fo(Bn,kn,Pn)}function Lh(un,gn){var _n;for(_n=0;8>_n;++_n)ke(un,gn+32*_n,un,gn-32,8)}function zu(un,gn){var _n;for(_n=0;8>_n;++_n)Oe(un,gn,un[gn-1],8),gn+=32}function Qc(un,gn,_n){var Pn;for(Pn=0;8>Pn;++Pn)Oe(gn,_n+32*Pn,un,8)}function Dc(un,gn){var _n,Pn=8;for(_n=0;8>_n;++_n)Pn+=un[gn+_n-32]+un[gn-1+32*_n];Qc(Pn>>4,un,gn)}function Mh(un,gn){var _n,Pn=4;for(_n=0;8>_n;++_n)Pn+=un[gn+_n-32];Qc(Pn>>3,un,gn)}function eu(un,gn){var _n,Pn=4;for(_n=0;8>_n;++_n)Pn+=un[gn-1+32*_n];Qc(Pn>>3,un,gn)}function Hu(un,gn){Qc(128,un,gn)}function _u(un,gn,_n){var Pn=un[gn-_n],kn=un[gn+0],Bn=3*(kn-Pn)+Gh[1020+un[gn-2*_n]-un[gn+_n]],Vn=$d[112+(Bn+4>>3)];un[gn-_n]=rc[255+Pn+$d[112+(Bn+3>>3)]],un[gn+0]=rc[255+kn-Vn]}function Md(un,gn,_n,Pn){var kn=un[gn+0],Bn=un[gn+_n];return fc[255+un[gn-2*_n]-un[gn-_n]]>Pn||fc[255+Bn-kn]>Pn}function Nd(un,gn,_n,Pn){return 4*fc[255+un[gn-_n]-un[gn+0]]+fc[255+un[gn-2*_n]-un[gn+_n]]<=Pn}function kd(un,gn,_n,Pn,kn){var Bn=un[gn-3*_n],Vn=un[gn-2*_n],zn=un[gn-_n],Wn=un[gn+0],_i=un[gn+_n],Di=un[gn+2*_n],Xi=un[gn+3*_n];return 4*fc[255+zn-Wn]+fc[255+Vn-_i]>Pn?0:fc[255+un[gn-4*_n]-Bn]<=kn&&fc[255+Bn-Vn]<=kn&&fc[255+Vn-zn]<=kn&&fc[255+Xi-Di]<=kn&&fc[255+Di-_i]<=kn&&fc[255+_i-Wn]<=kn}function Od(un,gn,_n,Pn){var kn=2*Pn+1;for(Pn=0;16>Pn;++Pn)Nd(un,gn+Pn,_n,kn)&&_u(un,gn+Pn,_n)}function bc(un,gn,_n,Pn){var kn=2*Pn+1;for(Pn=0;16>Pn;++Pn)Nd(un,gn+Pn*_n,1,kn)&&_u(un,gn+Pn*_n,1)}function xc(un,gn,_n,Pn){var kn;for(kn=3;0<kn;--kn)Od(un,gn+=4*_n,_n,Pn)}function Rh(un,gn,_n,Pn){var kn;for(kn=3;0<kn;--kn)bc(un,gn+=4,_n,Pn)}function Gc(un,gn,_n,Pn,kn,Bn,Vn,zn){for(Bn=2*Bn+1;0<kn--;){if(kd(un,gn,_n,Bn,Vn))if(Md(un,gn,_n,zn))_u(un,gn,_n);else{var Wn=un,_i=gn,Di=_n,Xi=Wn[_i-2*Di],Qi=Wn[_i-Di],qi=Wn[_i+0],Yr=Wn[_i+Di],Nr=Wn[_i+2*Di],Gi=27*(Vr=Gh[1020+3*(qi-Qi)+Gh[1020+Xi-Yr]])+63>>7,ji=18*Vr+63>>7,Vr=9*Vr+63>>7;Wn[_i-3*Di]=rc[255+Wn[_i-3*Di]+Vr],Wn[_i-2*Di]=rc[255+Xi+ji],Wn[_i-Di]=rc[255+Qi+Gi],Wn[_i+0]=rc[255+qi-Gi],Wn[_i+Di]=rc[255+Yr-ji],Wn[_i+2*Di]=rc[255+Nr-Vr]}gn+=Pn}}function yc(un,gn,_n,Pn,kn,Bn,Vn,zn){for(Bn=2*Bn+1;0<kn--;){if(kd(un,gn,_n,Bn,Vn))if(Md(un,gn,_n,zn))_u(un,gn,_n);else{var Wn=un,_i=gn,Di=_n,Xi=Wn[_i-Di],Qi=Wn[_i+0],qi=Wn[_i+Di],Yr=$d[112+((Nr=3*(Qi-Xi))+4>>3)],Nr=$d[112+(Nr+3>>3)],Gi=Yr+1>>1;Wn[_i-2*Di]=rc[255+Wn[_i-2*Di]+Gi],Wn[_i-Di]=rc[255+Xi+Nr],Wn[_i+0]=rc[255+Qi-Yr],Wn[_i+Di]=rc[255+qi-Gi]}gn+=Pn}}function qu(un,gn,_n,Pn,kn,Bn){Gc(un,gn,_n,1,16,Pn,kn,Bn)}function tu(un,gn,_n,Pn,kn,Bn){Gc(un,gn,1,_n,16,Pn,kn,Bn)}function Nh(un,gn,_n,Pn,kn,Bn){var Vn;for(Vn=3;0<Vn;--Vn)yc(un,gn+=4*_n,_n,1,16,Pn,kn,Bn)}function Cu(un,gn,_n,Pn,kn,Bn){var Vn;for(Vn=3;0<Vn;--Vn)yc(un,gn+=4,1,_n,16,Pn,kn,Bn)}function kh(un,gn,_n,Pn,kn,Bn,Vn,zn){Gc(un,gn,kn,1,8,Bn,Vn,zn),Gc(_n,Pn,kn,1,8,Bn,Vn,zn)}function Wu(un,gn,_n,Pn,kn,Bn,Vn,zn){Gc(un,gn,1,kn,8,Bn,Vn,zn),Gc(_n,Pn,1,kn,8,Bn,Vn,zn)}function $u(un,gn,_n,Pn,kn,Bn,Vn,zn){yc(un,gn+4*kn,kn,1,8,Bn,Vn,zn),yc(_n,Pn+4*kn,kn,1,8,Bn,Vn,zn)}function Dd(un,gn,_n,Pn,kn,Bn,Vn,zn){yc(un,gn+4,1,kn,8,Bn,Vn,zn),yc(_n,Pn+4,1,kn,8,Bn,Vn,zn)}function Eu(){this.ba=new jo,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new yo,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Yu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ku(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Gd(){this.ua=0,this.Wa=new Fn,this.vb=new Fn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Rn,this.yc=new An}function Oh(){this.xb=this.a=0,this.l=new gu,this.ca=new jo,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new xn,this.Pb=0,this.wd=new xn,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Gd,this.ab=0,this.gc=Be(4,Ku),this.Oc=0}function Su(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new gu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function nu(un,gn,_n,Pn,kn,Bn,Vn){for(un=un==null?0:un[gn+0],gn=0;gn<Vn;++gn)kn[Bn+gn]=un+_n[Pn+gn]&255,un=kn[Bn+gn]}function Xu(un,gn,_n,Pn,kn,Bn,Vn){var zn;if(un==null)nu(null,null,_n,Pn,kn,Bn,Vn);else for(zn=0;zn<Vn;++zn)kn[Bn+zn]=un[gn+zn]+_n[Pn+zn]&255}function Fc(un,gn,_n,Pn,kn,Bn,Vn){if(un==null)nu(null,null,_n,Pn,kn,Bn,Vn);else{var zn,Wn=un[gn+0],_i=Wn,Di=Wn;for(zn=0;zn<Vn;++zn)_i=Di+(Wn=un[gn+zn])-_i,Di=_n[Pn+zn]+(-256&_i?0>_i?0:255:_i)&255,_i=Wn,kn[Bn+zn]=Di}}function Zu(un,gn,_n,Pn){var kn=gn.width,Bn=gn.o;if(e(un!=null&&gn!=null),0>_n||0>=Pn||_n+Pn>Bn)return null;if(!un.Cc){if(un.ga==null){var Vn;if(un.ga=new Su,(Vn=un.ga==null)||(Vn=gn.width*gn.o,e(un.Gb.length==0),un.Gb=Ge(Vn),un.Uc=0,un.Gb==null?Vn=0:(un.mb=un.Gb,un.nb=un.Uc,un.rc=null,Vn=1),Vn=!Vn),!Vn){Vn=un.ga;var zn=un.Fa,Wn=un.P,_i=un.qc,Di=un.mb,Xi=un.nb,Qi=Wn+1,qi=_i-1,Yr=Vn.l;if(e(zn!=null&&Di!=null&&gn!=null),qc[0]=null,qc[1]=nu,qc[2]=Xu,qc[3]=Fc,Vn.ca=Di,Vn.tb=Xi,Vn.c=gn.width,Vn.i=gn.height,e(0<Vn.c&&0<Vn.i),1>=_i)gn=0;else if(Vn.$a=zn[Wn+0]>>0&3,Vn.Z=zn[Wn+0]>>2&3,Vn.Lc=zn[Wn+0]>>4&3,Wn=zn[Wn+0]>>6&3,0>Vn.$a||1<Vn.$a||4<=Vn.Z||1<Vn.Lc||Wn)gn=0;else if(Yr.put=Aa,Yr.ac=ko,Yr.bc=uo,Yr.ma=Vn,Yr.width=gn.width,Yr.height=gn.height,Yr.Da=gn.Da,Yr.v=gn.v,Yr.va=gn.va,Yr.j=gn.j,Yr.o=gn.o,Vn.$a)e:{e(Vn.$a==1),gn=Va();t:for(;;){if(gn==null){gn=0;break e}if(e(Vn!=null),Vn.mc=gn,gn.c=Vn.c,gn.i=Vn.i,gn.l=Vn.l,gn.l.ma=Vn,gn.l.width=Vn.c,gn.l.height=Vn.i,gn.a=0,Dn(gn.m,zn,Qi,qi),!Ec(Vn.c,Vn.i,1,gn,null)||(gn.ab==1&&gn.gc[0].hc==3&&Za(gn.s)?(Vn.ic=1,zn=gn.c*gn.i,gn.Ta=null,gn.Ua=0,gn.V=Ge(zn),gn.Ba=0,gn.V==null?(gn.a=1,gn=0):gn=1):(Vn.ic=0,gn=Jc(gn,Vn.c)),!gn))break t;gn=1;break e}Vn.mc=null,gn=0}else gn=qi>=Vn.c*Vn.i;Vn=!gn}if(Vn)return null;un.ga.Lc!=1?un.Ga=0:Pn=Bn-_n}e(un.ga!=null),e(_n+Pn<=Bn);e:{if(gn=(zn=un.ga).c,Bn=zn.l.o,zn.$a==0){if(Qi=un.rc,qi=un.Vc,Yr=un.Fa,Wn=un.P+1+_n*gn,_i=un.mb,Di=un.nb+_n*gn,e(Wn<=un.P+un.qc),zn.Z!=0)for(e(qc[zn.Z]!=null),Vn=0;Vn<Pn;++Vn)qc[zn.Z](Qi,qi,Yr,Wn,_i,Di,gn),Qi=_i,qi=Di,Di+=gn,Wn+=gn;else for(Vn=0;Vn<Pn;++Vn)ke(_i,Di,Yr,Wn,gn),Qi=_i,qi=Di,Di+=gn,Wn+=gn;un.rc=Qi,un.Vc=qi}else{if(e(zn.mc!=null),gn=_n+Pn,e((Vn=zn.mc)!=null),e(gn<=Vn.i),Vn.C>=gn)gn=1;else if(zn.ic||Yi(),zn.ic){zn=Vn.V,Qi=Vn.Ba,qi=Vn.c;var Nr=Vn.i,Gi=(Yr=1,Wn=Vn.$/qi,_i=Vn.$%qi,Di=Vn.m,Xi=Vn.s,Vn.$),ji=qi*Nr,Vr=qi*gn,Xr=Xi.wc,Hr=Gi<Vr?ta(Xi,_i,Wn):null;e(Gi<=ji),e(gn<=Nr),e(Za(Xi));t:for(;;){for(;!Di.h&&Gi<Vr;){if(_i&Xr||(Hr=ta(Xi,_i,Wn)),e(Hr!=null),Ti(Di),256>(Nr=Fo(Hr.G[0],Hr.H[0],Di)))zn[Qi+Gi]=Nr,++Gi,++_i>=qi&&(_i=0,++Wn<=gn&&!(Wn%16)&&nc(Vn,Wn));else{if(!(280>Nr)){Yr=0;break t}Nr=Oa(Nr-256,Di);var Qs,Us=Fo(Hr.G[4],Hr.H[4],Di);if(Ti(Di),!(Gi>=(Us=qo(qi,Us=Oa(Us,Di)))&&ji-Gi>=Nr)){Yr=0;break t}for(Qs=0;Qs<Nr;++Qs)zn[Qi+Gi+Qs]=zn[Qi+Gi+Qs-Us];for(Gi+=Nr,_i+=Nr;_i>=qi;)_i-=qi,++Wn<=gn&&!(Wn%16)&&nc(Vn,Wn);Gi<Vr&&_i&Xr&&(Hr=ta(Xi,_i,Wn))}e(Di.h==$n(Di))}nc(Vn,Wn>gn?gn:Wn);break t}!Yr||Di.h&&Gi<ji?(Yr=0,Vn.a=Di.h?5:3):Vn.$=Gi,gn=Yr}else gn=Tl(Vn,Vn.V,Vn.Ba,Vn.c,Vn.i,gn,uu);if(!gn){Pn=0;break e}}_n+Pn>=Bn&&(un.Cc=1),Pn=1}if(!Pn)return null;if(un.Cc&&((Pn=un.ga)!=null&&(Pn.mc=null),un.ga=null,0<un.Ga))return alert("todo:WebPDequantizeLevels"),null}return un.nb+_n*kn}function vn(un,gn,_n,Pn,kn,Bn){for(;0<kn--;){var Vn,zn=un,Wn=gn+(_n?1:0),_i=un,Di=gn+(_n?0:3);for(Vn=0;Vn<Pn;++Vn){var Xi=_i[Di+4*Vn];Xi!=255&&(Xi*=32897,zn[Wn+4*Vn+0]=zn[Wn+4*Vn+0]*Xi>>23,zn[Wn+4*Vn+1]=zn[Wn+4*Vn+1]*Xi>>23,zn[Wn+4*Vn+2]=zn[Wn+4*Vn+2]*Xi>>23)}gn+=Bn}}function On(un,gn,_n,Pn,kn){for(;0<Pn--;){var Bn;for(Bn=0;Bn<_n;++Bn){var Vn=un[gn+2*Bn+0],zn=15&(_i=un[gn+2*Bn+1]),Wn=4369*zn,_i=(240&_i|_i>>4)*Wn>>16;un[gn+2*Bn+0]=(240&Vn|Vn>>4)*Wn>>16&240|(15&Vn|Vn<<4)*Wn>>16>>4&15,un[gn+2*Bn+1]=240&_i|zn}gn+=kn}}function Ei(un,gn,_n,Pn,kn,Bn,Vn,zn){var Wn,_i,Di=255;for(_i=0;_i<kn;++_i){for(Wn=0;Wn<Pn;++Wn){var Xi=un[gn+Wn];Bn[Vn+4*Wn]=Xi,Di&=Xi}gn+=_n,Vn+=zn}return Di!=255}function Ni(un,gn,_n,Pn,kn){var Bn;for(Bn=0;Bn<kn;++Bn)_n[Pn+Bn]=un[gn+Bn]>>8}function Yi(){hc=vn,Qo=On,ea=Ei,xa=Ni}function Fr(un,gn,_n){Sn[un]=function(Pn,kn,Bn,Vn,zn,Wn,_i,Di,Xi,Qi,qi,Yr,Nr,Gi,ji,Vr,Xr){var Hr,Qs=Xr-1>>1,Us=zn[Wn+0]|_i[Di+0]<<16,lo=Xi[Qi+0]|qi[Yr+0]<<16;e(Pn!=null);var Ks=3*Us+lo+131074>>2;for(gn(Pn[kn+0],255&Ks,Ks>>16,Nr,Gi),Bn!=null&&(Ks=3*lo+Us+131074>>2,gn(Bn[Vn+0],255&Ks,Ks>>16,ji,Vr)),Hr=1;Hr<=Qs;++Hr){var Go=zn[Wn+Hr]|_i[Di+Hr]<<16,Wo=Xi[Qi+Hr]|qi[Yr+Hr]<<16,No=Us+Go+lo+Wo+524296,bo=No+2*(Go+lo)>>3;Ks=bo+Us>>1,Us=(No=No+2*(Us+Wo)>>3)+Go>>1,gn(Pn[kn+2*Hr-1],255&Ks,Ks>>16,Nr,Gi+(2*Hr-1)*_n),gn(Pn[kn+2*Hr-0],255&Us,Us>>16,Nr,Gi+(2*Hr-0)*_n),Bn!=null&&(Ks=No+lo>>1,Us=bo+Wo>>1,gn(Bn[Vn+2*Hr-1],255&Ks,Ks>>16,ji,Vr+(2*Hr-1)*_n),gn(Bn[Vn+2*Hr+0],255&Us,Us>>16,ji,Vr+(2*Hr+0)*_n)),Us=Go,lo=Wo}1&Xr||(Ks=3*Us+lo+131074>>2,gn(Pn[kn+Xr-1],255&Ks,Ks>>16,Nr,Gi+(Xr-1)*_n),Bn!=null&&(Ks=3*lo+Us+131074>>2,gn(Bn[Vn+Xr-1],255&Ks,Ks>>16,ji,Vr+(Xr-1)*_n)))}}function xs(){pc[Yd]=vp,pc[Kd]=lf,pc[nf]=yp,pc[Xd]=cf,pc[Zd]=uf,pc[Fh]=df,pc[rf]=Ap,pc[Bh]=lf,pc[Uh]=cf,pc[Jd]=uf,pc[jh]=df}function Js(un){return un&~_p?0>un?0:255:un>>hf}function ro(un,gn){return Js((19077*un>>8)+(26149*gn>>8)-14234)}function go(un,gn,_n){return Js((19077*un>>8)-(6419*gn>>8)-(13320*_n>>8)+8708)}function po(un,gn){return Js((19077*un>>8)+(33050*gn>>8)-17685)}function wo(un,gn,_n,Pn,kn){Pn[kn+0]=ro(un,_n),Pn[kn+1]=go(un,gn,_n),Pn[kn+2]=po(un,gn)}function aa(un,gn,_n,Pn,kn){Pn[kn+0]=po(un,gn),Pn[kn+1]=go(un,gn,_n),Pn[kn+2]=ro(un,_n)}function Ea(un,gn,_n,Pn,kn){var Bn=go(un,gn,_n);gn=Bn<<3&224|po(un,gn)>>3,Pn[kn+0]=248&ro(un,_n)|Bn>>5,Pn[kn+1]=gn}function Ma(un,gn,_n,Pn,kn){var Bn=240&po(un,gn)|15;Pn[kn+0]=240&ro(un,_n)|go(un,gn,_n)>>4,Pn[kn+1]=Bn}function Xa(un,gn,_n,Pn,kn){Pn[kn+0]=255,wo(un,gn,_n,Pn,kn+1)}function Da(un,gn,_n,Pn,kn){aa(un,gn,_n,Pn,kn),Pn[kn+3]=255}function Ac(un,gn,_n,Pn,kn){wo(un,gn,_n,Pn,kn),Pn[kn+3]=255}function ic(un,gn){return 0>un?0:un>gn?gn:un}function Ic(un,gn,_n){Sn[un]=function(Pn,kn,Bn,Vn,zn,Wn,_i,Di,Xi){for(var Qi=Di+(-2&Xi)*_n;Di!=Qi;)gn(Pn[kn+0],Bn[Vn+0],zn[Wn+0],_i,Di),gn(Pn[kn+1],Bn[Vn+0],zn[Wn+0],_i,Di+_n),kn+=2,++Vn,++Wn,Di+=2*_n;1&Xi&&gn(Pn[kn+0],Bn[Vn+0],zn[Wn+0],_i,Di)}}function Fd(un,gn,_n){return _n==0?un==0?gn==0?6:5:gn==0?4:0:_n}function Ju(un,gn,_n,Pn,kn){switch(un>>>30){case 3:Mc(gn,_n,Pn,kn,0);break;case 2:Pa(gn,_n,Pn,kn);break;case 1:Al(gn,_n,Pn,kn)}}function Qu(un,gn){var _n,Pn,kn=gn.M,Bn=gn.Nb,Vn=un.oc,zn=un.pc+40,Wn=un.oc,_i=un.pc+584,Di=un.oc,Xi=un.pc+600;for(_n=0;16>_n;++_n)Vn[zn+32*_n-1]=129;for(_n=0;8>_n;++_n)Wn[_i+32*_n-1]=129,Di[Xi+32*_n-1]=129;for(0<kn?Vn[zn-1-32]=Wn[_i-1-32]=Di[Xi-1-32]=129:(Oe(Vn,zn-32-1,127,21),Oe(Wn,_i-32-1,127,9),Oe(Di,Xi-32-1,127,9)),Pn=0;Pn<un.za;++Pn){var Qi=gn.ya[gn.aa+Pn];if(0<Pn){for(_n=-1;16>_n;++_n)ke(Vn,zn+32*_n-4,Vn,zn+32*_n+12,4);for(_n=-1;8>_n;++_n)ke(Wn,_i+32*_n-4,Wn,_i+32*_n+4,4),ke(Di,Xi+32*_n-4,Di,Xi+32*_n+4,4)}var qi=un.Gd,Yr=un.Hd+Pn,Nr=Qi.ad,Gi=Qi.Hc;if(0<kn&&(ke(Vn,zn-32,qi[Yr].y,0,16),ke(Wn,_i-32,qi[Yr].f,0,8),ke(Di,Xi-32,qi[Yr].ea,0,8)),Qi.Za){var ji=Vn,Vr=zn-32+16;for(0<kn&&(Pn>=un.za-1?Oe(ji,Vr,qi[Yr].y[15],4):ke(ji,Vr,qi[Yr+1].y,0,4)),_n=0;4>_n;_n++)ji[Vr+128+_n]=ji[Vr+256+_n]=ji[Vr+384+_n]=ji[Vr+0+_n];for(_n=0;16>_n;++_n,Gi<<=2)ji=Vn,Vr=zn+pf[_n],_c[Qi.Ob[_n]](ji,Vr),Ju(Gi,Nr,16*+_n,ji,Vr)}else if(ji=Fd(Pn,kn,Qi.Ob[0]),zc[ji](Vn,zn),Gi!=0)for(_n=0;16>_n;++_n,Gi<<=2)Ju(Gi,Nr,16*+_n,Vn,zn+pf[_n]);for(_n=Qi.Gc,ji=Fd(Pn,kn,Qi.Dd),Nc[ji](Wn,_i),Nc[ji](Di,Xi),Gi=Nr,ji=Wn,Vr=_i,255&(Qi=_n>>0)&&(170&Qi?od(Gi,256,ji,Vr):uc(Gi,256,ji,Vr)),Qi=Di,Gi=Xi,255&(_n>>=8)&&(170&_n?od(Nr,320,Qi,Gi):uc(Nr,320,Qi,Gi)),kn<un.Ub-1&&(ke(qi[Yr].y,0,Vn,zn+480,16),ke(qi[Yr].f,0,Wn,_i+224,8),ke(qi[Yr].ea,0,Di,Xi+224,8)),_n=8*Bn*un.B,qi=un.sa,Yr=un.ta+16*Pn+16*Bn*un.R,Nr=un.qa,Qi=un.ra+8*Pn+_n,Gi=un.Ha,ji=un.Ia+8*Pn+_n,_n=0;16>_n;++_n)ke(qi,Yr+_n*un.R,Vn,zn+32*_n,16);for(_n=0;8>_n;++_n)ke(Nr,Qi+_n*un.B,Wn,_i+32*_n,8),ke(Gi,ji+_n*un.B,Di,Xi+32*_n,8)}}function bu(un,gn,_n,Pn,kn,Bn,Vn,zn,Wn){var _i=[0],Di=[0],Xi=0,Qi=Wn!=null?Wn.kd:0,qi=Wn??new Yu;if(un==null||12>_n)return 7;qi.data=un,qi.w=gn,qi.ha=_n,gn=[gn],_n=[_n],qi.gb=[qi.gb];e:{var Yr=gn,Nr=_n,Gi=qi.gb;if(e(un!=null),e(Nr!=null),e(Gi!=null),Gi[0]=0,12<=Nr[0]&&!t(un,Yr[0],"RIFF")){if(t(un,Yr[0]+8,"WEBP")){Gi=3;break e}var ji=Un(un,Yr[0]+4);if(12>ji||4294967286<ji){Gi=3;break e}if(Qi&&ji>Nr[0]-8){Gi=7;break e}Gi[0]=ji,Yr[0]+=12,Nr[0]-=12}Gi=0}if(Gi!=0)return Gi;for(ji=0<qi.gb[0],_n=_n[0];;){e:{var Vr=un;Nr=gn,Gi=_n;var Xr=_i,Hr=Di,Qs=Yr=[0];if((Ks=Xi=[Xi])[0]=0,8>Gi[0])Gi=7;else{if(!t(Vr,Nr[0],"VP8X")){if(Un(Vr,Nr[0]+4)!=10){Gi=3;break e}if(18>Gi[0]){Gi=7;break e}var Us=Un(Vr,Nr[0]+8),lo=1+Br(Vr,Nr[0]+12);if(2147483648<=lo*(Vr=1+Br(Vr,Nr[0]+15))){Gi=3;break e}Qs!=null&&(Qs[0]=Us),Xr!=null&&(Xr[0]=lo),Hr!=null&&(Hr[0]=Vr),Nr[0]+=18,Gi[0]-=18,Ks[0]=1}Gi=0}}if(Xi=Xi[0],Yr=Yr[0],Gi!=0)return Gi;if(Nr=!!(2&Yr),!ji&&Xi)return 3;if(Bn!=null&&(Bn[0]=!!(16&Yr)),Vn!=null&&(Vn[0]=Nr),zn!=null&&(zn[0]=0),Vn=_i[0],Yr=Di[0],Xi&&Nr&&Wn==null){Gi=0;break}if(4>_n){Gi=7;break}if(ji&&Xi||!ji&&!Xi&&!t(un,gn[0],"ALPH")){_n=[_n],qi.na=[qi.na],qi.P=[qi.P],qi.Sa=[qi.Sa];e:{Us=un,Gi=gn,ji=_n;var Ks=qi.gb;Xr=qi.na,Hr=qi.P,Qs=qi.Sa,lo=22,e(Us!=null),e(ji!=null),Vr=Gi[0];var Go=ji[0];for(e(Xr!=null),e(Qs!=null),Xr[0]=null,Hr[0]=null,Qs[0]=0;;){if(Gi[0]=Vr,ji[0]=Go,8>Go){Gi=7;break e}var Wo=Un(Us,Vr+4);if(4294967286<Wo){Gi=3;break e}var No=8+Wo+1&-2;if(lo+=No,0<Ks&&lo>Ks){Gi=3;break e}if(!t(Us,Vr,"VP8 ")||!t(Us,Vr,"VP8L")){Gi=0;break e}if(Go[0]<No){Gi=7;break e}t(Us,Vr,"ALPH")||(Xr[0]=Us,Hr[0]=Vr+8,Qs[0]=Wo),Vr+=No,Go-=No}}if(_n=_n[0],qi.na=qi.na[0],qi.P=qi.P[0],qi.Sa=qi.Sa[0],Gi!=0)break}_n=[_n],qi.Ja=[qi.Ja],qi.xa=[qi.xa];e:if(Ks=un,Gi=gn,ji=_n,Xr=qi.gb[0],Hr=qi.Ja,Qs=qi.xa,Us=Gi[0],Vr=!t(Ks,Us,"VP8 "),lo=!t(Ks,Us,"VP8L"),e(Ks!=null),e(ji!=null),e(Hr!=null),e(Qs!=null),8>ji[0])Gi=7;else{if(Vr||lo){if(Ks=Un(Ks,Us+4),12<=Xr&&Ks>Xr-12){Gi=3;break e}if(Qi&&Ks>ji[0]-8){Gi=7;break e}Hr[0]=Ks,Gi[0]+=8,ji[0]-=8,Qs[0]=lo}else Qs[0]=5<=ji[0]&&Ks[Us+0]==47&&!(Ks[Us+4]>>5),Hr[0]=ji[0];Gi=0}if(_n=_n[0],qi.Ja=qi.Ja[0],qi.xa=qi.xa[0],gn=gn[0],Gi!=0)break;if(4294967286<qi.Ja)return 3;if(zn==null||Nr||(zn[0]=qi.xa?2:1),Vn=[Vn],Yr=[Yr],qi.xa){if(5>_n){Gi=7;break}zn=Vn,Qi=Yr,Nr=Bn,un==null||5>_n?un=0:5<=_n&&un[gn+0]==47&&!(un[gn+4]>>5)?(ji=[0],Ks=[0],Xr=[0],Dn(Hr=new xn,un,gn,_n),eo(Hr,ji,Ks,Xr)?(zn!=null&&(zn[0]=ji[0]),Qi!=null&&(Qi[0]=Ks[0]),Nr!=null&&(Nr[0]=Xr[0]),un=1):un=0):un=0}else{if(10>_n){Gi=7;break}zn=Yr,un==null||10>_n||!Cd(un,gn+3,_n-3)?un=0:(Qi=un[gn+0]|un[gn+1]<<8|un[gn+2]<<16,Nr=16383&(un[gn+7]<<8|un[gn+6]),un=16383&(un[gn+9]<<8|un[gn+8]),1&Qi||3<(Qi>>1&7)||!(Qi>>4&1)||Qi>>5>=qi.Ja||!Nr||!un?un=0:(Vn&&(Vn[0]=Nr),zn&&(zn[0]=un),un=1))}if(!un||(Vn=Vn[0],Yr=Yr[0],Xi&&(_i[0]!=Vn||Di[0]!=Yr)))return 3;Wn!=null&&(Wn[0]=qi,Wn.offset=gn-Wn.w,e(4294967286>gn-Wn.w),e(Wn.offset==Wn.ha-_n));break}return Gi==0||Gi==7&&Xi&&Wn==null?(Bn!=null&&(Bn[0]|=qi.na!=null&&0<qi.na.length),Pn!=null&&(Pn[0]=Vn),kn!=null&&(kn[0]=Yr),0):Gi}function nd(un,gn,_n){var Pn=gn.width,kn=gn.height,Bn=0,Vn=0,zn=Pn,Wn=kn;if(gn.Da=un!=null&&0<un.Da,gn.Da&&(zn=un.cd,Wn=un.bd,Bn=un.v,Vn=un.j,11>_n||(Bn&=-2,Vn&=-2),0>Bn||0>Vn||0>=zn||0>=Wn||Bn+zn>Pn||Vn+Wn>kn))return 0;if(gn.v=Bn,gn.j=Vn,gn.va=Bn+zn,gn.o=Vn+Wn,gn.U=zn,gn.T=Wn,gn.da=un!=null&&0<un.da,gn.da){if(!Hi(zn,Wn,_n=[un.ib],Bn=[un.hb]))return 0;gn.ib=_n[0],gn.hb=Bn[0]}return gn.ob=un!=null&&un.ob,gn.Kb=un==null||!un.Sd,gn.da&&(gn.ob=gn.ib<3*Pn/4&&gn.hb<3*kn/4,gn.Kb=0),1}function id(un){if(un==null)return 2;if(11>un.S){var gn=un.f.RGBA;gn.fb+=(un.height-1)*gn.A,gn.A=-gn.A}else gn=un.f.kb,un=un.height,gn.O+=(un-1)*gn.fa,gn.fa=-gn.fa,gn.N+=(un-1>>1)*gn.Ab,gn.Ab=-gn.Ab,gn.W+=(un-1>>1)*gn.Db,gn.Db=-gn.Db,gn.F!=null&&(gn.J+=(un-1)*gn.lb,gn.lb=-gn.lb);return 0}function Iu(un,gn,_n,Pn){if(Pn==null||0>=un||0>=gn)return 2;if(_n!=null){if(_n.Da){var kn=_n.cd,Bn=_n.bd,Vn=-2&_n.v,zn=-2&_n.j;if(0>Vn||0>zn||0>=kn||0>=Bn||Vn+kn>un||zn+Bn>gn)return 2;un=kn,gn=Bn}if(_n.da){if(!Hi(un,gn,kn=[_n.ib],Bn=[_n.hb]))return 2;un=kn[0],gn=Bn[0]}}Pn.width=un,Pn.height=gn;e:{var Wn=Pn.width,_i=Pn.height;if(un=Pn.S,0>=Wn||0>=_i||!(un>=Yd&&13>un))un=2;else{if(0>=Pn.Rd&&Pn.sd==null){Vn=Bn=kn=gn=0;var Di=(zn=Wn*gf[un])*_i;if(11>un||(Bn=(_i+1)/2*(gn=(Wn+1)/2),un==12&&(Vn=(kn=Wn)*_i)),(_i=Ge(Di+2*Bn+Vn))==null){un=1;break e}Pn.sd=_i,11>un?((Wn=Pn.f.RGBA).eb=_i,Wn.fb=0,Wn.A=zn,Wn.size=Di):((Wn=Pn.f.kb).y=_i,Wn.O=0,Wn.fa=zn,Wn.Fd=Di,Wn.f=_i,Wn.N=0+Di,Wn.Ab=gn,Wn.Cd=Bn,Wn.ea=_i,Wn.W=0+Di+Bn,Wn.Db=gn,Wn.Ed=Bn,un==12&&(Wn.F=_i,Wn.J=0+Di+2*Bn),Wn.Tc=Vn,Wn.lb=kn)}if(gn=1,kn=Pn.S,Bn=Pn.width,Vn=Pn.height,kn>=Yd&&13>kn)if(11>kn)un=Pn.f.RGBA,gn&=(zn=Math.abs(un.A))*(Vn-1)+Bn<=un.size,gn&=zn>=Bn*gf[kn],gn&=un.eb!=null;else{un=Pn.f.kb,zn=(Bn+1)/2,Di=(Vn+1)/2,Wn=Math.abs(un.fa),_i=Math.abs(un.Ab);var Xi=Math.abs(un.Db),Qi=Math.abs(un.lb),qi=Qi*(Vn-1)+Bn;gn&=Wn*(Vn-1)+Bn<=un.Fd,gn&=_i*(Di-1)+zn<=un.Cd,gn=(gn&=Xi*(Di-1)+zn<=un.Ed)&Wn>=Bn&_i>=zn&Xi>=zn,gn&=un.y!=null,gn&=un.f!=null,gn&=un.ea!=null,kn==12&&(gn&=Qi>=Bn,gn&=qi<=un.Tc,gn&=un.F!=null)}else gn=0;un=gn?0:2}}return un!=0||_n!=null&&_n.fd&&(un=id(Pn)),un}var za=64,wu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pu=24,xu=32,rd=8,Bl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Vi("Predictor0","PredictorAdd0"),Sn.Predictor0=function(){return 4278190080},Sn.Predictor1=function(un){return un},Sn.Predictor2=function(un,gn,_n){return gn[_n+0]},Sn.Predictor3=function(un,gn,_n){return gn[_n+1]},Sn.Predictor4=function(un,gn,_n){return gn[_n-1]},Sn.Predictor5=function(un,gn,_n){return Fi(Fi(un,gn[_n+1]),gn[_n+0])},Sn.Predictor6=function(un,gn,_n){return Fi(un,gn[_n-1])},Sn.Predictor7=function(un,gn,_n){return Fi(un,gn[_n+0])},Sn.Predictor8=function(un,gn,_n){return Fi(gn[_n-1],gn[_n+0])},Sn.Predictor9=function(un,gn,_n){return Fi(gn[_n+0],gn[_n+1])},Sn.Predictor10=function(un,gn,_n){return Fi(Fi(un,gn[_n-1]),Fi(gn[_n+0],gn[_n+1]))},Sn.Predictor11=function(un,gn,_n){var Pn=gn[_n+0];return 0>=Ri(Pn>>24&255,un>>24&255,(gn=gn[_n-1])>>24&255)+Ri(Pn>>16&255,un>>16&255,gn>>16&255)+Ri(Pn>>8&255,un>>8&255,gn>>8&255)+Ri(255&Pn,255&un,255&gn)?Pn:un},Sn.Predictor12=function(un,gn,_n){var Pn=gn[_n+0];return(Si((un>>24&255)+(Pn>>24&255)-((gn=gn[_n-1])>>24&255))<<24|Si((un>>16&255)+(Pn>>16&255)-(gn>>16&255))<<16|Si((un>>8&255)+(Pn>>8&255)-(gn>>8&255))<<8|Si((255&un)+(255&Pn)-(255&gn)))>>>0},Sn.Predictor13=function(un,gn,_n){var Pn=gn[_n-1];return(Li((un=Fi(un,gn[_n+0]))>>24&255,Pn>>24&255)<<24|Li(un>>16&255,Pn>>16&255)<<16|Li(un>>8&255,Pn>>8&255)<<8|Li(un>>0&255,Pn>>0&255))>>>0};var Dh=Sn.PredictorAdd0;Sn.PredictorAdd1=$i,Vi("Predictor2","PredictorAdd2"),Vi("Predictor3","PredictorAdd3"),Vi("Predictor4","PredictorAdd4"),Vi("Predictor5","PredictorAdd5"),Vi("Predictor6","PredictorAdd6"),Vi("Predictor7","PredictorAdd7"),Vi("Predictor8","PredictorAdd8"),Vi("Predictor9","PredictorAdd9"),Vi("Predictor10","PredictorAdd10"),Vi("Predictor11","PredictorAdd11"),Vi("Predictor12","PredictorAdd12"),Vi("Predictor13","PredictorAdd13");var sd=Sn.PredictorAdd2;Gs("ColorIndexInverseTransform","MapARGB","32b",function(un){return un>>8&255},function(un){return un}),Gs("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(un){return un},function(un){return un>>8&255});var Ud,cc=Sn.ColorIndexInverseTransform,Tu=Sn.MapARGB,jd=Sn.VP8LColorIndexInverseTransformAlpha,zd=Sn.MapAlpha,Bc=Sn.VP8LPredictorsAdd=[];Bc.length=16,(Sn.VP8LPredictors=[]).length=16,(Sn.VP8LPredictorsAdd_C=[]).length=16,(Sn.VP8LPredictors_C=[]).length=16;var iu,Vl,Ja,Uc,Tc,Lc,Lu,Mc,Pa,od,Al,uc,Mu,qd,ad,ru,su,jc,ou,Ru,au,Vc,ld,dc,hc,Qo,ea,xa,ka=Ge(511),Rc=Ge(2041),cd=Ge(225),Nu=Ge(767),Wd=0,Gh=Rc,$d=cd,rc=Nu,fc=ka,Yd=0,Kd=1,nf=2,Xd=3,Zd=4,Fh=5,rf=6,Bh=7,Uh=8,Jd=9,jh=10,np=[2,3,7],ip=[3,3,11],sf=[280,256,256,256,40],rp=[0,1,1,1,0],op=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ap=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],lp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],cp=8,Vh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],zh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ud=null,up=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],dp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],of=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],hp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],fp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],gp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],zc=[],_c=[],Nc=[],mp=1,af=2,qc=[],pc=[];Fr("UpsampleRgbLinePair",wo,3),Fr("UpsampleBgrLinePair",aa,3),Fr("UpsampleRgbaLinePair",Ac,4),Fr("UpsampleBgraLinePair",Da,4),Fr("UpsampleArgbLinePair",Xa,4),Fr("UpsampleRgba4444LinePair",Ma,2),Fr("UpsampleRgb565LinePair",Ea,2);var vp=Sn.UpsampleRgbLinePair,yp=Sn.UpsampleBgrLinePair,lf=Sn.UpsampleRgbaLinePair,cf=Sn.UpsampleBgraLinePair,uf=Sn.UpsampleArgbLinePair,df=Sn.UpsampleRgba4444LinePair,Ap=Sn.UpsampleRgb565LinePair,Qd=16,eh=1<<Qd-1,dd=-227,Hh=482,hf=6,_p=(256<<hf)-1,ff=0,Cp=Ge(256),Ep=Ge(256),Sp=Ge(256),bp=Ge(256),Ip=Ge(Hh-dd),wp=Ge(Hh-dd);Ic("YuvToRgbRow",wo,3),Ic("YuvToBgrRow",aa,3),Ic("YuvToRgbaRow",Ac,4),Ic("YuvToBgraRow",Da,4),Ic("YuvToArgbRow",Xa,4),Ic("YuvToRgba4444Row",Ma,2),Ic("YuvToRgb565Row",Ea,2);var pf=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],th=[0,2,8],Pp=[8,7,6,4,4,2,2,2,1,1,1,1],xp=1;this.WebPDecodeRGBA=function(un,gn,_n,Pn,kn){var Bn=Kd,Vn=new Eu,zn=new jo;Vn.ba=zn,zn.S=Bn,zn.width=[zn.width],zn.height=[zn.height];var Wn=zn.width,_i=zn.height,Di=new na;if(Di==null||un==null)var Xi=2;else e(Di!=null),Xi=bu(un,gn,_n,Di.width,Di.height,Di.Pd,Di.Qd,Di.format,null);if(Xi!=0?Wn=0:(Wn!=null&&(Wn[0]=Di.width[0]),_i!=null&&(_i[0]=Di.height[0]),Wn=1),Wn){zn.width=zn.width[0],zn.height=zn.height[0],Pn!=null&&(Pn[0]=zn.width),kn!=null&&(kn[0]=zn.height);e:{if(Pn=new gu,(kn=new Yu).data=un,kn.w=gn,kn.ha=_n,kn.kd=1,gn=[0],e(kn!=null),((un=bu(kn.data,kn.w,kn.ha,null,null,null,gn,null,kn))==0||un==7)&&gn[0]&&(un=4),(gn=un)==0){if(e(Vn!=null),Pn.data=kn.data,Pn.w=kn.w+kn.offset,Pn.ha=kn.ha-kn.offset,Pn.put=Aa,Pn.ac=ko,Pn.bc=uo,Pn.ma=Vn,kn.xa){if((un=Va())==null){Vn=1;break e}if(function(Qi,qi){var Yr=[0],Nr=[0],Gi=[0];t:for(;;){if(Qi==null)return 0;if(qi==null)return Qi.a=2,0;if(Qi.l=qi,Qi.a=0,Dn(Qi.m,qi.data,qi.w,qi.ha),!eo(Qi.m,Yr,Nr,Gi)){Qi.a=3;break t}if(Qi.xb=af,qi.width=Yr[0],qi.height=Nr[0],!Ec(Yr[0],Nr[0],1,Qi,null))break t;return 1}return e(Qi.a!=0),0}(un,Pn)){if(Pn=(gn=Iu(Pn.width,Pn.height,Vn.Oa,Vn.ba))==0){t:{Pn=un;n:for(;;){if(Pn==null){Pn=0;break t}if(e(Pn.s.yc!=null),e(Pn.s.Ya!=null),e(0<Pn.s.Wb),e((_n=Pn.l)!=null),e((kn=_n.ma)!=null),Pn.xb!=0){if(Pn.ca=kn.ba,Pn.tb=kn.tb,e(Pn.ca!=null),!nd(kn.Oa,_n,Xd)){Pn.a=2;break n}if(!Jc(Pn,_n.width)||_n.da)break n;if((_n.da||to(Pn.ca.S))&&Yi(),11>Pn.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Pn.ca.f.kb.F!=null&&Yi()),Pn.Pb&&0<Pn.s.ua&&Pn.s.vb.X==null&&!Qn(Pn.s.vb,Pn.s.Wa.Xa)){Pn.a=1;break n}Pn.xb=0}if(!Tl(Pn,Pn.V,Pn.Ba,Pn.c,Pn.i,_n.o,ac))break n;kn.Dc=Pn.Ma,Pn=1;break t}e(Pn.a!=0),Pn=0}Pn=!Pn}Pn&&(gn=un.a)}else gn=un.a}else{if((un=new vh)==null){Vn=1;break e}if(un.Fa=kn.na,un.P=kn.P,un.qc=kn.Sa,Ed(un,Pn)){if((gn=Iu(Pn.width,Pn.height,Vn.Oa,Vn.ba))==0){if(un.Aa=0,_n=Vn.Oa,e((kn=un)!=null),_n!=null){if(0<(Wn=0>(Wn=_n.Md)?0:100<Wn?255:255*Wn/100)){for(_i=Di=0;4>_i;++_i)12>(Xi=kn.pb[_i]).lc&&(Xi.ia=Wn*Pp[0>Xi.lc?0:Xi.lc]>>3),Di|=Xi.ia;Di&&(alert("todo:VP8InitRandom"),kn.ia=1)}kn.Ga=_n.Id,100<kn.Ga?kn.Ga=100:0>kn.Ga&&(kn.Ga=0)}yh(un,Pn)||(gn=un.a)}}else gn=un.a}gn==0&&Vn.Oa!=null&&Vn.Oa.fd&&(gn=id(Vn.ba))}Vn=gn}Bn=Vn!=0?null:11>Bn?zn.f.RGBA.eb:zn.f.kb.y}else Bn=null;return Bn};var gf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Ze(Sn,Mn){for(var Tn="",En=0;En<4;En++)Tn+=String.fromCharCode(Sn[Mn++]);return Tn}function Qe(Sn,Mn){return(Sn[Mn+0]<<0|Sn[Mn+1]<<8|Sn[Mn+2]<<16)>>>0}function en(Sn,Mn){return(Sn[Mn+0]<<0|Sn[Mn+1]<<8|Sn[Mn+2]<<16|Sn[Mn+3]<<24)>>>0}new Ve;var tn=[0],an=[0],cn=[],dn=new Ve,hn=r,fn=function(Sn,Mn){var Tn={},En=0,An=!1,Ln=0,Rn=0;if(Tn.frames=[],!function(qn,$n,Ai,Ti){for(var Kn=0;Kn<Ti;Kn++)if(qn[$n+Kn]!=Ai.charCodeAt(Kn))return!0;return!1}(Sn,Mn,"RIFF",4)){var Gn,Nn;for(en(Sn,Mn+=4),Mn+=8;Mn<Sn.length;){var jn=Ze(Sn,Mn),Dn=en(Sn,Mn+=4);Mn+=4;var Ci=Dn+(1&Dn);switch(jn){case"VP8 ":case"VP8L":Tn.frames[En]===void 0&&(Tn.frames[En]={}),(xn=Tn.frames[En]).src_off=An?Rn:Mn-8,xn.src_size=Ln+Dn+8,En++,An&&(An=!1,Ln=0,Rn=0);break;case"VP8X":(xn=Tn.header={}).feature_flags=Sn[Mn];var Jn=Mn+4;xn.canvas_width=1+Qe(Sn,Jn),Jn+=3,xn.canvas_height=1+Qe(Sn,Jn),Jn+=3;break;case"ALPH":An=!0,Ln=Ci+8,Rn=Mn-8;break;case"ANIM":(xn=Tn.header).bgcolor=en(Sn,Mn),Jn=Mn+4,xn.loop_count=(Gn=Sn)[(Nn=Jn)+0]<<0|Gn[Nn+1]<<8,Jn+=2;break;case"ANMF":var Ki,xn;(xn=Tn.frames[En]={}).offset_x=2*Qe(Sn,Mn),Mn+=3,xn.offset_y=2*Qe(Sn,Mn),Mn+=3,xn.width=1+Qe(Sn,Mn),Mn+=3,xn.height=1+Qe(Sn,Mn),Mn+=3,xn.duration=Qe(Sn,Mn),Mn+=3,Ki=Sn[Mn++],xn.dispose=1&Ki,xn.blend=Ki>>1&1}jn!="ANMF"&&(Mn+=Ci)}return Tn}}(hn,0);fn.response=hn,fn.rgbaoutput=!0,fn.dataurl=!1;var pn=fn.header?fn.header:null,mn=fn.frames?fn.frames:null;if(pn){pn.loop_counter=pn.loop_count,tn=[pn.canvas_height],an=[pn.canvas_width];for(var yn=0;yn<mn.length&&mn[yn].blend!=0;yn++);}var Cn=mn[0],wn=dn.WebPDecodeRGBA(hn,Cn.src_off,Cn.src_size,an,tn);Cn.rgba=wn,Cn.imgwidth=an[0],Cn.imgheight=tn[0];for(var bn=0;bn<an[0]*tn[0]*4;bn++)cn[bn]=wn[bn];return this.width=an,this.height=tn,this.data=cn,this}(function(r){var e=function(){return typeof zlibSync=="function"},t=function(tn,an,cn,dn){var hn=4,fn=Be;switch(dn){case r.image_compression.FAST:hn=1,fn=Ge;break;case r.image_compression.MEDIUM:hn=6,fn=je;break;case r.image_compression.SLOW:hn=9,fn=Ve}tn=ke(tn,an,cn,fn);var pn=zlibSync(tn,{level:hn});return r.__addimage__.arrayBufferToBinaryString(pn)},ke=function(tn,an,cn,dn){for(var hn,fn,pn,mn=tn.length/an,yn=new Uint8Array(tn.length+mn),Cn=Qe(),wn=0;wn<mn;wn+=1){if(pn=wn*an,hn=tn.subarray(pn,pn+an),dn)yn.set(dn(hn,cn,fn),pn+wn);else{for(var bn,Sn=Cn.length,Mn=[];bn<Sn;bn+=1)Mn[bn]=Cn[bn](hn,cn,fn);var Tn=en(Mn.concat());yn.set(Mn[Tn],pn+wn)}fn=hn}return yn},Oe=function(tn){var an=Array.apply([],tn);return an.unshift(0),an},Ge=function(tn,an){var cn,dn=[],hn=tn.length;dn[0]=1;for(var fn=0;fn<hn;fn+=1)cn=tn[fn-an]||0,dn[fn+1]=tn[fn]-cn+256&255;return dn},Be=function(tn,an,cn){var dn,hn=[],fn=tn.length;hn[0]=2;for(var pn=0;pn<fn;pn+=1)dn=cn&&cn[pn]||0,hn[pn+1]=tn[pn]-dn+256&255;return hn},je=function(tn,an,cn){var dn,hn,fn=[],pn=tn.length;fn[0]=3;for(var mn=0;mn<pn;mn+=1)dn=tn[mn-an]||0,hn=cn&&cn[mn]||0,fn[mn+1]=tn[mn]+256-(dn+hn>>>1)&255;return fn},Ve=function(tn,an,cn){var dn,hn,fn,pn,mn=[],yn=tn.length;mn[0]=4;for(var Cn=0;Cn<yn;Cn+=1)dn=tn[Cn-an]||0,hn=cn&&cn[Cn]||0,fn=cn&&cn[Cn-an]||0,pn=Ze(dn,hn,fn),mn[Cn+1]=tn[Cn]-pn+256&255;return mn},Ze=function(tn,an,cn){if(tn===an&&an===cn)return tn;var dn=Math.abs(an-cn),hn=Math.abs(tn-cn),fn=Math.abs(tn+an-cn-cn);return dn<=hn&&dn<=fn?tn:hn<=fn?an:cn},Qe=function(){return[Oe,Ge,Be,je,Ve]},en=function(tn){var an=tn.map(function(cn){return cn.reduce(function(dn,hn){return dn+Math.abs(hn)},0)});return an.indexOf(Math.min.apply(null,an))};r.processPNG=function(tn,an,cn,dn){var hn,fn,pn,mn,yn,Cn,wn,bn,Sn,Mn,Tn,En,An,Ln,Rn,Gn=this.decode.FLATE_DECODE,Nn="";if(this.__addimage__.isArrayBuffer(tn)&&(tn=new Uint8Array(tn)),this.__addimage__.isArrayBufferView(tn)){if(tn=(pn=new Kt(tn)).imgData,fn=pn.bits,hn=pn.colorSpace,yn=pn.colors,[4,6].indexOf(pn.colorType)!==-1){if(pn.bits===8){Sn=(bn=pn.pixelBitlength==32?new Uint32Array(pn.decodePixels().buffer):pn.pixelBitlength==16?new Uint16Array(pn.decodePixels().buffer):new Uint8Array(pn.decodePixels().buffer)).length,Tn=new Uint8Array(Sn*pn.colors),Mn=new Uint8Array(Sn);var jn,Dn=pn.pixelBitlength-pn.bits;for(Ln=0,Rn=0;Ln<Sn;Ln++){for(An=bn[Ln],jn=0;jn<Dn;)Tn[Rn++]=An>>>jn&255,jn+=pn.bits;Mn[Ln]=An>>>jn&255}}if(pn.bits===16){Sn=(bn=new Uint32Array(pn.decodePixels().buffer)).length,Tn=new Uint8Array(Sn*(32/pn.pixelBitlength)*pn.colors),Mn=new Uint8Array(Sn*(32/pn.pixelBitlength)),En=pn.colors>1,Ln=0,Rn=0;for(var Ci=0;Ln<Sn;)An=bn[Ln++],Tn[Rn++]=An>>>0&255,En&&(Tn[Rn++]=An>>>16&255,An=bn[Ln++],Tn[Rn++]=An>>>0&255),Mn[Ci++]=An>>>16&255;fn=8}dn!==r.image_compression.NONE&&e()?(tn=t(Tn,pn.width*pn.colors,pn.colors,dn),wn=t(Mn,pn.width,1,dn)):(tn=Tn,wn=Mn,Gn=void 0)}if(pn.colorType===3&&(hn=this.color_spaces.INDEXED,Cn=pn.palette,pn.transparency.indexed)){var Jn=pn.transparency.indexed,Ki=0;for(Ln=0,Sn=Jn.length;Ln<Sn;++Ln)Ki+=Jn[Ln];if((Ki/=255)===Sn-1&&Jn.indexOf(0)!==-1)mn=[Jn.indexOf(0)];else if(Ki!==Sn){for(bn=pn.decodePixels(),Mn=new Uint8Array(bn.length),Ln=0,Sn=bn.length;Ln<Sn;Ln++)Mn[Ln]=Jn[bn[Ln]];wn=t(Mn,pn.width,1)}}var xn=function(qn){var $n;switch(qn){case r.image_compression.FAST:$n=11;break;case r.image_compression.MEDIUM:$n=13;break;case r.image_compression.SLOW:$n=14;break;default:$n=12}return $n}(dn);return Gn===this.decode.FLATE_DECODE&&(Nn="/Predictor "+xn+" "),Nn+="/Colors "+yn+" /BitsPerComponent "+fn+" /Columns "+pn.width,(this.__addimage__.isArrayBuffer(tn)||this.__addimage__.isArrayBufferView(tn))&&(tn=this.__addimage__.arrayBufferToBinaryString(tn)),(wn&&this.__addimage__.isArrayBuffer(wn)||this.__addimage__.isArrayBufferView(wn))&&(wn=this.__addimage__.arrayBufferToBinaryString(wn)),{alias:cn,data:tn,index:an,filter:Gn,decodeParameters:Nn,transparency:mn,palette:Cn,sMask:wn,predictor:xn,width:pn.width,height:pn.height,bitsPerComponent:fn,colorSpace:hn}}}})(E.API),function(r){r.processGIF89A=function(e,t,ke,Oe){var Ge=new Zt(e),Be=Ge.width,je=Ge.height,Ve=[];Ge.decodeAndBlitFrameRGBA(0,Ve);var Ze={data:Ve,width:Be,height:je},Qe=new Qt(100).encode(Ze,100);return r.processJPEG.call(this,Qe,t,ke,Oe)},r.processGIF87A=r.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var r=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(r);for(var e=0;e<r;e++){var t=this.datav.getUint8(this.pos++,!0),ke=this.datav.getUint8(this.pos++,!0),Oe=this.datav.getUint8(this.pos++,!0),Ge=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:Oe,green:ke,blue:t,quad:Ge}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var r="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[r]()}catch(t){a.log("bit decode error:"+t)}},te.prototype.bit1=function(){var r,e=Math.ceil(this.width/8),t=e%4;for(r=this.height-1;r>=0;r--){for(var ke=this.bottom_up?r:this.height-1-r,Oe=0;Oe<e;Oe++)for(var Ge=this.datav.getUint8(this.pos++,!0),Be=ke*this.width*4+8*Oe*4,je=0;je<8&&8*Oe+je<this.width;je++){var Ve=this.palette[Ge>>7-je&1];this.data[Be+4*je]=Ve.blue,this.data[Be+4*je+1]=Ve.green,this.data[Be+4*je+2]=Ve.red,this.data[Be+4*je+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit4=function(){for(var r=Math.ceil(this.width/2),e=r%4,t=this.height-1;t>=0;t--){for(var ke=this.bottom_up?t:this.height-1-t,Oe=0;Oe<r;Oe++){var Ge=this.datav.getUint8(this.pos++,!0),Be=ke*this.width*4+2*Oe*4,je=Ge>>4,Ve=15&Ge,Ze=this.palette[je];if(this.data[Be]=Ze.blue,this.data[Be+1]=Ze.green,this.data[Be+2]=Ze.red,this.data[Be+3]=255,2*Oe+1>=this.width)break;Ze=this.palette[Ve],this.data[Be+4]=Ze.blue,this.data[Be+4+1]=Ze.green,this.data[Be+4+2]=Ze.red,this.data[Be+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var r=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,ke=0;ke<this.width;ke++){var Oe=this.datav.getUint8(this.pos++,!0),Ge=t*this.width*4+4*ke;if(Oe<this.palette.length){var Be=this.palette[Oe];this.data[Ge]=Be.red,this.data[Ge+1]=Be.green,this.data[Ge+2]=Be.blue,this.data[Ge+3]=255}else this.data[Ge]=255,this.data[Ge+1]=255,this.data[Ge+2]=255,this.data[Ge+3]=255}r!==0&&(this.pos+=4-r)}},te.prototype.bit15=function(){for(var r=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var ke=this.bottom_up?t:this.height-1-t,Oe=0;Oe<this.width;Oe++){var Ge=this.datav.getUint16(this.pos,!0);this.pos+=2;var Be=(Ge&e)/e*255|0,je=(Ge>>5&e)/e*255|0,Ve=(Ge>>10&e)/e*255|0,Ze=Ge>>15?255:0,Qe=ke*this.width*4+4*Oe;this.data[Qe]=Ve,this.data[Qe+1]=je,this.data[Qe+2]=Be,this.data[Qe+3]=Ze}this.pos+=r}},te.prototype.bit16=function(){for(var r=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),ke=this.height-1;ke>=0;ke--){for(var Oe=this.bottom_up?ke:this.height-1-ke,Ge=0;Ge<this.width;Ge++){var Be=this.datav.getUint16(this.pos,!0);this.pos+=2;var je=(Be&e)/e*255|0,Ve=(Be>>5&t)/t*255|0,Ze=(Be>>11)/e*255|0,Qe=Oe*this.width*4+4*Ge;this.data[Qe]=Ze,this.data[Qe+1]=Ve,this.data[Qe+2]=je,this.data[Qe+3]=255}this.pos+=r}},te.prototype.bit24=function(){for(var r=this.height-1;r>=0;r--){for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var ke=this.datav.getUint8(this.pos++,!0),Oe=this.datav.getUint8(this.pos++,!0),Ge=this.datav.getUint8(this.pos++,!0),Be=e*this.width*4+4*t;this.data[Be]=Ge,this.data[Be+1]=Oe,this.data[Be+2]=ke,this.data[Be+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var r=this.height-1;r>=0;r--)for(var e=this.bottom_up?r:this.height-1-r,t=0;t<this.width;t++){var ke=this.datav.getUint8(this.pos++,!0),Oe=this.datav.getUint8(this.pos++,!0),Ge=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),je=e*this.width*4+4*t;this.data[je]=Ge,this.data[je+1]=Oe,this.data[je+2]=ke,this.data[je+3]=Be}},te.prototype.getData=function(){return this.data},function(r){r.processBMP=function(e,t,ke,Oe){var Ge=new te(e,!1),Be=Ge.width,je=Ge.height,Ve={data:Ge.getData(),width:Be,height:je},Ze=new Qt(100).encode(Ve,100);return r.processJPEG.call(this,Ze,t,ke,Oe)}}(E.API),ee.prototype.getData=function(){return this.data},function(r){r.processWEBP=function(e,t,ke,Oe){var Ge=new ee(e),Be=Ge.width,je=Ge.height,Ve={data:Ge.getData(),width:Be,height:je},Ze=new Qt(100).encode(Ve,100);return r.processJPEG.call(this,Ze,t,ke,Oe)}}(E.API),E.API.processRGBA=function(r,e,t){for(var ke=r.data,Oe=ke.length,Ge=new Uint8Array(Oe/4*3),Be=new Uint8Array(Oe/4),je=0,Ve=0,Ze=0;Ze<Oe;Ze+=4){var Qe=ke[Ze],en=ke[Ze+1],tn=ke[Ze+2],an=ke[Ze+3];Ge[je++]=Qe,Ge[je++]=en,Ge[je++]=tn,Be[Ve++]=an}var cn=this.__addimage__.arrayBufferToBinaryString(Ge);return{alpha:this.__addimage__.arrayBufferToBinaryString(Be),data:cn,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:r.width,height:r.height}},E.API.setLanguage=function(r){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[r]!==void 0&&(this.internal.languageSettings.languageCode=r,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(r,e){var t,ke,Oe=(e=e||{}).font||this.internal.getFont(),Ge=e.fontSize||this.internal.getFontSize(),Be=e.charSpace||this.internal.getCharSpace(),je=e.widths?e.widths:Oe.metadata.Unicode.widths,Ve=je.fof?je.fof:1,Ze=e.kerning?e.kerning:Oe.metadata.Unicode.kerning,Qe=Ze.fof?Ze.fof:1,en=e.doKerning!==!1,tn=0,an=r.length,cn=0,dn=je[0]||Ve,hn=[];for(t=0;t<an;t++)ke=r.charCodeAt(t),typeof Oe.metadata.widthOfString=="function"?hn.push((Oe.metadata.widthOfGlyph(Oe.metadata.characterToGlyph(ke))+Be*(1e3/Ge)||0)/1e3):(tn=en&&_typeof(Ze[ke])==="object"&&!isNaN(parseInt(Ze[ke][cn],10))?Ze[ke][cn]/Qe:0,hn.push((je[ke]||dn)/Ve+tn)),cn=ke;return hn},Yt=Vt.getStringUnitWidth=function(r,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),ke=e.font||this.internal.getFont(),Oe=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(r=Vt.processArabic(r)),typeof ke.metadata.widthOfString=="function"?ke.metadata.widthOfString(r,t,Oe)/t:Gt.apply(this,arguments).reduce(function(Ge,Be){return Ge+Be},0)},Jt=function(r,e,t,ke){for(var Oe=[],Ge=0,Be=r.length,je=0;Ge!==Be&&je+e[Ge]<t;)je+=e[Ge],Ge++;Oe.push(r.slice(0,Ge));var Ve=Ge;for(je=0;Ge!==Be;)je+e[Ge]>ke&&(Oe.push(r.slice(Ve,Ge)),je=0,Ve=Ge),je+=e[Ge],Ge++;return Ve!==Ge&&Oe.push(r.slice(Ve,Ge)),Oe},Xt=function(r,e,t){t||(t={});var ke,Oe,Ge,Be,je,Ve,Ze,Qe=[],en=[Qe],tn=t.textIndent||0,an=0,cn=0,dn=r.split(" "),hn=Gt.apply(this,[" ",t])[0];if(Ve=t.lineIndent===-1?dn[0].length+2:t.lineIndent||0){var fn=Array(Ve).join(" "),pn=[];dn.map(function(yn){(yn=yn.split(/\s*\n/)).length>1?pn=pn.concat(yn.map(function(Cn,wn){return(wn&&Cn.length?`
`:"")+Cn})):pn.push(yn[0])}),dn=pn,Ve=Yt.apply(this,[fn,t])}for(Ge=0,Be=dn.length;Ge<Be;Ge++){var mn=0;if(ke=dn[Ge],Ve&&ke[0]==`
`&&(ke=ke.substr(1),mn=1),tn+an+(cn=(Oe=Gt.apply(this,[ke,t])).reduce(function(yn,Cn){return yn+Cn},0))>e||mn){if(cn>e){for(je=Jt.apply(this,[ke,Oe,e-(tn+an),e]),Qe.push(je.shift()),Qe=[je.pop()];je.length;)en.push([je.shift()]);cn=Oe.slice(ke.length-(Qe[0]?Qe[0].length:0)).reduce(function(yn,Cn){return yn+Cn},0)}else Qe=[ke];en.push(Qe),tn=cn+Ve,an=hn}else Qe.push(ke),tn+=an+cn,an=hn}return Ze=Ve?function(yn,Cn){return(Cn?fn:"")+yn.join(" ")}:function(yn){return yn.join(" ")},en.map(Ze)},Vt.splitTextToSize=function(r,e,t){var ke,Oe=(t=t||{}).fontSize||this.internal.getFontSize(),Ge=(function(Qe){if(Qe.widths&&Qe.kerning)return{widths:Qe.widths,kerning:Qe.kerning};var en=this.internal.getFont(Qe.fontName,Qe.fontStyle);return en.metadata.Unicode?{widths:en.metadata.Unicode.widths||{0:1},kerning:en.metadata.Unicode.kerning||{}}:{font:en.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);ke=Array.isArray(r)?r:String(r).split(/\r?\n/);var Be=1*this.internal.scaleFactor*e/Oe;Ge.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/Oe:0,Ge.lineIndent=t.lineIndent;var je,Ve,Ze=[];for(je=0,Ve=ke.length;je<Ve;je++)Ze=Ze.concat(Xt.apply(this,[ke[je],Be,Ge]));return Ze},function(r){r.__fontmetrics__=r.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},ke={},Oe=0;Oe<e.length;Oe++)t[e[Oe]]="0123456789abcdef"[Oe],ke["0123456789abcdef"[Oe]]=e[Oe];var Ge=function(en){return"0x"+parseInt(en,10).toString(16)},Be=r.__fontmetrics__.compress=function(en){var tn,an,cn,dn,hn=["{"];for(var fn in en){if(tn=en[fn],isNaN(parseInt(fn,10))?an="'"+fn+"'":(fn=parseInt(fn,10),an=(an=Ge(fn).slice(2)).slice(0,-1)+ke[an.slice(-1)]),typeof tn=="number")tn<0?(cn=Ge(tn).slice(3),dn="-"):(cn=Ge(tn).slice(2),dn=""),cn=dn+cn.slice(0,-1)+ke[cn.slice(-1)];else{if(_typeof(tn)!=="object")throw new Error("Don't know what to do with value type "+_typeof(tn)+".");cn=Be(tn)}hn.push(an+cn)}return hn.push("}"),hn.join("")},je=r.__fontmetrics__.uncompress=function(en){if(typeof en!="string")throw new Error("Invalid argument passed to uncompress.");for(var tn,an,cn,dn,hn={},fn=1,pn=hn,mn=[],yn="",Cn="",wn=en.length-1,bn=1;bn<wn;bn+=1)(dn=en[bn])=="'"?tn?(cn=tn.join(""),tn=void 0):tn=[]:tn?tn.push(dn):dn=="{"?(mn.push([pn,cn]),pn={},cn=void 0):dn=="}"?((an=mn.pop())[0][an[1]]=pn,cn=void 0,pn=an[0]):dn=="-"?fn=-1:cn===void 0?t.hasOwnProperty(dn)?(yn+=t[dn],cn=parseInt(yn,16)*fn,fn=1,yn=""):yn+=dn:t.hasOwnProperty(dn)?(Cn+=t[dn],pn[cn]=parseInt(Cn,16)*fn,fn=1,cn=void 0,Cn=""):Cn+=dn;return hn},Ve={codePages:["WinAnsiEncoding"],WinAnsiEncoding:je("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Ze={Unicode:{Courier:Ve,"Courier-Bold":Ve,"Courier-BoldOblique":Ve,"Courier-Oblique":Ve,Helvetica:Ve,"Helvetica-Bold":Ve,"Helvetica-BoldOblique":Ve,"Helvetica-Oblique":Ve,"Times-Roman":Ve,"Times-Bold":Ve,"Times-BoldItalic":Ve,"Times-Italic":Ve}},Qe={Unicode:{"Courier-Oblique":je("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":je("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":je("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:je("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":je("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":je("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:je("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:je("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":je("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:je("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":je("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":je("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":je("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":je("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};r.events.push(["addFont",function(en){var tn=en.font,an=Qe.Unicode[tn.postScriptName];an&&(tn.metadata.Unicode={},tn.metadata.Unicode.widths=an.widths,tn.metadata.Unicode.kerning=an.kerning);var cn=Ze.Unicode[tn.postScriptName];cn&&(tn.metadata.Unicode.encoding=cn,tn.encoding=cn.codePages[0])}])}(E.API),function(r){var e=function(t){for(var ke=t.length,Oe=new Uint8Array(ke),Ge=0;Ge<ke;Ge++)Oe[Ge]=t.charCodeAt(Ge);return Oe};r.API.events.push(["addFont",function(t){var ke=void 0,Oe=t.font,Ge=t.instance;if(!Oe.isStandardFont){if(Ge===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Oe.postScriptName+"').");if(typeof(ke=Ge.existsFileInVFS(Oe.postScriptName)===!1?Ge.loadFile(Oe.postScriptName):Ge.getFileFromVFS(Oe.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Oe.postScriptName+"').");(function(Be,je){je=/^\x00\x01\x00\x00/.test(je)?e(je):e(u(je)),Be.metadata=r.API.TTFFont.open(je),Be.metadata.Unicode=Be.metadata.Unicode||{encoding:{},kerning:{},widths:[]},Be.metadata.glyIdsUsed=[0]})(Oe,ke)}}])}(E),function(r){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-BoI4QZ1P.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}E.API.addSvgAsImage=function(t,ke,Oe,Ge,Be,je,Ve,Ze){if(isNaN(ke)||isNaN(Oe))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Ge)||isNaN(Be))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var Qe=document.createElement("canvas");Qe.width=Ge,Qe.height=Be;var en=Qe.getContext("2d");en.fillStyle="#fff",en.fillRect(0,0,Qe.width,Qe.height);var tn={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},an=this;return e().then(function(cn){return cn.fromString(en,t,tn)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(cn){return cn.render(tn)}).then(function(){an.addImage(Qe.toDataURL("image/jpeg",1),ke,Oe,Ge,Be,Ve,Ze)})}}(),E.API.putTotalPages=function(r){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(r,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(r,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var ke=1;ke<=this.internal.getNumberOfPages();ke++)for(var Oe=0;Oe<this.internal.pages[ke].length;Oe++)this.internal.pages[ke][Oe]=this.internal.pages[ke][Oe].replace(e,t);return this},E.API.viewerPreferences=function(r,e){var t;r=r||{},e=e||!1;var ke,Oe,Ge,Be={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},je=Object.keys(Be),Ve=[],Ze=0,Qe=0,en=0;function tn(cn,dn){var hn,fn=!1;for(hn=0;hn<cn.length;hn+=1)cn[hn]===dn&&(fn=!0);return fn}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(Be)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,r==="reset"||e===!0){var an=je.length;for(en=0;en<an;en+=1)t[je[en]].value=t[je[en]].defaultValue,t[je[en]].explicitSet=!1}if(_typeof(r)==="object"){for(Oe in r)if(Ge=r[Oe],tn(je,Oe)&&Ge!==void 0){if(t[Oe].type==="boolean"&&typeof Ge=="boolean")t[Oe].value=Ge;else if(t[Oe].type==="name"&&tn(t[Oe].valueSet,Ge))t[Oe].value=Ge;else if(t[Oe].type==="integer"&&Number.isInteger(Ge))t[Oe].value=Ge;else if(t[Oe].type==="array"){for(Ze=0;Ze<Ge.length;Ze+=1)if(ke=!0,Ge[Ze].length===1&&typeof Ge[Ze][0]=="number")Ve.push(String(Ge[Ze]-1));else if(Ge[Ze].length>1){for(Qe=0;Qe<Ge[Ze].length;Qe+=1)typeof Ge[Ze][Qe]!="number"&&(ke=!1);ke===!0&&Ve.push([Ge[Ze][0]-1,Ge[Ze][1]-1].join(" "))}t[Oe].value="["+Ve.join(" ")+"]"}else t[Oe].value=t[Oe].defaultValue;t[Oe].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var cn,dn=[];for(cn in t)t[cn].explicitSet===!0&&(t[cn].type==="name"?dn.push("/"+cn+" /"+t[cn].value):dn.push("/"+cn+" "+t[cn].value));dn.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+dn.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(r){var e=function(){var ke='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Oe=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Ge=unescape(encodeURIComponent(ke)),Be=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),je=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Ve=unescape(encodeURIComponent("</x:xmpmeta>")),Ze=Ge.length+Be.length+je.length+Oe.length+Ve.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Ze+" >>"),this.internal.write("stream"),this.internal.write(Oe+Ge+Be+je+Ve),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};r.addMetadata=function(ke,Oe){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:ke,namespaceuri:Oe||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(r){var e=r.API,t=e.pdfEscape16=function(Ge,Be){for(var je,Ve=Be.metadata.Unicode.widths,Ze=["","0","00","000","0000"],Qe=[""],en=0,tn=Ge.length;en<tn;++en){if(je=Be.metadata.characterToGlyph(Ge.charCodeAt(en)),Be.metadata.glyIdsUsed.push(je),Be.metadata.toUnicode[je]=Ge.charCodeAt(en),Ve.indexOf(je)==-1&&(Ve.push(je),Ve.push([parseInt(Be.metadata.widthOfGlyph(je),10)])),je=="0")return Qe.join("");je=je.toString(16),Qe.push(Ze[4-je.length],je)}return Qe.join("")},ke=function(Ge){var Be,je,Ve,Ze,Qe,en,tn;for(Qe=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Ve=[],en=0,tn=(je=Object.keys(Ge).sort(function(an,cn){return an-cn})).length;en<tn;en++)Be=je[en],Ve.length>=100&&(Qe+=`
`+Ve.length+` beginbfchar
`+Ve.join(`
`)+`
endbfchar`,Ve=[]),Ge[Be]!==void 0&&Ge[Be]!==null&&typeof Ge[Be].toString=="function"&&(Ze=("0000"+Ge[Be].toString(16)).slice(-4),Be=("0000"+(+Be).toString(16)).slice(-4),Ve.push("<"+Be+"><"+Ze+">"));return Ve.length&&(Qe+=`
`+Ve.length+` beginbfchar
`+Ve.join(`
`)+`
endbfchar
`),Qe+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Ge){(function(Be){var je=Be.font,Ve=Be.out,Ze=Be.newObject,Qe=Be.putStream;if(je.metadata instanceof r.API.TTFFont&&je.encoding==="Identity-H"){for(var en=je.metadata.Unicode.widths,tn=je.metadata.subset.encode(je.metadata.glyIdsUsed,1),an="",cn=0;cn<tn.length;cn++)an+=String.fromCharCode(tn[cn]);var dn=Ze();Qe({data:an,addLength1:!0,objectId:dn}),Ve("endobj");var hn=Ze();Qe({data:ke(je.metadata.toUnicode),addLength1:!0,objectId:hn}),Ve("endobj");var fn=Ze();Ve("<<"),Ve("/Type /FontDescriptor"),Ve("/FontName /"+F(je.fontName)),Ve("/FontFile2 "+dn+" 0 R"),Ve("/FontBBox "+r.API.PDFObject.convert(je.metadata.bbox)),Ve("/Flags "+je.metadata.flags),Ve("/StemV "+je.metadata.stemV),Ve("/ItalicAngle "+je.metadata.italicAngle),Ve("/Ascent "+je.metadata.ascender),Ve("/Descent "+je.metadata.decender),Ve("/CapHeight "+je.metadata.capHeight),Ve(">>"),Ve("endobj");var pn=Ze();Ve("<<"),Ve("/Type /Font"),Ve("/BaseFont /"+F(je.fontName)),Ve("/FontDescriptor "+fn+" 0 R"),Ve("/W "+r.API.PDFObject.convert(en)),Ve("/CIDToGIDMap /Identity"),Ve("/DW 1000"),Ve("/Subtype /CIDFontType2"),Ve("/CIDSystemInfo"),Ve("<<"),Ve("/Supplement 0"),Ve("/Registry (Adobe)"),Ve("/Ordering ("+je.encoding+")"),Ve(">>"),Ve(">>"),Ve("endobj"),je.objectNumber=Ze(),Ve("<<"),Ve("/Type /Font"),Ve("/Subtype /Type0"),Ve("/ToUnicode "+hn+" 0 R"),Ve("/BaseFont /"+F(je.fontName)),Ve("/Encoding /"+je.encoding),Ve("/DescendantFonts ["+pn+" 0 R]"),Ve(">>"),Ve("endobj"),je.isAlreadyPutted=!0}})(Ge)}]),e.events.push(["putFont",function(Ge){(function(Be){var je=Be.font,Ve=Be.out,Ze=Be.newObject,Qe=Be.putStream;if(je.metadata instanceof r.API.TTFFont&&je.encoding==="WinAnsiEncoding"){for(var en=je.metadata.rawData,tn="",an=0;an<en.length;an++)tn+=String.fromCharCode(en[an]);var cn=Ze();Qe({data:tn,addLength1:!0,objectId:cn}),Ve("endobj");var dn=Ze();Qe({data:ke(je.metadata.toUnicode),addLength1:!0,objectId:dn}),Ve("endobj");var hn=Ze();Ve("<<"),Ve("/Descent "+je.metadata.decender),Ve("/CapHeight "+je.metadata.capHeight),Ve("/StemV "+je.metadata.stemV),Ve("/Type /FontDescriptor"),Ve("/FontFile2 "+cn+" 0 R"),Ve("/Flags 96"),Ve("/FontBBox "+r.API.PDFObject.convert(je.metadata.bbox)),Ve("/FontName /"+F(je.fontName)),Ve("/ItalicAngle "+je.metadata.italicAngle),Ve("/Ascent "+je.metadata.ascender),Ve(">>"),Ve("endobj"),je.objectNumber=Ze();for(var fn=0;fn<je.metadata.hmtx.widths.length;fn++)je.metadata.hmtx.widths[fn]=parseInt(je.metadata.hmtx.widths[fn]*(1e3/je.metadata.head.unitsPerEm));Ve("<</Subtype/TrueType/Type/Font/ToUnicode "+dn+" 0 R/BaseFont/"+F(je.fontName)+"/FontDescriptor "+hn+" 0 R/Encoding/"+je.encoding+" /FirstChar 29 /LastChar 255 /Widths "+r.API.PDFObject.convert(je.metadata.hmtx.widths)+">>"),Ve("endobj"),je.isAlreadyPutted=!0}})(Ge)}]);var Oe=function(Ge){var Be,je=Ge.text||"",Ve=Ge.x,Ze=Ge.y,Qe=Ge.options||{},en=Ge.mutex||{},tn=en.pdfEscape,an=en.activeFontKey,cn=en.fonts,dn=an,hn="",fn=0,pn="",mn=cn[dn].encoding;if(cn[dn].encoding!=="Identity-H")return{text:je,x:Ve,y:Ze,options:Qe,mutex:en};for(pn=je,dn=an,Array.isArray(je)&&(pn=je[0]),fn=0;fn<pn.length;fn+=1)cn[dn].metadata.hasOwnProperty("cmap")&&(Be=cn[dn].metadata.cmap.unicode.codeMap[pn[fn].charCodeAt(0)]),Be||pn[fn].charCodeAt(0)<256&&cn[dn].metadata.hasOwnProperty("Unicode")?hn+=pn[fn]:hn+="";var yn="";return parseInt(dn.slice(1))<14||mn==="WinAnsiEncoding"?yn=tn(hn,dn).split("").map(function(Cn){return Cn.charCodeAt(0).toString(16)}).join(""):mn==="Identity-H"&&(yn=t(hn,cn[dn])),en.isHex=!0,{text:yn,x:Ve,y:Ze,options:Qe,mutex:en}};e.events.push(["postProcessText",function(Ge){var Be=Ge.text||"",je=[],Ve={text:Be,x:Ge.x,y:Ge.y,options:Ge.options,mutex:Ge.mutex};if(Array.isArray(Be)){var Ze=0;for(Ze=0;Ze<Be.length;Ze+=1)Array.isArray(Be[Ze])&&Be[Ze].length===3?je.push([Oe(Object.assign({},Ve,{text:Be[Ze][0]})).text,Be[Ze][1],Be[Ze][2]]):je.push(Oe(Object.assign({},Ve,{text:Be[Ze]})).text);Ge.text=je}else Ge.text=Oe(Object.assign({},Ve,{text:Be})).text}])}(E),function(r){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};r.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},r.addFileToVFS=function(t,ke){return e.call(this),this.internal.vFS[t]=ke,this},r.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(E.API),function(r){r.__bidiEngine__=r.prototype.__bidiEngine__=function(ke){var Oe,Ge,Be,je,Ve,Ze,Qe,en=e,tn=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],an=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],cn={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},dn={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},hn=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],fn=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),pn=!1,mn=0;this.__bidiEngine__={};var yn=function(En){var An=En.charCodeAt(),Ln=An>>8,Rn=dn[Ln];return Rn!==void 0?en[256*Rn+(255&An)]:Ln===252||Ln===253?"AL":fn.test(Ln)?"L":Ln===8?"R":"N"},Cn=function(En){for(var An,Ln=0;Ln<En.length;Ln++){if((An=yn(En.charAt(Ln)))==="L")return!1;if(An==="R")return!0}return!1},wn=function(En,An,Ln,Rn){var Gn,Nn,jn,Dn,Ci=An[Rn];switch(Ci){case"L":case"R":pn=!1;break;case"N":case"AN":break;case"EN":pn&&(Ci="AN");break;case"AL":pn=!0,Ci="R";break;case"WS":Ci="N";break;case"CS":Rn<1||Rn+1>=An.length||(Gn=Ln[Rn-1])!=="EN"&&Gn!=="AN"||(Nn=An[Rn+1])!=="EN"&&Nn!=="AN"?Ci="N":pn&&(Nn="AN"),Ci=Nn===Gn?Nn:"N";break;case"ES":Ci=(Gn=Rn>0?Ln[Rn-1]:"B")==="EN"&&Rn+1<An.length&&An[Rn+1]==="EN"?"EN":"N";break;case"ET":if(Rn>0&&Ln[Rn-1]==="EN"){Ci="EN";break}if(pn){Ci="N";break}for(jn=Rn+1,Dn=An.length;jn<Dn&&An[jn]==="ET";)jn++;Ci=jn<Dn&&An[jn]==="EN"?"EN":"N";break;case"NSM":if(Be&&!je){for(Dn=An.length,jn=Rn+1;jn<Dn&&An[jn]==="NSM";)jn++;if(jn<Dn){var Jn=En[Rn],Ki=Jn>=1425&&Jn<=2303||Jn===64286;if(Gn=An[jn],Ki&&(Gn==="R"||Gn==="AL")){Ci="R";break}}}Ci=Rn<1||(Gn=An[Rn-1])==="B"?"N":Ln[Rn-1];break;case"B":pn=!1,Oe=!0,Ci=mn;break;case"S":Ge=!0,Ci="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":pn=!1;break;case"BN":Ci="N"}return Ci},bn=function(En,An,Ln){var Rn=En.split("");return Ln&&Sn(Rn,Ln,{hiLevel:mn}),Rn.reverse(),An&&An.reverse(),Rn.join("")},Sn=function(En,An,Ln){var Rn,Gn,Nn,jn,Dn,Ci=-1,Jn=En.length,Ki=0,xn=[],qn=mn?an:tn,$n=[];for(pn=!1,Oe=!1,Ge=!1,Gn=0;Gn<Jn;Gn++)$n[Gn]=yn(En[Gn]);for(Nn=0;Nn<Jn;Nn++){if(Dn=Ki,xn[Nn]=wn(En,$n,xn,Nn),Rn=240&(Ki=qn[Dn][cn[xn[Nn]]]),Ki&=15,An[Nn]=jn=qn[Ki][5],Rn>0)if(Rn===16){for(Gn=Ci;Gn<Nn;Gn++)An[Gn]=1;Ci=-1}else Ci=-1;if(qn[Ki][6])Ci===-1&&(Ci=Nn);else if(Ci>-1){for(Gn=Ci;Gn<Nn;Gn++)An[Gn]=jn;Ci=-1}$n[Nn]==="B"&&(An[Nn]=0),Ln.hiLevel|=jn}Ge&&function(Ai,Ti,Kn){for(var Ii=0;Ii<Kn;Ii++)if(Ai[Ii]==="S"){Ti[Ii]=mn;for(var Pi=Ii-1;Pi>=0&&Ai[Pi]==="WS";Pi--)Ti[Pi]=mn}}($n,An,Jn)},Mn=function(En,An,Ln,Rn,Gn){if(!(Gn.hiLevel<En)){if(En===1&&mn===1&&!Oe)return An.reverse(),void(Ln&&Ln.reverse());for(var Nn,jn,Dn,Ci,Jn=An.length,Ki=0;Ki<Jn;){if(Rn[Ki]>=En){for(Dn=Ki+1;Dn<Jn&&Rn[Dn]>=En;)Dn++;for(Ci=Ki,jn=Dn-1;Ci<jn;Ci++,jn--)Nn=An[Ci],An[Ci]=An[jn],An[jn]=Nn,Ln&&(Nn=Ln[Ci],Ln[Ci]=Ln[jn],Ln[jn]=Nn);Ki=Dn}Ki++}}},Tn=function(En,An,Ln){var Rn=En.split(""),Gn={hiLevel:mn};return Ln||(Ln=[]),Sn(Rn,Ln,Gn),function(Nn,jn,Dn){if(Dn.hiLevel!==0&&Qe)for(var Ci,Jn=0;Jn<Nn.length;Jn++)jn[Jn]===1&&(Ci=hn.indexOf(Nn[Jn]))>=0&&(Nn[Jn]=hn[Ci+1])}(Rn,Ln,Gn),Mn(2,Rn,An,Ln,Gn),Mn(1,Rn,An,Ln,Gn),Rn.join("")};return this.__bidiEngine__.doBidiReorder=function(En,An,Ln){if(function(Gn,Nn){if(Nn)for(var jn=0;jn<Gn.length;jn++)Nn[jn]=jn;je===void 0&&(je=Cn(Gn)),Ze===void 0&&(Ze=Cn(Gn))}(En,An),Be||!Ve||Ze)if(Be&&Ve&&je^Ze)mn=je?1:0,En=bn(En,An,Ln);else if(!Be&&Ve&&Ze)mn=je?1:0,En=Tn(En,An,Ln),En=bn(En,An);else if(!Be||je||Ve||Ze){if(Be&&!Ve&&je^Ze)En=bn(En,An),je?(mn=0,En=Tn(En,An,Ln)):(mn=1,En=Tn(En,An,Ln),En=bn(En,An));else if(Be&&je&&!Ve&&Ze)mn=1,En=Tn(En,An,Ln),En=bn(En,An);else if(!Be&&!Ve&&je^Ze){var Rn=Qe;je?(mn=1,En=Tn(En,An,Ln),mn=0,Qe=!1,En=Tn(En,An,Ln),Qe=Rn):(mn=0,En=Tn(En,An,Ln),En=bn(En,An),mn=1,Qe=!1,En=Tn(En,An,Ln),Qe=Rn,En=bn(En,An))}}else mn=0,En=Tn(En,An,Ln);else mn=je?1:0,En=Tn(En,An,Ln);return En},this.__bidiEngine__.setOptions=function(En){En&&(Be=En.isInputVisual,Ve=En.isOutputVisual,je=En.isInputRtl,Ze=En.isOutputRtl,Qe=En.isSymmetricSwapping)},this.__bidiEngine__.setOptions(ke),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new r.__bidiEngine__({isInputVisual:!0});r.API.events.push(["postProcessText",function(ke){var Oe=ke.text,Ge=(ke.x,ke.y,ke.options||{}),Be=(ke.mutex,Ge.lang,[]);if(Ge.isInputVisual=typeof Ge.isInputVisual!="boolean"||Ge.isInputVisual,t.setOptions(Ge),Object.prototype.toString.call(Oe)==="[object Array]"){var je=0;for(Be=[],je=0;je<Oe.length;je+=1)Object.prototype.toString.call(Oe[je])==="[object Array]"?Be.push([t.doBidiReorder(Oe[je][0]),Oe[je][1],Oe[je][2]]):Be.push([t.doBidiReorder(Oe[je])]);ke.text=Be}else ke.text=t.doBidiReorder(Oe);t.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function r(e){var t;if(this.rawData=e,t=this.contents=new ne(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return r.open=function(e){return new r(e)},r.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},r.prototype.registerTTF=function(){var e,t,ke,Oe,Ge;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var Be,je,Ve,Ze;for(Ze=[],Be=0,je=(Ve=this.bbox).length;Be<je;Be++)e=Ve[Be],Ze.push(Math.round(e*this.scaleFactor));return Ze}).call(this),this.stemV=0,this.post.exists?(ke=255&(Oe=this.post.italic_angle),32768&(t=Oe>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+ke)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Ge=this.familyClass)===1||Ge===2||Ge===3||Ge===4||Ge===5||Ge===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},r.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},r.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},r.prototype.widthOfString=function(e,t,ke){var Oe,Ge,Be,je;for(Be=0,Ge=0,je=(e=""+e).length;0<=je?Ge<je:Ge>je;Ge=0<=je?++Ge:--Ge)Oe=e.charCodeAt(Ge),Be+=this.widthOfGlyph(this.characterToGlyph(Oe))+ke*(1e3/t)||0;return Be*(t/1e3)},r.prototype.lineHeight=function(e,t){var ke;return t==null&&(t=!1),ke=t?this.lineGap:0,(this.ascender+ke-this.decender)/1e3*e},r}();var re,ne=function(){function r(e){this.data=e??[],this.pos=0,this.length=this.data.length}return r.prototype.readByte=function(){return this.data[this.pos++]},r.prototype.writeByte=function(e){return this.data[this.pos++]=e},r.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},r.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},r.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},r.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},r.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},r.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},r.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},r.prototype.readString=function(e){var t,ke;for(ke=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)ke[t]=String.fromCharCode(this.readByte());return ke.join("")},r.prototype.writeString=function(e){var t,ke,Oe;for(Oe=[],t=0,ke=e.length;0<=ke?t<ke:t>ke;t=0<=ke?++t:--t)Oe.push(this.writeByte(e.charCodeAt(t)));return Oe},r.prototype.readShort=function(){return this.readInt16()},r.prototype.writeShort=function(e){return this.writeInt16(e)},r.prototype.readLongLong=function(){var e,t,ke,Oe,Ge,Be,je,Ve;return e=this.readByte(),t=this.readByte(),ke=this.readByte(),Oe=this.readByte(),Ge=this.readByte(),Be=this.readByte(),je=this.readByte(),Ve=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^ke)+4294967296*(255^Oe)+16777216*(255^Ge)+65536*(255^Be)+256*(255^je)+(255^Ve)+1):72057594037927940*e+281474976710656*t+1099511627776*ke+4294967296*Oe+16777216*Ge+65536*Be+256*je+Ve},r.prototype.writeLongLong=function(e){var t,ke;return t=Math.floor(e/4294967296),ke=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(ke>>24&255),this.writeByte(ke>>16&255),this.writeByte(ke>>8&255),this.writeByte(255&ke)},r.prototype.readInt=function(){return this.readInt32()},r.prototype.writeInt=function(e){return this.writeInt32(e)},r.prototype.read=function(e){var t,ke;for(t=[],ke=0;0<=e?ke<e:ke>e;ke=0<=e?++ke:--ke)t.push(this.readByte());return t},r.prototype.write=function(e){var t,ke,Oe,Ge;for(Ge=[],ke=0,Oe=e.length;ke<Oe;ke++)t=e[ke],Ge.push(this.writeByte(t));return Ge},r}(),ie=function(){var r;function e(t){var ke,Oe,Ge;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},Oe=0,Ge=this.tableCount;0<=Ge?Oe<Ge:Oe>Ge;Oe=0<=Ge?++Oe:--Oe)ke={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[ke.tag]=ke}return e.prototype.encode=function(t){var ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,dn;for(dn in an=Object.keys(t).length,Ve=Math.log(2),en=16*Math.floor(Math.log(an)/Ve),Be=Math.floor(en/Ve),Qe=16*an-en,(Oe=new ne).writeInt(this.scalarType),Oe.writeShort(an),Oe.writeShort(en),Oe.writeShort(Be),Oe.writeShort(Qe),Ge=16*an,Ze=Oe.pos+Ge,je=null,cn=[],t)for(tn=t[dn],Oe.writeString(dn),Oe.writeInt(r(tn)),Oe.writeInt(Ze),Oe.writeInt(tn.length),cn=cn.concat(tn),dn==="head"&&(je=Ze),Ze+=tn.length;Ze%4;)cn.push(0),Ze++;return Oe.write(cn),ke=2981146554-r(Oe.data),Oe.pos=je+8,Oe.writeUInt32(ke),Oe.data},r=function(t){var ke,Oe,Ge,Be;for(t=ve.call(t);t.length%4;)t.push(0);for(Ge=new ne(t),Oe=0,ke=0,Be=t.length;ke<Be;ke=ke+=4)Oe+=Ge.readUInt32();return 4294967295&Oe},e}(),ae={}.hasOwnProperty,oe=function(r,e){for(var t in e)ae.call(e,t)&&(r[t]=e[t]);function ke(){this.constructor=r}return ke.prototype=e.prototype,r.prototype=new ke,r.__super__=e.prototype,r};re=function(){function r(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return r.prototype.parse=function(){},r.prototype.encode=function(){},r.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},r}();var se=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var ke;return(ke=new ne).writeInt(this.version),ke.writeInt(this.revision),ke.writeInt(this.checkSumAdjustment),ke.writeInt(this.magicNumber),ke.writeShort(this.flags),ke.writeShort(this.unitsPerEm),ke.writeLongLong(this.created),ke.writeLongLong(this.modified),ke.writeShort(this.xMin),ke.writeShort(this.yMin),ke.writeShort(this.xMax),ke.writeShort(this.yMax),ke.writeShort(this.macStyle),ke.writeShort(this.lowestRecPPEM),ke.writeShort(this.fontDirectionHint),ke.writeShort(t),ke.writeShort(this.glyphDataFormat),ke.data},e}(),ce=function(){function r(e,t){var ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,dn,hn,fn,pn,mn;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),en=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Ve=0;Ve<256;++Ve)this.codeMap[Ve]=e.readByte();break;case 4:for(an=e.readUInt16(),tn=an/2,e.pos+=6,Ge=function(){var yn,Cn;for(Cn=[],Ve=yn=0;0<=tn?yn<tn:yn>tn;Ve=0<=tn?++yn:--yn)Cn.push(e.readUInt16());return Cn}(),e.pos+=2,dn=function(){var yn,Cn;for(Cn=[],Ve=yn=0;0<=tn?yn<tn:yn>tn;Ve=0<=tn?++yn:--yn)Cn.push(e.readUInt16());return Cn}(),Ze=function(){var yn,Cn;for(Cn=[],Ve=yn=0;0<=tn?yn<tn:yn>tn;Ve=0<=tn?++yn:--yn)Cn.push(e.readUInt16());return Cn}(),Qe=function(){var yn,Cn;for(Cn=[],Ve=yn=0;0<=tn?yn<tn:yn>tn;Ve=0<=tn?++yn:--yn)Cn.push(e.readUInt16());return Cn}(),Oe=(this.length-e.pos+this.offset)/2,je=function(){var yn,Cn;for(Cn=[],Ve=yn=0;0<=Oe?yn<Oe:yn>Oe;Ve=0<=Oe?++yn:--yn)Cn.push(e.readUInt16());return Cn}(),Ve=fn=0,mn=Ge.length;fn<mn;Ve=++fn)for(hn=Ge[Ve],ke=pn=cn=dn[Ve];cn<=hn?pn<=hn:pn>=hn;ke=cn<=hn?++pn:--pn)Qe[Ve]===0?Be=ke+Ze[Ve]:(Be=je[Qe[Ve]/2+(ke-cn)-(tn-Ve)]||0)!==0&&(Be+=Ze[Ve]),this.codeMap[ke]=65535&Be}e.pos=en}return r.encode=function(e,t){var ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,dn,hn,fn,pn,mn,yn,Cn,wn,bn,Sn,Mn,Tn,En,An,Ln,Rn,Gn,Nn,jn,Dn,Ci,Jn,Ki,xn,qn,$n,Ai,Ti,Kn,Ii,Pi,Mi,tr,Br;switch(Rn=new ne,Be=Object.keys(e).sort(function(Un,Qn){return Un-Qn}),t){case"macroman":for(dn=0,hn=function(){var Un=[];for(cn=0;cn<256;++cn)Un.push(0);return Un}(),pn={0:0},Ge={},Gn=0,Ci=Be.length;Gn<Ci;Gn++)pn[Pi=e[Oe=Be[Gn]]]==null&&(pn[Pi]=++dn),Ge[Oe]={old:e[Oe],new:pn[e[Oe]]},hn[Oe]=pn[e[Oe]];return Rn.writeUInt16(1),Rn.writeUInt16(0),Rn.writeUInt32(12),Rn.writeUInt16(0),Rn.writeUInt16(262),Rn.writeUInt16(0),Rn.write(hn),{charMap:Ge,subtable:Rn.data,maxGlyphID:dn+1};case"unicode":for(An=[],en=[],mn=0,pn={},ke={},fn=Ze=null,Nn=0,Jn=Be.length;Nn<Jn;Nn++)pn[Cn=e[Oe=Be[Nn]]]==null&&(pn[Cn]=++mn),ke[Oe]={old:Cn,new:pn[Cn]},je=pn[Cn]-Oe,fn!=null&&je===Ze||(fn&&en.push(fn),An.push(Oe),Ze=je),fn=Oe;for(fn&&en.push(fn),en.push(65535),An.push(65535),Tn=2*(Mn=An.length),Sn=2*Math.pow(Math.log(Mn)/Math.LN2,2),tn=Math.log(Sn/2)/Math.LN2,bn=2*Mn-Sn,Ve=[],wn=[],an=[],cn=jn=0,Ki=An.length;jn<Ki;cn=++jn){if(En=An[cn],Qe=en[cn],En===65535){Ve.push(0),wn.push(0);break}if(En-(Ln=ke[En].new)>=32768)for(Ve.push(0),wn.push(2*(an.length+Mn-cn)),Oe=Dn=En;En<=Qe?Dn<=Qe:Dn>=Qe;Oe=En<=Qe?++Dn:--Dn)an.push(ke[Oe].new);else Ve.push(Ln-En),wn.push(0)}for(Rn.writeUInt16(3),Rn.writeUInt16(1),Rn.writeUInt32(12),Rn.writeUInt16(4),Rn.writeUInt16(16+8*Mn+2*an.length),Rn.writeUInt16(0),Rn.writeUInt16(Tn),Rn.writeUInt16(Sn),Rn.writeUInt16(tn),Rn.writeUInt16(bn),Kn=0,xn=en.length;Kn<xn;Kn++)Oe=en[Kn],Rn.writeUInt16(Oe);for(Rn.writeUInt16(0),Ii=0,qn=An.length;Ii<qn;Ii++)Oe=An[Ii],Rn.writeUInt16(Oe);for(Mi=0,$n=Ve.length;Mi<$n;Mi++)je=Ve[Mi],Rn.writeUInt16(je);for(tr=0,Ai=wn.length;tr<Ai;tr++)yn=wn[tr],Rn.writeUInt16(yn);for(Br=0,Ti=an.length;Br<Ti;Br++)dn=an[Br],Rn.writeUInt16(dn);return{charMap:ke,subtable:Rn.data,maxGlyphID:mn+1}}},r}(),ue=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(t){var ke,Oe,Ge;for(t.pos=this.offset,this.version=t.readUInt16(),Ge=t.readUInt16(),this.tables=[],this.unicode=null,Oe=0;0<=Ge?Oe<Ge:Oe>Ge;Oe=0<=Ge?++Oe:--Oe)ke=new ce(t,this.offset),this.tables.push(ke),ke.isUnicode&&this.unicode==null&&(this.unicode=ke);return!0},e.encode=function(t,ke){var Oe,Ge;return ke==null&&(ke="macroman"),Oe=ce.encode(t,ke),(Ge=new ne).writeUInt16(0),Ge.writeUInt16(1),Oe.table=Ge.data.concat(Oe.subtable),Oe},e}(),he=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),le=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var ke,Oe;for(Oe=[],ke=0;ke<10;++ke)Oe.push(t.readByte());return Oe}(),this.charRange=function(){var ke,Oe;for(Oe=[],ke=0;ke<4;++ke)Oe.push(t.readInt());return Oe}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var ke,Oe;for(Oe=[],ke=0;ke<2;ke=++ke)Oe.push(t.readInt());return Oe}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),fe=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(t){var ke,Oe,Ge;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var Be;for(Oe=t.readUInt16(),this.glyphNameIndex=[],Be=0;0<=Oe?Be<Oe:Be>Oe;Be=0<=Oe?++Be:--Be)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],Ge=[];t.pos<this.offset+this.length;)ke=t.readByte(),Ge.push(this.names.push(t.readString(ke)));return Ge;case 151552:return Oe=t.readUInt16(),this.offsets=t.read(Oe);case 196608:break;case 262144:return this.map=(function(){var je,Ve,Ze;for(Ze=[],Be=je=0,Ve=this.file.maxp.numGlyphs;0<=Ve?je<Ve:je>Ve;Be=0<=Ve?++je:--je)Ze.push(t.readUInt32());return Ze}).call(this)}},e}(),de=function(r,e){this.raw=r,this.length=r.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(t){var ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an;for(t.pos=this.offset,t.readShort(),ke=t.readShort(),Ve=t.readShort(),Oe=[],Be=0;0<=ke?Be<ke:Be>ke;Be=0<=ke?++Be:--Be)Oe.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+Ve+t.readShort()});for(Ze={},Be=en=0,tn=Oe.length;en<tn;Be=++en)Ge=Oe[Be],t.pos=Ge.offset,Qe=t.readString(Ge.length),je=new de(Qe,Ge),Ze[an=Ge.nameID]==null&&(Ze[an]=[]),Ze[Ge.nameID].push(je);this.strings=Ze,this.copyright=Ze[0],this.fontFamily=Ze[1],this.fontSubfamily=Ze[2],this.uniqueSubfamily=Ze[3],this.fontName=Ze[4],this.version=Ze[5];try{this.postscriptName=Ze[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Ze[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Ze[7],this.manufacturer=Ze[8],this.designer=Ze[9],this.description=Ze[10],this.vendorUrl=Ze[11],this.designerUrl=Ze[12],this.license=Ze[13],this.licenseUrl=Ze[14],this.preferredFamily=Ze[15],this.preferredSubfamily=Ze[17],this.compatibleFull=Ze[18],this.sampleText=Ze[19]},e}(),ge=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),me=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(t){var ke,Oe,Ge,Be,je,Ve,Ze;for(t.pos=this.offset,this.metrics=[],ke=0,Ve=this.file.hhea.numberOfMetrics;0<=Ve?ke<Ve:ke>Ve;ke=0<=Ve?++ke:--ke)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(Ge=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var Qe,en;for(en=[],ke=Qe=0;0<=Ge?Qe<Ge:Qe>Ge;ke=0<=Ge?++Qe:--Qe)en.push(t.readInt16());return en}(),this.widths=(function(){var Qe,en,tn,an;for(an=[],Qe=0,en=(tn=this.metrics).length;Qe<en;Qe++)Be=tn[Qe],an.push(Be.advance);return an}).call(this),Oe=this.widths[this.widths.length-1],Ze=[],ke=je=0;0<=Ge?je<Ge:je>Ge;ke=0<=Ge?++je:--je)Ze.push(this.widths.push(Oe));return Ze},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),ve=[].slice,be=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn;return t in this.cache?this.cache[t]:(Be=this.file.loca,ke=this.file.contents,Oe=Be.indexOf(t),(Ge=Be.lengthOf(t))===0?this.cache[t]=null:(ke.pos=this.offset+Oe,je=(Ve=new ne(ke.read(Ge))).readShort(),Qe=Ve.readShort(),tn=Ve.readShort(),Ze=Ve.readShort(),en=Ve.readShort(),this.cache[t]=je===-1?new we(Ve,Qe,tn,Ze,en):new ye(Ve,je,Qe,tn,Ze,en),this.cache[t]))},e.prototype.encode=function(t,ke,Oe){var Ge,Be,je,Ve,Ze;for(je=[],Be=[],Ve=0,Ze=ke.length;Ve<Ze;Ve++)Ge=t[ke[Ve]],Be.push(je.length),Ge&&(je=je.concat(Ge.encode(Oe)));return Be.push(je.length),{table:je,offsets:Be}},e}(),ye=function(){function r(e,t,ke,Oe,Ge,Be){this.raw=e,this.numberOfContours=t,this.xMin=ke,this.yMin=Oe,this.xMax=Ge,this.yMax=Be,this.compound=!1}return r.prototype.encode=function(){return this.raw.data},r}(),we=function(){function r(e,t,ke,Oe,Ge){var Be,je;for(this.raw=e,this.xMin=t,this.yMin=ke,this.xMax=Oe,this.yMax=Ge,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],Be=this.raw;je=Be.readShort(),this.glyphOffsets.push(Be.pos),this.glyphIDs.push(Be.readUInt16()),32&je;)Be.pos+=1&je?4:2,128&je?Be.pos+=8:64&je?Be.pos+=4:8&je&&(Be.pos+=2)}return r.prototype.encode=function(){var e,t,ke;for(t=new ne(ve.call(this.raw.data)),e=0,ke=this.glyphIDs.length;e<ke;++e)t.pos=this.glyphOffsets[e];return t.data},r}(),Ne=function(r){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(t){var ke,Oe;return t.pos=this.offset,ke=this.file.head.indexToLocFormat,this.offsets=ke===0?(function(){var Ge,Be;for(Be=[],Oe=0,Ge=this.length;Oe<Ge;Oe+=2)Be.push(2*t.readUInt16());return Be}).call(this):(function(){var Ge,Be;for(Be=[],Oe=0,Ge=this.length;Oe<Ge;Oe+=4)Be.push(t.readUInt32());return Be}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,ke){for(var Oe=new Uint32Array(this.offsets.length),Ge=0,Be=0,je=0;je<Oe.length;++je)if(Oe[je]=Ge,Be<ke.length&&ke[Be]==je){++Be,Oe[je]=Ge;var Ve=this.offsets[je],Ze=this.offsets[je+1]-Ve;Ze>0&&(Ge+=Ze)}for(var Qe=new Array(4*Oe.length),en=0;en<Oe.length;++en)Qe[4*en+3]=255&Oe[en],Qe[4*en+2]=(65280&Oe[en])>>8,Qe[4*en+1]=(16711680&Oe[en])>>16,Qe[4*en]=(4278190080&Oe[en])>>24;return Qe},e}(),Le=function(){function r(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return r.prototype.generateCmap=function(){var e,t,ke,Oe,Ge;for(t in Oe=this.font.cmap.tables[0].codeMap,e={},Ge=this.subset)ke=Ge[t],e[t]=Oe[ke];return e},r.prototype.glyphsFor=function(e){var t,ke,Oe,Ge,Be,je,Ve;for(Oe={},Be=0,je=e.length;Be<je;Be++)Oe[Ge=e[Be]]=this.font.glyf.glyphFor(Ge);for(Ge in t=[],Oe)(ke=Oe[Ge])!=null&&ke.compound&&t.push.apply(t,ke.glyphIDs);if(t.length>0)for(Ge in Ve=this.glyphsFor(t))ke=Ve[Ge],Oe[Ge]=ke;return Oe},r.prototype.encode=function(e,t){var ke,Oe,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,dn,hn,fn;for(Oe in ke=ue.encode(this.generateCmap(),"unicode"),Be=this.glyphsFor(e),an={0:0},fn=ke.charMap)an[(Ve=fn[Oe]).old]=Ve.new;for(cn in tn=ke.maxGlyphID,Be)cn in an||(an[cn]=tn++);return Qe=function(pn){var mn,yn;for(mn in yn={},pn)yn[pn[mn]]=mn;return yn}(an),en=Object.keys(Qe).sort(function(pn,mn){return pn-mn}),dn=function(){var pn,mn,yn;for(yn=[],pn=0,mn=en.length;pn<mn;pn++)je=en[pn],yn.push(Qe[je]);return yn}(),Ge=this.font.glyf.encode(Be,dn,an),Ze=this.font.loca.encode(Ge.offsets,dn),hn={cmap:this.font.cmap.raw(),glyf:Ge.table,loca:Ze,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(hn["OS/2"]=this.font.os2.raw()),this.font.directory.encode(hn)},r}();E.API.PDFObject=function(){var r;function e(){}return r=function(t,ke){return(Array(ke+1).join("0")+t).slice(-ke)},e.convert=function(t){var ke,Oe,Ge,Be;if(Array.isArray(t))return"["+function(){var je,Ve,Ze;for(Ze=[],je=0,Ve=t.length;je<Ve;je++)ke=t[je],Ze.push(e.convert(ke));return Ze}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+r(t.getUTCFullYear(),4)+r(t.getUTCMonth(),2)+r(t.getUTCDate(),2)+r(t.getUTCHours(),2)+r(t.getUTCMinutes(),2)+r(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(Oe in Ge=["<<"],t)Be=t[Oe],Ge.push("/"+Oe+" "+e.convert(Be));return Ge.push(">>"),Ge.join(`
`)}return""+t},e}();const _export_sfc=(r,e)=>{const t=r.__vccOpts||r;for(const[ke,Oe]of e)t[ke]=Oe;return t},_hoisted_1$a={class:"print-preview-container"},__default__$e={},_sfc_main$k=Object.assign(__default__$e,{__name:"Print",props:{visibility:Boolean,printOptions:Object},setup(r){useCssVars(Dn=>({"53620ddc":unref(Nn),"4c7da14a":unref(Gn),e5a37a14:fn,"75154dfe":unref(Rn),"13c577ef":unref(Ln),"004e3776":unref(An)}));const e=useEulerian(),t=useMapStore(),ke=r,Oe=inject("selectedLayers"),Ge="Imprimer une carte",Be="xl",je=[{label:"Portrait",value:"portrait",icon:"md-cropportrait-sharp"},{label:"Paysage",value:"landscape",icon:"md-croplandscape-sharp"}],Ve=ref(!1),Ze=()=>{Ve.value=!0,e.pause()},Qe=()=>{Ve.value=!1,e.resume()},en=ref(null),tn=ref(null),an=ref(null),cn=ref(null),dn=ref(null),hn=ref(null),fn="10px",pn=.264583333,mn=ref(!1),yn=ref("Ma carte"),Cn=ref("portrait"),wn=ref(0),bn=ref("A4"),Sn=computed(()=>{let Dn={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}};return{width:Dn[bn.value].width,height:Dn[bn.value].height}}),Mn=reactive(useElementSize(cn,{width:0,height:0},{box:"border-box"})),Tn=reactive(useElementSize(dn,{width:0,height:0},{box:"border-box"})),En=reactive(useElementSize(tn,{width:0,height:0},{box:"border-box"})),An=computed(()=>{if(Cn.value=="portrait")return Math.floor((Mn.height-En.height)*pn)/Sn.value.height;if(Cn.value=="landscape"){let Dn=Math.floor((Mn.width-Tn.width-parseInt(fn))*pn)/Sn.value.height;return Sn.value.height*Dn+En.height<Mn.height?Math.floor((Mn.height-En.height)*pn)/Sn.value.width:Dn}}),Ln=computed(()=>{if(Cn.value=="portrait")return Sn.value.height+"mm";if(Cn.value=="landscape")return Sn.value.width+"mm"}),Rn=computed(()=>{if(Cn.value=="portrait")return Sn.value.width+"mm";if(Cn.value=="landscape")return Sn.value.height+"mm"}),Gn=computed(()=>Mn.height+"px"),Nn=computed(()=>{if(Cn.value=="portrait")return Sn.value.width*An.value/pn+"px";if(Cn.value=="landscape")return Sn.value.height*An.value/pn+"px"}),jn=()=>{console.log("export pdf");const Dn={orientation:Cn.value,unit:"mm",format:[parseInt(Ln.value),parseInt(Rn.value)]},Ci=new E(Dn),Jn=parseInt(wn.value),Ki=en.value.mapRef.getElementsByTagName("canvas")[0].width,xn=en.value.mapRef.getElementsByTagName("canvas")[0].height,$n=en.value.mapRef.getElementsByTagName("canvas")[0].toDataURL("image/png"),Ai=Ki*pn-Jn*2,Ti=(xn-En.height)*pn-Jn*2,Kn=Jn,Ii=En.height*pn+Jn,Pi=()=>{Ci.addImage($n,"PNG",Kn,Ii,Ai,Ti),Ci.save("carte.pdf")};!mn.value||yn.value==""?Pi():Ci.html(tn.value,{html2canvas:{scale:An.value},callback:function(Mi){Pi()}})};return onUpdated(()=>{let Dn=an.value.getElementsByClassName("fr-container")[0];Dn&&(Dn.classList.add("modal-override"),Dn.classList.remove("fr-container-md","fr-container"))}),(Dn,Ci)=>{const Jn=Ae,Ki=li,xn=pi,qn=_sfc_main$l,$n=$s;return openBlock(),createElementBlock("div",{ref_key:"modal",ref:an,id:"print-container"},[ke.visibility?(openBlock(),createBlock(Jn,{key:0,id:"print-button-position",class:"fr-btn fr-btn--md fr-btn fr-btn--secondary inline-flex justify-center print-button-size",title:"Ouvrir le panneau d'impression carte",icon:"px-print","icon-only":"","no-outline":"",onClick:Ze})):createCommentVNode("",!0),createVNode($n,{opened:unref(Ve),title:Ge,size:Be,onClose:Qe},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"printPage",ref:cn,class:"print-page"},[createBaseVNode("div",{ref_key:"printForm",ref:dn,class:"print-form"},[createVNode(Ki,{inline:!1,modelValue:unref(Cn),"onUpdate:modelValue":Ci[0]||(Ci[0]=Ai=>isRef(Cn)?Cn.value=Ai:null),options:je,small:!1,legend:"Mise en Page",class:"mb-20"},{legend:withCtx(()=>Ci[2]||(Ci[2]=[createTextVNode("Mise en Page")])),_:1},8,["modelValue"]),createVNode(xn,{modelValue:unref(bn),"onUpdate:modelValue":Ci[1]||(Ci[1]=Ai=>isRef(bn)?bn.value=Ai:null),label:"Dimensions",options:["A0","A1","A2","A3","A4","A5","B4","B5"]},null,8,["modelValue"]),createVNode(Jn,{id:"print-page-export",label:"Export PDF",title:"Export PDF",icon:"","no-outline":"",onClick:jn})],512),createBaseVNode("div",_hoisted_1$a,[createBaseVNode("div",{ref_key:"printPreview",ref:hn,class:"print-preview"},[unref(mn)?(openBlock(),createElementBlock("div",{key:0,id:"map-title",ref_key:"mapTitle",ref:tn,class:"map-title"},toDisplayString(unref(yn)),513)):createCommentVNode("",!0),unref(Ve)?(openBlock(),createBlock(_sfc_main$I,{key:1,class:"map",ref_key:"refMap",ref:en,"map-Id":unref(printMap)},{default:withCtx(()=>[createVNode(_sfc_main$H,{"map-Id":unref(printMap),center:unref(t).center,zoom:unref(t).zoom},null,8,["map-Id","center","zoom"]),createVNode(qn,{"map-Id":unref(printMap),"selected-layers":unref(Oe)},null,8,["map-Id","selected-layers"])]),_:1},8,["map-Id"])):createCommentVNode("",!0)],512)])],512)]),_:1},8,["opened"])],512)}}}),Print=_export_sfc(_sfc_main$k,[["__scopeId","data-v-50441eb1"]]),__default__$d={},_sfc_main$j=Object.assign(__default__$d,{__name:"Share",props:{visibility:Boolean,shareOptions:Object},setup(r){const e=useEulerian(),t=useDataStore(),ke=useMapStore(),Oe=r,Ge="Ouvrir le panneau de partage de carte",Be="fr-icon-link",je="",Ve="Partager une carte",Ze="lg",Qe=ref(!1),en=()=>{Qe.value=!0,e.pause()},tn=()=>{Qe.value=!1,e.resume()},an=t.getContacts(),cn=computed(()=>encodeURI(ke.permalink).replaceAll("&","%26")),dn=computed(()=>({address:an.mail,subject:"Cartes à consulter sur cartes.gouv.fr",body:`Bonjour,%0AJe vous invite à consulter cette carte sur Cartes.gouv.fr :%0A${cn.value}`})),hn=computed(()=>({to:`mailto:${dn.value.address}?subject=${dn.value.subject}&body=${dn.value.body}`,label:"Envoyer un mail"})),fn=computed(()=>[{name:"facebook",label:"Partager sur Facebook",url:an.networks.facebook+"?display=popup&u="+ke.permalink},{name:"twitter-x",label:"Partager sur X (anciennement Twitter)",url:an.networks.twitter+"?url="+cn.value+"&text=Ma carte IGN&via=&hashtags=IGNFrance"},{name:"linkedin",label:"Partager sur LinkedIn",url:an.networks.linkedin+"?url="+ke.permalink+"&title=Ma%20carte%20IGN"},{name:"instagram",label:"Partager sur Instagram",url:an.networks.instagram}]),pn=computed(()=>`<iframe
    width="600" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
    sandbox="allow-forms allow-scripts allow-same-origin"
    src="${ke.permalinkShare}"
    allowfullscreen>
  </iframe>`),mn=ref(""),{text:yn,copy:Cn,copied:wn,isSupported:bn}=useClipboard({clipboardSource:mn}),Sn=ref(null),Mn="co-copy",Tn=ref(.8325),En=computed(()=>({scale:Tn.value,name:Mn}));return onMounted(()=>{nextTick(function(){})}),onBeforeMount(()=>{nextTick(function(){})}),(An,Ln)=>{const Rn=Ae,Gn=wi,Nn=g$1,jn=qe,Dn=$s;return openBlock(),createElementBlock("div",{id:"share-container",ref_key:"target",ref:Sn},[Oe.visibility?(openBlock(),createBlock(Rn,{key:0,id:"share-button-position",class:"fr-btn fr-btn--md fr-btn fr-btn--secondary inline-flex justify-center share-button-size",label:je,"aria-label":Ge,icon:Be,"icon-only":"","no-outline":"",onClick:en})):createCommentVNode("",!0),createVNode(Dn,{opened:unref(Qe),title:Ve,size:Ze,onClose:tn},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(Gn,{copyLabel:"Copier dans le presse-papier",mail:unref(hn),networks:unref(fn),title:"Partages"},null,8,["mail","networks"])])]),createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(jn,{modelValue:unref(ke).permalink,"onUpdate:modelValue":Ln[1]||(Ln[1]=Ci=>unref(ke).permalink=Ci),label:"Lien permanent vers la carte",placeholder:"","label-visible":"",readonly:"",descriptionId:""},{label:withCtx(()=>[Ln[4]||(Ln[4]=createTextVNode(" Lien permanent vers la carte ")),createVNode(Rn,{tertiary:"",noOutline:!0,onClick:Ln[0]||(Ln[0]=Ci=>unref(Cn)(unref(ke).permalink))},{default:withCtx(()=>[createVNode(Nn,normalizeProps(guardReactiveProps(unref(En))),null,16)]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("p",null,[createVNode(jn,{modelValue:unref(pn),"onUpdate:modelValue":Ln[3]||(Ln[3]=Ci=>isRef(pn)?pn.value=Ci:null),placeholder:"",isTextarea:"","label-visible":"",readonly:"",descriptionId:"",style:{height:"200px"}},{label:withCtx(()=>[Ln[5]||(Ln[5]=createTextVNode(" Copiez le code HTML pour intégrer la carte dans un site ")),createVNode(Rn,{tertiary:"",noOutline:!0,onClick:Ln[2]||(Ln[2]=Ci=>unref(Cn)(unref(pn)))},{default:withCtx(()=>[createVNode(Nn,normalizeProps(guardReactiveProps(unref(En))),null,16)]),_:1})]),_:1},8,["modelValue"])])])]),_:1},8,["opened"])],512)}}}),Share=_export_sfc(_sfc_main$j,[["__scopeId","data-v-f3d343a7"]]),IconGeolocationSVG="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2036'%20width='48'%20height='48'%3e%3cpath%20fill='%23000091'%20d='M18.364%203.636a9%209%200%200%201%200%2012.728L12%2022.728l-6.364-6.364A9%209%200%200%201%2018.364%203.636ZM12%208a2%202%200%201%200%200%204%202%202%200%200%200%200-4Z'/%3e%3c/svg%3e",__default__$c={name:"Controls"},_sfc_main$i=Object.assign(__default__$c,{props:{controlOptions:Array},setup(r){const e=r,t=useDataStore();dist.useLogger().debug(e.controlOptions);const Oe={},Ge={},Be={id:"1",collapsed:!1,collapsible:!1,displayButtonAdvancedSearch:!0,displayButtonGeolocate:!0,displayButtonCoordinateSearch:!0,displayButtonClose:!1,resources:{search:!0},searchOptions:{addToMap:!1,filterServices:"WMTS,WMS,TMS",filterWMTSPriority:!0,filterLayersPriority:t.getFeatured().toString(),serviceOptions:{}},markerUrl:IconGeolocationSVG},je={options:{id:"2",position:"top-right",collapsed:!0,panel:!0,counter:!0}},Ve={id:"3",position:"top-right",panel:!0,auto:!0,draggable:!1},Ze={id:"4",units:"metric",bar:!1},Qe={id:"5",position:"bottom-left",panel:!0,title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3},en={id:"6",position:"bottom-left",collapsed:!1},tn={id:"7",position:"bottom-left"},an={id:"8",position:"bottom-right"},cn={id:"9",position:"bottom-right"},dn={id:"10",position:"top-right",gutter:!1,controlCatalogElement:document.getElementById("MenuControl")},hn={id:"11",position:"top-right",gutter:!1,listable:!0},fn={id:"12",position:"top-right",gutter:!1,listable:!0},pn={id:"13",position:"top-right",gutter:!1,listable:!0},mn={id:"14",position:"top-right",gutter:!1,listable:!0},yn={id:"15",position:"top-right",gutter:!1,listable:!0},Cn={id:"16",position:"top-right",gutter:!1,listable:!0},wn={id:"17",position:"top-right",gutter:!1,listable:!0},bn={id:"18",position:"top-right",gutter:!1,listable:!0,systems:[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:"EPSG:27572",type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}},{crs:"EPSG:32620",label:"UTM 20N (Guadeloupe, Martinique)",type:"Metric",geoBBox:{left:-66,bottom:0,right:-60,top:84}},{crs:"EPSG:4467",label:"UTM 21N (Saint-Pierre-et-Miquelon)",type:"Metric",geoBBox:{left:-57.1,bottom:43.41,right:-55.9,top:47.37}},{crs:"EPSG:2972",label:"UTM 22N (Guyane)",type:"Metric",geoBBox:{left:-54.6,bottom:2.11,right:-49.46,top:8.88}},{crs:"EPSG:32630",label:"UTM 30N (France métropolitaine)",type:"Metric",geoBBox:{left:-6,bottom:0,right:0,top:84}},{crs:"EPSG:32631",label:"UTM 31N (France métropolitaine)",type:"Metric",geoBBox:{left:0,bottom:0,right:6,top:84}},{crs:"EPSG:32632",label:"UTM 32N (France métropolitaine)",type:"Metric",geoBBox:{left:6,bottom:0,right:12,top:84}},{crs:"EPSG:4471",label:"UTM 38S (Mayotte)",type:"Metric",geoBBox:{left:43.68,bottom:-14.49,right:46.7,top:-11.33}},{crs:"EPSG:2975",label:"UTM 40S (Réunion)",type:"Metric",geoBBox:{left:51.83,bottom:-24.72,right:58.24,top:-18.28}},{crs:"EPSG:3296",label:"UTM 5S (Polynésie)",type:"Metric",geoBBox:{left:-158.13,bottom:-26.7,right:-150,top:-12.5}},{crs:"EPSG:3297",label:"UTM 6S (Polynésie)",type:"Metric",geoBBox:{left:-150,bottom:-31.2,right:-144,top:-7.29}},{crs:"EPSG:32707",label:"UTM 7S (Polynésie)",type:"Metric",geoBBox:{left:-144,bottom:-80,right:-138,top:0}},{crs:"EPSG:32708",label:"UTM 8S (Polynésie)",type:"Metric",geoBBox:{left:-138,bottom:-80,right:-132,top:0}},{crs:"EPSG:26912",label:"UTM 12N (Île de Clipperton)",type:"Metric",geoBBox:{left:-109.5,bottom:10.17,right:-109,top:10.5}},{crs:"EPSG:32742",label:"UTM 42S (Îles Kerguelen)",type:"Metric",geoBBox:{left:66,bottom:-80,right:72,top:0}},{crs:"EPSG:32739",label:"UTM 39S (Îles Crozet)",type:"Metric",geoBBox:{left:48,bottom:-80,right:54,top:0}},{crs:"EPSG:32743",label:"UTM 43S (Îles St-Paul et Amsterdam)",type:"Metric",geoBBox:{left:72,bottom:-80,right:78,top:0}},{crs:"EPSG:2986",label:"Stéréographique polaire (Terre Adélie)",type:"Metric",geoBBox:{left:136,bottom:-67.13,right:142,top:-65.61}},{crs:"EPSG:32737",label:"UTM 37S (Îles du canal de Mozambique)",type:"Metric",geoBBox:{left:36,bottom:-80,right:42,top:0}},{crs:"EPSG:32738",label:"UTM 38S (Îles du canal de Mozambique)",type:"Metric",geoBBox:{left:42,bottom:-80,right:48,top:0}},{crs:"EPSG:2988",label:"UTM 1S (Wallis-et-Futuna)",type:"Metric",geoBBox:{left:-176.25,bottom:-13.41,right:-176.07,top:-13.16}},{crs:"EPSG:3163",label:"RGNC91-93 (Nouvelle-Calédonie)",type:"Metric",geoBBox:{left:156.25,bottom:-26.45,right:174.28,top:-14.83}}]},Sn={id:"19",position:"top-right",gutter:!1,listable:!0},Mn={id:"20",position:"top-right",gutter:!1,listable:!0};return(Tn,En)=>{const An=_sfc_main$F,Ln=_sfc_main$G;return openBlock(),createElementBlock(Fragment,null,[r.controlOptions?(openBlock(),createBlock(Share,{key:0,visibility:e.controlOptions.includes(unref(useControls).Share.id),"share-options":Oe},null,8,["visibility"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(Print,{key:1,visibility:e.controlOptions.includes(unref(useControls).Print.id),"print-options":Ge},null,8,["visibility"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$A,{key:2,visibility:e.controlOptions.includes(unref(useControls).LayerSwitcher.id),analytic:unref(useControls).LayerSwitcher.analytic,"layer-switcher-options":je},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$z,{key:3,visibility:e.controlOptions.includes(unref(useControls).Legends.id),analytic:unref(useControls).Legends.analytic,"legends-options":Ve},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$w,{key:4,visibility:e.controlOptions.includes(unref(useControls).Route.id),analytic:unref(useControls).Route.analytic,"route-options":mn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$x,{key:5,visibility:e.controlOptions.includes(unref(useControls).Isocurve.id),analytic:unref(useControls).Isocurve.analytic,"isocurve-options":pn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(An,{key:6,visibility:e.controlOptions.includes(unref(useControls).ReverseGeocode.id),analytic:unref(useControls).ReverseGeocode.analytic,"reverse-geocode-options":fn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(Ln,{key:7,visibility:e.controlOptions.includes(unref(useControls).FullScreen.id),analytic:unref(useControls).FullScreen.analytic,"fullscreen-options":an},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$B,{key:8,visibility:e.controlOptions.includes(unref(useControls).Zoom.id),analytic:unref(useControls).Zoom.analytic,"zoom-options":cn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$E,{key:9,visibility:e.controlOptions.includes(unref(useControls).SearchEngine.id),analytic:unref(useControls).SearchEngine.analytic,"search-engine-options":Be},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$p,{key:10,visibility:e.controlOptions.includes(unref(useControls).GetFeatureInfo.id),analytic:unref(useControls).GetFeatureInfo.analytic,"get-feature-info-options":en},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$D,{key:11,visibility:e.controlOptions.includes(unref(useControls).ScaleLine.id),analytic:unref(useControls).ScaleLine.analytic,"scale-line-options":Ze},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$C,{key:12,visibility:e.controlOptions.includes(unref(useControls).OverviewMap.id),analytic:unref(useControls).OverviewMap.analytic,"overview-map-options":tn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$q,{key:13,visibility:e.controlOptions.includes(unref(useControls).Territories.id),analytic:unref(useControls).Territories.analytic,"territories-options":Qe},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$v,{key:14,visibility:e.controlOptions.includes(unref(useControls).MeasureLength.id),analytic:unref(useControls).MeasureLength.analytic,"measure-length-options":yn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$u,{key:15,visibility:e.controlOptions.includes(unref(useControls).MeasureArea.id),analytic:unref(useControls).MeasureArea.analytic,"measure-area-options":Cn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$t,{key:16,visibility:e.controlOptions.includes(unref(useControls).MeasureAzimuth.id),analytic:unref(useControls).MeasureAzimuth.analytic,"measure-azimuth-options":wn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$s,{key:17,visibility:e.controlOptions.includes(unref(useControls).MousePosition.id),analytic:unref(useControls).MousePosition.analytic,"mouse-position-options":bn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$y,{key:18,visibility:e.controlOptions.includes(unref(useControls).Drawing.id),analytic:unref(useControls).Drawing.analytic,"drawing-options":hn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$r,{key:19,visibility:e.controlOptions.includes(unref(useControls).ElevationPath.id),analytic:unref(useControls).ElevationPath.analytic,"elevation-path-options":Sn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$o,{key:20,visibility:e.controlOptions.includes(unref(useControls).LayerImport.id),analytic:unref(useControls).LayerImport.analytic,"layer-import-options":Mn},null,8,["visibility","analytic"])):createCommentVNode("",!0),r.controlOptions?(openBlock(),createBlock(_sfc_main$n,{key:21,visibility:e.controlOptions.includes(unref(useControls).ControlList.id),analytic:unref(useControls).ControlList.analytic,"control-list-options":dn},null,8,["visibility","analytic"])):createCommentVNode("",!0)],64)}}}),__default__$b={name:"Carto"},_sfc_main$h=Object.assign(__default__$b,{props:{selectedControls:Array,selectedLayers:Object},setup(r){const e=r,t=useMapStore(),ke=ref(null),Oe=computed(()=>ke.value&&ke.value.mapRef);return(Ge,Be)=>(openBlock(),createBlock(_sfc_main$I,{class:"map",ref_key:"refMap",ref:ke,mapId:unref(mainMap)},{default:withCtx(()=>[createVNode(_sfc_main$H,{"map-Id":unref(mainMap),center:unref(t).center,zoom:unref(t).zoom},null,8,["map-Id","center","zoom"]),unref(Oe)?(openBlock(),createBlock(_sfc_main$i,{key:0,"control-options":e.selectedControls},null,8,["control-options"])):createCommentVNode("",!0),createVNode(_sfc_main$l,{"map-Id":unref(mainMap),"selected-layers":e.selectedLayers},null,8,["map-Id","selected-layers"])]),_:1},8,["mapId"]))}}),Carto=_export_sfc(_sfc_main$h,[["__scopeId","data-v-2e05399e"]]),_hoisted_1$9={class:"menu-content-list"},_hoisted_2$4={class:"menu-collapse-icon-wrapper"},_hoisted_3$1={class:"menu-content"},__default__$a={name:"MenuLateralWrapper"},_sfc_main$g=Object.assign(__default__$a,{props:mergeModels({side:String,visibility:Boolean,id:String},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(r,{expose:e}){const t=r,ke="io-close",Oe=.8325,Ge=computed(()=>({scale:Oe.value,name:ke})),Be=useModel(r,"modelValue",!1),je=ref();je.value=30,computed(()=>je.value+"vw");const Ve=ref();function Ze(){Be.value=!1}function Qe(){Be.value=!0}return e({closeMenu:Ze,openMenu:Qe}),(en,tn)=>{const an=Ae;return r.visibility?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["menu-toggle-wrap",`${Be.value&&"is_expanded"} ${t.side}`])},[createBaseVNode("div",{ref_key:"menuTabs",ref:Ve,class:"menu-logo-list"},[renderSlot(en.$slots,"navButtons",{},void 0,!0)],512),withDirectives(createBaseVNode("div",_hoisted_1$9,[createBaseVNode("div",_hoisted_2$4,[createVNode(an,{id:t.id,tertiary:"","no-outline":"",class:"menu-collapse-icon",onClick:Ze},{default:withCtx(()=>[tn[0]||(tn[0]=createTextVNode(" Fermer ")),createVNode(unref(g$1),normalizeProps(guardReactiveProps(unref(Ge))),null,16)]),_:1},8,["id"])]),createBaseVNode("div",_hoisted_3$1,[renderSlot(en.$slots,"content",{},void 0,!0)])],512),[[vShow,Be.value]])],2)):createCommentVNode("",!0)}}}),__unplugin_components_1=_export_sfc(_sfc_main$g,[["__scopeId","data-v-e61ca6d8"]]),__default__$9={name:"MenuLateralButton"},_sfc_main$f=Object.assign(__default__$9,{props:{icon:String,id:String,active:Boolean,title:String},emits:["tabClicked"],setup(r,{emit:e}){const t=r,ke=t.icon,Oe=e,Ge=()=>{Oe("tabClicked",t.id)};return(Be,je)=>{const Ve=Ae;return openBlock(),createBlock(Ve,{id:r.id,secondary:"","aria-label":r.title,class:normalizeClass(`${r.active?"active":""}  'navBarIcon'`&&"navButton"),icon:unref(ke),iconOnly:!0,onClick:Ge},null,8,["id","aria-label","class","icon"])}}}),__unplugin_components_0=_export_sfc(_sfc_main$f,[["__scopeId","data-v-5909cbb8"]]),side$1="left",_sfc_main$e={__name:"LeftMenuTool",props:{},setup(r){const e=ref(),t=computed(()=>[{componentName:"MenuCatalogue",icon:"catalogIcon",title:"Catalogue de données"}]),ke=ref("MenuCatalogueContent"),Oe=ref(null);function Ge(je){Be(je)&&e.value?Oe.value.closeMenu():(ke.value=je+"Content",Oe.value.openMenu())}function Be(je){return ke.value.replace("Content","")===je}return(je,Ve)=>{const Ze=__unplugin_components_0,Qe=__unplugin_components_1;return openBlock(),createBlock(Qe,{side:side$1,visibility:!0,id:"MenuCatalogueContentClose",modelValue:unref(e),"onUpdate:modelValue":Ve[0]||(Ve[0]=en=>isRef(e)?e.value=en:null),ref_key:"wrapper",ref:Oe},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuCatalogueContent",class:normalizeClass([unref(ke)==="MenuCatalogueContent"?"activeTab":"inactiveTab"])},[renderSlot(je.$slots,"default",{},void 0,!0)],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(t),en=>(openBlock(),createBlock(Ze,{icon:en.icon,id:en.componentName,active:Be(en.componentName),title:en.title,onTabClicked:Ge},null,8,["icon","id","active","title"]))),256))]),_:3},8,["modelValue"])}}},LeftMenuTool=_export_sfc(_sfc_main$e,[["__scopeId","data-v-38594baa"]]),side="right",_sfc_main$d={__name:"RightMenuTool",props:{},setup(r){const e=computed(()=>[{componentName:"MenuControl",icon:"menuWidgetIcon",title:"Catalogue d'outils"}]),t=ref("MenuControlContent"),ke=ref(),Oe=ref(null);function Ge(je){Be(je)&&ke.value?Oe.value.closeMenu():(t.value=je+"Content",Oe.value.openMenu())}function Be(je){return t.value.replace("Content","")===je}return(je,Ve)=>{const Ze=__unplugin_components_0,Qe=__unplugin_components_1;return openBlock(),createBlock(Qe,{side,visibility:!0,id:"MenuControlContentClose",modelValue:unref(ke),"onUpdate:modelValue":Ve[0]||(Ve[0]=en=>isRef(ke)?ke.value=en:null),ref_key:"wrapper",ref:Oe},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuControlContent",class:normalizeClass([unref(t)==="MenuControlContent"?"activeTab":"inactiveTab"])},[renderSlot(je.$slots,"default",{},void 0,!0)],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(e),en=>(openBlock(),createBlock(Ze,{icon:en.icon,id:en.componentName,active:Be(en.componentName),title:en.title,onTabClicked:Ge},null,8,["icon","id","active","title"]))),256))]),_:3},8,["modelValue"])}}},RightMenuTool=_export_sfc(_sfc_main$d,[["__scopeId","data-v-62b70675"]]),_hoisted_1$8=["innerHTML"],__default__$8={name:"LayerCatalogue"},_sfc_main$c=Object.assign(__default__$8,{props:{layer:Object,active:Boolean},setup(r){const e=useMapStore(),t=r,ke=ref(t.active);function Oe(Ge,Be){ke.value=Ge,ke.value?e.addLayer(Be.key):e.removeLayer(Be.key)}return onUpdated(()=>{ke.value=t.active}),(Ge,Be)=>{const je=vt$1;return openBlock(),createElementBlock(Fragment,null,[createVNode(je,{"model-value":unref(ke),label:r.layer.title,id:r.layer.id,"onUpdate:modelValue":Be[0]||(Be[0]=Ve=>Oe(Ve,r.layer))},null,8,["model-value","label","id"]),createBaseVNode("div",{class:"layer-description",innerHTML:r.layer.description},null,8,_hoisted_1$8)],64)}}}),__default__$7={name:"LayerList"},_sfc_main$b=Object.assign(__default__$7,{props:{layers:Object,selectedLayers:Object,listName:String},setup(r){return(e,t)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(r.layers,ke=>(openBlock(),createBlock(_sfc_main$c,{key:`${ke.key}-${r.listName}`,active:r.selectedLayers?r.selectedLayers.filter(Oe=>Oe.key==ke.key).length>0:!1,layer:ke},null,8,["active","layer"]))),128))}}),__default__$6={name:"MenuCatalogueThematique"},_sfc_main$a=Object.assign(__default__$6,{props:{thematicLabel:String,layersCount:Number},setup(r){const e=r,t=computed(()=>e.thematicLabel+` (${e.layersCount})`),ke=ref("");return(Oe,Ge)=>{const Be=fa;return openBlock(),createBlock(Be,{title:unref(t),"expanded-id":unref(ke),onExpand:Ge[0]||(Ge[0]=je=>ke.value=je)},{default:withCtx(()=>[renderSlot(Oe.$slots,"default")]),_:3},8,["title","expanded-id"])}}});function useSearchInArray(r,e,t){return r.filter(ke=>{if(t.map(Oe=>{if(ke.hasOwnProperty(Oe)&&ke[Oe]&&ke[Oe].toLowerCase().includes(e==null?void 0:e.toLowerCase()))return!0}).includes(!0))return ke})}const _hoisted_1$7={class:"catalogue-content-with-radio-btn"},__default__$5={name:"DataLayerCatalogue"},_sfc_main$9=Object.assign(__default__$5,{props:{dataLayers:Object,currDataFilter:String,searchString:String,selectedLayers:Object},setup(r){const e=r,t=computed(()=>Oe(e.dataLayers)),ke=computed(()=>Ge(e.dataLayers));function Oe(Be){let je=[...new Set(Object.values(Be).filter(Ve=>{if(Ve.hasOwnProperty("thematic")&&Ve.thematic.length>0)return Ve.thematic}).map(Ve=>Ve.thematic))].map(Ve=>({thematicLabel:Ve,layers:useSearchInArray(Object.values(Be).filter(Ze=>Ze.hasOwnProperty("thematic")&&Ve===Ze.thematic).map(Ze=>Ze),e.searchString,["title","description","name"])}));return je.push({thematicLabel:"Autres",layers:useSearchInArray(Object.values(Be).filter(Ve=>{if(!Ve.hasOwnProperty("thematic")||Ve.thematic.length===0)return Ve}),e.searchString,["title","description","name"])}),je}function Ge(Be){let je=[...new Set(Object.values(Be).filter(Ve=>{if(Ve.hasOwnProperty("producer")&&Ve.producer.length>0)return Ve.producer}).map(Ve=>Ve.producer))].map(Ve=>({producerLabel:Ve,layers:useSearchInArray(Object.values(Be).filter(Ze=>Ze.hasOwnProperty("producer")&&Ve===Ze.producer).map(Ze=>Ze),e.searchString,["title","description","name"])}));return je.push({producerLabel:"IGN",layers:useSearchInArray(Object.values(Be).filter(Ve=>{if(!Ve.hasOwnProperty("producer")||Ve.producer.length==0)return Ve}),e.searchString,["title","description","name"])}),je}return(Be,je)=>{const Ve=_sfc_main$b,Ze=_sfc_main$a,Qe=pa;return openBlock(),createElementBlock("div",_hoisted_1$7,[r.currDataFilter==="producteur"?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(ke),en=>(openBlock(),createBlock(Qe,{key:en.producerLabel},{default:withCtx(()=>[en.layers.length>0?(openBlock(),createBlock(Ze,{key:0,"thematic-label":en.producerLabel,"layers-count":en.layers.length},{default:withCtx(()=>[createVNode(Ve,{"list-name":r.currDataFilter,"selected-layers":r.selectedLayers,layers:en.layers},null,8,["list-name","selected-layers","layers"])]),_:2},1032,["thematic-label","layers-count"])):createCommentVNode("",!0)]),_:2},1024))),128)):createCommentVNode("",!0),r.currDataFilter==="theme"?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(t),en=>(openBlock(),createBlock(Qe,{key:en.thematicLabel},{default:withCtx(()=>[en.layers.length>0?(openBlock(),createBlock(Ze,{key:0,"thematic-label":en.thematicLabel,"layers-count":en.layers.length},{default:withCtx(()=>[createVNode(Ve,{"list-name":r.currDataFilter,"selected-layers":r.selectedLayers,layers:en.layers},null,8,["list-name","selected-layers","layers"])]),_:2},1032,["thematic-label","layers-count"])):createCommentVNode("",!0)]),_:2},1024))),128)):createCommentVNode("",!0),r.currDataFilter=="tout"?(openBlock(),createBlock(Ve,{key:2,"list-name":r.currDataFilter,"selected-layers":r.selectedLayers,layers:unref(useSearchInArray)(e.dataLayers,r.searchString,["title","description","name"])},null,8,["list-name","selected-layers","layers"])):createCommentVNode("",!0)])}}}),_hoisted_1$6={class:"catalogue-container"},_hoisted_2$3={class:"catalogue-search-bar"},__default__$4={name:"CatalogueMenu"},_sfc_main$8=Object.assign(__default__$4,{props:{layers:Object,selectedLayers:Object},setup(r){const e=dist.useLogger();useMapStore();const t=r;e.debug(t.layers);const ke=ref(""),Oe=computed(()=>Object.values(t.layers).filter(dn=>{if(dn.hasOwnProperty("base")&&dn.base)return dn})),Ge=computed(()=>Object.values(t.layers).filter(dn=>{if(!dn.hasOwnProperty("base")||!dn.base)return dn})),Be="Liste des couches",je=[{title:"Fonds de carte",tabId:"tab-0",panelId:"tab-content-0"},{title:"Données",tabId:"tab-1",panelId:"tab-content-10"}],Ve=ref(0),Ze=ref(!0),Qe=0;function en(dn){Ze.value=Ve.value<dn,Ve.value=dn}function tn(dn){ke.value=dn}const an=[{label:"Producteur",value:"producteur"},{label:"Thème",value:"theme"},{label:"Tout",value:"tout"}],cn=ref("producteur");return(dn,hn)=>{const fn=Fe,pn=Pt$1,mn=Po,yn=td$1;return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$3,[createVNode(fn,{"model-value":unref(ke),"onUpdate:modelValue":tn},null,8,["model-value"])]),createVNode(yn,{"tab-list-name":Be,"tab-titles":je,"initial-selected-index":Qe,onSelectTab:en},{default:withCtx(()=>[createVNode(pn,{class:"catalogue-content","panel-id":"tab-content-0","tab-id":"tab-0",selected:unref(Ve)===0,asc:unref(Ze)},{default:withCtx(()=>[createVNode(_sfc_main$b,{"list-name":"dataLayer","selected-layers":r.selectedLayers,layers:unref(useSearchInArray)(unref(Oe),unref(ke),["title","description","name"])},null,8,["selected-layers","layers"])]),_:1},8,["selected","asc"]),createVNode(pn,{"panel-id":"tab-content-1","tab-id":"tab-1",selected:unref(Ve)===1,asc:unref(Ze)},{default:withCtx(()=>[createVNode(mn,{inline:!0,"model-value":unref(cn),small:!0,name:"filtre",options:an,"onUpdate:modelValue":hn[0]||(hn[0]=Cn=>cn.value=Cn)},null,8,["model-value"]),createVNode(_sfc_main$9,{"data-layers":unref(Ge),"curr-data-filter":unref(cn),"search-string":unref(ke),"selected-layers":r.selectedLayers},null,8,["data-layers","curr-data-filter","search-string","selected-layers"])]),_:1},8,["selected","asc"])]),_:1})])}}}),MenuCatalogue=_export_sfc(_sfc_main$8,[["__scopeId","data-v-bbb2ef91"]]),_hoisted_1$5={class:"control-list-element"},__default__$3={name:"ControlListElement"},_sfc_main$7=Object.assign(__default__$3,{props:mergeModels({controlListElementOptions:Object,selectedControls:()=>[]},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(r){const e=r,t=useModel(r,"modelValue"),ke=ref();return watch(ke,Oe=>{Oe===!0&&!t.value.includes(e.controlListElementOptions.name)&&(t.value=[...t.value,e.controlListElementOptions.name]),Oe===!1&&(t.value=t.value.filter(Ge=>Ge!==e.controlListElementOptions.name))}),onMounted(()=>{}),onUpdated(()=>{}),(Oe,Ge)=>{const Be=Rd;return openBlock(),createElementBlock("tr",_hoisted_1$5,[Ge[1]||(Ge[1]=createBaseVNode("td",{class:"control-list-element-img"},null,-1)),createBaseVNode("td",null,[createVNode(Be,mergeProps({disabled:r.controlListElementOptions.disabled,hint:r.controlListElementOptions.hint,inputId:r.controlListElementOptions.id,label:r.controlListElementOptions.label,labelLeft:"",modelValue:t.value===!0||Array.isArray(t.value)&&t.value.includes(r.controlListElementOptions.name),"onUpdate:modelValue":Ge[0]||(Ge[0]=je=>isRef(ke)?ke.value=je:null)},Oe.$attrs),null,16,["disabled","hint","inputId","label","modelValue"])])])}}}),ControlListElement=_export_sfc(_sfc_main$7,[["__scopeId","data-v-c8a00218"]]),_hoisted_1$4={class:"control-container"},_hoisted_2$2={class:"control-search-bar"},_hoisted_3={class:"control-content"},__default__$2={name:"MenuControl"},_sfc_main$6=Object.assign(__default__$2,{props:mergeModels({selectedControls:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(r){dist.useLogger();const e=useMapStore(),t=r,ke=useModel(r,"modelValue"),Oe=useControlsMenuOptions(),Ge=computed(()=>Oe.filter(Ve=>{if(Ve.label.toLowerCase().includes(Be.value.toLowerCase())||Ve.hint.toLowerCase().includes(Be.value.toLowerCase())||Ve.name.toLowerCase().includes(Be.value.toLowerCase()))return Ve}));computed(()=>t.selectedControls?Ge.value.filter(Ve=>{if(t.selectedControls.includes(Ve.name))return Ve}):[]),ref(0),ref(!0);const Be=ref("");function je(Ve){Be.value=Ve}return watch(ke,Ve=>{e.cleanControls();for(let Ze=0;Ze<Ve.length;Ze++){const Qe=Ve[Ze];e.addControl(Qe)}}),onMounted(()=>{}),onUpdated(()=>{}),(Ve,Ze)=>{const Qe=Fe;return openBlock(),createElementBlock("div",_hoisted_1$4,[Ze[1]||(Ze[1]=createBaseVNode("h4",null,"Gestion d'outils",-1)),createBaseVNode("div",_hoisted_2$2,[createVNode(Qe,{"model-value":unref(Be),"onUpdate:modelValue":je},null,8,["model-value"])]),createBaseVNode("div",_hoisted_3,[createBaseVNode("table",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Ge),(en,tn)=>(openBlock(),createBlock(ControlListElement,{key:tn,modelValue:ke.value,"onUpdate:modelValue":Ze[0]||(Ze[0]=an=>ke.value=an),"model-value":t.selectedControls,"control-list-element-options":en},null,8,["modelValue","model-value","control-list-element-options"]))),128))])])])}}}),MenuControl=_export_sfc(_sfc_main$6,[["__scopeId","data-v-5a3e91f4"]]),_hoisted_1$3={id:"map-and-tools-container"},_sfc_main$5=defineComponent({__name:"CartoAndTools",setup(r){const e=useMapStore(),t=useDataStore(),ke=computed(()=>e.getLayers().map(Be=>{var je=t.getLayerByID(Be),Ve=e.getLayerProperty(Be);return je.opacity=Ve.opacity,je.visible=Ve.visible,je.gray=Ve.gray,je})),Oe=computed(()=>e.getControls());return provide("selectedLayers",ke),(Ge,Be)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createVNode(LeftMenuTool,null,{default:withCtx(()=>[createVNode(MenuCatalogue,{"selected-layers":unref(ke),layers:unref(t).getLayers()},null,8,["selected-layers","layers"])]),_:1}),createVNode(Carto,{"selected-layers":unref(ke),"selected-controls":unref(Oe)},null,8,["selected-layers","selected-controls"]),createVNode(RightMenuTool,null,{default:withCtx(()=>[createVNode(MenuControl,{"selected-controls":unref(Oe)},null,8,["selected-controls"])]),_:1})]))}}),CartoAndTools=_export_sfc(_sfc_main$5,[["__scopeId","data-v-b53d5257"]]),_sfc_main$4={},_hoisted_1$2={class:"loader"};function _sfc_render(r,e){return openBlock(),createElementBlock("span",_hoisted_1$2)}const Patience=_export_sfc(_sfc_main$4,[["render",_sfc_render],["__scopeId","data-v-8df93c18"]]),_sfc_main$3={__name:"StoreData",props:{},async setup(r){let e,t;const ke=dist.useLogger(),Oe=useDataStore(),{fetchData:Ge}=Oe,Be=([e,t]=withAsyncContext(()=>Ge()),e=await e,t(),e);return ke.debug(Be),(je,Ve)=>unref(Oe).isLoaded&&!unref(Oe).error?renderSlot(je.$slots,"default",{key:0}):createCommentVNode("",!0)}},__default__$1={},_sfc_main$2=Object.assign(__default__$1,{__name:"ModalInformation",setup(r){const e=useEulerian(),t=useMapStore(),Oe=useDataStore().getInformations(),Ge=Oe.title,Be=Oe.description,je=Oe.type,Ve=Oe.version,Ze=ref(Oe.opened&&Ve!==parseInt(t.noInformation,10));Ze.value&&e.pause();const Qe=()=>{Ze.value=!1,e.resume()},en=()=>{Ze.value=!1,t.noInformation=Ve,e.resume()};return(tn,an)=>{const cn=ba,dn=$s;return openBlock(),createBlock(dn,{opened:unref(Ze),title:unref(Ge),size:"md",onClose:Qe},{default:withCtx(()=>[createVNode(cn,{description:unref(Be),type:unref(je)},null,8,["description","type"]),createBaseVNode("button",{class:"fr-btn--tertiary-no-outline",title:"ne plus afficher ce message",type:"button",onClick:en},an[0]||(an[0]=[createBaseVNode("span",null,"Ne plus afficher ce message",-1)]))]),_:1},8,["opened","title"])}}}),_hoisted_1$1={class:"fr-container fr-container--fluid fr-container-md"},_hoisted_2$1={class:"patience-container"},_sfc_main$1=defineComponent({__name:"Load",setup(r){return(e,t)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$3,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[createVNode(_sfc_main$2)]),createVNode(CartoAndTools)]),_:1})]),_:1}))}}),_hoisted_1={class:"map-container"},_hoisted_2={class:"patience-container"},__default__={},_sfc_main=Object.assign(__default__,{__name:"Embed",setup(r){const e=useMapStore(),t=useDataStore(),ke=computed(()=>e.getLayers().map(Ve=>{var Ze=t.getLayerByID(Ve),Qe=e.getLayerProperty(Ve);return Ze.opacity=Qe.opacity,Ze.visible=Qe.visible,Ze.gray=Qe.gray,Ze})),Oe=["ScaleLine","OverviewMap","Zoom"];function Ge(){var je=document.querySelector(".fr-header");je.classList.add("gpf-hidden")}function Be(){var je=document.querySelector(".fr-footer");je.classList.add("gpf-hidden")}return onMounted(()=>{Ge(),Be()}),(je,Ve)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$3,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1,[createVNode(Carto,{"selected-layers":unref(ke),"selected-controls":Oe},null,8,["selected-layers"])])]),_:1})]),_:1}))}}),MAIN_TITLE="Le service public des cartes et données du territoire | cartes.gouv.fr",routes=[{path:"/",name:"Carte",component:_sfc_main$1},{path:"/embed",name:"Carte embarquée",component:_sfc_main}],router=createRouter({history:createWebHistory("/cartes.gouv.fr-entree-carto"),routes});router.beforeEach(r=>{if(r.fullPath==="/accueil"&&!window.location.href.includes("/accueil"))return window.open(r.href),!1;const e=r.meta.title?`${r.meta.title} - `:"";document.title=`${e}${MAIN_TITLE}`});const RiArrowRightLine={name:"ri-arrow-right-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"/>'},RiCloseLine={name:"ri-close-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/>'},RiFlagLine={name:"ri-flag-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5 16v6H3V3h9.382a1 1 0 01.894.553L14 5h6a1 1 0 011 1v11a1 1 0 01-1 1h-6.382a1 1 0 01-.894-.553L12 16H5zM5 5v9h8.236l1 2H19V7h-6.236l-1-2H5z"/>'},RiHome2Line={name:"ri-home-2-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346 0L23 11h-3v9a1 1 0 01-1 1zM6 19h12V9.157l-6-5.454-6 5.454V19z"/>'},RiHome4Line={name:"ri-home-4-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346 0L23 11h-3v9a1 1 0 01-1 1zm-6-2h5V9.157l-6-5.454-6 5.454V19h5v-6h2v6z"/>'},RiQuestionMark={name:"ri-question-mark",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12 19a1.5 1.5 0 11-.001 3.001A1.5 1.5 0 0112 19zm0-17a6 6 0 016 6c0 2.165-.753 3.29-2.674 4.923C13.399 14.56 13 15.297 13 17h-2c0-2.474.787-3.695 3.031-5.601C15.548 10.11 16 9.434 16 8c0-2.21-1.79-4-4-4S8 5.79 8 8v1H6V8a6 6 0 016-6z"/>'},RiRefreshLine={name:"ri-refresh-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5.463 4.433A9.961 9.961 0 0112 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 006.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0112 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0013.54 5.772l.997 1.795z"/>'},FaUserCircle={name:"fa-user-circle",minX:-51.52,minY:-43.52,width:599.04,height:599.04,raw:'<path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/>'},BiChevronDoubleRight={name:"bi-chevron-double-right",minX:-1.6,minY:-1.6,width:19.2,height:19.2,raw:'<path fill-rule="evenodd" d="M3.646 1.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L9.293 8 3.646 2.354a.5.5 0 010-.708z"/><path fill-rule="evenodd" d="M7.646 1.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L13.293 8 7.646 2.354a.5.5 0 010-.708z"/>'},CoCopy={name:"co-copy",minX:-51.2,minY:-51.2,width:614.4,height:614.4,raw:'<path fill="var(--ci-primary-color, currentColor)" d="M408 432h-32v32H112V136h32v-32H80v392h328v-64z" class="ci-primary"/><path fill="var(--ci-primary-color, currentColor)" d="M176 16v384h320V153.373L358.627 16zm288 352H208V48h104v152h152zm0-200H344V48h1.372L464 166.627z" class="ci-primary"/>'},IoClose={name:"io-close",minX:0,minY:0,width:512,height:512,raw:'<path d="M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"/>'},PxPrint={name:"px-print",minX:-1.8,minY:-1.8,width:27.6,height:27.6,raw:'<path fill="currentColor" d="M6 2h12v6h4v10h-4v4H6v-4H2V8h4V2zm2 6h8V4H8v4zm-2 8v-4h12v4h2v-6H4v6h2zm2-2v6h8v-6H8z"/>'},MdCroplandscapeSharp={name:"md-croplandscape-sharp",minX:.48,minY:.48,width:23.04,height:23.04,raw:'<path fill="none" d="M0 0h24v24H0V0z"/><path d="M21 5H3v14h18V5zm-2 12H5V7h14v10z"/>'},MdCropportraitSharp={name:"md-cropportrait-sharp",minX:.48,minY:.48,width:23.04,height:23.04,raw:'<path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 3H5v18h14V3zm-2 16H7V5h10v14z"/>'},icons=Object.freeze(Object.defineProperty({__proto__:null,BiChevronDoubleRight,CoCopy,FaUserCircle,IoClose,MdCroplandscapeSharp,MdCropportraitSharp,PxPrint,RiArrowRightLine,RiCloseLine,RiFlagLine,RiHome2Line,RiHome4Line,RiQuestionMark,RiRefreshLine},Symbol.toStringTag,{value:"Module"}));let customIcons={catalogIcon:{name:"catalogIcon",width:24,height:24,raw:"<path d='M13 21V23H11V21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H9C10.1947 3 11.2671 3.52375 12 4.35418C12.7329 3.52375 13.8053 3 15 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H13ZM20 19V5H15C13.8954 5 13 5.89543 13 7V19H20ZM11 19V7C11 5.89543 10.1046 5 9 5H4V19H11Z'/>"},menuWidgetIcon:{name:"menuWidgetIcon",width:24,height:24,raw:"<path d='M5.32894 3.27158C6.56203 2.8332 7.99181 3.10749 8.97878 4.09446C10.0997 5.21537 10.3014 6.90741 9.58381 8.23384L20.2925 18.9437L18.8783 20.358L8.16933 9.64875C6.84276 10.3669 5.1502 10.1654 4.02903 9.04421C3.04178 8.05696 2.76761 6.62665 3.20652 5.39332L5.44324 7.63C6.02903 8.21578 6.97878 8.21578 7.56456 7.63C8.15035 7.04421 8.15035 6.09446 7.56456 5.50868L5.32894 3.27158ZM15.6963 5.15512L18.8783 3.38735L20.2925 4.80157L18.5247 7.98355L16.7569 8.3371L14.6356 10.4585L13.2214 9.04421L15.3427 6.92289L15.6963 5.15512ZM8.97878 13.2869L10.393 14.7011L5.08969 20.0044C4.69917 20.3949 4.066 20.3949 3.67548 20.0044C3.31285 19.6418 3.28695 19.0699 3.59777 18.6774L3.67548 18.5902L8.97878 13.2869Z'/>"}};c$1(...Object.values(icons));c$1(...Object.values(customIcons));const isProduction=!1,eulerian=createEulerian({verbose:!isProduction,domain:"acwg.cartes.gouv.fr",isActionEnabled:"reduce",site:{environment:"development",entity:"IGN"}}),logger=dist.createLogger({enabled:!0,level:"debug",callerInfo:!0}),pinia=createPinia();createApp(_sfc_main$J).use(pinia).use(router).use(logger).use(eulerian).mount("#app");export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs$1 as g};
