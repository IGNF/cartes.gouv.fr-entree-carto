var Kp=Object.defineProperty;var Ff=Oe=>{throw TypeError(Oe)};var Zp=(Oe,e,t)=>e in Oe?Kp(Oe,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):Oe[e]=t;var Qc=(Oe,e,t)=>Zp(Oe,typeof e!="symbol"?e+"":e,t),lf=(Oe,e,t)=>e.has(Oe)||Ff("Cannot "+t);var Cd=(Oe,e,t)=>(lf(Oe,e,"read from private field"),t?t.call(Oe):e.get(Oe)),Ad=(Oe,e,t)=>e.has(Oe)?Ff("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(Oe):e.set(Oe,t),Ed=(Oe,e,t,ke)=>(lf(Oe,e,"write to private field"),ke?ke.call(Oe,t):e.set(Oe,t),t),Gc=(Oe,e,t)=>(lf(Oe,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const Ge of document.querySelectorAll('link[rel="modulepreload"]'))ke(Ge);new MutationObserver(Ge=>{for(const Be of Ge)if(Be.type==="childList")for(const je of Be.addedNodes)je.tagName==="LINK"&&je.rel==="modulepreload"&&ke(je)}).observe(document,{childList:!0,subtree:!0});function t(Ge){const Be={};return Ge.integrity&&(Be.integrity=Ge.integrity),Ge.referrerPolicy&&(Be.referrerPolicy=Ge.referrerPolicy),Ge.crossOrigin==="use-credentials"?Be.credentials="include":Ge.crossOrigin==="anonymous"?Be.credentials="omit":Be.credentials="same-origin",Be}function ke(Ge){if(Ge.ep)return;Ge.ep=!0;const Be=t(Ge);fetch(Ge.href,Be)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(Oe){const e=Object.create(null);for(const t of Oe.split(","))e[t]=1;return t=>t in e}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO=()=>!1,isOn=Oe=>Oe.charCodeAt(0)===111&&Oe.charCodeAt(1)===110&&(Oe.charCodeAt(2)>122||Oe.charCodeAt(2)<97),isModelListener=Oe=>Oe.startsWith("onUpdate:"),extend$5=Object.assign,remove=(Oe,e)=>{const t=Oe.indexOf(e);t>-1&&Oe.splice(t,1)},hasOwnProperty$1=Object.prototype.hasOwnProperty,hasOwn=(Oe,e)=>hasOwnProperty$1.call(Oe,e),isArray$1=Array.isArray,isMap=Oe=>toTypeString(Oe)==="[object Map]",isSet=Oe=>toTypeString(Oe)==="[object Set]",isDate=Oe=>toTypeString(Oe)==="[object Date]",isRegExp=Oe=>toTypeString(Oe)==="[object RegExp]",isFunction$1=Oe=>typeof Oe=="function",isString=Oe=>typeof Oe=="string",isSymbol=Oe=>typeof Oe=="symbol",isObject$1=Oe=>Oe!==null&&typeof Oe=="object",isPromise=Oe=>(isObject$1(Oe)||isFunction$1(Oe))&&isFunction$1(Oe.then)&&isFunction$1(Oe.catch),objectToString=Object.prototype.toString,toTypeString=Oe=>objectToString.call(Oe),toRawType=Oe=>toTypeString(Oe).slice(8,-1),isPlainObject$1=Oe=>toTypeString(Oe)==="[object Object]",isIntegerKey=Oe=>isString(Oe)&&Oe!=="NaN"&&Oe[0]!=="-"&&""+parseInt(Oe,10)===Oe,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=Oe=>{const e=Object.create(null);return t=>e[t]||(e[t]=Oe(t))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(Oe=>Oe.replace(camelizeRE,(e,t)=>t?t.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate=cacheStringFunction(Oe=>Oe.replace(hyphenateRE,"-$1").toLowerCase()),capitalize=cacheStringFunction(Oe=>Oe.charAt(0).toUpperCase()+Oe.slice(1)),toHandlerKey=cacheStringFunction(Oe=>Oe?`on${capitalize(Oe)}`:""),hasChanged=(Oe,e)=>!Object.is(Oe,e),invokeArrayFns=(Oe,...e)=>{for(let t=0;t<Oe.length;t++)Oe[t](...e)},def=(Oe,e,t,ke=!1)=>{Object.defineProperty(Oe,e,{configurable:!0,enumerable:!1,writable:ke,value:t})},looseToNumber=Oe=>{const e=parseFloat(Oe);return isNaN(e)?Oe:e},toNumber=Oe=>{const e=isString(Oe)?Number(Oe):NaN;return isNaN(e)?Oe:e};let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),GLOBALS_ALLOWED="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",isGloballyAllowed=makeMap(GLOBALS_ALLOWED);function normalizeStyle(Oe){if(isArray$1(Oe)){const e={};for(let t=0;t<Oe.length;t++){const ke=Oe[t],Ge=isString(ke)?parseStringStyle(ke):normalizeStyle(ke);if(Ge)for(const Be in Ge)e[Be]=Ge[Be]}return e}else if(isString(Oe)||isObject$1(Oe))return Oe}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(Oe){const e={};return Oe.replace(styleCommentRE,"").split(listDelimiterRE).forEach(t=>{if(t){const ke=t.split(propertyDelimiterRE);ke.length>1&&(e[ke[0].trim()]=ke[1].trim())}}),e}function normalizeClass(Oe){let e="";if(isString(Oe))e=Oe;else if(isArray$1(Oe))for(let t=0;t<Oe.length;t++){const ke=normalizeClass(Oe[t]);ke&&(e+=ke+" ")}else if(isObject$1(Oe))for(const t in Oe)Oe[t]&&(e+=t+" ");return e.trim()}function normalizeProps(Oe){if(!Oe)return null;let{class:e,style:t}=Oe;return e&&!isString(e)&&(Oe.class=normalizeClass(e)),t&&(Oe.style=normalizeStyle(t)),Oe}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(Oe){return!!Oe||Oe===""}function looseCompareArrays(Oe,e){if(Oe.length!==e.length)return!1;let t=!0;for(let ke=0;t&&ke<Oe.length;ke++)t=looseEqual(Oe[ke],e[ke]);return t}function looseEqual(Oe,e){if(Oe===e)return!0;let t=isDate(Oe),ke=isDate(e);if(t||ke)return t&&ke?Oe.getTime()===e.getTime():!1;if(t=isSymbol(Oe),ke=isSymbol(e),t||ke)return Oe===e;if(t=isArray$1(Oe),ke=isArray$1(e),t||ke)return t&&ke?looseCompareArrays(Oe,e):!1;if(t=isObject$1(Oe),ke=isObject$1(e),t||ke){if(!t||!ke)return!1;const Ge=Object.keys(Oe).length,Be=Object.keys(e).length;if(Ge!==Be)return!1;for(const je in Oe){const Ve=Oe.hasOwnProperty(je),Ze=e.hasOwnProperty(je);if(Ve&&!Ze||!Ve&&Ze||!looseEqual(Oe[je],e[je]))return!1}}return String(Oe)===String(e)}function looseIndexOf(Oe,e){return Oe.findIndex(t=>looseEqual(t,e))}const isRef$1=Oe=>!!(Oe&&Oe.__v_isRef===!0),toDisplayString=Oe=>isString(Oe)?Oe:Oe==null?"":isArray$1(Oe)||isObject$1(Oe)&&(Oe.toString===objectToString||!isFunction$1(Oe.toString))?isRef$1(Oe)?toDisplayString(Oe.value):JSON.stringify(Oe,replacer,2):String(Oe),replacer=(Oe,e)=>isRef$1(e)?replacer(Oe,e.value):isMap(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[ke,Ge],Be)=>(t[stringifySymbol(ke,Be)+" =>"]=Ge,t),{})}:isSet(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>stringifySymbol(t))}:isSymbol(e)?stringifySymbol(e):isObject$1(e)&&!isArray$1(e)&&!isPlainObject$1(e)?String(e):e,stringifySymbol=(Oe,e="")=>{var t;return isSymbol(Oe)?`Symbol(${(t=Oe.description)!=null?t:e})`:Oe};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!e&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=activeEffectScope;try{return activeEffectScope=this,e()}finally{activeEffectScope=t}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(e){if(this._active){this._active=!1;let t,ke;for(t=0,ke=this.effects.length;t<ke;t++)this.effects[t].stop();for(this.effects.length=0,t=0,ke=this.cleanups.length;t<ke;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,ke=this.scopes.length;t<ke;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const Ge=this.parent.scopes.pop();Ge&&Ge!==this&&(this.parent.scopes[this.index]=Ge,Ge.index=this.index)}this.parent=void 0}}}function effectScope(Oe){return new EffectScope(Oe)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(Oe,e=!1){activeEffectScope&&activeEffectScope.cleanups.push(Oe)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const e=activeSub,t=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=e,shouldTrack=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)removeSub(e);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty(this)&&this.run()}get dirty(){return isDirty(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(Oe,e=!1){if(Oe.flags|=8,e){Oe.next=batchedComputed,batchedComputed=Oe;return}Oe.next=batchedSub,batchedSub=Oe}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let e=batchedComputed;for(batchedComputed=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let Oe;for(;batchedSub;){let e=batchedSub;for(batchedSub=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(ke){Oe||(Oe=ke)}e=t}}if(Oe)throw Oe}function prepareDeps(Oe){for(let e=Oe.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function cleanupDeps(Oe){let e,t=Oe.depsTail,ke=t;for(;ke;){const Ge=ke.prevDep;ke.version===-1?(ke===t&&(t=Ge),removeSub(ke),removeDep(ke)):e=ke,ke.dep.activeLink=ke.prevActiveLink,ke.prevActiveLink=void 0,ke=Ge}Oe.deps=e,Oe.depsTail=t}function isDirty(Oe){for(let e=Oe.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(refreshComputed(e.dep.computed)||e.dep.version!==e.version))return!0;return!!Oe._dirty}function refreshComputed(Oe){if(Oe.flags&4&&!(Oe.flags&16)||(Oe.flags&=-17,Oe.globalVersion===globalVersion))return;Oe.globalVersion=globalVersion;const e=Oe.dep;if(Oe.flags|=2,e.version>0&&!Oe.isSSR&&Oe.deps&&!isDirty(Oe)){Oe.flags&=-3;return}const t=activeSub,ke=shouldTrack;activeSub=Oe,shouldTrack=!0;try{prepareDeps(Oe);const Ge=Oe.fn(Oe._value);(e.version===0||hasChanged(Ge,Oe._value))&&(Oe._value=Ge,e.version++)}catch(Ge){throw e.version++,Ge}finally{activeSub=t,shouldTrack=ke,cleanupDeps(Oe),Oe.flags&=-3}}function removeSub(Oe,e=!1){const{dep:t,prevSub:ke,nextSub:Ge}=Oe;if(ke&&(ke.nextSub=Ge,Oe.prevSub=void 0),Ge&&(Ge.prevSub=ke,Oe.nextSub=void 0),t.subs===Oe&&(t.subs=ke,!ke&&t.computed)){t.computed.flags&=-5;for(let Be=t.computed.deps;Be;Be=Be.nextDep)removeSub(Be,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function removeDep(Oe){const{prevDep:e,nextDep:t}=Oe;e&&(e.nextDep=t,Oe.prevDep=void 0),t&&(t.prevDep=e,Oe.nextDep=void 0)}function effect(Oe,e){Oe.effect instanceof ReactiveEffect&&(Oe=Oe.effect.fn);const t=new ReactiveEffect(Oe);e&&extend$5(t,e);try{t.run()}catch(Ge){throw t.stop(),Ge}const ke=t.run.bind(t);return ke.effect=t,ke}function stop(Oe){Oe.effect.stop()}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const Oe=trackStack.pop();shouldTrack=Oe===void 0?!0:Oe}function cleanupEffect(Oe){const{cleanup:e}=Oe;if(Oe.cleanup=void 0,e){const t=activeSub;activeSub=void 0;try{e()}finally{activeSub=t}}}let globalVersion=0;class Link{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Dep{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==activeSub)t=this.activeLink=new Link(activeSub,this),activeSub.deps?(t.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=t,activeSub.depsTail=t):activeSub.deps=activeSub.depsTail=t,addSub(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const ke=t.nextDep;ke.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=ke),t.prevDep=activeSub.depsTail,t.nextDep=void 0,activeSub.depsTail.nextDep=t,activeSub.depsTail=t,activeSub.deps===t&&(activeSub.deps=ke)}return t}trigger(e){this.version++,globalVersion++,this.notify(e)}notify(e){startBatch();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{endBatch()}}}function addSub(Oe){if(Oe.dep.sc++,Oe.sub.flags&4){const e=Oe.dep.computed;if(e&&!Oe.dep.subs){e.flags|=20;for(let ke=e.deps;ke;ke=ke.nextDep)addSub(ke)}const t=Oe.dep.subs;t!==Oe&&(Oe.prevSub=t,t&&(t.nextSub=Oe)),Oe.dep.subs=Oe}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(Oe,e,t){if(shouldTrack&&activeSub){let ke=targetMap.get(Oe);ke||targetMap.set(Oe,ke=new Map);let Ge=ke.get(t);Ge||(ke.set(t,Ge=new Dep),Ge.map=ke,Ge.key=t),Ge.track()}}function trigger(Oe,e,t,ke,Ge,Be){const je=targetMap.get(Oe);if(!je){globalVersion++;return}const Ve=Ze=>{Ze&&Ze.trigger()};if(startBatch(),e==="clear")je.forEach(Ve);else{const Ze=isArray$1(Oe),Qe=Ze&&isIntegerKey(t);if(Ze&&t==="length"){const en=Number(ke);je.forEach((tn,an)=>{(an==="length"||an===ARRAY_ITERATE_KEY||!isSymbol(an)&&an>=en)&&Ve(tn)})}else switch((t!==void 0||je.has(void 0))&&Ve(je.get(t)),Qe&&Ve(je.get(ARRAY_ITERATE_KEY)),e){case"add":Ze?Qe&&Ve(je.get("length")):(Ve(je.get(ITERATE_KEY)),isMap(Oe)&&Ve(je.get(MAP_KEY_ITERATE_KEY)));break;case"delete":Ze||(Ve(je.get(ITERATE_KEY)),isMap(Oe)&&Ve(je.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(Oe)&&Ve(je.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(Oe,e){const t=targetMap.get(Oe);return t&&t.get(e)}function reactiveReadArray(Oe){const e=toRaw(Oe);return e===Oe?e:(track(e,"iterate",ARRAY_ITERATE_KEY),isShallow(Oe)?e:e.map(toReactive))}function shallowReadArray(Oe){return track(Oe=toRaw(Oe),"iterate",ARRAY_ITERATE_KEY),Oe}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...Oe){return reactiveReadArray(this).concat(...Oe.map(e=>isArray$1(e)?reactiveReadArray(e):e))},entries(){return iterator(this,"entries",Oe=>(Oe[1]=toReactive(Oe[1]),Oe))},every(Oe,e){return apply$1(this,"every",Oe,e,void 0,arguments)},filter(Oe,e){return apply$1(this,"filter",Oe,e,t=>t.map(toReactive),arguments)},find(Oe,e){return apply$1(this,"find",Oe,e,toReactive,arguments)},findIndex(Oe,e){return apply$1(this,"findIndex",Oe,e,void 0,arguments)},findLast(Oe,e){return apply$1(this,"findLast",Oe,e,toReactive,arguments)},findLastIndex(Oe,e){return apply$1(this,"findLastIndex",Oe,e,void 0,arguments)},forEach(Oe,e){return apply$1(this,"forEach",Oe,e,void 0,arguments)},includes(...Oe){return searchProxy(this,"includes",Oe)},indexOf(...Oe){return searchProxy(this,"indexOf",Oe)},join(Oe){return reactiveReadArray(this).join(Oe)},lastIndexOf(...Oe){return searchProxy(this,"lastIndexOf",Oe)},map(Oe,e){return apply$1(this,"map",Oe,e,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...Oe){return noTracking(this,"push",Oe)},reduce(Oe,...e){return reduce(this,"reduce",Oe,e)},reduceRight(Oe,...e){return reduce(this,"reduceRight",Oe,e)},shift(){return noTracking(this,"shift")},some(Oe,e){return apply$1(this,"some",Oe,e,void 0,arguments)},splice(...Oe){return noTracking(this,"splice",Oe)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(Oe){return reactiveReadArray(this).toSorted(Oe)},toSpliced(...Oe){return reactiveReadArray(this).toSpliced(...Oe)},unshift(...Oe){return noTracking(this,"unshift",Oe)},values(){return iterator(this,"values",toReactive)}};function iterator(Oe,e,t){const ke=shallowReadArray(Oe),Ge=ke[e]();return ke!==Oe&&!isShallow(Oe)&&(Ge._next=Ge.next,Ge.next=()=>{const Be=Ge._next();return Be.value&&(Be.value=t(Be.value)),Be}),Ge}const arrayProto=Array.prototype;function apply$1(Oe,e,t,ke,Ge,Be){const je=shallowReadArray(Oe),Ve=je!==Oe&&!isShallow(Oe),Ze=je[e];if(Ze!==arrayProto[e]){const tn=Ze.apply(Oe,Be);return Ve?toReactive(tn):tn}let Qe=t;je!==Oe&&(Ve?Qe=function(tn,an){return t.call(this,toReactive(tn),an,Oe)}:t.length>2&&(Qe=function(tn,an){return t.call(this,tn,an,Oe)}));const en=Ze.call(je,Qe,ke);return Ve&&Ge?Ge(en):en}function reduce(Oe,e,t,ke){const Ge=shallowReadArray(Oe);let Be=t;return Ge!==Oe&&(isShallow(Oe)?t.length>3&&(Be=function(je,Ve,Ze){return t.call(this,je,Ve,Ze,Oe)}):Be=function(je,Ve,Ze){return t.call(this,je,toReactive(Ve),Ze,Oe)}),Ge[e](Be,...ke)}function searchProxy(Oe,e,t){const ke=toRaw(Oe);track(ke,"iterate",ARRAY_ITERATE_KEY);const Ge=ke[e](...t);return(Ge===-1||Ge===!1)&&isProxy(t[0])?(t[0]=toRaw(t[0]),ke[e](...t)):Ge}function noTracking(Oe,e,t=[]){pauseTracking(),startBatch();const ke=toRaw(Oe)[e].apply(Oe,t);return endBatch(),resetTracking(),ke}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(Oe=>Oe!=="arguments"&&Oe!=="caller").map(Oe=>Symbol[Oe]).filter(isSymbol));function hasOwnProperty(Oe){isSymbol(Oe)||(Oe=String(Oe));const e=toRaw(this);return track(e,"has",Oe),e.hasOwnProperty(Oe)}class BaseReactiveHandler{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,ke){if(t==="__v_skip")return e.__v_skip;const Ge=this._isReadonly,Be=this._isShallow;if(t==="__v_isReactive")return!Ge;if(t==="__v_isReadonly")return Ge;if(t==="__v_isShallow")return Be;if(t==="__v_raw")return ke===(Ge?Be?shallowReadonlyMap:readonlyMap:Be?shallowReactiveMap:reactiveMap).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(ke)?e:void 0;const je=isArray$1(e);if(!Ge){let Ze;if(je&&(Ze=arrayInstrumentations[t]))return Ze;if(t==="hasOwnProperty")return hasOwnProperty}const Ve=Reflect.get(e,t,isRef(e)?e:ke);return(isSymbol(t)?builtInSymbols.has(t):isNonTrackableKeys(t))||(Ge||track(e,"get",t),Be)?Ve:isRef(Ve)?je&&isIntegerKey(t)?Ve:Ve.value:isObject$1(Ve)?Ge?readonly(Ve):reactive(Ve):Ve}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!1,e)}set(e,t,ke,Ge){let Be=e[t];if(!this._isShallow){const Ze=isReadonly(Be);if(!isShallow(ke)&&!isReadonly(ke)&&(Be=toRaw(Be),ke=toRaw(ke)),!isArray$1(e)&&isRef(Be)&&!isRef(ke))return Ze?!1:(Be.value=ke,!0)}const je=isArray$1(e)&&isIntegerKey(t)?Number(t)<e.length:hasOwn(e,t),Ve=Reflect.set(e,t,ke,isRef(e)?e:Ge);return e===toRaw(Ge)&&(je?hasChanged(ke,Be)&&trigger(e,"set",t,ke):trigger(e,"add",t,ke)),Ve}deleteProperty(e,t){const ke=hasOwn(e,t);e[t];const Ge=Reflect.deleteProperty(e,t);return Ge&&ke&&trigger(e,"delete",t,void 0),Ge}has(e,t){const ke=Reflect.has(e,t);return(!isSymbol(t)||!builtInSymbols.has(t))&&track(e,"has",t),ke}ownKeys(e){return track(e,"iterate",isArray$1(e)?"length":ITERATE_KEY),Reflect.ownKeys(e)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=Oe=>Oe,getProto=Oe=>Reflect.getPrototypeOf(Oe);function createIterableMethod(Oe,e,t){return function(...ke){const Ge=this.__v_raw,Be=toRaw(Ge),je=isMap(Be),Ve=Oe==="entries"||Oe===Symbol.iterator&&je,Ze=Oe==="keys"&&je,Qe=Ge[Oe](...ke),en=t?toShallow:e?toReadonly:toReactive;return!e&&track(Be,"iterate",Ze?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:tn,done:an}=Qe.next();return an?{value:tn,done:an}:{value:Ve?[en(tn[0]),en(tn[1])]:en(tn),done:an}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(Oe){return function(...e){return Oe==="delete"?!1:Oe==="clear"?void 0:this}}function createInstrumentations(Oe,e){const t={get(Ge){const Be=this.__v_raw,je=toRaw(Be),Ve=toRaw(Ge);Oe||(hasChanged(Ge,Ve)&&track(je,"get",Ge),track(je,"get",Ve));const{has:Ze}=getProto(je),Qe=e?toShallow:Oe?toReadonly:toReactive;if(Ze.call(je,Ge))return Qe(Be.get(Ge));if(Ze.call(je,Ve))return Qe(Be.get(Ve));Be!==je&&Be.get(Ge)},get size(){const Ge=this.__v_raw;return!Oe&&track(toRaw(Ge),"iterate",ITERATE_KEY),Reflect.get(Ge,"size",Ge)},has(Ge){const Be=this.__v_raw,je=toRaw(Be),Ve=toRaw(Ge);return Oe||(hasChanged(Ge,Ve)&&track(je,"has",Ge),track(je,"has",Ve)),Ge===Ve?Be.has(Ge):Be.has(Ge)||Be.has(Ve)},forEach(Ge,Be){const je=this,Ve=je.__v_raw,Ze=toRaw(Ve),Qe=e?toShallow:Oe?toReadonly:toReactive;return!Oe&&track(Ze,"iterate",ITERATE_KEY),Ve.forEach((en,tn)=>Ge.call(Be,Qe(en),Qe(tn),je))}};return extend$5(t,Oe?{add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear")}:{add(Ge){!e&&!isShallow(Ge)&&!isReadonly(Ge)&&(Ge=toRaw(Ge));const Be=toRaw(this);return getProto(Be).has.call(Be,Ge)||(Be.add(Ge),trigger(Be,"add",Ge,Ge)),this},set(Ge,Be){!e&&!isShallow(Be)&&!isReadonly(Be)&&(Be=toRaw(Be));const je=toRaw(this),{has:Ve,get:Ze}=getProto(je);let Qe=Ve.call(je,Ge);Qe||(Ge=toRaw(Ge),Qe=Ve.call(je,Ge));const en=Ze.call(je,Ge);return je.set(Ge,Be),Qe?hasChanged(Be,en)&&trigger(je,"set",Ge,Be):trigger(je,"add",Ge,Be),this},delete(Ge){const Be=toRaw(this),{has:je,get:Ve}=getProto(Be);let Ze=je.call(Be,Ge);Ze||(Ge=toRaw(Ge),Ze=je.call(Be,Ge)),Ve&&Ve.call(Be,Ge);const Qe=Be.delete(Ge);return Ze&&trigger(Be,"delete",Ge,void 0),Qe},clear(){const Ge=toRaw(this),Be=Ge.size!==0,je=Ge.clear();return Be&&trigger(Ge,"clear",void 0,void 0),je}}),["keys","values","entries",Symbol.iterator].forEach(Ge=>{t[Ge]=createIterableMethod(Ge,Oe,e)}),t}function createInstrumentationGetter(Oe,e){const t=createInstrumentations(Oe,e);return(ke,Ge,Be)=>Ge==="__v_isReactive"?!Oe:Ge==="__v_isReadonly"?Oe:Ge==="__v_raw"?ke:Reflect.get(hasOwn(t,Ge)&&Ge in ke?t:ke,Ge,Be)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(Oe){switch(Oe){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(Oe){return Oe.__v_skip||!Object.isExtensible(Oe)?0:targetTypeMap(toRawType(Oe))}function reactive(Oe){return isReadonly(Oe)?Oe:createReactiveObject(Oe,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(Oe){return createReactiveObject(Oe,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(Oe){return createReactiveObject(Oe,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(Oe){return createReactiveObject(Oe,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(Oe,e,t,ke,Ge){if(!isObject$1(Oe)||Oe.__v_raw&&!(e&&Oe.__v_isReactive))return Oe;const Be=Ge.get(Oe);if(Be)return Be;const je=getTargetType(Oe);if(je===0)return Oe;const Ve=new Proxy(Oe,je===2?ke:t);return Ge.set(Oe,Ve),Ve}function isReactive(Oe){return isReadonly(Oe)?isReactive(Oe.__v_raw):!!(Oe&&Oe.__v_isReactive)}function isReadonly(Oe){return!!(Oe&&Oe.__v_isReadonly)}function isShallow(Oe){return!!(Oe&&Oe.__v_isShallow)}function isProxy(Oe){return Oe?!!Oe.__v_raw:!1}function toRaw(Oe){const e=Oe&&Oe.__v_raw;return e?toRaw(e):Oe}function markRaw(Oe){return!hasOwn(Oe,"__v_skip")&&Object.isExtensible(Oe)&&def(Oe,"__v_skip",!0),Oe}const toReactive=Oe=>isObject$1(Oe)?reactive(Oe):Oe,toReadonly=Oe=>isObject$1(Oe)?readonly(Oe):Oe;function isRef(Oe){return Oe?Oe.__v_isRef===!0:!1}function ref(Oe){return createRef(Oe,!1)}function shallowRef(Oe){return createRef(Oe,!0)}function createRef(Oe,e){return isRef(Oe)?Oe:new RefImpl(Oe,e)}class RefImpl{constructor(e,t){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:toRaw(e),this._value=t?e:toReactive(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,ke=this.__v_isShallow||isShallow(e)||isReadonly(e);e=ke?e:toRaw(e),hasChanged(e,t)&&(this._rawValue=e,this._value=ke?e:toReactive(e),this.dep.trigger())}}function triggerRef(Oe){Oe.dep&&Oe.dep.trigger()}function unref(Oe){return isRef(Oe)?Oe.value:Oe}function toValue$1(Oe){return isFunction$1(Oe)?Oe():unref(Oe)}const shallowUnwrapHandlers={get:(Oe,e,t)=>e==="__v_raw"?Oe:unref(Reflect.get(Oe,e,t)),set:(Oe,e,t,ke)=>{const Ge=Oe[e];return isRef(Ge)&&!isRef(t)?(Ge.value=t,!0):Reflect.set(Oe,e,t,ke)}};function proxyRefs(Oe){return isReactive(Oe)?Oe:new Proxy(Oe,shallowUnwrapHandlers)}class CustomRefImpl{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Dep,{get:ke,set:Ge}=e(t.track.bind(t),t.trigger.bind(t));this._get=ke,this._set=Ge}get value(){return this._value=this._get()}set value(e){this._set(e)}}function customRef(Oe){return new CustomRefImpl(Oe)}function toRefs(Oe){const e=isArray$1(Oe)?new Array(Oe.length):{};for(const t in Oe)e[t]=propertyToRef(Oe,t);return e}class ObjectRefImpl{constructor(e,t,ke){this._object=e,this._key=t,this._defaultValue=ke,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}class GetterRefImpl{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function toRef(Oe,e,t){return isRef(Oe)?Oe:isFunction$1(Oe)?new GetterRefImpl(Oe):isObject$1(Oe)&&arguments.length>1?propertyToRef(Oe,e,t):ref(Oe)}function propertyToRef(Oe,e,t){const ke=Oe[e];return isRef(ke)?ke:new ObjectRefImpl(Oe,e,t)}class ComputedRefImpl{constructor(e,t,ke){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=ke}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const e=this.dep.track();return refreshComputed(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function computed$1(Oe,e,t=!1){let ke,Ge;return isFunction$1(Oe)?ke=Oe:(ke=Oe.get,Ge=Oe.set),new ComputedRefImpl(ke,Ge,t)}const TrackOpTypes={GET:"get",HAS:"has",ITERATE:"iterate"},TriggerOpTypes={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function getCurrentWatcher(){return activeWatcher}function onWatcherCleanup(Oe,e=!1,t=activeWatcher){if(t){let ke=cleanupMap.get(t);ke||cleanupMap.set(t,ke=[]),ke.push(Oe)}}function watch$1(Oe,e,t=EMPTY_OBJ){const{immediate:ke,deep:Ge,once:Be,scheduler:je,augmentJob:Ve,call:Ze}=t,Qe=vn=>Ge?vn:isShallow(vn)||Ge===!1||Ge===0?traverse(vn,1):traverse(vn);let en,tn,an,cn,un=!1,dn=!1;if(isRef(Oe)?(tn=()=>Oe.value,un=isShallow(Oe)):isReactive(Oe)?(tn=()=>Qe(Oe),un=!0):isArray$1(Oe)?(dn=!0,un=Oe.some(vn=>isReactive(vn)||isShallow(vn)),tn=()=>Oe.map(vn=>{if(isRef(vn))return vn.value;if(isReactive(vn))return Qe(vn);if(isFunction$1(vn))return Ze?Ze(vn,2):vn()})):isFunction$1(Oe)?e?tn=Ze?()=>Ze(Oe,2):Oe:tn=()=>{if(an){pauseTracking();try{an()}finally{resetTracking()}}const vn=activeWatcher;activeWatcher=en;try{return Ze?Ze(Oe,3,[cn]):Oe(cn)}finally{activeWatcher=vn}}:tn=NOOP,e&&Ge){const vn=tn,An=Ge===!0?1/0:Ge;tn=()=>traverse(vn(),An)}const fn=getCurrentScope(),pn=()=>{en.stop(),fn&&fn.active&&remove(fn.effects,en)};if(Be&&e){const vn=e;e=(...An)=>{vn(...An),pn()}}let gn=dn?new Array(Oe.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const yn=vn=>{if(!(!(en.flags&1)||!en.dirty&&!vn))if(e){const An=en.run();if(Ge||un||(dn?An.some((xn,wn)=>hasChanged(xn,gn[wn])):hasChanged(An,gn))){an&&an();const xn=activeWatcher;activeWatcher=en;try{const wn=[An,gn===INITIAL_WATCHER_VALUE?void 0:dn&&gn[0]===INITIAL_WATCHER_VALUE?[]:gn,cn];Ze?Ze(e,3,wn):e(...wn),gn=An}finally{activeWatcher=xn}}}else en.run()};return Ve&&Ve(yn),en=new ReactiveEffect(tn),en.scheduler=je?()=>je(yn,!1):yn,cn=vn=>onWatcherCleanup(vn,!1,en),an=en.onStop=()=>{const vn=cleanupMap.get(en);if(vn){if(Ze)Ze(vn,4);else for(const An of vn)An();cleanupMap.delete(en)}},e?ke?yn(!0):gn=en.run():je?je(yn.bind(null,!0),!0):en.run(),pn.pause=en.pause.bind(en),pn.resume=en.resume.bind(en),pn.stop=pn,pn}function traverse(Oe,e=1/0,t){if(e<=0||!isObject$1(Oe)||Oe.__v_skip||(t=t||new Set,t.has(Oe)))return Oe;if(t.add(Oe),e--,isRef(Oe))traverse(Oe.value,e,t);else if(isArray$1(Oe))for(let ke=0;ke<Oe.length;ke++)traverse(Oe[ke],e,t);else if(isSet(Oe)||isMap(Oe))Oe.forEach(ke=>{traverse(ke,e,t)});else if(isPlainObject$1(Oe)){for(const ke in Oe)traverse(Oe[ke],e,t);for(const ke of Object.getOwnPropertySymbols(Oe))Object.prototype.propertyIsEnumerable.call(Oe,ke)&&traverse(Oe[ke],e,t)}return Oe}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];function pushWarningContext(Oe){stack.push(Oe)}function popWarningContext(){stack.pop()}let isWarning=!1;function warn$1(Oe,...e){if(isWarning)return;isWarning=!0,pauseTracking();const t=stack.length?stack[stack.length-1].component:null,ke=t&&t.appContext.config.warnHandler,Ge=getComponentTrace();if(ke)callWithErrorHandling(ke,t,11,[Oe+e.map(Be=>{var je,Ve;return(Ve=(je=Be.toString)==null?void 0:je.call(Be))!=null?Ve:JSON.stringify(Be)}).join(""),t&&t.proxy,Ge.map(({vnode:Be})=>`at <${formatComponentName(t,Be.type)}>`).join(`
`),Ge]);else{const Be=[`[Vue warn]: ${Oe}`,...e];Ge.length&&Be.push(`
`,...formatTrace(Ge)),console.warn(...Be)}resetTracking(),isWarning=!1}function getComponentTrace(){let Oe=stack[stack.length-1];if(!Oe)return[];const e=[];for(;Oe;){const t=e[0];t&&t.vnode===Oe?t.recurseCount++:e.push({vnode:Oe,recurseCount:0});const ke=Oe.component&&Oe.component.parent;Oe=ke&&ke.vnode}return e}function formatTrace(Oe){const e=[];return Oe.forEach((t,ke)=>{e.push(...ke===0?[]:[`
`],...formatTraceEntry(t))}),e}function formatTraceEntry({vnode:Oe,recurseCount:e}){const t=e>0?`... (${e} recursive calls)`:"",ke=Oe.component?Oe.component.parent==null:!1,Ge=` at <${formatComponentName(Oe.component,Oe.type,ke)}`,Be=">"+t;return Oe.props?[Ge,...formatProps(Oe.props),Be]:[Ge+Be]}function formatProps(Oe){const e=[],t=Object.keys(Oe);return t.slice(0,3).forEach(ke=>{e.push(...formatProp(ke,Oe[ke]))}),t.length>3&&e.push(" ..."),e}function formatProp(Oe,e,t){return isString(e)?(e=JSON.stringify(e),t?e:[`${Oe}=${e}`]):typeof e=="number"||typeof e=="boolean"||e==null?t?e:[`${Oe}=${e}`]:isRef(e)?(e=formatProp(Oe,toRaw(e.value),!0),t?e:[`${Oe}=Ref<`,e,">"]):isFunction$1(e)?[`${Oe}=fn${e.name?`<${e.name}>`:""}`]:(e=toRaw(e),t?e:[`${Oe}=`,e])}function assertNumber(Oe,e){}const ErrorCodes={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},ErrorTypeStrings$1={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function callWithErrorHandling(Oe,e,t,ke){try{return ke?Oe(...ke):Oe()}catch(Ge){handleError(Ge,e,t)}}function callWithAsyncErrorHandling(Oe,e,t,ke){if(isFunction$1(Oe)){const Ge=callWithErrorHandling(Oe,e,t,ke);return Ge&&isPromise(Ge)&&Ge.catch(Be=>{handleError(Be,e,t)}),Ge}if(isArray$1(Oe)){const Ge=[];for(let Be=0;Be<Oe.length;Be++)Ge.push(callWithAsyncErrorHandling(Oe[Be],e,t,ke));return Ge}}function handleError(Oe,e,t,ke=!0){const Ge=e?e.vnode:null,{errorHandler:Be,throwUnhandledErrorInProduction:je}=e&&e.appContext.config||EMPTY_OBJ;if(e){let Ve=e.parent;const Ze=e.proxy,Qe=`https://vuejs.org/error-reference/#runtime-${t}`;for(;Ve;){const en=Ve.ec;if(en){for(let tn=0;tn<en.length;tn++)if(en[tn](Oe,Ze,Qe)===!1)return}Ve=Ve.parent}if(Be){pauseTracking(),callWithErrorHandling(Be,null,10,[Oe,Ze,Qe]),resetTracking();return}}logError(Oe,t,Ge,ke,je)}function logError(Oe,e,t,ke=!0,Ge=!1){if(Ge)throw Oe;console.error(Oe)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(Oe){const e=currentFlushPromise||resolvedPromise;return Oe?e.then(this?Oe.bind(this):Oe):e}function findInsertionIndex$1(Oe){let e=flushIndex+1,t=queue.length;for(;e<t;){const ke=e+t>>>1,Ge=queue[ke],Be=getId(Ge);Be<Oe||Be===Oe&&Ge.flags&2?e=ke+1:t=ke}return e}function queueJob(Oe){if(!(Oe.flags&1)){const e=getId(Oe),t=queue[queue.length-1];!t||!(Oe.flags&2)&&e>=getId(t)?queue.push(Oe):queue.splice(findInsertionIndex$1(e),0,Oe),Oe.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(Oe){isArray$1(Oe)?pendingPostFlushCbs.push(...Oe):activePostFlushCbs&&Oe.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,Oe):Oe.flags&1||(pendingPostFlushCbs.push(Oe),Oe.flags|=1),queueFlush()}function flushPreFlushCbs(Oe,e,t=flushIndex+1){for(;t<queue.length;t++){const ke=queue[t];if(ke&&ke.flags&2){if(Oe&&ke.id!==Oe.uid)continue;queue.splice(t,1),t--,ke.flags&4&&(ke.flags&=-2),ke(),ke.flags&4||(ke.flags&=-2)}}}function flushPostFlushCbs(Oe){if(pendingPostFlushCbs.length){const e=[...new Set(pendingPostFlushCbs)].sort((t,ke)=>getId(t)-getId(ke));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...e);return}for(activePostFlushCbs=e,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const t=activePostFlushCbs[postFlushIndex];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=Oe=>Oe.id==null?Oe.flags&2?-1:1/0:Oe.id;function flushJobs(Oe){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),callWithErrorHandling(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const e=queue[flushIndex];e&&(e.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let devtools$1,buffer$1=[];function setDevtoolsHook$1(Oe,e){var t,ke;devtools$1=Oe,devtools$1?(devtools$1.enabled=!0,buffer$1.forEach(({event:Ge,args:Be})=>devtools$1.emit(Ge,...Be)),buffer$1=[]):typeof window<"u"&&window.HTMLElement&&!((ke=(t=window.navigator)==null?void 0:t.userAgent)!=null&&ke.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(Be=>{setDevtoolsHook$1(Be,e)}),setTimeout(()=>{devtools$1||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,buffer$1=[])},3e3)):buffer$1=[]}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(Oe){const e=currentRenderingInstance;return currentRenderingInstance=Oe,currentScopeId=Oe&&Oe.type.__scopeId||null,e}function pushScopeId(Oe){currentScopeId=Oe}function popScopeId(){currentScopeId=null}const withScopeId=Oe=>withCtx;function withCtx(Oe,e=currentRenderingInstance,t){if(!e||Oe._n)return Oe;const ke=(...Ge)=>{ke._d&&setBlockTracking(-1);const Be=setCurrentRenderingInstance(e);let je;try{je=Oe(...Ge)}finally{setCurrentRenderingInstance(Be),ke._d&&setBlockTracking(1)}return je};return ke._n=!0,ke._c=!0,ke._d=!0,ke}function withDirectives(Oe,e){if(currentRenderingInstance===null)return Oe;const t=getComponentPublicInstance(currentRenderingInstance),ke=Oe.dirs||(Oe.dirs=[]);for(let Ge=0;Ge<e.length;Ge++){let[Be,je,Ve,Ze=EMPTY_OBJ]=e[Ge];Be&&(isFunction$1(Be)&&(Be={mounted:Be,updated:Be}),Be.deep&&traverse(je),ke.push({dir:Be,instance:t,value:je,oldValue:void 0,arg:Ve,modifiers:Ze}))}return Oe}function invokeDirectiveHook(Oe,e,t,ke){const Ge=Oe.dirs,Be=e&&e.dirs;for(let je=0;je<Ge.length;je++){const Ve=Ge[je];Be&&(Ve.oldValue=Be[je].value);let Ze=Ve.dir[ke];Ze&&(pauseTracking(),callWithAsyncErrorHandling(Ze,t,8,[Oe.el,Ve,Oe,e]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=Oe=>Oe.__isTeleport,isTeleportDisabled=Oe=>Oe&&(Oe.disabled||Oe.disabled===""),isTeleportDeferred=Oe=>Oe&&(Oe.defer||Oe.defer===""),isTargetSVG=Oe=>typeof SVGElement<"u"&&Oe instanceof SVGElement,isTargetMathML=Oe=>typeof MathMLElement=="function"&&Oe instanceof MathMLElement,resolveTarget=(Oe,e)=>{const t=Oe&&Oe.to;return isString(t)?e?e(t):null:t},TeleportImpl={name:"Teleport",__isTeleport:!0,process(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe){const{mc:en,pc:tn,pbc:an,o:{insert:cn,querySelector:un,createText:dn,createComment:fn}}=Qe,pn=isTeleportDisabled(e.props);let{shapeFlag:gn,children:yn,dynamicChildren:vn}=e;if(Oe==null){const An=e.el=dn(""),xn=e.anchor=dn("");cn(An,t,ke),cn(xn,t,ke);const wn=(Mn,Pn)=>{gn&16&&(Ge&&Ge.isCE&&(Ge.ce._teleportTarget=Mn),en(yn,Mn,Pn,Ge,Be,je,Ve,Ze))},bn=()=>{const Mn=e.target=resolveTarget(e.props,un),Pn=prepareAnchor(Mn,e,dn,cn);Mn&&(je!=="svg"&&isTargetSVG(Mn)?je="svg":je!=="mathml"&&isTargetMathML(Mn)&&(je="mathml"),pn||(wn(Mn,Pn),updateCssVars(e,!1)))};pn&&(wn(t,xn),updateCssVars(e,!0)),isTeleportDeferred(e.props)?queuePostRenderEffect(()=>{bn(),e.el.__isMounted=!0},Be):bn()}else{if(isTeleportDeferred(e.props)&&!Oe.el.__isMounted){queuePostRenderEffect(()=>{TeleportImpl.process(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe),delete Oe.el.__isMounted},Be);return}e.el=Oe.el,e.targetStart=Oe.targetStart;const An=e.anchor=Oe.anchor,xn=e.target=Oe.target,wn=e.targetAnchor=Oe.targetAnchor,bn=isTeleportDisabled(Oe.props),Mn=bn?t:xn,Pn=bn?An:wn;if(je==="svg"||isTargetSVG(xn)?je="svg":(je==="mathml"||isTargetMathML(xn))&&(je="mathml"),vn?(an(Oe.dynamicChildren,vn,Mn,Ge,Be,je,Ve),traverseStaticChildren(Oe,e,!0)):Ze||tn(Oe,e,Mn,Pn,Ge,Be,je,Ve,!1),pn)bn?e.props&&Oe.props&&e.props.to!==Oe.props.to&&(e.props.to=Oe.props.to):moveTeleport(e,t,An,Qe,1);else if((e.props&&e.props.to)!==(Oe.props&&Oe.props.to)){const En=e.target=resolveTarget(e.props,un);En&&moveTeleport(e,En,null,Qe,0)}else bn&&moveTeleport(e,xn,wn,Qe,1);updateCssVars(e,pn)}},remove(Oe,e,t,{um:ke,o:{remove:Ge}},Be){const{shapeFlag:je,children:Ve,anchor:Ze,targetStart:Qe,targetAnchor:en,target:tn,props:an}=Oe;if(tn&&(Ge(Qe),Ge(en)),Be&&Ge(Ze),je&16){const cn=Be||!isTeleportDisabled(an);for(let un=0;un<Ve.length;un++){const dn=Ve[un];ke(dn,e,t,cn,!!dn.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(Oe,e,t,{o:{insert:ke},m:Ge},Be=2){Be===0&&ke(Oe.targetAnchor,e,t);const{el:je,anchor:Ve,shapeFlag:Ze,children:Qe,props:en}=Oe,tn=Be===2;if(tn&&ke(je,e,t),(!tn||isTeleportDisabled(en))&&Ze&16)for(let an=0;an<Qe.length;an++)Ge(Qe[an],e,t,2);tn&&ke(Ve,e,t)}function hydrateTeleport(Oe,e,t,ke,Ge,Be,{o:{nextSibling:je,parentNode:Ve,querySelector:Ze,insert:Qe,createText:en}},tn){const an=e.target=resolveTarget(e.props,Ze);if(an){const cn=isTeleportDisabled(e.props),un=an._lpa||an.firstChild;if(e.shapeFlag&16)if(cn)e.anchor=tn(je(Oe),e,Ve(Oe),t,ke,Ge,Be),e.targetStart=un,e.targetAnchor=un&&je(un);else{e.anchor=je(Oe);let dn=un;for(;dn;){if(dn&&dn.nodeType===8){if(dn.data==="teleport start anchor")e.targetStart=dn;else if(dn.data==="teleport anchor"){e.targetAnchor=dn,an._lpa=e.targetAnchor&&je(e.targetAnchor);break}}dn=je(dn)}e.targetAnchor||prepareAnchor(an,e,en,Qe),tn(un&&je(un),e,an,t,ke,Ge,Be)}updateCssVars(e,cn)}return e.anchor&&je(e.anchor)}const Teleport=TeleportImpl;function updateCssVars(Oe,e){const t=Oe.ctx;if(t&&t.ut){let ke,Ge;for(e?(ke=Oe.el,Ge=Oe.anchor):(ke=Oe.targetStart,Ge=Oe.targetAnchor);ke&&ke!==Ge;)ke.nodeType===1&&ke.setAttribute("data-v-owner",t.uid),ke=ke.nextSibling;t.ut()}}function prepareAnchor(Oe,e,t,ke){const Ge=e.targetStart=t(""),Be=e.targetAnchor=t("");return Ge[TeleportEndKey]=Be,Oe&&(ke(Ge,Oe),ke(Be,Oe)),Be}const leaveCbKey=Symbol("_leaveCb"),enterCbKey$1=Symbol("_enterCb");function useTransitionState(){const Oe={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{Oe.isMounted=!0}),onBeforeUnmount(()=>{Oe.isUnmounting=!0}),Oe}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=Oe=>{const e=Oe.subTree;return e.component?recursiveGetSubtree(e.component):e},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(Oe,{slots:e}){const t=getCurrentInstance(),ke=useTransitionState();return()=>{const Ge=e.default&&getTransitionRawChildren(e.default(),!0);if(!Ge||!Ge.length)return;const Be=findNonCommentChild(Ge),je=toRaw(Oe),{mode:Ve}=je;if(ke.isLeaving)return emptyPlaceholder(Be);const Ze=getInnerChild$1(Be);if(!Ze)return emptyPlaceholder(Be);let Qe=resolveTransitionHooks(Ze,je,ke,t,tn=>Qe=tn);Ze.type!==Comment&&setTransitionHooks(Ze,Qe);let en=t.subTree&&getInnerChild$1(t.subTree);if(en&&en.type!==Comment&&!isSameVNodeType(Ze,en)&&recursiveGetSubtree(t).type!==Comment){let tn=resolveTransitionHooks(en,je,ke,t);if(setTransitionHooks(en,tn),Ve==="out-in"&&Ze.type!==Comment)return ke.isLeaving=!0,tn.afterLeave=()=>{ke.isLeaving=!1,t.job.flags&8||t.update(),delete tn.afterLeave,en=void 0},emptyPlaceholder(Be);Ve==="in-out"&&Ze.type!==Comment?tn.delayLeave=(an,cn,un)=>{const dn=getLeavingNodesForType(ke,en);dn[String(en.key)]=en,an[leaveCbKey]=()=>{cn(),an[leaveCbKey]=void 0,delete Qe.delayedLeave,en=void 0},Qe.delayedLeave=()=>{un(),delete Qe.delayedLeave,en=void 0}}:en=void 0}else en&&(en=void 0);return Be}}};function findNonCommentChild(Oe){let e=Oe[0];if(Oe.length>1){for(const t of Oe)if(t.type!==Comment){e=t;break}}return e}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(Oe,e){const{leavingVNodes:t}=Oe;let ke=t.get(e.type);return ke||(ke=Object.create(null),t.set(e.type,ke)),ke}function resolveTransitionHooks(Oe,e,t,ke,Ge){const{appear:Be,mode:je,persisted:Ve=!1,onBeforeEnter:Ze,onEnter:Qe,onAfterEnter:en,onEnterCancelled:tn,onBeforeLeave:an,onLeave:cn,onAfterLeave:un,onLeaveCancelled:dn,onBeforeAppear:fn,onAppear:pn,onAfterAppear:gn,onAppearCancelled:yn}=e,vn=String(Oe.key),An=getLeavingNodesForType(t,Oe),xn=(Mn,Pn)=>{Mn&&callWithAsyncErrorHandling(Mn,ke,9,Pn)},wn=(Mn,Pn)=>{const En=Pn[1];xn(Mn,Pn),isArray$1(Mn)?Mn.every(Cn=>Cn.length<=1)&&En():Mn.length<=1&&En()},bn={mode:je,persisted:Ve,beforeEnter(Mn){let Pn=Ze;if(!t.isMounted)if(Be)Pn=fn||Ze;else return;Mn[leaveCbKey]&&Mn[leaveCbKey](!0);const En=An[vn];En&&isSameVNodeType(Oe,En)&&En.el[leaveCbKey]&&En.el[leaveCbKey](),xn(Pn,[Mn])},enter(Mn){let Pn=Qe,En=en,Cn=tn;if(!t.isMounted)if(Be)Pn=pn||Qe,En=gn||en,Cn=yn||tn;else return;let Rn=!1;const Tn=Mn[enterCbKey$1]=Nn=>{Rn||(Rn=!0,Nn?xn(Cn,[Mn]):xn(En,[Mn]),bn.delayedLeave&&bn.delayedLeave(),Mn[enterCbKey$1]=void 0)};Pn?wn(Pn,[Mn,Tn]):Tn()},leave(Mn,Pn){const En=String(Oe.key);if(Mn[enterCbKey$1]&&Mn[enterCbKey$1](!0),t.isUnmounting)return Pn();xn(an,[Mn]);let Cn=!1;const Rn=Mn[leaveCbKey]=Tn=>{Cn||(Cn=!0,Pn(),Tn?xn(dn,[Mn]):xn(un,[Mn]),Mn[leaveCbKey]=void 0,An[En]===Oe&&delete An[En])};An[En]=Oe,cn?wn(cn,[Mn,Rn]):Rn()},clone(Mn){const Pn=resolveTransitionHooks(Mn,e,t,ke,Ge);return Ge&&Ge(Pn),Pn}};return bn}function emptyPlaceholder(Oe){if(isKeepAlive(Oe))return Oe=cloneVNode(Oe),Oe.children=null,Oe}function getInnerChild$1(Oe){if(!isKeepAlive(Oe))return isTeleport(Oe.type)&&Oe.children?findNonCommentChild(Oe.children):Oe;const{shapeFlag:e,children:t}=Oe;if(t){if(e&16)return t[0];if(e&32&&isFunction$1(t.default))return t.default()}}function setTransitionHooks(Oe,e){Oe.shapeFlag&6&&Oe.component?(Oe.transition=e,setTransitionHooks(Oe.component.subTree,e)):Oe.shapeFlag&128?(Oe.ssContent.transition=e.clone(Oe.ssContent),Oe.ssFallback.transition=e.clone(Oe.ssFallback)):Oe.transition=e}function getTransitionRawChildren(Oe,e=!1,t){let ke=[],Ge=0;for(let Be=0;Be<Oe.length;Be++){let je=Oe[Be];const Ve=t==null?je.key:String(t)+String(je.key!=null?je.key:Be);je.type===Fragment?(je.patchFlag&128&&Ge++,ke=ke.concat(getTransitionRawChildren(je.children,e,Ve))):(e||je.type!==Comment)&&ke.push(Ve!=null?cloneVNode(je,{key:Ve}):je)}if(Ge>1)for(let Be=0;Be<ke.length;Be++)ke[Be].patchFlag=-2;return ke}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(Oe,e){return isFunction$1(Oe)?extend$5({name:Oe.name},e,{setup:Oe}):Oe}function useId(){const Oe=getCurrentInstance();return Oe?(Oe.appContext.config.idPrefix||"v")+"-"+Oe.ids[0]+Oe.ids[1]++:""}function markAsyncBoundary(Oe){Oe.ids=[Oe.ids[0]+Oe.ids[2]+++"-",0,0]}function useTemplateRef(Oe){const e=getCurrentInstance(),t=shallowRef(null);if(e){const Ge=e.refs===EMPTY_OBJ?e.refs={}:e.refs;Object.defineProperty(Ge,Oe,{enumerable:!0,get:()=>t.value,set:Be=>t.value=Be})}return t}function setRef(Oe,e,t,ke,Ge=!1){if(isArray$1(Oe)){Oe.forEach((un,dn)=>setRef(un,e&&(isArray$1(e)?e[dn]:e),t,ke,Ge));return}if(isAsyncWrapper(ke)&&!Ge){ke.shapeFlag&512&&ke.type.__asyncResolved&&ke.component.subTree.component&&setRef(Oe,e,t,ke.component.subTree);return}const Be=ke.shapeFlag&4?getComponentPublicInstance(ke.component):ke.el,je=Ge?null:Be,{i:Ve,r:Ze}=Oe,Qe=e&&e.r,en=Ve.refs===EMPTY_OBJ?Ve.refs={}:Ve.refs,tn=Ve.setupState,an=toRaw(tn),cn=tn===EMPTY_OBJ?()=>!1:un=>hasOwn(an,un);if(Qe!=null&&Qe!==Ze&&(isString(Qe)?(en[Qe]=null,cn(Qe)&&(tn[Qe]=null)):isRef(Qe)&&(Qe.value=null)),isFunction$1(Ze))callWithErrorHandling(Ze,Ve,12,[je,en]);else{const un=isString(Ze),dn=isRef(Ze);if(un||dn){const fn=()=>{if(Oe.f){const pn=un?cn(Ze)?tn[Ze]:en[Ze]:Ze.value;Ge?isArray$1(pn)&&remove(pn,Be):isArray$1(pn)?pn.includes(Be)||pn.push(Be):un?(en[Ze]=[Be],cn(Ze)&&(tn[Ze]=en[Ze])):(Ze.value=[Be],Oe.k&&(en[Oe.k]=Ze.value))}else un?(en[Ze]=je,cn(Ze)&&(tn[Ze]=je)):dn&&(Ze.value=je,Oe.k&&(en[Oe.k]=je))};je?(fn.id=-1,queuePostRenderEffect(fn,t)):fn()}}}let hasLoggedMismatchError=!1;const logMismatchError=()=>{hasLoggedMismatchError||(console.error("Hydration completed but contains mismatches."),hasLoggedMismatchError=!0)},isSVGContainer=Oe=>Oe.namespaceURI.includes("svg")&&Oe.tagName!=="foreignObject",isMathMLContainer=Oe=>Oe.namespaceURI.includes("MathML"),getContainerType=Oe=>{if(Oe.nodeType===1){if(isSVGContainer(Oe))return"svg";if(isMathMLContainer(Oe))return"mathml"}},isComment=Oe=>Oe.nodeType===8;function createHydrationFunctions(Oe){const{mt:e,p:t,o:{patchProp:ke,createText:Ge,nextSibling:Be,parentNode:je,remove:Ve,insert:Ze,createComment:Qe}}=Oe,en=(yn,vn)=>{if(!vn.hasChildNodes()){t(null,yn,vn),flushPostFlushCbs(),vn._vnode=yn;return}tn(vn.firstChild,yn,null,null,null),flushPostFlushCbs(),vn._vnode=yn},tn=(yn,vn,An,xn,wn,bn=!1)=>{bn=bn||!!vn.dynamicChildren;const Mn=isComment(yn)&&yn.data==="[",Pn=()=>dn(yn,vn,An,xn,wn,Mn),{type:En,ref:Cn,shapeFlag:Rn,patchFlag:Tn}=vn;let Nn=yn.nodeType;vn.el=yn,Tn===-2&&(bn=!1,vn.dynamicChildren=null);let Gn=null;switch(En){case Text$1:Nn!==3?vn.children===""?(Ze(vn.el=Ge(""),je(yn),yn),Gn=yn):Gn=Pn():(yn.data!==vn.children&&(logMismatchError(),yn.data=vn.children),Gn=Be(yn));break;case Comment:gn(yn)?(Gn=Be(yn),pn(vn.el=yn.content.firstChild,yn,An)):Nn!==8||Mn?Gn=Pn():Gn=Be(yn);break;case Static:if(Mn&&(yn=Be(yn),Nn=yn.nodeType),Nn===1||Nn===3){Gn=yn;const zn=!vn.children.length;for(let $n=0;$n<vn.staticCount;$n++)zn&&(vn.children+=Gn.nodeType===1?Gn.outerHTML:Gn.data),$n===vn.staticCount-1&&(vn.anchor=Gn),Gn=Be(Gn);return Mn?Be(Gn):Gn}else Pn();break;case Fragment:Mn?Gn=un(yn,vn,An,xn,wn,bn):Gn=Pn();break;default:if(Rn&1)(Nn!==1||vn.type.toLowerCase()!==yn.tagName.toLowerCase())&&!gn(yn)?Gn=Pn():Gn=an(yn,vn,An,xn,wn,bn);else if(Rn&6){vn.slotScopeIds=wn;const zn=je(yn);if(Mn?Gn=fn(yn):isComment(yn)&&yn.data==="teleport start"?Gn=fn(yn,yn.data,"teleport end"):Gn=Be(yn),e(vn,zn,null,An,xn,getContainerType(zn),bn),isAsyncWrapper(vn)&&!vn.type.__asyncResolved){let $n;Mn?($n=createVNode(Fragment),$n.anchor=Gn?Gn.previousSibling:zn.lastChild):$n=yn.nodeType===3?createTextVNode(""):createVNode("div"),$n.el=yn,vn.component.subTree=$n}}else Rn&64?Nn!==8?Gn=Pn():Gn=vn.type.hydrate(yn,vn,An,xn,wn,bn,Oe,cn):Rn&128&&(Gn=vn.type.hydrate(yn,vn,An,xn,getContainerType(je(yn)),wn,bn,Oe,tn))}return Cn!=null&&setRef(Cn,null,xn,vn),Gn},an=(yn,vn,An,xn,wn,bn)=>{bn=bn||!!vn.dynamicChildren;const{type:Mn,props:Pn,patchFlag:En,shapeFlag:Cn,dirs:Rn,transition:Tn}=vn,Nn=Mn==="input"||Mn==="option";if(Nn||En!==-1){Rn&&invokeDirectiveHook(vn,null,An,"created");let Gn=!1;if(gn(yn)){Gn=needTransition(null,Tn)&&An&&An.vnode.props&&An.vnode.props.appear;const $n=yn.content.firstChild;Gn&&Tn.beforeEnter($n),pn($n,yn,An),vn.el=yn=$n}if(Cn&16&&!(Pn&&(Pn.innerHTML||Pn.textContent))){let $n=cn(yn.firstChild,vn,yn,An,xn,wn,bn);for(;$n;){isMismatchAllowed(yn,1)||logMismatchError();const Qn=$n;$n=$n.nextSibling,Ve(Qn)}}else if(Cn&8){let $n=vn.children;$n[0]===`
`&&(yn.tagName==="PRE"||yn.tagName==="TEXTAREA")&&($n=$n.slice(1)),yn.textContent!==$n&&(isMismatchAllowed(yn,0)||logMismatchError(),yn.textContent=vn.children)}if(Pn){if(Nn||!bn||En&48){const $n=yn.tagName.includes("-");for(const Qn in Pn)(Nn&&(Qn.endsWith("value")||Qn==="indeterminate")||isOn(Qn)&&!isReservedProp(Qn)||Qn[0]==="."||$n)&&ke(yn,Qn,null,Pn[Qn],void 0,An)}else if(Pn.onClick)ke(yn,"onClick",null,Pn.onClick,void 0,An);else if(En&4&&isReactive(Pn.style))for(const $n in Pn.style)Pn.style[$n]}let zn;(zn=Pn&&Pn.onVnodeBeforeMount)&&invokeVNodeHook(zn,An,vn),Rn&&invokeDirectiveHook(vn,null,An,"beforeMount"),((zn=Pn&&Pn.onVnodeMounted)||Rn||Gn)&&queueEffectWithSuspense(()=>{zn&&invokeVNodeHook(zn,An,vn),Gn&&Tn.enter(yn),Rn&&invokeDirectiveHook(vn,null,An,"mounted")},xn)}return yn.nextSibling},cn=(yn,vn,An,xn,wn,bn,Mn)=>{Mn=Mn||!!vn.dynamicChildren;const Pn=vn.children,En=Pn.length;for(let Cn=0;Cn<En;Cn++){const Rn=Mn?Pn[Cn]:Pn[Cn]=normalizeVNode(Pn[Cn]),Tn=Rn.type===Text$1;yn?(Tn&&!Mn&&Cn+1<En&&normalizeVNode(Pn[Cn+1]).type===Text$1&&(Ze(Ge(yn.data.slice(Rn.children.length)),An,Be(yn)),yn.data=Rn.children),yn=tn(yn,Rn,xn,wn,bn,Mn)):Tn&&!Rn.children?Ze(Rn.el=Ge(""),An):(isMismatchAllowed(An,1)||logMismatchError(),t(null,Rn,An,null,xn,wn,getContainerType(An),bn))}return yn},un=(yn,vn,An,xn,wn,bn)=>{const{slotScopeIds:Mn}=vn;Mn&&(wn=wn?wn.concat(Mn):Mn);const Pn=je(yn),En=cn(Be(yn),vn,Pn,An,xn,wn,bn);return En&&isComment(En)&&En.data==="]"?Be(vn.anchor=En):(logMismatchError(),Ze(vn.anchor=Qe("]"),Pn,En),En)},dn=(yn,vn,An,xn,wn,bn)=>{if(isMismatchAllowed(yn.parentElement,1)||logMismatchError(),vn.el=null,bn){const En=fn(yn);for(;;){const Cn=Be(yn);if(Cn&&Cn!==En)Ve(Cn);else break}}const Mn=Be(yn),Pn=je(yn);return Ve(yn),t(null,vn,Pn,Mn,An,xn,getContainerType(Pn),wn),An&&(An.vnode.el=vn.el,updateHOCHostEl(An,vn.el)),Mn},fn=(yn,vn="[",An="]")=>{let xn=0;for(;yn;)if(yn=Be(yn),yn&&isComment(yn)&&(yn.data===vn&&xn++,yn.data===An)){if(xn===0)return Be(yn);xn--}return yn},pn=(yn,vn,An)=>{const xn=vn.parentNode;xn&&xn.replaceChild(yn,vn);let wn=An;for(;wn;)wn.vnode.el===vn&&(wn.vnode.el=wn.subTree.el=yn),wn=wn.parent},gn=yn=>yn.nodeType===1&&yn.tagName==="TEMPLATE";return[en,tn]}const allowMismatchAttr="data-allow-mismatch",MismatchTypeString={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function isMismatchAllowed(Oe,e){if(e===0||e===1)for(;Oe&&!Oe.hasAttribute(allowMismatchAttr);)Oe=Oe.parentElement;const t=Oe&&Oe.getAttribute(allowMismatchAttr);if(t==null)return!1;if(t==="")return!0;{const ke=t.split(",");return e===0&&ke.includes("children")?!0:t.split(",").includes(MismatchTypeString[e])}}const requestIdleCallback=getGlobalThis().requestIdleCallback||(Oe=>setTimeout(Oe,1)),cancelIdleCallback=getGlobalThis().cancelIdleCallback||(Oe=>clearTimeout(Oe)),hydrateOnIdle=(Oe=1e4)=>e=>{const t=requestIdleCallback(e,{timeout:Oe});return()=>cancelIdleCallback(t)};function elementIsVisibleInViewport(Oe){const{top:e,left:t,bottom:ke,right:Ge}=Oe.getBoundingClientRect(),{innerHeight:Be,innerWidth:je}=window;return(e>0&&e<Be||ke>0&&ke<Be)&&(t>0&&t<je||Ge>0&&Ge<je)}const hydrateOnVisible=Oe=>(e,t)=>{const ke=new IntersectionObserver(Ge=>{for(const Be of Ge)if(Be.isIntersecting){ke.disconnect(),e();break}},Oe);return t(Ge=>{if(Ge instanceof Element){if(elementIsVisibleInViewport(Ge))return e(),ke.disconnect(),!1;ke.observe(Ge)}}),()=>ke.disconnect()},hydrateOnMediaQuery=Oe=>e=>{if(Oe){const t=matchMedia(Oe);if(t.matches)e();else return t.addEventListener("change",e,{once:!0}),()=>t.removeEventListener("change",e)}},hydrateOnInteraction=(Oe=[])=>(e,t)=>{isString(Oe)&&(Oe=[Oe]);let ke=!1;const Ge=je=>{ke||(ke=!0,Be(),e(),je.target.dispatchEvent(new je.constructor(je.type,je)))},Be=()=>{t(je=>{for(const Ve of Oe)je.removeEventListener(Ve,Ge)})};return t(je=>{for(const Ve of Oe)je.addEventListener(Ve,Ge,{once:!0})}),Be};function forEachElement(Oe,e){if(isComment(Oe)&&Oe.data==="["){let t=1,ke=Oe.nextSibling;for(;ke;){if(ke.nodeType===1){if(e(ke)===!1)break}else if(isComment(ke))if(ke.data==="]"){if(--t===0)break}else ke.data==="["&&t++;ke=ke.nextSibling}}else e(Oe)}const isAsyncWrapper=Oe=>!!Oe.type.__asyncLoader;/*! #__NO_SIDE_EFFECTS__ */function defineAsyncComponent(Oe){isFunction$1(Oe)&&(Oe={loader:Oe});const{loader:e,loadingComponent:t,errorComponent:ke,delay:Ge=200,hydrate:Be,timeout:je,suspensible:Ve=!0,onError:Ze}=Oe;let Qe=null,en,tn=0;const an=()=>(tn++,Qe=null,cn()),cn=()=>{let un;return Qe||(un=Qe=e().catch(dn=>{if(dn=dn instanceof Error?dn:new Error(String(dn)),Ze)return new Promise((fn,pn)=>{Ze(dn,()=>fn(an()),()=>pn(dn),tn+1)});throw dn}).then(dn=>un!==Qe&&Qe?Qe:(dn&&(dn.__esModule||dn[Symbol.toStringTag]==="Module")&&(dn=dn.default),en=dn,dn)))};return defineComponent({name:"AsyncComponentWrapper",__asyncLoader:cn,__asyncHydrate(un,dn,fn){const pn=Be?()=>{const gn=Be(fn,yn=>forEachElement(un,yn));gn&&(dn.bum||(dn.bum=[])).push(gn)}:fn;en?pn():cn().then(()=>!dn.isUnmounted&&pn())},get __asyncResolved(){return en},setup(){const un=currentInstance;if(markAsyncBoundary(un),en)return()=>createInnerComp(en,un);const dn=yn=>{Qe=null,handleError(yn,un,13,!ke)};if(Ve&&un.suspense||isInSSRComponentSetup)return cn().then(yn=>()=>createInnerComp(yn,un)).catch(yn=>(dn(yn),()=>ke?createVNode(ke,{error:yn}):null));const fn=ref(!1),pn=ref(),gn=ref(!!Ge);return Ge&&setTimeout(()=>{gn.value=!1},Ge),je!=null&&setTimeout(()=>{if(!fn.value&&!pn.value){const yn=new Error(`Async component timed out after ${je}ms.`);dn(yn),pn.value=yn}},je),cn().then(()=>{fn.value=!0,un.parent&&isKeepAlive(un.parent.vnode)&&un.parent.update()}).catch(yn=>{dn(yn),pn.value=yn}),()=>{if(fn.value&&en)return createInnerComp(en,un);if(pn.value&&ke)return createVNode(ke,{error:pn.value});if(t&&!gn.value)return createVNode(t)}}})}function createInnerComp(Oe,e){const{ref:t,props:ke,children:Ge,ce:Be}=e.vnode,je=createVNode(Oe,ke,Ge);return je.ref=t,je.ce=Be,delete e.vnode.ce,je}const isKeepAlive=Oe=>Oe.type.__isKeepAlive,KeepAliveImpl={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(Oe,{slots:e}){const t=getCurrentInstance(),ke=t.ctx;if(!ke.renderer)return()=>{const gn=e.default&&e.default();return gn&&gn.length===1?gn[0]:gn};const Ge=new Map,Be=new Set;let je=null;const Ve=t.suspense,{renderer:{p:Ze,m:Qe,um:en,o:{createElement:tn}}}=ke,an=tn("div");ke.activate=(gn,yn,vn,An,xn)=>{const wn=gn.component;Qe(gn,yn,vn,0,Ve),Ze(wn.vnode,gn,yn,vn,wn,Ve,An,gn.slotScopeIds,xn),queuePostRenderEffect(()=>{wn.isDeactivated=!1,wn.a&&invokeArrayFns(wn.a);const bn=gn.props&&gn.props.onVnodeMounted;bn&&invokeVNodeHook(bn,wn.parent,gn)},Ve)},ke.deactivate=gn=>{const yn=gn.component;invalidateMount(yn.m),invalidateMount(yn.a),Qe(gn,an,null,1,Ve),queuePostRenderEffect(()=>{yn.da&&invokeArrayFns(yn.da);const vn=gn.props&&gn.props.onVnodeUnmounted;vn&&invokeVNodeHook(vn,yn.parent,gn),yn.isDeactivated=!0},Ve)};function cn(gn){resetShapeFlag(gn),en(gn,t,Ve,!0)}function un(gn){Ge.forEach((yn,vn)=>{const An=getComponentName(yn.type);An&&!gn(An)&&dn(vn)})}function dn(gn){const yn=Ge.get(gn);yn&&(!je||!isSameVNodeType(yn,je))?cn(yn):je&&resetShapeFlag(je),Ge.delete(gn),Be.delete(gn)}watch(()=>[Oe.include,Oe.exclude],([gn,yn])=>{gn&&un(vn=>matches$1(gn,vn)),yn&&un(vn=>!matches$1(yn,vn))},{flush:"post",deep:!0});let fn=null;const pn=()=>{fn!=null&&(isSuspense(t.subTree.type)?queuePostRenderEffect(()=>{Ge.set(fn,getInnerChild(t.subTree))},t.subTree.suspense):Ge.set(fn,getInnerChild(t.subTree)))};return onMounted(pn),onUpdated(pn),onBeforeUnmount(()=>{Ge.forEach(gn=>{const{subTree:yn,suspense:vn}=t,An=getInnerChild(yn);if(gn.type===An.type&&gn.key===An.key){resetShapeFlag(An);const xn=An.component.da;xn&&queuePostRenderEffect(xn,vn);return}cn(gn)})}),()=>{if(fn=null,!e.default)return je=null;const gn=e.default(),yn=gn[0];if(gn.length>1)return je=null,gn;if(!isVNode(yn)||!(yn.shapeFlag&4)&&!(yn.shapeFlag&128))return je=null,yn;let vn=getInnerChild(yn);if(vn.type===Comment)return je=null,vn;const An=vn.type,xn=getComponentName(isAsyncWrapper(vn)?vn.type.__asyncResolved||{}:An),{include:wn,exclude:bn,max:Mn}=Oe;if(wn&&(!xn||!matches$1(wn,xn))||bn&&xn&&matches$1(bn,xn))return vn.shapeFlag&=-257,je=vn,yn;const Pn=vn.key==null?An:vn.key,En=Ge.get(Pn);return vn.el&&(vn=cloneVNode(vn),yn.shapeFlag&128&&(yn.ssContent=vn)),fn=Pn,En?(vn.el=En.el,vn.component=En.component,vn.transition&&setTransitionHooks(vn,vn.transition),vn.shapeFlag|=512,Be.delete(Pn),Be.add(Pn)):(Be.add(Pn),Mn&&Be.size>parseInt(Mn,10)&&dn(Be.values().next().value)),vn.shapeFlag|=256,je=vn,isSuspense(yn.type)?yn:vn}}},KeepAlive=KeepAliveImpl;function matches$1(Oe,e){return isArray$1(Oe)?Oe.some(t=>matches$1(t,e)):isString(Oe)?Oe.split(",").includes(e):isRegExp(Oe)?(Oe.lastIndex=0,Oe.test(e)):!1}function onActivated(Oe,e){registerKeepAliveHook(Oe,"a",e)}function onDeactivated(Oe,e){registerKeepAliveHook(Oe,"da",e)}function registerKeepAliveHook(Oe,e,t=currentInstance){const ke=Oe.__wdc||(Oe.__wdc=()=>{let Ge=t;for(;Ge;){if(Ge.isDeactivated)return;Ge=Ge.parent}return Oe()});if(injectHook(e,ke,t),t){let Ge=t.parent;for(;Ge&&Ge.parent;)isKeepAlive(Ge.parent.vnode)&&injectToKeepAliveRoot(ke,e,t,Ge),Ge=Ge.parent}}function injectToKeepAliveRoot(Oe,e,t,ke){const Ge=injectHook(e,Oe,ke,!0);onUnmounted(()=>{remove(ke[e],Ge)},t)}function resetShapeFlag(Oe){Oe.shapeFlag&=-257,Oe.shapeFlag&=-513}function getInnerChild(Oe){return Oe.shapeFlag&128?Oe.ssContent:Oe}function injectHook(Oe,e,t=currentInstance,ke=!1){if(t){const Ge=t[Oe]||(t[Oe]=[]),Be=e.__weh||(e.__weh=(...je)=>{pauseTracking();const Ve=setCurrentInstance(t),Ze=callWithAsyncErrorHandling(e,t,Oe,je);return Ve(),resetTracking(),Ze});return ke?Ge.unshift(Be):Ge.push(Be),Be}}const createHook=Oe=>(e,t=currentInstance)=>{(!isInSSRComponentSetup||Oe==="sp")&&injectHook(Oe,(...ke)=>e(...ke),t)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(Oe,e=currentInstance){injectHook("ec",Oe,e)}const COMPONENTS="components",DIRECTIVES="directives";function resolveComponent(Oe,e){return resolveAsset(COMPONENTS,Oe,!0,e)||Oe}const NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(Oe){return isString(Oe)?resolveAsset(COMPONENTS,Oe,!1)||Oe:Oe||NULL_DYNAMIC_COMPONENT}function resolveDirective(Oe){return resolveAsset(DIRECTIVES,Oe)}function resolveAsset(Oe,e,t=!0,ke=!1){const Ge=currentRenderingInstance||currentInstance;if(Ge){const Be=Ge.type;if(Oe===COMPONENTS){const Ve=getComponentName(Be,!1);if(Ve&&(Ve===e||Ve===camelize(e)||Ve===capitalize(camelize(e))))return Be}const je=resolve(Ge[Oe]||Be[Oe],e)||resolve(Ge.appContext[Oe],e);return!je&&ke?Be:je}}function resolve(Oe,e){return Oe&&(Oe[e]||Oe[camelize(e)]||Oe[capitalize(camelize(e))])}function renderList(Oe,e,t,ke){let Ge;const Be=t&&t[ke],je=isArray$1(Oe);if(je||isString(Oe)){const Ve=je&&isReactive(Oe);let Ze=!1;Ve&&(Ze=!isShallow(Oe),Oe=shallowReadArray(Oe)),Ge=new Array(Oe.length);for(let Qe=0,en=Oe.length;Qe<en;Qe++)Ge[Qe]=e(Ze?toReactive(Oe[Qe]):Oe[Qe],Qe,void 0,Be&&Be[Qe])}else if(typeof Oe=="number"){Ge=new Array(Oe);for(let Ve=0;Ve<Oe;Ve++)Ge[Ve]=e(Ve+1,Ve,void 0,Be&&Be[Ve])}else if(isObject$1(Oe))if(Oe[Symbol.iterator])Ge=Array.from(Oe,(Ve,Ze)=>e(Ve,Ze,void 0,Be&&Be[Ze]));else{const Ve=Object.keys(Oe);Ge=new Array(Ve.length);for(let Ze=0,Qe=Ve.length;Ze<Qe;Ze++){const en=Ve[Ze];Ge[Ze]=e(Oe[en],en,Ze,Be&&Be[Ze])}}else Ge=[];return t&&(t[ke]=Ge),Ge}function createSlots(Oe,e){for(let t=0;t<e.length;t++){const ke=e[t];if(isArray$1(ke))for(let Ge=0;Ge<ke.length;Ge++)Oe[ke[Ge].name]=ke[Ge].fn;else ke&&(Oe[ke.name]=ke.key?(...Ge)=>{const Be=ke.fn(...Ge);return Be&&(Be.key=ke.key),Be}:ke.fn)}return Oe}function renderSlot(Oe,e,t={},ke,Ge){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return e!=="default"&&(t.name=e),openBlock(),createBlock(Fragment,null,[createVNode("slot",t,ke&&ke())],64);let Be=Oe[e];Be&&Be._c&&(Be._d=!1),openBlock();const je=Be&&ensureValidVNode(Be(t)),Ve=t.key||je&&je.key,Ze=createBlock(Fragment,{key:(Ve&&!isSymbol(Ve)?Ve:`_${e}`)+(!je&&ke?"_fb":"")},je||(ke?ke():[]),je&&Oe._===1?64:-2);return!Ge&&Ze.scopeId&&(Ze.slotScopeIds=[Ze.scopeId+"-s"]),Be&&Be._c&&(Be._d=!0),Ze}function ensureValidVNode(Oe){return Oe.some(e=>isVNode(e)?!(e.type===Comment||e.type===Fragment&&!ensureValidVNode(e.children)):!0)?Oe:null}function toHandlers(Oe,e){const t={};for(const ke in Oe)t[e&&/[A-Z]/.test(ke)?`on:${ke}`:toHandlerKey(ke)]=Oe[ke];return t}const getPublicInstance=Oe=>Oe?isStatefulComponent(Oe)?getComponentPublicInstance(Oe):getPublicInstance(Oe.parent):null,publicPropertiesMap=extend$5(Object.create(null),{$:Oe=>Oe,$el:Oe=>Oe.vnode.el,$data:Oe=>Oe.data,$props:Oe=>Oe.props,$attrs:Oe=>Oe.attrs,$slots:Oe=>Oe.slots,$refs:Oe=>Oe.refs,$parent:Oe=>getPublicInstance(Oe.parent),$root:Oe=>getPublicInstance(Oe.root),$host:Oe=>Oe.ce,$emit:Oe=>Oe.emit,$options:Oe=>resolveMergedOptions(Oe),$forceUpdate:Oe=>Oe.f||(Oe.f=()=>{queueJob(Oe.update)}),$nextTick:Oe=>Oe.n||(Oe.n=nextTick.bind(Oe.proxy)),$watch:Oe=>instanceWatch.bind(Oe)}),hasSetupBinding=(Oe,e)=>Oe!==EMPTY_OBJ&&!Oe.__isScriptSetup&&hasOwn(Oe,e),PublicInstanceProxyHandlers={get({_:Oe},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:ke,data:Ge,props:Be,accessCache:je,type:Ve,appContext:Ze}=Oe;let Qe;if(e[0]!=="$"){const cn=je[e];if(cn!==void 0)switch(cn){case 1:return ke[e];case 2:return Ge[e];case 4:return t[e];case 3:return Be[e]}else{if(hasSetupBinding(ke,e))return je[e]=1,ke[e];if(Ge!==EMPTY_OBJ&&hasOwn(Ge,e))return je[e]=2,Ge[e];if((Qe=Oe.propsOptions[0])&&hasOwn(Qe,e))return je[e]=3,Be[e];if(t!==EMPTY_OBJ&&hasOwn(t,e))return je[e]=4,t[e];shouldCacheAccess&&(je[e]=0)}}const en=publicPropertiesMap[e];let tn,an;if(en)return e==="$attrs"&&track(Oe.attrs,"get",""),en(Oe);if((tn=Ve.__cssModules)&&(tn=tn[e]))return tn;if(t!==EMPTY_OBJ&&hasOwn(t,e))return je[e]=4,t[e];if(an=Ze.config.globalProperties,hasOwn(an,e))return an[e]},set({_:Oe},e,t){const{data:ke,setupState:Ge,ctx:Be}=Oe;return hasSetupBinding(Ge,e)?(Ge[e]=t,!0):ke!==EMPTY_OBJ&&hasOwn(ke,e)?(ke[e]=t,!0):hasOwn(Oe.props,e)||e[0]==="$"&&e.slice(1)in Oe?!1:(Be[e]=t,!0)},has({_:{data:Oe,setupState:e,accessCache:t,ctx:ke,appContext:Ge,propsOptions:Be}},je){let Ve;return!!t[je]||Oe!==EMPTY_OBJ&&hasOwn(Oe,je)||hasSetupBinding(e,je)||(Ve=Be[0])&&hasOwn(Ve,je)||hasOwn(ke,je)||hasOwn(publicPropertiesMap,je)||hasOwn(Ge.config.globalProperties,je)},defineProperty(Oe,e,t){return t.get!=null?Oe._.accessCache[e]=0:hasOwn(t,"value")&&this.set(Oe,e,t.value,null),Reflect.defineProperty(Oe,e,t)}},RuntimeCompiledPublicInstanceProxyHandlers=extend$5({},PublicInstanceProxyHandlers,{get(Oe,e){if(e!==Symbol.unscopables)return PublicInstanceProxyHandlers.get(Oe,e,Oe)},has(Oe,e){return e[0]!=="_"&&!isGloballyAllowed(e)}});function defineProps(){return null}function defineEmits(){return null}function defineExpose(Oe){}function defineOptions(Oe){}function defineSlots(){return null}function defineModel(){}function withDefaults(Oe,e){return null}function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const Oe=getCurrentInstance();return Oe.setupContext||(Oe.setupContext=createSetupContext(Oe))}function normalizePropsOrEmits(Oe){return isArray$1(Oe)?Oe.reduce((e,t)=>(e[t]=null,e),{}):Oe}function mergeDefaults(Oe,e){const t=normalizePropsOrEmits(Oe);for(const ke in e){if(ke.startsWith("__skip"))continue;let Ge=t[ke];Ge?isArray$1(Ge)||isFunction$1(Ge)?Ge=t[ke]={type:Ge,default:e[ke]}:Ge.default=e[ke]:Ge===null&&(Ge=t[ke]={default:e[ke]}),Ge&&e[`__skip_${ke}`]&&(Ge.skipFactory=!0)}return t}function mergeModels(Oe,e){return!Oe||!e?Oe||e:isArray$1(Oe)&&isArray$1(e)?Oe.concat(e):extend$5({},normalizePropsOrEmits(Oe),normalizePropsOrEmits(e))}function createPropsRestProxy(Oe,e){const t={};for(const ke in Oe)e.includes(ke)||Object.defineProperty(t,ke,{enumerable:!0,get:()=>Oe[ke]});return t}function withAsyncContext(Oe){const e=getCurrentInstance();let t=Oe();return unsetCurrentInstance(),isPromise(t)&&(t=t.catch(ke=>{throw setCurrentInstance(e),ke})),[t,()=>setCurrentInstance(e)]}let shouldCacheAccess=!0;function applyOptions(Oe){const e=resolveMergedOptions(Oe),t=Oe.proxy,ke=Oe.ctx;shouldCacheAccess=!1,e.beforeCreate&&callHook$1(e.beforeCreate,Oe,"bc");const{data:Ge,computed:Be,methods:je,watch:Ve,provide:Ze,inject:Qe,created:en,beforeMount:tn,mounted:an,beforeUpdate:cn,updated:un,activated:dn,deactivated:fn,beforeDestroy:pn,beforeUnmount:gn,destroyed:yn,unmounted:vn,render:An,renderTracked:xn,renderTriggered:wn,errorCaptured:bn,serverPrefetch:Mn,expose:Pn,inheritAttrs:En,components:Cn,directives:Rn,filters:Tn}=e;if(Qe&&resolveInjections(Qe,ke,null),je)for(const zn in je){const $n=je[zn];isFunction$1($n)&&(ke[zn]=$n.bind(t))}if(Ge){const zn=Ge.call(t,t);isObject$1(zn)&&(Oe.data=reactive(zn))}if(shouldCacheAccess=!0,Be)for(const zn in Be){const $n=Be[zn],Qn=isFunction$1($n)?$n.bind(t,t):isFunction$1($n.get)?$n.get.bind(t,t):NOOP,Hn=!isFunction$1($n)&&isFunction$1($n.set)?$n.set.bind(t):NOOP,Ni=computed({get:Qn,set:Hn});Object.defineProperty(ke,zn,{enumerable:!0,configurable:!0,get:()=>Ni.value,set:On=>Ni.value=On})}if(Ve)for(const zn in Ve)createWatcher(Ve[zn],ke,t,zn);if(Ze){const zn=isFunction$1(Ze)?Ze.call(t):Ze;Reflect.ownKeys(zn).forEach($n=>{provide($n,zn[$n])})}en&&callHook$1(en,Oe,"c");function Gn(zn,$n){isArray$1($n)?$n.forEach(Qn=>zn(Qn.bind(t))):$n&&zn($n.bind(t))}if(Gn(onBeforeMount,tn),Gn(onMounted,an),Gn(onBeforeUpdate,cn),Gn(onUpdated,un),Gn(onActivated,dn),Gn(onDeactivated,fn),Gn(onErrorCaptured,bn),Gn(onRenderTracked,xn),Gn(onRenderTriggered,wn),Gn(onBeforeUnmount,gn),Gn(onUnmounted,vn),Gn(onServerPrefetch,Mn),isArray$1(Pn))if(Pn.length){const zn=Oe.exposed||(Oe.exposed={});Pn.forEach($n=>{Object.defineProperty(zn,$n,{get:()=>t[$n],set:Qn=>t[$n]=Qn})})}else Oe.exposed||(Oe.exposed={});An&&Oe.render===NOOP&&(Oe.render=An),En!=null&&(Oe.inheritAttrs=En),Cn&&(Oe.components=Cn),Rn&&(Oe.directives=Rn),Mn&&markAsyncBoundary(Oe)}function resolveInjections(Oe,e,t=NOOP){isArray$1(Oe)&&(Oe=normalizeInject(Oe));for(const ke in Oe){const Ge=Oe[ke];let Be;isObject$1(Ge)?"default"in Ge?Be=inject(Ge.from||ke,Ge.default,!0):Be=inject(Ge.from||ke):Be=inject(Ge),isRef(Be)?Object.defineProperty(e,ke,{enumerable:!0,configurable:!0,get:()=>Be.value,set:je=>Be.value=je}):e[ke]=Be}}function callHook$1(Oe,e,t){callWithAsyncErrorHandling(isArray$1(Oe)?Oe.map(ke=>ke.bind(e.proxy)):Oe.bind(e.proxy),e,t)}function createWatcher(Oe,e,t,ke){let Ge=ke.includes(".")?createPathGetter(t,ke):()=>t[ke];if(isString(Oe)){const Be=e[Oe];isFunction$1(Be)&&watch(Ge,Be)}else if(isFunction$1(Oe))watch(Ge,Oe.bind(t));else if(isObject$1(Oe))if(isArray$1(Oe))Oe.forEach(Be=>createWatcher(Be,e,t,ke));else{const Be=isFunction$1(Oe.handler)?Oe.handler.bind(t):e[Oe.handler];isFunction$1(Be)&&watch(Ge,Be,Oe)}}function resolveMergedOptions(Oe){const e=Oe.type,{mixins:t,extends:ke}=e,{mixins:Ge,optionsCache:Be,config:{optionMergeStrategies:je}}=Oe.appContext,Ve=Be.get(e);let Ze;return Ve?Ze=Ve:!Ge.length&&!t&&!ke?Ze=e:(Ze={},Ge.length&&Ge.forEach(Qe=>mergeOptions$1(Ze,Qe,je,!0)),mergeOptions$1(Ze,e,je)),isObject$1(e)&&Be.set(e,Ze),Ze}function mergeOptions$1(Oe,e,t,ke=!1){const{mixins:Ge,extends:Be}=e;Be&&mergeOptions$1(Oe,Be,t,!0),Ge&&Ge.forEach(je=>mergeOptions$1(Oe,je,t,!0));for(const je in e)if(!(ke&&je==="expose")){const Ve=internalOptionMergeStrats[je]||t&&t[je];Oe[je]=Ve?Ve(Oe[je],e[je]):e[je]}return Oe}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(Oe,e){return e?Oe?function(){return extend$5(isFunction$1(Oe)?Oe.call(this,this):Oe,isFunction$1(e)?e.call(this,this):e)}:e:Oe}function mergeInject(Oe,e){return mergeObjectOptions(normalizeInject(Oe),normalizeInject(e))}function normalizeInject(Oe){if(isArray$1(Oe)){const e={};for(let t=0;t<Oe.length;t++)e[Oe[t]]=Oe[t];return e}return Oe}function mergeAsArray(Oe,e){return Oe?[...new Set([].concat(Oe,e))]:e}function mergeObjectOptions(Oe,e){return Oe?extend$5(Object.create(null),Oe,e):e}function mergeEmitsOrPropsOptions(Oe,e){return Oe?isArray$1(Oe)&&isArray$1(e)?[...new Set([...Oe,...e])]:extend$5(Object.create(null),normalizePropsOrEmits(Oe),normalizePropsOrEmits(e??{})):e}function mergeWatchOptions(Oe,e){if(!Oe)return e;if(!e)return Oe;const t=extend$5(Object.create(null),Oe);for(const ke in e)t[ke]=mergeAsArray(Oe[ke],e[ke]);return t}function createAppContext(){return{app:null,config:{isNativeTag:NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(Oe,e){return function(ke,Ge=null){isFunction$1(ke)||(ke=extend$5({},ke)),Ge!=null&&!isObject$1(Ge)&&(Ge=null);const Be=createAppContext(),je=new WeakSet,Ve=[];let Ze=!1;const Qe=Be.app={_uid:uid$1++,_component:ke,_props:Ge,_container:null,_context:Be,_instance:null,version:version$3,get config(){return Be.config},set config(en){},use(en,...tn){return je.has(en)||(en&&isFunction$1(en.install)?(je.add(en),en.install(Qe,...tn)):isFunction$1(en)&&(je.add(en),en(Qe,...tn))),Qe},mixin(en){return Be.mixins.includes(en)||Be.mixins.push(en),Qe},component(en,tn){return tn?(Be.components[en]=tn,Qe):Be.components[en]},directive(en,tn){return tn?(Be.directives[en]=tn,Qe):Be.directives[en]},mount(en,tn,an){if(!Ze){const cn=Qe._ceVNode||createVNode(ke,Ge);return cn.appContext=Be,an===!0?an="svg":an===!1&&(an=void 0),tn&&e?e(cn,en):Oe(cn,en,an),Ze=!0,Qe._container=en,en.__vue_app__=Qe,getComponentPublicInstance(cn.component)}},onUnmount(en){Ve.push(en)},unmount(){Ze&&(callWithAsyncErrorHandling(Ve,Qe._instance,16),Oe(null,Qe._container),delete Qe._container.__vue_app__)},provide(en,tn){return Be.provides[en]=tn,Qe},runWithContext(en){const tn=currentApp;currentApp=Qe;try{return en()}finally{currentApp=tn}}};return Qe}}let currentApp=null;function provide(Oe,e){if(currentInstance){let t=currentInstance.provides;const ke=currentInstance.parent&&currentInstance.parent.provides;ke===t&&(t=currentInstance.provides=Object.create(ke)),t[Oe]=e}}function inject(Oe,e,t=!1){const ke=currentInstance||currentRenderingInstance;if(ke||currentApp){const Ge=currentApp?currentApp._context.provides:ke?ke.parent==null?ke.vnode.appContext&&ke.vnode.appContext.provides:ke.parent.provides:void 0;if(Ge&&Oe in Ge)return Ge[Oe];if(arguments.length>1)return t&&isFunction$1(e)?e.call(ke&&ke.proxy):e}}function hasInjectionContext(){return!!(currentInstance||currentRenderingInstance||currentApp)}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=Oe=>Object.getPrototypeOf(Oe)===internalObjectProto;function initProps(Oe,e,t,ke=!1){const Ge={},Be=createInternalObject();Oe.propsDefaults=Object.create(null),setFullProps(Oe,e,Ge,Be);for(const je in Oe.propsOptions[0])je in Ge||(Ge[je]=void 0);t?Oe.props=ke?Ge:shallowReactive(Ge):Oe.type.props?Oe.props=Ge:Oe.props=Be,Oe.attrs=Be}function updateProps(Oe,e,t,ke){const{props:Ge,attrs:Be,vnode:{patchFlag:je}}=Oe,Ve=toRaw(Ge),[Ze]=Oe.propsOptions;let Qe=!1;if((ke||je>0)&&!(je&16)){if(je&8){const en=Oe.vnode.dynamicProps;for(let tn=0;tn<en.length;tn++){let an=en[tn];if(isEmitListener(Oe.emitsOptions,an))continue;const cn=e[an];if(Ze)if(hasOwn(Be,an))cn!==Be[an]&&(Be[an]=cn,Qe=!0);else{const un=camelize(an);Ge[un]=resolvePropValue(Ze,Ve,un,cn,Oe,!1)}else cn!==Be[an]&&(Be[an]=cn,Qe=!0)}}}else{setFullProps(Oe,e,Ge,Be)&&(Qe=!0);let en;for(const tn in Ve)(!e||!hasOwn(e,tn)&&((en=hyphenate(tn))===tn||!hasOwn(e,en)))&&(Ze?t&&(t[tn]!==void 0||t[en]!==void 0)&&(Ge[tn]=resolvePropValue(Ze,Ve,tn,void 0,Oe,!0)):delete Ge[tn]);if(Be!==Ve)for(const tn in Be)(!e||!hasOwn(e,tn))&&(delete Be[tn],Qe=!0)}Qe&&trigger(Oe.attrs,"set","")}function setFullProps(Oe,e,t,ke){const[Ge,Be]=Oe.propsOptions;let je=!1,Ve;if(e)for(let Ze in e){if(isReservedProp(Ze))continue;const Qe=e[Ze];let en;Ge&&hasOwn(Ge,en=camelize(Ze))?!Be||!Be.includes(en)?t[en]=Qe:(Ve||(Ve={}))[en]=Qe:isEmitListener(Oe.emitsOptions,Ze)||(!(Ze in ke)||Qe!==ke[Ze])&&(ke[Ze]=Qe,je=!0)}if(Be){const Ze=toRaw(t),Qe=Ve||EMPTY_OBJ;for(let en=0;en<Be.length;en++){const tn=Be[en];t[tn]=resolvePropValue(Ge,Ze,tn,Qe[tn],Oe,!hasOwn(Qe,tn))}}return je}function resolvePropValue(Oe,e,t,ke,Ge,Be){const je=Oe[t];if(je!=null){const Ve=hasOwn(je,"default");if(Ve&&ke===void 0){const Ze=je.default;if(je.type!==Function&&!je.skipFactory&&isFunction$1(Ze)){const{propsDefaults:Qe}=Ge;if(t in Qe)ke=Qe[t];else{const en=setCurrentInstance(Ge);ke=Qe[t]=Ze.call(null,e),en()}}else ke=Ze;Ge.ce&&Ge.ce._setProp(t,ke)}je[0]&&(Be&&!Ve?ke=!1:je[1]&&(ke===""||ke===hyphenate(t))&&(ke=!0))}return ke}const mixinPropsCache=new WeakMap;function normalizePropsOptions(Oe,e,t=!1){const ke=t?mixinPropsCache:e.propsCache,Ge=ke.get(Oe);if(Ge)return Ge;const Be=Oe.props,je={},Ve=[];let Ze=!1;if(!isFunction$1(Oe)){const en=tn=>{Ze=!0;const[an,cn]=normalizePropsOptions(tn,e,!0);extend$5(je,an),cn&&Ve.push(...cn)};!t&&e.mixins.length&&e.mixins.forEach(en),Oe.extends&&en(Oe.extends),Oe.mixins&&Oe.mixins.forEach(en)}if(!Be&&!Ze)return isObject$1(Oe)&&ke.set(Oe,EMPTY_ARR),EMPTY_ARR;if(isArray$1(Be))for(let en=0;en<Be.length;en++){const tn=camelize(Be[en]);validatePropName(tn)&&(je[tn]=EMPTY_OBJ)}else if(Be)for(const en in Be){const tn=camelize(en);if(validatePropName(tn)){const an=Be[en],cn=je[tn]=isArray$1(an)||isFunction$1(an)?{type:an}:extend$5({},an),un=cn.type;let dn=!1,fn=!0;if(isArray$1(un))for(let pn=0;pn<un.length;++pn){const gn=un[pn],yn=isFunction$1(gn)&&gn.name;if(yn==="Boolean"){dn=!0;break}else yn==="String"&&(fn=!1)}else dn=isFunction$1(un)&&un.name==="Boolean";cn[0]=dn,cn[1]=fn,(dn||hasOwn(cn,"default"))&&Ve.push(tn)}}const Qe=[je,Ve];return isObject$1(Oe)&&ke.set(Oe,Qe),Qe}function validatePropName(Oe){return Oe[0]!=="$"&&!isReservedProp(Oe)}const isInternalKey=Oe=>Oe[0]==="_"||Oe==="$stable",normalizeSlotValue=Oe=>isArray$1(Oe)?Oe.map(normalizeVNode):[normalizeVNode(Oe)],normalizeSlot$1=(Oe,e,t)=>{if(e._n)return e;const ke=withCtx((...Ge)=>normalizeSlotValue(e(...Ge)),t);return ke._c=!1,ke},normalizeObjectSlots=(Oe,e,t)=>{const ke=Oe._ctx;for(const Ge in Oe){if(isInternalKey(Ge))continue;const Be=Oe[Ge];if(isFunction$1(Be))e[Ge]=normalizeSlot$1(Ge,Be,ke);else if(Be!=null){const je=normalizeSlotValue(Be);e[Ge]=()=>je}}},normalizeVNodeSlots=(Oe,e)=>{const t=normalizeSlotValue(e);Oe.slots.default=()=>t},assignSlots=(Oe,e,t)=>{for(const ke in e)(t||ke!=="_")&&(Oe[ke]=e[ke])},initSlots=(Oe,e,t)=>{const ke=Oe.slots=createInternalObject();if(Oe.vnode.shapeFlag&32){const Ge=e._;Ge?(assignSlots(ke,e,t),t&&def(ke,"_",Ge,!0)):normalizeObjectSlots(e,ke)}else e&&normalizeVNodeSlots(Oe,e)},updateSlots=(Oe,e,t)=>{const{vnode:ke,slots:Ge}=Oe;let Be=!0,je=EMPTY_OBJ;if(ke.shapeFlag&32){const Ve=e._;Ve?t&&Ve===1?Be=!1:assignSlots(Ge,e,t):(Be=!e.$stable,normalizeObjectSlots(e,Ge)),je=e}else e&&(normalizeVNodeSlots(Oe,e),je={default:1});if(Be)for(const Ve in Ge)!isInternalKey(Ve)&&je[Ve]==null&&delete Ge[Ve]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(Oe){return baseCreateRenderer(Oe)}function createHydrationRenderer(Oe){return baseCreateRenderer(Oe,createHydrationFunctions)}function baseCreateRenderer(Oe,e){const t=getGlobalThis();t.__VUE__=!0;const{insert:ke,remove:Ge,patchProp:Be,createElement:je,createText:Ve,createComment:Ze,setText:Qe,setElementText:en,parentNode:tn,nextSibling:an,setScopeId:cn=NOOP,insertStaticContent:un}=Oe,dn=(Bn,Ai,Kn,Fn=null,$i=null,Hi=null,Di=void 0,zi=null,Bi=!!Ai.dynamicChildren)=>{if(Bn===Ai)return;Bn&&!isSameVNodeType(Bn,Ai)&&(Fn=_i(Bn),On(Bn,$i,Hi,!0),Bn=null),Ai.patchFlag===-2&&(Bi=!1,Ai.dynamicChildren=null);const{type:Gi,ref:Ti,shapeFlag:Mi}=Ai;switch(Gi){case Text$1:fn(Bn,Ai,Kn,Fn);break;case Comment:pn(Bn,Ai,Kn,Fn);break;case Static:Bn==null&&gn(Ai,Kn,Fn,Di);break;case Fragment:Cn(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi);break;default:Mi&1?An(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi):Mi&6?Rn(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi):(Mi&64||Mi&128)&&Gi.process(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi,Ri)}Ti!=null&&$i&&setRef(Ti,Bn&&Bn.ref,Hi,Ai||Bn,!Ai)},fn=(Bn,Ai,Kn,Fn)=>{if(Bn==null)ke(Ai.el=Ve(Ai.children),Kn,Fn);else{const $i=Ai.el=Bn.el;Ai.children!==Bn.children&&Qe($i,Ai.children)}},pn=(Bn,Ai,Kn,Fn)=>{Bn==null?ke(Ai.el=Ze(Ai.children||""),Kn,Fn):Ai.el=Bn.el},gn=(Bn,Ai,Kn,Fn)=>{[Bn.el,Bn.anchor]=un(Bn.children,Ai,Kn,Fn,Bn.el,Bn.anchor)},yn=({el:Bn,anchor:Ai},Kn,Fn)=>{let $i;for(;Bn&&Bn!==Ai;)$i=an(Bn),ke(Bn,Kn,Fn),Bn=$i;ke(Ai,Kn,Fn)},vn=({el:Bn,anchor:Ai})=>{let Kn;for(;Bn&&Bn!==Ai;)Kn=an(Bn),Ge(Bn),Bn=Kn;Ge(Ai)},An=(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi)=>{Ai.type==="svg"?Di="svg":Ai.type==="math"&&(Di="mathml"),Bn==null?xn(Ai,Kn,Fn,$i,Hi,Di,zi,Bi):Mn(Bn,Ai,$i,Hi,Di,zi,Bi)},xn=(Bn,Ai,Kn,Fn,$i,Hi,Di,zi)=>{let Bi,Gi;const{props:Ti,shapeFlag:Mi,transition:Oi,dirs:Xi}=Bn;if(Bi=Bn.el=je(Bn.type,Hi,Ti&&Ti.is,Ti),Mi&8?en(Bi,Bn.children):Mi&16&&bn(Bn.children,Bi,null,Fn,$i,resolveChildrenNamespace(Bn,Hi),Di,zi),Xi&&invokeDirectiveHook(Bn,null,Fn,"created"),wn(Bi,Bn,Bn.scopeId,Di,Fn),Ti){for(const Pr in Ti)Pr!=="value"&&!isReservedProp(Pr)&&Be(Bi,Pr,null,Ti[Pr],Hi,Fn);"value"in Ti&&Be(Bi,"value",null,Ti.value,Hi),(Gi=Ti.onVnodeBeforeMount)&&invokeVNodeHook(Gi,Fn,Bn)}Xi&&invokeDirectiveHook(Bn,null,Fn,"beforeMount");const ar=needTransition($i,Oi);ar&&Oi.beforeEnter(Bi),ke(Bi,Ai,Kn),((Gi=Ti&&Ti.onVnodeMounted)||ar||Xi)&&queuePostRenderEffect(()=>{Gi&&invokeVNodeHook(Gi,Fn,Bn),ar&&Oi.enter(Bi),Xi&&invokeDirectiveHook(Bn,null,Fn,"mounted")},$i)},wn=(Bn,Ai,Kn,Fn,$i)=>{if(Kn&&cn(Bn,Kn),Fn)for(let Hi=0;Hi<Fn.length;Hi++)cn(Bn,Fn[Hi]);if($i){let Hi=$i.subTree;if(Ai===Hi||isSuspense(Hi.type)&&(Hi.ssContent===Ai||Hi.ssFallback===Ai)){const Di=$i.vnode;wn(Bn,Di,Di.scopeId,Di.slotScopeIds,$i.parent)}}},bn=(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi=0)=>{for(let Gi=Bi;Gi<Bn.length;Gi++){const Ti=Bn[Gi]=zi?cloneIfMounted(Bn[Gi]):normalizeVNode(Bn[Gi]);dn(null,Ti,Ai,Kn,Fn,$i,Hi,Di,zi)}},Mn=(Bn,Ai,Kn,Fn,$i,Hi,Di)=>{const zi=Ai.el=Bn.el;let{patchFlag:Bi,dynamicChildren:Gi,dirs:Ti}=Ai;Bi|=Bn.patchFlag&16;const Mi=Bn.props||EMPTY_OBJ,Oi=Ai.props||EMPTY_OBJ;let Xi;if(Kn&&toggleRecurse(Kn,!1),(Xi=Oi.onVnodeBeforeUpdate)&&invokeVNodeHook(Xi,Kn,Ai,Bn),Ti&&invokeDirectiveHook(Ai,Bn,Kn,"beforeUpdate"),Kn&&toggleRecurse(Kn,!0),(Mi.innerHTML&&Oi.innerHTML==null||Mi.textContent&&Oi.textContent==null)&&en(zi,""),Gi?Pn(Bn.dynamicChildren,Gi,zi,Kn,Fn,resolveChildrenNamespace(Ai,$i),Hi):Di||$n(Bn,Ai,zi,null,Kn,Fn,resolveChildrenNamespace(Ai,$i),Hi,!1),Bi>0){if(Bi&16)En(zi,Mi,Oi,Kn,$i);else if(Bi&2&&Mi.class!==Oi.class&&Be(zi,"class",null,Oi.class,$i),Bi&4&&Be(zi,"style",Mi.style,Oi.style,$i),Bi&8){const ar=Ai.dynamicProps;for(let Pr=0;Pr<ar.length;Pr++){const Rr=ar[Pr],Us=Mi[Rr],Vr=Oi[Rr];(Vr!==Us||Rr==="value")&&Be(zi,Rr,Us,Vr,$i,Kn)}}Bi&1&&Bn.children!==Ai.children&&en(zi,Ai.children)}else!Di&&Gi==null&&En(zi,Mi,Oi,Kn,$i);((Xi=Oi.onVnodeUpdated)||Ti)&&queuePostRenderEffect(()=>{Xi&&invokeVNodeHook(Xi,Kn,Ai,Bn),Ti&&invokeDirectiveHook(Ai,Bn,Kn,"updated")},Fn)},Pn=(Bn,Ai,Kn,Fn,$i,Hi,Di)=>{for(let zi=0;zi<Ai.length;zi++){const Bi=Bn[zi],Gi=Ai[zi],Ti=Bi.el&&(Bi.type===Fragment||!isSameVNodeType(Bi,Gi)||Bi.shapeFlag&70)?tn(Bi.el):Kn;dn(Bi,Gi,Ti,null,Fn,$i,Hi,Di,!0)}},En=(Bn,Ai,Kn,Fn,$i)=>{if(Ai!==Kn){if(Ai!==EMPTY_OBJ)for(const Hi in Ai)!isReservedProp(Hi)&&!(Hi in Kn)&&Be(Bn,Hi,Ai[Hi],null,$i,Fn);for(const Hi in Kn){if(isReservedProp(Hi))continue;const Di=Kn[Hi],zi=Ai[Hi];Di!==zi&&Hi!=="value"&&Be(Bn,Hi,zi,Di,$i,Fn)}"value"in Kn&&Be(Bn,"value",Ai.value,Kn.value,$i)}},Cn=(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi)=>{const Gi=Ai.el=Bn?Bn.el:Ve(""),Ti=Ai.anchor=Bn?Bn.anchor:Ve("");let{patchFlag:Mi,dynamicChildren:Oi,slotScopeIds:Xi}=Ai;Xi&&(zi=zi?zi.concat(Xi):Xi),Bn==null?(ke(Gi,Kn,Fn),ke(Ti,Kn,Fn),bn(Ai.children||[],Kn,Ti,$i,Hi,Di,zi,Bi)):Mi>0&&Mi&64&&Oi&&Bn.dynamicChildren?(Pn(Bn.dynamicChildren,Oi,Kn,$i,Hi,Di,zi),(Ai.key!=null||$i&&Ai===$i.subTree)&&traverseStaticChildren(Bn,Ai,!0)):$n(Bn,Ai,Kn,Ti,$i,Hi,Di,zi,Bi)},Rn=(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi)=>{Ai.slotScopeIds=zi,Bn==null?Ai.shapeFlag&512?$i.ctx.activate(Ai,Kn,Fn,Di,Bi):Tn(Ai,Kn,Fn,$i,Hi,Di,Bi):Nn(Bn,Ai,Bi)},Tn=(Bn,Ai,Kn,Fn,$i,Hi,Di)=>{const zi=Bn.component=createComponentInstance(Bn,Fn,$i);if(isKeepAlive(Bn)&&(zi.ctx.renderer=Ri),setupComponent(zi,!1,Di),zi.asyncDep){if($i&&$i.registerDep(zi,Gn,Di),!Bn.el){const Bi=zi.subTree=createVNode(Comment);pn(null,Bi,Ai,Kn)}}else Gn(zi,Bn,Ai,Kn,$i,Hi,Di)},Nn=(Bn,Ai,Kn)=>{const Fn=Ai.component=Bn.component;if(shouldUpdateComponent(Bn,Ai,Kn))if(Fn.asyncDep&&!Fn.asyncResolved){zn(Fn,Ai,Kn);return}else Fn.next=Ai,Fn.update();else Ai.el=Bn.el,Fn.vnode=Ai},Gn=(Bn,Ai,Kn,Fn,$i,Hi,Di)=>{const zi=()=>{if(Bn.isMounted){let{next:Mi,bu:Oi,u:Xi,parent:ar,vnode:Pr}=Bn;{const Js=locateNonHydratedAsyncRoot(Bn);if(Js){Mi&&(Mi.el=Pr.el,zn(Bn,Mi,Di)),Js.asyncDep.then(()=>{Bn.isUnmounted||zi()});return}}let Rr=Mi,Us;toggleRecurse(Bn,!1),Mi?(Mi.el=Pr.el,zn(Bn,Mi,Di)):Mi=Pr,Oi&&invokeArrayFns(Oi),(Us=Mi.props&&Mi.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Us,ar,Mi,Pr),toggleRecurse(Bn,!0);const Vr=renderComponentRoot(Bn),ro=Bn.subTree;Bn.subTree=Vr,dn(ro,Vr,tn(ro.el),_i(ro),Bn,$i,Hi),Mi.el=Vr.el,Rr===null&&updateHOCHostEl(Bn,Vr.el),Xi&&queuePostRenderEffect(Xi,$i),(Us=Mi.props&&Mi.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Us,ar,Mi,Pr),$i)}else{let Mi;const{el:Oi,props:Xi}=Ai,{bm:ar,m:Pr,parent:Rr,root:Us,type:Vr}=Bn,ro=isAsyncWrapper(Ai);if(toggleRecurse(Bn,!1),ar&&invokeArrayFns(ar),!ro&&(Mi=Xi&&Xi.onVnodeBeforeMount)&&invokeVNodeHook(Mi,Rr,Ai),toggleRecurse(Bn,!0),Oi&&Fr){const Js=()=>{Bn.subTree=renderComponentRoot(Bn),Fr(Oi,Bn.subTree,Bn,$i,null)};ro&&Vr.__asyncHydrate?Vr.__asyncHydrate(Oi,Bn,Js):Js()}else{Us.ce&&Us.ce._injectChildStyle(Vr);const Js=Bn.subTree=renderComponentRoot(Bn);dn(null,Js,Kn,Fn,Bn,$i,Hi),Ai.el=Js.el}if(Pr&&queuePostRenderEffect(Pr,$i),!ro&&(Mi=Xi&&Xi.onVnodeMounted)){const Js=Ai;queuePostRenderEffect(()=>invokeVNodeHook(Mi,Rr,Js),$i)}(Ai.shapeFlag&256||Rr&&isAsyncWrapper(Rr.vnode)&&Rr.vnode.shapeFlag&256)&&Bn.a&&queuePostRenderEffect(Bn.a,$i),Bn.isMounted=!0,Ai=Kn=Fn=null}};Bn.scope.on();const Bi=Bn.effect=new ReactiveEffect(zi);Bn.scope.off();const Gi=Bn.update=Bi.run.bind(Bi),Ti=Bn.job=Bi.runIfDirty.bind(Bi);Ti.i=Bn,Ti.id=Bn.uid,Bi.scheduler=()=>queueJob(Ti),toggleRecurse(Bn,!0),Gi()},zn=(Bn,Ai,Kn)=>{Ai.component=Bn;const Fn=Bn.vnode.props;Bn.vnode=Ai,Bn.next=null,updateProps(Bn,Ai.props,Fn,Kn),updateSlots(Bn,Ai.children,Kn),pauseTracking(),flushPreFlushCbs(Bn),resetTracking()},$n=(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi=!1)=>{const Gi=Bn&&Bn.children,Ti=Bn?Bn.shapeFlag:0,Mi=Ai.children,{patchFlag:Oi,shapeFlag:Xi}=Ai;if(Oi>0){if(Oi&128){Hn(Gi,Mi,Kn,Fn,$i,Hi,Di,zi,Bi);return}else if(Oi&256){Qn(Gi,Mi,Kn,Fn,$i,Hi,Di,zi,Bi);return}}Xi&8?(Ti&16&&Si(Gi,$i,Hi),Mi!==Gi&&en(Kn,Mi)):Ti&16?Xi&16?Hn(Gi,Mi,Kn,Fn,$i,Hi,Di,zi,Bi):Si(Gi,$i,Hi,!0):(Ti&8&&en(Kn,""),Xi&16&&bn(Mi,Kn,Fn,$i,Hi,Di,zi,Bi))},Qn=(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi)=>{Bn=Bn||EMPTY_ARR,Ai=Ai||EMPTY_ARR;const Gi=Bn.length,Ti=Ai.length,Mi=Math.min(Gi,Ti);let Oi;for(Oi=0;Oi<Mi;Oi++){const Xi=Ai[Oi]=Bi?cloneIfMounted(Ai[Oi]):normalizeVNode(Ai[Oi]);dn(Bn[Oi],Xi,Kn,null,$i,Hi,Di,zi,Bi)}Gi>Ti?Si(Bn,$i,Hi,!0,!1,Mi):bn(Ai,Kn,Fn,$i,Hi,Di,zi,Bi,Mi)},Hn=(Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi)=>{let Gi=0;const Ti=Ai.length;let Mi=Bn.length-1,Oi=Ti-1;for(;Gi<=Mi&&Gi<=Oi;){const Xi=Bn[Gi],ar=Ai[Gi]=Bi?cloneIfMounted(Ai[Gi]):normalizeVNode(Ai[Gi]);if(isSameVNodeType(Xi,ar))dn(Xi,ar,Kn,null,$i,Hi,Di,zi,Bi);else break;Gi++}for(;Gi<=Mi&&Gi<=Oi;){const Xi=Bn[Mi],ar=Ai[Oi]=Bi?cloneIfMounted(Ai[Oi]):normalizeVNode(Ai[Oi]);if(isSameVNodeType(Xi,ar))dn(Xi,ar,Kn,null,$i,Hi,Di,zi,Bi);else break;Mi--,Oi--}if(Gi>Mi){if(Gi<=Oi){const Xi=Oi+1,ar=Xi<Ti?Ai[Xi].el:Fn;for(;Gi<=Oi;)dn(null,Ai[Gi]=Bi?cloneIfMounted(Ai[Gi]):normalizeVNode(Ai[Gi]),Kn,ar,$i,Hi,Di,zi,Bi),Gi++}}else if(Gi>Oi)for(;Gi<=Mi;)On(Bn[Gi],$i,Hi,!0),Gi++;else{const Xi=Gi,ar=Gi,Pr=new Map;for(Gi=ar;Gi<=Oi;Gi++){const Ks=Ai[Gi]=Bi?cloneIfMounted(Ai[Gi]):normalizeVNode(Ai[Gi]);Ks.key!=null&&Pr.set(Ks.key,Gi)}let Rr,Us=0;const Vr=Oi-ar+1;let ro=!1,Js=0;const fo=new Array(Vr);for(Gi=0;Gi<Vr;Gi++)fo[Gi]=0;for(Gi=Xi;Gi<=Mi;Gi++){const Ks=Bn[Gi];if(Us>=Vr){On(Ks,$i,Hi,!0);continue}let oo;if(Ks.key!=null)oo=Pr.get(Ks.key);else for(Rr=ar;Rr<=Oi;Rr++)if(fo[Rr-ar]===0&&isSameVNodeType(Ks,Ai[Rr])){oo=Rr;break}oo===void 0?On(Ks,$i,Hi,!0):(fo[oo-ar]=Gi+1,oo>=Js?Js=oo:ro=!0,dn(Ks,Ai[oo],Kn,null,$i,Hi,Di,zi,Bi),Us++)}const lo=ro?getSequence(fo):EMPTY_ARR;for(Rr=lo.length-1,Gi=Vr-1;Gi>=0;Gi--){const Ks=ar+Gi,oo=Ai[Ks],no=Ks+1<Ti?Ai[Ks+1].el:Fn;fo[Gi]===0?dn(null,oo,Kn,no,$i,Hi,Di,zi,Bi):ro&&(Rr<0||Gi!==lo[Rr]?Ni(oo,Kn,no,2):Rr--)}}},Ni=(Bn,Ai,Kn,Fn,$i=null)=>{const{el:Hi,type:Di,transition:zi,children:Bi,shapeFlag:Gi}=Bn;if(Gi&6){Ni(Bn.component.subTree,Ai,Kn,Fn);return}if(Gi&128){Bn.suspense.move(Ai,Kn,Fn);return}if(Gi&64){Di.move(Bn,Ai,Kn,Ri);return}if(Di===Fragment){ke(Hi,Ai,Kn);for(let Mi=0;Mi<Bi.length;Mi++)Ni(Bi[Mi],Ai,Kn,Fn);ke(Bn.anchor,Ai,Kn);return}if(Di===Static){yn(Bn,Ai,Kn);return}if(Fn!==2&&Gi&1&&zi)if(Fn===0)zi.beforeEnter(Hi),ke(Hi,Ai,Kn),queuePostRenderEffect(()=>zi.enter(Hi),$i);else{const{leave:Mi,delayLeave:Oi,afterLeave:Xi}=zi,ar=()=>ke(Hi,Ai,Kn),Pr=()=>{Mi(Hi,()=>{ar(),Xi&&Xi()})};Oi?Oi(Hi,ar,Pr):Pr()}else ke(Hi,Ai,Kn)},On=(Bn,Ai,Kn,Fn=!1,$i=!1)=>{const{type:Hi,props:Di,ref:zi,children:Bi,dynamicChildren:Gi,shapeFlag:Ti,patchFlag:Mi,dirs:Oi,cacheIndex:Xi}=Bn;if(Mi===-2&&($i=!1),zi!=null&&setRef(zi,null,Kn,Bn,!0),Xi!=null&&(Ai.renderCache[Xi]=void 0),Ti&256){Ai.ctx.deactivate(Bn);return}const ar=Ti&1&&Oi,Pr=!isAsyncWrapper(Bn);let Rr;if(Pr&&(Rr=Di&&Di.onVnodeBeforeUnmount)&&invokeVNodeHook(Rr,Ai,Bn),Ti&6)Ci(Bn.component,Kn,Fn);else{if(Ti&128){Bn.suspense.unmount(Kn,Fn);return}ar&&invokeDirectiveHook(Bn,null,Ai,"beforeUnmount"),Ti&64?Bn.type.remove(Bn,Ai,Kn,Ri,Fn):Gi&&!Gi.hasOnce&&(Hi!==Fragment||Mi>0&&Mi&64)?Si(Gi,Ai,Kn,!1,!0):(Hi===Fragment&&Mi&384||!$i&&Ti&16)&&Si(Bi,Ai,Kn),Fn&&qn(Bn)}(Pr&&(Rr=Di&&Di.onVnodeUnmounted)||ar)&&queuePostRenderEffect(()=>{Rr&&invokeVNodeHook(Rr,Ai,Bn),ar&&invokeDirectiveHook(Bn,null,Ai,"unmounted")},Kn)},qn=Bn=>{const{type:Ai,el:Kn,anchor:Fn,transition:$i}=Bn;if(Ai===Fragment){Un(Kn,Fn);return}if(Ai===Static){vn(Bn);return}const Hi=()=>{Ge(Kn),$i&&!$i.persisted&&$i.afterLeave&&$i.afterLeave()};if(Bn.shapeFlag&1&&$i&&!$i.persisted){const{leave:Di,delayLeave:zi}=$i,Bi=()=>Di(Kn,Hi);zi?zi(Bn.el,Hi,Bi):Bi()}else Hi()},Un=(Bn,Ai)=>{let Kn;for(;Bn!==Ai;)Kn=an(Bn),Ge(Bn),Bn=Kn;Ge(Ai)},Ci=(Bn,Ai,Kn)=>{const{bum:Fn,scope:$i,job:Hi,subTree:Di,um:zi,m:Bi,a:Gi}=Bn;invalidateMount(Bi),invalidateMount(Gi),Fn&&invokeArrayFns(Fn),$i.stop(),Hi&&(Hi.flags|=8,On(Di,Bn,Ai,Kn)),zi&&queuePostRenderEffect(zi,Ai),queuePostRenderEffect(()=>{Bn.isUnmounted=!0},Ai),Ai&&Ai.pendingBranch&&!Ai.isUnmounted&&Bn.asyncDep&&!Bn.asyncResolved&&Bn.suspenseId===Ai.pendingId&&(Ai.deps--,Ai.deps===0&&Ai.resolve())},Si=(Bn,Ai,Kn,Fn=!1,$i=!1,Hi=0)=>{for(let Di=Hi;Di<Bn.length;Di++)On(Bn[Di],Ai,Kn,Fn,$i)},_i=Bn=>{if(Bn.shapeFlag&6)return _i(Bn.component.subTree);if(Bn.shapeFlag&128)return Bn.suspense.next();const Ai=an(Bn.anchor||Bn.el),Kn=Ai&&Ai[TeleportEndKey];return Kn?an(Kn):Ai};let Ii=!1;const Li=(Bn,Ai,Kn)=>{Bn==null?Ai._vnode&&On(Ai._vnode,null,null,!0):dn(Ai._vnode||null,Bn,Ai,null,null,null,Kn),Ai._vnode=Bn,Ii||(Ii=!0,flushPreFlushCbs(),flushPostFlushCbs(),Ii=!1)},Ri={p:dn,um:On,m:Ni,r:qn,mt:Tn,mc:bn,pc:$n,pbc:Pn,n:_i,o:Oe};let tr,Fr;return e&&([tr,Fr]=e(Ri)),{render:Li,hydrate:tr,createApp:createAppAPI(Li,tr)}}function resolveChildrenNamespace({type:Oe,props:e},t){return t==="svg"&&Oe==="foreignObject"||t==="mathml"&&Oe==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function toggleRecurse({effect:Oe,job:e},t){t?(Oe.flags|=32,e.flags|=4):(Oe.flags&=-33,e.flags&=-5)}function needTransition(Oe,e){return(!Oe||Oe&&!Oe.pendingBranch)&&e&&!e.persisted}function traverseStaticChildren(Oe,e,t=!1){const ke=Oe.children,Ge=e.children;if(isArray$1(ke)&&isArray$1(Ge))for(let Be=0;Be<ke.length;Be++){const je=ke[Be];let Ve=Ge[Be];Ve.shapeFlag&1&&!Ve.dynamicChildren&&((Ve.patchFlag<=0||Ve.patchFlag===32)&&(Ve=Ge[Be]=cloneIfMounted(Ge[Be]),Ve.el=je.el),!t&&Ve.patchFlag!==-2&&traverseStaticChildren(je,Ve)),Ve.type===Text$1&&(Ve.el=je.el)}}function getSequence(Oe){const e=Oe.slice(),t=[0];let ke,Ge,Be,je,Ve;const Ze=Oe.length;for(ke=0;ke<Ze;ke++){const Qe=Oe[ke];if(Qe!==0){if(Ge=t[t.length-1],Oe[Ge]<Qe){e[ke]=Ge,t.push(ke);continue}for(Be=0,je=t.length-1;Be<je;)Ve=Be+je>>1,Oe[t[Ve]]<Qe?Be=Ve+1:je=Ve;Qe<Oe[t[Be]]&&(Be>0&&(e[ke]=t[Be-1]),t[Be]=ke)}}for(Be=t.length,je=t[Be-1];Be-- >0;)t[Be]=je,je=e[je];return t}function locateNonHydratedAsyncRoot(Oe){const e=Oe.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:locateNonHydratedAsyncRoot(e)}function invalidateMount(Oe){if(Oe)for(let e=0;e<Oe.length;e++)Oe[e].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(Oe,e){return doWatch(Oe,null,e)}function watchPostEffect(Oe,e){return doWatch(Oe,null,{flush:"post"})}function watchSyncEffect(Oe,e){return doWatch(Oe,null,{flush:"sync"})}function watch(Oe,e,t){return doWatch(Oe,e,t)}function doWatch(Oe,e,t=EMPTY_OBJ){const{immediate:ke,deep:Ge,flush:Be,once:je}=t,Ve=extend$5({},t),Ze=e&&ke||!e&&Be!=="post";let Qe;if(isInSSRComponentSetup){if(Be==="sync"){const cn=useSSRContext();Qe=cn.__watcherHandles||(cn.__watcherHandles=[])}else if(!Ze){const cn=()=>{};return cn.stop=NOOP,cn.resume=NOOP,cn.pause=NOOP,cn}}const en=currentInstance;Ve.call=(cn,un,dn)=>callWithAsyncErrorHandling(cn,en,un,dn);let tn=!1;Be==="post"?Ve.scheduler=cn=>{queuePostRenderEffect(cn,en&&en.suspense)}:Be!=="sync"&&(tn=!0,Ve.scheduler=(cn,un)=>{un?cn():queueJob(cn)}),Ve.augmentJob=cn=>{e&&(cn.flags|=4),tn&&(cn.flags|=2,en&&(cn.id=en.uid,cn.i=en))};const an=watch$1(Oe,e,Ve);return isInSSRComponentSetup&&(Qe?Qe.push(an):Ze&&an()),an}function instanceWatch(Oe,e,t){const ke=this.proxy,Ge=isString(Oe)?Oe.includes(".")?createPathGetter(ke,Oe):()=>ke[Oe]:Oe.bind(ke,ke);let Be;isFunction$1(e)?Be=e:(Be=e.handler,t=e);const je=setCurrentInstance(this),Ve=doWatch(Ge,Be.bind(ke),t);return je(),Ve}function createPathGetter(Oe,e){const t=e.split(".");return()=>{let ke=Oe;for(let Ge=0;Ge<t.length&&ke;Ge++)ke=ke[t[Ge]];return ke}}function useModel(Oe,e,t=EMPTY_OBJ){const ke=getCurrentInstance(),Ge=camelize(e),Be=hyphenate(e),je=getModelModifiers(Oe,Ge),Ve=customRef((Ze,Qe)=>{let en,tn=EMPTY_OBJ,an;return watchSyncEffect(()=>{const cn=Oe[Ge];hasChanged(en,cn)&&(en=cn,Qe())}),{get(){return Ze(),t.get?t.get(en):en},set(cn){const un=t.set?t.set(cn):cn;if(!hasChanged(un,en)&&!(tn!==EMPTY_OBJ&&hasChanged(cn,tn)))return;const dn=ke.vnode.props;dn&&(e in dn||Ge in dn||Be in dn)&&(`onUpdate:${e}`in dn||`onUpdate:${Ge}`in dn||`onUpdate:${Be}`in dn)||(en=cn,Qe()),ke.emit(`update:${e}`,un),hasChanged(cn,un)&&hasChanged(cn,tn)&&!hasChanged(un,an)&&Qe(),tn=cn,an=un}}});return Ve[Symbol.iterator]=()=>{let Ze=0;return{next(){return Ze<2?{value:Ze++?je||EMPTY_OBJ:Ve,done:!1}:{done:!0}}}},Ve}const getModelModifiers=(Oe,e)=>e==="modelValue"||e==="model-value"?Oe.modelModifiers:Oe[`${e}Modifiers`]||Oe[`${camelize(e)}Modifiers`]||Oe[`${hyphenate(e)}Modifiers`];function emit(Oe,e,...t){if(Oe.isUnmounted)return;const ke=Oe.vnode.props||EMPTY_OBJ;let Ge=t;const Be=e.startsWith("update:"),je=Be&&getModelModifiers(ke,e.slice(7));je&&(je.trim&&(Ge=t.map(en=>isString(en)?en.trim():en)),je.number&&(Ge=t.map(looseToNumber)));let Ve,Ze=ke[Ve=toHandlerKey(e)]||ke[Ve=toHandlerKey(camelize(e))];!Ze&&Be&&(Ze=ke[Ve=toHandlerKey(hyphenate(e))]),Ze&&callWithAsyncErrorHandling(Ze,Oe,6,Ge);const Qe=ke[Ve+"Once"];if(Qe){if(!Oe.emitted)Oe.emitted={};else if(Oe.emitted[Ve])return;Oe.emitted[Ve]=!0,callWithAsyncErrorHandling(Qe,Oe,6,Ge)}}function normalizeEmitsOptions(Oe,e,t=!1){const ke=e.emitsCache,Ge=ke.get(Oe);if(Ge!==void 0)return Ge;const Be=Oe.emits;let je={},Ve=!1;if(!isFunction$1(Oe)){const Ze=Qe=>{const en=normalizeEmitsOptions(Qe,e,!0);en&&(Ve=!0,extend$5(je,en))};!t&&e.mixins.length&&e.mixins.forEach(Ze),Oe.extends&&Ze(Oe.extends),Oe.mixins&&Oe.mixins.forEach(Ze)}return!Be&&!Ve?(isObject$1(Oe)&&ke.set(Oe,null),null):(isArray$1(Be)?Be.forEach(Ze=>je[Ze]=null):extend$5(je,Be),isObject$1(Oe)&&ke.set(Oe,je),je)}function isEmitListener(Oe,e){return!Oe||!isOn(e)?!1:(e=e.slice(2).replace(/Once$/,""),hasOwn(Oe,e[0].toLowerCase()+e.slice(1))||hasOwn(Oe,hyphenate(e))||hasOwn(Oe,e))}function markAttrsAccessed(){}function renderComponentRoot(Oe){const{type:e,vnode:t,proxy:ke,withProxy:Ge,propsOptions:[Be],slots:je,attrs:Ve,emit:Ze,render:Qe,renderCache:en,props:tn,data:an,setupState:cn,ctx:un,inheritAttrs:dn}=Oe,fn=setCurrentRenderingInstance(Oe);let pn,gn;try{if(t.shapeFlag&4){const vn=Ge||ke,An=vn;pn=normalizeVNode(Qe.call(An,vn,en,tn,cn,an,un)),gn=Ve}else{const vn=e;pn=normalizeVNode(vn.length>1?vn(tn,{attrs:Ve,slots:je,emit:Ze}):vn(tn,null)),gn=e.props?Ve:getFunctionalFallthrough(Ve)}}catch(vn){blockStack.length=0,handleError(vn,Oe,1),pn=createVNode(Comment)}let yn=pn;if(gn&&dn!==!1){const vn=Object.keys(gn),{shapeFlag:An}=yn;vn.length&&An&7&&(Be&&vn.some(isModelListener)&&(gn=filterModelListeners(gn,Be)),yn=cloneVNode(yn,gn,!1,!0))}return t.dirs&&(yn=cloneVNode(yn,null,!1,!0),yn.dirs=yn.dirs?yn.dirs.concat(t.dirs):t.dirs),t.transition&&setTransitionHooks(yn,t.transition),pn=yn,setCurrentRenderingInstance(fn),pn}function filterSingleRoot(Oe,e=!0){let t;for(let ke=0;ke<Oe.length;ke++){const Ge=Oe[ke];if(isVNode(Ge)){if(Ge.type!==Comment||Ge.children==="v-if"){if(t)return;t=Ge}}else return}return t}const getFunctionalFallthrough=Oe=>{let e;for(const t in Oe)(t==="class"||t==="style"||isOn(t))&&((e||(e={}))[t]=Oe[t]);return e},filterModelListeners=(Oe,e)=>{const t={};for(const ke in Oe)(!isModelListener(ke)||!(ke.slice(9)in e))&&(t[ke]=Oe[ke]);return t};function shouldUpdateComponent(Oe,e,t){const{props:ke,children:Ge,component:Be}=Oe,{props:je,children:Ve,patchFlag:Ze}=e,Qe=Be.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&Ze>=0){if(Ze&1024)return!0;if(Ze&16)return ke?hasPropsChanged(ke,je,Qe):!!je;if(Ze&8){const en=e.dynamicProps;for(let tn=0;tn<en.length;tn++){const an=en[tn];if(je[an]!==ke[an]&&!isEmitListener(Qe,an))return!0}}}else return(Ge||Ve)&&(!Ve||!Ve.$stable)?!0:ke===je?!1:ke?je?hasPropsChanged(ke,je,Qe):!0:!!je;return!1}function hasPropsChanged(Oe,e,t){const ke=Object.keys(e);if(ke.length!==Object.keys(Oe).length)return!0;for(let Ge=0;Ge<ke.length;Ge++){const Be=ke[Ge];if(e[Be]!==Oe[Be]&&!isEmitListener(t,Be))return!0}return!1}function updateHOCHostEl({vnode:Oe,parent:e},t){for(;e;){const ke=e.subTree;if(ke.suspense&&ke.suspense.activeBranch===Oe&&(ke.el=Oe.el),ke===Oe)(Oe=e.vnode).el=t,e=e.parent;else break}}const isSuspense=Oe=>Oe.__isSuspense;let suspenseId=0;const SuspenseImpl={name:"Suspense",__isSuspense:!0,process(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe){if(Oe==null)mountSuspense(e,t,ke,Ge,Be,je,Ve,Ze,Qe);else{if(Be&&Be.deps>0&&!Oe.suspense.isInFallback){e.suspense=Oe.suspense,e.suspense.vnode=e,e.el=Oe.el;return}patchSuspense(Oe,e,t,ke,Ge,je,Ve,Ze,Qe)}},hydrate:hydrateSuspense,normalize:normalizeSuspenseChildren},Suspense=SuspenseImpl;function triggerEvent(Oe,e){const t=Oe.props&&Oe.props[e];isFunction$1(t)&&t()}function mountSuspense(Oe,e,t,ke,Ge,Be,je,Ve,Ze){const{p:Qe,o:{createElement:en}}=Ze,tn=en("div"),an=Oe.suspense=createSuspenseBoundary(Oe,Ge,ke,e,tn,t,Be,je,Ve,Ze);Qe(null,an.pendingBranch=Oe.ssContent,tn,null,ke,an,Be,je),an.deps>0?(triggerEvent(Oe,"onPending"),triggerEvent(Oe,"onFallback"),Qe(null,Oe.ssFallback,e,t,ke,null,Be,je),setActiveBranch(an,Oe.ssFallback)):an.resolve(!1,!0)}function patchSuspense(Oe,e,t,ke,Ge,Be,je,Ve,{p:Ze,um:Qe,o:{createElement:en}}){const tn=e.suspense=Oe.suspense;tn.vnode=e,e.el=Oe.el;const an=e.ssContent,cn=e.ssFallback,{activeBranch:un,pendingBranch:dn,isInFallback:fn,isHydrating:pn}=tn;if(dn)tn.pendingBranch=an,isSameVNodeType(an,dn)?(Ze(dn,an,tn.hiddenContainer,null,Ge,tn,Be,je,Ve),tn.deps<=0?tn.resolve():fn&&(pn||(Ze(un,cn,t,ke,Ge,null,Be,je,Ve),setActiveBranch(tn,cn)))):(tn.pendingId=suspenseId++,pn?(tn.isHydrating=!1,tn.activeBranch=dn):Qe(dn,Ge,tn),tn.deps=0,tn.effects.length=0,tn.hiddenContainer=en("div"),fn?(Ze(null,an,tn.hiddenContainer,null,Ge,tn,Be,je,Ve),tn.deps<=0?tn.resolve():(Ze(un,cn,t,ke,Ge,null,Be,je,Ve),setActiveBranch(tn,cn))):un&&isSameVNodeType(an,un)?(Ze(un,an,t,ke,Ge,tn,Be,je,Ve),tn.resolve(!0)):(Ze(null,an,tn.hiddenContainer,null,Ge,tn,Be,je,Ve),tn.deps<=0&&tn.resolve()));else if(un&&isSameVNodeType(an,un))Ze(un,an,t,ke,Ge,tn,Be,je,Ve),setActiveBranch(tn,an);else if(triggerEvent(e,"onPending"),tn.pendingBranch=an,an.shapeFlag&512?tn.pendingId=an.component.suspenseId:tn.pendingId=suspenseId++,Ze(null,an,tn.hiddenContainer,null,Ge,tn,Be,je,Ve),tn.deps<=0)tn.resolve();else{const{timeout:gn,pendingId:yn}=tn;gn>0?setTimeout(()=>{tn.pendingId===yn&&tn.fallback(cn)},gn):gn===0&&tn.fallback(cn)}}function createSuspenseBoundary(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe,en=!1){const{p:tn,m:an,um:cn,n:un,o:{parentNode:dn,remove:fn}}=Qe;let pn;const gn=isVNodeSuspensible(Oe);gn&&e&&e.pendingBranch&&(pn=e.pendingId,e.deps++);const yn=Oe.props?toNumber(Oe.props.timeout):void 0,vn=Be,An={vnode:Oe,parent:e,parentComponent:t,namespace:je,container:ke,hiddenContainer:Ge,deps:0,pendingId:suspenseId++,timeout:typeof yn=="number"?yn:-1,activeBranch:null,pendingBranch:null,isInFallback:!en,isHydrating:en,isUnmounted:!1,effects:[],resolve(xn=!1,wn=!1){const{vnode:bn,activeBranch:Mn,pendingBranch:Pn,pendingId:En,effects:Cn,parentComponent:Rn,container:Tn}=An;let Nn=!1;An.isHydrating?An.isHydrating=!1:xn||(Nn=Mn&&Pn.transition&&Pn.transition.mode==="out-in",Nn&&(Mn.transition.afterLeave=()=>{En===An.pendingId&&(an(Pn,Tn,Be===vn?un(Mn):Be,0),queuePostFlushCb(Cn))}),Mn&&(dn(Mn.el)===Tn&&(Be=un(Mn)),cn(Mn,Rn,An,!0)),Nn||an(Pn,Tn,Be,0)),setActiveBranch(An,Pn),An.pendingBranch=null,An.isInFallback=!1;let Gn=An.parent,zn=!1;for(;Gn;){if(Gn.pendingBranch){Gn.effects.push(...Cn),zn=!0;break}Gn=Gn.parent}!zn&&!Nn&&queuePostFlushCb(Cn),An.effects=[],gn&&e&&e.pendingBranch&&pn===e.pendingId&&(e.deps--,e.deps===0&&!wn&&e.resolve()),triggerEvent(bn,"onResolve")},fallback(xn){if(!An.pendingBranch)return;const{vnode:wn,activeBranch:bn,parentComponent:Mn,container:Pn,namespace:En}=An;triggerEvent(wn,"onFallback");const Cn=un(bn),Rn=()=>{An.isInFallback&&(tn(null,xn,Pn,Cn,Mn,null,En,Ve,Ze),setActiveBranch(An,xn))},Tn=xn.transition&&xn.transition.mode==="out-in";Tn&&(bn.transition.afterLeave=Rn),An.isInFallback=!0,cn(bn,Mn,null,!0),Tn||Rn()},move(xn,wn,bn){An.activeBranch&&an(An.activeBranch,xn,wn,bn),An.container=xn},next(){return An.activeBranch&&un(An.activeBranch)},registerDep(xn,wn,bn){const Mn=!!An.pendingBranch;Mn&&An.deps++;const Pn=xn.vnode.el;xn.asyncDep.catch(En=>{handleError(En,xn,0)}).then(En=>{if(xn.isUnmounted||An.isUnmounted||An.pendingId!==xn.suspenseId)return;xn.asyncResolved=!0;const{vnode:Cn}=xn;handleSetupResult(xn,En,!1),Pn&&(Cn.el=Pn);const Rn=!Pn&&xn.subTree.el;wn(xn,Cn,dn(Pn||xn.subTree.el),Pn?null:un(xn.subTree),An,je,bn),Rn&&fn(Rn),updateHOCHostEl(xn,Cn.el),Mn&&--An.deps===0&&An.resolve()})},unmount(xn,wn){An.isUnmounted=!0,An.activeBranch&&cn(An.activeBranch,t,xn,wn),An.pendingBranch&&cn(An.pendingBranch,t,xn,wn)}};return An}function hydrateSuspense(Oe,e,t,ke,Ge,Be,je,Ve,Ze){const Qe=e.suspense=createSuspenseBoundary(e,ke,t,Oe.parentNode,document.createElement("div"),null,Ge,Be,je,Ve,!0),en=Ze(Oe,Qe.pendingBranch=e.ssContent,t,Qe,Be,je);return Qe.deps===0&&Qe.resolve(!1,!0),en}function normalizeSuspenseChildren(Oe){const{shapeFlag:e,children:t}=Oe,ke=e&32;Oe.ssContent=normalizeSuspenseSlot(ke?t.default:t),Oe.ssFallback=ke?normalizeSuspenseSlot(t.fallback):createVNode(Comment)}function normalizeSuspenseSlot(Oe){let e;if(isFunction$1(Oe)){const t=isBlockTreeEnabled&&Oe._c;t&&(Oe._d=!1,openBlock()),Oe=Oe(),t&&(Oe._d=!0,e=currentBlock,closeBlock())}return isArray$1(Oe)&&(Oe=filterSingleRoot(Oe)),Oe=normalizeVNode(Oe),e&&!Oe.dynamicChildren&&(Oe.dynamicChildren=e.filter(t=>t!==Oe)),Oe}function queueEffectWithSuspense(Oe,e){e&&e.pendingBranch?isArray$1(Oe)?e.effects.push(...Oe):e.effects.push(Oe):queuePostFlushCb(Oe)}function setActiveBranch(Oe,e){Oe.activeBranch=e;const{vnode:t,parentComponent:ke}=Oe;let Ge=e.el;for(;!Ge&&e.component;)e=e.component.subTree,Ge=e.el;t.el=Ge,ke&&ke.subTree===t&&(ke.vnode.el=Ge,updateHOCHostEl(ke,Ge))}function isVNodeSuspensible(Oe){const e=Oe.props&&Oe.props.suspensible;return e!=null&&e!==!1}const Fragment=Symbol.for("v-fgt"),Text$1=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(Oe=!1){blockStack.push(currentBlock=Oe?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(Oe,e=!1){isBlockTreeEnabled+=Oe,Oe<0&&currentBlock&&e&&(currentBlock.hasOnce=!0)}function setupBlock(Oe){return Oe.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(Oe),Oe}function createElementBlock(Oe,e,t,ke,Ge,Be){return setupBlock(createBaseVNode(Oe,e,t,ke,Ge,Be,!0))}function createBlock(Oe,e,t,ke,Ge){return setupBlock(createVNode(Oe,e,t,ke,Ge,!0))}function isVNode(Oe){return Oe?Oe.__v_isVNode===!0:!1}function isSameVNodeType(Oe,e){return Oe.type===e.type&&Oe.key===e.key}function transformVNodeArgs(Oe){}const normalizeKey=({key:Oe})=>Oe??null,normalizeRef=({ref:Oe,ref_key:e,ref_for:t})=>(typeof Oe=="number"&&(Oe=""+Oe),Oe!=null?isString(Oe)||isRef(Oe)||isFunction$1(Oe)?{i:currentRenderingInstance,r:Oe,k:e,f:!!t}:Oe:null);function createBaseVNode(Oe,e=null,t=null,ke=0,Ge=null,Be=Oe===Fragment?0:1,je=!1,Ve=!1){const Ze={__v_isVNode:!0,__v_skip:!0,type:Oe,props:e,key:e&&normalizeKey(e),ref:e&&normalizeRef(e),scopeId:currentScopeId,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:Be,patchFlag:ke,dynamicProps:Ge,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return Ve?(normalizeChildren(Ze,t),Be&128&&Oe.normalize(Ze)):t&&(Ze.shapeFlag|=isString(t)?8:16),isBlockTreeEnabled>0&&!je&&currentBlock&&(Ze.patchFlag>0||Be&6)&&Ze.patchFlag!==32&&currentBlock.push(Ze),Ze}const createVNode=_createVNode;function _createVNode(Oe,e=null,t=null,ke=0,Ge=null,Be=!1){if((!Oe||Oe===NULL_DYNAMIC_COMPONENT)&&(Oe=Comment),isVNode(Oe)){const Ve=cloneVNode(Oe,e,!0);return t&&normalizeChildren(Ve,t),isBlockTreeEnabled>0&&!Be&&currentBlock&&(Ve.shapeFlag&6?currentBlock[currentBlock.indexOf(Oe)]=Ve:currentBlock.push(Ve)),Ve.patchFlag=-2,Ve}if(isClassComponent(Oe)&&(Oe=Oe.__vccOpts),e){e=guardReactiveProps(e);let{class:Ve,style:Ze}=e;Ve&&!isString(Ve)&&(e.class=normalizeClass(Ve)),isObject$1(Ze)&&(isProxy(Ze)&&!isArray$1(Ze)&&(Ze=extend$5({},Ze)),e.style=normalizeStyle(Ze))}const je=isString(Oe)?1:isSuspense(Oe)?128:isTeleport(Oe)?64:isObject$1(Oe)?4:isFunction$1(Oe)?2:0;return createBaseVNode(Oe,e,t,ke,Ge,je,Be,!0)}function guardReactiveProps(Oe){return Oe?isProxy(Oe)||isInternalObject(Oe)?extend$5({},Oe):Oe:null}function cloneVNode(Oe,e,t=!1,ke=!1){const{props:Ge,ref:Be,patchFlag:je,children:Ve,transition:Ze}=Oe,Qe=e?mergeProps(Ge||{},e):Ge,en={__v_isVNode:!0,__v_skip:!0,type:Oe.type,props:Qe,key:Qe&&normalizeKey(Qe),ref:e&&e.ref?t&&Be?isArray$1(Be)?Be.concat(normalizeRef(e)):[Be,normalizeRef(e)]:normalizeRef(e):Be,scopeId:Oe.scopeId,slotScopeIds:Oe.slotScopeIds,children:Ve,target:Oe.target,targetStart:Oe.targetStart,targetAnchor:Oe.targetAnchor,staticCount:Oe.staticCount,shapeFlag:Oe.shapeFlag,patchFlag:e&&Oe.type!==Fragment?je===-1?16:je|16:je,dynamicProps:Oe.dynamicProps,dynamicChildren:Oe.dynamicChildren,appContext:Oe.appContext,dirs:Oe.dirs,transition:Ze,component:Oe.component,suspense:Oe.suspense,ssContent:Oe.ssContent&&cloneVNode(Oe.ssContent),ssFallback:Oe.ssFallback&&cloneVNode(Oe.ssFallback),el:Oe.el,anchor:Oe.anchor,ctx:Oe.ctx,ce:Oe.ce};return Ze&&ke&&setTransitionHooks(en,Ze.clone(en)),en}function createTextVNode(Oe=" ",e=0){return createVNode(Text$1,null,Oe,e)}function createStaticVNode(Oe,e){const t=createVNode(Static,null,Oe);return t.staticCount=e,t}function createCommentVNode(Oe="",e=!1){return e?(openBlock(),createBlock(Comment,null,Oe)):createVNode(Comment,null,Oe)}function normalizeVNode(Oe){return Oe==null||typeof Oe=="boolean"?createVNode(Comment):isArray$1(Oe)?createVNode(Fragment,null,Oe.slice()):isVNode(Oe)?cloneIfMounted(Oe):createVNode(Text$1,null,String(Oe))}function cloneIfMounted(Oe){return Oe.el===null&&Oe.patchFlag!==-1||Oe.memo?Oe:cloneVNode(Oe)}function normalizeChildren(Oe,e){let t=0;const{shapeFlag:ke}=Oe;if(e==null)e=null;else if(isArray$1(e))t=16;else if(typeof e=="object")if(ke&65){const Ge=e.default;Ge&&(Ge._c&&(Ge._d=!1),normalizeChildren(Oe,Ge()),Ge._c&&(Ge._d=!0));return}else{t=32;const Ge=e._;!Ge&&!isInternalObject(e)?e._ctx=currentRenderingInstance:Ge===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?e._=1:(e._=2,Oe.patchFlag|=1024))}else isFunction$1(e)?(e={default:e,_ctx:currentRenderingInstance},t=32):(e=String(e),ke&64?(t=16,e=[createTextVNode(e)]):t=8);Oe.children=e,Oe.shapeFlag|=t}function mergeProps(...Oe){const e={};for(let t=0;t<Oe.length;t++){const ke=Oe[t];for(const Ge in ke)if(Ge==="class")e.class!==ke.class&&(e.class=normalizeClass([e.class,ke.class]));else if(Ge==="style")e.style=normalizeStyle([e.style,ke.style]);else if(isOn(Ge)){const Be=e[Ge],je=ke[Ge];je&&Be!==je&&!(isArray$1(Be)&&Be.includes(je))&&(e[Ge]=Be?[].concat(Be,je):je)}else Ge!==""&&(e[Ge]=ke[Ge])}return e}function invokeVNodeHook(Oe,e,t,ke=null){callWithAsyncErrorHandling(Oe,e,7,[t,ke])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(Oe,e,t){const ke=Oe.type,Ge=(e?e.appContext:Oe.appContext)||emptyAppContext,Be={uid:uid++,vnode:Oe,type:ke,parent:e,appContext:Ge,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(Ge.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(ke,Ge),emitsOptions:normalizeEmitsOptions(ke,Ge),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:ke.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return Be.ctx={_:Be},Be.root=e?e.root:Be,Be.emit=emit.bind(null,Be),Oe.ce&&Oe.ce(Be),Be}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const Oe=getGlobalThis(),e=(t,ke)=>{let Ge;return(Ge=Oe[t])||(Ge=Oe[t]=[]),Ge.push(ke),Be=>{Ge.length>1?Ge.forEach(je=>je(Be)):Ge[0](Be)}};internalSetCurrentInstance=e("__VUE_INSTANCE_SETTERS__",t=>currentInstance=t),setInSSRSetupState=e("__VUE_SSR_SETTERS__",t=>isInSSRComponentSetup=t)}const setCurrentInstance=Oe=>{const e=currentInstance;return internalSetCurrentInstance(Oe),Oe.scope.on(),()=>{Oe.scope.off(),internalSetCurrentInstance(e)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(Oe){return Oe.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(Oe,e=!1,t=!1){e&&setInSSRSetupState(e);const{props:ke,children:Ge}=Oe.vnode,Be=isStatefulComponent(Oe);initProps(Oe,ke,Be,e),initSlots(Oe,Ge,t);const je=Be?setupStatefulComponent(Oe,e):void 0;return e&&setInSSRSetupState(!1),je}function setupStatefulComponent(Oe,e){const t=Oe.type;Oe.accessCache=Object.create(null),Oe.proxy=new Proxy(Oe.ctx,PublicInstanceProxyHandlers);const{setup:ke}=t;if(ke){pauseTracking();const Ge=Oe.setupContext=ke.length>1?createSetupContext(Oe):null,Be=setCurrentInstance(Oe),je=callWithErrorHandling(ke,Oe,0,[Oe.props,Ge]),Ve=isPromise(je);if(resetTracking(),Be(),(Ve||Oe.sp)&&!isAsyncWrapper(Oe)&&markAsyncBoundary(Oe),Ve){if(je.then(unsetCurrentInstance,unsetCurrentInstance),e)return je.then(Ze=>{handleSetupResult(Oe,Ze,e)}).catch(Ze=>{handleError(Ze,Oe,0)});Oe.asyncDep=je}else handleSetupResult(Oe,je,e)}else finishComponentSetup(Oe,e)}function handleSetupResult(Oe,e,t){isFunction$1(e)?Oe.type.__ssrInlineRender?Oe.ssrRender=e:Oe.render=e:isObject$1(e)&&(Oe.setupState=proxyRefs(e)),finishComponentSetup(Oe,t)}let compile$1,installWithProxy;function registerRuntimeCompiler(Oe){compile$1=Oe,installWithProxy=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RuntimeCompiledPublicInstanceProxyHandlers))}}const isRuntimeOnly=()=>!compile$1;function finishComponentSetup(Oe,e,t){const ke=Oe.type;if(!Oe.render){if(!e&&compile$1&&!ke.render){const Ge=ke.template||resolveMergedOptions(Oe).template;if(Ge){const{isCustomElement:Be,compilerOptions:je}=Oe.appContext.config,{delimiters:Ve,compilerOptions:Ze}=ke,Qe=extend$5(extend$5({isCustomElement:Be,delimiters:Ve},je),Ze);ke.render=compile$1(Ge,Qe)}}Oe.render=ke.render||NOOP,installWithProxy&&installWithProxy(Oe)}{const Ge=setCurrentInstance(Oe);pauseTracking();try{applyOptions(Oe)}finally{resetTracking(),Ge()}}}const attrsProxyHandlers={get(Oe,e){return track(Oe,"get",""),Oe[e]}};function createSetupContext(Oe){const e=t=>{Oe.exposed=t||{}};return{attrs:new Proxy(Oe.attrs,attrsProxyHandlers),slots:Oe.slots,emit:Oe.emit,expose:e}}function getComponentPublicInstance(Oe){return Oe.exposed?Oe.exposeProxy||(Oe.exposeProxy=new Proxy(proxyRefs(markRaw(Oe.exposed)),{get(e,t){if(t in e)return e[t];if(t in publicPropertiesMap)return publicPropertiesMap[t](Oe)},has(e,t){return t in e||t in publicPropertiesMap}})):Oe.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=Oe=>Oe.replace(classifyRE,e=>e.toUpperCase()).replace(/[-_]/g,"");function getComponentName(Oe,e=!0){return isFunction$1(Oe)?Oe.displayName||Oe.name:Oe.name||e&&Oe.__name}function formatComponentName(Oe,e,t=!1){let ke=getComponentName(e);if(!ke&&e.__file){const Ge=e.__file.match(/([^/\\]+)\.\w+$/);Ge&&(ke=Ge[1])}if(!ke&&Oe&&Oe.parent){const Ge=Be=>{for(const je in Be)if(Be[je]===e)return je};ke=Ge(Oe.components||Oe.parent.type.components)||Ge(Oe.appContext.components)}return ke?classify(ke):t?"App":"Anonymous"}function isClassComponent(Oe){return isFunction$1(Oe)&&"__vccOpts"in Oe}const computed=(Oe,e)=>computed$1(Oe,e,isInSSRComponentSetup);function h$2(Oe,e,t){const ke=arguments.length;return ke===2?isObject$1(e)&&!isArray$1(e)?isVNode(e)?createVNode(Oe,null,[e]):createVNode(Oe,e):createVNode(Oe,null,e):(ke>3?t=Array.prototype.slice.call(arguments,2):ke===3&&isVNode(t)&&(t=[t]),createVNode(Oe,e,t))}function initCustomFormatter(){}function withMemo(Oe,e,t,ke){const Ge=t[ke];if(Ge&&isMemoSame(Ge,Oe))return Ge;const Be=e();return Be.memo=Oe.slice(),Be.cacheIndex=ke,t[ke]=Be}function isMemoSame(Oe,e){const t=Oe.memo;if(t.length!=e.length)return!1;for(let ke=0;ke<t.length;ke++)if(hasChanged(t[ke],e[ke]))return!1;return isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(Oe),!0}const version$3="3.5.13",warn$2=NOOP,ErrorTypeStrings=ErrorTypeStrings$1,devtools=devtools$1,setDevtoolsHook=setDevtoolsHook$1,_ssrUtils={createComponentInstance,setupComponent,renderComponentRoot,setCurrentRenderingInstance,isVNode,normalizeVNode,getComponentPublicInstance,ensureValidVNode,pushWarningContext,popWarningContext},ssrUtils=_ssrUtils,resolveFilter=null,compatUtils=null,DeprecationTypes=null;/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$2=typeof window<"u"&&window.trustedTypes;if(tt$2)try{policy=tt$2.createPolicy("vue",{createHTML:Oe=>Oe})}catch{}const unsafeToTrustedHTML=policy?Oe=>policy.createHTML(Oe):Oe=>Oe,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc=typeof document<"u"?document:null,templateContainer=doc&&doc.createElement("template"),nodeOps={insert:(Oe,e,t)=>{e.insertBefore(Oe,t||null)},remove:Oe=>{const e=Oe.parentNode;e&&e.removeChild(Oe)},createElement:(Oe,e,t,ke)=>{const Ge=e==="svg"?doc.createElementNS(svgNS,Oe):e==="mathml"?doc.createElementNS(mathmlNS,Oe):t?doc.createElement(Oe,{is:t}):doc.createElement(Oe);return Oe==="select"&&ke&&ke.multiple!=null&&Ge.setAttribute("multiple",ke.multiple),Ge},createText:Oe=>doc.createTextNode(Oe),createComment:Oe=>doc.createComment(Oe),setText:(Oe,e)=>{Oe.nodeValue=e},setElementText:(Oe,e)=>{Oe.textContent=e},parentNode:Oe=>Oe.parentNode,nextSibling:Oe=>Oe.nextSibling,querySelector:Oe=>doc.querySelector(Oe),setScopeId(Oe,e){Oe.setAttribute(e,"")},insertStaticContent(Oe,e,t,ke,Ge,Be){const je=t?t.previousSibling:e.lastChild;if(Ge&&(Ge===Be||Ge.nextSibling))for(;e.insertBefore(Ge.cloneNode(!0),t),!(Ge===Be||!(Ge=Ge.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(ke==="svg"?`<svg>${Oe}</svg>`:ke==="mathml"?`<math>${Oe}</math>`:Oe);const Ve=templateContainer.content;if(ke==="svg"||ke==="mathml"){const Ze=Ve.firstChild;for(;Ze.firstChild;)Ve.appendChild(Ze.firstChild);Ve.removeChild(Ze)}e.insertBefore(Ve,t)}return[je?je.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$5({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=Oe=>(Oe.displayName="Transition",Oe.props=TransitionPropsValidators,Oe),Transition=decorate$1((Oe,{slots:e})=>h$2(BaseTransition,resolveTransitionProps(Oe),e)),callHook=(Oe,e=[])=>{isArray$1(Oe)?Oe.forEach(t=>t(...e)):Oe&&Oe(...e)},hasExplicitCallback=Oe=>Oe?isArray$1(Oe)?Oe.some(e=>e.length>1):Oe.length>1:!1;function resolveTransitionProps(Oe){const e={};for(const Cn in Oe)Cn in DOMTransitionPropsValidators||(e[Cn]=Oe[Cn]);if(Oe.css===!1)return e;const{name:t="v",type:ke,duration:Ge,enterFromClass:Be=`${t}-enter-from`,enterActiveClass:je=`${t}-enter-active`,enterToClass:Ve=`${t}-enter-to`,appearFromClass:Ze=Be,appearActiveClass:Qe=je,appearToClass:en=Ve,leaveFromClass:tn=`${t}-leave-from`,leaveActiveClass:an=`${t}-leave-active`,leaveToClass:cn=`${t}-leave-to`}=Oe,un=normalizeDuration(Ge),dn=un&&un[0],fn=un&&un[1],{onBeforeEnter:pn,onEnter:gn,onEnterCancelled:yn,onLeave:vn,onLeaveCancelled:An,onBeforeAppear:xn=pn,onAppear:wn=gn,onAppearCancelled:bn=yn}=e,Mn=(Cn,Rn,Tn,Nn)=>{Cn._enterCancelled=Nn,removeTransitionClass(Cn,Rn?en:Ve),removeTransitionClass(Cn,Rn?Qe:je),Tn&&Tn()},Pn=(Cn,Rn)=>{Cn._isLeaving=!1,removeTransitionClass(Cn,tn),removeTransitionClass(Cn,cn),removeTransitionClass(Cn,an),Rn&&Rn()},En=Cn=>(Rn,Tn)=>{const Nn=Cn?wn:gn,Gn=()=>Mn(Rn,Cn,Tn);callHook(Nn,[Rn,Gn]),nextFrame(()=>{removeTransitionClass(Rn,Cn?Ze:Be),addTransitionClass(Rn,Cn?en:Ve),hasExplicitCallback(Nn)||whenTransitionEnds(Rn,ke,dn,Gn)})};return extend$5(e,{onBeforeEnter(Cn){callHook(pn,[Cn]),addTransitionClass(Cn,Be),addTransitionClass(Cn,je)},onBeforeAppear(Cn){callHook(xn,[Cn]),addTransitionClass(Cn,Ze),addTransitionClass(Cn,Qe)},onEnter:En(!1),onAppear:En(!0),onLeave(Cn,Rn){Cn._isLeaving=!0;const Tn=()=>Pn(Cn,Rn);addTransitionClass(Cn,tn),Cn._enterCancelled?(addTransitionClass(Cn,an),forceReflow()):(forceReflow(),addTransitionClass(Cn,an)),nextFrame(()=>{Cn._isLeaving&&(removeTransitionClass(Cn,tn),addTransitionClass(Cn,cn),hasExplicitCallback(vn)||whenTransitionEnds(Cn,ke,fn,Tn))}),callHook(vn,[Cn,Tn])},onEnterCancelled(Cn){Mn(Cn,!1,void 0,!0),callHook(yn,[Cn])},onAppearCancelled(Cn){Mn(Cn,!0,void 0,!0),callHook(bn,[Cn])},onLeaveCancelled(Cn){Pn(Cn),callHook(An,[Cn])}})}function normalizeDuration(Oe){if(Oe==null)return null;if(isObject$1(Oe))return[NumberOf(Oe.enter),NumberOf(Oe.leave)];{const e=NumberOf(Oe);return[e,e]}}function NumberOf(Oe){return toNumber(Oe)}function addTransitionClass(Oe,e){e.split(/\s+/).forEach(t=>t&&Oe.classList.add(t)),(Oe[vtcKey]||(Oe[vtcKey]=new Set)).add(e)}function removeTransitionClass(Oe,e){e.split(/\s+/).forEach(ke=>ke&&Oe.classList.remove(ke));const t=Oe[vtcKey];t&&(t.delete(e),t.size||(Oe[vtcKey]=void 0))}function nextFrame(Oe){requestAnimationFrame(()=>{requestAnimationFrame(Oe)})}let endId=0;function whenTransitionEnds(Oe,e,t,ke){const Ge=Oe._endId=++endId,Be=()=>{Ge===Oe._endId&&ke()};if(t!=null)return setTimeout(Be,t);const{type:je,timeout:Ve,propCount:Ze}=getTransitionInfo(Oe,e);if(!je)return ke();const Qe=je+"end";let en=0;const tn=()=>{Oe.removeEventListener(Qe,an),Be()},an=cn=>{cn.target===Oe&&++en>=Ze&&tn()};setTimeout(()=>{en<Ze&&tn()},Ve+1),Oe.addEventListener(Qe,an)}function getTransitionInfo(Oe,e){const t=window.getComputedStyle(Oe),ke=un=>(t[un]||"").split(", "),Ge=ke(`${TRANSITION}Delay`),Be=ke(`${TRANSITION}Duration`),je=getTimeout(Ge,Be),Ve=ke(`${ANIMATION}Delay`),Ze=ke(`${ANIMATION}Duration`),Qe=getTimeout(Ve,Ze);let en=null,tn=0,an=0;e===TRANSITION?je>0&&(en=TRANSITION,tn=je,an=Be.length):e===ANIMATION?Qe>0&&(en=ANIMATION,tn=Qe,an=Ze.length):(tn=Math.max(je,Qe),en=tn>0?je>Qe?TRANSITION:ANIMATION:null,an=en?en===TRANSITION?Be.length:Ze.length:0);const cn=en===TRANSITION&&/\b(transform|all)(,|$)/.test(ke(`${TRANSITION}Property`).toString());return{type:en,timeout:tn,propCount:an,hasTransform:cn}}function getTimeout(Oe,e){for(;Oe.length<e.length;)Oe=Oe.concat(Oe);return Math.max(...e.map((t,ke)=>toMs(t)+toMs(Oe[ke])))}function toMs(Oe){return Oe==="auto"?0:Number(Oe.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(Oe,e,t){const ke=Oe[vtcKey];ke&&(e=(e?[e,...ke]:[...ke]).join(" ")),e==null?Oe.removeAttribute("class"):t?Oe.setAttribute("class",e):Oe.className=e}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(Oe,{value:e},{transition:t}){Oe[vShowOriginalDisplay]=Oe.style.display==="none"?"":Oe.style.display,t&&e?t.beforeEnter(Oe):setDisplay(Oe,e)},mounted(Oe,{value:e},{transition:t}){t&&e&&t.enter(Oe)},updated(Oe,{value:e,oldValue:t},{transition:ke}){!e!=!t&&(ke?e?(ke.beforeEnter(Oe),setDisplay(Oe,!0),ke.enter(Oe)):ke.leave(Oe,()=>{setDisplay(Oe,!1)}):setDisplay(Oe,e))},beforeUnmount(Oe,{value:e}){setDisplay(Oe,e)}};function setDisplay(Oe,e){Oe.style.display=e?Oe[vShowOriginalDisplay]:"none",Oe[vShowHidden]=!e}function initVShowForSSR(){vShow.getSSRProps=({value:Oe})=>{if(!Oe)return{style:{display:"none"}}}}const CSS_VAR_TEXT=Symbol("");function useCssVars(Oe){const e=getCurrentInstance();if(!e)return;const t=e.ut=(Ge=Oe(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(Be=>setVarsOnNode(Be,Ge))},ke=()=>{const Ge=Oe(e.proxy);e.ce?setVarsOnNode(e.ce,Ge):setVarsOnVNode(e.subTree,Ge),t(Ge)};onBeforeUpdate(()=>{queuePostFlushCb(ke)}),onMounted(()=>{watch(ke,NOOP,{flush:"post"});const Ge=new MutationObserver(ke);Ge.observe(e.subTree.el.parentNode,{childList:!0}),onUnmounted(()=>Ge.disconnect())})}function setVarsOnVNode(Oe,e){if(Oe.shapeFlag&128){const t=Oe.suspense;Oe=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{setVarsOnVNode(t.activeBranch,e)})}for(;Oe.component;)Oe=Oe.component.subTree;if(Oe.shapeFlag&1&&Oe.el)setVarsOnNode(Oe.el,e);else if(Oe.type===Fragment)Oe.children.forEach(t=>setVarsOnVNode(t,e));else if(Oe.type===Static){let{el:t,anchor:ke}=Oe;for(;t&&(setVarsOnNode(t,e),t!==ke);)t=t.nextSibling}}function setVarsOnNode(Oe,e){if(Oe.nodeType===1){const t=Oe.style;let ke="";for(const Ge in e)t.setProperty(`--${Ge}`,e[Ge]),ke+=`--${Ge}: ${e[Ge]};`;t[CSS_VAR_TEXT]=ke}}const displayRE=/(^|;)\s*display\s*:/;function patchStyle(Oe,e,t){const ke=Oe.style,Ge=isString(t);let Be=!1;if(t&&!Ge){if(e)if(isString(e))for(const je of e.split(";")){const Ve=je.slice(0,je.indexOf(":")).trim();t[Ve]==null&&setStyle(ke,Ve,"")}else for(const je in e)t[je]==null&&setStyle(ke,je,"");for(const je in t)je==="display"&&(Be=!0),setStyle(ke,je,t[je])}else if(Ge){if(e!==t){const je=ke[CSS_VAR_TEXT];je&&(t+=";"+je),ke.cssText=t,Be=displayRE.test(t)}}else e&&Oe.removeAttribute("style");vShowOriginalDisplay in Oe&&(Oe[vShowOriginalDisplay]=Be?ke.display:"",Oe[vShowHidden]&&(ke.display="none"))}const importantRE=/\s*!important$/;function setStyle(Oe,e,t){if(isArray$1(t))t.forEach(ke=>setStyle(Oe,e,ke));else if(t==null&&(t=""),e.startsWith("--"))Oe.setProperty(e,t);else{const ke=autoPrefix(Oe,e);importantRE.test(t)?Oe.setProperty(hyphenate(ke),t.replace(importantRE,""),"important"):Oe[ke]=t}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(Oe,e){const t=prefixCache[e];if(t)return t;let ke=camelize(e);if(ke!=="filter"&&ke in Oe)return prefixCache[e]=ke;ke=capitalize(ke);for(let Ge=0;Ge<prefixes.length;Ge++){const Be=prefixes[Ge]+ke;if(Be in Oe)return prefixCache[e]=Be}return e}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(Oe,e,t,ke,Ge,Be=isSpecialBooleanAttr(e)){ke&&e.startsWith("xlink:")?t==null?Oe.removeAttributeNS(xlinkNS,e.slice(6,e.length)):Oe.setAttributeNS(xlinkNS,e,t):t==null||Be&&!includeBooleanAttr(t)?Oe.removeAttribute(e):Oe.setAttribute(e,Be?"":isSymbol(t)?String(t):t)}function patchDOMProp(Oe,e,t,ke,Ge){if(e==="innerHTML"||e==="textContent"){t!=null&&(Oe[e]=e==="innerHTML"?unsafeToTrustedHTML(t):t);return}const Be=Oe.tagName;if(e==="value"&&Be!=="PROGRESS"&&!Be.includes("-")){const Ve=Be==="OPTION"?Oe.getAttribute("value")||"":Oe.value,Ze=t==null?Oe.type==="checkbox"?"on":"":String(t);(Ve!==Ze||!("_value"in Oe))&&(Oe.value=Ze),t==null&&Oe.removeAttribute(e),Oe._value=t;return}let je=!1;if(t===""||t==null){const Ve=typeof Oe[e];Ve==="boolean"?t=includeBooleanAttr(t):t==null&&Ve==="string"?(t="",je=!0):Ve==="number"&&(t=0,je=!0)}try{Oe[e]=t}catch{}je&&Oe.removeAttribute(Ge||e)}function addEventListener(Oe,e,t,ke){Oe.addEventListener(e,t,ke)}function removeEventListener(Oe,e,t,ke){Oe.removeEventListener(e,t,ke)}const veiKey=Symbol("_vei");function patchEvent(Oe,e,t,ke,Ge=null){const Be=Oe[veiKey]||(Oe[veiKey]={}),je=Be[e];if(ke&&je)je.value=ke;else{const[Ve,Ze]=parseName(e);if(ke){const Qe=Be[e]=createInvoker(ke,Ge);addEventListener(Oe,Ve,Qe,Ze)}else je&&(removeEventListener(Oe,Ve,je,Ze),Be[e]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(Oe){let e;if(optionsModifierRE.test(Oe)){e={};let ke;for(;ke=Oe.match(optionsModifierRE);)Oe=Oe.slice(0,Oe.length-ke[0].length),e[ke[0].toLowerCase()]=!0}return[Oe[2]===":"?Oe.slice(3):hyphenate(Oe.slice(2)),e]}let cachedNow=0;const p$3=Promise.resolve(),getNow=()=>cachedNow||(p$3.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(Oe,e){const t=ke=>{if(!ke._vts)ke._vts=Date.now();else if(ke._vts<=t.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(ke,t.value),e,5,[ke])};return t.value=Oe,t.attached=getNow(),t}function patchStopImmediatePropagation(Oe,e){if(isArray$1(e)){const t=Oe.stopImmediatePropagation;return Oe.stopImmediatePropagation=()=>{t.call(Oe),Oe._stopped=!0},e.map(ke=>Ge=>!Ge._stopped&&ke&&ke(Ge))}else return e}const isNativeOn=Oe=>Oe.charCodeAt(0)===111&&Oe.charCodeAt(1)===110&&Oe.charCodeAt(2)>96&&Oe.charCodeAt(2)<123,patchProp=(Oe,e,t,ke,Ge,Be)=>{const je=Ge==="svg";e==="class"?patchClass(Oe,ke,je):e==="style"?patchStyle(Oe,t,ke):isOn(e)?isModelListener(e)||patchEvent(Oe,e,t,ke,Be):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):shouldSetAsProp(Oe,e,ke,je))?(patchDOMProp(Oe,e,ke),!Oe.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&patchAttr(Oe,e,ke,je,Be,e!=="value")):Oe._isVueCE&&(/[A-Z]/.test(e)||!isString(ke))?patchDOMProp(Oe,camelize(e),ke,Be,e):(e==="true-value"?Oe._trueValue=ke:e==="false-value"&&(Oe._falseValue=ke),patchAttr(Oe,e,ke,je))};function shouldSetAsProp(Oe,e,t,ke){if(ke)return!!(e==="innerHTML"||e==="textContent"||e in Oe&&isNativeOn(e)&&isFunction$1(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&Oe.tagName==="INPUT"||e==="type"&&Oe.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const Ge=Oe.tagName;if(Ge==="IMG"||Ge==="VIDEO"||Ge==="CANVAS"||Ge==="SOURCE")return!1}return isNativeOn(e)&&isString(t)?!1:e in Oe}const REMOVAL={};/*! #__NO_SIDE_EFFECTS__ */function defineCustomElement(Oe,e,t){const ke=defineComponent(Oe,e);isPlainObject$1(ke)&&extend$5(ke,e);class Ge extends VueElement{constructor(je){super(ke,je,t)}}return Ge.def=ke,Ge}/*! #__NO_SIDE_EFFECTS__ */const defineSSRCustomElement=(Oe,e)=>defineCustomElement(Oe,e,createSSRApp),BaseClass=typeof HTMLElement<"u"?HTMLElement:class{};class VueElement extends BaseClass{constructor(e,t={},ke=createApp){super(),this._def=e,this._props=t,this._createApp=ke,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&ke!==createApp?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow({mode:"open"}),this._root=this.shadowRoot):this._root=this,this._def.__asyncLoader||this._resolveProps(this._def)}connectedCallback(){if(!this.isConnected)return;this.shadowRoot||this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof VueElement){this._parent=e;break}this._instance||(this._resolved?(this._setParent(),this._update()):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._instance.provides=e._instance.provides)}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null)})}_resolveDef(){if(this._pendingResolve)return;for(let ke=0;ke<this.attributes.length;ke++)this._setAttr(this.attributes[ke].name);this._ob=new MutationObserver(ke=>{for(const Ge of ke)this._setAttr(Ge.attributeName)}),this._ob.observe(this,{attributes:!0});const e=(ke,Ge=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:Be,styles:je}=ke;let Ve;if(Be&&!isArray$1(Be))for(const Ze in Be){const Qe=Be[Ze];(Qe===Number||Qe&&Qe.type===Number)&&(Ze in this._props&&(this._props[Ze]=toNumber(this._props[Ze])),(Ve||(Ve=Object.create(null)))[camelize(Ze)]=!0)}this._numberProps=Ve,Ge&&this._resolveProps(ke),this.shadowRoot&&this._applyStyles(je),this._mount(ke)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(ke=>e(this._def=ke,!0)):e(this._def)}_mount(e){this._app=this._createApp(e),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const ke in t)hasOwn(this,ke)||Object.defineProperty(this,ke,{get:()=>unref(t[ke])})}_resolveProps(e){const{props:t}=e,ke=isArray$1(t)?t:Object.keys(t||{});for(const Ge of Object.keys(this))Ge[0]!=="_"&&ke.includes(Ge)&&this._setProp(Ge,this[Ge]);for(const Ge of ke.map(camelize))Object.defineProperty(this,Ge,{get(){return this._getProp(Ge)},set(Be){this._setProp(Ge,Be,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let ke=t?this.getAttribute(e):REMOVAL;const Ge=camelize(e);t&&this._numberProps&&this._numberProps[Ge]&&(ke=toNumber(ke)),this._setProp(Ge,ke,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,ke=!0,Ge=!1){if(t!==this._props[e]&&(t===REMOVAL?delete this._props[e]:(this._props[e]=t,e==="key"&&this._app&&(this._app._ceVNode.key=t)),Ge&&this._instance&&this._update(),ke)){const Be=this._ob;Be&&Be.disconnect(),t===!0?this.setAttribute(hyphenate(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(hyphenate(e),t+""):t||this.removeAttribute(hyphenate(e)),Be&&Be.observe(this,{attributes:!0})}}_update(){render$2(this._createVNode(),this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=createVNode(this._def,extend$5(e,this._props));return this._instance||(t.ce=ke=>{this._instance=ke,ke.ce=this,ke.isCE=!0;const Ge=(Be,je)=>{this.dispatchEvent(new CustomEvent(Be,isPlainObject$1(je[0])?extend$5({detail:je},je[0]):{detail:je}))};ke.emit=(Be,...je)=>{Ge(Be,je),hyphenate(Be)!==Be&&Ge(hyphenate(Be),je)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const ke=this._nonce;for(let Ge=e.length-1;Ge>=0;Ge--){const Be=document.createElement("style");ke&&Be.setAttribute("nonce",ke),Be.textContent=e[Ge],this.shadowRoot.prepend(Be)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const ke=t.nodeType===1&&t.getAttribute("slot")||"default";(e[ke]||(e[ke]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=(this._teleportTarget||this).querySelectorAll("slot"),t=this._instance.type.__scopeId;for(let ke=0;ke<e.length;ke++){const Ge=e[ke],Be=Ge.getAttribute("name")||"default",je=this._slots[Be],Ve=Ge.parentNode;if(je)for(const Ze of je){if(t&&Ze.nodeType===1){const Qe=t+"-s",en=document.createTreeWalker(Ze,1);Ze.setAttribute(Qe,"");let tn;for(;tn=en.nextNode();)tn.setAttribute(Qe,"")}Ve.insertBefore(Ze,Ge)}else for(;Ge.firstChild;)Ve.insertBefore(Ge.firstChild,Ge);Ve.removeChild(Ge)}}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function useHost(Oe){const e=getCurrentInstance(),t=e&&e.ce;return t||null}function useShadowRoot(){const Oe=useHost();return Oe&&Oe.shadowRoot}function useCssModule(Oe="$style"){{const e=getCurrentInstance();if(!e)return EMPTY_OBJ;const t=e.type.__cssModules;if(!t)return EMPTY_OBJ;const ke=t[Oe];return ke||EMPTY_OBJ}}const positionMap=new WeakMap,newPositionMap=new WeakMap,moveCbKey=Symbol("_moveCb"),enterCbKey=Symbol("_enterCb"),decorate=Oe=>(delete Oe.props.mode,Oe),TransitionGroupImpl=decorate({name:"TransitionGroup",props:extend$5({},TransitionPropsValidators,{tag:String,moveClass:String}),setup(Oe,{slots:e}){const t=getCurrentInstance(),ke=useTransitionState();let Ge,Be;return onUpdated(()=>{if(!Ge.length)return;const je=Oe.moveClass||`${Oe.name||"v"}-move`;if(!hasCSSTransform(Ge[0].el,t.vnode.el,je))return;Ge.forEach(callPendingCbs),Ge.forEach(recordPosition);const Ve=Ge.filter(applyTranslation);forceReflow(),Ve.forEach(Ze=>{const Qe=Ze.el,en=Qe.style;addTransitionClass(Qe,je),en.transform=en.webkitTransform=en.transitionDuration="";const tn=Qe[moveCbKey]=an=>{an&&an.target!==Qe||(!an||/transform$/.test(an.propertyName))&&(Qe.removeEventListener("transitionend",tn),Qe[moveCbKey]=null,removeTransitionClass(Qe,je))};Qe.addEventListener("transitionend",tn)})}),()=>{const je=toRaw(Oe),Ve=resolveTransitionProps(je);let Ze=je.tag||Fragment;if(Ge=[],Be)for(let Qe=0;Qe<Be.length;Qe++){const en=Be[Qe];en.el&&en.el instanceof Element&&(Ge.push(en),setTransitionHooks(en,resolveTransitionHooks(en,Ve,ke,t)),positionMap.set(en,en.el.getBoundingClientRect()))}Be=e.default?getTransitionRawChildren(e.default()):[];for(let Qe=0;Qe<Be.length;Qe++){const en=Be[Qe];en.key!=null&&setTransitionHooks(en,resolveTransitionHooks(en,Ve,ke,t))}return createVNode(Ze,null,Be)}}}),TransitionGroup=TransitionGroupImpl;function callPendingCbs(Oe){const e=Oe.el;e[moveCbKey]&&e[moveCbKey](),e[enterCbKey]&&e[enterCbKey]()}function recordPosition(Oe){newPositionMap.set(Oe,Oe.el.getBoundingClientRect())}function applyTranslation(Oe){const e=positionMap.get(Oe),t=newPositionMap.get(Oe),ke=e.left-t.left,Ge=e.top-t.top;if(ke||Ge){const Be=Oe.el.style;return Be.transform=Be.webkitTransform=`translate(${ke}px,${Ge}px)`,Be.transitionDuration="0s",Oe}}function hasCSSTransform(Oe,e,t){const ke=Oe.cloneNode(),Ge=Oe[vtcKey];Ge&&Ge.forEach(Ve=>{Ve.split(/\s+/).forEach(Ze=>Ze&&ke.classList.remove(Ze))}),t.split(/\s+/).forEach(Ve=>Ve&&ke.classList.add(Ve)),ke.style.display="none";const Be=e.nodeType===1?e:e.parentNode;Be.appendChild(ke);const{hasTransform:je}=getTransitionInfo(ke);return Be.removeChild(ke),je}const getModelAssigner=Oe=>{const e=Oe.props["onUpdate:modelValue"]||!1;return isArray$1(e)?t=>invokeArrayFns(e,t):e};function onCompositionStart(Oe){Oe.target.composing=!0}function onCompositionEnd(Oe){const e=Oe.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const assignKey=Symbol("_assign"),vModelText={created(Oe,{modifiers:{lazy:e,trim:t,number:ke}},Ge){Oe[assignKey]=getModelAssigner(Ge);const Be=ke||Ge.props&&Ge.props.type==="number";addEventListener(Oe,e?"change":"input",je=>{if(je.target.composing)return;let Ve=Oe.value;t&&(Ve=Ve.trim()),Be&&(Ve=looseToNumber(Ve)),Oe[assignKey](Ve)}),t&&addEventListener(Oe,"change",()=>{Oe.value=Oe.value.trim()}),e||(addEventListener(Oe,"compositionstart",onCompositionStart),addEventListener(Oe,"compositionend",onCompositionEnd),addEventListener(Oe,"change",onCompositionEnd))},mounted(Oe,{value:e}){Oe.value=e??""},beforeUpdate(Oe,{value:e,oldValue:t,modifiers:{lazy:ke,trim:Ge,number:Be}},je){if(Oe[assignKey]=getModelAssigner(je),Oe.composing)return;const Ve=(Be||Oe.type==="number")&&!/^0\d/.test(Oe.value)?looseToNumber(Oe.value):Oe.value,Ze=e??"";Ve!==Ze&&(document.activeElement===Oe&&Oe.type!=="range"&&(ke&&e===t||Ge&&Oe.value.trim()===Ze)||(Oe.value=Ze))}},vModelCheckbox={deep:!0,created(Oe,e,t){Oe[assignKey]=getModelAssigner(t),addEventListener(Oe,"change",()=>{const ke=Oe._modelValue,Ge=getValue$1(Oe),Be=Oe.checked,je=Oe[assignKey];if(isArray$1(ke)){const Ve=looseIndexOf(ke,Ge),Ze=Ve!==-1;if(Be&&!Ze)je(ke.concat(Ge));else if(!Be&&Ze){const Qe=[...ke];Qe.splice(Ve,1),je(Qe)}}else if(isSet(ke)){const Ve=new Set(ke);Be?Ve.add(Ge):Ve.delete(Ge),je(Ve)}else je(getCheckboxValue(Oe,Be))})},mounted:setChecked,beforeUpdate(Oe,e,t){Oe[assignKey]=getModelAssigner(t),setChecked(Oe,e,t)}};function setChecked(Oe,{value:e,oldValue:t},ke){Oe._modelValue=e;let Ge;if(isArray$1(e))Ge=looseIndexOf(e,ke.props.value)>-1;else if(isSet(e))Ge=e.has(ke.props.value);else{if(e===t)return;Ge=looseEqual(e,getCheckboxValue(Oe,!0))}Oe.checked!==Ge&&(Oe.checked=Ge)}const vModelRadio={created(Oe,{value:e},t){Oe.checked=looseEqual(e,t.props.value),Oe[assignKey]=getModelAssigner(t),addEventListener(Oe,"change",()=>{Oe[assignKey](getValue$1(Oe))})},beforeUpdate(Oe,{value:e,oldValue:t},ke){Oe[assignKey]=getModelAssigner(ke),e!==t&&(Oe.checked=looseEqual(e,ke.props.value))}},vModelSelect={deep:!0,created(Oe,{value:e,modifiers:{number:t}},ke){const Ge=isSet(e);addEventListener(Oe,"change",()=>{const Be=Array.prototype.filter.call(Oe.options,je=>je.selected).map(je=>t?looseToNumber(getValue$1(je)):getValue$1(je));Oe[assignKey](Oe.multiple?Ge?new Set(Be):Be:Be[0]),Oe._assigning=!0,nextTick(()=>{Oe._assigning=!1})}),Oe[assignKey]=getModelAssigner(ke)},mounted(Oe,{value:e}){setSelected(Oe,e)},beforeUpdate(Oe,e,t){Oe[assignKey]=getModelAssigner(t)},updated(Oe,{value:e}){Oe._assigning||setSelected(Oe,e)}};function setSelected(Oe,e){const t=Oe.multiple,ke=isArray$1(e);if(!(t&&!ke&&!isSet(e))){for(let Ge=0,Be=Oe.options.length;Ge<Be;Ge++){const je=Oe.options[Ge],Ve=getValue$1(je);if(t)if(ke){const Ze=typeof Ve;Ze==="string"||Ze==="number"?je.selected=e.some(Qe=>String(Qe)===String(Ve)):je.selected=looseIndexOf(e,Ve)>-1}else je.selected=e.has(Ve);else if(looseEqual(getValue$1(je),e)){Oe.selectedIndex!==Ge&&(Oe.selectedIndex=Ge);return}}!t&&Oe.selectedIndex!==-1&&(Oe.selectedIndex=-1)}}function getValue$1(Oe){return"_value"in Oe?Oe._value:Oe.value}function getCheckboxValue(Oe,e){const t=e?"_trueValue":"_falseValue";return t in Oe?Oe[t]:e}const vModelDynamic={created(Oe,e,t){callModelHook(Oe,e,t,null,"created")},mounted(Oe,e,t){callModelHook(Oe,e,t,null,"mounted")},beforeUpdate(Oe,e,t,ke){callModelHook(Oe,e,t,ke,"beforeUpdate")},updated(Oe,e,t,ke){callModelHook(Oe,e,t,ke,"updated")}};function resolveDynamicModel(Oe,e){switch(Oe){case"SELECT":return vModelSelect;case"TEXTAREA":return vModelText;default:switch(e){case"checkbox":return vModelCheckbox;case"radio":return vModelRadio;default:return vModelText}}}function callModelHook(Oe,e,t,ke,Ge){const je=resolveDynamicModel(Oe.tagName,t.props&&t.props.type)[Ge];je&&je(Oe,e,t,ke)}function initVModelForSSR(){vModelText.getSSRProps=({value:Oe})=>({value:Oe}),vModelRadio.getSSRProps=({value:Oe},e)=>{if(e.props&&looseEqual(e.props.value,Oe))return{checked:!0}},vModelCheckbox.getSSRProps=({value:Oe},e)=>{if(isArray$1(Oe)){if(e.props&&looseIndexOf(Oe,e.props.value)>-1)return{checked:!0}}else if(isSet(Oe)){if(e.props&&Oe.has(e.props.value))return{checked:!0}}else if(Oe)return{checked:!0}},vModelDynamic.getSSRProps=(Oe,e)=>{if(typeof e.type!="string")return;const t=resolveDynamicModel(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(Oe,e)}}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:Oe=>Oe.stopPropagation(),prevent:Oe=>Oe.preventDefault(),self:Oe=>Oe.target!==Oe.currentTarget,ctrl:Oe=>!Oe.ctrlKey,shift:Oe=>!Oe.shiftKey,alt:Oe=>!Oe.altKey,meta:Oe=>!Oe.metaKey,left:Oe=>"button"in Oe&&Oe.button!==0,middle:Oe=>"button"in Oe&&Oe.button!==1,right:Oe=>"button"in Oe&&Oe.button!==2,exact:(Oe,e)=>systemModifiers.some(t=>Oe[`${t}Key`]&&!e.includes(t))},withModifiers=(Oe,e)=>{const t=Oe._withMods||(Oe._withMods={}),ke=e.join(".");return t[ke]||(t[ke]=(Ge,...Be)=>{for(let je=0;je<e.length;je++){const Ve=modifierGuards[e[je]];if(Ve&&Ve(Ge,e))return}return Oe(Ge,...Be)})},keyNames={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},withKeys=(Oe,e)=>{const t=Oe._withKeys||(Oe._withKeys={}),ke=e.join(".");return t[ke]||(t[ke]=Ge=>{if(!("key"in Ge))return;const Be=hyphenate(Ge.key);if(e.some(je=>je===Be||keyNames[je]===Be))return Oe(Ge)})},rendererOptions=extend$5({patchProp},nodeOps);let renderer,enabledHydration=!1;function ensureRenderer(){return renderer||(renderer=createRenderer(rendererOptions))}function ensureHydrationRenderer(){return renderer=enabledHydration?renderer:createHydrationRenderer(rendererOptions),enabledHydration=!0,renderer}const render$2=(...Oe)=>{ensureRenderer().render(...Oe)},hydrate=(...Oe)=>{ensureHydrationRenderer().hydrate(...Oe)},createApp=(...Oe)=>{const e=ensureRenderer().createApp(...Oe),{mount:t}=e;return e.mount=ke=>{const Ge=normalizeContainer(ke);if(!Ge)return;const Be=e._component;!isFunction$1(Be)&&!Be.render&&!Be.template&&(Be.template=Ge.innerHTML),Ge.nodeType===1&&(Ge.textContent="");const je=t(Ge,!1,resolveRootNamespace(Ge));return Ge instanceof Element&&(Ge.removeAttribute("v-cloak"),Ge.setAttribute("data-v-app","")),je},e},createSSRApp=(...Oe)=>{const e=ensureHydrationRenderer().createApp(...Oe),{mount:t}=e;return e.mount=ke=>{const Ge=normalizeContainer(ke);if(Ge)return t(Ge,!0,resolveRootNamespace(Ge))},e};function resolveRootNamespace(Oe){if(Oe instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&Oe instanceof MathMLElement)return"mathml"}function normalizeContainer(Oe){return isString(Oe)?document.querySelector(Oe):Oe}let ssrDirectiveInitialized=!1;const initDirectivesForSSR=()=>{ssrDirectiveInitialized||(ssrDirectiveInitialized=!0,initVModelForSSR(),initVShowForSSR())};/**
* vue v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const compile=()=>{},vue_runtime_esmBundler=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition,BaseTransitionPropsValidators,Comment,DeprecationTypes,EffectScope,ErrorCodes,ErrorTypeStrings,Fragment,KeepAlive,ReactiveEffect,Static,Suspense,Teleport,Text:Text$1,TrackOpTypes,Transition,TransitionGroup,TriggerOpTypes,VueElement,assertNumber,callWithAsyncErrorHandling,callWithErrorHandling,camelize,capitalize,cloneVNode,compatUtils,compile,computed,createApp,createBlock,createCommentVNode,createElementBlock,createElementVNode:createBaseVNode,createHydrationRenderer,createPropsRestProxy,createRenderer,createSSRApp,createSlots,createStaticVNode,createTextVNode,createVNode,customRef,defineAsyncComponent,defineComponent,defineCustomElement,defineEmits,defineExpose,defineModel,defineOptions,defineProps,defineSSRCustomElement,defineSlots,devtools,effect,effectScope,getCurrentInstance,getCurrentScope,getCurrentWatcher,getTransitionRawChildren,guardReactiveProps,h:h$2,handleError,hasInjectionContext,hydrate,hydrateOnIdle,hydrateOnInteraction,hydrateOnMediaQuery,hydrateOnVisible,initCustomFormatter,initDirectivesForSSR,inject,isMemoSame,isProxy,isReactive,isReadonly,isRef,isRuntimeOnly,isShallow,isVNode,markRaw,mergeDefaults,mergeModels,mergeProps,nextTick,normalizeClass,normalizeProps,normalizeStyle,onActivated,onBeforeMount,onBeforeUnmount,onBeforeUpdate,onDeactivated,onErrorCaptured,onMounted,onRenderTracked,onRenderTriggered,onScopeDispose,onServerPrefetch,onUnmounted,onUpdated,onWatcherCleanup,openBlock,popScopeId,provide,proxyRefs,pushScopeId,queuePostFlushCb,reactive,readonly,ref,registerRuntimeCompiler,render:render$2,renderList,renderSlot,resolveComponent,resolveDirective,resolveDynamicComponent,resolveFilter,resolveTransitionHooks,setBlockTracking,setDevtoolsHook,setTransitionHooks,shallowReactive,shallowReadonly,shallowRef,ssrContextKey,ssrUtils,stop,toDisplayString,toHandlerKey,toHandlers,toRaw,toRef,toRefs,toValue:toValue$1,transformVNodeArgs,triggerRef,unref,useAttrs,useCssModule,useCssVars,useHost,useId,useModel,useSSRContext,useShadowRoot,useSlots,useTemplateRef,useTransitionState,vModelCheckbox,vModelDynamic,vModelRadio,vModelSelect,vModelText,vShow,version:version$3,warn:warn$2,watch,watchEffect,watchPostEffect,watchSyncEffect,withAsyncContext,withCtx,withDefaults,withDirectives,withKeys,withMemo,withModifiers,withScopeId},Symbol.toStringTag,{value:"Module"}));/*!
 * pinia v2.3.1
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let activePinia;const setActivePinia=Oe=>activePinia=Oe,piniaSymbol=Symbol();function isPlainObject(Oe){return Oe&&typeof Oe=="object"&&Object.prototype.toString.call(Oe)==="[object Object]"&&typeof Oe.toJSON!="function"}var MutationType;(function(Oe){Oe.direct="direct",Oe.patchObject="patch object",Oe.patchFunction="patch function"})(MutationType||(MutationType={}));function createPinia(){const Oe=effectScope(!0),e=Oe.run(()=>ref({}));let t=[],ke=[];const Ge=markRaw({install(Be){setActivePinia(Ge),Ge._a=Be,Be.provide(piniaSymbol,Ge),Be.config.globalProperties.$pinia=Ge,ke.forEach(je=>t.push(je)),ke=[]},use(Be){return this._a?t.push(Be):ke.push(Be),this},_p:t,_a:null,_e:Oe,_s:new Map,state:e});return Ge}const noop$2=()=>{};function addSubscription(Oe,e,t,ke=noop$2){Oe.push(e);const Ge=()=>{const Be=Oe.indexOf(e);Be>-1&&(Oe.splice(Be,1),ke())};return!t&&getCurrentScope()&&onScopeDispose(Ge),Ge}function triggerSubscriptions(Oe,...e){Oe.slice().forEach(t=>{t(...e)})}const fallbackRunWithContext=Oe=>Oe(),ACTION_MARKER=Symbol(),ACTION_NAME=Symbol();function mergeReactiveObjects(Oe,e){Oe instanceof Map&&e instanceof Map?e.forEach((t,ke)=>Oe.set(ke,t)):Oe instanceof Set&&e instanceof Set&&e.forEach(Oe.add,Oe);for(const t in e){if(!e.hasOwnProperty(t))continue;const ke=e[t],Ge=Oe[t];isPlainObject(Ge)&&isPlainObject(ke)&&Oe.hasOwnProperty(t)&&!isRef(ke)&&!isReactive(ke)?Oe[t]=mergeReactiveObjects(Ge,ke):Oe[t]=ke}return Oe}const skipHydrateSymbol=Symbol();function shouldHydrate(Oe){return!isPlainObject(Oe)||!Oe.hasOwnProperty(skipHydrateSymbol)}const{assign:assign$1}=Object;function isComputed(Oe){return!!(isRef(Oe)&&Oe.effect)}function createOptionsStore(Oe,e,t,ke){const{state:Ge,actions:Be,getters:je}=e,Ve=t.state.value[Oe];let Ze;function Qe(){Ve||(t.state.value[Oe]=Ge?Ge():{});const en=toRefs(t.state.value[Oe]);return assign$1(en,Be,Object.keys(je||{}).reduce((tn,an)=>(tn[an]=markRaw(computed(()=>{setActivePinia(t);const cn=t._s.get(Oe);return je[an].call(cn,cn)})),tn),{}))}return Ze=createSetupStore(Oe,Qe,e,t,ke,!0),Ze}function createSetupStore(Oe,e,t={},ke,Ge,Be){let je;const Ve=assign$1({actions:{}},t),Ze={deep:!0};let Qe,en,tn=[],an=[],cn;const un=ke.state.value[Oe];!Be&&!un&&(ke.state.value[Oe]={}),ref({});let dn;function fn(bn){let Mn;Qe=en=!1,typeof bn=="function"?(bn(ke.state.value[Oe]),Mn={type:MutationType.patchFunction,storeId:Oe,events:cn}):(mergeReactiveObjects(ke.state.value[Oe],bn),Mn={type:MutationType.patchObject,payload:bn,storeId:Oe,events:cn});const Pn=dn=Symbol();nextTick().then(()=>{dn===Pn&&(Qe=!0)}),en=!0,triggerSubscriptions(tn,Mn,ke.state.value[Oe])}const pn=Be?function(){const{state:Mn}=t,Pn=Mn?Mn():{};this.$patch(En=>{assign$1(En,Pn)})}:noop$2;function gn(){je.stop(),tn=[],an=[],ke._s.delete(Oe)}const yn=(bn,Mn="")=>{if(ACTION_MARKER in bn)return bn[ACTION_NAME]=Mn,bn;const Pn=function(){setActivePinia(ke);const En=Array.from(arguments),Cn=[],Rn=[];function Tn(zn){Cn.push(zn)}function Nn(zn){Rn.push(zn)}triggerSubscriptions(an,{args:En,name:Pn[ACTION_NAME],store:An,after:Tn,onError:Nn});let Gn;try{Gn=bn.apply(this&&this.$id===Oe?this:An,En)}catch(zn){throw triggerSubscriptions(Rn,zn),zn}return Gn instanceof Promise?Gn.then(zn=>(triggerSubscriptions(Cn,zn),zn)).catch(zn=>(triggerSubscriptions(Rn,zn),Promise.reject(zn))):(triggerSubscriptions(Cn,Gn),Gn)};return Pn[ACTION_MARKER]=!0,Pn[ACTION_NAME]=Mn,Pn},vn={_p:ke,$id:Oe,$onAction:addSubscription.bind(null,an),$patch:fn,$reset:pn,$subscribe(bn,Mn={}){const Pn=addSubscription(tn,bn,Mn.detached,()=>En()),En=je.run(()=>watch(()=>ke.state.value[Oe],Cn=>{(Mn.flush==="sync"?en:Qe)&&bn({storeId:Oe,type:MutationType.direct,events:cn},Cn)},assign$1({},Ze,Mn)));return Pn},$dispose:gn},An=reactive(vn);ke._s.set(Oe,An);const wn=(ke._a&&ke._a.runWithContext||fallbackRunWithContext)(()=>ke._e.run(()=>(je=effectScope()).run(()=>e({action:yn}))));for(const bn in wn){const Mn=wn[bn];if(isRef(Mn)&&!isComputed(Mn)||isReactive(Mn))Be||(un&&shouldHydrate(Mn)&&(isRef(Mn)?Mn.value=un[bn]:mergeReactiveObjects(Mn,un[bn])),ke.state.value[Oe][bn]=Mn);else if(typeof Mn=="function"){const Pn=yn(Mn,bn);wn[bn]=Pn,Ve.actions[bn]=Mn}}return assign$1(An,wn),assign$1(toRaw(An),wn),Object.defineProperty(An,"$state",{get:()=>ke.state.value[Oe],set:bn=>{fn(Mn=>{assign$1(Mn,bn)})}}),ke._p.forEach(bn=>{assign$1(An,je.run(()=>bn({store:An,app:ke._a,pinia:ke,options:Ve})))}),un&&Be&&t.hydrate&&t.hydrate(An.$state,un),Qe=!0,en=!0,An}/*! #__NO_SIDE_EFFECTS__ */function defineStore(Oe,e,t){let ke,Ge;const Be=typeof e=="function";typeof Oe=="string"?(ke=Oe,Ge=Be?t:e):(Ge=Oe,ke=Oe.id);function je(Ve,Ze){const Qe=hasInjectionContext();return Ve=Ve||(Qe?inject(piniaSymbol,null):null),Ve&&setActivePinia(Ve),Ve=activePinia,Ve._s.has(ke)||(Be?createSetupStore(ke,e,Ge,Ve):createOptionsStore(ke,Ge,Ve)),Ve._s.get(ke)}return je.$id=ke,je}var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs$1(Oe){return Oe&&Oe.__esModule&&Object.prototype.hasOwnProperty.call(Oe,"default")?Oe.default:Oe}function getAugmentedNamespace(Oe){if(Oe.__esModule)return Oe;var e=Oe.default;if(typeof e=="function"){var t=function ke(){return this instanceof ke?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(Oe).forEach(function(ke){var Ge=Object.getOwnPropertyDescriptor(Oe,ke);Object.defineProperty(t,ke,Ge.get?Ge:{enumerable:!0,get:function(){return Oe[ke]}})}),t}var dist={},logger$G={};const require$$0=getAugmentedNamespace(vue_runtime_esmBundler);Object.defineProperty(logger$G,"__esModule",{value:!0});logger$G.useLogger=logger$G.createLogger=logger$G.VueLogger=void 0;const vue_1=require$$0,loggerSymbol=Symbol("vue-logger-plugin"),levels=["debug","info","warn","error","log"],defaultOptions={enabled:!0,consoleEnabled:!0,level:"debug",callerInfo:!1,prefixFormat:({level:Oe,caller:e})=>e?`[${Oe.toUpperCase()}] [${e==null?void 0:e.fileName}:${e==null?void 0:e.functionName}:${e==null?void 0:e.lineNumber}]`:`[${Oe.toUpperCase()}]`};class VueLogger{constructor(e){this.apply(e),this._consoleFunctions=levels.filter(t=>typeof console[t]=="function")}apply(e){const t=this._options||defaultOptions;this._options={...t,...e},this.installHooks(this._options.beforeHooks),this.installHooks(this._options.afterHooks)}debug(...e){this.invoke("debug",...e).then(()=>{}).catch(()=>{})}info(...e){this.invoke("info",...e).then(()=>{}).catch(()=>{})}warn(...e){this.invoke("warn",...e).then(()=>{}).catch(()=>{})}error(...e){this.invoke("error",...e).then(()=>{}).catch(()=>{})}log(...e){this.invoke("log",...e).then(()=>{}).catch(()=>{})}async invoke(e,...t){if(this._options.enabled&&levels.indexOf(e)>=levels.indexOf(this._options.level)){const ke=this._options.callerInfo?this.getCallerInfo():void 0,Ge={level:e,caller:ke,argumentArray:t};if(await this.invokeHooks(this._options.beforeHooks,Ge),this._options.consoleEnabled){const Be=this._options.prefixFormat({level:e,caller:ke});this._consoleFunctions.indexOf(e)>=0?console[e](Be,...t):console.log(Be,...t)}await this.invokeHooks(this._options.afterHooks,Ge)}}installHooks(e){if(e&&e.length>0){for(const t of e)if(t.install)try{t.install(this._options)}catch(ke){console.warn("LoggerHook install failure",ke)}}}async invokeHooks(e,t){if(e&&e.length>0)for(const ke of e)try{await ke.run(t)}catch(Ge){console.warn("LoggerHook run failure",Ge)}}getCallerInfo(){const e=new Error;if(e.stack)try{const ke=e.stack.split(`
`)[0].startsWith("Error")?4:3,Ge=e.stack.split(`
`)[ke].trim().replace("(","").replace(")","");let Be;Ge.indexOf("at ")>-1?Be=Ge.substring(Ge.indexOf("at ")+3,Ge.lastIndexOf(" ")).split(".").reverse()[0]:Ge.indexOf("@")>-1&&(Be=Ge.substring(0,Ge.indexOf("@")));const je=Ge.split(":").reverse(),Ve=je[2].substring(Math.max(je[2].lastIndexOf("/"),je[2].lastIndexOf("\\"))+1).split("?")[0],Ze=je[1];return{functionName:Be,fileName:Ve,lineNumber:Ze}}catch{}}get enabled(){return this._options.enabled}get level(){return this._options.level}install(e){e.provide(loggerSymbol,this),e.config.globalProperties.$log=this,e.config.globalProperties.$logger=this}}logger$G.VueLogger=VueLogger;function createLogger(Oe={}){return new VueLogger(Oe)}logger$G.createLogger=createLogger;function useLogger(){return vue_1.inject(loggerSymbol)}logger$G.useLogger=useLogger;var hooks={};Object.defineProperty(hooks,"__esModule",{value:!0});hooks.StringifyAndParseObjectsHook=hooks.StringifyObjectsHook=void 0;hooks.StringifyObjectsHook={run(Oe){for(let e=0;e<Oe.argumentArray.length;e++)Oe.argumentArray[e]!=null&&typeof Oe.argumentArray[e]=="object"&&(Oe.argumentArray[e]=JSON.stringify(Oe.argumentArray[e]))}};hooks.StringifyAndParseObjectsHook={run(Oe){for(let e=0;e<Oe.argumentArray.length;e++)Oe.argumentArray[e]!=null&&typeof Oe.argumentArray[e]=="object"&&(Oe.argumentArray[e]=JSON.parse(JSON.stringify(Oe.argumentArray[e])))}};(function(Oe){Object.defineProperty(Oe,"__esModule",{value:!0}),Oe.StringifyAndParseObjectsHook=Oe.StringifyObjectsHook=Oe.useLogger=Oe.createLogger=Oe.VueLogger=void 0;var e=logger$G;Object.defineProperty(Oe,"VueLogger",{enumerable:!0,get:function(){return e.VueLogger}}),Object.defineProperty(Oe,"createLogger",{enumerable:!0,get:function(){return e.createLogger}}),Object.defineProperty(Oe,"useLogger",{enumerable:!0,get:function(){return e.useLogger}});var t=hooks;Object.defineProperty(Oe,"StringifyObjectsHook",{enumerable:!0,get:function(){return t.StringifyObjectsHook}}),Object.defineProperty(Oe,"StringifyAndParseObjectsHook",{enumerable:!0,get:function(){return t.StringifyAndParseObjectsHook}})})(dist);const scriptRel="modulepreload",assetsURL=function(Oe){return"/cartes.gouv.fr-entree-carto/"+Oe},seen={},__vitePreload=function(e,t,ke){let Ge=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const je=document.querySelector("meta[property=csp-nonce]"),Ve=(je==null?void 0:je.nonce)||(je==null?void 0:je.getAttribute("nonce"));Ge=Promise.allSettled(t.map(Ze=>{if(Ze=assetsURL(Ze),Ze in seen)return;seen[Ze]=!0;const Qe=Ze.endsWith(".css"),en=Qe?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${Ze}"]${en}`))return;const tn=document.createElement("link");if(tn.rel=Qe?"stylesheet":scriptRel,Qe||(tn.as="script"),tn.crossOrigin="",tn.href=Ze,Ve&&tn.setAttribute("nonce",Ve),document.head.appendChild(tn),Qe)return new Promise((an,cn)=>{tn.addEventListener("load",an),tn.addEventListener("error",()=>cn(new Error(`Unable to preload CSS for ${Ze}`)))})}))}function Be(je){const Ve=new Event("vite:preloadError",{cancelable:!0});if(Ve.payload=je,window.dispatchEvent(Ve),!Ve.defaultPrevented)throw je}return Ge.then(je=>{for(const Ve of je||[])Ve.status==="rejected"&&Be(Ve.reason);return e().catch(Be)})},eulerianSymbol=Symbol("vue-eulerian-plugin");class Eulerian{constructor(e){console.debug("eulerian",e),this.options=e,window.dsfr={verbose:e.verbose,mode:"vue"},window.dsfr.analytics=e,this.key="@codegouvfr/react-dsfr finalityConsent eulerianAnalytics",this.status=!1,this.load().then(()=>{console.debug("import dynamic dsfr !");var t=JSON.parse(localStorage.getItem(this.key));t&&(t.eulerianAnalytics?this.start():this.stop())})}async load(){await __vitePreload(()=>import("./dsfr.module-ClVZRmXE.js"),[]).then(()=>{console.debug("import dynamic dsfr.module !")}),await __vitePreload(()=>import("./analytics.module-FhbEcPM0.js"),[]).then(()=>{console.debug("import dynamic analytics.module !")})}start(){console.debug("start"),localStorage.setItem(this.key,'{"eulerianAnalytics":true,"isFullConsent":true}'),window.dsfr.analytics.opt.enable(),window.dsfr.start(),window.dsfr.analytics.readiness.then(()=>{console.debug("start promise !"),this.options.verbose||(window.dsfr.inspector.level=10),window.dsfr.analytics.reset(),window.dsfr.analytics.collect()}),this.status=!0}stop(){console.debug("stop"),localStorage.setItem(this.key,'{"eulerianAnalytics":false,"isFullConsent":false}'),window.dsfr.stop(),this.status=!1}pause(){this.status&&window.dsfr.stop(),console.debug("pause",this.status)}resume(){this.status&&window.dsfr.start(),console.debug("resume",this.status)}getKey(){return this.key}setKey(e){this.key=e}hasKey(){var e=localStorage.getItem(this.key);return!!e}install(e){e.provide(eulerianSymbol,this),e.config.globalProperties.$eulerian=this}}function createEulerian(Oe){return new Eulerian(Oe)}function useEulerian(){return inject(eulerianSymbol)}var oauth2Client_min={exports:{}};(function(Oe,e){(function(t,ke){Oe.exports=ke()})(self,()=>(()=>{var t={985:(je,Ve,Ze)=>{Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.OAuth2Client=void 0,Ve.generateQueryString=an;const Qe=Ze(854),en=Ze(129);function tn(cn,un){return new URL(cn,un).toString()}function an(cn){const un=new URLSearchParams;for(const[dn,fn]of Object.entries(cn))if(Array.isArray(fn))for(const pn of fn)un.append(dn,pn);else fn!==void 0&&un.set(dn,fn.toString());return un.toString()}Ve.OAuth2Client=class{constructor(cn){this.discoveryDone=!1,this.serverMetadata=null,cn!=null&&cn.fetch||(cn.fetch=fetch.bind(globalThis)),this.settings=cn}async refreshToken(cn,un){if(!cn.refreshToken)throw new Error("This token didn't have a refreshToken. It's not possible to refresh this");const dn={grant_type:"refresh_token",refresh_token:cn.refreshToken};this.settings.clientSecret||(dn.client_id=this.settings.clientId),un!=null&&un.scope&&(dn.scope=un.scope.join(" ")),un!=null&&un.resource&&(dn.resource=un.resource);const fn=await this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",dn));return!fn.refreshToken&&cn.refreshToken&&(fn.refreshToken=cn.refreshToken),fn}async clientCredentials(cn){var un;const dn=["client_id","client_secret","grant_type","scope"];if(cn!=null&&cn.extraParams&&Object.keys(cn.extraParams).filter(pn=>dn.includes(pn)).length>0)throw new Error(`The following extraParams are disallowed: '${dn.join("', '")}'`);const fn={grant_type:"client_credentials",scope:(un=cn==null?void 0:cn.scope)===null||un===void 0?void 0:un.join(" "),resource:cn==null?void 0:cn.resource,...cn==null?void 0:cn.extraParams};if(!this.settings.clientSecret)throw new Error("A clientSecret must be provided to use client_credentials");return this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",fn))}async password(cn){var un;const dn={grant_type:"password",...cn,scope:(un=cn.scope)===null||un===void 0?void 0:un.join(" ")};return this.tokenResponseToOAuth2Token(this.request("tokenEndpoint",dn))}get authorizationCode(){return new en.OAuth2AuthorizationCodeClient(this)}async introspect(cn){const un={token:cn.accessToken,token_type_hint:"access_token"};return this.request("introspectionEndpoint",un)}async revoke(cn,un="access_token"){let dn=cn.accessToken;un==="refresh_token"&&(dn=cn.refreshToken);const fn={token:dn,token_type_hint:un};return this.request("revocationEndpoint",fn)}async getEndpoint(cn){if(this.settings[cn]!==void 0)return tn(this.settings[cn],this.settings.server);if(cn!=="discoveryEndpoint"&&(await this.discover(),this.settings[cn]!==void 0))return tn(this.settings[cn],this.settings.server);if(!this.settings.server)throw new Error(`Could not determine the location of ${cn}. Either specify ${cn} in the settings, or the "server" endpoint to let the client discover it.`);switch(cn){case"authorizationEndpoint":return tn("/authorize",this.settings.server);case"tokenEndpoint":return tn("/token",this.settings.server);case"discoveryEndpoint":return tn("/.well-known/oauth-authorization-server",this.settings.server);case"introspectionEndpoint":return tn("/introspect",this.settings.server);case"revocationEndpoint":return tn("/revoke",this.settings.server)}}async discover(){var cn;if(this.discoveryDone)return;let un;this.discoveryDone=!0;try{un=await this.getEndpoint("discoveryEndpoint")}catch{return void console.warn('[oauth2] OAuth2 discovery endpoint could not be determined. Either specify the "server" or "discoveryEndpoint')}const dn=await this.settings.fetch(un,{headers:{Accept:"application/json"}});if(!dn.ok)return;if(!(!((cn=dn.headers.get("Content-Type"))===null||cn===void 0)&&cn.startsWith("application/json")))return void console.warn("[oauth2] OAuth2 discovery endpoint was not a JSON response. Response is ignored");this.serverMetadata=await dn.json();const fn=[["authorization_endpoint","authorizationEndpoint"],["token_endpoint","tokenEndpoint"],["introspection_endpoint","introspectionEndpoint"],["revocation_endpoint","revocationEndpoint"]];if(this.serverMetadata!==null){for(const[pn,gn]of fn)this.serverMetadata[pn]&&(this.settings[gn]=tn(this.serverMetadata[pn],un));this.serverMetadata.token_endpoint_auth_methods_supported&&!this.settings.authenticationMethod&&(this.settings.authenticationMethod=this.serverMetadata.token_endpoint_auth_methods_supported[0])}}async request(cn,un){const dn=await this.getEndpoint(cn),fn={"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"};let pn=this.settings.authenticationMethod;switch(this.settings.clientSecret||(pn="client_secret_post"),pn||(pn="client_secret_basic"),pn){case"client_secret_basic":fn.Authorization="Basic "+btoa(this.settings.clientId+":"+this.settings.clientSecret);break;case"client_secret_post":un.client_id=this.settings.clientId,this.settings.clientSecret&&(un.client_secret=this.settings.clientSecret);break;default:throw new Error("Authentication method not yet supported:"+pn+". Open a feature request if you want this!")}const gn=await this.settings.fetch(dn,{method:"POST",body:an(un),headers:fn});let yn,vn,An;if(gn.status!==204&&gn.headers.has("Content-Type")&&gn.headers.get("Content-Type").match(/^application\/(.*\+)?json/)&&(yn=await gn.json()),gn.ok)return yn;throw yn!=null&&yn.error?(vn="OAuth2 error "+yn.error+".",yn.error_description&&(vn+=" "+yn.error_description),An=yn.error):(vn="HTTP Error "+gn.status+" "+gn.statusText,gn.status===401&&this.settings.clientSecret&&(vn+=". It's likely that the clientId and/or clientSecret was incorrect"),An=null),new Qe.OAuth2HttpError(vn,An,gn,yn)}async tokenResponseToOAuth2Token(cn){var un;const dn=await cn;if(!(dn!=null&&dn.access_token))throw console.warn("Invalid OAuth2 Token Response: ",dn),new TypeError("We received an invalid token response from an OAuth2 server.");return{accessToken:dn.access_token,expiresAt:dn.expires_in?Date.now()+1e3*dn.expires_in:null,refreshToken:(un=dn.refresh_token)!==null&&un!==void 0?un:null}}}},129:(je,Ve,Ze)=>{Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.OAuth2AuthorizationCodeClient=void 0,Ve.generateCodeVerifier=async function(){const un=tn();if(un){const dn=new Uint8Array(32);return un.getRandomValues(dn),cn(dn)}{const dn=Ze(483);return new Promise((fn,pn)=>{dn.randomBytes(32,(gn,yn)=>{gn&&pn(gn),fn(yn.toString("base64url"))})})}},Ve.getCodeChallenge=en;const Qe=Ze(854);async function en(un){const dn=tn();if(dn!=null&&dn.subtle)return["S256",cn(await dn.subtle.digest("SHA-256",an(un)))];{const fn=Ze(483).createHash("sha256");return fn.update(an(un)),["S256",fn.digest("base64url")]}}function tn(){if(typeof window<"u"&&window.crypto)return window.crypto;if(typeof self<"u"&&self.crypto)return self.crypto;const un=Ze(483);return un.webcrypto?un.webcrypto:null}function an(un){const dn=new Uint8Array(un.length);for(let fn=0;fn<un.length;fn++)dn[fn]=255&un.charCodeAt(fn);return dn}function cn(un){return btoa(String.fromCharCode(...new Uint8Array(un))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}Ve.OAuth2AuthorizationCodeClient=class{constructor(un){this.client=un}async getAuthorizeUri(un){const[dn,fn]=await Promise.all([un.codeVerifier?en(un.codeVerifier):void 0,this.client.getEndpoint("authorizationEndpoint")]),pn=new URLSearchParams({client_id:this.client.settings.clientId,response_type:"code",redirect_uri:un.redirectUri});if(dn&&(pn.set("code_challenge_method",dn[0]),pn.set("code_challenge",dn[1])),un.state&&pn.set("state",un.state),un.scope&&pn.set("scope",un.scope.join(" ")),un.resource)for(const gn of[].concat(un.resource))pn.append("resource",gn);if(un.responseMode&&un.responseMode!=="query"&&pn.append("response_mode",un.responseMode),un.extraParams)for(const[gn,yn]of Object.entries(un.extraParams)){if(pn.has(gn))throw new Error(`Property in extraParams would overwrite standard property: ${gn}`);pn.set(gn,yn)}return fn+"?"+pn.toString()}async getTokenFromCodeRedirect(un,dn){const{code:fn}=this.validateResponse(un,{state:dn.state});return this.getToken({code:fn,redirectUri:dn.redirectUri,codeVerifier:dn.codeVerifier})}validateResponse(un,dn){var fn;let pn=(un=new URL(un)).searchParams;if(!pn.has("code")&&!pn.has("error")&&un.hash.length>0&&(pn=new URLSearchParams(un.hash.slice(1))),pn.has("error"))throw new Qe.OAuth2Error((fn=pn.get("error_description"))!==null&&fn!==void 0?fn:"OAuth2 error",pn.get("error"));if(!pn.has("code"))throw new Error(`The url did not contain a code parameter ${un}`);if(dn.state&&dn.state!==pn.get("state"))throw new Error(`The "state" parameter in the url did not match the expected value of ${dn.state}`);return{code:pn.get("code"),scope:pn.has("scope")?pn.get("scope").split(" "):void 0}}async getToken(un){const dn={grant_type:"authorization_code",code:un.code,redirect_uri:un.redirectUri,code_verifier:un.codeVerifier,resource:un.resource};return this.client.tokenResponseToOAuth2Token(this.client.request("tokenEndpoint",dn))}}},854:(je,Ve)=>{Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.OAuth2HttpError=Ve.OAuth2Error=void 0;class Ze extends Error{constructor(en,tn){super(en),this.oauth2Code=tn}}Ve.OAuth2Error=Ze,Ve.OAuth2HttpError=class extends Ze{constructor(Qe,en,tn,an){super(Qe,en),this.httpCode=tn.status,this.response=tn,this.parsedBody=an}}},238:(je,Ve)=>{Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.OAuth2Fetch=void 0,Ve.OAuth2Fetch=class{constructor(Ze){this.token=null,this.activeGetStoredToken=null,this.activeRefresh=null,this.refreshTimer=null,(Ze==null?void 0:Ze.scheduleRefresh)===void 0&&(Ze.scheduleRefresh=!0),this.options=Ze,Ze.getStoredToken&&(this.activeGetStoredToken=(async()=>{this.token=await Ze.getStoredToken(),this.activeGetStoredToken=null})()),this.scheduleRefresh()}async fetch(Ze,Qe){const en=new Request(Ze,Qe);return this.mw()(en,tn=>fetch(tn))}mw(){return async(Ze,Qe)=>{const en=await this.getAccessToken();let tn=Ze.clone();tn.headers.set("Authorization","Bearer "+en);let an=await Qe(tn);if(!an.ok&&an.status===401){const cn=await this.refreshToken();tn=Ze.clone(),tn.headers.set("Authorization","Bearer "+cn.accessToken),an=await Qe(tn)}return an}}async getToken(){return this.token&&(this.token.expiresAt===null||this.token.expiresAt>Date.now())?this.token:this.refreshToken()}async getAccessToken(){return await this.activeGetStoredToken,(await this.getToken()).accessToken}async refreshToken(){var Ze,Qe;if(this.activeRefresh)return this.activeRefresh;const en=this.token;this.activeRefresh=(async()=>{var tn,an;let cn=null;try{en!=null&&en.refreshToken&&(cn=await this.options.client.refreshToken(en))}catch{console.warn("[oauth2] refresh token not accepted, we'll try reauthenticating")}if(cn||(cn=await this.options.getNewToken()),!cn){const un=new Error("Unable to obtain OAuth2 tokens, a full reauth may be needed");throw(an=(tn=this.options).onError)===null||an===void 0||an.call(tn,un),un}return cn})();try{const tn=await this.activeRefresh;return this.token=tn,(Qe=(Ze=this.options).storeToken)===null||Qe===void 0||Qe.call(Ze,tn),this.scheduleRefresh(),tn}catch(tn){throw this.options.onError&&this.options.onError(tn),tn}finally{this.activeRefresh=null}}scheduleRefresh(){var Ze;if(!this.options.scheduleRefresh||(this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null),!(!((Ze=this.token)===null||Ze===void 0)&&Ze.expiresAt)||!this.token.refreshToken))return;const Qe=this.token.expiresAt-Date.now();Qe<12e4||(this.refreshTimer=setTimeout(async()=>{try{await this.refreshToken()}catch(en){console.error("[fetch-mw-oauth2] error while doing a background OAuth2 auto-refresh",en)}},Qe-6e4))}}},483:()=>{}},ke={};function Ge(je){var Ve=ke[je];if(Ve!==void 0)return Ve.exports;var Ze=ke[je]={exports:{}};return t[je](Ze,Ze.exports,Ge),Ze.exports}var Be={};return(()=>{var je=Be;Object.defineProperty(je,"__esModule",{value:!0}),je.OAuth2HttpError=je.OAuth2Error=je.OAuth2Fetch=je.generateCodeVerifier=je.OAuth2AuthorizationCodeClient=je.OAuth2Client=void 0;var Ve=Ge(985);Object.defineProperty(je,"OAuth2Client",{enumerable:!0,get:function(){return Ve.OAuth2Client}});var Ze=Ge(129);Object.defineProperty(je,"OAuth2AuthorizationCodeClient",{enumerable:!0,get:function(){return Ze.OAuth2AuthorizationCodeClient}}),Object.defineProperty(je,"generateCodeVerifier",{enumerable:!0,get:function(){return Ze.generateCodeVerifier}});var Qe=Ge(238);Object.defineProperty(je,"OAuth2Fetch",{enumerable:!0,get:function(){return Qe.OAuth2Fetch}});var en=Ge(854);Object.defineProperty(je,"OAuth2Error",{enumerable:!0,get:function(){return en.OAuth2Error}}),Object.defineProperty(je,"OAuth2HttpError",{enumerable:!0,get:function(){return en.OAuth2HttpError}})})(),Be})())})(oauth2Client_min);var oauth2Client_minExports=oauth2Client_min.exports;const useServiceStore=defineStore({id:"service",state:()=>({connexion:{}}),getters:{},actions:{getService(){return this.connexion},setService(Oe){Oe?this.connexion=new Services$1(Oe):this.connexion=new Services$1}}});var Connexion={getAccessLogin:async function(){const Oe=this.url.includes("login")?this.url:this.url+"/login",e=await oauth2Client_minExports.generateCodeVerifier();this.codeVerifier=e,localStorage.setItem("codeVerifier",e);var t=await this.getClient().authorizationCode.getAuthorizeUri({redirectUri:Oe,state:"some-string",codeVerifier:e,scope:["openid","profile","email"],extraParams:{approval_prompt:"auto"},responseMode:"query"});return t},getAccessLogout:function(){const Oe=this.url.includes("logout")?this.url:this.url+"/logout";var e=`${this.getClient().settings.server}/realms/${this.getClient().settings.index}/protocol/openid-connect/logout?
      scope=openid%20profile%20email&
      approval_prompt=auto&
      response_type=code&
      post_logout_redirect_uri=${Oe}?session_state=${this.session}&
      client_id=${this.getClient().settings.clientId}`.replace(/ /g,"");return Promise.resolve(e)},getAccessToken:async function(){const Oe=this.url.includes("login")?this.url:this.url+"/login";var e=this.codeVerifier||localStorage.getItem("codeVerifier"),t=await this.getClient().authorizationCode.getTokenFromCodeRedirect(location,{redirectUri:Oe,state:"some-string",codeVerifier:e});this.token=t,this.getFetch().token=t,this.addTokenStorage();var ke=useServiceStore();return ke.setService(this),t},getTokenStorage:function(){var Oe=JSON.parse(localStorage.getItem("auth"));return Oe?Oe.authenticated:null},addTokenStorage:function(){var Oe=JSON.stringify({authenticated:this.token});localStorage.setItem("auth",Oe)},removeTokenStorage:function(){var Oe=JSON.stringify({authenticated:{}});localStorage.setItem("auth",Oe)}},Users={getUserMe:async function(){var Oe=await this.getFetch().fetch("https://data.geopf.fr/api/users/me",{method:"GET"}),e=await Oe.json();this.user=e;var t=useServiceStore();return t.setService(this),e}},Documents={};const IAM_URL="https://sso.geopf.fr",IAM_REALM="geoplateforme",IAM_CLIENT_ID="cartes-gouv-fr-carto",IAM_CLIENT_SECRET="GLGe8lcjSj7OytvAeHXABrZRFjbu31ny";var eu,Uu,vh,Uf,Bf;let Services$1=(Bf=class{constructor(e){Ad(this,vh);Ad(this,eu);Ad(this,Uu);return e=e||{},this.authenticated=e.authenticated||!1,this.session=e.session||"",this.codeVerifier=e.codeVerifier||"",this.code=e.code||"",this.token=e.token||"",this.user=e.user||{},this.error=e.error||{},Ed(this,eu,null),Ed(this,Uu,null),this.url=null,Gc(this,vh,Uf).call(this,e),this}getClient(){return Cd(this,eu)}getFetch(){return Cd(this,Uu)}isAccessValided(){var e=useServiceStore();const t=location.search,ke=new URLSearchParams(t);var Ge=ke.get("code"),Be=ke.get("session_state"),je=ke.get("error"),Ve=null;return Ge&&Be&&(this.session=Be,this.code=Ge,this.authenticated=!0,Ve="login"),!Ge&&Be&&Be===this.session&&(this.session=null,this.code=null,this.authenticated=!1,this.token=null,this.removeTokenStorage(),this.user={},this.error={},Ve="logout"),je?(this.error={name:je,message:ke.get("error_description")},Promise.reject(this.error)):(e.setService(this),Promise.resolve(Ve))}},eu=new WeakMap,Uu=new WeakMap,vh=new WeakSet,Uf=function(e){this.url=encodeURI(location.origin+"/cartes.gouv.fr-entree-carto");var t=e.client?e.client.settings:{server:`${IAM_URL}`,clientId:`${IAM_CLIENT_ID}`,clientSecret:`${IAM_CLIENT_SECRET}`,index:`${IAM_REALM}`,tokenEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/token`,authorizationEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/auth`,discoveryEndpoint:`/realms/${IAM_REALM}/.well-known/openid-configuration`,revocationEndpoint:`/realms/${IAM_REALM}/protocol/openid-connect/revoke`};Ed(this,eu,new oauth2Client_minExports.OAuth2Client(t)),Ed(this,Uu,new oauth2Client_minExports.OAuth2Fetch({client:Cd(this,eu),getNewToken:async()=>{var ke=await Cd(this,eu).authorizationCode.getToken({code:this.code,redirectUri:this.url,code_verifier:this.codeVerifier});return ke},storeToken:ke=>{this.token=ke,this.addTokenStorage()},getStoredToken:()=>{const ke=this.getTokenStorage();return ke||null},onError:ke=>{console.error(ke)}}))},Bf);Object.assign(Services$1.prototype,Connexion);Object.assign(Services$1.prototype,Users);Object.assign(Services$1.prototype,Documents);const servicesSymbol=Symbol("vue-services-plugin");class PluginServices extends Services$1{constructor(e){console.debug("connexion",e),super(e)}install(e){e.provide(servicesSymbol,this),e.config.globalProperties.$services=this,e.provide("services",this)}}function createServices(Oe){return new PluginServices(Oe)}function getState(Oe){if(Oe)try{return JSON.parse(Oe)}catch(e){console.warn(e,"unknown json format!")}}function createStore(Oe,e){const{storage:t,encrypt:ke,decrypt:Ge}=e,Be=t.getItem(Oe.$id);if(Be){const Ve=getState(Ge?Ge(Be):Be);Ve&&(Oe.$state=Ve)}else{const Ve=JSON.stringify(Oe.$state);t.setItem(Oe.$id,ke?ke(Ve):Ve)}const je=(Ve,Ze)=>{const Qe=JSON.stringify(Ze);t.setItem(Oe.$id,ke?ke(Qe):Qe)};Oe.$subscribe(je,{detached:!0,deep:!0,immediate:!0})}function storePlugin(Oe){return e=>{const t={...Oe},{store:ke}=e,{stores:Ge,encrypt:Be,decrypt:je}=t;Ge&&Ge.length>0&&Ge.forEach(Ve=>{if(typeof Ve=="string"){if(Ve===ke.$id){const Ze=t.storage??localStorage;createStore(ke,{storage:Ze,encrypt:Be,decrypt:je})}}else if(Ve.name===ke.$id){const{storage:Ze,ciphertext:Qe}=Ve;createStore(ke,{storage:Ze||(t.storage?t.storage:localStorage),encrypt:Qe===!1?void 0:Be,decrypt:Qe===!1?void 0:je})}})}}const l$1={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","&":"&amp;"};let h$1=0;var f$1=Oe=>Oe.replace(/[<>"&]/g,e=>l$1[e]||e),p$2=Oe=>Oe+h$1++;const u$1={},m$1=Oe=>{const{name:e,paths:t=[],d:ke,polygons:Ge=[],points:Be}=Oe;ke&&t.push({d:ke}),Be&&Ge.push({points:Be}),u$1[e]=Object.assign({},Oe,{paths:t,polygons:Ge}),u$1[e].minX||(u$1[e].minX=0),u$1[e].minY||(u$1[e].minY=0)},c$1=(...Oe)=>{for(const e of Oe)m$1(e)},g$1=defineComponent({name:"OhVueIcon",props:{name:{type:String,validator:Oe=>!Oe||Oe in u$1||(console.warn(`Invalid prop: prop "name" is referring to an unregistered icon "${Oe}".
Please make sure you have imported this icon before using it.`),!1)},title:String,fill:String,scale:{type:[Number,String],default:1},animation:{validator:Oe=>["spin","spin-pulse","wrench","ring","pulse","flash","float"].includes(Oe)},hover:Boolean,flip:{validator:Oe=>["horizontal","vertical","both"].includes(Oe)},speed:{validator:Oe=>Oe==="fast"||Oe==="slow"},label:String,inverse:Boolean},setup(Oe){const e=ref([]),t=reactive({outerScale:1.2,x:null,y:null}),ke=reactive({width:0,height:0}),Ge=computed(()=>{const dn=Number(Oe.scale);return isNaN(dn)||dn<=0?(console.warn('Invalid prop: prop "scale" should be a number over 0.'),t.outerScale):dn*t.outerScale}),Be=computed(()=>({"ov-icon":!0,"ov-inverse":Oe.inverse,"ov-flip-horizontal":Oe.flip==="horizontal","ov-flip-vertical":Oe.flip==="vertical","ov-flip-both":Oe.flip==="both","ov-spin":Oe.animation==="spin","ov-spin-pulse":Oe.animation==="spin-pulse","ov-wrench":Oe.animation==="wrench","ov-ring":Oe.animation==="ring","ov-pulse":Oe.animation==="pulse","ov-flash":Oe.animation==="flash","ov-float":Oe.animation==="float","ov-hover":Oe.hover,"ov-fast":Oe.speed==="fast","ov-slow":Oe.speed==="slow"})),je=computed(()=>Oe.name?u$1[Oe.name]:null),Ve=computed(()=>je.value?`${je.value.minX} ${je.value.minY} ${je.value.width} ${je.value.height}`:`0 0 ${Qe.value} ${en.value}`),Ze=computed(()=>{if(!je.value)return 1;const{width:dn,height:fn}=je.value;return Math.max(dn,fn)/16}),Qe=computed(()=>ke.width||je.value&&je.value.width/Ze.value*Ge.value||0),en=computed(()=>ke.height||je.value&&je.value.height/Ze.value*Ge.value||0),tn=computed(()=>Ge.value!==1&&{fontSize:Ge.value+"em"}),an=computed(()=>{if(!je.value||!je.value.raw)return null;const dn={};let fn=je.value.raw;return fn=fn.replace(/\s(?:xml:)?id=(["']?)([^"')\s]+)\1/g,(pn,gn,yn)=>{const vn=p$2("vat-");return dn[yn]=vn,` id="${vn}"`}),fn=fn.replace(/#(?:([^'")\s]+)|xpointer\(id\((['"]?)([^')]+)\2\)\))/g,(pn,gn,yn,vn)=>{const An=gn||vn;return An&&dn[An]?`#${dn[An]}`:pn}),fn}),cn=computed(()=>je.value&&je.value.attr?je.value.attr:{}),un=()=>{if(!Oe.name&&Oe.name!==null&&e.value.length===0)return void console.warn('Invalid prop: prop "name" is required.');if(je.value)return;let dn=0,fn=0;e.value.forEach(pn=>{pn.outerScale=Ge.value,dn=Math.max(dn,pn.width),fn=Math.max(fn,pn.height)}),ke.width=dn,ke.height=fn,e.value.forEach(pn=>{pn.x=(dn-pn.width)/2,pn.y=(fn-pn.height)/2})};return onMounted(()=>{un()}),onUpdated(()=>{un()}),{...toRefs(t),children:e,icon:je,klass:Be,style:tn,width:Qe,height:en,box:Ve,attribs:cn,raw:an}},created(){const Oe=this.$parent;Oe&&Oe.children&&Oe.children.push(this)},render(){const Oe=Object.assign({role:this.$attrs.role||(this.label||this.title?"img":null),"aria-label":this.label||null,"aria-hidden":!(this.label||this.title),width:this.width,height:this.height,viewBox:this.box},this.attribs);this.attribs.stroke?Oe.stroke=this.fill?this.fill:"currentColor":Oe.fill=this.fill?this.fill:"currentColor",this.x&&(Oe.x=this.x.toString()),this.y&&(Oe.y=this.y.toString());let e={class:this.klass,style:this.style};if(e=Object.assign(e,Oe),this.raw){const Ge=this.title?`<title>${f$1(this.title)}</title>${this.raw}`:this.raw;e.innerHTML=Ge}const t=this.title?[h$2("title",this.title)]:[],ke=(Ge,Be,je)=>h$2(Ge,{...Be,key:`${Ge}-${je}`});return h$2("svg",e,this.raw?void 0:t.concat([this.$slots.default?this.$slots.default():this.icon?[...this.icon.paths.map((Ge,Be)=>ke("path",Ge,Be)),...this.icon.polygons.map((Ge,Be)=>ke("polygon",Ge,Be))]:[]]))}});function w$2(Oe,e){e===void 0&&(e={});var t=e.insertAt;if(Oe&&typeof document<"u"){var ke=document.head||document.getElementsByTagName("head")[0],Ge=document.createElement("style");Ge.type="text/css",t==="top"&&ke.firstChild?ke.insertBefore(Ge,ke.firstChild):ke.appendChild(Ge),Ge.styleSheet?Ge.styleSheet.cssText=Oe:Ge.appendChild(document.createTextNode(Oe))}}w$2(`.ov-icon {
  display: inline-block;
  overflow: visible;
  vertical-align: -0.2em;
}
`);w$2(`/* ---------------- spin ---------------- */
.ov-spin:not(.ov-hover),
.ov-spin.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-spin {
  animation: ov-spin 1s linear infinite;
}

.ov-spin:not(.ov-hover).ov-fast,
.ov-spin.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-spin.ov-fast {
  animation: ov-spin 0.7s linear infinite;
}

.ov-spin:not(.ov-hover).ov-slow,
.ov-spin.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-spin.ov-slow {
  animation: ov-spin 2s linear infinite;
}

/* ---------------- spin-pulse ---------------- */

.ov-spin-pulse:not(.ov-hover),
.ov-spin-pulse.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse {
  animation: ov-spin 1s infinite steps(8);
}

.ov-spin-pulse:not(.ov-hover).ov-fast,
.ov-spin-pulse.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse.ov-fast {
  animation: ov-spin 0.7s infinite steps(8);
}

.ov-spin-pulse:not(.ov-hover).ov-slow,
.ov-spin-pulse.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-spin-pulse.ov-slow {
  animation: ov-spin 2s infinite steps(8);
}

@keyframes ov-spin {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* ---------------- wrench ---------------- */
.ov-wrench:not(.ov-hover),
.ov-wrench.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-wrench {
  animation: ov-wrench 2.5s ease infinite;
}

.ov-wrench:not(.ov-hover).ov-fast,
.ov-wrench.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-wrench.ov-fast {
  animation: ov-wrench 1.2s ease infinite;
}

.ov-wrench:not(.ov-hover).ov-slow,
.ov-wrench.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-wrench.ov-slow {
  animation: ov-wrench 3.7s ease infinite;
}

@keyframes ov-wrench {
  0% {
    transform: rotate(-12deg);
  }

  8% {
    transform: rotate(12deg);
  }

  10%, 28%, 30%, 48%, 50%, 68% {
    transform: rotate(24deg);
  }

  18%, 20%, 38%, 40%, 58%, 60% {
    transform: rotate(-24deg);
  }

  75%, 100% {
    transform: rotate(0deg);
  }
}

/* ---------------- ring ---------------- */
.ov-ring:not(.ov-hover),
.ov-ring.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-ring {
  animation: ov-ring 2s ease infinite;
}

.ov-ring:not(.ov-hover).ov-fast,
.ov-ring.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-ring.ov-fast {
  animation: ov-ring 1s ease infinite;
}

.ov-ring:not(.ov-hover).ov-slow,
.ov-ring.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-ring.ov-slow {
  animation: ov-ring 3s ease infinite;
}

@keyframes ov-ring {
  0% {
    transform: rotate(-15deg);
  }

  2% {
    transform: rotate(15deg);
  }

  4%, 12% {
    transform: rotate(-18deg);
  }

  6% {
    transform: rotate(18deg);
  }

  8% {
    transform: rotate(-22deg);
  }

  10% {
    transform: rotate(22deg);
  }

  12% {
    transform: rotate(-18deg);
  }

  14% {
    transform: rotate(18deg);
  }

  16% {
    transform: rotate(-12deg);
  }

  18% {
    transform: rotate(12deg);
  }

  20%, 100% {
    transform: rotate(0deg);
  }
}

/* ---------------- pulse ---------------- */
.ov-pulse:not(.ov-hover),
.ov-pulse.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-pulse {
  animation: ov-pulse 2s linear infinite;
}

.ov-pulse:not(.ov-hover).ov-fast,
.ov-pulse.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-pulse.ov-fast {
  animation: ov-pulse 1s linear infinite;
}

.ov-pulse:not(.ov-hover).ov-slow,
.ov-pulse.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-pulse.ov-slow {
  animation: ov-pulse 3s linear infinite;
}

@keyframes ov-pulse {
  0% {
    transform: scale(1.1);
  }

  50% {
    transform: scale(0.8);
  }

  100% {
    transform: scale(1.1);
  }
}

/* ---------------- flash ---------------- */
.ov-flash:not(.ov-hover),
.ov-flash.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-flash {
  animation: ov-flash 2s ease infinite;
}

.ov-flash:not(.ov-hover).ov-fast,
.ov-flash.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-flash.ov-fast {
  animation: ov-flash 1s ease infinite;
}

.ov-flash:not(.ov-hover).ov-slow,
.ov-flash.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-flash.ov-slow {
  animation: ov-flash 3s ease infinite;
}

@keyframes ov-flash {
  0%, 100%, 50%{
    opacity: 1;
  }
  25%, 75%{
    opacity: 0;
  }
}

/* ---------------- float ---------------- */
.ov-float:not(.ov-hover),
.ov-float.ov-hover:hover,
.ov-parent.ov-hover:hover > .ov-float {
  animation: ov-float 2s linear infinite;
}

.ov-float:not(.ov-hover).ov-fast,
.ov-float.ov-hover.ov-fast:hover,
.ov-parent.ov-hover:hover > .ov-float.ov-fast {
  animation: ov-float 1s linear infinite;
}

.ov-float:not(.ov-hover).ov-slow,
.ov-float.ov-hover.ov-slow:hover,
.ov-parent.ov-hover:hover > .ov-float.ov-slow {
  animation: ov-float 3s linear infinite;
}

@keyframes ov-float {
  0%, 100% {
    transform: translateY(-3px);
  }
  50% {
    transform: translateY(3px);
  }
}
`);w$2(`.ov-flip-horizontal {
  transform: scale(-1, 1);
}

.ov-flip-vertical {
  transform: scale(1, -1);
}

.ov-flip-both {
  transform: scale(-1, -1);
}

.ov-inverse {
  color: #fff;
}
`);const la="abcdefghijklmnopqrstuvwyz0123456789",Ke=la.repeat(10),sa=()=>{const Oe=Math.floor(Math.random()*Ke.length);return Ke[Oe]},oa=Oe=>Array.from({length:Oe}).map(sa).join(""),j$1=(Oe="",e="")=>(Oe?`${Oe}-`:"")+oa(5)+(e?`-${e}`:""),ia="(prefers-color-scheme: dark)",Me="vue-dsfr-scheme",Ie="light",_e="dark",ge$1="system",We="data-fr-theme",Pe=Oe=>{const e=Oe??(localStorage.getItem(Me)||ge$1);return[Ie,_e,ge$1].includes(e)?e:ge$1},Ue=(Oe,e)=>(Oe=Pe(Oe),Oe===ge$1?e!=null&&e.matches?_e:Ie:Oe),Hc=Oe=>{if(typeof window>"u")return;const e={scheme:localStorage.getItem(Me)||ge$1,dataThemeAttribute:We,...Oe},t=window.matchMedia&&window.matchMedia(ia),ke=ref(Pe(e.scheme));localStorage.setItem(Me,ke.value);const Ge=ref(Ue(ke.value,t)),Be=ref(ke.value!==ge$1);watchEffect(()=>{var en;(en=document.body.parentElement)==null||en.setAttribute(e.dataThemeAttribute||We,Ge.value)}),t==null||t.addEventListener("change",en=>{Be.value||(en.matches?Ge.value=_e:Ge.value=Ie)}),!Be.value&&t!=null&&t.matches&&(Ge.value=_e);const je=en=>{if(ke.value=Pe(en),localStorage.setItem(Me,ke.value),[Ie,_e].includes(ke.value)){Ge.value=ke.value,Be.value=!0;return}Ge.value=Ue(ke.value,t),Be.value=!1},Ve=document.documentElement,Ze={subtree:!1,childList:!1,attributes:!0},Qe=new MutationObserver(en=>{for(const tn of en)if(tn.type==="attributes"&&tn.attributeName==="data-fr-theme"){const an=tn.target.getAttribute(tn.attributeName);an!==ke.value&&je(an)}});return Qe.observe(Ve,Ze),window.addEventListener("unload",()=>Qe.disconnect()),je(ke.value),{setScheme:je,theme:computed(()=>Ge.value),scheme:computed(()=>ke.value)}},ce$1=()=>{const Oe=ref(),e=ref(!1),t=ref(!1),ke=()=>{if(!Oe.value)return;Oe.value.style.setProperty("--collapser","none");const Ge=Oe.value.offsetHeight;Oe.value.style.setProperty("--collapse",`${-Ge}px`),Oe.value.style.setProperty("--collapser","")};return{collapse:Oe,collapsing:e,cssExpanded:t,doExpand:Ge=>{Oe.value&&(Ge===!0&&Oe.value.style.setProperty("--collapse-max-height","none"),window.requestAnimationFrame(()=>{e.value=!0,ke(),window.requestAnimationFrame(()=>{t.value=Ge})}))},adjust:ke,onTransitionEnd:Ge=>{e.value=!1,Oe.value&&Ge===!1&&Oe.value.style.removeProperty("--collapse-max-height")}}},da={class:"fr-accordion"},ua$1=["aria-expanded","aria-controls"],ca=["id"],fa=defineComponent({__name:"DsfrAccordion",props:{id:{default:()=>j$1("accordion")},expandedId:{default:void 0},title:{default:"Sans intitulé"},titleTag:{default:"h3"}},emits:["expand"],setup(Oe,{emit:e}){const t=Oe,ke=e,{collapse:Ge,collapsing:Be,cssExpanded:je,doExpand:Ve,onTransitionEnd:Ze}=ce$1(),Qe=computed(()=>t.expandedId===t.id);onMounted(()=>{Qe.value&&Ve(!0)}),watch(Qe,(tn,an)=>{tn!==an&&Ve(tn)});const en=()=>{ke("expand",Qe.value?void 0:t.id)};return(tn,an)=>(openBlock(),createElementBlock("section",da,[(openBlock(),createBlock(resolveDynamicComponent(tn.titleTag),{class:"fr-accordion__title"},{default:withCtx(()=>[createBaseVNode("button",{class:"fr-accordion__btn","aria-expanded":Qe.value,"aria-controls":tn.id,type:"button",onClick:an[0]||(an[0]=cn=>en())},[renderSlot(tn.$slots,"title",{},()=>[createBaseVNode("span",null,toDisplayString(tn.title),1)])],8,ua$1)]),_:3})),createBaseVNode("div",{id:tn.id,ref_key:"collapse",ref:Ge,class:normalizeClass(["fr-collapse",{"fr-collapse--expanded":unref(je),"fr-collapsing":unref(Be)}]),onTransitionend:an[1]||(an[1]=cn=>unref(Ze)(Qe.value))},[renderSlot(tn.$slots,"default")],42,ca)]))}}),pa=defineComponent({__name:"DsfrAccordionsGroup",setup(Oe){const e=ref(),t=ke=>{e.value=ke};return(ke,Ge)=>(openBlock(),createElementBlock("ul",{class:"fr-accordions-group",onExpand:Ge[0]||(Ge[0]=Be=>t(Be))},[renderSlot(ke.$slots,"default",{expandedId:e.value})],32))}}),ha=["id"],va={class:"alert-content"},ma={class:"fr-alert__description"},ga=["title","aria-label"],ba=defineComponent({__name:"DsfrAlert",props:{closed:{type:Boolean},closeable:{type:Boolean},id:{default:()=>j$1("basic","alert")},title:{default:""},description:{},small:{type:Boolean},titleTag:{default:"h3"},type:{default:"info"},closeButtonLabel:{default:"Fermer"}},emits:["close"],setup(Oe,{emit:e}){const t=Oe,ke=e,Ge=()=>ke("close"),Be=computed(()=>[`fr-alert--${t.type}`,{"fr-alert--sm":t.small}]);return(je,Ve)=>(openBlock(),createBlock(Transition,{name:"slide-fade"},{default:withCtx(()=>[je.closed?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,id:je.id,class:normalizeClass(["fr-alert",Be.value])},[createBaseVNode("div",va,[je.small?createCommentVNode("",!0):(openBlock(),createBlock(resolveDynamicComponent(je.titleTag),{key:0,class:"fr-alert__title"},{default:withCtx(()=>[createTextVNode(toDisplayString(je.title),1)]),_:1})),createBaseVNode("p",ma,[renderSlot(je.$slots,"default",{},()=>[createTextVNode(toDisplayString(je.description),1)])])]),je.closeable?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--close",title:je.closeButtonLabel,"aria-label":je.closeButtonLabel,onClick:Ge},null,8,ga)):createCommentVNode("",!0)],10,ha))]),_:3}))}}),Ia=["title","disabled","aria-disabled"],La={key:1},Ca=defineComponent({__name:"DsfrButton",props:{disabled:{type:Boolean},label:{default:void 0},secondary:{type:Boolean},tertiary:{type:Boolean},iconRight:{type:Boolean},iconOnly:{type:Boolean},noOutline:{type:Boolean},size:{default:"md"},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},setup(Oe,{expose:e}){const t=Oe,ke=computed(()=>["sm","small"].includes(t.size)),Ge=computed(()=>["md","medium"].includes(t.size)),Be=computed(()=>["lg","large"].includes(t.size)),je=ref(null);e({focus:()=>{var en;(en=je.value)==null||en.focus()}});const Ve=computed(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),Ze=computed(()=>t.iconOnly?1.25:.8325),Qe=computed(()=>typeof t.icon=="string"?{scale:Ze.value,name:t.icon}:{scale:Ze.value,...t.icon});return(en,tn)=>(openBlock(),createElementBlock("button",{ref_key:"btn",ref:je,class:normalizeClass(["fr-btn",{"fr-btn--secondary":en.secondary&&!en.tertiary,"fr-btn--tertiary":en.tertiary&&!en.secondary&&!en.noOutline,"fr-btn--tertiary-no-outline":en.tertiary&&!en.secondary&&en.noOutline,"fr-btn--sm":ke.value,"fr-btn--md":Ge.value,"fr-btn--lg":Be.value,"fr-btn--icon-right":!en.iconOnly&&Ve.value&&en.iconRight,"fr-btn--icon-left":!en.iconOnly&&Ve.value&&!en.iconRight,"inline-flex":!Ve.value,reverse:en.iconRight&&!Ve.value,"justify-center":!Ve.value&&en.iconOnly,[en.icon]:Ve.value}]),title:en.iconOnly?en.label:void 0,disabled:en.disabled,"aria-disabled":en.disabled,style:normalizeStyle(!Ve.value&&en.iconOnly?{"padding-inline":"0.5rem"}:{}),onClick:tn[0]||(tn[0]=an=>en.onClick?en.onClick(an):()=>{})},[en.icon&&!Ve.value?(openBlock(),createBlock(unref(g$1),normalizeProps(mergeProps({key:0},Qe.value)),null,16)):createCommentVNode("",!0),en.iconOnly?createCommentVNode("",!0):(openBlock(),createElementBlock("span",La,[createTextVNode(toDisplayString(en.label)+" ",1),renderSlot(en.$slots,"default",{},void 0,!0)]))],14,Ia))}}),ae$1=(Oe,e)=>{const t=Oe.__vccOpts||Oe;for(const[ke,Ge]of e)t[ke]=Ge;return t},Ae=ae$1(Ca,[["__scopeId","data-v-d2e9ceaf"]]),Ee=defineComponent({__name:"DsfrButtonGroup",props:{buttons:{default:()=>[]},reverse:{type:Boolean},equisized:{type:Boolean},iconRight:{type:Boolean},align:{default:void 0},inlineLayoutWhen:{type:[String,Boolean],default:"never"},size:{default:"md"}},setup(Oe){const e=Oe,t=ref(null),ke=computed(()=>["sm","small"].includes(e.size)),Ge=computed(()=>["md","medium"].includes(e.size)),Be=computed(()=>["lg","large"].includes(e.size)),je=computed(()=>["always","",!0].includes(e.inlineLayoutWhen)),Ve=computed(()=>["sm","small"].includes(e.inlineLayoutWhen)),Ze=computed(()=>["md","medium"].includes(e.inlineLayoutWhen)),Qe=computed(()=>["lg","large"].includes(e.inlineLayoutWhen)),en=computed(()=>e.align==="center"),tn=computed(()=>e.align==="right"),an=ref("auto"),cn=computed(()=>`--equisized-width: ${an.value};`),un=async()=>{var dn;let fn=0;await new Promise(pn=>setTimeout(pn,100)),(dn=t.value)==null||dn.querySelectorAll(".fr-btn").forEach(pn=>{const gn=pn,yn=gn.offsetWidth,vn=window.getComputedStyle(gn),An=+vn.marginLeft.replace("px",""),xn=+vn.marginRight.replace("px","");gn.style.width="var(--equisized-width)";const wn=yn+An+xn;wn>fn&&(fn=wn)}),an.value=`${fn}px`};return onMounted(async()=>{!t.value||!e.equisized||await un()}),(dn,fn)=>(openBlock(),createElementBlock("ul",{ref_key:"buttonsEl",ref:t,style:normalizeStyle(cn.value),class:normalizeClass(["fr-btns-group",{"fr-btns-group--equisized":dn.equisized,"fr-btns-group--sm":ke.value,"fr-btns-group--md":Ge.value,"fr-btns-group--lg":Be.value,"fr-btns-group--inline-sm":je.value||Ve.value,"fr-btns-group--inline-md":je.value||Ze.value,"fr-btns-group--inline-lg":je.value||Qe.value,"fr-btns-group--center":en.value,"fr-btns-group--right":tn.value,"fr-btns-group--icon-right":dn.iconRight,"fr-btns-group--inline-reverse":dn.reverse}]),"data-testid":"fr-btns"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(dn.buttons,({onClick:pn,...gn},yn)=>(openBlock(),createElementBlock("li",{key:yn},[createVNode(Ae,mergeProps({ref_for:!0},gn,{onClick:pn}),null,16,["onClick"])]))),128)),renderSlot(dn.$slots,"default")],6))}}),Qa=["id","name","checked","data-testid","data-test"],Ga=["for"],Ka={key:0,class:"required"},Wa={key:0,class:"fr-hint-text"},Ua={key:0,class:"fr-messages-group","aria-live":"assertive",role:"alert"},vt$1=defineComponent({inheritAttrs:!1,__name:"DsfrCheckbox",props:{id:{default:()=>j$1("basic","checkbox")},name:{},required:{type:Boolean},modelValue:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},label:{default:""},errorMessage:{default:""},validMessage:{default:""},hint:{default:""}},emits:["update:modelValue"],setup(Oe,{emit:e}){const t=Oe,ke=e,Ge=computed(()=>t.errorMessage||t.validMessage),Be=computed(()=>t.errorMessage?"fr-error-text":"fr-valid-text"),je=Ve=>{ke("update:modelValue",Ve.target.checked)};return(Ve,Ze)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":Ve.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-checkbox-group",{"fr-checkbox-group--error":Ve.errorMessage,"fr-checkbox-group--valid":!Ve.errorMessage&&Ve.validMessage,"fr-checkbox-group--sm":Ve.small}])},[createBaseVNode("input",mergeProps({id:Ve.id,name:Ve.name,type:"checkbox",checked:Ve.modelValue},Ve.$attrs,{"data-testid":`input-checkbox-${Ve.id}`,"data-test":`input-checkbox-${Ve.id}`,onChange:Ze[0]||(Ze[0]=Qe=>je(Qe))}),null,16,Qa),createBaseVNode("label",{for:Ve.id,class:"fr-label"},[renderSlot(Ve.$slots,"label",{},()=>[createTextVNode(toDisplayString(Ve.label)+" ",1),renderSlot(Ve.$slots,"required-tip",{},()=>[Ve.required?(openBlock(),createElementBlock("span",Ka," *")):createCommentVNode("",!0)])]),Ve.hint?(openBlock(),createElementBlock("span",Wa,toDisplayString(Ve.hint),1)):createCommentVNode("",!0)],8,Ga),Ge.value?(openBlock(),createElementBlock("div",Ua,[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",Be.value])},toDisplayString(Ge.value),3)])):createCommentVNode("",!0)],2)],2))}}),nn={class:"fr-consent-banner__content"},rn={class:"fr-text--sm"},ln$1={class:"fr-consent-banner__buttons fr-btns-group fr-btns-group--right fr-btns-group--inline-reverse fr-btns-group--inline-sm"},sn=defineComponent({__name:"DsfrConsent",props:{url:{default:""}},emits:["acceptAll","refuseAll","customize"],setup(Oe){const e=Oe,t=computed(()=>typeof e.url=="string"&&e.url.startsWith("http")),ke=computed(()=>e.url?t.value?"a":"RouterLink":"a"),Ge=computed(()=>({[t.value?"href":"to"]:e.url}));return(Be,je)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",nn,[createBaseVNode("p",rn,[renderSlot(Be.$slots,"default",{},()=>[createTextVNode(" Bienvenue ! Nous utilisons des cookies pour améliorer votre expérience et les services disponibles sur ce site. Pour en savoir plus, visitez la page "),(openBlock(),createBlock(resolveDynamicComponent(ke.value),mergeProps(Ge.value,{"data-testid":"link"}),{default:withCtx(()=>[createTextVNode(" Données personnelles et cookies ")]),_:1},16)),createTextVNode(". Vous pouvez, à tout moment, avoir le contrôle sur les cookies que vous souhaitez activer. ")])])]),createBaseVNode("ul",ln$1,[createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Autoriser tous les cookies",onClick:je[0]||(je[0]=withModifiers(Ve=>Be.$emit("acceptAll"),["stop"]))}," Tout accepter ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn",title:"Refuser tous les cookies",onClick:je[1]||(je[1]=withModifiers(Ve=>Be.$emit("refuseAll"),["stop"]))}," Tout refuser ")]),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--secondary","data-fr-opened":"false","aria-controls":"fr-consent-modal",title:"Personnaliser les cookies",onClick:je[2]||(je[2]=withModifiers(Ve=>Be.$emit("customize"),["stop"]))}," Personnaliser ")])])],64))}}),nr=["innerHTML"],Le$1=defineComponent({__name:"DsfrLogo",props:{small:{type:Boolean},large:{type:Boolean},logoText:{default:()=>"Gouvernement"}},setup(Oe){const e=Oe,t=computed(()=>Array.isArray(e.logoText)?e.logoText.join("<br>"):e.logoText);return(ke,Ge)=>(openBlock(),createElementBlock("p",{class:normalizeClass(["fr-logo",{"fr-logo--sm":ke.small&&!ke.large,"fr-logo--lg":ke.large&&!ke.small}]),innerHTML:t.value},null,10,nr))}}),rr={class:"fr-footer__partners"},lr={key:0,class:"fr-footer__partners-title"},sr={class:"fr-footer__partners-logos"},or={key:0,class:"fr-footer__partners-main"},ir=["href"],dr=["src","alt"],ur={class:"fr-footer__partners-sub"},cr=["href"],fr=["src","alt"],yt$1=defineComponent({__name:"DsfrFooterPartners",props:{mainPartner:{default:void 0},subPartners:{default:()=>[]},title:{default:""}},setup(Oe){return(e,t)=>(openBlock(),createElementBlock("div",rr,[e.title?(openBlock(),createElementBlock("h4",lr,toDisplayString(e.title),1)):createCommentVNode("",!0),createBaseVNode("div",sr,[e.mainPartner?(openBlock(),createElementBlock("div",or,[createBaseVNode("a",{class:"fr-footer__partners-link",href:e.mainPartner.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:e.mainPartner.logo,alt:e.mainPartner.name},null,8,dr)],8,ir)])):createCommentVNode("",!0),createBaseVNode("div",ur,[createBaseVNode("ul",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.subPartners,(ke,Ge)=>(openBlock(),createElementBlock("li",{key:Ge},[createBaseVNode("a",{class:"fr-footer__partners-link",href:ke.href,target:"_blank",rel:"noopener noreferrer"},[createBaseVNode("img",{class:"fr-footer__logo",src:ke.logo,alt:ke.name},null,8,fr)],8,cr)]))),128))])])])]))}}),Je=1,pr=defineComponent({__name:"DsfrFooterLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:void 0},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0}},setup(Oe){const e=Oe,t=computed(()=>{var en;return(en=e.href)==null?void 0:en.startsWith("http")}),ke=computed(()=>{var en;return(en=e.href)==null?void 0:en.startsWith("mailto")}),Ge=computed(()=>e.button?"button":t.value||ke.value?"a":"RouterLink"),Be=computed(()=>{if(!(!t.value&&!ke.value))return e.href}),je=computed(()=>{if(!(t.value||ke.value))return e.to}),Ve=computed(()=>je.value?{to:je.value}:{href:Be.value}),Ze=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),Qe=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:Je,...e.iconAttrs??{}}:{scale:Je,...e.icon??{},...e.iconAttrs??{}});return(en,tn)=>(openBlock(),createBlock(resolveDynamicComponent(Ge.value),mergeProps({class:["fr-footer__bottom-link",{"fr-btn--icon-right":Ze.value&&en.iconRight,"fr-btn--icon-left":Ze.value&&!en.iconRight,[String(en.icon)]:Ze.value}]},Ve.value,{target:en.target,onClick:withModifiers(en.onClick,["stop"])}),{default:withCtx(()=>{var an,cn;return[!Ze.value&&(en.icon||(an=en.iconAttrs)!=null&&an.name)&&!en.iconRight?(openBlock(),createBlock(unref(g$1),mergeProps({key:0,class:"fr-mr-1w"},Qe.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(en.label)+" ",1),!Ze.value&&(en.icon||(cn=en.iconAttrs)!=null&&cn.name)&&en.iconRight?(openBlock(),createBlock(unref(g$1),mergeProps({key:1,class:"fr-ml-1w"},Qe.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),hr={id:"footer",class:"fr-footer",role:"contentinfo"},vr={key:0,class:"fr-footer__top"},mr={class:"fr-container"},gr={class:"fr-grid-row fr-grid-row--start fr-grid-row--gutters"},br={class:"fr-container"},yr={class:"fr-footer__body"},kr={key:0,class:"fr-footer__brand fr-enlarge-link"},wr=["href"],_r=["src","alt"],$r=["src","alt"],Dr={key:1,class:"fr-footer__brand fr-enlarge-link"},Mr={class:"fr-footer__content"},Ir={class:"fr-footer__content-desc"},Lr={class:"fr-footer__content-list"},Cr=["href"],zr={class:"fr-footer__bottom"},Sr={class:"fr-footer__bottom-list"},Tr={key:0,class:"fr-footer__bottom-copy"},Ar=defineComponent({__name:"DsfrFooter",props:{a11yCompliance:{default:"non conforme"},a11yComplianceLink:{default:"/a11y"},legalLink:{default:"/mentions-legales"},homeLink:{default:"/"},homeTitle:{default:"Retour à l’accueil"},partners:{default:()=>{}},personalDataLink:{default:"/donnees-personnelles"},cookiesLink:{default:"/cookies"},logoText:{default:()=>["République","Française"]},descText:{default:void 0},beforeMandatoryLinks:{default:()=>[]},afterMandatoryLinks:{default:()=>[]},mandatoryLinks:{default:Oe=>[{label:`Accessibilité : ${Oe.a11yCompliance}`,to:Oe.a11yComplianceLink},{label:"Mentions légales",to:Oe.legalLink,"data-testid":"/mentions-legales"},{label:"Données personnelles",to:Oe.personalDataLink},{label:"Gestion des cookies",to:Oe.cookiesLink}]},ecosystemLinks:{default:()=>[{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"info.gouv.fr",href:"https://info.gouv.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}]},operatorLinkText:{default:"Revenir à l’accueil"},operatorTo:{default:"/"},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:void 0},operatorImgSrc:{default:void 0},operatorImgAlt:{default:""},licenceTo:{default:"https://github.com/etalab/licence-ouverte/blob/master/LO.md"},licenceLinkProps:{default:()=>{}},licenceText:{default:"Sauf mention contraire, tous les textes de ce site sont sous"},licenceName:{default:"licence etalab-2.0"}},setup(Oe){const e=Oe,t=computed(()=>[...e.beforeMandatoryLinks,...e.mandatoryLinks,...e.afterMandatoryLinks]),ke=useSlots(),Ge=computed(()=>{var Qe;return(Qe=ke["footer-link-lists"])==null?void 0:Qe.call(ke).length}),Be=computed(()=>{const Qe=e.licenceTo||e.licenceLinkProps.to;return Qe&&typeof Qe=="string"&&Qe.startsWith("http")}),je=computed(()=>Be.value?"":e.licenceTo),Ve=computed(()=>Be.value?e.licenceTo:""),Ze=computed(()=>typeof e.operatorTo=="string"&&e.operatorTo.startsWith("http"));return(Qe,en)=>{const tn=resolveComponent("RouterLink");return openBlock(),createElementBlock("footer",hr,[Ge.value?(openBlock(),createElementBlock("div",vr,[createBaseVNode("div",mr,[createBaseVNode("div",gr,[renderSlot(Qe.$slots,"footer-link-lists",{},void 0,!0)])])])):createCommentVNode("",!0),createBaseVNode("div",br,[createBaseVNode("div",yr,[Qe.operatorImgSrc?(openBlock(),createElementBlock("div",kr,[createVNode(Le$1,{"logo-text":Qe.logoText},null,8,["logo-text"]),Ze.value?(openBlock(),createElementBlock("a",{key:0,href:Qe.operatorTo,"data-testid":"card-link",class:"fr-footer__brand-link"},[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(Qe.operatorImgStyle),src:Qe.operatorImgSrc,alt:Qe.operatorImgAlt},null,12,_r)],8,wr)):(openBlock(),createBlock(tn,{key:1,class:"fr-footer__brand-link",to:Qe.homeLink,title:Qe.homeTitle},{default:withCtx(()=>[createBaseVNode("img",{class:"fr-footer__logo",style:normalizeStyle(Qe.operatorImgStyle),src:Qe.operatorImgSrc,alt:Qe.operatorImgAlt},null,12,$r)]),_:1},8,["to","title"]))])):(openBlock(),createElementBlock("div",Dr,[createVNode(tn,{to:Qe.homeLink,title:Qe.homeTitle},{default:withCtx(()=>[createVNode(Le$1,{"logo-text":Qe.logoText},null,8,["logo-text"])]),_:1},8,["to","title"])])),createBaseVNode("div",Mr,[createBaseVNode("p",Ir,[renderSlot(Qe.$slots,"description",{},()=>[createTextVNode(toDisplayString(Qe.descText),1)],!0)]),createBaseVNode("ul",Lr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(Qe.ecosystemLinks,(an,cn)=>(openBlock(),createElementBlock("li",{key:cn,class:"fr-footer__content-item"},[createBaseVNode("a",{class:"fr-footer__content-link",href:an.href,target:"_blank",rel:"noopener noreferrer"},toDisplayString(an.label),9,Cr)]))),128))])])]),Qe.partners?(openBlock(),createBlock(yt$1,normalizeProps(mergeProps({key:0},Qe.partners)),null,16)):createCommentVNode("",!0),createBaseVNode("div",zr,[createBaseVNode("ul",Sr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(t.value,(an,cn)=>(openBlock(),createElementBlock("li",{key:cn,class:"fr-footer__bottom-item"},[createVNode(pr,mergeProps({ref_for:!0},an),null,16)]))),128))]),Qe.licenceText?(openBlock(),createElementBlock("div",Tr,[createBaseVNode("p",null,[createTextVNode(toDisplayString(Qe.licenceText)+" ",1),(openBlock(),createBlock(resolveDynamicComponent(Be.value?"a":"RouterLink"),mergeProps({class:"fr-link-licence no-content-after",to:Be.value?null:je.value,href:Ve.value,target:Be.value?"_blank":void 0,rel:"noopener noreferrer"},Qe.licenceLinkProps),{default:withCtx(()=>[createTextVNode(toDisplayString(Qe.licenceName),1)]),_:1},16,["to","href","target"]))])])):createCommentVNode("",!0)])])])}}}),Er=ae$1(Ar,[["__scopeId","data-v-a64fdd76"]]),Or=["for"],jr={key:0,class:"required"},qr={key:0,class:"fr-hint-text"},Qr=defineComponent({inheritAttrs:!1,__name:"DsfrInput",props:{id:{default:()=>j$1("basic","input")},descriptionId:{default:void 0},hint:{default:""},isInvalid:{type:Boolean},isValid:{type:Boolean},isTextarea:{type:Boolean},isWithWrapper:{type:Boolean},labelVisible:{type:Boolean},label:{default:""},labelClass:{default:""},modelValue:{default:""},wrapperClass:{default:""}},emits:["update:modelValue"],setup(Oe,{expose:e}){const t=Oe,ke=useAttrs(),Ge=ref(null),Be=()=>{var Qe;return(Qe=Ge.value)==null?void 0:Qe.focus()},je=computed(()=>t.isTextarea?"textarea":"input"),Ve=computed(()=>t.isWithWrapper||ke.type==="date"||!!t.wrapperClass),Ze=computed(()=>["fr-label",{invisible:!t.labelVisible},t.labelClass]);return e({focus:Be}),(Qe,en)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("label",{class:normalizeClass(Ze.value),for:Qe.id},[renderSlot(Qe.$slots,"label",{},()=>[createTextVNode(toDisplayString(Qe.label)+" ",1),renderSlot(Qe.$slots,"required-tip",{},()=>["required"in Qe.$attrs&&Qe.$attrs.required!==!1?(openBlock(),createElementBlock("span",jr,"*")):createCommentVNode("",!0)],!0)],!0),Qe.hint?(openBlock(),createElementBlock("span",qr,toDisplayString(Qe.hint),1)):createCommentVNode("",!0)],10,Or),Ve.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass([{"fr-input-wrap":Qe.isWithWrapper||Qe.$attrs.type==="date"},Qe.wrapperClass])},[(openBlock(),createBlock(resolveDynamicComponent(je.value),mergeProps({id:Qe.id},Qe.$attrs,{ref_key:"__input",ref:Ge,class:["fr-input",{"fr-input--error":Qe.isInvalid,"fr-input--valid":Qe.isValid}],value:Qe.modelValue,"aria-describedby":Qe.descriptionId||void 0,onInput:en[1]||(en[1]=tn=>Qe.$emit("update:modelValue",tn.target.value))}),null,16,["id","class","value","aria-describedby"]))],2)):(openBlock(),createBlock(resolveDynamicComponent(je.value),mergeProps({key:0,id:Qe.id},Qe.$attrs,{ref_key:"__input",ref:Ge,class:["fr-input",{"fr-input--error":Qe.isInvalid,"fr-input--valid":Qe.isValid}],value:Qe.modelValue,"aria-describedby":Qe.descriptionId||void 0,onInput:en[0]||(en[0]=tn=>Qe.$emit("update:modelValue",tn.target.value))}),null,16,["id","class","value","aria-describedby"]))],64))}}),qe=ae$1(Qr,[["__scopeId","data-v-771f90df"]]),Fe=defineComponent({__name:"DsfrSearchBar",props:{id:{default:()=>j$1("search","input")},label:{default:""},labelVisible:{type:Boolean},large:{type:Boolean},buttonText:{default:""},modelValue:{default:""},placeholder:{default:"Rechercher"},disabled:{type:Boolean}},emits:["update:modelValue","search"],setup(Oe,{emit:e}){const t=e;return(ke,Ge)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-search-bar",{"fr-search-bar--lg":ke.large}]),role:"search"},[createVNode(qe,{id:ke.id,type:"search",placeholder:ke.placeholder,"model-value":ke.modelValue,"label-visible":ke.labelVisible,label:ke.label,disabled:ke.disabled,"aria-disabled":ke.disabled,"onUpdate:modelValue":Ge[0]||(Ge[0]=Be=>t("update:modelValue",Be)),onKeydown:Ge[1]||(Ge[1]=withKeys(Be=>t("search",ke.modelValue),["enter"]))},null,8,["id","placeholder","model-value","label-visible","label","disabled","aria-disabled"]),createVNode(Ae,{title:"Rechercher",disabled:ke.disabled,"aria-disabled":ke.disabled,onClick:Ge[2]||(Ge[2]=Be=>t("search",ke.modelValue))},{default:withCtx(()=>[createTextVNode(toDisplayString(ke.buttonText),1)]),_:1},8,["disabled","aria-disabled"])],2))}}),xe=1,kt$1=defineComponent({__name:"DsfrHeaderMenuLink",props:{button:{type:Boolean},icon:{default:void 0},iconAttrs:{default:()=>({})},iconRight:{type:Boolean},label:{default:""},target:{default:"_self"},onClick:{type:Function,default:()=>{}},to:{default:void 0},href:{default:void 0}},setup(Oe){const e=Oe,t=computed(()=>typeof e.path=="string"),ke=computed(()=>{var tn;return((tn=e.href)==null?void 0:tn.startsWith("http"))||t.value&&e.path.startsWith("http")}),Ge=computed(()=>{var tn;return((tn=e.href)==null?void 0:tn.startsWith("mailto"))||t.value&&e.path.startsWith("mailto")}),Be=computed(()=>e.button?"button":ke.value||Ge.value?"a":"RouterLink"),je=computed(()=>{if(!(!ke.value&&!Ge.value))return e.href!==void 0?e.href:e.path}),Ve=computed(()=>{if(!(ke.value||Ge.value))return e.to||e.path}),Ze=computed(()=>Ve.value?{to:Ve.value}:{href:je.value}),Qe=computed(()=>typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),en=computed(()=>typeof e.icon=="string"?{name:e.icon,scale:xe,...e.iconAttrs??{}}:{scale:xe,...e.icon??{},...e.iconAttrs??{}});return(tn,an)=>(openBlock(),createBlock(resolveDynamicComponent(Be.value),mergeProps({class:["fr-btn",{"fr-btn--icon-right":Qe.value&&tn.iconRight,"fr-btn--icon-left":Qe.value&&!tn.iconRight,[String(tn.icon)]:Qe.value}]},Ze.value,{target:tn.target,onClick:withModifiers(tn.onClick,["stop"])}),{default:withCtx(()=>{var cn,un;return[!Qe.value&&(tn.icon||(cn=tn.iconAttrs)!=null&&cn.name)&&!tn.iconRight?(openBlock(),createBlock(unref(g$1),mergeProps({key:0,class:"fr-mr-1w"},en.value),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(tn.label)+" ",1),!Qe.value&&(tn.icon||(un=tn.iconAttrs)!=null&&un.name)&&tn.iconRight?(openBlock(),createBlock(unref(g$1),mergeProps({key:1,class:"fr-ml-1w"},en.value),null,16)):createCommentVNode("",!0)]}),_:1},16,["class","target","onClick"]))}}),Gr=["aria-label"],Kr={class:"fr-btns-group"},Ne$1=defineComponent({__name:"DsfrHeaderMenuLinks",props:{links:{default:()=>[]},navAriaLabel:{default:"Menu secondaire"}},emits:["linkClick"],setup(Oe,{emit:e}){const t=e;return(ke,Ge)=>(openBlock(),createElementBlock("nav",{role:"navigation","aria-label":ke.navAriaLabel},[createBaseVNode("ul",Kr,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ke.links,(Be,je)=>(openBlock(),createElementBlock("li",{key:je},[createVNode(kt$1,mergeProps({ref_for:!0},Be,{"on-click":Ve=>{var Ze;t("linkClick",Ve),(Ze=Be.onClick)==null||Ze.call(Be,Ve)}}),null,16,["on-click"])]))),128))])],8,Gr))}}),Wr={role:"navigation",class:"fr-translate fr-nav"},Ur={class:"fr-nav__item"},Zr=["aria-controls","aria-expanded"],Jr={class:"fr-hidden-lg"},xr=["id"],el={class:"fr-menu__list"},tl=["hreflang","lang","aria-current","href","onClick"],Xe=defineComponent({__name:"DsfrLanguageSelector",props:{id:{default:()=>j$1("translate")},languages:{default:()=>[]},currentLanguage:{default:"fr"}},emits:["select"],setup(Oe,{emit:e}){const t=Oe,ke=e,{collapse:Ge,collapsing:Be,cssExpanded:je,doExpand:Ve,onTransitionEnd:Ze}=ce$1(),Qe=ref(!1);function en(an){Qe.value=!1,ke("select",an)}const tn=computed(()=>t.languages.find(({codeIso:an})=>an===t.currentLanguage));return watch(Qe,(an,cn)=>{an!==cn&&Ve(an)}),(an,cn)=>{var un,dn;return openBlock(),createElementBlock("nav",Wr,[createBaseVNode("div",Ur,[createBaseVNode("button",{class:"fr-translate__btn fr-btn fr-btn--tertiary","aria-controls":an.id,"aria-expanded":Qe.value,title:"Sélectionner une langue",type:"button",onClick:cn[0]||(cn[0]=withModifiers(fn=>Qe.value=!Qe.value,["prevent","stop"]))},[createTextVNode(toDisplayString((un=tn.value)==null?void 0:un.codeIso.toUpperCase()),1),createBaseVNode("span",Jr," - "+toDisplayString((dn=tn.value)==null?void 0:dn.label),1)],8,Zr),createBaseVNode("div",{id:an.id,ref_key:"collapse",ref:Ge,class:normalizeClass(["fr-collapse fr-translate__menu fr-menu",{"fr-collapse--expanded":unref(je),"fr-collapsing":unref(Be)}]),onTransitionend:cn[1]||(cn[1]=fn=>unref(Ze)(Qe.value))},[createBaseVNode("ul",el,[(openBlock(!0),createElementBlock(Fragment,null,renderList(an.languages,(fn,pn)=>(openBlock(),createElementBlock("li",{key:pn},[createBaseVNode("a",{class:"fr-translate__language fr-nav__link",hreflang:fn.codeIso,lang:fn.codeIso,"aria-current":an.currentLanguage===fn.codeIso?!0:void 0,href:`#${fn.codeIso}`,onClick:withModifiers(gn=>en(fn),["prevent","stop"])},toDisplayString(`${fn.codeIso.toUpperCase()} - ${fn.label}`),9,tl)]))),128))])],42,xr)])])}}}),al={role:"banner",class:"fr-header"},nl={class:"fr-header__body"},rl={class:"fr-container width-inherit"},ll={class:"fr-header__body-row"},sl={class:"fr-header__brand fr-enlarge-link"},ol$1={class:"fr-header__brand-top"},il={class:"fr-header__logo"},dl={key:0,class:"fr-header__operator"},ul=["src","alt"],cl={key:1,class:"fr-header__navbar"},fl$1=["aria-label","title","data-fr-opened"],pl=["aria-label","title"],hl={key:0,class:"fr-header__service"},vl={class:"fr-header__service-title"},ml={key:0,class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},gl={key:0,class:"fr-header__service-tagline"},bl={key:1,class:"fr-header__service"},yl=createBaseVNode("p",{class:"fr-header__service-title"},[createBaseVNode("span",{class:"fr-badge fr-badge--sm fr-badge--green-emeraude"},"BETA")],-1),kl=[yl],wl={class:"fr-header__tools"},_l={key:0,class:"fr-header__tools-links"},$l={key:1,class:"fr-header__search fr-modal"},Dl=["aria-label"],Ml={class:"fr-container"},Il={class:"fr-header__menu-links"},Ll={role:"navigation"},Cl={key:1,class:"flex justify-center items-center"},zl={key:1,class:"fr-hidden fr-unhidden-lg"},Sl=defineComponent({__name:"DsfrHeader",props:{searchbarId:{default:"searchbar-header"},serviceTitle:{default:void 0},serviceDescription:{default:void 0},homeTo:{default:"/"},logoText:{default:()=>"Gouvernement"},modelValue:{default:""},operatorImgAlt:{default:""},operatorImgSrc:{default:""},operatorImgStyle:{type:[Boolean,null,String,Object,Array],default:()=>({})},placeholder:{default:"Rechercher..."},quickLinks:{default:()=>[]},languageSelector:{default:void 0},searchLabel:{default:"Recherche"},quickLinksAriaLabel:{default:"Menu secondaire"},showSearch:{type:Boolean},showSearchLabel:{default:"Recherche"},showBeta:{type:Boolean},menuLabel:{default:"Menu"},menuModalLabel:{default:"Menu modal"},closeMenuModalLabel:{default:"Fermer"},homeLabel:{default:"Accueil"}},emits:["update:modelValue","search","language-select"],setup(Oe,{emit:e}){const t=Oe,ke=e,Ge=toRef(t,"languageSelector"),Be=ref(!1),je=ref(!1),Ve=ref(!1),Ze=()=>{var fn;Ve.value=!1,Be.value=!1,je.value=!1,(fn=document.getElementById("button-menu"))==null||fn.focus()},Qe=fn=>{fn.key==="Escape"&&Ze()};onMounted(()=>{document.addEventListener("keydown",Qe)}),onUnmounted(()=>{document.removeEventListener("keydown",Qe)});const en=()=>{var fn;Ve.value=!0,Be.value=!0,je.value=!1,(fn=document.getElementById("close-button"))==null||fn.focus()},tn=()=>{Ve.value=!0,Be.value=!1,je.value=!0},an=Ze,cn=useSlots(),un=computed(()=>{var fn;return!!((fn=cn.operator)!=null&&fn.call(cn).length)||!!t.operatorImgSrc}),dn=computed(()=>!!cn.mainnav);return(fn,pn)=>{var gn,yn,vn;const An=resolveComponent("RouterLink");return openBlock(),createElementBlock("header",al,[createBaseVNode("div",nl,[createBaseVNode("div",rl,[createBaseVNode("div",ll,[createBaseVNode("div",sl,[createBaseVNode("div",ol$1,[createBaseVNode("div",il,[createVNode(Le$1,{"logo-text":fn.logoText,"data-testid":"header-logo"},null,8,["logo-text"])]),un.value?(openBlock(),createElementBlock("div",dl,[renderSlot(fn.$slots,"operator",{},()=>[fn.operatorImgSrc?(openBlock(),createElementBlock("img",{key:0,class:"fr-responsive-img",src:fn.operatorImgSrc,alt:fn.operatorImgAlt,style:normalizeStyle(fn.operatorImgStyle)},null,12,ul)):createCommentVNode("",!0)])])):createCommentVNode("",!0),fn.showSearch||dn.value||(gn=fn.quickLinks)!=null&&gn.length?(openBlock(),createElementBlock("div",cl,[fn.showSearch?(openBlock(),createElementBlock("button",{key:0,class:"fr-btn fr-btn--search","aria-controls":"header-search","aria-label":fn.showSearchLabel,title:fn.showSearchLabel,"data-fr-opened":je.value,onClick:pn[0]||(pn[0]=withModifiers(xn=>tn(),["prevent","stop"]))},null,8,fl$1)):createCommentVNode("",!0),dn.value||(yn=fn.quickLinks)!=null&&yn.length?(openBlock(),createElementBlock("button",{key:1,id:"button-menu",class:"fr-btn--menu fr-btn","data-fr-opened":en,"aria-controls":"header-navigation","aria-haspopup":"menu","aria-label":fn.menuLabel,title:fn.menuLabel,"data-testid":"open-menu-btn",onClick:pn[1]||(pn[1]=withModifiers(xn=>en(),["prevent","stop"]))},null,8,pl)):createCommentVNode("",!0)])):createCommentVNode("",!0)]),fn.serviceTitle?(openBlock(),createElementBlock("div",hl,[createVNode(An,mergeProps({to:fn.homeTo,title:`${fn.homeLabel} - ${fn.serviceTitle}`},fn.$attrs),{default:withCtx(()=>[createBaseVNode("p",vl,[createTextVNode(toDisplayString(fn.serviceTitle)+" ",1),fn.showBeta?(openBlock(),createElementBlock("span",ml," BETA ")):createCommentVNode("",!0)])]),_:1},16,["to","title"]),fn.serviceDescription?(openBlock(),createElementBlock("p",gl,toDisplayString(fn.serviceDescription),1)):createCommentVNode("",!0)])):createCommentVNode("",!0),!fn.serviceTitle&&fn.showBeta?(openBlock(),createElementBlock("div",bl,kl)):createCommentVNode("",!0)]),createBaseVNode("div",wl,[(vn=fn.quickLinks)!=null&&vn.length||Ge.value?(openBlock(),createElementBlock("div",_l,[Be.value?createCommentVNode("",!0):(openBlock(),createBlock(Ne$1,{key:0,links:fn.quickLinks,"nav-aria-label":fn.quickLinksAriaLabel},null,8,["links","nav-aria-label"])),Ge.value?(openBlock(),createBlock(Xe,mergeProps({key:1},Ge.value,{onSelect:pn[2]||(pn[2]=xn=>ke("language-select",xn))}),null,16)):createCommentVNode("",!0)])):createCommentVNode("",!0),fn.showSearch?(openBlock(),createElementBlock("div",$l,[createVNode(Fe,{"searchbar-id":fn.searchbarId,label:fn.searchLabel,"model-value":fn.modelValue,placeholder:fn.placeholder,style:{"justify-content":"flex-end"},"onUpdate:modelValue":pn[3]||(pn[3]=xn=>ke("update:modelValue",xn)),onSearch:pn[4]||(pn[4]=xn=>ke("search",xn))},null,8,["searchbar-id","label","model-value","placeholder"])])):createCommentVNode("",!0)])]),fn.showSearch||dn.value||fn.quickLinks&&fn.quickLinks.length||Ge.value?(openBlock(),createElementBlock("div",{key:0,id:"header-navigation",class:normalizeClass(["fr-header__menu fr-modal",{"fr-modal--opened":Ve.value}]),"aria-label":fn.menuModalLabel,role:"dialog","aria-modal":"true"},[createBaseVNode("div",Ml,[createBaseVNode("button",{id:"close-button",class:"fr-btn fr-btn--close","aria-controls":"header-navigation","data-testid":"close-modal-btn",onClick:pn[5]||(pn[5]=withModifiers(xn=>Ze(),["prevent","stop"]))},toDisplayString(fn.closeMenuModalLabel),1),createBaseVNode("div",Il,[Ge.value?(openBlock(),createBlock(Xe,mergeProps({key:0},Ge.value,{onSelect:pn[6]||(pn[6]=xn=>Ge.value.currentLanguage=xn.codeIso)}),null,16)):createCommentVNode("",!0),createBaseVNode("nav",Ll,[Be.value?(openBlock(),createBlock(Ne$1,{key:0,role:"navigation",links:fn.quickLinks,"nav-aria-label":fn.quickLinksAriaLabel,onLinkClick:unref(an)},null,8,["links","nav-aria-label","onLinkClick"])):createCommentVNode("",!0)])]),Ve.value?renderSlot(fn.$slots,"mainnav",{key:0,hidemodal:Ze}):createCommentVNode("",!0),je.value?(openBlock(),createElementBlock("div",Cl,[createVNode(Fe,{"searchbar-id":fn.searchbarId,"model-value":fn.modelValue,placeholder:fn.placeholder,"onUpdate:modelValue":pn[7]||(pn[7]=xn=>ke("update:modelValue",xn)),onSearch:pn[8]||(pn[8]=xn=>ke("search",xn))},null,8,["searchbar-id","model-value","placeholder"])])):createCommentVNode("",!0)])],10,Dl)):createCommentVNode("",!0),dn.value&&!Ve.value?(openBlock(),createElementBlock("div",zl,[renderSlot(fn.$slots,"mainnav",{hidemodal:Ze})])):createCommentVNode("",!0),renderSlot(fn.$slots,"default")])])])}}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var wt$1=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Ce=wt$1.join(","),_t$1=typeof Element>"u",ve$1=_t$1?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ze=!_t$1&&Element.prototype.getRootNode?function(Oe){var e;return Oe==null||(e=Oe.getRootNode)===null||e===void 0?void 0:e.call(Oe)}:function(Oe){return Oe==null?void 0:Oe.ownerDocument},Se=function Oe(e,t){var ke;t===void 0&&(t=!0);var Ge=e==null||(ke=e.getAttribute)===null||ke===void 0?void 0:ke.call(e,"inert"),Be=Ge===""||Ge==="true",je=Be||t&&e&&Oe(e.parentNode);return je},Fl=function(Oe){var e,t=Oe==null||(e=Oe.getAttribute)===null||e===void 0?void 0:e.call(Oe,"contenteditable");return t===""||t==="true"},$t$1=function(Oe,e,t){if(Se(Oe))return[];var ke=Array.prototype.slice.apply(Oe.querySelectorAll(Ce));return e&&ve$1.call(Oe,Ce)&&ke.unshift(Oe),ke=ke.filter(t),ke},Dt$1=function Oe(e,t,ke){for(var Ge=[],Be=Array.from(e);Be.length;){var je=Be.shift();if(!Se(je,!1))if(je.tagName==="SLOT"){var Ve=je.assignedElements(),Ze=Ve.length?Ve:je.children,Qe=Oe(Ze,!0,ke);ke.flatten?Ge.push.apply(Ge,Qe):Ge.push({scopeParent:je,candidates:Qe})}else{var en=ve$1.call(je,Ce);en&&ke.filter(je)&&(t||!e.includes(je))&&Ge.push(je);var tn=je.shadowRoot||typeof ke.getShadowRoot=="function"&&ke.getShadowRoot(je),an=!Se(tn,!1)&&(!ke.shadowRootFilter||ke.shadowRootFilter(je));if(tn&&an){var cn=Oe(tn===!0?je.children:tn.children,!0,ke);ke.flatten?Ge.push.apply(Ge,cn):Ge.push({scopeParent:je,candidates:cn})}else Be.unshift.apply(Be,je.children)}}return Ge},Mt$1=function(Oe){return!isNaN(parseInt(Oe.getAttribute("tabindex"),10))},he$1=function(Oe){if(!Oe)throw new Error("No node provided");return Oe.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(Oe.tagName)||Fl(Oe))&&!Mt$1(Oe)?0:Oe.tabIndex},Nl=function(Oe,e){var t=he$1(Oe);return t<0&&e&&!Mt$1(Oe)?0:t},Xl=function(Oe,e){return Oe.tabIndex===e.tabIndex?Oe.documentOrder-e.documentOrder:Oe.tabIndex-e.tabIndex},It$1=function(Oe){return Oe.tagName==="INPUT"},Yl=function(Oe){return It$1(Oe)&&Oe.type==="hidden"},Ol=function(Oe){var e=Oe.tagName==="DETAILS"&&Array.prototype.slice.apply(Oe.children).some(function(t){return t.tagName==="SUMMARY"});return e},jl=function(Oe,e){for(var t=0;t<Oe.length;t++)if(Oe[t].checked&&Oe[t].form===e)return Oe[t]},ql=function(Oe){if(!Oe.name)return!0;var e=Oe.form||ze(Oe),t=function(Be){return e.querySelectorAll('input[type="radio"][name="'+Be+'"]')},ke;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")ke=t(window.CSS.escape(Oe.name));else try{ke=t(Oe.name)}catch(Be){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",Be.message),!1}var Ge=jl(ke,Oe.form);return!Ge||Ge===Oe},Ql=function(Oe){return It$1(Oe)&&Oe.type==="radio"},Gl=function(Oe){return Ql(Oe)&&!ql(Oe)},Kl=function(Oe){var e,t=Oe&&ze(Oe),ke=(e=t)===null||e===void 0?void 0:e.host,Ge=!1;if(t&&t!==Oe){var Be,je,Ve;for(Ge=!!((Be=ke)!==null&&Be!==void 0&&(je=Be.ownerDocument)!==null&&je!==void 0&&je.contains(ke)||Oe!=null&&(Ve=Oe.ownerDocument)!==null&&Ve!==void 0&&Ve.contains(Oe));!Ge&&ke;){var Ze,Qe,en;t=ze(ke),ke=(Ze=t)===null||Ze===void 0?void 0:Ze.host,Ge=!!((Qe=ke)!==null&&Qe!==void 0&&(en=Qe.ownerDocument)!==null&&en!==void 0&&en.contains(ke))}}return Ge},et$2=function(Oe){var e=Oe.getBoundingClientRect(),t=e.width,ke=e.height;return t===0&&ke===0},Wl=function(Oe,e){var t=e.displayCheck,ke=e.getShadowRoot;if(getComputedStyle(Oe).visibility==="hidden")return!0;var Ge=ve$1.call(Oe,"details>summary:first-of-type"),Be=Ge?Oe.parentElement:Oe;if(ve$1.call(Be,"details:not([open]) *"))return!0;if(!t||t==="full"||t==="legacy-full"){if(typeof ke=="function"){for(var je=Oe;Oe;){var Ve=Oe.parentElement,Ze=ze(Oe);if(Ve&&!Ve.shadowRoot&&ke(Ve)===!0)return et$2(Oe);Oe.assignedSlot?Oe=Oe.assignedSlot:!Ve&&Ze!==Oe.ownerDocument?Oe=Ze.host:Oe=Ve}Oe=je}if(Kl(Oe))return!Oe.getClientRects().length;if(t!=="legacy-full")return!0}else if(t==="non-zero-area")return et$2(Oe);return!1},Ul=function(Oe){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(Oe.tagName))for(var e=Oe.parentElement;e;){if(e.tagName==="FIELDSET"&&e.disabled){for(var t=0;t<e.children.length;t++){var ke=e.children.item(t);if(ke.tagName==="LEGEND")return ve$1.call(e,"fieldset[disabled] *")?!0:!ke.contains(Oe)}return!0}e=e.parentElement}return!1},Te=function(Oe,e){return!(e.disabled||Se(e)||Yl(e)||Wl(e,Oe)||Ol(e)||Ul(e))},Ye=function(Oe,e){return!(Gl(e)||he$1(e)<0||!Te(Oe,e))},Zl=function(Oe){var e=parseInt(Oe.getAttribute("tabindex"),10);return!!(isNaN(e)||e>=0)},Jl=function Oe(e){var t=[],ke=[];return e.forEach(function(Ge,Be){var je=!!Ge.scopeParent,Ve=je?Ge.scopeParent:Ge,Ze=Nl(Ve,je),Qe=je?Oe(Ge.candidates):Ve;Ze===0?je?t.push.apply(t,Qe):t.push(Ve):ke.push({documentOrder:Be,tabIndex:Ze,item:Ge,isScope:je,content:Qe})}),ke.sort(Xl).reduce(function(Ge,Be){return Be.isScope?Ge.push.apply(Ge,Be.content):Ge.push(Be.content),Ge},[]).concat(t)},xl=function(Oe,e){e=e||{};var t;return e.getShadowRoot?t=Dt$1([Oe],e.includeContainer,{filter:Ye.bind(null,e),flatten:!1,getShadowRoot:e.getShadowRoot,shadowRootFilter:Zl}):t=$t$1(Oe,e.includeContainer,Ye.bind(null,e)),Jl(t)},es=function(Oe,e){e=e||{};var t;return e.getShadowRoot?t=Dt$1([Oe],e.includeContainer,{filter:Te.bind(null,e),flatten:!0,getShadowRoot:e.getShadowRoot}):t=$t$1(Oe,e.includeContainer,Te.bind(null,e)),t},me$1=function(Oe,e){if(e=e||{},!Oe)throw new Error("No node provided");return ve$1.call(Oe,Ce)===!1?!1:Ye(e,Oe)},ts=wt$1.concat("iframe").join(","),Re=function(Oe,e){if(e=e||{},!Oe)throw new Error("No node provided");return ve$1.call(Oe,ts)===!1?!1:Te(e,Oe)};/*!
* focus-trap 7.5.4
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function tt$1(Oe,e){var t=Object.keys(Oe);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(Oe);e&&(ke=ke.filter(function(Ge){return Object.getOwnPropertyDescriptor(Oe,Ge).enumerable})),t.push.apply(t,ke)}return t}function at$1(Oe){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?tt$1(Object(t),!0).forEach(function(ke){as(Oe,ke,t[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Oe,Object.getOwnPropertyDescriptors(t)):tt$1(Object(t)).forEach(function(ke){Object.defineProperty(Oe,ke,Object.getOwnPropertyDescriptor(t,ke))})}return Oe}function as(Oe,e,t){return e=rs(e),e in Oe?Object.defineProperty(Oe,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):Oe[e]=t,Oe}function ns$2(Oe,e){if(typeof Oe!="object"||Oe===null)return Oe;var t=Oe[Symbol.toPrimitive];if(t!==void 0){var ke=t.call(Oe,e);if(typeof ke!="object")return ke;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(Oe)}function rs(Oe){var e=ns$2(Oe,"string");return typeof e=="symbol"?e:String(e)}var nt$1={activateTrap:function(Oe,e){if(Oe.length>0){var t=Oe[Oe.length-1];t!==e&&t.pause()}var ke=Oe.indexOf(e);ke===-1||Oe.splice(ke,1),Oe.push(e)},deactivateTrap:function(Oe,e){var t=Oe.indexOf(e);t!==-1&&Oe.splice(t,1),Oe.length>0&&Oe[Oe.length-1].unpause()}},ls=function(Oe){return Oe.tagName&&Oe.tagName.toLowerCase()==="input"&&typeof Oe.select=="function"},ss=function(Oe){return(Oe==null?void 0:Oe.key)==="Escape"||(Oe==null?void 0:Oe.key)==="Esc"||(Oe==null?void 0:Oe.keyCode)===27},$e=function(Oe){return(Oe==null?void 0:Oe.key)==="Tab"||(Oe==null?void 0:Oe.keyCode)===9},os=function(Oe){return $e(Oe)&&!Oe.shiftKey},is=function(Oe){return $e(Oe)&&Oe.shiftKey},rt$1=function(Oe){return setTimeout(Oe,0)},lt$2=function(Oe,e){var t=-1;return Oe.every(function(ke,Ge){return e(ke)?(t=Ge,!1):!0}),t},we$1=function(Oe){for(var e=arguments.length,t=new Array(e>1?e-1:0),ke=1;ke<e;ke++)t[ke-1]=arguments[ke];return typeof Oe=="function"?Oe.apply(void 0,t):Oe},De=function(Oe){return Oe.target.shadowRoot&&typeof Oe.composedPath=="function"?Oe.composedPath()[0]:Oe.target},ds=[],us=function(Oe,e){var t=(e==null?void 0:e.document)||document,ke=(e==null?void 0:e.trapStack)||ds,Ge=at$1({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:os,isKeyBackward:is},e),Be={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},je,Ve=function(Pn,En,Cn){return Pn&&Pn[En]!==void 0?Pn[En]:Ge[Cn||En]},Ze=function(Pn,En){var Cn=typeof(En==null?void 0:En.composedPath)=="function"?En.composedPath():void 0;return Be.containerGroups.findIndex(function(Rn){var Tn=Rn.container,Nn=Rn.tabbableNodes;return Tn.contains(Pn)||(Cn==null?void 0:Cn.includes(Tn))||Nn.find(function(Gn){return Gn===Pn})})},Qe=function(Pn){var En=Ge[Pn];if(typeof En=="function"){for(var Cn=arguments.length,Rn=new Array(Cn>1?Cn-1:0),Tn=1;Tn<Cn;Tn++)Rn[Tn-1]=arguments[Tn];En=En.apply(void 0,Rn)}if(En===!0&&(En=void 0),!En){if(En===void 0||En===!1)return En;throw new Error("`".concat(Pn,"` was specified but was not a node, or did not return a node"))}var Nn=En;if(typeof En=="string"&&(Nn=t.querySelector(En),!Nn))throw new Error("`".concat(Pn,"` as selector refers to no known node"));return Nn},en=function(){var Pn=Qe("initialFocus");if(Pn===!1)return!1;if(Pn===void 0||!Re(Pn,Ge.tabbableOptions))if(Ze(t.activeElement)>=0)Pn=t.activeElement;else{var En=Be.tabbableGroups[0],Cn=En&&En.firstTabbableNode;Pn=Cn||Qe("fallbackFocus")}if(!Pn)throw new Error("Your focus-trap needs to have at least one focusable element");return Pn},tn=function(){if(Be.containerGroups=Be.containers.map(function(Pn){var En=xl(Pn,Ge.tabbableOptions),Cn=es(Pn,Ge.tabbableOptions),Rn=En.length>0?En[0]:void 0,Tn=En.length>0?En[En.length-1]:void 0,Nn=Cn.find(function($n){return me$1($n)}),Gn=Cn.slice().reverse().find(function($n){return me$1($n)}),zn=!!En.find(function($n){return he$1($n)>0});return{container:Pn,tabbableNodes:En,focusableNodes:Cn,posTabIndexesFound:zn,firstTabbableNode:Rn,lastTabbableNode:Tn,firstDomTabbableNode:Nn,lastDomTabbableNode:Gn,nextTabbableNode:function($n){var Qn=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Hn=En.indexOf($n);return Hn<0?Qn?Cn.slice(Cn.indexOf($n)+1).find(function(Ni){return me$1(Ni)}):Cn.slice(0,Cn.indexOf($n)).reverse().find(function(Ni){return me$1(Ni)}):En[Hn+(Qn?1:-1)]}}}),Be.tabbableGroups=Be.containerGroups.filter(function(Pn){return Pn.tabbableNodes.length>0}),Be.tabbableGroups.length<=0&&!Qe("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(Be.containerGroups.find(function(Pn){return Pn.posTabIndexesFound})&&Be.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},an=function Pn(En){var Cn=En.activeElement;if(Cn)return Cn.shadowRoot&&Cn.shadowRoot.activeElement!==null?Pn(Cn.shadowRoot):Cn},cn=function Pn(En){if(En!==!1&&En!==an(document)){if(!En||!En.focus){Pn(en());return}En.focus({preventScroll:!!Ge.preventScroll}),Be.mostRecentlyFocusedNode=En,ls(En)&&En.select()}},un=function(Pn){var En=Qe("setReturnFocus",Pn);return En||(En===!1?!1:Pn)},dn=function(Pn){var En=Pn.target,Cn=Pn.event,Rn=Pn.isBackward,Tn=Rn===void 0?!1:Rn;En=En||De(Cn),tn();var Nn=null;if(Be.tabbableGroups.length>0){var Gn=Ze(En,Cn),zn=Gn>=0?Be.containerGroups[Gn]:void 0;if(Gn<0)Tn?Nn=Be.tabbableGroups[Be.tabbableGroups.length-1].lastTabbableNode:Nn=Be.tabbableGroups[0].firstTabbableNode;else if(Tn){var $n=lt$2(Be.tabbableGroups,function(Un){var Ci=Un.firstTabbableNode;return En===Ci});if($n<0&&(zn.container===En||Re(En,Ge.tabbableOptions)&&!me$1(En,Ge.tabbableOptions)&&!zn.nextTabbableNode(En,!1))&&($n=Gn),$n>=0){var Qn=$n===0?Be.tabbableGroups.length-1:$n-1,Hn=Be.tabbableGroups[Qn];Nn=he$1(En)>=0?Hn.lastTabbableNode:Hn.lastDomTabbableNode}else $e(Cn)||(Nn=zn.nextTabbableNode(En,!1))}else{var Ni=lt$2(Be.tabbableGroups,function(Un){var Ci=Un.lastTabbableNode;return En===Ci});if(Ni<0&&(zn.container===En||Re(En,Ge.tabbableOptions)&&!me$1(En,Ge.tabbableOptions)&&!zn.nextTabbableNode(En))&&(Ni=Gn),Ni>=0){var On=Ni===Be.tabbableGroups.length-1?0:Ni+1,qn=Be.tabbableGroups[On];Nn=he$1(En)>=0?qn.firstTabbableNode:qn.firstDomTabbableNode}else $e(Cn)||(Nn=zn.nextTabbableNode(En))}}else Nn=Qe("fallbackFocus");return Nn},fn=function(Pn){var En=De(Pn);if(!(Ze(En,Pn)>=0)){if(we$1(Ge.clickOutsideDeactivates,Pn)){je.deactivate({returnFocus:Ge.returnFocusOnDeactivate});return}we$1(Ge.allowOutsideClick,Pn)||Pn.preventDefault()}},pn=function(Pn){var En=De(Pn),Cn=Ze(En,Pn)>=0;if(Cn||En instanceof Document)Cn&&(Be.mostRecentlyFocusedNode=En);else{Pn.stopImmediatePropagation();var Rn,Tn=!0;if(Be.mostRecentlyFocusedNode)if(he$1(Be.mostRecentlyFocusedNode)>0){var Nn=Ze(Be.mostRecentlyFocusedNode),Gn=Be.containerGroups[Nn].tabbableNodes;if(Gn.length>0){var zn=Gn.findIndex(function($n){return $n===Be.mostRecentlyFocusedNode});zn>=0&&(Ge.isKeyForward(Be.recentNavEvent)?zn+1<Gn.length&&(Rn=Gn[zn+1],Tn=!1):zn-1>=0&&(Rn=Gn[zn-1],Tn=!1))}}else Be.containerGroups.some(function($n){return $n.tabbableNodes.some(function(Qn){return he$1(Qn)>0})})||(Tn=!1);else Tn=!1;Tn&&(Rn=dn({target:Be.mostRecentlyFocusedNode,isBackward:Ge.isKeyBackward(Be.recentNavEvent)})),cn(Rn||Be.mostRecentlyFocusedNode||en())}Be.recentNavEvent=void 0},gn=function(Pn){var En=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;Be.recentNavEvent=Pn;var Cn=dn({event:Pn,isBackward:En});Cn&&($e(Pn)&&Pn.preventDefault(),cn(Cn))},yn=function(Pn){if(ss(Pn)&&we$1(Ge.escapeDeactivates,Pn)!==!1){Pn.preventDefault(),je.deactivate();return}(Ge.isKeyForward(Pn)||Ge.isKeyBackward(Pn))&&gn(Pn,Ge.isKeyBackward(Pn))},vn=function(Pn){var En=De(Pn);Ze(En,Pn)>=0||we$1(Ge.clickOutsideDeactivates,Pn)||we$1(Ge.allowOutsideClick,Pn)||(Pn.preventDefault(),Pn.stopImmediatePropagation())},An=function(){if(Be.active)return nt$1.activateTrap(ke,je),Be.delayInitialFocusTimer=Ge.delayInitialFocus?rt$1(function(){cn(en())}):cn(en()),t.addEventListener("focusin",pn,!0),t.addEventListener("mousedown",fn,{capture:!0,passive:!1}),t.addEventListener("touchstart",fn,{capture:!0,passive:!1}),t.addEventListener("click",vn,{capture:!0,passive:!1}),t.addEventListener("keydown",yn,{capture:!0,passive:!1}),je},xn=function(){if(Be.active)return t.removeEventListener("focusin",pn,!0),t.removeEventListener("mousedown",fn,!0),t.removeEventListener("touchstart",fn,!0),t.removeEventListener("click",vn,!0),t.removeEventListener("keydown",yn,!0),je},wn=function(Pn){var En=Pn.some(function(Cn){var Rn=Array.from(Cn.removedNodes);return Rn.some(function(Tn){return Tn===Be.mostRecentlyFocusedNode})});En&&cn(en())},bn=typeof window<"u"&&"MutationObserver"in window?new MutationObserver(wn):void 0,Mn=function(){bn&&(bn.disconnect(),Be.active&&!Be.paused&&Be.containers.map(function(Pn){bn.observe(Pn,{subtree:!0,childList:!0})}))};return je={get active(){return Be.active},get paused(){return Be.paused},activate:function(Pn){if(Be.active)return this;var En=Ve(Pn,"onActivate"),Cn=Ve(Pn,"onPostActivate"),Rn=Ve(Pn,"checkCanFocusTrap");Rn||tn(),Be.active=!0,Be.paused=!1,Be.nodeFocusedBeforeActivation=t.activeElement,En==null||En();var Tn=function(){Rn&&tn(),An(),Mn(),Cn==null||Cn()};return Rn?(Rn(Be.containers.concat()).then(Tn,Tn),this):(Tn(),this)},deactivate:function(Pn){if(!Be.active)return this;var En=at$1({onDeactivate:Ge.onDeactivate,onPostDeactivate:Ge.onPostDeactivate,checkCanReturnFocus:Ge.checkCanReturnFocus},Pn);clearTimeout(Be.delayInitialFocusTimer),Be.delayInitialFocusTimer=void 0,xn(),Be.active=!1,Be.paused=!1,Mn(),nt$1.deactivateTrap(ke,je);var Cn=Ve(En,"onDeactivate"),Rn=Ve(En,"onPostDeactivate"),Tn=Ve(En,"checkCanReturnFocus"),Nn=Ve(En,"returnFocus","returnFocusOnDeactivate");Cn==null||Cn();var Gn=function(){rt$1(function(){Nn&&cn(un(Be.nodeFocusedBeforeActivation)),Rn==null||Rn()})};return Nn&&Tn?(Tn(un(Be.nodeFocusedBeforeActivation)).then(Gn,Gn),this):(Gn(),this)},pause:function(Pn){if(Be.paused||!Be.active)return this;var En=Ve(Pn,"onPause"),Cn=Ve(Pn,"onPostPause");return Be.paused=!0,En==null||En(),xn(),Mn(),Cn==null||Cn(),this},unpause:function(Pn){if(!Be.paused||!Be.active)return this;var En=Ve(Pn,"onUnpause"),Cn=Ve(Pn,"onPostUnpause");return Be.paused=!1,En==null||En(),tn(),An(),Mn(),Cn==null||Cn(),this},updateContainerElements:function(Pn){var En=[].concat(Pn).filter(Boolean);return Be.containers=En.map(function(Cn){return typeof Cn=="string"?t.querySelector(Cn):Cn}),Be.active&&tn(),Mn(),this}},je.updateContainerElements(Oe),je};/*!
  * focus-trap-vue v4.0.2
  * (c) 2023 Eduardo San Martin Morote
  * @license MIT
  */const cs={escapeDeactivates:{type:Boolean,default:!0},returnFocusOnDeactivate:{type:Boolean,default:!0},allowOutsideClick:{type:[Boolean,Function],default:!0},clickOutsideDeactivates:[Boolean,Function],initialFocus:[String,Function,Boolean],fallbackFocus:[String,Function],checkCanFocusTrap:Function,checkCanReturnFocus:Function,delayInitialFocus:{type:Boolean,default:!0},document:Object,preventScroll:Boolean,setReturnFocus:[Object,String,Boolean,Function],tabbableOptions:Object},fs=defineComponent({props:Object.assign({active:{type:Boolean,default:!0}},cs),emits:["update:active","activate","postActivate","deactivate","postDeactivate"],render(){return this.renderImpl()},setup(Oe,{slots:e,emit:t}){let ke;const Ge=ref(null),Be=computed(()=>{const Ve=Ge.value;return Ve&&(Ve instanceof HTMLElement?Ve:Ve.$el)});function je(){return ke||(ke=us(Be.value,{escapeDeactivates:Oe.escapeDeactivates,allowOutsideClick:Oe.allowOutsideClick,returnFocusOnDeactivate:Oe.returnFocusOnDeactivate,clickOutsideDeactivates:Oe.clickOutsideDeactivates,onActivate:()=>{t("update:active",!0),t("activate")},onDeactivate:()=>{t("update:active",!1),t("deactivate")},onPostActivate:()=>t("postActivate"),onPostDeactivate:()=>t("postDeactivate"),initialFocus:Oe.initialFocus,fallbackFocus:Oe.fallbackFocus,tabbableOptions:Oe.tabbableOptions,delayInitialFocus:Oe.delayInitialFocus,preventScroll:Oe.preventScroll}))}return onMounted(()=>{watch(()=>Oe.active,Ve=>{Ve&&Be.value?je().activate():ke&&(ke.deactivate(),(!Be.value||Be.value.nodeType===Node.COMMENT_NODE)&&(ke=null))},{immediate:!0,flush:"post"})}),onUnmounted(()=>{ke&&ke.deactivate(),ke=null}),{activate(){je().activate()},deactivate(){ke&&ke.deactivate()},renderImpl(){if(!e.default)return null;const Ve=e.default().filter(Ze=>Ze.type!==Comment);return!Ve||!Ve.length||Ve.length>1?(console.error("[focus-trap-vue]: FocusTrap requires exactly one child."),Ve):cloneVNode(Ve[0],{ref:Ge})}}}}),ps=["aria-labelledby","role","open"],hs={class:"fr-container fr-container--fluid fr-container-md"},vs={class:"fr-grid-row fr-grid-row--center"},ms={class:"fr-modal__body"},gs={class:"fr-modal__header"},bs=["title"],ys={class:"fr-modal__content"},ks=["id"],ws={key:0,class:"fr-modal__footer"},st$1=2,_s=defineComponent({__name:"DsfrModal",props:{modalId:{default:()=>j$1("modal","dialog")},opened:{type:Boolean},actions:{default:()=>[]},isAlert:{type:Boolean},origin:{default:()=>({focus(){}})},title:{},icon:{default:void 0},size:{default:"md"},closeButtonLabel:{default:"Fermer"},closeButtonTitle:{default:"Fermer la fenêtre modale"}},emits:["close"],setup(Oe,{emit:e}){const t=Oe,ke=e,Ge=un=>{un.key==="Escape"&&tn()},Be=computed(()=>t.isAlert?"alertdialog":"dialog"),je=ref(null),Ve=ref();watch(()=>t.opened,un=>{var dn,fn;un?((dn=Ve.value)==null||dn.showModal(),setTimeout(()=>{var pn;(pn=je.value)==null||pn.focus()},100)):(fn=Ve.value)==null||fn.close(),Ze(un)});function Ze(un){typeof window<"u"&&document.body.classList.toggle("modal-open",un)}onMounted(()=>{Qe(),Ze(t.opened)}),onBeforeUnmount(()=>{en(),Ze(!1)});function Qe(){document.addEventListener("keydown",Ge)}function en(){document.removeEventListener("keydown",Ge)}async function tn(){var un;await nextTick(),(un=t.origin)==null||un.focus(),ke("close")}const an=computed(()=>typeof t.icon=="string"&&t.icon.startsWith("fr-icon-")),cn=computed(()=>an.value?void 0:typeof t.icon=="string"?{name:t.icon,scale:st$1}:{scale:st$1,...t.icon??{}});return(un,dn)=>un.opened?(openBlock(),createBlock(unref(fs),{key:0},{default:withCtx(()=>{var fn,pn;return[createBaseVNode("dialog",{id:"fr-modal-1",ref_key:"modal",ref:Ve,"aria-labelledby":un.modalId,role:Be.value,class:normalizeClass(["fr-modal",{"fr-modal--opened":un.opened}]),open:un.opened},[createBaseVNode("div",hs,[createBaseVNode("div",vs,[createBaseVNode("div",{class:normalizeClass(["fr-col-12",{"fr-col-md-8":un.size==="lg","fr-col-md-6":un.size==="md","fr-col-md-4":un.size==="sm"}])},[createBaseVNode("div",ms,[createBaseVNode("div",gs,[createBaseVNode("button",{ref_key:"closeBtn",ref:je,class:"fr-btn fr-btn--close",title:un.closeButtonTitle,"aria-controls":"fr-modal-1",type:"button",onClick:dn[0]||(dn[0]=gn=>tn())},[createBaseVNode("span",null,toDisplayString(un.closeButtonLabel),1)],8,bs)]),createBaseVNode("div",ys,[createBaseVNode("h1",{id:un.modalId,class:"fr-modal__title"},[an.value||cn.value?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass({[String(un.icon)]:an.value})},[un.icon&&cn.value?(openBlock(),createBlock(unref(g$1),normalizeProps(mergeProps({key:0},cn.value)),null,16)):createCommentVNode("",!0)],2)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(un.title),1)],8,ks),renderSlot(un.$slots,"default",{},void 0,!0)]),(fn=un.actions)!=null&&fn.length||un.$slots.footer?(openBlock(),createElementBlock("div",ws,[renderSlot(un.$slots,"footer",{},void 0,!0),(pn=un.actions)!=null&&pn.length?(openBlock(),createBlock(Ee,{key:0,align:"right",buttons:un.actions,"inline-layout-when":"large",reverse:""},null,8,["buttons"])):createCommentVNode("",!0)])):createCommentVNode("",!0)])],2)])])],10,ps)]}),_:3})):createCommentVNode("",!0)}}),$s=ae$1(_s,[["__scopeId","data-v-43ec81d5"]]),Ds=["id","aria-current"],Ms=defineComponent({__name:"DsfrNavigationItem",props:{id:{default:()=>j$1("nav","item")},active:{type:Boolean}},setup(Oe){return(e,t)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-nav__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default",{},void 0,!0)],8,Ds))}}),Lt$1=ae$1(Ms,[["__scopeId","data-v-5909c19f"]]),Is=["href"],ot$1=2,He=defineComponent({__name:"DsfrNavigationMenuLink",props:{id:{default:()=>j$1("menu-link")},to:{default:"#"},text:{default:""},icon:{default:void 0},onClick:{type:Function,default:()=>{}}},emits:["toggleId"],setup(Oe){const e=Oe,t=computed(()=>typeof e.to=="string"&&e.to.startsWith("http")),ke=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-icon-")),Ge=computed(()=>ke.value||!e.icon?void 0:typeof e.icon=="string"?{scale:ot$1,name:e.icon}:{scale:ot$1,...e.icon||{}});return(Be,je)=>{const Ve=resolveComponent("RouterLink");return t.value?(openBlock(),createElementBlock("a",{key:0,class:"fr-nav__link","data-testid":"nav-external-link",href:Be.to,onClick:je[0]||(je[0]=Ze=>Be.$emit("toggleId",Be.id))},toDisplayString(Be.text),9,Is)):(openBlock(),createBlock(Ve,{key:1,class:normalizeClass(["fr-nav__link",{[String(Be.icon)]:ke.value}]),"data-testid":"nav-router-link",to:Be.to,onClick:je[1]||(je[1]=Ze=>Be.$emit("toggleId",Be.id))},{default:withCtx(()=>[Be.icon&&Ge.value?(openBlock(),createBlock(unref(g$1),normalizeProps(mergeProps({key:0},Ge.value)),null,16)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Be.text),1)]),_:1},8,["to","class"]))}}}),Ls=["id","aria-current"],Ct$1=defineComponent({__name:"DsfrNavigationMenuItem",props:{id:{default:()=>j$1("menu","item")},active:{type:Boolean}},setup(Oe){return(e,t)=>(openBlock(),createElementBlock("li",{id:e.id,class:"fr-menu__item","aria-current":e.active?"page":void 0},[renderSlot(e.$slots,"default")],8,Ls))}}),Cs=["aria-expanded","aria-current","aria-controls"],zs=["id"],Ss={class:"fr-menu__list"},zt$1=defineComponent({__name:"DsfrNavigationMenu",props:{id:{default:()=>j$1("menu")},title:{},links:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(Oe){const e=Oe,{collapse:t,collapsing:ke,cssExpanded:Ge,doExpand:Be,onTransitionEnd:je}=ce$1(),Ve=computed(()=>e.id===e.expandedId);return watch(Ve,(Ze,Qe)=>{Ze!==Qe&&Be(Ze)}),onMounted(()=>{Ve.value&&Be(!0)}),(Ze,Qe)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":Ve.value,"aria-current":Ze.active||void 0,"aria-controls":Ze.id,onClick:Qe[0]||(Qe[0]=en=>Ze.$emit("toggleId",Ze.id))},[createBaseVNode("span",null,toDisplayString(Ze.title),1)],8,Cs),createBaseVNode("div",{id:Ze.id,ref_key:"collapse",ref:t,class:normalizeClass(["fr-collapse fr-menu",{"fr-collapse--expanded":unref(Ge),"fr-collapsing":unref(ke)}]),"data-testid":"navigation-menu",onTransitionend:Qe[2]||(Qe[2]=en=>unref(je)(Ve.value))},[createBaseVNode("ul",Ss,[renderSlot(Ze.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(Ze.links,(en,tn)=>(openBlock(),createBlock(Ct$1,{key:tn},{default:withCtx(()=>[createVNode(He,mergeProps({ref_for:!0},en,{onToggleId:Qe[1]||(Qe[1]=an=>Ze.$emit("toggleId",Ze.expandedId))}),null,16)]),_:2},1024))),128))])],42,zs)],64))}}),Ts={class:"fr-col-12 fr-col-lg-3"},As={class:"fr-mega-menu__category"},Es={class:"fr-mega-menu__list"},St=defineComponent({__name:"DsfrNavigationMegaMenuCategory",props:{title:{},active:{type:Boolean},links:{}},setup(Oe){return(e,t)=>(openBlock(),createElementBlock("div",Ts,[createBaseVNode("h5",As,[createBaseVNode("a",{class:"fr-nav__link",href:"#",onClick:t[0]||(t[0]=withModifiers(()=>{},["prevent"]))},toDisplayString(e.title),1)]),createBaseVNode("ul",Es,[(openBlock(!0),createElementBlock(Fragment,null,renderList(e.links,(ke,Ge)=>(openBlock(),createElementBlock("li",{key:Ge,class:"fr-nav__link"},[createVNode(He,mergeProps({ref_for:!0},ke),null,16)]))),128))])]))}}),Hs=["aria-expanded","aria-current","aria-controls"],Bs=["id"],Vs={class:"fr-container fr-container--fluid fr-container-lg"},Rs={class:"fr-grid-row fr-grid-row-lg--gutters"},Ps={class:"fr-col-12 fr-col-lg-8 fr-col-offset-lg-4--right fr-mb-4v"},Fs={class:"fr-mega-menu__leader"},Ns={class:"fr-h4 fr-mb-2v"},Xs={class:"fr-hidden fr-displayed-lg"},Ys=defineComponent({__name:"DsfrNavigationMegaMenu",props:{id:{default:()=>j$1("menu")},title:{},description:{default:""},link:{default:()=>({to:"#",text:"Voir toute la rubrique"})},menus:{default:()=>[]},expandedId:{default:""},active:{type:Boolean}},emits:["toggleId"],setup(Oe){const e=Oe,{collapse:t,collapsing:ke,cssExpanded:Ge,doExpand:Be,onTransitionEnd:je}=ce$1(),Ve=computed(()=>e.id===e.expandedId);return watch(Ve,(Ze,Qe)=>{Ze!==Qe&&Be(Ze)}),onMounted(()=>{Ve.value&&Be(!0)}),(Ze,Qe)=>{const en=resolveComponent("RouterLink");return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("button",{class:"fr-nav__btn","aria-expanded":Ve.value,"aria-current":Ze.active||void 0,"aria-controls":Ze.id,onClick:Qe[0]||(Qe[0]=tn=>Ze.$emit("toggleId",Ze.id))},toDisplayString(Ze.title),9,Hs),createBaseVNode("div",{id:Ze.id,ref_key:"collapse",ref:t,"data-testid":"mega-menu-wrapper",class:normalizeClass(["fr-collapse fr-mega-menu",{"fr-collapse--expanded":unref(Ge),"fr-collapsing":unref(ke)}]),tabindex:"-1",onTransitionend:Qe[2]||(Qe[2]=tn=>unref(je)(Ve.value))},[createBaseVNode("div",Vs,[createBaseVNode("button",{class:"fr-link--close fr-link","aria-controls":"mega-menu-695",onClick:Qe[1]||(Qe[1]=tn=>Ze.$emit("toggleId",Ze.id))}," Fermer "),createBaseVNode("div",Rs,[createBaseVNode("div",Ps,[createBaseVNode("div",Fs,[createBaseVNode("h4",Ns,toDisplayString(Ze.title),1),createBaseVNode("p",Xs,[createTextVNode(toDisplayString(Ze.description)+" ",1),renderSlot(Ze.$slots,"description",{},void 0,!0)]),createVNode(en,{class:"fr-link fr-icon-arrow-right-line fr-link--icon-right fr-link--align-on-content",to:Ze.link.to},{default:withCtx(()=>[createTextVNode(toDisplayString(Ze.link.text),1)]),_:1},8,["to"])])]),renderSlot(Ze.$slots,"default",{},void 0,!0),(openBlock(!0),createElementBlock(Fragment,null,renderList(Ze.menus,(tn,an)=>(openBlock(),createBlock(St,mergeProps({key:an,ref_for:!0},tn),null,16))),128))])])],42,Bs)],64)}}}),Tt$1=ae$1(Ys,[["__scopeId","data-v-020a2672"]]),Os=["id","aria-label"],js={class:"fr-nav__list"},qs=defineComponent({__name:"DsfrNavigation",props:{id:{default:()=>j$1("menu")},label:{default:"Menu principal"},navItems:{default:()=>[]}},setup(Oe){const e=Oe,t=ref(void 0),ke=Ve=>{if(Ve===t.value){t.value=void 0;return}t.value=Ve},Ge=Ve=>{if(Ve!==document.getElementById(e.id)){if(!(Ve!=null&&Ve.parentNode)){ke(t.value);return}Ge(Ve.parentNode)}},Be=Ve=>{Ge(Ve.target)},je=Ve=>{Ve.key==="Escape"&&ke(t.value)};return onMounted(()=>{document.addEventListener("click",Be),document.addEventListener("keydown",je)}),onUnmounted(()=>{document.removeEventListener("click",Be),document.removeEventListener("keydown",je)}),(Ve,Ze)=>(openBlock(),createElementBlock("nav",{id:Ve.id,class:"fr-nav",role:"navigation","aria-label":Ve.label},[createBaseVNode("ul",js,[renderSlot(Ve.$slots,"default"),(openBlock(!0),createElementBlock(Fragment,null,renderList(Ve.navItems,(Qe,en)=>(openBlock(),createBlock(Lt$1,{key:en},{default:withCtx(()=>[Qe.to&&Qe.text?(openBlock(),createBlock(He,mergeProps({key:0,ref_for:!0},Qe,{"expanded-id":t.value,onToggleId:Ze[0]||(Ze[0]=tn=>ke(tn))}),null,16,["expanded-id"])):Qe.title&&Qe.links?(openBlock(),createBlock(zt$1,mergeProps({key:1,ref_for:!0},Qe,{"expanded-id":t.value,onToggleId:Ze[1]||(Ze[1]=tn=>ke(tn))}),null,16,["expanded-id"])):Qe.title&&Qe.menus?(openBlock(),createBlock(Tt$1,mergeProps({key:2,ref_for:!0},Qe,{"expanded-id":t.value,onToggleId:Ze[2]||(Ze[2]=tn=>ke(tn))}),null,16,["expanded-id"])):createCommentVNode("",!0)]),_:2},1024))),128))])],8,Os))}}),_o=["id","name","value","checked","disabled"],$o=["for"],Do={key:0,class:"required"},Mo={key:0,class:"fr-hint-text"},Io={key:0,class:"fr-radio-rich__pictogram"},Lo=["src"],Co=["href"],zo=["href"],So=["href"],At$2=defineComponent({__name:"DsfrRadioButton",props:{id:{default:()=>j$1("basic","radio")},name:{},modelValue:{type:[String,Number,Boolean],default:""},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},value:{type:[String,Number,Boolean]},label:{default:""},hint:{default:""},img:{default:void 0},svgPath:{default:void 0},svgAttrs:{default:()=>({viewBox:"0 0 80 80",width:"80px",height:"80px"})}},emits:["update:modelValue"],setup(Oe){const e=Oe,t={viewBox:"0 0 80 80",width:"80px",height:"80px"},ke=computed(()=>!!e.img||!!e.svgPath);return(Ge,Be)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-fieldset__element",{"fr-fieldset__element--inline":Ge.inline}])},[createBaseVNode("div",{class:normalizeClass(["fr-radio-group",{"fr-radio-rich":ke.value,"fr-radio-group--sm":Ge.small}])},[createBaseVNode("input",mergeProps({id:Ge.id,type:"radio",name:Ge.name,value:Ge.value,checked:Ge.modelValue===Ge.value,disabled:Ge.disabled},Ge.$attrs,{onClick:Be[0]||(Be[0]=je=>Ge.$emit("update:modelValue",Ge.value))}),null,16,_o),createBaseVNode("label",{for:Ge.id,class:"fr-label"},[renderSlot(Ge.$slots,"label",{},()=>[createTextVNode(toDisplayString(Ge.label)+" ",1),renderSlot(Ge.$slots,"required-tip",{},()=>[Ge.$attrs.required?(openBlock(),createElementBlock("span",Do," *")):createCommentVNode("",!0)])]),Ge.hint?(openBlock(),createElementBlock("span",Mo,toDisplayString(Ge.hint),1)):createCommentVNode("",!0)],8,$o),Ge.img||Ge.svgPath?(openBlock(),createElementBlock("div",Io,[Ge.img?(openBlock(),createElementBlock("img",{key:0,src:Ge.img,class:"fr-artwork",alt:""},null,8,Lo)):(openBlock(),createElementBlock("svg",mergeProps({key:1,"aria-hidden":"true",class:"fr-artwork"},{...t,...Ge.svgAttrs}),[createBaseVNode("use",{class:"fr-artwork-decorative",href:`${Ge.svgPath}#artwork-decorative`},null,8,Co),createBaseVNode("use",{class:"fr-artwork-minor",href:`${Ge.svgPath}#artwork-minor`},null,8,zo),createBaseVNode("use",{class:"fr-artwork-major",href:`${Ge.svgPath}#artwork-major`},null,8,So)],16))])):createCommentVNode("",!0)],2)],2))}}),To={class:"fr-form-group"},Ao=["disabled","aria-labelledby","aria-invalid","role"],Eo=["id"],Ho={key:0,class:"fr-hint-text"},Bo={key:0,class:"required"},Vo=["id"],Ro={class:"line-1"},Po=defineComponent({__name:"DsfrRadioButtonSet",props:{titleId:{default:()=>j$1("radio-button","group")},disabled:{type:Boolean},required:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{},errorMessage:{default:""},validMessage:{default:""},legend:{default:""},hint:{default:""},modelValue:{type:[String,Number,Boolean]},options:{default:()=>[]},ariaInvalid:{type:[Boolean,String]}},emits:["update:modelValue"],setup(Oe,{emit:e}){const t=Oe,ke=e,Ge=computed(()=>t.errorMessage||t.validMessage),Be=computed(()=>t.errorMessage?"fr-error-text":"fr-valid-text"),je=Ze=>{Ze!==t.modelValue&&ke("update:modelValue",Ze)},Ve=computed(()=>Ge.value?`${t.titleId} messages-${t.titleId}`:t.titleId);return(Ze,Qe)=>(openBlock(),createElementBlock("div",To,[createBaseVNode("fieldset",{class:normalizeClass(["fr-fieldset",{"fr-fieldset--error":Ze.errorMessage,"fr-fieldset--valid":Ze.validMessage}]),disabled:Ze.disabled,"aria-labelledby":Ve.value,"aria-invalid":Ze.ariaInvalid,role:Ze.errorMessage||Ze.validMessage?"group":void 0},[Ze.legend||Ze.$slots.legend||Ze.hint||Ze.$slots.hint?(openBlock(),createElementBlock("legend",{key:0,id:Ze.titleId,class:"fr-fieldset__legend fr-fieldset__legend--regular"},[renderSlot(Ze.$slots,"legend",{},()=>[createTextVNode(toDisplayString(Ze.legend)+" ",1),Ze.hint||Ze.$slots.hint?(openBlock(),createElementBlock("span",Ho,[renderSlot(Ze.$slots,"hint",{},()=>[createTextVNode(toDisplayString(Ze.hint),1)])])):createCommentVNode("",!0),renderSlot(Ze.$slots,"required-tip",{},()=>[Ze.required?(openBlock(),createElementBlock("span",Bo," *")):createCommentVNode("",!0)])])],8,Eo)):createCommentVNode("",!0),renderSlot(Ze.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Ze.options,(en,tn)=>(openBlock(),createBlock(At$2,mergeProps({key:typeof en.value=="boolean"?tn:en.value||tn,name:Ze.name,"aria-disabled":en.disabled,ref_for:!0},en,{small:Ze.small,inline:Ze.inline,"model-value":Ze.modelValue,"onUpdate:modelValue":Qe[0]||(Qe[0]=an=>je(an))}),null,16,["name","aria-disabled","small","inline","model-value"]))),128))]),Ge.value?(openBlock(),createElementBlock("div",{key:1,id:`messages-${Ze.titleId}`,class:"fr-messages-group","aria-live":"assertive",role:"alert"},[createBaseVNode("p",{class:normalizeClass(["fr-message--info flex items-center",Be.value])},[createBaseVNode("span",Ro,toDisplayString(Ge.value),1)],2)],8,Vo)):createCommentVNode("",!0)],10,Ao)]))}}),Uo={class:"fr-segmented__element"},Zo=["id","name","value","checked","disabled","aria-disabled"],Jo=["for"],xo={key:1},Et$1=defineComponent({__name:"DsfrSegmented",props:{id:{default:()=>j$1("basic","checkbox")},name:{default:void 0},modelValue:{default:""},value:{},label:{default:""},disabled:{type:Boolean},icon:{default:void 0}},emits:["update:modelValue"],setup(Oe){const e=Oe,t=computed(()=>typeof e.icon=="string"?{name:e.icon}:e.icon),ke=computed(()=>e.icon&&typeof e.icon=="string"&&e.icon.startsWith("fr-")?e.icon:"");return(Ge,Be)=>(openBlock(),createElementBlock("div",Uo,[createBaseVNode("input",mergeProps({id:Ge.id,type:"radio",name:Ge.name,value:Ge.value,checked:Ge.modelValue===Ge.value,disabled:Ge.disabled,"aria-disabled":Ge.disabled},Ge.$attrs,{onClick:Be[0]||(Be[0]=je=>Ge.$emit("update:modelValue",Ge.value))}),null,16,Zo),createBaseVNode("label",{for:Ge.id,class:normalizeClass(["fr-label",{[ke.value]:ke.value}])},[Ge.icon&&!ke.value?(openBlock(),createBlock(unref(g$1),normalizeProps(mergeProps({key:0},t.value)),null,16)):createCommentVNode("",!0),Ge.icon?(openBlock(),createElementBlock("span",xo," ")):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(Ge.label),1)],10,Jo)]))}}),ei={class:"fr-form-group"},ti=["disabled"],ai=["id"],ni={key:0,class:"fr-hint-text"},ri={class:"fr-segmented__elements"},li=defineComponent({__name:"DsfrSegmentedSet",props:{titleId:{default:()=>j$1("radio-button","group")},disabled:{type:Boolean},small:{type:Boolean},inline:{type:Boolean},name:{default:"no-name"},hint:{},legend:{default:""},modelValue:{},options:{default:()=>[]}},emits:["update:modelValue"],setup(Oe,{emit:e}){const t=Oe,ke=e,Ge=Be=>{Be!==t.modelValue&&ke("update:modelValue",Be)};return(Be,je)=>(openBlock(),createElementBlock("div",ei,[createBaseVNode("fieldset",{class:normalizeClass(["fr-segmented",{"fr-segmented--sm":Be.small,"fr-segmented--no-legend":!Be.legend}]),disabled:Be.disabled},[Be.legend?(openBlock(),createElementBlock("legend",{key:0,id:Be.titleId,class:normalizeClass(["fr-segmented__legend",{"fr-segmented__legend--inline":Be.inline}])},[renderSlot(Be.$slots,"legend",{},()=>[createTextVNode(toDisplayString(Be.legend),1)]),Be.hint?(openBlock(),createElementBlock("span",ni,toDisplayString(Be.hint),1)):createCommentVNode("",!0)],10,ai)):createCommentVNode("",!0),createBaseVNode("div",ri,[renderSlot(Be.$slots,"default",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(Be.options,(Ve,Ze)=>(openBlock(),createBlock(Et$1,mergeProps({key:Ve.value||Ze,name:Be.name||Ve.name,ref_for:!0},{...Ve,disabled:Be.disabled||Ve.disabled},{"model-value":Be.modelValue,"onUpdate:modelValue":je[0]||(je[0]=Qe=>Ge(Qe))}),null,16,["name","model-value"]))),128))])])],10,ti)]))}}),si=["for"],oi={key:0,class:"required"},ii={key:0,class:"fr-hint-text"},di=["id","name","disabled","aria-disabled","required"],ui=["selected"],ci=["selected","value","disabled","aria-disabled"],fi=["id"],pi=defineComponent({inheritAttrs:!1,__name:"DsfrSelect",props:{required:{type:Boolean},disabled:{type:Boolean},selectId:{default:()=>j$1("select")},name:{default:void 0},description:{default:void 0},modelValue:{default:void 0},label:{default:""},options:{default:()=>[]},successMessage:{default:""},errorMessage:{default:""},defaultUnselectedText:{default:"Sélectionner une option"}},emits:["update:modelValue"],setup(Oe){const e=Oe,t=computed(()=>e.errorMessage||e.successMessage),ke=computed(()=>e.errorMessage?"error":"valid");return(Ge,Be)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-select-group",{[`fr-select-group--${ke.value}`]:t.value}])},[createBaseVNode("label",{class:"fr-label",for:Ge.selectId},[renderSlot(Ge.$slots,"label",{},()=>[createTextVNode(toDisplayString(Ge.label)+" ",1),renderSlot(Ge.$slots,"required-tip",{},()=>[Ge.required?(openBlock(),createElementBlock("span",oi," *")):createCommentVNode("",!0)])]),Ge.description?(openBlock(),createElementBlock("span",ii,toDisplayString(Ge.description),1)):createCommentVNode("",!0)],8,si),createBaseVNode("select",mergeProps({id:Ge.selectId,class:[{[`fr-select--${ke.value}`]:t.value},"fr-select"],name:Ge.name||Ge.selectId,disabled:Ge.disabled,"aria-disabled":Ge.disabled,required:Ge.required},Ge.$attrs,{onChange:Be[0]||(Be[0]=je=>{var Ve;return Ge.$emit("update:modelValue",(Ve=je.target)==null?void 0:Ve.value)})}),[createBaseVNode("option",{selected:Ge.modelValue==null,disabled:"",hidden:""},toDisplayString(Ge.defaultUnselectedText),9,ui),(openBlock(!0),createElementBlock(Fragment,null,renderList(Ge.options,(je,Ve)=>(openBlock(),createElementBlock("option",{key:Ve,selected:Ge.modelValue===je||typeof je=="object"&&je.value===Ge.modelValue,value:typeof je=="object"?je.value:je,disabled:!!(typeof je=="object"&&je.disabled),"aria-disabled":!!(typeof je=="object"&&je.disabled)},toDisplayString(typeof je=="object"?je.text:je),9,ci))),128))],16,di),t.value?(openBlock(),createElementBlock("p",{key:0,id:`select-${ke.value}-desc-${ke.value}`,class:normalizeClass(`fr-${ke.value}-text`)},toDisplayString(t.value),11,fi)):createCommentVNode("",!0)],2))}}),hi={class:"fr-share"},vi={class:"fr-share__title"},mi={class:"fr-btns-group"},gi=["title","href","onClick"],bi={key:0},yi=["href","title"],ki=["title"],wi=defineComponent({__name:"DsfrShare",props:{title:{default:"Partager la page"},copyLabel:{default:"Copier dans le presse-papier"},mail:{default:()=>{}},networks:{default:()=>[]}},setup(Oe){const e=()=>{const ke=window.location.href;navigator.clipboard.writeText(ke)},t=({url:ke,label:Ge})=>{window.open(ke,Ge,"toolbar=no,location=yes,status=no,menubar=no,scrollbars=yes,resizable=yes,width=600,height=450")};return(ke,Ge)=>{var Be;return openBlock(),createElementBlock("div",hi,[createBaseVNode("p",vi,toDisplayString(ke.title),1),createBaseVNode("ul",mi,[(openBlock(!0),createElementBlock(Fragment,null,renderList(ke.networks,(je,Ve)=>(openBlock(),createElementBlock("li",{key:Ve},[createBaseVNode("a",{class:normalizeClass(`fr-btn fr-btn--${je.name}`),title:`${je.label} - nouvelle fenêtre`,href:je.url,target:"_blank",rel:"noopener noreferrer",onClick:withModifiers(Ze=>t(je),["prevent"])},toDisplayString(je.label),11,gi)]))),128)),(Be=ke.mail)!=null&&Be.to?(openBlock(),createElementBlock("li",bi,[createBaseVNode("a",{class:"fr-btn fr-btn--mail",href:ke.mail.to,title:ke.mail.label,target:"_blank",rel:"noopener noreferrer"},toDisplayString(ke.mail.label),9,yi)])):createCommentVNode("",!0),createBaseVNode("li",null,[createBaseVNode("button",{class:"fr-btn fr-btn--copy",title:ke.copyLabel,onClick:Ge[0]||(Ge[0]=je=>e())},toDisplayString(ke.copyLabel),9,ki)])])])}}}),Wi={role:"presentation"},Ui=["id","data-testid","tabindex","aria-selected","aria-controls"],Zi={key:0,style:{"margin-left":"-0.25rem","margin-right":"0.5rem","font-size":"0.95rem"}},Rt$1=defineComponent({__name:"DsfrTabItem",props:{panelId:{},tabId:{},selected:{type:Boolean},icon:{default:void 0}},emits:["click","next","previous","first","last"],setup(Oe,{emit:e}){const t=Oe,ke=e,Ge=ref(null);watch(()=>t.selected,Ve=>{var Ze;Ve&&((Ze=Ge.value)==null||Ze.focus())});const Be={ArrowRight:"next",ArrowLeft:"previous",ArrowDown:"next",ArrowUp:"previous",Home:"first",End:"last"};function je(Ve){const Ze=Ve==null?void 0:Ve.key,Qe=Be[Ze];Qe&&ke(Qe)}return(Ve,Ze)=>(openBlock(),createElementBlock("li",Wi,[createBaseVNode("button",{id:Ve.tabId,ref_key:"button",ref:Ge,"data-testid":`test-${Ve.tabId}`,class:"fr-tabs__tab",tabindex:Ve.selected?0:-1,role:"tab",type:"button","aria-selected":Ve.selected,"aria-controls":Ve.panelId,onClick:Ze[0]||(Ze[0]=withModifiers(Qe=>Ve.$emit("click",Qe),["prevent"])),onKeydown:Ze[1]||(Ze[1]=Qe=>je(Qe))},[Ve.icon?(openBlock(),createElementBlock("span",Zi,[createVNode(unref(g$1),{name:Ve.icon},null,8,["name"])])):createCommentVNode("",!0),renderSlot(Ve.$slots,"default")],40,Ui)]))}}),Ji=["id","aria-labelledby","tabindex"],xi=defineComponent({__name:"DsfrTabContent",props:{asc:{type:Boolean},selected:{type:Boolean},panelId:{},tabId:{}},setup(Oe){useCssVars(Be=>({"71a34239":ke.value,"6beade6c":Ge.value}));const e=Oe,t={true:"100%",false:"-100%"},ke=computed(()=>t[String(e.asc)]),Ge=computed(()=>t[String(!e.asc)]);return(Be,je)=>(openBlock(),createBlock(Transition,{name:"slide-fade",mode:"in-out"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",{id:Be.panelId,class:normalizeClass(["fr-tabs__panel",{"fr-tabs__panel--selected":Be.selected}]),role:"tabpanel","aria-labelledby":Be.tabId,tabindex:Be.selected?0:-1},[renderSlot(Be.$slots,"default",{},void 0,!0)],10,Ji),[[vShow,Be.selected]])]),_:3}))}}),Pt$1=ae$1(xi,[["__scopeId","data-v-f60b34d7"]]),ed=["aria-label"],td$1=defineComponent({__name:"DsfrTabs",props:{tabListName:{},tabTitles:{default:()=>[]},tabContents:{default:()=>[]},initialSelectedIndex:{default:0}},emits:["selectTab"],setup(Oe,{expose:e,emit:t}){const ke=Oe,Ge=t,Be=ref(ke.initialSelectedIndex||0),je=reactive({}),Ve=ref(!0),Ze=ref(null),Qe=ref(null),en=ref(null),tn=yn=>Be.value===yn,an=()=>{var yn,vn;if(Be.value<0||!en.value||!en.value.offsetHeight)return;const An=en.value.offsetHeight,xn=(yn=Qe.value)==null?void 0:yn.querySelectorAll(".fr-tabs__panel")[Be.value];if(!xn||!xn.offsetHeight)return;const wn=xn.offsetHeight;(vn=Qe.value)==null||vn.style.setProperty("--tabs-height",`${An+wn}px`)},cn=yn=>{if(je[yn])return je[yn];const vn=j$1("tab");return je[yn]=vn,vn},un=async yn=>{Ve.value=yn>Be.value,Be.value=yn,Ge("selectTab",yn)},dn=async()=>{const yn=Be.value===0?ke.tabTitles.length-1:Be.value-1;await un(yn)},fn=async()=>{const yn=Be.value===ke.tabTitles.length-1?0:Be.value+1;await un(yn)},pn=async()=>{await un(0)},gn=async()=>{await un(ke.tabTitles.length-1)};return onMounted(()=>{var yn;window.ResizeObserver&&(Ze.value=new window.ResizeObserver(()=>{an()})),(yn=Qe.value)==null||yn.querySelectorAll(".fr-tabs__panel").forEach(vn=>{var An;vn&&((An=Ze.value)==null||An.observe(vn))})}),onUnmounted(()=>{var yn;(yn=Qe.value)==null||yn.querySelectorAll(".fr-tabs__panel").forEach(vn=>{var An;vn&&((An=Ze.value)==null||An.unobserve(vn))})}),e({renderTabs:an,selectIndex:un,selectFirst:pn,selectLast:gn}),(yn,vn)=>(openBlock(),createElementBlock("div",{ref_key:"$el",ref:Qe,class:"fr-tabs"},[createBaseVNode("ul",{ref_key:"tablist",ref:en,class:"fr-tabs__list",role:"tablist","aria-label":yn.tabListName},[renderSlot(yn.$slots,"tab-items",{},()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(yn.tabTitles,(An,xn)=>(openBlock(),createBlock(Rt$1,{key:xn,icon:An.icon,"panel-id":An.panelId||`${cn(xn)}-panel`,"tab-id":An.tabId||cn(xn),selected:tn(xn),onClick:wn=>un(xn),onNext:vn[0]||(vn[0]=wn=>fn()),onPrevious:vn[1]||(vn[1]=wn=>dn()),onFirst:vn[2]||(vn[2]=wn=>pn()),onLast:vn[3]||(vn[3]=wn=>gn())},{default:withCtx(()=>[createTextVNode(toDisplayString(An.title),1)]),_:2},1032,["icon","panel-id","tab-id","selected","onClick"]))),128))])],8,ed),(openBlock(!0),createElementBlock(Fragment,null,renderList(yn.tabContents,(An,xn)=>{var wn,bn,Mn,Pn;return openBlock(),createBlock(Pt$1,{key:xn,"panel-id":((bn=(wn=yn.tabTitles)==null?void 0:wn[xn])==null?void 0:bn.panelId)||`${cn(xn)}-panel`,"tab-id":((Pn=(Mn=yn.tabTitles)==null?void 0:Mn[xn])==null?void 0:Pn.tabId)||cn(xn),selected:tn(xn),asc:Ve.value},{default:withCtx(()=>[createBaseVNode("p",null,toDisplayString(An),1)]),_:2},1032,["panel-id","tab-id","selected","asc"])}),128)),renderSlot(yn.$slots,"default")],512))}}),Hd=["id","disabled","aria-disabled","checked","data-testid","aria-describedby"],Bd=["id","for","data-fr-checked-label","data-fr-unchecked-label"],Vd=["id"],Rd=defineComponent({__name:"DsfrToggleSwitch",props:{modelValue:{type:Boolean},inputId:{default:()=>j$1("toggle")},hint:{default:""},label:{default:""},disabled:{type:Boolean},labelLeft:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!1},activeText:{default:"Activé"},inactiveText:{default:"Désactivé"},noText:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(Oe){const e=Oe,t=computed(()=>`${e.inputId}-hint-text`);return(ke,Ge)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["fr-toggle",{"fr-toggle--label-left":ke.labelLeft,"fr-toggle--border-bottom":ke.borderBottom}])},[createBaseVNode("input",{id:ke.inputId,disabled:ke.disabled,"aria-disabled":ke.disabled,type:"checkbox",checked:ke.modelValue,"data-testid":ke.inputId,class:"fr-toggle__input","aria-describedby":t.value,onInput:Ge[0]||(Ge[0]=Be=>ke.$emit("update:modelValue",Be.target.checked))},null,40,Hd),createBaseVNode("label",{id:t.value,class:"fr-toggle__label",for:ke.inputId,"data-fr-checked-label":ke.noText?void 0:ke.activeText,"data-fr-unchecked-label":ke.noText?void 0:ke.inactiveText,style:{"--toggle-status-width":"3.55208125rem"}},toDisplayString(ke.label),9,Bd),ke.hint?(openBlock(),createElementBlock("p",{key:0,id:`${ke.inputId}-hint-text`,class:"fr-hint-text"},toDisplayString(ke.hint),9,Vd)):createCommentVNode("",!0)],2))}});/*!
  * vue-router v4.5.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const isBrowser=typeof document<"u";function isRouteComponent(Oe){return typeof Oe=="object"||"displayName"in Oe||"props"in Oe||"__vccOpts"in Oe}function isESModule(Oe){return Oe.__esModule||Oe[Symbol.toStringTag]==="Module"||Oe.default&&isRouteComponent(Oe.default)}const assign=Object.assign;function applyToParams(Oe,e){const t={};for(const ke in e){const Ge=e[ke];t[ke]=isArray(Ge)?Ge.map(Oe):Oe(Ge)}return t}const noop$1=()=>{},isArray=Array.isArray,HASH_RE=/#/g,AMPERSAND_RE=/&/g,SLASH_RE=/\//g,EQUAL_RE=/=/g,IM_RE=/\?/g,PLUS_RE=/\+/g,ENC_BRACKET_OPEN_RE=/%5B/g,ENC_BRACKET_CLOSE_RE=/%5D/g,ENC_CARET_RE=/%5E/g,ENC_BACKTICK_RE=/%60/g,ENC_CURLY_OPEN_RE=/%7B/g,ENC_PIPE_RE=/%7C/g,ENC_CURLY_CLOSE_RE=/%7D/g,ENC_SPACE_RE=/%20/g;function commonEncode(Oe){return encodeURI(""+Oe).replace(ENC_PIPE_RE,"|").replace(ENC_BRACKET_OPEN_RE,"[").replace(ENC_BRACKET_CLOSE_RE,"]")}function encodeHash(Oe){return commonEncode(Oe).replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryValue(Oe){return commonEncode(Oe).replace(PLUS_RE,"%2B").replace(ENC_SPACE_RE,"+").replace(HASH_RE,"%23").replace(AMPERSAND_RE,"%26").replace(ENC_BACKTICK_RE,"`").replace(ENC_CURLY_OPEN_RE,"{").replace(ENC_CURLY_CLOSE_RE,"}").replace(ENC_CARET_RE,"^")}function encodeQueryKey(Oe){return encodeQueryValue(Oe).replace(EQUAL_RE,"%3D")}function encodePath(Oe){return commonEncode(Oe).replace(HASH_RE,"%23").replace(IM_RE,"%3F")}function encodeParam(Oe){return Oe==null?"":encodePath(Oe).replace(SLASH_RE,"%2F")}function decode$2(Oe){try{return decodeURIComponent(""+Oe)}catch{}return""+Oe}const TRAILING_SLASH_RE=/\/$/,removeTrailingSlash=Oe=>Oe.replace(TRAILING_SLASH_RE,"");function parseURL(Oe,e,t="/"){let ke,Ge={},Be="",je="";const Ve=e.indexOf("#");let Ze=e.indexOf("?");return Ve<Ze&&Ve>=0&&(Ze=-1),Ze>-1&&(ke=e.slice(0,Ze),Be=e.slice(Ze+1,Ve>-1?Ve:e.length),Ge=Oe(Be)),Ve>-1&&(ke=ke||e.slice(0,Ve),je=e.slice(Ve,e.length)),ke=resolveRelativePath(ke??e,t),{fullPath:ke+(Be&&"?")+Be+je,path:ke,query:Ge,hash:decode$2(je)}}function stringifyURL(Oe,e){const t=e.query?Oe(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function stripBase(Oe,e){return!e||!Oe.toLowerCase().startsWith(e.toLowerCase())?Oe:Oe.slice(e.length)||"/"}function isSameRouteLocation(Oe,e,t){const ke=e.matched.length-1,Ge=t.matched.length-1;return ke>-1&&ke===Ge&&isSameRouteRecord(e.matched[ke],t.matched[Ge])&&isSameRouteLocationParams(e.params,t.params)&&Oe(e.query)===Oe(t.query)&&e.hash===t.hash}function isSameRouteRecord(Oe,e){return(Oe.aliasOf||Oe)===(e.aliasOf||e)}function isSameRouteLocationParams(Oe,e){if(Object.keys(Oe).length!==Object.keys(e).length)return!1;for(const t in Oe)if(!isSameRouteLocationParamsValue(Oe[t],e[t]))return!1;return!0}function isSameRouteLocationParamsValue(Oe,e){return isArray(Oe)?isEquivalentArray(Oe,e):isArray(e)?isEquivalentArray(e,Oe):Oe===e}function isEquivalentArray(Oe,e){return isArray(e)?Oe.length===e.length&&Oe.every((t,ke)=>t===e[ke]):Oe.length===1&&Oe[0]===e}function resolveRelativePath(Oe,e){if(Oe.startsWith("/"))return Oe;if(!Oe)return e;const t=e.split("/"),ke=Oe.split("/"),Ge=ke[ke.length-1];(Ge===".."||Ge===".")&&ke.push("");let Be=t.length-1,je,Ve;for(je=0;je<ke.length;je++)if(Ve=ke[je],Ve!==".")if(Ve==="..")Be>1&&Be--;else break;return t.slice(0,Be).join("/")+"/"+ke.slice(je).join("/")}const START_LOCATION_NORMALIZED={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var NavigationType;(function(Oe){Oe.pop="pop",Oe.push="push"})(NavigationType||(NavigationType={}));var NavigationDirection;(function(Oe){Oe.back="back",Oe.forward="forward",Oe.unknown=""})(NavigationDirection||(NavigationDirection={}));function normalizeBase(Oe){if(!Oe)if(isBrowser){const e=document.querySelector("base");Oe=e&&e.getAttribute("href")||"/",Oe=Oe.replace(/^\w+:\/\/[^\/]+/,"")}else Oe="/";return Oe[0]!=="/"&&Oe[0]!=="#"&&(Oe="/"+Oe),removeTrailingSlash(Oe)}const BEFORE_HASH_RE=/^[^#]+#/;function createHref(Oe,e){return Oe.replace(BEFORE_HASH_RE,"#")+e}function getElementPosition(Oe,e){const t=document.documentElement.getBoundingClientRect(),ke=Oe.getBoundingClientRect();return{behavior:e.behavior,left:ke.left-t.left-(e.left||0),top:ke.top-t.top-(e.top||0)}}const computeScrollPosition=()=>({left:window.scrollX,top:window.scrollY});function scrollToPosition(Oe){let e;if("el"in Oe){const t=Oe.el,ke=typeof t=="string"&&t.startsWith("#"),Ge=typeof t=="string"?ke?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!Ge)return;e=getElementPosition(Ge,Oe)}else e=Oe;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function getScrollKey(Oe,e){return(history.state?history.state.position-e:-1)+Oe}const scrollPositions=new Map;function saveScrollPosition(Oe,e){scrollPositions.set(Oe,e)}function getSavedScrollPosition(Oe){const e=scrollPositions.get(Oe);return scrollPositions.delete(Oe),e}let createBaseLocation=()=>location.protocol+"//"+location.host;function createCurrentLocation(Oe,e){const{pathname:t,search:ke,hash:Ge}=e,Be=Oe.indexOf("#");if(Be>-1){let Ve=Ge.includes(Oe.slice(Be))?Oe.slice(Be).length:1,Ze=Ge.slice(Ve);return Ze[0]!=="/"&&(Ze="/"+Ze),stripBase(Ze,"")}return stripBase(t,Oe)+ke+Ge}function useHistoryListeners(Oe,e,t,ke){let Ge=[],Be=[],je=null;const Ve=({state:an})=>{const cn=createCurrentLocation(Oe,location),un=t.value,dn=e.value;let fn=0;if(an){if(t.value=cn,e.value=an,je&&je===un){je=null;return}fn=dn?an.position-dn.position:0}else ke(cn);Ge.forEach(pn=>{pn(t.value,un,{delta:fn,type:NavigationType.pop,direction:fn?fn>0?NavigationDirection.forward:NavigationDirection.back:NavigationDirection.unknown})})};function Ze(){je=t.value}function Qe(an){Ge.push(an);const cn=()=>{const un=Ge.indexOf(an);un>-1&&Ge.splice(un,1)};return Be.push(cn),cn}function en(){const{history:an}=window;an.state&&an.replaceState(assign({},an.state,{scroll:computeScrollPosition()}),"")}function tn(){for(const an of Be)an();Be=[],window.removeEventListener("popstate",Ve),window.removeEventListener("beforeunload",en)}return window.addEventListener("popstate",Ve),window.addEventListener("beforeunload",en,{passive:!0}),{pauseListeners:Ze,listen:Qe,destroy:tn}}function buildState(Oe,e,t,ke=!1,Ge=!1){return{back:Oe,current:e,forward:t,replaced:ke,position:window.history.length,scroll:Ge?computeScrollPosition():null}}function useHistoryStateNavigation(Oe){const{history:e,location:t}=window,ke={value:createCurrentLocation(Oe,t)},Ge={value:e.state};Ge.value||Be(ke.value,{back:null,current:ke.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function Be(Ze,Qe,en){const tn=Oe.indexOf("#"),an=tn>-1?(t.host&&document.querySelector("base")?Oe:Oe.slice(tn))+Ze:createBaseLocation()+Oe+Ze;try{e[en?"replaceState":"pushState"](Qe,"",an),Ge.value=Qe}catch(cn){console.error(cn),t[en?"replace":"assign"](an)}}function je(Ze,Qe){const en=assign({},e.state,buildState(Ge.value.back,Ze,Ge.value.forward,!0),Qe,{position:Ge.value.position});Be(Ze,en,!0),ke.value=Ze}function Ve(Ze,Qe){const en=assign({},Ge.value,e.state,{forward:Ze,scroll:computeScrollPosition()});Be(en.current,en,!0);const tn=assign({},buildState(ke.value,Ze,null),{position:en.position+1},Qe);Be(Ze,tn,!1),ke.value=Ze}return{location:ke,state:Ge,push:Ve,replace:je}}function createWebHistory(Oe){Oe=normalizeBase(Oe);const e=useHistoryStateNavigation(Oe),t=useHistoryListeners(Oe,e.state,e.location,e.replace);function ke(Be,je=!0){je||t.pauseListeners(),history.go(Be)}const Ge=assign({location:"",base:Oe,go:ke,createHref:createHref.bind(null,Oe)},e,t);return Object.defineProperty(Ge,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(Ge,"state",{enumerable:!0,get:()=>e.state.value}),Ge}function isRouteLocation(Oe){return typeof Oe=="string"||Oe&&typeof Oe=="object"}function isRouteName(Oe){return typeof Oe=="string"||typeof Oe=="symbol"}const NavigationFailureSymbol=Symbol("");var NavigationFailureType;(function(Oe){Oe[Oe.aborted=4]="aborted",Oe[Oe.cancelled=8]="cancelled",Oe[Oe.duplicated=16]="duplicated"})(NavigationFailureType||(NavigationFailureType={}));function createRouterError(Oe,e){return assign(new Error,{type:Oe,[NavigationFailureSymbol]:!0},e)}function isNavigationFailure(Oe,e){return Oe instanceof Error&&NavigationFailureSymbol in Oe&&(e==null||!!(Oe.type&e))}const BASE_PARAM_PATTERN="[^/]+?",BASE_PATH_PARSER_OPTIONS={sensitive:!1,strict:!1,start:!0,end:!0},REGEX_CHARS_RE=/[.+*?^${}()[\]/\\]/g;function tokensToParser(Oe,e){const t=assign({},BASE_PATH_PARSER_OPTIONS,e),ke=[];let Ge=t.start?"^":"";const Be=[];for(const Qe of Oe){const en=Qe.length?[]:[90];t.strict&&!Qe.length&&(Ge+="/");for(let tn=0;tn<Qe.length;tn++){const an=Qe[tn];let cn=40+(t.sensitive?.25:0);if(an.type===0)tn||(Ge+="/"),Ge+=an.value.replace(REGEX_CHARS_RE,"\\$&"),cn+=40;else if(an.type===1){const{value:un,repeatable:dn,optional:fn,regexp:pn}=an;Be.push({name:un,repeatable:dn,optional:fn});const gn=pn||BASE_PARAM_PATTERN;if(gn!==BASE_PARAM_PATTERN){cn+=10;try{new RegExp(`(${gn})`)}catch(vn){throw new Error(`Invalid custom RegExp for param "${un}" (${gn}): `+vn.message)}}let yn=dn?`((?:${gn})(?:/(?:${gn}))*)`:`(${gn})`;tn||(yn=fn&&Qe.length<2?`(?:/${yn})`:"/"+yn),fn&&(yn+="?"),Ge+=yn,cn+=20,fn&&(cn+=-8),dn&&(cn+=-20),gn===".*"&&(cn+=-50)}en.push(cn)}ke.push(en)}if(t.strict&&t.end){const Qe=ke.length-1;ke[Qe][ke[Qe].length-1]+=.7000000000000001}t.strict||(Ge+="/?"),t.end?Ge+="$":t.strict&&!Ge.endsWith("/")&&(Ge+="(?:/|$)");const je=new RegExp(Ge,t.sensitive?"":"i");function Ve(Qe){const en=Qe.match(je),tn={};if(!en)return null;for(let an=1;an<en.length;an++){const cn=en[an]||"",un=Be[an-1];tn[un.name]=cn&&un.repeatable?cn.split("/"):cn}return tn}function Ze(Qe){let en="",tn=!1;for(const an of Oe){(!tn||!en.endsWith("/"))&&(en+="/"),tn=!1;for(const cn of an)if(cn.type===0)en+=cn.value;else if(cn.type===1){const{value:un,repeatable:dn,optional:fn}=cn,pn=un in Qe?Qe[un]:"";if(isArray(pn)&&!dn)throw new Error(`Provided param "${un}" is an array but it is not repeatable (* or + modifiers)`);const gn=isArray(pn)?pn.join("/"):pn;if(!gn)if(fn)an.length<2&&(en.endsWith("/")?en=en.slice(0,-1):tn=!0);else throw new Error(`Missing required param "${un}"`);en+=gn}}return en||"/"}return{re:je,score:ke,keys:Be,parse:Ve,stringify:Ze}}function compareScoreArray(Oe,e){let t=0;for(;t<Oe.length&&t<e.length;){const ke=e[t]-Oe[t];if(ke)return ke;t++}return Oe.length<e.length?Oe.length===1&&Oe[0]===80?-1:1:Oe.length>e.length?e.length===1&&e[0]===80?1:-1:0}function comparePathParserScore(Oe,e){let t=0;const ke=Oe.score,Ge=e.score;for(;t<ke.length&&t<Ge.length;){const Be=compareScoreArray(ke[t],Ge[t]);if(Be)return Be;t++}if(Math.abs(Ge.length-ke.length)===1){if(isLastScoreNegative(ke))return 1;if(isLastScoreNegative(Ge))return-1}return Ge.length-ke.length}function isLastScoreNegative(Oe){const e=Oe[Oe.length-1];return Oe.length>0&&e[e.length-1]<0}const ROOT_TOKEN={type:0,value:""},VALID_PARAM_RE=/[a-zA-Z0-9_]/;function tokenizePath(Oe){if(!Oe)return[[]];if(Oe==="/")return[[ROOT_TOKEN]];if(!Oe.startsWith("/"))throw new Error(`Invalid path "${Oe}"`);function e(cn){throw new Error(`ERR (${t})/"${Qe}": ${cn}`)}let t=0,ke=t;const Ge=[];let Be;function je(){Be&&Ge.push(Be),Be=[]}let Ve=0,Ze,Qe="",en="";function tn(){Qe&&(t===0?Be.push({type:0,value:Qe}):t===1||t===2||t===3?(Be.length>1&&(Ze==="*"||Ze==="+")&&e(`A repeatable param (${Qe}) must be alone in its segment. eg: '/:ids+.`),Be.push({type:1,value:Qe,regexp:en,repeatable:Ze==="*"||Ze==="+",optional:Ze==="*"||Ze==="?"})):e("Invalid state to consume buffer"),Qe="")}function an(){Qe+=Ze}for(;Ve<Oe.length;){if(Ze=Oe[Ve++],Ze==="\\"&&t!==2){ke=t,t=4;continue}switch(t){case 0:Ze==="/"?(Qe&&tn(),je()):Ze===":"?(tn(),t=1):an();break;case 4:an(),t=ke;break;case 1:Ze==="("?t=2:VALID_PARAM_RE.test(Ze)?an():(tn(),t=0,Ze!=="*"&&Ze!=="?"&&Ze!=="+"&&Ve--);break;case 2:Ze===")"?en[en.length-1]=="\\"?en=en.slice(0,-1)+Ze:t=3:en+=Ze;break;case 3:tn(),t=0,Ze!=="*"&&Ze!=="?"&&Ze!=="+"&&Ve--,en="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${Qe}"`),tn(),je(),Ge}function createRouteRecordMatcher(Oe,e,t){const ke=tokensToParser(tokenizePath(Oe.path),t),Ge=assign(ke,{record:Oe,parent:e,children:[],alias:[]});return e&&!Ge.record.aliasOf==!e.record.aliasOf&&e.children.push(Ge),Ge}function createRouterMatcher(Oe,e){const t=[],ke=new Map;e=mergeOptions({strict:!1,end:!0,sensitive:!1},e);function Ge(tn){return ke.get(tn)}function Be(tn,an,cn){const un=!cn,dn=normalizeRouteRecord(tn);dn.aliasOf=cn&&cn.record;const fn=mergeOptions(e,tn),pn=[dn];if("alias"in tn){const vn=typeof tn.alias=="string"?[tn.alias]:tn.alias;for(const An of vn)pn.push(normalizeRouteRecord(assign({},dn,{components:cn?cn.record.components:dn.components,path:An,aliasOf:cn?cn.record:dn})))}let gn,yn;for(const vn of pn){const{path:An}=vn;if(an&&An[0]!=="/"){const xn=an.record.path,wn=xn[xn.length-1]==="/"?"":"/";vn.path=an.record.path+(An&&wn+An)}if(gn=createRouteRecordMatcher(vn,an,fn),cn?cn.alias.push(gn):(yn=yn||gn,yn!==gn&&yn.alias.push(gn),un&&tn.name&&!isAliasRecord(gn)&&je(tn.name)),isMatchable(gn)&&Ze(gn),dn.children){const xn=dn.children;for(let wn=0;wn<xn.length;wn++)Be(xn[wn],gn,cn&&cn.children[wn])}cn=cn||gn}return yn?()=>{je(yn)}:noop$1}function je(tn){if(isRouteName(tn)){const an=ke.get(tn);an&&(ke.delete(tn),t.splice(t.indexOf(an),1),an.children.forEach(je),an.alias.forEach(je))}else{const an=t.indexOf(tn);an>-1&&(t.splice(an,1),tn.record.name&&ke.delete(tn.record.name),tn.children.forEach(je),tn.alias.forEach(je))}}function Ve(){return t}function Ze(tn){const an=findInsertionIndex(tn,t);t.splice(an,0,tn),tn.record.name&&!isAliasRecord(tn)&&ke.set(tn.record.name,tn)}function Qe(tn,an){let cn,un={},dn,fn;if("name"in tn&&tn.name){if(cn=ke.get(tn.name),!cn)throw createRouterError(1,{location:tn});fn=cn.record.name,un=assign(paramsFromLocation(an.params,cn.keys.filter(yn=>!yn.optional).concat(cn.parent?cn.parent.keys.filter(yn=>yn.optional):[]).map(yn=>yn.name)),tn.params&&paramsFromLocation(tn.params,cn.keys.map(yn=>yn.name))),dn=cn.stringify(un)}else if(tn.path!=null)dn=tn.path,cn=t.find(yn=>yn.re.test(dn)),cn&&(un=cn.parse(dn),fn=cn.record.name);else{if(cn=an.name?ke.get(an.name):t.find(yn=>yn.re.test(an.path)),!cn)throw createRouterError(1,{location:tn,currentLocation:an});fn=cn.record.name,un=assign({},an.params,tn.params),dn=cn.stringify(un)}const pn=[];let gn=cn;for(;gn;)pn.unshift(gn.record),gn=gn.parent;return{name:fn,path:dn,params:un,matched:pn,meta:mergeMetaFields(pn)}}Oe.forEach(tn=>Be(tn));function en(){t.length=0,ke.clear()}return{addRoute:Be,resolve:Qe,removeRoute:je,clearRoutes:en,getRoutes:Ve,getRecordMatcher:Ge}}function paramsFromLocation(Oe,e){const t={};for(const ke of e)ke in Oe&&(t[ke]=Oe[ke]);return t}function normalizeRouteRecord(Oe){const e={path:Oe.path,redirect:Oe.redirect,name:Oe.name,meta:Oe.meta||{},aliasOf:Oe.aliasOf,beforeEnter:Oe.beforeEnter,props:normalizeRecordProps(Oe),children:Oe.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in Oe?Oe.components||null:Oe.component&&{default:Oe.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function normalizeRecordProps(Oe){const e={},t=Oe.props||!1;if("component"in Oe)e.default=t;else for(const ke in Oe.components)e[ke]=typeof t=="object"?t[ke]:t;return e}function isAliasRecord(Oe){for(;Oe;){if(Oe.record.aliasOf)return!0;Oe=Oe.parent}return!1}function mergeMetaFields(Oe){return Oe.reduce((e,t)=>assign(e,t.meta),{})}function mergeOptions(Oe,e){const t={};for(const ke in Oe)t[ke]=ke in e?e[ke]:Oe[ke];return t}function findInsertionIndex(Oe,e){let t=0,ke=e.length;for(;t!==ke;){const Be=t+ke>>1;comparePathParserScore(Oe,e[Be])<0?ke=Be:t=Be+1}const Ge=getInsertionAncestor(Oe);return Ge&&(ke=e.lastIndexOf(Ge,ke-1)),ke}function getInsertionAncestor(Oe){let e=Oe;for(;e=e.parent;)if(isMatchable(e)&&comparePathParserScore(Oe,e)===0)return e}function isMatchable({record:Oe}){return!!(Oe.name||Oe.components&&Object.keys(Oe.components).length||Oe.redirect)}function parseQuery(Oe){const e={};if(Oe===""||Oe==="?")return e;const ke=(Oe[0]==="?"?Oe.slice(1):Oe).split("&");for(let Ge=0;Ge<ke.length;++Ge){const Be=ke[Ge].replace(PLUS_RE," "),je=Be.indexOf("="),Ve=decode$2(je<0?Be:Be.slice(0,je)),Ze=je<0?null:decode$2(Be.slice(je+1));if(Ve in e){let Qe=e[Ve];isArray(Qe)||(Qe=e[Ve]=[Qe]),Qe.push(Ze)}else e[Ve]=Ze}return e}function stringifyQuery(Oe){let e="";for(let t in Oe){const ke=Oe[t];if(t=encodeQueryKey(t),ke==null){ke!==void 0&&(e+=(e.length?"&":"")+t);continue}(isArray(ke)?ke.map(Be=>Be&&encodeQueryValue(Be)):[ke&&encodeQueryValue(ke)]).forEach(Be=>{Be!==void 0&&(e+=(e.length?"&":"")+t,Be!=null&&(e+="="+Be))})}return e}function normalizeQuery(Oe){const e={};for(const t in Oe){const ke=Oe[t];ke!==void 0&&(e[t]=isArray(ke)?ke.map(Ge=>Ge==null?null:""+Ge):ke==null?ke:""+ke)}return e}const matchedRouteKey=Symbol(""),viewDepthKey=Symbol(""),routerKey=Symbol(""),routeLocationKey=Symbol(""),routerViewLocationKey=Symbol("");function useCallbacks(){let Oe=[];function e(ke){return Oe.push(ke),()=>{const Ge=Oe.indexOf(ke);Ge>-1&&Oe.splice(Ge,1)}}function t(){Oe=[]}return{add:e,list:()=>Oe.slice(),reset:t}}function guardToPromiseFn(Oe,e,t,ke,Ge,Be=je=>je()){const je=ke&&(ke.enterCallbacks[Ge]=ke.enterCallbacks[Ge]||[]);return()=>new Promise((Ve,Ze)=>{const Qe=an=>{an===!1?Ze(createRouterError(4,{from:t,to:e})):an instanceof Error?Ze(an):isRouteLocation(an)?Ze(createRouterError(2,{from:e,to:an})):(je&&ke.enterCallbacks[Ge]===je&&typeof an=="function"&&je.push(an),Ve())},en=Be(()=>Oe.call(ke&&ke.instances[Ge],e,t,Qe));let tn=Promise.resolve(en);Oe.length<3&&(tn=tn.then(Qe)),tn.catch(an=>Ze(an))})}function extractComponentsGuards(Oe,e,t,ke,Ge=Be=>Be()){const Be=[];for(const je of Oe)for(const Ve in je.components){let Ze=je.components[Ve];if(!(e!=="beforeRouteEnter"&&!je.instances[Ve]))if(isRouteComponent(Ze)){const en=(Ze.__vccOpts||Ze)[e];en&&Be.push(guardToPromiseFn(en,t,ke,je,Ve,Ge))}else{let Qe=Ze();Be.push(()=>Qe.then(en=>{if(!en)throw new Error(`Couldn't resolve component "${Ve}" at "${je.path}"`);const tn=isESModule(en)?en.default:en;je.mods[Ve]=en,je.components[Ve]=tn;const cn=(tn.__vccOpts||tn)[e];return cn&&guardToPromiseFn(cn,t,ke,je,Ve,Ge)()}))}}return Be}function useLink(Oe){const e=inject(routerKey),t=inject(routeLocationKey),ke=computed(()=>{const Ze=unref(Oe.to);return e.resolve(Ze)}),Ge=computed(()=>{const{matched:Ze}=ke.value,{length:Qe}=Ze,en=Ze[Qe-1],tn=t.matched;if(!en||!tn.length)return-1;const an=tn.findIndex(isSameRouteRecord.bind(null,en));if(an>-1)return an;const cn=getOriginalPath(Ze[Qe-2]);return Qe>1&&getOriginalPath(en)===cn&&tn[tn.length-1].path!==cn?tn.findIndex(isSameRouteRecord.bind(null,Ze[Qe-2])):an}),Be=computed(()=>Ge.value>-1&&includesParams(t.params,ke.value.params)),je=computed(()=>Ge.value>-1&&Ge.value===t.matched.length-1&&isSameRouteLocationParams(t.params,ke.value.params));function Ve(Ze={}){if(guardEvent(Ze)){const Qe=e[unref(Oe.replace)?"replace":"push"](unref(Oe.to)).catch(noop$1);return Oe.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>Qe),Qe}return Promise.resolve()}return{route:ke,href:computed(()=>ke.value.href),isActive:Be,isExactActive:je,navigate:Ve}}function preferSingleVNode(Oe){return Oe.length===1?Oe[0]:Oe}const RouterLinkImpl=defineComponent({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink,setup(Oe,{slots:e}){const t=reactive(useLink(Oe)),{options:ke}=inject(routerKey),Ge=computed(()=>({[getLinkClass(Oe.activeClass,ke.linkActiveClass,"router-link-active")]:t.isActive,[getLinkClass(Oe.exactActiveClass,ke.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const Be=e.default&&preferSingleVNode(e.default(t));return Oe.custom?Be:h$2("a",{"aria-current":t.isExactActive?Oe.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:Ge.value},Be)}}}),RouterLink=RouterLinkImpl;function guardEvent(Oe){if(!(Oe.metaKey||Oe.altKey||Oe.ctrlKey||Oe.shiftKey)&&!Oe.defaultPrevented&&!(Oe.button!==void 0&&Oe.button!==0)){if(Oe.currentTarget&&Oe.currentTarget.getAttribute){const e=Oe.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return Oe.preventDefault&&Oe.preventDefault(),!0}}function includesParams(Oe,e){for(const t in e){const ke=e[t],Ge=Oe[t];if(typeof ke=="string"){if(ke!==Ge)return!1}else if(!isArray(Ge)||Ge.length!==ke.length||ke.some((Be,je)=>Be!==Ge[je]))return!1}return!0}function getOriginalPath(Oe){return Oe?Oe.aliasOf?Oe.aliasOf.path:Oe.path:""}const getLinkClass=(Oe,e,t)=>Oe??e??t,RouterViewImpl=defineComponent({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(Oe,{attrs:e,slots:t}){const ke=inject(routerViewLocationKey),Ge=computed(()=>Oe.route||ke.value),Be=inject(viewDepthKey,0),je=computed(()=>{let Qe=unref(Be);const{matched:en}=Ge.value;let tn;for(;(tn=en[Qe])&&!tn.components;)Qe++;return Qe}),Ve=computed(()=>Ge.value.matched[je.value]);provide(viewDepthKey,computed(()=>je.value+1)),provide(matchedRouteKey,Ve),provide(routerViewLocationKey,Ge);const Ze=ref();return watch(()=>[Ze.value,Ve.value,Oe.name],([Qe,en,tn],[an,cn,un])=>{en&&(en.instances[tn]=Qe,cn&&cn!==en&&Qe&&Qe===an&&(en.leaveGuards.size||(en.leaveGuards=cn.leaveGuards),en.updateGuards.size||(en.updateGuards=cn.updateGuards))),Qe&&en&&(!cn||!isSameRouteRecord(en,cn)||!an)&&(en.enterCallbacks[tn]||[]).forEach(dn=>dn(Qe))},{flush:"post"}),()=>{const Qe=Ge.value,en=Oe.name,tn=Ve.value,an=tn&&tn.components[en];if(!an)return normalizeSlot(t.default,{Component:an,route:Qe});const cn=tn.props[en],un=cn?cn===!0?Qe.params:typeof cn=="function"?cn(Qe):cn:null,fn=h$2(an,assign({},un,e,{onVnodeUnmounted:pn=>{pn.component.isUnmounted&&(tn.instances[en]=null)},ref:Ze}));return normalizeSlot(t.default,{Component:fn,route:Qe})||fn}}});function normalizeSlot(Oe,e){if(!Oe)return null;const t=Oe(e);return t.length===1?t[0]:t}const RouterView=RouterViewImpl;function createRouter(Oe){const e=createRouterMatcher(Oe.routes,Oe),t=Oe.parseQuery||parseQuery,ke=Oe.stringifyQuery||stringifyQuery,Ge=Oe.history,Be=useCallbacks(),je=useCallbacks(),Ve=useCallbacks(),Ze=shallowRef(START_LOCATION_NORMALIZED);let Qe=START_LOCATION_NORMALIZED;isBrowser&&Oe.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const en=applyToParams.bind(null,_i=>""+_i),tn=applyToParams.bind(null,encodeParam),an=applyToParams.bind(null,decode$2);function cn(_i,Ii){let Li,Ri;return isRouteName(_i)?(Li=e.getRecordMatcher(_i),Ri=Ii):Ri=_i,e.addRoute(Ri,Li)}function un(_i){const Ii=e.getRecordMatcher(_i);Ii&&e.removeRoute(Ii)}function dn(){return e.getRoutes().map(_i=>_i.record)}function fn(_i){return!!e.getRecordMatcher(_i)}function pn(_i,Ii){if(Ii=assign({},Ii||Ze.value),typeof _i=="string"){const Ai=parseURL(t,_i,Ii.path),Kn=e.resolve({path:Ai.path},Ii),Fn=Ge.createHref(Ai.fullPath);return assign(Ai,Kn,{params:an(Kn.params),hash:decode$2(Ai.hash),redirectedFrom:void 0,href:Fn})}let Li;if(_i.path!=null)Li=assign({},_i,{path:parseURL(t,_i.path,Ii.path).path});else{const Ai=assign({},_i.params);for(const Kn in Ai)Ai[Kn]==null&&delete Ai[Kn];Li=assign({},_i,{params:tn(Ai)}),Ii.params=tn(Ii.params)}const Ri=e.resolve(Li,Ii),tr=_i.hash||"";Ri.params=en(an(Ri.params));const Fr=stringifyURL(ke,assign({},_i,{hash:encodeHash(tr),path:Ri.path})),Bn=Ge.createHref(Fr);return assign({fullPath:Fr,hash:tr,query:ke===stringifyQuery?normalizeQuery(_i.query):_i.query||{}},Ri,{redirectedFrom:void 0,href:Bn})}function gn(_i){return typeof _i=="string"?parseURL(t,_i,Ze.value.path):assign({},_i)}function yn(_i,Ii){if(Qe!==_i)return createRouterError(8,{from:Ii,to:_i})}function vn(_i){return wn(_i)}function An(_i){return vn(assign(gn(_i),{replace:!0}))}function xn(_i){const Ii=_i.matched[_i.matched.length-1];if(Ii&&Ii.redirect){const{redirect:Li}=Ii;let Ri=typeof Li=="function"?Li(_i):Li;return typeof Ri=="string"&&(Ri=Ri.includes("?")||Ri.includes("#")?Ri=gn(Ri):{path:Ri},Ri.params={}),assign({query:_i.query,hash:_i.hash,params:Ri.path!=null?{}:_i.params},Ri)}}function wn(_i,Ii){const Li=Qe=pn(_i),Ri=Ze.value,tr=_i.state,Fr=_i.force,Bn=_i.replace===!0,Ai=xn(Li);if(Ai)return wn(assign(gn(Ai),{state:typeof Ai=="object"?assign({},tr,Ai.state):tr,force:Fr,replace:Bn}),Ii||Li);const Kn=Li;Kn.redirectedFrom=Ii;let Fn;return!Fr&&isSameRouteLocation(ke,Ri,Li)&&(Fn=createRouterError(16,{to:Kn,from:Ri}),Ni(Ri,Ri,!0,!1)),(Fn?Promise.resolve(Fn):Pn(Kn,Ri)).catch($i=>isNavigationFailure($i)?isNavigationFailure($i,2)?$i:Hn($i):$n($i,Kn,Ri)).then($i=>{if($i){if(isNavigationFailure($i,2))return wn(assign({replace:Bn},gn($i.to),{state:typeof $i.to=="object"?assign({},tr,$i.to.state):tr,force:Fr}),Ii||Kn)}else $i=Cn(Kn,Ri,!0,Bn,tr);return En(Kn,Ri,$i),$i})}function bn(_i,Ii){const Li=yn(_i,Ii);return Li?Promise.reject(Li):Promise.resolve()}function Mn(_i){const Ii=Un.values().next().value;return Ii&&typeof Ii.runWithContext=="function"?Ii.runWithContext(_i):_i()}function Pn(_i,Ii){let Li;const[Ri,tr,Fr]=extractChangingRecords(_i,Ii);Li=extractComponentsGuards(Ri.reverse(),"beforeRouteLeave",_i,Ii);for(const Ai of Ri)Ai.leaveGuards.forEach(Kn=>{Li.push(guardToPromiseFn(Kn,_i,Ii))});const Bn=bn.bind(null,_i,Ii);return Li.push(Bn),Si(Li).then(()=>{Li=[];for(const Ai of Be.list())Li.push(guardToPromiseFn(Ai,_i,Ii));return Li.push(Bn),Si(Li)}).then(()=>{Li=extractComponentsGuards(tr,"beforeRouteUpdate",_i,Ii);for(const Ai of tr)Ai.updateGuards.forEach(Kn=>{Li.push(guardToPromiseFn(Kn,_i,Ii))});return Li.push(Bn),Si(Li)}).then(()=>{Li=[];for(const Ai of Fr)if(Ai.beforeEnter)if(isArray(Ai.beforeEnter))for(const Kn of Ai.beforeEnter)Li.push(guardToPromiseFn(Kn,_i,Ii));else Li.push(guardToPromiseFn(Ai.beforeEnter,_i,Ii));return Li.push(Bn),Si(Li)}).then(()=>(_i.matched.forEach(Ai=>Ai.enterCallbacks={}),Li=extractComponentsGuards(Fr,"beforeRouteEnter",_i,Ii,Mn),Li.push(Bn),Si(Li))).then(()=>{Li=[];for(const Ai of je.list())Li.push(guardToPromiseFn(Ai,_i,Ii));return Li.push(Bn),Si(Li)}).catch(Ai=>isNavigationFailure(Ai,8)?Ai:Promise.reject(Ai))}function En(_i,Ii,Li){Ve.list().forEach(Ri=>Mn(()=>Ri(_i,Ii,Li)))}function Cn(_i,Ii,Li,Ri,tr){const Fr=yn(_i,Ii);if(Fr)return Fr;const Bn=Ii===START_LOCATION_NORMALIZED,Ai=isBrowser?history.state:{};Li&&(Ri||Bn?Ge.replace(_i.fullPath,assign({scroll:Bn&&Ai&&Ai.scroll},tr)):Ge.push(_i.fullPath,tr)),Ze.value=_i,Ni(_i,Ii,Li,Bn),Hn()}let Rn;function Tn(){Rn||(Rn=Ge.listen((_i,Ii,Li)=>{if(!Ci.listening)return;const Ri=pn(_i),tr=xn(Ri);if(tr){wn(assign(tr,{replace:!0,force:!0}),Ri).catch(noop$1);return}Qe=Ri;const Fr=Ze.value;isBrowser&&saveScrollPosition(getScrollKey(Fr.fullPath,Li.delta),computeScrollPosition()),Pn(Ri,Fr).catch(Bn=>isNavigationFailure(Bn,12)?Bn:isNavigationFailure(Bn,2)?(wn(assign(gn(Bn.to),{force:!0}),Ri).then(Ai=>{isNavigationFailure(Ai,20)&&!Li.delta&&Li.type===NavigationType.pop&&Ge.go(-1,!1)}).catch(noop$1),Promise.reject()):(Li.delta&&Ge.go(-Li.delta,!1),$n(Bn,Ri,Fr))).then(Bn=>{Bn=Bn||Cn(Ri,Fr,!1),Bn&&(Li.delta&&!isNavigationFailure(Bn,8)?Ge.go(-Li.delta,!1):Li.type===NavigationType.pop&&isNavigationFailure(Bn,20)&&Ge.go(-1,!1)),En(Ri,Fr,Bn)}).catch(noop$1)}))}let Nn=useCallbacks(),Gn=useCallbacks(),zn;function $n(_i,Ii,Li){Hn(_i);const Ri=Gn.list();return Ri.length?Ri.forEach(tr=>tr(_i,Ii,Li)):console.error(_i),Promise.reject(_i)}function Qn(){return zn&&Ze.value!==START_LOCATION_NORMALIZED?Promise.resolve():new Promise((_i,Ii)=>{Nn.add([_i,Ii])})}function Hn(_i){return zn||(zn=!_i,Tn(),Nn.list().forEach(([Ii,Li])=>_i?Li(_i):Ii()),Nn.reset()),_i}function Ni(_i,Ii,Li,Ri){const{scrollBehavior:tr}=Oe;if(!isBrowser||!tr)return Promise.resolve();const Fr=!Li&&getSavedScrollPosition(getScrollKey(_i.fullPath,0))||(Ri||!Li)&&history.state&&history.state.scroll||null;return nextTick().then(()=>tr(_i,Ii,Fr)).then(Bn=>Bn&&scrollToPosition(Bn)).catch(Bn=>$n(Bn,_i,Ii))}const On=_i=>Ge.go(_i);let qn;const Un=new Set,Ci={currentRoute:Ze,listening:!0,addRoute:cn,removeRoute:un,clearRoutes:e.clearRoutes,hasRoute:fn,getRoutes:dn,resolve:pn,options:Oe,push:vn,replace:An,go:On,back:()=>On(-1),forward:()=>On(1),beforeEach:Be.add,beforeResolve:je.add,afterEach:Ve.add,onError:Gn.add,isReady:Qn,install(_i){const Ii=this;_i.component("RouterLink",RouterLink),_i.component("RouterView",RouterView),_i.config.globalProperties.$router=Ii,Object.defineProperty(_i.config.globalProperties,"$route",{enumerable:!0,get:()=>unref(Ze)}),isBrowser&&!qn&&Ze.value===START_LOCATION_NORMALIZED&&(qn=!0,vn(Ge.location).catch(tr=>{}));const Li={};for(const tr in START_LOCATION_NORMALIZED)Object.defineProperty(Li,tr,{get:()=>Ze.value[tr],enumerable:!0});_i.provide(routerKey,Ii),_i.provide(routeLocationKey,shallowReactive(Li)),_i.provide(routerViewLocationKey,Ze);const Ri=_i.unmount;Un.add(_i),_i.unmount=function(){Un.delete(_i),Un.size<1&&(Qe=START_LOCATION_NORMALIZED,Rn&&Rn(),Rn=null,Ze.value=START_LOCATION_NORMALIZED,qn=!1,zn=!1),Ri()}}};function Si(_i){return _i.reduce((Ii,Li)=>Ii.then(()=>Mn(Li)),Promise.resolve())}return Ci}function extractChangingRecords(Oe,e){const t=[],ke=[],Ge=[],Be=Math.max(e.matched.length,Oe.matched.length);for(let je=0;je<Be;je++){const Ve=e.matched[je];Ve&&(Oe.matched.find(Qe=>isSameRouteRecord(Qe,Ve))?ke.push(Ve):t.push(Ve));const Ze=Oe.matched[je];Ze&&(e.matched.find(Qe=>isSameRouteRecord(Qe,Ze))||Ge.push(Ze))}return[t,ke,Ge]}function useRouter(){return inject(routerKey)}function useRoute(Oe){return inject(routeLocationKey)}function tryOnScopeDispose(Oe){return getCurrentScope()?(onScopeDispose(Oe),!0):!1}function toValue(Oe){return typeof Oe=="function"?Oe():unref(Oe)}const isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const toString$4=Object.prototype.toString,isObject=Oe=>toString$4.call(Oe)==="[object Object]",noop=()=>{};function createFilterWrapper(Oe,e){function t(...ke){return new Promise((Ge,Be)=>{Promise.resolve(Oe(()=>e.apply(this,ke),{fn:e,thisArg:this,args:ke})).then(Ge).catch(Be)})}return t}const bypassFilter=Oe=>Oe();function pausableFilter(Oe=bypassFilter){const e=ref(!0);function t(){e.value=!1}function ke(){e.value=!0}const Ge=(...Be)=>{e.value&&Oe(...Be)};return{isActive:readonly(e),pause:t,resume:ke,eventFilter:Ge}}function createSingletonPromise(Oe){let e;function t(){return e||(e=Oe()),e}return t.reset=async()=>{const ke=e;e=void 0,ke&&await ke},t}function getLifeCycleTarget(Oe){return getCurrentInstance()}function watchWithFilter(Oe,e,t={}){const{eventFilter:ke=bypassFilter,...Ge}=t;return watch(Oe,createFilterWrapper(ke,e),Ge)}function watchPausable(Oe,e,t={}){const{eventFilter:ke,...Ge}=t,{eventFilter:Be,pause:je,resume:Ve,isActive:Ze}=pausableFilter(ke);return{stop:watchWithFilter(Oe,e,{...Ge,eventFilter:Be}),pause:je,resume:Ve,isActive:Ze}}function tryOnMounted(Oe,e=!0,t){getLifeCycleTarget()?onMounted(Oe,t):e?Oe():nextTick(Oe)}function useTimeoutFn(Oe,e,t={}){const{immediate:ke=!0}=t,Ge=ref(!1);let Be=null;function je(){Be&&(clearTimeout(Be),Be=null)}function Ve(){Ge.value=!1,je()}function Ze(...Qe){je(),Ge.value=!0,Be=setTimeout(()=>{Ge.value=!1,Be=null,Oe(...Qe)},toValue(e))}return ke&&(Ge.value=!0,isClient&&Ze()),tryOnScopeDispose(Ve),{isPending:readonly(Ge),start:Ze,stop:Ve}}function unrefElement(Oe){var e;const t=toValue(Oe);return(e=t==null?void 0:t.$el)!=null?e:t}const defaultWindow=isClient?window:void 0,defaultNavigator=isClient?window.navigator:void 0;function useEventListener(...Oe){let e,t,ke,Ge;if(typeof Oe[0]=="string"||Array.isArray(Oe[0])?([t,ke,Ge]=Oe,e=defaultWindow):[e,t,ke,Ge]=Oe,!e)return noop;Array.isArray(t)||(t=[t]),Array.isArray(ke)||(ke=[ke]);const Be=[],je=()=>{Be.forEach(en=>en()),Be.length=0},Ve=(en,tn,an,cn)=>(en.addEventListener(tn,an,cn),()=>en.removeEventListener(tn,an,cn)),Ze=watch(()=>[unrefElement(e),toValue(Ge)],([en,tn])=>{if(je(),!en)return;const an=isObject(tn)?{...tn}:tn;Be.push(...t.flatMap(cn=>ke.map(un=>Ve(en,cn,un,an))))},{immediate:!0,flush:"post"}),Qe=()=>{Ze(),je()};return tryOnScopeDispose(Qe),Qe}function useMounted(){const Oe=ref(!1),e=getCurrentInstance();return e&&onMounted(()=>{Oe.value=!0},e),Oe}function useSupported(Oe){const e=useMounted();return computed(()=>(e.value,!!Oe()))}function useMediaQuery(Oe,e={}){const{window:t=defaultWindow}=e,ke=useSupported(()=>t&&"matchMedia"in t&&typeof t.matchMedia=="function");let Ge;const Be=ref(!1),je=Qe=>{Be.value=Qe.matches},Ve=()=>{Ge&&("removeEventListener"in Ge?Ge.removeEventListener("change",je):Ge.removeListener(je))},Ze=watchEffect(()=>{ke.value&&(Ve(),Ge=t.matchMedia(toValue(Oe)),"addEventListener"in Ge?Ge.addEventListener("change",je):Ge.addListener(je),Be.value=Ge.matches)});return tryOnScopeDispose(()=>{Ze(),Ve(),Ge=void 0}),Be}function usePermission(Oe,e={}){const{controls:t=!1,navigator:ke=defaultNavigator}=e,Ge=useSupported(()=>ke&&"permissions"in ke);let Be;const je=typeof Oe=="string"?{name:Oe}:Oe,Ve=ref(),Ze=()=>{Be&&(Ve.value=Be.state)},Qe=createSingletonPromise(async()=>{if(Ge.value){if(!Be)try{Be=await ke.permissions.query(je),useEventListener(Be,"change",Ze),Ze()}catch{Ve.value="prompt"}return Be}});return Qe(),t?{state:Ve,isSupported:Ge,query:Qe}:Ve}function useClipboard(Oe={}){const{navigator:e=defaultNavigator,read:t=!1,source:ke,copiedDuring:Ge=1500,legacy:Be=!1}=Oe,je=useSupported(()=>e&&"clipboard"in e),Ve=usePermission("clipboard-read"),Ze=usePermission("clipboard-write"),Qe=computed(()=>je.value||Be),en=ref(""),tn=ref(!1),an=useTimeoutFn(()=>tn.value=!1,Ge);function cn(){je.value&&pn(Ve.value)?e.clipboard.readText().then(gn=>{en.value=gn}):en.value=fn()}Qe.value&&t&&useEventListener(["copy","cut"],cn);async function un(gn=toValue(ke)){Qe.value&&gn!=null&&(je.value&&pn(Ze.value)?await e.clipboard.writeText(gn):dn(gn),en.value=gn,tn.value=!0,an.start())}function dn(gn){const yn=document.createElement("textarea");yn.value=gn??"",yn.style.position="absolute",yn.style.opacity="0",document.body.appendChild(yn),yn.select(),document.execCommand("copy"),yn.remove()}function fn(){var gn,yn,vn;return(vn=(yn=(gn=document==null?void 0:document.getSelection)==null?void 0:gn.call(document))==null?void 0:yn.toString())!=null?vn:""}function pn(gn){return gn==="granted"||gn==="prompt"}return{isSupported:Qe,text:en,copied:tn,copy:un}}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers=getHandlers();function getHandlers(){return globalKey in _global||(_global[globalKey]=_global[globalKey]||{}),_global[globalKey]}function getSSRHandler(Oe,e){return handlers[Oe]||e}function guessSerializerType(Oe){return Oe==null?"any":Oe instanceof Set?"set":Oe instanceof Map?"map":Oe instanceof Date?"date":typeof Oe=="boolean"?"boolean":typeof Oe=="string"?"string":typeof Oe=="object"?"object":Number.isNaN(Oe)?"any":"number"}const StorageSerializers={boolean:{read:Oe=>Oe==="true",write:Oe=>String(Oe)},object:{read:Oe=>JSON.parse(Oe),write:Oe=>JSON.stringify(Oe)},number:{read:Oe=>Number.parseFloat(Oe),write:Oe=>String(Oe)},any:{read:Oe=>Oe,write:Oe=>String(Oe)},string:{read:Oe=>Oe,write:Oe=>String(Oe)},map:{read:Oe=>new Map(JSON.parse(Oe)),write:Oe=>JSON.stringify(Array.from(Oe.entries()))},set:{read:Oe=>new Set(JSON.parse(Oe)),write:Oe=>JSON.stringify(Array.from(Oe))},date:{read:Oe=>new Date(Oe),write:Oe=>Oe.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(Oe,e,t,ke={}){var Ge;const{flush:Be="pre",deep:je=!0,listenToStorageChanges:Ve=!0,writeDefaults:Ze=!0,mergeDefaults:Qe=!1,shallow:en,window:tn=defaultWindow,eventFilter:an,onError:cn=Pn=>{console.error(Pn)},initOnMounted:un}=ke,dn=(en?shallowRef:ref)(typeof e=="function"?e():e);if(!t)try{t=getSSRHandler("getDefaultStorage",()=>{var Pn;return(Pn=defaultWindow)==null?void 0:Pn.localStorage})()}catch(Pn){cn(Pn)}if(!t)return dn;const fn=toValue(e),pn=guessSerializerType(fn),gn=(Ge=ke.serializer)!=null?Ge:StorageSerializers[pn],{pause:yn,resume:vn}=watchPausable(dn,()=>xn(dn.value),{flush:Be,deep:je,eventFilter:an});tn&&Ve&&tryOnMounted(()=>{useEventListener(tn,"storage",bn),useEventListener(tn,customStorageEventName,Mn),un&&bn()}),un||bn();function An(Pn,En){tn&&tn.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:Oe,oldValue:Pn,newValue:En,storageArea:t}}))}function xn(Pn){try{const En=t.getItem(Oe);if(Pn==null)An(En,null),t.removeItem(Oe);else{const Cn=gn.write(Pn);En!==Cn&&(t.setItem(Oe,Cn),An(En,Cn))}}catch(En){cn(En)}}function wn(Pn){const En=Pn?Pn.newValue:t.getItem(Oe);if(En==null)return Ze&&fn!=null&&t.setItem(Oe,gn.write(fn)),fn;if(!Pn&&Qe){const Cn=gn.read(En);return typeof Qe=="function"?Qe(Cn,fn):pn==="object"&&!Array.isArray(Cn)?{...fn,...Cn}:Cn}else return typeof En!="string"?En:gn.read(En)}function bn(Pn){if(!(Pn&&Pn.storageArea!==t)){if(Pn&&Pn.key==null){dn.value=fn;return}if(!(Pn&&Pn.key!==Oe)){yn();try{(Pn==null?void 0:Pn.newValue)!==gn.write(dn.value)&&(dn.value=wn(Pn))}catch(En){cn(En)}finally{Pn?nextTick(vn):vn()}}}}function Mn(Pn){bn(Pn.detail)}return dn}function useResizeObserver(Oe,e,t={}){const{window:ke=defaultWindow,...Ge}=t;let Be;const je=useSupported(()=>ke&&"ResizeObserver"in ke),Ve=()=>{Be&&(Be.disconnect(),Be=void 0)},Ze=computed(()=>Array.isArray(Oe)?Oe.map(tn=>unrefElement(tn)):[unrefElement(Oe)]),Qe=watch(Ze,tn=>{if(Ve(),je.value&&ke){Be=new ResizeObserver(e);for(const an of tn)an&&Be.observe(an,Ge)}},{immediate:!0,flush:"post"}),en=()=>{Ve(),Qe()};return tryOnScopeDispose(en),{isSupported:je,stop:en}}function useElementSize(Oe,e={width:0,height:0},t={}){const{window:ke=defaultWindow,box:Ge="content-box"}=t,Be=computed(()=>{var tn,an;return(an=(tn=unrefElement(Oe))==null?void 0:tn.namespaceURI)==null?void 0:an.includes("svg")}),je=ref(e.width),Ve=ref(e.height),{stop:Ze}=useResizeObserver(Oe,([tn])=>{const an=Ge==="border-box"?tn.borderBoxSize:Ge==="content-box"?tn.contentBoxSize:tn.devicePixelContentBoxSize;if(ke&&Be.value){const cn=unrefElement(Oe);if(cn){const un=cn.getBoundingClientRect();je.value=un.width,Ve.value=un.height}}else if(an){const cn=Array.isArray(an)?an:[an];je.value=cn.reduce((un,{inlineSize:dn})=>un+dn,0),Ve.value=cn.reduce((un,{blockSize:dn})=>un+dn,0)}else je.value=tn.contentRect.width,Ve.value=tn.contentRect.height},t);tryOnMounted(()=>{const tn=unrefElement(Oe);tn&&(je.value="offsetWidth"in tn?tn.offsetWidth:e.width,Ve.value="offsetHeight"in tn?tn.offsetHeight:e.height)});const Qe=watch(()=>unrefElement(Oe),tn=>{je.value=tn?e.width:0,Ve.value=tn?e.height:0});function en(){Ze(),Qe()}return{width:je,height:Ve,stop:en}}function useUrlSearchParams(Oe="history",e={}){const{initialValue:t={},removeNullishValues:ke=!0,removeFalsyValues:Ge=!1,write:Be=!0,window:je=defaultWindow}=e;if(!je)return reactive(t);const Ve=reactive({});function Ze(){if(Oe==="history")return je.location.search||"";if(Oe==="hash"){const pn=je.location.hash||"",gn=pn.indexOf("?");return gn>0?pn.slice(gn):""}else return(je.location.hash||"").replace(/^#/,"")}function Qe(pn){const gn=pn.toString();if(Oe==="history")return`${gn?`?${gn}`:""}${je.location.hash||""}`;if(Oe==="hash-params")return`${je.location.search||""}${gn?`#${gn}`:""}`;const yn=je.location.hash||"#",vn=yn.indexOf("?");return vn>0?`${yn.slice(0,vn)}${gn?`?${gn}`:""}`:`${yn}${gn?`?${gn}`:""}`}function en(){return new URLSearchParams(Ze())}function tn(pn){const gn=new Set(Object.keys(Ve));for(const yn of pn.keys()){const vn=pn.getAll(yn);Ve[yn]=vn.length>1?vn:pn.get(yn)||"",gn.delete(yn)}Array.from(gn).forEach(yn=>delete Ve[yn])}const{pause:an,resume:cn}=watchPausable(Ve,()=>{const pn=new URLSearchParams("");Object.keys(Ve).forEach(gn=>{const yn=Ve[gn];Array.isArray(yn)?yn.forEach(vn=>pn.append(gn,vn)):ke&&yn==null||Ge&&!yn?pn.delete(gn):pn.set(gn,yn)}),un(pn)},{deep:!0});function un(pn,gn){an(),gn&&tn(pn),je.history.replaceState(je.history.state,je.document.title,je.location.pathname+Qe(pn)),cn()}function dn(){Be&&un(en(),!0)}useEventListener(je,"popstate",dn,!1),Oe!=="history"&&useEventListener(je,"hashchange",dn,!1);const fn=en();return fn.keys().next().value?tn(fn):Object.assign(Ve,t),Ve}function useMatchMedia(Oe){var e={SM:"576px",MD:"768px",LG:"992px",XL:"1440px"};if(e[Oe]!==void 0){const t="(max-width: "+e[Oe]+")";return useMediaQuery(t)}}function useMatchMediaHeight(Oe){var e={XS:"739px",SM:"719px",LG:"779px",XL:"859px"};{const t="(max-height: "+e[Oe]+")";return useMediaQuery(t)}}function useBaseUrl(){return"https://cartes.gouv.fr"}const headerParams=ref({});function useHeaderParams(){return headerParams.value={serviceTitle:"cartes.gouv.fr",serviceDescription:"Le service public des cartes et données du territoire",logoText:["RÉPUBLIQUE","FRANÇAISE"],quickLinks:[{label:"Accueil",to:"/",href:useBaseUrl()+"/",icon:"ri-arrow-right-line",iconRight:!0},{label:"Catalogue",to:"/catalogue",href:useBaseUrl()+"/catalogue",icon:"ri-arrow-right-line",iconRight:!0}],searchQuery:ref("")},headerParams}const LogoIGN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAI4AAABaCAYAAABuUm4xAAAACXBIWXMAAANcAAADXAG0iWi0AAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAADJhJREFUeJztnWlQFGcax/89A8OcHHIJIogkCIInIHjibYwnnkk0HjGlW7Vbu1VbW7X5tlX7Ybdqd1NJNpuoGIP3lZi4xjtRY/DCi/sQRO7hnosZYGaY7v3AklUj003TM9Pjvr8PfKCffp+nu/799vs+7/P2UAzDMCAQhojE0wEQvBMiHAIviHAIvCDCIfCCCIfACyIcAi+IcAi8IMIh8IIIh8ALIhwCL4hwCLwgwiHwggiHwAsiHAIviHAIvCDCIfCCCIfACyIcAi98PB2AK3E4HDCaTOjU6WG2WGC1WtHX1wepVAqZTAaVUokRQUEYERQIHx/X3IoH+QVQyOVISkxwSfueQvC7xaWEmaIood0CAGiaRm19A8ofP0Z1TS20zS3o7e0FnPljGMhkMkRGRCD+tbFIHj8eo0dFChbjxe+vQqfXY9P6tUidOkWQNgfDnfdecOGcu3QZeQ8fObXZvGE9EuJfF8yn3mDArbt5ePCoAAaT6fmDbDeKomCz21FbX4/a+npcufYjwkJDkJGWioy0VCgVimHHxzAMjp/+FiqVConj4ofd3mCcOP0tSisqBj2enpKCFUuXCOJLcOH0Wm0wmy1Obfr6+gTxZTSacPGHq7j/KB8Oh0OQNgGgrb0DZy9cwuWr1zAzPR0L5s6BSqkcVpsOhwMHjh7Hr3fuQHRUlECRPk9vb6/Te2+1WgXz5ZWDY5qm8WPuTfzlw49w9/4DQUXzLFarDdd+ysVfP/wYBcUlw2/PZkP2gUNo7+gQIDrP4nXCMXV1Yff+HJw5fxFWm80tPs0WC46d+lqQntJstmDPlwdh6uoSIDLP4VXC0ba04KPPdqOq+qnbfctkMkilUkHa6tTpkJ1zED29vYK05wm8RjiNWi0+y94PvcHoEf9yPz9BZ4ON2mbkHDkm2HjP3XhFHqejU4e9Xx6Epbt7yOdKpVIEBQYiKDAAKqUSUqkUfX19sHR3Q6fTw2A0guYwjVUIMLt6kcon1Tj21Wls3rgeEonXPMMAvEA4VpsN+w8dQZfZzPkctUqFqZMmIikxATHRoyH38xvU1mLpRk1dHYpKy1BYUjrozEOhkA85di48KiyCWqXCmpXLXdK+qxC9cM6cO4/m1lZOtmqVCm8snI/01BT4+vpyOkelUiJ5fCKSxycia8Uy3LxzF9du5P5i/KGQu0Y4APDT7Tvw12iwcF6my3wIjaiFU1X9FHfvP+RkOzFpPDauzRpWvkUhl2PRvLlIT03BqW/+jZLy8v8dc8Gr6lnOXb4Cf40G01KnutSPUIj2xUrTNM6cu8Apjb4gcza2b35n2Em6Afw1GuzYsgnL31j884DYlT3OACe/+RZlFY9d7kcIRCucwuISNDU3s9rNykjHiqVvCL7+RVEUFs7NxMY1qyGhKEGWHthw0DQOHDuB2rp6l/saLqIUDgPgeu4tVrvoqChkrVjm0lgy0lKxatmbkLuhxwEAm82GLw4dQWtbu1v88UWUwmnSalHf2OjURiKRYMOaVYIl5ZyROWsGpkya4HI/A5gtFmTnHITRaGI39hCiFE5+YRGrzaTkJERFRrohmn7UKpXbfAFAp16PvQcOoqenx61+uSJK4ZSWsw8Q58yc7oZIPIu2uQX7Dx+F3S6+7LLohGM0mdDa7vz9PiIoEDHR0W6KyLM8eVqDIydPgabF9Y1P0eVxGhqbWKfg8XFxkHCaRTHQWSrRYMhFm6kAhu4qmG2tsDvMYBgaPlIFlL4h8FfEIFiViJH+aYgMzIBMqhbmYgSisKQU33z3HdatWunpUH5GdMJpbmHPEo9mKYSyOcwobz6Ospaj0FsqB7Vz0L2w2vXQd1ehrvMHAIBUIsfooDlIGLkRY4IXQUK59hb5yWScykNu3smDv0aDxfPnuTQerohOOJ06HatNWGjIoMdKm4/gXu3f0GPjVyzloHtR23kFtZ1X4K+IQUr07zAufJ3LBLR4/jwUFJegoamJ1fbi91ehUasxfVqaS2IZCqIb45hYFjMZhkGAv2bQ4/W6a7xF84tYeupw/fHvcTp/Odq72Gd6fJDL/bBz2xaEBgez2jIMg6/PnEVJWTmrrasRnXB6eliKmygKMpls0MOz4v4MmU+AoDG1dxXhdMFKFDbuAwPhB6kajRq73tsGf83gD8QADprGoRMn8bS2TvA4hoLohONwOJ96Us/8fRkaeRTmxf8dQl8aTdtwq/pPuFH1ARhG+BrnkOAR2PXeVk5rYjabHfsPHUFLa5vgcXBFdMJhK2hiGAZ2u92pTVzocmTEfiBkWD9Tpj2M65V/cEnPMyoiAu9v2cypJMTS3Y29OQc8VhEpOuH4yQYvugL6Fx/NHIq6pkb/BumxH8BZ78SXipaTeFj3ieDtAkDc2Fi8+9YGThWBeoMRe3MOoNsD2WXRCUetZk/td3CYeQFASvRvsTDxX/CRCr9ccL/uH2gy3Ba8XaC/tmj96pWcVvxbWtvwxcHDrL2w0IhOOEGBgaw22uYWzu3Fh2Vh/dSLGBkwbThh/QKGoXGj6o9w0MJtcnuW6dPS8ObihZxsn9bW4dDxk6Bp2iWxvAzRCcdZjmaAJ09rhtRmkPI1ZE06jQUJnyJAEcs3tBegEKh8HXbH0AvoubJwbiYyZ87gZFtcVo6yx4MnO4VGdAnA0aNGsdo0NTdDbzAiKJD7tJuipBgXvhavh61ETcdllDYfhdZwCzQztAVEiUSGmBELMDlqFyIE7sVehKIorFq2FGaLBQ8LClntXbWj9WWITjjhYaFQKZVOt8LQNI0H+flYNG/ukNuXUL6IC12OuNDl6LF3oEGfi2ZjHtq7imHsrYWtz/TMdJuCr1QFjXw0QjUTMCpgBmKC50Phy94rCoVEIsE769fC0t2Nisoqt/llQ3TCkUgkGPdaHB4VFTu1u3knD5mzZkLGcTfDy1D4hiA+LAvxYVn//Q8Du6MbfbQVAA0pJYOvVA2Kev6NTjMMx0VWYZBKpdi++R18vm8/6hqcF7i5C9GNcQBg4oRkVhujyYQbuTcF9tzfwyh8R0DhGwKZjz8oSgKGYaA3GPCwoBBHTn6FfTkHBfbLjp9Mhp3btiA8LNTtvl+G6HocAEhKGMf6ugKAK9dvIDlpPCLCwwXzbbfbcfjEKQCAzW6H2WyBTq9/LlcSG+OZWiCVSoVfbd+GT/Zkw2D0TOJvAFH2OL6+vshIS2W1s9vtyDl8DBaLcDMbB02juKwcRaVlqKisQqNW65EE22AEBQVi1/atgm0F4osohQP0F4j7OVnMHKCtowN7vsyB2eL8Y06vEhEjw/H+1s1OF3tdjWiF46/RYO7smZxsG5q0+PizPaw7I14lYmNisPXtjW7Z5fEyRCscAFiQOYdTnQrQvwzxye5snDl/YXivLnGV9jolKTEBb63JctnHOJ0hysHxADKZDG+vX4vPsr+Ag0M63eFw4MfcW7hz7z5SJk9GyqSJGBMTzfpU0jSDltZWFJeVI7+oiNO2Y7GQljIFXRYzzl645Fa/ohYOAIwdE4MVS5fgzPmLnM+xWm24nXcPt/PuQe7nh1GRkQgPDYG/vz/kfrL+L41abTCZu9De0YkmbbNXj5Hmz5kNs9mCaz/lus2n6IUDAHNnz0JHpw437+YN+dxeqxXVNTWorhna+pa3sWLpEpgtFtxj+VSwUIh6jPMsa1etEEWRtlihKAob16x22xfcvUY4FEVhQ9YqLFkw3yODQW9AKpVi69sbMTYmxuW+vEY4QL94li5agB3vboKGQ8GXK/CTyZCUIN7fZZDJZNixdTMiRwqXTX8ZXjHGeZHk8YmIiR6Nsxcu4UF+gVtmQSqVEjPTp2H2jOnQqMW10/NFVEoldm7fin/uzobOYHCJD68UDgBo1Gps2rAOc2ZMx5Vr11FaXsHp66FDQSKRIC52DNKmTsHkCckezdQOlcCAAOx6bxs+3bvPJTNGihH4ca18Ug1ti/PSzuTERIQEjxDSLTo6dbj/KB+FxSVoaeO/bUStUiEudgwSx8UjKSEBGs3wepe7Dx72/4LNIMTHxSEyYuSwfDijrqERn+/bD6vNhlkZ6Vi3Wpj954ILRwzo9AY8ra1FY5MWbe0dMBiN6O7phs1mBwPA18cHcj8/qNUqBAYEIDQ4GCPDwxA1KhIhwcGv3OC7orIKh0+cwrSUqVi1bKkgbb6SwhmMgUt91YTBBYZhBL3u/yvhEITDq6bjBPFAhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF4Q4RB4QYRD4AURDoEXRDgEXhDhEHhBhEPgBREOgRdEOAReEOEQeEGEQ+AFEQ6BF0Q4BF78BxTBP6hVBWeZAAAAAElFTkSuQmCC",LogoTRANSFO="/cartes.gouv.fr-entree-carto/assets/logo-transformation-fonction-publiques-C9P2QqWZ.png",LogoECOLO="/cartes.gouv.fr-entree-carto/assets/logo-transition-ecologique-D0O5Izlc.png",LogoCNIG="/cartes.gouv.fr-entree-carto/assets/logo-cnig-CXEVuuxB.png";function useFooterParams(){return{beforeMandatoryLinks:[{label:"Plan du site",href:useBaseUrl()+"/plan-du-site"}],a11yCompliance:"partiellement conforme",legalLink:"/mentions-legales",personalDataLink:"/donnees-personnelles",cookiesLink:"/cookies",a11yComplianceLink:"/accessibilite",descText:"Cartes.gouv.fr est développé par l’Institut national de l’information géographique et forestière (IGN) et ses partenaires. Le site s’appuie sur la Géoplateforme, la nouvelle infrastructure publique, ouverte et collaborative des données géographiques.",homeLink:"/",licenceText:void 0,licenceTo:void 0,licenceName:void 0,licenceLinkProps:void 0,ecosystemLinks:[{label:"info.gouv.fr",href:"https://info.gouv.fr"},{label:"service-public.fr",href:"https://service-public.fr"},{label:"legifrance.gouv.fr",href:"https://legifrance.gouv.fr"},{label:"data.gouv.fr",href:"https://data.gouv.fr"}],partners:{title:"Nos partenaires",mainPartner:{},subPartners:[{href:"https://www.ign.fr/",logo:LogoIGN,name:"IGN"},{href:"https://www.transformation.gouv.fr/",logo:LogoTRANSFO,name:"Ministère de la transformation et de la fonction publiques"},{href:"https://www.ecologie.gouv.fr/",logo:LogoECOLO,name:"Ministère de la Transition Écologique et de la Cohésion des Territoires"},{href:"https://cnig.gouv.fr/",logo:LogoCNIG,name:"Conseil national de l’information géolocalisée"}]},mandatoryLinks:[{label:"Accessibilité : partiellement conforme",href:useBaseUrl()+"/accessibilite"},{label:"Mentions légales",href:useBaseUrl()+"/mentions-legales"},{label:"Données personnelles",href:useBaseUrl()+"/donnees-personnelles"},{label:"Gestion des cookies",href:useBaseUrl()+"/cookies"}]}}const __default__$l={},_sfc_main$R=Object.assign(__default__$l,{__name:"ModalConsent",setup(Oe,{expose:e}){const t=useRouter(),ke=useEulerian();var Ge=ke.hasKey();const Be=ref(!Ge),je="Panneau de gestion des cookies",Ve="md",Ze=useBaseUrl()+"/donnees-personnelles",Qe=()=>{Be.value=!0,ke.pause()},en=()=>{Be.value=!1,t.push({path:"/"}),ke.resume()};e({openModalConsent:Qe,onModalConsentClose:en});const tn=()=>{ke.start(),en()},an=()=>{ke.stop(),en()};return(cn,un)=>{const dn=sn,fn=$s;return openBlock(),createBlock(fn,{opened:unref(Be),title:je,size:Ve,onClose:en},{default:withCtx(()=>[createBaseVNode("p",null,[createVNode(dn,{onAcceptAll:un[0]||(un[0]=pn=>tn()),onRefuseAll:un[1]||(un[1]=pn=>an())},{default:withCtx(()=>[un[2]||(un[2]=createTextVNode(" Préférences pour tous les services. ")),createBaseVNode("a",{href:Ze},"Données personnelles et cookies")]),_:1})]),un[3]||(un[3]=createBaseVNode("hr",null,null,-1)),un[4]||(un[4]=createBaseVNode("div",null,[createBaseVNode("h5",null,"Eulerian Analytics"),createTextVNode(" En cliquant sur 'Tout accepter', vous consentez à l'utilisation des cookies pour nous aider à améliorer notre site web en collectant et en rapportant des informations sur votre utilisation grâce à Eulerian Analytics. "),createBaseVNode("br"),createTextVNode(" Si vous n'êtes pas d'accord, veuillez cliquer sur 'Tout refuser'. Votre expérience de navigation ne sera pas affectée. ")],-1))]),_:1},8,["opened"])}}}),LogoSun="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M19,72c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1%20c0-0.55145,0.4486-1,1-1s1,0.44855,1,1C32,9.5514,31.5514,10,31,10z%20M67,66c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S67.5514,66,67,66z%20M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M9,32c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M32.4453,44.1679c0.4595-0.3063,1.0804-0.1821,1.3867,0.2774C35.3156,46.6706,38.5061,48,41,48%20c0.5523,0,1,0.4477,1,1s-0.4477,1-1,1c-3.1061,0-6.931-1.5937-8.8321-4.4453C31.8616,45.0952,31.9858,44.4743,32.4453,44.1679z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M39.00671,20.04651L39,19.92981v-5.47369c0-0.55225,0.44769-1,1-1c0.51282,0,0.93549,0.38611,0.99329,0.88336%20L41,14.45612v5.47369c0,0.55231-0.44769,1-1,1C39.48718,20.92981,39.06451,20.54382,39.00671,20.04651z%20M19.37927,39H14%20l-0.11658,0.00671C13.38599,39.06451,13,39.48718,13,40c0,0.55231,0.44769,1,1,1h5.37927l0.11664-0.00671%20c0.49738-0.0578,0.88336-0.48047,0.88336-0.99329C20.37927,39.44769,19.93158,39,19.37927,39z%20M66,39h-5.37927l-0.11664,0.00671%20c-0.49738,0.0578-0.88336,0.48047-0.88336,0.99329c0,0.55231,0.44769,1,1,1H66l0.11658-0.00671C66.61401,40.93549,67,40.51282,67,40%20C67,39.44769,66.55231,39,66,39z%20M40,59.07019c-0.55231,0-1,0.44769-1,1v5.47369l0.00671,0.11664%20c0.0578,0.49725,0.48047,0.88336,0.99329,0.88336c0.55231,0,1-0.44769,1-1v-5.47369l-0.00671-0.11658%20C40.93549,59.45618,40.51282,59.07019,40,59.07019z%20M24.04541,53.89557l-1.79309,1.82452l-0.0824,0.09503%20c-0.30164,0.3949-0.26892,0.96185,0.09467,1.31915c0.39392,0.38715,1.02704,0.38159,1.41412-0.01227l1.79309-1.82458l0.0824-0.09491%20c0.30157-0.3949,0.26898-0.96191-0.0946-1.31921C25.06561,53.49622,24.4325,53.50171,24.04541,53.89557z%20M55.95459,24.27991%20l1.79309-1.82458l0.0824-0.09491c0.30164-0.3949,0.26892-0.96191-0.09467-1.31921c-0.39392-0.38721-1.02704-0.38159-1.41412,0.01233%20l-1.79321,1.82446L54.4458,22.9729c-0.30157,0.39502-0.26898,0.96191,0.0946,1.31927%20C54.93439,24.67932,55.5675,24.67383,55.95459,24.27991z%20M23.67871,21.05353l-0.09338-0.08405%20c-0.38971-0.30847-0.95715-0.28571-1.32074,0.07172c-0.39386,0.38708-0.39941,1.0202-0.01227,1.41412l1.79309,1.82458%20l0.09351,0.08398c0.38959,0.30841,0.95697,0.28558,1.32068-0.07172c0.39392-0.38708,0.39941-1.02026,0.01221-1.41418%20L23.67871,21.05353z%20M55.95459,53.89557l-0.09351-0.08398c-0.38959-0.30847-0.95697-0.28571-1.32068,0.07172%20c-0.39392,0.38708-0.39941,1.0202-0.01233,1.41412l1.79321,1.82458l0.09338,0.08398%20c0.38971,0.30841,0.95715,0.28558,1.32074-0.07172c0.39386-0.38708,0.39941-1.02026,0.01227-1.41418L55.95459,53.89557z%20M40,26%20c-7.73199,0-14,6.26801-14,14c0,1.91528,0.38538,3.77838,1.12323,5.50281c0.21716,0.50781,0.80499,0.74329,1.31268,0.52606%20c0.50781-0.21729,0.74329-0.80499,0.52606-1.31274C28.33002,43.2392,28,41.64362,28,40c0-6.62738,5.37262-12,12-12s12,5.37262,12,12%20s-5.37262,12-12,12c-3.5495,0-6.84521-1.54871-9.11212-4.19141c-0.35956-0.41907-0.99091-0.46747-1.4101-0.10791%20c-0.41919,0.35962-0.46747,0.99091-0.10791,1.4101C32.01282,52.19177,35.86072,54,40,54c7.73199,0,14-6.26801,14-14%20S47.73199,26,40,26z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoMoon="data:image/svg+xml,%3csvg%20width='80px'%20height='80px'%20viewBox='0%200%2080%2080'%20xmlns='http://www.w3.org/2000/svg'%3e%3cstyle%3e%20.fr-artwork-decorative%20{%20fill:%20%23ECECFF;%20}%20.fr-artwork-minor%20{%20fill:%20%23E1000F;%20}%20.fr-artwork-major%20{%20fill:%20%23000091;%20}%20%3c/style%3e%3csymbol%20id='artwork-decorative'%3e%3cpath%20d='M67,16c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S67.5514,16,67,16z%20M19,72c-0.5514,0-1-0.4486-1-1%20s0.4486-1,1-1s1,0.4486,1,1S19.5514,72,19,72z%20M31,10c-0.5514,0-1-0.4486-1-1c0-0.55145,0.4486-1,1-1s1,0.44855,1,1%20C32,9.5514,31.5514,10,31,10z%20M69,60c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S69.5514,60,69,60z%20M45,70%20c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1S45.5514,70,45,70z%20M9,32c-0.5514,0-1-0.4486-1-1s0.4486-1,1-1s1,0.4486,1,1%20S9.5514,32,9,32z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-minor'%3e%3cpath%20d='M41,30c-0.5523,0-1,0.4477-1,1s0.4477,1,1,1s1-0.4477,1-1S41.5523,30,41,30z%20M59,38c-0.5523,0-1,0.4477-1,1%20s0.4477,1,1,1s1-0.4477,1-1S59.5523,38,59,38z%20M55,38c0.5523,0,1,0.4477,1,1c0,0.5128-0.386,0.9355-0.8834,0.9933L55,40h-2%20c-0.5523,0-1-0.4477-1-1c0-0.5128,0.386-0.9355,0.8834-0.9933L53,38H55z%20M48,31c0-0.5523-0.4477-1-1-1h-2l-0.1166,0.0067%20C44.386,30.0645,44,30.4872,44,31c0,0.5523,0.4477,1,1,1h2l0.1166-0.0067C47.614,31.9355,48,31.5128,48,31z'/%3e%3c/symbol%3e%3csymbol%20id='artwork-major'%3e%3cpath%20d='M59.90668,47.08899c-2.4024,7.6662-9.49188,12.91333-17.52948,12.91333%20c-10.14819,0-18.37512-8.26733-18.37512-18.46643c0-7.85461,4.93793-14.82916,12.2738-17.42346%20c1.87921-0.66461,3.32355,1.68457,1.9613,3.1073c-2.30841,2.41095-3.5921,5.59399-3.5921,8.95575%20c0,6.76794,5.2041,12.37939,11.8927,12.89435c0.5506,0.04236,0.96271,0.52319,0.92035,1.07379%20c-0.04242,0.55066-0.52325,0.96271-1.07385,0.92029c-7.72986-0.59503-13.7392-7.07483-13.7392-14.88843%20c0-3.61078,1.28583-7.04816,3.61322-9.75067l0.22668-0.25684L36.2854,26.2464c-6.06519,2.4425-10.13849,8.30981-10.2796,14.9339%20l-0.00372,0.35559c0,9.09668,7.33374,16.46643,16.37512,16.46643c6.92578,0,13.0639-4.375,15.39703-10.84619l0.06879-0.19916%20l-0.19684,0.18811c-1.96747,1.82373-4.37738,3.07861-6.99451,3.63629l-0.39404,0.07843%20c-0.54303,0.1004-1.0647-0.25842-1.1651-0.80151c-0.10052-0.54309,0.25836-1.0647,0.80145-1.16516%20c2.62329-0.48511,5.02313-1.77515,6.89282-3.70404C58.17792,43.75378,60.4975,45.2038,59.90668,47.08899z%20M15,58%20c-0.55231,0-1,0.44769-1,1s0.44769,1,1,1s1-0.44769,1-1S15.55231,58,15,58z%20M55,28h2l0.11658-0.00671%20C57.61401,27.93549,58,27.51282,58,27c0-0.55231-0.44769-1-1-1h-2l-0.11658,0.00671C54.38599,26.06451,54,26.48718,54,27%20C54,27.55231,54.44769,28,55,28z%20M23,58h-4l-0.11658,0.00671C18.38599,58.06451,18,58.48718,18,59c0,0.55231,0.44769,1,1,1h4%20l0.11658-0.00671C23.61401,59.93549,24,59.51282,24,59C24,58.44769,23.55231,58,23,58z'/%3e%3c/symbol%3e%3cuse%20class='fr-artwork-decorative'%20href='%23artwork-decorative'/%3e%3cuse%20class='fr-artwork-minor'%20href='%23artwork-minor'/%3e%3cuse%20class='fr-artwork-major'%20href='%23artwork-major'/%3e%3c/svg%3e",LogoSystem="/cartes.gouv.fr-entree-carto/assets/system-DTLRiYhn.svg",title$1="Paramètres d'affichage",size="md",legend="Choisissez un thème pour personnaliser l'apparence du site.",_sfc_main$Q={__name:"ModalTheme",setup(Oe,{expose:e}){const t=useEulerian(),{setScheme:ke,theme:Ge,scheme:Be}=Hc(),je=ref(Be.value);watch(Be,()=>{je.value=Be.value});const Ve=[{label:"Thème clair",value:"light",id:"fr-radios-theme-light",name:"fr-radios-theme",img:LogoSun},{label:"Thème sombre",id:"fr-radios-theme-dark",value:"dark",name:"fr-radios-theme",img:LogoMoon},{label:"Système",id:"fr-radios-theme-system",value:"system",name:"fr-radios-theme",hint:"Utilise les paramètres sytème.",img:LogoSystem}],Ze=()=>{ke(je.value)},Qe=ref(!1),en=()=>{Qe.value=!0,t.pause()},tn=()=>{Qe.value=!1,t.resume()};return e({openModalTheme:en,onModalThemeClose:tn}),(an,cn)=>{const un=Po,dn=$s;return openBlock(),createBlock(dn,{ref:"modal",opened:unref(Qe),title:title$1,size,onClose:tn},{default:withCtx(()=>[createVNode(un,{modelValue:unref(je),"onUpdate:modelValue":[cn[0]||(cn[0]=fn=>isRef(je)?je.value=fn:null),Ze],legend,name:"fr-radios-theme",options:Ve},null,8,["modelValue"])]),_:1},8,["opened"])}}},{setScheme,theme,scheme}=Hc(),NAMESPACE$1="cartes.gouv.fr",ns$1=Oe=>NAMESPACE$1+"."+Oe,VERSION="5",SCHEME_KEY_LS_MAIN="scheme",SCHEME_KEY_LS_CARTES="vue-dsfr-scheme",useAppStore=defineStore("app",()=>{var Oe=useStorage(ns$1("version"),VERSION);Oe.value!==VERSION&&(localStorage.clear(),localStorage.setItem(ns$1("version"),VERSION),Oe.value=VERSION),watch(Oe,()=>{localStorage.setItem(ns$1("version"),Oe.value)});var e=useStorage(SCHEME_KEY_LS_MAIN);e.value&&(localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)),watch(e,()=>{localStorage.setItem(SCHEME_KEY_LS_CARTES,e.value),setScheme(e.value)}),watch(scheme,()=>{localStorage.setItem(SCHEME_KEY_LS_MAIN,scheme.value)})}),_hoisted_1$e={class:"fr-container fr-container--fluid fr-container-md"},_sfc_main$P=defineComponent({__name:"Main",setup(Oe){useAppStore(),dist.useLogger(),useMatchMedia("LG");const e=useHeaderParams(),t=useFooterParams(),ke=ref(null),Ge=computed(()=>[{label:"Paramètres d’affichage",button:!0,class:"fr-icon-theme-fill fr-link--icon-left fr-px-2v",to:"/settings",onclick:ke.value?ke.value.openModalTheme:null}]),Be=ref(null),je=computed(()=>t.mandatoryLinks.map(un=>(un.label==="Gestion des cookies"&&(delete un.href,un.onclick=Be.value?Be.value.openModalConsent:null,un.to="/"),un)));var Ve=inject("services"),Ze=ref(""),Qe=ref(!0),en=()=>{Qe.value=!0};Ve.isAccessValided().then(un=>{un==="login"&&Ve.getAccessToken().then(dn=>{dn&&Ve.getUserMe().then(fn=>{var pn=fn.last_name,gn=fn.first_name;e.value.quickLinks.forEach(yn=>{yn.label==="..."&&(yn.label=`${gn} ${pn}`)})}).catch(fn=>{console.error(fn),Ze.value="Error to get user info : "+fn.message,Qe.value=!1})}).catch(dn=>{console.error(dn),Ze.value="Error to get token : "+dn.message,Qe.value=!1})}).catch(un=>{console.error(un),Ze.value="Error during authentication : "+un.message,Qe.value=!1});const tn=computed(()=>e.value.quickLinks.filter(un=>{if(Ve.authenticated&&un.label==="...")if(Object.keys(Ve.user).length){var dn=Ve.user.last_name,fn=Ve.user.first_name;un.label=`${fn} ${dn}`}else return!1;if(!Object.keys(un).includes("authenticated")||un.authenticated===Ve.authenticated)return!0})),an=useRoute(),cn=[{title:"Commencer avec cartes.gouv",get active(){return["Documentation","Offre","Nous rejoindre"].includes(an.name)},links:[{to:`${useBaseUrl()}/documentation`,text:"Documentation"},{to:`${useBaseUrl()}/offre`,text:"Offre"},{to:`${useBaseUrl()}/nous-rejoindre`,text:"Nous rejoindre"}]},{to:`${useBaseUrl()}/catalogue`,text:"Catalogue"},{to:"/",text:"Cartes"},{to:`${useBaseUrl()}/actualites`,text:"Actualités"},{title:"Assistance",get active(){return["Questions fréquentes","Nous écrire","Niveau de service"].includes(an.name)},links:[{to:`${useBaseUrl()}/faq`,text:"Questions fréquentes"},{to:`${useBaseUrl()}/nous-ecrire`,text:"Nous écrire"},{to:`${useBaseUrl()}/niveau-de-service`,text:"Niveau de service"}]},{to:`${useBaseUrl()}/a-propos`,text:"À propos"}];return(un,dn)=>{const fn=qs,pn=Sl,gn=ba,yn=resolveComponent("router-view"),vn=Er;return openBlock(),createElementBlock(Fragment,null,[createVNode(pn,{modelValue:unref(e).serviceTitle,"onUpdate:modelValue":dn[0]||(dn[0]=An=>unref(e).serviceTitle=An),"service-title":unref(e).serviceTitle,"show-beta":!0,"service-description":unref(e).serviceDescription,"logo-text":unref(e).logoText,"quick-links":unref(tn)},{mainnav:withCtx(()=>[createVNode(fn,{"nav-items":cn})]),_:1},8,["modelValue","service-title","service-description","logo-text","quick-links"]),createVNode(gn,{description:unref(Ze),type:"error",closed:unref(Qe),closeable:!0,onClose:dn[1]||(dn[1]=An=>unref(en)())},null,8,["description","closed"]),createBaseVNode("div",null,[createVNode(yn)]),dn[2]||(dn[2]=createBaseVNode("label",{class:"fr-footer-toggle-label fr-btn fr-btn--tertiary-no-outline",for:"fr-footer-toggle"},null,-1)),dn[3]||(dn[3]=createBaseVNode("input",{id:"fr-footer-toggle",type:"checkbox"},null,-1)),createVNode(vn,{"before-mandatory-links":unref(t).beforeMandatoryLinks,"after-mandatory-links":unref(Ge),"logo-text":unref(t).logoText,"desc-text":unref(t).descText,"home-link":unref(t).homeLink,partners:unref(t).partners,"licence-text":unref(t).licenceText,"licence-to":unref(t).licenceTo,"licence-name":unref(t).licenceName,"licence-link-props":unref(t).licenceLinkProps,"ecosystem-links":unref(t).ecosystemLinks,"mandatory-links":unref(je)},null,8,["before-mandatory-links","after-mandatory-links","logo-text","desc-text","home-link","partners","licence-text","licence-to","licence-name","licence-link-props","ecosystem-links","mandatory-links"]),createBaseVNode("div",_hoisted_1$e,[createVNode(_sfc_main$Q,{ref_key:"refModalTheme",ref:ke},null,512),createVNode(_sfc_main$R,{ref_key:"refModalConsent",ref:Be},null,512)])],64)}}}),_sfc_main$O=defineComponent({__name:"App",setup(Oe){return(e,t)=>(openBlock(),createBlock(_sfc_main$P))}}),version$2="1.0.0-beta.2-340-main",Pkg$1={version:version$2};class BaseEvent{constructor(e){this.propagationStopped,this.defaultPrevented,this.type=e,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}const ObjectEventType={PROPERTYCHANGE:"propertychange"};class Disposable{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function binarySearch$1(Oe,e,t){let ke,Ge;t=t||ascending;let Be=0,je=Oe.length,Ve=!1;for(;Be<je;)ke=Be+(je-Be>>1),Ge=+t(Oe[ke],e),Ge<0?Be=ke+1:(je=ke,Ve=!Ge);return Ve?Be:~Be}function ascending(Oe,e){return Oe>e?1:Oe<e?-1:0}function descending(Oe,e){return Oe<e?1:Oe>e?-1:0}function linearFindNearest(Oe,e,t){if(Oe[0]<=e)return 0;const ke=Oe.length;if(e<=Oe[ke-1])return ke-1;if(typeof t=="function"){for(let Ge=1;Ge<ke;++Ge){const Be=Oe[Ge];if(Be===e)return Ge;if(Be<e)return t(e,Oe[Ge-1],Be)>0?Ge-1:Ge}return ke-1}if(t>0){for(let Ge=1;Ge<ke;++Ge)if(Oe[Ge]<e)return Ge-1;return ke-1}if(t<0){for(let Ge=1;Ge<ke;++Ge)if(Oe[Ge]<=e)return Ge;return ke-1}for(let Ge=1;Ge<ke;++Ge){if(Oe[Ge]==e)return Ge;if(Oe[Ge]<e)return Oe[Ge-1]-e<e-Oe[Ge]?Ge-1:Ge}return ke-1}function reverseSubArray(Oe,e,t){for(;e<t;){const ke=Oe[e];Oe[e]=Oe[t],Oe[t]=ke,++e,--t}}function extend$4(Oe,e){const t=Array.isArray(e)?e:[e],ke=t.length;for(let Ge=0;Ge<ke;Ge++)Oe[Oe.length]=t[Ge]}function equals$2(Oe,e){const t=Oe.length;if(t!==e.length)return!1;for(let ke=0;ke<t;ke++)if(Oe[ke]!==e[ke])return!1;return!0}function isSorted(Oe,e,t){const ke=e||ascending;return Oe.every(function(Ge,Be){if(Be===0)return!0;const je=ke(Oe[Be-1],Ge);return!(je>0||je===0)})}function TRUE(){return!0}function FALSE(){return!1}function VOID(){}function memoizeOne(Oe){let e,t,ke;return function(){const Ge=Array.prototype.slice.call(arguments);return(!t||this!==ke||!equals$2(Ge,t))&&(ke=this,t=Ge,e=Oe.apply(this,arguments)),e}}function toPromise(Oe){function e(){let t;try{t=Oe()}catch(ke){return Promise.reject(ke)}return t instanceof Promise?t:Promise.resolve(t)}return e()}function clear$1(Oe){for(const e in Oe)delete Oe[e]}function isEmpty$1(Oe){let e;for(e in Oe)return!1;return!e}class Target extends Disposable{constructor(e){super(),this.eventTarget_=e,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(e,t){if(!e||!t)return;const ke=this.listeners_||(this.listeners_={}),Ge=ke[e]||(ke[e]=[]);Ge.includes(t)||Ge.push(t)}dispatchEvent(e){const t=typeof e=="string",ke=t?e:e.type,Ge=this.listeners_&&this.listeners_[ke];if(!Ge)return;const Be=t?new BaseEvent(e):e;Be.target||(Be.target=this.eventTarget_||this);const je=this.dispatching_||(this.dispatching_={}),Ve=this.pendingRemovals_||(this.pendingRemovals_={});ke in je||(je[ke]=0,Ve[ke]=0),++je[ke];let Ze;for(let Qe=0,en=Ge.length;Qe<en;++Qe)if("handleEvent"in Ge[Qe]?Ze=Ge[Qe].handleEvent(Be):Ze=Ge[Qe].call(this,Be),Ze===!1||Be.propagationStopped){Ze=!1;break}if(--je[ke]===0){let Qe=Ve[ke];for(delete Ve[ke];Qe--;)this.removeEventListener(ke,VOID);delete je[ke]}return Ze}disposeInternal(){this.listeners_&&clear$1(this.listeners_)}getListeners(e){return this.listeners_&&this.listeners_[e]||void 0}hasListener(e){return this.listeners_?e?e in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(e,t){if(!this.listeners_)return;const ke=this.listeners_[e];if(!ke)return;const Ge=ke.indexOf(t);Ge!==-1&&(this.pendingRemovals_&&e in this.pendingRemovals_?(ke[Ge]=VOID,++this.pendingRemovals_[e]):(ke.splice(Ge,1),ke.length===0&&delete this.listeners_[e]))}}const EventType={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function listen(Oe,e,t,ke,Ge){if(Ge){const je=t;t=function(){Oe.removeEventListener(e,t),je.apply(ke??this,arguments)}}else ke&&ke!==Oe&&(t=t.bind(ke));const Be={target:Oe,type:e,listener:t};return Oe.addEventListener(e,t),Be}function listenOnce(Oe,e,t,ke){return listen(Oe,e,t,ke,!0)}function unlistenByKey(Oe){Oe&&Oe.target&&(Oe.target.removeEventListener(Oe.type,Oe.listener),clear$1(Oe))}class Observable extends Target{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(EventType.CHANGE)}getRevision(){return this.revision_}onInternal(e,t){if(Array.isArray(e)){const ke=e.length,Ge=new Array(ke);for(let Be=0;Be<ke;++Be)Ge[Be]=listen(this,e[Be],t);return Ge}return listen(this,e,t)}onceInternal(e,t){let ke;if(Array.isArray(e)){const Ge=e.length;ke=new Array(Ge);for(let Be=0;Be<Ge;++Be)ke[Be]=listenOnce(this,e[Be],t)}else ke=listenOnce(this,e,t);return t.ol_key=ke,ke}unInternal(e,t){const ke=t.ol_key;if(ke)unByKey(ke);else if(Array.isArray(e))for(let Ge=0,Be=e.length;Ge<Be;++Ge)this.removeEventListener(e[Ge],t);else this.removeEventListener(e,t)}}Observable.prototype.on;Observable.prototype.once;Observable.prototype.un;function unByKey(Oe){if(Array.isArray(Oe))for(let e=0,t=Oe.length;e<t;++e)unlistenByKey(Oe[e]);else unlistenByKey(Oe)}function abstract(){throw new Error("Unimplemented abstract method.")}let uidCounter_=0;function getUid(Oe){return Oe.ol_uid||(Oe.ol_uid=String(++uidCounter_))}class ObjectEvent extends BaseEvent{constructor(e,t,ke){super(e),this.key=t,this.oldValue=ke}}class BaseObject extends Observable{constructor(e){super(),this.on,this.once,this.un,getUid(this),this.values_=null,e!==void 0&&this.setProperties(e)}get(e){let t;return this.values_&&this.values_.hasOwnProperty(e)&&(t=this.values_[e]),t}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(e,t){let ke;ke=`change:${e}`,this.hasListener(ke)&&this.dispatchEvent(new ObjectEvent(ke,e,t)),ke=ObjectEventType.PROPERTYCHANGE,this.hasListener(ke)&&this.dispatchEvent(new ObjectEvent(ke,e,t))}addChangeListener(e,t){this.addEventListener(`change:${e}`,t)}removeChangeListener(e,t){this.removeEventListener(`change:${e}`,t)}set(e,t,ke){const Ge=this.values_||(this.values_={});if(ke)Ge[e]=t;else{const Be=Ge[e];Ge[e]=t,Be!==t&&this.notify(e,Be)}}setProperties(e,t){for(const ke in e)this.set(ke,e[ke],t)}applyProperties(e){e.values_&&Object.assign(this.values_||(this.values_={}),e.values_)}unset(e,t){if(this.values_&&e in this.values_){const ke=this.values_[e];delete this.values_[e],isEmpty$1(this.values_)&&(this.values_=null),t||this.notify(e,ke)}}}const MapEventType={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},CLASS_HIDDEN="ol-hidden",CLASS_SELECTABLE="ol-selectable",CLASS_UNSELECTABLE="ol-unselectable",CLASS_UNSUPPORTED="ol-unsupported",CLASS_CONTROL="ol-control",CLASS_COLLAPSED="ol-collapsed",fontRegEx=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z]+?)\\s*$`].join(""),"i"),fontRegExMatchIndex=["style","variant","weight","size","lineHeight","family"],getFontParameters=function(Oe){const e=Oe.match(fontRegEx);if(!e)return null;const t={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let ke=0,Ge=fontRegExMatchIndex.length;ke<Ge;++ke){const Be=e[ke+1];Be!==void 0&&(t[fontRegExMatchIndex[ke]]=Be)}return t.families=t.family.split(/,\s?/),t},Relationship={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function boundingExtent(Oe){const e=createEmpty();for(let t=0,ke=Oe.length;t<ke;++t)extendCoordinate(e,Oe[t]);return e}function _boundingExtentXYs(Oe,e,t){const ke=Math.min.apply(null,Oe),Ge=Math.min.apply(null,e),Be=Math.max.apply(null,Oe),je=Math.max.apply(null,e);return createOrUpdate$2(ke,Ge,Be,je,t)}function buffer(Oe,e,t){return t?(t[0]=Oe[0]-e,t[1]=Oe[1]-e,t[2]=Oe[2]+e,t[3]=Oe[3]+e,t):[Oe[0]-e,Oe[1]-e,Oe[2]+e,Oe[3]+e]}function clone$1(Oe,e){return e?(e[0]=Oe[0],e[1]=Oe[1],e[2]=Oe[2],e[3]=Oe[3],e):Oe.slice()}function closestSquaredDistanceXY(Oe,e,t){let ke,Ge;return e<Oe[0]?ke=Oe[0]-e:Oe[2]<e?ke=e-Oe[2]:ke=0,t<Oe[1]?Ge=Oe[1]-t:Oe[3]<t?Ge=t-Oe[3]:Ge=0,ke*ke+Ge*Ge}function containsCoordinate(Oe,e){return containsXY(Oe,e[0],e[1])}function containsExtent(Oe,e){return Oe[0]<=e[0]&&e[2]<=Oe[2]&&Oe[1]<=e[1]&&e[3]<=Oe[3]}function containsXY(Oe,e,t){return Oe[0]<=e&&e<=Oe[2]&&Oe[1]<=t&&t<=Oe[3]}function coordinateRelationship(Oe,e){const t=Oe[0],ke=Oe[1],Ge=Oe[2],Be=Oe[3],je=e[0],Ve=e[1];let Ze=Relationship.UNKNOWN;return je<t?Ze=Ze|Relationship.LEFT:je>Ge&&(Ze=Ze|Relationship.RIGHT),Ve<ke?Ze=Ze|Relationship.BELOW:Ve>Be&&(Ze=Ze|Relationship.ABOVE),Ze===Relationship.UNKNOWN&&(Ze=Relationship.INTERSECTING),Ze}function createEmpty(){return[1/0,1/0,-1/0,-1/0]}function createOrUpdate$2(Oe,e,t,ke,Ge){return Ge?(Ge[0]=Oe,Ge[1]=e,Ge[2]=t,Ge[3]=ke,Ge):[Oe,e,t,ke]}function createOrUpdateEmpty(Oe){return createOrUpdate$2(1/0,1/0,-1/0,-1/0,Oe)}function createOrUpdateFromCoordinate(Oe,e){const t=Oe[0],ke=Oe[1];return createOrUpdate$2(t,ke,t,ke,e)}function createOrUpdateFromFlatCoordinates(Oe,e,t,ke,Ge){const Be=createOrUpdateEmpty(Ge);return extendFlatCoordinates(Be,Oe,e,t,ke)}function equals$1(Oe,e){return Oe[0]==e[0]&&Oe[2]==e[2]&&Oe[1]==e[1]&&Oe[3]==e[3]}function extend$3(Oe,e){return e[0]<Oe[0]&&(Oe[0]=e[0]),e[2]>Oe[2]&&(Oe[2]=e[2]),e[1]<Oe[1]&&(Oe[1]=e[1]),e[3]>Oe[3]&&(Oe[3]=e[3]),Oe}function extendCoordinate(Oe,e){e[0]<Oe[0]&&(Oe[0]=e[0]),e[0]>Oe[2]&&(Oe[2]=e[0]),e[1]<Oe[1]&&(Oe[1]=e[1]),e[1]>Oe[3]&&(Oe[3]=e[1])}function extendFlatCoordinates(Oe,e,t,ke,Ge){for(;t<ke;t+=Ge)extendXY(Oe,e[t],e[t+1]);return Oe}function extendXY(Oe,e,t){Oe[0]=Math.min(Oe[0],e),Oe[1]=Math.min(Oe[1],t),Oe[2]=Math.max(Oe[2],e),Oe[3]=Math.max(Oe[3],t)}function forEachCorner(Oe,e){let t;return t=e(getBottomLeft(Oe)),t||(t=e(getBottomRight(Oe)),t)||(t=e(getTopRight(Oe)),t)||(t=e(getTopLeft(Oe)),t)?t:!1}function getArea$1(Oe){let e=0;return isEmpty(Oe)||(e=getWidth(Oe)*getHeight(Oe)),e}function getBottomLeft(Oe){return[Oe[0],Oe[1]]}function getBottomRight(Oe){return[Oe[2],Oe[1]]}function getCenter(Oe){return[(Oe[0]+Oe[2])/2,(Oe[1]+Oe[3])/2]}function getCorner(Oe,e){let t;if(e==="bottom-left")t=getBottomLeft(Oe);else if(e==="bottom-right")t=getBottomRight(Oe);else if(e==="top-left")t=getTopLeft(Oe);else if(e==="top-right")t=getTopRight(Oe);else throw new Error("Invalid corner");return t}function getForViewAndSize(Oe,e,t,ke,Ge){const[Be,je,Ve,Ze,Qe,en,tn,an]=getRotatedViewport(Oe,e,t,ke);return createOrUpdate$2(Math.min(Be,Ve,Qe,tn),Math.min(je,Ze,en,an),Math.max(Be,Ve,Qe,tn),Math.max(je,Ze,en,an),Ge)}function getRotatedViewport(Oe,e,t,ke){const Ge=e*ke[0]/2,Be=e*ke[1]/2,je=Math.cos(t),Ve=Math.sin(t),Ze=Ge*je,Qe=Ge*Ve,en=Be*je,tn=Be*Ve,an=Oe[0],cn=Oe[1];return[an-Ze+tn,cn-Qe-en,an-Ze-tn,cn-Qe+en,an+Ze-tn,cn+Qe+en,an+Ze+tn,cn+Qe-en,an-Ze+tn,cn-Qe-en]}function getHeight(Oe){return Oe[3]-Oe[1]}function getIntersection(Oe,e,t){const ke=t||createEmpty();return intersects$1(Oe,e)?(Oe[0]>e[0]?ke[0]=Oe[0]:ke[0]=e[0],Oe[1]>e[1]?ke[1]=Oe[1]:ke[1]=e[1],Oe[2]<e[2]?ke[2]=Oe[2]:ke[2]=e[2],Oe[3]<e[3]?ke[3]=Oe[3]:ke[3]=e[3]):createOrUpdateEmpty(ke),ke}function getTopLeft(Oe){return[Oe[0],Oe[3]]}function getTopRight(Oe){return[Oe[2],Oe[3]]}function getWidth(Oe){return Oe[2]-Oe[0]}function intersects$1(Oe,e){return Oe[0]<=e[2]&&Oe[2]>=e[0]&&Oe[1]<=e[3]&&Oe[3]>=e[1]}function isEmpty(Oe){return Oe[2]<Oe[0]||Oe[3]<Oe[1]}function returnOrUpdate(Oe,e){return e?(e[0]=Oe[0],e[1]=Oe[1],e[2]=Oe[2],e[3]=Oe[3],e):Oe}function scaleFromCenter(Oe,e){const t=(Oe[2]-Oe[0])/2*(e-1),ke=(Oe[3]-Oe[1])/2*(e-1);Oe[0]-=t,Oe[2]+=t,Oe[1]-=ke,Oe[3]+=ke}function intersectsSegment(Oe,e,t){let ke=!1;const Ge=coordinateRelationship(Oe,e),Be=coordinateRelationship(Oe,t);if(Ge===Relationship.INTERSECTING||Be===Relationship.INTERSECTING)ke=!0;else{const je=Oe[0],Ve=Oe[1],Ze=Oe[2],Qe=Oe[3],en=e[0],tn=e[1],an=t[0],cn=t[1],un=(cn-tn)/(an-en);let dn,fn;Be&Relationship.ABOVE&&!(Ge&Relationship.ABOVE)&&(dn=an-(cn-Qe)/un,ke=dn>=je&&dn<=Ze),!ke&&Be&Relationship.RIGHT&&!(Ge&Relationship.RIGHT)&&(fn=cn-(an-Ze)*un,ke=fn>=Ve&&fn<=Qe),!ke&&Be&Relationship.BELOW&&!(Ge&Relationship.BELOW)&&(dn=an-(cn-Ve)/un,ke=dn>=je&&dn<=Ze),!ke&&Be&Relationship.LEFT&&!(Ge&Relationship.LEFT)&&(fn=cn-(an-je)*un,ke=fn>=Ve&&fn<=Qe)}return ke}function applyTransform(Oe,e,t,ke){if(isEmpty(Oe))return createOrUpdateEmpty(t);let Ge=[];Ge=[Oe[0],Oe[1],Oe[2],Oe[1],Oe[2],Oe[3],Oe[0],Oe[3]],e(Ge,Ge,2);const Be=[],je=[];for(let Ve=0,Ze=Ge.length;Ve<Ze;Ve+=2)Be.push(Ge[Ve]),je.push(Ge[Ve+1]);return _boundingExtentXYs(Be,je,t)}function wrapX$2(Oe,e){const t=e.getExtent(),ke=getCenter(Oe);if(e.canWrapX()&&(ke[0]<t[0]||ke[0]>=t[2])){const Ge=getWidth(t),je=Math.floor((ke[0]-t[0])/Ge)*Ge;Oe[0]-=je,Oe[2]-=je}return Oe}function wrapAndSliceX(Oe,e,t){if(e.canWrapX()){const ke=e.getExtent();if(!isFinite(Oe[0])||!isFinite(Oe[2]))return[[ke[0],Oe[1],ke[2],Oe[3]]];wrapX$2(Oe,e);const Ge=getWidth(ke);if(getWidth(Oe)>Ge&&!t)return[[ke[0],Oe[1],ke[2],Oe[3]]];if(Oe[0]<ke[0])return[[Oe[0]+Ge,Oe[1],ke[2],Oe[3]],[ke[0],Oe[1],Oe[2],Oe[3]]];if(Oe[2]>ke[2])return[[Oe[0],Oe[1],ke[2],Oe[3]],[ke[0],Oe[1],Oe[2]-Ge,Oe[3]]]}return[Oe]}const ua=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",FIREFOX=ua.includes("firefox"),SAFARI=ua.includes("safari")&&!ua.includes("chrom");SAFARI&&(ua.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(ua));const WEBKIT=ua.includes("webkit")&&!ua.includes("edge"),MAC=ua.includes("macintosh"),DEVICE_PIXEL_RATIO=typeof devicePixelRatio<"u"?devicePixelRatio:1,WORKER_OFFSCREEN_CANVAS=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,IMAGE_DECODE=typeof Image<"u"&&Image.prototype.decode,CREATE_IMAGE_BITMAP=typeof createImageBitmap=="function",PASSIVE_EVENT_LISTENERS=function(){let Oe=!1;try{const e=Object.defineProperty({},"passive",{get:function(){Oe=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return Oe}();function createCanvasContext2D(Oe,e,t,ke){let Ge;return t&&t.length?Ge=t.shift():WORKER_OFFSCREEN_CANVAS?Ge=new OffscreenCanvas(Oe||300,e||300):Ge=document.createElement("canvas"),Oe&&(Ge.width=Oe),e&&(Ge.height=e),Ge.getContext("2d",ke)}let sharedCanvasContext;function getSharedCanvasContext2D(){return sharedCanvasContext||(sharedCanvasContext=createCanvasContext2D(1,1)),sharedCanvasContext}function releaseCanvas(Oe){const e=Oe.canvas;e.width=1,e.height=1,Oe.clearRect(0,0,1,1)}function outerWidth(Oe){let e=Oe.offsetWidth;const t=getComputedStyle(Oe);return e+=parseInt(t.marginLeft,10)+parseInt(t.marginRight,10),e}function outerHeight(Oe){let e=Oe.offsetHeight;const t=getComputedStyle(Oe);return e+=parseInt(t.marginTop,10)+parseInt(t.marginBottom,10),e}function replaceNode(Oe,e){const t=e.parentNode;t&&t.replaceChild(Oe,e)}function removeChildren(Oe){for(;Oe.lastChild;)Oe.lastChild.remove()}function replaceChildren(Oe,e){const t=Oe.childNodes;for(let ke=0;;++ke){const Ge=t[ke],Be=e[ke];if(!Ge&&!Be)break;if(Ge!==Be){if(!Ge){Oe.appendChild(Be);continue}if(!Be){Oe.removeChild(Ge),--ke;continue}Oe.insertBefore(Be,Ge)}}}const Property$3={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class Overlay extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.options=e,this.id=e.id,this.insertFirst=e.insertFirst!==void 0?e.insertFirst:!0,this.stopEvent=e.stopEvent!==void 0?e.stopEvent:!0,this.element=document.createElement("div"),this.element.className=e.className!==void 0?e.className:"ol-overlay-container "+CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=e.autoPan===!0?{}:e.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Property$3.ELEMENT,this.handleElementChanged),this.addChangeListener(Property$3.MAP,this.handleMapChanged),this.addChangeListener(Property$3.OFFSET,this.handleOffsetChanged),this.addChangeListener(Property$3.POSITION,this.handlePositionChanged),this.addChangeListener(Property$3.POSITIONING,this.handlePositioningChanged),e.element!==void 0&&this.setElement(e.element),this.setOffset(e.offset!==void 0?e.offset:[0,0]),this.setPositioning(e.positioning||"top-left"),e.position!==void 0&&this.setPosition(e.position)}getElement(){return this.get(Property$3.ELEMENT)}getId(){return this.id}getMap(){return this.get(Property$3.MAP)||null}getOffset(){return this.get(Property$3.OFFSET)}getPosition(){return this.get(Property$3.POSITION)}getPositioning(){return this.get(Property$3.POSITIONING)}handleElementChanged(){removeChildren(this.element);const e=this.getElement();e&&this.element.appendChild(e)}handleMapChanged(){var t;this.mapPostrenderListenerKey&&((t=this.element)==null||t.remove(),unlistenByKey(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const e=this.getMap();if(e){this.mapPostrenderListenerKey=listen(e,MapEventType.POSTRENDER,this.render,this),this.updatePixelPosition();const ke=this.stopEvent?e.getOverlayContainerStopEvent():e.getOverlayContainer();this.insertFirst?ke.insertBefore(this.element,ke.childNodes[0]||null):ke.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(e){this.set(Property$3.ELEMENT,e)}setMap(e){this.set(Property$3.MAP,e)}setOffset(e){this.set(Property$3.OFFSET,e)}setPosition(e){this.set(Property$3.POSITION,e)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(e){const t=this.getMap();if(!t||!t.getTargetElement()||!this.get(Property$3.POSITION))return;const ke=this.getRect(t.getTargetElement(),t.getSize()),Ge=this.getElement(),Be=this.getRect(Ge,[outerWidth(Ge),outerHeight(Ge)]);e=e||{};const je=e.margin===void 0?20:e.margin;if(!containsExtent(ke,Be)){const Ve=Be[0]-ke[0],Ze=ke[2]-Be[2],Qe=Be[1]-ke[1],en=ke[3]-Be[3],tn=[0,0];if(Ve<0?tn[0]=Ve-je:Ze<0&&(tn[0]=Math.abs(Ze)+je),Qe<0?tn[1]=Qe-je:en<0&&(tn[1]=Math.abs(en)+je),tn[0]!==0||tn[1]!==0){const an=t.getView().getCenterInternal(),cn=t.getPixelFromCoordinateInternal(an);if(!cn)return;const un=[cn[0]+tn[0],cn[1]+tn[1]],dn=e.animation||{};t.getView().animateInternal({center:t.getCoordinateFromPixelInternal(un),duration:dn.duration,easing:dn.easing})}}}getRect(e,t){const ke=e.getBoundingClientRect(),Ge=ke.left+window.pageXOffset,Be=ke.top+window.pageYOffset;return[Ge,Be,Ge+t[0],Be+t[1]]}setPositioning(e){this.set(Property$3.POSITIONING,e)}setVisible(e){this.rendered.visible!==e&&(this.element.style.display=e?"":"none",this.rendered.visible=e)}updatePixelPosition(){const e=this.getMap(),t=this.getPosition();if(!e||!e.isRendered()||!t){this.setVisible(!1);return}const ke=e.getPixelFromCoordinate(t),Ge=e.getSize();this.updateRenderedPosition(ke,Ge)}updateRenderedPosition(e,t){const ke=this.element.style,Ge=this.getOffset(),Be=this.getPositioning();this.setVisible(!0);const je=Math.round(e[0]+Ge[0])+"px",Ve=Math.round(e[1]+Ge[1])+"px";let Ze="0%",Qe="0%";Be=="bottom-right"||Be=="center-right"||Be=="top-right"?Ze="-100%":(Be=="bottom-center"||Be=="center-center"||Be=="top-center")&&(Ze="-50%"),Be=="bottom-left"||Be=="bottom-center"||Be=="bottom-right"?Qe="-100%":(Be=="center-left"||Be=="center-center"||Be=="center-right")&&(Qe="-50%");const en=`translate(${Ze}, ${Qe}) translate(${je}, ${Ve})`;this.rendered.transform_!=en&&(this.rendered.transform_=en,ke.transform=en)}getOptions(){return this.options}}const TileState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function easeIn(Oe){return Math.pow(Oe,3)}function easeOut(Oe){return 1-easeIn(1-Oe)}function inAndOut(Oe){return 3*Oe*Oe-2*Oe*Oe*Oe}function linear(Oe){return Oe}class Tile extends Target{constructor(e,t,ke){super(),ke=ke||{},this.tileCoord=e,this.state=t,this.key="",this.transition_=ke.transition===void 0?250:ke.transition,this.transitionStarts_={},this.interpolate=!!ke.interpolate}changed(){this.dispatchEvent(EventType.CHANGE)}release(){this.state===TileState.ERROR&&this.setState(TileState.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(e){if(this.state!==TileState.ERROR&&this.state>e)throw new Error("Tile load sequence violation");this.state=e,this.changed()}load(){abstract()}getAlpha(e,t){if(!this.transition_)return 1;let ke=this.transitionStarts_[e];if(!ke)ke=t,this.transitionStarts_[e]=ke;else if(ke===-1)return 1;const Ge=t-ke+1e3/60;return Ge>=this.transition_?1:easeIn(Ge/this.transition_)}inTransition(e){return this.transition_?this.transitionStarts_[e]!==-1:!1}endTransition(e){this.transition_&&(this.transitionStarts_[e]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}let VectorTile$1=class extends Tile{constructor(e,t,ke,Ge,Be,je){super(e,t,je),this.extent=null,this.format_=Ge,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=Be,this.url_=ke,this.key=ke}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==TileState.IDLE&&(this.setState(TileState.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(e,t){this.setFeatures(e)}onError(){this.setState(TileState.ERROR)}setFeatures(e){this.features_=e,this.setState(TileState.LOADED)}setLoader(e){this.loader_=e}};class TileRange{constructor(e,t,ke,Ge){this.minX=e,this.maxX=t,this.minY=ke,this.maxY=Ge}contains(e){return this.containsXY(e[1],e[2])}containsTileRange(e){return this.minX<=e.minX&&e.maxX<=this.maxX&&this.minY<=e.minY&&e.maxY<=this.maxY}containsXY(e,t){return this.minX<=e&&e<=this.maxX&&this.minY<=t&&t<=this.maxY}equals(e){return this.minX==e.minX&&this.minY==e.minY&&this.maxX==e.maxX&&this.maxY==e.maxY}extend(e){e.minX<this.minX&&(this.minX=e.minX),e.maxX>this.maxX&&(this.maxX=e.maxX),e.minY<this.minY&&(this.minY=e.minY),e.maxY>this.maxY&&(this.maxY=e.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(e){return this.minX<=e.maxX&&this.maxX>=e.minX&&this.minY<=e.maxY&&this.maxY>=e.minY}}function createOrUpdate$1(Oe,e,t,ke,Ge){return Ge!==void 0?(Ge.minX=Oe,Ge.maxX=e,Ge.minY=t,Ge.maxY=ke,Ge):new TileRange(Oe,e,t,ke)}const DEFAULT_MAX_ZOOM=42,DEFAULT_TILE_SIZE=256;function assert(Oe,e){if(!Oe)throw new Error(e)}function clamp(Oe,e,t){return Math.min(Math.max(Oe,e),t)}function squaredSegmentDistance(Oe,e,t,ke,Ge,Be){const je=Ge-t,Ve=Be-ke;if(je!==0||Ve!==0){const Ze=((Oe-t)*je+(e-ke)*Ve)/(je*je+Ve*Ve);Ze>1?(t=Ge,ke=Be):Ze>0&&(t+=je*Ze,ke+=Ve*Ze)}return squaredDistance$1(Oe,e,t,ke)}function squaredDistance$1(Oe,e,t,ke){const Ge=t-Oe,Be=ke-e;return Ge*Ge+Be*Be}function solveLinearSystem(Oe){const e=Oe.length;for(let ke=0;ke<e;ke++){let Ge=ke,Be=Math.abs(Oe[ke][ke]);for(let Ve=ke+1;Ve<e;Ve++){const Ze=Math.abs(Oe[Ve][ke]);Ze>Be&&(Be=Ze,Ge=Ve)}if(Be===0)return null;const je=Oe[Ge];Oe[Ge]=Oe[ke],Oe[ke]=je;for(let Ve=ke+1;Ve<e;Ve++){const Ze=-Oe[Ve][ke]/Oe[ke][ke];for(let Qe=ke;Qe<e+1;Qe++)ke==Qe?Oe[Ve][Qe]=0:Oe[Ve][Qe]+=Ze*Oe[ke][Qe]}}const t=new Array(e);for(let ke=e-1;ke>=0;ke--){t[ke]=Oe[ke][e]/Oe[ke][ke];for(let Ge=ke-1;Ge>=0;Ge--)Oe[Ge][e]-=Oe[Ge][ke]*t[ke]}return t}function toDegrees(Oe){return Oe*180/Math.PI}function toRadians(Oe){return Oe*Math.PI/180}function modulo(Oe,e){const t=Oe%e;return t*e<0?t+e:t}function lerp(Oe,e,t){return Oe+t*(e-Oe)}function toFixed(Oe,e){const t=Math.pow(10,e);return Math.round(Oe*t)/t}function round(Oe,e){return Math.round(toFixed(Oe,e))}function floor(Oe,e){return Math.floor(toFixed(Oe,e))}function ceil(Oe,e){return Math.ceil(toFixed(Oe,e))}function wrap(Oe,e,t){if(Oe>=e&&Oe<t)return Oe;const ke=t-e;return((Oe-e)%ke+ke)%ke+e}function createOrUpdate(Oe,e,t,ke){return ke!==void 0?(ke[0]=Oe,ke[1]=e,ke[2]=t,ke):[Oe,e,t]}function getKeyZXY(Oe,e,t){return Oe+"/"+e+"/"+t}function hash(Oe){return hashZXY(Oe[0],Oe[1],Oe[2])}function hashZXY(Oe,e,t){return(e<<Oe)+t}function withinExtentAndZ(Oe,e){const t=Oe[0],ke=Oe[1],Ge=Oe[2];if(e.getMinZoom()>t||t>e.getMaxZoom())return!1;const Be=e.getFullTileRange(t);return Be?Be.containsXY(ke,Ge):!0}function forEach(Oe,e,t,ke,Ge){let Be;for(e+=ke;e<t;e+=ke)if(Be=Ge(Oe.slice(e-ke,e),Oe.slice(e,e+ke)),Be)return Be;return!1}function linearRingContainsExtent(Oe,e,t,ke,Ge){return!forEachCorner(Ge,function(je){return!linearRingContainsXY(Oe,e,t,ke,je[0],je[1])})}function linearRingContainsXY(Oe,e,t,ke,Ge,Be){let je=0,Ve=Oe[t-ke],Ze=Oe[t-ke+1];for(;e<t;e+=ke){const Qe=Oe[e],en=Oe[e+1];Ze<=Be?en>Be&&(Qe-Ve)*(Be-Ze)-(Ge-Ve)*(en-Ze)>0&&je++:en<=Be&&(Qe-Ve)*(Be-Ze)-(Ge-Ve)*(en-Ze)<0&&je--,Ve=Qe,Ze=en}return je!==0}function linearRingsContainsXY(Oe,e,t,ke,Ge,Be){if(t.length===0||!linearRingContainsXY(Oe,e,t[0],ke,Ge,Be))return!1;for(let je=1,Ve=t.length;je<Ve;++je)if(linearRingContainsXY(Oe,t[je-1],t[je],ke,Ge,Be))return!1;return!0}function linearRingssContainsXY(Oe,e,t,ke,Ge,Be){if(t.length===0)return!1;for(let je=0,Ve=t.length;je<Ve;++je){const Ze=t[je];if(linearRingsContainsXY(Oe,e,Ze,ke,Ge,Be))return!0;e=Ze[Ze.length-1]}return!1}function intersectsLineString(Oe,e,t,ke,Ge){const Be=extendFlatCoordinates(createEmpty(),Oe,e,t,ke);return intersects$1(Ge,Be)?containsExtent(Ge,Be)||Be[0]>=Ge[0]&&Be[2]<=Ge[2]||Be[1]>=Ge[1]&&Be[3]<=Ge[3]?!0:forEach(Oe,e,t,ke,function(je,Ve){return intersectsSegment(Ge,je,Ve)}):!1}function intersectsLineStringArray(Oe,e,t,ke,Ge){for(let Be=0,je=t.length;Be<je;++Be){if(intersectsLineString(Oe,e,t[Be],ke,Ge))return!0;e=t[Be]}return!1}function intersectsLinearRing(Oe,e,t,ke,Ge){return!!(intersectsLineString(Oe,e,t,ke,Ge)||linearRingContainsXY(Oe,e,t,ke,Ge[0],Ge[1])||linearRingContainsXY(Oe,e,t,ke,Ge[0],Ge[3])||linearRingContainsXY(Oe,e,t,ke,Ge[2],Ge[1])||linearRingContainsXY(Oe,e,t,ke,Ge[2],Ge[3]))}function intersectsLinearRingArray(Oe,e,t,ke,Ge){if(!intersectsLinearRing(Oe,e,t[0],ke,Ge))return!1;if(t.length===1)return!0;for(let Be=1,je=t.length;Be<je;++Be)if(linearRingContainsExtent(Oe,t[Be-1],t[Be],ke,Ge)&&!intersectsLineString(Oe,t[Be-1],t[Be],ke,Ge))return!1;return!0}function intersectsLinearRingMultiArray(Oe,e,t,ke,Ge){for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];if(intersectsLinearRingArray(Oe,e,Ve,ke,Ge))return!0;e=Ve[Ve.length-1]}return!1}function hasArea(Oe){return Oe[0]>0&&Oe[1]>0}function scale$4(Oe,e,t){return t===void 0&&(t=[0,0]),t[0]=Oe[0]*e+.5|0,t[1]=Oe[1]*e+.5|0,t}function toSize(Oe,e){return Array.isArray(Oe)?Oe:(e===void 0?e=[Oe,Oe]:(e[0]=Oe,e[1]=Oe),e)}const tmpTileCoord=[0,0,0],DECIMALS$1=5;class TileGrid{constructor(e){this.minZoom=e.minZoom!==void 0?e.minZoom:0,this.resolutions_=e.resolutions,assert(isSorted(this.resolutions_,(Ge,Be)=>Be-Ge),"`resolutions` must be sorted in descending order");let t;if(!e.origins){for(let Ge=0,Be=this.resolutions_.length-1;Ge<Be;++Ge)if(!t)t=this.resolutions_[Ge]/this.resolutions_[Ge+1];else if(this.resolutions_[Ge]/this.resolutions_[Ge+1]!==t){t=void 0;break}}this.zoomFactor_=t,this.maxZoom=this.resolutions_.length-1,this.origin_=e.origin!==void 0?e.origin:null,this.origins_=null,e.origins!==void 0&&(this.origins_=e.origins,assert(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const ke=e.extent;ke!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=getTopLeft(ke)),assert(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,e.tileSizes!==void 0&&(this.tileSizes_=e.tileSizes,assert(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=e.tileSize!==void 0?e.tileSize:this.tileSizes_?null:DEFAULT_TILE_SIZE,assert(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=ke!==void 0?ke:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],e.sizes!==void 0?this.fullTileRanges_=e.sizes.map((Ge,Be)=>{const je=new TileRange(Math.min(0,Ge[0]),Math.max(Ge[0]-1,-1),Math.min(0,Ge[1]),Math.max(Ge[1]-1,-1));if(ke){const Ve=this.getTileRangeForExtentAndZ(ke,Be);je.minX=Math.max(Ve.minX,je.minX),je.maxX=Math.min(Ve.maxX,je.maxX),je.minY=Math.max(Ve.minY,je.minY),je.maxY=Math.min(Ve.maxY,je.maxY)}return je}):ke&&this.calculateTileRanges_(ke)}forEachTileCoord(e,t,ke){const Ge=this.getTileRangeForExtentAndZ(e,t);for(let Be=Ge.minX,je=Ge.maxX;Be<=je;++Be)for(let Ve=Ge.minY,Ze=Ge.maxY;Ve<=Ze;++Ve)ke([t,Be,Ve])}forEachTileCoordParentTileRange(e,t,ke,Ge){let Be,je,Ve,Ze=null,Qe=e[0]-1;for(this.zoomFactor_===2?(je=e[1],Ve=e[2]):Ze=this.getTileCoordExtent(e,Ge);Qe>=this.minZoom;){if(je!==void 0&&Ve!==void 0?(je=Math.floor(je/2),Ve=Math.floor(Ve/2),Be=createOrUpdate$1(je,je,Ve,Ve,ke)):Be=this.getTileRangeForExtentAndZ(Ze,Qe,ke),t(Qe,Be))return!0;--Qe}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(e){return this.origin_?this.origin_:this.origins_[e]}getResolution(e){return this.resolutions_[e]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(e,t,ke){if(e[0]<this.maxZoom){if(this.zoomFactor_===2){const Be=e[1]*2,je=e[2]*2;return createOrUpdate$1(Be,Be+1,je,je+1,t)}const Ge=this.getTileCoordExtent(e,ke||this.tmpExtent_);return this.getTileRangeForExtentAndZ(Ge,e[0]+1,t)}return null}getTileRangeForTileCoordAndZ(e,t,ke){if(t>this.maxZoom||t<this.minZoom)return null;const Ge=e[0],Be=e[1],je=e[2];if(t===Ge)return createOrUpdate$1(Be,je,Be,je,ke);if(this.zoomFactor_){const Ze=Math.pow(this.zoomFactor_,t-Ge),Qe=Math.floor(Be*Ze),en=Math.floor(je*Ze);if(t<Ge)return createOrUpdate$1(Qe,Qe,en,en,ke);const tn=Math.floor(Ze*(Be+1))-1,an=Math.floor(Ze*(je+1))-1;return createOrUpdate$1(Qe,tn,en,an,ke)}const Ve=this.getTileCoordExtent(e,this.tmpExtent_);return this.getTileRangeForExtentAndZ(Ve,t,ke)}getTileRangeForExtentAndZ(e,t,ke){this.getTileCoordForXYAndZ_(e[0],e[3],t,!1,tmpTileCoord);const Ge=tmpTileCoord[1],Be=tmpTileCoord[2];this.getTileCoordForXYAndZ_(e[2],e[1],t,!0,tmpTileCoord);const je=tmpTileCoord[1],Ve=tmpTileCoord[2];return createOrUpdate$1(Ge,je,Be,Ve,ke)}getTileCoordCenter(e){const t=this.getOrigin(e[0]),ke=this.getResolution(e[0]),Ge=toSize(this.getTileSize(e[0]),this.tmpSize_);return[t[0]+(e[1]+.5)*Ge[0]*ke,t[1]-(e[2]+.5)*Ge[1]*ke]}getTileCoordExtent(e,t){const ke=this.getOrigin(e[0]),Ge=this.getResolution(e[0]),Be=toSize(this.getTileSize(e[0]),this.tmpSize_),je=ke[0]+e[1]*Be[0]*Ge,Ve=ke[1]-(e[2]+1)*Be[1]*Ge,Ze=je+Be[0]*Ge,Qe=Ve+Be[1]*Ge;return createOrUpdate$2(je,Ve,Ze,Qe,t)}getTileCoordForCoordAndResolution(e,t,ke){return this.getTileCoordForXYAndResolution_(e[0],e[1],t,!1,ke)}getTileCoordForXYAndResolution_(e,t,ke,Ge,Be){const je=this.getZForResolution(ke),Ve=ke/this.getResolution(je),Ze=this.getOrigin(je),Qe=toSize(this.getTileSize(je),this.tmpSize_);let en=Ve*(e-Ze[0])/ke/Qe[0],tn=Ve*(Ze[1]-t)/ke/Qe[1];return Ge?(en=ceil(en,DECIMALS$1)-1,tn=ceil(tn,DECIMALS$1)-1):(en=floor(en,DECIMALS$1),tn=floor(tn,DECIMALS$1)),createOrUpdate(je,en,tn,Be)}getTileCoordForXYAndZ_(e,t,ke,Ge,Be){const je=this.getOrigin(ke),Ve=this.getResolution(ke),Ze=toSize(this.getTileSize(ke),this.tmpSize_);let Qe=(e-je[0])/Ve/Ze[0],en=(je[1]-t)/Ve/Ze[1];return Ge?(Qe=ceil(Qe,DECIMALS$1)-1,en=ceil(en,DECIMALS$1)-1):(Qe=floor(Qe,DECIMALS$1),en=floor(en,DECIMALS$1)),createOrUpdate(ke,Qe,en,Be)}getTileCoordForCoordAndZ(e,t,ke){return this.getTileCoordForXYAndZ_(e[0],e[1],t,!1,ke)}getTileCoordResolution(e){return this.resolutions_[e[0]]}getTileSize(e){return this.tileSize_?this.tileSize_:this.tileSizes_[e]}getFullTileRange(e){return this.fullTileRanges_?this.fullTileRanges_[e]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,e):null}getZForResolution(e,t){const ke=linearFindNearest(this.resolutions_,e,t||0);return clamp(ke,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(e,t){return intersectsLinearRing(t,0,t.length,2,this.getTileCoordExtent(e))}calculateTileRanges_(e){const t=this.resolutions_.length,ke=new Array(t);for(let Ge=this.minZoom;Ge<t;++Ge)ke[Ge]=this.getTileRangeForExtentAndZ(e,Ge);this.fullTileRanges_=ke}}const TileEventType={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"},METERS_PER_UNIT$1={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};let Projection$1=class{constructor(e){this.code_=e.code,this.units_=e.units,this.extent_=e.extent!==void 0?e.extent:null,this.worldExtent_=e.worldExtent!==void 0?e.worldExtent:null,this.axisOrientation_=e.axisOrientation!==void 0?e.axisOrientation:"enu",this.global_=e.global!==void 0?e.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=e.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=e.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||METERS_PER_UNIT$1[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(e){this.global_=e,this.canWrapX_=!!(e&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(e){this.defaultTileGrid_=e}setExtent(e){this.extent_=e,this.canWrapX_=!!(this.global_&&e)}setWorldExtent(e){this.worldExtent_=e}setGetPointResolution(e){this.getPointResolutionFunc_=e}getPointResolutionFunc(){return this.getPointResolutionFunc_}};const RADIUS$1=6378137,HALF_SIZE=Math.PI*RADIUS$1,EXTENT$2=[-HALF_SIZE,-HALF_SIZE,HALF_SIZE,HALF_SIZE],WORLD_EXTENT=[-180,-85,180,85],MAX_SAFE_Y=RADIUS$1*Math.log(Math.tan(Math.PI/2));class EPSG3857Projection extends Projection$1{constructor(e){super({code:e,units:"m",extent:EXTENT$2,global:!0,worldExtent:WORLD_EXTENT,getPointResolution:function(t,ke){return t/Math.cosh(ke[1]/RADIUS$1)}})}}const PROJECTIONS$1=[new EPSG3857Projection("EPSG:3857"),new EPSG3857Projection("EPSG:102100"),new EPSG3857Projection("EPSG:102113"),new EPSG3857Projection("EPSG:900913"),new EPSG3857Projection("http://www.opengis.net/def/crs/EPSG/0/3857"),new EPSG3857Projection("http://www.opengis.net/gml/srs/epsg.xml#3857")];function fromEPSG4326(Oe,e,t,ke){const Ge=Oe.length;t=t>1?t:2,ke=ke??t,e===void 0&&(t>2?e=Oe.slice():e=new Array(Ge));for(let Be=0;Be<Ge;Be+=ke){e[Be]=HALF_SIZE*Oe[Be]/180;let je=RADIUS$1*Math.log(Math.tan(Math.PI*(+Oe[Be+1]+90)/360));je>MAX_SAFE_Y?je=MAX_SAFE_Y:je<-MAX_SAFE_Y&&(je=-MAX_SAFE_Y),e[Be+1]=je}return e}function toEPSG4326(Oe,e,t,ke){const Ge=Oe.length;t=t>1?t:2,ke=ke??t,e===void 0&&(t>2?e=Oe.slice():e=new Array(Ge));for(let Be=0;Be<Ge;Be+=ke)e[Be]=180*Oe[Be]/HALF_SIZE,e[Be+1]=360*Math.atan(Math.exp(Oe[Be+1]/RADIUS$1))/Math.PI-90;return e}const RADIUS=6378137,EXTENT$1=[-180,-90,180,90],METERS_PER_UNIT=Math.PI*RADIUS/180;class EPSG4326Projection extends Projection$1{constructor(e,t){super({code:e,units:"degrees",extent:EXTENT$1,axisOrientation:t,global:!0,metersPerUnit:METERS_PER_UNIT,worldExtent:EXTENT$1})}}const PROJECTIONS=[new EPSG4326Projection("CRS:84"),new EPSG4326Projection("EPSG:4326","neu"),new EPSG4326Projection("urn:ogc:def:crs:OGC:1.3:CRS84"),new EPSG4326Projection("urn:ogc:def:crs:OGC:2:84"),new EPSG4326Projection("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new EPSG4326Projection("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new EPSG4326Projection("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let cache$1={};function get$5(Oe){return cache$1[Oe]||cache$1[Oe.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function add$3(Oe,e){cache$1[Oe]=e}let transforms={};function add$2(Oe,e,t){const ke=Oe.getCode(),Ge=e.getCode();ke in transforms||(transforms[ke]={}),transforms[ke][Ge]=t}function get$4(Oe,e){return Oe in transforms&&e in transforms[Oe]?transforms[Oe][e]:null}function padNumber(Oe,e,t){const ke=""+Oe;let Ge=ke.indexOf(".");return Ge=Ge===-1?ke.length:Ge,Ge>e?ke:new Array(1+e-Ge).join("0")+ke}function compareVersions(Oe,e){const t=(""+Oe).split("."),ke=(""+e).split(".");for(let Ge=0;Ge<Math.max(t.length,ke.length);Ge++){const Be=parseInt(t[Ge]||"0",10),je=parseInt(ke[Ge]||"0",10);if(Be>je)return 1;if(je>Be)return-1}return 0}function add$1(Oe,e){return Oe[0]+=+e[0],Oe[1]+=+e[1],Oe}function closestOnSegment(Oe,e){const t=Oe[0],ke=Oe[1],Ge=e[0],Be=e[1],je=Ge[0],Ve=Ge[1],Ze=Be[0],Qe=Be[1],en=Ze-je,tn=Qe-Ve,an=en===0&&tn===0?0:(en*(t-je)+tn*(ke-Ve))/(en*en+tn*tn||0);let cn,un;return an<=0?(cn=je,un=Ve):an>=1?(cn=Ze,un=Qe):(cn=je+an*en,un=Ve+an*tn),[cn,un]}function equals(Oe,e){let t=!0;for(let ke=Oe.length-1;ke>=0;--ke)if(Oe[ke]!=e[ke]){t=!1;break}return t}function rotate$1(Oe,e){const t=Math.cos(e),ke=Math.sin(e),Ge=Oe[0]*t-Oe[1]*ke,Be=Oe[1]*t+Oe[0]*ke;return Oe[0]=Ge,Oe[1]=Be,Oe}function scale$3(Oe,e){return Oe[0]*=e,Oe[1]*=e,Oe}function squaredDistance(Oe,e){const t=Oe[0]-e[0],ke=Oe[1]-e[1];return t*t+ke*ke}function distance(Oe,e){return Math.sqrt(squaredDistance(Oe,e))}function squaredDistanceToSegment(Oe,e){return squaredDistance(Oe,closestOnSegment(Oe,e))}function wrapX$1(Oe,e){if(e.canWrapX()){const t=getWidth(e.getExtent()),ke=getWorldsAway(Oe,e,t);ke&&(Oe[0]-=ke*t)}return Oe}function getWorldsAway(Oe,e,t){const ke=e.getExtent();let Ge=0;return e.canWrapX()&&(Oe[0]<ke[0]||Oe[0]>ke[2])&&(t=t||getWidth(ke),Ge=Math.floor((Oe[0]-ke[0])/t)),Ge}const DEFAULT_RADIUS=63710088e-1;function getDistance(Oe,e,t){t=t||DEFAULT_RADIUS;const ke=toRadians(Oe[1]),Ge=toRadians(e[1]),Be=(Ge-ke)/2,je=toRadians(e[0]-Oe[0])/2,Ve=Math.sin(Be)*Math.sin(Be)+Math.sin(je)*Math.sin(je)*Math.cos(ke)*Math.cos(Ge);return 2*t*Math.atan2(Math.sqrt(Ve),Math.sqrt(1-Ve))}function getAreaInternal(Oe,e){let t=0;const ke=Oe.length;let Ge=Oe[ke-1][0],Be=Oe[ke-1][1];for(let je=0;je<ke;je++){const Ve=Oe[je][0],Ze=Oe[je][1];t+=toRadians(Ve-Ge)*(2+Math.sin(toRadians(Be))+Math.sin(toRadians(Ze))),Ge=Ve,Be=Ze}return t*e*e/2}function getArea(Oe,e){e=e||{};const t=e.radius||DEFAULT_RADIUS,ke=e.projection||"EPSG:3857",Ge=Oe.getType();Ge!=="GeometryCollection"&&(Oe=Oe.clone().transform(ke,"EPSG:4326"));let Be=0,je,Ve,Ze,Qe,en,tn;switch(Ge){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(je=Oe.getCoordinates(),Be=Math.abs(getAreaInternal(je[0],t)),Ze=1,Qe=je.length;Ze<Qe;++Ze)Be-=Math.abs(getAreaInternal(je[Ze],t));break}case"MultiPolygon":{for(je=Oe.getCoordinates(),Ze=0,Qe=je.length;Ze<Qe;++Ze)for(Ve=je[Ze],Be+=Math.abs(getAreaInternal(Ve[0],t)),en=1,tn=Ve.length;en<tn;++en)Be-=Math.abs(getAreaInternal(Ve[en],t));break}case"GeometryCollection":{const an=Oe.getGeometries();for(Ze=0,Qe=an.length;Ze<Qe;++Ze)Be+=getArea(an[Ze],e);break}default:throw new Error("Unsupported geometry type: "+Ge)}return Be}const K0=.9996,E$1=.00669438,E2=E$1*E$1,E3=E2*E$1,E_P2=E$1/(1-E$1),SQRT_E=Math.sqrt(1-E$1),_E=(1-SQRT_E)/(1+SQRT_E),_E2=_E*_E,_E3=_E2*_E,_E4=_E3*_E,_E5=_E4*_E,M1=1-E$1/4-3*E2/64-5*E3/256,M2=3*E$1/8+3*E2/32+45*E3/1024,M3=15*E2/256+45*E3/1024,M4=35*E3/3072,P2=3/2*_E-27/32*_E3+269/512*_E5,P3=21/16*_E2-55/32*_E4,P4=151/96*_E3-417/128*_E5,P5=1097/512*_E4,R$2=6378137;function toLonLat$1(Oe,e,t){const ke=Oe-5e5,je=(t.north?e:e-1e7)/K0/(R$2*M1),Ve=je+P2*Math.sin(2*je)+P3*Math.sin(4*je)+P4*Math.sin(6*je)+P5*Math.sin(8*je),Ze=Math.sin(Ve),Qe=Ze*Ze,en=Math.cos(Ve),tn=Ze/en,an=tn*tn,cn=an*an,un=1-E$1*Qe,dn=Math.sqrt(1-E$1*Qe),fn=R$2/dn,pn=(1-E$1)/un,gn=E_P2*en**2,yn=gn*gn,vn=ke/(fn*K0),An=vn*vn,xn=An*vn,wn=xn*vn,bn=wn*vn,Mn=bn*vn,Pn=Ve-tn/pn*(An/2-wn/24*(5+3*an+10*gn-4*yn-9*E_P2))+Mn/720*(61+90*an+298*gn+45*cn-252*E_P2-3*yn);let En=(vn-xn/6*(1+2*an+gn)+bn/120*(5-2*gn+28*an-3*yn+8*E_P2+24*cn))/en;return En=wrap(En+toRadians(zoneToCentralLongitude(t.number)),-Math.PI,Math.PI),[toDegrees(En),toDegrees(Pn)]}const MIN_LATITUDE=-80,MAX_LATITUDE=84,MIN_LONGITUDE=-180,MAX_LONGITUDE=180;function fromLonLat$1(Oe,e,t){Oe=wrap(Oe,MIN_LONGITUDE,MAX_LONGITUDE),e<MIN_LATITUDE?e=MIN_LATITUDE:e>MAX_LATITUDE&&(e=MAX_LATITUDE);const ke=toRadians(e),Ge=Math.sin(ke),Be=Math.cos(ke),je=Ge/Be,Ve=je*je,Ze=Ve*Ve,Qe=toRadians(Oe),en=zoneToCentralLongitude(t.number),tn=toRadians(en),an=R$2/Math.sqrt(1-E$1*Ge**2),cn=E_P2*Be**2,un=Be*wrap(Qe-tn,-Math.PI,Math.PI),dn=un*un,fn=dn*un,pn=fn*un,gn=pn*un,yn=gn*un,vn=R$2*(M1*ke-M2*Math.sin(2*ke)+M3*Math.sin(4*ke)-M4*Math.sin(6*ke)),An=K0*an*(un+fn/6*(1-Ve+cn)+gn/120*(5-18*Ve+Ze+72*cn-58*E_P2))+5e5;let xn=K0*(vn+an*je*(dn/2+pn/24*(5-Ve+9*cn+4*cn**2)+yn/720*(61-58*Ve+Ze+600*cn-330*E_P2)));return t.north||(xn+=1e7),[An,xn]}function zoneToCentralLongitude(Oe){return(Oe-1)*6-180+3}const epsgRegExes=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function zoneFromCode(Oe){let e=0;for(const Ge of epsgRegExes){const Be=Oe.match(Ge);if(Be){e=parseInt(Be[1]);break}}if(!e)return null;let t=0,ke=!1;return e>32700&&e<32761?t=e-32700:e>32600&&e<32661&&(ke=!0,t=e-32600),t?{number:t,north:ke}:null}function makeTransformFunction(Oe,e){return function(t,ke,Ge,Be){const je=t.length;Ge=Ge>1?Ge:2,Be=Be??Ge,ke||(Ge>2?ke=t.slice():ke=new Array(je));for(let Ve=0;Ve<je;Ve+=Be){const Ze=t[Ve],Qe=t[Ve+1],en=Oe(Ze,Qe,e);ke[Ve]=en[0],ke[Ve+1]=en[1]}return ke}}function makeProjection(Oe){return zoneFromCode(Oe)?new Projection$1({code:Oe,units:"m"}):null}function makeTransforms(Oe){const e=zoneFromCode(Oe.getCode());return e?{forward:makeTransformFunction(fromLonLat$1,e),inverse:makeTransformFunction(toLonLat$1,e)}:null}function warn(...Oe){console.warn(...Oe)}const transformFactories=[makeTransforms],projectionFactories=[makeProjection];let showCoordinateWarning=!0;function disableCoordinateWarning(Oe){showCoordinateWarning=!1}function cloneTransform(Oe,e){if(e!==void 0){for(let t=0,ke=Oe.length;t<ke;++t)e[t]=Oe[t];e=e}else e=Oe.slice();return e}function addProjection(Oe){add$3(Oe.getCode(),Oe),add$2(Oe,Oe,cloneTransform)}function addProjections(Oe){Oe.forEach(addProjection)}function get$3(Oe){if(typeof Oe!="string")return Oe;const e=get$5(Oe);if(e)return e;for(const t of projectionFactories){const ke=t(Oe);if(ke)return ke}return null}function getPointResolution(Oe,e,t,ke){Oe=get$3(Oe);let Ge;const Be=Oe.getPointResolutionFunc();if(Be){if(Ge=Be(e,t),ke&&ke!==Oe.getUnits()){const je=Oe.getMetersPerUnit();je&&(Ge=Ge*je/METERS_PER_UNIT$1[ke])}}else{const je=Oe.getUnits();if(je=="degrees"&&!ke||ke=="degrees")Ge=e;else{const Ve=getTransformFromProjections(Oe,get$3("EPSG:4326"));if(!Ve&&je!=="degrees")Ge=e*Oe.getMetersPerUnit();else{let Qe=[t[0]-e/2,t[1],t[0]+e/2,t[1],t[0],t[1]-e/2,t[0],t[1]+e/2];Qe=Ve(Qe,Qe,2);const en=getDistance(Qe.slice(0,2),Qe.slice(2,4)),tn=getDistance(Qe.slice(4,6),Qe.slice(6,8));Ge=(en+tn)/2}const Ze=ke?METERS_PER_UNIT$1[ke]:Oe.getMetersPerUnit();Ze!==void 0&&(Ge/=Ze)}}return Ge}function addEquivalentProjections(Oe){addProjections(Oe),Oe.forEach(function(e){Oe.forEach(function(t){e!==t&&add$2(e,t,cloneTransform)})})}function addEquivalentTransforms(Oe,e,t,ke){Oe.forEach(function(Ge){e.forEach(function(Be){add$2(Ge,Be,t),add$2(Be,Ge,ke)})})}function createProjection(Oe,e){return Oe?typeof Oe=="string"?get$3(Oe):Oe:get$3(e)}function createTransformFromCoordinateTransform(Oe){return function(e,t,ke,Ge){const Be=e.length;ke=ke!==void 0?ke:2,Ge=Ge??ke,t=t!==void 0?t:new Array(Be);for(let je=0;je<Be;je+=Ge){const Ve=Oe(e.slice(je,je+ke)),Ze=Ve.length;for(let Qe=0,en=Ge;Qe<en;++Qe)t[je+Qe]=Qe>=Ze?e[je+Qe]:Ve[Qe]}return t}}function addCoordinateTransforms(Oe,e,t,ke){const Ge=get$3(Oe),Be=get$3(e);add$2(Ge,Be,createTransformFromCoordinateTransform(t)),add$2(Be,Ge,createTransformFromCoordinateTransform(ke))}function fromLonLat(Oe,e){return disableCoordinateWarning(),transform$1(Oe,"EPSG:4326",e!==void 0?e:"EPSG:3857")}function toLonLat(Oe,e){const t=transform$1(Oe,"EPSG:3857","EPSG:4326"),ke=t[0];return(ke<-180||ke>180)&&(t[0]=modulo(ke+180,360)-180),t}function equivalent(Oe,e){if(Oe===e)return!0;const t=Oe.getUnits()===e.getUnits();return(Oe.getCode()===e.getCode()||getTransformFromProjections(Oe,e)===cloneTransform)&&t}function getTransformFromProjections(Oe,e){const t=Oe.getCode(),ke=e.getCode();let Ge=get$4(t,ke);if(Ge)return Ge;let Be=null,je=null;for(const Ze of transformFactories)Be||(Be=Ze(Oe)),je||(je=Ze(e));if(!Be&&!je)return null;const Ve="EPSG:4326";if(je)if(Be)Ge=composeTransformFuncs(Be.inverse,je.forward);else{const Ze=get$4(t,Ve);Ze&&(Ge=composeTransformFuncs(Ze,je.forward))}else{const Ze=get$4(Ve,ke);Ze&&(Ge=composeTransformFuncs(Be.inverse,Ze))}return Ge&&(addProjection(Oe),addProjection(e),add$2(Oe,e,Ge)),Ge}function composeTransformFuncs(Oe,e){return function(t,ke,Ge,Be){return ke=Oe(t,ke,Ge,Be),e(ke,ke,Ge,Be)}}function getTransform(Oe,e){const t=get$3(Oe),ke=get$3(e);return getTransformFromProjections(t,ke)}function transform$1(Oe,e,t){const ke=getTransform(e,t);if(!ke){const Ge=get$3(e).getCode(),Be=get$3(t).getCode();throw new Error(`No transform available between ${Ge} and ${Be}`)}return ke(Oe,void 0,Oe.length)}function transformExtent(Oe,e,t,ke){const Ge=getTransform(e,t);return applyTransform(Oe,Ge,void 0)}let userProjection=null;function getUserProjection(){return userProjection}function toUserCoordinate(Oe,e){return Oe}function fromUserCoordinate(Oe,e){return showCoordinateWarning&&!equals(Oe,[0,0])&&Oe[0]>=-180&&Oe[0]<=180&&Oe[1]>=-90&&Oe[1]<=90&&(showCoordinateWarning=!1,warn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),Oe}function toUserExtent(Oe,e){return Oe}function fromUserExtent(Oe,e){return Oe}function fromUserResolution(Oe,e){return Oe}function addCommon(){addEquivalentProjections(PROJECTIONS$1),addEquivalentProjections(PROJECTIONS),addEquivalentTransforms(PROJECTIONS,PROJECTIONS$1,fromEPSG4326,toEPSG4326)}addCommon();class Source extends BaseObject{constructor(e){super(),this.projection=get$3(e.projection),this.attributions_=adaptAttributions(e.attributions),this.attributionsCollapsible_=e.attributionsCollapsible??!0,this.loading=!1,this.state_=e.state!==void 0?e.state:"ready",this.wrapX_=e.wrapX!==void 0?e.wrapX:!1,this.interpolate_=!!e.interpolate,this.viewResolver=null,this.viewRejector=null;const t=this;this.viewPromise_=new Promise(function(ke,Ge){t.viewResolver=ke,t.viewRejector=Ge})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(e){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(e){this.attributions_=adaptAttributions(e),this.changed()}setState(e){this.state_=e,this.changed()}}function adaptAttributions(Oe){return Oe?typeof Oe=="function"?Oe:(Array.isArray(Oe)||(Oe=[Oe]),e=>Oe):null}class WMTSTileGrid extends TileGrid{constructor(e){super({extent:e.extent,origin:e.origin,origins:e.origins,resolutions:e.resolutions,tileSize:e.tileSize,tileSizes:e.tileSizes,sizes:e.sizes}),this.matrixIds_=e.matrixIds}getMatrixId(e){return this.matrixIds_[e]}getMatrixIds(){return this.matrixIds_}}function getForProjection(Oe){let e=Oe.getDefaultTileGrid();return e||(e=createForProjection(Oe),Oe.setDefaultTileGrid(e)),e}function wrapX(Oe,e,t){const ke=e[0],Ge=Oe.getTileCoordCenter(e),Be=extentFromProjection(t);if(!containsCoordinate(Be,Ge)){const je=getWidth(Be),Ve=Math.ceil((Be[0]-Ge[0])/je);return Ge[0]+=je*Ve,Oe.getTileCoordForCoordAndZ(Ge,ke)}return e}function createForExtent(Oe,e,t,ke){ke=ke!==void 0?ke:"top-left";const Ge=resolutionsFromExtent(Oe,e,t);return new TileGrid({extent:Oe,origin:getCorner(Oe,ke),resolutions:Ge,tileSize:t})}function createXYZ(Oe){const e=Oe||{},t=e.extent||get$3("EPSG:3857").getExtent(),ke={extent:t,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:resolutionsFromExtent(t,e.maxZoom,e.tileSize,e.maxResolution)};return new TileGrid(ke)}function resolutionsFromExtent(Oe,e,t,ke){e=e!==void 0?e:DEFAULT_MAX_ZOOM,t=toSize(t!==void 0?t:DEFAULT_TILE_SIZE);const Ge=getHeight(Oe),Be=getWidth(Oe);ke=ke>0?ke:Math.max(Be/t[0],Ge/t[1]);const je=e+1,Ve=new Array(je);for(let Ze=0;Ze<je;++Ze)Ve[Ze]=ke/Math.pow(2,Ze);return Ve}function createForProjection(Oe,e,t,ke){const Ge=extentFromProjection(Oe);return createForExtent(Ge,e,t,ke)}function extentFromProjection(Oe){Oe=get$3(Oe);let e=Oe.getExtent();if(!e){const t=180*METERS_PER_UNIT$1.degrees/Oe.getMetersPerUnit();e=createOrUpdate$2(-t,-t,t,t)}return e}class TileSource extends Source{constructor(e){super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,projection:e.projection,state:e.state,wrapX:e.wrapX,interpolate:e.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=e.tilePixelRatio!==void 0?e.tilePixelRatio:1,this.tileGrid=e.tileGrid!==void 0?e.tileGrid:null;const t=[256,256];this.tileGrid&&toSize(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),t),this.tmpSize=[0,0],this.key_=e.key||getUid(this),this.tileOptions={transition:e.transition,interpolate:e.interpolate},this.zDirection=e.zDirection?e.zDirection:0}getGutterForProjection(e){return 0}getKey(){return this.key_}setKey(e){this.key_!==e&&(this.key_=e,this.changed())}getResolutions(e){const t=e?this.getTileGridForProjection(e):this.tileGrid;return t?t.getResolutions():null}getTile(e,t,ke,Ge,Be){return abstract()}getTileGrid(){return this.tileGrid}getTileGridForProjection(e){return this.tileGrid?this.tileGrid:getForProjection(e)}getTilePixelRatio(e){return this.tilePixelRatio_}getTilePixelSize(e,t,ke){const Ge=this.getTileGridForProjection(ke),Be=this.getTilePixelRatio(t),je=toSize(Ge.getTileSize(e),this.tmpSize);return Be==1?je:scale$4(je,Be,this.tmpSize)}getTileCoordForTileUrlFunction(e,t){const ke=t!==void 0?t:this.getProjection(),Ge=t!==void 0?this.getTileGridForProjection(ke):this.tileGrid||this.getTileGridForProjection(ke);return this.getWrapX()&&ke.isGlobal()&&(e=wrapX(Ge,e,ke)),withinExtentAndZ(e,Ge)?e:null}clear(){}refresh(){this.clear(),super.refresh()}}class TileSourceEvent extends BaseEvent{constructor(e,t){super(e),this.tile=t}}function appendParams(Oe,e){const t=[];Object.keys(e).forEach(function(Ge){e[Ge]!==null&&e[Ge]!==void 0&&t.push(Ge+"="+encodeURIComponent(e[Ge]))});const ke=t.join("&");return Oe=Oe.replace(/[?&]$/,""),Oe+=Oe.includes("?")?"&":"?",Oe+ke}const zRegEx=/\{z\}/g,xRegEx=/\{x\}/g,yRegEx=/\{y\}/g,dashYRegEx=/\{-y\}/g;function renderXYZTemplate(Oe,e,t,ke,Ge){return Oe.replace(zRegEx,e.toString()).replace(xRegEx,t.toString()).replace(yRegEx,ke.toString()).replace(dashYRegEx,function(){if(Ge===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(Ge-ke).toString()})}function expandUrl(Oe){const e=[];let t=/\{([a-z])-([a-z])\}/.exec(Oe);if(t){const ke=t[1].charCodeAt(0),Ge=t[2].charCodeAt(0);let Be;for(Be=ke;Be<=Ge;++Be)e.push(Oe.replace(t[0],String.fromCharCode(Be)));return e}if(t=/\{(\d+)-(\d+)\}/.exec(Oe),t){const ke=parseInt(t[2],10);for(let Ge=parseInt(t[1],10);Ge<=ke;Ge++)e.push(Oe.replace(t[0],Ge.toString()));return e}return e.push(Oe),e}function createFromTemplate(Oe,e){return function(t,ke,Ge){if(!t)return;let Be;const je=t[0];if(e){const Ve=e.getFullTileRange(je);Ve&&(Be=Ve.getHeight()-1)}return renderXYZTemplate(Oe,je,t[1],t[2],Be)}}function createFromTemplates(Oe,e){const t=Oe.length,ke=new Array(t);for(let Ge=0;Ge<t;++Ge)ke[Ge]=createFromTemplate(Oe[Ge],e);return createFromTileUrlFunctions(ke)}function createFromTileUrlFunctions(Oe){return Oe.length===1?Oe[0]:function(e,t,ke){if(!e)return;const Ge=hash(e),Be=modulo(Ge,Oe.length);return Oe[Be](e,t,ke)}}class UrlTile extends TileSource{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tilePixelRatio:e.tilePixelRatio,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===UrlTile.prototype.tileUrlFunction,this.tileLoadFunction=e.tileLoadFunction,e.tileUrlFunction&&(this.tileUrlFunction=e.tileUrlFunction),this.urls=null,e.urls?this.setUrls(e.urls):e.url&&this.setUrl(e.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(e){const t=e.target,ke=getUid(t),Ge=t.getState();let Be;Ge==TileState.LOADING?(this.tileLoadingKeys_[ke]=!0,Be=TileEventType.TILELOADSTART):ke in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[ke],Be=Ge==TileState.ERROR?TileEventType.TILELOADERROR:Ge==TileState.LOADED?TileEventType.TILELOADEND:void 0),Be!=null&&this.dispatchEvent(new TileSourceEvent(Be,t))}setTileLoadFunction(e){this.tileLoadFunction=e,this.changed()}setTileUrlFunction(e,t){this.tileUrlFunction=e,typeof t<"u"?this.setKey(t):this.changed()}setUrl(e){const t=expandUrl(e);this.urls=t,this.setUrls(t)}setUrls(e){this.urls=e;const t=e.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(createFromTemplates(e,this.tileGrid),t):this.setKey(t)}tileUrlFunction(e,t,ke){}}const canvasPool$2=[];class VectorRenderTile extends Tile{constructor(e,t,ke,Ge,Be){super(e,t,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=Ge.bind(void 0,this),this.removeSourceTiles_=Be,this.wrappedTileCoord=ke}getContext(){return this.context_||(this.context_=createCanvasContext2D(1,1,canvasPool$2)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(e){const t=getUid(e);return t in this.replayState_||(this.replayState_[t]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[t]}load(){this.getSourceTiles()}release(){this.context_&&(releaseCanvas(this.context_),canvasPool$2.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}let withCredentials=!1;function loadFeaturesXhr(Oe,e,t,ke,Ge,Be,je){const Ve=new XMLHttpRequest;Ve.open("GET",typeof Oe=="function"?Oe(t,ke,Ge):Oe,!0),e.getType()=="arraybuffer"&&(Ve.responseType="arraybuffer"),Ve.withCredentials=withCredentials,Ve.onload=function(Ze){if(!Ve.status||Ve.status>=200&&Ve.status<300){const Qe=e.getType();try{let en;Qe=="text"||Qe=="json"?en=Ve.responseText:Qe=="xml"?en=Ve.responseXML||Ve.responseText:Qe=="arraybuffer"&&(en=Ve.response),en?Be(e.readFeatures(en,{extent:t,featureProjection:Ge}),e.readProjection(en)):je()}catch{je()}}else je()},Ve.onerror=je,Ve.send()}function xhr(Oe,e){return function(t,ke,Ge,Be,je){const Ve=this;loadFeaturesXhr(Oe,e,t,ke,Ge,function(Ze,Qe){Ve.addFeatures(Ze),Be!==void 0&&Be(Ze)},je||VOID)}}class VectorTile extends UrlTile{constructor(e){const t=e.projection||"EPSG:3857",ke=e.extent||extentFromProjection(t),Ge=e.tileGrid||createXYZ({extent:ke,maxResolution:e.maxResolution,maxZoom:e.maxZoom!==void 0?e.maxZoom:22,minZoom:e.minZoom,tileSize:e.tileSize||512});super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,interpolate:!0,projection:t,state:e.state,tileGrid:Ge,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultLoadFunction,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX===void 0?!0:e.wrapX,transition:e.transition,zDirection:e.zDirection===void 0?1:e.zDirection}),this.format_=e.format?e.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=e.overlaps==null?!0:e.overlaps,this.tileClass=e.tileClass?e.tileClass:VectorTile$1,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(e,t,ke){if(ke.getState()===TileState.IDLE){ke.setState(TileState.LOADING);const Ge=ke.wrappedTileCoord,Be=this.getTileGridForProjection(t),je=Be.getTileCoordExtent(Ge),Ve=Ge[0],Ze=Be.getResolution(Ve);buffer(je,-Ze,je);const Qe=this.tileGrid,en=Qe.getExtent();en&&getIntersection(je,en,je);const tn=Qe.getZForResolution(Ze,this.zDirection);Qe.forEachTileCoord(je,tn,an=>{const cn=this.tileUrlFunction(an,e,t);this.sourceTiles_[cn]||(this.sourceTiles_[cn]=new this.tileClass(an,cn?TileState.IDLE:TileState.EMPTY,cn,this.format_,this.tileLoadFunction));const un=this.sourceTiles_[cn];ke.sourceTiles.push(un),this.tileKeysBySourceTileUrl_[cn]||(this.tileKeysBySourceTileUrl_[cn]=[]),this.tileKeysBySourceTileUrl_[cn].push(ke.getKey());const dn=un.getState();if(dn<TileState.LOADED){const fn=pn=>{this.handleTileChange(pn);const gn=un.getState();if(gn===TileState.LOADED||gn===TileState.ERROR){const yn=un.getKey();yn in ke.errorTileKeys?un.getState()===TileState.LOADED&&delete ke.errorTileKeys[yn]:ke.loadingSourceTiles--,gn===TileState.ERROR?ke.errorTileKeys[yn]=!0:un.removeEventListener(EventType.CHANGE,fn),ke.loadingSourceTiles===0&&ke.setState(isEmpty$1(ke.errorTileKeys)?TileState.LOADED:TileState.ERROR)}};un.addEventListener(EventType.CHANGE,fn),ke.loadingSourceTiles++}dn===TileState.IDLE&&(un.extent=Qe.getTileCoordExtent(an),un.projection=t,un.resolution=Qe.getResolution(an[0]),un.load())}),ke.loadingSourceTiles||ke.setState(ke.sourceTiles.some(an=>an.getState()===TileState.ERROR)?TileState.ERROR:TileState.LOADED)}return ke.sourceTiles}removeSourceTiles(e){const t=e.sourceTiles;for(let ke=0,Ge=t.length;ke<Ge;++ke){const Be=t[ke].getTileUrl(),je=this.getKey();if(!this.tileKeysBySourceTileUrl_[Be])return;const Ve=this.tileKeysBySourceTileUrl_[Be][je];Ve!==-1&&(this.tileKeysBySourceTileUrl_[Be].splice(Ve,1),this.tileKeysBySourceTileUrl_[Be].length===0&&(delete this.tileKeysBySourceTileUrl_[Be],delete this.sourceTiles_[Be]))}}getTile(e,t,ke,Ge,Be){const je=[e,t,ke];let Ve=this.getTileCoordForTileUrlFunction(je,Be);const Ze=this.getTileGrid().getExtent(),Qe=this.getTileGridForProjection(Be);if(Ve&&Ze){const an=Qe.getTileCoordExtent(Ve);buffer(an,-Qe.getResolution(e),an),intersects$1(Ze,an)||(Ve=null)}let en=!0;if(Ve!==null){const an=this.tileGrid,cn=Qe.getResolution(e),un=an.getZForResolution(cn,1),dn=Qe.getTileCoordExtent(Ve);buffer(dn,-cn,dn),an.forEachTileCoord(dn,un,fn=>{en=en&&!this.tileUrlFunction(fn,Ge,Be)})}const tn=new VectorRenderTile(je,en?TileState.EMPTY:TileState.IDLE,Ve,this.getSourceTiles.bind(this,Ge,Be),this.removeSourceTiles.bind(this));return tn.key=this.getKey(),tn}getTileGridForProjection(e){const t=e.getCode();let ke=this.tileGrids_[t];if(!ke){const Ge=this.tileGrid,Be=Ge.getResolutions().slice(),je=Be.map(function(Qe,en){return Ge.getOrigin(en)}),Ve=Be.map(function(Qe,en){return Ge.getTileSize(en)}),Ze=DEFAULT_MAX_ZOOM+1;for(let Qe=Be.length;Qe<Ze;++Qe)Be.push(Be[Qe-1]/2),je.push(je[Qe-1]),Ve.push(Ve[Qe-1]);ke=new TileGrid({extent:Ge.getExtent(),origins:je,resolutions:Be,tileSizes:Ve}),this.tileGrids_[t]=ke}return ke}getTilePixelRatio(e){return e}getTilePixelSize(e,t,ke){const Ge=this.getTileGridForProjection(ke),Be=toSize(Ge.getTileSize(e),this.tmpSize);return[Math.round(Be[0]*t),Math.round(Be[1]*t)]}setOverlaps(e){this.overlaps_=e,this.changed()}}function defaultLoadFunction(Oe,e){Oe.setLoader(function(t,ke,Ge){loadFeaturesXhr(e,Oe.getFormat(),t,ke,Ge,Oe.onLoad.bind(Oe),Oe.onError.bind(Oe))})}const CollectionEventType={ADD:"add",REMOVE:"remove"},Property$2={LENGTH:"length"};class CollectionEvent extends BaseEvent{constructor(e,t,ke){super(e),this.element=t,this.index=ke}}class Collection extends BaseObject{constructor(e,t){if(super(),this.on,this.once,this.un,t=t||{},this.unique_=!!t.unique,this.array_=e||[],this.unique_)for(let ke=0,Ge=this.array_.length;ke<Ge;++ke)this.assertUnique_(this.array_[ke],ke);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(e){for(let t=0,ke=e.length;t<ke;++t)this.push(e[t]);return this}forEach(e){const t=this.array_;for(let ke=0,Ge=t.length;ke<Ge;++ke)e(t[ke],ke,t)}getArray(){return this.array_}item(e){return this.array_[e]}getLength(){return this.get(Property$2.LENGTH)}insertAt(e,t){if(e<0||e>this.getLength())throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t),this.array_.splice(e,0,t),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}pop(){return this.removeAt(this.getLength()-1)}push(e){this.unique_&&this.assertUnique_(e);const t=this.getLength();return this.insertAt(t,e),this.getLength()}remove(e){const t=this.array_;for(let ke=0,Ge=t.length;ke<Ge;++ke)if(t[ke]===e)return this.removeAt(ke)}removeAt(e){if(e<0||e>=this.getLength())return;const t=this.array_[e];return this.array_.splice(e,1),this.updateLength_(),this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,t,e)),t}setAt(e,t){const ke=this.getLength();if(e>=ke){this.insertAt(e,t);return}if(e<0)throw new Error("Index out of bounds: "+e);this.unique_&&this.assertUnique_(t,e);const Ge=this.array_[e];this.array_[e]=t,this.dispatchEvent(new CollectionEvent(CollectionEventType.REMOVE,Ge,e)),this.dispatchEvent(new CollectionEvent(CollectionEventType.ADD,t,e))}updateLength_(){this.set(Property$2.LENGTH,this.array_.length)}assertUnique_(e,t){for(let ke=0,Ge=this.array_.length;ke<Ge;++ke)if(this.array_[ke]===e&&ke!==t)throw new Error("Duplicate item added to a unique collection")}}function quickselect(Oe,e,t=0,ke=Oe.length-1,Ge=defaultCompare){for(;ke>t;){if(ke-t>600){const Ze=ke-t+1,Qe=e-t+1,en=Math.log(Ze),tn=.5*Math.exp(2*en/3),an=.5*Math.sqrt(en*tn*(Ze-tn)/Ze)*(Qe-Ze/2<0?-1:1),cn=Math.max(t,Math.floor(e-Qe*tn/Ze+an)),un=Math.min(ke,Math.floor(e+(Ze-Qe)*tn/Ze+an));quickselect(Oe,e,cn,un,Ge)}const Be=Oe[e];let je=t,Ve=ke;for(swap(Oe,t,e),Ge(Oe[ke],Be)>0&&swap(Oe,t,ke);je<Ve;){for(swap(Oe,je,Ve),je++,Ve--;Ge(Oe[je],Be)<0;)je++;for(;Ge(Oe[Ve],Be)>0;)Ve--}Ge(Oe[t],Be)===0?swap(Oe,t,Ve):(Ve++,swap(Oe,Ve,ke)),Ve<=e&&(t=Ve+1),e<=Ve&&(ke=Ve-1)}}function swap(Oe,e,t){const ke=Oe[e];Oe[e]=Oe[t],Oe[t]=ke}function defaultCompare(Oe,e){return Oe<e?-1:Oe>e?1:0}let RBush$1=class{constructor(e=9){this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(e){let t=this.data;const ke=[];if(!intersects(e,t))return ke;const Ge=this.toBBox,Be=[];for(;t;){for(let je=0;je<t.children.length;je++){const Ve=t.children[je],Ze=t.leaf?Ge(Ve):Ve;intersects(e,Ze)&&(t.leaf?ke.push(Ve):contains(e,Ze)?this._all(Ve,ke):Be.push(Ve))}t=Be.pop()}return ke}collides(e){let t=this.data;if(!intersects(e,t))return!1;const ke=[];for(;t;){for(let Ge=0;Ge<t.children.length;Ge++){const Be=t.children[Ge],je=t.leaf?this.toBBox(Be):Be;if(intersects(e,je)){if(t.leaf||contains(e,je))return!0;ke.push(Be)}}t=ke.pop()}return!1}load(e){if(!(e&&e.length))return this;if(e.length<this._minEntries){for(let ke=0;ke<e.length;ke++)this.insert(e[ke]);return this}let t=this._build(e.slice(),0,e.length-1,0);if(!this.data.children.length)this.data=t;else if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const ke=this.data;this.data=t,t=ke}this._insert(t,this.data.height-t.height-1,!0)}return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=createNode([]),this}remove(e,t){if(!e)return this;let ke=this.data;const Ge=this.toBBox(e),Be=[],je=[];let Ve,Ze,Qe;for(;ke||Be.length;){if(ke||(ke=Be.pop(),Ze=Be[Be.length-1],Ve=je.pop(),Qe=!0),ke.leaf){const en=findItem(e,ke.children,t);if(en!==-1)return ke.children.splice(en,1),Be.push(ke),this._condense(Be),this}!Qe&&!ke.leaf&&contains(ke,Ge)?(Be.push(ke),je.push(Ve),Ve=0,Ze=ke,ke=ke.children[0]):Ze?(Ve++,ke=Ze.children[Ve],Qe=!1):ke=null}return this}toBBox(e){return e}compareMinX(e,t){return e.minX-t.minX}compareMinY(e,t){return e.minY-t.minY}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){const ke=[];for(;e;)e.leaf?t.push(...e.children):ke.push(...e.children),e=ke.pop();return t}_build(e,t,ke,Ge){const Be=ke-t+1;let je=this._maxEntries,Ve;if(Be<=je)return Ve=createNode(e.slice(t,ke+1)),calcBBox(Ve,this.toBBox),Ve;Ge||(Ge=Math.ceil(Math.log(Be)/Math.log(je)),je=Math.ceil(Be/Math.pow(je,Ge-1))),Ve=createNode([]),Ve.leaf=!1,Ve.height=Ge;const Ze=Math.ceil(Be/je),Qe=Ze*Math.ceil(Math.sqrt(je));multiSelect(e,t,ke,Qe,this.compareMinX);for(let en=t;en<=ke;en+=Qe){const tn=Math.min(en+Qe-1,ke);multiSelect(e,en,tn,Ze,this.compareMinY);for(let an=en;an<=tn;an+=Ze){const cn=Math.min(an+Ze-1,tn);Ve.children.push(this._build(e,an,cn,Ge-1))}}return calcBBox(Ve,this.toBBox),Ve}_chooseSubtree(e,t,ke,Ge){for(;Ge.push(t),!(t.leaf||Ge.length-1===ke);){let Be=1/0,je=1/0,Ve;for(let Ze=0;Ze<t.children.length;Ze++){const Qe=t.children[Ze],en=bboxArea(Qe),tn=enlargedArea(e,Qe)-en;tn<je?(je=tn,Be=en<Be?en:Be,Ve=Qe):tn===je&&en<Be&&(Be=en,Ve=Qe)}t=Ve||t.children[0]}return t}_insert(e,t,ke){const Ge=ke?e:this.toBBox(e),Be=[],je=this._chooseSubtree(Ge,this.data,t,Be);for(je.children.push(e),extend$2(je,Ge);t>=0&&Be[t].children.length>this._maxEntries;)this._split(Be,t),t--;this._adjustParentBBoxes(Ge,Be,t)}_split(e,t){const ke=e[t],Ge=ke.children.length,Be=this._minEntries;this._chooseSplitAxis(ke,Be,Ge);const je=this._chooseSplitIndex(ke,Be,Ge),Ve=createNode(ke.children.splice(je,ke.children.length-je));Ve.height=ke.height,Ve.leaf=ke.leaf,calcBBox(ke,this.toBBox),calcBBox(Ve,this.toBBox),t?e[t-1].children.push(Ve):this._splitRoot(ke,Ve)}_splitRoot(e,t){this.data=createNode([e,t]),this.data.height=e.height+1,this.data.leaf=!1,calcBBox(this.data,this.toBBox)}_chooseSplitIndex(e,t,ke){let Ge,Be=1/0,je=1/0;for(let Ve=t;Ve<=ke-t;Ve++){const Ze=distBBox(e,0,Ve,this.toBBox),Qe=distBBox(e,Ve,ke,this.toBBox),en=intersectionArea(Ze,Qe),tn=bboxArea(Ze)+bboxArea(Qe);en<Be?(Be=en,Ge=Ve,je=tn<je?tn:je):en===Be&&tn<je&&(je=tn,Ge=Ve)}return Ge||ke-t}_chooseSplitAxis(e,t,ke){const Ge=e.leaf?this.compareMinX:compareNodeMinX,Be=e.leaf?this.compareMinY:compareNodeMinY,je=this._allDistMargin(e,t,ke,Ge),Ve=this._allDistMargin(e,t,ke,Be);je<Ve&&e.children.sort(Ge)}_allDistMargin(e,t,ke,Ge){e.children.sort(Ge);const Be=this.toBBox,je=distBBox(e,0,t,Be),Ve=distBBox(e,ke-t,ke,Be);let Ze=bboxMargin(je)+bboxMargin(Ve);for(let Qe=t;Qe<ke-t;Qe++){const en=e.children[Qe];extend$2(je,e.leaf?Be(en):en),Ze+=bboxMargin(je)}for(let Qe=ke-t-1;Qe>=t;Qe--){const en=e.children[Qe];extend$2(Ve,e.leaf?Be(en):en),Ze+=bboxMargin(Ve)}return Ze}_adjustParentBBoxes(e,t,ke){for(let Ge=ke;Ge>=0;Ge--)extend$2(t[Ge],e)}_condense(e){for(let t=e.length-1,ke;t>=0;t--)e[t].children.length===0?t>0?(ke=e[t-1].children,ke.splice(ke.indexOf(e[t]),1)):this.clear():calcBBox(e[t],this.toBBox)}};function findItem(Oe,e,t){if(!t)return e.indexOf(Oe);for(let ke=0;ke<e.length;ke++)if(t(Oe,e[ke]))return ke;return-1}function calcBBox(Oe,e){distBBox(Oe,0,Oe.children.length,e,Oe)}function distBBox(Oe,e,t,ke,Ge){Ge||(Ge=createNode(null)),Ge.minX=1/0,Ge.minY=1/0,Ge.maxX=-1/0,Ge.maxY=-1/0;for(let Be=e;Be<t;Be++){const je=Oe.children[Be];extend$2(Ge,Oe.leaf?ke(je):je)}return Ge}function extend$2(Oe,e){return Oe.minX=Math.min(Oe.minX,e.minX),Oe.minY=Math.min(Oe.minY,e.minY),Oe.maxX=Math.max(Oe.maxX,e.maxX),Oe.maxY=Math.max(Oe.maxY,e.maxY),Oe}function compareNodeMinX(Oe,e){return Oe.minX-e.minX}function compareNodeMinY(Oe,e){return Oe.minY-e.minY}function bboxArea(Oe){return(Oe.maxX-Oe.minX)*(Oe.maxY-Oe.minY)}function bboxMargin(Oe){return Oe.maxX-Oe.minX+(Oe.maxY-Oe.minY)}function enlargedArea(Oe,e){return(Math.max(e.maxX,Oe.maxX)-Math.min(e.minX,Oe.minX))*(Math.max(e.maxY,Oe.maxY)-Math.min(e.minY,Oe.minY))}function intersectionArea(Oe,e){const t=Math.max(Oe.minX,e.minX),ke=Math.max(Oe.minY,e.minY),Ge=Math.min(Oe.maxX,e.maxX),Be=Math.min(Oe.maxY,e.maxY);return Math.max(0,Ge-t)*Math.max(0,Be-ke)}function contains(Oe,e){return Oe.minX<=e.minX&&Oe.minY<=e.minY&&e.maxX<=Oe.maxX&&e.maxY<=Oe.maxY}function intersects(Oe,e){return e.minX<=Oe.maxX&&e.minY<=Oe.maxY&&e.maxX>=Oe.minX&&e.maxY>=Oe.minY}function createNode(Oe){return{children:Oe,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function multiSelect(Oe,e,t,ke,Ge){const Be=[e,t];for(;Be.length;){if(t=Be.pop(),e=Be.pop(),t-e<=ke)continue;const je=e+Math.ceil((t-e)/ke/2)*ke;quickselect(Oe,je,e,t,Ge),Be.push(e,je,je,t)}}class RBush{constructor(e){this.rbush_=new RBush$1(e),this.items_={}}insert(e,t){const ke={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3],value:t};this.rbush_.insert(ke),this.items_[getUid(t)]=ke}load(e,t){const ke=new Array(t.length);for(let Ge=0,Be=t.length;Ge<Be;Ge++){const je=e[Ge],Ve=t[Ge],Ze={minX:je[0],minY:je[1],maxX:je[2],maxY:je[3],value:Ve};ke[Ge]=Ze,this.items_[getUid(Ve)]=Ze}this.rbush_.load(ke)}remove(e){const t=getUid(e),ke=this.items_[t];return delete this.items_[t],this.rbush_.remove(ke)!==null}update(e,t){const ke=this.items_[getUid(t)],Ge=[ke.minX,ke.minY,ke.maxX,ke.maxY];equals$1(Ge,e)||(this.remove(t),this.insert(e,t))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(e){const t={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]};return this.rbush_.search(t).map(function(Ge){return Ge.value})}forEach(e){return this.forEach_(this.getAll(),e)}forEachInExtent(e,t){return this.forEach_(this.getInExtent(e),t)}forEach_(e,t){let ke;for(let Ge=0,Be=e.length;Ge<Be;Ge++)if(ke=t(e[Ge]),ke)return ke;return ke}isEmpty(){return isEmpty$1(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(e){const t=this.rbush_.toJSON();return createOrUpdate$2(t.minX,t.minY,t.maxX,t.maxY,e)}concat(e){this.rbush_.load(e.rbush_.all());for(const t in e.items_)this.items_[t]=e.items_[t]}}class Feature extends BaseObject{constructor(e){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),e)if(typeof e.getSimplifiedGeometry=="function"){const t=e;this.setGeometry(t)}else{const t=e;this.setProperties(t)}}clone(){const e=new Feature(this.hasProperties()?this.getProperties():null);e.setGeometryName(this.getGeometryName());const t=this.getGeometry();t&&e.setGeometry(t.clone());const ke=this.getStyle();return ke&&e.setStyle(ke),e}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(unlistenByKey(this.geometryChangeKey_),this.geometryChangeKey_=null);const e=this.getGeometry();e&&(this.geometryChangeKey_=listen(e,EventType.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(e){this.set(this.geometryName_,e)}setStyle(e){this.style_=e,this.styleFunction_=e?createStyleFunction(e):void 0,this.changed()}setId(e){this.id_=e,this.changed()}setGeometryName(e){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=e,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function createStyleFunction(Oe){if(typeof Oe=="function")return Oe;let e;return Array.isArray(Oe)?e=Oe:(assert(typeof Oe.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[Oe]),function(){return e}}const tmp_=new Array(6);function create$1(){return[1,0,0,1,0,0]}function reset(Oe){return set(Oe,1,0,0,1,0,0)}function multiply(Oe,e){const t=Oe[0],ke=Oe[1],Ge=Oe[2],Be=Oe[3],je=Oe[4],Ve=Oe[5],Ze=e[0],Qe=e[1],en=e[2],tn=e[3],an=e[4],cn=e[5];return Oe[0]=t*Ze+Ge*Qe,Oe[1]=ke*Ze+Be*Qe,Oe[2]=t*en+Ge*tn,Oe[3]=ke*en+Be*tn,Oe[4]=t*an+Ge*cn+je,Oe[5]=ke*an+Be*cn+Ve,Oe}function set(Oe,e,t,ke,Ge,Be,je){return Oe[0]=e,Oe[1]=t,Oe[2]=ke,Oe[3]=Ge,Oe[4]=Be,Oe[5]=je,Oe}function setFromArray(Oe,e){return Oe[0]=e[0],Oe[1]=e[1],Oe[2]=e[2],Oe[3]=e[3],Oe[4]=e[4],Oe[5]=e[5],Oe}function apply(Oe,e){const t=e[0],ke=e[1];return e[0]=Oe[0]*t+Oe[2]*ke+Oe[4],e[1]=Oe[1]*t+Oe[3]*ke+Oe[5],e}function scale$2(Oe,e,t){return multiply(Oe,set(tmp_,e,0,0,t,0,0))}function translate$2(Oe,e,t){return multiply(Oe,set(tmp_,1,0,0,1,e,t))}function compose(Oe,e,t,ke,Ge,Be,je,Ve){const Ze=Math.sin(Be),Qe=Math.cos(Be);return Oe[0]=ke*Qe,Oe[1]=Ge*Ze,Oe[2]=-ke*Ze,Oe[3]=Ge*Qe,Oe[4]=je*ke*Qe-Ve*ke*Ze+e,Oe[5]=je*Ge*Ze+Ve*Ge*Qe+t,Oe}function makeInverse(Oe,e){const t=determinant(e);assert(t!==0,"Transformation matrix cannot be inverted");const ke=e[0],Ge=e[1],Be=e[2],je=e[3],Ve=e[4],Ze=e[5];return Oe[0]=je/t,Oe[1]=-Ge/t,Oe[2]=-Be/t,Oe[3]=ke/t,Oe[4]=(Be*Ze-je*Ve)/t,Oe[5]=-(ke*Ze-Ge*Ve)/t,Oe}function determinant(Oe){return Oe[0]*Oe[3]-Oe[1]*Oe[2]}const matrixPrecision=[1e6,1e6,1e6,1e6,2,2];function toString$3(Oe){return"matrix("+Oe.map((t,ke)=>Math.round(t*matrixPrecision[ke])/matrixPrecision[ke]).join(", ")+")"}function transform2D(Oe,e,t,ke,Ge,Be,je){Be=Be||[],je=je||2;let Ve=0;for(let Ze=e;Ze<t;Ze+=ke){const Qe=Oe[Ze],en=Oe[Ze+1];Be[Ve++]=Ge[0]*Qe+Ge[2]*en+Ge[4],Be[Ve++]=Ge[1]*Qe+Ge[3]*en+Ge[5];for(let tn=2;tn<je;tn++)Be[Ve++]=Oe[Ze+tn]}return Be&&Be.length!=Ve&&(Be.length=Ve),Be}function rotate(Oe,e,t,ke,Ge,Be,je){je=je||[];const Ve=Math.cos(Ge),Ze=Math.sin(Ge),Qe=Be[0],en=Be[1];let tn=0;for(let an=e;an<t;an+=ke){const cn=Oe[an]-Qe,un=Oe[an+1]-en;je[tn++]=Qe+cn*Ve-un*Ze,je[tn++]=en+cn*Ze+un*Ve;for(let dn=an+2;dn<an+ke;++dn)je[tn++]=Oe[dn]}return je&&je.length!=tn&&(je.length=tn),je}function scale$1(Oe,e,t,ke,Ge,Be,je,Ve){Ve=Ve||[];const Ze=je[0],Qe=je[1];let en=0;for(let tn=e;tn<t;tn+=ke){const an=Oe[tn]-Ze,cn=Oe[tn+1]-Qe;Ve[en++]=Ze+Ge*an,Ve[en++]=Qe+Be*cn;for(let un=tn+2;un<tn+ke;++un)Ve[en++]=Oe[un]}return Ve&&Ve.length!=en&&(Ve.length=en),Ve}function translate$1(Oe,e,t,ke,Ge,Be,je){je=je||[];let Ve=0;for(let Ze=e;Ze<t;Ze+=ke){je[Ve++]=Oe[Ze]+Ge,je[Ve++]=Oe[Ze+1]+Be;for(let Qe=Ze+2;Qe<Ze+ke;++Qe)je[Ve++]=Oe[Qe]}return je&&je.length!=Ve&&(je.length=Ve),je}const tmpTransform$1=create$1();class Geometry extends BaseObject{constructor(){super(),this.extent_=createEmpty(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=memoizeOne((e,t,ke)=>{if(!ke)return this.getSimplifiedGeometry(t);const Ge=this.clone();return Ge.applyTransform(ke),Ge.getSimplifiedGeometry(t)})}simplifyTransformed(e,t){return this.simplifyTransformedInternal(this.getRevision(),e,t)}clone(){return abstract()}closestPointXY(e,t,ke,Ge){return abstract()}containsXY(e,t){const ke=this.getClosestPoint([e,t]);return ke[0]===e&&ke[1]===t}getClosestPoint(e,t){return t=t||[NaN,NaN],this.closestPointXY(e[0],e[1],t,1/0),t}intersectsCoordinate(e){return this.containsXY(e[0],e[1])}computeExtent(e){return abstract()}getExtent(e){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&createOrUpdateEmpty(t),this.extentRevision_=this.getRevision()}return returnOrUpdate(this.extent_,e)}rotate(e,t){abstract()}scale(e,t,ke){abstract()}simplify(e){return this.getSimplifiedGeometry(e*e)}getSimplifiedGeometry(e){return abstract()}getType(){return abstract()}applyTransform(e){abstract()}intersectsExtent(e){return abstract()}translate(e,t){abstract()}transform(e,t){const ke=get$3(e),Ge=ke.getUnits()=="tile-pixels"?function(Be,je,Ve){const Ze=ke.getExtent(),Qe=ke.getWorldExtent(),en=getHeight(Qe)/getHeight(Ze);compose(tmpTransform$1,Qe[0],Qe[3],en,-en,0,0,0);const tn=transform2D(Be,0,Be.length,Ve,tmpTransform$1,je),an=getTransform(ke,t);return an?an(tn,tn,Ve):tn}:getTransform(ke,t);return this.applyTransform(Ge),this}}class SimpleGeometry extends Geometry{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(e){return createOrUpdateFromFlatCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinates(){return abstract()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=this.getSimplifiedGeometryInternal(e);return t.getFlatCoordinates().length<this.flatCoordinates.length?t:(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getSimplifiedGeometryInternal(e){return this}getStride(){return this.stride}setFlatCoordinates(e,t){this.stride=getStrideForLayout(e),this.layout=e,this.flatCoordinates=t}setCoordinates(e,t){abstract()}setLayout(e,t,ke){let Ge;if(e)Ge=getStrideForLayout(e);else{for(let Be=0;Be<ke;++Be){if(t.length===0){this.layout="XY",this.stride=2;return}t=t[0]}Ge=t.length,e=getLayoutForStride(Ge)}this.layout=e,this.stride=Ge}applyTransform(e){this.flatCoordinates&&(e(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(e,t){const ke=this.getFlatCoordinates();if(ke){const Ge=this.getStride();rotate(ke,0,ke.length,Ge,e,t,ke),this.changed()}}scale(e,t,ke){t===void 0&&(t=e),ke||(ke=getCenter(this.getExtent()));const Ge=this.getFlatCoordinates();if(Ge){const Be=this.getStride();scale$1(Ge,0,Ge.length,Be,e,t,ke,Ge),this.changed()}}translate(e,t){const ke=this.getFlatCoordinates();if(ke){const Ge=this.getStride();translate$1(ke,0,ke.length,Ge,e,t,ke),this.changed()}}}function getLayoutForStride(Oe){let e;return Oe==2?e="XY":Oe==3?e="XYZ":Oe==4&&(e="XYZM"),e}function getStrideForLayout(Oe){let e;return Oe=="XY"?e=2:Oe=="XYZ"||Oe=="XYM"?e=3:Oe=="XYZM"&&(e=4),e}function transformGeom2D(Oe,e,t){const ke=Oe.getFlatCoordinates();if(!ke)return null;const Ge=Oe.getStride();return transform2D(ke,0,ke.length,Ge,e,t)}function deflateCoordinate(Oe,e,t,ke){for(let Ge=0,Be=t.length;Ge<Be;++Ge)Oe[e++]=t[Ge];return e}function deflateCoordinates(Oe,e,t,ke){for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=t[Ge];for(let Ve=0;Ve<ke;++Ve)Oe[e++]=je[Ve]}return e}function deflateCoordinatesArray(Oe,e,t,ke,Ge){Ge=Ge||[];let Be=0;for(let je=0,Ve=t.length;je<Ve;++je){const Ze=deflateCoordinates(Oe,e,t[je],ke);Ge[Be++]=Ze,e=Ze}return Ge.length=Be,Ge}function deflateMultiCoordinatesArray(Oe,e,t,ke,Ge){Ge=Ge||[];let Be=0;for(let je=0,Ve=t.length;je<Ve;++je){const Ze=deflateCoordinatesArray(Oe,e,t[je],ke,Ge[Be]);Ze.length===0&&(Ze[0]=e),Ge[Be++]=Ze,e=Ze[Ze.length-1]}return Ge.length=Be,Ge}class Circle extends SimpleGeometry{constructor(e,t,ke){super(),ke!==void 0&&t===void 0?this.setFlatCoordinates(ke,e):(t=t||0,this.setCenterAndRadius(e,t,ke))}clone(){const e=new Circle(this.flatCoordinates.slice(),void 0,this.layout);return e.applyProperties(this),e}closestPointXY(e,t,ke,Ge){const Be=this.flatCoordinates,je=e-Be[0],Ve=t-Be[1],Ze=je*je+Ve*Ve;if(Ze<Ge){if(Ze===0)for(let Qe=0;Qe<this.stride;++Qe)ke[Qe]=Be[Qe];else{const Qe=this.getRadius()/Math.sqrt(Ze);ke[0]=Be[0]+Qe*je,ke[1]=Be[1]+Qe*Ve;for(let en=2;en<this.stride;++en)ke[en]=Be[en]}return ke.length=this.stride,Ze}return Ge}containsXY(e,t){const ke=this.flatCoordinates,Ge=e-ke[0],Be=t-ke[1];return Ge*Ge+Be*Be<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(e){const t=this.flatCoordinates,ke=t[this.stride]-t[0];return createOrUpdate$2(t[0]-ke,t[1]-ke,t[0]+ke,t[1]+ke,e)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const e=this.flatCoordinates[this.stride]-this.flatCoordinates[0],t=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return e*e+t*t}getType(){return"Circle"}intersectsExtent(e){const t=this.getExtent();if(intersects$1(e,t)){const ke=this.getCenter();return e[0]<=ke[0]&&e[2]>=ke[0]||e[1]<=ke[1]&&e[3]>=ke[1]?!0:forEachCorner(e,this.intersectsCoordinate.bind(this))}return!1}setCenter(e){const t=this.stride,ke=this.flatCoordinates[t]-this.flatCoordinates[0],Ge=e.slice();Ge[t]=Ge[0]+ke;for(let Be=1;Be<t;++Be)Ge[t+Be]=e[Be];this.setFlatCoordinates(this.layout,Ge),this.changed()}setCenterAndRadius(e,t,ke){this.setLayout(ke,e,0),this.flatCoordinates||(this.flatCoordinates=[]);const Ge=this.flatCoordinates;let Be=deflateCoordinate(Ge,0,e,this.stride);Ge[Be++]=Ge[0]+t;for(let je=1,Ve=this.stride;je<Ve;++je)Ge[Be++]=Ge[je];Ge.length=Be,this.changed()}getCoordinates(){return null}setCoordinates(e,t){}setRadius(e){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+e,this.changed()}rotate(e,t){const ke=this.getCenter(),Ge=this.getStride();this.setCenter(rotate(ke,0,ke.length,Ge,e,t,ke)),this.changed()}}Circle.prototype.transform;class GeometryCollection extends Geometry{constructor(e){super(),this.geometries_=e,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const e=this.geometries_;for(let t=0,ke=e.length;t<ke;++t)this.changeEventsKeys_.push(listen(e[t],EventType.CHANGE,this.changed,this))}clone(){const e=new GeometryCollection(cloneGeometries(this.geometries_));return e.applyProperties(this),e}closestPointXY(e,t,ke,Ge){if(Ge<closestSquaredDistanceXY(this.getExtent(),e,t))return Ge;const Be=this.geometries_;for(let je=0,Ve=Be.length;je<Ve;++je)Ge=Be[je].closestPointXY(e,t,ke,Ge);return Ge}containsXY(e,t){const ke=this.geometries_;for(let Ge=0,Be=ke.length;Ge<Be;++Ge)if(ke[Ge].containsXY(e,t))return!0;return!1}computeExtent(e){createOrUpdateEmpty(e);const t=this.geometries_;for(let ke=0,Ge=t.length;ke<Ge;++ke)extend$3(e,t[ke].getExtent());return e}getGeometries(){return cloneGeometries(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let e=[];const t=this.geometries_;for(let ke=0,Ge=t.length;ke<Ge;++ke)t[ke].getType()===this.getType()?e=e.concat(t[ke].getGeometriesArrayRecursive()):e.push(t[ke]);return e}getSimplifiedGeometry(e){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),e<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&e<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const t=[],ke=this.geometries_;let Ge=!1;for(let Be=0,je=ke.length;Be<je;++Be){const Ve=ke[Be],Ze=Ve.getSimplifiedGeometry(e);t.push(Ze),Ze!==Ve&&(Ge=!0)}return Ge?new GeometryCollection(t):(this.simplifiedGeometryMaxMinSquaredTolerance=e,this)}getType(){return"GeometryCollection"}intersectsExtent(e){const t=this.geometries_;for(let ke=0,Ge=t.length;ke<Ge;++ke)if(t[ke].intersectsExtent(e))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(e,t){const ke=this.geometries_;for(let Ge=0,Be=ke.length;Ge<Be;++Ge)ke[Ge].rotate(e,t);this.changed()}scale(e,t,ke){ke||(ke=getCenter(this.getExtent()));const Ge=this.geometries_;for(let Be=0,je=Ge.length;Be<je;++Be)Ge[Be].scale(e,t,ke);this.changed()}setGeometries(e){this.setGeometriesArray(cloneGeometries(e))}setGeometriesArray(e){this.unlistenGeometriesChange_(),this.geometries_=e,this.listenGeometriesChange_(),this.changed()}applyTransform(e){const t=this.geometries_;for(let ke=0,Ge=t.length;ke<Ge;++ke)t[ke].applyTransform(e);this.changed()}translate(e,t){const ke=this.geometries_;for(let Ge=0,Be=ke.length;Ge<Be;++Ge)ke[Ge].translate(e,t);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function cloneGeometries(Oe){return Oe.map(e=>e.clone())}function assignClosest(Oe,e,t,ke,Ge,Be,je){const Ve=Oe[e],Ze=Oe[e+1],Qe=Oe[t]-Ve,en=Oe[t+1]-Ze;let tn;if(Qe===0&&en===0)tn=e;else{const an=((Ge-Ve)*Qe+(Be-Ze)*en)/(Qe*Qe+en*en);if(an>1)tn=t;else if(an>0){for(let cn=0;cn<ke;++cn)je[cn]=lerp(Oe[e+cn],Oe[t+cn],an);je.length=ke;return}else tn=e}for(let an=0;an<ke;++an)je[an]=Oe[tn+an];je.length=ke}function maxSquaredDelta(Oe,e,t,ke,Ge){let Be=Oe[e],je=Oe[e+1];for(e+=ke;e<t;e+=ke){const Ve=Oe[e],Ze=Oe[e+1],Qe=squaredDistance$1(Be,je,Ve,Ze);Qe>Ge&&(Ge=Qe),Be=Ve,je=Ze}return Ge}function arrayMaxSquaredDelta(Oe,e,t,ke,Ge){for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];Ge=maxSquaredDelta(Oe,e,Ve,ke,Ge),e=Ve}return Ge}function multiArrayMaxSquaredDelta(Oe,e,t,ke,Ge){for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];Ge=arrayMaxSquaredDelta(Oe,e,Ve,ke,Ge),e=Ve[Ve.length-1]}return Ge}function assignClosestPoint(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe,en){if(e==t)return Qe;let tn,an;if(Ge===0){if(an=squaredDistance$1(je,Ve,Oe[e],Oe[e+1]),an<Qe){for(tn=0;tn<ke;++tn)Ze[tn]=Oe[e+tn];return Ze.length=ke,an}return Qe}en=en||[NaN,NaN];let cn=e+ke;for(;cn<t;)if(assignClosest(Oe,cn-ke,cn,ke,je,Ve,en),an=squaredDistance$1(je,Ve,en[0],en[1]),an<Qe){for(Qe=an,tn=0;tn<ke;++tn)Ze[tn]=en[tn];Ze.length=ke,cn+=ke}else cn+=ke*Math.max((Math.sqrt(an)-Math.sqrt(Qe))/Ge|0,1);if(Be&&(assignClosest(Oe,t-ke,e,ke,je,Ve,en),an=squaredDistance$1(je,Ve,en[0],en[1]),an<Qe)){for(Qe=an,tn=0;tn<ke;++tn)Ze[tn]=en[tn];Ze.length=ke}return Qe}function assignClosestArrayPoint(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe,en){en=en||[NaN,NaN];for(let tn=0,an=t.length;tn<an;++tn){const cn=t[tn];Qe=assignClosestPoint(Oe,e,cn,ke,Ge,Be,je,Ve,Ze,Qe,en),e=cn}return Qe}function assignClosestMultiArrayPoint(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe,en){en=en||[NaN,NaN];for(let tn=0,an=t.length;tn<an;++tn){const cn=t[tn];Qe=assignClosestArrayPoint(Oe,e,cn,ke,Ge,Be,je,Ve,Ze,Qe,en),e=cn[cn.length-1]}return Qe}function douglasPeucker(Oe,e,t,ke,Ge,Be,je){const Ve=(t-e)/ke;if(Ve<3){for(;e<t;e+=ke)Be[je++]=Oe[e],Be[je++]=Oe[e+1];return je}const Ze=new Array(Ve);Ze[0]=1,Ze[Ve-1]=1;const Qe=[e,t-ke];let en=0;for(;Qe.length>0;){const tn=Qe.pop(),an=Qe.pop();let cn=0;const un=Oe[an],dn=Oe[an+1],fn=Oe[tn],pn=Oe[tn+1];for(let gn=an+ke;gn<tn;gn+=ke){const yn=Oe[gn],vn=Oe[gn+1],An=squaredSegmentDistance(yn,vn,un,dn,fn,pn);An>cn&&(en=gn,cn=An)}cn>Ge&&(Ze[(en-e)/ke]=1,an+ke<en&&Qe.push(an,en),en+ke<tn&&Qe.push(en,tn))}for(let tn=0;tn<Ve;++tn)Ze[tn]&&(Be[je++]=Oe[e+tn*ke],Be[je++]=Oe[e+tn*ke+1]);return je}function douglasPeuckerArray(Oe,e,t,ke,Ge,Be,je,Ve){for(let Ze=0,Qe=t.length;Ze<Qe;++Ze){const en=t[Ze];je=douglasPeucker(Oe,e,en,ke,Ge,Be,je),Ve.push(je),e=en}return je}function snap(Oe,e){return e*Math.round(Oe/e)}function quantize(Oe,e,t,ke,Ge,Be,je){if(e==t)return je;let Ve=snap(Oe[e],Ge),Ze=snap(Oe[e+1],Ge);e+=ke,Be[je++]=Ve,Be[je++]=Ze;let Qe,en;do if(Qe=snap(Oe[e],Ge),en=snap(Oe[e+1],Ge),e+=ke,e==t)return Be[je++]=Qe,Be[je++]=en,je;while(Qe==Ve&&en==Ze);for(;e<t;){const tn=snap(Oe[e],Ge),an=snap(Oe[e+1],Ge);if(e+=ke,tn==Qe&&an==en)continue;const cn=Qe-Ve,un=en-Ze,dn=tn-Ve,fn=an-Ze;if(cn*fn==un*dn&&(cn<0&&dn<cn||cn==dn||cn>0&&dn>cn)&&(un<0&&fn<un||un==fn||un>0&&fn>un)){Qe=tn,en=an;continue}Be[je++]=Qe,Be[je++]=en,Ve=Qe,Ze=en,Qe=tn,en=an}return Be[je++]=Qe,Be[je++]=en,je}function quantizeArray(Oe,e,t,ke,Ge,Be,je,Ve){for(let Ze=0,Qe=t.length;Ze<Qe;++Ze){const en=t[Ze];je=quantize(Oe,e,en,ke,Ge,Be,je),Ve.push(je),e=en}return je}function quantizeMultiArray(Oe,e,t,ke,Ge,Be,je,Ve){for(let Ze=0,Qe=t.length;Ze<Qe;++Ze){const en=t[Ze],tn=[];je=quantizeArray(Oe,e,en,ke,Ge,Be,je,tn),Ve.push(tn),e=en[en.length-1]}return je}function inflateCoordinates(Oe,e,t,ke,Ge){Ge=Ge!==void 0?Ge:[];let Be=0;for(let je=e;je<t;je+=ke)Ge[Be++]=Oe.slice(je,je+ke);return Ge.length=Be,Ge}function inflateCoordinatesArray(Oe,e,t,ke,Ge){Ge=Ge!==void 0?Ge:[];let Be=0;for(let je=0,Ve=t.length;je<Ve;++je){const Ze=t[je];Ge[Be++]=inflateCoordinates(Oe,e,Ze,ke,Ge[Be]),e=Ze}return Ge.length=Be,Ge}function inflateMultiCoordinatesArray(Oe,e,t,ke,Ge){Ge=Ge!==void 0?Ge:[];let Be=0;for(let je=0,Ve=t.length;je<Ve;++je){const Ze=t[je];Ge[Be++]=Ze.length===1&&Ze[0]===e?[]:inflateCoordinatesArray(Oe,e,Ze,ke,Ge[Be]),e=Ze[Ze.length-1]}return Ge.length=Be,Ge}function linearRing(Oe,e,t,ke){let Ge=0;const Be=Oe[t-ke],je=Oe[t-ke+1];let Ve=0,Ze=0;for(;e<t;e+=ke){const Qe=Oe[e]-Be,en=Oe[e+1]-je;Ge+=Ze*Qe-Ve*en,Ve=Qe,Ze=en}return Ge/2}function linearRings(Oe,e,t,ke){let Ge=0;for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];Ge+=linearRing(Oe,e,Ve,ke),e=Ve}return Ge}function linearRingss$1(Oe,e,t,ke){let Ge=0;for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];Ge+=linearRings(Oe,e,Ve,ke),e=Ve[Ve.length-1]}return Ge}class LinearRing extends SimpleGeometry{constructor(e,t){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}clone(){return new LinearRing(this.flatCoordinates.slice(),this.layout)}closestPointXY(e,t,ke,Ge){return Ge<closestSquaredDistanceXY(this.getExtent(),e,t)?Ge:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,e,t,ke,Ge))}getArea(){return linearRing(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LinearRing(t,"XY")}getType(){return"LinearRing"}intersectsExtent(e){return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function interpolatePoint(Oe,e,t,ke,Ge,Be,je){let Ve,Ze;const Qe=(t-e)/ke;if(Qe===1)Ve=e;else if(Qe===2)Ve=e,Ze=Ge;else if(Qe!==0){let en=Oe[e],tn=Oe[e+1],an=0;const cn=[0];for(let fn=e+ke;fn<t;fn+=ke){const pn=Oe[fn],gn=Oe[fn+1];an+=Math.sqrt((pn-en)*(pn-en)+(gn-tn)*(gn-tn)),cn.push(an),en=pn,tn=gn}const un=Ge*an,dn=binarySearch$1(cn,un);dn<0?(Ze=(un-cn[-dn-2])/(cn[-dn-1]-cn[-dn-2]),Ve=e+(-dn-2)*ke):Ve=e+dn*ke}je=je>1?je:2,Be=Be||new Array(je);for(let en=0;en<je;++en)Be[en]=Ve===void 0?NaN:Ze===void 0?Oe[Ve+en]:lerp(Oe[Ve+en],Oe[Ve+ke+en],Ze);return Be}function lineStringCoordinateAtM(Oe,e,t,ke,Ge,Be){if(t==e)return null;let je;if(Ge<Oe[e+ke-1])return Be?(je=Oe.slice(e,e+ke),je[ke-1]=Ge,je):null;if(Oe[t-1]<Ge)return Be?(je=Oe.slice(t-ke,t),je[ke-1]=Ge,je):null;if(Ge==Oe[e+ke-1])return Oe.slice(e,e+ke);let Ve=e/ke,Ze=t/ke;for(;Ve<Ze;){const an=Ve+Ze>>1;Ge<Oe[(an+1)*ke-1]?Ze=an:Ve=an+1}const Qe=Oe[Ve*ke-1];if(Ge==Qe)return Oe.slice((Ve-1)*ke,(Ve-1)*ke+ke);const en=Oe[(Ve+1)*ke-1],tn=(Ge-Qe)/(en-Qe);je=[];for(let an=0;an<ke-1;++an)je.push(lerp(Oe[(Ve-1)*ke+an],Oe[Ve*ke+an],tn));return je.push(Ge),je}function lineStringsCoordinateAtM(Oe,e,t,ke,Ge,Be,je){if(je)return lineStringCoordinateAtM(Oe,e,t[t.length-1],ke,Ge,Be);let Ve;if(Ge<Oe[ke-1])return Be?(Ve=Oe.slice(0,ke),Ve[ke-1]=Ge,Ve):null;if(Oe[Oe.length-1]<Ge)return Be?(Ve=Oe.slice(Oe.length-ke),Ve[ke-1]=Ge,Ve):null;for(let Ze=0,Qe=t.length;Ze<Qe;++Ze){const en=t[Ze];if(e!=en){if(Ge<Oe[e+ke-1])return null;if(Ge<=Oe[en-1])return lineStringCoordinateAtM(Oe,e,en,ke,Ge,!1);e=en}}return null}function lineStringLength(Oe,e,t,ke){let Ge=Oe[e],Be=Oe[e+1],je=0;for(let Ve=e+ke;Ve<t;Ve+=ke){const Ze=Oe[Ve],Qe=Oe[Ve+1];je+=Math.sqrt((Ze-Ge)*(Ze-Ge)+(Qe-Be)*(Qe-Be)),Ge=Ze,Be=Qe}return je}class LineString extends SimpleGeometry{constructor(e,t){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,t!==void 0&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendCoordinate(e){extend$4(this.flatCoordinates,e),this.changed()}clone(){const e=new LineString(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,ke,Ge){return Ge<closestSquaredDistanceXY(this.getExtent(),e,t)?Ge:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(maxSquaredDelta(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestPoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,e,t,ke,Ge))}forEachSegment(e){return forEach(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}getCoordinateAtM(e,t){return this.layout!="XYM"&&this.layout!="XYZM"?null:(t=t!==void 0?t:!1,lineStringCoordinateAtM(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t))}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(e,t){return interpolatePoint(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,this.stride)}getLength(){return lineStringLength(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(e){const t=[];return t.length=douglasPeucker(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e,t,0),new LineString(t,"XY")}getType(){return"LineString"}intersectsExtent(e){return intersectsLineString(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}class MultiLineString extends SimpleGeometry{constructor(e,t,ke){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(e[0]))this.setCoordinates(e,t);else if(t!==void 0&&ke)this.setFlatCoordinates(t,e),this.ends_=ke;else{const Ge=e,Be=[],je=[];for(let Ze=0,Qe=Ge.length;Ze<Qe;++Ze){const en=Ge[Ze];extend$4(Be,en.getFlatCoordinates()),je.push(Be.length)}const Ve=Ge.length===0?this.getLayout():Ge[0].getLayout();this.setFlatCoordinates(Ve,Be),this.ends_=je}}appendLineString(e){extend$4(this.flatCoordinates,e.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new MultiLineString(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,ke,Ge){return Ge<closestSquaredDistanceXY(this.getExtent(),e,t)?Ge:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,e,t,ke,Ge))}getCoordinateAtM(e,t,ke){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(t=t!==void 0?t:!1,ke=ke!==void 0?ke:!1,lineStringsCoordinateAtM(this.flatCoordinates,0,this.ends_,this.stride,e,t,ke))}getCoordinates(){return inflateCoordinatesArray(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(e){return e<0||this.ends_.length<=e?null:new LineString(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLineStrings(){const e=this.flatCoordinates,t=this.ends_,ke=this.layout,Ge=[];let Be=0;for(let je=0,Ve=t.length;je<Ve;++je){const Ze=t[je],Qe=new LineString(e.slice(Be,Ze),ke);Ge.push(Qe),Be=Ze}return Ge}getFlatMidpoints(){const e=[],t=this.flatCoordinates;let ke=0;const Ge=this.ends_,Be=this.stride;for(let je=0,Ve=Ge.length;je<Ve;++je){const Ze=Ge[je],Qe=interpolatePoint(t,ke,Ze,Be,.5);extend$4(e,Qe),ke=Ze}return e}getSimplifiedGeometryInternal(e){const t=[],ke=[];return t.length=douglasPeuckerArray(this.flatCoordinates,0,this.ends_,this.stride,e,t,0,ke),new MultiLineString(t,"XY",ke)}getType(){return"MultiLineString"}intersectsExtent(e){return intersectsLineStringArray(this.flatCoordinates,0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const ke=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=ke.length===0?0:ke[ke.length-1],this.changed()}}let Point$1=class jf extends SimpleGeometry{constructor(e,t){super(),this.setCoordinates(e,t)}clone(){const e=new jf(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,ke,Ge){const Be=this.flatCoordinates,je=squaredDistance$1(e,t,Be[0],Be[1]);if(je<Ge){const Ve=this.stride;for(let Ze=0;Ze<Ve;++Ze)ke[Ze]=Be[Ze];return ke.length=Ve,je}return Ge}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(e){return createOrUpdateFromCoordinate(this.flatCoordinates,e)}getType(){return"Point"}intersectsExtent(e){return containsXY(e,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(e,t){this.setLayout(t,e,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinate(this.flatCoordinates,0,e,this.stride),this.changed()}};class MultiPoint extends SimpleGeometry{constructor(e,t){super(),t&&!Array.isArray(e[0])?this.setFlatCoordinates(t,e):this.setCoordinates(e,t)}appendPoint(e){extend$4(this.flatCoordinates,e.getFlatCoordinates()),this.changed()}clone(){const e=new MultiPoint(this.flatCoordinates.slice(),this.layout);return e.applyProperties(this),e}closestPointXY(e,t,ke,Ge){if(Ge<closestSquaredDistanceXY(this.getExtent(),e,t))return Ge;const Be=this.flatCoordinates,je=this.stride;for(let Ve=0,Ze=Be.length;Ve<Ze;Ve+=je){const Qe=squaredDistance$1(e,t,Be[Ve],Be[Ve+1]);if(Qe<Ge){Ge=Qe;for(let en=0;en<je;++en)ke[en]=Be[Ve+en];ke.length=je}}return Ge}getCoordinates(){return inflateCoordinates(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(e){const t=this.flatCoordinates.length/this.stride;return e<0||t<=e?null:new Point$1(this.flatCoordinates.slice(e*this.stride,(e+1)*this.stride),this.layout)}getPoints(){const e=this.flatCoordinates,t=this.layout,ke=this.stride,Ge=[];for(let Be=0,je=e.length;Be<je;Be+=ke){const Ve=new Point$1(e.slice(Be,Be+ke),t);Ge.push(Ve)}return Ge}getType(){return"MultiPoint"}intersectsExtent(e){const t=this.flatCoordinates,ke=this.stride;for(let Ge=0,Be=t.length;Ge<Be;Ge+=ke){const je=t[Ge],Ve=t[Ge+1];if(containsXY(e,je,Ve))return!0}return!1}setCoordinates(e,t){this.setLayout(t,e,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=deflateCoordinates(this.flatCoordinates,0,e,this.stride),this.changed()}}function getInteriorPointOfArray(Oe,e,t,ke,Ge,Be,je){let Ve,Ze,Qe,en,tn,an,cn;const un=Ge[Be+1],dn=[];for(let gn=0,yn=t.length;gn<yn;++gn){const vn=t[gn];for(en=Oe[vn-ke],an=Oe[vn-ke+1],Ve=e;Ve<vn;Ve+=ke)tn=Oe[Ve],cn=Oe[Ve+1],(un<=an&&cn<=un||an<=un&&un<=cn)&&(Qe=(un-an)/(cn-an)*(tn-en)+en,dn.push(Qe)),en=tn,an=cn}let fn=NaN,pn=-1/0;for(dn.sort(ascending),en=dn[0],Ve=1,Ze=dn.length;Ve<Ze;++Ve){tn=dn[Ve];const gn=Math.abs(tn-en);gn>pn&&(Qe=(en+tn)/2,linearRingsContainsXY(Oe,e,t,ke,Qe,un)&&(fn=Qe,pn=gn)),en=tn}return isNaN(fn)&&(fn=Ge[Be]),je?(je.push(fn,un,pn),je):[fn,un,pn]}function getInteriorPointsOfMultiArray(Oe,e,t,ke,Ge){let Be=[];for(let je=0,Ve=t.length;je<Ve;++je){const Ze=t[je];Be=getInteriorPointOfArray(Oe,e,Ze,ke,Ge,2*je,Be),e=Ze[Ze.length-1]}return Be}function coordinates(Oe,e,t,ke){for(;e<t-ke;){for(let Ge=0;Ge<ke;++Ge){const Be=Oe[e+Ge];Oe[e+Ge]=Oe[t-ke+Ge],Oe[t-ke+Ge]=Be}e+=ke,t-=ke}}function linearRingIsClockwise(Oe,e,t,ke){let Ge=0,Be=Oe[t-ke],je=Oe[t-ke+1];for(;e<t;e+=ke){const Ve=Oe[e],Ze=Oe[e+1];Ge+=(Ve-Be)*(Ze+je),Be=Ve,je=Ze}return Ge===0?void 0:Ge>0}function linearRingsAreOriented(Oe,e,t,ke,Ge){Ge=Ge!==void 0?Ge:!1;for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be],Ze=linearRingIsClockwise(Oe,e,Ve,ke);if(Be===0){if(Ge&&Ze||!Ge&&!Ze)return!1}else if(Ge&&!Ze||!Ge&&Ze)return!1;e=Ve}return!0}function linearRingssAreOriented(Oe,e,t,ke,Ge){for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be];if(!linearRingsAreOriented(Oe,e,Ve,ke,Ge))return!1;Ve.length&&(e=Ve[Ve.length-1])}return!0}function orientLinearRings(Oe,e,t,ke,Ge){Ge=Ge!==void 0?Ge:!1;for(let Be=0,je=t.length;Be<je;++Be){const Ve=t[Be],Ze=linearRingIsClockwise(Oe,e,Ve,ke);(Be===0?Ge&&Ze||!Ge&&!Ze:Ge&&!Ze||!Ge&&Ze)&&coordinates(Oe,e,Ve,ke),e=Ve}return e}function orientLinearRingsArray(Oe,e,t,ke,Ge){for(let Be=0,je=t.length;Be<je;++Be)e=orientLinearRings(Oe,e,t[Be],ke,Ge);return e}function inflateEnds(Oe,e){const t=[];let ke=0,Ge=0,Be;for(let je=0,Ve=e.length;je<Ve;++je){const Ze=e[je],Qe=linearRingIsClockwise(Oe,ke,Ze,2);if(Be===void 0&&(Be=Qe),Qe===Be)t.push(e.slice(Ge,je+1));else{if(t.length===0)continue;t[t.length-1].push(e[Ge])}Ge=je+1,ke=Ze}return t}class Polygon extends SimpleGeometry{constructor(e,t,ke){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,t!==void 0&&ke?(this.setFlatCoordinates(t,e),this.ends_=ke):this.setCoordinates(e,t)}appendLinearRing(e){this.flatCoordinates?extend$4(this.flatCoordinates,e.getFlatCoordinates()):this.flatCoordinates=e.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const e=new Polygon(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return e.applyProperties(this),e}closestPointXY(e,t,ke,Ge){return Ge<closestSquaredDistanceXY(this.getExtent(),e,t)?Ge:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(arrayMaxSquaredDelta(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestArrayPoint(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,e,t,ke,Ge))}containsXY(e,t){return linearRingsContainsXY(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,t)}getArea(){return linearRings(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRings(t,0,this.ends_,this.stride,e)):t=this.flatCoordinates,inflateCoordinatesArray(t,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const e=getCenter(this.getExtent());this.flatInteriorPoint_=getInteriorPointOfArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Point$1(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(e){return e<0||this.ends_.length<=e?null:new LinearRing(this.flatCoordinates.slice(e===0?0:this.ends_[e-1],this.ends_[e]),this.layout)}getLinearRings(){const e=this.layout,t=this.flatCoordinates,ke=this.ends_,Ge=[];let Be=0;for(let je=0,Ve=ke.length;je<Ve;++je){const Ze=ke[je],Qe=new LinearRing(t.slice(Be,Ze),e);Ge.push(Qe),Be=Ze}return Ge}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingsAreOriented(e,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRings(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],ke=[];return t.length=quantizeArray(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(e),t,0,ke),new Polygon(t,"XY",ke)}getType(){return"Polygon"}intersectsExtent(e){return intersectsLinearRingArray(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,2),this.flatCoordinates||(this.flatCoordinates=[]);const ke=deflateCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.ends_);this.flatCoordinates.length=ke.length===0?0:ke[ke.length-1],this.changed()}}function fromExtent(Oe){if(isEmpty(Oe))throw new Error("Cannot create polygon from empty extent");const e=Oe[0],t=Oe[1],ke=Oe[2],Ge=Oe[3],Be=[e,t,e,Ge,ke,Ge,ke,t,e,t];return new Polygon(Be,"XY",[Be.length])}function linearRingss(Oe,e,t,ke){const Ge=[];let Be=createEmpty();for(let je=0,Ve=t.length;je<Ve;++je){const Ze=t[je];Be=createOrUpdateFromFlatCoordinates(Oe,e,Ze[0],ke),Ge.push((Be[0]+Be[2])/2,(Be[1]+Be[3])/2),e=Ze[Ze.length-1]}return Ge}class MultiPolygon extends SimpleGeometry{constructor(e,t,ke){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!ke&&!Array.isArray(e[0])){const Ge=e,Be=[],je=[];for(let Ve=0,Ze=Ge.length;Ve<Ze;++Ve){const Qe=Ge[Ve],en=Be.length,tn=Qe.getEnds();for(let an=0,cn=tn.length;an<cn;++an)tn[an]+=en;extend$4(Be,Qe.getFlatCoordinates()),je.push(tn)}t=Ge.length===0?this.getLayout():Ge[0].getLayout(),e=Be,ke=je}t!==void 0&&ke?(this.setFlatCoordinates(t,e),this.endss_=ke):this.setCoordinates(e,t)}appendPolygon(e){let t;if(!this.flatCoordinates)this.flatCoordinates=e.getFlatCoordinates().slice(),t=e.getEnds().slice(),this.endss_.push();else{const ke=this.flatCoordinates.length;extend$4(this.flatCoordinates,e.getFlatCoordinates()),t=e.getEnds().slice();for(let Ge=0,Be=t.length;Ge<Be;++Ge)t[Ge]+=ke}this.endss_.push(t),this.changed()}clone(){const e=this.endss_.length,t=new Array(e);for(let Ge=0;Ge<e;++Ge)t[Ge]=this.endss_[Ge].slice();const ke=new MultiPolygon(this.flatCoordinates.slice(),this.layout,t);return ke.applyProperties(this),ke}closestPointXY(e,t,ke,Ge){return Ge<closestSquaredDistanceXY(this.getExtent(),e,t)?Ge:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(multiArrayMaxSquaredDelta(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),assignClosestMultiArrayPoint(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,e,t,ke,Ge))}containsXY(e,t){return linearRingssContainsXY(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e,t)}getArea(){return linearRingss$1(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(e){let t;return e!==void 0?(t=this.getOrientedFlatCoordinates().slice(),orientLinearRingsArray(t,0,this.endss_,this.stride,e)):t=this.flatCoordinates,inflateMultiCoordinatesArray(t,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const e=linearRingss(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new MultiPoint(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const e=this.flatCoordinates;linearRingssAreOriented(e,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=e:(this.orientedFlatCoordinates_=e.slice(),this.orientedFlatCoordinates_.length=orientLinearRingsArray(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(e){const t=[],ke=[];return t.length=quantizeMultiArray(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(e),t,0,ke),new MultiPolygon(t,"XY",ke)}getPolygon(e){if(e<0||this.endss_.length<=e)return null;let t;if(e===0)t=0;else{const Be=this.endss_[e-1];t=Be[Be.length-1]}const ke=this.endss_[e].slice(),Ge=ke[ke.length-1];if(t!==0)for(let Be=0,je=ke.length;Be<je;++Be)ke[Be]-=t;return new Polygon(this.flatCoordinates.slice(t,Ge),this.layout,ke)}getPolygons(){const e=this.layout,t=this.flatCoordinates,ke=this.endss_,Ge=[];let Be=0;for(let je=0,Ve=ke.length;je<Ve;++je){const Ze=ke[je].slice(),Qe=Ze[Ze.length-1];if(Be!==0)for(let tn=0,an=Ze.length;tn<an;++tn)Ze[tn]-=Be;const en=new Polygon(t.slice(Be,Qe),e,Ze);Ge.push(en),Be=Qe}return Ge}getType(){return"MultiPolygon"}intersectsExtent(e){return intersectsLinearRingMultiArray(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,e)}setCoordinates(e,t){this.setLayout(t,e,3),this.flatCoordinates||(this.flatCoordinates=[]);const ke=deflateMultiCoordinatesArray(this.flatCoordinates,0,e,this.stride,this.endss_);if(ke.length===0)this.flatCoordinates.length=0;else{const Ge=ke[ke.length-1];this.flatCoordinates.length=Ge.length===0?0:Ge[Ge.length-1]}this.changed()}}const tmpTransform=create$1();class RenderFeature{constructor(e,t,ke,Ge,Be,je){this.styleFunction,this.extent_,this.id_=je,this.type_=e,this.flatCoordinates_=t,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=ke||null,this.properties_=Be,this.squaredTolerance_,this.stride_=Ge,this.simplifiedGeometry_}get(e){return this.properties_[e]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?createOrUpdateFromCoordinate(this.flatCoordinates_):createOrUpdateFromFlatCoordinates(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const e=getCenter(this.getExtent());this.flatInteriorPoints_=getInteriorPointOfArray(this.flatCoordinates_,0,this.ends_,2,e,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const e=inflateEnds(this.flatCoordinates_,this.ends_),t=linearRingss(this.flatCoordinates_,0,e,2);this.flatInteriorPoints_=getInteriorPointsOfMultiArray(this.flatCoordinates_,0,e,2,t)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=interpolatePoint(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const e=this.flatCoordinates_;let t=0;const ke=this.ends_;for(let Ge=0,Be=ke.length;Ge<Be;++Ge){const je=ke[Ge],Ve=interpolatePoint(e,t,je,2,.5);extend$4(this.flatMidpoints_,Ve),t=je}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(e){return this}simplifyTransformed(e,t){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(e){e=get$3(e);const t=e.getExtent(),ke=e.getWorldExtent();if(t&&ke){const Ge=getHeight(ke)/getHeight(t);compose(tmpTransform,ke[0],ke[3],Ge,-Ge,0,0,0),transform2D(this.flatCoordinates_,0,this.flatCoordinates_.length,2,tmpTransform,this.flatCoordinates_)}}applyTransform(e){e(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var e;return new RenderFeature(this.type_,this.flatCoordinates_.slice(),(e=this.ends_)==null?void 0:e.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=memoizeOne((e,t)=>{if(e===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),t&&this.simplifiedGeometry_.applyTransform(t);const ke=this.simplifiedGeometry_.getFlatCoordinates();let Ge;switch(this.type_){case"LineString":ke.length=douglasPeucker(ke,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,e,ke,0),Ge=[ke.length];break;case"MultiLineString":Ge=[],ke.length=douglasPeuckerArray(ke,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,e,ke,0,Ge);break;case"Polygon":Ge=[],ke.length=quantizeArray(ke,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(e),ke,0,Ge);break}return Ge&&(this.simplifiedGeometry_=new RenderFeature(this.type_,ke,Ge,2,this.properties_,this.id_)),this.squaredTolerance_=e,this.simplifiedGeometry_}),this}}RenderFeature.prototype.getFlatCoordinates=RenderFeature.prototype.getOrientedFlatCoordinates;const VectorEventType={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};function all$1(Oe,e){return[[-1/0,-1/0,1/0,1/0]]}function bbox(Oe,e){return[Oe]}function tile(Oe){return function(e,t,ke){const Ge=Oe.getZForResolution(fromUserResolution(t)),Be=Oe.getTileRangeForExtentAndZ(fromUserExtent(e),Ge),je=[],Ve=[Ge,0,0];for(Ve[1]=Be.minX;Ve[1]<=Be.maxX;++Ve[1])for(Ve[2]=Be.minY;Ve[2]<=Be.maxY;++Ve[2])je.push(toUserExtent(Oe.getTileCoordExtent(Ve)));return je}}class VectorSourceEvent extends BaseEvent{constructor(e,t,ke){super(e),this.feature=t,this.features=ke}}class VectorSource extends Source{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:e.wrapX!==void 0?e.wrapX:!0}),this.on,this.once,this.un,this.loader_=VOID,this.format_=e.format||null,this.overlaps_=e.overlaps===void 0?!0:e.overlaps,this.url_=e.url,e.loader!==void 0?this.loader_=e.loader:this.url_!==void 0&&(assert(this.format_,"`format` must be set when `url` is set"),this.loader_=xhr(this.url_,this.format_)),this.strategy_=e.strategy!==void 0?e.strategy:all$1;const t=e.useSpatialIndex!==void 0?e.useSpatialIndex:!0;this.featuresRtree_=t?new RBush:null,this.loadedExtentsRtree_=new RBush,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let ke,Ge;Array.isArray(e.features)?Ge=e.features:e.features&&(ke=e.features,Ge=ke.getArray()),!t&&ke===void 0&&(ke=new Collection(Ge)),Ge!==void 0&&this.addFeaturesInternal(Ge),ke!==void 0&&this.bindFeaturesCollection_(ke)}addFeature(e){this.addFeatureInternal(e),this.changed()}addFeatureInternal(e){const t=getUid(e);if(!this.addToIndex_(t,e)){this.featuresCollection_&&this.featuresCollection_.remove(e);return}this.setupChangeEvents_(t,e);const ke=e.getGeometry();if(ke){const Ge=ke.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(Ge,e)}else this.nullGeometryFeatures_[t]=e;this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,e))}setupChangeEvents_(e,t){t instanceof RenderFeature||(this.featureChangeKeys_[e]=[listen(t,EventType.CHANGE,this.handleFeatureChange_,this),listen(t,ObjectEventType.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(e,t){let ke=!0;if(t.getId()!==void 0){const Ge=String(t.getId());if(!(Ge in this.idIndex_))this.idIndex_[Ge]=t;else if(t instanceof RenderFeature){const Be=this.idIndex_[Ge];Be instanceof RenderFeature?Array.isArray(Be)?Be.push(t):this.idIndex_[Ge]=[Be,t]:ke=!1}else ke=!1}return ke&&(assert(!(e in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[e]=t),ke}addFeatures(e){this.addFeaturesInternal(e),this.changed()}addFeaturesInternal(e){const t=[],ke=[],Ge=[];for(let Be=0,je=e.length;Be<je;Be++){const Ve=e[Be],Ze=getUid(Ve);this.addToIndex_(Ze,Ve)&&ke.push(Ve)}for(let Be=0,je=ke.length;Be<je;Be++){const Ve=ke[Be],Ze=getUid(Ve);this.setupChangeEvents_(Ze,Ve);const Qe=Ve.getGeometry();if(Qe){const en=Qe.getExtent();t.push(en),Ge.push(Ve)}else this.nullGeometryFeatures_[Ze]=Ve}if(this.featuresRtree_&&this.featuresRtree_.load(t,Ge),this.hasListener(VectorEventType.ADDFEATURE))for(let Be=0,je=ke.length;Be<je;Be++)this.dispatchEvent(new VectorSourceEvent(VectorEventType.ADDFEATURE,ke[Be]))}bindFeaturesCollection_(e){let t=!1;this.addEventListener(VectorEventType.ADDFEATURE,function(ke){t||(t=!0,e.push(ke.feature),t=!1)}),this.addEventListener(VectorEventType.REMOVEFEATURE,function(ke){t||(t=!0,e.remove(ke.feature),t=!1)}),e.addEventListener(CollectionEventType.ADD,ke=>{t||(t=!0,this.addFeature(ke.element),t=!1)}),e.addEventListener(CollectionEventType.REMOVE,ke=>{t||(t=!0,this.removeFeature(ke.element),t=!1)}),this.featuresCollection_=e}clear(e){if(e){for(const ke in this.featureChangeKeys_)this.featureChangeKeys_[ke].forEach(unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(ke=>{this.removeFeatureInternal(ke)});for(const ke in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[ke])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const t=new VectorSourceEvent(VectorEventType.CLEAR);this.dispatchEvent(t),this.changed()}forEachFeature(e){if(this.featuresRtree_)return this.featuresRtree_.forEach(e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureAtCoordinateDirect(e,t){const ke=[e[0],e[1],e[0],e[1]];return this.forEachFeatureInExtent(ke,function(Ge){const Be=Ge.getGeometry();if(Be instanceof RenderFeature||Be.intersectsCoordinate(e))return t(Ge)})}forEachFeatureInExtent(e,t){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(e,t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureIntersectingExtent(e,t){return this.forEachFeatureInExtent(e,function(ke){const Ge=ke.getGeometry();if(Ge instanceof RenderFeature||Ge.intersectsExtent(e)){const Be=t(ke);if(Be)return Be}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let e;return this.featuresCollection_?e=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(e=this.featuresRtree_.getAll(),isEmpty$1(this.nullGeometryFeatures_)||extend$4(e,Object.values(this.nullGeometryFeatures_))),e}getFeaturesAtCoordinate(e){const t=[];return this.forEachFeatureAtCoordinateDirect(e,function(ke){t.push(ke)}),t}getFeaturesInExtent(e,t){if(this.featuresRtree_){if(!(t&&t.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(e);const Ge=wrapAndSliceX(e,t);return[].concat(...Ge.map(Be=>this.featuresRtree_.getInExtent(Be)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(e,t){const ke=e[0],Ge=e[1];let Be=null;const je=[NaN,NaN];let Ve=1/0;const Ze=[-1/0,-1/0,1/0,1/0];return t=t||TRUE,this.featuresRtree_.forEachInExtent(Ze,function(Qe){if(t(Qe)){const en=Qe.getGeometry(),tn=Ve;if(Ve=en instanceof RenderFeature?0:en.closestPointXY(ke,Ge,je,Ve),Ve<tn){Be=Qe;const an=Math.sqrt(Ve);Ze[0]=ke-an,Ze[1]=Ge-an,Ze[2]=ke+an,Ze[3]=Ge+an}}}),Be}getExtent(e){return this.featuresRtree_.getExtent(e)}getFeatureById(e){const t=this.idIndex_[e.toString()];return t!==void 0?t:null}getFeatureByUid(e){const t=this.uidIndex_[e];return t!==void 0?t:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(e){const t=e.target,ke=getUid(t),Ge=t.getGeometry();if(!Ge)ke in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(t),this.nullGeometryFeatures_[ke]=t);else{const je=Ge.getExtent();ke in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[ke],this.featuresRtree_&&this.featuresRtree_.insert(je,t)):this.featuresRtree_&&this.featuresRtree_.update(je,t)}const Be=t.getId();if(Be!==void 0){const je=Be.toString();this.idIndex_[je]!==t&&(this.removeFromIdIndex_(t),this.idIndex_[je]=t)}else this.removeFromIdIndex_(t),this.uidIndex_[ke]=t;this.changed(),this.dispatchEvent(new VectorSourceEvent(VectorEventType.CHANGEFEATURE,t))}hasFeature(e){const t=e.getId();return t!==void 0?t in this.idIndex_:getUid(e)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&isEmpty$1(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(e,t,ke){const Ge=this.loadedExtentsRtree_,Be=this.strategy_(e,t,ke);for(let je=0,Ve=Be.length;je<Ve;++je){const Ze=Be[je];Ge.forEachInExtent(Ze,function(en){return containsExtent(en.extent,Ze)})||(++this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADSTART)),this.loader_.call(this,Ze,t,ke,en=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADEND,void 0,en))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new VectorSourceEvent(VectorEventType.FEATURESLOADERROR))}),Ge.insert(Ze,{extent:Ze.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(e){const t=this.loadedExtentsRtree_,ke=t.forEachInExtent(e,function(Ge){if(equals$1(Ge.extent,e))return Ge});ke&&t.remove(ke)}removeFeatures(e){let t=!1;for(let ke=0,Ge=e.length;ke<Ge;++ke)t=this.removeFeatureInternal(e[ke])||t;t&&this.changed()}removeFeature(e){if(!e)return;this.removeFeatureInternal(e)&&this.changed()}removeFeatureInternal(e){const t=getUid(e);if(!(t in this.uidIndex_))return!1;t in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[t]:this.featuresRtree_&&this.featuresRtree_.remove(e);const ke=this.featureChangeKeys_[t];ke==null||ke.forEach(unlistenByKey),delete this.featureChangeKeys_[t];const Ge=e.getId();if(Ge!==void 0){const Be=Ge.toString(),je=this.idIndex_[Be];je===e?delete this.idIndex_[Be]:Array.isArray(je)&&(je.splice(je.indexOf(e),1),je.length===1&&(this.idIndex_[Be]=je[0]))}return delete this.uidIndex_[t],this.hasListener(VectorEventType.REMOVEFEATURE)&&this.dispatchEvent(new VectorSourceEvent(VectorEventType.REMOVEFEATURE,e)),!0}removeFromIdIndex_(e){for(const t in this.idIndex_)if(this.idIndex_[t]===e){delete this.idIndex_[t];break}}setLoader(e){this.loader_=e}setUrl(e){assert(this.format_,"`format` must be set when `url` is set"),this.url_=e,this.setLoader(xhr(e,this.format_))}setOverlaps(e){this.overlaps_=e,this.changed()}}const ImageState={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class ImageWrapper extends Target{constructor(e,t,ke,Ge){super(),this.extent=e,this.pixelRatio_=ke,this.resolution=t,this.state=typeof Ge=="function"?ImageState.IDLE:Ge,this.image_=null,this.loader=typeof Ge=="function"?Ge:null}changed(){this.dispatchEvent(EventType.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==ImageState.IDLE&&this.loader){this.state=ImageState.LOADING,this.changed();const e=this.getResolution(),t=Array.isArray(e)?e[0]:e;toPromise(()=>this.loader(this.getExtent(),t,this.getPixelRatio())).then(ke=>{"image"in ke&&(this.image_=ke.image),"extent"in ke&&(this.extent=ke.extent),"resolution"in ke&&(this.resolution=ke.resolution),"pixelRatio"in ke&&(this.pixelRatio_=ke.pixelRatio),(ke instanceof HTMLImageElement||ke instanceof ImageBitmap||ke instanceof HTMLCanvasElement||ke instanceof HTMLVideoElement)&&(this.image_=ke),this.state=ImageState.LOADED}).catch(ke=>{this.state=ImageState.ERROR,console.error(ke)}).finally(()=>this.changed())}}setImage(e){this.image_=e}setResolution(e){this.resolution=e}}function listenImage(Oe,e,t){const ke=Oe;let Ge=!0,Be=!1,je=!1;const Ve=[listenOnce(ke,EventType.LOAD,function(){je=!0,Be||e()})];return ke.src&&IMAGE_DECODE?(Be=!0,ke.decode().then(function(){Ge&&e()}).catch(function(Ze){Ge&&(je?e():t())})):Ve.push(listenOnce(ke,EventType.ERROR,t)),function(){Ge=!1,Ve.forEach(unlistenByKey)}}function load(Oe,e){return new Promise((t,ke)=>{function Ge(){je(),t(Oe)}function Be(){je(),ke(new Error("Image load error"))}function je(){Oe.removeEventListener("load",Ge),Oe.removeEventListener("error",Be)}Oe.addEventListener("load",Ge),Oe.addEventListener("error",Be)})}function decodeFallback(Oe,e){return e&&(Oe.src=e),Oe.src&&IMAGE_DECODE?new Promise((t,ke)=>Oe.decode().then(()=>t(Oe)).catch(Ge=>Oe.complete&&Oe.width?t(Oe):ke(Ge))):load(Oe)}function decode$1(Oe,e){return e&&(Oe.src=e),Oe.src&&IMAGE_DECODE&&CREATE_IMAGE_BITMAP?Oe.decode().then(()=>createImageBitmap(Oe)).catch(t=>{if(Oe.complete&&Oe.width)return Oe;throw t}):decodeFallback(Oe)}class ImageTile extends Tile{constructor(e,t,ke,Ge,Be,je){super(e,t,je),this.crossOrigin_=Ge,this.src_=ke,this.key=ke,this.image_=new Image,Ge!==null&&(this.image_.crossOrigin=Ge),this.unlisten_=null,this.tileLoadFunction_=Be}getImage(){return this.image_}setImage(e){this.image_=e,this.state=TileState.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=TileState.ERROR,this.unlistenImage_(),this.image_=getBlankImage(),this.changed()}handleImageLoad_(){const e=this.image_;e.naturalWidth&&e.naturalHeight?this.state=TileState.LOADED:this.state=TileState.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==TileState.ERROR&&(this.state=TileState.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==TileState.IDLE&&(this.state=TileState.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function getBlankImage(){const Oe=createCanvasContext2D(1,1);return Oe.fillStyle="rgba(0,0,0,0)",Oe.fillRect(0,0,1,1),Oe.canvas}const ERROR_THRESHOLD=.5,MAX_SUBDIVISION=10,MAX_TRIANGLE_WIDTH=.25;class Triangulation{constructor(e,t,ke,Ge,Be,je,Ve){this.sourceProj_=e,this.targetProj_=t;let Ze={};const Qe=Ve?createTransformFromCoordinateTransform(yn=>apply(Ve,transform$1(yn,this.targetProj_,this.sourceProj_))):getTransform(this.targetProj_,this.sourceProj_);this.transformInv_=function(yn){const vn=yn[0]+"/"+yn[1];return Ze[vn]||(Ze[vn]=Qe(yn)),Ze[vn]},this.maxSourceExtent_=Ge,this.errorThresholdSquared_=Be*Be,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!Ge&&!!this.sourceProj_.getExtent()&&getWidth(Ge)>=getWidth(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?getWidth(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?getWidth(this.targetProj_.getExtent()):null;const en=getTopLeft(ke),tn=getTopRight(ke),an=getBottomRight(ke),cn=getBottomLeft(ke),un=this.transformInv_(en),dn=this.transformInv_(tn),fn=this.transformInv_(an),pn=this.transformInv_(cn),gn=MAX_SUBDIVISION+(je?Math.max(0,Math.ceil(Math.log2(getArea$1(ke)/(je*je*256*256)))):0);if(this.addQuad_(en,tn,an,cn,un,dn,fn,pn,gn),this.wrapsXInSource_){let yn=1/0;this.triangles_.forEach(function(vn,An,xn){yn=Math.min(yn,vn.source[0][0],vn.source[1][0],vn.source[2][0])}),this.triangles_.forEach(vn=>{if(Math.max(vn.source[0][0],vn.source[1][0],vn.source[2][0])-yn>this.sourceWorldWidth_/2){const An=[[vn.source[0][0],vn.source[0][1]],[vn.source[1][0],vn.source[1][1]],[vn.source[2][0],vn.source[2][1]]];An[0][0]-yn>this.sourceWorldWidth_/2&&(An[0][0]-=this.sourceWorldWidth_),An[1][0]-yn>this.sourceWorldWidth_/2&&(An[1][0]-=this.sourceWorldWidth_),An[2][0]-yn>this.sourceWorldWidth_/2&&(An[2][0]-=this.sourceWorldWidth_);const xn=Math.min(An[0][0],An[1][0],An[2][0]);Math.max(An[0][0],An[1][0],An[2][0])-xn<this.sourceWorldWidth_/2&&(vn.source=An)}})}Ze={}}addTriangle_(e,t,ke,Ge,Be,je){this.triangles_.push({source:[Ge,Be,je],target:[e,t,ke]})}addQuad_(e,t,ke,Ge,Be,je,Ve,Ze,Qe){const en=boundingExtent([Be,je,Ve,Ze]),tn=this.sourceWorldWidth_?getWidth(en)/this.sourceWorldWidth_:null,an=this.sourceWorldWidth_,cn=this.sourceProj_.canWrapX()&&tn>.5&&tn<1;let un=!1;if(Qe>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const fn=boundingExtent([e,t,ke,Ge]);un=getWidth(fn)/this.targetWorldWidth_>MAX_TRIANGLE_WIDTH||un}!cn&&this.sourceProj_.isGlobal()&&tn&&(un=tn>MAX_TRIANGLE_WIDTH||un)}if(!un&&this.maxSourceExtent_&&isFinite(en[0])&&isFinite(en[1])&&isFinite(en[2])&&isFinite(en[3])&&!intersects$1(en,this.maxSourceExtent_))return;let dn=0;if(!un&&(!isFinite(Be[0])||!isFinite(Be[1])||!isFinite(je[0])||!isFinite(je[1])||!isFinite(Ve[0])||!isFinite(Ve[1])||!isFinite(Ze[0])||!isFinite(Ze[1]))){if(Qe>0)un=!0;else if(dn=(!isFinite(Be[0])||!isFinite(Be[1])?8:0)+(!isFinite(je[0])||!isFinite(je[1])?4:0)+(!isFinite(Ve[0])||!isFinite(Ve[1])?2:0)+(!isFinite(Ze[0])||!isFinite(Ze[1])?1:0),dn!=1&&dn!=2&&dn!=4&&dn!=8)return}if(Qe>0){if(!un){const fn=[(e[0]+ke[0])/2,(e[1]+ke[1])/2],pn=this.transformInv_(fn);let gn;cn?gn=(modulo(Be[0],an)+modulo(Ve[0],an))/2-modulo(pn[0],an):gn=(Be[0]+Ve[0])/2-pn[0];const yn=(Be[1]+Ve[1])/2-pn[1];un=gn*gn+yn*yn>this.errorThresholdSquared_}if(un){if(Math.abs(e[0]-ke[0])<=Math.abs(e[1]-ke[1])){const fn=[(t[0]+ke[0])/2,(t[1]+ke[1])/2],pn=this.transformInv_(fn),gn=[(Ge[0]+e[0])/2,(Ge[1]+e[1])/2],yn=this.transformInv_(gn);this.addQuad_(e,t,fn,gn,Be,je,pn,yn,Qe-1),this.addQuad_(gn,fn,ke,Ge,yn,pn,Ve,Ze,Qe-1)}else{const fn=[(e[0]+t[0])/2,(e[1]+t[1])/2],pn=this.transformInv_(fn),gn=[(ke[0]+Ge[0])/2,(ke[1]+Ge[1])/2],yn=this.transformInv_(gn);this.addQuad_(e,fn,gn,Ge,Be,pn,yn,Ze,Qe-1),this.addQuad_(fn,t,ke,gn,pn,je,Ve,yn,Qe-1)}return}}if(cn){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}dn&11||this.addTriangle_(e,ke,Ge,Be,Ve,Ze),dn&14||this.addTriangle_(e,ke,t,Be,Ve,je),dn&&(dn&13||this.addTriangle_(t,Ge,e,je,Ze,Be),dn&7||this.addTriangle_(t,Ge,ke,je,Ze,Ve))}calculateSourceExtent(){const e=createEmpty();return this.triangles_.forEach(function(t,ke,Ge){const Be=t.source;extendCoordinate(e,Be[0]),extendCoordinate(e,Be[1]),extendCoordinate(e,Be[2])}),e}getTriangles(){return this.triangles_}}let brokenDiagonalRendering_;const canvasPool$1=[];function drawTestTriangle(Oe,e,t,ke,Ge){Oe.beginPath(),Oe.moveTo(0,0),Oe.lineTo(e,t),Oe.lineTo(ke,Ge),Oe.closePath(),Oe.save(),Oe.clip(),Oe.fillRect(0,0,Math.max(e,ke)+1,Math.max(t,Ge)),Oe.restore()}function verifyBrokenDiagonalRendering(Oe,e){return Math.abs(Oe[e*4]-210)>2||Math.abs(Oe[e*4+3]-.75*255)>2}function isBrokenDiagonalRendering(){if(brokenDiagonalRendering_===void 0){const Oe=createCanvasContext2D(6,6,canvasPool$1);Oe.globalCompositeOperation="lighter",Oe.fillStyle="rgba(210, 0, 0, 0.75)",drawTestTriangle(Oe,4,5,4,0),drawTestTriangle(Oe,4,5,0,5);const e=Oe.getImageData(0,0,3,3).data;brokenDiagonalRendering_=verifyBrokenDiagonalRendering(e,0)||verifyBrokenDiagonalRendering(e,4)||verifyBrokenDiagonalRendering(e,8),releaseCanvas(Oe),canvasPool$1.push(Oe.canvas)}return brokenDiagonalRendering_}function calculateSourceResolution(Oe,e,t,ke){const Ge=transform$1(t,e,Oe);let Be=getPointResolution(e,ke,t);const je=e.getMetersPerUnit();je!==void 0&&(Be*=je);const Ve=Oe.getMetersPerUnit();Ve!==void 0&&(Be/=Ve);const Ze=Oe.getExtent();if(!Ze||containsCoordinate(Ze,Ge)){const Qe=getPointResolution(Oe,Be,Ge)/Be;isFinite(Qe)&&Qe>0&&(Be/=Qe)}return Be}function calculateSourceExtentResolution(Oe,e,t,ke){const Ge=getCenter(t);let Be=calculateSourceResolution(Oe,e,Ge,ke);return(!isFinite(Be)||Be<=0)&&forEachCorner(t,function(je){return Be=calculateSourceResolution(Oe,e,je,ke),isFinite(Be)&&Be>0}),Be}function render$1(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn){const un=createCanvasContext2D(Math.round(t*Oe),Math.round(t*e),canvasPool$1);if(tn||(un.imageSmoothingEnabled=!1),Ze.length===0)return un.canvas;un.scale(t,t);function dn(An){return Math.round(An*t)/t}un.globalCompositeOperation="lighter";const fn=createEmpty();Ze.forEach(function(An,xn,wn){extend$3(fn,An.extent)});let pn;const gn=t/ke,yn=(tn?1:1+Math.pow(2,-24))/gn;(!an||Ze.length!==1||Qe!==0)&&(pn=createCanvasContext2D(Math.round(getWidth(fn)*gn),Math.round(getHeight(fn)*gn),canvasPool$1),tn||(pn.imageSmoothingEnabled=!1),Ze.forEach(function(An,xn,wn){if(An.image.width>0&&An.image.height>0){if(An.clipExtent){pn.save();const Cn=(An.clipExtent[0]-fn[0])*gn,Rn=-(An.clipExtent[3]-fn[3])*gn,Tn=getWidth(An.clipExtent)*gn,Nn=getHeight(An.clipExtent)*gn;pn.rect(tn?Cn:Math.round(Cn),tn?Rn:Math.round(Rn),tn?Tn:Math.round(Cn+Tn)-Math.round(Cn),tn?Nn:Math.round(Rn+Nn)-Math.round(Rn)),pn.clip()}const bn=(An.extent[0]-fn[0])*gn,Mn=-(An.extent[3]-fn[3])*gn,Pn=getWidth(An.extent)*gn,En=getHeight(An.extent)*gn;pn.drawImage(An.image,Qe,Qe,An.image.width-2*Qe,An.image.height-2*Qe,tn?bn:Math.round(bn),tn?Mn:Math.round(Mn),tn?Pn:Math.round(bn+Pn)-Math.round(bn),tn?En:Math.round(Mn+En)-Math.round(Mn)),An.clipExtent&&pn.restore()}}));const vn=getTopLeft(je);return Ve.getTriangles().forEach(function(An,xn,wn){const bn=An.source,Mn=An.target;let Pn=bn[0][0],En=bn[0][1],Cn=bn[1][0],Rn=bn[1][1],Tn=bn[2][0],Nn=bn[2][1];const Gn=dn((Mn[0][0]-vn[0])/Be),zn=dn(-(Mn[0][1]-vn[1])/Be),$n=dn((Mn[1][0]-vn[0])/Be),Qn=dn(-(Mn[1][1]-vn[1])/Be),Hn=dn((Mn[2][0]-vn[0])/Be),Ni=dn(-(Mn[2][1]-vn[1])/Be),On=Pn,qn=En;Pn=0,En=0,Cn-=On,Rn-=qn,Tn-=On,Nn-=qn;const Un=[[Cn,Rn,0,0,$n-Gn],[Tn,Nn,0,0,Hn-Gn],[0,0,Cn,Rn,Qn-zn],[0,0,Tn,Nn,Ni-zn]],Ci=solveLinearSystem(Un);if(!Ci)return;if(un.save(),un.beginPath(),isBrokenDiagonalRendering()||!tn){un.moveTo($n,Qn);const _i=4,Ii=Gn-$n,Li=zn-Qn;for(let Ri=0;Ri<_i;Ri++)un.lineTo($n+dn((Ri+1)*Ii/_i),Qn+dn(Ri*Li/(_i-1))),Ri!=_i-1&&un.lineTo($n+dn((Ri+1)*Ii/_i),Qn+dn((Ri+1)*Li/(_i-1)));un.lineTo(Hn,Ni)}else un.moveTo($n,Qn),un.lineTo(Gn,zn),un.lineTo(Hn,Ni);un.clip(),un.transform(Ci[0],Ci[2],Ci[1],Ci[3],Gn,zn),un.translate(fn[0]-On,fn[3]-qn);let Si;if(pn)Si=pn.canvas,un.scale(yn,-yn);else{const _i=Ze[0],Ii=_i.extent;Si=_i.image,un.scale(getWidth(Ii)/Si.width,-getHeight(Ii)/Si.height)}un.drawImage(Si,0,0),un.restore()}),pn&&(releaseCanvas(pn),canvasPool$1.push(pn.canvas)),en&&(un.save(),un.globalCompositeOperation="source-over",un.strokeStyle="black",un.lineWidth=1,Ve.getTriangles().forEach(function(An,xn,wn){const bn=An.target,Mn=(bn[0][0]-vn[0])/Be,Pn=-(bn[0][1]-vn[1])/Be,En=(bn[1][0]-vn[0])/Be,Cn=-(bn[1][1]-vn[1])/Be,Rn=(bn[2][0]-vn[0])/Be,Tn=-(bn[2][1]-vn[1])/Be;un.beginPath(),un.moveTo(En,Cn),un.lineTo(Mn,Pn),un.lineTo(Rn,Tn),un.closePath(),un.stroke()}),un.restore()),un.canvas}class ReprojTile extends Tile{constructor(e,t,ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an){super(Be,TileState.IDLE,an),this.renderEdges_=tn!==void 0?tn:!1,this.pixelRatio_=Ve,this.gutter_=Ze,this.canvas_=null,this.sourceTileGrid_=t,this.targetTileGrid_=Ge,this.wrappedTileCoord_=je||Be,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=e.canWrapX()?e.getExtent():void 0;const cn=Ge.getTileCoordExtent(this.wrappedTileCoord_),un=this.targetTileGrid_.getExtent();let dn=this.sourceTileGrid_.getExtent();const fn=un?getIntersection(cn,un):cn;if(getArea$1(fn)===0){this.state=TileState.EMPTY;return}const pn=e.getExtent();pn&&(dn?dn=getIntersection(dn,pn):dn=pn);const gn=Ge.getResolution(this.wrappedTileCoord_[0]),yn=calculateSourceExtentResolution(e,ke,fn,gn);if(!isFinite(yn)||yn<=0){this.state=TileState.EMPTY;return}const vn=en!==void 0?en:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(e,ke,fn,dn,yn*vn,gn),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=t.getZForResolution(yn);let An=this.triangulation_.calculateSourceExtent();if(dn&&(e.canWrapX()?(An[1]=clamp(An[1],dn[1],dn[3]),An[3]=clamp(An[3],dn[1],dn[3])):An=getIntersection(An,dn)),!getArea$1(An))this.state=TileState.EMPTY;else{let xn=0,wn=0;e.canWrapX()&&(xn=getWidth(pn),wn=Math.floor((An[0]-pn[0])/xn)),wrapAndSliceX(An.slice(),e,!0).forEach(Mn=>{const Pn=t.getTileRangeForExtentAndZ(Mn,this.sourceZ_);for(let En=Pn.minX;En<=Pn.maxX;En++)for(let Cn=Pn.minY;Cn<=Pn.maxY;Cn++){const Rn=Qe(this.sourceZ_,En,Cn,Ve);if(Rn){const Tn=wn*xn;this.sourceTiles_.push({tile:Rn,offset:Tn})}}++wn}),this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getImage(){return this.canvas_}reproject_(){const e=[];if(this.sourceTiles_.forEach(t=>{var Ge;const ke=t.tile;if(ke&&ke.getState()==TileState.LOADED){const Be=this.sourceTileGrid_.getTileCoordExtent(ke.tileCoord);Be[0]+=t.offset,Be[2]+=t.offset;const je=(Ge=this.clipExtent_)==null?void 0:Ge.slice();je&&(je[0]+=t.offset,je[2]+=t.offset),e.push({extent:Be,clipExtent:je,image:ke.getImage()})}}),this.sourceTiles_.length=0,e.length===0)this.state=TileState.ERROR;else{const t=this.wrappedTileCoord_[0],ke=this.targetTileGrid_.getTileSize(t),Ge=typeof ke=="number"?ke:ke[0],Be=typeof ke=="number"?ke:ke[1],je=this.targetTileGrid_.getResolution(t),Ve=this.sourceTileGrid_.getResolution(this.sourceZ_),Ze=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=render$1(Ge,Be,this.pixelRatio_,Ve,this.sourceTileGrid_.getExtent(),je,Ze,this.triangulation_,e,this.gutter_,this.renderEdges_,this.interpolate),this.state=TileState.LOADED}this.changed()}load(){if(this.state==TileState.IDLE){this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const ke=t.getState();if(ke==TileState.IDLE||ke==TileState.LOADING){e++;const Ge=listen(t,EventType.CHANGE,Be=>{const je=t.getState();(je==TileState.LOADED||je==TileState.ERROR||je==TileState.EMPTY)&&(unlistenByKey(Ge),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(Ge)}}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t},ke,Ge){t.getState()==TileState.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&(releaseCanvas(this.canvas_.getContext("2d")),canvasPool$1.push(this.canvas_),this.canvas_=null),super.release()}}class TileImage extends UrlTile{constructor(e){super({attributions:e.attributions,cacheSize:e.cacheSize,projection:e.projection,state:e.state,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction?e.tileLoadFunction:defaultTileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:e.tileUrlFunction,url:e.url,urls:e.urls,wrapX:e.wrapX,transition:e.transition,interpolate:e.interpolate!==void 0?e.interpolate:!0,key:e.key,attributionsCollapsible:e.attributionsCollapsible,zDirection:e.zDirection}),this.crossOrigin=e.crossOrigin!==void 0?e.crossOrigin:null,this.tileClass=e.tileClass!==void 0?e.tileClass:ImageTile,this.tileGridForProjection={},this.reprojectionErrorThreshold_=e.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(e){return this.getProjection()&&e&&!equivalent(this.getProjection(),e)?0:this.getGutter()}getGutter(){return 0}getKey(){let e=super.getKey();return this.getInterpolate()||(e+=":disable-interpolation"),e}getTileGridForProjection(e){const t=this.getProjection();if(this.tileGrid&&(!t||equivalent(t,e)))return this.tileGrid;const ke=getUid(e);return ke in this.tileGridForProjection||(this.tileGridForProjection[ke]=getForProjection(e)),this.tileGridForProjection[ke]}createTile_(e,t,ke,Ge,Be,je){const Ve=[e,t,ke],Ze=this.getTileCoordForTileUrlFunction(Ve,Be),Qe=Ze?this.tileUrlFunction(Ze,Ge,Be):void 0,en=new this.tileClass(Ve,Qe!==void 0?TileState.IDLE:TileState.EMPTY,Qe!==void 0?Qe:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return en.key=je,en.addEventListener(EventType.CHANGE,this.handleTileChange.bind(this)),en}getTile(e,t,ke,Ge,Be){const je=this.getProjection();if(!je||!Be||equivalent(je,Be))return this.getTileInternal(e,t,ke,Ge,je||Be);const Ve=[e,t,ke],Ze=this.getKey(),Qe=this.getTileGridForProjection(je),en=this.getTileGridForProjection(Be),tn=this.getTileCoordForTileUrlFunction(Ve,Be),an=new ReprojTile(je,Qe,Be,en,Ve,tn,this.getTilePixelRatio(Ge),this.getGutter(),(cn,un,dn,fn)=>this.getTileInternal(cn,un,dn,fn,je),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return an.key=Ze,an}getTileInternal(e,t,ke,Ge,Be){const je=this.getKey();return this.createTile_(e,t,ke,Ge,Be,je)}setRenderReprojectionEdges(e){this.renderReprojectionEdges_!=e&&(this.renderReprojectionEdges_=e,this.changed())}setTileGridForProjection(e,t){const ke=get$3(e);if(ke){const Ge=getUid(ke);Ge in this.tileGridForProjection||(this.tileGridForProjection[Ge]=t)}}}function defaultTileLoadFunction(Oe,e){Oe.getImage().src=e}const DECIMALS=4;function fromResolutionLike(Oe){return Array.isArray(Oe)?Math.min(...Oe):Oe}class ReprojImage extends ImageWrapper{constructor(e,t,ke,Ge,Be,je,Ve){let Ze=e.getExtent();Ze&&e.canWrapX()&&(Ze=Ze.slice(),Ze[0]=-1/0,Ze[2]=1/0);let Qe=t.getExtent();Qe&&t.canWrapX()&&(Qe=Qe.slice(),Qe[0]=-1/0,Qe[2]=1/0);const en=Qe?getIntersection(ke,Qe):ke,tn=getCenter(en),an=calculateSourceResolution(e,t,tn,Ge),cn=ERROR_THRESHOLD,un=new Triangulation(e,t,en,Ze,an*cn,Ge),dn=un.calculateSourceExtent(),fn=isEmpty(dn)?null:je(dn,an,Be),pn=fn?ImageState.IDLE:ImageState.EMPTY,gn=fn?fn.getPixelRatio():1;super(ke,Ge,gn,pn),this.targetProj_=t,this.maxSourceExtent_=Ze,this.triangulation_=un,this.targetResolution_=Ge,this.targetExtent_=ke,this.sourceImage_=fn,this.sourcePixelRatio_=gn,this.interpolate_=Ve,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==ImageState.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const e=this.sourceImage_.getState();if(e==ImageState.LOADED){const t=getWidth(this.targetExtent_)/this.targetResolution_,ke=getHeight(this.targetExtent_)/this.targetResolution_;this.canvas_=render$1(t,ke,this.sourcePixelRatio_,fromResolutionLike(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=e,this.changed()}load(){if(this.state==ImageState.IDLE){this.state=ImageState.LOADING,this.changed();const e=this.sourceImage_.getState();e==ImageState.LOADED||e==ImageState.ERROR?this.reproject_():(this.sourceListenerKey_=listen(this.sourceImage_,EventType.CHANGE,t=>{const ke=this.sourceImage_.getState();(ke==ImageState.LOADED||ke==ImageState.ERROR)&&(this.unlistenSource_(),this.reproject_())}),this.sourceImage_.load())}}unlistenSource_(){unlistenByKey(this.sourceListenerKey_),this.sourceListenerKey_=null}}const ImageSourceEventType={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class ImageSourceEvent extends BaseEvent{constructor(e,t){super(e),this.image=t}}class ImageSource extends Source{constructor(e){super({attributions:e.attributions,projection:e.projection,state:e.state,interpolate:e.interpolate!==void 0?e.interpolate:!0}),this.on,this.once,this.un,this.loader=e.loader||null,this.resolutions_=e.resolutions!==void 0?e.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=e.loader?e.loader.length===0:!1,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(e){this.resolutions_=e}findNearestResolution(e){const t=this.getResolutions();if(t){const ke=linearFindNearest(t,e,0);e=t[ke]}return e}getImage(e,t,ke,Ge){const Be=this.getProjection();if(!Be||!Ge||equivalent(Be,Ge))return Be&&(Ge=Be),this.getImageInternal(e,t,ke,Ge);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&equivalent(this.reprojectedImage_.getProjection(),Ge)&&this.reprojectedImage_.getResolution()==t&&equals$1(this.reprojectedImage_.getExtent(),e))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new ReprojImage(Be,Ge,e,t,ke,(je,Ve,Ze)=>this.getImageInternal(je,Ve,Ze,Be),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(e,t,ke,Ge){if(this.loader){const Be=getRequestExtent(e,t,ke,1),je=this.findNearestResolution(t);if(this.image&&(this.static_||this.wantedProjection_===Ge&&(this.wantedExtent_&&containsExtent(this.wantedExtent_,Be)||containsExtent(this.image.getExtent(),Be))&&(this.wantedResolution_&&fromResolutionLike(this.wantedResolution_)===je||fromResolutionLike(this.image.getResolution())===je)))return this.image;this.wantedProjection_=Ge,this.wantedExtent_=Be,this.wantedResolution_=je,this.image=new ImageWrapper(Be,je,ke,this.loader),this.image.addEventListener(EventType.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(e){const t=e.target;let ke;switch(t.getState()){case ImageState.LOADING:this.loading=!0,ke=ImageSourceEventType.IMAGELOADSTART;break;case ImageState.LOADED:this.loading=!1,ke=ImageSourceEventType.IMAGELOADEND;break;case ImageState.ERROR:this.loading=!1,ke=ImageSourceEventType.IMAGELOADERROR;break;default:return}this.hasListener(ke)&&this.dispatchEvent(new ImageSourceEvent(ke,t))}}function defaultImageLoadFunction(Oe,e){Oe.getImage().src=e}function getRequestExtent(Oe,e,t,ke){const Ge=e/t,Be=getCenter(Oe),je=ceil(getWidth(Oe)/Ge,DECIMALS),Ve=ceil(getHeight(Oe)/Ge,DECIMALS),Ze=ceil((ke-1)*je/2,DECIMALS),Qe=je+2*Ze,en=ceil((ke-1)*Ve/2,DECIMALS),tn=Ve+2*en;return getForViewAndSize(Be,Ge,0,[Qe,tn])}const DEFAULT_VERSION="1.3.0",GETFEATUREINFO_IMAGE_SIZE=[101,101];function getRequestUrl(Oe,e,t,ke,Ge){Ge.WIDTH=t[0],Ge.HEIGHT=t[1];const Be=ke.getAxisOrientation(),je=compareVersions(Ge.VERSION,"1.3")>=0;Ge[je?"CRS":"SRS"]=ke.getCode();const Ve=je&&Be.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return Ge.BBOX=Ve.join(","),appendParams(Oe,Ge)}function getImageSrc(Oe,e,t,ke,Ge,Be,je){Be=Object.assign({REQUEST:"GetMap"},Be);const Ve=e/t,Ze=[round(getWidth(Oe)/Ve,DECIMALS),round(getHeight(Oe)/Ve,DECIMALS)];if(t!=1)switch(je){case"geoserver":const en=90*t+.5|0;"FORMAT_OPTIONS"in Be?Be.FORMAT_OPTIONS+=";dpi:"+en:Be.FORMAT_OPTIONS="dpi:"+en;break;case"mapserver":Be.MAP_RESOLUTION=90*t;break;case"carmentaserver":case"qgis":Be.DPI=90*t;break;default:throw new Error("Unknown `serverType` configured")}return getRequestUrl(Ge,Oe,Ze,ke,Be)}function getRequestParams(Oe,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:DEFAULT_VERSION,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},Oe)}function createLoader(Oe){const e=Oe.hidpi===void 0?!0:Oe.hidpi,t=get$3(Oe.projection||"EPSG:3857"),ke=Oe.ratio||1.5,Ge=Oe.load||decode$1,Be=Oe.crossOrigin??null;return(je,Ve,Ze)=>{je=getRequestExtent(je,Ve,Ze,ke),Ze!=1&&(!e||Oe.serverType===void 0)&&(Ze=1);const Qe=getImageSrc(je,Ve,Ze,t,Oe.url,getRequestParams(Oe.params,"GetMap"),Oe.serverType),en=new Image;return en.crossOrigin=Be,Ge(en,Qe).then(tn=>({image:tn,extent:je,pixelRatio:Ze}))}}function getFeatureInfoUrl(Oe,e,t){if(Oe.url===void 0)return;const ke=get$3(Oe.projection||"EPSG:3857"),Ge=getForViewAndSize(e,t,0,GETFEATUREINFO_IMAGE_SIZE),Be={QUERY_LAYERS:Oe.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(Be,getRequestParams(Oe.params,"GetFeatureInfo"),Oe.params);const je=floor((e[0]-Ge[0])/t,DECIMALS),Ve=floor((Ge[3]-e[1])/t,DECIMALS),Ze=compareVersions(Be.VERSION,"1.3")>=0;return Be[Ze?"I":"X"]=je,Be[Ze?"J":"Y"]=Ve,getRequestUrl(Oe.url,Ge,GETFEATUREINFO_IMAGE_SIZE,ke,Be)}function getLegendUrl(Oe,e){if(Oe.url===void 0)return;const t={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(e!==void 0){const ke=get$3(Oe.projection||"EPSG:3857").getMetersPerUnit()||1,Ge=28e-5;t.SCALE=e*ke/Ge}if(Object.assign(t,Oe.params),Oe.params!==void 0&&t.LAYER===void 0){const ke=t.LAYERS;if(!(!Array.isArray(ke)||ke.length!==1))return;t.LAYER=ke}return appendParams(Oe.url,t)}class TileWMS extends TileImage{constructor(e){e=e||{};const t=Object.assign({},e.params);super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:e.tileGrid,tileLoadFunction:e.tileLoadFunction,url:e.url,urls:e.urls,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.gutter_=e.gutter!==void 0?e.gutter:0,this.params_=t,this.v13_=!0,this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.tmpExtent_=createEmpty(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(e,t,ke,Ge){const Be=get$3(ke),je=this.getProjection()||Be;let Ve=this.getTileGrid();Ve||(Ve=this.getTileGridForProjection(je));const Ze=transform$1(e,Be,je),Qe=calculateSourceResolution(je,Be,e,t),en=Ve.getZForResolution(Qe,this.zDirection),tn=Ve.getResolution(en),an=Ve.getTileCoordForCoordAndZ(Ze,en);if(Ve.getResolutions().length<=an[0])return;let cn=Ve.getTileCoordExtent(an,this.tmpExtent_);const un=this.gutter_;un!==0&&(cn=buffer(cn,tn*un,cn));const dn={QUERY_LAYERS:this.params_.LAYERS};Object.assign(dn,getRequestParams(this.params_,"GetFeatureInfo"),Ge);const fn=Math.floor((Ze[0]-cn[0])/tn),pn=Math.floor((cn[3]-Ze[1])/tn);return dn[this.v13_?"I":"X"]=fn,dn[this.v13_?"J":"Y"]=pn,this.getRequestUrl_(an,cn,1,je||Be,dn)}getLegendUrl(e,t){if(this.urls[0]===void 0)return;const ke={SERVICE:"WMS",VERSION:DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(t===void 0||t.LAYER===void 0){const Ge=this.params_.LAYERS;if(!(!Array.isArray(Ge)||Ge.length===1))return;ke.LAYER=Ge}if(e!==void 0){const Ge=this.getProjection()?this.getProjection().getMetersPerUnit():1,Be=28e-5;ke.SCALE=e*Ge/Be}return Object.assign(ke,t),appendParams(this.urls[0],ke)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(e,t,ke,Ge,Be){const je=this.urls;if(!je)return;let Ve;if(je.length==1)Ve=je[0];else{const Ze=modulo(hash(e),je.length);Ve=je[Ze]}return getImageSrc(t,(this.tileGrid||this.getTileGridForProjection(Ge)).getResolution(e[0]),ke,Ge,Ve,Be,this.serverType_)}getTilePixelRatio(e){return!this.hidpi_||this.serverType_===void 0?1:e}getKeyForParams_(){let e=0;const t=[];for(const ke in this.params_)t[e++]=ke+"-"+this.params_[ke];return t.join("/")}updateParams(e){Object.assign(this.params_,e),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const e=this.params_.VERSION||DEFAULT_VERSION;this.v13_=compareVersions(e,"1.3")>=0}tileUrlFunction(e,t,ke){let Ge=this.getTileGrid();if(Ge||(Ge=this.getTileGridForProjection(ke)),Ge.getResolutions().length<=e[0])return;t!=1&&(!this.hidpi_||this.serverType_===void 0)&&(t=1);const Be=Ge.getResolution(e[0]);let je=Ge.getTileCoordExtent(e,this.tmpExtent_);const Ve=this.gutter_;Ve!==0&&(je=buffer(je,Be*Ve,je));const Ze=Object.assign({},getRequestParams(this.params_,"GetMap"));return this.getRequestUrl_(e,je,t,ke,Ze)}}let WMTS$1=class extends TileImage{constructor(e){const t=e.requestEncoding!==void 0?e.requestEncoding:"KVP",ke=e.tileGrid;let Ge=e.urls;Ge===void 0&&e.url!==void 0&&(Ge=expandUrl(e.url)),super({attributions:e.attributions,attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:ke,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,urls:Ge,wrapX:e.wrapX!==void 0?e.wrapX:!1,transition:e.transition,zDirection:e.zDirection}),this.version_=e.version!==void 0?e.version:"1.0.0",this.format_=e.format!==void 0?e.format:"image/jpeg",this.dimensions_=e.dimensions!==void 0?e.dimensions:{},this.layer_=e.layer,this.matrixSet_=e.matrixSet,this.style_=e.style,this.requestEncoding_=t,this.setKey(this.getKeyForDimensions_()),Ge&&Ge.length>0&&(this.tileUrlFunction=createFromTileUrlFunctions(Ge.map(this.createFromWMTSTemplate.bind(this))))}setUrls(e){this.urls=e;const t=e.join(`
`);this.setTileUrlFunction(createFromTileUrlFunctions(e.map(this.createFromWMTSTemplate.bind(this))),t)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const e=this.urls?this.urls.slice(0):[];for(const t in this.dimensions_)e.push(t+"-"+this.dimensions_[t]);return e.join("/")}updateDimensions(e){Object.assign(this.dimensions_,e),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(e){const t=this.requestEncoding_,ke={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};t=="KVP"&&Object.assign(ke,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),e=t=="KVP"?appendParams(e,ke):e.replace(/\{(\w+?)\}/g,function(je,Ve){return Ve.toLowerCase()in ke?ke[Ve.toLowerCase()]:je});const Ge=this.tileGrid,Be=this.dimensions_;return function(je,Ve,Ze){if(!je)return;const Qe={TileMatrix:Ge.getMatrixId(je[0]),TileCol:je[1],TileRow:je[2]};Object.assign(Qe,Be);let en=e;return t=="KVP"?en=appendParams(en,Qe):en=en.replace(/\{(\w+?)\}/g,function(tn,an){return encodeURIComponent(Qe[an])}),en}}};class ImageWMS extends ImageSource{constructor(e){e=e||{},super({attributions:e.attributions,interpolate:e.interpolate,projection:e.projection,resolutions:e.resolutions}),this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null,this.url_=e.url,this.imageLoadFunction_=e.imageLoadFunction!==void 0?e.imageLoadFunction:defaultImageLoadFunction,this.params_=Object.assign({},e.params),this.serverType_=e.serverType,this.hidpi_=e.hidpi!==void 0?e.hidpi:!0,this.renderedRevision_=0,this.ratio_=e.ratio!==void 0?e.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(e,t,ke,Ge){const Be=get$3(ke),je=this.getProjection();je&&je!==Be&&(t=calculateSourceResolution(je,Be,e,t),e=transform$1(e,Be,je));const Ve={url:this.url_,params:{...this.params_,...Ge},projection:je||Be};return getFeatureInfoUrl(Ve,e,t)}getLegendUrl(e,t){return getLegendUrl({url:this.url_,params:{...this.params_,...t}},e)}getParams(){return this.params_}getImageInternal(e,t,ke,Ge){return this.url_===void 0?null:((!this.loader||this.loaderProjection_!==Ge)&&(this.loaderProjection_=Ge,this.loader=createLoader({crossOrigin:this.crossOrigin_,params:this.params_,projection:Ge,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(Be,je)=>(this.image.setImage(Be),this.imageLoadFunction_(this.image,je),decode$1(Be))})),super.getImageInternal(e,t,ke,Ge))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(e){this.imageLoadFunction_=e,this.changed()}setUrl(e){e!=this.url_&&(this.url_=e,this.loader=null,this.changed())}updateParams(e){Object.assign(this.params_,e),this.changed()}changed(){this.image=null,super.changed()}}const InteractionProperty={ACTIVE:"active"};class Interaction extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e&&e.handleEvent&&(this.handleEvent=e.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(InteractionProperty.ACTIVE)}getMap(){return this.map_}handleEvent(e){return!0}setActive(e){this.set(InteractionProperty.ACTIVE,e)}setMap(e){this.map_=e}}function pan(Oe,e,t){const ke=Oe.getCenterInternal();if(ke){const Ge=[ke[0]+e[0],ke[1]+e[1]];Oe.animateInternal({duration:t!==void 0?t:250,easing:linear,center:Oe.getConstrainedCenter(Ge)})}}function zoomByDelta(Oe,e,t,ke){const Ge=Oe.getZoom();if(Ge===void 0)return;const Be=Oe.getConstrainedZoom(Ge+e),je=Oe.getResolutionForZoom(Be);Oe.getAnimating()&&Oe.cancelAnimations(),Oe.animate({resolution:je,anchor:t,duration:ke!==void 0?ke:250,easing:easeOut})}const MapBrowserEventType={SINGLECLICK:"singleclick",CLICK:EventType.CLICK,DBLCLICK:EventType.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class DoubleClickZoom extends Interaction{constructor(e){super(),e=e||{},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:250}handleEvent(e){let t=!1;if(e.type==MapBrowserEventType.DBLCLICK){const ke=e.originalEvent,Ge=e.map,Be=e.coordinate,je=ke.shiftKey?-this.delta_:this.delta_,Ve=Ge.getView();zoomByDelta(Ve,je,Be,this.duration_),ke.preventDefault(),t=!0}return!t}}class PointerInteraction extends Interaction{constructor(e){e=e||{},super(e),e.handleDownEvent&&(this.handleDownEvent=e.handleDownEvent),e.handleDragEvent&&(this.handleDragEvent=e.handleDragEvent),e.handleMoveEvent&&(this.handleMoveEvent=e.handleMoveEvent),e.handleUpEvent&&(this.handleUpEvent=e.handleUpEvent),e.stopDown&&(this.stopDown=e.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(e){return!1}handleDragEvent(e){}handleEvent(e){if(!e.originalEvent)return!0;let t=!1;if(this.updateTrackedPointers_(e),this.handlingDownUpSequence){if(e.type==MapBrowserEventType.POINTERDRAG)this.handleDragEvent(e),e.originalEvent.preventDefault();else if(e.type==MapBrowserEventType.POINTERUP){const ke=this.handleUpEvent(e);this.handlingDownUpSequence=ke&&this.targetPointers.length>0}}else if(e.type==MapBrowserEventType.POINTERDOWN){const ke=this.handleDownEvent(e);this.handlingDownUpSequence=ke,t=this.stopDown(ke)}else e.type==MapBrowserEventType.POINTERMOVE&&this.handleMoveEvent(e);return!t}handleMoveEvent(e){}handleUpEvent(e){return!1}stopDown(e){return e}updateTrackedPointers_(e){e.activePointers&&(this.targetPointers=e.activePointers)}}function centroid(Oe){const e=Oe.length;let t=0,ke=0;for(let Ge=0;Ge<e;Ge++)t+=Oe[Ge].clientX,ke+=Oe[Ge].clientY;return{clientX:t/e,clientY:ke/e}}class RenderBox extends Disposable{constructor(e){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+e,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const e=this.startPixel_,t=this.endPixel_,ke="px",Ge=this.element_.style;Ge.left=Math.min(e[0],t[0])+ke,Ge.top=Math.min(e[1],t[1])+ke,Ge.width=Math.abs(t[0]-e[0])+ke,Ge.height=Math.abs(t[1]-e[1])+ke}setMap(e){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=e,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(e,t){this.startPixel_=e,this.endPixel_=t,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const e=this.startPixel_,t=this.endPixel_,Ge=[e,[e[0],t[1]],t,[t[0],e[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);Ge[4]=Ge[0].slice(),this.geometry_?this.geometry_.setCoordinates([Ge]):this.geometry_=new Polygon([Ge])}getGeometry(){return this.geometry_}}function all(Oe){const e=arguments;return function(t){let ke=!0;for(let Ge=0,Be=e.length;Ge<Be&&(ke=ke&&e[Ge](t),!!ke);++Ge);return ke}}const altKeyOnly=function(Oe){const e=Oe.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},altShiftKeysOnly=function(Oe){const e=Oe.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},focus=function(Oe){const e=Oe.map.getTargetElement(),t=e.getRootNode(),ke=Oe.map.getOwnerDocument().activeElement;return t instanceof ShadowRoot?t.host.contains(ke):e.contains(ke)},focusWithTabindex=function(Oe){const e=Oe.map.getTargetElement(),t=e.getRootNode();return(t instanceof ShadowRoot?t.host:e).hasAttribute("tabindex")?focus(Oe):!0},always$1=TRUE,mouseActionButton=function(Oe){const e=Oe.originalEvent;return e.button==0&&!(WEBKIT&&MAC&&e.ctrlKey)},never=FALSE,pointerMove=function(Oe){return Oe.type=="pointermove"},singleClick=function(Oe){return Oe.type==MapBrowserEventType.SINGLECLICK},noModifierKeys=function(Oe){const e=Oe.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},platformModifierKey=function(Oe){const e=Oe.originalEvent;return MAC?e.metaKey:e.ctrlKey},shiftKeyOnly=function(Oe){const e=Oe.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},targetNotEditable=function(Oe){const e=Oe.originalEvent,t=e.target.tagName;return t!=="INPUT"&&t!=="SELECT"&&t!=="TEXTAREA"&&!e.target.isContentEditable},mouseOnly=function(Oe){const e=Oe.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.pointerType=="mouse"},primaryAction=function(Oe){const e=Oe.originalEvent;return assert(e!==void 0,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&e.button===0},DragBoxEventType={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class DragBoxEvent extends BaseEvent{constructor(e,t,ke){super(e),this.coordinate=t,this.mapBrowserEvent=ke}}class DragBox extends PointerInteraction{constructor(e){super(),this.on,this.once,this.un,e=e??{},this.box_=new RenderBox(e.className||"ol-dragbox"),this.minArea_=e.minArea??64,e.onBoxEnd&&(this.onBoxEnd=e.onBoxEnd),this.startPixel_=null,this.condition_=e.condition??mouseActionButton,this.boxEndCondition_=e.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(e,t,ke){const Ge=ke[0]-t[0],Be=ke[1]-t[1];return Ge*Ge+Be*Be>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(e){this.startPixel_&&(this.box_.setPixels(this.startPixel_,e.pixel),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXDRAG,e.coordinate,e)))}handleUpEvent(e){if(!this.startPixel_)return!1;const t=this.boxEndCondition_(e,this.startPixel_,e.pixel);return t&&this.onBoxEnd(e),this.dispatchEvent(new DragBoxEvent(t?DragBoxEventType.BOXEND:DragBoxEventType.BOXCANCEL,e.coordinate,e)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(e){return this.condition_(e)?(this.startPixel_=e.pixel,this.box_.setMap(e.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXSTART,e.coordinate,e)),!0):!1}onBoxEnd(e){}setActive(e){e||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(e)}setMap(e){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new DragBoxEvent(DragBoxEventType.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(e)}}class DragPan extends PointerInteraction{constructor(e){super({stopDown:FALSE}),e=e||{},this.kinetic_=e.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const t=e.condition?e.condition:all(noModifierKeys,primaryAction);this.condition_=e.onFocusOnly?all(focusWithTabindex,t):t,this.noKinetic_=!1}handleDragEvent(e){const t=e.map;this.panning_||(this.panning_=!0,t.getView().beginInteraction());const ke=this.targetPointers,Ge=t.getEventPixel(centroid(ke));if(ke.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(Ge[0],Ge[1]),this.lastCentroid){const Be=[this.lastCentroid[0]-Ge[0],Ge[1]-this.lastCentroid[1]],Ve=e.map.getView();scale$3(Be,Ve.getResolution()),rotate$1(Be,Ve.getRotation()),Ve.adjustCenterInternal(Be)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=Ge,this.lastPointersCount_=ke.length,e.originalEvent.preventDefault()}handleUpEvent(e){const t=e.map,ke=t.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const Ge=this.kinetic_.getDistance(),Be=this.kinetic_.getAngle(),je=ke.getCenterInternal(),Ve=t.getPixelFromCoordinateInternal(je),Ze=t.getCoordinateFromPixelInternal([Ve[0]-Ge*Math.cos(Be),Ve[1]-Ge*Math.sin(Be)]);ke.animateInternal({center:ke.getConstrainedCenter(Ze),duration:500,easing:easeOut})}return this.panning_&&(this.panning_=!1,ke.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(e){if(this.targetPointers.length>0&&this.condition_(e)){const ke=e.map.getView();return this.lastCentroid=null,ke.getAnimating()&&ke.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}function disable(Oe){if(Oe!==void 0)return 0}function none$1(Oe){if(Oe!==void 0)return Oe}function createSnapToN(Oe){const e=2*Math.PI/Oe;return function(t,ke){if(ke)return t;if(t!==void 0)return t=Math.floor(t/e+.5)*e,t}}function createSnapToZero(Oe){const e=toRadians(5);return function(t,ke){return ke||t===void 0?t:Math.abs(t)<=e?0:t}}class DragRotate extends PointerInteraction{constructor(e){e=e||{},super({stopDown:FALSE}),this.condition_=e.condition?e.condition:altShiftKeysOnly,this.lastAngle_=void 0,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){if(!mouseOnly(e))return;const t=e.map,ke=t.getView();if(ke.getConstraints().rotation===disable)return;const Ge=t.getSize(),Be=e.pixel,je=Math.atan2(Ge[1]/2-Be[1],Be[0]-Ge[0]/2);if(this.lastAngle_!==void 0){const Ve=je-this.lastAngle_;ke.adjustRotationInternal(-Ve)}this.lastAngle_=je}handleUpEvent(e){return mouseOnly(e)?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){return mouseOnly(e)&&mouseActionButton(e)&&this.condition_(e)?(e.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class DragZoom extends DragBox{constructor(e){e=e||{};const t=e.condition?e.condition:shiftKeyOnly;super({condition:t,className:e.className||"ol-dragzoom",minArea:e.minArea}),this.duration_=e.duration!==void 0?e.duration:200,this.out_=e.out!==void 0?e.out:!1}onBoxEnd(e){const ke=this.getMap().getView();let Ge=this.getGeometry();if(this.out_){const Be=ke.rotatedExtentForGeometry(Ge),je=ke.getResolutionForExtentInternal(Be),Ve=ke.getResolution()/je;Ge=Ge.clone(),Ge.scale(Ve*Ve)}ke.fitInternal(Ge,{duration:this.duration_,easing:easeOut})}}class MapEvent extends BaseEvent{constructor(e,t,ke){super(e),this.map=t,this.frameState=ke!==void 0?ke:null}}class MapBrowserEvent extends MapEvent{constructor(e,t,ke,Ge,Be,je){super(e,t,Be),this.originalEvent=ke,this.pixel_=null,this.coordinate_=null,this.dragging=Ge!==void 0?Ge:!1,this.activePointers=je}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(e){this.pixel_=e}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(e){this.coordinate_=e}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const LayerProperty={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class BaseLayer extends BaseObject{constructor(e){super(),this.on,this.once,this.un,this.background_=e.background;const t=Object.assign({},e);typeof e.properties=="object"&&(delete t.properties,Object.assign(t,e.properties)),t[LayerProperty.OPACITY]=e.opacity!==void 0?e.opacity:1,assert(typeof t[LayerProperty.OPACITY]=="number","Layer opacity must be a number"),t[LayerProperty.VISIBLE]=e.visible!==void 0?e.visible:!0,t[LayerProperty.Z_INDEX]=e.zIndex,t[LayerProperty.MAX_RESOLUTION]=e.maxResolution!==void 0?e.maxResolution:1/0,t[LayerProperty.MIN_RESOLUTION]=e.minResolution!==void 0?e.minResolution:0,t[LayerProperty.MIN_ZOOM]=e.minZoom!==void 0?e.minZoom:-1/0,t[LayerProperty.MAX_ZOOM]=e.maxZoom!==void 0?e.maxZoom:1/0,this.className_=t.className!==void 0?t.className:"ol-layer",delete t.className,this.setProperties(t),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(e){const t=this.state_||{layer:this,managed:e===void 0?!0:e},ke=this.getZIndex();return t.opacity=clamp(Math.round(this.getOpacity()*100)/100,0,1),t.visible=this.getVisible(),t.extent=this.getExtent(),t.zIndex=ke===void 0&&!t.managed?1/0:ke,t.maxResolution=this.getMaxResolution(),t.minResolution=Math.max(this.getMinResolution(),0),t.minZoom=this.getMinZoom(),t.maxZoom=this.getMaxZoom(),this.state_=t,t}getLayersArray(e){return abstract()}getLayerStatesArray(e){return abstract()}getExtent(){return this.get(LayerProperty.EXTENT)}getMaxResolution(){return this.get(LayerProperty.MAX_RESOLUTION)}getMinResolution(){return this.get(LayerProperty.MIN_RESOLUTION)}getMinZoom(){return this.get(LayerProperty.MIN_ZOOM)}getMaxZoom(){return this.get(LayerProperty.MAX_ZOOM)}getOpacity(){return this.get(LayerProperty.OPACITY)}getSourceState(){return abstract()}getVisible(){return this.get(LayerProperty.VISIBLE)}getZIndex(){return this.get(LayerProperty.Z_INDEX)}setBackground(e){this.background_=e,this.changed()}setExtent(e){this.set(LayerProperty.EXTENT,e)}setMaxResolution(e){this.set(LayerProperty.MAX_RESOLUTION,e)}setMinResolution(e){this.set(LayerProperty.MIN_RESOLUTION,e)}setMaxZoom(e){this.set(LayerProperty.MAX_ZOOM,e)}setMinZoom(e){this.set(LayerProperty.MIN_ZOOM,e)}setOpacity(e){assert(typeof e=="number","Layer opacity must be a number"),this.set(LayerProperty.OPACITY,e)}setVisible(e){this.set(LayerProperty.VISIBLE,e)}setZIndex(e){this.set(LayerProperty.Z_INDEX,e)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}const RenderEventType={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},ViewHint={ANIMATING:0,INTERACTING:1},ViewProperty={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function createExtent(Oe,e,t){return function(ke,Ge,Be,je,Ve){if(!ke)return;if(!Ge&&!e)return ke;const Ze=e?0:Be[0]*Ge,Qe=e?0:Be[1]*Ge,en=Ve?Ve[0]:0,tn=Ve?Ve[1]:0;let an=Oe[0]+Ze/2+en,cn=Oe[2]-Ze/2+en,un=Oe[1]+Qe/2+tn,dn=Oe[3]-Qe/2+tn;an>cn&&(an=(cn+an)/2,cn=an),un>dn&&(un=(dn+un)/2,dn=un);let fn=clamp(ke[0],an,cn),pn=clamp(ke[1],un,dn);if(je&&t&&Ge){const gn=30*Ge;fn+=-gn*Math.log(1+Math.max(0,an-ke[0])/gn)+gn*Math.log(1+Math.max(0,ke[0]-cn)/gn),pn+=-gn*Math.log(1+Math.max(0,un-ke[1])/gn)+gn*Math.log(1+Math.max(0,ke[1]-dn)/gn)}return[fn,pn]}}function none(Oe){return Oe}function getViewportClampedResolution(Oe,e,t,ke){const Ge=getWidth(e)/t[0],Be=getHeight(e)/t[1];return ke?Math.min(Oe,Math.max(Ge,Be)):Math.min(Oe,Math.min(Ge,Be))}function getSmoothClampedResolution(Oe,e,t){let ke=Math.min(Oe,e);const Ge=50;return ke*=Math.log(1+Ge*Math.max(0,Oe/e-1))/Ge+1,t&&(ke=Math.max(ke,t),ke/=Math.log(1+Ge*Math.max(0,t/Oe-1))/Ge+1),clamp(ke,t/2,e*2)}function createSnapToResolutions(Oe,e,t,ke){return e=e!==void 0?e:!0,function(Ge,Be,je,Ve){if(Ge!==void 0){const Ze=Oe[0],Qe=Oe[Oe.length-1],en=t?getViewportClampedResolution(Ze,t,je,ke):Ze;if(Ve)return e?getSmoothClampedResolution(Ge,en,Qe):clamp(Ge,Qe,en);const tn=Math.min(en,Ge),an=Math.floor(linearFindNearest(Oe,tn,Be));return Oe[an]>en&&an<Oe.length-1?Oe[an+1]:Oe[an]}}}function createSnapToPower(Oe,e,t,ke,Ge,Be){return ke=ke!==void 0?ke:!0,t=t!==void 0?t:0,function(je,Ve,Ze,Qe){if(je!==void 0){const en=Ge?getViewportClampedResolution(e,Ge,Ze,Be):e;if(Qe)return ke?getSmoothClampedResolution(je,en,t):clamp(je,t,en);const tn=1e-9,an=Math.ceil(Math.log(e/en)/Math.log(Oe)-tn),cn=-Ve*(.5-tn)+.5,un=Math.min(en,je),dn=Math.floor(Math.log(e/un)/Math.log(Oe)+cn),fn=Math.max(an,dn),pn=e/Math.pow(Oe,fn);return clamp(pn,t,en)}}}function createMinMaxResolution(Oe,e,t,ke,Ge){return t=t!==void 0?t:!0,function(Be,je,Ve,Ze){if(Be!==void 0){const Qe=ke?getViewportClampedResolution(Oe,ke,Ve,Ge):Oe;return!t||!Ze?clamp(Be,e,Qe):getSmoothClampedResolution(Be,Qe,e)}}}const DEFAULT_MIN_ZOOM=0;class View extends BaseObject{constructor(e){super(),this.on,this.once,this.un,e=Object.assign({},e),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=createProjection(e.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,e.projection&&disableCoordinateWarning(),e.center&&(e.center=fromUserCoordinate(e.center,this.projection_)),e.extent&&(e.extent=fromUserExtent(e.extent,this.projection_)),this.applyOptions_(e)}applyOptions_(e){const t=Object.assign({},e);for(const Ve in ViewProperty)delete t[Ve];this.setProperties(t,!0);const ke=createResolutionConstraint(e);this.maxResolution_=ke.maxResolution,this.minResolution_=ke.minResolution,this.zoomFactor_=ke.zoomFactor,this.resolutions_=e.resolutions,this.padding_=e.padding,this.minZoom_=ke.minZoom;const Ge=createCenterConstraint(e),Be=ke.constraint,je=createRotationConstraint(e);this.constraints_={center:Ge,resolution:Be,rotation:je},this.setRotation(e.rotation!==void 0?e.rotation:0),this.setCenterInternal(e.center!==void 0?e.center:null),e.resolution!==void 0?this.setResolution(e.resolution):e.zoom!==void 0&&this.setZoom(e.zoom)}get padding(){return this.padding_}set padding(e){let t=this.padding_;this.padding_=e;const ke=this.getCenterInternal();if(ke){const Ge=e||[0,0,0,0];t=t||[0,0,0,0];const Be=this.getResolution(),je=Be/2*(Ge[3]-t[3]+t[1]-Ge[1]),Ve=Be/2*(Ge[0]-t[0]+t[2]-Ge[2]);this.setCenterInternal([ke[0]+je,ke[1]-Ve])}}getUpdatedOptions_(e){const t=this.getProperties();return t.resolution!==void 0?t.resolution=this.getResolution():t.zoom=this.getZoom(),t.center=this.getCenterInternal(),t.rotation=this.getRotation(),Object.assign({},t,e)}animate(e){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const t=new Array(arguments.length);for(let ke=0;ke<t.length;++ke){let Ge=arguments[ke];Ge.center&&(Ge=Object.assign({},Ge),Ge.center=fromUserCoordinate(Ge.center,this.getProjection())),Ge.anchor&&(Ge=Object.assign({},Ge),Ge.anchor=fromUserCoordinate(Ge.anchor,this.getProjection())),t[ke]=Ge}this.animateInternal.apply(this,t)}animateInternal(e){let t=arguments.length,ke;t>1&&typeof arguments[t-1]=="function"&&(ke=arguments[t-1],--t);let Ge=0;for(;Ge<t&&!this.isDef();++Ge){const en=arguments[Ge];en.center&&this.setCenterInternal(en.center),en.zoom!==void 0?this.setZoom(en.zoom):en.resolution&&this.setResolution(en.resolution),en.rotation!==void 0&&this.setRotation(en.rotation)}if(Ge===t){ke&&animationCallback(ke,!0);return}let Be=Date.now(),je=this.targetCenter_.slice(),Ve=this.targetResolution_,Ze=this.targetRotation_;const Qe=[];for(;Ge<t;++Ge){const en=arguments[Ge],tn={start:Be,complete:!1,anchor:en.anchor,duration:en.duration!==void 0?en.duration:1e3,easing:en.easing||inAndOut,callback:ke};if(en.center&&(tn.sourceCenter=je,tn.targetCenter=en.center.slice(),je=tn.targetCenter),en.zoom!==void 0?(tn.sourceResolution=Ve,tn.targetResolution=this.getResolutionForZoom(en.zoom),Ve=tn.targetResolution):en.resolution&&(tn.sourceResolution=Ve,tn.targetResolution=en.resolution,Ve=tn.targetResolution),en.rotation!==void 0){tn.sourceRotation=Ze;const an=modulo(en.rotation-Ze+Math.PI,2*Math.PI)-Math.PI;tn.targetRotation=Ze+an,Ze=tn.targetRotation}isNoopAnimation(tn)?tn.complete=!0:Be+=tn.duration,Qe.push(tn)}this.animations_.push(Qe),this.setHint(ViewHint.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[ViewHint.ANIMATING]>0}getInteracting(){return this.hints_[ViewHint.INTERACTING]>0}cancelAnimations(){this.setHint(ViewHint.ANIMATING,-this.hints_[ViewHint.ANIMATING]);let e;for(let t=0,ke=this.animations_.length;t<ke;++t){const Ge=this.animations_[t];if(Ge[0].callback&&animationCallback(Ge[0].callback,!1),!e)for(let Be=0,je=Ge.length;Be<je;++Be){const Ve=Ge[Be];if(!Ve.complete){e=Ve.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=e,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const e=Date.now();let t=!1;for(let ke=this.animations_.length-1;ke>=0;--ke){const Ge=this.animations_[ke];let Be=!0;for(let je=0,Ve=Ge.length;je<Ve;++je){const Ze=Ge[je];if(Ze.complete)continue;const Qe=e-Ze.start;let en=Ze.duration>0?Qe/Ze.duration:1;en>=1?(Ze.complete=!0,en=1):Be=!1;const tn=Ze.easing(en);if(Ze.sourceCenter){const an=Ze.sourceCenter[0],cn=Ze.sourceCenter[1],un=Ze.targetCenter[0],dn=Ze.targetCenter[1];this.nextCenter_=Ze.targetCenter;const fn=an+tn*(un-an),pn=cn+tn*(dn-cn);this.targetCenter_=[fn,pn]}if(Ze.sourceResolution&&Ze.targetResolution){const an=tn===1?Ze.targetResolution:Ze.sourceResolution+tn*(Ze.targetResolution-Ze.sourceResolution);if(Ze.anchor){const cn=this.getViewportSize_(this.getRotation()),un=this.constraints_.resolution(an,0,cn,!0);this.targetCenter_=this.calculateCenterZoom(un,Ze.anchor)}this.nextResolution_=Ze.targetResolution,this.targetResolution_=an,this.applyTargetState_(!0)}if(Ze.sourceRotation!==void 0&&Ze.targetRotation!==void 0){const an=tn===1?modulo(Ze.targetRotation+Math.PI,2*Math.PI)-Math.PI:Ze.sourceRotation+tn*(Ze.targetRotation-Ze.sourceRotation);if(Ze.anchor){const cn=this.constraints_.rotation(an,!0);this.targetCenter_=this.calculateCenterRotate(cn,Ze.anchor)}this.nextRotation_=Ze.targetRotation,this.targetRotation_=an}if(this.applyTargetState_(!0),t=!0,!Ze.complete)break}if(Be){this.animations_[ke]=null,this.setHint(ViewHint.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const je=Ge[0].callback;je&&animationCallback(je,!0)}}this.animations_=this.animations_.filter(Boolean),t&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(e,t){let ke;const Ge=this.getCenterInternal();return Ge!==void 0&&(ke=[Ge[0]-t[0],Ge[1]-t[1]],rotate$1(ke,e-this.getRotation()),add$1(ke,t)),ke}calculateCenterZoom(e,t){let ke;const Ge=this.getCenterInternal(),Be=this.getResolution();if(Ge!==void 0&&Be!==void 0){const je=t[0]-e*(t[0]-Ge[0])/Be,Ve=t[1]-e*(t[1]-Ge[1])/Be;ke=[je,Ve]}return ke}getViewportSize_(e){const t=this.viewportSize_;if(e){const ke=t[0],Ge=t[1];return[Math.abs(ke*Math.cos(e))+Math.abs(Ge*Math.sin(e)),Math.abs(ke*Math.sin(e))+Math.abs(Ge*Math.cos(e))]}return t}setViewportSize(e){this.viewportSize_=Array.isArray(e)?e.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const e=this.getCenterInternal();return e&&toUserCoordinate(e,this.getProjection())}getCenterInternal(){return this.get(ViewProperty.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(e){return e!==void 0?(e[0]=this.hints_[0],e[1]=this.hints_[1],e):this.hints_.slice()}calculateExtent(e){const t=this.calculateExtentInternal(e);return toUserExtent(t,this.getProjection())}calculateExtentInternal(e){e=e||this.getViewportSizeMinusPadding_();const t=this.getCenterInternal();assert(t,"The view center is not defined");const ke=this.getResolution();assert(ke!==void 0,"The view resolution is not defined");const Ge=this.getRotation();return assert(Ge!==void 0,"The view rotation is not defined"),getForViewAndSize(t,ke,Ge,e)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(e){this.applyOptions_(this.getUpdatedOptions_({maxZoom:e}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(e){this.applyOptions_(this.getUpdatedOptions_({minZoom:e}))}setConstrainResolution(e){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:e}))}getProjection(){return this.projection_}getResolution(){return this.get(ViewProperty.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(e,t){return this.getResolutionForExtentInternal(fromUserExtent(e,this.getProjection()),t)}getResolutionForExtentInternal(e,t){t=t||this.getViewportSizeMinusPadding_();const ke=getWidth(e)/t[0],Ge=getHeight(e)/t[1];return Math.max(ke,Ge)}getResolutionForValueFunction(e){e=e||2;const t=this.getConstrainedResolution(this.maxResolution_),ke=this.minResolution_,Ge=Math.log(t/ke)/Math.log(e);return function(Be){return t/Math.pow(e,Be*Ge)}}getRotation(){return this.get(ViewProperty.ROTATION)}getValueForResolutionFunction(e){const t=Math.log(e||2),ke=this.getConstrainedResolution(this.maxResolution_),Ge=this.minResolution_,Be=Math.log(ke/Ge)/t;return function(je){return Math.log(ke/je)/t/Be}}getViewportSizeMinusPadding_(e){let t=this.getViewportSize_(e);const ke=this.padding_;return ke&&(t=[t[0]-ke[1]-ke[3],t[1]-ke[0]-ke[2]]),t}getState(){const e=this.getProjection(),t=this.getResolution(),ke=this.getRotation();let Ge=this.getCenterInternal();const Be=this.padding_;if(Be){const je=this.getViewportSizeMinusPadding_();Ge=calculateCenterOn(Ge,this.getViewportSize_(),[je[0]/2+Be[3],je[1]/2+Be[0]],t,ke)}return{center:Ge.slice(0),projection:e!==void 0?e:null,resolution:t,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:ke,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let e;const t=this.getResolution();return t!==void 0&&(e=this.getZoomForResolution(t)),e}getZoomForResolution(e){let t=this.minZoom_||0,ke,Ge;if(this.resolutions_){const Be=linearFindNearest(this.resolutions_,e,1);t=Be,ke=this.resolutions_[Be],Be==this.resolutions_.length-1?Ge=2:Ge=ke/this.resolutions_[Be+1]}else ke=this.maxResolution_,Ge=this.zoomFactor_;return t+Math.log(ke/e)/Math.log(Ge)}getResolutionForZoom(e){var t;if((t=this.resolutions_)!=null&&t.length){if(this.resolutions_.length===1)return this.resolutions_[0];const ke=clamp(Math.floor(e),0,this.resolutions_.length-2),Ge=this.resolutions_[ke]/this.resolutions_[ke+1];return this.resolutions_[ke]/Math.pow(Ge,clamp(e-ke,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,e-this.minZoom_)}fit(e,t){let ke;if(assert(Array.isArray(e)||typeof e.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(e)){assert(!isEmpty(e),"Cannot fit empty extent provided as `geometry`");const Ge=fromUserExtent(e,this.getProjection());ke=fromExtent(Ge)}else if(e.getType()==="Circle"){const Ge=fromUserExtent(e.getExtent(),this.getProjection());ke=fromExtent(Ge),ke.rotate(this.getRotation(),getCenter(Ge))}else ke=e;this.fitInternal(ke,t)}rotatedExtentForGeometry(e){const t=this.getRotation(),ke=Math.cos(t),Ge=Math.sin(-t),Be=e.getFlatCoordinates(),je=e.getStride();let Ve=1/0,Ze=1/0,Qe=-1/0,en=-1/0;for(let tn=0,an=Be.length;tn<an;tn+=je){const cn=Be[tn]*ke-Be[tn+1]*Ge,un=Be[tn]*Ge+Be[tn+1]*ke;Ve=Math.min(Ve,cn),Ze=Math.min(Ze,un),Qe=Math.max(Qe,cn),en=Math.max(en,un)}return[Ve,Ze,Qe,en]}fitInternal(e,t){t=t||{};let ke=t.size;ke||(ke=this.getViewportSizeMinusPadding_());const Ge=t.padding!==void 0?t.padding:[0,0,0,0],Be=t.nearest!==void 0?t.nearest:!1;let je;t.minResolution!==void 0?je=t.minResolution:t.maxZoom!==void 0?je=this.getResolutionForZoom(t.maxZoom):je=0;const Ve=this.rotatedExtentForGeometry(e);let Ze=this.getResolutionForExtentInternal(Ve,[ke[0]-Ge[1]-Ge[3],ke[1]-Ge[0]-Ge[2]]);Ze=isNaN(Ze)?je:Math.max(Ze,je),Ze=this.getConstrainedResolution(Ze,Be?0:1);const Qe=this.getRotation(),en=Math.sin(Qe),tn=Math.cos(Qe),an=getCenter(Ve);an[0]+=(Ge[1]-Ge[3])/2*Ze,an[1]+=(Ge[0]-Ge[2])/2*Ze;const cn=an[0]*tn-an[1]*en,un=an[1]*tn+an[0]*en,dn=this.getConstrainedCenter([cn,un],Ze),fn=t.callback?t.callback:VOID;t.duration!==void 0?this.animateInternal({resolution:Ze,center:dn,duration:t.duration,easing:t.easing},fn):(this.targetResolution_=Ze,this.targetCenter_=dn,this.applyTargetState_(!1,!0),animationCallback(fn,!0))}centerOn(e,t,ke){this.centerOnInternal(fromUserCoordinate(e,this.getProjection()),t,ke)}centerOnInternal(e,t,ke){this.setCenterInternal(calculateCenterOn(e,t,ke,this.getResolution(),this.getRotation()))}calculateCenterShift(e,t,ke,Ge){let Be;const je=this.padding_;if(je&&e){const Ve=this.getViewportSizeMinusPadding_(-ke),Ze=calculateCenterOn(e,Ge,[Ve[0]/2+je[3],Ve[1]/2+je[0]],t,ke);Be=[e[0]-Ze[0],e[1]-Ze[1]]}return Be}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(e){const t=toUserCoordinate(this.targetCenter_,this.getProjection());this.setCenter([t[0]+e[0],t[1]+e[1]])}adjustCenterInternal(e){const t=this.targetCenter_;this.setCenterInternal([t[0]+e[0],t[1]+e[1]])}adjustResolution(e,t){t=t&&fromUserCoordinate(t,this.getProjection()),this.adjustResolutionInternal(e,t)}adjustResolutionInternal(e,t){const ke=this.getAnimating()||this.getInteracting(),Ge=this.getViewportSize_(this.getRotation()),Be=this.constraints_.resolution(this.targetResolution_*e,0,Ge,ke);t&&(this.targetCenter_=this.calculateCenterZoom(Be,t)),this.targetResolution_*=e,this.applyTargetState_()}adjustZoom(e,t){this.adjustResolution(Math.pow(this.zoomFactor_,-e),t)}adjustRotation(e,t){t&&(t=fromUserCoordinate(t,this.getProjection())),this.adjustRotationInternal(e,t)}adjustRotationInternal(e,t){const ke=this.getAnimating()||this.getInteracting(),Ge=this.constraints_.rotation(this.targetRotation_+e,ke);t&&(this.targetCenter_=this.calculateCenterRotate(Ge,t)),this.targetRotation_+=e,this.applyTargetState_()}setCenter(e){this.setCenterInternal(e&&fromUserCoordinate(e,this.getProjection()))}setCenterInternal(e){this.targetCenter_=e,this.applyTargetState_()}setHint(e,t){return this.hints_[e]+=t,this.changed(),this.hints_[e]}setResolution(e){this.targetResolution_=e,this.applyTargetState_()}setRotation(e){this.targetRotation_=e,this.applyTargetState_()}setZoom(e){this.setResolution(this.getResolutionForZoom(e))}applyTargetState_(e,t){const ke=this.getAnimating()||this.getInteracting()||t,Ge=this.constraints_.rotation(this.targetRotation_,ke),Be=this.getViewportSize_(Ge),je=this.constraints_.resolution(this.targetResolution_,0,Be,ke),Ve=this.constraints_.center(this.targetCenter_,je,Be,ke,this.calculateCenterShift(this.targetCenter_,je,Ge,Be));this.get(ViewProperty.ROTATION)!==Ge&&this.set(ViewProperty.ROTATION,Ge),this.get(ViewProperty.RESOLUTION)!==je&&(this.set(ViewProperty.RESOLUTION,je),this.set("zoom",this.getZoom(),!0)),(!Ve||!this.get(ViewProperty.CENTER)||!equals(this.get(ViewProperty.CENTER),Ve))&&this.set(ViewProperty.CENTER,Ve),this.getAnimating()&&!e&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(e,t,ke){e=e!==void 0?e:200;const Ge=t||0,Be=this.constraints_.rotation(this.targetRotation_),je=this.getViewportSize_(Be),Ve=this.constraints_.resolution(this.targetResolution_,Ge,je),Ze=this.constraints_.center(this.targetCenter_,Ve,je,!1,this.calculateCenterShift(this.targetCenter_,Ve,Be,je));if(e===0&&!this.cancelAnchor_){this.targetResolution_=Ve,this.targetRotation_=Be,this.targetCenter_=Ze,this.applyTargetState_();return}ke=ke||(e===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==Ve||this.getRotation()!==Be||!this.getCenterInternal()||!equals(this.getCenterInternal(),Ze))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:Be,center:Ze,resolution:Ve,duration:e,easing:easeOut,anchor:ke}))}beginInteraction(){this.resolveConstraints(0),this.setHint(ViewHint.INTERACTING,1)}endInteraction(e,t,ke){ke=ke&&fromUserCoordinate(ke,this.getProjection()),this.endInteractionInternal(e,t,ke)}endInteractionInternal(e,t,ke){this.getInteracting()&&(this.setHint(ViewHint.INTERACTING,-1),this.resolveConstraints(e,t,ke))}getConstrainedCenter(e,t){const ke=this.getViewportSize_(this.getRotation());return this.constraints_.center(e,t||this.getResolution(),ke)}getConstrainedZoom(e,t){const ke=this.getResolutionForZoom(e);return this.getZoomForResolution(this.getConstrainedResolution(ke,t))}getConstrainedResolution(e,t){t=t||0;const ke=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(e,t,ke)}}function animationCallback(Oe,e){setTimeout(function(){Oe(e)},0)}function createCenterConstraint(Oe){if(Oe.extent!==void 0){const t=Oe.smoothExtentConstraint!==void 0?Oe.smoothExtentConstraint:!0;return createExtent(Oe.extent,Oe.constrainOnlyCenter,t)}const e=createProjection(Oe.projection,"EPSG:3857");if(Oe.multiWorld!==!0&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,createExtent(t,!1,!1)}return none}function createResolutionConstraint(Oe){let e,t,ke,je=Oe.minZoom!==void 0?Oe.minZoom:DEFAULT_MIN_ZOOM,Ve=Oe.maxZoom!==void 0?Oe.maxZoom:28;const Ze=Oe.zoomFactor!==void 0?Oe.zoomFactor:2,Qe=Oe.multiWorld!==void 0?Oe.multiWorld:!1,en=Oe.smoothResolutionConstraint!==void 0?Oe.smoothResolutionConstraint:!0,tn=Oe.showFullExtent!==void 0?Oe.showFullExtent:!1,an=createProjection(Oe.projection,"EPSG:3857"),cn=an.getExtent();let un=Oe.constrainOnlyCenter,dn=Oe.extent;if(!Qe&&!dn&&an.isGlobal()&&(un=!1,dn=cn),Oe.resolutions!==void 0){const fn=Oe.resolutions;t=fn[je],ke=fn[Ve]!==void 0?fn[Ve]:fn[fn.length-1],Oe.constrainResolution?e=createSnapToResolutions(fn,en,!un&&dn,tn):e=createMinMaxResolution(t,ke,en,!un&&dn,tn)}else{const pn=(cn?Math.max(getWidth(cn),getHeight(cn)):360*METERS_PER_UNIT$1.degrees/an.getMetersPerUnit())/DEFAULT_TILE_SIZE/Math.pow(2,DEFAULT_MIN_ZOOM),gn=pn/Math.pow(2,28-DEFAULT_MIN_ZOOM);t=Oe.maxResolution,t!==void 0?je=0:t=pn/Math.pow(Ze,je),ke=Oe.minResolution,ke===void 0&&(Oe.maxZoom!==void 0?Oe.maxResolution!==void 0?ke=t/Math.pow(Ze,Ve):ke=pn/Math.pow(Ze,Ve):ke=gn),Ve=je+Math.floor(Math.log(t/ke)/Math.log(Ze)),ke=t/Math.pow(Ze,Ve-je),Oe.constrainResolution?e=createSnapToPower(Ze,t,ke,en,!un&&dn,tn):e=createMinMaxResolution(t,ke,en,!un&&dn,tn)}return{constraint:e,maxResolution:t,minResolution:ke,minZoom:je,zoomFactor:Ze}}function createRotationConstraint(Oe){if(Oe.enableRotation!==void 0?Oe.enableRotation:!0){const t=Oe.constrainRotation;return t===void 0||t===!0?createSnapToZero():t===!1?none$1:typeof t=="number"?createSnapToN(t):none$1}return disable}function isNoopAnimation(Oe){return!(Oe.sourceCenter&&Oe.targetCenter&&!equals(Oe.sourceCenter,Oe.targetCenter)||Oe.sourceResolution!==Oe.targetResolution||Oe.sourceRotation!==Oe.targetRotation)}function calculateCenterOn(Oe,e,t,ke,Ge){const Be=Math.cos(-Ge);let je=Math.sin(-Ge),Ve=Oe[0]*Be-Oe[1]*je,Ze=Oe[1]*Be+Oe[0]*je;Ve+=(e[0]/2-t[0])*ke,Ze+=(t[1]-e[1]/2)*ke,je=-je;const Qe=Ve*Be-Ze*je,en=Ze*Be+Ve*je;return[Qe,en]}let Layer$1=class extends BaseLayer{constructor(e){const t=Object.assign({},e);delete t.source,super(t),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,e.render&&(this.render=e.render),e.map&&this.setMap(e.map),this.addChangeListener(LayerProperty.SOURCE,this.handleSourcePropertyChange_);const ke=e.source?e.source:null;this.setSource(ke)}getLayersArray(e){return e=e||[],e.push(this),e}getLayerStatesArray(e){return e=e||[],e.push(this.getLayerState()),e}getSource(){return this.get(LayerProperty.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const e=this.getSource();return e?e.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(unlistenByKey(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const e=this.getSource();e&&(this.sourceChangeKey_=listen(e,EventType.CHANGE,this.handleSourceChange_,this),e.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0))),this.changed()}getFeatures(e){return this.renderer_?this.renderer_.getFeatures(e):Promise.resolve([])}getData(e){return!this.renderer_||!this.rendered?null:this.renderer_.getData(e)}isVisible(e){let t;const ke=this.getMapInternal();!e&&ke&&(e=ke.getView()),e instanceof View?t={viewState:e.getState(),extent:e.calculateExtent()}:t=e,!t.layerStatesArray&&ke&&(t.layerStatesArray=ke.getLayerGroup().getLayerStatesArray());let Ge;if(t.layerStatesArray){if(Ge=t.layerStatesArray.find(je=>je.layer===this),!Ge)return!1}else Ge=this.getLayerState();const Be=this.getExtent();return inView(Ge,t.viewState)&&(!Be||intersects$1(Be,t.extent))}getAttributions(e){var Be;if(!this.isVisible(e))return[];const t=(Be=this.getSource())==null?void 0:Be.getAttributions();if(!t)return[];const ke=e instanceof View?e.getViewStateAndExtent():e;let Ge=t(ke);return Array.isArray(Ge)||(Ge=[Ge]),Ge}render(e,t){const ke=this.getRenderer();return ke.prepareFrame(e)?(this.rendered=!0,ke.renderFrame(e,t)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(e,t){}renderDeferred(e){const t=this.getRenderer();t&&t.renderDeferred(e)}setMapInternal(e){e||this.unrender(),this.set(LayerProperty.MAP,e)}getMapInternal(){return this.get(LayerProperty.MAP)}setMap(e){this.mapPrecomposeKey_&&(unlistenByKey(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),e||this.changed(),this.mapRenderKey_&&(unlistenByKey(this.mapRenderKey_),this.mapRenderKey_=null),e&&(this.mapPrecomposeKey_=listen(e,RenderEventType.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=listen(this,EventType.CHANGE,e.render,e),this.changed())}handlePrecompose_(e){const t=e.frameState.layerStatesArray,ke=this.getLayerState(!1);assert(!t.some(Ge=>Ge.layer===ke.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),t.push(ke)}setSource(e){this.set(LayerProperty.SOURCE,e)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}};function inView(Oe,e){if(!Oe.visible)return!1;const t=e.resolution;if(t<Oe.minResolution||t>=Oe.maxResolution)return!1;const ke=e.zoom;return ke>Oe.minZoom&&ke<=Oe.maxZoom}const rgb={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},xyz={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};xyz.max=xyz.whitepoint[2].D65;xyz.rgb=function(Oe,e){e=e||xyz.whitepoint[2].E;var t=Oe[0]/e[0],ke=Oe[1]/e[1],Ge=Oe[2]/e[2],Be,je,Ve;return Be=t*3.240969941904521+ke*-1.537383177570093+Ge*-.498610760293,je=t*-.96924363628087+ke*1.87596750150772+Ge*.041555057407175,Ve=t*.055630079696993+ke*-.20397695888897+Ge*1.056971514242878,Be=Be>.0031308?1.055*Math.pow(Be,1/2.4)-.055:Be=Be*12.92,je=je>.0031308?1.055*Math.pow(je,1/2.4)-.055:je=je*12.92,Ve=Ve>.0031308?1.055*Math.pow(Ve,1/2.4)-.055:Ve=Ve*12.92,Be=Math.min(Math.max(0,Be),1),je=Math.min(Math.max(0,je),1),Ve=Math.min(Math.max(0,Ve),1),[Be*255,je*255,Ve*255]};rgb.xyz=function(Oe,e){var t=Oe[0]/255,ke=Oe[1]/255,Ge=Oe[2]/255;t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92,ke=ke>.04045?Math.pow((ke+.055)/1.055,2.4):ke/12.92,Ge=Ge>.04045?Math.pow((Ge+.055)/1.055,2.4):Ge/12.92;var Be=t*.41239079926595+ke*.35758433938387+Ge*.18048078840183,je=t*.21263900587151+ke*.71516867876775+Ge*.072192315360733,Ve=t*.019330818715591+ke*.11919477979462+Ge*.95053215224966;return e=e||xyz.whitepoint[2].E,[Be*e[0],je*e[1],Ve*e[2]]};var luv={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(Oe,e,t){var ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,un,dn;if(Be=Oe[0],je=Oe[1],Ve=Oe[2],Be===0)return[0,0,0];var fn=.0011070564598794539;return e=e||"D65",t=t||2,tn=xyz.whitepoint[t][e][0],an=xyz.whitepoint[t][e][1],cn=xyz.whitepoint[t][e][2],un=4*tn/(tn+15*an+3*cn),dn=9*an/(tn+15*an+3*cn),ke=je/(13*Be)+un||0,Ge=Ve/(13*Be)+dn||0,Qe=Be>8?an*Math.pow((Be+16)/116,3):an*Be*fn,Ze=Qe*9*ke/(4*Ge)||0,en=Qe*(12-3*ke-20*Ge)/(4*Ge)||0,[Ze,Qe,en]}};xyz.luv=function(Oe,e,t){var ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,un,dn,fn=.008856451679035631,pn=903.2962962962961;e=e||"D65",t=t||2,tn=xyz.whitepoint[t][e][0],an=xyz.whitepoint[t][e][1],cn=xyz.whitepoint[t][e][2],un=4*tn/(tn+15*an+3*cn),dn=9*an/(tn+15*an+3*cn),Ze=Oe[0],Qe=Oe[1],en=Oe[2],ke=4*Ze/(Ze+15*Qe+3*en)||0,Ge=9*Qe/(Ze+15*Qe+3*en)||0;var gn=Qe/an;return Be=gn<=fn?pn*gn:116*Math.pow(gn,1/3)-16,je=13*Be*(ke-un),Ve=13*Be*(Ge-dn),[Be,je,Ve]};var lchuv={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(Oe){var e=Oe[0],t=Oe[1],ke=Oe[2],Ge,Be,je;return je=ke/360*2*Math.PI,Ge=t*Math.cos(je),Be=t*Math.sin(je),[e,Ge,Be]},xyz:function(Oe){return luv.xyz(lchuv.luv(Oe))}};luv.lchuv=function(Oe){var e=Oe[0],t=Oe[1],ke=Oe[2],Ge=Math.sqrt(t*t+ke*ke),Be=Math.atan2(ke,t),je=Be*360/2/Math.PI;return je<0&&(je+=360),[e,Ge,je]};xyz.lchuv=function(Oe){return luv.lchuv(xyz.luv(Oe))};const names$y={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var baseHues={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function parse$3(Oe){var en,tn;var e,t=[],ke=1,Ge;if(typeof Oe=="number")return{space:"rgb",values:[Oe>>>16,(Oe&65280)>>>8,Oe&255],alpha:1};if(typeof Oe=="number")return{space:"rgb",values:[Oe>>>16,(Oe&65280)>>>8,Oe&255],alpha:1};if(Oe=String(Oe).toLowerCase(),names$y[Oe])t=names$y[Oe].slice(),Ge="rgb";else if(Oe==="transparent")ke=0,Ge="rgb",t=[0,0,0];else if(Oe[0]==="#"){var Be=Oe.slice(1),je=Be.length,Ve=je<=4;ke=1,Ve?(t=[parseInt(Be[0]+Be[0],16),parseInt(Be[1]+Be[1],16),parseInt(Be[2]+Be[2],16)],je===4&&(ke=parseInt(Be[3]+Be[3],16)/255)):(t=[parseInt(Be[0]+Be[1],16),parseInt(Be[2]+Be[3],16),parseInt(Be[4]+Be[5],16)],je===8&&(ke=parseInt(Be[6]+Be[7],16)/255)),t[0]||(t[0]=0),t[1]||(t[1]=0),t[2]||(t[2]=0),Ge="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(Oe)){var Ze=e[1];Ge=Ze.replace(/a$/,"");var Qe=Ge==="cmyk"?4:Ge==="gray"?1:3;t=e[2].trim().split(/\s*[,\/]\s*|\s+/),Ge==="color"&&(Ge=t.shift()),t=t.map(function(an,cn){if(an[an.length-1]==="%")return an=parseFloat(an)/100,cn===3?an:Ge==="rgb"?an*255:Ge[0]==="h"||Ge[0]==="l"&&!cn?an*100:Ge==="lab"?an*125:Ge==="lch"?cn<2?an*150:an*360:Ge[0]==="o"&&!cn?an:Ge==="oklab"?an*.4:Ge==="oklch"?cn<2?an*.4:an*360:an;if(Ge[cn]==="h"||cn===2&&Ge[Ge.length-1]==="h"){if(baseHues[an]!==void 0)return baseHues[an];if(an.endsWith("deg"))return parseFloat(an);if(an.endsWith("turn"))return parseFloat(an)*360;if(an.endsWith("grad"))return parseFloat(an)*360/400;if(an.endsWith("rad"))return parseFloat(an)*180/Math.PI}return an==="none"?0:parseFloat(an)}),ke=t.length>Qe?t.pop():1}else/[0-9](?:\s|\/|,)/.test(Oe)&&(t=Oe.match(/([0-9]+)/g).map(function(an){return parseFloat(an)}),Ge=((tn=(en=Oe.match(/([a-z])/ig))==null?void 0:en.join(""))==null?void 0:tn.toLowerCase())||"rgb");return{space:Ge,values:t,alpha:ke}}var hsl={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(Oe){var e=Oe[0]/360,t=Oe[1]/100,ke=Oe[2]/100,Ge,Be,je,Ve,Ze,Qe=0;if(t===0)return Ze=ke*255,[Ze,Ze,Ze];for(Be=ke<.5?ke*(1+t):ke+t-ke*t,Ge=2*ke-Be,Ve=[0,0,0];Qe<3;)je=e+1/3*-(Qe-1),je<0?je++:je>1&&je--,Ze=6*je<1?Ge+(Be-Ge)*6*je:2*je<1?Be:3*je<2?Ge+(Be-Ge)*(2/3-je)*6:Ge,Ve[Qe++]=Ze*255;return Ve}};rgb.hsl=function(Oe){var e=Oe[0]/255,t=Oe[1]/255,ke=Oe[2]/255,Ge=Math.min(e,t,ke),Be=Math.max(e,t,ke),je=Be-Ge,Ve,Ze,Qe;return Be===Ge?Ve=0:e===Be?Ve=(t-ke)/je:t===Be?Ve=2+(ke-e)/je:ke===Be&&(Ve=4+(e-t)/je),Ve=Math.min(Ve*60,360),Ve<0&&(Ve+=360),Qe=(Ge+Be)/2,Be===Ge?Ze=0:Qe<=.5?Ze=je/(Be+Ge):Ze=je/(2-Be-Ge),[Ve,Ze*100,Qe*100]};function rgba$1(Oe){Array.isArray(Oe)&&Oe.raw&&(Oe=String.raw(...arguments)),Oe instanceof Number&&(Oe=+Oe);var e,t=parse$3(Oe);if(!t.space)return[];const ke=t.space[0]==="h"?hsl.min:rgb.min,Ge=t.space[0]==="h"?hsl.max:rgb.max;return e=Array(3),e[0]=Math.min(Math.max(t.values[0],ke[0]),Ge[0]),e[1]=Math.min(Math.max(t.values[1],ke[1]),Ge[1]),e[2]=Math.min(Math.max(t.values[2],ke[2]),Ge[2]),t.space[0]==="h"&&(e=hsl.rgb(e)),e.push(Math.min(Math.max(t.alpha,0),1)),e}const NO_COLOR=[NaN,NaN,NaN,0];function asString(Oe){return typeof Oe=="string"?Oe:toString$2(Oe)}const MAX_CACHE_SIZE=1024,cache={};let cacheSize=0;function withAlpha(Oe){if(Oe.length===4)return Oe;const e=Oe.slice();return e[3]=1,e}function rgbaToLcha(Oe){const e=xyz.lchuv(rgb.xyz(Oe));return e[3]=Oe[3],e}function lchaToRgba(Oe){const e=xyz.rgb(lchuv.xyz(Oe));return e[3]=Oe[3],e}function fromString(Oe){if(Oe==="none")return NO_COLOR;if(cache.hasOwnProperty(Oe))return cache[Oe];if(cacheSize>=MAX_CACHE_SIZE){let t=0;for(const ke in cache)t++&3||(delete cache[ke],--cacheSize)}const e=rgba$1(Oe);if(e.length!==4)throw new Error('failed to parse "'+Oe+'" as color');for(const t of e)if(isNaN(t))throw new Error('failed to parse "'+Oe+'" as color');return normalize(e),cache[Oe]=e,++cacheSize,e}function asArray(Oe){return Array.isArray(Oe)?Oe:fromString(Oe)}function normalize(Oe){return Oe[0]=clamp(Oe[0]+.5|0,0,255),Oe[1]=clamp(Oe[1]+.5|0,0,255),Oe[2]=clamp(Oe[2]+.5|0,0,255),Oe[3]=clamp(Oe[3],0,1),Oe}function toString$2(Oe){let e=Oe[0];e!=(e|0)&&(e=e+.5|0);let t=Oe[1];t!=(t|0)&&(t=t+.5|0);let ke=Oe[2];ke!=(ke|0)&&(ke=ke+.5|0);const Ge=Oe[3]===void 0?1:Math.round(Oe[3]*1e3)/1e3;return"rgba("+e+","+t+","+ke+","+Ge+")"}class IconImageCache{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let e=0;for(const t in this.cache_){const ke=this.cache_[t];!(e++&3)&&!ke.hasListener()&&(delete this.cache_[t],delete this.patternCache_[t],--this.cacheSize_)}}}get(e,t,ke){const Ge=getCacheKey$1(e,t,ke);return Ge in this.cache_?this.cache_[Ge]:null}getPattern(e,t,ke){const Ge=getCacheKey$1(e,t,ke);return Ge in this.patternCache_?this.patternCache_[Ge]:null}set(e,t,ke,Ge,Be){const je=getCacheKey$1(e,t,ke),Ve=je in this.cache_;this.cache_[je]=Ge,Be&&(Ge.getImageState()===ImageState.IDLE&&Ge.load(),Ge.getImageState()===ImageState.LOADING?Ge.ready().then(()=>{this.patternCache_[je]=getSharedCanvasContext2D().createPattern(Ge.getImage(1),"repeat")}):this.patternCache_[je]=getSharedCanvasContext2D().createPattern(Ge.getImage(1),"repeat")),Ve||++this.cacheSize_}setSize(e){this.maxCacheSize_=e,this.expire()}}function getCacheKey$1(Oe,e,t){const ke=t?asArray(t):"null";return e+":"+Oe+":"+ke}const shared=new IconImageCache;let taintedTestContext=null;class IconImage extends Target{constructor(e,t,ke,Ge,Be){super(),this.hitDetectionImage_=null,this.image_=e,this.crossOrigin_=ke,this.canvas_={},this.color_=Be,this.imageState_=Ge===void 0?ImageState.IDLE:Ge,this.size_=e&&e.width&&e.height?[e.width,e.height]:null,this.src_=t,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===ImageState.LOADED){taintedTestContext||(taintedTestContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})),taintedTestContext.drawImage(this.image_,0,0);try{taintedTestContext.getImageData(0,0,1,1),this.tainted_=!1}catch{taintedTestContext=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(EventType.CHANGE)}handleImageError_(){this.imageState_=ImageState.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=ImageState.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(e){return this.image_||this.initializeImage_(),this.replaceColor_(e),this.canvas_[e]?this.canvas_[e]:this.image_}getPixelRatio(e){return this.replaceColor_(e),this.canvas_[e]?e:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const e=this.size_[0],t=this.size_[1],ke=createCanvasContext2D(e,t);ke.fillRect(0,0,e,t),this.hitDetectionImage_=ke.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===ImageState.IDLE){this.image_||this.initializeImage_(),this.imageState_=ImageState.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&decodeFallback(this.image_,this.src_).then(e=>{this.image_=e,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(e){if(!this.color_||this.canvas_[e]||this.imageState_!==ImageState.LOADED)return;const t=this.image_,ke=createCanvasContext2D(Math.ceil(t.width*e),Math.ceil(t.height*e)),Ge=ke.canvas;ke.scale(e,e),ke.drawImage(t,0,0),ke.globalCompositeOperation="multiply",ke.fillStyle=asString(this.color_),ke.fillRect(0,0,Ge.width/e,Ge.height/e),ke.globalCompositeOperation="destination-in",ke.drawImage(t,0,0),this.canvas_[e]=Ge}ready(){return this.ready_||(this.ready_=new Promise(e=>{if(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)e();else{const t=()=>{(this.imageState_===ImageState.LOADED||this.imageState_===ImageState.ERROR)&&(this.removeEventListener(EventType.CHANGE,t),e())};this.addEventListener(EventType.CHANGE,t)}})),this.ready_}}function get$2(Oe,e,t,ke,Ge,Be){let je=e===void 0?void 0:shared.get(e,t,Ge);return je||(je=new IconImage(Oe,Oe&&"src"in Oe?Oe.src||void 0:e,t,ke,Ge),shared.set(e,t,Ge,je,Be)),Be&&je&&!shared.getPattern(e,t,Ge)&&shared.set(e,t,Ge,je,Be),je}class ImageStyle{constructor(e){this.opacity_=e.opacity,this.rotateWithView_=e.rotateWithView,this.rotation_=e.rotation,this.scale_=e.scale,this.scaleArray_=toSize(e.scale),this.displacement_=e.displacement,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new ImageStyle({opacity:this.getOpacity(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return abstract()}getImage(e){return abstract()}getHitDetectionImage(){return abstract()}getPixelRatio(e){return 1}getImageState(){return abstract()}getImageSize(){return abstract()}getOrigin(){return abstract()}getSize(){return abstract()}setDisplacement(e){this.displacement_=e}setOpacity(e){this.opacity_=e}setRotateWithView(e){this.rotateWithView_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e)}listenImageChange(e){abstract()}load(){abstract()}unlistenImageChange(e){abstract()}ready(){return Promise.resolve()}}function asColorLike(Oe){return Oe?Array.isArray(Oe)?toString$2(Oe):typeof Oe=="object"&&"src"in Oe?asCanvasPattern(Oe):Oe:null}function asCanvasPattern(Oe){if(!Oe.offset||!Oe.size)return shared.getPattern(Oe.src,"anonymous",Oe.color);const e=Oe.src+":"+Oe.offset,t=shared.getPattern(e,void 0,Oe.color);if(t)return t;const ke=shared.get(Oe.src,"anonymous",null);if(ke.getImageState()!==ImageState.LOADED)return null;const Ge=createCanvasContext2D(Oe.size[0],Oe.size[1]);return Ge.drawImage(ke.getImage(1),Oe.offset[0],Oe.offset[1],Oe.size[0],Oe.size[1],0,0,Oe.size[0],Oe.size[1]),get$2(Ge.canvas,e,void 0,ImageState.LOADED,Oe.color,!0),shared.getPattern(e,void 0,Oe.color)}const defaultFont="10px sans-serif",defaultFillStyle="#000",defaultLineCap="round",defaultLineDash=[],defaultLineDashOffset=0,defaultLineJoin="round",defaultMiterLimit=10,defaultStrokeStyle="#000",defaultTextAlign="center",defaultTextBaseline="middle",defaultPadding=[0,0,0,0],defaultLineWidth=1,checkedFonts=new BaseObject;let measureContext$1=null,measureFont;const textHeights={},registerFont=function(){const e="32px ",t=["monospace","serif"],ke=t.length,Ge="wmytzilWMYTZIL@#/&?$%10";let Be,je;function Ve(Qe,en,tn){let an=!0;for(let cn=0;cn<ke;++cn){const un=t[cn];if(je=measureTextWidth(Qe+" "+en+" "+e+un,Ge),tn!=un){const dn=measureTextWidth(Qe+" "+en+" "+e+tn+","+un,Ge);an=an&&dn!=je}}return!!an}function Ze(){let Qe=!0;const en=checkedFonts.getKeys();for(let tn=0,an=en.length;tn<an;++tn){const cn=en[tn];if(checkedFonts.get(cn)<100){const[un,dn,fn]=cn.split(`
`);Ve(un,dn,fn)?(clear$1(textHeights),measureContext$1=null,measureFont=void 0,checkedFonts.set(cn,100)):(checkedFonts.set(cn,checkedFonts.get(cn)+1,!0),Qe=!1)}}Qe&&(clearInterval(Be),Be=void 0)}return function(Qe){const en=getFontParameters(Qe);if(!en)return;const tn=en.families;for(let an=0,cn=tn.length;an<cn;++an){const un=tn[an],dn=en.style+`
`+en.weight+`
`+un;checkedFonts.get(dn)===void 0&&(checkedFonts.set(dn,100,!0),Ve(en.style,en.weight,un)||(checkedFonts.set(dn,0,!0),Be===void 0&&(Be=setInterval(Ze,32))))}}}(),measureTextHeight=function(){let Oe;return function(e){let t=textHeights[e];if(t==null){if(WORKER_OFFSCREEN_CANVAS){const ke=getFontParameters(e),Ge=measureText$1(e,"Žg");t=(isNaN(Number(ke.lineHeight))?1.2:Number(ke.lineHeight))*(Ge.actualBoundingBoxAscent+Ge.actualBoundingBoxDescent)}else Oe||(Oe=document.createElement("div"),Oe.innerHTML="M",Oe.style.minHeight="0",Oe.style.maxHeight="none",Oe.style.height="auto",Oe.style.padding="0",Oe.style.border="none",Oe.style.position="absolute",Oe.style.display="block",Oe.style.left="-99999px"),Oe.style.font=e,document.body.appendChild(Oe),t=Oe.offsetHeight,document.body.removeChild(Oe);textHeights[e]=t}return t}}();function measureText$1(Oe,e){return measureContext$1||(measureContext$1=createCanvasContext2D(1,1)),Oe!=measureFont&&(measureContext$1.font=Oe,measureFont=measureContext$1.font),measureContext$1.measureText(e)}function measureTextWidth(Oe,e){return measureText$1(Oe,e).width}function measureAndCacheTextWidth(Oe,e,t){if(e in t)return t[e];const ke=e.split(`
`).reduce((Ge,Be)=>Math.max(Ge,measureTextWidth(Oe,Be)),0);return t[e]=ke,ke}function getTextDimensions(Oe,e){const t=[],ke=[],Ge=[];let Be=0,je=0,Ve=0,Ze=0;for(let Qe=0,en=e.length;Qe<=en;Qe+=2){const tn=e[Qe];if(tn===`
`||Qe===en){Be=Math.max(Be,je),Ge.push(je),je=0,Ve+=Ze,Ze=0;continue}const an=e[Qe+1]||Oe.font,cn=measureTextWidth(an,tn);t.push(cn),je+=cn;const un=measureTextHeight(an);ke.push(un),Ze=Math.max(Ze,un)}return{width:Be,height:Ve,widths:t,heights:ke,lineWidths:Ge}}function drawImageOrLabel(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe,en){Oe.save(),t!==1&&(Oe.globalAlpha===void 0?Oe.globalAlpha=tn=>tn.globalAlpha*=t:Oe.globalAlpha*=t),e&&Oe.transform.apply(Oe,e),ke.contextInstructions?(Oe.translate(Ze,Qe),Oe.scale(en[0],en[1]),executeLabelInstructions(ke,Oe)):en[0]<0||en[1]<0?(Oe.translate(Ze,Qe),Oe.scale(en[0],en[1]),Oe.drawImage(ke,Ge,Be,je,Ve,0,0,je,Ve)):Oe.drawImage(ke,Ge,Be,je,Ve,Ze,Qe,je*en[0],Ve*en[1]),Oe.restore()}function executeLabelInstructions(Oe,e){const t=Oe.contextInstructions;for(let ke=0,Ge=t.length;ke<Ge;ke+=2)Array.isArray(t[ke+1])?e[t[ke]].apply(e,t[ke+1]):e[t[ke]]=t[ke+1]}class RegularShape extends ImageStyle{constructor(e){super({opacity:1,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,rotation:e.rotation!==void 0?e.rotation:0,scale:e.scale!==void 0?e.scale:1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=e.fill!==void 0?e.fill:null,this.origin_=[0,0],this.points_=e.points,this.radius=e.radius,this.radius2_=e.radius2,this.angle_=e.angle!==void 0?e.angle:0,this.stroke_=e.stroke!==void 0?e.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?ImageState.LOADING:ImageState.LOADED,this.imageState_===ImageState.LOADING&&this.ready().then(()=>this.imageState_=ImageState.LOADED),this.render()}clone(){const e=this.getScale(),t=new RegularShape({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(e)?e.slice():e,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}getAnchor(){const e=this.size_,t=this.getDisplacement(),ke=this.getScaleArray();return[e[0]/2-t[0]/ke[0],e[1]/2+t[1]/ke[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(e){this.fill_=e,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(e){var Be,je;const t=(Be=this.fill_)==null?void 0:Be.getKey(),ke=`${e},${this.angle_},${this.radius},${this.radius2_},${this.points_},${t}`+Object.values(this.renderOptions_).join(",");let Ge=(je=shared.get(ke,null,null))==null?void 0:je.getImage(1);if(!Ge){const Ve=this.renderOptions_,Ze=Math.ceil(Ve.size*e),Qe=createCanvasContext2D(Ze,Ze);this.draw_(Ve,Qe,e),Ge=Qe.canvas,shared.set(ke,null,null,new IconImage(Ge,void 0,null,ImageState.LOADED,null))}return Ge}getPixelRatio(e){return e}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e,this.render()}listenImageChange(e){}load(){}unlistenImageChange(e){}calculateLineJoinSize_(e,t,ke){if(t===0||this.points_===1/0||e!=="bevel"&&e!=="miter")return t;let Ge=this.radius,Be=this.radius2_===void 0?Ge:this.radius2_;if(Ge<Be){const xn=Ge;Ge=Be,Be=xn}const je=this.radius2_===void 0?this.points_:this.points_*2,Ve=2*Math.PI/je,Ze=Be*Math.sin(Ve),Qe=Math.sqrt(Be*Be-Ze*Ze),en=Ge-Qe,tn=Math.sqrt(Ze*Ze+en*en),an=tn/Ze;if(e==="miter"&&an<=ke)return an*t;const cn=t/2/an,un=t/2*(en/tn),fn=Math.sqrt((Ge+cn)*(Ge+cn)+un*un)-Ge;if(this.radius2_===void 0||e==="bevel")return fn*2;const pn=Ge*Math.sin(Ve),gn=Math.sqrt(Ge*Ge-pn*pn),yn=Be-gn,An=Math.sqrt(pn*pn+yn*yn)/pn;if(An<=ke){const xn=An*t/2-Be-Ge;return 2*Math.max(fn,xn)}return fn*2}createRenderOptions(){let e=defaultLineCap,t=defaultLineJoin,ke=0,Ge=null,Be=0,je,Ve=0;this.stroke_&&(je=asColorLike(this.stroke_.getColor()??defaultStrokeStyle),Ve=this.stroke_.getWidth()??defaultLineWidth,Ge=this.stroke_.getLineDash(),Be=this.stroke_.getLineDashOffset()??0,t=this.stroke_.getLineJoin()??defaultLineJoin,e=this.stroke_.getLineCap()??defaultLineCap,ke=this.stroke_.getMiterLimit()??defaultMiterLimit);const Ze=this.calculateLineJoinSize_(t,Ve,ke),Qe=Math.max(this.radius,this.radius2_||0),en=Math.ceil(2*Qe+Ze);return{strokeStyle:je,strokeWidth:Ve,size:en,lineCap:e,lineDash:Ge,lineDashOffset:Be,lineJoin:t,miterLimit:ke}}render(){this.renderOptions_=this.createRenderOptions();const e=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[e,e]}draw_(e,t,ke){if(t.scale(ke,ke),t.translate(e.size/2,e.size/2),this.createPath_(t),this.fill_){let Ge=this.fill_.getColor();Ge===null&&(Ge=defaultFillStyle),t.fillStyle=asColorLike(Ge),t.fill()}e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}createHitDetectionCanvas_(e){let t;if(this.fill_){let ke=this.fill_.getColor(),Ge=0;typeof ke=="string"&&(ke=asArray(ke)),ke===null?Ge=1:Array.isArray(ke)&&(Ge=ke.length===4?ke[3]:1),Ge===0&&(t=createCanvasContext2D(e.size,e.size),this.drawHitDetectionCanvas_(e,t))}return t?t.canvas:this.getImage(1)}createPath_(e){let t=this.points_;const ke=this.radius;if(t===1/0)e.arc(0,0,ke,0,2*Math.PI);else{const Ge=this.radius2_===void 0?ke:this.radius2_;this.radius2_!==void 0&&(t*=2);const Be=this.angle_-Math.PI/2,je=2*Math.PI/t;for(let Ve=0;Ve<t;Ve++){const Ze=Be+Ve*je,Qe=Ve%2===0?ke:Ge;e.lineTo(Qe*Math.cos(Ze),Qe*Math.sin(Ze))}e.closePath()}}drawHitDetectionCanvas_(e,t){t.translate(e.size/2,e.size/2),this.createPath_(t),t.fillStyle=defaultFillStyle,t.fill(),e.strokeStyle&&(t.strokeStyle=e.strokeStyle,t.lineWidth=e.strokeWidth,e.lineDash&&(t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset),t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit,t.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class CircleStyle extends RegularShape{constructor(e){e=e||{radius:5},super({points:1/0,fill:e.fill,radius:e.radius,stroke:e.stroke,scale:e.scale!==void 0?e.scale:1,rotation:e.rotation!==void 0?e.rotation:0,rotateWithView:e.rotateWithView!==void 0?e.rotateWithView:!1,displacement:e.displacement!==void 0?e.displacement:[0,0],declutterMode:e.declutterMode})}clone(){const e=this.getScale(),t=new CircleStyle({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(e)?e.slice():e,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return t.setOpacity(this.getOpacity()),t}setRadius(e){this.radius=e,this.render()}}class Fill{constructor(e){e=e||{},this.patternImage_=null,this.color_=null,e.color!==void 0&&this.setColor(e.color)}clone(){const e=this.getColor();return new Fill({color:Array.isArray(e)?e.slice():e||void 0})}getColor(){return this.color_}setColor(e){if(e!==null&&typeof e=="object"&&"src"in e){const t=get$2(null,e.src,"anonymous",void 0,e.offset?null:e.color?e.color:null,!(e.offset&&e.size));t.ready().then(()=>{this.patternImage_=null}),t.getImageState()===ImageState.IDLE&&t.load(),t.getImageState()===ImageState.LOADING&&(this.patternImage_=t)}this.color_=e}getKey(){const e=this.getColor();return e?e instanceof CanvasPattern||e instanceof CanvasGradient?getUid(e):typeof e=="object"&&"src"in e?e.src+":"+e.offset:asArray(e).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}class Stroke{constructor(e){e=e||{},this.color_=e.color!==void 0?e.color:null,this.lineCap_=e.lineCap,this.lineDash_=e.lineDash!==void 0?e.lineDash:null,this.lineDashOffset_=e.lineDashOffset,this.lineJoin_=e.lineJoin,this.miterLimit_=e.miterLimit,this.width_=e.width}clone(){const e=this.getColor();return new Stroke({color:Array.isArray(e)?e.slice():e||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(e){this.color_=e}setLineCap(e){this.lineCap_=e}setLineDash(e){this.lineDash_=e}setLineDashOffset(e){this.lineDashOffset_=e}setLineJoin(e){this.lineJoin_=e}setMiterLimit(e){this.miterLimit_=e}setWidth(e){this.width_=e}}let Style$1=class Vf{constructor(e){e=e||{},this.geometry_=null,this.geometryFunction_=defaultGeometryFunction,e.geometry!==void 0&&this.setGeometry(e.geometry),this.fill_=e.fill!==void 0?e.fill:null,this.image_=e.image!==void 0?e.image:null,this.renderer_=e.renderer!==void 0?e.renderer:null,this.hitDetectionRenderer_=e.hitDetectionRenderer!==void 0?e.hitDetectionRenderer:null,this.stroke_=e.stroke!==void 0?e.stroke:null,this.text_=e.text!==void 0?e.text:null,this.zIndex_=e.zIndex}clone(){let e=this.getGeometry();return e&&typeof e=="object"&&(e=e.clone()),new Vf({geometry:e??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(e){this.renderer_=e}setHitDetectionRenderer(e){this.hitDetectionRenderer_=e}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(e){this.fill_=e}getImage(){return this.image_}setImage(e){this.image_=e}getStroke(){return this.stroke_}setStroke(e){this.stroke_=e}getText(){return this.text_}setText(e){this.text_=e}getZIndex(){return this.zIndex_}setGeometry(e){typeof e=="function"?this.geometryFunction_=e:typeof e=="string"?this.geometryFunction_=function(t){return t.get(e)}:e?e!==void 0&&(this.geometryFunction_=function(){return e}):this.geometryFunction_=defaultGeometryFunction,this.geometry_=e}setZIndex(e){this.zIndex_=e}};function toFunction(Oe){let e;if(typeof Oe=="function")e=Oe;else{let t;Array.isArray(Oe)?t=Oe:(assert(typeof Oe.getZIndex=="function","Expected an `Style` or an array of `Style`"),t=[Oe]),e=function(){return t}}return e}let defaultStyles=null;function createDefaultStyle(Oe,e){if(!defaultStyles){const t=new Fill({color:"rgba(255,255,255,0.4)"}),ke=new Stroke({color:"#3399CC",width:1.25});defaultStyles=[new Style$1({image:new CircleStyle({fill:t,stroke:ke,radius:5}),fill:t,stroke:ke})]}return defaultStyles}function createEditingStyle(){const Oe={},e=[255,255,255,1],t=[0,153,255,1],ke=3;return Oe.Polygon=[new Style$1({fill:new Fill({color:[255,255,255,.5]})})],Oe.MultiPolygon=Oe.Polygon,Oe.LineString=[new Style$1({stroke:new Stroke({color:e,width:ke+2})}),new Style$1({stroke:new Stroke({color:t,width:ke})})],Oe.MultiLineString=Oe.LineString,Oe.Circle=Oe.Polygon.concat(Oe.LineString),Oe.Point=[new Style$1({image:new CircleStyle({radius:ke*2,fill:new Fill({color:t}),stroke:new Stroke({color:e,width:ke/2})}),zIndex:1/0})],Oe.MultiPoint=Oe.Point,Oe.GeometryCollection=Oe.Polygon.concat(Oe.LineString,Oe.Point),Oe}function defaultGeometryFunction(Oe){return Oe.getGeometry()}function calculateScale(Oe,e,t,ke){return t!==void 0&&ke!==void 0?[t/Oe,ke/e]:t!==void 0?t/Oe:ke!==void 0?ke/e:1}class Icon extends ImageStyle{constructor(e){e=e||{};const t=e.opacity!==void 0?e.opacity:1,ke=e.rotation!==void 0?e.rotation:0,Ge=e.scale!==void 0?e.scale:1,Be=e.rotateWithView!==void 0?e.rotateWithView:!1;super({opacity:t,rotation:ke,scale:Ge,displacement:e.displacement!==void 0?e.displacement:[0,0],rotateWithView:Be,declutterMode:e.declutterMode}),this.anchor_=e.anchor!==void 0?e.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=e.anchorOrigin!==void 0?e.anchorOrigin:"top-left",this.anchorXUnits_=e.anchorXUnits!==void 0?e.anchorXUnits:"fraction",this.anchorYUnits_=e.anchorYUnits!==void 0?e.anchorYUnits:"fraction",this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:null;const je=e.img!==void 0?e.img:null;let Ve=e.src;assert(!(Ve!==void 0&&je),"`image` and `src` cannot be provided at the same time"),(Ve===void 0||Ve.length===0)&&je&&(Ve=je.src||getUid(je)),assert(Ve!==void 0&&Ve.length>0,"A defined and non-empty `src` or `image` must be provided"),assert(!((e.width!==void 0||e.height!==void 0)&&e.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let Ze;if(e.src!==void 0?Ze=ImageState.IDLE:je!==void 0&&("complete"in je?je.complete?Ze=je.src?ImageState.LOADED:ImageState.IDLE:Ze=ImageState.LOADING:Ze=ImageState.LOADED),this.color_=e.color!==void 0?asArray(e.color):null,this.iconImage_=get$2(je,Ve,this.crossOrigin_,Ze,this.color_),this.offset_=e.offset!==void 0?e.offset:[0,0],this.offsetOrigin_=e.offsetOrigin!==void 0?e.offsetOrigin:"top-left",this.origin_=null,this.size_=e.size!==void 0?e.size:null,this.initialOptions_,e.width!==void 0||e.height!==void 0){let Qe,en;if(e.size)[Qe,en]=e.size;else{const tn=this.getImage(1);if(tn.width&&tn.height)Qe=tn.width,en=tn.height;else if(tn instanceof HTMLImageElement){this.initialOptions_=e;const an=()=>{if(this.unlistenImageChange(an),!this.initialOptions_)return;const cn=this.iconImage_.getSize();this.setScale(calculateScale(cn[0],cn[1],e.width,e.height))};this.listenImageChange(an);return}}Qe!==void 0&&this.setScale(calculateScale(Qe,en,e.width,e.height))}}clone(){let e,t,ke;return this.initialOptions_?(t=this.initialOptions_.width,ke=this.initialOptions_.height):(e=this.getScale(),e=Array.isArray(e)?e.slice():e),new Icon({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:e,width:t,height:ke,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let e=this.normalizedAnchor_;if(!e){e=this.anchor_;const Ge=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!Ge)return null;e=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(e[0]*=Ge[0]),this.anchorYUnits_=="fraction"&&(e[1]*=Ge[1])}if(this.anchorOrigin_!="top-left"){if(!Ge)return null;e===this.anchor_&&(e=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(e[0]=-e[0]+Ge[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(e[1]=-e[1]+Ge[1])}this.normalizedAnchor_=e}const t=this.getDisplacement(),ke=this.getScaleArray();return[e[0]-t[0]/ke[0],e[1]+t[1]/ke[1]]}setAnchor(e){this.anchor_=e,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(e){return this.iconImage_.getImage(e)}getPixelRatio(e){return this.iconImage_.getPixelRatio(e)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let e=this.offset_;if(this.offsetOrigin_!="top-left"){const t=this.getSize(),ke=this.iconImage_.getSize();if(!t||!ke)return null;e=e.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(e[0]=ke[0]-t[0]-e[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(e[1]=ke[1]-t[1]-e[1])}return this.origin_=e,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const e=this.getScaleArray();if(this.size_)return this.size_[0]*e[0];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[0]*e[0]}getHeight(){const e=this.getScaleArray();if(this.size_)return this.size_[1]*e[1];if(this.iconImage_.getImageState()==ImageState.LOADED)return this.iconImage_.getSize()[1]*e[1]}setScale(e){delete this.initialOptions_,super.setScale(e)}listenImageChange(e){this.iconImage_.addEventListener(EventType.CHANGE,e)}load(){this.iconImage_.load()}unlistenImageChange(e){this.iconImage_.removeEventListener(EventType.CHANGE,e)}ready(){return this.iconImage_.ready()}}const DEFAULT_FILL_COLOR="#333";class Text{constructor(e){e=e||{},this.font_=e.font,this.rotation_=e.rotation,this.rotateWithView_=e.rotateWithView,this.keepUpright_=e.keepUpright,this.scale_=e.scale,this.scaleArray_=toSize(e.scale!==void 0?e.scale:1),this.text_=e.text,this.textAlign_=e.textAlign,this.justify_=e.justify,this.repeat_=e.repeat,this.textBaseline_=e.textBaseline,this.fill_=e.fill!==void 0?e.fill:new Fill({color:DEFAULT_FILL_COLOR}),this.maxAngle_=e.maxAngle!==void 0?e.maxAngle:Math.PI/4,this.placement_=e.placement!==void 0?e.placement:"point",this.overflow_=!!e.overflow,this.stroke_=e.stroke!==void 0?e.stroke:null,this.offsetX_=e.offsetX!==void 0?e.offsetX:0,this.offsetY_=e.offsetY!==void 0?e.offsetY:0,this.backgroundFill_=e.backgroundFill?e.backgroundFill:null,this.backgroundStroke_=e.backgroundStroke?e.backgroundStroke:null,this.padding_=e.padding===void 0?null:e.padding,this.declutterMode_=e.declutterMode}clone(){const e=this.getScale();return new Text({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(e)?e.slice():e,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(e){this.overflow_=e}setFont(e){this.font_=e}setMaxAngle(e){this.maxAngle_=e}setOffsetX(e){this.offsetX_=e}setOffsetY(e){this.offsetY_=e}setPlacement(e){this.placement_=e}setRepeat(e){this.repeat_=e}setRotateWithView(e){this.rotateWithView_=e}setKeepUpright(e){this.keepUpright_=e}setFill(e){this.fill_=e}setRotation(e){this.rotation_=e}setScale(e){this.scale_=e,this.scaleArray_=toSize(e!==void 0?e:1)}setStroke(e){this.stroke_=e}setText(e){this.text_=e}setTextAlign(e){this.textAlign_=e}setJustify(e){this.justify_=e}setTextBaseline(e){this.textBaseline_=e}setBackgroundFill(e){this.backgroundFill_=e}setBackgroundStroke(e){this.backgroundStroke_=e}setPadding(e){this.padding_=e}}let numTypes=0;const BooleanType$1=1<<numTypes++,NumberType$1=1<<numTypes++,StringType$1=1<<numTypes++,ColorType$1=1<<numTypes++,NumberArrayType=1<<numTypes++,SizeType=1<<numTypes++,AnyType=Math.pow(2,numTypes)-1,typeNames={[BooleanType$1]:"boolean",[NumberType$1]:"number",[StringType$1]:"string",[ColorType$1]:"color",[NumberArrayType]:"number[]",[SizeType]:"size"},namedTypes=Object.keys(typeNames).map(Number).sort(ascending);function isSpecific(Oe){return Oe in typeNames}function typeName(Oe){const e=[];for(const t of namedTypes)includesType(Oe,t)&&e.push(typeNames[t]);return e.length===0?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function includesType(Oe,e){return(Oe&e)===e}function isType(Oe,e){return Oe===e}class LiteralExpression{constructor(e,t){if(!isSpecific(e))throw new Error(`literal expressions must have a specific type, got ${typeName(e)}`);this.type=e,this.value=t}}class CallExpression{constructor(e,t,...ke){this.type=e,this.operator=t,this.args=ke}}function newParsingContext(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1}}function parse$2(Oe,e,t){switch(typeof Oe){case"boolean":{if(isType(e,StringType$1))return new LiteralExpression(StringType$1,Oe?"true":"false");if(!includesType(e,BooleanType$1))throw new Error(`got a boolean, but expected ${typeName(e)}`);return new LiteralExpression(BooleanType$1,Oe)}case"number":{if(isType(e,SizeType))return new LiteralExpression(SizeType,toSize(Oe));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!Oe);if(isType(e,StringType$1))return new LiteralExpression(StringType$1,Oe.toString());if(!includesType(e,NumberType$1))throw new Error(`got a number, but expected ${typeName(e)}`);return new LiteralExpression(NumberType$1,Oe)}case"string":{if(isType(e,ColorType$1))return new LiteralExpression(ColorType$1,fromString(Oe));if(isType(e,BooleanType$1))return new LiteralExpression(BooleanType$1,!!Oe);if(!includesType(e,StringType$1))throw new Error(`got a string, but expected ${typeName(e)}`);return new LiteralExpression(StringType$1,Oe)}}if(!Array.isArray(Oe))throw new Error("expression must be an array or a primitive value");if(Oe.length===0)throw new Error("empty expression");if(typeof Oe[0]=="string")return parseCallExpression(Oe,e,t);for(const ke of Oe)if(typeof ke!="number")throw new Error("expected an array of numbers");if(isType(e,SizeType)){if(Oe.length!==2)throw new Error(`expected an array of two values for a size, got ${Oe.length}`);return new LiteralExpression(SizeType,Oe)}if(isType(e,ColorType$1)){if(Oe.length===3)return new LiteralExpression(ColorType$1,[...Oe,1]);if(Oe.length===4)return new LiteralExpression(ColorType$1,Oe);throw new Error(`expected an array of 3 or 4 values for a color, got ${Oe.length}`)}if(!includesType(e,NumberArrayType))throw new Error(`got an array of numbers, but expected ${typeName(e)}`);return new LiteralExpression(NumberArrayType,Oe)}const Ops={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},parsers={[Ops.Get]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Var]:createCallExpressionParser(hasArgsCount(1,1),withVarArgs),[Ops.Has]:createCallExpressionParser(hasArgsCount(1,1/0),withGetArgs),[Ops.Id]:createCallExpressionParser(usesFeatureId,withNoArgs),[Ops.Concat]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(StringType$1)),[Ops.GeometryType]:createCallExpressionParser(usesGeometryType,withNoArgs),[Ops.LineMetric]:createCallExpressionParser(withNoArgs),[Ops.Resolution]:createCallExpressionParser(withNoArgs),[Ops.Zoom]:createCallExpressionParser(withNoArgs),[Ops.Time]:createCallExpressionParser(withNoArgs),[Ops.Any]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.All]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(BooleanType$1)),[Ops.Not]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1)),[Ops.Equal]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.NotEqual]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(AnyType)),[Ops.GreaterThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.GreaterThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThan]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.LessThanOrEqualTo]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Multiply]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Coalesce]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfReturnType),[Ops.Divide]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Add]:createCallExpressionParser(hasArgsCount(2,1/0),withArgsOfType(NumberType$1)),[Ops.Subtract]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Clamp]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Mod]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Pow]:createCallExpressionParser(hasArgsCount(2,2),withArgsOfType(NumberType$1)),[Ops.Abs]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Floor]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Ceil]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Round]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Sin]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Cos]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Atan]:createCallExpressionParser(hasArgsCount(1,2),withArgsOfType(NumberType$1)),[Ops.Sqrt]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(NumberType$1)),[Ops.Match]:createCallExpressionParser(hasArgsCount(4,1/0),hasEvenArgs,withMatchArgs),[Ops.Between]:createCallExpressionParser(hasArgsCount(3,3),withArgsOfType(NumberType$1)),[Ops.Interpolate]:createCallExpressionParser(hasArgsCount(6,1/0),hasEvenArgs,withInterpolateArgs),[Ops.Case]:createCallExpressionParser(hasArgsCount(3,1/0),hasOddArgs,withCaseArgs),[Ops.In]:createCallExpressionParser(hasArgsCount(2,2),withInArgs),[Ops.Number]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.String]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(AnyType)),[Ops.Array]:createCallExpressionParser(hasArgsCount(1,1/0),withArgsOfType(NumberType$1)),[Ops.Color]:createCallExpressionParser(hasArgsCount(1,4),withArgsOfType(NumberType$1)),[Ops.Band]:createCallExpressionParser(hasArgsCount(1,3),withArgsOfType(NumberType$1)),[Ops.Palette]:createCallExpressionParser(hasArgsCount(2,2),withPaletteArgs),[Ops.ToString]:createCallExpressionParser(hasArgsCount(1,1),withArgsOfType(BooleanType$1|NumberType$1|StringType$1|ColorType$1))};function withGetArgs(Oe,e,t){const ke=Oe.length-1,Ge=new Array(ke);for(let Be=0;Be<ke;++Be){const je=Oe[Be+1];switch(typeof je){case"number":{Ge[Be]=new LiteralExpression(NumberType$1,je);break}case"string":{Ge[Be]=new LiteralExpression(StringType$1,je);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${je}`)}Be===0&&t.properties.add(String(je))}return Ge}function withVarArgs(Oe,e,t){const ke=Oe[1];if(typeof ke!="string")throw new Error("expected a string argument for var operation");return t.variables.add(ke),[new LiteralExpression(StringType$1,ke)]}function usesFeatureId(Oe,e,t){t.featureId=!0}function usesGeometryType(Oe,e,t){t.geometryType=!0}function withNoArgs(Oe,e,t){const ke=Oe[0];if(Oe.length!==1)throw new Error(`expected no arguments for ${ke} operation`);return[]}function hasArgsCount(Oe,e){return function(t,ke,Ge){const Be=t[0],je=t.length-1;if(Oe===e){if(je!==Oe){const Ve=Oe===1?"":"s";throw new Error(`expected ${Oe} argument${Ve} for ${Be}, got ${je}`)}}else if(je<Oe||je>e){const Ve=e===1/0?`${Oe} or more`:`${Oe} to ${e}`;throw new Error(`expected ${Ve} arguments for ${Be}, got ${je}`)}}}function withArgsOfReturnType(Oe,e,t){const ke=Oe.length-1,Ge=new Array(ke);for(let Be=0;Be<ke;++Be){const je=parse$2(Oe[Be+1],e,t);Ge[Be]=je}return Ge}function withArgsOfType(Oe){return function(e,t,ke){const Ge=e.length-1,Be=new Array(Ge);for(let je=0;je<Ge;++je){const Ve=parse$2(e[je+1],Oe,ke);Be[je]=Ve}return Be}}function hasOddArgs(Oe,e,t){const ke=Oe[0],Ge=Oe.length-1;if(Ge%2===0)throw new Error(`expected an odd number of arguments for ${ke}, got ${Ge} instead`)}function hasEvenArgs(Oe,e,t){const ke=Oe[0],Ge=Oe.length-1;if(Ge%2===1)throw new Error(`expected an even number of arguments for operation ${ke}, got ${Ge} instead`)}function withMatchArgs(Oe,e,t){const ke=Oe.length-1,Ge=StringType$1|NumberType$1|BooleanType$1,Be=parse$2(Oe[1],Ge,t),je=parse$2(Oe[Oe.length-1],e,t),Ve=new Array(ke-2);for(let Ze=0;Ze<ke-2;Ze+=2){try{const Qe=parse$2(Oe[Ze+2],Be.type,t);Ve[Ze]=Qe}catch(Qe){throw new Error(`failed to parse argument ${Ze+1} of match expression: ${Qe.message}`)}try{const Qe=parse$2(Oe[Ze+3],je.type,t);Ve[Ze+1]=Qe}catch(Qe){throw new Error(`failed to parse argument ${Ze+2} of match expression: ${Qe.message}`)}}return[Be,...Ve,je]}function withInterpolateArgs(Oe,e,t){const ke=Oe[1];let Ge;switch(ke[0]){case"linear":Ge=1;break;case"exponential":const Ze=ke[1];if(typeof Ze!="number"||Ze<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(Ze)} instead`);Ge=Ze;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(ke)}`)}const Be=new LiteralExpression(NumberType$1,Ge);let je;try{je=parse$2(Oe[2],NumberType$1,t)}catch(Ze){throw new Error(`failed to parse argument 1 in interpolate expression: ${Ze.message}`)}const Ve=new Array(Oe.length-3);for(let Ze=0;Ze<Ve.length;Ze+=2){try{const Qe=parse$2(Oe[Ze+3],NumberType$1,t);Ve[Ze]=Qe}catch(Qe){throw new Error(`failed to parse argument ${Ze+2} for interpolate expression: ${Qe.message}`)}try{const Qe=parse$2(Oe[Ze+4],e,t);Ve[Ze+1]=Qe}catch(Qe){throw new Error(`failed to parse argument ${Ze+3} for interpolate expression: ${Qe.message}`)}}return[Be,je,...Ve]}function withCaseArgs(Oe,e,t){const ke=parse$2(Oe[Oe.length-1],e,t),Ge=new Array(Oe.length-1);for(let Be=0;Be<Ge.length-1;Be+=2){try{const je=parse$2(Oe[Be+1],BooleanType$1,t);Ge[Be]=je}catch(je){throw new Error(`failed to parse argument ${Be} of case expression: ${je.message}`)}try{const je=parse$2(Oe[Be+2],ke.type,t);Ge[Be+1]=je}catch(je){throw new Error(`failed to parse argument ${Be+1} of case expression: ${je.message}`)}}return Ge[Ge.length-1]=ke,Ge}function withInArgs(Oe,e,t){let ke=Oe[2];if(!Array.isArray(ke))throw new Error('the second argument for the "in" operator must be an array');let Ge;if(typeof ke[0]=="string"){if(ke[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(ke[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');ke=ke[1],Ge=StringType$1}else Ge=NumberType$1;const Be=new Array(ke.length);for(let Ve=0;Ve<Be.length;Ve++)try{const Ze=parse$2(ke[Ve],Ge,t);Be[Ve]=Ze}catch(Ze){throw new Error(`failed to parse haystack item ${Ve} for "in" expression: ${Ze.message}`)}return[parse$2(Oe[1],Ge,t),...Be]}function withPaletteArgs(Oe,e,t){let ke;try{ke=parse$2(Oe[1],NumberType$1,t)}catch(je){throw new Error(`failed to parse first argument in palette expression: ${je.message}`)}const Ge=Oe[2];if(!Array.isArray(Ge))throw new Error("the second argument of palette must be an array");const Be=new Array(Ge.length);for(let je=0;je<Be.length;je++){let Ve;try{Ve=parse$2(Ge[je],ColorType$1,t)}catch(Ze){throw new Error(`failed to parse color at index ${je} in palette expression: ${Ze.message}`)}if(!(Ve instanceof LiteralExpression))throw new Error(`the palette color at index ${je} must be a literal value`);Be[je]=Ve}return[ke,...Be]}function createCallExpressionParser(...Oe){return function(e,t,ke){const Ge=e[0];let Be;for(let je=0;je<Oe.length;je++){const Ve=Oe[je](e,t,ke);if(je==Oe.length-1){if(!Ve)throw new Error("expected last argument validator to return the parsed args");Be=Ve}}return new CallExpression(t,Ge,...Be)}}function parseCallExpression(Oe,e,t){const ke=Oe[0],Ge=parsers[ke];if(!Ge)throw new Error(`unknown operator: ${ke}`);return Ge(Oe,e,t)}function computeGeometryType(Oe){if(!Oe)return"";const e=Oe.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return computeGeometryType(Oe.getGeometries()[0]);default:return""}}function newEvaluationContext(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function buildExpression(Oe,e,t){const ke=parse$2(Oe,e,t);return compileExpression(ke)}function compileExpression(Oe,e){if(Oe instanceof LiteralExpression){if(Oe.type===ColorType$1&&typeof Oe.value=="string"){const ke=fromString(Oe.value);return function(){return ke}}return function(){return Oe.value}}const t=Oe.operator;switch(t){case Ops.Number:case Ops.String:case Ops.Coalesce:return compileAssertionExpression(Oe);case Ops.Get:case Ops.Var:case Ops.Has:return compileAccessorExpression(Oe);case Ops.Id:return ke=>ke.featureId;case Ops.GeometryType:return ke=>ke.geometryType;case Ops.Concat:{const ke=Oe.args.map(Ge=>compileExpression(Ge));return Ge=>"".concat(...ke.map(Be=>Be(Ge).toString()))}case Ops.Resolution:return ke=>ke.resolution;case Ops.Any:case Ops.All:case Ops.Between:case Ops.In:case Ops.Not:return compileLogicalExpression(Oe);case Ops.Equal:case Ops.NotEqual:case Ops.LessThan:case Ops.LessThanOrEqualTo:case Ops.GreaterThan:case Ops.GreaterThanOrEqualTo:return compileComparisonExpression(Oe);case Ops.Multiply:case Ops.Divide:case Ops.Add:case Ops.Subtract:case Ops.Clamp:case Ops.Mod:case Ops.Pow:case Ops.Abs:case Ops.Floor:case Ops.Ceil:case Ops.Round:case Ops.Sin:case Ops.Cos:case Ops.Atan:case Ops.Sqrt:return compileNumericExpression(Oe);case Ops.Case:return compileCaseExpression(Oe);case Ops.Match:return compileMatchExpression(Oe);case Ops.Interpolate:return compileInterpolateExpression(Oe);case Ops.ToString:return compileConvertExpression(Oe);default:throw new Error(`Unsupported operator ${t}`)}}function compileAssertionExpression(Oe,e){const t=Oe.operator,ke=Oe.args.length,Ge=new Array(ke);for(let Be=0;Be<ke;++Be)Ge[Be]=compileExpression(Oe.args[Be]);switch(t){case Ops.Coalesce:return Be=>{for(let je=0;je<ke;++je){const Ve=Ge[je](Be);if(typeof Ve<"u"&&Ve!==null)return Ve}throw new Error("Expected one of the values to be non-null")};case Ops.Number:case Ops.String:return Be=>{for(let je=0;je<ke;++je){const Ve=Ge[je](Be);if(typeof Ve===t)return Ve}throw new Error(`Expected one of the values to be a ${t}`)};default:throw new Error(`Unsupported assertion operator ${t}`)}}function compileAccessorExpression(Oe,e){const ke=Oe.args[0].value;switch(Oe.operator){case Ops.Get:return Ge=>{const Be=Oe.args;let je=Ge.properties[ke];for(let Ve=1,Ze=Be.length;Ve<Ze;++Ve){const en=Be[Ve].value;je=je[en]}return je};case Ops.Var:return Ge=>Ge.variables[ke];case Ops.Has:return Ge=>{const Be=Oe.args;if(!(ke in Ge.properties))return!1;let je=Ge.properties[ke];for(let Ve=1,Ze=Be.length;Ve<Ze;++Ve){const en=Be[Ve].value;if(!je||!Object.hasOwn(je,en))return!1;je=je[en]}return!0};default:throw new Error(`Unsupported accessor operator ${Oe.operator}`)}}function compileComparisonExpression(Oe,e){const t=Oe.operator,ke=compileExpression(Oe.args[0]),Ge=compileExpression(Oe.args[1]);switch(t){case Ops.Equal:return Be=>ke(Be)===Ge(Be);case Ops.NotEqual:return Be=>ke(Be)!==Ge(Be);case Ops.LessThan:return Be=>ke(Be)<Ge(Be);case Ops.LessThanOrEqualTo:return Be=>ke(Be)<=Ge(Be);case Ops.GreaterThan:return Be=>ke(Be)>Ge(Be);case Ops.GreaterThanOrEqualTo:return Be=>ke(Be)>=Ge(Be);default:throw new Error(`Unsupported comparison operator ${t}`)}}function compileLogicalExpression(Oe,e){const t=Oe.operator,ke=Oe.args.length,Ge=new Array(ke);for(let Be=0;Be<ke;++Be)Ge[Be]=compileExpression(Oe.args[Be]);switch(t){case Ops.Any:return Be=>{for(let je=0;je<ke;++je)if(Ge[je](Be))return!0;return!1};case Ops.All:return Be=>{for(let je=0;je<ke;++je)if(!Ge[je](Be))return!1;return!0};case Ops.Between:return Be=>{const je=Ge[0](Be),Ve=Ge[1](Be),Ze=Ge[2](Be);return je>=Ve&&je<=Ze};case Ops.In:return Be=>{const je=Ge[0](Be);for(let Ve=1;Ve<ke;++Ve)if(je===Ge[Ve](Be))return!0;return!1};case Ops.Not:return Be=>!Ge[0](Be);default:throw new Error(`Unsupported logical operator ${t}`)}}function compileNumericExpression(Oe,e){const t=Oe.operator,ke=Oe.args.length,Ge=new Array(ke);for(let Be=0;Be<ke;++Be)Ge[Be]=compileExpression(Oe.args[Be]);switch(t){case Ops.Multiply:return Be=>{let je=1;for(let Ve=0;Ve<ke;++Ve)je*=Ge[Ve](Be);return je};case Ops.Divide:return Be=>Ge[0](Be)/Ge[1](Be);case Ops.Add:return Be=>{let je=0;for(let Ve=0;Ve<ke;++Ve)je+=Ge[Ve](Be);return je};case Ops.Subtract:return Be=>Ge[0](Be)-Ge[1](Be);case Ops.Clamp:return Be=>{const je=Ge[0](Be),Ve=Ge[1](Be);if(je<Ve)return Ve;const Ze=Ge[2](Be);return je>Ze?Ze:je};case Ops.Mod:return Be=>Ge[0](Be)%Ge[1](Be);case Ops.Pow:return Be=>Math.pow(Ge[0](Be),Ge[1](Be));case Ops.Abs:return Be=>Math.abs(Ge[0](Be));case Ops.Floor:return Be=>Math.floor(Ge[0](Be));case Ops.Ceil:return Be=>Math.ceil(Ge[0](Be));case Ops.Round:return Be=>Math.round(Ge[0](Be));case Ops.Sin:return Be=>Math.sin(Ge[0](Be));case Ops.Cos:return Be=>Math.cos(Ge[0](Be));case Ops.Atan:return ke===2?Be=>Math.atan2(Ge[0](Be),Ge[1](Be)):Be=>Math.atan(Ge[0](Be));case Ops.Sqrt:return Be=>Math.sqrt(Ge[0](Be));default:throw new Error(`Unsupported numeric operator ${t}`)}}function compileCaseExpression(Oe,e){const t=Oe.args.length,ke=new Array(t);for(let Ge=0;Ge<t;++Ge)ke[Ge]=compileExpression(Oe.args[Ge]);return Ge=>{for(let Be=0;Be<t-1;Be+=2)if(ke[Be](Ge))return ke[Be+1](Ge);return ke[t-1](Ge)}}function compileMatchExpression(Oe,e){const t=Oe.args.length,ke=new Array(t);for(let Ge=0;Ge<t;++Ge)ke[Ge]=compileExpression(Oe.args[Ge]);return Ge=>{const Be=ke[0](Ge);for(let je=1;je<t;je+=2)if(Be===ke[je](Ge))return ke[je+1](Ge);return ke[t-1](Ge)}}function compileInterpolateExpression(Oe,e){const t=Oe.args.length,ke=new Array(t);for(let Ge=0;Ge<t;++Ge)ke[Ge]=compileExpression(Oe.args[Ge]);return Ge=>{const Be=ke[0](Ge),je=ke[1](Ge);let Ve,Ze;for(let Qe=2;Qe<t;Qe+=2){const en=ke[Qe](Ge);let tn=ke[Qe+1](Ge);const an=Array.isArray(tn);if(an&&(tn=withAlpha(tn)),en>=je)return Qe===2?tn:an?interpolateColor(Be,je,Ve,Ze,en,tn):interpolateNumber(Be,je,Ve,Ze,en,tn);Ve=en,Ze=tn}return Ze}}function compileConvertExpression(Oe,e){const t=Oe.operator,ke=Oe.args.length,Ge=new Array(ke);for(let Be=0;Be<ke;++Be)Ge[Be]=compileExpression(Oe.args[Be]);switch(t){case Ops.ToString:return Be=>{const je=Ge[0](Be);return Oe.args[0].type===ColorType$1?toString$2(je):je.toString()};default:throw new Error(`Unsupported convert operator ${t}`)}}function interpolateNumber(Oe,e,t,ke,Ge,Be){const je=Ge-t;if(je===0)return ke;const Ve=e-t,Ze=Oe===1?Ve/je:(Math.pow(Oe,Ve)-1)/(Math.pow(Oe,je)-1);return ke+Ze*(Be-ke)}function interpolateColor(Oe,e,t,ke,Ge,Be){if(Ge-t===0)return ke;const Ve=rgbaToLcha(ke),Ze=rgbaToLcha(Be);let Qe=Ze[2]-Ve[2];Qe>180?Qe-=360:Qe<-180&&(Qe+=360);const en=[interpolateNumber(Oe,e,t,Ve[0],Ge,Ze[0]),interpolateNumber(Oe,e,t,Ve[1],Ge,Ze[1]),Ve[2]+interpolateNumber(Oe,e,t,0,Ge,Qe),interpolateNumber(Oe,e,t,ke[3],Ge,Be[3])];return normalize(lchaToRgba(en))}function always(Oe){return!0}function rulesToStyleFunction(Oe){const e=newParsingContext(),t=buildRuleSet(Oe,e),ke=newEvaluationContext();return function(Ge,Be){if(ke.properties=Ge.getPropertiesInternal(),ke.resolution=Be,e.featureId){const je=Ge.getId();je!==void 0?ke.featureId=je:ke.featureId=null}return e.geometryType&&(ke.geometryType=computeGeometryType(Ge.getGeometry())),t(ke)}}function flatStylesToStyleFunction(Oe){const e=newParsingContext(),t=Oe.length,ke=new Array(t);for(let je=0;je<t;++je)ke[je]=buildStyle(Oe[je],e);const Ge=newEvaluationContext(),Be=new Array(t);return function(je,Ve){if(Ge.properties=je.getPropertiesInternal(),Ge.resolution=Ve,e.featureId){const Qe=je.getId();Qe!==void 0?Ge.featureId=Qe:Ge.featureId=null}let Ze=0;for(let Qe=0;Qe<t;++Qe){const en=ke[Qe](Ge);en&&(Be[Ze]=en,Ze+=1)}return Be.length=Ze,Be}}function buildRuleSet(Oe,e){const t=Oe.length,ke=new Array(t);for(let Ge=0;Ge<t;++Ge){const Be=Oe[Ge],je="filter"in Be?buildExpression(Be.filter,BooleanType$1,e):always;let Ve;if(Array.isArray(Be.style)){const Ze=Be.style.length;Ve=new Array(Ze);for(let Qe=0;Qe<Ze;++Qe)Ve[Qe]=buildStyle(Be.style[Qe],e)}else Ve=[buildStyle(Be.style,e)];ke[Ge]={filter:je,styles:Ve}}return function(Ge){const Be=[];let je=!1;for(let Ve=0;Ve<t;++Ve){const Ze=ke[Ve].filter;if(Ze(Ge)&&!(Oe[Ve].else&&je)){je=!0;for(const Qe of ke[Ve].styles){const en=Qe(Ge);en&&Be.push(en)}}}return Be}}function buildStyle(Oe,e){const t=buildFill(Oe,"",e),ke=buildStroke(Oe,"",e),Ge=buildText(Oe,e),Be=buildImage(Oe,e),je=numberEvaluator(Oe,"z-index",e);if(!t&&!ke&&!Ge&&!Be&&!isEmpty$1(Oe))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(Oe));const Ve=new Style$1;return function(Ze){let Qe=!0;if(t){const en=t(Ze);en&&(Qe=!1),Ve.setFill(en)}if(ke){const en=ke(Ze);en&&(Qe=!1),Ve.setStroke(en)}if(Ge){const en=Ge(Ze);en&&(Qe=!1),Ve.setText(en)}if(Be){const en=Be(Ze);en&&(Qe=!1),Ve.setImage(en)}return je&&Ve.setZIndex(je(Ze)),Qe?null:Ve}}function buildFill(Oe,e,t){let ke;if(e+"fill-pattern-src"in Oe)ke=patternEvaluator(Oe,e+"fill-",t);else{if(Oe[e+"fill-color"]==="none")return Be=>null;ke=colorLikeEvaluator(Oe,e+"fill-color",t)}if(!ke)return null;const Ge=new Fill;return function(Be){const je=ke(Be);return je===NO_COLOR?null:(Ge.setColor(je),Ge)}}function buildStroke(Oe,e,t){const ke=numberEvaluator(Oe,e+"stroke-width",t),Ge=colorLikeEvaluator(Oe,e+"stroke-color",t);if(!ke&&!Ge)return null;const Be=stringEvaluator(Oe,e+"stroke-line-cap",t),je=stringEvaluator(Oe,e+"stroke-line-join",t),Ve=numberArrayEvaluator(Oe,e+"stroke-line-dash",t),Ze=numberEvaluator(Oe,e+"stroke-line-dash-offset",t),Qe=numberEvaluator(Oe,e+"stroke-miter-limit",t),en=new Stroke;return function(tn){if(Ge){const an=Ge(tn);if(an===NO_COLOR)return null;en.setColor(an)}if(ke&&en.setWidth(ke(tn)),Be){const an=Be(tn);if(an!=="butt"&&an!=="round"&&an!=="square")throw new Error("Expected butt, round, or square line cap");en.setLineCap(an)}if(je){const an=je(tn);if(an!=="bevel"&&an!=="round"&&an!=="miter")throw new Error("Expected bevel, round, or miter line join");en.setLineJoin(an)}return Ve&&en.setLineDash(Ve(tn)),Ze&&en.setLineDashOffset(Ze(tn)),Qe&&en.setMiterLimit(Qe(tn)),en}}function buildText(Oe,e){const t="text-",ke=stringEvaluator(Oe,t+"value",e);if(!ke)return null;const Ge=buildFill(Oe,t,e),Be=buildFill(Oe,t+"background-",e),je=buildStroke(Oe,t,e),Ve=buildStroke(Oe,t+"background-",e),Ze=stringEvaluator(Oe,t+"font",e),Qe=numberEvaluator(Oe,t+"max-angle",e),en=numberEvaluator(Oe,t+"offset-x",e),tn=numberEvaluator(Oe,t+"offset-y",e),an=booleanEvaluator(Oe,t+"overflow",e),cn=stringEvaluator(Oe,t+"placement",e),un=numberEvaluator(Oe,t+"repeat",e),dn=sizeLikeEvaluator(Oe,t+"scale",e),fn=booleanEvaluator(Oe,t+"rotate-with-view",e),pn=numberEvaluator(Oe,t+"rotation",e),gn=stringEvaluator(Oe,t+"align",e),yn=stringEvaluator(Oe,t+"justify",e),vn=stringEvaluator(Oe,t+"baseline",e),An=booleanEvaluator(Oe,t+"keep-upright",e),xn=numberArrayEvaluator(Oe,t+"padding",e),wn=optionalDeclutterMode(Oe,t+"declutter-mode"),bn=new Text({declutterMode:wn});return function(Mn){if(bn.setText(ke(Mn)),Ge&&bn.setFill(Ge(Mn)),Be&&bn.setBackgroundFill(Be(Mn)),je&&bn.setStroke(je(Mn)),Ve&&bn.setBackgroundStroke(Ve(Mn)),Ze&&bn.setFont(Ze(Mn)),Qe&&bn.setMaxAngle(Qe(Mn)),en&&bn.setOffsetX(en(Mn)),tn&&bn.setOffsetY(tn(Mn)),an&&bn.setOverflow(an(Mn)),cn){const Pn=cn(Mn);if(Pn!=="point"&&Pn!=="line")throw new Error("Expected point or line for text-placement");bn.setPlacement(Pn)}if(un&&bn.setRepeat(un(Mn)),dn&&bn.setScale(dn(Mn)),fn&&bn.setRotateWithView(fn(Mn)),pn&&bn.setRotation(pn(Mn)),gn){const Pn=gn(Mn);if(Pn!=="left"&&Pn!=="center"&&Pn!=="right"&&Pn!=="end"&&Pn!=="start")throw new Error("Expected left, right, center, start, or end for text-align");bn.setTextAlign(Pn)}if(yn){const Pn=yn(Mn);if(Pn!=="left"&&Pn!=="right"&&Pn!=="center")throw new Error("Expected left, right, or center for text-justify");bn.setJustify(Pn)}if(vn){const Pn=vn(Mn);if(Pn!=="bottom"&&Pn!=="top"&&Pn!=="middle"&&Pn!=="alphabetic"&&Pn!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");bn.setTextBaseline(Pn)}return xn&&bn.setPadding(xn(Mn)),An&&bn.setKeepUpright(An(Mn)),bn}}function buildImage(Oe,e){return"icon-src"in Oe?buildIcon(Oe,e):"shape-points"in Oe?buildShape(Oe,e):"circle-radius"in Oe?buildCircle(Oe,e):null}function buildIcon(Oe,e){const t="icon-",ke=t+"src",Ge=requireString(Oe[ke],ke),Be=coordinateEvaluator(Oe,t+"anchor",e),je=sizeLikeEvaluator(Oe,t+"scale",e),Ve=numberEvaluator(Oe,t+"opacity",e),Ze=coordinateEvaluator(Oe,t+"displacement",e),Qe=numberEvaluator(Oe,t+"rotation",e),en=booleanEvaluator(Oe,t+"rotate-with-view",e),tn=optionalIconOrigin(Oe,t+"anchor-origin"),an=optionalIconAnchorUnits(Oe,t+"anchor-x-units"),cn=optionalIconAnchorUnits(Oe,t+"anchor-y-units"),un=optionalColorLike(Oe,t+"color"),dn=optionalString(Oe,t+"cross-origin"),fn=optionalNumberArray(Oe,t+"offset"),pn=optionalIconOrigin(Oe,t+"offset-origin"),gn=optionalNumber(Oe,t+"width"),yn=optionalNumber(Oe,t+"height"),vn=optionalSize(Oe,t+"size"),An=optionalDeclutterMode(Oe,t+"declutter-mode"),xn=new Icon({src:Ge,anchorOrigin:tn,anchorXUnits:an,anchorYUnits:cn,color:un,crossOrigin:dn,offset:fn,offsetOrigin:pn,height:yn,width:gn,size:vn,declutterMode:An});return function(wn){return Ve&&xn.setOpacity(Ve(wn)),Ze&&xn.setDisplacement(Ze(wn)),Qe&&xn.setRotation(Qe(wn)),en&&xn.setRotateWithView(en(wn)),je&&xn.setScale(je(wn)),Be&&xn.setAnchor(Be(wn)),xn}}function buildShape(Oe,e){const t="shape-",ke=t+"points",Ge=t+"radius",Be=requireNumber(Oe[ke],ke),je=requireNumber(Oe[Ge],Ge),Ve=buildFill(Oe,t,e),Ze=buildStroke(Oe,t,e),Qe=sizeLikeEvaluator(Oe,t+"scale",e),en=coordinateEvaluator(Oe,t+"displacement",e),tn=numberEvaluator(Oe,t+"rotation",e),an=booleanEvaluator(Oe,t+"rotate-with-view",e),cn=optionalNumber(Oe,t+"radius2"),un=optionalNumber(Oe,t+"angle"),dn=optionalDeclutterMode(Oe,t+"declutter-mode"),fn=new RegularShape({points:Be,radius:je,radius2:cn,angle:un,declutterMode:dn});return function(pn){return Ve&&fn.setFill(Ve(pn)),Ze&&fn.setStroke(Ze(pn)),en&&fn.setDisplacement(en(pn)),tn&&fn.setRotation(tn(pn)),an&&fn.setRotateWithView(an(pn)),Qe&&fn.setScale(Qe(pn)),fn}}function buildCircle(Oe,e){const t="circle-",ke=buildFill(Oe,t,e),Ge=buildStroke(Oe,t,e),Be=numberEvaluator(Oe,t+"radius",e),je=sizeLikeEvaluator(Oe,t+"scale",e),Ve=coordinateEvaluator(Oe,t+"displacement",e),Ze=numberEvaluator(Oe,t+"rotation",e),Qe=booleanEvaluator(Oe,t+"rotate-with-view",e),en=optionalDeclutterMode(Oe,t+"declutter-mode"),tn=new CircleStyle({radius:5,declutterMode:en});return function(an){return Be&&tn.setRadius(Be(an)),ke&&tn.setFill(ke(an)),Ge&&tn.setStroke(Ge(an)),Ve&&tn.setDisplacement(Ve(an)),Ze&&tn.setRotation(Ze(an)),Qe&&tn.setRotateWithView(Qe(an)),je&&tn.setScale(je(an)),tn}}function numberEvaluator(Oe,e,t){if(!(e in Oe))return;const ke=buildExpression(Oe[e],NumberType$1,t);return function(Ge){return requireNumber(ke(Ge),e)}}function stringEvaluator(Oe,e,t){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],StringType$1,t);return function(Ge){return requireString(ke(Ge),e)}}function patternEvaluator(Oe,e,t){const ke=stringEvaluator(Oe,e+"pattern-src",t),Ge=sizeEvaluator(Oe,e+"pattern-offset",t),Be=sizeEvaluator(Oe,e+"pattern-size",t),je=colorLikeEvaluator(Oe,e+"color",t);return function(Ve){return{src:ke(Ve),offset:Ge&&Ge(Ve),size:Be&&Be(Ve),color:je&&je(Ve)}}}function booleanEvaluator(Oe,e,t){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],BooleanType$1,t);return function(Ge){const Be=ke(Ge);if(typeof Be!="boolean")throw new Error(`Expected a boolean for ${e}`);return Be}}function colorLikeEvaluator(Oe,e,t){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],ColorType$1,t);return function(Ge){return requireColorLike(ke(Ge),e)}}function numberArrayEvaluator(Oe,e,t){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],NumberArrayType,t);return function(Ge){return requireNumberArray(ke(Ge),e)}}function coordinateEvaluator(Oe,e,t){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],NumberArrayType,t);return function(Ge){const Be=requireNumberArray(ke(Ge),e);if(Be.length!==2)throw new Error(`Expected two numbers for ${e}`);return Be}}function sizeEvaluator(Oe,e,t){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],NumberArrayType,t);return function(Ge){return requireSize(ke(Ge),e)}}function sizeLikeEvaluator(Oe,e,t){if(!(e in Oe))return null;const ke=buildExpression(Oe[e],NumberArrayType|NumberType$1,t);return function(Ge){return requireSizeLike(ke(Ge),e)}}function optionalNumber(Oe,e){const t=Oe[e];if(t!==void 0){if(typeof t!="number")throw new Error(`Expected a number for ${e}`);return t}}function optionalSize(Oe,e){const t=Oe[e];if(t!==void 0){if(typeof t=="number")return toSize(t);if(!Array.isArray(t))throw new Error(`Expected a number or size array for ${e}`);if(t.length!==2||typeof t[0]!="number"||typeof t[1]!="number")throw new Error(`Expected a number or size array for ${e}`);return t}}function optionalString(Oe,e){const t=Oe[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);return t}}function optionalIconOrigin(Oe,e){const t=Oe[e];if(t!==void 0){if(t!=="bottom-left"&&t!=="bottom-right"&&t!=="top-left"&&t!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return t}}function optionalIconAnchorUnits(Oe,e){const t=Oe[e];if(t!==void 0){if(t!=="pixels"&&t!=="fraction")throw new Error(`Expected pixels or fraction for ${e}`);return t}}function optionalNumberArray(Oe,e){const t=Oe[e];if(t!==void 0)return requireNumberArray(t,e)}function optionalDeclutterMode(Oe,e){const t=Oe[e];if(t!==void 0){if(typeof t!="string")throw new Error(`Expected a string for ${e}`);if(t!=="declutter"&&t!=="obstacle"&&t!=="none")throw new Error(`Expected declutter, obstacle, or none for ${e}`);return t}}function optionalColorLike(Oe,e){const t=Oe[e];if(t!==void 0)return requireColorLike(t,e)}function requireNumberArray(Oe,e){if(!Array.isArray(Oe))throw new Error(`Expected an array for ${e}`);const t=Oe.length;for(let ke=0;ke<t;++ke)if(typeof Oe[ke]!="number")throw new Error(`Expected an array of numbers for ${e}`);return Oe}function requireString(Oe,e){if(typeof Oe!="string")throw new Error(`Expected a string for ${e}`);return Oe}function requireNumber(Oe,e){if(typeof Oe!="number")throw new Error(`Expected a number for ${e}`);return Oe}function requireColorLike(Oe,e){if(typeof Oe=="string")return Oe;const t=requireNumberArray(Oe,e),ke=t.length;if(ke<3||ke>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return t}function requireSize(Oe,e){const t=requireNumberArray(Oe,e);if(t.length!==2)throw new Error(`Expected an array of two numbers for ${e}`);return t}function requireSizeLike(Oe,e){return typeof Oe=="number"?Oe:requireSize(Oe,e)}const Property$1={RENDER_ORDER:"renderOrder"};class BaseVectorLayer extends Layer$1{constructor(e){e=e||{};const t=Object.assign({},e);delete t.style,delete t.renderBuffer,delete t.updateWhileAnimating,delete t.updateWhileInteracting,super(t),this.declutter_=e.declutter?String(e.declutter):void 0,this.renderBuffer_=e.renderBuffer!==void 0?e.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(e.style),this.updateWhileAnimating_=e.updateWhileAnimating!==void 0?e.updateWhileAnimating:!1,this.updateWhileInteracting_=e.updateWhileInteracting!==void 0?e.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(e){return super.getFeatures(e)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Property$1.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e,t){const ke=this.getDeclutter();ke in e.declutter||(e.declutter[ke]=new RBush$1(9)),this.getRenderer().renderDeclutter(e,t)}setRenderOrder(e){this.set(Property$1.RENDER_ORDER,e)}setStyle(e){this.style_=e===void 0?createDefaultStyle:e;const t=toStyleLike(e);this.styleFunction_=e===null?void 0:toFunction(t),this.changed()}setDeclutter(e){this.declutter_=e?String(e):void 0,this.changed()}}function toStyleLike(Oe){if(Oe===void 0)return createDefaultStyle;if(!Oe)return null;if(typeof Oe=="function"||Oe instanceof Style$1)return Oe;if(!Array.isArray(Oe))return flatStylesToStyleFunction([Oe]);if(Oe.length===0)return[];const e=Oe.length,t=Oe[0];if(t instanceof Style$1){const Ge=new Array(e);for(let Be=0;Be<e;++Be){const je=Oe[Be];if(!(je instanceof Style$1))throw new Error("Expected a list of style instances");Ge[Be]=je}return Ge}if("style"in t){const Ge=new Array(e);for(let Be=0;Be<e;++Be){const je=Oe[Be];if(!("style"in je))throw new Error("Expected a list of rules with a style property");Ge[Be]=je}return rulesToStyleFunction(Ge)}return flatStylesToStyleFunction(Oe)}const Instruction={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},fillInstruction=[Instruction.FILL],strokeInstruction=[Instruction.STROKE],beginPathInstruction=[Instruction.BEGIN_PATH],closePathInstruction=[Instruction.CLOSE_PATH];class VectorContext{drawCustom(e,t,ke,Ge,Be){}drawGeometry(e){}setStyle(e){}drawCircle(e,t,ke){}drawFeature(e,t,ke){}drawGeometryCollection(e,t,ke){}drawLineString(e,t,ke){}drawMultiLineString(e,t,ke){}drawMultiPoint(e,t,ke){}drawMultiPolygon(e,t,ke){}drawPoint(e,t,ke){}drawPolygon(e,t,ke){}drawText(e,t,ke){}setFillStrokeStyle(e,t){}setImageStyle(e,t){}setTextStyle(e,t){}}class CanvasBuilder extends VectorContext{constructor(e,t,ke,Ge){super(),this.tolerance=e,this.maxExtent=t,this.pixelRatio=Ge,this.maxLineWidth=0,this.resolution=ke,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(e){const t=this.pixelRatio;return t==1?e:e.map(function(ke){return ke*t})}appendFlatPointCoordinates(e,t){const ke=this.getBufferedMaxExtent(),Ge=this.tmpCoordinate_,Be=this.coordinates;let je=Be.length;for(let Ve=0,Ze=e.length;Ve<Ze;Ve+=t)Ge[0]=e[Ve],Ge[1]=e[Ve+1],containsCoordinate(ke,Ge)&&(Be[je++]=Ge[0],Be[je++]=Ge[1]);return je}appendFlatLineCoordinates(e,t,ke,Ge,Be,je){const Ve=this.coordinates;let Ze=Ve.length;const Qe=this.getBufferedMaxExtent();je&&(t+=Ge);let en=e[t],tn=e[t+1];const an=this.tmpCoordinate_;let cn=!0,un,dn,fn;for(un=t+Ge;un<ke;un+=Ge)an[0]=e[un],an[1]=e[un+1],fn=coordinateRelationship(Qe,an),fn!==dn?(cn&&(Ve[Ze++]=en,Ve[Ze++]=tn,cn=!1),Ve[Ze++]=an[0],Ve[Ze++]=an[1]):fn===Relationship.INTERSECTING?(Ve[Ze++]=an[0],Ve[Ze++]=an[1],cn=!1):cn=!0,en=an[0],tn=an[1],dn=fn;return(Be&&cn||un===t+Ge)&&(Ve[Ze++]=en,Ve[Ze++]=tn),Ze}drawCustomCoordinates_(e,t,ke,Ge,Be){for(let je=0,Ve=ke.length;je<Ve;++je){const Ze=ke[je],Qe=this.appendFlatLineCoordinates(e,t,Ze,Ge,!1,!1);Be.push(Qe),t=Ze}return t}drawCustom(e,t,ke,Ge,Be){this.beginGeometry(e,t,Be);const je=e.getType(),Ve=e.getStride(),Ze=this.coordinates.length;let Qe,en,tn,an,cn;switch(je){case"MultiPolygon":Qe=e.getOrientedFlatCoordinates(),an=[];const un=e.getEndss();cn=0;for(let dn=0,fn=un.length;dn<fn;++dn){const pn=[];cn=this.drawCustomCoordinates_(Qe,cn,un[dn],Ve,pn),an.push(pn)}this.instructions.push([Instruction.CUSTOM,Ze,an,e,ke,inflateMultiCoordinatesArray,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Ze,an,e,Ge||ke,inflateMultiCoordinatesArray,Be]);break;case"Polygon":case"MultiLineString":tn=[],Qe=je=="Polygon"?e.getOrientedFlatCoordinates():e.getFlatCoordinates(),cn=this.drawCustomCoordinates_(Qe,0,e.getEnds(),Ve,tn),this.instructions.push([Instruction.CUSTOM,Ze,tn,e,ke,inflateCoordinatesArray,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Ze,tn,e,Ge||ke,inflateCoordinatesArray,Be]);break;case"LineString":case"Circle":Qe=e.getFlatCoordinates(),en=this.appendFlatLineCoordinates(Qe,0,Qe.length,Ve,!1,!1),this.instructions.push([Instruction.CUSTOM,Ze,en,e,ke,inflateCoordinates,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Ze,en,e,Ge||ke,inflateCoordinates,Be]);break;case"MultiPoint":Qe=e.getFlatCoordinates(),en=this.appendFlatPointCoordinates(Qe,Ve),en>Ze&&(this.instructions.push([Instruction.CUSTOM,Ze,en,e,ke,inflateCoordinates,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Ze,en,e,Ge||ke,inflateCoordinates,Be]));break;case"Point":Qe=e.getFlatCoordinates(),this.coordinates.push(Qe[0],Qe[1]),en=this.coordinates.length,this.instructions.push([Instruction.CUSTOM,Ze,en,e,ke,void 0,Be]),this.hitDetectionInstructions.push([Instruction.CUSTOM,Ze,en,e,Ge||ke,void 0,Be]);break}this.endGeometry(t)}beginGeometry(e,t,ke){this.beginGeometryInstruction1_=[Instruction.BEGIN_GEOMETRY,t,0,e,ke],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[Instruction.BEGIN_GEOMETRY,t,0,e,ke],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const e=this.hitDetectionInstructions;e.reverse();let t;const ke=e.length;let Ge,Be,je=-1;for(t=0;t<ke;++t)Ge=e[t],Be=Ge[0],Be==Instruction.END_GEOMETRY?je=t:Be==Instruction.BEGIN_GEOMETRY&&(Ge[2]=t,reverseSubArray(this.hitDetectionInstructions,je,t),je=-1)}setFillStrokeStyle(e,t){const ke=this.state;if(e){const Ge=e.getColor();ke.fillPatternScale=Ge&&typeof Ge=="object"&&"src"in Ge?this.pixelRatio:1,ke.fillStyle=asColorLike(Ge||defaultFillStyle)}else ke.fillStyle=void 0;if(t){const Ge=t.getColor();ke.strokeStyle=asColorLike(Ge||defaultStrokeStyle);const Be=t.getLineCap();ke.lineCap=Be!==void 0?Be:defaultLineCap;const je=t.getLineDash();ke.lineDash=je?je.slice():defaultLineDash;const Ve=t.getLineDashOffset();ke.lineDashOffset=Ve||defaultLineDashOffset;const Ze=t.getLineJoin();ke.lineJoin=Ze!==void 0?Ze:defaultLineJoin;const Qe=t.getWidth();ke.lineWidth=Qe!==void 0?Qe:defaultLineWidth;const en=t.getMiterLimit();ke.miterLimit=en!==void 0?en:defaultMiterLimit,ke.lineWidth>this.maxLineWidth&&(this.maxLineWidth=ke.lineWidth,this.bufferedMaxExtent_=null)}else ke.strokeStyle=void 0,ke.lineCap=void 0,ke.lineDash=null,ke.lineDashOffset=void 0,ke.lineJoin=void 0,ke.lineWidth=void 0,ke.miterLimit=void 0}createFill(e){const t=e.fillStyle,ke=[Instruction.SET_FILL_STYLE,t];return typeof t!="string"&&ke.push(e.fillPatternScale),ke}applyStroke(e){this.instructions.push(this.createStroke(e))}createStroke(e){return[Instruction.SET_STROKE_STYLE,e.strokeStyle,e.lineWidth*this.pixelRatio,e.lineCap,e.lineJoin,e.miterLimit,this.applyPixelRatio(e.lineDash),e.lineDashOffset*this.pixelRatio]}updateFillStyle(e,t){const ke=e.fillStyle;(typeof ke!="string"||e.currentFillStyle!=ke)&&(ke!==void 0&&this.instructions.push(t.call(this,e)),e.currentFillStyle=ke)}updateStrokeStyle(e,t){const ke=e.strokeStyle,Ge=e.lineCap,Be=e.lineDash,je=e.lineDashOffset,Ve=e.lineJoin,Ze=e.lineWidth,Qe=e.miterLimit;(e.currentStrokeStyle!=ke||e.currentLineCap!=Ge||Be!=e.currentLineDash&&!equals$2(e.currentLineDash,Be)||e.currentLineDashOffset!=je||e.currentLineJoin!=Ve||e.currentLineWidth!=Ze||e.currentMiterLimit!=Qe)&&(ke!==void 0&&t.call(this,e),e.currentStrokeStyle=ke,e.currentLineCap=Ge,e.currentLineDash=Be,e.currentLineDashOffset=je,e.currentLineJoin=Ve,e.currentLineWidth=Ze,e.currentMiterLimit=Qe)}endGeometry(e){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const t=[Instruction.END_GEOMETRY,e];this.instructions.push(t),this.hitDetectionInstructions.push(t)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=clone$1(this.maxExtent),this.maxLineWidth>0)){const e=this.resolution*(this.maxLineWidth+1)/2;buffer(this.bufferedMaxExtent_,e,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class CanvasImageBuilder extends CanvasBuilder{constructor(e,t,ke,Ge){super(e,t,ke,Ge),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(e,t,ke){if(!this.image_||this.maxExtent&&!containsCoordinate(this.maxExtent,e.getFlatCoordinates()))return;this.beginGeometry(e,t,ke);const Ge=e.getFlatCoordinates(),Be=e.getStride(),je=this.coordinates.length,Ve=this.appendFlatPointCoordinates(Ge,Be);this.instructions.push([Instruction.DRAW_IMAGE,je,Ve,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,je,Ve,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}drawMultiPoint(e,t,ke){if(!this.image_)return;this.beginGeometry(e,t,ke);const Ge=e.getFlatCoordinates(),Be=[];for(let Ze=0,Qe=Ge.length;Ze<Qe;Ze+=e.getStride())(!this.maxExtent||containsCoordinate(this.maxExtent,Ge.slice(Ze,Ze+2)))&&Be.push(Ge[Ze],Ge[Ze+1]);const je=this.coordinates.length,Ve=this.appendFlatPointCoordinates(Be,2);this.instructions.push([Instruction.DRAW_IMAGE,je,Ve,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,je,Ve,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(t)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(e,t){const ke=e.getAnchor(),Ge=e.getSize(),Be=e.getOrigin();this.imagePixelRatio_=e.getPixelRatio(this.pixelRatio),this.anchorX_=ke[0],this.anchorY_=ke[1],this.hitDetectionImage_=e.getHitDetectionImage(),this.image_=e.getImage(this.pixelRatio),this.height_=Ge[1],this.opacity_=e.getOpacity(),this.originX_=Be[0],this.originY_=Be[1],this.rotateWithView_=e.getRotateWithView(),this.rotation_=e.getRotation(),this.scale_=e.getScaleArray(),this.width_=Ge[0],this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}class CanvasLineStringBuilder extends CanvasBuilder{constructor(e,t,ke,Ge){super(e,t,ke,Ge)}drawFlatCoordinates_(e,t,ke,Ge){const Be=this.coordinates.length,je=this.appendFlatLineCoordinates(e,t,ke,Ge,!1,!1),Ve=[Instruction.MOVE_TO_LINE_TO,Be,je];return this.instructions.push(Ve),this.hitDetectionInstructions.push(Ve),ke}drawLineString(e,t,ke){const Ge=this.state,Be=Ge.strokeStyle,je=Ge.lineWidth;if(Be===void 0||je===void 0)return;this.updateStrokeStyle(Ge,this.applyStroke),this.beginGeometry(e,t,ke),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Ge.strokeStyle,Ge.lineWidth,Ge.lineCap,Ge.lineJoin,Ge.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const Ve=e.getFlatCoordinates(),Ze=e.getStride();this.drawFlatCoordinates_(Ve,0,Ve.length,Ze),this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}drawMultiLineString(e,t,ke){const Ge=this.state,Be=Ge.strokeStyle,je=Ge.lineWidth;if(Be===void 0||je===void 0)return;this.updateStrokeStyle(Ge,this.applyStroke),this.beginGeometry(e,t,ke),this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Ge.strokeStyle,Ge.lineWidth,Ge.lineCap,Ge.lineJoin,Ge.miterLimit,defaultLineDash,defaultLineDashOffset],beginPathInstruction);const Ve=e.getEnds(),Ze=e.getFlatCoordinates(),Qe=e.getStride();let en=0;for(let tn=0,an=Ve.length;tn<an;++tn)en=this.drawFlatCoordinates_(Ze,en,Ve[tn],Qe);this.hitDetectionInstructions.push(strokeInstruction),this.endGeometry(t)}finish(){const e=this.state;return e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&this.instructions.push(strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(e){e.lastStroke!=null&&e.lastStroke!=this.coordinates.length&&(this.instructions.push(strokeInstruction),e.lastStroke=this.coordinates.length),e.lastStroke=0,super.applyStroke(e),this.instructions.push(beginPathInstruction)}}class CanvasPolygonBuilder extends CanvasBuilder{constructor(e,t,ke,Ge){super(e,t,ke,Ge)}drawFlatCoordinatess_(e,t,ke,Ge){const Be=this.state,je=Be.fillStyle!==void 0,Ve=Be.strokeStyle!==void 0,Ze=ke.length;this.instructions.push(beginPathInstruction),this.hitDetectionInstructions.push(beginPathInstruction);for(let Qe=0;Qe<Ze;++Qe){const en=ke[Qe],tn=this.coordinates.length,an=this.appendFlatLineCoordinates(e,t,en,Ge,!0,!Ve),cn=[Instruction.MOVE_TO_LINE_TO,tn,an];this.instructions.push(cn),this.hitDetectionInstructions.push(cn),Ve&&(this.instructions.push(closePathInstruction),this.hitDetectionInstructions.push(closePathInstruction)),t=en}return je&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),Ve&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),t}drawCircle(e,t,ke){const Ge=this.state,Be=Ge.fillStyle,je=Ge.strokeStyle;if(Be===void 0&&je===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,ke),Ge.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),Ge.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Ge.strokeStyle,Ge.lineWidth,Ge.lineCap,Ge.lineJoin,Ge.miterLimit,defaultLineDash,defaultLineDashOffset]);const Ve=e.getFlatCoordinates(),Ze=e.getStride(),Qe=this.coordinates.length;this.appendFlatLineCoordinates(Ve,0,Ve.length,Ze,!1,!1);const en=[Instruction.CIRCLE,Qe];this.instructions.push(beginPathInstruction,en),this.hitDetectionInstructions.push(beginPathInstruction,en),Ge.fillStyle!==void 0&&(this.instructions.push(fillInstruction),this.hitDetectionInstructions.push(fillInstruction)),Ge.strokeStyle!==void 0&&(this.instructions.push(strokeInstruction),this.hitDetectionInstructions.push(strokeInstruction)),this.endGeometry(t)}drawPolygon(e,t,ke){const Ge=this.state,Be=Ge.fillStyle,je=Ge.strokeStyle;if(Be===void 0&&je===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,ke),Ge.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),Ge.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Ge.strokeStyle,Ge.lineWidth,Ge.lineCap,Ge.lineJoin,Ge.miterLimit,defaultLineDash,defaultLineDashOffset]);const Ve=e.getEnds(),Ze=e.getOrientedFlatCoordinates(),Qe=e.getStride();this.drawFlatCoordinatess_(Ze,0,Ve,Qe),this.endGeometry(t)}drawMultiPolygon(e,t,ke){const Ge=this.state,Be=Ge.fillStyle,je=Ge.strokeStyle;if(Be===void 0&&je===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(e,t,ke),Ge.fillStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_FILL_STYLE,defaultFillStyle]),Ge.strokeStyle!==void 0&&this.hitDetectionInstructions.push([Instruction.SET_STROKE_STYLE,Ge.strokeStyle,Ge.lineWidth,Ge.lineCap,Ge.lineJoin,Ge.miterLimit,defaultLineDash,defaultLineDashOffset]);const Ve=e.getEndss(),Ze=e.getOrientedFlatCoordinates(),Qe=e.getStride();let en=0;for(let tn=0,an=Ve.length;tn<an;++tn)en=this.drawFlatCoordinatess_(Ze,en,Ve[tn],Qe);this.endGeometry(t)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const e=this.tolerance;if(e!==0){const t=this.coordinates;for(let ke=0,Ge=t.length;ke<Ge;++ke)t[ke]=snap(t[ke],e)}return super.finish()}setFillStrokeStyles_(){const e=this.state;e.fillStyle!==void 0&&this.updateFillStyle(e,this.createFill),e.strokeStyle!==void 0&&this.updateStrokeStyle(e,this.applyStroke)}}function lineChunk(Oe,e,t,ke,Ge){const Be=[];let je=t,Ve=0,Ze=e.slice(t,2);for(;Ve<Oe&&je+Ge<ke;){const[Qe,en]=Ze.slice(-2),tn=e[je+Ge],an=e[je+Ge+1],cn=Math.sqrt((tn-Qe)*(tn-Qe)+(an-en)*(an-en));if(Ve+=cn,Ve>=Oe){const un=(Oe-Ve+cn)/cn,dn=lerp(Qe,tn,un),fn=lerp(en,an,un);Ze.push(dn,fn),Be.push(Ze),Ze=[dn,fn],Ve==Oe&&(je+=Ge),Ve=0}else if(Ve<Oe)Ze.push(e[je+Ge],e[je+Ge+1]),je+=Ge;else{const un=cn-Ve,dn=lerp(Qe,tn,un/cn),fn=lerp(en,an,un/cn);Ze.push(dn,fn),Be.push(Ze),Ze=[dn,fn],Ve=0,je+=Ge}}return Ve>0&&Be.push(Ze),Be}function matchingChunk(Oe,e,t,ke,Ge){let Be=t,je=t,Ve=0,Ze=0,Qe=t,en,tn,an,cn,un,dn,fn,pn,gn,yn;for(tn=t;tn<ke;tn+=Ge){const vn=e[tn],An=e[tn+1];un!==void 0&&(gn=vn-un,yn=An-dn,cn=Math.sqrt(gn*gn+yn*yn),fn!==void 0&&(Ze+=an,en=Math.acos((fn*gn+pn*yn)/(an*cn)),en>Oe&&(Ze>Ve&&(Ve=Ze,Be=Qe,je=tn),Ze=0,Qe=tn-Ge)),an=cn,fn=gn,pn=yn),un=vn,dn=An}return Ze+=cn,Ze>Ve?[Qe,tn]:[Be,je]}const TEXT_ALIGN={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class CanvasTextBuilder extends CanvasBuilder{constructor(e,t,ke,Ge){super(e,t,ke,Ge),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[defaultFillStyle]={fillStyle:defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const e=super.finish();return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e}drawText(e,t,ke){const Ge=this.textFillState_,Be=this.textStrokeState_,je=this.textState_;if(this.text_===""||!je||!Ge&&!Be)return;const Ve=this.coordinates;let Ze=Ve.length;const Qe=e.getType();let en=null,tn=e.getStride();if(je.placement==="line"&&(Qe=="LineString"||Qe=="MultiLineString"||Qe=="Polygon"||Qe=="MultiPolygon")){if(!intersects$1(this.maxExtent,e.getExtent()))return;let an;if(en=e.getFlatCoordinates(),Qe=="LineString")an=[en.length];else if(Qe=="MultiLineString")an=e.getEnds();else if(Qe=="Polygon")an=e.getEnds().slice(0,1);else if(Qe=="MultiPolygon"){const fn=e.getEndss();an=[];for(let pn=0,gn=fn.length;pn<gn;++pn)an.push(fn[pn][0])}this.beginGeometry(e,t,ke);const cn=je.repeat,un=cn?void 0:je.textAlign;let dn=0;for(let fn=0,pn=an.length;fn<pn;++fn){let gn;cn?gn=lineChunk(cn*this.resolution,en,dn,an[fn],tn):gn=[en.slice(dn,an[fn])];for(let yn=0,vn=gn.length;yn<vn;++yn){const An=gn[yn];let xn=0,wn=An.length;if(un==null){const Mn=matchingChunk(je.maxAngle,An,0,An.length,2);xn=Mn[0],wn=Mn[1]}for(let Mn=xn;Mn<wn;Mn+=tn)Ve.push(An[Mn],An[Mn+1]);const bn=Ve.length;dn=an[fn],this.drawChars_(Ze,bn),Ze=bn}}this.endGeometry(t)}else{let an=je.overflow?null:[];switch(Qe){case"Point":case"MultiPoint":en=e.getFlatCoordinates();break;case"LineString":en=e.getFlatMidpoint();break;case"Circle":en=e.getCenter();break;case"MultiLineString":en=e.getFlatMidpoints(),tn=2;break;case"Polygon":en=e.getFlatInteriorPoint(),je.overflow||an.push(en[2]/this.resolution),tn=3;break;case"MultiPolygon":const gn=e.getFlatInteriorPoints();en=[];for(let yn=0,vn=gn.length;yn<vn;yn+=3)je.overflow||an.push(gn[yn+2]/this.resolution),en.push(gn[yn],gn[yn+1]);if(en.length===0)return;tn=2;break}const cn=this.appendFlatPointCoordinates(en,tn);if(cn===Ze)return;if(an&&(cn-Ze)/2!==en.length/tn){let gn=Ze/2;an=an.filter((yn,vn)=>{const An=Ve[(gn+vn)*2]===en[vn*tn]&&Ve[(gn+vn)*2+1]===en[vn*tn+1];return An||--gn,An})}this.saveTextStates_(),(je.backgroundFill||je.backgroundStroke)&&(this.setFillStrokeStyle(je.backgroundFill,je.backgroundStroke),je.backgroundFill&&this.updateFillStyle(this.state,this.createFill),je.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(e,t,ke);let un=je.padding;if(un!=defaultPadding&&(je.scale[0]<0||je.scale[1]<0)){let gn=je.padding[0],yn=je.padding[1],vn=je.padding[2],An=je.padding[3];je.scale[0]<0&&(yn=-yn,An=-An),je.scale[1]<0&&(gn=-gn,vn=-vn),un=[gn,yn,vn,An]}const dn=this.pixelRatio;this.instructions.push([Instruction.DRAW_IMAGE,Ze,cn,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,un==defaultPadding?defaultPadding:un.map(function(gn){return gn*dn}),!!je.backgroundFill,!!je.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,an]);const fn=1/dn,pn=this.state.fillStyle;je.backgroundFill&&(this.state.fillStyle=defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([Instruction.DRAW_IMAGE,Ze,cn,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[fn,fn],NaN,this.declutterMode_,this.declutterImageWithText_,un,!!je.backgroundFill,!!je.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,an]),je.backgroundFill&&(this.state.fillStyle=pn,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(t)}}saveTextStates_(){const e=this.textStrokeState_,t=this.textState_,ke=this.textFillState_,Ge=this.strokeKey_;e&&(Ge in this.strokeStates||(this.strokeStates[Ge]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));const Be=this.textKey_;Be in this.textStates||(this.textStates[Be]={font:t.font,textAlign:t.textAlign||defaultTextAlign,justify:t.justify,textBaseline:t.textBaseline||defaultTextBaseline,scale:t.scale});const je=this.fillKey_;ke&&(je in this.fillStates||(this.fillStates[je]={fillStyle:ke.fillStyle}))}drawChars_(e,t){const ke=this.textStrokeState_,Ge=this.textState_,Be=this.strokeKey_,je=this.textKey_,Ve=this.fillKey_;this.saveTextStates_();const Ze=this.pixelRatio,Qe=TEXT_ALIGN[Ge.textBaseline],en=this.textOffsetY_*Ze,tn=this.text_,an=ke?ke.lineWidth*Math.abs(Ge.scale[0])/2:0;this.instructions.push([Instruction.DRAW_CHARS,e,t,Qe,Ge.overflow,Ve,Ge.maxAngle,Ze,en,Be,an*Ze,tn,je,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([Instruction.DRAW_CHARS,e,t,Qe,Ge.overflow,Ve&&defaultFillStyle,Ge.maxAngle,Ze,en,Be,an*Ze,tn,je,1/Ze,this.declutterMode_,this.textKeepUpright_])}setTextStyle(e,t){let ke,Ge,Be;if(!e)this.text_="";else{const je=e.getFill();je?(Ge=this.textFillState_,Ge||(Ge={},this.textFillState_=Ge),Ge.fillStyle=asColorLike(je.getColor()||defaultFillStyle)):(Ge=null,this.textFillState_=Ge);const Ve=e.getStroke();if(!Ve)Be=null,this.textStrokeState_=Be;else{Be=this.textStrokeState_,Be||(Be={},this.textStrokeState_=Be);const dn=Ve.getLineDash(),fn=Ve.getLineDashOffset(),pn=Ve.getWidth(),gn=Ve.getMiterLimit();Be.lineCap=Ve.getLineCap()||defaultLineCap,Be.lineDash=dn?dn.slice():defaultLineDash,Be.lineDashOffset=fn===void 0?defaultLineDashOffset:fn,Be.lineJoin=Ve.getLineJoin()||defaultLineJoin,Be.lineWidth=pn===void 0?defaultLineWidth:pn,Be.miterLimit=gn===void 0?defaultMiterLimit:gn,Be.strokeStyle=asColorLike(Ve.getColor()||defaultStrokeStyle)}ke=this.textState_;const Ze=e.getFont()||defaultFont;registerFont(Ze);const Qe=e.getScaleArray();ke.overflow=e.getOverflow(),ke.font=Ze,ke.maxAngle=e.getMaxAngle(),ke.placement=e.getPlacement(),ke.textAlign=e.getTextAlign(),ke.repeat=e.getRepeat(),ke.justify=e.getJustify(),ke.textBaseline=e.getTextBaseline()||defaultTextBaseline,ke.backgroundFill=e.getBackgroundFill(),ke.backgroundStroke=e.getBackgroundStroke(),ke.padding=e.getPadding()||defaultPadding,ke.scale=Qe===void 0?[1,1]:Qe;const en=e.getOffsetX(),tn=e.getOffsetY(),an=e.getRotateWithView(),cn=e.getKeepUpright(),un=e.getRotation();this.text_=e.getText()||"",this.textOffsetX_=en===void 0?0:en,this.textOffsetY_=tn===void 0?0:tn,this.textRotateWithView_=an===void 0?!1:an,this.textKeepUpright_=cn===void 0?!0:cn,this.textRotation_=un===void 0?0:un,this.strokeKey_=Be?(typeof Be.strokeStyle=="string"?Be.strokeStyle:getUid(Be.strokeStyle))+Be.lineCap+Be.lineDashOffset+"|"+Be.lineWidth+Be.lineJoin+Be.miterLimit+"["+Be.lineDash.join()+"]":"",this.textKey_=ke.font+ke.scale+(ke.textAlign||"?")+(ke.repeat||"?")+(ke.justify||"?")+(ke.textBaseline||"?"),this.fillKey_=Ge&&Ge.fillStyle?typeof Ge.fillStyle=="string"?Ge.fillStyle:"|"+getUid(Ge.fillStyle):""}this.declutterMode_=e.getDeclutterMode(),this.declutterImageWithText_=t}}const BATCH_CONSTRUCTORS={Circle:CanvasPolygonBuilder,Default:CanvasBuilder,Image:CanvasImageBuilder,LineString:CanvasLineStringBuilder,Polygon:CanvasPolygonBuilder,Text:CanvasTextBuilder};class BuilderGroup{constructor(e,t,ke,Ge){this.tolerance_=e,this.maxExtent_=t,this.pixelRatio_=Ge,this.resolution_=ke,this.buildersByZIndex_={}}finish(){const e={};for(const t in this.buildersByZIndex_){e[t]=e[t]||{};const ke=this.buildersByZIndex_[t];for(const Ge in ke){const Be=ke[Ge].finish();e[t][Ge]=Be}}return e}getBuilder(e,t){const ke=e!==void 0?e.toString():"0";let Ge=this.buildersByZIndex_[ke];Ge===void 0&&(Ge={},this.buildersByZIndex_[ke]=Ge);let Be=Ge[t];if(Be===void 0){const je=BATCH_CONSTRUCTORS[t];Be=new je(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),Ge[t]=Be}return Be}}const maxStaleKeys=5;class LayerRenderer extends Observable{constructor(e){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=e,this.staleKeys_=new Array,this.maxStaleKeys=maxStaleKeys}getStaleKeys(){return this.staleKeys_}prependStaleKey(e){this.staleKeys_.unshift(e),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(e){return abstract()}getData(e){return null}prepareFrame(e){return abstract()}renderFrame(e,t){return abstract()}forEachFeatureAtCoordinate(e,t,ke,Ge,Be){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(e){const t=e.target;(t.getState()===ImageState.LOADED||t.getState()===ImageState.ERROR)&&this.renderIfReadyAndVisible()}loadImage(e){let t=e.getState();return t!=ImageState.LOADED&&t!=ImageState.ERROR&&e.addEventListener(EventType.CHANGE,this.boundHandleImageChange_),t==ImageState.IDLE&&(e.load(),t=e.getState()),t==ImageState.LOADED}renderIfReadyAndVisible(){const e=this.getLayer();e&&e.getVisible()&&e.getSourceState()==="ready"&&e.changed()}renderDeferred(e){}disposeInternal(){delete this.layer_,super.disposeInternal()}}class RenderEvent extends BaseEvent{constructor(e,t,ke,Ge){super(e),this.inversePixelTransform=t,this.frameState=ke,this.context=Ge}}class ZIndexContext{constructor(){Qc(this,"pushMethodArgs_",(...e)=>(this.instructions_[this.zIndex+this.offset_].push(e),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(getSharedCanvasContext2D(),{get:(e,t)=>{if(typeof getSharedCanvasContext2D()[t]=="function")return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t),this.pushMethodArgs_},set:(e,t,ke)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(t,ke),!0)})}pushFunction(e){this.instructions_[this.zIndex+this.offset_].push(e)}getContext(){return this.context_}draw(e){this.instructions_.forEach(t=>{for(let ke=0,Ge=t.length;ke<Ge;++ke){const Be=t[ke];if(typeof Be=="function"){Be(e);continue}const je=t[++ke];if(typeof e[Be]=="function")e[Be](...je);else{if(typeof je=="function"){e[Be]=je(e);continue}e[Be]=je}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const canvasPool=[];let pixelContext=null;function createPixelContext(){pixelContext=createCanvasContext2D(1,1,void 0,{willReadFrequently:!0})}class CanvasLayerRenderer extends LayerRenderer{constructor(e){super(e),this.container=null,this.renderedResolution,this.tempTransform=create$1(),this.pixelTransform=create$1(),this.inversePixelTransform=create$1(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(e,t,ke){pixelContext||createPixelContext(),pixelContext.clearRect(0,0,1,1);let Ge;try{pixelContext.drawImage(e,t,ke,1,1,0,0,1,1),Ge=pixelContext.getImageData(0,0,1,1).data}catch{return pixelContext=null,null}return Ge}getBackground(e){let ke=this.getLayer().getBackground();return typeof ke=="function"&&(ke=ke(e.viewState.resolution)),ke||void 0}useContainer(e,t,ke){const Ge=this.getLayer().getClassName();let Be,je;if(e&&e.className===Ge&&(!ke||e&&e.style.backgroundColor&&equals$2(asArray(e.style.backgroundColor),asArray(ke)))){const Ve=e.firstElementChild;Ve instanceof HTMLCanvasElement&&(je=Ve.getContext("2d"))}if(je&&je.canvas.style.transform===t?(this.container=e,this.context=je,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){Be=document.createElement("div"),Be.className=Ge;let Ve=Be.style;Ve.position="absolute",Ve.width="100%",Ve.height="100%",je=createCanvasContext2D();const Ze=je.canvas;Be.appendChild(Ze),Ve=Ze.style,Ve.position="absolute",Ve.left="0",Ve.transformOrigin="top left",this.container=Be,this.context=je}!this.containerReused&&ke&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=ke)}clipUnrotated(e,t,ke){const Ge=getTopLeft(ke),Be=getTopRight(ke),je=getBottomRight(ke),Ve=getBottomLeft(ke);apply(t.coordinateToPixelTransform,Ge),apply(t.coordinateToPixelTransform,Be),apply(t.coordinateToPixelTransform,je),apply(t.coordinateToPixelTransform,Ve);const Ze=this.inversePixelTransform;apply(Ze,Ge),apply(Ze,Be),apply(Ze,je),apply(Ze,Ve),e.save(),e.beginPath(),e.moveTo(Math.round(Ge[0]),Math.round(Ge[1])),e.lineTo(Math.round(Be[0]),Math.round(Be[1])),e.lineTo(Math.round(je[0]),Math.round(je[1])),e.lineTo(Math.round(Ve[0]),Math.round(Ve[1])),e.clip()}prepareContainer(e,t){const ke=e.extent,Ge=e.viewState.resolution,Be=e.viewState.rotation,je=e.pixelRatio,Ve=Math.round(getWidth(ke)/Ge*je),Ze=Math.round(getHeight(ke)/Ge*je);compose(this.pixelTransform,e.size[0]/2,e.size[1]/2,1/je,1/je,Be,-Ve/2,-Ze/2),makeInverse(this.inversePixelTransform,this.pixelTransform);const Qe=toString$3(this.pixelTransform);if(this.useContainer(t,Qe,this.getBackground(e)),!this.containerReused){const en=this.context.canvas;en.width!=Ve||en.height!=Ze?(en.width=Ve,en.height=Ze):this.context.clearRect(0,0,Ve,Ze),Qe!==en.style.transform&&(en.style.transform=Qe)}}dispatchRenderEvent_(e,t,ke){const Ge=this.getLayer();if(Ge.hasListener(e)){const Be=new RenderEvent(e,this.inversePixelTransform,ke,t);Ge.dispatchEvent(Be)}}preRender(e,t){this.frameState=t,!t.declutter&&this.dispatchRenderEvent_(RenderEventType.PRERENDER,e,t)}postRender(e,t){t.declutter||this.dispatchRenderEvent_(RenderEventType.POSTRENDER,e,t)}renderDeferredInternal(e){}getRenderContext(e){return e.declutter&&!this.deferredContext_&&(this.deferredContext_=new ZIndexContext),e.declutter?this.deferredContext_.getContext():this.context}renderDeferred(e){e.declutter&&(this.dispatchRenderEvent_(RenderEventType.PRERENDER,this.context,e),e.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(e),this.dispatchRenderEvent_(RenderEventType.POSTRENDER,this.context,e))}getRenderTransform(e,t,ke,Ge,Be,je,Ve){const Ze=Be/2,Qe=je/2,en=Ge/t,tn=-en,an=-e[0]+Ve,cn=-e[1];return compose(this.tempTransform,Ze,Qe,en,tn,-ke,an,cn)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function drawTextOnPath(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an=!0){let cn=Oe[e],un=Oe[e+1],dn=0,fn=0,pn=0,gn=0;function yn(){dn=cn,fn=un,e+=ke,cn=Oe[e],un=Oe[e+1],gn+=pn,pn=Math.sqrt((cn-dn)*(cn-dn)+(un-fn)*(un-fn))}do yn();while(e<t-ke&&gn+pn<Be);let vn=pn===0?0:(Be-gn)/pn;const An=lerp(dn,cn,vn),xn=lerp(fn,un,vn),wn=e-ke,bn=gn,Mn=Be+Ve*Ze(Qe,Ge,en);for(;e<t-ke&&gn+pn<Mn;)yn();vn=pn===0?0:(Mn-gn)/pn;const Pn=lerp(dn,cn,vn),En=lerp(fn,un,vn);let Cn=!1;if(an)if(tn){const zn=[An,xn,Pn,En];rotate(zn,0,4,2,tn,zn,zn),Cn=zn[0]>zn[2]}else Cn=An>Pn;const Rn=Math.PI,Tn=[],Nn=wn+ke===e;e=wn,pn=0,gn=bn,cn=Oe[e],un=Oe[e+1];let Gn;if(Nn){yn(),Gn=Math.atan2(un-fn,cn-dn),Cn&&(Gn+=Gn>0?-Rn:Rn);const zn=(Pn+An)/2,$n=(En+xn)/2;return Tn[0]=[zn,$n,(Mn-Be)/2,Gn,Ge],Tn}Ge=Ge.replace(/\n/g," ");for(let zn=0,$n=Ge.length;zn<$n;){yn();let Qn=Math.atan2(un-fn,cn-dn);if(Cn&&(Qn+=Qn>0?-Rn:Rn),Gn!==void 0){let Ci=Qn-Gn;if(Ci+=Ci>Rn?-2*Rn:Ci<-Rn?2*Rn:0,Math.abs(Ci)>je)return null}Gn=Qn;const Hn=zn;let Ni=0;for(;zn<$n;++zn){const Ci=Cn?$n-zn-1:zn,Si=Ve*Ze(Qe,Ge[Ci],en);if(e+ke<t&&gn+pn<Be+Ni+Si/2)break;Ni+=Si}if(zn===Hn)continue;const On=Cn?Ge.substring($n-Hn,$n-zn):Ge.substring(Hn,zn);vn=pn===0?0:(Be+Ni/2-gn)/pn;const qn=lerp(dn,cn,vn),Un=lerp(fn,un,vn);Tn.push([qn,Un,Ni/2,Qn,On]),Be+=Ni}return Tn}const tmpExtent=createEmpty(),p1=[],p2=[],p3=[],p4=[];function getDeclutterBox(Oe){return Oe[3].declutterBox}const rtlRegEx=new RegExp("[֑-ࣿיִ-﷿ﹰ-ﻼࠀ-࿿-]");function horizontalTextAlign(Oe,e){return e==="start"?e=rtlRegEx.test(Oe)?"right":"left":e==="end"&&(e=rtlRegEx.test(Oe)?"left":"right"),TEXT_ALIGN[e]}function createTextChunks(Oe,e,t){return t>0&&Oe.push(`
`,""),Oe.push(e,""),Oe}class Executor{constructor(e,t,ke,Ge,Be){this.overlaps=ke,this.pixelRatio=t,this.resolution=e,this.alignAndScaleFill_,this.instructions=Ge.instructions,this.coordinates=Ge.coordinates,this.coordinateCache_={},this.renderedTransform_=create$1(),this.hitDetectionInstructions=Ge.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=Ge.fillStates||{},this.strokeStates=Ge.strokeStates||{},this.textStates=Ge.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=Be?new ZIndexContext:null}getZIndexContext(){return this.zIndexContext_}createLabel(e,t,ke,Ge){const Be=e+t+ke+Ge;if(this.labels_[Be])return this.labels_[Be];const je=Ge?this.strokeStates[Ge]:null,Ve=ke?this.fillStates[ke]:null,Ze=this.textStates[t],Qe=this.pixelRatio,en=[Ze.scale[0]*Qe,Ze.scale[1]*Qe],tn=Ze.justify?TEXT_ALIGN[Ze.justify]:horizontalTextAlign(Array.isArray(e)?e[0]:e,Ze.textAlign||defaultTextAlign),an=Ge&&je.lineWidth?je.lineWidth:0,cn=Array.isArray(e)?e:String(e).split(`
`).reduce(createTextChunks,[]),{width:un,height:dn,widths:fn,heights:pn,lineWidths:gn}=getTextDimensions(Ze,cn),yn=un+an,vn=[],An=(yn+2)*en[0],xn=(dn+an)*en[1],wn={width:An<0?Math.floor(An):Math.ceil(An),height:xn<0?Math.floor(xn):Math.ceil(xn),contextInstructions:vn};(en[0]!=1||en[1]!=1)&&vn.push("scale",en),Ge&&(vn.push("strokeStyle",je.strokeStyle),vn.push("lineWidth",an),vn.push("lineCap",je.lineCap),vn.push("lineJoin",je.lineJoin),vn.push("miterLimit",je.miterLimit),vn.push("setLineDash",[je.lineDash]),vn.push("lineDashOffset",je.lineDashOffset)),ke&&vn.push("fillStyle",Ve.fillStyle),vn.push("textBaseline","middle"),vn.push("textAlign","center");const bn=.5-tn;let Mn=tn*yn+bn*an;const Pn=[],En=[];let Cn=0,Rn=0,Tn=0,Nn=0,Gn;for(let zn=0,$n=cn.length;zn<$n;zn+=2){const Qn=cn[zn];if(Qn===`
`){Rn+=Cn,Cn=0,Mn=tn*yn+bn*an,++Nn;continue}const Hn=cn[zn+1]||Ze.font;Hn!==Gn&&(Ge&&Pn.push("font",Hn),ke&&En.push("font",Hn),Gn=Hn),Cn=Math.max(Cn,pn[Tn]);const Ni=[Qn,Mn+bn*fn[Tn]+tn*(fn[Tn]-gn[Nn]),.5*(an+Cn)+Rn];Mn+=fn[Tn],Ge&&Pn.push("strokeText",Ni),ke&&En.push("fillText",Ni),++Tn}return Array.prototype.push.apply(vn,Pn),Array.prototype.push.apply(vn,En),this.labels_[Be]=wn,wn}replayTextBackground_(e,t,ke,Ge,Be,je,Ve){e.beginPath(),e.moveTo.apply(e,t),e.lineTo.apply(e,ke),e.lineTo.apply(e,Ge),e.lineTo.apply(e,Be),e.lineTo.apply(e,t),je&&(this.alignAndScaleFill_=je[2],this.fill_(e)),Ve&&(this.setStrokeStyle_(e,Ve),e.stroke())}calculateImageOrLabelDimensions_(e,t,ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,un,dn,fn){Ve*=an[0],Ze*=an[1];let pn=ke-Ve,gn=Ge-Ze;const yn=Be+Qe>e?e-Qe:Be,vn=je+en>t?t-en:je,An=un[3]+yn*an[0]+un[1],xn=un[0]+vn*an[1]+un[2],wn=pn-un[3],bn=gn-un[0];(dn||tn!==0)&&(p1[0]=wn,p4[0]=wn,p1[1]=bn,p2[1]=bn,p2[0]=wn+An,p3[0]=p2[0],p3[1]=bn+xn,p4[1]=p3[1]);let Mn;return tn!==0?(Mn=compose(create$1(),ke,Ge,1,1,tn,-ke,-Ge),apply(Mn,p1),apply(Mn,p2),apply(Mn,p3),apply(Mn,p4),createOrUpdate$2(Math.min(p1[0],p2[0],p3[0],p4[0]),Math.min(p1[1],p2[1],p3[1],p4[1]),Math.max(p1[0],p2[0],p3[0],p4[0]),Math.max(p1[1],p2[1],p3[1],p4[1]),tmpExtent)):createOrUpdate$2(Math.min(wn,wn+An),Math.min(bn,bn+xn),Math.max(wn,wn+An),Math.max(bn,bn+xn),tmpExtent),cn&&(pn=Math.round(pn),gn=Math.round(gn)),{drawImageX:pn,drawImageY:gn,drawImageW:yn,drawImageH:vn,originX:Qe,originY:en,declutterBox:{minX:tmpExtent[0],minY:tmpExtent[1],maxX:tmpExtent[2],maxY:tmpExtent[3],value:fn},canvasTransform:Mn,scale:an}}replayImageOrLabel_(e,t,ke,Ge,Be,je,Ve){const Ze=!!(je||Ve),Qe=Ge.declutterBox,en=Ve?Ve[2]*Ge.scale[0]/2:0;return Qe.minX-en<=t[0]&&Qe.maxX+en>=0&&Qe.minY-en<=t[1]&&Qe.maxY+en>=0&&(Ze&&this.replayTextBackground_(e,p1,p2,p3,p4,je,Ve),drawImageOrLabel(e,Ge.canvasTransform,Be,ke,Ge.originX,Ge.originY,Ge.drawImageW,Ge.drawImageH,Ge.drawImageX,Ge.drawImageY,Ge.scale)),!0}fill_(e){const t=this.alignAndScaleFill_;if(t){const ke=apply(this.renderedTransform_,[0,0]),Ge=512*this.pixelRatio;e.save(),e.translate(ke[0]%Ge,ke[1]%Ge),t!==1&&e.scale(t,t),e.rotate(this.viewRotation_)}e.fill(),t&&e.restore()}setStrokeStyle_(e,t){e.strokeStyle=t[1],e.lineWidth=t[2],e.lineCap=t[3],e.lineJoin=t[4],e.miterLimit=t[5],e.lineDashOffset=t[7],e.setLineDash(t[6])}drawLabelWithPointPlacement_(e,t,ke,Ge){const Be=this.textStates[t],je=this.createLabel(e,t,Ge,ke),Ve=this.strokeStates[ke],Ze=this.pixelRatio,Qe=horizontalTextAlign(Array.isArray(e)?e[0]:e,Be.textAlign||defaultTextAlign),en=TEXT_ALIGN[Be.textBaseline||defaultTextBaseline],tn=Ve&&Ve.lineWidth?Ve.lineWidth:0,an=je.width/Ze-2*Be.scale[0],cn=Qe*an+2*(.5-Qe)*tn,un=en*je.height/Ze+2*(.5-en)*tn;return{label:je,anchorX:cn,anchorY:un}}execute_(e,t,ke,Ge,Be,je,Ve,Ze){const Qe=this.zIndexContext_;let en;this.pixelCoordinates_&&equals$2(ke,this.renderedTransform_)?en=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),en=transform2D(this.coordinates,0,this.coordinates.length,2,ke,this.pixelCoordinates_),setFromArray(this.renderedTransform_,ke));let tn=0;const an=Ge.length;let cn=0,un,dn,fn,pn,gn,yn,vn,An,xn,wn,bn,Mn,Pn,En=0,Cn=0,Rn=null,Tn=null;const Nn=this.coordinateCache_,Gn=this.viewRotation_,zn=Math.round(Math.atan2(-ke[1],ke[0])*1e12)/1e12,$n={context:e,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:Gn},Qn=this.instructions!=Ge||this.overlaps?0:200;let Hn,Ni,On,qn;for(;tn<an;){const Un=Ge[tn];switch(Un[0]){case Instruction.BEGIN_GEOMETRY:Hn=Un[1],qn=Un[3],Hn.getGeometry()?Ve!==void 0&&!intersects$1(Ve,qn.getExtent())?tn=Un[2]+1:++tn:tn=Un[2],Qe&&(Qe.zIndex=Un[4]);break;case Instruction.BEGIN_PATH:En>Qn&&(this.fill_(e),En=0),Cn>Qn&&(e.stroke(),Cn=0),!En&&!Cn&&(e.beginPath(),gn=NaN,yn=NaN),++tn;break;case Instruction.CIRCLE:cn=Un[1];const Si=en[cn],_i=en[cn+1],Ii=en[cn+2],Li=en[cn+3],Ri=Ii-Si,tr=Li-_i,Fr=Math.sqrt(Ri*Ri+tr*tr);e.moveTo(Si+Fr,_i),e.arc(Si,_i,Fr,0,2*Math.PI,!0),++tn;break;case Instruction.CLOSE_PATH:e.closePath(),++tn;break;case Instruction.CUSTOM:cn=Un[1],un=Un[2];const Bn=Un[3],Ai=Un[4],Kn=Un[5];$n.geometry=Bn,$n.feature=Hn,tn in Nn||(Nn[tn]=[]);const Fn=Nn[tn];Kn?Kn(en,cn,un,2,Fn):(Fn[0]=en[cn],Fn[1]=en[cn+1],Fn.length=2),Qe&&(Qe.zIndex=Un[6]),Ai(Fn,$n),++tn;break;case Instruction.DRAW_IMAGE:cn=Un[1],un=Un[2],xn=Un[3],dn=Un[4],fn=Un[5];let $i=Un[6];const Hi=Un[7],Di=Un[8],zi=Un[9],Bi=Un[10];let Gi=Un[11];const Ti=Un[12];let Mi=Un[13];pn=Un[14]||"declutter";const Oi=Un[15];if(!xn&&Un.length>=20){wn=Un[19],bn=Un[20],Mn=Un[21],Pn=Un[22];const jo=this.drawLabelWithPointPlacement_(wn,bn,Mn,Pn);xn=jo.label,Un[3]=xn;const Ma=Un[23];dn=(jo.anchorX-Ma)*this.pixelRatio,Un[4]=dn;const uo=Un[24];fn=(jo.anchorY-uo)*this.pixelRatio,Un[5]=fn,$i=xn.height,Un[6]=$i,Mi=xn.width,Un[13]=Mi}let Xi;Un.length>25&&(Xi=Un[25]);let ar,Pr,Rr;Un.length>17?(ar=Un[16],Pr=Un[17],Rr=Un[18]):(ar=defaultPadding,Pr=!1,Rr=!1),Bi&&zn?Gi+=Gn:!Bi&&!zn&&(Gi-=Gn);let Us=0;for(;cn<un;cn+=2){if(Xi&&Xi[Us++]<Mi/this.pixelRatio)continue;const jo=this.calculateImageOrLabelDimensions_(xn.width,xn.height,en[cn],en[cn+1],Mi,$i,dn,fn,Di,zi,Gi,Ti,Be,ar,Pr||Rr,Hn),Ma=[e,t,xn,jo,Hi,Pr?Rn:null,Rr?Tn:null];if(Ze){let uo,to,ta;if(Oi){const go=un-cn;if(!Oi[go]){Oi[go]={args:Ma,declutterMode:pn};continue}const Oo=Oi[go];uo=Oo.args,to=Oo.declutterMode,delete Oi[go],ta=getDeclutterBox(uo)}let ya,Qo;if(uo&&(to!=="declutter"||!Ze.collides(ta))&&(ya=!0),(pn!=="declutter"||!Ze.collides(jo.declutterBox))&&(Qo=!0),to==="declutter"&&pn==="declutter"){const go=ya&&Qo;ya=go,Qo=go}ya&&(to!=="none"&&Ze.insert(ta),this.replayImageOrLabel_.apply(this,uo)),Qo&&(pn!=="none"&&Ze.insert(jo.declutterBox),this.replayImageOrLabel_.apply(this,Ma))}else this.replayImageOrLabel_.apply(this,Ma)}++tn;break;case Instruction.DRAW_CHARS:const Vr=Un[1],ro=Un[2],Js=Un[3],fo=Un[4];Pn=Un[5];const lo=Un[6],Ks=Un[7],oo=Un[8];Mn=Un[9];const no=Un[10];wn=Un[11],bn=Un[12];const bo=[Un[13],Un[13]];pn=Un[14]||"declutter";const co=Un[15],Ko=this.textStates[bn],aa=Ko.font,ho=[Ko.scale[0]*Ks,Ko.scale[1]*Ks];let io;aa in this.widths_?io=this.widths_[aa]:(io={},this.widths_[aa]=io);const po=lineStringLength(en,Vr,ro,2),cc=Math.abs(ho[0])*measureAndCacheTextWidth(aa,wn,io);if(fo||cc<=po){const jo=this.textStates[bn].textAlign,Ma=(po-cc)*horizontalTextAlign(wn,jo),uo=drawTextOnPath(en,Vr,ro,2,wn,Ma,lo,Math.abs(ho[0]),measureAndCacheTextWidth,aa,io,zn?0:this.viewRotation_,co);e:if(uo){const to=[];let ta,ya,Qo,go,Oo;if(Mn)for(ta=0,ya=uo.length;ta<ya;++ta){Oo=uo[ta],Qo=Oo[4],go=this.createLabel(Qo,bn,"",Mn),dn=Oo[2]+(ho[0]<0?-no:no),fn=Js*go.height+(.5-Js)*2*no*ho[1]/ho[0]-oo;const ko=this.calculateImageOrLabelDimensions_(go.width,go.height,Oo[0],Oo[1],go.width,go.height,dn,fn,0,0,Oo[3],bo,!1,defaultPadding,!1,Hn);if(Ze&&pn==="declutter"&&Ze.collides(ko.declutterBox))break e;to.push([e,t,go,ko,1,null,null])}if(Pn)for(ta=0,ya=uo.length;ta<ya;++ta){Oo=uo[ta],Qo=Oo[4],go=this.createLabel(Qo,bn,Pn,""),dn=Oo[2],fn=Js*go.height-oo;const ko=this.calculateImageOrLabelDimensions_(go.width,go.height,Oo[0],Oo[1],go.width,go.height,dn,fn,0,0,Oo[3],bo,!1,defaultPadding,!1,Hn);if(Ze&&pn==="declutter"&&Ze.collides(ko.declutterBox))break e;to.push([e,t,go,ko,1,null,null])}Ze&&pn!=="none"&&Ze.load(to.map(getDeclutterBox));for(let ko=0,Pl=to.length;ko<Pl;++ko)this.replayImageOrLabel_.apply(this,to[ko])}}++tn;break;case Instruction.END_GEOMETRY:if(je!==void 0){Hn=Un[1];const jo=je(Hn,qn,pn);if(jo)return jo}++tn;break;case Instruction.FILL:Qn?En++:this.fill_(e),++tn;break;case Instruction.MOVE_TO_LINE_TO:for(cn=Un[1],un=Un[2],Ni=en[cn],On=en[cn+1],e.moveTo(Ni,On),gn=Ni+.5|0,yn=On+.5|0,cn+=2;cn<un;cn+=2)Ni=en[cn],On=en[cn+1],vn=Ni+.5|0,An=On+.5|0,(cn==un-2||vn!==gn||An!==yn)&&(e.lineTo(Ni,On),gn=vn,yn=An);++tn;break;case Instruction.SET_FILL_STYLE:Rn=Un,this.alignAndScaleFill_=Un[2],En&&(this.fill_(e),En=0,Cn&&(e.stroke(),Cn=0)),e.fillStyle=Un[1],++tn;break;case Instruction.SET_STROKE_STYLE:Tn=Un,Cn&&(e.stroke(),Cn=0),this.setStrokeStyle_(e,Un),++tn;break;case Instruction.STROKE:Qn?Cn++:e.stroke(),++tn;break;default:++tn;break}}En&&this.fill_(e),Cn&&e.stroke()}execute(e,t,ke,Ge,Be,je){this.viewRotation_=Ge,this.execute_(e,t,ke,this.instructions,Be,void 0,void 0,je)}executeHitDetection(e,t,ke,Ge,Be){return this.viewRotation_=ke,this.execute_(e,[e.canvas.width,e.canvas.height],t,this.hitDetectionInstructions,!0,Ge,Be)}}const ALL=["Polygon","Circle","LineString","Image","Text","Default"],DECLUTTER=["Image","Text"],NON_DECLUTTER=ALL.filter(Oe=>!DECLUTTER.includes(Oe));class ExecutorGroup{constructor(e,t,ke,Ge,Be,je,Ve){this.maxExtent_=e,this.overlaps_=Ge,this.pixelRatio_=ke,this.resolution_=t,this.renderBuffer_=je,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=create$1(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(Be,Ve)}clip(e,t){const ke=this.getClipCoords(t);e.beginPath(),e.moveTo(ke[0],ke[1]),e.lineTo(ke[2],ke[3]),e.lineTo(ke[4],ke[5]),e.lineTo(ke[6],ke[7]),e.clip()}createExecutors_(e,t){for(const ke in e){let Ge=this.executorsByZIndex_[ke];Ge===void 0&&(Ge={},this.executorsByZIndex_[ke]=Ge);const Be=e[ke];for(const je in Be){const Ve=Be[je];Ge[je]=new Executor(this.resolution_,this.pixelRatio_,this.overlaps_,Ve,t)}}}hasExecutors(e){for(const t in this.executorsByZIndex_){const ke=this.executorsByZIndex_[t];for(let Ge=0,Be=e.length;Ge<Be;++Ge)if(e[Ge]in ke)return!0}return!1}forEachFeatureAtCoordinate(e,t,ke,Ge,Be,je){Ge=Math.round(Ge);const Ve=Ge*2+1,Ze=compose(this.hitDetectionTransform_,Ge+.5,Ge+.5,1/t,-1/t,-ke,-e[0],-e[1]),Qe=!this.hitDetectionContext_;Qe&&(this.hitDetectionContext_=createCanvasContext2D(Ve,Ve,void 0,{willReadFrequently:!0}));const en=this.hitDetectionContext_;en.canvas.width!==Ve||en.canvas.height!==Ve?(en.canvas.width=Ve,en.canvas.height=Ve):Qe||en.clearRect(0,0,Ve,Ve);let tn;this.renderBuffer_!==void 0&&(tn=createEmpty(),extendCoordinate(tn,e),buffer(tn,t*(this.renderBuffer_+Ge),tn));const an=getPixelIndexArray(Ge);let cn;function un(An,xn,wn){const bn=en.getImageData(0,0,Ve,Ve).data;for(let Mn=0,Pn=an.length;Mn<Pn;Mn++)if(bn[an[Mn]]>0){if(!je||wn==="none"||cn!=="Image"&&cn!=="Text"||je.includes(An)){const En=(an[Mn]-3)/4,Cn=Ge-En%Ve,Rn=Ge-(En/Ve|0),Tn=Be(An,xn,Cn*Cn+Rn*Rn);if(Tn)return Tn}en.clearRect(0,0,Ve,Ve);break}}const dn=Object.keys(this.executorsByZIndex_).map(Number);dn.sort(ascending);let fn,pn,gn,yn,vn;for(fn=dn.length-1;fn>=0;--fn){const An=dn[fn].toString();for(gn=this.executorsByZIndex_[An],pn=ALL.length-1;pn>=0;--pn)if(cn=ALL[pn],yn=gn[cn],yn!==void 0&&(vn=yn.executeHitDetection(en,Ze,ke,un,tn),vn))return vn}}getClipCoords(e){const t=this.maxExtent_;if(!t)return null;const ke=t[0],Ge=t[1],Be=t[2],je=t[3],Ve=[ke,Ge,ke,je,Be,je,Be,Ge];return transform2D(Ve,0,8,2,e,Ve),Ve}isEmpty(){return isEmpty$1(this.executorsByZIndex_)}execute(e,t,ke,Ge,Be,je,Ve){const Ze=Object.keys(this.executorsByZIndex_).map(Number);Ze.sort(Ve?descending:ascending),je=je||ALL;const Qe=ALL.length;for(let en=0,tn=Ze.length;en<tn;++en){const an=Ze[en].toString(),cn=this.executorsByZIndex_[an];for(let un=0,dn=je.length;un<dn;++un){const fn=je[un],pn=cn[fn];if(pn!==void 0){const gn=Ve===null?void 0:pn.getZIndexContext(),yn=gn?gn.getContext():e,vn=this.maxExtent_&&fn!=="Image"&&fn!=="Text";if(vn&&(yn.save(),this.clip(yn,ke)),!gn||fn==="Text"||fn==="Image"?pn.execute(yn,t,ke,Ge,Be,Ve):gn.pushFunction(An=>pn.execute(An,t,ke,Ge,Be,Ve)),vn&&yn.restore(),gn){gn.offset();const An=Ze[en]*Qe+un;this.deferredZIndexContexts_[An]||(this.deferredZIndexContexts_[An]=[]),this.deferredZIndexContexts_[An].push(gn)}}}}this.renderedContext_=e}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const e=this.deferredZIndexContexts_,t=Object.keys(e).map(Number).sort(ascending);for(let ke=0,Ge=t.length;ke<Ge;++ke)e[t[ke]].forEach(Be=>{Be.draw(this.renderedContext_),Be.clear()}),e[t[ke]].length=0}}const circlePixelIndexArrayCache={};function getPixelIndexArray(Oe){if(circlePixelIndexArrayCache[Oe]!==void 0)return circlePixelIndexArrayCache[Oe];const e=Oe*2+1,t=Oe*Oe,ke=new Array(t+1);for(let Be=0;Be<=Oe;++Be)for(let je=0;je<=Oe;++je){const Ve=Be*Be+je*je;if(Ve>t)break;let Ze=ke[Ve];Ze||(Ze=[],ke[Ve]=Ze),Ze.push(((Oe+Be)*e+(Oe+je))*4+3),Be>0&&Ze.push(((Oe-Be)*e+(Oe+je))*4+3),je>0&&(Ze.push(((Oe+Be)*e+(Oe-je))*4+3),Be>0&&Ze.push(((Oe-Be)*e+(Oe-je))*4+3))}const Ge=[];for(let Be=0,je=ke.length;Be<je;++Be)ke[Be]&&Ge.push(...ke[Be]);return circlePixelIndexArrayCache[Oe]=Ge,Ge}class CanvasImmediateRenderer extends VectorContext{constructor(e,t,ke,Ge,Be,je,Ve){super(),this.context_=e,this.pixelRatio_=t,this.extent_=ke,this.transform_=Ge,this.transformRotation_=Ge?toFixed(Math.atan2(Ge[1],Ge[0]),10):0,this.viewRotation_=Be,this.squaredTolerance_=je,this.userTransform_=Ve,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=create$1()}drawImages_(e,t,ke,Ge){if(!this.image_)return;const Be=transform2D(e,t,ke,Ge,this.transform_,this.pixelCoordinates_),je=this.context_,Ve=this.tmpLocalTransform_,Ze=je.globalAlpha;this.imageOpacity_!=1&&(je.globalAlpha=Ze*this.imageOpacity_);let Qe=this.imageRotation_;this.transformRotation_===0&&(Qe-=this.viewRotation_),this.imageRotateWithView_&&(Qe+=this.viewRotation_);for(let en=0,tn=Be.length;en<tn;en+=2){const an=Be[en]-this.imageAnchorX_,cn=Be[en+1]-this.imageAnchorY_;if(Qe!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const un=an+this.imageAnchorX_,dn=cn+this.imageAnchorY_;compose(Ve,un,dn,1,1,Qe,-un,-dn),je.save(),je.transform.apply(je,Ve),je.translate(un,dn),je.scale(this.imageScale_[0],this.imageScale_[1]),je.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),je.restore()}else je.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,an,cn,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(je.globalAlpha=Ze)}drawText_(e,t,ke,Ge){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const Be=transform2D(e,t,ke,Ge,this.transform_,this.pixelCoordinates_),je=this.context_;let Ve=this.textRotation_;for(this.transformRotation_===0&&(Ve-=this.viewRotation_),this.textRotateWithView_&&(Ve+=this.viewRotation_);t<ke;t+=Ge){const Ze=Be[t]+this.textOffsetX_,Qe=Be[t+1]+this.textOffsetY_;Ve!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(je.save(),je.translate(Ze-this.textOffsetX_,Qe-this.textOffsetY_),je.rotate(Ve),je.translate(this.textOffsetX_,this.textOffsetY_),je.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&je.strokeText(this.text_,0,0),this.textFillState_&&je.fillText(this.text_,0,0),je.restore()):(this.textStrokeState_&&je.strokeText(this.text_,Ze,Qe),this.textFillState_&&je.fillText(this.text_,Ze,Qe))}}moveToLineTo_(e,t,ke,Ge,Be){const je=this.context_,Ve=transform2D(e,t,ke,Ge,this.transform_,this.pixelCoordinates_);je.moveTo(Ve[0],Ve[1]);let Ze=Ve.length;Be&&(Ze-=2);for(let Qe=2;Qe<Ze;Qe+=2)je.lineTo(Ve[Qe],Ve[Qe+1]);return Be&&je.closePath(),ke}drawRings_(e,t,ke,Ge){for(let Be=0,je=ke.length;Be<je;++Be)t=this.moveToLineTo_(e,t,ke[Be],Ge,!0);return t}drawCircle(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=transformGeom2D(e,this.transform_,this.pixelCoordinates_),ke=t[2]-t[0],Ge=t[3]-t[1],Be=Math.sqrt(ke*ke+Ge*Ge),je=this.context_;je.beginPath(),je.arc(t[0],t[1],Be,0,2*Math.PI),this.fillState_&&je.fill(),this.strokeState_&&je.stroke()}this.text_!==""&&this.drawText_(e.getCenter(),0,2,2)}}setStyle(e){this.setFillStrokeStyle(e.getFill(),e.getStroke()),this.setImageStyle(e.getImage()),this.setTextStyle(e.getText())}setTransform(e){this.transform_=e}drawGeometry(e){switch(e.getType()){case"Point":this.drawPoint(e);break;case"LineString":this.drawLineString(e);break;case"Polygon":this.drawPolygon(e);break;case"MultiPoint":this.drawMultiPoint(e);break;case"MultiLineString":this.drawMultiLineString(e);break;case"MultiPolygon":this.drawMultiPolygon(e);break;case"GeometryCollection":this.drawGeometryCollection(e);break;case"Circle":this.drawCircle(e);break}}drawFeature(e,t){const ke=t.getGeometryFunction()(e);ke&&(this.setStyle(t),this.drawGeometry(ke))}drawGeometryCollection(e){const t=e.getGeometriesArray();for(let ke=0,Ge=t.length;ke<Ge;++ke)this.drawGeometry(t[ke])}drawPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),ke=e.getStride();this.image_&&this.drawImages_(t,0,t.length,ke),this.text_!==""&&this.drawText_(t,0,t.length,ke)}drawMultiPoint(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getFlatCoordinates(),ke=e.getStride();this.image_&&this.drawImages_(t,0,t.length,ke),this.text_!==""&&this.drawText_(t,0,t.length,ke)}drawLineString(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const t=this.context_,ke=e.getFlatCoordinates();t.beginPath(),this.moveToLineTo_(ke,0,ke.length,e.getStride(),!1),t.stroke()}if(this.text_!==""){const t=e.getFlatMidpoint();this.drawText_(t,0,2,2)}}}drawMultiLineString(e){this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const t=e.getExtent();if(intersects$1(this.extent_,t)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const ke=this.context_,Ge=e.getFlatCoordinates();let Be=0;const je=e.getEnds(),Ve=e.getStride();ke.beginPath();for(let Ze=0,Qe=je.length;Ze<Qe;++Ze)Be=this.moveToLineTo_(Ge,Be,je[Ze],Ve,!1);ke.stroke()}if(this.text_!==""){const ke=e.getFlatMidpoints();this.drawText_(ke,0,ke.length,2)}}}drawPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_;t.beginPath(),this.drawRings_(e.getOrientedFlatCoordinates(),0,e.getEnds(),e.getStride()),this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoint();this.drawText_(t,0,2,2)}}}drawMultiPolygon(e){if(this.squaredTolerance_&&(e=e.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!intersects$1(this.extent_,e.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const t=this.context_,ke=e.getOrientedFlatCoordinates();let Ge=0;const Be=e.getEndss(),je=e.getStride();t.beginPath();for(let Ve=0,Ze=Be.length;Ve<Ze;++Ve){const Qe=Be[Ve];Ge=this.drawRings_(ke,Ge,Qe,je)}this.fillState_&&t.fill(),this.strokeState_&&t.stroke()}if(this.text_!==""){const t=e.getFlatInteriorPoints();this.drawText_(t,0,t.length,2)}}}setContextFillState_(e){const t=this.context_,ke=this.contextFillState_;ke?ke.fillStyle!=e.fillStyle&&(ke.fillStyle=e.fillStyle,t.fillStyle=e.fillStyle):(t.fillStyle=e.fillStyle,this.contextFillState_={fillStyle:e.fillStyle})}setContextStrokeState_(e){const t=this.context_,ke=this.contextStrokeState_;ke?(ke.lineCap!=e.lineCap&&(ke.lineCap=e.lineCap,t.lineCap=e.lineCap),equals$2(ke.lineDash,e.lineDash)||t.setLineDash(ke.lineDash=e.lineDash),ke.lineDashOffset!=e.lineDashOffset&&(ke.lineDashOffset=e.lineDashOffset,t.lineDashOffset=e.lineDashOffset),ke.lineJoin!=e.lineJoin&&(ke.lineJoin=e.lineJoin,t.lineJoin=e.lineJoin),ke.lineWidth!=e.lineWidth&&(ke.lineWidth=e.lineWidth,t.lineWidth=e.lineWidth),ke.miterLimit!=e.miterLimit&&(ke.miterLimit=e.miterLimit,t.miterLimit=e.miterLimit),ke.strokeStyle!=e.strokeStyle&&(ke.strokeStyle=e.strokeStyle,t.strokeStyle=e.strokeStyle)):(t.lineCap=e.lineCap,t.setLineDash(e.lineDash),t.lineDashOffset=e.lineDashOffset,t.lineJoin=e.lineJoin,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.strokeStyle=e.strokeStyle,this.contextStrokeState_={lineCap:e.lineCap,lineDash:e.lineDash,lineDashOffset:e.lineDashOffset,lineJoin:e.lineJoin,lineWidth:e.lineWidth,miterLimit:e.miterLimit,strokeStyle:e.strokeStyle})}setContextTextState_(e){const t=this.context_,ke=this.contextTextState_,Ge=e.textAlign?e.textAlign:defaultTextAlign;ke?(ke.font!=e.font&&(ke.font=e.font,t.font=e.font),ke.textAlign!=Ge&&(ke.textAlign=Ge,t.textAlign=Ge),ke.textBaseline!=e.textBaseline&&(ke.textBaseline=e.textBaseline,t.textBaseline=e.textBaseline)):(t.font=e.font,t.textAlign=Ge,t.textBaseline=e.textBaseline,this.contextTextState_={font:e.font,textAlign:Ge,textBaseline:e.textBaseline})}setFillStrokeStyle(e,t){if(!e)this.fillState_=null;else{const ke=e.getColor();this.fillState_={fillStyle:asColorLike(ke||defaultFillStyle)}}if(!t)this.strokeState_=null;else{const ke=t.getColor(),Ge=t.getLineCap(),Be=t.getLineDash(),je=t.getLineDashOffset(),Ve=t.getLineJoin(),Ze=t.getWidth(),Qe=t.getMiterLimit(),en=Be||defaultLineDash;this.strokeState_={lineCap:Ge!==void 0?Ge:defaultLineCap,lineDash:this.pixelRatio_===1?en:en.map(tn=>tn*this.pixelRatio_),lineDashOffset:(je||defaultLineDashOffset)*this.pixelRatio_,lineJoin:Ve!==void 0?Ve:defaultLineJoin,lineWidth:(Ze!==void 0?Ze:defaultLineWidth)*this.pixelRatio_,miterLimit:Qe!==void 0?Qe:defaultMiterLimit,strokeStyle:asColorLike(ke||defaultStrokeStyle)}}}setImageStyle(e){let t;if(!e||!(t=e.getSize())){this.image_=null;return}const ke=e.getPixelRatio(this.pixelRatio_),Ge=e.getAnchor(),Be=e.getOrigin();this.image_=e.getImage(this.pixelRatio_),this.imageAnchorX_=Ge[0]*ke,this.imageAnchorY_=Ge[1]*ke,this.imageHeight_=t[1]*ke,this.imageOpacity_=e.getOpacity(),this.imageOriginX_=Be[0],this.imageOriginY_=Be[1],this.imageRotateWithView_=e.getRotateWithView(),this.imageRotation_=e.getRotation();const je=e.getScaleArray();this.imageScale_=[je[0]*this.pixelRatio_/ke,je[1]*this.pixelRatio_/ke],this.imageWidth_=t[0]*ke}setTextStyle(e){if(!e)this.text_="";else{const t=e.getFill();if(!t)this.textFillState_=null;else{const cn=t.getColor();this.textFillState_={fillStyle:asColorLike(cn||defaultFillStyle)}}const ke=e.getStroke();if(!ke)this.textStrokeState_=null;else{const cn=ke.getColor(),un=ke.getLineCap(),dn=ke.getLineDash(),fn=ke.getLineDashOffset(),pn=ke.getLineJoin(),gn=ke.getWidth(),yn=ke.getMiterLimit();this.textStrokeState_={lineCap:un!==void 0?un:defaultLineCap,lineDash:dn||defaultLineDash,lineDashOffset:fn||defaultLineDashOffset,lineJoin:pn!==void 0?pn:defaultLineJoin,lineWidth:gn!==void 0?gn:defaultLineWidth,miterLimit:yn!==void 0?yn:defaultMiterLimit,strokeStyle:asColorLike(cn||defaultStrokeStyle)}}const Ge=e.getFont(),Be=e.getOffsetX(),je=e.getOffsetY(),Ve=e.getRotateWithView(),Ze=e.getRotation(),Qe=e.getScaleArray(),en=e.getText(),tn=e.getTextAlign(),an=e.getTextBaseline();this.textState_={font:Ge!==void 0?Ge:defaultFont,textAlign:tn!==void 0?tn:defaultTextAlign,textBaseline:an!==void 0?an:defaultTextBaseline},this.text_=en!==void 0?Array.isArray(en)?en.reduce((cn,un,dn)=>cn+=dn%2?" ":un,""):en:"",this.textOffsetX_=Be!==void 0?this.pixelRatio_*Be:0,this.textOffsetY_=je!==void 0?this.pixelRatio_*je:0,this.textRotateWithView_=Ve!==void 0?Ve:!1,this.textRotation_=Ze!==void 0?Ze:0,this.textScale_=[this.pixelRatio_*Qe[0],this.pixelRatio_*Qe[1]]}}}const HIT_DETECT_RESOLUTION=.5;function createHitDetectionImageData(Oe,e,t,ke,Ge,Be,je,Ve,Ze){const Qe=Ze?toUserExtent(Ge):Ge,en=Oe[0]*HIT_DETECT_RESOLUTION,tn=Oe[1]*HIT_DETECT_RESOLUTION,an=createCanvasContext2D(en,tn);an.imageSmoothingEnabled=!1;const cn=an.canvas,un=new CanvasImmediateRenderer(an,HIT_DETECT_RESOLUTION,Ge,null,je,Ve,Ze?getTransformFromProjections(getUserProjection(),Ze):null),dn=t.length,fn=Math.floor((256*256*256-1)/dn),pn={};for(let yn=1;yn<=dn;++yn){const vn=t[yn-1],An=vn.getStyleFunction()||ke;if(!An)continue;let xn=An(vn,Be);if(!xn)continue;Array.isArray(xn)||(xn=[xn]);const bn=(yn*fn).toString(16).padStart(7,"#00000");for(let Mn=0,Pn=xn.length;Mn<Pn;++Mn){const En=xn[Mn],Cn=En.getGeometryFunction()(vn);if(!Cn||!intersects$1(Qe,Cn.getExtent()))continue;const Rn=En.clone(),Tn=Rn.getFill();Tn&&Tn.setColor(bn);const Nn=Rn.getStroke();Nn&&(Nn.setColor(bn),Nn.setLineDash(null)),Rn.setText(void 0);const Gn=En.getImage();if(Gn){const Hn=Gn.getImageSize();if(!Hn)continue;const Ni=createCanvasContext2D(Hn[0],Hn[1],void 0,{alpha:!1}),On=Ni.canvas;Ni.fillStyle=bn,Ni.fillRect(0,0,On.width,On.height),Rn.setImage(new Icon({img:On,anchor:Gn.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:Gn.getOrigin(),opacity:1,size:Gn.getSize(),scale:Gn.getScale(),rotation:Gn.getRotation(),rotateWithView:Gn.getRotateWithView()}))}const zn=Rn.getZIndex()||0;let $n=pn[zn];$n||($n={},pn[zn]=$n,$n.Polygon=[],$n.Circle=[],$n.LineString=[],$n.Point=[]);const Qn=Cn.getType();if(Qn==="GeometryCollection"){const Hn=Cn.getGeometriesArrayRecursive();for(let Ni=0,On=Hn.length;Ni<On;++Ni){const qn=Hn[Ni];$n[qn.getType().replace("Multi","")].push(qn,Rn)}}else $n[Qn.replace("Multi","")].push(Cn,Rn)}}const gn=Object.keys(pn).map(Number).sort(ascending);for(let yn=0,vn=gn.length;yn<vn;++yn){const An=pn[gn[yn]];for(const xn in An){const wn=An[xn];for(let bn=0,Mn=wn.length;bn<Mn;bn+=2){un.setStyle(wn[bn+1]);for(let Pn=0,En=e.length;Pn<En;++Pn)un.setTransform(e[Pn]),un.drawGeometry(wn[bn])}}}return an.getImageData(0,0,cn.width,cn.height)}function hitDetect(Oe,e,t){const ke=[];if(t){const Ge=Math.floor(Math.round(Oe[0])*HIT_DETECT_RESOLUTION),Be=Math.floor(Math.round(Oe[1])*HIT_DETECT_RESOLUTION),je=(clamp(Ge,0,t.width-1)+clamp(Be,0,t.height-1)*t.width)*4,Ve=t.data[je],Ze=t.data[je+1],en=t.data[je+2]+256*(Ze+256*Ve),tn=Math.floor((256*256*256-1)/e.length);en&&en%tn===0&&ke.push(e[en/tn-1])}return ke}const SIMPLIFY_TOLERANCE=.5,GEOMETRY_RENDERERS={Point:renderPointGeometry,LineString:renderLineStringGeometry,Polygon:renderPolygonGeometry,MultiPoint:renderMultiPointGeometry,MultiLineString:renderMultiLineStringGeometry,MultiPolygon:renderMultiPolygonGeometry,GeometryCollection:renderGeometryCollectionGeometry,Circle:renderCircleGeometry};function defaultOrder(Oe,e){return parseInt(getUid(Oe),10)-parseInt(getUid(e),10)}function getSquaredTolerance(Oe,e){const t=getTolerance(Oe,e);return t*t}function getTolerance(Oe,e){return SIMPLIFY_TOLERANCE*Oe/e}function renderCircleGeometry(Oe,e,t,ke,Ge){const Be=t.getFill(),je=t.getStroke();if(Be||je){const Ze=Oe.getBuilder(t.getZIndex(),"Circle");Ze.setFillStrokeStyle(Be,je),Ze.drawCircle(e,ke,Ge)}const Ve=t.getText();if(Ve&&Ve.getText()){const Ze=Oe.getBuilder(t.getZIndex(),"Text");Ze.setTextStyle(Ve),Ze.drawText(e,ke)}}function renderFeature$1(Oe,e,t,ke,Ge,Be,je,Ve){const Ze=[],Qe=t.getImage();if(Qe){let an=!0;const cn=Qe.getImageState();cn==ImageState.LOADED||cn==ImageState.ERROR?an=!1:cn==ImageState.IDLE&&Qe.load(),an&&Ze.push(Qe.ready())}const en=t.getFill();en&&en.loading()&&Ze.push(en.ready());const tn=Ze.length>0;return tn&&Promise.all(Ze).then(()=>Ge(null)),renderFeatureInternal(Oe,e,t,ke,Be,je,Ve),tn}function renderFeatureInternal(Oe,e,t,ke,Ge,Be,je){const Ve=t.getGeometryFunction()(e);if(!Ve)return;const Ze=Ve.simplifyTransformed(ke,Ge);if(t.getRenderer())renderGeometry(Oe,Ze,t,e,je);else{const en=GEOMETRY_RENDERERS[Ze.getType()];en(Oe,Ze,t,e,je,Be)}}function renderGeometry(Oe,e,t,ke,Ge){if(e.getType()=="GeometryCollection"){const je=e.getGeometries();for(let Ve=0,Ze=je.length;Ve<Ze;++Ve)renderGeometry(Oe,je[Ve],t,ke,Ge);return}Oe.getBuilder(t.getZIndex(),"Default").drawCustom(e,ke,t.getRenderer(),t.getHitDetectionRenderer(),Ge)}function renderGeometryCollectionGeometry(Oe,e,t,ke,Ge,Be){const je=e.getGeometriesArray();let Ve,Ze;for(Ve=0,Ze=je.length;Ve<Ze;++Ve){const Qe=GEOMETRY_RENDERERS[je[Ve].getType()];Qe(Oe,je[Ve],t,ke,Ge,Be)}}function renderLineStringGeometry(Oe,e,t,ke,Ge){const Be=t.getStroke();if(Be){const Ve=Oe.getBuilder(t.getZIndex(),"LineString");Ve.setFillStrokeStyle(null,Be),Ve.drawLineString(e,ke,Ge)}const je=t.getText();if(je&&je.getText()){const Ve=Oe.getBuilder(t.getZIndex(),"Text");Ve.setTextStyle(je),Ve.drawText(e,ke,Ge)}}function renderMultiLineStringGeometry(Oe,e,t,ke,Ge){const Be=t.getStroke();if(Be){const Ve=Oe.getBuilder(t.getZIndex(),"LineString");Ve.setFillStrokeStyle(null,Be),Ve.drawMultiLineString(e,ke,Ge)}const je=t.getText();if(je&&je.getText()){const Ve=Oe.getBuilder(t.getZIndex(),"Text");Ve.setTextStyle(je),Ve.drawText(e,ke,Ge)}}function renderMultiPolygonGeometry(Oe,e,t,ke,Ge){const Be=t.getFill(),je=t.getStroke();if(je||Be){const Ze=Oe.getBuilder(t.getZIndex(),"Polygon");Ze.setFillStrokeStyle(Be,je),Ze.drawMultiPolygon(e,ke,Ge)}const Ve=t.getText();if(Ve&&Ve.getText()){const Ze=Oe.getBuilder(t.getZIndex(),"Text");Ze.setTextStyle(Ve),Ze.drawText(e,ke,Ge)}}function renderPointGeometry(Oe,e,t,ke,Ge,Be){const je=t.getImage(),Ve=t.getText(),Ze=Ve&&Ve.getText(),Qe=Be&&je&&Ze?{}:void 0;if(je){if(je.getImageState()!=ImageState.LOADED)return;const en=Oe.getBuilder(t.getZIndex(),"Image");en.setImageStyle(je,Qe),en.drawPoint(e,ke,Ge)}if(Ze){const en=Oe.getBuilder(t.getZIndex(),"Text");en.setTextStyle(Ve,Qe),en.drawText(e,ke,Ge)}}function renderMultiPointGeometry(Oe,e,t,ke,Ge,Be){const je=t.getImage(),Ve=je&&je.getOpacity()!==0,Ze=t.getText(),Qe=Ze&&Ze.getText(),en=Be&&Ve&&Qe?{}:void 0;if(Ve){if(je.getImageState()!=ImageState.LOADED)return;const tn=Oe.getBuilder(t.getZIndex(),"Image");tn.setImageStyle(je,en),tn.drawMultiPoint(e,ke,Ge)}if(Qe){const tn=Oe.getBuilder(t.getZIndex(),"Text");tn.setTextStyle(Ze,en),tn.drawText(e,ke,Ge)}}function renderPolygonGeometry(Oe,e,t,ke,Ge){const Be=t.getFill(),je=t.getStroke();if(Be||je){const Ze=Oe.getBuilder(t.getZIndex(),"Polygon");Ze.setFillStrokeStyle(Be,je),Ze.drawPolygon(e,ke,Ge)}const Ve=t.getText();if(Ve&&Ve.getText()){const Ze=Oe.getBuilder(t.getZIndex(),"Text");Ze.setTextStyle(Ve),Ze.drawText(e,ke,Ge)}}class CanvasVectorLayerRenderer extends CanvasLayerRenderer{constructor(e){super(e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=createEmpty(),this.wrappedRenderedExtent_=createEmpty(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(e,t,ke){const Ge=t.extent,Be=t.viewState,je=Be.center,Ve=Be.resolution,Ze=Be.projection,Qe=Be.rotation,en=Ze.getExtent(),tn=this.getLayer().getSource(),an=this.getLayer().getDeclutter(),cn=t.pixelRatio,un=t.viewHints,dn=!(un[ViewHint.ANIMATING]||un[ViewHint.INTERACTING]),fn=this.context,pn=Math.round(getWidth(Ge)/Ve*cn),gn=Math.round(getHeight(Ge)/Ve*cn),yn=tn.getWrapX()&&Ze.canWrapX(),vn=yn?getWidth(en):null,An=yn?Math.ceil((Ge[2]-en[2])/vn)+1:1;let xn=yn?Math.floor((Ge[0]-en[0])/vn):0;do{let wn=this.getRenderTransform(je,Ve,0,cn,pn,gn,xn*vn);t.declutter&&(wn=wn.slice(0)),e.execute(fn,[fn.canvas.width,fn.canvas.height],wn,Qe,dn,ke===void 0?ALL:ke?DECLUTTER:NON_DECLUTTER,ke?an&&t.declutter[an]:void 0)}while(++xn<An)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=createCanvasContext2D(this.context.canvas.width,this.context.canvas.height,canvasPool))}resetDrawContext_(){if(this.opacity_!==1){const e=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=e,releaseCanvas(this.context),canvasPool.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(e){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,e,!0)}renderDeferredInternal(e){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(e,t){const ke=e.layerStatesArray[e.layerIndex];this.opacity_=ke.opacity;const Ge=e.viewState;this.prepareContainer(e,t);const Be=this.context,je=this.replayGroup_;let Ve=je&&!je.isEmpty();if(!Ve&&!(this.getLayer().hasListener(RenderEventType.PRERENDER)||this.getLayer().hasListener(RenderEventType.POSTRENDER)))return null;if(this.setDrawContext_(),this.preRender(Be,e),Ge.projection,this.clipped_=!1,Ve&&ke.extent&&this.clipping){const Ze=fromUserExtent(ke.extent);Ve=intersects$1(Ze,e.extent),this.clipped_=Ve&&!containsExtent(Ze,e.extent),this.clipped_&&this.clipUnrotated(Be,e,Ze)}return Ve&&this.renderWorlds(je,e,this.getLayer().getDeclutter()?!1:void 0),!e.declutter&&this.clipped_&&Be.restore(),this.postRender(Be,e),this.renderedRotation_!==Ge.rotation&&(this.renderedRotation_=Ge.rotation,this.hitDetectionImageData_=null),e.declutter||this.resetDrawContext_(),this.container}getFeatures(e){return new Promise(t=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const ke=this.frameState.size.slice(),Ge=this.renderedCenter_,Be=this.renderedResolution_,je=this.renderedRotation_,Ve=this.renderedProjection_,Ze=this.wrappedRenderedExtent_,Qe=this.getLayer(),en=[],tn=ke[0]*HIT_DETECT_RESOLUTION,an=ke[1]*HIT_DETECT_RESOLUTION;en.push(this.getRenderTransform(Ge,Be,je,HIT_DETECT_RESOLUTION,tn,an,0).slice());const cn=Qe.getSource(),un=Ve.getExtent();if(cn.getWrapX()&&Ve.canWrapX()&&!containsExtent(un,Ze)){let dn=Ze[0];const fn=getWidth(un);let pn=0,gn;for(;dn<un[0];)--pn,gn=fn*pn,en.push(this.getRenderTransform(Ge,Be,je,HIT_DETECT_RESOLUTION,tn,an,gn).slice()),dn+=fn;for(pn=0,dn=Ze[2];dn>un[2];)++pn,gn=fn*pn,en.push(this.getRenderTransform(Ge,Be,je,HIT_DETECT_RESOLUTION,tn,an,gn).slice()),dn-=fn}this.hitDetectionImageData_=createHitDetectionImageData(ke,en,this.renderedFeatures_,Qe.getStyleFunction(),Ze,Be,je,getSquaredTolerance(Be,this.renderedPixelRatio_),null)}t(hitDetect(e,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(e,t,ke,Ge,Be){if(!this.replayGroup_)return;const je=t.viewState.resolution,Ve=t.viewState.rotation,Ze=this.getLayer(),Qe={},en=function(an,cn,un){const dn=getUid(an),fn=Qe[dn];if(fn){if(fn!==!0&&un<fn.distanceSq){if(un===0)return Qe[dn]=!0,Be.splice(Be.lastIndexOf(fn),1),Ge(an,Ze,cn);fn.geometry=cn,fn.distanceSq=un}}else{if(un===0)return Qe[dn]=!0,Ge(an,Ze,cn);Be.push(Qe[dn]={feature:an,layer:Ze,geometry:cn,distanceSq:un,callback:Ge})}},tn=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(e,je,Ve,ke,en,tn?t.declutter[tn].all().map(an=>an.value):null)}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.replayGroup_&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}prepareFrame(e){const t=this.getLayer(),ke=t.getSource();if(!ke)return!1;const Ge=e.viewHints[ViewHint.ANIMATING],Be=e.viewHints[ViewHint.INTERACTING],je=t.getUpdateWhileAnimating(),Ve=t.getUpdateWhileInteracting();if(this.ready&&!je&&Ge||!Ve&&Be)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const Ze=e.extent,Qe=e.viewState,en=Qe.projection,tn=Qe.resolution,an=e.pixelRatio,cn=t.getRevision(),un=t.getRenderBuffer();let dn=t.getRenderOrder();dn===void 0&&(dn=defaultOrder);const fn=Qe.center.slice(),pn=buffer(Ze,un*tn),gn=pn.slice(),yn=[pn.slice()],vn=en.getExtent();if(ke.getWrapX()&&en.canWrapX()&&!containsExtent(vn,e.extent)){const Tn=getWidth(vn),Nn=Math.max(getWidth(pn)/2,Tn);pn[0]=vn[0]-Nn,pn[2]=vn[2]+Nn,wrapX$1(fn,en);const Gn=wrapX$2(yn[0],en);Gn[0]<vn[0]&&Gn[2]<vn[2]?yn.push([Gn[0]+Tn,Gn[1],Gn[2]+Tn,Gn[3]]):Gn[0]>vn[0]&&Gn[2]>vn[2]&&yn.push([Gn[0]-Tn,Gn[1],Gn[2]-Tn,Gn[3]])}if(this.ready&&this.renderedResolution_==tn&&this.renderedRevision_==cn&&this.renderedRenderOrder_==dn&&this.renderedFrameDeclutter_===!!e.declutter&&containsExtent(this.wrappedRenderedExtent_,pn))return equals$2(this.renderedExtent_,gn)||(this.hitDetectionImageData_=null,this.renderedExtent_=gn),this.renderedCenter_=fn,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const An=new BuilderGroup(getTolerance(tn,an),pn,tn,an);let xn;for(let Tn=0,Nn=yn.length;Tn<Nn;++Tn)ke.loadFeatures(yn[Tn],tn,en);const wn=getSquaredTolerance(tn,an);let bn=!0;const Mn=(Tn,Nn)=>{let Gn;const zn=Tn.getStyleFunction()||t.getStyleFunction();if(zn&&(Gn=zn(Tn,tn)),Gn){const $n=this.renderFeature(Tn,wn,Gn,An,xn,this.getLayer().getDeclutter(),Nn);bn=bn&&!$n}},Pn=toUserExtent(pn),En=ke.getFeaturesInExtent(Pn);dn&&En.sort(dn);for(let Tn=0,Nn=En.length;Tn<Nn;++Tn)Mn(En[Tn],Tn);this.renderedFeatures_=En,this.ready=bn;const Cn=An.finish(),Rn=new ExecutorGroup(pn,tn,an,ke.getOverlaps(),Cn,t.getRenderBuffer(),!!e.declutter);return this.renderedResolution_=tn,this.renderedRevision_=cn,this.renderedRenderOrder_=dn,this.renderedFrameDeclutter_=!!e.declutter,this.renderedExtent_=gn,this.wrappedRenderedExtent_=pn,this.renderedCenter_=fn,this.renderedProjection_=en,this.renderedPixelRatio_=an,this.replayGroup_=Rn,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(e,t,ke,Ge,Be,je,Ve){if(!ke)return!1;let Ze=!1;if(Array.isArray(ke))for(let Qe=0,en=ke.length;Qe<en;++Qe)Ze=renderFeature$1(Ge,e,ke[Qe],t,this.boundHandleStyleImageChange_,Be,je,Ve)||Ze;else Ze=renderFeature$1(Ge,e,ke,t,this.boundHandleStyleImageChange_,Be,je,Ve);return Ze}}class VectorLayer extends BaseVectorLayer{constructor(e){super(e)}createRenderer(){return new CanvasVectorLayerRenderer(this)}}const DrawEventType={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class DrawEvent extends BaseEvent{constructor(e,t){super(e),this.feature=t}}function getTraceTargets(Oe,e){const t=[];for(let ke=0;ke<e.length;++ke){const Be=e[ke].getGeometry();appendGeometryTraceTargets(Oe,Be,t)}return t}function getSquaredDistance(Oe,e){return squaredDistance$1(Oe[0],Oe[1],e[0],e[1])}function getCoordinate(Oe,e){const t=Oe.length;return e<0?Oe[e+t]:e>=t?Oe[e-t]:Oe[e]}function getCumulativeSquaredDistance(Oe,e,t){let ke,Ge;e<t?(ke=e,Ge=t):(ke=t,Ge=e);const Be=Math.ceil(ke),je=Math.floor(Ge);if(Be>je){const Ze=interpolateCoordinate(Oe,ke),Qe=interpolateCoordinate(Oe,Ge);return getSquaredDistance(Ze,Qe)}let Ve=0;if(ke<Be){const Ze=interpolateCoordinate(Oe,ke),Qe=getCoordinate(Oe,Be);Ve+=getSquaredDistance(Ze,Qe)}if(je<Ge){const Ze=getCoordinate(Oe,je),Qe=interpolateCoordinate(Oe,Ge);Ve+=getSquaredDistance(Ze,Qe)}for(let Ze=Be;Ze<je-1;++Ze){const Qe=getCoordinate(Oe,Ze),en=getCoordinate(Oe,Ze+1);Ve+=getSquaredDistance(Qe,en)}return Ve}function appendGeometryTraceTargets(Oe,e,t){if(e instanceof LineString){appendTraceTarget(Oe,e.getCoordinates(),!1,t);return}if(e instanceof MultiLineString){const ke=e.getCoordinates();for(let Ge=0,Be=ke.length;Ge<Be;++Ge)appendTraceTarget(Oe,ke[Ge],!1,t);return}if(e instanceof Polygon){const ke=e.getCoordinates();for(let Ge=0,Be=ke.length;Ge<Be;++Ge)appendTraceTarget(Oe,ke[Ge],!0,t);return}if(e instanceof MultiPolygon){const ke=e.getCoordinates();for(let Ge=0,Be=ke.length;Ge<Be;++Ge){const je=ke[Ge];for(let Ve=0,Ze=je.length;Ve<Ze;++Ve)appendTraceTarget(Oe,je[Ve],!0,t)}return}if(e instanceof GeometryCollection){const ke=e.getGeometries();for(let Ge=0;Ge<ke.length;++Ge)appendGeometryTraceTargets(Oe,ke[Ge],t);return}}const sharedUpdateInfo={index:-1,endIndex:NaN};function getTraceTargetUpdate(Oe,e,t,ke){const Ge=Oe[0],Be=Oe[1];let je=1/0,Ve=-1,Ze=NaN;for(let tn=0;tn<e.targets.length;++tn){const an=e.targets[tn],cn=an.coordinates;let un=1/0,dn;for(let fn=0;fn<cn.length-1;++fn){const pn=cn[fn],gn=cn[fn+1],yn=getPointSegmentRelationship(Ge,Be,pn,gn);yn.squaredDistance<un&&(un=yn.squaredDistance,dn=fn+yn.along)}un<je&&(je=un,an.ring&&e.targetIndex===tn&&(an.endIndex>an.startIndex?dn<an.startIndex&&(dn+=cn.length):an.endIndex<an.startIndex&&dn>an.startIndex&&(dn-=cn.length)),Ze=dn,Ve=tn)}const Qe=e.targets[Ve];let en=Qe.ring;if(e.targetIndex===Ve&&en){const tn=interpolateCoordinate(Qe.coordinates,Ze),an=t.getPixelFromCoordinate(tn);distance(an,e.startPx)>ke&&(en=!1)}if(en){const tn=Qe.coordinates,an=tn.length,cn=Qe.startIndex,un=Ze;if(cn<un){const dn=getCumulativeSquaredDistance(tn,cn,un);getCumulativeSquaredDistance(tn,cn,un-an)<dn&&(Ze-=an)}else{const dn=getCumulativeSquaredDistance(tn,cn,un);getCumulativeSquaredDistance(tn,cn,un+an)<dn&&(Ze+=an)}}return sharedUpdateInfo.index=Ve,sharedUpdateInfo.endIndex=Ze,sharedUpdateInfo}function appendTraceTarget(Oe,e,t,ke){const Ge=Oe[0],Be=Oe[1];for(let je=0,Ve=e.length-1;je<Ve;++je){const Ze=e[je],Qe=e[je+1],en=getPointSegmentRelationship(Ge,Be,Ze,Qe);if(en.squaredDistance===0){const tn=je+en.along;ke.push({coordinates:e,ring:t,startIndex:tn,endIndex:tn});return}}}const sharedRel={along:0,squaredDistance:0};function getPointSegmentRelationship(Oe,e,t,ke){const Ge=t[0],Be=t[1],je=ke[0],Ve=ke[1],Ze=je-Ge,Qe=Ve-Be;let en=0,tn=Ge,an=Be;return(Ze!==0||Qe!==0)&&(en=clamp(((Oe-Ge)*Ze+(e-Be)*Qe)/(Ze*Ze+Qe*Qe),0,1),tn+=Ze*en,an+=Qe*en),sharedRel.along=en,sharedRel.squaredDistance=toFixed(squaredDistance$1(Oe,e,tn,an),10),sharedRel}function interpolateCoordinate(Oe,e){const t=Oe.length;let ke=Math.floor(e);const Ge=e-ke;ke>=t?ke-=t:ke<0&&(ke+=t);let Be=ke+1;Be>=t&&(Be-=t);const je=Oe[ke],Ve=je[0],Ze=je[1],Qe=Oe[Be],en=Qe[0]-Ve,tn=Qe[1]-Ze;return[Ve+en*Ge,Ze+tn*Ge]}class Draw extends PointerInteraction{constructor(e){const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=e.source?e.source:null,this.features_=e.features?e.features:null,this.snapTolerance_=e.snapTolerance?e.snapTolerance:12,this.type_=e.type,this.mode_=getMode(this.type_),this.stopClick_=!!e.stopClick,this.minPoints_=e.minPoints?e.minPoints:this.mode_==="Polygon"?3:2,this.maxPoints_=this.mode_==="Circle"?2:e.maxPoints?e.maxPoints:1/0,this.finishCondition_=e.finishCondition?e.finishCondition:TRUE,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY";let ke=e.geometryFunction;if(!ke){const Ge=this.mode_;if(Ge==="Circle")ke=(Be,je,Ve)=>{const Ze=je||new Circle([NaN,NaN]),Qe=fromUserCoordinate(Be[0]),en=squaredDistance(Qe,fromUserCoordinate(Be[Be.length-1]));return Ze.setCenterAndRadius(Qe,Math.sqrt(en),this.geometryLayout_),Ze};else{let Be;Ge==="Point"?Be=Point$1:Ge==="LineString"?Be=LineString:Ge==="Polygon"&&(Be=Polygon),ke=(je,Ve,Ze)=>(Ve?Ge==="Polygon"?je[0].length?Ve.setCoordinates([je[0].concat([je[0][0]])],this.geometryLayout_):Ve.setCoordinates([],this.geometryLayout_):Ve.setCoordinates(je,this.geometryLayout_):Ve=new Be(je,this.geometryLayout_),Ve)}}this.geometryFunction_=ke,this.dragVertexDelay_=e.dragVertexDelay!==void 0?e.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=e.clickTolerance?e.clickTolerance*e.clickTolerance:36,this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:e.wrapX?e.wrapX:!1}),style:e.style?e.style:getDefaultStyleFunction$2(),updateWhileInteracting:!0}),this.geometryName_=e.geometryName,this.condition_=e.condition?e.condition:noModifierKeys,this.freehandCondition_,e.freehand?this.freehandCondition_=always$1:this.freehandCondition_=e.freehandCondition?e.freehandCondition:shiftKeyOnly,this.traceCondition_,this.setTrace(e.trace||!1),this.traceState_={active:!1},this.traceSource_=e.traceSource||e.source||null,this.addChangeListener(InteractionProperty.ACTIVE,this.updateState_)}setTrace(e){let t;e?e===!0?t=always$1:t=e:t=never,this.traceCondition_=t}setMap(e){super.setMap(e),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(e){e.originalEvent.type===EventType.CONTEXTMENU&&e.originalEvent.preventDefault(),this.freehand_=this.mode_!=="Point"&&this.freehandCondition_(e);let t=e.type===MapBrowserEventType.POINTERMOVE,ke=!0;return!this.freehand_&&this.lastDragTime_&&e.type===MapBrowserEventType.POINTERDRAG&&(Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=e.pixel,this.shouldHandle_=!this.freehand_,t=!0):this.lastDragTime_=void 0,this.shouldHandle_&&this.downTimeout_!==void 0&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)),this.freehand_&&e.type===MapBrowserEventType.POINTERDRAG&&this.sketchFeature_!==null?(this.addToDrawing_(e.coordinate),ke=!1):this.freehand_&&e.type===MapBrowserEventType.POINTERDOWN?ke=!1:t&&this.getPointerCount()<2?(ke=e.type===MapBrowserEventType.POINTERMOVE,ke&&this.freehand_?(this.handlePointerMove_(e),this.shouldHandle_&&e.originalEvent.preventDefault()):(e.originalEvent.pointerType==="mouse"||e.type===MapBrowserEventType.POINTERDRAG&&this.downTimeout_===void 0)&&this.handlePointerMove_(e)):e.type===MapBrowserEventType.DBLCLICK&&(ke=!1),super.handleEvent(e)&&ke}handleDownEvent(e){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=e.pixel,this.finishCoordinate_||this.startDrawing_(e.coordinate),!0):this.condition_(e)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout(()=>{this.handlePointerMove_(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,e.map,e.originalEvent,!1,e.frameState))},this.dragVertexDelay_),this.downPx_=e.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(e){if(!this.traceSource_||!this.traceCondition_(e))return;if(this.traceState_.active){this.deactivateTrace_();return}const t=this.getMap(),ke=t.getCoordinateFromPixel([e.pixel[0]-this.snapTolerance_,e.pixel[1]+this.snapTolerance_]),Ge=t.getCoordinateFromPixel([e.pixel[0]+this.snapTolerance_,e.pixel[1]-this.snapTolerance_]),Be=boundingExtent([ke,Ge]),je=this.traceSource_.getFeaturesInExtent(Be);if(je.length===0)return;const Ve=getTraceTargets(e.coordinate,je);Ve.length&&(this.traceState_={active:!0,startPx:e.pixel.slice(),targets:Ve,targetIndex:-1})}addOrRemoveTracedCoordinates_(e,t){const ke=e.startIndex<=e.endIndex,Ge=e.startIndex<=t;ke===Ge?ke&&t>e.endIndex||!ke&&t<e.endIndex?this.addTracedCoordinates_(e,e.endIndex,t):(ke&&t<e.endIndex||!ke&&t>e.endIndex)&&this.removeTracedCoordinates_(t,e.endIndex):(this.removeTracedCoordinates_(e.startIndex,e.endIndex),this.addTracedCoordinates_(e,e.startIndex,t))}removeTracedCoordinates_(e,t){if(e===t)return;let ke=0;if(e<t){const Ge=Math.ceil(e);let Be=Math.floor(t);Be===t&&(Be-=1),ke=Be-Ge+1}else{const Ge=Math.floor(e);let Be=Math.ceil(t);Be===t&&(Be+=1),ke=Ge-Be+1}ke>0&&this.removeLastPoints_(ke)}addTracedCoordinates_(e,t,ke){if(t===ke)return;const Ge=[];if(t<ke){const Be=Math.ceil(t);let je=Math.floor(ke);je===ke&&(je-=1);for(let Ve=Be;Ve<=je;++Ve)Ge.push(getCoordinate(e.coordinates,Ve))}else{const Be=Math.floor(t);let je=Math.ceil(ke);je===ke&&(je+=1);for(let Ve=Be;Ve>=je;--Ve)Ge.push(getCoordinate(e.coordinates,Ve))}Ge.length&&this.appendCoordinates(Ge)}updateTrace_(e){const t=this.traceState_;if(!t.active||t.targetIndex===-1&&distance(t.startPx,e.pixel)<this.snapTolerance_)return;const ke=getTraceTargetUpdate(e.coordinate,t,this.getMap(),this.snapTolerance_);if(t.targetIndex!==ke.index){if(t.targetIndex!==-1){const Ze=t.targets[t.targetIndex];this.removeTracedCoordinates_(Ze.startIndex,Ze.endIndex)}const Ve=t.targets[ke.index];this.addTracedCoordinates_(Ve,Ve.startIndex,ke.endIndex)}else{const Ve=t.targets[t.targetIndex];this.addOrRemoveTracedCoordinates_(Ve,ke.endIndex)}t.targetIndex=ke.index;const Ge=t.targets[t.targetIndex];Ge.endIndex=ke.endIndex;const Be=interpolateCoordinate(Ge.coordinates,Ge.endIndex),je=this.getMap().getPixelFromCoordinate(Be);e.coordinate=Be,e.pixel=[Math.round(je[0]),Math.round(je[1])]}handleUpEvent(e){let t=!0;if(this.getPointerCount()===0){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(e);const ke=this.traceState_.active;if(this.toggleTraceState_(e),this.shouldHandle_){const Ge=!this.finishCoordinate_;Ge&&this.startDrawing_(e.coordinate),!Ge&&this.freehand_?this.finishDrawing():!this.freehand_&&(!Ge||this.mode_==="Point")&&(this.atFinish_(e.pixel,ke)?this.finishCondition_(e)&&this.finishDrawing():this.addToDrawing_(e.coordinate)),t=!1}else this.freehand_&&this.abortDrawing()}return!t&&this.stopClick_&&e.preventDefault(),t}handlePointerMove_(e){if(this.pointerType_=e.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const t=this.downPx_,ke=e.pixel,Ge=t[0]-ke[0],Be=t[1]-ke[1],je=Ge*Ge+Be*Be;if(this.shouldHandle_=this.freehand_?je>this.squaredClickTolerance_:je<=this.squaredClickTolerance_,!this.shouldHandle_)return}if(!this.finishCoordinate_){this.createOrUpdateSketchPoint_(e.coordinate.slice());return}this.updateTrace_(e),this.modifyDrawing_(e.coordinate)}atFinish_(e,t){let ke=!1;if(this.sketchFeature_){let Ge=!1,Be=[this.finishCoordinate_];const je=this.mode_;if(je==="Point")ke=!0;else if(je==="Circle")ke=this.sketchCoords_.length===2;else if(je==="LineString")Ge=!t&&this.sketchCoords_.length>this.minPoints_;else if(je==="Polygon"){const Ve=this.sketchCoords_;Ge=Ve[0].length>this.minPoints_,Be=[Ve[0][0],Ve[0][Ve[0].length-2]],t?Be=[Ve[0][0]]:Be=[Ve[0][0],Ve[0][Ve[0].length-2]]}if(Ge){const Ve=this.getMap();for(let Ze=0,Qe=Be.length;Ze<Qe;Ze++){const en=Be[Ze],tn=Ve.getPixelFromCoordinate(en),an=e[0]-tn[0],cn=e[1]-tn[1],un=this.freehand_?1:this.snapTolerance_;if(ke=Math.sqrt(an*an+cn*cn)<=un,ke){this.finishCoordinate_=en;break}}}}return ke}createOrUpdateSketchPoint_(e){this.sketchPoint_?this.sketchPoint_.getGeometry().setCoordinates(e):(this.sketchPoint_=new Feature(new Point$1(e)),this.updateSketchFeatures_())}createOrUpdateCustomSketchLine_(e){this.sketchLine_||(this.sketchLine_=new Feature);const t=e.getLinearRing(0);let ke=this.sketchLine_.getGeometry();ke?(ke.setFlatCoordinates(t.getLayout(),t.getFlatCoordinates()),ke.changed()):(ke=new LineString(t.getFlatCoordinates(),t.getLayout()),this.sketchLine_.setGeometry(ke))}startDrawing_(e){const t=this.getMap().getView().getProjection(),ke=getStrideForLayout(this.geometryLayout_);for(;e.length<ke;)e.push(0);this.finishCoordinate_=e,this.mode_==="Point"?this.sketchCoords_=e.slice():this.mode_==="Polygon"?(this.sketchCoords_=[[e.slice(),e.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[e.slice(),e.slice()],this.sketchLineCoords_&&(this.sketchLine_=new Feature(new LineString(this.sketchLineCoords_)));const Ge=this.geometryFunction_(this.sketchCoords_,void 0,t);this.sketchFeature_=new Feature,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(Ge),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}modifyDrawing_(e){const t=this.getMap(),ke=this.sketchFeature_.getGeometry(),Ge=t.getView().getProjection(),Be=getStrideForLayout(this.geometryLayout_);let je,Ve;for(;e.length<Be;)e.push(0);this.mode_==="Point"?Ve=this.sketchCoords_:this.mode_==="Polygon"?(je=this.sketchCoords_[0],Ve=je[je.length-1],this.atFinish_(t.getPixelFromCoordinate(e))&&(e=this.finishCoordinate_.slice())):(je=this.sketchCoords_,Ve=je[je.length-1]),Ve[0]=e[0],Ve[1]=e[1],this.geometryFunction_(this.sketchCoords_,ke,Ge),this.sketchPoint_&&this.sketchPoint_.getGeometry().setCoordinates(e),ke.getType()==="Polygon"&&this.mode_!=="Polygon"?this.createOrUpdateCustomSketchLine_(ke):this.sketchLineCoords_&&this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_),this.updateSketchFeatures_()}addToDrawing_(e){const t=this.sketchFeature_.getGeometry(),ke=this.getMap().getView().getProjection();let Ge,Be;const je=this.mode_;return je==="LineString"||je==="Circle"?(this.finishCoordinate_=e.slice(),Be=this.sketchCoords_,Be.length>=this.maxPoints_&&(this.freehand_?Be.pop():Ge=!0),Be.push(e.slice()),this.geometryFunction_(Be,t,ke)):je==="Polygon"&&(Be=this.sketchCoords_[0],Be.length>=this.maxPoints_&&(this.freehand_?Be.pop():Ge=!0),Be.push(e.slice()),Ge&&(this.finishCoordinate_=Be[0]),this.geometryFunction_(this.sketchCoords_,t,ke)),this.createOrUpdateSketchPoint_(e.slice()),this.updateSketchFeatures_(),Ge?this.finishDrawing():this.sketchFeature_}removeLastPoints_(e){if(!this.sketchFeature_)return;const t=this.sketchFeature_.getGeometry(),ke=this.getMap().getView().getProjection(),Ge=this.mode_;for(let Be=0;Be<e;++Be){let je;if(Ge==="LineString"||Ge==="Circle"){if(je=this.sketchCoords_,je.splice(-2,1),je.length>=2){this.finishCoordinate_=je[je.length-2].slice();const Ve=this.finishCoordinate_.slice();je[je.length-1]=Ve,this.createOrUpdateSketchPoint_(Ve)}this.geometryFunction_(je,t,ke),t.getType()==="Polygon"&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(t)}else if(Ge==="Polygon"){je=this.sketchCoords_[0],je.splice(-2,1);const Ve=this.sketchLine_.getGeometry();if(je.length>=2){const Ze=je[je.length-2].slice();je[je.length-1]=Ze,this.createOrUpdateSketchPoint_(Ze)}Ve.setCoordinates(je),this.geometryFunction_(this.sketchCoords_,t,ke)}if(je.length===1){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const e=this.abortDrawing_();if(!e)return null;let t=this.sketchCoords_;const ke=e.getGeometry(),Ge=this.getMap().getView().getProjection();return this.mode_==="LineString"?(t.pop(),this.geometryFunction_(t,ke,Ge)):this.mode_==="Polygon"&&(t[0].pop(),this.geometryFunction_(t,ke,Ge),t=ke.getCoordinates()),this.type_==="MultiPoint"?e.setGeometry(new MultiPoint([t])):this.type_==="MultiLineString"?e.setGeometry(new MultiLineString([t])):this.type_==="MultiPolygon"&&e.setGeometry(new MultiPolygon([t])),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWEND,e)),this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e),e}abortDrawing_(){this.finishCoordinate_=null;const e=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),e}abortDrawing(){const e=this.abortDrawing_();e&&this.dispatchEvent(new DrawEvent(DrawEventType.DRAWABORT,e))}appendCoordinates(e){const t=this.mode_,ke=!this.sketchFeature_;ke&&this.startDrawing_(e[0]);let Ge;if(t==="LineString"||t==="Circle")Ge=this.sketchCoords_;else if(t==="Polygon")Ge=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[];else return;ke&&Ge.shift(),Ge.pop();for(let je=0;je<e.length;je++)this.addToDrawing_(e[je]);const Be=e[e.length-1];this.sketchFeature_=this.addToDrawing_(Be),this.modifyDrawing_(Be)}extend(e){const ke=e.getGeometry();this.sketchFeature_=e,this.sketchCoords_=ke.getCoordinates();const Ge=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=Ge.slice(),this.sketchCoords_.push(Ge.slice()),this.sketchPoint_=new Feature(new Point$1(Ge)),this.updateSketchFeatures_(),this.dispatchEvent(new DrawEvent(DrawEventType.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const e=[];this.sketchFeature_&&e.push(this.sketchFeature_),this.sketchLine_&&e.push(this.sketchLine_),this.sketchPoint_&&e.push(this.sketchPoint_);const t=this.overlay_.getSource();t.clear(!0),t.addFeatures(e)}updateState_(){const e=this.getMap(),t=this.getActive();(!e||!t)&&this.abortDrawing(),this.overlay_.setMap(t?e:null)}}function getDefaultStyleFunction$2(){const Oe=createEditingStyle();return function(e,t){return Oe[e.getGeometry().getType()]}}function getMode(Oe){switch(Oe){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+Oe)}}const Key={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class KeyboardPan extends Interaction{constructor(e){super(),e=e||{},this.defaultCondition_=function(t){return noModifierKeys(t)&&targetNotEditable(t)},this.condition_=e.condition!==void 0?e.condition:this.defaultCondition_,this.duration_=e.duration!==void 0?e.duration:100,this.pixelDelta_=e.pixelDelta!==void 0?e.pixelDelta:128}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN){const ke=e.originalEvent,Ge=ke.key;if(this.condition_(e)&&(Ge==Key.DOWN||Ge==Key.LEFT||Ge==Key.RIGHT||Ge==Key.UP)){const je=e.map.getView(),Ve=je.getResolution()*this.pixelDelta_;let Ze=0,Qe=0;Ge==Key.DOWN?Qe=-Ve:Ge==Key.LEFT?Ze=-Ve:Ge==Key.RIGHT?Ze=Ve:Qe=Ve;const en=[Ze,Qe];rotate$1(en,je.getRotation()),pan(je,en,this.duration_),ke.preventDefault(),t=!0}}return!t}}class KeyboardZoom extends Interaction{constructor(e){super(),e=e||{},this.condition_=e.condition?e.condition:function(t){return!platformModifierKey(t)&&targetNotEditable(t)},this.delta_=e.delta?e.delta:1,this.duration_=e.duration!==void 0?e.duration:100}handleEvent(e){let t=!1;if(e.type==EventType.KEYDOWN||e.type==EventType.KEYPRESS){const ke=e.originalEvent,Ge=ke.key;if(this.condition_(e)&&(Ge==="+"||Ge==="-")){const Be=e.map,je=Ge==="+"?this.delta_:-this.delta_,Ve=Be.getView();zoomByDelta(Ve,je,void 0,this.duration_),ke.preventDefault(),t=!0}}return!t}}const CIRCLE_CENTER_INDEX=0,CIRCLE_CIRCUMFERENCE_INDEX=1,tempExtent=[0,0,0,0],tempSegment=[],ModifyEventType={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ModifyEvent extends BaseEvent{constructor(e,t,ke){super(e),this.features=t,this.mapBrowserEvent=ke}}class Modify extends PointerInteraction{constructor(e){super(e),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=e.condition?e.condition:primaryAction,this.defaultDeleteCondition_=function(ke){return altKeyOnly(ke)&&singleClick(ke)},this.deleteCondition_=e.deleteCondition?e.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=e.insertVertexCondition?e.insertVertexCondition:always$1,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new RBush,this.pixelTolerance_=e.pixelTolerance!==void 0?e.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new VectorLayer({source:new VectorSource({useSpatialIndex:!1,wrapX:!!e.wrapX}),style:e.style?e.style:getDefaultStyleFunction$1(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null;let t;if(e.features?t=e.features:e.source&&(this.source_=e.source,t=new Collection(this.source_.getFeatures()),this.source_.addEventListener(VectorEventType.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(VectorEventType.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!t)throw new Error("The modify interaction requires features, a source or a layer");e.hitDetection&&(this.hitDetection_=e.hitDetection),this.features_=t,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(CollectionEventType.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(CollectionEventType.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=e.snapToPointer===void 0?!this.hitDetection_:e.snapToPointer}addFeature_(e){const t=e.getGeometry();if(t){const Ge=this.SEGMENT_WRITERS_[t.getType()];Ge&&Ge(e,t)}const ke=this.getMap();ke&&ke.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(ke.getCoordinateFromPixel(this.lastPixel_)),e.addEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(e,t){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Collection;const ke=this.featuresBeingModified_.getArray();for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=t[Ge].feature;je&&!ke.includes(je)&&this.featuresBeingModified_.push(je)}this.featuresBeingModified_.getLength()===0?this.featuresBeingModified_=null:this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYSTART,this.featuresBeingModified_,e))}}removeFeature_(e){this.removeFeatureSegmentData_(e),this.vertexFeature_&&this.features_.getLength()===0&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.removeEventListener(EventType.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(e){const t=this.rBush_,ke=[];t.forEach(function(Ge){e===Ge.feature&&ke.push(Ge)});for(let Ge=ke.length-1;Ge>=0;--Ge){const Be=ke[Ge];for(let je=this.dragSegments_.length-1;je>=0;--je)this.dragSegments_[je][0]===Be&&this.dragSegments_.splice(je,1);t.remove(Be)}}setActive(e){this.vertexFeature_&&!e&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(e)}setMap(e){this.overlay_.setMap(e),super.setMap(e)}getOverlay(){return this.overlay_}handleSourceAdd_(e){e.feature&&this.features_.push(e.feature)}handleSourceRemove_(e){e.feature&&this.features_.remove(e.feature)}handleFeatureAdd_(e){this.addFeature_(e.element)}handleFeatureChange_(e){if(!this.changingFeature_){const t=e.target;this.removeFeature_(t),this.addFeature_(t)}}handleFeatureRemove_(e){this.removeFeature_(e.element)}writePointGeometry_(e,t){const ke=t.getCoordinates(),Ge={feature:e,geometry:t,segment:[ke,ke]};this.rBush_.insert(t.getExtent(),Ge)}writeMultiPointGeometry_(e,t){const ke=t.getCoordinates();for(let Ge=0,Be=ke.length;Ge<Be;++Ge){const je=ke[Ge],Ve={feature:e,geometry:t,depth:[Ge],index:Ge,segment:[je,je]};this.rBush_.insert(t.getExtent(),Ve)}}writeLineStringGeometry_(e,t){const ke=t.getCoordinates();for(let Ge=0,Be=ke.length-1;Ge<Be;++Ge){const je=ke.slice(Ge,Ge+2),Ve={feature:e,geometry:t,index:Ge,segment:je};this.rBush_.insert(boundingExtent(je),Ve)}}writeMultiLineStringGeometry_(e,t){const ke=t.getCoordinates();for(let Ge=0,Be=ke.length;Ge<Be;++Ge){const je=ke[Ge];for(let Ve=0,Ze=je.length-1;Ve<Ze;++Ve){const Qe=je.slice(Ve,Ve+2),en={feature:e,geometry:t,depth:[Ge],index:Ve,segment:Qe};this.rBush_.insert(boundingExtent(Qe),en)}}}writePolygonGeometry_(e,t){const ke=t.getCoordinates();for(let Ge=0,Be=ke.length;Ge<Be;++Ge){const je=ke[Ge];for(let Ve=0,Ze=je.length-1;Ve<Ze;++Ve){const Qe=je.slice(Ve,Ve+2),en={feature:e,geometry:t,depth:[Ge],index:Ve,segment:Qe};this.rBush_.insert(boundingExtent(Qe),en)}}}writeMultiPolygonGeometry_(e,t){const ke=t.getCoordinates();for(let Ge=0,Be=ke.length;Ge<Be;++Ge){const je=ke[Ge];for(let Ve=0,Ze=je.length;Ve<Ze;++Ve){const Qe=je[Ve];for(let en=0,tn=Qe.length-1;en<tn;++en){const an=Qe.slice(en,en+2),cn={feature:e,geometry:t,depth:[Ve,Ge],index:en,segment:an};this.rBush_.insert(boundingExtent(an),cn)}}}}writeCircleGeometry_(e,t){const ke=t.getCenter(),Ge={feature:e,geometry:t,index:CIRCLE_CENTER_INDEX,segment:[ke,ke]},Be={feature:e,geometry:t,index:CIRCLE_CIRCUMFERENCE_INDEX,segment:[ke,ke]},je=[Ge,Be];Ge.featureSegments=je,Be.featureSegments=je,this.rBush_.insert(createOrUpdateFromCoordinate(ke),Ge);let Ve=t;this.rBush_.insert(Ve.getExtent(),Be)}writeGeometryCollectionGeometry_(e,t){const ke=t.getGeometriesArray();for(let Ge=0;Ge<ke.length;++Ge){const Be=ke[Ge],je=this.SEGMENT_WRITERS_[Be.getType()];je(e,Be)}}createOrUpdateVertexFeature_(e,t,ke,Ge){let Be=this.vertexFeature_;return Be?Be.getGeometry().setCoordinates(e):(Be=new Feature(new Point$1(e)),this.vertexFeature_=Be,this.overlay_.getSource().addFeature(Be)),Be.set("features",t),Be.set("geometries",ke),Be.set("existing",Ge),Be}handleEvent(e){if(!e.originalEvent)return!0;this.lastPointerEvent_=e;let t;return!e.map.getView().getInteracting()&&e.type==MapBrowserEventType.POINTERMOVE&&!this.handlingDownUpSequence&&this.handlePointerMove_(e),this.vertexFeature_&&this.deleteCondition_(e)&&(e.type!=MapBrowserEventType.SINGLECLICK||!this.ignoreNextSingleClick_?t=this.removePoint():t=!0),e.type==MapBrowserEventType.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(e)&&!t}findInsertVerticesAndUpdateDragSegments_(e){this.handlePointerAtPixel_(e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const t=this.vertexFeature_;if(!t)return;this.getMap().getView().getProjection();const ke=[],Ge=t.getGeometry().getCoordinates(),Be=boundingExtent([Ge]),je=this.rBush_.getInExtent(Be),Ve={};je.sort(compareIndexes);for(let Ze=0,Qe=je.length;Ze<Qe;++Ze){const en=je[Ze],tn=en.segment;let an=getUid(en.geometry);const cn=en.depth;if(cn&&(an+="-"+cn.join("-")),Ve[an]||(Ve[an]=new Array(2)),en.geometry.getType()==="Circle"&&en.index===CIRCLE_CIRCUMFERENCE_INDEX){const un=closestOnSegmentData(e,en);equals(un,Ge)&&!Ve[an][0]&&(this.dragSegments_.push([en,0]),Ve[an][0]=en);continue}if(equals(tn[0],Ge)&&!Ve[an][0]){this.dragSegments_.push([en,0]),Ve[an][0]=en;continue}if(equals(tn[1],Ge)&&!Ve[an][1]){if(Ve[an][0]&&Ve[an][0].index===0){let un=en.geometry.getCoordinates();switch(en.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":un=un[cn[1]];case"Polygon":if(en.index!==un[cn[0]].length-2)continue;break}}this.dragSegments_.push([en,1]),Ve[an][1]=en;continue}getUid(tn)in this.vertexSegments_&&!Ve[an][0]&&!Ve[an][1]&&ke.push(en)}return ke}handleDragEvent(e){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(e,this.dragSegments_.map(([Be])=>Be));const t=[e.coordinate[0]+this.delta_[0],e.coordinate[1]+this.delta_[1]],ke=[],Ge=[];for(let Be=0,je=this.dragSegments_.length;Be<je;++Be){const Ve=this.dragSegments_[Be],Ze=Ve[0],Qe=Ze.feature;ke.includes(Qe)||ke.push(Qe);const en=Ze.geometry;Ge.includes(en)||Ge.push(en);const tn=Ze.depth;let an;const cn=Ze.segment,un=Ve[1];for(;t.length<en.getStride();)t.push(cn[un][t.length]);switch(en.getType()){case"Point":an=t,cn[0]=t,cn[1]=t;break;case"MultiPoint":an=en.getCoordinates(),an[Ze.index]=t,cn[0]=t,cn[1]=t;break;case"LineString":an=en.getCoordinates(),an[Ze.index+un]=t,cn[un]=t;break;case"MultiLineString":an=en.getCoordinates(),an[tn[0]][Ze.index+un]=t,cn[un]=t;break;case"Polygon":an=en.getCoordinates(),an[tn[0]][Ze.index+un]=t,cn[un]=t;break;case"MultiPolygon":an=en.getCoordinates(),an[tn[1]][tn[0]][Ze.index+un]=t,cn[un]=t;break;case"Circle":const dn=en;if(cn[0]=t,cn[1]=t,Ze.index===CIRCLE_CENTER_INDEX)this.changingFeature_=!0,dn.setCenter(t),this.changingFeature_=!1;else{this.changingFeature_=!0,e.map.getView().getProjection();let fn=distance(fromUserCoordinate(dn.getCenter()),fromUserCoordinate(t));dn.setRadius(fn),this.changingFeature_=!1}break}an&&this.setGeometryCoordinates_(en,an)}this.createOrUpdateVertexFeature_(t,ke,Ge,!0)}handleDownEvent(e){if(!this.condition_(e))return!1;const t=e.coordinate,ke=this.findInsertVerticesAndUpdateDragSegments_(t);if(ke!=null&&ke.length&&this.insertVertexCondition_(e)&&(this.willModifyFeatures_(e,ke),this.vertexFeature_)){const Ge=this.vertexFeature_.getGeometry().getCoordinates();for(let Be=ke.length-1;Be>=0;--Be)this.insertVertex_(ke[Be],Ge);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(e){for(let t=this.dragSegments_.length-1;t>=0;--t){const ke=this.dragSegments_[t][0],Ge=ke.geometry;if(Ge.getType()==="Circle"){const Be=Ge,je=Be.getCenter(),Ve=ke.featureSegments[0],Ze=ke.featureSegments[1];Ve.segment[0]=je,Ve.segment[1]=je,Ze.segment[0]=je,Ze.segment[1]=je,this.rBush_.update(createOrUpdateFromCoordinate(je),Ve);let Qe=Be;this.rBush_.update(Qe.getExtent(),Ze)}else this.rBush_.update(boundingExtent(ke.segment),ke)}return this.featuresBeingModified_&&(this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,e)),this.featuresBeingModified_=null),!1}handlePointerMove_(e){this.lastPixel_=e.pixel,this.handlePointerAtPixel_(e.coordinate)}handlePointerAtPixel_(e){const t=this.getMap(),ke=t.getPixelFromCoordinate(e);t.getView().getProjection();const Ge=function(Ve,Ze){return projectedDistanceToSegmentDataSquared(e,Ve)-projectedDistanceToSegmentDataSquared(e,Ze)};let Be,je;if(this.hitDetection_){const Ve=typeof this.hitDetection_=="object"?Ze=>Ze===this.hitDetection_:void 0;t.forEachFeatureAtPixel(ke,(Ze,Qe,en)=>{en&&en.getType()==="Point"&&(en=new Point$1(toUserCoordinate(en.getCoordinates())));const tn=en||Ze.getGeometry();if(tn&&tn.getType()==="Point"&&Ze instanceof Feature&&this.features_.getArray().includes(Ze)){je=tn;const an=Ze.getGeometry().getFlatCoordinates().slice(0,2);Be=[{feature:Ze,geometry:je,segment:[an,an]}]}return!0},{layerFilter:Ve})}if(!Be){const Ve=fromUserExtent(createOrUpdateFromCoordinate(e,tempExtent)),Ze=t.getView().getResolution()*this.pixelTolerance_,Qe=toUserExtent(buffer(Ve,Ze,tempExtent));Be=this.rBush_.getInExtent(Qe)}if(Be&&Be.length>0){const Ve=Be.sort(Ge)[0],Ze=Ve.segment;let Qe=closestOnSegmentData(e,Ve);const en=t.getPixelFromCoordinate(Qe);let tn=distance(ke,en);if(je||tn<=this.pixelTolerance_){const an={};if(an[getUid(Ze)]=!0,this.snapToPointer_||(this.delta_[0]=Qe[0]-e[0],this.delta_[1]=Qe[1]-e[1]),Ve.geometry.getType()==="Circle"&&Ve.index===CIRCLE_CIRCUMFERENCE_INDEX)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(Qe,[Ve.feature],[Ve.geometry],this.snappedToVertex_);else{const cn=t.getPixelFromCoordinate(Ze[0]),un=t.getPixelFromCoordinate(Ze[1]),dn=squaredDistance(en,cn),fn=squaredDistance(en,un);tn=Math.sqrt(Math.min(dn,fn)),this.snappedToVertex_=tn<=this.pixelTolerance_,this.snappedToVertex_&&(Qe=dn>fn?Ze[1]:Ze[0]),this.createOrUpdateVertexFeature_(Qe,[Ve.feature],[Ve.geometry],this.snappedToVertex_);const pn={};pn[getUid(Ve.geometry)]=!0;for(let gn=1,yn=Be.length;gn<yn;++gn){const vn=Be[gn].segment;if(equals(Ze[0],vn[0])&&equals(Ze[1],vn[1])||equals(Ze[0],vn[1])&&equals(Ze[1],vn[0])){const An=getUid(Be[gn].geometry);An in pn||(pn[An]=!0,an[getUid(vn)]=!0)}else break}}this.vertexSegments_=an;return}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(e,t){const ke=e.segment,Ge=e.feature,Be=e.geometry,je=e.depth,Ve=e.index;let Ze;for(;t.length<Be.getStride();)t.push(0);switch(Be.getType()){case"MultiLineString":Ze=Be.getCoordinates(),Ze[je[0]].splice(Ve+1,0,t);break;case"Polygon":Ze=Be.getCoordinates(),Ze[je[0]].splice(Ve+1,0,t);break;case"MultiPolygon":Ze=Be.getCoordinates(),Ze[je[1]][je[0]].splice(Ve+1,0,t);break;case"LineString":Ze=Be.getCoordinates(),Ze.splice(Ve+1,0,t);break;default:return!1}this.setGeometryCoordinates_(Be,Ze);const Qe=this.rBush_;Qe.remove(e),this.updateSegmentIndices_(Be,Ve,je,1);const en={segment:[ke[0],t],feature:Ge,geometry:Be,depth:je,index:Ve};Qe.insert(boundingExtent(en.segment),en),this.dragSegments_.push([en,1]);const tn={segment:[t,ke[1]],feature:Ge,geometry:Be,depth:je,index:Ve+1};return Qe.insert(boundingExtent(tn.segment),tn),this.dragSegments_.push([tn,0]),!0}updatePointer_(e){var t;return e&&this.findInsertVerticesAndUpdateDragSegments_(e),(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates()}getPoint(){var t;const e=(t=this.vertexFeature_)==null?void 0:t.getGeometry().getCoordinates();return e?toUserCoordinate(e,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(ke=>ke.getType()==="Circle"||ke.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:ke})=>equals(ke[0],e)||equals(ke[1],e))}removePoint(e){if(e&&(e=fromUserCoordinate(e,this.getMap().getView().getProjection()),this.updatePointer_(e)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=MapBrowserEventType.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map(([Ge])=>Ge));const ke=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ModifyEvent(ModifyEventType.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,ke}return!1}removeVertex_(){const e=this.dragSegments_,t={};let ke=!1,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,un;for(Ze=e.length-1;Ze>=0;--Ze)je=e[Ze],cn=je[0],un=getUid(cn.feature),cn.depth&&(un+="-"+cn.depth.join("-")),un in t||(t[un]={}),je[1]===0?(t[un].right=cn,t[un].index=cn.index):je[1]==1&&(t[un].left=cn,t[un].index=cn.index+1);for(un in t){switch(an=t[un].right,en=t[un].left,Qe=t[un].index,tn=Qe-1,en!==void 0?cn=en:cn=an,tn<0&&(tn=0),Ve=cn.geometry,Be=Ve.getCoordinates(),Ge=Be,ke=!1,Ve.getType()){case"MultiLineString":Be[cn.depth[0]].length>2&&(Be[cn.depth[0]].splice(Qe,1),ke=!0);break;case"LineString":Be.length>2&&(Be.splice(Qe,1),ke=!0);break;case"MultiPolygon":Ge=Ge[cn.depth[1]];case"Polygon":Ge=Ge[cn.depth[0]],Ge.length>4&&(Qe==Ge.length-1&&(Qe=0),Ge.splice(Qe,1),ke=!0,Qe===0&&(Ge.pop(),Ge.push(Ge[0]),tn=Ge.length-1));break}if(ke){this.setGeometryCoordinates_(Ve,Be);const dn=[];if(en!==void 0&&(this.rBush_.remove(en),dn.push(en.segment[0])),an!==void 0&&(this.rBush_.remove(an),dn.push(an.segment[1])),en!==void 0&&an!==void 0){const fn={depth:cn.depth,feature:cn.feature,geometry:cn.geometry,index:tn,segment:dn};this.rBush_.insert(boundingExtent(fn.segment),fn)}this.updateSegmentIndices_(Ve,Qe,cn.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),e.length=0}}return ke}canInsertPoint(){if(!this.vertexFeature_||this.vertexFeature_.get("geometries").every(ke=>ke.getType()==="Circle"||ke.getType().endsWith("Point")))return!1;const e=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent(boundingExtent([e])).some(({segment:ke})=>!(equals(ke[0],e)||equals(ke[1],e)))}insertPoint(e){var Ge;const t=e?fromUserCoordinate(e,this.getMap().getView().getProjection()):(Ge=this.vertexFeature_)==null?void 0:Ge.getGeometry().getCoordinates();return t?this.findInsertVerticesAndUpdateDragSegments_(t).reduce((Be,je)=>Be||this.insertVertex_(je,t),!1):!1}setGeometryCoordinates_(e,t){this.changingFeature_=!0,e.setCoordinates(t),this.changingFeature_=!1}updateSegmentIndices_(e,t,ke,Ge){this.rBush_.forEachInExtent(e.getExtent(),function(Be){Be.geometry===e&&(ke===void 0||Be.depth===void 0||equals$2(Be.depth,ke))&&Be.index>t&&(Be.index+=Ge)})}}function compareIndexes(Oe,e){return Oe.index-e.index}function projectedDistanceToSegmentDataSquared(Oe,e,t){const ke=e.geometry;if(ke.getType()==="Circle"){let Be=ke;if(e.index===CIRCLE_CIRCUMFERENCE_INDEX){const je=squaredDistance(Be.getCenter(),fromUserCoordinate(Oe)),Ve=Math.sqrt(je)-Be.getRadius();return Ve*Ve}}const Ge=fromUserCoordinate(Oe);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),squaredDistanceToSegment(Ge,tempSegment)}function closestOnSegmentData(Oe,e,t){const ke=e.geometry;if(ke.getType()==="Circle"&&e.index===CIRCLE_CIRCUMFERENCE_INDEX)return toUserCoordinate(ke.getClosestPoint(fromUserCoordinate(Oe)));const Ge=fromUserCoordinate(Oe);return tempSegment[0]=fromUserCoordinate(e.segment[0]),tempSegment[1]=fromUserCoordinate(e.segment[1]),toUserCoordinate(closestOnSegment(Ge,tempSegment))}function getDefaultStyleFunction$1(){const Oe=createEditingStyle();return function(e,t){return Oe.Point}}class MouseWheelZoom extends Interaction{constructor(e){e=e||{},super(e),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=e.maxDelta!==void 0?e.maxDelta:1,this.duration_=e.duration!==void 0?e.duration:250,this.timeout_=e.timeout!==void 0?e.timeout:80,this.useAnchor_=e.useAnchor!==void 0?e.useAnchor:!0,this.constrainResolution_=e.constrainResolution!==void 0?e.constrainResolution:!1;const t=e.condition?e.condition:always$1;this.condition_=e.onFocusOnly?all(focusWithTabindex,t):t,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const e=this.getMap();if(!e)return;e.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(e){if(!this.condition_(e)||e.type!==EventType.WHEEL)return!0;const ke=e.map,Ge=e.originalEvent;Ge.preventDefault(),this.useAnchor_&&(this.lastAnchor_=e.pixel);let Be;if(e.type==EventType.WHEEL&&(Be=Ge.deltaY,FIREFOX&&Ge.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(Be/=DEVICE_PIXEL_RATIO),Ge.deltaMode===WheelEvent.DOM_DELTA_LINE&&(Be*=40)),Be===0)return!1;this.lastDelta_=Be;const je=Date.now();this.startTime_===void 0&&(this.startTime_=je),(!this.mode_||je-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(Be)<4?"trackpad":"wheel");const Ve=ke.getView();if(this.mode_==="trackpad"&&!(Ve.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(Ve.getAnimating()&&Ve.cancelAnimations(),Ve.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),Ve.adjustZoom(-Be/this.deltaPerZoom_,this.lastAnchor_?ke.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=je,!1;this.totalDelta_+=Be;const Ze=Math.max(this.timeout_-(je-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,ke),Ze),!1}handleWheelZoom_(e){const t=e.getView();t.getAnimating()&&t.cancelAnimations();let ke=-clamp(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(t.getConstrainResolution()||this.constrainResolution_)&&(ke=ke?ke>0?1:-1:0),zoomByDelta(t,ke,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(e){this.useAnchor_=e,e||(this.lastAnchor_=null)}}class PinchRotate extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=e.threshold!==void 0?e.threshold:.3,this.duration_=e.duration!==void 0?e.duration:250}handleDragEvent(e){let t=0;const ke=this.targetPointers[0],Ge=this.targetPointers[1],Be=Math.atan2(Ge.clientY-ke.clientY,Ge.clientX-ke.clientX);if(this.lastAngle_!==void 0){const Ze=Be-this.lastAngle_;this.rotationDelta_+=Ze,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),t=Ze}this.lastAngle_=Be;const je=e.map,Ve=je.getView();Ve.getConstraints().rotation!==disable&&(this.anchor_=je.getCoordinateFromPixelInternal(je.getEventPixel(centroid(this.targetPointers))),this.rotating_&&(je.render(),Ve.adjustRotationInternal(t,this.anchor_)))}handleUpEvent(e){return this.targetPointers.length<2?(e.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}class PinchZoom extends PointerInteraction{constructor(e){e=e||{};const t=e;t.stopDown||(t.stopDown=FALSE),super(t),this.anchor_=null,this.duration_=e.duration!==void 0?e.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(e){let t=1;const ke=this.targetPointers[0],Ge=this.targetPointers[1],Be=ke.clientX-Ge.clientX,je=ke.clientY-Ge.clientY,Ve=Math.sqrt(Be*Be+je*je);this.lastDistance_!==void 0&&(t=this.lastDistance_/Ve),this.lastDistance_=Ve;const Ze=e.map,Qe=Ze.getView();t!=1&&(this.lastScaleDelta_=t),this.anchor_=Ze.getCoordinateFromPixelInternal(Ze.getEventPixel(centroid(this.targetPointers))),Ze.render(),Qe.adjustResolutionInternal(t,this.anchor_)}handleUpEvent(e){if(this.targetPointers.length<2){const ke=e.map.getView(),Ge=this.lastScaleDelta_>1?1:-1;return ke.endInteraction(this.duration_,Ge),!1}return!0}handleDownEvent(e){if(this.targetPointers.length>=2){const t=e.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||t.getView().beginInteraction(),!0}return!1}}const SelectEventType={SELECT:"select"};class SelectEvent extends BaseEvent{constructor(e,t,ke,Ge){super(e),this.selected=t,this.deselected=ke,this.mapBrowserEvent=Ge}}const originalFeatureStyles={};class Select extends Interaction{constructor(e){super(),this.on,this.once,this.un,e=e||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=e.condition?e.condition:singleClick,this.addCondition_=e.addCondition?e.addCondition:never,this.removeCondition_=e.removeCondition?e.removeCondition:never,this.toggleCondition_=e.toggleCondition?e.toggleCondition:shiftKeyOnly,this.multi_=e.multi?e.multi:!1,this.filter_=e.filter?e.filter:TRUE,this.hitTolerance_=e.hitTolerance?e.hitTolerance:0,this.style_=e.style!==void 0?e.style:getDefaultStyleFunction(),this.features_=e.features||new Collection;let t;if(e.layers)if(typeof e.layers=="function")t=e.layers;else{const ke=e.layers;t=function(Ge){return ke.includes(Ge)}}else t=TRUE;this.layerFilter_=t,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(e,t){this.featureLayerAssociation_[getUid(e)]=t}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(e){return this.featureLayerAssociation_[getUid(e)]}setHitTolerance(e){this.hitTolerance_=e}setMap(e){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(e),e?(this.features_.addEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.addEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(CollectionEventType.ADD,this.boundAddFeature_),this.features_.removeEventListener(CollectionEventType.REMOVE,this.boundRemoveFeature_))}addFeature_(e){const t=e.element;if(this.style_&&this.applySelectedStyle_(t),!this.getLayer(t)){const ke=this.getMap().getAllLayers().find(function(Ge){if(Ge instanceof VectorLayer&&Ge.getSource()&&Ge.getSource().hasFeature(t))return Ge});ke&&this.addFeatureLayerAssociation_(t,ke)}}removeFeature_(e){this.style_&&this.restorePreviousStyle_(e.element)}getStyle(){return this.style_}applySelectedStyle_(e){const t=getUid(e);t in originalFeatureStyles||(originalFeatureStyles[t]=e.getStyle()),e.setStyle(this.style_)}restorePreviousStyle_(e){const t=this.getMap().getInteractions().getArray();for(let Ge=t.length-1;Ge>=0;--Ge){const Be=t[Ge];if(Be!==this&&Be instanceof Select&&Be.getStyle()&&Be.getFeatures().getArray().lastIndexOf(e)!==-1){e.setStyle(Be.getStyle());return}}const ke=getUid(e);e.setStyle(originalFeatureStyles[ke]),delete originalFeatureStyles[ke]}removeFeatureLayerAssociation_(e){delete this.featureLayerAssociation_[getUid(e)]}handleEvent(e){if(!this.condition_(e))return!0;const t=this.addCondition_(e),ke=this.removeCondition_(e),Ge=this.toggleCondition_(e),Be=!t&&!ke&&!Ge,je=e.map,Ve=this.getFeatures(),Ze=[],Qe=[];if(Be){clear$1(this.featureLayerAssociation_),je.forEachFeatureAtPixel(e.pixel,(en,tn)=>{if(!(!(en instanceof Feature)||!this.filter_(en,tn)))return this.addFeatureLayerAssociation_(en,tn),Qe.push(en),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let en=Ve.getLength()-1;en>=0;--en){const tn=Ve.item(en),an=Qe.indexOf(tn);an>-1?Qe.splice(an,1):(Ve.remove(tn),Ze.push(tn))}Qe.length!==0&&Ve.extend(Qe)}else{je.forEachFeatureAtPixel(e.pixel,(en,tn)=>{if(!(!(en instanceof Feature)||!this.filter_(en,tn)))return(t||Ge)&&!Ve.getArray().includes(en)?(this.addFeatureLayerAssociation_(en,tn),Qe.push(en)):(ke||Ge)&&Ve.getArray().includes(en)&&(Ze.push(en),this.removeFeatureLayerAssociation_(en)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let en=Ze.length-1;en>=0;--en)Ve.remove(Ze[en]);Ve.extend(Qe)}return(Qe.length>0||Ze.length>0)&&this.dispatchEvent(new SelectEvent(SelectEventType.SELECT,Qe,Ze,e)),!0}}function getDefaultStyleFunction(){const Oe=createEditingStyle();return extend$4(Oe.Polygon,Oe.LineString),extend$4(Oe.GeometryCollection,Oe.LineString),function(e){return e.getGeometry()?Oe[e.getGeometry().getType()]:null}}class Kinetic{constructor(e,t,ke){this.decay_=e,this.minVelocity_=t,this.delay_=ke,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(e,t){this.points_.push(e,t,Date.now())}end(){if(this.points_.length<6)return!1;const e=Date.now()-this.delay_,t=this.points_.length-3;if(this.points_[t+2]<e)return!1;let ke=t-3;for(;ke>0&&this.points_[ke+2]>e;)ke-=3;const Ge=this.points_[t+2]-this.points_[ke+2];if(Ge<1e3/60)return!1;const Be=this.points_[t]-this.points_[ke],je=this.points_[t+1]-this.points_[ke+1];return this.angle_=Math.atan2(je,Be),this.initialVelocity_=Math.sqrt(Be*Be+je*je)/Ge,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}function defaults$2(Oe){Oe=Oe||{};const e=new Collection,t=new Kinetic(-.005,.05,100);return(Oe.altShiftDragRotate!==void 0?Oe.altShiftDragRotate:!0)&&e.push(new DragRotate),(Oe.doubleClickZoom!==void 0?Oe.doubleClickZoom:!0)&&e.push(new DoubleClickZoom({delta:Oe.zoomDelta,duration:Oe.zoomDuration})),(Oe.dragPan!==void 0?Oe.dragPan:!0)&&e.push(new DragPan({onFocusOnly:Oe.onFocusOnly,kinetic:t})),(Oe.pinchRotate!==void 0?Oe.pinchRotate:!0)&&e.push(new PinchRotate),(Oe.pinchZoom!==void 0?Oe.pinchZoom:!0)&&e.push(new PinchZoom({duration:Oe.zoomDuration})),(Oe.keyboard!==void 0?Oe.keyboard:!0)&&(e.push(new KeyboardPan),e.push(new KeyboardZoom({delta:Oe.zoomDelta,duration:Oe.zoomDuration}))),(Oe.mouseWheelZoom!==void 0?Oe.mouseWheelZoom:!0)&&e.push(new MouseWheelZoom({onFocusOnly:Oe.onFocusOnly,duration:Oe.zoomDuration})),(Oe.shiftDragZoom!==void 0?Oe.shiftDragZoom:!0)&&e.push(new DragZoom({duration:Oe.zoomDuration})),e}var loglevel={exports:{}};(function(Oe){(function(e,t){Oe.exports?Oe.exports=t():e.log=t()})(commonjsGlobal,function(){var e=function(){},t="undefined",ke=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),Ge=["trace","debug","info","warn","error"],Be={},je=null;function Ve(dn,fn){var pn=dn[fn];if(typeof pn.bind=="function")return pn.bind(dn);try{return Function.prototype.bind.call(pn,dn)}catch{return function(){return Function.prototype.apply.apply(pn,[dn,arguments])}}}function Ze(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function Qe(dn){return dn==="debug"&&(dn="log"),typeof console===t?!1:dn==="trace"&&ke?Ze:console[dn]!==void 0?Ve(console,dn):console.log!==void 0?Ve(console,"log"):e}function en(){for(var dn=this.getLevel(),fn=0;fn<Ge.length;fn++){var pn=Ge[fn];this[pn]=fn<dn?e:this.methodFactory(pn,dn,this.name)}if(this.log=this.debug,typeof console===t&&dn<this.levels.SILENT)return"No console available for logging"}function tn(dn){return function(){typeof console!==t&&(en.call(this),this[dn].apply(this,arguments))}}function an(dn,fn,pn){return Qe(dn)||tn.apply(this,arguments)}function cn(dn,fn){var pn=this,gn,yn,vn,An="loglevel";typeof dn=="string"?An+=":"+dn:typeof dn=="symbol"&&(An=void 0);function xn(En){var Cn=(Ge[En]||"silent").toUpperCase();if(!(typeof window===t||!An)){try{window.localStorage[An]=Cn;return}catch{}try{window.document.cookie=encodeURIComponent(An)+"="+Cn+";"}catch{}}}function wn(){var En;if(!(typeof window===t||!An)){try{En=window.localStorage[An]}catch{}if(typeof En===t)try{var Cn=window.document.cookie,Rn=encodeURIComponent(An),Tn=Cn.indexOf(Rn+"=");Tn!==-1&&(En=/^([^;]+)/.exec(Cn.slice(Tn+Rn.length+1))[1])}catch{}return pn.levels[En]===void 0&&(En=void 0),En}}function bn(){if(!(typeof window===t||!An)){try{window.localStorage.removeItem(An)}catch{}try{window.document.cookie=encodeURIComponent(An)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function Mn(En){var Cn=En;if(typeof Cn=="string"&&pn.levels[Cn.toUpperCase()]!==void 0&&(Cn=pn.levels[Cn.toUpperCase()]),typeof Cn=="number"&&Cn>=0&&Cn<=pn.levels.SILENT)return Cn;throw new TypeError("log.setLevel() called with invalid level: "+En)}pn.name=dn,pn.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},pn.methodFactory=fn||an,pn.getLevel=function(){return vn??yn??gn},pn.setLevel=function(En,Cn){return vn=Mn(En),Cn!==!1&&xn(vn),en.call(pn)},pn.setDefaultLevel=function(En){yn=Mn(En),wn()||pn.setLevel(En,!1)},pn.resetLevel=function(){vn=null,bn(),en.call(pn)},pn.enableAll=function(En){pn.setLevel(pn.levels.TRACE,En)},pn.disableAll=function(En){pn.setLevel(pn.levels.SILENT,En)},pn.rebuild=function(){if(je!==pn&&(gn=Mn(je.getLevel())),en.call(pn),je===pn)for(var En in Be)Be[En].rebuild()},gn=Mn(je?je.getLevel():"WARN");var Pn=wn();Pn!=null&&(vn=Mn(Pn)),en.call(pn)}je=new cn,je.getLogger=function(fn){if(typeof fn!="symbol"&&typeof fn!="string"||fn==="")throw new TypeError("You must supply a name when creating a logger.");var pn=Be[fn];return pn||(pn=Be[fn]=new cn(fn,je.methodFactory)),pn};var un=typeof window!==t?window.log:void 0;return je.noConflict=function(){return typeof window!==t&&window.log===je&&(window.log=un),je},je.getLoggers=function(){return Be},je.default=je,je})})(loglevel);var loglevelExports=loglevel.exports,LoggerByDefault$1={getLogger:function(Oe){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=Oe||"default";return loglevelExports.getLogger(t)}},MessagesResources={PARAM_MISSING:"Parameter(s) '%var%' missing",PARAM_EMPTY:"Parameter(s) '%var%' empty",PARAM_TYPE:"Wrong type(s) for parameter(s) '%var%'",PARAM_FORMAT:"Parameter(s) '%var%' not correctly formatted",PARAM_NOT_SUPPORT:"Value(s) for parameter(s) '%var%' not supported",PARAM_NOT_SUPPORT_NODEJS:"Value(s) for parameter(s) '%var%' not supported to NodeJS",PARAM_UNKNOWN:"Value(s) for parameter(s) '%var%' unknown",SERVICE_REQUEST_BUILD:"An error occurred during the request building of the service",SERVICE_REQUEST_EMPTY:"The request sent to the service is empty",SERVICE_RESPONSE_EXCEPTION:"The service returned an exception : '%var%'",SERVICE_RESPONSE_EXCEPTION_2:"The service returned an exception",SERVICE_RESPONSE_ANALYSE:"An error occurred while parsing the response '%var%' of the service",SERVICE_RESPONSE_ANALYSE_2:"An unknown error occurred while parsing the response",SERVICE_RESPONSE_EMPTY:"The response of the service is empty",SERVICE_RESPONSE_EMPTY_2:"The response from the service could not be analyzed or is empty",SERVICE_RESPONSE_FORMAT:"The format of the service response is not supported (handled format(s) : '%var%')",SERVICE_RESPONSE_FORMAT_2:"The format of the service response is not supported",SERVICE_RESPONSE_FORMAT_3:"No suggestion matching the search",CLASS_CONSTRUCTOR:"'%var%' constructor cannot be called as a function.",getMessage:function(Oe,e){if(Object.keys(arguments).length===0)return"Message indefined !";var t=Array.prototype.slice.call(arguments),ke=t.shift(),Ge=t,Be=this[ke];try{Array.isArray(Ge)&&Ge.length>0?Be=Be.replace("%var%",Ge.join(" - ")):Be=Be.replace("%var%","%var% (not specified)")}catch{}return Be}},Helper$1={normalyzeParameters:function(Oe){var e=null;if(Oe){var t=[];for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Ge=Oe[ke];Ge||(Ge=""),t.push(ke+"="+Ge)}e=t.join("&")}return e},normalyzeUrl:function(Oe,e,t){var ke=Oe;if(Oe){if(Oe.split("?").length-1>=2){var Ge=Oe.search(/\?/)+1;ke=Oe.substring(0,Ge)+Oe.slice(Ge).replace(/\?/g,"&")}var Be=Oe.indexOf("?");Be===-1&&(ke+="?"),Be!==-1&&Be!==Oe.length-1&&(ke+="&")}return e&&(typeof e=="string"?(e=e.replace("?",""),ke+=e):ke+=this.normalyzeParameters(e)),t&&(ke=encodeURIComponent(ke)),ke},indent:function(Oe,e){var t=Oe||0;return new Array(t+1).join("	")+e}};function commonjsRequire(Oe){throw new Error('Could not dynamically require "'+Oe+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var es6Promise={exports:{}};/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(Oe,e){(function(t,ke){Oe.exports=ke()})(commonjsGlobal,function(){function t(Ti){var Mi=typeof Ti;return Ti!==null&&(Mi==="object"||Mi==="function")}function ke(Ti){return typeof Ti=="function"}var Ge=void 0;Array.isArray?Ge=Array.isArray:Ge=function(Ti){return Object.prototype.toString.call(Ti)==="[object Array]"};var Be=Ge,je=0,Ve=void 0,Ze=void 0,Qe=function(Mi,Oi){xn[je]=Mi,xn[je+1]=Oi,je+=2,je===2&&(Ze?Ze(wn):Mn())};function en(Ti){Ze=Ti}function tn(Ti){Qe=Ti}var an=typeof window<"u"?window:void 0,cn=an||{},un=cn.MutationObserver||cn.WebKitMutationObserver,dn=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",fn=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function pn(){return function(){return process.nextTick(wn)}}function gn(){return typeof Ve<"u"?function(){Ve(wn)}:An()}function yn(){var Ti=0,Mi=new un(wn),Oi=document.createTextNode("");return Mi.observe(Oi,{characterData:!0}),function(){Oi.data=Ti=++Ti%2}}function vn(){var Ti=new MessageChannel;return Ti.port1.onmessage=wn,function(){return Ti.port2.postMessage(0)}}function An(){var Ti=setTimeout;return function(){return Ti(wn,1)}}var xn=new Array(1e3);function wn(){for(var Ti=0;Ti<je;Ti+=2){var Mi=xn[Ti],Oi=xn[Ti+1];Mi(Oi),xn[Ti]=void 0,xn[Ti+1]=void 0}je=0}function bn(){try{var Ti=Function("return this")().require("vertx");return Ve=Ti.runOnLoop||Ti.runOnContext,gn()}catch{return An()}}var Mn=void 0;dn?Mn=pn():un?Mn=yn():fn?Mn=vn():an===void 0&&typeof commonjsRequire=="function"?Mn=bn():Mn=An();function Pn(Ti,Mi){var Oi=this,Xi=new this.constructor(Rn);Xi[Cn]===void 0&&Bn(Xi);var ar=Oi._state;if(ar){var Pr=arguments[ar-1];Qe(function(){return Li(ar,Xi,Pr,Oi._result)})}else _i(Oi,Xi,Ti,Mi);return Xi}function En(Ti){var Mi=this;if(Ti&&typeof Ti=="object"&&Ti.constructor===Mi)return Ti;var Oi=new Mi(Rn);return qn(Oi,Ti),Oi}var Cn=Math.random().toString(36).substring(2);function Rn(){}var Tn=void 0,Nn=1,Gn=2;function zn(){return new TypeError("You cannot resolve a promise with itself")}function $n(){return new TypeError("A promises callback cannot return that same promise.")}function Qn(Ti,Mi,Oi,Xi){try{Ti.call(Mi,Oi,Xi)}catch(ar){return ar}}function Hn(Ti,Mi,Oi){Qe(function(Xi){var ar=!1,Pr=Qn(Oi,Mi,function(Rr){ar||(ar=!0,Mi!==Rr?qn(Xi,Rr):Ci(Xi,Rr))},function(Rr){ar||(ar=!0,Si(Xi,Rr))},"Settle: "+(Xi._label||" unknown promise"));!ar&&Pr&&(ar=!0,Si(Xi,Pr))},Ti)}function Ni(Ti,Mi){Mi._state===Nn?Ci(Ti,Mi._result):Mi._state===Gn?Si(Ti,Mi._result):_i(Mi,void 0,function(Oi){return qn(Ti,Oi)},function(Oi){return Si(Ti,Oi)})}function On(Ti,Mi,Oi){Mi.constructor===Ti.constructor&&Oi===Pn&&Mi.constructor.resolve===En?Ni(Ti,Mi):Oi===void 0?Ci(Ti,Mi):ke(Oi)?Hn(Ti,Mi,Oi):Ci(Ti,Mi)}function qn(Ti,Mi){if(Ti===Mi)Si(Ti,zn());else if(t(Mi)){var Oi=void 0;try{Oi=Mi.then}catch(Xi){Si(Ti,Xi);return}On(Ti,Mi,Oi)}else Ci(Ti,Mi)}function Un(Ti){Ti._onerror&&Ti._onerror(Ti._result),Ii(Ti)}function Ci(Ti,Mi){Ti._state===Tn&&(Ti._result=Mi,Ti._state=Nn,Ti._subscribers.length!==0&&Qe(Ii,Ti))}function Si(Ti,Mi){Ti._state===Tn&&(Ti._state=Gn,Ti._result=Mi,Qe(Un,Ti))}function _i(Ti,Mi,Oi,Xi){var ar=Ti._subscribers,Pr=ar.length;Ti._onerror=null,ar[Pr]=Mi,ar[Pr+Nn]=Oi,ar[Pr+Gn]=Xi,Pr===0&&Ti._state&&Qe(Ii,Ti)}function Ii(Ti){var Mi=Ti._subscribers,Oi=Ti._state;if(Mi.length!==0){for(var Xi=void 0,ar=void 0,Pr=Ti._result,Rr=0;Rr<Mi.length;Rr+=3)Xi=Mi[Rr],ar=Mi[Rr+Oi],Xi?Li(Oi,Xi,ar,Pr):ar(Pr);Ti._subscribers.length=0}}function Li(Ti,Mi,Oi,Xi){var ar=ke(Oi),Pr=void 0,Rr=void 0,Us=!0;if(ar){try{Pr=Oi(Xi)}catch(Vr){Us=!1,Rr=Vr}if(Mi===Pr){Si(Mi,$n());return}}else Pr=Xi;Mi._state!==Tn||(ar&&Us?qn(Mi,Pr):Us===!1?Si(Mi,Rr):Ti===Nn?Ci(Mi,Pr):Ti===Gn&&Si(Mi,Pr))}function Ri(Ti,Mi){try{Mi(function(Xi){qn(Ti,Xi)},function(Xi){Si(Ti,Xi)})}catch(Oi){Si(Ti,Oi)}}var tr=0;function Fr(){return tr++}function Bn(Ti){Ti[Cn]=tr++,Ti._state=void 0,Ti._result=void 0,Ti._subscribers=[]}function Ai(){return new Error("Array Methods must be provided an Array")}var Kn=function(){function Ti(Mi,Oi){this._instanceConstructor=Mi,this.promise=new Mi(Rn),this.promise[Cn]||Bn(this.promise),Be(Oi)?(this.length=Oi.length,this._remaining=Oi.length,this._result=new Array(this.length),this.length===0?Ci(this.promise,this._result):(this.length=this.length||0,this._enumerate(Oi),this._remaining===0&&Ci(this.promise,this._result))):Si(this.promise,Ai())}return Ti.prototype._enumerate=function(Oi){for(var Xi=0;this._state===Tn&&Xi<Oi.length;Xi++)this._eachEntry(Oi[Xi],Xi)},Ti.prototype._eachEntry=function(Oi,Xi){var ar=this._instanceConstructor,Pr=ar.resolve;if(Pr===En){var Rr=void 0,Us=void 0,Vr=!1;try{Rr=Oi.then}catch(Js){Vr=!0,Us=Js}if(Rr===Pn&&Oi._state!==Tn)this._settledAt(Oi._state,Xi,Oi._result);else if(typeof Rr!="function")this._remaining--,this._result[Xi]=Oi;else if(ar===Bi){var ro=new ar(Rn);Vr?Si(ro,Us):On(ro,Oi,Rr),this._willSettleAt(ro,Xi)}else this._willSettleAt(new ar(function(Js){return Js(Oi)}),Xi)}else this._willSettleAt(Pr(Oi),Xi)},Ti.prototype._settledAt=function(Oi,Xi,ar){var Pr=this.promise;Pr._state===Tn&&(this._remaining--,Oi===Gn?Si(Pr,ar):this._result[Xi]=ar),this._remaining===0&&Ci(Pr,this._result)},Ti.prototype._willSettleAt=function(Oi,Xi){var ar=this;_i(Oi,void 0,function(Pr){return ar._settledAt(Nn,Xi,Pr)},function(Pr){return ar._settledAt(Gn,Xi,Pr)})},Ti}();function Fn(Ti){return new Kn(this,Ti).promise}function $i(Ti){var Mi=this;return Be(Ti)?new Mi(function(Oi,Xi){for(var ar=Ti.length,Pr=0;Pr<ar;Pr++)Mi.resolve(Ti[Pr]).then(Oi,Xi)}):new Mi(function(Oi,Xi){return Xi(new TypeError("You must pass an array to race."))})}function Hi(Ti){var Mi=this,Oi=new Mi(Rn);return Si(Oi,Ti),Oi}function Di(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function zi(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var Bi=function(){function Ti(Mi){this[Cn]=Fr(),this._result=this._state=void 0,this._subscribers=[],Rn!==Mi&&(typeof Mi!="function"&&Di(),this instanceof Ti?Ri(this,Mi):zi())}return Ti.prototype.catch=function(Oi){return this.then(null,Oi)},Ti.prototype.finally=function(Oi){var Xi=this,ar=Xi.constructor;return ke(Oi)?Xi.then(function(Pr){return ar.resolve(Oi()).then(function(){return Pr})},function(Pr){return ar.resolve(Oi()).then(function(){throw Pr})}):Xi.then(Oi,Oi)},Ti}();Bi.prototype.then=Pn,Bi.all=Fn,Bi.race=$i,Bi.resolve=En,Bi.reject=Hi,Bi._setScheduler=en,Bi._setAsap=tn,Bi._asap=Qe;function Gi(){var Ti=void 0;if(typeof commonjsGlobal<"u")Ti=commonjsGlobal;else if(typeof self<"u")Ti=self;else try{Ti=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var Mi=Ti.Promise;if(Mi){var Oi=null;try{Oi=Object.prototype.toString.call(Mi.resolve())}catch{}if(Oi==="[object Promise]"&&!Mi.cast)return}Ti.Promise=Bi}return Bi.polyfill=Gi,Bi.Promise=Bi,Bi})})(es6Promise);var es6PromiseExports=es6Promise.exports;const ES6Promise=getDefaultExportFromCjs$1(es6PromiseExports);var XHR={call:function(Oe){var e=LoggerByDefault$1.getLogger("XHR");if(e.trace("[XHR::call()]"),ES6Promise.polyfill(),!Oe.url)throw new Error("missing parameter : url is not defined !");if(!Oe.method)throw new Error("missing parameter : method is not defined !");Oe.format||(Oe.format="text");var t={};switch(t.url=Oe.url,t.data=Oe.data?Oe.data:null,t.method=Oe.method,t.timeOut=Oe.timeOut||0,t.scope=Oe.scope||this,t.proxy=Oe.proxy||null,t.content=Oe.content||null,t.headers=Oe.headers||{referer:"http://localhost"},Oe.method){case"DELETE":case"GET":break;case"PUT":case"POST":t.content=Oe.content?Oe.content:"application/x-www-form-urlencoded",t.headers=Oe.headers?Oe.headers:{referer:"http://localhost"};break;case"HEAD":case"OPTIONS":throw new Error("HTTP method not yet supported !");default:throw new Error("HTTP method unknown !")}switch(Oe.format){case"text":this.__call(t).then(function(ke){e.trace(ke),Oe.onResponse.call(this,ke)}).catch(function(ke){Oe.onFailure.call(this,ke)});break;case"json":this.__callJSON(t).then(function(ke){e.trace(ke),Oe.onResponse.call(this,ke)}).catch(function(ke){Oe.onFailure.call(this,ke)});break;case"xml":this.__callXML(t).then(function(ke){e.trace(ke),Oe.onResponse.call(this,ke)}).catch(function(ke){Oe.onFailure.call(this,ke)});break;default:throw new Error("This output Format is not yet supported !")}},__call:function(Oe){var e=LoggerByDefault$1.getLogger("XHR");e.trace("[XHR::__call()]");var t=new Promise(function(ke,Ge){var Be=Oe.method==="POST"||Oe.method==="PUT"?1:0;Oe.data&&(typeof Oe.data=="object"&&Object.keys(Oe.data).length||typeof Oe.data=="string"&&Oe.data.length)&&!Be&&(Oe.url=Helper$1.normalyzeUrl(Oe.url,Oe.data)),e.trace("URL = ",Oe.url);var je=null;if(typeof window>"u"){var Ve=require("node-fetch"),Ze={headers:{Referer:"https://localhost"}};return Oe.data&&typeof Oe.data=="string"&&Be&&(Ze={method:Oe.method,body:Oe.data,headers:{"Content-Type":Oe.content,Referer:"https://localhost"}}),Ve(Oe.url,Ze).then(function(an){if(an.ok)ke(an.text());else{var cn="Errors Occured on Http Request (status : '"+an.statusText+"' | url : '"+an.url+"')",un=an.status;Ge({message:cn,status:un})}}).catch(function(an){Ge({message:an,status:-1})})}else if(window.XMLHttpRequest){e.trace("XMLHttpRequest"),je=new XMLHttpRequest,je.open(Oe.method,Oe.url,!0),je.overrideMimeType=Oe.content;var Qe=null;Oe.timeOut>0&&(e.trace("XHR - TimeOut actif !"),Qe=window.setTimeout(function(){var an="TimeOut Occured on Http Request with XMLHttpRequest !";Ge({message:an,status:-1})},Oe.timeOut)),Be&&(e.trace("data = ",Oe.data),je.setRequestHeader("Content-type",Oe.content)),je.onerror=function(an){console.log(an),Ge(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},je.ontimeout=function(an){console.log(an),Ge(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},je.onreadystatechange=function(an){if(je.readyState===4)if(je.status===200)window.clearTimeout(Qe),ke(je.response);else{var cn="Errors Occured on Http Request (status : '"+an.target.statusText+"' | url : '"+an.target.responseURL+"' | response : '"+an.target.response+"')",un=an.target.status;Ge({message:cn,status:un})}};var en=Oe.data&&Be?Oe.data:null;je.send(en)}else if(window.XDomainRequest){e.trace("XDomainRequest"),je=new XDomainRequest,je.open(Oe.method,Oe.url),je.overrideMimeType=Oe.content,Oe.timeOut>0&&(je.timeout=Oe.timeout,e.trace("XHR - TimeOut actif !")),Be&&je.setRequestHeader("Content-type",Oe.content),je.onerror=function(){Ge(new Error("Errors Occured on Http Request with XMLHttpRequest !"))},je.ontimeout=function(){Ge(new Error("TimeOut Occured on Http Request with XMLHttpRequest !"))},je.onload=function(an){if(je.status===200)ke(je.responseText);else{var cn="Errors Occured on Http Request (status : '"+an.target.statusText+"' | url : '"+an.target.responseURL+"')",un=an.target.status;Ge({message:cn,status:un})}};var tn=Oe.data&&Be?Oe.data:null;je.send(tn)}else throw new Error("CORS not supported")});return t},__callJSON:function(Oe){return this.__call(Oe).then(JSON.parse).catch(function(e){console.log("_callJSON failed on : ",Oe.url,e)})},__callXML:function(Oe){return this.__call(Oe).then(function(e){var t;if(typeof window>"u"){var ke=require("@xmldom/xmldom").DOMParser;t=new ke().parseFromString(e,"text/xml")}else if(window.DOMParser){var Ge=new window.DOMParser;t=Ge.parseFromString(e,"text/xml")}else t=new window.ActiveXObject("Microsoft.XMLDOM"),t.async=!1,t.loadXML(e);return t}).catch(function(e){console.log("__callXML failed on : ",Oe.url,e)})}},JSONP={uuid:function(){var Oe=Math.floor(Date.now());return function(){return Oe++}}(),call:function(Oe){var e=LoggerByDefault$1.getLogger("JSONP");if(e.trace("[JSONP::call ()]"),!Oe)throw e.error("missing parameter : options !"),new Error("missing parameter : options !");if(!Oe.url)throw e.error("missing parameter : options.url !"),new Error("missing parameter : options.url !");if(Oe.timeOut||(e.info("setting 'options.timeOut' default value"),Oe.timeOut=0),!Oe.onResponse)throw e.error("missing parameter : options.onResponse !"),new Error("missing parameter : options.onResponse !");var t=typeof Oe.callbackSuffix=="string"?Oe.callbackSuffix:this.uuid(),ke=!1,Ge=!1,Be=Oe.url.indexOf("callback=");if(Be!==-1){ke=!0;var je=Oe.url.indexOf("&",Be);je===-1&&(je=Oe.url.length);var Ve=Oe.url.substring(Be+9,je);Ve&&(Ge=!0,Oe.callbackName=Ve,e.info("setting 'options.callbackName' value ("+Oe.callbackName+") from 'options.url' parameter"))}if(!ke){var Ze=Oe.url.indexOf("?");Ze===-1?Oe.url=Oe.url+"?callback=":Ze===Oe.url.length?Oe.url=Oe.url+"callback=":Oe.url=Oe.url+"&callback=",e.info("setting callback default key in 'options.url' : "+Oe.url)}var Qe=Oe.callbackName?!0:Ge;if(Ge||(Oe.callbackName||(e.info("setting 'options.callbackName' default value"),Oe.callbackName="callback",(t||t==="")&&(Oe.callbackName+=t)),Oe.url=Oe.url.replace("callback=","callback="+Oe.callbackName),e.info("setting callback function name in 'options.url' : "+Oe.url)),Oe.onTimeOut||(e.info("setting 'options.onTimeOut' default value"),Oe.onTimeOut=function(){console.log("TimeOut while invoking url : "+Oe.url)}),!Qe){var en=this,tn=null;Oe.timeOut>0&&(tn=window.setTimeout(function(){window[Oe.callbackName]=function(){},Oe.onTimeOut(),en._deleteScript(t)},Oe.timeOut)),window[Oe.callbackName]=function(an){window.clearTimeout(tn),Oe.onResponse(an),en._deleteScript(t)}}this._createScript(t,Oe.url)},_createScript:function(Oe,e){var t,ke=document.getElementById("results"+Oe);t=document.createElement("script"),t.setAttribute("type","text/javascript"),t.setAttribute("src",e),t.setAttribute("charset","UTF-8"),t.setAttribute("id","results"+Oe),t.setAttribute("async","true");var Ge=document.documentElement||document.getElementsByTagName("head")[0];ke===null?Ge.appendChild(t):Ge.replaceChild(t,ke)},_deleteScript:function(Oe){var e=document.getElementById("results"+Oe);if(e){var t=e.parentNode||document.documentElement;if(!t)return;t.removeChild(e)}}},Protocol={send:function(Oe){var e=Oe||{method:"GET",protocol:"XHR",timeOut:0,format:null,wrap:!0,nocache:!0,output:"json",callback:null,callbackSuffix:null};if(typeof window>"u"&&Oe.protocol==="JSONP"){console.log("Value (s) for parameter (s) 'protocol=JSONP (instead use XHR)' not supported to NodeJS");return}if(Oe.protocol==="XHR"||Oe.format==="json"?e.wrap=!1:Oe.protocol==="JSONP"&&Oe.format==="xml"&&(e.wrap=!0),e.callback=null,e.output=e.wrap?"json":null,e.wrap){var t={};t.output=e.output,t.callback=e.callback,delete t.callback,e.url=Helper$1.normalyzeUrl(Oe.url,t)}switch(e.protocol){case"XHR":Oe.method==="GET"&&Oe.nocache&&(e.url=Helper$1.normalyzeUrl(e.url,{t:new Date().getTime()})),XHR.call(e);break;case"JSONP":e.data&&(e.url=Helper$1.normalyzeUrl(e.url,e.data)),JSONP.call(e);break;default:throw new Error("protocol not supported (XHR|JSONP) !")}}};function ErrorService(Oe){if(!(this instanceof ErrorService))throw new TypeError("ErrorService constructor cannot be called as a function.");var e=Oe;typeof Oe=="string"||Oe instanceof String?(this.message=Oe,this.status=-1,this.type=ErrorService.TYPE_UNKERR):(this.message=e.message||"undefined!?",this.type=e.type,this.status=e.status||-1),this.name="ErrorService",this.stack=new Error().stack}ErrorService.TYPE_SRVERR="SERVICE_ERROR";ErrorService.TYPE_USEERR="USAGE_ERROR";ErrorService.TYPE_UNKERR="UNKNOWN_ERROR";ErrorService.prototype=Object.create(Error.prototype,{constructor:{value:ErrorService,writable:!0,configurable:!0}});const version$1="3.4.6",date="19/12/2024",Pkg={version:version$1,date};function CommonService(Oe){if(!(this instanceof CommonService))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR"));this.logger=LoggerByDefault$1.getLogger("CommonService"),this.logger.trace("[Constructeur CommonService (options)]"),this.options={protocol:"XHR",ssl:!0,proxyURL:"",callbackSuffix:null,httpMethod:"GET",timeOut:0,rawResponse:!1,scope:this,onSuccess:function(ke){console.log("onSuccess - la reponse est la suivante : ",ke)},onFailure:function(ke){ke.status===200||!ke.status?console.log("onFailure : ",ke.message):console.log("onFailure - Erreur (",ke.status,") : ",ke.message)}};for(var e in Oe)Oe.hasOwnProperty(e)&&(this.options[e]=Oe[e]);this.options.rawResponse&&!this.options.onSuccess&&(this.options.onSuccess=function(ke){console.log("onSuccess - la réponse brute du service est la suivante : ",ke)});var t=this.options.onSuccess!==null&&typeof this.options.onSuccess=="function";if(!t)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));switch(this.options.httpMethod=typeof Oe.httpMethod=="string"?Oe.httpMethod.toUpperCase():"GET",this.options.httpMethod){case"POST":case"GET":break;case"PUT":case"DELETE":case"HEAD":case"OPTIONS":throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","httpMethod"));default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","httpMethod"))}switch(this.options.protocol=typeof Oe.protocol=="string"?Oe.protocol.toUpperCase():"XHR",this.options.protocol){case"JSONP":case"XHR":break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","protocol"))}if(typeof window>"u"&&this.options.protocol==="JSONP")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT_NODEJS","protocol=JSONP (instead use XHR)"));this.options.protocol==="JSONP"&&(this.options.httpMethod="GET"),this.options.nocache=Oe.nocache||!1,this.options.outputFormat=null,this.request=null,this.response=null}CommonService.prototype={constructor:CommonService,call:function(){this.logger.trace("CommonService::call ()");var Oe=this;function e(){this.logger.trace("CommonService::run ()"),this.buildRequest.call(Oe,Be,t)}e.call(Oe);function t(je){this.logger.trace("CommonService::onBuildRequest : ",je),this.callService.call(Oe,Be,ke)}function ke(je){this.logger.trace("CommonService::onCallService : ",je),this.analyzeResponse.call(Oe,Be,Ge)}function Ge(je){if(this.logger.trace("CommonService::onAnalyzeResponse : ",je),je)this.options.onSuccess.call(this,je);else return Be.call(this,new ErrorService("Analyse de la reponse en échec !?"))}function Be(je){this.logger.trace("CommonService::onError()");var Ve=je;Ve instanceof ErrorService||(Ve=new ErrorService(je.message)),this.options.onFailure.call(this,Ve)}},buildRequest:function(Oe,e){this.logger.error("overwritten method !"),Oe&&Oe.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")},callService:function(Oe,e){var t=null,ke=this.request,Ge=!!(this.options.proxyURL&&this.options.protocol==="XHR"),Be={"gp-access-lib":Pkg.version};this.options.apiKey&&(Be.apiKey=this.options.apiKey),this.options.serverUrl=Helper$1.normalyzeUrl(this.options.serverUrl,Be,!1),Ge&&(this.options.httpMethod==="GET"&&(t=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,this.request,!0),ke=null),this.options.httpMethod==="POST"&&(t=this.options.proxyURL+Helper$1.normalyzeUrl(this.options.serverUrl,null,!0),ke=this.request));var je=this,Ve={url:t||this.options.serverUrl,method:this.options.httpMethod,protocol:this.options.protocol,timeOut:this.options.timeOut||0,format:this.options.outputFormat,nocache:this.options.nocache||!1,wrap:this.options.protocol!=="XHR",callbackSuffix:this.options.callbackSuffix,data:ke,headers:null,content:this.options.contentType||"application/xml",scope:this.options.scope||this,onResponse:function(Ze){je.logger.trace("callService::onResponse()");var Qe=null;if(je.options.protocol==="XHR"&&(je.logger.trace("Response XHR",Ze),Qe=Ze),je.options.protocol==="JSONP")if(je.logger.trace("Response JSON",Ze),Ze)if(Ze.http)if(Ze.http.status!==200){Oe.call(je,new ErrorService({status:Ze.http.status,message:Ze.http.error,type:ErrorService.TYPE_SRVERR}));return}else Qe=Ze.xml,je.options.rawResponse&&(Qe=Ze);else Qe=Ze;else{Oe.call(je,new ErrorService("Le contenu de la reponse est vide !?"));return}if(typeof je.options.onBeforeParse=="function"){var en=je.options.onBeforeParse(Qe);typeof en=="string"&&(Qe=en)}je.response=Qe,e.call(je,Qe)},onFailure:function(Ze){je.logger.trace("callService::onFailure()"),Ze.type=ErrorService.TYPE_SRVERR,Oe.call(je,new ErrorService(Ze))},onTimeOut:function(){je.logger.trace("callService::onTimeOut()"),Oe.call(je,new ErrorService("TimeOut!"))}};Protocol.send(Ve)},analyzeResponse:function(Oe,e){this.logger.error("overwritten method !"),Oe&&Oe.call(this,"This method must be overwritten !"),e.call(this,"This method must be overwritten !")}};var DefaultUrlService={ssl:!0,newUrl:function(Oe){var e="data.geopf.fr",t;return DefaultUrlService.ssl===!1?t="http://":t="https://",t+e+Oe},Alti:{new_key:{"elevation-json":"/altimetrie/1.0/calcul/alti/rest/elevation.json","elevation-xml":"/altimetrie/1.0/calcul/alti/rest/elevation.xml","profil-json":"/altimetrie/1.0/calcul/alti/rest/elevationLine.json","profil-xml":"/altimetrie/1.0/calcul/alti/rest/elevationLine.xml"},newUrl:function(){return{"elevation-json":DefaultUrlService.newUrl(this.new_key["elevation-json"]),"elevation-xml":DefaultUrlService.newUrl(this.new_key["elevation-xml"]),"profil-json":DefaultUrlService.newUrl(this.new_key["profil-json"]),"profil-xml":DefaultUrlService.newUrl(this.new_key["profil-xml"])}}},ProcessIsoCurve:{new_key:"/navigation/isochrone",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Config:{_key:"https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/dist/",url:function(Oe){Array.isArray(Oe)||(Oe=Oe.split(","));for(var e=[],t=0;t<Oe.length;t++)e[t]=this._key+Oe[t]+"Config.json";return e}},AutoComplete:{new_key:"/geocodage/completion",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},ReverseGeocode:{new_key:"/geocodage/reverse",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Geocode:{new_key:"/geocodage/search",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}},Route:{new_key:"/navigation/itineraire",newUrl:function(){return DefaultUrlService.newUrl(this.new_key)}}};function ConfigInterface(){if(!(this instanceof ConfigInterface))throw new TypeError("ConfigInterface constructor cannot be called as a function.");this.generalOptions={apiKeys:{},title:null,defaultGMLGFIStyle:null,theme:null,wgs84Resolutions:[]},this.layers={},this.tileMatrixSets={}}ConfigInterface.prototype={constructor:ConfigInterface,isKeyConfLoaded:function(Oe){if(Oe)return!!this.generalOptions.apiKeys[Oe]},getLayersId:function(Oe){return this.generalOptions.apiKeys[Oe]},getLayerId:function(Oe,e){if(!(!Oe||!e)){var t=null;if(this.layers){var ke=this.layers;for(var Ge in ke)if(ke.hasOwnProperty(Ge)){var Be=Ge.split("$");if(Oe===Be[0]&&Be[1]){var je=Be[1].split(":"),Ve=Be[1].split(";");if(Ve[1]===e.toUpperCase()){t=Ge;break}if(je[2]===e.toUpperCase()){t=Ge;break}}}}if(t)return t}},getLayersConf:function(Oe){var e={},t=this.getLayersId(Oe);if(t)for(var ke=0;ke<t.length;ke++){var Ge=t[ke];e[Ge]=this.layers[Ge]}return e},getLayerConf:function(Oe){if(this.layers)return this.layers[Oe]},getLayerParams:function(Oe,e){var t={};if((e==="WMS"||Object.keys(this.tileMatrixSets).length!==0)&&Object.keys(this.layers).length!==0){var ke=this.getLayerId(Oe,e);if(ke){var Ge=this.getLayerConf(ke),Be=this.getLayerKey(ke);if(Be.length===0)return;for(var je=0;je<Be.length;je++)Ge.serviceParams.serverUrl[Be[je]]&&(t.url=Ge.serviceParams.serverUrl[Be[je]]);if(e!=="WFS"&&(/\/v\//.test(t.url)?t.styles=" ":t.styles=Ge.styles[0].name),t.version=Ge.serviceParams.version,t.format=Ge.formats&&Ge.formats.length?Ge.formats[0].name:"",t.projection=Ge.defaultProjection,t.minScale=Ge.globalConstraint.minScaleDenominator,t.maxScale=Ge.globalConstraint.maxScaleDenominator,t.extent=Ge.globalConstraint.bbox,t.legends=Ge.legends,t.title=Ge.title,t.description=Ge.description,e==="WMS"&&(t.metadata=Ge.metadata),Ge.wmtsOptions){t.tileMatrixSetLimits=Ge.wmtsOptions.tileMatrixSetLimits;var Ve=Ge.wmtsOptions.tileMatrixSetLink;if(Ve){t.TMSLink=Ve;var Ze=this.getTMSConf(Ve);t.matrixIds=Object.keys(Ze.tileMatrices),t.tileMatrices=Ze.tileMatrices,t.nativeResolutions=Ze.nativeResolutions||this.getTMSConf("PM").nativeResolutions}}}}return t},getLayerKey:function(Oe){var e=[];if(this.generalOptions&&this.generalOptions.apiKeys&&Object.keys(this.generalOptions.apiKeys).length!==0){var t=this.generalOptions.apiKeys;for(var ke in t){var Ge=t[ke];Ge.forEach(function(Be){Be===Oe&&e.push(ke)})}}return e},getTileMatrixSets:function(){return this.tileMatrixSets},getTMSConf:function(Oe){if(this.tileMatrixSets)return this.tileMatrixSets[Oe]},getGlobalConstraints:function(Oe){var e={};if(Oe){var t=this.getLayerConf(Oe);e.projection=t.defaultProjection,e.minScale=t.globalConstraint.minScaleDenominator,e.maxScale=t.globalConstraint.maxScaleDenominator,e.extent=t.globalConstraint.bbox}return e}};function Config$1(Oe){if(!(this instanceof Config$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Config"));this.CLASSNAME="Config",this.logger=LoggerByDefault$1.getLogger("Gp.Config"),this.logger.trace("[Constructeur Config (options)]");var e=Oe.onSuccess!==null&&typeof Oe.onSuccess=="function";if(!e)throw new Error(MessagesResources.getMessage("PARAM_MISSING","onSuccess()"));!Oe.apiKey&&!Oe.customConfigFile&&(Oe.apiKey="full"),this.options={},this.options.onSuccess=Oe.onSuccess,this.options.onFailure=Oe.onFailure,this.options.sync=Oe.sync||!1,this.options.listConfigUrls=Oe.customConfigFile?[Oe.customConfigFile]:Array.isArray(Oe.apiKey)?DefaultUrlService.Config.url(Oe.apiKey):DefaultUrlService.Config.url(Oe.apiKey.split(","))}Config$1.prototype=Object.create(CommonService.prototype,{});Config$1.prototype.constructor=Config$1;Config$1.prototype.buildRequest=function(Oe,e){if(this.listConfigUrls=this.options.listConfigUrls,!this.listConfigUrls){Oe.call(this,new Error("url by default not found !"));return}e.call(this,this.listConfigUrls)};Config$1.prototype.callService=function(Oe,e){this.options.sync?__callServiceSync.call(this,Oe,e):__callService.call(this,Oe,e)};var __callService=function(Oe,e){this.listConfigResults=[];let t=null;if(typeof window>"u"){var ke=require("node-fetch");t=ke}else t=window.fetch;var Ge=je=>t(je,{credentials:"same-origin"}).then(Ve=>{if(Ve.ok)return Ve.json().then(Ze=>Ze).catch(Ze=>{throw new Error("Exception Json : "+Ze)});throw new Error("Exception HTTP : "+Ve.status+" (status code) !")}).catch(Ve=>new Promise((Ze,Qe)=>{Qe(Ve)})),Be=[];for(let je=0;je<this.listConfigUrls.length;je++){const Ve=this.listConfigUrls[je];Be.push(Ge(Ve))}Promise.all(Be).then(je=>{if(!je)throw new Error("results config empty !?");je.forEach(Ve=>{this.listConfigResults.push(Ve)})}).then(()=>{e.call(this,this.listConfigResults)}).catch(je=>{Oe.call(this,je)})},__callServiceSync=function(Oe,e){this.listConfigResults=[];for(var t=0;t<this.listConfigUrls.length;t++){const Ge=this.listConfigUrls[t],Be=new XMLHttpRequest;if(Be.open("GET",Ge,!1),Be.send(null),Be.status===200){var ke=JSON.parse(Be.responseText);this.listConfigResults.push(ke)}}this.listConfigResults.length!==0?e.call(this,this.listConfigResults):Oe.call(this,new Error("..."))};Config$1.prototype.analyzeResponse=function(Oe,e){var t=function(Ve){for(var Ze={},Qe={},en={},tn=0;tn<Ve.length;tn++){if(!Ve[tn].generalOptions||!Ve[tn].layers)return;Qe={...Qe,...Ve[tn].generalOptions.apiKeys},Ze={...Ze,...Ve[tn].layers},en={...en,...Ve[tn].tileMatrixSets}}var an={generalOptions:{apiKeys:Qe},layers:Ze,tileMatrixSets:en};return an},ke=t(this.listConfigResults);if(!ke){Oe.call(this,new Error("configuration structure not conforme !"));return}var Ge=new ConfigInterface;Object.assign(Ge,ke);var Be=typeof window<"u"?window:{};if(Be.Gp||(Be.Gp={}),Be.Gp.Config){Object.assign(Be.Gp.Config,Ge);for(var je in Ge)Be.Gp.Config[je]=Ge[je]}else Be.Gp.Config=Ge;e.call(this,Be.Gp.Config)};function AltiRequest(Oe){if(!(this instanceof AltiRequest))throw new TypeError("AltiRequest constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiRequest ()]"),this.options=Oe||{},this.positions=this.options.positions||[],this.delimiter=this.options.delimiter||"|",this.indent=this.options.indent||!1,this.crs=this.options.crs||"CRS:84",this.format=this.options.format||"json",this.resource=this.options.resource,this.measures=this.options.measures||!1}AltiRequest.CLASSNAME="AltiRequest";AltiRequest.prototype={constructor:AltiRequest,setPositions:function(Oe){for(var e=[],t=0;t<Oe.length;t++){var ke=Oe[t];ke.lon&&ke.lat&&e.push(ke)}this.positions=e},getPositions:function(Oe){if(!Oe)return this.positions;var e=this.positions.length-1;return Oe>e||Oe<e?(this.logger.warn("index out of range !"),this.positions):this.positions[Oe]},addPositions:function(Oe){for(var e=0;e<Oe.length;e++){var t=Oe[e];t.lon&&t.lat&&this.positions.push(Oe[e])}},getLon:function(){for(var Oe=[],e=0;e<this.positions.length;e++)Oe.push(this.positions[e].lon);return this.logger.trace(Oe),Oe.join(this.delimiter)},getLat:function(){for(var Oe=[],e=0;e<this.positions.length;e++)Oe.push(this.positions[e].lat);return this.logger.trace(Oe),Oe.join(this.delimiter)}};AltiRequest.prototype.getData=function(){var Oe=[];return Oe.push({k:"lon",v:this.getLon()}),Oe.push({k:"lat",v:this.getLat()}),Oe.push({k:"delimiter",v:this.delimiter}),Oe.push({k:"indent",v:this.indent}),Oe.push({k:"crs",v:this.crs}),Oe.push({k:"format",v:this.format}),Oe};function AltiElevationRequest(Oe){if(!(this instanceof AltiElevationRequest))throw new TypeError("AltiElevationRequest constructor cannot be called as a function.");this.CLASSNAME="AltiElevationRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiElevationRequest ()]"),this.zonly=this.options.zonly||!1}AltiElevationRequest.prototype=Object.create(AltiRequest.prototype,{zonly:{get:function(){return this._zonly},set:function(Oe){this._zonly=Oe}}});AltiElevationRequest.prototype.constructor=AltiElevationRequest;AltiElevationRequest.prototype.getData=function(){var Oe=[];return Oe.push({k:"lon",v:this.getLon()}),Oe.push({k:"lat",v:this.getLat()}),Oe.push({k:"indent",v:this.indent}),Oe.push({k:"crs",v:this.crs}),Oe.push({k:"zonly",v:this.zonly}),Oe.push({k:"format",v:this.format}),Oe.push({k:"resource",v:this.resource}),Oe};function AltiProfilRequest(Oe){if(!(this instanceof AltiProfilRequest))throw new TypeError("AltiProfilRequest constructor cannot be called as a function.");this.CLASSNAME="AltiProfilRequest",AltiRequest.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur AltiProfilRequest ()]"),this.sampling=this.options.sampling||3}AltiProfilRequest.prototype=Object.create(AltiRequest.prototype,{sampling:{get:function(){return this._sampling},set:function(Oe){this._sampling=Oe}}});AltiProfilRequest.prototype.constructor=AltiProfilRequest;AltiProfilRequest.prototype.getData=function(){var Oe=[];return Oe.push({k:"lon",v:this.getLon()}),Oe.push({k:"lat",v:this.getLat()}),Oe.push({k:"indent",v:this.indent}),Oe.push({k:"crs",v:this.crs}),Oe.push({k:"sampling",v:this.sampling}),Oe.push({k:"format",v:this.format}),Oe.push({k:"resource",v:this.resource}),Oe};function AltiRequestREST(Oe){if(this.logger=LoggerByDefault$1.getLogger("AltiRequestREST"),this.logger.trace("[Constructeur AltiRequestREST ()]"),!(this instanceof AltiRequestREST))throw new TypeError("AltiRequestREST constructor cannot be called as a function.");if(this.options=Oe||{},!this.options)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!this.options.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));switch(this.DataObject=null,this.options.type){case"Elevation":this.DataObject=new AltiElevationRequest(this.options.param);break;case"Profil":this.DataObject=new AltiProfilRequest(this.options.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}this.method=this.options.method||"GET"}AltiRequestREST.prototype={requestString:null,constructor:AltiRequestREST,template:{get:{value:"lon=__LON__&lat=__LAT__&indent=__INDENT__&crs='__CRS__'&resource=__RESOURCE__&measures=__MEASURES__",input:{point:"&zonly=__ZONLY__",profil:"&sampling=__SAMPLING__"}},post:{value:`lon=__LON__
lat=__LAT__
indent=__INDENT__
crs='__CRS__'
resource='__RESOURCE__'
measures='__MEASURES__'
`,input:{point:`zonly=__ZONLY__
`,profil:"sampling=__SAMPLING__"}}},processRequestString:function(){this.logger.trace("AltiRequestREST::processRequestString ()");var Oe="";return this.method==="POST"?Oe=this.template.post.value:this.method==="GET"&&(Oe=this.template.get.value),Oe=Oe.replace(/__LON__/g,this.DataObject.getLon()),Oe=Oe.replace(/__LAT__/g,this.DataObject.getLat()),Oe=Oe.replace(/__INDENT__/g,this.DataObject.indent),Oe=Oe.replace(/__CRS__/g,this.DataObject.crs),Oe=Oe.replace(/__RESOURCE__/g,this.DataObject.resource),Oe=Oe.replace(/__MEASURES__/g,this.DataObject.measures),Oe=Oe+this.__addDataInputs(),this.logger.trace("traduction tmpl",Oe),this.requestString=Oe,this.requestString},__addDataInputs:function(){this.logger.trace("AltiRequestREST::addDataInput ()");var Oe;if(this.method==="POST")Oe=this.template.post;else if(this.method==="GET")Oe=this.template.get;else throw new Error("No other HTTP method supported by the service !");var e=null;if(this.DataObject.CLASSNAME==="AltiElevationRequest")return e=Oe.input.point,e.replace(/__ZONLY__/g,this.DataObject.zonly.toString());if(this.DataObject.CLASSNAME==="AltiProfilRequest")return e=Oe.input.profil,e.replace(/__SAMPLING__/g,this.DataObject.sampling);throw new Error("No other object supported than elevation or profil !?")}};function WPS(Oe){if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur WPS()]"),!(this instanceof WPS))throw new TypeError("WPS constructor cannot be called as a function.");if(this.options=Oe||{},this.DataObject=this.options.data,!this.DataObject)throw new TypeError("This data object is not defined !");this.paramservice=this.options.param.service||"WPS",this.paramversion=this.options.param.version||"1.0.0",this.paramidentifier=this.options.param.identifier||"gs:WPS",this.paramrawdataoutput=this.options.param.rawdataoutput||"result",this.paramrequest=this.options.param.request||"Execute",this.method=this.options.method||"GET"}WPS.prototype={requestString:null,constructor:WPS,template:{get:{value:"service=__SERVICE__&version=__VERSION__&rawdataoutput=__RAWDATAOUTPUT__&identifier=__IDENTIFIER__&request=__REQUEST__&datainputs=<!-- __DATAINPUTS__ -->",input:"__KEY__=__DATA__"},post:{value:'<?xml version="1.0" encoding="UTF-8"?><wps:__REQUEST__ version="__VERSION__" service="__SERVICE__" __NAMESPACE__ __SCHEMALOCATION__><ows:Identifier>__IDENTIFIER__</ows:Identifier><wps:DataInputs><!-- __DATAINPUTS__ --></wps:DataInputs><wps:ResponseForm><wps:RawDataOutput><ows:Identifier>__RAWDATAOUTPUT__</ows:Identifier></wps:RawDataOutput></wps:ResponseForm></wps:__REQUEST__>',input:"<wps:Input><ows:Identifier>__KEY__</ows:Identifier><wps:Data><wps:LiteralData>__DATA__</wps:LiteralData></wps:Data></wps:Input>"}},namespaceByDefault:function(){var Oe=['xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"','xmlns="http://www.opengis.net/wps/1.0.0"','xmlns:wfs="http://www.opengis.net/wfs"','xmlns:wps="http://www.opengis.net/wps/1.0.0"','xmlns:ows="http://www.opengis.net/ows/1.1"','xmlns:gml="http://www.opengis.net/gml"','xmlns:ogc="http://www.opengis.net/ogc"','xmlns:wcs="http://www.opengis.net/wcs/1.1.1"','xmlns:xlink="http://www.w3.org/1999/xlink"'];return Oe.join(" ")},schemaLocationByDefault:function(){return'xsi:schemaLocation="http://www.opengis.net/wps/1.0.0 http://schemas.opengis.net/wps/1.0.0/wpsAll.xsd"'},processRequestString:function(){this.logger.trace("WPS::processRequestString ()");var Oe="";if(this.method==="POST")Oe=this.template.post.value;else if(this.method==="GET")Oe=this.template.get.value;else return this.logger.error("No other method supported by the service !"),!1;return Oe=Oe.replace(/__SERVICE__/g,this.paramservice),Oe=Oe.replace(/__VERSION__/g,this.paramversion),Oe=Oe.replace(/__RAWDATAOUTPUT__/g,this.paramrawdataoutput),Oe=Oe.replace(/__IDENTIFIER__/g,this.paramidentifier),Oe=Oe.replace(/__REQUEST__/g,this.paramrequest),this.method==="POST"&&(Oe=Oe.replace(/__NAMESPACE__/g,this.namespaceByDefault),Oe=Oe.replace(/__SCHEMALOCATION__/g,this.schemaLocationByDefault)),Oe=Oe.replace(/<!-- __DATAINPUTS__ -->/g,this.__addDataInputs()),Oe?(this.requestString=Oe,this.logger.trace("traduction tmpl",Oe),!0):(this.logger.warn("traduction tmpl : empty request !?"),!1)},__addDataInputs:function(){this.logger.trace("WPS::__addDataInputs ()");for(var Oe=this.method==="GET"?this.template.get.input:this.template.post.input,e=this.method==="GET"?";":"",t="",ke=this,Ge=this.DataObject.getData(),Be=0;Be<Ge.length;Be++)(function(je){e&&(e=je===Ge.length-1?"":";"),t=t.concat(ke.__addDataInput(Oe,Ge[je].k,Ge[je].v),e)})(Be);return t},__addDataInput:function(Oe,e,t){var ke=Oe;return ke=ke.replace(/__KEY__/g,e),ke=ke.replace(/__DATA__/g,t),ke},setMethod:function(Oe){Oe==="GET"||Oe==="POST"?this.method=Oe:this.logger.warn("support only GET and POST method !")},getMethod:function(){return this.method}};var AltiRequestWPS={build:function(Oe){var e=LoggerByDefault$1.getLogger("AltiRequestWPS");if(e.trace(["AltiRequestWPS::build()"]),!Oe)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));if(!Oe.type)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","type (Elevation or Profil)"));var t=null;switch(Oe.type){case"Elevation":Oe.wps.identifier="gs:WPSElevation",t=new AltiElevationRequest(Oe.param);break;case"Profil":Oe.wps.identifier="gs:WPSLineElevation",t=new AltiProfilRequest(Oe.param);break;default:throw new Error(MessagesResources.getMessage("PARAM_TYPE","type (Elevation or Profil)"))}var ke={data:t,method:Oe.method,param:Oe.wps},Ge=new WPS(ke);if(!Ge.processRequestString())throw new Error("Enable to process request !");return Ge.requestString}},AltiRequestFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("AltiRequestFactory");e.trace(["AltiRequestFactory::build()"]);var t=null,ke={type:Oe.sampling?"Profil":"Elevation",method:Oe.httpMethod,param:{positions:null,delimiter:null,indent:null,crs:null,format:null,sampling:null,zonly:null,measures:null}};ke.param.positions=Oe.positions,ke.param.format=Oe.outputFormat,ke.param.sampling=Oe.sampling,ke.param.zonly=Oe.zonly,ke.param.measures=Oe.measures,ke.param.resource=Oe.resource;var Ge=Oe.onError!==null&&typeof Oe.onError=="function",Be=Oe.onSuccess!==null&&typeof Oe.onSuccess=="function",je=null;switch(Oe.api){case"REST":var Ve=new AltiRequestREST(ke);if(!Ve.processRequestString()){if(je="Error in process request (rest) !",Ge){Oe.onError.call(Oe.scope,new ErrorService(je));return}throw new Error(je)}t=Ve.requestString;break;case"WPS":if(ke.wps={service:null,version:null,identifier:null,rawdataoutput:null,request:null},t=AltiRequestWPS.build(ke),!t){if(je="Error in process request (wps) !",Ge){Oe.onError.call(Oe.scope,new ErrorService(je));return}throw new Error(je)}break;default:if(je="Type of API is not supported by service (REST or WPS) !",Ge){Oe.onError.call(Oe.scope,new ErrorService(je));return}throw new Error(je)}return Be&&Oe.onSuccess.call(Oe.scope,t),t}};function XML$1(Oe){if(!(this instanceof XML$1))throw new TypeError("XML constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur XML ()]"),this.xmlString=null,this.xmlDoc=null,this.reader=null,Oe&&(Oe.xmlString&&typeof Oe.xmlString=="string"&&(this.xmlString=Oe.xmlString,this.xmlDoc=__getXMLDOC(Oe.xmlString)),Oe.reader&&this.setReader(Oe.reader))}XML$1.prototype={constructor:XML$1,getXMLString:function(){return this.xmlString},setXMLString:function(Oe){Oe&&typeof Oe=="string"&&(this.xmlString=Oe,this.xmlDoc=__getXMLDOC(Oe))},getReader:function(){return this.reader},setReader:function(Oe){Oe&&Oe.read&&typeof Oe.read=="function"&&(this.reader=Oe)},getXMLDoc:function(){return this.xmlDoc},setXMLDoc:function(Oe){this.xmlDoc=Oe},parse:function(){if(!this.xmlDoc&&this.xmlString&&(this.xmlDoc=__getXMLDOC(this.xmlString)),this.xmlDoc){var Oe=__getRootNode(this.xmlDoc);if(Oe){var e;return this.reader&&this.reader.read?e=this.reader.read(Oe):(e={},e[Oe.nodeName]=__readDefault(Oe)),e}else return{}}}};function __getXMLDOC(Oe){if(typeof window>"u"){var e=require("@xmldom/xmldom").DOMParser;return new e().parseFromString(Oe,"text/xml")}else{var t,ke,Ge="Erreur lors du parsing de la réponse du service : XML non conforme";if(window.ActiveXObject){ke=new window.ActiveXObject("Microsoft.XMLDOM"),ke.async=!1,ke.loadXML(Oe);var Be=ke.parseError;if(Be.errorCode)throw Be.line&&Be.linepos&&(Ge+="( ligne "+Be.line+", colonne "+Be.linepos),Be.reason&&(Ge+=":  "+Be.reason+")"),new Error(Ge);return ke}else if(window.DOMParser){t=new window.DOMParser;try{ke=t.parseFromString(Oe,"text/xml")}catch(Qe){throw Qe.message==="SyntaxError"?new Error(Ge):new Error("Erreur lors du parsing de la réponse du service : "+Qe.message)}if(ke.getElementsByTagName("parsererror").length>0)for(var je=ke.getElementsByTagName("parsererror"),Ve=0;Ve<je.length;Ve++){var Ze=je[Ve].innerHTML;if(Ze.indexOf("Huge input lookup")===-1)throw Ge+="("+Ze+")",new Error(Ge)}else if(!ke.documentElement)throw new Error(Ge);return ke}else throw new Error("Incompatible DOM Parser pour ce navigateur !")}}function __getRootNode(Oe){var e;return Oe.nodeType===9?e=Oe.documentElement:Oe.nodeType===1&&(e=Oe),e}function __readDefault(Oe){var e={};if(Oe.attributes.length>0){var t=__getAttributes(Oe);e.attributes=t}if(Oe.hasChildNodes()){for(var ke={},Ge,Be=Oe.childNodes,je=0;je<Be.length;je++)if(Ge=Be[je],Ge.nodeType===3)e.textContent=Ge.nodeValue;else if(Ge.nodeType===1)if(ke=__readDefault(Ge),!e[Ge.nodeName])e[Ge.nodeName]=ke;else{if(!Array.isArray(e[Ge.nodeName])){var Ve=e[Ge.nodeName];e[Ge.nodeName]=[],e[Ge.nodeName].push(Ve)}e[Ge.nodeName].push(ke)}}return e}function __getAttributes(Oe){if(Oe.attributes.length>0){for(var e={},t=Oe.attributes,ke=0;ke<t.length;ke++){var Ge=t[ke];e[Ge.nodeName]=Ge.nodeValue}return e}}function AltiResponse(){if(!(this instanceof AltiResponse))throw new TypeError("AltiResponse constructor cannot be called as a function.");this.elevations=[]}AltiResponse.prototype={constructor:AltiResponse};function Elevation(){if(!(this instanceof Elevation))throw new TypeError("Elevation constructor cannot be called as a function.");this.z=null}Elevation.prototype={constructor:Elevation};function Measure(){if(!(this instanceof Measure))throw new TypeError("Measure constructor cannot be called as a function.");this.source_name=null,this.source_measure=null,this.z=null,this.acc=null}Measure.prototype={constructor:Measure};var AltiResponseReader={};AltiResponseReader.READERS={elevations:function(Oe){var e=new AltiResponse;if(Oe.hasChildNodes())for(var t=Oe.childNodes,ke,Ge,Be=0;Be<t.length;Be++)ke=t[Be],AltiResponseReader.READERS[ke.nodeName]&&(Ge=AltiResponseReader.READERS[ke.nodeName](ke),e.elevations.push(Ge));return e},elevation:function(Oe){var e=new Elevation;if(Oe.hasChildNodes())for(var t=Oe.childNodes,ke,Ge=0;Ge<t.length;Ge++)ke=t[Ge],AltiResponseReader.READERS[ke.nodeName]&&AltiResponseReader.READERS[ke.nodeName](ke,e);return e},lat:function(Oe,e){var t=Oe.firstChild;if(t&&t.nodeType===3)e.lat=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : latitude attendue mais absente")},lon:function(Oe,e){var t=Oe.firstChild;if(t&&t.nodeType===3)e.lon=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : longitude attendue mais absente")},z:function(Oe,e){var t=Oe.firstChild;if(t&&t.nodeType===3)if(e)e.z=parseFloat(t.nodeValue);else return e=new Elevation,e.z=parseFloat(t.nodeValue),e;else throw new Error("Erreur dans la lecture de la réponse du service : altitude attendue mais absente")},acc:function(Oe,e){var t=Oe.firstChild;if(t&&t.nodeType===3)e.acc=parseFloat(t.nodeValue);else throw new Error("Erreur dans la lecture de la réponse du service : précision (acc) attendue mais absente")},source_name:function(Oe,e){var t=Oe.firstChild;if(t&&t.nodeType===3)e.source_name=t.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_name attendue mais absente")},source_measure:function(Oe,e){var t=Oe.firstChild;if(t&&t.nodeType===3)e.source_measure=t.nodeValue;else throw new Error("Erreur dans la lecture de la réponse du service : source_measure attendue mais absente")},measures:function(Oe,e){e.measures=[];var t;if(Oe.hasChildNodes())for(var ke=Oe.childNodes,Ge,Be,je=0;je<ke.length;je++){t=new Measure,Ge=ke[je],Be=Ge.childNodes;for(var Ve=0;Ve<Be.length;Ve++)if(AltiResponseReader.READERS[Be[Ve].nodeName])AltiResponseReader.READERS[Be[Ve].nodeName](Be[Ve],t);else throw new Error("Erreur dans la lecture de la réponse du service : measures attendues mais absentes");e.measures.push(t)}},exceptionreport:function(Oe){var e={};if(Oe.hasChildNodes())for(var t=Oe.childNodes,ke,Ge=0;Ge<t.length;Ge++)ke=t[Ge],ke.nodeName==="Exception"&&(e.exceptionReport=AltiResponseReader.READERS.exception(ke));return e},exception:function(Oe){var e={},t=Oe.getAttribute("exceptionCode");t&&(e.exceptionCode=t);var ke=Oe.firstChild;return ke&&ke.nodeType===3&&(e.exception=ke.nodeValue),e},error:function(Oe){var e={error:{}};if(Oe.hasChildNodes())for(var t=Oe.childNodes,ke,Ge=0;Ge<t.length;Ge++){ke=t[Ge];var Be;ke.nodeType===1&&ke.nodeName==="code"&&(Be=ke.firstChild,Be&&Be.nodeType===3&&(e.error.code=Be.nodeValue)),ke.nodeType===1&&ke.nodeName==="description"&&(Be=ke.firstChild,Be&&Be.nodeType===3&&(e.error.description=Be.nodeValue))}return e}};AltiResponseReader.read=function(Oe){if(Oe.nodeName==="elevations"){var e=AltiResponseReader.READERS.elevations(Oe);return e}else if(Oe.nodeName==="ExceptionReport"){var t=AltiResponseReader.READERS.exceptionreport(Oe);return t}else if(Oe.nodeName==="error"){var ke=AltiResponseReader.READERS.error(Oe);return ke}else throw new Error("Erreur lors de la lecture de la réponse : elle n'est pas au format attendu.")};var AltiResponseFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("AltiResponseFactory");e.trace(["AltiResponseFactory::build()"]);var t=null;if(Oe.response)if(Oe.rawResponse)e.trace("analyze response : raw"),t=Oe.response;else{switch(Oe.outputFormat){case"xml":e.trace("analyze response : xml");try{var ke=new XML$1({reader:AltiResponseReader});if(typeof Oe.response=="string"?ke.setXMLString(Oe.response):ke.setXMLDoc(Oe.response),t=ke.parse(),!t)throw new Error(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2"))}catch(tn){var Ge=tn.message;Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Ge),status:200,type:ErrorService.TYPE_SRVERR}));return}break;case"json":e.trace("analyze response : json"),e.trace("analyze response : ",typeof Oe.response);var Be=null;if(typeof Oe.response=="string"?Be=JSON.parse(Oe.response):Be=Oe.response,Be&&Be.error){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",Be.error.description),status:200,type:ErrorService.TYPE_SRVERR}));return}if(Be){var je=Be.elevations,Ve=new AltiResponse,Ze;if(Array.isArray(je)&&je.length)for(var Qe=0;Qe<je.length;Qe++)Ze=new Elevation,typeof je[Qe]=="object"?(je[Qe].lon&&(Ze.lon=je[Qe].lon),je[Qe].lat&&(Ze.lat=je[Qe].lat),je[Qe].z&&(Ze.z=je[Qe].z),je[Qe].acc&&(Ze.acc=je[Qe].acc),je[Qe].measures&&(Ze.measures=je[Qe].measures)):typeof je[Qe]=="number"&&(Ze.z=je[Qe]),Array.isArray(Ve.elevations)&&Ve.elevations.push(Ze);t=Ve}if(!t){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}break;default:Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}else if(t.error){var en=t.error.description;Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",en),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Oe.onSuccess.call(Oe.scope,t)}};function Alti(Oe){if(!(this instanceof Alti))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Alti"));if(this.CLASSNAME="Alti",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Alti"),this.logger.trace("[Constructeur Alti (options)]"),!Oe.positions)throw new Error(MessagesResources.getMessage("PARAM_MISSING","positions"));if(Oe.positions.length===0)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","positions"));if(this.options.positions=Oe.positions,this.options.outputFormat=typeof Oe.outputFormat=="string"?Oe.outputFormat.toLowerCase():"xml",this.options.resource=Oe.resource||"ign_rge_alti_wld",this.options.sampling=Oe.sampling||null,this.options.api=typeof Oe.api=="string"?Oe.api.toUpperCase():"REST",this.options.api==="REST"&&(this.options.httpMethod="GET"),this.options.zonly=Oe.zonly||!1,this.options.measures=Oe.measures||!1,!this.options.serverUrl){var e=DefaultUrlService.Alti.newUrl(),t=null;switch(this.options.api){case"WPS":t=e.wps;break;case"REST":var ke=(Oe.sampling?"profil":"elevation")+"-"+this.options.outputFormat;t=e[ke];break;default:throw new Error(MessagesResources.getMessage("PARAM_UNKNOWN","api"))}if(!t)throw new Error("Url by default not found !");this.options.serverUrl=t,this.logger.trace("Server URL by default : "+this.options.serverUrl)}var Ge=this.options.serverUrl.lastIndexOf(".");if(Ge!==-1){var Be=this.options.serverUrl.substring(Ge+1);if(Be&&Be.length<5)switch(this.logger.trace("Server Extension URL : "+Be),Be.toLowerCase()){case"json":case"xml":this.options.outputFormat=Be.toLowerCase();break;default:throw new Error("type of service : unknown or unsupported (json or xml) !")}}}Alti.prototype=Object.create(CommonService.prototype,{});Alti.prototype.constructor=Alti;Alti.prototype.buildRequest=function(Oe,e){var t={httpMethod:this.options.httpMethod,onSuccess:function(ke){this.request=ke,e.call(this,this.request)},onError:Oe,scope:this,resource:this.options.resource,positions:this.options.positions,outputFormat:this.options.outputFormat,sampling:this.options.sampling,api:this.options.api,zonly:this.options.zonly,measures:this.options.measures};AltiRequestFactory.build(t)};Alti.prototype.analyzeResponse=function(Oe,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:Oe,onSuccess:e,scope:this};AltiResponseFactory.build(t)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function GeocodeParamREST(Oe){if(!(this instanceof GeocodeParamREST))throw new TypeError("GeocodeParamREST constructor cannot be called as a function.");if(this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur GeocodeParamREST ()]"),this.options=Oe||{},!this.options.geocodeMethod||this.options.geocodeMethod!=="search"&&this.options.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");this.geocodeMethod=this.options.geocodeMethod,this.query=typeof this.options<"u"?this.options.query:null,this.searchGeometry=this.options.searchGeometry||null,this.index=this.options.index||null,this.lon=this.options.position&&this.options.position.lon?this.options.position.lon:null,this.lat=this.options.position&&this.options.position.lat?this.options.position.lat:null,this.maxResp=this.options.maxResp||null,this.returnTrueGeometry=this.options.returnTrueGeometry||null,this.filters=this.options.filters||{}}GeocodeParamREST.CLASSNAME="GeocodeParamREST";GeocodeParamREST.prototype={constructor:GeocodeParamREST,getFilters:function(){var Oe={};for(var e in this.filters)this.filters.hasOwnProperty(e)&&(Oe[e]=this.filters[e]);return Oe},getIndex:function(){return this.index===void 0?null:this.index==="StreetAddress"?"address":this.index==="CadastralParcel"?"parcel":this.index==="PositionOfInterest"?"poi":this.index==="location"?"location":this.index},getSearchGeometry:function(){return JSON.stringify(this.searchGeometry)}};GeocodeParamREST.prototype.getParams=function(){var Oe=[];this.geocodeMethod==="search"&&Oe.push({k:"q",v:this.query}),this.index&&Oe.push({k:"index",v:this.getIndex()}),this.geocodeMethod==="reverse"&&this.searchGeometry&&Oe.push({k:"searchgeom",v:this.getSearchGeometry()}),this.lon&&this.lat&&(Oe.push({k:"lon",v:this.lon}),Oe.push({k:"lat",v:this.lat})),this.maxResp&&Oe.push({k:"limit",v:this.maxResp}),this.returnTrueGeometry&&Oe.push({k:"returntruegeometry",v:this.returnTrueGeometry});const e=this.getFilters();for(var t in e)Oe.push({k:t,v:e[t]});return Oe};function GeocodeRequestREST(Oe){if(this.logger=LoggerByDefault$1.getLogger("GeocodeRequestREST"),this.logger.trace("[Constructeur GeocodeRequestREST ()]"),!(this instanceof GeocodeRequestREST))throw new TypeError("GeocodeRequestREST constructor cannot be called as a function.");if(!Oe)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Oe}GeocodeRequestREST.prototype={requestString:null,constructor:GeocodeRequestREST,processRequestString:function(){var Oe="";const t=new GeocodeParamREST(this.settings).getParams();for(var ke=0;ke<t.length;ke++){var Ge=t[ke];Oe&&(Oe+="&"),Oe+=Ge.k+"="+Ge.v}if(!this.settings.geocodeMethod||this.settings.geocodeMethod!=="search"&&this.settings.geocodeMethod!=="reverse")throw new Error("Error geocodeMethod not valid");return this.requestString="?"+Oe,this.logger.trace(this.requestString),this.requestString}};var GeocodeRequestFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("GeocodeRequestFactory");e.trace(["GeocodeRequestFactory::build()"]);var t=Oe||{},ke=new GeocodeRequestREST(t);if(!ke.processRequestString())throw new Error("Error process request (rest) !");var Ge=ke.requestString;return e.trace(Ge),Ge}};function GeocodeResponse(){if(!(this instanceof GeocodeResponse))throw new TypeError("GeocodeResponse constructor cannot be called as a function.");this.locations=[]}GeocodeResponse.prototype={constructor:GeocodeResponse};function GeocodedLocation(){if(!(this instanceof GeocodedLocation))throw new TypeError("GeocodedLocation constructor cannot be called as a function.");this.position=null,this.matchType=null,this.placeAttributes={},this.type=null,this.accuracy=null,this.CLASSNAME="GeocodedLocation"}GeocodedLocation.prototype={constructor:GeocodedLocation};function GeocodeResponseParser(){if(!(this instanceof GeocodeResponseParser))throw new TypeError("GeocodeResponseParser constructor cannot be called as a function.")}GeocodeResponseParser.prototype={constructor:GeocodeResponseParser,parse:function(Oe){var e=new GeocodeResponse;const t=JSON.parse(Oe);if(t.type==="FeatureCollection")for(var ke=0;ke<t.features.length;++ke)_parseFeature(t.features[ke],e);else if(t.type==="Feature")_parseFeature(t,e);else{if(t.type==="SERVICE_ERROR")return _parseError(t);var Ge=MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t.type);throw new ErrorService({message:Ge,type:ErrorService.TYPE_UNKERR,status:200})}return e}};function _parseFeature(Oe,e){var t=new GeocodedLocation;if(Oe.geometry&&Oe.geometry.type==="Point"&&(t.position={lon:Oe.geometry.coordinates[0],lat:Oe.geometry.coordinates[1]}),Oe.properties){for(var ke in Oe.properties)ke==="score"?t.accuracy=Oe.properties[ke]:ke==="_type"?Oe.properties[ke]==="address"?t.type="StreetAddress":Oe.properties[ke]==="poi"?t.type="PositionOfInterest":(Oe.properties[ke]==="parcel"||Oe.properties[ke]==="cadastral")&&(t.type="CadastralParcel"):t.placeAttributes[ke]=Oe.properties[ke];Oe.properties._type==="address"&&(t.matchType=Oe.properties.number!==void 0&&Oe.properties.number!==null?"street number":"street")}e.locations.push(t)}function _parseError(Oe){return{exceptionReport:Oe}}var GeocodeReponseFactory={build:function(Oe){var e=null;if(Oe.response)if(Oe.rawResponse)e=Oe.response;else{try{if(e=new GeocodeResponseParser().parse(Oe.response),!e)throw new Error("L'analyse de la réponse du service !?")}catch(ke){var t=ke.message;typeof Oe.response=="string"?t+="('"+Oe.response+"')":t+="('"+Oe.response.documentElement.innerHTML+"')",Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",t),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(e.exceptionReport){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",e.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY"),type:ErrorService.TYPE_SRVERR,status:-1}));return}Oe.onSuccess.call(Oe.scope,e)}};function Geocode(Oe){if(!(this instanceof Geocode))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Geocode"));this.CLASSNAME="Geocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.Geocode"),this.logger.trace("[Constructeur Geocode (options)]");var e=this.patchOptionConvertor(Oe);if(e.serverUrl||(e.serverUrl=DefaultUrlService.Geocode.newUrl()),CommonService.apply(this,[e]),!e.hasOwnProperty("query"))throw new Error(MessagesResources.getMessage("PARAM_MISSING","query"));if(this.options.query=e.query,e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),ke=0;ke<t.length;ke++){var Ge=t[ke];(typeof e.filters[Ge]>"u"||typeof e.filters[Ge]=="object"&&Object.keys(e.filters[Ge]).length===0||typeof e.filters[Ge]=="string"&&e.filters[Ge].length===0||Array.isArray(e.filters[Ge])&&e.filters[Ge].length===0)&&delete this.options.filters[Ge]}this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}Geocode.prototype=Object.create(CommonService.prototype,{});Geocode.prototype.constructor=Geocode;Geocode.prototype.patchOptionConvertor=function(Oe){const e=Oe;return e.hasOwnProperty("location")&&(this.logger.warn("The parameter 'location' is deprecated"),e.query||(e.query=e.location),delete e.location),e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filters||(e.filters=e.filterOptions,e.filters.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filters.type)&&e.filters.type.length>0?e.index=e.filters.type[0]:e.index=e.filters.type),delete e.filters.type),e.filters.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),delete e.filters.bbox)),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.returnFreeForm&&(this.logger.warn("The parameter 'returnFreeForm' is deprecated"),delete e.returnFreeForm),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};Geocode.prototype.buildRequest=function(Oe,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"search",query:this.options.query,index:this.options.index,returnTrueGeometry:this.options.returnTrueGeometry,position:this.options.position,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Geocode.prototype.analyzeResponse=function(Oe,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:Oe,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ReverseGeocode$1(Oe){if(!(this instanceof ReverseGeocode$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ReverseGeocode"));this.CLASSNAME="ReverseGeocode",this.logger=LoggerByDefault$1.getLogger("Gp.Services.ReverseGeocode"),this.logger.trace("[Constructeur ReverseGeocode (options)]");var e=this.patchOptionConvertor(Oe);if(e.serverUrl||(e.serverUrl=DefaultUrlService.ReverseGeocode.newUrl()),CommonService.apply(this,[e]),e.searchGeometry)this.options.searchGeometry=e.searchGeometry;else if(!e.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","searchGeometry"));if(e.index||(this.options.index=e.index="StreetAddress"),e.filters)for(var t=Object.keys(e.filters),ke=0;ke<t.length;ke++){var Ge=t[ke];(typeof e.filters[Ge]>"u"||typeof e.filters[Ge]=="object"&&Object.keys(e.filters[Ge]).length===0||typeof e.filters[Ge]=="string"&&e.filters[Ge].length===0||Array.isArray(e.filters[Ge])&&e.filters[Ge].length===0)&&delete this.options.filters[Ge]}this.options.position=e.position,this.options.index=e.index||"StreetAddress",this.options.maximumResponses=e.maximumResponses||20}ReverseGeocode$1.prototype=Object.create(CommonService.prototype,{});ReverseGeocode$1.prototype.constructor=ReverseGeocode$1;ReverseGeocode$1.prototype.patchOptionConvertor=function(Oe){var e=Oe;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.index||(Array.isArray(e.filterOptions.type)&&e.filterOptions.type.length>0?e.index=e.filterOptions.type[0]:e.index=e.filterOptions.type),delete e.filterOptions.type),e.filterOptions.bbox&&(this.logger.warn("The parameter 'filterOptions.bbox' is deprecated"),e.searchGeometry||(e.searchGeometry=this.bbox2Json(e.filterOptions.bbox)),delete e.filterOptions.bbox),e.filterOptions.circle&&(this.logger.warn("The parameter 'filterOptions.circle' is deprecated"),e.searchGeometry||(e.searchGeometry=this.circle2Json(e.filterOptions.circle)),delete e.filterOptions.circle),e.filterOptions.polygon&&(this.logger.warn("The parameter 'filterOptions.polygon' is deprecated"),e.searchGeometry||(e.searchGeometry=this.polygon2Json(e.filterOptions.polygon)),delete e.filterOptions.polygon),!e.filters&&Object.keys(e.filterOptions).length>0&&(e.filters=e.filterOptions),delete e.filterOptions),e.position&&(e.position.x&&(this.logger.warn("The parameter 'position.x' is deprecated"),e.position.lon||(e.position.lon=e.position.x),delete e.position.x),e.position.y&&(this.logger.warn("The parameter 'position.y' is deprecated"),e.position.lat||(e.position.lat=e.position.y),delete e.position.y)),e.srs&&(this.logger.warn("The parameter 'srs' is deprecated"),delete e.srs),e};ReverseGeocode$1.prototype.buildRequest=function(Oe,e){var t={httpMethod:this.options.httpMethod,geocodeMethod:"reverse",searchGeometry:this.options.searchGeometry,index:this.options.index,position:this.options.position,returnTrueGeometry:this.options.returnTrueGeometry,maxResp:this.options.maximumResponses,filters:this.options.filters};this.request=GeocodeRequestFactory.build(t),this.request?e.call(this,this.request):Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};ReverseGeocode$1.prototype.analyzeResponse=function(Oe,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onError:Oe,onSuccess:e,scope:this};GeocodeReponseFactory.build(t)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};ReverseGeocode$1.prototype.bbox2Json=function(Oe){return{type:"Polygon",coordinates:[[[Oe.left,Oe.top],[Oe.right,Oe.top],[Oe.right,Oe.bottom],[Oe.left,Oe.bottom],[Oe.left,Oe.top]]]}};ReverseGeocode$1.prototype.circle2Json=function(Oe){return{type:"Circle",radius:Oe.radius,coordinates:[Oe.x,Oe.y]}};ReverseGeocode$1.prototype.polygon2Json=function(Oe){for(var e={type:"Polygon",coordinates:[[]]},t=0;t<Oe.length;++t)e.coordinates[0].push([Oe[t].x,Oe[t].y]);return e};ReverseGeocode$1.geoEPSG=["EPSG:4326"];function AutoCompleteResponse(){if(!(this instanceof AutoCompleteResponse))throw new TypeError("AutoCompleteResponse constructor cannot be called as a function.");this.suggestedLocations=[]}AutoCompleteResponse.prototype={constructor:AutoCompleteResponse};function SuggestedLocation(){if(!(this instanceof SuggestedLocation))throw new TypeError("SuggestedLocation constructor cannot be called as a function.");this.type=null,this.position={x:null,y:null},this.commune=null,this.fullText=null,this.postalCode=null,this.classification=null,this.street=null,this.poi=null,this.kind=null}SuggestedLocation.prototype={constructor:SuggestedLocation};var AutoCompleteResponseFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("AutoCompleteResponseFactory");e.trace(["AutoCompleteResponseFactory::build()"]);var t=null;if(Oe.response)if(Oe.rawResponse)e.trace("analyze response : raw"),t=Oe.response;else{var ke=null;if(typeof Oe.response=="string"?ke=JSON.parse(Oe.response):ke=Oe.response,ke){if(ke.error){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",ke.error.description),status:ke.error.code,type:ErrorService.TYPE_SRVERR}));return}if(t=new AutoCompleteResponse,ke.results&&Array.isArray(ke.results))for(var Ge=null,Be=0;Be<ke.results.length;Be++){var je=ke.results[Be];Ge=new SuggestedLocation,je&&(je.country==="StreetAddress"?(Ge.street=je.street,Ge.type="StreetAddress"):je.country==="PositionOfInterest"&&(Ge.poi=je.street,Ge.type="PositionOfInterest",Ge.poiType=je.poiType),Ge.position&&(Ge.position.x=je.x,Ge.position.y=je.y),Ge.kind=je.kind,Ge.commune=je.city,Ge.fullText=je.fulltext,Ge.postalCode=je.zipcode,Ge.classification=je.classification),t.suggestedLocations.push(Ge)}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}if(!t.suggestedLocations.length){Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_FORMAT_3")));return}}if(!t){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE_2"),type:ErrorService.TYPE_UNKERR,status:-1}));return}if(t.exceptionReport){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Oe.onSuccess.call(Oe.scope,t)}};function AutoComplete(Oe){if(!(this instanceof AutoComplete))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","AutoComplete"));this.CLASSNAME="AutoComplete",this.logger=LoggerByDefault$1.getLogger("Gp.Services.AutoComplete"),this.logger.trace("[Constructeur AutoComplete (options)]");var e=this.patchOptionConvertor(Oe);if(e.serverUrl||(e.serverUrl=DefaultUrlService.AutoComplete.newUrl()),CommonService.apply(this,arguments),!e.text)throw new Error(MessagesResources.getMessage("PARAM_MISSING","text"));this.options.text=e.text,e.type||(e.type=["StreetAddress,PositionOfInterest"]),this.options.type=e.type,this.options.territory=e.terr||"",this.options.maximumResponses=e.maximumResponses||10,this.options.protocol==="XHR"&&this.options.httpMethod==="POST"&&(this.logger.warn("Le service ne gére pas le mode d'interrogation en POST, on bascule sur du GET !"),this.options.httpMethod="GET"),this.options.outputFormat=this.options.rawResponse?"":"json"}AutoComplete.prototype=Object.create(CommonService.prototype,{});AutoComplete.prototype.constructor=AutoComplete;AutoComplete.prototype.patchOptionConvertor=function(Oe){const e=Oe;return e.filterOptions&&(this.logger.warn("The parameter 'filterOptions' is deprecated"),e.filterOptions.type&&(this.logger.warn("The parameter 'filterOptions.type' is deprecated"),e.type||(e.type=e.filterOptions.type)),e.filterOptions.territory&&(this.logger.warn("The parameter 'filterOptions.territory' is deprecated"),e.terr||(e.terr=e.filterOptions.territory)),delete e.filterOptions),e};AutoComplete.prototype.buildRequest=function(Oe,e){var t="";this.options.territory&&(t=this.options.territory);var ke="";this.options.type&&(ke=this.options.type.join(",")),this.request=Helper$1.normalyzeParameters({text:encodeURIComponent(this.options.text),type:ke,terr:t,maximumResponses:this.options.maximumResponses}),this.request?e.call(this,this.request):Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};AutoComplete.prototype.analyzeResponse=function(Oe,e){if(this.response){var t={response:this.response,rawResponse:this.options.rawResponse,onSuccess:e,onError:Oe,scope:this};AutoCompleteResponseFactory.build(t)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function RouteParamREST(Oe){if(!(this instanceof RouteParamREST))throw new TypeError("RouteParamREST constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur RouteParamREST ()]"),this.options=Oe||{},this.resource=this.options.resource,this.start=this.options.startPoint.x+","+this.options.startPoint.y,this.end=this.options.endPoint.x+","+this.options.endPoint.y,this.intermediates=this.options.viaPoints,this.profile=this.options.graph,this.crs=this.options.srs,this.constraints=this.options.constraints,this.optimization=this.options.routePreference,this.getSteps=this.options.geometryInInstructions?"true":"false",this.distanceUnit=this.options.distanceUnit,this.timeUnit=this.options.timeUnit,this.waysAttributes=this.options.waysAttributes}RouteParamREST.CLASSNAME="RouteParamREST";RouteParamREST.prototype={constructor:RouteParamREST,getIntermediates:function(){var Oe=[];if(this.intermediates.length!==0)for(var e=0;e<this.intermediates.length;e++){var t=this.intermediates[e];Oe.push(t.x+","+t.y)}return Oe.join("|")},getWaysAttributes:function(){return this.waysAttributes.join("|")},getProfile:function(){return this.profile},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getOptimization:function(){return this.optimization?this.optimization:""},getConstraints:function(){var Oe=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)Oe.push(JSON.stringify(this.constraints[e]));return Oe.join("|")}};RouteParamREST.prototype.getParams=function(){var Oe=[];return Oe.push({k:"resource",v:this.resource}),Oe.push({k:"start",v:this.start}),Oe.push({k:"end",v:this.end}),Oe.push({k:"geometryFormat",v:"geojson"}),this.optimization&&Oe.push({k:"optimization",v:this.getOptimization()}),this.intermediates&&Oe.push({k:"intermediates",v:this.getIntermediates()}),this.profile&&Oe.push({k:"profile",v:this.getProfile()}),this.constraints&&Oe.push({k:"constraints",v:this.getConstraints()}),this.crs&&Oe.push({k:"crs",v:this.crs}),this.distanceUnit&&Oe.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.timeUnit&&Oe.push({k:"timeUnit",v:this.timeUnit}),this.waysAttributes&&Oe.push({k:"waysAttributes",v:this.getWaysAttributes()}),Oe};function RouteRequestREST(Oe){if(this.logger=LoggerByDefault$1.getLogger("RouteRequestREST"),this.logger.trace("[Constructeur RouteRequestREST ()]"),!(this instanceof RouteRequestREST))throw new TypeError("RouteRequestREST constructor cannot be called as a function.");if(!Oe)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Oe}RouteRequestREST.prototype={requestString:null,constructor:RouteRequestREST,processRequestString:function(){this.logger.warn(" PROTOTYPE !");for(var Oe=new RouteParamREST(this.settings),e=Oe.getParams(),t="",ke=0;ke<e.length;ke++){var Ge=e[ke];t&&(t+="&"),t+=Ge.k+"="+Ge.v}return this.logger.trace(t),this.requestString=t,this.requestString}};var RouteRequestFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("RouteRequestFactory");e.trace(["RouteRequestFactory::build()"]);var t=null,ke=Oe||{},Ge=Oe.onError!==null&&typeof Oe.onError=="function",Be=null,je=new RouteRequestREST(ke);if(!je.processRequestString()){if(Be="Error process request (rest) !",Ge){Oe.onError.call(Oe.scope,new ErrorService(Be));return}throw new Error(Be)}return t=je.requestString,t}};function RouteResponse(){if(!(this instanceof RouteResponse))throw new TypeError("RouteResponse constructor cannot be called as a function.");this.totalTime=null,this.totalDistance=null,this.bbox={left:null,right:null,top:null,bottom:null},this.routeGeometry=null,this.routeInstructions=[]}RouteResponse.prototype={constructor:RouteResponse};function RouteInstruction(){if(!(this instanceof RouteInstruction))throw new TypeError("RouteInstruction constructor cannot be called as a function.");this.duration=null,this.distance=null,this.code=null,this.instruction=null,this.geometry=null}RouteInstruction.prototype={constructor:RouteInstruction};var RouteResponseFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("RouteResponseFactory");e.trace("RouteResponseFactory::build()");var t=null;if(Oe.response)if(Oe.rawResponse)e.trace("analyze response : raw"),t=Oe.response;else{e.trace("analyze response : json");var ke;if(typeof Oe.response=="string"?ke=JSON.parse(Oe.response):ke=Oe.response,ke){if(ke.message){Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",ke.message)));return}var Ge=[],Be=[],je=[];if(t=new RouteResponse,t.hasOwnProperty("totalTime")&&(t.totalTime=parseFloat(ke.duration)),t.hasOwnProperty("totalDistance")&&(t.totalDistance=parseFloat(ke.distance)),t.hasOwnProperty("bbox")&&(t.bbox.left=parseFloat(ke.bbox[0]),t.bbox.bottom=parseFloat(ke.bbox[1]),t.bbox.right=parseFloat(ke.bbox[2]),t.bbox.top=parseFloat(ke.bbox[3])),t.hasOwnProperty("routeGeometry")&&!Oe.geometryInInstructions&&(t.routeGeometry=ke.geometry),t.hasOwnProperty("routeInstructions")&&Oe.geometryInInstructions){var Ve=ke.portions,Ze;if(Array.isArray(Ve)&&Ve.length)for(Ze=0;Ze<Ve.length;Ze++)Ge.push(Ve[Ze]);if(Ge.length)for(Ze=0;Ze<Ge.length;Ze++)Be.push(Ge[Ze].steps);if(Be.length)for(Ze=0;Ze<Be.length;Ze++)je=je.concat(Be[Ze]);je.forEach(function(Qe){switch(t.routeInstructions.push(new RouteInstruction),t.routeInstructions[t.routeInstructions.length-1].duration=Qe.duration,t.routeInstructions[t.routeInstructions.length-1].distance=Qe.distance,t.routeInstructions[t.routeInstructions.length-1].code="",t.routeInstructions[t.routeInstructions.length-1].instruction="",t.routeInstructions[t.routeInstructions.length-1].geometry=Qe.geometry,Qe.name==="Valeur non renseignée"&&(Qe.name=""),Qe.instruction.type){case"turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Tourner";break;case"new name":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer tout droit";break;case"depart":t.routeInstructions[t.routeInstructions.length-1].instruction+="Départ";break;case"arrive":t.routeInstructions[t.routeInstructions.length-1].instruction+="Arrivée";break;case"merge":t.routeInstructions[t.routeInstructions.length-1].instruction+="Rejoindre";break;case"ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"on ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la bretelle";break;case"off ramp":t.routeInstructions[t.routeInstructions.length-1].instruction+="Prendre la sortie";break;case"fork":t.routeInstructions[t.routeInstructions.length-1].instruction+="Sur la bifurcation, prendre";break;case"end of road":t.routeInstructions[t.routeInstructions.length-1].instruction+="À la fin de la route, prendre";break;case"use lane":t.routeInstructions[t.routeInstructions.length-1].instruction+="Utiliser la file";break;case"continue":t.routeInstructions[t.routeInstructions.length-1].instruction+="Continuer";break;case"roundabout":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"rotary":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond-point";break;case"roundabout turn":t.routeInstructions[t.routeInstructions.length-1].instruction+="Au rond point, tourner";break;case"notification":t.routeInstructions[t.routeInstructions.length-1].instruction+="";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+="?"+Qe.instruction.type+"?";break}if(Qe.instruction.modifier)switch(Qe.instruction.modifier){case"uturn":t.routeInstructions[t.routeInstructions.length-1].instruction="Faire demi-tour";break;case"sharp right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" complètement à droite";break;case"right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" à droite";break;case"slight right":t.routeInstructions[t.routeInstructions.length-1].instruction+=" légèrement à droite";break;case"straight":t.routeInstructions[t.routeInstructions.length-1].instruction="Continuer tout droit";break;case"slight left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" lègèrement à gauche";break;case"left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" à gauche";break;case"sharp left":t.routeInstructions[t.routeInstructions.length-1].instruction+=" complètement à gauche";break;default:t.routeInstructions[t.routeInstructions.length-1].instruction+=" ?"+Qe.instruction.modifier+"?";break}Qe.instruction.exit&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=`${Qe.instruction.exit}e sortie`),Qe.attributes.name&&((Qe.attributes.name.nom_1_droite||Qe.attributes.name.toponyme)&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=" sur"),Qe.attributes.name.nom_1_droite&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${Qe.attributes.name.nom_1_droite}`),Qe.attributes.name.toponyme&&(t.routeInstructions[t.routeInstructions.length-1].instruction+=` ${Qe.attributes.name.toponyme}`))})}}if(!t){Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE","json")));return}if(t.exceptionReport){Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION_2")));return}}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Oe.onSuccess.call(Oe.scope,t)}};function Route$1(Oe){if(!(this instanceof Route$1))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","Route"));if(this.CLASSNAME="Route",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.Route"),this.logger.trace("[Constructeur Route (options)]"),!Oe.startPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint"));if(Oe.startPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.x"));if(Oe.startPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","startPoint.y"));if(!Oe.endPoint)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint"));if(Oe.endPoint.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.x"));if(Oe.endPoint.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","endPoint.y"));if(Oe.outputFormat&&Oe.outputFormat!=="json"&&this.logger.warn("options.outputFormat could only be json"),this.options.outputFormat="json",this.options.resource=Oe.resource||"bdtopo-osrm",this.options.startPoint=Oe.startPoint,this.options.endPoint=Oe.endPoint,this.options.viaPoints=Oe.viaPoints||[],this.options.routePreference=Oe.routePreference||"fastest",Oe.graph?(Oe.graph==="Voiture"&&(this.options.graph="car"),Oe.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],Oe.constraints)if(Array.isArray(Oe.constraints))for(var e=0;e<Oe.constraints.length;e++)this.options.constraints.push(Oe.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},ke={},Ge={};if(Oe.exclusions&&Oe.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Be=0;Be<Oe.exclusions.length;Be++){if(typeof Oe.exclusions[Be]=="string")Oe.exclusions[Be]=Oe.exclusions[Be].toLowerCase();else continue;Oe.exclusions[Be]==="toll"&&(Ge.constraintType="banned",Ge.key="wayType",Ge.operator="=",Ge.value="autoroute",this.options.constraints.push(Ge)),Oe.exclusions[Be]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),Oe.exclusions[Be]==="bridge"&&(ke.constraintType="banned",ke.key="wayType",ke.operator="=",ke.value="pont",this.options.constraints.push(ke))}}if(this.options.geometryInInstructions=Oe.geometryInInstructions||!1,this.options.provideBbox=Oe.provideBbox||!0,this.options.distanceUnit=Oe.distanceUnit||"m",this.options.timeUnit=Oe.timeUnit||"second",this.options.expectedStartTime=null,this.options.srs=Oe.srs||"EPSG:4326",this.options.waysAttributes=Oe.waysAttributes||[],!this.options.serverUrl){var je=DefaultUrlService.Route.newUrl();if(!je)throw new Error("Url by default not found !");this.options.serverUrl=je,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}Route$1.prototype=Object.create(CommonService.prototype,{});Route$1.prototype.constructor=Route$1;Route$1.prototype.buildRequest=function(Oe,e){var t={resource:this.options.resource,startPoint:this.options.startPoint,endPoint:this.options.endPoint,viaPoints:this.options.viaPoints,provideBbox:this.options.provideBbox,constraints:this.options.constraints,distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,graph:this.options.graph,geometryInInstructions:this.options.geometryInInstructions,routePreference:this.options.routePreference,srs:this.options.srs,waysAttributes:this.options.waysAttributes};this.request=RouteRequestFactory.build(t),this.request?e.call(this,this.request):Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_REQUEST_BUILD")))};Route$1.prototype.analyzeResponse=function(Oe,e){if(this.response){var t={distanceUnit:this.options.distanceUnit,timeUnit:this.options.timeUnit,response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onError:Oe,onSuccess:e,scope:this,geometryInInstructions:this.options.geometryInInstructions};RouteResponseFactory.build(t)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};function ProcessIsoCurveParam(Oe){if(!(this instanceof ProcessIsoCurveParam))throw new TypeError("ProcessIsoCurveParam constructor cannot be called as a function.");this.logger=LoggerByDefault$1.getLogger(),this.logger.trace("[Constructeur ProcessIsoCurveParam ()]"),this.options=Oe||{},this.id=this.options.id,this.resource=this.options.resource,this.point=this.options.position,this.crs=this.options.srs,this.profile=this.options.graph,this.constraints=this.options.constraints,this.reverse=this.options.reverse,this.timeUnit=this.options.timeUnit,this.distanceUnit=this.options.distanceUnit,this.options.method==="distance"?(this.costType="distance",this.costValue=this.options.distance,this.distanceUnit==="m"&&this.costValue>=5e4&&(this.distanceUnit="km",this.costValue/=1e3)):(this.costType="time",this.costValue=this.options.time)}ProcessIsoCurveParam.CLASSNAME="ProcessIsoCurveParam";ProcessIsoCurveParam.prototype={constructor:ProcessIsoCurveParam,getLocation:function(){return this.point.x+","+this.point.y},getDistanceUnit:function(){return this.distanceUnit==="m"?"meter":this.distanceUnit==="km"?"kilometer":""},getConstraints:function(){var Oe=[];if(this.constraints.length!==0)for(var e=0;e<this.constraints.length;e++)Oe.push(JSON.stringify(this.constraints[e]));return Oe.join("|")},getDirection:function(){return this.reverse?"arrival":"departure"}};ProcessIsoCurveParam.prototype.getParams=function(){var Oe=[];return Oe.push({k:"resource",v:this.resource}),Oe.push({k:"point",v:this.getLocation()}),Oe.push({k:"direction",v:this.getDirection()}),Oe.push({k:"costType",v:this.costType}),Oe.push({k:"costValue",v:this.costValue}),Oe.push({k:"profile",v:this.profile}),Oe.push({k:"timeUnit",v:this.timeUnit}),Oe.push({k:"distanceUnit",v:this.getDistanceUnit()}),this.crs&&Oe.push({k:"crs",v:this.crs}),this.constraints&&Oe.push({k:"constraints",v:this.getConstraints()}),Oe};function ProcessIsoCurveRequest(Oe){if(this.logger=LoggerByDefault$1.getLogger("ProcessIsoCurveRequest"),this.logger.trace("[Constructeur ProcessIsoCurveRequest ()]"),!(this instanceof ProcessIsoCurveRequest))throw new TypeError("ProcessIsoCurveRequest constructor cannot be called as a function.");if(!Oe)throw new Error(MessagesResources.getMessage("PARAM_EMPTY","options"));this.settings=Oe,this.mode=this.settings.httpMethod||"GET"}ProcessIsoCurveRequest.prototype={requestString:null,constructor:ProcessIsoCurveRequest,processRequestString:function(){var Oe="",e=0;switch(this.mode){case"GET":this.logger.trace("Process GET Request");var t=new ProcessIsoCurveParam(this.settings),ke=t.getParams();for(e=0;e<ke.length;e++){var Ge=ke[e];Oe&&(Oe+="&"),Oe+=Ge.k+"="+Ge.v}break;case"POST":this.logger.trace("Process POST Request");var Be={};Be.resource=this.settings.resource,Be.point=this.settings.position.x+","+this.settings.position.y,this.settings.method==="distance"?(Be.costType="distance",Be.costValue=this.settings.distance):(Be.costType="time",Be.costValue=this.settings.time),Be.profile=this.settings.graph,this.settings.reverse?Be.direction="arrival":Be.direction="departure",Be.constraints=this.settings.constraints,Be.distanceUnit=this.settings.distanceUnit,Be.timeUnit=this.settings.timeUnit,Be.crs=this.settings.srs,Oe=JSON.stringify(Be);break;default:this.logger.error("No other HTTP method supported by the service !")}return this.logger.trace(Oe),this.requestString=Oe,this.requestString}};function ProcessIsoCurveResponse(){if(!(this instanceof ProcessIsoCurveResponse))throw new TypeError("ProcessIsoCurveResponse constructor cannot be called as a function.");this.message=null,this.id=null,this.location={},this.location.x=null,this.location.y=null,this.srs=null,this.geometry=null,this.time=null,this.distance=null}ProcessIsoCurveResponse.prototype={constructor:ProcessIsoCurveResponse};var ProcessIsoCurveResponseFactory={build:function(Oe){var e=LoggerByDefault$1.getLogger("ProcessIsoCurveResponseFactory");e.trace(["ProcessIsoCurveResponseFactory::build()"]);var t=null;if(Oe.response)if(Oe.rawResponse)e.trace("analyze response : raw"),t=Oe.response;else{e.trace("analyze response : json");var ke;if(typeof Oe.response=="string"?ke=JSON.parse(Oe.response):ke=Oe.response,t=new ProcessIsoCurveResponse,ke){ke.costType==="distance"?(t.time="",t.distance=ke.costValue):(t.time=ke.costValue,t.distance=""),t.message="",t.id="",t.srs=ke.crs,t.geometry=ke.geometry;var Ge=ke.point.split(",");t.location&&(t.location.x=Ge[0],t.location.y=Ge[1])}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_ANALYSE",Oe.response)));return}if(t.exceptionReport){Oe.onError.call(Oe.scope,new ErrorService({message:MessagesResources.getMessage("SERVICE_RESPONSE_EXCEPTION",t.exceptionReport),type:ErrorService.TYPE_SRVERR,status:200}));return}}else{Oe.onError.call(Oe.scope,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")));return}Oe.onSuccess.call(Oe.scope,t)}};function ProcessIsoCurve(Oe){if(!(this instanceof ProcessIsoCurve))throw new TypeError(MessagesResources.getMessage("CLASS_CONSTRUCTOR","ProcessIsoCurve"));if(this.CLASSNAME="ProcessIsoCurve",CommonService.apply(this,arguments),this.logger=LoggerByDefault$1.getLogger("Gp.Services.ProcessIsoCurve"),this.logger.trace("[Constructeur ProcessIsoCurve (options)]"),!Oe.position)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position"));if(Oe.position.x===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.x"));if(Oe.position.y===null)throw new Error(MessagesResources.getMessage("PARAM_MISSING","position.y"));if(!Oe.time&&!Oe.distance)throw new Error("Parameter (s) 'distance' missing. Parameter time to calculate an isochrone, parameter distance for an isodistance");if(!Oe.time&&Oe.distance&&(this.options.method="distance",this.options.time&&delete this.options.time),Oe.time&&!Oe.distance&&(this.options.method="time",this.options.distance&&delete this.options.distance),this.options.method=this.options.method||"time",this.options.resource=Oe.resource||"bdtopo-valhalla",this.options.exclusions=Oe.exclusions||[],this.options.reverse=Oe.reverse||!1,this.options.srs=Oe.srs||"EPSG:4326",this.options.distanceUnit=Oe.distanceUnit||"m",this.options.timeUnit=Oe.timeUnit||"second",Oe.smoothing&&this.logger.warn("options.smoothing is DEPRECATED"),this.options.smoothing=!1,Oe.holes&&this.logger.warn("options.holes is DEPRECATED"),this.options.holes=!1,Oe.graph?(Oe.graph==="Voiture"&&(this.options.graph="car"),Oe.graph==="Pieton"&&(this.options.graph="pedestrian")):this.options.graph="car",this.options.constraints=[],Oe.constraints)if(Array.isArray(Oe.constraints))for(var e=0;e<Oe.constraints.length;e++)this.options.constraints.push(Oe.constraints[e]);else throw new Error(MessagesResources.getMessage("PARAM_TYPE","constraints"));var t={},ke={},Ge={};if(Oe.exclusions&&Oe.exclusions.length!==0){this.logger.warn("options.exclusions is DEPRECATED !!");for(var Be=0;Be<Oe.exclusions.length;Be++){if(typeof Oe.exclusions[Be]=="string")Oe.exclusions[Be]=Oe.exclusions[Be].toLowerCase();else continue;Oe.exclusions[Be]==="toll"&&(Ge.constraintType="banned",Ge.key="wayType",Ge.operator="=",Ge.value="autoroute",this.options.constraints.push(Ge)),Oe.exclusions[Be]==="tunnel"&&(t.constraintType="banned",t.key="wayType",t.operator="=",t.value="tunnel",this.options.constraints.push(t)),Oe.exclusions[Be]==="bridge"&&(ke.constraintType="banned",ke.key="wayType",ke.operator="=",ke.value="pont",this.options.constraints.push(ke))}}if(this.options.outputFormat=typeof Oe.outputFormat=="string"?Oe.outputFormat.toLowerCase():"json",Oe.outputFormat&&Oe.outputFormat!=="json")throw new Error(MessagesResources.getMessage("PARAM_NOT_SUPPORT","outputFormat"));if(this.options.outputFormat="json",!this.options.serverUrl){var je=DefaultUrlService.ProcessIsoCurve.newUrl();if(!je)throw new Error("Url by default not found !");this.options.serverUrl=je,this.logger.trace("Serveur URL par defaut : "+this.options.serverUrl)}}ProcessIsoCurve.prototype=Object.create(CommonService.prototype,{});ProcessIsoCurve.prototype.constructor=ProcessIsoCurve;ProcessIsoCurve.prototype.buildRequest=function(Oe,e){try{var t=new ProcessIsoCurveRequest(this.options);if(!t.processRequestString())throw new Error(MessagesResources.getMessage("SERVICE_REQUEST_BUILD"));this.request=t.requestString}catch(ke){Oe.call(this,new ErrorService(ke.message));return}e.call(this,this.request)};ProcessIsoCurve.prototype.analyzeResponse=function(Oe,e){if(this.response){var t={response:this.response,outputFormat:this.options.outputFormat,rawResponse:this.options.rawResponse,onSuccess:e,onError:Oe,scope:this};ProcessIsoCurveResponseFactory.build(t)}else Oe.call(this,new ErrorService(MessagesResources.getMessage("SERVICE_RESPONSE_EMPTY")))};var Services={getConfig:function(Oe){var e=new Config$1(Oe);e.call()},getAltitude:function(Oe){var e=new Alti(Oe);e.call()},geocode:function(Oe){var e=new Geocode(Oe);e.call()},reverseGeocode:function(Oe){var e=new ReverseGeocode$1(Oe);e.call()},autoComplete:function(Oe){var e=new AutoComplete(Oe);e.call()},route:function(Oe){var e=new Route$1(Oe);e.call()},isoCurve:function(Oe){var e=new ProcessIsoCurve(Oe);e.call()}};const servicesVersion=Pkg.version,servicesDate=Pkg.date;var Gp={};Gp.servicesVersion=servicesVersion;Gp.servicesDate=servicesDate;Gp.Protocols={};Gp.Protocols.XHR=XHR;Gp.Services=Services;Gp.Services.DefaultUrl=DefaultUrlService;Gp.Services.AltiResponse=AltiResponse;Gp.Services.Alti={};Gp.Services.Alti.Elevation=Elevation;Gp.Services.AutoCompleteResponse=AutoCompleteResponse;Gp.Services.AutoComplete={};Gp.Services.AutoComplete.SuggestedLocation=SuggestedLocation;Gp.Services.Config=Config$1;Gp.Services.IsoCurveResponse=ProcessIsoCurveResponse;Gp.Services.RouteResponse=RouteResponse;Gp.Services.Route={};Gp.Services.Route.RouteInstruction=RouteInstruction;Gp.Error=ErrorService;Gp.Helper=Helper$1;var LoggerByDefault={getLogger:function(Oe){if(typeof e>"u"){var e={};e.env={VERBOSE:!1}}e.env.VERBOSE?loglevelExports.enableAll():loglevelExports.disableAll();var t=Oe||"default";return loglevelExports.getLogger(t)},disableAll:function(){var Oe=loglevelExports.getLoggers();for(const e in Oe)Object.hasOwnProperty.call(Oe,e)&&Oe[e].disableAll()},enableAll:function(){var Oe=loglevelExports.getLoggers();for(const e in Oe)Object.hasOwnProperty.call(Oe,e)&&Oe[e].enableAll()}};window.Gp&&(window.Gp.Logger=LoggerByDefault);var ProxyUtils={proxifyUrl:function(Oe,e){var t=LoggerByDefault.getLogger("proxifyUrl");if(!e||!e.hasOwnProperty("proxyUrl")||e.proxyUrl===null||e.proxyUrl.trim().length===0)return Oe;if(e.noProxyDomains&&Array.isArray(e.noProxyDomains)&&e.noProxyDomains.length>0){for(var ke in e.noProxyDomains)if(t.trace("[ProxyUtils] proxifyUrl : analyzing "+e.noProxyDomains[ke]),Oe.indexOf(e.noProxyDomains[ke])!==-1)return t.info("[ProxyUtils] proxifyUrl : "+Oe+" found in noProxyDomains list ("+e.noProxyDomains[ke]+")."),Oe}return e.proxyUrl+encodeURIComponent(Oe)}},logger$F=LoggerByDefault.getLogger("GfiUtils"),Gfi={getLayerFormat:function(Oe){var e=typeof Oe.getType=="function"?Oe.getType():null,t=Oe.getSource();if(e){if(e==="VECTOR"||e==="VECTOR_TILE")return"vector";if(e==="TILE")return t.tileGrid?"wmts":"wms";if(e==="IMAGE")return"wms"}else{if(t instanceof TileWMS||t instanceof ImageWMS)return"wms";if(t instanceof WMTS$1)return"wmts";if(t instanceof VectorSource||t instanceof VectorTile)return"vector"}return"unknown"},displayInfo:function(Oe,e,t,ke,Ge){if(logger$F.trace("[Gfi] : displayInfo..."),ke||(ke="text/html"),t!==null){var Be=null,je=null,Ve=t;Ve=Ve.replace(/\n/g,""),Ve=Ve.replace(/(>)\s*(<)/g,"$1$2");var Ze=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var Qe=require("@xmldom/xmldom").DOMParser;je=new Qe,Be=je.parseFromString(Ve,ke)}else if(Ze.DOMParser)je=new Ze.DOMParser,Be=je.parseFromString(Ve,ke);else if(Ze.ActiveXObject)Be=new Ze.ActiveXObject("Microsoft.XMLDOM"),Be.async=!1,Be.loadXML(Ve);else return logger$F.log("Incompatible environment for DOM Parser !"),!1;var en=Be.getElementsByTagName("body");if(en&&en.length===1&&!en[0].hasChildNodes())return!1;var tn=document.createElement("div");tn.className="gp-feature-info-div";var an=document.createElement("button");an.className="gp-styling-button closer",an.onclick=function(){return Oe.featuresOverlay&&(Oe.removeOverlay(Oe.featuresOverlay),Oe.featuresOverlay=null),!1};var cn=document.createElement("div");return cn.className="gp-features-content-div",cn.innerHTML=t,tn.appendChild(cn),tn.appendChild(an),Oe.featuresOverlay&&(Oe.removeOverlay(Oe.featuresOverlay),Oe.featuresOverlay=null),Oe.featuresOverlay=new Overlay({element:tn,autoPan:Ge.autoPan,autoPanAnimation:Ge.autoPanAnimation,autoPanMargin:Ge.autoPanMargin,positioning:"bottom-center",insertFirst:!1,stopEvent:!0}),Oe.addOverlay(Oe.featuresOverlay),Oe.featuresOverlay.setPosition(e),Oe.featuresOverlay.render(),!0}},features2html:function(Oe,e){var t=document.createElement("div");return e.forEach(function(ke){var Ge=ke.getProperties();if(Ge.hasOwnProperty("render"))t.insertAdjacentHTML("beforeend",Ge.render);else{if(Ge.hasOwnProperty("name")){var Be=document.createElement("div");Be.className="gp-att-name-div",Be.insertAdjacentHTML("afterbegin",Ge.name),t.appendChild(Be)}if(Ge.hasOwnProperty("description")){var je=document.createElement("div");je.className="gp-att-description-div",je.insertAdjacentHTML("afterbegin",Ge.description),t.appendChild(je)}var Ve=null,Ze=!1,Qe=null,en=null,tn=null,an=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(Ve in Ge)if(Ge[Ve]!==void 0&&an.indexOf(Ve)===-1){Ze||(Qe=document.createElement("div"),Qe.className="gp-att-others-div",en=document.createElement("ul"),Ze=!0),tn=document.createElement("li");var cn=document.createElement("span");cn.className="gp-attname-others-span",cn.appendChild(document.createTextNode(Ve+" : ")),tn.appendChild(cn),tn.appendChild(document.createTextNode(Ge[Ve])),en.appendChild(tn)}en&&(Qe.appendChild(en),t.appendChild(Qe))}},Oe),t.hasChildNodes()||(t=null),t},layerGetFeatureAtCoordinates:function(Oe,e,t){var ke=Oe.getPixelFromCoordinate(t);return Oe.hasFeatureAtPixel(ke,function(Ge){return Ge===e})},displayVectorFeatureInfo:function(Oe,e,t,ke){var Ge=Oe.getPixelFromCoordinate(e),Be=[];if(Oe.forEachFeatureAtPixel(Ge,function(Ve,Ze){(!t||t.indexOf(Ze)>-1)&&Be.push(Ve)}),Be.length===0)return!1;var je=this.features2html(Oe,Be);return je===null?!1:(this.displayInfo(Oe,e,je.innerHTML,"text/html",ke),!0)},displayFeatureInfo:function(Oe,e,t,ke,Ge){for(var Be={},je=0;je<t.length;je++){var Ve=t[je],Ze=Ve.obj.getZIndex();Be[Ze]||(Be[Ze]=[]),Be[Ze].push(Ve)}var Qe=[],en=Object.keys(Be);en.sort(function(wn,bn){return bn-wn});for(var tn=0;tn<en.length;tn++)for(var an=en[tn],cn=0;cn<Be[an].length;++cn){var un=Be[an][cn].obj,dn=Be[an][cn].infoFormat||"text/html",fn=!0;if(un.minResolution&&un.minResolution>Oe.getResolution()&&(fn=!1),fn&&un.maxResolution&&un.maxResolution<Oe.getResolution()&&(fn=!1),un.getVisible()&&fn){var pn=this.getLayerFormat(un);if(pn==="vector"){this.layerGetFeatureAtCoordinates(Oe,un,e)&&Qe.push({format:pn,scope:this,coordinate:e});continue}else if(pn!=="wms"&&pn!=="wmts"){logger$F.log("[ERROR] DisplayFeatureInfo - layer format '"+pn+"' not allowed");continue}var gn=Oe.getView().getResolution(),yn=null;pn==="wmts"?yn=un.getSource().getFeatureInfoUrl.call(un.getSource(),e,gn,Oe.getView().getProjection(),{INFOFORMAT:dn}):yn=un.getSource().getFeatureInfoUrl.call(un.getSource(),e,gn,Oe.getView().getProjection(),{INFO_FORMAT:dn}),Qe.push({format:dn,url:ProxyUtils.proxifyUrl(yn,ke),scope:this,coordinate:e})}}var vn=null;function An(wn,bn,Mn){if(wn.length===0)return;var Pn=0;function En(Cn){Pn++,Cn||Pn===wn.length?Mn():bn(wn[Pn],En)}bn(wn[0],En)}var xn=this;An(Qe,function(wn,bn){if(wn.format==="vector"){if(!vn){vn=[];for(var Mn=0;Mn<en.length;Mn++)for(var Pn=en[Mn],En=0;En<Be[Pn].length;++En)vn.push(Be[Pn][En].obj)}bn(wn.scope.displayVectorFeatureInfo(Oe,wn.coordinate,vn,Ge))}else Gp.Protocols.XHR.call({url:wn.url,method:"GET",scope:wn.scope,onResponse:function(Cn){var Rn=!1;(Cn.trim().length===0||Cn.indexOf("ServiceExceptionReport")!==-1||Cn.indexOf("java.lang.NullPointerException")!==-1||Cn.indexOf("java.lang.OutOfMemoryError")!==-1||Cn.indexOf("not queryable")!==-1)&&(Rn=!0);var Tn=!Rn&&xn.displayInfo(Oe,wn.coordinate,Cn,"text/html",Ge);bn(Tn)},onFailure:function(Cn){logger$F.log(Cn),bn(!1)}})},function(){logger$F.trace("Finish sync to GFI !")})},getPosition:function(Oe,e){if(Oe.coordinate)return Oe.coordinate;var t=[0,0];if(Oe.offsetX||Oe.offsetY)t[0]=Oe.offsetX,t[1]=Oe.offsetY;else if(Oe.pointerType==="touch"){var ke=Oe.pointers[0];t[0]=ke.pageX,t[1]=ke.pageY}var Ge=e.getCoordinateFromPixel(t);return Ge},onDisplayFeatureInfo:function(Oe,e){if(e.isActive()){logger$F.trace(Oe);var t=e.getMap();if(Oe.type==="contextmenu"||Oe.type==="dblclick")Oe.preventDefault();else if(Oe.type==="singleclick"){for(var ke=t.getInteractions().getArray(),Ge=0;Ge<ke.length;Ge++)if(ke[Ge].getActive()&&(ke[Ge]instanceof Select||ke[Ge]instanceof Modify||ke[Ge]instanceof Draw))return}var Be={};e._proxyUrl&&(Be.proxyUrl=e._proxyUrl),e._noProxyDomains&&(Be.noProxyDomains=e._noProxyDomains);var je={};e._autoPan&&(je.autoPan=e._autoPan),e._autoPanAnimation&&(je.autoPanAnimation=e._autoPanAnimation),e._autoPanMargin&&(je.autoPanMargin=e._autoPanMargin);for(var Ve=[],Ze=0;Ze<e._layers.length;++Ze){var Qe=e._layers[Ze].event?e._layers[Ze].event:e._defaultEvent;if(Qe===Oe.type){var en=Ve.push(e._layers[Ze])-1;Ve[en].infoFormat||(Ve[en].infoFormat=e._defaultInfoFormat)}}var tn=this.getPosition(Oe,t);this.displayFeatureInfo(t,tn,Ve,Be,je)}}};window.ol&&(window.ol.gp?window.ol.gp.GfiUtils=Gfi:window.ol.gp={GfiUtils:Gfi});class Control extends BaseObject{constructor(e){super();const t=e.element;t&&!e.target&&!t.style.pointerEvents&&(t.style.pointerEvents="auto"),this.element=t||null,this.target_=null,this.map_=null,this.listenerKeys=[],e.render&&(this.render=e.render),e.target&&this.setTarget(e.target)}disposeInternal(){var e;(e=this.element)==null||e.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(e){var t;this.map_&&((t=this.element)==null||t.remove());for(let ke=0,Ge=this.listenerKeys.length;ke<Ge;++ke)unlistenByKey(this.listenerKeys[ke]);if(this.listenerKeys.length=0,this.map_=e,e){const ke=this.target_??e.getOverlayContainerStopEvent();this.element&&ke.appendChild(this.element),this.render!==VOID&&this.listenerKeys.push(listen(e,MapEventType.POSTRENDER,this.render,this)),e.render()}}render(e){}setTarget(e){this.target_=typeof e=="string"?document.getElementById(e):e}}var Helper={detectSupport:function(){var Oe=!0,e=window.navigator.userAgent.toLowerCase();return(e.indexOf("iphone")!==-1||e.indexOf("ipod")!==-1||e.indexOf("ipad")!==-1||e.indexOf("android")!==-1||e.indexOf("mobile")!==-1||e.indexOf("blackberry")!==-1||e.indexOf("tablet")!==-1||e.indexOf("phone")!==-1||e.indexOf("touch")!==-1)&&(Oe=!1),(e.indexOf("msie")!==-1||e.indexOf("trident")!==-1)&&(Oe=!0),Oe},assign:function(Oe,e){Oe=Oe||{};for(var t in e)e.hasOwnProperty(t)&&(Oe[t]=e[t]);return Oe},mergeParams:function(Oe,e,t){if(!(typeof Oe>"u"||typeof e>"u")){typeof t>"u"&&(t=!0);for(var ke in e)e.hasOwnProperty(ke)&&(typeof e[ke]=="object"?Oe.hasOwnProperty(ke)?this.mergeParams(Oe[ke],e[ke],t):Oe[ke]=e[ke]:Oe.hasOwnProperty(ke)?t&&(Oe[ke]=e[ke]):Oe[ke]=e[ke])}}},logger$E=LoggerByDefault.getLogger("interactions"),Interactions={_extensions:["Measures","ElevationPath","Drawing"],_options:{current:null,clean:null},unset:function(Oe,e){logger$E.trace("unset()");var t={};Helper.mergeParams(t,this._options),Helper.mergeParams(t,e);for(var ke=Oe.getInteractions().getArray(),Ge=0;Ge<ke.length;Ge++)if(ke[Ge].getActive()&&(ke[Ge]instanceof Draw||ke[Ge]instanceof Select||ke[Ge]instanceof Modify)){var Be=ke[Ge].getProperties(),je=Be.name;if(typeof je<"u"&&this._extensions.indexOf(je)>-1){if(t.current&&t.current===je)continue;ke[Ge].setActive(!1);var Ve=Be.source;if(typeof Ve<"u"&&Ve instanceof Control){for(var Ze in t)if(t.hasOwnProperty(Ze)){if(Ze==="current")continue;if(typeof Ve[Ze]=="function"){var Qe=Array.isArray(t[Ze])?t[Ze]:[t[Ze]];Ve[Ze].apply(Ve,Qe)}}}}else ke[Ge].setActive(!1)}}},Marker={lightOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAASf3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpptuO4DYX/cxVZAsEBIJfD8ZzsIMvPB8mvpq5OupN6Xc8uW5Yo4OIOdIfzr3/e8A/+lNo1lGpNu2rkT+mlp8GTFt8/4/ktsTy/nz85f96Tn18P6fN6TLzkB30ObPo5/ut1+XaC92HwrP5worY+b8yf3+jlc/72y4k+F8q+Il/F/pyof06U0/uGfE4w3tuK2pv9eAvzvI/7607a+zf4r/tVE3sffv13Maq3K9fJKZ0sOfL7U6ycsv/NIQ+eVH6nXDhQsj3P31fssxIK8rs6ffvTWdH1pZbfHvRTV749+6Vbnwpwa790q6TPIfmXIuu3x9++HqT+vitP6X+4cmmfZ+nn10eVz4p+qf5T/Lvbfe6ZuxhFKbV+burrFp9nHDe5hF+6BZamdEfBUOPRfzo/jZtfQGHHFSc/S7ok2nWlyJYhV87zuGSxxJJOSMaTlFbKz4stW+ppZe9f8R+5yXLPOze6uJ62l5y+rUWey/a4wnO1xpW3cGgSTiZ85G//hL/7gXt9FES8luOtFetKyYvNMrxz/pvD6IjcT1HrU+Cvn1//eF8zHaxeZR+Rzqnne4r5NvPFVn4anTmw8vjOoNj+nIAScenKYiTTAbomuYpKtJRMhEI2GjRYus/MpANSa9osMpWcld605JfmIybPoakmXg68DpnRiZqVOWt0aNCsUir4sdLA0Ki5llqrVqut9jo0a9GqqqZOisOylWDV1MyadRstt9Jq02attd5GTz1DmhBpt95672NwzcGZB58eHDDGTDPPMmuYOm222edYwGeVVZcuW231NXbaecMfW7fttvseRw5QOuXUo8dOO/2MC9RuDrfcevXabbff8a1rn7b+4edvdE0+XUtPp/xA+9Y1XjX7OoU4nVTvGQ1LoQgdN28BgE7es9iklOSd857FDv3lmlhk9Z5t8Y7RwXIk1StfvQvp7ah37v/qW7DyU9/S/9q54K37m537Y99+17XtJLyejr1T6EWNmenjmJEa/zGtf3wMnycdEnrmgScKh+W2rFIB58FVtiU7CVaLdS1hHXPoPkvVW5b2oXDBZM5kyN7VVS1pzsLdAoljo1+6tE5b+ciweuqaTNwEgrpb3atwvSOzw3Aa7Git98o4VD3nq3Nz/50yiEw9MXMCh+hOfU+a3euZl0IjZX1tW/VQIF0lHO5kjFqF2hvlvCOvrEi+yhlzzHKu6fCXapZzFpUqw+TMUoU1TrM8K8eEt2CcvwpvlcXjErqqEPqJVIoz1cQ7CdQOB0qqW1QrkrCsK6Afva0R7pobdpd7pG47/Z7UpwDkCm4ql9Y8G2Oi4+S0rJ3LiVdtruM9Jb1Ja6ESIbdenfb7pXSsmRIcyTStcG9xoGh7gbLD1W/ra462dTTubFKUsWyMLTThhmZUszvGdgZEZizn7D1Pvb3VmlkuoOsHSOIrxmpt0EbpgB81ynTMBlDt4TB1Vq5U0EsVt3mfgfWpNiTznwumVxaPWHprbym/Svr9MfzZG/QkgrS9IGdlYQ6i4zdpbQ/m9sbCKqv0ZKwrI5D8c+V9b9uzAIzM/Z4lm07xdl/X4aOlTekLNI+orHQcAKRJpdnQM8CoBLRYV9plleJl8yJpa3OPe+a+2ljD2pnF7GnxzrzWZijn2Ke3SytrYTJHl3CK9lQgFlNNC3tc+vJx88VLOxAB9avWjwIU0L+9m61oK7lrkrd4DEFof16knx/5sM6pOzqQ89r9dFase7a2kvXApdQOnAIH5T1mG+BM+ikt1QrNMltZKx0fC2XliVbK2enAuDk5P93TQXSY4nS4IchETYYPGGuNXfPJe8dboIixZ13bJ3mSES4KnZel1RgaaOZA8OcESKbuDaQOmjUXww93t1szsyHSFGynylw7HKfe096ywI75p6qE/1AWLgx4tMx14z2j6kyisec64EDuBCwwy/Hkm8cNzHK6iw7YiNbnVQpjdjOH0neUT9rCo7fozG2DjiOBKQKQC/0ivclYZtIwF7fDPLR2xsKkM0cZc3h3ubjIPgBmOYr3S+fTa5Zz1mfVLToJjbVH2GgN1DhKaQuluyAVe7PRRMRsWBqIgqYBoNC+NuDliY1RKG/iF5V5dztbGlQLAybsk82qaE3fzPS1zo1n5ygmKC4wsUvbiNBGerilBnJoSE4DG6x13BXWzXBv4vYFstG1VoOoC6oGPXX/UIRoN9Ib52D6Juin06jZss0ksVys5ZihjGxtMgDdLmq0EzXjzAC3GYCBXfJmwiQVEFzdurMKcZKkpyctqt0wSD0I04f4UnjXutEEdDzPuPOKKFPiKejaATr81NlRGzDe3HRwNPkVbr8UG4ZhJjM8BolsXMthNArGnMEfadoZhuRvosTdXPLOb6A0JOrIp3/hv06r4ESq1wpWZVzvZn6y/7vgYoE/RL0HgLxUNSFWB62gtiN2hhEcIbWpICkUOvvAoA/4gwScv+C0v8MJXQ+Nhqg1bgvZyqdP8vWsKBV8RUCGpsq1Orzz87Z547iFBkQcRUQrWKA86w2AavJxAguRhd6xoAOTYog6816YrroLXcGYxwUwoyFHxbtxwRY8c6zO2TQAYZkL53DIRQdBfHU1oxhJNzYpyVhcSYrFDSNPjwSTWZx0C7pf0DkOS8j9rA2q42RUpIpREda6Y4OVDMScySKSXydzjIPsENagrkkhcCt4BqZhB/N2onoPdi7ctdN3/3Qrd4qgPo8DCaYdnU9QE0W7h/vF5XGz3/AdFCBL/iqDfzDxQUSMGzfioPgJEvYDInjPyQaugchuEgbt4iCQY5ZDnwpnKTiqgj3mLhg1NCq+QwLyYPY43chRPVrq0WriYlciCNXr9VZ3eICCMIBS4nhvGEAIw0qEhaAkDex6p7qYKmQHB1AbnfAkxigx1QyOzGYXWYL/CubfGEbWGIDhxA3eiL9PpQDHRUgAbReX0ZAINyI0tQyUgcVzKFiDBOCFjXMlQ6QIYkMb7saZZliZxQwEHn7o2G6Dw8gKBXCjW9HZ5/SKXUR+OGGzMloZaAvkmmvAMyBcC4kU4YA7WToAmhlidyGKa0VSxUljYxnPcmeRgXsRbqRzbRBckHloBPPrw4Zr9/nkeMzb5VrMpFf9AdVcbrK+uoGUwtqrX/d3dJMJxvohLt7qvV04IsR7p1zM26eJ1/k1x//g+d/H8D4BAfSL+aSxxKRFa8VwUdeY6QURKy/NDAFrToKxoZTYfM331eZeAgxflY4XBZ69YaDqBP0056yGHyqnI9Rm+K1p4rSSFV9wIQGusB4PwEsdXUP9DnZtZ94jN0xuBSPBvXtoV2+0IasUFkXDKp3lXoDfe5DX9kLTOsqO9cOHgM9dqcdiEIusVMgFQy508wSbpxADbn2mkuCEx6EsXBGIAZaI1QujONgyMWaU1cti1qaQEDl1Vj7vsZFkI2m+A1t7/N49QJhK5OIUe/mWkE5sXwYa+J+lLKYCuDVajRjq3pAsYg3SQnkfQcb5LTz7xuPjv3k+dmCWUDi39Gl2ps4dXcYVJ+59d99wRJHQ9LtAD2XCRjYYkN8YUkIsrfFM5Bua5BDFyIKdxluACNO7zFkGegGi99np8n9j/ehWp2oYY4SOQWj9XHz1WcHWQL0BTYasCIpgkjyEg2C5TjD10bCGFz/PM8b5+O4Qk/m+Q5382uG5+CN3633jvfzjO4W5+TohQ8+pxIiNEfMI6VGFDe3Vd7VByDt4j0ebGrIEM2FxoZRLB0ld8XEkKBgMwyDC7QsJysobUBnjBgjRwxnsynv/tfjqx2VNJC2GPT4rjSDBV4jDl/3nVG6B+hHJ/bY9TyerWAXsIZHtzugCQWRAOXCVZl5Xxtv3fWErmHaDtJp8l2EikIXuKSylj/uCveU2fazmTH53yCEnm+KTd2E8hu4qTrIvHDJGlUkZS4IXFcPl7A8fAbrNqGf3Qh0xQTZ0SOsbIwDBLK/x9DWhsopPIiRsgHCMYjfP9wzMjbM37G0lr8B9aaI3NOogBL6Xs2HMOSH289KUQKo/Buvw+9qVTK6UUwqBuBPJFVPro5AfXk+Hn4zJjMj3RBR5J8BC2PqEG63CIG16OTfx+pr5fu30UWcS0DFuDuKHtdFjnLuM6psYkD2+oF5CjVvhS0CnoHwa/WNusfqXim5qQpjM1ZuFIjyYKi4vxKw4DZoiVeu6o4ZKaXzoURuq4nOHt6Fa9ATnU7ncxo7g6UE+0kYg8fExDzwLcq3ErIGXRo5wH+cRiu336mjg3/3hG2IT6ohLvVXuTCXB0dhTZ+++gRgyV/xAITch2WCqEVVrzPAxLgXRI1voOfSbmnM3/CXgYh8rPhxfDFL225b2jePCd7J7H2GzAwgjZgFyJj8SfsUItFBpFvCwUUQDA4ArY0Ch61SNvFZ8rw4vVhHyw5p9f3bEFDt1PjrID05RjBzVgqbJUJXSLARoRkQCNSZf5olAkobc12LqI73yrQJsCI4mLYS/rubukwKjPDlOFkPFgSrnRyNwuAcbiRm94aPI9zdmLUkujYQqcYLjaGRIFnZ9jYRcLJlv/hX30BiQgE6j5A+dU2RwwDKwGdzTAYnH2f2ctN0O7I1HTtBURMBcroAlYgjM8GYBFvPdA+imolWmjWHi4gzYfRqHKRuMrUQIsUDygBhBxs1jo+CJ/IRoNDEAuvemMJCC/Xg00L/U+v7I1Ly3qnhB/Jnv36SmOB4fM0A35hihOAcqHpM4x/zAdUx8e02G/BVzGxEpEBsqKathzVgltlb3EfNtLcNVGPPt0TpvbA+eMs3SfMcK04ln8fXDhgIiSOwUm4lj8jugXZhmRg6AHMb9gijciwnTDnNhKBXDI9m3iD38ciZ0YLpbxWho2ISpAY66Q2ZZgwv9YyzHM2QkASaOBrCM9OP4q+8xXnvSaycEuDbB4cHeJeEM08EstvvA765nu7r4RjF5YxNiO742DawE9XUMghITWK87c1sOWHBLFCdbxFqYR1wcoI8cBOX6jFuFBLCGvrO4QGX1bQxLMyX1IOX6X7bSfq7geCNzFbDeFfsL4sAm9acvxwtCFjQCGbaQ5SXYzrfVaxzOdTr6hCG35oVdOc2NjGrlX48wehxksic+UH1zZFGbgTZ0K7g4w03xafwEKo3qmAT1ovmmWMLjkxQfaNJsfbCSfP/Bjam3D72Oor77aumCQix5g05JlNJPOM40mKCcXes2BgAqwbwjX9C6YD5GLvF1Btsafh9ONbfSezJDaSKHSLBCtccxqI9oQpBKdPOW8ElM6cLAUEp480Jj9F8ZWZlutjwrw34IF3Ru/nXGEPVdmdKGfy3h2xPSckwZ++JVZyTNxYgPu4Xr7t9dEwC884PvdGPaUoDyS8JT24R1WOfECBGsahPUmDtm+cTW6WDpaAjUzlyS1kncYJEIDAiZyxN0E5/siGdvg+9mUv9KxWpkpJZHQvPvaxZnxBcgaAiXh+X94PwInyIy3xvwy/LG3eRYB/K+3Rv/0tbkr5t1/t2Cf/2ywR63xthCV3sBUwghIvm+R2nAiiQx9m1ALsHxHN59A48pBKgBad+otn9vQ+k4H3eDprO46VGMaI8i2WtEMWRIDaGfMTZn+VEuSgW8+gwAObmZIcwd38EfjH/1vT7fEMfSUMtuvYNP3y02Lp8384OnnB5SE3yl2JVLXkupN8SeLMR0edpWPOdiYAzEoLsnU06ADN0M4jS0g3qw/pl6ie/3qbB8IAwhZKSSWdYi2UeyRcdX7oYRIJHqRg3ohnS35cvNC0hB48rizpKbfgIpJ4K8UTXsMyPJS8f3molSYALLgj3yJXXfIQUczfMrnTGm9vXmbqT9Cxm1gL0Av0xdB/GsoGePVRtqwDiU7NkOC5OoSHUj2313k5QM26h2luk7Bj3ZCNe/pU0Qy4KK4CUIssMEE7uGyWV2uHjb+uw+wh8kX2daUJevGzUyICdt1kJizKnhNN9fJdvgDiNkP/wLw3jTrngRHBUjR54lJbBuOeAjo47O6yybKKQ1+BYN9E7SdXSh7kg7fhkCp+XcFTAgpvpIdDeDnincsPl3LFAaQHpywRwhptNoKXGKHlun1+/eKorKDU6M+vPdy4TRM3hBqOByFyqMtsOze740DPsC8pAEAoG/Lv5/CMA8eARSjpFJ/D3fpm7bv13y/1/gYgKdVn1LkvDNrMDBe5OOZLrnE6TOLjSDqjEAmIBNMzyKH+RuFd8whbrQq0Eg9sSGkBz/Ho6Yxe0G6mANNHo8de/ikteZX99WyNEZrVJf5T6opO+8RJLMjhgqGLMdsOXbSlqCutkhdPhvUMPc/H7Tgqm9nnHDvwF6YngoNZcUVAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh3sUMUhQ3WyICriqFUoQoVSK7TqYHLpFzRpSFJcHAXXgoMfi1UHF2ddHVwFQfADxNXFSdFFSvxfUmgR48FxP97de9y9A4RmlalmzzigapaRSSbEXH5VDL4igCjCGERIYqY+l06n4Dm+7uHj612cZ3mf+3P0KwWTAT6ReJbphkW8QTy9aemc94kjrCwpxOfEYwZdkPiR67LLb5xLDgs8M2JkM/PEEWKx1MVyF7OyoRJPEccUVaN8IeeywnmLs1qts/Y9+QtDBW1lmes0h5HEIpaQhggZdVRQhYU4rRopJjK0n/DwDzn+NLlkclXAyLGAGlRIjh/8D353axYnJ9ykUAIIvNj2xwgQ3AVaDdv+Prbt1gngfwautI6/1gRmPklvdLTYERDeBi6uO5q8B1zuANEnXTIkR/LTFIpF4P2MvikPDNwCfWtub+19nD4AWeoqdQMcHAKjJcpe93h3b3dv/55p9/cDPGdykYtTXU4AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjkyYWVkNjM2LWY3MDMtNDAzOC1hNzM4LWZiYzYxYzZlMTljNCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5NWMzZWI3NC0zYWRmLTRkYzUtOWZjZS1iODQ4NTc3Nzg4ODQiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo0NjI3ZDg3NC1lZDIyLTRiZTUtYTlkNS00NDlmMzVhZDIxYzgiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5Mjc4OTUzMDYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphM2U3ZWQ1MS0xNTI4LTRhYjAtODVjOS0zNzNkNzgxZGM2ZmMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjI3KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PofUkY4AAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGRuA4VZTAAAFcElEQVRYw82YW2xbVRaGv7XP8bHjXByHQkNhWigdVX1AikRBMBoQ8wASl4fRqPDAAxIPKAVxeRqQRohHBEVCaoGKUBCl4qHcNKCZVKMRRQxtgTaACLRKqlwB14NzM2ni2D2XvXjgBFXQOnFiA1uy/HB89u9/7bX+vf4l1HnpK57hTNCE0AzqAS5gAAuEID5KiWSiLPf4tp7YUjcSu4yLZzdi2IJyNXANcBlwAdAKzAHTwDhwDKEPywC+GZWHbPi7IKOvZIWguAnlr8BtwJ+AxDJeDYCPgF6Ed0hkh+Weov5mZLTHJMDeBjwYk0itYJtKTOpZML3SbYNfnYz2SBr0buARYENcFytdFvga2AGyT7p14Vcjoz3ShOgdKDuAi+pUewpMIDyCypvSreWGk9HdroOEV2F4A1hfTxGJCX2D5U7U/UzuD6NaXq49NRJhBsOjwMVLEtE4gaL4W5cV3IsxPEoizDT0ZLTHcSH6M/BWLLlVwpQKuPzhb+i8sRkv04Y/e5rvPigxtnM9trKU2k0D28A5LN3RsmXbrbFOU8DtQLpqfJqu97nh6TydmzvwWpOI8VDbxqbrkmz62yk+/Ps6yoe8KkeV/hHHfgrMNyrNEkBX1SAktgRs3T7ApV1rSWayiEkDLmLSJDNZLu1ay9btAyS2BEsEuWuZ99WKyRhgHeCcn8wGw/qbOnAS3jmfOwmP9Td1kNhQDduJcUwjyciS0RJXMMkWkPPUo/z4XFxZRhZII8mEwFCsT+f5xXTE7FAOteduItVaZodyhNPVZDeKccJGkxmsChIMOvTt6aRSzIP+7A9rRKWYp29PJ8GgsyqcVauZSADaj+IDTecWvBlD4e01HKjM07XtOOuuy+A2X0BYmib/8SxfvLWRYm8LdqZaCvkI/SDBci6nld0ze7KCLa4F3gSurR4MB5x1FnMhiCeor9hJiPKmWpbGp3EU2IbJFuTe5XfStbczLxgP7K0IPcCFDWhnJoFuMAek2/oNbWdku/WxHATejT1JPZcPvINysFYiK+gAFkXTK6H+MyhXADeseJ9fmrVDM6X080/+p1M2/yFsD1zjEIauEeMAqNpQE16oaKiqwfjYeLk+fuYl10HDq7DsBTavxs8o6FzFKez/dM3rLx9LjUyVxcb7yVkfzmpXFbACJURHIxgyxkyu1ml6qL0Z4YX4xl7Jfrrgm9Ov9bX/e++x1tHCgkQ11lgELGA4sBp3iHRbH5GDwJPAFLXo6KJnDmTh/aG2w2/3t47VSGQxs1zAE9U2s9pEjx3hXuBloCa7G1rxv8o3f/7SkUz/UFFWMqGRWMpHAqsDbl00KGotIXM7MawF7gKSS5oJJRospI7v+rD96Ikp8aV2EgrkVPW4OnIy6SVL9ZubvZgyaOVyYDfwl2oNqVWiXNEb231oTe+/BrzvK9Gy01MFyoiOKzIEmqsEfjGf/39U1yHgosJFUXhlFMl+z9E/nkvhVNHZsjux+9Caf77RnyzMBaJLmW4RrWAlB3Y4Uh13HLOA4wQjo6O2IRPNxVV4JuG5Et2SSelzjtFLzsZQ0NIZ8/2rx7K9+/paxqbKvyh4Bc4AFQxzau23Dow7FS+nHmfEUz05OqINH8+evXJPJVOuE93XkY4eSziaXcQpB2b+vZNt7+/8IPPl2OxPRMJ4dDsLzIho3hpzamJ6aqJ0ei6qtZAasmZ2OS1RyOMd6egBIzSFVoKj4y1Hnvhv+8cD02ZOkEmgIKITVnXKWDs1ksvNrgbTbRSZ46cypY50aWcllIsyKXvr8GTyi9f6WvePFGVQhO8EPW2NzI+OfV2pF2bDTgbg8D/aJeVUspd1BK3/G24u7/skO3+iYP3h3LdhI/B+AGodUpo8WKwoAAAAAElFTkSuQmCC",darkOrange:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAStXpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZpplmO5boT/cxVeAkeQWA4H8BzvwMv3B0pV7qou26/tyk5JeXXFAQgEIqgO9h//fsO/8a/2KKG2PkRFIv+qVs2TFyN+/s33mGJ9j+9fKd/30q/XQ/5ej5lLftP3xiHf+39cTz8H+DxNXrW/DDT294316xtav+OP3wb6TlR8Rb6K8x1IvwOV/HkjfQeYn21F0dH/uoVln+fzYyfj8xv84f6ISf88/f537UTvNOYpOVtJJfL4DVbJxX9LKJMXjcdcKjem0t/r9q7/2BIB+VOcfv5TVnR9qfWPN/2SlZ+vfsvWNwJs7bds1fy9pfwWZPn5/MfrIbU/Z+WF/i8z1/F9lX+9nkpKnxX9Fv0X/HvGfXtmF7MKoZbvpn5s8b3ivsUUPvUILE3IjoChwbP/KD+DzW+gcOKOi5+dNGXSdVNNJ810k73nnTZLrNlC7rzIeefyLo7Ss+ZdPH/Vf9LNvWg5ZZDL/dJeS/65lvSm1bjDm20w80ncmhODJT7yj3/CP/3AvV4KBHi81KdPfnP2YLMMz5w/chsZSfcb1PYC/OPn93+e10IGm0fZS0QZen2GWC39FxOUl+jCjY3nTw2mfr4DECKmbiwGBNRE1lJpSVLsOfeUCOQgQZOle80sMpBay4dF5lqKkJuRfWo+0tO7NbfM5cB1yIxMtCLU2SBDk2TV2sBPrwMMzVZaba1J6200bVOKVGki0sVJcfbSa+itS+99dO1zlFFHGzL6GEPH1KwF0mwq2nWo6pzMORl58unJDXOuvMqqq4Ulq6+xdM0NfHbdbcvue2zd8+RTDvxx5PQzjp5pyYCSVWsm1m2Y2rxA7ZZw621Xbr/j6p0/s/ZN699+/kHW0jdr+WXKb+w/s8bV3n8MkZxOmueMhOVQExnvngIAnT1ncaRas2fOcxYV+ists8jmOTvJM0YGq6XcbvqRu5A/GfXM/b/yFnr9JW/5/5q54Kn7h5n7e97+lLXjJLxfxj5V+BiwUH3cM/PgP6r178/h+2IWNXr3IZDKnG1YHtrtFtaVWu1ilevx7tYtr7VXOy3nSum0NHSeHSC4lcbIFUozk32J9iFdrXthMcaFq0z0Wlp6+qg7HfZer+Z0+zpjlQ5fRmKkS8fOua1j1CP7llovW7E816hHdHtUrZ5+oz0IDLDFuIMOT2Rma2CHreke6c5TYFqCY9puXmPuPRcL6KvoarLOvlBpNrRL37lJbySs733aav2UesPNIHA2O7WlZr3tW+ML4QSvXKsuLPpsgL0u/mbyXnZpdPGZjOttnz2khypsW2Jt5Fozqdl8qnedcofdunR20BHbANt15T1WAltjrZ53p6nfQqC6rqBWe6l0nMIi9+69RD0LYHu7WZT7SBuQzttKZNQmaIJGvHZZtrsC2T07siMATFvb7ja2C4/eLpMY6Y3jssO25l3SrxyZyBE7R4kTA+Zia60CIJVPnhkqFFtZ7lbmX7OMuH2OHEEBv42VEN66HZf+st21L32sSZIpaVIuvZie0Ge0B9BFHxzfMMd/8DzkZjNwFFdW4zWFApTWlpP3vCOzxUm1FWKkBtHMW+zI2iReZFFt7DcKsCld21qB8OQjdRDXQhXmKB1CEcC+q2c0bT7SjLbfG228GPk7hRnhmQNmEQOdQj6htHgI3AZ5KV/KSy5Qvz4ukCY1hWWM0YhnSa3Uk9dmzdAdoeYHkiPXuQbNHUoZk0+U1KEXyZnw7UUCFyAmnmlQI1tjE1u3fEp+abX5p+r/Iz2QS1Kc9umzQg1lt3Lhw1NuHXclsLDiGHcfUBnKZe/sIx0kz6JICFA+2cTpDpqVDFCytG0wMyxRxibwdjZ7Il4ytbdVoBED6TSBNCbLX7lBnKTOUXZxF2o2nAngN2KboX6uU13NKlAVjWsOwqVSAwGjKo22ARgudUtcr3jbr7JqqgS73qGbknEAGrMVbrKz7oxe06mx+Z3Ct8DT//JMvxjD+NC4EX461F1OUiEZ9Fo6PQak4+Q9cFXp/RXYwfqdetl701wUChFKMN42b+9HHuVV8vC2TBo2vXVGDSCqz6sQl2sSK9HIcSu0Boa7ZhMwb2bxhfVtCl19V/kBwlpSpmxq7XRkqEtPSbqTM/gr6VupkEZLO4fWYHXTxiKN58CCXNsCME6+O0Pc7LgEgroA87HqGzRqHg7g1iwoZdilXwZ1KQgjzcFdjZZAWs+iOv16vVkgmkBYdJF2PuA6s/DJnibdlxZzJwDhCu6LAGRQmeH6TpWowl4bxmBRWhagC2iAc05T0HOmEgY2Au9Qj3bpoMwJCCe7bsTXYPTvhMNbNy35wNACBQfebVUHW6cb07j9jtu4NhM6gGYFw2/BSEz7shWMncc+X1RAvc6jEiaCB4r2pC2MMTlBMZVELQMZ8sm87CGvc2yZLlbHzL5AGkM370hIm3UtpL4vKf2U9EEeSP1X6XGmaf1u5kU+BYRD0+6xqOhky2zr/PWGv79/S1EEBfVpo592XV3EGVjeB2AddoXuX/mwwVzp5WiI5K2oRm6nfGNeDSKS00DeGClvsFMQXpYCssEzwwNTL5wNayGwm/Z/EJA80jz7ukpsB3THWulMHV13IAfym+m+VAleRFOX4kRD6SEbCCQl4mKfAWCOJhC9AtoeUZMtbl7SD8aBayBoffyKhlwj0/zovihoCM2J6cwrkAYIoUEAvaO8n82lBUATNBjkBuFAz2jX69Gii1xgw/YFTl9mr6KFjXbxEih0lDTYKeQDaGlYWEA21FAdcME9yQnMc3hDivcvCX9w+QmbsVAVDI0MBeQQnLNu/lxhFsL3+SBgK+Gf4ebcDyzS32AR/jFu+gc3v8IG6fcDNwhHF3qHHr2JKxWOxa4GvSBc5MDZFQxAfgK1S3NJHLvz9aTBQRjBdTjkIZooUtwD+YcX9bWmaXD04mOOlQcfkghzo2hSvcz6GCkT/9bCKBEhhWrfyE6KFNm7EVoFtQCBILKAYro1Ge9EBFtVWGDZhCwaHNAQyAnJH8MtiKZVBxYBAYpEVEJZkQkoCMNQb2xFRX4AJ8iqpu7AqLZ9YXR/yB6mA/BBYR6iTfPcvZZ4yvTwcA3VjiY/9MkL6fVUNBu690BZQJXyQOShufFPKAW2dg6qJaPqaRfwIi2p+/pxEpdcokQK3RHJqILUAfKsNV1uRStfGq4e8Or4COhH4vE/IvJ3PCqY/hWNgDH8y2hcU3c+NAb0VY2If0FNd5zlrVtbph0h75BRgNL7LH/ePtT7LAouIZ6E5v/6rFs9Yo8NQaluBzGOrKGMHVkrFJe+bVOGy7B/GAhBBjJg75Wx8G/e6RgXkjmsCy14jXxw+63UNLEr04kNyoc4BNw3rJ0r0a7S3L/ebkgoIU3XOR/oYyHZFn+IkR8FYWQQfYgUa8hjrIJMUtkPsgHxr191N/JPtdzzIlqomkJs0dZIJ0rB1wCVQlNSLeBzyAw6N4vEM1B34oIfH5zBSOXNT4Mp+a8iHItfoMZdELWsAuILvO7QH/VNQo6rWzx9o4niuNx/Alw25XGqqBW8GS0x0TSN1TcuirqCbick1OFedZ+IZm00BUGeI6Iw5+7wwDNekAElOjrPoEAQ7vlaLndsJwZlnb25zTqYKdmUHgoVoW/TbQoQRyzdJ6egYhzH0x7R4sddUrh0GdT7wJTo0UAhkp5zgScViyGnkayJFFkIPW9+h05xySh/5Sdw8JFU/JvgRGjuWkxoyPeWx5SFsobrf+Nz3o0uOrgyBhFBfZHXtly3UTF9g4+Bw4iobQRTCahTcObjlt7co60nhwsZBdPNRKhMbYcFF39nVRsJk77A2qiMd8yPxDQUc8qtLjMhaH6n4s/cxkTEKvwwky/eF/Bx3lD7/INVCN8X0LRRg/vNekelk+FYGNfdY8IvYHUQXnZN7B5cyj2zAWqmX/idg86erDH7wYsiP5GtFcqPFEfCn70MQZ7AFbbod2La6ap4VgiTKoVgGoaku4ZMKOzW+TVv1V7KG4HMipBvtHCASd/Jxc+astMWOkDIOk0ZW1vOVZT5PrWESpfBRY423JcjvphjR0FHIPgorIt1VCrZGzjsbhQQ5EDFYudxaui3LJk1YPxw5fQVGo1+Gp47uF9F+R+dGKUKbcEHMIR1Cdk7Iu02D0X1WK4R4+7apqMdkDdMookuMgfea/phsvh3H8go/AOWFZZiQWWFjHhGiqSCUySO9FC6wXN41dWxHwSYPTG2l6cpDTYLzeNgMRqHoqKfdoJN53Syk04No6vmpGJKrscZchpwv8fe+U9EdomvwN1Pxh3Mi6LVtAFtaQitxVbBbSWOWKFnwA4suZPO5n+75os4exayDhZ83KN+ZnjdpGdaHAvut4Y5n/LGW7RKye3E/CiA5Qt87ANeWC14hAhGfLUIVEg+1oduAjaf1Apo9P/W9KFvcN2jEGpgDBoLPJz/puvRFGyNlWOhEhtxu9DRKNV0ozFB9xP1Y3WUTfFGRM+1om4xKgHeKeGMB2oEFje6CDRa0cBIJz/FchGAmHATTihQBojPgf5160WbqQpsN1IgDWFfup1Yd4KzMXjXpZQlbpWOIE+U1UkKqT+bTyXjre0dZ1U/Tft64hr/65nghzq2nw+q0zs0kw+2aMCBLR3UZZ2IMJQz0sUD0Zz9E5YS4vfmQTy2lwziI7RSITFofBE5qbGwBD/NOE8rUi/gqnk3AjzIJef0w/4+X58ISyh8hDQEQu1npzAGoCHoSE8IzskbcY76Wl9z/8HWH/JLInx7oUFd7APzRdOjJQgM7vYYyUTSucMPiunOIMij04t9FLqfV/81VuGXoH0VLjIL+d/84G/gxPMp3vAuQo6OFxH+Ha5Cd7k5Ue8bNUtwn1txU2cWDOIUJOeC7JSST8MPjXZVVAP9TEmddbQdoQX64PA08TZsxi82SzY2G95A/0CUbjSKwxIiq610mIy9IJmmH7AOQFE9KJQe8pgxyi4EAM6mC1HLSsshbMJO1Pzgjj6DWb906nvgnn7xBgoPQENyHul725zomKKEDXMMs0A/AitvQzdvNDVvmDMo5BCJd6e14c2Vhr4GmYGAzVHUq3+TMEv207ca/HAPoda7Vcyklg77X+9nFfXgehp7dyraEC1HyG8FTlOyOsSRlbGgWSjAFHCnAnfDZ2jq/NqAkGzsQETfUyaHlZXL6ogHrTopSECq09eoP4llyTvWC24H4NTNJhpcpAhXq09Wt+GYbnul7vb+nbF/TL0r9NcFqh8PrYoK2OHRb3QHiysgU2DERaHhACp967hQTKgmcN2JWUreSXNZHUshBZOCLnI7GlCFKArV+U7Vp94l5xB9MgRbH2gYGQOZOj46DQeF3tG9hrDU9mQOThdP8mTNfCrnwJwISKQPnT0uR7VNigXpWiEFP0Lxr98KaVRvvbFK9W99yFLG00LSEBRM6N9hdpSdn1v1xajAaNI5aoM1RvOvbtFmReiHev0we/lXd/QOdgDhk35za4XWdq2Kq0CLNKSaZSMmiFa3b52utEkcBgkaBtPuvCgUnUfhvWgjBioKqFKmzXuYpxTl/eQshPPO2ShJRza2dD8dmfb8nMrEf/mI9cczhuFgqAQhsyhVlS50UbeZhXJw12E90H4zEaXeyEpzm1hL9S8p8IDmB3Uoe0SMkyiamhaFiUZRkxc/jhjIoYNyQNaQfNBIVzUIyF2vZUKndnGxeMRUKB8atHpXwjJENI834Aua3xE9HrDApxJwLZAABnp544Cu6gTzDanTXSRBCgWnZa1TIFQX/aCR3IJnEahlwKxX5PoZ2xzJv1FDSTHR2I/yJ5bIE+PfISQqkGpHdqMYFqq1uu8F/1n8izQPIr5lhztexUKSUDfKYvHn8KA6E7wzR1wtru04SeGJVKUgRZzL9yofVU7H6QEpk7p/0zasYFQpSSG90K2fcl64K5m79bFoTBb91AYHjv+/uSLhYRe6bvajej/vvKkVHJ0TPF4buZAoev8WpEDemJctMADcTzd4GkafL0juiyEKwG0XETEBfR4bioCLBmZlDprvZuGtR/zHJPHinE9Ok5/YQ3yYCfrV8iOC1oAVOgDBDksbjH9wOmwIuBPo5icdgiwS1wbND9YU/UHbRZBMgo0IV1jpSUKhQlaYrnkehdAkrI/jgs7JwVWXutTfHbKGdLO6gSFyCyp2j738tB41BgTSDRFYZZQCTKx0bOZkVEiuHFbhtecqYjkv107p0VeeJ6GFqZ+UMrS5tr5BQKz3toOfxbe3a1dtvW+oRnvdOiOWQK+fRFWJgk9hWwgNBvX6peddODKw713i8VM+1Bw+zzXE80FMMd0LY9XoxN0P/Nty75bP4xRkTPHvFMwzuwKeBW3l38aB4uaPlBEG8s8HGwhv/x9y/hPOIdIfHx3GqQAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPU0tFKh3sUMQhQ3WyIFrEUatQhAqhVmjVweSlf9CkJUlxcRRcCw7+LFYdXJx1dXAVBMEfEFcXJ0UXKfG+pNAixgeX93HeO4f77gOEVpVpZt8EoOmWkUklxVx+VQy+IoAowlQJmZn1OUlKw3N93cPH97s4z/K+9+caVAsmA3wi8SyrGxbxBvH0plXnvE8cYWVZJT4nHjeoQeJHrisuv3EuOSzwzIiRzcwTR4jFUg8rPczKhkacII6pmk75Qs5llfMWZ63aYJ0++QtDBX1lmetUI0hhEUuQIEJBAxVUYSFOu06KiQydJz38w45fIpdCrgoYORZQgwbZ8YP/we/ZmsWpSTcplAQCL7b9MQoEd4F207a/j227fQL4n4ErveuvtYCZT9KbXS12BIS3gYvrrqbsAZc7QPSpLhuyI/mphGIReD+jb8oDQ7fAwJo7t845Th+ALM0qfQMcHAJjJcpe93h3f+/c/r3Tmd8PnXByuOaabnkAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjIxNDZjMzUzLWIxZjItNGVjOC04NzQ3LTIwMGEyYWExM2ViMyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2NGViNmI2Ni03Y2I2LTRkZGUtYTI3OS01MGY0ZWFiZGFhODAiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1ODRhM2VjZC1kNGFmLTQ3NjItYjA1ZS04ODk2MGQ4ZTk0Y2MiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE5MDM3ODI2MTQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYzNjOGRkZi1kMjVkLTQ4YzQtYTAwYS0yMmU3ZDYwMzg1YjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI1OjAzKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PuhCAHgAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGQOTjc4FAAAFdklEQVRYw82YW2gcZRTHf+eb2dlkc9lsrFYr2notfSgWxKKiog8VvIFI9UFQEaWtYPFJfREfRRSEeqlttViLD/WGisYXrShWpfWC1WpSN5eN3cZumkuTzWY3c/mOD9lI0WSTTXbVA8M8zMz3n//5zvl/5xyhxqb3ewYvaERpAvUAFzCABUIQH6GAHyvKa76tJbbUjMRW4+LbC7GsQbgCWA+sAs4AWoA8MAxkgEMo32LoxDO98oIN/xdk9IGUYEYvRrgduAW4Gogt4NMA+BroQHkfm+qW3aP6n5HRTSYG9hZga5lEwyKWKZVJvQCmQ3bZ4F8no5skAXov8BiwspwXizUL9APPgOyVXTr5r5HRzdKI1TsRngHOqlHuKTCI8hhG3padWqw7GX3IddDwcixvAefXUkTKhH7HcBfifi8vh1E1H1cfGkGYxPI4cM68RGw5zf3y3S7IuedgeZwgTNZ1Z3Sz46LRNcA7Zcmd25yGgPWP/M7q65toTLZSHBvn6OcFDm07n6g0n9oNAxsR54DsjBYs2251QWAbgFuBREX/tF3rc9+zA6xa3U5jSxwxHmpbueyqOOvvOM7rj67g1JfedFTNagngVtR+B0zUK8xiwLqKTmhcE3Dblk4uXbecRDKFmATgIiZBIpni0nXLuW1LJ41rgnmcvG6B59WiyRhgBeDM+UZipWHthnbcmDf7b8Y81m5oJ7GyErZTxjH1JCPzesu4ghtvBpkjH2X6uXFlAVEg9SMjhEAamFsyp4Yjcuks1s6uXdZacuksU8OVZDcC0mW8OpFRQqBruvqdwwpdDh+9cjaF0QHQv/2wRhRGB6afdzkVkKZxtDoyVaqZBKCHEXygcXafjhi63l3G9tIEGzYe4ZKrksSbzmCqMEz6mzE+eedC+juaiUYqhZCPchgkqKB4SzxntqQEO7oceBu4srIzHIitsMTOBOMJ1leCkxAMmEpRWt6Vg8BGTConOxZeSVdfzmwxHmpvRtkJnFmHcuYksBkxH8tO69e1nJEd1sdhP/BBuUippfnA+3jsr5ZI9TnzV33mFcB/DuEi4LpFr/PPZu3LkanES08fOltWnxe2Ba5xCEPXiHEAVG2oMS9UNFTVINOXKdamn3nQdSC8HMMeYPVS+hkFzQdObl9m2Zu7+xt6hkKx5fXktGumdNXyZQUKiPZGkDbGnFxqp+kh9kaUHeUTezHr6WRkxt/oa/toT39Lby6QqMoci4BJDB8vpTtEdlkflf3A08AQ1ejoTM8cyeRnudYD72Zb+qokMhNZLuCJaqtZaqDLLi0i7EHYDVTV7oZW/J9PNf3wanfycLoki5nQSFnKewKrnW5NNMhtKRDlt6EsB+4G4vM2/UrUNd5w5Pl028FfiuJL9SQUyKrqEXXkaNyLF2o3N9vUYKB0AbAduKFSQWqVKFv0+rYfXdbx4aB3qqQLDk8VKCKaUSQNmi0F/ujAwB9RTYeAMwoXabg2QvZ5jl4ym8Ip6FjgDm7/bdl7bw3Ec/lItEJyWyAS0RJWsmC7I9WM45hJHCfo6e21dZlozlju3pjnSnRT0tMXHdFzT8dQ0EJoTr2eSXXs7W/uG/pnwiswBZQw5NXaYw5knJKXVY8p8VSP9vZo3cezp1v2nniDK9FD7V70RMxoaganGJmJT0+0frbtt+RPfVN/EQnLo9sxYEREB6wxxweHhwYL4/mo2kSqi43c5zRH8GS7Fz1shMZQJTg41PzVU7+2fdNZNHlBTgI5ER20qkPG2qGebHZsSTpULzJH8slCe6ywrWTlrGTM3tw9Ef/xjUzLvp6idIlwQtBxa2Sit6+/VCvMuu0MwIE726RBSqlViaDli6Gm4t6e1MQveet3Z4+F9cD7Ewo4WRJBbaaSAAAAAElFTkSuQmCC",red:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAATbHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZppchuxEUb/4xQ5AvYGjgOgG1W5QY6f10NKtmW5EieiTVLDIQbo5VswCvavf97wD37qyD3UJqPP3iM/ddaZF29GfP2s5znF+jw/P6W8P0u/Hg/5fTxmDvlJ7xNHf5//cTx9DvB6WbxrPw00zvuD/esHs77HH18Gel+o+Ix8FvoeaL4HKvn1QXoPsF7Lin0O+XkJ216v+rGS8fof/Ol+xEReL19/r0L0tHGdkrOVVCLP72CVXPx/CWXxpvGcS+XEVOR5H3mu5SMmBOS7OH3+TGZ0far125N+ycrnuy/ZekeApX3JVs3vU8qXIPfP12+Ph9S+z8oT+p+uXMf7Xf71+NgpvWb0JfpP8K+O+6yZVazaCXV/L+ozak9Srm4u4Zcegal1stOpocGrPyaPweIPpaDxxM3jpJky6bqpJk0r3WTP60mHKdZsIQtvcj65PAdHkTzzKZ6/6o90s5RZtAxyeZ6015I/55Key854wnO1wZU1cWpODJb4yl8/wt9+4V5vBQI8ntSnV35z9mAzDc+cP3MaGUn3HdT2BPjj8fXH81rIYPMoe4tMht6vIXZLP5CgPIkunNh4ffVgEn0PQIi4dGMyqZABspZKSz1FyVlSIpCDBC2m7j2zyUBqLSuTzLWUTm5G9kvzFUnPqbllDgeOA2ZkopVOnw0ytEhWrY36kTqoodVKq6213qSNNtvqpdfeeu/SHRSXFKlBmnQRGTJljTLqaKMPGWPMsWaeBdBss0+ZY865FtdcjLz49uKEtXbeZdfdwu5b9thzr0P5nHra6UfOOPMszVoU/NCuokOnLktGKVm1Zt3Ehk1bl1K7Jdx62+1X7rjzrs+svdP62+MvspbeWctPpvxE+cwaR0U+hkgOJ81zRsJyqImMi6eAgs6eszhSrdkz5zmLE/grLTPJ5jnT5Bkjg9VSbjd95C7kV0Y9c/9X3oLUX/KW/9fMBU/dX2bu97x9lzV1ED5Pxl5d6EGNhe7jnJUH/+jW31/D+83KPiEmlrd0ZremEblUT7eZm0BzexaimmXYgubnuEPvkbQGa9wthiOWrraVZNfSbR0D3dM5e18pXeZJJmnLWKdvldHSuKUOsxOt3bbTboUw2gyslJWdOaVdy9qByFHOHqbkHGo8yhf7pMzaZaS57phW01Jel0mrG5SmjUNddDez7oydWuXyM2lNdiFWXboPJVg7FGLzCt/lNwpH8zahiOZobe1kVcJOl4zlA+HOkZfx6ZCqda7d110dOqk5j555J51FiWZST5Qtdd1klCVRBYFSJPLQBhVUm0uIVsH9rLkAPGR3mNdLnms6F9jxCstcglo/til6U1v7hJm27l3rQ7HE7SzZVqiFqgKlzQ0BSa17KIOX6mWnnHzLOfToTkNLH9lgkXjuufNIsdmoM5nGyaSbACl51ihnS4t7TBrI9uikqdFIpLPGdaGkO4e2QBHMZEe8Ls6U6DWk+dBZ9VLGu98lM11aIjXjakwmrUP6KF24IvLlTbBSMKXAz7ibZFg6JtIZFqmoicKJlpnItETwSSfBphrjGTYkkzzqgArxS9wA7/o/amHMG4VpUQ4naZO6llRb63b19J1i3g9Lqy/ptx4Jf2yej95JmyqnPp40nD1FZ6eEE5GkmCLLXyizGgweEiqMDJ59WrKiWnajjLNcFMFdh/WCApcKnDU3Ymiqex46z4jy0O5rCny1U8sU44naDrlFlpBoiqK2FSlQEkHj0YlVtbmq2OSJIt9n3XKPnkuWEFrHx1cmu67wCdWWb26RPgIq6cbWQSCh7ae1mavXCLiYj//UCeia5L5SWHfOUy1nmsah0qgDFAnlMSvhAGM7iEUB9aZX4xO7Zb2Agc/b+D4UPt78/jq64wBC6Jaup8vuDiT7JCo/slSKKILbA1xMusPOqh2o3McIKmivFJLa3bxx2ChgFek5k49tFcrJazxJPZAlqmxVaMSQfstACssdyhDQIDJr+rfDSzfXCzFsBrte200pvE5xAkmDNjbIohNm5klmgx9YnSeanMqY5A/FTwObIRibOeDRqguEXKfVlYUsDBao9WTlykDd1C2A/6v6HDLrn8L19fWACeBm7jfSqwkmzehsIIaOBraQNtfrp43aAEzqpEvhK1NPFeC4qG2jkWBXunMnuOISRcCYsAdsF3O7fUNnujpInQp4DZ8KwV2FmvtIOsh0MU0/t5EmSrcCsRpAyod4KFVKDYGfrdIxkSyVp42oJ1W+RLmRdmi0Esc0V7UIzJJ//A+4FBq6GJDSNahvqK0ceqdOtLOlCY7I3aUpxTsUdtOZL6m/rVwjKAPk2qwfngswTfY1DlqXBA1y3zIyIc/qRPHoW5SIy37KpWFJjHxD3I6/c2bOA3y2hQ4pYTZgbjokXWhk5NuoOmZiZwI/XVUnUEJFcawCmm1Ta/tw3ZnakHNtNGbUWEmVz6sXlxuq5lNV4lOqIJuQU5QHEMeyooAIrnXphlkdMea0QBdhgMjIKxu4ijyOJsAkNkSA4nW3zegoRhLwGvsiwsZFjaA+vJ+Pgl41LFqKTBzKJzeY4y4K5XoNc7nis0wgQnLKo12glDFaehPgz6/h64EaExPNTwJAe1DE3wFUMBxd4DV7naTKl3PCl5MMxeG/EgQoy39r+w5UIWwAZ7wmNqNo/ZhYKgiEmkMjJViEcWAN4ggPgzAdfloCgu4iHEgRDTcRcXnedsSBlODF7lLlgOpER4KNup9IZKHakS9TXDhct95PHzZaH3cFI3KsEcHSDhw4pxZUZEFXqYrF0L1DQXjKGS3CVVwx8nDWQ8lEU9eXCBiEat99LPSlgWplOVQDS2NDg3WSNSQYde+YyYCuVZNkYNUgND126YEyidh4loQEG2DBs/cx8KWQNz0yTgqCTkMLmclevB/oQSuswMNCWvYAHh277jmLiswGO2w9Q1IplD35KTr5Hkwr71QA1z9KYTfXDe9ie6JJUVGMgMsSH6YhBvcTN5Z+bw/6BkhdiOf4X0Pk+Qpv4YVvn/BmtOy3CPg+A8gw+v/J82EJl0ikfsma0i508WtNQFu6GJ5nsZ7sTacCgBfB1FmObYVEFLW3GkrRWXPP3mc5A+7fEinK4mqRU5D8gGpdNjZaTx7lfU3nAo5S7q6ZuzncQWjEbqGSyCJeBLuCbu5dB2B0NAvwQyBz0dO4KqIKUmzL6q2DRavRClhgVIC4xaAFJtpuxYBysKndvZhDL1fAUIGdSPVI1pj/IDsdOKzaO8oQp+O6V3E/4NI4XnZr1TBg9+zyic6BWbfzLUlOLB6VgvGd9dJlG2R3DQsnLrRb6tTGFEK3xB7SD1RT3S59Z7c2jisR42rokoQEIGggP4WMs4k1IYD3cOfVdnNjhiKwU8dM8YaSfVVYkKt2aOTuqsgBZY7jUazQPnqrocQgNSYPRF9E+SvLGIzVnyRDRzT5U7xUMb2wAFgAhqoHIja8Y7WQRurG2vHdnqeq6N53vShmnb5r4SmYj8L506vjGsLOMErgHKOchXNdCpdq3QKvrjCj24kXD1E11zUiyyQP1MMjC1GiLD4NtFbhbGXGdkY8i7TXDL5BETfhadPCzeugxtwL4lmKYfiQ+XpIzLxwA9hIky+ggMIqYFfDmiPa8AX7XMRUP+GAPciSQmZh4Q3ckRH3wIhZAsCijAbKl3J+pBtLw3pYK7n4IYHuIwk8Qdyjb+veV3i3lQFXjE95i470ifEZ34URpc53BJVKlIXJwbJgCB41Ag71DFpSqxtLXgf2MW3cvBmvhAaOZEiIFY4AVBNM8UITXn7AS1iF7J6pAoWAjmh4y5Wmx51o7qBVgkfol4MYBDQ6qnu60cLlwDyLZYLAnBUqs8u49IqKPjh1RKKDN4iOh8DC90kXJ3xR8Z3IXSKZY8wTHxaiwMkIazyh4r9Gh4PQgzQ5mi1l/HgDodGAEMOgPtzPUKjxDvqs3BfQ2QO0J2IC73XMhu3pL5h3OK0uF1GF9tgFiBzAEbEjPTfS0cXuhVAaV2toiWcgvopYcMpGI0r0rdl00vNRBbx+vXb6+do4CCDx7s8BhYZKAbGVsYEF33o6xfVwbB6PDhm42oxaeA0Pis6BgJjTlTqIdcdjI5CuK9YAEKmrYea3ZUCxeBgkMLVzXT48dD4WLX4TigKZ1x4yfWTZoIw5Yfj9Abj/j9QD9LCQRHR8r8ZAtosh4YsTZzwE6+t04rsoc2+g1h5gIHF4+O1J7Vg+NGbz7SfwOlPzvqVFhJCQ4mnAXHYqSrG5AGNBbEqAGmFR7CdXyA2PXUBbZDh04fz6OMUM3MHoVfGpA62Ch3LlCzVgC7l8h8oDzdHdYxXflJvm2zGM3fYpvodExdcdIZQVxzzLN/gLhzHDXBEgfgFpqgumRYc6Z2AyvCqVChakJ3UFShQaws6WkvrLRGBZ2vdBDT8fmO5ZrS1WV7AY6aEvuGNBCy6dENU+H7cj+IjURXxTlPiK5oBpiACdbw2ydEwhPeXgVeb0ZnPzCSk4aFIe3c7D+pQqdIRsEnklqk/0kTRiCrR5Cwx7NlvcKcK/+C842Hscz4SUBV8uHsfcFaHWDgNiVHyPq2tg2I0GwSGsCArBXY9aaonlIA/89/xSTMxu0YksrZC3USmjxhTd1OydAjy7HAWjs35LiSTJJGK+1fLY/jYha/Vtoc6KLD7NAwjBqov6ivQQKv+1N5Lit2LeX0kyrAOWwx4Y324Y6Ta1Pfe28KB+o20SyxGKged8rR68DLyOIPFZ8CylJuyKu1OIFtC7cUjNvv1wXNFyGgVX0BpryQgwPEYaTYyRPB4XzBaiaPdjDIqGRRW4knDdjsiAkxdzpWuOpxqgQMMzl0uLjOmW/UD7ziKzeymC3sVo9mXbwe1RmQix8c2+EFYJ2pqhsAx6apOdEn2fGXY9rvHJmE1Ae+fyqD0sH6o6dwh1wtUz6c6+XccvEf4MCg1gEJAu+DwazG+DVNf1RCkDYkgs37VXmFBbf21t9YRme7YS1HcXi284Q9kfNGWse323t0VlvTrImQsPsQe6oMLeHd2EbPNN6ub3aUuCjRDEcgcWHxX+kvCkf/xHvW1E1jcoJZxauvcKydiCv48V37kWZQxtw4qJNODPVsIU+R44zQtroi0Be+hQX63ZyRriAqWJJEBGzKI6HJPsdjpG3Vc3onja7pSJW3QaDu/lW8PjGISJQeEi9QZyj2GseK/BcVrkzo6CmB6a4tMCg2mQY5Ir7qkXBGGv51Yy496L2SD5l4UJHQG9D4NFJC5gLAA8HHMB1ULcWPqjb/FcfCK03wHQM64NAO9+x/lQNAHAAX2YIPJ5gjLOmy259gcgyvU7L8idDkJ2yr1iWAUkKo7aIk9uF+QrKQAFiq4u8yDdIZJNQ+Ts+x2oKKSDb5VtVDdyAHQi/ANtRPG4NK/Z8W1ilCdNK4egJtQD80GKITglgrcAvDm7GAgUvenMrdOOvrlEwcpEut/RfSe/eJeHm6vvwhdX3gi1lwnEsNAm/jZX13mIJM+UrhGdBlhhvig38IwcJ8W9zsAUzqpRN4VOZ6jfC6b+sS/Y0+VtHOmH6PwKZYMjbnwus9HtO0/IURgRkxFYTHJapCqYIzWFN4BpySEpeKAeD6PzeaflxfmdVkq7ynBzOtqlqAW/BkrR0Y7mINvwbWv4iO6GSDPJHdmbG+xH+UW+DEnHia4hqdQ2ohfBna6CR8CN+u0CFILsuJOLZ99dv72NlBM1hBDGM8IP5TFZ/QAQhDXKyVAIySckQWg/67gP6hDcqVNQlTt3Z3Bp5Ksj2JAxfs+OKrZqmi8nKzhDDVK6ie+cEli83+7BM4qzhKseI23xey7482t4xHg1VjMBA+zFo89895p+Rfr4Ni6Ek+j4+ayNAovkBd00m7iCQrQSvXB97wCkxqsPopP00DnR7zRQIHs2uowUsjA8dPG/jrjS/UYoEgyM9Xs/FSUpLaAjORmgMNyebyyd3G82egkJ4rfESLTf/Lfie7SAK4GFZyh/GrsDyRW3gxoNiJjVkPK++Ygp9T1h3BB4xirxqpZXj7YAtoUcBcCwBRv9j0xh9EFhGOyOMwoO4rmNW/1GTWx0/FnUAZN0P19SxougYiS7BzkOfe63MH3Nd29lMhC6UvG0g7Pwn4sCXag3v1t6XXfn5RrBnc4hwNv3CiYVAk75nhTtZy6QhgFusIEE1Gf1sTiISULf0Q1Ukd8PtZuzAzk1bA2fbRAJUoZT0iWiKGNFpKKLerkngI3DN5P83tEsCCValn5tCSSoAFZ8NE5iZCGOFvnI2+fc0hSMyOP6hgheBC/JqM0XtzPY4ff3CcRZGFPQp+eT9FGVEXZAx5l6MPfTxBAh6p9mAdsCes1v4slb46vGhDSdrI7iP3whocfnC9FXoxzU/6gk3T51NDqRmqXEDBZpfvMByw0xUJeUSzQ5viPcMHg1uzxlzOnc9szCN1b5NBH44/uD8eVHwoMzBAdw5t/eZ7uSp4CG3yd2DETwEdbr9O8QEP3Wg28roCeRYRkHdKL6HzKxMGDwGRf0vRjBi75j7X6nFNW/ckp20Z7t7ZL6fRp0CBMDCbLfwU4hteMuyDWR35qZvpvj1ZDwnfkxnjWhUnmmRRqK67v2d+On/kdI/wa+GQTprDiGjAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNAHMVfU0tFKh0MUsQhQ3WyICriqFUoQoVQK7TqYD76BU0akhQXR8G14ODHYtXBxVlXB1dBEPwAcXVxUnSREv+XFFrEeHDcj3f3HnfvAK5ZVTSrZxzQdNvMpJJCLr8qhF8RQgxR8BiUFMuYE8U0fMfXPQJsvUuwLP9zf45+tWApQEAgnlUM0ybeIJ7etA3G+8S8UpZU4nPiMZMuSPzIdNnjN8YllzmWyZvZzDwxTyyUuljuYqVsasRTxHFV0ymfy3msMt5irFXrSvue7IWRgr6yzHSaw0hhEUsQIUBGHRVUYSNBq06KhQztJ338Q65fJJdMrgoUciygBg2S6wf7g9/dWsXJCS8pkgRCL47zMQKEd4FWw3G+jx2ndQIEn4ErveOvNYGZT9IbHS1+BES3gYvrjibvAZc7QOzJkEzJlYI0uWIReD+jb8oDA7dA35rXW3sfpw9AlrpK3wAHh8BoibLXfd7d293bv2fa/f0ASM5yljz/NiUAAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOmI5YjA2YTAwLWZkOTQtNDc5MC1hNzIzLTlkMGUwNGRiNTRlNyIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTQ3ZGU5Yi1kOTA0LTRlNWYtYjIyYy0wZmMzOGRmMWI3ZGEiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4YzBjNTI2YS1lYTkyLTQxYWItODM5Yy05OWFhYTM0YjdlYzciCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE2NDAxNTU0MjYiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDowMjQ4MDc5ZS1kMTYyLTQxZmItOGViYS1lMzY2NTRiNGRjMjYiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjIwOjQwKzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/PkaovgIAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPFCiKn0kIAAAFfUlEQVRYw82YTWxc1RXHf+e+N2/GH+Px2IEEV02AgqIsIkwgoYS2ahepVGCBUOiCRRdsAAnECthErBBCICGFj4gqRQqBRSABUrVm1URtCSATJ5ASZCPHH0kGgx1/xJl5nvH7uIcFY4iIM/GzZyhHenqL994993/u+f/fOUeos+nNnkHCJoQWRD0UFzCARYhQCVB8NFWWTwNbT99SNxC3GZfIXg9sADYDWxCuRekEskARYQplFPgEOAr045ph6bXRzwKM3pEX5mduQLkHuAvYCqSW8GkIfAT0IBwknT8lH87o/w2M3mpSqL0LeLQKIrOMZSpVUC8hpkf6bPiTg9FbpBn0L8ATwLoqL5ZrFjgNPAeyV47p3E8GRjdLE6r3oTwHXF0n7ikwgfAEIvvlqJYbDkY3uw4a3YLyNrC2niJSBXQG4c+Ie0yORnGSj5OnRhzlUJ4ErrkikBAoAjPVe7ik4F6D8iRxlGvoyegmx4X4NwgHgM6a8fUyIfc8doZbf99Ca66N0uwF+v7tc3DnWoJK6gqep1C2g3NEjsdLlm03GXSbAe4GmmvGZ91vA3Y8P8aN6ztoyaYxxsPaNrbcnmbbvV/x9ONdnPnA+w71otaMcDfYPqDUmDQTUgjdNYPQsSHkgYf62di9mmwujzHNgIsxzWRzeTZ2r+aBh/rp2BDWDLLQjSzpf7VMMIpB6QKcy77Tuc6wdVsHbspbfJspj63bOuhcV8u3g9KFJtufWQbHakfLdQUv3YrI4qwQ+e65616Jr6mknE4KJgIGgctLZnEq5vRgAWsXLyKttZweLFCcqiW7cdVP1DgwQoQwUNPJxIDDG7vXMDszBvqjDWvM7MwYb+xew8SAUzNowgCSDEwyNVMJQU8AAdC06DvBtOG/76xirlLi3u0nufn2HJmWTir+FJ9+PMu7B66nr6eVYLpWCgUoJ0DCGoq3wv/MbXkhmlkN7Ad+XTMY4kBTl6XlKnA8IQ4U/xyUx8wlB3ZpKvcC23Hz49K79Ep6GeWM8VB7J8pfgasaUM6cAx5EzPvSZ4OGljNy1AYIh4C/L6lASWYBcBCHQ0mBJOfM94rk+WjwAsKvgN8te51LK7kPpm3zK89OrZH1v4zaQ9c4RJFrxDgAqjbSlBcpGqlqODoyWq5TP1OtnoU9wPqV9DMKWlRnfJ+/6q3XKpmhSRVbXU8uuhb6Hq1eVsBHdDiGQWPMuZV1mpuMB/aPCK8CXcsMjs6pufCm3/7PPZXs8LhKnJBjMTCH4f2VdIfIcRsgcgh4FpgkiY4u9Mwqc4fn2468M58dSQhkIbNcwBPVNrPSRJdjWgb2AK8BidrdSCX4PGw5/re53IlBK8uZ0EhVyodCq/1uXTTIzfrExZ0oq4H7gfQSmv54IMqcfNFv7/0ilkCSg1CgoKon1ZEv017ar9/cbEvGEFeuQ9mF8IdaBamFuBB7I7tKq3r+EXjnK0tPTxUoIzqqyCBooRIGM2NjX8d1HQIuKFys0cYY2eeJ3riYwinorHUndvmr3nt7Pj1eVNEa5LZALKIVrBTAnopVRx3HzOE44dDwsG3IRHPBxrtTnkv8p5yjLzvoLy72oaC+mvOvz+V79pZbRyYvJbwC80AFQ1GtPevAqFPxCuoxL57ql8ND2vDx7MVW2JTOuMQPdxDvSInmF/yU1ZT+Nd92eGcp97+RH4BE1XHHLDAtomPWmK8mpiYn/AvFOCmRGmLTm53WOOKpDhM/YqApQsLe+dYPnym1f9xvTVGQc8C4iE5Y1Ulj7eRQoTC7Ih1qFJiTQc7vwN9ZUbk6Z+ydp6L0Z2+Ws/uGrAyI8I2gF6yR0vDI6Uq9fDbsZACO3NQuGa3kr3XC7H+ClvJeP1/6IrbBqbNno0b4+xbMlmARngcRbAAAAABJRU5ErkJggg==",turquoiseBlue:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAgCAYAAAC/40AfAAAQDHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjapZlrciO5joX/cxWzhCRB8LEckiAjZgez/PnAlD1drrpxu+/YUZJKSmWSwMF5pMP+n/8+4b/4yTHmkLW20kt5+Mk99zR40Z73Z9zH+OT7eH9EPp/FX98P6fP+k3jLD/oc2Mrn+K/34/cJ3qfBK/3Lidr6fDB//aDnz/nbjxN9LiS+Il+FfU7UPyeS9H4QPycY77ae0lv96xbmfp/tayft/Rf84XzVpL5PP/+fK9Uz5TqS0pYoD4+fYkkS/ydBBi+UxySZA6PU9/V9LJ+VUJA/1en7p7Oi40vNfzzol658v/rRrU8F2NqPbuX0OUR+FLl8P//x/RD1z125pf/LlXP7vEq/vr/k2e+KflT/Fv9YO3fP7GLkQqnLZ1NfW7yvOG5yCb90Cyyt0J0ChhrP/tv5bWx+AQV71jP5XbHHRLtOzNHiiCfu+7ziYok57ZAqL1JaSe6bTWrqifXSv+y/8aQqXUwaXVy37VnS91rivWx/VrhXa1zZIoemyMkiX/nHv+GffuEcH4UYvZbjrRXrSsmLzTK8c/7IYXQknk9R9Rb46/fnj/dV6KB6lX1EOqee7ymmxv9jArmNFg5Unt8ZjNU+J6BEXFpZTBQ6QNeiaCzxqSlVCEpSo0GDpfvMTDoQVZOxyJRFCr1pyS/NV2q8hyZNvB14HzKjEyqFOWt0aNCsnBX81NzA0FDRrKpFqzbtOoqUXLSUUouT4qhSc6haS6211V5Hk5abttJqa6230VMXSFN76bW33vsYXHNw5sG3BweMMdOUmaeGWWadbfY5FvBZeekqq662+hqWTAz+sGLVmnUbO26gtPPWXXbdbfc9DlA7Ek4+esqpp51+xnfXPm397fcfdC1+upZup/zA+t013q316xTR6US9ZzQshRzpePUWAOjkPXtazDl557xnT4f+RBOLVO+ZRe8YHcw7Jj3xq3chvR31zv2/+hZq/qVv6T/tXPDW/cPO/d63P3XNnITX7dg7hV7UR5g+Pt9tpDZc7H57Dl8vmBBZjQJKZuNivLe6qJ0KRa10Ri3sSNYUdlTSNhm2fHrW3q2WHUz5Uoy2+qhR1zpd42Kfqyg8pnJK5+GxtfY5jWIPR8pZTsbIJJvx55WD1SrglQsUYzWZesXZ6EkvyWy2BWNz5ii8eI4Oy0Oimkb6skc7bSy6pxpOdJYYfF/3mc9YVbJGen163LX5y4iCvNVAAtgR2sr6lTeca5byylbY04Zy0lkYmkRfF1ReNGUqriVaiyxjp7FhRh2DtvV1qia+03tuAKqzuDlD4XICE9HCqRXrsGVorgIPmcFOOteac6Su7GnsGruyokw9o4BjmR0ARLQ/jwP6BpXm2fXsKYML5BPnaTWtkxc79oIWNTBfe9+FB/A3Oe2s0XJfVYMAPuF6JY3l7goPEzen6iXzT9eoNnwSlc5YYkriFIq5D4N668YUQbg5qBuit6R/55niMfQdTow+0WNvrlaf1sLs3mChUH0c5PChozp06pmlnrJKn4+UbX1r7SOmvPuc0vZs2/wMjDgk0VtYqxjIM1dYscoJtGQYvTb2n5n30Tkf6BursV16Av77ZMB90ucZjDxYsOCHFZuw/1vDvlhJ2YKlPEbd6M9gX8Of00jJTeEY176YG8UDIkBnDqWu7YSyZCM+pjMmOzPXqic9Xsw0s7SV/vW4vs+h3T69/xsRhPcJA/Sdzz51OUPUep69F73eWyzNJidiM5NDYiJEZ04GNnB1WcvGinPN48iEv549+ZStTUt7SN8AY5cIG9bWk7bOPPaUgcRz+LSVmWDI8kBTtZh2O42TplnioNGx7n0YJGe0/MGpMZq1AeLCRxkQIcHZWtMZWkOYa88AP85ZhWvSFmu7zEatE3LewfssC3ZnGhI96iseCHaPafkLlUH/LhpjPVm8LgypZPNX44wGO2V4BWJzCQCLcAzitjMDL/VsLue27FlaJ3tjC3UIVH0aX20MX/5u6a6/UK2/lR05de6JOMTWtzzmBhEZYzQ5Tc+QRtkKC9YEqcF9A/RZKmUGwysy8sNYYWlXNWiILrihT3uAes1rQlP7OTTjHJGzo8IDA+YjV1BReKcFo2UGWgBGbZy/l2nQtwGauIVsUNEpOtFTNdaky7kYApqIyuqMhM7HAEsYYApVU0e+i1uMrCdDT3PpQT+o20OXgEPZwBKiy8REeBwv22wNhA5Bw0S4okzNG35mqDMMaVTl0jZunyl6QV/5IMFkSB8EhX0DGTOBi1E3FHh6YICd/fbZ4/06lbX8tzHBVIELRJmYhTI5dvUigxWcYq4Df0CDx70vPGi03hkp6OEsbTWM9+TQzpH22dKT0T0MjdSiEHJh5OJZggTYdLMzQTrDW3BGMmGpBZcF9X0z4AtKWwK71Mlw8mpfgj5HYVNo7UEJEzPBtxjkTEBt6xiDdAYsVyTggptVFBK7tJCwXhycUQBHmk9VZ/3J+pb3qKMXk1kDsJQHfRGmOO1mD64WS8OJ0Eeqv1D4zfekuw8Alrkkx9LjBMkc3TpyalBHtw5Xm1+VDScVdJByj0tUsFq2crIXUjrAbSZdLdHUDWjevuKdTvvuH+xOA8I2f1EAKCEsU6bqJ4QXzzao7UMTENho75h6mPnDc/jLGx7P0oco6u9EYdiMpB/YXNQAhxc37C0AG5j2d1zgmN99oAv7G39lrE2WwVFQSAFzbnfZdi/BBwI23hOlS9XNbWHOC2yaHOWQ9oTRCrS1eQCsRiZNyb0OeIoHcMQ9FRzlZgfXBoPgG/YqcPO5y4YO8EsTN94fJ4UOxYCqOfjFF1d8ImG042Oa7BbE+CgSfPkaACzizdHSzO8HQQSivWFjk/uYPAm08ML0Oxlj5EZNYNeJky5h4/oWxdnIP68xUhgQCmDb/TYGDPUfczW4nmnWYhgam4adQQ9nq24MODXIPlg1aQgIBmG4KYBBB/XDdGW3ZoYLVazkgYAIVFTlwK4oWesYQAwzSyS9Bwwc9beJo2LIKe9nhuPWn5j7E+S+ARf+NuJ+AI5xvnBboOjArMH78+INjoT6cnMQWNkJokBBi1tjvoBTcpOw0GLGKTvF6zLyB5RSqzEiWyhCQviNkiMvIpQOx4LrwlWnOuDTzs49wpNvcMOgHkfsdhrCByEJeJQAQAYxI/9cPgrQYWbsg7iGRgjlDKlb4Xckeidy0ioTqwt/kXRC58hFGsNjt4ovxYBjL5W8R/hT7XnW99wkrPYXxgYc+FmK293mkftBSbYluHaDfDay1ODagSwdcVET7CMc1zkXWy7L8wYA5IChD6II2pNLesCUUOmHHDST05V6iKiQq8PmoDmMeNcbZK6FWBVCpawscajPgdd3bJw/1UBI8UH1ysPGVCYlDDnj6tmki5t/5Jb7oL554rFh39P35a524lgrMIZUxqLORIcNkO7x/RXcZPyxGhIwZcMpmacKIm3vHoF2AEv6TCwP0XopjZ/uAeBiPC7ChlawzcowIPcoBGrObFFLl9TmbeE0fk8y/Abey4xQX2OPm2TjWefgu434eMCaE7EJlhrXcpAJ5sr1MLB+qkP21oEJngtlRWw20WXjJTHJfIOMRjlLYYc7ERNIxcL2ngjaKRDb3zm4D0JVkQ76ZejoBgasfHm8w+27PrWH/0ZoMvZ9PDrgEzzjEkOQzDnJbkQI1HJBrBNpg1bh54gCP57oSZoZzBG/1hJscm+5OwOcymQAn3kqafWSBWYU7/MR/H/57Gk5ne7UuGEn0+RqeW0SRBrZ8rM2bkQBoHtdbCbaCiHS3GevBXYqChEHkZM98k4io4Fq0ihehV0el5yi7vcsRCzHvmBbM4Oo4a4x9YohJUqwb6FgdoRVVSNIMP8kIi3drSHjMD0erTpCd1qn2+IAyR4Xn+OxoVV4EW9CcmBAS3FzARHEKOWgUXZ3TSn9Bpt/xqxBOeJI1a6CyMAwjRiF3/e/JahO+ALcwOUv1OKf3VvwF9jMhkhgPI3gb9uQQhJJzbXjfvMaxLbtaRxOwNgCb3X4uRYOiz7osgKpTT2ZiC2mA9JthP7l4XQXDvNIZH6Nx/1KvNcgGfl9pfVeY7x3uIN7qsn6VckwqA/DCE/hAwWjS0bT5PMFh6KIU2K5UgGJ/Ix+4YFxAUUpGO0Me16HlBLJ7N7AQusY3EcIWpSY/uKmPCBwIAFCvQYH4Sq0P7IYOMwnxzWcdIWHncQITB62vKWGnQbwwIIh89FHLkkihUyJojCjWwnCoSMnqNp+Ch1HL15exsqP9K8hT6ZgXSU7pmveB8AGGhsxIxlEyHRUR3cGFd8hfjvtNrz92ygnOfjoHMkd29zd1JwEFSO/SCM5lh17sqkGRs7usAhuExZRQktLhdkDmdiGOJg1RK3xBb/1jrvVxQA0D7/QbBloVoU3K/pM/Ohk1Qaj8QVcNmkrI0FV3QSH6Dcw8A5GhK24M4zXqUJ92Tk05ARIVVudK89Xbcltox5yHiNKxriMivWDmO/UTi/bMKIGLoOeM0TEp1z9htwS1HXZ5c5l8EYb+G+mFgEnw/UmWgJenLHN08Coma6DCSK7em/xWlxCM3XiubnDtT08jiIgBFVwljwbIIS6gjMmRtygIiwfowtA/G9kD21jsjGMrXa/fSBQYuxsTByznPXeSirOK3q7VisGrAOqjgQwRMAcYSSn5ERQfKN0QqVcZ5YyKPgX9sls0HlmaeJ8KromfhsYSNjoiZHmlExMo4iwUqrYCl+y3HtnfmNQi9f5yJWlV4OH5YUc0dd7/39TXvB8ovgND7Sdo/e9twbhx/fmZU7YeMcrEsCM0TDfzGyM9AxM+IgMBLI9JsPKaY+TeInkhPeW30IgFsQJbPrUODmW2UTFoTGuACs4sW1K0akJGvg1Cf/+ZtHnmbX67RbAU2uwXvYoDS8GzzKM5LRNYql+H/NQs4gJEjDb88GPp/sXRsyH39RdW+vohMhra6bf0T0EU4pL1EBKRvV8yMCw/e5BHtJwrJAeico3PhZTupL9jk71O511WcC+53vPadEifNmqD/6+Ca1a+B57arkpfxFk/S4oBApPH1aOizMC7lK/D7cCm8Gpmdv8LMsTKPbUoy1mXBbBt/uYUu7kt8X4iEBJVtkKezRr12rliBml/GgfMnphhinBrj0+tkwZfgmFOlagbcwpjomMXOgZY+i+WTBVpb6OMbB3ZnOgIMktAhxTMxLpZXCJvwYdgJdOAiLLEXEflQefJrV5ANNaUX5MRN1kPYPqoWe/TcPEkUmoDPyNRmNehZrh+bo7Yohe/P4KKbNMwW7XxCDD7hYmLI3RhiJ8hjBiC6vitzy3/9nFcwD2X+tecsqjzW1bh3oWs0z623xJIO5TgydMFMUaXh1X4RiCLcheaIZHJKDKqm4NMcBcTmjxGP3GAdIIVtIepjocEsqDaI07Tyi2npk9YovfGDpzY4E8CST/O91aOT5FPS24MRIS9Ze+hF+Ehmaa/4H7fwGCg3GYVGiblAAAAYRpQ0NQSUNDIHByb2ZpbGUAAHicfZE9SMNQFIVPW0tFKx3sUMQhQ3WyICriqFUoQoVQK7TqYPLSP2jSkKS4OAquBQd/FqsOLs66OrgKguAPiKuLk6KLlHhfUmgR44PL+zjvncN99wH+ZpWpZs84oGqWkUklhVx+VQi9IogYIlT9EjP1OVFMw3N93cPH97sEz/K+9+caUAomA3wC8SzTDYt4g3h609I57xNHWVlSiM+JxwxqkPiR67LLb5xLDvt5ZtTIZuaJo8RCqYvlLmZlQyWeIo4rqkb5/pzLCuctzmq1ztp98heGC9rKMtephpHCIpYgQoCMOiqowkKCdo0UExk6T3r4hxy/SC6ZXBUwciygBhWS4wf/g9+zNYuTE25SOAkEX2z7YwQI7QKthm1/H9t26wQIPANXWsdfawIzn6Q3Olr8CIhsAxfXHU3eAy53gNiTLhmSIwWo/MUi8H5G35QHBm+BvjV3bu1znD4AWZpV+gY4OARGS5S97vHu3u65/XunPb8fN2tyj8UDOK0AAA0aaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJYTVAgQ29yZSA0LjQuMC1FeGl2MiI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczpHSU1QPSJodHRwOi8vd3d3LmdpbXAub3JnL3htcC8iCiAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgeG1wTU06RG9jdW1lbnRJRD0iZ2ltcDpkb2NpZDpnaW1wOjEwNGNlNWFhLTE1YzctNGI4Yi1iOGU1LTFmYWQyNWFiYzBhZCIKICAgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpkNDMyZTY1Zi0xOThhLTQxM2EtYWYyMy1jNzhlNzczNGRlN2QiCiAgIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyNzExODVkMi03MWZiLTRhZDMtYTJmMi1iNjM3OWU3MDc1OTEiCiAgIGRjOkZvcm1hdD0iaW1hZ2UvcG5nIgogICBHSU1QOkFQST0iMi4wIgogICBHSU1QOlBsYXRmb3JtPSJMaW51eCIKICAgR0lNUDpUaW1lU3RhbXA9IjE2ODQ5NDE4NjYyMzgzMjQiCiAgIEdJTVA6VmVyc2lvbj0iMi4xMC4zMCIKICAgdGlmZjpPcmllbnRhdGlvbj0iMSIKICAgeG1wOkNyZWF0b3JUb29sPSJHSU1QIDIuMTAiPgogICA8eG1wTU06SGlzdG9yeT4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkKICAgICAgc3RFdnQ6YWN0aW9uPSJzYXZlZCIKICAgICAgc3RFdnQ6Y2hhbmdlZD0iLyIKICAgICAgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo1NGFiYzNkYS1lZWJiLTRlZjctYjdjNS04ZDRjODY5OGVjODMiCiAgICAgIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkdpbXAgMi4xMCAoTGludXgpIgogICAgICBzdEV2dDp3aGVuPSIyMDIzLTA1LTI0VDE3OjI0OjI2KzAyOjAwIi8+CiAgICA8L3JkZjpTZXE+CiAgIDwveG1wTU06SGlzdG9yeT4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pj0tlUwAAAAJcEhZcwAADdcAAA3XAUIom3gAAAAHdElNRQfnBRgPGBru/VeEAAAABmJLR0QA/wD/AP+gvaeTAAAFO0lEQVRYw9WYe2xTVRzHTx97dYS5B1UHa+/tY12dDoOKWyIGlfgHkCkSNTHGwHxA3NiAP/A5x4CMKEzdYL29YyAyBxKQZbI+NvYIaowaH9Ogi2GRbGjcFrbBNrq2a2/9nq5LCFnbbfSOeZJPTs/t6Tm/7/39zu+cU0IiXc7WSImNX0BsZiVYAhigmah5tHklsZrjSYtJSuZtaeSiiJU3gHUwfC9oARfBIHBP1DzaPH1eRuzmp0E6aTgSNX9EWMwSvOkMGPgG+CpguG8a0H7nA78zkMYqye0V0lYXDSHrYUw7cE5TxM04/b+38+vJ+RPRt0eIjVeAAhhyCQizFDKJEBjndaCY49Di4+CRlzFxfwSE3Ciol9i4DSBujoRUy7HIszFxdwSF3CioBy8qm1g5ufhirHwyJqwHrrDGWTlg8hFL1URN2+EF0XFPkyYuSWwhUVgnT2CygXBG3dFcM7bz1/au1u7OK9/93eWidUlHe1dCc810EsUAsXOPQZCI3rGZ6Wb4EXAEM0SCUFnZduz6T/09l4bHXYOCz+f0+XxeWg+7XYM/4vnKtlqHJHSIOrAHlYMFYmawRNCKycaDGZLVfMRdf/nPDpfXM+abotDnpy93dtzXfNgdZg+im2uimJ6h66UTeIMZsrat1jvkdPRRb/imLt4hl6N3DfqFEIPvOMzDJYspJsWfbUKEyFNttcKoyzkKo4UgYoRRt3OE9guT1br984nsmQ7gCWbIipaj4xeu9v/hFQTPlG7B89+u9v9O+4UQQ8f/BSlaVM8kgBOhji4p9mpvwQ+Wfwddjp6bQw2u8g44HT3535/tTUa/0Eccvg4sFDE1m2PBZkx2LVRqVcLQvG/PDDX1/tVxze38x+UZH6O1He28b764qgwtxOcf327eBGLFE9NikiD3qzDZhVBJgCJH3KubDnkfbD4s5Jw74qM1bcvDnxq8/vHt1SrS9InIJ2m7OQ4UYsKhCB9lJqHj0gPsHJzPvsS9w8rRRPDptI40M8PlH9fOJ5M5K008rsZmIwi5gc4QN9Zja8zn+5epch9PTFepU1iGuVunVqeyS9g0iv8zy96l0WiSjIsXx28iJEJhaONkMGB5YP14bkmI1SzIz1T0pRa9VKnNzCjUMcwWUAS2BtgWYLJN+xTo1OyrOhW7xsAwqnSGkd3i+uGjkT5Xw6DLt3AdEKQNB4YXbdtwQpuVuRtG7pwhxWA7vJgRib0nDuSDvtkIkjYcHE3aVWjRLL9/zyyETPK2Vq3OidAaOhiPDLcbxo3MRIik0eReWPnO15pHHiqbpYhS6hkNw7wAz0To6GM5hAzH3wkDa6b7x4bEwnkUfMnP6idX7Nex7GxElIDNerV6hU6jSdbp9RHck2w0w/FaGGoJm7KtnCfmWNlF1fOrK3Q6bekMRFABO7QM8yxewFLUi+5JSxPpAmcxy0gjt1Rytir4NcHKCfJTH/al5j1j1hr0pWEML55YD+x2GP6cVqNZZjQYEvUsG4vP4v8jKju5L1p6qnytxGKa6qogyOorBpVbXvxMe69xdxABb9I0DAGvIIRWp7NsBsJIoWVZKfaXuf+jMKp2b6z8+Adb4aErNwpCCh5J2pnfoH0ga08g7invBfaQjXjjuQifhyEgLdNolJP5UqR17y+QnSwvk1i565OZK6F8RzubvWwvDH8LvKZnmHXY8HKws+sNLJtI5muJ/7hYElOzJ1V+fN9R7CVDClPJOVXuqo06vS4HQjTwgDKDZRXk/1JiD7wrieFLk6T1lczCXUVK7aPZinS9XrTw+Q+Tql7SUmvGuQAAAABJRU5ErkJggg==",defaultOffset:[-25.5,-32]};class FeatureFormat{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=Feature,this.supportedMediaTypes=null}getReadOptions(e,t){if(t){let ke=t.dataProjection?get$3(t.dataProjection):this.readProjection(e);t.extent&&ke&&ke.getUnits()==="tile-pixels"&&(ke=get$3(ke),ke.setWorldExtent(t.extent)),t={dataProjection:ke,featureProjection:t.featureProjection}}return this.adaptOptions(t)}adaptOptions(e){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},e)}getType(){return abstract()}readFeature(e,t){return abstract()}readFeatures(e,t){return abstract()}readGeometry(e,t){return abstract()}readProjection(e){return abstract()}writeFeature(e,t){return abstract()}writeFeatures(e,t){return abstract()}writeGeometry(e,t){return abstract()}}function transformGeometryWithOptions(Oe,e,t){const ke=t?get$3(t.featureProjection):null,Ge=t?get$3(t.dataProjection):null;let Be=Oe;if(ke&&Ge&&!equivalent(ke,Ge)){e&&(Be=Oe.clone());const je=e?ke:Ge,Ve=e?Ge:ke;je.getUnits()==="tile-pixels"?Be.transform(je,Ve):Be.applyTransform(getTransform(je,Ve))}if(e&&t&&t.decimals!==void 0){const je=Math.pow(10,t.decimals),Ve=function(Ze){for(let Qe=0,en=Ze.length;Qe<en;++Qe)Ze[Qe]=Math.round(Ze[Qe]*je)/je;return Ze};Be===Oe&&(Be=Oe.clone()),Be.applyTransform(Ve)}return Be}const GeometryConstructor={Point:Point$1,LineString,Polygon,MultiPoint,MultiLineString,MultiPolygon};function orientFlatCoordinates(Oe,e,t){return Array.isArray(e[0])?(linearRingssAreOriented(Oe,0,e,t)||(Oe=Oe.slice(),orientLinearRingsArray(Oe,0,e,t)),Oe):(linearRingsAreOriented(Oe,0,e,t)||(Oe=Oe.slice(),orientLinearRings(Oe,0,e,t)),Oe)}function createRenderFeature(Oe,e){var Be;const t=Oe.geometry;if(!t)return[];if(Array.isArray(t))return t.map(je=>createRenderFeature({...Oe,geometry:je})).flat();const ke=t.type==="MultiPolygon"?"Polygon":t.type;if(ke==="GeometryCollection"||ke==="Circle")throw new Error("Unsupported geometry type: "+ke);const Ge=t.layout.length;return transformGeometryWithOptions(new RenderFeature(ke,ke==="Polygon"?orientFlatCoordinates(t.flatCoordinates,t.ends,Ge):t.flatCoordinates,(Be=t.ends)==null?void 0:Be.flat(),Ge,Oe.properties||{},Oe.id).enableSimplifyTransformed(),!1,e)}function createGeometry(Oe,e){if(!Oe)return null;if(Array.isArray(Oe)){const ke=Oe.map(Ge=>createGeometry(Ge,e));return new GeometryCollection(ke)}const t=GeometryConstructor[Oe.type];return transformGeometryWithOptions(new t(Oe.flatCoordinates,Oe.layout,Oe.ends),!1,e)}const XML_SCHEMA_INSTANCE_URI="http://www.w3.org/2001/XMLSchema-instance";function createElementNS(Oe,e){return getDocument().createElementNS(Oe,e)}function getAllTextContent(Oe,e){return getAllTextContent_(Oe,e,[]).join("")}function getAllTextContent_(Oe,e,t){if(Oe.nodeType==Node.CDATA_SECTION_NODE||Oe.nodeType==Node.TEXT_NODE)t.push(Oe.nodeValue);else{let ke;for(ke=Oe.firstChild;ke;ke=ke.nextSibling)getAllTextContent_(ke,e,t)}return t}function isDocument(Oe){return"documentElement"in Oe}function parse$1(Oe){return new DOMParser().parseFromString(Oe,"application/xml")}function makeArrayExtender(Oe,e){return function(t,ke){const Ge=Oe.call(e??this,t,ke);if(Ge!==void 0){const Be=ke[ke.length-1];extend$4(Be,Ge)}}}function makeArrayPusher(Oe,e){return function(t,ke){const Ge=Oe.call(e??this,t,ke);Ge!==void 0&&ke[ke.length-1].push(Ge)}}function makeReplacer(Oe,e){return function(t,ke){const Ge=Oe.call(this,t,ke);Ge!==void 0&&(ke[ke.length-1]=Ge)}}function makeObjectPropertyPusher(Oe,e,t){return function(ke,Ge){const Be=Oe.call(this,ke,Ge);if(Be!==void 0){const je=Ge[Ge.length-1],Ve=ke.localName;let Ze;Ve in je?Ze=je[Ve]:(Ze=[],je[Ve]=Ze),Ze.push(Be)}}}function makeObjectPropertySetter(Oe,e,t){return function(ke,Ge){const Be=Oe.call(this,ke,Ge);if(Be!==void 0){const je=Ge[Ge.length-1],Ve=e!==void 0?e:ke.localName;je[Ve]=Be}}}function makeChildAppender(Oe,e){return function(t,ke,Ge){Oe.call(this,t,ke,Ge),Ge[Ge.length-1].node.appendChild(t)}}function makeArraySerializer(Oe,e){let t,ke;return function(Ge,Be,je){if(t===void 0){t={};const Ve={};Ve[Ge.localName]=Oe,t[Ge.namespaceURI]=Ve,ke=makeSimpleNodeFactory(Ge.localName)}serialize(t,ke,Be,je)}}function makeSimpleNodeFactory(Oe,e){return function(t,ke,Ge){const je=ke[ke.length-1].node;let Ve=Oe;Ve===void 0&&(Ve=Ge);const Ze=je.namespaceURI;return createElementNS(Ze,Ve)}}const OBJECT_PROPERTY_NODE_FACTORY=makeSimpleNodeFactory();function makeSequence(Oe,e){const t=e.length,ke=new Array(t);for(let Ge=0;Ge<t;++Ge)ke[Ge]=Oe[e[Ge]];return ke}function makeStructureNS(Oe,e,t){t=t!==void 0?t:{};let ke,Ge;for(ke=0,Ge=Oe.length;ke<Ge;++ke)t[Oe[ke]]=e;return t}function parseNode(Oe,e,t,ke){let Ge;for(Ge=e.firstElementChild;Ge;Ge=Ge.nextElementSibling){const Be=Oe[Ge.namespaceURI];if(Be!==void 0){const je=Be[Ge.localName];je!==void 0&&je.call(ke,Ge,t)}}}function pushParseAndPop(Oe,e,t,ke,Ge){return ke.push(Oe),parseNode(e,t,ke,Ge),ke.pop()}function serialize(Oe,e,t,ke,Ge,Be){const je=(Ge!==void 0?Ge:t).length;let Ve,Ze;for(let Qe=0;Qe<je;++Qe)Ve=t[Qe],Ve!==void 0&&(Ze=e.call(Be,Ve,ke,Ge!==void 0?Ge[Qe]:void 0),Ze!==void 0&&Oe[Ze.namespaceURI][Ze.localName].call(Be,Ze,Ve,ke))}function pushSerializeAndPop(Oe,e,t,ke,Ge,Be,je){return Ge.push(Oe),serialize(e,t,ke,Ge,Be,je),Ge.pop()}let xmlSerializer_;function getXMLSerializer(){return xmlSerializer_===void 0&&typeof XMLSerializer<"u"&&(xmlSerializer_=new XMLSerializer),xmlSerializer_}let document_;function getDocument(){return document_===void 0&&typeof document<"u"&&(document_=document.implementation.createDocument("","",null)),document_}class XMLFeature extends FeatureFormat{constructor(){super(),this.xmlSerializer_=getXMLSerializer()}getType(){return"xml"}readFeature(e,t){if(!e)return null;if(typeof e=="string"){const ke=parse$1(e);return this.readFeatureFromDocument(ke,t)}return isDocument(e)?this.readFeatureFromDocument(e,t):this.readFeatureFromNode(e,t)}readFeatureFromDocument(e,t){const ke=this.readFeaturesFromDocument(e,t);return ke.length>0?ke[0]:null}readFeatureFromNode(e,t){return null}readFeatures(e,t){if(!e)return[];if(typeof e=="string"){const ke=parse$1(e);return this.readFeaturesFromDocument(ke,t)}return isDocument(e)?this.readFeaturesFromDocument(e,t):this.readFeaturesFromNode(e,t)}readFeaturesFromDocument(e,t){const ke=[];for(let Ge=e.firstChild;Ge;Ge=Ge.nextSibling)Ge.nodeType==Node.ELEMENT_NODE&&extend$4(ke,this.readFeaturesFromNode(Ge,t));return ke}readFeaturesFromNode(e,t){return abstract()}readGeometry(e,t){if(!e)return null;if(typeof e=="string"){const ke=parse$1(e);return this.readGeometryFromDocument(ke,t)}return isDocument(e)?this.readGeometryFromDocument(e,t):this.readGeometryFromNode(e,t)}readGeometryFromDocument(e,t){return null}readGeometryFromNode(e,t){return null}readProjection(e){if(!e)return null;if(typeof e=="string"){const t=parse$1(e);return this.readProjectionFromDocument(t)}return isDocument(e)?this.readProjectionFromDocument(e):this.readProjectionFromNode(e)}readProjectionFromDocument(e){return this.dataProjection}readProjectionFromNode(e){return this.dataProjection}writeFeature(e,t){const ke=this.writeFeatureNode(e,t);return this.xmlSerializer_.serializeToString(ke)}writeFeatureNode(e,t){return null}writeFeatures(e,t){const ke=this.writeFeaturesNode(e,t);return this.xmlSerializer_.serializeToString(ke)}writeFeaturesNode(e,t){return null}writeGeometry(e,t){const ke=this.writeGeometryNode(e,t);return this.xmlSerializer_.serializeToString(ke)}writeGeometryNode(e,t){return null}}function readBoolean(Oe){const e=getAllTextContent(Oe,!1);return readBooleanString(e)}function readBooleanString(Oe){const e=/^\s*(true|1)|(false|0)\s*$/.exec(Oe);if(e)return e[1]!==void 0||!1}function readDateTime(Oe){const e=getAllTextContent(Oe,!1),t=Date.parse(e);return isNaN(t)?void 0:t/1e3}function readDecimal(Oe){const e=getAllTextContent(Oe,!1);return readDecimalString(e)}function readDecimalString(Oe){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(Oe);if(e)return parseFloat(e[1])}function readPositiveInteger(Oe){const e=getAllTextContent(Oe,!1);return readNonNegativeIntegerString(e)}function readNonNegativeIntegerString(Oe){const e=/^\s*(\d+)\s*$/.exec(Oe);if(e)return parseInt(e[1],10)}function readString(Oe){return getAllTextContent(Oe,!1).trim()}function writeBooleanTextNode(Oe,e){writeStringTextNode(Oe,e?"1":"0")}function writeCDATASection(Oe,e){Oe.appendChild(getDocument().createCDATASection(e))}function writeDateTimeTextNode(Oe,e){const t=new Date(e*1e3),ke=t.getUTCFullYear()+"-"+padNumber(t.getUTCMonth()+1,2)+"-"+padNumber(t.getUTCDate(),2)+"T"+padNumber(t.getUTCHours(),2)+":"+padNumber(t.getUTCMinutes(),2)+":"+padNumber(t.getUTCSeconds(),2)+"Z";Oe.appendChild(getDocument().createTextNode(ke))}function writeDecimalTextNode(Oe,e){const t=e.toPrecision();Oe.appendChild(getDocument().createTextNode(t))}function writeNonNegativeIntegerTextNode(Oe,e){const t=e.toString();Oe.appendChild(getDocument().createTextNode(t))}function writeStringTextNode(Oe,e){Oe.appendChild(getDocument().createTextNode(e))}const GX_NAMESPACE_URIS=["http://www.google.com/kml/ext/2.2"],NAMESPACE_URIS$4=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],SCHEMA_LOCATION$1="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",ICON_ANCHOR_UNITS_MAP={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},PLACEMARK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,MultiGeometry:makeObjectPropertySetter(readMultiGeometry,"geometry"),LineString:makeObjectPropertySetter(readLineString,"geometry"),LinearRing:makeObjectPropertySetter(readLinearRing,"geometry"),Point:makeObjectPropertySetter(readPoint,"geometry"),Polygon:makeObjectPropertySetter(readPolygon,"geometry"),Style:makeObjectPropertySetter(readStyle$2),StyleMap:placemarkStyleMapParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL),visibility:makeObjectPropertySetter(readBoolean)},makeStructureNS(GX_NAMESPACE_URIS,{MultiTrack:makeObjectPropertySetter(readGxMultiTrack,"geometry"),Track:makeObjectPropertySetter(readGxTrack,"geometry")})),NETWORK_LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:extendedDataParser,Region:regionParser,Link:linkParser,address:makeObjectPropertySetter(readString),description:makeObjectPropertySetter(readString),name:makeObjectPropertySetter(readString),open:makeObjectPropertySetter(readBoolean),phoneNumber:makeObjectPropertySetter(readString),visibility:makeObjectPropertySetter(readBoolean)}),LINK_PARSERS$1=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)}),CAMERA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Altitude:makeObjectPropertySetter(readDecimal),Longitude:makeObjectPropertySetter(readDecimal),Latitude:makeObjectPropertySetter(readDecimal),Tilt:makeObjectPropertySetter(readDecimal),AltitudeMode:makeObjectPropertySetter(readString),Heading:makeObjectPropertySetter(readDecimal),Roll:makeObjectPropertySetter(readDecimal)}),REGION_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LatLonAltBox:latLonAltBoxParser,Lod:lodParser}),KML_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["Document","Placemark"]),KML_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Document:makeChildAppender(writeDocument),Placemark:makeChildAppender(writePlacemark)});let DEFAULT_COLOR,DEFAULT_FILL_STYLE=null,DEFAULT_IMAGE_STYLE_ANCHOR,DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,DEFAULT_IMAGE_STYLE_SIZE,DEFAULT_IMAGE_STYLE_SRC,DEFAULT_IMAGE_STYLE=null,DEFAULT_NO_IMAGE_STYLE,DEFAULT_STROKE_STYLE=null,DEFAULT_TEXT_STROKE_STYLE,DEFAULT_TEXT_STYLE=null,DEFAULT_STYLE=null,DEFAULT_STYLE_ARRAY=null;function scaleForSize(Oe){return 32/Math.min(Oe[0],Oe[1])}function createStyleDefaults(){DEFAULT_COLOR=[255,255,255,1],DEFAULT_FILL_STYLE=new Fill({color:DEFAULT_COLOR}),DEFAULT_IMAGE_STYLE_ANCHOR=[20,2],DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS="pixels",DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS="pixels",DEFAULT_IMAGE_STYLE_SIZE=[64,64],DEFAULT_IMAGE_STYLE_SRC="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",DEFAULT_IMAGE_STYLE=new Icon({anchor:DEFAULT_IMAGE_STYLE_ANCHOR,anchorOrigin:"bottom-left",anchorXUnits:DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,anchorYUnits:DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS,crossOrigin:"anonymous",rotation:0,scale:scaleForSize(DEFAULT_IMAGE_STYLE_SIZE),size:DEFAULT_IMAGE_STYLE_SIZE,src:DEFAULT_IMAGE_STYLE_SRC}),DEFAULT_NO_IMAGE_STYLE="NO_IMAGE",DEFAULT_STROKE_STYLE=new Stroke({color:DEFAULT_COLOR,width:1}),DEFAULT_TEXT_STROKE_STYLE=new Stroke({color:[51,51,51,1],width:2}),DEFAULT_TEXT_STYLE=new Text({font:"bold 16px Helvetica",fill:DEFAULT_FILL_STYLE,stroke:DEFAULT_TEXT_STROKE_STYLE,scale:.8}),DEFAULT_STYLE=new Style$1({fill:DEFAULT_FILL_STYLE,image:DEFAULT_IMAGE_STYLE,text:DEFAULT_TEXT_STYLE,stroke:DEFAULT_STROKE_STYLE,zIndex:0}),DEFAULT_STYLE_ARRAY=[DEFAULT_STYLE]}let TEXTAREA;function defaultIconUrlFunction(Oe){return Oe}let KML$1=class extends XMLFeature{constructor(e){super(),e=e||{},DEFAULT_STYLE_ARRAY||createStyleDefaults(),this.dataProjection=get$3("EPSG:4326"),this.defaultStyle_=e.defaultStyle?e.defaultStyle:DEFAULT_STYLE_ARRAY,this.extractStyles_=e.extractStyles!==void 0?e.extractStyles:!0,this.writeStyles_=e.writeStyles!==void 0?e.writeStyles:!0,this.sharedStyles_={},this.showPointNames_=e.showPointNames!==void 0?e.showPointNames:!0,this.crossOrigin_=e.crossOrigin!==void 0?e.crossOrigin:"anonymous",this.iconUrlFunction_=e.iconUrlFunction?e.iconUrlFunction:defaultIconUrlFunction,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(e,t){const ke=makeStructureNS(NAMESPACE_URIS$4,{Document:makeArrayExtender(this.readDocumentOrFolder_,this),Folder:makeArrayExtender(this.readDocumentOrFolder_,this),Placemark:makeArrayPusher(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),Ge=pushParseAndPop([],ke,e,t,this);if(Ge)return Ge}readPlacemark_(e,t){const ke=pushParseAndPop({geometry:null},PLACEMARK_PARSERS,e,t,this);if(!ke)return;const Ge=new Feature,Be=e.getAttribute("id");Be!==null&&Ge.setId(Be);const je=t[0],Ve=ke.geometry;if(Ve&&transformGeometryWithOptions(Ve,!1,je),Ge.setGeometry(Ve),delete ke.geometry,this.extractStyles_){const Ze=ke.Style,Qe=ke.styleUrl,en=createFeatureStyleFunction(Ze,Qe,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);Ge.setStyle(en)}return delete ke.Style,Ge.setProperties(ke,!0),Ge}readSharedStyle_(e,t){const ke=e.getAttribute("id");if(ke!==null){const Ge=readStyle$2.call(this,e,t);if(Ge){let Be,je=e.baseURI;(!je||je=="about:blank")&&(je=window.location.href),je?Be=new URL("#"+ke,je).href:Be="#"+ke,this.sharedStyles_[Be]=Ge}}}readSharedStyleMap_(e,t){const ke=e.getAttribute("id");if(ke===null)return;const Ge=readStyleMapValue.call(this,e,t);if(!Ge)return;let Be,je=e.baseURI;(!je||je=="about:blank")&&(je=window.location.href),je?Be=new URL("#"+ke,je).href:Be="#"+ke,this.sharedStyles_[Be]=Ge}readFeatureFromNode(e,t){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return null;const ke=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return ke||null}readFeaturesFromNode(e,t){if(!NAMESPACE_URIS$4.includes(e.namespaceURI))return[];let ke;const Ge=e.localName;if(Ge=="Document"||Ge=="Folder")return ke=this.readDocumentOrFolder_(e,[this.getReadOptions(e,t)]),ke||[];if(Ge=="Placemark"){const Be=this.readPlacemark_(e,[this.getReadOptions(e,t)]);return Be?[Be]:[]}if(Ge=="kml"){ke=[];for(let Be=e.firstElementChild;Be;Be=Be.nextElementSibling){const je=this.readFeaturesFromNode(Be,t);je&&extend$4(ke,je)}return ke}return[]}readName(e){if(e){if(typeof e=="string"){const t=parse$1(e);return this.readNameFromDocument(t)}return isDocument(e)?this.readNameFromDocument(e):this.readNameFromNode(e)}}readNameFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE){const ke=this.readNameFromNode(t);if(ke)return ke}}readNameFromNode(e){for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(NAMESPACE_URIS$4.includes(t.namespaceURI)&&t.localName=="name")return readString(t);for(let t=e.firstElementChild;t;t=t.nextElementSibling){const ke=t.localName;if(NAMESPACE_URIS$4.includes(t.namespaceURI)&&(ke=="Document"||ke=="Folder"||ke=="Placemark"||ke=="kml")){const Ge=this.readNameFromNode(t);if(Ge)return Ge}}}readNetworkLinks(e){const t=[];if(typeof e=="string"){const ke=parse$1(e);extend$4(t,this.readNetworkLinksFromDocument(ke))}else isDocument(e)?extend$4(t,this.readNetworkLinksFromDocument(e)):extend$4(t,this.readNetworkLinksFromNode(e));return t}readNetworkLinksFromDocument(e){const t=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType==Node.ELEMENT_NODE&&extend$4(t,this.readNetworkLinksFromNode(ke));return t}readNetworkLinksFromNode(e){const t=[];for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling)if(NAMESPACE_URIS$4.includes(ke.namespaceURI)&&ke.localName=="NetworkLink"){const Ge=pushParseAndPop({},NETWORK_LINK_PARSERS,ke,[]);t.push(Ge)}for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Ge=ke.localName;NAMESPACE_URIS$4.includes(ke.namespaceURI)&&(Ge=="Document"||Ge=="Folder"||Ge=="kml")&&extend$4(t,this.readNetworkLinksFromNode(ke))}return t}readRegion(e){const t=[];if(typeof e=="string"){const ke=parse$1(e);extend$4(t,this.readRegionFromDocument(ke))}else isDocument(e)?extend$4(t,this.readRegionFromDocument(e)):extend$4(t,this.readRegionFromNode(e));return t}readRegionFromDocument(e){const t=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType==Node.ELEMENT_NODE&&extend$4(t,this.readRegionFromNode(ke));return t}readRegionFromNode(e){const t=[];for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling)if(NAMESPACE_URIS$4.includes(ke.namespaceURI)&&ke.localName=="Region"){const Ge=pushParseAndPop({},REGION_PARSERS,ke,[]);t.push(Ge)}for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Ge=ke.localName;NAMESPACE_URIS$4.includes(ke.namespaceURI)&&(Ge=="Document"||Ge=="Folder"||Ge=="kml")&&extend$4(t,this.readRegionFromNode(ke))}return t}readCamera(e){const t=[];if(typeof e=="string"){const ke=parse$1(e);extend$4(t,this.readCameraFromDocument(ke))}else isDocument(e)?extend$4(t,this.readCameraFromDocument(e)):extend$4(t,this.readCameraFromNode(e));return t}readCameraFromDocument(e){const t=[];for(let ke=e.firstChild;ke;ke=ke.nextSibling)ke.nodeType===Node.ELEMENT_NODE&&extend$4(t,this.readCameraFromNode(ke));return t}readCameraFromNode(e){const t=[];for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling)if(NAMESPACE_URIS$4.includes(ke.namespaceURI)&&ke.localName==="Camera"){const Ge=pushParseAndPop({},CAMERA_PARSERS,ke,[]);t.push(Ge)}for(let ke=e.firstElementChild;ke;ke=ke.nextElementSibling){const Ge=ke.localName;NAMESPACE_URIS$4.includes(ke.namespaceURI)&&(Ge==="Document"||Ge==="Folder"||Ge==="Placemark"||Ge==="kml")&&extend$4(t,this.readCameraFromNode(ke))}return t}writeFeaturesNode(e,t){t=this.adaptOptions(t);const ke=createElementNS(NAMESPACE_URIS$4[4],"kml"),Ge="http://www.w3.org/2000/xmlns/";ke.setAttributeNS(Ge,"xmlns:gx",GX_NAMESPACE_URIS[0]),ke.setAttributeNS(Ge,"xmlns:xsi",XML_SCHEMA_INSTANCE_URI),ke.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION$1);const Be={node:ke},je={};e.length>1?je.Document=e:e.length==1&&(je.Placemark=e[0]);const Ve=KML_SEQUENCE[ke.namespaceURI],Ze=makeSequence(je,Ve);return pushSerializeAndPop(Be,KML_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ze,[t],Ve,this),ke}};function createNameStyleFunction(Oe,e){const t=[0,0];let ke="start";const Ge=Oe.getImage();if(Ge){const Ve=Ge.getSize();if(Ve&&Ve.length==2){const Ze=Ge.getScaleArray(),Qe=Ge.getAnchor();t[0]=Ze[0]*(Ve[0]-Qe[0]),t[1]=Ze[1]*(Ve[1]/2-Qe[1]),ke="left"}}let Be=Oe.getText();return Be?(Be=Be.clone(),Be.setFont(Be.getFont()||DEFAULT_TEXT_STYLE.getFont()),Be.setScale(Be.getScale()||DEFAULT_TEXT_STYLE.getScale()),Be.setFill(Be.getFill()||DEFAULT_TEXT_STYLE.getFill()),Be.setStroke(Be.getStroke()||DEFAULT_TEXT_STROKE_STYLE)):Be=DEFAULT_TEXT_STYLE.clone(),Be.setText(e),Be.setOffsetX(t[0]),Be.setOffsetY(t[1]),Be.setTextAlign(ke),new Style$1({image:Ge,text:Be})}function createFeatureStyleFunction(Oe,e,t,ke,Ge){return function(Be,je){let Ve=Ge,Ze="",Qe=[];if(Ve){const tn=Be.getGeometry();if(tn)if(tn instanceof GeometryCollection)Qe=tn.getGeometriesArrayRecursive().filter(function(an){const cn=an.getType();return cn==="Point"||cn==="MultiPoint"}),Ve=Qe.length>0;else{const an=tn.getType();Ve=an==="Point"||an==="MultiPoint"}}Ve&&(Ze=Be.get("name"),Ve=Ve&&!!Ze,Ve&&/&[^&]+;/.test(Ze)&&(TEXTAREA||(TEXTAREA=document.createElement("textarea")),TEXTAREA.innerHTML=Ze,Ze=TEXTAREA.value));let en=t;if(Oe?en=Oe:e&&(en=findStyle(e,t,ke)),Ve){const tn=createNameStyleFunction(en[0],Ze);if(Qe.length>0){tn.setGeometry(new GeometryCollection(Qe));const an=new Style$1({geometry:en[0].getGeometry(),image:null,fill:en[0].getFill(),stroke:en[0].getStroke(),text:null});return[tn,an].concat(en.slice(1))}return tn}return en}}function findStyle(Oe,e,t){return Array.isArray(Oe)?Oe:typeof Oe=="string"?findStyle(t[Oe],e,t):e}function readColor(Oe){const e=getAllTextContent(Oe,!1),t=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(t){const ke=t[1];return[parseInt(ke.substr(6,2),16),parseInt(ke.substr(4,2),16),parseInt(ke.substr(2,2),16),parseInt(ke.substr(0,2),16)/255]}}function readFlatCoordinates(Oe){let e=getAllTextContent(Oe,!1);const t=[];e=e.replace(/\s*,\s*/g,",");const ke=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let Ge;for(;Ge=ke.exec(e);){const Be=parseFloat(Ge[1]),je=parseFloat(Ge[2]),Ve=Ge[3]?parseFloat(Ge[3]):0;t.push(Be,je,Ve),e=e.substr(Ge[0].length)}if(e==="")return t}function readURI(Oe){const e=getAllTextContent(Oe,!1).trim();let t=Oe.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function readStyleURL(Oe){const e=getAllTextContent(Oe,!1).trim().replace(/^(?!.*#)/,"#");let t=Oe.baseURI;return(!t||t=="about:blank")&&(t=window.location.href),t?new URL(e,t).href:e}function readVec2(Oe){const e=Oe.getAttribute("xunits"),t=Oe.getAttribute("yunits");let ke;return e!=="insetPixels"?t!=="insetPixels"?ke="bottom-left":ke="top-left":t!=="insetPixels"?ke="bottom-right":ke="top-right",{x:parseFloat(Oe.getAttribute("x")),xunits:ICON_ANCHOR_UNITS_MAP[e],y:parseFloat(Oe.getAttribute("y")),yunits:ICON_ANCHOR_UNITS_MAP[t],origin:ke}}function readScale(Oe){return readDecimal(Oe)}const STYLE_MAP_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Pair:pairDataParser});function readStyleMapValue(Oe,e){return pushParseAndPop(void 0,STYLE_MAP_PARSERS,Oe,e,this)}const ICON_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeObjectPropertySetter(readIcon),color:makeObjectPropertySetter(readColor),heading:makeObjectPropertySetter(readDecimal),hotSpot:makeObjectPropertySetter(readVec2),scale:makeObjectPropertySetter(readScale)});function iconStyleParser(Oe,e){const t=pushParseAndPop({},ICON_STYLE_PARSERS,Oe,e);if(!t)return;const ke=e[e.length-1],Ge="Icon"in t?t.Icon:{},Be=!("Icon"in t)||Object.keys(Ge).length>0;let je;const Ve=Ge.href;Ve?je=Ve:Be&&(je=DEFAULT_IMAGE_STYLE_SRC);let Ze,Qe,en,tn="bottom-left";const an=t.hotSpot;an?(Ze=[an.x,an.y],Qe=an.xunits,en=an.yunits,tn=an.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(je)&&(je.includes("pushpin")?(Ze=DEFAULT_IMAGE_STYLE_ANCHOR,Qe=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,en=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):je.includes("arrow-reverse")?(Ze=[54,42],Qe=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,en=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS):je.includes("paddle")&&(Ze=[32,1],Qe=DEFAULT_IMAGE_STYLE_ANCHOR_X_UNITS,en=DEFAULT_IMAGE_STYLE_ANCHOR_Y_UNITS));let cn;const un=Ge.x,dn=Ge.y;un!==void 0&&dn!==void 0&&(cn=[un,dn]);let fn;const pn=Ge.w,gn=Ge.h;pn!==void 0&&gn!==void 0&&(fn=[pn,gn]);let yn;const vn=t.heading;vn!==void 0&&(yn=toRadians(vn));const An=t.scale,xn=t.color;if(Be){je==DEFAULT_IMAGE_STYLE_SRC&&(fn=DEFAULT_IMAGE_STYLE_SIZE);const wn=new Icon({anchor:Ze,anchorOrigin:tn,anchorXUnits:Qe,anchorYUnits:en,crossOrigin:this.crossOrigin_,offset:cn,offsetOrigin:"bottom-left",rotation:yn,scale:An,size:fn,src:this.iconUrlFunction_(je),color:xn}),bn=wn.getScaleArray()[0],Mn=wn.getSize();if(Mn===null){const Pn=wn.getImageState();if(Pn===ImageState.IDLE||Pn===ImageState.LOADING){const En=function(){const Cn=wn.getImageState();if(!(Cn===ImageState.IDLE||Cn===ImageState.LOADING)){const Rn=wn.getSize();if(Rn&&Rn.length==2){const Tn=scaleForSize(Rn);wn.setScale(bn*Tn)}wn.unlistenImageChange(En)}};wn.listenImageChange(En),Pn===ImageState.IDLE&&wn.load()}}else if(Mn.length==2){const Pn=scaleForSize(Mn);wn.setScale(bn*Pn)}ke.imageStyle=wn}else ke.imageStyle=DEFAULT_NO_IMAGE_STYLE}const LABEL_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),scale:makeObjectPropertySetter(readScale)});function labelStyleParser(Oe,e){const t=pushParseAndPop({},LABEL_STYLE_PARSERS,Oe,e);if(!t)return;const ke=e[e.length-1],Ge=new Text({fill:new Fill({color:"color"in t?t.color:DEFAULT_COLOR}),scale:t.scale});ke.textStyle=Ge}const LINE_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),width:makeObjectPropertySetter(readDecimal)});function lineStyleParser(Oe,e){const t=pushParseAndPop({},LINE_STYLE_PARSERS,Oe,e);if(!t)return;const ke=e[e.length-1],Ge=new Stroke({color:"color"in t?t.color:DEFAULT_COLOR,width:"width"in t?t.width:1});ke.strokeStyle=Ge}const POLY_STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeObjectPropertySetter(readColor),fill:makeObjectPropertySetter(readBoolean),outline:makeObjectPropertySetter(readBoolean)});function polyStyleParser(Oe,e){const t=pushParseAndPop({},POLY_STYLE_PARSERS,Oe,e);if(!t)return;const ke=e[e.length-1],Ge=new Fill({color:"color"in t?t.color:DEFAULT_COLOR});ke.fillStyle=Ge;const Be=t.fill;Be!==void 0&&(ke.fill=Be);const je=t.outline;je!==void 0&&(ke.outline=je)}const FLAT_LINEAR_RING_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatLinearRing(Oe,e){return pushParseAndPop(null,FLAT_LINEAR_RING_PARSERS,Oe,e)}function gxCoordParser(Oe,e){const ke=e[e.length-1].coordinates,Ge=getAllTextContent(Oe,!1),je=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(Ge);if(je){const Ve=parseFloat(je[1]),Ze=parseFloat(je[2]),Qe=parseFloat(je[3]);ke.push([Ve,Ze,Qe])}else ke.push([])}const GX_MULTITRACK_GEOMETRY_PARSERS=makeStructureNS(GX_NAMESPACE_URIS,{Track:makeArrayPusher(readGxTrack)});function readGxMultiTrack(Oe,e){const t=pushParseAndPop([],GX_MULTITRACK_GEOMETRY_PARSERS,Oe,e);if(t)return new MultiLineString(t)}const GX_TRACK_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{when:whenParser},makeStructureNS(GX_NAMESPACE_URIS,{coord:gxCoordParser}));function readGxTrack(Oe,e){const t=pushParseAndPop({coordinates:[],whens:[]},GX_TRACK_PARSERS,Oe,e);if(!t)return;const ke=[],Ge=t.coordinates,Be=t.whens;for(let je=0,Ve=Math.min(Ge.length,Be.length);je<Ve;++je)Ge[je].length==3&&ke.push(Ge[je][0],Ge[je][1],Ge[je][2],Be[je]);return new LineString(ke,"XYZM")}const ICON_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeObjectPropertySetter(readURI)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeObjectPropertySetter(readDecimal),y:makeObjectPropertySetter(readDecimal),w:makeObjectPropertySetter(readDecimal),h:makeObjectPropertySetter(readDecimal)}));function readIcon(Oe,e){const t=pushParseAndPop({},ICON_PARSERS,Oe,e);return t||null}const GEOMETRY_FLAT_COORDINATES_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{coordinates:makeReplacer(readFlatCoordinates)});function readFlatCoordinatesFromNode(Oe,e){return pushParseAndPop(null,GEOMETRY_FLAT_COORDINATES_PARSERS,Oe,e)}const EXTRUDE_AND_ALTITUDE_MODE_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeObjectPropertySetter(readBoolean),tessellate:makeObjectPropertySetter(readBoolean),altitudeMode:makeObjectPropertySetter(readString)});function readLineString(Oe,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Oe,e),ke=readFlatCoordinatesFromNode(Oe,e);if(ke){const Ge=new LineString(ke,"XYZ");return Ge.setProperties(t,!0),Ge}}function readLinearRing(Oe,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Oe,e),ke=readFlatCoordinatesFromNode(Oe,e);if(ke){const Ge=new Polygon(ke,"XYZ",[ke.length]);return Ge.setProperties(t,!0),Ge}}const MULTI_GEOMETRY_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeArrayPusher(readLineString),LinearRing:makeArrayPusher(readLinearRing),MultiGeometry:makeArrayPusher(readMultiGeometry),Point:makeArrayPusher(readPoint),Polygon:makeArrayPusher(readPolygon)});function readMultiGeometry(Oe,e){const t=pushParseAndPop([],MULTI_GEOMETRY_PARSERS,Oe,e);if(!t)return null;if(t.length===0)return new GeometryCollection(t);let ke,Ge=!0;const Be=t[0].getType();let je;for(let Ve=1,Ze=t.length;Ve<Ze;++Ve)if(je=t[Ve],je.getType()!=Be){Ge=!1;break}if(Ge){let Ve,Ze;if(Be=="Point"){const Qe=t[0];Ve=Qe.getLayout(),Ze=Qe.getFlatCoordinates();for(let en=1,tn=t.length;en<tn;++en)je=t[en],extend$4(Ze,je.getFlatCoordinates());ke=new MultiPoint(Ze,Ve),setCommonGeometryProperties(ke,t)}else if(Be=="LineString")ke=new MultiLineString(t),setCommonGeometryProperties(ke,t);else if(Be=="Polygon")ke=new MultiPolygon(t),setCommonGeometryProperties(ke,t);else if(Be=="GeometryCollection"||Be.startsWith("Multi"))ke=new GeometryCollection(t);else throw new Error("Unknown geometry type found")}else ke=new GeometryCollection(t);return ke}function readPoint(Oe,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Oe,e),ke=readFlatCoordinatesFromNode(Oe,e);if(ke){const Ge=new Point$1(ke,"XYZ");return Ge.setProperties(t,!0),Ge}}const FLAT_LINEAR_RINGS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{innerBoundaryIs:innerBoundaryIsParser,outerBoundaryIs:outerBoundaryIsParser});function readPolygon(Oe,e){const t=pushParseAndPop({},EXTRUDE_AND_ALTITUDE_MODE_PARSERS,Oe,e),ke=pushParseAndPop([null],FLAT_LINEAR_RINGS_PARSERS,Oe,e);if(ke&&ke[0]){const Ge=ke[0],Be=[Ge.length];for(let Ve=1,Ze=ke.length;Ve<Ze;++Ve)extend$4(Ge,ke[Ve]),Be.push(Ge.length);const je=new Polygon(Ge,"XYZ",Be);return je.setProperties(t,!0),je}}const STYLE_PARSERS$2=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:iconStyleParser,LabelStyle:labelStyleParser,LineStyle:lineStyleParser,PolyStyle:polyStyleParser});function readStyle$2(Oe,e){const t=pushParseAndPop({},STYLE_PARSERS$2,Oe,e,this);if(!t)return null;let ke="fillStyle"in t?t.fillStyle:DEFAULT_FILL_STYLE;const Ge=t.fill;Ge!==void 0&&!Ge&&(ke=null);let Be;"imageStyle"in t?t.imageStyle!=DEFAULT_NO_IMAGE_STYLE&&(Be=t.imageStyle):Be=DEFAULT_IMAGE_STYLE;const je="textStyle"in t?t.textStyle:DEFAULT_TEXT_STYLE,Ve="strokeStyle"in t?t.strokeStyle:DEFAULT_STROKE_STYLE,Ze=t.outline;return Ze!==void 0&&!Ze?[new Style$1({geometry:function(Qe){const en=Qe.getGeometry(),tn=en.getType();if(tn==="GeometryCollection"){const an=en;return new GeometryCollection(an.getGeometriesArrayRecursive().filter(function(cn){const un=cn.getType();return un!=="Polygon"&&un!=="MultiPolygon"}))}if(tn!=="Polygon"&&tn!=="MultiPolygon")return en},fill:ke,image:Be,stroke:Ve,text:je,zIndex:void 0}),new Style$1({geometry:function(Qe){const en=Qe.getGeometry(),tn=en.getType();if(tn==="GeometryCollection"){const an=en;return new GeometryCollection(an.getGeometriesArrayRecursive().filter(function(cn){const un=cn.getType();return un==="Polygon"||un==="MultiPolygon"}))}if(tn==="Polygon"||tn==="MultiPolygon")return en},fill:ke,stroke:null,zIndex:void 0})]:[new Style$1({fill:ke,image:Be,stroke:Ve,text:je,zIndex:void 0})]}function setCommonGeometryProperties(Oe,e){const t=e.length,ke=new Array(e.length),Ge=new Array(e.length),Be=new Array(e.length);let je,Ve,Ze;je=!1,Ve=!1,Ze=!1;for(let Qe=0;Qe<t;++Qe){const en=e[Qe];ke[Qe]=en.get("extrude"),Ge[Qe]=en.get("tessellate"),Be[Qe]=en.get("altitudeMode"),je=je||ke[Qe]!==void 0,Ve=Ve||Ge[Qe]!==void 0,Ze=Ze||Be[Qe]}je&&Oe.set("extrude",ke),Ve&&Oe.set("tessellate",Ge),Ze&&Oe.set("altitudeMode",Be)}const DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{displayName:makeObjectPropertySetter(readString),value:makeObjectPropertySetter(readString)});function dataParser(Oe,e){const t=Oe.getAttribute("name");parseNode(DATA_PARSERS,Oe,e);const ke=e[e.length-1];t&&ke.displayName?ke[t]={value:ke.value,displayName:ke.displayName,toString:function(){return ke.value}}:t!==null?ke[t]=ke.value:ke.displayName!==null&&(ke[ke.displayName]=ke.value),delete ke.value}const EXTENDED_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Data:dataParser,SchemaData:schemaDataParser});function extendedDataParser(Oe,e){parseNode(EXTENDED_DATA_PARSERS,Oe,e)}function regionParser(Oe,e){parseNode(REGION_PARSERS,Oe,e)}const PAIR_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{Style:makeObjectPropertySetter(readStyle$2),key:makeObjectPropertySetter(readString),styleUrl:makeObjectPropertySetter(readStyleURL)});function pairDataParser(Oe,e){const t=pushParseAndPop({},PAIR_PARSERS,Oe,e,this);if(!t)return;const ke=t.key;if(ke&&ke=="normal"){const Ge=t.styleUrl;Ge&&(e[e.length-1]=Ge);const Be=t.Style;Be&&(e[e.length-1]=Be)}}function placemarkStyleMapParser(Oe,e){const t=readStyleMapValue.call(this,Oe,e);if(!t)return;const ke=e[e.length-1];if(Array.isArray(t))ke.Style=t;else if(typeof t=="string")ke.styleUrl=t;else throw new Error("`styleMapValue` has an unknown type")}const SCHEMA_DATA_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{SimpleData:simpleDataParser});function schemaDataParser(Oe,e){parseNode(SCHEMA_DATA_PARSERS,Oe,e)}function simpleDataParser(Oe,e){const t=Oe.getAttribute("name");if(t!==null){const ke=readString(Oe),Ge=e[e.length-1];Ge[t]=ke}}const LAT_LON_ALT_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{altitudeMode:makeObjectPropertySetter(readString),minAltitude:makeObjectPropertySetter(readDecimal),maxAltitude:makeObjectPropertySetter(readDecimal),north:makeObjectPropertySetter(readDecimal),south:makeObjectPropertySetter(readDecimal),east:makeObjectPropertySetter(readDecimal),west:makeObjectPropertySetter(readDecimal)});function latLonAltBoxParser(Oe,e){const t=pushParseAndPop({},LAT_LON_ALT_BOX_PARSERS,Oe,e);if(!t)return;const ke=e[e.length-1],Ge=[parseFloat(t.west),parseFloat(t.south),parseFloat(t.east),parseFloat(t.north)];ke.extent=Ge,ke.altitudeMode=t.altitudeMode,ke.minAltitude=parseFloat(t.minAltitude),ke.maxAltitude=parseFloat(t.maxAltitude)}const LOD_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{minLodPixels:makeObjectPropertySetter(readDecimal),maxLodPixels:makeObjectPropertySetter(readDecimal),minFadeExtent:makeObjectPropertySetter(readDecimal),maxFadeExtent:makeObjectPropertySetter(readDecimal)});function lodParser(Oe,e){const t=pushParseAndPop({},LOD_PARSERS,Oe,e);if(!t)return;const ke=e[e.length-1];ke.minLodPixels=parseFloat(t.minLodPixels),ke.maxLodPixels=parseFloat(t.maxLodPixels),ke.minFadeExtent=parseFloat(t.minFadeExtent),ke.maxFadeExtent=parseFloat(t.maxFadeExtent)}const INNER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeArrayPusher(readFlatLinearRing)});function innerBoundaryIsParser(Oe,e){const t=pushParseAndPop([],INNER_BOUNDARY_IS_PARSERS,Oe,e);t.length>0&&e[e.length-1].push(...t)}const OUTER_BOUNDARY_IS_PARSERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeReplacer(readFlatLinearRing)});function outerBoundaryIsParser(Oe,e){const t=pushParseAndPop(void 0,OUTER_BOUNDARY_IS_PARSERS,Oe,e);if(t){const ke=e[e.length-1];ke[0]=t}}function linkParser(Oe,e){parseNode(LINK_PARSERS$1,Oe,e)}function whenParser(Oe,e){const ke=e[e.length-1].whens,Ge=getAllTextContent(Oe,!1),Be=Date.parse(Ge);ke.push(isNaN(Be)?0:Be)}function writeColorTextNode(Oe,e){const t=asArray(e),Ge=[(t.length==4?t[3]:1)*255,t[2],t[1],t[0]];for(let Be=0;Be<4;++Be){const je=Math.floor(Ge[Be]).toString(16);Ge[Be]=je.length==1?"0"+je:je}writeStringTextNode(Oe,Ge.join(""))}function writeCoordinatesTextNode(Oe,e,t){const ke=t[t.length-1],Ge=ke.layout,Be=ke.stride;let je;if(Ge=="XY"||Ge=="XYM")je=2;else if(Ge=="XYZ"||Ge=="XYZM")je=3;else throw new Error("Invalid geometry layout");const Ve=e.length;let Ze="";if(Ve>0){Ze+=e[0];for(let Qe=1;Qe<je;++Qe)Ze+=","+e[Qe];for(let Qe=Be;Qe<Ve;Qe+=Be){Ze+=" "+e[Qe];for(let en=1;en<je;++en)Ze+=","+e[Qe+en]}}writeStringTextNode(Oe,Ze)}const EXTENDEDDATA_NODE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Data:makeChildAppender(writeDataNode),value:makeChildAppender(writeDataNodeValue),displayName:makeChildAppender(writeDataNodeName)});function writeDataNode(Oe,e,t){Oe.setAttribute("name",e.name);const ke={node:Oe},Ge=e.value;typeof Ge=="object"?(Ge!==null&&Ge.displayName&&pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Ge.displayName],t,["displayName"]),Ge!==null&&Ge.value&&pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Ge.value],t,["value"])):pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,[Ge],t,["value"])}function writeDataNodeName(Oe,e){writeCDATASection(Oe,e)}function writeDataNodeValue(Oe,e){writeStringTextNode(Oe,e)}const DOCUMENT_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Placemark:makeChildAppender(writePlacemark)}),DOCUMENT_NODE_FACTORY=function(Oe,e,t){const ke=e[e.length-1].node;return createElementNS(ke.namespaceURI,"Placemark")};function writeDocument(Oe,e,t){pushSerializeAndPop({node:Oe},DOCUMENT_SERIALIZERS,DOCUMENT_NODE_FACTORY,e,t,void 0,this)}const DATA_NODE_FACTORY=makeSimpleNodeFactory("Data");function writeExtendedData(Oe,e,t){const ke={node:Oe},Ge=e.names,Be=e.values,je=Ge.length;for(let Ve=0;Ve<je;Ve++)pushSerializeAndPop(ke,EXTENDEDDATA_NODE_SERIALIZERS,DATA_NODE_FACTORY,[{name:Ge[Ve],value:Be[Ve]}],t)}const ICON_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["href"],makeStructureNS(GX_NAMESPACE_URIS,["x","y","w","h"])),ICON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{href:makeChildAppender(writeStringTextNode)},makeStructureNS(GX_NAMESPACE_URIS,{x:makeChildAppender(writeDecimalTextNode),y:makeChildAppender(writeDecimalTextNode),w:makeChildAppender(writeDecimalTextNode),h:makeChildAppender(writeDecimalTextNode)})),GX_NODE_FACTORY=function(Oe,e,t){return createElementNS(GX_NAMESPACE_URIS[0],"gx:"+t)};function writeIcon(Oe,e,t){const ke={node:Oe},Ge=t[t.length-1].node;let Be=ICON_SEQUENCE[Ge.namespaceURI],je=makeSequence(e,Be);pushSerializeAndPop(ke,ICON_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,je,t,Be),Be=ICON_SEQUENCE[GX_NAMESPACE_URIS[0]],je=makeSequence(e,Be),pushSerializeAndPop(ke,ICON_SERIALIZERS,GX_NODE_FACTORY,je,t,Be)}const ICON_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["scale","heading","Icon","color","hotSpot"]),ICON_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{Icon:makeChildAppender(writeIcon),color:makeChildAppender(writeColorTextNode),heading:makeChildAppender(writeDecimalTextNode),hotSpot:makeChildAppender(writeVec2),scale:makeChildAppender(writeScaleTextNode)});function writeIconStyle(Oe,e,t){const ke={node:Oe},Ge={},Be=e.getSrc(),je=e.getSize(),Ve=e.getImageSize(),Ze={href:Be};if(je){Ze.w=je[0],Ze.h=je[1];const fn=e.getAnchor(),pn=e.getOrigin();if(pn&&Ve&&pn[0]!==0&&pn[1]!==je[1]&&(Ze.x=pn[0],Ze.y=Ve[1]-(pn[1]+je[1])),fn&&(fn[0]!==je[0]/2||fn[1]!==je[1]/2)){const gn={x:fn[0],xunits:"pixels",y:je[1]-fn[1],yunits:"pixels"};Ge.hotSpot=gn}}Ge.Icon=Ze;let Qe=e.getScaleArray()[0],en=je;if(en===null&&(en=DEFAULT_IMAGE_STYLE_SIZE),en.length==2){const fn=scaleForSize(en);Qe=Qe/fn}Qe!==1&&(Ge.scale=Qe);const tn=e.getRotation();tn!==0&&(Ge.heading=tn);const an=e.getColor();an&&(Ge.color=an);const cn=t[t.length-1].node,un=ICON_STYLE_SEQUENCE[cn.namespaceURI],dn=makeSequence(Ge,un);pushSerializeAndPop(ke,ICON_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,dn,t,un)}const LABEL_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","scale"]),LABEL_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),scale:makeChildAppender(writeScaleTextNode)});function writeLabelStyle(Oe,e,t){const ke={node:Oe},Ge={},Be=e.getFill();Be&&(Ge.color=Be.getColor());const je=e.getScale();je&&je!==1&&(Ge.scale=je);const Ve=t[t.length-1].node,Ze=LABEL_STYLE_SEQUENCE[Ve.namespaceURI],Qe=makeSequence(Ge,Ze);pushSerializeAndPop(ke,LABEL_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,Ze)}const LINE_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","width"]),LINE_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),width:makeChildAppender(writeDecimalTextNode)});function writeLineStyle(Oe,e,t){const ke={node:Oe},Ge={color:e.getColor(),width:Number(e.getWidth())||1},Be=t[t.length-1].node,je=LINE_STYLE_SEQUENCE[Be.namespaceURI],Ve=makeSequence(Ge,je);pushSerializeAndPop(ke,LINE_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ve,t,je)}const GEOMETRY_TYPE_TO_NODENAME$1={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},GEOMETRY_NODE_FACTORY=function(Oe,e,t){if(Oe){const ke=e[e.length-1].node;return createElementNS(ke.namespaceURI,GEOMETRY_TYPE_TO_NODENAME$1[Oe.getType()])}},POINT_NODE_FACTORY=makeSimpleNodeFactory("Point"),LINE_STRING_NODE_FACTORY=makeSimpleNodeFactory("LineString"),LINEAR_RING_NODE_FACTORY=makeSimpleNodeFactory("LinearRing"),POLYGON_NODE_FACTORY=makeSimpleNodeFactory("Polygon"),MULTI_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LineString:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),GeometryCollection:makeChildAppender(writeMultiGeometry)});function writeMultiGeometry(Oe,e,t){const ke={node:Oe},Ge=e.getType();let Be=[],je;if(Ge==="GeometryCollection")e.getGeometriesArrayRecursive().forEach(function(Ve){const Ze=Ve.getType();if(Ze==="MultiPoint")Be=Be.concat(Ve.getPoints());else if(Ze==="MultiLineString")Be=Be.concat(Ve.getLineStrings());else if(Ze==="MultiPolygon")Be=Be.concat(Ve.getPolygons());else if(Ze==="Point"||Ze==="LineString"||Ze==="Polygon")Be.push(Ve);else throw new Error("Unknown geometry type")}),je=GEOMETRY_NODE_FACTORY;else if(Ge==="MultiPoint")Be=e.getPoints(),je=POINT_NODE_FACTORY;else if(Ge==="MultiLineString")Be=e.getLineStrings(),je=LINE_STRING_NODE_FACTORY;else if(Ge==="MultiPolygon")Be=e.getPolygons(),je=POLYGON_NODE_FACTORY;else throw new Error("Unknown geometry type");pushSerializeAndPop(ke,MULTI_GEOMETRY_SERIALIZERS,je,Be,t)}const BOUNDARY_IS_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{LinearRing:makeChildAppender(writePrimitiveGeometry)});function writeBoundaryIs(Oe,e,t){pushSerializeAndPop({node:Oe},BOUNDARY_IS_SERIALIZERS,LINEAR_RING_NODE_FACTORY,[e],t)}const PLACEMARK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{ExtendedData:makeChildAppender(writeExtendedData),MultiGeometry:makeChildAppender(writeMultiGeometry),LineString:makeChildAppender(writePrimitiveGeometry),LinearRing:makeChildAppender(writePrimitiveGeometry),Point:makeChildAppender(writePrimitiveGeometry),Polygon:makeChildAppender(writePolygon),Style:makeChildAppender(writeStyle),address:makeChildAppender(writeStringTextNode),description:makeChildAppender(writeStringTextNode),name:makeChildAppender(writeStringTextNode),open:makeChildAppender(writeBooleanTextNode),phoneNumber:makeChildAppender(writeStringTextNode),styleUrl:makeChildAppender(writeStringTextNode),visibility:makeChildAppender(writeBooleanTextNode)}),PLACEMARK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),EXTENDEDDATA_NODE_FACTORY=makeSimpleNodeFactory("ExtendedData");function writePlacemark(Oe,e,t){const ke={node:Oe};e.getId()&&Oe.setAttribute("id",e.getId());const Ge=e.getProperties(),Be={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};Be[e.getGeometryName()]=1;const je=Object.keys(Ge||{}).sort().filter(function(cn){return!Be[cn]}),Ve=e.getStyleFunction();if(Ve){const cn=Ve(e,0);if(cn){const un=Array.isArray(cn)?cn:[cn];let dn=un;if(e.getGeometry()&&(dn=un.filter(function(fn){const pn=fn.getGeometryFunction()(e);if(pn){const gn=pn.getType();return gn==="GeometryCollection"?pn.getGeometriesArrayRecursive().filter(function(yn){const vn=yn.getType();return vn==="Point"||vn==="MultiPoint"}).length:gn==="Point"||gn==="MultiPoint"}})),this.writeStyles_){let fn=un,pn=un;e.getGeometry()&&(fn=un.filter(function(gn){const yn=gn.getGeometryFunction()(e);if(yn){const vn=yn.getType();return vn==="GeometryCollection"?yn.getGeometriesArrayRecursive().filter(function(An){const xn=An.getType();return xn==="LineString"||xn==="MultiLineString"}).length:vn==="LineString"||vn==="MultiLineString"}}),pn=un.filter(function(gn){const yn=gn.getGeometryFunction()(e);if(yn){const vn=yn.getType();return vn==="GeometryCollection"?yn.getGeometriesArrayRecursive().filter(function(An){const xn=An.getType();return xn==="Polygon"||xn==="MultiPolygon"}).length:vn==="Polygon"||vn==="MultiPolygon"}})),Ge.Style={pointStyles:dn,lineStyles:fn,polyStyles:pn}}if(dn.length&&Ge.name===void 0){const fn=dn[0].getText();fn&&(Ge.name=fn.getText())}}}const Ze=t[t.length-1].node,Qe=PLACEMARK_SEQUENCE[Ze.namespaceURI],en=makeSequence(Ge,Qe);if(pushSerializeAndPop(ke,PLACEMARK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,en,t,Qe),je.length>0){const cn=makeSequence(Ge,je);pushSerializeAndPop(ke,PLACEMARK_SERIALIZERS,EXTENDEDDATA_NODE_FACTORY,[{names:je,values:cn}],t)}const tn=t[0];let an=e.getGeometry();an&&(an=transformGeometryWithOptions(an,!0,tn)),pushSerializeAndPop(ke,PLACEMARK_SERIALIZERS,GEOMETRY_NODE_FACTORY,[an],t)}const PRIMITIVE_GEOMETRY_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["extrude","tessellate","altitudeMode","coordinates"]),PRIMITIVE_GEOMETRY_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{extrude:makeChildAppender(writeBooleanTextNode),tessellate:makeChildAppender(writeBooleanTextNode),altitudeMode:makeChildAppender(writeStringTextNode),coordinates:makeChildAppender(writeCoordinatesTextNode)});function writePrimitiveGeometry(Oe,e,t){const ke=e.getFlatCoordinates(),Ge={node:Oe};Ge.layout=e.getLayout(),Ge.stride=e.getStride();const Be=e.getProperties();Be.coordinates=ke;const je=t[t.length-1].node,Ve=PRIMITIVE_GEOMETRY_SEQUENCE[je.namespaceURI],Ze=makeSequence(Be,Ve);pushSerializeAndPop(Ge,PRIMITIVE_GEOMETRY_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ze,t,Ve)}const POLY_STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["color","fill","outline"]),POLYGON_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{outerBoundaryIs:makeChildAppender(writeBoundaryIs),innerBoundaryIs:makeChildAppender(writeBoundaryIs)}),INNER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("innerBoundaryIs"),OUTER_BOUNDARY_NODE_FACTORY=makeSimpleNodeFactory("outerBoundaryIs");function writePolygon(Oe,e,t){const ke=e.getLinearRings(),Ge=ke.shift(),Be={node:Oe};pushSerializeAndPop(Be,POLYGON_SERIALIZERS,INNER_BOUNDARY_NODE_FACTORY,ke,t),pushSerializeAndPop(Be,POLYGON_SERIALIZERS,OUTER_BOUNDARY_NODE_FACTORY,[Ge],t)}const POLY_STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{color:makeChildAppender(writeColorTextNode),fill:makeChildAppender(writeBooleanTextNode),outline:makeChildAppender(writeBooleanTextNode)});function writePolyStyle(Oe,e,t){const ke={node:Oe},Ge=e.getFill(),Be=e.getStroke(),je={color:Ge?Ge.getColor():void 0,fill:Ge?void 0:!1,outline:Be?void 0:!1},Ve=t[t.length-1].node,Ze=POLY_STYLE_SEQUENCE[Ve.namespaceURI],Qe=makeSequence(je,Ze);pushSerializeAndPop(ke,POLY_STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,Ze)}function writeScaleTextNode(Oe,e){writeDecimalTextNode(Oe,Math.round(e*1e6)/1e6)}const STYLE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$4,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),STYLE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$4,{IconStyle:makeChildAppender(writeIconStyle),LabelStyle:makeChildAppender(writeLabelStyle),LineStyle:makeChildAppender(writeLineStyle),PolyStyle:makeChildAppender(writePolyStyle)});function writeStyle(Oe,e,t){const ke={node:Oe},Ge={};if(e.pointStyles.length){const Ze=e.pointStyles[0].getText();Ze&&(Ge.LabelStyle=Ze);const Qe=e.pointStyles[0].getImage();Qe&&typeof Qe.getSrc=="function"&&(Ge.IconStyle=Qe)}if(e.lineStyles.length){const Ze=e.lineStyles[0].getStroke();Ze&&(Ge.LineStyle=Ze)}if(e.polyStyles.length){const Ze=e.polyStyles[0].getStroke();Ze&&!Ge.LineStyle&&(Ge.LineStyle=Ze),Ge.PolyStyle=e.polyStyles[0]}const Be=t[t.length-1].node,je=STYLE_SEQUENCE[Be.namespaceURI],Ve=makeSequence(Ge,je);pushSerializeAndPop(ke,STYLE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Ve,t,je)}function writeVec2(Oe,e){Oe.setAttribute("x",String(e.x)),Oe.setAttribute("y",String(e.y)),Oe.setAttribute("xunits",e.xunits),Oe.setAttribute("yunits",e.yunits)}var ColorUtils={hex:function(Oe){if(Oe>255)throw new Error("'"+Oe+"'' is greater than 255(0xff);");var e=Number(Oe).toString(16);return("0"+e).slice(-2)},num:function(Oe){return parseInt(Oe,16)},arrayToRgba:function(Oe){if(!Array.isArray(Oe))throw new Error("Not an array !");var e=Oe[0],t=Oe[1],ke=Oe[2],Ge=Oe[3]||1,Be="rgba("+e+", "+t+", "+ke+", "+parseFloat(Ge)+")";return Be},arrayToHex:function(Oe){if(!Array.isArray(Oe))throw new Error("Not an array !");var e=Oe[0],t=Oe[1],ke=Oe[2],Ge=Oe[3],Be=[this.hex(e),this.hex(t),this.hex(ke)],je={};return je.hex="#"+Be.join(""),Ge&&(je.opacity=parseFloat(Ge)),je},rgbaToHex:function(Oe){var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(Oe);if(!t)throw new Error("Invalid format: "+Oe);var ke=t[1],Ge=t[2],Be=t[3],je=t[4],Ve=[this.hex(ke),this.hex(Ge),this.hex(Be)],Ze={};return Ze.hex="#"+Ve.join(""),je&&(Ze.opacity=parseFloat(je)),Ze},hexToRgba:function(Oe,e){var t=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;if(!Oe)throw new Error("Invalid format");Oe=Oe.replace(t,function(Be,je,Ve,Ze){return je+je+Ve+Ve+Ze+Ze});var ke=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(Oe);ke=ke?{r:parseInt(ke[1],16),g:parseInt(ke[2],16),b:parseInt(ke[3],16)}:null;var Ge=ke?"rgba("+ke.r+", "+ke.g+", "+ke.b+", "+e+")":null;return Ge},isHex:function(Oe){if(!Oe||Oe.charAt(0)!=="#")return!1;var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,t=e.exec(Oe);return!!t},isRGB:function(Oe){if(!Oe)return!1;var e=/rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(0?.?\d+)\s*)?\)/,t=e.exec(Oe);return!!t}},logger$D=LoggerByDefault.getLogger("styling");Feature.prototype.setPropertyFill=function(){var Oe=this.getStyle();if(Oe&&!(Array.isArray(Oe)&&Oe.length===0)){var e=Oe.getFill();if(e){var t=e.getColor();if(Array.isArray(t)){var ke="rgba(";ke+=t[0]+",",ke+=t[1]+",",ke+=t[2]+",",ke+=t[3]+")",t=ke}if(ColorUtils.isRGB(t)){var Ge=ColorUtils.rgbaToHex(t);this.set("fill",Ge.hex),this.set("fill-opacity",Ge.opacity)}else this.set("fill",t),this.set("fill-opacity",1)}}};Feature.prototype.setPropertyStroke=function(){var Oe=this.getStyle();if(Oe&&!(Array.isArray(Oe)&&Oe.length===0)){var e=Oe.getStroke();if(e){var t=e.getColor();if(Array.isArray(t)){var ke="rgba(";ke+=t[0]+",",ke+=t[1]+",",ke+=t[2]+",",ke+=t[3]+")",t=ke}if(ColorUtils.isRGB(t)){var Ge=ColorUtils.rgbaToHex(t);this.set("stroke",Ge.hex),this.set("stroke-opacity",Ge.opacity)}else this.set("stroke",t),this.set("stroke-opacity",1);this.set("stroke-width",e.getWidth())}}};Feature.prototype.setPropertyLabel=function(){var Oe=this.getStyle();if(Oe&&!(Array.isArray(Oe)&&Oe.length===0)){var e=this.get("name")!==void 0,t=Oe.getText();if(t&&e){var ke=Oe.getText().getFill();if(ke){var Ge=ke.getColor();if(Array.isArray(Ge)){var Be="rgba(";Be+=Ge[0]+",",Be+=Ge[1]+",",Be+=Ge[2]+",",Be+=Ge[3]+")",Ge=Be}if(ColorUtils.isRGB(Ge)){var je=ColorUtils.rgbaToHex(Ge);this.set("label-fill",je.hex),this.set("label-fill-opacity",je.opacity)}else this.set("label-fill",Ge),this.set("label-fill-opacity",1)}var Ve=Oe.getText().getStroke();if(Ve){var Ze=Ve.getColor();if(Array.isArray(Ze)){var Qe="rgba(";Qe+=Ze[0]+",",Qe+=Ze[1]+",",Qe+=Ze[2]+",",Qe+=Ze[3]+")",Ze=Qe}if(ColorUtils.isRGB(Ze)){var en=ColorUtils.rgbaToHex(Ze);this.set("label-stroke",en.hex),this.set("label-stroke-opacity",en.opacity)}else this.set("label-stroke",Ze),this.set("label-stroke-opacity",1);this.set("label-stroke-width",Ve.getWidth())}this.set("label-font",Oe.getText().getFont()||Styling.DEFAULT_TEXT.font),this.set("label-textAlign",Oe.getText().getTextAlign()||Styling.DEFAULT_TEXT.textAlign)}}};Feature.prototype.setPropertyMarker=function(){var Oe=this.getStyle();if(Oe&&!(Array.isArray(Oe)&&Oe.length===0)){var e=Oe.getImage();if(e)if(e instanceof Icon){var t=e.getColor();if(Array.isArray(t)){var ke="rgba(";ke+=t[0]+",",ke+=t[1]+",",ke+=t[2]+",",ke+=t[3]+")",t=ke}if(t){var Ge=ColorUtils.rgbaToHex(t);this.set("marker-color",Ge.hex)}var Be=e.getScale();switch(Math.round(Be*2)/2){case 0:case .5:this.set("marker-size","small");break;case 1:this.set("marker-size","medium");break;case 1.5:case 2:this.set("marker-size","large");break}var je=e.getSrc();je&&this.set("marker-symbol",je),this.unset("circle-fill"),this.unset("circle-fill-opacity"),this.unset("circle-stroke"),this.unset("circle-stroke-width"),this.unset("circle-stroke-opacity"),this.unset("circle-radius")}else{var Ve=e.getFill();if(Ve){var Ze=Ve.getColor();if(Array.isArray(Ze)){var Qe="rgba(";Qe+=Ze[0]+",",Qe+=Ze[1]+",",Qe+=Ze[2]+",",Qe+=Ze[3]+")",Ze=Qe}if(ColorUtils.isRGB(Ze)){var en=ColorUtils.rgbaToHex(Ze);this.set("circle-fill",en.hex),this.set("circle-fill-opacity",en.opacity)}else this.set("circle-fill",Ze),this.set("circle-fill-opacity",1)}var tn=e.getStroke();if(tn){var an=tn.getColor();if(Array.isArray(an)){var cn="rgba(";cn+=an[0]+",",cn+=an[1]+",",cn+=an[2]+",",cn+=an[3]+")",an=cn}if(ColorUtils.isRGB(an)){var un=ColorUtils.rgbaToHex(an);this.set("circle-stroke",un.hex),this.set("circle-stroke-opacity",un.opacity)}else this.set("circle-stroke",an),this.set("circle-stroke-opacity",1);this.set("circle-stroke-width",tn.getWidth())}var dn=e.getRadius();this.set("circle-radius",dn)}}};var Styling={APPLY_CONVERT_GEOM_GPX:!0,DEFAULT_ICON:{src:Marker.lightOrange,anchor:[.5,1],scale:1},DEFAULT_CIRCLE:{radius:10,fill:{opacity:1,color:[0,0,0,1]},stroke:{width:1,opacity:1,color:[0,0,0,1]}},DEFAULT_STROKE:{width:5,opacity:1,color:[250,250,250,1]},DEFAULT_FILL:{opacity:1,color:[0,0,0,1]},DEFAULT_TEXT:{font:"16px sans",textAlign:"left",stroke:{color:[250,250,250,1],width:5,opactity:1},fill:{opacity:1,color:[0,0,0,1]}},getListTags:function(){return["type","fill","fill-opacity","stroke","stroke-opacity","stroke-width","circle-fill","circle-fill-opacity","circle-stroke","circle-stroke-opacity","circle-stroke-width","circle-radius","marker-symbol","marker-color","marker-size","label-fill","label-fill-opacity","label-stroke","label-stroke-width","label-stroke-opacity","label-font","label-textAlign"]},defineStyleFromProperties:function(Oe){var e=null,t={},ke=null;if(Oe.get("marker-color")||Oe.get("marker-size")||Oe.get("marker-symbol")){ke={},ke.src=this.DEFAULT_ICON.src,ke.anchor=this.DEFAULT_ICON.anchor;var Ge=Oe.get("marker-symbol");Ge&&Ge.search("data:image/png;base64")!==-1&&(ke.src=Ge);var Be=Oe.get("marker-color");ColorUtils.isHex(Be)&&(ke.color=ColorUtils.hexToRgba(Be,1));var je=Oe.get("marker-size");if(je)switch(je){case"small":ke.scale=.5;break;case"medium":ke.scale=1;break;case"large":ke.scale=1.5;break;default:ke.scale=this.DEFAULT_ICON.scale;break}}var Ve=null;(Oe.get("stroke")||Oe.get("stroke-opacity")||Oe.get("stroke-width"))&&(Ve={},Ve.color=ColorUtils.hexToRgba(Oe.get("stroke"),+Oe.get("stroke-opacity")||this.DEFAULT_STROKE.opacity),Ve.width=+Oe.get("stroke-width")||this.DEFAULT_STROKE.width);var Ze=null;(Oe.get("fill")||Oe.get("fill-opacity"))&&(Ze={},Ze.color=ColorUtils.hexToRgba(Oe.get("fill"),+Oe.get("fill-opacity")||this.DEFAULT_FILL.opacity));var Qe=null,en=null,tn=Oe.get("name")!=="";tn&&((Oe.get("label-fill")||Oe.get("label-fill-opacity"))&&(en={},en.color=ColorUtils.hexToRgba(Oe.get("label-fill"),+Oe.get("label-fill-opacity")||this.DEFAULT_TEXT.fill.opacity)),(Oe.get("label-stroke")||Oe.get("label-stroke-opacity")||Oe.get("label-stroke-width"))&&(Qe={},Qe.color=ColorUtils.hexToRgba(Oe.get("label-stroke"),+Oe.get("label-stroke-opacity")||this.DEFAULT_TEXT.stroke.opacity),Qe.width=+Oe.get("label-stroke-width")||this.DEFAULT_TEXT.stroke.width));var an=Oe.get("circle-radius")||this.DEFAULT_CIRCLE.radius,cn=null;(Oe.get("circle-stroke")||Oe.get("circle-stroke-opacity")||Oe.get("circle-stroke-width"))&&(cn={},cn.color=ColorUtils.hexToRgba(Oe.get("circle-stroke"),+Oe.get("circle-stroke-opacity")||this.DEFAULT_CIRCLE.stroke.opacity),cn.width=+Oe.get("circle-stroke-width")||this.DEFAULT_CIRCLE.stroke.width);var un=null;if((Oe.get("circle-fill")||Oe.get("circle-fill-opacity"))&&(un={},un.color=ColorUtils.hexToRgba(Oe.get("circle-fill"),+Oe.get("circle-fill-opacity")||this.DEFAULT_CIRCLE.fill.opacity)),Oe.getGeometry()){var dn=Oe.getGeometry().getType();switch(dn){case"Circle":case"Point":case"MultiPoint":var fn=!1,pn={};if(cn&&(pn.stroke=new Stroke(cn)),un&&(pn.fill=new Fill(un)),Object.keys(pn).length!==0&&(fn=!0,pn.radius=+an,t.image=new CircleStyle(pn)),ke&&(t.image=new Icon(ke)),tn){var gn={};if(Qe&&(gn.stroke=new Stroke(Qe)),en&&(gn.fill=new Fill(en)),Object.keys(gn).length!==0)gn.text=Oe.get("name"),gn.textAlign=Oe.get("label-textAlign")||this.DEFAULT_TEXT.textAlign,gn.font=Oe.get("label-font")||this.DEFAULT_TEXT.font,t.text=new Text(Object.assign({},this.DEFAULT_TEXT,gn));else if(ke||fn){var yn=new Text(Object.assign({},this.DEFAULT_TEXT,{fill:new Fill(this.DEFAULT_TEXT.fill),stroke:new Stroke(this.DEFAULT_TEXT.stroke)}));if(yn){var vn=yn.clone();vn.setText(Oe.get("name")),t.text=vn}}}break;case"Polygon":case"MultiPolygon":Ve&&(t.stroke=new Stroke(Ve)),Ze&&(t.fill=new Fill(Ze));break;case"LineString":case"MultiLineString":if(Ve&&(t.stroke=new Stroke(Ve)),this.APPLY_CONVERT_GEOM_GPX&&Ze){var An=Oe.get("type");if(An&&(An==="Polygon"||An==="MultiPolygon")){t.fill=new Fill(Ze);var xn=Oe.clone(),wn=dn==="LineString"?Polygon:MultiPolygon;Oe.setGeometry(new wn([xn.getGeometry().getCoordinates()]))}}break}}return Object.keys(t).length!==0&&(e=new Style$1(t)),e},defineStyleFunctionByDefault:function(Oe){if(!Oe)return[];if(Object.keys(Oe).length===0)return[];var e=(t,ke)=>{if(t.getGeometry()){var Ge=null,Be=t.getGeometry().getType();switch(Be){case"Point":case"MultiPoint":var je={};if(Oe.getImage()&&(je.image=Oe.getImage()),Oe.getText()&&t.get("name")){var Ve=Oe.getText().clone();Ve.setText(t.get("name")),je.text=Ve}Ge=new Style$1(je);break;case"Circle":var Ze={},Qe={};if(Oe.getFill()&&(Qe.fill=Oe.getFill()),Oe.getStroke()&&(Qe.stroke=Oe.getStroke()),Oe.getText()&&t.get("name")){var en=Oe.getText().clone();en.setText(t.get("name")),Ze.text=en}Object.keys(Qe).length!==0&&(Qe.radius=3,Ze.image=new CircleStyle(Qe)),Ge=new Style$1(Ze);break;case"Polygon":case"MultiPolygon":var tn={};Oe.getFill()&&(tn.fill=Oe.getFill()),Oe.getStroke()&&(tn.stroke=Oe.getStroke()),Ge=new Style$1(tn);break;case"LineString":case"LinearRing":case"MultiLineString":var an={};Oe.getStroke()&&(an.stroke=Oe.getStroke()),Ge=new Style$1(an);break}return[Ge]}};return e},definePropertiesFromStyleByType:function(Oe){if(Oe.getGeometry()){var e=Oe.getGeometry().getType();switch(e){case"Point":case"MultiPoint":Oe.setPropertyMarker(),Oe.setPropertyLabel();break;case"LineString":case"MultiLineString":Oe.setPropertyStroke();break;case"Polygon":case"MultiPolygon":Oe.setPropertyStroke(),Oe.setPropertyFill();break}}},definePropertiesFromStyle:function(Oe){var e=Oe.getStyle()||Oe.getStyleFunction();if(e){if(typeof e=="function"){var t=e.call(this,Oe,0);if(t&&t.length!==0)e=Array.isArray(t)?t[0]:t,Oe.setStyle(e);else return}this.definePropertiesFromStyleByType(Oe)}},defineTagFromStyle:function(Oe,e){return logger$D.trace("todo..."),null}},logger$C=LoggerByDefault.getLogger("parser"),Parser$1={parse:function(Oe){var e=null,t=null,ke=typeof window<"u"?window:null;if(typeof exports=="object"&&window===null){var Ge=require("@xmldom/xmldom").DOMParser;t=new Ge,e=t.parseFromString(Oe,"text/xml")}else ke.DOMParser?(t=new ke.DOMParser,e=t.parseFromString(Oe,"text/xml")):ke.ActiveXObject?(e=new ke.ActiveXObject("Microsoft.XMLDOM"),e.async=!1,e.loadXML(Oe)):logger$C.log("Incompatible environment for DOM Parser !");var Be=e.querySelector("parsererror");return Be?(console.error(Be),null):(logger$C.trace(e),e)},toString:function(Oe){var e=new XMLSerializer,t=e.serializeToString(Oe);return logger$C.trace(t),t},format:function(Oe){var e=/(>)\s*(<)(\/*)/g,t=/ *(.*) +\n/g,ke=/(<.+>)(.+\n)/g;Oe=Oe.replace(e,`$1
$2$3`).replace(t,`$1
`).replace(ke,`$1
$2`);for(var Ge="",Be=Oe.split(`
`),je=0,Ve="other",Ze={"single->single":0,"single->closing":-1,"single->opening":0,"single->other":0,"closing->single":0,"closing->closing":-1,"closing->opening":0,"closing->other":0,"opening->single":1,"opening->closing":0,"opening->opening":1,"opening->other":1,"other->single":0,"other->closing":-1,"other->opening":0,"other->other":0},Qe=0;Qe<Be.length;Qe++){var en=Be[Qe],tn=!!en.match(/<.+\/>/),an=!!en.match(/<\/.+>/),cn=!!en.match(/<[^!].*>/),un=tn?"single":an?"closing":cn?"opening":"other",dn=Ve+"->"+un;Ve=un;var fn="";je+=Ze[dn];for(var pn=0;pn<je;pn++)fn+="	";dn==="opening->closing"?Ge=Ge.substr(0,Ge.length-1)+en+`
`:Ge+=fn+en+`
`}return logger$C.trace(Ge),Ge}},logger$B=LoggerByDefault.getLogger("extended KML format"),KML=class zf extends KML$1{constructor(e){if(super(e),!(this instanceof zf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e=e||{},this.source=null,this.extensions=e.extensions||null,e.defaultStyle&&!Array.isArray(e.defaultStyle)&&(e.defaultStyle=[e.defaultStyle]),(e.defaultStyle===null||typeof e.defaultStyle>"u")&&(e.defaultStyle=[]),this}_processKml(e,t,ke){for(var Ge=e.nodeName==="#document"?e.childNodes[0].childNodes:e.childNodes,Be=Ge,je=0;je<Ge.length;je++){const _i=Ge[je];if(_i.nodeName==="Document"){Be=_i.childNodes;break}if(_i.nodeName==="Placemark"){Be=[_i];break}}for(var Ve={},Ze=-1,Qe=0;Qe<Be.length;Qe++){var en=Be[Qe];switch(en.nodeName){case"Style":var tn=en.attributes[0];if(tn&&tn.nodeName==="id"){var an=tn.nodeValue,cn=en;Ve[an]=cn}break;case"Placemark":Ze++;for(var un=en.childNodes,dn=!1,fn=!1,pn=!1,gn=null,yn=null,vn=null,An=en,xn=0;xn<un.length;xn++)switch(un[xn].nodeName){case"Polygon":pn=!0;break;case"LineString":fn=!0;break;case"Point":dn=!0;break;case"Style":yn=un[xn],gn=un[xn].childNodes;break;case"styleUrl":var wn=un[xn].textContent.slice(1);Ve[wn]&&(gn=Ve[wn].childNodes);break;case"ExtendedData":vn=un[xn].childNodes;break;case"name":An=null;break}if(vn){logger$B.log("ExtendedData :",vn);var bn=ke.extendedData;bn&&typeof bn=="function"&&bn(t[Ze],vn)}if(An){logger$B.log("Name :",An);var Mn=ke.nameData;Mn&&typeof Mn=="function"&&Mn(t[Ze],An)}if(dn&&gn&&gn.length!==0){for(var Pn=null,En=null,Cn=0;Cn<gn.length;Cn++)switch(gn[Cn].nodeName){case"LabelStyle":Pn=gn[Cn];break;case"IconStyle":En=gn[Cn];break}var Rn=t[Ze].getProperties().name,Tn=t[Ze].getProperties().description,Nn=Rn||Tn;if(logger$B.trace(Nn),!En&&Pn){var Gn=ke.labelStyle;Gn&&typeof Gn=="function"&&Gn(t[Ze],Pn)}else if(En&&!Pn){var zn=ke.iconStyle;zn&&typeof zn=="function"&&zn(t[Ze],En)}else if(En&&Pn){var $n=ke.iconLabelStyle;$n&&typeof $n=="function"&&$n(t[Ze],En,Pn)}}else{var Qn=t[Ze],Hn=Qn.getStyle();if(Hn&&typeof Hn=="function"){var Ni=Hn.call(this,Qn,0);Ni&&Ni.length!==0&&(Hn=Ni[0])}if(pn){var On=ke.polygonStyle;On&&typeof On=="function"&&On(t[Ze],gn)}if(fn){var qn=ke.lineStringStyle;qn&&typeof qn=="function"&&qn(t[Ze],gn)}if(dn&&Hn){var Un=Hn.getImage();if(Un&&Un instanceof CircleStyle){var Ci=ke.circleStyle;Ci&&typeof Ci=="function"&&Ci(t[Ze],yn)}else if(Un&&Un instanceof Icon){var Si=ke.pointStyle;Si&&typeof Si=="function"&&Si(t[Ze],yn)}}}break;default:logger$B.trace("tag is not processing !")}}}writeFeatures(e,t){logger$B.log("overload : ol.format.KML.writeFeatures");var ke=super.writeFeaturesNode(e,t);if(ke===null)return null;this.hasOwnProperty("extensions")&&this._writeRootExtensions(ke,this.extensions);var Ge=this._writeExtendStylesFeatures(ke,e,t),Be=Parser$1.format(Ge);return Be===""?null:Be}_writeExtendStylesFeatures(e,t,ke){function Ge(cn,un){var dn=cn.toString(16);dn.charAt(0)==="#"&&(dn=dn.slice(1)),un=un||1,un=parseInt(un*255,10),un=un.toString(16);var fn=un;return fn=fn+dn.substr(4,2),fn=fn+dn.substr(2,2),fn=fn+dn.substr(0,2),fn.toLowerCase()}var Be=function(cn,un){if(logger$B.trace("label with style :",un),!!cn&&cn.getStyle()instanceof Style$1){var dn=cn.getStyle().getText();if(!dn)return;var fn="Sans",pn="16px",gn=dn.getFont();if(gn){var yn=gn.split(" ",2);pn=yn[0],fn=yn[1]}var vn=cn.getStyle().getText().getStroke();if(!vn)return;if(vn instanceof Stroke){var An=Ge("#FFFFFF"),xn=vn.getColor();if(Array.isArray(xn)){var wn="rgba(";wn+=xn[0]+",",wn+=xn[1]+",",wn+=xn[2]+",",wn+=xn[3]+")",xn=wn}if(ColorUtils.isRGB(xn)){var bn=ColorUtils.rgbaToHex(xn);An=Ge(bn.hex,bn.opacity)}else An=Ge(xn);var Mn=vn.getWidth()||"0",Pn="1";if(un&&un.getElementsByTagName("LabelStyleSimpleExtensionGroup").length===0){var En=document.createElementNS(e.namespaceURI,"LabelStyleSimpleExtensionGroup");En.setAttribute("fontSize",pn),En.setAttribute("fontFamily",fn),En.setAttribute("haloColor",An),En.setAttribute("haloRadius",Mn),En.setAttribute("haloOpacity",Pn),un.appendChild(En)}}var Cn=cn.getStyle().getImage();if(!Cn)return;if(Cn instanceof CircleStyle){var Rn=null,Tn=null;if(Cn.getStroke()){if(Tn=Cn.getStroke().getWidth(),Rn=Cn.getStroke().getColor(),Array.isArray(Rn)){var Nn="rgba(";Nn+=Rn[0]+",",Nn+=Rn[1]+",",Nn+=Rn[2]+",",Nn+=Rn[3]+")",Rn=Nn}if(ColorUtils.isRGB(Rn)){var Gn=ColorUtils.rgbaToHex(Rn);Rn=Ge(Gn.hex,Gn.opacity)}else Rn=Ge(Rn)}var zn=null;if(Cn.getFill()){if(zn=Cn.getFill().getColor(),Array.isArray(zn)){var $n="rgba(";$n+=zn[0]+",",$n+=zn[1]+",",$n+=zn[2]+",",$n+=zn[3]+")",zn=$n}if(ColorUtils.isRGB(zn)){var Qn=ColorUtils.rgbaToHex(zn);zn=Ge(Qn.hex,Qn.opacity)}else zn=Ge(zn)}if(un&&un.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var Hn=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");Hn.setAttribute("type","circle"),Hn.setAttribute("radius",Cn.getRadius()),Hn.setAttribute("fillColor",zn),Hn.setAttribute("strokeColor",Rn),Hn.setAttribute("strokeWidth",Tn),un.appendChild(Hn)}}}},je=function(cn,un){if(logger$B.trace("marker with style (hotspot):",un),!!cn&&cn.getStyle()instanceof Style$1){var dn=cn.getStyle().getImage();if(!dn)return;if(dn instanceof Icon){var fn=0,pn=0,gn="pixels",yn="pixels",vn=dn.getSize(),An=dn.getAnchor();if(An.length&&(fn=An[0],pn=An[1],yn==="fraction"?pn=pn===1?0:1-pn:pn=yn==="pixels"&&pn===vn[1]?0:vn[1]-pn),un&&un.getElementsByTagName("hotSpot").length===0){var xn=document.createElementNS(e.namespaceURI,"hotSpot");xn.setAttribute("x",fn),xn.setAttribute("y",pn),xn.setAttribute("xunits",gn),xn.setAttribute("yunits",yn),un.appendChild(xn)}}}},Ve=function(cn,un){if(cn&&cn.getStyle()instanceof Style$1){var dn=cn.getStyle().getImage();if(!dn)return;if(dn instanceof CircleStyle){var fn=null,pn=null;if(dn.getStroke()){if(pn=dn.getStroke().getWidth(),fn=dn.getStroke().getColor(),Array.isArray(fn)){var gn="rgba(";gn+=fn[0]+",",gn+=fn[1]+",",gn+=fn[2]+",",gn+=fn[3]+")",fn=gn}if(ColorUtils.isRGB(fn)){var yn=ColorUtils.rgbaToHex(fn);fn=Ge(yn.hex,yn.opacity)}else fn=Ge(fn)}var vn=null;if(dn.getFill()){if(vn=dn.getFill().getColor(),Array.isArray(vn)){var An="rgba(";An+=vn[0]+",",An+=vn[1]+",",An+=vn[2]+",",An+=vn[3]+")",vn=An}if(ColorUtils.isRGB(vn)){var xn=ColorUtils.rgbaToHex(vn);vn=Ge(xn.hex,xn.opacity)}else vn=Ge(vn)}if(un&&un.getElementsByTagName("ObjectSimpleExtensionGroup").length===0){var wn=document.createElementNS(e.namespaceURI,"LabelStyle"),bn=document.createElementNS(e.namespaceURI,"ObjectSimpleExtensionGroup");bn.setAttribute("type","circle"),bn.setAttribute("radius",dn.getRadius()),bn.setAttribute("fillColor",vn),bn.setAttribute("strokeColor",fn),bn.setAttribute("strokeWidth",pn),wn.appendChild(bn),un.appendChild(wn)}}}},Ze=function(cn,un){},Qe=function(cn,un,dn){logger$B.trace("write an icon with a label"),je(cn,un),Be(cn,dn)},en=function(cn,un){for(var dn=0;dn<un.length;dn++){var fn=un[dn];if(fn.nodeName==="name")return}var pn=cn.getProperties().name;if(pn){var gn=document.createElement("name");gn.innerHTML=pn,un.appendChild(gn)}},tn=function(cn,un){if(un&&un.length){for(var dn=[],fn=0;fn<un.length;fn++){const gn=un[fn];if(gn.nodeName==="Data"){var pn=gn.getAttribute("name");Styling.getListTags().includes(pn)&&dn.push(gn)}}dn&&dn.length&&dn.forEach(gn=>{gn.remove()})}};this._processKml(e,t,{labelStyle:Be,iconStyle:je,iconLabelStyle:Qe,circleStyle:Ve,pointStyle:Ze,nameData:en,extendedData:tn});var an=Parser$1.toString(e);return an||null}_writeRootExtensions(e,t){var ke=document.createElementNS(e.namespaceURI,"ExtendedData");for(const Ve in t)if(Object.hasOwnProperty.call(t,Ve)){const Ze=t[Ve];var Ge=document.createElementNS(e.namespaceURI,"Data");Ge.setAttribute("name",Ve);var Be=document.createTextNode(JSON.stringify(Ze));Ge.appendChild(Be),ke.appendChild(Ge)}var je=e.firstChild;e.insertBefore(ke,je)}readFeatures(e,t){logger$B.log("overload : ol.format.KML.readFeatures"),typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var ke=this._readExtendStylesFeatures(e,t);return logger$B.trace("Styles étendus",ke),ke.forEach(Ge=>{Styling.definePropertiesFromStyle(Ge)}),ke}_readExtendStylesFeatures(e,t){var ke=super.readFeatures(e,t),Ge=null,Be="";if(typeof e=="string"?Be=e:Be=e.documentElement.outerHTML,Be=Be.replace(/\n/g,""),Be=Be.replace(/(>)\s*(<)/g,"$1$2"),Ge=Parser$1.parse(Be),Ge===null)return ke;function je(an){var cn="";cn=cn+an.substr(6,2),cn=cn+an.substr(4,2),cn=cn+an.substr(2,2);for(var un=parseInt(cn,16).toString(16),dn="",fn=un.length||0,pn=0;pn<6-fn;pn++)dn+="0";return un="#"+dn+un,un}var Ve=function(an,cn){if(logger$B.trace("label with style :",cn),!!an){for(var un=an.getProperties().name,dn=je("ff000000"),fn="#FFFFFF",pn=0,gn="Sans",yn="16px",vn=null,An=5,xn="#000000",wn="#ffffff",bn=1,Mn=!1,Pn=!1,En=cn.childNodes,Cn=0;Cn<En.length;Cn++)switch(En[Cn].nodeName){case"scale":break;case"colorMode":break;case"color":dn=je(En[Cn].textContent);break;case"LabelStyleSimpleExtensionGroup":Mn=!0;for(var Rn=En[Cn].attributes,Tn=0;Tn<Rn.length;Tn++)switch(Rn[Tn].nodeName){case"fontFamily":gn=Rn[Tn].nodeValue;break;case"fontSize":yn=Rn[Tn].nodeValue;break;case"haloColor":fn=je(Rn[Tn].nodeValue);break;case"haloRadius":pn=parseInt(Rn[Tn].nodeValue,10);break}break;case"ObjectSimpleExtensionGroup":Pn=!0;for(var Nn=En[Cn].attributes,Gn=0;Gn<Nn.length;Gn++)switch(Nn[Gn].nodeName){case"type":vn=Nn[Gn].nodeValue;break;case"radius":An=parseInt(Nn[Gn].nodeValue,10);break;case"fillColor":var zn=Nn[Gn].nodeValue,$n=Math.round(ColorUtils.num(zn.substr(0,2))/255*10)/10,Qn=je(zn);xn=ColorUtils.hexToRgba(Qn,$n);break;case"strokeColor":var Hn=Nn[Gn].nodeValue,Ni=Math.round(ColorUtils.num(Hn.substr(0,2))/255*10)/10,On=je(Hn);wn=ColorUtils.hexToRgba(On,Ni);break;case"strokeWidth":bn=parseInt(Nn[Gn].nodeValue,10);break}break}var qn=null;Pn&&vn==="circle"?qn=new CircleStyle({radius:An,fill:new Fill({color:xn}),stroke:new Stroke({color:wn,width:bn})}):Mn&&(qn=new Icon({src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",size:[51,38],anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"})),an.setStyle(new Style$1({image:qn,text:new Text({font:yn+" "+gn,textAlign:"left",text:un,fill:new Fill({color:dn}),stroke:new Stroke({color:fn,width:pn})})}))}},Ze=function(an,cn){logger$B.trace("hotspot :",cn);for(var un=null,dn=null,fn=je("ffffffff"),pn=!1,gn=51,yn=38,vn=!1,An=25.5,xn="pixels",wn=38,bn="pixels",Mn=cn.childNodes,Pn=!1,En=0;En<Mn.length;En++)switch(Mn[En].nodeName){case"Icon":Pn=!0;for(var Cn=Mn[En].childNodes,Rn=0;Rn<Cn.length;Rn++)switch(Cn[Rn].nodeName){case"href":un=Cn[Rn].textContent;break;case"gx:w":pn=!0,gn=parseFloat(Cn[Rn].textContent);break;case"gx:h":pn=!0,yn=parseFloat(Cn[Rn].textContent);break}break;case"hotSpot":vn=!0;for(var Tn=Mn[En].attributes,Nn=0;Nn<Tn.length;Nn++)switch(Tn[Nn].nodeName){case"x":An=parseFloat(Tn[Nn].nodeValue);break;case"y":wn=parseFloat(Tn[Nn].nodeValue);break;case"yunits":xn=Tn[Nn].nodeValue;break;case"xunits":bn=Tn[Nn].nodeValue;break}break;case"scale":dn=parseFloat(Mn[En].textContent);break;case"color":fn=je(Mn[En].textContent);break}var Gn=null;if(Pn){var zn={src:un||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",color:fn,crossOrigin:"anonymous",scale:dn||1};pn&&Helper.mergeParams(zn,{size:[gn,yn]}),vn&&Helper.mergeParams(zn,{anchor:[An,wn],anchorOrigin:"bottom-left",anchorXUnits:xn||"pixels",anchorYUnits:bn||"pixels"}),Gn=new Icon(zn)}var $n=an.getStyleFunction();if($n){var Qn=$n(an,0);if(Qn&&!Array.isArray(Qn)&&(Qn=[Qn]),Qn&&Qn.length!==0){var Hn=Qn.length===1?Qn[0]:Qn[Qn.length-1];an.setStyle(new Style$1({image:Gn,text:Hn.getText()}))}}},Qe=function(an,cn){if(logger$B.trace("extendData :",cn),!!an){for(var un={},dn=an.get("name")||"",fn=an.get("description")||"",pn=null,gn=0;gn<cn.length;gn++){var yn=cn[gn],vn=yn.attributes[0],An=yn.childNodes;if(vn.nodeName==="name")switch(vn.nodeValue){case"label":dn=yn.textContent,un.name=dn;break;case"title":case"attributetitle":for(var xn=0;xn<An.length;xn++)An[xn].nodeName==="value"&&(pn=An[xn].textContent);break;default:un[vn.nodeValue]=yn.textContent;break}}pn&&(fn=fn?pn+" : "+fn:pn,un.description=fn),Object.keys(un).length&&an.setProperties(un,!0)}},en=function(an,cn,un){logger$B.trace("display icon and label"),Ve(an,un),Ze(an,cn)},tn=function(an,cn){};return this._processKml(Ge,ke,{lineStringStyle:tn,polygonStyle:tn,pointStyle:tn,labelStyle:this.showPointNames_?Ve:null,iconStyle:Ze,iconLabelStyle:this.showPointNames_?en:Ze,extendedData:Qe}),ke}readRootExtensions(e){for(var t={},ke=this.source.nodeName==="#document"?this.source.childNodes[0]:this.source,Ge=ke.childNodes,Be=0;Be<Ge.length;Be++){var je=Ge[Be];if(je.nodeName==="ExtendedData")for(var Ve=je.childNodes,Ze=0;Ze<Ve.length;Ze++){var Qe=Ve[Ze];if(Qe.nodeName==="Data"){var en=Qe.attributes[0];if(en&&en.nodeName==="name"&&en.nodeValue===e){t=JSON.parse(Qe.textContent);break}}}}return t}};window.ol&&window.ol.format&&(window.ol.format.KMLExtended=KML);const NAMESPACE_URIS$3=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],SCHEMA_LOCATION="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",FEATURE_READER={rte:readRte,trk:readTrk,wpt:readWpt},GPX_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeArrayPusher(readRte),trk:makeArrayPusher(readTrk),wpt:makeArrayPusher(readWpt)}),LINK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeObjectPropertySetter(readString,"linkText"),type:makeObjectPropertySetter(readString,"linkType")}),AUTHOR_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),email:parseEmail,link:parseLink}),METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),author:makeObjectPropertySetter(readAuthor),copyright:makeObjectPropertySetter(readCopyright),link:parseLink,time:makeObjectPropertySetter(readDateTime),keywords:makeObjectPropertySetter(readString),bounds:parseBounds,extensions:parseExtensions}),COPYRIGHT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{year:makeObjectPropertySetter(readPositiveInteger),license:makeObjectPropertySetter(readString)}),GPX_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{rte:makeChildAppender(writeRte),trk:makeChildAppender(writeTrk),wpt:makeChildAppender(writeWpt)});let GPX$1=class extends XMLFeature{constructor(e){super(),e=e||{},this.dataProjection=get$3("EPSG:4326"),this.readExtensions_=e.readExtensions}handleReadExtensions_(e){e||(e=[]);for(let t=0,ke=e.length;t<ke;++t){const Ge=e[t];if(this.readExtensions_){const Be=Ge.get("extensionsNode_")||null;this.readExtensions_(Ge,Be)}Ge.set("extensionsNode_",void 0)}}readMetadata(e){return e?typeof e=="string"?this.readMetadataFromDocument(parse$1(e)):isDocument(e)?this.readMetadataFromDocument(e):this.readMetadataFromNode(e):null}readMetadataFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType===Node.ELEMENT_NODE){const ke=this.readMetadataFromNode(t);if(ke)return ke}return null}readMetadataFromNode(e){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;for(let t=e.firstElementChild;t;t=t.nextElementSibling)if(NAMESPACE_URIS$3.includes(t.namespaceURI)&&t.localName==="metadata")return pushParseAndPop({},METADATA_PARSERS,t,[]);return null}readFeatureFromNode(e,t){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return null;const ke=FEATURE_READER[e.localName];if(!ke)return null;const Ge=ke(e,[this.getReadOptions(e,t)]);return Ge?(this.handleReadExtensions_([Ge]),Ge):null}readFeaturesFromNode(e,t){if(!NAMESPACE_URIS$3.includes(e.namespaceURI))return[];if(e.localName=="gpx"){const ke=pushParseAndPop([],GPX_PARSERS,e,[this.getReadOptions(e,t)]);return ke?(this.handleReadExtensions_(ke),ke):[]}return[]}writeFeaturesNode(e,t){t=this.adaptOptions(t);const ke=createElementNS("http://www.topografix.com/GPX/1/1","gpx");return ke.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",XML_SCHEMA_INSTANCE_URI),ke.setAttributeNS(XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation",SCHEMA_LOCATION),ke.setAttribute("version","1.1"),ke.setAttribute("creator","OpenLayers"),pushSerializeAndPop({node:ke},GPX_SERIALIZERS,GPX_NODE_FACTORY,e,[t]),ke}};const RTE_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions,type:makeObjectPropertySetter(readString),rtept:parseRtePt}),RTEPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),TRK_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,number:makeObjectPropertySetter(readPositiveInteger),type:makeObjectPropertySetter(readString),extensions:parseExtensions,trkseg:parseTrkSeg}),TRKSEG_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:parseTrkPt}),TRKPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime)}),WPT_PARSERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeObjectPropertySetter(readDecimal),time:makeObjectPropertySetter(readDateTime),magvar:makeObjectPropertySetter(readDecimal),geoidheight:makeObjectPropertySetter(readDecimal),name:makeObjectPropertySetter(readString),cmt:makeObjectPropertySetter(readString),desc:makeObjectPropertySetter(readString),src:makeObjectPropertySetter(readString),link:parseLink,sym:makeObjectPropertySetter(readString),type:makeObjectPropertySetter(readString),fix:makeObjectPropertySetter(readString),sat:makeObjectPropertySetter(readPositiveInteger),hdop:makeObjectPropertySetter(readDecimal),vdop:makeObjectPropertySetter(readDecimal),pdop:makeObjectPropertySetter(readDecimal),ageofdgpsdata:makeObjectPropertySetter(readDecimal),dgpsid:makeObjectPropertySetter(readPositiveInteger),extensions:parseExtensions}),LINK_SEQUENCE=["text","type"],LINK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{text:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode)}),RTE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","rtept"]),RTE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),rtept:makeArraySerializer(makeChildAppender(writeWptType))}),RTEPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time"]),TRK_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["name","cmt","desc","src","link","number","type","trkseg"]),TRK_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),number:makeChildAppender(writeNonNegativeIntegerTextNode),type:makeChildAppender(writeStringTextNode),trkseg:makeArraySerializer(makeChildAppender(writeTrkSeg))}),TRKSEG_NODE_FACTORY=makeSimpleNodeFactory("trkpt"),TRKSEG_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{trkpt:makeChildAppender(writeWptType)}),WPT_TYPE_SEQUENCE=makeStructureNS(NAMESPACE_URIS$3,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),WPT_TYPE_SERIALIZERS=makeStructureNS(NAMESPACE_URIS$3,{ele:makeChildAppender(writeDecimalTextNode),time:makeChildAppender(writeDateTimeTextNode),magvar:makeChildAppender(writeDecimalTextNode),geoidheight:makeChildAppender(writeDecimalTextNode),name:makeChildAppender(writeStringTextNode),cmt:makeChildAppender(writeStringTextNode),desc:makeChildAppender(writeStringTextNode),src:makeChildAppender(writeStringTextNode),link:makeChildAppender(writeLink),sym:makeChildAppender(writeStringTextNode),type:makeChildAppender(writeStringTextNode),fix:makeChildAppender(writeStringTextNode),sat:makeChildAppender(writeNonNegativeIntegerTextNode),hdop:makeChildAppender(writeDecimalTextNode),vdop:makeChildAppender(writeDecimalTextNode),pdop:makeChildAppender(writeDecimalTextNode),ageofdgpsdata:makeChildAppender(writeDecimalTextNode),dgpsid:makeChildAppender(writeNonNegativeIntegerTextNode)}),GEOMETRY_TYPE_TO_NODENAME={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function GPX_NODE_FACTORY(Oe,e,t){const ke=Oe.getGeometry();if(ke){const Ge=GEOMETRY_TYPE_TO_NODENAME[ke.getType()];if(Ge){const Be=e[e.length-1].node;return createElementNS(Be.namespaceURI,Ge)}}}function appendCoordinate(Oe,e,t,ke){return Oe.push(parseFloat(t.getAttribute("lon")),parseFloat(t.getAttribute("lat"))),"ele"in ke?(Oe.push(ke.ele),delete ke.ele,e.hasZ=!0):Oe.push(0),"time"in ke?(Oe.push(ke.time),delete ke.time,e.hasM=!0):Oe.push(0),Oe}function applyLayoutOptions(Oe,e,t){let ke="XY",Ge=2;if(Oe.hasZ&&Oe.hasM?(ke="XYZM",Ge=4):Oe.hasZ?(ke="XYZ",Ge=3):Oe.hasM&&(ke="XYM",Ge=3),Ge!==4){for(let Be=0,je=e.length/4;Be<je;Be++)e[Be*Ge]=e[Be*4],e[Be*Ge+1]=e[Be*4+1],Oe.hasZ&&(e[Be*Ge+2]=e[Be*4+2]),Oe.hasM&&(e[Be*Ge+2]=e[Be*4+3]);if(e.length=e.length/4*Ge,t)for(let Be=0,je=t.length;Be<je;Be++)t[Be]=t[Be]/4*Ge}return ke}function readAuthor(Oe,e){const t=pushParseAndPop({},AUTHOR_PARSERS,Oe,e);if(t)return t}function readCopyright(Oe,e){const t=pushParseAndPop({},COPYRIGHT_PARSERS,Oe,e);if(t){const ke=Oe.getAttribute("author");return ke!==null&&(t.author=ke),t}}function parseBounds(Oe,e){const t=e[e.length-1],ke=Oe.getAttribute("minlat"),Ge=Oe.getAttribute("minlon"),Be=Oe.getAttribute("maxlat"),je=Oe.getAttribute("maxlon");Ge!==null&&ke!==null&&je!==null&&Be!==null&&(t.bounds=[[parseFloat(Ge),parseFloat(ke)],[parseFloat(je),parseFloat(Be)]])}function parseEmail(Oe,e){const t=e[e.length-1],ke=Oe.getAttribute("id"),Ge=Oe.getAttribute("domain");ke!==null&&Ge!==null&&(t.email=`${ke}@${Ge}`)}function parseLink(Oe,e){const t=e[e.length-1],ke=Oe.getAttribute("href");ke!==null&&(t.link=ke),parseNode(LINK_PARSERS,Oe,e)}function parseExtensions(Oe,e){const t=e[e.length-1];t.extensionsNode_=Oe}function parseRtePt(Oe,e){const t=pushParseAndPop({},RTEPT_PARSERS,Oe,e);if(t){const ke=e[e.length-1],Ge=ke.flatCoordinates,Be=ke.layoutOptions;appendCoordinate(Ge,Be,Oe,t)}}function parseTrkPt(Oe,e){const t=pushParseAndPop({},TRKPT_PARSERS,Oe,e);if(t){const ke=e[e.length-1],Ge=ke.flatCoordinates,Be=ke.layoutOptions;appendCoordinate(Ge,Be,Oe,t)}}function parseTrkSeg(Oe,e){const t=e[e.length-1];parseNode(TRKSEG_PARSERS,Oe,e);const ke=t.flatCoordinates;t.ends.push(ke.length)}function readRte(Oe,e){const t=e[0],ke=pushParseAndPop({flatCoordinates:[],layoutOptions:{}},RTE_PARSERS,Oe,e);if(!ke)return;const Ge=ke.flatCoordinates;delete ke.flatCoordinates;const Be=ke.layoutOptions;delete ke.layoutOptions;const je=applyLayoutOptions(Be,Ge),Ve=new LineString(Ge,je);transformGeometryWithOptions(Ve,!1,t);const Ze=new Feature(Ve);return Ze.setProperties(ke,!0),Ze}function readTrk(Oe,e){const t=e[0],ke=pushParseAndPop({flatCoordinates:[],ends:[],layoutOptions:{}},TRK_PARSERS,Oe,e);if(!ke)return;const Ge=ke.flatCoordinates;delete ke.flatCoordinates;const Be=ke.ends;delete ke.ends;const je=ke.layoutOptions;delete ke.layoutOptions;const Ve=applyLayoutOptions(je,Ge,Be),Ze=new MultiLineString(Ge,Ve,Be);transformGeometryWithOptions(Ze,!1,t);const Qe=new Feature(Ze);return Qe.setProperties(ke,!0),Qe}function readWpt(Oe,e){const t=e[0],ke=pushParseAndPop({},WPT_PARSERS,Oe,e);if(!ke)return;const Ge={},Be=appendCoordinate([],Ge,Oe,ke),je=applyLayoutOptions(Ge,Be),Ve=new Point$1(Be,je);transformGeometryWithOptions(Ve,!1,t);const Ze=new Feature(Ve);return Ze.setProperties(ke,!0),Ze}function writeLink(Oe,e,t){Oe.setAttribute("href",e);const Ge=t[t.length-1].properties,Be=[Ge.linkText,Ge.linkType];pushSerializeAndPop({node:Oe},LINK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Be,t,LINK_SEQUENCE)}function writeWptType(Oe,e,t){const ke=t[t.length-1],Be=ke.node.namespaceURI,je=ke.properties;switch(Oe.setAttributeNS(null,"lat",String(e[1])),Oe.setAttributeNS(null,"lon",String(e[0])),ke.geometryLayout){case"XYZM":e[3]!==0&&(je.time=e[3]);case"XYZ":e[2]!==0&&(je.ele=e[2]);break;case"XYM":e[2]!==0&&(je.time=e[2]);break}const Ze=Oe.nodeName=="rtept"?RTEPT_TYPE_SEQUENCE[Be]:WPT_TYPE_SEQUENCE[Be],Qe=makeSequence(je,Ze);pushSerializeAndPop({node:Oe,properties:je},WPT_TYPE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,Ze)}function writeRte(Oe,e,t){const ke=t[0],Ge=e.getProperties(),Be={node:Oe};Be.properties=Ge;const je=e.getGeometry();if(je.getType()=="LineString"){const en=transformGeometryWithOptions(je,!0,ke);Be.geometryLayout=en.getLayout(),Ge.rtept=en.getCoordinates()}const Ve=t[t.length-1].node,Ze=RTE_SEQUENCE[Ve.namespaceURI],Qe=makeSequence(Ge,Ze);pushSerializeAndPop(Be,RTE_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,Ze)}function writeTrk(Oe,e,t){const ke=t[0],Ge=e.getProperties(),Be={node:Oe};Be.properties=Ge;const je=e.getGeometry();if(je.getType()=="MultiLineString"){const en=transformGeometryWithOptions(je,!0,ke);Ge.trkseg=en.getLineStrings()}const Ve=t[t.length-1].node,Ze=TRK_SEQUENCE[Ve.namespaceURI],Qe=makeSequence(Ge,Ze);pushSerializeAndPop(Be,TRK_SERIALIZERS,OBJECT_PROPERTY_NODE_FACTORY,Qe,t,Ze)}function writeTrkSeg(Oe,e,t){const ke={node:Oe};ke.geometryLayout=e.getLayout(),ke.properties={},pushSerializeAndPop(ke,TRKSEG_SERIALIZERS,TRKSEG_NODE_FACTORY,e.getCoordinates(),t)}function writeWpt(Oe,e,t){const ke=t[0],Ge=t[t.length-1];Ge.properties=e.getProperties();const Be=e.getGeometry();if(Be.getType()=="Point"){const je=transformGeometryWithOptions(Be,!0,ke);Ge.geometryLayout=je.getLayout(),writeWptType(Oe,je.getCoordinates(),t)}}var GPX=class Hf extends GPX$1{constructor(e){if(super(e),!(this instanceof Hf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(this.options=e||{},this.options.readExtensions&&typeof this.options.readExtensions=="function"){var t=this.options.readExtensions;this.options.readExtensions=function(ke,Ge){this.readExtensions(ke,Ge),t.call(this,ke,Ge)}}else this.options.readExtensions=this.readExtensions;return(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var ke=super.readFeatures(e,t);typeof e=="string"?this.source=Parser$1.parse(e):e!==null&&(this.source=e);var Ge=this;return ke.forEach(function(Be,je,Ve){Be.setId(je+1);var Ze=Be.getProperties().desc;Ze&&Be.setProperties({description:Ze});var Qe=Be.getStyleFunction();if(!Qe){var en=Styling.defineStyleFunctionByDefault(Ge.options.defaultStyle);en&&Be.setStyle(en)}}),ke}writeFeatures(e,t){if(e.forEach(function(Ze,Qe,en){var tn=Ze.getProperties().description;tn&&Ze.setProperties({desc:tn}),Styling.definePropertiesFromStyle(Ze);var an=Ze.getGeometry().getType();if(an==="Polygon"){var cn=Ze.clone();cn.set("type",an),cn.setGeometry(new LineString(Ze.getGeometry().getCoordinates())),e.push(cn),en.splice(Qe,1)}else if(an==="MultiPolygon"){var un=Ze.clone();un.set("type",an),un.setGeometry(new MultiLineString(Ze.getGeometry().getCoordinates())),e.push(un),en.splice(Qe,1)}}),this.options.orderBy!==void 0){var ke=this.options.orderBy;if(ke){var Ge=function(Ze,Qe){var en=Ze.get(ke)||0,tn=Qe.get(ke)||0;return en.toString().localeCompare(tn.toString(),void 0,{numeric:!0})};e.sort(Ge)}}var Be=super.writeFeaturesNode(e,t);if(Be===null)return null;this.options.hasOwnProperty("extensions")&&this.writeRootExtensions_(Be,this.options.extensions),this.processExtensions_(Be,e,{extensions:this.writeExtensions_});var je=Parser$1.toString(Be);if(!je)return null;var Ve=Parser$1.format(je);return Ve===""?null:Ve}readExtensions(e,t){var ke=t;if(!t){var Ge=e.getProperties();for(const Ze in Ge)if(Object.hasOwnProperty.call(Ge,Ze)){const Qe=Ge[Ze];if(Qe instanceof Node){ke=Qe;break}}}if(!ke){console.warn("node not found !");return}for(var Be=0;Be<ke.childNodes.length;Be++){var je=ke.childNodes[Be];je.nodeType===1&&e.set(je.nodeName,je.textContent)}Styling.APPLY_CONVERT_GEOM_GPX=!0;var Ve=Styling.defineStyleFromProperties(e);Ve&&e.setStyle(Ve)}readRootExtensions(e){for(var t={},ke=this.source.childNodes[0],Ge=ke.childNodes,Be=0;Be<Ge.length;Be++){var je=Ge[Be];if(je.nodeName==="metadata")for(var Ve=je.childNodes,Ze=0;Ze<Ve.length;Ze++){var Qe=Ve[Ze];if(Qe.nodeName==="extensions")for(var en=Qe.childNodes,tn=0;tn<en.length;tn++){var an=en[tn];if(an.nodeName==="data"){var cn=an.attributes[0];if(cn&&cn.nodeName==="name"&&cn.nodeValue===e){t=JSON.parse(an.textContent);break}}}}}return t}writeRootExtensions_(e,t,ke){var Ge=document.createElement("metadata"),Be=document.createElement("extensions");function je(en,tn){for(const gn in tn)if(Object.hasOwnProperty.call(tn,gn)){var an=tn[gn]||"",cn=document.createElement(gn);if(typeof an=="string"||typeof an=="number")cn.innerHTML=an,en.appendChild(cn);else if(an instanceof Array){cn.setAttribute("type","array"),cn.setAttribute("index",an.length);for(let yn=0;yn<an.length;yn++){var un=an[yn]||"",dn=document.createElement("value");if(typeof un=="string"||typeof un=="number")dn.innerHTML=un,cn.appendChild(dn);else if(un instanceof Array){dn.setAttribute("type","array"),dn.setAttribute("index",un.length);for(let vn=0;vn<un.length;vn++){var fn=un[vn]||"",pn=document.createElement("value");(typeof fn=="string"||typeof fn=="number")&&(pn.innerHTML=fn,dn.appendChild(pn))}cn.appendChild(dn)}else un instanceof Object&&cn.appendChild(je(dn,un))}en.appendChild(cn)}else an instanceof Object&&en.appendChild(je(cn,an))}return en}if(ke)je(Be,t);else for(const en in t)if(Object.hasOwnProperty.call(t,en)){const tn=t[en];var Ve=document.createElement("data");Ve.setAttribute("name",en);var Ze=document.createTextNode(JSON.stringify(tn));Ve.appendChild(Ze),Be.appendChild(Ve)}Ge.appendChild(Be);var Qe=e.firstChild;e.insertBefore(Ge,Qe)}writeExtensions_(e,t){var ke=document.createElementNS(t.parentNode.namespaceURI,"extensions");Styling.getListTags().forEach(Ge=>{if(e.get(Ge)){var Be=document.createElementNS(t.parentNode.namespaceURI,Ge);Be.innerHTML=e.get(Ge),ke.appendChild(Be)}}),t.appendChild(ke)}processExtensions_(e,t,ke){for(var Ge=-1,Be=e.childNodes,je=0;je<Be.length;je++){var Ve=Be[je];switch(Ve.nodeName){case"wpt":case"rte":case"trk":Ge++;var Ze=t[Ge],Qe=Ze.getStyle();if(Qe){var en=ke.extensions;en&&typeof en=="function"&&en(Ze,Ve)}break;case"metadata":break;default:console.warn("nodename unknown :",Ve.nodeName);break}}}};window.ol&&window.ol.format&&(window.ol.format.GPXExtended=GPX);class JSONFeature extends FeatureFormat{constructor(){super()}getType(){return"json"}readFeature(e,t){return this.readFeatureFromObject(getObject(e),this.getReadOptions(e,t))}readFeatures(e,t){return this.readFeaturesFromObject(getObject(e),this.getReadOptions(e,t))}readFeatureFromObject(e,t){return abstract()}readFeaturesFromObject(e,t){return abstract()}readGeometry(e,t){return this.readGeometryFromObject(getObject(e),this.getReadOptions(e,t))}readGeometryFromObject(e,t){return abstract()}readProjection(e){return this.readProjectionFromObject(getObject(e))}readProjectionFromObject(e){return abstract()}writeFeature(e,t){return JSON.stringify(this.writeFeatureObject(e,t))}writeFeatureObject(e,t){return abstract()}writeFeatures(e,t){return JSON.stringify(this.writeFeaturesObject(e,t))}writeFeaturesObject(e,t){return abstract()}writeGeometry(e,t){return JSON.stringify(this.writeGeometryObject(e,t))}writeGeometryObject(e,t){return abstract()}}function getObject(Oe){if(typeof Oe=="string"){const e=JSON.parse(Oe);return e||null}return Oe!==null?Oe:null}let GeoJSON$1=class extends JSONFeature{constructor(e){e=e||{},super(),this.dataProjection=get$3(e.dataProjection?e.dataProjection:"EPSG:4326"),e.featureProjection&&(this.defaultFeatureProjection=get$3(e.featureProjection)),e.featureClass&&(this.featureClass=e.featureClass),this.geometryName_=e.geometryName,this.extractGeometryName_=e.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(e,t){let ke=null;e.type==="Feature"?ke=e:ke={type:"Feature",geometry:e,properties:null};const Ge=readGeometryInternal(ke.geometry);if(this.featureClass===RenderFeature)return createRenderFeature({geometry:Ge,id:ke.id,properties:ke.properties},t);const Be=new Feature;return this.geometryName_?Be.setGeometryName(this.geometryName_):this.extractGeometryName_&&ke.geometry_name&&Be.setGeometryName(ke.geometry_name),Be.setGeometry(createGeometry(Ge,t)),"id"in ke&&Be.setId(ke.id),ke.properties&&Be.setProperties(ke.properties,!0),Be}readFeaturesFromObject(e,t){const ke=e;let Ge=null;if(ke.type==="FeatureCollection"){const Be=e;Ge=[];const je=Be.features;for(let Ve=0,Ze=je.length;Ve<Ze;++Ve){const Qe=this.readFeatureFromObject(je[Ve],t);Qe&&Ge.push(Qe)}}else Ge=[this.readFeatureFromObject(e,t)];return Ge.flat()}readGeometryFromObject(e,t){return readGeometry(e,t)}readProjectionFromObject(e){const t=e.crs;let ke;if(t)if(t.type=="name")ke=get$3(t.properties.name);else if(t.type==="EPSG")ke=get$3("EPSG:"+t.properties.code);else throw new Error("Unknown SRS type");else ke=this.dataProjection;return ke}writeFeatureObject(e,t){t=this.adaptOptions(t);const ke={type:"Feature",geometry:null,properties:null},Ge=e.getId();if(Ge!==void 0&&(ke.id=Ge),!e.hasProperties())return ke;const Be=e.getProperties(),je=e.getGeometry();return je&&(ke.geometry=writeGeometry(je,t),delete Be[e.getGeometryName()]),isEmpty$1(Be)||(ke.properties=Be),ke}writeFeaturesObject(e,t){t=this.adaptOptions(t);const ke=[];for(let Ge=0,Be=e.length;Ge<Be;++Ge)ke.push(this.writeFeatureObject(e[Ge],t));return{type:"FeatureCollection",features:ke}}writeGeometryObject(e,t){return writeGeometry(e,this.adaptOptions(t))}};function readGeometryInternal(Oe,e){if(!Oe)return null;let t;switch(Oe.type){case"Point":{t=readPointGeometry(Oe);break}case"LineString":{t=readLineStringGeometry(Oe);break}case"Polygon":{t=readPolygonGeometry(Oe);break}case"MultiPoint":{t=readMultiPointGeometry(Oe);break}case"MultiLineString":{t=readMultiLineStringGeometry(Oe);break}case"MultiPolygon":{t=readMultiPolygonGeometry(Oe);break}case"GeometryCollection":{t=readGeometryCollectionGeometry(Oe);break}default:throw new Error("Unsupported GeoJSON type: "+Oe.type)}return t}function readGeometry(Oe,e){const t=readGeometryInternal(Oe);return createGeometry(t,e)}function readGeometryCollectionGeometry(Oe,e){return Oe.geometries.map(function(ke){return readGeometryInternal(ke)})}function readPointGeometry(Oe){const e=Oe.coordinates;return{type:"Point",flatCoordinates:e,layout:getLayoutForStride(e.length)}}function readLineStringGeometry(Oe){var ke;const e=Oe.coordinates,t=e.flat();return{type:"LineString",flatCoordinates:t,ends:[t.length],layout:getLayoutForStride(((ke=e[0])==null?void 0:ke.length)||2)}}function readMultiLineStringGeometry(Oe){var Be,je;const e=Oe.coordinates,t=((je=(Be=e[0])==null?void 0:Be[0])==null?void 0:je.length)||2,ke=[],Ge=deflateCoordinatesArray(ke,0,e,t);return{type:"MultiLineString",flatCoordinates:ke,ends:Ge,layout:getLayoutForStride(t)}}function readMultiPointGeometry(Oe){var t;const e=Oe.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:getLayoutForStride(((t=e[0])==null?void 0:t.length)||2)}}function readMultiPolygonGeometry(Oe){var Be,je;const e=Oe.coordinates,t=[],ke=((je=(Be=e[0])==null?void 0:Be[0])==null?void 0:je[0].length)||2,Ge=deflateMultiCoordinatesArray(t,0,e,ke);return{type:"MultiPolygon",flatCoordinates:t,ends:Ge,layout:getLayoutForStride(ke)}}function readPolygonGeometry(Oe){var Be,je;const e=Oe.coordinates,t=[],ke=(je=(Be=e[0])==null?void 0:Be[0])==null?void 0:je.length,Ge=deflateCoordinatesArray(t,0,e,ke);return{type:"Polygon",flatCoordinates:t,ends:Ge,layout:getLayoutForStride(ke)}}function writeGeometry(Oe,e){Oe=transformGeometryWithOptions(Oe,!0,e);const t=Oe.getType();let ke;switch(t){case"Point":{ke=writePointGeometry(Oe);break}case"LineString":{ke=writeLineStringGeometry(Oe);break}case"Polygon":{ke=writePolygonGeometry(Oe,e);break}case"MultiPoint":{ke=writeMultiPointGeometry(Oe);break}case"MultiLineString":{ke=writeMultiLineStringGeometry(Oe);break}case"MultiPolygon":{ke=writeMultiPolygonGeometry(Oe,e);break}case"GeometryCollection":{ke=writeGeometryCollectionGeometry(Oe,e);break}case"Circle":{ke={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+t)}return ke}function writeGeometryCollectionGeometry(Oe,e){return e=Object.assign({},e),delete e.featureProjection,{type:"GeometryCollection",geometries:Oe.getGeometriesArray().map(function(ke){return writeGeometry(ke,e)})}}function writeLineStringGeometry(Oe,e){return{type:"LineString",coordinates:Oe.getCoordinates()}}function writeMultiLineStringGeometry(Oe,e){return{type:"MultiLineString",coordinates:Oe.getCoordinates()}}function writeMultiPointGeometry(Oe,e){return{type:"MultiPoint",coordinates:Oe.getCoordinates()}}function writeMultiPolygonGeometry(Oe,e){let t;return e&&(t=e.rightHanded),{type:"MultiPolygon",coordinates:Oe.getCoordinates(t)}}function writePointGeometry(Oe,e){return{type:"Point",coordinates:Oe.getCoordinates()}}function writePolygonGeometry(Oe,e){let t;return e&&(t=e.rightHanded),{type:"Polygon",coordinates:Oe.getCoordinates(t)}}var GeoJSON=class $f extends GeoJSON$1{constructor(e){if(super(e),!(this instanceof $f))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.options=e||{},(this.options.defaultStyle===null||typeof this.options.defaultStyle>"u")&&(this.options.defaultStyle={}),this.source=null,this}readFeatures(e,t){var ke=super.readFeatures(e,t);return typeof e=="string"?this.source=JSON.parse(e):e!==null&&(this.source=e),ke.forEach(Ge=>{var Be=Ge.getStyleFunction();if(Be){var je=Be.call(this,Ge,0);je&&je.length!==0&&Ge.setStyle(je[0])}else{var Ve=Styling.defineStyleFromProperties(Ge);if(Ve)Ge.setStyle(Ve);else{var Ze=Styling.defineStyleFunctionByDefault(this.options.defaultStyle);Ze&&(Ge.setStyle(Ze),Styling.definePropertiesFromStyle(Ge))}}}),ke}writeFeatures(e,t){e.forEach(function(Ge){Styling.definePropertiesFromStyle(Ge)});var ke=this.writeFeaturesObject(e,t);return this.options.hasOwnProperty("extensions")&&Object.assign(ke,this.options.extensions),JSON.stringify(ke)}readRootExtensions(e){return this.source[e]}};window.ol&&window.ol.format&&(window.ol.format.GeoJSONExtended=GeoJSON);var WMTS=class extends WMTS$1{constructor(e){super(e)}getFeatureInfoUrl(e,t,ke,Ge){var Be=this.options&&this.options.tilePixelRatio?this.options.tilePixelRatio:1,je=this.tileGrid,Ve=this.tileGrid.getTileCoordForCoordAndResolution(e,t),Ze=function(yn,vn,An){var xn=[0,0,0],wn=createEmpty(),bn=yn[1],Mn=yn[2],Pn=vn.getTileCoordExtent(yn),En=An.getExtent();if(En!=null&&An.isGlobal()){var Cn=Math.ceil(getWidth(En)/getWidth(Pn));bn=bn%Cn,xn[0]=yn[0],xn[1]=bn,xn[2]=yn[2],Pn=vn.getTileCoordExtent(xn,wn)}return intersects$1(Pn,En)?[yn[0],bn,Mn]:null},Qe=je.getTileCoordExtent(Ve),en=Ze(Ve,je,ke);if(!(je.getResolutions().length<=Ve[0])){var tn=je.getResolution(Ve[0]),an=je.getMatrixIds()[Ve[0]],cn={SERVICE:"WMTS",VERSION:"1.0.0",REQUEST:"GetFeatureInfo",LAYER:this.getLayer(),TILECOL:en[1],TILEROW:en[2],TILEMATRIX:an,TILEMATRIXSET:this.getMatrixSet(),FORMAT:this.getFormat()||"image/png",STYLE:this.getStyle()||"normal"};Helper.assign(cn,Ge);var un=Math.floor((e[0]-Qe[0])/(tn/Be)),dn=Math.floor((Qe[3]-e[1])/(tn/Be)),fn=je.getTileSize(Ve[0]);un=Math.min(un,(fn[0]|fn)-1),dn=Math.max(dn,0),cn.I=un,cn.J=dn;var pn=this.urls[0],gn=Gp.Helper.normalyzeUrl(pn,cn);return gn}}};window.ol&&window.ol.source&&(window.ol.source.WMTSExtended=WMTS);var LayerUtils={getZoomLevelFromScaleDenominator:function(Oe,e){var t={};switch(e){case"EPSG:2154":t={0:104579.224549894,1:52277.5323537905,2:26135.4870785954,3:13066.8913818,4:6533.2286041135,5:3266.5595244627,6:1633.2660045974,7:816.629554986,8:408.3139146768,9:204.1567415109,10:102.0783167832,11:51.0391448966,12:25.5195690743,13:12.7597836936,14:6.379891636,15:3.1899457653,16:1.5949728695,17:.7974864315,18:.3987432149,19:.1993716073,20:.0996858037,21:.0498429018};break;default:t={0:156543.033928041,1:78271.51696402048,2:39135.758482010235,3:19567.87924100512,4:9783.93962050256,5:4891.96981025128,6:2445.98490512564,7:1222.99245256282,8:611.49622628141,9:305.7481131407048,10:152.8740565703525,11:76.43702828517624,12:38.21851414258813,13:19.10925707129406,14:9.554628535647032,15:4.777314267823516,16:2.388657133911758,17:1.194328566955879,18:.5971642834779395,19:.2985821417389697,20:.1492910708694849,21:.0746455354347424};break}var ke=Oe*28e-5;for(var Ge in t)if(t.hasOwnProperty(Ge)&&t[Ge]<=ke)return Ge=parseInt(Ge,10),Ge;return 0},getAttributions:function(Oe){var e=Oe.zoom,t=[];if(Oe.originators!=null&&Oe.visibility)for(var ke,Ge=0,Be=Oe.originators.length;Ge<Be;Ge++){ke=!0;for(var je=Oe.originators[Ge],Ve=Oe.originators[Ge].constraints||[],Ze=0,Qe=Ve.length;Ze<Qe;Ze++){var en=Ve[Ze];ke=!0;var tn=this.getZoomLevelFromScaleDenominator(en.maxScaleDenominator,Oe.crs),an=this.getZoomLevelFromScaleDenominator(en.minScaleDenominator,Oe.crs)||21;tn&&tn>e&&(ke=!1),ke&&an&&an<e&&(ke=!1);var cn=en.bbox;if(ke&&cn){ke=!1;var un=Oe.extent;if(un){var dn=[cn.top,cn.left,cn.bottom,cn.right];if(this.intersects(un,dn)){ke=!0;break}}}}if(ke){var fn=je.logo,pn=je.url,gn=je.name?je.name:"",yn=je.attribution,vn=document.createElement("div");vn.className="gp-control-attribution";var An=null;An=document.createElement("a"),An.className="gp-control-attribution-link",An.target="_blank",vn.appendChild(An),pn&&(An.href=pn);var xn=!!fn,wn=null;xn?(wn=document.createElement("img"),An?(wn.className="gp-control-attribution-image",An.appendChild(wn)):(wn.className="",vn.appendChild(wn)),wn.src=fn,wn.title=yn||gn,wn.style.height="30px",wn.style.width="30px"):gn?An.textContent=gn:yn?An.textContent=yn:pn?An.textContent=pn:An.textContent="",t.push(vn.innerHTML+" ")}}return t},intersects:function(Oe,e){var t=Oe[1]<=e[3]&&e[1]<=Oe[3],ke=Oe[2]<=e[0]&&e[2]<=Oe[0];return t&&ke}},Config={configuration:{},isConfigLoaded:function(){if(this.configuration&&Object.keys(this.configuration).length!==0)return!0;var Oe=typeof window<"u"?window:typeof self<"u"?self:typeof global<"u"?global:{};return Oe.Gp&&Oe.Gp.Config&&Oe.Gp.Config.layers&&Object.keys(Oe.Gp.Config.layers).length!==0?(this.configuration=Oe.Gp.Config,!0):!1}};LoggerByDefault.getLogger("sourcewmts");var SourceWMTS=class extends WMTS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,ke=t?t.params:null,Ge=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=Config.configuration.getLayerId(e.layer,"WMTS");if(!Be)throw new Error(`ERROR : WMTS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Be),!t)throw new Error("ERROR : WMTS Layer configuration cannot be found in Geoportal.");Ge=Config.configuration.getLayerKey(Be)[0],ke=Config.configuration.getLayerParams(e.layer,"WMTS")}var je=e.ssl===!1?"http://":"https://",Ve={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(ke.url.includes("/private/")){var Ze=e.apiKey||Ge;if(!Ze)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");Ve.apikey=Ze}var Qe={url:Gp.Helper.normalyzeUrl(ke.url.replace(/(http|https):\/\//,je),Ve,!1),version:ke.version,style:ke.styles,format:ke.format,projection:ke.projection,maxZoom:LayerUtils.getZoomLevelFromScaleDenominator(ke.minScale),layer:e.layer,matrixSet:ke.TMSLink,tileGrid:new WMTSTileGrid({resolutions:ke.nativeResolutions,matrixIds:ke.matrixIds,origin:[Object.values(ke.tileMatrices)[0].topLeftCorner.x,Object.values(ke.tileMatrices)[0].topLeftCorner.y]}),crossOrigin:"anonymous"};return Helper.mergeParams(Qe,e.olParams),e.olParams&&!ke.originators&&(ke.originators=e.olParams.attributions),super(Qe),this._originators=ke.originators,this._legends=e.legends||ke.legends,this._metadata=e.metadata||ke.metadata,this._description=e.description||ke.description,this._title=e.title||ke.title,this._quicklookUrl=e.quicklookUrl||ke.quicklookUrl,this.name=e.layer,this.service="WMTS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMTS=SourceWMTS);LoggerByDefault.getLogger("sourcewms");var SourceWMS=class extends TileWMS{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,ke=t?t.params:null,Ge=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=Config.configuration.getLayerId(e.layer,"WMS");if(!Be)throw new Error(`ERROR : WMS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Be),!t)throw new Error("ERROR : WMS Layer configuration cannot be found in Geoportal.");Ge=Config.configuration.getLayerKey(Be)[0],ke=Config.configuration.getLayerParams(e.layer,"WMS")}var je=e.ssl===!1?"http://":"https://",Ve={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(ke.url.includes("/private/")){var Ze=e.apiKey||Ge;if(!Ze)throw new Error("ERROR : WMS Layer apiKey cannot be found in Geoportal Configuration.");Ve.apikey=Ze}var Qe={url:Gp.Helper.normalyzeUrl(ke.url.replace(/(http|https):\/\//,je),Ve,!1),params:{SERVICE:"WMS",LAYERS:e.layer,VERSION:ke.version,STYLES:ke.styles,FORMAT:ke.format},crossOrigin:"anonymous"};return Helper.mergeParams(Qe,e.olParams),e.olParams&&!ke.originators&&(ke.originators=e.olParams.attributions),super(Qe),this._originators=ke.originators,this._legends=e.legends||ke.legends,this._metadata=e.metadata||ke.metadata,this._title=e.title||ke.title,this._description=e.description||ke.description,this._quicklookUrl=e.quicklookUrl||ke.quicklookUrl,this.name=e.layer,this.service="WMS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWMS=SourceWMS);LoggerByDefault.getLogger("sourcewfs");var SourceWFS=class extends VectorSource{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration,ke=t?t.params:null,Ge=e.apiKey;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=Config.configuration.getLayerId(e.layer,"WFS");if(!Be)throw new Error(`ERROR : WFS Layer ID ${e.layer} cannot be found in Geoportal Configuration. Make sure that this resource is included in your contract key.`);if(t=Config.configuration.getLayerConf(Be),!t)throw new Error("ERROR : WFS Layer configuration cannot be found in Geoportal.");Ge=Config.configuration.getLayerKey(Be)[0],ke=Config.configuration.getLayerParams(e.layer,"WFS")}var je=e.ssl===!1?"http://":"https://",Ve={"gp-ol-ext":Pkg$1.olExtVersion||Pkg$1.version};if(ke.url.includes("/private/")){var Ze=e.apiKey||Ge;if(!Ze)throw new Error("ERROR : WFS Layer apiKey cannot be found in Geoportal Configuration.");Ve.apikey=Ze}var Qe=(tn,an,cn,un)=>{const dn=new XMLHttpRequest;dn.open("GET",an);const fn=function(){tn.removeLoadedExtent(extent),un()};dn.onerror=fn,dn.onload=function(){if(dn.status==200){var pn=JSON.parse(dn.responseText);const gn=tn.getFormat().readFeatures(pn);if(tn.addFeatures(gn),cn(gn),pn.links)for(let yn=0;yn<pn.links.length;yn++){const vn=pn.links[yn];vn.rel==="next"&&Qe(tn,vn.href,cn,un)}}else fn()},dn.send()},en={format:new GeoJSON$1,loader:function(tn,an,cn,un,dn){var fn=this;const pn=e.maxFeatures,gn=e.layer,yn=cn.getCode(),vn=Gp.Helper.normalyzeUrl(ke.url.replace(/(http|https):\/\//,je),Ve,!1)+"&SERVICE=WFS&VERSION=2.0.0&REQUEST=GetFeature&typename="+gn+"&outputFormat=application/json&srsname="+yn+"&bbox="+tn.join(",")+","+yn+"&maxFeatures="+pn+"&count="+pn+"&startIndex=0";Qe(fn,vn,un,dn)},strategy:tile(createXYZ({minZoom:e.olParams.minZoom||15,maxZoom:e.olParams.maxZoom||21,tileSize:512})),crossOrigin:"anonymous"};return Helper.mergeParams(en,e.olParams),e.olParams&&!ke.originators&&(ke.originators=e.olParams.attributions),super(en),this._originators=ke.originators,this._legends=e.legends||ke.legends,this._metadata=e.metadata||ke.metadata,this._title=e.title||ke.title,this._description=e.description||ke.description,this._quicklookUrl=e.quicklookUrl||ke.quicklookUrl,this.name=e.layer,this.service="WFS",this}};window.ol&&window.ol.source&&(window.ol.source.GeoportalWFS=SourceWFS);const TileProperty={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class BaseTileLayer extends Layer$1{constructor(e){e=e||{};const t=Object.assign({},e),ke=e.cacheSize;delete e.cacheSize,delete t.preload,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=ke,this.setPreload(e.preload!==void 0?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(TileProperty.PRELOAD)}setPreload(e){this.set(TileProperty.PRELOAD,e)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}getData(e){return super.getData(e)}}function asImageLike(Oe){return Oe instanceof Image||Oe instanceof HTMLCanvasElement||Oe instanceof HTMLVideoElement||Oe instanceof ImageBitmap?Oe:null}function asArrayLike(Oe){return Oe instanceof Uint8Array||Oe instanceof Uint8ClampedArray||Oe instanceof Float32Array||Oe instanceof DataView?Oe:null}const disposedError=new Error("disposed");let sharedContext=null;function toArray(Oe){sharedContext||(sharedContext=createCanvasContext2D(Oe.width,Oe.height,void 0,{willReadFrequently:!0}));const e=sharedContext.canvas,t=Oe.width;e.width!==t&&(e.width=t);const ke=Oe.height;return e.height!==ke&&(e.height=ke),sharedContext.clearRect(0,0,t,ke),sharedContext.drawImage(Oe,0,0),sharedContext.getImageData(0,0,t,ke).data}const defaultSize=[256,256];class DataTile extends Tile{constructor(e){const t=TileState.IDLE;super(e.tileCoord,t,{transition:e.transition,interpolate:e.interpolate}),this.loader_=e.loader,this.data_=null,this.error_=null,this.size_=e.size||null,this.controller_=e.controller||null}getSize(){if(this.size_)return this.size_;const e=asImageLike(this.data_);return e?[e.width,e.height]:defaultSize}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();const e=this;this.loader_().then(function(t){e.data_=t,e.state=TileState.LOADED,e.changed()}).catch(function(t){e.error_=t,e.state=TileState.ERROR,e.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(disposedError),this.controller_=null),super.disposeInternal()}}class LRUCache{constructor(e){this.highWaterMark=e!==void 0?e:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const e=this.pop();e instanceof Disposable&&e.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(e){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(e){return this.entries_.hasOwnProperty(e)}forEach(e){let t=this.oldest_;for(;t;)e(t.value_,t.key_,this),t=t.newer}get(e,t){const ke=this.entries_[e];return assert(ke!==void 0,"Tried to get a value for a key that does not exist in the cache"),ke===this.newest_||(ke===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(ke.newer.older=ke.older,ke.older.newer=ke.newer),ke.newer=null,ke.older=this.newest_,this.newest_.newer=ke,this.newest_=ke),ke.value_}remove(e){const t=this.entries_[e];return assert(t!==void 0,"Tried to get a value for a key that does not exist in the cache"),t===this.newest_?(this.newest_=t.older,this.newest_&&(this.newest_.newer=null)):t===this.oldest_?(this.oldest_=t.newer,this.oldest_&&(this.oldest_.older=null)):(t.newer.older=t.older,t.older.newer=t.newer),delete this.entries_[e],--this.count_,t.value_}getCount(){return this.count_}getKeys(){const e=new Array(this.count_);let t=0,ke;for(ke=this.newest_;ke;ke=ke.older)e[t++]=ke.key_;return e}getValues(){const e=new Array(this.count_);let t=0,ke;for(ke=this.newest_;ke;ke=ke.older)e[t++]=ke.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(e){var t;return(t=this.entries_[e])==null?void 0:t.value_}pop(){const e=this.oldest_;return delete this.entries_[e.key_],e.newer&&(e.newer.older=null),this.oldest_=e.newer,this.oldest_||(this.newest_=null),--this.count_,e.value_}replace(e,t){this.get(e),this.entries_[e].value_=t}set(e,t){assert(!(e in this.entries_),"Tried to set a value for a key that is used already");const ke={key_:e,newer:null,older:this.newest_,value_:t};this.newest_?this.newest_.newer=ke:this.oldest_=ke,this.newest_=ke,this.entries_[e]=ke,++this.count_}setSize(e){this.highWaterMark=e}}function create(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function orthographic(Oe,e,t,ke,Ge,Be,je){je=je??create();const Ve=1/(Oe-e),Ze=1/(t-ke),Qe=1/(Ge-Be);return je[0]=-2*Ve,je[1]=0,je[2]=0,je[3]=0,je[4]=0,je[5]=-2*Ze,je[6]=0,je[7]=0,je[8]=0,je[9]=0,je[10]=2*Qe,je[11]=0,je[12]=(Oe+e)*Ve,je[13]=(ke+t)*Ze,je[14]=(Be+Ge)*Qe,je[15]=1,je}function scale(Oe,e,t,ke,Ge){return Ge=Ge??create(),Ge[0]=Oe[0]*e,Ge[1]=Oe[1]*e,Ge[2]=Oe[2]*e,Ge[3]=Oe[3]*e,Ge[4]=Oe[4]*t,Ge[5]=Oe[5]*t,Ge[6]=Oe[6]*t,Ge[7]=Oe[7]*t,Ge[8]=Oe[8]*ke,Ge[9]=Oe[9]*ke,Ge[10]=Oe[10]*ke,Ge[11]=Oe[11]*ke,Ge[12]=Oe[12],Ge[13]=Oe[13],Ge[14]=Oe[14],Ge[15]=Oe[15],Ge}function translate(Oe,e,t,ke,Ge){Ge=Ge??create();let Be,je,Ve,Ze,Qe,en,tn,an,cn,un,dn,fn;return Oe===Ge?(Ge[12]=Oe[0]*e+Oe[4]*t+Oe[8]*ke+Oe[12],Ge[13]=Oe[1]*e+Oe[5]*t+Oe[9]*ke+Oe[13],Ge[14]=Oe[2]*e+Oe[6]*t+Oe[10]*ke+Oe[14],Ge[15]=Oe[3]*e+Oe[7]*t+Oe[11]*ke+Oe[15]):(Be=Oe[0],je=Oe[1],Ve=Oe[2],Ze=Oe[3],Qe=Oe[4],en=Oe[5],tn=Oe[6],an=Oe[7],cn=Oe[8],un=Oe[9],dn=Oe[10],fn=Oe[11],Ge[0]=Be,Ge[1]=je,Ge[2]=Ve,Ge[3]=Ze,Ge[4]=Qe,Ge[5]=en,Ge[6]=tn,Ge[7]=an,Ge[8]=cn,Ge[9]=un,Ge[10]=dn,Ge[11]=fn,Ge[12]=Be*e+Qe*t+cn*ke+Oe[12],Ge[13]=je*e+en*t+un*ke+Oe[13],Ge[14]=Ve*e+tn*t+dn*ke+Oe[14],Ge[15]=Ze*e+an*t+fn*ke+Oe[15]),Ge}function translation(Oe,e,t,ke){return ke=ke??create(),ke[0]=1,ke[1]=0,ke[2]=0,ke[3]=0,ke[4]=0,ke[5]=1,ke[6]=0,ke[7]=0,ke[8]=0,ke[9]=0,ke[10]=1,ke[11]=0,ke[12]=Oe,ke[13]=e,ke[14]=t,ke[15]=1,ke}const VERTEX_SHADER=`
  attribute vec4 a_position;
  attribute vec4 a_texcoord;

  uniform mat4 u_matrix;
  uniform mat4 u_textureMatrix;

  varying vec2 v_texcoord;

  void main() {
    gl_Position = u_matrix * a_position;
    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;
    v_texcoord = texcoord;
  }
`,FRAGMENT_SHADER=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (
      v_texcoord.x < 0.0 ||
      v_texcoord.y < 0.0 ||
      v_texcoord.x > 1.0 ||
      v_texcoord.y > 1.0
    ) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;class Canvas{constructor(e){this.gl_=e,this.program_=createProgram(e,FRAGMENT_SHADER,VERTEX_SHADER),this.positionLocation=e.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=e.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=e.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=e.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=e.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.positions),e.STATIC_DRAW),this.texcoordBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],e.bufferData(e.ARRAY_BUFFER,new Float32Array(this.texcoords),e.STATIC_DRAW)}drawImage(e,t,ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn){const un=this.gl_;Ze===void 0&&(Ze=Ge),Qe===void 0&&(Qe=Be),je===void 0&&(je=t),Ve===void 0&&(Ve=ke),en===void 0&&(en=je),tn===void 0&&(tn=Ve),an===void 0&&(an=un.canvas.width),cn===void 0&&(cn=un.canvas.height),un.bindTexture(un.TEXTURE_2D,e),un.useProgram(this.program_),un.bindBuffer(un.ARRAY_BUFFER,this.positionBuffer),un.enableVertexAttribArray(this.positionLocation),un.vertexAttribPointer(this.positionLocation,2,un.FLOAT,!1,0,0),un.bindBuffer(un.ARRAY_BUFFER,this.texcoordBuffer),un.enableVertexAttribArray(this.texcoordLocation),un.vertexAttribPointer(this.texcoordLocation,2,un.FLOAT,!1,0,0);let dn=orthographic(0,an,0,cn,-1,1);dn=translate(dn,Ze,Qe,0),dn=scale(dn,en,tn,1),un.uniformMatrix4fv(this.matrixLocation,!1,dn);let fn=translation(Ge/t,Be/ke,0);fn=scale(fn,je/t,Ve/ke,1),un.uniformMatrix4fv(this.textureMatrixLocation,!1,fn),un.uniform1i(this.textureLocation,0),un.drawArrays(un.TRIANGLES,0,this.positions.length/2)}}function createShader(Oe,e,t){const ke=Oe.createShader(e);if(ke===null)throw new Error("Shader compilation failed");if(Oe.shaderSource(ke,t),Oe.compileShader(ke),!Oe.getShaderParameter(ke,Oe.COMPILE_STATUS)){const Ge=Oe.getShaderInfoLog(ke);throw Ge===null?new Error("Shader info log creation failed"):new Error(Ge)}return ke}function createProgram(Oe,e,t){const ke=Oe.createProgram(),Ge=createShader(Oe,Oe.VERTEX_SHADER,t),Be=createShader(Oe,Oe.FRAGMENT_SHADER,e);if(ke===null)throw new Error("Program creation failed");if(Oe.attachShader(ke,Ge),Oe.attachShader(ke,Be),Oe.linkProgram(ke),!Oe.getProgramParameter(ke,Oe.LINK_STATUS))throw Oe.getProgramInfoLog(ke)===null?new Error("Program info log creation failed"):new Error;return ke}const EDGE_VERTEX_SHADER=`
  attribute vec4 a_position;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
  }
`,EDGE_FRAGMENT_SHADER=`
  precision mediump float;

  uniform vec4 u_val;
  void main() {
     gl_FragColor = u_val;
  }
`,TRIANGLE_VERTEX_SHADER=`
  attribute vec4 a_position;
  attribute vec2 a_texcoord;

  varying vec2 v_texcoord;

  uniform mat4 u_matrix;

  void main() {
     gl_Position = u_matrix * a_position;
     v_texcoord = a_texcoord;
  }
`,TRIANGLE_FRAGMENT_SHADER=`
  precision mediump float;

  varying vec2 v_texcoord;

  uniform sampler2D u_texture;

  void main() {
    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {
      discard;
    }
    gl_FragColor = texture2D(u_texture, v_texcoord);
  }
`;function createCanvasContextWebGL(Oe,e,t,ke){let Ge;return t&&t.length?Ge=t.shift():WORKER_OFFSCREEN_CANVAS?Ge=new OffscreenCanvas(Oe||300,e||300):Ge=document.createElement("canvas"),Oe&&(Ge.width=Oe),e&&(Ge.height=e),Ge.getContext("webgl",ke)}function releaseGLCanvas(Oe){const e=Oe.canvas;e.width=1,e.height=1,Oe.clear(Oe.COLOR_BUFFER_BIT|Oe.DEPTH_BUFFER_BIT|Oe.STENCIL_BUFFER_BIT)}const canvasGLPool=[];function render(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn){const un=Math.round(ke*e),dn=Math.round(ke*t);Oe.canvas.width=un,Oe.canvas.height=dn;let fn,pn;if(pn=Oe.createTexture(),Oe.bindTexture(Oe.TEXTURE_2D,pn),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_WRAP_S,Oe.CLAMP_TO_EDGE),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_WRAP_T,Oe.CLAMP_TO_EDGE),an?(Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_MIN_FILTER,Oe.LINEAR),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_MAG_FILTER,Oe.LINEAR)):(Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_MIN_FILTER,Oe.NEAREST),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_MAG_FILTER,Oe.NEAREST)),Oe.texImage2D(Oe.TEXTURE_2D,0,Oe.RGBA,un,dn,0,Oe.RGBA,en,null),fn=Oe.createFramebuffer(),Oe.bindFramebuffer(Oe.FRAMEBUFFER,fn),Oe.framebufferTexture2D(Oe.FRAMEBUFFER,Oe.COLOR_ATTACHMENT0,Oe.TEXTURE_2D,pn,0),fn===null)throw new Error("Could not create framebuffer");if(pn===null)throw new Error("Could not create texture");if(Ze.length===0)return{width:un,height:dn,framebuffer:fn,texture:pn};const gn=createEmpty();Ze.forEach(function(Pn,En,Cn){extend$3(gn,Pn.extent)});let yn,vn,An;const xn=1/Ge;{if(yn=Oe.createTexture(),pn===null)throw new Error("Could not create texture");vn=Math.round(getWidth(gn)*xn),An=Math.round(getHeight(gn)*xn);const Pn=Oe.getParameter(Oe.MAX_TEXTURE_SIZE),En=Math.max(vn,An),Cn=En>Pn?Pn/En:1,Rn=Math.round(vn*Cn),Tn=Math.round(An*Cn);Oe.bindTexture(Oe.TEXTURE_2D,yn),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_WRAP_S,Oe.CLAMP_TO_EDGE),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_WRAP_T,Oe.CLAMP_TO_EDGE),an?(Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_MIN_FILTER,Oe.LINEAR),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_MAG_FILTER,Oe.LINEAR)):(Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_MIN_FILTER,Oe.NEAREST),Oe.texParameteri(Oe.TEXTURE_2D,Oe.TEXTURE_MAG_FILTER,Oe.NEAREST)),Oe.texImage2D(Oe.TEXTURE_2D,0,Oe.RGBA,Rn,Tn,0,Oe.RGBA,en,null);const Nn=Oe.createFramebuffer();Oe.bindFramebuffer(Oe.FRAMEBUFFER,Nn),Oe.framebufferTexture2D(Oe.FRAMEBUFFER,Oe.COLOR_ATTACHMENT0,Oe.TEXTURE_2D,yn,0);const Gn=new Canvas(Oe);Ze.forEach(function(zn,$n,Qn){const Hn=(zn.extent[0]-gn[0])*xn*Cn,Ni=-(zn.extent[3]-gn[3])*xn*Cn,On=getWidth(zn.extent)*xn*Cn,qn=getHeight(zn.extent)*xn*Cn;if(Oe.bindFramebuffer(Oe.FRAMEBUFFER,Nn),Oe.viewport(0,0,Rn,Tn),zn.clipExtent){const Un=(zn.clipExtent[0]-gn[0])*xn*Cn,Ci=-(zn.clipExtent[3]-gn[3])*xn*Cn,Si=getWidth(zn.clipExtent)*xn*Cn,_i=getHeight(zn.clipExtent)*xn*Cn;Oe.enable(Oe.SCISSOR_TEST),Oe.scissor(an?Un:Math.round(Un),an?Ci:Math.round(Ci),an?Si:Math.round(Un+Si)-Math.round(Un),an?_i:Math.round(Ci+_i)-Math.round(Ci))}Gn.drawImage(zn.texture,zn.width,zn.height,Qe,Qe,zn.width-2*Qe,zn.height-2*Qe,an?Hn:Math.round(Hn),an?Ni:Math.round(Ni),an?On:Math.round(Hn+On)-Math.round(Hn),an?qn:Math.round(Ni+qn)-Math.round(Ni),Rn,Tn),Oe.disable(Oe.SCISSOR_TEST)}),Oe.deleteFramebuffer(Nn)}const wn=getTopLeft(je),bn=getTopLeft(gn),Mn=Pn=>{const En=(Pn[0][0]-wn[0])/Be*ke,Cn=-(Pn[0][1]-wn[1])/Be*ke,Rn=(Pn[1][0]-wn[0])/Be*ke,Tn=-(Pn[1][1]-wn[1])/Be*ke,Nn=(Pn[2][0]-wn[0])/Be*ke,Gn=-(Pn[2][1]-wn[1])/Be*ke;return{u1:Rn,v1:Tn,u0:En,v0:Cn,u2:Nn,v2:Gn}};Oe.bindFramebuffer(Oe.FRAMEBUFFER,fn),Oe.viewport(0,0,un,dn);{const Pn=[],En=[],Cn=createProgram(Oe,TRIANGLE_FRAGMENT_SHADER,TRIANGLE_VERTEX_SHADER);Oe.useProgram(Cn);const Rn=Oe.getUniformLocation(Cn,"u_texture");Oe.bindTexture(Oe.TEXTURE_2D,yn),Oe.uniform1i(Rn,0),Ve.getTriangles().forEach(function(Hn,Ni,On){const qn=Hn.source,Un=Hn.target,{u1:Ci,v1:Si,u0:_i,v0:Ii,u2:Li,v2:Ri}=Mn(Un),tr=(qn[0][0]-bn[0])/Ge/vn,Fr=-(qn[0][1]-bn[1])/Ge/An,Bn=(qn[1][0]-bn[0])/Ge/vn,Ai=-(qn[1][1]-bn[1])/Ge/An,Kn=(qn[2][0]-bn[0])/Ge/vn,Fn=-(qn[2][1]-bn[1])/Ge/An;Pn.push(Ci,Si,_i,Ii,Li,Ri),En.push(Bn,Ai,tr,Fr,Kn,Fn)});const Tn=orthographic(0,un,dn,0,-1,1),Nn=Oe.getUniformLocation(Cn,"u_matrix");Oe.uniformMatrix4fv(Nn,!1,Tn);const Gn=Oe.getAttribLocation(Cn,"a_position"),zn=Oe.createBuffer();Oe.bindBuffer(Oe.ARRAY_BUFFER,zn),Oe.bufferData(Oe.ARRAY_BUFFER,new Float32Array(Pn),Oe.STATIC_DRAW),Oe.vertexAttribPointer(Gn,2,Oe.FLOAT,!1,0,0),Oe.enableVertexAttribArray(Gn);const $n=Oe.getAttribLocation(Cn,"a_texcoord"),Qn=Oe.createBuffer();Oe.bindBuffer(Oe.ARRAY_BUFFER,Qn),Oe.bufferData(Oe.ARRAY_BUFFER,new Float32Array(En),Oe.STATIC_DRAW),Oe.vertexAttribPointer($n,2,Oe.FLOAT,!1,0,0),Oe.enableVertexAttribArray($n),Oe.drawArrays(Oe.TRIANGLES,0,Pn.length/2)}if(tn){const Pn=createProgram(Oe,EDGE_FRAGMENT_SHADER,EDGE_VERTEX_SHADER);Oe.useProgram(Pn);const En=orthographic(0,un,dn,0,-1,1),Cn=Oe.getUniformLocation(Pn,"u_matrix");Oe.uniformMatrix4fv(Cn,!1,En);const Rn=Array.isArray(tn)?tn:[0,0,0,255],Tn=Oe.getUniformLocation(Pn,"u_val");Oe.uniform4fv(Tn,Rn);const Nn=Oe.getAttribLocation(Pn,"a_position"),Gn=Oe.createBuffer();Oe.bindBuffer(Oe.ARRAY_BUFFER,Gn),Oe.vertexAttribPointer(Nn,2,Oe.FLOAT,!1,0,0),Oe.enableVertexAttribArray(Nn);const zn=Ve.getTriangles().reduce(function($n,Qn){const Hn=Qn.target,{u1:Ni,v1:On,u0:qn,v0:Un,u2:Ci,v2:Si}=Mn(Hn);return $n.concat([Ni,On,qn,Un,qn,Un,Ci,Si,Ci,Si,Ni,On])},[]);Oe.bufferData(Oe.ARRAY_BUFFER,new Float32Array(zn),Oe.STATIC_DRAW),Oe.drawArrays(Oe.LINES,0,zn.length/2)}return{width:un,height:dn,framebuffer:fn,texture:pn}}class ReprojDataTile extends DataTile{constructor(e){super({tileCoord:e.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:e.interpolate,transition:e.transition}),this.renderEdges_=e.renderEdges!==void 0?e.renderEdges:!1,this.pixelRatio_=e.pixelRatio,this.gutter_=e.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=e.sourceTileGrid,this.targetTileGrid_=e.targetTileGrid,this.wrappedTileCoord_=e.wrappedTileCoord||e.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const t=e.sourceProj,ke=t.getExtent(),Ge=e.sourceTileGrid.getExtent();this.clipExtent_=t.canWrapX()?Ge?getIntersection(ke,Ge):ke:Ge;const Be=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),je=this.targetTileGrid_.getExtent();let Ve=this.sourceTileGrid_.getExtent();const Ze=je?getIntersection(Be,je):Be;if(getArea$1(Ze)===0){this.state=TileState.EMPTY;return}ke&&(Ve?Ve=getIntersection(Ve,ke):Ve=ke);const Qe=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),en=e.targetProj,tn=calculateSourceExtentResolution(t,en,Ze,Qe);if(!isFinite(tn)||tn<=0){this.state=TileState.EMPTY;return}const an=e.errorThreshold!==void 0?e.errorThreshold:ERROR_THRESHOLD;if(this.triangulation_=new Triangulation(t,en,Ze,Ve,tn*an,Qe,e.transformMatrix),this.triangulation_.getTriangles().length===0){this.state=TileState.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(tn);let cn=this.triangulation_.calculateSourceExtent();if(Ve&&(t.canWrapX()?(cn[1]=clamp(cn[1],Ve[1],Ve[3]),cn[3]=clamp(cn[3],Ve[1],Ve[3])):cn=getIntersection(cn,Ve)),!getArea$1(cn))this.state=TileState.EMPTY;else{let un=0,dn=0;t.canWrapX()&&(un=getWidth(ke),dn=Math.floor((cn[0]-ke[0])/un)),wrapAndSliceX(cn.slice(),t,!0).forEach(pn=>{const gn=this.sourceTileGrid_.getTileRangeForExtentAndZ(pn,this.sourceZ_),yn=e.getTileFunction;for(let vn=gn.minX;vn<=gn.maxX;vn++)for(let An=gn.minY;An<=gn.maxY;An++){const xn=yn(this.sourceZ_,vn,An,this.pixelRatio_);if(xn){const wn=dn*un;this.sourceTiles_.push({tile:xn,offset:wn})}}++dn}),this.sourceTiles_.length===0&&(this.state=TileState.EMPTY)}}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const e=[];let t=!1;if(this.sourceTiles_.forEach(vn=>{var Ni;const An=vn.tile;if(!An||An.getState()!==TileState.LOADED)return;const xn=An.getSize(),wn=this.gutter_;let bn;const Mn=asArrayLike(An.getData());Mn?bn=Mn:(t=!0,bn=toArray(asImageLike(An.getData())));const Pn=[xn[0]+2*wn,xn[1]+2*wn],En=bn instanceof Float32Array,Cn=Pn[0]*Pn[1],Rn=En?Float32Array:Uint8ClampedArray,Tn=new Rn(bn.buffer),Nn=Rn.BYTES_PER_ELEMENT,Gn=Nn*Tn.length/Cn,zn=Tn.byteLength/Pn[1],$n=Math.floor(zn/Nn/Pn[0]),Qn=this.sourceTileGrid_.getTileCoordExtent(An.tileCoord);Qn[0]+=vn.offset,Qn[2]+=vn.offset;const Hn=(Ni=this.clipExtent_)==null?void 0:Ni.slice();Hn&&(Hn[0]+=vn.offset,Hn[2]+=vn.offset),e.push({extent:Qn,clipExtent:Hn,data:Tn,dataType:Rn,bytesPerPixel:Gn,pixelSize:Pn,bandCount:$n})}),this.sourceTiles_.length=0,e.length===0){this.state=TileState.ERROR,this.changed();return}const ke=this.wrappedTileCoord_[0],Ge=this.targetTileGrid_.getTileSize(ke),Be=typeof Ge=="number"?Ge:Ge[0],je=typeof Ge=="number"?Ge:Ge[1],Ve=Be*this.pixelRatio_,Ze=je*this.pixelRatio_,Qe=this.targetTileGrid_.getResolution(ke),en=this.sourceTileGrid_.getResolution(this.sourceZ_),tn=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),an=e[0].bandCount,cn=new e[0].dataType(an*Ve*Ze),un=createCanvasContextWebGL(Ve,Ze,canvasGLPool,{premultipliedAlpha:!1,antialias:!1});let dn;const fn=un.RGBA;let pn;e[0].dataType==Float32Array?(pn=un.FLOAT,un.getExtension("WEBGL_color_buffer_float"),un.getExtension("OES_texture_float"),un.getExtension("EXT_float_blend"),dn=un.getExtension("OES_texture_float_linear")!==null&&this.interpolate):(pn=un.UNSIGNED_BYTE,dn=this.interpolate);const gn=4,yn=Math.ceil(an/gn);for(let vn=yn-1;vn>=0;--vn){const An=[];for(let Rn=0,Tn=e.length;Rn<Tn;++Rn){const Nn=e[Rn],Gn=Nn.pixelSize,zn=Gn[0],$n=Gn[1],Qn=new Nn.dataType(gn*zn*$n),Hn=Nn.data;let Ni=vn*gn;for(let qn=0,Un=Qn.length;qn<Un;qn+=gn)Qn[qn]=Hn[Ni],Qn[qn+1]=Hn[Ni+1],Qn[qn+2]=Hn[Ni+2],Qn[qn+3]=Hn[Ni+3],Ni+=an;const On=un.createTexture();un.bindTexture(un.TEXTURE_2D,On),dn?(un.texParameteri(un.TEXTURE_2D,un.TEXTURE_MIN_FILTER,un.LINEAR),un.texParameteri(un.TEXTURE_2D,un.TEXTURE_MAG_FILTER,un.LINEAR)):(un.texParameteri(un.TEXTURE_2D,un.TEXTURE_MIN_FILTER,un.NEAREST),un.texParameteri(un.TEXTURE_2D,un.TEXTURE_MAG_FILTER,un.NEAREST)),un.texParameteri(un.TEXTURE_2D,un.TEXTURE_WRAP_S,un.CLAMP_TO_EDGE),un.texParameteri(un.TEXTURE_2D,un.TEXTURE_WRAP_T,un.CLAMP_TO_EDGE),un.texImage2D(un.TEXTURE_2D,0,fn,zn,$n,0,fn,pn,Qn),An.push({extent:Nn.extent,clipExtent:Nn.clipExtent,texture:On,width:zn,height:$n})}const{framebuffer:xn,width:wn,height:bn}=render(un,Be,je,this.pixelRatio_,en,Qe,tn,this.triangulation_,An,this.gutter_,pn,this.renderEdges_,dn),Mn=wn,Pn=bn*gn,En=new e[0].dataType(Mn*Pn);un.bindFramebuffer(un.FRAMEBUFFER,xn),un.readPixels(0,0,wn,bn,un.RGBA,pn,En);let Cn=vn*gn;for(let Rn=0,Tn=En.length;Rn<Tn;Rn+=gn){const Nn=(Mn-1-(Rn/Pn|0))*Pn+Rn%Pn;cn[Cn]=En[Nn],cn[Cn+1]=En[Nn+1],cn[Cn+2]=En[Nn+2],cn[Cn+3]=En[Nn+3],Cn+=an}}if(releaseGLCanvas(un),canvasGLPool.push(un.canvas),t){const vn=createCanvasContext2D(Be,je),An=new ImageData(cn,Be);vn.putImageData(An,0,0),this.reprojData_=vn.canvas}else this.reprojData_=cn;this.reprojSize_=[Math.round(Ve),Math.round(Ze)],this.state=TileState.LOADED,this.changed()}load(){if(this.state!==TileState.IDLE&&this.state!==TileState.ERROR)return;this.state=TileState.LOADING,this.changed();let e=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:t})=>{const ke=t.getState();if(ke!==TileState.IDLE&&ke!==TileState.LOADING)return;e++;const Ge=listen(t,EventType.CHANGE,()=>{const Be=t.getState();(Be==TileState.LOADED||Be==TileState.ERROR||Be==TileState.EMPTY)&&(unlistenByKey(Ge),e--,e===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(Ge)}),e===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:t}){t.getState()==TileState.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(unlistenByKey),this.sourcesListenerKeys_=null}}function getCacheKey(Oe,e,t,ke){return`${Oe},${getKeyZXY(e,t,ke)}`}function addTileToLookup(Oe,e,t){if(!(t in Oe))return Oe[t]=new Set([e]),!0;const ke=Oe[t],Ge=ke.has(e);return Ge||ke.add(e),!Ge}function removeTileFromLookup(Oe,e,t){const ke=Oe[t];return ke?ke.delete(e):!1}function getRenderExtent(Oe,e){const t=Oe.layerStatesArray[Oe.layerIndex];t.extent&&(e=getIntersection(e,fromUserExtent(t.extent,Oe.viewState.projection)));const ke=t.layer.getRenderSource();if(!ke.getWrapX()){const Ge=ke.getTileGridForProjection(Oe.viewState.projection).getExtent();Ge&&(e=getIntersection(e,Ge))}return e}class CanvasTileLayerRenderer extends CanvasLayerRenderer{constructor(e,t){super(e),t=t||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=createEmpty(),this.tempTileRange_=new TileRange(0,0,0,0),this.tempTileCoord_=createOrUpdate(0,0,0);const ke=t.cacheSize!==void 0?t.cacheSize:512;this.tileCache_=new LRUCache(ke),this.maxStaleKeys=ke*.5}getTileCache(){return this.tileCache_}getOrCreateTile(e,t,ke,Ge){const Be=this.tileCache_,Ve=this.getLayer().getSource(),Ze=getCacheKey(Ve.getKey(),e,t,ke);let Qe;if(Be.containsKey(Ze))Qe=Be.get(Ze);else{if(Qe=Ve.getTile(e,t,ke,Ge.pixelRatio,Ge.viewState.projection),!Qe)return null;Be.set(Ze,Qe)}return Qe}getTile(e,t,ke,Ge){const Be=this.getOrCreateTile(e,t,ke,Ge);return Be||null}getData(e){const t=this.frameState;if(!t)return null;const ke=this.getLayer(),Ge=apply(t.pixelToCoordinateTransform,e.slice()),Be=ke.getExtent();if(Be&&!containsCoordinate(Be,Ge))return null;const je=t.viewState,Ve=ke.getRenderSource(),Ze=Ve.getTileGridForProjection(je.projection),Qe=Ve.getTilePixelRatio(t.pixelRatio);for(let en=Ze.getZForResolution(je.resolution);en>=Ze.getMinZoom();--en){const tn=Ze.getTileCoordForCoordAndZ(Ge,en),an=this.getTile(en,tn[1],tn[2],t);if(!an||an.getState()!==TileState.LOADED)continue;const cn=Ze.getOrigin(en),un=toSize(Ze.getTileSize(en)),dn=Ze.getResolution(en);let fn;if(an instanceof ImageTile||an instanceof ReprojTile)fn=an.getImage();else if(an instanceof DataTile){if(fn=asImageLike(an.getData()),!fn)continue}else continue;const pn=Math.floor(Qe*((Ge[0]-cn[0])/dn-tn[1]*un[0])),gn=Math.floor(Qe*((cn[1]-Ge[1])/dn-tn[2]*un[1])),yn=Math.round(Qe*Ve.getGutterForProjection(je.projection));return this.getImageData(fn,pn+yn,gn+yn)}return null}prepareFrame(e){this.renderedProjection?e.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=e.viewState.projection):this.renderedProjection=e.viewState.projection;const t=this.getLayer().getSource();if(!t)return!1;const ke=t.getRevision();return this.renderedRevision_?this.renderedRevision_!==ke&&(this.renderedRevision_=ke,this.renderedSourceKey_===t.getKey()&&this.tileCache_.clear()):this.renderedRevision_=ke,!0}enqueueTiles(e,t,ke,Ge,Be){const je=e.viewState,Ve=this.getLayer(),Ze=Ve.getRenderSource(),Qe=Ze.getTileGridForProjection(je.projection),en=getUid(Ze);en in e.wantedTiles||(e.wantedTiles[en]={});const tn=e.wantedTiles[en],an=Ve.getMapInternal(),cn=Math.max(ke-Be,Qe.getMinZoom(),Qe.getZForResolution(Math.min(Ve.getMaxResolution(),an?an.getView().getResolutionForZoom(Math.max(Ve.getMinZoom(),0)):Qe.getResolution(0)),Ze.zDirection));for(let un=ke;un>=cn;--un){const dn=Qe.getTileRangeForExtentAndZ(t,un,this.tempTileRange_),fn=Qe.getResolution(un);for(let pn=dn.minX;pn<=dn.maxX;++pn)for(let gn=dn.minY;gn<=dn.maxY;++gn){const yn=this.getTile(un,pn,gn,e);if(!yn||!addTileToLookup(Ge,yn,un))continue;const An=yn.getKey();if(tn[An]=!0,yn.getState()===TileState.IDLE&&!e.tileQueue.isKeyQueued(An)){const xn=createOrUpdate(un,pn,gn,this.tempTileCoord_);e.tileQueue.enqueue([yn,en,Qe.getTileCoordCenter(xn),fn])}}}}findStaleTile_(e,t){const ke=this.tileCache_,Ge=e[0],Be=e[1],je=e[2],Ve=this.getStaleKeys();for(let Ze=0;Ze<Ve.length;++Ze){const Qe=getCacheKey(Ve[Ze],Ge,Be,je);if(ke.containsKey(Qe)){const en=ke.get(Qe);if(en.getState()===TileState.LOADED)return en.endTransition(getUid(this)),addTileToLookup(t,en,Ge),!0}}return!1}findAltTiles_(e,t,ke,Ge){const Be=e.getTileRangeForTileCoordAndZ(t,ke,this.tempTileRange_);if(!Be)return!1;let je=!0;const Ve=this.tileCache_,Qe=this.getLayer().getRenderSource().getKey();for(let en=Be.minX;en<=Be.maxX;++en)for(let tn=Be.minY;tn<=Be.maxY;++tn){const an=getCacheKey(Qe,ke,en,tn);let cn=!1;if(Ve.containsKey(an)){const un=Ve.get(an);un.getState()===TileState.LOADED&&(addTileToLookup(Ge,un,ke),cn=!0)}cn||(je=!1)}return je}renderFrame(e,t){let ke=!0;this.renderComplete=!0;const Ge=e.layerStatesArray[e.layerIndex],Be=e.viewState,je=Be.projection,Ve=Be.resolution,Ze=Be.center,Qe=e.pixelRatio,en=this.getLayer(),tn=en.getSource(),an=tn.getRevision(),cn=tn.getTileGridForProjection(je),un=cn.getZForResolution(Ve,tn.zDirection),dn=cn.getResolution(un),fn=tn.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==fn&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=fn):this.renderedSourceKey_=fn;let pn=e.extent;const gn=tn.getTilePixelRatio(Qe);this.prepareContainer(e,t);const yn=this.context.canvas.width,vn=this.context.canvas.height,An=Ge.extent&&fromUserExtent(Ge.extent);An&&(pn=getIntersection(pn,fromUserExtent(Ge.extent)));const xn=dn*yn/2/gn,wn=dn*vn/2/gn,bn=[Ze[0]-xn,Ze[1]-wn,Ze[0]+xn,Ze[1]+wn],Mn={};this.renderedTiles.length=0;const Pn=en.getPreload();if(e.nextExtent){const Hn=cn.getZForResolution(Be.nextResolution,tn.zDirection),Ni=getRenderExtent(e,e.nextExtent);this.enqueueTiles(e,Ni,Hn,Mn,Pn)}const En=getRenderExtent(e,pn);if(this.enqueueTiles(e,En,un,Mn,0),Pn>0&&setTimeout(()=>{this.enqueueTiles(e,En,un-1,Mn,Pn-1)},0),!(un in Mn))return this.container;const Cn=getUid(this),Rn=e.time;for(const Hn of Mn[un]){const Ni=Hn.getState();if((Hn instanceof ReprojTile||Hn instanceof ReprojDataTile)&&Ni===TileState.EMPTY)continue;const On=Hn.tileCoord;if(Ni===TileState.LOADED&&Hn.getAlpha(Cn,Rn)===1){Hn.endTransition(Cn);continue}if(Ni!==TileState.IDLE&&(ke=!1),Ni!==TileState.ERROR&&(this.renderComplete=!1),this.findStaleTile_(On,Mn)){removeTileFromLookup(Mn,Hn,un),e.animate=!0;continue}if(this.findAltTiles_(cn,On,un+1,Mn))continue;const Ci=cn.getMinZoom();for(let Si=un-1;Si>=Ci&&!this.findAltTiles_(cn,On,Si,Mn);--Si);}const Tn=dn/Ve*Qe/gn,Nn=this.getRenderContext(e);compose(this.tempTransform,yn/2,vn/2,Tn,Tn,0,-yn/2,-vn/2),Ge.extent&&this.clipUnrotated(Nn,e,An),tn.getInterpolate()||(Nn.imageSmoothingEnabled=!1),this.preRender(Nn,e);const Gn=Object.keys(Mn).map(Number);Gn.sort(ascending);let zn;const $n=[],Qn=[];for(let Hn=Gn.length-1;Hn>=0;--Hn){const Ni=Gn[Hn],On=tn.getTilePixelSize(Ni,Qe,je),Un=cn.getResolution(Ni)/dn,Ci=On[0]*Un*Tn,Si=On[1]*Un*Tn,_i=cn.getTileCoordForCoordAndZ(getTopLeft(bn),Ni),Ii=cn.getTileCoordExtent(_i),Li=apply(this.tempTransform,[gn*(Ii[0]-bn[0])/dn,gn*(bn[3]-Ii[3])/dn]),Ri=gn*tn.getGutterForProjection(je);for(const tr of Mn[Ni]){if(tr.getState()!==TileState.LOADED)continue;const Fr=tr.tileCoord,Bn=_i[1]-Fr[1],Ai=Math.round(Li[0]-(Bn-1)*Ci),Kn=_i[2]-Fr[2],Fn=Math.round(Li[1]-(Kn-1)*Si),$i=Math.round(Li[0]-Bn*Ci),Hi=Math.round(Li[1]-Kn*Si),Di=Ai-$i,zi=Fn-Hi,Bi=Gn.length===1;let Gi=!1;zn=[$i,Hi,$i+Di,Hi,$i+Di,Hi+zi,$i,Hi+zi];for(let Ti=0,Mi=$n.length;Ti<Mi;++Ti)if(!Bi&&Ni<Qn[Ti]){const Oi=$n[Ti];intersects$1([$i,Hi,$i+Di,Hi+zi],[Oi[0],Oi[3],Oi[4],Oi[7]])&&(Gi||(Nn.save(),Gi=!0),Nn.beginPath(),Nn.moveTo(zn[0],zn[1]),Nn.lineTo(zn[2],zn[3]),Nn.lineTo(zn[4],zn[5]),Nn.lineTo(zn[6],zn[7]),Nn.moveTo(Oi[6],Oi[7]),Nn.lineTo(Oi[4],Oi[5]),Nn.lineTo(Oi[2],Oi[3]),Nn.lineTo(Oi[0],Oi[1]),Nn.clip())}$n.push(zn),Qn.push(Ni),this.drawTile(tr,e,$i,Hi,Di,zi,Ri,Bi),Gi&&Nn.restore(),this.renderedTiles.unshift(tr),this.updateUsedTiles(e.usedTiles,tn,tr)}}if(this.renderedRevision=an,this.renderedResolution=dn,this.extentChanged=!this.renderedExtent_||!equals$1(this.renderedExtent_,bn),this.renderedExtent_=bn,this.renderedPixelRatio=Qe,this.postRender(this.context,e),Ge.extent&&Nn.restore(),Nn.imageSmoothingEnabled=!0,this.renderComplete){const Hn=(Ni,On)=>{const qn=getUid(tn),Un=On.wantedTiles[qn],Ci=Un?Object.keys(Un).length:0;this.updateCacheSize(Ci),this.tileCache_.expireCache()};e.postRenderFunctions.push(Hn)}return!this.renderComplete&&!ke&&(e.animate=!0),this.container}updateCacheSize(e){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,e*2)}drawTile(e,t,ke,Ge,Be,je,Ve,Ze){let Qe;if(e instanceof DataTile){if(Qe=asImageLike(e.getData()),!Qe)throw new Error("Rendering array data is not yet supported")}else Qe=this.getTileImage(e);if(!Qe)return;const en=this.getRenderContext(t),tn=getUid(this),an=t.layerStatesArray[t.layerIndex],cn=an.opacity*(Ze?e.getAlpha(tn,t.time):1),un=cn!==en.globalAlpha;un&&(en.save(),en.globalAlpha=cn),en.drawImage(Qe,Ve,Ve,Qe.width-2*Ve,Qe.height-2*Ve,ke,Ge,Be,je),un&&en.restore(),cn!==an.opacity?t.animate=!0:Ze&&e.endTransition(tn)}getImage(){const e=this.context;return e?e.canvas:null}getTileImage(e){return e.getImage()}updateUsedTiles(e,t,ke){const Ge=getUid(t);Ge in e||(e[Ge]={}),e[Ge][ke.getKey()]=!0}}class TileLayer extends BaseTileLayer{constructor(e){super(e)}createRenderer(){return new CanvasTileLayerRenderer(this,{cacheSize:this.getCacheSize()})}}var LayerWMTS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var ke=Config.configuration.getLayerId(e.layer,"WMTS");if(t=Config.configuration.getLayerConf(ke),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Ge;e.olParams&&e.olParams.sourceParams&&(Ge=e.olParams.sourceParams);var Be=new SourceWMTS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:Ge}),je={source:Be};if(Be.getLayer()!==void 0&&t.globalConstrainWFSts&&t.globalConstraints.projection){var Ve;typeof t.globalConstraints.projection=="string"&&(Ve=get$3(t.globalConstraints.projection)),Ve&&Ve.getUnits()&&(Ve.getUnits()==="m"?(je.minResolution=(t.globalConstraints.minScale-1)*28e-5,je.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):Ve.getUnits()==="degrees"&&(je.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),je.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(je,e.olParams),super(je),this.name=e.layer,this.service="WMTS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMTS=LayerWMTS);var LayerWMS=class extends TileLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var ke=Config.configuration.getLayerId(e.layer,"WMS");if(t=Config.configuration.getLayerConf(ke),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Ge;e.olParams&&e.olParams.sourceParams&&(Ge=e.olParams.sourceParams);var Be=new SourceWMS({layer:e.layer,configuration:e.configuration,ssl:e.ssl,apiKey:e.apiKey,olParams:Ge}),je={source:Be};if(Be.getParams().LAYERS!==void 0&&Ge&&Ge.projection){var Ve=[t.globalConstraints.extent.left,t.globalConstraints.extent.bottom,t.globalConstraints.extent.right,t.globalConstraints.extent.top];je.extent=transformExtent(Ve,"EPSG:4326",Ge.projection);var Ze;typeof Ge.projection=="string"?Ze=get$3(Ge.projection):typeof Ge.projection=="object"&&Ge.projection.getCode()&&(Ze=get$3(Ge.projection.getCode())),Ze&&Ze.getUnits()&&(Ze.getUnits()==="m"?(je.minResolution=(t.globalConstraints.minScale-1)*28e-5,je.maxResolution=(t.globalConstraints.maxScale+1)*28e-5):Ze.getUnits()==="degrees"&&(je.minResolution=(t.globalConstraints.minScale-1)*28e-5*180/(Math.PI*6378137),je.maxResolution=(t.globalConstraints.maxScale+1)*28e-5*180/(Math.PI*6378137)))}return Helper.mergeParams(je,e.olParams),super(je),this.name=e.layer,this.service="WMS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWMS=LayerWMS);const MAXFEATURES=500,MINZOOMDEFAULT=15,MAXZOOMDEFAULT=21,STYLEBYDEFAULT=new Style$1({stroke:new Stroke({color:"rgba(0, 0, 255, 1.0)",width:2}),fill:new Fill({color:"rgba(0, 0, 255, 0.5)"})});var LayerWFS=class extends VectorLayer{constructor(e){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var t=e.configuration;if(!t){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var ke=Config.configuration.getLayerId(e.layer,"WFS");if(t=Config.configuration.getLayerConf(ke),!t)throw new Error("ERROR : Layer ID not found into the catalogue !?")}var Ge;e.olParams&&e.olParams.sourceParams&&(Ge=e.olParams.sourceParams);var Be=new SourceWFS({layer:e.layer,configuration:e.configuration,maxFeatures:e.maxFeatures||MAXFEATURES,ssl:e.ssl,apiKey:e.apiKey,olParams:Ge||{minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT}}),je={source:Be};return e.olParams?Helper.mergeParams({minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},e.olParams):e.olParams={minZoom:MINZOOMDEFAULT,maxZoom:MAXZOOMDEFAULT,style:STYLEBYDEFAULT},Helper.mergeParams(je,e.olParams),super(je),this.name=e.layer,this.service="WFS",this.config=t,this}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalWFS=LayerWFS);const IMAGE_REPLAYS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},VECTOR_REPLAYS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class CanvasVectorTileLayerRenderer extends CanvasTileLayerRenderer{constructor(e,t){super(e,t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=create$1(),this.tileClipContexts_=null}drawTile(e,t,ke,Ge,Be,je,Ve,Ze){this.updateExecutorGroup_(e,t.pixelRatio,t.viewState.projection),this.tileImageNeedsRender_(e)&&this.renderTileImage_(e,t),super.drawTile(e,t,ke,Ge,Be,je,Ve,Ze)}getTile(e,t,ke,Ge){const Be=this.getOrCreateTile(e,t,ke,Ge);if(!Be)return null;const Ve=Ge.viewState.resolution,Ze=Ge.viewHints;return(!(Ze[ViewHint.ANIMATING]||Ze[ViewHint.INTERACTING])||!Be.wantedResolution)&&(Be.wantedResolution=Ve),Be}prepareFrame(e){const t=this.getLayer().getRevision();return this.renderedLayerRevision_!==t&&(this.renderedLayerRevision_=t,this.renderedTiles.length=0),super.prepareFrame(e)}updateExecutorGroup_(e,t,ke){const Ge=this.getLayer(),Be=Ge.getRevision(),je=Ge.getRenderOrder()||null,Ve=e.wantedResolution,Ze=e.getReplayState(Ge);if(!Ze.dirty&&Ze.renderedResolution===Ve&&Ze.renderedRevision==Be&&Ze.renderedRenderOrder==je)return;const Qe=Ge.getSource(),en=!!Ge.getDeclutter(),tn=Qe.getTileGrid(),cn=Qe.getTileGridForProjection(ke).getTileCoordExtent(e.wrappedTileCoord),un=Qe.getSourceTiles(t,ke,e),dn=getUid(Ge);delete e.hitDetectionImageData[dn],e.executorGroups[dn]=[],Ze.dirty=!1;for(let fn=0,pn=un.length;fn<pn;++fn){const gn=un[fn];if(gn.getState()!=TileState.LOADED)continue;const yn=gn.tileCoord,vn=tn.getTileCoordExtent(yn),An=getIntersection(cn,vn),xn=buffer(An,Ge.getRenderBuffer()*Ve,this.tempExtent),wn=equals$1(vn,An)?null:xn,bn=new BuilderGroup(0,An,Ve,t),Mn=getSquaredTolerance(Ve,t),Pn=function(Nn,Gn){let zn;const $n=Nn.getStyleFunction()||Ge.getStyleFunction();if($n&&(zn=$n(Nn,Ve)),zn){const Qn=this.renderFeature(Nn,Mn,zn,bn,en,Gn);Ze.dirty=Ze.dirty||Qn}},En=gn.getFeatures();je&&je!==Ze.renderedRenderOrder&&En.sort(je);for(let Nn=0,Gn=En.length;Nn<Gn;++Nn){const zn=En[Nn];(!wn||intersects$1(wn,zn.getGeometry().getExtent()))&&Pn.call(this,zn,Nn)}const Cn=bn.finish(),Rn=Ge.getRenderMode()!=="vector"&&en&&un.length===1?null:An,Tn=new ExecutorGroup(Rn,Ve,t,Qe.getOverlaps(),Cn,Ge.getRenderBuffer(),!0);e.executorGroups[dn].push(Tn)}Ze.renderedRevision=Be,Ze.renderedRenderOrder=je,Ze.renderedResolution=Ve}forEachFeatureAtCoordinate(e,t,ke,Ge,Be){const je=t.viewState.resolution,Ve=t.viewState.rotation;ke=ke??0;const Ze=this.getLayer(),en=Ze.getSource().getTileGridForProjection(t.viewState.projection),tn=boundingExtent([e]);buffer(tn,je*ke,tn);const an={},cn=function(yn,vn,An){let xn=yn.getId();xn===void 0&&(xn=getUid(yn));const wn=an[xn];if(wn){if(wn!==!0&&An<wn.distanceSq){if(An===0)return an[xn]=!0,Be.splice(Be.lastIndexOf(wn),1),Ge(yn,Ze,vn);wn.geometry=vn,wn.distanceSq=An}}else{if(An===0)return an[xn]=!0,Ge(yn,Ze,vn);Be.push(an[xn]={feature:yn,layer:Ze,geometry:vn,distanceSq:An,callback:Ge})}},un=this.renderedTiles,dn=getUid(Ze),fn=Ze.getDeclutter(),pn=fn?t.declutter[fn].all().map(yn=>yn.value):null;let gn;e:for(let yn=0,vn=un.length;yn<vn;++yn){const An=un[yn],xn=en.getTileCoordExtent(An.wrappedTileCoord);if(!intersects$1(xn,tn))continue;const wn=An.executorGroups[dn];for(let bn=0,Mn=wn.length;bn<Mn;++bn)if(gn=wn[bn].forEachFeatureAtCoordinate(e,je,Ve,ke,cn,pn),gn)break e}return gn}getFeatures(e){return this.renderedTiles.length===0?Promise.resolve([]):new Promise((t,ke)=>{const Ge=this.getLayer(),Be=Ge.getSource(),je=this.renderedProjection,Ve=je.getExtent(),Ze=this.renderedResolution,Qe=Be.getTileGridForProjection(je),en=apply(this.renderedPixelToCoordinateTransform_,e.slice()),tn=Qe.getTileCoordForCoordAndResolution(en,Ze).toString(),an=this.renderedTiles.find(yn=>yn.tileCoord.toString()===tn&&yn.getState()===TileState.LOADED);if(!an||an.loadingSourceTiles>0){t([]);return}Be.getWrapX()&&je.canWrapX()&&!containsExtent(Ve,Qe.getTileCoordExtent(an.tileCoord))&&wrapX$1(en,je);const cn=getUid(Ge),un=Qe.getTileCoordExtent(an.wrappedTileCoord),dn=getTopLeft(un),fn=[(en[0]-dn[0])/Ze,(dn[1]-en[1])/Ze],pn=an.getSourceTiles().reduce((yn,vn)=>yn.concat(vn.getFeatures()),[]);let gn=an.hitDetectionImageData[cn];if(!gn){const yn=toSize(Qe.getTileSize(Qe.getZForResolution(Ze,Be.zDirection))),vn=this.renderedRotation_,An=[this.getRenderTransform(Qe.getTileCoordCenter(an.wrappedTileCoord),Ze,0,HIT_DETECT_RESOLUTION,yn[0]*HIT_DETECT_RESOLUTION,yn[1]*HIT_DETECT_RESOLUTION,0)];gn=createHitDetectionImageData(yn,An,pn,Ge.getStyleFunction(),Qe.getTileCoordExtent(an.wrappedTileCoord),an.getReplayState(Ge).renderedResolution,vn),an.hitDetectionImageData[cn]=gn}t(hitDetect(fn,pn,gn))})}getFeaturesInExtent(e){const t=[],ke=this.getTileCache();if(ke.getCount()===0)return t;const Be=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),je=Be.getZForResolution(this.renderedResolution),Ve={};return ke.forEach(Ze=>{if(Ze.tileCoord[0]!==je||Ze.getState()!==TileState.LOADED)return;const Qe=Ze.getSourceTiles();for(let en=0,tn=Qe.length;en<tn;++en){const an=Qe[en],cn=an.getKey();if(cn in Ve)continue;Ve[cn]=!0;const un=an.tileCoord;if(intersects$1(e,Be.getTileCoordExtent(un))){const dn=an.getFeatures();if(dn)for(let fn=0,pn=dn.length;fn<pn;++fn){const gn=dn[fn],yn=gn.getGeometry();intersects$1(e,yn.getExtent())&&t.push(gn)}}}}),t}handleFontsChanged(){const e=this.getLayer();e.getVisible()&&this.renderedLayerRevision_!==void 0&&e.changed()}handleStyleImageChange_(e){this.renderIfReadyAndVisible()}renderDeclutter(e,t){const ke=this.context,Ge=ke.globalAlpha;ke.globalAlpha=t.opacity;const Be=e.viewHints,je=!(Be[ViewHint.ANIMATING]||Be[ViewHint.INTERACTING]),Ve=[this.context.canvas.width,this.context.canvas.height],Ze=this.getLayer().getDeclutter(),Qe=Ze?e.declutter[Ze]:void 0,en=getUid(this.getLayer()),tn=this.renderedTiles;for(let an=0,cn=tn.length;an<cn;++an){const un=tn[an],dn=un.executorGroups[en];if(dn)for(let fn=dn.length-1;fn>=0;--fn)dn[fn].execute(this.context,Ve,this.getTileRenderTransform(un,e),e.viewState.rotation,je,DECLUTTER,Qe)}ke.globalAlpha=Ge}renderDeferredInternal(e){const t=this.renderedTiles,ke=getUid(this.getLayer()),Ge=t.reduce((Ze,Qe,en)=>(Qe.executorGroups[ke].forEach(tn=>Ze.push({executorGroup:tn,index:en})),Ze),[]),Be=Ge.map(({executorGroup:Ze})=>Ze.getDeferredZIndexContexts()),je={};for(let Ze=0,Qe=Ge.length;Ze<Qe;++Ze){const en=Ge[Ze].executorGroup.getDeferredZIndexContexts();for(const tn in en)je[tn]=!0}Object.keys(je).map(Number).sort(ascending).forEach(Ze=>{Be.forEach((Qe,en)=>{Qe[Ze]&&(Qe[Ze].forEach(tn=>{const{executorGroup:an,index:cn}=Ge[en],un=an.getRenderedContext(),dn=un.globalAlpha;un.globalAlpha=this.renderedOpacity_;const fn=this.tileClipContexts_[cn];fn&&fn.draw(un),tn.draw(un),fn&&un.restore(),un.globalAlpha=dn,tn.clear()}),Qe[Ze].length=0)})})}getTileRenderTransform(e,t){const ke=t.pixelRatio,Ge=t.viewState,Be=Ge.center,je=Ge.resolution,Ve=Ge.rotation,Ze=t.size,Qe=Math.round(Ze[0]*ke),en=Math.round(Ze[1]*ke),an=this.getLayer().getSource().getTileGridForProjection(t.viewState.projection),cn=e.tileCoord,un=an.getTileCoordExtent(e.wrappedTileCoord),dn=an.getTileCoordExtent(cn,this.tempExtent)[0]-un[0];return multiply(scale$2(this.inversePixelTransform.slice(),1/ke,1/ke),this.getRenderTransform(Be,je,Ve,ke,Qe,en,dn))}postRender(e,t){var An;const ke=t.viewHints,Ge=!(ke[ViewHint.ANIMATING]||ke[ViewHint.INTERACTING]);this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice(),this.renderedRotation_=t.viewState.rotation,this.renderedOpacity_=t.layerStatesArray[t.layerIndex].opacity;const Be=this.getLayer(),je=Be.getRenderMode(),Ve=e.globalAlpha;e.globalAlpha=this.renderedOpacity_;const Ze=Be.getDeclutter(),Qe=Ze?VECTOR_REPLAYS[je].filter(xn=>!DECLUTTER.includes(xn)):VECTOR_REPLAYS[je],en=t.viewState,tn=en.rotation,an=Be.getSource(),un=an.getTileGridForProjection(en.projection).getZForResolution(en.resolution,an.zDirection),dn=this.renderedTiles,fn=[],pn=[],gn=[],yn=getUid(Be);let vn=!0;for(let xn=dn.length-1;xn>=0;--xn){const wn=dn[xn];vn=vn&&!wn.getReplayState(Be).dirty;const bn=wn.executorGroups[yn].filter(Nn=>Nn.hasExecutors(Qe));if(bn.length===0)continue;const Mn=this.getTileRenderTransform(wn,t),Pn=wn.tileCoord[0];let En=!1;const Cn=bn[0].getClipCoords(Mn);let Rn=e,Tn;if(Cn){Tn=new ZIndexContext,Rn=Tn.getContext();for(let Nn=0,Gn=fn.length;Nn<Gn;++Nn)if(un!==Pn&&Pn<pn[Nn]){const zn=fn[Nn];intersects$1([Cn[0],Cn[3],Cn[4],Cn[7]],[zn[0],zn[3],zn[4],zn[7]])&&(En||(Rn.save(),En=!0),Rn.beginPath(),Rn.moveTo(Cn[0],Cn[1]),Rn.lineTo(Cn[2],Cn[3]),Rn.lineTo(Cn[4],Cn[5]),Rn.lineTo(Cn[6],Cn[7]),Rn.moveTo(zn[6],zn[7]),Rn.lineTo(zn[4],zn[5]),Rn.lineTo(zn[2],zn[3]),Rn.lineTo(zn[0],zn[1]),Rn.clip())}fn.push(Cn),pn.push(Pn)}for(let Nn=0,Gn=bn.length;Nn<Gn;++Nn)bn[Nn].execute(e,[e.canvas.width,e.canvas.height],Mn,tn,Ge,Qe,(An=t.declutter)==null?void 0:An[Ze]);En&&(Rn===e?Rn.restore():gn[xn]=Tn)}e.globalAlpha=Ve,this.ready=vn,this.tileClipContexts_=gn,t.declutter||this.renderDeferredInternal(t),super.postRender(e,t)}renderFeature(e,t,ke,Ge,Be,je){if(!ke)return!1;let Ve=!1;if(Array.isArray(ke))for(let Ze=0,Qe=ke.length;Ze<Qe;++Ze)Ve=renderFeature$1(Ge,e,ke[Ze],t,this.boundHandleStyleImageChange_,void 0,Be,je)||Ve;else Ve=renderFeature$1(Ge,e,ke,t,this.boundHandleStyleImageChange_,void 0,Be,je);return Ve}tileImageNeedsRender_(e){const t=this.getLayer();if(t.getRenderMode()==="vector")return!1;const ke=e.getReplayState(t),Ge=t.getRevision(),Be=e.wantedResolution;return ke.renderedTileResolution!==Be||ke.renderedTileRevision!==Ge}renderTileImage_(e,t){const ke=this.getLayer(),Ge=e.getReplayState(ke),Be=ke.getRevision(),je=e.executorGroups[getUid(ke)];Ge.renderedTileRevision=Be;const Ve=e.wrappedTileCoord,Ze=Ve[0],Qe=ke.getSource();let en=t.pixelRatio;const an=t.viewState.projection,cn=Qe.getTileGridForProjection(an),un=cn.getResolution(e.tileCoord[0]),dn=t.pixelRatio/e.wantedResolution*un,fn=cn.getResolution(Ze),pn=e.getContext();en=Math.round(Math.max(en,dn/en));const gn=Qe.getTilePixelSize(Ze,en,an);pn.canvas.width=gn[0],pn.canvas.height=gn[1];const yn=en/dn;if(yn!==1){const wn=reset(this.tmpTransform_);scale$2(wn,yn,yn),pn.setTransform.apply(pn,wn)}const vn=cn.getTileCoordExtent(Ve,this.tempExtent),An=dn/fn,xn=reset(this.tmpTransform_);scale$2(xn,An,-An),translate$2(xn,-vn[0],-vn[3]);for(let wn=0,bn=je.length;wn<bn;++wn)je[wn].execute(pn,[pn.canvas.width*yn,pn.canvas.height*yn],xn,0,!0,IMAGE_REPLAYS[ke.getRenderMode()],null);Ge.renderedTileResolution=e.wantedResolution}}class VectorTileLayer extends BaseVectorLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.preload;const ke=e.cacheSize===void 0?0:e.cacheSize;delete e.cacheSize,delete t.useInterimTilesOnError,super(t),this.on,this.once,this.un,this.cacheSize_=ke;const Ge=e.renderMode||"hybrid";assert(Ge=="hybrid"||Ge=="vector","`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=Ge,this.setPreload(e.preload?e.preload:0),this.setUseInterimTilesOnError(e.useInterimTilesOnError!==void 0?e.useInterimTilesOnError:!0),this.getBackground,this.setBackground}createRenderer(){return new CanvasVectorTileLayerRenderer(this,{cacheSize:this.cacheSize_})}getFeatures(e){return super.getFeatures(e)}getFeaturesInExtent(e){return this.getRenderer().getFeaturesInExtent(e)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(TileProperty.PRELOAD)}getUseInterimTilesOnError(){return this.get(TileProperty.USE_INTERIM_TILES_ON_ERROR)}setPreload(e){this.set(TileProperty.PRELOAD,e)}setUseInterimTilesOnError(e){this.set(TileProperty.USE_INTERIM_TILES_ON_ERROR,e)}}function jsonp(Oe,e,t,ke){const Ge=document.createElement("script"),Be="olc_"+getUid(e);function je(){delete window[Be],Ge.parentNode.removeChild(Ge)}Ge.async=!0,Ge.src=Oe+(Oe.includes("?")?"&":"?")+"callback="+Be;const Ve=setTimeout(function(){je(),t&&t()},1e4);window[Be]=function(Ze){clearTimeout(Ve),je(),e(Ze)},document.head.appendChild(Ge)}class TileJSON extends TileImage{constructor(e){if(super({attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,interpolate:e.interpolate,projection:get$3("EPSG:3857"),reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,wrapX:e.wrapX!==void 0?e.wrapX:!0,transition:e.transition,zDirection:e.zDirection}),this.tileJSON_=null,this.tileSize_=e.tileSize,e.url)if(e.jsonp)jsonp(e.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",e.url),t.send()}else if(e.tileJSON)this.handleTileJSONResponse(e.tileJSON);else throw new Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(e){const t=e.target;if(!t.status||t.status>=200&&t.status<300){let ke;try{ke=JSON.parse(t.responseText)}catch{this.handleTileJSONError();return}this.handleTileJSONResponse(ke)}else this.handleTileJSONError()}onXHRError_(e){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(e){const t=get$3("EPSG:4326"),ke=this.getProjection();let Ge;if(e.bounds!==void 0){const Qe=getTransformFromProjections(t,ke);Ge=applyTransform(e.bounds,Qe)}const Be=extentFromProjection(ke),je=e.minzoom||0,Ve=e.maxzoom||22,Ze=createXYZ({extent:Be,maxZoom:Ve,minZoom:je,tileSize:this.tileSize_});if(this.tileGrid=Ze,this.tileUrlFunction=createFromTemplates(e.tiles,Ze),e.attribution&&!this.getAttributions()){const Qe=Ge!==void 0?Ge:Be;this.setAttributions(function(en){return intersects$1(Qe,en.extent)?[e.attribution]:null})}this.tileJSON_=e,this.setState("ready")}handleTileJSONError(){this.setState("error")}}const SHIFT_LEFT_32=65536*65536,SHIFT_RIGHT_32=1/SHIFT_LEFT_32,TEXT_DECODER_MIN_LENGTH=12,utf8TextDecoder=typeof TextDecoder>"u"?null:new TextDecoder("utf-8"),PBF_VARINT=0,PBF_FIXED64=1,PBF_BYTES=2,PBF_FIXED32=5;class Pbf{constructor(e=new Uint8Array(16)){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(e,t,ke=this.length){for(;this.pos<ke;){const Ge=this.readVarint(),Be=Ge>>3,je=this.pos;this.type=Ge&7,e(Be,t,this),this.pos===je&&this.skip(Ge)}return t}readMessage(e,t){return this.readFields(e,t,this.readVarint()+this.pos)}readFixed32(){const e=this.dataView.getUint32(this.pos,!0);return this.pos+=4,e}readSFixed32(){const e=this.dataView.getInt32(this.pos,!0);return this.pos+=4,e}readFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readSFixed64(){const e=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*SHIFT_LEFT_32;return this.pos+=8,e}readFloat(){const e=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,e}readDouble(){const e=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,e}readVarint(e){const t=this.buf;let ke,Ge;return Ge=t[this.pos++],ke=Ge&127,Ge<128||(Ge=t[this.pos++],ke|=(Ge&127)<<7,Ge<128)||(Ge=t[this.pos++],ke|=(Ge&127)<<14,Ge<128)||(Ge=t[this.pos++],ke|=(Ge&127)<<21,Ge<128)?ke:(Ge=t[this.pos],ke|=(Ge&15)<<28,readVarintRemainder(ke,e,this))}readVarint64(){return this.readVarint(!0)}readSVarint(){const e=this.readVarint();return e%2===1?(e+1)/-2:e/2}readBoolean(){return!!this.readVarint()}readString(){const e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=TEXT_DECODER_MIN_LENGTH&&utf8TextDecoder?utf8TextDecoder.decode(this.buf.subarray(t,e)):readUtf8(this.buf,t,e)}readBytes(){const e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t}readPackedVarint(e=[],t){const ke=this.readPackedEnd();for(;this.pos<ke;)e.push(this.readVarint(t));return e}readPackedSVarint(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSVarint());return e}readPackedBoolean(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readBoolean());return e}readPackedFloat(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFloat());return e}readPackedDouble(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readDouble());return e}readPackedFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed32());return e}readPackedSFixed32(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed32());return e}readPackedFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readFixed64());return e}readPackedSFixed64(e=[]){const t=this.readPackedEnd();for(;this.pos<t;)e.push(this.readSFixed64());return e}readPackedEnd(){return this.type===PBF_BYTES?this.readVarint()+this.pos:this.pos+1}skip(e){const t=e&7;if(t===PBF_VARINT)for(;this.buf[this.pos++]>127;);else if(t===PBF_BYTES)this.pos=this.readVarint()+this.pos;else if(t===PBF_FIXED32)this.pos+=4;else if(t===PBF_FIXED64)this.pos+=8;else throw new Error(`Unimplemented type: ${t}`)}writeTag(e,t){this.writeVarint(e<<3|t)}realloc(e){let t=this.length||16;for(;t<this.pos+e;)t*=2;if(t!==this.length){const ke=new Uint8Array(t);ke.set(this.buf),this.buf=ke,this.dataView=new DataView(ke.buffer),this.length=t}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeSFixed32(e){this.realloc(4),this.dataView.setInt32(this.pos,e,!0),this.pos+=4}writeFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeSFixed64(e){this.realloc(8),this.dataView.setInt32(this.pos,e&-1,!0),this.dataView.setInt32(this.pos+4,Math.floor(e*SHIFT_RIGHT_32),!0),this.pos+=8}writeVarint(e){if(e=+e||0,e>268435455||e<0){writeBigVarint(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))}writeSVarint(e){this.writeVarint(e<0?-e*2-1:e*2)}writeBoolean(e){this.writeVarint(+e)}writeString(e){e=String(e),this.realloc(e.length*4),this.pos++;const t=this.pos;this.pos=writeUtf8(this.buf,e,this.pos);const ke=this.pos-t;ke>=128&&makeRoomForExtraLength(t,ke,this),this.pos=t-1,this.writeVarint(ke),this.pos+=ke}writeFloat(e){this.realloc(4),this.dataView.setFloat32(this.pos,e,!0),this.pos+=4}writeDouble(e){this.realloc(8),this.dataView.setFloat64(this.pos,e,!0),this.pos+=8}writeBytes(e){const t=e.length;this.writeVarint(t),this.realloc(t);for(let ke=0;ke<t;ke++)this.buf[this.pos++]=e[ke]}writeRawMessage(e,t){this.pos++;const ke=this.pos;e(t,this);const Ge=this.pos-ke;Ge>=128&&makeRoomForExtraLength(ke,Ge,this),this.pos=ke-1,this.writeVarint(Ge),this.pos+=Ge}writeMessage(e,t,ke){this.writeTag(e,PBF_BYTES),this.writeRawMessage(t,ke)}writePackedVarint(e,t){t.length&&this.writeMessage(e,writePackedVarint,t)}writePackedSVarint(e,t){t.length&&this.writeMessage(e,writePackedSVarint,t)}writePackedBoolean(e,t){t.length&&this.writeMessage(e,writePackedBoolean,t)}writePackedFloat(e,t){t.length&&this.writeMessage(e,writePackedFloat,t)}writePackedDouble(e,t){t.length&&this.writeMessage(e,writePackedDouble,t)}writePackedFixed32(e,t){t.length&&this.writeMessage(e,writePackedFixed32,t)}writePackedSFixed32(e,t){t.length&&this.writeMessage(e,writePackedSFixed32,t)}writePackedFixed64(e,t){t.length&&this.writeMessage(e,writePackedFixed64,t)}writePackedSFixed64(e,t){t.length&&this.writeMessage(e,writePackedSFixed64,t)}writeBytesField(e,t){this.writeTag(e,PBF_BYTES),this.writeBytes(t)}writeFixed32Field(e,t){this.writeTag(e,PBF_FIXED32),this.writeFixed32(t)}writeSFixed32Field(e,t){this.writeTag(e,PBF_FIXED32),this.writeSFixed32(t)}writeFixed64Field(e,t){this.writeTag(e,PBF_FIXED64),this.writeFixed64(t)}writeSFixed64Field(e,t){this.writeTag(e,PBF_FIXED64),this.writeSFixed64(t)}writeVarintField(e,t){this.writeTag(e,PBF_VARINT),this.writeVarint(t)}writeSVarintField(e,t){this.writeTag(e,PBF_VARINT),this.writeSVarint(t)}writeStringField(e,t){this.writeTag(e,PBF_BYTES),this.writeString(t)}writeFloatField(e,t){this.writeTag(e,PBF_FIXED32),this.writeFloat(t)}writeDoubleField(e,t){this.writeTag(e,PBF_FIXED64),this.writeDouble(t)}writeBooleanField(e,t){this.writeVarintField(e,+t)}}function readVarintRemainder(Oe,e,t){const ke=t.buf;let Ge,Be;if(Be=ke[t.pos++],Ge=(Be&112)>>4,Be<128||(Be=ke[t.pos++],Ge|=(Be&127)<<3,Be<128)||(Be=ke[t.pos++],Ge|=(Be&127)<<10,Be<128)||(Be=ke[t.pos++],Ge|=(Be&127)<<17,Be<128)||(Be=ke[t.pos++],Ge|=(Be&127)<<24,Be<128)||(Be=ke[t.pos++],Ge|=(Be&1)<<31,Be<128))return toNum(Oe,Ge,e);throw new Error("Expected varint not more than 10 bytes")}function toNum(Oe,e,t){return t?e*4294967296+(Oe>>>0):(e>>>0)*4294967296+(Oe>>>0)}function writeBigVarint(Oe,e){let t,ke;if(Oe>=0?(t=Oe%4294967296|0,ke=Oe/4294967296|0):(t=~(-Oe%4294967296),ke=~(-Oe/4294967296),t^4294967295?t=t+1|0:(t=0,ke=ke+1|0)),Oe>=18446744073709552e3||Oe<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),writeBigVarintLow(t,ke,e),writeBigVarintHigh(ke,e)}function writeBigVarintLow(Oe,e,t){t.buf[t.pos++]=Oe&127|128,Oe>>>=7,t.buf[t.pos++]=Oe&127|128,Oe>>>=7,t.buf[t.pos++]=Oe&127|128,Oe>>>=7,t.buf[t.pos++]=Oe&127|128,Oe>>>=7,t.buf[t.pos]=Oe&127}function writeBigVarintHigh(Oe,e){const t=(Oe&7)<<4;e.buf[e.pos++]|=t|((Oe>>>=3)?128:0),Oe&&(e.buf[e.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(e.buf[e.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(e.buf[e.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(e.buf[e.pos++]=Oe&127|((Oe>>>=7)?128:0),Oe&&(e.buf[e.pos++]=Oe&127)))))}function makeRoomForExtraLength(Oe,e,t){const ke=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(Math.LN2*7));t.realloc(ke);for(let Ge=t.pos-1;Ge>=Oe;Ge--)t.buf[Ge+ke]=t.buf[Ge]}function writePackedVarint(Oe,e){for(let t=0;t<Oe.length;t++)e.writeVarint(Oe[t])}function writePackedSVarint(Oe,e){for(let t=0;t<Oe.length;t++)e.writeSVarint(Oe[t])}function writePackedFloat(Oe,e){for(let t=0;t<Oe.length;t++)e.writeFloat(Oe[t])}function writePackedDouble(Oe,e){for(let t=0;t<Oe.length;t++)e.writeDouble(Oe[t])}function writePackedBoolean(Oe,e){for(let t=0;t<Oe.length;t++)e.writeBoolean(Oe[t])}function writePackedFixed32(Oe,e){for(let t=0;t<Oe.length;t++)e.writeFixed32(Oe[t])}function writePackedSFixed32(Oe,e){for(let t=0;t<Oe.length;t++)e.writeSFixed32(Oe[t])}function writePackedFixed64(Oe,e){for(let t=0;t<Oe.length;t++)e.writeFixed64(Oe[t])}function writePackedSFixed64(Oe,e){for(let t=0;t<Oe.length;t++)e.writeSFixed64(Oe[t])}function readUtf8(Oe,e,t){let ke="",Ge=e;for(;Ge<t;){const Be=Oe[Ge];let je=null,Ve=Be>239?4:Be>223?3:Be>191?2:1;if(Ge+Ve>t)break;let Ze,Qe,en;Ve===1?Be<128&&(je=Be):Ve===2?(Ze=Oe[Ge+1],(Ze&192)===128&&(je=(Be&31)<<6|Ze&63,je<=127&&(je=null))):Ve===3?(Ze=Oe[Ge+1],Qe=Oe[Ge+2],(Ze&192)===128&&(Qe&192)===128&&(je=(Be&15)<<12|(Ze&63)<<6|Qe&63,(je<=2047||je>=55296&&je<=57343)&&(je=null))):Ve===4&&(Ze=Oe[Ge+1],Qe=Oe[Ge+2],en=Oe[Ge+3],(Ze&192)===128&&(Qe&192)===128&&(en&192)===128&&(je=(Be&15)<<18|(Ze&63)<<12|(Qe&63)<<6|en&63,(je<=65535||je>=1114112)&&(je=null))),je===null?(je=65533,Ve=1):je>65535&&(je-=65536,ke+=String.fromCharCode(je>>>10&1023|55296),je=56320|je&1023),ke+=String.fromCharCode(je),Ge+=Ve}return ke}function writeUtf8(Oe,e,t){for(let ke=0,Ge,Be;ke<e.length;ke++){if(Ge=e.charCodeAt(ke),Ge>55295&&Ge<57344)if(Be)if(Ge<56320){Oe[t++]=239,Oe[t++]=191,Oe[t++]=189,Be=Ge;continue}else Ge=Be-55296<<10|Ge-56320|65536,Be=null;else{Ge>56319||ke+1===e.length?(Oe[t++]=239,Oe[t++]=191,Oe[t++]=189):Be=Ge;continue}else Be&&(Oe[t++]=239,Oe[t++]=191,Oe[t++]=189,Be=null);Ge<128?Oe[t++]=Ge:(Ge<2048?Oe[t++]=Ge>>6|192:(Ge<65536?Oe[t++]=Ge>>12|224:(Oe[t++]=Ge>>18|240,Oe[t++]=Ge>>12&63|128),Oe[t++]=Ge>>6&63|128),Oe[t++]=Ge&63|128)}return t}class MVT extends FeatureFormat{constructor(e){super(),e=e||{},this.dataProjection=new Projection$1({code:"",units:"tile-pixels"}),this.featureClass=e.featureClass?e.featureClass:RenderFeature,this.geometryName_=e.geometryName,this.layerName_=e.layerName?e.layerName:"layer",this.layers_=e.layers?e.layers:null,this.idProperty_=e.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(e,t,ke,Ge){e.pos=t.geometry;const Be=e.readVarint()+e.pos;let je=1,Ve=0,Ze=0,Qe=0,en=0,tn=0;for(;e.pos<Be;){if(!Ve){const an=e.readVarint();je=an&7,Ve=an>>3}if(Ve--,je===1||je===2)Ze+=e.readSVarint(),Qe+=e.readSVarint(),je===1&&en>tn&&(Ge.push(en),tn=en),ke.push(Ze,Qe),en+=2;else if(je===7)en>tn&&(ke.push(ke[tn],ke[tn+1]),en+=2);else throw new Error("Invalid command found in the PBF")}en>tn&&(Ge.push(en),tn=en)}createFeature_(e,t,ke){const Ge=t.type;if(Ge===0)return null;let Be;const je=t.properties;let Ve;this.idProperty_?(Ve=je[this.idProperty_],delete je[this.idProperty_]):Ve=t.id,je[this.layerName_]=t.layer.name;const Ze=[],Qe=[];this.readRawGeometry_(e,t,Ze,Qe);const en=getGeometryType(Ge,Qe.length);if(this.featureClass===RenderFeature)Be=new this.featureClass(en,Ze,Qe,2,je,Ve),Be.transform(ke.dataProjection);else{let tn;if(en=="Polygon"){const un=inflateEnds(Ze,Qe);tn=un.length>1?new MultiPolygon(Ze,"XY",un):new Polygon(Ze,"XY",Qe)}else tn=en==="Point"?new Point$1(Ze,"XY"):en==="LineString"?new LineString(Ze,"XY"):en==="MultiPoint"?new MultiPoint(Ze,"XY"):en==="MultiLineString"?new MultiLineString(Ze,"XY",Qe):null;const an=this.featureClass;Be=new an,this.geometryName_&&Be.setGeometryName(this.geometryName_);const cn=transformGeometryWithOptions(tn,!1,ke);Be.setGeometry(cn),Ve!==void 0&&Be.setId(Ve),Be.setProperties(je,!0)}return Be}getType(){return"arraybuffer"}readFeatures(e,t){const ke=this.layers_;t=this.adaptOptions(t);const Ge=get$3(t.dataProjection);Ge.setWorldExtent(t.extent),t.dataProjection=Ge;const Be=new Pbf(e),je=Be.readFields(layersPBFReader,{}),Ve=[];for(const Ze in je){if(ke&&!ke.includes(Ze))continue;const Qe=je[Ze],en=Qe?[0,0,Qe.extent,Qe.extent]:null;Ge.setExtent(en);for(let tn=0,an=Qe.length;tn<an;++tn){const cn=readRawFeature(Be,Qe,tn),un=this.createFeature_(Be,cn,t);un!==null&&Ve.push(un)}}return Ve}readProjection(e){return this.dataProjection}setLayers(e){this.layers_=e}}function layersPBFReader(Oe,e,t){if(Oe===3){const ke={keys:[],values:[],features:[]},Ge=t.readVarint()+t.pos;t.readFields(layerPBFReader,ke,Ge),ke.length=ke.features.length,ke.length&&(e[ke.name]=ke)}}function layerPBFReader(Oe,e,t){if(Oe===15)e.version=t.readVarint();else if(Oe===1)e.name=t.readString();else if(Oe===5)e.extent=t.readVarint();else if(Oe===2)e.features.push(t.pos);else if(Oe===3)e.keys.push(t.readString());else if(Oe===4){let ke=null;const Ge=t.readVarint()+t.pos;for(;t.pos<Ge;)Oe=t.readVarint()>>3,ke=Oe===1?t.readString():Oe===2?t.readFloat():Oe===3?t.readDouble():Oe===4?t.readVarint64():Oe===5?t.readVarint():Oe===6?t.readSVarint():Oe===7?t.readBoolean():null;e.values.push(ke)}}function featurePBFReader(Oe,e,t){if(Oe==1)e.id=t.readVarint();else if(Oe==2){const ke=t.readVarint()+t.pos;for(;t.pos<ke;){const Ge=e.layer.keys[t.readVarint()],Be=e.layer.values[t.readVarint()];e.properties[Ge]=Be}}else Oe==3?e.type=t.readVarint():Oe==4&&(e.geometry=t.pos)}function readRawFeature(Oe,e,t){Oe.pos=e.features[t];const ke=Oe.readVarint()+Oe.pos,Ge={layer:e,type:0,properties:{}};return Oe.readFields(featurePBFReader,Ge,ke),Ge}function getGeometryType(Oe,e){let t;return Oe===1?t=e===1?"Point":"MultiPoint":Oe===2?t=e===1?"LineString":"MultiLineString":Oe===3&&(t="Polygon"),t}class MapRenderer extends Disposable{constructor(e){super(),this.map_=e}dispatchRenderEvent(e,t){abstract()}calculateMatrices2D(e){const t=e.viewState,ke=e.coordinateToPixelTransform,Ge=e.pixelToCoordinateTransform;compose(ke,e.size[0]/2,e.size[1]/2,1/t.resolution,-1/t.resolution,-t.rotation,-t.center[0],-t.center[1]),makeInverse(Ge,ke)}forEachFeatureAtCoordinate(e,t,ke,Ge,Be,je,Ve,Ze){let Qe;const en=t.viewState;function tn(vn,An,xn,wn){return Be.call(je,An,vn?xn:null,wn)}const an=en.projection,cn=wrapX$1(e.slice(),an),un=[[0,0]];if(an.canWrapX()&&Ge){const vn=an.getExtent(),An=getWidth(vn);un.push([-An,0],[An,0])}const dn=t.layerStatesArray,fn=dn.length,pn=[],gn=[];for(let vn=0;vn<un.length;vn++)for(let An=fn-1;An>=0;--An){const xn=dn[An],wn=xn.layer;if(wn.hasRenderer()&&inView(xn,en)&&Ve.call(Ze,wn)){const bn=wn.getRenderer(),Mn=wn.getSource();if(bn&&Mn){const Pn=Mn.getWrapX()?cn:e,En=tn.bind(null,xn.managed);gn[0]=Pn[0]+un[vn][0],gn[1]=Pn[1]+un[vn][1],Qe=bn.forEachFeatureAtCoordinate(gn,t,ke,En,pn)}if(Qe)return Qe}}if(pn.length===0)return;const yn=1/pn.length;return pn.forEach((vn,An)=>vn.distanceSq+=An*yn),pn.sort((vn,An)=>vn.distanceSq-An.distanceSq),pn.some(vn=>Qe=vn.callback(vn.feature,vn.layer,vn.geometry)),Qe}hasFeatureAtCoordinate(e,t,ke,Ge,Be,je){return this.forEachFeatureAtCoordinate(e,t,ke,Ge,TRUE,this,Be,je)!==void 0}getMap(){return this.map_}renderFrame(e){abstract()}scheduleExpireIconCache(e){shared.canExpireCache()&&e.postRenderFunctions.push(expireIconCache)}}function expireIconCache(Oe,e){shared.expire()}class CompositeMapRenderer extends MapRenderer{constructor(e){super(e),this.fontChangeListenerKey_=listen(checkedFonts,ObjectEventType.PROPERTYCHANGE,e.redrawText,e),this.element_=document.createElement("div");const t=this.element_.style;t.position="absolute",t.width="100%",t.height="100%",t.zIndex="0",this.element_.className=CLASS_UNSELECTABLE+" ol-layers";const ke=e.getViewport();ke.insertBefore(this.element_,ke.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(e,t){const ke=this.getMap();if(ke.hasListener(e)){const Ge=new RenderEvent(e,void 0,t);ke.dispatchEvent(Ge)}}disposeInternal(){unlistenByKey(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(e){if(!e){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(e),this.dispatchRenderEvent(RenderEventType.PRECOMPOSE,e);const t=e.layerStatesArray.sort((Ve,Ze)=>Ve.zIndex-Ze.zIndex);t.some(Ve=>Ve.layer instanceof BaseVectorLayer&&Ve.layer.getDeclutter())&&(e.declutter={});const Ge=e.viewState;this.children_.length=0;const Be=[];let je=null;for(let Ve=0,Ze=t.length;Ve<Ze;++Ve){const Qe=t[Ve];e.layerIndex=Ve;const en=Qe.layer,tn=en.getSourceState();if(!inView(Qe,Ge)||tn!="ready"&&tn!="undefined"){en.unrender();continue}const an=en.render(e,je);an&&(an!==je&&(this.children_.push(an),je=an),Be.push(Qe))}this.declutter(e,Be),replaceChildren(this.element_,this.children_),this.dispatchRenderEvent(RenderEventType.POSTCOMPOSE,e),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(e)}declutter(e,t){if(e.declutter){for(let ke=t.length-1;ke>=0;--ke){const Ge=t[ke],Be=Ge.layer;Be.getDeclutter()&&Be.renderDeclutter(e,Ge)}t.forEach(ke=>ke.layer.renderDeferred(e))}}}class GroupEvent extends BaseEvent{constructor(e,t){super(e),this.layer=t}}const Property={LAYERS:"layers"};class LayerGroup extends BaseLayer{constructor(e){e=e||{};const t=Object.assign({},e);delete t.layers;let ke=e.layers;super(t),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Property.LAYERS,this.handleLayersChanged_),ke?Array.isArray(ke)?ke=new Collection(ke.slice(),{unique:!0}):assert(typeof ke.getArray=="function","Expected `layers` to be an array or a `Collection`"):ke=new Collection(void 0,{unique:!0}),this.setLayers(ke)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(unlistenByKey),this.layersListenerKeys_.length=0;const e=this.getLayers();this.layersListenerKeys_.push(listen(e,CollectionEventType.ADD,this.handleLayersAdd_,this),listen(e,CollectionEventType.REMOVE,this.handleLayersRemove_,this));for(const ke in this.listenerKeys_)this.listenerKeys_[ke].forEach(unlistenByKey);clear$1(this.listenerKeys_);const t=e.getArray();for(let ke=0,Ge=t.length;ke<Ge;ke++){const Be=t[ke];this.registerLayerListeners_(Be),this.dispatchEvent(new GroupEvent("addlayer",Be))}this.changed()}registerLayerListeners_(e){const t=[listen(e,ObjectEventType.PROPERTYCHANGE,this.handleLayerChange_,this),listen(e,EventType.CHANGE,this.handleLayerChange_,this)];e instanceof LayerGroup&&t.push(listen(e,"addlayer",this.handleLayerGroupAdd_,this),listen(e,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[getUid(e)]=t}handleLayerGroupAdd_(e){this.dispatchEvent(new GroupEvent("addlayer",e.layer))}handleLayerGroupRemove_(e){this.dispatchEvent(new GroupEvent("removelayer",e.layer))}handleLayersAdd_(e){const t=e.element;this.registerLayerListeners_(t),this.dispatchEvent(new GroupEvent("addlayer",t)),this.changed()}handleLayersRemove_(e){const t=e.element,ke=getUid(t);this.listenerKeys_[ke].forEach(unlistenByKey),delete this.listenerKeys_[ke],this.dispatchEvent(new GroupEvent("removelayer",t)),this.changed()}getLayers(){return this.get(Property.LAYERS)}setLayers(e){const t=this.getLayers();if(t){const ke=t.getArray();for(let Ge=0,Be=ke.length;Ge<Be;++Ge)this.dispatchEvent(new GroupEvent("removelayer",ke[Ge]))}this.set(Property.LAYERS,e)}getLayersArray(e){return e=e!==void 0?e:[],this.getLayers().forEach(function(t){t.getLayersArray(e)}),e}getLayerStatesArray(e){const t=e!==void 0?e:[],ke=t.length;this.getLayers().forEach(function(je){je.getLayerStatesArray(t)});const Ge=this.getLayerState();let Be=Ge.zIndex;!e&&Ge.zIndex===void 0&&(Be=0);for(let je=ke,Ve=t.length;je<Ve;je++){const Ze=t[je];Ze.opacity*=Ge.opacity,Ze.visible=Ze.visible&&Ge.visible,Ze.maxResolution=Math.min(Ze.maxResolution,Ge.maxResolution),Ze.minResolution=Math.max(Ze.minResolution,Ge.minResolution),Ze.minZoom=Math.max(Ze.minZoom,Ge.minZoom),Ze.maxZoom=Math.min(Ze.maxZoom,Ge.maxZoom),Ge.extent!==void 0&&(Ze.extent!==void 0?Ze.extent=getIntersection(Ze.extent,Ge.extent):Ze.extent=Ge.extent),Ze.zIndex===void 0&&(Ze.zIndex=Be)}return t}getSourceState(){return"ready"}}const PointerEventType={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class MapBrowserEventHandler extends Target{constructor(e,t){super(e),this.map_=e,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=t===void 0?1:t,this.down_=null;const ke=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=ke,this.pointerdownListenerKey_=listen(ke,PointerEventType.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=listen(ke,PointerEventType.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1)}emulateClick_(e){let t=new MapBrowserEvent(MapBrowserEventType.CLICK,this.map_,e);this.dispatchEvent(t),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,t=new MapBrowserEvent(MapBrowserEventType.DBLCLICK,this.map_,e),this.dispatchEvent(t)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const ke=new MapBrowserEvent(MapBrowserEventType.SINGLECLICK,this.map_,e);this.dispatchEvent(ke)},250)}updateActivePointers_(e){const t=e,ke=t.pointerId;if(t.type==MapBrowserEventType.POINTERUP||t.type==MapBrowserEventType.POINTERCANCEL){delete this.trackedTouches_[ke];for(const Ge in this.trackedTouches_)if(this.trackedTouches_[Ge].target!==t.target){delete this.trackedTouches_[Ge];break}}else(t.type==MapBrowserEventType.POINTERDOWN||t.type==MapBrowserEventType.POINTERMOVE)&&(this.trackedTouches_[ke]=t);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(e){this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERUP,this.map_,e,void 0,void 0,this.activePointers_);this.dispatchEvent(t),this.emulateClicks_&&!t.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(e)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(e){return e.button===0}handlePointerDown_(e){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(e);const t=new MapBrowserEvent(MapBrowserEventType.POINTERDOWN,this.map_,e,void 0,void 0,this.activePointers_);if(this.dispatchEvent(t),this.down_=new PointerEvent(e.type,e),Object.defineProperty(this.down_,"target",{writable:!1,value:e.target}),this.dragListenerKeys_.length===0){const ke=this.map_.getOwnerDocument();this.dragListenerKeys_.push(listen(ke,MapBrowserEventType.POINTERMOVE,this.handlePointerMove_,this),listen(ke,MapBrowserEventType.POINTERUP,this.handlePointerUp_,this),listen(this.element_,MapBrowserEventType.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==ke&&this.dragListenerKeys_.push(listen(this.element_.getRootNode(),MapBrowserEventType.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(e){if(this.isMoving_(e)){this.updateActivePointers_(e),this.dragging_=!0;const t=new MapBrowserEvent(MapBrowserEventType.POINTERDRAG,this.map_,e,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(t)}}relayMoveEvent_(e){this.originalPointerMoveEvent_=e;const t=!!(this.down_&&this.isMoving_(e));this.dispatchEvent(new MapBrowserEvent(MapBrowserEventType.POINTERMOVE,this.map_,e,t))}handleTouchMove_(e){const t=this.originalPointerMoveEvent_;(!t||t.defaultPrevented)&&(typeof e.cancelable!="boolean"||e.cancelable===!0)&&e.preventDefault()}isMoving_(e){return this.dragging_||Math.abs(e.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(e.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(unlistenByKey(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(EventType.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(unlistenByKey(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(unlistenByKey),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const MapProperty={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},DROP=1/0;class PriorityQueue{constructor(e,t){this.priorityFunction_=e,this.keyFunction_=t,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,clear$1(this.queuedElements_)}dequeue(){const e=this.elements_,t=this.priorities_,ke=e[0];e.length==1?(e.length=0,t.length=0):(e[0]=e.pop(),t[0]=t.pop(),this.siftUp_(0));const Ge=this.keyFunction_(ke);return delete this.queuedElements_[Ge],ke}enqueue(e){assert(!(this.keyFunction_(e)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const t=this.priorityFunction_(e);return t!=DROP?(this.elements_.push(e),this.priorities_.push(t),this.queuedElements_[this.keyFunction_(e)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(e){return e*2+1}getRightChildIndex_(e){return e*2+2}getParentIndex_(e){return e-1>>1}heapify_(){let e;for(e=(this.elements_.length>>1)-1;e>=0;e--)this.siftUp_(e)}isEmpty(){return this.elements_.length===0}isKeyQueued(e){return e in this.queuedElements_}isQueued(e){return this.isKeyQueued(this.keyFunction_(e))}siftUp_(e){const t=this.elements_,ke=this.priorities_,Ge=t.length,Be=t[e],je=ke[e],Ve=e;for(;e<Ge>>1;){const Ze=this.getLeftChildIndex_(e),Qe=this.getRightChildIndex_(e),en=Qe<Ge&&ke[Qe]<ke[Ze]?Qe:Ze;t[e]=t[en],ke[e]=ke[en],e=en}t[e]=Be,ke[e]=je,this.siftDown_(Ve,e)}siftDown_(e,t){const ke=this.elements_,Ge=this.priorities_,Be=ke[t],je=Ge[t];for(;t>e;){const Ve=this.getParentIndex_(t);if(Ge[Ve]>je)ke[t]=ke[Ve],Ge[t]=Ge[Ve],t=Ve;else break}ke[t]=Be,Ge[t]=je}reprioritize(){const e=this.priorityFunction_,t=this.elements_,ke=this.priorities_;let Ge=0;const Be=t.length;let je,Ve,Ze;for(Ve=0;Ve<Be;++Ve)je=t[Ve],Ze=e(je),Ze==DROP?delete this.queuedElements_[this.keyFunction_(je)]:(ke[Ge]=Ze,t[Ge++]=je);t.length=Ge,ke.length=Ge,this.heapify_()}}class TileQueue extends PriorityQueue{constructor(e,t){super(function(ke){return e.apply(null,ke)},function(ke){return ke[0].getKey()}),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=t,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(e){const t=super.enqueue(e);return t&&e[0].addEventListener(EventType.CHANGE,this.boundHandleTileChange_),t}getTilesLoading(){return this.tilesLoading_}handleTileChange(e){const t=e.target,ke=t.getState();if(ke===TileState.LOADED||ke===TileState.ERROR||ke===TileState.EMPTY){ke!==TileState.ERROR&&t.removeEventListener(EventType.CHANGE,this.boundHandleTileChange_);const Ge=t.getKey();Ge in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[Ge],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(e,t){let ke=0;for(;this.tilesLoading_<e&&ke<t&&this.getCount()>0;){const Ge=this.dequeue()[0],Be=Ge.getKey();Ge.getState()===TileState.IDLE&&!(Be in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[Be]=!0,++this.tilesLoading_,++ke,Ge.load())}}}function getTilePriority(Oe,e,t,ke,Ge){if(!Oe||!(t in Oe.wantedTiles)||!Oe.wantedTiles[t][e.getKey()])return DROP;const Be=Oe.viewState.center,je=ke[0]-Be[0],Ve=ke[1]-Be[1];return 65536*Math.log(Ge)+Math.sqrt(je*je+Ve*Ve)/Ge}class Attribution extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=e.collapsible!==void 0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=e.attributions;const t=e.className!==void 0?e.className:"ol-attribution",ke=e.tipLabel!==void 0?e.tipLabel:"Attributions",Ge=e.expandClassName!==void 0?e.expandClassName:t+"-expand",Be=e.collapseLabel!==void 0?e.collapseLabel:"›",je=e.collapseClassName!==void 0?e.collapseClassName:t+"-collapse";typeof Be=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Be,this.collapseLabel_.className=je):this.collapseLabel_=Be;const Ve=e.label!==void 0?e.label:"i";typeof Ve=="string"?(this.label_=document.createElement("span"),this.label_.textContent=Ve,this.label_.className=Ge):this.label_=Ve;const Ze=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=ke,this.toggleButton_.appendChild(Ze),this.toggleButton_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const Qe=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),en=this.element;en.className=Qe,en.appendChild(this.toggleButton_),en.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(e){const t=this.getMap().getAllLayers(),ke=new Set(t.flatMap(Ge=>Ge.getAttributions(e)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(Ge=>ke.add(Ge)):ke.add(this.attributions_)),!this.overrideCollapsible_){const Ge=!t.some(Be=>{var je;return((je=Be.getSource())==null?void 0:je.getAttributionsCollapsible())===!1});this.setCollapsible(Ge)}return Array.from(ke)}async updateElement_(e){if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=await Promise.all(this.collectSourceAttributions_(e).map(Ge=>toPromise(()=>Ge))),ke=t.length>0;if(this.renderedVisible_!=ke&&(this.element.style.display=ke?"":"none",this.renderedVisible_=ke),!equals$2(t,this.renderedAttributions_)){removeChildren(this.ulElement_);for(let Ge=0,Be=t.length;Ge<Be;++Ge){const je=document.createElement("li");je.innerHTML=t[Ge],this.ulElement_.appendChild(je)}this.renderedAttributions_=t}}handleClick_(e){e.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(e){this.userCollapsed_=e,!(!this.collapsible_||this.collapsed_===e)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(e){this.updateElement_(e.frameState)}}class Rotate extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target});const t=e.className!==void 0?e.className:"ol-rotate",ke=e.label!==void 0?e.label:"⇧",Ge=e.compassClassName!==void 0?e.compassClassName:"ol-compass";this.label_=null,typeof ke=="string"?(this.label_=document.createElement("span"),this.label_.className=Ge,this.label_.textContent=ke):(this.label_=ke,this.label_.classList.add(Ge));const Be=e.tipLabel?e.tipLabel:"Reset rotation",je=document.createElement("button");je.className=t+"-reset",je.setAttribute("type","button"),je.title=Be,je.appendChild(this.label_),je.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1);const Ve=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,Ze=this.element;Ze.className=Ve,Ze.appendChild(je),this.callResetNorth_=e.resetNorth?e.resetNorth:void 0,this.duration_=e.duration!==void 0?e.duration:250,this.autoHide_=e.autoHide!==void 0?e.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(CLASS_HIDDEN)}handleClick_(e){e.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const ke=t.getRotation();ke!==void 0&&(this.duration_>0&&ke%(2*Math.PI)!==0?t.animate({rotation:0,duration:this.duration_,easing:easeOut}):t.setRotation(0))}render(e){const t=e.frameState;if(!t)return;const ke=t.viewState.rotation;if(ke!=this.rotation_){const Ge="rotate("+ke+"rad)";if(this.autoHide_){const Be=this.element.classList.contains(CLASS_HIDDEN);!Be&&ke===0?this.element.classList.add(CLASS_HIDDEN):Be&&ke!==0&&this.element.classList.remove(CLASS_HIDDEN)}this.label_.style.transform=Ge}this.rotation_=ke}}class Zoom extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target});const t=e.className!==void 0?e.className:"ol-zoom",ke=e.delta!==void 0?e.delta:1,Ge=e.zoomInClassName!==void 0?e.zoomInClassName:t+"-in",Be=e.zoomOutClassName!==void 0?e.zoomOutClassName:t+"-out",je=e.zoomInLabel!==void 0?e.zoomInLabel:"+",Ve=e.zoomOutLabel!==void 0?e.zoomOutLabel:"–",Ze=e.zoomInTipLabel!==void 0?e.zoomInTipLabel:"Zoom in",Qe=e.zoomOutTipLabel!==void 0?e.zoomOutTipLabel:"Zoom out",en=document.createElement("button");en.className=Ge,en.setAttribute("type","button"),en.title=Ze,en.appendChild(typeof je=="string"?document.createTextNode(je):je),en.addEventListener(EventType.CLICK,this.handleClick_.bind(this,ke),!1);const tn=document.createElement("button");tn.className=Be,tn.setAttribute("type","button"),tn.title=Qe,tn.appendChild(typeof Ve=="string"?document.createTextNode(Ve):Ve),tn.addEventListener(EventType.CLICK,this.handleClick_.bind(this,-ke),!1);const an=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL,cn=this.element;cn.className=an,cn.appendChild(en),cn.appendChild(tn),this.duration_=e.duration!==void 0?e.duration:250}handleClick_(e,t){t.preventDefault(),this.zoomByDelta_(e)}zoomByDelta_(e){const ke=this.getMap().getView();if(!ke)return;const Ge=ke.getZoom();if(Ge!==void 0){const Be=ke.getConstrainedZoom(Ge+e);this.duration_>0?(ke.getAnimating()&&ke.cancelAnimations(),ke.animate({zoom:Be,duration:this.duration_,easing:easeOut})):ke.setZoom(Be)}}}function defaults$1(Oe){Oe=Oe||{};const e=new Collection;return(Oe.zoom!==void 0?Oe.zoom:!0)&&e.push(new Zoom(Oe.zoomOptions)),(Oe.rotate!==void 0?Oe.rotate:!0)&&e.push(new Rotate(Oe.rotateOptions)),(Oe.attribution!==void 0?Oe.attribution:!0)&&e.push(new Attribution(Oe.attributionOptions)),e}function removeLayerMapProperty(Oe){if(Oe instanceof Layer$1){Oe.setMapInternal(null);return}Oe instanceof LayerGroup&&Oe.getLayers().forEach(removeLayerMapProperty)}function setLayerMapProperty(Oe,e){if(Oe instanceof Layer$1){Oe.setMapInternal(e);return}if(Oe instanceof LayerGroup){const t=Oe.getLayers().getArray();for(let ke=0,Ge=t.length;ke<Ge;++ke)setLayerMapProperty(t[ke],e)}}let Map$1=class extends BaseObject{constructor(e){super(),e=e||{},this.on,this.once,this.un;const t=createOptionsInternal(e);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=e.maxTilesLoading!==void 0?e.maxTilesLoading:16,this.pixelRatio_=e.pixelRatio!==void 0?e.pixelRatio:DEVICE_PIXEL_RATIO,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=create$1(),this.pixelToCoordinateTransform_=create$1(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=e.moveTolerance,this.keyboardEventTarget_=t.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=t.controls||defaults$1(),this.interactions=t.interactions||defaults$2({onFocusOnly:!0}),this.overlays_=t.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new TileQueue(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(MapProperty.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(MapProperty.VIEW,this.handleViewChanged_),this.addChangeListener(MapProperty.SIZE,this.handleSizeChanged_),this.addChangeListener(MapProperty.TARGET,this.handleTargetChanged_),this.setProperties(t.values);const ke=this;e.view&&!(e.view instanceof View)&&e.view.then(function(Ge){ke.setView(new View(Ge))}),this.controls.addEventListener(CollectionEventType.ADD,Ge=>{Ge.element.setMap(this)}),this.controls.addEventListener(CollectionEventType.REMOVE,Ge=>{Ge.element.setMap(null)}),this.interactions.addEventListener(CollectionEventType.ADD,Ge=>{Ge.element.setMap(this)}),this.interactions.addEventListener(CollectionEventType.REMOVE,Ge=>{Ge.element.setMap(null)}),this.overlays_.addEventListener(CollectionEventType.ADD,Ge=>{this.addOverlayInternal_(Ge.element)}),this.overlays_.addEventListener(CollectionEventType.REMOVE,Ge=>{const Be=Ge.element.getId();Be!==void 0&&delete this.overlayIdIndex_[Be.toString()],Ge.element.setMap(null)}),this.controls.forEach(Ge=>{Ge.setMap(this)}),this.interactions.forEach(Ge=>{Ge.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(e){this.getControls().push(e)}addInteraction(e){this.getInteractions().push(e)}addLayer(e){this.getLayerGroup().getLayers().push(e)}handleLayerAdd_(e){setLayerMapProperty(e.layer,this)}addOverlay(e){this.getOverlays().push(e)}addOverlayInternal_(e){const t=e.getId();t!==void 0&&(this.overlayIdIndex_[t.toString()]=e),e.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(e,t,ke){if(!this.frameState_||!this.renderer_)return;const Ge=this.getCoordinateFromPixelInternal(e);ke=ke!==void 0?ke:{};const Be=ke.hitTolerance!==void 0?ke.hitTolerance:0,je=ke.layerFilter!==void 0?ke.layerFilter:TRUE,Ve=ke.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(Ge,this.frameState_,Be,Ve,t,null,je,null)}getFeaturesAtPixel(e,t){const ke=[];return this.forEachFeatureAtPixel(e,function(Ge){ke.push(Ge)},t),ke}getAllLayers(){const e=[];function t(ke){ke.forEach(function(Ge){Ge instanceof LayerGroup?t(Ge.getLayers()):e.push(Ge)})}return t(this.getLayers()),e}hasFeatureAtPixel(e,t){if(!this.frameState_||!this.renderer_)return!1;const ke=this.getCoordinateFromPixelInternal(e);t=t!==void 0?t:{};const Ge=t.layerFilter!==void 0?t.layerFilter:TRUE,Be=t.hitTolerance!==void 0?t.hitTolerance:0,je=t.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(ke,this.frameState_,Be,je,Ge,null)}getEventCoordinate(e){return this.getCoordinateFromPixel(this.getEventPixel(e))}getEventCoordinateInternal(e){return this.getCoordinateFromPixelInternal(this.getEventPixel(e))}getEventPixel(e){const ke=this.viewport_.getBoundingClientRect(),Ge=this.getSize(),Be=ke.width/Ge[0],je=ke.height/Ge[1],Ve="changedTouches"in e?e.changedTouches[0]:e;return[(Ve.clientX-ke.left)/Be,(Ve.clientY-ke.top)/je]}getTarget(){return this.get(MapProperty.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(e){return toUserCoordinate(this.getCoordinateFromPixelInternal(e),this.getView().getProjection())}getCoordinateFromPixelInternal(e){const t=this.frameState_;return t?apply(t.pixelToCoordinateTransform,e.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(e){const t=this.overlayIdIndex_[e.toString()];return t!==void 0?t:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(MapProperty.LAYERGROUP)}setLayers(e){const t=this.getLayerGroup();if(e instanceof Collection){t.setLayers(e);return}const ke=t.getLayers();ke.clear(),ke.extend(e)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,ke=e.length;t<ke;++t){const Ge=e[t];if(!Ge.visible)continue;const Be=Ge.layer.getRenderer();if(Be&&!Be.ready)return!0;const je=Ge.layer.getSource();if(je&&je.loading)return!0}return!1}getPixelFromCoordinate(e){const t=fromUserCoordinate(e,this.getView().getProjection());return this.getPixelFromCoordinateInternal(t)}getPixelFromCoordinateInternal(e){const t=this.frameState_;return t?apply(t.coordinateToPixelTransform,e.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(MapProperty.SIZE)}getView(){return this.get(MapProperty.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const e=this.getTargetElement();return e?e.ownerDocument:document}getTilePriority(e,t,ke,Ge){return getTilePriority(this.frameState_,e,t,ke,Ge)}handleBrowserEvent(e,t){t=t||e.type;const ke=new MapBrowserEvent(t,this,e);this.handleMapBrowserEvent(ke)}handleMapBrowserEvent(e){if(!this.frameState_)return;const t=e.originalEvent,ke=t.type;if(ke===PointerEventType.POINTERDOWN||ke===EventType.WHEEL||ke===EventType.KEYDOWN){const Ge=this.getOwnerDocument(),Be=this.viewport_.getRootNode?this.viewport_.getRootNode():Ge,je=t.target,Ve=Be instanceof ShadowRoot?Be.host===je?Be.host.ownerDocument:Be:Be===Ge?Ge.documentElement:Be;if(this.overlayContainerStopEvent_.contains(je)||!Ve.contains(je))return}if(e.frameState=this.frameState_,this.dispatchEvent(e)!==!1){const Ge=this.getInteractions().getArray().slice();for(let Be=Ge.length-1;Be>=0;Be--){const je=Ge[Be];if(je.getMap()!==this||!je.getActive()||!this.getTargetElement())continue;if(!je.handleEvent(e)||e.propagationStopped)break}}}handlePostRender(){const e=this.frameState_,t=this.tileQueue_;if(!t.isEmpty()){let Ge=this.maxTilesLoading_,Be=Ge;if(e){const je=e.viewHints;if(je[ViewHint.ANIMATING]||je[ViewHint.INTERACTING]){const Ve=Date.now()-e.time>8;Ge=Ve?0:8,Be=Ve?0:2}}t.getTilesLoading()<Ge&&(t.reprioritize(),t.loadMoreTiles(Ge,Be))}e&&this.renderer_&&!e.animate&&(this.renderComplete_?(this.hasListener(RenderEventType.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(RenderEventType.RENDERCOMPLETE,e),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new MapEvent(MapEventType.LOADEND,this,e)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new MapEvent(MapEventType.LOADSTART,this,e))));const ke=this.postRenderFunctions_;if(e)for(let Ge=0,Be=ke.length;Ge<Be;++Ge)ke[Ge](this,e);ke.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let ke=0,Ge=this.targetChangeHandlerKeys_.length;ke<Ge;++ke)unlistenByKey(this.targetChangeHandlerKeys_[ke]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const ke=this.targetElement_.getRootNode();ke instanceof ShadowRoot&&this.resizeObserver_.unobserve(ke.host),this.setSize(void 0)}const e=this.getTarget(),t=typeof e=="string"?document.getElementById(e):e;if(this.targetElement_=t,!t)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{t.appendChild(this.viewport_),this.renderer_||(this.renderer_=new CompositeMapRenderer(this)),this.mapBrowserEventHandler_=new MapBrowserEventHandler(this,this.moveTolerance_);for(const Be in MapBrowserEventType)this.mapBrowserEventHandler_.addEventListener(MapBrowserEventType[Be],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(EventType.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(EventType.WHEEL,this.boundHandleBrowserEvent_,PASSIVE_EVENT_LISTENERS?{passive:!1}:!1);let ke;if(this.keyboardEventTarget_)ke=this.keyboardEventTarget_;else{const Be=t.getRootNode();ke=Be instanceof ShadowRoot?Be.host:t}this.targetChangeHandlerKeys_=[listen(ke,EventType.KEYDOWN,this.handleBrowserEvent,this),listen(ke,EventType.KEYPRESS,this.handleBrowserEvent,this)];const Ge=t.getRootNode();Ge instanceof ShadowRoot&&this.resizeObserver_.observe(Ge.host),this.resizeObserver_.observe(t)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(unlistenByKey(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(unlistenByKey(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const e=this.getView();e&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=listen(e,ObjectEventType.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=listen(e,EventType.CHANGE,this.handleViewPropertyChanged_,this),e.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(unlistenByKey),this.layerGroupPropertyListenerKeys_=null);const e=this.getLayerGroup();e&&(this.handleLayerAdd_(new GroupEvent("addlayer",e)),this.layerGroupPropertyListenerKeys_=[listen(e,ObjectEventType.PROPERTYCHANGE,this.render,this),listen(e,EventType.CHANGE,this.render,this),listen(e,"addlayer",this.handleLayerAdd_,this),listen(e,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const e=this.getLayerGroup().getLayerStatesArray();for(let t=0,ke=e.length;t<ke;++t){const Ge=e[t].layer;Ge.hasRenderer()&&Ge.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(e){return this.getControls().remove(e)}removeInteraction(e){return this.getInteractions().remove(e)}removeLayer(e){return this.getLayerGroup().getLayers().remove(e)}handleLayerRemove_(e){removeLayerMapProperty(e.layer)}removeOverlay(e){return this.getOverlays().remove(e)}renderFrame_(e){const t=this.getSize(),ke=this.getView(),Ge=this.frameState_;let Be=null;if(t!==void 0&&hasArea(t)&&ke&&ke.isDef()){const je=ke.getHints(this.frameState_?this.frameState_.viewHints:void 0),Ve=ke.getState();if(Be={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:getForViewAndSize(Ve.center,Ve.resolution,Ve.rotation,t),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:t,tileQueue:this.tileQueue_,time:e,usedTiles:{},viewState:Ve,viewHints:je,wantedTiles:{},mapId:getUid(this),renderTargets:{}},Ve.nextCenter&&Ve.nextResolution){const Ze=isNaN(Ve.nextRotation)?Ve.rotation:Ve.nextRotation;Be.nextExtent=getForViewAndSize(Ve.nextCenter,Ve.nextResolution,Ze,t)}}this.frameState_=Be,this.renderer_.renderFrame(Be),Be&&(Be.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,Be.postRenderFunctions),Ge&&(!this.previousExtent_||!isEmpty(this.previousExtent_)&&!equals$1(Be.extent,this.previousExtent_))&&(this.dispatchEvent(new MapEvent(MapEventType.MOVESTART,this,Ge)),this.previousExtent_=createOrUpdateEmpty(this.previousExtent_)),this.previousExtent_&&!Be.viewHints[ViewHint.ANIMATING]&&!Be.viewHints[ViewHint.INTERACTING]&&!equals$1(Be.extent,this.previousExtent_)&&(this.dispatchEvent(new MapEvent(MapEventType.MOVEEND,this,Be)),clone$1(Be.extent,this.previousExtent_))),this.dispatchEvent(new MapEvent(MapEventType.POSTRENDER,this,Be)),this.renderComplete_=(this.hasListener(MapEventType.LOADSTART)||this.hasListener(MapEventType.LOADEND)||this.hasListener(RenderEventType.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(e){const t=this.getLayerGroup();t&&this.handleLayerRemove_(new GroupEvent("removelayer",t)),this.set(MapProperty.LAYERGROUP,e)}setSize(e){this.set(MapProperty.SIZE,e)}setTarget(e){this.set(MapProperty.TARGET,e)}setView(e){if(!e||e instanceof View){this.set(MapProperty.VIEW,e);return}this.set(MapProperty.VIEW,new View);const t=this;e.then(function(ke){t.setView(new View(ke))})}updateSize(){const e=this.getTargetElement();let t;if(e){const Ge=getComputedStyle(e),Be=e.offsetWidth-parseFloat(Ge.borderLeftWidth)-parseFloat(Ge.paddingLeft)-parseFloat(Ge.paddingRight)-parseFloat(Ge.borderRightWidth),je=e.offsetHeight-parseFloat(Ge.borderTopWidth)-parseFloat(Ge.paddingTop)-parseFloat(Ge.paddingBottom)-parseFloat(Ge.borderBottomWidth);!isNaN(Be)&&!isNaN(je)&&(t=[Math.max(0,Be),Math.max(0,je)],!hasArea(t)&&(e.offsetWidth||e.offsetHeight||e.getClientRects().length)&&warn("No map visible because the map container's width or height are 0."))}const ke=this.getSize();t&&(!ke||!equals$2(t,ke))&&(this.setSize(t),this.updateViewportSize_(t))}updateViewportSize_(e){const t=this.getView();t&&t.setViewportSize(e)}};function createOptionsInternal(Oe){let e=null;Oe.keyboardEventTarget!==void 0&&(e=typeof Oe.keyboardEventTarget=="string"?document.getElementById(Oe.keyboardEventTarget):Oe.keyboardEventTarget);const t={},ke=Oe.layers&&typeof Oe.layers.getLayers=="function"?Oe.layers:new LayerGroup({layers:Oe.layers});t[MapProperty.LAYERGROUP]=ke,t[MapProperty.TARGET]=Oe.target,t[MapProperty.VIEW]=Oe.view instanceof View?Oe.view:new View;let Ge;Oe.controls!==void 0&&(Array.isArray(Oe.controls)?Ge=new Collection(Oe.controls.slice()):(assert(typeof Oe.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),Ge=Oe.controls));let Be;Oe.interactions!==void 0&&(Array.isArray(Oe.interactions)?Be=new Collection(Oe.interactions.slice()):(assert(typeof Oe.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),Be=Oe.interactions));let je;return Oe.overlays!==void 0?Array.isArray(Oe.overlays)?je=new Collection(Oe.overlays.slice()):(assert(typeof Oe.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),je=Oe.overlays):je=new Collection,{controls:Ge,interactions:Be,keyboardEventTarget:e,overlays:je,values:t}}function getDefaultExportFromCjs(Oe){return Oe&&Oe.__esModule&&Object.prototype.hasOwnProperty.call(Oe,"default")?Oe.default:Oe}var csscolorparser={},parseCSSColor_1,kCSSColorTable={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function clamp_css_byte(Oe){return Oe=Math.round(Oe),Oe<0?0:Oe>255?255:Oe}function clamp_css_float(Oe){return Oe<0?0:Oe>1?1:Oe}function parse_css_int(Oe){return Oe[Oe.length-1]==="%"?clamp_css_byte(parseFloat(Oe)/100*255):clamp_css_byte(parseInt(Oe))}function parse_css_float(Oe){return Oe[Oe.length-1]==="%"?clamp_css_float(parseFloat(Oe)/100):clamp_css_float(parseFloat(Oe))}function css_hue_to_rgb(Oe,e,t){return t<0?t+=1:t>1&&(t-=1),t*6<1?Oe+(e-Oe)*t*6:t*2<1?e:t*3<2?Oe+(e-Oe)*(2/3-t)*6:Oe}function parseCSSColor(Oe){var e=Oe.replace(/ /g,"").toLowerCase();if(e in kCSSColorTable)return kCSSColorTable[e].slice();if(e[0]==="#"){if(e.length===4){var t=parseInt(e.substr(1),16);return t>=0&&t<=4095?[(t&3840)>>4|(t&3840)>>8,t&240|(t&240)>>4,t&15|(t&15)<<4,1]:null}else if(e.length===7){var t=parseInt(e.substr(1),16);return t>=0&&t<=16777215?[(t&16711680)>>16,(t&65280)>>8,t&255,1]:null}return null}var ke=e.indexOf("("),Ge=e.indexOf(")");if(ke!==-1&&Ge+1===e.length){var Be=e.substr(0,ke),je=e.substr(ke+1,Ge-(ke+1)).split(","),Ve=1;switch(Be){case"rgba":if(je.length!==4)return null;Ve=parse_css_float(je.pop());case"rgb":return je.length!==3?null:[parse_css_int(je[0]),parse_css_int(je[1]),parse_css_int(je[2]),Ve];case"hsla":if(je.length!==4)return null;Ve=parse_css_float(je.pop());case"hsl":if(je.length!==3)return null;var Ze=(parseFloat(je[0])%360+360)%360/360,Qe=parse_css_float(je[1]),en=parse_css_float(je[2]),tn=en<=.5?en*(Qe+1):en+Qe-en*Qe,an=en*2-tn;return[clamp_css_byte(css_hue_to_rgb(an,tn,Ze+1/3)*255),clamp_css_byte(css_hue_to_rgb(an,tn,Ze)*255),clamp_css_byte(css_hue_to_rgb(an,tn,Ze-1/3)*255),Ve];default:return null}}return null}try{parseCSSColor_1=csscolorparser.parseCSSColor=parseCSSColor}catch{}class Color{constructor(e,t,ke,Ge=1){this.r=e,this.g=t,this.b=ke,this.a=Ge}static parse(e){if(!e)return;if(e instanceof Color)return e;if(typeof e!="string")return;const t=parseCSSColor_1(e);if(t)return new Color(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}toString(){const[e,t,ke,Ge]=this.toArray();return`rgba(${Math.round(e)},${Math.round(t)},${Math.round(ke)},${Ge})`}toArray(){const{r:e,g:t,b:ke,a:Ge}=this;return Ge===0?[0,0,0,0]:[e*255/Ge,t*255/Ge,ke*255/Ge,Ge]}toArray01(){const{r:e,g:t,b:ke,a:Ge}=this;return Ge===0?[0,0,0,0]:[e/Ge,t/Ge,ke/Ge,Ge]}toArray01PremultipliedAlpha(){const{r:e,g:t,b:ke,a:Ge}=this;return[e,t,ke,Ge]}}Color.black=new Color(0,0,0,1);Color.white=new Color(1,1,1,1);Color.transparent=new Color(0,0,0,0);Color.red=new Color(1,0,0,1);Color.blue=new Color(0,0,1,1);var Color$1=Color;function convertLiteral(Oe){return typeof Oe=="object"?["literal",Oe]:Oe}function convertFunction(Oe,e){let t=Oe.stops;if(!t)return convertIdentityFunction(Oe,e);const ke=t&&typeof t[0][0]=="object",Ge=ke||Oe.property!==void 0,Be=ke||!Ge;return t=t.map(je=>!Ge&&e.tokens&&typeof je[1]=="string"?[je[0],convertTokenString(je[1])]:[je[0],convertLiteral(je[1])]),ke?convertZoomAndPropertyFunction(Oe,e,t):Be?convertZoomFunction(Oe,e,t):convertPropertyFunction(Oe,e,t)}function convertIdentityFunction(Oe,e){const t=["get",Oe.property];if(Oe.default===void 0)return e.type==="string"?["string",t]:t;if(e.type==="enum")return["match",t,Object.keys(e.values),t,Oe.default];{const ke=[e.type==="color"?"to-color":e.type,t,convertLiteral(Oe.default)];return e.type==="array"&&ke.splice(1,0,e.value,e.length||null),ke}}function getInterpolateOperator(Oe){switch(Oe.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function convertZoomAndPropertyFunction(Oe,e,t){const ke={},Ge={},Be=[];for(let Ve=0;Ve<t.length;Ve++){const Ze=t[Ve],Qe=Ze[0].zoom;ke[Qe]===void 0&&(ke[Qe]={zoom:Qe,type:Oe.type,property:Oe.property,default:Oe.default},Ge[Qe]=[],Be.push(Qe)),Ge[Qe].push([Ze[0].value,Ze[1]])}if(getFunctionType({},e)==="exponential"){const Ve=[getInterpolateOperator(Oe),["linear"],["zoom"]];for(const Ze of Be){const Qe=convertPropertyFunction(ke[Ze],e,Ge[Ze]);appendStopPair(Ve,Ze,Qe,!1)}return Ve}else{const Ve=["step",["zoom"]];for(const Ze of Be){const Qe=convertPropertyFunction(ke[Ze],e,Ge[Ze]);appendStopPair(Ve,Ze,Qe,!0)}return fixupDegenerateStepCurve(Ve),Ve}}function coalesce(Oe,e){if(Oe!==void 0)return Oe;if(e!==void 0)return e}function getFallback(Oe,e){const t=convertLiteral(coalesce(Oe.default,e.default));return t===void 0&&e.type==="resolvedImage"?"":t}function convertPropertyFunction(Oe,e,t){const ke=getFunctionType(Oe,e),Ge=["get",Oe.property];if(ke==="categorical"&&typeof t[0][0]=="boolean"){const Be=["case"];for(const je of t)Be.push(["==",Ge,je[0]],je[1]);return Be.push(getFallback(Oe,e)),Be}else if(ke==="categorical"){const Be=["match",Ge];for(const je of t)appendStopPair(Be,je[0],je[1],!1);return Be.push(getFallback(Oe,e)),Be}else if(ke==="interval"){const Be=["step",["number",Ge]];for(const je of t)appendStopPair(Be,je[0],je[1],!0);return fixupDegenerateStepCurve(Be),Oe.default===void 0?Be:["case",["==",["typeof",Ge],"number"],Be,convertLiteral(Oe.default)]}else if(ke==="exponential"){const Be=Oe.base!==void 0?Oe.base:1,je=[getInterpolateOperator(Oe),Be===1?["linear"]:["exponential",Be],["number",Ge]];for(const Ve of t)appendStopPair(je,Ve[0],Ve[1],!1);return Oe.default===void 0?je:["case",["==",["typeof",Ge],"number"],je,convertLiteral(Oe.default)]}else throw new Error(`Unknown property function type ${ke}`)}function convertZoomFunction(Oe,e,t,ke=["zoom"]){const Ge=getFunctionType(Oe,e);let Be,je=!1;if(Ge==="interval")Be=["step",ke],je=!0;else if(Ge==="exponential"){const Ve=Oe.base!==void 0?Oe.base:1;Be=[getInterpolateOperator(Oe),Ve===1?["linear"]:["exponential",Ve],ke]}else throw new Error(`Unknown zoom function type "${Ge}"`);for(const Ve of t)appendStopPair(Be,Ve[0],Ve[1],je);return fixupDegenerateStepCurve(Be),Be}function fixupDegenerateStepCurve(Oe){Oe[0]==="step"&&Oe.length===3&&(Oe.push(0),Oe.push(Oe[3]))}function appendStopPair(Oe,e,t,ke){Oe.length>3&&e===Oe[Oe.length-2]||(ke&&Oe.length===2||Oe.push(e),Oe.push(t))}function getFunctionType(Oe,e){return Oe.type?Oe.type:e.expression.interpolated?"exponential":"interval"}function convertTokenString(Oe){const e=["concat"],t=/{([^{}]+)}/g;let ke=0;for(let Ge=t.exec(Oe);Ge!==null;Ge=t.exec(Oe)){const Be=Oe.slice(ke,t.lastIndex-Ge[0].length);ke=t.lastIndex,Be.length>0&&e.push(Be),e.push(["get",Ge[1]])}if(e.length===1)return Oe;if(ke<Oe.length)e.push(Oe.slice(ke));else if(e.length===2)return["to-string",e[1]];return e}class ParsingError extends Error{constructor(e,t){super(t),this.message=t,this.key=e}}var ParsingError$1=ParsingError;class Scope{constructor(e,t=[]){this.parent=e,this.bindings={};for(const[ke,Ge]of t)this.bindings[ke]=Ge}concat(e){return new Scope(this,e)}get(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(`${e} not found in scope.`)}has(e){return this.bindings[e]?!0:this.parent?this.parent.has(e):!1}}var Scope$1=Scope;const NullType={kind:"null"},NumberType={kind:"number"},StringType={kind:"string"},BooleanType={kind:"boolean"},ColorType={kind:"color"},ObjectType={kind:"object"},ValueType={kind:"value"},ErrorType={kind:"error"},CollatorType={kind:"collator"},FormattedType={kind:"formatted"},ResolvedImageType={kind:"resolvedImage"};function array$1(Oe,e){return{kind:"array",itemType:Oe,N:e}}function toString$1(Oe){if(Oe.kind==="array"){const e=toString$1(Oe.itemType);return typeof Oe.N=="number"?`array<${e}, ${Oe.N}>`:Oe.itemType.kind==="value"?"array":`array<${e}>`}else return Oe.kind}const valueMemberTypes=[NullType,NumberType,StringType,BooleanType,ColorType,FormattedType,ObjectType,array$1(ValueType),ResolvedImageType];function checkSubtype(Oe,e){if(e.kind==="error")return null;if(Oe.kind==="array"){if(e.kind==="array"&&(e.N===0&&e.itemType.kind==="value"||!checkSubtype(Oe.itemType,e.itemType))&&(typeof Oe.N!="number"||Oe.N===e.N))return null}else{if(Oe.kind===e.kind)return null;if(Oe.kind==="value"){for(const t of valueMemberTypes)if(!checkSubtype(t,e))return null}}return`Expected ${toString$1(Oe)} but found ${toString$1(e)} instead.`}function isValidType(Oe,e){return e.some(t=>t.kind===Oe.kind)}function isValidNativeType(Oe,e){return e.some(t=>t==="null"?Oe===null:t==="array"?Array.isArray(Oe):t==="object"?Oe&&!Array.isArray(Oe)&&typeof Oe=="object":t===typeof Oe)}class Collator{constructor(e,t,ke){e?this.sensitivity=t?"variant":"case":this.sensitivity=t?"accent":"base",this.locale=ke,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(e,t){return this.collator.compare(e,t)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class FormattedSection{constructor(e,t,ke,Ge,Be){this.text=e.normalize?e.normalize():e,this.image=t,this.scale=ke,this.fontStack=Ge,this.textColor=Be}}class Formatted{constructor(e){this.sections=e}static fromString(e){return new Formatted([new FormattedSection(e,null,null,null,null)])}isEmpty(){return this.sections.length===0?!0:!this.sections.some(e=>e.text.length!==0||e.image&&e.image.name.length!==0)}static factory(e){return e instanceof Formatted?e:Formatted.fromString(e)}toString(){return this.sections.length===0?"":this.sections.map(e=>e.text).join("")}serialize(){const e=["format"];for(const t of this.sections){if(t.image){e.push(["image",t.image.name]);continue}e.push(t.text);const ke={};t.fontStack&&(ke["text-font"]=["literal",t.fontStack.split(",")]),t.scale&&(ke["font-scale"]=t.scale),t.textColor&&(ke["text-color"]=["rgba"].concat(t.textColor.toArray())),e.push(ke)}return e}}class ResolvedImage{constructor(e){this.name=e.name,this.available=e.available}toString(){return this.name}static fromString(e){return e?new ResolvedImage({name:e,available:!1}):null}serialize(){return["image",this.name]}}function validateRGBA(Oe,e,t,ke){return typeof Oe=="number"&&Oe>=0&&Oe<=255&&typeof e=="number"&&e>=0&&e<=255&&typeof t=="number"&&t>=0&&t<=255?typeof ke>"u"||typeof ke=="number"&&ke>=0&&ke<=1?null:`Invalid rgba value [${[Oe,e,t,ke].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof ke=="number"?[Oe,e,t,ke]:[Oe,e,t]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function isValue(Oe){if(Oe===null)return!0;if(typeof Oe=="string")return!0;if(typeof Oe=="boolean")return!0;if(typeof Oe=="number")return!0;if(Oe instanceof Color$1)return!0;if(Oe instanceof Collator)return!0;if(Oe instanceof Formatted)return!0;if(Oe instanceof ResolvedImage)return!0;if(Array.isArray(Oe)){for(const e of Oe)if(!isValue(e))return!1;return!0}else if(typeof Oe=="object"){for(const e in Oe)if(!isValue(Oe[e]))return!1;return!0}else return!1}function typeOf(Oe){if(Oe===null)return NullType;if(typeof Oe=="string")return StringType;if(typeof Oe=="boolean")return BooleanType;if(typeof Oe=="number")return NumberType;if(Oe instanceof Color$1)return ColorType;if(Oe instanceof Collator)return CollatorType;if(Oe instanceof Formatted)return FormattedType;if(Oe instanceof ResolvedImage)return ResolvedImageType;if(Array.isArray(Oe)){const e=Oe.length;let t;for(const ke of Oe){const Ge=typeOf(ke);if(!t)t=Ge;else{if(t===Ge)continue;t=ValueType;break}}return array$1(t||ValueType,e)}else return ObjectType}function toString(Oe){const e=typeof Oe;return Oe===null?"":e==="string"||e==="number"||e==="boolean"?String(Oe):Oe instanceof Color$1||Oe instanceof Formatted||Oe instanceof ResolvedImage?Oe.toString():JSON.stringify(Oe)}class Literal{constructor(e,t){this.type=e,this.value=t}static parse(e,t){if(e.length!==2)return t.error(`'literal' expression requires exactly one argument, but found ${e.length-1} instead.`);if(!isValue(e[1]))return t.error("invalid value");const ke=e[1];let Ge=typeOf(ke);const Be=t.expectedType;return Ge.kind==="array"&&Ge.N===0&&Be&&Be.kind==="array"&&(typeof Be.N!="number"||Be.N===0)&&(Ge=Be),new Literal(Ge,ke)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Color$1?["rgba"].concat(this.value.toArray()):this.value instanceof Formatted?this.value.serialize():this.value}}var Literal$1=Literal;class RuntimeError{constructor(e){this.name="ExpressionEvaluationError",this.message=e}toJSON(){return this.message}}var RuntimeError$1=RuntimeError;const types$2={string:StringType,number:NumberType,boolean:BooleanType,object:ObjectType};class Assertion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");let ke=1,Ge;const Be=e[0];if(Be==="array"){let Ve;if(e.length>2){const Qe=e[1];if(typeof Qe!="string"||!(Qe in types$2)||Qe==="object")return t.error('The item type argument of "array" must be one of string, number, boolean',1);Ve=types$2[Qe],ke++}else Ve=ValueType;let Ze;if(e.length>3){if(e[2]!==null&&(typeof e[2]!="number"||e[2]<0||e[2]!==Math.floor(e[2])))return t.error('The length argument to "array" must be a positive integer literal',2);Ze=e[2],ke++}Ge=array$1(Ve,Ze)}else Ge=types$2[Be];const je=[];for(;ke<e.length;ke++){const Ve=t.parse(e[ke],ke,ValueType);if(!Ve)return null;je.push(Ve)}return new Assertion(Ge,je)}evaluate(e){for(let t=0;t<this.args.length;t++){const ke=this.args[t].evaluate(e);if(checkSubtype(this.type,typeOf(ke))){if(t===this.args.length-1)throw new RuntimeError$1(`Expected value to be of type ${toString$1(this.type)}, but found ${toString$1(typeOf(ke))} instead.`)}else return ke}return null}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=this.type,t=[e.kind];if(e.kind==="array"){const ke=e.itemType;if(ke.kind==="string"||ke.kind==="number"||ke.kind==="boolean"){t.push(ke.kind);const Ge=e.N;(typeof Ge=="number"||this.args.length>1)&&t.push(Ge)}}return t.concat(this.args.map(ke=>ke.serialize()))}}var Assertion$1=Assertion;class FormatExpression{constructor(e){this.type=FormattedType,this.sections=e}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const ke=e[1];if(!Array.isArray(ke)&&typeof ke=="object")return t.error("First argument must be an image or text section.");const Ge=[];let Be=!1;for(let je=1;je<=e.length-1;++je){const Ve=e[je];if(Be&&typeof Ve=="object"&&!Array.isArray(Ve)){Be=!1;let Ze=null;if(Ve["font-scale"]&&(Ze=t.parse(Ve["font-scale"],1,NumberType),!Ze))return null;let Qe=null;if(Ve["text-font"]&&(Qe=t.parse(Ve["text-font"],1,array$1(StringType)),!Qe))return null;let en=null;if(Ve["text-color"]&&(en=t.parse(Ve["text-color"],1,ColorType),!en))return null;const tn=Ge[Ge.length-1];tn.scale=Ze,tn.font=Qe,tn.textColor=en}else{const Ze=t.parse(e[je],1,ValueType);if(!Ze)return null;const Qe=Ze.type.kind;if(Qe!=="string"&&Qe!=="value"&&Qe!=="null"&&Qe!=="resolvedImage")return t.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Be=!0,Ge.push({content:Ze,scale:null,font:null,textColor:null})}}return new FormatExpression(Ge)}evaluate(e){const t=ke=>{const Ge=ke.content.evaluate(e);return typeOf(Ge)===ResolvedImageType?new FormattedSection("",Ge,null,null,null):new FormattedSection(toString(Ge),null,ke.scale?ke.scale.evaluate(e):null,ke.font?ke.font.evaluate(e).join(","):null,ke.textColor?ke.textColor.evaluate(e):null)};return new Formatted(this.sections.map(t))}eachChild(e){for(const t of this.sections)e(t.content),t.scale&&e(t.scale),t.font&&e(t.font),t.textColor&&e(t.textColor)}outputDefined(){return!1}serialize(){const e=["format"];for(const t of this.sections){e.push(t.content.serialize());const ke={};t.scale&&(ke["font-scale"]=t.scale.serialize()),t.font&&(ke["text-font"]=t.font.serialize()),t.textColor&&(ke["text-color"]=t.textColor.serialize()),e.push(ke)}return e}}class ImageExpression{constructor(e){this.type=ResolvedImageType,this.input=e}static parse(e,t){if(e.length!==2)return t.error("Expected two arguments.");const ke=t.parse(e[1],1,StringType);return ke?new ImageExpression(ke):t.error("No image name provided.")}evaluate(e){const t=this.input.evaluate(e),ke=ResolvedImage.fromString(t);return ke&&e.availableImages&&(ke.available=e.availableImages.indexOf(t)>-1),ke}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const types$1={"to-boolean":BooleanType,"to-color":ColorType,"to-number":NumberType,"to-string":StringType};class Coercion{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expected at least one argument.");const ke=e[0];if((ke==="to-boolean"||ke==="to-string")&&e.length!==2)return t.error("Expected one argument.");const Ge=types$1[ke],Be=[];for(let je=1;je<e.length;je++){const Ve=t.parse(e[je],je,ValueType);if(!Ve)return null;Be.push(Ve)}return new Coercion(Ge,Be)}evaluate(e){if(this.type.kind==="boolean")return!!this.args[0].evaluate(e);if(this.type.kind==="color"){let t,ke;for(const Ge of this.args){if(t=Ge.evaluate(e),ke=null,t instanceof Color$1)return t;if(typeof t=="string"){const Be=e.parseColor(t);if(Be)return Be}else if(Array.isArray(t)&&(t.length<3||t.length>4?ke=`Invalid rbga value ${JSON.stringify(t)}: expected an array containing either three or four numeric values.`:ke=validateRGBA(t[0],t[1],t[2],t[3]),!ke))return new Color$1(t[0]/255,t[1]/255,t[2]/255,t[3])}throw new RuntimeError$1(ke||`Could not parse color from value '${typeof t=="string"?t:String(JSON.stringify(t))}'`)}else if(this.type.kind==="number"){let t=null;for(const ke of this.args){if(t=ke.evaluate(e),t===null)return 0;const Ge=Number(t);if(!isNaN(Ge))return Ge}throw new RuntimeError$1(`Could not convert ${JSON.stringify(t)} to number.`)}else return this.type.kind==="formatted"?Formatted.fromString(toString(this.args[0].evaluate(e))):this.type.kind==="resolvedImage"?ResolvedImage.fromString(toString(this.args[0].evaluate(e))):toString(this.args[0].evaluate(e))}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){if(this.type.kind==="formatted")return new FormatExpression([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new ImageExpression(this.args[0]).serialize();const e=[`to-${this.type.kind}`];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Coercion$1=Coercion;const geometryTypes=["Unknown","Point","LineString","Polygon"];class EvaluationContext{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?geometryTypes[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const e=this.featureDistanceData.center,t=this.featureDistanceData.scale,{x:ke,y:Ge}=this.featureTileCoord,Be=ke*t-e[0],je=Ge*t-e[1],Ve=this.featureDistanceData.bearing[0],Ze=this.featureDistanceData.bearing[1];return Ve*Be+Ze*je}return 0}parseColor(e){let t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=Color$1.parse(e)),t}}var EvaluationContext$1=EvaluationContext;class CompoundExpression{constructor(e,t,ke,Ge){this.name=e,this.type=t,this._evaluate=ke,this.args=Ge}evaluate(e){return this._evaluate(e,this.args)}eachChild(e){this.args.forEach(e)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(e=>e.serialize()))}static parse(e,t){const ke=e[0],Ge=CompoundExpression.definitions[ke];if(!Ge)return t.error(`Unknown expression "${ke}". If you wanted a literal array, use ["literal", [...]].`,0);const Be=Array.isArray(Ge)?Ge[0]:Ge.type,je=Array.isArray(Ge)?[[Ge[1],Ge[2]]]:Ge.overloads,Ve=je.filter(([Qe])=>!Array.isArray(Qe)||Qe.length===e.length-1);let Ze=null;for(const[Qe,en]of Ve){Ze=new ParsingContext$1(t.registry,t.path,null,t.scope);const tn=[];let an=!1;for(let cn=1;cn<e.length;cn++){const un=e[cn],dn=Array.isArray(Qe)?Qe[cn-1]:Qe.type,fn=Ze.parse(un,1+tn.length,dn);if(!fn){an=!0;break}tn.push(fn)}if(!an){if(Array.isArray(Qe)&&Qe.length!==tn.length){Ze.error(`Expected ${Qe.length} arguments, but found ${tn.length} instead.`);continue}for(let cn=0;cn<tn.length;cn++){const un=Array.isArray(Qe)?Qe[cn]:Qe.type,dn=tn[cn];Ze.concat(cn+1).checkSubtype(un,dn.type)}if(Ze.errors.length===0)return new CompoundExpression(ke,Be,en,tn)}}if(Ve.length===1)t.errors.push(...Ze.errors);else{const en=(Ve.length?Ve:je).map(([an])=>stringifySignature(an)).join(" | "),tn=[];for(let an=1;an<e.length;an++){const cn=t.parse(e[an],1+tn.length);if(!cn)return null;tn.push(toString$1(cn.type))}t.error(`Expected arguments of type ${en}, but found (${tn.join(", ")}) instead.`)}return null}static register(e,t){CompoundExpression.definitions=t;for(const ke in t)e[ke]=CompoundExpression}}function stringifySignature(Oe){return Array.isArray(Oe)?`(${Oe.map(toString$1).join(", ")})`:`(${toString$1(Oe.type)}...)`}var CompoundExpression$1=CompoundExpression;class CollatorExpression{constructor(e,t,ke){this.type=CollatorType,this.locale=ke,this.caseSensitive=e,this.diacriticSensitive=t}static parse(e,t){if(e.length!==2)return t.error("Expected one argument.");const ke=e[1];if(typeof ke!="object"||Array.isArray(ke))return t.error("Collator options argument must be an object.");const Ge=t.parse(ke["case-sensitive"]===void 0?!1:ke["case-sensitive"],1,BooleanType);if(!Ge)return null;const Be=t.parse(ke["diacritic-sensitive"]===void 0?!1:ke["diacritic-sensitive"],1,BooleanType);if(!Be)return null;let je=null;return ke.locale&&(je=t.parse(ke.locale,1,StringType),!je)?null:new CollatorExpression(Ge,Be,je)}evaluate(e){return new Collator(this.caseSensitive.evaluate(e),this.diacriticSensitive.evaluate(e),this.locale?this.locale.evaluate(e):null)}eachChild(e){e(this.caseSensitive),e(this.diacriticSensitive),this.locale&&e(this.locale)}outputDefined(){return!1}serialize(){const e={};return e["case-sensitive"]=this.caseSensitive.serialize(),e["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(e.locale=this.locale.serialize()),["collator",e]}}const EXTENT=8192;function updateBBox(Oe,e){Oe[0]=Math.min(Oe[0],e[0]),Oe[1]=Math.min(Oe[1],e[1]),Oe[2]=Math.max(Oe[2],e[0]),Oe[3]=Math.max(Oe[3],e[1])}function mercatorXfromLng(Oe){return(180+Oe)/360}function mercatorYfromLat(Oe){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+Oe*Math.PI/360)))/360}function boxWithinBox(Oe,e){return!(Oe[0]<=e[0]||Oe[2]>=e[2]||Oe[1]<=e[1]||Oe[3]>=e[3])}function getTileCoordinates(Oe,e){const t=mercatorXfromLng(Oe[0]),ke=mercatorYfromLat(Oe[1]),Ge=Math.pow(2,e.z);return[Math.round(t*Ge*EXTENT),Math.round(ke*Ge*EXTENT)]}function onBoundary(Oe,e,t){const ke=Oe[0]-e[0],Ge=Oe[1]-e[1],Be=Oe[0]-t[0],je=Oe[1]-t[1];return ke*je-Be*Ge===0&&ke*Be<=0&&Ge*je<=0}function rayIntersect(Oe,e,t){return e[1]>Oe[1]!=t[1]>Oe[1]&&Oe[0]<(t[0]-e[0])*(Oe[1]-e[1])/(t[1]-e[1])+e[0]}function pointWithinPolygon(Oe,e){let t=!1;for(let ke=0,Ge=e.length;ke<Ge;ke++){const Be=e[ke];for(let je=0,Ve=Be.length;je<Ve-1;je++){if(onBoundary(Oe,Be[je],Be[je+1]))return!1;rayIntersect(Oe,Be[je],Be[je+1])&&(t=!t)}}return t}function pointWithinPolygons(Oe,e){for(let t=0;t<e.length;t++)if(pointWithinPolygon(Oe,e[t]))return!0;return!1}function perp(Oe,e){return Oe[0]*e[1]-Oe[1]*e[0]}function twoSided(Oe,e,t,ke){const Ge=Oe[0]-t[0],Be=Oe[1]-t[1],je=e[0]-t[0],Ve=e[1]-t[1],Ze=ke[0]-t[0],Qe=ke[1]-t[1],en=Ge*Qe-Ze*Be,tn=je*Qe-Ze*Ve;return en>0&&tn<0||en<0&&tn>0}function lineIntersectLine(Oe,e,t,ke){const Ge=[e[0]-Oe[0],e[1]-Oe[1]],Be=[ke[0]-t[0],ke[1]-t[1]];return perp(Be,Ge)===0?!1:!!(twoSided(Oe,e,t,ke)&&twoSided(t,ke,Oe,e))}function lineIntersectPolygon(Oe,e,t){for(const ke of t)for(let Ge=0;Ge<ke.length-1;++Ge)if(lineIntersectLine(Oe,e,ke[Ge],ke[Ge+1]))return!0;return!1}function lineStringWithinPolygon(Oe,e){for(let t=0;t<Oe.length;++t)if(!pointWithinPolygon(Oe[t],e))return!1;for(let t=0;t<Oe.length-1;++t)if(lineIntersectPolygon(Oe[t],Oe[t+1],e))return!1;return!0}function lineStringWithinPolygons(Oe,e){for(let t=0;t<e.length;t++)if(lineStringWithinPolygon(Oe,e[t]))return!0;return!1}function getTilePolygon(Oe,e,t){const ke=[];for(let Ge=0;Ge<Oe.length;Ge++){const Be=[];for(let je=0;je<Oe[Ge].length;je++){const Ve=getTileCoordinates(Oe[Ge][je],t);updateBBox(e,Ve),Be.push(Ve)}ke.push(Be)}return ke}function getTilePolygons(Oe,e,t){const ke=[];for(let Ge=0;Ge<Oe.length;Ge++){const Be=getTilePolygon(Oe[Ge],e,t);ke.push(Be)}return ke}function updatePoint(Oe,e,t,ke){if(Oe[0]<t[0]||Oe[0]>t[2]){const Ge=ke*.5;let Be=Oe[0]-t[0]>Ge?-ke:t[0]-Oe[0]>Ge?ke:0;Be===0&&(Be=Oe[0]-t[2]>Ge?-ke:t[2]-Oe[0]>Ge?ke:0),Oe[0]+=Be}updateBBox(e,Oe)}function resetBBox(Oe){Oe[0]=Oe[1]=1/0,Oe[2]=Oe[3]=-1/0}function getTilePoints(Oe,e,t,ke){const Ge=Math.pow(2,ke.z)*EXTENT,Be=[ke.x*EXTENT,ke.y*EXTENT],je=[];if(!Oe)return je;for(const Ve of Oe)for(const Ze of Ve){const Qe=[Ze.x+Be[0],Ze.y+Be[1]];updatePoint(Qe,e,t,Ge),je.push(Qe)}return je}function getTileLines(Oe,e,t,ke){const Ge=Math.pow(2,ke.z)*EXTENT,Be=[ke.x*EXTENT,ke.y*EXTENT],je=[];if(!Oe)return je;for(const Ve of Oe){const Ze=[];for(const Qe of Ve){const en=[Qe.x+Be[0],Qe.y+Be[1]];updateBBox(e,en),Ze.push(en)}je.push(Ze)}if(e[2]-e[0]<=Ge/2){resetBBox(e);for(const Ve of je)for(const Ze of Ve)updatePoint(Ze,e,t,Ge)}return je}function pointsWithinPolygons(Oe,e){const t=[1/0,1/0,-1/0,-1/0],ke=[1/0,1/0,-1/0,-1/0],Ge=Oe.canonicalID();if(!Ge)return!1;if(e.type==="Polygon"){const Be=getTilePolygon(e.coordinates,ke,Ge),je=getTilePoints(Oe.geometry(),t,ke,Ge);if(!boxWithinBox(t,ke))return!1;for(const Ve of je)if(!pointWithinPolygon(Ve,Be))return!1}if(e.type==="MultiPolygon"){const Be=getTilePolygons(e.coordinates,ke,Ge),je=getTilePoints(Oe.geometry(),t,ke,Ge);if(!boxWithinBox(t,ke))return!1;for(const Ve of je)if(!pointWithinPolygons(Ve,Be))return!1}return!0}function linesWithinPolygons(Oe,e){const t=[1/0,1/0,-1/0,-1/0],ke=[1/0,1/0,-1/0,-1/0],Ge=Oe.canonicalID();if(!Ge)return!1;if(e.type==="Polygon"){const Be=getTilePolygon(e.coordinates,ke,Ge),je=getTileLines(Oe.geometry(),t,ke,Ge);if(!boxWithinBox(t,ke))return!1;for(const Ve of je)if(!lineStringWithinPolygon(Ve,Be))return!1}if(e.type==="MultiPolygon"){const Be=getTilePolygons(e.coordinates,ke,Ge),je=getTileLines(Oe.geometry(),t,ke,Ge);if(!boxWithinBox(t,ke))return!1;for(const Ve of je)if(!lineStringWithinPolygons(Ve,Be))return!1}return!0}class Within{constructor(e,t){this.type=BooleanType,this.geojson=e,this.geometries=t}static parse(e,t){if(e.length!==2)return t.error(`'within' expression requires exactly one argument, but found ${e.length-1} instead.`);if(isValue(e[1])){const ke=e[1];if(ke.type==="FeatureCollection")for(let Ge=0;Ge<ke.features.length;++Ge){const Be=ke.features[Ge].geometry.type;if(Be==="Polygon"||Be==="MultiPolygon")return new Within(ke,ke.features[Ge].geometry)}else if(ke.type==="Feature"){const Ge=ke.geometry.type;if(Ge==="Polygon"||Ge==="MultiPolygon")return new Within(ke,ke.geometry)}else if(ke.type==="Polygon"||ke.type==="MultiPolygon")return new Within(ke,ke)}return t.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(e){if(e.geometry()!=null&&e.canonicalID()!=null){if(e.geometryType()==="Point")return pointsWithinPolygons(e,this.geometries);if(e.geometryType()==="LineString")return linesWithinPolygons(e,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var Within$1=Within;function isFeatureConstant(Oe){if(Oe instanceof CompoundExpression$1){if(Oe.name==="get"&&Oe.args.length===1)return!1;if(Oe.name==="feature-state")return!1;if(Oe.name==="has"&&Oe.args.length===1)return!1;if(Oe.name==="properties"||Oe.name==="geometry-type"||Oe.name==="id")return!1;if(/^filter-/.test(Oe.name))return!1}if(Oe instanceof Within$1)return!1;let e=!0;return Oe.eachChild(t=>{e&&!isFeatureConstant(t)&&(e=!1)}),e}function isStateConstant(Oe){if(Oe instanceof CompoundExpression$1&&Oe.name==="feature-state")return!1;let e=!0;return Oe.eachChild(t=>{e&&!isStateConstant(t)&&(e=!1)}),e}function isGlobalPropertyConstant(Oe,e){if(Oe instanceof CompoundExpression$1&&e.indexOf(Oe.name)>=0)return!1;let t=!0;return Oe.eachChild(ke=>{t&&!isGlobalPropertyConstant(ke,e)&&(t=!1)}),t}class Var{constructor(e,t){this.type=t.type,this.name=e,this.boundExpression=t}static parse(e,t){if(e.length!==2||typeof e[1]!="string")return t.error("'var' expression requires exactly one string literal argument.");const ke=e[1];return t.scope.has(ke)?new Var(ke,t.scope.get(ke)):t.error(`Unknown variable "${ke}". Make sure "${ke}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(e){return this.boundExpression.evaluate(e)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var Var$1=Var;class ParsingContext{constructor(e,t=[],ke,Ge=new Scope$1,Be=[]){this.registry=e,this.path=t,this.key=t.map(je=>`[${je}]`).join(""),this.scope=Ge,this.errors=Be,this.expectedType=ke}parse(e,t,ke,Ge,Be={}){return t?this.concat(t,ke,Ge)._parse(e,Be):this._parse(e,Be)}_parse(e,t){(e===null||typeof e=="string"||typeof e=="boolean"||typeof e=="number")&&(e=["literal",e]);function ke(Ge,Be,je){return je==="assert"?new Assertion$1(Be,[Ge]):je==="coerce"?new Coercion$1(Be,[Ge]):Ge}if(Array.isArray(e)){if(e.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const Ge=e[0];if(typeof Ge!="string")return this.error(`Expression name must be a string, but found ${typeof Ge} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const Be=this.registry[Ge];if(Be){let je=Be.parse(e,this);if(!je)return null;if(this.expectedType){const Ve=this.expectedType,Ze=je.type;if((Ve.kind==="string"||Ve.kind==="number"||Ve.kind==="boolean"||Ve.kind==="object"||Ve.kind==="array")&&Ze.kind==="value")je=ke(je,Ve,t.typeAnnotation||"assert");else if((Ve.kind==="color"||Ve.kind==="formatted"||Ve.kind==="resolvedImage")&&(Ze.kind==="value"||Ze.kind==="string"))je=ke(je,Ve,t.typeAnnotation||"coerce");else if(this.checkSubtype(Ve,Ze))return null}if(!(je instanceof Literal$1)&&je.type.kind!=="resolvedImage"&&isConstant(je)){const Ve=new EvaluationContext$1;try{je=new Literal$1(je.type,je.evaluate(Ve))}catch(Ze){return this.error(Ze.message),null}}return je}return this.error(`Unknown expression "${Ge}". If you wanted a literal array, use ["literal", [...]].`,0)}else return typeof e>"u"?this.error("'undefined' value invalid. Use null instead."):typeof e=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof e} instead.`)}concat(e,t,ke){const Ge=typeof e=="number"?this.path.concat(e):this.path,Be=ke?this.scope.concat(ke):this.scope;return new ParsingContext(this.registry,Ge,t||null,Be,this.errors)}error(e,...t){const ke=`${this.key}${t.map(Ge=>`[${Ge}]`).join("")}`;this.errors.push(new ParsingError$1(ke,e))}checkSubtype(e,t){const ke=checkSubtype(e,t);return ke&&this.error(ke),ke}}var ParsingContext$1=ParsingContext;function isConstant(Oe){if(Oe instanceof Var$1)return isConstant(Oe.boundExpression);if(Oe instanceof CompoundExpression$1&&Oe.name==="error")return!1;if(Oe instanceof CollatorExpression)return!1;if(Oe instanceof Within$1)return!1;const e=Oe instanceof Coercion$1||Oe instanceof Assertion$1;let t=!0;return Oe.eachChild(ke=>{e?t=t&&isConstant(ke):t=t&&ke instanceof Literal$1}),t?isFeatureConstant(Oe)&&isGlobalPropertyConstant(Oe,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"]):!1}function findStopLessThanOrEqualTo(Oe,e){const t=Oe.length-1;let ke=0,Ge=t,Be=0,je,Ve;for(;ke<=Ge;)if(Be=Math.floor((ke+Ge)/2),je=Oe[Be],Ve=Oe[Be+1],je<=e){if(Be===t||e<Ve)return Be;ke=Be+1}else if(je>e)Ge=Be-1;else throw new RuntimeError$1("Input is not a number.");return 0}class Step{constructor(e,t,ke){this.type=e,this.input=t,this.labels=[],this.outputs=[];for(const[Ge,Be]of ke)this.labels.push(Ge),this.outputs.push(Be)}static parse(e,t){if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");const ke=t.parse(e[1],1,NumberType);if(!ke)return null;const Ge=[];let Be=null;t.expectedType&&t.expectedType.kind!=="value"&&(Be=t.expectedType);for(let je=1;je<e.length;je+=2){const Ve=je===1?-1/0:e[je],Ze=e[je+1],Qe=je,en=je+1;if(typeof Ve!="number")return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Qe);if(Ge.length&&Ge[Ge.length-1][0]>=Ve)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Qe);const tn=t.parse(Ze,en,Be);if(!tn)return null;Be=Be||tn.type,Ge.push([Ve,tn])}return new Step(Be,ke,Ge)}evaluate(e){const t=this.labels,ke=this.outputs;if(t.length===1)return ke[0].evaluate(e);const Ge=this.input.evaluate(e);if(Ge<=t[0])return ke[0].evaluate(e);const Be=t.length;if(Ge>=t[Be-1])return ke[Be-1].evaluate(e);const je=findStopLessThanOrEqualTo(t,Ge);return ke[je].evaluate(e)}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){const e=["step",this.input.serialize()];for(let t=0;t<this.labels.length;t++)t>0&&e.push(this.labels[t]),e.push(this.outputs[t].serialize());return e}}var Step$1=Step,unitbezier=UnitBezier;function UnitBezier(Oe,e,t,ke){this.cx=3*Oe,this.bx=3*(t-Oe)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(ke-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=Oe,this.p1y=ke,this.p2x=t,this.p2y=ke}UnitBezier.prototype.sampleCurveX=function(Oe){return((this.ax*Oe+this.bx)*Oe+this.cx)*Oe};UnitBezier.prototype.sampleCurveY=function(Oe){return((this.ay*Oe+this.by)*Oe+this.cy)*Oe};UnitBezier.prototype.sampleCurveDerivativeX=function(Oe){return(3*this.ax*Oe+2*this.bx)*Oe+this.cx};UnitBezier.prototype.solveCurveX=function(Oe,e){typeof e>"u"&&(e=1e-6);var t,ke,Ge,Be,je;for(Ge=Oe,je=0;je<8;je++){if(Be=this.sampleCurveX(Ge)-Oe,Math.abs(Be)<e)return Ge;var Ve=this.sampleCurveDerivativeX(Ge);if(Math.abs(Ve)<1e-6)break;Ge=Ge-Be/Ve}if(t=0,ke=1,Ge=Oe,Ge<t)return t;if(Ge>ke)return ke;for(;t<ke;){if(Be=this.sampleCurveX(Ge),Math.abs(Be-Oe)<e)return Ge;Oe>Be?t=Ge:ke=Ge,Ge=(ke-t)*.5+t}return Ge};UnitBezier.prototype.solve=function(Oe,e){return this.sampleCurveY(this.solveCurveX(Oe,e))};var UnitBezier$1=getDefaultExportFromCjs(unitbezier);function number(Oe,e,t){return Oe*(1-t)+e*t}function color(Oe,e,t){return new Color$1(number(Oe.r,e.r,t),number(Oe.g,e.g,t),number(Oe.b,e.b,t),number(Oe.a,e.a,t))}function array(Oe,e,t){return Oe.map((ke,Ge)=>number(ke,e[Ge],t))}var interpolate=Object.freeze({__proto__:null,number,color,array});const Xn=.95047,Yn=1,Zn=1.08883,t0=4/29,t1=6/29,t2=3*t1*t1,t3=t1*t1*t1,deg2rad$1=Math.PI/180,rad2deg=180/Math.PI;function xyz2lab(Oe){return Oe>t3?Math.pow(Oe,1/3):Oe/t2+t0}function lab2xyz(Oe){return Oe>t1?Oe*Oe*Oe:t2*(Oe-t0)}function xyz2rgb(Oe){return 255*(Oe<=.0031308?12.92*Oe:1.055*Math.pow(Oe,1/2.4)-.055)}function rgb2xyz(Oe){return Oe/=255,Oe<=.04045?Oe/12.92:Math.pow((Oe+.055)/1.055,2.4)}function rgbToLab(Oe){const e=rgb2xyz(Oe.r),t=rgb2xyz(Oe.g),ke=rgb2xyz(Oe.b),Ge=xyz2lab((.4124564*e+.3575761*t+.1804375*ke)/Xn),Be=xyz2lab((.2126729*e+.7151522*t+.072175*ke)/Yn),je=xyz2lab((.0193339*e+.119192*t+.9503041*ke)/Zn);return{l:116*Be-16,a:500*(Ge-Be),b:200*(Be-je),alpha:Oe.a}}function labToRgb(Oe){let e=(Oe.l+16)/116,t=isNaN(Oe.a)?e:e+Oe.a/500,ke=isNaN(Oe.b)?e:e-Oe.b/200;return e=Yn*lab2xyz(e),t=Xn*lab2xyz(t),ke=Zn*lab2xyz(ke),new Color$1(xyz2rgb(3.2404542*t-1.5371385*e-.4985314*ke),xyz2rgb(-.969266*t+1.8760108*e+.041556*ke),xyz2rgb(.0556434*t-.2040259*e+1.0572252*ke),Oe.alpha)}function interpolateLab(Oe,e,t){return{l:number(Oe.l,e.l,t),a:number(Oe.a,e.a,t),b:number(Oe.b,e.b,t),alpha:number(Oe.alpha,e.alpha,t)}}function rgbToHcl(Oe){const{l:e,a:t,b:ke}=rgbToLab(Oe),Ge=Math.atan2(ke,t)*rad2deg;return{h:Ge<0?Ge+360:Ge,c:Math.sqrt(t*t+ke*ke),l:e,alpha:Oe.a}}function hclToRgb(Oe){const e=Oe.h*deg2rad$1,t=Oe.c,ke=Oe.l;return labToRgb({l:ke,a:Math.cos(e)*t,b:Math.sin(e)*t,alpha:Oe.alpha})}function interpolateHue(Oe,e,t){const ke=e-Oe;return Oe+t*(ke>180||ke<-180?ke-360*Math.round(ke/360):ke)}function interpolateHcl(Oe,e,t){return{h:interpolateHue(Oe.h,e.h,t),c:number(Oe.c,e.c,t),l:number(Oe.l,e.l,t),alpha:number(Oe.alpha,e.alpha,t)}}const lab={forward:rgbToLab,reverse:labToRgb,interpolate:interpolateLab},hcl={forward:rgbToHcl,reverse:hclToRgb,interpolate:interpolateHcl};class Interpolate{constructor(e,t,ke,Ge,Be){this.type=e,this.operator=t,this.interpolation=ke,this.input=Ge,this.labels=[],this.outputs=[];for(const[je,Ve]of Be)this.labels.push(je),this.outputs.push(Ve)}static interpolationFactor(e,t,ke,Ge){let Be=0;if(e.name==="exponential")Be=exponentialInterpolation(t,e.base,ke,Ge);else if(e.name==="linear")Be=exponentialInterpolation(t,1,ke,Ge);else if(e.name==="cubic-bezier"){const je=e.controlPoints;Be=new UnitBezier$1(je[0],je[1],je[2],je[3]).solve(exponentialInterpolation(t,1,ke,Ge))}return Be}static parse(e,t){let[ke,Ge,Be,...je]=e;if(!Array.isArray(Ge)||Ge.length===0)return t.error("Expected an interpolation type expression.",1);if(Ge[0]==="linear")Ge={name:"linear"};else if(Ge[0]==="exponential"){const Qe=Ge[1];if(typeof Qe!="number")return t.error("Exponential interpolation requires a numeric base.",1,1);Ge={name:"exponential",base:Qe}}else if(Ge[0]==="cubic-bezier"){const Qe=Ge.slice(1);if(Qe.length!==4||Qe.some(en=>typeof en!="number"||en<0||en>1))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);Ge={name:"cubic-bezier",controlPoints:Qe}}else return t.error(`Unknown interpolation type ${String(Ge[0])}`,1,0);if(e.length-1<4)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if((e.length-1)%2!==0)return t.error("Expected an even number of arguments.");if(Be=t.parse(Be,2,NumberType),!Be)return null;const Ve=[];let Ze=null;ke==="interpolate-hcl"||ke==="interpolate-lab"?Ze=ColorType:t.expectedType&&t.expectedType.kind!=="value"&&(Ze=t.expectedType);for(let Qe=0;Qe<je.length;Qe+=2){const en=je[Qe],tn=je[Qe+1],an=Qe+3,cn=Qe+4;if(typeof en!="number")return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',an);if(Ve.length&&Ve[Ve.length-1][0]>=en)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',an);const un=t.parse(tn,cn,Ze);if(!un)return null;Ze=Ze||un.type,Ve.push([en,un])}return Ze.kind!=="number"&&Ze.kind!=="color"&&!(Ze.kind==="array"&&Ze.itemType.kind==="number"&&typeof Ze.N=="number")?t.error(`Type ${toString$1(Ze)} is not interpolatable.`):new Interpolate(Ze,ke,Ge,Be,Ve)}evaluate(e){const t=this.labels,ke=this.outputs;if(t.length===1)return ke[0].evaluate(e);const Ge=this.input.evaluate(e);if(Ge<=t[0])return ke[0].evaluate(e);const Be=t.length;if(Ge>=t[Be-1])return ke[Be-1].evaluate(e);const je=findStopLessThanOrEqualTo(t,Ge),Ve=t[je],Ze=t[je+1],Qe=Interpolate.interpolationFactor(this.interpolation,Ge,Ve,Ze),en=ke[je].evaluate(e),tn=ke[je+1].evaluate(e);return this.operator==="interpolate"?interpolate[this.type.kind.toLowerCase()](en,tn,Qe):this.operator==="interpolate-hcl"?hcl.reverse(hcl.interpolate(hcl.forward(en),hcl.forward(tn),Qe)):lab.reverse(lab.interpolate(lab.forward(en),lab.forward(tn),Qe))}eachChild(e){e(this.input);for(const t of this.outputs)e(t)}outputDefined(){return this.outputs.every(e=>e.outputDefined())}serialize(){let e;this.interpolation.name==="linear"?e=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?e=["linear"]:e=["exponential",this.interpolation.base]:e=["cubic-bezier"].concat(this.interpolation.controlPoints);const t=[this.operator,e,this.input.serialize()];for(let ke=0;ke<this.labels.length;ke++)t.push(this.labels[ke],this.outputs[ke].serialize());return t}}function exponentialInterpolation(Oe,e,t,ke){const Ge=ke-t,Be=Oe-t;return Ge===0?0:e===1?Be/Ge:(Math.pow(e,Be)-1)/(Math.pow(e,Ge)-1)}var Interpolate$1=Interpolate;class Coalesce{constructor(e,t){this.type=e,this.args=t}static parse(e,t){if(e.length<2)return t.error("Expectected at least one argument.");let ke=null;const Ge=t.expectedType;Ge&&Ge.kind!=="value"&&(ke=Ge);const Be=[];for(const Ve of e.slice(1)){const Ze=t.parse(Ve,1+Be.length,ke,void 0,{typeAnnotation:"omit"});if(!Ze)return null;ke=ke||Ze.type,Be.push(Ze)}return Ge&&Be.some(Ve=>checkSubtype(Ge,Ve.type))?new Coalesce(ValueType,Be):new Coalesce(ke,Be)}evaluate(e){let t=null,ke=0,Ge;for(const Be of this.args){if(ke++,t=Be.evaluate(e),t&&t instanceof ResolvedImage&&!t.available&&(Ge||(Ge=t),t=null,ke===this.args.length))return Ge;if(t!==null)break}return t}eachChild(e){this.args.forEach(e)}outputDefined(){return this.args.every(e=>e.outputDefined())}serialize(){const e=["coalesce"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Coalesce$1=Coalesce;class Let{constructor(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t}evaluate(e){return this.result.evaluate(e)}eachChild(e){for(const t of this.bindings)e(t[1]);e(this.result)}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found ${e.length-1} instead.`);const ke=[];for(let Be=1;Be<e.length-1;Be+=2){const je=e[Be];if(typeof je!="string")return t.error(`Expected string, but found ${typeof je} instead.`,Be);if(/[^a-zA-Z0-9_]/.test(je))return t.error("Variable names must contain only alphanumeric characters or '_'.",Be);const Ve=t.parse(e[Be+1],Be+1);if(!Ve)return null;ke.push([je,Ve])}const Ge=t.parse(e[e.length-1],e.length-1,t.expectedType,ke);return Ge?new Let(ke,Ge):null}outputDefined(){return this.result.outputDefined()}serialize(){const e=["let"];for(const[t,ke]of this.bindings)e.push(t,ke.serialize());return e.push(this.result.serialize()),e}}var Let$1=Let;let At$1=class qf{constructor(e,t,ke){this.type=e,this.index=t,this.input=ke}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const ke=t.parse(e[1],1,NumberType),Ge=t.parse(e[2],2,array$1(t.expectedType||ValueType));if(!ke||!Ge)return null;const Be=Ge.type;return new qf(Be.itemType,ke,Ge)}evaluate(e){const t=this.index.evaluate(e),ke=this.input.evaluate(e);if(t<0)throw new RuntimeError$1(`Array index out of bounds: ${t} < 0.`);if(t>=ke.length)throw new RuntimeError$1(`Array index out of bounds: ${t} > ${ke.length-1}.`);if(t!==Math.floor(t))throw new RuntimeError$1(`Array index must be an integer, but found ${t} instead.`);return ke[t]}eachChild(e){e(this.index),e(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}};var At$1$1=At$1;class In{constructor(e,t){this.type=BooleanType,this.needle=e,this.haystack=t}static parse(e,t){if(e.length!==3)return t.error(`Expected 2 arguments, but found ${e.length-1} instead.`);const ke=t.parse(e[1],1,ValueType),Ge=t.parse(e[2],2,ValueType);return!ke||!Ge?null:isValidType(ke.type,[BooleanType,StringType,NumberType,NullType,ValueType])?new In(ke,Ge):t.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(ke.type)} instead`)}evaluate(e){const t=this.needle.evaluate(e),ke=this.haystack.evaluate(e);if(ke==null)return!1;if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(t))} instead.`);if(!isValidNativeType(ke,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(ke))} instead.`);return ke.indexOf(t)>=0}eachChild(e){e(this.needle),e(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var In$1=In;class IndexOf{constructor(e,t,ke){this.type=NumberType,this.needle=e,this.haystack=t,this.fromIndex=ke}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const ke=t.parse(e[1],1,ValueType),Ge=t.parse(e[2],2,ValueType);if(!ke||!Ge)return null;if(!isValidType(ke.type,[BooleanType,StringType,NumberType,NullType,ValueType]))return t.error(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(ke.type)} instead`);if(e.length===4){const Be=t.parse(e[3],3,NumberType);return Be?new IndexOf(ke,Ge,Be):null}else return new IndexOf(ke,Ge)}evaluate(e){const t=this.needle.evaluate(e),ke=this.haystack.evaluate(e);if(!isValidNativeType(t,["boolean","string","number","null"]))throw new RuntimeError$1(`Expected first argument to be of type boolean, string, number or null, but found ${toString$1(typeOf(t))} instead.`);if(!isValidNativeType(ke,["string","array"]))throw new RuntimeError$1(`Expected second argument to be of type array or string, but found ${toString$1(typeOf(ke))} instead.`);if(this.fromIndex){const Ge=this.fromIndex.evaluate(e);return ke.indexOf(t,Ge)}return ke.indexOf(t)}eachChild(e){e(this.needle),e(this.haystack),this.fromIndex&&e(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const e=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),e]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var IndexOf$1=IndexOf;class Match{constructor(e,t,ke,Ge,Be,je){this.inputType=e,this.type=t,this.input=ke,this.cases=Ge,this.outputs=Be,this.otherwise=je}static parse(e,t){if(e.length<5)return t.error(`Expected at least 4 arguments, but found only ${e.length-1}.`);if(e.length%2!==1)return t.error("Expected an even number of arguments.");let ke,Ge;t.expectedType&&t.expectedType.kind!=="value"&&(Ge=t.expectedType);const Be={},je=[];for(let Qe=2;Qe<e.length-1;Qe+=2){let en=e[Qe];const tn=e[Qe+1];Array.isArray(en)||(en=[en]);const an=t.concat(Qe);if(en.length===0)return an.error("Expected at least one branch label.");for(const un of en){if(typeof un!="number"&&typeof un!="string")return an.error("Branch labels must be numbers or strings.");if(typeof un=="number"&&Math.abs(un)>Number.MAX_SAFE_INTEGER)return an.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof un=="number"&&Math.floor(un)!==un)return an.error("Numeric branch labels must be integer values.");if(!ke)ke=typeOf(un);else if(an.checkSubtype(ke,typeOf(un)))return null;if(typeof Be[String(un)]<"u")return an.error("Branch labels must be unique.");Be[String(un)]=je.length}const cn=t.parse(tn,Qe,Ge);if(!cn)return null;Ge=Ge||cn.type,je.push(cn)}const Ve=t.parse(e[1],1,ValueType);if(!Ve)return null;const Ze=t.parse(e[e.length-1],e.length-1,Ge);return!Ze||Ve.type.kind!=="value"&&t.concat(1).checkSubtype(ke,Ve.type)?null:new Match(ke,Ge,Ve,Be,je,Ze)}evaluate(e){const t=this.input.evaluate(e);return(typeOf(t)===this.inputType&&this.outputs[this.cases[t]]||this.otherwise).evaluate(e)}eachChild(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)}outputDefined(){return this.outputs.every(e=>e.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["match",this.input.serialize()],t=Object.keys(this.cases).sort(),ke=[],Ge={};for(const je of t){const Ve=Ge[this.cases[je]];Ve===void 0?(Ge[this.cases[je]]=ke.length,ke.push([this.cases[je],[je]])):ke[Ve][1].push(je)}const Be=je=>this.inputType.kind==="number"?Number(je):je;for(const[je,Ve]of ke)Ve.length===1?e.push(Be(Ve[0])):e.push(Ve.map(Be)),e.push(this.outputs[je].serialize());return e.push(this.otherwise.serialize()),e}}var Match$1=Match;class Case{constructor(e,t,ke){this.type=e,this.branches=t,this.otherwise=ke}static parse(e,t){if(e.length<4)return t.error(`Expected at least 3 arguments, but found only ${e.length-1}.`);if(e.length%2!==0)return t.error("Expected an odd number of arguments.");let ke;t.expectedType&&t.expectedType.kind!=="value"&&(ke=t.expectedType);const Ge=[];for(let je=1;je<e.length-1;je+=2){const Ve=t.parse(e[je],je,BooleanType);if(!Ve)return null;const Ze=t.parse(e[je+1],je+1,ke);if(!Ze)return null;Ge.push([Ve,Ze]),ke=ke||Ze.type}const Be=t.parse(e[e.length-1],e.length-1,ke);return Be?new Case(ke,Ge,Be):null}evaluate(e){for(const[t,ke]of this.branches)if(t.evaluate(e))return ke.evaluate(e);return this.otherwise.evaluate(e)}eachChild(e){for(const[t,ke]of this.branches)e(t),e(ke);e(this.otherwise)}outputDefined(){return this.branches.every(([e,t])=>t.outputDefined())&&this.otherwise.outputDefined()}serialize(){const e=["case"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Case$1=Case;class Slice{constructor(e,t,ke,Ge){this.type=e,this.input=t,this.beginIndex=ke,this.endIndex=Ge}static parse(e,t){if(e.length<=2||e.length>=5)return t.error(`Expected 3 or 4 arguments, but found ${e.length-1} instead.`);const ke=t.parse(e[1],1,ValueType),Ge=t.parse(e[2],2,NumberType);if(!ke||!Ge)return null;if(!isValidType(ke.type,[array$1(ValueType),StringType,ValueType]))return t.error(`Expected first argument to be of type array or string, but found ${toString$1(ke.type)} instead`);if(e.length===4){const Be=t.parse(e[3],3,NumberType);return Be?new Slice(ke.type,ke,Ge,Be):null}else return new Slice(ke.type,ke,Ge)}evaluate(e){const t=this.input.evaluate(e),ke=this.beginIndex.evaluate(e);if(!isValidNativeType(t,["string","array"]))throw new RuntimeError$1(`Expected first argument to be of type array or string, but found ${toString$1(typeOf(t))} instead.`);if(this.endIndex){const Ge=this.endIndex.evaluate(e);return t.slice(ke,Ge)}return t.slice(ke)}eachChild(e){e(this.input),e(this.beginIndex),this.endIndex&&e(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const e=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),e]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var Slice$1=Slice;function isComparableType(Oe,e){return Oe==="=="||Oe==="!="?e.kind==="boolean"||e.kind==="string"||e.kind==="number"||e.kind==="null"||e.kind==="value":e.kind==="string"||e.kind==="number"||e.kind==="value"}function eq(Oe,e,t){return e===t}function neq(Oe,e,t){return e!==t}function lt$1(Oe,e,t){return e<t}function gt$1(Oe,e,t){return e>t}function lteq(Oe,e,t){return e<=t}function gteq(Oe,e,t){return e>=t}function eqCollate(Oe,e,t,ke){return ke.compare(e,t)===0}function neqCollate(Oe,e,t,ke){return!eqCollate(Oe,e,t,ke)}function ltCollate(Oe,e,t,ke){return ke.compare(e,t)<0}function gtCollate(Oe,e,t,ke){return ke.compare(e,t)>0}function lteqCollate(Oe,e,t,ke){return ke.compare(e,t)<=0}function gteqCollate(Oe,e,t,ke){return ke.compare(e,t)>=0}function makeComparison(Oe,e,t){const ke=Oe!=="=="&&Oe!=="!=";return class Wf{constructor(Be,je,Ve){this.type=BooleanType,this.lhs=Be,this.rhs=je,this.collator=Ve,this.hasUntypedArgument=Be.type.kind==="value"||je.type.kind==="value"}static parse(Be,je){if(Be.length!==3&&Be.length!==4)return je.error("Expected two or three arguments.");const Ve=Be[0];let Ze=je.parse(Be[1],1,ValueType);if(!Ze)return null;if(!isComparableType(Ve,Ze.type))return je.concat(1).error(`"${Ve}" comparisons are not supported for type '${toString$1(Ze.type)}'.`);let Qe=je.parse(Be[2],2,ValueType);if(!Qe)return null;if(!isComparableType(Ve,Qe.type))return je.concat(2).error(`"${Ve}" comparisons are not supported for type '${toString$1(Qe.type)}'.`);if(Ze.type.kind!==Qe.type.kind&&Ze.type.kind!=="value"&&Qe.type.kind!=="value")return je.error(`Cannot compare types '${toString$1(Ze.type)}' and '${toString$1(Qe.type)}'.`);ke&&(Ze.type.kind==="value"&&Qe.type.kind!=="value"?Ze=new Assertion$1(Qe.type,[Ze]):Ze.type.kind!=="value"&&Qe.type.kind==="value"&&(Qe=new Assertion$1(Ze.type,[Qe])));let en=null;if(Be.length===4){if(Ze.type.kind!=="string"&&Qe.type.kind!=="string"&&Ze.type.kind!=="value"&&Qe.type.kind!=="value")return je.error("Cannot use collator to compare non-string types.");if(en=je.parse(Be[3],3,CollatorType),!en)return null}return new Wf(Ze,Qe,en)}evaluate(Be){const je=this.lhs.evaluate(Be),Ve=this.rhs.evaluate(Be);if(ke&&this.hasUntypedArgument){const Ze=typeOf(je),Qe=typeOf(Ve);if(Ze.kind!==Qe.kind||!(Ze.kind==="string"||Ze.kind==="number"))throw new RuntimeError$1(`Expected arguments for "${Oe}" to be (string, string) or (number, number), but found (${Ze.kind}, ${Qe.kind}) instead.`)}if(this.collator&&!ke&&this.hasUntypedArgument){const Ze=typeOf(je),Qe=typeOf(Ve);if(Ze.kind!=="string"||Qe.kind!=="string")return e(Be,je,Ve)}return this.collator?t(Be,je,Ve,this.collator.evaluate(Be)):e(Be,je,Ve)}eachChild(Be){Be(this.lhs),Be(this.rhs),this.collator&&Be(this.collator)}outputDefined(){return!0}serialize(){const Be=[Oe];return this.eachChild(je=>{Be.push(je.serialize())}),Be}}}const Equals=makeComparison("==",eq,eqCollate),NotEquals=makeComparison("!=",neq,neqCollate),LessThan=makeComparison("<",lt$1,ltCollate),GreaterThan=makeComparison(">",gt$1,gtCollate),LessThanOrEqual=makeComparison("<=",lteq,lteqCollate),GreaterThanOrEqual=makeComparison(">=",gteq,gteqCollate);class NumberFormat{constructor(e,t,ke,Ge,Be,je){this.type=StringType,this.number=e,this.locale=t,this.currency=ke,this.unit=Ge,this.minFractionDigits=Be,this.maxFractionDigits=je}static parse(e,t){if(e.length!==3)return t.error("Expected two arguments.");const ke=t.parse(e[1],1,NumberType);if(!ke)return null;const Ge=e[2];if(typeof Ge!="object"||Array.isArray(Ge))return t.error("NumberFormat options argument must be an object.");let Be=null;if(Ge.locale&&(Be=t.parse(Ge.locale,1,StringType),!Be))return null;let je=null;if(Ge.currency&&(je=t.parse(Ge.currency,1,StringType),!je))return null;let Ve=null;if(Ge.unit&&(Ve=t.parse(Ge.unit,1,StringType),!Ve))return null;let Ze=null;if(Ge["min-fraction-digits"]&&(Ze=t.parse(Ge["min-fraction-digits"],1,NumberType),!Ze))return null;let Qe=null;return Ge["max-fraction-digits"]&&(Qe=t.parse(Ge["max-fraction-digits"],1,NumberType),!Qe)?null:new NumberFormat(ke,Be,je,Ve,Ze,Qe)}evaluate(e){return new Intl.NumberFormat(this.locale?this.locale.evaluate(e):[],{style:this.currency&&"currency"||this.unit&&"unit"||"decimal",currency:this.currency?this.currency.evaluate(e):void 0,unit:this.unit?this.unit.evaluate(e):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(e):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(e):void 0}).format(this.number.evaluate(e))}eachChild(e){e(this.number),this.locale&&e(this.locale),this.currency&&e(this.currency),this.unit&&e(this.unit),this.minFractionDigits&&e(this.minFractionDigits),this.maxFractionDigits&&e(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const e={};return this.locale&&(e.locale=this.locale.serialize()),this.currency&&(e.currency=this.currency.serialize()),this.unit&&(e.unit=this.unit.serialize()),this.minFractionDigits&&(e["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(e["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),e]}}class Length{constructor(e){this.type=NumberType,this.input=e}static parse(e,t){if(e.length!==2)return t.error(`Expected 1 argument, but found ${e.length-1} instead.`);const ke=t.parse(e[1],1);return ke?ke.type.kind!=="array"&&ke.type.kind!=="string"&&ke.type.kind!=="value"?t.error(`Expected argument of type string or array, but found ${toString$1(ke.type)} instead.`):new Length(ke):null}evaluate(e){const t=this.input.evaluate(e);if(typeof t=="string")return t.length;if(Array.isArray(t))return t.length;throw new RuntimeError$1(`Expected value to be of type string or array, but found ${toString$1(typeOf(t))} instead.`)}eachChild(e){e(this.input)}outputDefined(){return!1}serialize(){const e=["length"];return this.eachChild(t=>{e.push(t.serialize())}),e}}var Length$1=Length;const expressions={"==":Equals,"!=":NotEquals,">":GreaterThan,"<":LessThan,">=":GreaterThanOrEqual,"<=":LessThanOrEqual,array:Assertion$1,at:At$1$1,boolean:Assertion$1,case:Case$1,coalesce:Coalesce$1,collator:CollatorExpression,format:FormatExpression,image:ImageExpression,in:In$1,"index-of":IndexOf$1,interpolate:Interpolate$1,"interpolate-hcl":Interpolate$1,"interpolate-lab":Interpolate$1,length:Length$1,let:Let$1,literal:Literal$1,match:Match$1,number:Assertion$1,"number-format":NumberFormat,object:Assertion$1,slice:Slice$1,step:Step$1,string:Assertion$1,"to-boolean":Coercion$1,"to-color":Coercion$1,"to-number":Coercion$1,"to-string":Coercion$1,var:Var$1,within:Within$1};function rgba(Oe,[e,t,ke,Ge]){e=e.evaluate(Oe),t=t.evaluate(Oe),ke=ke.evaluate(Oe);const Be=Ge?Ge.evaluate(Oe):1,je=validateRGBA(e,t,ke,Be);if(je)throw new RuntimeError$1(je);return new Color$1(e/255*Be,t/255*Be,ke/255*Be,Be)}function has(Oe,e){return Oe in e}function get$1(Oe,e){const t=e[Oe];return typeof t>"u"?null:t}function binarySearch(Oe,e,t,ke){for(;t<=ke;){const Ge=t+ke>>1;if(e[Ge]===Oe)return!0;e[Ge]>Oe?ke=Ge-1:t=Ge+1}return!1}function varargs(Oe){return{type:Oe}}CompoundExpression$1.register(expressions,{error:[ErrorType,[StringType],(Oe,[e])=>{throw new RuntimeError$1(e.evaluate(Oe))}],typeof:[StringType,[ValueType],(Oe,[e])=>toString$1(typeOf(e.evaluate(Oe)))],"to-rgba":[array$1(NumberType,4),[ColorType],(Oe,[e])=>e.evaluate(Oe).toArray()],rgb:[ColorType,[NumberType,NumberType,NumberType],rgba],rgba:[ColorType,[NumberType,NumberType,NumberType,NumberType],rgba],has:{type:BooleanType,overloads:[[[StringType],(Oe,[e])=>has(e.evaluate(Oe),Oe.properties())],[[StringType,ObjectType],(Oe,[e,t])=>has(e.evaluate(Oe),t.evaluate(Oe))]]},get:{type:ValueType,overloads:[[[StringType],(Oe,[e])=>get$1(e.evaluate(Oe),Oe.properties())],[[StringType,ObjectType],(Oe,[e,t])=>get$1(e.evaluate(Oe),t.evaluate(Oe))]]},"feature-state":[ValueType,[StringType],(Oe,[e])=>get$1(e.evaluate(Oe),Oe.featureState||{})],properties:[ObjectType,[],Oe=>Oe.properties()],"geometry-type":[StringType,[],Oe=>Oe.geometryType()],id:[ValueType,[],Oe=>Oe.id()],zoom:[NumberType,[],Oe=>Oe.globals.zoom],pitch:[NumberType,[],Oe=>Oe.globals.pitch||0],"distance-from-center":[NumberType,[],Oe=>Oe.distanceFromCenter()],"heatmap-density":[NumberType,[],Oe=>Oe.globals.heatmapDensity||0],"line-progress":[NumberType,[],Oe=>Oe.globals.lineProgress||0],"sky-radial-progress":[NumberType,[],Oe=>Oe.globals.skyRadialProgress||0],accumulated:[ValueType,[],Oe=>Oe.globals.accumulated===void 0?null:Oe.globals.accumulated],"+":[NumberType,varargs(NumberType),(Oe,e)=>{let t=0;for(const ke of e)t+=ke.evaluate(Oe);return t}],"*":[NumberType,varargs(NumberType),(Oe,e)=>{let t=1;for(const ke of e)t*=ke.evaluate(Oe);return t}],"-":{type:NumberType,overloads:[[[NumberType,NumberType],(Oe,[e,t])=>e.evaluate(Oe)-t.evaluate(Oe)],[[NumberType],(Oe,[e])=>-e.evaluate(Oe)]]},"/":[NumberType,[NumberType,NumberType],(Oe,[e,t])=>e.evaluate(Oe)/t.evaluate(Oe)],"%":[NumberType,[NumberType,NumberType],(Oe,[e,t])=>e.evaluate(Oe)%t.evaluate(Oe)],ln2:[NumberType,[],()=>Math.LN2],pi:[NumberType,[],()=>Math.PI],e:[NumberType,[],()=>Math.E],"^":[NumberType,[NumberType,NumberType],(Oe,[e,t])=>Math.pow(e.evaluate(Oe),t.evaluate(Oe))],sqrt:[NumberType,[NumberType],(Oe,[e])=>Math.sqrt(e.evaluate(Oe))],log10:[NumberType,[NumberType],(Oe,[e])=>Math.log(e.evaluate(Oe))/Math.LN10],ln:[NumberType,[NumberType],(Oe,[e])=>Math.log(e.evaluate(Oe))],log2:[NumberType,[NumberType],(Oe,[e])=>Math.log(e.evaluate(Oe))/Math.LN2],sin:[NumberType,[NumberType],(Oe,[e])=>Math.sin(e.evaluate(Oe))],cos:[NumberType,[NumberType],(Oe,[e])=>Math.cos(e.evaluate(Oe))],tan:[NumberType,[NumberType],(Oe,[e])=>Math.tan(e.evaluate(Oe))],asin:[NumberType,[NumberType],(Oe,[e])=>Math.asin(e.evaluate(Oe))],acos:[NumberType,[NumberType],(Oe,[e])=>Math.acos(e.evaluate(Oe))],atan:[NumberType,[NumberType],(Oe,[e])=>Math.atan(e.evaluate(Oe))],min:[NumberType,varargs(NumberType),(Oe,e)=>Math.min(...e.map(t=>t.evaluate(Oe)))],max:[NumberType,varargs(NumberType),(Oe,e)=>Math.max(...e.map(t=>t.evaluate(Oe)))],abs:[NumberType,[NumberType],(Oe,[e])=>Math.abs(e.evaluate(Oe))],round:[NumberType,[NumberType],(Oe,[e])=>{const t=e.evaluate(Oe);return t<0?-Math.round(-t):Math.round(t)}],floor:[NumberType,[NumberType],(Oe,[e])=>Math.floor(e.evaluate(Oe))],ceil:[NumberType,[NumberType],(Oe,[e])=>Math.ceil(e.evaluate(Oe))],"filter-==":[BooleanType,[StringType,ValueType],(Oe,[e,t])=>Oe.properties()[e.value]===t.value],"filter-id-==":[BooleanType,[ValueType],(Oe,[e])=>Oe.id()===e.value],"filter-type-==":[BooleanType,[StringType],(Oe,[e])=>Oe.geometryType()===e.value],"filter-<":[BooleanType,[StringType,ValueType],(Oe,[e,t])=>{const ke=Oe.properties()[e.value],Ge=t.value;return typeof ke==typeof Ge&&ke<Ge}],"filter-id-<":[BooleanType,[ValueType],(Oe,[e])=>{const t=Oe.id(),ke=e.value;return typeof t==typeof ke&&t<ke}],"filter->":[BooleanType,[StringType,ValueType],(Oe,[e,t])=>{const ke=Oe.properties()[e.value],Ge=t.value;return typeof ke==typeof Ge&&ke>Ge}],"filter-id->":[BooleanType,[ValueType],(Oe,[e])=>{const t=Oe.id(),ke=e.value;return typeof t==typeof ke&&t>ke}],"filter-<=":[BooleanType,[StringType,ValueType],(Oe,[e,t])=>{const ke=Oe.properties()[e.value],Ge=t.value;return typeof ke==typeof Ge&&ke<=Ge}],"filter-id-<=":[BooleanType,[ValueType],(Oe,[e])=>{const t=Oe.id(),ke=e.value;return typeof t==typeof ke&&t<=ke}],"filter->=":[BooleanType,[StringType,ValueType],(Oe,[e,t])=>{const ke=Oe.properties()[e.value],Ge=t.value;return typeof ke==typeof Ge&&ke>=Ge}],"filter-id->=":[BooleanType,[ValueType],(Oe,[e])=>{const t=Oe.id(),ke=e.value;return typeof t==typeof ke&&t>=ke}],"filter-has":[BooleanType,[ValueType],(Oe,[e])=>e.value in Oe.properties()],"filter-has-id":[BooleanType,[],Oe=>Oe.id()!==null&&Oe.id()!==void 0],"filter-type-in":[BooleanType,[array$1(StringType)],(Oe,[e])=>e.value.indexOf(Oe.geometryType())>=0],"filter-id-in":[BooleanType,[array$1(ValueType)],(Oe,[e])=>e.value.indexOf(Oe.id())>=0],"filter-in-small":[BooleanType,[StringType,array$1(ValueType)],(Oe,[e,t])=>t.value.indexOf(Oe.properties()[e.value])>=0],"filter-in-large":[BooleanType,[StringType,array$1(ValueType)],(Oe,[e,t])=>binarySearch(Oe.properties()[e.value],t.value,0,t.value.length-1)],all:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(Oe,[e,t])=>e.evaluate(Oe)&&t.evaluate(Oe)],[varargs(BooleanType),(Oe,e)=>{for(const t of e)if(!t.evaluate(Oe))return!1;return!0}]]},any:{type:BooleanType,overloads:[[[BooleanType,BooleanType],(Oe,[e,t])=>e.evaluate(Oe)||t.evaluate(Oe)],[varargs(BooleanType),(Oe,e)=>{for(const t of e)if(t.evaluate(Oe))return!0;return!1}]]},"!":[BooleanType,[BooleanType],(Oe,[e])=>!e.evaluate(Oe)],"is-supported-script":[BooleanType,[StringType],(Oe,[e])=>{const t=Oe.globals&&Oe.globals.isSupportedScript;return t?t(e.evaluate(Oe)):!0}],upcase:[StringType,[StringType],(Oe,[e])=>e.evaluate(Oe).toUpperCase()],downcase:[StringType,[StringType],(Oe,[e])=>e.evaluate(Oe).toLowerCase()],concat:[StringType,varargs(ValueType),(Oe,e)=>e.map(t=>toString(t.evaluate(Oe))).join("")],"resolved-locale":[StringType,[CollatorType],(Oe,[e])=>e.evaluate(Oe).resolvedLocale()]});var definitions=expressions;function success(Oe){return{result:"success",value:Oe}}function error(Oe){return{result:"error",value:Oe}}function supportsPropertyExpression(Oe){return Oe["property-type"]==="data-driven"}function supportsZoomExpression(Oe){return!!Oe.expression&&Oe.expression.parameters.indexOf("zoom")>-1}function supportsInterpolation(Oe){return!!Oe.expression&&Oe.expression.interpolated}function isFunction(Oe){return typeof Oe=="object"&&Oe!==null&&!Array.isArray(Oe)}class StyleExpression{constructor(e,t){this.expression=e,this._warningHistory={},this._evaluator=new EvaluationContext$1,this._defaultValue=t?getDefaultValue(t):null,this._enumValues=t&&t.type==="enum"?t.values:null}evaluateWithoutErrorHandling(e,t,ke,Ge,Be,je,Ve,Ze){return this._evaluator.globals=e,this._evaluator.feature=t,this._evaluator.featureState=ke,this._evaluator.canonical=Ge||null,this._evaluator.availableImages=Be||null,this._evaluator.formattedSection=je,this._evaluator.featureTileCoord=Ve||null,this._evaluator.featureDistanceData=Ze||null,this.expression.evaluate(this._evaluator)}evaluate(e,t,ke,Ge,Be,je,Ve,Ze){this._evaluator.globals=e,this._evaluator.feature=t||null,this._evaluator.featureState=ke||null,this._evaluator.canonical=Ge||null,this._evaluator.availableImages=Be||null,this._evaluator.formattedSection=je||null,this._evaluator.featureTileCoord=Ve||null,this._evaluator.featureDistanceData=Ze||null;try{const Qe=this.expression.evaluate(this._evaluator);if(Qe==null||typeof Qe=="number"&&Qe!==Qe)return this._defaultValue;if(this._enumValues&&!(Qe in this._enumValues))throw new RuntimeError$1(`Expected value to be one of ${Object.keys(this._enumValues).map(en=>JSON.stringify(en)).join(", ")}, but found ${JSON.stringify(Qe)} instead.`);return Qe}catch(Qe){return this._warningHistory[Qe.message]||(this._warningHistory[Qe.message]=!0,typeof console<"u"&&console.warn(Qe.message)),this._defaultValue}}}function isExpression(Oe){return Array.isArray(Oe)&&Oe.length>0&&typeof Oe[0]=="string"&&Oe[0]in definitions}function createExpression(Oe,e){const t=new ParsingContext$1(definitions,[],e?getExpectedType(e):void 0),ke=t.parse(Oe,void 0,void 0,void 0,e&&e.type==="string"?{typeAnnotation:"coerce"}:void 0);return ke?success(new StyleExpression(ke,e)):error(t.errors)}class ZoomConstantExpression{constructor(e,t){this.kind=e,this._styleExpression=t,this.isStateDependent=e!=="constant"&&!isStateConstant(t.expression)}evaluateWithoutErrorHandling(e,t,ke,Ge,Be,je){return this._styleExpression.evaluateWithoutErrorHandling(e,t,ke,Ge,Be,je)}evaluate(e,t,ke,Ge,Be,je){return this._styleExpression.evaluate(e,t,ke,Ge,Be,je)}}class ZoomDependentExpression{constructor(e,t,ke,Ge){this.kind=e,this.zoomStops=ke,this._styleExpression=t,this.isStateDependent=e!=="camera"&&!isStateConstant(t.expression),this.interpolationType=Ge}evaluateWithoutErrorHandling(e,t,ke,Ge,Be,je){return this._styleExpression.evaluateWithoutErrorHandling(e,t,ke,Ge,Be,je)}evaluate(e,t,ke,Ge,Be,je){return this._styleExpression.evaluate(e,t,ke,Ge,Be,je)}interpolationFactor(e,t,ke){return this.interpolationType?Interpolate$1.interpolationFactor(this.interpolationType,e,t,ke):0}}function createPropertyExpression(Oe,e){if(Oe=createExpression(Oe,e),Oe.result==="error")return Oe;const t=Oe.value.expression,ke=isFeatureConstant(t);if(!ke&&!supportsPropertyExpression(e))return error([new ParsingError$1("","data expressions not supported")]);const Ge=isGlobalPropertyConstant(t,["zoom","pitch","distance-from-center"]);if(!Ge&&!supportsZoomExpression(e))return error([new ParsingError$1("","zoom expressions not supported")]);const Be=findZoomCurve(t);if(!Be&&!Ge)return error([new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(Be instanceof ParsingError$1)return error([Be]);if(Be instanceof Interpolate$1&&!supportsInterpolation(e))return error([new ParsingError$1("",'"interpolate" expressions cannot be used with this property')]);if(!Be)return success(ke?new ZoomConstantExpression("constant",Oe.value):new ZoomConstantExpression("source",Oe.value));const je=Be instanceof Interpolate$1?Be.interpolation:void 0;return success(ke?new ZoomDependentExpression("camera",Oe.value,Be.labels,je):new ZoomDependentExpression("composite",Oe.value,Be.labels,je))}function findZoomCurve(Oe){let e=null;if(Oe instanceof Let$1)e=findZoomCurve(Oe.result);else if(Oe instanceof Coalesce$1){for(const t of Oe.args)if(e=findZoomCurve(t),e)break}else(Oe instanceof Step$1||Oe instanceof Interpolate$1)&&Oe.input instanceof CompoundExpression$1&&Oe.input.name==="zoom"&&(e=Oe);return e instanceof ParsingError$1||Oe.eachChild(t=>{const ke=findZoomCurve(t);ke instanceof ParsingError$1?e=ke:!e&&ke?e=new ParsingError$1("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&ke&&e!==ke&&(e=new ParsingError$1("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),e}function getExpectedType(Oe){const e={color:ColorType,string:StringType,number:NumberType,enum:StringType,boolean:BooleanType,formatted:FormattedType,resolvedImage:ResolvedImageType};return Oe.type==="array"?array$1(e[Oe.value]||ValueType,Oe.length):e[Oe.type]}function getDefaultValue(Oe){return Oe.type==="color"&&(isFunction(Oe.default)||Array.isArray(Oe.default))?new Color$1(0,0,0,0):Oe.type==="color"?Color$1.parse(Oe.default)||null:Oe.default===void 0?null:Oe.default}function unbundle(Oe){return Oe instanceof Number||Oe instanceof String||Oe instanceof Boolean?Oe.valueOf():Oe}function deepUnbundle(Oe){if(Array.isArray(Oe))return Oe.map(deepUnbundle);if(Oe instanceof Object&&!(Oe instanceof Number||Oe instanceof String||Oe instanceof Boolean)){const e={};for(const t in Oe)e[t]=deepUnbundle(Oe[t]);return e}return unbundle(Oe)}var spec={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"},"fill-extrusion-edge-radius":{type:"number",private:!0,default:0,minimum:0,maximum:1,"property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant",type:"number",private:!0,default:0,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant",type:"number",private:!0,default:3,minimum:0,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["fill-extrusion-edge-radius"]}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!1,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function isExpressionFilter(Oe){if(Oe===!0||Oe===!1)return!0;if(!Array.isArray(Oe)||Oe.length===0)return!1;switch(Oe[0]){case"has":return Oe.length>=2&&Oe[1]!=="$id"&&Oe[1]!=="$type";case"in":return Oe.length>=3&&(typeof Oe[1]!="string"||Array.isArray(Oe[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return Oe.length!==3||Array.isArray(Oe[1])||Array.isArray(Oe[2]);case"any":case"all":for(const e of Oe.slice(1))if(!isExpressionFilter(e)&&typeof e!="boolean")return!1;return!0;default:return!0}}function createFilter(Oe,e="fill"){if(Oe==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};isExpressionFilter(Oe)||(Oe=convertFilter(Oe));const t=Oe;let ke=!0;try{ke=extractStaticFilter(t)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(t,null,2)}
        `)}const Ge=spec[`filter_${e}`],Be=createExpression(ke,Ge);let je=null;if(Be.result==="error")throw new Error(Be.value.map(en=>`${en.key}: ${en.message}`).join(", "));je=(en,tn,an)=>Be.value.evaluate(en,tn,{},an);let Ve=null,Ze=null;if(ke!==t){const en=createExpression(t,Ge);if(en.result==="error")throw new Error(en.value.map(tn=>`${tn.key}: ${tn.message}`).join(", "));Ve=(tn,an,cn,un,dn)=>en.value.evaluate(tn,an,{},cn,void 0,void 0,un,dn),Ze=!isFeatureConstant(en.value.expression)}je=je;const Qe=geometryNeeded(ke);return{filter:je,dynamicFilter:Ve||void 0,needGeometry:Qe,needFeature:!!Ze}}function extractStaticFilter(Oe){if(!isDynamicFilter(Oe))return Oe;let e=deepUnbundle(Oe);return unionDynamicBranches(e),e=collapseDynamicBooleanExpressions(e),e}function collapseDynamicBooleanExpressions(Oe){if(!Array.isArray(Oe))return Oe;const e=collapsedExpression(Oe);return e===!0?e:e.map(t=>collapseDynamicBooleanExpressions(t))}function unionDynamicBranches(Oe){let e=!1;const t=[];if(Oe[0]==="case"){for(let ke=1;ke<Oe.length-1;ke+=2)e=e||isDynamicFilter(Oe[ke]),t.push(Oe[ke+1]);t.push(Oe[Oe.length-1])}else if(Oe[0]==="match"){e=e||isDynamicFilter(Oe[1]);for(let ke=2;ke<Oe.length-1;ke+=2)t.push(Oe[ke+1]);t.push(Oe[Oe.length-1])}else if(Oe[0]==="step"){e=e||isDynamicFilter(Oe[1]);for(let ke=1;ke<Oe.length-1;ke+=2)t.push(Oe[ke+1])}e&&(Oe.length=0,Oe.push("any",...t));for(let ke=1;ke<Oe.length;ke++)unionDynamicBranches(Oe[ke])}function isDynamicFilter(Oe){if(!Array.isArray(Oe))return!1;if(isRootExpressionDynamic(Oe[0]))return!0;for(let e=1;e<Oe.length;e++){const t=Oe[e];if(isDynamicFilter(t))return!0}return!1}function isRootExpressionDynamic(Oe){return Oe==="pitch"||Oe==="distance-from-center"}const dynamicConditionExpressions=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function collapsedExpression(Oe){if(dynamicConditionExpressions.has(Oe[0]))for(let e=1;e<Oe.length;e++){const t=Oe[e];if(isDynamicFilter(t))return!0}return Oe}function compare(Oe,e){return Oe<e?-1:Oe>e?1:0}function geometryNeeded(Oe){if(!Array.isArray(Oe))return!1;if(Oe[0]==="within")return!0;for(let e=1;e<Oe.length;e++)if(geometryNeeded(Oe[e]))return!0;return!1}function convertFilter(Oe){if(!Oe)return!0;const e=Oe[0];return Oe.length<=1?e!=="any":e==="=="?convertComparisonOp(Oe[1],Oe[2],"=="):e==="!="?convertNegation(convertComparisonOp(Oe[1],Oe[2],"==")):e==="<"||e===">"||e==="<="||e===">="?convertComparisonOp(Oe[1],Oe[2],e):e==="any"?convertDisjunctionOp(Oe.slice(1)):e==="all"?["all"].concat(Oe.slice(1).map(convertFilter)):e==="none"?["all"].concat(Oe.slice(1).map(convertFilter).map(convertNegation)):e==="in"?convertInOp(Oe[1],Oe.slice(2)):e==="!in"?convertNegation(convertInOp(Oe[1],Oe.slice(2))):e==="has"?convertHasOp(Oe[1]):e==="!has"?convertNegation(convertHasOp(Oe[1])):e==="within"?Oe:!0}function convertComparisonOp(Oe,e,t){switch(Oe){case"$type":return[`filter-type-${t}`,e];case"$id":return[`filter-id-${t}`,e];default:return[`filter-${t}`,Oe,e]}}function convertDisjunctionOp(Oe){return["any"].concat(Oe.map(convertFilter))}function convertInOp(Oe,e){if(e.length===0)return!1;switch(Oe){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some(t=>typeof t!=typeof e[0])?["filter-in-large",Oe,["literal",e.sort(compare)]]:["filter-in-small",Oe,["literal",e]]}}function convertHasOp(Oe){switch(Oe){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",Oe]}}function convertNegation(Oe){return["!",Oe]}var refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function deref(Oe,e){const t={};for(const ke in Oe)ke!=="ref"&&(t[ke]=Oe[ke]);return refProperties.forEach(ke=>{ke in e&&(t[ke]=e[ke])}),t}function derefLayers(Oe){Oe=Oe.slice();const e=Object.create(null);for(let t=0;t<Oe.length;t++)e[Oe[t].id]=Oe[t];for(let t=0;t<Oe.length;t++)"ref"in Oe[t]&&(Oe[t]=deref(Oe[t],e[Oe[t].ref]));return Oe}var fontWeights={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},sp=" ",italicRE=/(italic|oblique)$/i,fontCache={},mapboxToCssFont=function(Oe,e,t){var ke=fontCache[Oe];if(!ke){Array.isArray(Oe)||(Oe=[Oe]);for(var Ge=400,Be="normal",je=[],Ve,Ze,Qe=0,en=Oe.length;Qe<en;++Qe){var tn=Oe[Qe],an=tn.split(" "),cn=an[an.length-1].toLowerCase();cn=="normal"||cn=="italic"||cn=="oblique"?(Be=Ze?Be:cn,Ze=!0,an.pop(),cn=an[an.length-1].toLowerCase()):italicRE.test(cn)&&(cn=cn.replace(italicRE,""),Be=Ze?Be:an[an.length-1].replace(cn,""),Ze=!0);for(var un in fontWeights){var dn=an.length>1?an[an.length-2].toLowerCase():"";if(cn==un||cn==un.replace("-","")||dn+"-"+cn==un){Ge=Ve?Ge:fontWeights[un],an.pop(),dn&&un.startsWith(dn)&&an.pop();break}}!Ve&&typeof cn=="number"&&(Ge=cn,Ve=!0);var fn=an.join(sp).replace("Klokantech Noto Sans","Noto Sans");fn.indexOf(sp)!==-1&&(fn='"'+fn+'"'),je.push(fn)}ke=fontCache[Oe]=[Be,Ge,je]}return ke[0]+sp+ke[1]+sp+e+"px"+(t?"/"+t:"")+sp+ke[2]},mb2css=getDefaultExportFromCjs(mapboxToCssFont);const mapboxBaseUrl="https://api.mapbox.com";function getMapboxPath(Oe){const e="mapbox://";return Oe.indexOf(e)!==0?"":Oe.slice(e.length)}function normalizeSpriteUrl(Oe,e,t){const ke=getMapboxPath(Oe);if(!ke)return decodeURI(new URL(Oe,t).href);const Ge="sprites/";if(ke.indexOf(Ge)!==0)throw new Error(`unexpected sprites url: ${Oe}`);const Be=ke.slice(Ge.length);return`${mapboxBaseUrl}/styles/v1/${Be}/sprite?access_token=${e}`}function normalizeStyleUrl(Oe,e){const t=getMapboxPath(Oe);if(!t)return decodeURI(new URL(Oe,location.href).href);const ke="styles/";if(t.indexOf(ke)!==0)throw new Error(`unexpected style url: ${Oe}`);const Ge=t.slice(ke.length);return`${mapboxBaseUrl}/styles/v1/${Ge}?&access_token=${e}`}const mapboxSubdomains=["a","b","c","d"];function normalizeSourceUrl(Oe,e,t,ke){const Ge=new URL(Oe,ke),Be=getMapboxPath(Oe);if(!Be)return e?(Ge.searchParams.has(t)||Ge.searchParams.set(t,e),[decodeURI(Ge.href)]):[decodeURI(Ge.href)];if(Be==="mapbox.satellite"){const je=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${Be}/{z}/{x}/{y}${je}.webp?access_token=${e}`]}return mapboxSubdomains.map(je=>`https://${je}.tiles.mapbox.com/v4/${Be}/{z}/{x}/{y}.vector.pbf?access_token=${e}`)}const functionCacheByStyleId={},filterCacheByStyleId={};let styleId=0;function getStyleId(Oe){return Oe.id||(Oe.id=styleId++),Oe.id}function getStyleFunctionKey(Oe,e){return getStyleId(Oe)+"."+getUid(e)}function getFunctionCache(Oe){let e=functionCacheByStyleId[Oe.id];return e||(e={},functionCacheByStyleId[getStyleId(Oe)]=e),e}function getFilterCache(Oe){let e=filterCacheByStyleId[Oe.id];return e||(e={},filterCacheByStyleId[getStyleId(Oe)]=e),e}function deg2rad(Oe){return Oe*Math.PI/180}const defaultResolutions=function(){const Oe=[];for(let e=78271.51696402048;Oe.length<=24;e/=2)Oe.push(e);return Oe}();function createCanvas(Oe,e){if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof OffscreenCanvas<"u")return new OffscreenCanvas(Oe,e);const t=document.createElement("canvas");return t.width=Oe,t.height=e,t}function getZoomForResolution(Oe,e){let t=0;const ke=e.length;for(;t<ke;++t)if(e[t]<Oe&&t+1<ke){const Be=e[t]/e[t+1];return t+Math.log(e[t]/Oe)/Math.log(Be)}return ke-1}function getResolutionForZoom(Oe,e){const t=Math.floor(Oe),ke=Math.pow(2,Oe-t);return e[t]/ke}const pendingRequests={};function fetchResource(Oe,e,t={},ke){if(e in pendingRequests)return ke&&(ke.request=pendingRequests[e][0]),pendingRequests[e][1];const Ge=t.transformRequest&&t.transformRequest(e,Oe)||e,Be=toPromise(()=>Ge).then(je=>(je instanceof Request||(je=new Request(je)),je.headers.get("Accept")||je.headers.set("Accept","application/json"),ke&&(ke.request=je),fetch(je).then(function(Ve){return delete pendingRequests[e],Ve.ok?Ve.json():Promise.reject(new Error("Error fetching source "+e))}).catch(function(Ve){return delete pendingRequests[e],Promise.reject(new Error("Error fetching source "+e))})));return pendingRequests[e]=[Ge,Be],Be}function getGlStyle(Oe,e){if(typeof Oe=="string")if(Oe.trim().startsWith("{"))try{const t=JSON.parse(Oe);return Promise.resolve(t)}catch(t){return Promise.reject(t)}else return Oe=normalizeStyleUrl(Oe,e.accessToken),fetchResource("Style",Oe,e);else return Promise.resolve(Oe)}const tilejsonCache={};function getTileJson(Oe,e,t={}){const ke=[e,JSON.stringify(Oe)].toString();let Ge=tilejsonCache[ke];if(!Ge||t.transformRequest){let Be;t.transformRequest&&(Be=(Ve,Ze)=>{const Qe=t.transformRequest&&t.transformRequest(Ze,"Tiles")||Ze;if(Ve instanceof VectorTile$1)Ve.setLoader((en,tn,an)=>{toPromise(()=>Qe).then(cn=>{fetch(cn).then(un=>un.arrayBuffer()).then(un=>{const fn=Ve.getFormat().readFeatures(un,{extent:en,featureProjection:an});Ve.setFeatures(fn)}).catch(un=>Ve.setState(TileState.ERROR))})});else{const en=Ve.getImage();toPromise(()=>Qe).then(tn=>{tn instanceof Request?fetch(tn).then(an=>an.blob()).then(an=>{const cn=URL.createObjectURL(an);en.addEventListener("load",()=>URL.revokeObjectURL(cn)),en.addEventListener("error",()=>URL.revokeObjectURL(cn)),en.src=cn}).catch(an=>Ve.setState(TileState.ERROR)):en.src=tn})}});const je=Oe.url;if(je&&!Oe.tiles){const Ve=normalizeSourceUrl(je,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(je.startsWith("mapbox://"))Ge=Promise.resolve({tileJson:Object.assign({},Oe,{url:void 0,tiles:Ve}),tileLoadFunction:Be});else{const Ze={};Ge=fetchResource("Source",Ve[0],t,Ze).then(function(Qe){return Qe.tiles=Qe.tiles.map(function(en){return Qe.scheme==="tms"&&(en=en.replace("{y}","{-y}")),normalizeSourceUrl(en,t.accessToken,t.accessTokenParam||"access_token",Ze.request.url)[0]}),Promise.resolve({tileJson:Qe,tileLoadFunction:Be})})}}else Oe=Object.assign({},Oe,{tiles:Oe.tiles.map(function(Ve){return Oe.scheme==="tms"&&(Ve=Ve.replace("{y}","{-y}")),normalizeSourceUrl(Ve,t.accessToken,t.accessTokenParam||"access_token",e||location.href)[0]})}),Ge=Promise.resolve({tileJson:Object.assign({},Oe),tileLoadFunction:Be});tilejsonCache[ke]=Ge}return Ge}function drawIconHalo(Oe,e,t,ke){const Ge=[2*t*e.pixelRatio+e.width,2*t*e.pixelRatio+e.height],Be=createCanvas(Ge[0],Ge[1]),je=Be.getContext("2d");je.drawImage(Oe,e.x,e.y,e.width,e.height,t*e.pixelRatio,t*e.pixelRatio,e.width,e.height);const Ve=je.getImageData(0,0,Ge[0],Ge[1]);je.globalCompositeOperation="destination-over",je.fillStyle=`rgba(${ke.r*255},${ke.g*255},${ke.b*255},${ke.a})`;const Ze=Ve.data;for(let Qe=0,en=Ve.width;Qe<en;++Qe)for(let tn=0,an=Ve.height;tn<an;++tn){const cn=(tn*en+Qe)*4;Ze[cn+3]>0&&je.arc(Qe,tn,t*e.pixelRatio,0,2*Math.PI)}return je.fill(),Be}function smoothstep(Oe,e,t){const ke=Math.max(0,Math.min(1,(t-Oe)/(e-Oe)));return ke*ke*(3-2*ke)}function drawSDF(Oe,e,t){const ke=createCanvas(e.width,e.height),Ge=ke.getContext("2d");Ge.drawImage(Oe,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const Be=Ge.getImageData(0,0,e.width,e.height),je=Be.data;for(let Ve=0,Ze=Be.width;Ve<Ze;++Ve)for(let Qe=0,en=Be.height;Qe<en;++Qe){const tn=(Qe*Ze+Ve)*4,an=je[tn+3]/255,cn=.75,un=.1,dn=smoothstep(cn-un,cn+un,an);dn>0?(je[tn+0]=Math.round(255*t.r*dn),je[tn+1]=Math.round(255*t.g*dn),je[tn+2]=Math.round(255*t.b*dn),je[tn+3]=Math.round(255*dn)):je[tn+3]=0}return Ge.putImageData(Be,0,0),ke}const hairSpacePool=Array(256).join(" ");function applyLetterSpacing(Oe,e){if(e>=.05){let t="";const ke=Oe.split(`
`),Ge=hairSpacePool.slice(0,Math.round(e/.1));for(let Be=0,je=ke.length;Be<je;++Be)Be>0&&(t+=`
`),t+=ke[Be].split("").join(Ge);return t}return Oe}let measureContext;function getMeasureContext(){return measureContext||(measureContext=createCanvas(1,1).getContext("2d")),measureContext}function measureText(Oe,e){return getMeasureContext().measureText(Oe).width+(Oe.length-1)*e}const measureCache={};function wrapText(Oe,e,t,ke){if(Oe.indexOf(`
`)!==-1){const je=Oe.split(`
`),Ve=[];for(let Ze=0,Qe=je.length;Ze<Qe;++Ze)Ve.push(wrapText(je[Ze],e,t,ke));return Ve.join(`
`)}const Ge=t+","+e+","+Oe+","+ke;let Be=measureCache[Ge];if(!Be){const je=Oe.split(" ");if(je.length>1){const Ve=getMeasureContext();Ve.font=e;const Qe=Ve.measureText("M").width*t;let en="";const tn=[];for(let an=0,cn=je.length;an<cn;++an){const un=je[an],dn=en+(en?" ":"")+un;measureText(dn,ke)<=Qe?en=dn:(en&&tn.push(en),en=un)}en&&tn.push(en);for(let an=0,cn=tn.length;an<cn&&cn>1;++an){const un=tn[an];if(measureText(un,ke)<Qe*.35){const dn=an>0?measureText(tn[an-1],ke):1/0,fn=an<cn-1?measureText(tn[an+1],ke):1/0;tn.splice(an,1),cn-=1,dn<fn?(tn[an-1]+=" "+un,an-=1):tn[an]=un+" "+tn[an]}}for(let an=0,cn=tn.length-1;an<cn;++an){const un=tn[an],dn=tn[an+1];if(measureText(un,ke)>Qe*.7&&measureText(dn,ke)<Qe*.6){const fn=un.split(" "),pn=fn.pop();measureText(pn,ke)<Qe*.2&&(tn[an]=fn.join(" "),tn[an+1]=pn+" "+dn),cn-=1}}Be=tn.join(`
`)}else Be=Oe;Be=applyLetterSpacing(Be,ke),measureCache[Ge]=Be}return Be}const fontFamilyRegEx=/font-family: ?([^;]*);/,stripQuotesRegEx=/("|')/g;let loadedFontFamilies;function hasFontFamily(Oe){if(!loadedFontFamilies){loadedFontFamilies={};const e=document.styleSheets;for(let t=0,ke=e.length;t<ke;++t){const Ge=e[t];try{const Be=Ge.rules||Ge.cssRules;if(Be)for(let je=0,Ve=Be.length;je<Ve;++je){const Ze=Be[je];if(Ze.type==5){const Qe=Ze.cssText.match(fontFamilyRegEx);loadedFontFamilies[Qe[1].replace(stripQuotesRegEx,"")]=!0}}}catch{}}}return Oe in loadedFontFamilies}const processedFontFamilies={};function getFonts(Oe,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const t=Oe.toString();if(t in processedFontFamilies)return processedFontFamilies[t];const ke=[];for(let Ge=0,Be=Oe.length;Ge<Be;++Ge){Oe[Ge]=Oe[Ge].replace("Arial Unicode MS","Arial");const je=Oe[Ge],Ve=mb2css(je,1);registerFont(Ve);const Ze=Ve.split(" ");ke.push([Ze.slice(3).join(" ").replace(/"/g,""),Ze[1],Ze[0]])}for(let Ge=0,Be=ke.length;Ge<Be;++Ge){const je=ke[Ge],Ve=je[0];if(!hasFontFamily(Ve)&&checkedFonts.get(`${je[2]}
${je[1]} 
${Ve}`)!==100){const Ze=e.replace("{font-family}",Ve.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",Ve.replace(/ /g,"+")).replace("{fontweight}",je[1]).replace("{-fontstyle}",je[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",je[2]);if(!document.querySelector('link[href="'+Ze+'"]')){const Qe=document.createElement("link");Qe.href=Ze,Qe.rel="stylesheet",document.head.appendChild(Qe)}}}return processedFontFamilies[t]=Oe,Oe}const types={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},anchor={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},expressionData=function(Oe,e){const t=createPropertyExpression(Oe,e);if(t.result==="error")throw new Error(t.value.map(ke=>`${ke.key}: ${ke.message}`).join(", "));return t.value},emptyObj$1={},zoomObj={zoom:0};let renderFeatureCoordinates,renderFeature;function getValue(Oe,e,t,ke,Ge,Be,je){const Ve=Oe.id;Be||(Be={},console.warn("No functionCache provided to getValue()")),Be[Ve]||(Be[Ve]={});const Ze=Be[Ve];if(!Ze[t]){let Qe=(Oe[e]||emptyObj$1)[t];const en=spec[`${e}_${Oe.type}`][t];Qe===void 0&&(Qe=en.default);let tn=isExpression(Qe);if(!tn&&isFunction(Qe)&&(Qe=convertFunction(Qe,en),tn=!0),tn){const an=expressionData(Qe,en);Ze[t]=an.evaluate.bind(an)}else en.type=="color"&&(Qe=Color$1.parse(Qe)),Ze[t]=function(){return Qe}}return zoomObj.zoom=ke,Ze[t](zoomObj,Ge,je)}function getDeclutterMode(Oe,e,t,ke,Ge){return getValue(Oe,"layout",`${ke}-allow-overlap`,e,t,Ge)?getValue(Oe,"layout",`${ke}-ignore-placement`,e,t,Ge)?"none":"obstacle":"declutter"}function evaluateFilter(Oe,e,t,ke,Ge){return Ge||console.warn("No filterCache provided to evaluateFilter()"),Oe in Ge||(Ge[Oe]=createFilter(e).filter),zoomObj.zoom=ke,Ge[Oe](zoomObj,t)}function colorWithOpacity(Oe,e){if(Oe){if(Oe.a===0||e===0)return;const t=Oe.a;return e=e===void 0?1:e,t===0?"transparent":"rgba("+Math.round(Oe.r*255/t)+","+Math.round(Oe.g*255/t)+","+Math.round(Oe.b*255/t)+","+t*e+")"}return Oe}const templateRegEx=/\{[^{}}]*\}/g;function fromTemplate(Oe,e){return Oe.replace(templateRegEx,function(t){return e[t.slice(1,-1)]||""})}const styleFunctionArgs={};function stylefunction(Oe,e,t,ke=defaultResolutions,Ge=void 0,Be=void 0,je=void 0,Ve=void 0){if(typeof e=="string"&&(e=JSON.parse(e)),e.version!=8)throw new Error("glStyle version 8 required.");styleFunctionArgs[getStyleFunctionKey(e,Oe)]=Array.from(arguments);let Ze,Qe,en;if(Be){if(typeof Image<"u"){const wn=new Image;let bn;toPromise(()=>Be).then(Mn=>{Mn instanceof Request?fetch(Mn).then(Pn=>Pn.blob()).then(Pn=>{bn=URL.createObjectURL(Pn),wn.src=bn}).catch(()=>{}):(wn.crossOrigin="anonymous",wn.src=Mn,bn&&URL.revokeObjectURL(bn))}),wn.onload=function(){Ze=wn,Qe=[wn.width,wn.height],Oe.changed(),wn.onload=null}}else if(typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope){const wn=self;wn.postMessage({action:"loadImage",src:Be}),wn.addEventListener("message",function(Mn){Mn.data.action==="imageLoaded"&&Mn.data.src===Be&&(Ze=Mn.data.image,Qe=[Ze.width,Ze.height])})}}const tn=derefLayers(e.layers),an={},cn=[],un={},dn={},fn=getFunctionCache(e),pn=getFilterCache(e);let gn;for(let wn=0,bn=tn.length;wn<bn;++wn){const Mn=tn[wn],Pn=Mn.id;if(typeof t=="string"&&Mn.source==t||Array.isArray(t)&&t.indexOf(Pn)!==-1){const En=Mn["source-layer"];if(gn){if(Mn.source!==gn)throw new Error(`Layer "${Pn}" does not use source "${gn}`)}else{gn=Mn.source;const Rn=e.sources[gn];if(!Rn)throw new Error(`Source "${gn}" is not defined`);const Tn=Rn.type;if(Tn!=="vector"&&Tn!=="geojson")throw new Error(`Source "${gn}" is not of type "vector" or "geojson", but "${Tn}"`)}let Cn=an[En];Cn||(Cn=[],an[En]=Cn),Cn.push({layer:Mn,index:wn}),cn.push(Pn)}}const yn=new Stroke,vn=new Fill,An=[],xn=function(wn,bn,Mn){const Pn=wn.getProperties(),En=an[Pn.layer];if(!En)return;let Cn=ke.indexOf(bn);Cn==-1&&(Cn=getZoomForResolution(bn,ke));const Rn=types[wn.getGeometry().getType()],Tn={id:wn.getId(),properties:Pn,type:Rn},Nn=Oe.get("mapbox-featurestate")[wn.getId()];let Gn=-1;for(let zn=0,$n=En.length;zn<$n;++zn){const Qn=En[zn],Hn=Qn.layer,Ni=Hn.id;if(Mn!==void 0&&Mn!==Ni)continue;const On=Hn.layout||emptyObj$1,qn=Hn.paint||emptyObj$1;if(On.visibility==="none"||"minzoom"in Hn&&Cn<Hn.minzoom||"maxzoom"in Hn&&Cn>=Hn.maxzoom)continue;const Un=Hn.filter;if(!Un||evaluateFilter(Ni,Un,Tn,Cn,pn)){let Ci,Si,_i,Ii,Li,Ri;const tr=Qn.index;if(Rn==3&&(Hn.type=="fill"||Hn.type=="fill-extrusion"))if(Si=getValue(Hn,"paint",Hn.type+"-opacity",Cn,Tn,fn,Nn),Hn.type+"-pattern"in qn){const Mi=getValue(Hn,"paint",Hn.type+"-pattern",Cn,Tn,fn,Nn);if(Mi){const Oi=typeof Mi=="string"?fromTemplate(Mi,Pn):Mi.toString();if(Ze&&Ge&&Ge[Oi]){++Gn,Ri=An[Gn],(!Ri||!Ri.getFill()||Ri.getStroke()||Ri.getText())&&(Ri=new Style$1({fill:new Fill}),An[Gn]=Ri),_i=Ri.getFill(),Ri.setZIndex(tr);const Xi=Oi+"."+Si;let ar=dn[Xi];if(!ar){const Pr=Ge[Oi],Rr=createCanvas(Pr.width,Pr.height),Us=Rr.getContext("2d");Us.globalAlpha=Si,Us.drawImage(Ze,Pr.x,Pr.y,Pr.width,Pr.height,0,0,Pr.width,Pr.height),ar=Us.createPattern(Rr,"repeat"),dn[Xi]=ar}_i.setColor(ar)}}}else Ci=colorWithOpacity(getValue(Hn,"paint",Hn.type+"-color",Cn,Tn,fn,Nn),Si),Hn.type+"-outline-color"in qn&&(Li=colorWithOpacity(getValue(Hn,"paint",Hn.type+"-outline-color",Cn,Tn,fn,Nn),Si)),Li||(Li=Ci),(Ci||Li)&&(++Gn,Ri=An[Gn],(!Ri||Ci&&!Ri.getFill()||!Ci&&Ri.getFill()||Li&&!Ri.getStroke()||!Li&&Ri.getStroke()||Ri.getText())&&(Ri=new Style$1({fill:Ci?new Fill:void 0,stroke:Li?new Stroke:void 0}),An[Gn]=Ri),Ci&&(_i=Ri.getFill(),_i.setColor(Ci)),Li&&(Ii=Ri.getStroke(),Ii.setColor(Li),Ii.setWidth(.5)),Ri.setZIndex(tr));if(Rn!=1&&Hn.type=="line"){"line-pattern"in qn?Ci=void 0:Ci=colorWithOpacity(getValue(Hn,"paint","line-color",Cn,Tn,fn,Nn),getValue(Hn,"paint","line-opacity",Cn,Tn,fn,Nn));const Mi=getValue(Hn,"paint","line-width",Cn,Tn,fn,Nn);Ci&&Mi>0&&(++Gn,Ri=An[Gn],(!Ri||!Ri.getStroke()||Ri.getFill()||Ri.getText())&&(Ri=new Style$1({stroke:new Stroke}),An[Gn]=Ri),Ii=Ri.getStroke(),Ii.setLineCap(getValue(Hn,"layout","line-cap",Cn,Tn,fn,Nn)),Ii.setLineJoin(getValue(Hn,"layout","line-join",Cn,Tn,fn,Nn)),Ii.setMiterLimit(getValue(Hn,"layout","line-miter-limit",Cn,Tn,fn,Nn)),Ii.setColor(Ci),Ii.setWidth(Mi),Ii.setLineDash(qn["line-dasharray"]?getValue(Hn,"paint","line-dasharray",Cn,Tn,fn,Nn).map(function(Oi){return Oi*Mi}):null),Ri.setZIndex(tr))}let Fr=!1,Bn=null,Ai=0,Kn,Fn,$i;if((Rn==1||Rn==2)&&"icon-image"in On){const Mi=getValue(Hn,"layout","icon-image",Cn,Tn,fn,Nn);if(Mi){Kn=typeof Mi=="string"?fromTemplate(Mi,Pn):Mi.toString();let Oi;const Xi=Ve?Ve(Oe,Kn):void 0;if(Ze&&Ge&&Ge[Kn]||Xi){const ar=getValue(Hn,"layout","icon-rotation-alignment",Cn,Tn,fn,Nn);if(Rn==2){const Pr=wn.getGeometry();if(Pr.getFlatMidpoint||Pr.getFlatMidpoints){const Rr=Pr.getExtent();if(Math.sqrt(Math.max(Math.pow((Rr[2]-Rr[0])/bn,2),Math.pow((Rr[3]-Rr[1])/bn,2)))>150){const Vr=Pr.getType()==="MultiLineString"?Pr.getFlatMidpoints():Pr.getFlatMidpoint();if(renderFeature||(renderFeatureCoordinates=[NaN,NaN],renderFeature=new RenderFeature("Point",renderFeatureCoordinates,[],2,{},void 0)),Oi=renderFeature,renderFeatureCoordinates[0]=Vr[0],renderFeatureCoordinates[1]=Vr[1],getValue(Hn,"layout","symbol-placement",Cn,Tn,fn,Nn)==="line"&&ar==="map"){const Js=Pr.getStride(),fo=Pr.getFlatCoordinates();for(let lo=0,Ks=fo.length-Js;lo<Ks;lo+=Js){const oo=fo[lo],no=fo[lo+1],bo=fo[lo+Js],co=fo[lo+Js+1],Ko=Math.min(oo,bo),aa=Math.max(oo,bo),ho=Vr[0],io=Vr[1],po=(co-no)*(ho-oo)-(bo-oo)*(io-no);if(Math.abs(po)<.001&&ho<=aa&&ho>=Ko){Ai=Math.atan2(no-co,bo-oo);break}}}}}}if(Rn!==2||Oi){const Pr=getValue(Hn,"layout","icon-size",Cn,Tn,fn,Nn),Rr=qn["icon-color"]!==void 0?getValue(Hn,"paint","icon-color",Cn,Tn,fn,Nn):null;if(!Rr||Rr.a!==0){const Us=getValue(Hn,"paint","icon-halo-color",Cn,Tn,fn,Nn),Vr=getValue(Hn,"paint","icon-halo-width",Cn,Tn,fn,Nn);let ro=`${Kn}.${Pr}.${Vr}.${Us}`;if(Rr!==null&&(ro+=`.${Rr}`),Fn=un[ro],!Fn){const Js=getDeclutterMode(Hn,Cn,Tn,"icon",fn);let fo;"icon-offset"in On&&(fo=getValue(Hn,"layout","icon-offset",Cn,Tn,fn,Nn).slice(0),fo[0]*=Pr,fo[1]*=-Pr);let lo=Rr?[Rr.r*255,Rr.g*255,Rr.b*255,Rr.a]:void 0;if(Xi){const Ks={color:lo,rotateWithView:ar==="map",displacement:fo,declutterMode:Js,scale:Pr};typeof Xi=="string"?Ks.src=Xi:(Ks.img=Xi,Ks.imgSize=[Xi.width,Xi.height]),Fn=new Icon(Ks)}else{const Ks=Ge[Kn];let oo,no,bo;Vr?Ks.sdf?(oo=drawIconHalo(drawSDF(Ze,Ks,Rr||[0,0,0,1]),{x:0,y:0,width:Ks.width,height:Ks.height,pixelRatio:Ks.pixelRatio},Vr,Us),lo=void 0):oo=drawIconHalo(Ze,Ks,Vr,Us):(Ks.sdf?(en||(en=drawSDF(Ze,{x:0,y:0,width:Qe[0],height:Qe[1]},{r:1,g:1,b:1})),oo=en):oo=Ze,no=[Ks.width,Ks.height],bo=[Ks.x,Ks.y]),Fn=new Icon({color:lo,img:oo,imgSize:Qe,size:no,offset:bo,rotateWithView:ar==="map",scale:Pr/Ks.pixelRatio,displacement:fo,declutterMode:Js})}un[ro]=Fn}}Fn&&(++Gn,Ri=An[Gn],(!Ri||!Ri.getImage()||Ri.getFill()||Ri.getStroke())&&(Ri=new Style$1,An[Gn]=Ri),Ri.setGeometry(Oi),Fn.setRotation(Ai+deg2rad(getValue(Hn,"layout","icon-rotate",Cn,Tn,fn,Nn))),Fn.setOpacity(getValue(Hn,"paint","icon-opacity",Cn,Tn,fn,Nn)),Fn.setAnchor(anchor[getValue(Hn,"layout","icon-anchor",Cn,Tn,fn,Nn)]),Ri.setImage(Fn),Bn=Ri.getText(),Ri.setText(void 0),Ri.setZIndex(tr),Fr=!0,$i=!1)}else $i=!0}}}if(Rn==1&&Hn.type==="circle"){++Gn,Ri=An[Gn],(!Ri||!Ri.getImage()||Ri.getFill()||Ri.getStroke())&&(Ri=new Style$1,An[Gn]=Ri);const Mi="circle-radius"in qn?getValue(Hn,"paint","circle-radius",Cn,Tn,fn,Nn):5,Oi=colorWithOpacity(getValue(Hn,"paint","circle-stroke-color",Cn,Tn,fn,Nn),getValue(Hn,"paint","circle-stroke-opacity",Cn,Tn,fn,Nn)),Xi=getValue(Hn,"paint","circle-translate",Cn,Tn,fn,Nn),ar=colorWithOpacity(getValue(Hn,"paint","circle-color",Cn,Tn,fn,Nn),getValue(Hn,"paint","circle-opacity",Cn,Tn,fn,Nn)),Pr=getValue(Hn,"paint","circle-stroke-width",Cn,Tn,fn,Nn),Rr=Mi+"."+Oi+"."+ar+"."+Pr+"."+Xi[0]+"."+Xi[1];Fn=un[Rr],Fn||(Fn=new CircleStyle({radius:Mi,displacement:[Xi[0],-Xi[1]],stroke:Oi&&Pr>0?new Stroke({width:Pr,color:Oi}):void 0,fill:ar?new Fill({color:ar}):void 0,declutterMode:"none"}),un[Rr]=Fn),Ri.setImage(Fn),Bn=Ri.getText(),Ri.setText(void 0),Ri.setGeometry(void 0),Ri.setZIndex(tr),Fr=!0}let Hi,Di,zi,Bi,Gi,Ti;if("text-field"in On){Bi=Math.round(getValue(Hn,"layout","text-size",Cn,Tn,fn,Nn));const Mi=getValue(Hn,"layout","text-font",Cn,Tn,fn,Nn);zi=getValue(Hn,"layout","text-line-height",Cn,Tn,fn,Nn),Di=mb2css(je?je(Mi,e.metadata?e.metadata["ol:webfonts"]:void 0):Mi,Bi,zi),Di.includes("sans-serif")||(Di+=",sans-serif"),Gi=getValue(Hn,"layout","text-letter-spacing",Cn,Tn,fn,Nn),Ti=getValue(Hn,"layout","text-max-width",Cn,Tn,fn,Nn);const Oi=getValue(Hn,"layout","text-field",Cn,Tn,fn,Nn);typeof Oi=="object"&&Oi.sections?Oi.sections.length===1?Hi=Oi.toString():Hi=Oi.sections.reduce((Xi,ar,Pr)=>{const Rr=ar.fontStack?ar.fontStack.split(","):Mi,Us=mb2css(je?je(Rr):Rr,Bi*(ar.scale||1),zi);let Vr=ar.text;if(Vr===`
`)return Xi.push(`
`,""),Xi;if(Rn==2)return Xi.push(applyLetterSpacing(Vr,Gi),Us),Xi;Vr=wrapText(Vr,Us,Ti,Gi).split(`
`);for(let ro=0,Js=Vr.length;ro<Js;++ro)ro>0&&Xi.push(`
`,""),Xi.push(Vr[ro],Us);return Xi},[]):Hi=fromTemplate(Oi,Pn).trim(),Si=getValue(Hn,"paint","text-opacity",Cn,Tn,fn,Nn)}if(Hi&&Si&&!$i){Fr||(++Gn,Ri=An[Gn],(!Ri||!Ri.getText()||Ri.getFill()||Ri.getStroke())&&(Ri=new Style$1,An[Gn]=Ri),Ri.setImage(void 0),Ri.setGeometry(void 0));const Mi=getDeclutterMode(Hn,Cn,Tn,"text",fn);Ri.getText()||Ri.setText(Bn),Bn=Ri.getText(),(!Bn||"getDeclutterMode"in Bn&&Bn.getDeclutterMode()!==Mi)&&(Bn=new Text({padding:[2,2,2,2],declutterMode:Mi}),Ri.setText(Bn));const Oi=getValue(Hn,"layout","text-transform",Cn,Tn,fn,Nn);Oi=="uppercase"?Hi=Array.isArray(Hi)?Hi.map((co,Ko)=>Ko%2?co:co.toUpperCase()):Hi.toUpperCase():Oi=="lowercase"&&(Hi=Array.isArray(Hi)?Hi.map((co,Ko)=>Ko%2?co:co.toLowerCase()):Hi.toLowerCase());const Xi=Array.isArray(Hi)?Hi:Rn==2?applyLetterSpacing(Hi,Gi):wrapText(Hi,Di,Ti,Gi);if(Bn.setText(Xi),Bn.setFont(Di),Bn.setRotation(deg2rad(getValue(Hn,"layout","text-rotate",Cn,Tn,fn,Nn))),typeof Bn.setKeepUpright=="function"){const co=getValue(Hn,"layout","text-keep-upright",Cn,Tn,fn,Nn);Bn.setKeepUpright(co)}const ar=getValue(Hn,"layout","text-anchor",Cn,Tn,fn,Nn),Pr=Fr||Rn==1?"point":getValue(Hn,"layout","symbol-placement",Cn,Tn,fn,Nn);let Rr;if(Pr==="line-center"?(Bn.setPlacement("line"),Rr="center"):Bn.setPlacement(Pr),Pr==="line"&&typeof Bn.setRepeat=="function"){const co=getValue(Hn,"layout","symbol-spacing",Cn,Tn,fn,Nn);Bn.setRepeat(co*2)}Bn.setOverflow(Pr==="point");let Us=getValue(Hn,"paint","text-halo-width",Cn,Tn,fn,Nn);const Vr=getValue(Hn,"layout","text-offset",Cn,Tn,fn,Nn),ro=getValue(Hn,"paint","text-translate",Cn,Tn,fn,Nn);let Js=0,fo=0;if(Pr=="point"){Rr="center",ar.indexOf("left")!==-1?(Rr="left",fo=Us):ar.indexOf("right")!==-1&&(Rr="right",fo=-Us);const co=getValue(Hn,"layout","text-rotation-alignment",Cn,Tn,fn,Nn);Bn.setRotateWithView(co=="map")}else Bn.setMaxAngle(deg2rad(getValue(Hn,"layout","text-max-angle",Cn,Tn,fn,Nn))*Hi.length/Xi.length),Bn.setRotateWithView(!1);Bn.setTextAlign(Rr);let lo="middle";ar.indexOf("bottom")==0?(lo="bottom",Js=-Us-.5*(zi-1)*Bi):ar.indexOf("top")==0&&(lo="top",Js=Us+.5*(zi-1)*Bi),Bn.setTextBaseline(lo);const Ks=getValue(Hn,"layout","text-justify",Cn,Tn,fn,Nn);Bn.setJustify(Ks==="auto"?void 0:Ks),Bn.setOffsetX(Vr[0]*Bi+fo+ro[0]),Bn.setOffsetY(Vr[1]*Bi+Js+ro[1]),vn.setColor(colorWithOpacity(getValue(Hn,"paint","text-color",Cn,Tn,fn,Nn),Si)),Bn.setFill(vn);const oo=colorWithOpacity(getValue(Hn,"paint","text-halo-color",Cn,Tn,fn,Nn),Si);if(oo&&Us>0){yn.setColor(oo),Us*=2;const co=.5*Bi;yn.setWidth(Us<=co?Us:co),Bn.setStroke(yn)}else Bn.setStroke(void 0);const no=getValue(Hn,"layout","text-padding",Cn,Tn,fn,Nn),bo=Bn.getPadding();no!==bo[0]&&(bo[0]=no,bo[1]=no,bo[2]=no,bo[3]=no),Ri.setZIndex(tr)}}}if(Gn>-1)return An.length=Gn+1,An};return Oe.setStyle(xn),Oe.set("mapbox-source",gn),Oe.set("mapbox-layers",cn),Oe.set("mapbox-featurestate",Oe.get("mapbox-featurestate")||{}),xn}function getTileResolutions(Oe,e=512){return Oe.getExtent()?createXYZ({extent:Oe.getExtent(),tileSize:e,maxZoom:22}).getResolutions():defaultResolutions}function completeOptions(Oe,e){return e.accessToken||(e=Object.assign({},e),new URL(Oe).searchParams.forEach((ke,Ge)=>{e.accessToken=ke,e.accessTokenParam=Ge})),e}function applyStyle(Oe,e,t="",ke={},Ge=void 0){let Be,je,Ve,Ze,Qe=!0;return typeof t!="string"&&!Array.isArray(t)?(Ve=t,Ze=Ve.source||Ve.layers,ke=Ve):Ze=t,typeof ke=="string"?(Be=ke,Ve={}):(Be=ke.styleUrl,Ve=ke),Ve.updateSource===!1&&(Qe=!1),Ge||(Ge=Ve.resolutions),!Be&&typeof e=="string"&&!e.trim().startsWith("{")&&(Be=e),Be&&(Be=Be.startsWith("data:")?location.href:normalizeStyleUrl(Be,Ve.accessToken),Ve=completeOptions(Be,Ve)),new Promise(function(en,tn){getGlStyle(e,Ve).then(function(an){if(an.version!=8)return tn(new Error("glStyle version 8 required."));if(!(Oe instanceof VectorLayer||Oe instanceof VectorTileLayer))return tn(new Error("Can only apply to VectorLayer or VectorTileLayer"));const cn=Oe instanceof VectorTileLayer?"vector":"geojson";if(Ze?Array.isArray(Ze)?je=an.layers.find(function(vn){return vn.id===Ze[0]}).source:je=Ze:(je=Object.keys(an.sources).find(function(vn){return an.sources[vn].type===cn}),Ze=je),!je)return tn(new Error(`No ${cn} source found in the glStyle.`));function un(){if(!Qe)return Promise.resolve();if(Oe instanceof VectorTileLayer)return setupVectorSource(an.sources[je],Be,Ve).then(function(wn){const bn=Oe.getSource();bn?wn!==bn&&(bn.setTileUrlFunction(wn.getTileUrlFunction()),typeof bn.setUrls=="function"&&typeof wn.getUrls=="function"&&bn.setUrls(wn.getUrls()),bn.format_||(bn.format_=wn.format_),bn.getAttributions()||bn.setAttributions(wn.getAttributions()),bn.getTileLoadFunction()===defaultLoadFunction&&bn.setTileLoadFunction(wn.getTileLoadFunction()),equivalent(bn.getProjection(),wn.getProjection())&&(bn.tileGrid=wn.getTileGrid())):Oe.setSource(wn);const Mn=Oe.getSource().getTileGrid();!isFinite(Oe.getMaxResolution())&&!isFinite(Oe.getMinZoom())&&Mn.getMinZoom()>0&&Oe.setMaxResolution(getResolutionForZoom(Math.max(0,Mn.getMinZoom()-1e-12),Mn.getResolutions()))});const vn=an.sources[je];let An=Oe.getSource();(!An||An.get("mapbox-source")!==vn)&&(An=setupGeoJSONSource(vn,Be,Ve));const xn=Oe.getSource();return xn?An!==xn&&(xn.getAttributions()||xn.setAttributions(An.getAttributions()),xn.format_||(xn.format_=An.getFormat()),xn.url_=An.getUrl()):Oe.setSource(An),Promise.resolve()}let dn,fn,pn,gn;function yn(){if(!gn&&(!an.sprite||fn)){if(Ve.projection&&!Ge){const An=get$3(Ve.projection).getUnits();An!=="m"&&(Ge=defaultResolutions.map(xn=>xn/METERS_PER_UNIT$1[An]))}gn=stylefunction(Oe,an,Ze,Ge,fn,pn,(vn,An=Ve.webfonts)=>getFonts(vn,An),Ve.getImage),Oe.getStyle()?un().then(en).catch(tn):tn(new Error(`Nothing to show for source [${je}]`))}else gn?(Oe.setStyle(gn),un().then(en).catch(tn)):tn(new Error("Something went wrong trying to apply style."))}if(an.sprite){const vn=new URL(normalizeSpriteUrl(an.sprite,Ve.accessToken,Be||location.href));dn=window.devicePixelRatio>=1.5?.5:1;const An=dn==.5?"@2x":"";let xn=vn.origin+vn.pathname+An+".json"+vn.search;new Promise(function(wn,bn){fetchResource("Sprite",xn,Ve).then(wn).catch(function(Mn){xn=vn.origin+vn.pathname+".json"+vn.search,fetchResource("Sprite",xn,Ve).then(wn).catch(bn)})}).then(function(wn){if(wn===void 0&&tn(new Error("No sprites found.")),fn=wn,pn=vn.origin+vn.pathname+An+".png"+vn.search,Ve.transformRequest){const bn=Ve.transformRequest(pn,"SpriteImage")||pn;(bn instanceof Request||bn instanceof Promise)&&(pn=bn)}yn()}).catch(function(wn){tn(new Error(`Sprites cannot be loaded: ${xn}: ${wn.message}`))})}else yn()}).catch(tn)})}function extentFromTileJSON(Oe,e){const t=Oe.bounds;if(t){const ke=fromLonLat([t[0],t[1]],e),Ge=fromLonLat([t[2],t[3]],e);return[ke[0],ke[1],Ge[0],Ge[1]]}return get$3(e).getExtent()}function sourceOptionsFromTileJSON(Oe,e,t){const ke=new TileJSON({tileJSON:e,tileSize:Oe.tileSize||e.tileSize||512}),Ge=ke.getTileJSON(),Be=ke.getTileGrid(),je=get$3(t.projection||"EPSG:3857"),Ve=extentFromTileJSON(Ge,je),Ze=je.getExtent(),Qe=Ge.minzoom||0,en=Ge.maxzoom||22,tn={attributions:ke.getAttributions(),projection:je,tileGrid:new TileGrid({origin:Ze?getTopLeft(Ze):Be.getOrigin(0),extent:Ve||Be.getExtent(),minZoom:Qe,resolutions:getTileResolutions(je,e.tileSize).slice(0,en+1),tileSize:Be.getTileSize(0)})};return Array.isArray(Ge.tiles)?tn.urls=Ge.tiles:tn.url=Ge.tiles,tn}function setupVectorSource(Oe,e,t){return new Promise(function(ke,Ge){getTileJson(Oe,e,t).then(function({tileJson:Be,tileLoadFunction:je}){const Ve=sourceOptionsFromTileJSON(Oe,Be,t);Ve.tileLoadFunction=je,Ve.format=new MVT,ke(new VectorTile(Ve))}).catch(Ge)})}function getBboxTemplate(Oe){return`{bbox-${(Oe?Oe.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function setupGeoJSONSource(Oe,e,t){const ke=t.projection?new GeoJSON$1({dataProjection:t.projection}):new GeoJSON$1,Ge=Oe.data,Be={};if(typeof Ge=="string"){const[Ve]=normalizeSourceUrl(Ge,t.accessToken,t.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(Ve)){const Qe=(tn,an,cn)=>{const un=getBboxTemplate(cn);return Ve.replace(un,`${tn.join(",")}`)},en=new VectorSource({attributions:Oe.attribution,format:ke,loader:(tn,an,cn,un,dn)=>{const fn=typeof Qe=="function"?Qe(tn,an,cn):Qe;fetchResource("GeoJSON",fn,t).then(pn=>{const gn=en.getFormat().readFeatures(pn,{featureProjection:cn});en.addFeatures(gn),un(gn)}).catch(pn=>{en.removeLoadedExtent(tn),dn()})},strategy:bbox});return en.set("mapbox-source",Oe),en}const Ze=new VectorSource({attributions:Oe.attribution,format:ke,url:Ve,loader:(Qe,en,tn,an,cn)=>{fetchResource("GeoJSON",Ve,t).then(un=>{const dn=Ze.getFormat().readFeatures(un,{featureProjection:tn});Ze.addFeatures(dn),an(dn)}).catch(un=>{Ze.removeLoadedExtent(Qe),cn()})}});return Ze}Be.features=ke.readFeatures(Ge,{featureProjection:"EPSG:3857"});const je=new VectorSource(Object.assign({attributions:Oe.attribution,format:ke},Be));return je.set("mapbox-source",Oe),je}var LayerMapBox=class extends VectorTileLayer{constructor(e,t){if(!e.layer)throw new Error("ERROR PARAM_MISSING : layer");if(typeof e.layer!="string")throw new Error("ERROR WRONG TYPE : layer");typeof e.ssl>"u"&&(e.ssl=!0);var ke=e.ssl===!1?"http://":"https://",Ge=e.configuration;if(!Ge){if(!Config.isConfigLoaded())throw new Error("ERROR : contract key configuration has to be loaded to load Geoportal layers.");var Be=e.layer+"$GEOPORTAIL:GPP:TMS";if(Ge=Config.configuration.getLayerConf(Be),!Ge)throw new Error("ERROR : Layer ID not found into the catalogue !?")}for(var je=null,Ve="",Ze=e.style,Qe=0;Qe<Ge.styles.length;Qe++){var en=Ge.styles[Qe];if(Ze&&en.name===Ze){je=en.url,Ve=en.title;break}else if(!Ze&&en.current){Ze=en.name,je=en.url,Ve=en.title;break}}if(!je)throw new Error("ERROR : Style URL not found !?");je.replace(/(http|https):\/\//,ke);var tn=new VectorTile({state:"loading",format:new MVT});tn._originators=Ge.originators,tn._legends=Ge.legends,tn._metadata=Ge.metadata,tn._description=Ge.description,tn._title=Ge.title+" ("+Ve+")",tn._quicklookUrl=Ge.quicklookUrl;var an={source:tn};return Helper.mergeParams(an,t),e.olParams&&!Ge.originators&&(tn._originators=e.olParams.attributions),super(an),this.name=e.layer,this.service="TMS",this.protocol=ke,this.sourceId=e.source,this.styleUrl=je,this.config=Ge,this.setStyleMapBox(),this}setStyleMapBox(){var e=this;fetch(this.styleUrl,{credentials:"same-origin"}).then(function(t){t.ok&&t.json().then(function(ke){e.onStyleMapBoxLoad(ke)})}).catch(function(t){e.onStyleMapBoxError(t)})}onStyleMapBoxLoad(e){this.sourceId||(this.sourceId=Object.keys(e.sources)[0]);var t=e.sources[this.sourceId];if(!t){this.onStyleMapBoxError({message:"ERROR : Source ID not found !? !"});return}if(t.type!=="vector"){this.onStyleMapBoxError({message:"ERROR : Source TYPE not permitted !"});return}var ke=this.getSource();if(t.url){t.url.replace(/(http|https):\/\//,this.protocol);var Ge=new TileJSON({url:t.url}),Be=this,je=Ge.on("change",function(){if(Ge.getState()==="ready"){var Ze=Ge.getTileJSON();if(!Ze)return;Be.set("mapbox-extensions",Ze);for(var Qe=Array.isArray(Ze.tiles)?Ze.tiles:[Ze.tiles],en=0;en<t.tiles.length;en++)Qe[en].replace(/(http|https):\/\//,this.protocol);ke.setUrls(Qe),unByKey(je)}})}if(t.tiles){for(var Ve=0;Ve<t.tiles.length;Ve++)t.tiles[Ve].replace(/(http|https):\/\//,this.protocol);ke.setUrls(t.tiles)}applyStyle(this,e,this.sourceId).then(()=>{ke.setState("ready"),this.set("mapbox-styles",e)}).catch(Ze=>{this.onStyleMapBoxError(Ze)})}onStyleMapBoxError(e){var t=this.getSource();t.setState("error"),console.error(e.message)}getConfiguration(){return this.config}getLegends(){return this.getSource()._legends}getMetadata(){return this.getSource()._metadata}getDescription(){return this.getSource()._description}getTitle(){return this.getSource()._title}getQuicklookUrl(){return this.getSource()._quicklookUrl}getOriginators(){return this.getSource()._originators}};window.ol&&window.ol.layer&&(window.ol.layer.GeoportalMapBox=LayerMapBox);const exceptions=["GPoverviewMap","GPfullScreen"];function getSameSideOpenedPanel(Oe,e){var t=[...exceptions,e],ke=[];if(Oe&&Oe.includes("left")){var Ge=document.getElementById("position-container-bottom-left"),Be=document.getElementById("position-container-top-left");ke=[...Ge.children,...Be.children]}if(Oe&&Oe.includes("right")){var je=document.getElementById("position-container-bottom-right"),Ve=document.getElementById("position-container-top-right");ke=[...je.children,...Ve.children]}return ke.filter(Ze=>{var Qe=Ze.id.match(/(\w+)-[0-9]+/)[1],en=t.includes(Qe),tn=Ze.getElementsByTagName("button")[0].getAttribute("aria-pressed");if(tn==="true"&&!en)return Ze})}var PanelManager=function(Oe,e){var t=getSameSideOpenedPanel(Oe,e);t.length>0&&t[0].getElementsByTagName("button")[0].click()},Widget={onPanelOpen:function(){PanelManager(this.options.position,this.element.id.match(/(\w+)-[0-9]+/)[1])}},checkDsfr=function(){var Oe=getComputedStyle(document.documentElement),e=Oe.getPropertyValue("--blue-france-sun-113-625");return e!==""},ControlExtended=class extends Control{constructor(e){e=e||{},super({element:e.element,target:e.target,render:e.render}),e&&e.listable?this.listable=!0:this.listable=!1,e&&e.description?this.description=e.description:this.description=""}setPosition(e){if(this.getMap()){var t=new PositionFactory(this);t.set(e)}}updatePosition(e){if(this.getMap()){var t=new PositionFactory(this);t.update(e)}}};const ANCHORS=["top-left","top-right","bottom-left","bottom-right"];var yc,Yf,Sd,cf;class PositionFactory{constructor(e){Ad(this,yc);return this.caller=e,this.container=null,Gc(this,yc,Sd).call(this,"top-left"),Gc(this,yc,Sd).call(this,"top-right"),Gc(this,yc,Sd).call(this,"bottom-left"),Gc(this,yc,Sd).call(this,"bottom-right"),this}set(e){ANCHORS.includes(e.toLowerCase())&&(Gc(this,yc,cf).call(this,e,!1),e.includes("bottom")?this.container.children["position-container-"+e].prepend(this.caller.element):this.container.children["position-container-"+e].appendChild(this.caller.element))}update(e){ANCHORS.includes(e.toLowerCase())&&Gc(this,yc,cf).call(this,e,!0)}}yc=new WeakSet,Yf=function(e){var t=this.container.children["position-container-"+e];return!!t},Sd=function(e){if(this.container=this.caller.getMap().getOverlayContainerStopEvent(),!Gc(this,yc,Yf).call(this,e)){var t=document.createElement("div");t.id="position-container-"+e,t.className="position position-container-"+e,this.container.appendChild(t)}},cf=function(e,t){var ke=this;const Ge=en=>{var tn=ke.container.children["position-container-"+en];return tn.children.length},Be=en=>{var tn=ke.container.children["position-container-"+en],an=tn.offsetWidth;return an},je=en=>{var tn=ke.container.children["position-container-"+en],an=tn.offsetHeight;if(t){en.includes("top")&&(an=0);for(let cn=0;cn<tn.children.length;cn++){if(tn.children[cn].id===ke.caller.element.id){an=en.includes("bottom")?an-ke.caller.element.offsetHeight:an*-1;break}an-=tn.children[cn].offsetHeight}}return an},Ve=en=>{en.style.top="unset",en.style.bottom="unset",en.style.left="unset",en.style.right="unset"};Ve(this.caller.element),this.caller.element.style.position="unset";var Ze=Array.from(this.caller.element.getElementsByClassName("GPpanel"));if(Ze.length!==0){var Qe=0;Ze.forEach(en=>{if(en.nodeName.toLowerCase()==="dialog"){switch(Ve(en),e.toLowerCase()){case"top-left":checkDsfr()?en.style.top="0px":en.style.top=Ge(e)?je(e)+"px":"0px",en.style.left=Be(e)+Qe+"px";break;case"bottom-left":checkDsfr()?en.style.top="0px":en.style.bottom=Ge(e)?je(e)+"px":"0px",en.style.left=Be(e)+Qe+"px";break;case"top-right":checkDsfr()?en.style.top="0px":en.style.top=Ge(e)?je(e)+"px":"0px",en.style.right=Be(e)+Qe+"px";break;case"bottom-right":checkDsfr()?en.style.top="0px":en.style.bottom=Ge(e)?je(e)+"px":"0px",en.style.right=Be(e)+Qe+"px";break}Qe+=en.offsetWidth}})}};var SelectorID={generate:function(){var Oe=Math.floor(Date.now());return function(){return Oe++}}(),name:function(Oe){var e=null,t=Oe.lastIndexOf("-");return t===-1?e=Oe:e=Oe.substring(0,t),e},index:function(Oe){var e=null,t=this.name(Oe),ke=t.lastIndexOf("_");return ke!==-1&&(e=t.substring(ke+1)),e},uuid:function(Oe){var e=null,t=Oe.lastIndexOf("-");return t!==-1&&(e=parseInt(Oe.substring(t+1),10)),e}};/**!
 * Sortable 1.15.3
 * @author	RubaXa   <trash@rubaxa.org>
 * @author	owenm    <owen23355@gmail.com>
 * @license MIT
 */function ownKeys(Oe,e){var t=Object.keys(Oe);if(Object.getOwnPropertySymbols){var ke=Object.getOwnPropertySymbols(Oe);e&&(ke=ke.filter(function(Ge){return Object.getOwnPropertyDescriptor(Oe,Ge).enumerable})),t.push.apply(t,ke)}return t}function _objectSpread2(Oe){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(t),!0).forEach(function(ke){_defineProperty(Oe,ke,t[ke])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Oe,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(ke){Object.defineProperty(Oe,ke,Object.getOwnPropertyDescriptor(t,ke))})}return Oe}function _typeof$1(Oe){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(e){return typeof e}:_typeof$1=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(Oe)}function _defineProperty(Oe,e,t){return e in Oe?Object.defineProperty(Oe,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):Oe[e]=t,Oe}function _extends(){return _extends=Object.assign||function(Oe){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var ke in t)Object.prototype.hasOwnProperty.call(t,ke)&&(Oe[ke]=t[ke])}return Oe},_extends.apply(this,arguments)}function _objectWithoutPropertiesLoose(Oe,e){if(Oe==null)return{};var t={},ke=Object.keys(Oe),Ge,Be;for(Be=0;Be<ke.length;Be++)Ge=ke[Be],!(e.indexOf(Ge)>=0)&&(t[Ge]=Oe[Ge]);return t}function _objectWithoutProperties(Oe,e){if(Oe==null)return{};var t=_objectWithoutPropertiesLoose(Oe,e),ke,Ge;if(Object.getOwnPropertySymbols){var Be=Object.getOwnPropertySymbols(Oe);for(Ge=0;Ge<Be.length;Ge++)ke=Be[Ge],!(e.indexOf(ke)>=0)&&Object.prototype.propertyIsEnumerable.call(Oe,ke)&&(t[ke]=Oe[ke])}return t}var version="1.15.3";function userAgent(Oe){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(Oe)}var IE11OrLess=userAgent(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Edge=userAgent(/Edge/i),FireFox=userAgent(/firefox/i),Safari=userAgent(/safari/i)&&!userAgent(/chrome/i)&&!userAgent(/android/i),IOS=userAgent(/iP(ad|od|hone)/i),ChromeForAndroid=userAgent(/chrome/i)&&userAgent(/android/i),captureMode={capture:!1,passive:!1};function on(Oe,e,t){Oe.addEventListener(e,t,!IE11OrLess&&captureMode)}function off(Oe,e,t){Oe.removeEventListener(e,t,!IE11OrLess&&captureMode)}function matches(Oe,e){if(e){if(e[0]===">"&&(e=e.substring(1)),Oe)try{if(Oe.matches)return Oe.matches(e);if(Oe.msMatchesSelector)return Oe.msMatchesSelector(e);if(Oe.webkitMatchesSelector)return Oe.webkitMatchesSelector(e)}catch{return!1}return!1}}function getParentOrHost(Oe){return Oe.host&&Oe!==document&&Oe.host.nodeType?Oe.host:Oe.parentNode}function closest(Oe,e,t,ke){if(Oe){t=t||document;do{if(e!=null&&(e[0]===">"?Oe.parentNode===t&&matches(Oe,e):matches(Oe,e))||ke&&Oe===t)return Oe;if(Oe===t)break}while(Oe=getParentOrHost(Oe))}return null}var R_SPACE=/\s+/g;function toggleClass(Oe,e,t){if(Oe&&e)if(Oe.classList)Oe.classList[t?"add":"remove"](e);else{var ke=(" "+Oe.className+" ").replace(R_SPACE," ").replace(" "+e+" "," ");Oe.className=(ke+(t?" "+e:"")).replace(R_SPACE," ")}}function css(Oe,e,t){var ke=Oe&&Oe.style;if(ke){if(t===void 0)return document.defaultView&&document.defaultView.getComputedStyle?t=document.defaultView.getComputedStyle(Oe,""):Oe.currentStyle&&(t=Oe.currentStyle),e===void 0?t:t[e];!(e in ke)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),ke[e]=t+(typeof t=="string"?"":"px")}}function matrix(Oe,e){var t="";if(typeof Oe=="string")t=Oe;else do{var ke=css(Oe,"transform");ke&&ke!=="none"&&(t=ke+" "+t)}while(!e&&(Oe=Oe.parentNode));var Ge=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return Ge&&new Ge(t)}function find(Oe,e,t){if(Oe){var ke=Oe.getElementsByTagName(e),Ge=0,Be=ke.length;if(t)for(;Ge<Be;Ge++)t(ke[Ge],Ge);return ke}return[]}function getWindowScrollingElement(){var Oe=document.scrollingElement;return Oe||document.documentElement}function getRect(Oe,e,t,ke,Ge){if(!(!Oe.getBoundingClientRect&&Oe!==window)){var Be,je,Ve,Ze,Qe,en,tn;if(Oe!==window&&Oe.parentNode&&Oe!==getWindowScrollingElement()?(Be=Oe.getBoundingClientRect(),je=Be.top,Ve=Be.left,Ze=Be.bottom,Qe=Be.right,en=Be.height,tn=Be.width):(je=0,Ve=0,Ze=window.innerHeight,Qe=window.innerWidth,en=window.innerHeight,tn=window.innerWidth),(e||t)&&Oe!==window&&(Ge=Ge||Oe.parentNode,!IE11OrLess))do if(Ge&&Ge.getBoundingClientRect&&(css(Ge,"transform")!=="none"||t&&css(Ge,"position")!=="static")){var an=Ge.getBoundingClientRect();je-=an.top+parseInt(css(Ge,"border-top-width")),Ve-=an.left+parseInt(css(Ge,"border-left-width")),Ze=je+Be.height,Qe=Ve+Be.width;break}while(Ge=Ge.parentNode);if(ke&&Oe!==window){var cn=matrix(Ge||Oe),un=cn&&cn.a,dn=cn&&cn.d;cn&&(je/=dn,Ve/=un,tn/=un,en/=dn,Ze=je+en,Qe=Ve+tn)}return{top:je,left:Ve,bottom:Ze,right:Qe,width:tn,height:en}}}function isScrolledPast(Oe,e,t){for(var ke=getParentAutoScrollElement(Oe,!0),Ge=getRect(Oe)[e];ke;){var Be=getRect(ke)[t],je=void 0;if(je=Ge>=Be,!je)return ke;if(ke===getWindowScrollingElement())break;ke=getParentAutoScrollElement(ke,!1)}return!1}function getChild(Oe,e,t,ke){for(var Ge=0,Be=0,je=Oe.children;Be<je.length;){if(je[Be].style.display!=="none"&&je[Be]!==Sortable.ghost&&(ke||je[Be]!==Sortable.dragged)&&closest(je[Be],t.draggable,Oe,!1)){if(Ge===e)return je[Be];Ge++}Be++}return null}function lastChild(Oe,e){for(var t=Oe.lastElementChild;t&&(t===Sortable.ghost||css(t,"display")==="none"||e&&!matches(t,e));)t=t.previousElementSibling;return t||null}function index(Oe,e){var t=0;if(!Oe||!Oe.parentNode)return-1;for(;Oe=Oe.previousElementSibling;)Oe.nodeName.toUpperCase()!=="TEMPLATE"&&Oe!==Sortable.clone&&(!e||matches(Oe,e))&&t++;return t}function getRelativeScrollOffset(Oe){var e=0,t=0,ke=getWindowScrollingElement();if(Oe)do{var Ge=matrix(Oe),Be=Ge.a,je=Ge.d;e+=Oe.scrollLeft*Be,t+=Oe.scrollTop*je}while(Oe!==ke&&(Oe=Oe.parentNode));return[e,t]}function indexOfObject(Oe,e){for(var t in Oe)if(Oe.hasOwnProperty(t)){for(var ke in e)if(e.hasOwnProperty(ke)&&e[ke]===Oe[t][ke])return Number(t)}return-1}function getParentAutoScrollElement(Oe,e){if(!Oe||!Oe.getBoundingClientRect)return getWindowScrollingElement();var t=Oe,ke=!1;do if(t.clientWidth<t.scrollWidth||t.clientHeight<t.scrollHeight){var Ge=css(t);if(t.clientWidth<t.scrollWidth&&(Ge.overflowX=="auto"||Ge.overflowX=="scroll")||t.clientHeight<t.scrollHeight&&(Ge.overflowY=="auto"||Ge.overflowY=="scroll")){if(!t.getBoundingClientRect||t===document.body)return getWindowScrollingElement();if(ke||e)return t;ke=!0}}while(t=t.parentNode);return getWindowScrollingElement()}function extend$1(Oe,e){if(Oe&&e)for(var t in e)e.hasOwnProperty(t)&&(Oe[t]=e[t]);return Oe}function isRectEqual(Oe,e){return Math.round(Oe.top)===Math.round(e.top)&&Math.round(Oe.left)===Math.round(e.left)&&Math.round(Oe.height)===Math.round(e.height)&&Math.round(Oe.width)===Math.round(e.width)}var _throttleTimeout;function throttle(Oe,e){return function(){if(!_throttleTimeout){var t=arguments,ke=this;t.length===1?Oe.call(ke,t[0]):Oe.apply(ke,t),_throttleTimeout=setTimeout(function(){_throttleTimeout=void 0},e)}}}function cancelThrottle(){clearTimeout(_throttleTimeout),_throttleTimeout=void 0}function scrollBy(Oe,e,t){Oe.scrollLeft+=e,Oe.scrollTop+=t}function clone(Oe){var e=window.Polymer,t=window.jQuery||window.Zepto;return e&&e.dom?e.dom(Oe).cloneNode(!0):t?t(Oe).clone(!0)[0]:Oe.cloneNode(!0)}function getChildContainingRectFromElement(Oe,e,t){var ke={};return Array.from(Oe.children).forEach(function(Ge){var Be,je,Ve,Ze;if(!(!closest(Ge,e.draggable,Oe,!1)||Ge.animated||Ge===t)){var Qe=getRect(Ge);ke.left=Math.min((Be=ke.left)!==null&&Be!==void 0?Be:1/0,Qe.left),ke.top=Math.min((je=ke.top)!==null&&je!==void 0?je:1/0,Qe.top),ke.right=Math.max((Ve=ke.right)!==null&&Ve!==void 0?Ve:-1/0,Qe.right),ke.bottom=Math.max((Ze=ke.bottom)!==null&&Ze!==void 0?Ze:-1/0,Qe.bottom)}}),ke.width=ke.right-ke.left,ke.height=ke.bottom-ke.top,ke.x=ke.left,ke.y=ke.top,ke}var expando="Sortable"+new Date().getTime();function AnimationStateManager(){var Oe=[],e;return{captureAnimationState:function(){if(Oe=[],!!this.options.animation){var ke=[].slice.call(this.el.children);ke.forEach(function(Ge){if(!(css(Ge,"display")==="none"||Ge===Sortable.ghost)){Oe.push({target:Ge,rect:getRect(Ge)});var Be=_objectSpread2({},Oe[Oe.length-1].rect);if(Ge.thisAnimationDuration){var je=matrix(Ge,!0);je&&(Be.top-=je.f,Be.left-=je.e)}Ge.fromRect=Be}})}},addAnimationState:function(ke){Oe.push(ke)},removeAnimationState:function(ke){Oe.splice(indexOfObject(Oe,{target:ke}),1)},animateAll:function(ke){var Ge=this;if(!this.options.animation){clearTimeout(e),typeof ke=="function"&&ke();return}var Be=!1,je=0;Oe.forEach(function(Ve){var Ze=0,Qe=Ve.target,en=Qe.fromRect,tn=getRect(Qe),an=Qe.prevFromRect,cn=Qe.prevToRect,un=Ve.rect,dn=matrix(Qe,!0);dn&&(tn.top-=dn.f,tn.left-=dn.e),Qe.toRect=tn,Qe.thisAnimationDuration&&isRectEqual(an,tn)&&!isRectEqual(en,tn)&&(un.top-tn.top)/(un.left-tn.left)===(en.top-tn.top)/(en.left-tn.left)&&(Ze=calculateRealTime(un,an,cn,Ge.options)),isRectEqual(tn,en)||(Qe.prevFromRect=en,Qe.prevToRect=tn,Ze||(Ze=Ge.options.animation),Ge.animate(Qe,un,tn,Ze)),Ze&&(Be=!0,je=Math.max(je,Ze),clearTimeout(Qe.animationResetTimer),Qe.animationResetTimer=setTimeout(function(){Qe.animationTime=0,Qe.prevFromRect=null,Qe.fromRect=null,Qe.prevToRect=null,Qe.thisAnimationDuration=null},Ze),Qe.thisAnimationDuration=Ze)}),clearTimeout(e),Be?e=setTimeout(function(){typeof ke=="function"&&ke()},je):typeof ke=="function"&&ke(),Oe=[]},animate:function(ke,Ge,Be,je){if(je){css(ke,"transition",""),css(ke,"transform","");var Ve=matrix(this.el),Ze=Ve&&Ve.a,Qe=Ve&&Ve.d,en=(Ge.left-Be.left)/(Ze||1),tn=(Ge.top-Be.top)/(Qe||1);ke.animatingX=!!en,ke.animatingY=!!tn,css(ke,"transform","translate3d("+en+"px,"+tn+"px,0)"),this.forRepaintDummy=repaint(ke),css(ke,"transition","transform "+je+"ms"+(this.options.easing?" "+this.options.easing:"")),css(ke,"transform","translate3d(0,0,0)"),typeof ke.animated=="number"&&clearTimeout(ke.animated),ke.animated=setTimeout(function(){css(ke,"transition",""),css(ke,"transform",""),ke.animated=!1,ke.animatingX=!1,ke.animatingY=!1},je)}}}}function repaint(Oe){return Oe.offsetWidth}function calculateRealTime(Oe,e,t,ke){return Math.sqrt(Math.pow(e.top-Oe.top,2)+Math.pow(e.left-Oe.left,2))/Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))*ke.animation}var plugins=[],defaults={initializeByDefault:!0},PluginManager={mount:function(e){for(var t in defaults)defaults.hasOwnProperty(t)&&!(t in e)&&(e[t]=defaults[t]);plugins.forEach(function(ke){if(ke.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),plugins.push(e)},pluginEvent:function(e,t,ke){var Ge=this;this.eventCanceled=!1,ke.cancel=function(){Ge.eventCanceled=!0};var Be=e+"Global";plugins.forEach(function(je){t[je.pluginName]&&(t[je.pluginName][Be]&&t[je.pluginName][Be](_objectSpread2({sortable:t},ke)),t.options[je.pluginName]&&t[je.pluginName][e]&&t[je.pluginName][e](_objectSpread2({sortable:t},ke)))})},initializePlugins:function(e,t,ke,Ge){plugins.forEach(function(Ve){var Ze=Ve.pluginName;if(!(!e.options[Ze]&&!Ve.initializeByDefault)){var Qe=new Ve(e,t,e.options);Qe.sortable=e,Qe.options=e.options,e[Ze]=Qe,_extends(ke,Qe.defaults)}});for(var Be in e.options)if(e.options.hasOwnProperty(Be)){var je=this.modifyOption(e,Be,e.options[Be]);typeof je<"u"&&(e.options[Be]=je)}},getEventProperties:function(e,t){var ke={};return plugins.forEach(function(Ge){typeof Ge.eventProperties=="function"&&_extends(ke,Ge.eventProperties.call(t[Ge.pluginName],e))}),ke},modifyOption:function(e,t,ke){var Ge;return plugins.forEach(function(Be){e[Be.pluginName]&&Be.optionListeners&&typeof Be.optionListeners[t]=="function"&&(Ge=Be.optionListeners[t].call(e[Be.pluginName],ke))}),Ge}};function dispatchEvent(Oe){var e=Oe.sortable,t=Oe.rootEl,ke=Oe.name,Ge=Oe.targetEl,Be=Oe.cloneEl,je=Oe.toEl,Ve=Oe.fromEl,Ze=Oe.oldIndex,Qe=Oe.newIndex,en=Oe.oldDraggableIndex,tn=Oe.newDraggableIndex,an=Oe.originalEvent,cn=Oe.putSortable,un=Oe.extraEventProperties;if(e=e||t&&t[expando],!!e){var dn,fn=e.options,pn="on"+ke.charAt(0).toUpperCase()+ke.substr(1);window.CustomEvent&&!IE11OrLess&&!Edge?dn=new CustomEvent(ke,{bubbles:!0,cancelable:!0}):(dn=document.createEvent("Event"),dn.initEvent(ke,!0,!0)),dn.to=je||t,dn.from=Ve||t,dn.item=Ge||t,dn.clone=Be,dn.oldIndex=Ze,dn.newIndex=Qe,dn.oldDraggableIndex=en,dn.newDraggableIndex=tn,dn.originalEvent=an,dn.pullMode=cn?cn.lastPutMode:void 0;var gn=_objectSpread2(_objectSpread2({},un),PluginManager.getEventProperties(ke,e));for(var yn in gn)dn[yn]=gn[yn];t&&t.dispatchEvent(dn),fn[pn]&&fn[pn].call(e,dn)}}var _excluded=["evt"],pluginEvent=function(e,t){var ke=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ge=ke.evt,Be=_objectWithoutProperties(ke,_excluded);PluginManager.pluginEvent.bind(Sortable)(e,t,_objectSpread2({dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,dragStarted:moved,putSortable,activeSortable:Sortable.active,originalEvent:Ge,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex,hideGhostForTarget:_hideGhostForTarget,unhideGhostForTarget:_unhideGhostForTarget,cloneNowHidden:function(){cloneHidden=!0},cloneNowShown:function(){cloneHidden=!1},dispatchSortableEvent:function(Ve){_dispatchEvent({sortable:t,name:Ve,originalEvent:Ge})}},Be))};function _dispatchEvent(Oe){dispatchEvent(_objectSpread2({putSortable,cloneEl,targetEl:dragEl,rootEl,oldIndex,oldDraggableIndex,newIndex,newDraggableIndex},Oe))}var dragEl,parentEl,ghostEl,rootEl,nextEl,lastDownEl,cloneEl,cloneHidden,oldIndex,newIndex,oldDraggableIndex,newDraggableIndex,activeGroup,putSortable,awaitingDragStarted=!1,ignoreNextClick=!1,sortables=[],tapEvt,touchEvt,lastDx,lastDy,tapDistanceLeft,tapDistanceTop,moved,lastTarget,lastDirection,pastFirstInvertThresh=!1,isCircumstantialInvert=!1,targetMoveDistance,ghostRelativeParent,ghostRelativeParentInitialScroll=[],_silent=!1,savedInputChecked=[],documentExists=typeof document<"u",PositionGhostAbsolutely=IOS,CSSFloatProperty=Edge||IE11OrLess?"cssFloat":"float",supportDraggable=documentExists&&!ChromeForAndroid&&!IOS&&"draggable"in document.createElement("div"),supportCssPointerEvents=function(){if(documentExists){if(IE11OrLess)return!1;var Oe=document.createElement("x");return Oe.style.cssText="pointer-events:auto",Oe.style.pointerEvents==="auto"}}(),_detectDirection=function(e,t){var ke=css(e),Ge=parseInt(ke.width)-parseInt(ke.paddingLeft)-parseInt(ke.paddingRight)-parseInt(ke.borderLeftWidth)-parseInt(ke.borderRightWidth),Be=getChild(e,0,t),je=getChild(e,1,t),Ve=Be&&css(Be),Ze=je&&css(je),Qe=Ve&&parseInt(Ve.marginLeft)+parseInt(Ve.marginRight)+getRect(Be).width,en=Ze&&parseInt(Ze.marginLeft)+parseInt(Ze.marginRight)+getRect(je).width;if(ke.display==="flex")return ke.flexDirection==="column"||ke.flexDirection==="column-reverse"?"vertical":"horizontal";if(ke.display==="grid")return ke.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(Be&&Ve.float&&Ve.float!=="none"){var tn=Ve.float==="left"?"left":"right";return je&&(Ze.clear==="both"||Ze.clear===tn)?"vertical":"horizontal"}return Be&&(Ve.display==="block"||Ve.display==="flex"||Ve.display==="table"||Ve.display==="grid"||Qe>=Ge&&ke[CSSFloatProperty]==="none"||je&&ke[CSSFloatProperty]==="none"&&Qe+en>Ge)?"vertical":"horizontal"},_dragElInRowColumn=function(e,t,ke){var Ge=ke?e.left:e.top,Be=ke?e.right:e.bottom,je=ke?e.width:e.height,Ve=ke?t.left:t.top,Ze=ke?t.right:t.bottom,Qe=ke?t.width:t.height;return Ge===Ve||Be===Ze||Ge+je/2===Ve+Qe/2},_detectNearestEmptySortable=function(e,t){var ke;return sortables.some(function(Ge){var Be=Ge[expando].options.emptyInsertThreshold;if(!(!Be||lastChild(Ge))){var je=getRect(Ge),Ve=e>=je.left-Be&&e<=je.right+Be,Ze=t>=je.top-Be&&t<=je.bottom+Be;if(Ve&&Ze)return ke=Ge}}),ke},_prepareGroup=function(e){function t(Be,je){return function(Ve,Ze,Qe,en){var tn=Ve.options.group.name&&Ze.options.group.name&&Ve.options.group.name===Ze.options.group.name;if(Be==null&&(je||tn))return!0;if(Be==null||Be===!1)return!1;if(je&&Be==="clone")return Be;if(typeof Be=="function")return t(Be(Ve,Ze,Qe,en),je)(Ve,Ze,Qe,en);var an=(je?Ve:Ze).options.group.name;return Be===!0||typeof Be=="string"&&Be===an||Be.join&&Be.indexOf(an)>-1}}var ke={},Ge=e.group;(!Ge||_typeof$1(Ge)!="object")&&(Ge={name:Ge}),ke.name=Ge.name,ke.checkPull=t(Ge.pull,!0),ke.checkPut=t(Ge.put),ke.revertClone=Ge.revertClone,e.group=ke},_hideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","none")},_unhideGhostForTarget=function(){!supportCssPointerEvents&&ghostEl&&css(ghostEl,"display","")};documentExists&&!ChromeForAndroid&&document.addEventListener("click",function(Oe){if(ignoreNextClick)return Oe.preventDefault(),Oe.stopPropagation&&Oe.stopPropagation(),Oe.stopImmediatePropagation&&Oe.stopImmediatePropagation(),ignoreNextClick=!1,!1},!0);var nearestEmptyInsertDetectEvent=function(e){if(dragEl){e=e.touches?e.touches[0]:e;var t=_detectNearestEmptySortable(e.clientX,e.clientY);if(t){var ke={};for(var Ge in e)e.hasOwnProperty(Ge)&&(ke[Ge]=e[Ge]);ke.target=ke.rootEl=t,ke.preventDefault=void 0,ke.stopPropagation=void 0,t[expando]._onDragOver(ke)}}},_checkOutsideTargetEl=function(e){dragEl&&dragEl.parentNode[expando]._isOutsideThisEl(e.target)};function Sortable(Oe,e){if(!(Oe&&Oe.nodeType&&Oe.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(Oe));this.el=Oe,this.options=e=_extends({},e),Oe[expando]=this;var t={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(Oe.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return _detectDirection(Oe,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(je,Ve){je.setData("Text",Ve.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Sortable.supportPointer!==!1&&"PointerEvent"in window&&!Safari,emptyInsertThreshold:5};PluginManager.initializePlugins(this,Oe,t);for(var ke in t)!(ke in e)&&(e[ke]=t[ke]);_prepareGroup(e);for(var Ge in this)Ge.charAt(0)==="_"&&typeof this[Ge]=="function"&&(this[Ge]=this[Ge].bind(this));this.nativeDraggable=e.forceFallback?!1:supportDraggable,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?on(Oe,"pointerdown",this._onTapStart):(on(Oe,"mousedown",this._onTapStart),on(Oe,"touchstart",this._onTapStart)),this.nativeDraggable&&(on(Oe,"dragover",this),on(Oe,"dragenter",this)),sortables.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),_extends(this,AnimationStateManager())}Sortable.prototype={constructor:Sortable,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(lastTarget=null)},_getDirection:function(e,t){return typeof this.options.direction=="function"?this.options.direction.call(this,e,t,dragEl):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,ke=this.el,Ge=this.options,Be=Ge.preventOnFilter,je=e.type,Ve=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,Ze=(Ve||e).target,Qe=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||Ze,en=Ge.filter;if(_saveInputCheckedState(ke),!dragEl&&!(/mousedown|pointerdown/.test(je)&&e.button!==0||Ge.disabled)&&!Qe.isContentEditable&&!(!this.nativeDraggable&&Safari&&Ze&&Ze.tagName.toUpperCase()==="SELECT")&&(Ze=closest(Ze,Ge.draggable,ke,!1),!(Ze&&Ze.animated)&&lastDownEl!==Ze)){if(oldIndex=index(Ze),oldDraggableIndex=index(Ze,Ge.draggable),typeof en=="function"){if(en.call(this,e,Ze,this)){_dispatchEvent({sortable:t,rootEl:Qe,name:"filter",targetEl:Ze,toEl:ke,fromEl:ke}),pluginEvent("filter",t,{evt:e}),Be&&e.cancelable&&e.preventDefault();return}}else if(en&&(en=en.split(",").some(function(tn){if(tn=closest(Qe,tn.trim(),ke,!1),tn)return _dispatchEvent({sortable:t,rootEl:tn,name:"filter",targetEl:Ze,fromEl:ke,toEl:ke}),pluginEvent("filter",t,{evt:e}),!0}),en)){Be&&e.cancelable&&e.preventDefault();return}Ge.handle&&!closest(Qe,Ge.handle,ke,!1)||this._prepareDragStart(e,Ve,Ze)}}},_prepareDragStart:function(e,t,ke){var Ge=this,Be=Ge.el,je=Ge.options,Ve=Be.ownerDocument,Ze;if(ke&&!dragEl&&ke.parentNode===Be){var Qe=getRect(ke);if(rootEl=Be,dragEl=ke,parentEl=dragEl.parentNode,nextEl=dragEl.nextSibling,lastDownEl=ke,activeGroup=je.group,Sortable.dragged=dragEl,tapEvt={target:dragEl,clientX:(t||e).clientX,clientY:(t||e).clientY},tapDistanceLeft=tapEvt.clientX-Qe.left,tapDistanceTop=tapEvt.clientY-Qe.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,dragEl.style["will-change"]="all",Ze=function(){if(pluginEvent("delayEnded",Ge,{evt:e}),Sortable.eventCanceled){Ge._onDrop();return}Ge._disableDelayedDragEvents(),!FireFox&&Ge.nativeDraggable&&(dragEl.draggable=!0),Ge._triggerDragStart(e,t),_dispatchEvent({sortable:Ge,name:"choose",originalEvent:e}),toggleClass(dragEl,je.chosenClass,!0)},je.ignore.split(",").forEach(function(en){find(dragEl,en.trim(),_disableDraggable)}),on(Ve,"dragover",nearestEmptyInsertDetectEvent),on(Ve,"mousemove",nearestEmptyInsertDetectEvent),on(Ve,"touchmove",nearestEmptyInsertDetectEvent),on(Ve,"mouseup",Ge._onDrop),on(Ve,"touchend",Ge._onDrop),on(Ve,"touchcancel",Ge._onDrop),FireFox&&this.nativeDraggable&&(this.options.touchStartThreshold=4,dragEl.draggable=!0),pluginEvent("delayStart",this,{evt:e}),je.delay&&(!je.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Edge||IE11OrLess))){if(Sortable.eventCanceled){this._onDrop();return}on(Ve,"mouseup",Ge._disableDelayedDrag),on(Ve,"touchend",Ge._disableDelayedDrag),on(Ve,"touchcancel",Ge._disableDelayedDrag),on(Ve,"mousemove",Ge._delayedDragTouchMoveHandler),on(Ve,"touchmove",Ge._delayedDragTouchMoveHandler),je.supportPointer&&on(Ve,"pointermove",Ge._delayedDragTouchMoveHandler),Ge._dragStartTimer=setTimeout(Ze,je.delay)}else Ze()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){dragEl&&_disableDraggable(dragEl),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._disableDelayedDrag),off(e,"touchend",this._disableDelayedDrag),off(e,"touchcancel",this._disableDelayedDrag),off(e,"mousemove",this._delayedDragTouchMoveHandler),off(e,"touchmove",this._delayedDragTouchMoveHandler),off(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t=t||e.pointerType=="touch"&&e,!this.nativeDraggable||t?this.options.supportPointer?on(document,"pointermove",this._onTouchMove):t?on(document,"touchmove",this._onTouchMove):on(document,"mousemove",this._onTouchMove):(on(dragEl,"dragend",this),on(rootEl,"dragstart",this._onDragStart));try{document.selection?_nextTick(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(awaitingDragStarted=!1,rootEl&&dragEl){pluginEvent("dragStarted",this,{evt:t}),this.nativeDraggable&&on(document,"dragover",_checkOutsideTargetEl);var ke=this.options;!e&&toggleClass(dragEl,ke.dragClass,!1),toggleClass(dragEl,ke.ghostClass,!0),Sortable.active=this,e&&this._appendGhost(),_dispatchEvent({sortable:this,name:"start",originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(touchEvt){this._lastX=touchEvt.clientX,this._lastY=touchEvt.clientY,_hideGhostForTarget();for(var e=document.elementFromPoint(touchEvt.clientX,touchEvt.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(touchEvt.clientX,touchEvt.clientY),e!==t);)t=e;if(dragEl.parentNode[expando]._isOutsideThisEl(e),t)do{if(t[expando]){var ke=void 0;if(ke=t[expando]._onDragOver({clientX:touchEvt.clientX,clientY:touchEvt.clientY,target:e,rootEl:t}),ke&&!this.options.dragoverBubble)break}e=t}while(t=getParentOrHost(t));_unhideGhostForTarget()}},_onTouchMove:function(e){if(tapEvt){var t=this.options,ke=t.fallbackTolerance,Ge=t.fallbackOffset,Be=e.touches?e.touches[0]:e,je=ghostEl&&matrix(ghostEl,!0),Ve=ghostEl&&je&&je.a,Ze=ghostEl&&je&&je.d,Qe=PositionGhostAbsolutely&&ghostRelativeParent&&getRelativeScrollOffset(ghostRelativeParent),en=(Be.clientX-tapEvt.clientX+Ge.x)/(Ve||1)+(Qe?Qe[0]-ghostRelativeParentInitialScroll[0]:0)/(Ve||1),tn=(Be.clientY-tapEvt.clientY+Ge.y)/(Ze||1)+(Qe?Qe[1]-ghostRelativeParentInitialScroll[1]:0)/(Ze||1);if(!Sortable.active&&!awaitingDragStarted){if(ke&&Math.max(Math.abs(Be.clientX-this._lastX),Math.abs(Be.clientY-this._lastY))<ke)return;this._onDragStart(e,!0)}if(ghostEl){je?(je.e+=en-(lastDx||0),je.f+=tn-(lastDy||0)):je={a:1,b:0,c:0,d:1,e:en,f:tn};var an="matrix(".concat(je.a,",").concat(je.b,",").concat(je.c,",").concat(je.d,",").concat(je.e,",").concat(je.f,")");css(ghostEl,"webkitTransform",an),css(ghostEl,"mozTransform",an),css(ghostEl,"msTransform",an),css(ghostEl,"transform",an),lastDx=en,lastDy=tn,touchEvt=Be}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!ghostEl){var e=this.options.fallbackOnBody?document.body:rootEl,t=getRect(dragEl,!0,PositionGhostAbsolutely,!0,e),ke=this.options;if(PositionGhostAbsolutely){for(ghostRelativeParent=e;css(ghostRelativeParent,"position")==="static"&&css(ghostRelativeParent,"transform")==="none"&&ghostRelativeParent!==document;)ghostRelativeParent=ghostRelativeParent.parentNode;ghostRelativeParent!==document.body&&ghostRelativeParent!==document.documentElement?(ghostRelativeParent===document&&(ghostRelativeParent=getWindowScrollingElement()),t.top+=ghostRelativeParent.scrollTop,t.left+=ghostRelativeParent.scrollLeft):ghostRelativeParent=getWindowScrollingElement(),ghostRelativeParentInitialScroll=getRelativeScrollOffset(ghostRelativeParent)}ghostEl=dragEl.cloneNode(!0),toggleClass(ghostEl,ke.ghostClass,!1),toggleClass(ghostEl,ke.fallbackClass,!0),toggleClass(ghostEl,ke.dragClass,!0),css(ghostEl,"transition",""),css(ghostEl,"transform",""),css(ghostEl,"box-sizing","border-box"),css(ghostEl,"margin",0),css(ghostEl,"top",t.top),css(ghostEl,"left",t.left),css(ghostEl,"width",t.width),css(ghostEl,"height",t.height),css(ghostEl,"opacity","0.8"),css(ghostEl,"position",PositionGhostAbsolutely?"absolute":"fixed"),css(ghostEl,"zIndex","100000"),css(ghostEl,"pointerEvents","none"),Sortable.ghost=ghostEl,e.appendChild(ghostEl),css(ghostEl,"transform-origin",tapDistanceLeft/parseInt(ghostEl.style.width)*100+"% "+tapDistanceTop/parseInt(ghostEl.style.height)*100+"%")}},_onDragStart:function(e,t){var ke=this,Ge=e.dataTransfer,Be=ke.options;if(pluginEvent("dragStart",this,{evt:e}),Sortable.eventCanceled){this._onDrop();return}pluginEvent("setupClone",this),Sortable.eventCanceled||(cloneEl=clone(dragEl),cloneEl.removeAttribute("id"),cloneEl.draggable=!1,cloneEl.style["will-change"]="",this._hideClone(),toggleClass(cloneEl,this.options.chosenClass,!1),Sortable.clone=cloneEl),ke.cloneId=_nextTick(function(){pluginEvent("clone",ke),!Sortable.eventCanceled&&(ke.options.removeCloneOnHide||rootEl.insertBefore(cloneEl,dragEl),ke._hideClone(),_dispatchEvent({sortable:ke,name:"clone"}))}),!t&&toggleClass(dragEl,Be.dragClass,!0),t?(ignoreNextClick=!0,ke._loopId=setInterval(ke._emulateDragOver,50)):(off(document,"mouseup",ke._onDrop),off(document,"touchend",ke._onDrop),off(document,"touchcancel",ke._onDrop),Ge&&(Ge.effectAllowed="move",Be.setData&&Be.setData.call(ke,Ge,dragEl)),on(document,"drop",ke),css(dragEl,"transform","translateZ(0)")),awaitingDragStarted=!0,ke._dragStartId=_nextTick(ke._dragStarted.bind(ke,t,e)),on(document,"selectstart",ke),moved=!0,Safari&&css(document.body,"user-select","none")},_onDragOver:function(e){var t=this.el,ke=e.target,Ge,Be,je,Ve=this.options,Ze=Ve.group,Qe=Sortable.active,en=activeGroup===Ze,tn=Ve.sort,an=putSortable||Qe,cn,un=this,dn=!1;if(_silent)return;function fn($n,Qn){pluginEvent($n,un,_objectSpread2({evt:e,isOwner:en,axis:cn?"vertical":"horizontal",revert:je,dragRect:Ge,targetRect:Be,canSort:tn,fromSortable:an,target:ke,completed:gn,onMove:function(Ni,On){return _onMove(rootEl,t,dragEl,Ge,Ni,getRect(Ni),e,On)},changed:yn},Qn))}function pn(){fn("dragOverAnimationCapture"),un.captureAnimationState(),un!==an&&an.captureAnimationState()}function gn($n){return fn("dragOverCompleted",{insertion:$n}),$n&&(en?Qe._hideClone():Qe._showClone(un),un!==an&&(toggleClass(dragEl,putSortable?putSortable.options.ghostClass:Qe.options.ghostClass,!1),toggleClass(dragEl,Ve.ghostClass,!0)),putSortable!==un&&un!==Sortable.active?putSortable=un:un===Sortable.active&&putSortable&&(putSortable=null),an===un&&(un._ignoreWhileAnimating=ke),un.animateAll(function(){fn("dragOverAnimationComplete"),un._ignoreWhileAnimating=null}),un!==an&&(an.animateAll(),an._ignoreWhileAnimating=null)),(ke===dragEl&&!dragEl.animated||ke===t&&!ke.animated)&&(lastTarget=null),!Ve.dragoverBubble&&!e.rootEl&&ke!==document&&(dragEl.parentNode[expando]._isOutsideThisEl(e.target),!$n&&nearestEmptyInsertDetectEvent(e)),!Ve.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),dn=!0}function yn(){newIndex=index(dragEl),newDraggableIndex=index(dragEl,Ve.draggable),_dispatchEvent({sortable:un,name:"change",toEl:t,newIndex,newDraggableIndex,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),ke=closest(ke,Ve.draggable,t,!0),fn("dragOver"),Sortable.eventCanceled)return dn;if(dragEl.contains(e.target)||ke.animated&&ke.animatingX&&ke.animatingY||un._ignoreWhileAnimating===ke)return gn(!1);if(ignoreNextClick=!1,Qe&&!Ve.disabled&&(en?tn||(je=parentEl!==rootEl):putSortable===this||(this.lastPutMode=activeGroup.checkPull(this,Qe,dragEl,e))&&Ze.checkPut(this,Qe,dragEl,e))){if(cn=this._getDirection(e,ke)==="vertical",Ge=getRect(dragEl),fn("dragOverValid"),Sortable.eventCanceled)return dn;if(je)return parentEl=rootEl,pn(),this._hideClone(),fn("revert"),Sortable.eventCanceled||(nextEl?rootEl.insertBefore(dragEl,nextEl):rootEl.appendChild(dragEl)),gn(!0);var vn=lastChild(t,Ve.draggable);if(!vn||_ghostIsLast(e,cn,this)&&!vn.animated){if(vn===dragEl)return gn(!1);if(vn&&t===e.target&&(ke=vn),ke&&(Be=getRect(ke)),_onMove(rootEl,t,dragEl,Ge,ke,Be,e,!!ke)!==!1)return pn(),vn&&vn.nextSibling?t.insertBefore(dragEl,vn.nextSibling):t.appendChild(dragEl),parentEl=t,yn(),gn(!0)}else if(vn&&_ghostIsFirst(e,cn,this)){var An=getChild(t,0,Ve,!0);if(An===dragEl)return gn(!1);if(ke=An,Be=getRect(ke),_onMove(rootEl,t,dragEl,Ge,ke,Be,e,!1)!==!1)return pn(),t.insertBefore(dragEl,An),parentEl=t,yn(),gn(!0)}else if(ke.parentNode===t){Be=getRect(ke);var xn=0,wn,bn=dragEl.parentNode!==t,Mn=!_dragElInRowColumn(dragEl.animated&&dragEl.toRect||Ge,ke.animated&&ke.toRect||Be,cn),Pn=cn?"top":"left",En=isScrolledPast(ke,"top","top")||isScrolledPast(dragEl,"top","top"),Cn=En?En.scrollTop:void 0;lastTarget!==ke&&(wn=Be[Pn],pastFirstInvertThresh=!1,isCircumstantialInvert=!Mn&&Ve.invertSwap||bn),xn=_getSwapDirection(e,ke,Be,cn,Mn?1:Ve.swapThreshold,Ve.invertedSwapThreshold==null?Ve.swapThreshold:Ve.invertedSwapThreshold,isCircumstantialInvert,lastTarget===ke);var Rn;if(xn!==0){var Tn=index(dragEl);do Tn-=xn,Rn=parentEl.children[Tn];while(Rn&&(css(Rn,"display")==="none"||Rn===ghostEl))}if(xn===0||Rn===ke)return gn(!1);lastTarget=ke,lastDirection=xn;var Nn=ke.nextElementSibling,Gn=!1;Gn=xn===1;var zn=_onMove(rootEl,t,dragEl,Ge,ke,Be,e,Gn);if(zn!==!1)return(zn===1||zn===-1)&&(Gn=zn===1),_silent=!0,setTimeout(_unsilent,30),pn(),Gn&&!Nn?t.appendChild(dragEl):ke.parentNode.insertBefore(dragEl,Gn?Nn:ke),En&&scrollBy(En,0,Cn-En.scrollTop),parentEl=dragEl.parentNode,wn!==void 0&&!isCircumstantialInvert&&(targetMoveDistance=Math.abs(wn-getRect(ke)[Pn])),yn(),gn(!0)}if(t.contains(dragEl))return gn(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){off(document,"mousemove",this._onTouchMove),off(document,"touchmove",this._onTouchMove),off(document,"pointermove",this._onTouchMove),off(document,"dragover",nearestEmptyInsertDetectEvent),off(document,"mousemove",nearestEmptyInsertDetectEvent),off(document,"touchmove",nearestEmptyInsertDetectEvent)},_offUpEvents:function(){var e=this.el.ownerDocument;off(e,"mouseup",this._onDrop),off(e,"touchend",this._onDrop),off(e,"pointerup",this._onDrop),off(e,"touchcancel",this._onDrop),off(document,"selectstart",this)},_onDrop:function(e){var t=this.el,ke=this.options;if(newIndex=index(dragEl),newDraggableIndex=index(dragEl,ke.draggable),pluginEvent("drop",this,{evt:e}),parentEl=dragEl&&dragEl.parentNode,newIndex=index(dragEl),newDraggableIndex=index(dragEl,ke.draggable),Sortable.eventCanceled){this._nulling();return}awaitingDragStarted=!1,isCircumstantialInvert=!1,pastFirstInvertThresh=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),_cancelNextTick(this.cloneId),_cancelNextTick(this._dragStartId),this.nativeDraggable&&(off(document,"drop",this),off(t,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Safari&&css(document.body,"user-select",""),css(dragEl,"transform",""),e&&(moved&&(e.cancelable&&e.preventDefault(),!ke.dropBubble&&e.stopPropagation()),ghostEl&&ghostEl.parentNode&&ghostEl.parentNode.removeChild(ghostEl),(rootEl===parentEl||putSortable&&putSortable.lastPutMode!=="clone")&&cloneEl&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),dragEl&&(this.nativeDraggable&&off(dragEl,"dragend",this),_disableDraggable(dragEl),dragEl.style["will-change"]="",moved&&!awaitingDragStarted&&toggleClass(dragEl,putSortable?putSortable.options.ghostClass:this.options.ghostClass,!1),toggleClass(dragEl,this.options.chosenClass,!1),_dispatchEvent({sortable:this,name:"unchoose",toEl:parentEl,newIndex:null,newDraggableIndex:null,originalEvent:e}),rootEl!==parentEl?(newIndex>=0&&(_dispatchEvent({rootEl:parentEl,name:"add",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"remove",toEl:parentEl,originalEvent:e}),_dispatchEvent({rootEl:parentEl,name:"sort",toEl:parentEl,fromEl:rootEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),putSortable&&putSortable.save()):newIndex!==oldIndex&&newIndex>=0&&(_dispatchEvent({sortable:this,name:"update",toEl:parentEl,originalEvent:e}),_dispatchEvent({sortable:this,name:"sort",toEl:parentEl,originalEvent:e})),Sortable.active&&((newIndex==null||newIndex===-1)&&(newIndex=oldIndex,newDraggableIndex=oldDraggableIndex),_dispatchEvent({sortable:this,name:"end",toEl:parentEl,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){pluginEvent("nulling",this),rootEl=dragEl=parentEl=ghostEl=nextEl=cloneEl=lastDownEl=cloneHidden=tapEvt=touchEvt=moved=newIndex=newDraggableIndex=oldIndex=oldDraggableIndex=lastTarget=lastDirection=putSortable=activeGroup=Sortable.dragged=Sortable.ghost=Sortable.clone=Sortable.active=null,savedInputChecked.forEach(function(e){e.checked=!0}),savedInputChecked.length=lastDx=lastDy=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":dragEl&&(this._onDragOver(e),_globalDragOver(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],t,ke=this.el.children,Ge=0,Be=ke.length,je=this.options;Ge<Be;Ge++)t=ke[Ge],closest(t,je.draggable,this.el,!1)&&e.push(t.getAttribute(je.dataIdAttr)||_generateId(t));return e},sort:function(e,t){var ke={},Ge=this.el;this.toArray().forEach(function(Be,je){var Ve=Ge.children[je];closest(Ve,this.options.draggable,Ge,!1)&&(ke[Be]=Ve)},this),t&&this.captureAnimationState(),e.forEach(function(Be){ke[Be]&&(Ge.removeChild(ke[Be]),Ge.appendChild(ke[Be]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return closest(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var ke=this.options;if(t===void 0)return ke[e];var Ge=PluginManager.modifyOption(this,e,t);typeof Ge<"u"?ke[e]=Ge:ke[e]=t,e==="group"&&_prepareGroup(ke)},destroy:function(){pluginEvent("destroy",this);var e=this.el;e[expando]=null,off(e,"mousedown",this._onTapStart),off(e,"touchstart",this._onTapStart),off(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(off(e,"dragover",this),off(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),sortables.splice(sortables.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!cloneHidden){if(pluginEvent("hideClone",this),Sortable.eventCanceled)return;css(cloneEl,"display","none"),this.options.removeCloneOnHide&&cloneEl.parentNode&&cloneEl.parentNode.removeChild(cloneEl),cloneHidden=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(cloneHidden){if(pluginEvent("showClone",this),Sortable.eventCanceled)return;dragEl.parentNode==rootEl&&!this.options.group.revertClone?rootEl.insertBefore(cloneEl,dragEl):nextEl?rootEl.insertBefore(cloneEl,nextEl):rootEl.appendChild(cloneEl),this.options.group.revertClone&&this.animate(dragEl,cloneEl),css(cloneEl,"display",""),cloneHidden=!1}}};function _globalDragOver(Oe){Oe.dataTransfer&&(Oe.dataTransfer.dropEffect="move"),Oe.cancelable&&Oe.preventDefault()}function _onMove(Oe,e,t,ke,Ge,Be,je,Ve){var Ze,Qe=Oe[expando],en=Qe.options.onMove,tn;return window.CustomEvent&&!IE11OrLess&&!Edge?Ze=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(Ze=document.createEvent("Event"),Ze.initEvent("move",!0,!0)),Ze.to=e,Ze.from=Oe,Ze.dragged=t,Ze.draggedRect=ke,Ze.related=Ge||e,Ze.relatedRect=Be||getRect(e),Ze.willInsertAfter=Ve,Ze.originalEvent=je,Oe.dispatchEvent(Ze),en&&(tn=en.call(Qe,Ze,je)),tn}function _disableDraggable(Oe){Oe.draggable=!1}function _unsilent(){_silent=!1}function _ghostIsFirst(Oe,e,t){var ke=getRect(getChild(t.el,0,t.options,!0)),Ge=getChildContainingRectFromElement(t.el,t.options,ghostEl),Be=10;return e?Oe.clientX<Ge.left-Be||Oe.clientY<ke.top&&Oe.clientX<ke.right:Oe.clientY<Ge.top-Be||Oe.clientY<ke.bottom&&Oe.clientX<ke.left}function _ghostIsLast(Oe,e,t){var ke=getRect(lastChild(t.el,t.options.draggable)),Ge=getChildContainingRectFromElement(t.el,t.options,ghostEl),Be=10;return e?Oe.clientX>Ge.right+Be||Oe.clientY>ke.bottom&&Oe.clientX>ke.left:Oe.clientY>Ge.bottom+Be||Oe.clientX>ke.right&&Oe.clientY>ke.top}function _getSwapDirection(Oe,e,t,ke,Ge,Be,je,Ve){var Ze=ke?Oe.clientY:Oe.clientX,Qe=ke?t.height:t.width,en=ke?t.top:t.left,tn=ke?t.bottom:t.right,an=!1;if(!je){if(Ve&&targetMoveDistance<Qe*Ge){if(!pastFirstInvertThresh&&(lastDirection===1?Ze>en+Qe*Be/2:Ze<tn-Qe*Be/2)&&(pastFirstInvertThresh=!0),pastFirstInvertThresh)an=!0;else if(lastDirection===1?Ze<en+targetMoveDistance:Ze>tn-targetMoveDistance)return-lastDirection}else if(Ze>en+Qe*(1-Ge)/2&&Ze<tn-Qe*(1-Ge)/2)return _getInsertDirection(e)}return an=an||je,an&&(Ze<en+Qe*Be/2||Ze>tn-Qe*Be/2)?Ze>en+Qe/2?1:-1:0}function _getInsertDirection(Oe){return index(dragEl)<index(Oe)?1:-1}function _generateId(Oe){for(var e=Oe.tagName+Oe.className+Oe.src+Oe.href+Oe.textContent,t=e.length,ke=0;t--;)ke+=e.charCodeAt(t);return ke.toString(36)}function _saveInputCheckedState(Oe){savedInputChecked.length=0;for(var e=Oe.getElementsByTagName("input"),t=e.length;t--;){var ke=e[t];ke.checked&&savedInputChecked.push(ke)}}function _nextTick(Oe){return setTimeout(Oe,0)}function _cancelNextTick(Oe){return clearTimeout(Oe)}documentExists&&on(document,"touchmove",function(Oe){(Sortable.active||awaitingDragStarted)&&Oe.cancelable&&Oe.preventDefault()});Sortable.utils={on,off,css,find,is:function(e,t){return!!closest(e,t,e,!1)},extend:extend$1,throttle,closest,toggleClass,clone,index,nextTick:_nextTick,cancelNextTick:_cancelNextTick,detectDirection:_detectDirection,getChild,expando};Sortable.get=function(Oe){return Oe[expando]};Sortable.mount=function(){for(var Oe=arguments.length,e=new Array(Oe),t=0;t<Oe;t++)e[t]=arguments[t];e[0].constructor===Array&&(e=e[0]),e.forEach(function(ke){if(!ke.prototype||!ke.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(ke));ke.utils&&(Sortable.utils=_objectSpread2(_objectSpread2({},Sortable.utils),ke.utils)),PluginManager.mount(ke)})};Sortable.create=function(Oe,e){return new Sortable(Oe,e)};Sortable.version=version;var autoScrolls=[],scrollEl,scrollRootEl,scrolling=!1,lastAutoScrollX,lastAutoScrollY,touchEvt$1,pointerElemChangedInterval;function AutoScrollPlugin(){function Oe(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return Oe.prototype={dragStarted:function(t){var ke=t.originalEvent;this.sortable.nativeDraggable?on(document,"dragover",this._handleAutoScroll):this.options.supportPointer?on(document,"pointermove",this._handleFallbackAutoScroll):ke.touches?on(document,"touchmove",this._handleFallbackAutoScroll):on(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(t){var ke=t.originalEvent;!this.options.dragOverBubble&&!ke.rootEl&&this._handleAutoScroll(ke)},drop:function(){this.sortable.nativeDraggable?off(document,"dragover",this._handleAutoScroll):(off(document,"pointermove",this._handleFallbackAutoScroll),off(document,"touchmove",this._handleFallbackAutoScroll),off(document,"mousemove",this._handleFallbackAutoScroll)),clearPointerElemChangedInterval(),clearAutoScrolls(),cancelThrottle()},nulling:function(){touchEvt$1=scrollRootEl=scrollEl=scrolling=pointerElemChangedInterval=lastAutoScrollX=lastAutoScrollY=null,autoScrolls.length=0},_handleFallbackAutoScroll:function(t){this._handleAutoScroll(t,!0)},_handleAutoScroll:function(t,ke){var Ge=this,Be=(t.touches?t.touches[0]:t).clientX,je=(t.touches?t.touches[0]:t).clientY,Ve=document.elementFromPoint(Be,je);if(touchEvt$1=t,ke||this.options.forceAutoScrollFallback||Edge||IE11OrLess||Safari){autoScroll(t,this.options,Ve,ke);var Ze=getParentAutoScrollElement(Ve,!0);scrolling&&(!pointerElemChangedInterval||Be!==lastAutoScrollX||je!==lastAutoScrollY)&&(pointerElemChangedInterval&&clearPointerElemChangedInterval(),pointerElemChangedInterval=setInterval(function(){var Qe=getParentAutoScrollElement(document.elementFromPoint(Be,je),!0);Qe!==Ze&&(Ze=Qe,clearAutoScrolls()),autoScroll(t,Ge.options,Qe,ke)},10),lastAutoScrollX=Be,lastAutoScrollY=je)}else{if(!this.options.bubbleScroll||getParentAutoScrollElement(Ve,!0)===getWindowScrollingElement()){clearAutoScrolls();return}autoScroll(t,this.options,getParentAutoScrollElement(Ve,!1),!1)}}},_extends(Oe,{pluginName:"scroll",initializeByDefault:!0})}function clearAutoScrolls(){autoScrolls.forEach(function(Oe){clearInterval(Oe.pid)}),autoScrolls=[]}function clearPointerElemChangedInterval(){clearInterval(pointerElemChangedInterval)}var autoScroll=throttle(function(Oe,e,t,ke){if(e.scroll){var Ge=(Oe.touches?Oe.touches[0]:Oe).clientX,Be=(Oe.touches?Oe.touches[0]:Oe).clientY,je=e.scrollSensitivity,Ve=e.scrollSpeed,Ze=getWindowScrollingElement(),Qe=!1,en;scrollRootEl!==t&&(scrollRootEl=t,clearAutoScrolls(),scrollEl=e.scroll,en=e.scrollFn,scrollEl===!0&&(scrollEl=getParentAutoScrollElement(t,!0)));var tn=0,an=scrollEl;do{var cn=an,un=getRect(cn),dn=un.top,fn=un.bottom,pn=un.left,gn=un.right,yn=un.width,vn=un.height,An=void 0,xn=void 0,wn=cn.scrollWidth,bn=cn.scrollHeight,Mn=css(cn),Pn=cn.scrollLeft,En=cn.scrollTop;cn===Ze?(An=yn<wn&&(Mn.overflowX==="auto"||Mn.overflowX==="scroll"||Mn.overflowX==="visible"),xn=vn<bn&&(Mn.overflowY==="auto"||Mn.overflowY==="scroll"||Mn.overflowY==="visible")):(An=yn<wn&&(Mn.overflowX==="auto"||Mn.overflowX==="scroll"),xn=vn<bn&&(Mn.overflowY==="auto"||Mn.overflowY==="scroll"));var Cn=An&&(Math.abs(gn-Ge)<=je&&Pn+yn<wn)-(Math.abs(pn-Ge)<=je&&!!Pn),Rn=xn&&(Math.abs(fn-Be)<=je&&En+vn<bn)-(Math.abs(dn-Be)<=je&&!!En);if(!autoScrolls[tn])for(var Tn=0;Tn<=tn;Tn++)autoScrolls[Tn]||(autoScrolls[Tn]={});(autoScrolls[tn].vx!=Cn||autoScrolls[tn].vy!=Rn||autoScrolls[tn].el!==cn)&&(autoScrolls[tn].el=cn,autoScrolls[tn].vx=Cn,autoScrolls[tn].vy=Rn,clearInterval(autoScrolls[tn].pid),(Cn!=0||Rn!=0)&&(Qe=!0,autoScrolls[tn].pid=setInterval((function(){ke&&this.layer===0&&Sortable.active._onTouchMove(touchEvt$1);var Nn=autoScrolls[this.layer].vy?autoScrolls[this.layer].vy*Ve:0,Gn=autoScrolls[this.layer].vx?autoScrolls[this.layer].vx*Ve:0;typeof en=="function"&&en.call(Sortable.dragged.parentNode[expando],Gn,Nn,Oe,touchEvt$1,autoScrolls[this.layer].el)!=="continue"||scrollBy(autoScrolls[this.layer].el,Gn,Nn)}).bind({layer:tn}),24))),tn++}while(e.bubbleScroll&&an!==Ze&&(an=getParentAutoScrollElement(an,!1)));scrolling=Qe}},30),drop=function(e){var t=e.originalEvent,ke=e.putSortable,Ge=e.dragEl,Be=e.activeSortable,je=e.dispatchSortableEvent,Ve=e.hideGhostForTarget,Ze=e.unhideGhostForTarget;if(t){var Qe=ke||Be;Ve();var en=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,tn=document.elementFromPoint(en.clientX,en.clientY);Ze(),Qe&&!Qe.el.contains(tn)&&(je("spill"),this.onSpill({dragEl:Ge,putSortable:ke}))}};function Revert(){}Revert.prototype={startIndex:null,dragStart:function(e){var t=e.oldDraggableIndex;this.startIndex=t},onSpill:function(e){var t=e.dragEl,ke=e.putSortable;this.sortable.captureAnimationState(),ke&&ke.captureAnimationState();var Ge=getChild(this.sortable.el,this.startIndex,this.options);Ge?this.sortable.el.insertBefore(t,Ge):this.sortable.el.appendChild(t),this.sortable.animateAll(),ke&&ke.animateAll()},drop};_extends(Revert,{pluginName:"revertOnSpill"});function Remove(){}Remove.prototype={onSpill:function(e){var t=e.dragEl,ke=e.putSortable,Ge=ke||this.sortable;Ge.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),Ge.animateAll()},drop};_extends(Remove,{pluginName:"removeOnSpill"});Sortable.mount(new AutoScrollPlugin);Sortable.mount(Remove,Revert);var LayerSwitcherDOM={_createDraggableElement:function(Oe,e){let t=".GPlayerName";checkDsfr()&&(t=".GPlayerDragNDrop"),navigator.userAgent.match(/chrome|chromium|crios/i)?Sortable.create(Oe,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,forceFallback:!0,onEnd:function(ke){e._onEndDragAndDropLayerClick(ke)}}):Sortable.create(Oe,{handle:t,draggable:".draggable-layer",ghostClass:"GPghostLayer",animation:200,onEnd:function(ke){e._onEndDragAndDropLayerClick(ke)}})},_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPlayerSwitcher"),Oe.className="GPwidget gpf-widget gpf-mobile-fullscreen gpf-widget-button",Oe},_createMainLayersShowElement:function(){var Oe=document.createElement("input");return Oe.id=this._addUID("GPshowLayersList"),Oe.type="checkbox",Oe},_createMainLayersElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPlayersList"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createMainLayersDivElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelBody gpf-panel__body_ls fr-modal__body",Oe},_createMainPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowLayersListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLayersListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-layerswitcher fr-btn fr-btn--tertiary",e.htmlFor=this._addUID("GPshowLayersList"),e.setAttribute("aria-label","Afficher/masquer le gestionnaire de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),document.getElementById(Oe._addUID("GPshowLayersList")).checked=Ge,document.getElementById(Oe._addUID("GPshowLayersList")).checked&&(document.getElementById(Oe._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Oe._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),Oe.onShowLayerSwitcherClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),document.getElementById(Oe._addUID("GPshowLayersList")).checked&&(document.getElementById(Oe._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Oe._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")),Oe.onShowLayerSwitcherClick(ke)}),e},_createMainCounterLayersElement:function(){var Oe=document.createElement("span");return Oe.id=this._addUID("GPlayerCounter"),Oe.className="GPlayerCounter",Oe.innerHTML="0",Oe},_createMainInfoElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPlayerInfoPanel"),Oe.className="GPpanel GPlayerInfoPanelClosed gpf-panel fr-modal",Oe},_createMainInfoDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createLayersPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader gpf-panel__header_ls",Oe},_createLayersPanelIconElement:function(){var Oe=document.createElement("label");return Oe.className="GPpanelIcon gpf-btn-header gpf-btn-icon-layers",Oe.title="Couches de données",Oe},_createLayersPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelTitle gpf-panel__title_ls",Oe.id=this._addUID("GPlayersHeaderTitle"),Oe.innerHTML="Couches de données",Oe},_createLayersPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPlayersPanelClose"),e.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible fr-mx-1w",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowLayersListPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowLayersListPicto")).click()}),e},_createContainerLayerElement:function(Oe){var e=document.createElement("div");return e.id=this._addUID("GPlayerSwitcher_ID_"+Oe.id),e.className="GPlayerSwitcher_layer gpf-panel__content fr-modal__content draggable-layer",e.appendChild(this._createBasicToolElement(Oe)),e.appendChild(this._createAdvancedToolShowElement(Oe)),e.appendChild(this._createAdvancedToolElement(Oe)),e},_createBasicToolElement:function(Oe){var e=document.createElement("div");return e.id=this._addUID("GPbasicTools_ID_"+Oe.id),e.className="GPlayerBasicTools",e.appendChild(this._createBasicToolNameElement(Oe)),e.appendChild(this._createBasicToolVisibilityElement(Oe)),e.appendChild(this._createBasicToolDragNDropElement(Oe)),e},_createBasicToolDragNDropElement:function(Oe){var e=document.createElement("div");e.id=this._addUID("GPdragndropPicto_ID_"+Oe.id),e.className="GPelementHidden GPlayerDragNDrop gpf-btn gpf-btn-icon gpf-btn-icon-ls-dragndrop gpf-btn--tertiary fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Deplacer la couche",e.setAttribute("tabindex","0");var t=this;return e.addEventListener?e.addEventListener("click",function(ke){t._onStartDragAndDropLayerClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){t._onStartDragAndDropLayerClick(ke)}),e},_createBasicToolNameElement:function(Oe){var e=document.createElement("label");return e.id=this._addUID("GPname_ID_"+Oe.id),e.className="GPlayerName gpf-label gpf-label-name fr-label",e.title=Oe.description||Oe.title,e.innerHTML=Oe.title,e},_createBasicToolVisibilityElement:function(Oe){var e=typeof Oe.visibility<"u"?Oe.visibility:!0,t=document.createElement("button");t.id=this._addUID("GPvisibilityPicto_ID_"+Oe.id),t.className="GPlayerVisibility gpf-btn gpf-btn-icon gpf-btn-icon-ls-visibility fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Afficher/masquer la couche",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",e),t.setAttribute("type","button");var ke=this;return t.addEventListener?t.addEventListener("click",function(Ge){var Be=Ge.target.ariaPressed==="true";Ge.target.setAttribute("aria-pressed",!Be),ke._onVisibilityLayerClick(Ge)}):t.attachEvent&&t.attachEvent("onclick",function(Ge){var Be=Ge.target.ariaPressed==="true";Ge.target.setAttribute("aria-pressed",!Be),ke._onVisibilityLayerClick(Ge)}),t},_createAdvancedToolShowElement:function(Oe){var e=document.createElement("button");e.id=this._addUID("GPshowAdvancedTools_ID_"+Oe.id),e.className="GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowLayerAdvancedTools gpf-btn gpf-btn-icon gpf-btn-icon-ls-collapse fr-btn--sm fr-btn--tertiary gpf-btn--tertiary",e.title="Plus d'outils",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button");var t=this;return e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge);var Be=document.getElementById(t._addUID("GPadvancedTools_ID_"+Oe.id));Ge?(Be.classList.replace("GPelementVisible","GPelementHidden"),Be.classList.replace("gpf-visible","gpf-hidden")):(Be.classList.replace("GPelementHidden","GPelementVisible"),Be.classList.replace("gpf-hidden","gpf-visible"))}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),element.classList.replace("GPelementVisible","GPelementHidden"),element.classList.replace("gpf-visible","gpf-hidden")}),e},_createAdvancedToolElement:function(Oe){var e=document.createElement("div");if(e.id=this._addUID("GPadvancedTools_ID_"+Oe.id),e.className="GPelementHidden GPlayerAdvancedTools gpf-hidden",e.appendChild(this._createAdvancedToolDeleteElement(Oe)),e.appendChild(this._createAdvancedToolInformationElement(Oe)),Oe.type!=="feature")for(var t=this._createAdvancedToolOpacityElement(Oe),ke=0;ke<t.length;ke++)e.appendChild(t[ke]);if(e.appendChild(this._createAdvancedToolExtentElement(Oe)),checkDsfr()){var Ge=document.createElement("button");Ge.className="GPlayerAdvancedToolsContextual fr-btn gpf-btn gpf-btn--tertiary fr-btn--tertiary-no-outline",Ge.setAttribute("aria-pressed",!1),Ge.addEventListener?Ge.addEventListener("click",function(je){var Ve=je.target.ariaPressed==="true";je.target.setAttribute("aria-pressed",!Ve)}):Ge.attachEvent&&Ge.attachEvent("onclick",function(je){var Ve=je.target.ariaPressed==="true";je.target.setAttribute("aria-pressed",!Ve)});var Be=document.createElement("div");Be.appendChild(this._createAdvancedToolDeleteElement(Oe,!0)),Be.appendChild(this._createAdvancedToolInformationElement(Oe,!0)),Be.appendChild(this._createAdvancedToolExtentElement(Oe,!0)),e.appendChild(Ge),e.appendChild(Be)}return e},_createAdvancedToolDeleteElement:function(Oe,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPremoveContextual_ID_"+Oe.id):t.id=this._addUID("GPremove_ID_"+Oe.id),t.className="GPlayerRemove gpf-btn gpf-btn-icon gpf-btn-icon-ls-remove fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Supprimer la couche",t.layerId=Oe.id,e&&(t.innerText="Supprimer"),t.setAttribute("tabindex","0"),t.setAttribute("type","button");var ke=this;return t.addEventListener?t.addEventListener("click",function(Ge){ke._onDropLayerClick(Ge)}):t.attachEvent&&t.attachEvent("onclick",function(Ge){ke._onDropLayerClick(Ge)}),t},_createAdvancedToolInformationElement:function(Oe,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPinfoContextual_ID_"+Oe.id):t.id=this._addUID("GPinfo_ID_"+Oe.id),t.className="GPlayerInfo GPlayerInfoClosed gpf-btn gpf-btn-icon gpf-btn-icon-ls-info fr-btn fr-btn--tertiary gpf-btn--tertiary",(!Oe.title||!Oe.description)&&(t.style.opacity="0",t.style.visibility="hidden",e&&(t.style.display="none")),t.title="Informations/légende",t.layerId=Oe.id,e&&(t.innerText="Informations"),t.setAttribute("tabindex","0"),t.setAttribute("type","button");var ke=this;return t.addEventListener?t.addEventListener("click",function(Ge){ke._onOpenLayerInfoClick(Ge)}):t.attachEvent&&t.attachEvent("onclick",function(Ge){ke._onOpenLayerInfoClick(Ge)}),t},_createAdvancedToolOpacityElement:function(Oe){var e=[],t=document.createElement("div");t.id=this._addUID("GPopacity_ID_"+Oe.id),t.className="GPlayerOpacity fr-range fr-range--sm",t.dataset.frJsRange="true",t.title="Opacité";var ke=typeof Oe.opacity<"u"?Oe.opacity:1;ke=Math.round(ke*100),t.style.setProperty("--progress-right",ke+"%");var Ge=document.createElement("input");Ge.id=this._addUID("GPopacityValueDiv_ID_"+Oe.id),Ge.type="range",Ge.value=ke,Ge.ariaLabel="Opacité";var Be=this;Ge.addEventListener?Ge.addEventListener("change",function(Ze){Be._onChangeLayerOpacity(Ze)}):Ge.attachEvent&&Ge.attachEvent("onchange",function(Ze){Be._onChangeLayerOpacity(Ze)}),Ge.addEventListener?Ge.addEventListener("input",function(Ze){Be._onChangeLayerOpacity(Ze)}):Ge.attachEvent&&Ge.attachEvent("oninput",function(Ze){Be._onChangeLayerOpacity(Ze)}),t.appendChild(Ge);var je=document.createElement("div");je.id=this._addUID("GPopacityValueDiv_ID_"+Oe.id),je.className="GPlayerOpacityValue";var Ve=document.createElement("span");return Ve.id=this._addUID("GPopacityValue_ID_"+Oe.id),Ve.className="gpf-range__output fr-range__output gpf-visible",Ve.innerHTML=ke+"%",je.appendChild(Ve),e.push(t),e.push(je),e},_createAdvancedToolExtentElement:function(Oe,e=!1){var t=document.createElement("button");e?t.id=this._addUID("GPextentContextual_ID_"+Oe.id):t.id=this._addUID("GPextent_ID_"+Oe.id),t.className="GPelementHidden GPlayerExtent gpf-btn gpf-btn-icon gpf-btn-icon-ls-extent fr-btn fr-btn--tertiary gpf-btn--tertiary",t.title="Zoomer dans l'étendue",t.layerId=Oe.id,e&&(t.innerText="Zoomer"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!0),t.setAttribute("type","button");var ke=this;return t.addEventListener?t.addEventListener("click",function(Ge){var Be=Ge.target.ariaPressed==="true";Ge.target.setAttribute("aria-pressed",!Be),ke._onZoomToExtentClick(Ge)}):t.attachEvent&&t.attachEvent("onclick",function(Ge){var Be=Ge.target.ariaPressed==="true";Ge.target.setAttribute("aria-pressed",!Be),ke._onZoomToExtentClick(Ge)}),t},_createContainerLayerInfoElement:function(Oe){var e=document.createElement("div"),t=document.createElement("div");t.className="gpf-panel__header_ls",e.appendChild(t);var ke=document.createElement("label");ke.className="GPlayerInfo gpf-btn-header gpf-btn-icon-ls-info",ke.title="Informations",t.appendChild(ke);var Ge=document.createElement("div");Ge.id=this._addUID("GPlayerInfoTitle"),Ge.innerHTML=Oe.title,Ge.className="gpf-panel__title_ls",t.appendChild(Ge);var Be=document.createElement("button");Be.id=this._addUID("GPlayerInfoClose"),Be.className="GPpanelClose GPlayersPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer la fenêtre";var je=this,Ve=function(){document.getElementById(je._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(je._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"),document.getElementById(Oe.id).classList.add("GPlayerInfoClosed"),document.getElementById(Oe.id).classList.remove("GPlayerInfoOpened")};Be.addEventListener?Be.addEventListener("click",Ve):Be.attachEvent&&Be.attachEvent("onclick",Ve),this.addEventListener("layerswitcher:remove",Rn=>{parseInt(Oe.id.split("-")[0].split("GPinfo_ID_")[1])===Rn.layer.id&&(document.getElementById(je._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(je._addUID("GPlayerInfoPanel")).classList.remove("GPlayerInfoPanelOpened","gpf-visible"))}),t.appendChild(Be),e.appendChild(t);var Ze=document.createElement("div");if(Ze.id=this._addUID("GPlayerInfoContent"),Ze.className="gpf-panel__content fr-modal__content",e.appendChild(Ze),Oe.quicklookUrl){var Qe=document.createElement("div");Qe.id=this._addUID("GPlayerInfoQuicklook"),Qe.title="Afficher un aperçu de la couche";var en=document.createElement("a");en.href=Oe.quicklookUrl,en.appendChild(Qe),Ze.appendChild(en)}var tn=document.createElement("div");if(tn.id=this._addUID("GPlayerInfoDescription"),tn.innerHTML=Oe.description,Ze.appendChild(tn),Oe.metadata){var an=document.createElement("div");an.id=this._addUID("GPlayerInfoMetadata");var cn=document.createElement("div");cn.className="GPlayerInfoSubtitle",cn.innerHTML="Métadonnées",an.appendChild(cn);for(var un=0;un<Oe.metadata.length;un++){var dn=Oe.metadata[un].url,fn=document.createElement("div");fn.className="GPlayerInfoLink";var pn=document.createElement("a");pn.href=dn,pn.innerHTML=dn,fn.appendChild(pn),an.appendChild(fn)}Oe.metadata.length!==0&&Ze.appendChild(an)}if(Oe.legends){var gn=document.createElement("div");gn.id=this._addUID("GPlayerInfoLegend");var yn=document.createElement("div");yn.className="GPlayerInfoSubtitle",yn.innerHTML="Légende",gn.appendChild(yn);for(var vn={},An=Oe.maxScaleDenominator||56e7,xn=0;xn<Oe.legends.length;xn++){var wn=Oe.legends[xn].minScaleDenominator;if(wn){var bn=wn.toString();wn=Math.round(parseInt(bn.substring(0,3),10)/10)*Math.pow(10,bn.length-2)}else wn=270;vn[wn]=Oe.legends[xn]}for(var Mn in vn)if(vn.hasOwnProperty(Mn)){var Pn=vn[Mn].url;if(typeof Pn=="string"&&Pn.toLowerCase().indexOf("nolegend.jpg")===-1){var En=document.createElement("div");En.className="GPlayerInfoLink",An=vn[Mn].maxScaleDenominator||An;var Cn=document.createElement("a");Cn.className="fr-link",Cn.href=Pn,Cn.target="_blank",Cn.innerHTML="Du 1/"+Mn+" au 1/"+An,En.appendChild(Cn),gn.appendChild(En)}else delete vn[Mn]}Object.keys(vn).length!==0&&Ze.appendChild(gn)}return e}},logger$A=LoggerByDefault.getLogger("layerswitcher"),LayerSwitcher=class Xf extends ControlExtended{constructor(e){e=e||{};var t=e.options||{},ke=e.layers||[];if(super(t),!(this instanceof Xf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");if(!Array.isArray(ke))throw new Error("ERROR WRONG_TYPE : layers should be an array");if(typeof t!="object")throw new Error("ERROR WRONG_TYPE : options should be an object");return this.CLASSNAME="LayerSwitcher",this._initialize(t,ke),this.container=this._initContainer(t),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e)this._addMapLayers(e),this.collapsed||this._showLayerSwitcherButton.setAttribute("aria-pressed",!0),this._listeners.onMoveListener=e.on("moveend",()=>this._onMapMoveEnd(e)),this._listeners.onAddListener=e.getLayers().on("add",ke=>{var Ge=ke.element,Be;Ge.hasOwnProperty("gpLayerId")?Be=Ge.gpLayerId:(Be=this._layerId,Ge.gpLayerId=Be,this._layerId++),this._layers[Be]||this.addLayer(Ge)}),this._listeners.onRemoveListener=e.getLayers().on("remove",ke=>{var Ge=ke.element,Be=Ge.gpLayerId;this._layers[Be]&&this.removeLayer(Ge)});else{unByKey(this._listeners.onMoveListener),unByKey(this._listeners.onAddListener),unByKey(this._listeners.onRemoveListener);for(var t=this._layersOrder.length-1;t>=0;t--);}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}addLayer(e,t){var ke=this.getMap();if(t=t||{},!e){logger$A.log("[ERROR] LayerSwitcher:addLayer - missing layer parameter");return}var Ge=e.gpLayerId;if(typeof Ge>"u"){logger$A.trace("[WARN] LayerSwitcher:addLayer - configuration cannot be set for this layer (layer id not found)",e);return}var Be=!1;if(ke.getLayers().forEach(fn=>{fn.gpLayerId===Ge&&(Be=!0)}),!Be){logger$A.log("[ERROR] LayerSwitcher:addLayer - configuration cannot be set for ",e," layer (layer is not in map.getLayers() )");return}if(this._layers[Ge]){for(var an in t)t.hasOwnProperty(an)&&(this._layers[Ge][an]=t[an]);if(t.title){var cn=document.getElementById(this._addUID("GPname_ID_"+Ge));cn&&(cn.innerHTML=t.title,cn.title=t.description||t.title)}var un=document.getElementById(this._addUID("GPinfo_ID_"+Ge));if(!document.getElementById(this._addUID("GPinfo_ID_"+Ge))&&t.description){var dn=document.getElementById(this._addUID("GPadvancedTools_ID_"+Ge));dn&&dn.appendChild(this._createAdvancedToolInformationElement({id:Ge}))}un&&un.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden")}else{var je=this.getLayerInfo(e)||{},Ve=e.getOpacity(),Ze=e.getVisible(),Qe=this.isInRange(e,ke),en={layer:e,id:Ge,name:e.name,service:e.service,opacity:Ve??1,visibility:Ze??!0,inRange:Qe??!0,title:t.title!=null?t.title:je._title||Ge,description:t.description||je._description||null,legends:t.legends||je._legends||[],metadata:t.metadata||je._metadata||[],quicklookUrl:t.quicklookUrl||je._quicklookUrl||null};this._layers[Ge]=en;var tn=this._createLayerDiv(en);this._layers[Ge].div=tn,e.getZIndex&&e.getZIndex()!==0&&typeof e.getZIndex()<"u"||e._forceNullzIndex?this._updateLayersOrder():(this._layersOrder.unshift(en),this._lastZIndex++,e.setZIndex(this._lastZIndex),this._layerListContainer.insertBefore(tn,this._layerListContainer.firstChild)),this._listeners.updateLayerOpacity=e.on("change:opacity",fn=>this._updateLayerOpacity(fn)),this._listeners.updateLayerVisibility=e.on("change:visible",fn=>this._updateLayerVisibility(fn)),this._layers[Ge].onZIndexChangeEvent==null&&(this._layers[Ge].onZIndexChangeEvent=e.on("change:zIndex",()=>this._updateLayersOrder()))}this._updateLayerCounter(),this.dispatchEvent({type:"layerswitcher:add",layer:this._layers[Ge]})}removeLayer(e){if(e){unByKey(this._listeners.updateLayerOpacity),unByKey(this._listeners.updateLayerVisibility),logger$A.trace(e);var t=e.gpLayerId,ke=document.getElementById(this._addUID("GPinfo_ID_"+t));ke&&ke.className==="GPlayerInfoOpened"&&document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden");var Ge=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+t));Ge&&this._layerListContainer.removeChild(Ge);var Be=Math.abs(e.getZIndex()-this._lastZIndex);this._layersOrder.splice(Be,1),this._lastZIndex--;for(var je=this._layersOrder,Ve=0;Ve<je.length;Ve++)je[Ve].layer.setZIndex(this._lastZIndex-Ve);this.dispatchEvent({type:"layerswitcher:remove",layer:this._layers[t]}),delete this._layers[t],this._updateLayerCounter()}}setCollapsed(e){if(e===void 0){logger$A.log("[ERROR] LayerSwitcher:setCollapsed - missing collapsed parameter");return}var t=!document.getElementById(this._addUID("GPshowLayersList")).checked;e&&t||!e&&!t||(t||document.getElementById(this._addUID("GPlayerInfoPanel")).classList.add("GPlayerInfoPanelClosed","gpf-hidden"),document.getElementById(this._addUID("GPshowLayersList")).checked=!e)}getCollapsed(){return this.collapsed}setRemovable(e,t){if(e){var ke=e.gpLayerId;if(ke==null){logger$A.log("[LayerSwitcher:setRemovable] layer should be added to map before calling setRemovable method");return}var Ge=document.getElementById(this._addUID("GPremove_ID_"+ke));Ge&&(t===!1?Ge.style.display="none":t===!0&&(Ge.style.display="block"))}}getContainer(){return this.container}_initialize(e,t){this._uid=e.id||SelectorID.generate(),this.options=e,this.options.layers=t,this._layers={},this._layersOrder=[],this._layersIndex={},this._lastZIndex=0,this._layerId=0,this.collapsed=e.collapsed!==void 0?e.collapsed:!0,this._layerListContainer=null,this._listeners={};for(var ke=0;ke<t.length;ke++){var Ge=t[ke].layer;if(Ge){var Be;Ge.hasOwnProperty("gpLayerId")?Be=Ge.gpLayerId:(Be=this._layerId,Ge.gpLayerId=Be,this._layerId++);var je=t[ke].config||{},Ve=Ge.getOpacity(),Ze=Ge.getVisible(),Qe={layer:Ge,id:Be,name:Ge.name,service:Ge.service,opacity:Ve??1,visibility:Ze??!0,title:je.title!=null?je.title:je.id?je.id:Be,description:je.description||null,legends:je.legends||[],metadata:je.metadata||[],quicklookUrl:je.quicklookUrl||null};this._layers[Be]=Qe}}}_initContainer(){var e=this._createMainContainerElement(),t=this._createMainLayersShowElement();e.appendChild(t),this.collapsed?this.collapsed=!0:(t.checked="checked",this.collapsed=!1);var ke=this,Ge=function(dn){this.collapsed=!dn.target.checked,this.dispatchEvent("change:collapsed")};t.addEventListener("click",function(dn){Ge.call(ke,dn)});var Be=this._showLayerSwitcherButton=this._createMainPictoElement();if(e.appendChild(Be),e.classList.add("GplayerSwitcher-counterRemoved"),this.options.counter){e.classList.remove("GplayerSwitcher-counterRemoved"),e.classList.add("GplayerSwitcher-counterAdded");var je=this._layerSwitcherCounter=this._createMainCounterLayersElement();Be.appendChild(je)}var Ve=this._createMainLayersElement();if(e.appendChild(Ve),this.options.panel){var Ze=this._createLayersPanelHeaderElement();Ve.appendChild(Ze);var Qe=this._createLayersPanelIconElement();Ze.appendChild(Qe);var en=this._createLayersPanelTitleElement();Ze.appendChild(en);var tn=this._createLayersPanelCloseElement();Ze.appendChild(tn)}var an=this._layerListContainer=this._createMainLayersDivElement();Ve.appendChild(an),this._createDraggableElement(an,this);var cn=this._createMainInfoElement(),un=this._createMainInfoDivElement();return cn.appendChild(un),e.appendChild(cn),e}_addMapLayers(e){this._layersIndex={},e.getLayers().forEach(Ze=>{var Qe=null;Ze.hasOwnProperty("gpLayerId")?Qe=Ze.gpLayerId:(Qe=this._layerId,Ze.gpLayerId=Qe,this._layerId++);var en=this.getLayerInfo(Ze)||{};if(this._layers[Qe])this._layers[Qe].opacity=Ze.getOpacity(),this._layers[Qe].visibility=Ze.getVisible(),this._layers[Qe].inRange=this.isInRange(Ze,e);else{var tn=Ze.getOpacity(),an=Ze.getVisible(),cn=this.isInRange(Ze,e),un={layer:Ze,id:Qe,name:Ze.name,service:Ze.service,opacity:tn??1,visibility:an??!0,inRange:cn??!0,title:en._title||Qe,description:en._description||null,legends:en._legends||[],metadata:en._metadata||[],quicklookUrl:en._quicklookUrl||null};this._layers[Qe]=un}if(this._updateLayerCounter(),this._listeners.updateLayerOpacity=Ze.on("change:opacity",fn=>this._updateLayerOpacity(fn)),this._listeners._updateLayerVisibility=Ze.on("change:visible",fn=>this._updateLayerVisibility(fn)),Ze.getZIndex!==void 0){var dn=Ze.getZIndex()||0;(!this._layersIndex[dn]||!Array.isArray(this._layersIndex[dn]))&&(this._layersIndex[dn]=[]),this._layersIndex[dn].push(this._layers[Qe])}});for(var t in this._layersIndex)if(this._layersIndex.hasOwnProperty(t))for(var ke=this._layersIndex[t],Ge=0;Ge<ke.length;Ge++)this._layersOrder.unshift(ke[Ge]),this._lastZIndex++,ke[Ge].layer.setZIndex(this._lastZIndex),this._layers[ke[Ge].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[ke[Ge].layer.gpLayerId].onZIndexChangeEvent=ke[Ge].layer.on("change:zIndex",()=>this._updateLayersOrder()));for(var Be=0;Be<this._layersOrder.length;Be++){var je=this._layersOrder[Be],Ve=this._createLayerDiv(je);this._layerListContainer.querySelector("#"+Ve.id)||this._layerListContainer.appendChild(Ve),this._layers[je.id].div=Ve}}_createLayerDiv(e){var t=e.legends&&e.legends.length!==0,ke=e.metadata&&e.metadata.length!==0,Ge=e.quicklookUrl;(t||ke||Ge)&&(e.displayInformationElement=!0);var Be=this._createContainerLayerElement(e);return e.inRange||Be.classList.add("outOfRange"),Be}onShowLayerSwitcherClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this._showLayerSwitcherButton.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}_updateLayerCounter(){this._layerSwitcherCounter&&(this._layerSwitcherCounter.innerHTML=Object.keys(this._layers).length)}_onChangeLayerOpacity(e){e.target.parentNode.style.setProperty("--progress-right",e.target.value+"%");var t=e.target.id,ke=SelectorID.index(t),Ge=this._layers[ke].layer,Be=e.target.value,je=document.getElementById(this._addUID("GPopacityValue_ID_"+ke));je.innerHTML=Be+"%",Ge.setOpacity(Be/100)}_updateLayerOpacity(e){var t=e.target.getOpacity();t>1&&(t=1),t<0&&(t=0);var ke=e.target.gpLayerId,Ge=document.getElementById(this._addUID("GPopacityValueDiv_ID_"+ke));Ge&&(Ge.value=Math.round(t*100));var Be=document.getElementById(this._addUID("GPopacityValue_ID_"+ke));Be&&(Be.innerHTML=Math.round(t*100)+"%"),this.dispatchEvent({type:"layerswitcher:change:opacity",opacity:t,layer:this._layers[ke]})}_onVisibilityLayerClick(e){var t=e.target.id,ke=SelectorID.index(t),Ge=this._layers[ke].layer;Ge.setVisible(e.target.ariaPressed==="true")}_updateLayerVisibility(e){var t=e.target.getVisible(),ke=e.target.gpLayerId,Ge=document.getElementById(this._addUID("GPvisibilityPicto_ID_"+ke));Ge&&(Ge.ariaPressed=t),this.dispatchEvent({type:"layerswitcher:change:visibility",visibility:t,layer:this._layers[ke]})}_updateLayersOrder(){var e=this.getMap();if(e){this._layersIndex={};var t,ke;e.getLayers().forEach(Qe=>{ke=Qe.gpLayerId,unByKey(this._layers[ke].onZIndexChangeEvent),this._layers[ke].onZIndexChangeEvent=null,t=null,Qe.getZIndex!==void 0&&(t=Qe.getZIndex(),(!this._layersIndex[t]||!Array.isArray(this._layersIndex[t]))&&(this._layersIndex[t]=[]),this._layersIndex[t].push(this._layers[ke]))}),this._lastZIndex=0,this._layersOrder=[];for(var Ge in this._layersIndex)if(this._layersIndex.hasOwnProperty(Ge))for(var Be=this._layersIndex[Ge],je=0;je<Be.length;je++)this._layersOrder.unshift(Be[je]),this._lastZIndex++,this._layers[Be[je].layer.gpLayerId].onZIndexChangeEvent==null&&(this._layers[Be[je].layer.gpLayerId].onZIndexChangeEvent=Be[je].layer.on("change:zIndex",()=>this._updateLayersOrder()));if(this._layerListContainer){for(let Qe=0;Qe<this._layerListContainer.childNodes.length;Qe++){const en=this._layerListContainer.childNodes[Qe];en.id!==""&&en.remove()}for(var Ve=0;Ve<this._layersOrder.length;Ve++){var Ze=this._layersOrder[Ve];this._layerListContainer.appendChild(Ze.div)}}else logger$A.log("[ol.control.LayerSwitcher] _updateLayersOrder : layer list container not found to update layers order ?!")}}_onOpenLayerInfoClick(e){var t=e.target.id,ke=SelectorID.index(t),Ge=this._layers[ke],Be,je,Ve=document.getElementById(e.target.id);if(Ve.classList.contains("GPlayerInfoOpened")){Ve.classList.remove("GPlayerInfoOpened"),Ve.classList.add("GPlayerInfoClosed"),Be=document.getElementById(this._addUID("GPlayerInfoPanel")),Be.classList.remove("GPlayerInfoPanelOpened","gpf-visible"),Be.classList.add("GPlayerInfoPanelClosed","gpf-hidden"),je=document.getElementById(this._addUID("GPlayerInfoContent")),je&&je.parentNode.remove();return}Ve.classList.contains("GPlayerInfoClosed")&&(Ve.classList.remove("GPlayerInfoClosed"),Ve.classList.add("GPlayerInfoOpened")),Be=document.getElementById(this._addUID("GPlayerInfoPanel")),Be.classList.remove("GPlayerInfoPanelClosed","gpf-hidden"),Be.classList.add("GPlayerInfoPanelOpened","gpf-visible"),je=document.getElementById(this._addUID("GPlayerInfoContent")),je&&je.parentNode.remove();var Ze={id:t,title:Ge.title,description:Ge.description,quicklookUrl:Ge.quicklookUrl,metadata:Ge.metadata,legends:Ge.legends},Qe=Ge.layer.getMaxResolution();Qe===1/0?Ze._maxScaleDenominator=56e7:Ze._maxScaleDenominator=Math.round(Qe/28e-5);var en=this._createContainerLayerInfoElement(Ze);Be.firstChild.appendChild(en)}_onDropLayerClick(e){var t=e.target.id,ke=SelectorID.index(t),Ge=this._layers[ke].layer;this.getMap().getLayers().remove(Ge)}_onEndDragAndDropLayerClick(e){logger$A.trace(e);var t=this.getMap(),ke=document.querySelectorAll("div.GPlayerSwitcher_layer"),Ge=ke.length;this._layersOrder=[];for(var Be=0;Be<ke.length;Be++){var je=ke[Be].id,Ve=SelectorID.index(je),Ze=this._layers[Ve].layer;unByKey(this._layers[Ve].onZIndexChangeEvent),this._layers[Ve].onZIndexChangeEvent=null,Ze.setZIndex&&(Ze.setZIndex(Ge),this._layersOrder.push(this._layers[Ve]),Ge--),this._layers[Ve].onZIndexChangeEvent==null&&(this._layers[Ve].onZIndexChangeEvent=Ze.on("change:zIndex",()=>this._updateLayersOrder()))}t.updateSize(),this.dispatchEvent({type:"layerswitcher:change:position",position:e.newIndex,layer:this._layersOrder[e.newIndex],layers:this._layersOrder})}_onStartDragAndDropLayerClick(e){logger$A.debug(e)}_onZoomToExtentClick(e){logger$A.debug(e);var t=e.target.id,ke=SelectorID.index(t),Ge=this._layers[ke],Be=null,je=null,Ve=this.getMap();if(Ge.layer.hasOwnProperty("gpResultLayerId")&&(Ge.layer.gpResultLayerId.split(":")[0]==="layerimport"||Ge.layer.gpResultLayerId.split(":")[0]==="drawing"||Ge.layer.gpResultLayerId.split(":")[0]==="compute"||Ge.layer.gpResultLayerId.split(":")[0]==="bookmark")){if(Ve.getView()&&Ve.getSize()){var Ze=Ge.layer.getExtent();if(!Ze){var Qe=Ge.layer.getSource();Qe&&Qe.getExtent?Ze=Qe.getExtent():Ze=Qe.getTileGrid().getExtent()}Ze&&Ze[0]!==1/0&&Ve.getView().fit(Ze,Ve.getSize())}}else try{if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var en=Ge.layer.name||Ge.layer.getSource().name,tn=Ge.layer.service||Ge.layer.getSource().service,an=Config.configuration.getLayerId(en,tn);if(!an)throw"ERROR : Layer ID not found into the catalogue !?";var cn=Config.configuration.getGlobalConstraints(an);if(cn){if(!Ve||!Ve.getView())return;var un=Ve.getView(),dn=un.getProjection(),fn=[cn.extent.left,cn.extent.bottom,cn.extent.right,cn.extent.top],pn=cn.crs;pn||(pn="EPSG:4326"),Be=transformExtent(fn,pn,dn),Be&&un.fit(Be)}}catch(gn){je=gn}this.dispatchEvent({type:"layerswitcher:extent",extent:Be,layer:Ge,error:je})}_onMapMoveEnd(e){e.getLayers().forEach(t=>{var ke=t.gpLayerId;if(this._layers[ke]){var Ge=this._layers[ke],Be;this.isInRange(t,e)&&!Ge.inRange?(Ge.inRange=!0,Be=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+ke)),Be.classList.remove("outOfRange")):!this.isInRange(t,e)&&Ge.inRange&&(Ge.inRange=!1,Be=document.getElementById(this._addUID("GPlayerSwitcher_ID_"+ke)),Be.classList.add("outOfRange"))}})}getLayerDOMId(e){var t=null;return this.getMap().getLayers().forEach(ke=>{ke===e&&(t=ke.hasOwnProperty("gpLayerId")?ke.gpLayerId:null)}),t!==null?this._addUID("GPlayerSwitcher_ID_"+t):null}isInRange(e,t){if(t){var ke=t.getView().getResolution();if(ke>e.getMaxResolution()||ke<e.getMinResolution())return!1;var Ge=t.getView().calculateExtent(t.getSize()),Be=e.getExtent();return!(Be&&!intersects$1(Ge,Be))}}getLayerInfo(e){var t={};if(e.getProperties!==void 0&&e.getSource!==void 0){var ke=e.getProperties(),Ge=ke.source;Ge&&(t._title=Ge._title||ke.title||ke.id||"",t._description=Ge._description||ke.description||"",t._quicklookUrl=Ge._quicklookUrl||ke.quicklookUrl||"",t._metadata=Ge._metadata||ke.metadata||[],t._legends=Ge._legends||ke.legends||[])}return t}};Object.assign(LayerSwitcher.prototype,LayerSwitcherDOM);Object.assign(LayerSwitcher.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerSwitcher=LayerSwitcher);LoggerByDefault.getLogger("draggable");var Draggable={dragElement:function(Oe,e,t){let ke=0,Ge=0,Be=0,je=0,Ve=0,Ze=0;e?e.addEventListener("mousedown",tn,!0):Oe.addEventListener("mousedown",tn,!0);var Qe,en={bottom:0,left:0,right:0,top:0};function tn(un){un=un||window.event,un.preventDefault(),ke=un.clientX,Ge=un.clientY,Qe=Oe.getBoundingClientRect();const dn=t.getBoundingClientRect();en={bottom:dn.bottom,left:dn.left,right:dn.right,top:dn.top},document.addEventListener("mouseup",an,!0),document.addEventListener("mousemove",cn,!0)}function an(){Ve-=Be,Ze-=je,document.removeEventListener("mouseup",an,!0),document.removeEventListener("mousemove",cn,!0)}function cn(un){un=un||window.event;let dn=un.clientX,fn=un.clientY,pn=Be,gn=je;Be=ke-dn,je=Ge-fn;var yn=Qe.left-Be,vn=Qe.top-je;if(yn<en.left||vn<en.top||yn+Qe.width>en.right||vn+Qe.height>en.bottom)Be=pn,je=gn;else{let An=Ve-Be,xn=Ze-je;Oe.style.transform="translate("+An+"px,"+xn+"px)"}}}};class AsyncData{constructor(e){this.data=e,this.subscribers=[]}subscribe(e){if(typeof e!="function")throw new Error("Callback must be a function");this.subscribers.push(e)}async set(e,t){this.data[e]=t;const ke=this.subscribers.map(async Ge=>{await Ge(e,t)});await Promise.allSettled(ke)}get(e){return this.data[e]}}var GetFeatureInfoDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e},stringToHTML:function(Oe){var e=function(){if(!window.DOMParser)return!1;var Be=new DOMParser;try{Be.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var t=new DOMParser,ke=t.parseFromString(Oe,"text/html");return ke.body}var Ge=document.createElement("div");return Ge.innerHTML=Oe,Ge},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPgetFeatureInfo"),Oe.className="GPgetFeatureInfo gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowGetFeatureInfoPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPgetFeatureInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPgetFeatureInfoPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-getfeatureinfo fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Activer/désactiver l'interrogation des couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowGetFeatureInfoClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowGetFeatureInfoClick(ke)}),e},_createGetFeatureInfoPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPgetFeatureInfoPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createGetFeatureInfoPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelBody gpf-panel__body fr-modal__body",Oe},_createGetFeatureInfoPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader gpf-panel__header fr-modal__header",Oe},_createGetFeatureInfoPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="GetFeatureInfo",Oe},_createGetFeatureInfoPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.className="GPpanelClose GPcloseGetFeatureInfo gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(ke){e.setAttribute("aria-pressed",!1),Oe.onCloseGetFeatureInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(ke){e.setAttribute("aria-pressed",!1),Oe.onCloseGetFeatureInfoClick()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createGetFeatureInfoWaitingDiv:function(){var Oe=`
        <div class="waiting-div-container"><div class="lds-ring"><div></div><div></div><div></div><div></div></div><div>
        `;return Oe},_createGetFeatureInfoAccordionGroup:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPgetFeatureInfoAccordionGroup"),Oe.className="GPgetFeatureInfoAccordionGroup fr-accordions-group",Oe},_createGetFeatureInfoLayerAccordion:function(Oe){var e=this.stringToHTML(`
            <section class="fr-accordion">
                <h3 class="fr-accordion__title">
                    <button class="GPgfiLayerButton fr-accordion__btn" aria-expanded="false" aria-controls="accordion-${Oe}">
                        <span class="GPshowGfiLayerFeature"></span>
                        <span id="gfiLayerName">${Oe}</span>
                    </button>
                </h3>
                <div class="fr-collapse GPgetFeatureInfoAccordionContent GPelementHidden" id="accordion-${Oe}" style="margin:unset;">
                    ${this._createGetFeatureInfoWaitingDiv()}
                </div>
            </section>
        `),t=e.firstChild,ke=t.querySelector("button, button.fr-accordion__btn");return ke.addEventListener("click",Ge=>{Ge.currentTarget.ariaExpanded=Ge.currentTarget.ariaExpanded!=="true";var Be=document.getElementById(Ge.currentTarget.getAttribute("aria-controls"));Ge.currentTarget.ariaExpanded==="true"?(Be.classList.add("fr-collapse--expanded"),Be.classList.remove("GPelementHidden")):(Be.classList.remove("fr-collapse--expanded"),Be.classList.add("GPelementHidden"))}),t}},logger$z=LoggerByDefault.getLogger("getFeatureInfo"),GetFeatureInfo=class Kf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Kf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="GetFeatureInfo",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(this.draggable&&Draggable.dragElement(this.panelGetFeatureInfoContainer,this.panelGetFeatureInfoHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonGetFeatureInfoShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):this.auto&&this.removeEventsListeners(),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonGetFeatureInfoShow=null,this.panelGetFeatureInfoContainer=null,this.getFeatureInfoPanelDiv=null,this.panelGetFeatureInfoHeaderContainer=null,this.buttonGetFeatureInfoClose=null,this.getFeatureInfoAccordionGroup=null,this.panelGetFeatureInfoEntriesContainer=null,this.eventsListeners=[],this.pixel=[],this.coordinates=[],this.layers=[],this.res=null}initContainer(){var e=this._createMainContainerElement(),t=this.buttonGetFeatureInfoShow=this._createShowGetFeatureInfoPictoElement();e.appendChild(t);var ke=this.panelGetFeatureInfoContainer=this._createGetFeatureInfoPanelElement(),Ge=this.getFeatureInfoPanelDiv=this._createGetFeatureInfoPanelDivElement();ke.appendChild(Ge);var Be=this.panelGetFeatureInfoHeaderContainer=this._createGetFeatureInfoPanelHeaderElement(),je=this._createGetFeatureInfoPanelTitleElement();Be.appendChild(je);var Ve=this.buttonGetFeatureInfoClose=this._createGetFeatureInfoPanelCloseElement();Be.appendChild(Ve),Ge.appendChild(Be);var Ze=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();return Ge.appendChild(Ze),e.appendChild(ke),logger$z.log(e),e}addEventsListeners(e){var t=this;this.eventsListeners.singleclick=function(ke){logger$z.trace(ke),t.onMapClick(ke)},e.on("singleclick",this.eventsListeners.singleclick)}removeEventsListeners(){var e=this.getMap();e.getLayers().un("singleclick",this.eventsListeners.singleclick),delete this.eventsListeners.singleclick}getFeatureInfoIsActive(){return this.buttonGetFeatureInfoShow.getAttribute("aria-pressed")}onMapClick(e){if(this.getFeatureInfoIsActive()==="true")if(this.getFeatureInfoAccordionGroup.remove(),this.layers=e.map.getLayers().getArray().filter(ke=>{if(ke.isVisible(e.map.getView())&&ke.getOpacity()>0)return ke}).sort((ke,Ge)=>Ge.getZIndex()-ke.getZIndex()),this.layers.length>0){var t=this.getFeatureInfoAccordionGroup=this._createGetFeatureInfoAccordionGroup();this.getFeatureInfoPanelDiv.appendChild(t),this.map=e.map,this.pixel=e.pixel,this.coordinates=e.coordinate,this.res=e.map.getView().getResolution(),this.displayGetFeatureInfo()}else return}getGetFeatureInfoLayer(e){var t={};let ke=this.getLayerFormat(e);if(t={format:ke,layer:e},ke==="wmts"){let Ge=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFOFORMAT:"text/html",STYLES:""});t={...t,url:Ge}}if(ke==="wms"){let Ge=e.getSource().getFeatureInfoUrl(this.coordinates,this.res,this.map.getView().getProjection(),{INFO_FORMAT:"text/html",STYLES:""});t={...t,url:Ge}}return t}getFeaturesAtClick(e){var t=[];return this.getMap().forEachFeatureAtPixel(this.pixel,function(ke,Ge){e==Ge&&t.push(ke)}),t}async getGetFeatureInfoContent(e){var t=null;if(e.format==="vector"){var ke=this.getFeaturesAtClick(e.layer);return ke&&(t=this.features2html(ke)),t}else return fetch(e.url).then(Ge=>Ge.text()).then(Ge=>{var Be=!1;if((Ge.trim().length===0||Ge.indexOf("ServiceExceptionReport")!==-1||Ge.indexOf("java.lang.NullPointerException")!==-1||Ge.indexOf("java.lang.OutOfMemoryError")!==-1||Ge.indexOf("not queryable")!==-1||Ge.indexOf("No data")!==-1||Ge.indexOf("non interrogeable")!==-1)&&(Be=!0),Be)return null;var je=this.stringToHTML(Ge);return je&&je.innerHTML&&je.innerHTML.trim().length>0?Ge:null}).catch(Ge=>(logger$z.log(Ge),Ge))}getLayerTitle(e){if(e.layer.getProperties!==void 0&&e.layer.getSource!==void 0){var t=e.layer.getProperties(),ke=t.source,Ge="";ke&&(Ge=ke._title||ke.name||t.title||t.name||ke.url_||"Couche de données")}return Ge}displayGetFeatureInfo(){var e=this.layers.map(ke=>this.getGetFeatureInfoLayer(ke)),t=e.map(ke=>{var Ge=this.getLayerTitle(ke),Be=null,je=this._createGetFeatureInfoLayerAccordion(Ge);je.style.display="none";var Ve=!0;return new AsyncData({...ke,layername:Ge,content:Be,contentDiv:je,pending:Ve})});for(let ke=0;ke<t.length;ke++)this.getFeatureInfoAccordionGroup.append(t[ke].data.contentDiv);t.forEach(ke=>{ke.subscribe((Ge,Be)=>{Ge=="content"&&(ke.set("pending",!1),ke.get("content")?(ke.get("contentDiv").querySelector("div.fr-collapse").innerHTML=ke.get("content"),this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!0),ke.get("contentDiv").style.display="block"):ke.get("contentDiv").remove(),t.filter(je=>je.get("pending")===!0).length==0&&t.filter(je=>je.get("content")).length==0&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1))})}),t.forEach(ke=>{this.getGetFeatureInfoContent(ke.data).then(Ge=>{ke.set("content",Ge)})})}getLayerFormat(e){var t=typeof e.getType=="function"?e.getType():null,ke=e.getSource();if(t){if(t==="VECTOR"||t==="VECTOR_TILE")return"vector";if(t==="TILE")return ke.tileGrid?"wmts":"wms";if(t==="IMAGE")return"wms"}else{if(ke instanceof TileWMS||ke instanceof ImageWMS)return"wms";if(ke instanceof WMTS$1)return"wmts";if(ke instanceof VectorSource||ke instanceof VectorTile)return"vector"}return"unknown"}features2html(e){var t=document.createElement("div");return e.forEach(function(ke){var Ge=ke.getProperties();if(Ge.hasOwnProperty("render"))t.insertAdjacentHTML("beforeend",Ge.render);else{if(Ge.hasOwnProperty("name")){var Be=document.createElement("div");Be.className="gp-att-name-div",Be.insertAdjacentHTML("afterbegin",Ge.name),t.appendChild(Be)}if(Ge.hasOwnProperty("description")){var je=document.createElement("div");je.className="gp-att-description-div",je.insertAdjacentHTML("afterbegin",Ge.description),t.appendChild(je)}var Ve=null,Ze=!1,Qe=null,en=null,tn=null,an=["fill","fill-opacity","stroke","stroke-opacity","stroke-width","marker-symbol","marker-color","marker-size","geometry","value","name","description","styleUrl","extensionsNode_","icon"];for(Ve in Ge)if(Ge[Ve]!==void 0&&an.indexOf(Ve)===-1){Ze||(Qe=document.createElement("div"),Qe.className="gp-att-others-div",en=document.createElement("ul"),Ze=!0),tn=document.createElement("li");var cn=document.createElement("span");cn.className="gp-attname-others-span",cn.appendChild(document.createTextNode(Ve+" : ")),tn.appendChild(cn),tn.appendChild(document.createTextNode(Ge[Ve])),en.appendChild(tn)}en&&(Qe.appendChild(en),t.appendChild(Qe))}}),t.hasChildNodes()?t=t.innerHTML:t="",t}onShowGetFeatureInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),e.target.ariaPressed==="false"&&this.buttonGetFeatureInfoClose.setAttribute("aria-pressed",!1),logger$z.trace(e)}onCloseGetFeatureInfoClick(e){logger$z.trace(e)}onGetFeatureInfoComputationSubmit(e){logger$z.trace(e)}};Object.assign(GetFeatureInfo.prototype,GetFeatureInfoDOM);Object.assign(GetFeatureInfo.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GetFeatureInfo=GetFeatureInfo);var MathUtils={modulo:function(Oe,e){var t=Oe%e;return t*e<0?t+e:t},decimalToDMS:function(Oe,e,t){var ke=this.modulo(Oe+180,360)-180,Ge=Math.abs(3600*ke),Be=t||0,je=Math.pow(10,Be),Ve=Math.floor(Ge/3600),Ze=Math.floor((Ge-Ve*3600)/60),Qe=Ge-Ve*3600-Ze*60;Qe=Math.ceil(Qe*je)/je,Qe>=60&&(Qe=0,Ze+=1),Ze>=60&&(Ze=0,Ve+=1);var en=e.charAt(ke<0?1:0);return{d:Ve,m:Ze,s:Qe,direction:en}},dmsToDecimal(Oe,e,t,ke){var Ge=Oe+e/60+t/3600;return(ke=="S"||ke=="O")&&(Ge=Ge*-1),Ge},coordinateToDecimal(Oe){var e={};return e.lat=Oe[1].toFixed(6),e.lng=Oe[0].toFixed(6),e.unit="°",e},coordinateToDMS(Oe){return{lng:MathUtils.decimalToDMS(Oe[0],"EO",2),lat:MathUtils.decimalToDMS(Oe[1],"NS",2),unit:"DMS"}},coordinateToRad(Oe){var e={},t=.017453292519943295;return e.lng=Oe[0]*t,e.lng=e.lng.toFixed(8),e.lat=Oe[1]*t,e.lat=e.lat.toFixed(8),e.unit="rad",e},coordinateToGon(Oe){var e={},t=1.1111111111111112;return e.lng=Oe[0]*t,e.lng=e.lng.toFixed(8),e.lat=Oe[1]*t,e.lat=e.lat.toFixed(8),e.unit="gon",e},coordinateToMeter(Oe){var e={};return e.x=Oe[0].toFixed(2),e.y=Oe[1].toFixed(2),e.unit="m",e},coordinateToKMeter(Oe){var e={};return e.x=(Oe[0]/1e3).toFixed(2),e.y=(Oe[1]/1e3).toFixed(2),e.unit="km",e},toInteger:function(Oe,e){var t=e||10,ke=parseInt(Oe,t);return!isNaN(ke)&&isFinite(ke)?ke:null},isInteger:function(Oe){if(isNaN(Oe))return!1;var e=parseFloat(Oe);return(e|0)===e},toFloat:function(Oe){var e=parseFloat(Oe);return!isNaN(e)&&isFinite(e)?e:null}},SearchEngineUtils={advancedSearchFiltersByDefault:{PositionOfInterest:[{name:"category",title:"Type",value:["cimetière","aérodrome","réservoir","administratif","construction linéaire","construction ponctuelle","construction surfacique","cours d'eau","détail hydrographique","détail orographique","équipement de transport","plan d'eau","poste de transformation","terrain de sport","transport par câble","zone d'activité ou d'intérêt","zone d'habitation","lieu-dit non habité"]},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],StreetAddress:[{name:"city",title:"Ville"},{name:"postcode",title:"Code postal"},{name:"citycode",title:"Code INSEE"}],CadastralParcel:[{name:"departmentcode",title:"Code département (INSEE)",description:"Code INSEE du département (ex: 01, 94)"},{name:"municipalitycode",title:"Code commune (INSEE)",description:"Code INSEE de la commune : 3 chiffres (ex: 067)"},{name:"oldmunicipalitycode",title:"Commune absorbée",description:"Commune absorbée : 3 chiffres (ex: 000, 001)"},{name:"districtcode",title:"Arrondissement",description:"Arrondissement : 3 chiffres (ex: 004, 012)"},{name:"section",title:"Section",description:"Section Cadastrale : 2 caractères (chiffre et/ou lettre)"},{name:"number",title:"Numéro",description:"Numéro de la parcelle : 4 chiffres (ex: 0041, 0250)"},{name:"sheet",title:"Feuille",description:"Numéro de la feuille cadastrale"}]},zoomToResultsByDefault:function(Oe){var e=15,t=Oe.service,ke=Oe.fields,Ge=Oe.type,Be={1:11,2:12,3:13,4:14,5:15,6:16,7:17,8:17};return t==="SuggestedLocation"&&Ge==="PositionOfInterest"&&(e=Be[ke.classification]),t==="GeocodedLocation"&&Ge==="PositionOfInterest"&&(e=Be[ke.importance]||14),Ge==="StreetAddress"&&(e=17),Ge==="CadastralParcel"&&(e=17),e}},GeocodeUtils={getGeocodedLocationFreeform:function(Oe){var e=Oe.placeAttributes;if(e.label)return e.label;if(Oe.type==="PositionOfInterest"){var t=e.toponym;return e.category&&Array.isArray(e.category)&&e.category.length>=2&&e.category[0]==="administratif"?t=t+", "+e.category[1]:e.postcode&&(t=t+", "+e.postcode[0],e.city&&(t=t+" "+e.city[0])),t}else return Oe.type==="StreetAddress"?(e.housenumber?e.housenumber+" ":"")+e.street+" "+(e.postcode?e.postcode+", ":"")+e.city:Oe.type==="CadastralParcel"?e.id:"..."},getSuggestedLocationFreeform:function(Oe){if(Oe.fullText)return Oe.fullText;var e=[];return e.push(Oe.street||""),e.push(Oe.postalCode||""),e.push(Oe.commune||""),Oe.type==="PositionOfInterest"&&(e.push(Oe.poi||""),e.push(Oe.kind||"")),e.join(" - ")}};function globals(Oe){Oe("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),Oe("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),Oe("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)Oe("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),Oe("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");Oe.WGS84=Oe["EPSG:4326"],Oe["EPSG:3785"]=Oe["EPSG:3857"],Oe.GOOGLE=Oe["EPSG:3857"],Oe["EPSG:900913"]=Oe["EPSG:3857"],Oe["EPSG:102113"]=Oe["EPSG:3857"]}var PJD_3PARAM=1,PJD_7PARAM=2,PJD_GRIDSHIFT=3,PJD_WGS84=4,PJD_NODATUM=5,SRS_WGS84_SEMIMAJOR=6378137,SRS_WGS84_SEMIMINOR=6356752314e-3,SRS_WGS84_ESQUARED=.0066943799901413165,SEC_TO_RAD=484813681109536e-20,HALF_PI=Math.PI/2,SIXTH=.16666666666666666,RA4=.04722222222222222,RA6=.022156084656084655,EPSLN=1e-10,D2R$1=.017453292519943295,R2D=57.29577951308232,FORTPI=Math.PI/4,TWO_PI=Math.PI*2,SPI=3.14159265359,exports$2={};exports$2.greenwich=0;exports$2.lisbon=-9.131906111111;exports$2.paris=2.337229166667;exports$2.bogota=-74.080916666667;exports$2.madrid=-3.687938888889;exports$2.rome=12.452333333333;exports$2.bern=7.439583333333;exports$2.jakarta=106.807719444444;exports$2.ferro=-17.666666666667;exports$2.brussels=4.367975;exports$2.stockholm=18.058277777778;exports$2.athens=23.7163375;exports$2.oslo=10.722916666667;const units={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}};var ignoredChar=/[\s_\-\/\(\)]/g;function match(Oe,e){if(Oe[e])return Oe[e];for(var t=Object.keys(Oe),ke=e.toLowerCase().replace(ignoredChar,""),Ge=-1,Be,je;++Ge<t.length;)if(Be=t[Ge],je=Be.toLowerCase().replace(ignoredChar,""),je===ke)return Oe[Be]}function projStr(Oe){var e={},t=Oe.split("+").map(function(Ve){return Ve.trim()}).filter(function(Ve){return Ve}).reduce(function(Ve,Ze){var Qe=Ze.split("=");return Qe.push(!0),Ve[Qe[0].toLowerCase()]=Qe[1],Ve},{}),ke,Ge,Be,je={proj:"projName",datum:"datumCode",rf:function(Ve){e.rf=parseFloat(Ve)},lat_0:function(Ve){e.lat0=Ve*D2R$1},lat_1:function(Ve){e.lat1=Ve*D2R$1},lat_2:function(Ve){e.lat2=Ve*D2R$1},lat_ts:function(Ve){e.lat_ts=Ve*D2R$1},lon_0:function(Ve){e.long0=Ve*D2R$1},lon_1:function(Ve){e.long1=Ve*D2R$1},lon_2:function(Ve){e.long2=Ve*D2R$1},alpha:function(Ve){e.alpha=parseFloat(Ve)*D2R$1},gamma:function(Ve){e.rectified_grid_angle=parseFloat(Ve)},lonc:function(Ve){e.longc=Ve*D2R$1},x_0:function(Ve){e.x0=parseFloat(Ve)},y_0:function(Ve){e.y0=parseFloat(Ve)},k_0:function(Ve){e.k0=parseFloat(Ve)},k:function(Ve){e.k0=parseFloat(Ve)},a:function(Ve){e.a=parseFloat(Ve)},b:function(Ve){e.b=parseFloat(Ve)},r:function(Ve){e.a=e.b=parseFloat(Ve)},r_a:function(){e.R_A=!0},zone:function(Ve){e.zone=parseInt(Ve,10)},south:function(){e.utmSouth=!0},towgs84:function(Ve){e.datum_params=Ve.split(",").map(function(Ze){return parseFloat(Ze)})},to_meter:function(Ve){e.to_meter=parseFloat(Ve)},units:function(Ve){e.units=Ve;var Ze=match(units,Ve);Ze&&(e.to_meter=Ze.to_meter)},from_greenwich:function(Ve){e.from_greenwich=Ve*D2R$1},pm:function(Ve){var Ze=match(exports$2,Ve);e.from_greenwich=(Ze||parseFloat(Ve))*D2R$1},nadgrids:function(Ve){Ve==="@null"?e.datumCode="none":e.nadgrids=Ve},axis:function(Ve){var Ze="ewnsud";Ve.length===3&&Ze.indexOf(Ve.substr(0,1))!==-1&&Ze.indexOf(Ve.substr(1,1))!==-1&&Ze.indexOf(Ve.substr(2,1))!==-1&&(e.axis=Ve)},approx:function(){e.approx=!0}};for(ke in t)Ge=t[ke],ke in je?(Be=je[ke],typeof Be=="function"?Be(Ge):e[Be]=Ge):e[ke]=Ge;return typeof e.datumCode=="string"&&e.datumCode!=="WGS84"&&(e.datumCode=e.datumCode.toLowerCase()),e}var NEUTRAL=1,KEYWORD=2,NUMBER=3,QUOTED=4,AFTERQUOTE=5,ENDED=-1,whitespace=/\s/,latin=/[A-Za-z]/,keyword=/[A-Za-z84_]/,endThings=/[,\]]/,digets=/[\d\.E\-\+]/;function Parser(Oe){if(typeof Oe!="string")throw new Error("not a string");this.text=Oe.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=NEUTRAL}Parser.prototype.readCharicter=function(){var Oe=this.text[this.place++];if(this.state!==QUOTED)for(;whitespace.test(Oe);){if(this.place>=this.text.length)return;Oe=this.text[this.place++]}switch(this.state){case NEUTRAL:return this.neutral(Oe);case KEYWORD:return this.keyword(Oe);case QUOTED:return this.quoted(Oe);case AFTERQUOTE:return this.afterquote(Oe);case NUMBER:return this.number(Oe);case ENDED:return}};Parser.prototype.afterquote=function(Oe){if(Oe==='"'){this.word+='"',this.state=QUOTED;return}if(endThings.test(Oe)){this.word=this.word.trim(),this.afterItem(Oe);return}throw new Error(`havn't handled "`+Oe+'" in afterquote yet, index '+this.place)};Parser.prototype.afterItem=function(Oe){if(Oe===","){this.word!==null&&this.currentObject.push(this.word),this.word=null,this.state=NEUTRAL;return}if(Oe==="]"){this.level--,this.word!==null&&(this.currentObject.push(this.word),this.word=null),this.state=NEUTRAL,this.currentObject=this.stack.pop(),this.currentObject||(this.state=ENDED);return}};Parser.prototype.number=function(Oe){if(digets.test(Oe)){this.word+=Oe;return}if(endThings.test(Oe)){this.word=parseFloat(this.word),this.afterItem(Oe);return}throw new Error(`havn't handled "`+Oe+'" in number yet, index '+this.place)};Parser.prototype.quoted=function(Oe){if(Oe==='"'){this.state=AFTERQUOTE;return}this.word+=Oe};Parser.prototype.keyword=function(Oe){if(keyword.test(Oe)){this.word+=Oe;return}if(Oe==="["){var e=[];e.push(this.word),this.level++,this.root===null?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=NEUTRAL;return}if(endThings.test(Oe)){this.afterItem(Oe);return}throw new Error(`havn't handled "`+Oe+'" in keyword yet, index '+this.place)};Parser.prototype.neutral=function(Oe){if(latin.test(Oe)){this.word=Oe,this.state=KEYWORD;return}if(Oe==='"'){this.word="",this.state=QUOTED;return}if(digets.test(Oe)){this.word=Oe,this.state=NUMBER;return}if(endThings.test(Oe)){this.afterItem(Oe);return}throw new Error(`havn't handled "`+Oe+'" in neutral yet, index '+this.place)};Parser.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(this.state===ENDED)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};function parseString(Oe){var e=new Parser(Oe);return e.output()}function mapit(Oe,e,t){Array.isArray(e)&&(t.unshift(e),e=null);var ke=e?{}:Oe,Ge=t.reduce(function(Be,je){return sExpr(je,Be),Be},ke);e&&(Oe[e]=Ge)}function sExpr(Oe,e){if(!Array.isArray(Oe)){e[Oe]=!0;return}var t=Oe.shift();if(t==="PARAMETER"&&(t=Oe.shift()),Oe.length===1){if(Array.isArray(Oe[0])){e[t]={},sExpr(Oe[0],e[t]);return}e[t]=Oe[0];return}if(!Oe.length){e[t]=!0;return}if(t==="TOWGS84"){e[t]=Oe;return}if(t==="AXIS"){t in e||(e[t]=[]),e[t].push(Oe);return}Array.isArray(t)||(e[t]={});var ke;switch(t){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[t]={name:Oe[0].toLowerCase(),convert:Oe[1]},Oe.length===3&&sExpr(Oe[2],e[t]);return;case"SPHEROID":case"ELLIPSOID":e[t]={name:Oe[0],a:Oe[1],rf:Oe[2]},Oe.length===4&&sExpr(Oe[3],e[t]);return;case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":Oe[0]=["name",Oe[0]],mapit(e,t,Oe);return;case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":Oe[0]=["name",Oe[0]],mapit(e,t,Oe),e[t].type=t;return;default:for(ke=-1;++ke<Oe.length;)if(!Array.isArray(Oe[ke]))return sExpr(Oe,e[t]);return mapit(e,t,Oe)}}var D2R=.017453292519943295,knownTypes=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function rename(Oe,e){var t=e[0],ke=e[1];!(t in Oe)&&ke in Oe&&(Oe[t]=Oe[ke],e.length===3&&(Oe[t]=e[2](Oe[t])))}function d2r(Oe){return Oe*D2R}function cleanWKT(Oe){for(var e=Object.keys(Oe),t=0,ke=e.length;t<ke;++t){var Ge=e[t];knownTypes.indexOf(Ge)!==-1&&setPropertiesFromWkt(Oe[Ge]),typeof Oe[Ge]=="object"&&cleanWKT(Oe[Ge])}}function setPropertiesFromWkt(Oe){if(Oe.AUTHORITY){var e=Object.keys(Oe.AUTHORITY)[0];e&&e in Oe.AUTHORITY&&(Oe.title=e+":"+Oe.AUTHORITY[e])}if(Oe.type==="GEOGCS"?Oe.projName="longlat":Oe.type==="LOCAL_CS"?(Oe.projName="identity",Oe.local=!0):typeof Oe.PROJECTION=="object"?Oe.projName=Object.keys(Oe.PROJECTION)[0]:Oe.projName=Oe.PROJECTION,Oe.AXIS){for(var t="",ke=0,Ge=Oe.AXIS.length;ke<Ge;++ke){var Be=[Oe.AXIS[ke][0].toLowerCase(),Oe.AXIS[ke][1].toLowerCase()];Be[0].indexOf("north")!==-1||(Be[0]==="y"||Be[0]==="lat")&&Be[1]==="north"?t+="n":Be[0].indexOf("south")!==-1||(Be[0]==="y"||Be[0]==="lat")&&Be[1]==="south"?t+="s":Be[0].indexOf("east")!==-1||(Be[0]==="x"||Be[0]==="lon")&&Be[1]==="east"?t+="e":(Be[0].indexOf("west")!==-1||(Be[0]==="x"||Be[0]==="lon")&&Be[1]==="west")&&(t+="w")}t.length===2&&(t+="u"),t.length===3&&(Oe.axis=t)}Oe.UNIT&&(Oe.units=Oe.UNIT.name.toLowerCase(),Oe.units==="metre"&&(Oe.units="meter"),Oe.UNIT.convert&&(Oe.type==="GEOGCS"?Oe.DATUM&&Oe.DATUM.SPHEROID&&(Oe.to_meter=Oe.UNIT.convert*Oe.DATUM.SPHEROID.a):Oe.to_meter=Oe.UNIT.convert));var je=Oe.GEOGCS;Oe.type==="GEOGCS"&&(je=Oe),je&&(je.DATUM?Oe.datumCode=je.DATUM.name.toLowerCase():Oe.datumCode=je.name.toLowerCase(),Oe.datumCode.slice(0,2)==="d_"&&(Oe.datumCode=Oe.datumCode.slice(2)),Oe.datumCode==="new_zealand_1949"&&(Oe.datumCode="nzgd49"),(Oe.datumCode==="wgs_1984"||Oe.datumCode==="world_geodetic_system_1984")&&(Oe.PROJECTION==="Mercator_Auxiliary_Sphere"&&(Oe.sphere=!0),Oe.datumCode="wgs84"),Oe.datumCode==="belge_1972"&&(Oe.datumCode="rnb72"),je.DATUM&&je.DATUM.SPHEROID&&(Oe.ellps=je.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),Oe.ellps.toLowerCase().slice(0,13)==="international"&&(Oe.ellps="intl"),Oe.a=je.DATUM.SPHEROID.a,Oe.rf=parseFloat(je.DATUM.SPHEROID.rf,10)),je.DATUM&&je.DATUM.TOWGS84&&(Oe.datum_params=je.DATUM.TOWGS84),~Oe.datumCode.indexOf("osgb_1936")&&(Oe.datumCode="osgb36"),~Oe.datumCode.indexOf("osni_1952")&&(Oe.datumCode="osni52"),(~Oe.datumCode.indexOf("tm65")||~Oe.datumCode.indexOf("geodetic_datum_of_1965"))&&(Oe.datumCode="ire65"),Oe.datumCode==="ch1903+"&&(Oe.datumCode="ch1903"),~Oe.datumCode.indexOf("israel")&&(Oe.datumCode="isr93")),Oe.b&&!isFinite(Oe.b)&&(Oe.b=Oe.a);function Ve(en){var tn=Oe.to_meter||1;return en*tn}var Ze=function(en){return rename(Oe,en)},Qe=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",d2r],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",d2r],["x0","false_easting",Ve],["y0","false_northing",Ve],["long0","central_meridian",d2r],["lat0","latitude_of_origin",d2r],["lat0","standard_parallel_1",d2r],["lat1","standard_parallel_1",d2r],["lat2","standard_parallel_2",d2r],["azimuth","Azimuth"],["alpha","azimuth",d2r],["srsCode","name"]];Qe.forEach(Ze),!Oe.long0&&Oe.longc&&(Oe.projName==="Albers_Conic_Equal_Area"||Oe.projName==="Lambert_Azimuthal_Equal_Area")&&(Oe.long0=Oe.longc),!Oe.lat_ts&&Oe.lat1&&(Oe.projName==="Stereographic_South_Pole"||Oe.projName==="Polar Stereographic (variant B)")?(Oe.lat0=d2r(Oe.lat1>0?90:-90),Oe.lat_ts=Oe.lat1):!Oe.lat_ts&&Oe.lat0&&Oe.projName==="Polar_Stereographic"&&(Oe.lat_ts=Oe.lat0,Oe.lat0=d2r(Oe.lat0>0?90:-90))}function wkt(Oe){var e=parseString(Oe),t=e[0],ke={};return sExpr(e,ke),cleanWKT(ke),ke[t]}function defs(Oe){var e=this;if(arguments.length===2){var t=arguments[1];typeof t=="string"?t.charAt(0)==="+"?defs[Oe]=projStr(arguments[1]):defs[Oe]=wkt(arguments[1]):defs[Oe]=t}else if(arguments.length===1){if(Array.isArray(Oe))return Oe.map(function(ke){Array.isArray(ke)?defs.apply(e,ke):defs(ke)});if(typeof Oe=="string"){if(Oe in defs)return defs[Oe]}else"EPSG"in Oe?defs["EPSG:"+Oe.EPSG]=Oe:"ESRI"in Oe?defs["ESRI:"+Oe.ESRI]=Oe:"IAU2000"in Oe?defs["IAU2000:"+Oe.IAU2000]=Oe:console.log(Oe);return}}globals(defs);function testObj(Oe){return typeof Oe=="string"}function testDef(Oe){return Oe in defs}var codeWords=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function testWKT(Oe){return codeWords.some(function(e){return Oe.indexOf(e)>-1})}var codes=["3857","900913","3785","102113"];function checkMercator(Oe){var e=match(Oe,"authority");if(e){var t=match(e,"epsg");return t&&codes.indexOf(t)>-1}}function checkProjStr(Oe){var e=match(Oe,"extension");if(e)return match(e,"proj4")}function testProj(Oe){return Oe[0]==="+"}function parse(Oe){if(testObj(Oe)){if(testDef(Oe))return defs[Oe];if(testWKT(Oe)){var e=wkt(Oe);if(checkMercator(e))return defs["EPSG:3857"];var t=checkProjStr(e);return t?projStr(t):e}if(testProj(Oe))return projStr(Oe)}else return Oe}function extend(Oe,e){Oe=Oe||{};var t,ke;if(!e)return Oe;for(ke in e)t=e[ke],t!==void 0&&(Oe[ke]=t);return Oe}function msfnz(Oe,e,t){var ke=Oe*e;return t/Math.sqrt(1-ke*ke)}function sign(Oe){return Oe<0?-1:1}function adjust_lon(Oe){return Math.abs(Oe)<=SPI?Oe:Oe-sign(Oe)*TWO_PI}function tsfnz(Oe,e,t){var ke=Oe*t,Ge=.5*Oe;return ke=Math.pow((1-ke)/(1+ke),Ge),Math.tan(.5*(HALF_PI-e))/ke}function phi2z(Oe,e){for(var t=.5*Oe,ke,Ge,Be=HALF_PI-2*Math.atan(e),je=0;je<=15;je++)if(ke=Oe*Math.sin(Be),Ge=HALF_PI-2*Math.atan(e*Math.pow((1-ke)/(1+ke),t))-Be,Be+=Ge,Math.abs(Ge)<=1e-10)return Be;return-9999}function init$x(){var Oe=this.b/this.a;this.es=1-Oe*Oe,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function forward$v(Oe){var e=Oe.x,t=Oe.y;if(t*R2D>90&&t*R2D<-90&&e*R2D>180&&e*R2D<-180)return null;var ke,Ge;if(Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)return null;if(this.sphere)ke=this.x0+this.a*this.k0*adjust_lon(e-this.long0),Ge=this.y0+this.a*this.k0*Math.log(Math.tan(FORTPI+.5*t));else{var Be=Math.sin(t),je=tsfnz(this.e,t,Be);ke=this.x0+this.a*this.k0*adjust_lon(e-this.long0),Ge=this.y0-this.a*this.k0*Math.log(je)}return Oe.x=ke,Oe.y=Ge,Oe}function inverse$v(Oe){var e=Oe.x-this.x0,t=Oe.y-this.y0,ke,Ge;if(this.sphere)Ge=HALF_PI-2*Math.atan(Math.exp(-t/(this.a*this.k0)));else{var Be=Math.exp(-t/(this.a*this.k0));if(Ge=phi2z(this.e,Be),Ge===-9999)return null}return ke=adjust_lon(this.long0+e/(this.a*this.k0)),Oe.x=ke,Oe.y=Ge,Oe}var names$x=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const merc={init:init$x,forward:forward$v,inverse:inverse$v,names:names$x};function init$w(){}function identity(Oe){return Oe}var names$w=["longlat","identity"];const longlat={init:init$w,forward:identity,inverse:identity,names:names$w};var projs=[merc,longlat],names$v={},projStore=[];function add(Oe,e){var t=projStore.length;return Oe.names?(projStore[t]=Oe,Oe.names.forEach(function(ke){names$v[ke.toLowerCase()]=t}),this):(console.log(e),!0)}function get(Oe){if(!Oe)return!1;var e=Oe.toLowerCase();if(typeof names$v[e]<"u"&&projStore[names$v[e]])return projStore[names$v[e]]}function start(){projs.forEach(add)}const projections={start,add,get};var exports$1={};exports$1.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"};exports$1.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"};exports$1.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"};exports$1.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"};exports$1.airy={a:6377563396e-3,b:635625691e-2,ellipseName:"Airy 1830"};exports$1.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"};exports$1.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"};exports$1.mod_airy={a:6377340189e-3,b:6356034446e-3,ellipseName:"Modified Airy"};exports$1.andrae={a:637710443e-2,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"};exports$1.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"};exports$1.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"};exports$1.bessel={a:6377397155e-3,rf:299.1528128,ellipseName:"Bessel 1841"};exports$1.bess_nam={a:6377483865e-3,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"};exports$1.clrk66={a:63782064e-1,b:63565838e-1,ellipseName:"Clarke 1866"};exports$1.clrk80={a:6378249145e-3,rf:293.4663,ellipseName:"Clarke 1880 mod."};exports$1.clrk80ign={a:63782492e-1,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"};exports$1.clrk58={a:6378293645208759e-9,rf:294.2606763692654,ellipseName:"Clarke 1858"};exports$1.CPM={a:63757387e-1,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"};exports$1.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"};exports$1.engelis={a:637813605e-2,rf:298.2566,ellipseName:"Engelis 1985"};exports$1.evrst30={a:6377276345e-3,rf:300.8017,ellipseName:"Everest 1830"};exports$1.evrst48={a:6377304063e-3,rf:300.8017,ellipseName:"Everest 1948"};exports$1.evrst56={a:6377301243e-3,rf:300.8017,ellipseName:"Everest 1956"};exports$1.evrst69={a:6377295664e-3,rf:300.8017,ellipseName:"Everest 1969"};exports$1.evrstSS={a:6377298556e-3,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"};exports$1.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"};exports$1.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"};exports$1.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"};exports$1.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"};exports$1.hough={a:6378270,rf:297,ellipseName:"Hough"};exports$1.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"};exports$1.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"};exports$1.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"};exports$1.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"};exports$1.new_intl={a:63781575e-1,b:63567722e-1,ellipseName:"New International 1967"};exports$1.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"};exports$1.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"};exports$1.SEasia={a:6378155,b:63567733205e-4,ellipseName:"Southeast Asia"};exports$1.walbeck={a:6376896,b:63558348467e-4,ellipseName:"Walbeck"};exports$1.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"};exports$1.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"};exports$1.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var WGS84=exports$1.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};exports$1.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};function eccentricity(Oe,e,t,ke){var Ge=Oe*Oe,Be=e*e,je=(Ge-Be)/Ge,Ve=0;ke?(Oe*=1-je*(SIXTH+je*(RA4+je*RA6)),Ge=Oe*Oe,je=0):Ve=Math.sqrt(je);var Ze=(Ge-Be)/Be;return{es:je,e:Ve,ep2:Ze}}function sphere(Oe,e,t,ke,Ge){if(!Oe){var Be=match(exports$1,ke);Be||(Be=WGS84),Oe=Be.a,e=Be.b,t=Be.rf}return t&&!e&&(e=(1-1/t)*Oe),(t===0||Math.abs(Oe-e)<EPSLN)&&(Ge=!0,e=Oe),{a:Oe,b:e,rf:t,sphere:Ge}}var datums={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var key in datums){var datum$1=datums[key];datums[datum$1.datumName]=datum$1}function datum(Oe,e,t,ke,Ge,Be,je){var Ve={};return Oe===void 0||Oe==="none"?Ve.datum_type=PJD_NODATUM:Ve.datum_type=PJD_WGS84,e&&(Ve.datum_params=e.map(parseFloat),(Ve.datum_params[0]!==0||Ve.datum_params[1]!==0||Ve.datum_params[2]!==0)&&(Ve.datum_type=PJD_3PARAM),Ve.datum_params.length>3&&(Ve.datum_params[3]!==0||Ve.datum_params[4]!==0||Ve.datum_params[5]!==0||Ve.datum_params[6]!==0)&&(Ve.datum_type=PJD_7PARAM,Ve.datum_params[3]*=SEC_TO_RAD,Ve.datum_params[4]*=SEC_TO_RAD,Ve.datum_params[5]*=SEC_TO_RAD,Ve.datum_params[6]=Ve.datum_params[6]/1e6+1)),je&&(Ve.datum_type=PJD_GRIDSHIFT,Ve.grids=je),Ve.a=t,Ve.b=ke,Ve.es=Ge,Ve.ep2=Be,Ve}var loadedNadgrids={};function nadgrid(Oe,e){var t=new DataView(e),ke=detectLittleEndian(t),Ge=readHeader(t,ke),Be=readSubgrids(t,Ge,ke),je={header:Ge,subgrids:Be};return loadedNadgrids[Oe]=je,je}function getNadgrids(Oe){if(Oe===void 0)return null;var e=Oe.split(",");return e.map(parseNadgridString)}function parseNadgridString(Oe){if(Oe.length===0)return null;var e=Oe[0]==="@";return e&&(Oe=Oe.slice(1)),Oe==="null"?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:Oe,mandatory:!e,grid:loadedNadgrids[Oe]||null,isNull:!1}}function secondsToRadians(Oe){return Oe/3600*Math.PI/180}function detectLittleEndian(Oe){var e=Oe.getInt32(8,!1);return e===11?!1:(e=Oe.getInt32(8,!0),e!==11&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function readHeader(Oe,e){return{nFields:Oe.getInt32(8,e),nSubgridFields:Oe.getInt32(24,e),nSubgrids:Oe.getInt32(40,e),shiftType:decodeString(Oe,56,64).trim(),fromSemiMajorAxis:Oe.getFloat64(120,e),fromSemiMinorAxis:Oe.getFloat64(136,e),toSemiMajorAxis:Oe.getFloat64(152,e),toSemiMinorAxis:Oe.getFloat64(168,e)}}function decodeString(Oe,e,t){return String.fromCharCode.apply(null,new Uint8Array(Oe.buffer.slice(e,t)))}function readSubgrids(Oe,e,t){for(var ke=176,Ge=[],Be=0;Be<e.nSubgrids;Be++){var je=readGridHeader(Oe,ke,t),Ve=readGridNodes(Oe,ke,je,t),Ze=Math.round(1+(je.upperLongitude-je.lowerLongitude)/je.longitudeInterval),Qe=Math.round(1+(je.upperLatitude-je.lowerLatitude)/je.latitudeInterval);Ge.push({ll:[secondsToRadians(je.lowerLongitude),secondsToRadians(je.lowerLatitude)],del:[secondsToRadians(je.longitudeInterval),secondsToRadians(je.latitudeInterval)],lim:[Ze,Qe],count:je.gridNodeCount,cvs:mapNodes(Ve)}),ke+=176+je.gridNodeCount*16}return Ge}function mapNodes(Oe){return Oe.map(function(e){return[secondsToRadians(e.longitudeShift),secondsToRadians(e.latitudeShift)]})}function readGridHeader(Oe,e,t){return{name:decodeString(Oe,e+8,e+16).trim(),parent:decodeString(Oe,e+24,e+24+8).trim(),lowerLatitude:Oe.getFloat64(e+72,t),upperLatitude:Oe.getFloat64(e+88,t),lowerLongitude:Oe.getFloat64(e+104,t),upperLongitude:Oe.getFloat64(e+120,t),latitudeInterval:Oe.getFloat64(e+136,t),longitudeInterval:Oe.getFloat64(e+152,t),gridNodeCount:Oe.getInt32(e+168,t)}}function readGridNodes(Oe,e,t,ke){for(var Ge=e+176,Be=16,je=[],Ve=0;Ve<t.gridNodeCount;Ve++){var Ze={latitudeShift:Oe.getFloat32(Ge+Ve*Be,ke),longitudeShift:Oe.getFloat32(Ge+Ve*Be+4,ke),latitudeAccuracy:Oe.getFloat32(Ge+Ve*Be+8,ke),longitudeAccuracy:Oe.getFloat32(Ge+Ve*Be+12,ke)};je.push(Ze)}return je}function Projection(Oe,e){if(!(this instanceof Projection))return new Projection(Oe);e=e||function(Qe){if(Qe)throw Qe};var t=parse(Oe);if(typeof t!="object"){e("Could not parse to valid json: "+Oe);return}var ke=Projection.projections.get(t.projName);if(!ke){e("Could not get projection name from: "+Oe);return}if(t.datumCode&&t.datumCode!=="none"){var Ge=match(datums,t.datumCode);Ge&&(t.datum_params=t.datum_params||(Ge.towgs84?Ge.towgs84.split(","):null),t.ellps=Ge.ellipse,t.datumName=Ge.datumName?Ge.datumName:t.datumCode)}t.k0=t.k0||1,t.axis=t.axis||"enu",t.ellps=t.ellps||"wgs84",t.lat1=t.lat1||t.lat0;var Be=sphere(t.a,t.b,t.rf,t.ellps,t.sphere),je=eccentricity(Be.a,Be.b,Be.rf,t.R_A),Ve=getNadgrids(t.nadgrids),Ze=t.datum||datum(t.datumCode,t.datum_params,Be.a,Be.b,je.es,je.ep2,Ve);extend(this,t),extend(this,ke),this.a=Be.a,this.b=Be.b,this.rf=Be.rf,this.sphere=Be.sphere,this.es=je.es,this.e=je.e,this.ep2=je.ep2,this.datum=Ze,this.init(),e(null,this)}Projection.projections=projections;Projection.projections.start();function compareDatums(Oe,e){return Oe.datum_type!==e.datum_type||Oe.a!==e.a||Math.abs(Oe.es-e.es)>5e-11?!1:Oe.datum_type===PJD_3PARAM?Oe.datum_params[0]===e.datum_params[0]&&Oe.datum_params[1]===e.datum_params[1]&&Oe.datum_params[2]===e.datum_params[2]:Oe.datum_type===PJD_7PARAM?Oe.datum_params[0]===e.datum_params[0]&&Oe.datum_params[1]===e.datum_params[1]&&Oe.datum_params[2]===e.datum_params[2]&&Oe.datum_params[3]===e.datum_params[3]&&Oe.datum_params[4]===e.datum_params[4]&&Oe.datum_params[5]===e.datum_params[5]&&Oe.datum_params[6]===e.datum_params[6]:!0}function geodeticToGeocentric(Oe,e,t){var ke=Oe.x,Ge=Oe.y,Be=Oe.z?Oe.z:0,je,Ve,Ze,Qe;if(Ge<-HALF_PI&&Ge>-1.001*HALF_PI)Ge=-HALF_PI;else if(Ge>HALF_PI&&Ge<1.001*HALF_PI)Ge=HALF_PI;else{if(Ge<-HALF_PI)return{x:-1/0,y:-1/0,z:Oe.z};if(Ge>HALF_PI)return{x:1/0,y:1/0,z:Oe.z}}return ke>Math.PI&&(ke-=2*Math.PI),Ve=Math.sin(Ge),Qe=Math.cos(Ge),Ze=Ve*Ve,je=t/Math.sqrt(1-e*Ze),{x:(je+Be)*Qe*Math.cos(ke),y:(je+Be)*Qe*Math.sin(ke),z:(je*(1-e)+Be)*Ve}}function geocentricToGeodetic(Oe,e,t,ke){var Ge=1e-12,Be=Ge*Ge,je=30,Ve,Ze,Qe,en,tn,an,cn,un,dn,fn,pn,gn,yn,vn=Oe.x,An=Oe.y,xn=Oe.z?Oe.z:0,wn,bn,Mn;if(Ve=Math.sqrt(vn*vn+An*An),Ze=Math.sqrt(vn*vn+An*An+xn*xn),Ve/t<Ge){if(wn=0,Ze/t<Ge)return bn=HALF_PI,Mn=-ke,{x:Oe.x,y:Oe.y,z:Oe.z}}else wn=Math.atan2(An,vn);Qe=xn/Ze,en=Ve/Ze,tn=1/Math.sqrt(1-e*(2-e)*en*en),un=en*(1-e)*tn,dn=Qe*tn,yn=0;do yn++,cn=t/Math.sqrt(1-e*dn*dn),Mn=Ve*un+xn*dn-cn*(1-e*dn*dn),an=e*cn/(cn+Mn),tn=1/Math.sqrt(1-an*(2-an)*en*en),fn=en*(1-an)*tn,pn=Qe*tn,gn=pn*un-fn*dn,un=fn,dn=pn;while(gn*gn>Be&&yn<je);return bn=Math.atan(pn/Math.abs(fn)),{x:wn,y:bn,z:Mn}}function geocentricToWgs84(Oe,e,t){if(e===PJD_3PARAM)return{x:Oe.x+t[0],y:Oe.y+t[1],z:Oe.z+t[2]};if(e===PJD_7PARAM){var ke=t[0],Ge=t[1],Be=t[2],je=t[3],Ve=t[4],Ze=t[5],Qe=t[6];return{x:Qe*(Oe.x-Ze*Oe.y+Ve*Oe.z)+ke,y:Qe*(Ze*Oe.x+Oe.y-je*Oe.z)+Ge,z:Qe*(-Ve*Oe.x+je*Oe.y+Oe.z)+Be}}}function geocentricFromWgs84(Oe,e,t){if(e===PJD_3PARAM)return{x:Oe.x-t[0],y:Oe.y-t[1],z:Oe.z-t[2]};if(e===PJD_7PARAM){var ke=t[0],Ge=t[1],Be=t[2],je=t[3],Ve=t[4],Ze=t[5],Qe=t[6],en=(Oe.x-ke)/Qe,tn=(Oe.y-Ge)/Qe,an=(Oe.z-Be)/Qe;return{x:en+Ze*tn-Ve*an,y:-Ze*en+tn+je*an,z:Ve*en-je*tn+an}}}function checkParams(Oe){return Oe===PJD_3PARAM||Oe===PJD_7PARAM}function datum_transform(Oe,e,t){if(compareDatums(Oe,e)||Oe.datum_type===PJD_NODATUM||e.datum_type===PJD_NODATUM)return t;var ke=Oe.a,Ge=Oe.es;if(Oe.datum_type===PJD_GRIDSHIFT){var Be=applyGridShift(Oe,!1,t);if(Be!==0)return;ke=SRS_WGS84_SEMIMAJOR,Ge=SRS_WGS84_ESQUARED}var je=e.a,Ve=e.b,Ze=e.es;if(e.datum_type===PJD_GRIDSHIFT&&(je=SRS_WGS84_SEMIMAJOR,Ve=SRS_WGS84_SEMIMINOR,Ze=SRS_WGS84_ESQUARED),Ge===Ze&&ke===je&&!checkParams(Oe.datum_type)&&!checkParams(e.datum_type))return t;if(t=geodeticToGeocentric(t,Ge,ke),checkParams(Oe.datum_type)&&(t=geocentricToWgs84(t,Oe.datum_type,Oe.datum_params)),checkParams(e.datum_type)&&(t=geocentricFromWgs84(t,e.datum_type,e.datum_params)),t=geocentricToGeodetic(t,Ze,je,Ve),e.datum_type===PJD_GRIDSHIFT){var Qe=applyGridShift(e,!0,t);if(Qe!==0)return}return t}function applyGridShift(Oe,e,t){if(Oe.grids===null||Oe.grids.length===0)return console.log("Grid shift grids not found"),-1;var ke={x:-t.x,y:t.y},Ge={x:Number.NaN,y:Number.NaN},Be=[];e:for(var je=0;je<Oe.grids.length;je++){var Ve=Oe.grids[je];if(Be.push(Ve.name),Ve.isNull){Ge=ke;break}if(Ve.mandatory,Ve.grid===null){if(Ve.mandatory)return console.log("Unable to find mandatory grid '"+Ve.name+"'"),-1;continue}for(var Ze=Ve.grid.subgrids,Qe=0,en=Ze.length;Qe<en;Qe++){var tn=Ze[Qe],an=(Math.abs(tn.del[1])+Math.abs(tn.del[0]))/1e4,cn=tn.ll[0]-an,un=tn.ll[1]-an,dn=tn.ll[0]+(tn.lim[0]-1)*tn.del[0]+an,fn=tn.ll[1]+(tn.lim[1]-1)*tn.del[1]+an;if(!(un>ke.y||cn>ke.x||fn<ke.y||dn<ke.x)&&(Ge=applySubgridShift(ke,e,tn),!isNaN(Ge.x)))break e}}return isNaN(Ge.x)?(console.log("Failed to find a grid shift table for location '"+-ke.x*R2D+" "+ke.y*R2D+" tried: '"+Be+"'"),-1):(t.x=-Ge.x,t.y=Ge.y,0)}function applySubgridShift(Oe,e,t){var ke={x:Number.NaN,y:Number.NaN};if(isNaN(Oe.x))return ke;var Ge={x:Oe.x,y:Oe.y};Ge.x-=t.ll[0],Ge.y-=t.ll[1],Ge.x=adjust_lon(Ge.x-Math.PI)+Math.PI;var Be=nadInterpolate(Ge,t);if(e){if(isNaN(Be.x))return ke;Be.x=Ge.x-Be.x,Be.y=Ge.y-Be.y;var je=9,Ve=1e-12,Ze,Qe;do{if(Qe=nadInterpolate(Be,t),isNaN(Qe.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}Ze={x:Ge.x-(Qe.x+Be.x),y:Ge.y-(Qe.y+Be.y)},Be.x+=Ze.x,Be.y+=Ze.y}while(je--&&Math.abs(Ze.x)>Ve&&Math.abs(Ze.y)>Ve);if(je<0)return console.log("Inverse grid shift iterator failed to converge."),ke;ke.x=adjust_lon(Be.x+t.ll[0]),ke.y=Be.y+t.ll[1]}else isNaN(Be.x)||(ke.x=Oe.x+Be.x,ke.y=Oe.y+Be.y);return ke}function nadInterpolate(Oe,e){var t={x:Oe.x/e.del[0],y:Oe.y/e.del[1]},ke={x:Math.floor(t.x),y:Math.floor(t.y)},Ge={x:t.x-1*ke.x,y:t.y-1*ke.y},Be={x:Number.NaN,y:Number.NaN},je;if(ke.x<0||ke.x>=e.lim[0]||ke.y<0||ke.y>=e.lim[1])return Be;je=ke.y*e.lim[0]+ke.x;var Ve={x:e.cvs[je][0],y:e.cvs[je][1]};je++;var Ze={x:e.cvs[je][0],y:e.cvs[je][1]};je+=e.lim[0];var Qe={x:e.cvs[je][0],y:e.cvs[je][1]};je--;var en={x:e.cvs[je][0],y:e.cvs[je][1]},tn=Ge.x*Ge.y,an=Ge.x*(1-Ge.y),cn=(1-Ge.x)*(1-Ge.y),un=(1-Ge.x)*Ge.y;return Be.x=cn*Ve.x+an*Ze.x+un*en.x+tn*Qe.x,Be.y=cn*Ve.y+an*Ze.y+un*en.y+tn*Qe.y,Be}function adjust_axis(Oe,e,t){var ke=t.x,Ge=t.y,Be=t.z||0,je,Ve,Ze,Qe={};for(Ze=0;Ze<3;Ze++)if(!(e&&Ze===2&&t.z===void 0))switch(Ze===0?(je=ke,"ew".indexOf(Oe.axis[Ze])!==-1?Ve="x":Ve="y"):Ze===1?(je=Ge,"ns".indexOf(Oe.axis[Ze])!==-1?Ve="y":Ve="x"):(je=Be,Ve="z"),Oe.axis[Ze]){case"e":Qe[Ve]=je;break;case"w":Qe[Ve]=-je;break;case"n":Qe[Ve]=je;break;case"s":Qe[Ve]=-je;break;case"u":t[Ve]!==void 0&&(Qe.z=je);break;case"d":t[Ve]!==void 0&&(Qe.z=-je);break;default:return null}return Qe}function common(Oe){var e={x:Oe[0],y:Oe[1]};return Oe.length>2&&(e.z=Oe[2]),Oe.length>3&&(e.m=Oe[3]),e}function checkSanity(Oe){checkCoord(Oe.x),checkCoord(Oe.y)}function checkCoord(Oe){if(typeof Number.isFinite=="function"){if(Number.isFinite(Oe))return;throw new TypeError("coordinates must be finite numbers")}if(typeof Oe!="number"||Oe!==Oe||!isFinite(Oe))throw new TypeError("coordinates must be finite numbers")}function checkNotWGS(Oe,e){return(Oe.datum.datum_type===PJD_3PARAM||Oe.datum.datum_type===PJD_7PARAM||Oe.datum.datum_type===PJD_GRIDSHIFT)&&e.datumCode!=="WGS84"||(e.datum.datum_type===PJD_3PARAM||e.datum.datum_type===PJD_7PARAM||e.datum.datum_type===PJD_GRIDSHIFT)&&Oe.datumCode!=="WGS84"}function transform(Oe,e,t,ke){var Ge;Array.isArray(t)?t=common(t):t={x:t.x,y:t.y,z:t.z,m:t.m};var Be=t.z!==void 0;if(checkSanity(t),Oe.datum&&e.datum&&checkNotWGS(Oe,e)&&(Ge=new Projection("WGS84"),t=transform(Oe,Ge,t,ke),Oe=Ge),ke&&Oe.axis!=="enu"&&(t=adjust_axis(Oe,!1,t)),Oe.projName==="longlat")t={x:t.x*D2R$1,y:t.y*D2R$1,z:t.z||0};else if(Oe.to_meter&&(t={x:t.x*Oe.to_meter,y:t.y*Oe.to_meter,z:t.z||0}),t=Oe.inverse(t),!t)return;if(Oe.from_greenwich&&(t.x+=Oe.from_greenwich),t=datum_transform(Oe.datum,e.datum,t),!!t)return e.from_greenwich&&(t={x:t.x-e.from_greenwich,y:t.y,z:t.z||0}),e.projName==="longlat"?t={x:t.x*R2D,y:t.y*R2D,z:t.z||0}:(t=e.forward(t),e.to_meter&&(t={x:t.x/e.to_meter,y:t.y/e.to_meter,z:t.z||0})),ke&&e.axis!=="enu"?adjust_axis(e,!0,t):(t&&!Be&&delete t.z,t)}var wgs84=Projection("WGS84");function transformer(Oe,e,t,ke){var Ge,Be,je;return Array.isArray(t)?(Ge=transform(Oe,e,t,ke)||{x:NaN,y:NaN},t.length>2?typeof Oe.name<"u"&&Oe.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"?typeof Ge.z=="number"?[Ge.x,Ge.y,Ge.z].concat(t.slice(3)):[Ge.x,Ge.y,t[2]].concat(t.slice(3)):[Ge.x,Ge.y].concat(t.slice(2)):[Ge.x,Ge.y]):(Be=transform(Oe,e,t,ke),je=Object.keys(t),je.length===2||je.forEach(function(Ve){if(typeof Oe.name<"u"&&Oe.name==="geocent"||typeof e.name<"u"&&e.name==="geocent"){if(Ve==="x"||Ve==="y"||Ve==="z")return}else if(Ve==="x"||Ve==="y")return;Be[Ve]=t[Ve]}),Be)}function checkProj(Oe){return Oe instanceof Projection?Oe:Oe.oProj?Oe.oProj:Projection(Oe)}function proj4(Oe,e,t){Oe=checkProj(Oe);var ke=!1,Ge;return typeof e>"u"?(e=Oe,Oe=wgs84,ke=!0):(typeof e.x<"u"||Array.isArray(e))&&(t=e,e=Oe,Oe=wgs84,ke=!0),e=checkProj(e),t?transformer(Oe,e,t):(Ge={forward:function(Be,je){return transformer(Oe,e,Be,je)},inverse:function(Be,je){return transformer(e,Oe,Be,je)}},ke&&(Ge.oProj=e),Ge)}var NUM_100K_SETS=6,SET_ORIGIN_COLUMN_LETTERS="AJSAJS",SET_ORIGIN_ROW_LETTERS="AFAFAF",A$1=65,I$2=73,O$1=79,V$1=86,Z$1=90;const mgrs={forward:forward$u,inverse:inverse$u,toPoint};function forward$u(Oe,e){return e=e||5,encode(LLtoUTM({lat:Oe[1],lon:Oe[0]}),e)}function inverse$u(Oe){var e=UTMtoLL(decode(Oe.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function toPoint(Oe){var e=UTMtoLL(decode(Oe.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function degToRad(Oe){return Oe*(Math.PI/180)}function radToDeg(Oe){return 180*(Oe/Math.PI)}function LLtoUTM(Oe){var e=Oe.lat,t=Oe.lon,ke=6378137,Ge=.00669438,Be=.9996,je,Ve,Ze,Qe,en,tn,an,cn=degToRad(e),un=degToRad(t),dn,fn;fn=Math.floor((t+180)/6)+1,t===180&&(fn=60),e>=56&&e<64&&t>=3&&t<12&&(fn=32),e>=72&&e<84&&(t>=0&&t<9?fn=31:t>=9&&t<21?fn=33:t>=21&&t<33?fn=35:t>=33&&t<42&&(fn=37)),je=(fn-1)*6-180+3,dn=degToRad(je),Ve=Ge/(1-Ge),Ze=ke/Math.sqrt(1-Ge*Math.sin(cn)*Math.sin(cn)),Qe=Math.tan(cn)*Math.tan(cn),en=Ve*Math.cos(cn)*Math.cos(cn),tn=Math.cos(cn)*(un-dn),an=ke*((1-Ge/4-3*Ge*Ge/64-5*Ge*Ge*Ge/256)*cn-(3*Ge/8+3*Ge*Ge/32+45*Ge*Ge*Ge/1024)*Math.sin(2*cn)+(15*Ge*Ge/256+45*Ge*Ge*Ge/1024)*Math.sin(4*cn)-35*Ge*Ge*Ge/3072*Math.sin(6*cn));var pn=Be*Ze*(tn+(1-Qe+en)*tn*tn*tn/6+(5-18*Qe+Qe*Qe+72*en-58*Ve)*tn*tn*tn*tn*tn/120)+5e5,gn=Be*(an+Ze*Math.tan(cn)*(tn*tn/2+(5-Qe+9*en+4*en*en)*tn*tn*tn*tn/24+(61-58*Qe+Qe*Qe+600*en-330*Ve)*tn*tn*tn*tn*tn*tn/720));return e<0&&(gn+=1e7),{northing:Math.round(gn),easting:Math.round(pn),zoneNumber:fn,zoneLetter:getLetterDesignator(e)}}function UTMtoLL(Oe){var e=Oe.northing,t=Oe.easting,ke=Oe.zoneLetter,Ge=Oe.zoneNumber;if(Ge<0||Ge>60)return null;var Be=.9996,je=6378137,Ve=.00669438,Ze,Qe=(1-Math.sqrt(1-Ve))/(1+Math.sqrt(1-Ve)),en,tn,an,cn,un,dn,fn,pn,gn,yn=t-5e5,vn=e;ke<"N"&&(vn-=1e7),fn=(Ge-1)*6-180+3,Ze=Ve/(1-Ve),dn=vn/Be,pn=dn/(je*(1-Ve/4-3*Ve*Ve/64-5*Ve*Ve*Ve/256)),gn=pn+(3*Qe/2-27*Qe*Qe*Qe/32)*Math.sin(2*pn)+(21*Qe*Qe/16-55*Qe*Qe*Qe*Qe/32)*Math.sin(4*pn)+151*Qe*Qe*Qe/96*Math.sin(6*pn),en=je/Math.sqrt(1-Ve*Math.sin(gn)*Math.sin(gn)),tn=Math.tan(gn)*Math.tan(gn),an=Ze*Math.cos(gn)*Math.cos(gn),cn=je*(1-Ve)/Math.pow(1-Ve*Math.sin(gn)*Math.sin(gn),1.5),un=yn/(en*Be);var An=gn-en*Math.tan(gn)/cn*(un*un/2-(5+3*tn+10*an-4*an*an-9*Ze)*un*un*un*un/24+(61+90*tn+298*an+45*tn*tn-252*Ze-3*an*an)*un*un*un*un*un*un/720);An=radToDeg(An);var xn=(un-(1+2*tn+an)*un*un*un/6+(5-2*an+28*tn-3*an*an+8*Ze+24*tn*tn)*un*un*un*un*un/120)/Math.cos(gn);xn=fn+radToDeg(xn);var wn;if(Oe.accuracy){var bn=UTMtoLL({northing:Oe.northing+Oe.accuracy,easting:Oe.easting+Oe.accuracy,zoneLetter:Oe.zoneLetter,zoneNumber:Oe.zoneNumber});wn={top:bn.lat,right:bn.lon,bottom:An,left:xn}}else wn={lat:An,lon:xn};return wn}function getLetterDesignator(Oe){var e="Z";return 84>=Oe&&Oe>=72?e="X":72>Oe&&Oe>=64?e="W":64>Oe&&Oe>=56?e="V":56>Oe&&Oe>=48?e="U":48>Oe&&Oe>=40?e="T":40>Oe&&Oe>=32?e="S":32>Oe&&Oe>=24?e="R":24>Oe&&Oe>=16?e="Q":16>Oe&&Oe>=8?e="P":8>Oe&&Oe>=0?e="N":0>Oe&&Oe>=-8?e="M":-8>Oe&&Oe>=-16?e="L":-16>Oe&&Oe>=-24?e="K":-24>Oe&&Oe>=-32?e="J":-32>Oe&&Oe>=-40?e="H":-40>Oe&&Oe>=-48?e="G":-48>Oe&&Oe>=-56?e="F":-56>Oe&&Oe>=-64?e="E":-64>Oe&&Oe>=-72?e="D":-72>Oe&&Oe>=-80&&(e="C"),e}function encode(Oe,e){var t="00000"+Oe.easting,ke="00000"+Oe.northing;return Oe.zoneNumber+Oe.zoneLetter+get100kID(Oe.easting,Oe.northing,Oe.zoneNumber)+t.substr(t.length-5,e)+ke.substr(ke.length-5,e)}function get100kID(Oe,e,t){var ke=get100kSetForZone(t),Ge=Math.floor(Oe/1e5),Be=Math.floor(e/1e5)%20;return getLetter100kID(Ge,Be,ke)}function get100kSetForZone(Oe){var e=Oe%NUM_100K_SETS;return e===0&&(e=NUM_100K_SETS),e}function getLetter100kID(Oe,e,t){var ke=t-1,Ge=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(ke),Be=SET_ORIGIN_ROW_LETTERS.charCodeAt(ke),je=Ge+Oe-1,Ve=Be+e,Ze=!1;je>Z$1&&(je=je-Z$1+A$1-1,Ze=!0),(je===I$2||Ge<I$2&&je>I$2||(je>I$2||Ge<I$2)&&Ze)&&je++,(je===O$1||Ge<O$1&&je>O$1||(je>O$1||Ge<O$1)&&Ze)&&(je++,je===I$2&&je++),je>Z$1&&(je=je-Z$1+A$1-1),Ve>V$1?(Ve=Ve-V$1+A$1-1,Ze=!0):Ze=!1,(Ve===I$2||Be<I$2&&Ve>I$2||(Ve>I$2||Be<I$2)&&Ze)&&Ve++,(Ve===O$1||Be<O$1&&Ve>O$1||(Ve>O$1||Be<O$1)&&Ze)&&(Ve++,Ve===I$2&&Ve++),Ve>V$1&&(Ve=Ve-V$1+A$1-1);var Qe=String.fromCharCode(je)+String.fromCharCode(Ve);return Qe}function decode(Oe){if(Oe&&Oe.length===0)throw"MGRSPoint coverting from nothing";for(var e=Oe.length,t=null,ke="",Ge,Be=0;!/[A-Z]/.test(Ge=Oe.charAt(Be));){if(Be>=2)throw"MGRSPoint bad conversion from: "+Oe;ke+=Ge,Be++}var je=parseInt(ke,10);if(Be===0||Be+3>e)throw"MGRSPoint bad conversion from: "+Oe;var Ve=Oe.charAt(Be++);if(Ve<="A"||Ve==="B"||Ve==="Y"||Ve>="Z"||Ve==="I"||Ve==="O")throw"MGRSPoint zone letter "+Ve+" not handled: "+Oe;t=Oe.substring(Be,Be+=2);for(var Ze=get100kSetForZone(je),Qe=getEastingFromChar(t.charAt(0),Ze),en=getNorthingFromChar(t.charAt(1),Ze);en<getMinNorthing(Ve);)en+=2e6;var tn=e-Be;if(tn%2!==0)throw`MGRSPoint has to have an even number 
of digits after the zone letter and two 100km letters - front 
half for easting meters, second half for 
northing meters`+Oe;var an=tn/2,cn=0,un=0,dn,fn,pn,gn,yn;return an>0&&(dn=1e5/Math.pow(10,an),fn=Oe.substring(Be,Be+an),cn=parseFloat(fn)*dn,pn=Oe.substring(Be+an),un=parseFloat(pn)*dn),gn=cn+Qe,yn=un+en,{easting:gn,northing:yn,zoneLetter:Ve,zoneNumber:je,accuracy:dn}}function getEastingFromChar(Oe,e){for(var t=SET_ORIGIN_COLUMN_LETTERS.charCodeAt(e-1),ke=1e5,Ge=!1;t!==Oe.charCodeAt(0);){if(t++,t===I$2&&t++,t===O$1&&t++,t>Z$1){if(Ge)throw"Bad character: "+Oe;t=A$1,Ge=!0}ke+=1e5}return ke}function getNorthingFromChar(Oe,e){if(Oe>"V")throw"MGRSPoint given invalid Northing "+Oe;for(var t=SET_ORIGIN_ROW_LETTERS.charCodeAt(e-1),ke=0,Ge=!1;t!==Oe.charCodeAt(0);){if(t++,t===I$2&&t++,t===O$1&&t++,t>V$1){if(Ge)throw"Bad character: "+Oe;t=A$1,Ge=!0}ke+=1e5}return ke}function getMinNorthing(Oe){var e;switch(Oe){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+Oe}function Point(Oe,e,t){if(!(this instanceof Point))return new Point(Oe,e,t);if(Array.isArray(Oe))this.x=Oe[0],this.y=Oe[1],this.z=Oe[2]||0;else if(typeof Oe=="object")this.x=Oe.x,this.y=Oe.y,this.z=Oe.z||0;else if(typeof Oe=="string"&&typeof e>"u"){var ke=Oe.split(",");this.x=parseFloat(ke[0],10),this.y=parseFloat(ke[1],10),this.z=parseFloat(ke[2],10)||0}else this.x=Oe,this.y=e,this.z=t||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Point.fromMGRS=function(Oe){return new Point(toPoint(Oe))};Point.prototype.toMGRS=function(Oe){return forward$u([this.x,this.y],Oe)};var C00=1,C02=.25,C04=.046875,C06=.01953125,C08=.01068115234375,C22=.75,C44=.46875,C46=.013020833333333334,C48=.007120768229166667,C66=.3645833333333333,C68=.005696614583333333,C88=.3076171875;function pj_enfn(Oe){var e=[];e[0]=C00-Oe*(C02+Oe*(C04+Oe*(C06+Oe*C08))),e[1]=Oe*(C22-Oe*(C04+Oe*(C06+Oe*C08)));var t=Oe*Oe;return e[2]=t*(C44-Oe*(C46+Oe*C48)),t*=Oe,e[3]=t*(C66-Oe*C68),e[4]=t*Oe*C88,e}function pj_mlfn(Oe,e,t,ke){return t*=e,e*=e,ke[0]*Oe-t*(ke[1]+e*(ke[2]+e*(ke[3]+e*ke[4])))}var MAX_ITER$3=20;function pj_inv_mlfn(Oe,e,t){for(var ke=1/(1-e),Ge=Oe,Be=MAX_ITER$3;Be;--Be){var je=Math.sin(Ge),Ve=1-e*je*je;if(Ve=(pj_mlfn(Ge,je,Math.cos(Ge),t)-Oe)*(Ve*Math.sqrt(Ve))*ke,Ge-=Ve,Math.abs(Ve)<EPSLN)return Ge}return Ge}function init$v(){this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.es&&(this.en=pj_enfn(this.es),this.ml0=pj_mlfn(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function forward$t(Oe){var e=Oe.x,t=Oe.y,ke=adjust_lon(e-this.long0),Ge,Be,je,Ve=Math.sin(t),Ze=Math.cos(t);if(this.es){var en=Ze*ke,tn=Math.pow(en,2),an=this.ep2*Math.pow(Ze,2),cn=Math.pow(an,2),un=Math.abs(Ze)>EPSLN?Math.tan(t):0,dn=Math.pow(un,2),fn=Math.pow(dn,2);Ge=1-this.es*Math.pow(Ve,2),en=en/Math.sqrt(Ge);var pn=pj_mlfn(t,Ve,Ze,this.en);Be=this.a*(this.k0*en*(1+tn/6*(1-dn+an+tn/20*(5-18*dn+fn+14*an-58*dn*an+tn/42*(61+179*fn-fn*dn-479*dn)))))+this.x0,je=this.a*(this.k0*(pn-this.ml0+Ve*ke*en/2*(1+tn/12*(5-dn+9*an+4*cn+tn/30*(61+fn-58*dn+270*an-330*dn*an+tn/56*(1385+543*fn-fn*dn-3111*dn))))))+this.y0}else{var Qe=Ze*Math.sin(ke);if(Math.abs(Math.abs(Qe)-1)<EPSLN)return 93;if(Be=.5*this.a*this.k0*Math.log((1+Qe)/(1-Qe))+this.x0,je=Ze*Math.cos(ke)/Math.sqrt(1-Math.pow(Qe,2)),Qe=Math.abs(je),Qe>=1){if(Qe-1>EPSLN)return 93;je=0}else je=Math.acos(je);t<0&&(je=-je),je=this.a*this.k0*(je-this.lat0)+this.y0}return Oe.x=Be,Oe.y=je,Oe}function inverse$t(Oe){var e,t,ke,Ge,Be=(Oe.x-this.x0)*(1/this.a),je=(Oe.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+je/this.k0,t=pj_inv_mlfn(e,this.es,this.en),Math.abs(t)<HALF_PI){var tn=Math.sin(t),an=Math.cos(t),cn=Math.abs(an)>EPSLN?Math.tan(t):0,un=this.ep2*Math.pow(an,2),dn=Math.pow(un,2),fn=Math.pow(cn,2),pn=Math.pow(fn,2);e=1-this.es*Math.pow(tn,2);var gn=Be*Math.sqrt(e)/this.k0,yn=Math.pow(gn,2);e=e*cn,ke=t-e*yn/(1-this.es)*.5*(1-yn/12*(5+3*fn-9*un*fn+un-4*dn-yn/30*(61+90*fn-252*un*fn+45*pn+46*un-yn/56*(1385+3633*fn+4095*pn+1574*pn*fn)))),Ge=adjust_lon(this.long0+gn*(1-yn/6*(1+2*fn+un-yn/20*(5+28*fn+24*pn+8*un*fn+6*un-yn/42*(61+662*fn+1320*pn+720*pn*fn))))/an)}else ke=HALF_PI*sign(je),Ge=0;else{var Ve=Math.exp(Be/this.k0),Ze=.5*(Ve-1/Ve),Qe=this.lat0+je/this.k0,en=Math.cos(Qe);e=Math.sqrt((1-Math.pow(en,2))/(1+Math.pow(Ze,2))),ke=Math.asin(e),je<0&&(ke=-ke),Ze===0&&en===0?Ge=0:Ge=adjust_lon(Math.atan2(Ze,en)+this.long0)}return Oe.x=Ge,Oe.y=ke,Oe}var names$u=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const tmerc={init:init$v,forward:forward$t,inverse:inverse$t,names:names$u};function sinh(Oe){var e=Math.exp(Oe);return e=(e-1/e)/2,e}function hypot(Oe,e){Oe=Math.abs(Oe),e=Math.abs(e);var t=Math.max(Oe,e),ke=Math.min(Oe,e)/(t||1);return t*Math.sqrt(1+Math.pow(ke,2))}function log1py(Oe){var e=1+Oe,t=e-1;return t===0?Oe:Oe*Math.log(e)/t}function asinhy(Oe){var e=Math.abs(Oe);return e=log1py(e*(1+e/(hypot(1,e)+1))),Oe<0?-e:e}function gatg(Oe,e){for(var t=2*Math.cos(2*e),ke=Oe.length-1,Ge=Oe[ke],Be=0,je;--ke>=0;)je=-Be+t*Ge+Oe[ke],Be=Ge,Ge=je;return e+je*Math.sin(2*e)}function clens(Oe,e){for(var t=2*Math.cos(e),ke=Oe.length-1,Ge=Oe[ke],Be=0,je;--ke>=0;)je=-Be+t*Ge+Oe[ke],Be=Ge,Ge=je;return Math.sin(e)*je}function cosh(Oe){var e=Math.exp(Oe);return e=(e+1/e)/2,e}function clens_cmplx(Oe,e,t){for(var ke=Math.sin(e),Ge=Math.cos(e),Be=sinh(t),je=cosh(t),Ve=2*Ge*je,Ze=-2*ke*Be,Qe=Oe.length-1,en=Oe[Qe],tn=0,an=0,cn=0,un,dn;--Qe>=0;)un=an,dn=tn,an=en,tn=cn,en=-un+Ve*an-Ze*tn+Oe[Qe],cn=-dn+Ze*an+Ve*tn;return Ve=ke*je,Ze=Ge*Be,[Ve*en-Ze*cn,Ve*cn+Ze*en]}function init$u(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(tmerc.init.apply(this),this.forward=tmerc.forward,this.inverse=tmerc.inverse),this.x0=this.x0!==void 0?this.x0:0,this.y0=this.y0!==void 0?this.y0:0,this.long0=this.long0!==void 0?this.long0:0,this.lat0=this.lat0!==void 0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var Oe=this.es/(1+Math.sqrt(1-this.es)),e=Oe/(2-Oe),t=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+e*(-2854/675)))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))),t=t*e,this.cgb[1]=t*(7/3+e*(-8/5+e*(-227/45+e*(2704/315+e*(2323/945))))),this.cbg[1]=t*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),t=t*e,this.cgb[2]=t*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=t*(-26/15+e*(34/21+e*(8/5+e*(-12686/2835)))),t=t*e,this.cgb[3]=t*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=t*(1237/630+e*(-12/5+e*(-24832/14175))),t=t*e,this.cgb[4]=t*(4174/315+e*(-144838/6237)),this.cbg[4]=t*(-734/315+e*(109598/31185)),t=t*e,this.cgb[5]=t*(601676/22275),this.cbg[5]=t*(444337/155925),t=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+t*(1/4+t*(1/64+t/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=t*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=t*(13/48+e*(-3/5+e*(557/1440+e*(281/630+e*(-1983433/1935360))))),t=t*e,this.utg[2]=t*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=t*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),t=t*e,this.utg[3]=t*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=t*(49561/161280+e*(-179/168+e*(6601661/7257600))),t=t*e,this.utg[4]=t*(-4583/161280+e*(108847/3991680)),this.gtu[4]=t*(34729/80640+e*(-3418889/1995840)),t=t*e,this.utg[5]=t*(-20648693/638668800),this.gtu[5]=t*(212378941/319334400);var ke=gatg(this.cbg,this.lat0);this.Zb=-this.Qn*(ke+clens(this.gtu,2*ke))}function forward$s(Oe){var e=adjust_lon(Oe.x-this.long0),t=Oe.y;t=gatg(this.cbg,t);var ke=Math.sin(t),Ge=Math.cos(t),Be=Math.sin(e),je=Math.cos(e);t=Math.atan2(ke,je*Ge),e=Math.atan2(Be*Ge,hypot(ke,Ge*je)),e=asinhy(Math.tan(e));var Ve=clens_cmplx(this.gtu,2*t,2*e);t=t+Ve[0],e=e+Ve[1];var Ze,Qe;return Math.abs(e)<=2.623395162778?(Ze=this.a*(this.Qn*e)+this.x0,Qe=this.a*(this.Qn*t+this.Zb)+this.y0):(Ze=1/0,Qe=1/0),Oe.x=Ze,Oe.y=Qe,Oe}function inverse$s(Oe){var e=(Oe.x-this.x0)*(1/this.a),t=(Oe.y-this.y0)*(1/this.a);t=(t-this.Zb)/this.Qn,e=e/this.Qn;var ke,Ge;if(Math.abs(e)<=2.623395162778){var Be=clens_cmplx(this.utg,2*t,2*e);t=t+Be[0],e=e+Be[1],e=Math.atan(sinh(e));var je=Math.sin(t),Ve=Math.cos(t),Ze=Math.sin(e),Qe=Math.cos(e);t=Math.atan2(je*Qe,hypot(Ze,Qe*Ve)),e=Math.atan2(Ze,Qe*Ve),ke=adjust_lon(e+this.long0),Ge=gatg(this.cgb,t)}else ke=1/0,Ge=1/0;return Oe.x=ke,Oe.y=Ge,Oe}var names$t=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const etmerc={init:init$u,forward:forward$s,inverse:inverse$s,names:names$t};function adjust_zone(Oe,e){if(Oe===void 0){if(Oe=Math.floor((adjust_lon(e)+Math.PI)*30/Math.PI)+1,Oe<0)return 0;if(Oe>60)return 60}return Oe}var dependsOn="etmerc";function init$t(){var Oe=adjust_zone(this.zone,this.long0);if(Oe===void 0)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(Oe)-183)*D2R$1,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,etmerc.init.apply(this),this.forward=etmerc.forward,this.inverse=etmerc.inverse}var names$s=["Universal Transverse Mercator System","utm"];const utm={init:init$t,names:names$s,dependsOn};function srat(Oe,e){return Math.pow((1-Oe)/(1+Oe),e)}var MAX_ITER$2=20;function init$s(){var Oe=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*Oe*Oe),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(Oe/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+FORTPI)/(Math.pow(Math.tan(.5*this.lat0+FORTPI),this.C)*srat(this.e*Oe,this.ratexp))}function forward$r(Oe){var e=Oe.x,t=Oe.y;return Oe.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*t+FORTPI),this.C)*srat(this.e*Math.sin(t),this.ratexp))-HALF_PI,Oe.x=this.C*e,Oe}function inverse$r(Oe){for(var e=1e-14,t=Oe.x/this.C,ke=Oe.y,Ge=Math.pow(Math.tan(.5*ke+FORTPI)/this.K,1/this.C),Be=MAX_ITER$2;Be>0&&(ke=2*Math.atan(Ge*srat(this.e*Math.sin(Oe.y),-.5*this.e))-HALF_PI,!(Math.abs(ke-Oe.y)<e));--Be)Oe.y=ke;return Be?(Oe.x=t,Oe.y=ke,Oe):null}const gauss={init:init$s,forward:forward$r,inverse:inverse$r};function init$r(){gauss.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function forward$q(Oe){var e,t,ke,Ge;return Oe.x=adjust_lon(Oe.x-this.long0),gauss.forward.apply(this,[Oe]),e=Math.sin(Oe.y),t=Math.cos(Oe.y),ke=Math.cos(Oe.x),Ge=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*t*ke),Oe.x=Ge*t*Math.sin(Oe.x),Oe.y=Ge*(this.cosc0*e-this.sinc0*t*ke),Oe.x=this.a*Oe.x+this.x0,Oe.y=this.a*Oe.y+this.y0,Oe}function inverse$q(Oe){var e,t,ke,Ge,Be;if(Oe.x=(Oe.x-this.x0)/this.a,Oe.y=(Oe.y-this.y0)/this.a,Oe.x/=this.k0,Oe.y/=this.k0,Be=hypot(Oe.x,Oe.y)){var je=2*Math.atan2(Be,this.R2);e=Math.sin(je),t=Math.cos(je),Ge=Math.asin(t*this.sinc0+Oe.y*e*this.cosc0/Be),ke=Math.atan2(Oe.x*e,Be*this.cosc0*t-Oe.y*this.sinc0*e)}else Ge=this.phic0,ke=0;return Oe.x=ke,Oe.y=Ge,gauss.inverse.apply(this,[Oe]),Oe.x=adjust_lon(Oe.x+this.long0),Oe}var names$r=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const sterea={init:init$r,forward:forward$q,inverse:inverse$q,names:names$r};function ssfn_(Oe,e,t){return e*=t,Math.tan(.5*(HALF_PI+Oe))*Math.pow((1-e)/(1+e),.5*t)}function init$q(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&(this.k0=.5*(1+sign(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),this.k0===1&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=EPSLN&&Math.abs(Math.cos(this.lat_ts))>EPSLN&&(this.k0=.5*this.cons*msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/tsfnz(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=msfnz(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function forward$p(Oe){var e=Oe.x,t=Oe.y,ke=Math.sin(t),Ge=Math.cos(t),Be,je,Ve,Ze,Qe,en,tn=adjust_lon(e-this.long0);return Math.abs(Math.abs(e-this.long0)-Math.PI)<=EPSLN&&Math.abs(t+this.lat0)<=EPSLN?(Oe.x=NaN,Oe.y=NaN,Oe):this.sphere?(Be=2*this.k0/(1+this.sinlat0*ke+this.coslat0*Ge*Math.cos(tn)),Oe.x=this.a*Be*Ge*Math.sin(tn)+this.x0,Oe.y=this.a*Be*(this.coslat0*ke-this.sinlat0*Ge*Math.cos(tn))+this.y0,Oe):(je=2*Math.atan(this.ssfn_(t,ke,this.e))-HALF_PI,Ze=Math.cos(je),Ve=Math.sin(je),Math.abs(this.coslat0)<=EPSLN?(Qe=tsfnz(this.e,t*this.con,this.con*ke),en=2*this.a*this.k0*Qe/this.cons,Oe.x=this.x0+en*Math.sin(e-this.long0),Oe.y=this.y0-this.con*en*Math.cos(e-this.long0),Oe):(Math.abs(this.sinlat0)<EPSLN?(Be=2*this.a*this.k0/(1+Ze*Math.cos(tn)),Oe.y=Be*Ve):(Be=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*Ve+this.cosX0*Ze*Math.cos(tn))),Oe.y=Be*(this.cosX0*Ve-this.sinX0*Ze*Math.cos(tn))+this.y0),Oe.x=Be*Ze*Math.sin(tn)+this.x0,Oe))}function inverse$p(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e,t,ke,Ge,Be,je=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y);if(this.sphere){var Ve=2*Math.atan(je/(2*this.a*this.k0));return e=this.long0,t=this.lat0,je<=EPSLN?(Oe.x=e,Oe.y=t,Oe):(t=Math.asin(Math.cos(Ve)*this.sinlat0+Oe.y*Math.sin(Ve)*this.coslat0/je),Math.abs(this.coslat0)<EPSLN?this.lat0>0?e=adjust_lon(this.long0+Math.atan2(Oe.x,-1*Oe.y)):e=adjust_lon(this.long0+Math.atan2(Oe.x,Oe.y)):e=adjust_lon(this.long0+Math.atan2(Oe.x*Math.sin(Ve),je*this.coslat0*Math.cos(Ve)-Oe.y*this.sinlat0*Math.sin(Ve))),Oe.x=e,Oe.y=t,Oe)}else if(Math.abs(this.coslat0)<=EPSLN){if(je<=EPSLN)return t=this.lat0,e=this.long0,Oe.x=e,Oe.y=t,Oe;Oe.x*=this.con,Oe.y*=this.con,ke=je*this.cons/(2*this.a*this.k0),t=this.con*phi2z(this.e,ke),e=this.con*adjust_lon(this.con*this.long0+Math.atan2(Oe.x,-1*Oe.y))}else Ge=2*Math.atan(je*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,je<=EPSLN?Be=this.X0:(Be=Math.asin(Math.cos(Ge)*this.sinX0+Oe.y*Math.sin(Ge)*this.cosX0/je),e=adjust_lon(this.long0+Math.atan2(Oe.x*Math.sin(Ge),je*this.cosX0*Math.cos(Ge)-Oe.y*this.sinX0*Math.sin(Ge)))),t=-1*phi2z(this.e,Math.tan(.5*(HALF_PI+Be)));return Oe.x=e,Oe.y=t,Oe}var names$q=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const stere={init:init$q,forward:forward$p,inverse:inverse$p,names:names$q,ssfn_};function init$p(){var Oe=this.lat0;this.lambda0=this.long0;var e=Math.sin(Oe),t=this.a,ke=this.rf,Ge=1/ke,Be=2*Ge-Math.pow(Ge,2),je=this.e=Math.sqrt(Be);this.R=this.k0*t*Math.sqrt(1-Be)/(1-Be*Math.pow(e,2)),this.alpha=Math.sqrt(1+Be/(1-Be)*Math.pow(Math.cos(Oe),4)),this.b0=Math.asin(e/this.alpha);var Ve=Math.log(Math.tan(Math.PI/4+this.b0/2)),Ze=Math.log(Math.tan(Math.PI/4+Oe/2)),Qe=Math.log((1+je*e)/(1-je*e));this.K=Ve-this.alpha*Ze+this.alpha*je/2*Qe}function forward$o(Oe){var e=Math.log(Math.tan(Math.PI/4-Oe.y/2)),t=this.e/2*Math.log((1+this.e*Math.sin(Oe.y))/(1-this.e*Math.sin(Oe.y))),ke=-this.alpha*(e+t)+this.K,Ge=2*(Math.atan(Math.exp(ke))-Math.PI/4),Be=this.alpha*(Oe.x-this.lambda0),je=Math.atan(Math.sin(Be)/(Math.sin(this.b0)*Math.tan(Ge)+Math.cos(this.b0)*Math.cos(Be))),Ve=Math.asin(Math.cos(this.b0)*Math.sin(Ge)-Math.sin(this.b0)*Math.cos(Ge)*Math.cos(Be));return Oe.y=this.R/2*Math.log((1+Math.sin(Ve))/(1-Math.sin(Ve)))+this.y0,Oe.x=this.R*je+this.x0,Oe}function inverse$o(Oe){for(var e=Oe.x-this.x0,t=Oe.y-this.y0,ke=e/this.R,Ge=2*(Math.atan(Math.exp(t/this.R))-Math.PI/4),Be=Math.asin(Math.cos(this.b0)*Math.sin(Ge)+Math.sin(this.b0)*Math.cos(Ge)*Math.cos(ke)),je=Math.atan(Math.sin(ke)/(Math.cos(this.b0)*Math.cos(ke)-Math.sin(this.b0)*Math.tan(Ge))),Ve=this.lambda0+je/this.alpha,Ze=0,Qe=Be,en=-1e3,tn=0;Math.abs(Qe-en)>1e-7;){if(++tn>20)return;Ze=1/this.alpha*(Math.log(Math.tan(Math.PI/4+Be/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(Qe))/2)),en=Qe,Qe=2*Math.atan(Math.exp(Ze))-Math.PI/2}return Oe.x=Ve,Oe.y=Qe,Oe}var names$p=["somerc"];const somerc={init:init$p,forward:forward$o,inverse:inverse$o,names:names$p};var TOL=1e-7;function isTypeA(Oe){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],t=typeof Oe.PROJECTION=="object"?Object.keys(Oe.PROJECTION)[0]:Oe.PROJECTION;return"no_uoff"in Oe||"no_off"in Oe||e.indexOf(t)!==-1}function init$o(){var Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe,en=0,tn,an=0,cn=0,un=0,dn=0,fn=0,pn=0;this.no_off=isTypeA(this),this.no_rot="no_rot"in this;var gn=!1;"alpha"in this&&(gn=!0);var yn=!1;if("rectified_grid_angle"in this&&(yn=!0),gn&&(pn=this.alpha),yn&&(en=this.rectified_grid_angle*D2R$1),gn||yn)an=this.longc;else if(cn=this.long1,dn=this.lat1,un=this.long2,fn=this.lat2,Math.abs(dn-fn)<=TOL||(Oe=Math.abs(dn))<=TOL||Math.abs(Oe-HALF_PI)<=TOL||Math.abs(Math.abs(this.lat0)-HALF_PI)<=TOL||Math.abs(Math.abs(fn)-HALF_PI)<=TOL)throw new Error;var vn=1-this.es;e=Math.sqrt(vn),Math.abs(this.lat0)>EPSLN?(Ve=Math.sin(this.lat0),t=Math.cos(this.lat0),Oe=1-this.es*Ve*Ve,this.B=t*t,this.B=Math.sqrt(1+this.es*this.B*this.B/vn),this.A=this.B*this.k0*e/Oe,ke=this.B*e/(t*Math.sqrt(Oe)),Ge=ke*ke-1,Ge<=0?Ge=0:(Ge=Math.sqrt(Ge),this.lat0<0&&(Ge=-Ge)),this.E=Ge+=ke,this.E*=Math.pow(tsfnz(this.e,this.lat0,Ve),this.B)):(this.B=1/e,this.A=this.k0,this.E=ke=Ge=1),gn||yn?(gn?(tn=Math.asin(Math.sin(pn)/ke),yn||(en=pn)):(tn=en,pn=Math.asin(ke*Math.sin(tn))),this.lam0=an-Math.asin(.5*(Ge-1/Ge)*Math.tan(tn))/this.B):(Be=Math.pow(tsfnz(this.e,dn,Math.sin(dn)),this.B),je=Math.pow(tsfnz(this.e,fn,Math.sin(fn)),this.B),Ge=this.E/Be,Ze=(je-Be)/(je+Be),Qe=this.E*this.E,Qe=(Qe-je*Be)/(Qe+je*Be),Oe=cn-un,Oe<-Math.pi?un-=TWO_PI:Oe>Math.pi&&(un+=TWO_PI),this.lam0=adjust_lon(.5*(cn+un)-Math.atan(Qe*Math.tan(.5*this.B*(cn-un))/Ze)/this.B),tn=Math.atan(2*Math.sin(this.B*adjust_lon(cn-this.lam0))/(Ge-1/Ge)),en=pn=Math.asin(ke*Math.sin(tn))),this.singam=Math.sin(tn),this.cosgam=Math.cos(tn),this.sinrot=Math.sin(en),this.cosrot=Math.cos(en),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A*this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(ke*ke-1)/Math.cos(pn))),this.lat0<0&&(this.u_0=-this.u_0)),Ge=.5*tn,this.v_pole_n=this.ArB*Math.log(Math.tan(FORTPI-Ge)),this.v_pole_s=this.ArB*Math.log(Math.tan(FORTPI+Ge))}function forward$n(Oe){var e={},t,ke,Ge,Be,je,Ve,Ze,Qe;if(Oe.x=Oe.x-this.lam0,Math.abs(Math.abs(Oe.y)-HALF_PI)>EPSLN){if(je=this.E/Math.pow(tsfnz(this.e,Oe.y,Math.sin(Oe.y)),this.B),Ve=1/je,t=.5*(je-Ve),ke=.5*(je+Ve),Be=Math.sin(this.B*Oe.x),Ge=(t*this.singam-Be*this.cosgam)/ke,Math.abs(Math.abs(Ge)-1)<EPSLN)throw new Error;Qe=.5*this.ArB*Math.log((1-Ge)/(1+Ge)),Ve=Math.cos(this.B*Oe.x),Math.abs(Ve)<TOL?Ze=this.A*Oe.x:Ze=this.ArB*Math.atan2(t*this.cosgam+Be*this.singam,Ve)}else Qe=Oe.y>0?this.v_pole_n:this.v_pole_s,Ze=this.ArB*Oe.y;return this.no_rot?(e.x=Ze,e.y=Qe):(Ze-=this.u_0,e.x=Qe*this.cosrot+Ze*this.sinrot,e.y=Ze*this.cosrot-Qe*this.sinrot),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e}function inverse$n(Oe){var e,t,ke,Ge,Be,je,Ve,Ze={};if(Oe.x=(Oe.x-this.x0)*(1/this.a),Oe.y=(Oe.y-this.y0)*(1/this.a),this.no_rot?(t=Oe.y,e=Oe.x):(t=Oe.x*this.cosrot-Oe.y*this.sinrot,e=Oe.y*this.cosrot+Oe.x*this.sinrot+this.u_0),ke=Math.exp(-this.BrA*t),Ge=.5*(ke-1/ke),Be=.5*(ke+1/ke),je=Math.sin(this.BrA*e),Ve=(je*this.cosgam+Ge*this.singam)/Be,Math.abs(Math.abs(Ve)-1)<EPSLN)Ze.x=0,Ze.y=Ve<0?-HALF_PI:HALF_PI;else{if(Ze.y=this.E/Math.sqrt((1+Ve)/(1-Ve)),Ze.y=phi2z(this.e,Math.pow(Ze.y,1/this.B)),Ze.y===1/0)throw new Error;Ze.x=-this.rB*Math.atan2(Ge*this.cosgam-je*this.singam,Math.cos(this.BrA*e))}return Ze.x+=this.lam0,Ze}var names$o=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const omerc={init:init$o,forward:forward$n,inverse:inverse$n,names:names$o};function init$n(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<EPSLN)){var Oe=this.b/this.a;this.e=Math.sqrt(1-Oe*Oe);var e=Math.sin(this.lat1),t=Math.cos(this.lat1),ke=msfnz(this.e,e,t),Ge=tsfnz(this.e,this.lat1,e),Be=Math.sin(this.lat2),je=Math.cos(this.lat2),Ve=msfnz(this.e,Be,je),Ze=tsfnz(this.e,this.lat2,Be),Qe=tsfnz(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>EPSLN?this.ns=Math.log(ke/Ve)/Math.log(Ge/Ze):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=ke/(this.ns*Math.pow(Ge,this.ns)),this.rh=this.a*this.f0*Math.pow(Qe,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function forward$m(Oe){var e=Oe.x,t=Oe.y;Math.abs(2*Math.abs(t)-Math.PI)<=EPSLN&&(t=sign(t)*(HALF_PI-2*EPSLN));var ke=Math.abs(Math.abs(t)-HALF_PI),Ge,Be;if(ke>EPSLN)Ge=tsfnz(this.e,t,Math.sin(t)),Be=this.a*this.f0*Math.pow(Ge,this.ns);else{if(ke=t*this.ns,ke<=0)return null;Be=0}var je=this.ns*adjust_lon(e-this.long0);return Oe.x=this.k0*(Be*Math.sin(je))+this.x0,Oe.y=this.k0*(this.rh-Be*Math.cos(je))+this.y0,Oe}function inverse$m(Oe){var e,t,ke,Ge,Be,je=(Oe.x-this.x0)/this.k0,Ve=this.rh-(Oe.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(je*je+Ve*Ve),t=1):(e=-Math.sqrt(je*je+Ve*Ve),t=-1);var Ze=0;if(e!==0&&(Ze=Math.atan2(t*je,t*Ve)),e!==0||this.ns>0){if(t=1/this.ns,ke=Math.pow(e/(this.a*this.f0),t),Ge=phi2z(this.e,ke),Ge===-9999)return null}else Ge=-HALF_PI;return Be=adjust_lon(Ze/this.ns+this.long0),Oe.x=Be,Oe.y=Ge,Oe}var names$n=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const lcc={init:init$n,forward:forward$m,inverse:inverse$m,names:names$n};function init$m(){this.a=6377397155e-3,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.7417649320975901-.308341501185665),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function forward$l(Oe){var e,t,ke,Ge,Be,je,Ve,Ze=Oe.x,Qe=Oe.y,en=adjust_lon(Ze-this.long0);return e=Math.pow((1+this.e*Math.sin(Qe))/(1-this.e*Math.sin(Qe)),this.alfa*this.e/2),t=2*(Math.atan(this.k*Math.pow(Math.tan(Qe/2+this.s45),this.alfa)/e)-this.s45),ke=-en*this.alfa,Ge=Math.asin(Math.cos(this.ad)*Math.sin(t)+Math.sin(this.ad)*Math.cos(t)*Math.cos(ke)),Be=Math.asin(Math.cos(t)*Math.sin(ke)/Math.cos(Ge)),je=this.n*Be,Ve=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(Ge/2+this.s45),this.n),Oe.y=Ve*Math.cos(je)/1,Oe.x=Ve*Math.sin(je)/1,this.czech||(Oe.y*=-1,Oe.x*=-1),Oe}function inverse$l(Oe){var e,t,ke,Ge,Be,je,Ve,Ze,Qe=Oe.x;Oe.x=Oe.y,Oe.y=Qe,this.czech||(Oe.y*=-1,Oe.x*=-1),je=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),Be=Math.atan2(Oe.y,Oe.x),Ge=Be/Math.sin(this.s0),ke=2*(Math.atan(Math.pow(this.ro0/je,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(ke)-Math.sin(this.ad)*Math.cos(ke)*Math.cos(Ge)),t=Math.asin(Math.cos(ke)*Math.sin(Ge)/Math.cos(e)),Oe.x=this.long0-t/this.alfa,Ve=e,Ze=0;var en=0;do Oe.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(Ve))/(1-this.e*Math.sin(Ve)),this.e/2))-this.s45),Math.abs(Ve-Oe.y)<1e-10&&(Ze=1),Ve=Oe.y,en+=1;while(Ze===0&&en<15);return en>=15?null:Oe}var names$m=["Krovak","krovak"];const krovak={init:init$m,forward:forward$l,inverse:inverse$l,names:names$m};function mlfn(Oe,e,t,ke,Ge){return Oe*Ge-e*Math.sin(2*Ge)+t*Math.sin(4*Ge)-ke*Math.sin(6*Ge)}function e0fn(Oe){return 1-.25*Oe*(1+Oe/16*(3+1.25*Oe))}function e1fn(Oe){return .375*Oe*(1+.25*Oe*(1+.46875*Oe))}function e2fn(Oe){return .05859375*Oe*Oe*(1+.75*Oe)}function e3fn(Oe){return Oe*Oe*Oe*(35/3072)}function gN(Oe,e,t){var ke=e*t;return Oe/Math.sqrt(1-ke*ke)}function adjust_lat(Oe){return Math.abs(Oe)<HALF_PI?Oe:Oe-sign(Oe)*Math.PI}function imlfn(Oe,e,t,ke,Ge){var Be,je;Be=Oe/e;for(var Ve=0;Ve<15;Ve++)if(je=(Oe-(e*Be-t*Math.sin(2*Be)+ke*Math.sin(4*Be)-Ge*Math.sin(6*Be)))/(e-2*t*Math.cos(2*Be)+4*ke*Math.cos(4*Be)-6*Ge*Math.cos(6*Be)),Be+=je,Math.abs(je)<=1e-10)return Be;return NaN}function init$l(){this.sphere||(this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0))}function forward$k(Oe){var e,t,ke=Oe.x,Ge=Oe.y;if(ke=adjust_lon(ke-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(Ge)*Math.sin(ke)),t=this.a*(Math.atan2(Math.tan(Ge),Math.cos(ke))-this.lat0);else{var Be=Math.sin(Ge),je=Math.cos(Ge),Ve=gN(this.a,this.e,Be),Ze=Math.tan(Ge)*Math.tan(Ge),Qe=ke*Math.cos(Ge),en=Qe*Qe,tn=this.es*je*je/(1-this.es),an=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,Ge);e=Ve*Qe*(1-en*Ze*(1/6-(8-Ze+8*tn)*en/120)),t=an-this.ml0+Ve*Be/je*en*(.5+(5-Ze+6*tn)*en/24)}return Oe.x=e+this.x0,Oe.y=t+this.y0,Oe}function inverse$k(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e=Oe.x/this.a,t=Oe.y/this.a,ke,Ge;if(this.sphere){var Be=t+this.lat0;ke=Math.asin(Math.sin(Be)*Math.cos(e)),Ge=Math.atan2(Math.tan(e),Math.cos(Be))}else{var je=this.ml0/this.a+t,Ve=imlfn(je,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(Ve)-HALF_PI)<=EPSLN)return Oe.x=this.long0,Oe.y=HALF_PI,t<0&&(Oe.y*=-1),Oe;var Ze=gN(this.a,this.e,Math.sin(Ve)),Qe=Ze*Ze*Ze/this.a/this.a*(1-this.es),en=Math.pow(Math.tan(Ve),2),tn=e*this.a/Ze,an=tn*tn;ke=Ve-Ze*Math.tan(Ve)/Qe*tn*tn*(.5-(1+3*en)*tn*tn/24),Ge=tn*(1-an*(en/3+(1+3*en)*en*an/15))/Math.cos(Ve)}return Oe.x=adjust_lon(Ge+this.long0),Oe.y=adjust_lat(ke),Oe}var names$l=["Cassini","Cassini_Soldner","cass"];const cass={init:init$l,forward:forward$k,inverse:inverse$k,names:names$l};function qsfnz(Oe,e){var t;return Oe>1e-7?(t=Oe*e,(1-Oe*Oe)*(e/(1-t*t)-.5/Oe*Math.log((1-t)/(1+t)))):2*e}var S_POLE=1,N_POLE=2,EQUIT=3,OBLIQ=4;function init$k(){var Oe=Math.abs(this.lat0);if(Math.abs(Oe-HALF_PI)<EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(Oe)<EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0){var e;switch(this.qp=qsfnz(this.e,1),this.mmf=.5/(1-this.es),this.apa=authset(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=qsfnz(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function forward$j(Oe){var e,t,ke,Ge,Be,je,Ve,Ze,Qe,en,tn=Oe.x,an=Oe.y;if(tn=adjust_lon(tn-this.long0),this.sphere){if(Be=Math.sin(an),en=Math.cos(an),ke=Math.cos(tn),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(t=this.mode===this.EQUIT?1+en*ke:1+this.sinph0*Be+this.cosph0*en*ke,t<=EPSLN)return null;t=Math.sqrt(2/t),e=t*en*Math.sin(tn),t*=this.mode===this.EQUIT?Be:this.cosph0*Be-this.sinph0*en*ke}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(ke=-ke),Math.abs(an+this.lat0)<EPSLN)return null;t=FORTPI-an*.5,t=2*(this.mode===this.S_POLE?Math.cos(t):Math.sin(t)),e=t*Math.sin(tn),t*=ke}}else{switch(Ve=0,Ze=0,Qe=0,ke=Math.cos(tn),Ge=Math.sin(tn),Be=Math.sin(an),je=qsfnz(this.e,Be),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(Ve=je/this.qp,Ze=Math.sqrt(1-Ve*Ve)),this.mode){case this.OBLIQ:Qe=1+this.sinb1*Ve+this.cosb1*Ze*ke;break;case this.EQUIT:Qe=1+Ze*ke;break;case this.N_POLE:Qe=HALF_PI+an,je=this.qp-je;break;case this.S_POLE:Qe=an-HALF_PI,je=this.qp+je;break}if(Math.abs(Qe)<EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:Qe=Math.sqrt(2/Qe),this.mode===this.OBLIQ?t=this.ymf*Qe*(this.cosb1*Ve-this.sinb1*Ze*ke):t=(Qe=Math.sqrt(2/(1+Ze*ke)))*Ve*this.ymf,e=this.xmf*Qe*Ze*Ge;break;case this.N_POLE:case this.S_POLE:je>=0?(e=(Qe=Math.sqrt(je))*Ge,t=ke*(this.mode===this.S_POLE?Qe:-Qe)):e=t=0;break}}return Oe.x=this.a*e+this.x0,Oe.y=this.a*t+this.y0,Oe}function inverse$j(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e=Oe.x/this.a,t=Oe.y/this.a,ke,Ge,Be,je,Ve,Ze,Qe;if(this.sphere){var en=0,tn,an=0;if(tn=Math.sqrt(e*e+t*t),Ge=tn*.5,Ge>1)return null;switch(Ge=2*Math.asin(Ge),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(an=Math.sin(Ge),en=Math.cos(Ge)),this.mode){case this.EQUIT:Ge=Math.abs(tn)<=EPSLN?0:Math.asin(t*an/tn),e*=an,t=en*tn;break;case this.OBLIQ:Ge=Math.abs(tn)<=EPSLN?this.lat0:Math.asin(en*this.sinph0+t*an*this.cosph0/tn),e*=an*this.cosph0,t=(en-Math.sin(Ge)*this.sinph0)*tn;break;case this.N_POLE:t=-t,Ge=HALF_PI-Ge;break;case this.S_POLE:Ge-=HALF_PI;break}ke=t===0&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(e,t)}else{if(Qe=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(e/=this.dd,t*=this.dd,Ze=Math.sqrt(e*e+t*t),Ze<EPSLN)return Oe.x=this.long0,Oe.y=this.lat0,Oe;je=2*Math.asin(.5*Ze/this.rq),Be=Math.cos(je),e*=je=Math.sin(je),this.mode===this.OBLIQ?(Qe=Be*this.sinb1+t*je*this.cosb1/Ze,Ve=this.qp*Qe,t=Ze*this.cosb1*Be-t*this.sinb1*je):(Qe=t*je/Ze,Ve=this.qp*Qe,t=Ze*Be)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(t=-t),Ve=e*e+t*t,!Ve)return Oe.x=this.long0,Oe.y=this.lat0,Oe;Qe=1-Ve/this.qp,this.mode===this.S_POLE&&(Qe=-Qe)}ke=Math.atan2(e,t),Ge=authlat(Math.asin(Qe),this.apa)}return Oe.x=adjust_lon(this.long0+ke),Oe.y=Ge,Oe}var P00=.3333333333333333,P01=.17222222222222222,P02=.10257936507936508,P10=.06388888888888888,P11=.0664021164021164,P20=.016415012942191543;function authset(Oe){var e,t=[];return t[0]=Oe*P00,e=Oe*Oe,t[0]+=e*P01,t[1]=e*P10,e*=Oe,t[0]+=e*P02,t[1]+=e*P11,t[2]=e*P20,t}function authlat(Oe,e){var t=Oe+Oe;return Oe+e[0]*Math.sin(t)+e[1]*Math.sin(t+t)+e[2]*Math.sin(t+t+t)}var names$k=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const laea={init:init$k,forward:forward$j,inverse:inverse$j,names:names$k,S_POLE,N_POLE,EQUIT,OBLIQ};function asinz(Oe){return Math.abs(Oe)>1&&(Oe=Oe>1?1:-1),Math.asin(Oe)}function init$j(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=msfnz(this.e3,this.sin_po,this.cos_po),this.qs1=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=msfnz(this.e3,this.sin_po,this.cos_po),this.qs2=qsfnz(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=qsfnz(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function forward$i(Oe){var e=Oe.x,t=Oe.y;this.sin_phi=Math.sin(t),this.cos_phi=Math.cos(t);var ke=qsfnz(this.e3,this.sin_phi),Ge=this.a*Math.sqrt(this.c-this.ns0*ke)/this.ns0,Be=this.ns0*adjust_lon(e-this.long0),je=Ge*Math.sin(Be)+this.x0,Ve=this.rh-Ge*Math.cos(Be)+this.y0;return Oe.x=je,Oe.y=Ve,Oe}function inverse$i(Oe){var e,t,ke,Ge,Be,je;return Oe.x-=this.x0,Oe.y=this.rh-Oe.y+this.y0,this.ns0>=0?(e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),ke=1):(e=-Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),ke=-1),Ge=0,e!==0&&(Ge=Math.atan2(ke*Oe.x,ke*Oe.y)),ke=e*this.ns0/this.a,this.sphere?je=Math.asin((this.c-ke*ke)/(2*this.ns0)):(t=(this.c-ke*ke)/this.ns0,je=this.phi1z(this.e3,t)),Be=adjust_lon(Ge/this.ns0+this.long0),Oe.x=Be,Oe.y=je,Oe}function phi1z(Oe,e){var t,ke,Ge,Be,je,Ve=asinz(.5*e);if(Oe<EPSLN)return Ve;for(var Ze=Oe*Oe,Qe=1;Qe<=25;Qe++)if(t=Math.sin(Ve),ke=Math.cos(Ve),Ge=Oe*t,Be=1-Ge*Ge,je=.5*Be*Be/ke*(e/(1-Ze)-t/Be+.5/Oe*Math.log((1-Ge)/(1+Ge))),Ve=Ve+je,Math.abs(je)<=1e-7)return Ve;return null}var names$j=["Albers_Conic_Equal_Area","Albers","aea"];const aea={init:init$j,forward:forward$i,inverse:inverse$i,names:names$j,phi1z};function init$i(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function forward$h(Oe){var e,t,ke,Ge,Be,je,Ve,Ze,Qe=Oe.x,en=Oe.y;return ke=adjust_lon(Qe-this.long0),e=Math.sin(en),t=Math.cos(en),Ge=Math.cos(ke),je=this.sin_p14*e+this.cos_p14*t*Ge,Be=1,je>0||Math.abs(je)<=EPSLN?(Ve=this.x0+this.a*Be*t*Math.sin(ke)/je,Ze=this.y0+this.a*Be*(this.cos_p14*e-this.sin_p14*t*Ge)/je):(Ve=this.x0+this.infinity_dist*t*Math.sin(ke),Ze=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*t*Ge)),Oe.x=Ve,Oe.y=Ze,Oe}function inverse$h(Oe){var e,t,ke,Ge,Be,je;return Oe.x=(Oe.x-this.x0)/this.a,Oe.y=(Oe.y-this.y0)/this.a,Oe.x/=this.k0,Oe.y/=this.k0,(e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y))?(Ge=Math.atan2(e,this.rc),t=Math.sin(Ge),ke=Math.cos(Ge),je=asinz(ke*this.sin_p14+Oe.y*t*this.cos_p14/e),Be=Math.atan2(Oe.x*t,e*this.cos_p14*ke-Oe.y*this.sin_p14*t),Be=adjust_lon(this.long0+Be)):(je=this.phic0,Be=0),Oe.x=Be,Oe.y=je,Oe}var names$i=["gnom"];const gnom={init:init$i,forward:forward$h,inverse:inverse$h,names:names$i};function iqsfnz(Oe,e){var t=1-(1-Oe*Oe)/(2*Oe)*Math.log((1-Oe)/(1+Oe));if(Math.abs(Math.abs(e)-t)<1e-6)return e<0?-1*HALF_PI:HALF_PI;for(var ke=Math.asin(.5*e),Ge,Be,je,Ve,Ze=0;Ze<30;Ze++)if(Be=Math.sin(ke),je=Math.cos(ke),Ve=Oe*Be,Ge=Math.pow(1-Ve*Ve,2)/(2*je)*(e/(1-Oe*Oe)-Be/(1-Ve*Ve)+.5/Oe*Math.log((1-Ve)/(1+Ve))),ke+=Ge,Math.abs(Ge)<=1e-10)return ke;return NaN}function init$h(){this.sphere||(this.k0=msfnz(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function forward$g(Oe){var e=Oe.x,t=Oe.y,ke,Ge,Be=adjust_lon(e-this.long0);if(this.sphere)ke=this.x0+this.a*Be*Math.cos(this.lat_ts),Ge=this.y0+this.a*Math.sin(t)/Math.cos(this.lat_ts);else{var je=qsfnz(this.e,Math.sin(t));ke=this.x0+this.a*this.k0*Be,Ge=this.y0+this.a*je*.5/this.k0}return Oe.x=ke,Oe.y=Ge,Oe}function inverse$g(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e,t;return this.sphere?(e=adjust_lon(this.long0+Oe.x/this.a/Math.cos(this.lat_ts)),t=Math.asin(Oe.y/this.a*Math.cos(this.lat_ts))):(t=iqsfnz(this.e,2*Oe.y*this.k0/this.a),e=adjust_lon(this.long0+Oe.x/(this.a*this.k0))),Oe.x=e,Oe.y=t,Oe}var names$h=["cea"];const cea={init:init$h,forward:forward$g,inverse:inverse$g,names:names$h};function init$g(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function forward$f(Oe){var e=Oe.x,t=Oe.y,ke=adjust_lon(e-this.long0),Ge=adjust_lat(t-this.lat0);return Oe.x=this.x0+this.a*ke*this.rc,Oe.y=this.y0+this.a*Ge,Oe}function inverse$f(Oe){var e=Oe.x,t=Oe.y;return Oe.x=adjust_lon(this.long0+(e-this.x0)/(this.a*this.rc)),Oe.y=adjust_lat(this.lat0+(t-this.y0)/this.a),Oe}var names$g=["Equirectangular","Equidistant_Cylindrical","eqc"];const eqc={init:init$g,forward:forward$f,inverse:inverse$f,names:names$g};var MAX_ITER$1=20;function init$f(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.ml0=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0)}function forward$e(Oe){var e=Oe.x,t=Oe.y,ke,Ge,Be,je=adjust_lon(e-this.long0);if(Be=je*Math.sin(t),this.sphere)Math.abs(t)<=EPSLN?(ke=this.a*je,Ge=-1*this.a*this.lat0):(ke=this.a*Math.sin(Be)/Math.tan(t),Ge=this.a*(adjust_lat(t-this.lat0)+(1-Math.cos(Be))/Math.tan(t)));else if(Math.abs(t)<=EPSLN)ke=this.a*je,Ge=-1*this.ml0;else{var Ve=gN(this.a,this.e,Math.sin(t))/Math.tan(t);ke=Ve*Math.sin(Be),Ge=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,t)-this.ml0+Ve*(1-Math.cos(Be))}return Oe.x=ke+this.x0,Oe.y=Ge+this.y0,Oe}function inverse$e(Oe){var e,t,ke,Ge,Be,je,Ve,Ze,Qe;if(ke=Oe.x-this.x0,Ge=Oe.y-this.y0,this.sphere)if(Math.abs(Ge+this.a*this.lat0)<=EPSLN)e=adjust_lon(ke/this.a+this.long0),t=0;else{je=this.lat0+Ge/this.a,Ve=ke*ke/this.a/this.a+je*je,Ze=je;var en;for(Be=MAX_ITER$1;Be;--Be)if(en=Math.tan(Ze),Qe=-1*(je*(Ze*en+1)-Ze-.5*(Ze*Ze+Ve)*en)/((Ze-je)/en-1),Ze+=Qe,Math.abs(Qe)<=EPSLN){t=Ze;break}e=adjust_lon(this.long0+Math.asin(ke*Math.tan(Ze)/this.a)/Math.sin(t))}else if(Math.abs(Ge+this.ml0)<=EPSLN)t=0,e=adjust_lon(this.long0+ke/this.a);else{je=(this.ml0+Ge)/this.a,Ve=ke*ke/this.a/this.a+je*je,Ze=je;var tn,an,cn,un,dn;for(Be=MAX_ITER$1;Be;--Be)if(dn=this.e*Math.sin(Ze),tn=Math.sqrt(1-dn*dn)*Math.tan(Ze),an=this.a*mlfn(this.e0,this.e1,this.e2,this.e3,Ze),cn=this.e0-2*this.e1*Math.cos(2*Ze)+4*this.e2*Math.cos(4*Ze)-6*this.e3*Math.cos(6*Ze),un=an/this.a,Qe=(je*(tn*un+1)-un-.5*tn*(un*un+Ve))/(this.es*Math.sin(2*Ze)*(un*un+Ve-2*je*un)/(4*tn)+(je-un)*(tn*cn-2/Math.sin(2*Ze))-cn),Ze-=Qe,Math.abs(Qe)<=EPSLN){t=Ze;break}tn=Math.sqrt(1-this.es*Math.pow(Math.sin(t),2))*Math.tan(t),e=adjust_lon(this.long0+Math.asin(ke*tn/this.a)/Math.sin(t))}return Oe.x=e,Oe.y=t,Oe}var names$f=["Polyconic","poly"];const poly={init:init$f,forward:forward$e,inverse:inverse$e,names:names$f};function init$e(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function forward$d(Oe){var e,t=Oe.x,ke=Oe.y,Ge=ke-this.lat0,Be=t-this.long0,je=Ge/SEC_TO_RAD*1e-5,Ve=Be,Ze=1,Qe=0;for(e=1;e<=10;e++)Ze=Ze*je,Qe=Qe+this.A[e]*Ze;var en=Qe,tn=Ve,an=1,cn=0,un,dn,fn=0,pn=0;for(e=1;e<=6;e++)un=an*en-cn*tn,dn=cn*en+an*tn,an=un,cn=dn,fn=fn+this.B_re[e]*an-this.B_im[e]*cn,pn=pn+this.B_im[e]*an+this.B_re[e]*cn;return Oe.x=pn*this.a+this.x0,Oe.y=fn*this.a+this.y0,Oe}function inverse$d(Oe){var e,t=Oe.x,ke=Oe.y,Ge=t-this.x0,Be=ke-this.y0,je=Be/this.a,Ve=Ge/this.a,Ze=1,Qe=0,en,tn,an=0,cn=0;for(e=1;e<=6;e++)en=Ze*je-Qe*Ve,tn=Qe*je+Ze*Ve,Ze=en,Qe=tn,an=an+this.C_re[e]*Ze-this.C_im[e]*Qe,cn=cn+this.C_im[e]*Ze+this.C_re[e]*Qe;for(var un=0;un<this.iterations;un++){var dn=an,fn=cn,pn,gn,yn=je,vn=Ve;for(e=2;e<=6;e++)pn=dn*an-fn*cn,gn=fn*an+dn*cn,dn=pn,fn=gn,yn=yn+(e-1)*(this.B_re[e]*dn-this.B_im[e]*fn),vn=vn+(e-1)*(this.B_im[e]*dn+this.B_re[e]*fn);dn=1,fn=0;var An=this.B_re[1],xn=this.B_im[1];for(e=2;e<=6;e++)pn=dn*an-fn*cn,gn=fn*an+dn*cn,dn=pn,fn=gn,An=An+e*(this.B_re[e]*dn-this.B_im[e]*fn),xn=xn+e*(this.B_im[e]*dn+this.B_re[e]*fn);var wn=An*An+xn*xn;an=(yn*An+vn*xn)/wn,cn=(vn*An-yn*xn)/wn}var bn=an,Mn=cn,Pn=1,En=0;for(e=1;e<=9;e++)Pn=Pn*bn,En=En+this.D[e]*Pn;var Cn=this.lat0+En*SEC_TO_RAD*1e5,Rn=this.long0+Mn;return Oe.x=Rn,Oe.y=Cn,Oe}var names$e=["New_Zealand_Map_Grid","nzmg"];const nzmg={init:init$e,forward:forward$d,inverse:inverse$d,names:names$e};function init$d(){}function forward$c(Oe){var e=Oe.x,t=Oe.y,ke=adjust_lon(e-this.long0),Ge=this.x0+this.a*ke,Be=this.y0+this.a*Math.log(Math.tan(Math.PI/4+t/2.5))*1.25;return Oe.x=Ge,Oe.y=Be,Oe}function inverse$c(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e=adjust_lon(this.long0+Oe.x/this.a),t=2.5*(Math.atan(Math.exp(.8*Oe.y/this.a))-Math.PI/4);return Oe.x=e,Oe.y=t,Oe}var names$d=["Miller_Cylindrical","mill"];const mill={init:init$d,forward:forward$c,inverse:inverse$c,names:names$d};var MAX_ITER=20;function init$c(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=pj_enfn(this.es)}function forward$b(Oe){var e,t,ke=Oe.x,Ge=Oe.y;if(ke=adjust_lon(ke-this.long0),this.sphere){if(!this.m)Ge=this.n!==1?Math.asin(this.n*Math.sin(Ge)):Ge;else for(var Be=this.n*Math.sin(Ge),je=MAX_ITER;je;--je){var Ve=(this.m*Ge+Math.sin(Ge)-Be)/(this.m+Math.cos(Ge));if(Ge-=Ve,Math.abs(Ve)<EPSLN)break}e=this.a*this.C_x*ke*(this.m+Math.cos(Ge)),t=this.a*this.C_y*Ge}else{var Ze=Math.sin(Ge),Qe=Math.cos(Ge);t=this.a*pj_mlfn(Ge,Ze,Qe,this.en),e=this.a*ke*Qe/Math.sqrt(1-this.es*Ze*Ze)}return Oe.x=e,Oe.y=t,Oe}function inverse$b(Oe){var e,t,ke,Ge;return Oe.x-=this.x0,ke=Oe.x/this.a,Oe.y-=this.y0,e=Oe.y/this.a,this.sphere?(e/=this.C_y,ke=ke/(this.C_x*(this.m+Math.cos(e))),this.m?e=asinz((this.m*e+Math.sin(e))/this.n):this.n!==1&&(e=asinz(Math.sin(e)/this.n)),ke=adjust_lon(ke+this.long0),e=adjust_lat(e)):(e=pj_inv_mlfn(Oe.y/this.a,this.es,this.en),Ge=Math.abs(e),Ge<HALF_PI?(Ge=Math.sin(e),t=this.long0+Oe.x*Math.sqrt(1-this.es*Ge*Ge)/(this.a*Math.cos(e)),ke=adjust_lon(t)):Ge-EPSLN<HALF_PI&&(ke=this.long0)),Oe.x=ke,Oe.y=e,Oe}var names$c=["Sinusoidal","sinu"];const sinu={init:init$c,forward:forward$b,inverse:inverse$b,names:names$c};function init$b(){}function forward$a(Oe){for(var e=Oe.x,t=Oe.y,ke=adjust_lon(e-this.long0),Ge=t,Be=Math.PI*Math.sin(t);;){var je=-(Ge+Math.sin(Ge)-Be)/(1+Math.cos(Ge));if(Ge+=je,Math.abs(je)<EPSLN)break}Ge/=2,Math.PI/2-Math.abs(t)<EPSLN&&(ke=0);var Ve=.900316316158*this.a*ke*Math.cos(Ge)+this.x0,Ze=1.4142135623731*this.a*Math.sin(Ge)+this.y0;return Oe.x=Ve,Oe.y=Ze,Oe}function inverse$a(Oe){var e,t;Oe.x-=this.x0,Oe.y-=this.y0,t=Oe.y/(1.4142135623731*this.a),Math.abs(t)>.999999999999&&(t=.999999999999),e=Math.asin(t);var ke=adjust_lon(this.long0+Oe.x/(.900316316158*this.a*Math.cos(e)));ke<-Math.PI&&(ke=-Math.PI),ke>Math.PI&&(ke=Math.PI),t=(2*e+Math.sin(2*e))/Math.PI,Math.abs(t)>1&&(t=1);var Ge=Math.asin(t);return Oe.x=ke,Oe.y=Ge,Oe}var names$b=["Mollweide","moll"];const moll={init:init$b,forward:forward$a,inverse:inverse$a,names:names$b};function init$a(){Math.abs(this.lat1+this.lat2)<EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=e0fn(this.es),this.e1=e1fn(this.es),this.e2=e2fn(this.es),this.e3=e3fn(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=msfnz(this.e,this.sinphi,this.cosphi),this.ml1=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=msfnz(this.e,this.sinphi,this.cosphi),this.ml2=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=mlfn(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function forward$9(Oe){var e=Oe.x,t=Oe.y,ke;if(this.sphere)ke=this.a*(this.g-t);else{var Ge=mlfn(this.e0,this.e1,this.e2,this.e3,t);ke=this.a*(this.g-Ge)}var Be=this.ns*adjust_lon(e-this.long0),je=this.x0+ke*Math.sin(Be),Ve=this.y0+this.rh-ke*Math.cos(Be);return Oe.x=je,Oe.y=Ve,Oe}function inverse$9(Oe){Oe.x-=this.x0,Oe.y=this.rh-Oe.y+this.y0;var e,t,ke,Ge;this.ns>=0?(t=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),e=1):(t=-Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),e=-1);var Be=0;if(t!==0&&(Be=Math.atan2(e*Oe.x,e*Oe.y)),this.sphere)return Ge=adjust_lon(this.long0+Be/this.ns),ke=adjust_lat(this.g-t/this.a),Oe.x=Ge,Oe.y=ke,Oe;var je=this.g-t/this.a;return ke=imlfn(je,this.e0,this.e1,this.e2,this.e3),Ge=adjust_lon(this.long0+Be/this.ns),Oe.x=Ge,Oe.y=ke,Oe}var names$a=["Equidistant_Conic","eqdc"];const eqdc={init:init$a,forward:forward$9,inverse:inverse$9,names:names$a};function init$9(){this.R=this.a}function forward$8(Oe){var e=Oe.x,t=Oe.y,ke=adjust_lon(e-this.long0),Ge,Be;Math.abs(t)<=EPSLN&&(Ge=this.x0+this.R*ke,Be=this.y0);var je=asinz(2*Math.abs(t/Math.PI));(Math.abs(ke)<=EPSLN||Math.abs(Math.abs(t)-HALF_PI)<=EPSLN)&&(Ge=this.x0,t>=0?Be=this.y0+Math.PI*this.R*Math.tan(.5*je):Be=this.y0+Math.PI*this.R*-Math.tan(.5*je));var Ve=.5*Math.abs(Math.PI/ke-ke/Math.PI),Ze=Ve*Ve,Qe=Math.sin(je),en=Math.cos(je),tn=en/(Qe+en-1),an=tn*tn,cn=tn*(2/Qe-1),un=cn*cn,dn=Math.PI*this.R*(Ve*(tn-un)+Math.sqrt(Ze*(tn-un)*(tn-un)-(un+Ze)*(an-un)))/(un+Ze);ke<0&&(dn=-dn),Ge=this.x0+dn;var fn=Ze+tn;return dn=Math.PI*this.R*(cn*fn-Ve*Math.sqrt((un+Ze)*(Ze+1)-fn*fn))/(un+Ze),t>=0?Be=this.y0+dn:Be=this.y0-dn,Oe.x=Ge,Oe.y=Be,Oe}function inverse$8(Oe){var e,t,ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn;return Oe.x-=this.x0,Oe.y-=this.y0,tn=Math.PI*this.R,ke=Oe.x/tn,Ge=Oe.y/tn,Be=ke*ke+Ge*Ge,je=-Math.abs(Ge)*(1+Be),Ve=je-2*Ge*Ge+ke*ke,Ze=-2*je+1+2*Ge*Ge+Be*Be,cn=Ge*Ge/Ze+(2*Ve*Ve*Ve/Ze/Ze/Ze-9*je*Ve/Ze/Ze)/27,Qe=(je-Ve*Ve/3/Ze)/Ze,en=2*Math.sqrt(-Qe/3),tn=3*cn/Qe/en,Math.abs(tn)>1&&(tn>=0?tn=1:tn=-1),an=Math.acos(tn)/3,Oe.y>=0?t=(-en*Math.cos(an+Math.PI/3)-Ve/3/Ze)*Math.PI:t=-(-en*Math.cos(an+Math.PI/3)-Ve/3/Ze)*Math.PI,Math.abs(ke)<EPSLN?e=this.long0:e=adjust_lon(this.long0+Math.PI*(Be-1+Math.sqrt(1+2*(ke*ke-Ge*Ge)+Be*Be))/2/ke),Oe.x=e,Oe.y=t,Oe}var names$9=["Van_der_Grinten_I","VanDerGrinten","vandg"];const vandg={init:init$9,forward:forward$8,inverse:inverse$8,names:names$9};function init$8(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function forward$7(Oe){var e=Oe.x,t=Oe.y,ke=Math.sin(Oe.y),Ge=Math.cos(Oe.y),Be=adjust_lon(e-this.long0),je,Ve,Ze,Qe,en,tn,an,cn,un,dn,fn,pn,gn,yn,vn,An,xn,wn,bn,Mn,Pn,En,Cn;return this.sphere?Math.abs(this.sin_p12-1)<=EPSLN?(Oe.x=this.x0+this.a*(HALF_PI-t)*Math.sin(Be),Oe.y=this.y0-this.a*(HALF_PI-t)*Math.cos(Be),Oe):Math.abs(this.sin_p12+1)<=EPSLN?(Oe.x=this.x0+this.a*(HALF_PI+t)*Math.sin(Be),Oe.y=this.y0+this.a*(HALF_PI+t)*Math.cos(Be),Oe):(wn=this.sin_p12*ke+this.cos_p12*Ge*Math.cos(Be),An=Math.acos(wn),xn=An?An/Math.sin(An):1,Oe.x=this.x0+this.a*xn*Ge*Math.sin(Be),Oe.y=this.y0+this.a*xn*(this.cos_p12*ke-this.sin_p12*Ge*Math.cos(Be)),Oe):(je=e0fn(this.es),Ve=e1fn(this.es),Ze=e2fn(this.es),Qe=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(en=this.a*mlfn(je,Ve,Ze,Qe,HALF_PI),tn=this.a*mlfn(je,Ve,Ze,Qe,t),Oe.x=this.x0+(en-tn)*Math.sin(Be),Oe.y=this.y0-(en-tn)*Math.cos(Be),Oe):Math.abs(this.sin_p12+1)<=EPSLN?(en=this.a*mlfn(je,Ve,Ze,Qe,HALF_PI),tn=this.a*mlfn(je,Ve,Ze,Qe,t),Oe.x=this.x0+(en+tn)*Math.sin(Be),Oe.y=this.y0+(en+tn)*Math.cos(Be),Oe):(an=ke/Ge,cn=gN(this.a,this.e,this.sin_p12),un=gN(this.a,this.e,ke),dn=Math.atan((1-this.es)*an+this.es*cn*this.sin_p12/(un*Ge)),fn=Math.atan2(Math.sin(Be),this.cos_p12*Math.tan(dn)-this.sin_p12*Math.cos(Be)),fn===0?bn=Math.asin(this.cos_p12*Math.sin(dn)-this.sin_p12*Math.cos(dn)):Math.abs(Math.abs(fn)-Math.PI)<=EPSLN?bn=-Math.asin(this.cos_p12*Math.sin(dn)-this.sin_p12*Math.cos(dn)):bn=Math.asin(Math.sin(Be)*Math.cos(dn)/Math.sin(fn)),pn=this.e*this.sin_p12/Math.sqrt(1-this.es),gn=this.e*this.cos_p12*Math.cos(fn)/Math.sqrt(1-this.es),yn=pn*gn,vn=gn*gn,Mn=bn*bn,Pn=Mn*bn,En=Pn*bn,Cn=En*bn,An=cn*bn*(1-Mn*vn*(1-vn)/6+Pn/8*yn*(1-2*vn)+En/120*(vn*(4-7*vn)-3*pn*pn*(1-7*vn))-Cn/48*yn),Oe.x=this.x0+An*Math.sin(fn),Oe.y=this.y0+An*Math.cos(fn),Oe))}function inverse$7(Oe){Oe.x-=this.x0,Oe.y-=this.y0;var e,t,ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,un,dn,fn,pn,gn,yn,vn,An,xn,wn,bn;return this.sphere?(e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),e>2*HALF_PI*this.a?void 0:(t=e/this.a,ke=Math.sin(t),Ge=Math.cos(t),Be=this.long0,Math.abs(e)<=EPSLN?je=this.lat0:(je=asinz(Ge*this.sin_p12+Oe.y*ke*this.cos_p12/e),Ve=Math.abs(this.lat0)-HALF_PI,Math.abs(Ve)<=EPSLN?this.lat0>=0?Be=adjust_lon(this.long0+Math.atan2(Oe.x,-Oe.y)):Be=adjust_lon(this.long0-Math.atan2(-Oe.x,Oe.y)):Be=adjust_lon(this.long0+Math.atan2(Oe.x*ke,e*this.cos_p12*Ge-Oe.y*this.sin_p12*ke))),Oe.x=Be,Oe.y=je,Oe)):(Ze=e0fn(this.es),Qe=e1fn(this.es),en=e2fn(this.es),tn=e3fn(this.es),Math.abs(this.sin_p12-1)<=EPSLN?(an=this.a*mlfn(Ze,Qe,en,tn,HALF_PI),e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),cn=an-e,je=imlfn(cn/this.a,Ze,Qe,en,tn),Be=adjust_lon(this.long0+Math.atan2(Oe.x,-1*Oe.y)),Oe.x=Be,Oe.y=je,Oe):Math.abs(this.sin_p12+1)<=EPSLN?(an=this.a*mlfn(Ze,Qe,en,tn,HALF_PI),e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),cn=e-an,je=imlfn(cn/this.a,Ze,Qe,en,tn),Be=adjust_lon(this.long0+Math.atan2(Oe.x,Oe.y)),Oe.x=Be,Oe.y=je,Oe):(e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),fn=Math.atan2(Oe.x,Oe.y),un=gN(this.a,this.e,this.sin_p12),pn=Math.cos(fn),gn=this.e*this.cos_p12*pn,yn=-gn*gn/(1-this.es),vn=3*this.es*(1-yn)*this.sin_p12*this.cos_p12*pn/(1-this.es),An=e/un,xn=An-yn*(1+yn)*Math.pow(An,3)/6-vn*(1+3*yn)*Math.pow(An,4)/24,wn=1-yn*xn*xn/2-An*xn*xn*xn/6,dn=Math.asin(this.sin_p12*Math.cos(xn)+this.cos_p12*Math.sin(xn)*pn),Be=adjust_lon(this.long0+Math.asin(Math.sin(fn)*Math.sin(xn)/Math.cos(dn))),bn=Math.sin(dn),je=Math.atan2((bn-this.es*wn*this.sin_p12)*Math.tan(dn),bn*(1-this.es)),Oe.x=Be,Oe.y=je,Oe))}var names$8=["Azimuthal_Equidistant","aeqd"];const aeqd={init:init$8,forward:forward$7,inverse:inverse$7,names:names$8};function init$7(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function forward$6(Oe){var e,t,ke,Ge,Be,je,Ve,Ze,Qe=Oe.x,en=Oe.y;return ke=adjust_lon(Qe-this.long0),e=Math.sin(en),t=Math.cos(en),Ge=Math.cos(ke),je=this.sin_p14*e+this.cos_p14*t*Ge,Be=1,(je>0||Math.abs(je)<=EPSLN)&&(Ve=this.a*Be*t*Math.sin(ke),Ze=this.y0+this.a*Be*(this.cos_p14*e-this.sin_p14*t*Ge)),Oe.x=Ve,Oe.y=Ze,Oe}function inverse$6(Oe){var e,t,ke,Ge,Be,je,Ve;return Oe.x-=this.x0,Oe.y-=this.y0,e=Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y),t=asinz(e/this.a),ke=Math.sin(t),Ge=Math.cos(t),je=this.long0,Math.abs(e)<=EPSLN?(Ve=this.lat0,Oe.x=je,Oe.y=Ve,Oe):(Ve=asinz(Ge*this.sin_p14+Oe.y*ke*this.cos_p14/e),Be=Math.abs(this.lat0)-HALF_PI,Math.abs(Be)<=EPSLN?(this.lat0>=0?je=adjust_lon(this.long0+Math.atan2(Oe.x,-Oe.y)):je=adjust_lon(this.long0-Math.atan2(-Oe.x,Oe.y)),Oe.x=je,Oe.y=Ve,Oe):(je=adjust_lon(this.long0+Math.atan2(Oe.x*ke,e*this.cos_p14*Ge-Oe.y*this.sin_p14*ke)),Oe.x=je,Oe.y=Ve,Oe))}var names$7=["ortho"];const ortho={init:init$7,forward:forward$6,inverse:inverse$6,names:names$7};var FACE_ENUM={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},AREA_ENUM={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function init$6(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=HALF_PI-FORTPI/2?this.face=FACE_ENUM.TOP:this.lat0<=-(HALF_PI-FORTPI/2)?this.face=FACE_ENUM.BOTTOM:Math.abs(this.long0)<=FORTPI?this.face=FACE_ENUM.FRONT:Math.abs(this.long0)<=HALF_PI+FORTPI?this.face=this.long0>0?FACE_ENUM.RIGHT:FACE_ENUM.LEFT:this.face=FACE_ENUM.BACK,this.es!==0&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function forward$5(Oe){var e={x:0,y:0},t,ke,Ge,Be,je,Ve,Ze={value:0};if(Oe.x-=this.long0,this.es!==0?t=Math.atan(this.one_minus_f_squared*Math.tan(Oe.y)):t=Oe.y,ke=Oe.x,this.face===FACE_ENUM.TOP)Be=HALF_PI-t,ke>=FORTPI&&ke<=HALF_PI+FORTPI?(Ze.value=AREA_ENUM.AREA_0,Ge=ke-HALF_PI):ke>HALF_PI+FORTPI||ke<=-(HALF_PI+FORTPI)?(Ze.value=AREA_ENUM.AREA_1,Ge=ke>0?ke-SPI:ke+SPI):ke>-(HALF_PI+FORTPI)&&ke<=-FORTPI?(Ze.value=AREA_ENUM.AREA_2,Ge=ke+HALF_PI):(Ze.value=AREA_ENUM.AREA_3,Ge=ke);else if(this.face===FACE_ENUM.BOTTOM)Be=HALF_PI+t,ke>=FORTPI&&ke<=HALF_PI+FORTPI?(Ze.value=AREA_ENUM.AREA_0,Ge=-ke+HALF_PI):ke<FORTPI&&ke>=-FORTPI?(Ze.value=AREA_ENUM.AREA_1,Ge=-ke):ke<-FORTPI&&ke>=-(HALF_PI+FORTPI)?(Ze.value=AREA_ENUM.AREA_2,Ge=-ke-HALF_PI):(Ze.value=AREA_ENUM.AREA_3,Ge=ke>0?-ke+SPI:-ke-SPI);else{var Qe,en,tn,an,cn,un,dn;this.face===FACE_ENUM.RIGHT?ke=qsc_shift_lon_origin(ke,+HALF_PI):this.face===FACE_ENUM.BACK?ke=qsc_shift_lon_origin(ke,3.14159265359):this.face===FACE_ENUM.LEFT&&(ke=qsc_shift_lon_origin(ke,-HALF_PI)),an=Math.sin(t),cn=Math.cos(t),un=Math.sin(ke),dn=Math.cos(ke),Qe=cn*dn,en=cn*un,tn=an,this.face===FACE_ENUM.FRONT?(Be=Math.acos(Qe),Ge=qsc_fwd_equat_face_theta(Be,tn,en,Ze)):this.face===FACE_ENUM.RIGHT?(Be=Math.acos(en),Ge=qsc_fwd_equat_face_theta(Be,tn,-Qe,Ze)):this.face===FACE_ENUM.BACK?(Be=Math.acos(-Qe),Ge=qsc_fwd_equat_face_theta(Be,tn,-en,Ze)):this.face===FACE_ENUM.LEFT?(Be=Math.acos(-en),Ge=qsc_fwd_equat_face_theta(Be,tn,Qe,Ze)):(Be=Ge=0,Ze.value=AREA_ENUM.AREA_0)}return Ve=Math.atan(12/SPI*(Ge+Math.acos(Math.sin(Ge)*Math.cos(FORTPI))-HALF_PI)),je=Math.sqrt((1-Math.cos(Be))/(Math.cos(Ve)*Math.cos(Ve))/(1-Math.cos(Math.atan(1/Math.cos(Ge))))),Ze.value===AREA_ENUM.AREA_1?Ve+=HALF_PI:Ze.value===AREA_ENUM.AREA_2?Ve+=SPI:Ze.value===AREA_ENUM.AREA_3&&(Ve+=1.5*SPI),e.x=je*Math.cos(Ve),e.y=je*Math.sin(Ve),e.x=e.x*this.a+this.x0,e.y=e.y*this.a+this.y0,Oe.x=e.x,Oe.y=e.y,Oe}function inverse$5(Oe){var e={lam:0,phi:0},t,ke,Ge,Be,je,Ve,Ze,Qe,en,tn={value:0};if(Oe.x=(Oe.x-this.x0)/this.a,Oe.y=(Oe.y-this.y0)/this.a,ke=Math.atan(Math.sqrt(Oe.x*Oe.x+Oe.y*Oe.y)),t=Math.atan2(Oe.y,Oe.x),Oe.x>=0&&Oe.x>=Math.abs(Oe.y)?tn.value=AREA_ENUM.AREA_0:Oe.y>=0&&Oe.y>=Math.abs(Oe.x)?(tn.value=AREA_ENUM.AREA_1,t-=HALF_PI):Oe.x<0&&-Oe.x>=Math.abs(Oe.y)?(tn.value=AREA_ENUM.AREA_2,t=t<0?t+SPI:t-SPI):(tn.value=AREA_ENUM.AREA_3,t+=HALF_PI),en=SPI/12*Math.tan(t),je=Math.sin(en)/(Math.cos(en)-1/Math.sqrt(2)),Ve=Math.atan(je),Ge=Math.cos(t),Be=Math.tan(ke),Ze=1-Ge*Ge*Be*Be*(1-Math.cos(Math.atan(1/Math.cos(Ve)))),Ze<-1?Ze=-1:Ze>1&&(Ze=1),this.face===FACE_ENUM.TOP)Qe=Math.acos(Ze),e.phi=HALF_PI-Qe,tn.value===AREA_ENUM.AREA_0?e.lam=Ve+HALF_PI:tn.value===AREA_ENUM.AREA_1?e.lam=Ve<0?Ve+SPI:Ve-SPI:tn.value===AREA_ENUM.AREA_2?e.lam=Ve-HALF_PI:e.lam=Ve;else if(this.face===FACE_ENUM.BOTTOM)Qe=Math.acos(Ze),e.phi=Qe-HALF_PI,tn.value===AREA_ENUM.AREA_0?e.lam=-Ve+HALF_PI:tn.value===AREA_ENUM.AREA_1?e.lam=-Ve:tn.value===AREA_ENUM.AREA_2?e.lam=-Ve-HALF_PI:e.lam=Ve<0?-Ve-SPI:-Ve+SPI;else{var an,cn,un;an=Ze,en=an*an,en>=1?un=0:un=Math.sqrt(1-en)*Math.sin(Ve),en+=un*un,en>=1?cn=0:cn=Math.sqrt(1-en),tn.value===AREA_ENUM.AREA_1?(en=cn,cn=-un,un=en):tn.value===AREA_ENUM.AREA_2?(cn=-cn,un=-un):tn.value===AREA_ENUM.AREA_3&&(en=cn,cn=un,un=-en),this.face===FACE_ENUM.RIGHT?(en=an,an=-cn,cn=en):this.face===FACE_ENUM.BACK?(an=-an,cn=-cn):this.face===FACE_ENUM.LEFT&&(en=an,an=cn,cn=-en),e.phi=Math.acos(-un)-HALF_PI,e.lam=Math.atan2(cn,an),this.face===FACE_ENUM.RIGHT?e.lam=qsc_shift_lon_origin(e.lam,-HALF_PI):this.face===FACE_ENUM.BACK?e.lam=qsc_shift_lon_origin(e.lam,-3.14159265359):this.face===FACE_ENUM.LEFT&&(e.lam=qsc_shift_lon_origin(e.lam,+HALF_PI))}if(this.es!==0){var dn,fn,pn;dn=e.phi<0?1:0,fn=Math.tan(e.phi),pn=this.b/Math.sqrt(fn*fn+this.one_minus_f_squared),e.phi=Math.atan(Math.sqrt(this.a*this.a-pn*pn)/(this.one_minus_f*pn)),dn&&(e.phi=-e.phi)}return e.lam+=this.long0,Oe.x=e.lam,Oe.y=e.phi,Oe}function qsc_fwd_equat_face_theta(Oe,e,t,ke){var Ge;return Oe<EPSLN?(ke.value=AREA_ENUM.AREA_0,Ge=0):(Ge=Math.atan2(e,t),Math.abs(Ge)<=FORTPI?ke.value=AREA_ENUM.AREA_0:Ge>FORTPI&&Ge<=HALF_PI+FORTPI?(ke.value=AREA_ENUM.AREA_1,Ge-=HALF_PI):Ge>HALF_PI+FORTPI||Ge<=-(HALF_PI+FORTPI)?(ke.value=AREA_ENUM.AREA_2,Ge=Ge>=0?Ge-SPI:Ge+SPI):(ke.value=AREA_ENUM.AREA_3,Ge+=HALF_PI)),Ge}function qsc_shift_lon_origin(Oe,e){var t=Oe+e;return t<-3.14159265359?t+=TWO_PI:t>3.14159265359&&(t-=TWO_PI),t}var names$6=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const qsc={init:init$6,forward:forward$5,inverse:inverse$5,names:names$6};var COEFS_X=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-986701e-12],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,18736e-12],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,934959e-12],[.7986,-.00755338,-500009e-10,935324e-12],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],COEFS_Y=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-126793e-14,422642e-15],[.124,.0124,507171e-14,-160604e-14],[.186,.0123999,-190189e-13,600152e-14],[.248,.0124002,710039e-13,-224e-10],[.31,.0123992,-264997e-12,835986e-13],[.372,.0124029,988983e-12,-311994e-12],[.434,.0123893,-369093e-11,-435621e-12],[.4958,.0123198,-102252e-10,-345523e-12],[.5571,.0121916,-154081e-10,-582288e-12],[.6176,.0119938,-241424e-10,-525327e-12],[.6769,.011713,-320223e-10,-516405e-12],[.7346,.0113541,-397684e-10,-609052e-12],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-140374e-14],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FXC=.8487,FYC=1.3523,C1=R2D/5,RC1=1/C1,NODES=18,poly3_val=function(Oe,e){return Oe[0]+e*(Oe[1]+e*(Oe[2]+e*Oe[3]))},poly3_der=function(Oe,e){return Oe[1]+e*(2*Oe[2]+e*3*Oe[3])};function newton_rapshon(Oe,e,t,ke){for(var Ge=e;ke;--ke){var Be=Oe(Ge);if(Ge-=Be,Math.abs(Be)<t)break}return Ge}function init$5(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function forward$4(Oe){var e=adjust_lon(Oe.x-this.long0),t=Math.abs(Oe.y),ke=Math.floor(t*C1);ke<0?ke=0:ke>=NODES&&(ke=NODES-1),t=R2D*(t-RC1*ke);var Ge={x:poly3_val(COEFS_X[ke],t)*e,y:poly3_val(COEFS_Y[ke],t)};return Oe.y<0&&(Ge.y=-Ge.y),Ge.x=Ge.x*this.a*FXC+this.x0,Ge.y=Ge.y*this.a*FYC+this.y0,Ge}function inverse$4(Oe){var e={x:(Oe.x-this.x0)/(this.a*FXC),y:Math.abs(Oe.y-this.y0)/(this.a*FYC)};if(e.y>=1)e.x/=COEFS_X[NODES][0],e.y=Oe.y<0?-HALF_PI:HALF_PI;else{var t=Math.floor(e.y*NODES);for(t<0?t=0:t>=NODES&&(t=NODES-1);;)if(COEFS_Y[t][0]>e.y)--t;else if(COEFS_Y[t+1][0]<=e.y)++t;else break;var ke=COEFS_Y[t],Ge=5*(e.y-ke[0])/(COEFS_Y[t+1][0]-ke[0]);Ge=newton_rapshon(function(Be){return(poly3_val(ke,Be)-e.y)/poly3_der(ke,Be)},Ge,EPSLN,100),e.x/=poly3_val(COEFS_X[t],Ge),e.y=(5*t+Ge)*D2R$1,Oe.y<0&&(e.y=-e.y)}return e.x=adjust_lon(e.x+this.long0),e}var names$5=["Robinson","robin"];const robin={init:init$5,forward:forward$4,inverse:inverse$4,names:names$5};function init$4(){this.name="geocent"}function forward$3(Oe){var e=geodeticToGeocentric(Oe,this.es,this.a);return e}function inverse$3(Oe){var e=geocentricToGeodetic(Oe,this.es,this.a,this.b);return e}var names$4=["Geocentric","geocentric","geocent","Geocent"];const geocent={init:init$4,forward:forward$3,inverse:inverse$3,names:names$4};var mode={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},params={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function init$3(){if(Object.keys(params).forEach((function(t){if(typeof this[t]>"u")this[t]=params[t].def;else{if(params[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);params[t].num&&(this[t]=parseFloat(this[t]))}params[t].degrees&&(this[t]=this[t]*D2R$1)}).bind(this)),Math.abs(Math.abs(this.lat0)-HALF_PI)<EPSLN?this.mode=this.lat0<0?mode.S_POLE:mode.N_POLE:Math.abs(this.lat0)<EPSLN?this.mode=mode.EQUIT:(this.mode=mode.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var Oe=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(Oe),this.sw=Math.sin(Oe)}function forward$2(Oe){Oe.x-=this.long0;var e=Math.sin(Oe.y),t=Math.cos(Oe.y),ke=Math.cos(Oe.x),Ge,Be;switch(this.mode){case mode.OBLIQ:Be=this.sinph0*e+this.cosph0*t*ke;break;case mode.EQUIT:Be=t*ke;break;case mode.S_POLE:Be=-e;break;case mode.N_POLE:Be=e;break}switch(Be=this.pn1/(this.p-Be),Ge=Be*t*Math.sin(Oe.x),this.mode){case mode.OBLIQ:Be*=this.cosph0*e-this.sinph0*t*ke;break;case mode.EQUIT:Be*=e;break;case mode.N_POLE:Be*=-(t*ke);break;case mode.S_POLE:Be*=t*ke;break}var je,Ve;return je=Be*this.cg+Ge*this.sg,Ve=1/(je*this.sw*this.h1+this.cw),Ge=(Ge*this.cg-Be*this.sg)*this.cw*Ve,Be=je*Ve,Oe.x=Ge*this.a,Oe.y=Be*this.a,Oe}function inverse$2(Oe){Oe.x/=this.a,Oe.y/=this.a;var e={x:Oe.x,y:Oe.y},t,ke,Ge;Ge=1/(this.pn1-Oe.y*this.sw),t=this.pn1*Oe.x*Ge,ke=this.pn1*Oe.y*this.cw*Ge,Oe.x=t*this.cg+ke*this.sg,Oe.y=ke*this.cg-t*this.sg;var Be=hypot(Oe.x,Oe.y);if(Math.abs(Be)<EPSLN)e.x=0,e.y=Oe.y;else{var je,Ve;switch(Ve=1-Be*Be*this.pfact,Ve=(this.p-Math.sqrt(Ve))/(this.pn1/Be+Be/this.pn1),je=Math.sqrt(1-Ve*Ve),this.mode){case mode.OBLIQ:e.y=Math.asin(je*this.sinph0+Oe.y*Ve*this.cosph0/Be),Oe.y=(je-this.sinph0*Math.sin(e.y))*Be,Oe.x*=Ve*this.cosph0;break;case mode.EQUIT:e.y=Math.asin(Oe.y*Ve/Be),Oe.y=je*Be,Oe.x*=Ve;break;case mode.N_POLE:e.y=Math.asin(je),Oe.y=-Oe.y;break;case mode.S_POLE:e.y=-Math.asin(je);break}e.x=Math.atan2(Oe.x,Oe.y)}return Oe.x=e.x+this.long0,Oe.y=e.y,Oe}var names$3=["Tilted_Perspective","tpers"];const tpers={init:init$3,forward:forward$2,inverse:inverse$2,names:names$3};function init$2(){if(this.flip_axis=this.sweep==="x"?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,this.es!==0){var Oe=1-this.es,e=1/Oe;this.radius_p=Math.sqrt(Oe),this.radius_p2=Oe,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function forward$1(Oe){var e=Oe.x,t=Oe.y,ke,Ge,Be,je;if(e=e-this.long0,this.shape==="ellipse"){t=Math.atan(this.radius_p2*Math.tan(t));var Ve=this.radius_p/hypot(this.radius_p*Math.cos(t),Math.sin(t));if(Ge=Ve*Math.cos(e)*Math.cos(t),Be=Ve*Math.sin(e)*Math.cos(t),je=Ve*Math.sin(t),(this.radius_g-Ge)*Ge-Be*Be-je*je*this.radius_p_inv2<0)return Oe.x=Number.NaN,Oe.y=Number.NaN,Oe;ke=this.radius_g-Ge,this.flip_axis?(Oe.x=this.radius_g_1*Math.atan(Be/hypot(je,ke)),Oe.y=this.radius_g_1*Math.atan(je/ke)):(Oe.x=this.radius_g_1*Math.atan(Be/ke),Oe.y=this.radius_g_1*Math.atan(je/hypot(Be,ke)))}else this.shape==="sphere"&&(ke=Math.cos(t),Ge=Math.cos(e)*ke,Be=Math.sin(e)*ke,je=Math.sin(t),ke=this.radius_g-Ge,this.flip_axis?(Oe.x=this.radius_g_1*Math.atan(Be/hypot(je,ke)),Oe.y=this.radius_g_1*Math.atan(je/ke)):(Oe.x=this.radius_g_1*Math.atan(Be/ke),Oe.y=this.radius_g_1*Math.atan(je/hypot(Be,ke))));return Oe.x=Oe.x*this.a,Oe.y=Oe.y*this.a,Oe}function inverse$1(Oe){var e=-1,t=0,ke=0,Ge,Be,je,Ve;if(Oe.x=Oe.x/this.a,Oe.y=Oe.y/this.a,this.shape==="ellipse"){this.flip_axis?(ke=Math.tan(Oe.y/this.radius_g_1),t=Math.tan(Oe.x/this.radius_g_1)*hypot(1,ke)):(t=Math.tan(Oe.x/this.radius_g_1),ke=Math.tan(Oe.y/this.radius_g_1)*hypot(1,t));var Ze=ke/this.radius_p;if(Ge=t*t+Ze*Ze+e*e,Be=2*this.radius_g*e,je=Be*Be-4*Ge*this.C,je<0)return Oe.x=Number.NaN,Oe.y=Number.NaN,Oe;Ve=(-Be-Math.sqrt(je))/(2*Ge),e=this.radius_g+Ve*e,t*=Ve,ke*=Ve,Oe.x=Math.atan2(t,e),Oe.y=Math.atan(ke*Math.cos(Oe.x)/e),Oe.y=Math.atan(this.radius_p_inv2*Math.tan(Oe.y))}else if(this.shape==="sphere"){if(this.flip_axis?(ke=Math.tan(Oe.y/this.radius_g_1),t=Math.tan(Oe.x/this.radius_g_1)*Math.sqrt(1+ke*ke)):(t=Math.tan(Oe.x/this.radius_g_1),ke=Math.tan(Oe.y/this.radius_g_1)*Math.sqrt(1+t*t)),Ge=t*t+ke*ke+e*e,Be=2*this.radius_g*e,je=Be*Be-4*Ge*this.C,je<0)return Oe.x=Number.NaN,Oe.y=Number.NaN,Oe;Ve=(-Be-Math.sqrt(je))/(2*Ge),e=this.radius_g+Ve*e,t*=Ve,ke*=Ve,Oe.x=Math.atan2(t,e),Oe.y=Math.atan(ke*Math.cos(Oe.x)/e)}return Oe.x=Oe.x+this.long0,Oe}var names$2=["Geostationary Satellite View","Geostationary_Satellite","geos"];const geos={init:init$2,forward:forward$1,inverse:inverse$1,names:names$2};var A1=1.340264,A2=-.081106,A3=893e-6,A4=.003796,M$2=Math.sqrt(3)/2;function init$1(){this.es=0,this.long0=this.long0!==void 0?this.long0:0}function forward(Oe){var e=adjust_lon(Oe.x-this.long0),t=Oe.y,ke=Math.asin(M$2*Math.sin(t)),Ge=ke*ke,Be=Ge*Ge*Ge;return Oe.x=e*Math.cos(ke)/(M$2*(A1+3*A2*Ge+Be*(7*A3+9*A4*Ge))),Oe.y=ke*(A1+A2*Ge+Be*(A3+A4*Ge)),Oe.x=this.a*Oe.x+this.x0,Oe.y=this.a*Oe.y+this.y0,Oe}function inverse(Oe){Oe.x=(Oe.x-this.x0)/this.a,Oe.y=(Oe.y-this.y0)/this.a;var e=1e-9,t=12,ke=Oe.y,Ge,Be,je,Ve,Ze,Qe;for(Qe=0;Qe<t&&(Ge=ke*ke,Be=Ge*Ge*Ge,je=ke*(A1+A2*Ge+Be*(A3+A4*Ge))-Oe.y,Ve=A1+3*A2*Ge+Be*(7*A3+9*A4*Ge),ke-=Ze=je/Ve,!(Math.abs(Ze)<e));++Qe);return Ge=ke*ke,Be=Ge*Ge*Ge,Oe.x=M$2*Oe.x*(A1+3*A2*Ge+Be*(7*A3+9*A4*Ge))/Math.cos(ke),Oe.y=Math.asin(Math.sin(ke)/M$2),Oe.x=adjust_lon(Oe.x+this.long0),Oe}var names$1=["eqearth","Equal Earth","Equal_Earth"];const eqearth={init:init$1,forward,inverse,names:names$1};var EPS10=1e-10;function init(){var Oe;if(this.phi1=this.lat1,Math.abs(this.phi1)<EPS10)throw new Error;this.es?(this.en=pj_enfn(this.es),this.m1=pj_mlfn(this.phi1,this.am1=Math.sin(this.phi1),Oe=Math.cos(this.phi1),this.en),this.am1=Oe/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=e_inv,this.forward=e_fwd):(Math.abs(this.phi1)+EPS10>=HALF_PI?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=s_inv,this.forward=s_fwd)}function e_fwd(Oe){var e=adjust_lon(Oe.x-(this.long0||0)),t=Oe.y,ke,Ge,Be;return ke=this.am1+this.m1-pj_mlfn(t,Ge=Math.sin(t),Be=Math.cos(t),this.en),Ge=Be*e/(ke*Math.sqrt(1-this.es*Ge*Ge)),Oe.x=ke*Math.sin(Ge),Oe.y=this.am1-ke*Math.cos(Ge),Oe.x=this.a*Oe.x+(this.x0||0),Oe.y=this.a*Oe.y+(this.y0||0),Oe}function e_inv(Oe){Oe.x=(Oe.x-(this.x0||0))/this.a,Oe.y=(Oe.y-(this.y0||0))/this.a;var e,t,ke,Ge;if(t=hypot(Oe.x,Oe.y=this.am1-Oe.y),Ge=pj_inv_mlfn(this.am1+this.m1-t,this.es,this.en),(e=Math.abs(Ge))<HALF_PI)e=Math.sin(Ge),ke=t*Math.atan2(Oe.x,Oe.y)*Math.sqrt(1-this.es*e*e)/Math.cos(Ge);else if(Math.abs(e-HALF_PI)<=EPS10)ke=0;else throw new Error;return Oe.x=adjust_lon(ke+(this.long0||0)),Oe.y=adjust_lat(Ge),Oe}function s_fwd(Oe){var e=adjust_lon(Oe.x-(this.long0||0)),t=Oe.y,ke,Ge;return Ge=this.cphi1+this.phi1-t,Math.abs(Ge)>EPS10?(Oe.x=Ge*Math.sin(ke=e*Math.cos(t)/Ge),Oe.y=this.cphi1-Ge*Math.cos(ke)):Oe.x=Oe.y=0,Oe.x=this.a*Oe.x+(this.x0||0),Oe.y=this.a*Oe.y+(this.y0||0),Oe}function s_inv(Oe){Oe.x=(Oe.x-(this.x0||0))/this.a,Oe.y=(Oe.y-(this.y0||0))/this.a;var e,t,ke=hypot(Oe.x,Oe.y=this.cphi1-Oe.y);if(t=this.cphi1+this.phi1-ke,Math.abs(t)>HALF_PI)throw new Error;return Math.abs(Math.abs(t)-HALF_PI)<=EPS10?e=0:e=ke*Math.atan2(Oe.x,Oe.y)/Math.cos(t),Oe.x=adjust_lon(e+(this.long0||0)),Oe.y=adjust_lat(t),Oe}var names=["bonne","Bonne (Werner lat_1=90)"];const bonne={init,names};function includedProjections(Oe){Oe.Proj.projections.add(tmerc),Oe.Proj.projections.add(etmerc),Oe.Proj.projections.add(utm),Oe.Proj.projections.add(sterea),Oe.Proj.projections.add(stere),Oe.Proj.projections.add(somerc),Oe.Proj.projections.add(omerc),Oe.Proj.projections.add(lcc),Oe.Proj.projections.add(krovak),Oe.Proj.projections.add(cass),Oe.Proj.projections.add(laea),Oe.Proj.projections.add(aea),Oe.Proj.projections.add(gnom),Oe.Proj.projections.add(cea),Oe.Proj.projections.add(eqc),Oe.Proj.projections.add(poly),Oe.Proj.projections.add(nzmg),Oe.Proj.projections.add(mill),Oe.Proj.projections.add(sinu),Oe.Proj.projections.add(moll),Oe.Proj.projections.add(eqdc),Oe.Proj.projections.add(vandg),Oe.Proj.projections.add(aeqd),Oe.Proj.projections.add(ortho),Oe.Proj.projections.add(qsc),Oe.Proj.projections.add(robin),Oe.Proj.projections.add(geocent),Oe.Proj.projections.add(tpers),Oe.Proj.projections.add(geos),Oe.Proj.projections.add(eqearth),Oe.Proj.projections.add(bonne)}proj4.defaultDatum="WGS84";proj4.Proj=Projection;proj4.WGS84=new proj4.Proj("WGS84");proj4.Point=Point;proj4.toPoint=common;proj4.defs=defs;proj4.nadgrid=nadgrid;proj4.transform=transform;proj4.mgrs=mgrs;proj4.version="__VERSION__";includedProjections(proj4);var logger$y=LoggerByDefault.getLogger("CRS");function register(Oe){const e=Object.keys(Oe.defs);logger$y.trace("proj. codes :",e);const t=e.length;let ke,Ge;for(ke=0;ke<t;++ke){const Be=e[ke];if(!get$3(Be)){const je=Oe.defs(Be);addProjection(new Projection$1({code:Be,axisOrientation:je.axis,metersPerUnit:je.to_meter,units:je.units}))}}for(ke=0;ke<t;++ke){const Be=e[ke],je=get$3(Be);for(Ge=0;Ge<t;++Ge){const Ve=e[Ge],Ze=get$3(Ve);if(!get$4(Be,Ve))if(Oe.defs[Be]===Oe.defs[Ve])addEquivalentProjections([je,Ze]);else{const Qe=Oe(Be,Ve);addCoordinateTransforms(je,Ze,Qe.forward,Qe.inverse)}}}}var Register={isLoaded:!1,get:function(Oe){if(!(Oe===""||Oe===null||typeof Oe>"u")){var e=Oe.split(":");if(e.length===2){var t=e[0],ke=e[1];if(this.hasOwnProperty(t)&&this[t].hasOwnProperty(ke))return this[t][ke]}}},exist:function(Oe){if(Oe===""||Oe===null||typeof Oe>"u")return!1;var e=Oe.split(":");if(e.length!==2)return!1;var t=e[0],ke=e[1];return!(!this.hasOwnProperty(t)||!this[t].hasOwnProperty(ke))},load:function(Oe){if(!this.isLoaded){for(var e=["IGNF","EPSG","CRS"],t=0;t<e.length;t++){var ke=e[t],Ge=this[ke];for(var Be in Ge)if(Ge.hasOwnProperty(Be)){var je=ke+":"+Be;Oe.defs(je,this.get(je))}}this.isLoaded=!0}},loadByDefault:function(Oe){var e={EPSG:{2154:Register.EPSG[2154],27571:Register.EPSG[27571],27572:Register.EPSG[27572],27573:Register.EPSG[27573],27574:Register.EPSG[27574]},CRS:{84:Register.CRS[84]},IGNF:{LAMB93:Register.IGNF.LAMB93,LAMBE:Register.IGNF.LAMBE,LAMB1:Register.IGNF.LAMB1,LAMB2:Register.IGNF.LAMB2,LAMB3:Register.IGNF.LAMB3,LAMB4:Register.IGNF.LAMB4,RGF93G:Register.IGNF.RGF93G,WGS84G:Register.IGNF.WGS84G}};for(var t in e)if(e.hasOwnProperty(t)){var ke=e[t];for(var Ge in ke)if(ke.hasOwnProperty(Ge)){var Be=t+":"+Ge;Oe.defs(Be,ke[Ge])}}},loadByName:function(Oe,e){if(!this.exist(e))return!1;try{Oe.defs(e,this.get(e))}catch{return!1}return!0},EPSG:{4978:"+proj=geocent +datum=WGS84 +units=m +no_defs ",3857:"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",3785:"+title=WGS 84 / Pseudo-Mercator (deprecated) +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs",4149:"+title=CH1903 +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4150:"+title=CH1903plus +proj=longlat +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +no_defs ",4151:"+title=CHTRF95 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4171:"+title=RGF93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4230:"+title=ED50 +proj=longlat +ellps=intl +no_defs ",4235:"+title=Guyane Francaise +proj=longlat +ellps=intl +no_defs ",4258:"+title=ETRS89 +proj=longlat +ellps=GRS80 +no_defs ",4275:"+title=NTF +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +no_defs ",4322:"+title=WGS 72 +proj=longlat +ellps=WGS72 +no_defs ",4326:"+title=WGS 84 +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs ",4467:"+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4470:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4471:"+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4474:"+proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",4558:"+proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4559:"+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",4621:"+title=Fort Marigot +proj=longlat +ellps=intl +towgs84=137,248,-430,0,0,0,0 +no_defs ",4622:"+title=Guadeloupe 1948 +proj=longlat +ellps=intl +no_defs ",4623:"+title=CSG67 +proj=longlat +ellps=intl +towgs84=-186,230,110,0,0,0,0 +no_defs ",4624:"+title=RGFG95 +proj=longlat +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +no_defs ",4625:"+title=Martinique 1938 +proj=longlat +ellps=intl +no_defs ",4626:"+title=Reunion 1947 +proj=longlat +ellps=intl +no_defs ",4627:"+title=RGR92 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4628:"+title=Tahiti 52 +proj=longlat +ellps=intl +towgs84=162,117,154,0,0,0,0 +no_defs ",4629:"+title=Tahaa 54 +proj=longlat +ellps=intl +no_defs ",4630:"+title=IGN72 Nuku Hiva +proj=longlat +ellps=intl +no_defs ",4632:"+title=Combani 1950 +proj=longlat +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +no_defs ",4633:"+title=IGN56 Lifou +proj=longlat +ellps=intl +no_defs ",4634:"+title=IGN72 Grand Terre +proj=longlat +ellps=intl +no_defs ",4637:"+title=Perroud 1950 +proj=longlat +ellps=intl +towgs84=325,154,172,0,0,0,0 +no_defs ",4638:"+title=Saint Pierre et Miquelon 1950 +proj=longlat +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +no_defs ",4640:"+title=RRAF 1991 +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs ",4641:"+title=IGN53 Mare +proj=longlat +ellps=intl +no_defs ",4645:"+title=RGNC 1991 +proj=longlat +ellps=intl +towgs84=0,0,0,0,0,0,0 +no_defs ",4687:"+proj=longlat +ellps=GRS80 +no_defs ",4662:"+title=IGN72 Grande Terre +proj=longlat +ellps=intl +no_defs ",4689:"+title=IGN63 Hiva Oa +proj=longlat +ellps=intl +no_defs ",4690:"+title=Tahiti 79 +proj=longlat +ellps=intl +no_defs ",4691:"+title=Moorea 87 +proj=longlat +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +no_defs ",4692:"+title=Maupiti 83 +proj=longlat +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +no_defs ",4698:"+title=IGN 1962 Kerguelen +proj=longlat +ellps=intl +towgs84=145,-187,103,0,0,0,0 +no_defs ",4749:"+title=RGNC91-93 +proj=longlat +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +no_defs ",4750:"+title=ST87 Ouvea +proj=longlat +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +no_defs ",4807:"+title=NTF (Paris) +proj=longlat +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +no_defs ",2056:"+title=CH1903+ / LV95 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=2600000 +y_0=1200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",2154:"+title=RGF93 / Lambert-93 +proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2213:"+title=ETRS89 / TM 30 NE +proj=tmerc +lat_0=0 +lon_0=30 +k=0.9996 +x_0=500000 +y_0=0 +ellps=GRS80 +units=m +no_defs ",2969:"+title=Fort Marigot / UTM zone 20N +proj=utm +zone=20 +ellps=intl +towgs84=137,248,-430,0,0,0,0 +units=m +no_defs ",2970:"+title=Guadeloupe 1948 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2971:"+title=CSG67 / UTM zone 22N +proj=utm +zone=22 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",2972:"+title=RGFG95 / UTM zone 22N +proj=utm +zone=22 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",2973:"+title=Martinique 1938 / UTM zone 20N +proj=utm +zone=20 +ellps=intl +units=m +no_defs ",2975:"+title=RGR92 / UTM zone 40S +proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2976:"+title=Tahiti 52 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=162,117,154,0,0,0,0 +units=m +no_defs ",2977:"+title=Tahaa 54 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +units=m +no_defs ",2978:"+title=IGN72 Nuku Hiva / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",2980:"+title=Combani 1950 / UTM zone 38S +proj=utm +zone=38 +south +ellps=intl +towgs84=-382,-59,-262,0,0,0,0 +units=m +no_defs ",2981:"+title=IGN56 Lifou / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2982:"+title=IGN72 Grand Terre / UTM zone 58S (deprecated) +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",2984:"+title=RGNC 1991 / Lambert New Caledonia (deprecated) +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=intl +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2986:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67.000000000 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",2987:"+title=Saint Pierre et Miquelon 1950 / UTM zone 21N +proj=utm +zone=21 +ellps=clrk66 +towgs84=30,430,368,0,0,0,0 +units=m +no_defs ",2989:"+title=RRAF 1991 / UTM zone 20N +proj=utm +zone=20 +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",2990:"+title=Reunion 1947 / TM Reunion (deprecated) +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=50000 +y_0=160000 +ellps=intl +units=m +no_defs ",2995:"+title=IGN53 Mare / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3038:"+proj=utm +zone=26 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3039:"+proj=utm +zone=27 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3040:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3041:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3045:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3046:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3047:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3048:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3049:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3050:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3051:"+proj=utm +zone=39 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3034:"+title=ETRS89 / ETRS-LCC +proj=lcc +lat_1=35 +lat_2=65 +lat_0=52 +lon_0=10 +x_0=4000000 +y_0=2800000 +ellps=GRS80 +units=m +no_defs ",3035:"+title=ETRS89 / ETRS-LAEA +proj=laea +lat_0=52 +lon_0=10 +x_0=4321000 +y_0=3210000 +ellps=GRS80 +units=m +no_defs ",3042:"+title=ETRS89 / ETRS-TM30 +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",3043:"+title=ETRS89 / ETRS-TM31 +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",3044:"+title=ETRS89 / ETRS-TM32 +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",25828:"+proj=utm +zone=28 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25829:"+proj=utm +zone=29 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25833:"+proj=utm +zone=33 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25834:"+proj=utm +zone=34 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25835:"+proj=utm +zone=35 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25836:"+proj=utm +zone=36 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25837:"+proj=utm +zone=37 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",25838:"+proj=utm +zone=38 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3060:"+title=IGN72 Grande Terre / UTM zone 58S +proj=utm +zone=58 +south +ellps=intl +units=m +no_defs ",3163:"+title=RGNC91-93 / Lambert New Caledonia +proj=lcc +lat_1=-20.66666666666667 +lat_2=-22.33333333333333 +lat_0=-21.5 +lon_0=166 +x_0=400000 +y_0=300000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3164:"+title=ST87 Ouvea / UTM zone 58S +proj=utm +zone=58 +south +ellps=WGS84 +towgs84=-56.263,16.136,-22.856,0,0,0,0 +units=m +no_defs ",3165:"+title=NEA74 Noumea / Noumea Lambert +proj=lcc +lat_1=-22.24469175 +lat_2=-22.29469175 +lat_0=-22.26969175 +lon_0=166.44242575 +x_0=0.66 +y_0=1.02 +ellps=intl +units=m +no_defs ",3166:"+title=NEA74 Noumea / Noumea Lambert 2 +proj=lcc +lat_1=-22.24472222222222 +lat_2=-22.29472222222222 +lat_0=-22.26972222222222 +lon_0=166.4425 +x_0=8.313000000000001 +y_0=-2.354 +ellps=intl +units=m +no_defs ",3169:"+title=RGNC91-93 / UTM zone 57S +proj=utm +zone=57 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3170:"+title=RGNC91-93 / UTM zone 58S +proj=utm +zone=58 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3171:"+title=RGNC91-93 / UTM zone 59S +proj=utm +zone=59 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs ",3172:"+title=IGN53 Mare / UTM zone 59S +proj=utm +zone=59 +south +ellps=intl +units=m +no_defs ",3296:"+title=RGPF / UTM zone 5S +proj=utm +zone=5 +south +ellps=GRS80 +units=m +no_defs ",3297:"+title=RGPF / UTM zone 6S +proj=utm +zone=6 +south +ellps=GRS80 +units=m +no_defs ",3298:"+title=RGPF / UTM zone 7S +proj=utm +zone=7 +south +ellps=GRS80 +units=m +no_defs ",3299:"+title=RGPF / UTM zone 8S +proj=utm +zone=8 +south +ellps=GRS80 +units=m +no_defs ",3302:"+title=IGN63 Hiva Oa / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +units=m +no_defs ",3303:"+title=Fatu Iva 72 / UTM zone 7S +proj=utm +zone=7 +south +ellps=intl +towgs84=347.103,1078.12,2623.92,-33.8875,70.6773,-9.3943,186.074 +units=m +no_defs ",3304:"+title=Tahiti 79 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +units=m +no_defs ",3305:"+title=Moorea 87 / UTM zone 6S +proj=utm +zone=6 +south +ellps=intl +towgs84=215.525,149.593,176.229,-3.2624,-1.692,-1.1571,10.4773 +units=m +no_defs ",3306:"+title=Maupiti 83 / UTM zone 5S +proj=utm +zone=5 +south +ellps=intl +towgs84=217.037,86.959,23.956,0,0,0,0 +units=m +no_defs ",3312:"+title=CSG67 / UTM zone 21N +proj=utm +zone=21 +ellps=intl +towgs84=-186,230,110,0,0,0,0 +units=m +no_defs ",3313:"+title=RGFG95 / UTM zone 21N +proj=utm +zone=21 +ellps=GRS80 +towgs84=2,2,-2,0,0,0,0 +units=m +no_defs ",3336:"+title=IGN 1962 Kerguelen / UTM zone 42S +proj=utm +zone=42 +south +ellps=intl +towgs84=145,-187,103,0,0,0,0 +units=m +no_defs ",3395:"+title=WGS 84 / World Mercator +proj=merc +lon_0=0 +k=1 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",3727:"+title=Reunion 1947 / TM Reunion +proj=tmerc +lat_0=-21.11666666666667 +lon_0=55.53333333333333 +k=1 +x_0=160000 +y_0=50000 +ellps=intl +units=m +no_defs ",21781:"+title=CH1903 / LV03 +proj=somerc +lat_0=46.95240555555556 +lon_0=7.439583333333333 +x_0=600000 +y_0=200000 +ellps=bessel +towgs84=674.374,15.056,405.346,0,0,0,0 +units=m +no_defs ",25830:"+title=ETRS89 / UTM zone 30N +proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs ",25831:"+title=ETRS89 / UTM zone 31N +proj=utm +zone=31 +ellps=GRS80 +units=m +no_defs ",25832:"+title=ETRS89 / UTM zone 32N +proj=utm +zone=32 +ellps=GRS80 +units=m +no_defs ",27561:"+title=NTF (Paris) / Lambert Nord France +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27562:"+title=NTF (Paris) / Lambert Centre France +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27563:"+title=NTF (Paris) / Lambert Sud France +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27564:"+title=NTF (Paris) / Lambert Corse +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27571:"+title=NTF (Paris) / Lambert zone I +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27572:"+title=NTF (Paris) / Lambert zone II +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27573:"+title=NTF (Paris) / Lambert zone III +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27574:"+title=NTF (Paris) / Lambert zone IV +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27581:"+title=NTF (Paris) / France I (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=1200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27582:"+title=NTF (Paris) / France II (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27583:"+title=NTF (Paris) / France III (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=3200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27584:"+title=NTF (Paris) / France IV (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=4185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27591:"+title=NTF (Paris) / Nord France (deprecated) +proj=lcc +lat_1=49.50000000000001 +lat_0=49.50000000000001 +lon_0=0 +k_0=0.999877341 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27592:"+title=NTF (Paris) / Centre France (deprecated) +proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27593:"+title=NTF (Paris) / Sud France (deprecated) +proj=lcc +lat_1=44.10000000000001 +lat_0=44.10000000000001 +lon_0=0 +k_0=0.9998774990000001 +x_0=600000 +y_0=200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",27594:"+title=NTF (Paris) / Corse (deprecated) +proj=lcc +lat_1=42.16500000000001 +lat_0=42.16500000000001 +lon_0=0 +k_0=0.9999447100000001 +x_0=234.358 +y_0=185861.369 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs ",32601:"+proj=utm +zone=1 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32602:"+proj=utm +zone=2 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32603:"+proj=utm +zone=3 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32604:"+proj=utm +zone=4 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32605:"+proj=utm +zone=5 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32606:"+proj=utm +zone=6 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32607:"+proj=utm +zone=7 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32608:"+proj=utm +zone=8 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32609:"+proj=utm +zone=9 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32610:"+proj=utm +zone=10 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32611:"+proj=utm +zone=11 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32612:"+proj=utm +zone=12 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32613:"+proj=utm +zone=13 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32614:"+proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32615:"+proj=utm +zone=15 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32616:"+proj=utm +zone=16 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32617:"+proj=utm +zone=17 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32618:"+proj=utm +zone=18 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32619:"+proj=utm +zone=19 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32620:"+proj=utm +zone=20 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32621:"+proj=utm +zone=21 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32622:"+proj=utm +zone=22 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32623:"+proj=utm +zone=23 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32624:"+proj=utm +zone=24 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32625:"+proj=utm +zone=25 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32626:"+proj=utm +zone=26 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32627:"+proj=utm +zone=27 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32628:"+proj=utm +zone=28 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32629:"+proj=utm +zone=29 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32630:"+proj=utm +zone=30 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32631:"+proj=utm +zone=31 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32632:"+proj=utm +zone=32 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32633:"+proj=utm +zone=33 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32634:"+proj=utm +zone=34 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32635:"+proj=utm +zone=35 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32636:"+proj=utm +zone=36 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32637:"+proj=utm +zone=37 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32638:"+proj=utm +zone=38 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32639:"+proj=utm +zone=39 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32640:"+proj=utm +zone=40 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32641:"+proj=utm +zone=41 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32642:"+proj=utm +zone=42 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32643:"+proj=utm +zone=43 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32644:"+proj=utm +zone=44 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32645:"+proj=utm +zone=45 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32646:"+proj=utm +zone=46 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32647:"+proj=utm +zone=47 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32648:"+proj=utm +zone=48 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32649:"+proj=utm +zone=49 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32650:"+proj=utm +zone=50 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32651:"+proj=utm +zone=51 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32652:"+proj=utm +zone=52 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32653:"+proj=utm +zone=53 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32654:"+proj=utm +zone=54 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32655:"+proj=utm +zone=55 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32656:"+proj=utm +zone=56 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32657:"+proj=utm +zone=57 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32658:"+proj=utm +zone=58 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32659:"+proj=utm +zone=59 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32660:"+proj=utm +zone=60 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32661:"+proj=stere +lat_0=90 +lat_ts=90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32662:"+title=WGS 84 / Plate Carree +proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32701:"+proj=utm +zone=1 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32702:"+proj=utm +zone=2 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32703:"+proj=utm +zone=3 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32704:"+proj=utm +zone=4 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32705:"+proj=utm +zone=5 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32706:"+proj=utm +zone=6 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32707:"+proj=utm +zone=7 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32708:"+proj=utm +zone=8 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32709:"+proj=utm +zone=9 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32710:"+proj=utm +zone=10 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32711:"+proj=utm +zone=11 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32712:"+proj=utm +zone=12 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32713:"+proj=utm +zone=13 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32714:"+proj=utm +zone=14 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32715:"+proj=utm +zone=15 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32716:"+proj=utm +zone=16 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32717:"+proj=utm +zone=17 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32718:"+proj=utm +zone=18 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32719:"+proj=utm +zone=19 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32720:"+proj=utm +zone=20 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32721:"+proj=utm +zone=21 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32722:"+proj=utm +zone=22 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32723:"+proj=utm +zone=23 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32724:"+proj=utm +zone=24 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32725:"+proj=utm +zone=25 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32726:"+proj=utm +zone=26 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32727:"+proj=utm +zone=27 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32728:"+proj=utm +zone=28 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32729:"+proj=utm +zone=29 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32730:"+proj=utm +zone=30 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32731:"+proj=utm +zone=31 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32732:"+proj=utm +zone=32 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32733:"+proj=utm +zone=33 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32734:"+proj=utm +zone=34 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32735:"+proj=utm +zone=35 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32736:"+proj=utm +zone=36 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32737:"+proj=utm +zone=37 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32738:"+proj=utm +zone=38 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32739:"+proj=utm +zone=39 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32740:"+proj=utm +zone=40 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32741:"+proj=utm +zone=41 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32742:"+proj=utm +zone=42 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32743:"+proj=utm +zone=43 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32744:"+proj=utm +zone=44 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32745:"+proj=utm +zone=45 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32746:"+proj=utm +zone=46 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32747:"+proj=utm +zone=47 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32748:"+proj=utm +zone=48 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32749:"+proj=utm +zone=49 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32750:"+proj=utm +zone=50 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32751:"+proj=utm +zone=51 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32752:"+proj=utm +zone=52 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32753:"+proj=utm +zone=53 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32754:"+proj=utm +zone=54 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32755:"+proj=utm +zone=55 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32756:"+proj=utm +zone=56 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32757:"+proj=utm +zone=57 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32758:"+proj=utm +zone=58 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32759:"+proj=utm +zone=59 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32760:"+proj=utm +zone=60 +south +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",32761:"+proj=stere +lat_0=-90 +lat_ts=-90 +lon_0=0 +k=0.994 +x_0=2000000 +y_0=2000000 +ellps=WGS84 +datum=WGS84 +units=m +no_defs ",310024802:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310915814:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310486805:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310700806:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310702807:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310706808:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310547809:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642810:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310032811:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642812:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642801:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642813:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",310642901:"+title=Geoportail - Monde +proj=mill +towgs84=0.0000,0.0000,0.0000,0.0000,0.0000,0.0000,0.000000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",5489:"+title=RGAF09 geographiques (dms) +proj=longlat +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +units=m +no_defs",5490:"+title=RGAF09 UTM Nord Fuseau 20 +proj=tmerc +nadgrids=@null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137 +rf=298.257222101 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"},CRS:{84:"+title=WGS 84 longitude-latitude +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs "},IGNF:{AMST63:"+title=Amsterdam 1963 +proj=geocent +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63:"+title=Crozet 1963 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67:"+title=Guyane CSG67 +proj=geocent +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50:"+title=ED50 +proj=geocent +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ETRS89:"+title=Systeme de reference terrestre Europeen (1989) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",GUAD48:"+title=Guadeloupe Ste Anne +proj=geocent +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49:"+title=Guadeloupe Fort Marigot +proj=geocent +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=geocent +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=geocent +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62CAR:"+title=Kerguelen - K0 +proj=geocent +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38:"+title=Martinique Fort-Desaix +proj=geocent +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50:"+title=Mayotte Combani +proj=geocent +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87:"+title=Moorea 1987 +proj=geocent +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTF:"+title=Nouvelle Triangulation Francaise +proj=geocent +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NUKU72:"+title=IGN 1972 Nuku Hiva +proj=geocent +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47:"+title=Reunion 1947 +proj=geocent +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93:"+title=Reseau geodesique francais 1993 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95:"+title=Reseau geodesique francais de Guyane 1995 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNC:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPF:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92:"+title=Reseau geodesique Reunion 1992 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06:"+title=Reseau Geodesique Saint-Pierre-et-Miquelon (2006) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07:"+title=Reseau Geodesique des TAAF (2007) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RRAF91:"+title=RRAF 1991 (Reseau de Reference des Antilles Francaises) +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69:"+title=Saint-Paul 1969 +proj=geocent +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50:"+title=St Pierre et Miquelon 1950 +proj=geocent +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAA:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=geocent +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79:"+title=IGN79 (Tahiti) Iles de la Societe +proj=geocent +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50:"+title=Pointe Geologie - Perroud 1950 +proj=geocent +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78:"+title=Wallis-Uvea 1978 (MOP78) +proj=geocent +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72:"+title=World Geodetic System 1972 +proj=geocent +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84:"+title=World Geodetic System 1984 +proj=geocent +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63GEO:"+title=Amsterdam 1963 +proj=longlat +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CROZ63GEO:"+title=Crozet 1963 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",CSG67GEO:"+title=Guyane CSG67 +proj=longlat +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",ED50G:"+title=ED50 +proj=longlat +towgs84=-84.0000,-97.0000,-117.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUAD48GEO:"+title=Guadeloupe Ste Anne +proj=longlat +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",GUADFM49GEO:"+title=Guadeloupe Fort Marigot +proj=longlat +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN63GEO:"+title=IGN 1963 (Hiva Oa, Tahuata, Mohotani) +proj=longlat +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",IGN72GEO:"+title=IGN 1972 Grande-Terre / Ile des Pins +proj=longlat +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",KERG62GEO:"+title=Kerguelen - K0 +proj=longlat +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MART38GEO:"+title=Martinique Fort-Desaix +proj=longlat +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MAYO50GEO:"+title=Mayotte Combani +proj=longlat +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",MOOREA87GEO:"+title=Moorea 1987 +proj=longlat +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",NTFG:"+title=Nouvelle Triangulation Francaise Greenwich degres sexagesimaux +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +units=m +no_defs",NTFP:"+title=Nouvelle Triangulation Francaise Paris grades +proj=longlat +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +units=m +no_defs",NUKU72GEO:"+title=IGN 1972 Nuku Hiva +proj=longlat +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",REUN47GEO:"+title=Reunion 1947 +proj=longlat +towgs84=789.5240,-626.4860,-89.9040,0.6006,76.7946,-10.5788,-32.324100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",RGF93G:"+title=Reseau geodesique francais 1993 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGFG95GEO:"+title=Reseau geodesique francais de Guyane 1995 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGM04GEO:"+title=RGM04 (Reseau Geodesique de Mayotte 2004) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGNCGEO:"+title=Reseau Geodesique de Nouvelle-Caledonie +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGPFGEO:"+title=RGPF (Reseau Geodesique de Polynesie Francaise) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGR92GEO:"+title=Reseau geodesique de la Reunion 1992 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGSPM06GEO:"+title=Saint-Pierre-et-Miquelon (2006) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",RGTAAF07G:"+title=Reseau Geodesique des TAAF (2007) (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",STPL69GEO:"+title=Saint-Paul 1969 +proj=longlat +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",STPM50GEO:"+title=St Pierre et Miquelon 1950  +proj=longlat +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +units=m +no_defs",TAHAAGEO:"+title=Raiatea - Tahaa 51-54 (Tahaa, Base Terme Est) +proj=longlat +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TAHI79GEO:"+title=IGN79 (Tahiti) Iles de la Societe +proj=longlat +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",TERA50G:"+title=Pointe Geologie - Perroud 1950 +proj=longlat +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WALL78GEO:"+title=Wallis - Uvea 1978 (MOP78) +proj=longlat +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +units=m +no_defs",WGS72G:"+title=WGS72 +proj=longlat +towgs84=0.0000,12.0000,6.0000 +a=6378135.0000 +rf=298.2600000000000 +units=m +no_defs",WGS84G:"+title=World Geodetic System 1984 +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",WGS84RRAFGEO:"+title=Reseau de reference des Antilles francaises (1988-1991) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",XGEO:"+title=Systeme CIO-BIH +proj=longlat +towgs84=0.0000,0.0000,0.5000,0.0000,0.0000,0.0140,-0.100000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",AMST63UTM43S:"+title=Amsterdam 1963 UTM fuseau 43 Sud +proj=tmerc +towgs84=109.753,-528.133,-362.244,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CROZ63UTM39S:"+title=Crozet 1963 +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",CSG67UTM21:"+title=Guyane CSG67 UTM fuseau 21 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",CSG67UTM22:"+title=Guyane CSG67 UTM fuseau 22 +proj=tmerc +towgs84=-193.0660,236.9930,105.4470,0.4814,-0.8074,0.1276,1.564900 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GEOPORTALANF:"+title=Geoportail - Antilles francaises +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALASP:"+title=Geoportail - Amsterdam et Saint-Paul +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-38.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALCRZ:"+title=Geoportail - Crozet +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-46.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALFXX:"+title=Geoportail - France metropolitaine +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=46.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALGUF:"+title=Geoportail - Guyane +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=4.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALKER:"+title=Geoportail - Kerguelen +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-49.500000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALMYT:"+title=Geoportail - Mayotte +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-12.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALNCL:"+title=Geoportail - Nouvelle-Caledonie +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-22.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALPYF:"+title=Geoportail - Polynesie francaise +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-15.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALREU:"+title=Geoportail - Reunion et dependances +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-21.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALSPM:"+title=Geoportail - Saint-Pierre et Miquelon +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=47.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GEOPORTALWLF:"+title=Geoportail - Wallis et Futuna +proj=eqc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=0.000000000 +lat_ts=-14.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",GUAD48UTM20:"+title=Guadeloupe Ste Anne +proj=tmerc +towgs84=-472.2900,-5.6300,-304.1200,0.4362,-0.8374,0.2563,1.898400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",GUADFM49U20:"+title=Guadeloupe Fort Marigot  +proj=tmerc +towgs84=136.5960,248.1480,-429.7890 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",IGN63UTM7S:"+title=IGN 1963 - Hiva Oa, Tahuata, Mohotani - UTM fuseau 7 Sud +proj=tmerc +towgs84=410.7210,55.0490,80.7460,-2.5779,-2.3514,-0.6664,17.331100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",IGN72UTM58S:"+title=IGN 1972 - UTM fuseau 58 Sud +proj=tmerc +towgs84=-11.6400,-348.6000,291.6800 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",KERG62UTM42S:"+title=Kerguelen 1962 +proj=tmerc +towgs84=144.8990,-186.7700,100.9230 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",LAMB1:"+title=Lambert I +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB1C:"+title=Lambert I Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=49.500000000 +lon_0=0.000000000 +k_0=0.99987734 +lat_1=49.500000000 +x_0=600000.000 +y_0=1200000.000 +units=m +no_defs",LAMB2:"+title=Lambert II +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB2C:"+title=Lambert II Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",LAMB3:"+title=Lambert III +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=200000.000 +units=m +no_defs",LAMB3C:"+title=Lambert III Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=44.100000000 +lon_0=0.000000000 +k_0=0.99987750 +lat_1=44.100000000 +x_0=600000.000 +y_0=3200000.000 +units=m +no_defs",LAMB4:"+title=Lambert IV +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=185861.369 +units=m +no_defs",LAMB4C:"+title=Lambert IV Carto +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=42.165000000 +lon_0=0.000000000 +k_0=0.99994471 +lat_1=42.165000000 +x_0=234.358 +y_0=4185861.369 +units=m +no_defs",LAMB93:"+title=Lambert 93 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.500000000 +lon_0=3.000000000 +lat_1=44.000000000 +lat_2=49.000000000 +x_0=700000.000 +y_0=6600000.000 +units=m +no_defs",RGF93CC42:"+title=Lambert conique conforme Zone 1 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=42.000000000 +lon_0=3.000000000 +lat_1=41.200000000 +lat_2=42.800000000 +x_0=1700000.000 +y_0=1200000.000 +units=m +no_defs",RGF93CC43:"+title=Lambert conique conforme Zone 2 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=43.000000000 +lon_0=3.000000000 +lat_1=42.200000000 +lat_2=43.800000000 +x_0=1700000.000 +y_0=2200000.000 +units=m +no_defs",RGF93CC44:"+title=Lambert conique conforme Zone 3 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=44.000000000 +lon_0=3.000000000 +lat_1=43.200000000 +lat_2=44.800000000 +x_0=1700000.000 +y_0=3200000.000 +units=m +no_defs",RGF93CC45:"+title=Lambert conique conforme Zone 4 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=45.000000000 +lon_0=3.000000000 +lat_1=44.200000000 +lat_2=45.800000000 +x_0=1700000.000 +y_0=4200000.000 +units=m +no_defs",RGF93CC46:"+title=Lambert conique conforme Zone 5 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=46.000000000 +lon_0=3.000000000 +lat_1=45.200000000 +lat_2=46.800000000 +x_0=1700000.000 +y_0=5200000.000 +units=m +no_defs",RGF93CC47:"+title=Lambert conique conforme Zone 6 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=47.000000000 +lon_0=3.000000000 +lat_1=46.200000000 +lat_2=47.800000000 +x_0=1700000.000 +y_0=6200000.000 +units=m +no_defs",RGF93CC48:"+title=Lambert conique conforme Zone 7 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=48.000000000 +lon_0=3.000000000 +lat_1=47.200000000 +lat_2=48.800000000 +x_0=1700000.000 +y_0=7200000.000 +units=m +no_defs",RGF93CC49:"+title=Lambert conique conforme Zone 8 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=49.000000000 +lon_0=3.000000000 +lat_1=48.200000000 +lat_2=49.800000000 +x_0=1700000.000 +y_0=8200000.000 +units=m +no_defs",RGF93CC50:"+title=Lambert conique conforme Zone 9 +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=50.000000000 +lon_0=3.000000000 +lat_1=49.200000000 +lat_2=50.800000000 +x_0=1700000.000 +y_0=9200000.000 +units=m +no_defs",LAMBE:"+title=Lambert II etendu +proj=lcc +nadgrids=ntf_r93.gsb,null +wktext +towgs84=-168.0000,-60.0000,320.0000 +a=6378249.2000 +rf=293.4660210000000 +pm=2.337229167 +lat_0=46.800000000 +lon_0=0.000000000 +k_0=0.99987742 +lat_1=46.800000000 +x_0=600000.000 +y_0=2200000.000 +units=m +no_defs",MART38UTM20:"+title=Martinique Fort-Desaix +proj=tmerc +towgs84=126.9260,547.9390,130.4090,-2.7867,5.1612,-0.8584,13.822650 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",MAYO50UTM38S:"+title=Mayotte Combani +proj=tmerc +towgs84=-599.9280,-275.5520,-195.6650,-0.0835,-0.4715,0.0602,49.281400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",MILLER:"+title=Geoportail - Monde +proj=mill +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lon_0=0.000000000 +x_0=0.000 +y_0=0.000 +units=m +no_defs",MOOREA87U6S:"+title=Moorea 1987 - UTM fuseau 6 Sud +proj=tmerc +towgs84=215.9820,149.5930,176.2290,3.2624,1.6920,1.1571,10.477300 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",NUKU72U7S:"+title=IGN 1972 Nuku Hiva - UTM fuseau 7 Sud +proj=tmerc +towgs84=165.7320,216.7200,180.5050,-0.6434,-0.4512,-0.0791,7.420400 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGM04UTM38S:"+title=UTM fuseau 38 Sud (Reseau Geodesique de Mayotte 2004) +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM57S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 57 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=159.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM58S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 58 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=165.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGNCUTM59S:"+title=Reseau Geodesique de Nouvelle-Caledonie - UTM fuseau 59 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=171.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM5S:"+title=RGPF - UTM fuseau 5 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM6S:"+title=RGPF - UTM fuseau 6 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGPFUTM7S:"+title=RGPF - UTM fuseau 7 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-141.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGR92UTM40S:"+title=RGR92 UTM fuseau 40 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",RGSPM06U21:"+title=Saint-Pierre-et-Miquelon (2006) UTM Fuseau 21 Nord +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",STPL69UTM43S:"+title=Saint-Paul 1969 UTM fuseau 43 Sud +proj=tmerc +towgs84=225.571,-346.608,-46.567,0,0,0,0 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",STPM50UTM21:"+title=St Pierre et Miquelon 1950 +proj=tmerc +towgs84=-95.5930,573.7630,173.4420,-0.9602,1.2510,-1.3918,42.626500 +a=6378206.4000 +rf=294.9786982000000 +lat_0=0.000000000 +lon_0=-57.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",TAHAAUTM05S:"+title=Tahaa 1951 +proj=tmerc +towgs84=72.4380,345.9180,79.4860,-1.6045,-0.8823,-0.5565,1.374600 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-153.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI51UTM06S:"+title=Tahiti-Terme Nord UTM fuseau 6 Sud +proj=tmerc +towgs84=162.0000,117.0000,154.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TAHI79UTM6S:"+title=Tahiti 1979 +proj=tmerc +towgs84=221.5250,152.9480,176.7680,2.3847,1.3896,0.8770,11.474100 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-147.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",TERA50STEREO:"+title=Terre Adelie 1950 +proj=stere +towgs84=324.9120,153.2820,172.0260 +a=6378388.0000 +rf=297.0000000000000 +lat_0=-90.000000000 +lon_0=140.000000000 +lat_ts=-67 +k=0.96027295 +x_0=300000.000 +y_0=-2299363.482 +units=m +no_defs",UTM01SW84:"+title=World Geodetic System 1984 UTM fuseau 01 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM20W84GUAD:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Guadeloupe +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM20W84MART:"+title=World Geodetic System 1984 UTM fuseau 20 Nord-Martinique +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-63.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM22RGFG95:"+title=RGFG95 UTM fuseau 22 Nord-Guyane +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM39SW84:"+title=World Geodetic System 1984 UTM fuseau 39 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=51.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM42SW84:"+title=World Geodetic System 1984 UTM fuseau 42 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=69.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",UTM43SW84:"+title=World Geodetic System 1984 UTM fuseau 43 Sud +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=75.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",WALL78UTM1S:"+title=Wallis-Uvea 1978 (MOP78) UTM 1 SUD +proj=tmerc +towgs84=253.0000,-133.0000,-127.0000 +a=6378388.0000 +rf=297.0000000000000 +lat_0=0.000000000 +lon_0=-177.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=10000000.000 +units=m +no_defs",ETRS89GEO:"+title=ETRS89 geographiques (dms) +proj=longlat +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +units=m +no_defs",ETRS89LAEA:"+title=ETRS89 Lambert Azimutal Equal Area +proj=laea +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=10.000000000 +x_0=4321000.000 +y_0=3210000.000 +units=m +no_defs",ETRS89LCC:"+title=ETRS89 Lambert Conformal Conic +proj=lcc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=52.000000000 +lon_0=9.999999995 +lat_1=35.000000000 +lat_2=65.000000000 +x_0=4000000.000 +y_0=2800000.000 +units=m +no_defs",UTM26ETRS89:"+title=Europe - de 30d a 24d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM27ETRS89:"+title=Europe - de 24d a 18d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM28ETRS89:"+title=Europe - de 18d a 12d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM29ETRS89:"+title=Europe - de 12d a 6d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM30ETRS89:"+title=Europe - de -6d a 0d Ouest +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=-3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM31ETRS89:"+title=Europe - de 0d a 6d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=3.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM32ETRS89:"+title=Europe - de 6d a 12d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=9.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM33ETRS89:"+title=Europe - de 12d a 18d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=15.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM34ETRS89:"+title=Europe - de 18d a 24d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=21.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM35ETRS89:"+title=Europe - de 24d a 30d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=27.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM36ETRS89:"+title=Europe - de 30d a 36d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=33.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM37ETRS89:"+title=Europe - de 36d a 42d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=39.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs",UTM38ETRS89:"+title=Europe - de 42d a 48d Est +proj=tmerc +nadgrids=null +wktext +towgs84=0.0000,0.0000,0.0000 +a=6378137.0000 +rf=298.2572221010000 +lat_0=0.000000000 +lon_0=45.000000000 +k_0=0.99960000 +x_0=500000.000 +y_0=0.000 +units=m +no_defs"}},logger$x=LoggerByDefault.getLogger("CRS"),CRS={projectionsExtent:{"EPSG:2154":{left:-9.62,bottom:41.18,right:10.3,top:51.54},"EPSG:27572":{left:-4.87,bottom:42.33,right:8.23,top:51.14}},load:function(){if(logger$x.trace("Loading custom definitions projections"),!Register.isLoaded){Register.load(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(Oe){logger$x.error(Oe)}}},loadByDefault:function(){if(logger$x.trace("Loading custom definitions projections by default"),!Register.isLoaded){Register.loadByDefault(proj4);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(Oe){logger$x.error(Oe)}}},loadByName:function(Oe){if(logger$x.trace("Loading a custom definition projection : ",Oe),!Register.isLoaded){Register.loadByName(proj4,Oe);try{register(proj4),window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register,window.ol.proj.proj4.register(proj4))}catch(e){logger$x.error(e)}}},overload:function(){logger$x.trace("Loading projections aera (extent)");for(var Oe in this.projectionsExtent)if(this.projectionsExtent.hasOwnProperty(Oe)){var e=this.projectionsExtent[Oe],t=get$3(Oe),ke=getTransform("EPSG:4326",t),Ge=applyTransform([e.bottom,e.right,e.top,e.left],ke);t.setExtent(Ge),addProjection(t),window.ol&&window.ol.proj&&window.ol.proj.addProjection&&window.ol.proj.addProjection(t)}}};window.ol&&window.ol.proj&&window.ol.proj.proj4&&(window.ol.proj.proj4.register=register);let m_suggestions=[],controller=new AbortController,m_index="geoplateforme",m_fields="title,layer_name",m_size="1000",m_maximumResponses=10,m_filterByService=["WMTS","TMS"],m_filterByProjection=[],m_filterByLayerPriority=[],m_filterWMTSPriority=!1,m_filterByTMS=["ADMIN_EXPRESS","ISOHYPSE","PLAN.IGN","OCSGE_2016","OCSGE_2019","PCI","BDTOPO"],m_url=`https://data.geopf.fr/recherche/api/indexes/${m_index}/suggest`;const target=new EventTarget,suggest=async Oe=>{clear(),controller=new AbortController;let e=new URL(m_url),t={text:Oe,fields:m_fields,size:m_size};Object.keys(t).forEach(Ze=>e.searchParams.append(Ze,t[Ze]));var ke=await fetch(e,{}),Ge=await ke.json();if(ke.status!==200)throw new Error(ke.message);if(!(!Ge||Ge.length===0)){for(let Ze=0;Ze<Ge.length;Ze++){const Qe=Ge[Ze];m_filterByLayerPriority.findIndex(tn=>tn.includes(Qe.source.layer_name))>=0&&(Ge[Ze].score+=100)}Ge.sort((Ze,Qe)=>Qe.score-Ze.score);var Be=null;m_filterWMTSPriority&&(Be=inventory(Ge));for(let Ze=0;Ze<Ge.length;Ze++){const Qe=Ge[Ze];var je=m_filterByService.length===0||m_filterByService.includes(Qe.source.type);if(je){if(unique().length>=m_maximumResponses)break;var Ve={attribution:Qe.source.attribution||{},srs:Qe.source.srs||[],keywords:Qe.source.keywords||[],extent:Qe.source.extent||{},metadata:Qe.source.metadata_urls||[],name:Qe.source.layer_name||"",title:Qe.source.title||"",description:Qe.source.description,service:Qe.source.type||"",url:Qe.source.url||"",tech:Qe.source.tech||{},tags:Qe.source.tags||{},theme:Qe.source.theme||"",producer:Qe.source.producer||""};if(m_filterByTMS.length&&(Ve.service==="WMTS"&&m_filterByTMS.includes(Ve.name)||Ve.service==="TMS"&&!m_filterByTMS.includes(Ve.name))||m_filterByProjection.length&&m_filterByProjection.includes(Ve.srs[0])||Be&&Be[Ve.name]&&Ve.service==="WMS")continue;m_suggestions.push(Ve)}}return target.dispatchEvent(new CustomEvent("suggest",{bubbles:!0,detail:getSuggestions()})),getSuggestions()}},unique=()=>m_suggestions.filter((Oe,e,t)=>e===t.findIndex(ke=>ke.service===Oe.service&&ke.name===Oe.name&&ke.title===Oe.title&&ke.description===Oe.description)),clear=()=>{controller.abort(),m_suggestions=[]},inventory=Oe=>{var e={};for(let t=0;t<Oe.length;t++){const ke=Oe[t].source.type,Ge=Oe[t].source.layer_name;(ke==="WMTS"||ke==="WMS")&&(e[Ge]===void 0&&(e[Ge]=ke==="WMTS"),e[Ge]||(e[Ge]=ke==="WMTS"))}return e},getSuggestions=()=>unique(),getNames=()=>unique().map(Oe=>Oe.name),getTitles=()=>unique().map(Oe=>Oe.title),setIndex=Oe=>{m_index=Oe},setFields=Oe=>{m_fields=Oe},setSize=Oe=>{m_size=parseInt(Oe)},setUrl=value=>{m_url=eval("`"+value+"`")},setMaximumResponses=Oe=>{m_maximumResponses=parseInt(Oe)},setFiltersByService=Oe=>{m_filterByService=Oe===""?[]:Oe.split(",")},setFiltersByProjection=Oe=>{m_filterByProjection=Oe===""?[]:Oe.split(",")},setFiltersByLayerPriority=Oe=>{m_filterByLayerPriority=Oe===""?[]:Oe.split(",")},setFilterWMTSPriority=Oe=>{m_filterWMTSPriority=Oe},setFiltersByTMS=Oe=>{m_filterByTMS=Oe===""?[]:Oe.split(",")},updateFilterByTMS=async Oe=>{var e=Oe;e||(e="https://raw.githubusercontent.com/IGNF/geoportal-configuration/new-url/vectorTileConfig/fullVectorTileConfig.json");const t=await fetch(e),ke=await t.json();if(t.status!==200)throw new Error(t.message);if(!ke)throw new Error("Liste vide !");var Ge=Object.keys(ke.layers).map(Be=>Be.split("$")[0]);return Ge&&setFiltersByTMS(Ge.toString()),m_filterByTMS},Search$1={target,suggest,clear,getSuggestions,getNames,getTitles,setIndex,setFields,setSize,setUrl,setMaximumResponses,setFiltersByService,setFiltersByTMS,updateFilterByTMS,setFiltersByProjection,setFiltersByLayerPriority,setFilterWMTSPriority};var SearchEngineDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPsearchEngine"),Oe.className="GPwidget gpf-widget",Oe},_createSearchDivElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPshowSearchDiv"),Oe},_createShowSearchEnginePictoElement:function(Oe){var e=this;checkDsfr()&&(Oe=!0);var t=document.createElement("button");return t.id=this._addUID("GPshowSearchEnginePicto"),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchEnginePicto gpf-btn gpf-btn-icon-search fr-btn",t.title="Afficher/masquer la recherche par lieux",checkDsfr()&&(t.title="Rechercher"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!Oe),t.disabled=!Oe,t.setAttribute("type","button"),t.addEventListener("click",function(ke){if(checkDsfr()){var Ge=document.getElementById(e._addUID("GPautocompleteResults")),Be=Ge.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),je=Ge.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),Ve=je.length;if(!Ve)return;var Ze=null;Be.length?Ze=Be[0]:(Ze=je[0],Ze.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",Ze.style.color="#000000",Ze.style["background-color"]="#CEDBEF"),Ze.click();return}var Qe=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Qe),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden");var en=document.getElementById(e._addUID("GPshowAdvancedSearch"));en&&(en.style.display=null,document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"));var tn=document.getElementById(e._addUID("GPshowGeolocate"));tn&&(tn.style.display=null);var an=document.getElementById(e._addUID("GPshowSearchByCoordinate"));an&&(an.style.display=null);var cn="#GPsearchInput-"+e._uid;document.querySelector(cn+" input").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+e._uid).disabled=!1),e.onShowSearchEngineClick(ke)}),t},_createSearchInputElement:function(Oe){var e=this,t=document.createElement("form");t.id=this._addUID("GPsearchInput"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(Ge){return Ge.preventDefault(),document.getElementById(e._addUID("GPsearchInputText")).value===""||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),e.onGeocodingSearchSubmit(Ge)),!1});var ke=document.createElement("input");return ke.id=this._addUID("GPsearchInputText"),ke.className="GPsearchInputText gpf-input fr-input",ke.type="text",ke.placeholder=Oe,ke.autocomplete="off",ke.addEventListener("keyup",function(Ge){var Be=Ge.which||Ge.keyCode;Be===13||Be===10||Be===38||Be===40||(document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),ke.value.length>2?(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(Ge))}),ke.addEventListener("keydown",function(Ge){var Be=Ge.which||Ge.keyCode;Be===13&&Ge.preventDefault();var je=document.getElementById(e._addUID("GPautocompleteResults"));if(je){var Ve=je.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current"),Ze=je.getElementsByClassName("GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine"),Qe=Ze.length;if(Qe){var en=null;if(Ve.length)en=Ve[0];else if(en=Ze[0],en.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",en.style.color="#000000",en.style["background-color"]="#CEDBEF",Be!==13)return;var tn=parseInt(SelectorID.index(en.id),10),an=tn===Qe-1?Ze[0]:Ze[tn+1],cn=tn===0?Ze[Qe-1]:Ze[tn-1];switch(en.style["background-color"]="",en.style.color="",cn.style["background-color"]="",cn.style.color="",an.style["background-color"]="",an.style.color="",Be){case 38:en.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",cn.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",cn.style.color="#000000",cn.style["background-color"]="#CEDBEF",en.scrollIntoView();break;case 40:en.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",an.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine current",an.style.color="#000000",an.style["background-color"]="#CEDBEF",en.scrollIntoView();break;case 13:Ge.preventDefault(),en.click(Ge);break}en.focus()}}}),t.appendChild(ke),t},_createSearchResetElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPsearchInputReset"),e.className="GPshowOpen GPsearchInputReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-search-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.setAttribute("aria-label","Supprimer la recherche"),e.addEventListener("click",function(t){document.getElementById(Oe._addUID("GPsearchInputText")).value="",document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),Oe.onSearchResetClick()}),e},_createButtonsElement:function(){var Oe=document.createElement("div");return Oe.className="GPbuttonsContainer",Oe},_createFirstLineWrapper:function(){var Oe=document.createElement("div");return Oe.className="GPsearchFirstLineWrapper",Oe},_createRadioContainer:function(){var Oe=document.createElement("div");return Oe.className="GPsearchRadioContainer",Oe},_createRadioElements:function(){var Oe=document.createElement("div");Oe.className="GPsearchRadioElements";var e=document.createElement("div");e.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var t=document.createElement("input");t.id=this._addUID("GPsearchSplitLocations"),t.type="radio",t.name="GPsearchSplit",t.value="address",t.checked=!0,e.appendChild(t);var ke=document.createElement("label");ke.className="gpf-label fr-label",ke.htmlFor=this._addUID("GPsearchSplitLocations"),ke.title="Adresses",ke.innerHTML="Adresses",e.appendChild(ke),t.addEventListener?t.addEventListener("change",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}):t.attachEvent&&t.attachEvent("onchange",function(){t.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))});var Ge=document.createElement("div");Ge.className="GPsearchSplitChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Be=document.createElement("input");Be.id=this._addUID("GPsearchSplitData"),Be.type="radio",Be.name="GPsearchSplit",Be.value="data",Ge.appendChild(Be);var je=document.createElement("label");return je.className="gpf-label fr-label",je.htmlFor=this._addUID("GPsearchSplitData"),je.title="Cartes et données",je.innerHTML="Cartes et données",Ge.appendChild(je),Be.addEventListener?Be.addEventListener("change",function(){Be.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.add("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden"))}):Be.attachEvent&&Be.attachEvent("onchange",function(){Be.checked?(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.remove("gpf-hidden","GPelementHidden")):(document.querySelector("[id^='GPautocompleteResultsSuggest']").classList.remove("gpf-hidden","GPelementHidden"),document.querySelector("[id^='GPautocompleteResultsLocation']").classList.add("gpf-hidden","GPelementHidden"))}),Oe.appendChild(e),Oe.appendChild(Ge),[Oe,t,Be]},_createShowAdvancedSearchElement:function(){var Oe=this,e=document.createElement("span");return e.id=this._addUID("GPshowAdvancedSearch"),e.className="GPshowOpen  GPshowAdvancedSearch",e.innerText="Recherche avancée",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke);var Ge="#GPsearchInput-"+Oe._uid;ke?(document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(Ge+" input").disabled=!1,document.querySelector(Ge+" .GPsearchInputReset")&&(document.querySelector(Ge+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1)):(document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(Ge+" input").disabled=!0,document.querySelector(Ge+" .GPsearchInputReset")&&(document.querySelector(Ge+" .GPsearchInputReset").disabled=!0),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!0)),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1)}),e},_createShowGeolocateElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPshowGeolocate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowGeolocate gpf-btn gpf-btn-icon-search-geolocate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Activer la géolocalisation",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke),Oe.onShowSearchGeolocateClick(t)}),e},_createShowSearchByCoordinateElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPshowSearchByCoordinate"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowSearchByCoordinate gpf-btn gpf-btn-icon-search-coordinate fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",e.title="Ouvrir la recherche par coordonnées",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke);var Ge="#GPsearchInput-"+Oe._uid;ke?(document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.querySelector(Ge+" input").disabled=!1,document.querySelector(Ge+" .GPsearchInputReset").disabled=!1,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1)):(document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-hidden","gpf-visible"),document.querySelector(Ge+" input").disabled=!0,document.querySelector(Ge+" .GPsearchInputReset").disabled=!0,checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!0)),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1)}),e},_createAdvancedSearchPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPadvancedSearchPanel"),Oe.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Oe},_createAdvancedSearchPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createGeocodeResultsElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPgeocodeResultsList"),Oe.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Oe.appendChild(this._createGeocodeResultsHeaderElement()),Oe},_createGeocodeResultsDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createAutoCompleteElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPautoCompleteList"),Oe.className="GPautoCompleteList GPelementHidden gpf-panel fr-modal gpf-hidden ",Oe},_createCoordinateSearchPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPcoordinateSearchPanel"),Oe.className="GPpanel GPelementHidden gpf-panel gpf-hidden fr-modal",Oe},_createCoordinateSearchPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createAutoCompleteListElement:function(){var Oe=this,e=document.createElement("div");return e.id=this._addUID("GPautocompleteResults"),e.className="",e.addEventListener?e.addEventListener("click",function(t){document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")},!1):e.attachEvent&&e.attachEvent("onclick",function(t){document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPautoCompleteList")).classList.replace("gpf-visible","gpf-hidden")}),e},_createAutoCompletedLocationContainer(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPautocompleteResultsLocation"),Oe.className="GPelementHidden gpf-hidden gpf-select",Oe.size=20,Oe.autofocus=!0,Oe},_createAutoCompletedLocationTitleElement(){var Oe=document.getElementById(this._addUID("GPautocompleteResultsLocation")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Lieux et adresses",Oe.appendChild(e)},_createAutoCompletedLocationElement:function(Oe,e){var t=this,ke=document.getElementById(this._addUID("GPautocompleteResultsLocation")),Ge=document.createElement("p");Ge.id=this._addUID("AutoCompletedLocation_"+e),Ge.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine";var Be=GeocodeUtils.getSuggestedLocationFreeform(Oe);Ge.innerHTML=Be,Ge.title=Be,Ge.addEventListener?Ge.addEventListener("click",function(je){t.onAutoCompletedResultsItemClick(je)},!1):Ge.attachEvent&&Ge.attachEvent("onclick",function(je){t.onAutoCompletedResultsItemClick(je)}),ke.appendChild(Ge)},_createSearchedSuggestContainer(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPautocompleteResultsSuggest"),Oe.className="GPelementHidden gpf-hidden gpf-select",Oe.size=6,Oe.autofocus=!0,Oe},_createSearchedSuggestTitleElement(){var Oe=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),e=document.createElement("p");e.className="GPlabel GPlabelTitle gpf-label fr-label",e.innerHTML="Cartes et données",Oe.appendChild(e)},_createSearchedSuggestElement:function(Oe,e){var t=this,ke=document.getElementById(this._addUID("GPautocompleteResultsSuggest")),Ge=document.createElement("p");Ge.id=this._addUID("AutoCompletedSuggest_"+e),Ge.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",Ge.innerHTML=Oe.title+" ("+Oe.service+")",Ge.dataset.layer=Oe.name,Ge.title=`${Oe.description} (nom technique : ${Oe.name})`,Ge.addEventListener?Ge.addEventListener("click",function(Be){t.onSearchedResultsItemClick(Be)},!1):Ge.attachEvent&&Ge.attachEvent("onclick",function(Be){t.onSearchedResultsItemClick(Be)}),ke.appendChild(Ge)},_createAdvancedSearchPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche avancée",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GPadvancedSearchClose"),ke.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer la recherche avancée",ke.addEventListener?ke.addEventListener("click",function(){var Be="#GPsearchInput-"+Oe._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){var Be="#GPsearchInput-"+Oe._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden"),document.getElementById(Oe._addUID("GPshowAdvancedSearch")).setAttribute("aria-pressed",!1),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPadvancedSearchPanel")).classList.replace("gpf-visible","gpf-hidden")});var Ge=document.createElement("span");return Ge.className="GPelementHidden gpf-visible",Ge.innerText="Fermer",ke.appendChild(Ge),e.appendChild(ke),e},_createAdvancedSearchPanelFormElement:function(Oe){var e=this,t=document.createElement("form");t.id=this._addUID("GPadvancedSearchForm"),t.className="gpf-panel__content fr-modal__content",t.addEventListener("submit",function(je){je.preventDefault();for(var Ve=[],Ze="#GPadvancedSearchFilters-"+e._uid,Qe=document.querySelectorAll(Ze+" > div > div > input,select#category"),en=0;en<Qe.length;en++){var tn=Qe[en];Ve.push({key:tn.name,value:tn.value})}return e.onGeocodingAdvancedSearchSubmit(je,Ve),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPgeocodeResultsList")).classList.replace("gpf-hidden","gpf-visible"),!1});var ke=document.createElement("div");ke.className="GPflexInput gpf-flex-column ";var Ge=document.createElement("label");Ge.className="GPadvancedSearchCodeLabel gpf-label fr-label",Ge.innerHTML="Recherche par",ke.appendChild(Ge);var Be=this._createAdvancedSearchFormCodeElement(Oe);return ke.appendChild(Be),t.appendChild(ke),t},_createAdvancedSearchFormCodeElement:function(Oe){var e=this,t=document.createElement("select");t.id=this._addUID("GPadvancedSearchCode"),t.title="Choisir un type de recherche",t.className="GPadvancedSearchCode gpf-select fr-select",t.addEventListener("change",function(Be){e.onGeocodingAdvancedSearchCodeChange(Be)},!1),Oe||(Oe=[{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"StreetAddress",title:"Adresses"},{id:"CadastralParcel",title:"Parcelles cadastrales"}]);for(var ke=0;ke<Oe.length;ke++){var Ge=document.createElement("option");Ge.value=Oe[ke].id,Ge.text=Oe[ke].title,t.appendChild(Ge)}return t},_createAdvancedSearchFormInputElement:function(){var Oe=document.createElement("input");return Oe.type="submit",Oe.id=this._addUID("GPadvancedSearchSubmit"),Oe.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",Oe.value="Chercher",Oe},_createAdvancedSearchFormFiltersElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPadvancedSearchFilters"),Oe},_createAdvancedSearchFiltersTableElement:function(Oe,e){var t=document.createElement("div");return t.id=this._addUID(Oe),e||(t.style.display="none"),t},_createAdvancedSearchFiltersAttributElement:function(Oe){var e=null,t=Oe.name,ke=Oe.title,Ge=Oe.description,Be=Oe.code,je=Oe.value,Ve=document.createElement("div");Ve.className="GPflexInput gpf-flex-column ";var Ze=document.createElement("label");if(Ze.className="GPadvancedSearchFilterLabel gpf-label fr-label",Ze.htmlFor=t,Ze.title=Ge||ke,Ze.innerHTML=ke,Ve.appendChild(Ze),t==="category"){var Qe=document.createElement("select");if(Qe.id=t,Qe.name=t,Qe.title=ke,Qe.className="GPadvancedSearchFilterInput gpf-select fr-select",je&&Array.isArray(je))for(var en=0;en<je.length;en++){var tn=document.createElement("option");tn.value=je[en],tn.text=je[en],Qe.appendChild(tn)}Ve.appendChild(Qe)}else{var an=document.createElement("input");if(an.id=t,an.className="GPadvancedSearchFilterInput gpf-input fr-input",an.type="text",an.name=t,je)if(Array.isArray(je)){var cn=t+"_list";an.setAttribute("list",cn);var un=document.createElement("datalist");un.id=cn;for(var en=0;en<je.length;++en){var tn=document.createElement("option");tn.value=je[en],un.appendChild(tn)}Ve.appendChild(un)}else an.value=je;Ve.appendChild(an)}return e=document.getElementById(this._addUID(Be)),e?e.appendChild(Ve):e=Ve,e},_createGeocodeResultsHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Résultats de la recherche",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GPgeocodeResultsClose"),ke.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer la fenêtre de résultats",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")});var Ge=document.createElement("span");return Ge.className="GPelementHidden gpf-visible",Ge.innerText="Fermer",ke.appendChild(Ge),e.appendChild(ke),e},_createGeocodeResultsListElement:function(){var Oe=this,e=document.createElement("div");return e.id=this._addUID("GPgeocodeResults"),e.className="gpf-panel__list",e.setAttribute("tabindex","0"),e.addEventListener?e.addEventListener("click",function(t){t.ctrlKey||(document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),Oe.onGeocodedResultsItemClick(t)},!1):e.attachEvent&&e.attachEvent("onclick",function(t){t.ctrlKey||(document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPgeocodeResultsList")).classList.replace("gpf-visible","gpf-hidden")),Oe.onGeocodedResultsItemClick(t)}),e},_createGeocodedLocationElement:function(Oe,e){var t=document.getElementById(this._addUID("GPgeocodeResults")),ke=document.createElement("div");ke.id=this._addUID("GeocodedLocation_"+e),ke.className="GPautoCompleteProposal gpf-panel__items gpf-panel__items_searchengine",typeof Oe=="string"?ke.innerHTML=Oe:ke.innerHTML=GeocodeUtils.getGeocodedLocationFreeform(Oe),t.appendChild(ke)},_createCoordinateSearchPanelHeaderElement(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Recherche par coordonnées",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GPcoordinateSearchClose"),ke.className="GPpanelClose GPcoordinateSearchClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer la recherche par coordonnées",ke.addEventListener?ke.addEventListener("click",function(){var Be="#GPsearchInput-"+Oe._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1),document.getElementById(Oe._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),Oe.onCoordinateSearchClose()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){var Be="#GPsearchInput-"+Oe._uid;document.querySelector(Be+" input").disabled=!1,document.querySelector(Be+" .GPsearchInputReset")&&(document.querySelector(Be+" .GPsearchInputReset").disabled=!1),checkDsfr()&&(document.querySelector("#GPshowSearchEnginePicto-"+Oe._uid).disabled=!1),document.getElementById(Oe._addUID("GPshowSearchByCoordinate")).setAttribute("aria-pressed",!1),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPcoordinateSearchPanel")).classList.replace("gpf-visible","gpf-hidden"),Oe.onCoordinateSearchClose()});var Ge=document.createElement("span");return Ge.className="GPelementHidden gpf-visible",Ge.innerText="Fermer",ke.appendChild(Ge),e.appendChild(ke),e},_createCoordinateSearchPanelFormElement(){var Oe=this,e=document.createElement("form");return e.id=this._addUID("GPcoordinateSearchForm"),e.className="gpf-panel__content fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),Oe.onShowSearchByCoordinateClick(),!1}),e},__createCoordinateSearchDivElement(){var Oe=document.createElement("div");return Oe.className="GPflexInput gpf-flex-column ",Oe},_createCoordinateSearchSystemsLabelElement(){var Oe=document.createElement("label");return Oe.className="GPcoordinateSearchSystemsLabel gpf-label fr-label",Oe.innerHTML="Système de référence",Oe},_setCoordinateSearchSystemsSelectElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchSystem"))&&document.getElementById(this._addUID("GPcoordinateSearchSystem")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchSystem"),t.title="Choisir un système de réference",t.className="GPselect GPcoordinateSearchSystemsSelect gpf-select fr-select",t.addEventListener("change",function(je){e.onCoordinateSearchSystemChange(je)});for(var ke=0;ke<Oe.length;ke++){var Ge=Oe[ke],Be=document.createElement("option");Be.value=Ge.code,Be.text=Ge.label||ke,t.appendChild(Be)}return t},_createCoordinateSearchUnitsLabelElement(){var Oe=document.createElement("label");return Oe.className="GPcoordinateSearchUnitsLabel gpf-label fr-label",Oe.innerHTML="Unités",Oe},_setCoordinateSearchUnitsSelectElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchUnits"))&&document.getElementById(this._addUID("GPcoordinateSearchUnits")).remove();var e=this,t=document.createElement("select");t.id=this._addUID("GPcoordinateSearchUnits"),t.title="Choisir un type d'unité",t.className="GPselect GPcoordinateSearchUnitsSelect gpf-select fr-select",t.addEventListener("change",function(je){e.onCoordinateSearchUnitsChange(je)});for(var ke=0;ke<Oe.length;ke++){var Ge=Oe[ke],Be=document.createElement("option");Be.value=Ge.code?Ge.code:ke,Be.text=Ge.label||ke,t.appendChild(Be)}return t},_setCoordinateSearchLngLabelElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchLngLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLngLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLngLabel"),e.htmlFor="coordinate-lng",e.innerHTML=Oe==="Geographical"?"Longitude :":"Y :",e},_setCoordinateSearchLngInputElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchLngInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLngInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLngDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLngDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLngInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lng",e.type="number",e.step="any",e.required="",Oe){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLngDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLngDMSElement(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPcoordinateSearchLngDMS"),Oe.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLonDeg"
                class="gpf-input fr-input"
                name="inputSexLonDeg"
                title="Saisir une valeur de degré entre 0° et 180°"
                type="number"
                required=""
                min="0"
                max="180">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLonMin"
                class="gpf-input fr-input"
                name="inputSexLonMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLonSec"
                class="gpf-input fr-input"
                name="inputSexLonSec"
                title="Saisir une valeur de seconde entre 0'' et 59''"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLonToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Est et 0uest"
                name="inputSexLonToward">
                <option value="O">O</option>
                <option value="E" selected="">E</option>
            </select>
        </div>
        `,Oe},_setCoordinateSearchLatLabelElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchLatLabel"))&&document.getElementById(this._addUID("GPcoordinateSearchLatLabel")).remove();var e=document.createElement("label");return e.className="GPcoordinateSearchLabel gpf-label fr-label",e.id=this._addUID("GPcoordinateSearchLatLabel"),e.htmlFor="coordinate-lat",e.innerHTML=Oe==="Geographical"?"Latitude :":"X :",e},_setCoordinateSearchLatInputElement(Oe){document.getElementById(this._addUID("GPcoordinateSearchLatInput"))&&document.getElementById(this._addUID("GPcoordinateSearchLatInput")).remove(),document.getElementById(this._addUID("GPcoordinateSearchLatDMS"))&&document.getElementById(this._addUID("GPcoordinateSearchLatDMS")).remove();var e=document.createElement("input");switch(e.id=this._addUID("GPcoordinateSearchLatInput"),e.className="GPcoordinateSearchInput gpf-input fr-input",e.title="Saisir des coordonnées",e.name="coordinate-lat",e.type="number",e.step="any",e.required="",Oe){case"DMS":return e.title+=" géographiques (en sexa)",e.className="GPelementHidden gpf-hidden",this._setCoordinateSearchLatDMSElement();case"DEC":e.title+=" géographiques (en decimal)",e.min="-180",e.max="180";break;case"M":e.title+=" cartésiennes (en mètre)";break;case"KM":e.title+=" cartésiennes (en kilomètre)";break}return e},_setCoordinateSearchLatDMSElement(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPcoordinateSearchLatDMS"),Oe.innerHTML=`
        <div class="GPflexInput gpf-flex">
            <input step="1"
                id="GPcoordinatSearchInputSexLatDeg"
                class="gpf-input fr-input"
                name="inputSexLatDeg"
                title="Saisir une valeur de degré entre 0° et 85°"
                type="number"
                required=""
                min="0"
                max="85">
            <label>°</label>
            <input step="1"
                id="GPcoordinatSearchInputSexLatMin"
                class="gpf-input fr-input"
                name="inputSexLatMin"
                title="Saisir une valeur de minute entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59">
            <label>'</label>
            <input step="any"
                id="GPcoordinatSearchInputSexLatSec"
                class="gpf-input fr-input"
                name="inputSexLatSec"
                title="Saisir une valeur de seconde entre 0' et 59'"
                type="number"
                required=""
                min="0"
                max="59.9999">
            <label>"</label>
            <select
                id="GPcoordinatSearchInputSexLatToward"
                class="GPselect gpf-select fr-select"
                title="Saisir une direction pour Nord et Sud"
                name="inputSexLatToward">
                <option value="N">N</option>
                <option value="S">S</option>
            </select>
        </div>
        `,Oe},_createCoordinateSearchSubmitElement(){var Oe=document.createElement("input");return Oe.type="submit",Oe.id=this._addUID("GPcoordinateSearchSubmit"),Oe.className="GPsubmit gpf-btn gpf-btn-icon-submit  fr-btn fr-btn--secondary gpf-btn--secondary",Oe.value="Chercher",Oe}},logger$w=LoggerByDefault.getLogger("searchengine"),SearchEngine=class Zf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Zf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="SearchEngine",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e||this._clearResults(),this.collapsed||this._showSearchEngineButton.setAttribute("aria-pressed",!0),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$w.log("[ERROR] SearchEngine:setCollapsed - missing collapsed parameter");return}this.options.collapsible&&(e&&this.collapsed||!e&&!this.collapsed||(this._showSearchEngineButton.click(),this.collapsed=e))}getData(){return this._geocodedLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,collapsible:!0,zoomTo:"",resources:{geocode:[],autocomplete:[],search:!1},displayButtonClose:!0,displayButtonAdvancedSearch:!1,displayButtonGeolocate:!1,displayButtonCoordinateSearch:!1,advancedSearch:{},coordinateSearch:{},searchOptions:{addToMap:!0,serviceOptions:{maximumResponses:5}},geocodeOptions:{serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:5},triggerGeocode:!1,triggerDelay:1e3,prettifyResults:!1},displayMarker:!0,markerStyle:"lightOrange",markerUrl:"",placeholder:"Rechercher un lieu, une adresse",splitResults:!0},Helper.mergeParams(this.options,e),this.options.resources.geocode===""&&(this.options.resources.geocode=["PositionOfInterest","StreetAddress"]),this.options.resources.autocomplete.length===0&&(this.options.resources.autocomplete=["PositionOfInterest","StreetAddress"]),this.options.resources.search&&(this.options.searchOptions&&(this.options.searchOptions.serviceOptions&&(this.options.searchOptions.serviceOptions.url&&Search$1.setUrl(this.options.searchOptions.serviceOptions.url),this.options.searchOptions.serviceOptions.fields&&Search$1.setFields(this.options.searchOptions.serviceOptions.fields),this.options.searchOptions.serviceOptions.index&&Search$1.setIndex(this.options.searchOptions.serviceOptions.index),this.options.searchOptions.serviceOptions.size&&Search$1.setSize(this.options.searchOptions.serviceOptions.size),this.options.searchOptions.serviceOptions.maximumResponses&&Search$1.setMaximumResponses(this.options.searchOptions.serviceOptions.maximumResponses)),this.options.searchOptions.filterServices&&Search$1.setFiltersByService(this.options.searchOptions.filterServices),this.options.searchOptions.filterLayersPriority&&Search$1.setFiltersByLayerPriority(this.options.searchOptions.filterLayersPriority),this.options.searchOptions.filterWMTSPriority&&Search$1.setFilterWMTSPriority(this.options.searchOptions.filterWMTSPriority),this.options.searchOptions.filterVectortiles&&Search$1.setFiltersByTMS(this.options.searchOptions.filterVectortiles),this.options.searchOptions.updateVectortiles&&Search$1.updateFilterByTMS()),Search$1.target.addEventListener("suggest",Ge=>{logger$w.debug(Ge),this._fillSearchedSuggestListContainer(Ge.detail)})),this.options.collapsible||(this.options.collapsed=!1),this.collapsed=this.options.collapsed,this._uid=this.options.id||SelectorID.generate(),this._showSearchEngineButton=null,this._inputSearchContainer=null,this._autocompleteContainer=null,this._containerResultsLocation=null,this._containerResultsSuggest=null,this._radioButtonLocation=null,this._radioButtonSuggest=null,this._suggestedLocations=[],this._geocodedContainer=null,this._geocodedLocations=[],this._filterContainer=null,this._currentGeocodingCode=null,this._currentGeocodingLocation=null,this._advancedSearchFilters={},this._initAdvancedSearchFilters(),this._advancedSearchCodes=[],this._initAdvancedSearchCodes(),this._coordinateSearchSystems=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchSystems(),this._currentCoordinateSearchSystems=this._coordinateSearchSystems[0],this._currentCoordinateSearchType=this._coordinateSearchSystems[0].type),this._coordinateSearchUnits=[],this.options.displayButtonCoordinateSearch&&(this._initCoordinateSearchUnits(),this._currentCoordinateSearchUnits=this._coordinateSearchUnits[this._currentCoordinateSearchType][0].code),this._coordinateSearchLngInput=null,this._coordinateSearchLatInput=null,this._marker=null;var t=this.options.markerStyle,ke=this.options.markerUrl;ke?this._markerUrl=ke:this._markerUrl=Object.keys(Marker).indexOf(t)===-1?Marker.lightOrange:Marker[t],this._displayMarker=this.options.displayMarker,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._triggerHandler=null}_checkInputOptions(e){var t;if(e.resources)if(typeof e.resources=="object"){var ke=e.resources.geocode;if(ke)if(Array.isArray(ke)){var Ge=["StreetAddress","PositionOfInterest","CadastralParcel","Administratif"];for(t=0;t<ke.length;t++)Ge.indexOf(ke[t])===-1&&logger$w.log("[SearchEngine] options.resources.geocode : "+ke[t]+" is not a resource for geocode")}else logger$w.log("[SearchEngine] 'options.resources.geocode' parameter should be an array"),ke=null;var Be=e.resources.autocomplete;if(Be)if(Array.isArray(Be)){var je=["StreetAddress","PositionOfInterest"];for(t=0;t<Be.length;t++)je.indexOf(Be[t])===-1&&logger$w.log("[SearchEngine] options.resources.autocomplete : "+Be[t]+" is not a resource for autocomplete")}else logger$w.log("[SearchEngine] 'options.resources.autocomplete' parameter should be an array"),Be=null}else logger$w.log("[SearchEngine] 'resources' parameter should be an object"),e.resources=null}_initAdvancedSearchCodes(){var e=this.options.resources.geocode;e==="location"&&(e=["PositionOfInterest","StreetAddress","CadastralParcel"]),Array.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)switch(e[t]){case"PositionOfInterest":this._advancedSearchCodes.push({id:"PositionOfInterest",title:"Lieux/toponymes"});break;case"StreetAddress":this._advancedSearchCodes.push({id:"StreetAddress",title:"Adresses"});break;case"CadastralParcel":this._advancedSearchCodes.push({id:"CadastralParcel",title:"Parcelles cadastrales"});break}this._advancedSearchCodes.length===0&&(this._advancedSearchCodes=[{id:"StreetAddress",title:"Adresses"},{id:"PositionOfInterest",title:"Lieux/toponymes"},{id:"CadastralParcel",title:"Cadastre"}]),logger$w.log("advancedSearchCodes",this._advancedSearchCodes)}_initAdvancedSearchFilters(){this._advancedSearchFilters=SearchEngineUtils.advancedSearchFiltersByDefault;var e=this.options.advancedSearch;Helper.assign(this._advancedSearchFilters,e),logger$w.log("advancedSearchFilters",this._advancedSearchFilters)}_initCoordinateSearchSystems(){var e=[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric"}],t=this.options.coordinateSearch.systems;if(t)for(var ke=0;ke<t.length;ke++){var Ge=t[ke];this._setSystem(Ge)}if(this._coordinateSearchSystems.length===0)for(var Be=0;Be<e.length;Be++)this._setSystem(e[Be])}_initCoordinateSearchUnits(){var e={Geographical:[{code:"DEC",label:"degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"degrés sexagésimaux",format:MathUtils.coordinateToDMS}],Metric:[{code:"M",label:"mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"kilomètres",format:MathUtils.coordinateToKMeter}]},t=this.options.coordinateSearch.units;if(t){for(var ke in e)if(e.hasOwnProperty(ke)){for(var Ge=!1,Be=0;Be<e[ke].length;Be++)for(var je=e[ke][Be],Ve=0;Ve<t.length;Ve++){var Ze=t[Ve];je.code===Ze&&(Ge=!0,this._coordinateSearchUnits[ke]||(this._coordinateSearchUnits[ke]=[]),this._coordinateSearchUnits[ke].push(je))}Ge||(this._coordinateSearchUnits[ke]=e[ke])}}typeof this._coordinateSearchUnits=="object"&&Object.keys(this._coordinateSearchUnits).length===0&&(this._coordinateSearchUnits=e)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div gpf-widget-color";var ke=document.createElement("button");return ke.title="Fermer la pop-up",ke.className="gp-styling-button closer gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-mt-1v fr-mr-2v",ke.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",this._popupContent.style["min-width"]="200px",t.appendChild(this._popupContent),t.appendChild(ke),t}_initContainer(){var e=this._createMainContainerElement(),t=this._createSearchDivElement(),ke=this._showSearchEngineButton=this._createShowSearchEnginePictoElement(this.options.collapsible);t.appendChild(ke),this.options.collapsible||e.classList.add("gpf-widget-color","gpf-widget-padding");var Ge=this._inputSearchContainer=this._createSearchInputElement(this.options.placeholder);this.options.displayButtonClose&&Ge.appendChild(this._createSearchResetElement());var Be=this;Ge.addEventListener?Ge.addEventListener("click",function(){Be.onAutoCompleteInputClick()}):Ge.attachEvent&&Ge.attachEvent("onclick",function(){Be.onAutoCompleteInputClick()}),t.appendChild(Ge);var je=this._createButtonsElement(),Ve=this._createFirstLineWrapper();if(Ve.appendChild(t),Ve.appendChild(je),e.appendChild(Ve),checkDsfr()&&this.options.splitResults||this.options.displayButtonAdvancedSearch){var Ze=this._createRadioContainer();e.appendChild(Ze)}if(checkDsfr()&&this.options.splitResults){var Qe;[Qe,this._radioButtonLocation,this._radioButtonSuggest]=this._createRadioElements(),Ze.appendChild(Qe)}if(this.options.displayButtonAdvancedSearch){var en=this._createShowAdvancedSearchElement();Ze.appendChild(en);var tn=this._createAdvancedSearchPanelElement(),an=this._createAdvancedSearchPanelDivElement(),cn=this._createAdvancedSearchPanelHeaderElement(),un=this._createAdvancedSearchPanelFormElement(this._advancedSearchCodes),dn=this._filterContainer=this._createAdvancedSearchFormFiltersElement();this._setFilter(this._advancedSearchCodes[0].id);var fn=this._createAdvancedSearchFormInputElement();un.appendChild(dn),un.appendChild(fn),an.appendChild(cn),an.appendChild(un),tn.appendChild(an),e.appendChild(tn)}if(this.options.displayButtonGeolocate){var pn=this._createShowGeolocateElement();je.appendChild(pn)}if(this.options.displayButtonCoordinateSearch){var gn=this._createShowSearchByCoordinateElement();je.appendChild(gn);var yn=this._createCoordinateSearchPanelElement(),vn=this._createCoordinateSearchPanelDivElement(),An=this._createCoordinateSearchPanelHeaderElement(),xn=this._createCoordinateSearchPanelFormElement(),wn=null;wn=this._containerSystems=this.__createCoordinateSearchDivElement(),xn.appendChild(wn);var bn=this._createCoordinateSearchSystemsLabelElement(),Mn=this._setCoordinateSearchSystemsSelectElement(this._coordinateSearchSystems);wn.appendChild(bn),wn.appendChild(Mn),wn=this._containerUnits=this.__createCoordinateSearchDivElement(),xn.appendChild(wn);var Pn=this._createCoordinateSearchUnitsLabelElement(),En=this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[this._currentCoordinateSearchType]);wn.appendChild(Pn),wn.appendChild(En),wn=this._containerCoordinateLng=this.__createCoordinateSearchDivElement(),xn.appendChild(wn);var Cn=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),Rn=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);wn.appendChild(Cn),wn.appendChild(Rn),wn=this._containerCoordinateLat=this.__createCoordinateSearchDivElement(),xn.appendChild(wn);var Tn=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),Nn=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits);wn.appendChild(Tn),wn.appendChild(Nn);var Gn=this._createCoordinateSearchSubmitElement();xn.appendChild(Gn),vn.appendChild(An),vn.appendChild(xn),yn.appendChild(vn),e.appendChild(yn)}var zn=this._autocompleteContainer=this._createAutoCompleteElement(),$n=this._createAutoCompleteListElement(),Qn=this._containerResultsLocation=this._createAutoCompletedLocationContainer(),Hn=this._containerResultsSuggest=this._createSearchedSuggestContainer();$n.appendChild(Qn),$n.appendChild(Hn),zn.appendChild($n),e.appendChild(zn);var Ni=this._createGeocodeResultsElement(),On=this._createGeocodeResultsDivElement();Ni.appendChild(On);var qn=this._geocodedContainer=this._createGeocodeResultsListElement();return On.appendChild(qn),e.appendChild(Ni),e}_setFilter(e){for(var t=this._filterContainer,ke=!1,Ge=0;Ge<this._advancedSearchCodes.length;Ge++)if(this._advancedSearchCodes[Ge].id===e){ke=!0;break}if(!ke){for(;t.firstChild;)t.removeChild(t.firstChild);return}for(this._currentGeocodingCode=e;t.firstChild;)t.removeChild(t.firstChild);var Be=this._advancedSearchFilters[e];if(!(!Be||Be.length===0)){for(var je=this._createAdvancedSearchFiltersTableElement(e,!0),Ve=0;Ve<Be.length;Ve++){var Ze=this._createAdvancedSearchFiltersAttributElement(Be[Ve]);je.appendChild(Ze)}return t.appendChild(je),t}}_requestAutoComplete(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.text){logger$w.log(e);var t={};Helper.assign(t,this.options.autocompleteOptions.serviceOptions),Helper.assign(t,e);var ke=this.options.resources.autocomplete;ke&&Array.isArray(ke)&&(t.type||(t.type=ke)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$w.log(t),Gp.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._containerResultsLocation;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonLocation||this._radioButtonLocation&&this._radioButtonLocation.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),this._displaySuggestedLocation(),(!checkDsfr()||!this.options.splitResults)&&this._createAutoCompletedLocationTitleElement();for(var ke=0;ke<e.length;ke++)this._createAutoCompletedLocationElement(e[ke],ke)}}}_fillSearchedSuggestListContainer(e){var t=this._containerResultsSuggest;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);if(t.classList.add("GPelementHidden","gpf-hidden"),e.length){(!this._radioButtonSuggest||this._radioButtonSuggest&&this._radioButtonSuggest.checked)&&t.classList.remove("GPelementHidden","gpf-hidden"),(!checkDsfr()||!this.options.splitResults)&&this._createSearchedSuggestTitleElement();for(let ke=0;ke<e.length;ke++){const Ge=e[ke];this._createSearchedSuggestElement(Ge,ke)}}}_requestGeocoding(e){if(!(!e||typeof e=="object"&&Object.keys(e).length===0)&&e.query!==null){logger$w.log(e);var t={};Helper.assign(t,this.options.geocodeOptions.serviceOptions),Helper.assign(t,e);var ke=this,Ge=this.options.geocodeOptions.serviceOptions.onFailure!==null&&typeof this.options.geocodeOptions.serviceOptions.onFailure=="function",Be=this.options.geocodeOptions.serviceOptions.onSuccess!==null&&typeof this.options.geocodeOptions.serviceOptions.onSuccess=="function";if(Be){var je=function(Qe){e.onSuccess.call(ke,Qe),ke.options.geocodeOptions.serviceOptions.onSuccess.call(ke,Qe)};t.onSuccess=je}if(Ge){var Ve=function(Qe){e.onFailure.call(ke,Qe),ke.options.geocodeOptions.serviceOptions.onFailure.call(ke,Qe)};t.onFailure=Ve}var Ze=this.options.resources.geocode;Ze&&(t.index||(t.index=Ze)),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$w.log(t),Gp.Services.geocode(t)}}_fillGeocodedLocationListContainer(e){if(!e||e.length===0){this._clearGeocodedLocation();return}var t=this._geocodedContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var ke=0;ke<e.length;ke++)logger$w.log(e[ke]),this._createGeocodedLocationElement(e[ke],ke);this._geocodedLocations=e}_setLabel(e){document.getElementById("GPsearchInputText-"+this._uid).value=e}_setPosition(e,t){var ke=this.getMap().getView();ke.setCenter(e),ke.setZoom(t)}_setMarker(e,t){var ke=this.getMap(),Ge=this;if(this._marker!=null&&(ke.removeOverlay(this._marker),this._marker=null),e){var Be=document.createElement("img");Be.src=this._markerUrl,Be.addEventListener?Be.addEventListener("click",function(){Ge._onResultMarkerSelect(t)}):Be.attachEvent&&Be.attachEvent("onclick",function(){Ge._onResultMarkerSelect(t)}),this._marker=new Overlay({position:e,positioning:"center-center",element:Be,stopEvent:!1}),ke.addOverlay(this._marker)}}_getZoom(e){var t=this.getMap(),ke=this.options.zoomTo,Ge=null;if(typeof ke=="function"&&(logger$w.trace("zoom function"),Ge=ke.call(this,e)),typeof ke=="number"&&(logger$w.trace("zoom level"),Ge=ke),typeof ke=="string")if(ke==="auto")logger$w.trace("zoom auto"),Ge=SearchEngineUtils.zoomToResultsByDefault(e);else{logger$w.trace("zoom level parsing");var Be=parseInt(ke,10);isNaN(Be)||(logger$w.trace("zoom parsing"),Ge=Be)}Number.isInteger=Number.isInteger||function(Ze){return typeof Ze=="number"&&isFinite(Ze)&&Math.floor(Ze)===Ze},(!Ge||Ge===""||!Number.isInteger(Ge))&&(logger$w.trace("zoom not found, current zoom..."),Ge=t.getView().getZoom());var je=t.minZoom,Ve=t.maxZoom;return Ge<je&&(logger$w.trace("zoom level min..."),Ge=je),Ge>Ve&&(logger$w.trace("zoom level max..."),Ge=Ve),logger$w.trace("zoom",Ge),Ge}_onResultMarkerSelect(e){var t=this.getMap(),ke="";if(typeof e!="string")if(e.service==="GeocodedLocation"){ke="<ul>";var Ge=e.location.placeAttributes;for(var Be in Ge)Ge.hasOwnProperty(Be)&&Be!=="trueGeometry"&&Be!=="extraFields"&&Be!=="houseNumberInfos"&&Be!=="_count"&&(ke+="<li>",ke+='<span class="gp-attname-others-span">'+Be.toUpperCase()+" : </span>",ke+=Ge[Be],ke+=" </li>");ke+=" </ul>"}else e.service==="SuggestedLocation"?ke=GeocodeUtils.getSuggestedLocationFreeform(e.location):ke="sans informations.";else ke=e;this._popupContent.innerHTML=ke,this._popupOverlay?this._popupOverlay.setPosition(this._marker.getPosition()):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:this._marker.getPosition(),offset:[0,-42]}),t.addOverlay(this._popupOverlay))}_setSystem(e){if(typeof e!="object"){logger$w.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$w.error("crs not defined !");return}if(e.label||(logger$w.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$w.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$w.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._coordinateSearchSystems.length;t++){var ke=this._coordinateSearchSystems[t];e.crs===ke.crs&&logger$w.info("crs '{}' already configured",ke.crs)}e.code=this._coordinateSearchSystems.length,this._coordinateSearchSystems.push(e)}onShowSearchEngineClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._showSearchEngineButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed&&this._clearResults()}onSearchResetClick(){this._clearResults()}onShowSearchGeolocateClick(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(e=>{var t=this.getMap().getView(),ke=t.getProjection().getCode(),Ge=[e.coords.longitude,e.coords.latitude],Be;if(ke!=="EPSG:4326"?Be=transform$1(Ge,"EPSG:4326",ke):Be=Ge,isNaN(Be[0])||isNaN(Be[1])){this._setMarker();return}if(this._setPosition(Be,15),this._displayMarker){var je="<h6> Ma position </h6> longitude : "+Ge[0]+"<br/> latitude : "+Ge[1];this._setMarker(Be,je)}this.dispatchEvent({type:"searchengine:geolocation:click",coordinates:Be})})}onShowSearchByCoordinateClick(){var e=null,t=null;if(this._coordinateSearchLngInput&&this._coordinateSearchLngInput.nodeName==="DIV"&&this._coordinateSearchLatInput&&this._coordinateSearchLatInput.nodeName==="DIV"?(e=this._getCoordinateSearchDMS(this._coordinateSearchLngInput),t=this._getCoordinateSearchDMS(this._coordinateSearchLatInput)):(e=this._coordinateSearchLngInput.value,t=this._coordinateSearchLatInput.value),!(!e||!t)){var ke=[e,t],Ge=this.getMap().getView(),Be=Ge.getProjection().getCode();if(Be!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",Be)),isNaN(ke[0])||isNaN(ke[1])){this._setMarker();return}this._setPosition(ke,10),this._displayMarker&&this._setMarker(ke,"sans information"),this.dispatchEvent({type:"searchengine:coordinates:click",coordinates:ke})}}_getCoordinateSearchDMS(e){if(e&&e.nodeName==="DIV"){var t=e.querySelectorAll("[name]");if(t){var ke=MathUtils.toInteger(t[0].value),Ge=MathUtils.toInteger(t[1].value),Be=MathUtils.toInteger(t[2].value),je=t[3].options[t[3].selectedIndex].text;return!ke||!Ge||!Be||!je?void 0:MathUtils.dmsToDecimal(ke,Ge,Be,je)}}}onAutoCompleteInputClick(){var e=document.getElementById("GPsearchInputText-"+this._uid);e&&!e.disabled&&e.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){if(this._currentGeocodingLocation=t,t.length<3){this._clearSuggestedLocation();return}var ke=this.options.autocompleteOptions.triggerGeocode,Ge=this.options.autocompleteOptions.triggerDelay,Be=this.options.autocompleteOptions.maximumEntries,je=this.options.autocompleteOptions.prettifyResults,Ve=this;this._requestAutoComplete({text:t,onSuccess:function(Qe){if(logger$w.log("request from AutoComplete",Qe),Qe){Ve._suggestedLocations=Qe.suggestedLocations,Ve._locationsToBeDisplayed=[];for(var en=0;en<Ve._suggestedLocations.length;en++){var tn=Ve._suggestedLocations[en];tn.position&&tn.position.x===0&&tn.position.y===0&&tn.fullText?Ve._getGeocodeCoordinatesFromFullText(tn,en):Ve._locationsToBeDisplayed.push(tn)}je===!0&&Ve._prettifyAutocompleteResults(Ve._locationsToBeDisplayed),Be&&(Ve._locationsToBeDisplayed=Ve._locationsToBeDisplayed.slice(0,Be)),Ve._fillAutoCompletedLocationListContainer(Ve._locationsToBeDisplayed),Ve._triggerHandler&&(clearTimeout(Ve._triggerHandler),Ve._triggerHandler=null,logger$w.warn("Cancel a geocode request !"))}},onFailure:function(Qe){Ve._clearSuggestedLocation(),logger$w.log(Qe.message),Qe.message==="No suggestion matching the search"&&ke&&(Ve._triggerHandler&&(clearTimeout(Ve._triggerHandler),logger$w.warn("Cancel the last geocode request !")),Ve._triggerHandler=setTimeout(function(){logger$w.warn("Launch a geocode request !"),Ve._requestGeocoding({location:t,onSuccess:function(en){if(logger$w.log("request from Geocoding",en),en){Ve._locationsToBeDisplayed=[];for(var tn=en.locations,an=0;an<tn.length;an++){var cn=tn[an];cn.fullText=GeocodeUtils.getGeocodedLocationFreeform(cn),cn.position={x:cn.position.lon,y:cn.position.lat},Ve._locationsToBeDisplayed.push(cn)}Ve._fillAutoCompletedLocationListContainer(tn)}},onFailure:function(en){logger$w.log(en.message)}})},Ge))}}),this.options.resources.search&&Search$1.suggest(t);var Ze=this.getMap();Ze.on("click",this._hideSuggestedLocation,this),Ze.on("pointerdrag",this._hideSuggestedLocation,this)}}_getGeocodeCoordinatesFromFullText(e,t){var ke=this;Gp.Services.geocode({apiKey:this.options.apiKey,ssl:this.options.ssl,q:GeocodeUtils.getSuggestedLocationFreeform(e),index:e.type,onSuccess:function(Ge){logger$w.log("request from Geocoding (coordinates null)",Ge),Ge.locations&&Ge.locations.length!==0&&Ge.locations[0].position&&ke._suggestedLocations&&ke._suggestedLocations[t]&&(ke._suggestedLocations[t].position={lon:Ge.locations[0].position.y,lat:Ge.locations[0].position.x},ke._locationsToBeDisplayed.unshift(ke._suggestedLocations[t]),ke._fillAutoCompletedLocationListContainer(ke._locationsToBeDisplayed))},onFailure:function(){ke._suggestedLocations&&ke._suggestedLocations[t]&&ke._createAutoCompletedLocationElement(ke._suggestedLocations[t],t)}})}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(logger$w.log(t),logger$w.log(this._locationsToBeDisplayed[t]),!!t){var ke=[this._locationsToBeDisplayed[t].position.x,this._locationsToBeDisplayed[t].position.y],Ge={service:"SuggestedLocation",location:this._locationsToBeDisplayed[t]},Be=GeocodeUtils.getSuggestedLocationFreeform(this._locationsToBeDisplayed[t]);this._setLabel(Be),this._currentGeocodingLocation=Be;var je=this.getMap().getView(),Ve=je.getProjection().getCode();Ve!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",Ve));var Ze=this._getZoom(Ge);this._setPosition(ke,Ze),this._displayMarker&&this._setMarker(ke,Ge),this.dispatchEvent({type:"searchengine:autocomplete:click",location:this._locationsToBeDisplayed[t]})}}onSearchedResultsItemClick(e){var t=SelectorID.index(e.target.id),ke=null;try{var Ge=Search$1.getSuggestions()[t];if(!Ge)throw"No suggestions found !";if(this.options.searchOptions.addToMap){if(!Config.isConfigLoaded())throw"ERROR : contract key configuration has to be loaded to load Geoportal layers.";var Be=Ge.service,je=Ge.name,Ve=null;switch(Be){case"WMS":Ve=new LayerWMS({layer:je});break;case"WMTS":Ve=new LayerWMTS({layer:je});break;case"TMS":Ve=new LayerMapBox({layer:je},{declutter:!0});default:break}if(Ve){var Ze=this.getMap();Ze.addLayer(Ve)}}}catch(Qe){ke=Qe}this.dispatchEvent({type:"searchengine:search:click",suggest:Ge,error:ke})}onGeocodingSearchSubmit(e){var t=e.target[0].value;if(t){this._currentGeocodingLocation=t;var ke=this;this._requestGeocoding({query:t,onSuccess:function(Ge){if(logger$w.log("request from Geocoding",Ge),Ge){var Be=Ge.locations;ke._fillGeocodedLocationListContainer(Be)}},onFailure:function(Ge){ke._clearGeocodedLocation(),logger$w.log(Ge.message)}})}}onGeocodedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var ke=[this._geocodedLocations[t].position.lon,this._geocodedLocations[t].position.lat],Ge={service:"GeocodedLocation",location:this._geocodedLocations[t]},Be=GeocodeUtils.getGeocodedLocationFreeform(this._geocodedLocations[t]);this._setLabel(Be);var je=this.getMap().getView(),Ve=je.getProjection().getCode();Ve!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",Ve));var Ze=this._getZoom(this.options.zoomTo);this._setPosition(ke,Ze),this._displayMarker&&this._setMarker(ke,Ge),this.dispatchEvent({type:"searchengine:geocode:click",location:this._geocodedLocations[t]})}}onGeocodingAdvancedSearchCodeChange(e){logger$w.log(e);var t=e.target.selectedIndex,ke=e.target.options[t].value;ke&&this._setFilter(ke)}onGeocodingAdvancedSearchSubmit(e,t){if(logger$w.log(t),!(!t||t.length===0)){for(var ke,Ge={},Be=0;Be<t.length;Be++){var je=t[Be];je.value&&(je.key==="section"&&(je.value=je.value.toUpperCase()),Ge[je.key]=je.value)}var Ve=document.getElementById("GPsearchInputText-"+this._uid);ke=Ve.value,this._currentGeocodingCode==="CadastralParcel"&&(ke="");var Ze=this;this._requestGeocoding({query:ke,index:this._currentGeocodingCode,filters:Ge,onSuccess:function(Qe){if(logger$w.log(Qe),Qe){var en=Qe.locations;Ze._fillGeocodedLocationListContainer(en)}},onFailure:function(Qe){Ze._clearGeocodedLocation(),logger$w.log(Qe.message)}})}}_getCadastralParcelRequestParams(e){var t="",ke,Ge=e.department;Ge?(ke=Ge.length,ke===2?t=Ge:ke===1?t="0"+Ge:t=Ge.substring(0,2)):t="__";var Be=e.commune;Be?(ke=Be.length,ke===3?t+=Be:ke===2?t+="_"+Be:ke===1?t+="__"+Be:t+=Be.substring(0,3)):t+="___";var je=e.insee;je&&je.length===5&&(t=je);var Ve=e.absorbedCity;Ve?(ke=Ve.length,ke===3?t+=Ve:ke<3?ke===2?t+="_"+Ve:ke===1&&(t+="__"+Ve):t+=Ve.substring(0,3)):t+="___";var Ze=e.section;Ze?(ke=Ze.length,ke===2?t+=Ze:ke===1?t+="_"+Ze:t+=Ze.substring(0,2)):t+="__";var Qe=e.number;return Qe?(ke=Qe.length,ke===4?t+=Qe:ke===3?t+="_"+Qe:ke===2?t+="__"+Qe:ke===1?t+="___"+Qe:t+=Qe.substring(0,4)):t+="___",logger$w.log("location : "+t),t}onCoordinateSearchSystemChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="";for(var Ge=null,Be=0;Be<this._coordinateSearchSystems.length;++Be)if(this._coordinateSearchSystems[Be].code===Number(ke)){Ge=this._coordinateSearchSystems[Be].type;break}if(!Ge){logger$w.log("system not found in projection systems container");return}this._currentCoordinateSearchSystems=this._coordinateSearchSystems[Number(ke)],Ge!==this._currentCoordinateSearchType&&(this._currentCoordinateSearchType=Ge,this._currentCoordinateSearchUnits=this._coordinateSearchUnits[Ge][0].code,this._containerUnits.appendChild(this._setCoordinateSearchUnitsSelectElement(this._coordinateSearchUnits[Ge])),this._updateCoordinateSearchElements())}onCoordinateSearchUnitsChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value;this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value="",this._currentCoordinateSearchUnits=ke,this._updateCoordinateSearchElements()}onCoordinateSearchClose(){this._setMarker(),this._coordinateSearchLngInput.value="",this._coordinateSearchLatInput.value=""}_updateCoordinateSearchElements(){var e=this._setCoordinateSearchLngLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLngInput=this._setCoordinateSearchLngInputElement(this._currentCoordinateSearchUnits);this._containerCoordinateLng.appendChild(e),this._containerCoordinateLng.appendChild(t),e=this._setCoordinateSearchLatLabelElement(this._currentCoordinateSearchType),t=this._coordinateSearchLatInput=this._setCoordinateSearchLatInputElement(this._currentCoordinateSearchUnits),this._containerCoordinateLat.appendChild(e),this._containerCoordinateLat.appendChild(t)}_clearResults(){var e=this.getMap();this._currentGeocodingLocation=null,this._clearSuggestedLocation(),this._clearGeocodedLocation(),this._setMarker(),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null)}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._containerResultsLocation)for(;this._containerResultsLocation.firstChild;)this._containerResultsLocation.removeChild(this._containerResultsLocation.firstChild);if(this.options.resources.search&&(Search$1.clear(),this._containerResultsSuggest))for(;this._containerResultsSuggest.firstChild;)this._containerResultsSuggest.removeChild(this._containerResultsSuggest.firstChild)}_prettifyAutocompleteResults(e){for(var t=e.length-1;t>=0;t--){var ke=e[t];(ke.type==="StreetAddress"&&ke.kind==="municipality"||ke.type==="PositionOfInterest"&&ke.poiType[0]==="lieu-dit habité"&&ke.poiType[1]==="zone d'habitation")&&e.splice(t,1),ke.type==="PositionOfInterest"&&ke.poiType[0]==="administratif"&&(ke.poiType[1]==="département"||ke.poiType[1]==="région")&&(ke.fullText=ke.fullText+", "+ke.poiType[1])}}_hideSuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementVisible","GPelementHidden"),this._autocompleteContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._autocompleteContainer&&(this._autocompleteContainer.classList.replace("GPelementHidden","GPelementVisible"),this._autocompleteContainer.classList.replace("gpf-hidden","gpf-visible"))}_clearGeocodedLocation(){if(this._geocodedLocations=[],this._geocodedContainer)for(;this._geocodedContainer.firstChild;)this._geocodedContainer.removeChild(this._geocodedContainer.firstChild)}};Object.assign(SearchEngine.prototype,SearchEngineDOM);Object.assign(SearchEngine.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.SearchEngine=SearchEngine);var MousePositionDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPmousePosition"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowMousePositionPictoElement:function(Oe){var e=this,t=document.createElement("button"),ke=document.createElement("span");return t.appendChild(ke),t.id=this._addUID("GPshowMousePositionPicto"),t.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-position fr-btn fr-btn--tertiary",t.setAttribute("aria-label","Afficher les coordonnées du curseur"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener?t.addEventListener("click",function(Ge){var Be=Ge.target.ariaPressed==="true";Ge.target.setAttribute("aria-pressed",!Be),e.onShowMousePositionClick(Ge)}):t.attachEvent&&t.attachEvent("onclick",function(Ge){var Be=Ge.target.ariaPressed==="true";Ge.target.setAttribute("aria-pressed",!Be),e.onShowMousePositionClick(Ge)}),t},_createMousePositionPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPmousePositionPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createMousePositionPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createMapCenter:function(){var Oe=document.createElement("div");return Oe.id="GPmapCenter",Oe.className="",Oe},_createMousePositionPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.id=this._addUID("GPmousePositionHeaderTitle"),Oe.innerHTML="Coordonnées",Oe},_createMousePositionPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader gpf-panel__header fr-modal__header",Oe},_createMousePositionPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPmousePositionPanelClose"),e.className="GPpanelClose gpf-btn gpf-btn-icon-close  fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowMousePositionPicto")).click()},!1),e.addEventListener("keydown",function(ke){ke.keyCode===13&&document.getElementById(Oe._addUID("GPshowMousePositionPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowMousePositionPicto")).click()}),e.attachEvent("onkeydown",function(ke){ke.keyCode===13&&document.getElementById(Oe._addUID("GPshowMousePositionPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createMousePositionPanelBasicElement:function(Oe,e,t,ke){Oe=typeof Oe>"u"?!0:Oe,e=typeof e>"u"?!0:e,t=typeof t>"u"?!1:t;var Ge=document.createElement("div");return Ge.id=this._addUID("GPmousePositionBasicPanel"),Ge.classList.add("fr-mx-1w"),Ge.appendChild(this._createMousePositionPanelBasicCoordinateElement(e,t,ke)),Ge.appendChild(this._createMousePositionPanelEditToolsElement(t)),Ge.appendChild(this._createMousePositionPanelBasicAltitudeElement(Oe)),Ge},_createCoordinateElement:function(Oe,e){var t=this;if(["Lon","Lat"].indexOf(Oe)===-1)return[];var ke=[],Ge=document.createElement("input");Ge.id=this._addUID("GPmousePosition"+Oe),Ge.title=e===!0?"Cliquer pour saisir des coordonnées":"",Ge.readOnly=!0,e&&(Ge.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),Ge.addEventListener("change",function(je){this.classList.remove("error");var Ve=t.validateExtentCoordinate(Oe,this.value,je);Ve?this.classList.remove("error"):this.classList.add("error")})),ke.push(Ge);var Be=document.createElement("span");return Be.className="GPmousePositionUnits",ke.push(Be),ke},_createDMSCoordinateElement:function(Oe,e){if(["Lon","Lat"].indexOf(Oe)===-1)return[];var t=this,ke=[],Ge=document.createElement("input");Ge.id=this._addUID("GPmousePosition"+Oe+"Degrees"),Ge.className="GPSexagesimal",Ge.setAttribute("name","degrees"),Ge.title=e===!0?"Cliquer pour saisir des coordonnées":"",Ge.readOnly=!0,Ge.dataset.min=0,Ge.dataset.max=Oe==="Lon"?180:90,e&&(Ge.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),Ge.addEventListener("change",function(){this.classList.remove("error");var cn=t._checkDMSDegrees(Oe,this);cn?this.classList.remove("error"):this.classList.add("error")})),ke.push(Ge);var Be=document.createElement("span");Be.className="GPmousePositionSexagesimalLabel",Be.innerHTML="°",ke.push(Be);var je=document.createElement("input");je.id=this._addUID("GPmousePosition"+Oe+"Minutes"),je.className="GPSexagesimal",je.setAttribute("name","minutes"),je.title=e===!0?"Cliquer pour saisir des coordonnées":"",je.readOnly=!0,je.dataset.min=0,je.dataset.max=59,e&&(je.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),je.addEventListener("change",function(){this.classList.remove("error");var cn=t._checkDMSElement(this);cn?this.classList.remove("error"):this.classList.add("error")})),ke.push(je);var Ve=document.createElement("span");Ve.className="GPmousePositionSexagesimalLabel",Ve.innerHTML="'",ke.push(Ve);var Ze=document.createElement("input");Ze.id=this._addUID("GPmousePosition"+Oe+"Seconds"),Ze.className="GPSexagesimalsec",Ze.setAttribute("name","seconds"),Ze.title=e===!0?"Cliquer pour saisir des coordonnées":"",Ze.readOnly=!0,Ze.dataset.min=0,Ze.dataset.max=59,e&&(Ze.addEventListener("click",function(){t.onMousePositionEditModeClick(!0)}),Ze.addEventListener("change",function(){this.classList.remove("error");var cn=t._checkDMSElement(this,!0);cn?this.classList.remove("error"):this.classList.add("error")})),ke.push(Ze);var Qe=document.createElement("span");Qe.className="GPmousePositionSexagesimalLabel",Qe.innerHTML="''",ke.push(Qe);var en=document.createElement("select");en.id=this._addUID("GPmousePosition"+Oe+"Direction"),en.className="GPmousePositionDirection",en.setAttribute("name","direction"),en.disabled=!0;var tn=document.createElement("option");tn.value=Oe==="Lon"?"E":"N",tn.innerHTML=Oe==="Lon"?"E":"N",en.appendChild(tn);var an=document.createElement("option");return an.value=Oe==="Lon"?"O":"S",an.innerHTML=Oe==="Lon"?"O":"S",en.appendChild(an),ke.push(en),ke},_createMousePositionPanelBasicCoordinateElement:function(Oe,e,t){var ke=document.createElement("div");ke.id=this._addUID("GPmousePositionCoordinate"),ke.style.display=Oe?"block":"none";var Ge=document.createElement("div");Ge.classList.add("fr-mb-1w");var Be=document.createElement("span");Be.className="GPmousePositionLabel",Be.id=this._addUID("GPmousePositionLatLabel"),Be.innerHTML="Latitude : ",Ge.appendChild(Be);var je=document.createElement("span");je.id=this._addUID("GPmousePositionLatCoordinate");var Ve;t==="DMS"?Ve=this._createDMSCoordinateElement("Lat",e):Ve=this._createCoordinateElement("Lat",e);for(var Ze=0;Ze<Ve.length;Ze++)je.appendChild(Ve[Ze]);Ge.appendChild(je),ke.appendChild(Ge);var Qe=document.createElement("div");Qe.classList.add("fr-mb-1w");var en=document.createElement("span");en.className="GPmousePositionLabel",en.id=this._addUID("GPmousePositionLonLabel"),en.innerHTML="Longitude : ",Qe.appendChild(en);var tn=document.createElement("span");tn.id=this._addUID("GPmousePositionLonCoordinate");var an;t==="DMS"?an=this._createDMSCoordinateElement("Lon",e):an=this._createCoordinateElement("Lon",e);for(var cn=0;cn<an.length;cn++)tn.appendChild(an[cn]);return Qe.appendChild(tn),ke.appendChild(Qe),ke},_createMousePositionPanelBasicAltitudeElement:function(Oe){var e=document.createElement("div");e.id=this._addUID("GPmousePositionAltitude"),e.classList.add("fr-mb-1w"),e.style.display=Oe?"block":"none";var t=document.createElement("span");t.className="GPmousePositionLabel",t.innerHTML="Altitude : ",e.appendChild(t);var ke=document.createElement("span");ke.className="GPmousePositionCoords",ke.id=this._addUID("GPmousePositionAlt"),ke.innerHTML="...",e.appendChild(ke);var Ge=document.createElement("span");return Ge.className="GPmousePositionAltitudeUnits",Ge.innerHTML="m",e.appendChild(Ge),e},_createMousePositionPanelEditToolsElement:function(Oe){var e=this,t=document.createElement("div");t.className="GPmousePositionPanelEditTools",t.id=this._addUID("GPmousePositionPanelEditTools"),Oe||(t.style.display="none");var ke=document.createElement("span");ke.className="GPmousePositionEditTool",ke.id=this._addUID("GPmousePositionLocate"),ke.title=Oe===!0?"Cliquer pour saisir des coordonnées":"",Oe&&ke.addEventListener("click",function(){e.onMousePositionEditModeLocateClick()}),t.appendChild(ke);var Ge=document.createElement("span");return Ge.className="GPmousePositionEditTool",Ge.id=this._addUID("GPmousePositionCloseEdit"),Ge.title="Quitter la saisie des coordonnées",Ge.style.display="none",Oe&&Ge.addEventListener("click",function(){e.onMousePositionEditModeClick(!1)}),t.appendChild(Ge),t},_createShowMousePositionSettingsElement:function(Oe){var e=this,t=document.createElement("button");return t.id=this._addUID("GPshowMousePositionSettings"),t.className="GPelementHidden GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowMousePositionSettingsPicto gpf-hidden gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill",t.title="Réglages",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!0),t.addEventListener?t.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),e.onShowMousePositionSettingsClick(ke)}):t.attachEvent&&t.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),e.onShowMousePositionSettingsClick(ke)}),t},_createMousePositionSettingsElement:function(Oe){var e=document.createElement("div");e.id=this._addUID("GPmousePositionSettings"),e.style.display=Oe===void 0||Oe?"block":"none",e.classList.add("fr-m-1w");var t=document.createElement("span");return t.className="GPmousePositionSettingsLabel",t.innerHTML="Système de référence",e.appendChild(t),e},_createMousePositionSettingsSystemsElement:function(Oe){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionSystem"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select fr-my-1w",t.addEventListener("change",function(je){e.onMousePositionProjectionSystemChange(je)}),t.addEventListener("mouseover",function(je){je.target.nodeName!=="OPTION"&&e.onMousePositionProjectionSystemMouseOver(je)}),t.title="Type de système";for(var ke=0;ke<Oe.length;ke++){var Ge=Oe[ke],Be=document.createElement("option");Be.value=Ge.code,Be.text=Ge.label||ke,t.appendChild(Be)}return t},_createMousePositionSettingsUnitsElement:function(Oe){var e=this,t=document.createElement("select");t.id=this._addUID("GPmousePositionProjectionUnits"),t.className="GPselect GPmousePositionSettingsSelect gpf-select fr-select",t.addEventListener("change",function(je){e.onMousePositionProjectionUnitsChange(je)}),t.title="Unités du système";for(var ke=0;ke<Oe.length;ke++){var Ge=Oe[ke],Be=document.createElement("option");Be.value=Ge.code?Ge.code:ke,Be.text=Ge.label||ke,t.appendChild(Be)}return t},_resetLabelElements:function(Oe){var e=document.getElementById(this._addUID("GPmousePositionLatLabel"));e.innerHTML=Oe==="Geographical"?"Latitude :":"X :";var t=document.getElementById(this._addUID("GPmousePositionLonLabel"));t.innerHTML=Oe==="Geographical"?"Longitude :":"Y :"},_resetUnitElements:function(Oe){var e="";(Oe==="M"||Oe==="KM")&&(e=Oe.toLowerCase());for(var t=document.getElementsByClassName("GPmousePositionUnits"),ke=0;ke<t.length;ke++)t[ke].innerHTML=e},_resetCoordinateElements:function(Oe,e,t){for(var ke=document.getElementById(this._addUID("GPmousePositionLatCoordinate"));ke.firstChild;)ke.removeChild(ke.firstChild);var Ge;t==="DMS"?Ge=this._createDMSCoordinateElement("Lat",Oe):Ge=this._createCoordinateElement("Lat",Oe);for(var Be=0;Be<Ge.length;Be++)ke.appendChild(Ge[Be]);for(var je=document.getElementById(this._addUID("GPmousePositionLonCoordinate"));je.firstChild;)je.removeChild(je.firstChild);var Ve;t==="DMS"?Ve=this._createDMSCoordinateElement("Lon",Oe):Ve=this._createCoordinateElement("Lon",Oe);for(var Ze=0;Ze<Ve.length;Ze++)je.appendChild(Ve[Ze])},_setEditMode:function(Oe){var e=document.getElementById(this._addUID("GPmousePositionLocate"));e.title=Oe?"Aller à la position ...":"Cliquer pour saisir des coordonnées";var t=document.getElementById(this._addUID("GPmousePositionCloseEdit"));t.style.display=Oe?"inline-block":"none";for(var ke="div[id^="+this._addUID("GPmousePositionCoordinate")+"]",Ge=document.querySelectorAll(ke+" input"),Be=0;Be<Ge.length;Be++)Ge[Be].readOnly=!Oe,Oe&&(Ge[Be].value="",Ge[Be].classList.remove("error"));for(var je=document.querySelectorAll(ke+" select"),Ve=0;Ve<je.length;Ve++)je[Ve].disabled=!Oe},_checkDMSElement:function(Oe,e){var t=e!==void 0,ke=Oe.value;if(t&&(ke=ke.replace(",",".")),isNaN(ke))return!1;var Ge=parseFloat(ke);if(!t&&(Ge|0)!==Ge)return!1;var Be=Number(Oe.dataset.min),je=Number(Oe.dataset.max);return Ge>=Be&&Ge<=je},_checkDMSDegrees:function(Oe,e){if(isNaN(e.value))return!1;var t=parseFloat(e.value);if((t|0)!==t)return!1;var ke=Number(e.dataset.min),Ge=Number(e.dataset.max);if(t<ke||t>Ge)return!1;var Be=document.getElementById(this._addUID("GPmousePosition"+Oe+"Minutes")),je=document.getElementById(this._addUID("GPmousePosition"+Oe+"Seconds"));return t>=Ge?(Be.dataset.max=0,je.dataset.max=0):(Be.dataset.max=59,je.dataset.max=59.9999),!0},GPdisplayCoords:function(Oe){if(Oe){var e=document.getElementById(this._addUID("GPmousePositionLonLabel")),t=document.getElementById(this._addUID("GPmousePositionLatLabel"));if(Oe.x||Oe.y?(t.innerHTML="X : ",e.innerHTML="Y : "):Oe.e||Oe.n?(t.innerHTML="E : ",e.innerHTML="N : "):(t.innerHTML="Latitude : ",e.innerHTML="Longitude : "),typeof Oe.lat=="object"&&typeof Oe.lng=="object"){var ke={lng:"Lon",lat:"Lat"},Ge=["Degrees","Minutes","Seconds"];for(var Be in ke)for(var je=0;je<Ge.length;++je){var Ve="GPmousePosition"+ke[Be]+Ge[je],Ze=document.getElementById(this._addUID(Ve)),Qe=Ge[je].charAt(0).toLowerCase();Ze.value=Oe[Be][Qe]}document.getElementById(this._addUID("GPmousePositionLonDirection")).value=Oe.lng.direction,document.getElementById(this._addUID("GPmousePositionLatDirection")).value=Oe.lat.direction}else{var en=document.getElementById(this._addUID("GPmousePositionLat")),tn=document.getElementById(this._addUID("GPmousePositionLon"));en.value=Oe.x||Oe.lat||Oe.e||"0",tn.value=Oe.y||Oe.lng||Oe.lon||Oe.n||"0",en.title="Latitude",tn.title="Longitude",en.type="text",tn.type="text";for(var an=Oe.unit===void 0?"":Oe.unit,cn=document.getElementsByClassName("GPmousePositionUnits"),un=0;un<cn.length;++un)cn[un].innerHTML=an}}},GPdisplayElevation:function(Oe,e,t,ke){var Ge=this,Be;e||(e=500),clearTimeout(Be),document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="...",t==null&&(t=-99999),ke==null&&(ke=99980);var je=t+ke,Ve=t-ke;Oe&&document.getElementById(this._addUID("GPmousePositionAltitude"))&&(Be=setTimeout(function(){Ge.onRequestAltitude(Oe,function(Ze){Ve<Ze&&Ze<je?Ge.GPresetElevation():document.getElementById(Ge._addUID("GPmousePositionAlt")).innerHTML=Ze})},e))},GPresetElevation:function(){document.getElementById(this._addUID("GPmousePositionAltitude"))&&(document.getElementById(this._addUID("GPmousePositionAlt")).innerHTML="---")}},logger$v=LoggerByDefault.getLogger("GeoportalMousePosition"),MousePosition=class Jf extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Jf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MousePosition",this._initialize(e),this.container=this._initContainer(this.options),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){var t=this;if(e){var ke=this._createMapCenter();if(e.getViewport().appendChild(ke),!this.collapsed&&!this._isDesktop&&(ke.className="GPmapCenterVisible"),this.draggable&&Draggable.dragElement(this._panelMousePositionContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||(this._isDesktop?this.listenerKey=e.on("pointermove",je=>{this.onMouseMove(je)}):this.listenerKey=e.on("moveend",je=>this.onMapMove(je)),this._showMousePositionButton.setAttribute("aria-pressed",!0)),this.options.editCoordinates){var Ge=document.createElement("img");Ge.id=this._addUID("GPmousePositionMarker"),Ge.src=this._markerUrl,Ge.title="Cliquer pour supprimer",Ge.addEventListener("click",function(){t._markerOverlay.setPosition(void 0)}),this._markerOverlay=new Overlay({offset:this._markerOffset,element:Ge,stopEvent:!1}),e.addOverlay(this._markerOverlay)}}else unByKey(this.listenerKey);if(super.setMap(e),e!==null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),!this.collapsed)){var Be=document.getElementById("GPshowMousePosition-"+this._uid);Be.checked="checked",this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}}addSystem(e){if(typeof e!="object"){logger$v.log("[ERROR] MousePosition:addSystem - system parameter should be an object");return}if(!e.crs){logger$v.error("crs not defined !");return}if(e.label||(logger$v.warn("crs label not defined, use crs code by default."),e.label=e.crs),e.type||(logger$v.warn("type srs not defined, use 'Metric' by default."),e.type="Metric"),CRS.loadByName(e.crs),!get$3(e.crs)){logger$v.error("crs '{}' not available into proj4 definitions !",e.crs);return}for(var t=0;t<this._projectionSystems.length;t++){var ke=this._projectionSystems[t];e.crs===ke.crs&&logger$v.info("crs '{}' already configured",ke.crs)}e.code=this._projectionSystems.length,this._projectionSystems.push(e);var Ge=document.getElementById("GPmousePositionProjectionSystem-"+this._uid);if(Ge){var Be=document.createElement("option");Be.value=e.code,Be.text=e.label,Ge.appendChild(Be)}}addSystems(e){if(e){if(!Array.isArray(e)){logger$v.log("[ERROR] MousePosition:addSystems - systems parameter should be an array");return}for(var t=0;t<e.length;t++)this.addSystem(e[t])}}removeSystem(e){if(!e||typeof e!="string"){logger$v.log("[ERROR] MousePosition:removeSystem - systemCode parameter should be a string");return}for(var t=document.getElementById("GPmousePositionProjectionSystem-"+this._uid),ke=null,Ge=0;Ge<this._projectionSystems.length;Ge++){var Be=this._projectionSystems[Ge];if(e===Be.crs){ke=Be.code,this._projectionSystems.splice(Ge,1);break}}if(ke==null){logger$v.log("[WARN] MousePosition:removeSystem - system not found");return}for(var je=[],Ve=0;Ve<this._projectionSystems.length;Ve++)je[Number(this._projectionSystems[Ve].code)]=Ve,this._projectionSystems[Ve].code=Ve;for(var Ze=null,Qe=0;Qe<t.childNodes.length;Qe++){if(ke===t.childNodes[Ve].value){Ze=Qe;continue}t.childNodes[Ve].value=je[Number(t.childNodes[Ve].value)]}Ze!=null&&t.removeChild(t.childNodes[Ze]),this._currentProjectionSystems.code===Number(ke)&&(t.childNodes[0].setAttribute("selected","selected"),this._setCurrentSystem(t.childNodes[0].value))}setUnits(e){!e||!Array.isArray(e)||(this.options.units=e,this._projectionUnits=[],this._initProjectionUnits(),this._currentProjectionType&&this._setTypeUnitsPanel(this._currentProjectionType))}setAltitudeOptions(e){if(!(!e||typeof e!="object")&&(this.options.altitude.triggerDelay=e.triggerDelay,this.options.altitude.responseDelay=e.responseDelay,e.serviceOptions))for(var t in e.serviceOptions)e.serviceOptions.hasOwnProperty(t)&&(this.options.altitude.serviceOptions[t]=e.serviceOptions[t])}displayAltitude(e){e!==void 0&&(this.options.displayAltitude=e,this._setElevationPanel(e))}displayCoordinates(e){e!==void 0&&(this.options.displayCoordinates=e,this._setCoordinatesPanel(e),this._setSettingsPanel(e))}setCollapsed(e){if(e===void 0){logger$v.log("[ERROR] MousePosition:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this._isDesktop||(document.getElementById("GPmapCenter").className=e?"":"GPmapCenterVisible"),this.onShowMousePositionClick(),this._showMousePositionContainer.checked=!e)}getContainer(){return this.container}_initialize(e){if(e=e||{},this.options=e,this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this._markerOverlay=null,this._markerUrl=null,this._markerOffset=[0,0],this._hideMarker=!1,this._initMarker(e.positionMarker),this.options.units=e.units||[],this.options.displayAltitude=e.displayAltitude!==void 0?e.displayAltitude:!0,this.options.displayCoordinates=e.displayCoordinates!==void 0?e.displayCoordinates:!0,this.options.displayCoordinates?this.options.editCoordinates=e.editCoordinates!==void 0?e.editCoordinates:!1:this.options.editCoordinates=!1,this.editing=!1,this.options.systems=e.systems||[],e.altitude){var t=e.altitude;this.options.altitude={triggerDelay:t.triggerDelay!==void 0?t.triggerDelay:200,responseDelay:t.responseDelay!==void 0?t.responseDelay:500,serviceOptions:t.serviceOptions||{},noDataValue:t.noDataValue!==void 0?t.noDataValue:-99999,noDataValueTolerance:t.noDataValueTolerance!==void 0?t.noDataValueTolerance:9e4}}else this.options.altitude={triggerDelay:200,responseDelay:500,serviceOptions:{}};this._uid=this.options.id||SelectorID.generate(),this._projectionSystems=[],this._initProjectionSystems(),this._projectionUnits={},this._initProjectionUnits(),this._isDesktop=Helper.detectSupport(),this.options.altitude.triggerDelay<100&&(this.options.altitude.triggerDelay=100),this._timer=this.options.altitude.triggerDelay,this._currentProjectionSystems=this._projectionSystems[0],this._currentProjectionType=this._projectionSystems[0].type,this._currentProjectionUnits=this._projectionUnits[this._currentProjectionType][0].code,this._projectionUnitsContainer=null,this._showMousePositionContainer=null,this._panelMousePositionContainer=null,this._panelHeaderMousePositionContainer=null,!this.options.displayAltitude&&!this.options.displayCoordinates&&(this.options.displayCoordinates=!0),this.listenerKey=null}_initMarker(e){if(this.options.editCoordinates){if(!e){this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset;return}this._hideMarker=e.hide!==void 0?e.hide:!1,e.offset?Array.isArray(e.offset)&&e.offset.length===2?this._markerOffset=e.offset:(logger$v.log("positionMarker.offset should be an array. e.g. : [0,0]"),this._markerOffset=Marker.defaultOffset):this._markerOffset=Marker.defaultOffset;var t=e.url;t?t.match(/^[a-zA-Z]+$/)?this._markerUrl=Marker[t]!==void 0?Marker[t]:Marker.lightOrange:this._markerUrl=t:this._markerUrl=Marker.lightOrange}}_initProjectionSystems(){for(var e=[{label:"Géographique",crs:get$3("EPSG:4326").getCode(),type:"Geographical"},{label:"Web Mercator",crs:get$3("EPSG:3857").getCode(),type:"Metric"},{label:"Lambert 93",crs:get$3("EPSG:2154").getCode(),type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:get$3("EPSG:27572").getCode(),type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}}],t=this.options.systems,ke=0;ke<t.length;ke++){var Ge=t[ke];this.addSystem(Ge)}if(this._projectionSystems.length===0)for(var Be=0;Be<e.length;Be++)this.addSystem(e[Be])}_initProjectionUnits(){var e={Geographical:[{code:"DEC",label:"Degrés décimaux",format:MathUtils.coordinateToDecimal},{code:"DMS",label:"Degrés sexagésimaux",format:MathUtils.coordinateToDMS},{code:"RAD",label:"Radians",format:MathUtils.coordinateToRad},{code:"GON",label:"Grades",format:MathUtils.coordinateToGon}],Metric:[{code:"M",label:"Mètres",format:MathUtils.coordinateToMeter},{code:"KM",label:"Kilomètres",format:MathUtils.coordinateToKMeter}]},t=this.options.units;for(var ke in e)if(e.hasOwnProperty(ke)){for(var Ge=!1,Be=0;Be<e[ke].length;Be++)for(var je=e[ke][Be],Ve=0;Ve<t.length;Ve++){var Ze=t[Ve];je.code===Ze&&(Ge=!0,this._projectionUnits[ke]||(this._projectionUnits[ke]=[]),this._projectionUnits[ke].push(je))}Ge||(this._projectionUnits[ke]=e[ke])}typeof this._projectionUnits=="object"&&Object.keys(this._projectionUnits).length===0&&(this._projectionUnits=e)}_getCurrentProjectionInformation(){for(var e=[this._currentProjectionSystems.label,"en"],t=this._projectionUnits[this._currentProjectionType],ke=0;ke<t.length;++ke)if(t[ke].code===this._currentProjectionUnits){e.push(t[ke].label);break}return e.join(" ")}_initContainer(){var e=this._createMainContainerElement(),t=this._showMousePositionButton=this._createShowMousePositionPictoElement();e.appendChild(t);var ke=this._panelMousePositionContainer=this._createMousePositionPanelElement(),Ge=this._createMousePositionPanelDivElement();ke.appendChild(Ge);var Be=this._panelHeaderContainer=this._createMousePositionPanelHeaderElement(),je=this._panelTitleContainer=this._createMousePositionPanelTitleElement();Be.appendChild(je);var Ve=this._panelCloseButton=this._createMousePositionPanelCloseElement();Be.appendChild(Ve),Ge.appendChild(Be);var Ze=this._createMousePositionPanelBasicElement(this.options.displayAltitude,this.options.displayCoordinates,this.options.editCoordinates,this._currentProjectionUnits);Ge.appendChild(Ze);var Qe=this._createShowMousePositionSettingsElement(this.options.displayCoordinates);Ge.appendChild(Qe);var en=this._createMousePositionSettingsElement(),tn=this._projectionSystemsContainer=this._createMousePositionSettingsSystemsElement(this._projectionSystems),an=this._projectionUnitsContainer=this._createMousePositionSettingsUnitsElement(this._projectionUnits[this._currentProjectionType]);return en.appendChild(tn),en.appendChild(an),Ge.appendChild(en),e.appendChild(ke),e}_setElevationPanel(e){var t=null;e?(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display=""):(t=document.getElementById("GPmousePositionAltitude-"+this._uid),t.style.display="none")}_setCoordinatesPanel(e){var t=document.getElementById("GPmousePositionCoordinate-"+this._uid);e?t.style.display="":t.style.display="none"}_setSettingsPanel(e){var t=document.getElementById("GPshowMousePositionSettingsPicto-"+this._uid),ke=document.getElementById("GPmousePositionSettings-"+this._uid);e?(t.style.display="",ke.style.display=""):(t.style.display="none",ke.style.display="none")}_setTypeUnitsPanel(e){for(var t=this._projectionUnitsContainer;t.firstChild;)t.removeChild(t.firstChild);for(var ke=this._projectionUnits[e],Ge=0;Ge<ke.length;Ge++){var Be=ke[Ge],je=document.createElement("option");je.value=Be.code?Be.code:Ge,je.text=Be.label||Ge,t.appendChild(je)}var Ve=this._projectionUnits[e][0].code;(this._currentProjectionUnits==="DMS"||Ve==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,e,Ve),this._setEditMode(this.editing)),this._currentProjectionType=e,this._resetLabelElements(e),this._resetUnitElements(Ve),this._currentProjectionUnits=Ve}_setCoordinate(e,t){var ke={},Ge=this._currentProjectionSystems.crs;if(!Ge){logger$v.log("ERROR : system crs not found");return}e=transform$1(e,t,Ge);for(var Be=this._currentProjectionSystems.type,je=null,Ve=this._projectionUnits[Be],Ze=0;Ze<Ve.length;Ze++)if(Ve[Ze].code===this._currentProjectionUnits){je=Ve[Ze].format;break}if(!je||typeof je!="function"){logger$v.log("WARNING : coordinates format function not found");return}else ke=je(e);!ke||Object.keys(ke).length===0||this.GPdisplayCoords(ke)}_setElevation(e){var t=this.options.altitude.responseDelay,ke=this.options.altitude.noDataValue,Ge=this.options.altitude.noDataValueTolerance;this.GPdisplayElevation(e,t,ke,Ge)}onMoveStopped(e,t){var ke=transform$1(e,t,"EPSG:4326");this._setElevation(ke)}onMouseMove(e){var t=this,ke=e.coordinate;if(!(!e.map||!e.map.getView())){var Ge=e.map.getView().getProjection();this._setCoordinate(ke,Ge),clearTimeout(this._timer),this._timer=setTimeout(function(){t.onMoveStopped(ke,Ge)},this.options.altitude.triggerDelay)}}onMapMove(){var e=this,t=this.getMap();if(!(!t||!t.getView())){var ke=t.getView(),Ge=ke.getCenter(),Be=ke.getProjection();this._setCoordinate(Ge,Be),clearTimeout(this._timer),this._timer=setTimeout(function(){e.onMoveStopped(Ge,Be)},this.options.altitude.triggerDelay)}}onRequestAltitude(e,t){if(!(!e||Object.keys(e).length===0)&&this.options.displayAltitude){var ke=this.options.altitude.serviceOptions||{},Ge=ke.protocol||"XHR",Be=ke.timeOut||0;Ge==="JSONP"&&Be===0&&(Be=15e3);var je=ke.outputFormat||"json",Ve=!0,Ve;ke.zonly===!1?Ve=ke.zonly:Ve=!0;var Ze=ke.measures||!1,Qe=[{lon:e[0],lat:e[1]}],en=ke.resource,tn=this,an=ke.rawResponse||!1,cn=ke.onSuccess||null,un=null,dn=null;an?un=function(gn){cn&&cn.call(this,gn),logger$v.log("alti service raw response : ",gn)}:un=function(gn){gn&&Object.keys(gn).length&&(cn&&cn.call(this,gn),t.call(this,gn.elevations[0].z))},dn=function(gn){logger$v.log("[getAltitude] ERROR : "+gn.message)};var fn=ke.apiKey||this.options.apiKey;typeof ke.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?ke.ssl=this.options.ssl:ke.ssl=!0);var pn=ke.ssl;Gp.Services.getAltitude({apiKey:fn,protocol:Ge,ssl:pn,timeOut:Be,scope:tn,outputFormat:je,rawResponse:an,onSuccess:un,onFailure:dn,zonly:Ve,measures:Ze,resource:en,positions:Qe})}}onShowMousePositionClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._showMousePositionButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),ke==="false"?unByKey(this.listenerKey):this.editing||(this._isDesktop?this.listenerKey=t.on("pointermove",Ge=>{this.onMouseMove(Ge)}):(this.listenerKey=t.on("moveend",Ge=>this.onMapMove(Ge)),this.onMapMove())),this._setElevationPanel(this.options.displayAltitude),this._setCoordinatesPanel(this.options.displayCoordinates),this.options.displayCoordinates||this._setSettingsPanel(!1)}onShowMousePositionSettingsClick(e){this.draggable||e.target.ariaPressed}onMousePositionEditModeClick(e){if(this.options.editCoordinates&&this.editing!==e){this.editing=e,this._setEditMode(this.editing);var t=this.getMap();this._isDesktop?this.editing?unByKey(this.listenerKey):(this.listenerKey=t.on("pointermove",ke=>{this.onMouseMove(ke)}),this.onMapMove()):this.editing?unByKey(this.listenerKey):(this.listenerKey=t.on("moveend",ke=>this.onMapMove(ke)),this.onMapMove()),!this.editing&&this._markerOverlay&&this._markerOverlay.setPosition(void 0)}}getCoordinate(e){var t=document.getElementById(this._addUID("GPmousePosition"+e+"Degrees")),ke=t.value;if(!ke||(ke=ke.replace(",","."),!MathUtils.isInteger(ke)))return null;var Ge=MathUtils.toInteger(ke);if(Ge<Number(t.dataset.min)||Ge>Number(t.dataset.max))return null;var Be=document.getElementById(this._addUID("GPmousePosition"+e+"Direction")).value,je=document.getElementById(this._addUID("GPmousePosition"+e+"Minutes")),Ve=je.value;if(Ve&&(Ve=Ve.replace(",","."),MathUtils.isInteger(Ve))){var Ze=MathUtils.toInteger(Ve);Ze>=Number(je.dataset.min)&&Ze<=Number(je.dataset.max)&&(Ge+=Ze/60)}var Qe=document.getElementById(this._addUID("GPmousePosition"+e+"Seconds")),en=Qe.value;if(en){en=en.replace(",",".");var tn=MathUtils.toFloat(en);tn&&tn>=Number(Qe.dataset.min)&&tn<=Number(Qe.dataset.max)&&(Ge+=tn/3600)}return(Be==="O"||Be==="S")&&(Ge=-Ge),Ge}locateDMSCoordinates(){var e=[this.getCoordinate("Lon"),this.getCoordinate("Lat")];if(!(e[0]===null||e[1]===null)){var t=this._currentProjectionSystems.crs;if(!t){logger$v.log("ERROR : system crs not found");return}var ke=this.getMap().getView(),Ge=transform$1(e,t,ke.getProjection());ke.setCenter(Ge),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(Ge)}}locateCoordinates(){var e=document.getElementById(this._addUID("GPmousePositionLon")).value;if(e=e.replace(",","."),e=MathUtils.toFloat(e),e!==null){var t=document.getElementById(this._addUID("GPmousePositionLat")).value;if(t=t.replace(",","."),t=MathUtils.toFloat(t),t!==null){var ke=this._currentProjectionSystems.crs;if(!ke){logger$v.log("ERROR : system crs not found");return}var Ge;this._currentProjectionSystems.type==="Geographical"?Ge=[this.convert(e),this.convert(t)]:Ge=[this.convert(t),this.convert(e)];var Be=transform$1(Ge,this._currentProjectionSystems.crs,"EPSG:4326"),je=this._currentProjectionSystems.geoBBox;if(je){var Ve=[je.left,je.bottom,je.right,je.top];if(Be[0]<Ve[0]||Be[0]>Ve[2]||Be[1]<Ve[1]||Be[1]>Ve[3])return}var Ze=this.getMap().getView(),Qe=transform$1(Ge,ke,Ze.getProjection());Ze.setCenter(Qe),this._markerOverlay&&!this._hideMarker&&this._markerOverlay.setPosition(Qe)}}}onMousePositionEditModeLocateClick(){if(this.options.editCoordinates){if(!this.editing){this.onMousePositionEditModeClick(!0);return}this._currentProjectionUnits==="DMS"?this.locateDMSCoordinates():this.locateCoordinates();var e=this.options.mapCenterCallback;if(typeof e=="function"){var t=this.getMap().getView(),ke=t.getCenter();e.call(this,ke)}}}onMousePositionProjectionSystemChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value;this._setCurrentSystem(ke)}_setCurrentSystem(e){for(var t=null,ke=0;ke<this._projectionSystems.length;++ke)if(this._projectionSystems[ke].code===Number(e)){t=this._projectionSystems[ke].type;break}if(!t){logger$v.log("system not found in projection systems container");return}this._currentProjectionSystems=this._projectionSystems[Number(e)],t!==this._currentProjectionType&&this._setTypeUnitsPanel(t),this._isDesktop||this.onMapMove()}onMousePositionProjectionSystemMouseOver(e){logger$v.trace(e);var t=this.getMap();if(!(!t||!t.getView())){var ke=t.getView(),Ge=ke.getProjection(),Be=ke.calculateExtent(t.getSize());Be=transformExtent(Be,Ge,"EPSG:4326");var je=document.getElementById(this._addUID("GPmousePositionProjectionSystem"));je.innerHTML="";for(var Ve=0;Ve<this._projectionSystems.length;Ve++){var Ze=this._projectionSystems[Ve],Qe=null;if(Ze.geoBBox&&(Be[0]>Ze.geoBBox.right||Be[1]>Ze.geoBBox.top||Be[2]<Ze.geoBBox.left||Be[3]<Ze.geoBBox.bottom)){Ze===this._currentProjectionSystems&&(Qe=document.createElement("option"),Qe.value=Ze.code,Qe.text=Ze.label||Ve,Qe.setAttribute("selected","selected"),Qe.setAttribute("disabled","disabled"),je.appendChild(Qe));continue}var en=document.createElement("option");en.value=Ze.code,en.text=Ze.label||Ve,Ze===this._currentProjectionSystems&&en.setAttribute("selected","selected"),je.appendChild(en)}}}onMousePositionProjectionUnitsChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value,Ge=this._currentProjectionUnits;this._currentProjectionUnits=ke,this._resetLabelElements(this._currentProjectionType),this._resetUnitElements(this._currentProjectionUnits),(Ge==="DMS"||this._currentProjectionUnits==="DMS")&&(this._resetCoordinateElements(this.options.editCoordinates,this._currentProjectionType,this._currentProjectionUnits),this._setEditMode(this.editing)),this._isDesktop||this.onMapMove()}convert(e){var t;if(this._currentProjectionUnits==="M"||this._currentProjectionUnits==="DEC")t=e;else if(this._currentProjectionUnits==="KM")t=e*1e3;else if(this._currentProjectionUnits==="RAD"){var ke=(180/Math.PI).toFixed(20);t=(e*ke).toFixed(20)}else if(this._currentProjectionUnits==="GON"){var Ge=.9.toFixed(20);t=(e*Ge).toFixed(20)}return t}validateExtentCoordinate(e,t){if(["Lon","Lat"].indexOf(e)===-1)return!1;var ke=t.replace(",",".");if(ke=MathUtils.toFloat(ke),ke===null)return!1;ke=this.convert(ke);var Ge=this._currentProjectionSystems.geoBBox;if(Ge===void 0)return!0;var Be=[Ge.left,Ge.bottom,Ge.right,Ge.top];return Be=transformExtent(Be,"EPSG:4326",this._currentProjectionSystems.crs),!(e==="Lat"&&(ke<Be[0]||ke>Be[2])||e==="Lon"&&(ke<Be[1]||ke>Be[3]))}};Object.assign(MousePosition.prototype,MousePositionDOM);Object.assign(MousePosition.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.GeoportalMousePosition=MousePosition);var MarkersOther={drawing_api:[{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mGtsFFUUgL9zZ6bdbaEP2kpRCYj4wlciRMHEHxo0MdHEqDFG/aExvmJiYmJ8G2P0B8YYYozC+oivCAl/VMRqIkTBUIygCAiNlr6oQAttd9vS7bQ7c48/pq0QdtvZFU9yM5nZOfd895xz7zmzQomibwFlgACVCCPUI1QDCcAFAsBHydBDP2ejOEAlyN2l2XRLhaUcyCDUsoQsK4DrgCuBRmAWcALoAfbQyDaUn1nGAZrRUk1KSV59DwhpRLgLuAe4JsZMPwPrsGzA0CuP/M+wugYwCMJFKM+g3IVQEU8ZgCywAeF1LH/ioPJwfPvFpUGA4LEYeBW4DSlCP3JLBXAfSgXCC7i0TS0jhpjYXk0BHjXAE8BtaMn57gK3IzxBjhpdE18xNiyKg3ADcD/glpbtExJF5AGUGwDnjMJqChBqgccRZhVYTDTCk8bks/zvzwIeBWr1vXiwcUNpgCuAqwuCgtKwtIcFtzqU19Ywls5waGPI8d8aUeS0SET3KxAuB34kRu7Gh1VuRCjPDyqWhbcMsGI1VJ1fCRPH/wX3DrHjyX46N9XlBY5O65XAT0RFZEaPxYMVlpAvvxSoXjTIsteGqTp/LvAvbNXiuSx7dZiqRZkCfnOAy9B4HHFhhagy5d9WsxcmmXN5XZ75DHOunEPVecmC8ypz0XjbtZjjJ5H3qQLGcxHJb1CkHPGcghkpFFrIaRL/6ILBAsbA7zvBWLov7+/+QB/+8ZFpfJc5s7CKRWlFCfPCDhxI0JKyaDh8ql44TMtaJd2SLAAbAn8BNg5GvDRQLEIzUdNy6iYTIMgm+H3VXMYz3Vz8UAavqoHc0HEOpMZpSc0nyJYVgM0RNTixYGMltq5BEM4DvkdYlGcxkRg3xKsAcR1sEBJkwQbONFbaEVYCnfLwzOds3JxV4CiwLq8XZGLYwGFsyMEfgPEhZwZQC3xO1PPGamZiV3hNAcqFCJ8Ay+PqTSM7EO6/86PGv347Uo6xEFqD41isiepHhe9zXU8Pk71Ocf1sCg+4HVgNzCuVUpWjA1nz3B3vn7PxSNZ4AbjGYkJrjOPY0BqxAuNJ389eMjjk7204i3meLRoWop70ZeBJwIuvHLnGKnZ7R2LbU183fHVs2PFdo65G6SiR71QRUcCiBChpA/vFaGvRjd4E8EKUtcBNeSv+NLxtfV778011m3YeSmSciYyWU94QUJ24CIAVGLXo98UUBQAmvp26UFYDHcXoDo6azPrds5t3dSfSjkElArFMDYmuIhbEiqgVQRStQLWmaNgJYCXNZuAdou+qGSUXEvzQmty1fvfsDiMgseIhgqqoyBE1prUkWACOESJ8DHzJdEePRlHd31Pe8vb2mt3jgdgYoAIYBR/YY6DJJBKHS//f4BIA0sAbqlwMXJUXQuDYsNOb2lHd3JX2sqe/ogKCTjbwgkU1CxxE5E+gO51MnqjO5YpqZE5leGTSb+zNhawOleGpJydd/RxjX+yb1bzlYLJXmAp/FF7FqAqoBsAI0KmwxXHdzxS+u7mzswU4MT+Tof3gwf/02RcxpaCzz6ltqLKvJD19zAju5KYOlfCntsTOF7+t33pkyPUdE9U6VUVExoERVdKCdomY1hCOqxCM9veHlbW14Di0tbdP2So9DU7y8M7nTAbHfFBfGSyt8PRaI5FjuwbcQx/+Uv3r34Ou7xp1VMkBaRE5BhwVkW7Xcw+j5KwNkFyouA71Cxbwx759+TLqzEjHKo8yx97RUBm+7TnMG/Rl+N3tNU1rm6v3ey5pgaOo/q3QU5FI9I6OjfkiguN5nLt8OZs//XRmx5wpWIDvnp6duLR+9KXaZPjgjs7k1mebGtals6bDiPY7IpnusrKReb5PeVkZB1pbi57/P6fByVKXDPzOtPtmwtX1f/Qm0u3pRL/b0+VXL2xEVbm+r49v+vtLnv8f2Pk64kl5WH4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjAyOjM4KzAwOjAwnw8TLgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr+195mLx3bshNghKWkNpCglPEBpUYSAKg88gGigUftARSJzkbiIB54QalQkKvGISkGQSkTQplJBKQgQbbmUW6CkTZuGVq0pjV3n4jSOnUzG47HHM545++fhjNs6npDjISzpaDQ6s9f69tr/XnvtMTo0fbYfAhACbN5knJ1ch9QHlseIgAZSHbMyhRsvUj0qvIPeHPbd6Y5iRp3CIkGjy8jUtnJ28mbgg8B7gEGgB5gDpoCXmD92GOxZ3pt/haN1dRrSOuLcvQYitwHpNsTtwE0gj5kAXeLfkGLgKGaPgPslIZ62A7P/X9hk6YMRuB5nX8PYBeoBiy+BbBfHA3OIXyDdh7NRXFP24/nU8VcnA3OG6R047QXtTACsmWaeQBNUAO7E6Ea6B984cYVJLjOXOqvD/aC4D/gSxk7MPFhY1WSx0Bq3E/gizVyf9vSmHp0aloBH3ALcCeZIakEnFkgk8RmCfQTkryqshvshoh/4AtBNu6WTjBAbzUWjUYfmYvJdWrkvDLX8fB58n/b0p4JNp1lhBG0D3k+yWZbDJkCBd95c5H0fz1LoX0u1VOKfv11k/Ln1SNaqFMuR4SaMbYgnSaHddLAmD+wAsm0zigI33lrh09/OMzDUD3QBxvY7Zvjp3lmO/aYX4ZYBmwHkEDswPQVccaOm1KwcaCuJ1i55FWDDlgq79i4yMLSJZHkd0M3A0CZ23bXIhi0V1FbiHtNWTKk4UsKagQ22/X0IMDhU4JobBlhZt41r3j3A4FCB0BbWgW1YSvOVLK1mAfKAtTbHm18Kn4kwy11mnll8RpeRpLX8prK0pUvALO0imjMqF+aols+3HTk/c4HZC3NJtVvhVUhlpFQHQ1rNCvQqEK/04GFiJMuhB+uEUFn2LoQKhx6sc2Yki2tbTptgY8hSwaY9bgNwBNMdYMujmkG9muPR7/RTnZ3glt095HsHWKic59CBOf68fwP1agbXLi9qAs9i6Q6YVMLWcK8hfx3oVxhvZ6UcDAl8pkmuYPjIEzdj6lURN6LW/mlXZ09g9knUPG0PzF0xu+k1GzSFeAQRt5mkMCBuRFTLnkpRVMv+v4KKGHEQaRrSySB1i6jdfeDYAuzD2E47/aY3j/Q0xpd3He0de74S4QLEweF9IDjDgEKtxofPnWNfa1DqFtEeKqPhNSeR7UNch/FWVtHMSK3EGIY0WWy4n9z2zJriVMMGWxyu9cQtv4uC6vmuQu1dA4NszIRVNt/DfRAoYHwd01fBMlz2TBfSG8VeyCRzTaF/lKKnvvHv7sfPL7paZIqUQFqr7VDrWA6IJqLkYMScRld9rdGePjBdC9wLfHTlVeYNyCC5gHmBCZmBjc378W8e7/79c+Wo7F2SLHvTWLCkUtpSf0QwWAjoifT97JIcDpTBwgTSD4Fxlu5ZCEkWZC4WviGyTcgE4aQkc6WGK/1sMvfMsdloxhuyBCTw+mPJp1kAC2YKZphQAal/1bAA9sCcmF74K/AjpPmlbAaZb4pMLKKAnLBkp5hoBGv8pZh5/ueTuVOOtN2AGZLJ7KycG+0IFoCLzZhgD4M9KpliETUhkuRkMsPUWlAk00jFH7//dP6FxWAhBagBTlADXnDwuMvnX+v8f4MtfVDIzlCvf09ia4x9QBKtZC5p2Awxtein9p/JH5lY8AsrOWVLZwqtNh+pCoxh9gowUerqmutrNFZxB7t06g+Xod4QxCO12H4Qi7IlZUnQSimiHlvt11PZI4eKmWnj9eVPlle4pHdXE5gHTgr+5KPoIcHvPnby5MvA3OaZGcbHxjr7k2NZXoZ7GatE/etzujvn9RVnconMZEEW/n4xc/Rbo4UnJ+uu7pcULGFmi8C8RMnQKTM3GsN5Gc2FYjHuXrsWvOfV8fFl2vif7fAn1tr6vG1bn42/3+X5kFlyLTgx70/eM1b4w+FSphglV6MGUDKzaWDSzCZ8FL2GaITQJG7EUuQp9PTw0osvrlzNqwELcPz2deRd+NS6rO7NODaXG1a6/1T+if1nci9nnJUMJpHOCM4V8vmphXq9Zmb4TIa3bd/OHw8cuGKMqwYL8NitA7kb8s27+jL63NOl6G93j/UcnGnYCYeK3mxmIpud31irkctm+dfo6Kr9d14N2thbolA/VbP7rnc6ODIXzZyqZy76M6cX1ly7EUnsuHCBx4rFjv3/B5an/+2QIsMIAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMjo1MCswMDowMGqPVM4AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABPdJREFUWMO9mNtrXFUUh7+1z5nMmdhkkjZpE1RsWi1FqQWL0gp98EUQ7JP+AYJPPigIlvqgiIr4IFqxSFtQ1AqW4oMXUAreK7Zia0vv2Exz6SVNc5u0SZpJZ875+XBOa0oz6UwydcFimNln//a3195nrb3HmKPpxq8GtABZIAB8oAQUgFFgeHoXm+OY/lxhp417P7AOWA+sBtqABcA40A8cBvYAfwInbp7nbTbF3iZ4QfCnQBX4PsHzgiX/C20CaYKVgk8EExWCXvOJpN/KROe2wprgPsGXgmKVoNe8KNgluFdz374VRbVZsGUeoNOBP0j0bgusJ3hKMDZP0Gs+luh5tyOqLYKfawR6zX9IdCuySlOXAx4EHpl1TmvW9LNhg0dzcxP5/Cjffhty8GAb5ffmOmAV8Cu1SmkCX/B22b1qFmrDhkHlcn2SxiWVJI2rs7NPTz45KIhm2btvaf75/gbYOsE3ZQddvnxEhw93SQp1o4U6dKhLy5aNlIGNEt26Spe3EjPiyjTzci5dmmHVqkUz6DlWr15IR0dmFt0lVJjCqgl/ULYllfIxm3lAszSp1GxvfIYKrdLIAlwq2zI0NE4+PzRj28jIEIODE7PojtYaNgI6gXDG1hMnArZvjwjDsRt+D8Mxtm0TJ0+Wi14InEr0a2NJQXhWMFk2Z2azU9q0Kadc7owGBiaVy53Rxo05NTZOzZJnJxPd2hWG5EywTHB61iTv+yU1Npa0cKHU2FiS75duURROCzpqekZIKlhG8KYgrFH1CgVvJLoVWcUzSgRXAJ8Ba2sQg33AM0+3tZ06mE7jIggjh+dFRM4woL5QYH1/P1uTDhWnLouBu4H3gc1A+zxW6sKIc9ufuvPOwT7nFiccLvGQ+IW7KrgymKkvrGhdTHsqqm6vJNGtB14DXgRS1YJGEP0RBHteam39ZsDzCr7kK4a0JCTCTECEKCHyDo6bU2dVNTmJ7hVgK/F963Gq3EpdqVTPlqamIwOe1+yByWyagGI5xa+cYv52QUcofqimKFwHBnqJt0J3NX0vOTe6s6Fh74EgyHsgg8jiJU/c4k+zCCwyU2SGCdUjNVUNmwAL+BH4kDjSt7QilH7JZA7sbGjodhUvhxmSyaxPznXOCTaxEPgU+JpbnEUFHE+nT25pajp01SyqANQAp/h/h8MOvndBcH6+58g88I5gJfBQOYgBz7u4PZvd25tKXbn5GRkYUjIvI0K6AuQw+wc4m89kxrPFYlUHmZumngTtSBE2hzA203MFmPpqwYK9P2UyF+2/fvHyCicZSCVgAugR/OT5/ueC3U/09JwExu8eHaUrl5t/mRPQ43nNrVH0ekZ6zk3L3SGEvwfB/ldaWn7r8/2CF7OaJMzsKjAhkTfUa+Y6QxiUUZocHg7vaG4Gz+N0V9f1seZ9nTBgv3OjOPdRS6m0pl561CWT6PX9Mx9ns3+f8/2CL3mCIpA3swHggpmd9VP+eUQxikpYMRS+R8s993Ds6NGbxqrJ3efhYlHdqdSRy869lw7DDgftl83GdjU0/LUnk7mYigEvIJ0T9GfS6YuTU1OFeLbGXevW8uOOHRUFpma2u6EheGBy8tXmMHx2X5D57eXFrV/knet20rBnNnq2rm6ivVAgXVfHic7OqvVrd6sEFpVKhR7ffzeItPNYOsh3BcGw39tbyLa1IYnHhob4bnh4zvr/AlFvZYTScGjCAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowMzowMSswMDowMGvaOiAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABfxJREFUWMO1mF1sXEcVx39n5u5613btOIlrp0lEhBr6RSmKLUiQIkQFSH0rLSoI8VCE1DSqVKkIAeVDCPECQhChClKXB0qBRKpoQbQNRbSUNIoTKW1NmsZW6vgjNbHXjje79q7Xd33vncPDjYuc7qZ3t+ZIq5V27sz5zZn/mXPuCk2a7vwlZNNgBK5vE/JLm0E6UTIIHhCi+KBFSrk8nTcokYVqGzL85aZ8es3C0tkCI0Xhpq5byVf2AHuBO4BeoB0oAzngNNf1vorTk8z1D9MzqM26lKaiuusJMFEvTu4DvgJ88t2l6q2onAQOoe5pxMzKG/v+v7DafxAiI4jchOi3Qe8DaU04G5QK8DTITxF3DmdVhh5I7L8xGdhQcKkbgR8Dd6PiJd+ugNAKfBXVVlS+h3pj8S6SmUke1QEIUxsQHgbuBm0A9KoACfeAPIwEG7TvYOKJiWFRtSB3AvfH2d4caWziAV9D9E7Arius9g2AkS7gIZD2OpsBpxBEsBLF307j32vyajvwII4u7X8iEWwyzSoGx8eAT9QFBeW27hx7P2TpaNnAYrXIq+9EjFzqRVWQq09CQNiDyO3Av0ig3WSwggH9HEhLHVDHp3dc5ht7YFtHG/HRtnHXzkV+cSLP0clNUAuYFuCzKMeA8P0wkmrWgNxKLX05hW2dC+zvL7Gtowf4H+z2jh7295fY3lHE1QycBT4KmogjGawiKL3UyioFtl6X5caNm2qsZ9i5cSNbO7J1DllAe0ATZWtSGQBkam9EwTMeIrUdirRgxdZNNCSbiCFxZGNbqAMDBb/MYnW+5viiP0/RX0LqBq+4zrDqQEdBo/cMWYGxyxmeHXE4La0Zc1rimRFlrJDF1oBVIpS3UVwSioTlVh3IIHHTsjbJRMAPMzz57x5KK1N84eYibaluloJLPDu8wjMj2/HDNKYGrBAAJ2E9YQVHxCsYpoEPv2fcAKVqmj+c3sGfhsGKJXI34IcQOlsTNLZpVP6JTQabVLOKZQY4VDsKEkc4dJZy1bLgQ3nFEjp7Da06lD8COTRZM5O4wGv/AET6EUR+h7A76bxr2AlU7v/iwm/ffiOcxjiInMFahzOCAK2+z95cjtVWp7F+tm8gBdwDHAC2NEup6MxlV3n03uJv/jrtKqkQPOMwkTPGWhc5I05gJev7lVsWFv03u69nS8o1/FoTAM8Bu4BHgFQjiCA4VXc8mDj3zfJzXXOu/CUP4xkwGMSauMcw8cPOb8mEQ92ZgoGzM5GMNtznad8AwA5UH0f4PNcQZS3csWh+/LvlI8+fCt4pWonvM1nzhMSFRkDjwuYElh36j0aKAgDy+j6AC4geACYambvglouH/aHB14KpgsWoxCCOdz8Sf4s4ECeiTgRRtBXVDQ3DXgFWsoWXgF8BlSRzAo3CV4LR1w77QxMGqVudr/IkqIqKTKsxo03BAtA+F6HyJMpfrn31KKrK2Sg38ljl+NCKhi4BqABGwQdOGzhiMpmLzf9vcOkWWKFAmp8pejPKrtoQwpwrzQ5UTgxeiAqVGm2bgKz2OYrgUK0A5xE5B0wVstlyZxA01MisRXh9H6RQhDcDogMRq33BlSBf8e67oPrn6pnBl4PzswKrxx8fr2JUBVRDYAmYVHjZet7vFV68a3JyBChvLxYZP3/+A731xUx9A0xG813dpuNHWVL7jYi3mtWRanQsGDv1/fLfjk67Rd+KEUBUFRFZAZZUKQh6QcSMRnBJhXA5n4/aurrAWsbGx9do4wPbqTselc3Seftm03awldSnjAgKTIT5iR8u/f3IsWB83sNY4nu6ICJzwIyITFnPu4gSOBcSBZGqZ2ltb+etM2dqCGqdbOLjPyEt9t5uaXssJXbLgvNLv14+fuTx5cGzKfEKAjOo/kch15rJzC5Xq76IYFMptu3ezUtPPfW+PtYNFuDFXd/K3Kabf9Al2a+fCC4c/c7SC4cKrjJhkLwVKU6l00tbfJ+WdJrh0dGG12/+NqhhmzTrT0aFn2esd/itaLYwTiHvXcz5nVt3oKp8Zn6eF/L5ptf/L2sInRchOhqOAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNjo0OCswMDowMJwhuk0AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmRJREFUWMO1mF2MlFcZx3//887Ozs5O96OwZekupiq0ptJigFhaJaZNa9MbbTVBY5pYY0MlxiZ640XjhfHGxtheGFNFL7AIGmIbEy2Cix8sCSWxSCiyKyy7QGGXhd1hZnc+dnbfec/jxSwI7ADvjvhPJm/yvufj93ycc54zokHt+tYqMnMtOHN0lu7RdGt2KdBuWApTQqIKVgHy3d2F7PhYu7koork0y6d3DTQ0Z6JR2Ltn23m/Y1Crcw88OJ3OPgpsBNYA3UAGKALjwNHx8bv6kT+06r1LA/9+bJk1Oqca6fTnF9fiAtftzW8CvgI8IsAAzQ9p1yDNvzkE7DRnu5zXxSd/8c//L+y+l9bjfSRMDyB9V2ITRjrOKDV2Kwt2yXjVnE74yNvTvzwSe/5FpYESgRT6lQY/AJ4FS6B49tY8rzTG8yZLm9krvmrDV+2IIRe3Yd/m9VhY7QC9jHhWIrHYLJpPlYShL2C87JrUsfeldbH7x4Y1LDDjCeAFoYYX5nwgEoKvSXrCILijsHs3ryMw1wl8k9pKX2iMGeY9vhriwzl8NcS8x2xhlAWYlAG+EeA7+15cHws2pofMefzDwCdvBiqwtg9/fHzpwxuDRLqto1qezk8c7Y8KZwe7zUy6IbcFYHoU00PA34mRu7FgHXKIp4DmeqCAX7rmM5fv3/Qd0l29rdRC29r9yDPTJ3e9lp04un+JGQuAgWaDJ4UdAKq354gh1do9SL38Mk/6nt6plZ/fUkh39S4DrsKmu1Ys++jnthTSXSvymK83dCBYjeJxxGpkmMC6qbP8zYyWJT0trT0rl9QZz2V6V93dsrSnpV7uIoRYdvUkuY1i5qwAUvUtMRQkEvViDCCpWUEQYDdNyZZ4DHE9a2DGVH07xFwxVwzL05P1Poel6cm5Yr50i8Mjf0dhJbzEEBAt+OYCSmPDqdH+t715X7jOSO8L5/vfstLocItcve3UIjM7aVY/oW9UvDQQHuMgtaLlulklEc1VUmf2bFsWlgvnejc+lw9SrV1RpTRxvv/tufMH3loRhZWktNAvZgqBQ8CdgzXkRfQ3cGPARxZ63hGWC8kP+n593+j+30EQBETRvdFcBR9Vg3qg8xrD7K9GEAs27tZlEFww2HkzL0jCR9UgnCkGYXGKcKYY1EDr56oZHmyHwTi3WH03cMRT3+b1eKL7hX4ltCFuv1voXcle+OG7UyeHp6o4D5F3BIHHu9pelq5U2Dg+zhvzHWIXEdsPj/HVtT3TkqaATwF3NUppxoVC6F99pT9/ZLIctXlol9Fupg7nLGNSRtCcqFZJRz6q3tuj1UvbFlk9iRD4A7AW49smmuKGpnaLAG/mB7PhiW3Hip3Ts/5LgUg4cDgUOAMwV2vuK82p6pGuVM7B8QuRhhZ9renbvA7gPsN+BvqsFlnUjhejke0DxT8OXQ7zgZOuGHGdSWbzDwF4wYzH+mLXs1f01NbDeDiL9DpwOn6dD6U5n99/vnLwVC7MOdW8p9qCnf+p9pQ8yEvmJWRYGrOORcMCPL31sCU6W/YJfgqU4/SJvFWPTYbvHThXOS1qu8ftJWEmk8bMuaGGYAHC7kwkbBuy399q6zFqxc7ZQjT4znD5SNWbjwEqwBlUgKMOdrtUarTh60lyYAKfnMvZXPJHGB8zbG09CAH5WX9x70j54KVyVF7YwgS6Yq7VTksrA6eQTgDnci0txfYwjH8Hu1GPbz2MhU0m0/tV43UPBfivj6+UhGHkZw+NzR48NhFevCb8tfAazkxgVgVKwBmDvwSJxHaDPc+cOTMIFFfk84ycOtXYnxzXat/mdVyaiTrbku77TY4tTkqY1S6GZhYdnwz/sWOguP9yxVdcjVRWuzbMASUzcsLOSm4oggkT1ZlsNmrt7IQgYHhk5Loo/c/6+ZfXKJPQQ21J90ZzwGNX0mG8VD3928HS7uOT4WQgAiAEcpIuARcknQsSiVGM0PsqURiZJQLSmQz/OnasbkrdEe14/hM0SV+8q1k/STgtL4e+8KeRmd17Ts8cD5xygguYnTcYT6dSF2dmZyuSCJqa6N2wgX1vvnnbOe4YLMBrz61NLc/Y9zJN+vqJy+H+7cdLOwuhP+0gG0j5c8lkaXmlQnMyycDQ0KLHb3g3qKdMk1UuzUQ/TrrEbz4o+NzFClmNjlZaP9SDmfH45CTvZLMNj/8ffOgG6JpOcn4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjAwKzAwOjAwxEaR7gAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABZ5JREFUWMO1mF1oXFUQx39z7r3Z3aQx2TYxCVo1aaviJyhqK/TBUgVBRVT6oD4oIiqFgiAoqIjogyIaoYgGFGrFVuuDWloRrWgrxmKrYmtbbZovY76z2e0m2W6ye8/4cLe1obvN3bUOHO7DOTPzP/+ZM2fOFSoUHQaygAVyCB4NKHUIUcAF8ihZIMUUCepQCGbkosp8upWCJQM0IoxxBS6rgNXAtUAzsAiYBkaA36hlD5a9xDlMsgC6ApGKWO0GhGaUdcD9wE3ogtb2AluAbSijsvx/Bqs9gEUQLgOeBtahVJdhJYOyDXgV5U9AZUV4/+WlgUFQlgMvodwNuGXGphp4sPB9ljzdED4tTFms+tQDG1DuRsoGGojgAvcgbMCjXrvL4Sq8EwdYAzxUcFi5BPoPI6wBnHMKtsBqHFhPcNKLLCoxSgNehPI4lnhYdsMyZBCuQbmxaOiDSqBErh8hdqeDE6/HJlPMbPeZ/aUZkBIpswrhapTvCJG74cAqBrgVIVIUKGKpuWOSxe3gLashCG0Nix5Ik3gywcyOJWgRwIG9tcD3QH5hxsKCVa6gVH55bcepf3kKb1kT8C9Yb3kT8Zem8NpSJSw7KFcVyFhQwh4wIbiZigfTuyRG1dVLitgzVF27GLc1VoIEAZoIWe/DpUFgKlp6geciUtyhSATxikdEACVGSAlfuuB4yRl/Yho/OVF8bnICOz5zFiJSYet12Jy1KF0oftH53OEo6Q6L+lPz9fwp0u8oc0dKsecDRwl6twUlbOmyQCdB0zI/pALYTJTUK03Y1ADnPZrCnNeITY+T7pgj3bEUm6kqwV6OoMEJBTZUALQLAVoRvkZoK8E+iOsj1SCug+Z9NAOad87ipQfDWpQ+aVu4zobNWUUYRthSkgUhAGbTDv4k2LSzAFALfIhlhJDNTOhWpHAlXgq8D6wMq3cW+RGHh+57rPnoL39EMBZ8a3AcizXB/VGdzbJ6ZIS3CwqhGxJZBnqMXoQ3gXagpVKUqgxPpkzHvesvGB8aMecXcJjC8AuszylkxmPV2Usbz6fFs2U23wG71cALwJOAF14ZELAW+8PP0T1PvdL4+VjCybpGXQ1ASiGXFBEFLEoeJWngkBjtKqvVk2Wg3WSAtwneW7cRNpUkwNsz4PVt3Fx/YGzCiTsOonJ6y1DYkWphvYDQotDqK1+XcymcAgz0o7Sj9JajezxtUlu313buPxhNOg4qgpUg5IUhwVfEglgRtSKIotWo1pcNtgBYGWMX8BbBO3dByeXJf7s3tn/rjtpeY0BCxUMEVVGRITWmqyKwAEzio2xC+Qw9S+nRIKqHjkaObNxc/+tcTmwIoAIYDf5M/GbgCxONDlb+PFkOKEmE1xQuR7muKAiBsQlntOOjus7+QS9z5hoVEFQLWxMsqhngGCJ/AgPJWGy6Lpcrq5GZj+FygteBcCCXo933mTrJ5Onf7Cyzn361qPObztioyKnwB+FVjKqAah6YAfoUvnFc9wOFL2/v6zsCTC9Npeg5dqyynxzzeOmGvkEn3rjYvhiL6BPG4J481L7F/35fdN9zrzfsHhpzs05wn4mqIiJzwIwqSUH7RUyXD+Mq5E8kEn5NPA6OQ3dPzylf/+2VSlAd9m03KdS827A4f311VG82JiC2f9D9671P6n7+e8TNuq46quSApIiMAcMiMuB67iBKzto8kvMV16Hh4ov5/eDBM3z9Z7AAN9yV097d3oH0lHkj4vmtxtCSnpapj3fW/rTnp9io55EUZBjVvxVGYpHI6InZ2WywW+HCVSvZtXnzwsScC7An5ctNtdErV5x4Pl7nP/Ljr7Hdz7zWuCV53PQa0YQjkhqoqpppyWaJVFVxuKurbPvnhNmTsiSez/YNua9HI7r1965osmcgmnCT/dm6S5pRVW6ZmGBnIlGx/X8AIXpAQWXTlG4AAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA3OjE0KzAwOjAw/KO1YwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABh1JREFUWMO1mH+MXFUVxz/nvje/3s7+mLa72wqNSykIxEKCqKUJf0jQgGJCIGKC/AEaUSEh4R+NGv8wEMUY0xgjTI2J2Go1/EWA7hbBxELcboKh0tItZZfd7a50Z3dmdmZ3Z2dndt67xz9mt7bd2fbNUE/y8jL35d77eed83znnjtCqvfRrcKPgCBS7ha7sFtBOkDioC+KDVFAt0lXKU0wqvgu5Tvjm11ra0m0ZNhqDXFXYHLuJzuztwB3ALcBWIAmUQDPAu8y3vYnRId6+bZg9R7XVLaWlWf1pUN2K8CDIQ8DnEb1oufOZBGAI5SDoixgzw93f+T/DHkqDEUH1U6A/AHkQUS/UMgqIlkFeROQXqJ4Gq9zzeOjtm5SBFdTsBJ4G7kNwQ7+vAIqH8DCqHuiPwX7IhSG4pJnQnANpwHQBTyLch0jzehcBVRflfuBJ1HTV173SsKiDcCfwCB/nwxShHhEeBbkTxbmysAP7wJoU8ARCsvG7aP2ywf+utbHG1EmE72I0xeHnQmGE9ZBB9GbgcxuCCvqZjp7MV3s+6aTcaFehVi2+nJ0M3lnIbkVVkIbavh3YBfyDENoNCasG4YtArBGogL23p29u7w17uNbraAMcoO0bV12/8NT7g/lXZyY2bwAcQ7kLkbcA//IeC+tZuGkV4mJadnid889c99nFa72OXuAc7E6vo/fpnbct7vA6ihs4zgE+jYbjCAsr1CvT+lgq9HntiV3JTZsbrGduad+86RqvI7FBkAWlFw2X/5r5quONh5WIGFeksShFJBYR4zT2rIBoIixAE6mL+cbDQm6lUirUqrlGT+dqlVx2ZXmpYfFQQCmGLQvhYBWLMgIEDVzHcGkuvm/qlA1UF89/FKgupieH9VSpkGiYDYQAkQ8QsWEwwsrAgg6i8hBy0UcmQjnw48+OH+st+tWpb199Y7HDjXQv+LXsvqnhlX1Tw9vLgR9tnLq0BgwhhIINV9gPpQVHr0F5HWTH+j3rcXSNCTwngivi+KpBOajhW+tskGMBxkDuQvwJ7n7ismIIq1kFpoGDqK73ggiI4FvrLNSqztxKhYVa1bkkqKpF9c/1nldCqTZ8i3g4DVavR+SPwO7Q8za2o4g8sv3nL3zgTpzFWAiswXEs1ggCeJUKd2QyPN80LMBrv4sQBPcDexHZ1jKm6rQpLf/wqmd+/3J8finig2ssJrDGOI4NrBErsJKoVMo3zi9Ujnf3sC1im+yeVGuovoKRW4GngEgTc+tysWq99ydO9/zhlZQ7v/h1NcY1YDCIYxRATV12thKL+8e64wUDJ6cDGWn+WHPoOTCmDyUNfAlpLjqRTH6s50D/q4mRySKOc9FhaPVXvTFCVQCswLJFX2+mKNTtK4+DmjOI7kV0vJmpprRc7DzyzmBidKqAMboKYjl3Sf0uYkGsiFoRRFEP1a7mYQG+/JgSLbwB/BYoh5oTBH7bidF/db717/G17HF5E0FVVOSsGjPSGixA8myAygsoL3GpXnS1AY9PZk5t6v/nMfF9GwJUAKNQAd410G/i8Y9aP55kb4aIKWD9X6J6A3Br45IqOMXFma7XhgYjs4XyeoWrgKzVFUWwqJaBUUROA1OFRKLUWas11chcaPc+BjZQ0OP4di92tS9YO8as3mWlVm0fOjHYdnx0BmEt/PXwKkZVQNUHloAJhb87rntA4fA9ExOngNL2YpGx0dEW/+Q43wbSOLm5lG1P/lQjke9hxD2XplQD7+TY2z1/GjjiFhYqGCOAqCoisgIsqVIQ9IyIGQkgq4K/nM8HbakUOA4fjo1doI2PbZH0jwQvuctvb3teY9E9a3KIZPLj3X/9W793ciynjnGAGlAQkVlgWkSmHNf9CKVmrU9QC1RdBy+Z5L0TJ9Yr6krAAkT2/wzruA8EnW2/wXG2mXJlMTUw2J86fPQkrlMAplH9j0LGi8dnlqvViojgRCJcvXs3b+zff9k9rhgsQPuz348vb9/yk8CLf8s7feZI74H+g6ZUHkck74gUp6LRpW2VCrFolOGRkabXbz0bNDC/PVFxZwu/0k9s+UtscrYQny3ka9lMRfv6UFW+kMtxKJ9vef3/AgyZp3iOwsFtAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowNzozMyswMDowMHshjJAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABjBJREFUWMO1mFFsXFcRhr//3F1713biOCVxotiolJiUlpLKtiBFiiqqgpS3tkhFQjwU8QBRpUr0BSHEA+IFVNoIIVQeQ4CAKiVCoUSIFokEKUSENGpCYxJnnUQmteN4u+v12r7ru+cMD+tESbOO727DSFfn4dwz852ZOXPmXtGmDE0NkY/zuODYnGxWMVv8GEavyXJCGaBuZjFQnp+fL/b29prHU8vUOP/x823ZzLQL27vYy9imMe2Y2fFIMVN8AtgN7AS2AD1AFZgG3l23bt3xEMLJmb6Z8/2lfmvXptpZNFwYxsltCRaeB74GfB5raNMqKg07CRw07A2Zrr+z/Z3/L+zoxCg+eEnaIfRd4HmMrrRaDFvEeAP4iUwXAsHODJ1Jbb+lNIhcpGBhO/AjjGcMy0jp9yvUBXzdsC7Dvm91KwCp08K14tW6r28QegnjGURLoLcRZ4SeQ7ykrDaMFEZSL00Na7IIeAp4QVLbB/MmMPANSU8B0X2FHZkYwXnXB7xI46TfvRkzggUSS1i2ZRJLCBawVaIsqQfj2yGEvtHCaCrYVB4yzAWFz2J8rtlhMjMQ9mjno9O787uj9dH6DZVQKR9fOO7HamNbDFOzlBF6QtJjGH8jRe6mgpXJAV9CdDYFhfBk95MfvLzxZQayA900Qtu9p2dP5bXia8VjC8cewLgbuKHvacP+DtTX4kiXs4bDeIQm+RUIDGQH5vZu2Ds/kB3oB27BDmYH+/f27Z0fzA6WA6GZ5gjjM1g6jlQvGSbDttCkLhvGtuy2/PaO7Q800eeGOoY2bstsyzfNXUNAPynrfbo0aIQvt8pGyJDJaJU6JqkzUhQ1hRVg5NMwpPbsisw1hUGUfKla8ZXZZvMVX5kth/LCatcwopz2BkybswFjHMN/eCoiopAUcocrh0OwMH/7XLAwf6hyyArLhXzUpJwa5g27aFgghaQt7gE4QaNpucOqJOIQ5/aX9/fPh/nJZ9c/W+523ZsWwsKNw5XDy4cqhwbjEHc43e0XoQQ4uaJ/TUkVgNHxUXn8J5zcW4iHmjrfjIwyPqcckaLIm/exxdStHt3jWp4wZ09HFl059dCpNets2py1SNEU4uBqXpBE3epRNVSjOT9HNVSjNUCDYb8lMG1YqmYmdScyWhjF4z8l9CuhXWnX3UP+YZG9sPituYu1/9RxAXxwRFEguMZx7Ipjdk9P83qrsAAjl0ayiOeAfcDWtjGNqVAO35t7sXwkmg7ZOmRcwPngXBQFH5yCYDkfx4ufnqvEZzdtZms2tPhZIxLgj8Aw8B0g2wIgCCxYqJ9OLiz9uNqnYviqOTIOHA5FzgDMNd4OcWeufmZTruTgvSmv8ZYb0pX+80HDfin05Vaj46/6icWfVt/0Z5OyIsl0u4KbO7KVQQBBsBSwt1q5FAA4/cnTAFdl2odxuZW1Vgnl5SPxCX8uKRFhiKDGgV151BilAAqSBQkZ1oXZhpZhV4AtP5N/G/gFsJgKtG715GTyr+U348u4W1f4GiJhJpPeN+fG24IF6Pmgx5vZfjP7g9k9So81arC/6MfiA4tnLLGQAlSAM4iBdx0cdbnctbY/T25sv8GyLZc61PEK8LCZDTeFENhsuF77/eKJcM0vNunbBLpZaQ0RMFsELiFdACZL+Xy1N0laamTukNMPnyarrEk6S8I+PPM3PdkYV6zXQm35L7UTyYnkOroV/kZ4DWcmMKsDC8AVg79GmcyvDf6858qVMaA6WC4zcelSez85bpeRwgj+mu9zG90P6WSvnDK3lSlfP5WcWnq1eizMhFiRBMjMkLQMLJhREnZVcuMebpioLxWLvruvD6KIwsTEHbnxkWXnkZ1Srx5zG93r5PiCnBqFcrJ+eelnC0fr/0xmyRABCVCSNANMSZqMMplrGEkIdXzizTIRXT09/PvcuWYZdX/k8WOPo6y+oo36ubLaatUwH/9m6Wjt4NJ7yqoETGH2X4Pprlzu+lKtFksiymYZ2LWLtw8cWNPGfYMFGN4/nLMh+4F69c36meRY/MrCQT8XLksUI6k82dGxsDWO6ezo4Pz4eMv6P9rPig+J9Vns3/evRp2Z3/nxULJJila6FuvBbZgZX5yd5U/FYtv6/weDRwGc3Jre9AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MDc6NDkrMDA6MDDVlNrHAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABmJJREFUWMO1l1tsXFcVhr9/7zPjGY/jSy6NXVHVScsttCBVqElBFU0FFYiXqkitVPEQBA8ERBFPqCIUIZAQApSHFgchSEorAuoTUJJSNalTUNNQLs0FO0qcOE6d+D6ecXwbe+bsxcPYpYknyvE0LOloP5yz1/r22v9Ze21Rpz3zxlrcYgULMes2NCk/Prte0AJkDEWCCkbJsOKVcnu+OT1sFfNMqYGnto/XFTOqF1bzC6Q2NKuSn9kyOT53H3A/8DGgHWgCZoAR4ERzeuSvoGP/mr21d2tu0OqOWc+krldzBNEuuUdlPA62FRP2bqfLng2QYXAMtN9CeMF7Rnc+MPv/hX2mO4cHmfFBQ99GPApqvKETq0YybE7wgmQ/DsYZ55zt/NR04virk0GIZfJ3gn4APCxTlGjJqgILNSL7opkaZXzHOzu/tJRE5pJ+2HV4Dbio1aQnEA9LilAC0HcDCwxFZjwCPFGJ1dp1eE3iXCWGNTMv9CCwg+WM1mFVZkWgL2E8iJm/qbBdR3I479pkfF2mplrZNDPMYuKwSBwWiMMiZjFmNXZZgKzJsK+ad217DucSwSbNkDPCRxH31tp3MwNht6z5+Ejnus/6dNTaulgpFgcmXorHZo63m5mklfME92HhbuAICbSbDNbkDD4jaLgOaOhc//nJT97xI1qym3KAB3Lv3/jYldfPPZkfmDi4biWwABqQfdqkvwGVG2YsKaxMW0Ar9GUEWjKbp7Z27ppuyW7aCLwD25LdvPHeTbumW7KbikZY6Ra8obsMJeJIBiuEaKeGBswCzdnbs2tzH1lXw59bl7tr7ZpsZ9Ys1PYMG1GymrKavzpznbQjRVFNUQKSGpwiX0uSSxOySSttosxa9ZmqDeMolfMzC+XiRK33pXJholTOz6rWTlcdF28qrCAI+oB45TvP5OzpTO/w3mAWrjo7zcJ0z9Bem5ztzYqV5dREbOKsiUACSyQDCwTEUeBxXRNVEpV4LvPvt3dvXKhMDW7p2FFM+TUbyvH0eM/QvsXeob23VeL5dK3MCsrAMW4mbEDBQTeEIUybr/0dJMdCuZg+Pvh0Z8/lXyN5bxbfWg5zhFD215OAiSEz92okSwSbVAaG4mGJ/chCLY1JEELZL1SmfKk8yUJlyldBax13gCwIfisXRixhM5O4RezqzoHcBzB+g7Gtvk74KntDnh37v9d89lJ/hAsQB4f3geCqtayxVOL+kRH2rBYWoOtQcwofHgF2Y+qoF9jMhuem3ZP7nmr9U7moVAUiF3BxcM77EAenIFjMlkpzH566Ujq54RY6UmGV/awoI3uR4O4x8S1BKjkgSIYFhYu96TMv/bKpbb7oHvPOIgcOh7wzAHNVWYRSQ6by1oZMwUHPcKy+Veem60gOC64T+IXgoaSnz7IsJ4ei/pf35f586Uyq6L3JrnKwfKWwpUFQLZvzAXslcT+7bF97YJYguwi227ALq5k7P+OKJ7ozRy+fTRWcw0BBEHjnUXWUAihIFiRkWCNmrauGBfjG9hmb0vwhoZ9jzCXJaohV6T+R+ufJ7oYLUrV63NgkzGTSkDnXVxcswIVMHDvTs8AfanfYS5hW3c7RAX/62B8b36pUFBKACnAGJeCEg4Muk7lc9/Vk63Qb026+kFbqJ6APYdxTC0IyZgp+9M0DjUeLo36uRt8mEEvLNUTAbA44h3QGGCxkszMt5XLyO9i19pWHCjQoZZI7GSrstsA02HLQpdGoLGqh5/WGo+ePp0b53/ZXt9dwZgKzCjALDBgc9lH0vMFfPjcwcBqYua1YpP/cufde2ru6mymOubbG5vj7qTQ75SwyU7VMmeKBk6l/vPJs7rUrk77k3NLtywxJi8CsGQVhFyXXF8O4icp8Ph/n2trAe87391+ljfdsu361Vpmm+O5cc9iTzvAJaalMDfsLh5/PHRw4lZ5w3jzVxqUgaQwYljToo+gyRjmECnE5Nos8jU1N/OfUqZWSuhmwAD/8fQtRxBdyLeFpH1lHadZN//3FzME3DzT2uIiCYBizSwYjjZnM6PzCQkkSPpXifdu2cei5524Y46bBAnzzp+sz7beXv5ttCl8e7E2/9vLepv3zM+6CZHkvFQfT6dmOUomGdJrevr5V+6+7GtSyXHMoFcf8z1Jp+93Y26lCYawhz/jFUrazAzNj+8QEB/L5uv3/F2k1+QZ70J2JAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODowMiswMDowMKLS20oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABdtJREFUWMO1mFuMFFUax3/fqarp7ppLdzMDDCwmzAxegrIka7KLF2JkITFGE5NNfFAeNPuwGh8ML2rcbDYbXMNkszFmH7w8qYmYGB92jcuDwkYwQYzILEFmggODgDANc+menkvX0FXn24dqFJZuprrVf1KpTup85/zP/7uc77TQKv4KmNrvKoJHD0IWSAMuEKIEQIlZpsihGKAT+ENrS7otk3WBACHFejzuAjYDG4FeoAOYAwrAUTo5gOUQ9zLMAbTVJaUlq12A0IvyKMpjCL9JYHUI2I3wPsJFnvu5yQ7WbJRbgeeBRwE/ka0CwgLwPoZBLCewKC8mX77ZMBBgHbAT5RHATbxdARQfYTsWH+WPWE7VtpEITpOq5lFeALYjTRC9lrABbgUcDIf4LQH7kpmbZMO+39gW4Al+TGIKILjAk8AWJLlgyci+DCh5lGeIM/16KGCBCAhrb8uNnNwBPIUlz8vJyCZVyKD8Evh1XdfHyaN3rrqz8PC6h518Kp8rLhZLH45+GB0pHOlFkevs4pC4C2ED8CkJYjcZWcEA24BUPaKC2Idufmj6lS2vMJAbaCcOmfbH1z9e3rFvx9RHJz/qrksYUghbgc9q/lhCsaRkhfV140uhP98/89Lml2YHcgMrge/JrsuvW7lz887Z/lx/qa5ugoNwR02MJZE0wYT4ZLpeG4W12bWZDT0buuvMZzau2LisL9eXaeBkAVaSsN43k9XpRh88x3NFpO6CIpLyjNc445VMUgLNlK6ZRtpMLkzOFYPiZL3P08H05ERlYr6hdkIpab1OStYCo8QF6TqywxPD6Tf++4aNNJq9+lOk0ezrQ6/ryMRIpgGhCPimNv+SSFaQtyIo3cADtYJ+DdmqrbqHC4cz5cXyeF+ubz6yUaowXxgf/GKw/OpXr66euzyXakD2MvAmMMTepUtXMgfsQrD0IXyC0F93jILruJHv+bjiOqGG0UJ1gTAKnRusMlaT4lueX5ps0jBQhHFgN41cJhBGoVMOys50ZZpyUHaWIGpR3iXueRM1M8lbkV2AcgvC28CmxHaN8TnCEzd90PuNeymFsRBZg+NYrInPDz8I2Fwo8FrNIHnXtRfYRpm4KtxDfEFpDcq4qZjBNe+uGUrPeF0WsqJkVSVnjHaoSIdAyg1D/MhG4epfyB09XdJck7cLiJvtPwM7AK8Jglf6Aet/lz6wYt/yf7kLToCoq3E4Sm2AIhK3RUqIUjRwXIyOJlf2irpbqQInUW4HBuqe+PVQG+WVvNM9B5d9liq2CYYuFWkXET9+NH6rtovQAdKF0IPQH8Fcc2R/IDwDTAD3IOSTmprAlPJHs/s6T7VfqPW1KrHmtUfit4iCqIiqiIiiHqoXmyd7hfB9fIuLIb7VLh0OlrBjzD/YfTh/TFQ0mT9EUBUVuaAiXzRz3F6LEhHCWyj/RG9QemqapSdSI8u+yg1JJDYBUQGMQgAcNbDHpNPnW7+erAZmKOLzN4TbUH5Vl4SAM+dczA1lD3oz3kKd3QgIqrWtCRbVBeAkIieAc8VMZi5brTZRuv4fHwMPAB6XiJgHtiGkrsr6OL9DFrtGuv6THe4cE5UriRa7FzEgCBqCVIDzKhx2XfdTa+3xB8+cKZzM5S4vn59n5OzZFv/kuBqD4JScvPXtX9TVpxHcqwhH/tn0lyv29+x359wAE6eVqiIil4F5VYqCnhExoxFMqBBWpqai9nweHIdTY2PXxMaPhvesJ2TYEPrha+rp3T+UKff08gPde/xzmUk16gBVoCgil4BxETnnuO55lKq1IVE1UnUd/I4Ovj52rF5E/TTwXvCwrv1dlIn+gcMqsyiz+SO5Pfkj2eM4FIFxVL9TKPjp9MXK4mIgIjiex5pNm9j7zjtLrvGTkQXofLozXVlW+VOUin7vn8/sX7l/+W5TMacRnXJESufa2uZXBQGptjaGR0ebnr/1alAHYToM3JL7d+3W91KT6WK6nJ6qXjgT6NpeVJX7Jyf599RUy/P/D0pQLH84wUhqAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowODoxNiswMDowMJo3/8cAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABapJREFUWMO1mF1sFFUUgL9zZ6bd3ULbBUpBJVTwB1E0UaJg4oNGTUw0MZoYoz5ojKAxMeFFQ4wxBh8wxhB/sWriPyY+GH+RBDT+FhQVFaSBQrtQhRba7ral22l35h4fZosou3R2qSe5mWTm3nu+e+6555w7QrWizwI1gAB1AiOzQBqABOACAeCD5qCnH85QcIA6kNurUulWDUstkBNIL4b8cuAq4BJgDjANOAb0AL/BnG9At8HS3dCm1WqU6qz6ChDOAbkNuAO4IsZU24ANYN8H04us/J9hdT1gBOR80EdAbwNJxRwMkAfeB3kK7B5wFFkRW32FbhAIeOcAa4CbQSoYLwAp4C7QFMij4O6fWEUcMfGt2gp4jcBDEahW6+8ucAvIQ1BojHZrqmFRB+Qa4O5IYXXuHom4wD2g1xCFiCmE1VZA0sCDINPKdCq28IQ28a5k/2nA/UA6OrCTS9ytNMDFwOXlQdHLaOq5iflOmtrGLGO5jzkY/sLROaBy8k4IwHKQJcBXxPDdCmD1OpDaUqAC9kZaBtaxnIXU11GM/ndy7tAqtvZ/SmZmaWBqgWuBb4mSyKQWiwkriynpX8oCGgafZOnwQuqbgeOw51DfvIalwwuoz5UxnANcBBqLIy6sEGWmkqeqhenJJcyYWWI+cwkzZpxNfbL8vNocWX1yqST8JEq/VjyMK0hJhYLUeohT3iWl3EJOkgpCF4PljNOHfyzLWF+prwP4fUfxR04R6nJTDKsWtAM0LAW7m4FEK+02RIdP/BKiwy/Tru1kk2VgQ2AvYONQxHQDtSBtREXLfw6ZkCdIrOXX5hzj3fexKFeP1zRE4Wgru8dbaZ+XJ6gpA1sgKnBiwcZLQ7peQM4GNoMsKNGhuHITpvBwESfAhnkCAqxzCjWdINcCGWTFpHE2rs8qcBjYUNoKAggB1hlizBnAZ4hxZxJQC7xLVPPGKmbiJ3htBfQ8kDeBZbHHlZetIHfPu/n1ve6vhzAWQmtwHIs1ggAp3+eqnh4mSp0K69lWD7gFWAfMrRpT9bAZyK8+89ZXP05k8l4ArrGY0BrjODa0RqzAeNL38xcMDvm/N81mrmcrhoWoJn0cWAV4FQyObGPVpr7r+mb2qk8+co8M+zjG1cgdi+lYFREFLEqAkjXwhxjtqLzOi4BbQF8GrqdMMijH6+3v65z9yMZPkz8czOE68u+Kobgg1eJDAKzAqEU3V5IUIonuTgdA1wFdlQw1udFcwzs72pLbu7O4RhGsRAet2CR6ilgQK6JWBFE0hWpj5bARsEJ2C/Ai0b1qcimEQd2XHT81bNjRFV3j4myICKqiIofUmI7qYAE4EoK8AXzIKUOPgiqJXT3tM577foeMBzYGqABGwQd+M7DRJBJ/ncZ/gwsAssDTqC4CLi0NITi9w72N67e2eZls/uQjHXmtanFlgkU1D+xDZA/QnU0mjzUUChUVMv9hWFk0G79TCNcRTtQFE0aOnuIXxqZ/sLOt7ot9vVHukGgFqqKKURVQDYARIKPwheO6bytsuiGTaQeOzcvl6Ny377RufUWmVpxMX9o21T+hSe8BjLjHT3WgYerb/dtnr/78a/fQkI9jBBBVRUTGgRFVsoIeEDEdIRxVIRjt7w/r0mlwHPZ3dh5XdRpu8I+FzfbVOYPzWjCr7jJNeVdiJApTBwYONr7648/un4O+usZBtQBkReQIcFhEul3P/QulYG2AFELFdZg1fz67du4s4VBTJF7XWmyNc2vYVPc8njPXDPrD6Re+35h+qe0PatwscBjVPxV6UolE7+jYmC8iOJ7HWcuWseWttya3y1TBAkzf9HBi9MJZj4WNyXtTWw983fzwZxvMQL4LI/2OSK67pmZkru9TW1PD7o6Oiuc/fTc4QYKZSd/NZJ/RRe57tbt6s4nObH9hqMfXlhZUlav7+visv7/q+f8Gb188Ax2DNawAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjMyKzAwOjAwLF3cqQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABQ5JREFUWMO9mNtvFFUcxz+/M9N2d1HaQgEbNVy8hEiURIIBEx98MTGRhIR/wMQnHzThQXwyPhkfjBcwBg0mKiJiTIiYoCQKEWOoEZWLXCIt2+VWWnrZddvSLTszXx9ma8tll9m2+EtOJrtnzvd85nd+8zu/M8Z0TZr6y4A2oBlIAT4QACWgAAwCkwPMpjWlP23YSchHgLXAU8BK4B7gLmAE6AWOAT8DvwKnroP+X0wC6R6kl5F+RVKC1oH0EtKiG1bljkIa0nKkT5BGE4JOtNHKuOUVnTsKa0gPIX2NVK4TdKKVkb5CehBpesGb0KutSO/PAHQq8JaK3h2B9ZA2IA3PEHSiDVf0vDvh1TakA7MEOtF+qOgmwkiauhzwGPBErUdaBb3rwGuFljwUvoXwzziVVYvNtcCjwE/MWkqTfKQ3q8WqSeE6qb9L6pE0IimQNNIp9Twn9SNFNWL3DaSZ5vvrYBuR9lSb9AFp6JiUlRTqeguPSNll0lAV2Kii25h0eZOYUWM5l0D6UZh/Cz23EuYthXQN3UVUD5PrrB73p6p1NIBvVSY0aGqAWm98moSW1LMA/1TrGICRPAzcqm8IBvphtIZuYbZhI6ATCG/VeQpSH0EUwvDU/0MY/hB0urr3QuBMRX+WLN4QXkAaq5Yzm6XxV6WuLun8FWmsSzr/itQ1VxqvkWfHKrqzuDHENcEypLO1krwvBXOlYJ6kuVLgS8FtNoWzSEuT1ghJw0DAZWBnrSULwCuCNwQUwQtqv1gR8AVxzZtoQ0he9cRb4sPAZ8Ca6S7SFOsAnr9//foz/tGjuAjCyOF5EZEzDMiUSjzV28vWyoDkqcsMpG7gPeBdoH3amNJlNzT00b0bNvSncrmFQczhKi2seP2a4Gp/OlN6eMFC2huiOjw76d0M8DqwEWioGzSKoswvv/y8cOPGPf6VKyU8z1cMWUnVEmYCIkSAyDs4aU6d9e3JsXevAluJz1vPUGcoNWSzudbNm4/7fX2t+L7JbIqAYjkpvsT87YKlofihnk1hEhjOEYdCdz1DXaFQaN6x41D68OE8vi/MIouXvNIsvppFYJGZIjNMKIPUUj9sDCzgR+AD4GqiMeVyMOfAgd+bd+7sxrmEx3EzJJNZj5zrnB5sbCHwKfANt0s9EqkTJ07P27LliF27FiUANcAp/u5wzMF3LpW6NNM6Mg+8hbQceLwahNfX19eydeuhhlzu6s33yOC/g64wosp70YXZ38CFfDo90lwu11XI3PDsRsWjxymX3yUMh295W6k0fvfu3Yfm7N/fh9nEuHh5hZMMpIC42MkJ9nu+/7lg37O53Glg5P5CgWxX1wy/yMTZIfJ6evZGCxZ8KudexLlJzSAI0x0dR1q2bz9j5bLwPANMEmZ2zWBUIg+cc2adIfTLCIr9/eGc1la+X7aMs9nsf3IzP06Y4Q4fLjj4OGhrW6VM5kmci9PUuXPnW7Zt+8O/eLEk3/eQykDezK4Al83sgt/gX0KUoyjAyqHwPdoWL+bEX3/dNNWsnH3Kq1erobv7uCsW3wmbmpbiXLsrFofn7tr1W+bgwT4aG/MGl5EuCnrTTU19Y+PjpYmHvW/tGn7cvv32fpkN2Am7e9++1NiKFa+FLa0vZDoOHVy0adNONzTUjXODnlnhQmPjaHupRFNjI6c6O+vWn8VTJQTz55f8XO5tLU992XTiZD6VzQ6Wi8WSlixBEk8PDLB3cHDa+v8CFsk24crxS5QAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA4OjQ3KzAwOjAwdKD6FwAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIosGP4JQAABm5JREFUWMO1mFtsXFcVhr9/nzMXj8ceu4mVG1VSFwiq4iIqKClVHygFqQgkRKNAqjyk4gFC+gBPRYI8IISgIKgQjdKXiFKUi6IGVQKiirb0kjakCiJtrk0dO26cxHbsiWdsjz23sxcPdkJIxs3xpGxpdGZ0zt77m3/9a+01I5ocXd99lrJLUnfQPXGnBtr6FxuWk5QGC5HqZpRlVlgzkckfzU1b6Opks5cZ+sUPmtozbBZ2OkjRVaxotD1910Bb/33AA8CngaVAFmMKGAbePd4+84ZDhz6x+sDJ0ye+ZM3uqWYmtXx/D4H5pSbWgx41+DwyhOAqyuwbk+Y2skPALnm3N8JGZrZv+P/CZjfvJgIhrRb2hLD1JjKKsYwBMqYN9prxJI7THqyyLT70gmygyEmB/zjYzxDfAMI4oFdVERnMNkrKGPy4Cn1cE4ubjSDug61bdoKzTqQfgW2UCJtxkSSHbLVQEJodSt27rlw7vC/WXBd3E5MFJnsQbJOkpkD/q7JC4DEHD3ostmCxYLOP78HVw05MWxDZhl/GjMgb1bqnUo+o1j2RN8waR1mQRfpeaOrMPr4zFmxczzocdyPdOx+okH125W3DD/csDzoyyY7CdLWw/9iF6J1zl5eamaRGkbD7TPQArxHDu7FgzZsDvoyRuj76c8r5r9694vIvv/kZuruyrczmQuu3P7dy4onnj+T3H7+waB7glMFDwAGgfnPF4sAKZ+IudGNCeoPurrbi1q/1THZ3ZZcAV2G7u9qWbP16z+Qdi7MF31i3wGCNmWJxxHpIIM2eTDdI481Yuai1Zc3y3KIG67meFR23rVqcbfENvSvJtESmWNm6kDqbbqi6QSJw4TymRFIqESiw+R3ZEhcgZukywIqNcsAJ8lOVqcJ0dazRzPFSZWxsslJy82knCnGrYDxYw2P0AtH1twInTl4spHe8ecZ7b5PX3vPeJne81Wcnh4otQWPaCHgf8HEwYtrAebCDGI9en2SSmK5F6d/+/dSS4kxt8LH77yy0pRNdE+Xq6B/e7KvueKvv9plalHQNXGJQAzskUyzYWAFo3bxHTnaHh5cQ3Q3FNyMRuCiTDAmcgshbNF2tU4t8MI+dMazfyx4KzA2Utm24aZ2Ne9yaR0PALmyekEnUIh8UZ6rB5VKF4kw1+DBQzLyMnc4YJmYzE/uAb92yB8x/EumPGGtvoTWYU5V/Stq0+MDT77vCIM5D5B1B4PFutpfLlMs8MDzM9rk5sZuI2uHnSaxdNyGjCNyPaGue1IZctfTkon/86kiqNNbuIScjZ6YO5yxrUlaQCut1MpGP6stXaM3idi2snzVqGH8B7gH7ISixEC1nOwjzqbHe0x3v7O105YlvmVzoZnsPBc4AzM3awpdT6fqRrvS4gxNDkXoXHMzWLbuR2SqDZ0z6imJa6YopE5OX+nPH9v01mT9bwAUyrl1g7pPZ3EUAXjDjsZdi97NXRmnbBgLvPzDpKeBsnNS48oirThcy594+mLw8MI6czYF4rr40e5U8yEvmJWRYBrOOBcMCFJ/ZaJVc58uCbcim4ySzfFRPX3rvX5lzb5+92m3cfJYwk0kXzbnepmABokwucuJZgxfsQ2kNmZEoXjiV7X3liKK6jwEqwBmUgXcd7Hfp9IWm/zdYNDpIXonxjNV+LbNPgd1Dw1NKhJXiSLbvtYNhaWz6RoubQMw1OobwmE0DZ5BOA4PjLS1TuVot/m+w60f+d+tpsbrJ7Cg+egpscjaX50Q2wwBXr1XS5/99MDXy3sg14Z8Nr+HMBGZ1oAQMGLwShOGfDF58eGDgFDB1e6FA/5kzt1raZ6uDK412+lT7TwmSm00KZYZJyCxKjZ4+nDv659eDcrGMnACZGZKqQMmMcWEfSK43glET9Zl8Pmrt7IQgoK+//3+8ccujfcPPRSrXE6Wy2wmSX7jSS4dTo2dzx1/YnxrtHTO5AKgB45IuAUOSBoMwvIBR875OVIvMwoBMNsvxY8du2OcjgQVo3/Q05oJHfCr7e3PhMledmcyeeXV/tu/VE7hwHBjC7LzBcCadHpmpVMqSCBIJPrZ2LS8/99xN9/jIYAG61v0kXWlftjVKtH4nNdb3eufRfbtUK50F5QOpMJhMlpaVy6SSSU729i54/aarQaMRJbNlVxr7jW9L7E5MXBxPlvP52vmRMitXYWZ8cWyMv+XzTa//H6b399ILDmv5AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOToxMyswMDowMCfNu14AAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABhBJREFUWMO1l0tsXGcVx3//e+94xmPHzsSxPXm4NK/adRKKQISUKjz6QIBKFIQUpMCiwIoFSF3RDQsELCIWCLEosKiggiyyQKWQSFV5pJRHUKpaVbDj2HnUedmOPR57xmOPPfd+h8Wk1JbH9Z1p+kmf7uK795zfd87/nu98otHxkScgbAYLYM4XbdFWsHZQCiNAhIgy2CwtTTmKy0YgaHfwj5cbchk0DLvcCh23xcyOftqiRzGOIB4BskArMI8xAbzFfOXv4J1nb2KIkWVr1KUa+qr/GMhlMR0HToA+gRlohbm1SOcRp/B0GucmGfrDBwy7/yg4T4he4HtgxzGl41kyQAvAabCTOF0GZwzHl4RfF2zXPoH2gn4MHMeURHG3LDASyA5gZIEBQsszM/IBwO4/CngZ4DlMXwcLVqU9Ji/IA/UifHzO0/VwmanhWJ97dbjyMR4HnkHUD7oaOgC+gfQ4ZrEDFu/F/i8DdAA/AXpr5t2sOsMIogicvftarY1JTaAtyDtDV99CnOjGLV0epg8jDtVcNQOwjx3cN/Glz3zcz7S1bM4XSrMvn7sQvTl4JYuZ1snEo2AHwc5Rq340Bmse4imM5JqgmiFwT3/20MxPn/sme3qyLVQz1vK1pz9VePbkC7k//e1CxzrASeBJ0OtAuHHE4sJi/aiGbJyx+4Hs3I++e6K4pyfbDfwfdu8D27p/+J0Txd092VlcjcAZPsYBXDyOmLASKEstsTrHgzu6mw8+9KGOGva8R3of3LJrZ3czztU0DNYNFutvree4Ta23kAj8QKotSknJRODX/pGrpaw5LkA9pWuutkMxnS/O5wvz07WWZ+aK01P5Quk9St3s/YU1c5iNAtGaNd9j6MpY6penX3GRc8WVS5FzxV+cfsUujd5oxq/pKsIYwXDEGPHqbGefgA7E50GrpSNRqYTBG0NXmwvFhfFdO7OlyLnkxHR+/OQLvy/87Ldnts+XFpN4tWBtGfgVaIDp4Q1LV7xjqO+o8LxdwKvA7nWiTxAEUbo5SeB7fhi5aGGxTBhG/voSsGvIniTy3mb4pQ1h42rWEONgp9ZPmQjD0C8US/7MbJFCseS/J2jVzu8wTRDjQIgfWYD9x8DcQ6DfYDrcYCe8kvbfwDM9iyMjgVvAcxA5D99397pQSJfLHJmY4Pl7X8TvuqaGoau3AJoDPYbY1DinjXsWntxZHhpIuaU2B+0y2s202fOs1aRWQTIIQ9KRi8LtO3Rga5vqvdZUMP0R+CjwLJBogNSlXfFy19JYJrDwqwaBBx4e8r1qj+FVZeHKyVQ40JnKezA4Hmm0vuZ76jJ09VUQV4D9wB4M1SOJhCtf31q583rSLQmpzaQWSenqtOrTrEWiFdSG2IrYHcF8fbBQlUN3/xzmpoDHQJm4sJ6Fs5lw6i+bwtk7AEimahTvTVWfkoFMMpMkwxKYTdYPC3D3EuzreZtyk4d0hDhyMAtbo7l/dVQmLgqzeM27hJlMumPSf+o5blePlrkI6dfAS2xUesxIuYVLWyoTAzLnYoAK8AzKwFsenPVSqduNRRag9RBAGeMqZocQ29arhL5VJjsq4682u1L+nYCt2IlAqrbFgHCYlYBBpH8K3syn09PJMIx//1kzJoehsw+Mu2Al0FNIyRUQgJC5pbYo99f2KHdN74JW01u9PCIsBC0Ct028EQTBOefc4BfHxiaubN683FkqcenGjfdf2uk/hh8uZZwf/MDkfbvaO1RBMYvSUfFC1/KN1wKrlKm2kTIzJC0DJTPywsYkbzSCKRPhYi4XtWQy4PtcvXZtlTbe90js/ZxI+AdDgucN75PvpDnhytc7l26dTbvCtCEfqAB5SXeBcUk3/SC4jVFxLiSqRGaBT7q1lf9evLjGz32BBUj0fwHn+ErkNf0ctM2zsJipTJ7NVCYHkZcHxjG7ZTCRTqUmF5eWypLwEwl2Hj7Mn198cUMf9w0WYNPDn04tkv5+RPCtdDT/Wnfl5inPwutAzpdmbzY1lbaVyySbmhgaHa3b/n2Fbe57AnO2peI3b2+v5PJZG89Vbtwq244ePGBfsciZXK5h+/8DFYWTIIiuQPwAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjA5OjIzKzAwOjAwqUK8vQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABilJREFUWMO1mF9sXEcVh78zd9fetZ04TkmcKDYqJSalpaSyLUiRooqqIOWtLVKREA9FPEBUqRJ9QQjxgHgBlTZCCJXHECCgSolQKBGiRSJBSiNCGjWhMYljJ5FJ7Tje7np3bd/duzM/HtZFCazju9twpNU83J0z3znzmzN/jA5tZGSWfD7GucDWrYkVCtmPgPoly5mRARqSYqBUqVQK/f398h5qtQwXL360ozEzncL29y8zMbHFdu2af6hQyDwG7AV2A9uAPqAKzAHvbNiw4WQI4fT8/MDFwcGiOh3TOuk0OjqFc7YtBD0LfAX4LAgwbA2PEqeBwxKvmenm22/v/P/Cjo9P430wM9tlxreBZ0E9ad1ILINeA35kpkshoHPnRlKP35YMoshZCNoJ/AD0lETGLH28ZvQAX5Xokfiu1JiiOSWpzLWT1UbDbzLjBdBTYG2B3oacMeMZsBfMspvGxqZS90wNK1kEPAE8Z2YdL8wPgIGvmdkTQHRPYcfGpnHODwDP01zpLYIRIYgkEfV6sw1BaI1JNrM+0DdDCAPj4+mymypDEi4E+zToM60WkyTA9PDD3XN79+ajjRujTeVyKJ08ueQnJmrbJKyVZMx4zMweAf2FFNpNBWsmB3wBrLs1KOHxx3vff/HFzQwNZXtpTm3vvn195VdeKRROnFi6D9QC2LqBJyX+CjTW40ipWTnQQ7TQVwgwNJRd3L9/U2VoKDsI/Ad2eDg7uH//QGV4OFsKoaXjCPSppv/1LdWfJExiGy00IMGOHdn8zp1d97Xw50ZGujbv2JHJt9auDBgkZaFOKQMDyK0RCJkMGVujjplZdxRZ1BrWAOXTMKTO7KottoaBYtFXy2W/0Op7uewXSqWwtHZJtlLaHTCtZgNoEuT/+0sUwdRUkjt6tBxCUOX2byGocuRIWVNT9XzUoppKeInLEoEUlra4B+AUzUPLHcOaGXEccgcPlgYrlTDz9NMbS729bsvSUrh19Gi5fuRIeTiOQ5dzLUtXApxe9b+upcr/+Pikec/HnLM3wB5omXuJTMZ8LmdEkUXey8exaDQU3WVbnpbck1Gka2fOPLBunU2rWUWRzYIdXisLZkajoahaDdHioqdaDdE6oEHi1xDmpHSHmdQnkfHxKbznE2b8wow9afvdxd6SoueWF79xudb4Jy6AD44oCgRnGNATx+ydm+PVdmEBxsauZMGeAQ4A2zvn1GwIpe8slp4/FoW5bAMyLuB8cC6Kgg/OgkE9H8fLn1wsx+e3bGV7NrR7rbEE+D0wCnwLyLYBCBhSCI3k7KWV6g8HLBS+LFzGgcNhkROsbpdAiLtzjXNbckUH7856m2z7QLp6/rxf4udmfLHd2fH++vRy9cev++R8ySwyYbc5aAaEtNoYQDBYCeiNdjYFAM6e/TjAdTMdAF1tp69CuVSPj53yyYUiRAIL1lywqz9rtmYBLJgpmGFCPUib2oZdBVY+P/8m8DNgORWoGo0kOf33evz6VXCku2WYIZnM3pNzkx3BAvT1ve8lHZT0O0l3KT1CEt5fnoiXD52TkpAC1AAniIF3HBx3udyNjq8nt27tpF5XsavLXgIelDTaGsJQWLhZW/7tqeBvLP+vxGXNhbcamRGQloErmF0CZor5fLU/Sdo6yNxhZ88+SDZrMrPzkBwAX/kgk81mdfRQq9VrfzqVJKduNt8VbDUCmYSTDKQGsARcE/w5ymR+KfjjvmvXJoDqcKnE9JUrnT1y3G5jY1N4f2PAuc3fh+79Zi5zW5nyjeTMmZXqyydCmI/NIgNMzXtOHViSKBq6buYmPdyS0VgpFHzvwABEEVPT03do40Pb7t3HzKz/Eec2vwq5z5m5ZqFszFxdWfrJ8UbytwXIREACFM1sHpg1s5kok7mBSEJo4BMvZSJ6+vr4x4ULLQR1j+zRR09glv2S2eafmmW3K1Qr8cqvjtdWDr9rli0Cs0j/Esz15HI3V2q12MyIslmG9uzhzUOH1h3jnsECjI4ezEkj3zPr/3ojOXciXnrpsA+LVw0rRGalma6upe1xTHdXFxcnJ9v2/yEfK+40aSD2/r2Xo6j7N95fKYqZgm4UY9txP5L4/MICfygUOvb/b4OFAZuQsv++AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo0MSswMDowMPiypBMAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfxJREFUWMOtmF1sHNUVgL9zZ3a9u97gXRITO4CwImhpAqXioQ2oeWgESPAUgRQk4AHEQ4uQqJAQP614QFVRItSi/tD0CRVo08gR/xAhkQRIIhMURJxAfm2vHdzY63g3Hv/P7s7c04dxCm7WYXbJkUZXmtl7znfPOffcc1doUn7/smJSgIHalUiiyApR2lBSCC4QKPiAN62Uc4IaB5al4Zd3SVM23WZh3Sz4g0hLF2sSo9wCrAduAjqALDADFIHDy4S9Fg78fC3H9h5Bm7XZ1BI3dyuidChsUrhP4GcxNB4AtonQLZaxJ+9t3HRDM7Z0Kwiiyg9RnkLYBGTizFUFEeZQug1ssYaTVtHfbIqP0FgaWATDtcDvFDYCblxTIqCQEXjAChlVfmuFAYifFqYhrxpyCo8BG0Xig/4PGFDBVbgbeMyx5J7fHj+FY8OiOMAG4EG+x8aU6HFRHgI2CDiXFPb5HYoa8gqPEu30C9eiYBVCC0EYjVaj90tIFviVFfJxvRvXQ0bhx8BP64V+YfNoZ57itZ04LUlylSpe3yhh8Rwdqoj830QRUOUWgRuBj4mRu7FgBQzK7UBLPVDAXreKcxtuglyWVqLQtq65hqndvZT7R1heDxhoEbgN2AcE3+mxWLCKEVhTL78UyGeZXL+W6VyWlfANbD7LyvU3MJ3L4tVzm4AjcINIPI54G0wRlA7q1GVVaGslvaKN5XX0mSvauDzXSlrr0wrCSiRevY+Xs5Gq1FKfHYMrSxgUocWYpXe8QjoWQ2zPRjK51DrmKsz4VUr1vvtVSvMVZpdynSiexCy1cWEt0AeEdTzH+CSp3gJWlelFXlOmDw2g45OkpT5tiHAKwcaBiFu6rEIPUdOyKKQiEISkDpxgpV9l+Cer8ZIJ2qs1xnsLVHsLXB2EJJeArRE1OJcQVrCqfCTKCMLqet71qyQPnqKrdwDE4KhlVS06HBxZKgeUEZQ9EtOzcdNAxTIKbEPrKxaJwPwaznwF/BrORUGjaP0LoYjEa2Zi9yKbtysq/EDgFYR1ceddRD4V4cG3/7Tx1OhwL8ZCaA2OY7EmKi0Z32d9scjWRmEBNndrgqhjehHobJZSVUfnZ849s+OP97wTzAwlAnCNxYTWGMexoTViBapp35/70eSUf6T9CjoTtuHuqQa8C9wMPA4k4gOe7wesPXNq/8mPtz+er0ydvdcYxzVgMIhjFEBNdDBavyUVHGpPTRg4OhpKX8N3i83dCtClyt+BOyTm6bOAjHd2oLB3x1PvFQufecZxRRcdXwrIwspAVQCswLxFP2zkUADg6egacpooFQYbmevPet6xT//ZUxw8OCHGVRArUdlaeCQaRSyIFVErgiiaQTXXMOwCsNZy7BJ4CWUuzhwb1oKvj+/5/MSBbYMipm4LdqGIoCoqMqLG9DUFC+BdSSjKPxTe0ov0oqqgqpTOfHX80K4/HwqDqo0BKkQ9tA8cNrDTpFJnmr6erDoMk2kmMgEviOr1CjfXgxCB2cmxscMfbe2ZKg3NccFvVEDO98WKYFGdA/oROQkMT6TTM221WkONzCJ54n4hHaAuHLFB7UW14fR5T357DGt+pe+LN3pOH9s9hsj58EfhVYyqgGoAzAJDCrsd131N4YM7h4aOAzNXex6F/v7m/uT4tmzpVrzSUD6zrP05N5F+RIxxvylTQTh8Yt/B/a8/88mMN+Ib4wggGl0bqsCsKhOCnhYxfSGMqxDMl8thaz4PjsNAobAoN763/PqFg5LOrLgxc9mKrYlk5lYRAyjeeGGw581ndw6f2FsyjusQ1ekJETkLjIrIsOO6Z1Bq1gaEtVDVdchks3z15ZcXptSlgAV4+qVB3GTynnS2/S+Ok+iszE1O9+75687ePX87atzkhMAoqv9RKGZSqbH5SsUXEZxEgqvWrWPXq69+p41LBgvwyHMfpC7vWPtsSyb/8Eh/zyf7dzy5bX723KCIKTsi3nAyOdvp+7Qkkxzr62tYf9PVoJ6kWpf7XnnoD8vd1L9LI0cnvFKhzNkpP9XVharyi1KJ98vlpvX/F5vAnOxV5r8nAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzowOTo1MiswMDowMAXwvhAAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABa9JREFUWMOtmGtoHFUUx3/nzkyym7R5tIlNfdCH9f0CLdoK/aCoICiUFkTUDxWxKoLQL0oREdEPikjxGaP9oLVW8IOo2GqpilqJlfporU2oaZKNaW3SZrOb12aSnbnHD7PV1O42s2sPDBdm773nd8/933PurFChvYxSBQhQCzIBTQL1QAJwgQDwFbIDkD4X1In6cjdSkU+3UthqIAvSCJfnYCWwCrgGaAHmAOPAALC/Bb5T2LMcOtpBK/VZ0RLfQgmhReAu4B7ghhgT7QG2WfjQwOBDFbgua0QrigERuEThCYW7BGrijC2EMwd8KPCChUMO6PoyEMqSQQDiwTLgWWC1lDG+gFQD3KdQI/CkC92UIQsTt2MbigcNwGPAaq1c7y6wRuCxPDS0liHh2LAKjsDNwDrArew8R1bYkfs1ms85q7BtKAKNwKMSnfRii0GBcMZz8l2J/nOAh4HGt2JGN+5WGuBq4PpSoIA2X8fAojtxqhtpmMqQ/fNTwhO/0KLRofxvdAFWClwFfEMM7caGVbhVovR6OqhgF9/B8MpNUHchtURbW3vRvYz+sIF06jPmFwMmmu8WYDdREZk1YrFgBS6niL4UqF/KyPLnGKu7kAXwL2zdMhYsf5axuqVkS4TNAa7UmBxxYYWoMhU9V3MXk5x3FfOLzGfmXcO8uiUkS82rsEBj5vty0k+i2EsFjIcrUtyhCNXi4ZQSpFByIadZ7NQFjJRwhj/E+FSGoWK/+8MM+SeYOEPosmcVVsEqdGmUkU6DHe4g0dmG1ZCxU8aFjHW+iWY6SZaADYE/ABuHI5YMFKxAO9Gl5ZRDJkCQI7HveRZMZ+m/9EGyXh3N+VFOdLQx3dnGBUGOqhKweaILTizYWMJuRUVgCbBLYGmRxQBgXEKvBsTFsQFhkAMb4JzBSY9EqSu1Hpk1z8bVrALHgG3FoiCFxwY4U6M4/jBMj+LMAmqB94nuvLFKWOwS34aicLHAu8CKuOPOYD8IrNvasvqP/up9GAuhNTiOxZootdT4PqsGBmgtF7YA7AFrgE3AwkopFT2WM8MbN5+39tO8SXkBuMZiQmuM49jQGrEC00nfz102Mur/1nwOCz1bNixEd9KngQ2AFx8wioxibSrx/Xfbmzd8Mu4c9x113EIFk0IPRUQBixKgZAwcFKNdZd/0CsCLFd4EbpOydkdJe909n89/4rMjiR+zDq4oM6tJYUmqhUYgykSTFt1VTlEAoPDt1KeRFHrLGTtpstl9c7e2H03szRhcBbESHbTCI1ErYkGsiFoRRNEaVBvKhi0Aawa+BF4n+q6a1ULyQXfy65/2z93WKxgk1oaIoCoq8pca01URLMBxCAXeAT7mDKknuoArg9W/d7Y3vPJrINM2BqgQXUt9YL+BHSaROFrx/waXRU0GeFHRS4Fri0EIMO4MDv5Y39qe9VK50yWuAoJqYW2CRTUHHEbkENCfSSbH6/P5si4yp1hBuwr8FpLfpIRjJ1/MbPP4UwfmfNR+OPnVIMjJ7Y+2VzGqAqoBMAGkFL5yXPc9hS9uT6U6gfELsll6Dh+u8H+cGdaGMuSkGuts8zOeJh8RjPtvmgrC3sTuvTubNn476v7lm6igiaoiItPAhCoZQftETFcIJ1QIJtPpsLaxERyH7p6ef3xVLIOZEd5o9mYdw+baoOk6T2tuFAygDLt9f+6tf/vnEfeIb9R1FM0DGRE5DhwTkX7Xc4+i5K0NkHyouA5Nixbx+4EDRSV1Vux5rxfHVq2tDZtfdfAW+jIytqfhtR176t84aKjKCBxD9YjCQE0iMTg5NeWLCI7ncf6KFXy5ZcusPs4aLMDjc79INE1e8VQybHygL9H+7c5zHt+WM8O9oibtiGT7q6omFvo+1VVVdHR1lT3//5bBTEsG8/2Mm3rJtYkPBqsPZoYTPWn6Rv1ky2JUlZuGhtieTlc8/98L/TvfZZ49dwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MDQrMDA6MDATW3FEAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABQpJREFUWMO9mNtvVFUUh7+1z5nOTKWUSsE2ahRUQiRootGIiQ++mJhIYoJ/gIlPPmhi4u3F+GR8MN4gBokaFRU0Jt4SlYSLQhSIKAhyibRMWy6l9xl6nTLnnJ8Pc4pFmOFMW1yTlZMz++y1v73WPmvtfYwZitD0WwOagUYgA/hAABSBAjAI/3YwbEZj+jOFnQZ5O7AKeAC4E2gB5gGjQA9wENgF7AWOTof+X0TlX4vQ00J7hZRA9wg9JXSd/g/eGNKElgt9KDSWEHRKx+J+y2M7VxXWhG4T+lKoVCPolJaEvhC6VWhmizehV5uE1s0CdDrw2tjeVYH1hNYIjcwSdEpHYnve1fBqs9COOQKd0q2x3UQcSVOXA+4A7q06p7vpYTUeTSwgT4HvCNlPC1RMrKuAlcDPzFVKE/KFXq24Vk2hVqtf7eqWNCopkDSqNnXrEfULRVXW7itCs833F8HWCX1bcdBbNKSDykkKdbGEOqCclmqoAmwU261LGt4kYlAlnDeTZSULL2PPcSfXsoRsFbvXQbL6W4v7MxVbUvgVC76RJkW1Nz5LQknqWYBzFVsGGCXPwGXbhhign7EqdgtzDRsBbUB42dajZNhARMjIRf+HjPAu4lhF74XA8dj+3EhcEJ4QmqiYMxs1qRfUrnadVJ8m1K6Tek7tmq/JKnl2IrY7d4Uh3hMsFTpRNcn7CjRfga6VNF+BfAVXKAonhJYk3SMkXQYCzgKbqoYswGMYjyFgGI+g6osVAZ9R3vMmKgiJdz1xSVwGfAzcN9MoTZM9wOOPtTx6fH/6T1wEYeTwvIjIlVNLfbHIAz09rI87JE5dhiHUAbwFvAm0zpRS6OyQG9qw5vo1/d2uc3HM4WINY6+fF4z3Z+uLyxYtpjUV1XYYir1bD7wMPAOkagWNiKJfM7/senbRM9/2eX1FX56vMqSVAy1hJiBCBIi8gyPm1FZTTY69Ow6sp3zeeogal1Iuletct+DtQ31eb5OHb7Lp1URlc1L5UuZvFSwJxdZaisIFYKCL8lLoqKXvOVcobG74dPfvmX15D1+GRVYOeaxWvppFYJGZIjNMqB5pQc2wMbCAbcA7wHiSPiVKwU/ZHb9vbtjU4XAJj+NmSCazbjnXNiPYWELgI+AbrpB6hDiSPnxs3YK1B87b+SgBqAFO5e8OBx384DKZM7PdR+aB14SWA3dVgujzens3NK7f3ZXqHL/0GRkYUjwvI0IaB9ox+xs4lc9mRxtLpZo2Mv+ZuhF79FCJ0psh4cjlnitSnPx63le7t2e39xo21a8cXuEkAykAxoBOwXbP9z8RbHm4s/MYMHpjoUCuvX12X2Ti7BB1e93fL4oWfeTknnS4CzZDgnBvZs+BTxs2Hg+sJA/PAJOEmZ03GJPIA13OrC2EfhnBcH9/eE1TEz8uXcqJXO7CeLM+ThjGPrevgOP95qD57nrV3+9wCNHld538oPG9P077p4u+fE+oBOTNrA84a2an/JR/BlGKogArhcL3aL7pJg7/9dclY83J2eee0j3qSHUcGnbDb6TD9BKHax224ZEvGj7/bVd2Z2+KurwZZ5FOC3qy6XTvxORksTxb44ZV97Ft48YEjplD2dKwJbNiYsVLTWHTE3syu3e+uPj5TXk31OHkBj2zwqm6urHWYpF0XR1H29pqtj93p0pgYbCw2Ol3vp6JMpsPp4/kc5ncoN81XGxsuRlJPDgwwPeDgzO2/w/IRTXCFJZFPwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6MTMrMDA6MDAaVk9UAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABfVJREFUWMO9mE1sXFcVx3/nvnn2PI/leEZDHSNQ04gUUgGVQIIGqQuqgMSuYtEFRUoqNlRIlVixoKiqukIIwgZVhEr9CAS1Vj+Q2oJE+EijpmnTNiRNaxKnSWyntmM/z0wyiXnjmXf/LGZchXbGvHECR7q6i3vPub93znnnnveMDUq9XqfVaiGJarVqo6OjZTPbBOSBHNACEkm1hYWF5fHxcQE45xgdHd3QmbZR2DiOGRkZsXq9fhuwA7jTzG4HNgPDwBVgQdJx4BXgSD6ff6/RaKhUKv3/YKvVKmmabnbO3QN8B/hqBrUjwH4zewa4WCwW/7ewcRwTBIEBn5X0I0n3mNlQHyZWgGfM7KfAKUD9QOf6gfXem3PuM8AjwN1m1pe+pCEz+25n/rFz7n1AWfVd1o2VSoUgCEYlPQDcLakvUAAzo6P3bUkPeO9HK5VKZv3MsEBgZncBu4Gc2cbezY5eDrhP0l1AcENh4zhGUlHSD8xsuNseST1HDxmW9H1JxTiOM8FmDaUDvgh8pReomSkIgoUwDAMzG5VUazabaZqmmyVZj0jsAL4A/J0MuZvJs2bmgG8Agz1AfRiGy4VCgSiKCvl8PoiiqFAoFAjDcNnM1MPDg8BOM8uUCplhzey2Xkadc5eiKKoHQTAGFGjnYSEIgrEoiurOuVoP0wHw+awcWdPAaN9MXWPpnIucc0GXQ51zruScG0zTtJfdMTLW+37KT349O72S0swG6fHGd1SirAD9lK5LvRYkXZEU91iLJV1dR7e2TsXoH1aSlzQlqWss0zTNNxoNL6n+Eb16o9FQmqa9vJea2Wkz8zcM1sy8mR02s2aXNSTlkyQZS5Jk0Xs/671PvPezSZIsJkkyJmmwh+kmcCQrbKacdc75NE3/BsyZ2dZuwN77gSRJtjQaDWjn6Cc7l0KwtqeLzEn66w31rNoyD+yX1NVwx8OB9z7w3uO9DyQFZtYVtGPnd865BTI2M5kv+DiOMbNbgSfN7I6seus44LUgCHbvvvfe08dPnsR5SL0jCDzeGQYMJQl3LizwaEcnc+kql8tUKpVzwC+BPcD4dYDOV6vVX+/atWtp8cKFmzocrjNSwAOrgpWlaCi59RM3MR76/prvTjs3BDwE/BAI+wBcy23/xuuvv/LQgw/+YSmOk5xzObUhrR1oCTMBHtFCVB28a05TffWkpVKJSqWyAjwq6XYz+yYZU2ktb6enp8//Zu/eE0tLS8UgCExm1xhQ25zUntr844JbUvHnfi6FD4GBaTPbA5zLWtABLtVqtecmJg7/4+23q0EQyMy8tUPeGdaezTyYN5M3w4SGkEb7hu0Aa3h4+ADwKzNbyaLTarVahw4devO5Z58955wjW/NuhmQym5NzUxuCBQjDMDWzJ4AXtI571xrwycnJycf27j22urrqM4Aa4AQJcNzByy6f/6Dv76g1qdfrrK6uVsMw/JmZfU7Sl7pBmBmLi4sXn3z88cMXZmdXPr5HBkbncYXhkVaAM5idAmarUXRlU7PZVyPzHzIyMkIYhnLOnWg2m3vSNK2vefLaudFoNF5+8cXDhw4evHjNBdEOr3CSgdQCrgLnBX8Jcrl9gj996/z5SeDKp2s1zp4509+n+EelVCpRrVb9/Pz8S+Vy+Qnn3P3Oudw1ZSp96+jRYxNPP3261Wqp88/BOuurBlclqsC0M5tKYUlG6/LSUlooFvnj1q28f/bsh+ddFyxAsVjkwIEDNUmPlcvlL0dR9DXn2gGbnZmZ+e2+fW/Nzc0luVwukNQEqma2CMyb2WwuzH2AaHrfwpqpyAWUb76Zk++887GzrhsWYOfOnTp27NiJer3+i4GBgVucc+OXL1+uv/D882+89uqrF3MDA1WDeaQLgoVocPDivxqNBAAzPrXjDg489dR/PWfDP+a6ycTERH779u0/2bRp0/fePHr04CMPP7y/Vqudc2bLgVltdmDg6niSMDgwwHtTU33bvyGeXZNSqZTMzMz8fNu2bb//5+Sp6vT09HJQqyUjW7Ygia/HMS8tL2/Y/r8BRVECE4yt2dgAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjMxKzAwOjAwz+xZAAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABihJREFUWMO1mF9sW2cVwH/n+6597aRVbLykf0S0iiJGpwLSGkGHtAcmQOINDWlIEw9DvIAmTeKhoAnxgHhCCFVa1UIRDxBEkaZ1He2YUCnQDalUqdextmvnpUs60sVxbMdO4tROfO93eMhNadO4vXbLka6u7v3uOefn853zfeez0KMUCgWazSbOOWZnZyWXyz0EDIhICvBUNRCRFlDPZDLVubk5tdbi+z67d+/uyafXK+z8/Dy7du2SQqHwaC6Xexx4AvgcsBXYBDSAGeCder3+pjHm7NDQ0OVSqaS9+pRelPL5PM65rcaYp4FngC9s9J3q/7hE5CxwREReUtXSyMjI/xd2bGwMa62o6iOq+kPgaaBP5N5mVBURuQG8BPxMVQvGGN2zZ09s/12lQRiGYoz5JPBT4OsiEls/+kF9qvotEekTkR+JyAdA7LQw3UTV87yMqj7fLeg6aE9VnwKeV9VMPp+PrRsbVkQs8CTwLPdRmGvAwLdV9UlVtQ8UNiqoLPAcq5V+h6gqqopz7ua19q6DbAK+a63Njo2NxYKNGyFjjPmsiHy+Eyig/f39MwMDA9bzvEwQBPX5+flwaWlpq6pKhyJ8PAzDzwCniZG7sWBV1QBfUVV/vdMI1GUymbnh4WF83+8HLNCfy+UWpqamqvV6PbcRsKr6wJdF5J9AcM+IxY0s8GgEcYekUqn57du3L/q+vwW4Cev7/pbofb2DXQvsjssRK7JRSLbSYV1OJpPpdDptN3Bq0un0x3zf95eXlzc0DWwh5nrfTVWnNnoZLfZep6QUEV9EbPTd+jGAdFyA2EsXMN8BhiAIGkEQVDYaD4KgEgTBUqddTlXrd1kxuodVVaeq40C40Xiz2UyVy2Wnqovr9BbL5bI2m81O0QtF5H0RcXE44qaBA86o6jPR5nBbZJ1zqVKptCUMw6nBwcG6MWbQOVcul8srlUpl2DmX3CiyqtoGzkb2Hwysqjpr7T+cc9PAJ9aPR6mQLJVKOyqVCqxW+fYwDFFV2ykFRGQa+HsYhrFg4+ashmFYBI50ioKIoKo2CAIbBAFBENi7gUZ2/gDMiEispI3dIkbt4adU9XfA3rh6d5F/WWuffWHfvvcL4+MYB6EzWOtwRhCgr9XiiZkZftktLMC5c+cSIvIUsB/Y1iulqhYXFhZe+MG+fccXqtVEAJ5xmNAZY60LnREnsJJutW7sml9oXRgcYlvCddc9iUgbOAE8BnwfSHQBuFaM7uKFC4WDL76YrdVq37TGeAYMBrFmtccwq32Ca/mp4O3BVM3Au8VQxrs+1kT95w7gV8BXu52d69evTxw+dOi1K5cv1z3PE73NQPSkGt0EwAk0HfrXbjYFAKKz04equl9VJ7vRXVxcrJ86efJM4b33atZajUAcNy9ZvYs4ECeiTgRRtA/VTNewEbA2m81TwEFVvRFHJwiC4Hw+nz918uSkiBDn3AYiqIqKTKsx4z3BAjQajVBEfisir3KXXnStAZ+cmLhy9OWX32632y4GqABGoQW8Y+B1k0p91PPxZGhoiGQyWVtZWfm5qn4aeGwjCBFhbm6u9Kdjx87MFIs37vxGBYSoPVAEx+psXUWkAEzV0unGQLvdVSNzm4yMjNBut1VVLwRBsN85t7gWyVvvK8vLy2+ePn3mrXy+dMv0r06vYlQFVANgCbim8Dfreb9X+MvXrl27AjSG63Umrl7t7U+OWyWfzzM9PZ3NZrM/8X3/e8YYb22ZUtXw3+fPn/v14cNvVCuVljFGAInGV4AlVWqCfihixkMoqxA0q9WwP5sFa/lgYuKmr/s6pa5FeHR0tC4iv8lkMntSqdQX16a6WCz+57UTJ94qz862rLU2alxqIjILFEVkykt4H6G0nQuQdqh4locefphLFy/emVL3C7smx48fJ5FIfCObzR7wPG9bo9FYfPWVV14/dvTou14iURMoonpdYaYvlSo1l5dbIoJNJPj43r2cGh29p48HBgtw4MCB1M6dO3+8efPm71y6eOmNw4cOHllYXJw0IlUrUp9KJpe2tVr4ySSXx8e7tn/faXCrZDKZVqlU+kUymfzj5ORkbbpYrJpqtbVpxw5UlS9VKvy5Wu3Z/n8BcY8RVtNG93EAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjEwOjQwKzAwOjAwY15brQAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABh5JREFUWMO1mF9sW3cVxz/nd23Xf26bhFGaNEyNKrTB0lFpD9Ah7QEESPRpAimVKA9DvIAmTdoTQoiHiidUsWpCZTxVMESJHG3lb4VEl64gteWPuiZjTZrUdqZQ203sxk7s1H/u/R0e7FTpZqfXXvlK1pX98zm/zz3n/H6/c6/Qp86cOUM0GsUYw+joqOTz+Y+r6oCqRkUkBHhADSipalFE1HEcYrEYR48e7WvOUL+wruuSyWRkbGzsqVwu9yzwHHAYGAZcoALkgRkR+RtwdXx8/Mbs7Kz2O6f0Y5RMJlHVYWAC+Cbw+fsOpavLq8BZEUlaa+8cO3bs/wubTCYREVHVJ1X1+yIyAcSD2KoqIrKpqkngJ8aYm6qqExMTgefvqQystWKM+RTwY+D5XuzbEY8D3xKRuKr+UERSQOCyML1E1RgzCLwEPN9eRD2rbfd14CVr7eDk5GRg28CwquoAXwJe6CWiXRRS1W+3/TmPFHZqagpjzBDwIq2V3ulmUFWstfi+j7X2/m9d5ALfFZGhoNENGiEDfBb4XDdQEdGhoaH8yMiIE4lEBhuNRimXy/l3794dVlX54C4hIqjqs8DTwNsEqN3AsKr6FWBXJ1DA7t+//+7hw4dxXTdBK7WJAwcOrF+/fr2YzWYf6wTc9vdl4O+0DpGHRuyhUlUDPEWX+nJdtzw+Pr7huu4+4D6s67r7Dh06tOG6bqmLawc4JCKBOILCSvsQkA5jJBKJ2MDAwGMd/JmBgYGPJRKJWKfalZb2yQ4nyXYFKoO2r2jXOzYm1G1CEdlljNlpxceCMASObFvlbgP1er3SaDQKncYajUahXq9Xu9mqammHHaMvWAssAn6HyFEul6PpdNqq6sYHQDZSqZSWy+VYl8D7IrIgIjYIRNDdwAKXaTUtD6RURPB9Pzo/P7+v0WgsHzx4sBQOh/c2m83VdDrdSKfTj/u+H+kC26TV4Dw6WBGxqnpRVbMicrBTdBuNRmRhYWEslUphjHGstfvbh4PTbf2oalZVp4NGNmgZqLU2B5xV1Y6ORQRrrdNsNp16vU6z2XR2Am1H8zcikheRQEUbuEWcnJxERJ4AfiUiR4La7aArIvLCz199dWFpeRljwbcGx7FYIwgQr9V4Lp/ntV5hAZLJZJhWx3QKGOmXUlVzlUrlB6deeeUP9Uol7EHIWIxvjXEc61sjVqARq9U2P1Ner83u/QQjYdtz99QE/gg8A7wMhHsA3OoH7OLCws2pycmh6vr6MceYkAGDQRyjAGpafYKt7Yp67+yNrhl4L+fLYs+PNclkEmBMVX8BfDXo6bOllZWV9JtTU3/KpNMlx3FE2Z7e9jfV9kUArMA9i/61l0MBgPZjyPu0SiHTi+1mtVr655Url5cymTVjjLZBLPc/0rqKWBArolYEUTSO6mDPsG1gHRwcvACcVtXNIDa+73vzc3P//sfVqxkRIVhCRFAVFcmqMYt9wQKMjo76qvpL4Hfs0ItuNeDZ27fn3rpw4R3P82wAUAGMtt47zBg4b6LR230/nszMzBCLxdY8zzupqp8GnukEISKsl8t3Ll28eLlYKGx++D8qILTbA0WwtLJ1C5GbwPJaLFYZaDZ7amQe0PHjx/E8T4FZz/NOWWs3tiK5/dpsNuvXrl27PHfjxp1t6W+lVzGqAqoeUAWWFN5yQqFfK/zla0tLc0Dl8VKJ9K1b/b3k2K5kMkmhUBjavXv3iXA4/D1jTGjbNuUvzM//69wbb1wqlUo1Y4wA0h5vAFVV1gR9X8Qs+rCqgnevWPQTQ0PgOKTS6Qdq4yPr5MmTEo/Hn96zZ89rkUjkC1upXl1dzfz+3Lnzi/PzBeM4Dq19ek1EVoCciCw7odBtlKa1Hn7TVw05xF2X/7z77odL6lHAApw+fZpIJPIN13V/5jjOyL3NzY2L09Pn356efs8JhdYEcqj+VyEfj0bv3KvXayKCEw7zySNHuPD66w+d45HBApw4cSI6PDz8o3g8/p3UrdSlN6eSZyvVasaIFB2R0nIkUh2p1dgViXBjcbFn/x/1ZcUDSiQStWKx+NNQKPTbbDa7tlooFGVlpRYfG0NV+WKhwJ+Lxb79/w9bQvQtKYEySwAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMy0wNS0yNVQwMDoyODo1OSswMDowMDPIuVsAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjMtMDUtMjRUMjM6MTA6NTArMDA6MDCv9FszAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAABJRU5ErkJggg==",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABjJJREFUWMO1mE1sFOcZx3//d9beXePixQvCpFSp0qopNGlFKlGn2EhF5VIulSqlUsQhqDduPfClqqdeiEJPPeTApY1UKuVUCcIhaikpBrxRKEmJ7RrMR7CNd8GuP3a9O/bszNPDrhE4Xjy7oY80GmneeZ/nN8/832eed0SLduLECaIoAqCtrU1BEGw2sy5JKSBhZlVJPjCXyWRmZmZmLIoiisUip0+fbilmolXYarVKKpXS0tLSziAIXgf6gR8APUAnUALywGdzc3P/dM4NDgwMDO/du9dajalWJh09ehQz65H0hqQ3gR+ZGdLT7sye4hoEzpjZ+2ZWOHXq1P8X9siRIwCS9DJwDHhDUkfc+WZWBt6Pouht59yoc85OnjwZO36zMhDwbeB3kn7e7HxJHWZ20DnXIek3zrnbQGxZeE1mdZOk48BBSS3pXZKrvxnPzAb7+/v9gYGBWHNdE3E8YB/wVqugT1gCOATsM7PYCYt14/HjxwGykt4BXl69kKC2mMyMMAyJouhxWatncy237UC3c+6Dvr6+cpzsxs2Qk/R9YPdag/VKYNu3b8/v2LHDS6fTmUqlMjcyMhJOTEz0mJkaAL9uZq8CF4mh3ViwZuaA/UByLVAg2rlz538PHDhANpvdQO2Nbdi1a9fCuXPnZoaHh7MNgJNm9lPgElBdN2NxYc1sJ2vIxszIZrPz+/fvL2az2a3AY9hsNru1fn1uVc1dMc/MXqknY12LdZNq1sMaddnM6O7uTvf09GTX8Oe2bdvW3d3dnW4AK0lbG2lktTWzqlMNn9i5RKOAkpLOuWct5HRcgGZK13yjgXK5XKpUKtMNxqYXFxcX1xqrV5BGEmkZNgJuAeGXHDhHPp9P5XK5KIqi4lOToqg4ODhohUIh7dyaoULgZt3/uhZXBhFwBXiTVYtMEkEQpC5evLi1UqmM7969ey6VSm3xff9RLpdbzuVy3wiCoL2BSgJqDc7zhZX0DzN7ALy0elASlUql/dKlS98cHBzEOedFUfRCEASEYeg9Y/08AC6YWSzYuDIwM5sCzjTKgiTCMPR83/fK5TK+73vrgEaS/kyt540l2tgt4rFjxwC+A/wJ6I077xl2VdJbFz788OajmRlcBGHk8LyIyAkBHb5Pfz7Pu/UJsZuIy5cvs2fPngVJ88Ae4GutUprZ1NLS0tvnzp69XikWN0bQJaPLTBnnrNOkTkEyUa3SEUZh9YWv65XNG5vrniQFwFngNTP7taS2FkCjQj4/+kkutynw/V86KeHA4ZDnDMBcTRaRn0xVr29JzToYmgp1K3ZmV7Lb19cXAGOSvgd8iyZ3G8WFhbv//vTTSwvz83LObTRpg6SO2mG1s9kGiU7QRsRmxEshlJqCfQJ4HngE7DGzTTG/liwvLc3dGh39+8T4+ANJSDLVslg/VDtLBjKp1v0Y1oZZoWnYFeB9+/bdq1arDuiPI4coiqqTExNXhoeGblitBYsRScJMJj0wKdfM5/Ypy2QyoZn9UdJfWaf0mBmzs7Mjw8PD18MwjGKACnAGPvCZg/MulZpseXsyOTlJV1fXbLlcfsfMvgu81gjC9/3CzZGRK4vFYnmNRxGIentgiIjaLngMaRQYn02nS11BEL90rbarV6/S29uLmT2MomgR2C8pufL/YOUcVqtLd27fvnBnbOwOPN7i1F4vciCEVUEVYNLEJ4lE4mIURUM/++KL/Fgms7xlcZGR+/dbhwUYGBigr6/PSqXSuOd5m5xzP5TkngAOHxYK14Y///xfQRBU622kq+8aAokFYEpww8l9FEk5k+4vTk8X29Pp6lg2y+1798iXSo+18ZXt0KFD6ujoeDWZTL6bSCR+vCKH4sLC3evXrp0v5PPTkjxqjcuspIfAlKRxL5GYxAiiqEoYhGYJj47OTj6/ceNLcZ4LLMDhw4dxzv0inU7/wTm3bXl5ufifoaHzoyMjQ87zZoEpzCYM8h2pVKGytORLwmtrY3tvL3977711Yzw3WICDBw+mMpnMb5PJ5K8eFgofXfv44zNLy8t3BTOeNDfe3r64zfdJtrczfOtW0/6/6s+KpyyZTPqlUun3nuf9ZW5ufnaxXJ6JJif95IsvYmb8ZHqaD2ZmWvb/PzZaBDRi9tDdAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowMCswMDowMAjWPmkAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABixJREFUWMO1mE1sVNcVx3//+549Y2MMDkTMTBHCNgpVmlApi2IagVQ0SFVXlYpSKcoC1BXLrlKp6qLqKoq66gKpqzZSqciGSnXYuEVJIwWjVkIRkAhMBtt82MYej8fz4fHMe/d0MQZR8Mcbhx7p6S3uu+f87rn/d+55T2zTTp8+TbVaxXtPqVRSf3//XmCXpDQQAhHQMLOl2dnZYjabtTiOWVlZYXx8fFsxw+3CLi4ucuTIEd28efP1/v7+Y8Bx4PtABugDqsAs8GUmk/mXmY1PT09/NTg4aNuNqe1MyufzeO8zzrl3gHeBo1vNMbNx4IKkj733c1euXPn/wp48eRLnnIDDwPtm9g7QKyV2Uzezj83sA0m3nXM2NjaWOH5HMjAzmdkhSb8DfiqpUxn1Au9J6pX0a+AbILEsgqQP5vN5gAFJv5L0npmFHWT0qUlykg4DgaTx4eHhRqFQSDTXdRAkkHQSOANsC/QZC4GzwElJiROW6MFTp04RRdEeSR+uZeUFMzPMjCiKiOMY7z1PFrTBwrqBV7z3nwwPD9eTZDep5pxz7oikH2wECtjhw4dnR0ZGgp07d+6uVCpL165di+/cuZMxM60HbGbHgDeBT0mg3USw3nsHnDKz1PNB10D9sWPHFs+dO0cul9tBe8d25PP55fPnzxevXr26Zz1gSSkgD3xO+xDZPGNJMwu8zjqyMTNyuVz57NmzlVwutw94CpvL5fadOXOmks1ml9YW9bwFwBtJORI9pLZl1ttL7z2ZTKZncHBwzzr+3NDQ0CvZbLbHe7+ua2AfCet9J3UyvaGTMAy1wVskKRUEwWYvck9SgMSlCyhvAEO5XK5Wq9WF9cYrlcpCuVyubVLqll4qrJl5M5sws/gFB84xOTmZHh0d9d77yrNj3vvK6OioTU5O9ji3bqgYuAN4EliiOjs0NCRgD/Dj549YSbRarXBiYqKnVqvNZDKZmvc+tbi4OHPx4sXlS5cu5er1emoD2CbwR+B6oVDYsnQlEnY+n5eZDQJjkoY2yD5hGMapVIogCII4juPV1VWiKAo2kUAByEuaHBsb2xI2qWYNmJF0gU22LIqioFarBcvLy9RqtWALUA/8RdIsCZuZxAd8Pp9H0mtm9mdgJOm8TeyqpDOPpqfv1BsNnIfYO4LA450Q0NtocHx2lvNrExI3EYVCgcHBwWVJZeBtYOe3AJ2J4/iDyXv3rvtWq9/DLhm7zLTbOeszqU+QCqOI3tjHUe47emNvf2f9qKQW8Hczewv4paSuTinNzDdWVm7Pz80NEMc/NwgdOBwKXLvHcG1Z+EYqHV1/NV1ycGsm1kTizD7J7tDQUAu4K+l7wDAdSMmAVrN5b7FY/LzVbEpSv0k71prxXsnad7MdEn2gfsRexFAM1Y5gnwAfOnSoDMwDb5vZQNLe1sfxUmVp6Z+1avXR2k6Z2mtYu9S+SwYyqd39GNaF2VzHsE+ADxw4MCnJAceTyMHMolq1+kW5VLph7RYsQSQJM5n0yKRrnRy3/2NdXV2xmf0J+BtblB4zY3V19eulUum6994nABXgDBrAlw4uu3T64bb/GzSbTXp6ekpRFH1oZt8F3toIwsfx3HKp9EXUbNbXWYpArHWQhvCY1YG7SLeB+6WenuquVit56XrepqamOHjwIMBjM6tJOrXWTD/NpiTM+9Xl5eUrlXK5AE8/cdrbixwIYRFoBXho4j9hGH7qvb/1k6mp2bu7dzdfrdX4enp6ez85nrV8Pk+j0Rjo6ur6rXPunKTwKahZ3KjX/73w+PFnURQ11tpIrY03gZoZJWFTkpuIYd5EtFIsxjsGBiAI+OaZb7NvDQswMjKi7u7uN8MwPC/ph0/k0Go27xXn5y+v1OsLtA+gFlCS9Jj28X0/CMOHGC3vI+JWbBYG9Pb1cfPGjRfivBRYgBMnTiDpZ2EY/kFSNo7jSnlx8fJSqXTLOVcCZjB7YDDbm07PrayuNiQRdHWxf2SEf3z00ZYxXhoswNGjR9PpdPo3QRD8olFf+aw4//hCFMf3BMVAWrrf3V3LNhqkurv5amKiY//brgbrWRAEjVar9Xsn99dms1WKvC/6Bw8awf79mBk/Wljgk2Jx2/7/C8D87PcyjeWGAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIzLTA1LTI1VDAwOjI4OjU5KzAwOjAwM8i5WwAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMy0wNS0yNFQyMzoxMTowOSswMDowMJ1Oe7oAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC",anchor:[.5,1]},{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACsAAAAgCAYAAACLmoEDAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA3XAAAN1wFCKJt4AAAAB3RJTUUH5wUZACIpx2TIswAABNVJREFUWMO9l8trXHUUxz/nd+/NPJK5k5kmzbRG2iRWijZmESit0qUbaVb+A0JXLhRclK5EVETcuNCFLQhiF4K4asFVtbT1UZ8JsSbBzjQ1qU3zntQkzCRz7z0u7kRazKSTzI0HDhd+j+/5/n7n/M45V4hGBGgD0kAcsAEPKANLwAKgURhpdP9TwHHgBNAH5IAWYAWYBoaBa8APwGgUpHciOeDVKgmtQ68DrwAd/ydJAQ4DnwCrdRLd0NXqvsM07tW6iB4CvgAq2yS6oRXgc+CJ3SacAT5sgOiDhD+o4u2KWMCLwHKDRDd0uYpn7QbZNuByREQ39FIVty6x61xngGeAo1us0f7+/umBgQErk8m0FovFpYsXL/qDg4M5asfmcaAXuEKEKc0G3qVGrIqIPzAwMFcoFKZUdUVVPVVdyefzUydPnpwDAmrH7jvbuLS6pAm4UMtoT0/P4vDw8Liq+vqw+ENDQ+Pd3d2LNcgGVdymekiYOskKYRHY1J0HDx5M9Pb27tkEz/T19WW7uroSW+B2UGcK2871x2tNOI5ji8imBkUk5jjOVi8+QZ1S780C3K81MT8/v1IsFuc3m1tcXJyfm5tb3QJ3KWqyAZAH/M0mR0dH4+fOnQt8319+cNz3/eWzZ8/q2NhYrdvzgZtV/MjEAk4BJWrkzHQ6vXbmzJlCoVCYnJ2dLRUKhcnTp08XXNddo3aeLVVxIy0MAnQDt7YwrLZte67retlsVl3X9Wzb9ti6KNwCutiFHiEBvE3ouiiqlw+8xTYe2HZP9CTwKXAsgsNfB156PJe7acdimAD8wGBZAYERBEiWy5yYnuaj6obtxsrfhFnhOSDVANF7xpj3Ojs7h+KO4waQFiWtKq3GaIuKtAjEbM8j6Qe+t/8xOdLmyk5iJQm8AbwGODvYHyTj8Wt729sv2JZVRtXWMCtJ6GhVRMLqpngoRQMjYjS/k1dYAQrA00AP2wwlx3Fut2Wz38SamgRwVaRZRJKhavhVbRahBcRFaEPo9mFlpynjPjBHGA51N9DGmKVMOv11qrl5qjqk8tCjk/AroiAqoioioqiD6kwj+e1PQvedoL5w8FqSye/3ZDI3JHRzHSKCqqjIlIr82AhZBf4gzL9HeEQ4xGOxkfZs9lvLstbrYQkYhbLAqIhckXj8bqOVo0yY2I8C+2otsixrZk8mcykRjxc3ObOAiGr1sEKA6iowgsh3AoPFZHI+5nkaRZmbJfzFfh6IbXJFa67rXk6nUuMPNGahexEDgqAeSAm4q8Ivtm1fCYJg5IWJielCa+t6++oqY5OT0ZQ5y7IyQRC8qaov83Db6Sfj8Z/3trVdtW27HHJHVBURWQdWVSkKOiFi8j7MqeCVFhb85kwGLItb4+P/gkXyO2GMWTLGfOx5Xr+qPrsx7tj2ZGs6/att22VVtQjTXlFEZoF7InLHduy7KJUg8JCKr9gWbQcO8PuNG/+xEwnZSqWijuP8Zox53/f9LmCfEVl2U6mfkonETJXgPVT/UphOxGIzpbW1chgQQufxY3x1/vwj7UTa7aRSqXipVHrd9/1TyXjiasfe9s+MMbdRXbBElu40Na3uK5eJNTUxms9vGz9SsolEAlXNVtYr+9NuupjraF+oTEyUNZfDAIeWl/lyYWHH+P8AZ0RW2q2R2psAAAAldEVYdGRhdGU6Y3JlYXRlADIwMjMtMDUtMjVUMDA6Mjg6NTkrMDA6MDAzyLlbAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDIzLTA1LTI0VDIzOjExOjE5KzAwOjAwUeR7JAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAAASUVORK5CYII=",anchor:[.5,1]}]},logger$u=LoggerByDefault.getLogger("DrawingDOM"),DrawingDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPdrawing"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowDrawingPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowDrawingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowDrawingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-drawing fr-btn fr-btn--tertiary",e.setAttribute("aria-label",this.options.labels.control),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowDrawingClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowDrawingClick(ke)}),e},_createDrawingPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPdrawingPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createDrawingPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createDrawingToolsDivSections:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__content fr-px-3w fr-modal__content",Oe},_createDrawingButtonsPluginDiv:function(){var Oe=document.createElement("div");return Oe.className="container-buttons-plugin fr-mx-2w",Oe},_createDrawingPanelHeaderElement:function(){var Oe=document.createElement("div");Oe.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var e=document.createElement("div");e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=this.options.controlLabel||"Annoter la carte",Oe.appendChild(e);var t=document.createElement("button");t.id=this._addUID("GPdrawingPanelClose"),t.className="GPpanelClose GPdrawingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",t.title="Fermer le panneau";var ke=this;t.addEventListener?t.addEventListener("click",function(){document.getElementById(ke._addUID("GPshowDrawingPicto")).click()},!1):t.attachEvent&&t.attachEvent("onclick",function(){document.getElementById(ke._addUID("GPshowDrawingPicto")).click()});var Ge=document.createElement("span");return Ge.className="GPelementHidden gpf-visible",Ge.innerText="Fermer",t.appendChild(Ge),Oe.appendChild(t),Oe},_createDrawingToolsSections:function(){var Oe=[];return this.dtOptions={},this.options.tools.points&&(this.dtOptions.points={label:this.options.labels.points,active:!1,panel:"draw",id:"point"}),this.options.tools.lines&&(this.dtOptions.lines={label:this.options.labels.lines,active:!1,panel:"draw",id:"line"}),this.options.tools.polygons&&(this.dtOptions.polygons={label:this.options.labels.polygons,active:!1,panel:"draw",id:"polygon"}),this.options.tools.holes&&(this.dtOptions.holes={label:this.options.labels.holes,active:!1,panel:"draw",id:"holes"}),this.options.tools.text&&(this.dtOptions.text={label:this.options.labels.text,active:!1,panel:"draw",id:"text"}),this.options.tools.edit&&(this.dtOptions.edit={label:this.options.labels.edit,active:!1,panel:"edit",id:"edit"}),this.options.tools.display&&(this.dtOptions.display={label:this.options.labels.display,active:!1,panel:"edit",id:"display"}),this.options.tools.tooltip&&(this.dtOptions.tooltip={label:this.options.labels.tooltip,active:!1,panel:"edit",id:"tooltip"}),this.options.tools.remove&&(this.dtOptions.remove={label:this.options.labels.remove,active:!1,panel:"edit",id:"remove"}),(this.dtOptions.points||this.dtOptions.lines||this.dtOptions.polygons||this.dtOptions.text)&&Oe.push(this._createDrawingToolSection(this.options.labels.creatingTools,"draw")),(this.dtOptions.edit||this.dtOptions.display||this.dtOptions.tooltip||this.dtOptions.remove)&&Oe.push(this._createDrawingToolSection(this.options.labels.editingTools,"edit")),this.options.tools.export&&Oe.push(this._createSavingSection(this.options.labels.export,this.options.labels.exportTitle)),Oe},_createDrawingToolSection:function(Oe,e){var t=document.createElement("div");t.className="drawing-tool-section fr-mx-2w";var ke=document.createElement("p");ke.className="drawing-tool-section-title",ke.innerHTML=Oe,t.appendChild(ke);var Ge=document.createElement("div");Ge.className="drawing-tools-flex-display";var Be=this;function je(Qe){Be._handleDOMToolClick(Qe,this.id,Be),Be._handleToolClick(Qe,this.id,Be)}for(var Ve in this.dtOptions)if(this.dtOptions[Ve].panel===e){var Ze=document.createElement("button");Ze.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",Ze.id=this._addUID("drawing-tool-"+this.dtOptions[Ve].id),Ze.title=this.dtOptions[Ve].label,Ze.addEventListener("click",je),Ge.appendChild(Ze)}return t.appendChild(Ge),t},_createSavingSection:function(Oe,e){var t=document.createElement("div");t.className="drawing-tool-section drawing-tools-flex-display fr-m-1w";var ke=document.createElement("button");ke.title=e,ke.className="tool-form-submit drawing-button fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",ke.id=this._addUID("drawing-export"),ke.setAttribute("type","button"),ke.textContent=Oe;var Ge=this;return ke.onclick=function(){Ge.onExportFeatureClick()},t.appendChild(ke),t},_createMarkersChooser:function(Oe){var e=document.createElement("div");e.className=Oe.className;var t=document.createElement("input");t.type="checkbox",t.className="gpf-custom-dropdown-toggle",t.id=this._addUID("gpf-custom-dropdown-toggle"),e.appendChild(t);var ke=document.createElement("span");ke.innerText="Sélectionner le pictogramme :",e.appendChild(ke);for(var Ge=0;Ge<this.options.markersList.length;Ge++){var Be=document.createElement("input");Be.type="radio",Be.name="gpf-dropdown-radio-style",Be.value=this.options.markersList[Ge].src,Be.className="gpf-custom-dropdown-display",Be.id=this._addUID(`gpf-custom-dropdown-display-${Ge}`),e.appendChild(Be),Ge===0&&(Be.checked=!0);var je=document.createElement("label");je.htmlFor=this._addUID("gpf-custom-dropdown-toggle"),je.className="fr-select GPselect gpf-select",e.appendChild(je);var Ve=document.createElement("img");Ve.src=this.options.markersList[Ge].src,Ve.alt=`Option ${Ge+1}`,je.appendChild(Ve)}var Ze=document.createElement("div");Ze.className="gpf-custom-dropdown-options",e.append(Ze);for(var Ge=0;Ge<this.options.markersList.length;Ge++){var Qe=document.createElement("label");Qe.htmlFor=this._addUID(`gpf-custom-dropdown-display-${Ge}`),Qe.className="gpf-custom-dropdown-option",Ze.appendChild(Qe);var en=document.createElement("img");en.src=this.options.markersList[Ge].src,en.alt=`Option ${Ge+1}`,Qe.appendChild(en),Qe.addEventListener("click",()=>{t.click()})}return e},_createStylingElement:function(Oe){var e=document.createElement("div");e.className=Oe.className;var t=document.createTextNode(Oe.label);e.appendChild(t);var ke=document.createElement("input");try{ke.type=Oe.type}catch{ke.type="text"}if(Oe.type==="range"){e.dataset.frJsRange="true",e.title=Oe.label;var Ge=Oe.defaultValue;Ge=Math.round((Ge-Oe.min)/(Oe.max-Oe.min)*100),e.style.setProperty("--progress-right",Ge+"%"),ke.addEventListener("change",Be=>{Be.target.parentNode.style.setProperty("--progress-right",`${(Be.target.value-Oe.min)/(Oe.max-Oe.min)*100}%`)})}return ke.id=Oe.id,ke.value=Oe.defaultValue,Oe.title&&(ke.title=Oe.title),Oe.checked!==void 0&&(ke.checked=Oe.checked),Oe.min!==void 0&&(ke.min=Oe.min),Oe.max!==void 0&&(ke.max=Oe.max),Oe.step!==void 0&&(ke.step=Oe.step),e.appendChild(ke),e},_createStylingDiv:function(Oe){var e=document.createElement("dialog");e.className="gp-styling-div gpf-panel fr-modal gpf-visible GPelementVisible";var t=document.createElement("div");if(t.className="gpf-modal__body fr-modal__body",e.appendChild(t),checkDsfr()){var ke=document.createElement("div");ke.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var Ge=document.createElement("div");Ge.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Ge.innerHTML="Modifier le style",ke.appendChild(Ge);var Be=document.createElement("button");Be.id=this._addUID("GPdrawingStylePanelClose"),Be.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.addEventListener?Be.addEventListener("click",function(){Oe.applyFunc.call(this,"cancel")},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){Oe.applyFunc.call(this,"cancel")});var je=document.createElement("span");je.className="GPelementHidden gpf-visible",je.innerText="Fermer",Be.appendChild(je),ke.appendChild(Be),t.appendChild(ke)}var Ve=document.createElement("div");Ve.className="gpf-panel__content fr-px-3w fr-modal__content",t.appendChild(Ve);var Ze=document.createElement("div"),Qe=null,en=Oe.geomType.toLowerCase();switch(en){case"point&text":case"point":Qe=this._createMarkersChooser({className:"gp-styling-option",defaultValue:Oe.initValues.markerSrc}),Ze.appendChild(Qe),Qe=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.markerSize,title:"petit, moyen ou grand",id:this._addUID("markerSize"),min:5,max:15,step:5,defaultValue:Oe.initValues.markerSize*10}),Ze.appendChild(Qe),Oe.initValues.markerCustom,en==="point&text"&&(Qe=this._createStylingElement({type:"checkbox",className:"gp-styling-option",label:this.options.labels.labelDisplay,id:this._addUID("labelDisplay"),checked:Oe.initValues.labelDisplay,defaultValue:Oe.initValues.labelDisplay}),Ze.appendChild(Qe));break;case"text":Qe=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:Oe.initValues.fillColor}),Ze.appendChild(Qe),Qe=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Oe.initValues.strokeColor}),Ze.appendChild(Qe),Qe=this._createStylingElement({type:"range",className:"gp-styling-option",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Oe.initValues.strokeWidth}),Ze.appendChild(Qe);break;case"line":Qe=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Oe.initValues.strokeColor}),Ze.appendChild(Qe),Qe=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Oe.initValues.strokeWidth}),Ze.appendChild(Qe);break;case"polygon":Qe=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.strokeColor,id:this._addUID("strokeColor"),defaultValue:Oe.initValues.strokeColor}),Ze.appendChild(Qe),Qe=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.strokeWidth,title:"1 à 10 pixels",id:this._addUID("strokeWidth"),min:1,max:10,step:1,defaultValue:Oe.initValues.strokeWidth}),Ze.appendChild(Qe),Qe=this._createStylingElement({type:"color",className:"gp-styling-option",label:this.options.labels.fillColor,id:this._addUID("fillColor"),defaultValue:Oe.initValues.fillColor}),Ze.appendChild(Qe),Qe=this._createStylingElement({type:"range",className:"gp-styling-option fr-range fr-range--sm",label:this.options.labels.fillOpacity,title:"0 (transparent) à 100% (opaque)",id:this._addUID("fillOpacity"),min:0,max:10,step:1,defaultValue:Oe.initValues.fillOpacity*10}),Ze.appendChild(Qe);break;default:logger$u.log("Unhandled geometry type for styling.")}Ve.appendChild(Ze);var tn=document.createElement("div");tn.className="gpf-flex-row",Ve.appendChild(tn);var an=document.createElement("input");an.type="button",an.className="gp-styling-button fr-btn fr-btn--secondary",an.value=this.options.labels.applyToObject,an.onclick=function(){Oe.applyFunc.call(this,"apply")};var cn=document.createElement("input");cn.type="button",cn.value=this.options.labels.setAsDefault,cn.className="gp-styling-button fr-btn fr-btn--tertiary",cn.onclick=function(){Oe.applyFunc.call(this,"default")},tn.appendChild(cn),tn.appendChild(an);var un=document.createElement("input");return un.type="button",un.className="gp-styling-button closer",un.onclick=function(){Oe.applyFunc.call(this,"cancel")},Ve.appendChild(un),e},_createLabelDiv:function(Oe){var e=document.createElement("dialog");e.className="gp-label-div gpf-panel fr-modal gpf-visible GPelementVisible";var t=document.createElement("div");if(t.className="gpf-modal__body fr-modal__body",e.appendChild(t),checkDsfr()){var ke=document.createElement("div");ke.className="GPpanelHeader gpf-panel__header fr-modal__header fr-m-1w";var Ge=document.createElement("div");Ge.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Ge.innerHTML="Ajouter une description",Oe.geomType==="Text"&&(Ge.innerHTML="Texte de l'annotation"),ke.appendChild(Ge);var Be=document.createElement("button");Be.id=this._addUID("GPdrawingStylePanelClose"),Be.className="GPpanelClose GPdrawingStylePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.addEventListener?Be.addEventListener("click",function(){Oe.applyFunc.call(this,"cancel")},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){Oe.applyFunc.call(this,"cancel")});var je=document.createElement("span");je.className="GPelementHidden gpf-visible",je.innerText="Fermer",Be.appendChild(je),ke.appendChild(Be),t.appendChild(ke)}var Ve=document.createElement("div");Ve.className="gpf-panel__content fr-px-3w fr-modal__content",t.appendChild(Ve);var Ze=null;if(Oe.geomType==="Text"?(Ze=document.createElement("input"),Ze.type="text",Ze.className="gp-input-label-style fr-input fr-mb-3w"):(Ze=document.createElement("textArea"),Ze.rows=2,Ze.cols=40,Ze.className="gp-textarea-att-label-style fr-input"),Oe.text&&(Ze.value=Oe.text),Ze.autocomplete="off",Ze.placeholder=Oe.placeholder,Ze.id=Oe.inputId,Ve.appendChild(Ze),Ze.onkeyup=function(an){Oe.geomType==="Text"&&an.keyCode===13&&Oe.applyFunc.call(this,Oe.key,Ze.value,!0),an.keyCode===27&&Oe.applyFunc.call(this,Oe.key,Ze.value,!1)},Oe.measure&&Oe.geomType!=="Text"){var Qe=document.createElement("input");Qe.type="text",Qe.readonly=!0,Qe.className="gp-input-measure-style",Qe.value=Oe.measure,Ve.appendChild(Qe)}var en=document.createElement("input");en.type="button",en.className="gp-styling-button fr-btn fr-btn--tertiary",en.value=this.options.labels.saveDescription,en.onclick=function(){Oe.applyFunc.call(this,Oe.key,Ze.value,!0)},Ve.appendChild(en);var tn=document.createElement("input");return tn.type="button",tn.className="gp-styling-button closer",tn.onclick=function(){Oe.applyFunc.call(this,Oe.key,Ze.value,!1)},Ve.appendChild(tn),e},_handleDOMToolClick:function(Oe,e,t){for(var ke in t.dtOptions){var Ge=t._addUID("drawing-tool-"+t.dtOptions[ke].id),Be=document.getElementById(Ge);if(Ge!==e){Be.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary",t.dtOptions[ke].active=!1;continue}t.dtOptions[ke].active?Be.className="drawing-tool fr-btn fr-btn--tertiary gpf-btn--tertiary":Be.className="drawing-tool drawing-tool-active fr-btn fr-btn--tertiary gpf-btn--tertiary",t.dtOptions[ke].active=!t.dtOptions[ke].active}}},logger$t=LoggerByDefault.getLogger("Drawing"),Ra,Drawing=(Ra=class extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof Ra))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Drawing",this._initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){super.setMap(e),this.getMap()&&this.eventKey&&unByKey(this.eventKey),e!=null&&(this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter"),this.draggable&&Draggable.dragElement(this._drawingPanel,this._drawingPanelHeader,e.getTargetElement()),this.collapsed||this._showDrawingButton.setAttribute("aria-pressed",!0),this.layer&&this.setLayer(this.layer),this.eventKey=this.getMap().getLayers().on("remove",t=>{t.element===this.layer&&(this.layer=null,this.interactionCurrent&&(this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=null))}))}exportFeatures(){var e=null;if(ControlExtended.prototype.getMap.call(this)==null)return logger$t.log("Impossible to export : control isn't attached to any map."),e;if(!this.layer)return logger$t.log("Impossible to export : no layer is hosting features."),e;if(!this.layer.getSource()||!this.layer.getSource().getFeatures()||!this.layer.getSource().getFeatures().length)return logger$t.log("Impossible to export : no features found."),e;this.featuresCollectionSelected&&this.featuresCollectionSelected.clear();var t=null;switch(this.getExportFormat()){case"KML":t=new KML({writeStyles:!0});break;case"GPX":t=new GPX({});break;case"GEOJSON":t=new GeoJSON({});break}if(!t)return logger$t.log("Impossible to export : format unknown !?"),e;var ke=this.layer.getSource().getProjection();return ke=ke||this.getMap().getView().getProjection(),e=t.writeFeatures(this.layer.getSource().getFeatures(),{dataProjection:"EPSG:4326",featureProjection:ke}),e}setCollapsed(e){if(e===void 0){logger$t.error("[ERROR] Drawing:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(this.onShowDrawingClick(),this._showDrawingButton.click())}setExportName(e){this._exportName=e}getExportName(){return this._exportName}setExportFormat(e){switch(this._exportFormat=e?e.toUpperCase():"KML",e.toUpperCase()){case"KML":this._exportExt=".kml",this._exportMimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this._exportExt=".gpx",this._exportMimeType="application/gpx+xml";break;case"GEOJSON":this._exportExt=".geojson",this._exportMimeType="application/geo+json";break;default:this._exportFormat="KML";break}}getExportFormat(){return this._exportFormat}setLayer(e){if(!e){this.layer=null;return}if(!(e instanceof VectorLayer)){logger$t.log("no valid layer given for hosting drawn features.");return}var t=this.getMap().getLayers();if(t){var ke=!1;t.forEach(Ge=>{Ge===e&&(logger$t.trace("layer already in map. Not adding."),ke=!0)}),ke||this.getMap().addLayer(e),e.getSource().getFeatures().forEach(Ge=>{var Be=Ge.getStyle();if(typeof Be=="function"){var je=Ge.getStyleFunction();if(je){var Ve=je.call(this,Ge,0);Ve&&Ve.length!==0&&Ge.setStyle(Array.isArray(Ve)?Ve[0]:Ve)}}}),this.layer=e,this.getMap().getControls().forEach(Ge=>{if(Ge instanceof LayerSwitcher){var Be=this.layer.gpLayerId;Ge._layers[Be].title===Be&&Ge.addLayer(this.layer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}}getLayer(){return this.layer}getContainer(){return this._container}_getsMarkersOptionsFromSrc(e){for(var t=null,ke=0;ke<this.options.markersList.length;ke++)if(e&&this.options.markersList[ke].src===e)return t=this.options.markersList[ke],t;return t}_getIconStyleOptions(e){var t={};return Object.keys(e).forEach(ke=>{switch(ke){case"src":case"size":case"scale":case"color":case"anchor":case"anchorOrigin":case"anchorXUnits":case"anchorYUnits":t[ke]=e[ke];break}}),t}_initialize(e){this._uid=e.id||SelectorID.generate(),this._exportName="Croquis",this._exportFormat="KML",this._exportMimeType="application/vnd.google-earth.kml+xml",this._exportExt=".kml",e=e||{},this.options=e,this.options.layerDescription||(this.options.layerDescription={title:"Croquis",description:"Mon croquis"}),this.options.tools||(this.options.tools={}),Object.keys(Ra.DefaultTools).forEach(t=>{this.options.tools.hasOwnProperty(t)||(this.options.tools[t]=Ra.DefaultTools[t])}),this.options.cursorStyle||(this.options.cursorStyle={}),Object.keys(Ra.DefaultCursorStyle).forEach(t=>{this.options.cursorStyle.hasOwnProperty(t)||(this.options.cursorStyle[t]=Ra.DefaultCursorStyle[t])}),this.options.collapsed=e.collapsed!==void 0?e.collapsed:!0,this.collapsed=this.options.collapsed,this.options.draggable=e.draggable!==void 0?e.draggable:!1,this.draggable=this.options.draggable,this.options.markersList=e.markersList||MarkersOther.drawing_api,this.options.labels||(this.options.labels={}),Object.keys(Ra.DefaultLabels).forEach(t=>{this.options.labels.hasOwnProperty(t)||(this.options.labels[t]=Ra.DefaultLabels[t])}),this.options.defaultStyles||(this.options.defaultStyles={}),Object.keys(Ra.DefaultStyles).forEach(t=>{if(!e.defaultStyles.hasOwnProperty(t)){this.options.defaultStyles[t]=Ra.DefaultStyles[t];return}if(t==="polyFillOpacity"&&(e.defaultStyles[t]<0||e.defaultStyles[t]>1)){logger$t.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.polyFillOpactity. Must be between 0 and 1"),this.options.defaultStyles[t]=Ra.DefaultStyles[t];return}if(t==="strokeWidth"||t==="polyStrokeWidth"){var ke=parseInt(e.defaultStyles[t],10);if(isNaN(ke)||ke<0){logger$t.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.strokeWidth. Must be a positive interger value."),this.options.defaultStyles[t]=Ra.DefaultStyles[t];return}this.options.defaultStyles[t]=ke}if(t==="markerSize"){var Ge=parseFloat(e.defaultStyles[t]);if(isNaN(Ge)||Ge<0){logger$t.log("Wrong value ("+e.defaultStyles[t]+") for defaultStyles.markerSize. Must be a positive value."),this.options.defaultStyles[t]=Ra.DefaultStyles[t];return}this.options.defaultStyles[t]=Ge}}),this.interactionCurrent=null,this.interactionSelectEdit=null,this.featuresCollectionSelected=null,this.stylingOvl=null,this.popupOvl=null,this.tooltipOvl=null,this.tooltipElem=null,this.layer=null,this.options.layer&&this.options.layer instanceof VectorLayer&&(this.layer=this.options.layer),this._isDesktop=this._detectSupport(),this.options.popup||(this.options.popup={display:!0,apply:null})}_createEmptyLayer(){var e=new Collection,t=new VectorLayer({source:new VectorSource({features:e}),title:"Mon Croquis"});t.gpResultLayerId="drawing",this.setLayer(t)}_detectSupport(){var e=!0,t=window.navigator.userAgent.toLowerCase();return(t.indexOf("iphone")!==-1||t.indexOf("ipod")!==-1||t.indexOf("ipad")!==-1||t.indexOf("android")!==-1||t.indexOf("mobile")!==-1||t.indexOf("blackberry")!==-1||t.indexOf("tablet")!==-1||t.indexOf("phone")!==-1||t.indexOf("touch")!==-1)&&(e=!1),(t.indexOf("msie")!==-1||t.indexOf("trident")!==-1)&&(e=!0),e}_initContainer(){var e=this._createMainContainerElement(),t=this._showDrawingButton=this._createShowDrawingPictoElement();e.appendChild(t);var ke=this._drawingPanel=this._createDrawingPanelElement(),Ge=this._createDrawingPanelDivElement();ke.appendChild(Ge);var Be=this._drawingPanelHeader=this._createDrawingPanelHeaderElement();Ge.appendChild(Be);var je=this._createDrawingToolsDivSections();Ge.appendChild(je);for(var Ve=this._createDrawingToolsSections(),Ze=0;Ze<Ve.length;Ze++)je.appendChild(Ve[Ze]);var Qe=this._createDrawingButtonsPluginDiv();return je.appendChild(Qe),e.appendChild(ke),e}_drawEndFeature(e,t){var ke=null;switch(t){case"Point":ke=new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))});break;case"LineString":ke=new Style$1({stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})});break;case"Polygon":ke=new Style$1({fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth})});break}if(e.setStyle(ke),this._updateMeasure(e,t),this.options.popup.display){var Ge=this,Be=function(en,tn,an){if(Ge.getMap().removeOverlay(Ge.popupOvl),Ge.popupOvl=null,an&&tn&&tn.trim().length>0){var cn={};cn[en]=tn.replace(/\n/g,"<br>"),e.setProperties(cn)}},je=null,Ve=!0,Ze=this.options.popup.function;Ze&&typeof Ze=="function"&&(je=Ze.call(Ge,{feature:e,geomType:t,closeFunc:function(){Be(null,!1)},saveFunc:function(en){Be(en,!0)}}),je&&(Ve=!1,je.tabIndex=-1,je.onblur=function(){Ge.getMap().removeOverlay(Ge.popupOvl),Ge.popupOvl=null})),Ve&&(je=this._createLabelDiv({applyFunc:Be,inputId:this._addUID("att-input"),placeholder:"Saisir une description... (facultatif)",measure:this.options.tools.measure?e.getProperties().measure:null,geomType:t,key:"description"})),this.popupOvl&&(this.getMap().removeOverlay(this.popupOvl),this.popupOvl=null),this.popupOvl=new Overlay({element:je,positioning:"top-center"}),this.getMap().addOverlay(this.popupOvl);var Qe=e.getGeometry().getExtent();this.popupOvl.setPosition([(Qe[0]+Qe[2])/2,(Qe[1]+Qe[3])/2]),document.getElementById(this._addUID("att-input"))&&document.getElementById(this._addUID("att-input")).focus()}}_createRemoveInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{!t||!t.selected||t.selected.length===0||(this.layer.getSource().removeFeature(t.selected[0]),this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createRemoveInteraction(),this.getMap().addInteraction(this.interactionCurrent))}),e}_createStylingInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.stylingOvl&&this.getMap().removeOverlay(this.stylingOvl),!(!t||!t.selected||t.selected.length===0)){var ke=null,Ge=null,Be=null,je=null,Ve={},Ze=t.selected[0].getGeometry(),Qe=t.selected[0].getStyle();if(Ze instanceof Point$1||Ze instanceof MultiPoint){if(Qe&&Qe.getImage()&&typeof Qe.getImage().getSrc=="function"&&Qe.getImage().getSrc()!==this.options.defaultStyles.textIcon1x1.src&&(je="Point",typeof Qe.getImage().getSrc=="function"?(Ve.markerSrc=Qe.getImage().getSrc(),Ve.markerSize=Qe.getImage().getScale()||1,Ve.markerAnchor=Qe.getImage().getAnchor(),Qe.getImage().getColor()?(ke=Qe.getImage().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":Ve.markerColor=ke,Ge=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},Ve.markerColor=Ge.hex,Ve.markerOpacity=Ge.opacity):Ve.markerColor=this.options.markersList[0].color||"#ffffff"):(Ve.markerSrc=this.options.markersList[0].src,Ve.markerSize=this.options.markersList[0].scale||1,Ve.markerColor=this.options.markersList[0].color||"#ffffff",Ve.markerAnchor=this.options.markersList[0].anchor),Ve.markerCustom=!this._getsMarkersOptionsFromSrc(Ve.markerSrc)),Qe&&Qe.getText()){var en=t.selected[0].getProperties().name;if(en&&(je=je==="Point"?"Point&Text":"Text",Qe.getText().getStroke()&&Qe.getText().getStroke().getColor()&&(ke=Qe.getText().getStroke().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":Ve.strokeColor=ke,Ge=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},Ve.strokeColor=Ge.hex,Ve.strokeOpacity=Ge.opacity),Qe.getText().getStroke()&&Qe.getText().getStroke().getWidth()&&(Ve.strokeWidth=Qe.getText().getStroke().getWidth()),Qe.getText().getFill()&&Qe.getText().getFill().getColor()&&(ke=Qe.getText().getFill().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":Ve.fillColor=ke,Ge=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},Ve.fillColor=Ge.hex,Ve.fillOpacity=Ge.opacity),Ve.strokeColor=Ve.hasOwnProperty("strokeColor")?Ve.strokeColor:this.options.defaultStyles.textStrokeColor,Ve.strokeWidth=Ve.hasOwnProperty("strokeWidth")?Ve.strokeWidth:this.options.defaultStyles.textStrokeWidth,Ve.fillColor=Ve.hasOwnProperty("fillColor")?Ve.fillColor:this.options.defaultStyles.textFillColor,je==="Point&Text")){var tn=Qe.getText().getText();tn||Qe.getText().setText(en);var an=t.selected[0].get("checked");Ve.labelDisplay=an===void 0?this.options.defaultStyles.labelDisplay:an}}}else Ze instanceof LineString||Ze instanceof MultiLineString?(je="Line",Qe&&Qe.getStroke()&&(Qe.getStroke().getWidth()&&(Ve.strokeWidth=Qe.getStroke().getWidth()),Qe.getStroke().getColor()&&(ke=Qe.getStroke().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":Ve.strokeColor=ke,Ge=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},Ve.strokeColor=Ge.hex,Ve.strokeOpacity=Ge.opacity)),Ve.strokeWidth=Ve.hasOwnProperty("strokeWidth")?Ve.strokeWidth:this.options.defaultStyles.strokeWidth,Ve.strokeColor=Ve.hasOwnProperty("strokeColor")?Ve.strokeColor:this.options.defaultStyles.strokeColor):(Ze instanceof Polygon||Ze instanceof MultiPolygon)&&(je="Polygon",Qe&&Qe.getStroke()&&(Qe.getStroke().getWidth()&&(Ve.strokeWidth=Qe.getStroke().getWidth()),Qe.getStroke().getColor()&&(ke=Qe.getStroke().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":Ve.strokeColor=ke,Ge=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},Ve.strokeColor=Ge.hex,Ve.strokeOpacity=Ge.opacity)),Qe&&Qe.getFill()&&Qe.getFill().getColor()&&(ke=Qe.getFill().getColor(),Array.isArray(ke)?ke="rgba("+ke.join()+")":Ve.fillColor=ke,Ge=ColorUtils.isRGB(ke)?ColorUtils.rgbaToHex(ke):{hex:ke,opacity:1},Ve.fillColor=Ge.hex,Ve.fillOpacity=Ge.opacity),Ve.strokeWidth=Ve.hasOwnProperty("strokeWidth")?Ve.strokeWidth:this.options.defaultStyles.polyStrokeWidth,Ve.strokeColor=Ve.hasOwnProperty("strokeColor")?Ve.strokeColor:this.options.defaultStyles.polyStrokeColor,Ve.fillColor=Ve.hasOwnProperty("fillColor")?Ve.fillColor:this.options.defaultStyles.polyFillColor,Ve.fillOpacity=Ve.hasOwnProperty("fillOpacity")?Ve.fillOpacity:this.options.defaultStyles.polyFillOpacity);if(!je){logger$t.log("Unhandled geometry type for styling.");return}var cn=this,un=function(fn){if(fn==="cancel"){cn.getMap().removeOverlay(Be);return}var pn=fn!=="apply",gn=document.getElementById(cn._addUID("fillColor")),yn=document.getElementById(cn._addUID("fillOpacity")),vn=document.getElementById(cn._addUID("strokeColor")),An=document.getElementById(cn._addUID("strokeWidth")),xn=document.getElementById(cn._addUID("markerSize"));switch(je.toLowerCase()){case"text":pn?(cn.options.defaultStyles.textStrokeColor=vn.value,cn.options.defaultStyles.textStrokeWidth=An.value,cn.options.defaultStyles.textFillColor=gn.value):t.selected[0].setStyle(new Style$1({text:new Text({font:"16px sans",textAlign:"left",text:Qe.getText().getText(),fill:new Fill({color:gn.value}),stroke:new Stroke({color:vn.value,width:parseInt(An.value,10)})})}));break;case"point&text":case"point":var wn=document.querySelector("input[type='checkbox']"),bn=null,Mn=parseInt(xn.value,10)/10,Pn=document.querySelector("input[name='gpf-dropdown-radio-style']:checked");if(Pn&&(bn=cn._getsMarkersOptionsFromSrc(Pn.value),bn.scale=Mn),pn){if(cn.options.defaultStyles.markerSize=Mn,cn.options.markersList.length>1){var En=cn.options.markersList.findIndex(function(Tn){return Tn===bn});En>0&&(cn.options.markersList.splice(En,1),cn.options.markersList.splice(0,0,bn))}je.toLowerCase()==="point&text"&&(cn.options.defaultStyles.textStrokeColor=Ve.strokeColor,cn.options.defaultStyles.textStrokeWidth=Ve.strokeWidth,cn.options.defaultStyles.textFillColor=Ve.fillColor,cn.options.defaultStyles.labelDisplay=Ve.labelDisplay)}else{var Cn={};je.toLowerCase()==="point&text"&&(t.selected[0].set("checked",wn.checked),Cn={text:new Text({font:"16px sans",textAlign:"left",text:wn.checked?t.selected[0].get("name"):"",fill:new Fill({color:Ve.fillColor}),stroke:new Stroke({color:Ve.strokeColor,width:parseInt(Ve.strokeWidth,10)})})}),bn?t.selected[0].setStyle(new Style$1(Object.assign({image:new Icon(cn._getIconStyleOptions(bn))},Cn))):t.selected[0].setStyle(new Style$1(Object.assign({image:new Icon({src:Ve.markerSrc,anchor:Ve.markerAnchor,anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels",scale:Mn})},Cn)))}break;case"line":pn?(cn.options.defaultStyles.strokeColor=vn.value,cn.options.defaultStyles.strokeWidth=parseInt(An.value,10)):t.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(An.value,10),color:vn.value})}));break;case"polygon":var Rn=parseInt(yn.value,10)/10;pn?(cn.options.defaultStyles.polyStrokeColor=vn.value,cn.options.defaultStyles.polyFillColor=gn.value,cn.options.defaultStyles.polyFillOpacity=Rn,cn.options.defaultStyles.polyStrokeWidth=parseInt(An.value,10)):t.selected[0].setStyle(new Style$1({stroke:new Stroke({width:parseInt(An.value,10),color:vn.value}),fill:new Fill({color:ColorUtils.hexToRgba(gn.value,Rn)})}));break}pn||cn.getMap().removeOverlay(Be)},dn=this._createStylingDiv({geomType:je,initValues:Ve,applyFunc:un});Be=new Overlay({element:dn,positioning:"top-center"}),this.getMap().addOverlay(Be),Be.setPosition(t.mapBrowserEvent.coordinate),this.stylingOvl=Be,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createStylingInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_createLabelInteraction(){var e=new Select({layers:[this.layer],style:!1});return e.on("select",t=>{if(this.labelOvl&&this.getMap().removeOverlay(this.labelOvl),!(!t||!t.selected||t.selected.length===0)){var ke=null,Ge=null,Be=null,je=null,Ve=t.selected[0].getGeometry(),Ze=t.selected[0].getStyle();if(Ve instanceof Point$1||Ve instanceof MultiPoint){var Qe=t.selected[0].getProperties().name;Ze&&Ze.getText()&&Qe?Ge="Text":Ze&&Ze.getImage()&&(Ge="Point")}else if(Ve instanceof LineString||Ve instanceof MultiLineString)Ge="Line";else if(Ve instanceof Polygon||Ve instanceof MultiPolygon)Ge="Polygon";else{logger$t.log("Geometry type for styling not supported .");return}if(!Ge){logger$t.log("Unhandled geometry type for styling.");return}if(Ge==="Text")Be=Ze.getText().getText();else{var en=t.selected[0].getProperties();en&&(en.hasOwnProperty("description")||en.hasOwnProperty("desc"))&&(Be=en.description||en.desc),en&&en.hasOwnProperty("measure")&&(je=en.measure)}var tn=this,an=function(un,dn,fn){if(tn.getMap().removeOverlay(ke),!!fn){var pn=t.selected[0];if(Ge==="Text"){var gn=pn.getStyle();gn.getText().setText(dn),pn.setProperties({name:dn}),pn.setStyle(gn);return}var yn={};yn[un]=dn.replace(/\n/g,"<br>"),pn.setProperties(yn)}},cn=this._createLabelDiv({applyFunc:an,inputId:this._addUID("label-input"),placeholder:Ge==="Text"?"Saisir un label...":"Saisir une description... (facultatif)",text:Be,key:"description",measure:this.options.tools.measure?je:null,geomType:Ge});ke=new Overlay({element:cn,positioning:"top-center"}),this.getMap().addOverlay(ke),ke.setPosition(t.mapBrowserEvent.coordinate),document.getElementById(this._addUID("label-input")).focus(),this.labelOvl=ke,this.getMap().removeInteraction(this.interactionCurrent),this.interactionCurrent=this._createLabelInteraction(),this.getMap().addInteraction(this.interactionCurrent)}}),e}_updateMeasure(e,t){logger$t.log(e);var ke=null,Ge=this.getMap().getView().getProjection();function Be(An,xn){xn=xn||2;var wn=Math.pow(10,xn);return Math.round(An*wn)/wn}var je=t||e.getProperties().type;switch(je){case"Point":var Ve=e.getGeometry().getCoordinates(),Ze=transform$1(Ve,Ge,"EPSG:4326");ke="lon : ",ke+=Be(Ze[0],4)+"°",ke+=" / ",ke+="lat : ",ke+=Be(Ze[1],4)+"°";break;case"LineString":for(var Qe=0,en=e.getGeometry().getCoordinates(),tn=0,an=en.length-1;tn<an;++tn){var cn=transform$1(en[tn],Ge,"EPSG:4326"),un=transform$1(en[tn+1],Ge,"EPSG:4326");Qe+=getDistance(cn,un)}ke=Qe>1e3?Be(Qe/1e3,3)+" km":Be(Qe,3)+" m";break;case"Polygon":var dn=0,fn=e.getGeometry().clone(),pn=fn.getLinearRing(0).getCoordinates();dn=Math.abs(getArea(new Polygon([pn])));var gn=fn.getLinearRings();if(gn.length>1)for(var yn=1;yn<gn.length;yn++){var vn=gn[yn].getCoordinates();dn-=Math.abs(getArea(new Polygon([vn])))}ke=dn>1e6?Be(dn/1e6,3)+" km^2":Be(dn,2)+" m^2";break}e.setProperties({measure:ke,type:je})}_handleToolClick(e,t,ke){var Ge=ke.getMap();if(!Ge){logger$t.trace("Drawing control not attached to any map.");return}Interactions.unset(Ge,{current:"Drawing"}),ke.interactionCurrent&&(Ge.removeInteraction(ke.interactionCurrent),ke.interactionCurrent=null),ke.interactionSelectEdit&&(Ge.removeInteraction(ke.interactionSelectEdit),ke.interactionSelectEdit=null),ke.popupOvl&&(ke.getMap().removeOverlay(ke.popupOvl),ke.popupOvl=null),ke.stylingOvl&&(ke.getMap().removeOverlay(ke.stylingOvl),ke.stylingOvl=null),ke.tooltipOvl&&(ke.getMap().removeOverlay(ke.tooltipOvl),ke.tooltipOvl=null),this.layer||this._createEmptyLayer();const Be=Ve=>{if(Ve.dragging||!ke.tooltipOvl)return;const Ze=Ve.coordinate;ke.tooltipOvl.setPosition(Ze)},je=()=>{ke.tooltipOvl&&(ke.getMap().removeOverlay(ke.tooltipOvl),ke.tooltipOvl=null)};switch(t){case this._addUID("drawing-tool-point"):ke.dtOptions.points.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new Icon(this._getIconStyleOptions(this.options.markersList[0]))}),type:"Point"}),ke.interactionCurrent.on("drawend",function(Ve){ke._drawEndFeature(Ve.feature,"Point")},ke));break;case this._addUID("drawing-tool-line"):ke.dtOptions.lines.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.strokeColor,width:this.options.defaultStyles.strokeWidth})}),type:"LineString",handleMoveEvent:Be}),ke.tootlTipElem||(ke.tootlTipElem=document.createElement("div"),ke.tootlTipElem.className="gpf-draw-linestring-tooltip"),ke.tootlTipElem.innerText="Double-cliquer pour terminer",ke.tooltipOvl=new Overlay({element:ke.tootlTipElem,positioning:"top-right"}),ke.interactionCurrent.on("drawend",function(Ve){ke._drawEndFeature(Ve.feature,"LineString"),je()},ke),ke.interactionCurrent.on("drawabort",je,ke));break;case this._addUID("drawing-tool-polygon"):ke.dtOptions.polygons.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon",handleMoveEvent:Be}),ke.tootlTipElem||(ke.tootlTipElem=document.createElement("div"),ke.tootlTipElem.className="gpf-draw-linestring-tooltip"),ke.tootlTipElem.innerText="Double-cliquer pour terminer",ke.tooltipOvl=new Overlay({element:ke.tootlTipElem,positioning:"top-right"}),ke.interactionCurrent.on("drawend",function(Ve){ke._drawEndFeature(Ve.feature,"Polygon"),je()},ke),ke.interactionCurrent.on("drawabort",je,ke));break;case this._addUID("drawing-tool-holes"):ke.dtOptions.holes.active&&(ke.interactionSelectEdit=new Select({stopClick:!0,condition:pointerMove,layers:[this.layer]}),ke.interactionSelectEdit.setProperties({name:"Drawing",source:ke}),Ge.addInteraction(ke.interactionSelectEdit),ke.interactionCurrent=new Draw({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})}),stroke:new Stroke({color:this.options.defaultStyles.polyStrokeColor,width:this.options.defaultStyles.polyStrokeWidth}),fill:new Fill({color:ColorUtils.hexToRgba(this.options.defaultStyles.polyFillColor,this.options.defaultStyles.polyFillOpacity)})}),type:"Polygon"}),ke.interactionCurrent.on("drawstart",function(Ve){},ke),ke.interactionCurrent.on("drawend",function(Ve){var Ze=ke.interactionSelectEdit.getFeatures();if(Ze.getLength()){for(var Qe=Ze.item(0),en=Ve.feature.getGeometry().getCoordinates()[0],tn=!0,an=0;an<en.length;an++)if(!Qe.getGeometry().intersectsCoordinate(en[an])){tn=!1;break}if(!tn)return;Qe.getGeometry().appendLinearRing(new LinearRing(en)),Ve.feature=Qe,ke._drawEndFeature(Ve.feature,"Polygon")}},ke));break;case this._addUID("drawing-tool-text"):ke.dtOptions.text.active&&(ke.interactionCurrent=new Draw({stopClick:!0,source:ke.layer.getSource(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})}),type:"Point"}),ke.interactionCurrent.on("drawend",Ve=>{var Ze=function(en,tn,an){if(ke.getMap().removeOverlay(ke.popupOvl),ke.popupOvl=null,!an||!tn){ke.layer.getSource().removeFeature(Ve.feature);return}var cn={};cn[en]=tn,Ve.feature.setProperties(cn),Ve.feature.setStyle(new Style$1({image:new Icon(ke._getIconStyleOptions(ke.options.defaultStyles.textIcon1x1)),text:new Text({textAlign:"left",font:"16px sans",text:tn,fill:new Fill({color:ke.options.defaultStyles.textFillColor}),stroke:new Stroke({color:ke.options.defaultStyles.textStrokeColor,width:3})})}))},Qe=this._createLabelDiv({applyFunc:Ze,inputId:ke._addUID("label-input"),geomType:"Text",key:"name",placeholder:"Saisir un label..."});ke.popupOvl&&ke.popupOvl.element.querySelector(".gp-styling-button.closer").click(),ke.popupOvl=new Overlay({element:Qe,positioning:"top-center"}),ke.getMap().addOverlay(ke.popupOvl),ke.popupOvl.setPosition(Ve.feature.getGeometry().getCoordinates()),document.getElementById(ke._addUID("label-input")).focus()}));break;case this._addUID("drawing-tool-edit"):ke.dtOptions.edit.active&&(this.featuresCollectionSelected=new Collection,ke.interactionSelectEdit=new Select({condition:singleClick,layers:[this.layer],features:this.featuresCollectionSelected}),ke.interactionSelectEdit.on("select",Ve=>{}),ke.interactionSelectEdit.setProperties({name:"Drawing",source:ke}),Ge.addInteraction(ke.interactionSelectEdit),ke.interactionCurrent=new Modify({stopClick:!0,features:this.interactionSelectEdit.getFeatures(),style:new Style$1({image:new CircleStyle({radius:this.options.cursorStyle.radius,stroke:new Stroke({color:this.options.cursorStyle.strokeColor,width:this.options.cursorStyle.strokeWidth}),fill:new Fill({color:this.options.cursorStyle.fillColor})})})}),ke.interactionCurrent.on("modifyend",Ve=>{var Ze=Ve.features.item(0);ke._updateMeasure(Ze)}));break;case this._addUID("drawing-tool-display"):ke.dtOptions.display.active&&(ke.interactionCurrent=this._createStylingInteraction());break;case this._addUID("drawing-tool-tooltip"):ke.dtOptions.tooltip.active&&(ke.interactionCurrent=this._createLabelInteraction());break;case this._addUID("drawing-tool-remove"):ke.dtOptions.remove.active&&(ke.interactionCurrent=ke._createRemoveInteraction());break;default:logger$t.trace("unhandled tool type")}ke.interactionCurrent&&(ke.interactionCurrent.setProperties({name:"Drawing",source:this}),Ge.addInteraction(ke.interactionCurrent),ke.tooltipOvl&&Ge.addOverlay(ke.tooltipOvl)),logger$t.log("interactions",Ge.getInteractions())}onShowDrawingClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._showDrawingButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position);for(var Ge in this.dtOptions)if(this.dtOptions.hasOwnProperty(Ge)&&this.dtOptions[Ge].active){var Be=this._addUID("drawing-tool-"+this.dtOptions[Ge].id);document.getElementById(Be).className="drawing-tool fr-m-1w fr-btn fr-btn--tertiary gpf-btn--tertiary",this.dtOptions[Ge].active=!1}}onExportFeatureClick(){var e=this.exportFeatures();if(e){var t=document.createElement("a"),ke="utf-8";if(t.setAttribute("href","data:"+this._exportMimeType+";charset="+ke+","+encodeURIComponent(e)),t.setAttribute("download",this.getExportName()+this._exportExt),document.createEvent){var Ge=document.createEvent("MouseEvents");Ge.initEvent("click",!0,!0),t.dispatchEvent(Ge)}else t.click()}}},Qc(Ra,"DefaultTools",{points:!0,lines:!0,polygons:!0,holes:!1,text:!0,remove:!0,display:!0,tooltip:!0,edit:!0,export:!0,measure:!1}),Qc(Ra,"DefaultLabels",{control:"Annoter la carte",creatingTools:"Créer",points:"Placer des points",lines:"Dessiner des lignes",polygons:"Dessiner des polygones",holes:"Créer des trous sur un polygone",text:"Ecrire sur la carte",editingTools:"Éditer",edit:"Editer les tracés",display:"Modifier l'apparence des objets",tooltip:"Modifier les textes / infos-bulles",remove:"Supprimer des objets",export:"Exporter",exportTitle:"Exporter en KML",applyToObject:"Appliquer à l'objet",saveDescription:"Enregistrer",setAsDefault:"Définir par défaut",strokeColor:"Couleur du trait : ",strokeWidth:"Epaisseur du trait : ",fillColor:"Couleur de remplissage : ",fillOpacity:"Opacité du remplissage : ",markerSize:"Taille du pictogramme : ",markerColor:"Couleur du pictogramme : ",labelDisplay:"Afficher le label : "}),Qc(Ra,"DefaultStyles",{textFillColor:"#000000",textStrokeColor:"#FFFFFF",textStrokeWidth:6,textIcon1x1:{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNiYAAAAAkAAxkR2eQAAAAASUVORK5CYII=",anchor:[0,0]},polyFillColor:"#000091",polyFillOpacity:.7,polyStrokeColor:"#000091",polyStrokeWidth:4,strokeColor:"#FF7F00",strokeWidth:4,markerSize:1,markerColor:"#ffcc33",labelDisplay:!0}),Qc(Ra,"DefaultCursorStyle",{radius:6,strokeColor:"#FFF",strokeWidth:1,fillColor:"rgba(0, 153, 255, 1)"}),Ra);Object.assign(Drawing.prototype,DrawingDOM);Object.assign(Drawing.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Drawing=Drawing);var logger$s=LoggerByDefault.getLogger("LocationSelectorDOM"),LocationSelectorDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.className=this._addUID("GPlocationPoint"),Oe.className+=" GPwidget gpf-widget ",Oe},_createLocationPointElement:function(Oe,e){var t=document.createElement("div");return t.id=this._addUID("GPlocationPoint_"+Oe),t.className=e?"GPflexInput GPlocationStageFlexInput gpf-flex":"GPflexInput GPelementHidden gpf-flex gpf-hidden",t.style.cssText="",t},_createLocationPointLabelElement:function(Oe,e){var t=this,ke=document.createElement("button");return ke.id=this._addUID("GPlocationOriginLabel_"+Oe),ke.innerHTML=e,ke.className="GPlocationOriginLabel gpf-btn gpf-btn-icon-label fr-btn fr-btn--secondary gpf-btn--secondary",ke.setAttribute("type","button"),ke.addEventListener("click",function(Ge){for(var Be=SelectorID.index(this.id),je=document.getElementsByClassName(t._addUID("GPlocationPoint")),Ve=0;Ve<je.length;Ve++){var Ze=je[Ve].childNodes[0].id,Qe=SelectorID.index(Ze);document.getElementById(t._addUID("GPlocationPoint_"+Qe)).style.cssText=""}document.getElementById(t._addUID("GPlocationOriginCoords_"+Be)).value="",document.getElementById(t._addUID("GPlocationOrigin_"+Be)).value="",document.getElementById(t._addUID("GPlocationPoint_"+Be)).style.cssText="",document.getElementById(t._addUID("GPlocationOriginPointer_"+Be)).checked=!1,document.getElementById(t._addUID("GPlocationOrigin_"+Be)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(t._addUID("GPlocationOriginCoords_"+Be)).className="GPelementHidden gpf-hidden",document.getElementById(t._addUID("GPlocationStageRemove_"+Be))&&(document.getElementById(t._addUID("GPlocationStageRemove_"+Be)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(t._addUID("GPlocationStageAdd"))&&(document.getElementById(t._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),t.onLocationClearPointClick(Ge)}),ke},_createLocationAutoCompleteteInputElement:function(Oe){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOrigin_"+Oe),t.className="GPelementShow gpf-show gpf-input fr-input",t.type="text",t.placeholder="Saisir une adresse, un lieu...",t.autocomplete="off",t.addEventListener("keyup",function(ke){var Ge=ke.which||ke.keyCode;if(!(Ge===13||Ge===10||Ge===38||Ge===40)){var Be=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOrigin_"+Be)).value.length>2?(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("gpf-hidden","gpf-visible")):(document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Be)).classList.replace("gpf-visible","gpf-hidden")),e.onAutoCompleteSearchText(ke)}}),t.addEventListener("keydown",function(ke){var Ge=ke.which||ke.keyCode,Be=document.getElementById(e._addUID("GPlocationAutoCompleteResult_"+Oe));if(Be){var je=Be.getElementsByClassName("GPautoCompleteProposal current"),Ve=Be.getElementsByClassName("GPautoCompleteProposal"),Ze=Ve.length;if(Ze){var Qe=null;if(je.length)Qe=je[0];else{Qe=Ve[0],Qe.className="GPautoCompleteProposal current",Qe.style.color="#000000",Qe.style["background-color"]="#CEDBEF";return}var en=parseInt(SelectorID.index(Qe.id),10),tn=en===Ze-1?Ve[0]:Ve[en+1],an=en===0?Ve[Ze-1]:Ve[en-1];switch(Qe.style["background-color"]="",Qe.style.color="",an.style["background-color"]="",an.style.color="",tn.style["background-color"]="",tn.style.color="",Ge){case 38:logger$s.log("arrow up"),Qe.className="GPautoCompleteProposal",an.className="GPautoCompleteProposal current",an.style.color="#000000",an.style["background-color"]="#CEDBEF";break;case 40:logger$s.log("arrow down"),Qe.className="GPautoCompleteProposal",tn.className="GPautoCompleteProposal current",tn.style.color="#000000",tn.style["background-color"]="#CEDBEF";break;case 13:logger$s.log("enter"),Qe.click(ke);break}Qe.focus()}}}),t},_createLocationCoordinateInputElement:function(Oe){var e=this,t=document.createElement("input");return t.id=this._addUID("GPlocationOriginCoords_"+Oe),t.className="GPelementHidden gpf-input gpf-hidden fr-input",t.type="text",t.disabled=!1,t.addEventListener("click",function(){var ke=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationOriginLabel_"+ke)).click()}),t},_createLocationPointerShowInputElement:function(Oe){var e=document.createElement("input");return e.id=this._addUID("GPlocationOriginPointer_"+Oe),e.className="GPelementHidden gpf-hidden",e.type="checkbox",e},_createLocationPointerInputElement:function(Oe){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationOriginPointerImg_"+Oe),t.htmlFor=this._addUID("GPlocationOriginPointer_"+Oe),t.className="GPlocationOriginPointerImg gpf-btn gpf-btn-icon-pointer fr-btn",t.title="Pointer un lieu sur la carte",t.setAttribute("type","button"),t.addEventListener("click",function(ke){ke.preventDefault(),ke.stopPropagation();var Ge=SelectorID.index(this.id),Be=document.getElementsByClassName(e._addUID("GPlocationPoint")),je,Ve,Ze;for(je=0;je<Be.length;je++)Ve=Be[je].childNodes[0].id,Ze=SelectorID.index(Ve),Ge!==Ze&&(document.getElementById(e._addUID("GPlocationOriginPointer_"+Ze)).checked=!1,document.getElementById(e._addUID("GPlocationOriginCoords_"+Ze)).value==="Pointer un lieu sur la carte"&&(document.getElementById(e._addUID("GPlocationOriginCoords_"+Ze)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+Ze)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Ze)).className="GPelementHidden gpf-hidden"));if(document.getElementById(e._addUID("GPlocationOriginPointer_"+Ge)).checked){for(document.getElementById(e._addUID("GPlocationOriginCoords_"+Ge)).value="",je=0;je<Be.length;je++)Ve=Be[je].childNodes[0].id,Ze=SelectorID.index(Ve),document.getElementById(e._addUID("GPlocationPoint_"+Ze)).style.cssText="";document.getElementById(e._addUID("GPlocationStageRemove_"+Ge))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+Ge)).className="GPlocationStageRemove  gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w"),document.getElementById(e._addUID("GPlocationOriginPointer_"+Ge)).checked=!1,document.getElementById(e._addUID("GPlocationOrigin_"+Ge)).className="GPelementShow gpf-show  gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Ge)).className="GPelementHidden gpf-hidden"}else{for(document.getElementById(e._addUID("GPlocationOriginCoords_"+Ge)).value="Pointer un lieu sur la carte",je=0;je<Be.length;je++)Ve=Be[je].childNodes[0].id,Ze=SelectorID.index(Ve),Ge===Ze?document.getElementById(e._addUID("GPlocationPoint_"+Ze)).style.cssText="":document.getElementById(e._addUID("GPlocationPoint_"+Ze)).style.display="none";document.getElementById(e._addUID("GPlocationStageRemove_"+Ge))&&(document.getElementById(e._addUID("GPlocationStageRemove_"+Ge)).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationStageAdd"))&&(document.getElementById(e._addUID("GPlocationStageAdd")).className="GPelementHidden gpf-hidden"),document.getElementById(e._addUID("GPlocationOriginPointer_"+Ge)).checked=!0,document.getElementById(e._addUID("GPlocationOrigin_"+Ge)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationOriginCoords_"+Ge)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+Ge)).disabled=!0}e.onActivateMapPointClick(ke)}),t},_createLocationRemovePointElement:function(Oe){var e=this,t=document.createElement("button");return t.id=this._addUID("GPlocationStageRemove_"+Oe),t.className="GPlocationOpen GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary",t.title="Supprimer l'étape",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button"),t.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge);var Be=document.getElementsByClassName(e._addUID("GPlocationPoint")),je=Be.length-1,Ve=Be[0].childNodes[0].id,Ze=Be[je].childNodes[0].id,Qe=SelectorID.index(Ve),en=SelectorID.index(Ze);if(Oe!==Qe&&Oe!==en){var tn=SelectorID.index(this.id);document.getElementById(e._addUID("GPlocationPoint_"+tn)).className="GPflexInput GPelementHidden gpf-flex gpf-hidden",document.getElementById(e._addUID("GPlocationOrigin_"+tn)).value="",document.getElementById(e._addUID("GPlocationOrigin_"+tn)).className="GPelementShow gpf-show gpf-input fr-input",document.getElementById(e._addUID("GPlocationOriginCoords_"+tn)).value="",document.getElementById(e._addUID("GPlocationOriginCoords_"+tn)).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPlocationStageAdd")).style.display="",document.getElementById(e._addUID("GPlocationPoint_"+tn)).parentElement.previousSibling.classList.add("GPelementHidden","gpf-hidden"),e.onLocationRemovePointClick(ke)}}),t},_createLocationAddPointElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPlocationStageAdd"),e.className="GPlocationOpen GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm fr-btn--secondary gpf-btn--secondary fr-mt-2w",e.title="Ajouter une étape",checkDsfr()&&(e.innerText="Ajouter une étape"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener("click",function(t){for(var ke=1,Ge=0,Be=document.getElementsByClassName(Oe._addUID("GPlocationPoint")),je=1;je<Be.length-1;je++){var Ve=Be[je].childNodes[0].id,Ze=SelectorID.index(Ve);document.getElementById(Oe._addUID("GPlocationPoint_"+Ze))&&(document.getElementById(Oe._addUID("GPlocationPoint_"+Ze)).className==="GPflexInput GPelementHidden gpf-flex gpf-hidden"?ke===1&&(ke=Ze):Ge++)}ke<Be.length&&(document.getElementById(Oe._addUID("GPlocationPoint_"+ke)).className="GPflexInput GPlocationStageFlexInput gpf-flex",document.getElementById(Oe._addUID("GPlocationPoint_"+ke)).parentElement.previousSibling.classList.remove("GPelementHidden","gpf-hidden")),Ge===4&&(document.getElementById(Oe._addUID("GPlocationStageAdd")).style.display="none");var Qe=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!Qe),Oe.onLocationAddPointClick(t)}),e},_createLocationAutoCompleteElement:function(Oe){var e=document.createElement("div");return e.id=this._addUID("GPlocationAutoCompleteList_"+Oe),e.className="GPlocationAutoCompleteList GPelementHidden gpf-panel gpf-hidden fr-modal",e},_createLocationAutoCompleteResultElement:function(Oe){var e=this,t=document.createElement("div");return t.id=this._addUID("GPlocationAutoCompleteResult_"+Oe),t.className="GPadvancedAutoCompleteResult gpf-panel__list",t.addEventListener?t.addEventListener("click",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Oe)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Oe)).classList.replace("gpf-hidden","gpf-visible")},!1):t.attachEvent&&t.attachEvent("onclick",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Oe)).classList.replace("GPelementHidden","GPelementVisible"),document.getElementById(e._addUID("GPlocationAutoCompleteList_"+Oe)).classList.replace("gpf-hidden","gpf-visible")}),t},_createLocationAutoCompletedLocationElement:function(Oe,e,t){var ke=document.getElementById(this._addUID("GPlocationAutoCompleteResult_"+Oe)),Ge=document.createElement("div");Ge.id=this._addUID("AutoCompletedLocation_"+t),Ge.className="GPautoCompleteProposal gpf-panel__items",Ge.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(e),ke.appendChild(Ge)},GPdisplayCoordinate:function(Oe){for(var e=document.getElementsByClassName(this._addUID("GPlocationPoint")),t=0;t<e.length;t++){var ke=e[t].childNodes[0].id,Ge=SelectorID.index(ke);if(document.getElementById(this._addUID("GPlocationOriginPointer_"+Ge)).checked){document.getElementById(this._addUID("GPlocationOriginCoords_"+Ge)).value=Oe,document.getElementById(this._addUID("GPlocationOriginCoords_"+Ge)).disabled=!1;for(var Be=0;Be<e.length;Be++){ke=e[Be].childNodes[0].id;var je=SelectorID.index(ke);document.getElementById(this._addUID("GPlocationPoint_"+je)).style.cssText="",document.getElementById(this._addUID("GPlocationStageRemove_"+je))&&(document.getElementById(this._addUID("GPlocationStageRemove_"+je)).className="GPlocationStageRemove gpf-btn gpf-btn-icon-remove fr-btn--sm fr-btn--secondary gpf-btn--secondary")}document.getElementById(this._addUID("GPlocationOriginPointer_"+Ge)).checked=!1,document.getElementById(this._addUID("GPlocationStageAdd"))&&(document.getElementById(this._addUID("GPlocationStageAdd")).className="GPlocationStageAdd gpf-btn gpf-btn-icon-add fr-btn--sm");return}}}},logger$r=LoggerByDefault.getLogger("locationselector"),LocationSelector=class Qf extends Control{constructor(e){if(e=e||{},super({element:e.element||document.createElement("div"),render:e.render,target:e.target}),!(this instanceof Qf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="LocationSelector",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}initialize(e){this.options={tag:{id:1,groupId:null,label:">",display:!0,addOption:!1,removeOption:!1},displayInfo:!0,autocompleteOptions:{}},Helper.mergeParams(this.options,e),this._uid=this.options.tag.groupId||SelectorID.generate(),this._map=null,this._inputsContainer=null,this._buttonLabel=null,this._inputAutoComplete=null,this._inputShowPointerContainer=null,this._inputShowPointer=null,this._inputCoordinateContainer=null,this._addPointElement=null,this._removePointElement=null,this._coordinate=null,this._suggestedContainer=null,this._suggestedList=null,this._suggestedLocations=[],this._currentLocation=null,this._initMarker(),this._resources={},this.listenerKey=null}_initMarker(){if(this._marker=null,this._markerUrl="",this._markerOffset=[0,0],this.options.tag.markerOpts&&this.options.tag.markerOpts.url){this._markerUrl=this.options.tag.markerOpts.url;var e=this.options.tag.markerOpts.offset;e&&(Array.isArray(e)&&e.length===2?this._markerOffset=e:logger$r.log("markerOpts.offset should be an array. e.g. : [0,0]"))}else this._markerUrl=Marker.lightOrange,this._markerOffset=Marker.defaultOffset}getCoordinate(){return this._coordinate}setCoordinate(e,t){var ke=this.getMap(),Ge=ke.getView().getProjection().getCode();t||(t=Ge),this._setCoordinate(e,t),e=transform$1(e,t,Ge),this._setMarker([e[0],e[1]],null,!1)}clear(){this.clearResults(),this._buttonLabel.click()}clearResults(){this._currentLocation=null,this._coordinate=null,this._hideSuggestedLocation(),this._clearSuggestedLocation(),this._setMarker(),unByKey(this.listenerKey)}_initContainer(){var e=this.options.tag.id,t=this._createMainContainerElement(),ke=this._inputsContainer=this._createLocationPointElement(e,this.options.tag.display);t.appendChild(ke);var Ge=this._buttonLabel=this._createLocationPointLabelElement(e,this.options.tag.label);ke.appendChild(Ge);var Be=this._inputAutoComplete=this._createLocationAutoCompleteteInputElement(e);Be.addEventListener?Be.addEventListener("click",()=>this.onAutoCompleteInputClick()):Be.attachEvent&&Be.attachEvent("onclick",()=>this.onAutoCompleteInputClick()),ke.appendChild(Be);var je=this._inputCoordinateContainer=this._createLocationCoordinateInputElement(e);ke.appendChild(je);var Ve=this._inputShowPointerContainer=this._createLocationPointerShowInputElement(e);ke.appendChild(Ve);var Ze=this._inputShowPointer=this._createLocationPointerInputElement(e);if(ke.appendChild(Ze),this.options.tag.addOption){var Qe=this._addPointElement=this._createLocationAddPointElement();ke.appendChild(Qe)}if(this.options.tag.removeOption){var en=this._removePointElement=this._createLocationRemovePointElement(e);ke.appendChild(en)}var tn=this._suggestedContainer=this._createLocationAutoCompleteElement(e),an=this._suggestedList=this._createLocationAutoCompleteResultElement(e);return tn.appendChild(an),t.appendChild(tn),t}onAutoCompleteInputClick(){this._inputAutoComplete&&this._inputAutoComplete.value.length>2&&this._displaySuggestedLocation()}onAutoCompleteSearchText(e){var t=e.target.value;if(t){var ke=this.options.autocompleteOptions||{},Ge=ke.onSuccess||null,Be=ke.onFailure||null;if(this._currentLocation=t,t.length<3){this._clearSuggestedLocation();return}var je=this;this._requestAutoComplete({text:t,maximumResponses:5,onSuccess:function(Ze){if(Ze){var Qe=Ze.suggestedLocations;je._fillAutoCompletedLocationListContainer(Qe),Ge&&Ge.call(this,Ze)}},onFailure:function(Ze){je._clearSuggestedLocation(),logger$r.log(Ze.message),Be&&Be.call(this,Ze)}});var Ve=this.getMap();Ve.on("click",()=>this._hideSuggestedLocation()),Ve.on("pointerdrag",()=>this._hideSuggestedLocation())}}onAutoCompletedResultsItemClick(e){var t=SelectorID.index(e.target.id);if(t){var ke=[this._suggestedLocations[t].position.x,this._suggestedLocations[t].position.y];this._coordinate=ke;var Ge={type:this._suggestedLocations[t].type,fields:this._suggestedLocations[t]},Be=GeocodeUtils.getSuggestedLocationFreeform(this._suggestedLocations[t]);this._setLabel(Be);var je=this.getMap().getView(),Ve=je.getProjection().getCode();Ve!=="EPSG:4326"&&(ke=transform$1(ke,"EPSG:4326",Ve)),this._setPosition(ke),this._setMarker(ke,Ge,this.options.displayInfo)}}onActivateMapPointClick(){var e=this.getMap();this._inputShowPointerContainer.checked?(this.clearResults(),this.listenerKey=e.on("click",t=>this.onMouseMapClick(t)),this._setCursor("crosshair")):(unByKey(this.listenerKey),this._setCursor())}onLocationClearPointClick(){this._setCursor(),this.clearResults()}onLocationRemovePointClick(){this._setCursor(),this.clearResults()}onLocationAddPointClick(e){logger$r.log("onRouteAddPointClick",e)}onMouseMapClick(e){var t=e.coordinate;if(!(!e.map||!e.map.getView())){var ke=e.map.getView().getProjection();this._setCoordinate(t,ke),this._setMarker([t[0],t[1]],null,!1),this.onActivateMapPointClick(e)}}_setLabel(e){this._inputAutoComplete.value=e}_setCursor(e){var t=this.getMap(),ke=t.getTargetElement();e?ke.style.cursor=e:ke.style.cursor=null}_setCoordinate(e,t){this._coordinate=transform$1(e,t,"EPSG:4326");var ke=this._coordinate[0].toFixed(4),Ge=this._coordinate[1].toFixed(4),Be=Ge+" / "+ke;this.GPdisplayCoordinate(Be)}_setPosition(e){var t=this.getMap().getView();t.setCenter(e)}_setMarker(e,t,ke){var Ge=this.getMap();if(this._marker!=null&&(Ge.removeOverlay(this._marker),this._marker=null),e){var Be=document.createElement("img");Be.src=this._markerUrl,this._marker=new Overlay({position:e,offset:this._markerOffset,element:Be,stopEvent:!1}),Ge.addOverlay(this._marker),ke&&logger$r.log("marker information : ",t)}}_clearSuggestedLocation(){if(this._suggestedLocations=[],this._suggestedList)for(;this._suggestedList.firstChild;)this._suggestedList.removeChild(this._suggestedList.firstChild)}_hideSuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementVisible","GPelementHidden"),this._suggestedContainer.classList.replace("gpf-visible","gpf-hidden"))}_displaySuggestedLocation(){this._suggestedContainer&&(this._suggestedContainer.classList.replace("GPelementHidden","GPelementVisible"),this._suggestedContainer.classList.replace("gpf-hidden","gpf-visible"))}_requestAutoComplete(e){if(logger$r.log("_requestAutoComplete()",e),!(!e||Object.keys(e).length===0)&&e.text){logger$r.log(e);var t={};Helper.assign(t,this.options.autocompleteOptions),Helper.assign(t,e);var ke=this._resources.AutoCompletion||null;ke&&Array.isArray(ke)&&(t.filterOptions||(t.filterOptions={}),t.filterOptions.type=ke),t.apiKey=t.apiKey||this.options.apiKey,typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),logger$r.log(t),Gp.Services.autoComplete(t)}}_fillAutoCompletedLocationListContainer(e){if(!(!e||e.length===0)){var t=this._suggestedList;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild);for(var ke=0;ke<e.length;ke++)this._createLocationAutoCompletedLocationElement(this.options.tag.id,e[ke],ke);this._suggestedLocations=e}}};Object.assign(LocationSelector.prototype,LocationSelectorDOM);window.ol&&window.ol.control&&(window.ol.control.LocationSelector=LocationSelector);var ExportDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e}},logger$q=LoggerByDefault.getLogger("export");class ButtonExport extends Control{constructor(e){if(e=e||{layer:null,control:null,target:null,format:"geojson",name:"export",description:"export",title:"Exporter",kind:"secondary",menu:!1,icons:{menu:"☰ ",button:""},callback:null},logger$q.trace("[constructor] Export",e),super({element:document.createElement("div"),render:e.render,target:null}),!(this instanceof ButtonExport))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this.CLASSNAME="Export",this.EXPORT_ROUTE={},this.EXPORT_ISOCHRON={},this.EXPORT_PROFILE={},this.uid=e.id||SelectorID.generate(),this.extension=null,this.mimeType=null,this.container=null,this.button=null,this.inputName=null,this.inputDesc=null,this.menu=null,this.menuClassHidden="GPelementHidden gpf-hidden",this.initOptions(e),this.initContainer()}render(){if(!this.options.target&&this.options.control){var e=this.options.control.getContainer(),t=e.querySelector(".container-buttons-plugin");this.options.target=t||e.lastChild}this.container&&this.options.target.appendChild(this.container)}initOptions(e){this.options={layer:null,control:null,target:null,download:!0,format:"geojson",name:"export",description:"export",title:"Exporter",kind:"secondary",menu:!1,icons:{menu:"☰ ",button:"export"},callback:null};var t=Helper.assign(this.options.icons,e.icons);Helper.assign(this.options,e),Helper.assign(this.options.icons,t),logger$q.debug(this.options),this.options.layer,this.options.control,this.options.target;var ke=this.options.format;ke?this.setFormat(ke):this.setFormat(""),this.options.name||this.setName("export"),this.options.description||this.setDescription("export"),this.options.title||this.setTitle("Exporter"),this.options.kind||this.setKind("secondary"),this.options.menu===void 0&&this.setMenu(!1)}initContainer(){var e=this.options.title;this.options.menu&&(e=this.options.icons.menu+this.options.title);var t=document.createElement("div");t.id=this._addUID("GPexportContainer"),t.className="GPexportMenuContainer gpf-export-menu-container gpf-export-menu-container-row",this.options.direction==="column"&&t.classList.replace("gpf-export-menu-container-row","gpf-export-menu-container-column");var ke=this.stringToHTML(`
            <div class="GPexportMenuHidden gpf-accordion fr-accordion ${this.menuClassHidden}">
                <h3 class="gpf-accordion__title fr-accordion__title">
                    <button type="button" 
                        id="GPexportBtnMenuContent-${this.uid}"
                        class="gpf-accordion__btn fr-accordion__btn" 
                        aria-expanded="false" aria-controls="GPexportMenuContent-${this.uid}">options</button>
                </h3>
                <div id="GPexportMenuContent-${this.uid}"
                    class="GPexportMenuContent fr-collapse fr-mx-2w">
                    <div id="GPexportMenuName-${this.uid}" 
                        class="GPexportMenuName">
                        <label class="GPlabel gpf-label fr-label" for="GPexportMenuInputName-${this.uid}" title="Nom">Nom</label>
                        <input type="text" id="GPexportMenuInputName-${this.uid}" class="GPinput gpf-input fr-input">
                    </div>
                    <div id="GPexportMenuDesc-${this.uid}"
                        class="GPexportMenuDesc">
                        <label class="GPlabel gpf-label fr-label" for="GPexportMenuInputDesc-${this.uid}" title="Description">Description</label>
                        <input type="text" id="GPexportMenuInputDesc-${this.uid}" class="GPinput gpf-input fr-input">
                    </div>
                    <div id="GPexportMenuFormat-${this.uid}">
                        <label class="GPlabel gpf-label fr-label" title="Formats">Formats</label>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatGeojson-${this.uid}"
                                name="format" 
                                value="geojson">
                            <label class="fr-label container" for="GPmenuFormatGeojson-${this.uid}">GeoJSON
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatKml-${this.uid}"
                                name="format" 
                                value="kml">
                            <label class="fr-label container" for="GPmenuFormatKml-${this.uid}">KML
                                <span class="checkmark"></span>
                            </label>
                        </div>
                        <div class="GPexportMenuFormat fr-radio-group fr-m-1w">
                            <input type="radio" 
                                id="GPmenuFormatGpx-${this.uid}"
                                name="format" 
                                value="gpx">
                            <label class="fr-label container" for="GPmenuFormatGpx-${this.uid}">GPX
                                <span class="checkmark"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        `);if(this.menu=ke.firstChild,this.menu){if(this.options.menu){var Ge=this.menu.className;this.menu.className=Ge.replace(this.menuClassHidden,"")}var Be=this.options.format.toUpperCase(),je=this.menu.querySelectorAll('input[type=radio][name="format"]');for(let en=0;en<je.length;en++){var Ve=je[en];Ve.id.toUpperCase().includes(Be)&&(Ve.checked=!0),Ve.addEventListener("change",tn=>this.onChangeRadioFormat(tn))}var Ze=this.menu.querySelector("#GPexportBtnMenuContent-"+this.uid);Ze&&Ze.addEventListener("click",en=>this.onClickButtonToggleOptions(en)),this.inputName=this.menu.querySelector("#GPexportMenuInputName-"+this.uid),this.inputDesc=this.menu.querySelector("#GPexportMenuInputDesc-"+this.uid),this.inputName.addEventListener("change",en=>this.onChangeInputName(en)),this.inputDesc.addEventListener("change",en=>this.onChangeInputDesc(en))}t.appendChild(this.menu);var Qe=this.stringToHTML(`
            <button 
                type="button"
                id="${this._addUID("GPexportButton")}" 
                class="GPexportButtonExportIcon GPsubmit gpf-btn gpf-btn-icon-export-submit fr-btn fr-m-1w">
                ${e}
            </button>
        `);switch(this.button=Qe.firstChild,this.button&&this.button.addEventListener("click",en=>this.onClickButtonExport(en)),this.options.kind){case"tertiary":this.button.classList.add("fr-btn--tertiary","gpf-btn--tertiary");break;case"secondary":this.button.classList.add("fr-btn--secondary","gpf-btn--secondary");break;case"primary":default:this.button.classList.add("fr-btn--primary","gpf-btn--primary");break}if(!this.options.icons.button)this.button.classList.remove("GPexportButtonExportIcon","gpf-btn-icon-export-submit");else switch(this.options.icons.button){case"export":break;case"save":this.button.classList.replace("GPexportButtonExportIcon","GPexportButtonSaveIcon"),this.button.classList.replace("gpf-btn-icon-export-submit","gpf-btn-icon-save-submit");break;default:this.button.classList.remove("GPexportButtonExportIcon","gpf-btn-icon-export-submit");break}t.appendChild(this.button),this.container=t}stringToHTML(e){var t=function(){if(!window.DOMParser)return!1;var je=new DOMParser;try{je.parseFromString("x","text/html")}catch{return!1}return!0};if(t()){var ke=new DOMParser,Ge=ke.parseFromString(e,"text/html");return Ge.body}var Be=document.createElement("div");return Be.innerHTML=e,Be}isPluggableControl(){return!!(this.options.control&&typeof this.options.control.getContainer=="function"&&typeof this.options.control.getLayer=="function")}exportFeatures(e,t,ke){var Ge=null;if(!e)return logger$q.warn("Impossible to export : no layer is hosting features."),Ge;if(!e.getSource()||!e.getSource().getFeatures()||!e.getSource().getFeatures().length)return logger$q.warn("Impossible to export : no features found."),Ge;e.getSource().getFeatures().forEach(en=>{var tn=en.getStyle();!tn&&this.options.control&&typeof this.options.control.getStyle=="function"&&en.setStyle(this.options.control.getStyle())});var Be={defaultStyle:ke,extensions:{}};t&&(Be.extensions={"geoportail:compute":t}),this.options.description&&(Be.extensions.description=this.inputDesc&&this.inputDesc.value?this.inputDesc.value:this.options.description);var je=null;switch(this.options.format.toUpperCase()){case"KML":Be.writeStyles=!0,Be.showPointNames=!0,je=new KML(Be);break;case"GPX":je=new GPX(Be);break;case"GEOJSON":je=new GeoJSON(Be);break}if(!je)return logger$q.warn("Impossible to export : format unknown !?"),Ge;var Ve=e.getSource().getProjection(),Ze=this.getMap();Ze&&(Ve=Ve||Ze.getView().getProjection());var Qe=e.getSource().getFeatures();return Ge=je.writeFeatures(Qe,{dataProjection:"EPSG:4326",featureProjection:Ve||"EPSG:3857"}),Ge}onClickButtonExport(e){this.isPluggableControl()||logger$q.warn("Componant not pluggable with the control !");var t=this.options.control&&this.options.control.getLayer!==void 0?this.options.control.getLayer():this.options.layer,ke=this.options.control&&this.options.control.getData!==void 0?this.options.control.getData():{},Ge=this.options.control&&this.options.control.getStyle!==void 0?this.options.control.getStyle():{},Be=this.exportFeatures(t,ke,Ge);if(!(!Be||Be==="null")){if(this.dispatchEvent({type:"button:clicked",content:Be,name:this.options.name,description:this.options.description,format:this.options.format,layer:t}),this.options.download){var je=document.createElement("a"),Ve="utf-8";if(je.setAttribute("href","data:"+this.mimeType+";charset="+Ve+","+encodeURIComponent(Be)),je.setAttribute("download",this.options.name+this.extension),document.createEvent){var Ze=document.createEvent("MouseEvents");Ze.initEvent("click",!0,!0),je.dispatchEvent(Ze)}else je.click()}this.options.callback&&typeof this.options.callback=="function"&&this.options.callback(Be,t)}}onChangeRadioFormat(e){this.setFormat(e.target.value)}onChangeInputName(e){this.setName(e.target.value)}onChangeInputDesc(e){this.setDescription(e.target.value)}onClickButtonToggleOptions(e){e.target.ariaExpanded=e.target.ariaExpanded!=="true";var t=this.menu.querySelector("#"+e.target.getAttribute("aria-controls"));t&&(e.target.ariaExpanded==="true"?(t.classList.add("fr-collapse--expanded"),this.menu.classList.add("gpf-full-container"),this.menu.classList.add("gpf-accordion--opened"),t.classList.remove("GPelementHidden")):(t.classList.remove("fr-collapse--expanded"),this.menu.classList.remove("gpf-full-container"),this.menu.classList.remove("gpf-accordion--opened"),t.classList.add("GPelementHidden")))}getContainer(){return this.container}setControl(e){this.options.control=e}setTarget(e){this.options.target=e}setFormat(e){switch(this.options.format=e.toUpperCase(),this.options.format){case"KML":this.extension=".kml",this.mimeType="application/vnd.google-earth.kml+xml";break;case"GPX":this.extension=".gpx",this.mimeType="application/gpx+xml";break;case"GEOJSON":this.extension=".geojson",this.mimeType="application/geo+json";break;default:this.options.format="GEOJSON",this.extension=".geojson",this.mimeType="application/geo+json";break}}setName(e){this.options.name=e}setDescription(e){this.options.description=e}setTitle(e){this.options.title=e,this.button&&(this.button.textContent=this.options.menu?this.options.icons.menu+e:e)}setKind(e){if(this.options.kind=e,this.button)switch(this.button.classList.remove("fr-btn--tertiary","gpf-btn--tertiary"),this.button.classList.remove("fr-btn--secondary","gpf-btn--secondary"),this.options.kind){case"tertiary":this.button.classList.add("fr-btn--tertiary","gpf-btn--tertiary");break;case"secondary":this.button.classList.add("fr-btn--secondary","gpf-btn--secondary");break;case"primary":default:this.button.classList.add("fr-btn--primary","gpf-btn--primary");break}}setMenu(e){if(this.options.menu=e,this.button&&(this.button.textContent=this.options.menu?this.options.icons.menu+this.options.title:this.options.title),this.menu&&this.options.menu){var t=this.menu.className;this.menu.className=t.replace(this.menuClassHidden,"");var ke=this.options.format.toUpperCase(),Ge=this.menu.querySelectorAll('input[type=radio][name="format"]');for(let je=0;je<Ge.length;je++){var Be=Ge[je];Be.id.toUpperCase().includes(ke)&&(Be.checked=!0)}}}setLayer(e){this.options.layer=e}setDownload(e){this.options.download=e}}Object.assign(ButtonExport.prototype,ExportDOM);Object.assign(ButtonExport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Export=ButtonExport);var logger$p=LoggerByDefault.getLogger("RouteDOM"),RouteDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GProute"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowRoutePictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowRoutePicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowRoutePicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-route fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir le calcul d'itinéraire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowRoutePanelClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowRoutePanelClick(ke)}),e},_createRoutePanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GProutePanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createRoutePanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createDrawingButtonsPluginDiv:function(){var Oe=document.createElement("div");return Oe.className="container-buttons-plugin fr-mx-2w",Oe},_createRoutePanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Calcul d'itinéraire",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GProutePanelClose"),ke.className="GPpanelClose GProutePanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Masquer le panneau",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowRoutePicto")).click()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowRoutePicto")).click()});var Ge=document.createElement("span");return Ge.className="GPelementHidden gpf-visible",Ge.innerText="Fermer",ke.appendChild(Ge),e.appendChild(ke),e},_createRoutePanelFooterElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelFooter gpf-panel__footer fr-modal__footer",Oe},_createRoutePanelFormPointLabel:function(Oe,e=!0){var t=document.createElement("p");t.innerHTML=Oe;var ke=e?"":" GPelementHidden gpf-hidden";return t.className="GProutePointLabelP gpf-label fr-label"+ke,t},_createRoutePanelFormElement:function(){var Oe=this,e=document.createElement("form");return e.id=this._addUID("GProuteForm"),e.className="gpf-panel__content fr-modal__content",e.setAttribute("onkeypress","return event.keyCode != 13;"),e.addEventListener("submit",function(t){logger$p.log(t),t.preventDefault();var ke=document.getElementsByClassName(Oe._addUID("GPlocationPoint")),Ge=ke[0].childNodes[0].id,Be=ke[ke.length-1].childNodes[0].id,je=SelectorID.index(Ge),Ve=SelectorID.index(Be);if(document.getElementById(Oe._addUID("GPlocationOrigin_"+je)).value===""&&document.getElementById(Oe._addUID("GPlocationOriginCoords_"+je)).value===""||document.getElementById(Oe._addUID("GPlocationOrigin_"+Ve)).value===""&&document.getElementById(Oe._addUID("GPlocationOriginCoords_"+Ve)).value==="")return!1;Oe._addRouteResultsStagesValuesElement(ke);var Ze=null;document.getElementById(Oe._addUID("GProuteComputationChoice"))&&(document.getElementById(Oe._addUID("GProuteComputationFastest"))&&document.getElementById(Oe._addUID("GProuteComputationFastest")).checked&&(Ze=document.getElementById(Oe._addUID("GProuteComputationFastest")).value),document.getElementById(Oe._addUID("GProuteComputationShortest"))&&document.getElementById(Oe._addUID("GProuteComputationShortest")).checked&&(Ze=document.getElementById(Oe._addUID("GProuteComputationShortest")).value));var Qe=null;document.getElementById(Oe._addUID("GProuteTransportCar"))&&document.getElementById(Oe._addUID("GProuteTransportCar")).checked&&(Qe=document.getElementById(Oe._addUID("GProuteTransportCar")).value),document.getElementById(Oe._addUID("GProuteTransportPedestrian"))&&document.getElementById(Oe._addUID("GProuteTransportPedestrian")).checked&&(Qe=document.getElementById(Oe._addUID("GProuteTransportPedestrian")).value);for(var en=[],tn=document.getElementsByClassName("GProuteExclusionsOption"),an=0;an<tn.length;an++){var cn=tn[an].htmlFor,un=document.getElementById(cn);un.checked||en.push(un.value)}return Oe.onRouteComputationSubmit({computation:Ze,transport:Qe,exclusions:en}),!1}),e},_createRoutePanelResultsElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GProuteResultsPanel"),Oe.className="GPelementHidden gpf-hidden",Oe.appendChild(this._createRouteResultsStagesElement()),Oe.appendChild(this._createRouteResultsElement()),Oe.appendChild(this._createRouteShowResultsDetailsElement()),Oe.appendChild(this._createRouteResultsDetailsElement()),Oe},_createRouteWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GProuteCalcWaitingContainer"),Oe.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createRouteResultsStagesElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GProuteResultsStages"),Oe},_addRouteResultsStagesValuesElement:function(Oe){document.getElementById(this._addUID("GProuteResultsStages")).innerHTML="";for(var e=0;e<Oe.length;e++){var t=Oe[e].childNodes[0].id,ke=SelectorID.index(t);if(document.getElementById(this._addUID("GPlocationPoint_"+ke)).className==="GPflexInput GPlocationStageFlexInput gpf-flex"){var Ge=document.createElement("div");Ge.className="GProuteResultsStages";var Be=document.createElement("div");Be.className="GProuteResultStageLabel",Be.innerHTML=document.getElementById(this._addUID("GPlocationOriginLabel_"+ke)).innerHTML+" :",Ge.appendChild(Be);var je=document.createElement("div");je.className="GProuteResultStageValue";var Ve=document.getElementById(this._addUID("GPlocationOriginCoords_"+ke)),Ze=Ve.value,Qe=Ve.className==="GPelementVisible gpf-visible";Ze!==null&&Ze!==""&&Qe?je.innerHTML=Ze:je.innerHTML=document.getElementById(this._addUID("GPlocationOrigin_"+ke)).value,Ge.appendChild(je),je.innerHTML!==""&&document.getElementById(this._addUID("GProuteResultsStages")).appendChild(Ge)}}},_createRouteResultsElement:function(){var Oe=this,e=document.createElement("div");e.id=this._addUID("GProuteResults");var t=document.createElement("div");t.id=this._addUID("GProuteResultsValues"),e.appendChild(t);var ke=document.createElement("div");ke.id=this._addUID("GProuteResultsMode");var Ge=document.createElement("select");Ge.id=this._addUID("GProuteResultsComputationSelect"),Ge.className="GPselect gpf-select fr-select",Ge.addEventListener("change",function(Qe){Oe.onRouteModeComputationChangeAndRun(Qe)});for(var Be=[{code:"fastest",label:"Plus rapide"},{code:"shortest",label:"Plus court"}],je=0;je<Be.length;je++){var Ve=document.createElement("option");Ve.value=Be[je].code,Ve.text=Be[je].label,Ge.appendChild(Ve)}ke.appendChild(Ge),e.appendChild(ke);var Ze=document.createElement("div");return Ze.id=this._addUID("GProuteResultsNew"),Ze.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",Ze.title="Modifier le calcul",Ze.addEventListener("click",function(Qe){document.getElementById(Oe._addUID("GProuteResultsPanel")).className="GPelementHidden gpf-hidden",document.getElementById(Oe._addUID("GProuteForm")).className="gpf-panel__content fr-modal__content",Oe.onShowRouteResultsNewClick(Qe)}),e.appendChild(Ze),e},_addRouteResultsValuesElement:function(Oe,e,t){var ke=document.getElementById(this._addUID("GProuteResultsValues"));if(ke.childElementCount)for(;ke.firstChild;)ke.removeChild(ke.firstChild);var Ge=document.createElement("div");Ge.className="GProuteResultsValue";var Be=document.createElement("label");Be.className="GProuteResultsValueLabel",Be.innerHTML="Distance :",Ge.appendChild(Be);var je=0,Ve=parseInt(Oe/1e3,10);if(!Ve)je=Math.round(Oe)+" m";else{var Ze=Math.round(Oe);Ze=Ze/1e3,je=Ze+" km"}var Qe=document.createElement("div");Qe.id=this._addUID("GProuteResultsValueDist"),Qe.innerHTML=je,Ge.appendChild(Qe),ke.appendChild(Ge);var en=document.createElement("div");en.className="GProuteResultsValue";var tn=document.createElement("label");tn.className="GProuteResultsValueLabel",tn.innerHTML="Durée :",en.appendChild(tn);var an=document.createElement("div");return an.id=this._addUID("GProuteResultsValueDist"),an.innerHTML=t(e),en.appendChild(an),ke.appendChild(en),ke},_createRouteShowResultsDetailsElement:function(){var Oe=document.createElement("div");if(Oe.className="GProuteResultsShowDetailsDiv gpf-flex fr-checkbox-group fr-m-1w",!checkDsfr()){var e=document.createElement("div");e.className="GPfakeBorder GPfakeBorderLeft",Oe.appendChild(e)}var t=document.createElement("input");t.id=this._addUID("GProuteResultsShowDetails"),t.type="checkbox",Oe.appendChild(t);var ke=document.createElement("label");if(ke.className="gpf-label fr-label",ke.htmlFor=this._addUID("GProuteResultsShowDetails"),ke.innerHTML="Afficher le détail",Oe.appendChild(ke),!checkDsfr()){var Ge=document.createElement("label");Ge.htmlFor=this._addUID("GProuteResultsShowDetails"),Ge.innerHTML="Masquer le détail",Oe.appendChild(Ge);var Be=document.createElement("div");Be.className="GPfakeBorder",Oe.appendChild(Be)}return Oe},_createRouteResultsDetailsElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GProuteResultsDetails"),Oe},_addRouteResultsDetailsElement:function(Oe,e){var t=this,ke=document.getElementById(this._addUID("GProuteResultsDetails"));if(ke.childElementCount)for(;ke.firstChild;)ke.removeChild(ke.firstChild);for(var Ge=0,Be=0,je=0;je<Oe.length;je++){var Ve=je+1,Ze=Oe[je],Qe=document.createElement("div");Qe.className="GProuteResultsDetailsNumber",Qe.innerHTML=Ve+".",ke.appendChild(Qe),Be+=parseFloat(Ze.duration),Ge+=parseFloat(Ze.distance);var en=0,tn=parseInt(Ge/1e3,10);if(!tn)en=Math.round(Ge)+" m";else{var an=Math.round(Ge);an=an/1e3,en=an+" km"}var cn=document.createElement("div");cn.className="GProuteResultsDetailsInstruction",cn.id=this._addUID("GProuteResultsDetailsInstruction_"+Ve),cn.title="distance : "+en+" / temps : "+e(Be),cn.innerHTML=Ze.instruction,cn.addEventListener("mouseover",function(un){t.onRouteResultsDetailsMouseOver(un)}),cn.addEventListener("mouseout",function(un){t.onRouteResultsDetailsMouseOut(un)}),cn.addEventListener("click",function(un){typeof t.onRouteResultsDetailsClick=="function"&&t.onRouteResultsDetailsClick(un)}),ke.appendChild(cn)}return ke},_createRoutePanelFormPointElement:function(Oe,e,t){var ke=this,Ge=document.createElement("div");Ge.id="GProutePoint"+Oe,Ge.className=t?"GPflexInput GProuteStageFlexInput":"GPflexInput GProuteStageFlexInputHidden";var Be=document.createElement("label");Be.id="GProuteOriginLabel"+Oe,Be.htmlFor="GProuteOrigin"+Oe,Be.innerHTML=e,Be.addEventListener("click",function(){var en=this.id.charAt(this.id.length-1);document.getElementById("GProuteOriginCoords"+en).value="";for(var tn=1;tn<8;tn++)document.getElementById("GProutePoint"+tn).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+en).checked=!1,document.getElementById("GProuteOrigin"+en).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+en).className="GPelementHidden gpf-hidden"}),Ge.appendChild(Be);var je=document.createElement("input");je.id="GProuteOrigin"+Oe,je.className="GPelementVisible gpf-visible",je.type="text",je.placeholder="Saisir une adresse, un lieu...",je.addEventListener("keyup",function(en){var tn=en.which||en.keyCode;if(!(tn===13||tn===10)){var an=this.id.charAt(this.id.length-1);document.getElementById("GProuteOrigin"+an).value.length>2?document.getElementById("GProuteAutoCompleteList"+an).style.display="block":document.getElementById("GProuteAutoCompleteList"+an).style.display="none",ke.onAutoCompleteSearchText(en)}}),je.addEventListener("blur",function(){var en=this.id.charAt(this.id.length-1);document.getElementById("GProuteAutoCompleteList"+en).style.display="none"}),Ge.appendChild(je);var Ve=document.createElement("input");Ve.id="GProuteOriginCoords"+Oe,Ve.className="GPelementHidden gpf-hidden",Ve.type="text",Ve.disabled=!0,Ge.appendChild(Ve);var Ze=document.createElement("input");Ze.id="GProuteOriginPointer"+Oe,Ze.type="checkbox",Ge.appendChild(Ze);var Qe=document.createElement("label");return Qe.id="GProuteOriginPointerImg"+Oe,Qe.htmlFor="GProuteOriginPointer"+Oe,Qe.className="GProuteOriginPointerImg",Qe.title="Pointer un lieu sur la carte",Qe.addEventListener("click",function(en){en.preventDefault(),en.stopPropagation();var tn=this.id.charAt(this.id.length-1),an;for(an=1;an<8;an++)tn!==an&&(document.getElementById("GProuteOriginPointer"+an).checked=!1,document.getElementById("GProuteOriginCoords"+an).value==="Pointer un lieu sur la carte"&&(document.getElementById("GProuteOriginCoords"+an).value="",document.getElementById("GProuteOrigin"+an).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+an).className="GPelementHidden gpf-hidden"));if(document.getElementById("GProuteOriginPointer"+tn).checked){for(document.getElementById("GProuteOriginCoords"+tn).value="",an=1;an<8;an++)document.getElementById("GProutePoint"+an).style.display="flex";document.getElementById("GProuteForm").className="gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+tn).checked=!1,document.getElementById("GProuteOrigin"+tn).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+tn).className="GPelementHidden gpf-hidden"}else{for(document.getElementById("GProuteOriginCoords"+tn).value="Pointer un lieu sur la carte",an=1;an<8;an++)tn===an?document.getElementById("GProutePoint"+an).style.display="flex":document.getElementById("GProutePoint"+an).style.display="none";document.getElementById("GProuteForm").className="GProuteFormMini gpf-panel__content fr-modal__content",document.getElementById("GProuteOriginPointer"+tn).checked=!0,document.getElementById("GProuteOrigin"+tn).className="GPelementHidden gpf-hidden",document.getElementById("GProuteOriginCoords"+tn).className="GPelementVisible gpf-visible"}ke.onRouteMapPointClick(en)}),Ge.appendChild(Qe),Ge},_createRoutePanelFormRemoveStageElement:function(Oe){var e=this,t=document.createElement("div");return t.id="GProuteStageRemove"+Oe,t.className="GProuteStageRemove",t.title="Supprimer l'étape",Oe!==1&&Oe!==7&&t.addEventListener("click",function(ke){var Ge=this.id.charAt(this.id.length-1);document.getElementById("GProutePoint"+Ge).className="GPflexInput GProuteStageFlexInputHidden",document.getElementById("GProuteOrigin"+Ge).value="",document.getElementById("GProuteOrigin"+Ge).className="GPelementVisible gpf-visible",document.getElementById("GProuteOriginCoords"+Ge).value="",document.getElementById("GProuteOriginCoords"+Ge).className="GPelementHidden gpf-hidden",document.getElementById("GProuteStageAdd").style.display="",e.onRouteRemovePointClick(ke)}),t},_createRoutePanelFormAddStageElement:function(){var Oe=this,e=document.createElement("div");return e.id="GProuteStageAdd",e.title="Ajouter une étape",e.addEventListener("click",function(t){for(var ke=1,Ge=0,Be=2;Be<7;Be++)document.getElementById("GProutePoint"+Be).className==="GPflexInput GProuteStageFlexInputHidden"?ke===1&&(ke=Be):Ge++;ke<7&&(document.getElementById("GProutePoint"+ke).className="GPflexInput GProuteStageFlexInput"),Ge===4&&(document.getElementById("GProuteStageAdd").style.display="none"),Oe.onRouteAddPointClick(t)}),e},_createRoutePanelFormAutoCompleteListElement:function(Oe){var e=this,t=document.createElement("div");return t.id="GProuteAutoCompleteList"+Oe,t.className="GPadvancedAutoCompleteList",t.addEventListener?t.addEventListener("click",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById("GProuteAutoCompleteList"+Oe).style.display="none"},!1):t.attachEvent&&t.attachEvent("onclick",function(ke){e.onAutoCompletedResultsItemClick(ke),document.getElementById("GProuteAutoCompleteList"+Oe).style.display="none"}),t},_createRouteAutoCompletedLocationElement:function(Oe,e,t){var ke=document.getElementById("GProuteAutoCompleteList"+e),Ge=document.createElement("div");Ge.id="AutoCompletedLocation"+t,Ge.className="GPautoCompleteProposal",Ge.innerHTML=GeocodeUtils.getSuggestedLocationFreeform(Oe),ke.appendChild(Ge)},_createRoutePanelFormModeChoiceTransportElement:function(Oe){var e=this,t=document.createElement("div");t.id=this._addUID("GProuteTransportChoice");var ke=document.createElement("label");ke.className="GProuteModeLabel gpf-label fr-label",ke.innerHTML="Choisir un mode de déplacement",t.appendChild(ke);var Ge=document.createElement("div");Ge.className="gpf-radio-btn-group";for(var Be=0;Be<Oe.length;Be++){var je=Oe[Be],Ve=document.createElement("div");if(Ve.className="GProuteTransportChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w",je==="Voiture"){var Ze=document.createElement("input");Ze.id=this._addUID("GProuteTransportCar"),Ze.type="radio",Ze.name="GProuteTransport",Ze.value="Voiture",Be===0&&(Ze.checked=!0),Ze.addEventListener?Ze.addEventListener("change",function(an){e.onRouteModeTransportChange(an)}):Ze.attachEvent&&Ze.attachEvent("onchange",function(an){e.onRouteModeTransportChange(an)}),Ve.appendChild(Ze);var Qe=document.createElement("label");Qe.className="GProuteTransportImg gpf-label fr-label",Qe.htmlFor=this._addUID("GProuteTransportCar"),Qe.title="Voiture",Qe.innerHTML="Voiture",Ve.appendChild(Qe)}if(je==="Pieton"){var en=document.createElement("input");en.id=this._addUID("GProuteTransportPedestrian"),en.type="radio",en.name="GProuteTransport",en.value="Pieton",Be===0&&(en.checked=!0),en.addEventListener?en.addEventListener("change",function(an){e.onRouteModeTransportChange(an)}):en.attachEvent&&en.attachEvent("onchange",function(an){e.onRouteModeTransportChange(an)}),Ve.appendChild(en);var tn=document.createElement("label");tn.className="GProuteTransportImg gpf-label fr-label",tn.htmlFor=this._addUID("GProuteTransportPedestrian"),tn.title="Piéton",tn.innerHTML="Piéton",Ve.appendChild(tn)}Ge.appendChild(Ve)}return t.appendChild(Ge),t},_createRoutePanelFormModeChoiceComputeElement:function(){var Oe=this,e=document.createElement("div");e.id=this._addUID("GProuteComputationChoice"),e.className="fr-mt-2w";var t=document.createElement("label");t.className="GProuteComputationLabel gpf-label fr-label",t.innerHTML="Mode de calcul",e.appendChild(t);var ke=document.createElement("div");ke.className="gpf-radio-btn-group";var Ge=document.createElement("div");Ge.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Be=document.createElement("input");Be.id=this._addUID("GProuteComputationFastest"),Be.type="radio",Be.name="GProuteComputation",Be.value="fastest",Be.checked=!0,Be.addEventListener?Be.addEventListener("change",function(en){Oe.onRouteModeComputationChange(en)}):Be.attachEvent&&Be.attachEvent("onchange",function(en){Oe.onRouteModeComputationChange(en)}),Ge.appendChild(Be);var je=document.createElement("label");je.className="gpf-label fr-label",je.htmlFor=this._addUID("GProuteComputationFastest"),je.title="Plus rapide",je.innerHTML="Plus rapide",Ge.appendChild(je),ke.appendChild(Ge);var Ve=document.createElement("div");Ve.className="GProuteComputationChoice gpf-flex gpf-radio-group fr-radio-group fr-my-1w";var Ze=document.createElement("input");Ze.id=this._addUID("GProuteComputationShortest"),Ze.type="radio",Ze.name="GProuteComputation",Ze.value="shortest",Ze.addEventListener?Ze.addEventListener("change",function(en){Oe.onRouteModeComputationChange(en)}):Ze.attachEvent&&Ze.attachEvent("onchange",function(en){Oe.onRouteModeComputationChange(en)}),Ve.appendChild(Ze);var Qe=document.createElement("label");return Qe.className="gpf-label fr-label",Qe.htmlFor=this._addUID("GProuteComputationShortest"),Qe.title="Plus court",Qe.innerHTML="Plus court",Ve.appendChild(Qe),ke.appendChild(Ve),e.appendChild(ke),e},_createShowRouteExclusionsPictoElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPshowRouteExclusionsPicto");var t="";return checkDsfr()&&(t="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowRouteExclusionsPicto ${t} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(ke){ke.preventDefault();var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowRouteExclusionsClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){ke.preventDefault();var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowRouteExclusionsClick(ke)}),e},_createRoutePanelFormExclusionsElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GProuteExclusions"),Oe.className="fr-mt-2w";var e=document.createElement("label");return e.className="GProuteExclusionsLabel fr-label",e.innerHTML="Passages autorisés",Oe.appendChild(e),Oe},_createRoutePanelFormExclusionOptionsElement:function(Oe){var e=this,t=document.createElement("div");t.className="GProuteExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Ge=Oe[ke];switch(ke){case"toll":var Be=document.createElement("input");Be.id=this._addUID("GProuteExclusionsToll"),Be.type="checkbox",Be.value="Toll",Be.name="Peage",Be.checked=!Ge,Be.addEventListener?Be.addEventListener("change",function(tn){e.onRouteExclusionsChange(tn)}):Be.attachEvent&&Be.attachEvent("onchange",function(tn){e.onRouteExclusionsChange(tn)}),t.appendChild(Be);var je=document.createElement("label");je.className="GProuteExclusionsOption",je.htmlFor=this._addUID("GProuteExclusionsToll"),je.innerHTML="Péages",t.appendChild(je);break;case"tunnel":var Ve=document.createElement("input");Ve.id=this._addUID("GProuteExclusionsTunnel"),Ve.type="checkbox",Ve.value="Tunnel",Ve.name="Tunnel",Ve.checked=!Ge,Ve.addEventListener?Ve.addEventListener("change",function(tn){e.onRouteExclusionsChange(tn)}):Ve.attachEvent&&Ve.attachEvent("onchange",function(tn){e.onRouteExclusionsChange(tn)}),t.appendChild(Ve);var Ze=document.createElement("label");Ze.className="GProuteExclusionsOption",Ze.htmlFor=this._addUID("GProuteExclusionsTunnel"),Ze.innerHTML="Tunnels",t.appendChild(Ze);break;case"bridge":var Qe=document.createElement("input");Qe.id=this._addUID("GProuteExclusionsBridge"),Qe.type="checkbox",Qe.value="Bridge",Qe.name="Ponts",Qe.checked=!Ge,Qe.addEventListener?Qe.addEventListener("change",function(tn){e.onRouteExclusionsChange(tn)}):Qe.attachEvent&&Qe.attachEvent("onchange",function(tn){e.onRouteExclusionsChange(tn)}),t.appendChild(Qe);var en=document.createElement("label");en.className="GProuteExclusionsOption",en.htmlFor=this._addUID("GProuteExclusionsBridge"),en.innerHTML="Ponts",t.appendChild(en);break}}return t},_createRouteSubmitFormElement:function(){var Oe=document.createElement("input");return Oe.id=this._addUID("GProuteSubmit"),Oe.className="GPsubmit gpf-btn gpf-btn-icon-submit fr-btn",Oe.type="submit",Oe.value="Calculer l'itinéraire",Oe},_createRouteFormResetElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GProuteReset"),e.title="Réinitialiser les paramètres",e.className="GPresetPicto gpf-btn gpf-btn-icon-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke),Oe.onRouteResetClick(t)}),e}},logger$o=LoggerByDefault.getLogger("route"),Route=class ep extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ep))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Route",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.element=this._container,this.options.export){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var ke=this;this.export.on("button:clicked",Ge=>{ke.dispatchEvent({type:"export:compute",content:Ge.content})})}this.draggable&&Draggable.dragElement(this._panelRouteContainer,this._panelHeaderRouteContainer,e.getTargetElement()),this.collapsed||this._showRouteButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$o.log("[ERROR] Route:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GProutePanelClose-"+this._uid).click():this._showRouteButton.click(),this.collapsed=e)}getLayer(){return this._geojsonSections}setLayer(e){if(!e){this._geojsonSections=null;return}if(!(e instanceof VectorLayer)){logger$o.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonSections=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){logger$o.log("no valid geojson given :"+t.message)}}getData(){var e=[];for(let ke=0;ke<this._currentPoints.length;ke++){const Ge=this._currentPoints[ke];e.push(Ge.getCoordinate())}var t={type:"route",points:e,transport:this._currentTransport,exclusions:this._currentExclusions,computation:this._currentComputation,results:{}};return Helper.assign(t.results,this._currentRouteInformations),t}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;for(var t=0;t<e.points.length;t++){const Ve=e.points[t];Ve&&this._currentPoints[t].setCoordinate(Ve,"EPSG:4326")}for(var ke=0;ke<this._currentPoints.length;ke++){var Ge=this._currentPoints[ke];if(Ge.getCoordinate()){var Be=ke+1+"-"+this._uid,je=Ge.getCoordinate()[1].toFixed(4)+" / "+Ge.getCoordinate()[0].toFixed(4);document.getElementById("GPlocationOriginCoords_"+Be).value=je,document.getElementById("GPlocationOrigin_"+Be).value=je,ke>0&&ke<6&&(document.getElementById("GPlocationPoint_"+Be).className="GPflexInput GPelementHidden gpf-flex gpf-hidden ")}}this._currentRouteInformations=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}init(){for(let cn=0;cn<this._currentPoints.length;cn++){const un=this._currentPoints[cn];var e=cn+1,t=un.getCoordinate();if(t){var ke=document.getElementById("GPlocationOrigin_"+e+"-"+this._uid);ke.value=t[1].toFixed(4)+" / "+t[0].toFixed(4),cn>0&&cn<6&&(document.getElementById("GPlocationPoint_"+e+"-"+this._uid).className="GPflexInput GPlocationStageFlexInput gpf-flex")}}var Ge=document.getElementsByClassName("GPlocationPoint-"+this._uid);this._addRouteResultsStagesValuesElement(Ge);var Be;this._currentTransport==="Pieton"?(Be=document.getElementById("GProuteTransportPedestrian-"+this._uid),Be&&(Be.checked="true")):(Be=document.getElementById("GProuteTransportCar-"+this._uid),Be&&(Be.checked="true"));var je=document.getElementById("GProuteComputationSelect-"+this._uid);je&&(je.value=this._currentComputation);var Ve=document.getElementById("GProuteExclusionsToll-"+this._uid);Ve&&(this._currentExclusions.indexOf("toll")!==-1?Ve.checked=!1:Ve.checked=!0);var Ze=document.getElementById("GProuteExclusionsTunnel-"+this._uid);Ze&&(this._currentExclusions.indexOf("tunnel")!==-1?Ze.checked=!1:Ze.checked=!0);var Qe=document.getElementById("GProuteExclusionsBridge-"+this._uid);Qe&&(this._currentExclusions.indexOf("bridge")!==-1?Qe.checked=!1:Qe.checked=!0);var en=this._currentRouteInformations.totalDistance,tn=this._currentRouteInformations.totalTime,an=this._simplifiedInstructions(this._currentRouteInformations.routeInstructions);an&&this._fillRouteResultsDetailsContainer(en,tn,an),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}clean(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null;for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations(),this._clearRouteInputOptions(),this._clearRouteResultsDetails(),this.setLayer(),this._formRouteContainer.className="gpf-panel__content fr-modal__content",this._resultsRouteContainer.className="GPelementHidden gpf-hidden"}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},routeOptions:{},autocompleteOptions:{},layerDescription:{title:"Itinéraire",description:"Itinéraire basé sur un graphe"}},Helper.assign(this.options,e);var t={departure:{url:Marker.red,offset:Marker.defaultOffset},stages:{url:Marker.lightOrange,offset:Marker.defaultOffset},arrival:{url:Marker.darkOrange,offset:Marker.defaultOffset}};this.options.markersOpts=Helper.assign(t,e.markersOpts),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._showRouteButton=null,this._panelRouteContainer=null,this._panelHeaderRouteContainer=null,this._waitingContainer=null,this._formRouteContainer=null,this._resultsRouteContainer=null,this._showRouteExclusionsElement=null,this._currentPoints=[],this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._waiting=!1,this._timer=null,this._geojsonRoute=null,this._geojsonSections=null,this._geojsonObject=null,this.export=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null,this._resultsSelectInteraction=null,this._resultsHoverInteraction=null,this._defaultFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(0,183,152,0.9)",width:12})}),this._selectedFeatureStyle=new Style$1({stroke:new Stroke({color:"rgba(255,102,0,0.9)",width:12})}),this._currentRouteInformations=null,this._resources={},this.listenerKey=null}_checkInputOptions(e){if(e.graphs)if(Array.isArray(e.graphs)&&e.graphs.length)for(var t=0;t<e.graphs.length;t++)typeof e.graphs[t]=="string"?(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture")):(logger$o.log("[ol.control.Route] ERROR : parameter 'graphs' elements should be of type 'string'"),e.graphs[t]=null);else logger$o.warn("'graphs' parameter should be an array"),e.graphs=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initContainer(e){var t=this._container;if(t.childElementCount>0)return t;var ke=this._showRouteButton=this._createShowRoutePictoElement();t.appendChild(ke);var Ge=this._panelRouteContainer=this._createRoutePanelElement(),Be=this._createRoutePanelDivElement();Ge.appendChild(Be);var je=this._panelHeaderRouteContainer=this._createRoutePanelHeaderElement();Be.appendChild(je);var Ve=this._formRouteContainer=this._createRoutePanelFormElement();Ve.appendChild(this._createRoutePanelFormModeChoiceTransportElement(this.options.graphs));for(var Ze=this._createRoutePanelFormPointsElement(e),Qe=0;Qe<Ze.length;Qe++)Ve.appendChild(Ze[Qe]);Ve.appendChild(this._createRoutePanelFormModeChoiceComputeElement()),this._showRouteExclusionsElement=this._createShowRouteExclusionsPictoElement(),Ve.appendChild(this._showRouteExclusionsElement);var en=this._createRoutePanelFormExclusionsElement();en.appendChild(this._createRoutePanelFormExclusionOptionsElement(this.options.exclusions)),Ve.appendChild(en);var tn=this._createRoutePanelFooterElement();if(Ve.appendChild(tn),!checkDsfr()){var an=this._createRouteFormResetElement();tn.appendChild(an)}var cn=this._createRouteSubmitFormElement();tn.appendChild(cn),Be.appendChild(Ve);var un=this._resultsRouteContainer=this._createRoutePanelResultsElement();Be.appendChild(un);var dn=this._createDrawingButtonsPluginDiv();Be.appendChild(dn);var fn=this._waitingContainer=this._createRouteWaitingElement();return Be.appendChild(fn),t.appendChild(Ge),t.addEventListener&&t.addEventListener("click",pn=>this._hideRouteSuggestedLocations(pn)),t}_initTransport(){this._currentTransport="Pieton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.routeOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="fastest";var e=this.options.routeOptions;e.routePreference&&(this._currentComputation=e.routePreference)}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e[t]&&this._currentExclusions.push(t);var ke=this.options.routeOptions;Array.isArray(ke.exclusions)&&(this._currentExclusions=ke.exclusions)}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var ke=document.createElement("button");return ke.className="gp-styling-button closer",ke.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(ke),t}_createRoutePanelFormPointsElement(e){var t=[],ke=1,Ge=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:ke,groupId:this._uid,markerOpts:this.options.markersOpts.departure,display:!0},autocompleteOptions:this.options.autocompleteOptions||null});for(Ge.setMap(e),this._addFormPointsEventListeners(Ge),t.push(this._createRoutePanelFormPointLabel("Départ")),t.push(Ge._container),this._currentPoints.push(Ge),ke=2;ke<7;ke++){var Be=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:ke,groupId:this._uid,markerOpts:this.options.markersOpts.stages,display:!1,removeOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});Be.setMap(e),this._addFormPointsEventListeners(Be),t.push(this._createRoutePanelFormPointLabel("Étape",!1)),t.push(Be._container),this._currentPoints.push(Be)}var je=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:ke,groupId:this._uid,markerOpts:this.options.markersOpts.arrival,display:!0,addOption:!0},autocompleteOptions:this.options.autocompleteOptions||null});return je.setMap(e),this._addFormPointsEventListeners(je),t.push(this._createRoutePanelFormPointLabel("Arrivée")),t.push(je._container),this._currentPoints.push(je),t}_addFormPointsEventListeners(e){e&&(e._buttonLabel.addEventListener?(e._buttonLabel.addEventListener("click",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.addEventListener("click",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.addEventListener("click",t=>{logger$o.trace("click on _removePointElement",t)}),e._addPointElement&&e._addPointElement.addEventListener("click",t=>{logger$o.trace("click on _addPointElement",t)})):e._buttonLabel.attachEvent&&(e._buttonLabel.attachEvent("onclick",t=>this.onRouteOriginLabelClick(t)),e._inputShowPointer.attachEvent("onclick",t=>this.onRouteOriginPointerClick(t,e)),e._removePointElement&&e._removePointElement.attachEvent("onclick",t=>{}),e._addPointElement&&e._addPointElement.attachEvent("onclick",t=>{})))}onRouteComputationSubmit(e){logger$o.log("onRouteComputationSubmit",e);var t=this._currentPoints,ke;if(t[0]&&t[0].getCoordinate){var Ge=t[0].getCoordinate();ke={x:Ge[0],y:Ge[1]},logger$o.log("start",ke)}var Be,je=t[t.length-1];if(je&&je.getCoordinate){var Ve=je.getCoordinate();Be={x:Ve[0],y:Ve[1]},logger$o.log("end",Be)}for(var Ze=[],Qe=1;Qe<t.length-1;Qe++)if(t[Qe]&&t[Qe].getCoordinate){var en=t[Qe].getCoordinate();if(en){var tn={x:en[0],y:en[1]};logger$o.log("step",tn),Ze.push(tn)}}this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions;var an=this.options.routeOptions,cn;an.resource?cn=an.resource:this._currentComputation==="fastest"&&this._currentTransport==="Pieton"&&(cn="bdtopo-valhalla");var un=an.protocol||"XHR",dn=an.timeOut||0;un==="JSONP"&&dn===0&&(dn=15e3);var fn=an.onFailure!==null&&typeof an.onFailure=="function",pn=an.onSuccess!==null&&typeof an.onSuccess=="function",gn=this;this._requestRouting({startPoint:ke,endPoint:Be,viaPoints:Ze,graph:an.graph||this._currentTransport,routePreference:an.routePreference||this._currentComputation,exclusions:an.exclusions||this._currentExclusions,geometryInInstructions:!0,distanceUnit:"m",timeOut:dn,protocol:un,resource:cn,onSuccess:function(yn){logger$o.log(yn),yn&&gn._fillRouteResultsDetails(yn),pn&&an.onSuccess.call(gn,yn)},onFailure:function(yn){gn._hideWaitingContainer(),gn._clearRouteResultsDetails(),logger$o.log(yn.message),fn&&an.onFailure.call(gn,yn)}})}onRouteOriginLabelClick(){this._formRouteContainer.className="gpf-panel__content gpf-mobile-form fr-modal__content",unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}onRouteOriginPointerClick(e,t){var ke=this.getMap();t._inputShowPointerContainer.checked?(this._formRouteContainer.className="GProuteFormMini gpf-panel__content fr-modal__content",e.target.parentElement.parentElement.classList.add("selected"),this.listenerKey=ke.on("click",()=>{e.target.parentElement.parentElement.classList.remove("selected"),this._formRouteContainer.className==="GProuteFormMini gpf-panel__content fr-modal__content"&&(this._formRouteContainer.className="gpf-panel__content fr-modal__content"),unByKey(this.listenerKey),this.dispatchEvent("route:drawend")}),this.dispatchEvent("route:drawstart")):(this._formRouteContainer.className="",unByKey(this.listenerKey),this.dispatchEvent("route:drawend"))}onShowRoutePanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t),!this._geojsonSections&&!this._waiting&&this._clear();var ke=this._showRouteButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onRouteModeComputationChange(e){var t=e.target.value;t&&(logger$o.log(t),this._currentComputation=t)}onRouteModeComputationChangeAndRun(e){this.onRouteModeComputationChange(e),this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.onRouteComputationSubmit({computation:this._currentComputation,transport:this._currentTransport,exclusions:this._currentExclusions})}onRouteModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onShowRouteExclusionsClick(e){logger$o.log("onShowRouteExclusionsClick",e)}onRouteExclusionsChange(e){var t=e.target.value,ke=e.target.checked;if(!(!t||typeof t!="string")){t=t.toLowerCase();for(var Ge=!1,Be=null,je=0;je<this._currentExclusions.length;je++)this._currentExclusions[je]===t&&(Be=je,Ge=!0);!Ge&&!ke&&this._currentExclusions.push(t),Ge&&ke&&this._currentExclusions.splice(Be,1)}}onRouteResetClick(){for(var e=this._currentPoints,t=0;t<e.length;t++)e[t].clear();this._clear(),this._clearRouteInputOptions()}onShowRouteResultsNewClick(){this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry(),this.dispatchEvent("route:newresults")}onRouteResultsDetailsMouseOver(e){var t=e.target.id,ke=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var Ge=this._geojsonSections.getSource().getFeatureById(parseInt(ke,10));Ge.setStyle(this._selectedFeatureStyle)}}onRouteResultsDetailsMouseOut(e){var t=e.target.id,ke=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GProuteResultsDetailsInstructionHighlight"),!!this._geojsonSections){var Ge=this._geojsonSections.getSource().getFeatureById(parseInt(ke,10));Ge.setStyle(null)}}_requestRouting(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.startPoint&&e.endPoint&&(e.apiKey=this.options.routeOptions.apiKey||this.options.apiKey,typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$o.log(e),this._displayWaitingContainer(),Gp.Services.route(e))}_fillRouteResultsDetails(e){var t=e.totalDistance,ke=e.totalTime,Ge=this._simplifiedInstructions(e.routeInstructions);Ge&&this._fillRouteResultsDetailsContainer(t,ke,Ge);var Be=e.routeGeometry;Be&&this._fillRouteResultsDetailsGeometry(Be,this._defaultFeatureStyle),Ge&&Ge[0].geometry&&this._fillRouteResultsDetailsFeatureGeometry(Ge,this._defaultFeatureStyle);var je=e.bbox;if(je){var Ve=this.getMap(),Ze=[je.left,je.bottom,je.right,je.top],Qe=Ve.getView().getProjection().getCode();Qe!=="EPSG:4326"&&(Ze=transformExtent(Ze,"EPSG:4326",Qe)),Ve.getView().fit(Ze,Ve.getSize())}this._currentRouteInformations=e,this.dispatchEvent({type:"route:compute"}),this._formRouteContainer.className="GPelementHidden gpf-hidden gpf-panel__content fr-modal__content",this._hideWaitingContainer(),this._resultsRouteContainer.className=""}_fillRouteResultsDetailsContainer(e,t,ke){this._resultsRouteValuesContainer=this._addRouteResultsValuesElement(e,t,this._convertSecondsToTime),this._resultsRouteDetailsContainer=this._addRouteResultsDetailsElement(ke,this._convertSecondsToTime)}_fillRouteResultsDetailsGeometry(e,t){this._clearRouteResultsGeometry();var ke=this.getMap();if(e){var Ge={type:"FeatureCollection",features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e}]},Be=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:t}),je=Be.readFeatures(Ge,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});this._geojsonRoute=new VectorLayer({source:new VectorSource({features:je}),style:t,title:"Mon Itinéraire"}),ke.addLayer(this._geojsonRoute)}}_fillRouteResultsDetailsFeatureGeometry(e,t){this._clearRouteResultsFeatureGeometry();var ke=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[]};for(var Ge=0;Ge<e.length;Ge++){for(var Be=e[Ge],je=Ge+1,Ve=Be.geometry.coordinates,Ze=0;Ze<Ve.length;Ze++)typeof Ve[Ze][0]=="string"&&(Ve[Ze][0]=parseFloat(Ve[Ze][0]),Ve[Ze][1]=parseFloat(Ve[Ze][1]));this._geojsonObject.features.push({type:"Feature",geometry:Be.geometry,properties:{popupContent:"("+je+") distance : "+this._convertDistance(Be.distance)+" / temps : "+this._convertSecondsToTime(Be.duration)},id:je})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[0].getCoordinate()},properties:{description:"Point de départ","marker-symbol":this.options.markersOpts.departure.url}});for(var Qe=1;Qe<this._currentPoints.length-1;Qe++)if(this._currentPoints[Qe]&&this._currentPoints[Qe].getCoordinate){var en=this._currentPoints[Qe].getCoordinate();en&&this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:en},properties:{description:"Point d'étape","marker-symbol":this.options.markersOpts.stages.url}})}this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._currentPoints[this._currentPoints.length-1].getCoordinate()},properties:{description:"Point d'arrivée","marker-symbol":this.options.markersOpts.arrival.url}});var tn=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:t}),an=this.getMap().getView().getProjection().getCode(),cn=tn.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:an});this._geojsonSections=new VectorLayer({source:new VectorSource({features:cn}),style:t,opacity:.9,title:"Mon Itinéraire"});var un;this._currentTransport==="Pieton"?(un="piéton",this._geojsonSections.gpResultLayerId="compute:Pieton$OGC:OPENLS;Itineraire"):(un="voiture",this._geojsonSections.gpResultLayerId="compute:Voiture$OGC:OPENLS;Itineraire"),ke.addLayer(this._geojsonSections),ke.getControls().forEach(dn=>{if(dn instanceof LayerSwitcher){var fn=this._geojsonSections.gpLayerId;dn._layers[fn].title===fn&&dn.addLayer(this._geojsonSections,{title:this.options.layerDescription.title+" ("+un+")",description:this.options.layerDescription.description})}},this),this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsHoverInteraction.on("select",dn=>this._onResultsFeatureMouseOver(dn)),ke.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._geojsonSections],style:this._selectedFeatureStyle}),this._resultsSelectInteraction.on("select",dn=>this._onResultsFeatureSelect(dn)),ke.addInteraction(this._resultsSelectInteraction)}_onResultsFeatureMouseOver(e){if(e.selected.length!==0){var t=e.selected[0],ke=document.getElementById("GProuteResultsDetailsInstruction_"+t.getId()+"-"+this._uid);ke&&ke.classList&&ke.classList.add("GProuteResultsDetailsInstructionHighlight")}if(e.deselected.length!==0){var Ge=e.deselected[0],Be=document.getElementById("GProuteResultsDetailsInstruction_"+Ge.getId()+"-"+this._uid);Be&&Be.classList&&Be.classList.remove("GProuteResultsDetailsInstructionHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var ke=e.selected[0];this._popupContent.innerHTML=ke.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay))}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}_clear(){this._currentTransport=null,this._currentExclusions=[],this._currentComputation=null,this._clearRouteResultsDetails(),this._clearRouteResultsGeometry(),this._clearRouteResultsFeatureGeometry();for(var e=0;e<this._currentPoints.length;e++)this._currentPoints[e].clear();this._removeRouteStepLocations()}_clearRouteInputOptions(){this._initTransport(),this._initComputation(),this._initExclusions();var e;this._currentTransport==="Pieton"?(e=document.getElementById("GProuteTransportPedestrian-"+this._uid),e&&(e.checked="true")):(e=document.getElementById("GProuteTransportCar-"+this._uid),e&&(e.checked="true"));var t=document.getElementById("GProuteComputationSelect-"+this._uid);t&&(t.value=this._currentComputation);var ke=document.getElementById("GProuteExclusionsToll-"+this._uid);ke&&(this._currentExclusions.indexOf("toll")!==-1?ke.checked=!1:ke.checked=!0);var Ge=document.getElementById("GProuteExclusionsTunnel-"+this._uid);Ge&&(this._currentExclusions.indexOf("tunnel")!==-1?Ge.checked=!1:Ge.checked=!0);var Be=document.getElementById("GProuteExclusionsBridge-"+this._uid);Be&&(this._currentExclusions.indexOf("bridge")!==-1?Be.checked=!1:Be.checked=!0)}_removeRouteStepLocations(){var e=document.querySelectorAll('div[id^="GPlocationPoint"]');if(e.length!==0){for(var t=[],ke=0;ke<e.length;ke++)e[ke].id.indexOf(this._uid)!==-1&&t.push(e[ke]);for(var Ge=1;Ge<t.length-1;Ge++){var Be=t[Ge].classList;if(Be.length!==0)for(var je=0;je<Be.length;je++)Be[je]==="GPlocationStageFlexInput"&&document.getElementById(this._addUID("GPlocationStageRemove_"+(Ge+1))).click()}}}_clearRouteResultsDetails(){if(this._currentRouteInformations=null,this._resultsRouteDetailsContainer){var e=this._resultsRouteDetailsContainer;if(e.childElementCount)for(;e.firstChild;)e.removeChild(e.firstChild)}if(this._resultsRouteValuesContainer){var t=this._resultsRouteValuesContainer;if(t.childElementCount)for(;t.firstChild;)t.removeChild(t.firstChild)}}_clearRouteResultsGeometry(){var e=this.getMap();this._geojsonRoute!=null&&(e.removeLayer(this._geojsonRoute),this._geojsonRoute=null)}_clearRouteResultsFeatureGeometry(){var e=this.getMap();this._geojsonSections!=null&&(e.removeLayer(this._geojsonSections),this._geojsonSections=null,this._geojsonObject=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_hideRouteSuggestedLocations(e){if(e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1)for(var t=parseInt(e.target.id.split("_")[1][0],10)-1,ke=0;ke<this._currentPoints.length;ke++)ke!==parseInt(t,10)&&this._currentPoints[ke]._hideSuggestedLocation();else for(var Ge=0;Ge<this._currentPoints.length;Ge++)this._currentPoints[Ge]._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.routeOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.routeOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}_simplifiedInstructions(e){var t=[],ke=e[0];e.length===1&&t.push(ke);for(var Ge=1;Ge<e.length;Ge++){var Be=e[Ge];if(Be.instruction===ke.instruction){ke.distance=(parseFloat(Be.distance)+parseFloat(ke.distance)).toString(),ke.duration=(parseFloat(Be.duration)+parseFloat(ke.duration)).toString();for(var je=1;je<Be.geometry.coordinates.length;je++)ke.geometry.coordinates.push(Be.geometry.coordinates[je])}else t.push(ke),ke=Be,Ge===e.length-1&&(t.push(Be),ke=null)}return logger$o.log(t),t}_convertSecondsToTime(e){var t="";e=Math.round(e);var ke=Math.floor(e/(60*60)),Ge=e%(60*60),Be=Math.floor(Ge/60);return ke&&(t=ke+"h "),t+=Be+" min",t}_convertDistance(e){var t="",ke=parseInt(e/1e3,10);return ke?t=ke+" km":t=parseInt(e,10)+" m",t}};Object.assign(Route.prototype,RouteDOM);Object.assign(Route.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Route=Route);var IsoDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPisochron"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowIsoPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowIsochronPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowIsochronPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-isocurve fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer une isochrone"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowIsoPanelClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowIsoPanelClick(ke)}),e},_createIsoPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPisochronPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createIsoPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createDrawingButtonsPluginDiv:function(){var Oe=document.createElement("div");return Oe.className="container-buttons-plugin fr-mx-2w",Oe},_createIsoPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Calcul d'isochrone",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GPisochronPanelClose"),ke.className="GPpanelClose GPisochronPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowIsochronPicto")).click()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowIsochronPicto")).click()});var Ge=document.createElement("span");return Ge.className="GPelementHidden gpf-visible",Ge.innerText="Fermer",ke.appendChild(Ge),e.appendChild(ke),e},_createIsoPanelFormElement:function(){var Oe=this,e=document.createElement("form");return e.id=this._addUID("GPisochronForm"),e.className="GPform gpf-panel__content gpf-mobile-form fr-modal__content",e.addEventListener("submit",function(t){return t.preventDefault(),Oe.onIsoComputationSubmit(t),!1}),e},_createIsoWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPisochronCalcWaitingContainer"),Oe.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createIsoPanelFooterElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelFooter gpf-panel__footer fr-modal__footer",Oe},_createIsoPanelFormPointLabel:function(){var Oe=document.createElement("p");return Oe.id=this._addUID("GPisochronPointLabelP"),Oe.className="gpf-label fr-label",Oe.innerHTML="Départ",Oe},_createIsoPanelFormTypeChoiceElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPisochronChoice"),Oe.className="fr-mt-2w",Oe},_createIsoPanelFormTypeChoiceChronElement:function(Oe){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var ke=document.createElement("input");ke.id=this._addUID("GPisochronChoiceAltChron"),ke.name="GPisochronChoiceMode",ke.type="radio",ke.checked=!!Oe,ke.addEventListener?ke.addEventListener("change",function(je){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange(je)},!1):ke.attachEvent&&ke.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueChron")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueDist")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isochrone",e.onIsoTypeChoiceChange()}),ke.value="isochron",t.appendChild(ke);var Ge=document.createElement("label");Ge.className="GPisochronChoiceAltImg gpf-label fr-label",Ge.htmlFor=this._addUID("GPisochronChoiceAltChron"),Ge.innerHTML="Durée",Ge.title="Durée",t.appendChild(Ge);var Be=document.createElement("span");return Be.id=this._addUID("GPisochronChoiceAltChronTxt"),Be.className="gpf-hidden",Be.innerHTML="Durée",Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltChron")).click()}),t.appendChild(Be),t},_createIsoPanelFormTypeChoiceDistElement:function(Oe){var e=this,t=document.createElement("div");t.className="GPisochronChoiceAlt gpf-flex gpf-flex-isocurve gpf-radio-group fr-radio-group";var ke=document.createElement("input");ke.id=this._addUID("GPisochronChoiceAltDist"),ke.name="GPisochronChoiceMode",ke.type="radio",ke.checked=!!Oe,ke.addEventListener?ke.addEventListener("change",function(je){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange(je)},!1):ke.attachEvent&&ke.attachEvent("onchange",function(){document.getElementById(e._addUID("GPisochronValueDist")).className="GPflexInput gpf-flex fr-mt-1w",document.getElementById(e._addUID("GPisochronValueChron")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronValueDistLabelP")).className="gpf-label fr-label",document.getElementById(e._addUID("GPisochronValueChronLabelP")).className="GPelementHidden gpf-hidden",document.getElementById(e._addUID("GPisochronSubmit")).value="Calculer l'isodistance",e.onIsoTypeChoiceChange()}),ke.value="isodistance",t.appendChild(ke);var Ge=document.createElement("label");Ge.className="GPisochronChoiceAltImg gpf-label fr-label",Ge.htmlFor=this._addUID("GPisochronChoiceAltDist"),Ge.innerHTML="Distance",Ge.title="Distance",t.appendChild(Ge);var Be=document.createElement("span");return Be.id=this._addUID("GPisochronChoiceAltDistTxt"),Be.className="gpf-hidden",Be.innerHTML="Distance",Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){document.getElementById(e._addUID("GPisochronChoiceAltDist")).click()}),t.appendChild(Be),t},_createIsoPanelFormLabelIsochronElement:function(Oe){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueChronLabelP"),e.className=Oe?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir un temps de trajet",e},_createIsoPanelFormValueIsochronElement:function(Oe){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueChron"),t.className=Oe?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var ke=document.createElement("input");ke.id=this._addUID("GPisochronValueChronInput1"),ke.className="gpf-input fr-input",ke.min="0",ke.step="1",ke.value="0",ke.type="number",ke.title="Temps",ke.addEventListener?ke.addEventListener("change",function(Ve){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(Ve)}):ke.attachEvent&&ke.attachEvent("onchange",function(Ve){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeHourChange(Ve)}),t.appendChild(ke);var Ge=document.createElement("label");Ge.innerHTML="h",Ge.className="gpf-label fr-label",t.appendChild(Ge);var Be=document.createElement("input");Be.id=this._addUID("GPisochronValueChronInput2"),Be.className="gpf-input fr-input",Be.min="0",Be.max="59",Be.step="1",Be.value="0",Be.type="number",Be.title="Heures",Be.addEventListener?Be.addEventListener("change",function(Ve){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(Ve)}):Be.attachEvent&&Be.attachEvent("onchange",function(Ve){typeof e.onIsoValueChronTimeMinuteChange=="function"&&e.onIsoValueChronTimeMinuteChange(Ve)}),t.appendChild(Be);var je=document.createElement("label");return je.innerHTML="min",je.className="gpf-label fr-label",t.appendChild(je),t},_createIsoPanelFormLabelIsodistanceElement:function(Oe){var e=document.createElement("p");return e.id=this._addUID("GPisochronValueDistLabelP"),e.className=Oe?"gpf-label fr-label":"GPelementHidden gpf-hidden",e.innerHTML="Définir une distance",e},_createIsoPanelFormValueIsodistanceElement:function(Oe){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronValueDist"),t.className=Oe?"GPflexInput gpf-flex fr-mt-1w":"GPelementHidden gpf-hidden";var ke=document.createElement("input");ke.id=this._addUID("GPisochronValueDistInput"),ke.className="gpf-input fr-input fr-ml-1w",ke.min="0",ke.step="any",ke.value="0",ke.type="number",ke.title="Distance",ke.addEventListener?ke.addEventListener("change",function(Be){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Be)}):ke.attachEvent&&ke.attachEvent("onchange",function(Be){typeof e.onIsoValueDistChange=="function"&&e.onIsoValueDistChange(Be)}),t.appendChild(ke);var Ge=document.createElement("label");return Ge.innerHTML="km",Ge.className="gpf-label fr-label",t.appendChild(Ge),t},_createIsoPanelFormModeChoiceTransportElement:function(Oe){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronTransportChoice");var ke=document.createElement("label");ke.className="GPisochronModeLabel gpf-label fr-label",ke.innerHTML="Choisir un mode de déplacement",t.appendChild(ke);for(var Ge=document.createElement("div"),Be=0;Be<Oe.length;Be++){var je=Oe[Be],Ve=document.createElement("div");if(Ve.className="GPisochronTransportChoice gpf-flex gpf-radio-group fr-radio-group",je==="Voiture"){var Ze=document.createElement("input");Ze.id=this._addUID("GPisochronTransportCar"),Ze.type="radio",Ze.name="GPisochronTransport",Be===0&&(Ze.checked=!0),Ze.addEventListener?Ze.addEventListener("change",function(an){e.onIsoModeTransportChange(an)}):Ze.attachEvent&&Ze.attachEvent("onchange",function(an){e.onIsoModeTransportChange(an)}),Ze.value="Voiture",Ve.appendChild(Ze);var Qe=document.createElement("label");Qe.className="GPisochronTransportImg gpf-label fr-label",Qe.htmlFor=this._addUID("GPisochronTransportCar"),Qe.title="Voiture",Qe.innerHTML="Voiture",Ve.appendChild(Qe)}if(je==="Pieton"){var en=document.createElement("input");en.id=this._addUID("GPisochronTransportPedestrian"),en.type="radio",en.name="GPisochronTransport",Be===0&&(en.checked=!0),en.addEventListener?en.addEventListener("change",function(an){e.onIsoModeTransportChange(an)}):en.attachEvent&&en.attachEvent("onchange",function(an){e.onIsoModeTransportChange(an)}),en.value="Pieton",Ve.appendChild(en);var tn=document.createElement("label");tn.className="GPisochronTransportImg gpf-label fr-label",tn.htmlFor=this._addUID("GPisochronTransportPedestrian"),tn.title="Piéton",tn.innerHTML="Piéton",Ve.appendChild(tn)}Ge.appendChild(Ve)}return t.appendChild(Ge),t},_createIsoPanelFormModeChoiceDirectionElement:function(Oe){var e=this,t=document.createElement("div");t.id=this._addUID("GPisochronDirectionChoice"),t.className="fr-my-2w";var ke=document.createElement("label");ke.innerHTML="Définir un sens de parcours",ke.className="fr-label",t.appendChild(ke);var Ge=document.createElement("select");Ge.id=this._addUID("GPisochronDirectionSelect"),Ge.className="GPselect gpf-select fr-select",Ge.title="Sens de parcours",Ge.addEventListener("change",function(Qe){e.onIsoModeDirectionChange(Qe)});for(var Be=0;Be<Oe.length;Be++){var je=Oe[Be];if(je.toLowerCase()==="departure"){var Ve=document.createElement("option");Be===0&&(Ve.selected="selected"),Ve.value="departure",Ve.text="Départ",Ge.appendChild(Ve)}if(je.toLowerCase()==="arrival"){var Ze=document.createElement("option");Be===0&&(Ze.selected="selected"),Ze.value="arrival",Ze.text="Arrivée",Ge.appendChild(Ze)}}return t.appendChild(Ge),t},_createShowIsoExclusionsPictoElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPshowIsoExclusionsPicto");var t="";return checkDsfr()&&(t="GPelementHidden gpf-hidden"),e.className=`GPshowAdvancedToolPicto GPshowMoreOptionsImage GPshowMoreOptions GPshowIsoExclusionsPicto ${t} gpf-btn fr-btn--sm fr-btn--tertiary gpf-btn--tertiary fr-icon-arrow-down-fill`,e.title="Exclusions",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!0),e.addEventListener?e.addEventListener("click",function(ke){ke.preventDefault();var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowIsoSettingsClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){ke.preventDefault();var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowIsoSettingsClick(ke)}),e},_createIsoPanelFormExclusionsElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPisoExclusions");var e=document.createElement("label");return e.className="GPisoExclusionsLabel gpf-label fr-label",e.innerHTML="Passages autorisés",Oe.appendChild(e),Oe},_createIsoPanelFormExclusionOptionsElement:function(Oe){var e=this,t=document.createElement("div");t.className="GPisoExclusionsOptions gpf-flex fr-checkbox-group fr-m-1w";for(var ke in Oe)if(Oe.hasOwnProperty(ke)){var Ge=Oe[ke];switch(ke){case"toll":var Be=document.createElement("input");Be.id=this._addUID("GPisoExclusionsToll"),Be.type="checkbox",Be.name="Péages",Be.checked=!Ge,Be.addEventListener?Be.addEventListener("change",function(tn){e.onIsoExclusionsChange(tn)}):Be.attachEvent&&Be.attachEvent("onchange",function(tn){e.onIsoExclusionsChange(tn)}),Be.value="Toll",t.appendChild(Be);var je=document.createElement("label");je.className="GPisoExclusionsOption",je.htmlFor=this._addUID("GPisoExclusionsToll"),je.innerHTML="Péages",t.appendChild(je);break;case"tunnel":var Ve=document.createElement("input");Ve.id=this._addUID("GPisoExclusionsTunnel"),Ve.type="checkbox",Ve.name="Tunnel",Ve.checked=!Ge,Ve.addEventListener?Ve.addEventListener("change",function(tn){e.onIsoExclusionsChange(tn)}):Ve.attachEvent&&Ve.attachEvent("onchange",function(tn){e.onIsoExclusionsChange(tn)}),Ve.value="Tunnel",t.appendChild(Ve);var Ze=document.createElement("label");Ze.className="GPisoExclusionsOption",Ze.htmlFor=this._addUID("GPisoExclusionsTunnel"),Ze.innerHTML="Tunnels",t.appendChild(Ze);break;case"bridge":var Qe=document.createElement("input");Qe.id=this._addUID("GPisoExclusionsBridge"),Qe.type="checkbox",Qe.name="Ponts",Qe.checked=!Ge,Qe.addEventListener?Qe.addEventListener("change",function(tn){e.onIsoExclusionsChange(tn)}):Qe.attachEvent&&Qe.attachEvent("onchange",function(tn){e.onIsoExclusionsChange(tn)}),Qe.value="Bridge",t.appendChild(Qe);var en=document.createElement("label");en.className="GPisoExclusionsOption",en.htmlFor=this._addUID("GPisoExclusionsBridge"),en.innerHTML="Ponts",t.appendChild(en);break}}return t},_createIsoSubmitFormElement:function(){var Oe=document.createElement("input");return Oe.id=this._addUID("GPisochronSubmit"),Oe.className="GPsubmit gpf-btn fr-btn",Oe.type="submit",Oe.value="Calculer l'isochrone",Oe},_createIsoFormResetElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPisochronReset"),e.className="GPresetPicto GPisochronReset gpf-btn gpf-btn-icon-reset gpf-btn-icon-isocurve-reset fr-btn fr-btn--secondary gpf-btn--secondary",e.title="Réinitialiser les paramètres",e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke),Oe.onIsoResetClick(t)}),e}},logger$n=LoggerByDefault.getLogger("isocurve"),Isocurve=class tp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof tp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Isocurve",this.initialize(e),this._container=this._createMainContainerElement(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){if(this._container=this._initContainer(e),this.options.export){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var ke=this;this.export.on("button:clicked",Ge=>{ke.dispatchEvent({type:"export:compute",content:Ge.content})})}this.draggable&&Draggable.dragElement(this._IsoPanelContainer,this._IsoPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoIsoButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$n.log("[ERROR] Isocurve:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPisochronPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getLayer(){return this._geojsonLayer}setLayer(e){if(!e){this._geojsonLayer=null;return}if(!(e instanceof VectorLayer)){logger$n.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._defaultFeatureStyle),this._geojsonLayer=e}getGeoJSON(){return JSON.stringify(this._geojsonObject)}setGeoJSON(e){try{this._geojsonObject=JSON.parse(e)}catch(t){logger$n.log("no valid geojson given :"+t.message)}}getData(){var e={type:"isocurve",transport:this._currentTransport,computation:this._currentComputation,exclusions:this._currentExclusions,direction:this._currentDirection,point:this._originPoint.getCoordinate(),results:{}};return Helper.assign(e.results,this._currentIsoResults),e}setData(e){this._currentTransport=e.transport,this._currentComputation=e.computation,this._currentExclusions=e.exclusions,this._currentDirection=e.direction;var t=document.getElementById("GPlocationOriginPointer_1-"+this._uid);t.checked=!0;var ke=document.getElementById("GPlocationOrigin_1-"+this._uid),Ge=document.getElementById("GPlocationOriginCoords_1-"+this._uid);Ge.value=e.point,ke.value=e.point[1].toFixed(4)+" / "+e.point[0].toFixed(4),this._originPoint.setCoordinate(e.point,"EPSG:4326"),this._currentIsoResults=e.results}getContainer(){return this._container}getStyle(){return this._defaultFeatureStyle}compute(e,t,ke){this._clear();var Ge=this._pictoIsoButton.ariaPressed;Ge!=="true"&&this._pictoIsoButton.click();var Be=this.getMap();if(Be){var je={direction:"departure",method:"time",transport:"Voiture",exclusions:[]};Helper.assign(je,ke),this._originPoint.setCoordinate(e);var Ve=this._originPoint.getCoordinate(),Ze=document.getElementById("GPlocationOrigin_1-"+this._uid);if(Ze.value=Ve[0].toFixed(4)+" / "+Ve[1].toFixed(4),this._currentTransport=je.transport,je.transport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentExclusions=je.exclusions,this._currentComputation=je.method,je.method==="time"){var Qe=t.split(".");this._currentTimeHour=Qe[0]||0,document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Qe[1]||0,document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=t,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection=je.direction,je.direction==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1,this.onIsoComputationSubmit()}}init(){var e=this._originPoint.getCoordinate(),t=document.getElementById("GPlocationOrigin_1-"+this._uid);if(t.value=e[1].toFixed(4)+" / "+e[0].toFixed(4),this._currentTransport==="Voiture"?document.getElementById("GPisochronTransportCar-"+this._uid).checked=!0:document.getElementById("GPisochronTransportPedestrian-"+this._uid).checked=!0,this._currentComputation==="time"){var ke=this._currentIsoResults.time/60;this._currentTimeHour=Math.floor(ke/60),document.getElementById("GPisochronValueChronInput1-"+this._uid).value=this._currentTimeHour,this._currentTimeMinute=Math.round((ke/60-this._currentTimeHour)*60),document.getElementById("GPisochronValueChronInput2-"+this._uid).value=this._currentTimeMinute,document.getElementById("GPisochronChoiceAltChron-"+this._uid).click()}else this._currentDistance=this._currentIsoResults.distance/1e3,document.getElementById("GPisochronValueDistInput-"+this._uid).value=this._currentDistance,document.getElementById("GPisochronChoiceAltDist-"+this._uid).click();this._currentDirection==="departure"?document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=0:document.getElementById("GPisochronDirectionSelect-"+this._uid).selectedIndex=1}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,export:!1,methods:["time","distance"],graphs:["Pieton","Voiture"],exclusions:{toll:!1,tunnel:!1,bridge:!1},directions:["departure","arrival"],markerOpts:{url:Marker.lightOrange,offset:Marker.defaultOffset},isocurveOptions:{},autocompleteOptions:{},layerDescription:{title:"Isochrone/Isodistance",description:"isochrone/isodistance basé sur un graphe"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentTransport=null,this._initTransport(),this._currentComputation=null,this._initComputation(),this._currentExclusions=[],this._initExclusions(),this._currentDirection=null,this._initDirection(),this._originPoint=null,this._pictoIsoButton=null,this._waitingContainer=null,this._formContainer=null,this._IsoPanelContainer=null,this._IsoPanelHeaderContainer=null,this._currentIsoResults=null,this._geojsonLayer=null,this._geojsonObject=null,this.export=null,this._waiting=!1,this._timer=null,this._defaultFeatureStyle=new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.7)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0)",width:1})}),this._resources={},this.listenerKey=null}_checkInputOptions(e){var t;if(e.methods)if(Array.isArray(e.methods))if(e.methods.length===0)e.methods=null;else for(t=0;t<e.methods.length;t++)typeof e.methods[t]!="string"&&logger$n.log("[ol.control.Isocurve] ERROR : parameter 'methods' elements should be of type 'string'");else logger$n.warn("'methods' parameter should be an array"),e.methods=null;if(e.graphs)if(Array.isArray(e.graphs))if(e.graphs.length===0)e.graphs=null;else for(t=0;t<e.graphs.length;t++)typeof e.graphs[t]!="string"?logger$n.log("[ol.control.Isocurve] ERROR : parameter 'graphs' elements should be of type 'string'"):(e.graphs[t].toLowerCase()==="pieton"&&(e.graphs[t]="Pieton"),e.graphs[t].toLowerCase()==="voiture"&&(e.graphs[t]="Voiture"));else logger$n.warn("'graphs' parameter should be an array"),e.graphs=null;if(e.directions)if(Array.isArray(e.directions))if(e.directions.length===0)e.directions=null;else for(t=0;t<e.directions.length;t++)typeof e.directions[t]!="string"&&logger$n.log("[ol.control.Isocurve] ERROR : parameter 'directions' elements should be of type 'string'");else logger$n.warn("'directions' parameter should be an array"),e.directions=null;e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1)}_initTransport(){this._currentTransport="Piéton";var e=this.options.graphs;(!e||e.length===0)&&(this.options.graphs=["Pieton","Voiture"]),Array.isArray(e)&&e.length&&(e[0]==="Voiture"||e[0]==="Pieton")&&(this._currentTransport=e[0]);var t=this.options.isocurveOptions;t.graph&&(this._currentTransport=t.graph)}_initComputation(){this._currentComputation="time";var e=this.options.methods;(!e||e.length===0)&&(this.options.methods=["time","distance"]),Array.isArray(e)&&e.length&&(e[0]==="time"||e[0]==="distance")&&(this._currentComputation=e[0]);var t=this.options.isocurveOptions;t.method&&(this._currentComputation=t.method),t.time&&(this._currentComputation="time"),t.distance&&(this._currentComputation="distance")}_initDirection(){this._currentDirection="departure";var e=this.options.directions;(!e||e.length===0)&&(this.options.directions=["departure","arrival"]),Array.isArray(e)&&e.length&&(e[0]==="departure"||e[0]==="arrival")&&(this._currentDirection=e[0]);var t=this.options.isocurveOptions;t.reverse||(this._currentDirection="departure"),t.reverse===!0&&(this._currentDirection="arrival",this.options.directions=["arrival","departure"])}_initExclusions(){this._currentExclusions=[];var e=this.options.exclusions;if((!e||typeof e=="object"&&Object.keys(e).length===0)&&(this.options.exclusions={toll:!1,tunnel:!1,bridge:!1}),e&&typeof e=="object"&&Object.keys(e).length)for(var t in e)e.hasOwnProperty(t)&&e.k&&this._currentExclusions.push(t);var ke=this.options.isocurveOptions;Array.isArray(ke.exclusions)&&(this._currentExclusions=ke.exclusions)}_initContainer(e){var t=this._container;if(t.childElementCount>0)return t;var ke=this._pictoIsoButton=this._createShowIsoPictoElement();t.appendChild(ke);var Ge=this._IsoPanelContainer=this._createIsoPanelElement(),Be=this._createIsoPanelDivElement();Ge.appendChild(Be);var je=this._IsoPanelHeaderContainer=this._createIsoPanelHeaderElement();Be.appendChild(je);var Ve=this._formContainer=this._createIsoPanelFormElement();Ve.appendChild(this._createIsoPanelFormModeChoiceTransportElement(this.options.graphs)),Ve.appendChild(this._createIsoPanelFormPointLabel());var Ze=this._createIsoPanelFormPointElement(e);Ve.appendChild(Ze);for(var Qe=!1,en=!1,tn=this._createIsoPanelFormTypeChoiceElement(),an=0;an<this.options.methods.length;an++)this.options.methods[an]==="time"&&(Qe=an===0,tn.appendChild(this._createIsoPanelFormTypeChoiceChronElement(Qe))),this.options.methods[an]==="distance"&&(en=an===0,tn.appendChild(this._createIsoPanelFormTypeChoiceDistElement(en)));if(Ve.appendChild(tn),Ve.appendChild(this._createIsoPanelFormLabelIsochronElement(Qe)),Ve.appendChild(this._createIsoPanelFormValueIsochronElement(Qe)),Ve.appendChild(this._createIsoPanelFormLabelIsodistanceElement(en)),Ve.appendChild(this._createIsoPanelFormValueIsodistanceElement(en)),Ve.appendChild(this._createIsoPanelFormModeChoiceDirectionElement(this.options.directions)),this.options.exclusions&&typeof this.options.exclusions=="object"&&Object.keys(this.options.exclusions).length!==0){Ve.appendChild(this._createShowIsoExclusionsPictoElement());var cn=this._createIsoPanelFormExclusionsElement();cn.appendChild(this._createIsoPanelFormExclusionOptionsElement(this.options.exclusions)),Ve.appendChild(cn)}var un=this._createIsoPanelFooterElement();if(Ve.appendChild(un),!checkDsfr()){var dn=this._createIsoFormResetElement();un.appendChild(dn)}var fn=this._submitContainer=this._createIsoSubmitFormElement();un.appendChild(fn),Be.appendChild(Ve);var pn=this._createDrawingButtonsPluginDiv();Be.appendChild(pn);var gn=this._waitingContainer=this._createIsoWaitingElement();return Ge.appendChild(gn),t.appendChild(Ge),t.addEventListener&&t.addEventListener("click",yn=>this._hideIsoSuggestedLocations(yn)),t}_createIsoPanelFormPointElement(e){this._originPoint=new LocationSelector({apiKey:this.options.apiKey||null,tag:{id:1,groupId:this._uid,markerOpts:this.options.markerOpts,display:!0},autocompleteOptions:this.options.autocompleteOptions||null}),this._originPoint.setMap(e);var t=this;return document.getElementById("GPlocationOriginPointerImg_1-"+this._uid).onclick=function(){t._clearGeojsonLayer();var ke=t.getMap();t._originPoint._inputShowPointerContainer.checked?(t._formContainer.className="GPisochronFormMini gpf-panel__content fr-modal__content",this.listenerKey=ke.on("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content",t.dispatchEvent("isocurve:drawend")})):(t._formContainer.className="gpf-panel__content fr-modal__content",unByKey(this.listenerKey)),t.dispatchEvent("isocurve:drawstart")},document.getElementById("GPlocationOriginLabel_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t._formContainer.className="gpf-panel__content fr-modal__content",e.un("click",()=>{t._formContainer.className="gpf-panel__content fr-modal__content"}),t.dispatchEvent("isocurve:drawend")},document.getElementById("GPlocationOrigin_1-"+this._uid).onclick=function(){t._clearGeojsonLayer(),t.dispatchEvent("isocurve:drawend")},this._originPoint._container}onIsoComputationSubmit(){if(!this._originPoint||!this._originPoint.getCoordinate||!this._originPoint.getCoordinate()){logger$n.log("[Isocurve] Missing position parameter to submit isocurve request");return}var e=this._originPoint.getCoordinate(),t={x:e[0],y:e[1]};logger$n.log("origin : ",t);var ke,Ge;if(this._currentComputation.toLowerCase()==="time"){var Be=document.getElementById("GPisochronValueChronInput1-"+this._uid),je=parseInt(Be.value,10);isNaN&&isNaN(je)&&(je=0);var Ve=document.getElementById("GPisochronValueChronInput2-"+this._uid),Ze=parseInt(Ve.value,10);isNaN&&isNaN(Ze)&&(Ze=0),ke=je*3600+Ze*60,logger$n.log("time : "+ke)}if(this._currentComputation.toLowerCase()==="distance"){var Qe=document.getElementById("GPisochronValueDistInput-"+this._uid);Ge=parseFloat(Qe.value)*1e3,logger$n.log("distance : "+Ge)}if(!ke&&!Ge){logger$n.log("[Isocurve] Missing time or distance parameter to submit isocurve request");return}var en=this.options.isocurveOptions||{},tn=en.protocol||"XHR",an=en.timeOut||0;tn==="JSONP"&&an===0&&(an=15e3);var cn=en.onFailure!==null&&typeof en.onFailure=="function",un=en.onSuccess!==null&&typeof en.onSuccess=="function",dn=this,fn={position:t,graph:en.graph||this._currentTransport,exclusions:en.exclusions||this._currentExclusions,method:en.method||this._currentComputation,smoothing:en.smoothing||!0,timeOut:an,protocol:tn,resource:en.resource,onSuccess:function(pn){logger$n.log(pn),pn&&dn._drawIsoResults(pn),un&&en.onSuccess.call(dn,pn)},onFailure:function(pn){dn._hideWaitingContainer(),logger$n.log(pn.message),cn&&en.onFailure.call(dn,pn)}};(this._currentDirection.toLowerCase()==="arrival"||en.reverse)&&(fn.reverse=!0),ke&&(fn.time=ke),Ge&&(fn.distance=Ge),this._requestIsoCurve(fn)}onShowIsoPanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._pictoIsoButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onIsoTypeChoiceChange(e){var t=e.target.value;t&&(t==="isodistance"&&(this._currentComputation="distance"),t==="isochron"&&(this._currentComputation="time"))}onIsoModeTransportChange(e){var t=e.target.value;t&&(this._currentTransport=t)}onIsoModeDirectionChange(e){var t=e.target.value;t&&(t.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ",this._currentDirection=t)}onIsoExclusionsChange(e){var t=e.target.value,ke=e.target.checked;if(t){for(var Ge=!1,Be=null,je=0;je<this._currentExclusions.length;je++)deepEqual(this._currentExclusions[je],t.toLowerCase())&&(Be=je,Ge=!0);!Ge&&!ke&&this._currentExclusions.push(t.toLowerCase()),Ge&&ke&&(this._currentExclusions[Be]=null)}}onIsoResetClick(){this._clear()}onShowIsoSettingsClick(){}_requestIsoCurve(e){!e||typeof e=="object"&&Object.keys(e).length===0||e.position&&(typeof e.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?e.ssl=this.options.ssl:e.ssl=!0),logger$n.log(e),this._clearGeojsonLayer(),this._displayWaitingContainer(),Gp.Services.isoCurve(e))}_drawIsoResults(e){if(this._currentIsoResults=e,this._hideWaitingContainer(),!!e.geometry){var t=this.getMap();this._geojsonObject={type:"FeatureCollection",crs:{type:"name",properties:{name:"EPSG:4326"}},features:[{type:"Feature",crs:{type:"name",properties:{name:"EPSG:4326"}},geometry:e.geometry}]},this._geojsonObject.features.push({type:"Feature",geometry:{type:"Point",coordinates:this._originPoint.getCoordinate()},properties:{description:"Point d'origine","marker-symbol":this.options.markerOpts.url}});var ke=new GeoJSON({defaultDataProjection:"EPSG:4326",defaultStyle:this._defaultFeatureStyle}),Ge=t.getView().getProjection().getCode(),Be=ke.readFeatures(this._geojsonObject,{dataProjection:"EPSG:4326",featureProjection:Ge}),Ze=this._currentComputation==="time"?"Isochrone":"Isodistance";this._geojsonLayer=new VectorLayer({source:new VectorSource({features:Be}),style:this._defaultFeatureStyle,opacity:.9,title:"Mon "+Ze});var je;if(this._currentTransport==="Pieton"?(je="piéton",this._geojsonLayer.gpResultLayerId="compute:Pieton$GEOPORTAIL:GPP:Isocurve"):(je="voiture",this._geojsonLayer.gpResultLayerId="compute:Voiture$GEOPORTAIL:GPP:Isocurve"),t.addLayer(this._geojsonLayer),this.dispatchEvent({type:"isocurve:compute"}),Be[0]&&Be[0].getGeometry()&&Be[0].getGeometry().getExtent()){var Ve=Be[0].getGeometry().getExtent();t.getView().fit(Ve,t.getSize())}var Ze=this._currentComputation==="time"?"Isochrone":"Isodistance";t.getControls().forEach(Qe=>{if(Qe instanceof LayerSwitcher){var en=this._geojsonLayer.gpLayerId;Qe._layers[en].title===en&&Qe.addLayer(this._geojsonLayer,{title:this.options.layerDescription.title+" ("+Ze+"/"+je+")",description:this.options.layerDescription.description})}})}}_clear(){this._clearIsoInputs(),this._originPoint.clear(),this._clearGeojsonLayer(),this._currentIsoResults=null}_clearIsoInputs(){var e=document.getElementById("GPisochronValueChronInput1-"+this._uid);e&&(e.value="0");var t=document.getElementById("GPisochronValueChronInput2-"+this._uid);t&&(t.value="0");var ke=document.getElementById("GPisochronValueDistInput-"+this._uid);ke&&(ke.value="0"),this._initTransport(),this._initComputation(),this._initDirection(),this._initExclusions();var Ge;this._currentTransport==="Pieton"?(Ge=document.getElementById("GPisochronTransportPedestrian-"+this._uid),Ge&&(Ge.checked="true")):(Ge=document.getElementById("GPisochronTransportCar-"+this._uid),Ge&&(Ge.checked="true"));var Be;this._currentComputation.toLowerCase()==="distance"?(Be=document.getElementById("GPisochronChoiceAltDist-"+this._uid),Be&&(Be.checked="true"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPelementHidden gpf-hidden")):(Be=document.getElementById("GPisochronChoiceAltChron-"+this._uid),Be&&(Be.checked="true"),document.getElementById("GPisochronValueChron-"+this._uid)&&(document.getElementById("GPisochronValueChron-"+this._uid).className="GPflexInput gpf-flex"),document.getElementById("GPisochronValueDist-"+this._uid)&&(document.getElementById("GPisochronValueDist-"+this._uid).className="GPelementHidden gpf-hidden"));var je=document.getElementById("GPisochronDirectionSelect-"+this._uid);je&&(je.value=this._currentDirection),je.value.toLowerCase()==="arrival"?document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Arrivée":document.getElementById("GPisochronPointLabelP-"+this._uid).innerHTML="Départ";var Ve=document.getElementById("GPisoExclusionsToll-"+this._uid);Ve&&(this._currentExclusions.indexOf("toll")!==-1?Ve.checked=!1:Ve.checked=!0);var Ze=document.getElementById("GPisoExclusionsTunnel-"+this._uid);Ze&&(this._currentExclusions.indexOf("tunnel")!==-1?Ze.checked=!1:Ze.checked=!0);var Qe=document.getElementById("GPisoExclusionsBridge-"+this._uid);Qe&&(this._currentExclusions.indexOf("bridge")!==-1?Qe.checked=!1:Qe.checked=!0)}_clearGeojsonLayer(){var e=this.getMap();this._geojsonLayer&&(e.removeLayer(this._geojsonLayer),this._geojsonLayer=null),this._geojsonObject=null}_hideIsoSuggestedLocations(e){e.target&&e.target.id&&e.target.id.indexOf("GPlocationOrigin_")!==-1||this._originPoint._hideSuggestedLocation()}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0;var e=this.options.isocurveOptions;if(e&&e.timeOut){this._timer&&(clearTimeout(this._timer),this._timer=null);var t=this;this._timer=setTimeout(function(){t._waiting===!0?t._hideWaitingContainer():t._timer&&clearTimeout(t._timer)},16e3)}}_hideWaitingContainer(){if(this._waiting){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1;var e=this.options.isocurveOptions;e&&e.timeOut&&(clearTimeout(this._timer),this._timer=null)}}};Object.assign(Isocurve.prototype,IsoDOM);Object.assign(Isocurve.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Isocurve=Isocurve);const deepEqual=function(Oe,e){if(Oe===e)return!0;if(typeof Oe=="object"&&Oe!=null&&typeof e=="object"&&e!=null){if(Object.keys(Oe).length!==Object.keys(e).length)return!1;for(var t in Oe)if(e.hasOwnProperty(t)){if(!deepEqual(Oe[t],e[t]))return!1}else return!1;return!0}else return!1};var ReverseGeocodeDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPreverseGeocoding"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowReverseGeocodingPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowReverseGeocodingPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowReverseGeocodingPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-reverse fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir la recherche inverse"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowReverseGeocodingClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowReverseGeocodingClick(ke)}),e},_createReverseGeocodingWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPreverseGeocodingCalcWaitingContainer"),Oe.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createReverseGeocodingResultsPanelElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPreverseGeocodingResultsPanel"),Oe.className="GPpanel GPelementHidden gpf-panel gpf-panel-reverse gpf-panel--hidden",Oe},_createReverseGeocodingResultsListElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPreverseGeocodingResultsList"),Oe.className="gpf-panel__list",Oe.setAttribute("tabindex","0"),Oe},_createReverseGeocodingResultElement:function(Oe,e){var t=this,ke=document.getElementById(this._addUID("GPreverseGeocodingResultsList")),Ge=document.createElement("div");Ge.id=this._addUID("GPreverseGeocodedLocation_"+e),Ge.setAttribute("tabindex","0"),Ge.className="GPautoCompleteProposal gpf-panel__items",Ge.innerHTML=Oe,Ge.title=Oe,Ge.addEventListener?(Ge.addEventListener("mouseover",function(Be){t.onReverseGeocodingResultMouseOver(Be)}),Ge.addEventListener("focus",function(Be){t.onReverseGeocodingResultMouseOver(Be)}),Ge.addEventListener("mouseout",function(Be){t.onReverseGeocodingResultMouseOut(Be)}),Ge.addEventListener("blur",function(Be){t.onReverseGeocodingResultMouseOut(Be)}),Ge.addEventListener("click",function(Be){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(Be)})):Ge.attachEvent&&(Ge.attachEvent("onmouseover",function(Be){t.onReverseGeocodingResultMouseOver(Be)}),Ge.attachEvent("onmouseout",function(Be){t.onReverseGeocodingResultMouseOut(Be)}),Ge.attachEvent("onclick",function(Be){typeof t.onReverseGeocodingResultClick=="function"&&t.onReverseGeocodingResultClick(Be)})),ke.appendChild(Ge)},_createReverseGeocodingPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPreverseGeocodingPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createReverseGeocodingPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createReverseGeocodingPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader gpf-panel__header fr-modal__header",Oe},_createReverseGeocodingPanelReturnPictoElement:function(){var Oe=this,e=document.createElement("button");if(e.id=this._addUID("GPreverseGeocodingReturnPicto"),e.title="Nouvelle recherche",e.className="GPreturnPicto GPimportPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--close fr-btn--tertiary-no-outline fr-m-1w",e.classList.add("GPelementHidden"),e.classList.add("gpf-hidden"),checkDsfr()){var t=document.createElement("span");t.className="GPelementHidden gpf-visible",t.innerHTML="Retour",e.appendChild(t)}return e.addEventListener?e.addEventListener("click",function(ke){document.getElementById(Oe._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(Oe._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(Oe._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(Oe._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(Oe._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),Oe.onGPreverseGeocodingReturnPictoClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){document.getElementById(Oe._addUID("GPreverseGeocodingResultsPanel")).className="GPelementHidden gpf-panel--hidden",document.getElementById(Oe._addUID("GPreverseGeocodingForm")).className="GPform gpf-panel__content fr-modal__content",document.getElementById(Oe._addUID("GPreverseGeocodingHeaderTitle")).innerHTML="Recherche inverse",document.getElementById(Oe._addUID("GPreverseGeocodingReturnPicto")).classList.add("GPelementHidden"),document.getElementById(Oe._addUID("GPreverseGeocodingReturnPicto")).classList.add("gpf-hidden"),Oe.onGPreverseGeocodingReturnPictoClick(ke)}),e},_createReverseGeocodingPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.id=this._addUID("GPreverseGeocodingHeaderTitle"),Oe.innerHTML="Recherche inverse",Oe},_createReverseGeocodingPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPreverseGeocodingPanelClose"),e.className="GPpanelClose GPreverseGeocodingPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?(e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowReverseGeocodingPicto")).click()},!1),e.addEventListener("keydown",function(ke){ke.keyCode===13&&document.getElementById(Oe._addUID("GPshowReverseGeocodingPicto")).click()},!1)):e.attachEvent&&(e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowReverseGeocodingPicto")).click()}),e.attachEvent("onkeydown",function(ke){ke.keyCode===13&&document.getElementById(Oe._addUID("GPshowReverseGeocodingPicto")).click()}));var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createReverseGeocodingPanelFormElement:function(){var Oe=this,e=document.createElement("form");return e.id=this._addUID("GPreverseGeocodingForm"),e.className="GPform gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),Oe.onReverseGeocodingSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),Oe.onReverseGeocodingSubmit()}),e},_createReverseGeocodingFormModeChoiceGeocodingTypeElement:function(Oe){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-1w";var ke=document.createElement("label");ke.id="label-recherche-par",ke.className="GPlabel gpf-label fr-label",ke.innerHTML="Recherche par",ke.title="Recherche par",t.appendChild(ke);var Ge=document.createElement("select");Ge.setAttribute("aria-labelledby","label-recherche-par"),Ge.className="GPselect gpf-select fr-select",Ge.addEventListener?Ge.addEventListener("change",function(Qe){e.onReverseGeocodingTypeChange(Qe)}):Ge.attachEvent&&Ge.attachEvent("onchange",function(Qe){e.onReverseGeocodingTypeChange(Qe)}),(!Oe||!Array.isArray(Oe))&&(Oe=["StreetAddress","PositionOfInterest","CadastralParcel"]);for(var Be=0;Be<Oe.length;Be++)switch(Oe[Be]){case"PositionOfInterest":var je=document.createElement("option");je.value="PositionOfInterest",je.text="Lieux/toponymes",Ge.appendChild(je);break;case"StreetAddress":var Ve=document.createElement("option");Ve.value="StreetAddress",Ve.text="Adresses",Ge.appendChild(Ve);break;case"CadastralParcel":var Ze=document.createElement("option");Ze.value="CadastralParcel",Ze.text="Parcelles cadastrales",Ge.appendChild(Ze);break}return t.appendChild(Ge),t},_createReverseGeocodingFormModeChoiceGeocodingDelimitationElement:function(Oe){var e=this,t=document.createElement("div");t.className="GPflexInput gpf-flex gpf-flex-reverse fr-mb-2w";var ke=document.createElement("label");ke.id="label-delimitation",ke.className="GPlabel gpf-label fr-label",ke.innerHTML="Délimitation",ke.title="Délimitation",t.appendChild(ke);var Ge=document.createElement("select");Ge.setAttribute("aria-labelledby","label-delimitation"),Ge.className="GPselect gpf-select fr-select",Ge.addEventListener?Ge.addEventListener("change",function(Qe){e.onReverseGeocodingDelimitationChange(Qe)}):Ge.attachEvent&&Ge.attachEvent("onchange",function(Qe){e.onReverseGeocodingDelimitationChange(Qe)}),(!Oe||!Array.isArray(Oe))&&(Oe=["Point","Circle","Extent"]);for(var Be=0;Be<Oe.length;Be++)switch(Oe[Be].toLowerCase()){case"point":var je=document.createElement("option");je.value="point",je.text="Pointer un lieu",Ge.appendChild(je);break;case"circle":var Ve=document.createElement("option");Ve.value="circle",Ve.text="Dessiner un cercle",Ge.appendChild(Ve);break;case"extent":var Ze=document.createElement("option");Ze.value="extent",Ze.text="Dessiner une emprise",Ge.appendChild(Ze);break}return t.appendChild(Ge),t},_createReverseGeocodingSubmitFormElement:function(){var Oe=document.createElement("input");return Oe.id=this._addUID("GPreverseGeocodingSubmit"),Oe.className="GPsubmit gpf-btn fr-btn",Oe.type="submit",Oe.value="Rechercher",Oe}},logger$m=LoggerByDefault.getLogger("reversegeocoding"),ReverseGeocode=class np extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof np))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ReverseGeocode",this.initialize(e),this.container=this._initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$m.log("[ERROR] ReverseGeocode:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showReverseGeocodingButton.click(),this.collapsed=e)}setMap(e){if(e)this._activateMapInteraction(e),this.draggable&&Draggable.dragElement(this._panelContainer,this._panelHeaderContainer,e.getTargetElement()),this.collapsed||this._showReverseGeocodingButton.setAttribute("aria-pressed",!0);else{var t=this.getMap();this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),this._inputFeaturesLayer!=null&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getData(){return this._reverseGeocodingLocations}getContainer(){return this.container}initialize(e){this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,resources:["StreetAddress","PositionOfInterest","CadastralParcel"],delimitations:["Point","Circle","Extent"],reverseGeocodeOptions:{},layerDescription:{title:"Saisie (recherche inverse)",description:"Couche de saisie d'une zone de recherche pour la recherche inverse"}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._currentGeocodingType=null,this._initGeocodingType(),this._currentGeocodingDelimitation=null,this._initGeocodingDelimitation(),this._showReverseGeocodingButton=null,this._panelContainer=null,this._panelHeaderContainer=null,this._panelTitleContainer=null,this._returnPictoContainer=null,this._panelCloseButton=null,this._formContainer=null,this._resultsContainer=null,this._resultsListContainer=null,this._waitingContainer=null,this._inputFeatures=null,this._inputFeaturesSource=null,this._inputFeaturesLayer=null,this._mapInteraction=null,this._requestOptions=null,this._requestGeom=null,this._requestPosition=null,this._waiting=!1,this._timer=null,this._reverseGeocodingLocations=[],this._reverseGeocodingLocationsMarkers=[],this._resultsDefaultStyle=new Style$1({image:new Icon({src:Marker.lightOrange,anchor:[.5,1]})}),this._resultsSelectedStyle=new Style$1({image:new Icon({src:Marker.red,anchor:[.5,1]})}),this._resultsHoverInteraction=null,this._resultsSelectInteraction=null,this._popupContent=null,this._popupDiv=this._initPopupDiv(),this._popupOverlay=null}_checkInputOptions(e){var t,ke;if(e.resources){var Ge=e.resources;if(Array.isArray(Ge)){var Be=["StreetAddress","PositionOfInterest","CadastralParcel"],je=[];for(t=0;t<Ge.length;t++)Be.indexOf(Ge[t])===-1&&(je.push(t),logger$m.log("[ReverseGeocode] options.resources : "+Ge[t]+" is not a resource for reverse geocode"));if(je.length!==0)for(ke=0;ke<je.length;ke++)Ge.splice(je[ke],1)}else logger$m.log("[ReverseGeocode] 'options.resources' parameter should be an array"),Ge=null}if(e.delimitations){var Ve=e.delimitations;if(Array.isArray(Ve)){var Ze=["Circle","Point","Extent"],Qe=[];for(t=0;t<Ve.length;t++)Ze.indexOf(Ve[t])===-1&&(Qe.push(t),logger$m.log("[ReverseGeocode] options.delimitations : "+Ve[t]+" is not a delimitation for reverse geocode"));if(Qe.length!==0)for(ke=0;ke<Qe.length;ke++)Ve.splice(Qe[ke],1)}else logger$m.log("[ReverseGeocode] 'options.delimitations' parameter should be an array"),Ve=null}}_initGeocodingType(){this._currentGeocodingType="StreetAddress";var e=this.options.resources;(!e||e.length===0)&&(this.options.resources=["StreetAddress","PositionOfInterest","CadastralParcel"]),Array.isArray(e)&&e.length&&(e[0]==="StreetAddress"||e[0]==="PositionOfInterest"||e[0]==="CadastralParcel")&&(this._currentGeocodingType=e[0]);var t=this.options.reverseGeocodeOptions;t.filterOptions&&Array.isArray(t.filterOptions.type)&&t.filterOptions.type.length!==0&&(this._currentGeocodingType=t.filterOptions.type[0])}_initGeocodingDelimitation(){this._currentGeocodingDelimitation="Point";var e=this.options.delimitations;if((!e||e.length===0)&&(this.options.delimitations=["Point","Circle","Extent"]),Array.isArray(e)&&e.length){var t=e[0].toLowerCase();(t==="point"||t==="circle"||t==="extent")&&(this._currentGeocodingDelimitation=e[0])}}_initPopupDiv(){var e=this,t=document.createElement("div");t.className="gp-feature-info-div";var ke=document.createElement("button");return ke.className="gp-styling-button closer",ke.onclick=function(){return e._popupOverlay!=null&&e._popupOverlay.setPosition(void 0),!1},this._popupContent=document.createElement("div"),this._popupContent.className="gp-features-content-div",t.appendChild(this._popupContent),t.appendChild(ke),t}_initContainer(){var e=this._createMainContainerElement(),t=this._showReverseGeocodingButton=this._createShowReverseGeocodingPictoElement();e.appendChild(t);var ke=this._panelContainer=this._createReverseGeocodingPanelElement(),Ge=this._createReverseGeocodingPanelDivElement();ke.appendChild(Ge);var Be=this._panelHeaderContainer=this._createReverseGeocodingPanelHeaderElement(),je=this._returnPictoContainer=this._createReverseGeocodingPanelReturnPictoElement();Be.appendChild(je);var Ve=this._panelTitleContainer=this._createReverseGeocodingPanelTitleElement();Be.appendChild(Ve);var Ze=this._panelCloseButton=this._createReverseGeocodingPanelCloseElement();Be.appendChild(Ze),Ge.appendChild(Be);var Qe=this._formContainer=this._createReverseGeocodingPanelFormElement();Qe.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingTypeElement(this.options.resources)),Qe.appendChild(this._createReverseGeocodingFormModeChoiceGeocodingDelimitationElement(this.options.delimitations));var en=this._createReverseGeocodingSubmitFormElement();Qe.appendChild(en),Ge.appendChild(Qe);var tn=this._waitingContainer=this._createReverseGeocodingWaitingElement();Ge.appendChild(tn);var an=this._resultsContainer=this._createReverseGeocodingResultsPanelElement(),cn=this._resultsListContainer=this._createReverseGeocodingResultsListElement();return an.appendChild(cn),Ge.appendChild(an),e.appendChild(ke),logger$m.log(e),e}_activateMapInteraction(e){if(!this.collapsed){this._inputFeaturesLayer==null&&(this._inputFeatures=new Collection,this._inputFeaturesSource=new VectorSource({features:this._inputFeatures}),this._inputFeaturesLayer=new VectorLayer({source:this._inputFeaturesSource,style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new Icon({src:Marker.turquoiseBlue,anchor:[.5,1]})})}),this._inputFeaturesLayer.gpResultLayerId="reverseGeocoding",e.addLayer(this._inputFeaturesLayer));var t=this._currentGeocodingDelimitation.toLowerCase();switch(t){case"point":this._activatePointInteraction(e);break;case"circle":this._activateCircleInteraction(e);break;case"extent":this._activateBoxInteraction(e);break}e.getControls().forEach(ke=>{if(ke instanceof LayerSwitcher){var Ge=this._inputFeaturesLayer.gpLayerId;ke._layers[Ge].title===Ge&&(ke.addLayer(this._inputFeaturesLayer,{title:this.options.layerDescription.title,description:this.options.layerDescription.description}),ke.setRemovable(this._inputFeaturesLayer,!1))}})}}_activatePointInteraction(e){this._mapInteraction=new Draw({style:new Style$1({image:new CircleStyle({radius:0,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Point",source:this._inputFeaturesSource}),this._mapInteraction.on("drawstart",t=>{logger$m.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"point")}),this._mapInteraction.on("drawend",t=>{logger$m.log("on drawend",t),t.feature&&t.feature.getGeometry&&(this._requestGeom={type:"Point",coordinates:[this._requestPosition.lon,this._requestPosition.lat]})}),e.addInteraction(this._mapInteraction),this._setCursor("crosshair",e)}_activateCircleInteraction(e){this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"Circle",source:this._inputFeaturesSource,geometryFunction:function(t,ke){const Ge=t[0],Be=t[t.length-1],je=Ge[0]-Be[0],Ve=Ge[1]-Be[1],Qe=Math.min(Math.sqrt(je*je+Ve*Ve),500);return ke?ke.setCenterAndRadius(Ge,Qe):ke=new ol.geom.Circle(Ge,Qe),ke}}),this._mapInteraction.on("drawstart",t=>{logger$m.log("on drawstart ",t),this._inputFeatures.clear(),this._onDrawStart(t,"circle")}),this._mapInteraction.on("drawend",t=>{if(logger$m.log("on drawend",t),t.feature&&t.feature.getGeometry){var ke=t.feature.getGeometry().getRadius();this._requestGeom={},this._requestGeom.type="Circle",this._requestGeom.radius=ke,this._requestPosition&&(this._requestGeom.coordinates=[this._requestPosition.lon,this._requestPosition.lat]),logger$m.log("circle radius : ",ke)}}),e.addInteraction(this._mapInteraction)}_activateBoxInteraction(e){var t=function(ke,Ge){Ge||(Ge=new Polygon([]));var Be=ke[0],je=ke[1];const Ve=Be[0]-je[0],Ze=Be[1]-je[1],Qe=1e3,en=Math.max(-1e3,Math.min(Ve,Qe)),tn=Math.max(-1e3,Math.min(Ze,Qe));return Ge.setCoordinates([[Be,[Be[0],Be[1]-tn],[Be[0]-en,Be[1]-tn],[Be[0]-en,Be[1]],Be]]),Ge};this._mapInteraction=new Draw({style:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"rgba(0, 183, 152, 0.8)",width:3}),image:new CircleStyle({radius:4,fill:new Fill({color:"rgba(0, 183, 152, 0.8)"})})}),type:"LineString",source:this._inputFeaturesSource,maxPoints:2,geometryFunction:t}),this._mapInteraction.on("drawstart",ke=>{logger$m.log("on drawstart",ke),this._inputFeatures.clear(),this._onDrawStart(ke,"polygon")}),this._mapInteraction.on("drawend",ke=>{logger$m.log("on drawend",ke),this._onBoxDrawEnd(ke)}),e.addInteraction(this._mapInteraction)}_removeMapInteraction(e){this._mapInteraction!=null&&(e.removeInteraction(this._mapInteraction),this._mapInteraction=null),this._setCursor()}_onDrawStart(e,t){var ke;if(e.feature&&e.feature.getGeometry){var Ge=e.feature.getGeometry();t==="point"&&(ke=Ge.getCoordinates()),t==="circle"&&(ke=Ge.getCenter()),t==="polygon"&&(ke=Ge.getFirstCoordinate())}if(ke){var Be;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Be=this.options.reverseGeocodeOptions.srs;else{var je=this.getMap();if(!je||!je.getView())return;Be=je.getView().getProjection()}var Ve=transform$1(ke,Be,"EPSG:4326");this._requestPosition={lon:Ve[0],lat:Ve[1]},logger$m.log("position coordinates : ",this._requestPosition)}}_onBoxDrawEnd(e){if(e.feature&&e.feature.getGeometry){var t=e.feature.getGeometry().getCoordinates()[0],ke=t[0],Ge=t[2],Be;if(this.options.reverseGeocodeOptions&&this.options.reverseGeocodeOptions.srs)Be=this.options.reverseGeocodeOptions.srs;else{var je=this.getMap();if(!je||!je.getView())return;Be=je.getView().getProjection()}var Ve=transform$1(ke,Be,"EPSG:4326"),Ze=transform$1(Ge,Be,"EPSG:4326"),Qe={};Ve[0]<Ze[0]?(Qe.left=Ve[0],Qe.right=Ze[0]):(Qe.left=Ze[0],Qe.right=Ve[0]),Ve[1]<Ze[1]?(Qe.bottom=Ve[1],Qe.top=Ze[1]):(Qe.bottom=Ze[1],Qe.top=Ve[1]),this._requestGeom={type:"Polygon",coordinates:[[[Qe.left,Qe.top],[Qe.left,Qe.bottom],[Qe.right,Qe.bottom],[Qe.right,Qe.top],[Qe.left,Qe.top]]]},logger$m.log("searchGeometry filter : ",this._requestGeom)}}_setCursor(e,t){if(t=t||this.getMap(),!!t){var ke=t.getTargetElement();e?ke.style.cursor=e:ke.style.cursor=null}}_reverseGeocodingRequest(){var e=this.getMap();this._requestOptions=this._getReverseGeocodingRequestOptions(),this._removeMapInteraction(e),this._displayWaitingContainer(),Gp.Services.reverseGeocode(this._requestOptions)}_getReverseGeocodingRequestOptions(){var e=this.getMap(),t=this.options.reverseGeocodeOptions,ke=this;typeof this.options.ssl!="boolean"&&(this.options.ssl=!0);var Ge=t.onFailure!==null&&typeof t.onFailure=="function",Be=t.onSuccess!==null&&typeof t.onSuccess=="function",je={apiKey:t.apiKey||this.options.apiKey,ssl:this.options.ssl,position:this._requestPosition,filterOptions:{type:[this._currentGeocodingType]},srs:"CRS:84",returnFreeForm:!1,maximumResponses:t.maximumResponses||18,timeOut:t.timeOut||3e4,onSuccess:function(Ve){Ve.locations&&(logger$m.log("reverseGeocode results : ",Ve.locations),ke._displayGeocodedLocations(Ve.locations)),Be&&t.onSuccess.call(ke,Ve.locations)},onFailure:function(Ve){ke._hideWaitingContainer(),ke._clearResults(),ke._clearInputFeatures(),ke._activateMapInteraction(e),logger$m.log(Ve.message),Ge&&t.onFailure.call(ke,Ve)}};return this._requestGeom.type.toLowerCase()==="circle"?(this._requestGeom.radius>500&&(logger$m.log("INFO : initial circle radius ("+this._requestGeom.radius+") limited to 1000m."),this._requestGeom.radius=500),je.searchGeometry=this._requestGeom):this._requestGeom.type.toLowerCase()==="polygon"?je.searchGeometry=this._requestGeom:this._requestGeom.type.toLowerCase()==="point"&&(this._currentGeocodingType==="StreetAddress"?(je.searchGeometry={type:"Circle",radius:50,coordinates:this._requestGeom.coordinates},je.maximumResponses=1):je.searchGeometry=this._requestGeom),logger$m.log("reverseGeocode request options : ",je),je}_displayGeocodedLocations(e){this._clearResults(),this._reverseGeocodingLocations=e,this.dispatchEvent({type:"reversegeocode:compute"}),this._formContainer.className="GPelementHidden gpf-hidden",this._hideWaitingContainer(),this._panelTitleContainer.innerHTML="Résultats de la recherche",this._returnPictoContainer.classList.remove("GPelementHidden"),this._returnPictoContainer.classList.remove("gpf-hidden"),this._resultsContainer.className="GPpanel gpf-panel gpf-panel-reverse",this._fillGeocodedLocationListContainer(e),this._displayGeocodedLocationsOnMap(e)}_fillGeocodedLocationListContainer(e){for(var t=0;t<e.length;t++){var ke=e[t];logger$m.log(ke);var Ge=this._fillGeocodedLocationDescription(ke);Ge&&Ge.length!==0&&this._createReverseGeocodingResultElement(Ge,t)}}_fillGeocodedLocationDescription(e){if(!(!e||!e.placeAttributes)){var t=e.placeAttributes,ke="";switch(e.type){case"StreetAddress":t.street&&(ke+=t.housenumber?t.housenumber+" ":"",ke+=t.street+", "),ke+=t.postcode+" "+t.city;break;case"PositionOfInterest":ke+=t.toponym,t.postcode&&t.postcode.length===1&&(ke+=", "+t.postcode[0]),ke+=" ("+t.category.join(",")+")";break;case"CadastralParcel":ke+=t.id,ke+=t.city?" ("+t.city+")":"";break;default:ke+=t.city?t.city:"";break}return ke}}_displayGeocodedLocationsOnMap(e){if(this._reverseGeocodingLocations.length!==0){var t=this.getMap();this._createResultsLayer();for(var ke=0;ke<e.length;ke++)this._addResultFeature(e[ke],ke);if(this._resultsFeatures.getLength()>1){if(this._resultsFeaturesSource&&this._resultsFeaturesSource.getExtent){var Ge=this._resultsFeaturesSource.getExtent();t.getView().fit(Ge,t.getSize())}}else{var Be=this._resultsFeatures.item(0),je=Be.getGeometry().getCoordinates();t.getView().setCenter(je),t.getView().setZoom(17)}this._resultsHoverInteraction=new Select({condition:pointerMove,layers:[this._resultsFeaturesLayer]}),this._resultsHoverInteraction.on("select",Ze=>this._onResultsFeatureMouseOver(Ze)),t.addInteraction(this._resultsHoverInteraction),this._resultsSelectInteraction=new Select({layers:[this._resultsFeaturesLayer]}),this._resultsSelectInteraction.on("select",Ze=>this._onResultsFeatureSelect(Ze)),t.addInteraction(this._resultsSelectInteraction);var Ve="";switch(this._currentGeocodingType){case"StreetAddress":Ve="adresses";break;case"PositionOfInterest":Ve="toponymes";break;case"CadastralParcel":Ve="parcelles cadastrales";break}t.getControls().forEach(Ze=>{if(Ze instanceof LayerSwitcher){var Qe=this._resultsFeaturesLayer.gpLayerId;Ze._layers[Qe].title===Qe&&(Ze.addLayer(this._resultsFeaturesLayer,{title:"Résultats de la recherche inverse",description:"Résultats de la recherche inverse sur les "+Ve}),Ze.setRemovable(this._resultsFeaturesLayer,!1))}})}}_createResultsLayer(){var e=this.getMap();this._resultsFeatures=new Collection,this._resultsFeaturesSource=new VectorSource({features:this._resultsFeatures}),this._resultsFeaturesLayer=new VectorLayer({source:this._resultsFeaturesSource}),this._resultsFeaturesLayer.gpResultLayerId="reverseGeocodingResults",e.addLayer(this._resultsFeaturesLayer)}_addResultFeature(e,t){var ke=this.getMap(),Ge=[e.position.lon,e.position.lat];if(Ge.length!==0){var Be=ke.getView(),je=Be.getProjection().getCode();je!=="EPSG:4326"&&(Ge=transform$1(Ge,"EPSG:4326",je));var Ve=new Feature({geometry:new Point$1(Ge)});Ve.setStyle(this._resultsDefaultStyle),Ve.setId(t),Ve.setProperties({location:e,popupContent:this._fillPopupContent(e)}),this._resultsFeatures.push(Ve)}}_fillPopupContent(e){var t="<ul>",ke=e.placeAttributes;for(var Ge in ke)ke.hasOwnProperty(Ge)&&Ge!=="trueGeometry"&&Ge!=="extraFields"&&Ge!=="houseNumberInfos"&&Ge!=="_count"&&(t+="<li>",t+='<span class="gp-attname-others-span">'+Ge.toUpperCase()+" : </span>",t+=ke[Ge],t+=" </li>");return t+=" </ul>",t}_onResultsFeatureMouseOver(e){var t;if(e.selected.length!==0){if(t=e.selected[0],t.setStyle(this._resultsSelectedStyle),t.getId()!=null){var ke=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);ke&&ke.classList&&ke.classList.add("GPlocationHighlight")}document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid)}if(e.deselected.length!==0){t=e.deselected[0],t.setStyle(this._resultsDefaultStyle);var Ge=document.getElementById("GPreverseGeocodedLocation_"+t.getId()+"-"+this._uid);Ge&&Ge.classList&&Ge.classList.remove("GPlocationHighlight")}}_onResultsFeatureSelect(e){var t=this.getMap();if(e.selected.length!==0){var ke=e.selected[0];this._popupContent.innerHTML=ke.getProperties().popupContent,this._popupOverlay?this._popupOverlay.setPosition(e.mapBrowserEvent.coordinate):(this._popupOverlay=new Overlay({element:this._popupDiv,positioning:"bottom-center",position:e.mapBrowserEvent.coordinate}),t.addOverlay(this._popupOverlay)),this.dispatchEvent({type:"reversegeocode:onclickresult",location:ke.getProperties().location})}else this._popupOverlay!=null&&this._popupOverlay.setPosition(void 0)}onShowReverseGeocodingClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();if(t){Interactions.unset(t);var ke=this._showReverseGeocodingButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),!this._waiting&&!this._reverseGeocodingLocations.length&&(this.collapsed?(this._clearResults(),this._clearInputFeatures(),this._removeMapInteraction(t),this._inputFeaturesLayer!=null&&(t.removeLayer(this._inputFeaturesLayer),this._inputFeaturesLayer=null,this._inputFeaturesSources=null,this._inputFeatures=null)):this._activateMapInteraction(t))}}onReverseGeocodingTypeChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value;ke&&(logger$m.log(ke),this._currentGeocodingType=ke)}onReverseGeocodingDelimitationChange(e){var t=e.target.selectedIndex,ke=e.target.options[t].value;if(ke){logger$m.log(ke),this._currentGeocodingDelimitation=ke;var Ge=this.getMap();this._clearInputFeatures(),this._removeMapInteraction(Ge),this._activateMapInteraction(Ge)}}onGPreverseGeocodingReturnPictoClick(){this._clearResults(),this._clearInputFeatures(),this._activateMapInteraction(this.getMap())}onReverseGeocodingSubmit(){if(!this._requestPosition){logger$m.log("missing position");return}this._reverseGeocodingRequest()}onReverseGeocodingResultClick(e){var t=e.target.id,ke=t.substring(t.indexOf("_")+1),Ge=this._resultsFeaturesSource.getFeatureById(parseInt(ke,10));this.dispatchEvent({type:"reversegeocode:onclickresult",location:Ge.getProperties().location})}onReverseGeocodingResultMouseOver(e){var t=e.target.id,ke=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.add("GPlocationHighlight"),!!this._resultsFeaturesSource){var Ge=this._resultsFeaturesSource.getFeatureById(parseInt(ke,10));Ge.setStyle(this._resultsSelectedStyle)}}onReverseGeocodingResultMouseOut(e){var t=e.target.id,ke=t.substring(t.indexOf("_")+1);if(e.target.classList&&e.target.classList.remove("GPlocationHighlight"),!!this._resultsFeaturesSource){var Ge=this._resultsFeaturesSource.getFeatureById(parseInt(ke,10));Ge.setStyle(this._resultsDefaultStyle)}}_clearResults(){var e=this.getMap();if(this._reverseGeocodingLocations=[],this._resultsListContainer)for(;this._resultsListContainer.firstChild;)this._resultsListContainer.removeChild(this._resultsListContainer.firstChild);this._resultsFeaturesLayer&&(e.removeLayer(this._resultsFeaturesLayer),this._resultsFeaturesLayer=null),this._popupOverlay!=null&&(e.removeOverlay(this._popupOverlay),this._popupOverlay=null),this._resultsSelectInteraction!=null&&(e.removeInteraction(this._resultsSelectInteraction),this._resultsSelectInteraction=null),this._resultsHoverInteraction!=null&&(e.removeInteraction(this._resultsHoverInteraction),this._resultsHoverInteraction=null)}_clearInputFeatures(){this._inputFeatures&&this._inputFeatures.clear(),this._requestGeom=null,this._requestPosition=null}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}};Object.assign(ReverseGeocode.prototype,ReverseGeocodeDOM);Object.assign(ReverseGeocode.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ReverseGeocode=ReverseGeocode);class XML{read(e){if(!e)return null;if(typeof e=="string"){const t=parse$1(e);return this.readFromDocument(t)}return isDocument(e)?this.readFromDocument(e):this.readFromNode(e)}readFromDocument(e){for(let t=e.firstChild;t;t=t.nextSibling)if(t.nodeType==Node.ELEMENT_NODE)return this.readFromNode(t);return null}readFromNode(e){abstract()}}const NAMESPACE_URI="http://www.w3.org/1999/xlink";function readHref(Oe){return Oe.getAttributeNS(NAMESPACE_URI,"href")}const NAMESPACE_URIS$2=[null,"http://www.opengis.net/wms"];function isV13(Oe){return compareVersions(Oe[0].version,"1.3")>=0}const PARSERS$2=makeStructureNS(NAMESPACE_URIS$2,{Service:makeObjectPropertySetter(readService),Capability:makeObjectPropertySetter(readCapability)}),COMMON_CAPABILITY_PARSERS={Request:makeObjectPropertySetter(readRequest),Exception:makeObjectPropertySetter(readException),Layer:makeObjectPropertySetter(readCapabilityLayer)},CAPABILITY_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_CAPABILITY_PARSERS,UserDefinedSymbolization:makeObjectPropertySetter(readUserDefinedSymbolization)}),CAPABILITY_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,COMMON_CAPABILITY_PARSERS);class WMSCapabilities extends XML{constructor(){super(),this.version=void 0}readFromNode(e){this.version=e.getAttribute("version").trim();const t=pushParseAndPop({version:this.version},PARSERS$2,e,[]);return t||null}}const COMMON_SERVICE_PARSERS={Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),OnlineResource:makeObjectPropertySetter(readHref),ContactInformation:makeObjectPropertySetter(readContactInformation),Fees:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString)},SERVICE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,COMMON_SERVICE_PARSERS),SERVICE_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_SERVICE_PARSERS,LayerLimit:makeObjectPropertySetter(readPositiveInteger),MaxWidth:makeObjectPropertySetter(readPositiveInteger),MaxHeight:makeObjectPropertySetter(readPositiveInteger)}),CONTACT_INFORMATION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPersonPrimary:makeObjectPropertySetter(readContactPersonPrimary),ContactPosition:makeObjectPropertySetter(readString),ContactAddress:makeObjectPropertySetter(readContactAddress),ContactVoiceTelephone:makeObjectPropertySetter(readString),ContactFacsimileTelephone:makeObjectPropertySetter(readString),ContactElectronicMailAddress:makeObjectPropertySetter(readString)}),CONTACT_PERSON_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{ContactPerson:makeObjectPropertySetter(readString),ContactOrganization:makeObjectPropertySetter(readString)}),CONTACT_ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{AddressType:makeObjectPropertySetter(readString),Address:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),StateOrProvince:makeObjectPropertySetter(readString),PostCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString)}),EXCEPTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeArrayPusher(readString)}),COMMON_LAYER_PARSERS={Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),KeywordList:makeObjectPropertySetter(readKeywordList),BoundingBox:makeObjectPropertyPusher(readBoundingBox$1),Dimension:makeObjectPropertyPusher(readDimension),Attribution:makeObjectPropertySetter(readAttribution),AuthorityURL:makeObjectPropertyPusher(readAuthorityURL),Identifier:makeObjectPropertyPusher(readString),MetadataURL:makeObjectPropertyPusher(readMetadataURL),DataURL:makeObjectPropertyPusher(readFormatOnlineresource),FeatureListURL:makeObjectPropertyPusher(readFormatOnlineresource),Style:makeObjectPropertyPusher(readStyle$1),Layer:makeObjectPropertyPusher(readLayer$1)},LAYER_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_LAYER_PARSERS,SRS:makeObjectPropertyPusher(readString),Extent:makeObjectPropertySetter(readExtent),ScaleHint:makeObjectPropertyPusher(readScaleHint),LatLonBoundingBox:makeObjectPropertySetter((Oe,e)=>readBoundingBox$1(Oe,e,!1)),Layer:makeObjectPropertyPusher(readLayer$1)}),LAYER_PARSERS_V13=makeStructureNS(NAMESPACE_URIS$2,{...COMMON_LAYER_PARSERS,CRS:makeObjectPropertyPusher(readString),EX_GeographicBoundingBox:makeObjectPropertySetter(readEXGeographicBoundingBox),MinScaleDenominator:makeObjectPropertySetter(readDecimal),MaxScaleDenominator:makeObjectPropertySetter(readDecimal),Layer:makeObjectPropertyPusher(readLayer$1)}),ATTRIBUTION_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Title:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref),LogoURL:makeObjectPropertySetter(readSizedFormatOnlineresource)}),EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{westBoundLongitude:makeObjectPropertySetter(readDecimal),eastBoundLongitude:makeObjectPropertySetter(readDecimal),southBoundLatitude:makeObjectPropertySetter(readDecimal),northBoundLatitude:makeObjectPropertySetter(readDecimal)}),REQUEST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{GetCapabilities:makeObjectPropertySetter(readOperationType),GetMap:makeObjectPropertySetter(readOperationType),GetFeatureInfo:makeObjectPropertySetter(readOperationType)}),OPERATIONTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertyPusher(readString),DCPType:makeObjectPropertyPusher(readDCPType)}),DCPTYPE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{HTTP:makeObjectPropertySetter(readHTTP)}),HTTP_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Get:makeObjectPropertySetter(readFormatOnlineresource),Post:makeObjectPropertySetter(readFormatOnlineresource)}),STYLE_PARSERS$1=makeStructureNS(NAMESPACE_URIS$2,{Name:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),LegendURL:makeObjectPropertyPusher(readSizedFormatOnlineresource),StyleSheetURL:makeObjectPropertySetter(readFormatOnlineresource),StyleURL:makeObjectPropertySetter(readFormatOnlineresource)}),FORMAT_ONLINERESOURCE_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Format:makeObjectPropertySetter(readString),OnlineResource:makeObjectPropertySetter(readHref)}),KEYWORDLIST_PARSERS=makeStructureNS(NAMESPACE_URIS$2,{Keyword:makeArrayPusher(readString)});function readAttribution(Oe,e){return pushParseAndPop({},ATTRIBUTION_PARSERS,Oe,e)}function readUserDefinedSymbolization(Oe,e){return{SupportSLD:!!readBooleanString(Oe.getAttribute("UserDefinedSymbolization")),UserLayer:!!readBooleanString(Oe.getAttribute("UserLayer")),UserStyle:!!readBooleanString(Oe.getAttribute("UserStyle")),RemoteWFS:!!readBooleanString(Oe.getAttribute("RemoteWFS"))}}function readBoundingBox$1(Oe,e,t=!0){const ke=[readDecimalString(Oe.getAttribute("minx")),readDecimalString(Oe.getAttribute("miny")),readDecimalString(Oe.getAttribute("maxx")),readDecimalString(Oe.getAttribute("maxy"))],Ge=[readDecimalString(Oe.getAttribute("resx")),readDecimalString(Oe.getAttribute("resy"))],Be={extent:ke,res:Ge};return t&&(isV13(e)?Be.crs=Oe.getAttribute("CRS"):Be.srs=Oe.getAttribute("SRS")),Be}function readEXGeographicBoundingBox(Oe,e){const t=pushParseAndPop({},EX_GEOGRAPHIC_BOUNDING_BOX_PARSERS,Oe,e);if(!t)return;const ke=t.westBoundLongitude,Ge=t.southBoundLatitude,Be=t.eastBoundLongitude,je=t.northBoundLatitude;if(!(ke===void 0||Ge===void 0||Be===void 0||je===void 0))return[ke,Ge,Be,je]}function readCapability(Oe,e){return pushParseAndPop({},isV13(e)?CAPABILITY_PARSERS_V13:CAPABILITY_PARSERS,Oe,e)}function readService(Oe,e){return pushParseAndPop({},isV13(e)?SERVICE_PARSERS_V13:SERVICE_PARSERS,Oe,e)}function readContactInformation(Oe,e){return pushParseAndPop({},CONTACT_INFORMATION_PARSERS,Oe,e)}function readContactPersonPrimary(Oe,e){return pushParseAndPop({},CONTACT_PERSON_PARSERS,Oe,e)}function readContactAddress(Oe,e){return pushParseAndPop({},CONTACT_ADDRESS_PARSERS,Oe,e)}function readException(Oe,e){return pushParseAndPop([],EXCEPTION_PARSERS,Oe,e)}function readCapabilityLayer(Oe,e){const t=pushParseAndPop({},isV13(e)?LAYER_PARSERS_V13:LAYER_PARSERS$1,Oe,e);return t.Layer===void 0?Object.assign(t,readLayer$1(Oe,e)):t}function readLayer$1(Oe,e){const t=isV13(e),ke=e[e.length-1],Ge=pushParseAndPop({},t?LAYER_PARSERS_V13:LAYER_PARSERS$1,Oe,e);if(!Ge)return;let Be=readBooleanString(Oe.getAttribute("queryable"));Be===void 0&&(Be=ke.queryable),Ge.queryable=Be!==void 0?Be:!1;let je=readNonNegativeIntegerString(Oe.getAttribute("cascaded"));je===void 0&&(je=ke.cascaded),Ge.cascaded=je;let Ve=readBooleanString(Oe.getAttribute("opaque"));Ve===void 0&&(Ve=ke.opaque),Ge.opaque=Ve!==void 0?Ve:!1;let Ze=readBooleanString(Oe.getAttribute("noSubsets"));Ze===void 0&&(Ze=ke.noSubsets),Ge.noSubsets=Ze!==void 0?Ze:!1;let Qe=readDecimalString(Oe.getAttribute("fixedWidth"));Qe||(Qe=ke.fixedWidth),Ge.fixedWidth=Qe;let en=readDecimalString(Oe.getAttribute("fixedHeight"));en||(en=ke.fixedHeight),Ge.fixedHeight=en;const tn=["Style","AuthorityURL"];t?tn.push("CRS"):tn.push("SRS","Dimension"),tn.forEach(function(cn){if(cn in ke){const un=Ge[cn]||[];Ge[cn]=un.concat(ke[cn])}});const an=["BoundingBox","Attribution"];return t?an.push("Dimension","EX_GeographicBoundingBox","MinScaleDenominator","MaxScaleDenominator"):an.push("LatLonBoundingBox","ScaleHint","Extent"),an.forEach(function(cn){if(!(cn in Ge)){const un=ke[cn];Ge[cn]=un}}),Ge}function readDimension(Oe,e){const t={name:Oe.getAttribute("name"),units:Oe.getAttribute("units"),unitSymbol:Oe.getAttribute("unitSymbol")};return isV13(e)&&Object.assign(t,{default:Oe.getAttribute("default"),multipleValues:readBooleanString(Oe.getAttribute("multipleValues")),nearestValue:readBooleanString(Oe.getAttribute("nearestValue")),current:readBooleanString(Oe.getAttribute("current")),values:readString(Oe)}),t}function readExtent(Oe,e){return{name:Oe.getAttribute("name"),default:Oe.getAttribute("default"),nearestValue:readBooleanString(Oe.getAttribute("nearestValue"))}}function readScaleHint(Oe,e){return{min:readDecimalString(Oe.getAttribute("min")),max:readDecimalString(Oe.getAttribute("max"))}}function readFormatOnlineresource(Oe,e){return pushParseAndPop({},FORMAT_ONLINERESOURCE_PARSERS,Oe,e)}function readRequest(Oe,e){return pushParseAndPop({},REQUEST_PARSERS,Oe,e)}function readDCPType(Oe,e){return pushParseAndPop({},DCPTYPE_PARSERS,Oe,e)}function readHTTP(Oe,e){return pushParseAndPop({},HTTP_PARSERS$1,Oe,e)}function readOperationType(Oe,e){return pushParseAndPop({},OPERATIONTYPE_PARSERS,Oe,e)}function readSizedFormatOnlineresource(Oe,e){const t=readFormatOnlineresource(Oe,e);if(t){const ke=[readNonNegativeIntegerString(Oe.getAttribute("width")),readNonNegativeIntegerString(Oe.getAttribute("height"))];return t.size=ke,t}}function readAuthorityURL(Oe,e){const t=readFormatOnlineresource(Oe,e);if(t)return t.name=Oe.getAttribute("name"),t}function readMetadataURL(Oe,e){const t=readFormatOnlineresource(Oe,e);if(t)return t.type=Oe.getAttribute("type"),t}function readStyle$1(Oe,e){return pushParseAndPop({},STYLE_PARSERS$1,Oe,e)}function readKeywordList(Oe,e){return pushParseAndPop([],KEYWORDLIST_PARSERS,Oe,e)}const NAMESPACE_URIS$1=[null,"http://www.opengis.net/ows/1.1"],PARSERS$1=makeStructureNS(NAMESPACE_URIS$1,{ServiceIdentification:makeObjectPropertySetter(readServiceIdentification),ServiceProvider:makeObjectPropertySetter(readServiceProvider),OperationsMetadata:makeObjectPropertySetter(readOperationsMetadata)});class OWS extends XML{constructor(){super()}readFromNode(e){const t=pushParseAndPop({},PARSERS$1,e,[]);return t||null}}const ADDRESS_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DeliveryPoint:makeObjectPropertySetter(readString),City:makeObjectPropertySetter(readString),AdministrativeArea:makeObjectPropertySetter(readString),PostalCode:makeObjectPropertySetter(readString),Country:makeObjectPropertySetter(readString),ElectronicMailAddress:makeObjectPropertySetter(readString)}),ALLOWED_VALUES_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Value:makeObjectPropertyPusher(readValue)}),CONSTRAINT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{AllowedValues:makeObjectPropertySetter(readAllowedValues)}),CONTACT_INFO_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Phone:makeObjectPropertySetter(readPhone),Address:makeObjectPropertySetter(readAddress)}),DCP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{HTTP:makeObjectPropertySetter(readHttp)}),HTTP_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Get:makeObjectPropertyPusher(readGet),Post:void 0}),OPERATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{DCP:makeObjectPropertySetter(readDcp)}),OPERATIONS_METADATA_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Operation:readOperation}),PHONE_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Voice:makeObjectPropertySetter(readString),Facsimile:makeObjectPropertySetter(readString)}),REQUEST_METHOD_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Constraint:makeObjectPropertyPusher(readConstraint)}),SERVICE_CONTACT_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{IndividualName:makeObjectPropertySetter(readString),PositionName:makeObjectPropertySetter(readString),ContactInfo:makeObjectPropertySetter(readContactInfo)}),SERVICE_IDENTIFICATION_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{Abstract:makeObjectPropertySetter(readString),AccessConstraints:makeObjectPropertySetter(readString),Fees:makeObjectPropertySetter(readString),Title:makeObjectPropertySetter(readString),ServiceTypeVersion:makeObjectPropertySetter(readString),ServiceType:makeObjectPropertySetter(readString)}),SERVICE_PROVIDER_PARSERS=makeStructureNS(NAMESPACE_URIS$1,{ProviderName:makeObjectPropertySetter(readString),ProviderSite:makeObjectPropertySetter(readHref),ServiceContact:makeObjectPropertySetter(readServiceContact)});function readAddress(Oe,e){return pushParseAndPop({},ADDRESS_PARSERS,Oe,e)}function readAllowedValues(Oe,e){return pushParseAndPop({},ALLOWED_VALUES_PARSERS,Oe,e)}function readConstraint(Oe,e){const t=Oe.getAttribute("name");if(t)return pushParseAndPop({name:t},CONSTRAINT_PARSERS,Oe,e)}function readContactInfo(Oe,e){return pushParseAndPop({},CONTACT_INFO_PARSERS,Oe,e)}function readDcp(Oe,e){return pushParseAndPop({},DCP_PARSERS,Oe,e)}function readGet(Oe,e){const t=readHref(Oe);if(t)return pushParseAndPop({href:t},REQUEST_METHOD_PARSERS,Oe,e)}function readHttp(Oe,e){return pushParseAndPop({},HTTP_PARSERS,Oe,e)}function readOperation(Oe,e){const t=Oe.getAttribute("name"),ke=pushParseAndPop({},OPERATION_PARSERS,Oe,e);if(!ke)return;const Ge=e[e.length-1];Ge[t]=ke}function readOperationsMetadata(Oe,e){return pushParseAndPop({},OPERATIONS_METADATA_PARSERS,Oe,e)}function readPhone(Oe,e){return pushParseAndPop({},PHONE_PARSERS,Oe,e)}function readServiceIdentification(Oe,e){return pushParseAndPop({},SERVICE_IDENTIFICATION_PARSERS,Oe,e)}function readServiceContact(Oe,e){return pushParseAndPop({},SERVICE_CONTACT_PARSERS,Oe,e)}function readServiceProvider(Oe,e){return pushParseAndPop({},SERVICE_PROVIDER_PARSERS,Oe,e)}function readValue(Oe,e){return readString(Oe)}const NAMESPACE_URIS=[null,"http://www.opengis.net/wmts/1.0"],OWS_NAMESPACE_URIS=[null,"http://www.opengis.net/ows/1.1"],PARSERS=makeStructureNS(NAMESPACE_URIS,{Contents:makeObjectPropertySetter(readContents)});class WMTSCapabilities extends XML{constructor(){super(),this.owsParser_=new OWS}readFromNode(e){let t=e.getAttribute("version");t&&(t=t.trim());let ke=this.owsParser_.readFromNode(e);return ke?(ke.version=t,ke=pushParseAndPop(ke,PARSERS,e,[]),ke||null):null}}const CONTENTS_PARSERS=makeStructureNS(NAMESPACE_URIS,{Layer:makeObjectPropertyPusher(readLayer),TileMatrixSet:makeObjectPropertyPusher(readTileMatrixSet)}),LAYER_PARSERS=makeStructureNS(NAMESPACE_URIS,{Style:makeObjectPropertyPusher(readStyle),Format:makeObjectPropertyPusher(readString),TileMatrixSetLink:makeObjectPropertyPusher(readTileMatrixSetLink),Dimension:makeObjectPropertyPusher(readDimensions),ResourceURL:makeObjectPropertyPusher(readResourceUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Abstract:makeObjectPropertySetter(readString),WGS84BoundingBox:makeObjectPropertySetter(readBoundingBox),BoundingBox:makeObjectPropertyPusher(readBoundingBoxWithCrs),Identifier:makeObjectPropertySetter(readString)})),STYLE_PARSERS=makeStructureNS(NAMESPACE_URIS,{LegendURL:makeObjectPropertyPusher(readLegendUrl)},makeStructureNS(OWS_NAMESPACE_URIS,{Title:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString)})),TMS_LINKS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixSet:makeObjectPropertySetter(readString),TileMatrixSetLimits:makeObjectPropertySetter(readTileMatrixLimitsList)}),TMS_LIMITS_LIST_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrixLimits:makeArrayPusher(readTileMatrixLimits)}),TMS_LIMITS_PARSERS=makeStructureNS(NAMESPACE_URIS,{TileMatrix:makeObjectPropertySetter(readString),MinTileRow:makeObjectPropertySetter(readPositiveInteger),MaxTileRow:makeObjectPropertySetter(readPositiveInteger),MinTileCol:makeObjectPropertySetter(readPositiveInteger),MaxTileCol:makeObjectPropertySetter(readPositiveInteger)}),DIMENSION_PARSERS=makeStructureNS(NAMESPACE_URIS,{Default:makeObjectPropertySetter(readString),Value:makeObjectPropertyPusher(readString)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)})),WGS84_BBOX_READERS=makeStructureNS(OWS_NAMESPACE_URIS,{LowerCorner:makeArrayPusher(readCoordinates),UpperCorner:makeArrayPusher(readCoordinates)}),TMS_PARSERS=makeStructureNS(NAMESPACE_URIS,{WellKnownScaleSet:makeObjectPropertySetter(readString),TileMatrix:makeObjectPropertyPusher(readTileMatrix)},makeStructureNS(OWS_NAMESPACE_URIS,{SupportedCRS:makeObjectPropertySetter(readString),Identifier:makeObjectPropertySetter(readString),BoundingBox:makeObjectPropertySetter(readBoundingBox)})),TM_PARSERS=makeStructureNS(NAMESPACE_URIS,{TopLeftCorner:makeObjectPropertySetter(readCoordinates),ScaleDenominator:makeObjectPropertySetter(readDecimal),TileWidth:makeObjectPropertySetter(readPositiveInteger),TileHeight:makeObjectPropertySetter(readPositiveInteger),MatrixWidth:makeObjectPropertySetter(readPositiveInteger),MatrixHeight:makeObjectPropertySetter(readPositiveInteger)},makeStructureNS(OWS_NAMESPACE_URIS,{Identifier:makeObjectPropertySetter(readString)}));function readContents(Oe,e){return pushParseAndPop({},CONTENTS_PARSERS,Oe,e)}function readLayer(Oe,e){return pushParseAndPop({},LAYER_PARSERS,Oe,e)}function readTileMatrixSet(Oe,e){return pushParseAndPop({},TMS_PARSERS,Oe,e)}function readStyle(Oe,e){const t=pushParseAndPop({},STYLE_PARSERS,Oe,e);if(!t)return;const ke=Oe.getAttribute("isDefault")==="true";return t.isDefault=ke,t}function readTileMatrixSetLink(Oe,e){return pushParseAndPop({},TMS_LINKS_PARSERS,Oe,e)}function readDimensions(Oe,e){return pushParseAndPop({},DIMENSION_PARSERS,Oe,e)}function readResourceUrl(Oe,e){const t=Oe.getAttribute("format"),ke=Oe.getAttribute("template"),Ge=Oe.getAttribute("resourceType"),Be={};return t&&(Be.format=t),ke&&(Be.template=ke),Ge&&(Be.resourceType=Ge),Be}function readBoundingBox(Oe,e){const t=pushParseAndPop([],WGS84_BBOX_READERS,Oe,e);if(t.length==2)return boundingExtent(t)}function readBoundingBoxWithCrs(Oe,e){const t=Oe.getAttribute("crs"),ke=pushParseAndPop([],WGS84_BBOX_READERS,Oe,e);if(ke.length==2)return{extent:boundingExtent(ke),crs:t}}function readLegendUrl(Oe,e){const t={};return t.format=Oe.getAttribute("format"),t.href=readHref(Oe),t}function readCoordinates(Oe,e){const t=readString(Oe).split(/\s+/);if(!t||t.length!=2)return;const ke=+t[0],Ge=+t[1];if(!(isNaN(ke)||isNaN(Ge)))return[ke,Ge]}function readTileMatrix(Oe,e){return pushParseAndPop({},TM_PARSERS,Oe,e)}function readTileMatrixLimitsList(Oe,e){return pushParseAndPop([],TMS_LIMITS_LIST_PARSERS,Oe,e)}function readTileMatrixLimits(Oe,e){return pushParseAndPop({},TMS_LIMITS_PARSERS,Oe,e)}var eventbus_min={exports:{}};(function(Oe,e){(function(t,ke){Oe.exports=ke()})(commonjsGlobal,function(){var t={};t=function(){this.listeners={}},t.prototype={addEventListener:function(Ge,Be,je){for(var Ve=[],Ze=arguments.length,Qe=0;Qe<Ze;Qe++)Ve.push(arguments[Qe]);Ve=Ve.length>3?Ve.splice(3,Ve.length-1):[],typeof this.listeners[Ge]<"u"?this.listeners[Ge].push({scope:je,callback:Be,args:Ve}):this.listeners[Ge]=[{scope:je,callback:Be,args:Ve}]},removeEventListener:function(Ge,Be,je){if(typeof this.listeners[Ge]<"u"){for(var Ve=this.listeners[Ge].length,Ze=[],Qe=0;Qe<Ve;Qe++){var en=this.listeners[Ge][Qe];en.scope==je&&en.callback==Be||Ze.push(en)}this.listeners[Ge]=Ze}},hasEventListener:function(Ge,Be,je){if(typeof this.listeners[Ge]<"u"){var Ve=this.listeners[Ge].length;if(Be===void 0&&je===void 0)return Ve>0;for(var Ze=0;Ze<Ve;Ze++){var Qe=this.listeners[Ge][Ze];if((!je||Qe.scope==je)&&Qe.callback==Be)return!0}}return!1},dispatch:function(Ge,Be){for(var je={type:Ge,target:Be},Ve=[],Ze=arguments.length,Qe=0;Qe<Ze;Qe++)Ve.push(arguments[Qe]);if(Ve=Ve.length>2?Ve.splice(2,Ve.length-1):[],Ve=[je].concat(Ve),typeof this.listeners[Ge]<"u")for(var en=this.listeners[Ge].slice(),tn=en.length,Qe=0;Qe<tn;Qe++){var an=en[Qe];if(an&&an.callback){var cn=Ve.concat(an.args);an.callback.apply(an.scope,cn)}}},getEvents:function(){var Ge="";for(var Be in this.listeners)for(var je=this.listeners[Be].length,Ve=0;Ve<je;Ve++){var Ze=this.listeners[Be][Ve];Ge+=Ze.scope&&Ze.scope.className?Ze.scope.className:"anonymous",Ge+=" listen for '"+Be+`'
`}return Ge}};var ke=new t;return ke})})(eventbus_min);var eventbus_minExports=eventbus_min.exports;const EventBus=getDefaultExportFromCjs$1(eventbus_minExports);var EventEditor={onloaded:"editor:onloaded",layer:{onclickvisibility:"editor:layer:onclickvisibility",onclickclone:"editor:layer:onclickclone",onclickremove:"editor:layer:onclickremove"},legend:{onclickedition:"editor:legend:onclickedition",onchangevalue:"editor:legend:onchangevalue"},group:{oncollapse:"editor:group:oncollapse"},style:{oneditjson:"editor:style:oneditjson",scale:{onchangemin:"editor:style:scale:onchangemin",onchangemax:"editor:style:scale:onchangemax"}},filter:{oneditjson:"editor:filter:oneditjson"},themes:{onclickimage:"editor:themes:onclickimage",onclicktitle:"editor:themes:onclicktitle"},search:{onsubmit:"editor:search:onsubmit",onautocomplete:"editor:search:onautocomplete"}},logger$l=LoggerByDefault.getLogger("editor-style");class Style{constructor(e){if(logger$l.trace("[constructor] Style",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Style))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={scale:!0,edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={paint:{},layout:{}}),this.options.title||(this.options.title="JSON Styles :"),this.container=null,this.name={target:"GPEditorMapBoxStyleTarget",container:"GPEditorMapBoxStyleContainer",containerjson:"GPEditorMapBoxStyleJsonContainer",jsonlabel:"GPEditorMapBoxStyleJsonTitle",jsondisplay:"GPEditorMapBoxStyleJsonDisplay",containertoolsscale:"GPEditorMapBoxStyleToolsScaleContainer",scaletitle:"GPEditorMapBoxStyleScaleTitle",containertoolsminscale:"GPEditorMapBoxStyleToolsScaleMinContainer",scalelabelmin:"GPEditorMapBoxStyleScaleLabelMin",scaleinputmin:"GPEditorMapBoxStyleScaleInputMin",containertoolsmaxscale:"GPEditorMapBoxStyleToolsScaleMaxContainer",scalelabelmax:"GPEditorMapBoxStyleScaleLabelMax",scaleinputmax:"GPEditorMapBoxStyleScaleInputMax",containertoolsedit:"GPEditorMapBoxStyleToolsEditionContainer"}}_initContainer(){var e=this,t=!1,ke=JSON.parse(JSON.stringify(this.options.obj)),Ge={};ke.paint&&(t=!0,Ge.paint=ke.paint,Object.keys(ke.paint).length===0&&logger$l.info("tag 'paint' is empty !")),ke.layout&&(t=!0,Ge.layout=ke.layout,ke.layout.visibility&&delete Ge.visibility,Object.keys(ke.layout).length===0&&logger$l.info("tag 'layout' is empty !"));var Be=document.createElement("div");Be.className=this.name.container;var je=null;if(t){var Ve=JSON.stringify(Ge,null,4);je=this._syntaxHighlight(Ve)}var Ze=document.createElement("div");Ze.className=this.name.containerjson;var Qe=document.createElement("label");Qe.className=this.name.jsonlabel,Qe.innerHTML=this.options.title,Ze.appendChild(Qe);var en=document.createElement("pre");en.className=this.name.jsondisplay,en.innerHTML=je,en.addEventListener?en.addEventListener("click",function(tn){e.options.tools.edition&&e.onEditJsonStyleMapBox(tn)}):en.attachEvent&&en.attachEvent("onclick",function(tn){e.options.tools.edition&&e.onEditJsonStyleMapBox(tn)}),Ze.appendChild(en),Be.appendChild(Ze),this.options.tools.scale&&Be.appendChild(this._createElementToolsScale({min:Ge.layout?Ge.layout.minzoom:0,max:Ge.layout?Ge.layout.maxzoom:21})),this.options.tools.edition&&Be.appendChild(this._createElementToolsEdition()),this.container=Be}_createElementToolsScale(e){logger$l.trace("_createElementToolsScale");var t=this,ke=this.options.obj,Ge=document.createElement("div");Ge.className=this.name.containertoolsscale;var Be=document.createElement("div");Be.className=this.name.containertoolsminscale;var je=document.createElement("label");je.className=this.name.scalelabelmin,je.innerHTML="min :",Be.appendChild(je);var Ve=document.createElement("input");Ve.className=this.name.scaleinputmin,Ve.type="range",Ve.value=e.min||0,Ve.title=e.min||0,Ve.disabled=!1,Ve.min=0,Ve.max=21,Ve.data=ke,Ve.addEventListener?Ve.addEventListener("change",function(tn){t.onChangeStyleScaleMinMapBox(tn)}):Ve.appendChild&&Ve.appendChild("onchange",function(tn){t.onChangeStyleScaleMinMapBox(tn)}),Be.appendChild(Ve),Ge.appendChild(Be);var Ze=document.createElement("div");Ze.className=this.name.containertoolsmaxscale;var Qe=document.createElement("label");Qe.className=this.name.scalelabelmax,Qe.innerHTML="max :",Ze.appendChild(Qe);var en=document.createElement("input");return en.className=this.name.scaleinputmin,en.type="range",en.value=e.max||21,en.title=e.max||21,en.disabled=!1,en.min=0,en.max=21,en.data=ke,en.addEventListener?en.addEventListener("change",function(tn){t.onChangeStyleScaleMaxMapBox(tn)}):en.appendChild&&en.appendChild("onchange",function(tn){t.onChangeStyleScaleMaxMapBox(tn)}),Ze.appendChild(en),Ge.appendChild(Ze),Ge}_createElementToolsEdition(){logger$l.warn("_createElementToolsEdition, it's not yet implemented !");var e=document.createElement("div");return e.className=this.name.containertoolsedit,e}_syntaxHighlight(e){return e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,function(t){var ke="gp-json-number";return/^"/.test(t)?/:$/.test(t)?ke="gp-json-key":ke="gp-json-string":/true|false/.test(t)?ke="gp-json-boolean":/null/.test(t)&&(ke="gp-json-null"),"<span class='"+ke+"'>"+t+"</span>"})}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$l.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonStyleMapBox(e){logger$l.trace("onEditJsonStyleMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.oneditjson,e)}onChangeStyleScaleMinMapBox(e){logger$l.trace("onChangeStyleScaleMinMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemin,e)}onChangeStyleScaleMaxMapBox(e){logger$l.trace("onChangeStyleScaleMaxMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.style.scale.onchangemax,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Style=Style);var logger$k=LoggerByDefault.getLogger("editor-themes");class Themes{constructor(e){if(logger$k.trace("[constructor] Themes",e),this.options=e||{},!(this instanceof Themes))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={thumbnails:!0,button:{visible:!0,type:"radio"}};(!this.options.tools||Object.keys(this.options.tools).length===0)&&(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),(typeof this.options.obj>"u"||this.options.obj===null||!this.options.obj)&&(this.options.obj={themesSummary:"",themes:[]}),this.container=null,this.name={target:"GPEditorMapBoxThemeTarget",container:"GPEditorMapBoxThemesContainer",containertheme:"GPEditorMapBoxThemeContainer",containerthemeID:"GPEditorMapBoxThemeContainer_ID_",input:"GPEditorMapBoxThemeInput",inputID:"GPEditorMapBoxThemeInput_ID_",label:"GPEditorMapBoxThemeTitle",labelID:"GPEditorMapBoxThemeTitle_ID_",image:"GPEditorMapBoxThemeImage",imageID:"GPEditorMapBoxThemeImage_ID_",message:"GPEditorMapBoxThemeMessage"}}_initContainer(){var e=this,t=this.options.obj,ke=this.id||SelectorID.generate(),Ge=document.createElement("div");Ge.className=this.name.container,Ge.title=t.themesSummary||"";var Be=t.themes;if(Be)for(var je=0;je<Be.length;je++){var Ve=Be[je],Ze=document.createElement("div");Ze.id=this.name.containerthemeID+je+"_"+ke,Ze.className=this.name.containertheme,Ze.tabIndex=je;var Qe=Ve.url,en=Ve.selected||!1;if(Qe){var tn=this.options.tools.button;if(tn.visible){var an=tn.type==="checkbox"?"checkbox":"radio",cn=document.createElement("input");cn.type=an,cn.id=this.name.inputID+je+"_"+ke,cn.className=this.name.input,cn.name=ke,cn.checked=en,cn.data=Qe,cn.addEventListener?cn.addEventListener("click",function(pn){e.onClickThemeTitleMapBox(pn)}):cn.attachEvent&&cn.attachEvent("onclick",function(pn){e.onClickThemeTitleMapBox(pn)}),Ze.appendChild(cn)}if(this.options.tools.thumbnails&&Ve.thumbnail){var un=document.createElement("img");un.id=this.name.imageID+je+"_"+ke,un.className=this.name.image,un.src=Ve.thumbnail,un.alt=Ve.thumbnail,un.title=Ve.description||"",un.data=Qe,un.addEventListener?un.addEventListener("click",function(pn){e.onClickThemeImageMapBox(pn);var gn=pn.target.parentElement.childNodes;if(gn){var yn=gn[0];yn.tagName.toLowerCase()==="input"&&(yn.checked=!yn.checked)}}):un.attachEvent&&un.attachEvent("onclick",function(pn){e.onClickThemeImageMapBox(pn);var gn=pn.target.parentElement.childNodes;if(gn){var yn=gn[0];yn.tagName.toLowerCase()==="input"&&(yn.checked=!yn.checked)}}),Ze.appendChild(un)}if(Ve.name){var dn=document.createElement("label");dn.id=this.name.labelID+je+"_"+ke,this.options.tools.button.visible&&(dn.htmlFor=cn.id),dn.className=this.name.label,dn.innerHTML=Ve.name,dn.title=Ve.description||"",dn.data=Qe,this.options.tools.button.visible||(dn.addEventListener?dn.addEventListener("click",function(pn){e.onClickThemeTitleMapBox(pn)}):dn.attachEvent&&dn.attachEvent("onclick",function(pn){e.onClickThemeTitleMapBox(pn)})),Ze.appendChild(dn)}}else{var fn=document.createElement("label");fn.className=this.name.message,fn.innerHTML="Thème non disponible...",Ze.appendChild(fn)}Ge.appendChild(Ze)}this.container=Ge}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$k.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onClickThemeImageMapBox(e){if(logger$k.trace("onClickThemeImageMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.previousSibling.id.substring(e.target.previousSibling.id.lastIndexOf("_")+1),ke=document.getElementsByClassName(this.name.input),Ge=0;Ge<ke.length;Ge++){var Be=ke[Ge];if(Be.id!==e.target.previousSibling.id){var je=Be.id.substring(Be.id.lastIndexOf("_")+1);je===t&&(Be.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclickimage,e)}onClickThemeTitleMapBox(e){if(logger$k.trace("onClickThemeTitleMapBox",e),e.editorID=this.id,e.data=this.options,this.options.tools.button.type==="checkbox")for(var t=e.target.id.substring(e.target.id.lastIndexOf("_")+1),ke=document.getElementsByClassName(this.name.input),Ge=0;Ge<ke.length;Ge++){var Be=ke[Ge];if(Be.id!==e.target.id){var je=Be.id.substring(Be.id.lastIndexOf("_")+1);je===t&&(Be.checked=!1)}}EventBus.dispatch(EventEditor.themes.onclicktitle,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Themes=Themes);var logger$j=LoggerByDefault.getLogger("editor-filter");class Filter{constructor(e){if(logger$j.trace("[constructor] Filter",e),this.options=e||{target:null,position:0,tools:null,title:null,obj:null},!(this instanceof Filter))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={edition:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={filter:[]}),this.options.title||(this.options.title="JSON Filtres :"),this.container=null,this.name={target:"GPEditorMapBoxFilterTarget",container:"GPEditorMapBoxFilterContainer",containerjson:"GPEditorMapBoxFilterJsonContainer",jsonlabel:"GPEditorMapBoxFilterTitleJson",jsondisplay:"GPEditorMapBoxFilterDisplayJson",containertoolsedit:"GPEditorMapBoxFilterToolsEditionContainer"}}_initContainer(){var e=this,t=!1,ke=JSON.parse(JSON.stringify(this.options.obj));ke.filter&&(t=!0,ke.filter.length===0&&logger$j.info("tag 'filter' is empty !"));var Ge=document.createElement("div");Ge.className=this.name.container;var Be=null;t&&(Be=JSON.stringify(ke.filter,null,4));var je=document.createElement("div");je.className=this.name.containerjson;var Ve=document.createElement("label");Ve.className=this.name.jsonlabel,Ve.innerHTML=this.options.title,je.appendChild(Ve);var Ze=document.createElement("pre");if(Ze.className=this.name.jsondisplay,Ze.innerHTML=Be,Ze.addEventListener?Ze.addEventListener("click",function(en){e.options.tools.edition&&e.onEditJsonFilterMapBox(en)}):Ze.attachEvent&&Ze.attachEvent("onclick",function(en){e.options.tools.edition&&e.onEditJsonFilterMapBox(en)}),je.appendChild(Ze),Ge.appendChild(je),this.options.tools.edition){var Qe=document.createElement("div");Qe.className=this.name.containertoolsedit,Ge.appendChild(Qe)}this.container=Ge}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$j.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onEditJsonFilterMapBox(e){logger$j.trace("onEditJsonFilterMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.filter.oneditjson,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Filter=Filter);var logger$i=LoggerByDefault.getLogger("editor-legend");class Legend{constructor(e){if(logger$i.trace("[constructor] Legend",e),this.options=e||{target:null,position:0,sprites:null,obj:null},!(this instanceof Legend))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0),this.options.obj||(this.options.obj={title:"vide...",editable:!0,paint:{"fill-color":"#FFFFFF"}});var e=this.options.obj.editable;this.editable=typeof e<"u"?e:!1,this.legendRender={type:"fill",values:{width:1,stroke:"#FFFFFF",color:"#000000",opacity:1}},this.container=null,this.rendercontainer=null,this.toolscontainer=null,this.name={target:"GPEditorMapBoxLegendTarget",container:"GPEditorMapBoxLegendContainer",containerlegendrender:"GPEditorMapBoxLegendRenderContainer",legendrender:"GPEditorMapBoxLegendRender",legendeditable:"GPEditorMapBoxLegendEditable",legendtitle:"GPEditorMapBoxLegendTitle",containerlegendtools:"GPEditorMapBoxLegendToolsContainer"},this.labels={"line-color":"Couleur du trait","line-width":"Epaisseur du trait","line-opacity":"Opacité du trait","fill-color":"Couleur de remplissage","fill-opacity":"Opacité du remplissage"}}_initContainer(){var e=this.options.obj,t=document.createElement("div");t.className=this.name.container;var ke=Object.assign({},e.paint,e.layout),Ge=Object.keys(ke);if(Ge.length===0){logger$i.info("tag 'paint' or 'layout' is empty !");return}for(var Be={},je=!1,Ve=0;Ve<Ge.length;Ve++){var Ze=Ge[Ve];if(/fill-/.test(Ze)||/line-/.test(Ze)||/circle-/.test(Ze)||/background-/.test(Ze)||/text-/.test(Ze)||/icon-/.test(Ze)){je=!0;var Qe=e.title||"",en=Ze.split("-")[0];(en==="text"||en==="icon")&&(en="symbol"),this.legendRender=this._getProperties(en,ke),Be={edit:this.editable,title:Qe,type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(Be));break}}je||(Be={edit:this.editable,title:"",type:this.legendRender.type,values:this.legendRender.values},t.appendChild(this._createElementIconLegend(Be)),logger$i.warn("legend type unknown, default legend used...")),this.toolscontainer=this._createElementEditionLegend(Be),t.appendChild(this.toolscontainer),this.container=t}_getProperties(e,t){if(e==="symbol"){var ke=t["text-field"],Ge=t["icon-image"];if(e=ke&&Ge?"icon":ke?"text":Ge?"icon":"unknow",e==="unknow"){logger$i.warn("type unknow !?");return}}var Be={};for(const Qe in t)if(Object.hasOwnProperty.call(t,Qe)){const en=t[Qe];if(Legend.PROPERTIES[e].includes(Qe)){var je=Qe.replace(e,"").slice(1),Ve=this._getValue(en);if(Ve){if((je==="pattern"||je==="image")&&(!this.options.sprites||!this.options.sprites.json||!this.options.sprites.json[Ve])){var Ze=e+":"+je;logger$i.warn("sprites mandatory for key ",Ze);break}Be[je]=Ve}}else logger$i.warn("property not supported : ",Qe)}return{type:e,values:Be}}_renderThumbnail(e,t){var ke=this.rendercontainer;if(!ke)return!1;var Ge=null,Be=3;switch(t.color||(t.color="#FFFFFF"),e){case"text":var je="font-size: 5em;font-weight: bold;";Ge=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><text x='50' y='50' fill='%color%' fill-opacity='%opacity%'  text-anchor='middle' dominant-baseline='central' style='%style%'> T </text></svg>")`,ke.style.background=Ge.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%style%",je);break;case"icon":if(t.image)Ge="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.image].x).replace("%y%",this.options.sprites.json[t.image].y).replace(/%w%/g,this.options.sprites.json[t.image].width).replace(/%h%/g,this.options.sprites.json[t.image].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),ke.innerHTML=Ge;else{var Ve="fill: transparent;stroke-width: 10;";Ge=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><path d='M 50,20 80,82.5 20,82.5 z' stroke='%color%' style='%style%'/></svg>")`,ke.style.background=Ge.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%style%",Ve)}break;case"line":var Ze=Array.isArray(t.dasharray)?t.dasharray.join(" "):0;Ge=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><line x1='0' y1='100' x2='100' y2='0' stroke='%color%' stroke-width='%stroke-width%' stroke-opacity='%stroke-opacity%' stroke-dasharray='%stroke-dasharray%' /></svg>")`,ke.style.background=Ge.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%stroke-opacity%",t.opacity||1).replace("%stroke-dasharray%",Ze).replace("%stroke-width%",(t.width||0)*Be);break;case"circle":var Qe=t["stroke-color"]||"#FFFFFF";Ge=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><circle cx='50' cy='50' r='40' stroke='%stroke-color%' stroke-width='%stroke-width%' stroke-opacity='%strock-opacity%' fill='%color%' fill-opacity='%opacity%' /></svg>")`,ke.style.background=Ge.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",Qe.indexOf("rgb")===0?Qe:ColorUtils.hexToRgba(Qe,1)).replace("%stroke-opacity%",t["stroke-opacity"]||1).replace("%stroke-width%",(t["stroke-width"]||0)*Be);break;case"background":case"fill":if(t.pattern)Ge="<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' width='27px' height='27px' x='0' y='0' viewBox='%x% %y% %w% %h%'><image width='%W%px' height='%H%px' href='%URL%'/></svg>".replace("%x%",this.options.sprites.json[t.pattern].x).replace("%y%",this.options.sprites.json[t.pattern].y).replace(/%w%/g,this.options.sprites.json[t.pattern].width).replace(/%h%/g,this.options.sprites.json[t.pattern].height).replace("%W%",this.options.sprites.size.w).replace("%H%",this.options.sprites.size.h).replace("%URL%",this.options.sprites.url),ke.innerHTML=Ge;else{var en=t["outline-color"]||"#FFFFFF";Ge=`url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' preserveAspectRatio='none' viewBox='0 0 100 100'><rect x='0' y='0' width='100' height='100' rx='5' ry='5' stroke='%stroke-color%' stroke-width='3' fill='%color%' fill-opacity='%opacity%' /></svg>")`,ke.style.background=Ge.replace("%color%",t.color.indexOf("rgb")===0?t.color:ColorUtils.hexToRgba(t.color,1)).replace("%opacity%",t.opacity||1).replace("%stroke-color%",en.indexOf("rgb")===0?en:ColorUtils.hexToRgba(en,1))}break;default:return logger$i.warn("type not found, no thumbnail..."),!1}return!0}_getValue(e){var t=null;if(typeof e=="string")t=e;else if(typeof e=="number")t=e;else if(Array.isArray(e)){var ke=!0;e.forEach(Be=>{typeof Be!="number"&&(ke=!1)}),ke&&(t=e)}else if(typeof e=="object"){if(t=null,"stops"in e){e.stops.sort((Be,je)=>{var Ve=Be[0],Ze=je[0];return Ve>Ze?-1:Ve<Ze?1:0});var Ge=e.stops.slice(-1);t=Ge[0][1]}}else logger$i.warn("value not supported !");return t}_createElementIconLegend(e){var t=this,ke=document.createElement("div");ke.className=this.name.containerlegendrender;var Ge=this.rendercontainer=document.createElement("div");Ge.className=this.name.legendrender,e.edit&&(Ge.className+=" ",Ge.className+=this.name.legendeditable,Ge.addEventListener?Ge.addEventListener("click",function(Ve){t.onEditionLegendMapBox(Ve)}):Ge.attachEvent&&Ge.attachEvent("onclick",function(Ve){t.onEditionLegendMapBox(Ve)}));var Be=e.type;this._renderThumbnail(Be,e.values)?Ge.className+=e.edit?" legend-"+Be:" legend-"+Be+"-not-editable":Ge.className+=" legend-unknow",ke.appendChild(Ge);var je=document.createElement("span");return je.className=this.name.legendtitle,je.innerHTML=e.title||"",ke.appendChild(je),ke}_createElementEditionLegend(e){var t=this,ke=document.createElement("div");if(ke.className=this.name.containerlegendtools,!e.edit)return ke;switch(e.type){case"line":Ge.call(t),Be.call(t),je.call(t);break;case"background":case"fill":Ve.call(t),Ze.call(t);break}function Ge(){var Qe=document.createElement("div");Qe.className="legend-styling-div";var en=document.createElement("label");en.className="legend-line",en.htmlFor=this.id?"line-color-"+this.id:"line-color",en.innerHTML=this.labels["line-color"];var tn=document.createElement("input");tn.className="legend-styling",tn.id=this.id?"line-color-"+this.id:"line-color",tn.title="Selectionner une couleur de trait",tn.type="color",tn.value=e.values.color,tn.setAttribute("data-id","line-color"),tn.addEventListener?tn.addEventListener("change",function(an){t._renderThumbnail(e.type,Object.assign(e.values,{color:an.target.value})),t.onChangeValueLegendMapBox(an)}):tn.attachEvent&&tn.attachEvent("onchange",function(an){t._renderThumbnail(e.type,Object.assign(e.values,{color:an.target.value})),t.onChangeValueLegendMapBox(an)}),Qe.appendChild(en),Qe.appendChild(tn),ke.appendChild(Qe)}function Be(){var Qe=document.createElement("div");Qe.className="legend-styling-div";var en=document.createElement("label");en.className="legend-line",en.htmlFor=this.id?"line-width-"+this.id:"line-width",en.innerHTML=this.labels["line-width"];var tn=document.createElement("input");tn.className="legend-styling",tn.id=this.id?"line-width-"+this.id:"line-width",tn.title=e.values.width,tn.type="range",tn.min="0",tn.max="10",tn.step="1",tn.defaultValue=e.values.width,tn.setAttribute("data-id","line-width"),tn.addEventListener?tn.addEventListener("change",function(an){logger$i.trace(an),an.target.title=an.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:an.target.value})),t.onChangeValueLegendMapBox(an)}):tn.attachEvent&&tn.attachEvent("onchange",function(an){logger$i.trace(an),an.target.title=an.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{width:an.target.value})),t.onChangeValueLegendMapBox(an)}),Qe.appendChild(en),Qe.appendChild(tn),ke.appendChild(Qe)}function je(){var Qe=document.createElement("div");Qe.className="legend-styling-div";var en=document.createElement("label");en.className="legend-line",en.htmlFor=this.id?"line-opacity-"+this.id:"line-opacity",en.innerHTML=this.labels["line-opacity"];var tn=document.createElement("input");tn.className="legend-styling",tn.id=this.id?"line-opacity-"+this.id:"line-opacity",tn.title=e.values.opacity,tn.type="range",tn.min="0",tn.max="1",tn.step="0.1",tn.defaultValue=e.values.opacity,tn.setAttribute("data-id","line-opacity"),tn.addEventListener?tn.addEventListener("change",function(an){logger$i.trace(an),an.target.title=an.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:an.target.value})),t.onChangeValueLegendMapBox(an)}):tn.attachEvent&&tn.attachEvent("onchange",function(an){logger$i.trace(an),an.target.title=an.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:an.target.value})),t.onChangeValueLegendMapBox(an)}),Qe.appendChild(en),Qe.appendChild(tn),ke.appendChild(Qe)}function Ve(){var Qe=document.createElement("div");Qe.className="legend-styling-div";var en=document.createElement("label");en.className="legend-fill",en.htmlFor=this.id?"fill-color-"+this.id:"fill-color",en.innerHTML=this.labels["fill-color"];var tn=document.createElement("input");tn.className="legend-styling",tn.id=this.id?"fill-color-"+this.id:"fill-color",tn.title="Selectionner une couleur de remplissage",tn.type="color",tn.value=e.values.color,tn.setAttribute("data-id","fill-color"),tn.addEventListener?tn.addEventListener("change",function(an){t._renderThumbnail(e.type,Object.assign(e.values,{color:an.target.value})),t.onChangeValueLegendMapBox(an)}):tn.attachEvent&&tn.attachEvent("onchange",function(an){t._renderThumbnail(e.type,Object.assign(e.values,{color:an.target.value})),t.onChangeValueLegendMapBox(an)}),Qe.appendChild(en),Qe.appendChild(tn),ke.appendChild(Qe)}function Ze(){var Qe=document.createElement("div");Qe.className="legend-styling-div";var en=document.createElement("label");en.className="legend-fill",en.htmlFor=this.id?"fill-opacity-"+this.id:"fill-opacity",en.innerHTML=this.labels["fill-opacity"];var tn=document.createElement("input");tn.className="legend-styling",tn.id=this.id?"fill-opacity-"+this.id:"fill-opacity",tn.title=e.values.opacity,tn.type="range",tn.min="0",tn.max="1",tn.step="0.1",tn.defaultValue=e.values.opacity,tn.setAttribute("data-id","fill-opacity"),tn.addEventListener?tn.addEventListener("change",function(an){an.target.title=an.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:an.target.value})),t.onChangeValueLegendMapBox(an)}):tn.attachEvent&&tn.attachEvent("onchange",function(an){an.target.title=an.target.value,t._renderThumbnail(e.type,Object.assign(e.values,{opacity:an.target.value})),t.onChangeValueLegendMapBox(an)}),Qe.appendChild(en),Qe.appendChild(tn),ke.appendChild(Qe)}return ke}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$i.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}isEditable(){return this.editable}getRenderContainer(){return this.rendercontainer}getToolsContainer(){return this.toolscontainer}getContainer(){return this.container}onEditionLegendMapBox(e){logger$i.trace("onEditionLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onclickedition,e)}onChangeValueLegendMapBox(e){logger$i.trace("onChangeValueLegendMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.legend.onchangevalue,e)}}Legend.PROPERTIES={line:["line-color","line-dasharray","line-opacity","line-width"],fill:["fill-color","fill-opacity","fill-outline-color","fill-pattern"],background:["background-color","background-opacity","background-pattern"],circle:["circle-color","circle-opacity","circle-stroke-color","circle-stroke-opacity","circle-stroke-width"],icon:["icon-color","icon-image","icon-opacity","__icon-size"],text:["__text-anchor","text-color","text-field","__text-font","__text-opacity","__text-size"]};window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Legend=Legend);var logger$h=LoggerByDefault.getLogger("editor-layer");class Layer{constructor(e){if(logger$h.trace("[constructor] Layer",e),this.options=e||{},!(this instanceof Layer))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.position||(this.options.position=0);var e={visibility:!0,icon:{image:!0,anchor:"end"},type:!0,pin:!0,remove:!1,clone:!1};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1);var t={id:"",type:"",source:"","source-layer":""};this.options.obj||(this.options.obj=t),Helper.mergeParams(this.options.obj,t,!1),this.bSlotLegend=!1,this.oFilter=null,this.oStyle=null,this.oLegend=null,this.container=null,this.DomVisibility=null,this.DomToggle=null,this.name={target:"GPEditorMapBoxLayerTarget",container:"GPEditorMapBoxLayerContainer",containerlegend:"GPEditorMapBoxLayerLegendContainer",containertitle:"GPEditorMapBoxLayerTitleContainer",imagelabelinput:"GPEditorMapBoxLayerImageInput",imagelabel:"GPEditorMapBoxLayerImageLabel",typeimg:"GPEditorMapBoxLayerTypeImage",titleinput:"GPEditorMapBoxLayerTitleInput",titlelabel:"GPEditorMapBoxLayerTitleLabel",containertools:"GPEditorMapBoxToolsContainer",visibilityinput:"GPEditorMapBoxToolsVisibilityInput",visibilitylabel:"GPEditorMapBoxToolsVisibilityLabel",visibilityinputdisable:"GPEditorMapBoxToolsVisibilityInputDisable",visibilitylabeldisable:"GPEditorMapBoxToolsVisibilityLabelDisable"}}_initContainer(){var e=this,t=this.options.obj,ke=document.createElement("div");ke.className=this.name.container;var Ge=document.createElement("div");if(Ge.id=this.name.containertitle+"-"+this.options.position,Ge.className=this.name.containertitle,this.options.tools.pin){var Be=document.createElement("input");Be.id=this.name.imagelabelinput+"-"+this.options.position,Be.className=this.name.imagelabelinput,Be.type="checkbox",Ge.appendChild(Be);var je=document.createElement("label");je.className=this.name.imagelabel,je.htmlFor=Be.id,je.addEventListener?je.addEventListener("click",function(an){e.onClickLayerMapBox(an)}):je.attachEvent&&je.attachEvent("onclick",function(an){e.onClickLayerMapBox(an)}),Ge.appendChild(je)}var Ve=function(){var an=document.createElement("div");if(an.id=this.name.containertools+"-"+this.options.position,an.className=this.name.containertools,this.options.tools.visibility){var cn=document.createElement("input");cn.id=this.name.visibilityinput+"-"+this.options.position,cn.className=this.options.tools.icon.image?this.name.visibilityinput:this.name.visibilityinputdisable,cn.type="checkbox",cn.checked="checked",cn.addEventListener?cn.addEventListener("click",function(dn){e.onVisibilityLayerMapBox(dn)}):cn.attachEvent&&cn.attachEvent("onclick",function(dn){e.onVisibilityLayerMapBox(dn)}),an.appendChild(cn),this.DomVisibility=cn;var un=document.createElement("label");un.htmlFor=this.name.visibilityinput+"-"+this.options.position,un.id=this.name.visibilitylabel+"-"+this.options.position,un.className=this.options.tools.icon.image?this.name.visibilitylabel:this.name.visibilitylabeldisable,un.title="Afficher/masquer la couche",an.appendChild(un),ke.appendChild(an)}this.options.tools.clone&&logger$h.warn("Dom for tools clone, it's not yet implemented !"),this.options.tools.remove&&logger$h.warn("Dom for tools remove, it's not yet implemented !")};if(this.options.tools.icon.anchor==="start"&&Ve.apply(this),this.options.tools.type&&t.type){var Ze=document.createElement("img");switch(Ze.className=this.name.typeimg,t.type.toUpperCase()){case"SYMBOL-ICON":Ze.style["background-position"]="0px 0";break;case"SYMBOL-TEXT":Ze.style["background-position"]="-194px 0";break;case"SYMBOL":Ze.style["background-position"]="-84px 0";break;case"LINE":Ze.style["background-position"]="-28px 0";break;case"FILL":Ze.style["background-position"]="-56px 0";break;case"BACKGROUND":Ze.style["background-position"]="-140px 0";break;case"CIRCLE":Ze.style["background-position"]="-168px 0";break;default:Ze.style["background-position"]="-112px 0"}Ge.appendChild(Ze)}var Qe=document.createElement("div");Qe.id=this.name.containerlegend+"-"+this.options.position,Qe.className=this.name.containerlegend,Ge.appendChild(Qe);var en=document.createElement("input");en.id=this.name.titleinput+"-"+this.options.position,en.className=this.name.titleinput,en.type="checkbox",Ge.appendChild(en);var tn=document.createElement("label");tn.className=this.name.titlelabel,tn.htmlFor=en.id,tn.innerHTML=t.id||t["source-layer"]||t.source,tn.title=t["source-layer"]||t.source||t.id,tn.addEventListener?tn.addEventListener("click",function(an){e.onClickLayerMapBox(an)}):tn.attachEvent&&tn.attachEvent("onclick",function(an){e.onClickLayerMapBox(an)}),Ge.appendChild(tn),this.DomToggle=tn,ke.appendChild(Ge),this.options.tools.icon.anchor==="end"&&Ve.apply(this),this.container=ke}add(){if(logger$h.trace("add()"),!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}addStyle(e){logger$h.trace("addStyle()",e),e&&typeof e=="object"&&e instanceof Style&&(this.oStyle=e,this.oStyle.display(!1))}addFilter(e){logger$h.trace("addFilter()",e),e&&typeof e=="object"&&e instanceof Filter&&(this.oFilter=e,this.oFilter.display(!1))}addLegend(e){logger$h.trace("addLegend()",e),e&&typeof e=="object"&&e instanceof Legend&&(this.oLegend=e,this.oLegend.display(!1))}slotLegend(){var e=this.oLegend;if(e){var t=null,ke=this.container.childNodes;if(ke.length)for(var Ge=this.options.tools.icon.anchor==="start"?1:0,Be=ke[Ge].childNodes,je=0;je<Be.length;je++){var Ve=Be[je];Ve.id.indexOf(this.name.containerlegend)!==-1&&(t=Ve)}if(t){var Ze=e.getRenderContainer();Ze&&(t.appendChild(Ze),this.bSlotLegend=!0)}}}visibility(e){if(logger$h.trace("visibility()",e),!!this.options.tools.visibility)return typeof e<"u"&&(this.DomVisibility.checked=e?"checked":""),this.DomVisibility.checked}collapse(){logger$h.trace("collapse()"),this.DomToggle.click()}visible(){logger$h.trace("visible()"),this.options.tools.visibility&&this.DomVisibility.click()}display(e){logger$h.trace("display()",e);var t=document.getElementById(this.DomToggle.htmlFor).checked;return typeof e<"u"&&(this.container.style.display=e?"inline-flex":"none",this.oStyle&&this.oStyle.display(e&&t),this.oFilter&&this.oFilter.display(e&&t),this.oLegend&&this.oLegend.display(e&&t)),t}active(e){return logger$h.trace("active()",e),typeof e<"u"&&(this.container.className=e?this.name.container:this.name.container+" disabled"),this.container.className===this.name.container}getContainer(){return this.container}onClickLayerMapBox(e){logger$h.trace("onClickLayerMapBox",e);var t=e.target.htmlFor.substring(e.target.htmlFor.indexOf("-")),ke=document.getElementById(e.target.htmlFor).checked;e.target.htmlFor===this.name.imagelabelinput+t&&(document.getElementById(this.name.titleinput+t).checked=!ke),e.target.htmlFor===this.name.titleinput+t&&document.getElementById(this.name.imagelabelinput+t)&&(document.getElementById(this.name.imagelabelinput+t).checked=!ke),this.oStyle&&this.oStyle.display(!ke),this.oFilter&&this.oFilter.display(!ke),this.oLegend&&this.oLegend.isEditable()&&this.oLegend.display(!ke)}onVisibilityLayerMapBox(e){logger$h.trace("onVisibilityLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickvisibility,e)}onCloneLayerMapBox(e){logger$h.trace("onCloneLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickclone,e)}onRemoveLayerMapBox(e){logger$h.trace("onRemoveLayerMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.layer.onclickremove,e)}}window.ol&&window.ol.style&&(window.ol.style.editor||(window.ol.style.editor={}),window.ol.style.editor.Layer=Layer);var logger$g=LoggerByDefault.getLogger("editor-group");class Group{constructor(e){if(logger$g.trace("[constructor] Group",e),this.options=e||{},!(this instanceof Group))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target,this.options.title||(this.options.title="Détails du groupe..."),typeof this.options.collapse>"u"&&(this.options.collapse=!0),this.container=null,this.name={target:"GPEditorMapBoxGroupTarget",container:"GPEditorMapBoxGroupContainer",details:"GPEditorMapBoxGroupDetails",summary:"GPEditorMapBoxGroupSummary"}}_initContainer(){var e=document.createElement("div");e.className=this.name.container;var t=document.createElement("details");t.className=this.name.details,t.open=!this.options.collapse,e.appendChild(t);var ke=document.createElement("summary");ke.className=this.name.summary,ke.innerHTML=this.options.title,t.appendChild(ke),this.container=e}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container)}display(e){this.container.style.display=e?"flex":"none"}getContainer(){var e=this.container.childNodes;return e.length?e[0]:this.container}onCollapseGroupMapBox(e){logger$g.trace("onCollapseGroupMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.group.oncollapse,e)}}var logger$f=LoggerByDefault.getLogger("editor-search");class Search{constructor(e){if(logger$f.trace("[constructor] Search",e),this.options=e||{target:null,tools:null,title:null,obj:null},!(this instanceof Search))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize(),this._initContainer()}_initialize(){this.id=this.options.id||null,this.options.target;var e={};this.options.tools||(this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.options.obj||(this.options.obj={}),this.options.title||(this.options.title="Recherche de couches :"),this.container=null,this.name={target:"GPEditorMapBoxSearchTarget",container:"GPEditorMapBoxSearchContainer"}}_initContainer(){var e=JSON.parse(JSON.stringify(this.options.obj));e.layers&&e.layers.length===0&&logger$f.info("tag 'layers' is empty !");var t=document.createElement("div");t.className=this.name.container,this.container=t}add(){if(!this.options.target){if(!document.getElementById(this.name.target)){var e=document.createElement("div");e.id=this.name.target;var t=document.documentElement||document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0];t.appendChild(e)}this.options.target=document.getElementById(this.name.target)}return this.container&&this.options.target.appendChild(this.container),this}display(e){return logger$f.trace("display()",e),typeof e<"u"&&(this.container.style.display=e?"flex":"none"),this.container.style.display==="flex"}getContainer(){return this.container}onSubmitSearchLayersMapBox(e){logger$f.trace("onSubmitSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onsubmit,e)}onAutocompleteSearchLayersMapBox(e){logger$f.trace("onAutocompleteSearchLayersMapBox",e),e.editorID=this.id,e.data=this.options,EventBus.dispatch(EventEditor.search.onautocomplete,e)}}var EditorDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e}},logger$e=LoggerByDefault.getLogger("editor");class Editor{constructor(e){if(logger$e.trace("[constructor] Editor",e),this.options=e||{},!(this instanceof Editor))throw new TypeError("ERROR CLASS_CONSTRUCTOR");this._initialize()}_initialize(){if(this.options.target||logger$e.info("La 'target' n'est pas renseignée (options.target)."),!this.options.style){logger$e.error("Le 'style' MapBox n'est pas renseigné (options.style) !");return}this.options.events?this._initEvents():logger$e.warn("Les 'handlers' ne sont pas renseignés (options.events) !"),this.options.themes||logger$e.info("Les 'themes' MapBox ne sont pas renseignés (options.themes).");var e={themes:!1,layers:!0,search:!1,style:!1,filter:!1,legend:!1,group:!1,groupAuto:!1,sort:!0,sortBy:"id",sortOrder:"asc",title:!0,collapse:void 0,type:!0,pin:!0,visibility:!0,icon:{image:!0,anchor:"end"},editable:!0};this.options.tools||(logger$e.trace("Utilisation des outils MapBox par défaut (options.tools)."),this.options.tools=e),Helper.mergeParams(this.options.tools,e,!1),this.id=this.options.id||SelectorID.generate(),this.context={},this.layers=[],this.container=null,this.name={target:"GPEditorMapBoxTarget",container:"GPEditorMapBoxContainer",containerID:"GPEditorMapBoxContainer_ID_",containerLayers:"GPEditorMapBoxLayersContainer",titleLayers:"GPEditorMapBoxLayersTitle",titleLayersID:"GPEditorMapBoxLayersTitle_ID_",titleThemes:"GPEditorMapBoxThemesTitle",titleThemesID:"GPEditorMapBoxThemesTitle_ID_",sep:"GPEditorMapBoxSep"},this.mapbox={},this.sprites={}}_initEvents(){var e=this.options.scope||this,t=this.options.events;if(t){for(var ke in t)if(t.hasOwnProperty(ke)){var Ge=t[ke];Ge&&(EventBus.hasEventListener(ke,Ge,e)||EventBus.addEventListener(ke,Ge,e))}}}_initContainer(){logger$e.trace(this.mapbox);var e=document.createElement("div");e.id=this.name.containerID+this.id,e.className=this.name.container;var t=this.options.tools.themes;if(t&&this.options.themes){if(this.options.tools.title){var ke=document.createElement("div");ke.id=this.name.titleThemesID+this.id,ke.className=this.name.titleThemes,ke.innerHTML="Liste des 'thèmes'",e.appendChild(ke)}var Ge=new Themes({id:this.id,target:e,tools:typeof t=="object"?t:{},obj:this.options.themes});Ge.add()}if(this.options.tools.search){var Be=new Search({id:this.id,target:e,tools:{},obj:this.mapbox.layers});Be.add()}for(var je in this.mapbox.sources)if(this.mapbox.sources.hasOwnProperty(je)){if(this.options.tools.layers){var Ve=Object.keys(this.mapbox.sources).length>1?1:0;if(Ve){var Ze=document.createElement("hr");Ze.className=this.name.sep,e.appendChild(Ze)}if(this.options.tools.title){var Qe=document.createElement("div");Qe.id=this.name.titleLayersID+this.id,Qe.className=this.name.titleLayers,Qe.innerHTML=Ve?"Liste des 'couches' ("+je+")":"Liste des 'couches'",e.appendChild(Qe)}}var en=this.mapbox.layers.slice();if(en.forEach(function($n,Qn){var Hn=$n.metadata;Hn?Hn["geoportail:order"]=Qn:$n.metadata={"geoportail:order":Qn}}),this.options.tools.sort){var tn=this.options.tools.sortBy,an=this.options.tools.sortOrder,cn=function($n,Qn){var Hn=0;if($n.metadata&&$n.metadata["geoportail:group"]&&Qn.metadata&&Qn.metadata["geoportail:group"]){var Ni=null,On=null;Ni=$n.metadata["geoportail:group"],On=Qn.metadata["geoportail:group"],Hn=Ni.localeCompare(On)}else switch(tn){case"geom":Hn=an==="asc"?$n.type.localeCompare(Qn.type)||$n.id.localeCompare(Qn.id):Qn.type.localeCompare($n.type)||Qn.id.localeCompare($n.id);break;case"class":Hn=an==="asc"?$n["source-layer"].localeCompare(Qn["source-layer"])||$n.id.localeCompare(Qn.id):Qn["source-layer"].localeCompare($n["source-layer"])||Qn.id.localeCompare($n.id);break;case"id":default:Hn=an==="asc"?$n.id.localeCompare(Qn.id):Qn.id.localeCompare($n.id);break}return Hn};en.sort(cn)}logger$e.trace("Layers : ",en);var un=this.options.tools.sortBy,dn=this.options.tools.groupAuto,fn={};en.forEach(function($n){var Qn=$n.metadata;if(Qn&&Qn["geoportail:group"]){var Hn=Qn["geoportail:group"];fn[Hn]=fn[Hn]?fn[Hn]+1:1}else{var Ni=null;switch(un){case"class":Ni=$n["source-layer"];break;case"geom":Ni=$n.type;break;case"id":default:Ni=$n.id;break}var On=Ni;if(dn){var qn=/_|-|:|=/,Un=Ni.search(qn);On=Un!==-1?Ni.substring(0,Un).trim():Ni}fn[On]=fn[On]?fn[On]+1:1,Qn?Qn["geoportail:group"]=On:$n.metadata={"geoportail:group":On}}}),logger$e.trace("Groups : ",fn);var pn=document.createElement("div");pn.className=this.name.containerLayers,e.appendChild(pn);var gn;if(this.options.tools.collapse!==void 0){gn=document.createElement("details"),gn.className="",gn.open=!this.options.tools.collapse,pn.appendChild(gn);var yn=document.createElement("summary");yn.className="",yn.innerHTML="",gn.appendChild(yn)}for(var vn=this.options.tools.collapse!==void 0?gn:pn,An=-1,xn=0;xn<en.length;xn++){var wn=en[xn];if(An++,wn.source===je){if(this.options.tools.group&&this.options.tools.sort){var bn=wn.metadata;if(bn){var Mn=wn.metadata["geoportail:group"];if(Mn)if(fn[Mn]>1){fn[Mn]=-1;var Pn=new Group({id:this.id,target:this.options.tools.collapse!==void 0?gn:pn,title:Mn,collapse:!0});Pn.add(),vn=Pn.getContainer()}else fn[Mn]===1&&(vn=this.options.tools.collapse!==void 0?gn:pn);else vn=this.options.tools.collapse!==void 0?gn:pn}else vn=this.options.tools.collapse!==void 0?gn:pn}if(this.options.tools.layers){var En=new Layer({id:this.id,target:vn,position:An+"_"+this.id,tools:{visibility:this.options.tools.visibility,icon:this.options.tools.icon,type:this.options.tools.type,pin:this.options.tools.pin},obj:{id:wn.id,type:wn.type,source:wn.source,"source-layer":wn["source-layer"]}});En.add(),wn.layout&&wn.layout.visibility&&wn.layout.visibility==="none"&&En.visibility(!1),this.layers.push(En)}if(this.options.tools.legend){var Cn=this.options.tools.editable;typeof Cn>"u"&&(Cn=wn.editable);var Rn=new Legend({id:this.id,target:vn,sprites:this.sprites,obj:{id:wn.id,source:wn.source,title:wn.id,editable:typeof Cn<"u"?Cn:!1,paint:wn.paint,layout:wn.layout}});Rn.add(),Rn.display(!1),En&&(En.addLegend(Rn),En.slotLegend())}if(this.options.tools.style){var Tn=new Style({id:this.id,target:vn,position:An+"_"+this.id,obj:{id:wn.id,source:wn.source,layout:wn.layout,paint:wn.paint}});Tn.add(),Tn.display(!1),En&&En.addStyle(Tn),wn.layout&&wn.layout.visibility&&wn.layout.visibility==="none"&&En.visibility(!1)}if(this.options.tools.filter){var Nn=new Filter({id:this.id,target:vn,position:An+"_"+this.id,obj:{id:wn.id,source:wn.source,filter:wn.Filter}});Nn.add(),Nn.display(!1),En&&En.addFilter(Nn)}}else An>=0&&An--}}if(this.container=e,!this.options.target){if(!document.getElementById(this.name.target)){var Gn=document.createElement("div");Gn.id=this.name.target;var zn=document.getElementsByTagName("body")[0]||document.getElementsByTagName("head")[0]||document.documentElement;zn.appendChild(Gn)}this.options.target=document.getElementById(this.name.target)}this.container&&this.options.target.appendChild(this.container),EventBus.dispatch(EventEditor.onloaded,this)}_getSprites(e){var t=this;if(e&&e.startsWith("mapbox://"))return new Promise((Be,je)=>{logger$e.error("Protocole mapbox:// non géré !"),Be(t)});if(!e)return new Promise((Be,je)=>{logger$e.error("Auncun sprites disponibles !"),Be(t)});var ke=function(){var Be=e+".png";return fetch(Be,{credentials:"same-origin"}).then(function(je){if(je.ok)return je.blob().then(function(Ze){t.sprites.url=Be;var Qe=new Image;return Qe.src=Be,Qe.decode().then(function(){t.sprites.size={},t.sprites.size.h=Qe.height,t.sprites.size.w=Qe.width})}).catch(Ze=>{logger$e.warn("fetch image sprites exception :",Ze)});var Ve=new Error("HTTP status code: "+je.status);throw Ve}).catch(je=>new Promise((Ve,Ze)=>{logger$e.error("fetch image sprites exception :",je),Ze(je)}))},Ge=function(){var Be=e+".json";return fetch(Be,{credentials:"same-origin"}).then(function(je){if(je.ok)return je.json().then(function(Ze){t.sprites.json=Ze}).catch(Ze=>{logger$e.warn("fetch json sprites exception :",Ze)});var Ve=new Error("HTTP status code: "+je.status);throw Ve}).catch(je=>new Promise((Ve,Ze)=>{logger$e.error("fetch json sprites exception :",je),Ze(je)}))};return Promise.all([ke(),Ge()])}createElement(){var e=this;if(typeof this.options.style=="object")return this.mapbox=this.options.style,this.options.tools.legend?this._getSprites(this.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(t=>{logger$e.warn("fetch sprites exception :",t)}):new Promise((t,ke)=>{e._initContainer(),t(e)});if(typeof this.options.style=="string")return fetch(this.options.style,{credentials:"same-origin"}).then(t=>t.json().then(ke=>{e.mapbox=ke}).then(function(){return e.options.tools.legend?e._getSprites(e.mapbox.sprite).then(function(){return e._initContainer(),e}).catch(ke=>{logger$e.warn("fetch sprites exception :",ke)}):new Promise((ke,Ge)=>{e._initContainer(),ke(e)})}).catch(ke=>{logger$e.error("json exception :",ke)})).catch(t=>{logger$e.error("fetch exception :",t)})}display(e){this.container.style.display=e?"block":"none"}setContext(e,t){this.context[e]=t}getContext(e){return this.context[e]}getID(){return this.id}getContainer(){return this.container}getStyle(){return this.mapbox}getStyleLayer(e){for(var t=null,ke=this.getLayer(e),Ge=ke.options.obj.id,Be=0;Be<this.mapbox.layers.length;Be++){var je=this.mapbox.layers[Be];if(je.id===Ge){t=je;break}}return t}getLayerFromStyle(e){for(var t=null,ke=this.mapbox.layers[e],Ge=0;Ge<this.getLayers().length;Ge++){var Be=this.getLayer(Ge);if(ke.id===Be.options.obj.id){t=Be;break}}return t}getLayers(){return this.layers}getLayer(e){return this.layers[e]}}Helper.assign(Editor.prototype,EditorDOM);window.ol&&window.ol.style&&(window.ol.style.Editor=Editor);var LayerImportDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createLoadingElement:function(){var Oe=document.createElement("div");return Oe.id="GPmapLoading",Oe.className="",Oe},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimport"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowImportPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowImportPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowImportPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-import fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Ouvrir l'import de couches"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe._onShowImportClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe._onShowImportClick(ke)}),e},_createImportPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPimportPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createImportPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createImportPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader GPelementVisible gpf-visible gpf-panel__header fr-modal__header",Oe},_createImportPanelReturnPictoElement:function(){var Oe=this,e=document.createElement("button");if(e.id=this._addUID("GPimportPanelReturnPicto"),e.title="Masquer le panneau",e.className="GPreturnPicto GPimportPanelReturnPicto GPelementHidden gpf-hidden gpf-btn gpf-btn-icon-return fr-btn fr-btn--close fr-btn--tertiary-no-outline",checkDsfr()){var t=document.createElement("span");t.className="GPelementHidden",t.innerHTML="Retour",e.appendChild(t)}return e.addEventListener?e.addEventListener("click",function(ke){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),Oe._onReturnPictoClick(ke),document.getElementById(Oe._addUID("GPshowImportPicto")).click()}):e.attachEvent&&e.attachEvent("onclick",function(ke){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),Oe._onReturnPictoClick(ke),document.getElementById(Oe._addUID("GPshowImportPicto")).click()}),e},_createImportPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportHeaderTitle"),Oe.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",Oe.innerHTML="Import de données",Oe},_createImportPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPimportPanelClose"),e.className="GPpanelClose GPimportPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createImportPanelFormElement:function(){var Oe=this,e=document.createElement("form");return e.id=this._addUID("GPimportForm"),e.className="GPform GPelementVisible gpf-visible gpf-mobile-form gpf-panel__content fr-modal__content",e.addEventListener?e.addEventListener("submit",function(t){t.preventDefault(),Oe._onImportSubmit()}):e.attachEvent&&e.attachEvent("onsubmit",function(t){t.preventDefault(),Oe._onImportSubmit()}),e},_createImportTypeLineElement:function(Oe){var e=this,t=document.createElement("div");t.id=this._addUID("GPimportTypeLine"),t.className="GPimportInputLine";var ke=document.createElement("label");ke.id=this._addUID("GPimportTypeLabel"),ke.className="GPlabel gpf-label fr-label",ke.innerHTML="Type de donnée",ke.title="Type de donnée",t.appendChild(ke);var Ge=document.createElement("select");Ge.setAttribute("aria-labelledby",this._addUID("GPimportTypeLabel")),Ge.className="GPselect gpf-select fr-select",Ge.addEventListener?Ge.addEventListener("change",function(Ve){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange(Ve)}):Ge.attachEvent&&Ge.attachEvent("onchange",function(){this.value==="KML"||this.value==="GPX"||this.value==="GeoJSON"||this.value==="MAPBOX"?(document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementHidden gpf-hidden"):(this.value==="WMS"||this.value==="WMTS"||this.value==="WFS")&&(document.getElementById(e._addUID("GPimportServiceParams")).className="GPelementVisible gpf-visible fr-my-4w",document.getElementById(e._addUID("GPimportStaticParams")).className="GPelementHidden gpf-hidden"),e._onImportTypeChange()}),Ge.id=this._addUID("GPimportTypeSelect"),(!Oe||!Array.isArray(Oe))&&(Oe=["KML","GPX","GeoJSON","MAPBOX","WMS","WMTS","WFS"]);for(var Be,je=0;je<Oe.length;je++)Be=document.createElement("option"),Be.value=Oe[je],Be.text=Oe[je]==="MAPBOX"?"Tuiles vectorielles":Oe[je],Ge.appendChild(Be);return t.appendChild(Ge),t},_createImportWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPimportWaitingContainer"),Oe.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createImportStaticParamsContainer:function(Oe){var e=document.createElement("div");return e.id=this._addUID("GPimportStaticParams"),Oe==="KML"||Oe==="GPX"||Oe==="GeoJSON"||Oe==="MAPBOX"?e.className="GPelementVisible gpf-visible fr-my-4w":e.className="GPelementHidden gpf-hidden",e},_createStaticNameLabel:function(){var Oe=document.createElement("div");Oe.className="GPimportInputLine fr-mb-1w";var e=document.createElement("label");e.className="GPlabel gpf-label fr-label",e.htmlFor=this._addUID("GPimportName"),e.innerHTML="Nom",e.title="Nom",Oe.appendChild(e);var t=document.createElement("input");return t.type="text",t.id=this._addUID("GPimportName"),t.className="GPinput gpf-input fr-input",Oe.appendChild(t),Oe},_createStaticModeChoiceDiv:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportChoice"),Oe.className="fr-my-1w",Oe},_createStaticLocalChoiceDiv:function(){var Oe=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(Ge){document.getElementById(Oe._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(Oe._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",Oe._onStaticImportTypeChange(Ge)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(Oe._addUID("GPimportValueLocal")).className="GPimportInputLine fr-mb-1w",document.getElementById(Oe._addUID("GPimportValueUrl")).className="GPelementHidden gpf-hidden",Oe._onStaticImportTypeChange()}),t.name="GPimportChoiceMode",t.value="local",t.checked=!0,t.id=this._addUID("GPimportChoiceAltLocal"),e.appendChild(t);var ke=document.createElement("label");return ke.className="GPimportChoiceAltTxt gpf-label fr-label",ke.htmlFor=this._addUID("GPimportChoiceAltLocal"),ke.innerHTML="par fichier local",ke.title="par fichier local",e.appendChild(ke),e},_createStaticUrlChoiceDiv:function(){var Oe=this,e=document.createElement("div");e.className="GPimportChoiceAlt gpf-radio-group fr-radio-group";var t=document.createElement("input");t.type="radio",t.addEventListener?t.addEventListener("change",function(Ge){document.getElementById(Oe._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(Oe._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",Oe._onStaticImportTypeChange(Ge)}):t.appendChild&&t.appendChild("onchange",function(){document.getElementById(Oe._addUID("GPimportValueUrl")).className="GPimportInputLine",document.getElementById(Oe._addUID("GPimportValueLocal")).className="GPelementHidden gpf-hidden",Oe._onStaticImportTypeChange()}),t.id=this._addUID("GPimportChoiceAltUrl"),t.name="GPimportChoiceMode",t.value="url",t.checked=!1,e.appendChild(t);var ke=document.createElement("label");return ke.className="GPimportChoiceAltTxt gpf-label fr-label",ke.htmlFor=this._addUID("GPimportChoiceAltUrl"),ke.innerHTML="par URL",ke.title="par URL",e.appendChild(ke),e},_createStaticLocalInputDiv:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportValueLocal"),Oe.className="GPimportInputLine",Oe},_createStaticLocalInputLabel:function(){var Oe=document.createElement("label");return Oe.className="GPlabel gpf-label fr-label fr-mb-1w",Oe.htmlFor=this._addUID("GPimportFile"),Oe.innerHTML="Fichier local",Oe.title="Fichier local",Oe},_createStaticLocalInput:function(){var Oe=document.createElement("input");return Oe.type="file",Oe.id=this._addUID("GPimportFile"),Oe.className="GPimportInputFile gpf-upload fr-upload",Oe},_createStaticUrlInputDiv:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportValueUrl"),Oe.className="GPelementHidden gpf-hidden",Oe},_createStaticUrlInputLabel:function(){var Oe=document.createElement("label");return Oe.className="GPlabel gpf-label fr-label",Oe.htmlFor=this._addUID("GPimportUrl"),Oe.innerHTML="URL",Oe.title="URL",Oe},_createStaticUrlInput:function(){var Oe=document.createElement("input");return Oe.type="text",Oe.id=this._addUID("GPimportUrl"),Oe.className="GPinput gpf-input fr-input",Oe},_createServiceParamsContainer:function(Oe){var e=document.createElement("div");return e.id=this._addUID("GPimportServiceParams"),Oe==="WMS"||Oe==="WMTS"||Oe==="WFS"?e.className="GPelementVisible gpf-visible":e.className="GPelementHidden gpf-hidden",e},_createServiceUrlDiv:function(){var Oe=document.createElement("div");return Oe.className="GPimportInputLine",Oe},_createServiceUrlInputLabel:function(){var Oe=document.createElement("label");return Oe.className="GPlabel gpf-label fr-label",Oe.htmlFor=this._addUID("GPimportServiceUrl"),Oe.innerHTML="URL du service",Oe.title="URL du service",Oe},_createServiceUrlInput:function(){var Oe=document.createElement("input");return Oe.type="text",Oe.id=this._addUID("GPimportServiceUrl"),Oe.className="GPinput gpf-input fr-input",Oe},_createImportSubmitFormElement:function(){var Oe=document.createElement("input");return Oe.id=this._addUID("GPimportSubmit"),Oe.className="GPsubmit gpf-btn fr-btn",Oe.type="submit",Oe.value="Importer",Oe},_createImportGetCapPanelElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportGetCapPanel"),Oe.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",Oe},_createImportGetCapPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Couches accessibles",t.title="Couches accessibles",e.appendChild(t);var ke=document.createElement("button");ke.className="GPpanelClose GPimportGetCapPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.id=this._addUID("GPimportGetCapPanelClose"),ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),document.getElementById(Oe._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),Oe._onGetCapPanelClose()}):ke.attachEvent&&ke.attachEvent("click",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),document.getElementById(Oe._addUID("GPimportGetCapPanel")).classList.replace("GPelementVisible","GPelementHidden"),document.getElementById(Oe._addUID("GPimportGetCapPanel")).classList.replace("gpf-visible","gpf-hidden"),Oe._onGetCapPanelClose()});var Ge=document.createElement("span");return Ge.className="GPelementHidden gpf-visible",Ge.innerText="Fermer",ke.appendChild(Ge),e.appendChild(ke),e},_createImportGetCapResultsContainer:function(){var Oe=document.createElement("div");return Oe.className="GPimportGetCapRoot gpf-panel__list",Oe.id=this._addUID("GPimportGetCapResults"),Oe},_addImportGetCapResultListRubrique:function(Oe,e){var t=document.createElement("ul");return t.className="GPimportGetCapListRubrique",t.title=Oe,e.appendChild(t),e},_addImportGetCapResultRubrique:function(Oe,e){var t=document.createElement("li");t.className="GPimportGetCapRubrique gpf-panel__items_layerimport";var ke=document.createElement("input");ke.id="GPimportGetCapRubrique-"+SelectorID.generate(),ke.className="GPimportGetCapRubrique",ke.type="checkbox",t.appendChild(ke);var Ge=document.createElement("label");return Ge.className="GPimportGetCapRubriqueTitle gpf-label fr-btn fr-btn--secondary",Ge.htmlFor=ke.id,Ge.innerHTML=Oe,Ge.title=Oe,t.appendChild(Ge),e.appendChild(t),e},_addImportGetCapResultListLayer:function(Oe){var e=document.createElement("ul");return e.className="GPimportGetCapListLayer",Oe.appendChild(e),Oe},_addImportGetCapResultLayer:function(Oe,e,t){var ke=document.createElement("li");ke.className="GPimportGetCapProposal gpf-panel__items_layerimport gpf-panel__items",ke.innerHTML=Oe.content,ke.title=Oe.title,ke.id="GPimportGetCapProposal_"+e;var Ge=this;return ke.addEventListener?ke.addEventListener("click",function(Be){Ge._onGetCapResponseLayerClick(Be)}):ke.attachEvent&&ke.attachEvent("onclick",function(){Ge._onGetCapResponseLayerClick()}),t.appendChild(ke),t},_createImportMapBoxPanelElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPimportMapBoxPanel"),Oe.className="GPpanel GPelementHidden gpf-panel fr-modal gpf-hidden",Oe},_createImportMapBoxPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("button");t.id=this._addUID("GPimportMapBoxPanelReturnPicto"),t.title="Nouvel import",t.className="GPreturnPicto GPimportMapBoxPanelReturnPicto gpf-btn gpf-btn-icon-return fr-btn fr-btn--secondary gpf-btn--secondary",t.addEventListener?t.addEventListener("click",function(je){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),Oe._onMapBoxReturnPictoClick(je)}):t.attachEvent&&t.attachEvent("onclick",function(je){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),Oe._onMapBoxReturnPictoClick(je)}),e.appendChild(t);var ke=document.createElement("div");ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Edition des styles",ke.title="Edition des styles",e.appendChild(ke);var Ge=document.createElement("button");Ge.className="GPpanelClose GPimportMapBoxPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Ge.title="Fermer le panneau",Ge.id=this._addUID("GPimportMapBoxPanelClose"),Ge.addEventListener?Ge.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),document.getElementById(Oe._addUID("GPimportMapBoxPanel")).style.display="none",Oe._onMapBoxPanelClose()}):Ge.attachEvent&&Ge.attachEvent("click",function(){document.getElementById(Oe._addUID("GPshowImportPicto")).click(),document.getElementById(Oe._addUID("GPimportMapBoxPanel")).style.display="none",Oe._onMapBoxPanelClose()});var Be=document.createElement("span");return Be.className="GPelementHidden gpf-visible",Be.innerText="Fermer",Ge.appendChild(Be),e.appendChild(Ge),e},_createImportMapBoxResultsContainer:function(){var Oe=document.createElement("div");return Oe.className="GPimportMapBoxpRoot",Oe.id=this._addUID("GPimportMapBoxResults"),Oe}},MeasureToolBoxDOM={_toolboxId:"GPtoolbox-measure-main",_buttonId:"GPtoolbox-measure-button",_widgetId:"GPtoolbox-measure-widget",getToolBoxID:function(Oe){return Oe?this._toolboxId+"-"+Oe:this._toolboxId},getButtonID:function(Oe){return Oe?this._buttonId+"-"+Oe:this._buttonId},getWidgetID:function(Oe){return Oe?this._widgetId+"-"+Oe:this._widgetId},_createToolBoxContainerElement:function(Oe){var e=document.createElement("div");e.id=this.getToolBoxID(Oe),e.className="GPshowAdvancedToolPicto";var t=document.createElement("button");t.id=this.getButtonID(Oe),t.className="GPshowOpen GPshowAdvancedToolPicto GPshowToolBoxPicto gpf-btn gpf-btn-icon-toolbox fr-btn",t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!1),t.setAttribute("type","button");var ke=this;t.addEventListener("click",function(Be){var je=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!je),this.blur();var Ve=document.getElementById(ke.getWidgetID(Oe));Ve.style.display==="block"?Ve.style.display="none":Ve.style.display="block"}),e.appendChild(t);var Ge=document.createElement("div");return Ge.id=this.getWidgetID(Oe),Ge.addEventListener("click",function(){},!1),e.appendChild(Ge),e}},logger$d=LoggerByDefault.getLogger("toolbox"),MeasureToolBox={_toolbox:{},add:function(Oe,e){if(logger$d.trace("ToolBox.add()",e),!Oe){logger$d.trace("map doesn't exist !?");return}var t=typeof window<"u"?window:typeof self<"u"?self:null;t&&(this._toolbox=t.gpShareMeasureToolBox||{});var ke=Oe.getTargetElement(),Ge=ke.ownerDocument,Be=ke.id;!this._toolbox||Object.keys(this._toolbox).length===0?(this._toolbox={},this._toolbox[Be]=SelectorID.generate()):this._toolbox[Be]||(this._toolbox[Be]=SelectorID.generate());var je=this._toolbox[Be];if(!Ge.getElementById(this.getToolBoxID(je))){logger$d.trace("create toolbox !");var Ve=this._createToolBoxContainerElement(je);Ve.style.pointerEvents="auto";var Ze=ke.getElementsByClassName("ol-overlaycontainer-stopevent");Ze[0].appendChild(Ve)}var Qe=Ge.getElementById(this.getWidgetID(je));e.setTarget(Qe),t&&(t.gpShareMeasureToolBox=this._toolbox),logger$d.trace("add control to toolbox !")}};Helper.assign(MeasureToolBox,MeasureToolBoxDOM);var logger$c=LoggerByDefault.getLogger("measures"),Measures={DEFAULT_POINTER_STYLE:new CircleStyle({radius:5,stroke:new Stroke({color:"#002A50",width:2}),fill:new Fill({color:"rgba(255, 155, 0, 0.7)"})}),DEFAULT_DRAW_START_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.2)"}),stroke:new Stroke({color:"#002A50",lineDash:[10,10],width:2})}),DEFAULT_DRAW_FINISH_STYLE:new Style$1({fill:new Fill({color:"rgba(0, 183, 152, 0.3)"}),stroke:new Stroke({color:"#002A50",width:3})}),tools:{MeasureLength:[],MeasureArea:[],MeasureAzimuth:[]},measureDraw:null,measureSource:null,measureVector:null,eventLayerRemove:null,sketch:null,measureTooltipElement:null,measureTooltip:null,helpTooltipElement:null,helpTooltip:null,clean:function(){var Oe=this.CLASSNAME;logger$c.trace("["+Oe+"] deactived tool !"),this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents(),this._pictoContainer.setAttribute("aria-pressed",!1)},onPointerMoveHandler:function(Oe){if(!Oe.dragging){var e=Oe.coordinate;if(this.sketch){var t,ke=this.sketch.getGeometry();if(t=this.format(ke),ke.getType()==="LineString")e=ke.getLastCoordinate();else if(ke.getType()==="Polygon")e=ke.getInteriorPoint().getCoordinates();else return;this.measureTooltipElement.innerHTML=t,this.measureTooltip.setPosition(e)}}},onShowMeasureClick:function(Oe,e){Oe.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap(),ke=t.getTargetElement().id,Ge=typeof window<"u"?window:typeof self<"u"?self:null;Ge&&(this.tools=Ge.gpShareMeasures||{});var Be=this.CLASSNAME;for(var je in this.tools)if(this.tools.hasOwnProperty(je))for(var Ve=this.tools[je],Ze=0;Ze<Ve.length;Ze++){var Qe=Ve[Ze];Qe&&Qe.active&&je!==Be&&Qe.map.id===ke&&(Qe.active=!1,Qe.instance!==null&&Qe.instance.clean())}Interactions.unset(t,{current:"Measures"});var en=this._pictoContainer.ariaPressed;if(en==="true"){this.addMeasureEvents(),this.initMeasureInteraction(),this.addMeasureInteraction(e);for(var tn=0;tn<this.tools[Be].length;tn++)this.tools[Be][tn].map.id===ke&&(this.tools[Be][tn].active=!0)}else{this.clearMeasure(),this.clearMeasureToolTip(),this.removeMeasureEvents();for(var an=0;an<this.tools[Be].length;an++)this.tools[Be][an].map.id===ke&&(this.tools[Be][an].active=!1)}},clearMeasureToolTip:function(){var Oe=this.getMap();if(Oe)for(var e=Oe.getTargetElement(),t=e.getElementsByClassName("ol-overlaycontainer"),ke=0;ke<t.length;ke++){for(var Ge=t[ke],Be=Ge.children.length,je=[],Ve=0;Ve<Be;Ve++){var Ze=Ge.children[Ve];if(Ze.children.length!==0){var Qe=Ze.children[0];(Qe.className==="GPmeasureTooltip GPmeasureTooltip-static"||Qe.className==="GPmeasureTooltip GPmeasureTooltip-measure")&&je.push(Ze)}}for(var en=0;en<je.length;en++)Ge.removeChild(je[en])}},clearMeasure:function(){var Oe=this.getMap();this.measureVector&&(Oe.removeLayer(this.measureVector),this.measureVector=null),this.measureDraw&&(Oe.removeInteraction(this.measureDraw),this.measureDraw=null)},createMeasureTooltip:function(Oe){this.measureTooltipElement&&this.measureTooltipElement.parentNode.removeChild(this.measureTooltipElement),this.measureTooltipElement=document.createElement("div"),this.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-measure",this.measureTooltip=new Overlay({element:this.measureTooltipElement,stopEvent:!1,offset:[0,-15],positioning:"bottom-center"}),Oe.addOverlay(this.measureTooltip)},createHelpTooltip:function(Oe){this.helpTooltipElement&&this.helpTooltipElement.parentNode.removeChild(this.helpTooltipElement),this.helpTooltipElement=document.createElement("div"),this.helpTooltipElement.className="tooltip hidden",this.helpTooltip=new Overlay({element:this.helpTooltipElement,stopEvent:!1,offset:[15,0],positioning:"center-left"}),Oe.addOverlay(this.helpTooltip)},createStylingMeasureInteraction:function(Oe){this.options.styles=Oe||{},logger$c.trace("style start",this.options.styles.start);var e={image:Measures.DEFAULT_POINTER_STYLE,fill:Measures.DEFAULT_DRAW_START_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};this.options.styles.hasOwnProperty("pointer")&&this.options.styles.pointer instanceof Image&&(e.image=this.options.styles.pointer),this.options.styles.hasOwnProperty("start")&&this.options.styles.start instanceof Style$1&&(this.options.styles.start.getFill()!=null&&(e.fill=this.options.styles.start.getFill()),this.options.styles.start.getStroke()!=null&&(e.stroke=this.options.styles.start.getStroke())),this.options.styles.start=new Style$1(e),logger$c.trace("style finish",this.options.styles.finish);var t={fill:Measures.DEFAULT_DRAW_FINISH_STYLE.getFill(),stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};this.options.styles.hasOwnProperty("finish")&&this.options.styles.finish instanceof Style$1&&(this.options.styles.finish.getFill()!=null&&(t.fill=this.options.styles.finish.getFill()),this.options.styles.finish.getStroke()!=null&&(t.stroke=this.options.styles.finish.getStroke())),this.options.styles.finish=new Style$1(t)},addMeasureInteraction:function(Oe){var e=this.getMap(),t=this;this.measureDraw=new Draw({source:this.measureSource,condition:function(ke){return ke.originalEvent.ctrlKey?(t.sketch&&this.removeLastPoint(),!1):!0},type:Oe,style:this.options.styles.start||Measures.DEFAULT_DRAW_START_STYLE}),this.measureDraw.setProperties({name:"Measures",source:this}),e.addInteraction(this.measureDraw),this.createMeasureTooltip(e),this.measureDraw.on("drawstart",ke=>{t.sketch=ke.feature}),this.measureDraw.on("drawend",()=>{if(t.sketch){var ke,Ge,Be=t.sketch.getGeometry();if(ke=t.format(Be),Be.getType()==="LineString")Ge=Be.getLastCoordinate();else if(Be.getType()==="Polygon")Ge=Be.getInteriorPoint().getCoordinates();else return;t.measureTooltipElement.innerHTML=ke,t.measureTooltip.setPosition(Ge)}t.measureTooltipElement.className="GPmeasureTooltip GPmeasureTooltip-static",t.measureTooltip.setOffset([0,-7]),t.sketch=null,t.measureTooltipElement=null,t.createMeasureTooltip(e)})},initMeasureInteraction:function(){var Oe=this.getMap();this.measureSource=new VectorSource,this.measureVector=new VectorLayer({source:this.measureSource,style:this.options.styles.finish||Measures.DEFAULT_DRAW_FINISH_STYLE}),this.measureVector.gpResultLayerId="measure",Oe.addLayer(this.measureVector),Oe.getControls().forEach(e=>{if(e.CLASSNAME==="LayerSwitcher"){var t=this.measureVector.gpLayerId;e._layers[t].title===t&&e.addLayer(this.measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}})}},ElevationPathDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPelevationPath"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowElevationPathPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowElevationPathPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-elevation fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Calculer un profil altimétrique"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowElevationPathClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowElevationPathClick(ke)}),e},_createElevationPathPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPelevationPathPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createElevationPathPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createDrawingButtonsPluginDiv:function(){var Oe=document.createElement("div");return Oe.className="container-buttons-plugin fr-mx-2w",Oe},_createElevationPathPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");if(e.className="GPpanelHeader gpf-panel__header fr-modal__header",!checkDsfr()){var t=document.createElement("button");t.id=this._addUID("GPelevationPathPanelInfo"),t.className="GPpanelInfo gpf-btn gpf-btn-icon-info fr-btn fr-btn--secondary gpf-btn--secondary fr-m-1w",t.title="Informations",t.addEventListener?t.addEventListener("click",function(){Oe.onOpenElevationPathInfoClick()}):t.attachEvent&&t.attachEvent("onclick",function(){Oe.onOpenElevationPathInfoClick()}),e.appendChild(t)}var ke=document.createElement("div");ke.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",ke.innerHTML="Profil Altimétrique",e.appendChild(ke);var Ge=document.createElement("button");Ge.id=this._addUID("GPelevationPathPanelReduce"),Ge.className="GPpanelReduce gpf-btn gpf-btn-icon-reduce fr-btn fr-btn--secondary gpf-btn--secondary",Ge.title="Masquer le panneau",Ge.addEventListener?Ge.addEventListener("click",function(Ve){typeof Oe.onReduceElevationPathPanelClick=="function"&&Oe.onReduceElevationPathPanelClick()},!1):Ge.attachEvent&&Ge.attachEvent("onclick",function(Ve){typeof Oe.onReduceElevationPathPanelClick=="function"&&Oe.onReduceElevationPathPanelClick()}),e.appendChild(Ge);var Be=document.createElement("button");Be.id=this._addUID("GPelevationPathPanelClose"),Be.className="GPpanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",Be.title="Fermer le panneau",Be.addEventListener?Be.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowElevationPathPicto")).click()},!1):Be.attachEvent&&Be.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowElevationPathPicto")).click()});var je=document.createElement("span");return je.className="GPelementHidden gpf-visible",je.innerText="Fermer",Be.appendChild(je),e.appendChild(Be),e},_createElevationPathPanelProfilElement:function(){var Oe=document.createElement("div");Oe.className="GPelevationPathProfilWrapper";var e=document.createElement("div");return e.id="GPelevationPathProfil",Oe.appendChild(e),Oe},_createElevationPathWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPelevationPathCalcWaitingContainer"),Oe.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createElevationPathInformationsElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPelevationPathInformationsContainer"),checkDsfr()||(Oe.className="GPelementHidden gpf-hidden");var e=document.createElement("p");return e.className="GPelevationPathInformations",e.innerHTML="Aucune information...",Oe.appendChild(e),Oe},_addElevationPathInformationsItem:function(Oe,e){var t=document.getElementById(this._addUID("GPelevationPathInformationsContainer"));if(t){var ke=document.createElement("p");ke.className="GPelevationPathInformations";var Ge=document.createElement("span");Ge.innerText=Oe;var Be=document.createElement("span");Be.innerText=e,ke.appendChild(Ge),ke.appendChild(Be),t.appendChild(ke)}return t}},ProfileElevationPathDOM={_getCssProperty:function(Oe,e){return window.getComputedStyle(Oe,null).getPropertyValue(e)},_getTextWidth:function(Oe,e,t=null){var ke=this.canvas||(this.canvas=document.createElement("canvas")),Ge=ke.getContext("2d");t===null?Ge.font=`${this._getCssProperty(e,"font-weight")} ${this._getCssProperty(e,"font-size")} ${this._getCssProperty(e,"font-family")}`:Ge.font=t;var Be=Ge.measureText(Oe);return Be.width},_dataZToSvgY:function(Oe,e,t,ke){return e-(Oe-t)*ke-.5},_dataDistToSvgX:function(Oe,e,t,ke){return e-t+Oe*ke},_svgXToDataDist:function(Oe,e,t,ke){return(Oe+t-e)/ke},_arrayBisect:function(Oe,e){let t;if(Oe.length===0)return 0;for(t=0;t<Oe.length;t++)if(e<Oe[t].dist)return t;return t-1},displayProfileByDefault:function(Oe,e,t,ke){var Ge=t;if(!e||!Oe)return;const Be={fontFamily:"Arial",strokeColor:"#0B6BA7",fillColor:"#00B798",focusLineColor:"#F90"};for(checkDsfr()&&(Be.fontFamily="Marianne",Be.strokeColor="#2F4077",Be.fillColor="#2F4077",Be.focusLineColor="#639f6a");e.firstChild;)e.removeChild(e.firstChild);const je={top:25,right:15,bottom:10,left:10};var Ve=Ge.options.displayProfileOptions,Ze=Oe.points,Qe=JSON.parse(JSON.stringify(Ze));Qe.sort(function(uo,to){return uo.z-to.z});var en=Qe[0].z,tn=Qe[Qe.length-1].z,an=Oe.distance;let cn="m";const un=document.createElement("div");un.id="profileElevationByDefault",e.appendChild(un);var dn=window.getComputedStyle(e).getPropertyValue("width").replace(/px/,""),fn=window.getComputedStyle(e).getPropertyValue("height").replace(/px/,"");const pn=fn-je.top-je.bottom,gn=dn-je.left-je.right,yn=17,vn=this._getTextWidth(Math.round(tn).toLocaleString()+",88",e,`400 10 ${Be.fontFamily}`),An=17,xn=15,wn=15,bn=this._getTextWidth(Math.round(an).toLocaleString()+",5",e),Mn=1,Pn=pn-An-xn,En=gn-yn-vn,Cn=document.createElementNS("http://www.w3.org/2000/svg","svg");Cn.id="profileElevationByDefaultSvg",Cn.setAttribute("style","display: block; margin: auto; overflow: visible;"),Cn.setAttribute("viewBox",`0 0 ${dn} ${fn}`),Cn.setAttribute("width","100%"),Cn.setAttribute("height","100%");const Rn=Math.floor(Pn/wn);let Tn;tn===en?Tn=.1:Tn=Math.pow(10,Math.ceil(Math.log((tn-en)/Rn)/Math.log(10)))/2;let Nn=Math.floor(en/Tn)*Tn,Gn=Math.ceil(tn/Tn)*Tn;Gn===tn&&(Gn+=Tn),Nn=Math.round(Nn*100)/100,Gn=Math.round(Gn*100)/100;let zn=Math.round((Gn-Nn)/Tn);zn+1>Rn&&(Tn=Math.pow(10,Math.ceil(Math.log((tn-en)/Rn)/Math.log(10))),Nn=Math.floor(en/Tn)*Tn,Gn=Math.ceil(tn/Tn)*Tn,Gn===tn&&(Gn+=Tn),Nn=Math.round(Nn*100)/100,Gn=Math.round(Gn*100)/100,zn=Math.floor((Gn-Nn)/Tn)),zn=Math.max(Math.round(zn),1);const $n=document.createElementNS("http://www.w3.org/2000/svg","g");$n.setAttribute("class","profile-z-vertical");const Qn=document.createElementNS("http://www.w3.org/2000/svg","g"),Hn=Pn/zn;let Ni;tn===en?Ni=Pn/.2:Ni=Pn/(Gn-Nn);let On,qn,Un,Ci,Si,_i;for(let uo=0;uo<=zn;uo++)On=document.createElementNS("http://www.w3.org/2000/svg","text"),On.setAttribute("class","profile-z-graduation"),On.setAttribute("font-family",Be.fontFamily),On.setAttribute("font-size","10px"),On.setAttribute("fill","#5E5E5E"),On.textContent=(Math.round(100*(Nn+uo*Tn))/100).toLocaleString(),qn=Pn-uo*Hn,On.setAttribute("transform",`translate(${yn+vn-8}, ${qn+5})`),On.setAttribute("text-anchor","end"),$n.appendChild(On),Un=Math.round(qn)-.5,Ci=document.createElementNS("http://www.w3.org/2000/svg","g"),Si=document.createElementNS("http://www.w3.org/2000/svg","path"),Si.setAttribute("cs","100,100"),Si.setAttribute("stroke-width","1"),uo!==0?Si.setAttribute("stroke-opacity","0.2"):Si.setAttribute("stroke-opacity","1"),Si.setAttribute("stroke","#000000"),Si.setAttribute("fill","none"),Si.setAttribute("d",`M${yn+vn},${Un} L${En+yn+vn},${Un}`),_i=document.createElementNS("http://www.w3.org/2000/svg","path"),_i.setAttribute("cs","100,100"),_i.setAttribute("stroke-width","1"),_i.setAttribute("stroke-opacity","1"),_i.setAttribute("stroke","#000000"),_i.setAttribute("fill","none"),_i.setAttribute("d",`M${yn+vn},${Un} L${yn+vn+5},${Un}`),_i.setAttribute("transform","translate(-5, 0)"),Ci.appendChild(_i),Ci.appendChild(Si),Qn.appendChild(Ci);var Ii=document.createElementNS("http://www.w3.org/2000/svg","text");Ii.setAttribute("class","profile-z-legend"),Ii.setAttribute("font-family",Be.fontFamily),Ii.setAttribute("font-size","11px"),Ii.setAttribute("fill","#5E5E5E"),Ii.textContent="Altitude (m)",Ii.setAttribute("transform",`translate(${yn-8}, ${Math.round(Pn/2)}) rotate(-90)`),Ii.setAttribute("text-anchor","middle"),$n.appendChild(Ii),Cn.appendChild($n),Cn.appendChild(Qn),an>2e3&&(an/=1e3,cn="km");const Li=Math.floor(En/bn);let Ri=Math.pow(10,Math.ceil(Math.log(an/Li)/Math.log(10)))/2;const tr=an;let Fr=Math.floor(tr/Ri);Fr>Li?(Ri=Math.pow(10,Math.ceil(Math.log(an/Li)/Math.log(10))),Fr=Math.floor(tr/Ri)):Fr<Mn&&(Ri=Math.pow(10,Math.ceil(Math.log(an/Li)/Math.log(10))-1),Fr=Math.floor(tr/Ri)),Fr=Math.max(Fr,1);const Bn=Ri*Fr,Ai=document.createElementNS("http://www.w3.org/2000/svg","g");Ai.setAttribute("class","profile-x-vertical");const Kn=document.createElementNS("http://www.w3.org/2000/svg","g"),Fn=En/tr,$i=(tr-Bn)*Fn,Hi=Math.round((En-$i)/Fr);let Di,zi,Bi,Gi,Ti,Mi;for(let uo=0;uo<=Fr+1;uo++)Di=document.createElementNS("http://www.w3.org/2000/svg","text"),Di.setAttribute("class","profile-x-graduation"),Di.setAttribute("font-family",Be.fontFamily),Di.setAttribute("font-size","10px"),Di.setAttribute("fill","#5E5E5E"),uo!==Fr+1&&(Di.textContent=(Math.round(100*uo*Ri)/100).toLocaleString()),zi=yn+vn+uo*Hi,uo===Fr+1&&(zi=yn+vn+En),Di.setAttribute("transform",`translate(${zi}, ${Pn+xn+5})`),Di.setAttribute("text-anchor","middle"),Ai.appendChild(Di),Bi=zi-.5,Gi=document.createElementNS("http://www.w3.org/2000/svg","g"),Ti=document.createElementNS("http://www.w3.org/2000/svg","path"),Ti.setAttribute("cs","100,100"),Ti.setAttribute("stroke-width","1"),uo!==0?Ti.setAttribute("stroke-opacity","0.2"):Ti.setAttribute("stroke-opacity","1"),Ti.setAttribute("stroke","#000000"),Ti.setAttribute("fill","none"),Ti.setAttribute("d",`M${Bi},${Pn} L${Bi},0`),Mi=document.createElementNS("http://www.w3.org/2000/svg","path"),Mi.setAttribute("cs","100,100"),Mi.setAttribute("stroke-width","1"),Mi.setAttribute("stroke-opacity","1"),Mi.setAttribute("stroke","#000000"),Mi.setAttribute("fill","none"),Mi.setAttribute("d",`M${Bi},${Pn} L${Bi},${Pn-5}`),Mi.setAttribute("transform","translate(0, 5)"),Gi.appendChild(Mi),Gi.appendChild(Ti),Kn.appendChild(Gi);var Oi=document.createElementNS("http://www.w3.org/2000/svg","text");Oi.setAttribute("class","profile-x-legend"),Oi.setAttribute("font-family",Be.fontFamily),Oi.setAttribute("font-size","11px"),Oi.setAttribute("fill","#5E5E5E"),Oi.textContent=`Distance (${cn})`,Oi.setAttribute("transform",`translate(${yn+vn+En/2}, ${Pn+xn+An+3})`),Oi.setAttribute("text-anchor","middle"),Ai.appendChild(Oi),Cn.appendChild(Ai),Cn.appendChild(Kn);const Xi=document.createElementNS("http://www.w3.org/2000/svg","g");let ar=1;cn==="km"&&(ar=1e3);let Pr=this._dataDistToSvgX(Ze[0].dist/ar,gn,En,Fn),Rr=this._dataZToSvgY(Ze[0].z,Pn,Nn,Ni),Us=`M${Pr},${Rr}`;for(let uo=1;uo<Ze.length;uo++)Pr=this._dataDistToSvgX(Ze[uo].dist/ar,gn,En,Fn),Rr=this._dataZToSvgY(Ze[uo].z,Pn,Nn,Ni),Us+=` L${Pr},${Rr}`;const Vr=document.createElementNS("http://www.w3.org/2000/svg","path");Vr.setAttribute("cs","100,100"),Vr.setAttribute("stroke-width","1"),Vr.setAttribute("stroke-opacity","1"),Vr.setAttribute("stroke",Be.strokeColor),Vr.setAttribute("fill","none"),Vr.setAttribute("d",Us),Us+=` L${Pr},${Pn}`,Us+=` L${gn-En},${Pn}`;const ro=document.createElementNS("http://www.w3.org/2000/svg","path");ro.setAttribute("cs","100,100"),ro.setAttribute("stroke-width","1"),ro.setAttribute("stroke-opacity","0"),ro.setAttribute("stroke","#000000"),ro.setAttribute("fill",Be.fillColor),ro.setAttribute("fill-opacity","0.2"),ro.setAttribute("d",Us),Xi.appendChild(Vr),Xi.appendChild(ro),Cn.appendChild(Xi);const Js=document.createElementNS("http://www.w3.org/2000/svg","g"),fo=document.createElementNS("http://www.w3.org/2000/svg","rect");fo.setAttribute("width",En),fo.setAttribute("height",Pn),fo.setAttribute("transform",`translate(${gn-En},0)`),fo.setAttribute("visibility","hidden"),fo.setAttribute("pointer-events","all");const lo=JSON.parse(JSON.stringify(Ze));lo.sort(function(uo,to){return uo.dist-to.dist});const Ks=document.createElementNS("http://www.w3.org/2000/svg","line");Ks.setAttribute("id","focusLineX"),Ks.setAttribute("class","focusLine-default"),Ks.setAttribute("fill","none"),Ks.setAttribute("stroke",Be.focusLineColor),Ks.setAttribute("stroke-width","0.5px"),Ks.setAttribute("visibility","hidden");const oo=document.createElementNS("http://www.w3.org/2000/svg","line");oo.setAttribute("id","focusLineY"),oo.setAttribute("class","focusLine-default"),oo.setAttribute("fill","none"),oo.setAttribute("stroke",Be.focusLineColor),oo.setAttribute("stroke-width","0.5px"),oo.setAttribute("visibility","hidden");const no=document.createElementNS("http://www.w3.org/2000/svg","circle");no.setAttribute("id","focusCircle"),no.setAttribute("r",4),no.setAttribute("class","circle-default focusCircle-default"),no.setAttribute("fill",Be.focusLineColor),no.setAttribute("visibility","hidden"),Js.appendChild(no),Js.appendChild(Ks),Js.appendChild(oo);const bo=document.createElementNS("http://www.w3.org/2000/svg","text"),co=document.createElementNS("http://www.w3.org/2000/svg","tspan"),Ko=document.createElementNS("http://www.w3.org/2000/svg","tspan"),aa=document.createElementNS("http://www.w3.org/2000/svg","tspan");bo.setAttribute("style",`text-align:center; max-width:220px; font-size:10px; color:#000000; font-family:${Be.fontFamily}; z-index:50;`),bo.style.pointerEvents="none",bo.style.position="fixed",bo.setAttribute("class","tooltipInit"),bo.setAttribute("text-anchor","middle"),un.appendChild(bo),co.setAttribute("class","altiPathValue"),co.setAttribute("x","0"),co.setAttribute("dy","-.7em"),Ko.setAttribute("class","altiPathValue"),Ko.setAttribute("x","0"),Ko.setAttribute("dy","1em"),aa.setAttribute("class","altiPathCoords"),aa.setAttribute("x","0"),aa.setAttribute("dy","1em"),bo.appendChild(co),Ve.currentSlope&&bo.appendChild(Ko),bo.appendChild(aa);const ho=document.createElementNS("http://www.w3.org/2000/svg","g");Js.appendChild(ho);const io=document.createElementNS("http://www.w3.org/2000/svg","path");io.setAttribute("cs","100,100"),io.setAttribute("fill","#FFFFFF"),io.setAttribute("stroke","#CCCCCC"),io.setAttribute("fill-opacity","0.8"),io.setAttribute("stroke-width","1"),io.setAttribute("stroke-opacity","1");const po=document.createElementNS("http://www.w3.org/2000/svg","path");po.setAttribute("cs","100,100"),po.setAttribute("fill","#FFFFFF"),po.setAttribute("stroke","#000000"),po.setAttribute("fill-opacity","0"),po.setAttribute("stroke-width","1"),po.setAttribute("stroke-opacity","0.4"),po.setAttribute("transform","translate(1,1)"),ho.appendChild(po),ho.appendChild(io),ho.appendChild(bo),ho.setAttribute("class","tooltipInit"),ho.style.pointerEvents="none";function cc(){Ks.setAttribute("visibility","visible"),oo.setAttribute("visibility","visible"),no.setAttribute("visibility","visible"),ke.__createProfileMarker(Ge,Ze[0]),bo.classList.remove("tooltipInit"),ho.classList.remove("tooltipInit"),bo.classList.remove("tooltipFadeOut"),ho.classList.remove("tooltipFadeOut"),bo.classList.add("tooltipFadeIn"),ho.classList.add("tooltipFadeIn")}function jo(){Ks.setAttribute("visibility","hidden"),oo.setAttribute("visibility","hidden"),no.setAttribute("visibility","hidden"),ke.__removeProfileMarker(Ge),bo.classList.remove("tooltipFadeIn"),ho.classList.remove("tooltipFadeIn"),bo.classList.add("tooltipFadeOut"),ho.classList.add("tooltipFadeOut")}function Ma(uo){const to=Cn.createSVGPoint();to.x=uo.clientX,to.y=uo.clientY;const ta=to.matrixTransform(Cn.getScreenCTM().inverse()),ya=this._svgXToDataDist(ta.x,gn,En,Fn)*ar,Qo=Math.max(1,this._arrayBisect(lo,ya)),go=Ze[Qo-1],Oo=Ze[Qo];let ko=go;ya-go.dist>Oo.dist-ya&&(ko=Oo);const Pl=this._dataDistToSvgX(ko.dist/ar,gn,En,Fn),Za=this._dataZToSvgY(ko.z,Pn,Nn,Ni);no.setAttribute("cx",Pl),no.setAttribute("cy",Za),Ks.setAttribute("x1",Pl),Ks.setAttribute("y1",Pn),Ks.setAttribute("x2",Pl),Ks.setAttribute("y2",0),oo.setAttribute("x1",yn+vn),oo.setAttribute("y1",Za),oo.setAttribute("x2",En+yn+vn),oo.setAttribute("y2",Za),ke.__updateProfileMarker(Ge,ko);const Tl=`Altitude : ${ko.z.toLocaleString()} m`,ic=`Pente : ${ko.slope} %`,Rl=`(lat : ${ko.lat.toLocaleString()} / lon : ${ko.lon.toLocaleString()})`;co.innerHTML=Tl,Ko.innerHTML=ic,aa.innerHTML=Rl;const Va=Math.max(this._getTextWidth(Rl,aa),this._getTextWidth(Tl,co));let za;ko.dist>an*ar/2?(za=`M -0.5 -0.5 l -6 6 l 0 16 l -${Va+10} 0 l 0 -44 l ${Va+10} 0 l 0 16 l 6 6`,bo.setAttribute("transform",`translate(${-(Va/2+12)},0)`)):ko.dist<=an*ar/2&&(za=`M -0.5 -0.5 l 6 6 l 0 16 l ${Va+10} 0 l 0 -44 l -${Va+10} 0 l 0 16 l -6 6`,bo.setAttribute("transform",`translate(${Va/2+12},0)`)),io.setAttribute("d",za),po.setAttribute("d",za),ho.setAttribute("transform",`translate(${Pl},${Za})`),ho.style.transform=`translate(${Pl}px,${Za}px)`}return fo.addEventListener("pointerover",cc),fo.addEventListener("pointerout",jo),fo.addEventListener("pointermove",Ma.bind(this)),Js.appendChild(fo),Cn.appendChild(Js),un.appendChild(Cn),e},displayProfileRaw:function(Oe,e,t,ke){if(e){for(;e.firstChild;)e.removeChild(e.firstChild);var Ge=Oe&&Oe.points?Oe.points:{},Be=document.createElement("textarea");return Be.id="profilElevationResults",Be.rows=10,Be.cols=50,Be.style.width="100%",Be.innerHTML=JSON.stringify(Ge,void 0,4),Be.addEventListener("mouseover",function(je){ke.__customRawProfileMouseOverEvent(t,je)}),e.appendChild(Be),e}},displayProfileLibD3:function(Oe,e,t,ke){var Ge=t;if(e&&Oe){for(;e.firstChild;)e.removeChild(e.firstChild);var Be=Oe.points;if(Oe.distance>2e3){Oe.unit="km";for(let bn=0;bn<Be.length;bn++)Be[bn].dist/=1e3}var je=Ge.options.displayProfileOptions,Ve={top:20,right:20,bottom:30,left:40},Ze=window.getComputedStyle(e).getPropertyValue("width"),Qe=window.getComputedStyle(e).getPropertyValue("height"),en=Ze.replace(/px/,"")-Ve.left-Ve.right,tn=Qe.replace(/px/,"")-Ve.top-Ve.bottom,an=d3.scale.linear().range([0,en]),cn=d3.scale.linear().range([tn,0]),un=d3.svg.axis().scale(an).orient("bottom").ticks(5),dn=d3.svg.axis().scale(cn).orient("left").ticks(5),fn=d3.svg.line().interpolate("basis").x(function(bn){return an(bn.dist)}).y(function(bn){return cn(bn.z)}),pn=d3.svg.area().interpolate("basis").x(function(bn){return an(bn.dist)}).y0(tn).y1(function(bn){return cn(bn.z)}),gn=d3.select(e).append("svg").attr("width",en+Ve.left+Ve.right).attr("height",tn+Ve.top+Ve.bottom).append("g").attr("transform","translate("+Ve.left+","+Ve.top+")"),yn=d3.extent(Be,function(bn){return bn.dist});an.domain(yn);var vn=[0,d3.max(Be,function(bn){return bn.z})];cn.domain(vn),gn.append("path").datum(Be).attr("class","area-d3").attr("d",pn),gn.append("g").attr("class","x axis-d3").attr("transform","translate(0,"+tn+")").call(un).append("text").attr("y",-15).attr("dy",".71em").attr("x",en).text("Distance ("+Oe.unit+")"),gn.append("g").attr("class","y axis-d3").call(dn).append("text").attr("transform","rotate(-90)").attr("y",6).attr("dy",".71em").text("Altitude (m)"),gn.append("g").attr("class","grid-d3 vertical").attr("transform","translate(0,"+tn+")").call(un.orient("bottom").tickSize(-tn,0,0).tickFormat("")),gn.append("g").attr("class","grid-d3 horizontal").call(dn.orient("left").tickSize(-en,0,0).tickFormat("")),gn.append("path").datum(Be).attr("class","line-d3").attr("d",fn),gn.selectAll("circle").data(Be).enter().append("circle").attr("cx",function(bn){return an(bn.dist)}).attr("cy",function(bn){return cn(bn.z)}).attr("r",0).attr("class","circle-d3");var An=gn.append("g").style("display","none");An.append("line").attr("id","focusLineX").attr("class","focusLine-d3"),An.append("line").attr("id","focusLineY").attr("class","focusLine-d3"),An.append("circle").attr("id","focusCircle").attr("r",4).attr("class","circle-d3 focusCircle-d3");var xn=d3.select(e).append("div").attr("class","tooltip-d3").style("opacity",0),wn=d3.bisector(function(bn){return bn.dist}).left;return gn.append("rect").attr("class","overlay-d3").attr("width",en).attr("height",tn).on("mouseover",function(){An.style("display",null),ke.__createProfileMarker(Ge,Be[0])}).on("mouseout",function(){An.style("display","none"),ke.__removeProfileMarker(Ge),xn.transition().duration(500).style("opacity",0)}).on("mousemove",function(){var bn=d3.mouse(this),Mn=an.invert(bn[0]),Pn=Math.max(1,wn(Be,Mn)),En=Be[Pn-1],Cn=Be[Pn],Rn=Mn-En[0]>Cn[0]-Mn?Cn:En,Tn=an(Rn.dist),Nn=cn(Rn.z);An.select("#focusCircle").attr("cx",Tn).attr("cy",Nn),An.select("#focusLineX").attr("x1",Tn).attr("y1",cn(vn[0])).attr("x2",Tn).attr("y2",cn(vn[1])),An.select("#focusLineY").attr("x1",an(yn[0])).attr("y1",Nn).attr("x2",an(yn[1])).attr("y2",Nn),ke.__updateProfileMarker(Ge,Rn),xn.transition().duration(200).style("opacity",.9);var Gn="";Gn+=" Altitude : "+Rn.z+" m",je.currentSlope&&(Gn+="<br/> Pente : "+Rn.slope+" %"),Gn+="<br/> (Lat : "+Rn.lat+"/ Lon : "+Rn.lon+")",xn.html(Gn).style("left",d3.event.pageX+"px").style("top",d3.event.pageY-28+"px")}),gn}},displayProfileLibAmCharts:function(Oe,e,t,ke){var Ge=t;if(e&&Oe){var Be=Oe.points,je="<span class='altiPathValue'>[[title]] : [[value]]m</span><br/>",Ve=Ge.options.displayProfileOptions.currentSlope;if(Ve&&(je+="<span class='altiPathValue'>Pente : [[slope]] %</span><br/>"),je+="<span class='altiPathCoords'>(Lat: [[lat]] / Lon:[[lon]])</span>",AmCharts.addInitHandler(function(){}),Oe.distance>2e3){Oe.unit="km";for(let an=0;an<Be.length;an++)Be[an].dist/=1e3}for(let an=0;an<Be.length;an++){var Ze=Be[an].dist,Qe=100;Ze>100?Qe=1:Ze>10&&(Qe=10),Ze=Math.round(Ze*Qe)/Qe,Be[an].dist=Ze}var en={type:"serial",pathToImages:"http://cdn.amcharts.com/lib/3/images/",categoryField:"dist",autoMarginOffset:0,marginRight:10,marginTop:10,startDuration:0,color:"#5E5E5E",fontSize:8,theme:"light",thousandsSeparator:"",numberFormatter:{precision:-1,decimalSeparator:",",thousandsSeparator:" "},categoryAxis:{color:"#5E5E5E",gridPosition:"start",minHorizontalGap:40,tickPosition:"start",title:"Distance ("+Oe.unit+")",titleColor:"#5E5E5E",labelOffset:0,startOnAxis:!0},chartCursor:{animationDuration:0,bulletsEnabled:!0,bulletSize:10,categoryBalloonEnabled:!1,cursorColor:"#F90",graphBulletAlpha:1,graphBulletSize:1,zoomable:!1},trendLines:[],graphs:[{balloonColor:"#CCCCCC",balloonText:je,bullet:"round",bulletAlpha:0,bulletBorderColor:"#FFF",bulletBorderThickness:2,bulletColor:"#F90",bulletSize:6,hidden:!1,id:"AmGraph-1",fillAlphas:.4,fillColors:"#C77A04",lineAlpha:1,lineColor:"#C77A04",lineThickness:1,title:"Altitude",valueField:"z"}],guides:[],valueAxes:[{id:"ValueAxis-1",minVerticalGap:20,title:"Altitude (m)"}],balloon:{borderColor:"#CCCCCC",borderThickness:1,fillColor:"#FFFFFF",showBullet:!0},titles:[],allLabels:[],dataProvider:Be},tn=AmCharts.makeChart(e,en);return tn.addListener("changed",function(an){var cn=an.chart.dataProvider[an.index];ke.__updateProfileMarker(Ge,cn)}),tn}}},logger$b=LoggerByDefault.getLogger("elevationpath"),qa,ElevationPath=(qa=class extends ControlExtended{constructor(e){if(logger$b.trace("ElevationPath()"),e=e||{},super(e),!(this instanceof qa))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ElevationPath",this._uid=e.id||SelectorID.generate(),this._showContainer=null,this._pictoButton=null,this._panelContainer=null,this._profileContainer=null,this._waitingContainer=null,this._infoContainer=null,this._timerHdlr=null,this._drawStyleStart=null,this._drawStyleFinish=null,this._markerStyle=null,this._profile=null,this._data={},this._measureSource=null,this._measureVector=null,this._measureDraw=null,this._lastSketch=null,this._currentSketch=null,this._marker=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}static __removeProfileMarker(e){var t=e;t._marker&&(t._measureSource.removeFeature(t._marker),t._marker=null)}static __createProfileMarker(e,t){var ke=e;ke._marker&&(ke._measureSource.removeFeature(ke._marker),ke._marker=null);var Ge=ke.getMap(),Be=Ge.getView().getProjection(),je=transform$1([t.lon,t.lat],"EPSG:4326",Be),Ve=ke._measureSource.getFeatures()[0].getGeometry().getClosestPoint(je),Ze=new Point$1(Ve);ke._marker=new Feature({geometry:Ze}),logger$b.trace(Ze),ke._marker.setStyle(ke._markerStyle),ke._measureSource.addFeature(ke._marker)}static __updateProfileMarker(e,t){var ke=e;qa.__removeProfileMarker(ke),qa.__createProfileMarker(ke,t)}static __customRawProfileOperation(e,t){logger$b.log("__customRawProfileOperation");for(var ke=e,Ge=t.points,Be=ke.getMap().getView().getProjection(),je=0;je<Ge.length;je++){var Ve=Ge[je],Ze=transform$1([Ve.lon,Ve.lat],"EPSG:4326",Be),Qe=new Point$1(Ze);ke._marker=new Feature({geometry:Qe}),logger$b.trace(Qe);var en=qa.DEFAULT_STYLES.RESULTS,tn=new CircleStyle({radius:en.imageRadius,stroke:new Stroke({color:en.imageStrokeColor,width:en.imageStrokeWidth}),fill:new Fill({color:en.imageFillColor})});ke._marker.setStyle(new Style$1({image:tn})),ke._measureSource.addFeature(ke._marker)}}static __customRawProfileMouseOverEvent(e,t){logger$b.log("__customRawProfileMouseOverEvent",e,t)}static DISPLAY_PROFILE_LIB_AMCHARTS(e,t,ke){if(logger$b.trace("ElevationPath.DISPLAY_PROFILE_LIB_AMCHARTS"),typeof AmCharts>"u"){logger$b.log("Lib. AmCharts is not loaded !");return}var Ge=ProfileElevationPathDOM.displayProfileLibAmCharts(e,t,ke,qa);Ge&&(this._profile=Ge)}static DISPLAY_PROFILE_LIB_D3(e,t,ke){if(logger$b.trace("ElevationPath.DISPLAY_PROFILE_LIB_D3"),typeof d3>"u"){logger$b.log("Lib. D3 is not loaded !");return}var Ge=ProfileElevationPathDOM.displayProfileLibD3(e,t,ke,qa);Ge&&(this._profile=Ge)}static DISPLAY_PROFILE_RAW(e,t,ke){logger$b.trace("ElevationPath.DISPLAY_PROFILE_RAW");var Ge=ProfileElevationPathDOM.displayProfileRaw(e,t,ke,qa);Ge&&(this._profile=Ge)}static DISPLAY_PROFILE_BY_DEFAULT(e,t,ke){logger$b.trace("ElevationPath.DISPLAY_PROFILE_BY_DEFAULT");var Ge=ProfileElevationPathDOM.displayProfileByDefault(e,t,ke,qa);Ge&&(this._profile=Ge)}setMap(e){if(logger$b.trace("ElevationPath::setMap"),e&&(this.options.active&&(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(e),this._addMeasureInteraction(e)),!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this),this.options.export)){var t=Helper.assign({control:this},this.options.export);this.export=new ButtonExport(t),this.export.render();var ke=this;this.export.on("button:clicked",Ge=>{ke.dispatchEvent({type:"export:compute",content:Ge.content})})}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getActive(){return logger$b.trace("ElevationPath::getActive"),this.options.active}setActive(e){logger$b.trace("ElevationPath::setActive"),this.options.active=e}getData(){return Helper.assign({type:"elevationpath"},this._data)}setData(e){this._data=e}getContainer(){return this._container}getLayer(){return this._measureVector}setLayer(e){if(!e){this._measureVector=null;return}if(!(e instanceof VectorLayer)){logger$b.log("no valid layer given for hosting drawn features.");return}e.setStyle(this._drawStyleFinish),this._measureVector=e,this._measureSource=e.getSource()}getGeoJSON(){var e=this._measureVector.getSource().getFeatures(),t=new GeoJSON({defaultStyle:this._drawStyleFinish}),ke=t.writeFeatures(e,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});return ke}getStyle(){return this._drawStyleFinish}clean(e){logger$b.trace("ElevationPath::clean");var t=this.getMap();this._panelContainer.style.display="none",this._pictoButton.setAttribute("aria-pressed",!1),this._removeProfile(),this._removeMeasureInteraction(t,typeof e<"u"?e:!1),this.setLayer()}init(){this._pictoButton.setAttribute("aria-pressed",!0),this._panelContainer.style.display="block",this._displayProfile(this._data),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden"}_initialize(e){logger$b.trace("ElevationPath::_initialize : ",e),this.options={target:null,render:null,active:!1,apiKey:null,export:!1,elevationOptions:{outputFormat:"json"},layerDescription:{title:"Profil altimétrique",description:"Mon profil altimétrique"},displayProfileOptions:{totalDistance:!0,greaterSlope:!0,meanSlope:!0,ascendingElevation:!0,descendingElevation:!0,currentSlope:!0,apply:null,target:null},stylesOptions:{profile:null,draw:null,marker:null}},Helper.mergeParams(this.options,e),this.options.target=e.target||null,this.options.apiKey=e.apiKey;var t=e.displayProfileOptions||{};this.export=null;var ke=t.apply;this.options.displayProfileOptions.apply=typeof ke=="function"?ke:qa.DISPLAY_PROFILE_BY_DEFAULT;var Ge=t.target;this.options.displayProfileOptions.target=typeof Ge<"u"?Ge:null;var Be=e.stylesOptions||{};this.options.stylesOptions.draw=Be.draw||{},this._createStylingDraw(),this.options.stylesOptions.marker=Be.marker||{},this._createStylingMarker()}_initializeContainer(){logger$b.trace("ElevationPath::_initializeContainer : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoButton=this._createShowElevationPathPictoElement();e.appendChild(t),this.options.active&&this._pictoButton.click();var ke=this._panelContainer=this._createElevationPathPanelElement(),Ge=this._createElevationPathPanelDivElement();ke.appendChild(Ge);var Be=this._createElevationPathPanelHeaderElement();Ge.appendChild(Be);var je=this._createElevationPathPanelProfilElement();this._profileContainer=je.firstChild,Ge.appendChild(je);var Ve=this._waitingContainer=this._createElevationPathWaitingElement();Ge.appendChild(Ve);var Ze=this._infoContainer=this._createElevationPathInformationsElement();Ge.appendChild(Ze);var Qe=this._createDrawingButtonsPluginDiv();return Ge.appendChild(Qe),this.options.displayProfileOptions.target===null&&e.appendChild(ke),e}_createStylingMarker(){logger$b.trace("ElevationPath::_createStylingMarker ");var e=qa.DEFAULT_STYLES.MARKER;logger$b.trace("style marker",e),this.options.stylesOptions.marker instanceof ImageStyle&&(e=this.options.stylesOptions.marker),this._markerStyle=new Style$1({image:e})}_createStylingDraw(){logger$b.trace("ElevationPath::_createStylingDraw");var e=this.options.stylesOptions.draw;logger$b.trace("style start",e.start);var t={image:Measures.DEFAULT_POINTER_STYLE,stroke:Measures.DEFAULT_DRAW_START_STYLE.getStroke()};e.hasOwnProperty("pointer")&&e.pointer instanceof ImageStyle&&(t.image=e.pointer),e.hasOwnProperty("start")&&e.start instanceof Stroke&&(t.stroke=e.start),this._drawStyleStart=new Style$1(t),logger$b.trace("style finish",e.finish);var ke={stroke:Measures.DEFAULT_DRAW_FINISH_STYLE.getStroke()};e.hasOwnProperty("finish")&&e.finish instanceof Stroke&&(ke.stroke=e.finish),this._drawStyleFinish=new Style$1(ke)}_createStylingProfile(){logger$b.trace("ElevationPath::_createStylingProfile");var e=this.options.stylesOptions.profile;logger$b.trace("style profile",e);var t=qa.DEFAULT_STYLES.PROFILE;Object.keys(t).forEach(ke=>{if(!e.hasOwnProperty(ke))e[ke]=t[ke];else{var Ge=t[ke];typeof Ge=="object"&&(Helper.mergeParams(Ge,e[ke]),e[ke]=Ge)}})}_initMeasureInteraction(e){logger$b.trace("ElevationPath::_initMeasureInteraction()"),e&&(this._measureSource=new VectorSource,this._measureVector=new VectorLayer({source:this._measureSource,style:this._drawStyleFinish}),this._measureVector.gpResultLayerId="measure:profil",e.addLayer(this._measureVector),e.getControls().forEach(t=>{if(t instanceof LayerSwitcher){var ke=this._measureVector.gpLayerId;t._layers[ke].title===ke&&t.addLayer(this._measureVector,{title:this.options.layerDescription.title,description:this.options.layerDescription.description})}}))}_addMeasureInteraction(e){logger$b.trace("ElevationPath::_addMeasureInteraction()"),e&&(this._measureDraw=new Draw({source:this._measureSource,type:"LineString",style:this._drawStyleStart,stopClick:!0}),this._measureDraw.setProperties({name:"ElevationPath",source:this}),e.addInteraction(this._measureDraw),this._measureDraw.on("drawstart",t=>{logger$b.trace("drawstart",t),this._marker!==null&&(this._measureSource.removeFeature(this._marker),this._marker=null),this._lastSketch!==null&&(this._measureSource.removeFeature(this._lastSketch),this._lastSketch=null),this._currentSketch=t.feature;for(var ke=this._measureSource.getFeatures(),Ge=0;Ge<ke.length;Ge++)this._measureSource.removeFeature(ke[Ge]);this.dispatchEvent("elevationpath:drawstart")}),this._measureDraw.on("drawend",t=>{logger$b.trace("drawend",t),this.dispatchEvent("elevationpath:drawend"),this._lastSketch=this._currentSketch,typeof this.options.elevationOptions.onSuccess>"u"&&this.options.displayProfileOptions.target===null&&(this._panelContainer.style.display="block"),this._measureDraw.setActive(!1),this._requestService()}))}_removeMeasureInteraction(e,t){logger$b.trace("ElevationPath::_removeMeasureInteraction()"),e&&(t&&this._measureVector&&(e.removeLayer(this._measureVector),this._measureVector=null),this._measureDraw&&(e.removeInteraction(this._measureDraw),this._measureDraw=null))}_getGeometry(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=[],t=this.getMap(),ke=t.getView().getProjection(),Ge="EPSG:4326",Be=this._currentSketch.getGeometry().getCoordinates(),je=0;je<Be.length;je++){var Ve=Be[je],Ze=Ve;ke!==Ge&&(Ze=transform$1(Ve,ke,Ge)),e.push({lon:Math.round(Ze[0]*1e8)/1e8,lat:Math.round(Ze[1]*1e8)/1e8})}return e}_getLength(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=0,t=this.getMap(),ke=t.getView().getProjection(),Ge="EPSG:4326",Be=this._currentSketch.getGeometry().getCoordinates(),je=0,Ve=Be.length-1;je<Ve;++je){var Ze=transform$1(Be[je],ke,Ge),Qe=transform$1(Be[je+1],ke,Ge);Ze[0]=Math.round(Ze[0]*1e8)/1e8,Ze[1]=Math.round(Ze[1]*1e8)/1e8,Qe[0]=Math.round(Qe[0]*1e8)/1e8,Qe[1]=Math.round(Qe[1]*1e8)/1e8,e+=getDistance(Ze,Qe)}return e}_getSketchCoords(){if(this._currentSketch===null){logger$b.warn("Current Feature undefined !?");return}for(var e=this.getMap(),t=e.getView().getProjection(),ke="EPSG:4326",Ge=[],Be=this._currentSketch.getGeometry().getCoordinates(),je=0;je<Be.length;je++){var Ve=transform$1(Be[je],t,ke);Ve[0]=Math.round(Ve[0]*1e8)/1e8,Ve[1]=Math.round(Ve[1]*1e8)/1e8,Ge.push(Ve)}return Ge}_requestService(){logger$b.trace("ElevationPath::_requestService");var e=this._getGeometry();if(logger$b.trace("geometry",e),!e){logger$b.warn("missing geometry !?");return}var t={};Helper.mergeParams(t,this.options.elevationOptions),Helper.mergeParams(t,{apiKey:t.apiKey||this.options.apiKey}),typeof t.ssl!="boolean"&&(typeof this.options.ssl=="boolean"?t.ssl=this.options.ssl:t.ssl=!0),Helper.mergeParams(t,{ssl:t.ssl});var ke=this,Ge=this.options.elevationOptions.onFailure!==null&&typeof this.options.elevationOptions.onFailure=="function",Be=this.options.elevationOptions.onSuccess!==null&&typeof this.options.elevationOptions.onSuccess=="function",je=function(Qe){logger$b.trace(Qe),Qe&&(ke._panelContainer.style.display="block",ke._data&&(ke._data={}),ke._data=ke._computeElevationMeasure(Qe.elevations),ke._displayProfile(ke._data),ke._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",ke._waiting=!1,ke._measureDraw.setActive(!0)),Be&&ke.options.elevationOptions.onSuccess.call(ke,ke.getData())},Ve=function(Qe){ke._panelContainer.style.display="none",logger$b.error(Qe.message),ke._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",ke._waiting=!1,ke._measureDraw.setActive(!0),Ge&&ke.options.elevationOptions.onFailure.call(ke,Qe)};Helper.mergeParams(t,{onSuccess:je,onFailure:Ve});var Ze=t.sampling||200;Ze>0&&Helper.mergeParams(t,{sampling:Ze}),Helper.mergeParams(t,{positions:e}),logger$b.trace("options du service",t),this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",Gp.Services.getAltitude(t)}_computeElevationMeasure(e){logger$b.trace("ElevationPath::_computeElevationMeasure",e);var t=e,ke="m",Ge=this._getSketchCoords();if(Ge){t[0].dist=0,t[0].slope=0,t[0].oldlat=t[0].lat,t[0].oldlon=t[0].lon,t[0].lat=Math.round(t[0].lat*1e5)/1e5,t[0].lon=Math.round(t[0].lon*1e5)/1e5;var Be=0,je=0,Ve=0,Ze=0,Qe=0,en=0,tn=[];console.log(t);for(var an=1;an<t.length;an++){var cn=[t[an].lon,t[an].lat],un=getDistance(cn,[t[an-1].oldlon,t[an-1].oldlat]),dn=un+Qe,fn=t[an].z,pn=t[an-1].z;fn<0&&(fn=0),pn<0&&(pn=0);var gn=fn-pn;gn<0?(Be+=un,Ze+=gn):gn>0&&(je+=un,Ve+=gn),Qe=dn,t[an].dist=dn,tn.push(Qe),en+=gn?Math.abs(Math.round(gn/dn*100)):0,t[an].slope=gn?Math.abs(Math.round(gn/dn*100)):0;var yn=t[an].slope;yn>15&&yn<30?t[an].color="#005b4c":yn>30&&yn<45?t[an].color="#00362d":yn>45?t[an].color="#00120f":t[an].color="#00B798",t[an].oldlat=t[an].lat,t[an].oldlon=t[an].lon,t[an].lat=Math.round(t[an].lat*1e5)/1e5,t[an].lon=Math.round(t[an].lon*1e5)/1e5}logger$b.trace("List Distances",tn);for(var vn=t[0].z,An=t[0].z,xn=t[0].slope,wn=0;wn<t.length;wn++){var bn=t[wn];bn.z<-100&&(bn.z=0),bn.z>An&&(An=bn.z),bn.z<vn&&(vn=bn.z),bn.slope>xn&&(xn=bn.slope)}return{greaterSlope:xn,meanSlope:Math.round(en/t.length),distancePlus:je,distanceMinus:Be,ascendingElevation:Ve,descendingElevation:Ze,altMin:vn.toLocaleString(),altMax:An.toLocaleString(),distance:this._getLength(),unit:ke,points:t}}}_displayProfile(e){logger$b.trace("ElevationPath::_displayProfile",e),this._updateInfoContainer();var t=this.options.displayProfileOptions.target;t&&t.appendChild(this._panelContainer),t=this._profileContainer;var ke=this,Ge=this.options.displayProfileOptions.apply;Ge.call(this,e,t,ke);var Be=this.options.displayProfileOptions,je=document.getElementById("GPelevationPathPanelInfo-"+this._uid);je&&(Be.totalDistance||Be.greaterSlope||Be.meanSlope||Be.ascendingElevation||Be.descendingElevation)&&(je.style.display="block"),this.dispatchEvent({type:"elevationpath:compute"})}_updateInfoContainer(){logger$b.trace("ElevationPath::_updateInfoContainer");var e=this.options.displayProfileOptions.totalDistance,t=this.options.displayProfileOptions.meanSlope,ke=this.options.displayProfileOptions.greaterSlope,Ge=this.options.displayProfileOptions.ascendingElevation,Be=this.options.displayProfileOptions.descendingElevation,je=this._infoContainer;if(je.childElementCount)for(;je.firstChild;)je.removeChild(je.firstChild);e&&this._addElevationPathInformationsItem("Distance totale : ",Math.round(this._data.distance).toLocaleString()+" m"),Ge&&this._addElevationPathInformationsItem("Dénivelé positif : ",this._data.ascendingElevation.toLocaleString()+" m"),Be&&this._addElevationPathInformationsItem("Dénivelé négatif : ",this._data.descendingElevation.toLocaleString()+" m"),t&&this._addElevationPathInformationsItem("Pente moyenne : ",this._data.meanSlope.toLocaleString()+" %"),ke&&this._addElevationPathInformationsItem("Plus forte pente : ",this._data.greaterSlope.toLocaleString()+" %")}_removeMeasure(){if(this._lastSketch=null,this._currentSketch=null,this._measureSource){this._marker&&(this._measureSource.removeFeature(this._marker),this._marker=null);for(var e=this._measureSource.getFeatures(),t=0;t<e.length;t++)this._measureSource.removeFeature(e[t])}}_removeProfile(){if(this._profile=null,this._profileContainer)for(;this._profileContainer.firstChild;)this._profileContainer.removeChild(this._profileContainer.firstChild)}onShowElevationPathClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t,{current:"ElevationPath"});var ke=this._pictoButton.ariaPressed;ke==="true"?(this._profile===null&&(this._panelContainer.style.display="none"),this._initMeasureInteraction(t),this._addMeasureInteraction(t)):(this._panelContainer.style.display="none",e&&e.target.dataset&&e.target.dataset.removeMeasure?e.target.dataset.removeMeasure==="true"?this._removeMeasure():(this._lastSketch=null,this._currentSketch=null):this._removeMeasure(),this._removeProfile(),e&&e.target.dataset&&e.target.dataset.removeLayer?this._removeMeasureInteraction(t,e.target.dataset.removeLayer==="true"):this._removeMeasureInteraction(t,!0))}onOpenElevationPathInfoClick(){var e=this._infoContainer;e.className==="GPelementVisible gpf-visible"?(clearTimeout(this._timerHdlr),e.className="GPelementHidden gpf-hidden"):e.className="GPelevationPathInformationsContainerVisible",this._timerHdlr=setTimeout(function(){e.className="GPelementHidden gpf-hidden"},4e3)}},Qc(qa,"DEFAULT_STYLES",{MARKER:new Icon({src:Marker.lightOrange,anchor:[.5,1],snapToPixel:!0}),RESULTS:{imageRadius:5,imageFillColor:"rgba(128, 128, 128, 0.2)",imageStrokeColor:"rgba(0, 0, 0, 0.7)",imageStrokeWidth:2}}),qa);Object.assign(ElevationPath.prototype,ElevationPathDOM);Object.assign(ElevationPath.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ElevationPath=ElevationPath);var logger$a=LoggerByDefault.getLogger("layerimport"),Ea,LayerImport=(Ea=class extends ControlExtended{constructor(e){if(e=e||{},super(e),this.CLASSNAME="LayerImport",!(this instanceof Ea))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this._initialize(e),this._container=this._initContainer(e),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){if(e){var t=this;e.getLayers().on("remove",function(ke){ke.element.gpResultLayerId==="layerimport:MAPBOX"&&ke.element.gpEditorId&&t._mapBoxPanel&&t._importPanel&&(t.cleanMapBoxResults(ke.element.gpEditorId),t._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),t._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"))},t),this.draggable&&Draggable.dragElement(this._importPanel,this._importPanelHeader,e.getTargetElement()),this.collapsed||this._showImportButton.setAttribute("aria-pressed",!0)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$a.error("[ERROR] LayerImport:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?this._panelCloseButton.click():this._showImportButton.click(),this.collapsed=e)}getStaticImportContent(){return this.contentStatic}getServiceImportContent(){return this.contentService}getName(){return this._name}getContainer(){return this._container}_initialize(e){if(this._checkInputOptions(e),this.options={collapsed:!0,draggable:!1,layerTypes:["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"],webServicesOptions:{},vectorStyleOptions:{KML:{extractStyles:!0,showPointNames:!0,defaultStyle:{}},GPX:{defaultStyle:{}},GeoJSON:{defaultStyle:{}},MapBox:{defaultStyle:{},editor:{}}}},e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.extractStyles&&(this.options.vectorStyleOptions.KML.extractStyles=e.vectorStyleOptions.KML.extractStyles),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.showPointNames&&(this.options.vectorStyleOptions.KML.showPointNames=e.vectorStyleOptions.KML.showPointNames),e.vectorStyleOptions&&e.vectorStyleOptions.KML&&e.vectorStyleOptions.KML.defaultStyle?this.options.vectorStyleOptions.KML.defaultStyle=e.vectorStyleOptions.KML.defaultStyle:this.options.vectorStyleOptions.KML.defaultStyle=new Style$1({image:Ea.DefaultStyles.image,stroke:Ea.DefaultStyles.stroke,fill:Ea.DefaultStyles.fill,text:Ea.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GPX&&e.vectorStyleOptions.GPX.defaultStyle?this.options.vectorStyleOptions.GPX.defaultStyle=e.vectorStyleOptions.GPX.defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle=new Style$1({image:Ea.DefaultStyles.image,stroke:Ea.DefaultStyles.stroke,fill:Ea.DefaultStyles.fill,text:Ea.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.GeoJSON&&e.vectorStyleOptions.GeoJSON.defaultStyle?this.options.vectorStyleOptions.GeoJSON.defaultStyle=e.vectorStyleOptions.GeoJSON.defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle=new Style$1({image:Ea.DefaultStyles.image,stroke:Ea.DefaultStyles.stroke,fill:Ea.DefaultStyles.fill,text:Ea.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.defaultStyle?this.options.vectorStyleOptions.MapBox.defaultStyle=e.vectorStyleOptions.MapBox.defaultStyle:this.options.vectorStyleOptions.MapBox.defaultStyle=new Style$1({image:Ea.DefaultStyles.image,stroke:Ea.DefaultStyles.stroke,fill:Ea.DefaultStyles.fill,text:Ea.DefaultStyles.text}),e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.editor?this.options.vectorStyleOptions.MapBox.editor=e.vectorStyleOptions.MapBox.editor:this.options.vectorStyleOptions.MapBox.editor={title:!0,collapse:!1,themes:!1,layers:!0,style:!0,filter:!1,legend:!0,group:!1},e.vectorStyleOptions&&e.vectorStyleOptions.MapBox&&e.vectorStyleOptions.MapBox.hasOwnProperty("display")?this.options.vectorStyleOptions.MapBox.display=e.vectorStyleOptions.MapBox.display:this.options.vectorStyleOptions.MapBox.display=!0,Array.isArray(e.layerTypes)){for(var t=[],ke=0;ke<e.layerTypes.length;ke++)t.push(e.layerTypes[ke]);this.options.layerTypes=t}Helper.mergeParams(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate(),this._waiting=!1,this._timer=null,this._initImportTypes(),this._initDefaultStyles(),this._showImportButton=null,this._importPanel=null,this._panelCloseButton=null,this._importPanelHeader=null,this._importPanelTitle=null,this._importPanelReturnPicto=null,this._formContainer=null,this._staticLocalImportInput=null,this._staticUrlImportInput=null,this._serviceUrlImportInput=null,this._getCapPanel=null,this._getCapPanelHeader=null,this._getCapResultsListContainer=null,this._mapBoxPanel=null,this._mapBoxPanelHeader=null,this._mapBoxResultsListContainer=null,this._waitingContainer=null,this._loadingContainer=null,this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMSLayers=[],this._getCapResponseWMTS=null,this._getCapResponseWMTSLayers=[],this._hasMapBoxResults=!1,this.contentStatic=null,this._url=null,this._file=null,this._name=null}_checkInputOptions(e){if(e.layerTypes){var t=e.layerTypes;if(!Array.isArray(t))logger$a.warn(`[ol.control.LayerImport] 'options.layerTypes' parameter should be an array. Set default values ["KML", "GPX", "GeoJSON", "WMS", "WMTS"]`),e.layerTypes=["KML","GPX","GeoJSON","WMS","WMTS","MAPBOX"];else{for(var ke=["KML","GPX","GEOJSON","WMS","WMTS","WFS","MAPBOX"],Ge=[],Be=0;Be<t.length;Be++)typeof t[Be]!="string"?(Ge.push(Be),logger$a.warn("[ol.control.LayerImport] 'options.layerTypes' elements should be of type string ("+t[Be]+")")):(t[Be]=t[Be].toUpperCase(),ke.indexOf(t[Be])===-1&&(Ge.push(Be),logger$a.log("[ol.control.LayerImport] options.layerTypes : "+t[Be]+" is not a supported type")),t[Be]==="GEOJSON"&&(t[Be]="GeoJSON"),t[Be]==="MAPBOX"&&(t[Be]="MAPBOX"));if(Ge.length!==0)for(var je=Ge.length-1;je>=0;je--)t.splice(Ge[je],1)}}}_initDefaultStyles(){var e=this.options.vectorStyleOptions.KML.defaultStyle;this._defaultKMLStyle=new Style$1({image:e.image,stroke:e.stroke,fill:e.fill,text:e.text});var t=this.options.vectorStyleOptions.GPX.defaultStyle;this._defaultGPXStyle=new Style$1({image:t.image,stroke:t.stroke,fill:t.fill,text:t.text});var ke=this.options.vectorStyleOptions.GeoJSON.defaultStyle;this._defaultGeoJSONStyle=new Style$1({image:ke.image,stroke:ke.stroke,fill:ke.fill,text:ke.text});var Ge=this.options.vectorStyleOptions.MapBox.defaultStyle;this._defaultMapBoxStyle=new Style$1({image:Ge.image,stroke:Ge.stroke,fill:Ge.fill,text:Ge.text})}_initImportTypes(){this._currentImportType=this.options.layerTypes[0]||"KML",this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1),this._currentStaticImportType="local"}_initContainer(){var e=this._createMainContainerElement(),t=this._showImportButton=this._createShowImportPictoElement();e.appendChild(t);var ke=this._importPanel=this._createImportPanelElement(),Ge=this._createImportPanelDivElement();ke.appendChild(Ge);var Be=this._importPanelHeader=this._createImportPanelHeaderElement(),je=this._importPanelReturnPicto=this._createImportPanelReturnPictoElement();Be.appendChild(je);var Ve=this._importPanelTitle=this._createImportPanelTitleElement();Be.appendChild(Ve);var Ze=this._panelCloseButton=this._createImportPanelCloseElement();Be.appendChild(Ze),Ge.appendChild(Be);var Qe=this._formContainer=this._initInputFormElement();Ge.appendChild(Qe);var en=this._getCapPanel=this._createImportGetCapPanelElement(),tn=this._getCapResultsListContainer=this._createImportGetCapResultsContainer();en.appendChild(tn),Ge.appendChild(en);var an=this._mapBoxPanel=this._createImportMapBoxPanelElement(),cn=this._mapBoxResultsListContainer=this._createImportMapBoxResultsContainer();an.appendChild(cn);var un=this._loadingContainer=this._createLoadingElement();an.appendChild(un),Ge.appendChild(an);var dn=this._waitingContainer=this._createImportWaitingElement();return Ge.appendChild(dn),e.appendChild(ke),e}_initInputFormElement(){var e=this._createImportPanelFormElement(),t=this._createImportTypeLineElement(this.options.layerTypes);e.appendChild(t);var ke=this._createImportStaticParamsContainer(this.options.layerTypes[0]),Ge=this._createStaticNameLabel();ke.appendChild(Ge);var Be=this._createStaticModeChoiceDiv(),je=this._createStaticLocalChoiceDiv();Be.appendChild(je);var Ve=this._createStaticUrlChoiceDiv();Be.appendChild(Ve),ke.appendChild(Be);var Ze=this._createStaticLocalInputDiv();Ze.appendChild(this._createStaticLocalInputLabel()),this._staticLocalImportInput=this._createStaticLocalInput(),Ze.appendChild(this._staticLocalImportInput),ke.appendChild(Ze);var Qe=this._createStaticUrlInputDiv();Qe.appendChild(this._createStaticUrlInputLabel()),this._staticUrlImportInput=this._createStaticUrlInput(),Qe.appendChild(this._staticUrlImportInput),ke.appendChild(Qe),e.appendChild(ke);var en=this._createServiceParamsContainer(this.options.layerTypes[0]),tn=this._createServiceUrlDiv();tn.appendChild(this._createServiceUrlInputLabel()),this._serviceUrlImportInput=this._createServiceUrlInput(),tn.appendChild(this._serviceUrlImportInput),en.appendChild(tn),e.appendChild(en);var an=this._createImportSubmitFormElement();return e.appendChild(an),e}_onShowImportClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._showImportButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this._hasMapBoxResults?(this._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),this._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):this._hasGetCapResults?(this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._hideFormContainer()):(this._getCapPanel.classList.replace("GPelementVisible","GPelementHidden"),this._getCapPanel.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden"),this._displayFormContainer())}_onImportTypeChange(e){this._currentImportType=e.target.value,this._currentImportType==="KML"||this._currentImportType==="GPX"||this._currentImportType==="GeoJSON"||this._currentImportType==="MAPBOX"?this._isCurrentImportTypeStatic=!0:(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&(this._isCurrentImportTypeStatic=!1)}_onStaticImportTypeChange(e){this._currentStaticImportType=e.target.value}_onGetCapPanelClose(){(this._currentImportType==="WMS"||this._currentImportType==="WMTS"||this._currentImportType==="WFS")&&this.cleanGetCapResultsList()}_onMapBoxPanelClose(){this.cleanMapBoxResultsList(),this._loadingContainer.className="",this._importPanelReturnPicto.classList.replace("GPelementVisible","GPelementHidden"),this._importPanelReturnPicto.classList.replace("gpf-visible","gpf-hidden"),this._mapBoxPanel.classList.replace("GPelementVisible","GPelementHidden"),this._mapBoxPanel.classList.replace("gpf-visible","gpf-hidden")}_onReturnPictoClick(e){this._onGetCapPanelClose(),this._onMapBoxPanelClose(),this._loadingContainer.className=""}_onImportSubmit(){logger$a.log("import d'une couche de type : "+this._currentImportType),this.contentStatic=null,this.contentService=null,this._isCurrentImportTypeStatic?(this.setCollapsed(!0),this._importStaticLayer()):this._importServiceLayers()}_importStaticLayer(){var e,t=document.getElementById(this._addUID("GPimportName"));t&&(e=t.value||"",logger$a.log("import layer name : "+e)),this._currentStaticImportType==="local"?(logger$a.log("import static layer from local file"),this._importStaticLayerFromLocalFile(e)):this._currentStaticImportType==="url"&&(logger$a.log("import static layer from url"),this._importStaticLayerFromUrl(e))}_importStaticLayerFromUrl(e){var t=this._staticUrlImportInput.value;if(logger$a.log("url : ",t),t.length===0){logger$a.error("[ol.control.LayerImport] url parameter is mandatory");return}t.trim&&(t=t.trim()),this._url=t,e||(e=this._url.substring(this._url.lastIndexOf("/")+1,this._url.lastIndexOf("."))),this._name=e,this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(t=ProxyUtils.proxifyUrl(t,this.options.webServicesOptions));var ke=this;Gp.Protocols.XHR.call({url:t,method:"GET",timeOut:15e3,onResponse:function(Ge){ke._hideWaitingContainer(),ke._addFeaturesFromImportStaticLayer(Ge,e)},onFailure:function(Ge){ke._hideWaitingContainer(),logger$a.error("[ol.control.LayerImport] KML/GPX/GeoJSON/MapBox request failed : ",Ge)}})}_importStaticLayerFromLocalFile(e){var t=this._staticLocalImportInput.files[0];if(!t){logger$a.warn("[ol.control.LayerImport] missing file");return}this._file=t,e||(e=this._file.name.substring(this._file.name.lastIndexOf("/")+1,this._file.name.lastIndexOf("."))),this._name=e;var ke=new FileReader,Ge=this;ke.onerror=Be=>{Ge._hideWaitingContainer(),logger$a.error("error fileReader : ",Be)},ke.onprogress=()=>{logger$a.log("onprogress")},ke.onloadstart=()=>{Ge._displayWaitingContainer(),logger$a.log("onloadstart")},ke.onabort=()=>{Ge._hideWaitingContainer(),logger$a.log("onabort")},ke.onloadend=Be=>{logger$a.log("onloadend : ",Be)},ke.onload=Be=>{logger$a.log("fileReader onload - file content : ",Be.target.result),Ge._hideWaitingContainer(),Ge._addFeaturesFromImportStaticLayer(Be.target.result,e)},ke.readAsText(t)}_addFeaturesFromImportStaticLayer(e,t){var ke=this.getMap();if(!(!ke||!e)){var Ge=null,Be=null,je=null,Ve=null;if(this.contentStatic=e,this._currentImportType==="MAPBOX"){this._hasMapBoxResults=!0;var Ze=this,Qe=JSON.parse(e),en=Qe.sources,tn=Object.keys(en).length>1?1:0;for(var an in en)if(en.hasOwnProperty(an)){var cn="",un="",dn=null,fn=null,pn=null,gn=null;if(Qe.metadata){for(var yn in Qe.metadata)if(Qe.metadata.hasOwnProperty(yn)){var vn=yn.split(":");if(vn[0]==="geoportail"){var An=vn[1];if(An==="title"){cn=Qe.metadata[yn];continue}if(An==="description"){un=Qe.metadata[yn];continue}if(An==="quicklookUrl"){dn=Qe.metadata[yn];continue}if(An==="legends"){fn=Qe.metadata[yn];continue}if(An==="metadata"){pn=Qe.metadata[yn];continue}if(An==="originators"){gn=Qe.metadata[yn];continue}}}}cn||(cn="Couche MapBox"),un||(un="Couche MapBox"),cn=tn?cn+"("+an+")":cn;var xn=en[an],wn=xn.type;if(wn==="vector"){var bn=xn.url,Mn=xn.tiles,Pn=Qe.sprite;if(bn&&bn.indexOf("mapbox://")===0){var En=this._url;if(En){if(Mn=["a","b","c","d"].map(function(Kn){var Fn=bn.replace("mapbox://",""),$i=En.split("?")[1];return"https://"+Kn+".tiles.mapbox.com/v4/"+Fn+"/{z}/{x}/{y}.vector.pbf?"+$i}),Pn.indexOf("mapbox://")===0){var Cn=En.split("?");Qe.sprite=Cn[0]+"/sprite?"+Cn[1]}}else logger$a.warn("Not yet implemented, can't use the local import scheme with a 'mapbox://' in the file.!")}if(Mn)je=new MVT({featureClass:Feature}),Be=new VectorTile({attributions:xn.attribution,format:je,urls:Mn}),Be._title=cn,Be._description=un,Be._quicklookUrl=dn,Be._metadata=pn,Be._legends=fn,Be._originators=gn,Be.on("tileloadstart",function(Kn){Ze._loadingContainer.className="GPmapLoadingVisible"}),Be.on("tileloadend",function(Kn){Ze._loadingContainer.className=""}),Be.on("tileloaderror",function(Kn){Ze._loadingContainer.className=""}),Ge=new VectorTileLayer({source:Be,visible:!1,declutter:!0}),Ge.id=an,Ge.gpResultLayerId="layerimport:"+this._currentImportType;else if(bn){je=new MVT({featureClass:Feature}),Ge=new VectorTileLayer({visible:!1,declutter:!0}),Ge.id=an,Ge.gpResultLayerId="layerimport:"+this._currentImportType;var Rn=new TileJSON({url:bn}),Tn=Rn.on("change",function(){if(Rn.getState()==="ready"){for(var Kn=Rn.getTileJSON(),Fn=Array.isArray(Kn.tiles)?Kn.tiles:[Kn.tiles],$i=0;$i<Fn.length;$i++){var Hi=Fn[$i];Hi.indexOf("http")!==0&&(Fn[$i]=bn+Hi)}Be=new VectorTile({attributions:Rn.getAttributions()||Kn.attribution,format:je,urls:Fn}),Be._title=cn,Be._description=un,Be._quicklookUrl=dn,Be._metadata=pn,Be._legends=fn,Be._originators=gn,Be.on("tileloadstart",function(Di){Ze._loadingContainer.className="GPmapLoadingVisible"}),Be.on("tileloadend",function(Di){Ze._loadingContainer.className=""}),Ge.setSource(Be),Ge.set("mapbox-extension",Kn.vector_layers),unByKey(Tn)}})}}else if(wn==="geojson"){var Nn=xn.data;je=new GeoJSON,Be=new VectorTile({attributions:xn.attribution,format:je,url:Nn}),Be._title=cn,Be._description=un,Be._quicklookUrl=dn,Be._metadata=pn,Be._legends=fn,Be._originators=gn,Ge=new VectorTileLayer({source:Be,visible:!1,declutter:!0}),Ge.id=an,Ge.gpResultLayerId="layerimport:"+this._currentImportType}else{logger$a.warn("Type MapBox format unknown !");return}var Gn=JSON.parse(JSON.stringify(Qe));if(tn){for(var zn=Gn.layers,$n=0;$n<zn.length;$n++){var Qn=zn[$n];if(Qn.source!==an){zn.splice($n,1);continue}}for(var Hn in Gn.sources)Gn.sources.hasOwnProperty(Hn)&&Hn!==an&&delete Gn.sources[Hn]}var Ni={id:an,styles:Gn,layer:Ge,options:{title:t||cn,description:un,quicklookUrl:dn,metadata:pn,legends:fn,originators:gn}};(function(Kn){var Fn=()=>{applyStyle(Kn.layer,Kn.styles,{source:Kn.id}).then(function(){var Di=!0;Kn.layer.setVisible(Di);var zi=1;Kn.layer.setOpacity(zi)}).then(function(){var Di=ke.getView().getProjection().getCode();ke.getView()&&Kn.styles.center&&Kn.styles.center.length&&ke.getView().setCenter(transform$1(Kn.styles.center,"EPSG:4326",Di)),ke.getView()&&(Kn.styles.zoom||Kn.styles.zoom===0)&&ke.getView().setZoom(Kn.styles.zoom);var zi=Kn.layer.getSource();if(ke.getView()&&ke.getSize()){var Bi=null;zi&&zi.getExtent?Bi=zi.getExtent():Bi=zi.getTileGrid().getExtent(),Bi&&Bi[0]!==1/0&&ke.getView().fit(Bi,ke.getSize())}}).then(function(){Ze._hideFormContainer(),Ze._importPanelHeader.classList.replace("GPelementVisible","GPelementHidden"),Ze._importPanelHeader.classList.replace("gpf-visible","gpf-hidden"),Ze._importPanelTitle.innerHTML="Edition des styles";var Di=new Editor({target:Ze._mapBoxResultsListContainer,style:JSON.parse(JSON.stringify(Kn.styles)),scope:this,events:{"editor:onloaded":Ze._onLoadedMapBox,"editor:layer:onclickvisibility":Ze._onChangeVisibilitySourceMapBox,"editor:style:scale:onchangemin":Ze._onChangeScaleMinSourceMapBox,"editor:style:scale:onchangemax":Ze._onChangeScaleMaxSourceMapBox,"editor:legend:onchangevalue":Ze._onChangeLegendValueSourceMapBox,"editor:legend:onclickedition":Ze._onDisplayLayerSourceMapBox},tools:Ze.options.vectorStyleOptions.MapBox.editor});return Di.setContext("map",ke),Di.setContext("layer",Kn.layer),Di.createElement().then(function(){if(Di.getLayers().length===0)throw new Error("Il n'existe pas de styles pour la source demandée !?")}).then(function(){Ze.options.vectorStyleOptions.MapBox.display&&(Ze._importPanelHeader.classList.replace("GPelementHidden","GPelementVisible"),Ze._importPanelHeader.classList.replace("gpf-hidden","gpf-visible"),Ze._mapBoxPanel.classList.replace("GPelementHidden","GPelementVisible"),Ze._mapBoxPanel.classList.replace("gpf-hidden","gpf-visible"),Ze._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),Ze._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"))}).then(function(){var zi=Ze._mapBoxResultsListContainer.getElementsByClassName("GPEditorMapBoxLayerTitleLabel");for(let Bi=0;Bi<zi.length;Bi++){const Gi=zi[Bi];Gi.textContent==="bckgrd"&&(Gi.textContent="Couleur de remplissage")}}).then(function(){Kn.layer.set("mapbox-editor",Di.getID()),setTimeout(function(){ke.dispatchEvent({id:Di.getID(),type:"editor:loaded",style:Kn.styles,layer:Kn.layer})},100)}).catch(function(zi){throw zi})}).then(function(){ke.dispatchEvent({id:Kn.id,type:"render:success",style:Kn.styles})}).catch(function(Di){logger$a.error(Di),ke.dispatchEvent({id:Kn.id,type:"render:failure",error:Di})})};logger$a.warn(Kn.layer);var $i=ke.get("mapbox-styles")||{},Hi=Kn.id;$i[Hi]=Kn.styles,ke.set("mapbox-styles",$i),Kn.layer.set("mapbox-styles",Kn.styles),ke.addLayer(Kn.layer),this.dispatchEvent({type:"layerimport:mapbox:added",name:t,data:e,layer:Kn.layer,format:this._currentImportType.toLowerCase()||"mapbox"}),Kn.layer.getSource()?Fn():Kn.layer.once("change:source",Fn),ke.getControls().forEach(Di=>{Di instanceof LayerSwitcher&&Di.addLayer(Kn.layer,Kn.options)})})(Ni)}}else{this._currentImportType==="KML"?(Ve=this.options.vectorStyleOptions.KML.defaultStyle,je=new KML({showPointNames:this.options.vectorStyleOptions.KML.showPointNames,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[Ve]})):this._currentImportType==="GPX"?(Ve=this.options.vectorStyleOptions.GPX.defaultStyle,je=new GPX({defaultStyle:Ve})):this._currentImportType==="GeoJSON"&&(Ve=this.options.vectorStyleOptions.GeoJSON.defaultStyle,je=new GeoJSON({defaultStyle:Ve}));var On=je.readProjection(e),qn=this._getMapProjectionCode(),Un=null;Un=je.readFeatures(e,{dataProjection:On,featureProjection:qn}),logger$a.log("loaded features : ",Un),Be=new VectorSource({features:new Collection}),Be.addFeatures(Un),logger$a.trace(Be),Be._title=Be._description=t,Ge=new VectorLayer({source:Be,style:Ve}),Ge.gpResultLayerId="layerimport:"+this._currentImportType;var Ci=je.readRootExtensions("geoportail:compute");if(Ci&&Object.keys(Ci).length!==0){var Si={route:{class:Route,name:"itineraire"},isocurve:{class:Isocurve,name:"isocurve"},elevationpath:{class:ElevationPath,name:"profil altimetrique"}},_i=Ci.type,Ii=Ci.transport;if(_i){var Li=Si[_i].name,Ri=Ii?Li+" ("+Ii+")":Li,tr=Si[_i].class;if(tr){Ge.gpResultLayerId="layerimport:COMPUTE",Ge.set("control",_i),Ge.set("name",Li),Ge.set("graph",Ii),Ge.set("data",Ci),Ge.set("title",Ri);var Fr=new GeoJSON({defaultStyle:Ve}),Bn=Fr.writeFeatures(Un,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"});Ge.set("geojson",Bn),this.getMap().getControls().forEach(Kn=>{Kn instanceof tr&&(Kn.setData(Ci),Kn.setLayer(Ge),Kn.init())})}}}if(ke.addLayer(Ge),ke.getView()&&ke.getSize()&&Be.getExtent){var Ai=Be.getExtent();Ai&&Ai[0]!==1/0&&ke.getView().fit(Ai,ke.getSize())}this.dispatchEvent({type:"layerimport:vector:added",name:t,data:e,layer:Ge,format:this._currentImportType.toLowerCase()})}}}_addFeaturesFromImportStaticLayerUrl(e,t){var ke=this.getMap();if(!(!ke||!e)){var Ge,Be,je;if(this._currentImportType==="MAPBOX"?logger$a.trace("Not yet implemented !"):(this._currentImportType==="KML"?je=new KML({showPointNames:!0,extractStyles:this.options.vectorStyleOptions.KML.extractStyles,defaultStyle:[this.options.vectorStyleOptions.KML.defaultStyle]}):this._currentImportType==="GPX"?je=new GPX({defaultStyle:this.options.vectorStyleOptions.GPX.defaultStyle}):this._currentImportType==="GeoJSON"&&(je=new GeoJSON({defaultStyle:this.options.vectorStyleOptions.GeoJSON.defaultStyle})),Ge=new VectorSource({url:e,format:je}),this._currentImportType==="GPX"&&Ge.forEachFeature(function(Ze){Ze.getStyle()==null&&(logger$a.log("[ol.control.LayerImport] set default style for GPX feature"),Ze.setStyle(this.options.vectorStyleOptions.GPX.defaultStyle))}),this._currentImportType==="GeoJSON"&&Ge.forEachFeature(function(Ze){Ze.getStyle()==null&&(logger$a.log("[ol.control.LayerImport] set default style for GeoJSON feature"),Ze.setStyle(this.options.vectorStyleOptions.GeoJSON.defaultStyle))}),Ge._title=Ge._description=t,Be=new VectorLayer({source:Ge})),Be.gpResultLayerId="layerimport:"+this._currentImportType,ke.addLayer(Be),ke.getView()&&ke.getSize()&&Ge.getExtent){var Ve=Ge.getExtent();Ve&&Ve[0]!==1/0&&ke.getView().fit(Ve,ke.getSize())}this.dispatchEvent({type:"layerimport:vector:added",name:t,url:e,layer:Be,format:this._currentImportType.toLowerCase()})}}_onLoadedMapBox(e){var t=e.target.data.obj,ke=this.getContext("layer");ke.get("mapbox-source")===t.source&&(ke.get("mapbox-editor"),e.target.editorID)}_onChangeVisibilitySourceMapBox(e){var t=e.target.data.obj,ke=e.target.srcElement,Ge=this.getContext("layer");if(Ge.get("mapbox-source")===t.source&&Ge.get("mapbox-editor")===e.target.editorID){for(var Be=Ge.get("mapbox-styles"),je=Be.layers,Ve=0;Ve<je.length;Ve++)if(je[Ve].id===t.id){var Ze=je[Ve].layout;Ze?Ze.visibility=ke.checked?"visible":"none":je[Ve].layout={visibility:ke.checked?"visible":"none"};break}applyStyle(Ge,Be,{source:t.source}).then(function(){}).catch(function(Qe){logger$a.error(Qe)})}}_onChangeScaleMinSourceMapBox(e){var t=e.target.data.obj,ke=e.target.srcElement,Ge=this.getContext("layer");if(Ge.get("mapbox-source")===t.source&&Ge.get("mapbox-editor")===e.target.editorID){for(var Be=Ge.get("mapbox-styles"),je=Be.layers,Ve=0;Ve<je.length;Ve++)if(je[Ve].id===t.id){je[Ve].minzoom=ke.value,ke.title=ke.value;break}applyStyle(Ge,Be,{source:t.source}).then(function(){}).catch(function(Ze){logger$a.error(Ze)})}}_onChangeScaleMaxSourceMapBox(e){var t=e.target.data.obj,ke=e.target.srcElement,Ge=this.getContext("layer");if(Ge.get("mapbox-source")===t.source&&Ge.get("mapbox-editor")===e.target.editorID){for(var Be=Ge.get("mapbox-styles"),je=Be.layers,Ve=0;Ve<je.length;Ve++)if(je[Ve].id===t.id){je[Ve].maxzoom=ke.value,ke.title=ke.value;break}applyStyle(Ge,Be,{source:t.source}).then(function(){}).catch(function(Ze){logger$a.error(Ze)})}}_onChangeLegendValueSourceMapBox(e){var t=e.target.data.obj,ke=e.target.srcElement,Ge=this.getContext("layer");if(Ge.get("mapbox-source")===t.source&&Ge.get("mapbox-editor")===e.target.editorID){for(var Be=Ge.get("mapbox-styles"),je=Be.layers,Ve=0;Ve<je.length;Ve++)if(je[Ve].id===t.id){var Ze=je[Ve].paint;Ze&&(Ze[ke.dataset.id]=ke.value);break}applyStyle(Ge,Be,{source:t.source,updateSource:!0}).then(function(){}).catch(function(Qe){logger$a.error(Qe)})}}_onDisplayLayerSourceMapBox(e){var t=e.target.data.obj,ke=this.getContext("layer");if(ke.get("mapbox-source")===t.source&&ke.get("mapbox-editor")===e.target.editorID){var Ge=e.target.currentTarget.parentNode.id,Be=Ge.substring(Ge.indexOf("-")+1,Ge.indexOf("_")),je=this.getLayer(Be);je.collapse()}}_importServiceLayers(){if(this._currentImportType==="WFS"){logger$a.warn("[ol.control.LayerImport] WFS layer import is not implemented yet");return}this.cleanGetCapResultsList();var e=this._getCapRequestUrl=this._serviceUrlImportInput.value;if(!e){logger$a.error("[ol.control.LayerImport] url parameter is mandatory");return}logger$a.log("url : ",e),e.trim&&(e=e.trim());var t=e.indexOf("?");t<0?e+="?SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities":t===e.length-1&&(e+="SERVICE="+this._currentImportType+"&REQUEST=GetCapabilities"),this.options.webServicesOptions&&this.options.webServicesOptions.proxyUrl&&(e=ProxyUtils.proxifyUrl(e,this.options.webServicesOptions)),this._displayWaitingContainer();var ke=this;Gp.Protocols.XHR.call({url:e,method:"GET",timeOut:15e3,onResponse:function(Ge){ke._hideWaitingContainer(),ke._displayGetCapResponseLayers(Ge)},onFailure:function(Ge){ke._hideWaitingContainer(),logger$a.error("[ol.control.LayerImport] getCapabilities request failed : ",Ge)}})}_displayGetCapResponseLayers(e){var t,ke,Ge={content:null,title:null},Be;if(this._getCapResponseWMSLayers=[],this.contentService=e,this._hideFormContainer(),this._getCapPanel.classList.replace("GPelementHidden","GPelementVisible"),this._getCapPanel.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Couches accessibles",this._importPanelReturnPicto.classList.replace("GPelementHidden","GPelementVisible"),this._importPanelReturnPicto.classList.replace("gpf-hidden","gpf-visible"),this._hasGetCapResults=!0,this._currentImportType==="WMS"){t=new WMSCapabilities;var je=this._getCapResponseWMS=t.read(e);if(logger$a.log("getCapabilities response : ",je),je&&je.Capability&&je.Capability.Layer){var Ve=je.Capability.Layer;if(Array.isArray(Ve))for(var Ze=0;Ze<Ve.length;Ze++)this._displayGetCapResponseWMSLayer(Ve[Ze]);else this._displayGetCapResponseWMSLayer(Ve)}}else if(this._currentImportType==="WMTS"){t=new WMTSCapabilities;var Qe=this._getCapResponseWMTS=t.read(e);if(logger$a.log("getCapabilities response : ",Qe),Qe&&Qe.Contents&&Qe.Contents.Layer&&(ke=Qe.Contents.Layer,Array.isArray(ke))){this._getCapResponseWMTSLayers=ke;for(var en=0;en<ke.length;en++)if(Be=this._getWMTSLayerProjection(ke[en],Qe),Be&&typeof Be=="string")if(get$3(Be)||get$3(Be.toUpperCase()))Ge={content:ke[en].Title,title:ke[en].Abstract||ke[en].Title},this._getCapResultsListContainer&&this._addImportGetCapResultLayer(Ge,en,this._getCapResultsListContainer);else{logger$a.warn("[ol.control.LayerImport] wmts layer cannot be added to map : unknown projection",ke[en]);continue}}}}_displayGetCapResponseWMSLayer(e,t){if(!e){logger$a.warn("[ol.control.LayerImport] _displayGetCapResponseWMSLayer : getCapabilities layer object not found");return}logger$a.log("[ol.control.LayerImport] _displayGetCapResponseWMSLayer - layerObj : ",e);var ke=this._getMapProjectionCode(),Ge,Be={content:null,title:null};if(t){var je,Ve,Ze=["CRS","Style"];for(Ve=0;Ve<Ze.length;Ve++)if(je=Ze[Ve],Array.isArray(t[je])&&t[je].length!==0)if(Array.isArray(e[je])&&e[je].length!==0)for(var Qe=0;Qe<t[je].length;Qe++)e[je].indexOf(t[je][Qe])===-1&&e[je].push(t[je][Qe]);else e[je]=t[je];var en=["BoundingBox","EX_GeographicBoundingBox","MaxScaleDenominator","MinScaleDenominator","Attribution","Dimension","queryable","cascaded","opaque","noSubsets","fixedWidth","fixedHeight"];for(Ve=0;Ve<en.length;Ve++)je=en[Ve],t[je]&&!e[je]&&(e[je]=t[je])}else e._isRootLayer=!0,e._container=this._getCapResultsListContainer,e.Title||(e.Title="Liste des couches");if(e.Layer){if(Array.isArray(e.Layer)){var tn=e?e._container:t._container,an=e?e.Title:t.Title;e._container=this._addImportGetCapResultListRubrique(an,tn).lastChild;for(var cn=0;cn<e.Layer.length;cn++){for(var un=!1,dn=e._container.getElementsByClassName("GPimportGetCapRubriqueTitle"),fn=0;fn<dn.length;fn++)dn[fn].title===e.Title&&(un=!0,e.Layer[cn]._container=dn[fn].parentElement);un||(e.Layer[cn]._container=this._addImportGetCapResultRubrique(e.Title,e._container).lastChild),this._displayGetCapResponseWMSLayer(e.Layer[cn],e)}}}else{var pn=this._getCapResponseWMSLayers.length;if(Ge=this._getWMSLayerProjection(e,ke),!Ge)logger$a.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection",e);else{e._projection=Ge,Be={content:e.Title,title:e.Abstract||e.Title};var gn=e._container;gn.localName==="ul"&&(gn=gn.lastChild),this._addImportGetCapResultLayer(Be,pn,gn),this._getCapResponseWMSLayers[pn]=e}}}_onGetCapResponseLayerClick(e){if(e.target&&e.target.id){var t=parseInt(e.target.id.substr(23),10);if(isNaN(t))return;var ke;this._currentImportType==="WMS"?(ke=this._getCapResponseWMSLayers[t],this._addGetCapWMSLayer(ke)):this._currentImportType==="WMTS"&&(ke=this._getCapResponseWMTSLayers[t],this._addGetCapWMTSLayer(ke))}}_addGetCapWMSLayer(e){var t=this.getMap();if(!t){logger$a.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : map is not defined");return}if(!e){logger$a.warn("[ol.control.LayerImport] _addGetCapWMSLayer error : layerInfo is not defined");return}var ke=this._getMapProjectionCode(),Ge={},Be=this._getWMSLayerGetMapUrl();if(Be)Ge.url=Be;else{var je=this._getCapRequestUrl.indexOf("?");je!==-1?Ge.url=this._getCapRequestUrl.substring(0,je):Ge.url=this._getCapRequestUrl}if(Ge.params={},e.Name)Ge.params.LAYERS=e.Name;else{logger$a.warn("[ol.control.LayerImport] unable to add wms layer : mandatory layer 'name' parameter cannot be found",e);return}Ge.params.SERVICE="WMS",this._getCapResponseWMS.version&&(Ge.params.VERSION=this._getCapResponseWMS.version);var Ve=e._projection;if(Ve)Ve!==ke&&(Ge.projection=Ve);else{logger$a.warn("[ol.control.LayerImport] wms layer cannot be added to map : unknown projection");return}var Ze;if(e.Style&&Array.isArray(e.Style)){var Qe=e.Style[0];Ge.params.STYLES=Qe.Name,Qe.LegendURL&&Array.isArray(Qe.LegendURL)&&Qe.LegendURL.length!==0&&(Ze=Qe.LegendURL[0].OnlineResource)}var en=new TileWMS(Ge);this._getWMSLayerInfoForLayerSwitcher(e,Ze,en);var tn={};tn.source=en,this._getWMSLayerMinMaxResolution(e,ke,tn),this._getWMSLayerExtent(e,ke,tn);var an=new TileLayer(tn);if(an.setExtent(tn.extent),an.gpResultLayerId="layerimport:WMS",e.queryable&&(an.gpGFIparams={queryable:!0},this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo&&this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format&&Array.isArray(this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)&&(an.gpGFIparams.formats=this._getCapResponseWMS.Capability.Request.GetFeatureInfo.Format)),t.addLayer(an),t.getView()&&t.getSize()&&an.getExtent){var cn=an.getExtent();cn&&cn[0]!==1/0&&t.getView().fit(cn,t.getSize())}this.dispatchEvent({type:"layerimport:service:added",name:e.Name,data:e,layer:an,format:"wms"})}_getWMSLayerGetMapUrl(){var e;if(this._getCapResponseWMS&&this._getCapResponseWMS.Capability&&this._getCapResponseWMS.Capability.Request&&this._getCapResponseWMS.Capability.Request.GetMap){var t=this._getCapResponseWMS.Capability.Request.GetMap;if(t.DCPType&&Array.isArray(t.DCPType)&&t.DCPType.length!==0){var ke=t.DCPType[0];ke&&ke.HTTP&&ke.HTTP.Get&&(e=ke.HTTP.Get.OnlineResource)}}return e}_getWMSLayerProjection(e,t){var ke;if(!e||typeof e!="object"){logger$a.warn("missing layer information (from getCapabilities)");return}var Ge=e.CRS;if(Array.isArray(Ge)){if(Ge.includes(t))return ke=t,ke;var Be,je;for(je=0;je<Ge.length;je++)if(Be=Ge[je],Be&&typeof Be=="string"&&(get$3(Be)||get$3(Be.toUpperCase())))return ke=Be,ke}return ke}_getWMSLayerMinMaxResolution(e,t,ke){var Ge=get$3(t).getUnits();if(Ge==="m")e.MinScaleDenominator&&(ke.minResolution=e.MinScaleDenominator*28e-5),e.MaxScaleDenominator&&(ke.maxResolution=e.MaxScaleDenominator*28e-5);else if(Ge==="degrees"){var Be=.05039999999999999/(Math.PI*6378137);e.MinScaleDenominator&&(ke.minResolution=e.MinScaleDenominator*Be),e.MaxScaleDenominator&&(ke.maxResolution=e.MaxScaleDenominator*Be)}}_getWMSLayerExtent(e,t,ke){if(!e){logger$a.warn("[ol.control.LayerImport] _getWMSLayerExtent error : layerInfo is not defined");return}var Ge=e.EX_GeographicBoundingBox,Be=e.BoundingBox;if(Ge&&Array.isArray(Ge))t==="EPSG:4326"?ke.extent=Ge:ke.extent=transformExtent(Ge,"EPSG:4326",t);else if(Be&&Array.isArray(Be)){for(var je,Ve,Ze=0;Ze<Be.length;Ze++)if(je=Be[Ze].crs,Ve=Be[Ze].extent,je){if(je===t){ke.extent=Ve;break}else if(typeof je=="string"){var Qe=get$3(je)?get$3(je):get$3(je.toUpperCase());if(Qe){if(Qe.getUnits()==="degrees"&&je.toUpperCase().indexOf("EPSG")===0){var en=[Ve[1],Ve[0],Ve[3],Ve[2]];ke.extent=transformExtent(en,Qe,t)}else ke.extent=transformExtent(Ve,Qe,t);break}}}}}_getWMSLayerInfoForLayerSwitcher(e,t,ke){if(e.Title?(ke._title=e.Title,ke._description=e.Abstract?e.Abstract:e.Title):(ke._title=e.Name,ke._description=e.Abstract?e.Abstract:e.Name),t&&(ke._legends=[{url:t}]),e.MetadataURL&&Array.isArray(e.MetadataURL)){ke._metadata=[];for(var Ge=0;Ge<e.MetadataURL.length;Ge++){var Be=e.MetadataURL[Ge].OnlineResource;Be&&ke._metadata.push({url:Be})}}if(e.Attribution){var je=e.Attribution;ke._originators={},je.OnlineResource&&(ke._originators.url=je.OnlineResource),je.Title&&(ke._originators.name=ke._originators.attribution=je.Title),je.LogoURL&&je.LogoURL.OnlineResource&&(ke._originators.logo=je.LogoURL.OnlineResource)}}_addGetCapWMTSLayer(e){if(!e||!e.Identifier){logger$a.warn("[ol.control.LayerImport] layer information not found in getCapabilities response for layer ");return}var t=this.getMap();if(t){var ke={};ke.layer=e.Identifier,this._getCapResponseWMTS.version&&(ke.version=this._getCapResponseWMTS.version);var Ge=this._getWMTSLayerGetTileUrl();if(Ge)ke.url=Ge;else{var Be=this._getCapRequestUrl.indexOf("?");Be!==-1?ke.url=this._getCapRequestUrl.substring(0,Be):ke.url=this._getCapRequestUrl}var je=this._getTMSParams(e);ke.matrixSet=je.tms,ke.projection=je.projCode,ke.tileGrid=new WMTSTileGrid({resolutions:je.resolutions,matrixIds:je.matrixIds,origin:je.origin});var Ve,Ze;if(e.Style&&Array.isArray(e.Style))for(var Qe,en=0;en<e.Style.length&&(Qe=e.Style[en],Ve=Qe.Identifier,!Qe.isDefault);en++)Qe.LegendURL&&Array.isArray(Qe.LegendURL)&&Qe.LegendURL.length!==0&&(Ze=Qe.LegendURL[0].href);Ve==null&&logger$a.warn("[ol.control.LayerImport] style information not found in getCapabilities response for layer "+e.Identifier),ke.style=Ve;var tn;e.Format&&Array.isArray(e.Format)&&(tn=e.Format[0]),tn==null&&logger$a.warn("[ol.control.LayerImport] format information not found in getCapabilities response for layer "+e.Identifier),ke.format=tn;var an=new WMTS$1(ke);e.Title?(an._title=e.Title,an._description=e.Abstract?e.Abstract:e.Title):(an._title=e.Identifier,an._description=e.Abstract?e.Abstract:e.Identifier),Ze&&(an._legends=[{url:Ze}]);var cn={};cn.source=an,cn.extent=this._getWMTSLayerExtent(e);var un;try{un=new TileLayer(cn),un.setExtent(cn.extent)}catch(fn){logger$a.warn("[ol.control.LayerImport] an error occured while trying to create ol.layer.Tile from getCapabilities information. error : ",fn);return}if(un.gpResultLayerId="layerimport:WMTS",t.addLayer(un),t.getView()&&t.getSize()&&un.getExtent){var dn=un.getExtent();dn&&dn[0]!==1/0&&t.getView().fit(dn,t.getSize())}this.dispatchEvent({type:"layerimport:service:added",name:e.Identifier,data:e,layer:un,format:"wmts"})}}_getWMTSLayerGetTileUrl(){var e;if(this._getCapResponseWMTS&&this._getCapResponseWMTS.OperationsMetadata&&this._getCapResponseWMTS.OperationsMetadata.GetTile){var t=this._getCapResponseWMTS.OperationsMetadata.GetTile;t.DCP&&t.DCP.HTTP&&t.DCP.HTTP.Get&&Array.isArray(t.DCP.HTTP.Get)&&t.DCP.HTTP.Get.length!==0&&(e=t.DCP.HTTP.Get[0].href)}return e}_getWMTSLayerProjection(e,t){var ke;if(!e||typeof e!="object"){logger$a.warn("missing layer information (from getCapabilities)");return}if(!t||typeof t!="object"){logger$a.warn("missing getCapabilities response");return}if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink)){var Ge=e.TileMatrixSetLink[0].TileMatrixSet,Be;if(t.Contents&&Array.isArray(t.Contents.TileMatrixSet)){for(var je=t.Contents.TileMatrixSet,Ve=0;Ve<je.length;Ve++)if(je[Ve].Identifier===Ge&&je[Ve].TileMatrix){var Ze=je[Ve];Be=Ze.SupportedCRS,Be&&typeof Be=="string"&&(get$3(Be)||get$3(Be.toUpperCase()))&&(ke=Be);break}}}return ke}_getTMSParams(e){var t={},ke=[],Ge=[],Be=[],je,Ve,Ze,Qe=this.getMap();if(Qe){if(e.TileMatrixSetLink&&Array.isArray(e.TileMatrixSetLink))if(je=e.TileMatrixSetLink[0].TileMatrixSet,this._getCapResponseWMTS.Contents&&Array.isArray(this._getCapResponseWMTS.Contents.TileMatrixSet)){for(var en=this._getCapResponseWMTS.Contents.TileMatrixSet,tn=0;tn<en.length;tn++)if(en[tn].Identifier===je&&en[tn].TileMatrix){var an=en[tn],cn,un,dn,fn,pn;if(an.SupportedCRS&&(Ve=an.SupportedCRS,Ze=get$3(Ve)),Ze&&Ze.getUnits&&(pn=Ze.getUnits()),Array.isArray(an.TileMatrix))for(var gn=0;gn<an.TileMatrix.length;gn++)cn=an.TileMatrix[gn],cn.Identifier!=null&&(un=parseInt(cn.Identifier,10),ke.push(un)),dn=cn.ScaleDenominator,pn==="degrees"?fn=dn*28e-5*180/(Math.PI*6378137):fn=dn*28e-5,Ge.push(fn),Be=cn.TopLeftCorner;Ge.sort!==void 0&&Ge.sort(function(yn,vn){return vn-yn}),ke.sort!==void 0&&ke.sort(function(yn,vn){return yn-vn})}}else logger$a.warn("[ol.control.LayerImport] TileMatrixSet data not found in getCapabilities response for layer "+e.Identifier);else return;return t.tms=je,t.projCode=Ve,t.matrixIds=ke,t.resolutions=Ge,t.origin=Be,t}}_getWMTSLayerExtent(e){var t,ke=this._getMapProjectionCode();return e.WGS84BoundingBox&&Array.isArray(e.WGS84BoundingBox)&&(t=transformExtent(e.WGS84BoundingBox,"EPSG:4326",ke)),t}_getMapProjectionCode(){var e=this.getMap();if(!e||!e.getView||!e.getView().getProjection){logger$a.warn("unable to get layerimport's map");return}var t=e.getView().getProjection().getCode();return t}_displayWaitingContainer(){this._waitingContainer.className="GPwaitingContainer GPwaitingContainerVisible gpf-waiting gpf-waiting--visible",this._waiting=!0,this._timer&&(clearTimeout(this._timer),this._timer=null);var e=this;this._timer=setTimeout(function(){e._waiting===!0?e._hideWaitingContainer():e._timer&&clearTimeout(e._timer)},16e3)}_hideWaitingContainer(){this._waiting&&(this._waitingContainer.className="GPwaitingContainer GPwaitingContainerHidden gpf-waiting gpf-waiting--hidden",this._waiting=!1,clearTimeout(this._timer),this._timer=null)}_displayFormContainer(){this._formContainer.classList.replace("GPelementHidden","GPelementVisible"),this._formContainer.classList.replace("gpf-hidden","gpf-visible"),this._importPanelTitle.innerHTML="Import de données"}_hideFormContainer(){this._formContainer.classList.replace("GPelementVisible","GPelementHidden"),this._formContainer.classList.replace("gpf-visible","gpf-hidden")}cleanGetCapResultsList(){if(this._hasGetCapResults=!1,this._getCapRequestUrl=null,this._getCapResponseWMS=null,this._getCapResponseWMTS=null,this._getCapResponseWMSLayers=null,this._getCapResponseWMTSLayers=null,this._getCapResultsListContainer)for(;this._getCapResultsListContainer.firstChild;)this._getCapResultsListContainer.removeChild(this._getCapResultsListContainer.firstChild)}cleanMapBoxResultsList(){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer)for(;this._mapBoxResultsListContainer.firstChild;)this._mapBoxResultsListContainer.removeChild(this._mapBoxResultsListContainer.firstChild)}cleanMapBoxResults(e){if(this._hasMapBoxResults=!1,this._mapBoxResultsListContainer){var t=this._mapBoxResultsListContainer.childNodes;for(let ke=0;ke<t.length;ke++){const Ge=t[ke];Ge.id==="GPEditorMapBoxContainer_ID_"+e&&Ge.remove()}}}},Qc(Ea,"DefaultStyles",{image:new Icon({src:Marker.lightOrange,anchor:[25.5,38],anchorOrigin:"top-left",anchorXUnits:"pixels",anchorYUnits:"pixels"}),stroke:new Stroke({color:"rgba(0,42,80,0.8)",width:4}),fill:new Fill({color:"rgba(0, 183, 152, 0.5)"}),text:new Text({font:"16px Sans",textAlign:"left",fill:new Fill({color:"rgba(255, 255, 255, 1)"}),stroke:new Stroke({color:"rgba(0, 0, 0, 1)",width:2})})}),Ea);Object.assign(LayerImport.prototype,LayerImportDOM);Object.assign(LayerImport.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.LayerImport=LayerImport);var logger$9=LoggerByDefault.getLogger("geoportalattribution"),GeoportalAttribution=class uf extends Attribution{constructor(e){if(e=e||{},e.collapsible=!0,e.collapsed=!0,super(e),!(this instanceof uf))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this}setMap(e){if(e!=null){var t=e.getControls();t.forEach(ke=>{if(!(ke instanceof uf)&&ke){for(var Ge=ke.element.classList,Be=0;Be<Ge.length;Be++)if(Ge[Be]==="ol-attribution"){t.remove(ke);break}}}),this._updateAttributions(e),e.on("moveend",()=>{this._updateAttributions(e)}),e.getLayers().on("add",()=>{this._updateAttributions(e)}),e.getLayers().on("remove",()=>{this._updateAttributions(e)})}super.setMap(e)}_updateAttributions(e){for(var t={},ke=e.getView(),Ge=ke.calculateExtent(e.getSize()),Be=ke.getProjection().getCode(),je=transformExtent(Ge,Be,"EPSG:4326"),Ve=[je[3],je[0],je[1],je[2]],Ze=ke.getZoom(),Qe=e.getLayers().getArray(),en=0;en<Qe.length;en++)if(Qe[en].getSource)this._updateLayerAttributions(Qe[en],t,Ve,Be,Ze);else if(Qe[en].getLayers){var tn=Qe[en].getLayers();tn.forEach(an=>{an.getSource?this._updateLayerAttributions(an,t,Ve,Be,Ze):logger$9.log("cannot find layer source in layergroup ",Qe[en])})}}_updateLayerAttributions(e,t,ke,Ge,Be){if(!e){logger$9.trace("layer is null !?");return}var je=e.getSource();if(!je){logger$9.trace("source is not yet loaded !");return}t||(t={});var Ve=[],Ze=e.getVisible(),Qe=je._originators;if(typeof Qe<"u"&&je.setAttributions(),Qe&&Ze){for(var en=LayerUtils.getAttributions({extent:ke,crs:Ge,zoom:Be,visibility:Ze,originators:Qe}),tn=0;tn<en.length;tn++){var an=en[tn];t.hasOwnProperty(an)||(Ve.push(an),t[an]=!0)}Ve.length!==0&&(je.setAttributions(Ve),this.dispatchEvent({type:"attributions:update",attributions:Ve}))}}};window.ol&&window.ol.control&&(window.ol.control.GeoportalAttribution=GeoportalAttribution);var MeasureLengthDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPmeasureLength"),Oe.className="GPwidget gpf-widget gpf-widget-button",Oe},_createShowMeasureLengthPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureLengthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-length fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une distance"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowMeasureLengthClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowMeasureLengthClick(ke)}),e}},logger$8=LoggerByDefault.getLogger("measurelength"),MeasureLength=class ip extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ip))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureLength",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$8.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(ke.gpShareMeasures||(ke.gpShareMeasures={}),ke.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$8.trace("call MeasureLength::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.unit=typeof e.unit<"u"?e.unit:null,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de distance",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$8.trace("call MeasureLength::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureLengthPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$8.trace("call MeasureLength::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$8.trace("call MeasureLength::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandle(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$8.trace("call MeasureLength::format()");var t=this.getMap(),ke;if(this.options.geodesic){var Ge=e.getCoordinates();ke=0;for(var Be=t.getView().getProjection(),je=0,Ve=Ge.length-1;je<Ve;++je){var Ze=transform$1(Ge[je],Be,"EPSG:4326"),Qe=transform$1(Ge[je+1],Be,"EPSG:4326");ke+=getDistance(Ze,Qe)}}else ke=Math.round(e.getLength()*100)/100;var en;return this.options.unit==="km"?en=Math.round(ke/1e3*100)/100+" km":this.options.unit==="m"?en=Math.round(ke*100)/100+" m":ke>1e3?en=Math.round(ke/1e3*100)/100+" km":en=Math.round(ke*100)/100+" m",en}onShowMeasureLengthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$8.trace("call MeasureLength::onShowMeasureLengthClick()",e),this.onShowMeasureClick(e,"LineString")}};Object.assign(MeasureLength.prototype,Measures);Object.assign(MeasureLength.prototype,MeasureLengthDOM);Object.assign(MeasureLength.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureLength=MeasureLength);var MeasureAreaDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPmeasureArea"),Oe.className="GPwidget gpf-widget gpf-widget-button",Oe},_createShowMeasureAreaPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureAreaPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-area fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer une surface"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowMeasureAreaClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowMeasureAreaClick(ke)}),e}},logger$7=LoggerByDefault.getLogger("measurearea"),MeasureArea=class rp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof rp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureArea",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$7.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(ke.gpShareMeasures||(ke.gpShareMeasures={}),ke.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this._container}_initialize(e){logger$7.trace("call MeasureArea::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!0,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures de surface",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$7.trace("call MeasureArea::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAreaPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$7.trace("call MeasureArea::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveHandler(t)),e.on("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$7.trace("call MeasureArea::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveHandler(t)),e.un("pointermove",t=>this.onPointerMoveHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$7.trace("call MeasureArea::format()");var t;if(this.options.geodesic){var ke=e.clone(),Ge=ke.getLinearRing(0).getCoordinates();t=Math.abs(getArea(new Polygon([Ge])))}else t=e.getArea();var Be;return t>1e6?Be=Math.round(t/1e6*100)/100+" km<sup>2</sup>":t>1e5?Be=Math.round(t/1e6*1e3)/1e3+" km<sup>2</sup>":t>1e3?Be=Math.round(t/10)*10+" m<sup>2</sup>":Be=Math.round(t*100)/100+" m<sup>2</sup>",Be}onShowMeasureAreaClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$7.trace("call MeasureArea::onShowMeasureAreaClick()",e),this.onShowMeasureClick(e,"Polygon")}};Object.assign(MeasureArea.prototype,Measures);Object.assign(MeasureArea.prototype,MeasureAreaDOM);Object.assign(MeasureArea.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureArea=MeasureArea);var MeasureAzimuthDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPmeasureAzimuth"),Oe.className="GPwidget gpf-widget gpf-widget-button",Oe},_createShowMeasureAzimuthPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowMeasureAzimuthPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-azimuth fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Mesurer un azimut"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowMeasureAzimuthClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowMeasureAzimuthClick(ke)}),e}},logger$6=LoggerByDefault.getLogger("measureazimut"),MeasureAzimuth=class op extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof op))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="MeasureAzimuth",this._uid=e.id||SelectorID.generate(),this._pictoContainer=null,this._initialize(e),this._container=this._initializeContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){logger$6.trace("setMap()");var t=this.CLASSNAME;e?!this.options.target&&!this.options.position&&MeasureToolBox.add(e,this):this.clean(),this.tools[t].push({instance:e?this:null,active:!1,map:e?e.getTargetElement():null});var ke=typeof window<"u"?window:typeof self<"u"?self:null;ke&&(ke.gpShareMeasures||(ke.gpShareMeasures={}),ke.gpShareMeasures[t]=this.tools[t]),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setGeodesic(e){this.options.geodesic=typeof e<"u"?e:!1}isGeodesic(){return this.options.geodesic}getContainer(){return this._container}_initialize(e){logger$6.trace("call MeasureAzimuth::_initialize() : ",e),this.options={},this.options.geodesic=typeof e.geodesic<"u"?e.geodesic:!1,this.options.position=typeof e.position<"u"?e.position:null,this.options.target=typeof e.target<"u"?e.target:null,this.options.render=typeof e.render<"u"?e.render:null,this.options.gutter=typeof e.gutter<"u"?e.gutter:null,this.options.layerDescription=typeof e.layerDescription<"u"?e.layerDescription:{title:"Mesures d'azimuth",description:"Mes mesures"},this.createStylingMeasureInteraction(e.styles)}_initializeContainer(){logger$6.trace("call MeasureAzimuth::_initializeContainer() : ",this._uid);var e=this._createMainContainerElement(),t=this._pictoContainer=this._createShowMeasureAzimuthPictoElement();return e.appendChild(t),e}addMeasureEvents(){logger$6.trace("call MeasureAzimuth::addMeasureEvents()");var e=this.getMap();e.on("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.on("pointermove",t=>this.onPointerMoveAzimutHandler(t)),this.eventLayerRemove=e.getLayers().on("remove",t=>{t.element===this.measureVector&&this.clean()})}removeMeasureEvents(){logger$6.trace("call MeasureAzimuth::removeMeasureEvents()");var e=this.getMap();e.un("singleclick",t=>this.onPointerMoveAzimutHandler(t)),e.un("pointermove",t=>this.onPointerMoveAzimutHandler(t)),this.eventLayerRemove&&unByKey(this.eventLayerRemove)}format(e){logger$6.trace("call MeasureAzimuth::format()");var t=this.getMap(),ke=t.getView().getProjection(),Ge=transform$1(e.getFirstCoordinate(),ke,"EPSG:4326"),Be=transform$1(e.getLastCoordinate(),ke,"EPSG:4326");if(!this.options.geodesic){var je=getDistance(Ge,Be);if(logger$6.trace("measure between 2 points with geodesic method",je),je>500){var Ve=500/je;logger$6.trace("%",Ve),Be=transform$1(e.getCoordinateAt(Ve),ke,"EPSG:4326")}}var Ze=Math.PI/180,Qe=180/Math.PI,en=Ze*Ge[0],tn=Ze*Be[0],an=Ze*Ge[1],cn=Ze*Be[1],un=Math.sin(tn-en)*Math.cos(cn),dn=Math.cos(an)*Math.sin(cn)-Math.sin(an)*Math.cos(cn)*Math.cos(tn-en),fn=Math.atan2(un,dn),pn=Qe*fn;logger$6.trace("azimut",pn),pn<0&&(pn+=360);var gn=Math.round(pn*100)/100+" °";return gn}onShowMeasureAzimuthClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$6.trace("call MeasureAzimuth::onShowMeasureAzimuthClick()",e),this.onShowMeasureClick(e,"LineString")}onPointerMoveAzimutHandler(e){if(this.onPointerMoveHandler(e),this.sketch){var t=this.sketch.getGeometry();t.getCoordinates().length>2&&this.measureDraw.finishDrawing()}}};Object.assign(MeasureAzimuth.prototype,Measures);Object.assign(MeasureAzimuth.prototype,MeasureAzimuthDOM);Object.assign(MeasureAzimuth.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.MeasureAzimuth=MeasureAzimuth);LoggerByDefault.getLogger("zoom");var GeoportalZoom=class extends Zoom{constructor(e){e=e||{};var t="ol-custom-zoom";e.className=t,super(e),this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var ke=document.createElement("div");ke.id=t,ke.classList.add("position"),ke.classList.add(t),this.container.appendChild(ke)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPzoom-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-zoom","ol-unselectable","ol-control");var e=this,t=this.element.childNodes;for(let Ge=0;Ge<t.length;Ge++){const Be=t[Ge];if(Be.classList.contains(this.options.className+"-in")){Be.classList.add("GPzoomIn","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-in","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Be.id="GPzoomIn",Be.innerHTML="",Be.removeAttribute("title"),Be.setAttribute("aria-label","Zoomer");var ke=document.createElement("span");Be.appendChild(ke),Be.addEventListener?Be.addEventListener("click",function(){e.dispatchEvent("zoom:in")}):Be.attachEvent&&Be.attachEvent("onclick",function(){e.dispatchEvent("zoom:in")})}if(Be.classList.contains(this.options.className+"-out")){Be.classList.add("GPzoomOut","GPshowOpen","GPshowAdvancedToolPicto","gpf-btn-icon-zoom-out","fr-btn","fr-btn--tertiary","gpf-btn","gpf-btn--tertiary","gpf-btn-icon"),Be.id="GPzoomOut",Be.innerHTML="",Be.removeAttribute("title"),Be.setAttribute("aria-label","Dézoomer");var ke=document.createElement("span");Be.appendChild(ke),Be.addEventListener?Be.addEventListener("click",function(){e.dispatchEvent("zoom:out")}):Be.attachEvent&&Be.attachEvent("onclick",function(){e.dispatchEvent("zoom:out")})}}this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(ke=>{ke.element.classList.contains("ol-zoom")&&(ke.element.classList.add("ol-hidden"),ke.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalZoom=GeoportalZoom);const events=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],FullScreenEventType={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class FullScreen extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),target:e.target}),this.on,this.once,this.un,this.keys_=e.keys!==void 0?e.keys:!1,this.source_=e.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=e.className!==void 0?e.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=e.activeClassName!==void 0?e.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=e.inactiveClassName!==void 0?e.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const t=e.label!==void 0?e.label:"⤢";this.labelNode_=typeof t=="string"?document.createTextNode(t):t;const ke=e.labelActive!==void 0?e.labelActive:"×";this.labelActiveNode_=typeof ke=="string"?document.createTextNode(ke):ke;const Ge=e.tipLabel?e.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=Ge,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${CLASS_UNSELECTABLE} ${CLASS_CONTROL}`,this.element.appendChild(this.button_)}handleClick_(e){e.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const e=this.getMap();if(!e)return;const t=e.getOwnerDocument();if(isFullScreenSupported(t))if(isFullScreen(t))exitFullScreen(t);else{let ke;this.source_?ke=typeof this.source_=="string"?t.getElementById(this.source_):this.source_:ke=e.getTargetElement(),this.keys_?requestFullScreenWithKeys(ke):requestFullScreen(ke)}}handleFullScreenChange_(){const e=this.getMap();if(!e)return;const t=this.isInFullscreen_;this.isInFullscreen_=isFullScreen(e.getOwnerDocument()),t!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(replaceNode(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(FullScreenEventType.ENTERFULLSCREEN)):(replaceNode(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(FullScreenEventType.LEAVEFULLSCREEN)),e.updateSize())}setClassName_(e,t){t?(e.classList.remove(...this.inactiveClassName_),e.classList.add(...this.activeClassName_)):(e.classList.remove(...this.activeClassName_),e.classList.add(...this.inactiveClassName_))}setMap(e){const t=this.getMap();t&&t.removeChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_),super.setMap(e),this.handleMapTargetChange_(),e&&e.addChangeListener(MapProperty.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const e=this.documentListeners_;for(let ke=0,Ge=e.length;ke<Ge;++ke)unlistenByKey(e[ke]);e.length=0;const t=this.getMap();if(t){const ke=t.getOwnerDocument();isFullScreenSupported(ke)?this.element.classList.remove(CLASS_UNSUPPORTED):this.element.classList.add(CLASS_UNSUPPORTED);for(let Ge=0,Be=events.length;Ge<Be;++Ge)e.push(listen(ke,events[Ge],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function isFullScreenSupported(Oe){const e=Oe.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&Oe.fullscreenEnabled)}function isFullScreen(Oe){return!!(Oe.webkitIsFullScreen||Oe.fullscreenElement)}function requestFullScreen(Oe){Oe.requestFullscreen?Oe.requestFullscreen():Oe.webkitRequestFullscreen&&Oe.webkitRequestFullscreen()}function requestFullScreenWithKeys(Oe){Oe.webkitRequestFullscreen?Oe.webkitRequestFullscreen():requestFullScreen(Oe)}function exitFullScreen(Oe){Oe.exitFullscreen?Oe.exitFullscreen():Oe.webkitExitFullscreen&&Oe.webkitExitFullscreen()}LoggerByDefault.getLogger("fullscreen");var GeoportalFullScreen=class extends FullScreen{constructor(e){e=e||{};var t="ol-custom-full-screen";e.className=e.className||t,e.label=e.label||"",e.labelActive=e.labelActive||"",e.activeClassName=e.activeClassName||t+"-true",e.inactiveClassName=e.inactiveClassName||t+"-false",e.tipLabel=e.tipLabel||"Basculer en mode plein écran",super(e),this.CLASSNAME="FullScreen",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var ke=document.createElement("div");ke.id=t,ke.classList.add("position"),ke.classList.add(t),this.container.appendChild(ke)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPfullScreen-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.add(this.options.className),this.element.classList.remove("ol-full-screen","ol-unselectable","ol-control");var e=this.element.childNodes[0],t=document.createElement("span");e.appendChild(t),e.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPfullScreenPicto","fr-btn","fr-btn--tertiary","gpf-btn--tertiary","gpf-btn","gpf-btn-icon"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.removeAttribute("title"),e.setAttribute("aria-label",this.options.tipLabel),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge)}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){if(e){this._createContainerPosition(e),this._initContainer();var t=e.getControls();t.forEach(ke=>{ke.element.classList.contains("ol-full-screen")&&(ke.element.classList.add("ol-hidden"),ke.element.style.display="none")})}this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalFullScreen=GeoportalFullScreen);const MAX_RATIO=.75,MIN_RATIO=.1;class OverviewMap extends Control{constructor(e){e=e||{},super({element:document.createElement("div"),render:e.render,target:e.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=e.collapsed!==void 0?e.collapsed:!0,this.collapsible_=e.collapsible!==void 0?e.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=e.rotateWithView!==void 0?e.rotateWithView:!1,this.viewExtent_=void 0;const t=e.className!==void 0?e.className:"ol-overviewmap",ke=e.tipLabel!==void 0?e.tipLabel:"Overview map",Ge=e.collapseLabel!==void 0?e.collapseLabel:"‹";typeof Ge=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=Ge):this.collapseLabel_=Ge;const Be=e.label!==void 0?e.label:"›";typeof Be=="string"?(this.label_=document.createElement("span"),this.label_.textContent=Be):this.label_=Be;const je=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,Ve=document.createElement("button");Ve.setAttribute("type","button"),Ve.title=ke,Ve.appendChild(je),Ve.addEventListener(EventType.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=e.view;const Ze=new Map$1({view:e.view,controls:new Collection,interactions:new Collection});this.ovmap_=Ze,e.layers&&e.layers.forEach(function(gn){Ze.addLayer(gn)});const Qe=document.createElement("div");Qe.className="ol-overviewmap-box",Qe.style.boxSizing="border-box",this.boxOverlay_=new Overlay({position:[0,0],positioning:"center-center",element:Qe}),this.ovmap_.addOverlay(this.boxOverlay_);const en=t+" "+CLASS_UNSELECTABLE+" "+CLASS_CONTROL+(this.collapsed_&&this.collapsible_?" "+CLASS_COLLAPSED:"")+(this.collapsible_?"":" ol-uncollapsible"),tn=this.element;tn.className=en,tn.appendChild(this.ovmapDiv_),tn.appendChild(Ve);const an=this,cn=this.boxOverlay_,un=this.boxOverlay_.getElement(),dn=function(gn){return{clientX:gn.clientX,clientY:gn.clientY}},fn=function(gn){const yn=dn(gn),vn=Ze.getEventCoordinate(yn);cn.setPosition(vn)},pn=function(gn){const yn=Ze.getEventCoordinateInternal(gn);an.getMap().getView().setCenterInternal(yn),window.removeEventListener("pointermove",fn),window.removeEventListener("pointerup",pn)};this.ovmapDiv_.addEventListener("pointerdown",function(){event.target===un&&window.addEventListener("pointermove",fn),window.addEventListener("pointerup",pn)})}setMap(e){const t=this.getMap();if(e!==t){if(t){const ke=t.getView();ke&&this.unbindView_(ke),this.ovmap_.setTarget(null)}if(super.setMap(e),e){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(listen(e,ObjectEventType.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const ke=e.getView();ke&&this.bindView_(ke),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(e){if(e.key===MapProperty.VIEW){const t=e.oldValue;t&&this.unbindView_(t);const ke=this.getMap().getView();this.bindView_(ke)}else!this.ovmap_.isRendered()&&(e.key===MapProperty.TARGET||e.key===MapProperty.SIZE)&&this.ovmap_.updateSize()}bindView_(e){if(!this.view_){const t=new View({projection:e.getProjection()});this.ovmap_.setView(t)}e.addChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(e){e.removeChangeListener(ViewProperty.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const ke=e.getSize(),Be=e.getView().calculateExtentInternal(ke);if(this.viewExtent_&&equals$1(Be,this.viewExtent_))return;this.viewExtent_=Be;const je=t.getSize(),Ze=t.getView().calculateExtentInternal(je),Qe=t.getPixelFromCoordinateInternal(getTopLeft(Be)),en=t.getPixelFromCoordinateInternal(getBottomRight(Be)),tn=Math.abs(Qe[0]-en[0]),an=Math.abs(Qe[1]-en[1]),cn=je[0],un=je[1];tn<cn*MIN_RATIO||an<un*MIN_RATIO||tn>cn*MAX_RATIO||an>un*MAX_RATIO?this.resetExtent_():containsExtent(Ze,Be)||this.recenter_()}resetExtent_(){const e=this.getMap(),t=this.ovmap_,ke=e.getSize(),Be=e.getView().calculateExtentInternal(ke),je=t.getView(),Ve=Math.log(MAX_RATIO/MIN_RATIO)/Math.LN2,Ze=1/(Math.pow(2,Ve/2)*MIN_RATIO);scaleFromCenter(Be,Ze),je.fitInternal(fromExtent(Be))}recenter_(){const e=this.getMap(),t=this.ovmap_,ke=e.getView();t.getView().setCenterInternal(ke.getCenterInternal())}updateBox_(){const e=this.getMap(),t=this.ovmap_;if(!e.isRendered()||!t.isRendered())return;const ke=e.getSize(),Ge=e.getView(),Be=t.getView(),je=this.rotateWithView_?0:-Ge.getRotation(),Ve=this.boxOverlay_,Ze=this.boxOverlay_.getElement(),Qe=Ge.getCenter(),en=Ge.getResolution(),tn=Be.getResolution(),an=ke[0]*en/tn,cn=ke[1]*en/tn;if(Ve.setPosition(Qe),Ze){Ze.style.width=an+"px",Ze.style.height=cn+"px";const un="rotate("+je+"rad)";Ze.style.transform=un}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=listenOnce(this.ovmap_,MapEventType.POSTRENDER,e=>{delete this.ovmapPostrenderKey_,this.updateBox_()}))}handleClick_(e){e.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(CLASS_COLLAPSED),this.collapsed_?replaceNode(this.collapseLabel_,this.label_):replaceNode(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const e=this.ovmap_;if(!this.collapsed_){if(e.isRendered()){this.viewExtent_=void 0,e.render();return}e.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(e){this.collapsible_!==e&&(this.collapsible_=e,this.element.classList.toggle("ol-uncollapsible"),!e&&this.collapsed_&&this.handleToggle_())}setCollapsed(e){!this.collapsible_||this.collapsed_===e||this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(e){this.rotateWithView_!==e&&(this.rotateWithView_=e,this.getMap().getView().getRotation()!==0&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(e){this.validateExtent_(),this.updateBox_()}}LoggerByDefault.getLogger("overviewMap");var GeoportalOverviewMap=class extends OverviewMap{constructor(e){e=e||{};const t={name:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",globalConstraint:{maxScaleDenominator:27954113201435894e-8,minScaleDenominator:2.1839150938621787e6,bbox:{left:-179.5,right:179.5,top:75,bottom:-75}},params:{url:"https://data.geopf.fr/wmts",styles:"normal",version:"1.0.0",format:"image/jpeg",projection:"EPSG:3857",minScale:2.1839150938621787e6,maxScale:27954113201435894e-8,extent:{left:-179.5,right:179.5,top:75,bottom:-75},legends:[{format:"image/jpeg",url:"https://data.geopf.fr/annexes/ressources/legendes/LEGEND.jpg",minScaleDenominator:"200"}],title:"Carte Mondiale pour la mini-vue",description:"Carte Mondiale pour la mini-vue",tileMatrixSetLimits:{1:{minTileRow:"0",maxTileRow:"1",minTileCol:"0",maxTileCol:"1"},2:{minTileRow:"0",maxTileRow:"3",minTileCol:"0",maxTileCol:"3"},3:{minTileRow:"1",maxTileRow:"6",minTileCol:"0",maxTileCol:"7"},4:{minTileRow:"2",maxTileRow:"13",minTileCol:"0",maxTileCol:"15"},5:{minTileRow:"5",maxTileRow:"26",minTileCol:"0",maxTileCol:"31"},6:{minTileRow:"11",maxTileRow:"52",minTileCol:"0",maxTileCol:"63"},7:{minTileRow:"22",maxTileRow:"105",minTileCol:"0",maxTileCol:"127"},8:{minTileRow:"45",maxTileRow:"210",minTileCol:"0",maxTileCol:"255"}},TMSLink:"PM_1_8",matrixIds:["1","2","3","4","5","6","7","8"],tileMatrices:{1:{matrixId:"1",matrixHeight:2,matrixWidth:2,scaleDenominator:27954113201435894e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},2:{matrixId:"2",matrixHeight:4,matrixWidth:4,scaleDenominator:1397705660071793e-7,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},3:{matrixId:"3",matrixHeight:8,matrixWidth:8,scaleDenominator:6988528300358965e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},4:{matrixId:"4",matrixHeight:16,matrixWidth:16,scaleDenominator:3494264150179486e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},5:{matrixId:"5",matrixHeight:32,matrixWidth:32,scaleDenominator:1747132075089743e-8,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},6:{matrixId:"6",matrixHeight:64,matrixWidth:64,scaleDenominator:8735660375448715e-9,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},7:{matrixId:"7",matrixHeight:128,matrixWidth:128,scaleDenominator:4.3678301877243575e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}},8:{matrixId:"8",matrixHeight:256,matrixWidth:256,scaleDenominator:2.1839150938621787e6,tileHeight:256,tileWidth:256,topLeftCorner:{x:-200375083427892e-7,y:200375083427892e-7}}},nativeResolutions:["78271.51696402048","39135.75848201023","19567.87924100512","9783.939620502561","4891.969810251280","2445.984905125640","1222.992452562820","611.4962262814100"]}};var ke="ol-overviewmap";e.className=e.className||ke,e.collapseLabel=e.collapseLabel||"",e.collapsed=e.collapsed,e.collapsed===void 0&&(e.collapsed=!0),e.label=e.label||"",e.tipLabel="Carte générale",e.layers=e.layers||[new LayerWMTS({layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",configuration:t})],super(e),this.CLASSNAME="OverviewMap",this.container=null,this.options=e}_createContainerPosition(e){if(this.container=e.getOverlayContainerStopEvent(),this.options.target=this.container,this.options.position){var t="position-container-"+this.options.position;if(!document.getElementById(t)){var ke=document.createElement("div");ke.id=t,ke.classList.add("position"),ke.classList.add(t),this.container.appendChild(ke)}this.options.target=this.container.children[t]}}_initContainer(){this._uid=this.options.id||SelectorID.generate(),this.element.id="GPoverviewMap-"+this._uid,this.element.classList.add("GPwidget","gpf-widget","gpf-widget-button"),this.element.classList.remove("ol-control");var e=this.element.childNodes,t=e[1];t.id="GPshowOverviewMap-"+this._uid,t.classList.add("GPshowOpen","GPshowAdvancedToolPicto","GPshowOverviewMap","gpf-btn-icon","gpf-btn-icon-overviewmap","fr-btn","fr-btn--tertiary","gpf-btn--tertiary"),t.setAttribute("tabindex","0"),t.setAttribute("aria-pressed",!this.options.collapsed),t.setAttribute("type","button"),t.removeAttribute("title"),t.setAttribute("aria-label",this.options.tipLabel);var ke=this;t.addEventListener?t.addEventListener("click",function(Ge){var Be=Ge.target.ariaPressed==="true";Ge.target.setAttribute("aria-pressed",!Be),ke.dispatchEvent({type:"overviewmap:toggle",status:Be})}):t.attachEvent&&t.attachEvent("onclick",function(Ge){var Be=Ge.target.ariaPressed==="true";Ge.target.setAttribute("aria-pressed",!Be),ke.dispatchEvent({type:"overviewmap:toggle",status:Be})}),this.options.position&&(this.element.style.position="unset"),this.options.gutter===!1&&this.element.classList.add("gpf-button-no-gutter")}setMap(e){e&&(this._createContainerPosition(e),this._initContainer()),this.setTarget(this.options.target),super.setMap(e)}getContainer(){return this.container}};window.ol&&window.ol.control&&(window.ol.control.GeoportalOverviewMap=GeoportalOverviewMap);var LegendsDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPlegends"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowLegendsPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowLegendsPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowLegendsPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-legends fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Afficher les légendes"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowLegendsClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowLegendsClick(ke)}),e},_createLegendsPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPlegendsPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createLegendsPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__legends",Oe},_createLegendsPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__header_legends",Oe},_createLegendsPanelIconElement:function(){var Oe=document.createElement("label");return Oe.className="gpf-btn-header-legends gpf-btn-icon-header-legends",Oe.title="Légendes",Oe},_createLegendsPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__title_legends",Oe.innerHTML="Légendes",Oe},_createLegendsPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowLegendsPicto")).click()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowLegendsPicto")).click()}),e},_createLegendElement:function(){var Oe=document.createElement("div");return Oe.className="legends-entries gpf-panel__body fr-modal__body",Oe},_createLegendEntry:function(Oe){const e=Be=>{var je=function(){if(!window.DOMParser)return!1;var en=new DOMParser;try{en.parseFromString("x","text/html")}catch{return!1}return!0};if(je()){var Ve=new DOMParser,Ze=Ve.parseFromString(Be,"text/html");return Ze.body}var Qe=document.createElement("div");return Qe.innerHTML=Be,Qe};if(Oe&&Oe.legends&&Oe.legends.length){var t=Oe.legends[0].url,ke=e(`
                    <div
                        id="${Oe.id}"
                        class="legend-entry-container gpf-panel__content fr-modal__content">
                        <label class="legend-entry-title gpf-label-legends-name fr-label">${Oe.title}</label>
                        <button
                            id="GPcollapseLegend_ID_${Oe.id}"
                            class="legend-entry-show gpf-btn gpf-btn-icon gpf-btn-icon-legends-collapse fr-btn fr-btn--tertiary gpf-btn--tertiary"
                            type="button"
                            title=""
                            tabindex="0"
                            aria-pressed="false"></button>
                        <div id="GPlegend_ID_${Oe.id}" class="legend-entry-image gpf-hidden">
                            <img src="${t}" alt="${Oe.desc}">
                        </div>
                    </div>
                `),Ge=ke.firstChild.querySelector("button");return Ge&&Ge.addEventListener("click",Be=>{var je=Be.target.ariaPressed==="true";Be.target.setAttribute("aria-pressed",!je);var Ve=document.getElementById("GPlegend_ID_"+Oe.id);je?Ve.classList.replace("gpf-visible","gpf-hidden"):Ve.classList.replace("gpf-hidden","gpf-visible")}),ke.firstChild}}},logger$5=LoggerByDefault.getLogger("legends"),Legends=class ap extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof ap))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Legends",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e){if(this.draggable&&Draggable.dragElement(this.panelLegendsContainer,this.panelLegendsHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonLegendsShow.setAttribute("aria-pressed",!0),this.auto){var t=this;e.getLayers().forEach(ke=>{t.add(ke)})}this.auto&&this.addEventsListeners(e)}else this.auto&&this.removeEventsListeners();super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}getMetaInformations(e){if(e.hasOwnProperty("name"))return{id:e.name,title:e.getTitle(),legends:e.getLegends(),metadatas:e.getMetadata(),desc:e.getDescription(),url:e.getQuicklookUrl(),partners:e.getOriginators()}}adds(e){if(e)for(let t=0;t<e.length;t++)this.add(layer)}add(e){if(e){var t=this._createLegendEntry(this.getMetaInformations(e));if(t)return this.exist(t)?!1:(this.panelLegendsEntriesContainer.prepend(t),this.legends.push({obj:e,dom:t}),!0)}return!1}remove(e){var t=!1;if(e)for(let ke=0;ke<this.legends.length;ke++){const Ge=this.legends[ke];if(e.name===Ge.obj.name&&e.service===Ge.obj.service){Ge.dom&&this.legends[ke].dom.remove(),this.legends.splice(ke,1),t=!0;break}}return t}exist(e){var t=!1;for(let ke=0;ke<this.legends.length;ke++)if(this.legends[ke].dom.id===e.id){t=!0;break}return t}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonLegendsShow=null,this.panelLegendsContainer=null,this.panelLegendsEntriesContainer=null,this.panelLegendsHeaderContainer=null,this.buttonLegendsClose=null,this.eventsListeners=[],this.legends=[]}initContainer(){var e=this._createMainContainerElement(),t=this.buttonLegendsShow=this._createShowLegendsPictoElement();e.appendChild(t);var ke=this.panelLegendsContainer=this._createLegendsPanelElement(),Ge=this._createLegendsPanelDivElement();ke.appendChild(Ge);var Be=this.panelLegendsEntriesContainer=this._createLegendElement();if(ke.appendChild(Be),this.options.panel){var je=this.panelLegendsHeaderContainer=this._createLegendsPanelHeaderElement(),Ve=this._createLegendsPanelIconElement();je.appendChild(Ve);var Ze=this._createLegendsPanelTitleElement();je.appendChild(Ze);var Qe=this.buttonLegendsClose=this._createLegendsPanelCloseElement();je.appendChild(Qe),Ge.appendChild(je)}return e.appendChild(ke),logger$5.log(e),e}addEventsListeners(e){var t=this;this.eventsListeners["layer:add"]=function(ke){if(logger$5.trace(ke),!t.add(ke.element)){logger$5.error("Layer already added...");return}},this.eventsListeners["layer:remove"]=function(ke){if(logger$5.trace(ke),!t.remove(ke.element)){logger$5.error("Layer already removed...");return}},this.eventsListeners["layer:change:position"]=function(ke){logger$5.trace(ke)},this.eventsListeners["view:change:resolution"]=function(ke){logger$5.trace(ke);var Ge=t.getMap();for(let an=0;an<t.legends.length;an++){const cn=t.legends[an];var Be=t.getMetaInformations(cn.obj);if(Be){var je=Ge.getView().getResolution()||Ge.getView().getResolutionForZoom(Ge.getZoom()),Ve=je*3570,Ze=Be.legends.slice(),Qe=Ze[0];for(let un=0;un<Ze.length;++un){const dn=Ze[un];dn.minScaleDenominator||(dn.minScaleDenominator=0),(Ve>Qe.minScaleDenominator&&dn.minScaleDenominator>Qe.minScaleDenominator&&dn.minScaleDenominator<Ve||Ve<Qe.minScaleDenominator&&dn.minScaleDenominator<Qe.minScaleDenominator)&&(Qe=dn)}if(Be.legends[0]!==Qe){Be.legends=[],Be.legends.push(Qe);var en=t._createLegendEntry(Be),tn=cn.dom;tn.replaceWith(en),cn.dom=en}}}},e.getLayers().on("add",this.eventsListeners["layer:add"]),e.getLayers().on("remove",this.eventsListeners["layer:remove"]),e.getLayers().on("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().on("change:resolution",this.eventsListeners["view:change:resolution"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["layer:add"]),e.getLayers().un("remove",this.eventsListeners["layer:remove"]),e.getLayers().un("change:zIndex",this.eventsListeners["layer:change:position"]),e.getView().un("change:resolution",this.eventsListeners["view:change:resolution"]),delete this.eventsListeners["layer:add"],delete this.eventsListeners["layer:remove"],delete this.eventsListeners["layer:change:position"],delete this.eventsListeners["view:change:resolution"]}onShowLegendsClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$5.trace(e);var t=this.buttonLegendsShow.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}};Object.assign(Legends.prototype,LegendsDOM);Object.assign(Legends.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Legends=Legends);const stringToHTML=Oe=>{var e=function(){if(!window.DOMParser)return!1;var Be=new DOMParser;try{Be.parseFromString("x","text/html")}catch{return!1}return!0};if(e()){var t=new DOMParser,ke=t.parseFromString(Oe,"text/html");return ke.body}var Ge=document.createElement("div");return Ge.innerHTML=Oe,Ge};var CatalogDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPcatalog"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowCatalogPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowCatalogPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowCatalogPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-catalog fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Catalogue de données"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowCatalogClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowCatalogClick(ke)}),e},_createCatalogPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPcatalogPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createCatalogPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createCatalogPanelContentDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__content fr-modal__content",Oe},_createCatalogPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelHeader gpf-panel__header fr-modal__header",Oe},_createCatalogPanelTitleElement:function(Oe){var e=document.createElement("div");return e.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",e.innerHTML=Oe,e},_createCatalogPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id=this._addUID("GPcatalogPanelClose"),e.className="GPpanelClose GPcatalogPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau",e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowCatalogPicto")).click(),Oe.onCloseCatalogClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowCatalogPicto")).click(),Oe.onCloseCatalogClick()});var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e},_createCatalogContentDivElement:function(){var Oe=stringToHTML('<div class="catalog-container-content" style="padding:10px"></div>');return Oe.firstChild},_createCatalogContentTitleElement:function(Oe){var e=stringToHTML(`
        <!-- titre -->
        <div class="catalog-container-title">
            <div class="fr-title">
                <h5 style="margin:unset">${Oe}</h5>
            </div>
        </div>
        `);return e.firstChild},_createCatalogContentSearchElement:function(){var Oe=`
        <!-- barre de recherche -->
        <!-- https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/barre-de-recherche -->
        <div class="catalog-container-search" style="padding-top:10px;padding-bottom:20px">
            <div class="fr-search-bar" id="header-search" role="search">
                <label class="fr-label" for="search-input">
                    Recherche
                </label>
                <input class="fr-input" placeholder="Rechercher une donnée" type="search" id="search-input" name="search-input" incremental>
                <button id="search-button" class="fr-btn" title="Rechercher">
                    Rechercher
                </button>
            </div>
        </div>
        `,e=stringToHTML(Oe);const t=e.attachShadow({mode:"open"});t.innerHTML=Oe.trim();var ke=t.getElementById("search-button");ke&&ke.addEventListener("click",()=>{this.onSearchCatalogButtonClick()});var Ge=t.getElementById("search-input");return Ge&&Ge.addEventListener("search",()=>{this.onSearchCatalogInputChange()}),t},_createCatalogWaitingElement:function(){var Oe=document.createElement("div");Oe.id=this._addUID("GPcatalogCalcWaitingContainer"),Oe.className="GPwaitingContainerHidden gpf-waiting--hidden";var e=document.createElement("p");return e.className="GPwaitingContainerInfo gpf-waiting_info",e.innerHTML="Recherche en cours...",Oe.appendChild(e),Oe},_createCatalogContentCategoriesTabs:function(Oe){var e="",t=(dn,fn,pn,gn)=>{var yn="GPtabButton fr-tabs__tab",vn="false",An=-1;return gn&&(yn="GPtabButton GPtabButtonActive fr-tabs__tab",vn="true",An=0),`
            <li class="GPtabList" role="presentation">
                <button id="tabbutton-${dn}_${fn}" class="${yn}" tabindex="${An}" role="tabbutton" aria-selected="${vn}" aria-controls="tabpanel-${dn}-panel_${fn}">${pn}</button>
            </li>
            `},ke="",Ge=dn=>{var fn=dn.default?"checked":"";return`
            <!-- sous categorie -->
            <div class="fr-fieldset__element fr-fieldset__element--inline">
                <div class="fr-radio-group fr-radio-group--sm">
                    <input type="radio" id="radio-inline_${dn.id}" name="radio-inline" ${fn} aria-controls="tabcontent-${dn.id}">
                    <label class="fr-label" for="radio-inline_${dn.id}">
                        ${dn.title}
                    </label>
                </div>
            </div>
            `},Be=(dn,fn)=>{var pn="";for(let yn=0;yn<fn.length;yn++){const vn=fn[yn];ke+=Ge(vn);var gn="";vn.default||(gn="GPelementHidden gpf-hidden"),pn+=`<div class="tabcontent ${gn}" role="tabpanel-section" id="tabcontent-${vn.id}"></div>`}return`
            <!-- sous categories -->
            <fieldset class="fr-fieldset" id="radio-inline_${dn}" aria-labelledby="radio-inline-legend radio-inline-messages">
                ${ke}
                <div class="fr-messages-group" id="radio-inline-messages" aria-live="assertive"></div>
            </fieldset>
            ${pn}
            `},je="",Ve=(dn,fn,pn,gn)=>{var yn="GPtabContent fr-tabs__panel",vn=-1;pn&&(yn="GPtabContent GPtabContentSelected fr-tabs__panel fr-tabs__panel--selected",vn=0);var An='<div class="tabcontent"></div>';return gn&&(An=Be(fn,gn)),`
            <!-- panneaux -->
            <div id="tabpanel-${dn}-panel_${fn}" class="${yn}" role="tabpanel" aria-labelledby="tabbutton-${dn}_${fn}" tabindex="${vn}" style="max-height: 250px;overflow-y: auto;">
                ${An}
            </div>
            `};for(let dn=0;dn<Oe.length;dn++){const fn=Oe[dn];e+=t(dn,fn.id,fn.title,fn.default),je+=Ve(dn,fn.id,fn.default,fn.items)}var Ze=`
        <!-- onglets -->
        <div class="catalog-container-tabs">
            <div class="GPtabs fr-tabs">
                <ul class="GPtabsList fr-tabs__list" role="tablist" aria-label="[A modifier | nom du système d'onglet]">
                    ${e}
                </ul>
                ${je}
            </div>
        </div>
        `,Qe=stringToHTML(Ze.trim());const en=Qe.attachShadow({mode:"open"});en.innerHTML=Ze.trim();var tn=en.querySelectorAll('[role="tabpanel-section"]'),an=en.querySelectorAll('[name="radio-inline"]');an&&an.forEach(dn=>{dn.addEventListener("change",fn=>{for(let gn=0;gn<tn.length;gn++){const yn=tn[gn];yn.classList.add("gpf-hidden"),yn.classList.add("GPelementHidden")}var pn=document.getElementById(fn.target.getAttribute("aria-controls"));pn.classList.remove("gpf-hidden"),pn.classList.remove("GPelementHidden")})});var cn=en.querySelectorAll('[role="tabpanel"]'),un=en.querySelectorAll('[role="tabbutton"]');return un&&un.forEach(dn=>{dn.addEventListener("click",fn=>{for(let gn=0;gn<un.length;gn++){const yn=un[gn];yn.setAttribute("tabindex",-1),yn.ariaSelected=!1,yn.classList.remove("GPtabButtonActive")}fn.target.setAttribute("tabindex",0),fn.target.ariaSelected=!0,fn.target.classList.add("GPtabButtonActive");for(let gn=0;gn<cn.length;gn++){const yn=cn[gn];yn.setAttribute("tabindex",-1),yn.classList.remove("fr-tabs__panel--selected"),yn.classList.remove("GPtabContentSelected"),yn.classList.add("gpf-hidden"),yn.classList.add("GPelementHidden")}var pn=document.getElementById(fn.target.getAttribute("aria-controls"));pn.setAttribute("tabindex",0),pn.classList.add("fr-tabs__panel--selected"),pn.classList.add("GPtabContentSelected"),pn.classList.remove("gpf-hidden"),pn.classList.remove("GPelementHidden"),this.onSelectCatalogTabClick(fn)})}),en},_createCatalogContentCategoryTabContent:function(Oe,e){var t=Object.values(e),ke="",Ge=(yn,vn,An,xn,wn)=>`
            <div class="fr-fieldset__element" id="fieldset-${wn}_${vn}-${xn}">
                <div class="fr-checkbox-group">
                    <input
                        name="checkboxes-${wn}"
                        id="checkboxes-${wn}-${yn}_${vn}-${xn}"
                        type="checkbox"
                        data-layer="${vn}:${xn}"
                        aria-describedby="checkboxes-messages-${wn}-${yn}_${vn}-${xn}">
                    <label class="GPlabelActive fr-label" for="checkboxes-${wn}-${yn}_${vn}-${xn}" title="nom technique : ${vn}">
                        ${An} (${xn})
                    </label>
                    <div class="fr-messages-group" id="checkboxes-messages-${wn}-${yn}_${vn}-${xn}" aria-live="assertive"></div>
                </div>
            </div>
            `,Be=(yn,vn,An,xn,wn)=>`
            <!-- section -->
            <section class="fr-accordion" style="width:100%;">
                <h3 class="fr-accordion__title">
                    <button class="GPcatalogButtonSection fr-accordion__btn" role="button-collapse-${vn}" aria-expanded="false" aria-controls="accordion-${yn}">
                        <span class="GPshowCatalogAdvancedTools gpf-hidden" role="button-icon-collapse-${vn}"></span>${An}
                    </button>
                </h3>
                <div class="fr-collapse GPelementHidden" id="accordion-${yn}">
                    ${wn}
                </div>
            </section>
            `,je=Oe.section;je&&(t=t.sort((yn,vn)=>yn[Oe.filter.field].localeCompare(vn[Oe.filter.field])));var Ve={};for(let yn=0;yn<t.length;yn++){const vn=t[yn];if(je){var Ze=vn[Oe.filter.field];Ze&&(Ve.hasOwnProperty(Ze)||(Ve[Ze]=""),Ve[Ze]+=Ge(yn,vn.name,vn.title,vn.service,Oe.id))}else ke+=Ge(yn,vn.name,vn.title,vn.service,Oe.id)}if(je){for(const yn in Ve)if(Object.prototype.hasOwnProperty.call(Ve,yn)){const vn=Ve[yn];var Qe=[...vn.matchAll(/fr-fieldset__element/g)].length,en=Math.abs(Array.from(yn).reduce((An,xn)=>Math.imul(31,An)+xn.charCodeAt(0)|0,0));ke+=Be(en,Oe.id,yn,Qe,vn)}}var tn=`
            <!-- liste de couches -->
            <fieldset class="fr-fieldset" id="checkboxes-${Oe.id}" aria-labelledby="checkboxes-legend checkboxes-messages">
                ${ke}
            </fieldset>
        `,an=stringToHTML(tn);const cn=an.attachShadow({mode:"open"});cn.innerHTML=tn.trim();var un=`checkboxes-${Oe.id}`,dn=cn.querySelectorAll('[name="'+un+'"]');dn&&dn.forEach(yn=>{yn.addEventListener("click",vn=>{this.onSelectCatalogEntryClick(vn)})});var fn=`button-collapse-${Oe.id}`,pn=cn.querySelectorAll('[role="'+fn+'"]');pn&&pn.forEach(yn=>{yn.addEventListener("click",vn=>{vn.target.ariaExpanded=vn.target.ariaExpanded!=="true";var An=document.getElementById(vn.target.getAttribute("aria-controls"));An&&(vn.target.ariaExpanded==="true"?(An.classList.add("fr-collapse--expanded"),An.classList.remove("GPelementHidden")):(An.classList.remove("fr-collapse--expanded"),An.classList.add("GPelementHidden")))},!1)}),`${Oe.id}`;var gn=cn.querySelectorAll('[role="'+fn+'"]');return gn&&gn.forEach(yn=>{yn.addEventListener("click",vn=>{vn.target.parentElement.click()})}),cn}},logger$4=LoggerByDefault.getLogger("widget"),Catalog=class lp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof lp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Catalog",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this.showWaiting(),this.initLayersList().then(t=>{logger$4.trace(this,t),this.hideWaiting(),this.dispatchEvent({type:"catalog:loaded",data:t})}).catch(t=>{this.hideWaiting(),logger$4.error(t)}),this}setMap(e){e?(this.on("catalog:loaded",this.initMapLayers),this.draggable&&Draggable.dragElement(this.panelCatalogContainer,this.panelCatalogHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonCatalogShow.setAttribute("aria-pressed",!0),this.auto&&this.addEventsListeners(e)):(this.un("catalog:loaded",this.initMapLayers),this.auto&&this.removeEventsListeners()),super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,titlePrimary:"Gérer vos couches de données",titleSecondary:"",layerLabel:"title",layerFilter:[],search:{display:!0,criteria:["name","title","description"]},addToMap:!0,categories:[{title:"Données",id:"data",default:!0,filter:null}],configuration:{type:"json",urls:["https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/layers.json","https://raw.githubusercontent.com/IGNF/cartes.gouv.fr-entree-carto/main/public/data/edito.json"]}},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.eventsListeners=[],this.buttonCatalogShow=null,this.panelCatalogContainer=null,this.panelCatalogHeaderContainer=null,this.buttonCatalogClose=null,this.contentCatalogContainer=null,this.waitingContainer=null,this.layersList=[],this.categories=this.options.categories.map(t=>{var ke=t.items;return t.items&&(ke=t.items.map(Ge=>({title:Ge.title,id:Ge.id||Math.abs(Array.from(Ge.title).reduce((Be,je)=>Math.imul(31,Be)+je.charCodeAt(0)|0,0)),section:Ge.hasOwnProperty("section")?Ge.section:!1,default:Ge.hasOwnProperty("default")?Ge.default:!1,filter:Ge.filter||null}))),{title:t.title,id:t.id||Math.abs(Array.from(t.title).reduce((Ge,Be)=>Math.imul(31,Ge)+Be.charCodeAt(0)|0,0)),default:t.hasOwnProperty("default")?t.default:!1,filter:t.filter||null,items:ke||null}}),this.categoryId=(()=>{var t=this.categories.findIndex(ke=>ke.default);return t===-1&&(t=0,this.categories[t].default=!0),this.categories[t].id})(),this.layersListOnMap={}}initContainer(){var e=this._createMainContainerElement(),t=this.buttonCatalogShow=this._createShowCatalogPictoElement();e.appendChild(t);var ke=this.panelCatalogContainer=this._createCatalogPanelElement(),Ge=this._createCatalogPanelDivElement();ke.appendChild(Ge);var Be=this.panelCatalogHeaderContainer=this._createCatalogPanelHeaderElement(),je=this._createCatalogPanelTitleElement(this.options.titlePrimary);Be.appendChild(je);var Ve=this.buttonCatalogClose=this._createCatalogPanelCloseElement();Be.appendChild(Ve),Ge.appendChild(Be);var Ze=this._createCatalogPanelContentDivElement(),Qe=this.contentCatalogContainer=this._createCatalogContentDivElement();Qe.appendChild(this._createCatalogContentTitleElement(this.options.titleSecondary)),this.options.search.display&&Qe.appendChild(this._createCatalogContentSearchElement());var en=this.waitingContainer=this._createCatalogWaitingElement();return Qe.appendChild(en),Ze.appendChild(Qe),Ge.appendChild(Ze),e.appendChild(ke),e}initMapLayers(){var e=this.getMap();if(e){var t=e.getLayers();t.forEach(ke=>{if(ke.name&&ke.service){this.layersListOnMap[ke.name+":"+ke.service]=ke;var Ge=document.querySelectorAll(`input[data-layer="${ke.name}:${ke.service}"]`);Ge&&Ge.forEach(Be=>{Be.checked=!0})}})}}async initLayersList(){var e=null,t=this;const ke=Qe=>{var en=t.contentCatalogContainer,tn=t._createCatalogContentCategoriesTabs(this.categories);en.appendChild(tn);var an=[];t.categories.forEach(dn=>{if(dn.items)for(let fn=0;fn<dn.items.length;fn++){const pn=dn.items[fn];an.push(pn)}else an.push(dn)});var cn=en.querySelectorAll(".tabcontent");for(let dn=0;dn<cn.length;dn++){const fn=cn[dn];var un=Ge(an[dn],Qe);fn.appendChild(t._createCatalogContentCategoryTabContent(an[dn],un))}},Ge=(Qe,en)=>{var tn=en,an=Qe.filter;if(an){tn={};for(const un in en)if(Object.prototype.hasOwnProperty.call(en,un)){const dn=en[un];if(dn[an.field]){var cn=Array.isArray(an.value)?an.value.includes(dn[an.field].toString()):an.value==="*"||dn[an.field].toString()===an.value;cn&&(tn[un]=dn,this.layersList[un].categories.push(Qe.id))}}}return tn},Be=(Qe,en)=>en;if(this.options.configuration.data){e=this.options.configuration.data||{},Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const Qe in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,Qe)){const en=e.layers[Qe];var je=en.serviceParams.id.split(":").slice(-1)[0];en.service=je,en.categories=[]}var Ve=Be(this.options.layerFilter,e.layers);return this.layersList=Ve,ke(Ve),new Promise((Qe,en)=>{Qe(e)})}if(this.options.configuration.urls){var Ze=[];for(let Qe=0;Qe<this.options.configuration.urls.length;Qe++){const en=this.options.configuration.urls[Qe],tn=function(){return fetch(en,{}).then(function(an){if(an.ok)return an.json().then(function(un){return un}).catch(un=>{logger$4.warn("fetch json exception :",un)});var cn=new Error("HTTP status code: "+an.status);throw cn}).catch(an=>new Promise((cn,un)=>{logger$4.error("fetch json exception :",an),un(an)}))};Ze.push(tn())}try{const Qe=await Promise.all(Ze);e=Qe[0];for(let tn=1;tn<Qe.length;tn++){const an=Qe[tn];Helper.mergeParams(e,an)}Config.isConfigLoaded()&&Helper.mergeParams(e,Config.configuration);for(const tn in e.layers)if(Object.prototype.hasOwnProperty.call(e.layers,tn)){const an=e.layers[tn];var je=an.serviceParams.id.split(":").slice(-1)[0];an.service=je,an.categories=[]}var Ve=Be(this.options.layerFilter,e.layers);return this.layersList=Ve,ke(Ve),await new Promise((tn,an)=>{tn(e)})}catch(Qe){return await new Promise((en,tn)=>{tn(Qe)})}}}addEventsListeners(e){var t=this;this.eventsListeners["map:add"]=function(ke){logger$4.trace(ke);var Ge=ke.element.name,Be=ke.element.service;t.layersListOnMap[Ge+":"+Be]=ke.element;var je=document.querySelectorAll(`input[data-layer="${Ge}:${Be}"]`);je&&je.forEach(Ve=>{Ve.checked=!0})},e.getLayers().on("add",this.eventsListeners["map:add"]),this.eventsListeners["map:remove"]=function(ke){logger$4.trace(ke);var Ge=ke.element.name,Be=ke.element.service;delete t.layersListOnMap[Ge+":"+Be];var je=document.querySelectorAll(`input[data-layer="${Ge}:${Be}"]`);je&&je.forEach(Ve=>{Ve.checked=!1})},e.getLayers().on("remove",this.eventsListeners["map:remove"])}removeEventsListeners(){var e=this.getMap();e.getLayers().un("add",this.eventsListeners["map:add"]),delete this.eventsListeners["map:add"],e.getLayers().un("remove",this.eventsListeners["map:remove"]),delete this.eventsListeners["map:remove"]}addLayer(e,t){var ke=null,Ge=null;switch(t){case"WMS":Ge=new LayerWMS({layer:e});break;case"WMTS":Ge=new LayerWMTS({layer:e});break;case"TMS":Ge=new LayerMapBox({layer:e},{declutter:!0});break;case"WFS":Ge=new LayerWFS({layer:e});break}if(Ge){var Be=this.getMap();Be.addLayer(Ge),this.layersListOnMap[e+":"+t]=Ge,ke=Ge.getConfiguration()}return ke}removeLayer(e,t){var ke=null,Ge=this.layersListOnMap[e+":"+t];if(Ge){ke=Ge.getConfiguration();var Be=this.getMap();Be.removeLayer(Ge),delete this.layersListOnMap[e+":"+t]}return ke}hideWaiting(){this.waitingContainer.className="GPwaitingContainerHidden  gpf-waiting--hidden"}showWaiting(){this.waitingContainer.className="GPwaitingContainerVisible gpf-waiting--visible"}resetFilteredLayersList(){for(const e in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,e)){const t=this.layersList[e];t.hidden=!1,this.updateFilteredLayersListDOM(t.name,t.service,t.hidden)}}setFilteredLayersList(e){var t=this.options.search.criteria;for(const Ge in this.layersList)if(Object.prototype.hasOwnProperty.call(this.layersList,Ge)){const Be=this.layersList[Ge];var ke="";for(let je=0;je<t.length;je++){const Ve=t[je];Be[Ve]&&(ke+=Be[Ve].toLowerCase())}Be.hidden=!ke.includes(e.toLowerCase()),this.updateFilteredLayersListDOM(Be.name,Be.service,Be.hidden)}}updateFilteredLayersListDOM(e,t,ke){var Ge=[];this.categories.forEach(je=>{if(je.items)for(let Ve=0;Ve<je.items.length;Ve++){const Ze=je.items[Ve];Ge.push(Ze.id)}else Ge.push(je.id)});for(let je=0;je<Ge.length;je++){const Ve=Ge[je];var Be=document.getElementById(`fieldset-${Ve}_${e}-${t}`);Be&&(ke?(Be.classList.add("gpf-hidden"),Be.classList.add("GPelementHidden")):(Be.classList.remove("gpf-hidden"),Be.classList.remove("GPelementHidden")))}}onShowCatalogClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$4.trace(e)}onCloseCatalogClick(e){logger$4.trace(e)}onSelectCatalogTabClick(e){logger$4.trace(e);var t=e.target.id,ke=t.split("_")[1];this.categoryId=ke}onSelectCatalogEntryClick(e){logger$4.trace(e);var t=e.target.dataset.layer,ke=t.substring(0,t.lastIndexOf(":")),Ge=t.substring(t.lastIndexOf(":")+1),Be={};e.target.checked?(this.options.addToMap&&(Be=this.addLayer(ke,Ge)),this.dispatchEvent({type:"catalog:layer:add",name:ke,service:Ge,layer:Be})):(this.options.addToMap&&(Be=this.removeLayer(ke,Ge)),this.dispatchEvent({type:"catalog:layer:remove",name:ke,service:Ge,layer:Be}))}onSearchCatalogButtonClick(){var e=document.getElementById("search-input").value;this.setFilteredLayersList(e)}onSearchCatalogInputChange(){this.onSearchCatalogButtonClick()}};Object.assign(Catalog.prototype,CatalogDOM);Object.assign(Catalog.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Catalog=Catalog);const TerritoriesJson=[{id:"FXX",title:"France métropolitaine",description:"",zoom:null,bbox:[-9.86,41.15,10.38,51.56],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/fxx.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/fxx.svg"},{id:"GLP",title:"Guadeloupe",description:"",zoom:null,bbox:[-61.97,15.72,-60.93,16.66],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/glp.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/glp.svg"},{id:"GUF",title:"Guyane",description:"",zoom:null,bbox:[-55.65,1.49,-51.2,6.21],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/guf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/guf.svg"},{id:"MTQ",title:"Martinique",description:"",zoom:null,bbox:[-61.4,14.25,-60.67,15.04],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/mtq.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/mtq.svg"},{id:"REU",title:"Réunion",description:"",zoom:10,bbox:[55.07,-21.46,55.86,-20.79],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/reu.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/reu.svg"},{id:"SPM",title:"Saint-Pierre-et-Miquelon",description:"",zoom:null,bbox:[-56.48,46.69,-56.07,47.19],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/spm.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/spm.svg"},{id:"IDF",title:"Paris petite couronne",description:"",zoom:12,bbox:[2.18,48.77,2.52,48.95],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/idf.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/idf.svg"},{id:"MYT",title:"Mayotte",description:"",zoom:null,bbox:[44.95,-13.049,45.32,-12.57],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/myt.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/myt.svg"},{id:"NCL",title:"Nouvelle Calédonie",description:"",zoom:null,bbox:[163.02,-23.08,167.86,-19.5],thumbnail:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/thumbnails/ncl.png",icon:"https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/resources/territories/ncl.svg"}];var TerritoriesDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPterritories"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowTerritoriesPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),e.id=this._addUID("GPshowTerritoriesPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowTerritoriesPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-territories fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Sélecteur de territoire"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowTerritoriesClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowTerritoriesClick(ke)}),e},_createTerritoriesPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPterritoriesPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createTerritoriesPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__territories",Oe},_createTerritoriesPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__header_territories",Oe},_createTerritoriesPanelIconElement:function(){var Oe=document.createElement("label");return Oe.className="gpf-btn-header-territories gpf-btn-icon-header-territories",Oe.title="Selecteur de territoires",Oe},_createTerritoriesPanelTitleElement:function(Oe){var e=document.createElement("div");return e.className="gpf-panel__title_territories",e.innerHTML=Oe,e},_createTerritoriesPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.id="GPterritoriesPanelClose",e.className="gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowTerritoriesPicto")).click(),Oe.onCloseTerritoriesClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowTerritoriesPicto")).click(),Oe.onCloseTerritoriesClick()}),e},_createTerritoriesElement:function(){var Oe=document.createElement("div");return Oe.className="territories-entries gpf-panel__body_territories fr-modal__body",Oe},_createTerritoryEntry:function(Oe){var e=this;const t=Qe=>{var en=function(){if(!window.DOMParser)return!1;var un=new DOMParser;try{un.parseFromString("x","text/html")}catch{return!1}return!0};if(en()){var tn=new DOMParser,an=tn.parseFromString(Qe,"text/html");return an.body}var cn=document.createElement("div");return cn.innerHTML=Qe,cn};if(Oe){var ke="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNTgxLjAwMDAwMHB0IiBoZWlnaHQ9IjM1Ni4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDU4MS4wMDAwMDAgMzU2LjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgoKPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsMzU2LjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iI2I0YjNiMyIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTAgMTc4MCBsMCAtMTc4MCAyOTA1IDAgMjkwNSAwIDAgMTc4MCAwIDE3ODAgLTI5MDUgMCAtMjkwNSAwIDAKLTE3ODB6Ii8+CjwvZz4KPC9zdmc+Cg==",Ge=Oe.thumbnail||ke,Be=Oe.icon||ke,je=Oe.id.toLowerCase(),Ve=t(`
            <div class="gpf-tile fr-tile fr-tile--sm">
                <div class="fr-tile__body">
                    <div class="fr-tile__content">
                        <p class="fr-tile__title">
                            <label class="gpf-label fr-label" title="${Oe.description}">${Oe.title}</label>
                        </p>
                    </div>
                </div>
                <div class="gpf-tile__header fr-tile__header">
                    <div class="fr-tile__pictogram fr-tile__thumbnail">
                        <img id="thumbnail-${Oe.id}" src="${Ge}" width="100%" height="100%" title="${Oe.description}"/>
                    </div>
                    <div class="fr-tile__pictogram fr-tile__icon fr-tile__icon--${je}">
                        <svg>       
                            <image id="icon-${Oe.id}" xlink:href="${Be}"/>    
                        </svg>
                    </div>
                </div>
            </div>
            `),Ze=Ve.firstChild;return Ze&&Ze.addEventListener("click",Qe=>{e.onImageTerritoriesClick(Qe,Oe.id)}),Ve.firstChild}}},logger$3=LoggerByDefault.getLogger("territories"),Territories=class cp extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof cp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="Territories",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){if(e&&(this.draggable&&Draggable.dragElement(this.panelTerritoriesContainer,this.panelTerritoriesHeaderContainer,e.getTargetElement()),this.collapsed||this.buttonTerritoriesShow.setAttribute("aria-pressed",!0),this.auto))for(let t=0;t<TerritoriesJson.length;t++){const ke=TerritoriesJson[t];this.setTerritory(ke)}super.setMap(e),this.options.position&&this.setPosition(this.options.position),this.options.gutter===!1&&this.getContainer().classList.add("gpf-button-no-gutter")}setTerritory(e){var t=this.territories.some(Ge=>Ge.data.id===e.id);if(e&&!t){var ke=this._createTerritoryEntry(e);if(ke)return this.panelTerritoriesEntriesContainer.appendChild(ke),this.territories.push({data:e,dom:ke}),!0}return!1}removeTerritory(e){var t=!1;if(e){for(let ke=0;ke<this.territories.length;ke++)if(this.territories[ke].data.id===e){this.territories[ke].dom.remove(),this.territories.splice(ke,1),t=!0;break}}return t}setCollapse(e){if(e===void 0){logger$3.log("[ERROR] Territory:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPterritoriesPanelClose").click():this.buttonTerritoriesShow.click(),this.collapsed=e)}setReduce(e){e?this.panelTerritoriesEntriesContainer.classList.add("tiles-reduce"):this.panelTerritoriesEntriesContainer.classList.remove("tiles-reduce")}getContainer(){return this.container}initialize(e){this.uid=e.id||SelectorID.generate(),this.options={collapsed:!0,draggable:!1,panel:!0,title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3,territories:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.territories=[],this.buttonTerritoriesShow=null,this.panelTerritoriesContainer=null,this.panelTerritoriesHeaderContainer=null,this.buttonTerritoriesClose=null,this.panelTerritoriesEntriesContainer=null}initContainer(){var e=this._createMainContainerElement(),t=this.buttonTerritoriesShow=this._createShowTerritoriesPictoElement();e.appendChild(t);var ke=this.panelTerritoriesContainer=this._createTerritoriesPanelElement();ke.classList.add("tiles-direction"),ke.classList.add("tiles-"+this.options.tiles);var Ge=this._createTerritoriesPanelDivElement();ke.appendChild(Ge);var Be=this.panelTerritoriesEntriesContainer=this._createTerritoriesElement();if(Be.classList.add("tiles-direction"),Be.classList.add("tiles-"+this.options.tiles),this.options.reduce&&Be.classList.add("tiles-reduce"),this.options.thumbnail?Be.classList.add("tiles-thumbnail"):Be.classList.add("tiles-icon"),ke.appendChild(Be),this.options.panel){var je=this.panelTerritoriesHeaderContainer=this._createTerritoriesPanelHeaderElement(),Ve=this._createTerritoriesPanelIconElement();je.appendChild(Ve);var Ze=this._createTerritoriesPanelTitleElement(this.options.title);je.appendChild(Ze);var Qe=this.buttonTerritoriesClose=this._createTerritoriesPanelCloseElement();je.appendChild(Qe),Ge.appendChild(je)}return e.appendChild(ke),logger$3.log(e),e}onShowTerritoriesClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$3.trace(e),this.collapsed=!this.collapsed}onCloseTerritoriesClick(e){logger$3.trace(e)}onImageTerritoriesClick(e,t){logger$3.trace(e,t);var ke=this.territories.find(Qe=>Qe.data.id===t);if(ke){var Ge=ke.data.zoom,Be=ke.data.bbox||[];if(!Be.length)return;var je=this.getMap(),Ve=je.getView().getProjection().getCode(),Ze=transformExtent(Be,"EPSG:4326",Ve);je.getView().fit(Ze,je.getSize()),Ge&&je.getView().setZoom(Ge),this.setCollapse(!0),this.dispatchEvent({type:"territories:change",territory:ke})}}};Object.assign(Territories.prototype,TerritoriesDOM);Object.assign(Territories.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.Territories=Territories);var ControlListDOM={_addUID:function(Oe){var e=this._uid?Oe+"-"+this._uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPcontrolList"),Oe.className="GPwidget gpf-widget gpf-widget-button gpf-mobile-fullscreen",Oe},_createShowControlListPictoElement:function(){var Oe=this,e=document.createElement("button"),t=document.createElement("span");return e.appendChild(t),t.innerText="+",e.id=this._addUID("GPshowControlListPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowControlListPicto gpf-btn gpf-btn--tertiary gpf-btn-icon gpf-btn-icon-controllist fr-btn fr-btn--tertiary",e.setAttribute("aria-label","Tous mes outils"),e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowControlListPanelClick(ke)}):e.attachEvent&&e.attachEvent("onclick",function(ke){var Ge=ke.target.ariaPressed==="true";ke.target.setAttribute("aria-pressed",!Ge),Oe.onShowControlListPanelClick(ke)}),e},_createControlListPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPcontrolListPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createControlListPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__body fr-modal__body",Oe},_createControlListPanelHeaderElement:function(){var Oe=this,e=document.createElement("div");e.className="GPpanelHeader gpf-panel__header fr-modal__header";var t=document.createElement("div");t.className="GPpanelTitle gpf-panel__title fr-modal__title fr-pt-4w",t.innerHTML="Mes outils",e.appendChild(t);var ke=document.createElement("button");ke.id=this._addUID("GPcontrolListPanelClose"),ke.className="GPpanelClose GPcontrolListPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline fr-m-1w",ke.title="Fermer le panneau",ke.addEventListener?ke.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowControlListPicto")).click()},!1):ke.attachEvent&&ke.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowControlListPicto")).click()});var Ge=document.createElement("span");return Ge.className="GPelementHidden gpf-visible",Ge.innerText="Fermer",ke.appendChild(Ge),e.appendChild(ke),e},_createControlListPanelContentElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__content fr-modal__content",Oe},_createControlListPanelFooterElement:function(Oe){var e=document.createElement("div");e.className="GPpanelFooter gpf-panel__footer fr-modal__footer";var t=document.createElement("button");return t.classList.add("gpf-btn","gpf-btn--tertiary","fr-btn","fr-btn--tertiary"),t.innerText="+ Ajouter plus d'outils",t.addEventListener("click",function(){Oe.click()}),e.appendChild(t),e},_createControlListPanelControl:function(Oe){let e;try{e=Oe.getContainer()}catch{e=Oe.container}var t=document.createElement("div"),ke=e.querySelector(".GPshowOpen").cloneNode();ke.id=ke.id+"-controllist",ke.classList.add("inside-control-list"),t.appendChild(ke);var Ge=document.createElement("div"),Be=document.createElement("span");if(Ge.appendChild(Be),e.querySelector(".GPshowOpen").ariaLabel?Be.innerText=e.querySelector(".GPshowOpen").ariaLabel:e.querySelector(".GPpanelTitle")?Be.innerText=e.querySelector(".GPpanelTitle").innerText:e.querySelector("[class^='gpf-btn-header-']")&&(Be.innerText=e.querySelector("[class^='gpf-btn-header-']").title),Oe.description){var je=document.createElement("span");je.innerText=Oe.description,Ge.appendChild(je)}return t.appendChild(Ge),t.addEventListener("click",function(){e.querySelector(".GPshowOpen").click()}),t}},logger$2=LoggerByDefault.getLogger("controlList"),ControlList=class up extends ControlExtended{constructor(e){if(e=e||{},super(e),!(this instanceof up))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return e.controlCatalogElement?this.controlCatalogElement=e.controlCatalogElement:this.controlCatalogElement=null,this.CLASSNAME="ControlList",this.initialize(e),this._container=this._initContainer(),this.element?this.element.appendChild(this._container):this.element=this._container,this}setMap(e){e&&(this.draggable&&Draggable.dragElement(this._ControlListPanelContainer,this._ControlListPanelHeaderContainer,e.getTargetElement()),this.collapsed||this._pictoControlListButton.setAttribute("aria-pressed",!0)),super.setMap(e),this.options.position&&this.setPosition(this.options.position)}getCollapsed(){return this.collapsed}setCollapsed(e){if(e===void 0){logger$2.log("[ERROR] ControlList:setCollapsed - missing collapsed parameter");return}e&&this.collapsed||!e&&!this.collapsed||(e?document.getElementById("GPcontrolListPanelClose-"+this._uid).click():this._pictoIsoButton.click(),this.collapsed=e)}getContainer(){return this._container}clean(){this._clearIsoInputs(),this._originPoint.clearResults(),document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginCoords_1-"+this._uid).value="",document.getElementById("GPlocationOrigin_1-"+this._uid).value="",document.getElementById("GPlocationPoint_1-"+this._uid).style.cssText="",document.getElementById("GPlocationOriginPointer_1-"+this._uid).checked=!1,document.getElementById("GPlocationOrigin_1-"+this._uid).className="GPlocationOriginVisible gpf-visible",document.getElementById("GPlocationOriginCoords_1-"+this._uid).className="GPlocationOriginHidden gpf-hidden",this._currentIsoResults=null,this.setLayer()}initialize(e){e.collapsed==="true"&&(e.collapsed=!0),e.collapsed==="false"&&(e.collapsed=!1),this.options={collapsed:!0,draggable:!1},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this._uid=this.options.id||SelectorID.generate()}_initContainer(){var e=this._createMainContainerElement(),t=this._pictoControlListButton=this._createShowControlListPictoElement();e.appendChild(t);var ke=this._ControlListPanelContainer=this._createControlListPanelElement(),Ge=this._createControlListPanelDivElement();ke.appendChild(Ge);var Be=this._ControlListPanelHeaderContainer=this._createControlListPanelHeaderElement();Ge.appendChild(Be);var je=this._ControlListPanelContentContainer=this._createControlListPanelContentElement();if(Ge.appendChild(je),this.controlCatalogElement){var Ve=this._createControlListPanelFooterElement(this.controlCatalogElement);Ge.appendChild(Ve)}return e.appendChild(ke),e}onShowControlListPanelClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen();var t=this.getMap();Interactions.unset(t);var ke=this._pictoControlListButton.ariaPressed;this.collapsed=ke!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position),this.collapsed?this._ControlListPanelContentContainer.innerHTML="":this.getMap().getControls().getArray().forEach(Be=>{if(Be.listable){let je=this._createControlListPanelControl(Be);this._ControlListPanelContentContainer.appendChild(je)}})}};Object.assign(ControlList.prototype,ControlListDOM);Object.assign(ControlList.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ControlList=ControlList);var title="contextMenu",ContextMenuDOM={_addUID:function(Oe){var e=this.uid?Oe+"-"+this.uid:Oe;return e},_createMainContainerElement:function(){var Oe=document.createElement("div");return Oe.id=this._addUID("GPpointInfo"),Oe.className="GPpointInfo GPwidget gpf-widget",Oe},_createShowPointInfoPictoElement:function(){var Oe=this,e=document.createElement("button");return e.id=this._addUID("GPshowPointInfoPicto"),e.className="GPshowOpen GPshowAdvancedToolPicto GPshowPointInfoPicto gpf-btn gpf-btn-icon gpf-btn-icon-widget fr-btn",e.title=`${title}`,e.setAttribute("tabindex","0"),e.setAttribute("aria-pressed",!1),e.setAttribute("type","button"),e.addEventListener?e.addEventListener("click",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke),Oe.onShowPointInfoClick(t)}):e.attachEvent&&e.attachEvent("onclick",function(t){var ke=t.target.ariaPressed==="true";t.target.setAttribute("aria-pressed",!ke),Oe.onShowPointInfoClick(t)}),e},_createPointInfoPanelElement:function(){var Oe=document.createElement("dialog");return Oe.id=this._addUID("GPpointInfoPanel"),Oe.className="GPpanel gpf-panel fr-modal",Oe},_createPointInfoPanelDivElement:function(){var Oe=document.createElement("div");return Oe.className="gpf-panel__pointInfo",Oe},_createPointInfoPanelHeaderElement:function(){var Oe=document.createElement("div");return Oe.className="GPpointInfoHeader gpf-panel__header_pointInfo",Oe},_createPointInfoPanelIconElement:function(){var Oe=document.createElement("label");return Oe.className="GPpanelHeader gpf-btn-header-pointInfo gpf-btn-icon-header-pointInfo",Oe.title="Adresse et coordonnées",Oe},_createPointInfoPanelTitleElement:function(){var Oe=document.createElement("div");return Oe.className="GPpanelTitle gpf-panel__title_pointInfo fr-pt-4w",Oe.innerHTML="Adresse et coordonnées",Oe},_createPointInfoPanelCloseElement:function(){var Oe=this,e=document.createElement("button");e.className="GPpanelClose GPpointInfoPanelClose gpf-btn gpf-btn-icon-close fr-btn--close fr-btn fr-btn--tertiary-no-outline",e.title="Fermer le panneau";var t=document.createElement("span");return t.className="GPelementHidden gpf-visible",t.innerText="Fermer",e.appendChild(t),e.addEventListener?e.addEventListener("click",function(){document.getElementById(Oe._addUID("GPshowPointInfoPicto")).click(),Oe.onClosePointInfoClick()},!1):e.attachEvent&&e.attachEvent("onclick",function(){document.getElementById(Oe._addUID("GPshowPointInfoPicto")).click(),Oe.onClosePointInfoClick()}),e},_createEntriesElement:function(){var Oe=document.createElement("div");Oe.className="point-info-content gpf-panel__body fr-modal__body";var e=document.createElement("div");return Oe.appendChild(e),Oe},_createPinDOMOverlay:function(Oe){var e=document.createElement("div"),t=document.createElement("img");return t.src=Oe,e.appendChild(t),e}};/*!
  * ol-contextmenu - v5.5.0
  * https://github.com/jonataswalker/ol-contextmenu
  * Built: Wed Aug 07 2024 12:29:18 GMT+0000 (Coordinated Universal Time)
  */var k$1=Object.defineProperty,I$1=(Oe,e,t)=>e in Oe?k$1(Oe,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):Oe[e]=t,a$1=(Oe,e,t)=>I$1(Oe,typeof e!="symbol"?e+"":e,t),S$1={exports:{}};function x$2(){}x$2.prototype={on:function(Oe,e,t){var ke=this.e||(this.e={});return(ke[Oe]||(ke[Oe]=[])).push({fn:e,ctx:t}),this},once:function(Oe,e,t){var ke=this;function Ge(){ke.off(Oe,Ge),e.apply(t,arguments)}return Ge._=e,this.on(Oe,Ge,t)},emit:function(Oe){var e=[].slice.call(arguments,1),t=((this.e||(this.e={}))[Oe]||[]).slice(),ke=0,Ge=t.length;for(ke;ke<Ge;ke++)t[ke].fn.apply(t[ke].ctx,e);return this},off:function(Oe,e){var t=this.e||(this.e={}),ke=t[Oe],Ge=[];if(ke&&e)for(var Be=0,je=ke.length;Be<je;Be++)ke[Be].fn!==e&&ke[Be].fn._!==e&&Ge.push(ke[Be]);return Ge.length?t[Oe]=Ge:delete t[Oe],this}};S$1.exports=x$2;var _$1=S$1.exports.TinyEmitter=x$2,L$1=(Oe=>(Oe.CONTEXTMENU="contextmenu",Oe.CLICK="click",Oe.DBLCLICK="dblclick",Oe))(L$1||{}),p$1=(Oe=>(Oe.BEFOREOPEN="beforeopen",Oe.OPEN="open",Oe.CLOSE="close",Oe.ADD_MENU_ENTRY="add-menu-entry",Oe))(p$1||{});let w$1=class extends MapBrowserEvent{constructor(e){super(e.type,e.map,e.originalEvent)}};const z$1={width:150,scrollAt:4,eventType:L$1.CONTEXTMENU,defaultItems:!0,items:[]},d$1="ol-ctx-menu",r={container:`${d$1}-container`,separator:`${d$1}-separator`,submenu:`${d$1}-submenu`,hidden:`${d$1}-hidden`,icon:`${d$1}-icon`,zoomIn:`${d$1}-zoom-in`,zoomOut:`${d$1}-zoom-out`,unselectable:"ol-unselectable"},C$1=[{text:"Zoom In",classname:`${r.zoomIn} ${r.icon}`,callback:(Oe,e)=>{const t=e.getView();t.animate({zoom:Number(t.getZoom())+1,duration:700,center:Oe.coordinate})}},{text:"Zoom Out",classname:`${r.zoomOut} ${r.icon}`,callback:(Oe,e)=>{const t=e.getView();t.animate({zoom:Number(t.getZoom())-1,duration:700,center:Oe.coordinate})}}];function y$1(Oe){const e=document.createDocumentFragment(),t=document.createElement("div");for(t.innerHTML=Oe;t.firstChild;)e.append(t.firstChild);return e}function P$1(Oe){var Ze,Qe;const e=document.importNode(Oe),t=Oe.offsetWidth;e.style.cssText=`position: fixed; top: 0; left: 0; overflow: auto; visibility: hidden; pointer-events: none; height: unset; max-height: unset; width: ${t}px`;const ke=y$1("<span>Foo</span>"),Ge=y$1("<span>Foo</span>"),Be=document.createElement("li"),je=document.createElement("li");Be.append(ke),je.append(Ge),e.append(Be),e.append(je),(Ze=Oe.parentNode)==null||Ze.append(e);const Ve=e.offsetHeight/2;return(Qe=Oe.parentNode)==null||Qe.removeChild(e),Ve}function N$1({parentNode:Oe,item:e,isSubmenu:t=!1,isInsideSubmenu:ke=!1,emitter:Ge}){const Be=`_${Math.random().toString(36).slice(2,11)}`;if(typeof e!="string"&&"text"in e){const en=`<span>${e.text}</span>`,tn=y$1(en),an=document.createElement("li");e.classname=e.classname||"",e.icon&&(e.classname===""?e.classname=r.icon:e.classname.includes(r.icon)===!1&&(e.classname+=` ${r.icon}`),an.setAttribute("style",`background-image:url(${e.icon})`)),an.id=Be,an.className=e.classname,an.append(tn),Oe.append(an);const cn={id:Be,isSubmenu:t,isInsideSubmenu:ke,isSeparator:!1,callback:"callback"in e?e.callback:null,data:"data"in e?e.data:null};return Ge.emit(p$1.ADD_MENU_ENTRY,cn,an),an}const je=`<li id="${Be}" class="${r.separator}"><hr></li>`,Ve=y$1(je);Oe.append(Ve);const Ze=Oe.lastChild,Qe={id:Be,isSubmenu:!1,isInsideSubmenu:!1,isSeparator:!0,callback:null,data:null};return Ge.emit(p$1.ADD_MENU_ENTRY,Qe,Ze),Ze}function M$1({container:Oe,items:e,menuWidth:t,isInsideSubmenu:ke,emitter:Ge}){e.forEach(Be=>{if(typeof Be!="string"&&"items"in Be&&Array.isArray(Be.items)){const je=N$1({parentNode:Oe,item:Be,isSubmenu:!0,emitter:Ge});je.classList.add(r.submenu);const Ve=document.createElement("ul");Ve.classList.add(r.container),Ve.style.width=`${t}px`,je.append(Ve),M$1({emitter:Ge,menuWidth:t,container:Ve,items:Be.items,isInsideSubmenu:!0})}else N$1({parentNode:Oe,item:Be,isSubmenu:!1,isInsideSubmenu:ke,emitter:Ge})})}function b$1(Oe,e){if(!Oe)throw new Error(e)}let R$1=class extends Control{constructor(e={}){b$1(typeof e=="object","@param `opts` should be object type!");const t=document.createElement("div");super({element:t}),a$1(this,"map"),a$1(this,"emitter",new _$1),a$1(this,"container"),a$1(this,"coordinate",[]),a$1(this,"pixel",[]),a$1(this,"contextMenuEventListener"),a$1(this,"entryCallbackEventListener"),a$1(this,"mapMoveListener"),a$1(this,"lineHeight",0),a$1(this,"disabled"),a$1(this,"opened"),a$1(this,"items",[]),a$1(this,"menuEntries",new Map),a$1(this,"options"),this.options={...z$1,...e};const ke=document.createElement("ul");t.append(ke),t.style.width=`${this.options.width}px`,t.classList.add(r.container,r.unselectable,r.hidden),this.container=t,this.contextMenuEventListener=Ge=>{this.handleContextMenu(Ge)},this.entryCallbackEventListener=Ge=>{this.handleEntryCallback(Ge)},this.mapMoveListener=()=>{this.handleMapMove()},this.disabled=!1,this.opened=!1,window.addEventListener("beforeunload",()=>{this.removeListeners()},{once:!0})}clear(){for(const e of this.menuEntries.keys())this.removeMenuEntry(e);this.container.replaceChildren(),this.container.append(document.createElement("ul"))}enable(){this.disabled=!1}disable(){this.disabled=!0}getDefaultItems(){return C$1}countItems(){return this.menuEntries.size}extend(e){b$1(Array.isArray(e),"@param `items` should be an Array."),M$1({items:e,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild})}closeMenu(){this.opened=!1,this.container.classList.add(r.hidden),this.dispatchEvent(p$1.CLOSE)}isOpen(){return this.opened}updatePosition(e){b$1(Array.isArray(e),"@param `pixel` should be an Array."),this.isOpen()&&(this.pixel=e,this.positionContainer())}pop(){const e=Array.from(this.menuEntries.keys()).pop();e&&this.removeMenuEntry(e)}shift(){const e=Array.from(this.menuEntries.keys()).shift();e&&this.removeMenuEntry(e)}push(e){e&&this.extend([e])}setMap(e){if(super.setMap(e),e){this.map=e,e.getViewport().addEventListener(this.options.eventType,this.contextMenuEventListener,!1),e.on("movestart",()=>{this.handleMapMove()}),this.emitter.on(p$1.ADD_MENU_ENTRY,(ke,Ge)=>{this.handleAddMenuEntry(ke,Ge)},this),this.items=this.options.defaultItems?this.options.items.concat(C$1):this.options.items,M$1({items:this.items,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild});const t=this.getMenuEntriesLength();this.lineHeight=t>0?this.container.offsetHeight/t:P$1(this.container)}else this.removeListeners(),this.clear()}removeListeners(){this.map.getViewport().removeEventListener(this.options.eventType,this.contextMenuEventListener,!1),this.emitter.off(p$1.ADD_MENU_ENTRY)}removeMenuEntry(e){let t=document.getElementById(e);t==null||t.remove(),t=null,this.menuEntries.delete(e)}handleContextMenu(e){var t;this.coordinate=this.map.getEventCoordinate(e),this.pixel=this.map.getEventPixel(e),this.dispatchEvent(new w$1({map:this.map,originalEvent:e,type:p$1.BEFOREOPEN})),!this.disabled&&(this.options.eventType===L$1.CONTEXTMENU&&(e.stopPropagation(),e.preventDefault()),setTimeout(()=>{this.openMenu(e)}),(t=e.target)==null||t.addEventListener("pointerdown",ke=>{this.opened&&(ke.stopPropagation(),this.closeMenu())},{once:!0}))}openMenu(e){this.opened=!0,this.positionContainer(),this.container.classList.remove(r.hidden),this.dispatchEvent(new w$1({map:this.map,originalEvent:e,type:p$1.OPEN}))}getMenuEntriesLength(){return Array.from(this.menuEntries).filter(([,e])=>e.isSeparator===!1&&e.isSubmenu===!1&&e.isInsideSubmenu===!1).length}positionContainer(){const e=this.map.getSize()||[0,0],t={w:e[0]-this.pixel[0],h:e[1]-this.pixel[1]},ke=this.getMenuEntriesLength(),Ge={w:this.container.offsetWidth,h:Math.round(this.lineHeight*ke)},Be=t.w>=Ge.w?this.pixel[0]+5:this.pixel[0]-Ge.w;this.container.style.left=`${Be}px`,this.container.style.top=t.h>=Ge.h?`${this.pixel[1]-10}px`:`${this.pixel[1]-Ge.h}px`,this.container.style.right="auto",this.container.style.bottom="auto",t.w-=Ge.w;const je=Qe=>Array.from(Qe.children).filter(en=>en.tagName==="LI"&&en.classList.contains(r.submenu));let Ve=0;const Ze=(Qe,en)=>{Ve+=1,je(Qe).forEach(tn=>{const an=en>=Ge.w?Ge.w-8:(Ge.w+8)*-1,cn=tn.querySelector(`ul.${r.container}`),un=Math.round(this.lineHeight*Array.from(cn.children).filter(dn=>dn.tagName==="LI").length);cn.style.left=`${an}px`,cn.style.right="auto",cn.style.top=t.h>=un+Ge.h?"0":`-${cn.offsetHeight-25}px`,cn.style.bottom="auto",cn.style.zIndex=String(Ve),je(cn).length>0&&Ze(cn,en-Ge.w)})};Ze(this.container.firstElementChild,t.w)}handleMapMove(){this.closeMenu()}handleEntryCallback(e){var Be;e.preventDefault(),e.stopPropagation();const t=e.currentTarget,ke=this.menuEntries.get(t.id);if(!ke)return;const Ge={data:ke.data,coordinate:this.coordinate};this.closeMenu(),(Be=ke.callback)==null||Be.call(ke,Ge,this.map)}handleAddMenuEntry(e,t){this.menuEntries.set(e.id,e),this.positionContainer(),"callback"in e&&typeof e.callback=="function"&&t.addEventListener("click",this.entryCallbackEventListener,!1)}};var logger$1=LoggerByDefault.getLogger("contextMenu"),ContextMenu=class dp extends ControlExtended{constructor(e){if(e=e||{},super({element:e.element,target:e.target,render:e.render}),!(this instanceof dp))throw new TypeError("ERROR CLASS_CONSTRUCTOR");return this.CLASSNAME="ContextMenu",this.initialize(e),this.container=this.initContainer(),this.element?this.element.appendChild(this.container):this.element=this.container,this}setMap(e){e?(e.addControl(this.contextmenu),e.addOverlay(this._marker),this.auto&&this.addEventsListeners()):this.auto&&this.removeEventsListeners(),super.setMap(e)}initialize(e){this.uid=SelectorID.generate(),this.options={collapsed:!0,draggable:!1,auto:!0,panel:!0,contextMenuItemsOptions:[]},Helper.assign(this.options,e),this.collapsed=this.options.collapsed,this.draggable=this.options.draggable,this.auto=this.options.auto,this.buttonContextMenuShow=null,this.panelContextMenuContainer=null,this.panelContextMenuHeaderContainer=null,this.buttonContextMenuClose=null,this.panelContextMenuEntriesContainer=null,this.eventsListeners=[],this.controlList=[],this.itiPoints=new Array(7),this._marker=new Overlay({element:this._createPinDOMOverlay(Marker.lightOrange),stopEvent:!1,offset:Marker.defaultOffset});var t=this.getAvailableContextMenuControls.call(this);this.contextMenuItemsOptions=[],e.contextMenuItemsOptions instanceof Array&&e.contextMenuItemsOptions&&e.contextMenuItemsOptions.length>0&&(this.contextMenuItemsOptions=e.contextMenuItemsOptions.map(ke=>({...ke,classname:"ol-context-menu-custom fr-text--md"}))),this.contextmenu=new R$1({defaultItems:!1,width:250,items:t})}initContainer(){var e=this._createMainContainerElement(),t=this.buttonPointInfoShow=this._createShowPointInfoPictoElement();e.appendChild(t);var ke=this.panelPointInfoContainer=this._createPointInfoPanelElement(),Ge=this._createPointInfoPanelDivElement();ke.appendChild(Ge);var Be=this.panelPointInfoEntriesContainer=this._createEntriesElement();ke.appendChild(Be);var je=this.panelPointInfoHeaderContainer=this._createPointInfoPanelHeaderElement(),Ve=this._createPointInfoPanelIconElement();je.appendChild(Ve);var Ze=this._createPointInfoPanelTitleElement();je.appendChild(Ze);var Qe=this.buttonPointInfoClose=this._createPointInfoPanelCloseElement();return je.appendChild(Qe),Ge.appendChild(je),e.appendChild(ke),logger$1.log(e),e}addEventsListeners(){this.contextmenu.on("open",e=>{e.this=this,this.onOpenContextMenu(e)}),this.contextmenu.on("close",e=>{e.this=this,this.onCloseContextMenu(e)})}removeEventsListeners(){}getAvailableContextMenuControls(){var e=[{text:"Adresse / Coordonnées",classname:"ol-context-menu-custom fr-text--md",callback:this.displayAdressAndCoordinate.bind(this),control_CLASSNAME:"ContextMenu"},{text:"Itinéraire depuis ce lieu",classname:"ol-context-menu-custom fr-text--md",callback:this.defineStartPoint.bind(this),control_CLASSNAME:"Route"},{text:"Itinéraire vers ce lieu",classname:"ol-context-menu-custom fr-text--md",callback:this.defineEndPoint.bind(this),control_CLASSNAME:"Route"},{text:"Isochrone - à proximité",classname:"ol-context-menu-custom fr-text--md",callback:this.computeIsochrone.bind(this),control_CLASSNAME:"Isocurve"},{text:"Ajouter des cartes / données",classname:"ol-context-menu-custom fr-text--md",callback:this.openCatalogue.bind(this),control_CLASSNAME:"Catalog"},"separator",{text:"Afficher la légende",classname:"ol-context-menu-custom fr-text--md",callback:this.displayLegend.bind(this),control_CLASSNAME:"Legends"}],t=this.getMap(),ke=[];t&&(ke=t.getControls().getArray());var Ge=e.filter(Be=>{if(ke.filter(Ve=>Ve.CLASSNAME&&Ve.CLASSNAME==Be.control_CLASSNAME).length>0||Be=="separator")return Be});return Array.prototype.push.apply(Ge,this.contextMenuItemsOptions),Ge}defineStartPoint(e){let t=this.to4326(e.coordinate);var ke=this.getMap().getControls().getArray().filter(Ge=>Ge.CLASSNAME=="Route")[0];ke._showRouteButton.click(),ke._showRouteButton.setAttribute("aria-pressed",!0),this.itiPoints[0]=t,ke.setData({points:this.itiPoints})}defineEndPoint(e){let t=this.to4326(e.coordinate);var ke=this.getMap().getControls().getArray().filter(Ge=>Ge.CLASSNAME=="Route")[0];ke._showRouteButton.click(),ke._showRouteButton.setAttribute("aria-pressed",!0),this.itiPoints[6]=t,ke.setData({points:this.itiPoints})}to4326(e){return transform$1([parseFloat(e[0]),parseFloat(e[1])],"EPSG:3857","EPSG:4326")}computeIsochrone(e){var t=this.getMap().getControls().getArray().filter(Be=>Be.CLASSNAME=="Isocurve")[0];t._pictoIsoButton.click(),t._pictoIsoButton.setAttribute("aria-pressed",!0);let ke=this.to4326(e.coordinate);var Ge=t.getData();Ge.point=ke,t.setData(Ge)}displayLegend(e){var t=this.getMap().getControls().getArray().filter(ke=>ke.CLASSNAME=="Legends")[0];t.buttonLegendsShow.click(),t.buttonLegendsShow.setAttribute("aria-pressed",!0)}openCatalogue(e){var t=this.getMap().getControls().getArray().filter(ke=>ke.CLASSNAME=="Catalog")[0];t.buttonCatalogShow.click(),t.buttonCatalogShow.setAttribute("aria-pressed",!0)}displayAdressAndCoordinate(e){let t=this.to4326(e.coordinate);this.panelPointInfoEntriesContainer.innerHTML="",this._marker.setPosition(fromLonLat(t)),this.buttonPointInfoShow.click(),this.buttonPointInfoShow.setAttribute("aria-pressed",!0);var ke=document.createElement("div");ke.innerHTML=t[0].toFixed(6)+", "+t[1].toFixed(6);var Ge=document.createElement("div"),Be=document.createElement("div"),je=document.createElement("div");this.panelPointInfoEntriesContainer.appendChild(ke),this.panelPointInfoEntriesContainer.appendChild(Ge),this.panelPointInfoEntriesContainer.appendChild(Be),this.panelPointInfoEntriesContainer.appendChild(je);var Ve={rawResponse:!1,scope:null,onSuccess:function(en){en.elevations.length>0&&en.elevations[0].z&&(je.innerHTML="Altitude : "+en.elevations[0].z+"m")},onFailure:function(en){},positions:[{lon:t[0],lat:t[1]}],outputFormat:"json"};Gp.Services.getAltitude(Ve);var Ze={onSuccess:function(en){en.locations.length>0&&(Be.innerHTML="Parcelle : "+en.locations[0].placeAttributes.districtcode+" / "+en.locations[0].placeAttributes.section+" / "+en.locations[0].placeAttributes.number)},onFailure:function(en){},position:{lon:t[0],lat:t[1]},searchGeometry:{type:"Circle",coordinates:[t[0],t[1]],radius:100},index:"CadastralParcel",maximumResponses:1};Gp.Services.reverseGeocode(Ze);var Qe={onSuccess:function(en){en.locations.length>0&&(Ge.innerHTML=en.locations[0].placeAttributes.label)},onFailure:function(en){},position:{lon:t[0],lat:t[1]},searchGeometry:{type:"Circle",coordinates:[t[0],t[1]],radius:100},index:"StreetAddress",maximumResponses:1};Gp.Services.reverseGeocode(Qe)}onShowPointInfoClick(e){e.target.ariaPressed==="true"&&this.onPanelOpen(),logger$1.trace(e);var t=this.buttonPointInfoShow.ariaPressed;this.collapsed=t!=="true",this.dispatchEvent("change:collapsed"),this.options.position&&!this.collapsed&&this.updatePosition(this.options.position)}onClosePointInfoClick(e){logger$1.trace(e),this._marker.setPosition(void 0)}onCloseContextMenu(e){e.target.clear()}onOpenContextMenu(e){var t=()=>{e.this.controlList=[];var Ge=e.this.getMap().getControls().getArray().filter(Be=>Be.CLASSNAME=="Route");Ge.length>0&&Ge[0].on("route:newresults",()=>{e.this.itiPoints=new Array(7)})},ke=e.this.getAvailableContextMenuControls();e.target.clear(),e.target.extend(ke),t()}};Object.assign(ContextMenu.prototype,ContextMenuDOM);Object.assign(ContextMenu.prototype,ContextMenu);Object.assign(ContextMenu.prototype,Widget);window.ol&&window.ol.control&&(window.ol.control.ContextMenu=ContextMenu);function useUrlParams(){var Oe={};const e=useUrlSearchParams("history");if(e){const Ge=Object.keys(e);for(let Be=0;Be<Ge.length;Be++){const je=Ge[Be];switch(je){case"c":var t=e[je].split(",");Oe.lon=t[0],Oe.lat=t[1];var ke=fromLonLat(t);Oe.x=ke[0],Oe.y=ke[1],Oe.center=[Oe.lon,Oe.lat];break;case"l":Oe.layers=e[je];break;case"w":Oe.controls=e[je];break;case"z":Oe.zoom=parseInt(e[je],10);break}}}return Oe}const useControls={OverviewMap:{id:"OverviewMap",active:!0,disable:!0,analytic:!0},SearchEngine:{id:"SearchEngine",active:!0,disable:!0,analytic:!1},ScaleLine:{id:"ScaleLine",active:!0,disable:!0,analytic:!1},LayerSwitcher:{id:"LayerSwitcher",active:!0,disable:!0,analytic:!0},GetFeatureInfo:{id:"GetFeatureInfo",active:!0,disable:!0,analytic:!0},Legends:{id:"Legends",active:!0,disable:!0,analytic:!0},Drawing:{id:"Drawing",active:!0,disable:!1,analytic:!0},Isocurve:{id:"Isocurve",active:!0,disable:!1,analytic:!0},ReverseGeocode:{id:"ReverseGeocode",active:!0,disable:!1,analytic:!0},Zoom:{id:"Zoom",active:!0,disable:!0,analytic:!1},Route:{id:"Route",active:!0,disable:!1,analytic:!0},FullScreen:{id:"FullScreen",active:!0,disable:!0,analytic:!1},MeasureLength:{id:"MeasureLength",active:!0,disable:!1,analytic:!0},MeasureArea:{id:"MeasureArea",active:!0,disable:!1,analytic:!0},MeasureAzimuth:{id:"MeasureAzimuth",active:!0,disable:!1,analytic:!0},Share:{id:"Share",active:!0,disable:!0,analytic:!0},Print:{id:"Print",active:!0,disable:!0,analytic:!0},MousePosition:{id:"MousePosition",active:!0,disable:!1,analytic:!1},Territories:{id:"Territories",active:!0,disable:!0,analytic:!0},ElevationPath:{id:"ElevationPath",active:!0,disable:!1,analytic:!1},LayerImport:{id:"LayerImport",active:!0,disable:!0,analytic:!0},ControlList:{id:"ControlList",active:!0,disable:!0,analytic:!0},ContextMenu:{id:"ContextMenu",active:!0,disable:!0,analytic:!0}};function useDefaultControls(){var Oe=[];for(var e in useControls)useControls[e].active===!0&&useControls[e].disable===!0&&Oe.push(useControls[e].id);return Oe}function useControlsMenuOptions(){return[{label:"Barre de Recherche",id:"searchEngine",name:useControls.SearchEngine.id,hint:"Barre de recherche sur la carte",disabled:useControls.SearchEngine.disable},{label:"Mini carte",id:"overview",name:useControls.OverviewMap.id,hint:"Petite carte pour se repérer",disabled:useControls.OverviewMap.disable},{label:"Scale Line",id:"scaleLine",name:useControls.ScaleLine.id,hint:"Echelle",disabled:useControls.ScaleLine.disable},{label:"Gestionnaire de couches",id:"layerSwitcher",name:useControls.LayerSwitcher.id,hint:"Gestionnaire de couches",disabled:useControls.LayerSwitcher.disable},{label:"GetFeatureInfo",id:"getFeatureInfo",name:useControls.GetFeatureInfo.id,hint:"Informations sur les couches",disabled:useControls.GetFeatureInfo.disable},{label:"Légendes",id:"legends",name:useControls.Legends.id,hint:"Légendes",disabled:useControls.Legends.disable},{label:"Croquis",id:"drawing",name:useControls.Drawing.id,hint:"Annoter la carte",disabled:useControls.Drawing.disable},{label:"Geocodage inverse",id:"reverseGeocode",name:useControls.ReverseGeocode.id,hint:"Geocodage inverse",disabled:useControls.ReverseGeocode.disable},{label:"Calcul d'isochrone",id:"isocurve",name:useControls.Isocurve.id,hint:"Calcul d'isochrone",disabled:useControls.Isocurve.disable},{label:"Calcul d'itinéraire",id:"route",name:useControls.Route.id,hint:"Calcul d'itinéraire",disabled:useControls.Route.disable},{label:"Zoom",id:"zoom",name:useControls.Zoom.id,hint:"Zoom",disabled:useControls.Zoom.disable},{label:"Plein écran",id:"fullscreen",name:useControls.FullScreen.id,hint:"Plein écran",disabled:useControls.FullScreen.disable},{label:"Mesure de distance",id:"measureLength",name:useControls.MeasureLength.id,hint:"Mesures",disabled:useControls.MeasureLength.disable},{label:"Mesure d'aire",id:"measureArea",name:useControls.MeasureArea.id,hint:"Mesures",disabled:useControls.MeasureArea.disable},{label:"Mesure d'azimut",id:"measureAzimuth",name:useControls.MeasureAzimuth.id,hint:"Mesures",disabled:useControls.MeasureAzimuth.disable},{label:"Partager une carte",id:"share",name:useControls.Share.id,hint:"Partages",disabled:useControls.Share.disable},{label:"Afficher les coordonnées",id:"mousePosition",name:useControls.MousePosition.id,hint:"Position de la souris",disabled:useControls.MousePosition.disable},{label:"Selectionner un territoire",id:"territories",name:useControls.Territories.id,hint:"Territoires",disabled:useControls.Territories.disable},{label:"Profil altimétrique",id:"elevationPath",name:useControls.ElevationPath.id,hint:"Profil altimétrique",disabled:useControls.ElevationPath.disable},{label:"Importer des données",id:"layerImport",name:useControls.LayerImport.id,hint:"Import de données",disabled:useControls.LayerImport.disable},{label:"Imprimer une carte",id:"print",name:useControls.Print.id,hint:"Impression",disabled:useControls.Print.disable},{label:"Liste des controles",id:"controlList",name:useControls.ControlList.id,hint:"Liste des controles supplémentaires non affichés",disabled:useControls.ControlList.disable},{label:"Menu contextuel",id:"contextMenu",name:useControls.ContextMenu.id,hint:"Menu contextuel au clic droit sur la carte",disabled:useControls.ContextMenu.disable}].filter(Oe=>Object.keys(useControls).includes(Oe.name)).filter(Oe=>!Oe.disabled)}function useControlsExtensionPosition(){return{shareOptions:"top-left",printOptions:"top-right",territoriesOptions:"bottom-left",layerSwitcherOptions:"top-right",legendsOptions:"top-right",getFeatureInfoOptions:"bottom-left",overviewMapOptions:"bottom-left",zoomOptions:"bottom-right",controlListOptions:"top-right",isocurveOptions:"top-right",routeOptions:"top-right",reverseGeocodeOptions:"top-right",fullscreenOptions:"bottom-right",measureLengthOptions:"top-right",measureAreaOptions:"top-right",measureAzimuthOptions:"top-right",elevationPathOptions:"top-right",layerImportOptions:"top-right",mousePositionOptions:"top-right"}}function useControlsPosition(){let Oe=[],e=[];return useControlsExtensionPosition().shareOptions.includes("left")&&Oe.push(useControls.Share.id),useControlsExtensionPosition().shareOptions.includes("right")&&e.push(useControls.Share.id),useControlsExtensionPosition().printOptions.includes("left")&&Oe.push(useControls.Print.id),useControlsExtensionPosition().printOptions.includes("right")&&e.push(useControls.Print.id),useControlsExtensionPosition().layerSwitcherOptions.includes("left")&&Oe.push(useControls.LayerSwitcher.id),useControlsExtensionPosition().layerSwitcherOptions.includes("right")&&e.push(useControls.LayerSwitcher.id),useControlsExtensionPosition().legendsOptions.includes("left")&&Oe.push(useControls.Legends.id),useControlsExtensionPosition().legendsOptions.includes("right")&&e.push(useControls.Legends.id),useControlsExtensionPosition().routeOptions.includes("left")&&Oe.push(useControls.Route.id),useControlsExtensionPosition().routeOptions.includes("right")&&e.push(useControls.Route.id),useControlsExtensionPosition().isocurveOptions.includes("left")&&Oe.push(useControls.Isocurve.id),useControlsExtensionPosition().isocurveOptions.includes("right")&&e.push(useControls.Isocurve.id),useControlsExtensionPosition().reverseGeocodeOptions.includes("left")&&Oe.push(useControls.ReverseGeocode.id),useControlsExtensionPosition().reverseGeocodeOptions.includes("right")&&e.push(useControls.ReverseGeocode.id),useControlsExtensionPosition().getFeatureInfoOptions.includes("left")&&Oe.push(useControls.GetFeatureInfo.id),useControlsExtensionPosition().getFeatureInfoOptions.includes("right")&&e.push(useControls.GetFeatureInfo.id),useControlsExtensionPosition().territoriesOptions.includes("left")&&Oe.push(useControls.Territories.id),useControlsExtensionPosition().territoriesOptions.includes("right")&&e.push(useControls.Territories.id),useControlsExtensionPosition().measureLengthOptions.includes("left")&&Oe.push(useControls.MeasureLength.id),useControlsExtensionPosition().measureLengthOptions.includes("right")&&e.push(useControls.MeasureLength.id),useControlsExtensionPosition().measureAreaOptions.includes("left")&&Oe.push(useControls.MeasureArea.id),useControlsExtensionPosition().measureAreaOptions.includes("right")&&e.push(useControls.MeasureArea.id),useControlsExtensionPosition().measureAzimuthOptions.includes("left")&&Oe.push(useControls.MeasureAzimuth.id),useControlsExtensionPosition().measureAzimuthOptions.includes("right")&&e.push(useControls.MeasureAzimuth.id),useControlsExtensionPosition().mousePositionOptions.includes("left")&&Oe.push(useControls.MousePosition.id),useControlsExtensionPosition().mousePositionOptions.includes("right")&&e.push(useControls.MousePosition.id),useControlsExtensionPosition().elevationPathOptions.includes("left")&&Oe.push(useControls.ElevationPath.id),useControlsExtensionPosition().elevationPathOptions.includes("right")&&e.push(useControls.ElevationPath.id),useControlsExtensionPosition().layerImportOptions.includes("left")&&Oe.push(useControls.LayerImport.id),useControlsExtensionPosition().layerImportOptions.includes("right")&&e.push(useControls.LayerImport.id),useControlsExtensionPosition().controlListOptions.includes("left")&&Oe.push(useControls.ControlList.id),useControlsExtensionPosition().controlListOptions.includes("right")&&e.push(useControls.ControlList.id),{left:Oe,right:e}}var defaultControls=useDefaultControls();const DEFAULT={LAYERS:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2$GEOPORTAIL:OGC:WMTS(1;1;0)",CONTROLS:defaultControls.toString(),X:283734.248995,Y:565511710065e-5,LON:2.5479878714752027,LAT:50.800781249995744,ZOOM:12,FIRSTVISIT:!1,NOINFORMATION:null},NAMESPACE="cartes.gouv.fr",ns=Oe=>NAMESPACE+"."+Oe,useMapStore=defineStore("map",()=>{const Oe=ref({});var e=useUrlParams(),t=DEFAULT.CONTROLS.split(",");for(const Qn in e)if(Object.prototype.hasOwnProperty.call(e,Qn)){if(Qn==="controls"){var ke=e[Qn].split(",");t.forEach(function(Ni){ke.includes(Ni)||(e[Qn]=e[Qn]+","+Ni)})}const Hn=e[Qn];localStorage.setItem(ns(Qn),Hn)}var Ge=useStorage(ns("zoom"),DEFAULT.ZOOM),Be=useStorage(ns("x"),DEFAULT.X),je=useStorage(ns("y"),DEFAULT.Y),Ve=useStorage(ns("lon"),DEFAULT.LON),Ze=useStorage(ns("lat"),DEFAULT.LAT),Qe=useStorage(ns("firstVisit"),DEFAULT.FIRSTVISIT),en=useStorage(ns("noInformation"),DEFAULT.NOINFORMATION),tn=ref();function an(){return tn.value}function cn(Qn){tn.value=Qn}var un=computed(()=>{var Qn=location.pathname.slice(-1),Hn=Qn==="/"?location.pathname.slice(0,-1):location.pathname,Ni=location.origin+Hn.replace("/embed","");return`${Ni}?c=${fn.value}&z=${Math.round(Ge.value)}&l=${pn.value}&w=${vn.value}&permalink=yes`}),dn=computed(()=>{var Qn=location.pathname.slice(-1),Hn=Qn==="/"?location.pathname.slice(0,-1):location.pathname,Ni=location.origin+(Hn.includes("/embed")?Hn:Hn+"/embed");return`${Ni}?c=${fn.value}&z=${Math.round(Ge.value)}&l=${pn.value}&permalink=yes`}),fn=computed(()=>[Ve.value,Ze.value]),pn=useStorage(ns("layers"),DEFAULT.LAYERS);if(!pn.value){var gn=DEFAULT.LAYERS.split(",").filter(function(Qn){return!!Qn});for(let Qn=0;Qn<gn.length;Qn++){var yn=gn[Qn].replace(/\(.*\)/,"");yn&&Pn(yn)}}var vn=useStorage(ns("controls"),DEFAULT.CONTROLS);if(!vn.value){var An=DEFAULT.CONTROLS.split(",").filter(function(Qn){return!!Qn});for(let Qn=0;Qn<An.length;Qn++)zn(An[Qn])}localStorage.setItem(ns("center"),fn.value),localStorage.setItem(ns("permalink"),un.value),localStorage.setItem(ns("permalinkShare"),dn.value),watch(Ge,()=>{localStorage.setItem(ns("zoom"),Math.round(Ge.value))}),watch(Be,()=>{localStorage.setItem(ns("x"),Be.value)}),watch(je,()=>{localStorage.setItem(ns("y"),je.value)}),watch(Ve,()=>{localStorage.setItem(ns("lon"),Ve.value)}),watch(Ze,()=>{localStorage.setItem(ns("lat"),Ze.value)}),watch(pn,()=>{localStorage.setItem(ns("layers"),pn.value.toString())}),watch(un,()=>{localStorage.setItem(ns("permalink"),un.value.toString())}),watch(dn,()=>{localStorage.setItem(ns("permalinkShare"),dn.value.toString())}),watch(fn,()=>{localStorage.setItem(ns("center"),fn.value.toString())}),watch(Qe,()=>{localStorage.setItem(ns("firstVisit"),Qe.value)}),watch(en,()=>{localStorage.setItem(ns("noInformation"),en.value)}),watch(vn,()=>{localStorage.setItem(ns("controls"),vn.value.toString())});function xn(){return Oe.value}function wn(Qn){Oe.value=Qn}function bn(){return pn.value.split(",").map(function(Qn){const Hn=/\(.*\)/gm;return Qn.replace(Hn,"")}).filter(Qn=>Qn!="")}function Mn(){pn.value=""}function Pn(Qn){if(Qn&&!bn().includes(Qn)){var Hn=pn.value===""?[]:pn.value.split(",");Hn.push(Qn+"(1;1;0)"),pn.value=Hn.toString()}}function En(Qn){const Hn=bn().indexOf(Qn);if(Hn!==-1){var Ni=pn.value.split(",");Ni.splice(Hn,1),pn.value=Ni.toString()}}function Cn(Qn,Hn){const Ni=bn().indexOf(Qn);if(Ni!==-1){var On=pn.value.split(","),qn=On[Ni],Un=qn.substring(qn.indexOf("(")+1,qn.indexOf(")")),Ci=Un.split(";");for(const Si in Hn)if(Object.prototype.hasOwnProperty.call(Hn,Si)){const _i=Hn[Si];Si==="opacity"&&(Ci[0]=_i),Si==="visible"&&(Ci[1]=+_i),Si==="gray"&&(Ci[2]=+_i)}pn.value=pn.value.replace(On[Ni],Qn+"("+Ci.join(";")+")")}}function Rn(Qn){if(Qn){var Hn=[];for(let On=0;On<Qn.length;On++){const qn=Qn[On],Un=bn().indexOf(qn);if(Un!==-1){var Ni=pn.value.split(",")[Un];Hn.push(Ni)}}pn.value=Hn.join(",")}}function Tn(Qn){const Hn=bn().indexOf(Qn);if(Hn!==-1){var Ni=pn.value.split(","),On=Ni[Hn],qn=On.substring(On.indexOf("(")+1,On.indexOf(")")),Un=qn.split(";");return{opacity:Number(Un[0]),visible:!!Number(Un[1]),gray:!!Number(Un[2])}}}function Nn(){return vn.value.split(",").filter(function(Qn){return!!Qn})}function Gn(){vn.value=""}function zn(Qn){if(!Nn().includes(Qn)){var Hn=vn.value===""?[]:vn.value.split(",");Hn.push(Qn),vn.value=Hn.toString()}}function $n(Qn){const Hn=Nn().indexOf(Qn);if(Hn!==-1){var Ni=vn.value.split(",");Ni.splice(Hn,1),vn.value=Ni.toString()}}return{map:Oe,zoom:Ge,center:fn,x:Be,y:je,lon:Ve,lat:Ze,firstVisit:Qe,noInformation:en,permalink:un,permalinkShare:dn,menuCatalogueButton:tn,getMap:xn,setMap:wn,getmenuCatalogueButton:an,setmenuCatalogueButton:cn,getLayers:bn,cleanLayers:Mn,addLayer:Pn,removeLayer:En,updateLayerProperty:Cn,updateLayerPosition:Rn,getLayerProperty:Tn,getControls:Nn,cleanControls:Gn,addControl:zn,removeControl:$n}}),mainMap="mainMap",printMap="printMap",_hoisted_1$d=["id"],__default__$k={name:"Map"},_sfc_main$N=Object.assign(__default__$k,{props:{mapId:String},setup(Oe,{expose:e}){const t=useMapStore(),ke=Oe,Ge=ref(null),Be=new Map$1({target:ke.mapId,controls:[]});provide(ke.mapId,Be),onMounted(()=>{CRS.load(),Be.setTarget(Ge.value);const Ze=Ge.value.getElementsByTagName("canvas");Ze.length&&(Ze[0].tabIndex=0),ke.mapId==mainMap&&t.setMap(Be)});const je=()=>{document.activeElement.tagName!=="INPUT"&&document.activeElement.tagName!=="SELECT"&&Ge.value.focus()};return e({mapRef:Ge,updateSize:()=>{Be.updateSize()}}),(Ze,Qe)=>(openBlock(),createElementBlock("div",{id:Oe.mapId,ref_key:"mapRef",ref:Ge,tabindex:"0",onMouseover:je},[renderSlot(Ze.$slots,"default")],40,_hoisted_1$d))}}),__default__$j={name:"View"},_sfc_main$M=Object.assign(__default__$j,{props:{zoom:Number,center:Array,mapId:String},setup(Oe){const e=useMapStore(),t=Oe,ke=inject(t.mapId),Ge=new View({zoom:t.zoom,center:fromLonLat(t.center)});return Ge.on("change:center",Be=>{if(t.mapId==mainMap){e.x=Be.target.getCenter()[0],e.y=Be.target.getCenter()[1];var je=toLonLat(Be.target.getCenter());e.lon=je[0],e.lat=je[1]}}),Ge.on("change:resolution",Be=>{e.zoom=Ge.getZoom()}),onMounted(()=>{ke&&ke.setView(Ge)}),(Be,je)=>null}}),_sfc_main$L={__name:"FullScreen",props:{mapId:String,visibility:Boolean,analytic:Boolean,fullscreenOptions:Object},setup(Oe){const e=Oe,t=inject(e.mapId),ke=ref(new GeoportalFullScreen(e.fullscreenOptions));return onMounted(()=>{e.visibility&&t.addControl(ke.value)}),onBeforeUpdate(()=>{e.visibility?t.addControl(ke.value):t.removeControl(ke.value)}),(Ge,Be)=>null}},useDataStore=defineStore("data",()=>{const Oe=ref({}),e=ref([]),t=ref({}),ke=ref({}),Ge=ref({}),Be=ref({}),je=ref([]),Ve=ref([]),Ze=ref(!1),Qe=ref("");async function en(){try{const Cn="data/layers.json",Tn=await fetch("https://data.geopf.fr/annexes/cartes.gouv.fr-config/public/edito.json"),Gn=await(await fetch(Cn)).json(),zn=await Tn.json(),$n=Object.fromEntries(Object.keys(zn.layers).map(Hn=>[Hn,{...Gn.layers[Hn],...zn.layers[Hn]}])),Qn={...Gn.layers,...$n};return Object.keys(Qn).map(Hn=>{Qn[Hn].key=Hn;let Ni={};return Ni[Hn]=Qn[Hn],Ni}),je.value=zn.territories,Be.value=zn.contacts,Oe.value=zn.informations,e.value=zn.thematics,Ve.value=zn.featured||[],t.value=Qn,ke.value=Gn.generalOptions,Ge.value=Gn.tileMatrixSets,this.isLoaded=!0,Qn}catch(Cn){console.log(Cn),this.isLoaded=!1,Qe.value=Cn.message}}function tn(){return je.value}function an(){return Be.value}function cn(){return Oe.value}function un(){return e.value}function dn(){return Ve.value}function fn(){return t.value}function pn(Cn,Rn){for(const Tn in t.value)if(Object.hasOwnProperty.call(t.value,Tn)){const Nn=t.value[Tn];if(Nn.name===Cn&&Nn.serviceParams.id.split(":")[1]===Rn)return Nn.name+"$GEOPORTAIL:"+Nn.serviceParams.id}}function gn(Cn,Rn){const Tn=this.getLayerIdByName(Cn,Rn);return this.getLayerByID(Tn)}function yn(Cn){return t.value[Cn]}function vn(Cn){return Object.values(t.value).filter(Rn=>{if(Cn&&Rn.title==Cn)return Rn})}function An(Cn){var Rn=[],Tn=ke.value.apiKeys;for(var Nn in Tn){var Gn=Tn[Nn];Gn.forEach(function(zn){zn===Cn&&Rn.push(Nn)})}return Rn}function xn(Cn,Rn){var Tn=null;if((Rn==="WMS"||Object.keys(this.getTileMatrixSets()).length!==0)&&Object.keys(this.getLayers()).length!==0){var Nn=this.getLayerIdByName(Cn,Rn);Tn=this.getLayerParamsByID(Nn)}return Tn}function wn(Cn){var Rn=null;if(Cn){Rn={};var Tn=this.getLayerByID(Cn),Nn=this.getLayerKeysByID(Cn);if(Nn.length===0)return;for(var Gn=0;Gn<Nn.length;Gn++)Tn.serviceParams.serverUrl[Nn[Gn]]&&(Rn.url=Tn.serviceParams.serverUrl[Nn[Gn]]);if(/\/v\//.test(Rn.url)?Rn.styles=" ":Rn.styles=Tn.styles[0].name,Rn.version=Tn.serviceParams.version,Rn.format=Tn.formats[0].name,Rn.projection=Tn.defaultProjection,Rn.minScale=Tn.globalConstraint.minScaleDenominator,Rn.maxScale=Tn.globalConstraint.maxScaleDenominator,Rn.extent=Tn.globalConstraint.bbox,Rn.legends=Tn.legends,Rn.title=Tn.title,Rn.description=Tn.description,Tn.wmtsOptions){Rn.tileMatrixSetLimits=Tn.wmtsOptions.tileMatrixSetLimits;var zn=Tn.wmtsOptions.tileMatrixSetLink;if(zn){Rn.TMSLink=zn;var $n=this.getTileMatrixSetByID(zn);Rn.matrixIds=Object.keys($n.tileMatrices),Rn.tileMatrices=$n.tileMatrices,Rn.nativeResolutions=$n.nativeResolutions}}}return Rn}function bn(Cn){var Rn=null;if(Cn){var Tn=this.getLayerByID(Cn);Rn={},Rn.projection=Tn.defaultProjection,Rn.minScale=Tn.globalConstraint.minScaleDenominator,Rn.maxScale=Tn.globalConstraint.maxScaleDenominator,Rn.extent=Tn.globalConstraint.bbox}return Rn}function Mn(Cn,Rn){var Tn=this.getLayerIdByName(Cn,Rn);return this.getGlobalConstraintsByID(Tn)}function Pn(){return Ge.value}function En(Cn){return Ge.value[Cn]}return{error:Qe,isLoaded:Ze,fetchData:en,getTerritories:tn,getContacts:an,getInformations:cn,getThematics:un,getFeatured:dn,getLayers:fn,getLayerKeysByID:An,getLayerIdByName:pn,getLayerByName:gn,getLayerByID:yn,getLayerByTitle:vn,getTileMatrixSets:Pn,getTileMatrixSetByID:En,getLayerParamsByName:xn,getLayerParamsByID:wn,getGlobalConstraintsByID:bn,getGlobalConstraintsByName:Mn}});function useActionButtonEulerian(Oe){Oe.setAttribute("data-fr-analytics-action",Oe.title),Oe.setAttribute("data-fr-js-button-actionee",!0)}const _sfc_main$K={__name:"ReverseGeocode",props:{mapId:String,visibility:Boolean,analytic:Boolean,reverseGeocodeOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger();useDataStore();const ke=inject(e.mapId),Ge=ref(new ReverseGeocode(e.reverseGeocodeOptions));onMounted(()=>{if(e.visibility&&(ke.addControl(Ge.value),Ge.value.on("reverseGeocode:onclickresult",Be),Ge.value.on("reverseGeocode:compute",je),e.analytic)){var Ve=Ge.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(Ve)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Ge.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Ge.value),e.analytic)){var Ve=Ge.value.element.querySelector("button[id^=GPshowReverseGeocodingPicto-]");useActionButtonEulerian(Ve)}});const Be=Ve=>{t.debug(Ve)},je=Ve=>{t.debug(Ve)};return(Ve,Ze)=>null}},IconGeolocationSVG="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%2024%2036'%20width='48'%20height='48'%3e%3cpath%20fill='%23000091'%20d='M18.364%203.636a9%209%200%200%201%200%2012.728L12%2022.728l-6.364-6.364A9%209%200%200%201%2018.364%203.636ZM12%208a2%202%200%201%200%200%204%202%202%200%200%200%200-4Z'/%3e%3c/svg%3e",_sfc_main$J={__name:"SearchEngine",props:{mapId:String,visibility:Boolean,analytic:Boolean,searchEngineOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger(),ke=useMapStore(),Ge=useDataStore(),Be=inject(e.mapId),je=ref(new SearchEngine(e.searchEngineOptions));onMounted(()=>{e.visibility&&(Be.addControl(je.value),je.value.on("searchengine:search:click",Ve),je.value.on("searchengine:autocomplete:click",Ze),je.value.on("searchengine:geocode:click",Qe),je.value.on("searchengine:coordinates:click",en),je.value.on("searchengine:geolocation:click",tn))}),onBeforeUpdate(()=>{e.visibility||Be.removeControl(je.value)}),onUpdated(()=>{e.visibility&&Be.addControl(je.value)}),onUnmounted(()=>{});const Ve=an=>{var cn=Ge.getLayerIdByName(an.suggest.name,an.suggest.service);t.debug("onClickSearch",cn),ke.addLayer(cn)},Ze=an=>{},Qe=an=>{},en=an=>{},tn=an=>{};return(an,cn)=>null}},UNITS_PROP="units",LEADING_DIGITS=[1,2,5],DEFAULT_DPI=25.4/.28;class ScaleLine extends Control{constructor(e){e=e||{};const t=document.createElement("div");t.style.pointerEvents="none",super({element:t,render:e.render,target:e.target}),this.on,this.once,this.un;const ke=e.className!==void 0?e.className:e.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=ke+"-inner",this.element.className=ke+" "+CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=e.minWidth!==void 0?e.minWidth:64,this.maxWidth_=e.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(UNITS_PROP,this.handleUnitsChanged_),this.setUnits(e.units||"metric"),this.scaleBar_=e.bar||!1,this.scaleBarSteps_=e.steps||4,this.scaleBarText_=e.text||!1,this.dpi_=e.dpi||void 0}getUnits(){return this.get(UNITS_PROP)}handleUnitsChanged_(){this.updateElement_()}setUnits(e){this.set(UNITS_PROP,e)}setDpi(e){this.dpi_=e}updateElement_(){const e=this.viewState_;if(!e){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const t=e.center,ke=e.projection,Ge=this.getUnits(),Be=Ge=="degrees"?"degrees":"m";let je=getPointResolution(ke,e.resolution,t,Be);const Ve=this.minWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI,Ze=this.maxWidth_!==void 0?this.maxWidth_*(this.dpi_||DEFAULT_DPI)/DEFAULT_DPI:void 0;let Qe=Ve*je,en="";if(Ge=="degrees"){const yn=METERS_PER_UNIT$1.degrees;Qe*=yn,Qe<yn/60?(en="″",je*=3600):Qe<yn?(en="′",je*=60):en="°"}else if(Ge=="imperial")Qe<.9144?(en="in",je/=.0254):Qe<1609.344?(en="ft",je/=.3048):(en="mi",je/=1609.344);else if(Ge=="nautical")je/=1852,en="NM";else if(Ge=="metric")Qe<1e-6?(en="nm",je*=1e9):Qe<.001?(en="μm",je*=1e6):Qe<1?(en="mm",je*=1e3):Qe<1e3?en="m":(en="km",je/=1e3);else if(Ge=="us")Qe<.9144?(en="in",je*=39.37):Qe<1609.344?(en="ft",je/=.30480061):(en="mi",je/=1609.3472);else throw new Error("Invalid units");let tn=3*Math.floor(Math.log(Ve*je)/Math.log(10)),an,cn,un,dn,fn,pn;for(;;){un=Math.floor(tn/3);const yn=Math.pow(10,un);if(an=LEADING_DIGITS[(tn%3+3)%3]*yn,cn=Math.round(an/je),isNaN(cn)){this.element.style.display="none",this.renderedVisible_=!1;return}if(Ze!==void 0&&cn>=Ze){an=dn,cn=fn,un=pn;break}else if(cn>=Ve)break;dn=an,fn=cn,pn=un,++tn}const gn=this.scaleBar_?this.createScaleBar(cn,an,en):an.toFixed(un<0?-un:0)+" "+en;this.renderedHTML_!=gn&&(this.innerElement_.innerHTML=gn,this.renderedHTML_=gn),this.renderedWidth_!=cn&&(this.innerElement_.style.width=cn+"px",this.renderedWidth_=cn),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(e,t,ke){const Ge=this.getScaleForResolution(),Be=Ge<1?Math.round(1/Ge).toLocaleString()+" : 1":"1 : "+Math.round(Ge).toLocaleString(),je=this.scaleBarSteps_,Ve=e/je,Ze=[this.createMarker("absolute")];for(let en=0;en<je;++en){const tn=en%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";Ze.push(`<div><div class="ol-scale-singlebar ${tn}" style="width: ${Ve}px;"></div>`+this.createMarker("relative")+(en%2===0||je===2?this.createStepText(en,e,!1,t,ke):"")+"</div>")}return Ze.push(this.createStepText(je,e,!0,t,ke)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${e}px;">`+Be+"</div>":"")+Ze.join("")}createMarker(e){return`<div class="ol-scale-step-marker" style="position: ${e}; top: ${e==="absolute"?3:-10}px;"></div>`}createStepText(e,t,ke,Ge,Be){const Ve=(e===0?0:Math.round(Ge/this.scaleBarSteps_*e*100)/100)+(e===0?"":" "+Be),Ze=e===0?-3:t/this.scaleBarSteps_*-1,Qe=e===0?0:t/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${Ze}px;text-align: ${e===0?"left":"center"};min-width: ${Qe}px;left: ${ke?t+"px":"unset"};">`+Ve+"</div>"}getScaleForResolution(){const e=getPointResolution(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),t=this.dpi_||DEFAULT_DPI,ke=1e3/25.4;return e*ke*t}render(e){const t=e.frameState;t?this.viewState_=t.viewState:this.viewState_=null,this.updateElement_()}}const _sfc_main$I={__name:"ScaleLine",props:{mapId:String,visibility:Boolean,analytic:Boolean,scaleLineOptions:Object},setup(Oe){const e=Oe,t=inject(e.mapId),ke=ref(new ScaleLine(e.scaleLineOptions));return onMounted(()=>{e.visibility&&t.addControl(ke.value)}),onBeforeUpdate(()=>{e.visibility||t.removeControl(ke.value)}),onUpdated(()=>{e.visibility&&t.addControl(ke.value)}),(Ge,Be)=>null}},_sfc_main$H={__name:"OverviewMap",props:{mapId:String,visibility:Boolean,analytic:Boolean,overviewMapOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger(),ke=inject(e.mapId),Ge=ref(new GeoportalOverviewMap(e.overviewMapOptions)),Be=useMatchMedia("SM");watch(Be,()=>{if(e.visibility&&!Be.value){if(ke.addControl(Ge.value),e.analytic){var Ve=Ge.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(Ve)}}else ke.removeControl(Ge.value)}),onMounted(()=>{if(e.visibility&&!Be.value&&(ke.addControl(Ge.value),Ge.value.on("overviewmap:toggle",je),e.analytic)){var Ve=Ge.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(Ve)}}),onBeforeUpdate(()=>{if(e.visibility&&!Be.value){if(ke.addControl(Ge.value),e.analytic){var Ve=Ge.value.element.querySelector("button[id^=GPshowOverviewMap-]");useActionButtonEulerian(Ve)}}else ke.removeControl(Ge.value)});function je(Ve){t.debug(Ve)}return(Ve,Ze)=>null}},_sfc_main$G={__name:"Zoom",props:{mapId:String,visibility:Boolean,analytic:Boolean,zoomOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger(),ke=inject(e.mapId),Ge=ref(new GeoportalZoom(e.zoomOptions));onMounted(()=>{e.visibility&&(ke.addControl(Ge.value),Ge.value.on("zoom:in",Be),Ge.value.on("zoom:out",je))}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Ge.value)}),onUpdated(()=>{e.visibility&&ke.addControl(Ge.value)});function Be(Ve){t.debug(Ve)}function je(Ve){t.debug(Ve)}return(Ve,Ze)=>null}},_sfc_main$F={__name:"LayerSwitcher",props:{mapId:String,visibility:Boolean,analytic:Boolean,layerSwitcherOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger(),ke=useMapStore(),Ge=useDataStore(),Be=inject(e.mapId),je=ref(new LayerSwitcher(e.layerSwitcherOptions));onMounted(()=>{if(e.visibility){if(Be.addControl(je.value),e.analytic){var cn=je.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(cn)}je.value.on("layerswitcher:add",Ve),je.value.on("layerswitcher:remove",Ze),je.value.on("layerswitcher:extent",Qe),je.value.on("layerswitcher:change:opacity",en),je.value.on("layerswitcher:change:visibility",tn),je.value.on("layerswitcher:change:position",an)}}),onBeforeUpdate(()=>{if(!e.visibility&&(Be.removeControl(je.value),e.analytic)){var cn=je.value.element.querySelector("button[id^=GPshowLayersListPicto-]");useActionButtonEulerian(cn)}}),onUpdated(()=>{e.visibility&&Be.addControl(je.value)});const Ve=cn=>{var un=Ge.getLayerIdByName(cn.layer.name,cn.layer.service);t.debug("onAddLayer",un),un&&ke.addLayer(un)},Ze=cn=>{var un=Ge.getLayerIdByName(cn.layer.name,cn.layer.service);t.debug("onRemoveLayer",un),un&&ke.removeLayer(un)},Qe=cn=>{if(t.debug("onZoomToExtentLayer",cn),cn.error){var un=Ge.getGlobalConstraintsByName(cn.layer.name,cn.layer.service);if(un){var dn=Be.getView(),fn=dn.getProjection(),pn=[un.extent.left,un.extent.bottom,un.extent.right,un.extent.top],gn=un.crs;gn||(gn="EPSG:4326");var yn=transformExtent(pn,gn,fn);yn&&dn.fit(yn)}}},en=cn=>{var un=Ge.getLayerIdByName(cn.layer.name,cn.layer.service);t.debug("onChangeOpacityLayer",cn),ke.updateLayerProperty(un,{opacity:cn.opacity})},tn=cn=>{var un=Ge.getLayerIdByName(cn.layer.name,cn.layer.service);t.debug("onChangeVisibilityLayer",cn),ke.updateLayerProperty(un,{visible:cn.visibility})},an=cn=>{t.debug("onChangePositionLayer",cn),ke.updateLayerPosition(cn.layers.reverse().map(un=>{if(un.name&&un.service)return Ge.getLayerIdByName(un.name,un.service)}))};return(cn,un)=>null}},_sfc_main$E={__name:"Legends",props:{mapId:String,visibility:Boolean,analytic:Boolean,legendsOptions:Object},setup(Oe){const e=Oe,t=inject(e.mapId),ke=ref(new Legends(e.legendsOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Ge=ke.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(Ge)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(ke.value),e.analytic){var Ge=ke.value.element.querySelector("button[id^=GPshowLegendsPicto-]");useActionButtonEulerian(Ge)}}else t.removeControl(ke.value)}),(Ge,Be)=>null}},_sfc_main$D={__name:"Drawing",props:{mapId:String,visibility:Boolean,analytic:Boolean,drawingOptions:Object},setup(Oe){const e=Oe,t=inject(e.mapId),ke=ref(new Drawing(e.drawingOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Ge=ke.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(Ge)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(ke.value),e.analytic){var Ge=ke.value.element.querySelector("button[id^=GPshowDrawingPicto-]");useActionButtonEulerian(Ge)}}else t.removeControl(ke.value)}),(Ge,Be)=>null}},_sfc_main$C={__name:"Isocurve",props:{mapId:String,visibility:Boolean,analytic:Boolean,isocurveOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger();useDataStore();const ke=inject(e.mapId),Ge=ref(new Isocurve(e.isocurveOptions));onMounted(()=>{if(e.visibility){if(ke.addControl(Ge.value),e.analytic){var Ze=Ge.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(Ze)}Ge.value.on("isocurve:drawstart",Be),Ge.value.on("socurve:drawend",je),Ge.value.on("isocurve:compute",Ve)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Ge.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Ge.value),e.analytic)){var Ze=Ge.value.element.querySelector("button[id^=GPshowIsochronPicto-]");useActionButtonEulerian(Ze)}});const Be=Ze=>{t.debug(Ze)},je=Ze=>{t.debug(Ze)},Ve=Ze=>{t.debug(Ze)};return(Ze,Qe)=>null}},_sfc_main$B={__name:"Route",props:{mapId:String,visibility:Boolean,analytic:Boolean,routeOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger();useDataStore();const ke=inject(e.mapId),Ge=ref(new Route(e.routeOptions));onMounted(()=>{if(e.visibility&&(ke.addControl(Ge.value),Ge.value.on("route:drawstart",Be),Ge.value.on("route:drawend",je),Ge.value.on("route:compute",Ve),e.analytic)){var Ze=Ge.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(Ze)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Ge.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Ge.value),e.analytic)){var Ze=Ge.value.element.querySelector("button[id^=GPshowRoutePicto-]");useActionButtonEulerian(Ze)}});const Be=Ze=>{t.debug(Ze)},je=Ze=>{t.debug(Ze)},Ve=Ze=>{t.debug(Ze)};return(Ze,Qe)=>null}},_sfc_main$A={__name:"MeasureLength",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureLengthOptions:Object},setup(Oe){const e=Oe,t=inject(e.mapId),ke=ref(new MeasureLength(e.measureLengthOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Ge=ke.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(Ge)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(ke.value),e.analytic){var Ge=ke.value.element.querySelector("button[id^=GPshowMeasureLengthPicto-]");useActionButtonEulerian(Ge)}}else t.removeControl(ke.value)}),(Ge,Be)=>null}},_sfc_main$z={__name:"MeasureArea",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureAreaOptions:Object},setup(Oe){const e=Oe,t=inject(e.mapId),ke=ref(new MeasureArea(e.measureAreaOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Ge=ke.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(Ge)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(ke.value),e.analytic){var Ge=ke.value.element.querySelector("button[id^=GPshowMeasureAreaPicto-]");useActionButtonEulerian(Ge)}}else t.removeControl(ke.value)}),(Ge,Be)=>null}},_sfc_main$y={__name:"MeasureAzimuth",props:{mapId:String,visibility:Boolean,analytic:Boolean,measureAzimuthOptions:Object},setup(Oe){const e=Oe,t=inject(e.mapId),ke=ref(new MeasureAzimuth(e.measureAzimuthOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Ge=ke.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(Ge)}}),onBeforeUpdate(()=>{if(e.visibility){if(t.addControl(ke.value),e.analytic){var Ge=ke.value.element.querySelector("button[id^=GPshowMeasureAzimuthPicto-]");useActionButtonEulerian(Ge)}}else t.removeControl(ke.value)}),(Ge,Be)=>null}},_sfc_main$x={__name:"MousePosition",props:{mapId:String,visibility:Boolean,analytic:Boolean,mousePositionOptions:Object},setup(Oe){const e=Oe;dist.useLogger();const t=inject(e.mapId),ke=ref(new MousePosition(e.mousePositionOptions));return onMounted(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Ge=ke.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(Ge)}}),onBeforeUpdate(()=>{e.visibility||t.removeControl(ke.value)}),onUpdated(()=>{if(e.visibility&&(t.addControl(ke.value),e.analytic)){var Ge=ke.value.element.querySelector("button[id^=GPshowMousePositionPicto-]");useActionButtonEulerian(Ge)}}),(Ge,Be)=>null}},_sfc_main$w={__name:"ElevationPath",props:{mapId:String,visibility:Boolean,analytic:Boolean,elevationPathOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger(),ke=inject(e.mapId),Ge=ref(new ElevationPath(e.elevationPathOptions));onMounted(()=>{if(e.visibility&&(ke.addControl(Ge.value),Ge.value.on("elevationpath:drawstart",Be),Ge.value.on("elevationpath:drawend",je),Ge.value.on("elevationpath:compute",Ve),e.analytic)){var Ze=Ge.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(Ze)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Ge.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Ge.value),e.analytic)){var Ze=Ge.value.element.querySelector("button[id^=GPshowElevationPathPicto-]");useActionButtonEulerian(Ze)}});const Be=Ze=>{t.debug(Ze)},je=Ze=>{t.debug(Ze)},Ve=Ze=>{t.debug(Ze)};return(Ze,Qe)=>null}},_sfc_main$v={__name:"Territories",props:{mapId:String,visibility:Boolean,analytic:Boolean,territoriesOptions:Object},setup(Oe){const e=Oe;dist.useLogger();const t=useDataStore(),ke=inject(e.mapId),Ge=ref(new Territories(e.territoriesOptions));function Be(){var je=t.getTerritories();for(let Ve=0;Ve<je.length;Ve++){const Ze=je[Ve];Ge.value.setTerritory(Ze)}}return onMounted(()=>{if(e.visibility&&(Be(),ke.addControl(Ge.value),e.analytic)){var je=Ge.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(je)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Ge.value)}),onUpdated(()=>{if(e.visibility&&(Be(),ke.addControl(Ge.value),e.analytic)){var je=Ge.value.element.querySelector("button[id^=GPshowTerritoriesPicto-]");useActionButtonEulerian(je)}}),(je,Ve)=>null}},_sfc_main$u={__name:"GetFeatureInfo",props:{mapId:String,visibility:Boolean,analytic:Boolean,getFeatureInfoOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger(),ke=inject(e.mapId),Ge=ref(new GetFeatureInfo(e.getFeatureInfoOptions)),Be=useMatchMedia("SM");watch(Be,()=>{if(e.visibility&&!Be.value){if(ke.addControl(Ge.value),e.analytic){var Ve=Ge.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(Ve)}}else ke.removeControl(Ge.value)}),onMounted(()=>{if(e.visibility&&!Be.value&&(ke.addControl(Ge.value),Ge.value.on("GetFeatureInfo:toggle",je),e.analytic)){var Ve=Ge.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(Ve)}}),onBeforeUpdate(()=>{if(e.visibility&&!Be.value){if(ke.addControl(Ge.value),e.analytic){var Ve=Ge.value.element.querySelector("button[id^=GPgetFeatureInfoPicto-]");useActionButtonEulerian(Ve)}}else ke.removeControl(Ge.value)});function je(Ve){t.debug(Ve)}return(Ve,Ze)=>null}},_sfc_main$t={__name:"LayerImport",props:{mapId:String,visibility:Boolean,analytic:Boolean,layerImportOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger(),ke=inject(e.mapId),Ge=ref(new LayerImport(e.layerImportOptions));return onMounted(()=>{if(e.visibility&&(ke.addControl(Ge.value),e.analytic)){t.debug(Ge.value.element);var Be=Ge.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(Be)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Ge.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Ge.value),e.analytic)){var Be=Ge.value.element.querySelector("button[id^=GPshowImportPicto-]");useActionButtonEulerian(Be)}}),(Be,je)=>null}},selectedControls=computed(()=>useMapStore().getControls()),_sfc_main$s={__name:"ControlList",props:{mapId:String,visibility:Boolean,analytic:Boolean,controlListOptions:Object},setup(Oe){const e=Oe,t=dist.useLogger(),ke=inject(e.mapId),Ge=ref(new ControlList(e.controlListOptions)),Be=useMatchMedia("SM"),je=useMatchMediaHeight("XS");return watch(Be,()=>{e.visibility&&!Be.value&&!je.value?Ge.value.setPosition("top-right"):Ge.value.setPosition("bottom-right")}),watch(je,()=>{e.visibility&&!Be.value&&!je.value?Ge.value.setPosition("top-right"):Ge.value.setPosition("bottom-right")}),watch(selectedControls,()=>{setTimeout(()=>{if(ke.removeControl(Ge.value),e.visibility){if(ke.addControl(Ge.value),e.analytic){t.debug(Ge.value.element);var Ve=Ge.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(Ve)}!Be.value&&!je.value?Ge.value.setPosition("top-right"):Ge.value.setPosition("bottom-right")}},10)}),onMounted(()=>{if(e.visibility&&(ke.addControl(Ge.value),e.analytic)){t.debug(Ge.value.element);var Ve=Ge.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(Ve)}}),onBeforeUpdate(()=>{e.visibility||ke.removeControl(Ge.value)}),onUpdated(()=>{if(e.visibility&&(ke.addControl(Ge.value),e.analytic)){var Ve=Ge.value.element.querySelector("button[id^=GPshowControlListPicto-]");useActionButtonEulerian(Ve)}}),(Ve,Ze)=>null}},_sfc_main$r={__name:"ContextMenu",props:{mapId:String,visibility:Boolean,analytic:Boolean,contextMenuOptions:Object},setup(Oe){const e=useMatchMedia("SM"),t=Oe,ke=inject(t.mapId),Ge=ref(new ContextMenu(t.contextMenuOptions));return onMounted(()=>{t.visibility&&!e.value&&ke.addControl(Ge.value)}),onBeforeUpdate(()=>{t.visibility&&!e.value?ke.addControl(Ge.value):ke.removeControl(Ge.value)}),(Be,je)=>null}},_sfc_main$q={__name:"Layer",props:{layerOptions:Object,mapId:String},setup(Oe){const e=Oe,t=dist.useLogger();t.debug(e.layerOptions);const ke=useDataStore(),Ge=inject(e.mapId);var Be=null;return onMounted(()=>{var je=ke.getLayerByName(e.layerOptions.name,e.layerOptions.service),Ve=ke.getLayerParamsByName(e.layerOptions.name,e.layerOptions.service);je.params=Ve,t.debug("layer to add",je);var Ze=e.layerOptions.service,Qe=e.layerOptions.name,en={visible:e.layerOptions.visible,opacity:e.layerOptions.opacity,gray:e.layerOptions.gray,sourceParams:{crossOrigin:"anonymous"}},tn={preload:1/0,cacheSize:1024};switch(Ze){case"WMS":Be=new LayerWMS({layer:Qe,configuration:je,apiKey:"ign_scan_ws",olParams:Object.assign(en,tn)});break;case"WMTS":Be=new LayerWMTS({layer:Qe,configuration:je,apiKey:"ign_scan_ws",olParams:Object.assign(en,tn)});break;case"TMS":en.declutter=!0,Be=new LayerMapBox({layer:Qe,configuration:je,apiKey:"ign_scan_ws"},en);break}Be&&Ge.addLayer(Be)}),onUnmounted(()=>{Ge.removeLayer(Be)}),(je,Ve)=>(openBlock(),createElementBlock("div",null,[renderSlot(je.$slots,"default")]))}},_sfc_main$p={__name:"Layers",props:{selectedLayers:Object,mapId:String},setup(Oe){const e=Oe;dist.useLogger();var t=computed(()=>toRaw(e.selectedLayers).map(ke=>({name:ke.name,service:ke.serviceParams.id.split(":")[1],key:ke.key,opacity:ke.hasOwnProperty("opacity")?ke.opacity:1,visible:ke.hasOwnProperty("visible")?ke.visible:!0,gray:ke.hasOwnProperty("gray")?ke.gray:!0})));return(ke,Ge)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(t),Be=>(openBlock(),createBlock(_sfc_main$q,{key:Be.key,"layer-options":Be,"map-id":Oe.mapId},null,8,["layer-options","map-id"]))),128))}};function _typeof(Oe){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(Oe)}var u8=Uint8Array,u16=Uint16Array,i32=Int32Array,fleb=new u8([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),fdeb=new u8([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),clim=new u8([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(Oe,e){for(var t=new u16(31),ke=0;ke<31;++ke)t[ke]=e+=1<<Oe[ke-1];for(var Ge=new i32(t[30]),ke=1;ke<30;++ke)for(var Be=t[ke];Be<t[ke+1];++Be)Ge[Be]=Be-t[ke]<<5|ke;return{b:t,r:Ge}},_a=freb(fleb,2),fl=_a.b,revfl=_a.r;fl[28]=258,revfl[258]=28;var _b=freb(fdeb,0),fd=_b.b,revfd=_b.r,rev=new u16(32768);for(var i$1=0;i$1<32768;++i$1){var x$1=(i$1&43690)>>1|(i$1&21845)<<1;x$1=(x$1&52428)>>2|(x$1&13107)<<2,x$1=(x$1&61680)>>4|(x$1&3855)<<4,rev[i$1]=((x$1&65280)>>8|(x$1&255)<<8)>>1}var hMap=function(Oe,e,t){for(var ke=Oe.length,Ge=0,Be=new u16(e);Ge<ke;++Ge)Oe[Ge]&&++Be[Oe[Ge]-1];var je=new u16(e);for(Ge=1;Ge<e;++Ge)je[Ge]=je[Ge-1]+Be[Ge-1]<<1;var Ve;if(t){Ve=new u16(1<<e);var Ze=15-e;for(Ge=0;Ge<ke;++Ge)if(Oe[Ge])for(var Qe=Ge<<4|Oe[Ge],en=e-Oe[Ge],tn=je[Oe[Ge]-1]++<<en,an=tn|(1<<en)-1;tn<=an;++tn)Ve[rev[tn]>>Ze]=Qe}else for(Ve=new u16(ke),Ge=0;Ge<ke;++Ge)Oe[Ge]&&(Ve[Ge]=rev[je[Oe[Ge]-1]++]>>15-Oe[Ge]);return Ve},flt=new u8(288);for(var i$1=0;i$1<144;++i$1)flt[i$1]=8;for(var i$1=144;i$1<256;++i$1)flt[i$1]=9;for(var i$1=256;i$1<280;++i$1)flt[i$1]=7;for(var i$1=280;i$1<288;++i$1)flt[i$1]=8;var fdt=new u8(32);for(var i$1=0;i$1<32;++i$1)fdt[i$1]=5;var flm=hMap(flt,9,0),flrm=hMap(flt,9,1),fdm=hMap(fdt,5,0),fdrm=hMap(fdt,5,1),max=function(Oe){for(var e=Oe[0],t=1;t<Oe.length;++t)Oe[t]>e&&(e=Oe[t]);return e},bits=function(Oe,e,t){var ke=e/8|0;return(Oe[ke]|Oe[ke+1]<<8)>>(e&7)&t},bits16=function(Oe,e){var t=e/8|0;return(Oe[t]|Oe[t+1]<<8|Oe[t+2]<<16)>>(e&7)},shft=function(Oe){return(Oe+7)/8|0},slc=function(Oe,e,t){return(t==null||t>Oe.length)&&(t=Oe.length),new u8(Oe.subarray(e,t))},ec=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(Oe,e,t){var ke=new Error(e||ec[Oe]);if(ke.code=Oe,Error.captureStackTrace&&Error.captureStackTrace(ke,err),!t)throw ke;return ke},inflt=function(Oe,e,t,ke){var Ge=Oe.length,Be=0;if(!Ge||e.f&&!e.l)return t||new u8(0);var je=!t,Ve=je||e.i!=2,Ze=e.i;je&&(t=new u8(Ge*3));var Qe=function(tr){var Fr=t.length;if(tr>Fr){var Bn=new u8(Math.max(Fr*2,tr));Bn.set(t),t=Bn}},en=e.f||0,tn=e.p||0,an=e.b||0,cn=e.l,un=e.d,dn=e.m,fn=e.n,pn=Ge*8;do{if(!cn){en=bits(Oe,tn,1);var gn=bits(Oe,tn+1,3);if(tn+=3,gn)if(gn==1)cn=flrm,un=fdrm,dn=9,fn=5;else if(gn==2){var xn=bits(Oe,tn,31)+257,wn=bits(Oe,tn+10,15)+4,bn=xn+bits(Oe,tn+5,31)+1;tn+=14;for(var Mn=new u8(bn),Pn=new u8(19),En=0;En<wn;++En)Pn[clim[En]]=bits(Oe,tn+En*3,7);tn+=wn*3;for(var Cn=max(Pn),Rn=(1<<Cn)-1,Tn=hMap(Pn,Cn,1),En=0;En<bn;){var Nn=Tn[bits(Oe,tn,Rn)];tn+=Nn&15;var yn=Nn>>4;if(yn<16)Mn[En++]=yn;else{var Gn=0,zn=0;for(yn==16?(zn=3+bits(Oe,tn,3),tn+=2,Gn=Mn[En-1]):yn==17?(zn=3+bits(Oe,tn,7),tn+=3):yn==18&&(zn=11+bits(Oe,tn,127),tn+=7);zn--;)Mn[En++]=Gn}}var $n=Mn.subarray(0,xn),Qn=Mn.subarray(xn);dn=max($n),fn=max(Qn),cn=hMap($n,dn,1),un=hMap(Qn,fn,1)}else err(1);else{var yn=shft(tn)+4,vn=Oe[yn-4]|Oe[yn-3]<<8,An=yn+vn;if(An>Ge){Ze&&err(0);break}Ve&&Qe(an+vn),t.set(Oe.subarray(yn,An),an),e.b=an+=vn,e.p=tn=An*8,e.f=en;continue}if(tn>pn){Ze&&err(0);break}}Ve&&Qe(an+131072);for(var Hn=(1<<dn)-1,Ni=(1<<fn)-1,On=tn;;On=tn){var Gn=cn[bits16(Oe,tn)&Hn],qn=Gn>>4;if(tn+=Gn&15,tn>pn){Ze&&err(0);break}if(Gn||err(2),qn<256)t[an++]=qn;else if(qn==256){On=tn,cn=null;break}else{var Un=qn-254;if(qn>264){var En=qn-257,Ci=fleb[En];Un=bits(Oe,tn,(1<<Ci)-1)+fl[En],tn+=Ci}var Si=un[bits16(Oe,tn)&Ni],_i=Si>>4;Si||err(3),tn+=Si&15;var Qn=fd[_i];if(_i>3){var Ci=fdeb[_i];Qn+=bits16(Oe,tn)&(1<<Ci)-1,tn+=Ci}if(tn>pn){Ze&&err(0);break}Ve&&Qe(an+131072);var Ii=an+Un;if(an<Qn){var Li=Be-Qn,Ri=Math.min(Qn,Ii);for(Li+an<0&&err(3);an<Ri;++an)t[an]=ke[Li+an]}for(;an<Ii;++an)t[an]=t[an-Qn]}}e.l=cn,e.p=On,e.b=an,e.f=en,cn&&(en=1,e.m=dn,e.d=un,e.n=fn)}while(!en);return an!=t.length&&je?slc(t,0,an):t.subarray(0,an)},wbits=function(Oe,e,t){t<<=e&7;var ke=e/8|0;Oe[ke]|=t,Oe[ke+1]|=t>>8},wbits16=function(Oe,e,t){t<<=e&7;var ke=e/8|0;Oe[ke]|=t,Oe[ke+1]|=t>>8,Oe[ke+2]|=t>>16},hTree=function(Oe,e){for(var t=[],ke=0;ke<Oe.length;++ke)Oe[ke]&&t.push({s:ke,f:Oe[ke]});var Ge=t.length,Be=t.slice();if(!Ge)return{t:et$1,l:0};if(Ge==1){var je=new u8(t[0].s+1);return je[t[0].s]=1,{t:je,l:1}}t.sort(function(An,xn){return An.f-xn.f}),t.push({s:-1,f:25001});var Ve=t[0],Ze=t[1],Qe=0,en=1,tn=2;for(t[0]={s:-1,f:Ve.f+Ze.f,l:Ve,r:Ze};en!=Ge-1;)Ve=t[t[Qe].f<t[tn].f?Qe++:tn++],Ze=t[Qe!=en&&t[Qe].f<t[tn].f?Qe++:tn++],t[en++]={s:-1,f:Ve.f+Ze.f,l:Ve,r:Ze};for(var an=Be[0].s,ke=1;ke<Ge;++ke)Be[ke].s>an&&(an=Be[ke].s);var cn=new u16(an+1),un=ln(t[en-1],cn,0);if(un>e){var ke=0,dn=0,fn=un-e,pn=1<<fn;for(Be.sort(function(xn,wn){return cn[wn.s]-cn[xn.s]||xn.f-wn.f});ke<Ge;++ke){var gn=Be[ke].s;if(cn[gn]>e)dn+=pn-(1<<un-cn[gn]),cn[gn]=e;else break}for(dn>>=fn;dn>0;){var yn=Be[ke].s;cn[yn]<e?dn-=1<<e-cn[yn]++-1:++ke}for(;ke>=0&&dn;--ke){var vn=Be[ke].s;cn[vn]==e&&(--cn[vn],++dn)}un=e}return{t:new u8(cn),l:un}},ln=function(Oe,e,t){return Oe.s==-1?Math.max(ln(Oe.l,e,t+1),ln(Oe.r,e,t+1)):e[Oe.s]=t},lc=function(Oe){for(var e=Oe.length;e&&!Oe[--e];);for(var t=new u16(++e),ke=0,Ge=Oe[0],Be=1,je=function(Ze){t[ke++]=Ze},Ve=1;Ve<=e;++Ve)if(Oe[Ve]==Ge&&Ve!=e)++Be;else{if(!Ge&&Be>2){for(;Be>138;Be-=138)je(32754);Be>2&&(je(Be>10?Be-11<<5|28690:Be-3<<5|12305),Be=0)}else if(Be>3){for(je(Ge),--Be;Be>6;Be-=6)je(8304);Be>2&&(je(Be-3<<5|8208),Be=0)}for(;Be--;)je(Ge);Be=1,Ge=Oe[Ve]}return{c:t.subarray(0,ke),n:e}},clen=function(Oe,e){for(var t=0,ke=0;ke<e.length;++ke)t+=Oe[ke]*e[ke];return t},wfblk=function(Oe,e,t){var ke=t.length,Ge=shft(e+2);Oe[Ge]=ke&255,Oe[Ge+1]=ke>>8,Oe[Ge+2]=Oe[Ge]^255,Oe[Ge+3]=Oe[Ge+1]^255;for(var Be=0;Be<ke;++Be)Oe[Ge+Be+4]=t[Be];return(Ge+4+ke)*8},wblk=function(Oe,e,t,ke,Ge,Be,je,Ve,Ze,Qe,en){wbits(e,en++,t),++Ge[256];for(var tn=hTree(Ge,15),an=tn.t,cn=tn.l,un=hTree(Be,15),dn=un.t,fn=un.l,pn=lc(an),gn=pn.c,yn=pn.n,vn=lc(dn),An=vn.c,xn=vn.n,wn=new u16(19),bn=0;bn<gn.length;++bn)++wn[gn[bn]&31];for(var bn=0;bn<An.length;++bn)++wn[An[bn]&31];for(var Mn=hTree(wn,7),Pn=Mn.t,En=Mn.l,Cn=19;Cn>4&&!Pn[clim[Cn-1]];--Cn);var Rn=Qe+5<<3,Tn=clen(Ge,flt)+clen(Be,fdt)+je,Nn=clen(Ge,an)+clen(Be,dn)+je+14+3*Cn+clen(wn,Pn)+2*wn[16]+3*wn[17]+7*wn[18];if(Ze>=0&&Rn<=Tn&&Rn<=Nn)return wfblk(e,en,Oe.subarray(Ze,Ze+Qe));var Gn,zn,$n,Qn;if(wbits(e,en,1+(Nn<Tn)),en+=2,Nn<Tn){Gn=hMap(an,cn,0),zn=an,$n=hMap(dn,fn,0),Qn=dn;var Hn=hMap(Pn,En,0);wbits(e,en,yn-257),wbits(e,en+5,xn-1),wbits(e,en+10,Cn-4),en+=14;for(var bn=0;bn<Cn;++bn)wbits(e,en+3*bn,Pn[clim[bn]]);en+=3*Cn;for(var Ni=[gn,An],On=0;On<2;++On)for(var qn=Ni[On],bn=0;bn<qn.length;++bn){var Un=qn[bn]&31;wbits(e,en,Hn[Un]),en+=Pn[Un],Un>15&&(wbits(e,en,qn[bn]>>5&127),en+=qn[bn]>>12)}}else Gn=flm,zn=flt,$n=fdm,Qn=fdt;for(var bn=0;bn<Ve;++bn){var Ci=ke[bn];if(Ci>255){var Un=Ci>>18&31;wbits16(e,en,Gn[Un+257]),en+=zn[Un+257],Un>7&&(wbits(e,en,Ci>>23&31),en+=fleb[Un]);var Si=Ci&31;wbits16(e,en,$n[Si]),en+=Qn[Si],Si>3&&(wbits16(e,en,Ci>>5&8191),en+=fdeb[Si])}else wbits16(e,en,Gn[Ci]),en+=zn[Ci]}return wbits16(e,en,Gn[256]),en+zn[256]},deo=new i32([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),et$1=new u8(0),dflt=function(Oe,e,t,ke,Ge,Be){var je=Be.z||Oe.length,Ve=new u8(ke+je+5*(1+Math.ceil(je/7e3))+Ge),Ze=Ve.subarray(ke,Ve.length-Ge),Qe=Be.l,en=(Be.r||0)&7;if(e){en&&(Ze[0]=Be.r>>3);for(var tn=deo[e-1],an=tn>>13,cn=tn&8191,un=(1<<t)-1,dn=Be.p||new u16(32768),fn=Be.h||new u16(un+1),pn=Math.ceil(t/3),gn=2*pn,yn=function(Ai){return(Oe[Ai]^Oe[Ai+1]<<pn^Oe[Ai+2]<<gn)&un},vn=new i32(25e3),An=new u16(288),xn=new u16(32),wn=0,bn=0,Mn=Be.i||0,Pn=0,En=Be.w||0,Cn=0;Mn+2<je;++Mn){var Rn=yn(Mn),Tn=Mn&32767,Nn=fn[Rn];if(dn[Tn]=Nn,fn[Rn]=Tn,En<=Mn){var Gn=je-Mn;if((wn>7e3||Pn>24576)&&(Gn>423||!Qe)){en=wblk(Oe,Ze,0,vn,An,xn,bn,Pn,Cn,Mn-Cn,en),Pn=wn=bn=0,Cn=Mn;for(var zn=0;zn<286;++zn)An[zn]=0;for(var zn=0;zn<30;++zn)xn[zn]=0}var $n=2,Qn=0,Hn=cn,Ni=Tn-Nn&32767;if(Gn>2&&Rn==yn(Mn-Ni))for(var On=Math.min(an,Gn)-1,qn=Math.min(32767,Mn),Un=Math.min(258,Gn);Ni<=qn&&--Hn&&Tn!=Nn;){if(Oe[Mn+$n]==Oe[Mn+$n-Ni]){for(var Ci=0;Ci<Un&&Oe[Mn+Ci]==Oe[Mn+Ci-Ni];++Ci);if(Ci>$n){if($n=Ci,Qn=Ni,Ci>On)break;for(var Si=Math.min(Ni,Ci-2),_i=0,zn=0;zn<Si;++zn){var Ii=Mn-Ni+zn&32767,Li=dn[Ii],Ri=Ii-Li&32767;Ri>_i&&(_i=Ri,Nn=Ii)}}}Tn=Nn,Nn=dn[Tn],Ni+=Tn-Nn&32767}if(Qn){vn[Pn++]=268435456|revfl[$n]<<18|revfd[Qn];var tr=revfl[$n]&31,Fr=revfd[Qn]&31;bn+=fleb[tr]+fdeb[Fr],++An[257+tr],++xn[Fr],En=Mn+$n,++wn}else vn[Pn++]=Oe[Mn],++An[Oe[Mn]]}}for(Mn=Math.max(Mn,En);Mn<je;++Mn)vn[Pn++]=Oe[Mn],++An[Oe[Mn]];en=wblk(Oe,Ze,Qe,vn,An,xn,bn,Pn,Cn,Mn-Cn,en),Qe||(Be.r=en&7|Ze[en/8|0]<<3,en-=7,Be.h=fn,Be.p=dn,Be.i=Mn,Be.w=En)}else{for(var Mn=Be.w||0;Mn<je+Qe;Mn+=65535){var Bn=Mn+65535;Bn>=je&&(Ze[en/8|0]=Qe,Bn=je),en=wfblk(Ze,en+1,Oe.subarray(Mn,Bn))}Be.i=je}return slc(Ve,0,ke+shft(en)+Ge)},adler=function(){var Oe=1,e=0;return{p:function(t){for(var ke=Oe,Ge=e,Be=t.length|0,je=0;je!=Be;){for(var Ve=Math.min(je+2655,Be);je<Ve;++je)Ge+=ke+=t[je];ke=(ke&65535)+15*(ke>>16),Ge=(Ge&65535)+15*(Ge>>16)}Oe=ke,e=Ge},d:function(){return Oe%=65521,e%=65521,(Oe&255)<<24|(Oe&65280)<<8|(e&255)<<8|e>>8}}},dopt=function(Oe,e,t,ke,Ge){if(!Ge&&(Ge={l:1},e.dictionary)){var Be=e.dictionary.subarray(-32768),je=new u8(Be.length+Oe.length);je.set(Be),je.set(Oe,Be.length),Oe=je,Ge.w=Be.length}return dflt(Oe,e.level==null?6:e.level,e.mem==null?Ge.l?Math.ceil(Math.max(8,Math.min(13,Math.log(Oe.length)))*1.5):20:12+e.mem,t,ke,Ge)},wbytes=function(Oe,e,t){for(;t;++e)Oe[e]=t,t>>>=8},zlh=function(Oe,e){var t=e.level,ke=t==0?0:t<6?1:t==9?3:2;if(Oe[0]=120,Oe[1]=ke<<6|(e.dictionary&&32),Oe[1]|=31-(Oe[0]<<8|Oe[1])%31,e.dictionary){var Ge=adler();Ge.p(e.dictionary),wbytes(Oe,2,Ge.d())}},zls=function(Oe,e){return((Oe[0]&15)!=8||Oe[0]>>4>7||(Oe[0]<<8|Oe[1])%31)&&err(6,"invalid zlib data"),(Oe[1]>>5&1)==1&&err(6,"invalid zlib data: "+(Oe[1]&32?"need":"unexpected")+" dictionary"),(Oe[1]>>3&4)+2};function zlibSync(Oe,e){e||(e={});var t=adler();t.p(Oe);var ke=dopt(Oe,e,e.dictionary?6:2,4);return zlh(ke,e),wbytes(ke,ke.length-4,t.d()),ke}function unzlibSync(Oe,e){return inflt(Oe.subarray(zls(Oe),-4),{i:2},e,e)}var td=typeof TextDecoder<"u"&&new TextDecoder,tds=0;try{td.decode(et$1,{stream:!0}),tds=1}catch(Oe){}var n=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function i(){n.console&&typeof n.console.log=="function"&&n.console.log.apply(n.console,arguments)}var a={log:i,warn:function(Oe){n.console&&(typeof n.console.warn=="function"?n.console.warn.apply(n.console,arguments):i.call(null,arguments))},error:function(Oe){n.console&&(typeof n.console.error=="function"?n.console.error.apply(n.console,arguments):i(Oe))}};function o(Oe,e,t){var ke=new XMLHttpRequest;ke.open("GET",Oe),ke.responseType="blob",ke.onload=function(){l(ke.response,e,t)},ke.onerror=function(){a.error("could not download file")},ke.send()}function s(Oe){var e=new XMLHttpRequest;e.open("HEAD",Oe,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function c(Oe){try{Oe.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),Oe.dispatchEvent(e)}}var u,h,l=n.saveAs||((typeof window>"u"?"undefined":_typeof(window))!=="object"||window!==n?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(Oe,e,t){var ke=n.URL||n.webkitURL,Ge=document.createElement("a");e=e||Oe.name||"download",Ge.download=e,Ge.rel="noopener",typeof Oe=="string"?(Ge.href=Oe,Ge.origin!==location.origin?s(Ge.href)?o(Oe,e,t):c(Ge,Ge.target="_blank"):c(Ge)):(Ge.href=ke.createObjectURL(Oe),setTimeout(function(){ke.revokeObjectURL(Ge.href)},4e4),setTimeout(function(){c(Ge)},0))}:"msSaveOrOpenBlob"in navigator?function(Oe,e,t){if(e=e||Oe.name||"download",typeof Oe=="string")if(s(Oe))o(Oe,e,t);else{var ke=document.createElement("a");ke.href=Oe,ke.target="_blank",setTimeout(function(){c(ke)})}else navigator.msSaveOrOpenBlob(function(Ge,Be){return Be===void 0?Be={autoBom:!1}:_typeof(Be)!=="object"&&(a.warn("Deprecated: Expected third argument to be a object"),Be={autoBom:!Be}),Be.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(Ge.type)?new Blob(["\uFEFF",Ge],{type:Ge.type}):Ge}(Oe,t),e)}:function(Oe,e,t,ke){if((ke=ke||open("","_blank"))&&(ke.document.title=ke.document.body.innerText="downloading..."),typeof Oe=="string")return o(Oe,e,t);var Ge=Oe.type==="application/octet-stream",Be=/constructor/i.test(n.HTMLElement)||n.safari,je=/CriOS\/[\d]+/.test(navigator.userAgent);if((je||Ge&&Be)&&(typeof FileReader>"u"?"undefined":_typeof(FileReader))==="object"){var Ve=new FileReader;Ve.onloadend=function(){var en=Ve.result;en=je?en:en.replace(/^data:[^;]*;/,"data:attachment/file;"),ke?ke.location.href=en:location=en,ke=null},Ve.readAsDataURL(Oe)}else{var Ze=n.URL||n.webkitURL,Qe=Ze.createObjectURL(Oe);ke?ke.location=Qe:location.href=Qe,ke=null,setTimeout(function(){Ze.revokeObjectURL(Qe)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function f(Oe){var e;Oe=Oe||"",this.ok=!1,Oe.charAt(0)=="#"&&(Oe=Oe.substr(1,6)),Oe={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[Oe=(Oe=Oe.replace(/ /g,"")).toLowerCase()]||Oe;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(Ve){return[parseInt(Ve[1]),parseInt(Ve[2]),parseInt(Ve[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(Ve){return[parseInt(Ve[1],16),parseInt(Ve[2],16),parseInt(Ve[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(Ve){return[parseInt(Ve[1]+Ve[1],16),parseInt(Ve[2]+Ve[2],16),parseInt(Ve[3]+Ve[3],16)]}}],ke=0;ke<t.length;ke++){var Ge=t[ke].re,Be=t[ke].process,je=Ge.exec(Oe);je&&(e=Be(je),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var Ve=this.r.toString(16),Ze=this.g.toString(16),Qe=this.b.toString(16);return Ve.length==1&&(Ve="0"+Ve),Ze.length==1&&(Ze="0"+Ze),Qe.length==1&&(Qe="0"+Qe),"#"+Ve+Ze+Qe}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function d(Oe,e){var t=Oe[0],ke=Oe[1],Ge=Oe[2],Be=Oe[3];t=g(t,ke,Ge,Be,e[0],7,-680876936),Be=g(Be,t,ke,Ge,e[1],12,-389564586),Ge=g(Ge,Be,t,ke,e[2],17,606105819),ke=g(ke,Ge,Be,t,e[3],22,-1044525330),t=g(t,ke,Ge,Be,e[4],7,-176418897),Be=g(Be,t,ke,Ge,e[5],12,1200080426),Ge=g(Ge,Be,t,ke,e[6],17,-1473231341),ke=g(ke,Ge,Be,t,e[7],22,-45705983),t=g(t,ke,Ge,Be,e[8],7,1770035416),Be=g(Be,t,ke,Ge,e[9],12,-1958414417),Ge=g(Ge,Be,t,ke,e[10],17,-42063),ke=g(ke,Ge,Be,t,e[11],22,-1990404162),t=g(t,ke,Ge,Be,e[12],7,1804603682),Be=g(Be,t,ke,Ge,e[13],12,-40341101),Ge=g(Ge,Be,t,ke,e[14],17,-1502002290),t=m(t,ke=g(ke,Ge,Be,t,e[15],22,1236535329),Ge,Be,e[1],5,-165796510),Be=m(Be,t,ke,Ge,e[6],9,-1069501632),Ge=m(Ge,Be,t,ke,e[11],14,643717713),ke=m(ke,Ge,Be,t,e[0],20,-373897302),t=m(t,ke,Ge,Be,e[5],5,-701558691),Be=m(Be,t,ke,Ge,e[10],9,38016083),Ge=m(Ge,Be,t,ke,e[15],14,-660478335),ke=m(ke,Ge,Be,t,e[4],20,-405537848),t=m(t,ke,Ge,Be,e[9],5,568446438),Be=m(Be,t,ke,Ge,e[14],9,-1019803690),Ge=m(Ge,Be,t,ke,e[3],14,-187363961),ke=m(ke,Ge,Be,t,e[8],20,1163531501),t=m(t,ke,Ge,Be,e[13],5,-1444681467),Be=m(Be,t,ke,Ge,e[2],9,-51403784),Ge=m(Ge,Be,t,ke,e[7],14,1735328473),t=v(t,ke=m(ke,Ge,Be,t,e[12],20,-1926607734),Ge,Be,e[5],4,-378558),Be=v(Be,t,ke,Ge,e[8],11,-2022574463),Ge=v(Ge,Be,t,ke,e[11],16,1839030562),ke=v(ke,Ge,Be,t,e[14],23,-35309556),t=v(t,ke,Ge,Be,e[1],4,-1530992060),Be=v(Be,t,ke,Ge,e[4],11,1272893353),Ge=v(Ge,Be,t,ke,e[7],16,-155497632),ke=v(ke,Ge,Be,t,e[10],23,-1094730640),t=v(t,ke,Ge,Be,e[13],4,681279174),Be=v(Be,t,ke,Ge,e[0],11,-358537222),Ge=v(Ge,Be,t,ke,e[3],16,-722521979),ke=v(ke,Ge,Be,t,e[6],23,76029189),t=v(t,ke,Ge,Be,e[9],4,-640364487),Be=v(Be,t,ke,Ge,e[12],11,-421815835),Ge=v(Ge,Be,t,ke,e[15],16,530742520),t=b(t,ke=v(ke,Ge,Be,t,e[2],23,-995338651),Ge,Be,e[0],6,-198630844),Be=b(Be,t,ke,Ge,e[7],10,1126891415),Ge=b(Ge,Be,t,ke,e[14],15,-1416354905),ke=b(ke,Ge,Be,t,e[5],21,-57434055),t=b(t,ke,Ge,Be,e[12],6,1700485571),Be=b(Be,t,ke,Ge,e[3],10,-1894986606),Ge=b(Ge,Be,t,ke,e[10],15,-1051523),ke=b(ke,Ge,Be,t,e[1],21,-2054922799),t=b(t,ke,Ge,Be,e[8],6,1873313359),Be=b(Be,t,ke,Ge,e[15],10,-30611744),Ge=b(Ge,Be,t,ke,e[6],15,-1560198380),ke=b(ke,Ge,Be,t,e[13],21,1309151649),t=b(t,ke,Ge,Be,e[4],6,-145523070),Be=b(Be,t,ke,Ge,e[11],10,-1120210379),Ge=b(Ge,Be,t,ke,e[2],15,718787259),ke=b(ke,Ge,Be,t,e[9],21,-343485551),Oe[0]=_(t,Oe[0]),Oe[1]=_(ke,Oe[1]),Oe[2]=_(Ge,Oe[2]),Oe[3]=_(Be,Oe[3])}function p(Oe,e,t,ke,Ge,Be){return e=_(_(e,Oe),_(ke,Be)),_(e<<Ge|e>>>32-Ge,t)}function g(Oe,e,t,ke,Ge,Be,je){return p(e&t|~e&ke,Oe,e,Ge,Be,je)}function m(Oe,e,t,ke,Ge,Be,je){return p(e&ke|t&~ke,Oe,e,Ge,Be,je)}function v(Oe,e,t,ke,Ge,Be,je){return p(e^t^ke,Oe,e,Ge,Be,je)}function b(Oe,e,t,ke,Ge,Be,je){return p(t^(e|~ke),Oe,e,Ge,Be,je)}function y(Oe){var e,t=Oe.length,ke=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=Oe.length;e+=64)d(ke,w(Oe.substring(e-64,e)));Oe=Oe.substring(e-64);var Ge=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<Oe.length;e++)Ge[e>>2]|=Oe.charCodeAt(e)<<(e%4<<3);if(Ge[e>>2]|=128<<(e%4<<3),e>55)for(d(ke,Ge),e=0;e<16;e++)Ge[e]=0;return Ge[14]=8*t,d(ke,Ge),ke}function w(Oe){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=Oe.charCodeAt(e)+(Oe.charCodeAt(e+1)<<8)+(Oe.charCodeAt(e+2)<<16)+(Oe.charCodeAt(e+3)<<24);return t}u=n.atob.bind(n),h=n.btoa.bind(n);var N="0123456789abcdef".split("");function L(Oe){for(var e="",t=0;t<4;t++)e+=N[Oe>>8*t+4&15]+N[Oe>>8*t&15];return e}function A(Oe){return String.fromCharCode((255&Oe)>>0,(65280&Oe)>>8,(16711680&Oe)>>16,(4278190080&Oe)>>24)}function x(Oe){return y(Oe).map(A).join("")}var S=function(Oe){for(var e=0;e<Oe.length;e++)Oe[e]=L(Oe[e]);return Oe.join("")}(y("hello"))!="5d41402abc4b2a76b9719d911017c592";function _(Oe,e){if(S){var t=(65535&Oe)+(65535&e);return(Oe>>16)+(e>>16)+(t>>16)<<16|65535&t}return Oe+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function P(Oe,e){var t,ke,Ge,Be;if(Oe!==t){for(var je=(Ge=Oe,Be=1+(256/Oe.length>>0),new Array(Be+1).join(Ge)),Ve=[],Ze=0;Ze<256;Ze++)Ve[Ze]=Ze;var Qe=0;for(Ze=0;Ze<256;Ze++){var en=Ve[Ze];Qe=(Qe+en+je.charCodeAt(Ze))%256,Ve[Ze]=Ve[Qe],Ve[Qe]=en}t=Oe,ke=Ve}else Ve=ke;var tn=e.length,an=0,cn=0,un="";for(Ze=0;Ze<tn;Ze++)cn=(cn+(en=Ve[an=(an+1)%256]))%256,Ve[an]=Ve[cn],Ve[cn]=en,je=Ve[(Ve[an]+Ve[cn])%256],un+=String.fromCharCode(e.charCodeAt(Ze)^je);return un}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var k={print:4,modify:8,copy:16,"annot-forms":32};function I(Oe,e,t,ke){this.v=1,this.r=2;var Ge=192;Oe.forEach(function(Ve){if(k.perm!==void 0)throw new Error("Invalid permission: "+Ve);Ge+=k[Ve]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var Be=(e+this.padding).substr(0,32),je=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(Be,je),this.P=-(1+(255^Ge)),this.encryptionKey=x(Be+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(ke)).substr(0,5),this.U=P(this.encryptionKey,this.padding)}function F(Oe){if(/[^\u0000-\u00ff]/.test(Oe))throw new Error("Invalid PDF Name Object: "+Oe+", Only accept ASCII characters.");for(var e="",t=Oe.length,ke=0;ke<t;ke++){var Ge=Oe.charCodeAt(ke);Ge<33||Ge===35||Ge===37||Ge===40||Ge===41||Ge===47||Ge===60||Ge===62||Ge===91||Ge===93||Ge===123||Ge===125||Ge>126?e+="#"+("0"+Ge.toString(16)).slice(-2):e+=Oe[ke]}return e}function C(Oe){if(_typeof(Oe)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,ke,Ge){if(Ge=Ge||!1,typeof t!="string"||typeof ke!="function"||typeof Ge!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var Be=Math.random().toString(35);return e[t][Be]=[ke,!!Ge],Be},this.unsubscribe=function(t){for(var ke in e)if(e[ke][t])return delete e[ke][t],Object.keys(e[ke]).length===0&&delete e[ke],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var ke=Array.prototype.slice.call(arguments,1),Ge=[];for(var Be in e[t]){var je=e[t][Be];try{je[0].apply(Oe,ke)}catch(Ve){n.console&&a.error("jsPDF PubSub Error",Ve.message,Ve)}je[1]&&Ge.push(Be)}Ge.length&&Ge.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function j(Oe){if(!(this instanceof j))return new j(Oe);var e="opacity,stroke-opacity".split(",");for(var t in Oe)Oe.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=Oe[t]);this.id="",this.objectNumber=-1}function O(Oe,e){this.gState=Oe,this.matrix=e,this.id="",this.objectNumber=-1}function B(Oe,e,t,ke,Ge){if(!(this instanceof B))return new B(Oe,e,t,ke,Ge);this.type=Oe==="axial"?2:3,this.coords=e,this.colors=t,O.call(this,ke,Ge)}function M(Oe,e,t,ke,Ge){if(!(this instanceof M))return new M(Oe,e,t,ke,Ge);this.boundingBox=Oe,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,O.call(this,ke,Ge)}function E(Oe){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",ke=arguments[1],Ge=arguments[2],Be=arguments[3],je=[],Ve=1,Ze=16,Qe="S",en=null;_typeof(Oe=Oe||{})==="object"&&(t=Oe.orientation,ke=Oe.unit||ke,Ge=Oe.format||Ge,Be=Oe.compress||Oe.compressPdf||Be,(en=Oe.encryption||null)!==null&&(en.userPassword=en.userPassword||"",en.ownerPassword=en.ownerPassword||"",en.userPermissions=en.userPermissions||[]),Ve=typeof Oe.userUnit=="number"?Math.abs(Oe.userUnit):1,Oe.precision!==void 0&&(e=Oe.precision),Oe.floatPrecision!==void 0&&(Ze=Oe.floatPrecision),Qe=Oe.defaultPathOperation||"S"),je=Oe.filters||(Be===!0?["FlateEncode"]:je),ke=ke||"mm",t=(""+(t||"P")).toLowerCase();var tn=Oe.putOnlyUsedFonts||!1,an={},cn={internal:{},__private__:{}};cn.__private__.PubSub=C;var un="1.3",dn=cn.__private__.getPdfVersion=function(){return un};cn.__private__.setPdfVersion=function(_n){un=_n};var fn={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};cn.__private__.getPageFormats=function(){return fn};var pn=cn.__private__.getPageFormat=function(_n){return fn[_n]};Ge=Ge||"a4";var gn={COMPAT:"compat",ADVANCED:"advanced"},yn=gn.COMPAT;function vn(){this.saveGraphicsState(),Fn(new to(Vr,0,0,-Vr,0,Uc()*Vr).toString()+" cm"),this.setFontSize(this.getFontSize()/Vr),Qe="n",yn=gn.ADVANCED}function An(){this.restoreGraphicsState(),Qe="S",yn=gn.COMPAT}var xn=cn.__private__.combineFontStyleAndFontWeight=function(_n,Dn){if(_n=="bold"&&Dn=="normal"||_n=="bold"&&Dn==400||_n=="normal"&&Dn=="italic"||_n=="bold"&&Dn=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Dn&&(_n=Dn==400||Dn==="normal"?_n==="italic"?"italic":"normal":Dn!=700&&Dn!=="bold"||_n!=="normal"?(Dn==700?"bold":Dn)+""+_n:"bold"),_n};cn.advancedAPI=function(_n){var Dn=yn===gn.COMPAT;return Dn&&vn.call(this),typeof _n!="function"||(_n(this),Dn&&An.call(this)),this},cn.compatAPI=function(_n){var Dn=yn===gn.ADVANCED;return Dn&&An.call(this),typeof _n!="function"||(_n(this),Dn&&vn.call(this)),this},cn.isAdvancedAPI=function(){return yn===gn.ADVANCED};var wn,bn=function(_n){if(yn!==gn.ADVANCED)throw new Error(_n+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Mn=cn.roundToPrecision=cn.__private__.roundToPrecision=function(_n,Dn){var Pi=e||Dn;if(isNaN(_n)||isNaN(Pi))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return _n.toFixed(Pi).replace(/0+$/,"")};wn=cn.hpf=cn.__private__.hpf=typeof Ze=="number"?function(_n){if(isNaN(_n))throw new Error("Invalid argument passed to jsPDF.hpf");return Mn(_n,Ze)}:Ze==="smart"?function(_n){if(isNaN(_n))throw new Error("Invalid argument passed to jsPDF.hpf");return Mn(_n,_n>-1&&_n<1?16:5)}:function(_n){if(isNaN(_n))throw new Error("Invalid argument passed to jsPDF.hpf");return Mn(_n,16)};var Pn=cn.f2=cn.__private__.f2=function(_n){if(isNaN(_n))throw new Error("Invalid argument passed to jsPDF.f2");return Mn(_n,2)},En=cn.__private__.f3=function(_n){if(isNaN(_n))throw new Error("Invalid argument passed to jsPDF.f3");return Mn(_n,3)},Cn=cn.scale=cn.__private__.scale=function(_n){if(isNaN(_n))throw new Error("Invalid argument passed to jsPDF.scale");return yn===gn.COMPAT?_n*Vr:yn===gn.ADVANCED?_n:void 0},Rn=function(_n){return yn===gn.COMPAT?Uc()-_n:yn===gn.ADVANCED?_n:void 0},Tn=function(_n){return Cn(Rn(_n))};cn.__private__.setPrecision=cn.setPrecision=function(_n){typeof parseInt(_n,10)=="number"&&(e=parseInt(_n,10))};var Nn,Gn="00000000000000000000000000000000",zn=cn.__private__.getFileId=function(){return Gn},$n=cn.__private__.setFileId=function(_n){return Gn=_n!==void 0&&/^[a-fA-F0-9]{32}$/.test(_n)?_n.toUpperCase():Gn.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),en!==null&&(Ya=new I(en.userPermissions,en.userPassword,en.ownerPassword,Gn)),Gn};cn.setFileId=function(_n){return $n(_n),this},cn.getFileId=function(){return zn()};var Qn=cn.__private__.convertDateToPDFDate=function(_n){var Dn=_n.getTimezoneOffset(),Pi=Dn<0?"+":"-",Fi=Math.floor(Math.abs(Dn/60)),Ki=Math.abs(Dn%60),Br=[Pi,Un(Fi),"'",Un(Ki),"'"].join("");return["D:",_n.getFullYear(),Un(_n.getMonth()+1),Un(_n.getDate()),Un(_n.getHours()),Un(_n.getMinutes()),Un(_n.getSeconds()),Br].join("")},Hn=cn.__private__.convertPDFDateToDate=function(_n){var Dn=parseInt(_n.substr(2,4),10),Pi=parseInt(_n.substr(6,2),10)-1,Fi=parseInt(_n.substr(8,2),10),Ki=parseInt(_n.substr(10,2),10),Br=parseInt(_n.substr(12,2),10),Gs=parseInt(_n.substr(14,2),10);return new Date(Dn,Pi,Fi,Ki,Br,Gs,0)},Ni=cn.__private__.setCreationDate=function(_n){var Dn;if(_n===void 0&&(_n=new Date),_n instanceof Date)Dn=Qn(_n);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(_n))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Dn=_n}return Nn=Dn},On=cn.__private__.getCreationDate=function(_n){var Dn=Nn;return _n==="jsDate"&&(Dn=Hn(Nn)),Dn};cn.setCreationDate=function(_n){return Ni(_n),this},cn.getCreationDate=function(_n){return On(_n)};var qn,Un=cn.__private__.padd2=function(_n){return("0"+parseInt(_n)).slice(-2)},Ci=cn.__private__.padd2Hex=function(_n){return("00"+(_n=_n.toString())).substr(_n.length)},Si=0,_i=[],Ii=[],Li=0,Ri=[],tr=[],Fr=!1,Bn=Ii,Ai=function(){Si=0,Li=0,Ii=[],_i=[],Ri=[],Za=Oo(),Tl=Oo()};cn.__private__.setCustomOutputDestination=function(_n){Fr=!0,Bn=_n};var Kn=function(_n){Fr||(Bn=_n)};cn.__private__.resetCustomOutputDestination=function(){Fr=!1,Bn=Ii};var Fn=cn.__private__.out=function(_n){return _n=_n.toString(),Li+=_n.length+1,Bn.push(_n),Bn},$i=cn.__private__.write=function(_n){return Fn(arguments.length===1?_n.toString():Array.prototype.join.call(arguments," "))},Hi=cn.__private__.getArrayBuffer=function(_n){for(var Dn=_n.length,Pi=new ArrayBuffer(Dn),Fi=new Uint8Array(Pi);Dn--;)Fi[Dn]=_n.charCodeAt(Dn);return Pi},Di=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];cn.__private__.getStandardFonts=function(){return Di};var zi=Oe.fontSize||16;cn.__private__.setFontSize=cn.setFontSize=function(_n){return zi=yn===gn.ADVANCED?_n/Vr:_n,this};var Bi,Gi=cn.__private__.getFontSize=cn.getFontSize=function(){return yn===gn.COMPAT?zi:zi*Vr},Ti=Oe.R2L||!1;cn.__private__.setR2L=cn.setR2L=function(_n){return Ti=_n,this},cn.__private__.getR2L=cn.getR2L=function(){return Ti};var Mi,Oi=cn.__private__.setZoomMode=function(_n){var Dn=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(_n))Bi=_n;else if(isNaN(_n)){if(Dn.indexOf(_n)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+_n+'" is not recognized.');Bi=_n}else Bi=parseInt(_n,10)};cn.__private__.getZoomMode=function(){return Bi};var Xi,ar=cn.__private__.setPageMode=function(_n){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(_n)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+_n+'" is not recognized.');Mi=_n};cn.__private__.getPageMode=function(){return Mi};var Pr=cn.__private__.setLayoutMode=function(_n){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(_n)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+_n+'" is not recognized.');Xi=_n};cn.__private__.getLayoutMode=function(){return Xi},cn.__private__.setDisplayMode=cn.setDisplayMode=function(_n,Dn,Pi){return Oi(_n),Pr(Dn),ar(Pi),this};var Rr={title:"",subject:"",author:"",keywords:"",creator:""};cn.__private__.getDocumentProperty=function(_n){if(Object.keys(Rr).indexOf(_n)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Rr[_n]},cn.__private__.getDocumentProperties=function(){return Rr},cn.__private__.setDocumentProperties=cn.setProperties=cn.setDocumentProperties=function(_n){for(var Dn in Rr)Rr.hasOwnProperty(Dn)&&_n[Dn]&&(Rr[Dn]=_n[Dn]);return this},cn.__private__.setDocumentProperty=function(_n,Dn){if(Object.keys(Rr).indexOf(_n)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Rr[_n]=Dn};var Us,Vr,ro,Js,fo,lo={},Ks={},oo=[],no={},bo={},co={},Ko={},aa=null,ho=0,io=[],po=new C(cn),cc=Oe.hotfixes||[],jo={},Ma={},uo=[],to=function _n(Dn,Pi,Fi,Ki,Br,Gs){if(!(this instanceof _n))return new _n(Dn,Pi,Fi,Ki,Br,Gs);isNaN(Dn)&&(Dn=1),isNaN(Pi)&&(Pi=0),isNaN(Fi)&&(Fi=0),isNaN(Ki)&&(Ki=1),isNaN(Br)&&(Br=0),isNaN(Gs)&&(Gs=0),this._matrix=[Dn,Pi,Fi,Ki,Br,Gs]};Object.defineProperty(to.prototype,"sx",{get:function(){return this._matrix[0]},set:function(_n){this._matrix[0]=_n}}),Object.defineProperty(to.prototype,"shy",{get:function(){return this._matrix[1]},set:function(_n){this._matrix[1]=_n}}),Object.defineProperty(to.prototype,"shx",{get:function(){return this._matrix[2]},set:function(_n){this._matrix[2]=_n}}),Object.defineProperty(to.prototype,"sy",{get:function(){return this._matrix[3]},set:function(_n){this._matrix[3]=_n}}),Object.defineProperty(to.prototype,"tx",{get:function(){return this._matrix[4]},set:function(_n){this._matrix[4]=_n}}),Object.defineProperty(to.prototype,"ty",{get:function(){return this._matrix[5]},set:function(_n){this._matrix[5]=_n}}),Object.defineProperty(to.prototype,"a",{get:function(){return this._matrix[0]},set:function(_n){this._matrix[0]=_n}}),Object.defineProperty(to.prototype,"b",{get:function(){return this._matrix[1]},set:function(_n){this._matrix[1]=_n}}),Object.defineProperty(to.prototype,"c",{get:function(){return this._matrix[2]},set:function(_n){this._matrix[2]=_n}}),Object.defineProperty(to.prototype,"d",{get:function(){return this._matrix[3]},set:function(_n){this._matrix[3]=_n}}),Object.defineProperty(to.prototype,"e",{get:function(){return this._matrix[4]},set:function(_n){this._matrix[4]=_n}}),Object.defineProperty(to.prototype,"f",{get:function(){return this._matrix[5]},set:function(_n){this._matrix[5]=_n}}),Object.defineProperty(to.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(to.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(to.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(to.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),to.prototype.join=function(_n){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(wn).join(_n)},to.prototype.multiply=function(_n){var Dn=_n.sx*this.sx+_n.shy*this.shx,Pi=_n.sx*this.shy+_n.shy*this.sy,Fi=_n.shx*this.sx+_n.sy*this.shx,Ki=_n.shx*this.shy+_n.sy*this.sy,Br=_n.tx*this.sx+_n.ty*this.shx+this.tx,Gs=_n.tx*this.shy+_n.ty*this.sy+this.ty;return new to(Dn,Pi,Fi,Ki,Br,Gs)},to.prototype.decompose=function(){var _n=this.sx,Dn=this.shy,Pi=this.shx,Fi=this.sy,Ki=this.tx,Br=this.ty,Gs=Math.sqrt(_n*_n+Dn*Dn),Qs=(_n/=Gs)*Pi+(Dn/=Gs)*Fi;Pi-=_n*Qs,Fi-=Dn*Qs;var so=Math.sqrt(Pi*Pi+Fi*Fi);return Qs/=so,_n*(Fi/=so)<Dn*(Pi/=so)&&(_n=-_n,Dn=-Dn,Qs=-Qs,Gs=-Gs),{scale:new to(Gs,0,0,so,0,0),translate:new to(1,0,0,1,Ki,Br),rotate:new to(_n,Dn,-Dn,_n,0,0),skew:new to(1,0,Qs,1,0,0)}},to.prototype.toString=function(_n){return this.join(" ")},to.prototype.inversed=function(){var _n=this.sx,Dn=this.shy,Pi=this.shx,Fi=this.sy,Ki=this.tx,Br=this.ty,Gs=1/(_n*Fi-Dn*Pi),Qs=Fi*Gs,so=-Dn*Gs,vo=-Pi*Gs,yo=_n*Gs;return new to(Qs,so,vo,yo,-Qs*Ki-vo*Br,-so*Ki-yo*Br)},to.prototype.applyToPoint=function(_n){var Dn=_n.x*this.sx+_n.y*this.shx+this.tx,Pi=_n.x*this.shy+_n.y*this.sy+this.ty;return new bu(Dn,Pi)},to.prototype.applyToRectangle=function(_n){var Dn=this.applyToPoint(_n),Pi=this.applyToPoint(new bu(_n.x+_n.w,_n.y+_n.h));return new Zu(Dn.x,Dn.y,Pi.x-Dn.x,Pi.y-Dn.y)},to.prototype.clone=function(){var _n=this.sx,Dn=this.shy,Pi=this.shx,Fi=this.sy,Ki=this.tx,Br=this.ty;return new to(_n,Dn,Pi,Fi,Ki,Br)},cn.Matrix=to;var ta=cn.matrixMult=function(_n,Dn){return Dn.multiply(_n)},ya=new to(1,0,0,1,0,0);cn.unitMatrix=cn.identityMatrix=ya;var Qo=function(_n,Dn){if(!bo[_n]){var Pi=(Dn instanceof B?"Sh":"P")+(Object.keys(no).length+1).toString(10);Dn.id=Pi,bo[_n]=Pi,no[Pi]=Dn,po.publish("addPattern",Dn)}};cn.ShadingPattern=B,cn.TilingPattern=M,cn.addShadingPattern=function(_n,Dn){return bn("addShadingPattern()"),Qo(_n,Dn),this},cn.beginTilingPattern=function(_n){bn("beginTilingPattern()"),qd(_n.boundingBox[0],_n.boundingBox[1],_n.boundingBox[2]-_n.boundingBox[0],_n.boundingBox[3]-_n.boundingBox[1],_n.matrix)},cn.endTilingPattern=function(_n,Dn){bn("endTilingPattern()"),Dn.stream=tr[qn].join(`
`),Qo(_n,Dn),po.publish("endTilingPattern",Dn),uo.pop().restore()};var go=cn.__private__.newObject=function(){var _n=Oo();return ko(_n,!0),_n},Oo=cn.__private__.newObjectDeferred=function(){return Si++,_i[Si]=function(){return Li},Si},ko=function(_n,Dn){return Dn=typeof Dn=="boolean"&&Dn,_i[_n]=Li,Dn&&Fn(_n+" 0 obj"),_n},Pl=cn.__private__.newAdditionalObject=function(){var _n={objId:Oo(),content:""};return Ri.push(_n),_n},Za=Oo(),Tl=Oo(),ic=cn.__private__.decodeColorString=function(_n){var Dn=_n.split(" ");if(Dn.length!==2||Dn[1]!=="g"&&Dn[1]!=="G")Dn.length===5&&(Dn[4]==="k"||Dn[4]==="K")&&(Dn=[(1-Dn[0])*(1-Dn[3]),(1-Dn[1])*(1-Dn[3]),(1-Dn[2])*(1-Dn[3]),"r"]);else{var Pi=parseFloat(Dn[0]);Dn=[Pi,Pi,Pi,"r"]}for(var Fi="#",Ki=0;Ki<3;Ki++)Fi+=("0"+Math.floor(255*parseFloat(Dn[Ki])).toString(16)).slice(-2);return Fi},Rl=cn.__private__.encodeColorString=function(_n){var Dn;typeof _n=="string"&&(_n={ch1:_n});var Pi=_n.ch1,Fi=_n.ch2,Ki=_n.ch3,Br=_n.ch4,Gs=_n.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Pi=="string"&&Pi.charAt(0)!=="#"){var Qs=new f(Pi);if(Qs.ok)Pi=Qs.toHex();else if(!/^\d*\.?\d*$/.test(Pi))throw new Error('Invalid color "'+Pi+'" passed to jsPDF.encodeColorString.')}if(typeof Pi=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Pi)&&(Pi="#"+Pi[1]+Pi[1]+Pi[2]+Pi[2]+Pi[3]+Pi[3]),typeof Pi=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Pi)){var so=parseInt(Pi.substr(1),16);Pi=so>>16&255,Fi=so>>8&255,Ki=255&so}if(Fi===void 0||Br===void 0&&Pi===Fi&&Fi===Ki)if(typeof Pi=="string")Dn=Pi+" "+Gs[0];else switch(_n.precision){case 2:Dn=Pn(Pi/255)+" "+Gs[0];break;case 3:default:Dn=En(Pi/255)+" "+Gs[0]}else if(Br===void 0||_typeof(Br)==="object"){if(Br&&!isNaN(Br.a)&&Br.a===0)return Dn=["1.","1.","1.",Gs[1]].join(" ");if(typeof Pi=="string")Dn=[Pi,Fi,Ki,Gs[1]].join(" ");else switch(_n.precision){case 2:Dn=[Pn(Pi/255),Pn(Fi/255),Pn(Ki/255),Gs[1]].join(" ");break;default:case 3:Dn=[En(Pi/255),En(Fi/255),En(Ki/255),Gs[1]].join(" ")}}else if(typeof Pi=="string")Dn=[Pi,Fi,Ki,Br,Gs[2]].join(" ");else switch(_n.precision){case 2:Dn=[Pn(Pi),Pn(Fi),Pn(Ki),Pn(Br),Gs[2]].join(" ");break;case 3:default:Dn=[En(Pi),En(Fi),En(Ki),En(Br),Gs[2]].join(" ")}return Dn},Va=cn.__private__.getFilters=function(){return je},za=cn.__private__.putStream=function(_n){var Dn=(_n=_n||{}).data||"",Pi=_n.filters||Va(),Fi=_n.alreadyAppliedFilters||[],Ki=_n.addLength1||!1,Br=Dn.length,Gs=_n.objectId,Qs=function(Xa){return Xa};if(en!==null&&Gs===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");en!==null&&(Qs=Ya.encryptor(Gs,0));var so={};Pi===!0&&(Pi=["FlateEncode"]);var vo=_n.additionalKeyValues||[],yo=(so=E.API.processDataByFilters!==void 0?E.API.processDataByFilters(Dn,Pi):{data:Dn,reverseChain:[]}).reverseChain+(Array.isArray(Fi)?Fi.join(" "):Fi.toString());if(so.data.length!==0&&(vo.push({key:"Length",value:so.data.length}),Ki===!0&&vo.push({key:"Length1",value:Br})),yo.length!=0)if(yo.split("/").length-1==1)vo.push({key:"Filter",value:yo});else{vo.push({key:"Filter",value:"["+yo+"]"});for(var Go=0;Go<vo.length;Go+=1)if(vo[Go].key==="DecodeParms"){for(var Aa=[],Sa=0;Sa<so.reverseChain.split("/").length-1;Sa+=1)Aa.push("null");Aa.push(vo[Go].value),vo[Go].value="["+Aa.join(" ")+"]"}}Fn("<<");for(var Oa=0;Oa<vo.length;Oa++)Fn("/"+vo[Oa].key+" "+vo[Oa].value);Fn(">>"),so.data.length!==0&&(Fn("stream"),Fn(Qs(so.data)),Fn("endstream"))},Sc=cn.__private__.putPage=function(_n){var Dn=_n.number,Pi=_n.data,Fi=_n.objId,Ki=_n.contentsObjId;ko(Fi,!0),Fn("<</Type /Page"),Fn("/Parent "+_n.rootDictionaryObjId+" 0 R"),Fn("/Resources "+_n.resourceDictionaryObjId+" 0 R"),Fn("/MediaBox ["+parseFloat(wn(_n.mediaBox.bottomLeftX))+" "+parseFloat(wn(_n.mediaBox.bottomLeftY))+" "+wn(_n.mediaBox.topRightX)+" "+wn(_n.mediaBox.topRightY)+"]"),_n.cropBox!==null&&Fn("/CropBox ["+wn(_n.cropBox.bottomLeftX)+" "+wn(_n.cropBox.bottomLeftY)+" "+wn(_n.cropBox.topRightX)+" "+wn(_n.cropBox.topRightY)+"]"),_n.bleedBox!==null&&Fn("/BleedBox ["+wn(_n.bleedBox.bottomLeftX)+" "+wn(_n.bleedBox.bottomLeftY)+" "+wn(_n.bleedBox.topRightX)+" "+wn(_n.bleedBox.topRightY)+"]"),_n.trimBox!==null&&Fn("/TrimBox ["+wn(_n.trimBox.bottomLeftX)+" "+wn(_n.trimBox.bottomLeftY)+" "+wn(_n.trimBox.topRightX)+" "+wn(_n.trimBox.topRightY)+"]"),_n.artBox!==null&&Fn("/ArtBox ["+wn(_n.artBox.bottomLeftX)+" "+wn(_n.artBox.bottomLeftY)+" "+wn(_n.artBox.topRightX)+" "+wn(_n.artBox.topRightY)+"]"),typeof _n.userUnit=="number"&&_n.userUnit!==1&&Fn("/UserUnit "+_n.userUnit),po.publish("putPage",{objId:Fi,pageContext:io[Dn],pageNumber:Dn,page:Pi}),Fn("/Contents "+Ki+" 0 R"),Fn(">>"),Fn("endobj");var Br=Pi.join(`
`);return yn===gn.ADVANCED&&(Br+=`
Q`),ko(Ki,!0),za({data:Br,filters:Va(),objectId:Ki}),Fn("endobj"),Fi},tu=cn.__private__.putPages=function(){var _n,Dn,Pi=[];for(_n=1;_n<=ho;_n++)io[_n].objId=Oo(),io[_n].contentsObjId=Oo();for(_n=1;_n<=ho;_n++)Pi.push(Sc({number:_n,data:tr[_n],objId:io[_n].objId,contentsObjId:io[_n].contentsObjId,mediaBox:io[_n].mediaBox,cropBox:io[_n].cropBox,bleedBox:io[_n].bleedBox,trimBox:io[_n].trimBox,artBox:io[_n].artBox,userUnit:io[_n].userUnit,rootDictionaryObjId:Za,resourceDictionaryObjId:Tl}));ko(Za,!0),Fn("<</Type /Pages");var Fi="/Kids [";for(Dn=0;Dn<ho;Dn++)Fi+=Pi[Dn]+" 0 R ";Fn(Fi+"]"),Fn("/Count "+ho),Fn(">>"),Fn("endobj"),po.publish("postPutPages")},hu=function(_n){po.publish("putFont",{font:_n,out:Fn,newObject:go,putStream:za}),_n.isAlreadyPutted!==!0&&(_n.objectNumber=go(),Fn("<<"),Fn("/Type /Font"),Fn("/BaseFont /"+F(_n.postScriptName)),Fn("/Subtype /Type1"),typeof _n.encoding=="string"&&Fn("/Encoding /"+_n.encoding),Fn("/FirstChar 32"),Fn("/LastChar 255"),Fn(">>"),Fn("endobj"))},fu=function(){for(var _n in lo)lo.hasOwnProperty(_n)&&(tn===!1||tn===!0&&an.hasOwnProperty(_n))&&hu(lo[_n])},pu=function(_n){_n.objectNumber=go();var Dn=[];Dn.push({key:"Type",value:"/XObject"}),Dn.push({key:"Subtype",value:"/Form"}),Dn.push({key:"BBox",value:"["+[wn(_n.x),wn(_n.y),wn(_n.x+_n.width),wn(_n.y+_n.height)].join(" ")+"]"}),Dn.push({key:"Matrix",value:"["+_n.matrix.toString()+"]"});var Pi=_n.pages[1].join(`
`);za({data:Pi,additionalKeyValues:Dn,objectId:_n.objectNumber}),Fn("endobj")},gu=function(){for(var _n in jo)jo.hasOwnProperty(_n)&&pu(jo[_n])},bd=function(_n,Dn){var Pi,Fi=[],Ki=1/(Dn-1);for(Pi=0;Pi<1;Pi+=Ki)Fi.push(Pi);if(Fi.push(1),_n[0].offset!=0){var Br={offset:0,color:_n[0].color};_n.unshift(Br)}if(_n[_n.length-1].offset!=1){var Gs={offset:1,color:_n[_n.length-1].color};_n.push(Gs)}for(var Qs="",so=0,vo=0;vo<Fi.length;vo++){for(Pi=Fi[vo];Pi>_n[so+1].offset;)so++;var yo=_n[so].offset,Go=(Pi-yo)/(_n[so+1].offset-yo),Aa=_n[so].color,Sa=_n[so+1].color;Qs+=Ci(Math.round((1-Go)*Aa[0]+Go*Sa[0]).toString(16))+Ci(Math.round((1-Go)*Aa[1]+Go*Sa[1]).toString(16))+Ci(Math.round((1-Go)*Aa[2]+Go*Sa[2]).toString(16))}return Qs.trim()},_h=function(_n,Dn){Dn||(Dn=21);var Pi=go(),Fi=bd(_n.colors,Dn),Ki=[];Ki.push({key:"FunctionType",value:"0"}),Ki.push({key:"Domain",value:"[0.0 1.0]"}),Ki.push({key:"Size",value:"["+Dn+"]"}),Ki.push({key:"BitsPerSample",value:"8"}),Ki.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ki.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),za({data:Fi,additionalKeyValues:Ki,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Pi}),Fn("endobj"),_n.objectNumber=go(),Fn("<< /ShadingType "+_n.type),Fn("/ColorSpace /DeviceRGB");var Br="/Coords ["+wn(parseFloat(_n.coords[0]))+" "+wn(parseFloat(_n.coords[1]))+" ";_n.type===2?Br+=wn(parseFloat(_n.coords[2]))+" "+wn(parseFloat(_n.coords[3])):Br+=wn(parseFloat(_n.coords[2]))+" "+wn(parseFloat(_n.coords[3]))+" "+wn(parseFloat(_n.coords[4]))+" "+wn(parseFloat(_n.coords[5])),Fn(Br+="]"),_n.matrix&&Fn("/Matrix ["+_n.matrix.toString()+"]"),Fn("/Function "+Pi+" 0 R"),Fn("/Extend [true true]"),Fn(">>"),Fn("endobj")},Ch=function(_n,Dn){var Pi=Oo(),Fi=go();Dn.push({resourcesOid:Pi,objectOid:Fi}),_n.objectNumber=Fi;var Ki=[];Ki.push({key:"Type",value:"/Pattern"}),Ki.push({key:"PatternType",value:"1"}),Ki.push({key:"PaintType",value:"1"}),Ki.push({key:"TilingType",value:"1"}),Ki.push({key:"BBox",value:"["+_n.boundingBox.map(wn).join(" ")+"]"}),Ki.push({key:"XStep",value:wn(_n.xStep)}),Ki.push({key:"YStep",value:wn(_n.yStep)}),Ki.push({key:"Resources",value:Pi+" 0 R"}),_n.matrix&&Ki.push({key:"Matrix",value:"["+_n.matrix.toString()+"]"}),za({data:_n.stream,additionalKeyValues:Ki,objectId:_n.objectNumber}),Fn("endobj")},mu=function(_n){var Dn;for(Dn in no)no.hasOwnProperty(Dn)&&(no[Dn]instanceof B?_h(no[Dn]):no[Dn]instanceof M&&Ch(no[Dn],_n))},Id=function(_n){for(var Dn in _n.objectNumber=go(),Fn("<<"),_n)switch(Dn){case"opacity":Fn("/ca "+Pn(_n[Dn]));break;case"stroke-opacity":Fn("/CA "+Pn(_n[Dn]))}Fn(">>"),Fn("endobj")},Ah=function(){var _n;for(_n in co)co.hasOwnProperty(_n)&&Id(co[_n])},ju=function(){for(var _n in Fn("/XObject <<"),jo)jo.hasOwnProperty(_n)&&jo[_n].objectNumber>=0&&Fn("/"+_n+" "+jo[_n].objectNumber+" 0 R");po.publish("putXobjectDict"),Fn(">>")},Eh=function(){Ya.oid=go(),Fn("<<"),Fn("/Filter /Standard"),Fn("/V "+Ya.v),Fn("/R "+Ya.r),Fn("/U <"+Ya.toHexString(Ya.U)+">"),Fn("/O <"+Ya.toHexString(Ya.O)+">"),Fn("/P "+Ya.P),Fn(">>"),Fn("endobj")},wd=function(){for(var _n in Fn("/Font <<"),lo)lo.hasOwnProperty(_n)&&(tn===!1||tn===!0&&an.hasOwnProperty(_n))&&Fn("/"+_n+" "+lo[_n].objectNumber+" 0 R");Fn(">>")},Sh=function(){if(Object.keys(no).length>0){for(var _n in Fn("/Shading <<"),no)no.hasOwnProperty(_n)&&no[_n]instanceof B&&no[_n].objectNumber>=0&&Fn("/"+_n+" "+no[_n].objectNumber+" 0 R");po.publish("putShadingPatternDict"),Fn(">>")}},yu=function(_n){if(Object.keys(no).length>0){for(var Dn in Fn("/Pattern <<"),no)no.hasOwnProperty(Dn)&&no[Dn]instanceof cn.TilingPattern&&no[Dn].objectNumber>=0&&no[Dn].objectNumber<_n&&Fn("/"+Dn+" "+no[Dn].objectNumber+" 0 R");po.publish("putTilingPatternDict"),Fn(">>")}},bh=function(){if(Object.keys(co).length>0){var _n;for(_n in Fn("/ExtGState <<"),co)co.hasOwnProperty(_n)&&co[_n].objectNumber>=0&&Fn("/"+_n+" "+co[_n].objectNumber+" 0 R");po.publish("putGStateDict"),Fn(">>")}},Pa=function(_n){ko(_n.resourcesOid,!0),Fn("<<"),Fn("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),wd(),Sh(),yu(_n.objectOid),bh(),ju(),Fn(">>"),Fn("endobj")},Pd=function(){var _n=[];fu(),Ah(),gu(),mu(_n),po.publish("putResources"),_n.forEach(Pa),Pa({resourcesOid:Tl,objectOid:Number.MAX_SAFE_INTEGER}),po.publish("postPutResources")},xd=function(){po.publish("putAdditionalObjects");for(var _n=0;_n<Ri.length;_n++){var Dn=Ri[_n];ko(Dn.objId,!0),Fn(Dn.content),Fn("endobj")}po.publish("postPutAdditionalObjects")},Ld=function(_n){Ks[_n.fontName]=Ks[_n.fontName]||{},Ks[_n.fontName][_n.fontStyle]=_n.id},Vu=function(_n,Dn,Pi,Fi,Ki){var Br={id:"F"+(Object.keys(lo).length+1).toString(10),postScriptName:_n,fontName:Dn,fontStyle:Pi,encoding:Fi,isStandardFont:Ki||!1,metadata:{}};return po.publish("addFont",{font:Br,instance:this}),lo[Br.id]=Br,Ld(Br),Br.id},Ih=function(_n){for(var Dn=0,Pi=Di.length;Dn<Pi;Dn++){var Fi=Vu.call(this,_n[Dn][0],_n[Dn][1],_n[Dn][2],Di[Dn][3],!0);tn===!1&&(an[Fi]=!0);var Ki=_n[Dn][0].split("-");Ld({id:Fi,fontName:Ki[0],fontStyle:Ki[1]||""})}po.publish("addFonts",{fonts:lo,dictionary:Ks})},vc=function(_n){return _n.foo=function(){try{return _n.apply(this,arguments)}catch(Fi){var Dn=Fi.stack||"";~Dn.indexOf(" at ")&&(Dn=Dn.split(" at ")[1]);var Pi="Error in function "+Dn.split(`
`)[0].split("<")[0]+": "+Fi.message;if(!n.console)throw new Error(Pi);n.console.error(Pi,Fi),n.alert&&alert(Pi)}},_n.foo.bar=_n,_n.foo},vu=function(_n,Dn){var Pi,Fi,Ki,Br,Gs,Qs,so,vo,yo;if(Ki=(Dn=Dn||{}).sourceEncoding||"Unicode",Gs=Dn.outputEncoding,(Dn.autoencode||Gs)&&lo[Us].metadata&&lo[Us].metadata[Ki]&&lo[Us].metadata[Ki].encoding&&(Br=lo[Us].metadata[Ki].encoding,!Gs&&lo[Us].encoding&&(Gs=lo[Us].encoding),!Gs&&Br.codePages&&(Gs=Br.codePages[0]),typeof Gs=="string"&&(Gs=Br[Gs]),Gs)){for(so=!1,Qs=[],Pi=0,Fi=_n.length;Pi<Fi;Pi++)(vo=Gs[_n.charCodeAt(Pi)])?Qs.push(String.fromCharCode(vo)):Qs.push(_n[Pi]),Qs[Pi].charCodeAt(0)>>8&&(so=!0);_n=Qs.join("")}for(Pi=_n.length;so===void 0&&Pi!==0;)_n.charCodeAt(Pi-1)>>8&&(so=!0),Pi--;if(!so)return _n;for(Qs=Dn.noBOM?[]:[254,255],Pi=0,Fi=_n.length;Pi<Fi;Pi++){if((yo=(vo=_n.charCodeAt(Pi))>>8)>>8)throw new Error("Character at position "+Pi+" of string '"+_n+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Qs.push(yo),Qs.push(vo-(yo<<8))}return String.fromCharCode.apply(void 0,Qs)},Bl=cn.__private__.pdfEscape=cn.pdfEscape=function(_n,Dn){return vu(_n,Dn).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},zu=cn.__private__.beginPage=function(_n){tr[++ho]=[],io[ho]={objId:0,contentsObjId:0,userUnit:Number(Ve),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(_n[0]),topRightY:Number(_n[1])}},Md(ho),Kn(tr[qn])},Td=function(_n,Dn){var Pi,Fi,Ki;switch(t=Dn||t,typeof _n=="string"&&(Pi=pn(_n.toLowerCase()),Array.isArray(Pi)&&(Fi=Pi[0],Ki=Pi[1])),Array.isArray(_n)&&(Fi=_n[0]*Vr,Ki=_n[1]*Vr),isNaN(Fi)&&(Fi=Ge[0],Ki=Ge[1]),(Fi>14400||Ki>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Fi=Math.min(14400,Fi),Ki=Math.min(14400,Ki)),Ge=[Fi,Ki],t.substr(0,1)){case"l":Ki>Fi&&(Ge=[Ki,Fi]);break;case"p":Fi>Ki&&(Ge=[Ki,Fi])}zu(Ge),Fd(Wu),Fn(_c),Xu!==0&&Fn(Xu+" J"),Ku!==0&&Fn(Ku+" j"),po.publish("addPage",{pageNumber:ho})},wh=function(_n){_n>0&&_n<=ho&&(tr.splice(_n,1),io.splice(_n,1),ho--,qn>ho&&(qn=ho),this.setPage(qn))},Md=function(_n){_n>0&&_n<=ho&&(qn=_n)},Ph=cn.__private__.getNumberOfPages=cn.getNumberOfPages=function(){return tr.length-1},Od=function(_n,Dn,Pi){var Fi,Ki=void 0;return Pi=Pi||{},_n=_n!==void 0?_n:lo[Us].fontName,Dn=Dn!==void 0?Dn:lo[Us].fontStyle,Fi=_n.toLowerCase(),Ks[Fi]!==void 0&&Ks[Fi][Dn]!==void 0?Ki=Ks[Fi][Dn]:Ks[_n]!==void 0&&Ks[_n][Dn]!==void 0?Ki=Ks[_n][Dn]:Pi.disableWarning===!1&&a.warn("Unable to look up font label for font '"+_n+"', '"+Dn+"'. Refer to getFontList() for available fonts."),Ki||Pi.noFallback||(Ki=Ks.times[Dn])==null&&(Ki=Ks.times.normal),Ki},xh=cn.__private__.putInfo=function(){var _n=go(),Dn=function(Fi){return Fi};for(var Pi in en!==null&&(Dn=Ya.encryptor(_n,0)),Fn("<<"),Fn("/Producer ("+Bl(Dn("jsPDF "+E.version))+")"),Rr)Rr.hasOwnProperty(Pi)&&Rr[Pi]&&Fn("/"+Pi.substr(0,1).toUpperCase()+Pi.substr(1)+" ("+Bl(Dn(Rr[Pi]))+")");Fn("/CreationDate ("+Bl(Dn(Nn))+")"),Fn(">>"),Fn("endobj")},Hu=cn.__private__.putCatalog=function(_n){var Dn=(_n=_n||{}).rootDictionaryObjId||Za;switch(go(),Fn("<<"),Fn("/Type /Catalog"),Fn("/Pages "+Dn+" 0 R"),Bi||(Bi="fullwidth"),Bi){case"fullwidth":Fn("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Fn("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Fn("/OpenAction [3 0 R /Fit]");break;case"original":Fn("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Pi=""+Bi;Pi.substr(Pi.length-1)==="%"&&(Bi=parseInt(Bi)/100),typeof Bi=="number"&&Fn("/OpenAction [3 0 R /XYZ null null "+Pn(Bi)+"]")}switch(Xi||(Xi="continuous"),Xi){case"continuous":Fn("/PageLayout /OneColumn");break;case"single":Fn("/PageLayout /SinglePage");break;case"two":case"twoleft":Fn("/PageLayout /TwoColumnLeft");break;case"tworight":Fn("/PageLayout /TwoColumnRight")}Mi&&Fn("/PageMode /"+Mi),po.publish("putCatalog"),Fn(">>"),Fn("endobj")},Lh=cn.__private__.putTrailer=function(){Fn("trailer"),Fn("<<"),Fn("/Size "+(Si+1)),Fn("/Root "+Si+" 0 R"),Fn("/Info "+(Si-1)+" 0 R"),en!==null&&Fn("/Encrypt "+Ya.oid+" 0 R"),Fn("/ID [ <"+Gn+"> <"+Gn+"> ]"),Fn(">>")},Th=cn.__private__.putHeader=function(){Fn("%PDF-"+un),Fn("%ºß¬à")},Rh=cn.__private__.putXRef=function(){var _n="0000000000";Fn("xref"),Fn("0 "+(Si+1)),Fn("0000000000 65535 f ");for(var Dn=1;Dn<=Si;Dn++)typeof _i[Dn]=="function"?Fn((_n+_i[Dn]()).slice(-10)+" 00000 n "):_i[Dn]!==void 0?Fn((_n+_i[Dn]).slice(-10)+" 00000 n "):Fn("0000000000 00000 n ")},xc=cn.__private__.buildDocument=function(){Ai(),Kn(Ii),po.publish("buildDocument"),Th(),tu(),xd(),Pd(),en!==null&&Eh(),xh(),Hu();var _n=Li;return Rh(),Lh(),Fn("startxref"),Fn(""+_n),Fn("%%EOF"),Kn(tr[qn]),Ii.join(`
`)},_u=cn.__private__.getBlob=function(_n){return new Blob([Hi(_n)],{type:"application/pdf"})},Cu=cn.output=cn.__private__.output=vc(function(_n,Dn){switch(typeof(Dn=Dn||{})=="string"?Dn={filename:Dn}:Dn.filename=Dn.filename||"generated.pdf",_n){case void 0:return xc();case"save":cn.save(Dn.filename);break;case"arraybuffer":return Hi(xc());case"blob":return _u(xc());case"bloburi":case"bloburl":if(n.URL!==void 0&&typeof n.URL.createObjectURL=="function")return n.URL&&n.URL.createObjectURL(_u(xc()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Pi="",Fi=xc();try{Pi=h(Fi)}catch{Pi=h(unescape(encodeURIComponent(Fi)))}return"data:application/pdf;filename="+Dn.filename+";base64,"+Pi;case"pdfobjectnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var Ki="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Br=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Dn.pdfObjectUrl&&(Ki=Dn.pdfObjectUrl,Br="");var Gs='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ki+'"'+Br+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Dn)+");<\/script></body></html>",Qs=n.open();return Qs!==null&&Qs.document.write(Gs),Qs}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(n)==="[object Window]"){var so='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Dn.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Dn.filename+'" width="500px" height="400px" /></body></html>',vo=n.open();if(vo!==null){vo.document.write(so);var yo=this;vo.document.documentElement.querySelector("#pdfViewer").onload=function(){vo.document.title=Dn.filename,vo.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(yo.output("bloburl"))}}return vo}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(n)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Go='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Dn)+'"></iframe></body></html>',Aa=n.open();if(Aa!==null&&(Aa.document.write(Go),Aa.document.title=Dn.filename),Aa||typeof safari>"u")return Aa;break;case"datauri":case"dataurl":return n.document.location.href=this.output("datauristring",Dn);default:return null}}),Nd=function(_n){return Array.isArray(cc)===!0&&cc.indexOf(_n)>-1};switch(ke){case"pt":Vr=1;break;case"mm":Vr=72/25.4;break;case"cm":Vr=72/2.54;break;case"in":Vr=72;break;case"px":Vr=Nd("px_scaling")==1?.75:96/72;break;case"pc":case"em":Vr=12;break;case"ex":Vr=6;break;default:if(typeof ke!="number")throw new Error("Invalid unit: "+ke);Vr=ke}var Ya=null;Ni(),$n();var Mh=function(_n){return en!==null?Ya.encryptor(_n,0):function(Dn){return Dn}},kd=cn.__private__.getPageInfo=cn.getPageInfo=function(_n){if(isNaN(_n)||_n%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:io[_n].objId,pageNumber:_n,pageContext:io[_n]}},mo=cn.__private__.getPageInfoByObjId=function(_n){if(isNaN(_n)||_n%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Dn in io)if(io[Dn].objId===_n)break;return kd(Dn)},Oh=cn.__private__.getCurrentPageInfo=cn.getCurrentPageInfo=function(){return{objId:io[qn].objId,pageNumber:qn,pageContext:io[qn]}};cn.addPage=function(){return Td.apply(this,arguments),this},cn.setPage=function(){return Md.apply(this,arguments),Kn.call(this,tr[qn]),this},cn.insertPage=function(_n){return this.addPage(),this.movePage(qn,_n),this},cn.movePage=function(_n,Dn){var Pi,Fi;if(_n>Dn){Pi=tr[_n],Fi=io[_n];for(var Ki=_n;Ki>Dn;Ki--)tr[Ki]=tr[Ki-1],io[Ki]=io[Ki-1];tr[Dn]=Pi,io[Dn]=Fi,this.setPage(Dn)}else if(_n<Dn){Pi=tr[_n],Fi=io[_n];for(var Br=_n;Br<Dn;Br++)tr[Br]=tr[Br+1],io[Br]=io[Br+1];tr[Dn]=Pi,io[Dn]=Fi,this.setPage(Dn)}return this},cn.deletePage=function(){return wh.apply(this,arguments),this},cn.__private__.text=cn.text=function(_n,Dn,Pi,Fi,Ki){var Br,Gs,Qs,so,vo,yo,Go,Aa,Sa,Oa=(Fi=Fi||{}).scope||this;if(typeof _n=="number"&&typeof Dn=="number"&&(typeof Pi=="string"||Array.isArray(Pi))){var Xa=Pi;Pi=Dn,Dn=_n,_n=Xa}if(arguments[3]instanceof to?(bn("The transform parameter of text() with a Matrix value"),Sa=Ki):(Qs=arguments[4],so=arguments[5],_typeof(Go=arguments[3])==="object"&&Go!==null||(typeof Qs=="string"&&(so=Qs,Qs=null),typeof Go=="string"&&(so=Go,Go=null),typeof Go=="number"&&(Qs=Go,Go=null),Fi={flags:Go,angle:Qs,align:so})),isNaN(Dn)||isNaN(Pi)||_n==null)throw new Error("Invalid arguments passed to jsPDF.text");if(_n.length===0)return Oa;var Fa="",Cc=!1,rc=typeof Fi.lineHeightFactor=="number"?Fi.lineHeightFactor:iu,wc=Oa.internal.scaleFactor;function Wd(na){return na=na.split("	").join(Array(Fi.TabLen||9).join(" ")),Bl(na,Go)}function id(na){for(var ra,Ta=na.concat(),Da=[],Oc=Ta.length;Oc--;)typeof(ra=Ta.shift())=="string"?Da.push(ra):Array.isArray(na)&&(ra.length===1||ra[1]===void 0&&ra[2]===void 0)?Da.push(ra[0]):Da.push([ra[0],ra[1],ra[2]]);return Da}function rd(na,ra){var Ta;if(typeof na=="string")Ta=ra(na)[0];else if(Array.isArray(na)){for(var Da,Oc,hd=na.concat(),ku=[],Jd=hd.length;Jd--;)typeof(Da=hd.shift())=="string"?ku.push(ra(Da)[0]):Array.isArray(Da)&&typeof Da[0]=="string"&&(Oc=ra(Da[0],Da[1],Da[2]),ku.push([Oc[0],Oc[1],Oc[2]]));Ta=ku}return Ta}var wu=!1,sd=!0;if(typeof _n=="string")wu=!0;else if(Array.isArray(_n)){var od=_n.concat();Gs=[];for(var Pu,Ha=od.length;Ha--;)(typeof(Pu=od.shift())!="string"||Array.isArray(Pu)&&typeof Pu[0]!="string")&&(sd=!1);wu=sd}if(wu===!1)throw new Error('Type of text must be string or Array. "'+_n+'" is not recognized.');typeof _n=="string"&&(_n=_n.match(/[\r?\n]/)?_n.split(/\r\n|\r|\n/g):[_n]);var xu=zi/Oa.internal.scaleFactor,Lu=xu*(rc-1);switch(Fi.baseline){case"bottom":Pi-=Lu;break;case"top":Pi+=xu-Lu;break;case"hanging":Pi+=xu-2*Lu;break;case"middle":Pi+=xu/2-Lu}if((yo=Fi.maxWidth||0)>0&&(typeof _n=="string"?_n=Oa.splitTextToSize(_n,yo):Object.prototype.toString.call(_n)==="[object Array]"&&(_n=_n.reduce(function(na,ra){return na.concat(Oa.splitTextToSize(ra,yo))},[]))),Br={text:_n,x:Dn,y:Pi,options:Fi,mutex:{pdfEscape:Bl,activeFontKey:Us,fonts:lo,activeFontSize:zi}},po.publish("preProcessText",Br),_n=Br.text,Qs=(Fi=Br.options).angle,!(Sa instanceof to)&&Qs&&typeof Qs=="number"){Qs*=Math.PI/180,Fi.rotationDirection===0&&(Qs=-Qs),yn===gn.ADVANCED&&(Qs=-Qs);var Tu=Math.cos(Qs),ad=Math.sin(Qs);Sa=new to(Tu,ad,-ad,Tu,0,0)}else Qs&&Qs instanceof to&&(Sa=Qs);yn!==gn.ADVANCED||Sa||(Sa=ya),(vo=Fi.charSpace||Su)!==void 0&&(Fa+=wn(Cn(vo))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Aa=Fi.horizontalScale)!==void 0&&(Fa+=wn(100*Aa)+` Tz
`),Fi.lang;var Vl=-1,zh=Fi.renderingMode!==void 0?Fi.renderingMode:Fi.stroke,ld=Oa.internal.getCurrentPageInfo().pageContext;switch(zh){case 0:case!1:case"fill":Vl=0;break;case 1:case!0:case"stroke":Vl=1;break;case 2:case"fillThenStroke":Vl=2;break;case 3:case"invisible":Vl=3;break;case 4:case"fillAndAddForClipping":Vl=4;break;case 5:case"strokeAndAddPathForClipping":Vl=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Vl=6;break;case 7:case"addToPathForClipping":Vl=7}var Yd=ld.usedRenderingMode!==void 0?ld.usedRenderingMode:-1;Vl!==-1?Fa+=Vl+` Tr
`:Yd!==-1&&(Fa+=`0 Tr
`),Vl!==-1&&(ld.usedRenderingMode=Vl),so=Fi.align||"left";var uc,Ru=zi*rc,Xd=Oa.internal.pageSize.getWidth(),Kd=lo[Us];vo=Fi.charSpace||Su,yo=Fi.maxWidth||0,Go=Object.assign({autoencode:!0,noBOM:!0},Fi.flags);var jc=[],ou=function(na){return Oa.getStringUnitWidth(na,{font:Kd,charSpace:vo,fontSize:zi,doKerning:!1})*zi/wc};if(Object.prototype.toString.call(_n)==="[object Array]"){var Hl;Gs=id(_n),so!=="left"&&(uc=Gs.map(ou));var Ja,Vc=0;if(so==="right"){Dn-=uc[0],_n=[],Ha=Gs.length;for(var Tc=0;Tc<Ha;Tc++)Tc===0?(Ja=Ic(Dn),Hl=Lc(Pi)):(Ja=Cn(Vc-uc[Tc]),Hl=-Ru),_n.push([Gs[Tc],Ja,Hl]),Vc=uc[Tc]}else if(so==="center"){Dn-=uc[0]/2,_n=[],Ha=Gs.length;for(var Rc=0;Rc<Ha;Rc++)Rc===0?(Ja=Ic(Dn),Hl=Lc(Pi)):(Ja=Cn((Vc-uc[Rc])/2),Hl=-Ru),_n.push([Gs[Rc],Ja,Hl]),Vc=uc[Rc]}else if(so==="left"){_n=[],Ha=Gs.length;for(var Mu=0;Mu<Ha;Mu++)_n.push(Gs[Mu])}else if(so==="justify"&&Kd.encoding==="Identity-H"){_n=[],Ha=Gs.length,yo=yo!==0?yo:Xd;for(var Mc=0,xa=0;xa<Ha;xa++)if(Hl=xa===0?Lc(Pi):-Ru,Ja=xa===0?Ic(Dn):Mc,xa<Ha-1){var cd=Cn((yo-uc[xa])/(Gs[xa].split(" ").length-1)),Al=Gs[xa].split(" ");_n.push([Al[0]+" ",Ja,Hl]),Mc=0;for(var dc=1;dc<Al.length;dc++){var Ou=(ou(Al[dc-1]+" "+Al[dc])-ou(Al[dc]))*wc+cd;dc==Al.length-1?_n.push([Al[dc],Ou,0]):_n.push([Al[dc]+" ",Ou,0]),Mc-=Ou}}else _n.push([Gs[xa],Ja,Hl]);_n.push(["",Mc,0])}else{if(so!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(_n=[],Ha=Gs.length,yo=yo!==0?yo:Xd,xa=0;xa<Ha;xa++)Hl=xa===0?Lc(Pi):-Ru,Ja=xa===0?Ic(Dn):0,xa<Ha-1?jc.push(wn(Cn((yo-uc[xa])/(Gs[xa].split(" ").length-1)))):jc.push(0),_n.push([Gs[xa],Ja,Hl])}}var Zd=typeof Fi.R2L=="boolean"?Fi.R2L:Ti;Zd===!0&&(_n=rd(_n,function(na,ra,Ta){return[na.split("").reverse().join(""),ra,Ta]})),Br={text:_n,x:Dn,y:Pi,options:Fi,mutex:{pdfEscape:Bl,activeFontKey:Us,fonts:lo,activeFontSize:zi}},po.publish("postProcessText",Br),_n=Br.text,Cc=Br.mutex.isHex||!1;var ud=lo[Us].encoding;ud!=="WinAnsiEncoding"&&ud!=="StandardEncoding"||(_n=rd(_n,function(na,ra,Ta){return[Wd(na),ra,Ta]})),Gs=id(_n),_n=[];for(var au,lu,zc,cu=0,Nu=1,uu=Array.isArray(Gs[0])?Nu:cu,$c="",dd=function(na,ra,Ta){var Da="";return Ta instanceof to?(Ta=typeof Fi.angle=="number"?ta(Ta,new to(1,0,0,1,na,ra)):ta(new to(1,0,0,1,na,ra),Ta),yn===gn.ADVANCED&&(Ta=ta(new to(1,0,0,-1,0,0),Ta)),Da=Ta.join(" ")+` Tm
`):Da=wn(na)+" "+wn(ra)+` Td
`,Da},hc=0;hc<Gs.length;hc++){switch($c="",uu){case Nu:zc=(Cc?"<":"(")+Gs[hc][0]+(Cc?">":")"),au=parseFloat(Gs[hc][1]),lu=parseFloat(Gs[hc][2]);break;case cu:zc=(Cc?"<":"(")+Gs[hc]+(Cc?">":")"),au=Ic(Dn),lu=Lc(Pi)}jc!==void 0&&jc[hc]!==void 0&&($c=jc[hc]+` Tw
`),hc===0?_n.push($c+dd(au,lu,Sa)+zc):uu===cu?_n.push($c+zc):uu===Nu&&_n.push($c+dd(au,lu,Sa)+zc)}_n=uu===cu?_n.join(` Tj
T* `):_n.join(` Tj
`),_n+=` Tj
`;var fc=`BT
/`;return fc+=Us+" "+zi+` Tf
`,fc+=wn(zi*rc)+` TL
`,fc+=ru+`
`,fc+=Fa,fc+=_n,Fn(fc+="ET"),an[Us]=!0,Oa};var Nh=cn.__private__.clip=cn.clip=function(_n){return Fn(_n==="evenodd"?"W*":"W"),this};cn.clipEvenOdd=function(){return Nh("evenodd")},cn.__private__.discardPath=cn.discardPath=function(){return Fn("n"),this};var bc=cn.__private__.isValidStyle=function(_n){var Dn=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(_n)!==-1&&(Dn=!0),Dn};cn.__private__.setDefaultPathOperation=cn.setDefaultPathOperation=function(_n){return bc(_n)&&(Qe=_n),this};var Dd=cn.__private__.getStyle=cn.getStyle=function(_n){var Dn=Qe;switch(_n){case"D":case"S":Dn="S";break;case"F":Dn="f";break;case"FD":case"DF":Dn="B";break;case"f":case"f*":case"B":case"B*":Dn=_n}return Dn},Gd=cn.close=function(){return Fn("h"),this};cn.stroke=function(){return Fn("S"),this},cn.fill=function(_n){return Au("f",_n),this},cn.fillEvenOdd=function(_n){return Au("f*",_n),this},cn.fillStroke=function(_n){return Au("B",_n),this},cn.fillStrokeEvenOdd=function(_n){return Au("B*",_n),this};var Au=function(_n,Dn){_typeof(Dn)==="object"?Dh(Dn,_n):Fn(_n)},$u=function(_n){_n===null||yn===gn.ADVANCED&&_n===void 0||(_n=Dd(_n),Fn(_n))};function kh(_n,Dn,Pi,Fi,Ki){var Br=new M(Dn||this.boundingBox,Pi||this.xStep,Fi||this.yStep,this.gState,Ki||this.matrix);Br.stream=this.stream;var Gs=_n+"$$"+this.cloneIndex+++"$$";return Qo(Gs,Br),Br}var Dh=function(_n,Dn){var Pi=bo[_n.key],Fi=no[Pi];if(Fi instanceof B)Fn("q"),Fn(Gh(Dn)),Fi.gState&&cn.setGState(Fi.gState),Fn(_n.matrix.toString()+" cm"),Fn("/"+Pi+" sh"),Fn("Q");else if(Fi instanceof M){var Ki=new to(1,0,0,-1,0,Uc());_n.matrix&&(Ki=Ki.multiply(_n.matrix||ya),Pi=kh.call(Fi,_n.key,_n.boundingBox,_n.xStep,_n.yStep,Ki).id),Fn("q"),Fn("/Pattern cs"),Fn("/"+Pi+" scn"),Fi.gState&&cn.setGState(Fi.gState),Fn(Dn),Fn("Q")}},Gh=function(_n){switch(_n){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},qu=cn.moveTo=function(_n,Dn){return Fn(wn(Cn(_n))+" "+wn(Tn(Dn))+" m"),this},nu=cn.lineTo=function(_n,Dn){return Fn(wn(Cn(_n))+" "+wn(Tn(Dn))+" l"),this},Fc=cn.curveTo=function(_n,Dn,Pi,Fi,Ki,Br){return Fn([wn(Cn(_n)),wn(Tn(Dn)),wn(Cn(Pi)),wn(Tn(Fi)),wn(Cn(Ki)),wn(Tn(Br)),"c"].join(" ")),this};cn.__private__.line=cn.line=function(_n,Dn,Pi,Fi,Ki){if(isNaN(_n)||isNaN(Dn)||isNaN(Pi)||isNaN(Fi)||!bc(Ki))throw new Error("Invalid arguments passed to jsPDF.line");return yn===gn.COMPAT?this.lines([[Pi-_n,Fi-Dn]],_n,Dn,[1,1],Ki||"S"):this.lines([[Pi-_n,Fi-Dn]],_n,Dn,[1,1]).stroke()},cn.__private__.lines=cn.lines=function(_n,Dn,Pi,Fi,Ki,Br){var Gs,Qs,so,vo,yo,Go,Aa,Sa,Oa,Xa,Fa,Cc;if(typeof _n=="number"&&(Cc=Pi,Pi=Dn,Dn=_n,_n=Cc),Fi=Fi||[1,1],Br=Br||!1,isNaN(Dn)||isNaN(Pi)||!Array.isArray(_n)||!Array.isArray(Fi)||!bc(Ki)||typeof Br!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(qu(Dn,Pi),Gs=Fi[0],Qs=Fi[1],vo=_n.length,Xa=Dn,Fa=Pi,so=0;so<vo;so++)(yo=_n[so]).length===2?(Xa=yo[0]*Gs+Xa,Fa=yo[1]*Qs+Fa,nu(Xa,Fa)):(Go=yo[0]*Gs+Xa,Aa=yo[1]*Qs+Fa,Sa=yo[2]*Gs+Xa,Oa=yo[3]*Qs+Fa,Xa=yo[4]*Gs+Xa,Fa=yo[5]*Qs+Fa,Fc(Go,Aa,Sa,Oa,Xa,Fa));return Br&&Gd(),$u(Ki),this},cn.path=function(_n){for(var Dn=0;Dn<_n.length;Dn++){var Pi=_n[Dn],Fi=Pi.c;switch(Pi.op){case"m":qu(Fi[0],Fi[1]);break;case"l":nu(Fi[0],Fi[1]);break;case"c":Fc.apply(this,Fi);break;case"h":Gd()}}return this},cn.__private__.rect=cn.rect=function(_n,Dn,Pi,Fi,Ki){if(isNaN(_n)||isNaN(Dn)||isNaN(Pi)||isNaN(Fi)||!bc(Ki))throw new Error("Invalid arguments passed to jsPDF.rect");return yn===gn.COMPAT&&(Fi=-Fi),Fn([wn(Cn(_n)),wn(Tn(Dn)),wn(Cn(Pi)),wn(Cn(Fi)),"re"].join(" ")),$u(Ki),this},cn.__private__.triangle=cn.triangle=function(_n,Dn,Pi,Fi,Ki,Br,Gs){if(isNaN(_n)||isNaN(Dn)||isNaN(Pi)||isNaN(Fi)||isNaN(Ki)||isNaN(Br)||!bc(Gs))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Pi-_n,Fi-Dn],[Ki-Pi,Br-Fi],[_n-Ki,Dn-Br]],_n,Dn,[1,1],Gs,!0),this},cn.__private__.roundedRect=cn.roundedRect=function(_n,Dn,Pi,Fi,Ki,Br,Gs){if(isNaN(_n)||isNaN(Dn)||isNaN(Pi)||isNaN(Fi)||isNaN(Ki)||isNaN(Br)||!bc(Gs))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Qs=4/3*(Math.SQRT2-1);return Ki=Math.min(Ki,.5*Pi),Br=Math.min(Br,.5*Fi),this.lines([[Pi-2*Ki,0],[Ki*Qs,0,Ki,Br-Br*Qs,Ki,Br],[0,Fi-2*Br],[0,Br*Qs,-Ki*Qs,Br,-Ki,Br],[2*Ki-Pi,0],[-Ki*Qs,0,-Ki,-Br*Qs,-Ki,-Br],[0,2*Br-Fi],[0,-Br*Qs,Ki*Qs,-Br,Ki,-Br]],_n+Ki,Dn,[1,1],Gs,!0),this},cn.__private__.ellipse=cn.ellipse=function(_n,Dn,Pi,Fi,Ki){if(isNaN(_n)||isNaN(Dn)||isNaN(Pi)||isNaN(Fi)||!bc(Ki))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Br=4/3*(Math.SQRT2-1)*Pi,Gs=4/3*(Math.SQRT2-1)*Fi;return qu(_n+Pi,Dn),Fc(_n+Pi,Dn-Gs,_n+Br,Dn-Fi,_n,Dn-Fi),Fc(_n-Br,Dn-Fi,_n-Pi,Dn-Gs,_n-Pi,Dn),Fc(_n-Pi,Dn+Gs,_n-Br,Dn+Fi,_n,Dn+Fi),Fc(_n+Br,Dn+Fi,_n+Pi,Dn+Gs,_n+Pi,Dn),$u(Ki),this},cn.__private__.circle=cn.circle=function(_n,Dn,Pi,Fi){if(isNaN(_n)||isNaN(Dn)||isNaN(Pi)||!bc(Fi))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(_n,Dn,Pi,Pi,Fi)},cn.setFont=function(_n,Dn,Pi){return Pi&&(Dn=xn(Dn,Pi)),Us=Od(_n,Dn,{disableWarning:!1}),this};var Fh=cn.__private__.getFont=cn.getFont=function(){return lo[Od.apply(cn,arguments)]};cn.__private__.getFontList=cn.getFontList=function(){var _n,Dn,Pi={};for(_n in Ks)if(Ks.hasOwnProperty(_n))for(Dn in Pi[_n]=[],Ks[_n])Ks[_n].hasOwnProperty(Dn)&&Pi[_n].push(Dn);return Pi},cn.addFont=function(_n,Dn,Pi,Fi,Ki){var Br=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Br.indexOf(arguments[3])!==-1?Ki=arguments[3]:arguments[3]&&Br.indexOf(arguments[3])==-1&&(Pi=xn(Pi,Fi)),Ki=Ki||"Identity-H",Vu.call(this,_n,Dn,Pi,Ki)};var iu,Wu=Oe.lineWidth||.200025,Eu=cn.__private__.getLineWidth=cn.getLineWidth=function(){return Wu},Fd=cn.__private__.setLineWidth=cn.setLineWidth=function(_n){return Wu=_n,Fn(wn(Cn(_n))+" w"),this};cn.__private__.setLineDash=E.API.setLineDash=E.API.setLineDashPattern=function(_n,Dn){if(_n=_n||[],Dn=Dn||0,isNaN(Dn)||!Array.isArray(_n))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return _n=_n.map(function(Pi){return wn(Cn(Pi))}).join(" "),Dn=wn(Cn(Dn)),Fn("["+_n+"] "+Dn+" d"),this};var Ud=cn.__private__.getLineHeight=cn.getLineHeight=function(){return zi*iu};cn.__private__.getLineHeight=cn.getLineHeight=function(){return zi*iu};var jd=cn.__private__.setLineHeightFactor=cn.setLineHeightFactor=function(_n){return typeof(_n=_n||1.15)=="number"&&(iu=_n),this},zd=cn.__private__.getLineHeightFactor=cn.getLineHeightFactor=function(){return iu};jd(Oe.lineHeight);var Ic=cn.__private__.getHorizontalCoordinate=function(_n){return Cn(_n)},Lc=cn.__private__.getVerticalCoordinate=function(_n){return yn===gn.ADVANCED?_n:io[qn].mediaBox.topRightY-io[qn].mediaBox.bottomLeftY-Cn(_n)},Bh=cn.__private__.getHorizontalCoordinateString=cn.getHorizontalCoordinateString=function(_n){return wn(Ic(_n))},Bc=cn.__private__.getVerticalCoordinateString=cn.getVerticalCoordinateString=function(_n){return wn(Lc(_n))},_c=Oe.strokeColor||"0 G";cn.__private__.getStrokeColor=cn.getDrawColor=function(){return ic(_c)},cn.__private__.setStrokeColor=cn.setDrawColor=function(_n,Dn,Pi,Fi){return _c=Rl({ch1:_n,ch2:Dn,ch3:Pi,ch4:Fi,pdfColorType:"draw",precision:2}),Fn(_c),this};var Yu=Oe.fillColor||"0 g";cn.__private__.getFillColor=cn.getFillColor=function(){return ic(Yu)},cn.__private__.setFillColor=cn.setFillColor=function(_n,Dn,Pi,Fi){return Yu=Rl({ch1:_n,ch2:Dn,ch3:Pi,ch4:Fi,pdfColorType:"fill",precision:2}),Fn(Yu),this};var ru=Oe.textColor||"0 g",Uh=cn.__private__.getTextColor=cn.getTextColor=function(){return ic(ru)};cn.__private__.setTextColor=cn.setTextColor=function(_n,Dn,Pi,Fi){return ru=Rl({ch1:_n,ch2:Dn,ch3:Pi,ch4:Fi,pdfColorType:"text",precision:3}),this};var Su=Oe.charSpace,jh=cn.__private__.getCharSpace=cn.getCharSpace=function(){return parseFloat(Su||0)};cn.__private__.setCharSpace=cn.setCharSpace=function(_n){if(isNaN(_n))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Su=_n,this};var Xu=0;cn.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},cn.__private__.setLineCap=cn.setLineCap=function(_n){var Dn=cn.CapJoinStyles[_n];if(Dn===void 0)throw new Error("Line cap style of '"+_n+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xu=Dn,Fn(Dn+" J"),this};var Ku=0;cn.__private__.setLineJoin=cn.setLineJoin=function(_n){var Dn=cn.CapJoinStyles[_n];if(Dn===void 0)throw new Error("Line join style of '"+_n+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ku=Dn,Fn(Dn+" j"),this},cn.__private__.setLineMiterLimit=cn.__private__.setMiterLimit=cn.setLineMiterLimit=cn.setMiterLimit=function(_n){if(_n=_n||0,isNaN(_n))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Fn(wn(Cn(_n))+" M"),this},cn.GState=j,cn.setGState=function(_n){(_n=typeof _n=="string"?co[Ko[_n]]:$d(null,_n)).equals(aa)||(Fn("/"+_n.id+" gs"),aa=_n)};var $d=function(_n,Dn){if(!_n||!Ko[_n]){var Pi=!1;for(var Fi in co)if(co.hasOwnProperty(Fi)&&co[Fi].equals(Dn)){Pi=!0;break}if(Pi)Dn=co[Fi];else{var Ki="GS"+(Object.keys(co).length+1).toString(10);co[Ki]=Dn,Dn.id=Ki}return _n&&(Ko[_n]=Dn.id),po.publish("addGState",Dn),Dn}};cn.addGState=function(_n,Dn){return $d(_n,Dn),this},cn.saveGraphicsState=function(){return Fn("q"),oo.push({key:Us,size:zi,color:ru}),this},cn.restoreGraphicsState=function(){Fn("Q");var _n=oo.pop();return Us=_n.key,zi=_n.size,ru=_n.color,aa=null,this},cn.setCurrentTransformationMatrix=function(_n){return Fn(_n.toString()+" cm"),this},cn.comment=function(_n){return Fn("#"+_n),this};var bu=function(_n,Dn){var Pi=_n||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Pi},set:function(Br){isNaN(Br)||(Pi=parseFloat(Br))}});var Fi=Dn||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Fi},set:function(Br){isNaN(Br)||(Fi=parseFloat(Br))}});var Ki="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ki},set:function(Br){Ki=Br.toString()}}),this},Zu=function(_n,Dn,Pi,Fi){bu.call(this,_n,Dn),this.type="rect";var Ki=Pi||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ki},set:function(Gs){isNaN(Gs)||(Ki=parseFloat(Gs))}});var Br=Fi||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Br},set:function(Gs){isNaN(Gs)||(Br=parseFloat(Gs))}}),this},Ju=function(){this.page=ho,this.currentPage=qn,this.pages=tr.slice(0),this.pagesContext=io.slice(0),this.x=ro,this.y=Js,this.matrix=fo,this.width=su(qn),this.height=Uc(qn),this.outputDestination=Bn,this.id="",this.objectNumber=-1};Ju.prototype.restore=function(){ho=this.page,qn=this.currentPage,io=this.pagesContext,tr=this.pages,ro=this.x,Js=this.y,fo=this.matrix,Qu(qn,this.width),nd(qn,this.height),Bn=this.outputDestination};var qd=function(_n,Dn,Pi,Fi,Ki){uo.push(new Ju),ho=qn=0,tr=[],ro=_n,Js=Dn,fo=Ki,zu([Pi,Fi])},Vh=function(_n){if(Ma[_n])uo.pop().restore();else{var Dn=new Ju,Pi="Xo"+(Object.keys(jo).length+1).toString(10);Dn.id=Pi,Ma[_n]=Pi,jo[Pi]=Dn,po.publish("addFormObject",Dn),uo.pop().restore()}};for(var Iu in cn.beginFormObject=function(_n,Dn,Pi,Fi,Ki){return qd(_n,Dn,Pi,Fi,Ki),this},cn.endFormObject=function(_n){return Vh(_n),this},cn.doFormObject=function(_n,Dn){var Pi=jo[Ma[_n]];return Fn("q"),Fn(Dn.toString()+" cm"),Fn("/"+Pi.id+" Do"),Fn("Q"),this},cn.getFormObject=function(_n){var Dn=jo[Ma[_n]];return{x:Dn.x,y:Dn.y,width:Dn.width,height:Dn.height,matrix:Dn.matrix}},cn.save=function(_n,Dn){return _n=_n||"generated.pdf",(Dn=Dn||{}).returnPromise=Dn.returnPromise||!1,Dn.returnPromise===!1?(l(_u(xc()),_n),typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),this):new Promise(function(Pi,Fi){try{var Ki=l(_u(xc()),_n);typeof l.unload=="function"&&n.setTimeout&&setTimeout(l.unload,911),Pi(Ki)}catch(Br){Fi(Br.message)}})},E.API)E.API.hasOwnProperty(Iu)&&(Iu==="events"&&E.API.events.length?function(_n,Dn){var Pi,Fi,Ki;for(Ki=Dn.length-1;Ki!==-1;Ki--)Pi=Dn[Ki][0],Fi=Dn[Ki][1],_n.subscribe.apply(_n,[Pi].concat(typeof Fi=="function"?[Fi]:Fi))}(po,E.API.events):cn[Iu]=E.API[Iu]);var su=cn.getPageWidth=function(_n){return(io[_n=_n||qn].mediaBox.topRightX-io[_n].mediaBox.bottomLeftX)/Vr},Qu=cn.setPageWidth=function(_n,Dn){io[_n].mediaBox.topRightX=Dn*Vr+io[_n].mediaBox.bottomLeftX},Uc=cn.getPageHeight=function(_n){return(io[_n=_n||qn].mediaBox.topRightY-io[_n].mediaBox.bottomLeftY)/Vr},nd=cn.setPageHeight=function(_n,Dn){io[_n].mediaBox.topRightY=Dn*Vr+io[_n].mediaBox.bottomLeftY};return cn.internal={pdfEscape:Bl,getStyle:Dd,getFont:Fh,getFontSize:Gi,getCharSpace:jh,getTextColor:Uh,getLineHeight:Ud,getLineHeightFactor:zd,getLineWidth:Eu,write:$i,getHorizontalCoordinate:Ic,getVerticalCoordinate:Lc,getCoordinateString:Bh,getVerticalCoordinateString:Bc,collections:{},newObject:go,newAdditionalObject:Pl,newObjectDeferred:Oo,newObjectDeferredBegin:ko,getFilters:Va,putStream:za,events:po,scaleFactor:Vr,pageSize:{getWidth:function(){return su(qn)},setWidth:function(_n){Qu(qn,_n)},getHeight:function(){return Uc(qn)},setHeight:function(_n){nd(qn,_n)}},encryptionOptions:en,encryption:Ya,getEncryptor:Mh,output:Cu,getNumberOfPages:Ph,pages:tr,out:Fn,f2:Pn,f3:En,getPageInfo:kd,getPageInfoByObjId:mo,getCurrentPageInfo:Oh,getPDFVersion:dn,Point:bu,Rectangle:Zu,Matrix:to,hasHotfix:Nd},Object.defineProperty(cn.internal.pageSize,"width",{get:function(){return su(qn)},set:function(_n){Qu(qn,_n)},enumerable:!0,configurable:!0}),Object.defineProperty(cn.internal.pageSize,"height",{get:function(){return Uc(qn)},set:function(_n){nd(qn,_n)},enumerable:!0,configurable:!0}),Ih.call(cn,Di),Us="F1",Td(Ge,t),po.publish("initialized"),cn}I.prototype.lsbFirstWord=function(Oe){return String.fromCharCode(Oe>>0&255,Oe>>8&255,Oe>>16&255,Oe>>24&255)},I.prototype.toHexString=function(Oe){return Oe.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},I.prototype.hexToBytes=function(Oe){for(var e=[],t=0;t<Oe.length;t+=2)e.push(String.fromCharCode(parseInt(Oe.substr(t,2),16)));return e.join("")},I.prototype.processOwnerPassword=function(Oe,e){return P(x(e).substr(0,5),Oe)},I.prototype.encryptor=function(Oe,e){var t=x(this.encryptionKey+String.fromCharCode(255&Oe,Oe>>8&255,Oe>>16&255,255&e,e>>8&255)).substr(0,10);return function(ke){return P(t,ke)}},j.prototype.equals=function(Oe){var e,t="id,objectNumber,equals";if(!Oe||_typeof(Oe)!==_typeof(this))return!1;var ke=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!Oe.hasOwnProperty(e)||this[e]!==Oe[e])return!1;ke++}for(e in Oe)Oe.hasOwnProperty(e)&&t.indexOf(e)<0&&ke--;return ke===0},E.API={events:[]},E.version="2.5.2";var q=E.API,D=1,R=function(Oe){return Oe.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},T=function(Oe){return Oe.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(Oe){return Oe.toFixed(2)},z=function(Oe){return Oe.toFixed(5)};q.__acroform__={};var H=function(Oe,e){Oe.prototype=Object.create(e.prototype),Oe.prototype.constructor=Oe},W=function(Oe){return Oe*D},V=function(Oe){var e=new ut,t=At.internal.getHeight(Oe)||0,ke=At.internal.getWidth(Oe)||0;return e.BBox=[0,0,Number(U(ke)),Number(U(t))],e},G=q.__acroform__.setBit=function(Oe,e){if(Oe=Oe||0,e=e||0,isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return Oe|=1<<e},Y=q.__acroform__.clearBit=function(Oe,e){if(Oe=Oe||0,e=e||0,isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return Oe&=~(1<<e)},J=q.__acroform__.getBit=function(Oe,e){if(isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return Oe&1<<e?1:0},X=q.__acroform__.getBitForPdf=function(Oe,e){if(isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(Oe,e-1)},K=q.__acroform__.setBitForPdf=function(Oe,e){if(isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return G(Oe,e-1)},Z=q.__acroform__.clearBitForPdf=function(Oe,e){if(isNaN(Oe)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(Oe,e-1)},$=q.__acroform__.calculateCoordinates=function(Oe,e){var t=e.internal.getHorizontalCoordinate,ke=e.internal.getVerticalCoordinate,Ge=Oe[0],Be=Oe[1],je=Oe[2],Ve=Oe[3],Ze={};return Ze.lowerLeft_X=t(Ge)||0,Ze.lowerLeft_Y=ke(Be+Ve)||0,Ze.upperRight_X=t(Ge+je)||0,Ze.upperRight_Y=ke(Be)||0,[Number(U(Ze.lowerLeft_X)),Number(U(Ze.lowerLeft_Y)),Number(U(Ze.upperRight_X)),Number(U(Ze.upperRight_Y))]},Q=function(Oe){if(Oe.appearanceStreamContent)return Oe.appearanceStreamContent;if(Oe.V||Oe.DV){var e=[],t=Oe._V||Oe.DV,ke=tt(Oe,t),Ge=Oe.scope.internal.getFont(Oe.fontName,Oe.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(Oe.scope.__private__.encodeColorString(Oe.color)),e.push("/"+Ge+" "+U(ke.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(ke.text),e.push("ET"),e.push("Q"),e.push("EMC");var Be=V(Oe);return Be.scope=Oe.scope,Be.stream=e.join(`
`),Be}},tt=function(Oe,e){var t=Oe.fontSize===0?Oe.maxFontSize:Oe.fontSize,ke={text:"",fontSize:""},Ge=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");Ge=Oe.multiline?Ge.map(function(En){return En.split(`
`)}):Ge.map(function(En){return[En]});var Be=t,je=At.internal.getHeight(Oe)||0;je=je<0?-je:je;var Ve=At.internal.getWidth(Oe)||0;Ve=Ve<0?-Ve:Ve;var Ze=function(En,Cn,Rn){if(En+1<Ge.length){var Tn=Cn+" "+Ge[En+1][0];return et(Tn,Oe,Rn).width<=Ve-4}return!1};Be++;e:for(;Be>0;){e="",Be--;var Qe,en,tn=et("3",Oe,Be).height,an=Oe.multiline?je-Be:(je-tn)/2,cn=an+=2,un=0,dn=0,fn=0;if(Be<=0){e=`(...) Tj
`,e+="% Width of Text: "+et(e,Oe,Be=12).width+", FieldWidth:"+Ve+`
`;break}for(var pn="",gn=0,yn=0;yn<Ge.length;yn++)if(Ge.hasOwnProperty(yn)){var vn=!1;if(Ge[yn].length!==1&&fn!==Ge[yn].length-1){if((tn+2)*(gn+2)+2>je)continue e;pn+=Ge[yn][fn],vn=!0,dn=yn,yn--}else{pn=(pn+=Ge[yn][fn]+" ").substr(pn.length-1)==" "?pn.substr(0,pn.length-1):pn;var An=parseInt(yn),xn=Ze(An,pn,Be),wn=yn>=Ge.length-1;if(xn&&!wn){pn+=" ",fn=0;continue}if(xn||wn){if(wn)dn=An;else if(Oe.multiline&&(tn+2)*(gn+2)+2>je)continue e}else{if(!Oe.multiline||(tn+2)*(gn+2)+2>je)continue e;dn=An}}for(var bn="",Mn=un;Mn<=dn;Mn++){var Pn=Ge[Mn];if(Oe.multiline){if(Mn===dn){bn+=Pn[fn]+" ",fn=(fn+1)%Pn.length;continue}if(Mn===un){bn+=Pn[Pn.length-1]+" ";continue}}bn+=Pn[0]+" "}switch(bn=bn.substr(bn.length-1)==" "?bn.substr(0,bn.length-1):bn,en=et(bn,Oe,Be).width,Oe.textAlign){case"right":Qe=Ve-en-2;break;case"center":Qe=(Ve-en)/2;break;case"left":default:Qe=2}e+=U(Qe)+" "+U(cn)+` Td
`,e+="("+R(bn)+`) Tj
`,e+=-U(Qe)+` 0 Td
`,cn=-(Be+2),en=0,un=vn?dn:dn+1,gn++,pn=""}break}return ke.text=e,ke.fontSize=Be,ke},et=function(Oe,e,t){var ke=e.scope.internal.getFont(e.fontName,e.fontStyle),Ge=e.scope.getStringUnitWidth(Oe,{font:ke,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:ke,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:Ge}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},nt=function(Oe,e){var t={type:"reference",object:Oe};e.internal.getPageInfo(Oe.page).pageContext.annotations.find(function(ke){return ke.type===t.type&&ke.object===t.object})===void 0&&e.internal.getPageInfo(Oe.page).pageContext.annotations.push(t)},it=function(Oe,e){for(var t in Oe)if(Oe.hasOwnProperty(t)){var ke=t,Ge=Oe[t];e.internal.newObjectDeferredBegin(Ge.objId,!0),_typeof(Ge)==="object"&&typeof Ge.putStream=="function"&&Ge.putStream(),delete Oe[ke]}},at=function(Oe,e){if(e.scope=Oe,Oe.internal!==void 0&&(Oe.internal.acroformPlugin===void 0||Oe.internal.acroformPlugin.isInitialized===!1)){if(lt.FieldNum=0,Oe.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),Oe.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");D=Oe.internal.scaleFactor,Oe.internal.acroformPlugin.acroFormDictionaryRoot=new ht,Oe.internal.acroformPlugin.acroFormDictionaryRoot.scope=Oe,Oe.internal.acroformPlugin.acroFormDictionaryRoot._eventID=Oe.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(Oe)}),Oe.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var ke=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var Ge in ke)if(ke.hasOwnProperty(Ge)){var Be=ke[Ge];Be.objId=void 0,Be.hasAnnotation&&nt(Be,t)}})(Oe)}),Oe.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(Oe)}),Oe.internal.events.subscribe("postPutPages",function(t){(function(ke,Ge){var Be=!ke;for(var je in ke||(Ge.internal.newObjectDeferredBegin(Ge.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),Ge.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),ke=ke||Ge.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(ke.hasOwnProperty(je)){var Ve=ke[je],Ze=[],Qe=Ve.Rect;if(Ve.Rect&&(Ve.Rect=$(Ve.Rect,Ge)),Ge.internal.newObjectDeferredBegin(Ve.objId,!0),Ve.DA=At.createDefaultAppearanceStream(Ve),_typeof(Ve)==="object"&&typeof Ve.getKeyValueListForStream=="function"&&(Ze=Ve.getKeyValueListForStream()),Ve.Rect=Qe,Ve.hasAppearanceStream&&!Ve.appearanceStreamContent){var en=Q(Ve);Ze.push({key:"AP",value:"<</N "+en+">>"}),Ge.internal.acroformPlugin.xForms.push(en)}if(Ve.appearanceStreamContent){var tn="";for(var an in Ve.appearanceStreamContent)if(Ve.appearanceStreamContent.hasOwnProperty(an)){var cn=Ve.appearanceStreamContent[an];if(tn+="/"+an+" ",tn+="<<",Object.keys(cn).length>=1||Array.isArray(cn)){for(var je in cn)if(cn.hasOwnProperty(je)){var un=cn[je];typeof un=="function"&&(un=un.call(Ge,Ve)),tn+="/"+je+" "+un+" ",Ge.internal.acroformPlugin.xForms.indexOf(un)>=0||Ge.internal.acroformPlugin.xForms.push(un)}}else typeof(un=cn)=="function"&&(un=un.call(Ge,Ve)),tn+="/"+je+" "+un,Ge.internal.acroformPlugin.xForms.indexOf(un)>=0||Ge.internal.acroformPlugin.xForms.push(un);tn+=">>"}Ze.push({key:"AP",value:`<<
`+tn+">>"})}Ge.internal.putStream({additionalKeyValues:Ze,objectId:Ve.objId}),Ge.internal.out("endobj")}Be&&it(Ge.internal.acroformPlugin.xForms,Ge)})(t,Oe)}),Oe.internal.acroformPlugin.isInitialized=!0}},ot=q.__acroform__.arrayToPdfArray=function(Oe,e,t){var ke=function(je){return je};if(Array.isArray(Oe)){for(var Ge="[",Be=0;Be<Oe.length;Be++)switch(Be!==0&&(Ge+=" "),_typeof(Oe[Be])){case"boolean":case"number":case"object":Ge+=Oe[Be].toString();break;case"string":Oe[Be].substr(0,1)!=="/"?(e!==void 0&&t&&(ke=t.internal.getEncryptor(e)),Ge+="("+R(ke(Oe[Be].toString()))+")"):Ge+=Oe[Be].toString()}return Ge+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},st=function(Oe,e,t){var ke=function(Ge){return Ge};return e!==void 0&&t&&(ke=t.internal.getEncryptor(e)),(Oe=Oe||"").toString(),Oe="("+R(ke(Oe))+")"},ct=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(Oe){this._objId=Oe}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ct.prototype.toString=function(){return this.objId+" 0 R"},ct.prototype.putStream=function(){var Oe=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:Oe,objectId:this.objId}),this.scope.internal.out("endobj")},ct.prototype.getKeyValueListForStream=function(){var Oe=[],e=Object.getOwnPropertyNames(this).filter(function(Be){return Be!="content"&&Be!="appearanceStreamContent"&&Be!="scope"&&Be!="objId"&&Be.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var ke=e[t],Ge=this[ke];Ge&&(Array.isArray(Ge)?Oe.push({key:ke,value:ot(Ge,this.objId,this.scope)}):Ge instanceof ct?(Ge.scope=this.scope,Oe.push({key:ke,value:Ge.objId+" 0 R"})):typeof Ge!="function"&&Oe.push({key:ke,value:Ge}))}return Oe};var ut=function(){ct.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var Oe,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){Oe=t.trim()},get:function(){return Oe||null}})};H(ut,ct);var ht=function(){ct.call(this);var Oe,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(Oe){var t=function(ke){return ke};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+R(t(Oe))+")"}},set:function(t){Oe=t}})};H(ht,ct);var lt=function Oe(){ct.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(pn){if(isNaN(pn))throw new Error('Invalid value "'+pn+'" for attribute F supplied.');e=pn}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!X(e,3)},set:function(pn){pn?this.F=K(e,3):this.F=Z(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(pn){if(isNaN(pn))throw new Error('Invalid value "'+pn+'" for attribute Ff supplied.');t=pn}});var ke=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(ke.length!==0)return ke},set:function(pn){ke=pn!==void 0?pn:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[0])?0:ke[0]},set:function(pn){ke[0]=pn}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[1])?0:ke[1]},set:function(pn){ke[1]=pn}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[2])?0:ke[2]},set:function(pn){ke[2]=pn}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!ke||isNaN(ke[3])?0:ke[3]},set:function(pn){ke[3]=pn}});var Ge="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return Ge},set:function(pn){switch(pn){case"/Btn":case"/Tx":case"/Ch":case"/Sig":Ge=pn;break;default:throw new Error('Invalid value "'+pn+'" for attribute FT supplied.')}}});var Be=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!Be||Be.length<1){if(this instanceof yt)return;Be="FieldObject"+Oe.FieldNum++}var pn=function(gn){return gn};return this.scope&&(pn=this.scope.internal.getEncryptor(this.objId)),"("+R(pn(Be))+")"},set:function(pn){Be=pn.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return Be},set:function(pn){Be=pn}});var je="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return je},set:function(pn){je=pn}});var Ve="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return Ve},set:function(pn){Ve=pn}});var Ze=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return Ze},set:function(pn){Ze=pn}});var Qe=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return Qe===void 0?50/D:Qe},set:function(pn){Qe=pn}});var en="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return en},set:function(pn){en=pn}});var tn="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!tn||this instanceof yt||this instanceof Nt))return st(tn,this.objId,this.scope)},set:function(pn){pn=pn.toString(),tn=pn}});var an=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(an)return this instanceof mt?an:st(an,this.objId,this.scope)},set:function(pn){pn=pn.toString(),an=this instanceof mt?pn:pn.substr(0,1)==="("?T(pn.substr(1,pn.length-2)):T(pn)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(an.substr(1,an.length-1)):an},set:function(pn){pn=pn.toString(),an=this instanceof mt?"/"+pn:pn}});var cn=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(cn)return cn},set:function(pn){this.V=pn}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(cn)return this instanceof mt?cn:st(cn,this.objId,this.scope)},set:function(pn){pn=pn.toString(),cn=this instanceof mt?pn:pn.substr(0,1)==="("?T(pn.substr(1,pn.length-2)):T(pn)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof mt?T(cn.substr(1,cn.length-1)):cn},set:function(pn){pn=pn.toString(),cn=this instanceof mt?"/"+pn:pn}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var un,dn=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return dn},set:function(pn){pn=!!pn,dn=pn}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(un)return un},set:function(pn){un=pn}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,1)},set:function(pn){pn?this.Ff=K(this.Ff,1):this.Ff=Z(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,2)},set:function(pn){pn?this.Ff=K(this.Ff,2):this.Ff=Z(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,3)},set:function(pn){pn?this.Ff=K(this.Ff,3):this.Ff=Z(this.Ff,3)}});var fn=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(fn!==null)return fn},set:function(pn){if([0,1,2].indexOf(pn)===-1)throw new Error('Invalid value "'+pn+'" for attribute Q supplied.');fn=pn}}),Object.defineProperty(this,"textAlign",{get:function(){var pn;switch(fn){case 0:default:pn="left";break;case 1:pn="center";break;case 2:pn="right"}return pn},configurable:!0,enumerable:!0,set:function(pn){switch(pn){case"right":case 2:fn=2;break;case"center":case 1:fn=1;break;case"left":case 0:default:fn=0}}})};H(lt,ct);var ft=function(){lt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var Oe=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return Oe},set:function(t){Oe=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return Oe},set:function(t){Oe=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return ot(e,this.objId,this.scope)},set:function(t){var ke,Ge;Ge=[],typeof(ke=t)=="string"&&(Ge=function(Be,je,Ve){Ve||(Ve=1);for(var Ze,Qe=[];Ze=je.exec(Be);)Qe.push(Ze[Ve]);return Qe}(ke,/\((.*?)\)/g)),e=Ge}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,ke){for(ke=ke||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),ke!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,18)},set:function(t){t?this.Ff=K(this.Ff,18):this.Ff=Z(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=K(this.Ff,19):this.Ff=Z(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,20)},set:function(t){t?(this.Ff=K(this.Ff,20),e.sort()):this.Ff=Z(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,22)},set:function(t){t?this.Ff=K(this.Ff,22):this.Ff=Z(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(t){t?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,27)},set:function(t){t?this.Ff=K(this.Ff,27):this.Ff=Z(this.Ff,27)}}),this.hasAppearanceStream=!1};H(ft,lt);var dt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};H(dt,ft);var pt=function(){dt.call(this),this.combo=!0};H(pt,dt);var gt=function(){pt.call(this),this.edit=!0};H(gt,pt);var mt=function(){lt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,15)},set:function(t){t?this.Ff=K(this.Ff,15):this.Ff=Z(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,16)},set:function(t){t?this.Ff=K(this.Ff,16):this.Ff=Z(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,17)},set:function(t){t?this.Ff=K(this.Ff,17):this.Ff=Z(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(t){t?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Oe,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(Be){return Be};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var ke,Ge=[];for(ke in Ge.push("<<"),e)Ge.push("/"+ke+" ("+R(t(e[ke]))+")");return Ge.push(">>"),Ge.join(`
`)}},set:function(t){_typeof(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return Oe},set:function(t){Oe=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return Oe.substr(1,Oe.length-1)},set:function(t){Oe="/"+t}})};H(mt,lt);var vt=function(){mt.call(this),this.pushButton=!0};H(vt,mt);var bt=function(){mt.call(this),this.radio=!0,this.pushButton=!1;var Oe=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return Oe},set:function(e){Oe=e!==void 0?e:[]}})};H(bt,mt);var yt=function(){var Oe,e;lt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return Oe},set:function(Ge){Oe=Ge}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(Ge){e=Ge}});var t,ke={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var Ge=function(Ve){return Ve};this.scope&&(Ge=this.scope.internal.getEncryptor(this.objId));var Be,je=[];for(Be in je.push("<<"),ke)je.push("/"+Be+" ("+R(Ge(ke[Be]))+")");return je.push(">>"),je.join(`
`)},set:function(Ge){_typeof(Ge)==="object"&&(ke=Ge)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return ke.CA||""},set:function(Ge){typeof Ge=="string"&&(ke.CA=Ge)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(Ge){t=Ge}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(Ge){t="/"+Ge}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=At.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};H(yt,lt),bt.prototype.setAppearance=function(Oe){if(!("createAppearanceStream"in Oe)||!("getCA"in Oe))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=Oe.createAppearanceStream(t.optionName),t.caption=Oe.getCA()}},bt.prototype.createOption=function(Oe){var e=new yt;return e.Parent=this,e.optionName=Oe,this.Kids.push(e),xt.call(this.scope,e),e};var wt=function(){mt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=At.CheckBox.createAppearanceStream()};H(wt,mt);var Nt=function(){lt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,13)},set:function(e){e?this.Ff=K(this.Ff,13):this.Ff=Z(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,21)},set:function(e){e?this.Ff=K(this.Ff,21):this.Ff=Z(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,23)},set:function(e){e?this.Ff=K(this.Ff,23):this.Ff=Z(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,24)},set:function(e){e?this.Ff=K(this.Ff,24):this.Ff=Z(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,25)},set:function(e){e?this.Ff=K(this.Ff,25):this.Ff=Z(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,26)},set:function(e){e?this.Ff=K(this.Ff,26):this.Ff=Z(this.Ff,26)}});var Oe=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return Oe},set:function(e){Oe=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return Oe},set:function(e){Number.isInteger(e)&&(Oe=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};H(Nt,lt);var Lt=function(){Nt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!X(this.Ff,14)},set:function(Oe){Oe?this.Ff=K(this.Ff,14):this.Ff=Z(this.Ff,14)}}),this.password=!0};H(Lt,Nt);var At={CheckBox:{createAppearanceStream:function(){return{N:{On:At.CheckBox.YesNormal},D:{On:At.CheckBox.YesPushDown,Off:At.CheckBox.OffPushDown}}},YesPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var t=[],ke=Oe.scope.internal.getFont(Oe.fontName,Oe.fontStyle).id,Ge=Oe.scope.__private__.encodeColorString(Oe.color),Be=tt(Oe,Oe.caption);return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Oe))+" "+U(At.internal.getHeight(Oe))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+ke+" "+U(Be.fontSize)+" Tf "+Ge),t.push("BT"),t.push(Be.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(Oe){var e=V(Oe);e.scope=Oe.scope;var t=Oe.scope.internal.getFont(Oe.fontName,Oe.fontStyle).id,ke=Oe.scope.__private__.encodeColorString(Oe.color),Ge=[],Be=At.internal.getHeight(Oe),je=At.internal.getWidth(Oe),Ve=tt(Oe,Oe.caption);return Ge.push("1 g"),Ge.push("0 0 "+U(je)+" "+U(Be)+" re"),Ge.push("f"),Ge.push("q"),Ge.push("0 0 1 rg"),Ge.push("0 0 "+U(je-1)+" "+U(Be-1)+" re"),Ge.push("W"),Ge.push("n"),Ge.push("0 g"),Ge.push("BT"),Ge.push("/"+t+" "+U(Ve.fontSize)+" Tf "+ke),Ge.push(Ve.text),Ge.push("ET"),Ge.push("Q"),e.stream=Ge.join(`
`),e},OffPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Oe))+" "+U(At.internal.getHeight(Oe))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(Oe){var e={D:{Off:At.RadioButton.Circle.OffPushDown},N:{}};return e.N[Oe]=At.RadioButton.Circle.YesNormal,e.D[Oe]=At.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(Oe){var e=V(Oe);e.scope=Oe.scope;var t=[],ke=At.internal.getWidth(Oe)<=At.internal.getHeight(Oe)?At.internal.getWidth(Oe)/4:At.internal.getHeight(Oe)/4;ke=Number((.9*ke).toFixed(5));var Ge=At.internal.Bezier_C,Be=Number((ke*Ge).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Oe)/2)+" "+z(At.internal.getHeight(Oe)/2)+" cm"),t.push(ke+" 0 m"),t.push(ke+" "+Be+" "+Be+" "+ke+" 0 "+ke+" c"),t.push("-"+Be+" "+ke+" -"+ke+" "+Be+" -"+ke+" 0 c"),t.push("-"+ke+" -"+Be+" -"+Be+" -"+ke+" 0 -"+ke+" c"),t.push(Be+" -"+ke+" "+ke+" -"+Be+" "+ke+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var t=[],ke=At.internal.getWidth(Oe)<=At.internal.getHeight(Oe)?At.internal.getWidth(Oe)/4:At.internal.getHeight(Oe)/4;ke=Number((.9*ke).toFixed(5));var Ge=Number((2*ke).toFixed(5)),Be=Number((Ge*At.internal.Bezier_C).toFixed(5)),je=Number((ke*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Oe)/2)+" "+z(At.internal.getHeight(Oe)/2)+" cm"),t.push(Ge+" 0 m"),t.push(Ge+" "+Be+" "+Be+" "+Ge+" 0 "+Ge+" c"),t.push("-"+Be+" "+Ge+" -"+Ge+" "+Be+" -"+Ge+" 0 c"),t.push("-"+Ge+" -"+Be+" -"+Be+" -"+Ge+" 0 -"+Ge+" c"),t.push(Be+" -"+Ge+" "+Ge+" -"+Be+" "+Ge+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Oe)/2)+" "+z(At.internal.getHeight(Oe)/2)+" cm"),t.push(ke+" 0 m"),t.push(ke+" "+je+" "+je+" "+ke+" 0 "+ke+" c"),t.push("-"+je+" "+ke+" -"+ke+" "+je+" -"+ke+" 0 c"),t.push("-"+ke+" -"+je+" -"+je+" -"+ke+" 0 -"+ke+" c"),t.push(je+" -"+ke+" "+ke+" -"+je+" "+ke+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var t=[],ke=At.internal.getWidth(Oe)<=At.internal.getHeight(Oe)?At.internal.getWidth(Oe)/4:At.internal.getHeight(Oe)/4;ke=Number((.9*ke).toFixed(5));var Ge=Number((2*ke).toFixed(5)),Be=Number((Ge*At.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+z(At.internal.getWidth(Oe)/2)+" "+z(At.internal.getHeight(Oe)/2)+" cm"),t.push(Ge+" 0 m"),t.push(Ge+" "+Be+" "+Be+" "+Ge+" 0 "+Ge+" c"),t.push("-"+Be+" "+Ge+" -"+Ge+" "+Be+" -"+Ge+" 0 c"),t.push("-"+Ge+" -"+Be+" -"+Be+" -"+Ge+" 0 -"+Ge+" c"),t.push(Be+" -"+Ge+" "+Ge+" -"+Be+" "+Ge+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(Oe){var e={D:{Off:At.RadioButton.Cross.OffPushDown},N:{}};return e.N[Oe]=At.RadioButton.Cross.YesNormal,e.D[Oe]=At.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(Oe){var e=V(Oe);e.scope=Oe.scope;var t=[],ke=At.internal.calculateCross(Oe);return t.push("q"),t.push("1 1 "+U(At.internal.getWidth(Oe)-2)+" "+U(At.internal.getHeight(Oe)-2)+" re"),t.push("W"),t.push("n"),t.push(U(ke.x1.x)+" "+U(ke.x1.y)+" m"),t.push(U(ke.x2.x)+" "+U(ke.x2.y)+" l"),t.push(U(ke.x4.x)+" "+U(ke.x4.y)+" m"),t.push(U(ke.x3.x)+" "+U(ke.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var t=At.internal.calculateCross(Oe),ke=[];return ke.push("0.749023 g"),ke.push("0 0 "+U(At.internal.getWidth(Oe))+" "+U(At.internal.getHeight(Oe))+" re"),ke.push("f"),ke.push("q"),ke.push("1 1 "+U(At.internal.getWidth(Oe)-2)+" "+U(At.internal.getHeight(Oe)-2)+" re"),ke.push("W"),ke.push("n"),ke.push(U(t.x1.x)+" "+U(t.x1.y)+" m"),ke.push(U(t.x2.x)+" "+U(t.x2.y)+" l"),ke.push(U(t.x4.x)+" "+U(t.x4.y)+" m"),ke.push(U(t.x3.x)+" "+U(t.x3.y)+" l"),ke.push("s"),ke.push("Q"),e.stream=ke.join(`
`),e},OffPushDown:function(Oe){var e=V(Oe);e.scope=Oe.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+U(At.internal.getWidth(Oe))+" "+U(At.internal.getHeight(Oe))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(Oe){var e=Oe.scope.internal.getFont(Oe.fontName,Oe.fontStyle).id,t=Oe.scope.__private__.encodeColorString(Oe.color);return"/"+e+" "+Oe.fontSize+" Tf "+t}};At.internal={Bezier_C:.551915024494,calculateCross:function(Oe){var e=At.internal.getWidth(Oe),t=At.internal.getHeight(Oe),ke=Math.min(e,t);return{x1:{x:(e-ke)/2,y:(t-ke)/2+ke},x2:{x:(e-ke)/2+ke,y:(t-ke)/2},x3:{x:(e-ke)/2,y:(t-ke)/2},x4:{x:(e-ke)/2+ke,y:(t-ke)/2+ke}}}},At.internal.getWidth=function(Oe){var e=0;return _typeof(Oe)==="object"&&(e=W(Oe.Rect[2])),e},At.internal.getHeight=function(Oe){var e=0;return _typeof(Oe)==="object"&&(e=W(Oe.Rect[3])),e};var xt=q.addField=function(Oe){if(at(this,Oe),!(Oe instanceof lt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=Oe).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),Oe.page=Oe.scope.internal.getCurrentPageInfo().pageNumber,this};q.AcroFormChoiceField=ft,q.AcroFormListBox=dt,q.AcroFormComboBox=pt,q.AcroFormEditBox=gt,q.AcroFormButton=mt,q.AcroFormPushButton=vt,q.AcroFormRadioButton=bt,q.AcroFormCheckBox=wt,q.AcroFormTextField=Nt,q.AcroFormPasswordField=Lt,q.AcroFormAppearance=At,q.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At},E.AcroForm={ChoiceField:ft,ListBox:dt,ComboBox:pt,EditBox:gt,Button:mt,PushButton:vt,RadioButton:bt,CheckBox:wt,TextField:Nt,PasswordField:Lt,Appearance:At};E.AcroForm;function _t(Oe){return Oe.reduce(function(e,t,ke){return e[t]=ke,e},{})}(function(Oe){Oe.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},ke=Oe.__addimage__.getImageFileTypeByImageData=function(En,Cn){var Rn,Tn,Nn,Gn,zn,$n=e;if((Cn=Cn||e)==="RGBA"||En.data!==void 0&&En.data instanceof Uint8ClampedArray&&"height"in En&&"width"in En)return"RGBA";if(xn(En))for(zn in t)for(Nn=t[zn],Rn=0;Rn<Nn.length;Rn+=1){for(Gn=!0,Tn=0;Tn<Nn[Rn].length;Tn+=1)if(Nn[Rn][Tn]!==void 0&&Nn[Rn][Tn]!==En[Tn]){Gn=!1;break}if(Gn===!0){$n=zn;break}}else for(zn in t)for(Nn=t[zn],Rn=0;Rn<Nn.length;Rn+=1){for(Gn=!0,Tn=0;Tn<Nn[Rn].length;Tn+=1)if(Nn[Rn][Tn]!==void 0&&Nn[Rn][Tn]!==En.charCodeAt(Tn)){Gn=!1;break}if(Gn===!0){$n=zn;break}}return $n===e&&Cn!==e&&($n=Cn),$n},Ge=function En(Cn){for(var Rn=this.internal.write,Tn=this.internal.putStream,Nn=(0,this.internal.getFilters)();Nn.indexOf("FlateEncode")!==-1;)Nn.splice(Nn.indexOf("FlateEncode"),1);Cn.objectId=this.internal.newObject();var Gn=[];if(Gn.push({key:"Type",value:"/XObject"}),Gn.push({key:"Subtype",value:"/Image"}),Gn.push({key:"Width",value:Cn.width}),Gn.push({key:"Height",value:Cn.height}),Cn.colorSpace===fn.INDEXED?Gn.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(Cn.palette.length/3-1)+" "+("sMask"in Cn&&Cn.sMask!==void 0?Cn.objectId+2:Cn.objectId+1)+" 0 R]"}):(Gn.push({key:"ColorSpace",value:"/"+Cn.colorSpace}),Cn.colorSpace===fn.DEVICE_CMYK&&Gn.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Gn.push({key:"BitsPerComponent",value:Cn.bitsPerComponent}),"decodeParameters"in Cn&&Cn.decodeParameters!==void 0&&Gn.push({key:"DecodeParms",value:"<<"+Cn.decodeParameters+">>"}),"transparency"in Cn&&Array.isArray(Cn.transparency)){for(var zn="",$n=0,Qn=Cn.transparency.length;$n<Qn;$n++)zn+=Cn.transparency[$n]+" "+Cn.transparency[$n]+" ";Gn.push({key:"Mask",value:"["+zn+"]"})}Cn.sMask!==void 0&&Gn.push({key:"SMask",value:Cn.objectId+1+" 0 R"});var Hn=Cn.filter!==void 0?["/"+Cn.filter]:void 0;if(Tn({data:Cn.data,additionalKeyValues:Gn,alreadyAppliedFilters:Hn,objectId:Cn.objectId}),Rn("endobj"),"sMask"in Cn&&Cn.sMask!==void 0){var Ni="/Predictor "+Cn.predictor+" /Colors 1 /BitsPerComponent "+Cn.bitsPerComponent+" /Columns "+Cn.width,On={width:Cn.width,height:Cn.height,colorSpace:"DeviceGray",bitsPerComponent:Cn.bitsPerComponent,decodeParameters:Ni,data:Cn.sMask};"filter"in Cn&&(On.filter=Cn.filter),En.call(this,On)}if(Cn.colorSpace===fn.INDEXED){var qn=this.internal.newObject();Tn({data:bn(new Uint8Array(Cn.palette)),objectId:qn}),Rn("endobj")}},Be=function(){var En=this.internal.collections.addImage_images;for(var Cn in En)Ge.call(this,En[Cn])},je=function(){var En,Cn=this.internal.collections.addImage_images,Rn=this.internal.write;for(var Tn in Cn)Rn("/I"+(En=Cn[Tn]).index,En.objectId,"0","R")},Ve=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",Be),this.internal.events.subscribe("putXobjectDict",je))},Ze=function(){var En=this.internal.collections.addImage_images;return Ve.call(this),En},Qe=function(){return Object.keys(this.internal.collections.addImage_images).length},en=function(En){return typeof Oe["process"+En.toUpperCase()]=="function"},tn=function(En){return _typeof(En)==="object"&&En.nodeType===1},an=function(En,Cn){if(En.nodeName==="IMG"&&En.hasAttribute("src")){var Rn=""+En.getAttribute("src");if(Rn.indexOf("data:image/")===0)return u(unescape(Rn).split("base64,").pop());var Tn=Oe.loadFile(Rn,!0);if(Tn!==void 0)return Tn}if(En.nodeName==="CANVAS"){if(En.width===0||En.height===0)throw new Error("Given canvas must have data. Canvas width: "+En.width+", height: "+En.height);var Nn;switch(Cn){case"PNG":Nn="image/png";break;case"WEBP":Nn="image/webp";break;case"JPEG":case"JPG":default:Nn="image/jpeg"}return u(En.toDataURL(Nn,1).split("base64,").pop())}},cn=function(En){var Cn=this.internal.collections.addImage_images;if(Cn){for(var Rn in Cn)if(En===Cn[Rn].alias)return Cn[Rn]}},un=function(En,Cn,Rn){return En||Cn||(En=-96,Cn=-96),En<0&&(En=-1*Rn.width*72/En/this.internal.scaleFactor),Cn<0&&(Cn=-1*Rn.height*72/Cn/this.internal.scaleFactor),En===0&&(En=Cn*Rn.width/Rn.height),Cn===0&&(Cn=En*Rn.height/Rn.width),[En,Cn]},dn=function(En,Cn,Rn,Tn,Nn,Gn){var zn=un.call(this,Rn,Tn,Nn),$n=this.internal.getCoordinateString,Qn=this.internal.getVerticalCoordinateString,Hn=Ze.call(this);if(Rn=zn[0],Tn=zn[1],Hn[Nn.index]=Nn,Gn){Gn*=Math.PI/180;var Ni=Math.cos(Gn),On=Math.sin(Gn),qn=function(Ci){return Ci.toFixed(4)},Un=[qn(Ni),qn(On),qn(-1*On),qn(Ni),0,0,"cm"]}this.internal.write("q"),Gn?(this.internal.write([1,"0","0",1,$n(En),Qn(Cn+Tn),"cm"].join(" ")),this.internal.write(Un.join(" ")),this.internal.write([$n(Rn),"0","0",$n(Tn),"0","0","cm"].join(" "))):this.internal.write([$n(Rn),"0","0",$n(Tn),$n(En),Qn(Cn+Tn),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Nn.index+" Do"),this.internal.write("Q")},fn=Oe.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};Oe.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var pn=Oe.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},gn=Oe.__addimage__.sHashCode=function(En){var Cn,Rn,Tn=0;if(typeof En=="string")for(Rn=En.length,Cn=0;Cn<Rn;Cn++)Tn=(Tn<<5)-Tn+En.charCodeAt(Cn),Tn|=0;else if(xn(En))for(Rn=En.byteLength/2,Cn=0;Cn<Rn;Cn++)Tn=(Tn<<5)-Tn+En[Cn],Tn|=0;return Tn},yn=Oe.__addimage__.validateStringAsBase64=function(En){(En=En||"").toString().trim();var Cn=!0;return En.length===0&&(Cn=!1),En.length%4!=0&&(Cn=!1),/^[A-Za-z0-9+/]+$/.test(En.substr(0,En.length-2))===!1&&(Cn=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(En.substr(-2))===!1&&(Cn=!1),Cn},vn=Oe.__addimage__.extractImageFromDataUrl=function(En){var Cn=(En=En||"").split("base64,"),Rn=null;if(Cn.length===2){var Tn=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(Cn[0]);Array.isArray(Tn)&&(Rn={mimeType:Tn[1],charset:Tn[2],data:Cn[1]})}return Rn},An=Oe.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};Oe.__addimage__.isArrayBuffer=function(En){return An()&&En instanceof ArrayBuffer};var xn=Oe.__addimage__.isArrayBufferView=function(En){return An()&&typeof Uint32Array<"u"&&(En instanceof Int8Array||En instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&En instanceof Uint8ClampedArray||En instanceof Int16Array||En instanceof Uint16Array||En instanceof Int32Array||En instanceof Uint32Array||En instanceof Float32Array||En instanceof Float64Array)},wn=Oe.__addimage__.binaryStringToUint8Array=function(En){for(var Cn=En.length,Rn=new Uint8Array(Cn),Tn=0;Tn<Cn;Tn++)Rn[Tn]=En.charCodeAt(Tn);return Rn},bn=Oe.__addimage__.arrayBufferToBinaryString=function(En){for(var Cn="",Rn=xn(En)?En:new Uint8Array(En),Tn=0;Tn<Rn.length;Tn+=8192)Cn+=String.fromCharCode.apply(null,Rn.subarray(Tn,Tn+8192));return Cn};Oe.addImage=function(){var En,Cn,Rn,Tn,Nn,Gn,zn,$n,Qn;if(typeof arguments[1]=="number"?(Cn=e,Rn=arguments[1],Tn=arguments[2],Nn=arguments[3],Gn=arguments[4],zn=arguments[5],$n=arguments[6],Qn=arguments[7]):(Cn=arguments[1],Rn=arguments[2],Tn=arguments[3],Nn=arguments[4],Gn=arguments[5],zn=arguments[6],$n=arguments[7],Qn=arguments[8]),_typeof(En=arguments[0])==="object"&&!tn(En)&&"imageData"in En){var Hn=En;En=Hn.imageData,Cn=Hn.format||Cn||e,Rn=Hn.x||Rn||0,Tn=Hn.y||Tn||0,Nn=Hn.w||Hn.width||Nn,Gn=Hn.h||Hn.height||Gn,zn=Hn.alias||zn,$n=Hn.compression||$n,Qn=Hn.rotation||Hn.angle||Qn}var Ni=this.internal.getFilters();if($n===void 0&&Ni.indexOf("FlateEncode")!==-1&&($n="SLOW"),isNaN(Rn)||isNaN(Tn))throw new Error("Invalid coordinates passed to jsPDF.addImage");Ve.call(this);var On=Mn.call(this,En,Cn,zn,$n);return dn.call(this,Rn,Tn,Nn,Gn,On,Qn),this};var Mn=function(En,Cn,Rn,Tn){var Nn,Gn,zn;if(typeof En=="string"&&ke(En)===e){En=unescape(En);var $n=Pn(En,!1);($n!==""||($n=Oe.loadFile(En,!0))!==void 0)&&(En=$n)}if(tn(En)&&(En=an(En,Cn)),Cn=ke(En,Cn),!en(Cn))throw new Error("addImage does not support files of type '"+Cn+"', please ensure that a plugin for '"+Cn+"' support is added.");if(((zn=Rn)==null||zn.length===0)&&(Rn=function(Qn){return typeof Qn=="string"||xn(Qn)?gn(Qn):xn(Qn.data)?gn(Qn.data):null}(En)),(Nn=cn.call(this,Rn))||(An()&&(En instanceof Uint8Array||Cn==="RGBA"||(Gn=En,En=wn(En))),Nn=this["process"+Cn.toUpperCase()](En,Qe.call(this),Rn,function(Qn){return Qn&&typeof Qn=="string"&&(Qn=Qn.toUpperCase()),Qn in Oe.image_compression?Qn:pn.NONE}(Tn),Gn)),!Nn)throw new Error("An unknown error occurred whilst processing the image.");return Nn},Pn=Oe.__addimage__.convertBase64ToBinaryString=function(En,Cn){var Rn;Cn=typeof Cn!="boolean"||Cn;var Tn,Nn="";if(typeof En=="string"){Tn=(Rn=vn(En))!==null?Rn.data:En;try{Nn=u(Tn)}catch(Gn){if(Cn)throw yn(Tn)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Gn.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Nn};Oe.getImageProperties=function(En){var Cn,Rn,Tn="";if(tn(En)&&(En=an(En)),typeof En=="string"&&ke(En)===e&&((Tn=Pn(En,!1))===""&&(Tn=Oe.loadFile(En)||""),En=Tn),Rn=ke(En),!en(Rn))throw new Error("addImage does not support files of type '"+Rn+"', please ensure that a plugin for '"+Rn+"' support is added.");if(!An()||En instanceof Uint8Array||(En=wn(En)),!(Cn=this["process"+Rn.toUpperCase()](En)))throw new Error("An unknown error occurred whilst processing the image");return Cn.fileType=Rn,Cn}})(E.API),function(Oe){var e=function(t){if(t!==void 0&&t!="")return!0};E.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),Oe.events.push(["putPage",function(t){for(var ke,Ge,Be,je=this.internal.getCoordinateString,Ve=this.internal.getVerticalCoordinateString,Ze=this.internal.getPageInfoByObjId(t.objId),Qe=t.pageContext.annotations,en=!1,tn=0;tn<Qe.length&&!en;tn++)switch((ke=Qe[tn]).type){case"link":(e(ke.options.url)||e(ke.options.pageNumber))&&(en=!0);break;case"reference":case"text":case"freetext":en=!0}if(en!=0){this.internal.write("/Annots [");for(var an=0;an<Qe.length;an++){ke=Qe[an];var cn=this.internal.pdfEscape,un=this.internal.getEncryptor(t.objId);switch(ke.type){case"reference":this.internal.write(" "+ke.object.objId+" 0 R ");break;case"text":var dn=this.internal.newAdditionalObject(),fn=this.internal.newAdditionalObject(),pn=this.internal.getEncryptor(dn.objId),gn=ke.title||"Note";Be="<</Type /Annot /Subtype /Text "+(Ge="/Rect ["+je(ke.bounds.x)+" "+Ve(ke.bounds.y+ke.bounds.h)+" "+je(ke.bounds.x+ke.bounds.w)+" "+Ve(ke.bounds.y)+"] ")+"/Contents ("+cn(pn(ke.contents))+")",Be+=" /Popup "+fn.objId+" 0 R",Be+=" /P "+Ze.objId+" 0 R",Be+=" /T ("+cn(pn(gn))+") >>",dn.content=Be;var yn=dn.objId+" 0 R";Be="<</Type /Annot /Subtype /Popup "+(Ge="/Rect ["+je(ke.bounds.x+30)+" "+Ve(ke.bounds.y+ke.bounds.h)+" "+je(ke.bounds.x+ke.bounds.w+30)+" "+Ve(ke.bounds.y)+"] ")+" /Parent "+yn,ke.open&&(Be+=" /Open true"),Be+=" >>",fn.content=Be,this.internal.write(dn.objId,"0 R",fn.objId,"0 R");break;case"freetext":Ge="/Rect ["+je(ke.bounds.x)+" "+Ve(ke.bounds.y)+" "+je(ke.bounds.x+ke.bounds.w)+" "+Ve(ke.bounds.y+ke.bounds.h)+"] ";var vn=ke.color||"#000000";Be="<</Type /Annot /Subtype /FreeText "+Ge+"/Contents ("+cn(un(ke.contents))+")",Be+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+vn+")",Be+=" /Border [0 0 0]",Be+=" >>",this.internal.write(Be);break;case"link":if(ke.options.name){var An=this.annotations._nameMap[ke.options.name];ke.options.pageNumber=An.page,ke.options.top=An.y}else ke.options.top||(ke.options.top=0);if(Ge="/Rect ["+ke.finalBounds.x+" "+ke.finalBounds.y+" "+ke.finalBounds.w+" "+ke.finalBounds.h+"] ",Be="",ke.options.url)Be="<</Type /Annot /Subtype /Link "+Ge+"/Border [0 0 0] /A <</S /URI /URI ("+cn(un(ke.options.url))+") >>";else if(ke.options.pageNumber)switch(Be="<</Type /Annot /Subtype /Link "+Ge+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(ke.options.pageNumber).objId+" 0 R",ke.options.magFactor=ke.options.magFactor||"XYZ",ke.options.magFactor){case"Fit":Be+=" /Fit]";break;case"FitH":Be+=" /FitH "+ke.options.top+"]";break;case"FitV":ke.options.left=ke.options.left||0,Be+=" /FitV "+ke.options.left+"]";break;case"XYZ":default:var xn=Ve(ke.options.top);ke.options.left=ke.options.left||0,ke.options.zoom===void 0&&(ke.options.zoom=0),Be+=" /XYZ "+ke.options.left+" "+xn+" "+ke.options.zoom+"]"}Be!=""&&(Be+=" >>",this.internal.write(Be))}}this.internal.write("]")}}]),Oe.createAnnotation=function(t){var ke=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":ke.pageContext.annotations.push(t)}},Oe.link=function(t,ke,Ge,Be,je){var Ve=this.internal.getCurrentPageInfo(),Ze=this.internal.getCoordinateString,Qe=this.internal.getVerticalCoordinateString;Ve.pageContext.annotations.push({finalBounds:{x:Ze(t),y:Qe(ke),w:Ze(t+Ge),h:Qe(ke+Be)},options:je,type:"link"})},Oe.textWithLink=function(t,ke,Ge,Be){var je,Ve,Ze=this.getTextWidth(t),Qe=this.internal.getLineHeight()/this.internal.scaleFactor;if(Be.maxWidth!==void 0){Ve=Be.maxWidth;var en=this.splitTextToSize(t,Ve).length;je=Math.ceil(Qe*en)}else Ve=Ze,je=Qe;return this.text(t,ke,Ge,Be),Ge+=.2*Qe,Be.align==="center"&&(ke-=Ze/2),Be.align==="right"&&(ke-=Ze),this.link(ke,Ge-Qe,Ve,je,Be),Ze},Oe.getTextWidth=function(t){var ke=this.internal.getFontSize();return this.getStringUnitWidth(t)*ke/this.internal.scaleFactor}}(E.API),function(Oe){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},ke={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},Ge=[1570,1571,1573,1575];Oe.__arabicParser__={};var Be=Oe.__arabicParser__.isInArabicSubstitutionA=function(dn){return e[dn.charCodeAt(0)]!==void 0},je=Oe.__arabicParser__.isArabicLetter=function(dn){return typeof dn=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(dn)},Ve=Oe.__arabicParser__.isArabicEndLetter=function(dn){return je(dn)&&Be(dn)&&e[dn.charCodeAt(0)].length<=2},Ze=Oe.__arabicParser__.isArabicAlfLetter=function(dn){return je(dn)&&Ge.indexOf(dn.charCodeAt(0))>=0};Oe.__arabicParser__.arabicLetterHasIsolatedForm=function(dn){return je(dn)&&Be(dn)&&e[dn.charCodeAt(0)].length>=1};var Qe=Oe.__arabicParser__.arabicLetterHasFinalForm=function(dn){return je(dn)&&Be(dn)&&e[dn.charCodeAt(0)].length>=2};Oe.__arabicParser__.arabicLetterHasInitialForm=function(dn){return je(dn)&&Be(dn)&&e[dn.charCodeAt(0)].length>=3};var en=Oe.__arabicParser__.arabicLetterHasMedialForm=function(dn){return je(dn)&&Be(dn)&&e[dn.charCodeAt(0)].length==4},tn=Oe.__arabicParser__.resolveLigatures=function(dn){var fn=0,pn=t,gn="",yn=0;for(fn=0;fn<dn.length;fn+=1)pn[dn.charCodeAt(fn)]!==void 0?(yn++,typeof(pn=pn[dn.charCodeAt(fn)])=="number"&&(gn+=String.fromCharCode(pn),pn=t,yn=0),fn===dn.length-1&&(pn=t,gn+=dn.charAt(fn-(yn-1)),fn-=yn-1,yn=0)):(pn=t,gn+=dn.charAt(fn-yn),fn-=yn,yn=0);return gn};Oe.__arabicParser__.isArabicDiacritic=function(dn){return dn!==void 0&&ke[dn.charCodeAt(0)]!==void 0};var an=Oe.__arabicParser__.getCorrectForm=function(dn,fn,pn){return je(dn)?Be(dn)===!1?-1:!Qe(dn)||!je(fn)&&!je(pn)||!je(pn)&&Ve(fn)||Ve(dn)&&!je(fn)||Ve(dn)&&Ze(fn)||Ve(dn)&&Ve(fn)?0:en(dn)&&je(fn)&&!Ve(fn)&&je(pn)&&Qe(pn)?3:Ve(dn)||!je(pn)?1:2:-1},cn=function(dn){var fn=0,pn=0,gn=0,yn="",vn="",An="",xn=(dn=dn||"").split("\\s+"),wn=[];for(fn=0;fn<xn.length;fn+=1){for(wn.push(""),pn=0;pn<xn[fn].length;pn+=1)yn=xn[fn][pn],vn=xn[fn][pn-1],An=xn[fn][pn+1],je(yn)?(gn=an(yn,vn,An),wn[fn]+=gn!==-1?String.fromCharCode(e[yn.charCodeAt(0)][gn]):yn):wn[fn]+=yn;wn[fn]=tn(wn[fn])}return wn.join(" ")},un=Oe.__arabicParser__.processArabic=Oe.processArabic=function(){var dn,fn=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,pn=[];if(Array.isArray(fn)){var gn=0;for(pn=[],gn=0;gn<fn.length;gn+=1)Array.isArray(fn[gn])?pn.push([cn(fn[gn][0]),fn[gn][1],fn[gn][2]]):pn.push([cn(fn[gn])]);dn=pn}else dn=cn(fn);return typeof arguments[0]=="string"?dn:(arguments[0].text=dn,arguments[0])};Oe.events.push(["preProcessText",un])}(E.API),E.API.autoPrint=function(Oe){var e;switch((Oe=Oe||{}).variant=Oe.variant||"non-conform",Oe.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(Oe){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(Ve){t=Ve}});var ke=150;Object.defineProperty(this,"width",{get:function(){return ke},set:function(Ve){ke=isNaN(Ve)||Number.isInteger(Ve)===!1||Ve<0?150:Ve,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=ke+1)}});var Ge=300;Object.defineProperty(this,"height",{get:function(){return Ge},set:function(Ve){Ge=isNaN(Ve)||Number.isInteger(Ve)===!1||Ve<0?300:Ve,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=Ge+1)}});var Be=[];Object.defineProperty(this,"childNodes",{get:function(){return Be},set:function(Ve){Be=Ve}});var je={};Object.defineProperty(this,"style",{get:function(){return je},set:function(Ve){je=Ve}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,ke){var Ge;if((t=t||"2d")!=="2d")return null;for(Ge in ke)this.pdf.context2d.hasOwnProperty(Ge)&&(this.pdf.context2d[Ge]=ke[Ge]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},Oe.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(E.API),function(Oe){var e={left:0,top:0,bottom:0,right:0},t=!1,ke=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),Ge.call(this))},Ge=function(){this.internal.__cell__.lastCell=new Be,this.internal.__cell__.pages=1},Be=function(){var Ze=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ze},set:function(dn){Ze=dn}});var Qe=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Qe},set:function(dn){Qe=dn}});var en=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return en},set:function(dn){en=dn}});var tn=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return tn},set:function(dn){tn=dn}});var an=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return an},set:function(dn){an=dn}});var cn=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return cn},set:function(dn){cn=dn}});var un=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return un},set:function(dn){un=dn}}),this};Be.prototype.clone=function(){return new Be(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},Be.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},Oe.setHeaderFunction=function(Ze){return ke.call(this),this.internal.__cell__.headerFunction=typeof Ze=="function"?Ze:void 0,this},Oe.getTextDimensions=function(Ze,Qe){ke.call(this);var en=(Qe=Qe||{}).fontSize||this.getFontSize(),tn=Qe.font||this.getFont(),an=Qe.scaleFactor||this.internal.scaleFactor,cn=0,un=0,dn=0,fn=this;if(!Array.isArray(Ze)&&typeof Ze!="string"){if(typeof Ze!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");Ze=String(Ze)}var pn=Qe.maxWidth;pn>0?typeof Ze=="string"?Ze=this.splitTextToSize(Ze,pn):Object.prototype.toString.call(Ze)==="[object Array]"&&(Ze=Ze.reduce(function(yn,vn){return yn.concat(fn.splitTextToSize(vn,pn))},[])):Ze=Array.isArray(Ze)?Ze:[Ze];for(var gn=0;gn<Ze.length;gn++)cn<(dn=this.getStringUnitWidth(Ze[gn],{font:tn})*en)&&(cn=dn);return cn!==0&&(un=Ze.length),{w:cn/=an,h:Math.max((un*en*this.getLineHeightFactor()-en*(this.getLineHeightFactor()-1))/an,0)}},Oe.cellAddPage=function(){ke.call(this),this.addPage();var Ze=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new Be(Ze.left,Ze.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var je=Oe.cell=function(){var Ze;Ze=arguments[0]instanceof Be?arguments[0]:new Be(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),ke.call(this);var Qe=this.internal.__cell__.lastCell,en=this.internal.__cell__.padding,tn=this.internal.__cell__.margins||e,an=this.internal.__cell__.tableHeaderRow,cn=this.internal.__cell__.printHeaders;return Qe.lineNumber!==void 0&&(Qe.lineNumber===Ze.lineNumber?(Ze.x=(Qe.x||0)+(Qe.width||0),Ze.y=Qe.y||0):Qe.y+Qe.height+Ze.height+tn.bottom>this.getPageHeight()?(this.cellAddPage(),Ze.y=tn.top,cn&&an&&(this.printHeaderRow(Ze.lineNumber,!0),Ze.y+=an[0].height)):Ze.y=Qe.y+Qe.height||Ze.y),Ze.text[0]!==void 0&&(this.rect(Ze.x,Ze.y,Ze.width,Ze.height,t===!0?"FD":void 0),Ze.align==="right"?this.text(Ze.text,Ze.x+Ze.width-en,Ze.y+en,{align:"right",baseline:"top"}):Ze.align==="center"?this.text(Ze.text,Ze.x+Ze.width/2,Ze.y+en,{align:"center",baseline:"top",maxWidth:Ze.width-en-en}):this.text(Ze.text,Ze.x+en,Ze.y+en,{align:"left",baseline:"top",maxWidth:Ze.width-en-en})),this.internal.__cell__.lastCell=Ze,this};Oe.table=function(Ze,Qe,en,tn,an){if(ke.call(this),!en)throw new Error("No data for PDF table.");var cn,un,dn,fn,pn=[],gn=[],yn=[],vn={},An={},xn=[],wn=[],bn=(an=an||{}).autoSize||!1,Mn=an.printHeaders!==!1,Pn=an.css&&an.css["font-size"]!==void 0?16*an.css["font-size"]:an.fontSize||12,En=an.margins||Object.assign({width:this.getPageWidth()},e),Cn=typeof an.padding=="number"?an.padding:3,Rn=an.headerBackgroundColor||"#c8c8c8",Tn=an.headerTextColor||"#000";if(Ge.call(this),this.internal.__cell__.printHeaders=Mn,this.internal.__cell__.margins=En,this.internal.__cell__.table_font_size=Pn,this.internal.__cell__.padding=Cn,this.internal.__cell__.headerBackgroundColor=Rn,this.internal.__cell__.headerTextColor=Tn,this.setFontSize(Pn),tn==null)gn=pn=Object.keys(en[0]),yn=pn.map(function(){return"left"});else if(Array.isArray(tn)&&_typeof(tn[0])==="object")for(pn=tn.map(function(Hn){return Hn.name}),gn=tn.map(function(Hn){return Hn.prompt||Hn.name||""}),yn=tn.map(function(Hn){return Hn.align||"left"}),cn=0;cn<tn.length;cn+=1)An[tn[cn].name]=tn[cn].width*(19.049976/25.4);else Array.isArray(tn)&&typeof tn[0]=="string"&&(gn=pn=tn,yn=pn.map(function(){return"left"}));if(bn||Array.isArray(tn)&&typeof tn[0]=="string")for(cn=0;cn<pn.length;cn+=1){for(vn[fn=pn[cn]]=en.map(function(Hn){return Hn[fn]}),this.setFont(void 0,"bold"),xn.push(this.getTextDimensions(gn[cn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),un=vn[fn],this.setFont(void 0,"normal"),dn=0;dn<un.length;dn+=1)xn.push(this.getTextDimensions(un[dn],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);An[fn]=Math.max.apply(null,xn)+Cn+Cn,xn=[]}if(Mn){var Nn={};for(cn=0;cn<pn.length;cn+=1)Nn[pn[cn]]={},Nn[pn[cn]].text=gn[cn],Nn[pn[cn]].align=yn[cn];var Gn=Ve.call(this,Nn,An);wn=pn.map(function(Hn){return new Be(Ze,Qe,An[Hn],Gn,Nn[Hn].text,void 0,Nn[Hn].align)}),this.setTableHeaderRow(wn),this.printHeaderRow(1,!1)}var zn=tn.reduce(function(Hn,Ni){return Hn[Ni.name]=Ni.align,Hn},{});for(cn=0;cn<en.length;cn+=1){"rowStart"in an&&an.rowStart instanceof Function&&an.rowStart({row:cn,data:en[cn]},this);var $n=Ve.call(this,en[cn],An);for(dn=0;dn<pn.length;dn+=1){var Qn=en[cn][pn[dn]];"cellStart"in an&&an.cellStart instanceof Function&&an.cellStart({row:cn,col:dn,data:Qn},this),je.call(this,new Be(Ze,Qe,An[pn[dn]],$n,Qn,cn+2,zn[pn[dn]]))}}return this.internal.__cell__.table_x=Ze,this.internal.__cell__.table_y=Qe,this};var Ve=function(Ze,Qe){var en=this.internal.__cell__.padding,tn=this.internal.__cell__.table_font_size,an=this.internal.scaleFactor;return Object.keys(Ze).map(function(cn){var un=Ze[cn];return this.splitTextToSize(un.hasOwnProperty("text")?un.text:un,Qe[cn]-en-en)},this).map(function(cn){return this.getLineHeightFactor()*cn.length*tn/an+en+en},this).reduce(function(cn,un){return Math.max(cn,un)},0)};Oe.setTableHeaderRow=function(Ze){ke.call(this),this.internal.__cell__.tableHeaderRow=Ze},Oe.printHeaderRow=function(Ze,Qe){if(ke.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var en;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var tn=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new Be(tn[0],tn[1],tn[2],tn[3],void 0,-1)}this.setFont(void 0,"bold");for(var an=[],cn=0;cn<this.internal.__cell__.tableHeaderRow.length;cn+=1){en=this.internal.__cell__.tableHeaderRow[cn].clone(),Qe&&(en.y=this.internal.__cell__.margins.top||0,an.push(en)),en.lineNumber=Ze;var un=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),je.call(this,en),this.setTextColor(un)}an.length>0&&this.setTableHeaderRow(an),this.setFont(void 0,"normal"),t=!1}}(E.API);var Pt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},kt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],It=_t(kt),Ft=[100,200,300,400,500,600,700,800,900],Ct=_t(Ft);function jt(Oe){var e=Oe.family.replace(/"|'/g,"").toLowerCase(),t=function(Be){return Pt[Be=Be||"normal"]?Be:"normal"}(Oe.style),ke=function(Be){if(!Be)return 400;if(typeof Be=="number")return Be>=100&&Be<=900&&Be%100==0?Be:400;if(/^\d00$/.test(Be))return parseInt(Be);switch(Be){case"bold":return 700;case"normal":default:return 400}}(Oe.weight),Ge=function(Be){return typeof It[Be=Be||"normal"]=="number"?Be:"normal"}(Oe.stretch);return{family:e,style:t,weight:ke,stretch:Ge,src:Oe.src||[],ref:Oe.ref||{name:e,style:[Ge,t,ke].join(" ")}}}function Ot(Oe,e,t,ke){var Ge;for(Ge=t;Ge>=0&&Ge<e.length;Ge+=ke)if(Oe[e[Ge]])return Oe[e[Ge]];for(Ge=t;Ge>=0&&Ge<e.length;Ge-=ke)if(Oe[e[Ge]])return Oe[e[Ge]]}var Bt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Mt={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Et(Oe){return[Oe.stretch,Oe.style,Oe.weight,Oe.family].join(" ")}function qt(Oe,e,t){for(var ke=(t=t||{}).defaultFontFamily||"times",Ge=Object.assign({},Bt,t.genericFontFamilies||{}),Be=null,je=null,Ve=0;Ve<e.length;++Ve)if(Ge[(Be=jt(e[Ve])).family]&&(Be.family=Ge[Be.family]),Oe.hasOwnProperty(Be.family)){je=Oe[Be.family];break}if(!(je=je||Oe[ke]))throw new Error("Could not find a font-family for the rule '"+Et(Be)+"' and default family '"+ke+"'.");if(je=function(Ze,Qe){if(Qe[Ze])return Qe[Ze];var en=It[Ze],tn=en<=It.normal?-1:1,an=Ot(Qe,kt,en,tn);if(!an)throw new Error("Could not find a matching font-stretch value for "+Ze);return an}(Be.stretch,je),je=function(Ze,Qe){if(Qe[Ze])return Qe[Ze];for(var en=Pt[Ze],tn=0;tn<en.length;++tn)if(Qe[en[tn]])return Qe[en[tn]];throw new Error("Could not find a matching font-style for "+Ze)}(Be.style,je),!(je=function(Ze,Qe){if(Qe[Ze])return Qe[Ze];if(Ze===400&&Qe[500])return Qe[500];if(Ze===500&&Qe[400])return Qe[400];var en=Ct[Ze],tn=Ot(Qe,Ft,en,Ze<400?-1:1);if(!tn)throw new Error("Could not find a matching font-weight for value "+Ze);return tn}(Be.weight,je)))throw new Error("Failed to resolve a font for the rule '"+Et(Be)+"'.");return je}function Dt(Oe){return Oe.trimLeft()}function Rt(Oe,e){for(var t=0;t<Oe.length;){if(Oe.charAt(t)===e)return[Oe.substring(0,t),Oe.substring(t+1)];t+=1}return null}function Tt(Oe){var e=Oe.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],Oe.substring(e[0].length)]}var Ut,zt,Ht,Wt=["times"];(function(Oe){var e,t,ke,Ge,Be,je,Ve,Ze,Qe,en=function(On){return On=On||{},this.isStrokeTransparent=On.isStrokeTransparent||!1,this.strokeOpacity=On.strokeOpacity||1,this.strokeStyle=On.strokeStyle||"#000000",this.fillStyle=On.fillStyle||"#000000",this.isFillTransparent=On.isFillTransparent||!1,this.fillOpacity=On.fillOpacity||1,this.font=On.font||"10px sans-serif",this.textBaseline=On.textBaseline||"alphabetic",this.textAlign=On.textAlign||"left",this.lineWidth=On.lineWidth||1,this.lineJoin=On.lineJoin||"miter",this.lineCap=On.lineCap||"butt",this.path=On.path||[],this.transform=On.transform!==void 0?On.transform.clone():new Ze,this.globalCompositeOperation=On.globalCompositeOperation||"normal",this.globalAlpha=On.globalAlpha||1,this.clip_path=On.clip_path||[],this.currentPoint=On.currentPoint||new je,this.miterLimit=On.miterLimit||10,this.lastPoint=On.lastPoint||new je,this.lineDashOffset=On.lineDashOffset||0,this.lineDash=On.lineDash||[],this.margin=On.margin||[0,0,0,0],this.prevPageLastElemOffset=On.prevPageLastElemOffset||0,this.ignoreClearRect=typeof On.ignoreClearRect!="boolean"||On.ignoreClearRect,this};Oe.events.push(["initialized",function(){this.context2d=new tn(this),e=this.internal.f2,t=this.internal.getCoordinateString,ke=this.internal.getVerticalCoordinateString,Ge=this.internal.getHorizontalCoordinate,Be=this.internal.getVerticalCoordinate,je=this.internal.Point,Ve=this.internal.Rectangle,Ze=this.internal.Matrix,Qe=new en}]);var tn=function(On){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var qn=On;Object.defineProperty(this,"pdf",{get:function(){return qn}});var Un=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Un},set:function(Kn){Un=!!Kn}});var Ci=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Ci},set:function(Kn){Ci=!!Kn}});var Si=0;Object.defineProperty(this,"posX",{get:function(){return Si},set:function(Kn){isNaN(Kn)||(Si=Kn)}});var _i=0;Object.defineProperty(this,"posY",{get:function(){return _i},set:function(Kn){isNaN(Kn)||(_i=Kn)}}),Object.defineProperty(this,"margin",{get:function(){return Qe.margin},set:function(Kn){var Fn;typeof Kn=="number"?Fn=[Kn,Kn,Kn,Kn]:((Fn=new Array(4))[0]=Kn[0],Fn[1]=Kn.length>=2?Kn[1]:Fn[0],Fn[2]=Kn.length>=3?Kn[2]:Fn[0],Fn[3]=Kn.length>=4?Kn[3]:Fn[1]),Qe.margin=Fn}});var Ii=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ii},set:function(Kn){Ii=Kn}});var Li=0;Object.defineProperty(this,"lastBreak",{get:function(){return Li},set:function(Kn){Li=Kn}});var Ri=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ri},set:function(Kn){Ri=Kn}}),Object.defineProperty(this,"ctx",{get:function(){return Qe},set:function(Kn){Kn instanceof en&&(Qe=Kn)}}),Object.defineProperty(this,"path",{get:function(){return Qe.path},set:function(Kn){Qe.path=Kn}});var tr=[];Object.defineProperty(this,"ctxStack",{get:function(){return tr},set:function(Kn){tr=Kn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(Kn){var Fn;Fn=an(Kn),this.ctx.fillStyle=Fn.style,this.ctx.isFillTransparent=Fn.a===0,this.ctx.fillOpacity=Fn.a,this.pdf.setFillColor(Fn.r,Fn.g,Fn.b,{a:Fn.a}),this.pdf.setTextColor(Fn.r,Fn.g,Fn.b,{a:Fn.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(Kn){var Fn=an(Kn);this.ctx.strokeStyle=Fn.style,this.ctx.isStrokeTransparent=Fn.a===0,this.ctx.strokeOpacity=Fn.a,Fn.a===0?this.pdf.setDrawColor(255,255,255):(Fn.a,this.pdf.setDrawColor(Fn.r,Fn.g,Fn.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(Kn){["butt","round","square"].indexOf(Kn)!==-1&&(this.ctx.lineCap=Kn,this.pdf.setLineCap(Kn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(Kn){isNaN(Kn)||(this.ctx.lineWidth=Kn,this.pdf.setLineWidth(Kn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(Kn){["bevel","round","miter"].indexOf(Kn)!==-1&&(this.ctx.lineJoin=Kn,this.pdf.setLineJoin(Kn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(Kn){isNaN(Kn)||(this.ctx.miterLimit=Kn,this.pdf.setMiterLimit(Kn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(Kn){this.ctx.textBaseline=Kn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(Kn){["right","end","center","left","start"].indexOf(Kn)!==-1&&(this.ctx.textAlign=Kn)}});var Fr=null;function Bn(Kn,Fn){if(Fr===null){var $i=function(Hi){var Di=[];return Object.keys(Hi).forEach(function(zi){Hi[zi].forEach(function(Bi){var Gi=null;switch(Bi){case"bold":Gi={family:zi,weight:"bold"};break;case"italic":Gi={family:zi,style:"italic"};break;case"bolditalic":Gi={family:zi,weight:"bold",style:"italic"};break;case"":case"normal":Gi={family:zi}}Gi!==null&&(Gi.ref={name:zi,style:Bi},Di.push(Gi))})}),Di}(Kn.getFontList());Fr=function(Hi){for(var Di={},zi=0;zi<Hi.length;++zi){var Bi=jt(Hi[zi]),Gi=Bi.family,Ti=Bi.stretch,Mi=Bi.style,Oi=Bi.weight;Di[Gi]=Di[Gi]||{},Di[Gi][Ti]=Di[Gi][Ti]||{},Di[Gi][Ti][Mi]=Di[Gi][Ti][Mi]||{},Di[Gi][Ti][Mi][Oi]=Bi}return Di}($i.concat(Fn))}return Fr}var Ai=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ai},set:function(Kn){Fr=null,Ai=Kn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(Kn){var Fn;if(this.ctx.font=Kn,(Fn=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(Kn))!==null){var $i=Fn[1],Hi=(Fn[2],Fn[3]),Di=Fn[4],zi=(Fn[5],Fn[6]),Bi=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Di)[2];Di=Math.floor(Bi==="px"?parseFloat(Di)*this.pdf.internal.scaleFactor:Bi==="em"?parseFloat(Di)*this.pdf.getFontSize():parseFloat(Di)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Di);var Gi=function(Rr){var Us,Vr,ro=[],Js=Rr.trim();if(Js==="")return Wt;if(Js in Mt)return[Mt[Js]];for(;Js!=="";){switch(Vr=null,Us=(Js=Dt(Js)).charAt(0)){case'"':case"'":Vr=Rt(Js.substring(1),Us);break;default:Vr=Tt(Js)}if(Vr===null||(ro.push(Vr[0]),(Js=Dt(Vr[1]))!==""&&Js.charAt(0)!==","))return Wt;Js=Js.replace(/^,/,"")}return ro}(zi);if(this.fontFaces){var Ti=qt(Bn(this.pdf,this.fontFaces),Gi.map(function(Rr){return{family:Rr,stretch:"normal",weight:Hi,style:$i}}));this.pdf.setFont(Ti.ref.name,Ti.ref.style)}else{var Mi="";(Hi==="bold"||parseInt(Hi,10)>=700||$i==="bold")&&(Mi="bold"),$i==="italic"&&(Mi+="italic"),Mi.length===0&&(Mi="normal");for(var Oi="",Xi={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},ar=0;ar<Gi.length;ar++){if(this.pdf.internal.getFont(Gi[ar],Mi,{noFallback:!0,disableWarning:!0})!==void 0){Oi=Gi[ar];break}if(Mi==="bolditalic"&&this.pdf.internal.getFont(Gi[ar],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Oi=Gi[ar],Mi="bold";else if(this.pdf.internal.getFont(Gi[ar],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Oi=Gi[ar],Mi="normal";break}}if(Oi===""){for(var Pr=0;Pr<Gi.length;Pr++)if(Xi[Gi[Pr]]){Oi=Xi[Gi[Pr]];break}}Oi=Oi===""?"Times":Oi,this.pdf.setFont(Oi,Mi)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(Kn){this.ctx.globalCompositeOperation=Kn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(Kn){this.ctx.globalAlpha=Kn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(Kn){this.ctx.lineDashOffset=Kn,Ni.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(Kn){this.ctx.lineDash=Kn,Ni.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(Kn){this.ctx.ignoreClearRect=!!Kn}})};tn.prototype.setLineDash=function(On){this.lineDash=On},tn.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},tn.prototype.fill=function(){vn.call(this,"fill",!1)},tn.prototype.stroke=function(){vn.call(this,"stroke",!1)},tn.prototype.beginPath=function(){this.path=[{type:"begin"}]},tn.prototype.moveTo=function(On,qn){if(isNaN(On)||isNaN(qn))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Un=this.ctx.transform.applyToPoint(new je(On,qn));this.path.push({type:"mt",x:Un.x,y:Un.y}),this.ctx.lastPoint=new je(On,qn)},tn.prototype.closePath=function(){var On=new je(0,0),qn=0;for(qn=this.path.length-1;qn!==-1;qn--)if(this.path[qn].type==="begin"&&_typeof(this.path[qn+1])==="object"&&typeof this.path[qn+1].x=="number"){On=new je(this.path[qn+1].x,this.path[qn+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new je(On.x,On.y)},tn.prototype.lineTo=function(On,qn){if(isNaN(On)||isNaN(qn))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Un=this.ctx.transform.applyToPoint(new je(On,qn));this.path.push({type:"lt",x:Un.x,y:Un.y}),this.ctx.lastPoint=new je(Un.x,Un.y)},tn.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),vn.call(this,null,!0)},tn.prototype.quadraticCurveTo=function(On,qn,Un,Ci){if(isNaN(Un)||isNaN(Ci)||isNaN(On)||isNaN(qn))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Si=this.ctx.transform.applyToPoint(new je(Un,Ci)),_i=this.ctx.transform.applyToPoint(new je(On,qn));this.path.push({type:"qct",x1:_i.x,y1:_i.y,x:Si.x,y:Si.y}),this.ctx.lastPoint=new je(Si.x,Si.y)},tn.prototype.bezierCurveTo=function(On,qn,Un,Ci,Si,_i){if(isNaN(Si)||isNaN(_i)||isNaN(On)||isNaN(qn)||isNaN(Un)||isNaN(Ci))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ii=this.ctx.transform.applyToPoint(new je(Si,_i)),Li=this.ctx.transform.applyToPoint(new je(On,qn)),Ri=this.ctx.transform.applyToPoint(new je(Un,Ci));this.path.push({type:"bct",x1:Li.x,y1:Li.y,x2:Ri.x,y2:Ri.y,x:Ii.x,y:Ii.y}),this.ctx.lastPoint=new je(Ii.x,Ii.y)},tn.prototype.arc=function(On,qn,Un,Ci,Si,_i){if(isNaN(On)||isNaN(qn)||isNaN(Un)||isNaN(Ci)||isNaN(Si))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(_i=!!_i,!this.ctx.transform.isIdentity){var Ii=this.ctx.transform.applyToPoint(new je(On,qn));On=Ii.x,qn=Ii.y;var Li=this.ctx.transform.applyToPoint(new je(0,Un)),Ri=this.ctx.transform.applyToPoint(new je(0,0));Un=Math.sqrt(Math.pow(Li.x-Ri.x,2)+Math.pow(Li.y-Ri.y,2))}Math.abs(Si-Ci)>=2*Math.PI&&(Ci=0,Si=2*Math.PI),this.path.push({type:"arc",x:On,y:qn,radius:Un,startAngle:Ci,endAngle:Si,counterclockwise:_i})},tn.prototype.arcTo=function(On,qn,Un,Ci,Si){throw new Error("arcTo not implemented.")},tn.prototype.rect=function(On,qn,Un,Ci){if(isNaN(On)||isNaN(qn)||isNaN(Un)||isNaN(Ci))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(On,qn),this.lineTo(On+Un,qn),this.lineTo(On+Un,qn+Ci),this.lineTo(On,qn+Ci),this.lineTo(On,qn),this.lineTo(On+Un,qn),this.lineTo(On,qn)},tn.prototype.fillRect=function(On,qn,Un,Ci){if(isNaN(On)||isNaN(qn)||isNaN(Un)||isNaN(Ci))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!cn.call(this)){var Si={};this.lineCap!=="butt"&&(Si.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Si.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(On,qn,Un,Ci),this.fill(),Si.hasOwnProperty("lineCap")&&(this.lineCap=Si.lineCap),Si.hasOwnProperty("lineJoin")&&(this.lineJoin=Si.lineJoin)}},tn.prototype.strokeRect=function(On,qn,Un,Ci){if(isNaN(On)||isNaN(qn)||isNaN(Un)||isNaN(Ci))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");un.call(this)||(this.beginPath(),this.rect(On,qn,Un,Ci),this.stroke())},tn.prototype.clearRect=function(On,qn,Un,Ci){if(isNaN(On)||isNaN(qn)||isNaN(Un)||isNaN(Ci))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(On,qn,Un,Ci))},tn.prototype.save=function(On){On=typeof On!="boolean"||On;for(var qn=this.pdf.internal.getCurrentPageInfo().pageNumber,Un=0;Un<this.pdf.internal.getNumberOfPages();Un++)this.pdf.setPage(Un+1),this.pdf.internal.out("q");if(this.pdf.setPage(qn),On){this.ctx.fontSize=this.pdf.internal.getFontSize();var Ci=new en(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Ci}},tn.prototype.restore=function(On){On=typeof On!="boolean"||On;for(var qn=this.pdf.internal.getCurrentPageInfo().pageNumber,Un=0;Un<this.pdf.internal.getNumberOfPages();Un++)this.pdf.setPage(Un+1),this.pdf.internal.out("Q");this.pdf.setPage(qn),On&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},tn.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var an=function(On){var qn,Un,Ci,Si;if(On.isCanvasGradient===!0&&(On=On.getColor()),!On)return{r:0,g:0,b:0,a:0,style:On};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(On))qn=0,Un=0,Ci=0,Si=0;else{var _i=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(On);if(_i!==null)qn=parseInt(_i[1]),Un=parseInt(_i[2]),Ci=parseInt(_i[3]),Si=1;else if((_i=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(On))!==null)qn=parseInt(_i[1]),Un=parseInt(_i[2]),Ci=parseInt(_i[3]),Si=parseFloat(_i[4]);else{if(Si=1,typeof On=="string"&&On.charAt(0)!=="#"){var Ii=new f(On);On=Ii.ok?Ii.toHex():"#000000"}On.length===4?(qn=On.substring(1,2),qn+=qn,Un=On.substring(2,3),Un+=Un,Ci=On.substring(3,4),Ci+=Ci):(qn=On.substring(1,3),Un=On.substring(3,5),Ci=On.substring(5,7)),qn=parseInt(qn,16),Un=parseInt(Un,16),Ci=parseInt(Ci,16)}}return{r:qn,g:Un,b:Ci,a:Si,style:On}},cn=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},un=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};tn.prototype.fillText=function(On,qn,Un,Ci){if(isNaN(qn)||isNaN(Un)||typeof On!="string")throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Ci=isNaN(Ci)?void 0:Ci,!cn.call(this)){var Si=$n(this.ctx.transform.rotation),_i=this.ctx.transform.scaleX;Cn.call(this,{text:On,x:qn,y:Un,scale:_i,angle:Si,align:this.textAlign,maxWidth:Ci})}},tn.prototype.strokeText=function(On,qn,Un,Ci){if(isNaN(qn)||isNaN(Un)||typeof On!="string")throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!un.call(this)){Ci=isNaN(Ci)?void 0:Ci;var Si=$n(this.ctx.transform.rotation),_i=this.ctx.transform.scaleX;Cn.call(this,{text:On,x:qn,y:Un,scale:_i,renderingMode:"stroke",angle:Si,align:this.textAlign,maxWidth:Ci})}},tn.prototype.measureText=function(On){if(typeof On!="string")throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var qn=this.pdf,Un=this.pdf.internal.scaleFactor,Ci=qn.internal.getFontSize(),Si=qn.getStringUnitWidth(On)*Ci/qn.internal.scaleFactor,_i=function(Ii){var Li=(Ii=Ii||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Li}}),this};return new _i({width:Si*=Math.round(96*Un/72*1e4)/1e4})},tn.prototype.scale=function(On,qn){if(isNaN(On)||isNaN(qn))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Un=new Ze(On,0,0,qn,0,0);this.ctx.transform=this.ctx.transform.multiply(Un)},tn.prototype.rotate=function(On){if(isNaN(On))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var qn=new Ze(Math.cos(On),Math.sin(On),-Math.sin(On),Math.cos(On),0,0);this.ctx.transform=this.ctx.transform.multiply(qn)},tn.prototype.translate=function(On,qn){if(isNaN(On)||isNaN(qn))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Un=new Ze(1,0,0,1,On,qn);this.ctx.transform=this.ctx.transform.multiply(Un)},tn.prototype.transform=function(On,qn,Un,Ci,Si,_i){if(isNaN(On)||isNaN(qn)||isNaN(Un)||isNaN(Ci)||isNaN(Si)||isNaN(_i))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ii=new Ze(On,qn,Un,Ci,Si,_i);this.ctx.transform=this.ctx.transform.multiply(Ii)},tn.prototype.setTransform=function(On,qn,Un,Ci,Si,_i){On=isNaN(On)?1:On,qn=isNaN(qn)?0:qn,Un=isNaN(Un)?0:Un,Ci=isNaN(Ci)?1:Ci,Si=isNaN(Si)?0:Si,_i=isNaN(_i)?0:_i,this.ctx.transform=new Ze(On,qn,Un,Ci,Si,_i)};var dn=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};tn.prototype.drawImage=function(On,qn,Un,Ci,Si,_i,Ii,Li,Ri){var tr=this.pdf.getImageProperties(On),Fr=1,Bn=1,Ai=1,Kn=1;Ci!==void 0&&Li!==void 0&&(Ai=Li/Ci,Kn=Ri/Si,Fr=tr.width/Ci*Li/Ci,Bn=tr.height/Si*Ri/Si),_i===void 0&&(_i=qn,Ii=Un,qn=0,Un=0),Ci!==void 0&&Li===void 0&&(Li=Ci,Ri=Si),Ci===void 0&&Li===void 0&&(Li=tr.width,Ri=tr.height);for(var Fn,$i=this.ctx.transform.decompose(),Hi=$n($i.rotate.shx),Di=new Ze,zi=(Di=(Di=(Di=Di.multiply($i.translate)).multiply($i.skew)).multiply($i.scale)).applyToRectangle(new Ve(_i-qn*Ai,Ii-Un*Kn,Ci*Fr,Si*Bn)),Bi=fn.call(this,zi),Gi=[],Ti=0;Ti<Bi.length;Ti+=1)Gi.indexOf(Bi[Ti])===-1&&Gi.push(Bi[Ti]);if(yn(Gi),this.autoPaging)for(var Mi=Gi[0],Oi=Gi[Gi.length-1],Xi=Mi;Xi<Oi+1;Xi++){this.pdf.setPage(Xi);var ar=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pr=Xi===1?this.posY+this.margin[0]:this.margin[0],Rr=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Us=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Vr=Xi===1?0:Rr+(Xi-2)*Us;if(this.ctx.clip_path.length!==0){var ro=this.path;Fn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=gn(Fn,this.posX+this.margin[3],-Vr+Pr+this.ctx.prevPageLastElemOffset),An.call(this,"fill",!0),this.path=ro}var Js=JSON.parse(JSON.stringify(zi));Js=gn([Js],this.posX+this.margin[3],-Vr+Pr+this.ctx.prevPageLastElemOffset)[0];var fo=(Xi>Mi||Xi<Oi)&&dn.call(this);fo&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ar,Us,null).clip().discardPath()),this.pdf.addImage(On,"JPEG",Js.x,Js.y,Js.w,Js.h,null,null,Hi),fo&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(On,"JPEG",zi.x,zi.y,zi.w,zi.h,null,null,Hi)};var fn=function(On,qn,Un){var Ci=[];qn=qn||this.pdf.internal.pageSize.width,Un=Un||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Si=this.posY+this.ctx.prevPageLastElemOffset;switch(On.type){default:case"mt":case"lt":Ci.push(Math.floor((On.y+Si)/Un)+1);break;case"arc":Ci.push(Math.floor((On.y+Si-On.radius)/Un)+1),Ci.push(Math.floor((On.y+Si+On.radius)/Un)+1);break;case"qct":var _i=Qn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,On.x1,On.y1,On.x,On.y);Ci.push(Math.floor((_i.y+Si)/Un)+1),Ci.push(Math.floor((_i.y+_i.h+Si)/Un)+1);break;case"bct":var Ii=Hn(this.ctx.lastPoint.x,this.ctx.lastPoint.y,On.x1,On.y1,On.x2,On.y2,On.x,On.y);Ci.push(Math.floor((Ii.y+Si)/Un)+1),Ci.push(Math.floor((Ii.y+Ii.h+Si)/Un)+1);break;case"rect":Ci.push(Math.floor((On.y+Si)/Un)+1),Ci.push(Math.floor((On.y+On.h+Si)/Un)+1)}for(var Li=0;Li<Ci.length;Li+=1)for(;this.pdf.internal.getNumberOfPages()<Ci[Li];)pn.call(this);return Ci},pn=function(){var On=this.fillStyle,qn=this.strokeStyle,Un=this.font,Ci=this.lineCap,Si=this.lineWidth,_i=this.lineJoin;this.pdf.addPage(),this.fillStyle=On,this.strokeStyle=qn,this.font=Un,this.lineCap=Ci,this.lineWidth=Si,this.lineJoin=_i},gn=function(On,qn,Un){for(var Ci=0;Ci<On.length;Ci++)switch(On[Ci].type){case"bct":On[Ci].x2+=qn,On[Ci].y2+=Un;case"qct":On[Ci].x1+=qn,On[Ci].y1+=Un;case"mt":case"lt":case"arc":default:On[Ci].x+=qn,On[Ci].y+=Un}return On},yn=function(On){return On.sort(function(qn,Un){return qn-Un})},vn=function(On,qn){for(var Un,Ci,Si=this.fillStyle,_i=this.strokeStyle,Ii=this.lineCap,Li=this.lineWidth,Ri=Math.abs(Li*this.ctx.transform.scaleX),tr=this.lineJoin,Fr=JSON.parse(JSON.stringify(this.path)),Bn=JSON.parse(JSON.stringify(this.path)),Ai=[],Kn=0;Kn<Bn.length;Kn++)if(Bn[Kn].x!==void 0)for(var Fn=fn.call(this,Bn[Kn]),$i=0;$i<Fn.length;$i+=1)Ai.indexOf(Fn[$i])===-1&&Ai.push(Fn[$i]);for(var Hi=0;Hi<Ai.length;Hi++)for(;this.pdf.internal.getNumberOfPages()<Ai[Hi];)pn.call(this);if(yn(Ai),this.autoPaging)for(var Di=Ai[0],zi=Ai[Ai.length-1],Bi=Di;Bi<zi+1;Bi++){this.pdf.setPage(Bi),this.fillStyle=Si,this.strokeStyle=_i,this.lineCap=Ii,this.lineWidth=Ri,this.lineJoin=tr;var Gi=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ti=Bi===1?this.posY+this.margin[0]:this.margin[0],Mi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Oi=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xi=Bi===1?0:Mi+(Bi-2)*Oi;if(this.ctx.clip_path.length!==0){var ar=this.path;Un=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=gn(Un,this.posX+this.margin[3],-Xi+Ti+this.ctx.prevPageLastElemOffset),An.call(this,On,!0),this.path=ar}if(Ci=JSON.parse(JSON.stringify(Fr)),this.path=gn(Ci,this.posX+this.margin[3],-Xi+Ti+this.ctx.prevPageLastElemOffset),qn===!1||Bi===0){var Pr=(Bi>Di||Bi<zi)&&dn.call(this);Pr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Gi,Oi,null).clip().discardPath()),An.call(this,On,qn),Pr&&this.pdf.restoreGraphicsState()}this.lineWidth=Li}else this.lineWidth=Ri,An.call(this,On,qn),this.lineWidth=Li;this.path=Fr},An=function(On,qn){if((On!=="stroke"||qn||!un.call(this))&&(On==="stroke"||qn||!cn.call(this))){for(var Un,Ci,Si=[],_i=this.path,Ii=0;Ii<_i.length;Ii++){var Li=_i[Ii];switch(Li.type){case"begin":Si.push({begin:!0});break;case"close":Si.push({close:!0});break;case"mt":Si.push({start:Li,deltas:[],abs:[]});break;case"lt":var Ri=Si.length;if(_i[Ii-1]&&!isNaN(_i[Ii-1].x)&&(Un=[Li.x-_i[Ii-1].x,Li.y-_i[Ii-1].y],Ri>0)){for(;Ri>=0;Ri--)if(Si[Ri-1].close!==!0&&Si[Ri-1].begin!==!0){Si[Ri-1].deltas.push(Un),Si[Ri-1].abs.push(Li);break}}break;case"bct":Un=[Li.x1-_i[Ii-1].x,Li.y1-_i[Ii-1].y,Li.x2-_i[Ii-1].x,Li.y2-_i[Ii-1].y,Li.x-_i[Ii-1].x,Li.y-_i[Ii-1].y],Si[Si.length-1].deltas.push(Un);break;case"qct":var tr=_i[Ii-1].x+2/3*(Li.x1-_i[Ii-1].x),Fr=_i[Ii-1].y+2/3*(Li.y1-_i[Ii-1].y),Bn=Li.x+2/3*(Li.x1-Li.x),Ai=Li.y+2/3*(Li.y1-Li.y),Kn=Li.x,Fn=Li.y;Un=[tr-_i[Ii-1].x,Fr-_i[Ii-1].y,Bn-_i[Ii-1].x,Ai-_i[Ii-1].y,Kn-_i[Ii-1].x,Fn-_i[Ii-1].y],Si[Si.length-1].deltas.push(Un);break;case"arc":Si.push({deltas:[],abs:[],arc:!0}),Array.isArray(Si[Si.length-1].abs)&&Si[Si.length-1].abs.push(Li)}}Ci=qn?null:On==="stroke"?"stroke":"fill";for(var $i=!1,Hi=0;Hi<Si.length;Hi++)if(Si[Hi].arc)for(var Di=Si[Hi].abs,zi=0;zi<Di.length;zi++){var Bi=Di[zi];Bi.type==="arc"?bn.call(this,Bi.x,Bi.y,Bi.radius,Bi.startAngle,Bi.endAngle,Bi.counterclockwise,void 0,qn,!$i):Rn.call(this,Bi.x,Bi.y),$i=!0}else if(Si[Hi].close===!0)this.pdf.internal.out("h"),$i=!1;else if(Si[Hi].begin!==!0){var Gi=Si[Hi].start.x,Ti=Si[Hi].start.y;Tn.call(this,Si[Hi].deltas,Gi,Ti),$i=!0}Ci&&Mn.call(this,Ci),qn&&Pn.call(this)}},xn=function(On){var qn=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Un=qn*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return On-Un;case"top":return On+qn-Un;case"hanging":return On+qn-2*Un;case"middle":return On+qn/2-Un;case"ideographic":return On;case"alphabetic":default:return On}},wn=function(On){return On+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};tn.prototype.createLinearGradient=function(){var On=function(){};return On.colorStops=[],On.addColorStop=function(qn,Un){this.colorStops.push([qn,Un])},On.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},On.isCanvasGradient=!0,On},tn.prototype.createPattern=function(){return this.createLinearGradient()},tn.prototype.createRadialGradient=function(){return this.createLinearGradient()};var bn=function(On,qn,Un,Ci,Si,_i,Ii,Li,Ri){for(var tr=Gn.call(this,Un,Ci,Si,_i),Fr=0;Fr<tr.length;Fr++){var Bn=tr[Fr];Fr===0&&(Ri?En.call(this,Bn.x1+On,Bn.y1+qn):Rn.call(this,Bn.x1+On,Bn.y1+qn)),Nn.call(this,On,qn,Bn.x2,Bn.y2,Bn.x3,Bn.y3,Bn.x4,Bn.y4)}Li?Pn.call(this):Mn.call(this,Ii)},Mn=function(On){switch(On){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},Pn=function(){this.pdf.clip(),this.pdf.discardPath()},En=function(On,qn){this.pdf.internal.out(t(On)+" "+ke(qn)+" m")},Cn=function(On){var qn;switch(On.align){case"right":case"end":qn="right";break;case"center":qn="center";break;case"left":case"start":default:qn="left"}var Un=this.pdf.getTextDimensions(On.text),Ci=xn.call(this,On.y),Si=wn.call(this,Ci)-Un.h,_i=this.ctx.transform.applyToPoint(new je(On.x,Ci)),Ii=this.ctx.transform.decompose(),Li=new Ze;Li=(Li=(Li=Li.multiply(Ii.translate)).multiply(Ii.skew)).multiply(Ii.scale);for(var Ri,tr,Fr,Bn=this.ctx.transform.applyToRectangle(new Ve(On.x,Ci,Un.w,Un.h)),Ai=Li.applyToRectangle(new Ve(On.x,Si,Un.w,Un.h)),Kn=fn.call(this,Ai),Fn=[],$i=0;$i<Kn.length;$i+=1)Fn.indexOf(Kn[$i])===-1&&Fn.push(Kn[$i]);if(yn(Fn),this.autoPaging)for(var Hi=Fn[0],Di=Fn[Fn.length-1],zi=Hi;zi<Di+1;zi++){this.pdf.setPage(zi);var Bi=zi===1?this.posY+this.margin[0]:this.margin[0],Gi=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ti=this.pdf.internal.pageSize.height-this.margin[2],Mi=Ti-this.margin[0],Oi=this.pdf.internal.pageSize.width-this.margin[1],Xi=Oi-this.margin[3],ar=zi===1?0:Gi+(zi-2)*Mi;if(this.ctx.clip_path.length!==0){var Pr=this.path;Ri=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=gn(Ri,this.posX+this.margin[3],-1*ar+Bi),An.call(this,"fill",!0),this.path=Pr}var Rr=gn([JSON.parse(JSON.stringify(Ai))],this.posX+this.margin[3],-ar+Bi+this.ctx.prevPageLastElemOffset)[0];On.scale>=.01&&(tr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(tr*On.scale),Fr=this.lineWidth,this.lineWidth=Fr*On.scale);var Us=this.autoPaging!=="text";if(Us||Rr.y+Rr.h<=Ti){if(Us||Rr.y>=Bi&&Rr.x<=Oi){var Vr=Us?On.text:this.pdf.splitTextToSize(On.text,On.maxWidth||Oi-Rr.x)[0],ro=gn([JSON.parse(JSON.stringify(Bn))],this.posX+this.margin[3],-ar+Bi+this.ctx.prevPageLastElemOffset)[0],Js=Us&&(zi>Hi||zi<Di)&&dn.call(this);Js&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xi,Mi,null).clip().discardPath()),this.pdf.text(Vr,ro.x,ro.y,{angle:On.angle,align:qn,renderingMode:On.renderingMode}),Js&&this.pdf.restoreGraphicsState()}}else Rr.y<Ti&&(this.ctx.prevPageLastElemOffset+=Ti-Rr.y);On.scale>=.01&&(this.pdf.setFontSize(tr),this.lineWidth=Fr)}else On.scale>=.01&&(tr=this.pdf.internal.getFontSize(),this.pdf.setFontSize(tr*On.scale),Fr=this.lineWidth,this.lineWidth=Fr*On.scale),this.pdf.text(On.text,_i.x+this.posX,_i.y+this.posY,{angle:On.angle,align:qn,renderingMode:On.renderingMode,maxWidth:On.maxWidth}),On.scale>=.01&&(this.pdf.setFontSize(tr),this.lineWidth=Fr)},Rn=function(On,qn,Un,Ci){Un=Un||0,Ci=Ci||0,this.pdf.internal.out(t(On+Un)+" "+ke(qn+Ci)+" l")},Tn=function(On,qn,Un){return this.pdf.lines(On,qn,Un,null,null)},Nn=function(On,qn,Un,Ci,Si,_i,Ii,Li){this.pdf.internal.out([e(Ge(Un+On)),e(Be(Ci+qn)),e(Ge(Si+On)),e(Be(_i+qn)),e(Ge(Ii+On)),e(Be(Li+qn)),"c"].join(" "))},Gn=function(On,qn,Un,Ci){for(var Si=2*Math.PI,_i=Math.PI/2;qn>Un;)qn-=Si;var Ii=Math.abs(Un-qn);Ii<Si&&Ci&&(Ii=Si-Ii);for(var Li=[],Ri=Ci?-1:1,tr=qn;Ii>1e-5;){var Fr=tr+Ri*Math.min(Ii,_i);Li.push(zn.call(this,On,tr,Fr)),Ii-=Math.abs(Fr-tr),tr=Fr}return Li},zn=function(On,qn,Un){var Ci=(Un-qn)/2,Si=On*Math.cos(Ci),_i=On*Math.sin(Ci),Ii=Si,Li=-_i,Ri=Ii*Ii+Li*Li,tr=Ri+Ii*Si+Li*_i,Fr=4/3*(Math.sqrt(2*Ri*tr)-tr)/(Ii*_i-Li*Si),Bn=Ii-Fr*Li,Ai=Li+Fr*Ii,Kn=Bn,Fn=-Ai,$i=Ci+qn,Hi=Math.cos($i),Di=Math.sin($i);return{x1:On*Math.cos(qn),y1:On*Math.sin(qn),x2:Bn*Hi-Ai*Di,y2:Bn*Di+Ai*Hi,x3:Kn*Hi-Fn*Di,y3:Kn*Di+Fn*Hi,x4:On*Math.cos(Un),y4:On*Math.sin(Un)}},$n=function(On){return 180*On/Math.PI},Qn=function(On,qn,Un,Ci,Si,_i){var Ii=On+.5*(Un-On),Li=qn+.5*(Ci-qn),Ri=Si+.5*(Un-Si),tr=_i+.5*(Ci-_i),Fr=Math.min(On,Si,Ii,Ri),Bn=Math.max(On,Si,Ii,Ri),Ai=Math.min(qn,_i,Li,tr),Kn=Math.max(qn,_i,Li,tr);return new Ve(Fr,Ai,Bn-Fr,Kn-Ai)},Hn=function(On,qn,Un,Ci,Si,_i,Ii,Li){var Ri,tr,Fr,Bn,Ai,Kn,Fn,$i,Hi,Di,zi,Bi,Gi,Ti,Mi=Un-On,Oi=Ci-qn,Xi=Si-Un,ar=_i-Ci,Pr=Ii-Si,Rr=Li-_i;for(tr=0;tr<41;tr++)Hi=(Fn=(Fr=On+(Ri=tr/40)*Mi)+Ri*((Ai=Un+Ri*Xi)-Fr))+Ri*(Ai+Ri*(Si+Ri*Pr-Ai)-Fn),Di=($i=(Bn=qn+Ri*Oi)+Ri*((Kn=Ci+Ri*ar)-Bn))+Ri*(Kn+Ri*(_i+Ri*Rr-Kn)-$i),tr==0?(zi=Hi,Bi=Di,Gi=Hi,Ti=Di):(zi=Math.min(zi,Hi),Bi=Math.min(Bi,Di),Gi=Math.max(Gi,Hi),Ti=Math.max(Ti,Di));return new Ve(Math.round(zi),Math.round(Bi),Math.round(Gi-zi),Math.round(Ti-Bi))},Ni=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var On,qn,Un=(On=this.ctx.lineDash,qn=this.ctx.lineDashOffset,JSON.stringify({lineDash:On,lineDashOffset:qn}));this.prevLineDash!==Un&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Un)}}})(E.API),function(Oe){var e=function(Be){var je,Ve,Ze,Qe,en,tn,an,cn,un,dn;for(Ve=[],Ze=0,Qe=(Be+=je="\0\0\0\0".slice(Be.length%4||4)).length;Qe>Ze;Ze+=4)(en=(Be.charCodeAt(Ze)<<24)+(Be.charCodeAt(Ze+1)<<16)+(Be.charCodeAt(Ze+2)<<8)+Be.charCodeAt(Ze+3))!==0?(tn=(en=((en=((en=((en=(en-(dn=en%85))/85)-(un=en%85))/85)-(cn=en%85))/85)-(an=en%85))/85)%85,Ve.push(tn+33,an+33,cn+33,un+33,dn+33)):Ve.push(122);return function(fn,pn){for(var gn=pn;gn>0;gn--)fn.pop()}(Ve,je.length),String.fromCharCode.apply(String,Ve)+"~>"},t=function(Be){var je,Ve,Ze,Qe,en,tn=String,an="length",cn=255,un="charCodeAt",dn="slice",fn="replace";for(Be[dn](-2),Be=Be[dn](0,-2)[fn](/\s/g,"")[fn]("z","!!!!!"),Ze=[],Qe=0,en=(Be+=je="uuuuu"[dn](Be[an]%5||5))[an];en>Qe;Qe+=5)Ve=52200625*(Be[un](Qe)-33)+614125*(Be[un](Qe+1)-33)+7225*(Be[un](Qe+2)-33)+85*(Be[un](Qe+3)-33)+(Be[un](Qe+4)-33),Ze.push(cn&Ve>>24,cn&Ve>>16,cn&Ve>>8,cn&Ve);return function(pn,gn){for(var yn=gn;yn>0;yn--)pn.pop()}(Ze,je[an]),tn.fromCharCode.apply(tn,Ze)},ke=function(Be){var je=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((Be=Be.replace(/\s/g,"")).indexOf(">")!==-1&&(Be=Be.substr(0,Be.indexOf(">"))),Be.length%2&&(Be+="0"),je.test(Be)===!1)return"";for(var Ve="",Ze=0;Ze<Be.length;Ze+=2)Ve+=String.fromCharCode("0x"+(Be[Ze]+Be[Ze+1]));return Ve},Ge=function(Be){for(var je=new Uint8Array(Be.length),Ve=Be.length;Ve--;)je[Ve]=Be.charCodeAt(Ve);return Be=(je=zlibSync(je)).reduce(function(Ze,Qe){return Ze+String.fromCharCode(Qe)},"")};Oe.processDataByFilters=function(Be,je){var Ve=0,Ze=Be||"",Qe=[];for(typeof(je=je||[])=="string"&&(je=[je]),Ve=0;Ve<je.length;Ve+=1)switch(je[Ve]){case"ASCII85Decode":case"/ASCII85Decode":Ze=t(Ze),Qe.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":Ze=e(Ze),Qe.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":Ze=ke(Ze),Qe.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":Ze=Ze.split("").map(function(en){return("0"+en.charCodeAt().toString(16)).slice(-2)}).join("")+">",Qe.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":Ze=Ge(Ze),Qe.push("/FlateDecode");break;default:throw new Error('The filter: "'+je[Ve]+'" is not implemented')}return{data:Ze,reverseChain:Qe.reverse().join(" ")}}}(E.API),function(Oe){Oe.loadFile=function(e,t,ke){return function(Ge,Be,je){Be=Be!==!1,je=typeof je=="function"?je:function(){};var Ve=void 0;try{Ve=function(Ze,Qe,en){var tn=new XMLHttpRequest,an=0,cn=function(un){var dn=un.length,fn=[],pn=String.fromCharCode;for(an=0;an<dn;an+=1)fn.push(pn(255&un.charCodeAt(an)));return fn.join("")};if(tn.open("GET",Ze,!Qe),tn.overrideMimeType("text/plain; charset=x-user-defined"),Qe===!1&&(tn.onload=function(){tn.status===200?en(cn(this.responseText)):en(void 0)}),tn.send(null),Qe&&tn.status===200)return cn(tn.responseText)}(Ge,Be,je)}catch{}return Ve}(e,t,ke)},Oe.loadImageFile=Oe.loadFile}(E.API),function(Oe){function e(){return(n.html2canvas?Promise.resolve(n.html2canvas):__vitePreload(()=>import("./html2canvas.esm-DtF4syFK.js"),[])).catch(function(je){return Promise.reject(new Error("Could not load html2canvas: "+je))}).then(function(je){return je.default?je.default:je})}function t(){return(n.DOMPurify?Promise.resolve(n.DOMPurify):__vitePreload(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(je){return Promise.reject(new Error("Could not load dompurify: "+je))}).then(function(je){return je.default?je.default:je})}var ke=function(je){var Ve=_typeof(je);return Ve==="undefined"?"undefined":Ve==="string"||je instanceof String?"string":Ve==="number"||je instanceof Number?"number":Ve==="function"||je instanceof Function?"function":je&&je.constructor===Array?"array":je&&je.nodeType===1?"element":Ve==="object"?"object":"unknown"},Ge=function(je,Ve){var Ze=document.createElement(je);for(var Qe in Ve.className&&(Ze.className=Ve.className),Ve.innerHTML&&Ve.dompurify&&(Ze.innerHTML=Ve.dompurify.sanitize(Ve.innerHTML)),Ve.style)Ze.style[Qe]=Ve.style[Qe];return Ze},Be=function je(Ve){var Ze=Object.assign(je.convert(Promise.resolve()),JSON.parse(JSON.stringify(je.template))),Qe=je.convert(Promise.resolve(),Ze);return Qe=(Qe=Qe.setProgress(1,je,1,[je])).set(Ve)};(Be.prototype=Object.create(Promise.prototype)).constructor=Be,Be.convert=function(je,Ve){return je.__proto__=Ve||Be.prototype,je},Be.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},Be.prototype.from=function(je,Ve){return this.then(function(){switch(Ve=Ve||function(Ze){switch(ke(Ze)){case"string":return"string";case"element":return Ze.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(je)){case"string":return this.then(t).then(function(Ze){return this.set({src:Ge("div",{innerHTML:je,dompurify:Ze})})});case"element":return this.set({src:je});case"canvas":return this.set({canvas:je});case"img":return this.set({img:je});default:return this.error("Unknown source type.")}})},Be.prototype.to=function(je){switch(je){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},Be.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var je={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},Ve=function Ze(Qe,en){for(var tn=Qe.nodeType===3?document.createTextNode(Qe.nodeValue):Qe.cloneNode(!1),an=Qe.firstChild;an;an=an.nextSibling)en!==!0&&an.nodeType===1&&an.nodeName==="SCRIPT"||tn.appendChild(Ze(an,en));return Qe.nodeType===1&&(Qe.nodeName==="CANVAS"?(tn.width=Qe.width,tn.height=Qe.height,tn.getContext("2d").drawImage(Qe,0,0)):Qe.nodeName!=="TEXTAREA"&&Qe.nodeName!=="SELECT"||(tn.value=Qe.value),tn.addEventListener("load",function(){tn.scrollTop=Qe.scrollTop,tn.scrollLeft=Qe.scrollLeft},!0)),tn}(this.prop.src,this.opt.html2canvas.javascriptEnabled);Ve.tagName==="BODY"&&(je.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=Ge("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=Ge("div",{className:"html2pdf__container",style:je}),this.prop.container.appendChild(Ve),this.prop.container.firstChild.appendChild(Ge("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},Be.prototype.toCanvas=function(){var je=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(je).then(e).then(function(Ve){var Ze=Object.assign({},this.opt.html2canvas);return delete Ze.onrendered,Ve(this.prop.container,Ze)}).then(function(Ve){(this.opt.html2canvas.onrendered||function(){})(Ve),this.prop.canvas=Ve,document.body.removeChild(this.prop.overlay)})},Be.prototype.toContext2d=function(){var je=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(je).then(e).then(function(Ve){var Ze=this.opt.jsPDF,Qe=this.opt.fontFaces,en=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,tn=Object.assign({async:!0,allowTaint:!0,scale:en,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete tn.onrendered,Ze.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,Ze.context2d.posX=this.opt.x,Ze.context2d.posY=this.opt.y,Ze.context2d.margin=this.opt.margin,Ze.context2d.fontFaces=Qe,Qe)for(var an=0;an<Qe.length;++an){var cn=Qe[an],un=cn.src.find(function(dn){return dn.format==="truetype"});un&&Ze.addFont(un.url,cn.ref.name,cn.ref.style)}return tn.windowHeight=tn.windowHeight||0,tn.windowHeight=tn.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):tn.windowHeight,Ze.context2d.save(!0),Ve(this.prop.container,tn)}).then(function(Ve){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(Ve),this.prop.canvas=Ve,document.body.removeChild(this.prop.overlay)})},Be.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var je=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=je})},Be.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},Be.prototype.output=function(je,Ve,Ze){return(Ze=Ze||"pdf").toLowerCase()==="img"||Ze.toLowerCase()==="image"?this.outputImg(je,Ve):this.outputPdf(je,Ve)},Be.prototype.outputPdf=function(je,Ve){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(je,Ve)})},Be.prototype.outputImg=function(je){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(je){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+je+'" is not supported.'}})},Be.prototype.save=function(je){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(je?{filename:je}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},Be.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},Be.prototype.set=function(je){if(ke(je)!=="object")return this;var Ve=Object.keys(je||{}).map(function(Ze){if(Ze in Be.template.prop)return function(){this.prop[Ze]=je[Ze]};switch(Ze){case"margin":return this.setMargin.bind(this,je.margin);case"jsPDF":return function(){return this.opt.jsPDF=je.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,je.pageSize);default:return function(){this.opt[Ze]=je[Ze]}}},this);return this.then(function(){return this.thenList(Ve)})},Be.prototype.get=function(je,Ve){return this.then(function(){var Ze=je in Be.template.prop?this.prop[je]:this.opt[je];return Ve?Ve(Ze):Ze})},Be.prototype.setMargin=function(je){return this.then(function(){switch(ke(je)){case"number":je=[je,je,je,je];case"array":if(je.length===2&&(je=[je[0],je[1],je[0],je[1]]),je.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=je}).then(this.setPageSize)},Be.prototype.setPageSize=function(je){function Ve(Ze,Qe){return Math.floor(Ze*Qe/72*96)}return this.then(function(){(je=je||E.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(je.inner={width:je.width-this.opt.margin[1]-this.opt.margin[3],height:je.height-this.opt.margin[0]-this.opt.margin[2]},je.inner.px={width:Ve(je.inner.width,je.k),height:Ve(je.inner.height,je.k)},je.inner.ratio=je.inner.height/je.inner.width),this.prop.pageSize=je})},Be.prototype.setProgress=function(je,Ve,Ze,Qe){return je!=null&&(this.progress.val=je),Ve!=null&&(this.progress.state=Ve),Ze!=null&&(this.progress.n=Ze),Qe!=null&&(this.progress.stack=Qe),this.progress.ratio=this.progress.val/this.progress.state,this},Be.prototype.updateProgress=function(je,Ve,Ze,Qe){return this.setProgress(je?this.progress.val+je:null,Ve||null,Ze?this.progress.n+Ze:null,Qe?this.progress.stack.concat(Qe):null)},Be.prototype.then=function(je,Ve){var Ze=this;return this.thenCore(je,Ve,function(Qe,en){return Ze.updateProgress(null,null,1,[Qe]),Promise.prototype.then.call(this,function(tn){return Ze.updateProgress(null,Qe),tn}).then(Qe,en).then(function(tn){return Ze.updateProgress(1),tn})})},Be.prototype.thenCore=function(je,Ve,Ze){Ze=Ze||Promise.prototype.then,je&&(je=je.bind(this)),Ve&&(Ve=Ve.bind(this));var Qe=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:Be.convert(Object.assign({},this),Promise.prototype),en=Ze.call(Qe,je,Ve);return Be.convert(en,this.__proto__)},Be.prototype.thenExternal=function(je,Ve){return Promise.prototype.then.call(this,je,Ve)},Be.prototype.thenList=function(je){var Ve=this;return je.forEach(function(Ze){Ve=Ve.thenCore(Ze)}),Ve},Be.prototype.catch=function(je){je&&(je=je.bind(this));var Ve=Promise.prototype.catch.call(this,je);return Be.convert(Ve,this)},Be.prototype.catchExternal=function(je){return Promise.prototype.catch.call(this,je)},Be.prototype.error=function(je){return this.then(function(){throw new Error(je)})},Be.prototype.using=Be.prototype.set,Be.prototype.saveAs=Be.prototype.save,Be.prototype.export=Be.prototype.output,Be.prototype.run=Be.prototype.then,E.getPageSize=function(je,Ve,Ze){if(_typeof(je)==="object"){var Qe=je;je=Qe.orientation,Ve=Qe.unit||Ve,Ze=Qe.format||Ze}Ve=Ve||"mm",Ze=Ze||"a4",je=(""+(je||"P")).toLowerCase();var en,tn=(""+Ze).toLowerCase(),an={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(Ve){case"pt":en=1;break;case"mm":en=72/25.4;break;case"cm":en=72/2.54;break;case"in":en=72;break;case"px":en=.75;break;case"pc":case"em":en=12;break;case"ex":en=6;break;default:throw"Invalid unit: "+Ve}var cn,un=0,dn=0;if(an.hasOwnProperty(tn))un=an[tn][1]/en,dn=an[tn][0]/en;else try{un=Ze[1],dn=Ze[0]}catch{throw new Error("Invalid format: "+Ze)}if(je==="p"||je==="portrait")je="p",dn>un&&(cn=dn,dn=un,un=cn);else{if(je!=="l"&&je!=="landscape")throw"Invalid orientation: "+je;je="l",un>dn&&(cn=dn,dn=un,un=cn)}return{width:dn,height:un,unit:Ve,k:en,orientation:je}},Oe.html=function(je,Ve){(Ve=Ve||{}).callback=Ve.callback||function(){},Ve.html2canvas=Ve.html2canvas||{},Ve.html2canvas.canvas=Ve.html2canvas.canvas||this.canvas,Ve.jsPDF=Ve.jsPDF||this,Ve.fontFaces=Ve.fontFaces?Ve.fontFaces.map(jt):null;var Ze=new Be(Ve);return Ve.worker?Ze:Ze.from(je).doCallback()}}(E.API),E.API.addJS=function(Oe){return Ht=Oe,this.internal.events.subscribe("postPutResources",function(){Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ut+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),zt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ht+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Ut!==void 0&&zt!==void 0&&this.internal.out("/Names <</JavaScript "+Ut+" 0 R>>")}),this},function(Oe){var e;Oe.events.push(["postPutResources",function(){var t=this,ke=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var Ge=t.outline.render().split(/\r\n/),Be=0;Be<Ge.length;Be++){var je=Ge[Be],Ve=ke.exec(je);if(Ve!=null){var Ze=Ve[1];t.internal.newObjectDeferredBegin(Ze,!1)}t.internal.write(je)}if(this.outline.createNamedDestinations){var Qe=this.internal.pages.length,en=[];for(Be=0;Be<Qe;Be++){var tn=t.internal.newObject();en.push(tn);var an=t.internal.getPageInfo(Be+1);t.internal.write("<< /D["+an.objId+" 0 R /XYZ null null null]>> endobj")}var cn=t.internal.newObject();for(t.internal.write("<< /Names [ "),Be=0;Be<en.length;Be++)t.internal.write("(page_"+(Be+1)+")"+en[Be]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+cn+" 0 R"),t.internal.write(">>","endobj")}}]),Oe.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),Oe.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(ke,Ge,Be){var je={title:Ge,options:Be,children:[]};return ke==null&&(ke=this.root),ke.children.push(je),je},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(ke){ke.id=t.internal.newObjectDeferred();for(var Ge=0;Ge<ke.children.length;Ge++)this.genIds_r(ke.children[Ge])},t.outline.renderRoot=function(ke){this.objStart(ke),this.line("/Type /Outlines"),ke.children.length>0&&(this.line("/First "+this.makeRef(ke.children[0])),this.line("/Last "+this.makeRef(ke.children[ke.children.length-1]))),this.line("/Count "+this.count_r({count:0},ke)),this.objEnd()},t.outline.renderItems=function(ke){for(var Ge=this.ctx.pdf.internal.getVerticalCoordinateString,Be=0;Be<ke.children.length;Be++){var je=ke.children[Be];this.objStart(je),this.line("/Title "+this.makeString(je.title)),this.line("/Parent "+this.makeRef(ke)),Be>0&&this.line("/Prev "+this.makeRef(ke.children[Be-1])),Be<ke.children.length-1&&this.line("/Next "+this.makeRef(ke.children[Be+1])),je.children.length>0&&(this.line("/First "+this.makeRef(je.children[0])),this.line("/Last "+this.makeRef(je.children[je.children.length-1])));var Ve=this.count=this.count_r({count:0},je);if(Ve>0&&this.line("/Count "+Ve),je.options&&je.options.pageNumber){var Ze=t.internal.getPageInfo(je.options.pageNumber);this.line("/Dest ["+Ze.objId+" 0 R /XYZ 0 "+Ge(0)+" 0]")}this.objEnd()}for(var Qe=0;Qe<ke.children.length;Qe++)this.renderItems(ke.children[Qe])},t.outline.line=function(ke){this.ctx.val+=ke+`\r
`},t.outline.makeRef=function(ke){return ke.id+" 0 R"},t.outline.makeString=function(ke){return"("+t.internal.pdfEscape(ke)+")"},t.outline.objStart=function(ke){this.ctx.val+=`\r
`+ke.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(ke,Ge){for(var Be=0;Be<Ge.children.length;Be++)ke.count++,this.count_r(ke,Ge.children[Be]);return ke.count}}])}(E.API),function(Oe){var e=[192,193,194,195,196,197,198,199];Oe.processJPEG=function(t,ke,Ge,Be,je,Ve){var Ze,Qe=this.decode.DCT_DECODE,en=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=je||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(Ze=function(tn){for(var an,cn=256*tn.charCodeAt(4)+tn.charCodeAt(5),un=tn.length,dn={width:0,height:0,numcomponents:1},fn=4;fn<un;fn+=2){if(fn+=cn,e.indexOf(tn.charCodeAt(fn+1))!==-1){an=256*tn.charCodeAt(fn+5)+tn.charCodeAt(fn+6),dn={width:256*tn.charCodeAt(fn+7)+tn.charCodeAt(fn+8),height:an,numcomponents:tn.charCodeAt(fn+9)};break}cn=256*tn.charCodeAt(fn+2)+tn.charCodeAt(fn+3)}return dn}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:Ve=this.color_spaces.DEVICE_GRAY;break;case 4:Ve=this.color_spaces.DEVICE_CMYK;break;case 3:Ve=this.color_spaces.DEVICE_RGB}en={data:t,width:Ze.width,height:Ze.height,colorSpace:Ve,bitsPerComponent:8,filter:Qe,index:ke,alias:Ge}}return en}}(E.API);var Vt,Gt,Yt,Jt,Xt,Kt=function(){var Oe,e,t;function ke(Be){var je,Ve,Ze,Qe,en,tn,an,cn,un,dn,fn,pn,gn,yn;for(this.data=Be,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},tn=null;;){switch(je=this.readUInt32(),un=(function(){var vn,An;for(An=[],vn=0;vn<4;++vn)An.push(String.fromCharCode(this.data[this.pos++]));return An}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(je);break;case"fcTL":tn&&this.animation.frames.push(tn),this.pos+=4,tn={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},en=this.readUInt16(),Qe=this.readUInt16()||100,tn.delay=1e3*en/Qe,tn.disposeOp=this.data[this.pos++],tn.blendOp=this.data[this.pos++],tn.data=[];break;case"IDAT":case"fdAT":for(un==="fdAT"&&(this.pos+=4,je-=4),Be=(tn!=null?tn.data:void 0)||this.imgData,pn=0;0<=je?pn<je:pn>je;0<=je?++pn:--pn)Be.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(Ze=this.palette.length/3,this.transparency.indexed=this.read(je),this.transparency.indexed.length>Ze)throw new Error("More transparent colors than palette size");if((dn=Ze-this.transparency.indexed.length)>0)for(gn=0;0<=dn?gn<dn:gn>dn;0<=dn?++gn:--gn)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(je)[0];break;case 2:this.transparency.rgb=this.read(je)}break;case"tEXt":an=(fn=this.read(je)).indexOf(0),cn=String.fromCharCode.apply(String,fn.slice(0,an)),this.text[cn]=String.fromCharCode.apply(String,fn.slice(an+1));break;case"IEND":return tn&&this.animation.frames.push(tn),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(yn=this.colorType)===4||yn===6,Ve=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*Ve,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=je}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}ke.prototype.read=function(Be){var je,Ve;for(Ve=[],je=0;0<=Be?je<Be:je>Be;0<=Be?++je:--je)Ve.push(this.data[this.pos++]);return Ve},ke.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},ke.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},ke.prototype.decodePixels=function(Be){var je=this.pixelBitlength/8,Ve=new Uint8Array(this.width*this.height*je),Ze=0,Qe=this;if(Be==null&&(Be=this.imgData),Be.length===0)return new Uint8Array(0);function en(tn,an,cn,un){var dn,fn,pn,gn,yn,vn,An,xn,wn,bn,Mn,Pn,En,Cn,Rn,Tn,Nn,Gn,zn,$n,Qn,Hn=Math.ceil((Qe.width-tn)/cn),Ni=Math.ceil((Qe.height-an)/un),On=Qe.width==Hn&&Qe.height==Ni;for(Cn=je*Hn,Pn=On?Ve:new Uint8Array(Cn*Ni),vn=Be.length,En=0,fn=0;En<Ni&&Ze<vn;){switch(Be[Ze++]){case 0:for(gn=Nn=0;Nn<Cn;gn=Nn+=1)Pn[fn++]=Be[Ze++];break;case 1:for(gn=Gn=0;Gn<Cn;gn=Gn+=1)dn=Be[Ze++],yn=gn<je?0:Pn[fn-je],Pn[fn++]=(dn+yn)%256;break;case 2:for(gn=zn=0;zn<Cn;gn=zn+=1)dn=Be[Ze++],pn=(gn-gn%je)/je,Rn=En&&Pn[(En-1)*Cn+pn*je+gn%je],Pn[fn++]=(Rn+dn)%256;break;case 3:for(gn=$n=0;$n<Cn;gn=$n+=1)dn=Be[Ze++],pn=(gn-gn%je)/je,yn=gn<je?0:Pn[fn-je],Rn=En&&Pn[(En-1)*Cn+pn*je+gn%je],Pn[fn++]=(dn+Math.floor((yn+Rn)/2))%256;break;case 4:for(gn=Qn=0;Qn<Cn;gn=Qn+=1)dn=Be[Ze++],pn=(gn-gn%je)/je,yn=gn<je?0:Pn[fn-je],En===0?Rn=Tn=0:(Rn=Pn[(En-1)*Cn+pn*je+gn%je],Tn=pn&&Pn[(En-1)*Cn+(pn-1)*je+gn%je]),An=yn+Rn-Tn,xn=Math.abs(An-yn),bn=Math.abs(An-Rn),Mn=Math.abs(An-Tn),wn=xn<=bn&&xn<=Mn?yn:bn<=Mn?Rn:Tn,Pn[fn++]=(dn+wn)%256;break;default:throw new Error("Invalid filter algorithm: "+Be[Ze-1])}if(!On){var qn=((an+En*un)*Qe.width+tn)*je,Un=En*Cn;for(gn=0;gn<Hn;gn+=1){for(var Ci=0;Ci<je;Ci+=1)Ve[qn++]=Pn[Un++];qn+=(cn-1)*je}}En++}}return Be=unzlibSync(Be),Qe.interlaceMethod==1?(en(0,0,8,8),en(4,0,8,8),en(0,4,4,8),en(2,0,4,4),en(0,2,2,4),en(1,0,2,2),en(0,1,1,2)):en(0,0,1,1),Ve},ke.prototype.decodePalette=function(){var Be,je,Ve,Ze,Qe,en,tn,an,cn;for(Ve=this.palette,en=this.transparency.indexed||[],Qe=new Uint8Array((en.length||0)+Ve.length),Ze=0,Be=0,je=tn=0,an=Ve.length;tn<an;je=tn+=3)Qe[Ze++]=Ve[je],Qe[Ze++]=Ve[je+1],Qe[Ze++]=Ve[je+2],Qe[Ze++]=(cn=en[Be++])!=null?cn:255;return Qe},ke.prototype.copyToImageData=function(Be,je){var Ve,Ze,Qe,en,tn,an,cn,un,dn,fn,pn;if(Ze=this.colors,dn=null,Ve=this.hasAlphaChannel,this.palette.length&&(dn=(pn=this._decodedPalette)!=null?pn:this._decodedPalette=this.decodePalette(),Ze=4,Ve=!0),un=(Qe=Be.data||Be).length,tn=dn||je,en=an=0,Ze===1)for(;en<un;)cn=dn?4*je[en/4]:an,fn=tn[cn++],Qe[en++]=fn,Qe[en++]=fn,Qe[en++]=fn,Qe[en++]=Ve?tn[cn++]:255,an=cn;else for(;en<un;)cn=dn?4*je[en/4]:an,Qe[en++]=tn[cn++],Qe[en++]=tn[cn++],Qe[en++]=tn[cn++],Qe[en++]=Ve?tn[cn++]:255,an=cn},ke.prototype.decode=function(){var Be;return Be=new Uint8Array(this.width*this.height*4),this.copyToImageData(Be,this.decodePixels()),Be};var Ge=function(){if(Object.prototype.toString.call(n)==="[object Window]"){try{e=n.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return Ge(),Oe=function(Be){var je;if(Ge()===!0)return t.width=Be.width,t.height=Be.height,t.clearRect(0,0,Be.width,Be.height),t.putImageData(Be,0,0),(je=new Image).src=e.toDataURL(),je;throw new Error("This method requires a Browser with Canvas-capability.")},ke.prototype.decodeFrames=function(Be){var je,Ve,Ze,Qe,en,tn,an,cn;if(this.animation){for(cn=[],Ve=en=0,tn=(an=this.animation.frames).length;en<tn;Ve=++en)je=an[Ve],Ze=Be.createImageData(je.width,je.height),Qe=this.decodePixels(new Uint8Array(je.data)),this.copyToImageData(Ze,Qe),je.imageData=Ze,cn.push(je.image=Oe(Ze));return cn}},ke.prototype.renderFrame=function(Be,je){var Ve,Ze,Qe;return Ve=(Ze=this.animation.frames)[je],Qe=Ze[je-1],je===0&&Be.clearRect(0,0,this.width,this.height),(Qe!=null?Qe.disposeOp:void 0)===1?Be.clearRect(Qe.xOffset,Qe.yOffset,Qe.width,Qe.height):(Qe!=null?Qe.disposeOp:void 0)===2&&Be.putImageData(Qe.imageData,Qe.xOffset,Qe.yOffset),Ve.blendOp===0&&Be.clearRect(Ve.xOffset,Ve.yOffset,Ve.width,Ve.height),Be.drawImage(Ve.image,Ve.xOffset,Ve.yOffset)},ke.prototype.animate=function(Be){var je,Ve,Ze,Qe,en,tn,an=this;return Ve=0,tn=this.animation,Qe=tn.numFrames,Ze=tn.frames,en=tn.numPlays,(je=function(){var cn,un;if(cn=Ve++%Qe,un=Ze[cn],an.renderFrame(Be,cn),Qe>1&&Ve/Qe<en)return an.animation._timeout=setTimeout(je,un.delay)})()},ke.prototype.stopAnimation=function(){var Be;return clearTimeout((Be=this.animation)!=null?Be._timeout:void 0)},ke.prototype.render=function(Be){var je,Ve;return Be._png&&Be._png.stopAnimation(),Be._png=this,Be.width=this.width,Be.height=this.height,je=Be.getContext("2d"),this.animation?(this.decodeFrames(je),this.animate(je)):(Ve=je.createImageData(this.width,this.height),this.copyToImageData(Ve,this.decodePixels()),je.putImageData(Ve,0,0))},ke}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Zt(Oe){var e=0;if(Oe[e++]!==71||Oe[e++]!==73||Oe[e++]!==70||Oe[e++]!==56||(Oe[e++]+1&253)!=56||Oe[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=Oe[e++]|Oe[e++]<<8,ke=Oe[e++]|Oe[e++]<<8,Ge=Oe[e++],Be=Ge>>7,je=1<<(7&Ge)+1;Oe[e++],Oe[e++];var Ve=null,Ze=null;Be&&(Ve=e,Ze=je,e+=3*je);var Qe=!0,en=[],tn=0,an=null,cn=0,un=null;for(this.width=t,this.height=ke;Qe&&e<Oe.length;)switch(Oe[e++]){case 33:switch(Oe[e++]){case 255:if(Oe[e]!==11||Oe[e+1]==78&&Oe[e+2]==69&&Oe[e+3]==84&&Oe[e+4]==83&&Oe[e+5]==67&&Oe[e+6]==65&&Oe[e+7]==80&&Oe[e+8]==69&&Oe[e+9]==50&&Oe[e+10]==46&&Oe[e+11]==48&&Oe[e+12]==3&&Oe[e+13]==1&&Oe[e+16]==0)e+=14,un=Oe[e++]|Oe[e++]<<8,e++;else for(e+=12;;){if(!((En=Oe[e++])>=0))throw Error("Invalid block size");if(En===0)break;e+=En}break;case 249:if(Oe[e++]!==4||Oe[e+4]!==0)throw new Error("Invalid graphics extension block.");var dn=Oe[e++];tn=Oe[e++]|Oe[e++]<<8,an=Oe[e++],!(1&dn)&&(an=null),cn=dn>>2&7,e++;break;case 254:for(;;){if(!((En=Oe[e++])>=0))throw Error("Invalid block size");if(En===0)break;e+=En}break;default:throw new Error("Unknown graphic control label: 0x"+Oe[e-1].toString(16))}break;case 44:var fn=Oe[e++]|Oe[e++]<<8,pn=Oe[e++]|Oe[e++]<<8,gn=Oe[e++]|Oe[e++]<<8,yn=Oe[e++]|Oe[e++]<<8,vn=Oe[e++],An=vn>>6&1,xn=1<<(7&vn)+1,wn=Ve,bn=Ze,Mn=!1;vn>>7&&(Mn=!0,wn=e,bn=xn,e+=3*xn);var Pn=e;for(e++;;){var En;if(!((En=Oe[e++])>=0))throw Error("Invalid block size");if(En===0)break;e+=En}en.push({x:fn,y:pn,width:gn,height:yn,has_local_palette:Mn,palette_offset:wn,palette_size:bn,data_offset:Pn,data_length:e-Pn,transparent_index:an,interlaced:!!An,delay:tn,disposal:cn});break;case 59:Qe=!1;break;default:throw new Error("Unknown gif block: 0x"+Oe[e-1].toString(16))}this.numFrames=function(){return en.length},this.loopCount=function(){return un},this.frameInfo=function(Cn){if(Cn<0||Cn>=en.length)throw new Error("Frame index out of range.");return en[Cn]},this.decodeAndBlitFrameBGRA=function(Cn,Rn){var Tn=this.frameInfo(Cn),Nn=Tn.width*Tn.height,Gn=new Uint8Array(Nn);$t(Oe,Tn.data_offset,Gn,Nn);var zn=Tn.palette_offset,$n=Tn.transparent_index;$n===null&&($n=256);var Qn=Tn.width,Hn=t-Qn,Ni=Qn,On=4*(Tn.y*t+Tn.x),qn=4*((Tn.y+Tn.height)*t+Tn.x),Un=On,Ci=4*Hn;Tn.interlaced===!0&&(Ci+=4*t*7);for(var Si=8,_i=0,Ii=Gn.length;_i<Ii;++_i){var Li=Gn[_i];if(Ni===0&&(Ni=Qn,(Un+=Ci)>=qn&&(Ci=4*Hn+4*t*(Si-1),Un=On+(Qn+Hn)*(Si<<1),Si>>=1)),Li===$n)Un+=4;else{var Ri=Oe[zn+3*Li],tr=Oe[zn+3*Li+1],Fr=Oe[zn+3*Li+2];Rn[Un++]=Fr,Rn[Un++]=tr,Rn[Un++]=Ri,Rn[Un++]=255}--Ni}},this.decodeAndBlitFrameRGBA=function(Cn,Rn){var Tn=this.frameInfo(Cn),Nn=Tn.width*Tn.height,Gn=new Uint8Array(Nn);$t(Oe,Tn.data_offset,Gn,Nn);var zn=Tn.palette_offset,$n=Tn.transparent_index;$n===null&&($n=256);var Qn=Tn.width,Hn=t-Qn,Ni=Qn,On=4*(Tn.y*t+Tn.x),qn=4*((Tn.y+Tn.height)*t+Tn.x),Un=On,Ci=4*Hn;Tn.interlaced===!0&&(Ci+=4*t*7);for(var Si=8,_i=0,Ii=Gn.length;_i<Ii;++_i){var Li=Gn[_i];if(Ni===0&&(Ni=Qn,(Un+=Ci)>=qn&&(Ci=4*Hn+4*t*(Si-1),Un=On+(Qn+Hn)*(Si<<1),Si>>=1)),Li===$n)Un+=4;else{var Ri=Oe[zn+3*Li],tr=Oe[zn+3*Li+1],Fr=Oe[zn+3*Li+2];Rn[Un++]=Ri,Rn[Un++]=tr,Rn[Un++]=Fr,Rn[Un++]=255}--Ni}}}function $t(Oe,e,t,ke){for(var Ge=Oe[e++],Be=1<<Ge,je=Be+1,Ve=je+1,Ze=Ge+1,Qe=(1<<Ze)-1,en=0,tn=0,an=0,cn=Oe[e++],un=new Int32Array(4096),dn=null;;){for(;en<16&&cn!==0;)tn|=Oe[e++]<<en,en+=8,cn===1?cn=Oe[e++]:--cn;if(en<Ze)break;var fn=tn&Qe;if(tn>>=Ze,en-=Ze,fn!==Be){if(fn===je)break;for(var pn=fn<Ve?fn:dn,gn=0,yn=pn;yn>Be;)yn=un[yn]>>8,++gn;var vn=yn;if(an+gn+(pn!==fn?1:0)>ke)return void a.log("Warning, gif stream longer than expected.");t[an++]=vn;var An=an+=gn;for(pn!==fn&&(t[an++]=vn),yn=pn;gn--;)yn=un[yn],t[--An]=255&yn,yn>>=8;dn!==null&&Ve<4096&&(un[Ve++]=dn<<8|vn,Ve>=Qe+1&&Ze<12&&(++Ze,Qe=Qe<<1|1)),dn=fn}else Ve=je+1,Qe=(1<<(Ze=Ge+1))-1,dn=null}return an!==ke&&a.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Qt(Oe){var e,t,ke,Ge,Be,je=Math.floor,Ve=new Array(64),Ze=new Array(64),Qe=new Array(64),en=new Array(64),tn=new Array(65535),an=new Array(65535),cn=new Array(64),un=new Array(64),dn=[],fn=0,pn=7,gn=new Array(64),yn=new Array(64),vn=new Array(64),An=new Array(256),xn=new Array(2048),wn=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],bn=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Mn=[0,1,2,3,4,5,6,7,8,9,10,11],Pn=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],En=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],Cn=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Rn=[0,1,2,3,4,5,6,7,8,9,10,11],Tn=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Nn=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Gn(On,qn){for(var Un=0,Ci=0,Si=new Array,_i=1;_i<=16;_i++){for(var Ii=1;Ii<=On[_i];Ii++)Si[qn[Ci]]=[],Si[qn[Ci]][0]=Un,Si[qn[Ci]][1]=_i,Ci++,Un++;Un*=2}return Si}function zn(On){for(var qn=On[0],Un=On[1]-1;Un>=0;)qn&1<<Un&&(fn|=1<<pn),Un--,--pn<0&&(fn==255?($n(255),$n(0)):$n(fn),pn=7,fn=0)}function $n(On){dn.push(On)}function Qn(On){$n(On>>8&255),$n(255&On)}function Hn(On,qn,Un,Ci,Si){for(var _i,Ii=Si[0],Li=Si[240],Ri=function(Di,zi){var Bi,Gi,Ti,Mi,Oi,Xi,ar,Pr,Rr,Us,Vr=0;for(Rr=0;Rr<8;++Rr){Bi=Di[Vr],Gi=Di[Vr+1],Ti=Di[Vr+2],Mi=Di[Vr+3],Oi=Di[Vr+4],Xi=Di[Vr+5],ar=Di[Vr+6];var ro=Bi+(Pr=Di[Vr+7]),Js=Bi-Pr,fo=Gi+ar,lo=Gi-ar,Ks=Ti+Xi,oo=Ti-Xi,no=Mi+Oi,bo=Mi-Oi,co=ro+no,Ko=ro-no,aa=fo+Ks,ho=fo-Ks;Di[Vr]=co+aa,Di[Vr+4]=co-aa;var io=.707106781*(ho+Ko);Di[Vr+2]=Ko+io,Di[Vr+6]=Ko-io;var po=.382683433*((co=bo+oo)-(ho=lo+Js)),cc=.5411961*co+po,jo=1.306562965*ho+po,Ma=.707106781*(aa=oo+lo),uo=Js+Ma,to=Js-Ma;Di[Vr+5]=to+cc,Di[Vr+3]=to-cc,Di[Vr+1]=uo+jo,Di[Vr+7]=uo-jo,Vr+=8}for(Vr=0,Rr=0;Rr<8;++Rr){Bi=Di[Vr],Gi=Di[Vr+8],Ti=Di[Vr+16],Mi=Di[Vr+24],Oi=Di[Vr+32],Xi=Di[Vr+40],ar=Di[Vr+48];var ta=Bi+(Pr=Di[Vr+56]),ya=Bi-Pr,Qo=Gi+ar,go=Gi-ar,Oo=Ti+Xi,ko=Ti-Xi,Pl=Mi+Oi,Za=Mi-Oi,Tl=ta+Pl,ic=ta-Pl,Rl=Qo+Oo,Va=Qo-Oo;Di[Vr]=Tl+Rl,Di[Vr+32]=Tl-Rl;var za=.707106781*(Va+ic);Di[Vr+16]=ic+za,Di[Vr+48]=ic-za;var Sc=.382683433*((Tl=Za+ko)-(Va=go+ya)),tu=.5411961*Tl+Sc,hu=1.306562965*Va+Sc,fu=.707106781*(Rl=ko+go),pu=ya+fu,gu=ya-fu;Di[Vr+40]=gu+tu,Di[Vr+24]=gu-tu,Di[Vr+8]=pu+hu,Di[Vr+56]=pu-hu,Vr++}for(Rr=0;Rr<64;++Rr)Us=Di[Rr]*zi[Rr],cn[Rr]=Us>0?Us+.5|0:Us-.5|0;return cn}(On,qn),tr=0;tr<64;++tr)un[wn[tr]]=Ri[tr];var Fr=un[0]-Un;Un=un[0],Fr==0?zn(Ci[0]):(zn(Ci[an[_i=32767+Fr]]),zn(tn[_i]));for(var Bn=63;Bn>0&&un[Bn]==0;)Bn--;if(Bn==0)return zn(Ii),Un;for(var Ai,Kn=1;Kn<=Bn;){for(var Fn=Kn;un[Kn]==0&&Kn<=Bn;)++Kn;var $i=Kn-Fn;if($i>=16){Ai=$i>>4;for(var Hi=1;Hi<=Ai;++Hi)zn(Li);$i&=15}_i=32767+un[Kn],zn(Si[($i<<4)+an[_i]]),zn(tn[_i]),Kn++}return Bn!=63&&zn(Ii),Un}function Ni(On){On=Math.min(Math.max(On,1),100),Be!=On&&(function(qn){for(var Un=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Ci=0;Ci<64;Ci++){var Si=je((Un[Ci]*qn+50)/100);Si=Math.min(Math.max(Si,1),255),Ve[wn[Ci]]=Si}for(var _i=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ii=0;Ii<64;Ii++){var Li=je((_i[Ii]*qn+50)/100);Li=Math.min(Math.max(Li,1),255),Ze[wn[Ii]]=Li}for(var Ri=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],tr=0,Fr=0;Fr<8;Fr++)for(var Bn=0;Bn<8;Bn++)Qe[tr]=1/(Ve[wn[tr]]*Ri[Fr]*Ri[Bn]*8),en[tr]=1/(Ze[wn[tr]]*Ri[Fr]*Ri[Bn]*8),tr++}(On<50?Math.floor(5e3/On):Math.floor(200-2*On)),Be=On)}this.encode=function(On,qn){qn&&Ni(qn),dn=new Array,fn=0,pn=7,Qn(65496),Qn(65504),Qn(16),$n(74),$n(70),$n(73),$n(70),$n(0),$n(1),$n(1),$n(0),Qn(1),Qn(1),$n(0),$n(0),function(){Qn(65499),Qn(132),$n(0);for(var Gi=0;Gi<64;Gi++)$n(Ve[Gi]);$n(1);for(var Ti=0;Ti<64;Ti++)$n(Ze[Ti])}(),function(Gi,Ti){Qn(65472),Qn(17),$n(8),Qn(Ti),Qn(Gi),$n(3),$n(1),$n(17),$n(0),$n(2),$n(17),$n(1),$n(3),$n(17),$n(1)}(On.width,On.height),function(){Qn(65476),Qn(418),$n(0);for(var Gi=0;Gi<16;Gi++)$n(bn[Gi+1]);for(var Ti=0;Ti<=11;Ti++)$n(Mn[Ti]);$n(16);for(var Mi=0;Mi<16;Mi++)$n(Pn[Mi+1]);for(var Oi=0;Oi<=161;Oi++)$n(En[Oi]);$n(1);for(var Xi=0;Xi<16;Xi++)$n(Cn[Xi+1]);for(var ar=0;ar<=11;ar++)$n(Rn[ar]);$n(17);for(var Pr=0;Pr<16;Pr++)$n(Tn[Pr+1]);for(var Rr=0;Rr<=161;Rr++)$n(Nn[Rr])}(),Qn(65498),Qn(12),$n(3),$n(1),$n(0),$n(2),$n(17),$n(3),$n(17),$n(0),$n(63),$n(0);var Un=0,Ci=0,Si=0;fn=0,pn=7,this.encode.displayName="_encode_";for(var _i,Ii,Li,Ri,tr,Fr,Bn,Ai,Kn,Fn=On.data,$i=On.width,Hi=On.height,Di=4*$i,zi=0;zi<Hi;){for(_i=0;_i<Di;){for(tr=Di*zi+_i,Bn=-1,Ai=0,Kn=0;Kn<64;Kn++)Fr=tr+(Ai=Kn>>3)*Di+(Bn=4*(7&Kn)),zi+Ai>=Hi&&(Fr-=Di*(zi+1+Ai-Hi)),_i+Bn>=Di&&(Fr-=_i+Bn-Di+4),Ii=Fn[Fr++],Li=Fn[Fr++],Ri=Fn[Fr++],gn[Kn]=(xn[Ii]+xn[Li+256>>0]+xn[Ri+512>>0]>>16)-128,yn[Kn]=(xn[Ii+768>>0]+xn[Li+1024>>0]+xn[Ri+1280>>0]>>16)-128,vn[Kn]=(xn[Ii+1280>>0]+xn[Li+1536>>0]+xn[Ri+1792>>0]>>16)-128;Un=Hn(gn,Qe,Un,e,ke),Ci=Hn(yn,en,Ci,t,Ge),Si=Hn(vn,en,Si,t,Ge),_i+=32}zi+=8}if(pn>=0){var Bi=[];Bi[1]=pn+1,Bi[0]=(1<<pn+1)-1,zn(Bi)}return Qn(65497),new Uint8Array(dn)},Oe=Oe||50,function(){for(var On=String.fromCharCode,qn=0;qn<256;qn++)An[qn]=On(qn)}(),e=Gn(bn,Mn),t=Gn(Cn,Rn),ke=Gn(Pn,En),Ge=Gn(Tn,Nn),function(){for(var On=1,qn=2,Un=1;Un<=15;Un++){for(var Ci=On;Ci<qn;Ci++)an[32767+Ci]=Un,tn[32767+Ci]=[],tn[32767+Ci][1]=Un,tn[32767+Ci][0]=Ci;for(var Si=-(qn-1);Si<=-On;Si++)an[32767+Si]=Un,tn[32767+Si]=[],tn[32767+Si][1]=Un,tn[32767+Si][0]=qn-1+Si;On<<=1,qn<<=1}}(),function(){for(var On=0;On<256;On++)xn[On]=19595*On,xn[On+256>>0]=38470*On,xn[On+512>>0]=7471*On+32768,xn[On+768>>0]=-11059*On,xn[On+1024>>0]=-21709*On,xn[On+1280>>0]=32768*On+8421375,xn[On+1536>>0]=-27439*On,xn[On+1792>>0]=-5329*On}(),Ni(Oe)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function te(Oe,e){if(this.pos=0,this.buffer=Oe,this.datav=new DataView(Oe.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ee(Oe){function e(bn){if(!bn)throw Error("assert :P")}function t(bn,Mn,Pn){for(var En=0;4>En;En++)if(bn[Mn+En]!=Pn.charCodeAt(En))return!0;return!1}function ke(bn,Mn,Pn,En,Cn){for(var Rn=0;Rn<Cn;Rn++)bn[Mn+Rn]=Pn[En+Rn]}function Ge(bn,Mn,Pn,En){for(var Cn=0;Cn<En;Cn++)bn[Mn+Cn]=Pn}function Be(bn){return new Int32Array(bn)}function je(bn,Mn){for(var Pn=[],En=0;En<bn;En++)Pn.push(new Mn);return Pn}function Ve(bn,Mn){var Pn=[];return function En(Cn,Rn,Tn){for(var Nn=Tn[Rn],Gn=0;Gn<Nn&&(Cn.push(Tn.length>Rn+1?[]:new Mn),!(Tn.length<Rn+1));Gn++)En(Cn[Gn],Rn+1,Tn)}(Pn,0,bn),Pn}var Ze=function(){var bn=this;function Mn(hn,mn){for(var Sn=1<<mn-1>>>0;hn&Sn;)Sn>>>=1;return Sn?(hn&Sn-1)+Sn:hn}function Pn(hn,mn,Sn,Ln,kn){e(!(Ln%Sn));do hn[mn+(Ln-=Sn)]=kn;while(0<Ln)}function En(hn,mn,Sn,Ln,kn){if(e(2328>=kn),512>=kn)var jn=Be(512);else if((jn=Be(kn))==null)return 0;return function(Vn,Wn,Jn,Ei,ji,Qi){var er,Yi,Xr=Wn,Nr=1<<Jn,Vi=Be(16),qi=Be(16);for(e(ji!=0),e(Ei!=null),e(Vn!=null),e(0<Jn),Yi=0;Yi<ji;++Yi){if(15<Ei[Yi])return 0;++Vi[Ei[Yi]]}if(Vi[0]==ji)return 0;for(qi[1]=0,er=1;15>er;++er){if(Vi[er]>1<<er)return 0;qi[er+1]=qi[er]+Vi[er]}for(Yi=0;Yi<ji;++Yi)er=Ei[Yi],0<Ei[Yi]&&(Qi[qi[er]++]=Yi);if(qi[15]==1)return(Ei=new Cn).g=0,Ei.value=Qi[0],Pn(Vn,Xr,1,Nr,Ei),Nr;var Hr,xs=-1,Yr=Nr-1,eo=0,Ws=1,ao=1,Zs=1<<Jn;for(Yi=0,er=1,ji=2;er<=Jn;++er,ji<<=1){if(Ws+=ao<<=1,0>(ao-=Vi[er]))return 0;for(;0<Vi[er];--Vi[er])(Ei=new Cn).g=er,Ei.value=Qi[Yi++],Pn(Vn,Xr+eo,ji,Zs,Ei),eo=Mn(eo,er)}for(er=Jn+1,ji=2;15>=er;++er,ji<<=1){if(Ws+=ao<<=1,0>(ao-=Vi[er]))return 0;for(;0<Vi[er];--Vi[er]){if(Ei=new Cn,(eo&Yr)!=xs){for(Xr+=Zs,Hr=1<<(xs=er)-Jn;15>xs&&!(0>=(Hr-=Vi[xs]));)++xs,Hr<<=1;Nr+=Zs=1<<(Hr=xs-Jn),Vn[Wn+(xs=eo&Yr)].g=Hr+Jn,Vn[Wn+xs].value=Xr-Wn-xs}Ei.g=er-Jn,Ei.value=Qi[Yi++],Pn(Vn,Xr+(eo>>Jn),ji,Zs,Ei),eo=Mn(eo,er)}}return Ws!=2*qi[15]-1?0:Nr}(hn,mn,Sn,Ln,kn,jn)}function Cn(){this.value=this.g=0}function Rn(){this.value=this.g=0}function Tn(){this.G=je(5,Cn),this.H=Be(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=je(Ha,Rn)}function Nn(hn,mn,Sn,Ln){e(hn!=null),e(mn!=null),e(2147483648>Ln),hn.Ca=254,hn.I=0,hn.b=-8,hn.Ka=0,hn.oa=mn,hn.pa=Sn,hn.Jd=mn,hn.Yc=Sn+Ln,hn.Zc=4<=Ln?Sn+Ln-4+1:Sn,_i(hn)}function Gn(hn,mn){for(var Sn=0;0<mn--;)Sn|=Li(hn,128)<<mn;return Sn}function zn(hn,mn){var Sn=Gn(hn,mn);return Ii(hn)?-Sn:Sn}function $n(hn,mn,Sn,Ln){var kn,jn=0;for(e(hn!=null),e(mn!=null),e(4294967288>Ln),hn.Sb=Ln,hn.Ra=0,hn.u=0,hn.h=0,4<Ln&&(Ln=4),kn=0;kn<Ln;++kn)jn+=mn[Sn+kn]<<8*kn;hn.Ra=jn,hn.bb=Ln,hn.oa=mn,hn.pa=Sn}function Qn(hn){for(;8<=hn.u&&hn.bb<hn.Sb;)hn.Ra>>>=8,hn.Ra+=hn.oa[hn.pa+hn.bb]<<Tu-8>>>0,++hn.bb,hn.u-=8;Un(hn)&&(hn.h=1,hn.u=0)}function Hn(hn,mn){if(e(0<=mn),!hn.h&&mn<=Lu){var Sn=qn(hn)&xu[mn];return hn.u+=mn,Qn(hn),Sn}return hn.h=1,hn.u=0}function Ni(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function On(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function qn(hn){return hn.Ra>>>(hn.u&Tu-1)>>>0}function Un(hn){return e(hn.bb<=hn.Sb),hn.h||hn.bb==hn.Sb&&hn.u>Tu}function Ci(hn,mn){hn.u=mn,hn.h=Un(hn)}function Si(hn){hn.u>=ad&&(e(hn.u>=ad),Qn(hn))}function _i(hn){e(hn!=null&&hn.oa!=null),hn.pa<hn.Zc?(hn.I=(hn.oa[hn.pa++]|hn.I<<8)>>>0,hn.b+=8):(e(hn!=null&&hn.oa!=null),hn.pa<hn.Yc?(hn.b+=8,hn.I=hn.oa[hn.pa++]|hn.I<<8):hn.Ka?hn.b=0:(hn.I<<=8,hn.b+=8,hn.Ka=1))}function Ii(hn){return Gn(hn,1)}function Li(hn,mn){var Sn=hn.Ca;0>hn.b&&_i(hn);var Ln=hn.b,kn=Sn*mn>>>8,jn=(hn.I>>>Ln>kn)+0;for(jn?(Sn-=kn,hn.I-=kn+1<<Ln>>>0):Sn=kn+1,Ln=Sn,kn=0;256<=Ln;)kn+=8,Ln>>=8;return Ln=7^kn+Vl[Ln],hn.b-=Ln,hn.Ca=(Sn<<Ln)-1,jn}function Ri(hn,mn,Sn){hn[mn+0]=Sn>>24&255,hn[mn+1]=Sn>>16&255,hn[mn+2]=Sn>>8&255,hn[mn+3]=Sn>>0&255}function tr(hn,mn){return hn[mn+0]<<0|hn[mn+1]<<8}function Fr(hn,mn){return tr(hn,mn)|hn[mn+2]<<16}function Bn(hn,mn){return tr(hn,mn)|tr(hn,mn+2)<<16}function Ai(hn,mn){var Sn=1<<mn;return e(hn!=null),e(0<mn),hn.X=Be(Sn),hn.X==null?0:(hn.Mb=32-mn,hn.Xa=mn,1)}function Kn(hn,mn){e(hn!=null),e(mn!=null),e(hn.Xa==mn.Xa),ke(mn.X,0,hn.X,0,1<<mn.Xa)}function Fn(){this.X=[],this.Xa=this.Mb=0}function $i(hn,mn,Sn,Ln){e(Sn!=null),e(Ln!=null);var kn=Sn[0],jn=Ln[0];return kn==0&&(kn=(hn*jn+mn/2)/mn),jn==0&&(jn=(mn*kn+hn/2)/hn),0>=kn||0>=jn?0:(Sn[0]=kn,Ln[0]=jn,1)}function Hi(hn,mn){return hn+(1<<mn)-1>>>mn}function Di(hn,mn){return((4278255360&hn)+(4278255360&mn)>>>0&4278255360)+((16711935&hn)+(16711935&mn)>>>0&16711935)>>>0}function zi(hn,mn){bn[mn]=function(Sn,Ln,kn,jn,Vn,Wn,Jn){var Ei;for(Ei=0;Ei<Vn;++Ei){var ji=bn[hn](Wn[Jn+Ei-1],kn,jn+Ei);Wn[Jn+Ei]=Di(Sn[Ln+Ei],ji)}}}function Bi(){this.ud=this.hd=this.jd=0}function Gi(hn,mn){return((4278124286&(hn^mn))>>>1)+(hn&mn)>>>0}function Ti(hn){return 0<=hn&&256>hn?hn:0>hn?0:255<hn?255:void 0}function Mi(hn,mn){return Ti(hn+(hn-mn+.5>>1))}function Oi(hn,mn,Sn){return Math.abs(mn-Sn)-Math.abs(hn-Sn)}function Xi(hn,mn,Sn,Ln,kn,jn,Vn){for(Ln=jn[Vn-1],Sn=0;Sn<kn;++Sn)jn[Vn+Sn]=Ln=Di(hn[mn+Sn],Ln)}function ar(hn,mn,Sn,Ln,kn){var jn;for(jn=0;jn<Sn;++jn){var Vn=hn[mn+jn],Wn=Vn>>8&255,Jn=16711935&(Jn=(Jn=16711935&Vn)+((Wn<<16)+Wn));Ln[kn+jn]=(4278255360&Vn)+Jn>>>0}}function Pr(hn,mn){mn.jd=hn>>0&255,mn.hd=hn>>8&255,mn.ud=hn>>16&255}function Rr(hn,mn,Sn,Ln,kn,jn){var Vn;for(Vn=0;Vn<Ln;++Vn){var Wn=mn[Sn+Vn],Jn=Wn>>>8,Ei=Wn,ji=255&(ji=(ji=Wn>>>16)+((hn.jd<<24>>24)*(Jn<<24>>24)>>>5));Ei=255&(Ei=(Ei=Ei+((hn.hd<<24>>24)*(Jn<<24>>24)>>>5))+((hn.ud<<24>>24)*(ji<<24>>24)>>>5)),kn[jn+Vn]=(4278255360&Wn)+(ji<<16)+Ei}}function Us(hn,mn,Sn,Ln,kn){bn[mn]=function(jn,Vn,Wn,Jn,Ei,ji,Qi,er,Yi){for(Jn=Qi;Jn<er;++Jn)for(Qi=0;Qi<Yi;++Qi)Ei[ji++]=kn(Wn[Ln(jn[Vn++])])},bn[hn]=function(jn,Vn,Wn,Jn,Ei,ji,Qi){var er=8>>jn.b,Yi=jn.Ea,Xr=jn.K[0],Nr=jn.w;if(8>er)for(jn=(1<<jn.b)-1,Nr=(1<<er)-1;Vn<Wn;++Vn){var Vi,qi=0;for(Vi=0;Vi<Yi;++Vi)Vi&jn||(qi=Ln(Jn[Ei++])),ji[Qi++]=kn(Xr[qi&Nr]),qi>>=er}else bn["VP8LMapColor"+Sn](Jn,Ei,Xr,Nr,ji,Qi,Vn,Wn,Yi)}}function Vr(hn,mn,Sn,Ln,kn){for(Sn=mn+Sn;mn<Sn;){var jn=hn[mn++];Ln[kn++]=jn>>16&255,Ln[kn++]=jn>>8&255,Ln[kn++]=jn>>0&255}}function ro(hn,mn,Sn,Ln,kn){for(Sn=mn+Sn;mn<Sn;){var jn=hn[mn++];Ln[kn++]=jn>>16&255,Ln[kn++]=jn>>8&255,Ln[kn++]=jn>>0&255,Ln[kn++]=jn>>24&255}}function Js(hn,mn,Sn,Ln,kn){for(Sn=mn+Sn;mn<Sn;){var jn=(Vn=hn[mn++])>>16&240|Vn>>12&15,Vn=Vn>>0&240|Vn>>28&15;Ln[kn++]=jn,Ln[kn++]=Vn}}function fo(hn,mn,Sn,Ln,kn){for(Sn=mn+Sn;mn<Sn;){var jn=(Vn=hn[mn++])>>16&248|Vn>>13&7,Vn=Vn>>5&224|Vn>>3&31;Ln[kn++]=jn,Ln[kn++]=Vn}}function lo(hn,mn,Sn,Ln,kn){for(Sn=mn+Sn;mn<Sn;){var jn=hn[mn++];Ln[kn++]=jn>>0&255,Ln[kn++]=jn>>8&255,Ln[kn++]=jn>>16&255}}function Ks(hn,mn,Sn,Ln,kn,jn){if(jn==0)for(Sn=mn+Sn;mn<Sn;)Ri(Ln,((jn=hn[mn++])[0]>>24|jn[1]>>8&65280|jn[2]<<8&16711680|jn[3]<<24)>>>0),kn+=32;else ke(Ln,kn,hn,mn,Sn)}function oo(hn,mn){bn[mn][0]=bn[hn+"0"],bn[mn][1]=bn[hn+"1"],bn[mn][2]=bn[hn+"2"],bn[mn][3]=bn[hn+"3"],bn[mn][4]=bn[hn+"4"],bn[mn][5]=bn[hn+"5"],bn[mn][6]=bn[hn+"6"],bn[mn][7]=bn[hn+"7"],bn[mn][8]=bn[hn+"8"],bn[mn][9]=bn[hn+"9"],bn[mn][10]=bn[hn+"10"],bn[mn][11]=bn[hn+"11"],bn[mn][12]=bn[hn+"12"],bn[mn][13]=bn[hn+"13"],bn[mn][14]=bn[hn+"0"],bn[mn][15]=bn[hn+"0"]}function no(hn){return hn==qh||hn==Wh||hn==rh||hn==Yh}function bo(){this.eb=[],this.size=this.A=this.fb=0}function co(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Ko(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new bo,this.f.kb=new co,this.sd=null}function aa(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ho(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function io(hn){return alert("todo:WebPSamplerProcessPlane"),hn.T}function po(hn,mn){var Sn=hn.T,Ln=mn.ba.f.RGBA,kn=Ln.eb,jn=Ln.fb+hn.ka*Ln.A,Vn=gc[mn.ba.S],Wn=hn.y,Jn=hn.O,Ei=hn.f,ji=hn.N,Qi=hn.ea,er=hn.W,Yi=mn.cc,Xr=mn.dc,Nr=mn.Mc,Vi=mn.Nc,qi=hn.ka,Hr=hn.ka+hn.T,xs=hn.U,Yr=xs+1>>1;for(qi==0?Vn(Wn,Jn,null,null,Ei,ji,Qi,er,Ei,ji,Qi,er,kn,jn,null,null,xs):(Vn(mn.ec,mn.fc,Wn,Jn,Yi,Xr,Nr,Vi,Ei,ji,Qi,er,kn,jn-Ln.A,kn,jn,xs),++Sn);qi+2<Hr;qi+=2)Yi=Ei,Xr=ji,Nr=Qi,Vi=er,ji+=hn.Rc,er+=hn.Rc,jn+=2*Ln.A,Vn(Wn,(Jn+=2*hn.fa)-hn.fa,Wn,Jn,Yi,Xr,Nr,Vi,Ei,ji,Qi,er,kn,jn-Ln.A,kn,jn,xs);return Jn+=hn.fa,hn.j+Hr<hn.o?(ke(mn.ec,mn.fc,Wn,Jn,xs),ke(mn.cc,mn.dc,Ei,ji,Yr),ke(mn.Mc,mn.Nc,Qi,er,Yr),Sn--):1&Hr||Vn(Wn,Jn,null,null,Ei,ji,Qi,er,Ei,ji,Qi,er,kn,jn+Ln.A,null,null,xs),Sn}function cc(hn,mn,Sn){var Ln=hn.F,kn=[hn.J];if(Ln!=null){var jn=hn.U,Vn=mn.ba.S,Wn=Vn==ih||Vn==rh;mn=mn.ba.f.RGBA;var Jn=[0],Ei=hn.ka;Jn[0]=hn.T,hn.Kb&&(Ei==0?--Jn[0]:(--Ei,kn[0]-=hn.width),hn.j+hn.ka+hn.T==hn.o&&(Jn[0]=hn.o-hn.j-Ei));var ji=mn.eb;Ei=mn.fb+Ei*mn.A,hn=ra(Ln,kn[0],hn.width,jn,Jn,ji,Ei+(Wn?0:3),mn.A),e(Sn==Jn),hn&&no(Vn)&&fc(ji,Ei,Wn,jn,Jn,mn.A)}return 0}function jo(hn){var mn=hn.ma,Sn=mn.ba.S,Ln=11>Sn,kn=Sn==th||Sn==nh||Sn==ih||Sn==$h||Sn==12||no(Sn);if(mn.memory=null,mn.Ib=null,mn.Jb=null,mn.Nd=null,!sd(mn.Oa,hn,kn?11:12))return 0;if(kn&&no(Sn)&&Gs(),hn.da)alert("todo:use_scaling");else{if(Ln){if(mn.Ib=io,hn.Kb){if(Sn=hn.U+1>>1,mn.memory=Be(hn.U+2*Sn),mn.memory==null)return 0;mn.ec=mn.memory,mn.fc=0,mn.cc=mn.ec,mn.dc=mn.fc+hn.U,mn.Mc=mn.cc,mn.Nc=mn.dc+Sn,mn.Ib=po,Gs()}}else alert("todo:EmitYUV");kn&&(mn.Jb=cc,Ln&&Ki())}if(Ln&&!Cf){for(hn=0;256>hn;++hn)Tp[hn]=89858*(hn-128)+oh>>sh,Op[hn]=-22014*(hn-128)+oh,Mp[hn]=-45773*(hn-128),Rp[hn]=113618*(hn-128)+oh>>sh;for(hn=gd;hn<Zh;++hn)mn=76283*(hn-16)+oh>>sh,Np[hn-gd]=rc(mn,255),kp[hn-gd]=rc(mn+8>>4,15);Cf=1}return 1}function Ma(hn){var mn=hn.ma,Sn=hn.U,Ln=hn.T;return e(!(1&hn.ka)),0>=Sn||0>=Ln?0:(Sn=mn.Ib(hn,mn),mn.Jb!=null&&mn.Jb(hn,mn,Sn),mn.Dc+=Sn,1)}function uo(hn){hn.ma.memory=null}function to(hn,mn,Sn,Ln){return Hn(hn,8)!=47?0:(mn[0]=Hn(hn,14)+1,Sn[0]=Hn(hn,14)+1,Ln[0]=Hn(hn,1),Hn(hn,3)!=0?0:!hn.h)}function ta(hn,mn){if(4>hn)return hn+1;var Sn=hn-2>>1;return(2+(1&hn)<<Sn)+Hn(mn,Sn)+1}function ya(hn,mn){return 120<mn?mn-120:1<=(Sn=((Sn=mp[mn-1])>>4)*hn+(8-(15&Sn)))?Sn:1;var Sn}function Qo(hn,mn,Sn){var Ln=qn(Sn),kn=hn[mn+=255&Ln].g-8;return 0<kn&&(Ci(Sn,Sn.u+8),Ln=qn(Sn),mn+=hn[mn].value,mn+=Ln&(1<<kn)-1),Ci(Sn,Sn.u+hn[mn].g),hn[mn].value}function go(hn,mn,Sn){return Sn.g+=hn.g,Sn.value+=hn.value<<mn>>>0,e(8>=Sn.g),hn.g}function Oo(hn,mn,Sn){var Ln=hn.xc;return e((mn=Ln==0?0:hn.vc[hn.md*(Sn>>Ln)+(mn>>Ln)])<hn.Wb),hn.Ya[mn]}function ko(hn,mn,Sn,Ln){var kn=hn.ab,jn=hn.c*mn,Vn=hn.C;mn=Vn+mn;var Wn=Sn,Jn=Ln;for(Ln=hn.Ta,Sn=hn.Ua;0<kn--;){var Ei=hn.gc[kn],ji=Vn,Qi=mn,er=Wn,Yi=Jn,Xr=(Jn=Ln,Wn=Sn,Ei.Ea);switch(e(ji<Qi),e(Qi<=Ei.nc),Ei.hc){case 2:Yd(er,Yi,(Qi-ji)*Xr,Jn,Wn);break;case 0:var Nr=ji,Vi=Qi,qi=Jn,Hr=Wn,xs=(Zs=Ei).Ea;Nr==0&&(zh(er,Yi,null,null,1,qi,Hr),Xi(er,Yi+1,0,0,xs-1,qi,Hr+1),Yi+=xs,Hr+=xs,++Nr);for(var Yr=1<<Zs.b,eo=Yr-1,Ws=Hi(xs,Zs.b),ao=Zs.K,Zs=Zs.w+(Nr>>Zs.b)*Ws;Nr<Vi;){var qo=ao,Wo=Zs,Fo=1;for(ld(er,Yi,qi,Hr-xs,1,qi,Hr);Fo<xs;){var No=(Fo&~eo)+Yr;No>xs&&(No=xs),(0,jc[qo[Wo++]>>8&15])(er,Yi+ +Fo,qi,Hr+Fo-xs,No-Fo,qi,Hr+Fo),Fo=No}Yi+=xs,Hr+=xs,++Nr&eo||(Zs+=Ws)}Qi!=Ei.nc&&ke(Jn,Wn-Xr,Jn,Wn+(Qi-ji-1)*Xr,Xr);break;case 1:for(Xr=er,Vi=Yi,xs=(er=Ei.Ea)-(Hr=er&~(qi=(Yi=1<<Ei.b)-1)),Nr=Hi(er,Ei.b),Yr=Ei.K,Ei=Ei.w+(ji>>Ei.b)*Nr;ji<Qi;){for(eo=Yr,Ws=Ei,ao=new Bi,Zs=Vi+Hr,qo=Vi+er;Vi<Zs;)Pr(eo[Ws++],ao),ou(ao,Xr,Vi,Yi,Jn,Wn),Vi+=Yi,Wn+=Yi;Vi<qo&&(Pr(eo[Ws++],ao),ou(ao,Xr,Vi,xs,Jn,Wn),Vi+=xs,Wn+=xs),++ji&qi||(Ei+=Nr)}break;case 3:if(er==Jn&&Yi==Wn&&0<Ei.b){for(Vi=Jn,er=Xr=Wn+(Qi-ji)*Xr-(Hr=(Qi-ji)*Hi(Ei.Ea,Ei.b)),Yi=Jn,qi=Wn,Nr=[],Hr=(xs=Hr)-1;0<=Hr;--Hr)Nr[Hr]=Yi[qi+Hr];for(Hr=xs-1;0<=Hr;--Hr)Vi[er+Hr]=Nr[Hr];uc(Ei,ji,Qi,Jn,Xr,Jn,Wn)}else uc(Ei,ji,Qi,er,Yi,Jn,Wn)}Wn=Ln,Jn=Sn}Jn!=Sn&&ke(Ln,Sn,Wn,Jn,jn)}function Pl(hn,mn){var Sn=hn.V,Ln=hn.Ba+hn.c*hn.C,kn=mn-hn.C;if(e(mn<=hn.l.o),e(16>=kn),0<kn){var jn=hn.l,Vn=hn.Ta,Wn=hn.Ua,Jn=jn.width;if(ko(hn,kn,Sn,Ln),kn=Wn=[Wn],e((Sn=hn.C)<(Ln=mn)),e(jn.v<jn.va),Ln>jn.o&&(Ln=jn.o),Sn<jn.j){var Ei=jn.j-Sn;Sn=jn.j,kn[0]+=Ei*Jn}if(Sn>=Ln?Sn=0:(kn[0]+=4*jn.v,jn.ka=Sn-jn.j,jn.U=jn.va-jn.v,jn.T=Ln-Sn,Sn=1),Sn){if(Wn=Wn[0],11>(Sn=hn.ca).S){var ji=Sn.f.RGBA,Qi=(Ln=Sn.S,kn=jn.U,jn=jn.T,Ei=ji.eb,ji.A),er=jn;for(ji=ji.fb+hn.Ma*ji.A;0<er--;){var Yi=Vn,Xr=Wn,Nr=kn,Vi=Ei,qi=ji;switch(Ln){case eh:Hl(Yi,Xr,Nr,Vi,qi);break;case th:Ja(Yi,Xr,Nr,Vi,qi);break;case qh:Ja(Yi,Xr,Nr,Vi,qi),fc(Vi,qi,0,Nr,1,0);break;case df:Rc(Yi,Xr,Nr,Vi,qi);break;case nh:Ks(Yi,Xr,Nr,Vi,qi,1);break;case Wh:Ks(Yi,Xr,Nr,Vi,qi,1),fc(Vi,qi,0,Nr,1,0);break;case ih:Ks(Yi,Xr,Nr,Vi,qi,0);break;case rh:Ks(Yi,Xr,Nr,Vi,qi,0),fc(Vi,qi,1,Nr,1,0);break;case $h:Vc(Yi,Xr,Nr,Vi,qi);break;case Yh:Vc(Yi,Xr,Nr,Vi,qi),na(Vi,qi,Nr,1,0);break;case hf:Tc(Yi,Xr,Nr,Vi,qi);break;default:e(0)}Wn+=Jn,ji+=Qi}hn.Ma+=jn}else alert("todo:EmitRescaledRowsYUVA");e(hn.Ma<=Sn.height)}}hn.C=mn,e(hn.C<=hn.i)}function Za(hn){var mn;if(0<hn.ua)return 0;for(mn=0;mn<hn.Wb;++mn){var Sn=hn.Ya[mn].G,Ln=hn.Ya[mn].H;if(0<Sn[1][Ln[1]+0].g||0<Sn[2][Ln[2]+0].g||0<Sn[3][Ln[3]+0].g)return 0}return 1}function Tl(hn,mn,Sn,Ln,kn,jn){if(hn.Z!=0){var Vn=hn.qd,Wn=hn.rd;for(e(Wc[hn.Z]!=null);mn<Sn;++mn)Wc[hn.Z](Vn,Wn,Ln,kn,Ln,kn,jn),Vn=Ln,Wn=kn,kn+=jn;hn.qd=Vn,hn.rd=Wn}}function ic(hn,mn){var Sn=hn.l.ma,Ln=Sn.Z==0||Sn.Z==1?hn.l.j:hn.C;if(Ln=hn.C<Ln?Ln:hn.C,e(mn<=hn.l.o),mn>Ln){var kn=hn.l.width,jn=Sn.ca,Vn=Sn.tb+kn*Ln,Wn=hn.V,Jn=hn.Ba+hn.c*Ln,Ei=hn.gc;e(hn.ab==1),e(Ei[0].hc==3),Xd(Ei[0],Ln,mn,Wn,Jn,jn,Vn),Tl(Sn,Ln,mn,jn,Vn,kn)}hn.C=hn.Ma=mn}function Rl(hn,mn,Sn,Ln,kn,jn,Vn){var Wn=hn.$/Ln,Jn=hn.$%Ln,Ei=hn.m,ji=hn.s,Qi=Sn+hn.$,er=Qi;kn=Sn+Ln*kn;var Yi=Sn+Ln*jn,Xr=280+ji.ua,Nr=hn.Pb?Wn:16777216,Vi=0<ji.ua?ji.Wa:null,qi=ji.wc,Hr=Qi<Yi?Oo(ji,Jn,Wn):null;e(hn.C<jn),e(Yi<=kn);var xs=!1;e:for(;;){for(;xs||Qi<Yi;){var Yr=0;if(Wn>=Nr){var eo=Qi-Sn;e((Nr=hn).Pb),Nr.wd=Nr.m,Nr.xd=eo,0<Nr.s.ua&&Kn(Nr.s.Wa,Nr.s.vb),Nr=Wn+vp}if(Jn&qi||(Hr=Oo(ji,Jn,Wn)),e(Hr!=null),Hr.Qb&&(mn[Qi]=Hr.qb,xs=!0),!xs)if(Si(Ei),Hr.jc){Yr=Ei,eo=mn;var Ws=Qi,ao=Hr.pd[qn(Yr)&Ha-1];e(Hr.jc),256>ao.g?(Ci(Yr,Yr.u+ao.g),eo[Ws]=ao.value,Yr=0):(Ci(Yr,Yr.u+ao.g-256),e(256<=ao.value),Yr=ao.value),Yr==0&&(xs=!0)}else Yr=Qo(Hr.G[0],Hr.H[0],Ei);if(Ei.h)break;if(xs||256>Yr){if(!xs)if(Hr.nd)mn[Qi]=(Hr.qb|Yr<<8)>>>0;else{if(Si(Ei),xs=Qo(Hr.G[1],Hr.H[1],Ei),Si(Ei),eo=Qo(Hr.G[2],Hr.H[2],Ei),Ws=Qo(Hr.G[3],Hr.H[3],Ei),Ei.h)break;mn[Qi]=(Ws<<24|xs<<16|Yr<<8|eo)>>>0}if(xs=!1,++Qi,++Jn>=Ln&&(Jn=0,++Wn,Vn!=null&&Wn<=jn&&!(Wn%16)&&Vn(hn,Wn),Vi!=null))for(;er<Qi;)Yr=mn[er++],Vi.X[(506832829*Yr&4294967295)>>>Vi.Mb]=Yr}else if(280>Yr){if(Yr=ta(Yr-256,Ei),eo=Qo(Hr.G[4],Hr.H[4],Ei),Si(Ei),eo=ya(Ln,eo=ta(eo,Ei)),Ei.h)break;if(Qi-Sn<eo||kn-Qi<Yr)break e;for(Ws=0;Ws<Yr;++Ws)mn[Qi+Ws]=mn[Qi+Ws-eo];for(Qi+=Yr,Jn+=Yr;Jn>=Ln;)Jn-=Ln,++Wn,Vn!=null&&Wn<=jn&&!(Wn%16)&&Vn(hn,Wn);if(e(Qi<=kn),Jn&qi&&(Hr=Oo(ji,Jn,Wn)),Vi!=null)for(;er<Qi;)Yr=mn[er++],Vi.X[(506832829*Yr&4294967295)>>>Vi.Mb]=Yr}else{if(!(Yr<Xr))break e;for(xs=Yr-280,e(Vi!=null);er<Qi;)Yr=mn[er++],Vi.X[(506832829*Yr&4294967295)>>>Vi.Mb]=Yr;Yr=Qi,e(!(xs>>>(eo=Vi).Xa)),mn[Yr]=eo.X[xs],xs=!0}xs||e(Ei.h==Un(Ei))}if(hn.Pb&&Ei.h&&Qi<kn)e(hn.m.h),hn.a=5,hn.m=hn.wd,hn.$=hn.xd,0<hn.s.ua&&Kn(hn.s.vb,hn.s.Wa);else{if(Ei.h)break e;Vn!=null&&Vn(hn,Wn>jn?jn:Wn),hn.a=0,hn.$=Qi-Sn}return 1}return hn.a=3,0}function Va(hn){e(hn!=null),hn.vc=null,hn.yc=null,hn.Ya=null;var mn=hn.Wa;mn!=null&&(mn.X=null),hn.vb=null,e(hn!=null)}function za(){var hn=new Vh;return hn==null?null:(hn.a=0,hn.xb=gf,oo("Predictor","VP8LPredictors"),oo("Predictor","VP8LPredictors_C"),oo("PredictorAdd","VP8LPredictorsAdd"),oo("PredictorAdd","VP8LPredictorsAdd_C"),Yd=ar,ou=Rr,Hl=Vr,Ja=ro,Vc=Js,Tc=fo,Rc=lo,bn.VP8LMapColor32b=Ru,bn.VP8LMapColor8b=Kd,hn)}function Sc(hn,mn,Sn,Ln,kn){var jn=1,Vn=[hn],Wn=[mn],Jn=Ln.m,Ei=Ln.s,ji=null,Qi=0;e:for(;;){if(Sn)for(;jn&&Hn(Jn,1);){var er=Vn,Yi=Wn,Xr=Ln,Nr=1,Vi=Xr.m,qi=Xr.gc[Xr.ab],Hr=Hn(Vi,2);if(Xr.Oc&1<<Hr)jn=0;else{switch(Xr.Oc|=1<<Hr,qi.hc=Hr,qi.Ea=er[0],qi.nc=Yi[0],qi.K=[null],++Xr.ab,e(4>=Xr.ab),Hr){case 0:case 1:qi.b=Hn(Vi,3)+2,Nr=Sc(Hi(qi.Ea,qi.b),Hi(qi.nc,qi.b),0,Xr,qi.K),qi.K=qi.K[0];break;case 3:var xs,Yr=Hn(Vi,8)+1,eo=16<Yr?0:4<Yr?1:2<Yr?2:3;if(er[0]=Hi(qi.Ea,eo),qi.b=eo,xs=Nr=Sc(Yr,1,0,Xr,qi.K)){var Ws,ao=Yr,Zs=qi,qo=1<<(8>>Zs.b),Wo=Be(qo);if(Wo==null)xs=0;else{var Fo=Zs.K[0],No=Zs.w;for(Wo[0]=Zs.K[0][0],Ws=1;Ws<1*ao;++Ws)Wo[Ws]=Di(Fo[No+Ws],Wo[Ws-1]);for(;Ws<4*qo;++Ws)Wo[Ws]=0;Zs.K[0]=null,Zs.K[0]=Wo,xs=1}}Nr=xs;break;case 2:break;default:e(0)}jn=Nr}}if(Vn=Vn[0],Wn=Wn[0],jn&&Hn(Jn,1)&&!(jn=1<=(Qi=Hn(Jn,4))&&11>=Qi)){Ln.a=3;break e}var ea;if(ea=jn)t:{var Xo,wo,Na,tc=Ln,ka=Vn,nc=Wn,Yo=Qi,oc=Sn,ac=tc.m,Ba=tc.s,$a=[null],El=1,mc=0,Pc=yp[Yo];n:for(;;){if(oc&&Hn(ac,1)){var ja=Hn(ac,3)+2,kc=Hi(ka,ja),du=Hi(nc,ja),Du=kc*du;if(!Sc(kc,du,0,tc,$a))break n;for($a=$a[0],Ba.xc=ja,Xo=0;Xo<Du;++Xo){var Yc=$a[Xo]>>8&65535;$a[Xo]=Yc,Yc>=El&&(El=Yc+1)}}if(ac.h)break n;for(wo=0;5>wo;++wo){var wa=ff[wo];!wo&&0<Yo&&(wa+=1<<Yo),mc<wa&&(mc=wa)}var Jh=je(El*Pc,Cn),Sf=El,bf=je(Sf,Tn);if(bf==null)var lh=null;else e(65536>=Sf),lh=bf;var md=Be(mc);if(lh==null||md==null||Jh==null){tc.a=1;break n}var ch=Jh;for(Xo=Na=0;Xo<El;++Xo){var Ec=lh[Xo],Gu=Ec.G,Fu=Ec.H,If=0,uh=1,wf=0;for(wo=0;5>wo;++wo){wa=ff[wo],Gu[wo]=ch,Fu[wo]=Na,!wo&&0<Yo&&(wa+=1<<Yo);r:{var dh,Qh=wa,hh=tc,yd=md,Bp=ch,Up=Na,ef=0,Xc=hh.m,jp=Hn(Xc,1);if(Ge(yd,0,0,Qh),jp){var Vp=Hn(Xc,1)+1,zp=Hn(Xc,1),Pf=Hn(Xc,zp==0?1:8);yd[Pf]=1,Vp==2&&(yd[Pf=Hn(Xc,8)]=1);var fh=1}else{var xf=Be(19),Lf=Hn(Xc,4)+4;if(19<Lf){hh.a=3;var ph=0;break r}for(dh=0;dh<Lf;++dh)xf[gp[dh]]=Hn(Xc,3);var tf=void 0,vd=void 0,Tf=hh,Hp=xf,gh=Qh,Rf=yd,nf=0,Kc=Tf.m,Mf=8,Of=je(128,Cn);i:for(;En(Of,0,7,Hp,19);){if(Hn(Kc,1)){var $p=2+2*Hn(Kc,3);if((tf=2+Hn(Kc,$p))>gh)break i}else tf=gh;for(vd=0;vd<gh&&tf--;){Si(Kc);var Nf=Of[0+(127&qn(Kc))];Ci(Kc,Kc.u+Nf.g);var Bu=Nf.value;if(16>Bu)Rf[vd++]=Bu,Bu!=0&&(Mf=Bu);else{var qp=Bu==16,kf=Bu-16,Wp=fp[kf],Df=Hn(Kc,hp[kf])+Wp;if(vd+Df>gh)break i;for(var Yp=qp?Mf:0;0<Df--;)Rf[vd++]=Yp}}nf=1;break i}nf||(Tf.a=3),fh=nf}(fh=fh&&!Xc.h)&&(ef=En(Bp,Up,8,yd,Qh)),fh&&ef!=0?ph=ef:(hh.a=3,ph=0)}if(ph==0)break n;if(uh&&pp[wo]==1&&(uh=ch[Na].g==0),If+=ch[Na].g,Na+=ph,3>=wo){var _d,rf=md[0];for(_d=1;_d<wa;++_d)md[_d]>rf&&(rf=md[_d]);wf+=rf}}if(Ec.nd=uh,Ec.Qb=0,uh&&(Ec.qb=(Gu[3][Fu[3]+0].value<<24|Gu[1][Fu[1]+0].value<<16|Gu[2][Fu[2]+0].value)>>>0,If==0&&256>Gu[0][Fu[0]+0].value&&(Ec.Qb=1,Ec.qb+=Gu[0][Fu[0]+0].value<<8)),Ec.jc=!Ec.Qb&&6>wf,Ec.jc){var mh,Dc=Ec;for(mh=0;mh<Ha;++mh){var Zc=mh,Jc=Dc.pd[Zc],yh=Dc.G[0][Dc.H[0]+Zc];256<=yh.value?(Jc.g=yh.g+256,Jc.value=yh.value):(Jc.g=0,Jc.value=0,Zc>>=go(yh,8,Jc),Zc>>=go(Dc.G[1][Dc.H[1]+Zc],16,Jc),Zc>>=go(Dc.G[2][Dc.H[2]+Zc],0,Jc),go(Dc.G[3][Dc.H[3]+Zc],24,Jc))}}}Ba.vc=$a,Ba.Wb=El,Ba.Ya=lh,Ba.yc=Jh,ea=1;break t}ea=0}if(!(jn=ea)){Ln.a=3;break e}if(0<Qi){if(Ei.ua=1<<Qi,!Ai(Ei.Wa,Qi)){Ln.a=1,jn=0;break e}}else Ei.ua=0;var sf=Ln,Gf=Vn,Xp=Wn,of=sf.s,af=of.xc;if(sf.c=Gf,sf.i=Xp,of.md=Hi(Gf,af),of.wc=af==0?-1:(1<<af)-1,Sn){Ln.xb=Ip;break e}if((ji=Be(Vn*Wn))==null){Ln.a=1,jn=0;break e}jn=(jn=Rl(Ln,ji,0,Vn,Wn,Wn,null))&&!Jn.h;break e}return jn?(kn!=null?kn[0]=ji:(e(ji==null),e(Sn)),Ln.$=0,Sn||Va(Ei)):Va(Ei),jn}function tu(hn,mn){var Sn=hn.c*hn.i,Ln=Sn+mn+16*mn;return e(hn.c<=mn),hn.V=Be(Ln),hn.V==null?(hn.Ta=null,hn.Ua=0,hn.a=1,0):(hn.Ta=hn.V,hn.Ua=hn.Ba+Sn+mn,1)}function hu(hn,mn){var Sn=hn.C,Ln=mn-Sn,kn=hn.V,jn=hn.Ba+hn.c*Sn;for(e(mn<=hn.l.o);0<Ln;){var Vn=16<Ln?16:Ln,Wn=hn.l.ma,Jn=hn.l.width,Ei=Jn*Vn,ji=Wn.ca,Qi=Wn.tb+Jn*Sn,er=hn.Ta,Yi=hn.Ua;ko(hn,Vn,kn,jn),Ta(er,Yi,ji,Qi,Ei),Tl(Wn,Sn,Sn+Vn,ji,Qi,Jn),Ln-=Vn,kn+=Vn*hn.c,Sn+=Vn}e(Sn==mn),hn.C=hn.Ma=mn}function fu(){this.ub=this.yd=this.td=this.Rb=0}function pu(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function gu(){this.Fb=this.Bb=this.Cb=0,this.Zb=Be(4),this.Lb=Be(4)}function bd(){this.Yb=function(){var hn=[];return function mn(Sn,Ln,kn){for(var jn=kn[Ln],Vn=0;Vn<jn&&(Sn.push(kn.length>Ln+1?[]:0),!(kn.length<Ln+1));Vn++)mn(Sn[Vn],Ln+1,kn)}(hn,0,[3,11]),hn}()}function _h(){this.jb=Be(3),this.Wc=Ve([4,8],bd),this.Xc=Ve([4,17],bd)}function Ch(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new Be(4),this.od=new Be(4)}function mu(){this.ld=this.La=this.dd=this.tc=0}function Id(){this.Na=this.la=0}function Ah(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ju(){this.ad=Be(384),this.Za=0,this.Ob=Be(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Eh(){this.uc=this.M=this.Nb=0,this.wa=Array(new mu),this.Y=0,this.ya=Array(new ju),this.aa=0,this.l=new yu}function wd(){this.y=Be(16),this.f=Be(8),this.ea=Be(8)}function Sh(){this.cb=this.a=0,this.sc="",this.m=new Ni,this.Od=new fu,this.Kc=new pu,this.ed=new Ch,this.Qa=new gu,this.Ic=this.$c=this.Aa=0,this.D=new Eh,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=je(8,Ni),this.ia=0,this.pb=je(4,Ah),this.Pa=new _h,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new wd),this.Hd=0,this.rb=Array(new Id),this.sb=0,this.wa=Array(new mu),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ju),this.L=this.aa=0,this.gd=Ve([4,2],mu),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function yu(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function bh(){var hn=new Sh;return hn!=null&&(hn.a=0,hn.sc="OK",hn.cb=0,hn.Xb=0,pd||(pd=Ld)),hn}function Pa(hn,mn,Sn){return hn.a==0&&(hn.a=mn,hn.sc=Sn,hn.cb=0),0}function Pd(hn,mn,Sn){return 3<=Sn&&hn[mn+0]==157&&hn[mn+1]==1&&hn[mn+2]==42}function xd(hn,mn){if(hn==null)return 0;if(hn.a=0,hn.sc="OK",mn==null)return Pa(hn,2,"null VP8Io passed to VP8GetHeaders()");var Sn=mn.data,Ln=mn.w,kn=mn.ha;if(4>kn)return Pa(hn,7,"Truncated header.");var jn=Sn[Ln+0]|Sn[Ln+1]<<8|Sn[Ln+2]<<16,Vn=hn.Od;if(Vn.Rb=!(1&jn),Vn.td=jn>>1&7,Vn.yd=jn>>4&1,Vn.ub=jn>>5,3<Vn.td)return Pa(hn,3,"Incorrect keyframe parameters.");if(!Vn.yd)return Pa(hn,4,"Frame not displayable.");Ln+=3,kn-=3;var Wn=hn.Kc;if(Vn.Rb){if(7>kn)return Pa(hn,7,"cannot parse picture header");if(!Pd(Sn,Ln,kn))return Pa(hn,3,"Bad code word");Wn.c=16383&(Sn[Ln+4]<<8|Sn[Ln+3]),Wn.Td=Sn[Ln+4]>>6,Wn.i=16383&(Sn[Ln+6]<<8|Sn[Ln+5]),Wn.Ud=Sn[Ln+6]>>6,Ln+=7,kn-=7,hn.za=Wn.c+15>>4,hn.Ub=Wn.i+15>>4,mn.width=Wn.c,mn.height=Wn.i,mn.Da=0,mn.j=0,mn.v=0,mn.va=mn.width,mn.o=mn.height,mn.da=0,mn.ib=mn.width,mn.hb=mn.height,mn.U=mn.width,mn.T=mn.height,Ge((jn=hn.Pa).jb,0,255,jn.jb.length),e((jn=hn.Qa)!=null),jn.Cb=0,jn.Bb=0,jn.Fb=1,Ge(jn.Zb,0,0,jn.Zb.length),Ge(jn.Lb,0,0,jn.Lb)}if(Vn.ub>kn)return Pa(hn,7,"bad partition length");Nn(jn=hn.m,Sn,Ln,Vn.ub),Ln+=Vn.ub,kn-=Vn.ub,Vn.Rb&&(Wn.Ld=Ii(jn),Wn.Kd=Ii(jn)),Wn=hn.Qa;var Jn,Ei=hn.Pa;if(e(jn!=null),e(Wn!=null),Wn.Cb=Ii(jn),Wn.Cb){if(Wn.Bb=Ii(jn),Ii(jn)){for(Wn.Fb=Ii(jn),Jn=0;4>Jn;++Jn)Wn.Zb[Jn]=Ii(jn)?zn(jn,7):0;for(Jn=0;4>Jn;++Jn)Wn.Lb[Jn]=Ii(jn)?zn(jn,6):0}if(Wn.Bb)for(Jn=0;3>Jn;++Jn)Ei.jb[Jn]=Ii(jn)?Gn(jn,8):255}else Wn.Bb=0;if(jn.Ka)return Pa(hn,3,"cannot parse segment header");if((Wn=hn.ed).zd=Ii(jn),Wn.Tb=Gn(jn,6),Wn.wb=Gn(jn,3),Wn.Pc=Ii(jn),Wn.Pc&&Ii(jn)){for(Ei=0;4>Ei;++Ei)Ii(jn)&&(Wn.vd[Ei]=zn(jn,6));for(Ei=0;4>Ei;++Ei)Ii(jn)&&(Wn.od[Ei]=zn(jn,6))}if(hn.L=Wn.Tb==0?0:Wn.zd?1:2,jn.Ka)return Pa(hn,3,"cannot parse filter header");var ji=kn;if(kn=Jn=Ln,Ln=Jn+ji,Wn=ji,hn.Xb=(1<<Gn(hn.m,2))-1,ji<3*(Ei=hn.Xb))Sn=7;else{for(Jn+=3*Ei,Wn-=3*Ei,ji=0;ji<Ei;++ji){var Qi=Sn[kn+0]|Sn[kn+1]<<8|Sn[kn+2]<<16;Qi>Wn&&(Qi=Wn),Nn(hn.Jc[+ji],Sn,Jn,Qi),Jn+=Qi,Wn-=Qi,kn+=3}Nn(hn.Jc[+Ei],Sn,Jn,Wn),Sn=Jn<Ln?0:5}if(Sn!=0)return Pa(hn,Sn,"cannot parse partitions");for(Sn=Gn(Jn=hn.m,7),kn=Ii(Jn)?zn(Jn,4):0,Ln=Ii(Jn)?zn(Jn,4):0,Wn=Ii(Jn)?zn(Jn,4):0,Ei=Ii(Jn)?zn(Jn,4):0,Jn=Ii(Jn)?zn(Jn,4):0,ji=hn.Qa,Qi=0;4>Qi;++Qi){if(ji.Cb){var er=ji.Zb[Qi];ji.Fb||(er+=Sn)}else{if(0<Qi){hn.pb[Qi]=hn.pb[0];continue}er=Sn}var Yi=hn.pb[Qi];Yi.Sc[0]=Xh[rc(er+kn,127)],Yi.Sc[1]=Kh[rc(er+0,127)],Yi.Eb[0]=2*Xh[rc(er+Ln,127)],Yi.Eb[1]=101581*Kh[rc(er+Wn,127)]>>16,8>Yi.Eb[1]&&(Yi.Eb[1]=8),Yi.Qc[0]=Xh[rc(er+Ei,117)],Yi.Qc[1]=Kh[rc(er+Jn,127)],Yi.lc=er+Jn}if(!Vn.Rb)return Pa(hn,4,"Not a key frame.");for(Ii(jn),Vn=hn.Pa,Sn=0;4>Sn;++Sn){for(kn=0;8>kn;++kn)for(Ln=0;3>Ln;++Ln)for(Wn=0;11>Wn;++Wn)Ei=Li(jn,Sp[Sn][kn][Ln][Wn])?Gn(jn,8):Ap[Sn][kn][Ln][Wn],Vn.Wc[Sn][kn].Yb[Ln][Wn]=Ei;for(kn=0;17>kn;++kn)Vn.Xc[Sn][kn]=Vn.Wc[Sn][bp[kn]]}return hn.kc=Ii(jn),hn.kc&&(hn.Bd=Gn(jn,8)),hn.cb=1}function Ld(hn,mn,Sn,Ln,kn,jn,Vn){var Wn=mn[kn].Yb[Sn];for(Sn=0;16>kn;++kn){if(!Li(hn,Wn[Sn+0]))return kn;for(;!Li(hn,Wn[Sn+1]);)if(Wn=mn[++kn].Yb[0],Sn=0,kn==16)return 16;var Jn=mn[kn+1].Yb;if(Li(hn,Wn[Sn+2])){var Ei=hn,ji=0;if(Li(Ei,(er=Wn)[(Qi=Sn)+3]))if(Li(Ei,er[Qi+6])){for(Wn=0,Qi=2*(ji=Li(Ei,er[Qi+8]))+(er=Li(Ei,er[Qi+9+ji])),ji=0,er=_p[Qi];er[Wn];++Wn)ji+=ji+Li(Ei,er[Wn]);ji+=3+(8<<Qi)}else Li(Ei,er[Qi+7])?(ji=7+2*Li(Ei,165),ji+=Li(Ei,145)):ji=5+Li(Ei,159);else ji=Li(Ei,er[Qi+4])?3+Li(Ei,er[Qi+5]):2;Wn=Jn[2]}else ji=1,Wn=Jn[1];Jn=Vn+Cp[kn],0>(Ei=hn).b&&_i(Ei);var Qi,er=Ei.b,Yi=(Qi=Ei.Ca>>1)-(Ei.I>>er)>>31;--Ei.b,Ei.Ca+=Yi,Ei.Ca|=1,Ei.I-=(Qi+1&Yi)<<er,jn[Jn]=((ji^Yi)-Yi)*Ln[(0<kn)+0]}return 16}function Vu(hn){var mn=hn.rb[hn.sb-1];mn.la=0,mn.Na=0,Ge(hn.zc,0,0,hn.zc.length),hn.ja=0}function Ih(hn,mn){if(hn==null)return 0;if(mn==null)return Pa(hn,2,"NULL VP8Io parameter in VP8Decode().");if(!hn.cb&&!xd(hn,mn))return 0;if(e(hn.cb),mn.ac==null||mn.ac(mn)){mn.ob&&(hn.L=0);var Sn=ah[hn.L];if(hn.L==2?(hn.yb=0,hn.zb=0):(hn.yb=mn.v-Sn>>4,hn.zb=mn.j-Sn>>4,0>hn.yb&&(hn.yb=0),0>hn.zb&&(hn.zb=0)),hn.Va=mn.o+15+Sn>>4,hn.Hb=mn.va+15+Sn>>4,hn.Hb>hn.za&&(hn.Hb=hn.za),hn.Va>hn.Ub&&(hn.Va=hn.Ub),0<hn.L){var Ln=hn.ed;for(Sn=0;4>Sn;++Sn){var kn;if(hn.Qa.Cb){var jn=hn.Qa.Lb[Sn];hn.Qa.Fb||(jn+=Ln.Tb)}else jn=Ln.Tb;for(kn=0;1>=kn;++kn){var Vn=hn.gd[Sn][kn],Wn=jn;if(Ln.Pc&&(Wn+=Ln.vd[0],kn&&(Wn+=Ln.od[0])),0<(Wn=0>Wn?0:63<Wn?63:Wn)){var Jn=Wn;0<Ln.wb&&(Jn=4<Ln.wb?Jn>>2:Jn>>1)>9-Ln.wb&&(Jn=9-Ln.wb),1>Jn&&(Jn=1),Vn.dd=Jn,Vn.tc=2*Wn+Jn,Vn.ld=40<=Wn?2:15<=Wn?1:0}else Vn.tc=0;Vn.La=kn}}}Sn=0}else Pa(hn,6,"Frame setup failed"),Sn=hn.a;if(Sn=Sn==0){if(Sn){hn.$c=0,0<hn.Aa||(hn.Ic=Fp);e:{Sn=hn.Ic,Ln=4*(Jn=hn.za);var Ei=32*Jn,ji=Jn+1,Qi=0<hn.L?Jn*(0<hn.Aa?2:1):0,er=(hn.Aa==2?2:1)*Jn;if((Vn=Ln+832+(kn=3*(16*Sn+ah[hn.L])/2*Ei)+(jn=hn.Fa!=null&&0<hn.Fa.length?hn.Kc.c*hn.Kc.i:0))!=Vn)Sn=0;else{if(Vn>hn.Vb){if(hn.Vb=0,hn.Ec=Be(Vn),hn.Fc=0,hn.Ec==null){Sn=Pa(hn,1,"no memory during frame initialization.");break e}hn.Vb=Vn}Vn=hn.Ec,Wn=hn.Fc,hn.Ac=Vn,hn.Bc=Wn,Wn+=Ln,hn.Gd=je(Ei,wd),hn.Hd=0,hn.rb=je(ji+1,Id),hn.sb=1,hn.wa=Qi?je(Qi,mu):null,hn.Y=0,hn.D.Nb=0,hn.D.wa=hn.wa,hn.D.Y=hn.Y,0<hn.Aa&&(hn.D.Y+=Jn),e(!0),hn.oc=Vn,hn.pc=Wn,Wn+=832,hn.ya=je(er,ju),hn.aa=0,hn.D.ya=hn.ya,hn.D.aa=hn.aa,hn.Aa==2&&(hn.D.aa+=Jn),hn.R=16*Jn,hn.B=8*Jn,Jn=(Ei=ah[hn.L])*hn.R,Ei=Ei/2*hn.B,hn.sa=Vn,hn.ta=Wn+Jn,hn.qa=hn.sa,hn.ra=hn.ta+16*Sn*hn.R+Ei,hn.Ha=hn.qa,hn.Ia=hn.ra+8*Sn*hn.B+Ei,hn.$c=0,Wn+=kn,hn.mb=jn?Vn:null,hn.nb=jn?Wn:null,e(Wn+jn<=hn.Fc+hn.Vb),Vu(hn),Ge(hn.Ac,hn.Bc,0,Ln),Sn=1}}if(Sn){if(mn.ka=0,mn.y=hn.sa,mn.O=hn.ta,mn.f=hn.qa,mn.N=hn.ra,mn.ea=hn.Ha,mn.Vd=hn.Ia,mn.fa=hn.R,mn.Rc=hn.B,mn.F=null,mn.J=0,!Jd){for(Sn=-255;255>=Sn;++Sn)Da[255+Sn]=0>Sn?-Sn:Sn;for(Sn=-1020;1020>=Sn;++Sn)Oc[1020+Sn]=-128>Sn?-128:127<Sn?127:Sn;for(Sn=-112;112>=Sn;++Sn)hd[112+Sn]=-16>Sn?-16:15<Sn?15:Sn;for(Sn=-255;510>=Sn;++Sn)ku[255+Sn]=0>Sn?0:255<Sn?255:Sn;Jd=1}Mu=xh,Mc=wh,cd=Md,Al=Ph,dc=Od,xa=Td,Ou=Yu,Zd=ru,ud=jh,au=Xu,lu=Uh,zc=Su,cu=Ku,Nu=$d,uu=zd,$c=Ic,dd=Lc,hc=Bh,Ac[0]=bc,Ac[1]=Lh,Ac[2]=Oh,Ac[3]=Nh,Ac[4]=Dd,Ac[5]=Au,Ac[6]=Gd,Ac[7]=$u,Ac[8]=Dh,Ac[9]=kh,qc[0]=Nd,qc[1]=Rh,qc[2]=xc,qc[3]=_u,qc[4]=Ya,qc[5]=Mh,qc[6]=kd,Nc[0]=Fc,Nc[1]=Th,Nc[2]=Gh,Nc[3]=qu,Nc[4]=iu,Nc[5]=Fh,Nc[6]=Wu,Sn=1}else Sn=0}Sn&&(Sn=function(Yi,Xr){for(Yi.M=0;Yi.M<Yi.Va;++Yi.M){var Nr,Vi=Yi.Jc[Yi.M&Yi.Xb],qi=Yi.m,Hr=Yi;for(Nr=0;Nr<Hr.za;++Nr){var xs=qi,Yr=Hr,eo=Yr.Ac,Ws=Yr.Bc+4*Nr,ao=Yr.zc,Zs=Yr.ya[Yr.aa+Nr];if(Yr.Qa.Bb?Zs.$b=Li(xs,Yr.Pa.jb[0])?2+Li(xs,Yr.Pa.jb[2]):Li(xs,Yr.Pa.jb[1]):Zs.$b=0,Yr.kc&&(Zs.Ad=Li(xs,Yr.Bd)),Zs.Za=!Li(xs,145)+0,Zs.Za){var qo=Zs.Ob,Wo=0;for(Yr=0;4>Yr;++Yr){var Fo,No=ao[0+Yr];for(Fo=0;4>Fo;++Fo){No=Ep[eo[Ws+Fo]][No];for(var ea=pf[Li(xs,No[0])];0<ea;)ea=pf[2*ea+Li(xs,No[ea])];No=-ea,eo[Ws+Fo]=No}ke(qo,Wo,eo,Ws,4),Wo+=4,ao[0+Yr]=No}}else No=Li(xs,156)?Li(xs,128)?1:3:Li(xs,163)?2:0,Zs.Ob[0]=No,Ge(eo,Ws,No,4),Ge(ao,0,No,4);Zs.Dd=Li(xs,142)?Li(xs,114)?Li(xs,183)?1:3:2:0}if(Hr.m.Ka)return Pa(Yi,7,"Premature end-of-partition0 encountered.");for(;Yi.ja<Yi.za;++Yi.ja){if(Hr=Vi,xs=(qi=Yi).rb[qi.sb-1],eo=qi.rb[qi.sb+qi.ja],Nr=qi.ya[qi.aa+qi.ja],Ws=qi.kc?Nr.Ad:0)xs.la=eo.la=0,Nr.Za||(xs.Na=eo.Na=0),Nr.Hc=0,Nr.Gc=0,Nr.ia=0;else{var Xo,wo;if(xs=eo,eo=Hr,Ws=qi.Pa.Xc,ao=qi.ya[qi.aa+qi.ja],Zs=qi.pb[ao.$b],Yr=ao.ad,qo=0,Wo=qi.rb[qi.sb-1],No=Fo=0,Ge(Yr,qo,0,384),ao.Za)var Na=0,tc=Ws[3];else{ea=Be(16);var ka=xs.Na+Wo.Na;if(ka=pd(eo,Ws[1],ka,Zs.Eb,0,ea,0),xs.Na=Wo.Na=(0<ka)+0,1<ka)Mu(ea,0,Yr,qo);else{var nc=ea[0]+3>>3;for(ea=0;256>ea;ea+=16)Yr[qo+ea]=nc}Na=1,tc=Ws[0]}var Yo=15&xs.la,oc=15&Wo.la;for(ea=0;4>ea;++ea){var ac=1&oc;for(nc=wo=0;4>nc;++nc)Yo=Yo>>1|(ac=(ka=pd(eo,tc,ka=ac+(1&Yo),Zs.Sc,Na,Yr,qo))>Na)<<7,wo=wo<<2|(3<ka?3:1<ka?2:Yr[qo+0]!=0),qo+=16;Yo>>=4,oc=oc>>1|ac<<7,Fo=(Fo<<8|wo)>>>0}for(tc=Yo,Na=oc>>4,Xo=0;4>Xo;Xo+=2){for(wo=0,Yo=xs.la>>4+Xo,oc=Wo.la>>4+Xo,ea=0;2>ea;++ea){for(ac=1&oc,nc=0;2>nc;++nc)ka=ac+(1&Yo),Yo=Yo>>1|(ac=0<(ka=pd(eo,Ws[2],ka,Zs.Qc,0,Yr,qo)))<<3,wo=wo<<2|(3<ka?3:1<ka?2:Yr[qo+0]!=0),qo+=16;Yo>>=2,oc=oc>>1|ac<<5}No|=wo<<4*Xo,tc|=Yo<<4<<Xo,Na|=(240&oc)<<Xo}xs.la=tc,Wo.la=Na,ao.Hc=Fo,ao.Gc=No,ao.ia=43690&No?0:Zs.ia,Ws=!(Fo|No)}if(0<qi.L&&(qi.wa[qi.Y+qi.ja]=qi.gd[Nr.$b][Nr.Za],qi.wa[qi.Y+qi.ja].La|=!Ws),Hr.Ka)return Pa(Yi,7,"Premature end-of-file encountered.")}if(Vu(Yi),qi=Xr,Hr=1,Nr=(Vi=Yi).D,xs=0<Vi.L&&Vi.M>=Vi.zb&&Vi.M<=Vi.Va,Vi.Aa==0)e:{if(Nr.M=Vi.M,Nr.uc=xs,rd(Vi,Nr),Hr=1,Nr=(wo=Vi.D).Nb,xs=(No=ah[Vi.L])*Vi.R,eo=No/2*Vi.B,ea=16*Nr*Vi.R,nc=8*Nr*Vi.B,Ws=Vi.sa,ao=Vi.ta-xs+ea,Zs=Vi.qa,Yr=Vi.ra-eo+nc,qo=Vi.Ha,Wo=Vi.Ia-eo+nc,oc=(Yo=wo.M)==0,Fo=Yo>=Vi.Va-1,Vi.Aa==2&&rd(Vi,wo),wo.uc)for(ac=(ka=Vi).D.M,e(ka.D.uc),wo=ka.yb;wo<ka.Hb;++wo){Na=wo,tc=ac;var Ba=($a=(wa=ka).D).Nb;Xo=wa.R;var $a=$a.wa[$a.Y+Na],El=wa.sa,mc=wa.ta+16*Ba*Xo+16*Na,Pc=$a.dd,ja=$a.tc;if(ja!=0)if(e(3<=ja),wa.L==1)0<Na&&$c(El,mc,Xo,ja+4),$a.La&&hc(El,mc,Xo,ja),0<tc&&uu(El,mc,Xo,ja+4),$a.La&&dd(El,mc,Xo,ja);else{var kc=wa.B,du=wa.qa,Du=wa.ra+8*Ba*kc+8*Na,Yc=wa.Ha,wa=wa.Ia+8*Ba*kc+8*Na;Ba=$a.ld,0<Na&&(Zd(El,mc,Xo,ja+4,Pc,Ba),au(du,Du,Yc,wa,kc,ja+4,Pc,Ba)),$a.La&&(zc(El,mc,Xo,ja,Pc,Ba),Nu(du,Du,Yc,wa,kc,ja,Pc,Ba)),0<tc&&(Ou(El,mc,Xo,ja+4,Pc,Ba),ud(du,Du,Yc,wa,kc,ja+4,Pc,Ba)),$a.La&&(lu(El,mc,Xo,ja,Pc,Ba),cu(du,Du,Yc,wa,kc,ja,Pc,Ba))}}if(Vi.ia&&alert("todo:DitherRow"),qi.put!=null){if(wo=16*Yo,Yo=16*(Yo+1),oc?(qi.y=Vi.sa,qi.O=Vi.ta+ea,qi.f=Vi.qa,qi.N=Vi.ra+nc,qi.ea=Vi.Ha,qi.W=Vi.Ia+nc):(wo-=No,qi.y=Ws,qi.O=ao,qi.f=Zs,qi.N=Yr,qi.ea=qo,qi.W=Wo),Fo||(Yo-=No),Yo>qi.o&&(Yo=qi.o),qi.F=null,qi.J=null,Vi.Fa!=null&&0<Vi.Fa.length&&wo<Yo&&(qi.J=nd(Vi,qi,wo,Yo-wo),qi.F=Vi.mb,qi.F==null&&qi.F.length==0)){Hr=Pa(Vi,3,"Could not decode alpha data.");break e}wo<qi.j&&(No=qi.j-wo,wo=qi.j,e(!(1&No)),qi.O+=Vi.R*No,qi.N+=Vi.B*(No>>1),qi.W+=Vi.B*(No>>1),qi.F!=null&&(qi.J+=qi.width*No)),wo<Yo&&(qi.O+=qi.v,qi.N+=qi.v>>1,qi.W+=qi.v>>1,qi.F!=null&&(qi.J+=qi.v),qi.ka=wo-qi.j,qi.U=qi.va-qi.v,qi.T=Yo-wo,Hr=qi.put(qi))}Nr+1!=Vi.Ic||Fo||(ke(Vi.sa,Vi.ta-xs,Ws,ao+16*Vi.R,xs),ke(Vi.qa,Vi.ra-eo,Zs,Yr+8*Vi.B,eo),ke(Vi.Ha,Vi.Ia-eo,qo,Wo+8*Vi.B,eo))}if(!Hr)return Pa(Yi,6,"Output aborted.")}return 1}(hn,mn)),mn.bc!=null&&mn.bc(mn),Sn&=1}return Sn?(hn.cb=0,Sn):0}function vc(hn,mn,Sn,Ln,kn){kn=hn[mn+Sn+32*Ln]+(kn>>3),hn[mn+Sn+32*Ln]=-256&kn?0>kn?0:255:kn}function vu(hn,mn,Sn,Ln,kn,jn){vc(hn,mn,0,Sn,Ln+kn),vc(hn,mn,1,Sn,Ln+jn),vc(hn,mn,2,Sn,Ln-jn),vc(hn,mn,3,Sn,Ln-kn)}function Bl(hn){return(20091*hn>>16)+hn}function zu(hn,mn,Sn,Ln){var kn,jn=0,Vn=Be(16);for(kn=0;4>kn;++kn){var Wn=hn[mn+0]+hn[mn+8],Jn=hn[mn+0]-hn[mn+8],Ei=(35468*hn[mn+4]>>16)-Bl(hn[mn+12]),ji=Bl(hn[mn+4])+(35468*hn[mn+12]>>16);Vn[jn+0]=Wn+ji,Vn[jn+1]=Jn+Ei,Vn[jn+2]=Jn-Ei,Vn[jn+3]=Wn-ji,jn+=4,mn++}for(kn=jn=0;4>kn;++kn)Wn=(hn=Vn[jn+0]+4)+Vn[jn+8],Jn=hn-Vn[jn+8],Ei=(35468*Vn[jn+4]>>16)-Bl(Vn[jn+12]),vc(Sn,Ln,0,0,Wn+(ji=Bl(Vn[jn+4])+(35468*Vn[jn+12]>>16))),vc(Sn,Ln,1,0,Jn+Ei),vc(Sn,Ln,2,0,Jn-Ei),vc(Sn,Ln,3,0,Wn-ji),jn++,Ln+=32}function Td(hn,mn,Sn,Ln){var kn=hn[mn+0]+4,jn=35468*hn[mn+4]>>16,Vn=Bl(hn[mn+4]),Wn=35468*hn[mn+1]>>16;vu(Sn,Ln,0,kn+Vn,hn=Bl(hn[mn+1]),Wn),vu(Sn,Ln,1,kn+jn,hn,Wn),vu(Sn,Ln,2,kn-jn,hn,Wn),vu(Sn,Ln,3,kn-Vn,hn,Wn)}function wh(hn,mn,Sn,Ln,kn){zu(hn,mn,Sn,Ln),kn&&zu(hn,mn+16,Sn,Ln+4)}function Md(hn,mn,Sn,Ln){Mc(hn,mn+0,Sn,Ln,1),Mc(hn,mn+32,Sn,Ln+128,1)}function Ph(hn,mn,Sn,Ln){var kn;for(hn=hn[mn+0]+4,kn=0;4>kn;++kn)for(mn=0;4>mn;++mn)vc(Sn,Ln,mn,kn,hn)}function Od(hn,mn,Sn,Ln){hn[mn+0]&&Al(hn,mn+0,Sn,Ln),hn[mn+16]&&Al(hn,mn+16,Sn,Ln+4),hn[mn+32]&&Al(hn,mn+32,Sn,Ln+128),hn[mn+48]&&Al(hn,mn+48,Sn,Ln+128+4)}function xh(hn,mn,Sn,Ln){var kn,jn=Be(16);for(kn=0;4>kn;++kn){var Vn=hn[mn+0+kn]+hn[mn+12+kn],Wn=hn[mn+4+kn]+hn[mn+8+kn],Jn=hn[mn+4+kn]-hn[mn+8+kn],Ei=hn[mn+0+kn]-hn[mn+12+kn];jn[0+kn]=Vn+Wn,jn[8+kn]=Vn-Wn,jn[4+kn]=Ei+Jn,jn[12+kn]=Ei-Jn}for(kn=0;4>kn;++kn)Vn=(hn=jn[0+4*kn]+3)+jn[3+4*kn],Wn=jn[1+4*kn]+jn[2+4*kn],Jn=jn[1+4*kn]-jn[2+4*kn],Ei=hn-jn[3+4*kn],Sn[Ln+0]=Vn+Wn>>3,Sn[Ln+16]=Ei+Jn>>3,Sn[Ln+32]=Vn-Wn>>3,Sn[Ln+48]=Ei-Jn>>3,Ln+=64}function Hu(hn,mn,Sn){var Ln,kn=mn-32,jn=sc,Vn=255-hn[kn-1];for(Ln=0;Ln<Sn;++Ln){var Wn,Jn=jn,Ei=Vn+hn[mn-1];for(Wn=0;Wn<Sn;++Wn)hn[mn+Wn]=Jn[Ei+hn[kn+Wn]];mn+=32}}function Lh(hn,mn){Hu(hn,mn,4)}function Th(hn,mn){Hu(hn,mn,8)}function Rh(hn,mn){Hu(hn,mn,16)}function xc(hn,mn){var Sn;for(Sn=0;16>Sn;++Sn)ke(hn,mn+32*Sn,hn,mn-32,16)}function _u(hn,mn){var Sn;for(Sn=16;0<Sn;--Sn)Ge(hn,mn,hn[mn-1],16),mn+=32}function Cu(hn,mn,Sn){var Ln;for(Ln=0;16>Ln;++Ln)Ge(mn,Sn+32*Ln,hn,16)}function Nd(hn,mn){var Sn,Ln=16;for(Sn=0;16>Sn;++Sn)Ln+=hn[mn-1+32*Sn]+hn[mn+Sn-32];Cu(Ln>>5,hn,mn)}function Ya(hn,mn){var Sn,Ln=8;for(Sn=0;16>Sn;++Sn)Ln+=hn[mn-1+32*Sn];Cu(Ln>>4,hn,mn)}function Mh(hn,mn){var Sn,Ln=8;for(Sn=0;16>Sn;++Sn)Ln+=hn[mn+Sn-32];Cu(Ln>>4,hn,mn)}function kd(hn,mn){Cu(128,hn,mn)}function mo(hn,mn,Sn){return hn+2*mn+Sn+2>>2}function Oh(hn,mn){var Sn,Ln=mn-32;for(Ln=new Uint8Array([mo(hn[Ln-1],hn[Ln+0],hn[Ln+1]),mo(hn[Ln+0],hn[Ln+1],hn[Ln+2]),mo(hn[Ln+1],hn[Ln+2],hn[Ln+3]),mo(hn[Ln+2],hn[Ln+3],hn[Ln+4])]),Sn=0;4>Sn;++Sn)ke(hn,mn+32*Sn,Ln,0,Ln.length)}function Nh(hn,mn){var Sn=hn[mn-1],Ln=hn[mn-1+32],kn=hn[mn-1+64],jn=hn[mn-1+96];Ri(hn,mn+0,16843009*mo(hn[mn-1-32],Sn,Ln)),Ri(hn,mn+32,16843009*mo(Sn,Ln,kn)),Ri(hn,mn+64,16843009*mo(Ln,kn,jn)),Ri(hn,mn+96,16843009*mo(kn,jn,jn))}function bc(hn,mn){var Sn,Ln=4;for(Sn=0;4>Sn;++Sn)Ln+=hn[mn+Sn-32]+hn[mn-1+32*Sn];for(Ln>>=3,Sn=0;4>Sn;++Sn)Ge(hn,mn+32*Sn,Ln,4)}function Dd(hn,mn){var Sn=hn[mn-1+0],Ln=hn[mn-1+32],kn=hn[mn-1+64],jn=hn[mn-1-32],Vn=hn[mn+0-32],Wn=hn[mn+1-32],Jn=hn[mn+2-32],Ei=hn[mn+3-32];hn[mn+0+96]=mo(Ln,kn,hn[mn-1+96]),hn[mn+1+96]=hn[mn+0+64]=mo(Sn,Ln,kn),hn[mn+2+96]=hn[mn+1+64]=hn[mn+0+32]=mo(jn,Sn,Ln),hn[mn+3+96]=hn[mn+2+64]=hn[mn+1+32]=hn[mn+0+0]=mo(Vn,jn,Sn),hn[mn+3+64]=hn[mn+2+32]=hn[mn+1+0]=mo(Wn,Vn,jn),hn[mn+3+32]=hn[mn+2+0]=mo(Jn,Wn,Vn),hn[mn+3+0]=mo(Ei,Jn,Wn)}function Gd(hn,mn){var Sn=hn[mn+1-32],Ln=hn[mn+2-32],kn=hn[mn+3-32],jn=hn[mn+4-32],Vn=hn[mn+5-32],Wn=hn[mn+6-32],Jn=hn[mn+7-32];hn[mn+0+0]=mo(hn[mn+0-32],Sn,Ln),hn[mn+1+0]=hn[mn+0+32]=mo(Sn,Ln,kn),hn[mn+2+0]=hn[mn+1+32]=hn[mn+0+64]=mo(Ln,kn,jn),hn[mn+3+0]=hn[mn+2+32]=hn[mn+1+64]=hn[mn+0+96]=mo(kn,jn,Vn),hn[mn+3+32]=hn[mn+2+64]=hn[mn+1+96]=mo(jn,Vn,Wn),hn[mn+3+64]=hn[mn+2+96]=mo(Vn,Wn,Jn),hn[mn+3+96]=mo(Wn,Jn,Jn)}function Au(hn,mn){var Sn=hn[mn-1+0],Ln=hn[mn-1+32],kn=hn[mn-1+64],jn=hn[mn-1-32],Vn=hn[mn+0-32],Wn=hn[mn+1-32],Jn=hn[mn+2-32],Ei=hn[mn+3-32];hn[mn+0+0]=hn[mn+1+64]=jn+Vn+1>>1,hn[mn+1+0]=hn[mn+2+64]=Vn+Wn+1>>1,hn[mn+2+0]=hn[mn+3+64]=Wn+Jn+1>>1,hn[mn+3+0]=Jn+Ei+1>>1,hn[mn+0+96]=mo(kn,Ln,Sn),hn[mn+0+64]=mo(Ln,Sn,jn),hn[mn+0+32]=hn[mn+1+96]=mo(Sn,jn,Vn),hn[mn+1+32]=hn[mn+2+96]=mo(jn,Vn,Wn),hn[mn+2+32]=hn[mn+3+96]=mo(Vn,Wn,Jn),hn[mn+3+32]=mo(Wn,Jn,Ei)}function $u(hn,mn){var Sn=hn[mn+0-32],Ln=hn[mn+1-32],kn=hn[mn+2-32],jn=hn[mn+3-32],Vn=hn[mn+4-32],Wn=hn[mn+5-32],Jn=hn[mn+6-32],Ei=hn[mn+7-32];hn[mn+0+0]=Sn+Ln+1>>1,hn[mn+1+0]=hn[mn+0+64]=Ln+kn+1>>1,hn[mn+2+0]=hn[mn+1+64]=kn+jn+1>>1,hn[mn+3+0]=hn[mn+2+64]=jn+Vn+1>>1,hn[mn+0+32]=mo(Sn,Ln,kn),hn[mn+1+32]=hn[mn+0+96]=mo(Ln,kn,jn),hn[mn+2+32]=hn[mn+1+96]=mo(kn,jn,Vn),hn[mn+3+32]=hn[mn+2+96]=mo(jn,Vn,Wn),hn[mn+3+64]=mo(Vn,Wn,Jn),hn[mn+3+96]=mo(Wn,Jn,Ei)}function kh(hn,mn){var Sn=hn[mn-1+0],Ln=hn[mn-1+32],kn=hn[mn-1+64],jn=hn[mn-1+96];hn[mn+0+0]=Sn+Ln+1>>1,hn[mn+2+0]=hn[mn+0+32]=Ln+kn+1>>1,hn[mn+2+32]=hn[mn+0+64]=kn+jn+1>>1,hn[mn+1+0]=mo(Sn,Ln,kn),hn[mn+3+0]=hn[mn+1+32]=mo(Ln,kn,jn),hn[mn+3+32]=hn[mn+1+64]=mo(kn,jn,jn),hn[mn+3+64]=hn[mn+2+64]=hn[mn+0+96]=hn[mn+1+96]=hn[mn+2+96]=hn[mn+3+96]=jn}function Dh(hn,mn){var Sn=hn[mn-1+0],Ln=hn[mn-1+32],kn=hn[mn-1+64],jn=hn[mn-1+96],Vn=hn[mn-1-32],Wn=hn[mn+0-32],Jn=hn[mn+1-32],Ei=hn[mn+2-32];hn[mn+0+0]=hn[mn+2+32]=Sn+Vn+1>>1,hn[mn+0+32]=hn[mn+2+64]=Ln+Sn+1>>1,hn[mn+0+64]=hn[mn+2+96]=kn+Ln+1>>1,hn[mn+0+96]=jn+kn+1>>1,hn[mn+3+0]=mo(Wn,Jn,Ei),hn[mn+2+0]=mo(Vn,Wn,Jn),hn[mn+1+0]=hn[mn+3+32]=mo(Sn,Vn,Wn),hn[mn+1+32]=hn[mn+3+64]=mo(Ln,Sn,Vn),hn[mn+1+64]=hn[mn+3+96]=mo(kn,Ln,Sn),hn[mn+1+96]=mo(jn,kn,Ln)}function Gh(hn,mn){var Sn;for(Sn=0;8>Sn;++Sn)ke(hn,mn+32*Sn,hn,mn-32,8)}function qu(hn,mn){var Sn;for(Sn=0;8>Sn;++Sn)Ge(hn,mn,hn[mn-1],8),mn+=32}function nu(hn,mn,Sn){var Ln;for(Ln=0;8>Ln;++Ln)Ge(mn,Sn+32*Ln,hn,8)}function Fc(hn,mn){var Sn,Ln=8;for(Sn=0;8>Sn;++Sn)Ln+=hn[mn+Sn-32]+hn[mn-1+32*Sn];nu(Ln>>4,hn,mn)}function Fh(hn,mn){var Sn,Ln=4;for(Sn=0;8>Sn;++Sn)Ln+=hn[mn+Sn-32];nu(Ln>>3,hn,mn)}function iu(hn,mn){var Sn,Ln=4;for(Sn=0;8>Sn;++Sn)Ln+=hn[mn-1+32*Sn];nu(Ln>>3,hn,mn)}function Wu(hn,mn){nu(128,hn,mn)}function Eu(hn,mn,Sn){var Ln=hn[mn-Sn],kn=hn[mn+0],jn=3*(kn-Ln)+Hh[1020+hn[mn-2*Sn]-hn[mn+Sn]],Vn=Qd[112+(jn+4>>3)];hn[mn-Sn]=sc[255+Ln+Qd[112+(jn+3>>3)]],hn[mn+0]=sc[255+kn-Vn]}function Fd(hn,mn,Sn,Ln){var kn=hn[mn+0],jn=hn[mn+Sn];return pc[255+hn[mn-2*Sn]-hn[mn-Sn]]>Ln||pc[255+jn-kn]>Ln}function Ud(hn,mn,Sn,Ln){return 4*pc[255+hn[mn-Sn]-hn[mn+0]]+pc[255+hn[mn-2*Sn]-hn[mn+Sn]]<=Ln}function jd(hn,mn,Sn,Ln,kn){var jn=hn[mn-3*Sn],Vn=hn[mn-2*Sn],Wn=hn[mn-Sn],Jn=hn[mn+0],Ei=hn[mn+Sn],ji=hn[mn+2*Sn],Qi=hn[mn+3*Sn];return 4*pc[255+Wn-Jn]+pc[255+Vn-Ei]>Ln?0:pc[255+hn[mn-4*Sn]-jn]<=kn&&pc[255+jn-Vn]<=kn&&pc[255+Vn-Wn]<=kn&&pc[255+Qi-ji]<=kn&&pc[255+ji-Ei]<=kn&&pc[255+Ei-Jn]<=kn}function zd(hn,mn,Sn,Ln){var kn=2*Ln+1;for(Ln=0;16>Ln;++Ln)Ud(hn,mn+Ln,Sn,kn)&&Eu(hn,mn+Ln,Sn)}function Ic(hn,mn,Sn,Ln){var kn=2*Ln+1;for(Ln=0;16>Ln;++Ln)Ud(hn,mn+Ln*Sn,1,kn)&&Eu(hn,mn+Ln*Sn,1)}function Lc(hn,mn,Sn,Ln){var kn;for(kn=3;0<kn;--kn)zd(hn,mn+=4*Sn,Sn,Ln)}function Bh(hn,mn,Sn,Ln){var kn;for(kn=3;0<kn;--kn)Ic(hn,mn+=4,Sn,Ln)}function Bc(hn,mn,Sn,Ln,kn,jn,Vn,Wn){for(jn=2*jn+1;0<kn--;){if(jd(hn,mn,Sn,jn,Vn))if(Fd(hn,mn,Sn,Wn))Eu(hn,mn,Sn);else{var Jn=hn,Ei=mn,ji=Sn,Qi=Jn[Ei-2*ji],er=Jn[Ei-ji],Yi=Jn[Ei+0],Xr=Jn[Ei+ji],Nr=Jn[Ei+2*ji],Vi=27*(Hr=Hh[1020+3*(Yi-er)+Hh[1020+Qi-Xr]])+63>>7,qi=18*Hr+63>>7,Hr=9*Hr+63>>7;Jn[Ei-3*ji]=sc[255+Jn[Ei-3*ji]+Hr],Jn[Ei-2*ji]=sc[255+Qi+qi],Jn[Ei-ji]=sc[255+er+Vi],Jn[Ei+0]=sc[255+Yi-Vi],Jn[Ei+ji]=sc[255+Xr-qi],Jn[Ei+2*ji]=sc[255+Nr-Hr]}mn+=Ln}}function _c(hn,mn,Sn,Ln,kn,jn,Vn,Wn){for(jn=2*jn+1;0<kn--;){if(jd(hn,mn,Sn,jn,Vn))if(Fd(hn,mn,Sn,Wn))Eu(hn,mn,Sn);else{var Jn=hn,Ei=mn,ji=Sn,Qi=Jn[Ei-ji],er=Jn[Ei+0],Yi=Jn[Ei+ji],Xr=Qd[112+((Nr=3*(er-Qi))+4>>3)],Nr=Qd[112+(Nr+3>>3)],Vi=Xr+1>>1;Jn[Ei-2*ji]=sc[255+Jn[Ei-2*ji]+Vi],Jn[Ei-ji]=sc[255+Qi+Nr],Jn[Ei+0]=sc[255+er-Xr],Jn[Ei+ji]=sc[255+Yi-Vi]}mn+=Ln}}function Yu(hn,mn,Sn,Ln,kn,jn){Bc(hn,mn,Sn,1,16,Ln,kn,jn)}function ru(hn,mn,Sn,Ln,kn,jn){Bc(hn,mn,1,Sn,16,Ln,kn,jn)}function Uh(hn,mn,Sn,Ln,kn,jn){var Vn;for(Vn=3;0<Vn;--Vn)_c(hn,mn+=4*Sn,Sn,1,16,Ln,kn,jn)}function Su(hn,mn,Sn,Ln,kn,jn){var Vn;for(Vn=3;0<Vn;--Vn)_c(hn,mn+=4,1,Sn,16,Ln,kn,jn)}function jh(hn,mn,Sn,Ln,kn,jn,Vn,Wn){Bc(hn,mn,kn,1,8,jn,Vn,Wn),Bc(Sn,Ln,kn,1,8,jn,Vn,Wn)}function Xu(hn,mn,Sn,Ln,kn,jn,Vn,Wn){Bc(hn,mn,1,kn,8,jn,Vn,Wn),Bc(Sn,Ln,1,kn,8,jn,Vn,Wn)}function Ku(hn,mn,Sn,Ln,kn,jn,Vn,Wn){_c(hn,mn+4*kn,kn,1,8,jn,Vn,Wn),_c(Sn,Ln+4*kn,kn,1,8,jn,Vn,Wn)}function $d(hn,mn,Sn,Ln,kn,jn,Vn,Wn){_c(hn,mn+4,1,kn,8,jn,Vn,Wn),_c(Sn,Ln+4,1,kn,8,jn,Vn,Wn)}function bu(){this.ba=new Ko,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ho,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Zu(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ju(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function qd(){this.ua=0,this.Wa=new Fn,this.vb=new Fn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Tn,this.yc=new Cn}function Vh(){this.xb=this.a=0,this.l=new yu,this.ca=new Ko,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new On,this.Pb=0,this.wd=new On,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new qd,this.ab=0,this.gc=je(4,Ju),this.Oc=0}function Iu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new yu,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function su(hn,mn,Sn,Ln,kn,jn,Vn){for(hn=hn==null?0:hn[mn+0],mn=0;mn<Vn;++mn)kn[jn+mn]=hn+Sn[Ln+mn]&255,hn=kn[jn+mn]}function Qu(hn,mn,Sn,Ln,kn,jn,Vn){var Wn;if(hn==null)su(null,null,Sn,Ln,kn,jn,Vn);else for(Wn=0;Wn<Vn;++Wn)kn[jn+Wn]=hn[mn+Wn]+Sn[Ln+Wn]&255}function Uc(hn,mn,Sn,Ln,kn,jn,Vn){if(hn==null)su(null,null,Sn,Ln,kn,jn,Vn);else{var Wn,Jn=hn[mn+0],Ei=Jn,ji=Jn;for(Wn=0;Wn<Vn;++Wn)Ei=ji+(Jn=hn[mn+Wn])-Ei,ji=Sn[Ln+Wn]+(-256&Ei?0>Ei?0:255:Ei)&255,Ei=Jn,kn[jn+Wn]=ji}}function nd(hn,mn,Sn,Ln){var kn=mn.width,jn=mn.o;if(e(hn!=null&&mn!=null),0>Sn||0>=Ln||Sn+Ln>jn)return null;if(!hn.Cc){if(hn.ga==null){var Vn;if(hn.ga=new Iu,(Vn=hn.ga==null)||(Vn=mn.width*mn.o,e(hn.Gb.length==0),hn.Gb=Be(Vn),hn.Uc=0,hn.Gb==null?Vn=0:(hn.mb=hn.Gb,hn.nb=hn.Uc,hn.rc=null,Vn=1),Vn=!Vn),!Vn){Vn=hn.ga;var Wn=hn.Fa,Jn=hn.P,Ei=hn.qc,ji=hn.mb,Qi=hn.nb,er=Jn+1,Yi=Ei-1,Xr=Vn.l;if(e(Wn!=null&&ji!=null&&mn!=null),Wc[0]=null,Wc[1]=su,Wc[2]=Qu,Wc[3]=Uc,Vn.ca=ji,Vn.tb=Qi,Vn.c=mn.width,Vn.i=mn.height,e(0<Vn.c&&0<Vn.i),1>=Ei)mn=0;else if(Vn.$a=Wn[Jn+0]>>0&3,Vn.Z=Wn[Jn+0]>>2&3,Vn.Lc=Wn[Jn+0]>>4&3,Jn=Wn[Jn+0]>>6&3,0>Vn.$a||1<Vn.$a||4<=Vn.Z||1<Vn.Lc||Jn)mn=0;else if(Xr.put=Ma,Xr.ac=jo,Xr.bc=uo,Xr.ma=Vn,Xr.width=mn.width,Xr.height=mn.height,Xr.Da=mn.Da,Xr.v=mn.v,Xr.va=mn.va,Xr.j=mn.j,Xr.o=mn.o,Vn.$a)e:{e(Vn.$a==1),mn=za();t:for(;;){if(mn==null){mn=0;break e}if(e(Vn!=null),Vn.mc=mn,mn.c=Vn.c,mn.i=Vn.i,mn.l=Vn.l,mn.l.ma=Vn,mn.l.width=Vn.c,mn.l.height=Vn.i,mn.a=0,$n(mn.m,Wn,er,Yi),!Sc(Vn.c,Vn.i,1,mn,null)||(mn.ab==1&&mn.gc[0].hc==3&&Za(mn.s)?(Vn.ic=1,Wn=mn.c*mn.i,mn.Ta=null,mn.Ua=0,mn.V=Be(Wn),mn.Ba=0,mn.V==null?(mn.a=1,mn=0):mn=1):(Vn.ic=0,mn=tu(mn,Vn.c)),!mn))break t;mn=1;break e}Vn.mc=null,mn=0}else mn=Yi>=Vn.c*Vn.i;Vn=!mn}if(Vn)return null;hn.ga.Lc!=1?hn.Ga=0:Ln=jn-Sn}e(hn.ga!=null),e(Sn+Ln<=jn);e:{if(mn=(Wn=hn.ga).c,jn=Wn.l.o,Wn.$a==0){if(er=hn.rc,Yi=hn.Vc,Xr=hn.Fa,Jn=hn.P+1+Sn*mn,Ei=hn.mb,ji=hn.nb+Sn*mn,e(Jn<=hn.P+hn.qc),Wn.Z!=0)for(e(Wc[Wn.Z]!=null),Vn=0;Vn<Ln;++Vn)Wc[Wn.Z](er,Yi,Xr,Jn,Ei,ji,mn),er=Ei,Yi=ji,ji+=mn,Jn+=mn;else for(Vn=0;Vn<Ln;++Vn)ke(Ei,ji,Xr,Jn,mn),er=Ei,Yi=ji,ji+=mn,Jn+=mn;hn.rc=er,hn.Vc=Yi}else{if(e(Wn.mc!=null),mn=Sn+Ln,e((Vn=Wn.mc)!=null),e(mn<=Vn.i),Vn.C>=mn)mn=1;else if(Wn.ic||Ki(),Wn.ic){Wn=Vn.V,er=Vn.Ba,Yi=Vn.c;var Nr=Vn.i,Vi=(Xr=1,Jn=Vn.$/Yi,Ei=Vn.$%Yi,ji=Vn.m,Qi=Vn.s,Vn.$),qi=Yi*Nr,Hr=Yi*mn,xs=Qi.wc,Yr=Vi<Hr?Oo(Qi,Ei,Jn):null;e(Vi<=qi),e(mn<=Nr),e(Za(Qi));t:for(;;){for(;!ji.h&&Vi<Hr;){if(Ei&xs||(Yr=Oo(Qi,Ei,Jn)),e(Yr!=null),Si(ji),256>(Nr=Qo(Yr.G[0],Yr.H[0],ji)))Wn[er+Vi]=Nr,++Vi,++Ei>=Yi&&(Ei=0,++Jn<=mn&&!(Jn%16)&&ic(Vn,Jn));else{if(!(280>Nr)){Xr=0;break t}Nr=ta(Nr-256,ji);var eo,Ws=Qo(Yr.G[4],Yr.H[4],ji);if(Si(ji),!(Vi>=(Ws=ya(Yi,Ws=ta(Ws,ji)))&&qi-Vi>=Nr)){Xr=0;break t}for(eo=0;eo<Nr;++eo)Wn[er+Vi+eo]=Wn[er+Vi+eo-Ws];for(Vi+=Nr,Ei+=Nr;Ei>=Yi;)Ei-=Yi,++Jn<=mn&&!(Jn%16)&&ic(Vn,Jn);Vi<Hr&&Ei&xs&&(Yr=Oo(Qi,Ei,Jn))}e(ji.h==Un(ji))}ic(Vn,Jn>mn?mn:Jn);break t}!Xr||ji.h&&Vi<qi?(Xr=0,Vn.a=ji.h?5:3):Vn.$=Vi,mn=Xr}else mn=Rl(Vn,Vn.V,Vn.Ba,Vn.c,Vn.i,mn,hu);if(!mn){Ln=0;break e}}Sn+Ln>=jn&&(hn.Cc=1),Ln=1}if(!Ln)return null;if(hn.Cc&&((Ln=hn.ga)!=null&&(Ln.mc=null),hn.ga=null,0<hn.Ga))return alert("todo:WebPDequantizeLevels"),null}return hn.nb+Sn*kn}function _n(hn,mn,Sn,Ln,kn,jn){for(;0<kn--;){var Vn,Wn=hn,Jn=mn+(Sn?1:0),Ei=hn,ji=mn+(Sn?0:3);for(Vn=0;Vn<Ln;++Vn){var Qi=Ei[ji+4*Vn];Qi!=255&&(Qi*=32897,Wn[Jn+4*Vn+0]=Wn[Jn+4*Vn+0]*Qi>>23,Wn[Jn+4*Vn+1]=Wn[Jn+4*Vn+1]*Qi>>23,Wn[Jn+4*Vn+2]=Wn[Jn+4*Vn+2]*Qi>>23)}mn+=jn}}function Dn(hn,mn,Sn,Ln,kn){for(;0<Ln--;){var jn;for(jn=0;jn<Sn;++jn){var Vn=hn[mn+2*jn+0],Wn=15&(Ei=hn[mn+2*jn+1]),Jn=4369*Wn,Ei=(240&Ei|Ei>>4)*Jn>>16;hn[mn+2*jn+0]=(240&Vn|Vn>>4)*Jn>>16&240|(15&Vn|Vn<<4)*Jn>>16>>4&15,hn[mn+2*jn+1]=240&Ei|Wn}mn+=kn}}function Pi(hn,mn,Sn,Ln,kn,jn,Vn,Wn){var Jn,Ei,ji=255;for(Ei=0;Ei<kn;++Ei){for(Jn=0;Jn<Ln;++Jn){var Qi=hn[mn+Jn];jn[Vn+4*Jn]=Qi,ji&=Qi}mn+=Sn,Vn+=Wn}return ji!=255}function Fi(hn,mn,Sn,Ln,kn){var jn;for(jn=0;jn<kn;++jn)Sn[Ln+jn]=hn[mn+jn]>>8}function Ki(){fc=_n,na=Dn,ra=Pi,Ta=Fi}function Br(hn,mn,Sn){bn[hn]=function(Ln,kn,jn,Vn,Wn,Jn,Ei,ji,Qi,er,Yi,Xr,Nr,Vi,qi,Hr,xs){var Yr,eo=xs-1>>1,Ws=Wn[Jn+0]|Ei[ji+0]<<16,ao=Qi[er+0]|Yi[Xr+0]<<16;e(Ln!=null);var Zs=3*Ws+ao+131074>>2;for(mn(Ln[kn+0],255&Zs,Zs>>16,Nr,Vi),jn!=null&&(Zs=3*ao+Ws+131074>>2,mn(jn[Vn+0],255&Zs,Zs>>16,qi,Hr)),Yr=1;Yr<=eo;++Yr){var qo=Wn[Jn+Yr]|Ei[ji+Yr]<<16,Wo=Qi[er+Yr]|Yi[Xr+Yr]<<16,Fo=Ws+qo+ao+Wo+524296,No=Fo+2*(qo+ao)>>3;Zs=No+Ws>>1,Ws=(Fo=Fo+2*(Ws+Wo)>>3)+qo>>1,mn(Ln[kn+2*Yr-1],255&Zs,Zs>>16,Nr,Vi+(2*Yr-1)*Sn),mn(Ln[kn+2*Yr-0],255&Ws,Ws>>16,Nr,Vi+(2*Yr-0)*Sn),jn!=null&&(Zs=Fo+ao>>1,Ws=No+Wo>>1,mn(jn[Vn+2*Yr-1],255&Zs,Zs>>16,qi,Hr+(2*Yr-1)*Sn),mn(jn[Vn+2*Yr+0],255&Ws,Ws>>16,qi,Hr+(2*Yr+0)*Sn)),Ws=qo,ao=Wo}1&xs||(Zs=3*Ws+ao+131074>>2,mn(Ln[kn+xs-1],255&Zs,Zs>>16,Nr,Vi+(xs-1)*Sn),jn!=null&&(Zs=3*ao+Ws+131074>>2,mn(jn[Vn+xs-1],255&Zs,Zs>>16,qi,Hr+(xs-1)*Sn)))}}function Gs(){gc[eh]=wp,gc[th]=mf,gc[df]=Pp,gc[nh]=yf,gc[ih]=vf,gc[$h]=_f,gc[hf]=xp,gc[qh]=mf,gc[Wh]=yf,gc[rh]=vf,gc[Yh]=_f}function Qs(hn){return hn&-16384?0>hn?0:255:hn>>Lp}function so(hn,mn){return Qs((19077*hn>>8)+(26149*mn>>8)-14234)}function vo(hn,mn,Sn){return Qs((19077*hn>>8)-(6419*mn>>8)-(13320*Sn>>8)+8708)}function yo(hn,mn){return Qs((19077*hn>>8)+(33050*mn>>8)-17685)}function Go(hn,mn,Sn,Ln,kn){Ln[kn+0]=so(hn,Sn),Ln[kn+1]=vo(hn,mn,Sn),Ln[kn+2]=yo(hn,mn)}function Aa(hn,mn,Sn,Ln,kn){Ln[kn+0]=yo(hn,mn),Ln[kn+1]=vo(hn,mn,Sn),Ln[kn+2]=so(hn,Sn)}function Sa(hn,mn,Sn,Ln,kn){var jn=vo(hn,mn,Sn);mn=jn<<3&224|yo(hn,mn)>>3,Ln[kn+0]=248&so(hn,Sn)|jn>>5,Ln[kn+1]=mn}function Oa(hn,mn,Sn,Ln,kn){var jn=240&yo(hn,mn)|15;Ln[kn+0]=240&so(hn,Sn)|vo(hn,mn,Sn)>>4,Ln[kn+1]=jn}function Xa(hn,mn,Sn,Ln,kn){Ln[kn+0]=255,Go(hn,mn,Sn,Ln,kn+1)}function Fa(hn,mn,Sn,Ln,kn){Aa(hn,mn,Sn,Ln,kn),Ln[kn+3]=255}function Cc(hn,mn,Sn,Ln,kn){Go(hn,mn,Sn,Ln,kn),Ln[kn+3]=255}function rc(hn,mn){return 0>hn?0:hn>mn?mn:hn}function wc(hn,mn,Sn){bn[hn]=function(Ln,kn,jn,Vn,Wn,Jn,Ei,ji,Qi){for(var er=ji+(-2&Qi)*Sn;ji!=er;)mn(Ln[kn+0],jn[Vn+0],Wn[Jn+0],Ei,ji),mn(Ln[kn+1],jn[Vn+0],Wn[Jn+0],Ei,ji+Sn),kn+=2,++Vn,++Jn,ji+=2*Sn;1&Qi&&mn(Ln[kn+0],jn[Vn+0],Wn[Jn+0],Ei,ji)}}function Wd(hn,mn,Sn){return Sn==0?hn==0?mn==0?6:5:mn==0?4:0:Sn}function id(hn,mn,Sn,Ln,kn){switch(hn>>>30){case 3:Mc(mn,Sn,Ln,kn,0);break;case 2:xa(mn,Sn,Ln,kn);break;case 1:Al(mn,Sn,Ln,kn)}}function rd(hn,mn){var Sn,Ln,kn=mn.M,jn=mn.Nb,Vn=hn.oc,Wn=hn.pc+40,Jn=hn.oc,Ei=hn.pc+584,ji=hn.oc,Qi=hn.pc+600;for(Sn=0;16>Sn;++Sn)Vn[Wn+32*Sn-1]=129;for(Sn=0;8>Sn;++Sn)Jn[Ei+32*Sn-1]=129,ji[Qi+32*Sn-1]=129;for(0<kn?Vn[Wn-1-32]=Jn[Ei-1-32]=ji[Qi-1-32]=129:(Ge(Vn,Wn-32-1,127,21),Ge(Jn,Ei-32-1,127,9),Ge(ji,Qi-32-1,127,9)),Ln=0;Ln<hn.za;++Ln){var er=mn.ya[mn.aa+Ln];if(0<Ln){for(Sn=-1;16>Sn;++Sn)ke(Vn,Wn+32*Sn-4,Vn,Wn+32*Sn+12,4);for(Sn=-1;8>Sn;++Sn)ke(Jn,Ei+32*Sn-4,Jn,Ei+32*Sn+4,4),ke(ji,Qi+32*Sn-4,ji,Qi+32*Sn+4,4)}var Yi=hn.Gd,Xr=hn.Hd+Ln,Nr=er.ad,Vi=er.Hc;if(0<kn&&(ke(Vn,Wn-32,Yi[Xr].y,0,16),ke(Jn,Ei-32,Yi[Xr].f,0,8),ke(ji,Qi-32,Yi[Xr].ea,0,8)),er.Za){var qi=Vn,Hr=Wn-32+16;for(0<kn&&(Ln>=hn.za-1?Ge(qi,Hr,Yi[Xr].y[15],4):ke(qi,Hr,Yi[Xr+1].y,0,4)),Sn=0;4>Sn;Sn++)qi[Hr+128+Sn]=qi[Hr+256+Sn]=qi[Hr+384+Sn]=qi[Hr+0+Sn];for(Sn=0;16>Sn;++Sn,Vi<<=2)qi=Vn,Hr=Wn+Af[Sn],Ac[er.Ob[Sn]](qi,Hr),id(Vi,Nr,16*+Sn,qi,Hr)}else if(qi=Wd(Ln,kn,er.Ob[0]),qc[qi](Vn,Wn),Vi!=0)for(Sn=0;16>Sn;++Sn,Vi<<=2)id(Vi,Nr,16*+Sn,Vn,Wn+Af[Sn]);for(Sn=er.Gc,qi=Wd(Ln,kn,er.Dd),Nc[qi](Jn,Ei),Nc[qi](ji,Qi),Vi=Nr,qi=Jn,Hr=Ei,255&(er=Sn>>0)&&(170&er?cd(Vi,256,qi,Hr):dc(Vi,256,qi,Hr)),er=ji,Vi=Qi,255&(Sn>>=8)&&(170&Sn?cd(Nr,320,er,Vi):dc(Nr,320,er,Vi)),kn<hn.Ub-1&&(ke(Yi[Xr].y,0,Vn,Wn+480,16),ke(Yi[Xr].f,0,Jn,Ei+224,8),ke(Yi[Xr].ea,0,ji,Qi+224,8)),Sn=8*jn*hn.B,Yi=hn.sa,Xr=hn.ta+16*Ln+16*jn*hn.R,Nr=hn.qa,er=hn.ra+8*Ln+Sn,Vi=hn.Ha,qi=hn.Ia+8*Ln+Sn,Sn=0;16>Sn;++Sn)ke(Yi,Xr+Sn*hn.R,Vn,Wn+32*Sn,16);for(Sn=0;8>Sn;++Sn)ke(Nr,er+Sn*hn.B,Jn,Ei+32*Sn,8),ke(Vi,qi+Sn*hn.B,ji,Qi+32*Sn,8)}}function wu(hn,mn,Sn,Ln,kn,jn,Vn,Wn,Jn){var Ei=[0],ji=[0],Qi=0,er=Jn!=null?Jn.kd:0,Yi=Jn??new Zu;if(hn==null||12>Sn)return 7;Yi.data=hn,Yi.w=mn,Yi.ha=Sn,mn=[mn],Sn=[Sn],Yi.gb=[Yi.gb];e:{var Xr=mn,Nr=Sn,Vi=Yi.gb;if(e(hn!=null),e(Nr!=null),e(Vi!=null),Vi[0]=0,12<=Nr[0]&&!t(hn,Xr[0],"RIFF")){if(t(hn,Xr[0]+8,"WEBP")){Vi=3;break e}var qi=Bn(hn,Xr[0]+4);if(12>qi||4294967286<qi){Vi=3;break e}if(er&&qi>Nr[0]-8){Vi=7;break e}Vi[0]=qi,Xr[0]+=12,Nr[0]-=12}Vi=0}if(Vi!=0)return Vi;for(qi=0<Yi.gb[0],Sn=Sn[0];;){e:{var Hr=hn;Nr=mn,Vi=Sn;var xs=Ei,Yr=ji,eo=Xr=[0];if((Zs=Qi=[Qi])[0]=0,8>Vi[0])Vi=7;else{if(!t(Hr,Nr[0],"VP8X")){if(Bn(Hr,Nr[0]+4)!=10){Vi=3;break e}if(18>Vi[0]){Vi=7;break e}var Ws=Bn(Hr,Nr[0]+8),ao=1+Fr(Hr,Nr[0]+12);if(2147483648<=ao*(Hr=1+Fr(Hr,Nr[0]+15))){Vi=3;break e}eo!=null&&(eo[0]=Ws),xs!=null&&(xs[0]=ao),Yr!=null&&(Yr[0]=Hr),Nr[0]+=18,Vi[0]-=18,Zs[0]=1}Vi=0}}if(Qi=Qi[0],Xr=Xr[0],Vi!=0)return Vi;if(Nr=!!(2&Xr),!qi&&Qi)return 3;if(jn!=null&&(jn[0]=!!(16&Xr)),Vn!=null&&(Vn[0]=Nr),Wn!=null&&(Wn[0]=0),Vn=Ei[0],Xr=ji[0],Qi&&Nr&&Jn==null){Vi=0;break}if(4>Sn){Vi=7;break}if(qi&&Qi||!qi&&!Qi&&!t(hn,mn[0],"ALPH")){Sn=[Sn],Yi.na=[Yi.na],Yi.P=[Yi.P],Yi.Sa=[Yi.Sa];e:{Ws=hn,Vi=mn,qi=Sn;var Zs=Yi.gb;xs=Yi.na,Yr=Yi.P,eo=Yi.Sa,ao=22,e(Ws!=null),e(qi!=null),Hr=Vi[0];var qo=qi[0];for(e(xs!=null),e(eo!=null),xs[0]=null,Yr[0]=null,eo[0]=0;;){if(Vi[0]=Hr,qi[0]=qo,8>qo){Vi=7;break e}var Wo=Bn(Ws,Hr+4);if(4294967286<Wo){Vi=3;break e}var Fo=8+Wo+1&-2;if(ao+=Fo,0<Zs&&ao>Zs){Vi=3;break e}if(!t(Ws,Hr,"VP8 ")||!t(Ws,Hr,"VP8L")){Vi=0;break e}if(qo[0]<Fo){Vi=7;break e}t(Ws,Hr,"ALPH")||(xs[0]=Ws,Yr[0]=Hr+8,eo[0]=Wo),Hr+=Fo,qo-=Fo}}if(Sn=Sn[0],Yi.na=Yi.na[0],Yi.P=Yi.P[0],Yi.Sa=Yi.Sa[0],Vi!=0)break}Sn=[Sn],Yi.Ja=[Yi.Ja],Yi.xa=[Yi.xa];e:if(Zs=hn,Vi=mn,qi=Sn,xs=Yi.gb[0],Yr=Yi.Ja,eo=Yi.xa,Ws=Vi[0],Hr=!t(Zs,Ws,"VP8 "),ao=!t(Zs,Ws,"VP8L"),e(Zs!=null),e(qi!=null),e(Yr!=null),e(eo!=null),8>qi[0])Vi=7;else{if(Hr||ao){if(Zs=Bn(Zs,Ws+4),12<=xs&&Zs>xs-12){Vi=3;break e}if(er&&Zs>qi[0]-8){Vi=7;break e}Yr[0]=Zs,Vi[0]+=8,qi[0]-=8,eo[0]=ao}else eo[0]=5<=qi[0]&&Zs[Ws+0]==47&&!(Zs[Ws+4]>>5),Yr[0]=qi[0];Vi=0}if(Sn=Sn[0],Yi.Ja=Yi.Ja[0],Yi.xa=Yi.xa[0],mn=mn[0],Vi!=0)break;if(4294967286<Yi.Ja)return 3;if(Wn==null||Nr||(Wn[0]=Yi.xa?2:1),Vn=[Vn],Xr=[Xr],Yi.xa){if(5>Sn){Vi=7;break}Wn=Vn,er=Xr,Nr=jn,hn==null||5>Sn?hn=0:5<=Sn&&hn[mn+0]==47&&!(hn[mn+4]>>5)?(qi=[0],Zs=[0],xs=[0],$n(Yr=new On,hn,mn,Sn),to(Yr,qi,Zs,xs)?(Wn!=null&&(Wn[0]=qi[0]),er!=null&&(er[0]=Zs[0]),Nr!=null&&(Nr[0]=xs[0]),hn=1):hn=0):hn=0}else{if(10>Sn){Vi=7;break}Wn=Xr,hn==null||10>Sn||!Pd(hn,mn+3,Sn-3)?hn=0:(er=hn[mn+0]|hn[mn+1]<<8|hn[mn+2]<<16,Nr=16383&(hn[mn+7]<<8|hn[mn+6]),hn=16383&(hn[mn+9]<<8|hn[mn+8]),1&er||3<(er>>1&7)||!(er>>4&1)||er>>5>=Yi.Ja||!Nr||!hn?hn=0:(Vn&&(Vn[0]=Nr),Wn&&(Wn[0]=hn),hn=1))}if(!hn||(Vn=Vn[0],Xr=Xr[0],Qi&&(Ei[0]!=Vn||ji[0]!=Xr)))return 3;Jn!=null&&(Jn[0]=Yi,Jn.offset=mn-Jn.w,e(4294967286>mn-Jn.w),e(Jn.offset==Jn.ha-Sn));break}return Vi==0||Vi==7&&Qi&&Jn==null?(jn!=null&&(jn[0]|=Yi.na!=null&&0<Yi.na.length),Ln!=null&&(Ln[0]=Vn),kn!=null&&(kn[0]=Xr),0):Vi}function sd(hn,mn,Sn){var Ln=mn.width,kn=mn.height,jn=0,Vn=0,Wn=Ln,Jn=kn;if(mn.Da=hn!=null&&0<hn.Da,mn.Da&&(Wn=hn.cd,Jn=hn.bd,jn=hn.v,Vn=hn.j,11>Sn||(jn&=-2,Vn&=-2),0>jn||0>Vn||0>=Wn||0>=Jn||jn+Wn>Ln||Vn+Jn>kn))return 0;if(mn.v=jn,mn.j=Vn,mn.va=jn+Wn,mn.o=Vn+Jn,mn.U=Wn,mn.T=Jn,mn.da=hn!=null&&0<hn.da,mn.da){if(!$i(Wn,Jn,Sn=[hn.ib],jn=[hn.hb]))return 0;mn.ib=Sn[0],mn.hb=jn[0]}return mn.ob=hn!=null&&hn.ob,mn.Kb=hn==null||!hn.Sd,mn.da&&(mn.ob=mn.ib<3*Ln/4&&mn.hb<3*kn/4,mn.Kb=0),1}function od(hn){if(hn==null)return 2;if(11>hn.S){var mn=hn.f.RGBA;mn.fb+=(hn.height-1)*mn.A,mn.A=-mn.A}else mn=hn.f.kb,hn=hn.height,mn.O+=(hn-1)*mn.fa,mn.fa=-mn.fa,mn.N+=(hn-1>>1)*mn.Ab,mn.Ab=-mn.Ab,mn.W+=(hn-1>>1)*mn.Db,mn.Db=-mn.Db,mn.F!=null&&(mn.J+=(hn-1)*mn.lb,mn.lb=-mn.lb);return 0}function Pu(hn,mn,Sn,Ln){if(Ln==null||0>=hn||0>=mn)return 2;if(Sn!=null){if(Sn.Da){var kn=Sn.cd,jn=Sn.bd,Vn=-2&Sn.v,Wn=-2&Sn.j;if(0>Vn||0>Wn||0>=kn||0>=jn||Vn+kn>hn||Wn+jn>mn)return 2;hn=kn,mn=jn}if(Sn.da){if(!$i(hn,mn,kn=[Sn.ib],jn=[Sn.hb]))return 2;hn=kn[0],mn=jn[0]}}Ln.width=hn,Ln.height=mn;e:{var Jn=Ln.width,Ei=Ln.height;if(hn=Ln.S,0>=Jn||0>=Ei||!(hn>=eh&&13>hn))hn=2;else{if(0>=Ln.Rd&&Ln.sd==null){Vn=jn=kn=mn=0;var ji=(Wn=Jn*Ef[hn])*Ei;if(11>hn||(jn=(Ei+1)/2*(mn=(Jn+1)/2),hn==12&&(Vn=(kn=Jn)*Ei)),(Ei=Be(ji+2*jn+Vn))==null){hn=1;break e}Ln.sd=Ei,11>hn?((Jn=Ln.f.RGBA).eb=Ei,Jn.fb=0,Jn.A=Wn,Jn.size=ji):((Jn=Ln.f.kb).y=Ei,Jn.O=0,Jn.fa=Wn,Jn.Fd=ji,Jn.f=Ei,Jn.N=0+ji,Jn.Ab=mn,Jn.Cd=jn,Jn.ea=Ei,Jn.W=0+ji+jn,Jn.Db=mn,Jn.Ed=jn,hn==12&&(Jn.F=Ei,Jn.J=0+ji+2*jn),Jn.Tc=Vn,Jn.lb=kn)}if(mn=1,kn=Ln.S,jn=Ln.width,Vn=Ln.height,kn>=eh&&13>kn)if(11>kn)hn=Ln.f.RGBA,mn&=(Wn=Math.abs(hn.A))*(Vn-1)+jn<=hn.size,mn&=Wn>=jn*Ef[kn],mn&=hn.eb!=null;else{hn=Ln.f.kb,Wn=(jn+1)/2,ji=(Vn+1)/2,Jn=Math.abs(hn.fa),Ei=Math.abs(hn.Ab);var Qi=Math.abs(hn.Db),er=Math.abs(hn.lb),Yi=er*(Vn-1)+jn;mn&=Jn*(Vn-1)+jn<=hn.Fd,mn&=Ei*(ji-1)+Wn<=hn.Cd,mn=(mn&=Qi*(ji-1)+Wn<=hn.Ed)&Jn>=jn&Ei>=Wn&Qi>=Wn,mn&=hn.y!=null,mn&=hn.f!=null,mn&=hn.ea!=null,kn==12&&(mn&=er>=jn,mn&=Yi<=hn.Tc,mn&=hn.F!=null)}else mn=0;hn=mn?0:2}}return hn!=0||Sn!=null&&Sn.fd&&(hn=od(Ln)),hn}var Ha=64,xu=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Lu=24,Tu=32,ad=8,Vl=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];zi("Predictor0","PredictorAdd0"),bn.Predictor0=function(){return 4278190080},bn.Predictor1=function(hn){return hn},bn.Predictor2=function(hn,mn,Sn){return mn[Sn+0]},bn.Predictor3=function(hn,mn,Sn){return mn[Sn+1]},bn.Predictor4=function(hn,mn,Sn){return mn[Sn-1]},bn.Predictor5=function(hn,mn,Sn){return Gi(Gi(hn,mn[Sn+1]),mn[Sn+0])},bn.Predictor6=function(hn,mn,Sn){return Gi(hn,mn[Sn-1])},bn.Predictor7=function(hn,mn,Sn){return Gi(hn,mn[Sn+0])},bn.Predictor8=function(hn,mn,Sn){return Gi(mn[Sn-1],mn[Sn+0])},bn.Predictor9=function(hn,mn,Sn){return Gi(mn[Sn+0],mn[Sn+1])},bn.Predictor10=function(hn,mn,Sn){return Gi(Gi(hn,mn[Sn-1]),Gi(mn[Sn+0],mn[Sn+1]))},bn.Predictor11=function(hn,mn,Sn){var Ln=mn[Sn+0];return 0>=Oi(Ln>>24&255,hn>>24&255,(mn=mn[Sn-1])>>24&255)+Oi(Ln>>16&255,hn>>16&255,mn>>16&255)+Oi(Ln>>8&255,hn>>8&255,mn>>8&255)+Oi(255&Ln,255&hn,255&mn)?Ln:hn},bn.Predictor12=function(hn,mn,Sn){var Ln=mn[Sn+0];return(Ti((hn>>24&255)+(Ln>>24&255)-((mn=mn[Sn-1])>>24&255))<<24|Ti((hn>>16&255)+(Ln>>16&255)-(mn>>16&255))<<16|Ti((hn>>8&255)+(Ln>>8&255)-(mn>>8&255))<<8|Ti((255&hn)+(255&Ln)-(255&mn)))>>>0},bn.Predictor13=function(hn,mn,Sn){var Ln=mn[Sn-1];return(Mi((hn=Gi(hn,mn[Sn+0]))>>24&255,Ln>>24&255)<<24|Mi(hn>>16&255,Ln>>16&255)<<16|Mi(hn>>8&255,Ln>>8&255)<<8|Mi(hn>>0&255,Ln>>0&255))>>>0};var zh=bn.PredictorAdd0;bn.PredictorAdd1=Xi,zi("Predictor2","PredictorAdd2"),zi("Predictor3","PredictorAdd3"),zi("Predictor4","PredictorAdd4"),zi("Predictor5","PredictorAdd5"),zi("Predictor6","PredictorAdd6"),zi("Predictor7","PredictorAdd7"),zi("Predictor8","PredictorAdd8"),zi("Predictor9","PredictorAdd9"),zi("Predictor10","PredictorAdd10"),zi("Predictor11","PredictorAdd11"),zi("Predictor12","PredictorAdd12"),zi("Predictor13","PredictorAdd13");var ld=bn.PredictorAdd2;Us("ColorIndexInverseTransform","MapARGB","32b",function(hn){return hn>>8&255},function(hn){return hn}),Us("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(hn){return hn},function(hn){return hn>>8&255});var Yd,uc=bn.ColorIndexInverseTransform,Ru=bn.MapARGB,Xd=bn.VP8LColorIndexInverseTransformAlpha,Kd=bn.MapAlpha,jc=bn.VP8LPredictorsAdd=[];jc.length=16,(bn.VP8LPredictors=[]).length=16,(bn.VP8LPredictorsAdd_C=[]).length=16,(bn.VP8LPredictors_C=[]).length=16;var ou,Hl,Ja,Vc,Tc,Rc,Mu,Mc,xa,cd,Al,dc,Ou,Zd,ud,au,lu,zc,cu,Nu,uu,$c,dd,hc,fc,na,ra,Ta,Da=Be(511),Oc=Be(2041),hd=Be(225),ku=Be(767),Jd=0,Hh=Oc,Qd=hd,sc=ku,pc=Da,eh=0,th=1,df=2,nh=3,ih=4,$h=5,hf=6,qh=7,Wh=8,rh=9,Yh=10,hp=[2,3,7],fp=[3,3,11],ff=[280,256,256,256,40],pp=[0,1,1,1,0],gp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],mp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],yp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],vp=8,Xh=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Kh=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],pd=null,_p=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Cp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],pf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Ap=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ep=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Sp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],bp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],qc=[],Ac=[],Nc=[],Ip=1,gf=2,Wc=[],gc=[];Br("UpsampleRgbLinePair",Go,3),Br("UpsampleBgrLinePair",Aa,3),Br("UpsampleRgbaLinePair",Cc,4),Br("UpsampleBgraLinePair",Fa,4),Br("UpsampleArgbLinePair",Xa,4),Br("UpsampleRgba4444LinePair",Oa,2),Br("UpsampleRgb565LinePair",Sa,2);var wp=bn.UpsampleRgbLinePair,Pp=bn.UpsampleBgrLinePair,mf=bn.UpsampleRgbaLinePair,yf=bn.UpsampleBgraLinePair,vf=bn.UpsampleArgbLinePair,_f=bn.UpsampleRgba4444LinePair,xp=bn.UpsampleRgb565LinePair,sh=16,oh=1<<sh-1,gd=-227,Zh=482,Lp=6,Cf=0,Tp=Be(256),Rp=Be(256),Mp=Be(256),Op=Be(256),Np=Be(Zh-gd),kp=Be(Zh-gd);wc("YuvToRgbRow",Go,3),wc("YuvToBgrRow",Aa,3),wc("YuvToRgbaRow",Cc,4),wc("YuvToBgraRow",Fa,4),wc("YuvToArgbRow",Xa,4),wc("YuvToRgba4444Row",Oa,2),wc("YuvToRgb565Row",Sa,2);var Af=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],ah=[0,2,8],Dp=[8,7,6,4,4,2,2,2,1,1,1,1],Fp=1;this.WebPDecodeRGBA=function(hn,mn,Sn,Ln,kn){var jn=th,Vn=new bu,Wn=new Ko;Vn.ba=Wn,Wn.S=jn,Wn.width=[Wn.width],Wn.height=[Wn.height];var Jn=Wn.width,Ei=Wn.height,ji=new aa;if(ji==null||hn==null)var Qi=2;else e(ji!=null),Qi=wu(hn,mn,Sn,ji.width,ji.height,ji.Pd,ji.Qd,ji.format,null);if(Qi!=0?Jn=0:(Jn!=null&&(Jn[0]=ji.width[0]),Ei!=null&&(Ei[0]=ji.height[0]),Jn=1),Jn){Wn.width=Wn.width[0],Wn.height=Wn.height[0],Ln!=null&&(Ln[0]=Wn.width),kn!=null&&(kn[0]=Wn.height);e:{if(Ln=new yu,(kn=new Zu).data=hn,kn.w=mn,kn.ha=Sn,kn.kd=1,mn=[0],e(kn!=null),((hn=wu(kn.data,kn.w,kn.ha,null,null,null,mn,null,kn))==0||hn==7)&&mn[0]&&(hn=4),(mn=hn)==0){if(e(Vn!=null),Ln.data=kn.data,Ln.w=kn.w+kn.offset,Ln.ha=kn.ha-kn.offset,Ln.put=Ma,Ln.ac=jo,Ln.bc=uo,Ln.ma=Vn,kn.xa){if((hn=za())==null){Vn=1;break e}if(function(er,Yi){var Xr=[0],Nr=[0],Vi=[0];t:for(;;){if(er==null)return 0;if(Yi==null)return er.a=2,0;if(er.l=Yi,er.a=0,$n(er.m,Yi.data,Yi.w,Yi.ha),!to(er.m,Xr,Nr,Vi)){er.a=3;break t}if(er.xb=gf,Yi.width=Xr[0],Yi.height=Nr[0],!Sc(Xr[0],Nr[0],1,er,null))break t;return 1}return e(er.a!=0),0}(hn,Ln)){if(Ln=(mn=Pu(Ln.width,Ln.height,Vn.Oa,Vn.ba))==0){t:{Ln=hn;n:for(;;){if(Ln==null){Ln=0;break t}if(e(Ln.s.yc!=null),e(Ln.s.Ya!=null),e(0<Ln.s.Wb),e((Sn=Ln.l)!=null),e((kn=Sn.ma)!=null),Ln.xb!=0){if(Ln.ca=kn.ba,Ln.tb=kn.tb,e(Ln.ca!=null),!sd(kn.Oa,Sn,nh)){Ln.a=2;break n}if(!tu(Ln,Sn.width)||Sn.da)break n;if((Sn.da||no(Ln.ca.S))&&Ki(),11>Ln.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Ln.ca.f.kb.F!=null&&Ki()),Ln.Pb&&0<Ln.s.ua&&Ln.s.vb.X==null&&!Ai(Ln.s.vb,Ln.s.Wa.Xa)){Ln.a=1;break n}Ln.xb=0}if(!Rl(Ln,Ln.V,Ln.Ba,Ln.c,Ln.i,Sn.o,Pl))break n;kn.Dc=Ln.Ma,Ln=1;break t}e(Ln.a!=0),Ln=0}Ln=!Ln}Ln&&(mn=hn.a)}else mn=hn.a}else{if((hn=new bh)==null){Vn=1;break e}if(hn.Fa=kn.na,hn.P=kn.P,hn.qc=kn.Sa,xd(hn,Ln)){if((mn=Pu(Ln.width,Ln.height,Vn.Oa,Vn.ba))==0){if(hn.Aa=0,Sn=Vn.Oa,e((kn=hn)!=null),Sn!=null){if(0<(Jn=0>(Jn=Sn.Md)?0:100<Jn?255:255*Jn/100)){for(Ei=ji=0;4>Ei;++Ei)12>(Qi=kn.pb[Ei]).lc&&(Qi.ia=Jn*Dp[0>Qi.lc?0:Qi.lc]>>3),ji|=Qi.ia;ji&&(alert("todo:VP8InitRandom"),kn.ia=1)}kn.Ga=Sn.Id,100<kn.Ga?kn.Ga=100:0>kn.Ga&&(kn.Ga=0)}Ih(hn,Ln)||(mn=hn.a)}}else mn=hn.a}mn==0&&Vn.Oa!=null&&Vn.Oa.fd&&(mn=od(Vn.ba))}Vn=mn}jn=Vn!=0?null:11>jn?Wn.f.RGBA.eb:Wn.f.kb.y}else jn=null;return jn};var Ef=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function Qe(bn,Mn){for(var Pn="",En=0;En<4;En++)Pn+=String.fromCharCode(bn[Mn++]);return Pn}function en(bn,Mn){return(bn[Mn+0]<<0|bn[Mn+1]<<8|bn[Mn+2]<<16)>>>0}function tn(bn,Mn){return(bn[Mn+0]<<0|bn[Mn+1]<<8|bn[Mn+2]<<16|bn[Mn+3]<<24)>>>0}new Ze;var an=[0],cn=[0],un=[],dn=new Ze,fn=Oe,pn=function(bn,Mn){var Pn={},En=0,Cn=!1,Rn=0,Tn=0;if(Pn.frames=[],!function(qn,Un,Ci,Si){for(var _i=0;_i<Si;_i++)if(qn[Un+_i]!=Ci.charCodeAt(_i))return!0;return!1}(bn,Mn,"RIFF",4)){var Nn,Gn;for(tn(bn,Mn+=4),Mn+=8;Mn<bn.length;){var zn=Qe(bn,Mn),$n=tn(bn,Mn+=4);Mn+=4;var Qn=$n+(1&$n);switch(zn){case"VP8 ":case"VP8L":Pn.frames[En]===void 0&&(Pn.frames[En]={}),(On=Pn.frames[En]).src_off=Cn?Tn:Mn-8,On.src_size=Rn+$n+8,En++,Cn&&(Cn=!1,Rn=0,Tn=0);break;case"VP8X":(On=Pn.header={}).feature_flags=bn[Mn];var Hn=Mn+4;On.canvas_width=1+en(bn,Hn),Hn+=3,On.canvas_height=1+en(bn,Hn),Hn+=3;break;case"ALPH":Cn=!0,Rn=Qn+8,Tn=Mn-8;break;case"ANIM":(On=Pn.header).bgcolor=tn(bn,Mn),Hn=Mn+4,On.loop_count=(Nn=bn)[(Gn=Hn)+0]<<0|Nn[Gn+1]<<8,Hn+=2;break;case"ANMF":var Ni,On;(On=Pn.frames[En]={}).offset_x=2*en(bn,Mn),Mn+=3,On.offset_y=2*en(bn,Mn),Mn+=3,On.width=1+en(bn,Mn),Mn+=3,On.height=1+en(bn,Mn),Mn+=3,On.duration=en(bn,Mn),Mn+=3,Ni=bn[Mn++],On.dispose=1&Ni,On.blend=Ni>>1&1}zn!="ANMF"&&(Mn+=Qn)}return Pn}}(fn,0);pn.response=fn,pn.rgbaoutput=!0,pn.dataurl=!1;var gn=pn.header?pn.header:null,yn=pn.frames?pn.frames:null;if(gn){gn.loop_counter=gn.loop_count,an=[gn.canvas_height],cn=[gn.canvas_width];for(var vn=0;vn<yn.length&&yn[vn].blend!=0;vn++);}var An=yn[0],xn=dn.WebPDecodeRGBA(fn,An.src_off,An.src_size,cn,an);An.rgba=xn,An.imgwidth=cn[0],An.imgheight=an[0];for(var wn=0;wn<cn[0]*an[0]*4;wn++)un[wn]=xn[wn];return this.width=cn,this.height=an,this.data=un,this}(function(Oe){var e=function(){return typeof zlibSync=="function"},t=function(an,cn,un,dn){var fn=4,pn=je;switch(dn){case Oe.image_compression.FAST:fn=1,pn=Be;break;case Oe.image_compression.MEDIUM:fn=6,pn=Ve;break;case Oe.image_compression.SLOW:fn=9,pn=Ze}an=ke(an,cn,un,pn);var gn=zlibSync(an,{level:fn});return Oe.__addimage__.arrayBufferToBinaryString(gn)},ke=function(an,cn,un,dn){for(var fn,pn,gn,yn=an.length/cn,vn=new Uint8Array(an.length+yn),An=en(),xn=0;xn<yn;xn+=1){if(gn=xn*cn,fn=an.subarray(gn,gn+cn),dn)vn.set(dn(fn,un,pn),gn+xn);else{for(var wn,bn=An.length,Mn=[];wn<bn;wn+=1)Mn[wn]=An[wn](fn,un,pn);var Pn=tn(Mn.concat());vn.set(Mn[Pn],gn+xn)}pn=fn}return vn},Ge=function(an){var cn=Array.apply([],an);return cn.unshift(0),cn},Be=function(an,cn){var un,dn=[],fn=an.length;dn[0]=1;for(var pn=0;pn<fn;pn+=1)un=an[pn-cn]||0,dn[pn+1]=an[pn]-un+256&255;return dn},je=function(an,cn,un){var dn,fn=[],pn=an.length;fn[0]=2;for(var gn=0;gn<pn;gn+=1)dn=un&&un[gn]||0,fn[gn+1]=an[gn]-dn+256&255;return fn},Ve=function(an,cn,un){var dn,fn,pn=[],gn=an.length;pn[0]=3;for(var yn=0;yn<gn;yn+=1)dn=an[yn-cn]||0,fn=un&&un[yn]||0,pn[yn+1]=an[yn]+256-(dn+fn>>>1)&255;return pn},Ze=function(an,cn,un){var dn,fn,pn,gn,yn=[],vn=an.length;yn[0]=4;for(var An=0;An<vn;An+=1)dn=an[An-cn]||0,fn=un&&un[An]||0,pn=un&&un[An-cn]||0,gn=Qe(dn,fn,pn),yn[An+1]=an[An]-gn+256&255;return yn},Qe=function(an,cn,un){if(an===cn&&cn===un)return an;var dn=Math.abs(cn-un),fn=Math.abs(an-un),pn=Math.abs(an+cn-un-un);return dn<=fn&&dn<=pn?an:fn<=pn?cn:un},en=function(){return[Ge,Be,je,Ve,Ze]},tn=function(an){var cn=an.map(function(un){return un.reduce(function(dn,fn){return dn+Math.abs(fn)},0)});return cn.indexOf(Math.min.apply(null,cn))};Oe.processPNG=function(an,cn,un,dn){var fn,pn,gn,yn,vn,An,xn,wn,bn,Mn,Pn,En,Cn,Rn,Tn,Nn=this.decode.FLATE_DECODE,Gn="";if(this.__addimage__.isArrayBuffer(an)&&(an=new Uint8Array(an)),this.__addimage__.isArrayBufferView(an)){if(an=(gn=new Kt(an)).imgData,pn=gn.bits,fn=gn.colorSpace,vn=gn.colors,[4,6].indexOf(gn.colorType)!==-1){if(gn.bits===8){bn=(wn=gn.pixelBitlength==32?new Uint32Array(gn.decodePixels().buffer):gn.pixelBitlength==16?new Uint16Array(gn.decodePixels().buffer):new Uint8Array(gn.decodePixels().buffer)).length,Pn=new Uint8Array(bn*gn.colors),Mn=new Uint8Array(bn);var zn,$n=gn.pixelBitlength-gn.bits;for(Rn=0,Tn=0;Rn<bn;Rn++){for(Cn=wn[Rn],zn=0;zn<$n;)Pn[Tn++]=Cn>>>zn&255,zn+=gn.bits;Mn[Rn]=Cn>>>zn&255}}if(gn.bits===16){bn=(wn=new Uint32Array(gn.decodePixels().buffer)).length,Pn=new Uint8Array(bn*(32/gn.pixelBitlength)*gn.colors),Mn=new Uint8Array(bn*(32/gn.pixelBitlength)),En=gn.colors>1,Rn=0,Tn=0;for(var Qn=0;Rn<bn;)Cn=wn[Rn++],Pn[Tn++]=Cn>>>0&255,En&&(Pn[Tn++]=Cn>>>16&255,Cn=wn[Rn++],Pn[Tn++]=Cn>>>0&255),Mn[Qn++]=Cn>>>16&255;pn=8}dn!==Oe.image_compression.NONE&&e()?(an=t(Pn,gn.width*gn.colors,gn.colors,dn),xn=t(Mn,gn.width,1,dn)):(an=Pn,xn=Mn,Nn=void 0)}if(gn.colorType===3&&(fn=this.color_spaces.INDEXED,An=gn.palette,gn.transparency.indexed)){var Hn=gn.transparency.indexed,Ni=0;for(Rn=0,bn=Hn.length;Rn<bn;++Rn)Ni+=Hn[Rn];if((Ni/=255)===bn-1&&Hn.indexOf(0)!==-1)yn=[Hn.indexOf(0)];else if(Ni!==bn){for(wn=gn.decodePixels(),Mn=new Uint8Array(wn.length),Rn=0,bn=wn.length;Rn<bn;Rn++)Mn[Rn]=Hn[wn[Rn]];xn=t(Mn,gn.width,1)}}var On=function(qn){var Un;switch(qn){case Oe.image_compression.FAST:Un=11;break;case Oe.image_compression.MEDIUM:Un=13;break;case Oe.image_compression.SLOW:Un=14;break;default:Un=12}return Un}(dn);return Nn===this.decode.FLATE_DECODE&&(Gn="/Predictor "+On+" "),Gn+="/Colors "+vn+" /BitsPerComponent "+pn+" /Columns "+gn.width,(this.__addimage__.isArrayBuffer(an)||this.__addimage__.isArrayBufferView(an))&&(an=this.__addimage__.arrayBufferToBinaryString(an)),(xn&&this.__addimage__.isArrayBuffer(xn)||this.__addimage__.isArrayBufferView(xn))&&(xn=this.__addimage__.arrayBufferToBinaryString(xn)),{alias:un,data:an,index:cn,filter:Nn,decodeParameters:Gn,transparency:yn,palette:An,sMask:xn,predictor:On,width:gn.width,height:gn.height,bitsPerComponent:pn,colorSpace:fn}}}})(E.API),function(Oe){Oe.processGIF89A=function(e,t,ke,Ge){var Be=new Zt(e),je=Be.width,Ve=Be.height,Ze=[];Be.decodeAndBlitFrameRGBA(0,Ze);var Qe={data:Ze,width:je,height:Ve},en=new Qt(100).encode(Qe,100);return Oe.processJPEG.call(this,en,t,ke,Ge)},Oe.processGIF87A=Oe.processGIF89A}(E.API),te.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var Oe=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(Oe);for(var e=0;e<Oe;e++){var t=this.datav.getUint8(this.pos++,!0),ke=this.datav.getUint8(this.pos++,!0),Ge=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:Ge,green:ke,blue:t,quad:Be}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},te.prototype.parseBGR=function(){this.pos=this.offset;try{var Oe="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[Oe]()}catch(t){a.log("bit decode error:"+t)}},te.prototype.bit1=function(){var Oe,e=Math.ceil(this.width/8),t=e%4;for(Oe=this.height-1;Oe>=0;Oe--){for(var ke=this.bottom_up?Oe:this.height-1-Oe,Ge=0;Ge<e;Ge++)for(var Be=this.datav.getUint8(this.pos++,!0),je=ke*this.width*4+8*Ge*4,Ve=0;Ve<8&&8*Ge+Ve<this.width;Ve++){var Ze=this.palette[Be>>7-Ve&1];this.data[je+4*Ve]=Ze.blue,this.data[je+4*Ve+1]=Ze.green,this.data[je+4*Ve+2]=Ze.red,this.data[je+4*Ve+3]=255}t!==0&&(this.pos+=4-t)}},te.prototype.bit4=function(){for(var Oe=Math.ceil(this.width/2),e=Oe%4,t=this.height-1;t>=0;t--){for(var ke=this.bottom_up?t:this.height-1-t,Ge=0;Ge<Oe;Ge++){var Be=this.datav.getUint8(this.pos++,!0),je=ke*this.width*4+2*Ge*4,Ve=Be>>4,Ze=15&Be,Qe=this.palette[Ve];if(this.data[je]=Qe.blue,this.data[je+1]=Qe.green,this.data[je+2]=Qe.red,this.data[je+3]=255,2*Ge+1>=this.width)break;Qe=this.palette[Ze],this.data[je+4]=Qe.blue,this.data[je+4+1]=Qe.green,this.data[je+4+2]=Qe.red,this.data[je+4+3]=255}e!==0&&(this.pos+=4-e)}},te.prototype.bit8=function(){for(var Oe=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,ke=0;ke<this.width;ke++){var Ge=this.datav.getUint8(this.pos++,!0),Be=t*this.width*4+4*ke;if(Ge<this.palette.length){var je=this.palette[Ge];this.data[Be]=je.red,this.data[Be+1]=je.green,this.data[Be+2]=je.blue,this.data[Be+3]=255}else this.data[Be]=255,this.data[Be+1]=255,this.data[Be+2]=255,this.data[Be+3]=255}Oe!==0&&(this.pos+=4-Oe)}},te.prototype.bit15=function(){for(var Oe=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var ke=this.bottom_up?t:this.height-1-t,Ge=0;Ge<this.width;Ge++){var Be=this.datav.getUint16(this.pos,!0);this.pos+=2;var je=(Be&e)/e*255|0,Ve=(Be>>5&e)/e*255|0,Ze=(Be>>10&e)/e*255|0,Qe=Be>>15?255:0,en=ke*this.width*4+4*Ge;this.data[en]=Ze,this.data[en+1]=Ve,this.data[en+2]=je,this.data[en+3]=Qe}this.pos+=Oe}},te.prototype.bit16=function(){for(var Oe=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),ke=this.height-1;ke>=0;ke--){for(var Ge=this.bottom_up?ke:this.height-1-ke,Be=0;Be<this.width;Be++){var je=this.datav.getUint16(this.pos,!0);this.pos+=2;var Ve=(je&e)/e*255|0,Ze=(je>>5&t)/t*255|0,Qe=(je>>11)/e*255|0,en=Ge*this.width*4+4*Be;this.data[en]=Qe,this.data[en+1]=Ze,this.data[en+2]=Ve,this.data[en+3]=255}this.pos+=Oe}},te.prototype.bit24=function(){for(var Oe=this.height-1;Oe>=0;Oe--){for(var e=this.bottom_up?Oe:this.height-1-Oe,t=0;t<this.width;t++){var ke=this.datav.getUint8(this.pos++,!0),Ge=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),je=e*this.width*4+4*t;this.data[je]=Be,this.data[je+1]=Ge,this.data[je+2]=ke,this.data[je+3]=255}this.pos+=this.width%4}},te.prototype.bit32=function(){for(var Oe=this.height-1;Oe>=0;Oe--)for(var e=this.bottom_up?Oe:this.height-1-Oe,t=0;t<this.width;t++){var ke=this.datav.getUint8(this.pos++,!0),Ge=this.datav.getUint8(this.pos++,!0),Be=this.datav.getUint8(this.pos++,!0),je=this.datav.getUint8(this.pos++,!0),Ve=e*this.width*4+4*t;this.data[Ve]=Be,this.data[Ve+1]=Ge,this.data[Ve+2]=ke,this.data[Ve+3]=je}},te.prototype.getData=function(){return this.data},function(Oe){Oe.processBMP=function(e,t,ke,Ge){var Be=new te(e,!1),je=Be.width,Ve=Be.height,Ze={data:Be.getData(),width:je,height:Ve},Qe=new Qt(100).encode(Ze,100);return Oe.processJPEG.call(this,Qe,t,ke,Ge)}}(E.API),ee.prototype.getData=function(){return this.data},function(Oe){Oe.processWEBP=function(e,t,ke,Ge){var Be=new ee(e),je=Be.width,Ve=Be.height,Ze={data:Be.getData(),width:je,height:Ve},Qe=new Qt(100).encode(Ze,100);return Oe.processJPEG.call(this,Qe,t,ke,Ge)}}(E.API),E.API.processRGBA=function(Oe,e,t){for(var ke=Oe.data,Ge=ke.length,Be=new Uint8Array(Ge/4*3),je=new Uint8Array(Ge/4),Ve=0,Ze=0,Qe=0;Qe<Ge;Qe+=4){var en=ke[Qe],tn=ke[Qe+1],an=ke[Qe+2],cn=ke[Qe+3];Be[Ve++]=en,Be[Ve++]=tn,Be[Ve++]=an,je[Ze++]=cn}var un=this.__addimage__.arrayBufferToBinaryString(Be);return{alpha:this.__addimage__.arrayBufferToBinaryString(je),data:un,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:Oe.width,height:Oe.height}},E.API.setLanguage=function(Oe){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[Oe]!==void 0&&(this.internal.languageSettings.languageCode=Oe,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Vt=E.API,Gt=Vt.getCharWidthsArray=function(Oe,e){var t,ke,Ge=(e=e||{}).font||this.internal.getFont(),Be=e.fontSize||this.internal.getFontSize(),je=e.charSpace||this.internal.getCharSpace(),Ve=e.widths?e.widths:Ge.metadata.Unicode.widths,Ze=Ve.fof?Ve.fof:1,Qe=e.kerning?e.kerning:Ge.metadata.Unicode.kerning,en=Qe.fof?Qe.fof:1,tn=e.doKerning!==!1,an=0,cn=Oe.length,un=0,dn=Ve[0]||Ze,fn=[];for(t=0;t<cn;t++)ke=Oe.charCodeAt(t),typeof Ge.metadata.widthOfString=="function"?fn.push((Ge.metadata.widthOfGlyph(Ge.metadata.characterToGlyph(ke))+je*(1e3/Be)||0)/1e3):(an=tn&&_typeof(Qe[ke])==="object"&&!isNaN(parseInt(Qe[ke][un],10))?Qe[ke][un]/en:0,fn.push((Ve[ke]||dn)/Ze+an)),un=ke;return fn},Yt=Vt.getStringUnitWidth=function(Oe,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),ke=e.font||this.internal.getFont(),Ge=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(Oe=Vt.processArabic(Oe)),typeof ke.metadata.widthOfString=="function"?ke.metadata.widthOfString(Oe,t,Ge)/t:Gt.apply(this,arguments).reduce(function(Be,je){return Be+je},0)},Jt=function(Oe,e,t,ke){for(var Ge=[],Be=0,je=Oe.length,Ve=0;Be!==je&&Ve+e[Be]<t;)Ve+=e[Be],Be++;Ge.push(Oe.slice(0,Be));var Ze=Be;for(Ve=0;Be!==je;)Ve+e[Be]>ke&&(Ge.push(Oe.slice(Ze,Be)),Ve=0,Ze=Be),Ve+=e[Be],Be++;return Ze!==Be&&Ge.push(Oe.slice(Ze,Be)),Ge},Xt=function(Oe,e,t){t||(t={});var ke,Ge,Be,je,Ve,Ze,Qe,en=[],tn=[en],an=t.textIndent||0,cn=0,un=0,dn=Oe.split(" "),fn=Gt.apply(this,[" ",t])[0];if(Ze=t.lineIndent===-1?dn[0].length+2:t.lineIndent||0){var pn=Array(Ze).join(" "),gn=[];dn.map(function(vn){(vn=vn.split(/\s*\n/)).length>1?gn=gn.concat(vn.map(function(An,xn){return(xn&&An.length?`
`:"")+An})):gn.push(vn[0])}),dn=gn,Ze=Yt.apply(this,[pn,t])}for(Be=0,je=dn.length;Be<je;Be++){var yn=0;if(ke=dn[Be],Ze&&ke[0]==`
`&&(ke=ke.substr(1),yn=1),an+cn+(un=(Ge=Gt.apply(this,[ke,t])).reduce(function(vn,An){return vn+An},0))>e||yn){if(un>e){for(Ve=Jt.apply(this,[ke,Ge,e-(an+cn),e]),en.push(Ve.shift()),en=[Ve.pop()];Ve.length;)tn.push([Ve.shift()]);un=Ge.slice(ke.length-(en[0]?en[0].length:0)).reduce(function(vn,An){return vn+An},0)}else en=[ke];tn.push(en),an=un+Ze,cn=fn}else en.push(ke),an+=cn+un,cn=fn}return Qe=Ze?function(vn,An){return(An?pn:"")+vn.join(" ")}:function(vn){return vn.join(" ")},tn.map(Qe)},Vt.splitTextToSize=function(Oe,e,t){var ke,Ge=(t=t||{}).fontSize||this.internal.getFontSize(),Be=(function(en){if(en.widths&&en.kerning)return{widths:en.widths,kerning:en.kerning};var tn=this.internal.getFont(en.fontName,en.fontStyle);return tn.metadata.Unicode?{widths:tn.metadata.Unicode.widths||{0:1},kerning:tn.metadata.Unicode.kerning||{}}:{font:tn.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,t);ke=Array.isArray(Oe)?Oe:String(Oe).split(/\r?\n/);var je=1*this.internal.scaleFactor*e/Ge;Be.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/Ge:0,Be.lineIndent=t.lineIndent;var Ve,Ze,Qe=[];for(Ve=0,Ze=ke.length;Ve<Ze;Ve++)Qe=Qe.concat(Xt.apply(this,[ke[Ve],je,Be]));return Qe},function(Oe){Oe.__fontmetrics__=Oe.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},ke={},Ge=0;Ge<e.length;Ge++)t[e[Ge]]="0123456789abcdef"[Ge],ke["0123456789abcdef"[Ge]]=e[Ge];var Be=function(tn){return"0x"+parseInt(tn,10).toString(16)},je=Oe.__fontmetrics__.compress=function(tn){var an,cn,un,dn,fn=["{"];for(var pn in tn){if(an=tn[pn],isNaN(parseInt(pn,10))?cn="'"+pn+"'":(pn=parseInt(pn,10),cn=(cn=Be(pn).slice(2)).slice(0,-1)+ke[cn.slice(-1)]),typeof an=="number")an<0?(un=Be(an).slice(3),dn="-"):(un=Be(an).slice(2),dn=""),un=dn+un.slice(0,-1)+ke[un.slice(-1)];else{if(_typeof(an)!=="object")throw new Error("Don't know what to do with value type "+_typeof(an)+".");un=je(an)}fn.push(cn+un)}return fn.push("}"),fn.join("")},Ve=Oe.__fontmetrics__.uncompress=function(tn){if(typeof tn!="string")throw new Error("Invalid argument passed to uncompress.");for(var an,cn,un,dn,fn={},pn=1,gn=fn,yn=[],vn="",An="",xn=tn.length-1,wn=1;wn<xn;wn+=1)(dn=tn[wn])=="'"?an?(un=an.join(""),an=void 0):an=[]:an?an.push(dn):dn=="{"?(yn.push([gn,un]),gn={},un=void 0):dn=="}"?((cn=yn.pop())[0][cn[1]]=gn,un=void 0,gn=cn[0]):dn=="-"?pn=-1:un===void 0?t.hasOwnProperty(dn)?(vn+=t[dn],un=parseInt(vn,16)*pn,pn=1,vn=""):vn+=dn:t.hasOwnProperty(dn)?(An+=t[dn],gn[un]=parseInt(An,16)*pn,pn=1,un=void 0,An=""):An+=dn;return fn},Ze={codePages:["WinAnsiEncoding"],WinAnsiEncoding:Ve("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},Qe={Unicode:{Courier:Ze,"Courier-Bold":Ze,"Courier-BoldOblique":Ze,"Courier-Oblique":Ze,Helvetica:Ze,"Helvetica-Bold":Ze,"Helvetica-BoldOblique":Ze,"Helvetica-Oblique":Ze,"Times-Roman":Ze,"Times-Bold":Ze,"Times-BoldItalic":Ze,"Times-Italic":Ze}},en={Unicode:{"Courier-Oblique":Ve("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":Ve("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":Ve("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:Ve("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":Ve("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":Ve("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:Ve("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:Ve("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":Ve("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:Ve("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":Ve("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":Ve("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":Ve("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":Ve("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};Oe.events.push(["addFont",function(tn){var an=tn.font,cn=en.Unicode[an.postScriptName];cn&&(an.metadata.Unicode={},an.metadata.Unicode.widths=cn.widths,an.metadata.Unicode.kerning=cn.kerning);var un=Qe.Unicode[an.postScriptName];un&&(an.metadata.Unicode.encoding=un,an.encoding=un.codePages[0])}])}(E.API),function(Oe){var e=function(t){for(var ke=t.length,Ge=new Uint8Array(ke),Be=0;Be<ke;Be++)Ge[Be]=t.charCodeAt(Be);return Ge};Oe.API.events.push(["addFont",function(t){var ke=void 0,Ge=t.font,Be=t.instance;if(!Ge.isStandardFont){if(Be===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+Ge.postScriptName+"').");if(typeof(ke=Be.existsFileInVFS(Ge.postScriptName)===!1?Be.loadFile(Ge.postScriptName):Be.getFileFromVFS(Ge.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+Ge.postScriptName+"').");(function(je,Ve){Ve=/^\x00\x01\x00\x00/.test(Ve)?e(Ve):e(u(Ve)),je.metadata=Oe.API.TTFFont.open(Ve),je.metadata.Unicode=je.metadata.Unicode||{encoding:{},kerning:{},widths:[]},je.metadata.glyIdsUsed=[0]})(Ge,ke)}}])}(E),function(Oe){function e(){return(n.canvg?Promise.resolve(n.canvg):__vitePreload(()=>import("./index.es-COsclNKy.js"),[])).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}E.API.addSvgAsImage=function(t,ke,Ge,Be,je,Ve,Ze,Qe){if(isNaN(ke)||isNaN(Ge))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(Be)||isNaN(je))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var en=document.createElement("canvas");en.width=Be,en.height=je;var tn=en.getContext("2d");tn.fillStyle="#fff",tn.fillRect(0,0,en.width,en.height);var an={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},cn=this;return e().then(function(un){return un.fromString(tn,t,an)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(un){return un.render(an)}).then(function(){cn.addImage(en.toDataURL("image/jpeg",1),ke,Ge,Be,je,Ze,Qe)})}}(),E.API.putTotalPages=function(Oe){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(Oe,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(Oe,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var ke=1;ke<=this.internal.getNumberOfPages();ke++)for(var Ge=0;Ge<this.internal.pages[ke].length;Ge++)this.internal.pages[ke][Ge]=this.internal.pages[ke][Ge].replace(e,t);return this},E.API.viewerPreferences=function(Oe,e){var t;Oe=Oe||{},e=e||!1;var ke,Ge,Be,je={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},Ve=Object.keys(je),Ze=[],Qe=0,en=0,tn=0;function an(un,dn){var fn,pn=!1;for(fn=0;fn<un.length;fn+=1)un[fn]===dn&&(pn=!0);return pn}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(je)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,Oe==="reset"||e===!0){var cn=Ve.length;for(tn=0;tn<cn;tn+=1)t[Ve[tn]].value=t[Ve[tn]].defaultValue,t[Ve[tn]].explicitSet=!1}if(_typeof(Oe)==="object"){for(Ge in Oe)if(Be=Oe[Ge],an(Ve,Ge)&&Be!==void 0){if(t[Ge].type==="boolean"&&typeof Be=="boolean")t[Ge].value=Be;else if(t[Ge].type==="name"&&an(t[Ge].valueSet,Be))t[Ge].value=Be;else if(t[Ge].type==="integer"&&Number.isInteger(Be))t[Ge].value=Be;else if(t[Ge].type==="array"){for(Qe=0;Qe<Be.length;Qe+=1)if(ke=!0,Be[Qe].length===1&&typeof Be[Qe][0]=="number")Ze.push(String(Be[Qe]-1));else if(Be[Qe].length>1){for(en=0;en<Be[Qe].length;en+=1)typeof Be[Qe][en]!="number"&&(ke=!1);ke===!0&&Ze.push([Be[Qe][0]-1,Be[Qe][1]-1].join(" "))}t[Ge].value="["+Ze.join(" ")+"]"}else t[Ge].value=t[Ge].defaultValue;t[Ge].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var un,dn=[];for(un in t)t[un].explicitSet===!0&&(t[un].type==="name"?dn.push("/"+un+" /"+t[un].value):dn.push("/"+un+" "+t[un].value));dn.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+dn.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(Oe){var e=function(){var ke='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',Ge=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),Be=unescape(encodeURIComponent(ke)),je=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),Ve=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),Ze=unescape(encodeURIComponent("</x:xmpmeta>")),Qe=Be.length+je.length+Ve.length+Ge.length+Ze.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+Qe+" >>"),this.internal.write("stream"),this.internal.write(Ge+Be+je+Ve+Ze),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};Oe.addMetadata=function(ke,Ge){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:ke,namespaceuri:Ge||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(E.API),function(Oe){var e=Oe.API,t=e.pdfEscape16=function(Be,je){for(var Ve,Ze=je.metadata.Unicode.widths,Qe=["","0","00","000","0000"],en=[""],tn=0,an=Be.length;tn<an;++tn){if(Ve=je.metadata.characterToGlyph(Be.charCodeAt(tn)),je.metadata.glyIdsUsed.push(Ve),je.metadata.toUnicode[Ve]=Be.charCodeAt(tn),Ze.indexOf(Ve)==-1&&(Ze.push(Ve),Ze.push([parseInt(je.metadata.widthOfGlyph(Ve),10)])),Ve=="0")return en.join("");Ve=Ve.toString(16),en.push(Qe[4-Ve.length],Ve)}return en.join("")},ke=function(Be){var je,Ve,Ze,Qe,en,tn,an;for(en=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,Ze=[],tn=0,an=(Ve=Object.keys(Be).sort(function(cn,un){return cn-un})).length;tn<an;tn++)je=Ve[tn],Ze.length>=100&&(en+=`
`+Ze.length+` beginbfchar
`+Ze.join(`
`)+`
endbfchar`,Ze=[]),Be[je]!==void 0&&Be[je]!==null&&typeof Be[je].toString=="function"&&(Qe=("0000"+Be[je].toString(16)).slice(-4),je=("0000"+(+je).toString(16)).slice(-4),Ze.push("<"+je+"><"+Qe+">"));return Ze.length&&(en+=`
`+Ze.length+` beginbfchar
`+Ze.join(`
`)+`
endbfchar
`),en+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(Be){(function(je){var Ve=je.font,Ze=je.out,Qe=je.newObject,en=je.putStream;if(Ve.metadata instanceof Oe.API.TTFFont&&Ve.encoding==="Identity-H"){for(var tn=Ve.metadata.Unicode.widths,an=Ve.metadata.subset.encode(Ve.metadata.glyIdsUsed,1),cn="",un=0;un<an.length;un++)cn+=String.fromCharCode(an[un]);var dn=Qe();en({data:cn,addLength1:!0,objectId:dn}),Ze("endobj");var fn=Qe();en({data:ke(Ve.metadata.toUnicode),addLength1:!0,objectId:fn}),Ze("endobj");var pn=Qe();Ze("<<"),Ze("/Type /FontDescriptor"),Ze("/FontName /"+F(Ve.fontName)),Ze("/FontFile2 "+dn+" 0 R"),Ze("/FontBBox "+Oe.API.PDFObject.convert(Ve.metadata.bbox)),Ze("/Flags "+Ve.metadata.flags),Ze("/StemV "+Ve.metadata.stemV),Ze("/ItalicAngle "+Ve.metadata.italicAngle),Ze("/Ascent "+Ve.metadata.ascender),Ze("/Descent "+Ve.metadata.decender),Ze("/CapHeight "+Ve.metadata.capHeight),Ze(">>"),Ze("endobj");var gn=Qe();Ze("<<"),Ze("/Type /Font"),Ze("/BaseFont /"+F(Ve.fontName)),Ze("/FontDescriptor "+pn+" 0 R"),Ze("/W "+Oe.API.PDFObject.convert(tn)),Ze("/CIDToGIDMap /Identity"),Ze("/DW 1000"),Ze("/Subtype /CIDFontType2"),Ze("/CIDSystemInfo"),Ze("<<"),Ze("/Supplement 0"),Ze("/Registry (Adobe)"),Ze("/Ordering ("+Ve.encoding+")"),Ze(">>"),Ze(">>"),Ze("endobj"),Ve.objectNumber=Qe(),Ze("<<"),Ze("/Type /Font"),Ze("/Subtype /Type0"),Ze("/ToUnicode "+fn+" 0 R"),Ze("/BaseFont /"+F(Ve.fontName)),Ze("/Encoding /"+Ve.encoding),Ze("/DescendantFonts ["+gn+" 0 R]"),Ze(">>"),Ze("endobj"),Ve.isAlreadyPutted=!0}})(Be)}]),e.events.push(["putFont",function(Be){(function(je){var Ve=je.font,Ze=je.out,Qe=je.newObject,en=je.putStream;if(Ve.metadata instanceof Oe.API.TTFFont&&Ve.encoding==="WinAnsiEncoding"){for(var tn=Ve.metadata.rawData,an="",cn=0;cn<tn.length;cn++)an+=String.fromCharCode(tn[cn]);var un=Qe();en({data:an,addLength1:!0,objectId:un}),Ze("endobj");var dn=Qe();en({data:ke(Ve.metadata.toUnicode),addLength1:!0,objectId:dn}),Ze("endobj");var fn=Qe();Ze("<<"),Ze("/Descent "+Ve.metadata.decender),Ze("/CapHeight "+Ve.metadata.capHeight),Ze("/StemV "+Ve.metadata.stemV),Ze("/Type /FontDescriptor"),Ze("/FontFile2 "+un+" 0 R"),Ze("/Flags 96"),Ze("/FontBBox "+Oe.API.PDFObject.convert(Ve.metadata.bbox)),Ze("/FontName /"+F(Ve.fontName)),Ze("/ItalicAngle "+Ve.metadata.italicAngle),Ze("/Ascent "+Ve.metadata.ascender),Ze(">>"),Ze("endobj"),Ve.objectNumber=Qe();for(var pn=0;pn<Ve.metadata.hmtx.widths.length;pn++)Ve.metadata.hmtx.widths[pn]=parseInt(Ve.metadata.hmtx.widths[pn]*(1e3/Ve.metadata.head.unitsPerEm));Ze("<</Subtype/TrueType/Type/Font/ToUnicode "+dn+" 0 R/BaseFont/"+F(Ve.fontName)+"/FontDescriptor "+fn+" 0 R/Encoding/"+Ve.encoding+" /FirstChar 29 /LastChar 255 /Widths "+Oe.API.PDFObject.convert(Ve.metadata.hmtx.widths)+">>"),Ze("endobj"),Ve.isAlreadyPutted=!0}})(Be)}]);var Ge=function(Be){var je,Ve=Be.text||"",Ze=Be.x,Qe=Be.y,en=Be.options||{},tn=Be.mutex||{},an=tn.pdfEscape,cn=tn.activeFontKey,un=tn.fonts,dn=cn,fn="",pn=0,gn="",yn=un[dn].encoding;if(un[dn].encoding!=="Identity-H")return{text:Ve,x:Ze,y:Qe,options:en,mutex:tn};for(gn=Ve,dn=cn,Array.isArray(Ve)&&(gn=Ve[0]),pn=0;pn<gn.length;pn+=1)un[dn].metadata.hasOwnProperty("cmap")&&(je=un[dn].metadata.cmap.unicode.codeMap[gn[pn].charCodeAt(0)]),je||gn[pn].charCodeAt(0)<256&&un[dn].metadata.hasOwnProperty("Unicode")?fn+=gn[pn]:fn+="";var vn="";return parseInt(dn.slice(1))<14||yn==="WinAnsiEncoding"?vn=an(fn,dn).split("").map(function(An){return An.charCodeAt(0).toString(16)}).join(""):yn==="Identity-H"&&(vn=t(fn,un[dn])),tn.isHex=!0,{text:vn,x:Ze,y:Qe,options:en,mutex:tn}};e.events.push(["postProcessText",function(Be){var je=Be.text||"",Ve=[],Ze={text:je,x:Be.x,y:Be.y,options:Be.options,mutex:Be.mutex};if(Array.isArray(je)){var Qe=0;for(Qe=0;Qe<je.length;Qe+=1)Array.isArray(je[Qe])&&je[Qe].length===3?Ve.push([Ge(Object.assign({},Ze,{text:je[Qe][0]})).text,je[Qe][1],je[Qe][2]]):Ve.push(Ge(Object.assign({},Ze,{text:je[Qe]})).text);Be.text=Ve}else Be.text=Ge(Object.assign({},Ze,{text:je})).text}])}(E),function(Oe){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};Oe.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},Oe.addFileToVFS=function(t,ke){return e.call(this),this.internal.vFS[t]=ke,this},Oe.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(E.API),function(Oe){Oe.__bidiEngine__=Oe.prototype.__bidiEngine__=function(ke){var Ge,Be,je,Ve,Ze,Qe,en,tn=e,an=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],cn=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],un={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},dn={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},fn=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],pn=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),gn=!1,yn=0;this.__bidiEngine__={};var vn=function(En){var Cn=En.charCodeAt(),Rn=Cn>>8,Tn=dn[Rn];return Tn!==void 0?tn[256*Tn+(255&Cn)]:Rn===252||Rn===253?"AL":pn.test(Rn)?"L":Rn===8?"R":"N"},An=function(En){for(var Cn,Rn=0;Rn<En.length;Rn++){if((Cn=vn(En.charAt(Rn)))==="L")return!1;if(Cn==="R")return!0}return!1},xn=function(En,Cn,Rn,Tn){var Nn,Gn,zn,$n,Qn=Cn[Tn];switch(Qn){case"L":case"R":gn=!1;break;case"N":case"AN":break;case"EN":gn&&(Qn="AN");break;case"AL":gn=!0,Qn="R";break;case"WS":Qn="N";break;case"CS":Tn<1||Tn+1>=Cn.length||(Nn=Rn[Tn-1])!=="EN"&&Nn!=="AN"||(Gn=Cn[Tn+1])!=="EN"&&Gn!=="AN"?Qn="N":gn&&(Gn="AN"),Qn=Gn===Nn?Gn:"N";break;case"ES":Qn=(Nn=Tn>0?Rn[Tn-1]:"B")==="EN"&&Tn+1<Cn.length&&Cn[Tn+1]==="EN"?"EN":"N";break;case"ET":if(Tn>0&&Rn[Tn-1]==="EN"){Qn="EN";break}if(gn){Qn="N";break}for(zn=Tn+1,$n=Cn.length;zn<$n&&Cn[zn]==="ET";)zn++;Qn=zn<$n&&Cn[zn]==="EN"?"EN":"N";break;case"NSM":if(je&&!Ve){for($n=Cn.length,zn=Tn+1;zn<$n&&Cn[zn]==="NSM";)zn++;if(zn<$n){var Hn=En[Tn],Ni=Hn>=1425&&Hn<=2303||Hn===64286;if(Nn=Cn[zn],Ni&&(Nn==="R"||Nn==="AL")){Qn="R";break}}}Qn=Tn<1||(Nn=Cn[Tn-1])==="B"?"N":Rn[Tn-1];break;case"B":gn=!1,Ge=!0,Qn=yn;break;case"S":Be=!0,Qn="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":gn=!1;break;case"BN":Qn="N"}return Qn},wn=function(En,Cn,Rn){var Tn=En.split("");return Rn&&bn(Tn,Rn,{hiLevel:yn}),Tn.reverse(),Cn&&Cn.reverse(),Tn.join("")},bn=function(En,Cn,Rn){var Tn,Nn,Gn,zn,$n,Qn=-1,Hn=En.length,Ni=0,On=[],qn=yn?cn:an,Un=[];for(gn=!1,Ge=!1,Be=!1,Nn=0;Nn<Hn;Nn++)Un[Nn]=vn(En[Nn]);for(Gn=0;Gn<Hn;Gn++){if($n=Ni,On[Gn]=xn(En,Un,On,Gn),Tn=240&(Ni=qn[$n][un[On[Gn]]]),Ni&=15,Cn[Gn]=zn=qn[Ni][5],Tn>0)if(Tn===16){for(Nn=Qn;Nn<Gn;Nn++)Cn[Nn]=1;Qn=-1}else Qn=-1;if(qn[Ni][6])Qn===-1&&(Qn=Gn);else if(Qn>-1){for(Nn=Qn;Nn<Gn;Nn++)Cn[Nn]=zn;Qn=-1}Un[Gn]==="B"&&(Cn[Gn]=0),Rn.hiLevel|=zn}Be&&function(Ci,Si,_i){for(var Ii=0;Ii<_i;Ii++)if(Ci[Ii]==="S"){Si[Ii]=yn;for(var Li=Ii-1;Li>=0&&Ci[Li]==="WS";Li--)Si[Li]=yn}}(Un,Cn,Hn)},Mn=function(En,Cn,Rn,Tn,Nn){if(!(Nn.hiLevel<En)){if(En===1&&yn===1&&!Ge)return Cn.reverse(),void(Rn&&Rn.reverse());for(var Gn,zn,$n,Qn,Hn=Cn.length,Ni=0;Ni<Hn;){if(Tn[Ni]>=En){for($n=Ni+1;$n<Hn&&Tn[$n]>=En;)$n++;for(Qn=Ni,zn=$n-1;Qn<zn;Qn++,zn--)Gn=Cn[Qn],Cn[Qn]=Cn[zn],Cn[zn]=Gn,Rn&&(Gn=Rn[Qn],Rn[Qn]=Rn[zn],Rn[zn]=Gn);Ni=$n}Ni++}}},Pn=function(En,Cn,Rn){var Tn=En.split(""),Nn={hiLevel:yn};return Rn||(Rn=[]),bn(Tn,Rn,Nn),function(Gn,zn,$n){if($n.hiLevel!==0&&en)for(var Qn,Hn=0;Hn<Gn.length;Hn++)zn[Hn]===1&&(Qn=fn.indexOf(Gn[Hn]))>=0&&(Gn[Hn]=fn[Qn+1])}(Tn,Rn,Nn),Mn(2,Tn,Cn,Rn,Nn),Mn(1,Tn,Cn,Rn,Nn),Tn.join("")};return this.__bidiEngine__.doBidiReorder=function(En,Cn,Rn){if(function(Nn,Gn){if(Gn)for(var zn=0;zn<Nn.length;zn++)Gn[zn]=zn;Ve===void 0&&(Ve=An(Nn)),Qe===void 0&&(Qe=An(Nn))}(En,Cn),je||!Ze||Qe)if(je&&Ze&&Ve^Qe)yn=Ve?1:0,En=wn(En,Cn,Rn);else if(!je&&Ze&&Qe)yn=Ve?1:0,En=Pn(En,Cn,Rn),En=wn(En,Cn);else if(!je||Ve||Ze||Qe){if(je&&!Ze&&Ve^Qe)En=wn(En,Cn),Ve?(yn=0,En=Pn(En,Cn,Rn)):(yn=1,En=Pn(En,Cn,Rn),En=wn(En,Cn));else if(je&&Ve&&!Ze&&Qe)yn=1,En=Pn(En,Cn,Rn),En=wn(En,Cn);else if(!je&&!Ze&&Ve^Qe){var Tn=en;Ve?(yn=1,En=Pn(En,Cn,Rn),yn=0,en=!1,En=Pn(En,Cn,Rn),en=Tn):(yn=0,En=Pn(En,Cn,Rn),En=wn(En,Cn),yn=1,en=!1,En=Pn(En,Cn,Rn),en=Tn,En=wn(En,Cn))}}else yn=0,En=Pn(En,Cn,Rn);else yn=Ve?1:0,En=Pn(En,Cn,Rn);return En},this.__bidiEngine__.setOptions=function(En){En&&(je=En.isInputVisual,Ze=En.isOutputVisual,Ve=En.isInputRtl,Qe=En.isOutputRtl,en=En.isSymmetricSwapping)},this.__bidiEngine__.setOptions(ke),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new Oe.__bidiEngine__({isInputVisual:!0});Oe.API.events.push(["postProcessText",function(ke){var Ge=ke.text,Be=(ke.x,ke.y,ke.options||{}),je=(ke.mutex,Be.lang,[]);if(Be.isInputVisual=typeof Be.isInputVisual!="boolean"||Be.isInputVisual,t.setOptions(Be),Object.prototype.toString.call(Ge)==="[object Array]"){var Ve=0;for(je=[],Ve=0;Ve<Ge.length;Ve+=1)Object.prototype.toString.call(Ge[Ve])==="[object Array]"?je.push([t.doBidiReorder(Ge[Ve][0]),Ge[Ve][1],Ge[Ve][2]]):je.push([t.doBidiReorder(Ge[Ve])]);ke.text=je}else ke.text=t.doBidiReorder(Ge);t.setOptions({isInputVisual:!0})}])}(E),E.API.TTFFont=function(){function Oe(e){var t;if(this.rawData=e,t=this.contents=new ne(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new Le(this),this.registerTTF()}return Oe.open=function(e){return new Oe(e)},Oe.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new se(this),this.name=new pe(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new he(this),this.maxp=new ge(this),this.hmtx=new me(this),this.post=new fe(this),this.os2=new le(this),this.loca=new Ne(this),this.glyf=new be(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},Oe.prototype.registerTTF=function(){var e,t,ke,Ge,Be;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var je,Ve,Ze,Qe;for(Qe=[],je=0,Ve=(Ze=this.bbox).length;je<Ve;je++)e=Ze[je],Qe.push(Math.round(e*this.scaleFactor));return Qe}).call(this),this.stemV=0,this.post.exists?(ke=255&(Ge=this.post.italic_angle),32768&(t=Ge>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+ke)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(Be=this.familyClass)===1||Be===2||Be===3||Be===4||Be===5||Be===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},Oe.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},Oe.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},Oe.prototype.widthOfString=function(e,t,ke){var Ge,Be,je,Ve;for(je=0,Be=0,Ve=(e=""+e).length;0<=Ve?Be<Ve:Be>Ve;Be=0<=Ve?++Be:--Be)Ge=e.charCodeAt(Be),je+=this.widthOfGlyph(this.characterToGlyph(Ge))+ke*(1e3/t)||0;return je*(t/1e3)},Oe.prototype.lineHeight=function(e,t){var ke;return t==null&&(t=!1),ke=t?this.lineGap:0,(this.ascender+ke-this.decender)/1e3*e},Oe}();var re,ne=function(){function Oe(e){this.data=e??[],this.pos=0,this.length=this.data.length}return Oe.prototype.readByte=function(){return this.data[this.pos++]},Oe.prototype.writeByte=function(e){return this.data[this.pos++]=e},Oe.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},Oe.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},Oe.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},Oe.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},Oe.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},Oe.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},Oe.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},Oe.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},Oe.prototype.readString=function(e){var t,ke;for(ke=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)ke[t]=String.fromCharCode(this.readByte());return ke.join("")},Oe.prototype.writeString=function(e){var t,ke,Ge;for(Ge=[],t=0,ke=e.length;0<=ke?t<ke:t>ke;t=0<=ke?++t:--t)Ge.push(this.writeByte(e.charCodeAt(t)));return Ge},Oe.prototype.readShort=function(){return this.readInt16()},Oe.prototype.writeShort=function(e){return this.writeInt16(e)},Oe.prototype.readLongLong=function(){var e,t,ke,Ge,Be,je,Ve,Ze;return e=this.readByte(),t=this.readByte(),ke=this.readByte(),Ge=this.readByte(),Be=this.readByte(),je=this.readByte(),Ve=this.readByte(),Ze=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^ke)+4294967296*(255^Ge)+16777216*(255^Be)+65536*(255^je)+256*(255^Ve)+(255^Ze)+1):72057594037927940*e+281474976710656*t+1099511627776*ke+4294967296*Ge+16777216*Be+65536*je+256*Ve+Ze},Oe.prototype.writeLongLong=function(e){var t,ke;return t=Math.floor(e/4294967296),ke=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(ke>>24&255),this.writeByte(ke>>16&255),this.writeByte(ke>>8&255),this.writeByte(255&ke)},Oe.prototype.readInt=function(){return this.readInt32()},Oe.prototype.writeInt=function(e){return this.writeInt32(e)},Oe.prototype.read=function(e){var t,ke;for(t=[],ke=0;0<=e?ke<e:ke>e;ke=0<=e?++ke:--ke)t.push(this.readByte());return t},Oe.prototype.write=function(e){var t,ke,Ge,Be;for(Be=[],ke=0,Ge=e.length;ke<Ge;ke++)t=e[ke],Be.push(this.writeByte(t));return Be},Oe}(),ie=function(){var Oe;function e(t){var ke,Ge,Be;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},Ge=0,Be=this.tableCount;0<=Be?Ge<Be:Ge>Be;Ge=0<=Be?++Ge:--Ge)ke={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[ke.tag]=ke}return e.prototype.encode=function(t){var ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,un,dn;for(dn in cn=Object.keys(t).length,Ze=Math.log(2),tn=16*Math.floor(Math.log(cn)/Ze),je=Math.floor(tn/Ze),en=16*cn-tn,(Ge=new ne).writeInt(this.scalarType),Ge.writeShort(cn),Ge.writeShort(tn),Ge.writeShort(je),Ge.writeShort(en),Be=16*cn,Qe=Ge.pos+Be,Ve=null,un=[],t)for(an=t[dn],Ge.writeString(dn),Ge.writeInt(Oe(an)),Ge.writeInt(Qe),Ge.writeInt(an.length),un=un.concat(an),dn==="head"&&(Ve=Qe),Qe+=an.length;Qe%4;)un.push(0),Qe++;return Ge.write(un),ke=2981146554-Oe(Ge.data),Ge.pos=Ve+8,Ge.writeUInt32(ke),Ge.data},Oe=function(t){var ke,Ge,Be,je;for(t=ve.call(t);t.length%4;)t.push(0);for(Be=new ne(t),Ge=0,ke=0,je=t.length;ke<je;ke=ke+=4)Ge+=Be.readUInt32();return 4294967295&Ge},e}(),ae={}.hasOwnProperty,oe=function(Oe,e){for(var t in e)ae.call(e,t)&&(Oe[t]=e[t]);function ke(){this.constructor=Oe}return ke.prototype=e.prototype,Oe.prototype=new ke,Oe.__super__=e.prototype,Oe};re=function(){function Oe(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return Oe.prototype.parse=function(){},Oe.prototype.encode=function(){},Oe.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},Oe}();var se=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var ke;return(ke=new ne).writeInt(this.version),ke.writeInt(this.revision),ke.writeInt(this.checkSumAdjustment),ke.writeInt(this.magicNumber),ke.writeShort(this.flags),ke.writeShort(this.unitsPerEm),ke.writeLongLong(this.created),ke.writeLongLong(this.modified),ke.writeShort(this.xMin),ke.writeShort(this.yMin),ke.writeShort(this.xMax),ke.writeShort(this.yMax),ke.writeShort(this.macStyle),ke.writeShort(this.lowestRecPPEM),ke.writeShort(this.fontDirectionHint),ke.writeShort(t),ke.writeShort(this.glyphDataFormat),ke.data},e}(),ce=function(){function Oe(e,t){var ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,un,dn,fn,pn,gn,yn;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),tn=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(Ze=0;Ze<256;++Ze)this.codeMap[Ze]=e.readByte();break;case 4:for(cn=e.readUInt16(),an=cn/2,e.pos+=6,Be=function(){var vn,An;for(An=[],Ze=vn=0;0<=an?vn<an:vn>an;Ze=0<=an?++vn:--vn)An.push(e.readUInt16());return An}(),e.pos+=2,dn=function(){var vn,An;for(An=[],Ze=vn=0;0<=an?vn<an:vn>an;Ze=0<=an?++vn:--vn)An.push(e.readUInt16());return An}(),Qe=function(){var vn,An;for(An=[],Ze=vn=0;0<=an?vn<an:vn>an;Ze=0<=an?++vn:--vn)An.push(e.readUInt16());return An}(),en=function(){var vn,An;for(An=[],Ze=vn=0;0<=an?vn<an:vn>an;Ze=0<=an?++vn:--vn)An.push(e.readUInt16());return An}(),Ge=(this.length-e.pos+this.offset)/2,Ve=function(){var vn,An;for(An=[],Ze=vn=0;0<=Ge?vn<Ge:vn>Ge;Ze=0<=Ge?++vn:--vn)An.push(e.readUInt16());return An}(),Ze=pn=0,yn=Be.length;pn<yn;Ze=++pn)for(fn=Be[Ze],ke=gn=un=dn[Ze];un<=fn?gn<=fn:gn>=fn;ke=un<=fn?++gn:--gn)en[Ze]===0?je=ke+Qe[Ze]:(je=Ve[en[Ze]/2+(ke-un)-(an-Ze)]||0)!==0&&(je+=Qe[Ze]),this.codeMap[ke]=65535&je}e.pos=tn}return Oe.encode=function(e,t){var ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,un,dn,fn,pn,gn,yn,vn,An,xn,wn,bn,Mn,Pn,En,Cn,Rn,Tn,Nn,Gn,zn,$n,Qn,Hn,Ni,On,qn,Un,Ci,Si,_i,Ii,Li,Ri,tr,Fr;switch(Tn=new ne,je=Object.keys(e).sort(function(Bn,Ai){return Bn-Ai}),t){case"macroman":for(dn=0,fn=function(){var Bn=[];for(un=0;un<256;++un)Bn.push(0);return Bn}(),gn={0:0},Be={},Nn=0,Qn=je.length;Nn<Qn;Nn++)gn[Li=e[Ge=je[Nn]]]==null&&(gn[Li]=++dn),Be[Ge]={old:e[Ge],new:gn[e[Ge]]},fn[Ge]=gn[e[Ge]];return Tn.writeUInt16(1),Tn.writeUInt16(0),Tn.writeUInt32(12),Tn.writeUInt16(0),Tn.writeUInt16(262),Tn.writeUInt16(0),Tn.write(fn),{charMap:Be,subtable:Tn.data,maxGlyphID:dn+1};case"unicode":for(Cn=[],tn=[],yn=0,gn={},ke={},pn=Qe=null,Gn=0,Hn=je.length;Gn<Hn;Gn++)gn[An=e[Ge=je[Gn]]]==null&&(gn[An]=++yn),ke[Ge]={old:An,new:gn[An]},Ve=gn[An]-Ge,pn!=null&&Ve===Qe||(pn&&tn.push(pn),Cn.push(Ge),Qe=Ve),pn=Ge;for(pn&&tn.push(pn),tn.push(65535),Cn.push(65535),Pn=2*(Mn=Cn.length),bn=2*Math.pow(Math.log(Mn)/Math.LN2,2),an=Math.log(bn/2)/Math.LN2,wn=2*Mn-bn,Ze=[],xn=[],cn=[],un=zn=0,Ni=Cn.length;zn<Ni;un=++zn){if(En=Cn[un],en=tn[un],En===65535){Ze.push(0),xn.push(0);break}if(En-(Rn=ke[En].new)>=32768)for(Ze.push(0),xn.push(2*(cn.length+Mn-un)),Ge=$n=En;En<=en?$n<=en:$n>=en;Ge=En<=en?++$n:--$n)cn.push(ke[Ge].new);else Ze.push(Rn-En),xn.push(0)}for(Tn.writeUInt16(3),Tn.writeUInt16(1),Tn.writeUInt32(12),Tn.writeUInt16(4),Tn.writeUInt16(16+8*Mn+2*cn.length),Tn.writeUInt16(0),Tn.writeUInt16(Pn),Tn.writeUInt16(bn),Tn.writeUInt16(an),Tn.writeUInt16(wn),_i=0,On=tn.length;_i<On;_i++)Ge=tn[_i],Tn.writeUInt16(Ge);for(Tn.writeUInt16(0),Ii=0,qn=Cn.length;Ii<qn;Ii++)Ge=Cn[Ii],Tn.writeUInt16(Ge);for(Ri=0,Un=Ze.length;Ri<Un;Ri++)Ve=Ze[Ri],Tn.writeUInt16(Ve);for(tr=0,Ci=xn.length;tr<Ci;tr++)vn=xn[tr],Tn.writeUInt16(vn);for(Fr=0,Si=cn.length;Fr<Si;Fr++)dn=cn[Fr],Tn.writeUInt16(dn);return{charMap:ke,subtable:Tn.data,maxGlyphID:yn+1}}},Oe}(),ue=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="cmap",e.prototype.parse=function(t){var ke,Ge,Be;for(t.pos=this.offset,this.version=t.readUInt16(),Be=t.readUInt16(),this.tables=[],this.unicode=null,Ge=0;0<=Be?Ge<Be:Ge>Be;Ge=0<=Be?++Ge:--Ge)ke=new ce(t,this.offset),this.tables.push(ke),ke.isUnicode&&this.unicode==null&&(this.unicode=ke);return!0},e.encode=function(t,ke){var Ge,Be;return ke==null&&(ke="macroman"),Ge=ce.encode(t,ke),(Be=new ne).writeUInt16(0),Be.writeUInt16(1),Ge.table=Be.data.concat(Ge.subtable),Ge},e}(),he=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),le=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var ke,Ge;for(Ge=[],ke=0;ke<10;++ke)Ge.push(t.readByte());return Ge}(),this.charRange=function(){var ke,Ge;for(Ge=[],ke=0;ke<4;++ke)Ge.push(t.readInt());return Ge}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var ke,Ge;for(Ge=[],ke=0;ke<2;ke=++ke)Ge.push(t.readInt());return Ge}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),fe=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="post",e.prototype.parse=function(t){var ke,Ge,Be;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var je;for(Ge=t.readUInt16(),this.glyphNameIndex=[],je=0;0<=Ge?je<Ge:je>Ge;je=0<=Ge?++je:--je)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],Be=[];t.pos<this.offset+this.length;)ke=t.readByte(),Be.push(this.names.push(t.readString(ke)));return Be;case 151552:return Ge=t.readUInt16(),this.offsets=t.read(Ge);case 196608:break;case 262144:return this.map=(function(){var Ve,Ze,Qe;for(Qe=[],je=Ve=0,Ze=this.file.maxp.numGlyphs;0<=Ze?Ve<Ze:Ve>Ze;je=0<=Ze?++Ve:--Ve)Qe.push(t.readUInt32());return Qe}).call(this)}},e}(),de=function(Oe,e){this.raw=Oe,this.length=Oe.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},pe=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="name",e.prototype.parse=function(t){var ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn;for(t.pos=this.offset,t.readShort(),ke=t.readShort(),Ze=t.readShort(),Ge=[],je=0;0<=ke?je<ke:je>ke;je=0<=ke?++je:--je)Ge.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+Ze+t.readShort()});for(Qe={},je=tn=0,an=Ge.length;tn<an;je=++tn)Be=Ge[je],t.pos=Be.offset,en=t.readString(Be.length),Ve=new de(en,Be),Qe[cn=Be.nameID]==null&&(Qe[cn]=[]),Qe[Be.nameID].push(Ve);this.strings=Qe,this.copyright=Qe[0],this.fontFamily=Qe[1],this.fontSubfamily=Qe[2],this.uniqueSubfamily=Qe[3],this.fontName=Qe[4],this.version=Qe[5];try{this.postscriptName=Qe[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=Qe[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=Qe[7],this.manufacturer=Qe[8],this.designer=Qe[9],this.description=Qe[10],this.vendorUrl=Qe[11],this.designerUrl=Qe[12],this.license=Qe[13],this.licenseUrl=Qe[14],this.preferredFamily=Qe[15],this.preferredSubfamily=Qe[17],this.compatibleFull=Qe[18],this.sampleText=Qe[19]},e}(),ge=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),me=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="hmtx",e.prototype.parse=function(t){var ke,Ge,Be,je,Ve,Ze,Qe;for(t.pos=this.offset,this.metrics=[],ke=0,Ze=this.file.hhea.numberOfMetrics;0<=Ze?ke<Ze:ke>Ze;ke=0<=Ze?++ke:--ke)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(Be=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var en,tn;for(tn=[],ke=en=0;0<=Be?en<Be:en>Be;ke=0<=Be?++en:--en)tn.push(t.readInt16());return tn}(),this.widths=(function(){var en,tn,an,cn;for(cn=[],en=0,tn=(an=this.metrics).length;en<tn;en++)je=an[en],cn.push(je.advance);return cn}).call(this),Ge=this.widths[this.widths.length-1],Qe=[],ke=Ve=0;0<=Be?Ve<Be:Ve>Be;ke=0<=Be?++Ve:--Ve)Qe.push(this.widths.push(Ge));return Qe},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),ve=[].slice,be=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an;return t in this.cache?this.cache[t]:(je=this.file.loca,ke=this.file.contents,Ge=je.indexOf(t),(Be=je.lengthOf(t))===0?this.cache[t]=null:(ke.pos=this.offset+Ge,Ve=(Ze=new ne(ke.read(Be))).readShort(),en=Ze.readShort(),an=Ze.readShort(),Qe=Ze.readShort(),tn=Ze.readShort(),this.cache[t]=Ve===-1?new we(Ze,en,an,Qe,tn):new ye(Ze,Ve,en,an,Qe,tn),this.cache[t]))},e.prototype.encode=function(t,ke,Ge){var Be,je,Ve,Ze,Qe;for(Ve=[],je=[],Ze=0,Qe=ke.length;Ze<Qe;Ze++)Be=t[ke[Ze]],je.push(Ve.length),Be&&(Ve=Ve.concat(Be.encode(Ge)));return je.push(Ve.length),{table:Ve,offsets:je}},e}(),ye=function(){function Oe(e,t,ke,Ge,Be,je){this.raw=e,this.numberOfContours=t,this.xMin=ke,this.yMin=Ge,this.xMax=Be,this.yMax=je,this.compound=!1}return Oe.prototype.encode=function(){return this.raw.data},Oe}(),we=function(){function Oe(e,t,ke,Ge,Be){var je,Ve;for(this.raw=e,this.xMin=t,this.yMin=ke,this.xMax=Ge,this.yMax=Be,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],je=this.raw;Ve=je.readShort(),this.glyphOffsets.push(je.pos),this.glyphIDs.push(je.readUInt16()),32&Ve;)je.pos+=1&Ve?4:2,128&Ve?je.pos+=8:64&Ve?je.pos+=4:8&Ve&&(je.pos+=2)}return Oe.prototype.encode=function(){var e,t,ke;for(t=new ne(ve.call(this.raw.data)),e=0,ke=this.glyphIDs.length;e<ke;++e)t.pos=this.glyphOffsets[e];return t.data},Oe}(),Ne=function(Oe){function e(){return e.__super__.constructor.apply(this,arguments)}return oe(e,re),e.prototype.tag="loca",e.prototype.parse=function(t){var ke,Ge;return t.pos=this.offset,ke=this.file.head.indexToLocFormat,this.offsets=ke===0?(function(){var Be,je;for(je=[],Ge=0,Be=this.length;Ge<Be;Ge+=2)je.push(2*t.readUInt16());return je}).call(this):(function(){var Be,je;for(je=[],Ge=0,Be=this.length;Ge<Be;Ge+=4)je.push(t.readUInt32());return je}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,ke){for(var Ge=new Uint32Array(this.offsets.length),Be=0,je=0,Ve=0;Ve<Ge.length;++Ve)if(Ge[Ve]=Be,je<ke.length&&ke[je]==Ve){++je,Ge[Ve]=Be;var Ze=this.offsets[Ve],Qe=this.offsets[Ve+1]-Ze;Qe>0&&(Be+=Qe)}for(var en=new Array(4*Ge.length),tn=0;tn<Ge.length;++tn)en[4*tn+3]=255&Ge[tn],en[4*tn+2]=(65280&Ge[tn])>>8,en[4*tn+1]=(16711680&Ge[tn])>>16,en[4*tn]=(4278190080&Ge[tn])>>24;return en},e}(),Le=function(){function Oe(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return Oe.prototype.generateCmap=function(){var e,t,ke,Ge,Be;for(t in Ge=this.font.cmap.tables[0].codeMap,e={},Be=this.subset)ke=Be[t],e[t]=Ge[ke];return e},Oe.prototype.glyphsFor=function(e){var t,ke,Ge,Be,je,Ve,Ze;for(Ge={},je=0,Ve=e.length;je<Ve;je++)Ge[Be=e[je]]=this.font.glyf.glyphFor(Be);for(Be in t=[],Ge)(ke=Ge[Be])!=null&&ke.compound&&t.push.apply(t,ke.glyphIDs);if(t.length>0)for(Be in Ze=this.glyphsFor(t))ke=Ze[Be],Ge[Be]=ke;return Ge},Oe.prototype.encode=function(e,t){var ke,Ge,Be,je,Ve,Ze,Qe,en,tn,an,cn,un,dn,fn,pn;for(Ge in ke=ue.encode(this.generateCmap(),"unicode"),je=this.glyphsFor(e),cn={0:0},pn=ke.charMap)cn[(Ze=pn[Ge]).old]=Ze.new;for(un in an=ke.maxGlyphID,je)un in cn||(cn[un]=an++);return en=function(gn){var yn,vn;for(yn in vn={},gn)vn[gn[yn]]=yn;return vn}(cn),tn=Object.keys(en).sort(function(gn,yn){return gn-yn}),dn=function(){var gn,yn,vn;for(vn=[],gn=0,yn=tn.length;gn<yn;gn++)Ve=tn[gn],vn.push(en[Ve]);return vn}(),Be=this.font.glyf.encode(je,dn,cn),Qe=this.font.loca.encode(Be.offsets,dn),fn={cmap:this.font.cmap.raw(),glyf:Be.table,loca:Qe,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(fn["OS/2"]=this.font.os2.raw()),this.font.directory.encode(fn)},Oe}();E.API.PDFObject=function(){var Oe;function e(){}return Oe=function(t,ke){return(Array(ke+1).join("0")+t).slice(-ke)},e.convert=function(t){var ke,Ge,Be,je;if(Array.isArray(t))return"["+function(){var Ve,Ze,Qe;for(Qe=[],Ve=0,Ze=t.length;Ve<Ze;Ve++)ke=t[Ve],Qe.push(e.convert(ke));return Qe}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t!=null&&t.isString)return"("+t+")";if(t instanceof Date)return"(D:"+Oe(t.getUTCFullYear(),4)+Oe(t.getUTCMonth(),2)+Oe(t.getUTCDate(),2)+Oe(t.getUTCHours(),2)+Oe(t.getUTCMinutes(),2)+Oe(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(Ge in Be=["<<"],t)je=t[Ge],Be.push("/"+Ge+" "+e.convert(je));return Be.push(">>"),Be.join(`
`)}return""+t},e}();const _export_sfc=(Oe,e)=>{const t=Oe.__vccOpts||Oe;for(const[ke,Ge]of e)t[ke]=Ge;return t},_hoisted_1$c={class:"mt-10"},_hoisted_2$6={class:"print-preview-container"},__default__$i={},_sfc_main$o=Object.assign(__default__$i,{__name:"PrintModal",props:{visibility:Boolean,printOptions:Object},setup(Oe,{expose:e}){useCssVars(Qn=>({"6f67f528":unref(Gn),"2765ae41":unref(Nn),"03aea05c":fn,"602ad150":unref(Tn),"139959d5":unref(Rn),c1f4adaa:unref(Cn)}));const t=useEulerian(),ke=useMapStore(),Ge=inject("selectedLayers"),Be="Imprimer une carte",je="xl",Ve=[{label:"Portrait",value:"portrait",icon:"md-cropportrait-sharp"},{label:"Paysage",value:"landscape",icon:"md-croplandscape-sharp"}],Ze=ref(!1),Qe=()=>{Ze.value=!0,t.pause()},en=()=>{Ze.value=!1,t.resume()};e({onModalPrintClose:en,onModalPrintOpen:Qe});const tn=ref(null),an=ref(null),cn=ref(null),un=ref(null),dn=ref(null),fn="10px",pn=.264583333,gn=ref(!0),yn=ref(!1),vn=ref("Ma carte"),An=ref("portrait"),xn=ref(0),wn=ref("A4"),bn=computed(()=>{let Qn={A0:{width:841,height:1189},A1:{width:594,height:841},A2:{width:420,height:594},A3:{width:297,height:420},A4:{width:210,height:297},A5:{width:148,height:210},B4:{width:250,height:353},B5:{width:176,height:250}};return{width:Qn[wn.value].width,height:Qn[wn.value].height}}),Mn=reactive(useElementSize(cn,{width:0,height:0},{box:"border-box"})),Pn=reactive(useElementSize(un,{width:0,height:0},{box:"border-box"})),En=reactive(useElementSize(an,{width:0,height:0},{box:"border-box"})),Cn=computed(()=>{if(An.value=="portrait")return Math.floor((Mn.height-En.height)*pn)/bn.value.height;if(An.value=="landscape"){let Qn=Math.floor((Mn.width-Pn.width-parseInt(fn))*pn)/bn.value.height;return bn.value.height*Qn+En.height<Mn.height?Math.floor((Mn.height-En.height)*pn)/bn.value.width:Qn}}),Rn=computed(()=>{if(An.value=="portrait")return bn.value.height+"mm";if(An.value=="landscape")return bn.value.width+"mm"}),Tn=computed(()=>{if(An.value=="portrait")return bn.value.width+"mm";if(An.value=="landscape")return bn.value.height+"mm"}),Nn=computed(()=>Mn.height+"px"),Gn=computed(()=>{if(An.value=="portrait")return bn.value.width*Cn.value/pn+"px";if(An.value=="landscape")return bn.value.height*Cn.value/pn+"px"}),zn=()=>{const Qn={orientation:An.value,unit:"mm",format:[parseInt(Rn.value),parseInt(Tn.value)]},Hn=new E(Qn),Ni=parseInt(xn.value),On=tn.value.mapRef.getElementsByTagName("canvas")[0].width,qn=tn.value.mapRef.getElementsByTagName("canvas")[0].height,Un=tn.value.mapRef.getElementsByTagName("canvas")[0];if(tn.value.mapRef.getElementsByTagName("canvas").length<2){var Ci=document.createElement("canvas");Ci.classList=["fixedoverlay"],Ci.width=On,Ci.height=qn,tn.value.mapRef.getElementsByClassName("ol-overlaycontainer")[0].insertAdjacentElement("beforebegin",Ci)}else var Ci=tn.value.mapRef.getElementsByTagName("canvas")[1];Ci.style.display="none",Ci.getContext("2d").reset();const _i=Un.toDataURL("image/png"),Ii=On*pn-Ni*2,Li=(qn-En.height)*pn-Ni*2,Ri=Ni,tr=En.height*pn+Ni;if(Hn.addImage(_i,"PNG",Ri,tr,Ii,Li),gn.value){const Fr=tn.value.mapRef.getElementsByClassName("ol-scale-line")[0],Bn=Fr.children[0],Ai=getComputedStyle(Fr),Kn=getComputedStyle(Bn),Fn=parseInt(Ai.left),$i=parseInt(Ai.bottom),Hi=Bn.innerHTML,Di=parseInt(Kn.width),zi=parseInt(Kn.lineHeight),Bi=qn-$i-zi,Gi=Ci.getContext("2d");Gi.beginPath(),Gi.fillStyle="rgba(255, 255, 255, 0.75)",Gi.rect(Fn,Bi,Di,zi),Gi.fillRect(Fn,Bi,Di,zi),Gi.font=Kn.font,Gi.textAlign="center",Gi.fillStyle="#000000",Gi.fillText(Hi,Fn+Di/2,Bi+zi/2),Gi.beginPath(),Gi.moveTo(Fn,Bi),Gi.lineTo(Fn,Bi+zi),Gi.lineTo(Fn,Bi+zi),Gi.lineTo(Fn+Di,Bi+zi),Gi.lineTo(Fn+Di,Bi),Gi.lineWidth=1,Gi.lineCap="round",Gi.strokeStyle="#666666",Gi.stroke();const Ti=Ci.toDataURL("image/png");Hn.addImage(Ti,"PNG",Ri,tr,Ii,Li)}Hn.save("carte.pdf")},$n={id:"4",units:"metric",bar:!1};return(Qn,Hn)=>{const Ni=li,On=pi,qn=vt$1,Un=Ae,Ci=_sfc_main$p,Si=_sfc_main$I,_i=$s;return openBlock(),createBlock(_i,{opened:unref(Ze),title:Be,size:je,onClose:en},{default:withCtx(()=>[createBaseVNode("div",{ref_key:"printPage",ref:cn,class:"print-page"},[createBaseVNode("div",{ref_key:"printForm",ref:un,class:"print-form"},[createVNode(Ni,{inline:!1,modelValue:unref(An),"onUpdate:modelValue":Hn[0]||(Hn[0]=Ii=>isRef(An)?An.value=Ii:null),options:Ve,small:!1,legend:"Mise en Page",class:"mb-20"},{legend:withCtx(()=>Hn[3]||(Hn[3]=[createTextVNode("Mise en Page")])),_:1},8,["modelValue"]),createVNode(On,{modelValue:unref(wn),"onUpdate:modelValue":Hn[1]||(Hn[1]=Ii=>isRef(wn)?wn.value=Ii:null),label:"Dimensions",options:["A0","A1","A2","A3","A4","A5","B4","B5"]},null,8,["modelValue"]),createBaseVNode("div",_hoisted_1$c,[createVNode(qn,{modelValue:unref(gn),"onUpdate:modelValue":Hn[2]||(Hn[2]=Ii=>isRef(gn)?gn.value=Ii:null),name:"checkbox-simple",label:unref(gn)?"Désactiver l'échelle":"Afficher l'échelle"},null,8,["modelValue","label"])]),createVNode(Un,{id:"print-page-export",label:"Export PDF",title:"Export PDF",icon:"","no-outline":"",onClick:zn})],512),createBaseVNode("div",_hoisted_2$6,[createBaseVNode("div",{ref_key:"printPreview",ref:dn,class:"print-preview"},[unref(yn)?(openBlock(),createElementBlock("div",{key:0,id:"map-title",ref_key:"mapTitle",ref:an,class:"map-title"},toDisplayString(unref(vn)),513)):createCommentVNode("",!0),unref(Ze)?(openBlock(),createBlock(_sfc_main$N,{key:1,class:"map",ref_key:"refMap",ref:tn,"map-Id":unref(printMap)},{default:withCtx(()=>[createVNode(_sfc_main$M,{"map-Id":unref(printMap),center:unref(ke).center,zoom:unref(ke).zoom},null,8,["map-Id","center","zoom"]),createVNode(Ci,{"map-Id":unref(printMap),"selected-layers":unref(Ge)},null,8,["map-Id","selected-layers"]),createVNode(Si,{visibility:unref(gn),"scale-line-options":$n,"map-id":unref(printMap)},null,8,["visibility","map-id"])]),_:1},8,["map-Id"])):createCommentVNode("",!0)],512)])],512)]),_:1},8,["opened"])}}}),PrintModal=_export_sfc(_sfc_main$o,[["__scopeId","data-v-89871f69"]]),__default__$h={},_sfc_main$n=Object.assign(__default__$h,{__name:"ShareModal",setup(Oe,{expose:e}){const t=useEulerian(),ke=useDataStore(),Ge=useMapStore(),Be="Partager une carte",je="lg",Ve=ref(!1),Ze=()=>{Ve.value=!0,t.pause()},Qe=()=>{Ve.value=!1,t.resume()},en=ke.getContacts(),tn=computed(()=>encodeURI(Ge.permalink).replaceAll("&","%26")),an=computed(()=>({address:en.mail,subject:"Cartes à consulter sur cartes.gouv.fr",body:`Bonjour,%0AJe vous invite à consulter cette carte sur Cartes.gouv.fr :%0A${tn.value}`})),cn=computed(()=>({to:`mailto:${an.value.address}?subject=${an.value.subject}&body=${an.value.body}`,label:"Envoyer un mail"})),un=computed(()=>[{name:"facebook",label:"Partager sur Facebook",url:en.networks.facebook+"?display=popup&u="+Ge.permalink},{name:"linkedin",label:"Partager sur LinkedIn",url:en.networks.linkedin+"?url="+Ge.permalink+"&title=Ma%20carte%20IGN"},{name:"instagram",label:"Partager sur Instagram",url:en.networks.instagram}]),dn=computed(()=>`<iframe
    width="600" height="400" frameborder="0" scrolling="no" marginheight="0" marginwidth="0"
    sandbox="allow-forms allow-scripts allow-same-origin"
    src="${Ge.permalinkShare}"
    allowfullscreen>
  </iframe>`);ref("");const{copy:fn}=useClipboard({});ref(null);const pn="co-copy",gn=ref(.8325),yn=computed(()=>({scale:gn.value,name:pn}));return onMounted(()=>{nextTick(function(){})}),onBeforeMount(()=>{nextTick(function(){})}),e({onModalShareOpen:Ze,onModalShareClose:Qe}),(vn,An)=>{const xn=wi,wn=g$1,bn=Ae,Mn=qe,Pn=$s;return openBlock(),createBlock(Pn,{opened:unref(Ve),title:Be,size:je,onClose:Qe},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(xn,{copyLabel:"Copier dans le presse-papier",mail:unref(cn),networks:unref(un),title:"Partages"},null,8,["mail","networks"])])]),createBaseVNode("div",null,[createBaseVNode("p",null,[createVNode(Mn,{modelValue:unref(Ge).permalink,"onUpdate:modelValue":An[1]||(An[1]=En=>unref(Ge).permalink=En),label:"Lien permanent vers la carte",placeholder:"","label-visible":"",readonly:"",descriptionId:""},{label:withCtx(()=>[An[4]||(An[4]=createTextVNode(" Lien permanent vers la carte ")),createVNode(bn,{tertiary:"",noOutline:!0,onClick:An[0]||(An[0]=En=>unref(fn)(unref(Ge).permalink))},{default:withCtx(()=>[createVNode(wn,normalizeProps(guardReactiveProps(unref(yn))),null,16)]),_:1})]),_:1},8,["modelValue"])]),createBaseVNode("p",null,[createVNode(Mn,{modelValue:unref(dn),"onUpdate:modelValue":An[3]||(An[3]=En=>isRef(dn)?dn.value=En:null),placeholder:"",isTextarea:"","label-visible":"",readonly:"",descriptionId:"",style:{height:"200px"}},{label:withCtx(()=>[An[5]||(An[5]=createTextVNode(" Copiez le code HTML pour intégrer la carte dans un site ")),createVNode(bn,{tertiary:"",noOutline:!0,onClick:An[2]||(An[2]=En=>unref(fn)(unref(dn)))},{default:withCtx(()=>[createVNode(wn,normalizeProps(guardReactiveProps(unref(yn))),null,16)]),_:1})]),_:1},8,["modelValue"])])])]),_:1},8,["opened"])}}}),ShareModal=_export_sfc(_sfc_main$n,[["__scopeId","data-v-de59dc60"]]),__default__$g={name:"Controls"},_sfc_main$m=Object.assign(__default__$g,{props:{controlOptions:Array,mapId:String},setup(Oe){const e=Oe,t=useMapStore(),ke=useDataStore();dist.useLogger().debug(e.controlOptions);const Be={id:"1",collapsed:!1,collapsible:!1,displayButtonAdvancedSearch:!0,displayButtonGeolocate:!0,displayButtonCoordinateSearch:!0,displayButtonClose:!1,resources:{search:!0},searchOptions:{addToMap:!1,filterServices:"WMTS,WMS,TMS",filterWMTSPriority:!0,filterLayersPriority:ke.getFeatured().toString(),serviceOptions:{}},autocompleteOptions:{serviceOptions:{maximumResponses:10},prettifyResults:!0,maximumEntries:5},markerUrl:IconGeolocationSVG},je={options:{id:"2",position:useControlsExtensionPosition().layerSwitcherOptions,collapsed:!0,panel:!0,counter:!0}},Ve={id:"3",position:useControlsExtensionPosition().legendsOptions,panel:!0,auto:!0,draggable:!1},Ze={id:"4",units:"metric",bar:!1},Qe={id:"5",position:useControlsExtensionPosition().territoriesOptions,panel:!0,title:"Sélectionner un territoire",auto:!1,thumbnail:!1,reduce:!1,tiles:3},en={id:"6",position:useControlsExtensionPosition().getFeatureInfoOptions},tn={id:"7",position:useControlsExtensionPosition().overviewMapOptions},an={id:"8",position:useControlsExtensionPosition().fullscreenOptions},cn={position:useControlsExtensionPosition().zoomOptions,id:"9"},un={position:useControlsExtensionPosition().controlListOptions,id:"10",gutter:!1,controlCatalogElement:document.getElementById("MenuControl")},dn={id:"11",position:"top-right",gutter:!1,listable:!0},fn={id:"12",position:useControlsExtensionPosition().reverseGeocodeOptions,gutter:!1,listable:!0},pn={position:useControlsExtensionPosition().isocurveOptions,id:"13",gutter:!1,listable:!0},gn={position:useControlsExtensionPosition().routeOptions,id:"14",gutter:!1,listable:!0},yn={id:"15",position:useControlsExtensionPosition().measureLengthOptions,gutter:!1,listable:!0},vn={position:useControlsExtensionPosition().measureAreaOptions,id:"16",gutter:!1,listable:!0},An={position:useControlsExtensionPosition().measureAzimuthOptions,gutter:!1,listable:!0,id:"17"},xn={position:useControlsExtensionPosition().mousePositionOptions,id:"18",gutter:!1,listable:!0,systems:[{label:"Géographique",crs:"EPSG:4326",type:"Geographical"},{label:"Web Mercator",crs:"EPSG:3857",type:"Metric"},{label:"Lambert 93",crs:"EPSG:2154",type:"Metric",geoBBox:{left:-9.86,bottom:41.15,right:10.38,top:51.56}},{label:"Lambert II étendu",crs:"EPSG:27572",type:"Metric",geoBBox:{left:-4.87,bottom:42.33,right:8.23,top:51.14}},{crs:"EPSG:32620",label:"UTM 20N (Guadeloupe, Martinique)",type:"Metric",geoBBox:{left:-66,bottom:0,right:-60,top:84}},{crs:"EPSG:4467",label:"UTM 21N (Saint-Pierre-et-Miquelon)",type:"Metric",geoBBox:{left:-57.1,bottom:43.41,right:-55.9,top:47.37}},{crs:"EPSG:2972",label:"UTM 22N (Guyane)",type:"Metric",geoBBox:{left:-54.6,bottom:2.11,right:-49.46,top:8.88}},{crs:"EPSG:32630",label:"UTM 30N (France métropolitaine)",type:"Metric",geoBBox:{left:-6,bottom:0,right:0,top:84}},{crs:"EPSG:32631",label:"UTM 31N (France métropolitaine)",type:"Metric",geoBBox:{left:0,bottom:0,right:6,top:84}},{crs:"EPSG:32632",label:"UTM 32N (France métropolitaine)",type:"Metric",geoBBox:{left:6,bottom:0,right:12,top:84}},{crs:"EPSG:4471",label:"UTM 38S (Mayotte)",type:"Metric",geoBBox:{left:43.68,bottom:-14.49,right:46.7,top:-11.33}},{crs:"EPSG:2975",label:"UTM 40S (Réunion)",type:"Metric",geoBBox:{left:51.83,bottom:-24.72,right:58.24,top:-18.28}},{crs:"EPSG:3296",label:"UTM 5S (Polynésie)",type:"Metric",geoBBox:{left:-158.13,bottom:-26.7,right:-150,top:-12.5}},{crs:"EPSG:3297",label:"UTM 6S (Polynésie)",type:"Metric",geoBBox:{left:-150,bottom:-31.2,right:-144,top:-7.29}},{crs:"EPSG:32707",label:"UTM 7S (Polynésie)",type:"Metric",geoBBox:{left:-144,bottom:-80,right:-138,top:0}},{crs:"EPSG:32708",label:"UTM 8S (Polynésie)",type:"Metric",geoBBox:{left:-138,bottom:-80,right:-132,top:0}},{crs:"EPSG:26912",label:"UTM 12N (Île de Clipperton)",type:"Metric",geoBBox:{left:-109.5,bottom:10.17,right:-109,top:10.5}},{crs:"EPSG:32742",label:"UTM 42S (Îles Kerguelen)",type:"Metric",geoBBox:{left:66,bottom:-80,right:72,top:0}},{crs:"EPSG:32739",label:"UTM 39S (Îles Crozet)",type:"Metric",geoBBox:{left:48,bottom:-80,right:54,top:0}},{crs:"EPSG:32743",label:"UTM 43S (Îles St-Paul et Amsterdam)",type:"Metric",geoBBox:{left:72,bottom:-80,right:78,top:0}},{crs:"EPSG:2986",label:"Stéréographique polaire (Terre Adélie)",type:"Metric",geoBBox:{left:136,bottom:-67.13,right:142,top:-65.61}},{crs:"EPSG:32737",label:"UTM 37S (Îles du canal de Mozambique)",type:"Metric",geoBBox:{left:36,bottom:-80,right:42,top:0}},{crs:"EPSG:32738",label:"UTM 38S (Îles du canal de Mozambique)",type:"Metric",geoBBox:{left:42,bottom:-80,right:48,top:0}},{crs:"EPSG:2988",label:"UTM 1S (Wallis-et-Futuna)",type:"Metric",geoBBox:{left:-176.25,bottom:-13.41,right:-176.07,top:-13.16}},{crs:"EPSG:3163",label:"RGNC91-93 (Nouvelle-Calédonie)",type:"Metric",geoBBox:{left:156.25,bottom:-26.45,right:174.28,top:-14.83}}]},wn={id:"19",position:useControlsExtensionPosition().elevationPathOptions,gutter:!1,listable:!0},bn={id:"20",position:useControlsExtensionPosition().layerImportOptions,gutter:!1,listable:!0},Mn=inject("refPrintModal"),Pn=inject("modalShareRef"),En=computed(()=>({contextMenuItemsOptions:[{text:"Imprimer la carte",callback:function(){Mn.value.onModalPrintOpen()}},{text:"Partager la carte",callback:function(){Pn.value.onModalShareOpen()}},{text:"Ajouter des données",callback:()=>{t.getmenuCatalogueButton().firstChild.click()}}]}));return(Cn,Rn)=>{const Tn=_sfc_main$K,Nn=_sfc_main$L;return openBlock(),createElementBlock(Fragment,null,[Oe.controlOptions?(openBlock(),createBlock(_sfc_main$F,{key:0,visibility:e.controlOptions.includes(unref(useControls).LayerSwitcher.id),analytic:unref(useControls).LayerSwitcher.analytic,"layer-switcher-options":je,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$E,{key:1,visibility:e.controlOptions.includes(unref(useControls).Legends.id),analytic:unref(useControls).Legends.analytic,"legends-options":Ve,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$B,{key:2,visibility:e.controlOptions.includes(unref(useControls).Route.id),analytic:unref(useControls).Route.analytic,"route-options":gn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$C,{key:3,visibility:e.controlOptions.includes(unref(useControls).Isocurve.id),analytic:unref(useControls).Isocurve.analytic,"isocurve-options":pn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(Tn,{key:4,visibility:e.controlOptions.includes(unref(useControls).ReverseGeocode.id),analytic:unref(useControls).ReverseGeocode.analytic,"reverse-geocode-options":fn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(Nn,{key:5,visibility:e.controlOptions.includes(unref(useControls).FullScreen.id),analytic:unref(useControls).FullScreen.analytic,"fullscreen-options":an,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$G,{key:6,visibility:e.controlOptions.includes(unref(useControls).Zoom.id),analytic:unref(useControls).Zoom.analytic,"zoom-options":cn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$J,{key:7,visibility:e.controlOptions.includes(unref(useControls).SearchEngine.id),analytic:unref(useControls).SearchEngine.analytic,"search-engine-options":Be,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$u,{key:8,visibility:e.controlOptions.includes(unref(useControls).GetFeatureInfo.id),analytic:unref(useControls).GetFeatureInfo.analytic,"get-feature-info-options":en,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$I,{key:9,visibility:e.controlOptions.includes(unref(useControls).ScaleLine.id),analytic:unref(useControls).ScaleLine.analytic,"scale-line-options":Ze,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$H,{key:10,visibility:e.controlOptions.includes(unref(useControls).OverviewMap.id),analytic:unref(useControls).OverviewMap.analytic,"overview-map-options":tn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$v,{key:11,visibility:e.controlOptions.includes(unref(useControls).Territories.id),analytic:unref(useControls).Territories.analytic,"territories-options":Qe,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$A,{key:12,visibility:e.controlOptions.includes(unref(useControls).MeasureLength.id),analytic:unref(useControls).MeasureLength.analytic,"measure-length-options":yn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$z,{key:13,visibility:e.controlOptions.includes(unref(useControls).MeasureArea.id),analytic:unref(useControls).MeasureArea.analytic,"measure-area-options":vn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$y,{key:14,visibility:e.controlOptions.includes(unref(useControls).MeasureAzimuth.id),analytic:unref(useControls).MeasureAzimuth.analytic,"measure-azimuth-options":An,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$x,{key:15,visibility:e.controlOptions.includes(unref(useControls).MousePosition.id),analytic:unref(useControls).MousePosition.analytic,"mouse-position-options":xn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$D,{key:16,visibility:e.controlOptions.includes(unref(useControls).Drawing.id),analytic:unref(useControls).Drawing.analytic,"drawing-options":dn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$w,{key:17,visibility:e.controlOptions.includes(unref(useControls).ElevationPath.id),analytic:unref(useControls).ElevationPath.analytic,"elevation-path-options":wn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$t,{key:18,visibility:e.controlOptions.includes(unref(useControls).LayerImport.id),analytic:unref(useControls).LayerImport.analytic,"layer-import-options":bn,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$s,{key:19,visibility:e.controlOptions.includes(unref(useControls).ControlList.id),analytic:unref(useControls).ControlList.analytic,"control-list-options":un,"map-id":Oe.mapId},null,8,["visibility","analytic","map-id"])):createCommentVNode("",!0),Oe.controlOptions?(openBlock(),createBlock(_sfc_main$r,{key:20,visibility:e.controlOptions.includes(unref(useControls).ContextMenu.id),analytic:unref(useControls).ContextMenu.analytic,"context-menu-options":unref(En),"map-id":Oe.mapId},null,8,["visibility","analytic","context-menu-options","map-id"])):createCommentVNode("",!0)],64)}}}),__default__$f={name:"Carto"},_sfc_main$l=Object.assign(__default__$f,{props:{selectedControls:Array,selectedLayers:Object},setup(Oe){const e=Oe,t=useMapStore(),ke=ref(null),Ge=computed(()=>ke.value&&ke.value.mapRef);return(Be,je)=>(openBlock(),createBlock(_sfc_main$N,{class:"map",ref_key:"refMap",ref:ke,mapId:unref(mainMap)},{default:withCtx(()=>[createVNode(_sfc_main$M,{"map-Id":unref(mainMap),center:unref(t).center,zoom:unref(t).zoom},null,8,["map-Id","center","zoom"]),unref(Ge)?(openBlock(),createBlock(_sfc_main$m,{key:0,"control-options":e.selectedControls,"map-id":unref(mainMap)},null,8,["control-options","map-id"])):createCommentVNode("",!0),createVNode(_sfc_main$p,{"map-Id":unref(mainMap),"selected-layers":e.selectedLayers},null,8,["map-Id","selected-layers"])]),_:1},8,["mapId"]))}}),Carto=_export_sfc(_sfc_main$l,[["__scopeId","data-v-9583e6b7"]]),_hoisted_1$b={class:"menu-content-list"},_hoisted_2$5={class:"menu-collapse-icon-wrapper"},_hoisted_3$1={class:"menu-content"},__default__$e={name:"MenuLateralWrapper"},_sfc_main$k=Object.assign(__default__$e,{props:mergeModels({side:String,visibility:Boolean,id:String,width:Number,padding:Number},{modelValue:!1,modelModifiers:{}}),emits:["update:modelValue"],setup(Oe,{expose:e}){useCssVars(pn=>({c317f55e:unref(tn),"6d46b01d":unref(an),"51c94c30":unref(cn)}));const t=Oe,ke="io-close",Ge=.8325,Be=computed(()=>({scale:Ge.value,name:ke})),je=t.width||550,Ve=t.padding||30,Ze=useModel(Oe,"modelValue",!1),Qe=ref(je),en=ref(Ve),tn=computed(()=>Qe.value+"px"),an=computed(()=>en.value+"px"),cn=computed(()=>Qe.value-en.value+"px"),un=ref();function dn(){Ze.value=!1}function fn(){Ze.value=!0}return e({closeMenu:dn,openMenu:fn}),(pn,gn)=>{const yn=Ae;return Oe.visibility?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["menu-toggle-wrap",`${Ze.value&&"is_expanded"} ${t.side}`])},[createBaseVNode("div",{ref_key:"menuTabs",ref:un,class:"menu-logo-list"},[renderSlot(pn.$slots,"navButtons",{},void 0,!0)],512),withDirectives(createBaseVNode("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$5,[createVNode(yn,{id:t.id,tertiary:"","no-outline":"",class:"menu-collapse-icon",onClick:dn},{default:withCtx(()=>[gn[0]||(gn[0]=createTextVNode(" Fermer ")),createVNode(unref(g$1),normalizeProps(guardReactiveProps(unref(Be))),null,16)]),_:1},8,["id"])]),createBaseVNode("div",_hoisted_3$1,[renderSlot(pn.$slots,"content",{},void 0,!0)])],512),[[vShow,Ze.value]])],2)):createCommentVNode("",!0)}}}),__unplugin_components_2=_export_sfc(_sfc_main$k,[["__scopeId","data-v-303f0735"]]),__default__$d={name:"MenuLateralButton"},_sfc_main$j=Object.assign(__default__$d,{props:{icon:String,id:String,active:Boolean,title:String,side:String,visibility:Boolean},emits:["tabClicked"],setup(Oe,{expose:e,emit:t}){const ke=useMapStore(),Ge=Oe,Be=Ge.icon,je=t,Ve=()=>{Ge.side=="left"&&tn(),Ge.side=="right"&&en(),je("tabClicked",Ge.id)},Ze=useControlsPosition();function Qe(dn){let fn=[...dn.element.children].filter(pn=>{if(pn.className.includes("GPshowOpen"))return pn});fn[0].getAttribute("aria-pressed")==="true"&&fn[0].click()}function en(dn){ke.getMap().getControls().getArray().forEach(fn=>{Ze.right.includes(fn.CLASSNAME)&&Qe(fn)})}function tn(){ke.getMap().getControls().getArray().forEach(dn=>{Ze.left.includes(dn.CLASSNAME)&&Qe(dn)})}function an(){console.log("click on button"+Ge.id),cn.click()}const cn=ref(null),un=ref(Ge.id);return e({clickButton:an,button:cn,id:un}),onMounted(()=>{Ge.id=="MenuCatalogue"&&ke.setmenuCatalogueButton(cn.value)}),(dn,fn)=>{const pn=Ae;return openBlock(),createElementBlock("div",{ref_key:"button",ref:cn},[createVNode(pn,{id:unref(un),secondary:"","aria-label":Oe.title,class:normalizeClass(`${Oe.active?"active":""}  navBarIcon ${Oe.visibility?"":"invisibleNavButton"} navButton`),icon:unref(Be),iconOnly:!0,onClick:Ve},null,8,["id","aria-label","class","icon"])],512)}}}),__unplugin_components_1=_export_sfc(_sfc_main$j,[["__scopeId","data-v-465f99a4"]]),_hoisted_1$a={class:"container"},__default__$c={name:"MenuTierce"},_sfc_main$i=Object.assign(__default__$c,{emits:["openControl","onModalShareOpen","onModalPrintOpen","onModalThemeOpen","onEnregistrementOpen"],setup(Oe,{emit:e}){const t=useMapStore(),ke=e;function Ge(Ze){t.getMap().getControls().getArray().forEach(Qe=>{Qe.CLASSNAME==Ze&&([...Qe.element.children].filter(tn=>{if(tn.className.includes("GPshowOpen"))return tn})[0].click(),ke("openControl"))})}const Be="LayerImport",je=.8325,Ve=computed(()=>({scale:je.value,name:Be}));return(Ze,Qe)=>{const en=Ae;return openBlock(),createElementBlock("div",_hoisted_1$a,[createVNode(en,{tertiary:"","no-outline":"",icon:unref(Ve),onClick:Qe[0]||(Qe[0]=tn=>Ge("LayerImport"))},{default:withCtx(()=>Qe[4]||(Qe[4]=[createTextVNode(" Importer des données ")])),_:1},8,["icon"]),createVNode(en,{tertiary:"","no-outline":"",icon:"fr-icon-link",onClick:Qe[1]||(Qe[1]=tn=>Ze.$emit("onModalShareOpen"))},{default:withCtx(()=>Qe[5]||(Qe[5]=[createTextVNode(" Partager, intégrer la carte ")])),_:1}),createVNode(en,{tertiary:"","no-outline":"",icon:"px-print",onClick:Qe[2]||(Qe[2]=tn=>Ze.$emit("onModalPrintOpen")),class:"tierce-print"},{default:withCtx(()=>Qe[6]||(Qe[6]=[createTextVNode(" Imprimer ")])),_:1}),createVNode(en,{tertiary:"","no-outline":"",onClick:Qe[3]||(Qe[3]=tn=>Ze.$emit("onModalThemeOpen")),icon:"fr-icon-theme-fill"},{default:withCtx(()=>Qe[7]||(Qe[7]=[createTextVNode(" Paramètres d'affichage ")])),_:1})])}}}),MenuTierce=_export_sfc(_sfc_main$i,[["__scopeId","data-v-ac33d965"]]),side$1="left",_sfc_main$h={__name:"LeftMenuTool",props:{},emits:["onModalShareOpen","onModalPrintOpen","onModalThemeOpen"],setup(Oe,{emit:e}){const t=ref(),ke=computed(()=>[{componentName:"MenuTierce",icon:"ri-menu-fill",title:"Menu Tierce",visibility:!0},{componentName:"Enregistrement",icon:"ri-bookmark-line",title:"Mes Enregistrements",visibility:!1}]),Ge=ref("MenuCatalogueContent"),Be=ref(null);function je(en){Ve(en)&&t.value?Be.value.closeMenu():(Ge.value=en+"Content",Be.value.openMenu())}function Ve(en){return Ge.value.replace("Content","")===en}function Ze(){Qe.value.filter(en=>en.id=="Enregistrement")[0].button.children[0].click()}const Qe=useTemplateRef("tabs");return(en,tn)=>{const an=__unplugin_components_1,cn=__unplugin_components_2;return openBlock(),createBlock(cn,{side:side$1,visibility:!0,width:300,padding:16,id:"MenuCatalogueContentClose",modelValue:unref(t),"onUpdate:modelValue":tn[3]||(tn[3]=un=>isRef(t)?t.value=un:null),ref_key:"wrapper",ref:Be},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuTierceContent",class:normalizeClass([unref(Ge)==="MenuTierceContent"?"activeTab":"inactiveTab"])},[createVNode(MenuTierce,{onOnModalShareOpen:tn[0]||(tn[0]=un=>en.$emit("onModalShareOpen")),onOnModalPrintOpen:tn[1]||(tn[1]=un=>en.$emit("onModalPrintOpen")),onOnModalThemeOpen:tn[2]||(tn[2]=un=>en.$emit("onModalThemeOpen")),onOnEnregistrementOpen:Ze})],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(ke),un=>(openBlock(),createBlock(an,{ref_for:!0,ref:"tabs",side:side$1,icon:un.icon,visibility:un.visibility,id:un.componentName,active:Ve(un.componentName),title:un.title,onTabClicked:je},null,8,["icon","visibility","id","active","title"]))),256))]),_:1},8,["modelValue"])}}},LeftMenuTool=_export_sfc(_sfc_main$h,[["__scopeId","data-v-96595704"]]),_hoisted_1$9=["innerHTML"],__default__$b={name:"LayerCatalogue"},_sfc_main$g=Object.assign(__default__$b,{props:{layer:Object,active:Boolean},setup(Oe){const e=useMapStore(),t=Oe,ke=ref(t.active);function Ge(Be,je){ke.value=Be,ke.value?e.addLayer(je.key):e.removeLayer(je.key)}return onUpdated(()=>{ke.value=t.active}),(Be,je)=>{const Ve=vt$1;return openBlock(),createElementBlock(Fragment,null,[createVNode(Ve,{"model-value":unref(ke),label:Oe.layer.title,id:Oe.layer.id,"onUpdate:modelValue":je[0]||(je[0]=Ze=>Ge(Ze,Oe.layer))},null,8,["model-value","label","id"]),createBaseVNode("div",{class:"layer-description",innerHTML:Oe.layer.description},null,8,_hoisted_1$9)],64)}}}),__default__$a={name:"LayerList"},_sfc_main$f=Object.assign(__default__$a,{props:{layers:Object,selectedLayers:Object,listName:String},setup(Oe){return(e,t)=>(openBlock(!0),createElementBlock(Fragment,null,renderList(Oe.layers,ke=>(openBlock(),createBlock(_sfc_main$g,{key:`${ke.key}-${Oe.listName}`,active:Oe.selectedLayers?Oe.selectedLayers.filter(Ge=>Ge.key==ke.key).length>0:!1,layer:ke},null,8,["active","layer"]))),128))}}),__default__$9={name:"MenuCatalogueThematique"},_sfc_main$e=Object.assign(__default__$9,{props:{thematicLabel:String,layersCount:Number},setup(Oe){const e=Oe,t=computed(()=>e.thematicLabel+` (${e.layersCount})`),ke=ref("");return(Ge,Be)=>{const je=fa;return openBlock(),createBlock(je,{title:unref(t),"expanded-id":unref(ke),onExpand:Be[0]||(Be[0]=Ve=>ke.value=Ve)},{default:withCtx(()=>[renderSlot(Ge.$slots,"default")]),_:3},8,["title","expanded-id"])}}});function useSearchInArray(Oe,e,t){return Oe.filter(ke=>{if(t.map(Ge=>{if(ke.hasOwnProperty(Ge)&&ke[Ge]&&ke[Ge].toLowerCase().includes(e==null?void 0:e.toLowerCase()))return!0}).includes(!0))return ke})}const _hoisted_1$8={class:"catalogue-content-with-radio-btn"},__default__$8={name:"DataLayerCatalogue"},_sfc_main$d=Object.assign(__default__$8,{props:{dataLayers:Object,currDataFilter:String,searchString:String,selectedLayers:Object},setup(Oe){const e=Oe,t=computed(()=>Ge(e.dataLayers)),ke=computed(()=>Be(e.dataLayers));function Ge(je){let Ve=[...new Set(Object.values(je).filter(Ze=>{if(Ze.hasOwnProperty("thematic")&&Ze.thematic.length>0)return Ze.thematic}).map(Ze=>Ze.thematic))].map(Ze=>({thematicLabel:Ze,layers:useSearchInArray(Object.values(je).filter(Qe=>Qe.hasOwnProperty("thematic")&&Ze===Qe.thematic).map(Qe=>Qe),e.searchString,["title","description","name"])}));return Ve.push({thematicLabel:"Autres",layers:useSearchInArray(Object.values(je).filter(Ze=>{if(!Ze.hasOwnProperty("thematic")||Ze.thematic.length===0)return Ze}),e.searchString,["title","description","name"])}),Ve}function Be(je){let Ve=[...new Set(Object.values(je).filter(Ze=>{if(Ze.hasOwnProperty("producer")&&Ze.producer.length>0)return Ze.producer}).map(Ze=>Ze.producer))].map(Ze=>({producerLabel:Ze,layers:useSearchInArray(Object.values(je).filter(Qe=>Qe.hasOwnProperty("producer")&&Ze===Qe.producer).map(Qe=>Qe),e.searchString,["title","description","name"])}));return Ve.push({producerLabel:"IGN",layers:useSearchInArray(Object.values(je).filter(Ze=>{if(!Ze.hasOwnProperty("producer")||Ze.producer.length==0)return Ze}),e.searchString,["title","description","name"])}),Ve}return(je,Ve)=>{const Ze=_sfc_main$f,Qe=_sfc_main$e,en=pa;return openBlock(),createElementBlock("div",_hoisted_1$8,[Oe.currDataFilter==="producteur"?(openBlock(!0),createElementBlock(Fragment,{key:0},renderList(unref(ke),tn=>(openBlock(),createBlock(en,{key:tn.producerLabel},{default:withCtx(()=>[tn.layers.length>0?(openBlock(),createBlock(Qe,{key:0,"thematic-label":tn.producerLabel,"layers-count":tn.layers.length},{default:withCtx(()=>[createVNode(Ze,{"list-name":Oe.currDataFilter,"selected-layers":Oe.selectedLayers,layers:tn.layers},null,8,["list-name","selected-layers","layers"])]),_:2},1032,["thematic-label","layers-count"])):createCommentVNode("",!0)]),_:2},1024))),128)):createCommentVNode("",!0),Oe.currDataFilter==="theme"?(openBlock(!0),createElementBlock(Fragment,{key:1},renderList(unref(t),tn=>(openBlock(),createBlock(en,{key:tn.thematicLabel},{default:withCtx(()=>[tn.layers.length>0?(openBlock(),createBlock(Qe,{key:0,"thematic-label":tn.thematicLabel,"layers-count":tn.layers.length},{default:withCtx(()=>[createVNode(Ze,{"list-name":Oe.currDataFilter,"selected-layers":Oe.selectedLayers,layers:tn.layers},null,8,["list-name","selected-layers","layers"])]),_:2},1032,["thematic-label","layers-count"])):createCommentVNode("",!0)]),_:2},1024))),128)):createCommentVNode("",!0),Oe.currDataFilter=="tout"?(openBlock(),createBlock(Ze,{key:2,"list-name":Oe.currDataFilter,"selected-layers":Oe.selectedLayers,layers:unref(useSearchInArray)(e.dataLayers,Oe.searchString,["title","description","name"])},null,8,["list-name","selected-layers","layers"])):createCommentVNode("",!0)])}}}),_hoisted_1$7={class:"catalogue-container"},_hoisted_2$4={class:"catalogue-search-bar"},__default__$7={name:"CatalogueMenu"},_sfc_main$c=Object.assign(__default__$7,{props:{layers:Object,selectedLayers:Object},setup(Oe){const e=dist.useLogger();useMapStore();const t=Oe;e.debug(t.layers);const ke=ref(""),Ge=computed(()=>Object.values(t.layers).filter(dn=>{if(dn.hasOwnProperty("base")&&dn.base)return dn})),Be=computed(()=>Object.values(t.layers).filter(dn=>{if(!dn.hasOwnProperty("base")||!dn.base)return dn})),je="Liste des couches",Ve=[{title:"Fonds de carte",tabId:"tab-0",panelId:"tab-content-0"},{title:"Données",tabId:"tab-1",panelId:"tab-content-10"}],Ze=ref(0),Qe=ref(!0),en=0;function tn(dn){Qe.value=Ze.value<dn,Ze.value=dn}function an(dn){ke.value=dn}const cn=[{label:"Producteur",value:"producteur"},{label:"Thème",value:"theme"},{label:"Tout",value:"tout"}],un=ref("producteur");return(dn,fn)=>{const pn=Fe,gn=Pt$1,yn=Po,vn=td$1;return openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$4,[createVNode(pn,{"model-value":unref(ke),"onUpdate:modelValue":an},null,8,["model-value"])]),createVNode(vn,{"tab-list-name":je,"tab-titles":Ve,"initial-selected-index":en,onSelectTab:tn},{default:withCtx(()=>[createVNode(gn,{class:"catalogue-content","panel-id":"tab-content-0","tab-id":"tab-0",selected:unref(Ze)===0,asc:unref(Qe)},{default:withCtx(()=>[createVNode(_sfc_main$f,{"list-name":"dataLayer","selected-layers":Oe.selectedLayers,layers:unref(useSearchInArray)(unref(Ge),unref(ke),["title","description","name"])},null,8,["selected-layers","layers"])]),_:1},8,["selected","asc"]),createVNode(gn,{"panel-id":"tab-content-1","tab-id":"tab-1",selected:unref(Ze)===1,asc:unref(Qe)},{default:withCtx(()=>[createVNode(yn,{inline:!0,"model-value":unref(un),small:!0,name:"filtre",options:cn,"onUpdate:modelValue":fn[0]||(fn[0]=An=>un.value=An)},null,8,["model-value"]),createVNode(_sfc_main$d,{"data-layers":unref(Be),"curr-data-filter":unref(un),"search-string":unref(ke),"selected-layers":Oe.selectedLayers},null,8,["data-layers","curr-data-filter","search-string","selected-layers"])]),_:1},8,["selected","asc"])]),_:1})])}}}),__unplugin_components_0=_export_sfc(_sfc_main$c,[["__scopeId","data-v-bbb2ef91"]]),_hoisted_1$6={class:"control-list-element"},__default__$6={name:"ControlListElement"},_sfc_main$b=Object.assign(__default__$6,{props:mergeModels({controlListElementOptions:Object,selectedControls:()=>[]},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Oe){const e=Oe,t=useModel(Oe,"modelValue"),ke=ref();return watch(ke,Ge=>{Ge===!0&&!t.value.includes(e.controlListElementOptions.name)&&(t.value=[...t.value,e.controlListElementOptions.name]),Ge===!1&&(t.value=t.value.filter(Be=>Be!==e.controlListElementOptions.name))}),onMounted(()=>{}),onUpdated(()=>{}),(Ge,Be)=>{const je=Rd;return openBlock(),createElementBlock("tr",_hoisted_1$6,[Be[1]||(Be[1]=createBaseVNode("td",{class:"control-list-element-img"},null,-1)),createBaseVNode("td",null,[createVNode(je,mergeProps({disabled:Oe.controlListElementOptions.disabled,hint:Oe.controlListElementOptions.hint,inputId:Oe.controlListElementOptions.id,label:Oe.controlListElementOptions.label,labelLeft:"",modelValue:t.value===!0||Array.isArray(t.value)&&t.value.includes(Oe.controlListElementOptions.name),"onUpdate:modelValue":Be[0]||(Be[0]=Ve=>isRef(ke)?ke.value=Ve:null)},Ge.$attrs),null,16,["disabled","hint","inputId","label","modelValue"])])])}}}),ControlListElement=_export_sfc(_sfc_main$b,[["__scopeId","data-v-c8a00218"]]),_hoisted_1$5={class:"control-container"},_hoisted_2$3={class:"control-search-bar"},_hoisted_3={class:"control-content"},__default__$5={name:"MenuControl"},_sfc_main$a=Object.assign(__default__$5,{props:mergeModels({selectedControls:Array},{modelValue:{},modelModifiers:{}}),emits:["update:modelValue"],setup(Oe){dist.useLogger();const e=useMapStore(),t=Oe,ke=useModel(Oe,"modelValue"),Ge=useControlsMenuOptions(),Be=computed(()=>Ge.filter(Ze=>{if(Ze.label.toLowerCase().includes(je.value.toLowerCase())||Ze.hint.toLowerCase().includes(je.value.toLowerCase())||Ze.name.toLowerCase().includes(je.value.toLowerCase()))return Ze}));computed(()=>t.selectedControls?Be.value.filter(Ze=>{if(t.selectedControls.includes(Ze.name))return Ze}):[]),ref(0),ref(!0);const je=ref("");function Ve(Ze){je.value=Ze}return watch(ke,Ze=>{e.cleanControls();for(let Qe=0;Qe<Ze.length;Qe++){const en=Ze[Qe];e.addControl(en)}}),onMounted(()=>{}),onUpdated(()=>{}),(Ze,Qe)=>{const en=Fe;return openBlock(),createElementBlock("div",_hoisted_1$5,[Qe[1]||(Qe[1]=createBaseVNode("h4",null,"Gestion d'outils",-1)),createBaseVNode("div",_hoisted_2$3,[createVNode(en,{"model-value":unref(je),"onUpdate:modelValue":Ve},null,8,["model-value"])]),createBaseVNode("div",_hoisted_3,[createBaseVNode("table",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(Be),(tn,an)=>(openBlock(),createBlock(ControlListElement,{key:an,modelValue:ke.value,"onUpdate:modelValue":Qe[0]||(Qe[0]=cn=>ke.value=cn),"model-value":t.selectedControls,"control-list-element-options":tn},null,8,["modelValue","model-value","control-list-element-options"]))),128))])])])}}}),MenuControl=_export_sfc(_sfc_main$a,[["__scopeId","data-v-27e46f0d"]]),side="right",_sfc_main$9={__name:"RightMenuTool",props:{selectedControls:{Object},selectedLayers:{Object}},setup(Oe){const e=useDataStore(),t=computed(()=>[{componentName:"MenuCatalogue",icon:"catalogIcon",title:"Catalogue de données",visibility:!0},{componentName:"MenuControl",icon:"menuWidgetIcon",title:"Catalogue d'outils",visibility:!0}]),ke=ref("MenuControlContent"),Ge=ref(),Be=ref(null);function je(Ze){Ve(Ze)&&Ge.value?Be.value.closeMenu():(ke.value=Ze+"Content",Be.value.openMenu())}function Ve(Ze){return ke.value.replace("Content","")===Ze}return(Ze,Qe)=>{const en=__unplugin_components_0,tn=__unplugin_components_1,an=__unplugin_components_2;return openBlock(),createBlock(an,{side,visibility:!0,id:unref(ke),modelValue:unref(Ge),"onUpdate:modelValue":Qe[0]||(Qe[0]=cn=>isRef(Ge)?Ge.value=cn:null),ref_key:"wrapper",ref:Be},{content:withCtx(()=>[createBaseVNode("div",{id:"MenuCatalogueContent",class:normalizeClass([unref(ke)==="MenuCatalogueContent"?"activeTab":"inactiveTab"])},[createVNode(en,{"selected-layers":Oe.selectedLayers,layers:unref(e).getLayers()},null,8,["selected-layers","layers"])],2),createBaseVNode("div",{id:"MenuControlContent",class:normalizeClass([unref(ke)==="MenuControlContent"?"activeTab":"inactiveTab"])},[createVNode(MenuControl,{"selected-controls":Oe.selectedControls},null,8,["selected-controls"])],2)]),navButtons:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(t),cn=>(openBlock(),createBlock(tn,{visibility:cn.visibility,side,icon:cn.icon,id:cn.componentName,active:Ve(cn.componentName),title:cn.title,onTabClicked:je},null,8,["visibility","icon","id","active","title"]))),256))]),_:1},8,["id","modelValue"])}}},RightMenuTool=_export_sfc(_sfc_main$9,[["__scopeId","data-v-47d2943b"]]),_hoisted_1$4={id:"map-and-tools-container"},_hoisted_2$2={class:"modal-container"},_sfc_main$8=defineComponent({__name:"CartoAndTools",setup(Oe){const e=useMapStore(),t=useDataStore(),ke=ref(null),Ge=ref(null),Be=ref(null);provide("refPrintModal",Be),provide("modalShareRef",Ge);const je=()=>{Ge.value.onModalShareOpen()},Ve=()=>{ke.value.openModalTheme()},Ze=()=>{Be.value.onModalPrintOpen()},Qe=computed(()=>e.getLayers().map(cn=>{var un=t.getLayerByID(cn),dn=e.getLayerProperty(cn);return un.opacity=dn.opacity,un.visible=dn.visible,un.gray=dn.gray,un})),en=computed(()=>e.getControls()),tn=ref(null);return provide("selectedLayers",Qe),(an,cn)=>(openBlock(),createElementBlock("div",_hoisted_1$4,[createVNode(LeftMenuTool,{onOnModalShareOpen:je,onOnModalPrintOpen:Ze,onOnModalThemeOpen:Ve}),createVNode(Carto,{ref_key:"cartoRef",ref:tn,"selected-layers":unref(Qe),"selected-controls":unref(en)},null,8,["selected-layers","selected-controls"]),createVNode(RightMenuTool,{"selected-layers":unref(Qe),"selected-controls":unref(en)},null,8,["selected-layers","selected-controls"]),createBaseVNode("div",_hoisted_2$2,[createVNode(_sfc_main$Q,{ref_key:"refModalTheme",ref:ke},null,512),createVNode(PrintModal,{ref_key:"refPrintModal",ref:Be},null,512),createVNode(ShareModal,{ref_key:"modalShareRef",ref:Ge},null,512)])]))}}),CartoAndTools=_export_sfc(_sfc_main$8,[["__scopeId","data-v-5c733fc8"]]),_sfc_main$7={},_hoisted_1$3={class:"loader"};function _sfc_render(Oe,e){return openBlock(),createElementBlock("span",_hoisted_1$3)}const Patience=_export_sfc(_sfc_main$7,[["render",_sfc_render],["__scopeId","data-v-8df93c18"]]),_sfc_main$6={__name:"StoreData",props:{},async setup(Oe){let e,t;const ke=dist.useLogger(),Ge=useDataStore(),{fetchData:Be}=Ge,je=([e,t]=withAsyncContext(()=>Be()),e=await e,t(),e);return ke.debug(je),(Ve,Ze)=>unref(Ge).isLoaded&&!unref(Ge).error?renderSlot(Ve.$slots,"default",{key:0}):createCommentVNode("",!0)}},__default__$4={},_sfc_main$5=Object.assign(__default__$4,{__name:"ModalInformation",setup(Oe){const e=useEulerian(),t=useMapStore(),Ge=useDataStore().getInformations(),Be=Ge.title,je=Ge.description,Ve=Ge.type,Ze=Ge.version,Qe=ref(Ge.opened&&Ze!==parseInt(t.noInformation,10));Qe.value&&e.pause();const en=()=>{Qe.value=!1,e.resume()},tn=()=>{Qe.value=!1,t.noInformation=Ze,e.resume()};return(an,cn)=>{const un=ba,dn=$s;return openBlock(),createBlock(dn,{opened:unref(Qe),title:unref(Be),size:"md",onClose:en},{default:withCtx(()=>[createVNode(un,{description:unref(je),type:unref(Ve)},null,8,["description","type"]),createBaseVNode("button",{class:"fr-btn--tertiary-no-outline",title:"ne plus afficher ce message",type:"button",onClick:tn},cn[0]||(cn[0]=[createBaseVNode("span",null,"Ne plus afficher ce message",-1)]))]),_:1},8,["opened","title"])}}}),_hoisted_1$2={class:"fr-container fr-container--fluid fr-container-md"},_hoisted_2$1={class:"patience-container"},_sfc_main$4=defineComponent({__name:"Load",setup(Oe){return(e,t)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2$1,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$6,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createVNode(_sfc_main$5)]),createVNode(CartoAndTools)]),_:1})]),_:1}))}}),_hoisted_1$1={class:"map-container"},_hoisted_2={class:"patience-container"},__default__$3={},_sfc_main$3=Object.assign(__default__$3,{__name:"Embed",setup(Oe){const e=useMapStore(),t=useDataStore(),ke=computed(()=>e.getLayers().map(Ze=>{var Qe=t.getLayerByID(Ze),en=e.getLayerProperty(Ze);return Qe.opacity=en.opacity,Qe.visible=en.visible,Qe.gray=en.gray,Qe})),Ge=["ScaleLine","Zoom"];function Be(){var Ve=document.querySelector(".fr-header");Ve.classList.add("gpf-hidden")}function je(){var Ve=document.querySelector(".fr-footer");Ve.classList.add("gpf-hidden")}return onMounted(()=>{Be(),je()}),(Ve,Ze)=>(openBlock(),createBlock(Suspense,null,{fallback:withCtx(()=>[createBaseVNode("div",_hoisted_2,[createVNode(Patience)])]),default:withCtx(()=>[createVNode(_sfc_main$6,null,{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[createVNode(Carto,{"selected-layers":unref(ke),"selected-controls":Ge},null,8,["selected-layers"])])]),_:1})]),_:1}))}}),__default__$2={},_sfc_main$2=Object.assign(__default__$2,{__name:"Login",setup(Oe){const e=useRouter(),t=inject("services");return onMounted(()=>{const ke=location.search,Ge=new URLSearchParams(ke);var Be=Ge.get("code"),je=Ge.get("session_state"),Ve=Ge.get("state");ke||t.getAccessLogin().then(Ze=>{location.href=Ze}),Be&&je&&Ve&&e.push({path:"/"})}),(ke,Ge)=>renderSlot(ke.$slots,"default")}}),__default__$1={},_sfc_main$1=Object.assign(__default__$1,{__name:"Logout",setup(Oe){const e=useRouter(),t=inject("services");return onMounted(()=>{const ke=location.search;var Be=new URLSearchParams(ke).get("session_state");ke||t.getAccessLogout().then(je=>{location.href=je}),Be&&e.push({path:"/"})}),(ke,Ge)=>renderSlot(ke.$slots,"default")}}),_hoisted_1={class:"fr-container fr-p-2w"},__default__={},_sfc_main=Object.assign(__default__,{__name:"Bookmarks",setup(Oe){useRouter(),inject("services");const e="Favoris",t="Not yet implemented !";return onBeforeMount(()=>{}),onMounted(()=>{}),(ke,Ge)=>{const Be=ba;return openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("h2",null,toDisplayString(e)),createVNode(Be,{type:"info",title:"Information",description:t,closed:!1,closeable:!1})]),renderSlot(ke.$slots,"default")],64)}}}),MAIN_TITLE="Le service public des cartes et données du territoire | cartes.gouv.fr",routes=[{path:"/",name:"Carte",component:_sfc_main$4},{path:"/embed",name:"Carte embarquée",component:_sfc_main$3},{path:"/login",name:"Se connecter",component:_sfc_main$2},{path:"/logout",name:"Se deconnecter",component:_sfc_main$1},{path:"/bookmarks",name:"Favoris",component:_sfc_main}],router=createRouter({history:createWebHistory("/cartes.gouv.fr-entree-carto"),routes});router.beforeEach(Oe=>{if(Oe.fullPath==="/accueil"&&!window.location.href.includes("/accueil"))return window.open(Oe.href),!1;const e=Oe.meta.title?`${Oe.meta.title} - `:"";document.title=`${e}${MAIN_TITLE}`});const RiArrowRightLine={name:"ri-arrow-right-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M16.172 11l-5.364-5.364 1.414-1.414L20 12l-7.778 7.778-1.414-1.414L16.172 13H4v-2z"/>'},RiBookmarkLine={name:"ri-bookmark-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5 2h14a1 1 0 011 1v19.143a.5.5 0 01-.766.424L12 18.03l-7.234 4.536A.5.5 0 014 22.143V3a1 1 0 011-1zm13 2H6v15.432l6-3.761 6 3.761V4z"/>'},RiCloseLine={name:"ri-close-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/>'},RiFlagLine={name:"ri-flag-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5 16v6H3V3h9.382a1 1 0 01.894.553L14 5h6a1 1 0 011 1v11a1 1 0 01-1 1h-6.382a1 1 0 01-.894-.553L12 16H5zM5 5v9h8.236l1 2H19V7h-6.236l-1-2H5z"/>'},RiHome2Line={name:"ri-home-2-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346 0L23 11h-3v9a1 1 0 01-1 1zM6 19h12V9.157l-6-5.454-6 5.454V19z"/>'},RiHome4Line={name:"ri-home-4-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M19 21H5a1 1 0 01-1-1v-9H1l10.327-9.388a1 1 0 011.346 0L23 11h-3v9a1 1 0 01-1 1zm-6-2h5V9.157l-6-5.454-6 5.454V19h5v-6h2v6z"/>'},RiMenuFill={name:"ri-menu-fill",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/>'},RiQuestionMark={name:"ri-question-mark",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M12 19a1.5 1.5 0 11-.001 3.001A1.5 1.5 0 0112 19zm0-17a6 6 0 016 6c0 2.165-.753 3.29-2.674 4.923C13.399 14.56 13 15.297 13 17h-2c0-2.474.787-3.695 3.031-5.601C15.548 10.11 16 9.434 16 8c0-2.21-1.79-4-4-4S8 5.79 8 8v1H6V8a6 6 0 016-6z"/>'},RiRefreshLine={name:"ri-refresh-line",minX:0,minY:0,width:24,height:24,raw:'<path fill="none" d="M0 0h24v24H0z"/><path d="M5.463 4.433A9.961 9.961 0 0112 2c5.523 0 10 4.477 10 10 0 2.136-.67 4.116-1.81 5.74L17 12h3A8 8 0 006.46 6.228l-.997-1.795zm13.074 15.134A9.961 9.961 0 0112 22C6.477 22 2 17.523 2 12c0-2.136.67-4.116 1.81-5.74L7 12H4a8 8 0 0013.54 5.772l.997 1.795z"/>'},FaUserCircle={name:"fa-user-circle",minX:-51.52,minY:-43.52,width:599.04,height:599.04,raw:'<path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/>'},BiChevronDoubleRight={name:"bi-chevron-double-right",minX:-1.6,minY:-1.6,width:19.2,height:19.2,raw:'<path fill-rule="evenodd" d="M3.646 1.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L9.293 8 3.646 2.354a.5.5 0 010-.708z"/><path fill-rule="evenodd" d="M7.646 1.646a.5.5 0 01.708 0l6 6a.5.5 0 010 .708l-6 6a.5.5 0 01-.708-.708L13.293 8 7.646 2.354a.5.5 0 010-.708z"/>'},CoCopy={name:"co-copy",minX:-51.2,minY:-51.2,width:614.4,height:614.4,raw:'<path fill="var(--ci-primary-color, currentColor)" d="M408 432h-32v32H112V136h32v-32H80v392h328v-64z" class="ci-primary"/><path fill="var(--ci-primary-color, currentColor)" d="M176 16v384h320V153.373L358.627 16zm288 352H208V48h104v152h152zm0-200H344V48h1.372L464 166.627z" class="ci-primary"/>'},IoClose={name:"io-close",minX:0,minY:0,width:512,height:512,raw:'<path d="M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"/>'},PxPrint={name:"px-print",minX:-1.8,minY:-1.8,width:27.6,height:27.6,raw:'<path fill="currentColor" d="M6 2h12v6h4v10h-4v4H6v-4H2V8h4V2zm2 6h8V4H8v4zm-2 8v-4h12v4h2v-6H4v6h2zm2-2v6h8v-6H8z"/>'},MdCroplandscapeSharp={name:"md-croplandscape-sharp",minX:.48,minY:.48,width:23.04,height:23.04,raw:'<path fill="none" d="M0 0h24v24H0V0z"/><path d="M21 5H3v14h18V5zm-2 12H5V7h14v10z"/>'},MdCropportraitSharp={name:"md-cropportrait-sharp",minX:.48,minY:.48,width:23.04,height:23.04,raw:'<path fill="none" d="M0 0h24v24H0V0z"/><path d="M19 3H5v18h14V3zm-2 16H7V5h10v14z"/>'},icons=Object.freeze(Object.defineProperty({__proto__:null,BiChevronDoubleRight,CoCopy,FaUserCircle,IoClose,MdCroplandscapeSharp,MdCropportraitSharp,PxPrint,RiArrowRightLine,RiBookmarkLine,RiCloseLine,RiFlagLine,RiHome2Line,RiHome4Line,RiMenuFill,RiQuestionMark,RiRefreshLine},Symbol.toStringTag,{value:"Module"}));let customIcons={catalogIcon:{name:"catalogIcon",width:24,height:24,raw:"<path d='M13 21V23H11V21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H9C10.1947 3 11.2671 3.52375 12 4.35418C12.7329 3.52375 13.8053 3 15 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H13ZM20 19V5H15C13.8954 5 13 5.89543 13 7V19H20ZM11 19V7C11 5.89543 10.1046 5 9 5H4V19H11Z'/>"},menuWidgetIcon:{name:"menuWidgetIcon",width:24,height:24,raw:"<path d='M5.32894 3.27158C6.56203 2.8332 7.99181 3.10749 8.97878 4.09446C10.0997 5.21537 10.3014 6.90741 9.58381 8.23384L20.2925 18.9437L18.8783 20.358L8.16933 9.64875C6.84276 10.3669 5.1502 10.1654 4.02903 9.04421C3.04178 8.05696 2.76761 6.62665 3.20652 5.39332L5.44324 7.63C6.02903 8.21578 6.97878 8.21578 7.56456 7.63C8.15035 7.04421 8.15035 6.09446 7.56456 5.50868L5.32894 3.27158ZM15.6963 5.15512L18.8783 3.38735L20.2925 4.80157L18.5247 7.98355L16.7569 8.3371L14.6356 10.4585L13.2214 9.04421L15.3427 6.92289L15.6963 5.15512ZM8.97878 13.2869L10.393 14.7011L5.08969 20.0044C4.69917 20.3949 4.066 20.3949 3.67548 20.0044C3.31285 19.6418 3.28695 19.0699 3.59777 18.6774L3.67548 18.5902L8.97878 13.2869Z'/>"},LayerImport:{name:"LayerImport",width:24,height:24,raw:"<path d='M15 4H5V20H19V8H15V4ZM3 2.9918C3 2.44405 3.44749 2 3.9985 2H16L20.9997 7L21 20.9925C21 21.5489 20.5551 22 20.0066 22H3.9934C3.44476 22 3 21.5447 3 21.0082V2.9918ZM13 12V16H11V12H8L12 8L16 12H13Z'/>"},OverviewMap:{id:"OverviewMap",width:24,height:24,raw:"<path d='M2 5L9 2L15 5L21.303 2.2987C21.5569 2.18992 21.8508 2.30749 21.9596 2.56131C21.9862 2.62355 22 2.69056 22 2.75827V19L15 22L9 19L2.69696 21.7013C2.44314 21.8101 2.14921 21.6925 2.04043 21.4387C2.01375 21.3765 2 21.3094 2 21.2417V5ZM15 19.7639V7.17594L14.9352 7.20369L9 4.23607V16.8241L9.06476 16.7963L15 19.7639Z' />"},Isocurve:{id:"Isocurve",width:24,height:24,raw:"<path d='M13 11V6H11V13H17V11H13ZM18.364 17.364L12 23.7279L5.63604 17.364C2.12132 13.8492 2.12132 8.15076 5.63604 4.63604C9.15076 1.12132 14.8492 1.12132 18.364 4.63604C21.8787 8.15076 21.8787 13.8492 18.364 17.364Z' />"},ReverseGeocode:{id:"ReverseGeocode",width:24,height:24,raw:"<path id='Ic&#195;&#180;ne' d='M17.2073 2.29291L15.793 3.70712L18.0859 6.00002H13.0002V8.00001H18.0859L15.793 10.2929L17.2073 11.7071L21.9144 7.00001L17.2073 2.29291ZM7.00015 11.5C9.48543 11.5 11.5002 9.4853 11.5002 7.00001C11.5002 4.51473 9.48543 2.50001 7.00015 2.50001C4.51487 2.50001 2.50015 4.51473 2.50015 7.00001C2.50015 9.4853 4.51487 11.5 7.00015 11.5ZM5.91436 18L8.20726 20.2929L6.79304 21.7071L2.08594 17L6.79304 12.2929L8.20726 13.7071L5.91436 16H11.0002V18H5.91436ZM14.0002 13C13.4479 13 13.0002 13.4477 13.0002 14V20C13.0002 20.5523 13.4479 21 14.0002 21H20.0002C20.5524 21 21.0002 20.5523 21.0002 20V14C21.0002 13.4477 20.5524 13 20.0002 13H14.0002Z' />"},Route:{id:"Route",width:24,height:24,raw:"<path d='M12.0001 3.5148L3.5148 12.0001L12.0001 20.4854L20.4854 12.0001L12.0001 3.5148ZM12.7072 1.39348L22.6067 11.293C22.9972 11.6835 22.9972 12.3167 22.6067 12.7072L12.7072 22.6067C12.3167 22.9972 11.6835 22.9972 11.293 22.6067L1.39348 12.7072C1.00295 12.3167 1.00295 11.6835 1.39348 11.293L11.293 1.39348C11.6835 1.00295 12.3167 1.00295 12.7072 1.39348ZM13.0001 10.0001V7.50008L16.5001 11.0001L13.0001 14.5001V12.0001H10.0001V15.0001H8.00008V11.0001C8.00008 10.4478 8.4478 10.0001 9.00008 10.0001H13.0001Z' />"},MeasureLength:{id:"MeasureLength",width:24,height:24,raw:""},MeasureArea:{id:"MeasureArea",width:24,height:24,raw:""},MeasureAzimuth:{id:"MeasureAzimuth",width:24,height:24,raw:""},Share:{id:"Share",width:24,height:24,raw:""},MousePosition:{id:"MousePosition",width:24,height:24,raw:`<path d='M11 18.43C11 18.21 11.01 18 11.03 17.78L9.06 16.8L9 16.83V4.24L14.94 7.21L15 7.18V12.11C15.91 11.68 16.92 11.43 18 11.43C19.49 11.43 20.87 11.9 22 12.69V2.76C22 2.69 21.99 2.63 21.96 2.56C21.85 2.31 21.56 2.19 21.3 2.3L15 5L9 2L2 5V21.24C2 21.31 2.01 21.37 2.04 21.44C2.15 21.69 2.44 21.81 2.7 21.7L9 19L11.21 20.11C11.08 19.57 11 19.01 11 18.43Z' />
<path d='M21.83 17.79L15.45 13.27C15.23 13.12 14.93 13.27 14.93 13.57L15.67 21.36C15.67 21.66 16.11 21.73 16.26 21.51L17.45 19.43L18.64 21.51C18.79 21.81 19.16 21.95 19.46 21.95C19.61 21.95 19.76 21.88 19.9 21.8C20.34 21.5 20.49 20.98 20.27 20.54L19.08 18.46H21.53C21.9 18.39 22.05 18.02 21.83 17.79Z' />
        `},Territories:{id:"Territories",width:21,height:21,raw:'<path fill-rule="evenodd" clip-rule="evenodd" d="M11.6479 0.985495C11.9419 0.913591 12.2514 1.02796 12.4188 1.2697L12.6352 1.58055H12.7477C13.0651 1.58055 13.3401 1.78064 13.4316 2.07887L13.4708 2.20445C13.6337 2.2391 13.7792 2.32883 13.8819 2.45781C13.9464 2.47003 14.0085 2.49106 14.0679 2.5207L14.3547 2.66111C14.4793 2.72319 14.5799 2.81573 14.6487 2.92829L14.8847 2.87261C15.093 2.82134 15.3208 2.87021 15.4935 3.0032C15.667 3.13739 15.7665 3.33828 15.7665 3.55439V3.80515L16.2513 4.12741C16.3612 4.12121 16.4753 4.14083 16.5788 4.1857L16.6566 4.21875L16.7556 4.17889C16.9089 4.1184 17.0773 4.11019 17.2313 4.15545L17.6196 4.26962C17.7561 4.30988 17.8762 4.38819 17.9664 4.49635L18.2469 4.83223L18.6197 4.79477C18.7695 4.78236 18.9063 4.8094 19.0294 4.87389L19.2564 4.99386L19.5872 4.99967C19.7197 5.00247 19.8479 5.04053 19.9583 5.10983L20.2468 5.28889C20.5594 5.48457 20.6688 5.88835 20.4963 6.20861L20.1853 6.78724L20.1694 6.96109C20.1639 7.01757 20.1527 7.06945 20.1351 7.12072L19.9128 7.75083L19.9302 8.79553C19.9344 9.00743 19.8411 9.20792 19.6739 9.34492L19.2665 9.6782C19.1952 9.73628 19.1127 9.78015 19.0243 9.80779L18.3247 10.6927C18.5644 10.7521 18.7634 10.9306 18.8363 11.1748L18.9125 11.4305L19.0098 11.5507L19.2385 11.885C19.4036 12.1289 19.3971 12.4502 19.2226 12.6861L19.4927 13.0026C19.6078 13.1392 19.6664 13.3104 19.658 13.4855L19.6386 13.85C19.6266 14.0571 19.521 14.2474 19.3579 14.3703L19.4085 14.4176C19.5653 14.5634 19.6454 14.7699 19.6272 14.9832C19.6151 15.126 19.5598 15.2594 19.469 15.3682L19.5539 15.4261L19.6441 15.3946C19.9941 15.274 20.3758 15.4311 20.532 15.7599L20.6494 16.0097C20.7588 16.244 20.7284 16.5172 20.5704 16.7223L20.531 16.7772C20.5685 17.0176 20.4761 17.2603 20.2827 17.4191L19.5625 18.0054L19.2505 18.2019C19.255 18.3102 19.2338 18.4192 19.1879 18.5191C19.1113 18.688 18.9643 18.8226 18.7855 18.8878L18.1548 19.1162C18.0969 19.1358 18.0524 19.1468 18.006 19.153L17.5336 19.2191C17.444 19.2317 17.3495 19.2273 17.2604 19.2055L16.2903 18.9836L15.6446 18.7989C15.6276 18.7941 15.6111 18.7887 15.595 18.7827C15.4472 18.8011 15.2973 18.7739 15.1662 18.7048L14.9441 18.5844C14.7628 18.6209 14.5732 18.5874 14.4164 18.4893L13.8078 18.8486L13.6163 19.2295L13.8025 19.8721C13.8544 20.0531 13.8297 20.2494 13.7355 20.4112C13.6441 20.5709 13.4861 20.691 13.3023 20.7403L12.5337 20.9408C12.479 20.9558 12.4147 20.9642 12.3502 20.9642L12.2479 20.9564L11.6042 20.8439L11.3123 20.9023C11.16 20.9318 11.0001 20.9128 10.8621 20.8485L10.5183 20.6846C10.3389 20.5993 10.2039 20.4425 10.1463 20.257L9.8644 20.1439L9.7464 20.1188C9.7217 20.1485 9.69475 20.1757 9.66535 20.2011C9.50877 20.3361 9.30074 20.3976 9.09434 20.3684L7.87861 20.2075C7.78204 20.1949 7.69099 20.1635 7.60729 20.1144L7.4017 19.9954H7.09282C6.89663 19.9954 6.70718 19.9151 6.57284 19.7749L6.3644 19.5578L5.66784 19.264C5.52595 19.2041 5.4055 19.0981 5.32894 18.9658L5.18685 18.7208L4.88899 18.5598C4.7024 18.4578 4.57276 18.283 4.53213 18.0793C4.49232 17.8726 4.54663 17.6621 4.68116 17.5011L5.145 16.9475L5.40223 15.5681C5.40795 15.5368 5.41611 15.506 5.42612 15.4755C5.38631 15.3716 5.37243 15.2596 5.3859 15.1471L5.59863 13.3252C5.60251 13.2916 5.60884 13.2581 5.61761 13.2255C5.56004 13.1244 5.52819 13.0096 5.52656 12.893C5.5237 12.6937 5.60741 12.5029 5.75623 12.3681C5.71867 12.2986 5.69376 12.2263 5.68131 12.1516L5.35344 11.9865C5.25626 11.9376 5.17052 11.8665 5.10601 11.7808L4.54724 11.053C4.4864 10.9737 4.44414 10.8845 4.42148 10.788L4.25571 10.0509L4.25387 10.0425L4.17977 9.99225C4.11811 9.95059 4.06381 9.89992 4.01808 9.84143L3.77738 9.52878L2.43467 9.00503H2.04861C1.79587 9.00503 1.55946 8.87204 1.43187 8.65773L1.26773 8.38314C1.1779 8.23432 1.14973 8.05586 1.18464 7.88762C1.05623 7.8011 0.959459 7.67832 0.909442 7.53772L0.754286 7.09969C0.633835 6.7588 0.793891 6.38706 1.12666 6.23445L2.14375 5.76878C2.22582 5.73252 2.30401 5.71229 2.38526 5.70568L3.78595 5.58211C4.00705 5.56829 4.21345 5.64319 4.35962 5.7892L4.6189 6.04778L4.67341 6.02675C4.79978 5.97848 4.93574 5.96606 5.06661 5.99049L5.25422 6.02374L5.00087 5.42789L4.81141 4.671C4.7614 4.4679 4.80468 4.2556 4.93044 4.08816C5.05599 3.91952 5.25136 3.81577 5.46613 3.80395L6.04021 3.77531C6.23252 3.75668 6.44994 3.841 6.59836 3.99663L7.09078 4.51557L7.72998 4.63935L7.73672 4.55984C7.75979 4.28224 7.94883 4.04449 8.21852 3.95457L9.4316 3.54638L9.75702 3.25436L9.71067 2.54454C9.70373 2.43017 9.72496 2.31581 9.77192 2.21266L10.0255 1.66748C10.1153 1.4746 10.2866 1.3336 10.4952 1.28012L11.6479 0.985495ZM11.4597 2.96423L11.1295 3.045L11.0939 3.11825L11.1491 3.93344C11.1623 4.13386 11.0797 4.32582 10.9223 4.46068L10.2494 5.0392C10.1766 5.10156 10.0928 5.14796 10.0004 5.17707L9.26324 5.41449L9.49064 5.5717L9.20764 5.70713C9.14964 5.86904 9.02524 6.00616 8.86123 6.08448L8.37823 6.3157C8.23722 6.38144 8.07762 6.40248 7.92742 6.37524L6.73721 6.15511C6.73741 6.15717 6.73761 6.15924 6.73781 6.1613L6.79481 6.95977C6.81901 7.30219 6.5652 7.60028 6.2046 7.65343L5.9006 7.69795C5.82199 7.70922 5.74279 7.70847 5.66519 7.69475L5.07639 7.59464L4.77738 7.70471C4.51438 7.80088 4.21777 7.74115 4.02177 7.55294L3.67597 7.22311L2.75256 7.30087L2.71436 7.3174C2.86376 7.4487 2.94336 7.63371 2.93556 7.82267C2.93876 7.82379 2.94196 7.82511 2.94516 7.82624L4.57158 8.43349C4.69538 8.48139 4.79578 8.55389 4.87218 8.64931L5.07859 8.90608C5.21479 8.89556 5.35359 8.92204 5.47479 8.9844L5.87299 9.18933C6.0334 9.27216 6.1528 9.41172 6.206 9.57419L6.75941 9.85876L6.1644 10.0556C6.0966 10.1846 5.985 10.2902 5.84819 10.3544L6.1982 10.7906L6.81381 11.0872C7.10041 11.2262 7.24921 11.5282 7.17621 11.8218L7.16941 11.8494L7.30281 12.0861C7.40961 12.2754 7.40981 12.4968 7.31361 12.682L7.37021 12.7264C7.47341 12.8092 7.54802 12.9136 7.58762 13.0297L7.97462 14.1295C8.03302 14.2912 8.01902 14.4704 7.93862 14.6246L8.20122 15.3705L7.47922 14.9728C7.38981 14.9937 7.29701 14.9978 7.20681 14.985C7.18821 15.0468 7.16001 15.1066 7.12241 15.1618L6.81721 15.6131L6.5572 16.9481C6.536 17.0583 6.4842 17.1626 6.4078 17.2491L6.3318 17.3361C6.3472 17.356 6.3614 17.3771 6.3744 17.3988L6.494 17.5961L7.09401 17.8384C7.18681 17.8774 7.26221 17.927 7.32701 17.9915L7.42361 18.088H7.61442C7.73762 18.088 7.85962 18.119 7.96682 18.1774L8.21802 18.3168L8.60163 18.3651C8.63963 18.3132 8.68563 18.2663 8.73803 18.2261C8.90323 18.1019 9.11464 18.0538 9.31884 18.0919L10.2991 18.3004L10.9889 18.5634C11.1545 18.6282 11.2845 18.7456 11.3583 18.8914L11.3915 18.885C11.4373 18.876 11.4847 18.8716 11.5317 18.8716L11.6347 18.8793L12.1411 18.9642L12.0915 18.8001C12.0439 18.64 12.0611 18.4717 12.1393 18.3252L12.5357 17.5722C12.5947 17.459 12.6877 17.3643 12.8043 17.2989L13.9689 16.641C14.1743 16.5228 14.4279 16.5149 14.6409 16.615C14.8087 16.5264 14.9999 16.5059 15.1813 16.5555L15.4363 16.6287C15.4475 16.6321 15.4587 16.6355 15.4697 16.6395C15.6911 16.5546 15.9455 16.5808 16.1437 16.7155L16.5237 16.9744C16.6243 17.0423 16.7033 17.1344 16.7531 17.2398L17.2819 17.3547L17.5435 17.32L17.5959 17.3016C17.6213 17.2409 17.6565 17.1836 17.6997 17.1325L17.9283 16.8641C17.9789 16.8057 18.0341 16.7595 18.0979 16.7212L18.539 16.4558L18.7144 16.3175L18.1421 15.9443C17.9565 15.8239 17.8441 15.625 17.8413 15.4124L17.8319 14.7756L17.5937 14.5619C17.4563 14.4407 17.3769 14.267 17.3769 14.0865V13.8549C17.3769 13.5902 17.5443 13.353 17.8035 13.2495L17.7105 13.1452C17.6125 13.0337 17.5569 12.9009 17.5487 12.7602L17.5299 12.4694C17.5283 12.4422 17.5285 12.4151 17.5301 12.3883C17.4437 12.4452 17.3437 12.4839 17.2385 12.4997C17.0519 12.5271 16.8577 12.4822 16.7063 12.3753L16.5045 12.2305C16.2589 12.0547 16.1647 11.7427 16.2757 11.4715L16.3821 11.2121L16.4117 10.8781C16.4213 10.7703 16.4595 10.6657 16.5219 10.5751L16.9687 9.93407L17.4303 9.37378C17.4193 9.29695 17.4227 9.21844 17.4409 9.14237C17.4857 8.95266 17.6167 8.79206 17.8003 8.70209L18.0383 8.58582C18.1171 8.54713 18.2027 8.52328 18.2897 8.51482L18.2779 7.82586C18.2765 7.74716 18.2899 7.66959 18.3181 7.5952L18.5446 6.981L18.5652 6.76668C18.5706 6.71052 18.5838 6.65567 18.604 6.60271C18.5756 6.59256 18.5478 6.58073 18.5212 6.56702L18.3421 6.47648L17.8161 6.5272C17.5675 6.54391 17.3471 6.4562 17.2017 6.28809L16.8537 5.88857L16.7483 5.92896C16.5757 5.99601 16.3773 5.99432 16.2051 5.92426L16.0151 5.84706L15.9621 5.85119C15.8057 5.86303 15.6477 5.82433 15.5187 5.74469L14.6581 5.19698C14.6079 5.16524 14.5623 5.12711 14.5227 5.08428C14.4563 5.09067 14.3887 5.08785 14.3223 5.07583L13.8619 4.99656C13.5577 4.94416 13.3233 4.70561 13.2921 4.41635L13.2805 4.31042C13.0857 4.27586 12.9109 4.16353 12.8063 3.99693L12.7963 3.98096C12.6867 3.95542 12.5841 3.90508 12.4997 3.83464L12.3283 3.69151C12.2851 3.65526 12.2473 3.61526 12.2153 3.57112C12.0079 3.55553 11.8167 3.45335 11.6953 3.28787L11.4597 2.96423Z"/>'},ElevationPath:{id:"ElevationPath",width:19,height:18,raw:'<path d="M2 0V16H18V18H0V0H2ZM17.293 3.293L18.707 4.707L13 10.414L10 7.415L5.707 11.707L4.293 10.293L10 4.586L13 7.585L17.293 3.293Z"/>'}};c$1(...Object.values(icons));c$1(...Object.values(customIcons));async function waitingPrepareApp(){return Promise.resolve()}var storage=localStorage.getItem("service");const services=createServices(storage?JSON.parse(storage).connexion:{}),eulerian=createEulerian({verbose:!0,domain:"acwg.cartes.gouv.fr",isActionEnabled:"reduce",site:{environment:"development",entity:"IGN"}}),logger=dist.createLogger({enabled:!0,level:"debug",callerInfo:!0}),pinia=createPinia(),store=storePlugin({stores:["service"],storage:localStorage});pinia.use(store);const app=createApp(_sfc_main$O);app.use(pinia);app.use(router);app.use(logger);app.use(eulerian);app.use(services);waitingPrepareApp().then(()=>{app.mount("#app")});export{_typeof as _,commonjsGlobal as c,getDefaultExportFromCjs$1 as g};
